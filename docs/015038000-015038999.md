# StackOverflow 问答 15038000-15038999

# air - 我应该为 Adob e AIR 应用程序获取哪种代码签名证书（.exe、.dmg、.deb、.rpm）

> ID：15038001
> 
> 赞同：2
> 
> 时间：2013-02-23T06:53:46.560
> 
> 标签：air, installation, certificate, code-signing

我需要签署我的 Adob​​e AIR 应用程序，它是一个本地安装程序。现在我只有一个 Windows 版本，但很快我将把它移植到其他操作系统，包括移动操作系统。

我的问题是我是否需要为每一个获得单独的代码签名证书还是一个就足够了？32位和64位也重要吗？

`.exe`威瑞信已分别对 Windows ( ) 和 Adob​​e AIR (`.air`和)的证书进行分类`.airi`。那么我应该获得哪一个呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:01:36.280

销售代码签名证书的 CA 总是假装您需要不同的证书来签署不同类型的应用程序。这基本上是一个骗局。大多数情况下，证书完全相同，只是文件格式可能不同。即使您的代码签名工具不支持文件格式，也有一些方法可以在不同格式之间进行转换。所以基本上你买哪个证书都没有关系。

如果您使用强制运行时打包您的 AIR 应用程序，您可以简单地将自签名证书与该`adt`工具一起使用。`adt`之后对创建的可执行文件和安装程序进行签名很重要。如果您直接使用 创建本机安装程序`adt`，请使用代码签名选项提供您的证书。

在 Windows 下，如果您想使用强制运行时打包，您应该使用 Microsoft 的`signtool`实用程序对您的应用程序和安装程序的文件进行签名。`.exe`所以我会为 Windows 选择一个代码签名证书。但正如我所说，这并不重要（而且有比威瑞信更便宜的选择）。

在 Mac OS X（“Gatekeeper”）下，情况有些不同。您只能使用 Apple 颁发的证书。您必须注册“Mac 开发人员计划”（每年 99 美元）才能获得 OS X 的代码签名证书。如果您使用强制运行时，请`adt`使用该`codesign`实用程序对创建的应用程序包进行签名。如果您创建`.pkg`安装程序，请使用该工具的`--sign`选项。`productbuild`iOS 应用程序有一个类似的“iOS 开发人员计划”。

在 Linux 下，您不会使用 CA 颁发的证书对包进行签名。您只需使用可以免费创建的 GPG 密钥对它们进行签名。不过，您必须发布您的公共 GPG 密钥，以便您的客户可以确保您的包是有效的。

对于 Android 应用程序，您可以简单地使用自签名证书 AFAIK。

32 位和 64 位应用程序可以以完全相同的方式进行签名。您不需要单独的证书。但`adt`无论如何只会创建 32 位应用程序。

# javascript - 禁用 IE 后退按钮

> ID：15038007
> 
> 赞同：1
> 
> 时间：2013-02-23T06:54:09.317
> 
> 标签：javascript, jquery

我有一个应用程序，我使用以下代码禁用了 IE8 的后退按钮。

```
window.history.forward();
function noBack() {

    window.history.forward();
} 
```

我知道这段代码将页面返回并再次向前移动页面。我已经调用了页面的 onload 函数，它使文本框只读。我使用以下代码使其只读。

```
$("#IDofTheTextBox").attr('readonly',true); 
```

但是如果我选择文本框并尝试通过按“BackSpace”按钮进行编辑，IE 后退按钮将被调用，并且只读的文本框不再是只读的。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T07:01:16.750

答案很简单**“不”**

如果您试图防止用户丢失他们的工作，请尝试以下操作：

```
window.onbeforeunload = function() { return "Are you sure want to leave this page?."; }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T07:59:55.543

```
function changeHashOnLoad() {
     window.location.href += "#";
     setTimeout("changeHashAgain()", "50"); 
}

function changeHashAgain() {
  window.location.href += "1";
}

var storedHash = window.location.hash;
window.setInterval(function () {
    if (window.location.hash != storedHash) {
         window.location.hash = storedHash;
    }
}, 50); 
```

您在js文件中添加上述javascript函数并onload调用该函数`changeHashOnLoad().`

它在 IE8 中运行良好。我刚刚测试了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T22:17:02.447

我不知道您的页面想要做什么......但这就是我们所做的：

我们有一个评估，我们不希望启用浏览器按钮......因为我们在用户点击下一步/返回等时运行 ajax/逻辑（根据他们的输入确定接下来要显示的内容）。后退和前进按钮会使该过程变得混乱。

所以.....我们让用户在新窗口中打开我们的评估，所以后退按钮已经被禁用......（在新窗口中没有以前的历史记录）。然后，我们的下一个/后退按钮使用 window.location.replace(url); 这将阻止创建历史项目。因此，后退/前进按钮永远不会启用，它们必须使用下一个/上一个按钮来导航我们的工具。

我不会尝试在我提供的示例之外使用按钮。

# android - 在 ActionBarSherlock MenuItem 上添加徽章视图

> ID：15038010
> 
> 赞同：0
> 
> 时间：2013-02-23T06:54:35.617
> 
> 标签：android, actionbarsherlock, badge

我想在 ActionBar MenuItem上添加一个[徽章](https://github.com/jgilfelt/android-viewbadger)

但是数字图标没有显示。

这是我到目前为止所做的

```
public class Main extends SherlockFragmentActivity
{
  private Fragment menuFrag=null;
  private MenuItem menuMsg=null;
  private BadgeView badge=null;

  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    //Do my stuff...
    initUI();
  }

  private void initUI()
  {
    FragmentManager fm=getSupportFragmentManager();
    FragmentTransaction ft=fm.beginTransaction();
    menuFrag=fm.findFragmentByTag("f1");
    if(menuFrag==null)
    {
      menuFrag=new MenuFragment();
      ft.add(menuFrag, "f1");
    }
    ft.commit();

    // badge=new BadgeView(Main.this, (View)menuMsg); //Not working
    badge=new BadgeView(Main.this, menuMsg.getActionView()); //Not working as well
    badge.setBackgroundResource(R.drawable.badge_ifaux);
    badge.setTextSize(10);
    badge.setBadgeMargin(2);
    badge.setText("1");
    badge.show();
  }

  private class MenuFragment extends SherlockFragment
  {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
      super.onCreate(savedInstanceState);
      setHasOptionsMenu(true);
    }

    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {
      menu.add("Cloud").setIcon(R.drawable.icon_cloud).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
      menu.add("List").setIcon(R.drawable.icon_list).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
      menuMsg=menu.add("Msg");
      menuMsg.setIcon(R.drawable.icon_msg).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
      Toast.makeText(Main.this, "Got click: " + item.toString(), Toast.LENGTH_SHORT).show();
      return true;
    }
  }
} 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T18:05:49.917

RRTW,

您使用的库本身不支持标记操作栏菜单项。

[https://github.com/jgilfelt/android-viewbadger/commit/e08c3a78cb92c0c8587790b15e73434f972912cf](https://github.com/jgilfelt/android-viewbadger/commit/e08c3a78cb92c0c8587790b15e73434f972912cf)

然而，这并不意味着你不能让它工作。

设置如下（假设您已经在项目中设置了 viewbager 库）

(1) **onCreateOptionsMenu** --> (2) 添加一个**R.menu.your_place_holder_item** --> (3) **setActionView**与自定义 xml 布局 --> (4) MenuItem 对象的**findViewById**以获取您的按钮/视图来设置徽章。

1）设置你的 onCreateOptionsMenu 并创建一个**R.menu.actionbar_menu_messages**

**R.menu.actionbar_menu_messages**：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
         >
    <item android:showAsAction="ifRoom" android:icon="@drawable/action_bar_pk_content_email"
        android:id="@+id/menuMessages" android:title="More"></item>

</menu> 
```

**onCreateOptions菜单：**

```
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getSupportMenuInflater(); //If you are using the support library otherwise use: getMenuInflater();
    inflater.inflate(R.menu.actionbar_menu_messages, menu);
    this.setupMessagesBadge(menu.findItem(R.id.menuMessages));  //This is part of step 2
    return true;
} 
```

2) 定义了**common_messages_indicator**

**R.layout.common_messages_indicator：**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="64dp"
             android:layout_height="fill_parent"
             android:paddingTop="10dp"
             android:gravity="center">
    <ImageView
        android:id="@+id/imgMessagesIcon"
        android:layout_width="32dp"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:scaleType="fitCenter"
        android:src="@drawable/messages_button"
        android:background="@android:color/transparent"
        android:focusable="false"
        />

   </FrameLayout> 
```

执行**setActionView**将您的自定义 xml 布局添加到 ActionView

```
private void setupMessagesBadge(final MenuItem msgItem) {
    msgItem.setActionView(R.layout.common_messages_indicator);

    if(msgItem.getActionView().findViewById(R.id.imgMessagesIcon) != null)
    {
        ImageView imgMessagesIcon = ((ImageView)msgItem.getActionView().findViewById(R.id.imgMessagesIcon));

        imgMessagesIcon.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                //Your click on the action bar item will be captured here
            }
        });
        int badgeCnt = 20;// Add your count here
        if(messageCenterBadge == null && badgeCnt > 0)
        {
            //imgMessagesIcon is the imageview in your custom view, apply the badge to this view.
            messageCenterBadge = new BadgeView(this, imgMessagesIcon);
            messageCenterBadge.setBadgePosition(BadgeView.POSITION_TOP_RIGHT);
            messageCenterBadge.setBadgeMargin(0);
            messageCenterBadge.setTextSize(12);
            messageCenterBadge.setText(String.valueOf(badgeCnt));
            messageCenterBadge.show();
        }
        else if(messageCenterBadge != null && badgeCnt > 0 )
        {
            messageCenterBadge.setText(String.valueOf(badgeCnt));
            messageCenterBadge.show();
        }
        else if(messageCenterBadge != null && badgeCnt == 0) {
            messageCenterBadge.hide();
        }
    }
} 
```

# java - 如何在使用 before(Date d) 检查日期时忽略时间

> ID：15038015
> 
> 赞同：-3
> 
> 时间：2013-02-23T06:55:07.657
> 
> 标签：java, date

我知道检查下一个日期的替代方法，但我想知道在使用之前是否有可能忽略检查时间。

我有以下代码

```
 public void onDateSet(DatePicker view, int year, int monthOfYear,
          int dayOfMonth) {
      try {
      if (fired == true) {
          return;
      } else {
          // first time fired
          fired = true;
      }
      String date = checkDigit(monthOfYear + 1) + "/"
              + checkDigit(dayOfMonth) + "/" + year;
      strDate = date;
      SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy");

        Date d=df.parse(strDate);
          Calendar cal = Calendar.getInstance();
          cal.add(Calendar.DATE, 1);
        if(d.before(cal.getTime()))
        {
             etDOB.setText(strDate);
        }
        else
        {
            Toast.makeText(context, "Enter Valid Date Of Birth", Toast.LENGTH_SHORT).show();
             etDOB.setText(" ");
        }
    } catch (ParseException e) {
        e.printStackTrace();
    }

  }

d.before(cal.getTime()) checking date but if the selected Date is next Date than it also checking time 
```

示例：选择的日期值是`feb 24 2013`所以 d 包含相同的

```
cal.getTime() also contains feb 24 2013 
```

但是第一个日期有时间`00:00:00 GMT+5:30`，第二个日期有时间，`1:00:00 GMT+5:30`这会导致条件失败。所以我的问题是如何在检查时间之前忽略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T07:10:13.630

创建日历对象时

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 1);
cal.set(Calendar.Minute, 0);
cal.set(Calendar.Second, 0); 
```

现在你的条件不会失败

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T07:27:38.730

`cal.getTime()`您可以使用`df`( )格式化和解析日期，`SimpleDateFormat("MM/dd/yyyy")`这将摆脱时间，然后将结果与`d`.

# opengl - 删除 glPushMatrix() 和 glPopMatrix() 时，OpenGL 动画运行得更快

> ID：15038021
> 
> 赞同：1
> 
> 时间：2013-02-23T06:56:11.530
> 
> 标签：opengl, matrix

```
#include <iostream>
#include <GL/glut.h>
#include <math.h>

using namespace std;

#define WIDTH 400
#define HEIGHT 400

#include <math.h>
#define ColoredVertex(c, v) do{ glColor3fv(c); glVertex3fv(v); }while(0)

GLfloat angle = 0.0f;

void myDisplay(void)
{
     static int list = 0;
     if( list == 0 )
     {
         // 

         GLfloat
             PointA[] = { 0.5f, -sqrt(6.0f)/12, -sqrt(3.0f)/6},
             PointB[] = {-0.5f, -sqrt(6.0f)/12, -sqrt(3.0f)/6},
             PointC[] = { 0.0f, -sqrt(6.0f)/12,   sqrt(3.0f)/3},
             PointD[] = { 0.0f,    sqrt(6.0f)/4,              0};
         GLfloat
             ColorR[] = {1, 0, 0},
             ColorG[] = {0, 1, 0},
             ColorB[] = {0, 0, 1},
             ColorY[] = {1, 1, 0};

         list = glGenLists(1);
         glNewList(list, GL_COMPILE);
         glBegin(GL_TRIANGLES);
         // ABC
         ColoredVertex(ColorR, PointA);
         ColoredVertex(ColorG, PointB);
         ColoredVertex(ColorB, PointC);
         // ACD
         ColoredVertex(ColorR, PointA);
         ColoredVertex(ColorB, PointC);
         ColoredVertex(ColorY, PointD);
         // CBD
         ColoredVertex(ColorB, PointC);
         ColoredVertex(ColorG, PointB);
         ColoredVertex(ColorY, PointD);
         // BAD
         ColoredVertex(ColorG, PointB);
         ColoredVertex(ColorR, PointA);
         ColoredVertex(ColorY, PointD);
         glEnd();
         glEndList();

         glEnable(GL_DEPTH_TEST);
     }
     // 
     glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
     glPushMatrix();
     glRotatef(angle, 1, 0.5, 0);
     glCallList(list);
     glPopMatrix();
     glutSwapBuffers();
}

void myIdle(void)
{
     ++angle;
     if( angle >= 360.0f )
         angle = 0.0f;
     myDisplay();
}

int main(int argc, char* argv[])
{
     glutInit(&argc, argv);
     glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
     glutInitWindowPosition(200, 200);
     glutInitWindowSize(WIDTH, HEIGHT);
     glutCreateWindow("OpenGL window");
     glutDisplayFunc(&myDisplay);
     glutIdleFunc(&myIdle);
     glutMainLoop();
     return 0;
} 
```

这是绘制旋转四面体的一个非常基本的示例。我不明白的是**glPushMatrix()**和**glPopMatrix()**的使用。如果我删除这些代码，程序仍然可以工作，但动画似乎执行得更快。我不知道是什么导致了这种加速。
我已经尝试了另一个例子来找出诀窍。我只是将 myDisplay() 函数更改如下。

```
void myDisplay(void){
     glEnable(GL_DEPTH_TEST);
     glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

     glMatrixMode(GL_PROJECTION);
     glLoadIdentity();
     gluPerspective(75, 1, 1, 400000000);
     glMatrixMode(GL_MODELVIEW);
     glLoadIdentity();
     gluLookAt(0, 0, 200000000, 0, 0, 0, 0, 1, 0);

     static int list = 0;
     static int earthList =0;

     if(list==0){
        list = glGenLists(1);

        glNewList(list, GL_COMPILE);
        glColor3f(1.0f, 0.0f, 0.0f);
        glutSolidSphere(69600000, 20, 20);
        glEndList();
     }
     if(earthList==0){
        earthList = glGenLists(1);

        glNewList(earthList, GL_COMPILE);
        glColor3f(0.0f, 0.0f, 1.0f);
        glutSolidSphere(15945000, 20, 20);
        glEndList();
     }

     // draw a red sun
     glCallList(list);

     // draw the earth
     //glPushMatrix();
     glRotatef(day/360.0*360.0, 0.0f, 0.0f, -1.0f);
     glTranslatef(150000000, 0.0f, 0.0f);
     glCallList(earthList);

     //glPopMatrix();

     glFlush();

     glutSwapBuffers();
} 
```

但是这一次，即使我删除了 glPushMatrix() 和 glPopMatrix() 函数，似乎也没有任何改变。我看不出有什么不同。这真的让我很困惑。
谁能解释这两个示例中 glPushMatrix() 和 glPopMatrix() 的作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T08:52:15.030

在 GL 中，除非您专门加载新矩阵（`glLoadIdentity()`或类似矩阵），否则矩阵运算会与当前活动的任何矩阵一起累积。`glPushMatrix()`并`glPopMatrix()`允许您将当前矩阵存储在堆栈中，并在以后检索它，允许您进行可以丢弃的修改。

在您的第一个示例中，删除`glPushMatrix()`and`glPopMatrix()`将导致旋转与*前一个*旋转连接，从而导致旋转快速加速（我希望它最终会在角度超过 180 度时反转并向后移动）。

在您的第二个示例中，您正在使用 a 重新初始化模型视图矩阵，`glLoadIdentity()`因此不会有这样的变换累积。

# iphone - 缩放后 ImageView Rotation 的行为很奇怪

> ID：15038022
> 
> 赞同：1
> 
> 时间：2013-02-23T06:56:22.440
> 
> 标签：iphone, ios, objective-c, uigesturerecognizer, uislider

我有一个`UISlider`用于缩放`imageView`（而不是`UIPinchGesture`）并且我正在使用`UIRotationGesture`，它们都可以独立工作。缩放而不做旋转手势可以正常工作！但是一旦我执行旋转并且他们放大或缩小`imageview`它就会表现得很奇怪，因为它会失去旋转比例。（这就是我的猜测！）我该如何解决这个问题？

好吧，自从几天以来，我对这些数学问题都不太满意，而且我在论坛中搜索也找不到解决方案。请帮助我:)

**对于缩放**：（这里我不处理变换，因为我不确定）

```
-(void)scale:(UISlider *)sender
{
      float sliderValue = [sender value];
    CGRect newFrame = placeRing.frame;
    newFrame.size = CGSizeMake(sliderValue, sliderValue);
    placeRing.frame = newFrame;
} 
```

**对于旋转**：

```
- (void)twoFingersRotate:(UIRotationGestureRecognizer *)recognizer
{
    isRotated = TRUE;
    if ([recognizer state] == UIGestureRecognizerStateBegan || [recognizer state] == UIGestureRecognizerStateChanged) {
         rotation= recognizer.rotation;
    rotatedTransform = CGAffineTransformRotate([placeRing transform], [recognizer rotation]);
        placeRing.transform = rotatedTransform;
       [recognizer setRotation:0];
    }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:15:21.977

旋转应用了使您用于调整视图大小的框架属性无效的变换。使用边界和中心属性进行缩放。

请参阅以下警告框：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816)

```
-(void)scale:(UISlider *)sender
{
    float sliderValue = [sender value];
    placeRing.bounds = CGRectMake(0, 0, sliderValue, sliderValue);
} 
```

# c# - 将 vba importdll 代码转换为 c#

> ID：15038029
> 
> 赞同：1
> 
> 时间：2013-02-23T06:58:01.280
> 
> 标签：c#, vba, marshalling, dllimport, fatal-error

我有一个导入 dll 的 vba 代码。这是代码：

```
Declare PtrSafe Function g77alscal Lib "g77alscal.dll" _
Alias "g77alscal_" _
(ByRef Nrows As Long, _
ByRef Ncols As Long, _
ByRef Xinput As Single, _
ByRef MDSout As Single, _
ByRef Metric As Single, _
ByRef Sout As Single, _
ByRef Niter As Long, _
ByRef Xdebug As Single, _
ByRef Idebug As Long) As Long 
```

vba中的调用是

```
Dim Distance() As Single
Dim MDSout() As Single
Dim Metric(60) As Single
Dim Sout(2) As Single
Dim Niter As Long
Dim Xdebug(5000) As Single
Dim Idebug(30) As Long
Dim ierr As Long

N = CLng(Ncases)

ierr = g77alscal(N, N, Distance(1, 1), MDSout(1, 1), Metric(1), _
                 Sout(1), Niter, Xdebug(1), Idebug(1)) 
```

在 c# 中，我尝试使用：

```
[DllImport("g77alscal.dll",EntryPoint="g77alscal_")]
static extern double g77alscal(ref long nRows, 
        ref long nCols,
        ref double xInput,
        ref double mdsOut,
        ref double metric,
        ref double sOut,
        ref long nIter,
        ref double xDebug,
        ref long iDebug
    ); 
```

对 c# 函数的调用是：

```
long n1 = Distance.Rows.Count;
long n2 = Distance.Columns.Count;
double n3 = double.Parse(Distance.Rows[0].ItemArray[0].ToString());
double n4 = 0;
double n5 = 0;
double n6 = 0;
double n7 = 0;
long n8 = 0;

double result = g77alscal(ref n1, ref n2, ref  n3,
    ref n4, ref n5, ref n6, ref nIter, ref n7, ref n8); 
```

该代码传递了编译器错误，但它有一个运行时错误（FatalExecutionEngineError 异常）。错误是：

> 运行时遇到致命错误。错误地址位于线程 0x13a0 上的 0x73c36e93。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

我还没有找到 dll 的文档，所以我不能对 dll 说太多，除了它是一个 fortran77 编译代码。它是spss中使用的alscal函数的实现。

我在 C# 中的定义有问题吗？任何帮助或指示都会非常有帮助。

谢谢。

更新：我试图将代码更改为 c# 如下：

```
[DllImport("g77alscal.dll",EntryPoint="g77alscal_")]
    static extern int g77alscal(ref int nRows, 
        ref int nCols,
        ref float xInput,
        ref float mdsOut,
        ref float metric,
        ref float sOut,
        ref int nIter,
        ref float xDebug,
        ref int iDebug
    ); 
```

和呼唤：

```
int n1 = 21;
int n2 = 21;
float n3 = float.Parse(Distance.Rows[0].ItemArray[0].ToString());
float n4 = 0;
float n5 = 0;
float n6 = 0;
float n7 = 0;
int n8 = 0;

int result = g77alscal(ref n1, ref n2, ref  n3,
    ref n4, ref n5, ref n6, ref nIter, ref n7, ref n8); 
```

此外，我发现了另一种模式，每当我在代码处使用断点运行应用程序时，都会抛出上面的错误异常，但是当我不进行调试时，`AccessViolationException`就会抛出 an 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:11:54.683

你原来的“vba 版本”使用类型`Single`来传递一些参数，应该是一个 4 字节的浮点数。它在 C# 中的等价物应该是`float`.

您在代码中使用的`double`是 8 字节浮点数。当函数尝试清理堆栈并返回时，这会导致问题。

整数类型似乎也有同样的问题，其中`Long`vba 是 4 字节，而 C#`long`是 8 字节。你应该`int`改用。

尝试更改`double`为`float`和。`long``int`

# sql - 编写触发器时的变异表

> ID：15038034
> 
> 赞同：0
> 
> 时间：2013-02-23T06:58:50.977
> 
> 标签：sql, oracle, triggers

我已经陷入这个问题很长一段时间了......有人可以帮助我吗？
这是我要实现的东西：我有一个表 A，A 有属性：id、count、total。这里我需要实现这样一个触发器：如果表 A 中的计数被更新，触发器会将总数设置为 1。

我的初始代码是这样的：

```
 CREATE OR REPLACE TRIGGER tri_A AFTER UPDATE OF count ON A
    FOR EACH ROW
    BEGIN
    UPDATE A SET total = 1 WHERE id = :new.id;
    END;
    / 
```

这个问题是变异表。当表被更新时，表将被锁定。我搜索了答案，我尝试了 pragma automatic_transaction，但我得到了一个无效的触发器规范错误。还有其他评论说我们应该尝试使用触发器的组合来做到这一点....我不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:09:46.043

假设`id`是主键，你不想要`UPDATE`表。你只想设置`:new.total`. 您还需要在`BEFORE UPDATE`触发器而不是`AFTER UPDATE`触发器中执行此操作。

```
CREATE OR REPLACE TRIGGER tri_A 
  BEFORE UPDATE OF count ON A
  FOR EACH ROW
BEGIN
  :new.total := 1;
END; 
```

# c - C：我将如何编写一个搜索函数来查找结构数组中的匹配项，并返回（打印）它匹配的整个结构？

> ID：15038035
> 
> 赞同：1
> 
> 时间：2013-02-23T06:59:09.537
> 
> 标签：c, search, loops, struct

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define RECORDS 10 
```

下面的功能是我寻求帮助的功能。

```
static char searchforRecordbystate(char input[3])
{ 
```

for/while/if 循环

搜索结构数组成员

如果找到匹配项

返回（打印）找到匹配项的整个结构

```
 return 0;
} 
```

主要功能 - 第一次使用指针，（xcode 并没有抱怨它设置得尽可能严格）但欢迎大家抱怨，特别是如果我有很大的疏忽。

```
int main() {
    typedef struct {
        char *firstName[RECORDS];
        char *lastName[RECORDS];
        char *street[RECORDS];
        char *city[RECORDS];
        char *state[RECORDS];
        int *zip[RECORDS];
        char *phone[RECORDS];
        int *accountId[RECORDS];
    } Customer ;    

    typedef int records;
    records i = 0; 
```

用于数据输入的数组循环

```
 Customer custArray[RECORDS];
    printf("================================================================\n");
    for(i = 0; i < RECORDS; ++i)
    {
        printf("Enter data for customer %d\n", i + 1);
        printf("Enter firstname, last name, phone\n");
        scanf("%s %s %s", *custArray[i].firstName, *custArray[i].lastName, *custArray[i].phone);
        printf("Enter Address (Street City State ZIP)");
        scanf("%s %s %s*c %d", *custArray[i].street, *custArray[i].city, *custArray[i].state, *custArray[i].zip);
        break;
    }
    char input[3];
    printf("Enter in state to search for customer a customer record:\n");
    scanf("%s", input); 

    searchforRecordbystate(input);  

} 
```

不需要错误检查，现在只是试图爬进学习c。并且在状态成员中不会有重复的数据。希望这会使这更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T07:12:15.033

> 我将如何编写一个搜索函数来查找结构数组中的匹配项并返回（printf）它匹配的整个结构？

1.  在函数外部声明结构数据类型，使其对整个模块“可见”。
2.  创建一个能够漂亮打印结构的函数：

    `void CustomerPrint(const Customer *toPrint) { ... }`

3.  创建一个搜索函数，通过比较给定参数的数组进行迭代：

    `Customer *CustomerFind(const char *name) { ... }`

4.  通过调用连接两个功能块`CustomerFind`，以防结果不`NULL`调用该`CustomerPrint`函数。

当然，接口只是建议，可能会更改。如果您对提案的详细信息有任何疑问，请发表评论，如果您愿意，我会非常详细地解释。

**额外的想法**

在重读我的帖子时，我意识到我在上述提案中做出的一些决定无论如何都需要解释：

在**CustomerPrint**中，所采用的指针是 `const? 因为这个函数不会修改结构的任何字段。因此我们告诉编译器我们不会改变任何东西。

**CustomerFind**应该有所有可搜索字段的参数。（因此鼓励您扩展签名）我建议通过指针获取所有“比较”值，并让调用者那些`NULL`与搜索无关的指针。（例如，如果您有`name`并且`city`您可以保留`city`NULL 以便仅搜索`name`.

该函数本身遍历记录数组并比较不是的字段`NULL`。如果找到一个，它会返回指向该元素的指针 ( `return &(myRecords[n]);`)。如果函数到达数组的末尾，它将返回`NULL`以指示没有匹配的记录。

如果您想拥有“搜索 - 搜索下一个”功能，还可以引入一个概念。如果您也对此概念感兴趣，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T07:17:20.400

```
typedef struct {
    char firstName[NAMEMAX];
    char lastName[NAMXMAX];
    char street[STREETMAX];
    char city[CITYMAX];
    char state[STATEMAX];
    int  zip;
    char phone[PHONEMAX];
    int  accountId;
} Customer ;

Customer Customers[RECORDS];  

static int searchforRecordbystate(char input[]) {
  for (int i = 0; i < RECORDS; i++) {
    if (strcmp(input, Customers[i].state) == 0) {
      printCustomer(Customers[i]);
      return i;
    }
  }
  return -1; // Not found
} 
```

写作`printCustomer()`是读者的练习。

# sqlalchemy - 将 Alembic 与 SQLAlchemy 集成

> ID：15038036
> 
> 赞同：6
> 
> 时间：2013-02-23T06:59:29.740
> 
> 标签：sqlalchemy, alembic

我正在寻找一种将 Alembic 与 SQLAlchemy 集成的方法。我需要一种方法，以便 Alembic`models.py`自动检测我所做的任何更改，并在我运行时在 MySQL 数据库中更新它`alembic revision -m "<message_here>"`和 `alembic upgrade head`.

这是我目前所拥有的。

这是我的应用程序目录结构。

```
/myapplication
    models.py
    __init__.py
    app.py
    /migrations
        env.py
        script.py.mako
        /versions 
```

`models.py`包含以下内容。

```
from sqlalchemy import Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class User(Base):
    """ `User` stores the basic info about a user
    """
    __tablename__ = 'user'
    id = Column(Integer, primary_key=True)
    name = Column(String(255), nullable=False)
    phone = Column(String(15), nullable=False) 
```

我已经`alembic.ini`用我的数据库凭据配置了我的`sqlalchemy.url`

我有以下内容`env.py`

```
from __future__ import with_statement
from alembic import context
from sqlalchemy import engine_from_config, pool
from logging.config import fileConfig
from myapplication import models

# this is the Alembic Config object, which provides
# access to the values within the .ini file in use.
config = context.config

# Interpret the config file for Python logging.
# This line sets up loggers basically.
fileConfig(config.config_file_name)

# add your model's MetaData object here
# for 'autogenerate' support
# from myapp import mymodel
# target_metadata = mymodel.Base.metadata
target_metadata = models.Base.metadata

# other values from the config, defined by the needs of env.py,
# can be acquired:
# my_important_option = config.get_main_option("my_important_option")
# ... etc.

def run_migrations_offline():
    """Run migrations in 'offline' mode.

    This configures the context with just a URL
    and not an Engine, though an Engine is acceptable
    here as well.  By skipping the Engine creation
    we don't even need a DBAPI to be available.

    Calls to context.execute() here emit the given string to the
    script output.

    """
    url = config.get_main_option("sqlalchemy.url")
    context.configure(url=url)

    with context.begin_transaction():
        context.run_migrations()

def run_migrations_online():
    """Run migrations in 'online' mode.

    In this scenario we need to create an Engine
    and associate a connection with the context.

    """
    engine = engine_from_config(
                config.get_section(config.config_ini_section),
                prefix='sqlalchemy.',
                poolclass=pool.NullPool)

    connection = engine.connect()
    context.configure(
                connection=connection,
                target_metadata=target_metadata
                )

    try:
        with context.begin_transaction():
            context.run_migrations()
    finally:
        connection.close()

if context.is_offline_mode():
    run_migrations_offline()
else:
    run_migrations_online() 
```

但是当运行迁移时使用

```
alembic revision -m "initial" 
```

它说

```
Generating
migrations/versions/2d9d8de1aa80_initial.py...done 
```

但是当我打开`migrations/versions/9aa5864e4c8_initial.py`，这是我看到的。

```
"""initial

Revision ID: 2d9d8de1aa80
Revises: None
Create Date: 2013-02-23 12:21:52.389906

"""

# revision identifiers, used by Alembic.
revision = '2d9d8de1aa80'
down_revision = None

from alembic import op
import sqlalchemy as sa

def upgrade():
    pass

def downgrade():
    pass 
```

版本文件没有关于我期望它创建并稍后在我运行命令时与 MySQL 同步的表`alembic upgrade head`。如何配置 Alembic，以便在我运行`alembic revision`命令时，它从中选择架构`models.py`并生成版本文件？我想我在这里遗漏了一些微不足道的东西。不知道是什么！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T12:13:21.477

您希望使用 --autogenerate 标志运行修订子命令，以便检查模型的更改。

```
alembic revision --autogenerate -m "some message" 
```

确保您了解[自动生成选项的限制](http://alembic.zzzcomputing.com/en/latest/autogenerate.html#what-does-autogenerate-detect-and-what-does-it-not-detect)。

# c# - 从 EF4 调用存储过程时出现返回值问题

> ID：15038042
> 
> 赞同：0
> 
> 时间：2013-02-23T07:00:27.713
> 
> 标签：c#, sql-server-2008, entity-framework, stored-procedures

我在 SQL Server 2008 中编写了以下存储过程：

```
ALTER Procedure [dbo].[usp_TodayNumberOfRegisteration] 
(
@TodayShamsiDate nvarchar
)
AS
Select COUNT(csci.Id) as cc1  FROM dbo.Complex_Service_Cart_Items csci INNER JOIN dbo.Complex_Service_Cart csc
ON csci.Id_Complex_Service_Cart=csc.Id
WHERE (csci.Id_Complex_Service='2cca1a67-34f4-4837-bebe-f3ba4c72b98d' or csci.Id_Complex_Service='8430cad2-dbb1-4425-bb8b-a7e158f688c4') 
and csc.TFIsPaymentComplete=1 
and csc.TFDateBackFromBankp= RTRIM( @TodayShamsiDate) 
```

我通过 EF4 从 C# 代码隐藏中调用它：

```
string shamsiDate = Date.getShamsiDate();
returnValue = Convert.ToString(db.getTodayNumberOfRegisteration(shamsiDate).First().Value); 
```

`getTodayNumberOfRegisteration`我添加到`edmx`模型中的函数在哪里。

现在这是问题：当我在 SQL Server 中执行存储过程时，而不是

```
 and csc.TFDateBackFromBankp= RTRIM( @TodayShamsiDate) 
```

我设置了类似的东西：

```
 and csc.TFDateBackFromBankp= RTRIM( '1391/12/05') 
```

此存储过程返回值 6

但是当我从 C# 代码隐藏传递参数时，我得到返回值'0'

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:24:41.853

我通常这样做：在`Add Function Import`对话框中，选择您的存储过程并定义它返回一个*标量集合： Int32*：

![在此处输入图像描述](../Images/9d0412fe014b31e12dbb4b53d73b2cf8.png)

然后在您的代码中，像这样调用它：

```
int value = db.getTodayNumberOfRegisteration(shamsiDate).First().Value; 
```

这通常对我来说很好。

如果您没有将其定义为*返回一个集合： Int32*，那么您返回的值似乎实际上是存储过程调用的**返回值**，例如受存储过程执行影响的行数（ 0 或 -1 表示 a `SELECT`，因为您实际上并未插入、更新或删除任何行）：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:15:06.320

我发现了问题：我以这种方式设置了参数：

```
@TodayShamsiDate nvarchar 
```

我应该指定 nvarchar 的长度

```
@TodayShamsiDate nvarchar(10) 
```

我做到了，问题解决了！

# asp.net-web-api - C# Web Api：需要根据提供的输入为 POST 方法提供不同的处理程序

> ID：15038045
> 
> 赞同：0
> 
> 时间：2013-02-23T07:00:34.950
> 
> 标签：asp.net-web-api

我有以下 REST api 实现：

```
using System.Web.Http;  
public class DeploymentsController : ApiController
{
    public HttpResponseMessage Post(
        string subscriptionId,
        string serviceName,
        string deploymentSlot,
        CreateDeploymentInput input)
    {
    . . . 
    }

    public HttpResponseMessage Post(
        string subscriptionId,
        string serviceName,
        string deploymentSlot,
        UpdateDeploymentStatusInput input)
    {
    . . . 
    }                
 } 
```

这是路由：

```
 config.Routes.MapHttpRoute(
            name: "DeploymentSlots",
            routeTemplate: "{subscriptionId}/services/hostedservices/{serviceName}/deploymentslots/{deploymentSlot}",
            defaults: new
            {
                controller = "deployments",
            });

        config.Routes.MapHttpRoute(
            name: "Deployments",
            routeTemplate: "{subscriptionId}/services/hostedservices/{serviceName}/deployments/{deploymentName}",
            defaults: new
            {
                controller = "deployments"
            }); 
```

我想为新的“升级”操作添加处理，如下所示：

```
POST /1d42d489-7a4f-4561-91a3-c2033c31f8c6/services/hostedservices/Mytalk123490193975/deployments/Mytalk12349019/?comp=upgrade HTTP/1.1
Content-Type: application/xml; charset=utf-8
x-ms-version: 2012-08-01
Host: localhost:33344
Content-Length: 340
Expect: 100-continue
Accept-Encoding: gzip, deflate

HTTP/1.1 100 Continue

<UpgradeDeployment xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="ht    tp://www.w3.org/2001/XMLSchema-instance"><Mode>auto</Mode><PackageUrl>http:// 
```

talkserviceshared.blob.core.windows.net/mycontainer/PackageTXlCaXp0YWxrMTIzNDkwMTkzOTc1

所以我在 ApiController 中添加了一个处理程序：

```
 public HttpResponseMessage Post(
        string subscriptionId,
        string serviceName,
        string deploymentSlot,
        UpgradeDeploymentInput input)
    {
    . . . 
    } 
```

但是当我使用客户端调用它时，它抱怨“找到与请求匹配的多个操作”
public HttpResponseMessage Post( string subscriptionId, string serviceName, string deploymentSlot, UpdateDeploymentStatusInput input) 和
public HttpResponseMessage Post( string subscriptionId, string serviceName, string deploymentSlot , UpdateDeploymentStatusInput 输入）

然后我尝试将这些方法合二为一：

```
public HttpResponseMessage Post(
        string subscriptionId,
        string serviceName,
        string deploymentSlot,
        object input)
{
} 
```

并编写了检查运行时类型并采取不同操作的代码。但是这次调用失败并出现 System.InvalidOperationException

在我开枪之前请帮忙。我没有时间从头开始学习这些东西，我时间紧迫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:54:20.377

我跟着你到了这一点：

> “所以我在 ApiController 中添加了一个处理程序：”

如果您确实添加了带有参数 * *Upgrade* *DeploymentInput 输入的第三个 POST 方法，为什么编译器会抱怨有两个带有参数 * *Update* *DeploymentStatusInput 输入的 POST 方法。

会不会是您只是复制粘贴了忘记将输入从“更新”更改为“升级”的方法？

德罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:43:26.323

从您的帖子中，我了解到您假设配置中的路线 #2 将涵盖 POST 方法 #2 和 #3。

我可能是错的，但我怀疑问题是如果 url 相同并且不同的参数来自请求正文，WebApi 没有任何方法来区分方法 - 参数的类型不会被检查时选择路由等到 WebApi 两种方法看起来都一样。这就是歧义的来源。

我无法就解决方法提出建议，因为您没有指定 InvalidOperation 的含义 - 可能是您错过了某个地方的演员表，或者在没有检查对象类型的情况下尝试了演员表？

我认为解决它的一种方法是使用操作：

```
config.Routes.MapHttpRoute(
            name: "Deployments",
            routeTemplate: "{subscriptionId}/services/hostedservices/{serviceName}/deployments/{action}/{deploymentName}",
            defaults: new
            {
                controller = "deployments"
            }); 
```

然后你需要用一个属性来装饰方法，例如`[ActionName("upgrade")]`并在不同的 url 上访问它们

# ios - 如何在iphone静音时为特定来电启用铃声？

> ID：15038048
> 
> 赞同：0
> 
> 时间：2013-02-23T07:00:57.147
> 
> 标签：ios, iphone, avfoundation, phone-call

我想制作一个应用程序，它可以在 iPhone 为应用程序列表中的特定呼叫者静音时启用铃声。我将号码添加到列表中，如果来电来自此列表，则静音不起作用并且 iPhone 会响铃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:18:26.093

这是不可能的。您不能更改用户的隐私设置。

# javascript - 连接到 twitter api 时 Node.js 套接字挂起错误

> ID：15038054
> 
> 赞同：3
> 
> 时间：2013-02-23T07:02:00.517
> 
> 标签：javascript, node.js

`socket hang up`使用 https 通过基本身份验证连接到 Twitter 流式传输 API 时出现错误。我认为在进行身份验证时会发生错误。

```
var https = require("https");
var options = {
        host: 'stream.twitter.com',
        path: '/1.1/statuses/filter.json?track=bieber',
        method: 'GET',
        headers: {
                "Authorization": "Basic " + new Buffer('UserName' + ":" + 'Password').toString("base64")
        }
}; //end of options

var request = https.request(options, function(response){
            var body = '';
             console.log('STATUS: ' + response.statusCode);
             console.log('HEADERS: ' + JSON.stringify(response.headers));

            response.on("data", function(chunk){
                    var tweet = JSON.parse(chunk);
                    console.log("Tweet " + tweet.text);
            });  // end of data

            response.on("end", function(){
                console.log("Disconnected!!");
            }); // end of end

            response.on("error", function(){
                console.log("error occured");
            }); // end of error
}); // end of request

request.on("error",function(error){
        console.log("Error: " + error.message);
                }); // end of error 
```

当我尝试访问此网址时，它工作正常。

```
https://username:password@stream.twitter.com/1.1/statuses/filter.json?track=twitter 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T11:30:00.210

更改`https.request(options, function(response){ }`为`https.get(options, function(response){ }` 感谢 nodejs IRC 上的 Darrenlooby 指出这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-08T20:23:15.030

您可以使用 https.request，但请确保添加：

```
request.end(); 
```

`request`返回的对象在哪里`https.request`

有关示例，请参见[http://nodejs.org/api/https.html#https_https_request_options_callback 。](http://nodejs.org/api/https.html#https_https_request_options_callback)

我有同样的问题，这解决了它:)

# php - 识别 $_REQUEST

> ID：15038057
> 
> 赞同：0
> 
> 时间：2013-02-23T07:02:46.710
> 
> 标签：php

```
$a = $_REQUEST['label']; 
```

现在我如何识别存储在变量中的值`$a`是来自`$_GET`还是来自`$_POST`？如果它是从收集的，我想重定向用户`$_GET`。有什么方法可以检查吗？PHP 有点难。就像这样：

```
$var = recognize($_REQUEST['label']);
if($var == 'GET') { } else { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:07:52.493

分配变量后，您将无法分辨它（通常）来自哪里。

考虑做这样的事情，因为如果你使用`$_REQUEST`它甚至可能来自`$_COOKIE`！

```
if (isset($_GET['label'])) {
  // do redirect
} elseif (isset($_POST['label'])) {
  // do something else
} 
```

或者，如果您将该变量深入传递到您无法分辨它最初来自何处的位置：

```
class RequestParameter
{
    private $name;
    private $value;
    private $source;

    public function __construct($name)
    {
        $this->name = $name;
        if (isset($_POST[$name])) {
            $this->value = $_POST[$name];
            $this->source = INPUT_POST;
        } elseif (isset($_GET[$name])) {
            $this->value = $_GET[$name];
            $this->source = INPUT_GET;
        }
    }

    public function isFromGet()
    {
        return $this->source === INPUT_GET;
    }

    public function getValue()
    {
        return $this->value;
    }
}

$a = new RequestParameter('label');

if ($a->isFromGet()) {
    // do redircet
} 
```

但我建议以一种不必要的方式构建您的代码。一种方法是检查是否进行了 POST：

```
$_SERVER['REQUEST_METHOD'] === 'POST' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:08:30.330

检查`if($_GET['label']) { then redirect using header location; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:52:19.473

最好使用 $_SERVER['REQUEST_METHOD']：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // …
} 
```

更多细节参见文档[PHP](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-23T07:05:06.303

试试这个

```
if(isset($_REQUEST['label'])){
//redirect
} 
```

# windows - 从回调窗口函数中删除窗口是否可以（Windows OS）？

> ID：15038058
> 
> 赞同：1
> 
> 时间：2013-02-23T07:02:48.940
> 
> 标签：windows

我想制作一次只能看到一个窗口的应用程序，以节省内存。假设我们有一个窗口，按下按钮后会显示另一个窗口，但前一个窗口被删除。如果在窗口回调函数中处理按钮按下，从该窗口函数内部删除窗口并在新窗口关闭后重新创建它是否安全？像这样的东西：

```
void callback(...) {
...
if (msgID == ENTER_KEY) {
  deleteMyself();
  showWindow2();
  createMyself();
}
...
} 
```

如果这个不好，你能建议更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:04:52.277

我认为这通常在桌面上是一个坏主意。所以你会失去用户输入的一切。并且根据您的应用程序，用户可能会混淆为什么选项对话框会关闭主窗口。

然而，在移动设备上，只有一个窗口是正常的（除非您使用对话框）。但是在这些情况下，所有输入都应该被存储，以便窗口可以恢复到它的旧状态。

一般来说，如果您在内存管理方面遇到问题，最好检查一下您是否在某些地方泄漏了内存，在大多数情况下，GUI 不需要这么多内存。

# iphone - 加载时用户界面冻结，应用程序经常崩溃

> ID：15038064
> 
> 赞同：0
> 
> 时间：2013-02-23T07:03:50.220
> 
> 标签：iphone, ios, objective-c

我几乎完成了我的应用程序的开发。该应用程序在随机点退出，并且用户界面冻结/加载非常缓慢。该应用程序是在没有 ARC 的情况下制作的，我刚刚开始使用 Xcode Instruments 来解决内存问题。我正在考虑将整个项目转移到 ARC，但不知道这是否会有所帮助。此外，Instruments Allocations 正在执行的许多进程似乎并没有占用太多内存。

我需要找出提高应用程序效率的最佳方法。我对该领域知之甚少，并且阅读了各种关于如何做某些事情以提高效率的教程，我只是不知道从哪里开始。我应该转换为 ARC 吗？我应该专注于使用 Xcode 中的分配/泄漏/配置文件工具吗？我知道它可能特定于我的应用程序，我只是不知道从哪里开始。任何一般性的建议都会很棒！谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:12:46.067

更改为 ARC 并不能帮助您，而是将重点放在分配/泄漏上。如果一次又一次地做某事，也要尝试优化你的代码。此外，如果您使用同步 Web 服务调用，它也会冻结应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:16:28.390

如果您的应用程序不是很大，我建议您将项目移至 ARC。使用 ARC 解决了许多开发人员在内存方面的错误。

当我们有了 ARC，为什么不使用它呢？

另一件事是，如果有时间处理过程。在后台线程中执行它们。

# java - 为什么 File.deleteOnExit 不适用于目录？

> ID：15038065
> 
> 赞同：7
> 
> 时间：2013-02-23T07:04:21.330
> 
> 标签：java

我是否`deleteOnExit`以错误的方式使用？

我创建一个目录，然后运行：

`new File("my_dir_path").deleteOnExit();`

但是在 JVM 无错误终止后，该目录永远不会被删除，尽管 JDK 文档说`Requests that the file or directory denoted by this abstract pathname be deleted when the virtual machine terminates.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T07:07:16.727

该目录必须为空才能将其删除。

# php - 使用 PHP 函数删除 XML 中的元素

> ID：15038067
> 
> 赞同：0
> 
> 时间：2013-02-23T07:04:38.563
> 
> 标签：php, xml, function

我有一个这样的数组

```
Array
(
    [351] => Array
        (
            [0] => Array
                (
                    [unit_id] => Array
                        (
                            [0] => 10192
                            [1] => 10192
                            [2] => 10192
                        )
                    [born_from] => Array
                        (
                            [0] => 1980-08-21
                        )
                    [born_to] => Array
                        (
                            [0] => 2010-08-18
                        )
                    [start_date] => Array
                        (
                            [0] => 2013-02-21 17:29:00
                        )
                    [sex] => Array
                        (
                            [0] => 3
                        )
                    [id] => 351
                    [product_id] => 1
                    [name] => test1
                )

        )
) 
```

我编写了一个 PHP 函数来将此数组转换为 xml

功能是

```
function generate_xml_from_array($array, $node_name) {
    $xml = '';

    if (is_array($array) || is_object($array)) {
        foreach ($array as $key=>$value) {
            if (is_numeric($key)) {
                $key = $node_name;
            }

            $xml .= '<' . $key . '>' . "\n" . generate_xml_from_array($value, $node_name) . '</' . $key . '>' . "\n";
        }
    } else {
        $xml = htmlspecialchars($array, ENT_QUOTES) . "\n";
    }

    return $xml;
}

function generate_valid_xml_from_array($array, $node_block='products', $node_name='node') {
    $xml = '<?xml version="1.0" encoding="UTF-8" ?>' . "\n";
    $xml .= '<' . $node_block . '>' . "\n";
    $xml .= generate_xml_from_array($array, $node_name);
    $xml .= '</' . $node_block . '>' . "\n";

    return $xml;
}

$xml = generate_valid_xml_from_array($MyArray);
file_put_contents('C:/product.xml',$xml); 
```

这给了我这样的输出

```
<?xml version="1.0" encoding="UTF-8" ?>
<products>
<node>
    <node>
    <unit_id><node>10192</node><node>10192</node><node>10192</node></unit_id>
    <born_from><node>1980-08-21</node></born_from>
    <born_to><node>2010-08-18</node></born_to>
    <start_date><node>2013-02-21 17:29:00</node></start_date>
    <sex><node>3</node></sex>
    <id>351</id>
    <product_id>1</product_id>
    <name>test1</name>
    </node>
</node>
</products> 
```

在此输出中，有一个`<node>`正在增加文件大小的任何方法来删除它`<node>`，因此文件大小不会增加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:57:26.130

像这样改变你的功能

```
function generate_xml_from_array($array, $node_name) {
$xml = '';

if (is_array($array) || is_object($array)) {

    foreach ($array as $key=>$value) {
        if (is_numeric($key) ) {

        if(count($array)>1)
             {
        $xml .= '<' . $node_name . '>' . "\n" . generate_xml_from_array($value, $node_name) . '</' . $node_name . '>' . "\n";
             }
          else
            {
        $xml .= generate_xml_from_array($value, $node_name). "\n";  
            }

        }
      else{ 
            $xml .= '<' . $key . '>' . "\n" . generate_xml_from_array($value, $node_name) . '</' . $key . '>' . "\n";}
          }
} else {
    $xml = htmlspecialchars($array, ENT_QUOTES) . "\n";
}

return $xml;
     } 
```

你会得到以下 XML

```
<?xml version="1.0" encoding="UTF-8" ?> 
<products>
<unit_id>
<node>10192</node> 
<node>10192</node> 
<node>10192</node> 
</unit_id>
<born_from>1980-08-21</born_from> 
<born_to>2010-08-18</born_to> 
<start_date>2013-02-21 17:29:00</start_date> 
<sex>3</sex> 
<id>351</id> 
<product_id>1</product_id> 
<name>test1</name> 
</products> 
```

# c# - 安装 C# .Net 应用程序时出现错误 1001 的原因可能是什么？

> ID：15038069
> 
> 赞同：0
> 
> 时间：2013-02-23T07:04:53.623
> 
> 标签：c#, .net

我在尝试安装新版本的 Windows 应用程序时遇到错误 1001：

```
Error 1001 . An Exception occurred during the commit phase of the installation. This exception will        
be ignored and installation will continue. However , the application might not function correctly 
after installation is complete --> Could not load file or assembly 'Microsoft.Win32.TaskScheduler, 
Version=1.8.3.15820,Culture=neutural,PublicKeyToke... 
```

仅当此应用程序的旧版本在系统中时才会发生此错误。如果我删除旧版本，此安装将运行良好。

我刚刚接手了这个项目，我是 C# .Net 的新手。我真的不知道发生了什么。我搜索了，我只发现有人在安装 Windows 服务时遇到了这个错误。

什么可能导致这个问题？谁能指出我要遵循的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:07:45.357

从该错误中很明显，缺少名为的库文件：`Microsoft.Win32.TaskScheduler.dll`必须与安装程序一起部署/打包，安装程序可以从以下位置下载：[这里](http://taskscheduler.codeplex.com/)

# sql - SQL 历史更改

> ID：15038074
> 
> 赞同：0
> 
> 时间：2013-02-23T07:05:28.703
> 
> 标签：sql, sql-server

一段时间以来，我一直试图解决这个问题，但似乎找不到一个好的解决方案，所以我正在咨询溢出问题。我有一张看起来有点像这样的桌子：

```
[EmployeeId]  [int] IDENTITY(1,1)  NOT NULL,
[Name]  [varchar](255)  NOT NULL,
[Title]  [varchar](255)  NULL,
[QueueId]  [int]  NOT NULL,
[SupervisorId]  [int]  NULL, 
```

员工以不同的时间间隔从一个队列移动到另一个队列。我应该如何构建我的第二张桌子，这样我不仅可以看到在特定时间间隔内排队的人数，还可以看到他们是谁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:07:54.333

```
queueid int
status varchar(20)
start datetime
end datetime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T16:58:09.867

我会说这张桌子看起来像这样：

```
[EmployeeId]  [int] IDENTITY(1,1)  NOT NULL,
[QueueId]  [int]  NOT NULL,
[Start] [datetime] NOT NULL,
[End] [datetime] NOT NULL 
```

不幸的是，您必须返回并“结束日期”前一行。如果我是这样做的人，我将跳过 [End] 并在表格顶部创建一个视图，该视图将提供 [End]。

视图看起来像

```
SELECT A.[EmployeeId]
     , A.[QueueId]
     , A.[Start]
     , COALESCE(MIN([B.Start]),'9999-12-31') as [END]
  FROM Table A
  LEFT OUTER JOIN Table B
    ON A.[EmployeeId] = B.[EmployeeId]
   AND A.[Start] < B.[Start] 
```

如果这样做，则在加入此视图时不能使用 BETWEEN。你必须说 >= [开始] 和 < [结束]。无论如何，它更安全、更健壮，因为您不必决定日期/时间“舍入”单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T10:27:17.377

您的第二个表应该有一个主键、日期时间和计数列。但是，您将需要第三张表来列出队列中的人员，因为计数和列表位于不同的层级。

# android - StringBuffer 没有将字符串附加到 webview

> ID：15038083
> 
> 赞同：1
> 
> 时间：2013-02-23T07:06:48.517
> 
> 标签：android, uiwebview, stringbuffer

我有这样的字符串：

我有 2 件衬衫：//这里有换行符

(i) 红色 //这里有一个换行符

(ii) 白 //这里有一个换行符

我正在尝试像这样附加此字符串 uisng 字符串缓冲区

```
html.append("<p>+string+</p>"); 
```

但是我正在像这样的一个中获取全部内容

```
"I have 2 shirts (i) Red (ii) White" 
```

为什么这样？我怎样才能使它呈现字符串的状态？

编辑 ：

我在 xml 中有字符串，无论我提到哪里都按下了输入它有一个换行符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:10:14.413

如果您在网络上显示此文本，您应该`<br/>`在要换行的地方添加标签。

# callback - WP：从应用程序启动加载页面时要使用什么回调

> ID：15038084
> 
> 赞同：0
> 
> 时间：2013-02-23T07:06:59.180
> 
> 标签：callback, media-player, windows-phone

在 MainpPage.xaml.cs 中，可以使用什么回调，以便我知道它来自启动应用程序而不是来自其他页面？我知道 App.xaml.cs 中有 Application_Launching。但是如果我把下面的代码放在那里，就会在某处抛出异常。如果我放入 Loaded 回调，我无法区分它是从应用程序启动调用还是从其他页面导航调用。

```
 if (MediaPlayer.State == MediaState.Playing)
            {
                MediaPlayer.Pause();
            } 
```

进入我的应用程序后，我想停止任何现有的播放音乐。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:42:31.450

在您的 App.xaml 中：

```
public void TryStopAllMusic()
{
    if (MediaPlayer!=null && MediaPlayer.GameHasControl)
    {
        MediaPlayer.Stop();  //stop to clear any existing music
    }        
} 
```

在构造函数中，在 MainPage.xaml.cs 的 InitializeComponent() 下：

```
public MainPage()
{
    InitializeComponent();
    (Application.Current as App).TryStopAllMusic();
} 
```

就这样。

# macos - vim ctrlp 插件加载我电脑中的所有文件而不是当前目录

> ID：15038089
> 
> 赞同：3
> 
> 时间：2013-02-23T07:07:31.457
> 
> 标签：macos, vim, macvim

我将 MacVim 与[ctrlp](https://github.com/kien/ctrlp.vim)插件一起用于文件查找器。它应该仅将当前目录中的文件加载到文件缓冲区。比如我以前可以`cd`进入一个目录，然后`mvim`在命令行输入。这将加载当前目录中的所有文件，并且只加载该目录，这对于 Rails 项目来说非常棒。然后我的文件查找只会在该目录中搜索。

不过，最近，当我输入`mvim`某个目录时，vim 文件缓冲区是我计算机上的所有文件，而不是当前目录中的所有文件，因此`index.html.haml`无法找到我需要的确切文件。

奇怪的是，当我说 时`mvim .`，它只告诉我当前目录中的文件和文件夹，这是我所期望的。当我输入 时`:pwd`，它告诉我我所在的路径是当前目录（Rails 项目）。但是当我键入`,t`查找文件时，它是我计算机上的所有文件。

[这](http://www.flickr.com/photos/79751190@N05/8498981123/in/photostream)是一个屏幕截图。我已经`cd`编辑了一个 Rails 项目，并使用插件输入`,t`了文件导航器，我输入了应该只显示该目录的文件，但相反，它是我系统上的所有 's！`ctrlp``config.rb``config.rb``config.rb`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T08:53:27.080

我去了 GitHub 页面让 ctrlp 提出问题并遇到了[这个](https://github.com/kien/ctrlp.vim/issues/search?q=150)问题。对问题的建议修复是关闭从当前目录开始作为默认行为，所以我只是明确地将默认添加到`~/.vimrc`，它修复了它：

`let g:ctrlp_working_path_mode = 0`

## 编辑

虽然将该行添加到 my`~/.vimrc`确实解决了问题，但它并没有解决这个问题的**根本**原因。该建议的创建者`ctrlp`建议我`git`在我的主文件夹（`ctrlp`正在查看）中创建了一个存储库，我不知何故拥有。因此，针对此问题的另一个更彻底的解决方法是删除`.git`我的主文件夹中的目录：

`$ rm -r ~/.git`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:53:32.847

试试这个：

```
let g:ctrlp_cmd = 'CtrlP .' 
```

# php - 如何为联系表 7 中的特定字段应用 AJAX？

> ID：15038091
> 
> 赞同：0
> 
> 时间：2013-02-23T07:07:42.787
> 
> 标签：php, wordpress

我在联系表格 7 中制作了一个表格，其中有一个包含学生和专业值的下拉菜单。我想在其中应用 ajax 以获取学生的进一步价值观，例如大学名称以及他/她正在修读的课程。希望我清楚这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:19:20.430

您可以为该下拉列表分配更改事件并将选定的值传递给 ajax 调用。

**样本**

```
$("#contact_form_7 select").on('change',function()
{
    var selecteValue = $(this).val();

    $.ajax({
        url : 'URL.php?selectvalue='+selecteValue
    });

}); 
```

`ajax`根据您的需要设置其他调用参数（即 beforeSend、success、dataType 等）。

# ios - 评价这个应用程序的功能

> ID：15038106
> 
> 赞同：3
> 
> 时间：2013-02-23T07:09:09.087
> 
> 标签：ios, ios4, app-store

我正在尝试将此应用程序功能的速率提供到我的应用程序中，因此我添加了以下代码

```
- (void)gotoReviews
//------------------
{
  NSString *str = @"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa";
  str = [NSString stringWithFormat:@"%@/wa/viewContentsUserReviews?", str]; 
  str = [NSString stringWithFormat:@"%@type=Purple+Software&id=", str];

  str = [NSString stringWithFormat:@"%@APPid", str]; 

  [[UIApplication sharedApplication] openURL:[NSURL URLWithString:str]];

} 
```

str = [NSString stringWithFormat:@"%@APPid", str]; 在这里我必须提到我的应用程序 ID。我在配置门户中看到了应用程序 ID，如下 546F5QMTE4.com.XXXX.XXXX 进入应用程序 ID 部分。

是否需要放置“546F5QMTE4”字符串？我是对的，是正确的身份证吗？

请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T07:25:31.090

您可以通过多种方式做到这一点：

1.  直接方法：

    ```
    #define APP_ID XXXXX //id from iTunesConnect
    NSString *reviewURL = [NSString stringWithFormat:@"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=%d",APP_ID];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:reviewURL]]; 
    ```

2.  在应用委托中尝试使用 Appirator：

    ```
     [Appirater setAppId:@"552035781"];
     [Appirater setDaysUntilPrompt:1];
     [Appirater setUsesUntilPrompt:10];
     [Appirater setSignificantEventsUntilPrompt:-1];
     [Appirater setTimeBeforeReminding:2];
     [Appirater setDebug:YES]; 
    ```

你可以得到来源：[这里](https://github.com/arashpayan/appirater)。将 Appirater.h 和 Appirater.m 添加到您的项目中。

有关集成的更多信息：[这里](http://arashpayan.com/blog/2009/09/07/presenting-appirater/)

![在此处输入图像描述](../Images/30640dcb31540a50a5e2c02d50b17cd6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:27:17.680

:) 不，不是那个数字。您必须前往 iTunesConnect -> 管理您的应用程序，选择您的应用程序，然后在“应用程序信息”下查看 Apple ID（仅限数字）。

当然，请确保您确实拥有应用程序的记录。如果没有，只需制作它（添加新应用程序按钮）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-09T14:10:22.570

**iRate**是最好的[https://github.com/nicklockwood/iRate](https://github.com/nicklockwood/iRate)

我在 iOS 5+（也适用于 Mac OS X，但这个答案集中在 iOS 部分）和所有设备（iPad、iPhone、iPod Touch）上使用并创造奇迹的是 iRate。

它使用 uialertview 和 storekit 来询问用户评分（或稍后提醒他们）。一切都是可定制的，从取消按钮标题的名称到提醒用户的时间间隔。

默认情况下，iRate 会在满足某些要求时自动打开（例如，应用启动 X 次，用户通过 X 关卡），但您也可以使用多种方法和您自己的逻辑（借助 iRate 方法）手动显示 iRate 弹出窗口。

**设置**

要安装，只需将标头 (.H) 文件、实现 (.M) 文件和 iRate Bundle（用于本地化）拖到您的项目中。

在 AppDelegate 中导入标题：**#import "iRate.h"**

将 StoreKit 框架添加到您的项目中 - Apple 文档中有关 StoreKit 的更多信息

将以下方法添加到您的应用程序委托中：**+ (void)initialize**

这些属性可以在初始化方法中设置，但是它们都不是必需的（iRate 可以自动找到所有这些信息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T07:22:26.520

不，不是。它是一个带有几位数字的数字 ID，如下所示：

```
http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=389801252&pageNumber=0&sortOrdering=1&type=Purple+Software 
```

仅当您的应用程序已获得 Apple 批准**并且**已在 AppStore 上时（以防故意延迟发布），该功能才会生效。

**此外，**您编写糟糕的 URL 字符串的方式**简直太可怕了。**不要滥用格式字符串！你在这里有一个常量字符串，所以你甚至不需要任何调用`+ [NSString stringWithFormat:]`. 即使您想更改应用程序 ID，您也可以使用一个格式语句来做到这一点：

```
NSString *str = [NSString stringWithFormat:@"http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=%@&pageNumber=0&sortOrdering=1&type=Purple+Software", appID]; 
```

# android - 混合移动应用程序开发的最佳学习资源

> ID：15038107
> 
> 赞同：4
> 
> 时间：2013-02-23T07:09:29.213
> 
> 标签：android, ios, html, jquery-mobile, cordova

对于 iOs 和 android 设备的混合移动应用程序开发，有哪些好的学习资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:20:09.387

有很多关于 jQuery Mobile 的视频教程，从简单的到真正的高级教程。

首先看一下这个：[http](http://www.youtube.com/watch?v=I6Y4a0hA8tI) ://www.youtube.com/watch?v=I6Y4a0hA8tI ，你不会在那里看到很多例子，但它需要一个小时来全面了解 jQuery Mobile 及其功能。相信我，这是你想看的第一件事。

第二个是**pineheadtv**教程列表：[https](https://www.youtube.com/watch?v=AyZbIaYF_OU&list=PL09E541FDC1A3E551) ://www.youtube.com/watch?v=AyZbIaYF_OU&list=PL09E541FDC1A3E551 。这个将引导您完成许多工作示例。

也可以看看我的一些文章：

*   **[jQuery 文档就绪与 jQuery Mobile 页面事件](http://www.gajotres.net/how-jquery-mobile-page-handling-affects-javascript-executions/)**
*   **[jQuery Mobile 以及如何增强动态添加内容的标记](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**

这两个链接将为您节省大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:37:15.480

这是您想要的网站！我♥它！

[http://www.lynda.com/](http://www.lynda.com/)

详细的视频和优秀的作者。iPad应用程序很垃圾，但大部分内容都很棒！

# css - CSS3 圆角白色背景

> ID：15038108
> 
> 赞同：0
> 
> 时间：2013-02-23T07:09:31.443
> 
> 标签：css, button

我的这个按钮在桌面和移动设备上看起来很好，但是当在安卓平板电脑上查看时，在按钮透明度所在的角落周围有这个白色背景。有没有人遇到过这个？

```
button.css3button {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    color: #ffffff;
    padding: 10px 20px;
    background: none;
    background: -moz-linear-gradient(top,#41f0ed 0%,#278a88);
    background: -webkit-gradient(linear, left top, left bottom, from(#41f0ed), to(#278a88));
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 30px;
    border: 0px solid #000000;
    -moz-box-shadow:
    0px 1px 3px rgba(000,000,000,0.5),
    inset 0px 1px 1px rgba(255,255,255,1);
    -webkit-box-shadow:
    0px 1px 3px rgba(000,000,000,0.5),
    inset 0px 1px 1px rgba(255,255,255,1);
    box-shadow:
    0px 1px 3px rgba(000,000,000,0.5),
    inset 0px 1px 1px rgba(255,255,255,1);
    text-shadow:
    0px -1px 0px rgba(000,000,000,0.2),
    0px 1px 0px rgba(255,255,255,0.3);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:03:48.857

你有没有尝试过

```
background:none; 
```

至

```
background: transparent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:10:44.180

尝试删除`box-shadow`或`gradient`。我想其中一个是罪魁祸首。如果是，您可以对 Android 平板电脑进行条件检查，并将其从您的 CSS 中排除。

```
var userAgent = window.navigator.userAgent.toLowerCase();
if ( /android/.test( userAgent ) && !/mobile/.test( userAgent ) ) {

    //it's an android tablet, remove box-shadow 

}; 
```

# https - 使用 SFTP 或 HTTPS 下载大文件

> ID：15038109
> 
> 赞同：0
> 
> 时间：2013-02-23T07:09:32.587
> 
> 标签：https, download, sftp, large-files

我们有一个应用程序可以生成许多大小为 (2GB-10GB) 的文件，我们希望将这些文件保存在服务器中并允许特定客户下载它们。系统将在 30 天内删除这些文件（我们有大约 30 个客户）。

根据您的经验，我们应该使用 SFTP 还是 HTTPS 下载方法，为什么？

您对如何授予受让人下载安全性有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:13:56.160

要看谁下载什么。

如果是客户下载文件，那么让事情尽可能简单：提供 https 并建议您测试过的一两个下载管理器允许再次获取损坏的下载。

对于内部使用（备份等），我强烈建议通过 ssh 使用 rsync。更容易使用，因为您可以进行增量下载，因此只下载那些本地不存在或已远程更改的文件。这意味着您可以简单地每天触发同步，并且文件将随着时间的推移在本地计算，就像它们是远程创建的一样。

通过 ssh 使用 sftp 或 rsync 时：应将 ssh 服务器配置为*不*接受密码，而只接受用于身份验证的密钥，因为这样更安全。

# java - 使用 bufferedreader 进行套接字编程

> ID：15038113
> 
> 赞同：0
> 
> 时间：2013-02-23T07:10:04.900
> 
> 标签：java

在我的应用程序中，我有 2 个程序，称为`server.java`and `client.java`，`server.java`充当服务器和`client.java`客户端。从`server.java`，我正在`client.java`使用以下代码向 写入一些数据：

```
bufferedwriter.write(data);
bufferedwriter.flush(); 
```

要在客户端读取上述数据，我编写了以下代码：

```
if(bufferedreader.ready())
while((a=in.read)!= -1) 
```

我能够从服务器接收数据到客户端，但问题是每当我在`BufferedWriter`. `server.java`在程序和client.java中刷新`if(bufferedreader.ready())`，它不会到达预期的目的地（即，在我的应用程序中，预期的目的地是`if(bufferedreader.ready())`）`client.java`，但是每当我关闭`server.java`调试时，客户端程序中的调试点正在启用，你能帮我吗解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:53:56.733

我认为您的 IDE 可能会在断点处阻塞所有线程。请您检查调试设置。在 Intellij IDEA 中，它会很简单**右键单击断点 -> 挂起，线程**

# javascript - JavaSCript 示例（Oreilly 书籍）

> ID：15038119
> 
> 赞同：1
> 
> 时间：2013-02-23T07:10:14.207
> 
> 标签：javascript, this

方法（对象的函数）可以使用“this”关键字来引用对象的变量。

函数的属性可以引用函数变量吗？

例如：-

```
 function foo()
    {
        var x=5;
    }
    foo.help = {o1:x};// o1 is not initialized to x.
//Using o1:this.x also doesn't help. Why? Explain please. 
```

无论如何将o1初始化为x？

示例 9-1。一个简单的 JavaScript 类

```
// range.js: A class representing a range of values.
// This is a factory function that returns a new range object.
function range(from, to) {
// Use the inherit() function to create an object that inherits from the
// prototype object defined below. The prototype object is stored as
// a property of this function, and defines the shared methods (behavior)
// for all range objects.
var r = inherit(range.methods);
// Store the start and end points (state) of this new range object.
// These are noninherited properties that are unique to this object.
r.from = from;
r.to = to;
// Finally return the new object
return r;
}
// This prototype object defines methods inherited by all range objects.
range.methods = {
// Return true if x is in the range, false otherwise
// This method works for textual and Date ranges as well as numeric.
includes: function(x) { return this.from <= x && x <= this.to; },
// Invoke f once for each integer in the range.
// This method works only for numeric ranges.
foreach: function(f) {
for(var x = Math.ceil(this.from); x <= this.to; x++) f(x);
},
// Return a string representation of the range
toString: function() { return "(" + this.from + "..." + this.to + ")"; }
};
// Here are example uses of a range object.
var r = range(1,3); // Create a range object
r.includes(2); // => true: 2 is in the range
r.foreach(console.log); // Prints 1 2 3
console.log(r); // Prints (1...3) 
```

我的理解： Range 是一个具有变量 from 和 to 的函数。Range.methods 是 Range 的属性。它在 Range() 之外定义，但它仍然可以访问 from 和 to（使用 this.from 和 this.to ）。如何？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:08:14.727

## **编辑**

*此答案基于已编辑的问题-原始答案如下*

* * *

你的理解有点落后。
该功能没有*，* `from`并且`to`以您认为的方式。

如果我以不同的方式构建它，以获得几乎所有相同的功能，但对于 JS 新手来说更容易理解，我会这样写：

```
// my `makeRange` function makes an object
// then it gives it all of the things a range object needs
// then it returns the new object
var makeRange = function (min, max) {
    // there are cleaner more-compact ways of doing this
    // I'm writing this out in long-form to show you exactly what's going on
    var rangeObject = {};
    rangeObject.from = min;
    rangeObject.to = max;
    rangeObject.includes = includes;
    rangeObject.foreach  = foreach;
    rangeObject.toString = toString;

    return rangeObject;
};

// these are all of the functions inside of `range.methods`
// they don't have to be attached to the function ***AT ALL***, for ***ANY REASON***
// other than the author wanted them to be there for the sake of organization
// Here, I'm just putting them out on their own, for sake of clarity
var includes = function (x) { return this.from <= x && x <= this.to; },
    foreach  = function (func) {
        var min = this.from,
            max = this.to,
            i   = 0;

        for (i = min; i <= max; i += 1) { func(i); }
    },
    toString = function () { return "(" + this.from + "..." + this.to + ")"; };

var range_3_to_5  = makeRange(3,  5),
    range_6_to_12 = makeRange(6, 12);

range_3_to_5.from;         // 3
range_6_to_12.includes(8); // true
range_6_to_12.foreach(function (i) { console.log(i); }); // [logs:] 6,7,8,9,10,11,12 
```

示例中的`methods`on`range`不是函数的一部分。
它们是***在构造时赋予对象的***方法。
在您给出的示例中，这发生在`r = inherit(range.methods);`调用内部，该代码块中没有解释。

`this`根本不涉及该功能。
它指的是在***调用方法时使用方法的最终对象***。

我`range_3_to_5`和`range_6_to_12`都使用相同的`includes`.
当`range_3_to_5.includes(6);`被调用时，`this`设置为`range_3_to_5`，然后该函数使用`this.from`and`this.to`来确定是否`x`在范围内。

这里没有复杂的魔法。
我们只是调用一个以特定方式“制造”某些东西的函数，例如工厂装配线，然后将完成的版本传递出去。

它将共享函数附加到装配线上的每个副本，这些共享函数用于`this`确定他们当时正在处理的副本。

```
var car   = { license : "a32 vx98" },
    truck = { license : "vdx 2000" },
    jeep  = { license : "mkv 3a2b" };

var read_license = function () { console.log(this.license); };

car.read_license   = read_license;
truck.read_license = read_license;

car.read_license();   // [logs:] a32 vx98
truck.read_license(); // [logs:] vdx 2000 
```

我什至可以自己调用函数，使用函数`.call`或`.apply`方法手动设置`this`.

```
read_license.call(jeep); // [logs:] mkv 3a2b 
```

或用于`.bind`保存始终使用相同值的函数版本`this`。

```
var read_car_license = read_license.bind(car);

read_car_license();  // a32 vx98 
```

*下面的上一个答案*

* * *

甚至远程也不行。

变量存在于创建它们的函数中：

```
var myFunction = function () {
    var myValue = 23;
    console.log(myValue);
};

myFunction(); // [log:] 23
console.log(myValue); // undefined 
```

值可以进一步存在于函数内部：

```
var myFunction = function () {
    var myValue = 23,

        sayValue = function () {
            console.log(myValue);
        };

    sayValue();  // will log 23 when you call `myFunction`
}

myFunction();  // [log:] 23 
```

但是，如果您希望您的变量位于函数的外部（而不是更远的内部），那么您需要将值返回给某个东西，或者直接从函数内部将其设置为某个东西。

```
var myOutsideValue = 42,

    myFunction = function () {
        var myValue = 23;
        myOutsideValue = myValue;
    };

console.log(myOutsideValue); // 42
myFunction();
console.log(myOutsideValue); // 23 
```

或者返回...

```
var myReturnedValue = 0,
    myFunction = function () {
        var myValue = 23;
        return myValue;
    };

myReturnedValue = myFunction();
console.log(myReturnedValue); // [log:] 23 
```

或者你可以传入一个数组或对象来修改：

```
var myObject = {},

    myFunction = function (obj) {
        var myValue = 23;
        obj.value = myValue;
    };

myFunction(myObject);
console.log(myObject.value);  // [log:] 23 
```

函数***可以引用***自己。
因为在 JavaScript 中，函数是对象（并且可以有自己的属性和方法），所以你可以像向任何`{}`对象添加属性一样向它们添加东西。

```
var myFunc = function () {
    var myValue = 23;
    myFunc.properties = {};
    myFunc.properties.value = myValue;
};

myFunc();
console.log(myFunc.properties.value); // [logs:] 23 
```

这些都与`this`.

`this`用于与您要查找的内容相反的内容。
它适用于当您在附加到对象的函数内部，并且您想要读取其他属性/运行该对象上的其他方法时。

```
var myObject = {
    x : 23,
    y : 42,
    sayX : function () { console.log(this.x); },
    sayY : function () { console.log(this.y); }
};

myObject.sayX(); // [logs:] 23 
```

`this`在其他几个地方使用，但实际上，这是它的主要作用：访问或设置函数附加到的对象上的值/方法（通过点属性访问`obj.func()`，或通过手动设置，使用`.call`/ `.apply`/ `.bind`），另一种非常常见的情况是使用`new`关键字创建新对象。

因此，让您`x`工作的方法不是弄清楚`this`，而是在函数本身内设置它，或者更恰当地，将`x`（返回`x`）传递给外部的另一个变量，然后自己设置值。

```
var foo = function () {
    var x = "x";
    return x;
},

variable;  // === undefined

foo.help = { o1 : 0 };

variable = foo(); // variable === "x"
foo.help.o1 = variable;

// or shorter:  foo.help.o1 = foo(); 
```

选择：

```
var help = { o1 : 0 },

    foo = function (obj) {
        var x = "x";
        obj.o1 = x;
    };

foo(help);
foo.help = help; 
```

`this`仅在函数内部有效

```
var obj = {};

obj.x = 12;
obj.y = this.x + 5;  // DOESN'T WORK 
```

如果`this`在最后一个示例中有效，那只是因为它是`this`从函数内部使用的，该函数将引用 FUNCTION'S `this`，而不是`obj`. 如果您正在调用未附加到对象（`obj.func();`或`func.call(obj)`或`new_func = func.bind(obj);`）的函数，`this`则将指向`window`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:12:50.133

在 context 中`foo.help = {o1: x}`，您与 的定义不在同一个词法范围内`x`，后者将在`foo`函数范围内。这也适用于`this.x`（适用于对象范围）。

```
function foo() {
    var x = 5;
    this.help = x;
} 
```

# javascript - Firefox 中的动态创建内容 iframe 问题

> ID：15038122
> 
> 赞同：1
> 
> 时间：2013-02-23T07:10:19.463
> 
> 标签：javascript, firefox, iframe

我编写了一个 javascript 函数来创建简单的 iframe 内容，它在所有浏览器 IE9、8、7 和 chrome 中都可以正常工作，但在 mozilla firefox 中无法正常工作，我的代码有什么问题？甚至在控制台中没有任何异常。

```
function (parent, child, cssfile, jsfilepath) {

        var iframe = document.createElement('iframe');
        iframe.id = ('MyID' + Math.floor((Math.random() * 1000000000000000000) + 1));
        iframe.frameBorder = '0';
        iframe.scrolling = 'no';
        iframe.marginWidth = '0';
        iframe.marginHeight = '0';
        iframe.hspace = '0';
        iframe.vspace = '0';
        iframe.allowTransparency = "true";

        parent.appendChild(iframe);

        var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

        var inter = window.setInterval(function() {
             if(iframeDoc.readyState == "complete") {
                 window.clearInterval(inter);

                 iframeDoc.body.innerHTML = child;

                 iframeDoc.body.style.background = "transparent";

                 addExternalCss(cssfile, iframeDoc);
                 addEmbedCss('body {margin:0px; padding:0px;}', iframeDoc);
                 addJs(jsfilepath, iframeDoc);
             }
         },100);
    } 
```

**编辑**

只是在萤火虫中显示空白 iframe

```
<iframe scrolling="no" frameborder="0" id="MyId350236077714409500" marginwidth="0" marginheight="0">

<html><head></head><body></body></html>

</iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:40:37.880

我找到了我的答案

```
function (parent, child, cssfile, jsfilepath) {

        var iframe = document.createElement('iframe');
        iframe.id = ('MyID' + Math.floor((Math.random() * 1000000000000000000) + 1));
        iframe.frameBorder = '0';
        iframe.scrolling = 'no';
        iframe.marginWidth = '0';
        iframe.marginHeight = '0';
        iframe.hspace = '0';
        iframe.vspace = '0';
        iframe.allowTransparency = "true";

        parent.appendChild(iframe);

        var inter = window.setInterval(function() {
             // put inside function 
             var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

             if(iframeDoc.readyState == "complete") {
                 window.clearInterval(inter);

                 iframeDoc.body.innerHTML = child;

                 iframeDoc.body.style.background = "transparent";

                 addExternalCss(cssfile, iframeDoc);
                 addEmbedCss('body {margin:0px; padding:0px;}', iframeDoc);
                 addJs(jsfilepath, iframeDoc);
             }
         },100);
    } 
```

# playframework-2.1 - 播放框架：@6ddhe2a72 - 内部服务器错误，用于 (GET) [/tasks]

> ID：15038126
> 
> 赞同：1
> 
> 时间：2013-02-23T07:11:29.977
> 
> 标签：playframework-2.1

我遵循了 PlayFramework 2.1 的[教程](http://www.playframework.com/documentation/2.1.0/JavaTodoList)，当我运行应用程序时，索引页面显示正常，但是当我单击“创建”按钮创建任务时，它不起作用，并且控制台显示 @6ddhe2a72 - 内部服务器错误，用于 (GET) [/tasks]。我现在很困惑。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:42:07.677

您应该在开发模式下运行 playframework 以查看完整错误。没有它，我们无法为您提供帮助。

而不是`play start`，只需启动`play run`（阅读[此页面](http://www.playframework.com/documentation/2.1.0/PlayConsole)了解更多详细信息）

您还可以在文件中看到堆栈跟踪`log/application.log`。

# python - AWS Beanstalk 上的 Python。如何对自定义日志进行快照？

> ID：15038135
> 
> 赞同：15
> 
> 时间：2013-02-23T07:12:42.727
> 
> 标签：python, logging, amazon-elastic-beanstalk

我正在开发适用于 aws beanstalk 环境的 python 应用程序。对于错误处理和调试，建议我将日志写入目录 /var/logs/ 上的自定义 lof 文件。

我应该怎么做才能从 Elastic beanstalk 管理控制台获得能力快照日志？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-05-21T17:25:03.927

扩展 Vadim911（和我自己的评论），我使用[.ebextensions](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html)中的配置文件解决了这个问题。这是python代码：

```
import logging
logging.basicConfig(filename='/opt/python/log/my.log', level=logging.DEBUG) 
```

这是 .ebextensions 配置文件代码：

```
files:
  "/opt/python/log/my.log" :
   mode: "000666"
   owner: ec2-user
   group: ec2-user
   content: |
       # Askbot log file 
```

此文件（以及其他日志文件）的内容可使用 AWS 弹性 beanstalk 控制台上的日志快照功能获得。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T07:07:09.233

如果您需要能够从 Beanstalk 管理控制台快照日志文件，您只需将日志文件写入“/opt/python/log/”文件夹。Elastic beanstalk 脚本使用此文件夹进行日志拖尾。

# algorithm - 如何生成以下序列？

> ID：15038136
> 
> 赞同：1
> 
> 时间：2013-02-23T07:12:42.293
> 
> 标签：algorithm, permutation, combinations, apriori

我想生成以下序列：

```
set S = {1,2,3}
op = {{1,2},{1,3},{2,3}}

set S = {1,2,3,4}
op = {{1,2,3},{1,2,4},{1,3,4},{2,3,4}}

set S = {1,2,3,4,5}
op = {{1,2,3,4},{1,2,3,5},{1,2,4,5},{1,3,4,5},{2,3,4,5}} 
```

一般来说，给定一组 n 个数字，我必须找到 (n-1) 个数字的所有可能子集，并限制它们按字母顺序排列（数字按顺序排列）。

是否有任何算法或方法来解决特定问题？我知道我们可以使用递归来生成更小的子集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:16:00.293

只有`n`这样的子集；每个都`n`从原始集合中删除了一个原始数字。因此，对集合进行排序，并为每个数字创建一个集合，该集合是删除该数字的原始集合。

一个可能的警告是，如果原始集合中有重复的数字，您将只有与原始集合中唯一数字一样多的子集，因此可能比`n`这种情况下少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T07:16:55.673

某些语言内置了此功能。例如 Python 的[`itertools.combinations()`方法](http://docs.python.org/2/library/itertools.html#itertools.combinations). 在你的情况下：

```
>>> import itertools
>>> l = [1,2,3,4]
>>> combinations = itertools.combinations(l, len(l) -  1) #for the list of numbers l, for sublists with a length 1 less than l's length
>>> for comb in combinations:
...     print comb
...
(1, 2, 3)
(1, 2, 4)
(1, 3, 4)
(2, 3, 4)
>>> 
```

但是，如果您想自己实现它，上面的链接可能仍然有用，因为它显示了等效的代码。您可以使用此代码以任何语言制作自己的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T12:22:16.767

想一想

*   如何生成集合 1..N
*   如何识别要从每个集合中删除的数字*n (n: N .. 1)*

从 1..N 生成/打印一个集合

```
print "{"
for i=1 to N
  if (i > 1) print ","
  print i
end
print "}" 
```

如何创建一个从 N 到 1中选择*n的循环*

```
for j=N to 1 
  ...
end 
```

使用最后一个循环作为上面循环的包装器 - 并且在上面的循环中测试当前选择的数字*j*是否等于*i*并且在这种情况下不打印它。

为了好玩，一个不假装优化的 Perl 实现:-)

```
$N = 5;

sub rec {
  my($j,$i,@a) = @_;
  if ($j > 0) {
    while (++$i <= $N) { push(@a,$i) if ($i != $j); }
    print('{' . join(',', @a) . "}\n");
    &rec($j-1);
  }
}

&rec($N); 
```

或者这个，（也许）更传统

```
for ($i=$N ; $i>0 ; $i--) {
  @a = ();
  for (1..$N) { push(@a,$_) if ($i != $_); }
  print('{' . join(',', @a) . "}\n");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-23T11:47:23.343

这应该很简单。让 arr 有**排序**的集合， n 是元素的数量：

```
int arr[100];
int n;
printf("{");
for (int i = n - 1; i >= 0; i--){
    printf("{");
    for (int j = 0; j < n; j++) {
        if (i == j) {
            continue;
        }
        printf("%d, ", arr[j]);
    }
    printf("}, ");
}
printf("}\n"); 
```

上面打印了一些额外的逗号，您可以自己过滤掉它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-23T14:58:04.210

在 Haskell 中，你可以这样[做](http://www.haskell.org/haskellwiki/99_questions/Solutions/26)：

```
import Data.List

combinations 0 _  = [ [] ]
combinations n xs = [ y:ys | y:xs' <- tails xs
                           , ys <- combinations (n-1) xs']

subsets set =  combinations (length set - 1) (sort set) 
```

哈斯克尔，简要地说：

```
_                                   =>    anyting
[]                                  =>    empty list
a = 1; as = [2,3]                   =>    a:as = [1,2,3]
[a:b | a <- [1], b <- [[2],[3]]]    =>    [[1,2],[1,3]]
tails [1,2,3]                       =>    [[1,2,3],[2,3],[3],[]] 
```

例如，“组合 2 [1,2,3]”：

```
tails xs = [[1,2,3],[2,3],[3],[]]

[1,2,3]   =>   y = 1; ys = [[2],[3]]    =>    [1,2],[1,3]
[2,3]     =>   y = 2; ys = [[3]]        =>    [2,3]
[3]       =>   y = 3; ys = NULL         =>    []

Result [[1,2],[1,3],[2,3]] 
```

# ios - 如何将参数地址传递给lua中的函数

> ID：15038138
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:12:47.370
> 
> 标签：ios, lua

我在我的 ios 项目中使用蜡框架。

我想在lua中调用objective-c方法，这是方法定义：

```
- (BOOL)scanUpToString:(NSString *)string intoString:(NSString **)value; 
```

可以看到，第二个参数是 (NSString **) 类型，如果我在 lua 中调用这个方法，代码怎么写？

我编写lua脚本，代码如下：

```
function method(obj)
local html="<some text>"
graphDataScanner = NSScanner:scannerWithString(html)
graphDataScanner:scanUpToString_intoString("abc",&result)

return result
end 
```

当我运行代码时，收到错误消息：

> '&' Lua 附近的意外符号惊慌并退出：尝试调用 nil 值

如何将 var 的地址传递给可可函数？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:42:35.920

大概，`local _, result = graphDataScanner:scanUpToString_intoString("abc")`

# python - favicon.ico 未在 chrome 的应用引擎中读取

> ID：15038144
> 
> 赞同：1
> 
> 时间：2013-02-23T07:13:32.583
> 
> 标签：python, google-app-engine, favicon

我正在应用程序引擎 python 中开发一个 Web 应用程序，当我在 chrome 或 IE 中执行它时，我无法在控制台中找到 GET /favicon.ico。虽然 firefox 或 safari 没有问题，但我的 favicon.ico 显示在其中。

这是我在 app.yaml 中的处理程序：

```
handlers:
- url: /favicon.ico
  static_files: favicon.ico
  upload: favicon.ico

- url: /sitemap.xml    
  static_files: sitemap.xml
  upload: sitemap.xml

- url: /robots.txt    
  static_files: robots.txt
  upload: robots.txt

- url: /static
  static_dir: static

- url: .*
  script: main.app 
```

favicon 没有 404 错误，/facivon.ico 没有在 chrome 和 IE 中执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:19:22.000

你可以试试

```
- url: /favicon\.ico
  mime_type: image/vnd.microsoft.icon
  static_files: static/favicon.ico
  upload: static/favicon.ico 
```

# c# - 如何在 windows 窗体中禁用 windows + d 组合键

> ID：15038145
> 
> 赞同：0
> 
> 时间：2013-02-23T07:13:52.500
> 
> 标签：c#, winforms, forms, c#-4.0, keyboard-shortcuts

我有一个看起来像小部件的 Windows 窗体

我必须禁用组合键，如 alt+f4 win+d 。因为小部件没有使用快捷键最小化关闭的属性。

我已禁用小部件中的 win+d 键，但它禁用了所有应用程序的快捷方式

我要做的就是只禁用我的应用程序的快捷键，比如小部件。

当 some1 按任何 win+d 时，诸如 Internet Explorer（如果打开）之类的后台应用程序将被最小化或最大化。

知道我该怎么做吗？

像雨量计或像 xwidget 一样具有相同的属性！知道他们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:16:42.080

**你不能在 Winforms 中做到这一点**

您必须创建一个[小部件项目](https://stackoverflow.com/questions/1171588/c-sharp-tutorial-to-write-gadgets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:27:23.517

[您可以使用全局键盘挂钩，您可以在此处](http://mwinapi.sourceforge.net/)查看如何操作的示例，然后只需在您的挂钩中收听 win + d 组合，在这种情况下不要传递呼叫转发

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:28:42.150

```
public partial class MainForm : Form
{
        readonly KeyboardFilter kbFilter = new KeyboardFilter(new Keys[] 
        { 
            Keys.LWin | Keys.D,
            Keys.RWin | Keys.D, 
            Keys.LWin | Keys.X, 
            Keys.RWin | Keys.X,
            Keys.Alt | Keys.F4
        });
} 
```

一定要`KeyboardFilter.Dispose()`在`Form_Closing`活动中使用。

`KeyboardFilter`课程取自[这里](http://social.msdn.microsoft.com/Forums/en-IN/netfxbcl/thread/72f46c4c-cfba-4535-9376-5c03303e7a59)

```
class KeyboardFilter : IDisposable
{
    private Keys[] mFilter;
    private IntPtr mHook;
    private readonly LowLevelKeyboardProc mProc;

    public KeyboardFilter(Keys[] keysToFilter)
    {
        // Install hook
        mFilter = keysToFilter;
        ProcessModule mod = Process.GetCurrentProcess().MainModule;
        mProc = KeyboardProc;   // Avoid garbage collector problems
        mHook = SetWindowsHookEx(13, mProc, GetModuleHandle(mod.ModuleName), 0);
        if (mHook == IntPtr.Zero) throw new Win32Exception(Marshal.GetLastWin32Error(), "Failed to set hook");
    }
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            // Release hook
            if (mHook != IntPtr.Zero)
            {
                UnhookWindowsHookEx(mHook);
                mHook = IntPtr.Zero;
            }
        }
    }
    ~KeyboardFilter()
    {
        Dispose(false);
    }
    private IntPtr KeyboardProc(int nCode, IntPtr wp, IntPtr lp)
    {
        // Callback, filter key
        if (nCode >= 0)
        {
            KBDLLHOOKSTRUCT info = (KBDLLHOOKSTRUCT)Marshal.PtrToStructure(lp, typeof(KBDLLHOOKSTRUCT));
            foreach (Keys key in mFilter)
                if ((key & Keys.KeyCode) == info.key && CheckModifier(key)) return (IntPtr)1;
        }
        return CallNextHookEx(mHook, nCode, wp, lp);
    }
    private static bool CheckModifier(Keys key)
    {
        // Check if modifier key in required state
        if ((key & Keys.Control) == Keys.Control &&
          GetAsyncKeyState(Keys.LControlKey) == 0 && GetAsyncKeyState(Keys.RControlKey) == 0) return false;
        if ((key & Keys.Shift) == Keys.Shift &&
          GetAsyncKeyState(Keys.LShiftKey) == 0 && GetAsyncKeyState(Keys.RShiftKey) == 0) return false;
        if ((key & Keys.Alt) == Keys.Alt &&
          GetAsyncKeyState(Keys.LMenu) == 0 && GetAsyncKeyState(Keys.RMenu) == 0) return false;
        return true;
    }

    // P/Invoke declarations
    [StructLayout(LayoutKind.Sequential)]
    private struct KBDLLHOOKSTRUCT
    {
        public Keys key;
        public int scanCode;
        public int flags;
        public int time;
        public IntPtr extra;
    }
    private delegate IntPtr LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam);
    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr SetWindowsHookEx(int id, LowLevelKeyboardProc callback, IntPtr hMod, uint dwThreadId);
    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool UnhookWindowsHookEx(IntPtr hook);
    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr CallNextHookEx(IntPtr hook, int nCode, IntPtr wp, IntPtr lp);
    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr GetModuleHandle(string name);
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern short GetAsyncKeyState(Keys key); 
} 
```

# jquery - 所见即所得编辑器 TinyMce 设置在 IE9 中不起作用

> ID：15038149
> 
> 赞同：2
> 
> 时间：2013-02-23T07:14:33.093
> 
> 标签：jquery, asp.net, tinymce, wysiwyg

我在我的应用程序中使用 TinyMce。它工作得很好。我遇到了一个问题，当用户在编辑器中输入内容并按下回车键时，编辑器会插入一个空白的额外行。我通过使用`force_p_newlines: false`它来防止这种情况在 Chrome 中完美运行，但在 IE9 中却不行。

关于在编辑器的初始化代码中还要写什么的任何想法？我也用过`force_br_newlines : false`，但也没用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T10:15:46.287

通过这样做，我得到了这个工作。（在`intit`代码中添加这些行`tinymce`）

```
forced_root_block: false,
force_br_newlines : true,
force_p_newlines: false, 
```

# php - 无法从 mysql 数据库创建谷歌饼图

> ID：15038150
> 
> 赞同：2
> 
> 时间：2013-02-23T07:14:53.063
> 
> 标签：php, mysql, google-visualization

阅读了几篇文章，我有了创建谷歌图表的基本想法，但我仍然不清楚它是如何从从数据库中的表中提取的数据创建的。一些对象的 json 解析已经完成，但不清楚。我写了一些代码。请给我一些前进的方向。

//chartDraw.php

```
<html>
<head>
<!--Load the AJAX API -->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>">
<script type="text/javascript">
//Load the visualization API and the piechart package
google.load('visualization','1',{'packages':['corechart']});
//Set a callback to run when the google visualization API is loaded
google.setOnLoadCallback(drawchart);
function drawChart(){
  var jsonData = $.ajax({
        url:"getdata.php",
        dataType:"json",
        async:false
        }).responseText;
//Create our data table out of JSON data loaded from server
var data=new google.visualization.DataTable(jsonData);
//Instantiate and draw our chart, passing in some options
var chart=new google.visualization.PieChart(document.getElementById('chart_div'));
chart.draw(data,{width:400,height:240});
}
</script>
</head>
<body>
        <!--Div that will hold the pie chart -->
        <div id="chart_div"></div>
</body>
</html> 
```

//getdata.php中指定的url属性

```
<?php

mysql_connect('localhost','uname','123456');
mysql_select_db('rcusers');

$sqlquery1="select userid,group_name,req_nodes,actualPE from jobs where userid='zhang' limit 200";

$sqlresult1=mysql_query($sqlquery1);
while($row=mysql_fetch_assoc($sqlresult1)){
        $userDetails[]=$row;

}

?> 
```

接下来是什么以及我应该如何将数据发送到 json 对象以及在哪里？我很困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:37:36.460

这个简单的例子可能会帮助你

```
<html>
     <head>
      <script type="text/javascript" src="https://www.google.com/jsapi"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
      <script type="text/javascript">
        $(document).ready( function() {
        $('#test').click(function() {
          $.ajax({
          type: 'POST',
          url: 'fetch_data.php',
          dataType: 'json',
          cache: false,
          success: function(result) {
               var data = google.visualization.arrayToDataTable([
                  ['T', result[0]],
                  ['W', result[1]],
                  ['E', result[2]]

                ]);

                var options = {
                  title: 'My Daily Activities'
                };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
        },
        });
       });
      });
       </script>
      </head>
     <body>
       <div id="chart_div" style="width: 900px; height: 500px;"></div>
        <a href="#" id="test">click</a>
     </body>
    </html> 
```

fecth_data.php

```
<?php
$array = array(1,2,3,4);
echo json_encode($array);
?> 
```

# android - 找到并粘贴到 ...mnt/sdcard

> ID：15038152
> 
> 赞同：0
> 
> 时间：2013-02-23T07:15:09.230
> 
> 标签：android, sqlite, emulation, sd-card

我正在尝试粘贴一个包含语言详细信息的 sqlite 数据库，以便在 AVD 模拟器中进行测试。要对其进行测试的应用程序是 mysword4android-3.5.1.apk，我已将其安装到模拟器中，并且它正在运行。测试数据库将放置在文件“...mnt\sdcard\mysword”中 - 我无法弄清楚并找到的是：

1.  这个“...mnt\sdcard\mysword”在我的笔记本电脑中的什么位置——当我在笔记本电脑上搜索它时，我得到的只是 png 图像或 xml 文件。

2.  如何将此 sqlite 数据库放入位置/文件中，以便应用程序可以访问它并显示它

该应用程序的制造商只是说将这个数据库复制并粘贴到其他语言数据库所在的数据路径中；这个位置是“...mnt\sdcard\mysword”

PS我对编写程序代码一无所知。我使用的是 Windows7 笔记本电脑，而 AVD 模拟器运行的是 Android 4.2。如果复制粘贴可以工作，那就是我所能做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:00:21.400

该文件包含在模拟器中的模拟 SD 卡中，因此在笔记本电脑的文件系统中不直接可见。使用 Android 开发工具包提供的工具在笔记本电脑和模拟器文件系统之间移动文件。

尤其是`adb pull`and`adb push`命令会很有帮助。

# python - Python XLWT 外键值

> ID：15038153
> 
> 赞同：2
> 
> 时间：2013-02-23T07:15:14.640
> 
> 标签：python, django, excel, foreign-key-relationship, xlwt

我正在将数据库字段导出到 Excel 文件，一切正常，但我的外键字段被打印为外键 ID，而不是实际值。

我该如何解决？

这是我的代码：

```
 book = xlwt.Workbook(encoding='utf8')
    sheet = book.add_sheet('Expense summary', cell_overwrite_ok=True)
    header_style = xlwt.easyxf('font:height 280, color blue, bold 1; border: bottom thick;')
    sum_style = xlwt.easyxf('font:height 200, color green, bold 1; border: top thick;')
    date_style = xlwt.XFStyle()
    date_style.num_format_str = 'DD-MM-YYYY'
    currency_style = xlwt.XFStyle()
    currency_style.num_format_str = '#,##0.00'
    xls_values = expense.filter(
                                user=request.user.id).values_list('date', 'amount', 'towho', 'forwhat', 'category', 'payment_method')
    headers = (ugettext("Date"), ugettext("Amount"), ugettext("To who"), ugettext("For what"), ugettext("Category"), ugettext("Payment method"))
    for i, header in enumerate(headers):
        col_width = 256 * 20
        sheet.col(i).width = col_width
        sheet.row(0).write(i, header, header_style)
    for row, rowdata in enumerate(xls_values):
        for col, val in enumerate(rowdata):
            if col == 0:
                sheet.write(row + 1, col, val, date_style)
            else:
                if col == 1:
                    sheet.write(row + 1, col, val, currency_style)
                else:
                    sheet.write(row + 1, col, val)
    response = HttpResponse(mimetype='application/vnd.ms-excel')
    response['Content-Disposition'] = 'attachment; filename=sample.xls'
    book.save(response)
    return response 
```

类别字段返回 ID 号而不是值。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:30:21.733

不是枚举`rowdata`，而是逐字段生成行：

```
for row, o in enumerate(xls_values):
    sheet.write(row + 1, 0, o.my_first_field, date_style)
    sheet.write(row + 1, 1, o.my_second_field, val, currency_style)
    sheet.write(row + 1, 2, o.my_category_field.name, val) # assuming name is what you want 
```

# android - 如何确定屏幕上的软按钮android

> ID：15038155
> 
> 赞同：5
> 
> 时间：2013-02-23T07:15:24.880
> 
> 标签：android, uibutton

我正在开发 android 应用程序。我必须在屏幕上的特定位置设置图像。当出现此图像中的屏幕按钮时出现问题！![在此处输入图像描述](../Images/03d399164b64e891e6b1729e016b170a.png)

我用谷歌搜索了很多，但没有找到任何帮助。有没有办法以编程方式检测这些屏幕按钮？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:34:27.283

你可以检查`hasPermanentMenuKey`使用

```
boolean hasMenuKey = ViewConfiguration.get(context).hasPermanentMenuKey(); 
```

如果返回 true，则表示您没有软键。

关于不同的 API 级别不必担心，`honeycomb`因为它们没有软键，有关不同 API 的更多信息，[请参阅此答案](https://stackoverflow.com/a/14068529/488434)。

> 报告设备是否有可供用户使用的永久菜单键。
> 
> 从 Android 3.0 开始，设备可能没有可用的永久菜单键。应用程序应使用操作栏向用户呈现菜单选项。但是，有些应用程序的操作栏不合适或不受欢迎。此方法可用于检测是否存在菜单键。如果没有，应用程序应该提供另一个屏幕上的功能来访问功能。

# mod-rewrite - Heroku PHP cedar stack：我可以重写 URL 吗？

> ID：15038156
> 
> 赞同：4
> 
> 时间：2013-02-23T07:15:32.137
> 
> 标签：mod-rewrite, heroku, cedar

我在 Heroku cedar 堆栈上运行一个 PHP 应用程序。有没有办法设置 URL 重写规则？我曾希望在 .htaccess 文件中执行此操作，但在此仅识别访问控制指令。

我看到 Ruby 的建议是使用 rake 重写，但是对于在 Heroku 上具有 URL 重写配置的 PHP 应用程序需要发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-04T15:08:55.213

您可以`.htaccess`在 Heroku 上将普通文件与 PHP 一起使用。只需`.htaccess`使用重写条件创建一个文件，类似于：

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
</IfModule> 
```

这个例子来自 WordPress。我相信所有 url 现在都重定向到`/index.php`. 此处的示例：[https](https://github.com/catsby/php-heroku-htaccess) ://github.com/catsby/php-heroku-htaccess和此处的应用程序：http: [//php-heroku-htaccess.herokuapp.com/something](http://php-heroku-htaccess.herokuapp.com/something)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T20:20:23.163

因此，为了部分回答我自己的问题并继续我在评论中提到的内容，这是我需要制作的 Mac 和 heroku .htaccess 文件之间的区别：

```
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/$ $1/$2?arg=$3 #Mac
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/$ $1/$2.php?arg=$3 #heroku 
```

这更像是一种解决方法而不是解决方案。我相信 apache 版本是不同的，但最后我只是投降了进一步调试，并使用了一个 .htaccess 文件，其中包含我注释/取消注释的两个部分。

# ios - 您必须至少选择一个要显示的平台

> ID：15038157
> 
> 赞同：0
> 
> 时间：2013-02-23T07:15:32.627
> 
> 标签：ios, facebook

在高级选项卡上，当我尝试发布我的应用页面时，出现以下错误。

**无效信息 您的提交包含以下字段中的无效数据： 您必须选择至少一个要显示的平台**

据我所知，我已填写所有必填字段，但找不到此消息所指的任何平台字段。

在基本选项卡上，我将此设置为原生 iOS 应用程序。

# java - 如何创建一个临时目录，该目录将在 JVM 终止时自动删除？

> ID：15038159
> 
> 赞同：3
> 
> 时间：2013-02-23T07:15:51.257
> 
> 标签：java, file, file-io, directory, temporary-files

JDK 7 引入了一个名为 的 API `Files.createTempDirectory`，但该 API 创建的目录不会在 JVM 终止时自动删除。

不幸`File.deleteOnExit`的是，不适用于非空目录。

有没有办法创建一个在 JVM 终止时自动删除的目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T07:23:19.653

使用Commons IO中的[deleteDirectory 之](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#deleteDirectory(java.io.File))类的东西注册自定义[关闭挂钩](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:20:18.327

您可以使用的技巧是：

*   在关闭您的应用程序时。使用 list() 方法获取 tempDirectory 中所有文件的列表。
*   对列表中的每个文件执行`delete()`操作。
*   之后，您可以删除该目录。

# php - 在按钮单击时删除单击的按钮 div

> ID：15038169
> 
> 赞同：1
> 
> 时间：2013-02-23T07:17:16.367
> 
> 标签：php, javascript

我从数据库中获取数据，div 的数量取决于记录的数量，但是如果我点击第 4 个按钮，我会得到想要的结果，第一个 div 被删除，但我希望它不是首先删除第 4 个 div，我的代码在这里

```
<button class="mws-button red" type="button" id="red_remove_<?php echo $i;?>"onclick="rem(id,id);">Remove</button> 
```

我在按钮点击时调用了这个函数

```
var count=0;
function rem(key,l){
$('#remove_more_opertaion'+count).remove();
$('#label'+count).remove();
count++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:22:21.270

使用 jQuery 更简洁的方法：

HTML：

```
<button class="mws-button red remove-btn" 
        type="button"
        data-id="<?php echo $i; ?>"  // <-- will use this id to remove corresponding div
        id="red_remove_<?php echo $i;?>">Remove</button> 
```

JS：

```
$('.remove-btn').click(function() {
    var id = $(this).data('id');
    $('#remove_more_opertaion' + id).remove();
    $('#label' + id).remove();
}); 
```

Alos 不需要使用`onclick="..."`，因为你有 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:21:41.933

使用拆分功能并匹配数字并删除单击的按钮div

# java - 为什么收藏 #toArray() 不返回 E[]？

> ID：15038171
> 
> 赞同：2
> 
> 时间：2013-02-23T07:17:25.420
> 
> 标签：java, arrays, generics, collections

为什么[`Collection<E>.toArray()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#toArray%28%29)（非参数化方法）返回`Object[]`？

这是有意识做出的决定之一吗？如果需要，该方法是否有任何理由`toArray()`无法返回 a `E[]`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T07:26:26.650

`T`这是因为在不知道类型的情况下无法实例化类型数组`Class<T>`。将此与 进行对比`toArray(T[] array)`，后者具有以下来源（示例来自`LinkedList`）。请注意，传入的数组不仅用作可能的容器，而且可能实例化该类型的新数组。`T`如果不是`E`;的超类，则此代码将引发异常。如果无法将对象添加到数组中。

```
@SuppressWarnings("unchecked")
public <T> T[] toArray(T[] a) {
    if (a.length < size)
        a = (T[])java.lang.reflect.Array.newInstance(
                            a.getClass().getComponentType(), size);
    int i = 0;
    Object[] result = a;
    for (Node<E> x = first; x != null; x = x.next)
        result[i++] = x.item;

    if (a.length > size)
        a[size] = null;

    return a;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:29:31.840

Java 中的泛型是使用一种称为类型擦除的技术实现的。这意味着泛型类的实例没有关于其泛型类型的任何信息。考虑这个

```
List<String> list = new ArrayList<String>();
list.toArray(); 
```

由于 list 不知道它的泛型类型，它只能创建 Object[]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:36:10.637

数组容器具有关联的项数据类型，在运行时保留。如果您构造一个 Object 数组然后添加字符串，则该对象将无法转换为 String[]：

```
 Object[] objArr = new Object[] {"a", "b"};
    String[] strArr = (String[]) objArr; //Produces ClassCastException 
```

当您将不正确类型的项添加到数组时，您还可以注意到在运行时如何使用此数组属性：

```
 String[] strArr = new String[] {"a", "b"};
    Object[] objArr = (Object[]) strArr; //Legal this time
    objArr[0] = 15; //Produces ArrayStoreException 
```

泛型类型参数在运行时被删除，因此当您调用 toArray() 时，JVM 不知道在运行时要创建什么特定的数组类型。

# java - 使用 Java、perl 或 vbs 访问网站脚本

> ID：15038173
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:18:02.747
> 
> 标签：java, perl, scripting, vbscript

您好，我是编程新手，我想在 java 或 vsb 中制作一个访问 google、登录并进行搜索的脚本。我已经完成了我的作业，我发现的只是一些 PHP。非常感谢我只是想学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:31:03.510

我认为您正在尝试做的事情称为网页抓取或“无头网页浏览”。有许多库可以为您执行此操作，例如Java 中的[htmlunit](http://en.wikipedia.org/wiki/HtmlUnit)或 httpunit。[您还可以查看有关网络抓取](https://stackoverflow.com/questions/tagged/web-scraping)的问答。

# java - 在不使用任何外部函数的情况下生成随机数

> ID：15038174
> 
> 赞同：19
> 
> 时间：2013-02-23T07:18:12.990
> 
> 标签：java, c++, c, algorithm, data-structures

这是我最近参加的一次采访中提出的问题。

据我所知，两个数字之间的随机数可以生成如下

```
public static int rand(int low, int high) {
    return low + (int)(Math.random() * (high - low + 1));
} 
```

但是在这里我使用 Math.random() 来生成一个介于 0 和 1 之间的随机数，并使用它来帮助我在低和高之间生成。有没有其他方法可以在不使用外部函数的情况下直接执行？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-23T07:26:42.257

典型的伪随机数生成器根据之前的数计算新数，因此理论上它们是完全确定的。通过提供良好的种子（随机数生成算法的初始化）来保证唯一的随机性。只要随机数不是非常安全关键（这将需要“真正的”随机数），这样的递归随机数生成器通常可以满足需求。

一旦提供了种子，就可以在没有任何“外部”函数的情况下表示递归生成。有几种算法可以解决这个问题。一个很好的例子是[线性同余生成器](https://en.wikipedia.org/wiki/Linear_congruential_generator)。

伪代码实现可能如下所示：

```
long a = 25214903917;   // These Values for a and c are the actual values found
long c = 11;            // in the implementation of java.util.Random(), see link
long previous = 0;

void rseed(long seed) {
    previous = seed;
}

long rand() {
    long r = a * previous + c;
    // Note: typically, one chooses only a couple of bits of this value, see link
    previous = r;
    return r;
} 
```

您仍然需要为这个生成器播种一些初始值。这可以通过执行以下操作之一来完成：

*   使用像当前时间这样的东西（在大多数非安全关键的情况下，比如游戏）
*   使用硬件噪声（有利于安全关键随机性）
*   使用一个常数（有利于调试，因为你总是得到相同的序列）
*   如果您不能使用*任何*函数并且不想使用常量种子，并且如果您使用的语言允许这样做，您还可以使用一些未初始化的内存。例如，在 C 和 C++ 中，定义一个新变量，不要给它赋值，而是使用它的值来为生成器播种。但请注意，这远非“好种子”，而只是满足您要求的黑客。永远不要在实际代码中使用它。

请注意，**没有一种算法**可以为具有*相同输入的**不同*运行生成*不同*的值，而无需访问某些**外部资源**（如系统环境）。每个种子良好的随机数生成器都使用一些外部资源。

 ***** * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T12:21:28.947

在这里，我建议一些带有评论的来源可能对您有帮助：

*   **系统时间** ：单调的一天差随机。快速，简单。
*   **鼠标点** ：随机但在独立系统上没有用。
*   **原始套接字/本地网络** （数据包的信息部分）：良好的随机技术和耗时 - 可以模拟攻击模式以减少随机性。
*   **一些带有排列的输入文本**：快速，通用的方式并且也很好（在我看来）。
*   **由于键盘、磁盘驱动器和其他事件导致的中断时间：** 常见方式 - 如果不小心使用，容易出错。
*   **另一种方法是输入模拟噪声信号**：例如 temp。
*   `/proc` **文件数据**：在 Linux 系统上。我觉得你应该使用这个。

    `/proc/sys/kernel/random:` 该目录包含控制文件操作的各种参数`/dev/random`。

    字符特殊文件`/dev/random`和`/dev/urandom`（从 开始出现`Linux 1.3.30`）为内核的随机数生成器提供了一个接口。

    **试试这个逗号：**

    ```
    $cat /dev/urandom 
    ```

    和

    ```
    $cat /dev/random 
    ```

    您可以编写一个从该文件读取的文件读取函数。

    阅读（也建议）：[来自 /dev/urandom 的 rand 对于登录密钥是否安全？](https://security.stackexchange.com/questions/3936/is-a-rand-from-dev-urandom-secure-for-a-login-key/3939#3939)

`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-23T07:28:14.090

`System.currentTimeMillis()`算不算外挂？你总是可以得到这个并通过一些最大值计算 mod：

```
int rand = (int)(System.currentTimeMillis()%high)+low; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-23T12:54:12.390

从 和之间`x = 4x(1-x)`的“非理性”开始，您可以从逻辑图中获得接近随机性（实际上是混乱且绝对不均匀*）。`x``0``1`

“随机性”的出现*是因为*浮点表示精度边缘的舍入误差。

(*)一旦你知道它在那里，你可以撤消倾斜。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-23T07:23:21.800

您可以使用变量的地址或组合更多变量的地址来制作更复杂的...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T07:26:15.847

您可以获得当前系统时间，但这也需要大多数语言的函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-23T07:30:18.253

如果您被允许使用某些外部状态（例如，使用当前系统时间初始化的长），您可以在没有外部函数的情况下执行此操作。这足以让您实现一个简单的伪随机数生成器。

在对随机函数的每次调用中，您将使用状态来创建一个新的随机值，并更新状态，以便后续调用得到不同的结果。

您只需使用常规 Java 算术和/或按位运算即可完成此操作，因此不需要外部函数。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-09-12T06:49:59.003

```
public class randomNumberGenerator {

    int generateRandomNumber(int min, int max) {
        return (int) ((System.currentTimeMillis() % max) + min);
    }

    public static void main(String[] args) {
        randomNumberGenerator rn = new randomNumberGenerator();
        int cv = 0;
        int min = 1, max = 4;
        Map<Integer, Integer> hmap = new HashMap<Integer, Integer>();

        int count = min;
        while (count <= max) {
            cv = rn.generateRandomNumber(min, max);
            if ((hmap.get(cv) == null) && cv >= min && cv <= max) {
                System.out.print(cv + ",");
                hmap.put(cv, 1);
                count++;
            }
        }

    }
} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-03-11T03:00:41.590

泊松随机发生器

假设我们从随机数的期望值“v”开始。然后说一个非负整数序列满足具有期望值 v 的泊松分布意味着在子序列上，该值的平均值（平均值）将出现“v”。泊松分布是统计数据的一部分，详细信息可以在维基百科上找到。但是这里使用这个函数的主要优点是： 1\. 只生成整数值。2\. 这些整数的平均值将等于我们最初提供的值。

它在小数值没有意义的应用程序中很有帮助。就像 1 分钟内到达机场的飞机数量是 2.5（没有意义），但这意味着 2 分钟内有 5 个计划到达。

```
int poissonRandom(double expectedValue) {
  int n = 0; //counter of iteration
  double limit; 
  double x;  //pseudo random number
  limit = exp(-expectedValue);
  x = rand() / INT_MAX; 
  while (x > limit) {
    n++;
    x *= rand() / INT_MAX;
  }
  return n;
} 
```

线

```
rand() / INT_MAX 
```

应该生成一个介于 0 和 1 之间的随机数。所以我们可以使用系统的时间。秒 / 60 将达到目的。我们应该使用哪个功能完全取决于应用程序。****

# java - 如何在数据库表中每天为唯一登录计数插入单独的行

> ID：15038175
> 
> 赞同：0
> 
> 时间：2013-02-23T07:18:17.700
> 
> 标签：java, database, jdbc, struts

我正在使用 postgresql DB 开发基于 struts 的 Web 应用程序。我需要将我的网站登录用户最近 15 天的登录历史显示为网站管理员的条形图。我尝试使用 JFreeChart 库生成条形图。它采用两个数据库列并动态创建条形图作为图像（动态）。我的问题是我不知道如何在数据库中存储过去 15 天每天的唯一登录次数。主要问题是，它应该为每个新日期维护一个新行，并且条目应该按日期计算。

如何获取逻辑，以便每当日期发生变化时，它应该为每个新日期插入一个新行？任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:27:49.650

> 我的问题是我不知道如何在数据库中存储过去 15 天每天的唯一登录次数。

您可以使用如下 SQL

```
select count(distinct username) 
from logintable 
where datediff(day,current_date(),datecolumn) < 15
group by datecolumn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:28:50.517

不要尝试存储每天唯一登录的计数，只需为每个登录插入一行。然后，当您需要生成报告时，您可以进行统计分析（例如计数、确定什么是独特的）。

# c++ - 在 X11 R6 中增加字体大小和属性

> ID：15038180
> 
> 赞同：0
> 
> 时间：2013-02-23T07:19:27.083
> 
> 标签：c++, linux, x11, embedded-linux, xlib

我正在使用 X11 R6 使用 XDrawString() 编写文本。在此我无法增加字体大小，我不知道如何使用上标和下标。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:12:16.147

字体与GC有关，所以在使用XDrawString时必须在那儿更改。

XDrawText 更容易，你给它一个 XTextItems 列表，每个都有自己的字体。

对于上标和下标，由您决定文本的位置。您可以通过使用 XGetFontProperty 查看 XA_SUPERSCRIPT_X、XA_SUPERSCRIPT_Y、XA_SUBSCRIPT_X 和 XA_SUBSCRIPT_Y 原子来获得正确的位置。

# shell - 更改 shell 脚本中的日期格式

> ID：15038181
> 
> 赞同：1
> 
> 时间：2013-02-23T07:19:29.620
> 
> 标签：shell, date, python-2.7, sed, awk

我有一个字符串，我需要将国家名称和日期分开。

```
# echo 'india16-Feb-2013-20-33.sql' |  sed 's/[0-9][0-9]//' | awk -F"-" '{print $1}'
india

# echo 'india16-Feb-2013-20-33.sql' |  sed 's/india//' | awk -F"." '{print $1}'
16-Feb-2013-20-33 
```

1) 上面的 sed + awk 是否正确？有没有更好的办法？

2）如何将日期格式化为**2013-02-16 20:33:00**

我使用以下命令得到了上面提到的字符串（16-Feb）。但是不知道怎么改回来。

```
date '+%d-%b-%Y-%H-%M' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T13:35:29.477

我无法使用`sed`with`date`版本，`osx`所以我做了一个 Python 版本。

```
import datetime
import re
datestr = 'india16-Feb-2013-20-33.sql'

(country, date) = re.findall('(.*?)(\d{2}-.{3}-\d{4}-\d{2}-\d{2}).*', datestr)[0]

dt = datetime.datetime.strptime(date, "%d-%b-%Y-%H-%M")

print "country=", country
print "dt=", dt 
```

给出：

```
country= india
dt= 2013-02-16 20:33:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:48:42.687

我开始爱`sed`

```
$ cat a.txt
india16-Feb-2013-20-33.sql

$ sed 's/[0-9].*//' a.txt
india

$ sed 's/[a-z]*//; s/-/ /3; s/-/:/3; s/.sql//' a.txt | xargs -0 date '+%F %T' -d
2013-02-16 20:33:00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:38:55.360

使用`sed`和单个替换：

```
sed 's/.*\([0-9]\{2\}-[A-Z][a-z]\{2\}-[0-9]\{4\}\)-\([0-9]\{2\}\)-\([0-9]\{2\}\).*/date -d "\1 \2\3" +"%F %T"/ge' 
```

就个人而言，我发现使用`GNU sed`：

```
sed -r 's/.*([0-9]{2}-[A-Z][a-z]{2}-[0-9]{4})-([0-9]{2})-([0-9]{2}).*/date -d "\1 \2\3" +"%F %T"/ge' 
```

结果：

```
2013-02-16 20:33:00 
```

# ruby - 将文本文件中的输入读入ruby中的数组

> ID：15038182
> 
> 赞同：0
> 
> 时间：2013-02-23T07:19:31.680
> 
> 标签：ruby, arrays, text-files

我想从文本文件中读取数据并仅检索文件中包含的 ip_addresses。

该文件包含以下数据：

```
[#<host:192.168.2.135>, #<host:175.41.142.49>, #<host:20:aa:4b:9b:eb:8c>, #<host:20:7c:8f:10:38:a0>, #<host:192.168.2.1>, #<host:239.255.255.250>] 
```

从这些数据中，我只想要 192.168.2.135 等主机地址并将它们存储在一个数组中。有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:28:49.723

```
open(path_to_file, &:read).scan(/#<host:(.+?)>/).flatten 
```

# c# - 列出 lambda 或委托查找表达式的第一个结果

> ID：15038183
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:19:40.027
> 
> 标签：c#, .net, delegates, lambda, foreach

这些代码对于查找表达式的第一个结果是否返回相同的结果？

```
 bool daily = false;
        lstDep.ForEach(d => daily = d.DailyAmount < transferedAmount ? true : false);
        lstDep.ForEach(delegate(DepositRoleModel d)
        {
            daily = d.DailyAmount < transferedAmount ? true : false;
        }
            ); 
```

如何打破 foreach 以获得第一个真实结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:31:03.920

您不需要“打破 Foreach”，而是使用[`.Any()`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)：

```
bool daily = lstDep.Any(d => d.DailyAmount < transferedAmount); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:31:09.877

您可以改用此查询：

```
bool daily = lstDep.Any(d=>d.DailyAmount < transferedAmount) 
```

它会比您的查询更快地工作。这段代码相当于：

```
bool daily;

foreach(var d in lstDep)
{
    daily = d.DailyAmount < transferedAmount;
    if(daily)
        break;
} 
```

# java - 通过连接Java中给定字符串集的最后一个字母来创建一个新字符串

> ID：15038184
> 
> 赞同：0
> 
> 时间：2013-02-23T07:19:40.607
> 
> 标签：java

我需要从用户那里获取一些单词，然后输出一个最终单词，该单词由用户输入的单词的最后一个字母的连接形成。

这是代码。但是我如何从循环中取出这些字母并将它们连接起来？

```
import java.util.Scanner;
public class newWord {
    public static void main(String args[]) {

        System.out.println("How many words are you going to enter?");
        Scanner num = new Scanner(System.in);
        int number = num.nextInt();
        System.out.println("Please Enter the "+number+" words:");
        for(int n=1;n<=number;n++)
        {

            Scanner words = new Scanner(System.in);
            String thisword = words.nextLine();

            char str2 = thisword.charAt(thisword.length()-1);
            System.out.println(str2);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T07:22:50.513

**仅提示**...因为这显然是某种学习练习。

> 但是我如何从循环中取出这些字母并将它们连接起来？

你没有。*你在循环*中连接它们。

字符串连接可以使用 String`+`运算符或`StringBuilder`.

剩下的就看你了。（请忽略发布完整解决方案的 dingbats 并自己解决。它会对你有好处！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:22:16.977

您可以使用`StringBuilder`类通过方法连接字符串中的最新字符`append`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T07:24:30.123

我相信（如果我错了，请纠正我）您要求将每个单词的最后一个字母变成一个最终单词。您需要做的就是获取每个最后的字母并将它们添加到一个字符串中以保存它们。在整个`for`循环之后，变量`appended`应该是您请求的单词。

```
public static void main(String args[]) {

    System.out.println("How many words are you going to enter?");
    Scanner num = new Scanner(System.in);
    int number = num.nextInt();
    System.out.println("Please Enter the "+number+" words:");
    String appended = ""; // Added this
    for(int n=1;n<=number;n++)
    {

        Scanner words = new Scanner(System.in);
        String thisword = words.nextLine();

        char str2 = thisword.charAt(thisword.length()-1);
        appended +=str2; // Added this
        System.out.println(str2);
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T07:25:21.783

只是你错过了将最终价值保留在一个地方并最终打印的东西

```
 public static void main(String args[]) {

            System.out.println("How many words are you going to enter?");
            Scanner num = new Scanner(System.in);
            int number = num.nextInt();
            System.out.println("Please Enter the "+number+" words:");
            StringBuffer sb = new StringBuffer();
            for(int n=1;n<=number;n++)
            {

                Scanner words = new Scanner(System.in);
                String thisword = words.nextLine();

                char str2 = thisword.charAt(thisword.length()-1);
                sb.append(str2);

            }
            System.out.println(sb.toString());

        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-23T07:26:16.923

通过[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)和[StringBuffer](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)类你会得到你的答案..

# php - 我需要通过循环+数组打开一个文件，然后使用 preg_match 检查内容如何？

> ID：15038185
> 
> 赞同：0
> 
> 时间：2013-02-23T07:19:42.730
> 
> 标签：php, arrays, loops, preg-match

好的，我想调用一个特定的 txt 文件，然后使用循环然后检查内容让我们说前八个单词是否设置了它应该是什么，如果它是一个实际的电子邮件地址等等等等。

我没有太多，因为我完全被卡住了，但这就是我现在所拥有的......

```
$fileContents = file("./aaa/aaa.txt);

foreach($fileContents as $row)
{

} 
```

完全没有太多......因为我很困惑......让我们在aaa.txt中说这是里面的东西

```
a456789,baloney,tony,t_baloney@shaw.ca
a221111,lasty,firsty,e@mail.ca 
```

但我必须检查第一部分是否以一个确切的 6 个数字开头，然后再检查电子邮件是否有效......比如电子邮件包含 xxxxx@xxx.xx

任何人都可以给我一个线索，一只手或帮助我吗？

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:28:37.290

```
foreach ($fileContents as $i => $row) {
  $cols = explode(',', rtrim($row, "\r\n"));
  if (!(preg_match('/^a\d{6}$/', $cols[0]) && preg_match('/^[-._a-z0-9]+@[-.a-z0-9]+$/', $cols[3]) {
    echo "Bad line #".$i.": ".$row;
  }
} 
```

# cluster-analysis - 构建特征向量来学习集群

> ID：15038192
> 
> 赞同：1
> 
> 时间：2013-02-23T07:21:03.317
> 
> 标签：cluster-analysis, feature-extraction

例子：

Doc {
  Citations: {
      0: cite0,
      1: cite1,
      2: cite2,
      ...
      n: citeN
    }
}

我想根据引用的相似性对文档进行聚类，但是每个文档都会有很多引用。我在这里的困惑是......在这种情况下，我如何为数据集构建特征向量以将其输入到我的聚类工具包中。

我正在考虑让 column 成为引文，如果该文档具有该引文，则值为 1。

附言。我在机器学习方面的背景很薄弱——我正在阅读我的讲义，但大多数人都没有涉及到这类问题><提前谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:40:17.690

构建特征向量的一种简单方法是创建邻接矩阵（比如 A）。特征是二进制的。

每行代表被引文献，每列代表被引文献。因此，如果仅`Document1`被引用`Document3`，则元素 A(1,3)=1 并且该行的其余元素为 0。

如果您要处理太多文档，这可能不是有效的方法。如果您有 N 个文档，则矩阵大小为 NxN。

如果您正在编写自己的聚类算法，请使其接受更紧凑的形式（请参阅邻接列表）。

# c - 初始化结构 C 中的变量矩阵

> ID：15038193
> 
> 赞同：1
> 
> 时间：2013-02-23T07:21:41.220
> 
> 标签：c, matrix, struct, initialization

我在用 C 语言初始化结构中的变量矩阵时遇到问题。已经阅读了几篇文章（[post](https://stackoverflow.com/questions/1558025/c-initialize-array-within-structure)），但我似乎无法修复它。不要问我为什么，但对于一个任务，我需要初始化一个位于结构中的矩阵。

我的结构代码是：

```
typedef struct maze{
    int row;
    int column;
    char matrix[row][column];
}maze; 
```

通过调用不同的函数，在读取某个文件后，我需要通过其给定的参数初始化一个矩阵，因此 2 个参数“行”和“列”。

我的 init 函数代码是：

```
struct maze* init_maze(int row, int column) {

    struct maze mazeFilled;
    struct maze *mazePointer;

    mazeFilled.row = row;
    mazeFilled.column = column;

    return mazePointer;
} 
```

但是你可以猜到这是行不通的，人们已经提到很难从 2 个变量中创建一个矩阵。谁能解释我做错了什么。

编辑1：

我根据帖子更改了我的代码，但结构保持不变。我需要分配指针，以便它甚至在勺子之外保持活动状态。

我的 init 函数的新代码是：

```
struct maze* init_maze(void) {

    int row = 6;
    int column = 10;
    struct maze *mazePointer = malloc(sizeof (*mazePointer));

    mazePointer->row = row;
    mazePointer->column = column;

    return mazePointer;
} 
```

编辑2：

认为我发现了我的错误，我没有为矩阵分配内存。我的新初始化函数：

```
struct maze* init_maze(void) {

int row = 6;
int column = 10;

maze *mazePointer;
mazePointer = malloc(sizeof(maze));
mazePointer->row = row;
mazePointer->column = column;
mazePointer->matrix =  malloc(row * sizeof(char*));

for (int i; i < row; i++) {
    for(int j; j < column; j++) {
    mazePointer -> matrix[i][j] = malloc(1 * sizeof(char*));
    }
}

return mazePointer;

} 
```

我仍然不确定如何为第一个数组 [i] 分配内存。谁能告诉我我的方向是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T07:24:01.247

> **谁能解释我做错了什么？**

您正在返回一个指向本地/自动存储持续时间结构的指针，该结构不能保证存在`{ }`于函数范围之外。

* * *

有很多方法可以做到这一点。目的是返回一个即使在从函数返回后仍保持活动和活动的结构。

* * *

更常用的方法是动态分配结构，填充它并返回指向它的指针。

```
struct maze* init_maze(int row, int column) 
{

    struct maze *pmazeFilled = malloc(sizeof(*pmazeFilled));

    pmazeFilled->row = row;
    pmazeFilled ->column = column;

    return pmazeFilled;
} 
```

请记住，调用者必须通过调用`free`返回的指针来释放分配的内存。

# excel - 如何附加列

> ID：15038206
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:23:21.213
> 
> 标签：excel

我只是想知道如何在 Excel 2007 中将两列附加到一列中，并带有换行符。

例子：

前：

```
 ------------------------
 |column1   |     column2|
 ------------------------- 
```

后：

```
---------
|column1|
|column2|
--------- 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:49:00.593

好吧：

在 C1 中：

```
=A1 & CHAR(10) & B1 
```

根据需要填写。确保打开文本环绕。

# oracle - 在 oracle 中查找并插入相应的列值

> ID：15038214
> 
> 赞同：0
> 
> 时间：2013-02-23T07:24:07.023
> 
> 标签：oracle, lookup

我有两张表，ACTIVITY 和 EVENT。ACTIVITY 在一列中列出了所有可能的代码（如 INT），在另外两列（REASON 和 CATEGORY）中列出了它们的描述。我希望用户只在应用程序前端的 EVENT 表中输入代码，然后执行查找以将匹配的描述列插入到同一个（EVENT）表中。

```
CREATE TABLE EX.ACTIVITY
(
  CODE        INTEGER                           NOT NULL,
  REASON      VARCHAR2(40 BYTE)                 NOT NULL,
  CATEGORY    VARCHAR2(30 BYTE)                 NOT NULL,

)

CREATE TABLE EX.EVENTS
(
  ID          INTEGER                           NOT NULL,
  CODE        INTEGER                           NOT NULL,
  REASON      VARCHAR2(40 BYTE)                 NOT NULL,
  CATEGORY    VARCHAR2(30 BYTE)                 NOT NULL,

) 
```

谢谢。（顺便说一句，我有点像新手，所以如果这是初级的，请原谅我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:39:25.243

您有一个存储 ACTIVITY 属性的 ACTIVITY 表。为什么将这些属性存储在另一个表 (EVENTS) 中？这违反了所谓的[规范化](http://en.wikipedia.org/wiki/Database_normalization)（第二和第三范式）。如果您将 ACTIVITY 的属性存储在 EVENTS 表中，那么您已经为自己制造了许多问题，例如冗余数据（原因和类别在 events 表中不必要地重复）。只需将活动代码存储在事件表中！这样，如果您以后必须更改活动的类别，您只需更改与该代码对应的 ACTIVITY 表记录。

要显示这些值，请在 SELECT 语句中使用 JOIN：

```
SELECT e.id, e.code, a.reason, a.category
  FROM events e JOIN activity a ON e.code = a.code
 WHERE ... 
```

JOIN 就像它听起来的那样：它将满足 ON 子句中的条件的两个表的记录连接起来。因此，在此示例中，您将为事件和活动表中具有匹配代码值的每一对记录返回一行。您可能有许多具有相同代码的事件；这不是问题 - 具有该代码的每个事件行都将从该代码的活动表中获得相同的值。这样可以保持数据完整性，同时允许您在一个 select 语句中显示两个表中的值。

# ios - UIImage 不加载图像

> ID：15038225
> 
> 赞同：0
> 
> 时间：2013-02-23T07:26:12.390
> 
> 标签：ios, cocoa-touch, uiimage

以下代码工作正常..

```
scrollView1 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 200, 1024, 200)];
scrollView1.contentSize = CGSizeMake(2048, 200);
scrollView1.showsHorizontalScrollIndicator = YES;
scrollView1.scrollEnabled = YES;
scrollView1.userInteractionEnabled = YES;
scrollView1.backgroundColor = [[UIColor alloc] initWithRed:0.5 green:0.8 blue:0.5 alpha:1];
[self.view addSubview:scrollView1]; 
```

但是这个不是……

```
scrollView1 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 200, 1024, 200)];
scrollView1.contentSize = CGSizeMake(2048, 200);
scrollView1.showsHorizontalScrollIndicator = YES;
scrollView1.scrollEnabled = YES;
scrollView1.userInteractionEnabled = YES;
scrollView1.backgroundColor = [[UIColor alloc] initWithPatternImage:[[UIImage alloc] initWithContentsOfFile:@"image.jpg"]];
[self.view addSubview:scrollView1]; 
```

UIImage 可能有什么问题？在我的完整项目中 UIImage 无法在任何地方工作......

在我的调试器中，所有 uiimage 变量都显示内存地址 0*000000000 即使在内存分配之后

注意：：ScrollView1 工作正常，“image.jpg”是正确的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:32:50.270

```
[UIImage imageNamed:@"image.jpg"]; 
```

像这样试试。这将对您有所帮助。

**编辑：**

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"image" ofType:@"jpg"];
scrollView1.backgroundColor = [[UIColor alloc] initWithPatternImage:[[UIImage alloc] initWithContentsOfFile:path]]; 
```

# php - 如何在 jQuery 警报中显示 PHP 数组？

> ID：15038231
> 
> 赞同：0
> 
> 时间：2013-02-23T07:26:52.367
> 
> 标签：php, javascript, highcharts

在我的 php 项目中，我有一个数组，我需要使用数组的值作为图表的列。我正在使用 [Highcharts](http://www.highcharts.com/)使用 javascript 创建柱形图和 highcharts。如何从 php 读取数组并在 javascript 中用作图表的列。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T07:31:18.343

```
$array = array('hi','684','2');
echo "var array = ". json_encode($array) . ";\n"; 
```

正如克里斯蒂安所说，如果你只想改变格式，你应该只做

```
$array = array('hi','684','2');
json_encode($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:48:47.087

向数据所在的 php 文件发出 ajax 请求。
jQuery：

```
$.ajax({
  type:'GET'
  url: 'pathtomyphpfile'
  success: function(msg){
    var data = msg;
  }
}); 
```

php：

```
echo json_encode($array); 
```

# iphone - 进入后台时如何关闭iPhone应用程序？

> ID：15038232
> 
> 赞同：0
> 
> 时间：2013-02-23T07:26:54.427
> 
> 标签：iphone, ios, ios6, background-service

我做了一个 iPhone 应用程序。当我的应用程序进入后台时。我想完全关闭我的 iPhone 应用程序，当我再次启动我的 iPhone 应用程序时，它应该从起始页面开始，而不应该从我离开的地方开始。我使用了 exit(0)，但我认为 Apple 不推荐它。请尽快提供一些合适的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:48:03.487

您可以通过修改`info.plist`文件来实现它。

添加此键**“应用程序不在后台运行”**并将其值设置为**“是”**

这应该让你去！

让我知道它是否解决了:)

# html - 具有空间填充元素的组合 HTML 布局

> ID：15038233
> 
> 赞同：0
> 
> 时间：2013-02-23T07:26:54.830
> 
> 标签：html, css, layout

我正在尝试完成 HTML/CSS 中的布局。目标是这样的： [![布局](../Images/e7a4f1ec07dc1a71ae22a5e1865e513a.png)](https://i.stack.imgur.com/qkB0a.png)

此布局中的某些元素具有非固定大小。左侧区域具有固定宽度，页脚具有固定（内容匹配）高度。左侧的列表应扩展其高度，页脚中的文本其宽度和画布两个维度，以便填充整个浏览器页面，但不会导致出现任何滚动条。哦，B代表按钮，但我猜这并不重要。

我已经看过一些示例（[this](https://stackoverflow.com/questions/2535186/css-layout-that-fills-available-space)）和参考资料（[this](http://cssdesignpatterns.com/)）并试图从中学习，但我无法以我想要的方式得到它。我所做的更密切的尝试之一是：

```
<html><body style="margin: 0; padding: 0;">
<div style="position: absolute; background: #afa; top: 0px; bottom: 0px; left: 0; right: 0px;">
    <div style="position: absolute; background: #afa; top: 0px; bottom: 0px; left: 0; width: 240px;">
        <input style="width: 240px" id="selectedPosition"></input>
        <select style="position: relative; width: 240px; height: 100%;" id="points" multiple="multiple"></select>
        <div style="position: relative; background: #afa; left: 0; width: 240px;">
            <input style="width: 80px" type="button" value="Add"></input><!--
            --><input style="width: 80px" type="button" value="Up"></input><!--
            --><input style="width: 80px" type="button" value="Down"></input>
        </div>
    </div>
    <div>
        <div><input style="position: absolute; bottom: 0px; left: 0px; width: 100%"></input></div>
        <div><input style="position: absolute; bottom: 0px; right: 0px;" type="button" value="Button 4"></input></div>
    </div>
    <div style="position: absolute; background: #aaf; height: 100%; left: 240px;top: 0px;right: 0px; overflow: auto;"></div>
</div>
</body></html> 
```

这里的问题是底部元素和右下角的按钮被尺寸扩展元素覆盖。我可能可以用固定的尺寸或边距来解决这个问题，但我想以“正确”的方式完成它。

另一种方法是使用跨行和跨列的 4x5 表，但我更加困惑，很快就放弃了。

我对 HTML/CSS 中的布局相当陌生，因此尽管有实际的解决方案，但在这件事上帮助我完成工作的任何“傻瓜”来源都值得赞赏。

# 更新

查看链接和 Fico 的答案后。但是，最接近的尝试是[this](https://jsfiddle.net/TXsyT/1/)。问题是当宽度/高度设置为 100% 时，列表和底部文本都与相应的按钮重叠（在 jsfiddle 示例中，我使用较低的数字进行演示）。作为旁注，给出的示例中的列表根本没有垂直延伸。使用我的本地文件时，它确实如此。

我看到的所有带有固定页脚和高度填充列的示例都为页脚使用了一些固定大小的高度，然后将其负面应用为边距，但我的页脚应该只是包装它的内容。有没有办法设置“延伸到下一个元素”的规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:20:19.217

首先对内容使用标记，对样式使用 css。你会工作得更干净，麻烦更少。包含这么多不是一个好习惯**标签而不是使用外部 CSS（或最终嵌入到文档的 HEAD 中）**

 **在我看来，你在这里需要这么多的绝对定位。

确定设计中的大区域（如下图） ![在此处输入图像描述](../Images/b9a4ad3209b6d60a1bb97ce8e8ccbad6.png)

第一印象是您在正常文档流中的一些元素的左侧宽度处有一个**侧**列，并且在其底部的三个按钮中浮动在一个 div 中

画布可以浮动在这个**side** 的*左侧*或右侧。

底部的文本和按钮可以集成在**页脚**中，按钮可以随意向右或向左浮动

灵活的解决方案易于检测。为您的画布使用一些 min 属性，并可能在旁边使用一些固定宽度。**

# ios - 如何将服务器数据库中的数据同步到本地数据库

> ID：15038236
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:27:23.147
> 
> 标签：ios, objective-c

我提出了申请。它包含一些单词。如果我点击任何单词，我有两个按钮：一个是“添加到收藏夹”，另一个是“我的收藏夹”。当我单击“添加到收藏夹”时，该词也将转到本地数据库和服务器数据库，当我单击“我的收藏夹”按钮时，该词将来自本地数据库。这工作正常。

现在，我的问题是，每当我重新安装应用程序时，当我单击“我的收藏夹”按钮时，发送到服务器数据库的单词应该会来并同步到本地数据库中，这样我就可以再次拥有我喜欢的单词了。请提供有关此的任何逻辑。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:55:30.603

使用 AFNetworking，这是与服务器通信的最佳方式。

# java - JSF 中的绑定对象初始化

> ID：15038237
> 
> 赞同：0
> 
> 时间：2013-02-23T07:27:23.187
> 
> 标签：java, jsf

我在应用程序范围内有这个bean。

```
public class User {
    private UICommand link;
    private String name;
    public User(){
        System.out.println("User.User()");
        name = "Test Link";
    }

    public UICommand getLink() {
        System.out.println("User.getLink()");
        System.out.println(link==null?"link is null":"link is not null");
        return link;
    }
    public void setLink(UICommand link) {
        System.out.println("User.setLink()");
        this.link = link;
        System.out.println("link: "+link.toString());
    }
    public void change(){
        System.out.println("User.change()");
    }
    //setter and getter for name
} 
```

我在 jsp 页面上有这个 jsf。

```
<f:view>
<h:form>
<h:commandLink binding="#{user.link}" action="#{user.change}" value="#{user.name}"/>
</h:form>
</f:view> 
```

我认为 UICommand 对象将被重用（通过将对象的序列化状态与 HTML 输出一起发送），从而保持状态和绑定。但我得到了这个系统输出。

```
//When page loads
User.User()
User.getLink()
link is null
User.setLink()
link: javax.faces.component.html.HtmlCommandLink@14e4ce7

//when user clicks the link 
User.setLink()
link: javax.faces.component.html.HtmlCommandLink@6fcc9c
User.change() 
```

`UICommand`每次用户点击链接时对象都是不同的！！！另外我相信`getLink()`当该对象第一次加载到页面上时只运行一次，但如果是这种情况，那么页面不会反映最新的 UICommand 对象！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:22:14.043

不，每次构建/恢复组件树时，您都会获得全新的 UICommand 实例。但是这些实例从 JSF 状态保存机制中恢复它们的状态。

But you shouldn't use bindings intensively. There is almost never a good reason to do so. If you do so, always use request scope for the bean, because you will run into problems otherwise.

# asp.net-mvc - ASP.NET MVC 4 - 门户网站

> ID：15038248
> 
> 赞同：2
> 
> 时间：2013-02-23T07:29:03.627
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我是 MVC4 的新手，请多多包涵。我正在构建一个门户，用户将在其中看到不同的小部件。让我们说小部件是一些带有标题和内容的矩形框。有什么更好的方法来实现这一点？我打算使用部分视图。然后在聚合视图上调用 Html.renderaction。这是一个不错的选择还是有更好的方法来做到这一点？

2.）此外，当小部件遇到任何异常时，我想仅在小部件区域显示自定义错误消息。我不希望将整个页面重定向到错误页面。只是矩形区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:00:19.160

`@Html.RenderAction`应该做这项工作，对于例外情况，try/catch 可以帮助您：

```
[ChildActionOnly]
public ActionResult Widget(int id) {
    try
    {
      var widget = Repository.GetWidget(id);
      return PartialView(widget);
    }
    catch
    {
      return PartialView("WidgetErrorPage");
    }
} 
```

**更新**：在这种情况下，您可以使用 an`ActionFilter`来处理异常，如 [从 ActionFilter 中返回视图](https://stackoverflow.com/questions/507536/return-view-from-actionfilter)或在此处从 ActionFilterAttribute[中返回带有模型的视图](https://stackoverflow.com/questions/1669553/returning-a-view-with-its-model-from-an-actionfilterattribute)所解释的：

```
public class WidGetHandleException : ActionFilterAttribute
    {
        protected override void OnException(ExceptionContext filterContext)
        {
            filterContext.ExceptionHandled = true;
            filterContext.Result = new PartialViewResult
            {
                ViewName = "WidgetErrorPage",
                ViewData = filterContext.Controller.ViewData,
                TempData = filterContext.Controller.TempData,
            };
        }
    } 
```

然后像这样装饰您的所有小部件操作：

```
 [ChildActionOnly]
 [WidGetHandleException]
 public ActionResult Widget() 
 {

 } 
```

# jakarta-ee - 如何将war文件部署到cPanel并删除项目名称？

> ID：15038252
> 
> 赞同：14
> 
> 时间：2013-02-23T07:29:25.390
> 
> 标签：jakarta-ee, tomcat, spring-mvc, struts2, cpanel

我需要在`cPanel`. 我已经成功安装了Tomcat，

我可以通过将`war`文件复制到我的`www`文件夹中来运行我的应用程序，但问题是它`war`在地址中显示了项目名称（文件名），我需要知道如何删除它，以便用户可以访问`www.example.com`而不是`www.example.com/MyProject/index.jsp`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T10:17:34.700

根据[一项 cpanel 托管服务](http://www.dotservant.com/cpaneldoc/SSLShellTelnetaccess.htm)命令提示符访问，出于安全原因，cpanel 通常会关闭访问权限，您必须专门要求它。如果您有此访问权限，您可以登录并运行 unzip 命令（在使用 FileZilla 或类似工具上传 war 文件后）。

根据[cpanel](http://docs.cpanel.net/twiki/pub/AllDocumentation/TrainingResources/TrainingSlides08/Tomcat.pdf)，如果您没有命令提示符访问权限，您可以将战争上传到您的**public_html**目录，但在此之前您需要更改 apache 配置并为此添加一个“JkMount”（参见带有“appname”的那个以下）。

```
<IfModule mod_jk.c>
  JkMount /*.jsp ajp13
  JkMount /servlet/* ajp13
  JkMount /servlets/* ajp13
  JkMount /*.do ajp13
  JkMount /appname/* ajp13
</IfModule> 
```

当然，除了您输入“您的应用程序名称”而不是应用程序名称。此更改将指示 apache 将对顶级 url（即 mydomain.com/appname）的调用重定向到您的 Tomcat 实例（即 mydomain.com:8080/appname）。上传war并更改配置后，您必须重新启动apache。

但是我们说我们没有 ssh 访问权限，那么我们如何修改该文件。根据[这个论坛](http://forums.cpanel.net/f402/cpanel-tomcat-jsp-servlets-guide-282922.html)，我们可以编辑 /home/username/public_html/.htaccess 或只是 /public_html/.htaccess 并添加以下行：

```
SetHandler jakarta-servlet
SetEnv JK_WORKER_NAME ajp13 
```

现在，apache 将为 mydomain.com/appname 而不是 mydomain.com:8080/appname 重定向到 tomcat。我们如何让它从 mydomain.com 开始工作？我根本不知道这个问题的答案。据我所知，使用将war文件更改为ROOT.war的常用技巧在cpanel中不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-04T04:31:55.510

您将不得不修复 /usr/local/jakarta/tomcat/conf/server.xml 中的条目 在经过大量调整后的某个时间，我使用了它并且它起作用了：

```
<Host name="domain.com" appBase="/home/username/public_html" unpackWARs="true" autoDeploy="true" xmlValidation="false" xmlNamespaceAware="false" reloadable="true">
<Alias>www.domain.com</Alias>
<Context path="" reloadable="true" docBase="/home/username/public_html" debug="1" privileged="true" autoDeploy="true" liveDeploy="true" />
<Context path="/manager" debug="0" privileged="true" docBase="/usr/local/jakarta/tomcat/server/webapps/manager">
</Context>
</Host> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T13:15:36.633

战争文件的名称与容器如何呈现项目无关 - 这只是配置问题，默认情况下容器将上下文路径呈现为文件名。

并且使用 ROOT.war 只是一个愚蠢的技巧，请阅读 Tomcat 中的上下文配置（我假设您使用的是 Tomcat）

[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-31T19:34:04.757

有几种方法可以在 tomcat 中设置应用程序根上下文。所有这些都在服务器的文档中描述。这是另一个

修改`tomcat_home\conf\server.xml`. 在`<Host`标签下放

```
<Context path="" docBase="yourappname" debug="0" reloadable="true" /> 
```

您将标签的反射属性`yourappname.war`放入文件夹的位置。`webapps``appBase``<Host`

保存，重启服务器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-05T07:04:35.690

如果你不能编辑`server.xml`，那么你可以删除 ROOT.war 并将你的 war 文件重命名为 ROOT.war 或者只是将你的 .war 文件解压缩到一个名为 ROOT 的目录。
下次您打开您的网站 ex - www.example.com 时，将向您显示 index.jsp。
我在 Openshift 的网站上做了同样的事情，它提供免费的 PAAS 服务

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-25T09:20:53.637

他们只需要在 shell 中解压缩 .war 存档。看：

如何部署 .WAR 应用程序 - Ubiquity Web Hosting Wiki

我们有超过 100 位用户使用过这些说明，而且效果很好。如果您使用 EasyApache 部署了 Tomcat 并按照 cPanel 的设计进行了设置，那么应该就是这样。这源于：

[http://twiki.cpanel.net/twiki/pub/Al...s08/Tomcat.pdf](http://twiki.cpanel.net/twiki/pub/Al...s08/Tomcat.pdf)

[http://forums.cpanel.net/f42/how-auto-deploy-war-cpanel-server-55096.html](http://forums.cpanel.net/f42/how-auto-deploy-war-cpanel-server-55096.html)

# android - 我想显示四个随机数，最小一个最大十个，但包含一个数字修复

> ID：15038254
> 
> 赞同：3
> 
> 时间：2013-02-23T07:29:35.187
> 
> 标签：android

我想显示 4 个数字选项，就像测验选项一样，四分之三应该是错误的，一个应该是正确答案。所有选项都是数字，每次打开页面时我都想更改正确答案的位置。请帮我

我的结果是一个字符串结果，我将在其中添加结果.....

我正在尝试这个，但没有得到解决方案

```
LinearLayout rowoptions = (LinearLayout) findViewById(R.id.linearlayout);
ArrayList<Integer> numbers = new ArrayList<Integer>();
String[] s = new String[4];
while (numbers.size() < 4) {
    int random = r.nextInt(10)+1;
    int chk = r.nextInt(4)+1;
    if (!numbers.contains(random)) {
        numbers.add(random);
        s[chk] =String.valueOf(random);
    }
}

for (int i = 0; i < 4; i++) {
    Button optionbutton = new Button(this);
    optionbutton.setText(s[i]);
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(70, 70);
    layoutParams.setMargins(5, 5, 0, 0); // left, top, right, bottom
    optionbutton.setLayoutParams(layoutParams);
    //ivBowl.setBackgroundDrawable(null);

    rowoptions.addView(optionbutton);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:38:39.617

嗨，你需要这样的东西吗

```
LinearLayout layout=(LinearLayout)findViewById(R.id.mainlayout);
ArrayList list=new ArrayList();
    list.add(answer);
    Random r=new Random();
    for(int i=0;i<3;i++)
    {
        while(true)
        {
            int next=r.nextInt(10)+1;
            if(!list.contains(next))
            {
            list.add(next);
            break;
            }
        }
    }
    Collections.shuffle(list);
    for(int i=0;i<list.size();i++)
    {
        final Button b=new Button(this);
        b.setText(list.get(i).toString());

        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                int selectedAnser=Integer.parseInt(b.getText().toString());
                if(!(selectedAnser==answer))
                {
                    Toast.makeText(context, "Wrong Answer", Toast.LENGTH_SHORT).show();
                }

            }
        });
        layout.addView(b);
    } 
```

# rabbitmq - 芹菜工人有没有办法告诉经纪人“在我告诉你之前不要给我下一条消息”

> ID：15038256
> 
> 赞同：0
> 
> 时间：2013-02-23T07:29:48.077
> 
> 标签：rabbitmq, celery

我正在创建一个执行顺序很重要的应用程序。我的任务涉及在数据库上持久化数据。我想确保在当前执行的任务成功提交之前，队列中的下一个数据永远不会被处理。如果出现异常，请继续重试当前任务。但我不确定重试在芹菜中是如何工作的。

1.  它是否将消息重新排队并将其放在队列前面，以确保该消息将首先执行。

或者

1.  为队列中的下一条消息提供机会，稍后重试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:42:05.500

听起来像[芹菜链](http://docs.celeryproject.org/en/latest/userguide/canvas.html#chains)是你需要的。

# vb.net - 为什么 VB.NET 简单的应用程序需要永远加载几行

> ID：15038260
> 
> 赞同：0
> 
> 时间：2013-02-23T07:30:20.020
> 
> 标签：vb.net, performance, while-loop, richtextbox, lines

我有一个超级简单的脚本，我用它来将我们多年来从捐赠者那里收集的一长串电话号码分成单独的区号文件。

显然，当你有近 100 万行时，这将需要一段时间 - 但是 - 如果我输入 1,000 行，它只需要不到一秒的时间。一旦我投入 100 万，只需要 10 秒就可以完成 5 行。这怎么可能？

```
Imports System.IO
Public Class Form1
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    System.Windows.Forms.Control.CheckForIllegalCrossThreadCalls = False
    BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    System.Windows.Forms.Control.CheckForIllegalCrossThreadCalls = False
    Dim lines As String
    lines = RichTextBox1.Lines.Count
    Dim looper As String = 0
    Dim path As String = "c:\acs\"
    MsgBox("I have " + lines + " lines to do.")
    If (Not System.IO.Directory.Exists(path)) Then
        System.IO.Directory.CreateDirectory(path)
    End If
    Dim i As String = 0

    For loops As Integer = 0 To RichTextBox1.Lines.Count - 1
        Dim ac As String = RichTextBox1.Lines(looper).ToString
        ac = ac.Substring(0, 3)
        Dim strFile As String = path + ac + ".txt"
        Dim sw As StreamWriter
        sw = File.AppendText(strFile)
        sw.WriteLine(RichTextBox1.Lines(looper))
        sw.Close()
        Label1.Text = String.Format("Processing item {0} of {1}", looper, lines)
        looper = looper + 1
    Next
    MsgBox("done now")
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:48:50.047

首先，您在 For 循环中执行 UI 更新。这需要时间。

您正在不是可能影响性能的主线程的线程中更新 UI。您不应使用 CheckForIllegalCrossThreadCalls 方法。您应该使用 BackgroundWorker 的 ReportProgress 方法正确更新 UI。

您正在为循环的每次迭代打开和关闭一个文件。这也需要时间。

我认为更好的方法是将数据添加到 Dictionary(Of String, List(Of String)) 中，以区号为键，列表将包含该区号的所有数字。一旦字典被填满，循环遍历键并写出数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:46:56.173

每次使用 RichTextBox.Lines 属性时，VB.Net 都需要通过 CR+LF 对来分割内容。因此，您`For loops As Integer = - To RichTextBox1.Lines.Count-1`的性能确实很受欢迎。尝试使用：

```
For Each vsLine As String in RichTextBox1.Lines 
```

反而。它会快很多。或者，如果您必须使用 For 循环，则获取一次：

```
Dim vasLines() As String = RichTextBox1.Lines
For viLines As Integer = 0 to UBound(vasLines.Count)
    '....
Next 
```

反而。

# javascript - 有没有办法在浏览器中检测用户是否单击“另存为”或将页面添加为书签？

> ID：15038261
> 
> 赞同：0
> 
> 时间：2013-02-23T07:30:26.527
> 
> 标签：javascript, browser, applet, webbrowser-control, javascript-framework

我正在编写一个浏览器数据分析器，它检测用户活动并发送到服务器。这样服务器可以根据用户的兴趣提供一些个性化。

我试图在用户为页面添加书签或保存页面时进行拦截。然后我会将此信息发送到服务器，以便服务器了解有关用户兴趣的更多详细信息。

我知道通常我们会根据用户点击的链接来跟踪用户的兴趣。但我想通过包括客户端跟踪来为此添加更多功能。

我不确定我们是否可以使用 javascript。如果不是 javascript，我可以使用其他东西吗..比如小程序？

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:43:07.880

我认为不可能拦截用户是否为页面添加书签。 [您可以添加一个按钮，将页面添加到他们的收藏夹并进行跟踪。](https://stackoverflow.com/questions/3024745/cross-browser-bookmark-add-to-favorites-javascript) 它不会跟踪他们是否通过其他方式添加它。

# qml - QNX Momentic IDE - QML 预览被禁用

> ID：15038267
> 
> 赞同：0
> 
> 时间：2013-02-23T07:31:11.367
> 
> 标签：qml, blackberry-10, qnx

我正在尝试学习 BB10 开发，所以我尝试下载他们的 QNX Momentic IDE。

每当我运行该应用程序时，它总是会弹出一条消息说“QML Preview 兼容性检查失败。QML Preview 已禁用。” 这显然是我的设计模式被禁用的原因。

我在网上搜索了这个问题，发现了类似的情况，我在网上找到的大多数情况都与Java版本有关所以我尝试了几个版本（1.6、1.7），我也尝试了我在这里找到的线程中的解决方案[QML Preview兼容性检查失败。QML preview is disabled](https://stackoverflow.com/questions/14876907/qml-preview-compatibility-check-failed-qml-preview-is-disabled)，但它仍然不起作用。所以尝试了另一个建议来查看 C:\Documents and Settings\user\ndk-10.1.0-workspace.metadata.log 文件以查看真正导致问题的原因，我发现我抛出的错误与我在网上找到的其他案例。

```
Here's the error:

!SESSION 2013-02-22 23:09:38.515 -----------------------------------------------
eclipse.buildId=10.1.0
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.ui 4 4 2013-02-22 23:09:42.781
!MESSAGE Plug-in 'com.rim.tad.tools.qml.javascript.debug.internal.ui' contributed an  invalid Menu Extension (Group: 'jsdebug' is invalid): com.rim.tad.tools.wst.jsdt.debug.ui.jsunit.popup.evaluate

!ENTRY com.rim.tad.tools.qml.core 2 0 2013-02-22 23:09:43.234
!MESSAGE Cannot resolve ValueType variant: Number

!ENTRY com.rim.tad.tools.qml.core 2 0 2013-02-22 23:09:43.234
!MESSAGE Cannot resolve ValueType variant: QLocale

!ENTRY com.rim.tad.tools.qml.core 2 0 2013-02-22 23:09:43.234
!MESSAGE Cannot resolve ValueType variant: String

!ENTRY com.rim.tad.tools.qml.core 2 0 2013-02-22 23:09:43.250
!MESSAGE Cannot resolve ValueType variant: bb::device::CellularService::Types

!ENTRY com.rim.tad.tools.qml.core 2 0 2013-02-22 23:09:43.250
!MESSAGE Cannot resolve ValueType variant: Boolean

!ENTRY com.rim.tad.tools.qml.core 2 0 2013-02-22 23:09:43.250
!MESSAGE Cannot resolve ValueType variant:  bb::system::SystemUiButton 

!ENTRY com.rim.tad.tools.qml.core 2 0 2013-02-22 23:09:43.250
!MESSAGE Issues while loading Components Definition:
Duplicate Signal in: ComponentID: bb::cascades::InvokeActionItem, Signal: handlerChanged

!ENTRY com.rim.tad.tools.qml.simulator 1 0 2013-02-22 23:09:44.703
!MESSAGE C:\bbndk\ide\win32\x86\eclipse\jre\bin\java.exe -cp C:\bbndk\ide\win32\x86\eclipse\plugins\com.rim.tad.tools.qml.simulator_10.1.0.201302011933\ com.rim.tad.tools.qml.sim.check.RenderingCheck -target C:\bbndk\target_10_1_0_338\qnx6

!ENTRY com.rim.tad.tools.qml.simulator 4 0 2013-02-22 23:09:45.546
!MESSAGE QML Preview compatibility check log.
java.lang.IllegalStateException: glGetProcAddress_win32 failed: glGenFramebuffersEXT
at com.rim.tad.tools.qml.sim.CsApplicationEngine.nExec(Native Method)
at     com.rim.tad.tools.qml.sim.CsApplicationEngine.execAndDestroy(CsApplicationEngine.java:45)
at     com.rim.tad.tools.qml.sim.CsApplicationEngineThread.run(CsApplicationEngineThread.java:55)
Warning: WARNING: QApplication was not created in the main() thread.

Process exited with code: -1

!ENTRY org.eclipse.ui.workbench 2 0 2013-02-22 23:13:26.140
!MESSAGE A handler conflict occurred.  This may disable some commands.
!SUBENTRY 1 org.eclipse.ui.workbench 2 0 2013-02-22 23:13:26.140
!MESSAGE Conflict for     'AUTOGEN:::org.eclipse.ui.cheatsheets.actionSet/org.eclipse.ui.cheatsheets.actions.CheatSheetHelpMenuAction':
         HandlerActivation(commandId=AUTOGEN:::org.eclipse.ui.cheatsheets.actionSet/org.eclipse.ui.c    heatsheets.actions.CheatSheetHelpMenuAction,
        handler=ActionDelegateHandlerProxy(null,org.eclipse.ui.cheatsheets.CheatSheetExtensionFacto    ry:helpMenuAction),
        expression=AndExpression(ActionSetExpression(org.eclipse.ui.cheatsheets.actionSet,org.eclip        se.ui.internal.WorkbenchWindow@2585e),WorkbenchWindowExpression(org.eclipse.ui.internal.Wor    kbenchWindow@2585e)),sourcePriority=16640)
    HandlerActivation(commandId=AUTOGEN:::org.eclipse.ui.cheatsheets.actionSet/org.eclipse.ui.c    heatsheets.actions.CheatSheetHelpMenuAction,
    handler=ActionDelegateHandlerProxy(null,org.eclipse.ui.cheatsheets.CheatSheetExtensionFacto    ry:helpMenuAction),
    expression=AndExpression(ActionSetExpression(org.eclipse.ui.cheatsheets.actionSet,org.eclip    se.ui.internal.WorkbenchWindow@2585e),WorkbenchWindowExpression(org.eclipse.ui.internal.Wor    kbenchWindow@2585e)),sourcePriority=16640) 
```

现在，我不知道如何解决这个错误以及如何修复它。如果有人熟悉，如果您能提供一些意见或指出我正确的方向，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:20:28.743

当我遇到这个问题时，它一直是图形驱动程序的问题。您可能希望确保已加载最新的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:40:14.500

检查java版本，可能是你的JVM不支持-d32。

# windows - 尝试从用户模式进程创建全局文件映射对象失败

> ID：15038272
> 
> 赞同：2
> 
> 时间：2013-02-23T07:31:32.830
> 
> 标签：windows, winapi, shared-memory, file-mapping

我有一个无需提升即可运行的 Windows 应用程序。我需要为要在应用程序的所有运行实例之间共享的内存数组创建一个文件映射对象（请注意，其中一些实例可能在不同的登录会话中运行。）

我使用全局名称调用[CreateFileMapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx) API 来创建它，即`Global\sharedname`，使用提供`all`访问权限`everyone`但该 API 失败并出现错误代码 5 或`ERROR_ACCESS_DENIED`.

然后我开始阅读文档，发现我的进程需要`SeCreateGlobalPrivilege`特权。但是当我尝试分配该权限时，[AdjustTokenPrivileges](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375202%28v=vs.85%29.aspx)返回错误代码`ERROR_NOT_ALL_ASSIGNED`，我被卡住了......

那么这里的诀窍是什么，那个该死的MS要我们怎么做？？？

PS。我以前可以毫无问题地创建一个具有相同`all access for everyone`安全描述符和名称的全局命名互斥锁（用于同步访问共享内存） 。`Global\sharedmutex`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T11:27:38.407

只有管​​理员和在会话 0 中运行的服务才能获得`SeCreateGlobalPrivilege`在命名空间中创建文件映射所需的权限`Global`。假设您不想将代码重新写入服务，则必须生成一个单独的提升进程来创建文件映射。

# javascript - xhtml 合规性错误处理程序事件，如 html 合规性 onerror 事件来处理空图像

> ID：15038273
> 
> 赞同：0
> 
> 时间：2013-02-23T07:31:44.850
> 
> 标签：javascript, jquery, xhtml, jquery-events, w3c-validation

以下代码块隐藏了`imagecontent`动态填充的空图像及其标题的占位符 ( )：

```
<head>
<script type="text/javascript">
  function empty_image_handler() {
    document.getElementById("imagecontent").style.display = "none";
  }
</script>
</head> 
```

* * *

```
<body>
<div id="imagecontent"> 
      <img src="imagearchive/<?php echo $row_images['mage_link']; ?>" alt="<?php echo $row_images['image_caption']; ?>" onerror= 'empty_image_handler();' />
      </div>
</body> 
```

问题是，尽管上述代码块与它们完美配合，`xhtml DOCTYPE`但它们是`html DOCTYPE`合规的。因此，该文档未通过 w3c 验证过程进行验证。

`imagecontent`此外，如果没有找到图像，我不想用任何替代虚拟图像替换 div 中的空白空间。

是否有任何`xhtml DOCTYPE`类似于`html DOCTYPE`合规事件的合规错误处理程序事件`onerror`来处理应通过验证过程验证的空图像？

任何关于使用 jQuery 的替代解决方案的参考或指南也应受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:58:03.907

jQuery 中一个甚至不需要图像 id 或类的简单解决方案是：

```
$("img").error(function(){
   $(this).hide();
}); 
```

并由名为**coder**的用户在[https://stackoverflow.com/a/10447080/1799764回答](https://stackoverflow.com/a/10447080/1799764)

# c++ - 带有 char 数组的 C++ 内存池

> ID：15038276
> 
> 赞同：0
> 
> 时间：2013-02-23T07:32:02.440
> 
> 标签：c++, arrays, memory, char, pool

我只是有一个关于 char 数组如何在内存池中工作以及如何为它分配其他变量类型的指针的问题。我正在做一个使用 char 数组作为内存池的分配，我需要能够分配指向它的指针，我已经阅读了一些关于该主题的信息，但不太了解实际分配的工作原理如：

```
const int poolSize = 60000;
char pool[poolSize];

void* allocate(int aSize)
{

   //.....

 return ((void*) 0);
}

long* pointer;
pointer = (long *) allocate(sizeof(long));
*pointer = 0xDEEDEEEF; 
```

我只是不太明白它是如何工作的，因为 char 是 1 个字节，而 long 应该是 4，那么当我需要将数组中的 4 个点分配给一个 long 指针变量时，这样的事情是如何工作的？也可以随意给出示例和解释，但请不要泄露整个程序应该如何工作，因为一旦我完全理解了这部分的工作原理，我想自己弄清楚。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:46:43.170

内存分配与类型无关，即它是否是 long/char.etc 但事实是，它是按“字节”量化的。char 是唯一占用一个字节内存的数据类型。

它在您的程序中如何处理分配的内存。例如

```
char s[4]={0,0,0,'A'};
int *p = (int*)s; //treating those 4 bytes as int
printf("%d",*p); //will print 65 
```

我建议您先观看 4-5 节 Stan-Ford Programming Paradigm 讲座。在这些讲座中，内存分配的解释非常好。您也可以参考 The C 编程语言的第 8 章 - 作者 Denis Ritchie

# emacs - 在 dired 中不使用正则表达式查找和替换

> ID：15038277
> 
> 赞同：4
> 
> 时间：2013-02-23T07:32:24.403
> 
> 标签：emacs, replace, dired

我正在尝试将网站转换为电子书，并且在我要删除的每个页面的开头都有大量的 html。可以想象，`Q`由于大块中的某些内容未正确转义，因此使用结果不匹配。当我尝试用正则表达式解决问题时，我得到了堆栈溢出。

我真正需要的是一种在*没有*正则表达式的情况下以通常的 M-% 方式在 dired 中查找和替换的方法。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T21:35:35.957

正则表达式的行为在理论上是可选的，但该函数调用有问题的硬编码该假设在几个地方。我认为最简单的解决方案是制作在运行时不设置正则表达式标志的副本。

```
(eval-after-load 'dired
  '(define-key dired-mode-map (kbd "C-c Q") 'my-dired-do-query-replace))

(defun my-dired-do-query-replace (from to &optional delimited)
  "Do `query-replace' of FROM with TO, on all marked files.
Third arg DELIMITED (prefix arg) means replace only word-delimited matches.
If you exit (\\[keyboard-quit], RET or q), you can resume the query replace
with the command \\[tags-loop-continue]."
  (interactive
   (let ((common
          (query-replace-read-args
           "Query replace in marked files" nil t)))
     (list (nth 0 common) (nth 1 common) (nth 2 common))))
  (require 'dired-aux)
  (dolist (file (dired-get-marked-files nil nil 'dired-nondirectory-p))
    (let ((buffer (get-file-buffer file)))
      (if (and buffer (with-current-buffer buffer
                        buffer-read-only))
          (error "File `%s' is visited read-only" file))))
  (my-tags-query-replace
   from to delimited '(dired-get-marked-files nil nil 'dired-nondirectory-p)))

(defun my-tags-query-replace (from to &optional delimited file-list-form)
  "Do `query-replace' of FROM with TO on all files listed in tags table.
Third arg DELIMITED (prefix arg) means replace only word-delimited matches.
If you exit (\\[keyboard-quit], RET or q), you can resume the query replace
with the command \\[tags-loop-continue].
Fourth arg FILE-LIST-FORM non-nil means initialize the replacement loop.
Fifth and sixth arguments START and END are accepted, for compatibility
with `query-replace', and ignored.

If FILE-LIST-FORM is non-nil, it is a form to evaluate to
produce the list of files to search.

See also the documentation of the variable `tags-file-name'."
  (interactive (query-replace-read-args "Tags query replace" nil t))
  (require 'etags)
  (setq tags-loop-scan `(let ,(unless (equal from (downcase from))
                                '((case-fold-search nil)))
                          (if (search-forward ',from nil t)
                              ;; When we find a match, move back
                              ;; to the beginning of it so perform-replace
                              ;; will see it.
                              (goto-char (match-beginning 0))))
        tags-loop-operate `(perform-replace ',from ',to t nil ',delimited
                                            nil multi-query-replace-map))
  (tags-loop-continue (or file-list-form t))) 
```

# ruby - 解密这个正则表达式：“一二三”.sub(/(t\w*)/) { $1[0, 1] }

> ID：15038283
> 
> 赞同：0
> 
> 时间：2013-02-23T07:33:49.880
> 
> 标签：ruby, regex

嘿，Stackerenos 同胞！

我需要帮助破译这里使用的正则表达式：

```
 "one two-three".sub(/(t\w*)/) { $1[0, 1] } 
```

这就是我认为的意思。正则表达式 /(t\w*)/ 将匹配 "tw" 并将其替换为 {$1[0,1]}。但是 {$1[0,1]} 到底是什么意思呢？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:04:33.153

{ $1[0, 1] } 是一个块，计算结果为字符串中捕获组的第一个字符。有关完整说明，请参阅[此答案](https://stackoverflow.com/a/4626498/886974)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:57:00.867

正则表达式第一个匹配的位置 0 的第一个单 (1) 字符，在这种情况下表示`t`.

# c# - ObjectContext.Translate - 使用不同的属性名称

> ID：15038285
> 
> 赞同：3
> 
> 时间：2013-02-23T07:33:55.140
> 
> 标签：c#, entity-framework-5, objectcontext

我正在使用实体框架并调用此处描述的存储过程：http: [//msdn.microsoft.com/en-us/data/jj691402.aspx](http://msdn.microsoft.com/en-us/data/jj691402.aspx)在“使用代码访问多个结果集”下

执行存储过程后，我使用 ObjectContext.Translate 方法将结果放入数据协定对象中，这要求数据协定属性与返回的数据相匹配。

有什么方法可以使用不同的属性名称，但仍然让 Translate 方法正确映射它们？

例如，我有一个获取国家列表的过程，它返回以下列：listID、listName。我希望我的数据合同对象只有 ID 和名称，而不是这些名称。

我尝试将 Name 参数添加到 DataMember 属性，但这不起作用。

```
[DataMember(Name="listID")]
public string ID { get; set;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:15:44.483

不，你不能这样做。Translate 遍历读取器内部的数据集，并将其直接映射到您传入的实体中定义的属性。它不知道数据成员注释。这是有道理的，因为数据注释用于序列化，您的数据层不需要知道这些。

我建议您在具有直接映射到您正在调用的查询的属性的实体上调用 Translate。然后，让您的 DataMember 定义它将被转换为以进行序列化的名称。例如，如果您的查询返回 listID 和 listName：

```
[DataMember("ID")]
public string listID { get; set; }

[DataMember("Name")]
public string listName { get; set; } 
```

# sql - sql中的高级单词搜索

> ID：15038286
> 
> 赞同：2
> 
> 时间：2013-02-23T07:34:04.607
> 
> 标签：sql, sql-server, tsql, full-text-search

我需要在 sql server 中编写一个查询，它选择包含两个单词的行，其中（至少/最多/完全）它们之间指定的单词数...

我编写了这段代码来实现两者之间的确切单词数：

```
SELECT simpledtext
FROM booktexts
WHERE simpledtext LIKE '%hello [^ ] [^ ] search%' 
```

以及用于在两者之间实现最小字数的代码：

```
SELECT simpledtext
FROM booktexts
WHERE simpledtext LIKE '%hello [^ ] [^ ] % search%' 
```

但我不知道如何在 t-sql 代码之间编写最大单词...

另一个问题是是否可以在 sql server 2012 中使用全文搜索来实现这些类型的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:55:26.817

你喜欢的字符串只会匹配单个字符的单词。如果这是你需要的，你可以像这样把一些东西放在一起：

```
declare @str1 varchar(1024) = 'and hello w w w search how are you',
        @str2 varchar(1024) = 'and hello w w search how are you',
        @likeStr varchar(512),
        @pos int,
        @maxMatch int;

set @maxMatch = 2;
set @pos = 0;

set @likeStr = '%hello';

while (@pos < @maxMatch)
begin
    set @likeStr += ' [^ ]';

    set @pos += 1;
end

set @likeStr += ' search%';

select @likeStr, (case when @str1 like @likeStr then 1 else 0 end), (case when @str2 like @likeStr then 1 else 0 end) 
```

如果这不是您需要的，并且您知道单词将包含多少个字符，则可以`[a-zA-Z]`在循环中的 like 字符串中使用。

但是，我希望这也不会是您所追求的。然后我的建议是放弃类似的字符串，并转向更复杂的`regular expressions`.

不幸的是，您不能将 System.dll 直接加载到 SQL Server 2008 中（我认为这也适用于 SQL Server 2012），因此您需要创建一个自定义的 .NET 程序集并将其加载到您的数据库中。您应该`IsDeterministic`在 .NET 代码中使用注释，并将自定义程序集加载到 SQL Server`with permission_set = safe`中。这应该确保您获得函数的并行性，并且可以在计算列等地方使用它。

> SQL Server 非常擅长运行.NET 代码，即它可以非常高效。用正则表达式写出你需要的东西应该很容易。

至于全文搜索， contains() 基本上是一个全文谓词，您必须在 SQL Server 中启用它才能使用它。near() 在 contains() 谓词中使用。我认为这对于您想要做的事情来说是庞大的，无论是就支持的功能（它为模糊匹配做词的变化），以及您需要启用它（运行额外的 Windows 服务）而言。

# sbt - 取决于 sbt 中的自定义 myproject-test Maven 工件

> ID：15038292
> 
> 赞同：1
> 
> 时间：2013-02-23T07:35:08.497
> 
> 标签：sbt

如何在一个 sbt 项目中发布 myproject-test.jar，包含我的测试类，并在另一个 sbt 项目中同时依赖它和 myproject.jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:35:08.497

这个答案适用于 sbt 0.11.3。

在第一个 sbt 项目中：

```
publishArtifact in Test := true 
```

在第二个中，像这样指定依赖项：

```
"com.example" % "myproject" % "42" classifier "test" classifier "" 
```

（即将两个分类器添加到您现有的依赖规范中。）

但是，您可能希望在第二个项目中执行[此操作。](https://stackoverflow.com/questions/8193904/sbt-test-dependencies-in-multiprojects-make-the-test-code-available-to-dependen)

# visual-studio - 动态文件包含在 Visual Studio 构建过程中

> ID：15038297
> 
> 赞同：0
> 
> 时间：2013-02-23T07:36:06.587
> 
> 标签：visual-studio, msbuild, build-automation

我有一个关于 VS 构建过程的问题。我有一个 DLL 项目，里面有 3 个 .cs 文件。我希望能够定义要在编译过程中包含哪些文件。所以我只能用file1.cs来构建一个dll文件。或file2.cs。或 file1.cs 和 file3.cs。

目前，我知道的唯一方法是创建我需要的尽可能多的 proj 文件，然后手动选择要构建的文件。

我想知道是否有其他方法可以做到这一点，也许在预构建事件中您可以重新定义包含或不包含的文件。也许存在一些插件？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T08:06:51.610

您可以通过在项目组上设置条件来有条件地将文件包含在项目文件中。在文本编辑器中打开你的 csproj：

```
<ItemGroup>
    <Compile Include="Program.cs" Condition="$(BuildtypeA)!='True'" />
    <Compile Include="Program1.cs" Condition="$(BuildtypeA)!='True'" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup> 
```

使用您喜欢的任何条件 - 在本例中为 BuildtypeA。您可以将其作为命令行上的属性传递给 msbuild。（或我的创建。修改构建配置）

您还可以在给定文件夹上使用通配符，它​​将在项目文件中包含给定位置的任何内容。

```
<ItemGroup>
    <Compile Include="..\dynamiccontent\*.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup> 
```

无需加载项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T15:30:17.053

不完全确定为什么你不能一直用所有 3 个文件编译项目，但如果你真的需要做这样的事情，你可以查看 MSBuild 扩展。它们支持操作 Xml 文档（这就是 csproj 文件）的能力，并且您可以根据需要动态添加/删除对文件的引用。让我知道您是否需要做类似事情的示例。

# oop - 是否有可能违反 ABAP 中的反射封装？

> ID：15038299
> 
> 赞同：2
> 
> 时间：2013-02-23T07:36:12.753
> 
> 标签：oop, reflection, encapsulation, abap

是否有可能：

*   读取/修改私有成员变量的内容？
*   调用私有方法？

..从这些不在范围内的上下文中？

不打算做任何这样的架构，我只是想知道它是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:24:21.203

ABAP 是一种解释型语言。所以口译员随时都知道任何事情。即使使用反射 (RTTI/RTTC) 和/或动态调用，您也无法访问超出范围的私有成员。

但是，如果您已声明朋友，那么朋友当然可以访问私人成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:29:47.970

由于调试器是用 ABAP 编写的，并且调试器可以显示私有成员的内容，所以前者是可能的（如果不容易 - 你必须做一些非常危险的低级工作，我不推荐出于明显的原因）。对于调用私有方法，我不确定，但我怀疑这是可能的。

# animation - OpenGL中骨骼动画背后的逻辑

> ID：15038302
> 
> 赞同：4
> 
> 时间：2013-02-23T07:37:01.070
> 
> 标签：animation

使用的骨骼重量、骨骼影响、关节、偏移和局部矩阵是什么？互联网上没有特定的文章可以很好地解释逻辑。我仍然不知道是否每根骨头都有不同的模型，以后会与其他模型结合起来。或者如何处理这些矩阵，如何设置骨骼，组合和蒙皮......如果你能分享任何文章或你在 opengl 中关于骨骼动画的知识，我会很高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T09:41:44.717

其中一些术语在实现之间会有所不同。与其尝试提​​供具体的定义，我更愿意对蒙皮的工作原理进行一个非常粗略的概述，因为我认为这就是您要问的。

此外，这不是特别 GL 特定的......

主要思想是您采用多边形模型并将其附加到骨架上。模型中的每个顶点都分配给一个或多个骨骼。在这种情况下，骨骼实际上只是一种转换，尽管它们通常被可视化为骨架，因为骨骼通常是在层次结构中创作的，并且自然会类似于实际的骨架。

“关节”可能只是意味着“骨头”，或者在其他情况下实际上可能指的是两个骨头如何连接和关节......

由于骨骼是分层的，它们将具有描述它们相对于父级的变换的“局部”变换。在运行时，转换通常会被连接起来，以便它们都在同一个空间中。

将顶点分配给骨骼是使用权重完成的。每个顶点的权重*通常*加起来为 1。权重可以通过靠近骨骼自动分配，但通常由艺术家手动调整。通常使用艺术包中的工具将它们“绘制”到 3D 模型上。

在运行时，顶点由它们所影响的每个骨骼进行变换，最终顶点位置是这些不同变换结果的加权平均值。加权平均值的计算方式可能会有所不同，但这是一般方法。

然而，对于运行时应用程序，将影响顶点的不同骨骼的数量保持在最低限度通常很重要，并且可能有一个相对较小的上限；4，也许。因此，不是为骨架中的每个骨骼提供每个顶点的权重，而是提供固定数量的关节索引和相应的权重。

请注意，在蒙皮时通常不会对纹理坐标进行任何操作，但几乎可以肯定，您必须重新计算法线和可能的切线向量。同样，如何做到这一点可能因实现而异。

# php - 如何在jqgrid中为1个字段实现不同的格式

> ID：15038303
> 
> 赞同：0
> 
> 时间：2013-02-23T07:37:00.937
> 
> 标签：php, jquery, html, jqgrid

我在**JQGRID中有这样的站点表配置**

```
configid config rule

1\. Aplication_name 'MyApps'
2\. Max number  1,000,00
3\. Application End 12/31/2012 
```

一种细胞类型的**编号**，但另一种的日期。如果用户想编辑**日期**类型，它会显示**datepicker**。我怎么做？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:54:19.483

在|下的[演示页面](http://www.trirand.com/blog/jqgrid/jqgrid.html)上有一个如何使用带有 jqGrid 的 jQuery UI datepicker 的示例。.`Integrations``UI Datepicker`

该演示是否存在问题或您需要网格来实现的更多问题？

# android - 如何获取两点之间所有坐标的列表？

> ID：15038307
> 
> 赞同：0
> 
> 时间：2013-02-23T07:38:13.370
> 
> 标签：android, coordinates

我已经从[这个](https://stackoverflow.com/a/13491882/884674)Javascript 答案修改了这个答案。

他们有“空”，我用零代替。

但是，它有很多小故障。

```
public ArrayList<Point> getListOfIntermediatePoints(Point A, Point B ){
        float m = slope(A, B);
        int C = (int) intercept(A, m);

        ArrayList<Point> coordinates = new ArrayList<Point>(); 
        for (int i = A.x; i <= B.x; i++) {
            float j = m * i + C; //y = mx + c;
            coordinates.add(new Point(i,(int) j));
        }
        Log.d("coordinates", coordinates+"");
        return coordinates;
    }

    public float slope(Point a, Point b) {
        if (a.x == b.x) {
            return 0;
        }
        return (b.y - a.y) / (b.x - a.x);
    }

    float intercept(Point A, float slope) {
        if (slope == 0) {
            // vertical line
            return A.x;
        }
        return A.y - slope * A.x;
    } 
```

# ios - 如何解决 NSRangeException

> ID：15038309
> 
> 赞同：0
> 
> 时间：2013-02-23T07:38:32.583
> 
> 标签：ios, cocoa-touch, nsrangeexception

嗨，我是 iphone 编程新手，我正在使用 EGOPhotViewer 并希望使用此代码显示图像，

```
for ( recipeImages in recipeImages.imgArray) {

     photo = [[MyPhoto alloc] initWithImageURL:[NSURL URLWithString:recipeImages.recipie_img_url]name:recipeImages.recipe_name];
     NSLog(@"%@",recipeImages.recipie_img_url);

     MyPhotoSource *source = [[MyPhotoSource alloc] initWithPhotos:[NSArray arrayWithObjects:photo ,nil]];
       photoController = [[EGOPhotoViewController alloc] initWithPhotoSource:source];

}

        [APPDELEGATE.navigationController pushViewController:photoController animated:YES]; 
```

我得到这个错误

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 2147483648 beyond bounds [0 .. 0]'
*** First throw call stack:
(0x225f012 0x2084e7e 0x2214b44 0x9e1e4 0xa46c4 0x1b45dc9 0x22b90c5 0x2213efa 0x1a7a482 0x1a8d73b 0xa9d7c 0xa6a4e 0xa5081 0xa0499 0x10af753 0x10afa7b 0x10bd590 0x10c55bd 0x10c5eab 0x10c64a3 0x10c6098 0x5bad6 0x2098705 0xfcf920 0xfcf8b8 0x1090671 0x1090bcf 0x108fd38 0xfff33f 0xfff552 0xfdd3aa 0xfcecf8 0x2c15df9 0x2c15ad0 0x21d4bf5 0x21d4962 0x2205bb6 0x2204f44 0x2204e1b 0x2c147e3 0x2c14668 0xfcc65c 0x263a 0x2545)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:52:18.197

我通过编写这段代码解决了这个问题

```
 NSMutableArray *localImagesArray = [[NSMutableArray alloc] init];

for ( recipeImages in recipeImages.imgArray) {
        photo = [[MyPhoto alloc] initWithImageURL:[NSURL URLWithString:recipeImages.recipie_img_url]name:recipeImages.recipe_name];
     NSLog(@"%@",recipeImages.recipie_img_url);
    NSLog(@"%@", [photo debugDescription]);
    [localImagesArray addObject:photo];
}

     MyPhotoSource *source = [[MyPhotoSource alloc] initWithPhotos:localImagesArray];
       photoController = [[EGOPhotoViewController alloc] initWithPhotoSource:source];

       [APPDELEGATE.navigationController pushViewController:photoController animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T08:53:15.113

> [__NSArrayI objectAtIndex:]：索引 2147483648 超出范围 [0 .. 0]'

2147483648 是`NSNotFound`. 在您的代码中的某处，或者您正在使用的库的代码中，`indexOfObject:`正在一个数组上使用类似的东西，并且该索引被用于从另一个数组中获取一个值，但它失败了。

你的 for 循环看起来很可疑。您在每次迭代结束时为 photoController 分配一个值，这意味着只有您最后分配的值才会真正被使用。我不熟悉您使用的库，但您可能希望在将 MyPhoto 对象传递给单个 photoController 之前构建一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T07:56:45.133

确保`initWithImageURL: name:`内部`MyPhoto`退货`self`。验证这一点`NSLog(@"%@", [photo debugDescription]);`

# sql - Sql 密码生成器 - 8 个字符，大写和小写，包括一个数字

> ID：15038311
> 
> 赞同：4
> 
> 时间：2013-02-23T07:38:46.290
> 
> 标签：sql, sql-server, tsql

我需要在 TSQL 中创建一个新密码，该密码必须是 8 个字符 (az)，其中必须包括大写和小写字符以及至少一个数字。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-23T08:03:29.677

```
select cast((Abs(Checksum(NewId()))%10) as varchar(1)) + 
       char(ascii('a')+(Abs(Checksum(NewId()))%25)) +
       char(ascii('A')+(Abs(Checksum(NewId()))%25)) +
       left(newid(),5)
from yourTable 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-23T08:16:47.883

需要考虑的事情，有点复杂：

```
SELECT      TOP 8
            SUBSTRING(tblSource.vsSource, tblValue.number + 1, 1) AS vsChar
FROM        (SELECT 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789' AS vsSource) AS tblSource
            JOIN master..spt_values AS tblValue 
                ON tblValue.number < len(tblSource.vsSource)
WHERE       tblValue.type = 'P'
ORDER BY    NEWID() 
```

但非常随机。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T08:49:01.087

这是一个为您提供非常随机密码的选项。它使用[数字表](http://dataeducation.com/you-require-a-numbers-table/)，但除此之外相当简单。

```
declare @chars char(62), @bytes binary(8)
set @chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'
set @bytes = CRYPT_GEN_RANDOM(8)

select SUBSTRING(@chars, (SUBSTRING(@bytes, n.Number, 1) % LEN(@chars)) + 1, 1)
from dbo.Numbers n
where n.Number between 1 and LEN(@bytes)
FOR XML PATH ('') 
```

# mysql - CF10，MYSQL SQL_SELECT_LIMIT=DEFAULT

> ID：15038312
> 
> 赞同：1
> 
> 时间：2013-02-23T07:39:08.573
> 
> 标签：mysql, coldfusion, coldfusion-10

我刚刚用mysql 5.6设置了CF10、win2008、IIS 7.5。但是我们收到了这个错误：

```
Error Executing Database Query.
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OPTION SQL_SELECT_LIMIT=DEFAULT 
```

当我将“LIMIT”明确设置为查询时，此错误将被删除。

**（评论更新）**

这是一个例子：

```
<cfquery name="dds" datasource ="#Request.Datasource#"> 
    SELECT * 
    FROM   tblaccounts 
    LIMIT 100 
</cfquery> 
```

据我的研究表明，它与新版本的 mysql 5.6 不兼容。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T17:58:21.527

从上面的答案中借用一些更详细的信息：

我们遇到了同样的问题，通过更新 JDBC 文件解决了这个问题。由于[ColdFusion 10 仅支持 MySQL 5.0 和 5.1](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/coldfusion/pdfs/cf10/coldfusion10-support-matrix.pdf)，因此您需要如上所述更新连接器。

要更新 Windows 机器上的 JDBC 连接器，

1.  [从上面提供的链接](http://dev.mysql.com/downloads/connector/j/)获取 .zip 连接器
2.  打开 zip 存档并找到 mysql-connector-java-5.1.23-bin.jar
3.  将此 .jar 文件复制到 C:\ColdFusion10\cfusion\lib\
4.  打开服务（开始 > 控制面板 [可选] > 管理工具 > 服务）
5.  停止/启动“ColdFusion 10 应用服务器”服务

要验证新的 .jar 是否已被 ColdFusion 识别，请登录到您的 ColdFusion 管理员，单击“服务器设置”下的“设置摘要”。搜索“mysql”。您应该会看到“CF 服务器 Java 类路径”部分下列出的 .jar 文件。无需重新设置数据源。这些更改应自动应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:18:01.013

据我了解，另一个选择应该是将 JDBC 驱动程序更新为[最新的 MySQL JDBC Driver](http://dev.mysql.com/downloads/connector/j/)。您可以在此处找到有关[使用最新 JDBC 驱动程序](http://helpx.adobe.com/coldfusion/kb/coldfusion-mx-configuring-mysql-jdbc.html)的说明：（虽然说明可能有点陈旧，但它应该仍然以几乎相同的方式工作）。

仅供参考[ColdFusion 10 仅支持 MySQL 5.0 和 5.1](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/coldfusion/pdfs/cf10/coldfusion10-support-matrix.pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T21:45:10.903

非常感谢克拉克 - 我们刚刚遇到了与 CF9 相同的问题

这实际上也适用于 CF9。第 3 步然后： 将此 .jar 文件复制到 C:\ColdFusion9\lib\ Step3a 重命名旧驱动程序 mysql-connector-java-commercial-5.1.11-bin.jar.old 否则驱动程序可能会冲突。（以前发生过）

更新后，这个错误似乎消失了。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T18:08:31.863

ColdFusion 10 更新 11 现在支持 MySQL 5.6，详情请点击此处：[http ://helpx.adobe.com/coldfusion/kb/coldfusion-10-update-11.html](http://helpx.adobe.com/coldfusion/kb/coldfusion-10-update-11.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T09:24:28.323

MySQL`SET OPTION`很久以前就弃用了，请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/set-statement.html)，并在 5.6 中将其删除。您需要使用 SET 而不使用 OPTION 语句，

`SET SQL_SELECT_LIMIT = 100;`

会做你想做的。

请注意，这会为单个连接设置默认值。为确保您的后续查询使用相同的连接，请将它们包装在`<cftransaction>`

```
<cftransaction>
  <cfquery name="tmp" datasource ="#Request.Datasource#"> 
  SET SQL_SELECT_LIMIT = 100;
  </cfquery> 
  <cfquery name="dds" datasource ="#Request.Datasource#"> 
  SELECT * 
  FROM tblaccounts;
  </cfquery> 
</cftransaction> 
```

另一种方法是为数据源启用多个查询，但出于安全原因不建议这样做。

# iphone - 尝试使用 SDWebImage 将整个项目转换为 ARC

> ID：15038315
> 
> 赞同：0
> 
> 时间：2013-02-23T07:39:25.880
> 
> 标签：iphone, ios, objective-c, automatic-ref-counting

尝试转换为 ARC 时出现一个奇怪的错误。我只有一个错误：“SDWebImage 仅是 ARC。为项目打开 ARC 或使用 -fobjc-arc 标志”。错误发生在我的 SDWebImageCompat.m 文件中：

```
#if !__has_feature(objc_arc)
#error SDWebImage is ARC only. Either turn on ARC for the project or use -fobjc-arc flag
#endif 
```

我很困惑。我正在尝试转换为 ARC。我以前从未遇到过 SDWebImage 的构建错误，只是现在我试图将整个项目转换为 ARC，我才收到此错误。构建项目时不会发生错误，仅当我尝试从折射器转换为 ARC 时。任何想法为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:49:47.257

尝试新版本的 SDWebImage，您所需要的一切 - 它添加了特定的 .framework 文件，并且它已经在 ARC 中。删除 SDWebImage，将您的项目转换为添加 .framework。它非常适合我！

# c# - 添加对象不工作

> ID：15038319
> 
> 赞同：2
> 
> 时间：2013-02-23T07:39:46.840
> 
> 标签：c#, entity-framework, .net-3.5

在带有**EF的****.net (3.5)**应用程序中，我使用以下代码插入新记录，但**AddObject()**不起作用。

 ****我很惊讶，因为它是第一次发生，甚至在我当时在 EF 工作之前它就开始工作了。

**我的代码**

```
 public void NewAirline(string name, string sname, string remark)
    {
        GsecEntities e = new GsecEntities();
        tbAirLine al = new tbAirLine()
        {
            Name = name,
            Remark = remark,
            ShortName = sname
        };
        e.tbAirLines.AddObject(al);
        e.SaveChanges();
    } 
```

作为建议，我正在编写 tbAirline 的代码

```
 public partial class GsecEntities : global::System.Data.Objects.ObjectContext
{
    /// <summary>
    /// Initializes a new GsecEntities object using the connection string found in the 'GsecEntities' section of the application configuration file.
    /// </summary>
    public GsecEntities() : 
            base("name=GsecEntities", "GsecEntities")
    {
        this.OnContextCreated();
    }
    /// <summary>
    /// Initialize a new GsecEntities object.
    /// </summary>
    public GsecEntities(string connectionString) : 
            base(connectionString, "GsecEntities")
    {
        this.OnContextCreated();
    }
    /// <summary>
    /// Initialize a new GsecEntities object.
    /// </summary>
    public GsecEntities(global::System.Data.EntityClient.EntityConnection connection) : 
            base(connection, "GsecEntities")
    {
        this.OnContextCreated();
    }
    partial void OnContextCreated();
    /// <summary>
    /// There are no comments for tbAirLines in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbAirLine> tbAirLines
    {
        get
        {
            if ((this._tbAirLines == null))
            {
                this._tbAirLines = base.CreateQuery<tbAirLine>("[tbAirLines]");
            }
            return this._tbAirLines;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbAirLine> _tbAirLines;
    /// <summary>
    /// There are no comments for tbBanks in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbBank> tbBanks
    {
        get
        {
            if ((this._tbBanks == null))
            {
                this._tbBanks = base.CreateQuery<tbBank>("[tbBanks]");
            }
            return this._tbBanks;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbBank> _tbBanks;
    /// <summary>
    /// There are no comments for tbCities in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbCity> tbCities
    {
        get
        {
            if ((this._tbCities == null))
            {
                this._tbCities = base.CreateQuery<tbCity>("[tbCities]");
            }
            return this._tbCities;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbCity> _tbCities;
    /// <summary>
    /// There are no comments for tbCommodities in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbCommodity> tbCommodities
    {
        get
        {
            if ((this._tbCommodities == null))
            {
                this._tbCommodities = base.CreateQuery<tbCommodity>("[tbCommodities]");
            }
            return this._tbCommodities;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbCommodity> _tbCommodities;
    /// <summary>
    /// There are no comments for tbCountries in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbCountry> tbCountries
    {
        get
        {
            if ((this._tbCountries == null))
            {
                this._tbCountries = base.CreateQuery<tbCountry>("[tbCountries]");
            }
            return this._tbCountries;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbCountry> _tbCountries;
    /// <summary>
    /// There are no comments for tbFlights in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbFlight> tbFlights
    {
        get
        {
            if ((this._tbFlights == null))
            {
                this._tbFlights = base.CreateQuery<tbFlight>("[tbFlights]");
            }
            return this._tbFlights;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbFlight> _tbFlights;
    /// <summary>
    /// There are no comments for tbGrpCommodities in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbGrpCommodity> tbGrpCommodities
    {
        get
        {
            if ((this._tbGrpCommodities == null))
            {
                this._tbGrpCommodities = base.CreateQuery<tbGrpCommodity>("[tbGrpCommodities]");
            }
            return this._tbGrpCommodities;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbGrpCommodity> _tbGrpCommodities;
    /// <summary>
    /// There are no comments for tbPersons in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbPerson> tbPersons
    {
        get
        {
            if ((this._tbPersons == null))
            {
                this._tbPersons = base.CreateQuery<tbPerson>("[tbPersons]");
            }
            return this._tbPersons;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbPerson> _tbPersons;
    /// <summary>
    /// There are no comments for tbPersonTypes in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public global::System.Data.Objects.ObjectQuery<tbPersonType> tbPersonTypes
    {
        get
        {
            if ((this._tbPersonTypes == null))
            {
                this._tbPersonTypes = base.CreateQuery<tbPersonType>("[tbPersonTypes]");
            }
            return this._tbPersonTypes;
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private global::System.Data.Objects.ObjectQuery<tbPersonType> _tbPersonTypes;
    /// <summary>
    /// There are no comments for tbAirLines in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbAirLines(tbAirLine tbAirLine)
    {
        base.AddObject("tbAirLines", tbAirLine);
    }
    /// <summary>
    /// There are no comments for tbBanks in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbBanks(tbBank tbBank)
    {
        base.AddObject("tbBanks", tbBank);
    }
    /// <summary>
    /// There are no comments for tbCities in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbCities(tbCity tbCity)
    {
        base.AddObject("tbCities", tbCity);
    }
    /// <summary>
    /// There are no comments for tbCommodities in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbCommodities(tbCommodity tbCommodity)
    {
        base.AddObject("tbCommodities", tbCommodity);
    }
    /// <summary>
    /// There are no comments for tbCountries in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbCountries(tbCountry tbCountry)
    {
        base.AddObject("tbCountries", tbCountry);
    }
    /// <summary>
    /// There are no comments for tbFlights in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbFlights(tbFlight tbFlight)
    {
        base.AddObject("tbFlights", tbFlight);
    }
    /// <summary>
    /// There are no comments for tbGrpCommodities in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbGrpCommodities(tbGrpCommodity tbGrpCommodity)
    {
        base.AddObject("tbGrpCommodities", tbGrpCommodity);
    }
    /// <summary>
    /// There are no comments for tbPersons in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbPersons(tbPerson tbPerson)
    {
        base.AddObject("tbPersons", tbPerson);
    }
    /// <summary>
    /// There are no comments for tbPersonTypes in the schema.
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public void AddTotbPersonTypes(tbPersonType tbPersonType)
    {
        base.AddObject("tbPersonTypes", tbPersonType);
    }
}
/// <summary>
/// There are no comments for GsecModel.tbAirLine in the schema.
/// </summary>
/// <KeyProperties>
/// Id
/// </KeyProperties>
[global::System.Data.Objects.DataClasses.EdmEntityTypeAttribute(NamespaceName="GsecModel", Name="tbAirLine")]
[global::System.Runtime.Serialization.DataContractAttribute(IsReference=true)]
[global::System.Serializable()]
public partial class tbAirLine : global::System.Data.Objects.DataClasses.EntityObject
{
    /// <summary>
    /// Create a new tbAirLine object.
    /// </summary>
    /// <param name="id">Initial value of Id.</param>
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public static tbAirLine CreatetbAirLine(long id)
    {
        tbAirLine tbAirLine = new tbAirLine();
        tbAirLine.Id = id;
        return tbAirLine;
    }
    /// <summary>
    /// There are no comments for property Id in the schema.
    /// </summary>
    [global::System.Data.Objects.DataClasses.EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [global::System.Runtime.Serialization.DataMemberAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public long Id
    {
        get
        {
            return this._Id;
        }
        set
        {
            this.OnIdChanging(value);
            this.ReportPropertyChanging("Id");
            this._Id = global::System.Data.Objects.DataClasses.StructuralObject.SetValidValue(value);
            this.ReportPropertyChanged("Id");
            this.OnIdChanged();
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private long _Id;
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnIdChanging(long value);
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnIdChanged();
    /// <summary>
    /// There are no comments for property Name in the schema.
    /// </summary>
    [global::System.Data.Objects.DataClasses.EdmScalarPropertyAttribute()]
    [global::System.Runtime.Serialization.DataMemberAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public string Name
    {
        get
        {
            return this._Name;
        }
        set
        {
            this.OnNameChanging(value);
            this.ReportPropertyChanging("Name");
            this._Name = global::System.Data.Objects.DataClasses.StructuralObject.SetValidValue(value, true);
            this.ReportPropertyChanged("Name");
            this.OnNameChanged();
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private string _Name;
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnNameChanging(string value);
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnNameChanged();
    /// <summary>
    /// There are no comments for property ShortName in the schema.
    /// </summary>
    [global::System.Data.Objects.DataClasses.EdmScalarPropertyAttribute()]
    [global::System.Runtime.Serialization.DataMemberAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public string ShortName
    {
        get
        {
            return this._ShortName;
        }
        set
        {
            this.OnShortNameChanging(value);
            this.ReportPropertyChanging("ShortName");
            this._ShortName = global::System.Data.Objects.DataClasses.StructuralObject.SetValidValue(value, true);
            this.ReportPropertyChanged("ShortName");
            this.OnShortNameChanged();
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private string _ShortName;
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnShortNameChanging(string value);
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnShortNameChanged();
    /// <summary>
    /// There are no comments for property Remark in the schema.
    /// </summary>
    [global::System.Data.Objects.DataClasses.EdmScalarPropertyAttribute()]
    [global::System.Runtime.Serialization.DataMemberAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    public string Remark
    {
        get
        {
            return this._Remark;
        }
        set
        {
            this.OnRemarkChanging(value);
            this.ReportPropertyChanging("Remark");
            this._Remark = global::System.Data.Objects.DataClasses.StructuralObject.SetValidValue(value, true);
            this.ReportPropertyChanged("Remark");
            this.OnRemarkChanged();
        }
    }
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    private string _Remark;
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnRemarkChanging(string value);
    [global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
    partial void OnRemarkChanged();
} 
```

它给出以下错误

> 错误 1“System.Data.Objects.ObjectQuery”不包含“AddObject”的定义，并且找不到接受“System.Data.Objects.ObjectQuery”类型的第一个参数的扩展方法“AddObject”（您是否缺少使用指令还是程序集引用？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:34:14.343

.NET 3.5 版`ObjectQuery<T>`与`ObjectSet<T>`.NET 4.0 版相比。因此，您将需要使用`e.AddTotbAirLines(tbAirLine)`或`e.AddObject("tbAirLines", tbAirLine)`。两者都可以在提交的生成代码的第 185 行找到。在 .NET 4.0 中，他们决定像您在问题中展示的那样实现它。****

# algorithm - 广度优先搜索：骑士封面

> ID：15038321
> 
> 赞同：5
> 
> 时间：2013-02-23T07:40:07.347
> 
> 标签：algorithm, breadth-first-search

我正在尝试学习 USACO 算法培训课程（[http://ace.delos.com/usacogate）——](http://ace.delos.com/usacogate)我目前在一个描述 DFS、BFS 等的页面上。我确实理解这些概念，但是示例问题他们为 BFS - 骑士封面 - 让我感到困惑。这是问题陈述：

> 在 nxn 棋盘上放置尽可能少的骑士，以便每个方格都受到攻击。骑士不被视为攻击它所在的方格。

`n`这是 BFS，页面说，因为它试图在尝试骑士之前查看骑士是否有解决方案`n+1`- 这很清楚。

但是，我不明白如何仅凭此制定解决方案。有人可以帮我用伪代码吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T08:19:54.200

它是 BFS，但你不搜索棋盘；搜索展示位置空间：

初始状态：未放置骑士

有效移动：在任何未占用的瓷砖上放置一个骑士

目标状态：所有图块都被占领或被攻击

基本算法（状态空间的BFS）：

*   将初始状态推送到 BFS 队列。
*   当队列中有东西时：
    *   从队列中删除一个状态。
    *   对于每个未占用的瓷砖：
        *   创建当前状态的副本。
        *   将一名骑士添加到该图块。
        *   如果队列中不存在新状态：
            *   如果新状态是目标状态，则结束。
            *   否则将其添加到队列中。

请注意，我假设一个状态的所有路径都具有相同的长度。以这种方式查找一组展示位置时确实如此，但一般情况下并非如此。如果情况并非如此，您应该存储所有访问过的节点的集合以避免重新访问已经探索过的状态。

* * *

您可能需要从左到右、从上到下添加骑士。然后您不需要检查队列中的重复项。此外，如果您知道在不违反插入顺序的情况下无法攻击未攻击的图块，则可以提前丢弃状态。

如果您不这样做并留下重复检查，算法仍然会产生正确的结果，但它会慢得多。大约慢 40 000 倍（8！=40 320 是 8 骑士状态的重复数）。

* * *

如果您想要更快的算法，请查看 A*。在这里，一种可能的启发式方法是：

*   计算未攻击和未占用的瓷砖数量
*   将计数除以九，四舍五入（骑士不能攻击超过八个新瓷砖或占据超过一个）
*   距离（需要添加的骑士数量）不超过这个数字。

更好的启发式方法会注意到骑士只能攻击相同颜色的瓷砖，并占据相反颜色的瓷砖。这可能会稍微改进以前的启发式（但仍然可能有很大帮助）。

更好的启发式应该能够利用骑士可以覆盖不超过 5x5 方格的空闲点这一事实。启发式算法应该计算得很快，但是当需要覆盖的地方很少时，这可能会有所帮助。

* * *

技术细节：

您可以将每个状态表示为 64 位位掩码。虽然这需要一些按位操作，但它确实有助于记忆，并且 64 位数字的相等检查*速度很快*。如果您没有 64 位数字，请使用两个 32 位数字 - 这些应该可用。

循环数组队列效率高，扩容*也不难。*如果您必须实现自己的队列，请选择这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T16:52:20.737

这是 C++ 中的一个实现。

它只是使用基本的蛮力，所以它只适用于 until `n = 5`。

```
#include <iostream>
#include <vector>
#include <queue>

using namespace std;

bool isFinal(vector<vector<bool> >& board, int n)
{
    for(int i = 0; i < n; ++i)
    {
        for(int j = 0; j < n; ++j)
        {
            if(!board[i][j])
                return false;
        }
    }
    return true;
}

void printBoard(vector<pair<int,int> > vec, int n)
{
    vector<string> printIt(n);
    for(int i = 0; i < n; ++i)
    {
        string s = "";
        for(int j = 0; j < n; ++j)
        {
            s += ".";
        }
        printIt[i] = s;
    }

    int m = vec.size();

    for(int i = 0; i < m; ++i)
    {
        printIt[vec[i].first][vec[i].second] = 'x';
    }

    for(int i = 0; i < n; ++i)
    {
        cout << printIt[i] << endl;
    }
    cout << endl;
}

void updateBoard(vector<vector<bool> >& board, int i, int j, int n)
{
    board[i][j] = true;

    if(i-2 >= 0 && j+1 < n)
        board[i-2][j+1] = true;

    if(i-1 >= 0 && j+2 < n)
        board[i-1][j+2] = true;

    if(i+1 < n && j+2 < n)
        board[i+1][j+2] = true;

    if(i+2 < n && j+1 < n)
        board[i+2][j+1] = true;

    if(i-2 >= 0 && j-1 >= 0)
        board[i-2][j-1] = true;

    if(i-1 >= 0 && j-2 >= 0)
        board[i-1][j-2] = true;

    if(i+1 < n && j-2 >= 0)
        board[i+1][j-2] = true;

    if(i+2 < n && j-1 >= 0)
        board[i+2][j-1] = true;
}

bool isThere(vector<pair<int,int> >& vec, vector<vector<pair<int,int> > >& setOfBoards, int len)
{
    for(int i = 0; i < len; ++i)
    {
        if(setOfBoards[i] == vec)
            return true;
    }
    return false;
}

int main()
{
    int n;
    cin >> n;

    vector<vector<pair<int,int> > > setOfBoards;
    int len = 0;

    vector<vector<bool> > startingBoard(n);
    for(int i = 0; i < n; ++i)
    {
        vector<bool> vec(n,0);
        startingBoard[i] = vec;
    }

    vector<pair<int,int> > startingVec;

    vector<vector<vector<vector<bool> > > > q1;

    vector<vector<vector<pair<int,int> > > > q2;

    vector<vector<vector<bool> > > sLayer1;

    vector<vector<pair<int,int> > > sLayer2;

    sLayer1.push_back(startingBoard);

    sLayer2.push_back(startingVec);

    q1.push_back(sLayer1);

    q2.push_back(sLayer2);

    int k = 0;

    bool flag = false;

    int count = 0;

    while(!flag && !q1[k].empty())
    {
        int m = q1[k].size();

        vector<vector<vector<bool> > > layer1;

        vector<vector<pair<int,int> > > layer2;

        q1.push_back(layer1);

        q2.push_back(layer2);

        for(int l = 0; l < m; ++l)
        {
            vector<vector<bool> > board = q1[k][l];

            vector<pair<int,int> > vec = q2[k][l];

            if(isFinal(board, n))
            {
                while(l < m)
                {
                    board = q1[k][l];
                    vec = q2[k][l];

                    if(isFinal(board, n))
                    {
                        printBoard(vec, n);

                        ++count;
                    }

                    ++l;
                }

                flag = true;
                break;
            }

            for(int i = 0; i < n; ++i)
            {
                for(int j = 0; j < n; ++j)
                {
                    if(!board[i][j])
                    {
                        pair<int,int> p;
                        p.first = i;
                        p.second = j;

                        vector<vector<bool> > newBoard = board;

                        vector<pair<int,int> > newVec = vec;

                        newVec.push_back(p);

                        updateBoard(newBoard, i, j, n);

                        sort(newVec.begin(), newVec.end());

                        if(!isThere(newVec, setOfBoards, len))
                        {
                            q1[k+1].push_back(newBoard);
                            q2[k+1].push_back(newVec);

                            setOfBoards.push_back(newVec);
                            ++len;
                        }
                    }
                }
            }
        }

        ++k;
    }

    cout << count << endl;
} 
```

# c - 带有联合的 C 中的 reinterpret_cast/type punning 功能

> ID：15038322
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:40:10.193
> 
> 标签：c, unions, reinterpret-cast, mbr, type-punning

我正在尝试将 512 个字节写为无符号字符，但将它们作为结构中的字段读取。下面是我想出的工会。

```
typedef union {
    unsigned char buffer[512]; //512 bytes
    struct {
            unsigned char a[446];
            struct part b[4]; //sizeof(part) = 16
            unsigned char c[2];
    }parsed; //446 + 4*16 + 2 = 512 bytes
}tbl; 
```

我可以正确地写入缓冲区，但从 a 或 b 或 c 读取会给出 0。 - 我使用 gcc - 在 64 位 Linux 机器上 - 有/没有 -m32 标志没有区别。

有人可以阐明我所缺少的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:48:22.363

你真的不应该这样做。由于对齐问题，您的结构很可能大于 512 字节。或者，换句话说，编译器在结构字段之间放置空白空间。

如果您想避免这种情况以降低性能，请查看`#pragma pack`指令。也许你的编译器支持它。

编辑：另外，请展示你如何写给 buf。如果`a`也为 0，则可能会出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:05:51.873

哎呀，对不起。它工作得很好。显然， b[1] 都是零。我将它与 b[0] 字段进行比较。道歉。

# java - 服务和外观的角色是否相似？

> ID：15038324
> 
> 赞同：67
> 
> 时间：2013-02-23T07:40:32.807
> 
> 标签：java, spring, model-view-controller, design-patterns, facade

我读得越多，我就越困惑。

请注意，所有问题都与服务和外观如何适应 MVC 模式有关。

我的理解是，Facade 并不是一个超级智能的对象，它只是暴露一个简单的接口/api 来执行复杂操作的一种方式（例如：执行 10$ 支付，它是一个复杂的操作，涉及到许多操作，但是这样的复杂性可以由一个外观来处理，它只会以特定的顺序调用相应的对象......等等......）

现在，服务是一种调用多个 DAO 以获得复杂数据结构的方法（我不太确定，但这是我目前所理解的）。

那么问题是，门面和服务之间有什么区别？归根结底，Facade 可以通过提供简单的接口完美地访问多个 DAO 以执行复杂的操作，而服务似乎类似于类似的东西。

事务也是如此，我知道服务是开始事务的地方，但我同样觉得它们也可以放在门面上，毕竟门面也可以调用多个 DAO。

所以哪个堆栈更有意义

控制器外观道控制器服务道

或者可能

controller-facade-dao 有时还有控制器-facade-service-dao ??

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-26T01:47:41.310

*服务*是一种编写外部系统接口的方式，例如 LDAP 身份存储、支付网关或应用程序管理接口。这是一种将外部系统视为有用服务*提供者*的概念方式，可能具有内部行为，而不是要操作的被动块。

*外观*是一种包装任何东西（包括服务）以将其很好地呈现给另一个组件的方式。立面通常在以下情况下使用：

*   库或组件很复杂，您的应用程序只需要其中的一个子集。您的 Facade 将简化的 API 呈现给应用程序
*   您正在使用多个库或组件，需要统一它们，为应用程序提供统一的 API
*   您正在使用的库具有复杂的设置或一组依赖项，并且外观将所有这些都包装在您的应用程序的上下文中。

真正令人困惑的一点是，您可以（并且经常这样做）在一个或多个服务上创建一个外观。服务是组件实际访问资源的方式，门面是简化组件的位（例如选项的配置、连接等）。

如果您编写自己的 DAO，您可能会根据需要创建服务，因此编写外观表明您做错了。如果 DAO 是由第三方构建的，并且比您的需要更复杂，*那么*您可以外观服务。

> 现在，服务是一种调用多个 DAO 以获得复杂数据结构的方法（我对此不太确定，但这是我目前所理解的）。

我会说 DAO 本身就是一种设计模式 -[请参阅 wikipedia](http://en.wikipedia.org/wiki/Data_access_object)。

如果我们将 DAO 与服务进行对比，我们有：

*   API级别：
    *   DAO：对属性的细粒度访问
    *   服务：粗粒度访问服务
*   实施所在：
    *   DAO：主要在客户端，但在数据库中存储数据（没有行为）
    *   服务：主要在服务器上
*   如何调用接口
    *   DAO：客户端直接绑定到与JVM相同命名空间的对象
    *   服务：客户端只是网络、跨虚拟机或跨命名空间操作的存根

> ...外观可以通过提供简单的接口完美地访问多个 DAO 以执行复杂的操作，并且服务似乎类似于类似的东西。

外观*可以*包裹 DAO 层，但我并没有真正看到这种情况以一种有用的方式发生。您很可能需要一个 API 来访问对象的各个属性、遍历对象图等，而这正是 DAO 提供的。

> 交易也是如此，我知道服务是开始交易的地方......

绝对可以，因为事务是由数据库和另一个组件或系统提供的*服务*

> ...但我同样觉得它们也可以放在外观上，毕竟一个外观也可以调用多个 DAO。

并且在许多方面，事务管理器*服务*是一个更复杂的后端实现的门面，协调 Web、应用程序、数据库和其他事务感知组件上的事务。*然而*，这已经被事务服务实现抽象掉了。就我们用户而言，只有公共界面。

事实上，这就是这些设计模式的概念点——为用户提供恰到好处的 API，将实现的复杂性抽象化在组件接口的铁墙后面。

> 所以哪个堆栈更有意义
> 
> 控制器外观道控制器服务道
> 
> 或者可能
> 
> controller-facade-dao 有时还有控制器-facade-service-dao ??

1.  DAO 是一种对数据库的服务，但实际上 DAO 本身就是一种设计模式。
2.  如果您编写自己的 DAO，则永远不需要外观。

因此正确答案是：

*   控制器 - 道

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-26T08:51:30.393

从字面上看，Facade 顾名思义就是建筑物的正面。路过的人只能看到立面，他们对里面的东西、布线、管道和其他复杂的东西一无所知。面孔隐藏了建筑物的所有复杂性，并显示出更简单友好的面孔。

在软件方面，*Facade 通过提供更简单的界面隐藏了软件组件的复杂性，它没有自己的功能并且不限制对 substsyem 的访问*。常用于面向对象设计。很好的例子是 SLF4J - 它是一个 api，它是日志系统的简单外观，允许最终用户在部署时插入所需的日志系统。

服务是提供对功能单元的访问并始终写入规范的*公共接口。*它需要支持其不同消费者所需的通信契约（*基于消息的通信、格式、协议、安全性、异常等）。*有**流程服务**- 业务工作流程的封装，**业务逻辑服务**- 规则/功能的封装，**数据服务**- 与实体的交互，数据访问管理，**基础设施服务**- 实用功能，例如监控，日志记录和安全性。服务大多是可重用的、不相关的、松散耦合的功能单元。

它们非常相似，但取决于您如何看待它。

> 我看到的不同之处在于，外墙是由内而外设计的。您查看子系统并设计一个外观以提供更简单的访问。服务是由外而内设计的。您查看您的客户/客户定义合同并设计服务。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T22:29:11.307

我对经典 GoF Facade 模式的理解是，它主要是为了隐藏糟糕的设计。根据经验，我会说一个人应该只需要一个 Facade 来处理遗留代码。

我还认为这种模式成为 J2EE 核心模式（会话外观）主要是因为 EJB 规范（至少到 2.x）固有地导致了糟糕的服务层设计。

因此，我对您的问题的回答是*肯定*的——外观实际上是第一次没有正确实施的服务。如果您需要隐藏客户端代码的复杂性，通常意味着您只设法提供了一个库，而不是一个服务层；所以，在这种情况下，Facade 实际上变成了你的服务层。

另一方面（假设您有一个不错的域层），如果您确实需要提供通过单个方法调用（类似于宏/别名）生成复杂流的选项，这通常会更好地放置在应用程序层和不在您的核心领域——*请注意，我已将分层术语切换为领域驱动设计，其中没有“数据访问”或“服务”层，而是“应用程序”、“域”、“基础设施”*。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T16:44:49.850

FACADE 是一种设计模式，它解决了子系统中的许多接口需要统一接口的问题，因此它定义了一个更高级别的接口，使子系统更易于使用。

但是，服务提供对资源或一组接口/对象的访问，可能不一定会简化这种访问。因此，您可以使用外观模式来更好地设计您的服务，这样您就可以节省客户弄清楚如何构建以使用它的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T18:30:43.687

在我尝试回答之前，让我澄清一下：企业应用程序中存在三个不同的东西 - **Facade**、**Service Layer**和**Remote Facade**。

**外观**- 在包装子系统时，仍然是一个对象，并且 UI (MVC) 应用程序通常存在于同一个进程中。因此，通信以通常的 OO 方式完成：调用方法、读取属性、监听事件。

**服务层**- 当业务逻辑层变得成熟且过于复杂以至于 MVC 无法直接与其交互时，则将服务层置于它们之间。服务层是 MVC 用作业务逻辑包装器的 API。它不是远程的，也不需要使用 DTO，因为通信中不涉及电线。

**Remote Facade** -（简单来说，任何远程服务）这是 Facade 和服务层的混合体。当您想要在系统上公开某种包装器（我们称之为 Facade）作为分布边界时，远程 Facade 就开始存在。原因之一可能是允许多个 UI (MVC) 应用程序使用相同的远程外观。

-

**比较：**

**外观**与**服务层**：它们是相似的，因为它们都包装了子系统。不同之处在于服务层更面向 UI (MVC) 应用程序需求，并公开功能以简化业务逻辑的使用。另一方面，Facade 正在公开功能以简化业务逻辑，但不一定简化与 UI (MVC) 应用程序的通信。

**Facade** vs. **Remote Facade（服务？）**：绝对不同，因为 Remote Facade 必须使用 DTO 作为通信消息。如果您仍想将 Remote Facade 用作常规对象（属性、事件），则远程 Facade 将需要某种代理；但是代理无论如何都会对真实对象使用 DTO，即远程外观。

-

**可能的流量：**

`controller-facade-dao`- 值得怀疑，但仍有可能。Facade 通常不用于包装 DAL。除了作为子系统之外，应该还有一些更成熟的东西。但是，如果外观是业务逻辑的一部分，那么是的，这是可能的。仍然必须更加强调子系统。对我来说，DAL 包装不足以称之为 Facade。

`controller-service-dao`- 绝对有可能。许多远程服务通过 DAL 直接使用数据库。

`controller-facade-service-dao`- 也许，如果您将服务视为子系统。

我会再添加一个有意义的：

`controller-service [layer]-facade (part of business)-subsystem (e.g. accounting, business on its own)-dao`- 我相信你可以翻译这个。

-

请记住，服务（或远程外观）可以存在于流程中的任何位置。这只是由您的分发需求决定的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-27T15:31:19.963

首先要注意的是，设计模式是对具有标准解决方案的常见（设计）问题的描述。在某些情况下，有多种方法可以满足所有需求（例如，迭代器和单例模式有大量不同的实现；例如，检查工作`Alexandrescu`并将其与标准 GoF 解决方案进行比较）并且在某些情况下，具有相同（代码）解决方案的不同模式（例如，比较 GoF 书中的 Composite 和 Decorator 模式的类图）。

根据 GoF，外观模式的目的是（字面引用）：

> 为子系统中的一组接口提供统一的接口。Facade 定义了一个更高级别的接口，使子系统更易于使用。

服务旨在为用户提供具有给定功能的单个更高级别的界面。这并不一定使它成为一个门面，因为严格来说，服务不是按照定义`unified interface to a set of interfaces in a subsystem.`

**但我们可以做得更好**

您的问题是模式是否“相似”。如果当模式 A 等于 B 且模式 B 等于 A 时我们认为它们“相似”，那么我们应该回答 2 个问题：

**问题 1：**是`Service`a`Facade`吗？服务绝对应该公开功能，并且绝对是公开此功能的单个接口。功能通常被分解成小块，所以是的，服务符合外观的基本要求。换句话说：面对将底层接口暴露为统一的“服务”接口的问题，门面模式符合需求，用于解决服务问题。答案是**肯定**的。

**问题 2：**是`Facade`a`Service`吗？服务通常被设计为可重用、无关联、松散耦合的功能单元。考虑组件之间的通信对于服务来说很重要，因为它们通常依赖于 TCP/IP 接口，例如 SOAP 或 WCF。这也意味着功能经常被重写以`services`更接近范式，这增加了模式的性能要求的隐含**驱动。**外墙没有这个额外的要求。换句话说：**门面不是服务**。

确切地说，这些概念*密切相关，但并不相同。*

**但我们可以做得更好**

这种思路提出了一个问题，如果**服务是外观的扩展版本**？如果服务满足外观的所有要求并在此基础上进行扩展。

如果仔细阅读 GoF 的描述，答案是肯定的，即：如果满足一个条件：服务必须**暴露子系统**。实际上，我认为这种情况通常成立，或者您过度设计了您的服务 - 尽管严格来说我认为这不是一个硬性限制。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-23T20:47:24.963

通常，这些术语仅在其特定上下文中使用。

*   'Facade' 常用上下文：应用程序复杂部分的简单 API（如第三方库）

*   “服务”上下文：解锁并显示系统中的业务实体。（SOA、DAO、安全等）

您可以将模式视为一种不断发展的语言。似乎从来都不是完美的结局，每种模式都有自己的历史和背景。有时类可以同时被视为服务和外观，有时不是。

例如：由于上下文错误，通过术语“服务”调用第三方 API 可能被视为滥用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-26T00:45:25.767

*服务*接口通常代表业务关注点：执行一些操作和/或获取一些信息。服务提供商将他们的服务实现为内部后端服务的外观并不是不合理的 - 你永远不会看到这一点。

您的*外观*可能包含一些通用接口，其中可能包括服务接口。

例如，您可能有银行账户的服务接口（操作：银行转账），以及本地会计记录的本地 API（我转账）。您可能会通过使用银行的服务接口并管理您的本地支票簿的“转移资金”操作来引入外观。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-26T04:52:12.873

是的，Facade 和 Service 并非完全无关。有时我们将服务层实现为外观，这样客户端就不会为服务的许多细节而烦恼。服务的调用/接口越简单，客户端代码就越简单。

马丁福勒说……

> 服务层从连接客户端层的角度定义了应用程序的边界 [Cockburn PloP] 及其可用操作集。它封装了应用程序的业务逻辑，在其操作的实现中控制事务和协调响应

所以服务层有时被用作外观。

[参考](http://www.manning-sandbox.com/thread.jspa?messageID=92006)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-26T03:24:08.003

重要的是“上下文”。外观和服务并不冲突。

首先，我从未听说过 MVC 上下文中的“服务”和“外观”。

当人们谈论服务时，它更多地是关于向外部世界提供具有业务意义的操作的系统或组件。您有时可能会看到与“工作单元”（因此也就是事务）相关的“服务”。

Service 也用于应用程序的一些分层方法的上下文中：我们在 DAO 之上有 Service，Service 将通过 DAO 访问数据，并将业务逻辑放在 Service 层中，类似这样。

Facade通常用于设计模式的上下文中，重点是“隐藏复杂的操作，将其暴露为简单的操作”。

Facade 可能是也可能不是 Service（Facade 中的操作可能不代表工作单元，但它仍然是有效的外观），同样，Service 可能是也可能不是 Facade（Service 可能不会隐藏任何复杂的操作，但它仍然是一项服务）。

同样，重要的是“上下文”。

例如，当您谈论应用程序的分层时，说“XXX 是访问 DAO 的门面”简直是不合理的。同样，如果你说的是“设计方法”，在这里说“XXX是多个后端的门面”而不是“服务”更合理（虽然XXX实际上是一个服务）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-03T11:59:57.870

**外观**和**服务层**有一种相似之处，但它们都有两个*不同*的含义。让我用一个简单的例子来解释这一点。

想象一下，我们被要求创建新的业务应用程序。这需要创建一个签到应用程序，但具有更多的增值功能和会员卡功能。

如果用户希望使用，假设应用程序应该支持 Facebook 和 Foursquare 签到功能。*非常需要*此功能，因为一些用户不愿意使用多个应用程序来执行相同的功能或摆脱社交连接。

要获得高级别的想法，请参阅以下链接上的示例 api [https://docs.google.com/file/d/0B3v8S0e-PvVpdWFJOVhqc1d2SHc/edit?usp=sharing](https://docs.google.com/file/d/0B3v8S0e-PvVpdWFJOVhqc1d2SHc/edit?usp=sharing)

上面位于 ABC 门面的签到 API 是使用门面的示例。

它具有我们的服务 API 以及基于客户选择的 facebook 和foursqure 签入功能。Facebook 和foursqure API 可以有特定的实现（SOAP、Restful 等）和安全性（OAuth 等）要求等。

满足其中一个 API（facebook、foursqure）要求需要完成不同的任务集。这些将是我们签入要求中的不同子系统。

所以facade的简单用法就是满足一个简单的方法触发的几个子系统

但是如果我们考虑我们自己的 API，即位于 MngCheckinSvc 的签入 API。这是一个**服务层 API**。这是包含我们应用程序签入要求的 API。这是从您的 MngCheckinSvc 提供公共访问以处理对应用程序的签入要求的 API。

这将具有复杂的内部行为，但其中大部分仍将是特定于应用程序的逻辑实现。

此 API(MngCheckinSvc.checkin(....)) 可能会访问不同的 DAO 集、内部 API、可能是其他内部服务等，以便在应用程序中完成商家签到。

# apache - mod_python 不会同时处理来自同一个浏览器对同一个文件的多个请求

> ID：15038326
> 
> 赞同：1
> 
> 时间：2013-02-23T07:40:51.467
> 
> 标签：apache, blocking, mod-python, serial-processing

我有一个页面可能需要很长时间才能处理。但与此同时，如果访问同一页面（来自同一系统），第二个实例将被阻塞，直到第一页完成。实际上，不是阻塞行为，我会很高兴第二个实例失败而不是挂起。有没有办法让同一个文件同时访问。

我发现 PHP 中也存在同样的问题。但这些回复与 PHP 有关。[Apache 同源请求阻塞](https://stackoverflow.com/questions/7973453/apache-same-orgin-request-blocking) [为什么 apache 不能同时处理来自同一个浏览器的多个请求](https://stackoverflow.com/questions/3623484/why-does-apache-not-process-multiple-requests-from-the-same-browser-simultaneous)讨论 php 的相同问题。

# java - 下拉列表根据另一个下拉列表更改

> ID：15038328
> 
> 赞同：0
> 
> 时间：2013-02-23T07:41:09.877
> 
> 标签：java, spring-mvc, enums

我正在使用spring mvc。一个下拉 X 基于枚举。我想根据下拉 X 更改下拉 Y 列表。我应该为第二个下拉 Y 做什么。我应该使用枚举吗？该列表不会经常更改，因此我不打算使用数据库。我想知道好的做法。

即使我使用枚举。我如何定义这个变量应该产生这个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:14:40.760

在我的实践中，我使用了这种场景。您可以定义 Y 列表也可以是一个枚举。因为枚举是类您可以在枚举常量之间实现依赖行为，具体取决于它们之间的关系（我的意思是一对多，多对多，...），您可以通过提供初始化特定的 X 常量通过 X 构造函数列出 Y 常量。

例如在多对多关系中您可以使用以下策略

```
enum X{
    A("1", "A", Y.D, Y.E),
    B("2", "B", Y.D, Y.F),
    C("3", "C", Y.D, Y.E, Y.F);

    private String id;
    private String name;
    private List<Y> dependencies = new ArrayList<Y>();

    private X(String id, String name, Y... dependencies){
        this.id = id;
        this.name = name;

        for(Y dep : dependencies){
            this.dependencies.add(dep);
        }
    }

    public String getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public List<Y> getDependencies(){
        return Collections.unmodifiableList(dependencies);
    }
}

enum Y{
    D(),
    E(),
    F();

    private Y(){}
} 
```

# php - 密码不匹配时禁用表单提交按钮

> ID：15038333
> 
> 赞同：0
> 
> 时间：2013-02-23T07:41:58.117
> 
> 标签：php, javascript

我试图弄清楚我应该在哪里包含一个 js 代码，当密码不匹配时我禁用表单提交按钮。

html:

```
<form name=passform class="form-horizontal-signup" method="post" action="login.php" >

    <fieldset>
    <legend>Sign Up for MyVibes</legend>
    <input type="password" class="input-xlarge" placeholder="Password" name="password" id="password" onKeyUp="verify.check()" />
    <input type="password" class="input-xlarge" placeholder="Retype Password" name="repassword" id="repassword" onKeyUp="verify.check()"/></fieldset>
    <div id="password_result">&nbsp; </div><br />
    <button type="submit" input name="btnSignUp" id="btnSignUp" class="btn btn-inverse" disabled="disabled"/>Sign Up</button>
    </form>
    </div> 
```

获取变量：

```
<SCRIPT TYPE="text/javascript">

            verify = new verifynotify();
            verify.field1 = document.passform.password;
            verify.field2 = document.passform.repassword;
            verify.result_id = "password_result";
            verify.match_html = "Passwords match.";
            verify.nomatch_html = "Please make sure your passwords match.";

            // Update the result message
            verify.check();

            //
            </SCRIPT> 
```

和功能：

```
function verifynotify(field1, field2, result_id, match_html, nomatch_html) {
 this.field1 = field1;
 this.field2 = field2;
 this.result_id = result_id;
 this.match_html = match_html;
 this.nomatch_html = nomatch_html;

 this.check = function() {

   // Make sure we don't cause an error
   // for browsers that do not support getElementById
   if (!this.result_id) { return false; }
   if (!document.getElementById){ return false; }
   r = document.getElementById(this.result_id);
   if (!r){ return false; }

   if (this.field1.value != "" && this.field1.value == this.field2.value) {
     r.innerHTML = this.match_html;
      $("#btnSignUp").prop("disabled", false);

   } else {
     r.innerHTML = this.nomatch_html;
      $("#btnSignUp").prop("disabled", true);

   }
 }
} 
```

也许我放错地方了 $("#btnSignUp").prop("disabled", true); 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:44:34.277

尝试

```
$("#btnSignUp").attr("disabled", "disabled"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:46:10.887

这应该有效..

```
if (this.field1.value != "" && this.field1.value == this.field2.value) {
 r.innerHTML = this.match_html;
  $("#btnSignUp").removeAttr("disabled");

} else {
 r.innerHTML = this.nomatch_html;
  $("#btnSignUp").attr("disabled", "disabled");
} 
```

# android - 如何在android中添加我们自己的手势？

> ID：15038335
> 
> 赞同：0
> 
> 时间：2013-02-23T07:42:13.543
> 
> 标签：android, android-gesture

我正在研究手势概念。我想知道一些关于如何在android中添加我们自己的手势的事情。例如，如果用户绘制了“O”符号，我想制作一些事件。请分享一些教程和代码片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:13:27.560

检查下面的链接，该链接将指导如何创建我们自己的手势并使用它。

1)[链接 1](http://www.vogella.com/articles/AndroidGestures/article.html)
2)[链接 2](http://code.google.com/p/android-gesture-recognition-tool/)
3)[链接 3](http://androidresearch.wordpress.com/2012/01/10/working-with-gesture-api-in-android/)
4)[链接 4](http://www.hascode.com/2010/05/creating-a-simple-gesture-app-with-android/)

浏览一些链接，您肯定会对手势有所了解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T08:01:48.787

使用相对简单的 Google 搜索可以获得相当多的结果。我通常会发表讽刺评论之类的。:-)

但是，如果您愿意的话，这并不是一个日常主题，所以我在这里提供了一些可以帮助您入门的链接。但是你也应该在你的 Google *foo*上工作。;-)

1.  [http://developer.samsung.com/android/technical-docs/Gestures-in-Android](http://developer.samsung.com/android/technical-docs/Gestures-in-Android)
2.  [http://www.hascode.com/2010/05/creating-a-simple-gesture-app-with-android/](http://www.hascode.com/2010/05/creating-a-simple-gesture-app-with-android/)
3.  [http://code.google.com/p/quickdroid/source/checkout（QuickDroid](http://code.google.com/p/quickdroid/source/checkout)结帐）
4.  [http://code.google.com/p/quickdroid/source/browse/（QuickDroid](http://code.google.com/p/quickdroid/source/browse/)浏览代码）
5.  [http://androidresearch.wordpress.com/2012/01/10/working-with-gesture-api-in-android/](http://androidresearch.wordpress.com/2012/01/10/working-with-gesture-api-in-android/)

我发现第 5 个链接更有希望。当然，我还没有看到太多，无法确定。但无论如何都尝试一下。

# php - .htaccess mod 重写两页

> ID：15038336
> 
> 赞同：0
> 
> 时间：2013-02-23T07:42:22.187
> 
> 标签：php, .htaccess, mod-rewrite

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /me/profile.php?username=$1 [QSA,L]

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /me/index.php?page=$1 [QSA,L] 
```

索引页面的第二次重写不起作用，但是，配置文件页面的第一次重写有效。

这是我在 index.php 中使用的：

```
 if(isset($_GET['page']) === true && empty($_GET['page']) === false){

        if($_GET['page'] == 'Home'){
?>
<div id = "contents">
Works!
</div>
<?php 
}else{
<div id = "contents">
Error page!
</div>
}
}
?> 
```

那么索引页面有什么问题。我怎样才能为他们两个重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:35:54.813

问题是您捕获了 URL 中的任何内容并重定向到 profile.php 页面，不允许它到达 index.php 行。尝试这样的事情：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^/profile/(.*)$ /me/profile.php?username=$1 [QSA,L]
RewriteRule ^(.*)$ /me/index.php?page=$1 [QSA,L] 
```

这样，个人资料页面可以与索引页面区分开来并正确重写。例如。Domain.com/profile/jimjimmy1995 用于用户页面， domain.com/about 用于其他页面。

# r - 函数内的变量类不同？

> ID：15038337
> 
> 赞同：1
> 
> 时间：2013-02-23T07:42:27.987
> 
> 标签：r, function

为了简化未来的数据分析，我正在尝试编写一个脚本，该脚本将识别 data.frame 中包含的不同自我报告量表，并对每个量表的项目执行常规分析。目前，我希望它识别存在哪些量表，找到每个量表项目的响应，然后计算每个量表的 Cronbach Alpha。

一切似乎都在工作，除非我运行我的函数，该函数应该为每个比例生成一个 alpha() 输出列表，我收到以下错误：

```
 > Cronbach.Alphas(scales.data, scale.names)
       Error in alpha(data[, responses[[i]]]) : 
       Data must either be a data frame or a matrix 
```

显然，我知道这是说提供给 alpha() 函数的信息不是 data.frame 或矩阵。不过，我很困惑的原因是，当我在 Cronbach.Alphas() 函数之外手动进行这些计算时，它清楚地告诉我它是一个 data.frame 并且看起来像一个魅力：

```
 > class(scales.data[,responses[[1]]])
    [1] "data.frame" 
```

这让我发疯，我将非常感谢任何帮助解决这个问题。我的完整代码粘贴在下面。（注意：我对 R 中的编程函数很陌生，所以我做事的方式可能不是最佳的。也欢迎任何额外的建议。）

此外，提及我的代码旨在根据列名中是否存在下划线来识别比例名称可能会有所帮助。即，“rsq_12”将标度表示为 rsq，将列表示为对标度第 12 项的响应。

```
 require(psych)

   ##### Function for identifying names of scales present in the data file #####
   GetScales <- function(x) {
     find.scale.names <- regexec("^(([^_]+)_)", colnames(x))
     scales <- do.call(rbind, lapply(regmatches(colnames(x), find.scale.names), `[`, 3L))
     colnames(scales) <- "scale"
     na.find <- ifelse(is.na(scales[,1]), 0, 1)
     scales <- cbind(scales, na.find)
     output <- scales[scales[,2] == 1,]
     output[,1]
   }

   ##### Function for calculating cronbach's alpha for each scale #####
   Cronbach.Alphas <- function(data, scales){
     for(i in 1:length(scales)){
       if(i == 1) {
         responses  <- list(grep(scales[i], colnames(data)))
         alphas <- list(alpha(data[,responses[[i]]]))
       } else {
         responses  <- append(responses, list(grep(scales[i], colnames(data))))
         alphas <- append(alphas, list(alpha(data[,responses[[i]]])))
       }
     }
     return(alphas)
   }

   ### Import data from .csv file ###
   scales.data <- data.frame(read.csv(file.choose()))

   ### Identify each item's scale ###
   scale.items <- GetScales(scales.data)

   ### Reduce to names of scales ###
   scale.names <- cbind(scale.items, !duplicated(scale.items))
   scale.names <- scale.names[scale.names[,2] == TRUE, 1]
   scale.names

   ### Calculate list of alphas ###
   Cronbach.Alphas(scales.data, scale.names) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:00:04.500

感谢任何花时间查看我的代码的人。我感谢您的帮助。当我意识到我的一个简单错误时，我正在处理这里留下的建议......

我在处理此脚本时一直用作测试的数据集中的比例之一只有一个项目。因此，我的 Cronbach.Alphas() 函数中的 data[,responses[[i]]] 在 for 循环中的该点将向量（而不是 data.frame 或矩阵）传递给 alpha() 函数。不可能计算单个项目量表的 cronbach alpha，因为它是项目间可靠性的指标......

太好了，我需要的所有代码都是一种仅用一个项目来识别秤的方法：

```
 Cronbach.Alphas <- function(data, scales){
      for(i in 1:length(scales)){
        if(i == 1) {
          responses  <- list(grep(scales[i], colnames(data)))
          if(length(responses[[i]]) > 1){
            alphas <- list(alpha(data[,responses[[i]]]))
          }
        } else {
          responses  <- append(responses, list(grep(scales[i], colnames(data))))
          if(length(responses[[i]]) > 1){
            alphas <- append(alphas, list(alpha(data[,responses[[i]]])))
          }
        }
      }
      return(alphas)
    } 
```

很抱歉因为我的错误浪费了任何人的时间。从好的方面来说，通过将这个新的 Cronbach.Alphas() 函数替换到上面的脚本中，我现在发布了一个脚本，该脚本将自动识别比例并生成 cronbach 的 alpha 列表（假设列在比例名称）供任何可能感兴趣的人使用。再次感谢！

# php - 显示名称而不是 id

> ID：15038340
> 
> 赞同：0
> 
> 时间：2013-02-23T07:43:05.853
> 
> 标签：php, html, mysql

我开发了一个页面，在表格中显示所有卡车车牌号，当您单击它们时，车牌号每个他们转到此页面并显示与该车牌号相关的数据我的问题是显示卡车的名称它只显示我单击的不同卡车的每一页上的第一个卡车车牌号，但是显示的数据正常工作我只是无法显示正在显示的数据的卡车车牌号

我在这里显示车牌号，`<?php echo $row['truck_plate_no'];?>`但它只显示第一个车牌号这是我的代码：

```
<?php require_once('Connections/connect.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
$theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
}

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
  }
  return $theValue;
}
}

 mysql_select_db($database_connect, $connect);
 $query_join = "SELECT * FROM tbl_delivery_details, tbl_truck WHERE tbl_truck.id_truck=tbl_delivery_details.tbl_truck_id_truck ORDER BY tbl_delivery_details.id_delivery_details";
 $join = mysql_query($query_join, $connect) or die(mysql_error());
 $row_join = mysql_fetch_assoc($join);
 $totalRows_join = mysql_num_rows($join);

   $id_truck = mysql_real_escape_string($_GET['id_truck']);

  $sql_PK = "SELECT * FROM tbl_delivery_details WHERE tbl_truck_id_truck = {$id_truck}";
  $PK = mysql_query($sql_PK, $connect);
  if ( mysql_error() ) {
   die ( mysql_error());
 }
  $row_PK = mysql_fetch_assoc($PK);

  $truck_id = $row_PK['tbl_truck_id_truck'];

 $truck_id = mysql_real_escape_string($truck_id);

 $sql = "SELECT tbl_truck.truck_plate_no, 
     tbl_delivery_details.delivery_details_route, 
     tbl_delivery_details.delivery_details_destination, 
     tbl_delivery_details.delivery_details_van_no, 
     tbl_delivery_details.delivery_details_waybill_no, 
     tbl_delivery_details.delivery_details_charge_invoice,
     tbl_delivery_details.delivery_details_revenue,
     tbl_delivery_details.delivery_details_strip_stuff,
     tbl_delivery_details.delivery_details_date

 FROM tbl_truck, tbl_delivery_details 

 WHERE tbl_truck.id_truck = tbl_delivery_details.tbl_truck_id_truck
 ORDER BY tbl_truck.truck_plate_no"; 

 $res = mysql_query($sql) or die(mysql_error());
 $row = mysql_fetch_array($res);

 $sum = 0;
 $sum1 = 0;

 ?>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/x  html">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Truck Delivery</title>
 <link rel="stylesheet" type="text/css" href="qcc.css"/>
  <link rel="shortcut icon" href="images/icon.ico">
 </head>

 <body>

 <div id="logo">
         <a href="home.php" title="QCC Corporation"><img src="images/logo_comp.jpg" width="245" height="105" alt="QCC Corporation"></a>
     </div>
     <div id="nav">
         <a href="form.php">Add-Transactions</a>
         <a href="truck.php">Truck</a>
         <a href="driver.php">Driver</a>
         <a href="customer.php">Customer</a>
         <a href="fuelsource.php">Fill-up-source</a>
         <a href="report.php">Reports</a>
     </div>
     <div id="border">
        <hr />
     </div>

 <div id="content"><table border="1" table align="center">
           <th>Date</th>
           <th>Route</th>
           <th>Destination</th>
           <th>Van No.</th>
           <th>Waybill No.</th>
           <th>Charge Invoice</th>
           <th>Revenue</th>
           <th>Strip/Stuff</th>

         </tr>

   <?php do { ?>
     <tr>

       <td><?php echo $row_PK['delivery_details_date']; ?></td>
       <td><?php echo $row_PK['delivery_details_route']; ?></td>
       <td><?php echo $row_PK['delivery_details_destination']; ?></td>
        <td><?php echo $row_PK['delivery_details_van_no']; ?></td>
        <td><?php echo $row_PK['delivery_details_waybill_no']; ?></td>
       <td><?php echo $row_PK['delivery_details_charge_invoice']; ?></td>
       <td><?php echo $row_PK['delivery_details_revenue']; ?></td>
       <td><?php echo $row_PK['delivery_details_strip_stuff']; ?></td>
       </tr>

             <?php $revenue = $row_PK['delivery_details_revenue'];
                    $sum += $revenue;
              ?>

              <?php $strip = $row_PK['delivery_details_strip_stuff'];
                    $sum1 += $strip;
              ?>
            <?php } while ($row_PK = mysql_fetch_assoc($PK)); ?>
        </table>
  </div>
 <div id="revenue">
     Total Revenue: <?php echo $sum;?>
 </div>
     <div id="strip">
     Total Stripping/Stuffing: <?php echo $sum1;?>
     </div>
     <div id="head">
      <?php echo $row['truck_plate_no'];?>
     </div>
  </body>
  <div id="footer">
         <br/><br/>Copyright © 2013 WFJCC. All rights reserved.
 </div>
 </html>
 <?php
 mysql_free_result($join);
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:40:12.233

在您的查询中

```
$sql = "SELECT tbl_truck.truck_plate_no, 
 tbl_delivery_details.delivery_details_route, 
 tbl_delivery_details.delivery_details_destination, 
 tbl_delivery_details.delivery_details_van_no, 
 tbl_delivery_details.delivery_details_waybill_no, 
 tbl_delivery_details.delivery_details_charge_invoice,
 tbl_delivery_details.delivery_details_revenue,
 tbl_delivery_details.delivery_details_strip_stuff,
 tbl_delivery_details.delivery_details_date

FROM tbl_truck, tbl_delivery_details 

WHERE tbl_truck.id_truck = tbl_delivery_details.tbl_truck_id_truck
ORDER BY tbl_truck.truck_plate_no"; 
```

WHERE tbl_truck.id_truck = tbl_delivery_details.tbl_truck_id_truck 似乎不正确，因为您应该根据 $truck_id 进行操作，而不是导致显示第一个车牌号。

```
WHERE tbl_truck.id_truck = $truck_id 
```

* * *

```
$sql = "SELECT tbl_truck.truck_plate_no, 
 tbl_delivery_details.delivery_details_route, 
 tbl_delivery_details.delivery_details_destination, 
 tbl_delivery_details.delivery_details_van_no, 
 tbl_delivery_details.delivery_details_waybill_no, 
 tbl_delivery_details.delivery_details_charge_invoice,
 tbl_delivery_details.delivery_details_revenue,
 tbl_delivery_details.delivery_details_strip_stuff,
 tbl_delivery_details.delivery_details_date

FROM tbl_truck, tbl_delivery_details 

WHERE tbl_truck.id_truck = $truck_id
ORDER BY tbl_truck.truck_plate_no"; 
```

# android - coffeescript 可以与 HTML5、CSS3 一起使用来创建/开发 Android 应用程序吗？

> ID：15038342
> 
> 赞同：0
> 
> 时间：2013-02-23T07:43:25.130
> 
> 标签：android, ios, html, css, coffeescript

无论是否学习咖啡脚本，我都处于分裂状态。我可以使用带有 HTML5 和 CSS3 的咖啡脚本来开发适用于 android 和 ios 的应用程序吗？正如我们所知，我们可以使用 javascript、html5、css3 开发 android/ios 应用程序。请准确回答这个问题，如果您对此有任何资源，不客气。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:45:21.337

CoffeeScript*总是*编译成纯 JavaScript。出于这个原因，几乎所有你可以用 JavaScript 做的事情，你都可以用 CoffeeScript 做。在编写移动应用程序的情况下，在构建过程中通常会有一个额外的构建步骤，将 CoffeeScript 转换为 JavaScript。

# c - c 静态浮动错误：'????' 重新声明为不同类型的符号

> ID：15038345
> 
> 赞同：-2
> 
> 时间：2013-02-23T07:43:48.180
> 
> 标签：c, static-variables, redefinition

无法编译 ac 程序，符号重定义问题。尝试了各种变量数据类型定义，无法理解浮点和静态浮点的情况。给了它一个很好的机会，任何帮助表示赞赏。

克里斯

```
$ gcc -Wall -g -O6 -I../include -c -o edge.o edge.c
```

错误信息：

```
edge.c 的问题：在函数“qc_edge”中：
edge.c:30:15：错误：“内核”重新声明为不同类型的符号
edge.c:23:77：注意：“内核”的先前定义在这里

```

带有行号的代码片段：

```
18 //qc_edge (q, scan, start, gap, conv_kernel, 3, 3));
19 }
20
21 /******************************************************************/
22
23 scanbuf *qc_edge (struct qcam *q, scanbuf *scan, int start, int gap, float *kernel, int  
kernel_x, int kernel_y)
24 { scanbuf *scantmp;
25  int i;
26  int s, height, width,
27    grad;
28  float deltaX, deltaY;
29
30 static float kernel [3][3] = {{1, 2, 1},
32                    {2, -1, 2},
33                    {1, 2, 1}}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:47:45.723

```
scanbuf *qc_edge (struct qcam *q, scanbuf *scan, int start, int gap, float *kernel, int  
kernel_x, int kernel_y)                                               ^^^^^^^^^^^^// pointer to float type

static float kernel [3][3] = {{1, 2, 1},  array of float.  So you cant have one variable with two declaration in same scope. try changing the variable name. 
```

尝试：

```
24 { scanbuf *scantmp;
25  int i;
26  int s, height, width,
27    grad;
28  float deltaX, deltaY;
29
30 static float kernel_temp [3][3] = {{1, 2, 1},  <---- Change name
32                    {2, -1, 2},
33                    {1, 2, 1}}; 
```

# java - 无法将 web.xml 中的 maven 资源文件夹中的属性文件作为上下文参数值提及

> ID：15038346
> 
> 赞同：2
> 
> 时间：2013-02-23T07:44:25.957
> 
> 标签：java, spring, web-applications, quartz-scheduler

我正在写一些石英作业。石英属性文件和石英作业 xml 保存在 src/main/resources/quartz/ 文件夹下。

我正在提供这样的石英属性文件的路径：

```
<!-- Quartz schedular context parameters -->
<context-param>
    <param-name>quartz:config-file</param-name>
    <param-value>classpath*:quartz.properties</param-value>
</context-param> 
```

我收到一个异常：org.quartz.SchedulerException: Properties file: 'classpath*:quartz.properties' could not be read。[参见嵌套异常：java.io.FileNotFoundException: classpath*:quartz.properties (No such file or directory)]

我尝试在 /WEB-INF/quartz 文件夹下添加石英属性文件并给出路径

```
<param-value>classpath*:quartz.properties</param-value> 
```

在 web xml 中。

如果我做错了什么，请提出建议。

更新：爆炸战争文件夹的文件夹结构：

```
appFolder - WEB-INF
           |_ classes
                   |_ quartz (with properties file in it)
                   |_ com (all class files in it)
           |_ lib
           |_ spring (spring-servlet.xml in it)
           |_ view (jsp files in it)
           |_ web.xml 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:39:10.653

问题得到解决。Quartz 在类路径中搜索名为quartz.properties 的属性文件。我将属性文件和 xml 文件直接放在 src/main/resources 文件夹中。部署后，这些资源将添加到类路径中。

web.xml 中的标签如下：

```
<context-param>
    <param-name>quartz:config-file</param-name>
    <param-value>quartz.properties</param-value>
</context-param> 
```

无需在文件夹名称后缀或提供 classpath* 关键字。

谢谢大家的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:09:33.763

你能试试这个

```
classpath:**/quartz.properties 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T09:36:21.220

也尝试改变

```
<param-name>quartz:config-file</param-name> 
```

到

```
 <param-name>contextConfigLocation</param-name> 
```

和参数值

```
 <param-value>classpath:quartz/quartz.properties</param-value> 
```

# php - 单选按钮表 AS 提交表

> ID：15038348
> 
> 赞同：1
> 
> 时间：2013-02-23T07:44:41.110
> 
> 标签：php, jquery, radio-button

我创建了一个单选按钮表，用户每列只能选择一个单选按钮。
我用相同的名字称呼每个 col。例如：我每行有 20 个收音机，所以每个 col 是 b1、b2、b3、b4.....b20，选择工作但现在我需要将数据发送到 php 页面进行处理，现在我的问题是：例如，如果我选择@ b4 col 一台收音机，我怎么知道，我怎么知道他是哪一行（我只有 4 个）。
![例子](../Images/a646a609ea9ff7df82ef785f4d7c7fd2.png)

这是我的代码：

```
$row = mysql_fetch_assoc($result);
echo "<table border='1'   cellspacing='0' cellpadding='0'>";
                        /** THEAD **/
    echo "<thead ><tr><th>".$StationHeader."</th>
    <th>".$OnlineStationHeader."</th>";
    for($k=1;$k<=20;$k++)
        echo "<th>".$k."</th>";
    echo "</tr></thead>";
                         /** THEAD **/
                         /** TBODY **/
    echo "<tbody>";
    for($i=1;$i<=4;$i++)
      {
       echo "<tr>";
       echo "<td>".$i."</td>";
       if($row['isWork']==1)
        echo "<td bgcolor='green'>ON</td>";
       else
        echo "<td bgcolor='red'>OFF</td>";
        for($j=1;$j<=20;$j++)
            {
                if($row['b'.$i.''])
                    echo "<td><input type='radio' name='b".$j."' selected/></td>";
                else
                    echo "<td><input type='radio' name='b".$j."' /></td>";
            }

        echo "</tr>";
        }
    echo "</tbody>";
                      /** TBODY **/
    echo "</table>"; 
```

每条线都是一个站（这代表我数据库中的表），现在我想更新我数据库中的表。

1.我需要改变我命名按钮的方式吗？
2.在提交时我怎么知道单选按钮被选中了哪一行？

ps（我还没有插入表单标签）。
谢谢。

**编辑 - 更新了代码**

```
echo "<form name='bakara' action='updateBakara.php' method='post'>";

  echo "<table border='1' cellpadding='12'   cellspacing='0' cellpadding='0'>";
                        /** THEAD **/
    echo "<thead ><tr><th>".$StationHeader."</th>
    <th>".$OnlineStationHeader."</th>";
    for($k=1;$k<=20;$k++)
        echo "<th>".$k."</th>";
    echo "</tr></thead>";
    $j=1;

    while ($tableRow = mysql_fetch_assoc($result)) { // Loops 4 times if there are 4 returned rows... etc
        echo "<tr>";
        $i=0;

    foreach ($tableRow as $key => $value) { // Loops 22 times because there are 22 columns
    if($i>1){
    if($value==1)
                    echo "<td><input type='radio' name=b".$i." value=".$j." checked/></td>";
                else
                    echo "<td><input type='radio' name=b".$i." value=".$j." /></td>";
        }
    else{
    if($i==1)
        if($value==1)
        echo "<td bgcolor='green'>ON</td>";
        else
        echo "<td bgcolor='red'>OFF</td>";
    else
        echo "<td>".$value."</td>";

        }
        $i=$i+1;

}

$j=$j+1;
echo "</tr>";
}

    echo "</tbody>";
                      /** TBODY **/
    echo "</table>";
    echo "<input type='submit' value=".$SendButton." onclick='this.form.submit():'>";
        echo "</form>"; 
```

当我提交此表单时，我收到未知索引错误 b1,b2,b3,b4 我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:55:18.777

在此模式中为您的单选按钮设置值

```
name="b1" value="1"   |   name="b2" value="1"   |   ....
name="b1" value="2"   |   name="b2" value="2"   |   ....
name="b1" value="3"   |   name="b2" value="3"   |   ....
name="b1" value="4"   |   name="b2" value="4"   |   .... 
```

现在在 php 中获取您的价值

```
$b1_value = $_POST['b1'];
$b2_value = $_POST['b2']; 
```

并更新您的数据库

# cakephp - 在 cakephp 中更改默认路由

> ID：15038349
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:44:47.377
> 
> 标签：cakephp

我对 cakephp 很陌生。

我在**工作区**中有我的项目“注册” 。我创建了一个 IndexController，其中包含方法 index()。

当我使用 workspace/registration/ 运行我的项目时，它显示以下错误：

```
Error: WorkspaceController could not be found. Create the class WorkspaceController below in file: app/Controller/WorkspaceController.php. 
```

我想先执行 IndexController。有人建议我更改默认路线。但我不知道如何改变路线。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:47:59.843

CakePHP 有一个很棒的文档 ->[食谱](http://book.cakephp.org/2.0/en/development/routing.html)

对于您的问题，您是否尝试按照他们的建议进行操作？在 Controller 中创建类 WorkspaceController！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:46:26.713

在`app/Config/routes.php`：

```
Router::connect(
    '/workspace/registration',
    array('controller' => 'index', 'action' => 'index')
); 
```

不过，如果`/workspace/registration`是您注册加入工作区的地方，我真的建议您创建一个`WorkspaceController`来处理所有与工作区相关的功能。

使用默认路由*，*而不是反对它们，它会让你的生活更轻松。

# android - 如何在选项卡更改时保存/恢复片段视图的状态

> ID：15038353
> 
> 赞同：0
> 
> 时间：2013-02-23T07:45:16.070
> 
> 标签：android, android-fragments, android-tabhost, android-lifecycle, fragment-tab-host

我正在关注[本](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)教程。我的应用程序中有 3 个选项卡。在 tab3 中，我正在对一些视图（如按钮和 EditText 微调器等）进行更改，并且代表这些更改，我必须在 tab2 中执行一些操作。简单地说，我在 tab3 中更改了一些值，效果发生在 tab2 中。我知道该怎么做。我只是希望我的视图值每次在`tab2`和之间切换时都会重置为默认值`tab3`

*   我的问题是我怎样才能保存我的观点状态。因此，在恢复选项卡时，我必须获得我之前离开的视图的默认外观。

还有一件事我告诉你，我在 onCreateView() 方法中完成了所有工作。这是正确的方法。像这样。

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {

Toast.makeText(getActivity(), "onCreateView", Toast.LENGTH_SHORT)
        .show();

if (container == null) {

    return null;
}

View vi = inflater.inflate(R.layout.settings, container, false);

btnInsert = (Button) vi.findViewById(R.id.btnInsert);
btnInsert.setOnClickListener(this);
btnPosition = (Button) vi.findViewById(R.id.btnPosition);
btnPosition.setOnClickListener(this);
txtPosition = (TextView) vi.findViewById(R.id.txtPosition);
txtLogo = (TextView) vi.findViewById(R.id.txtLogo);
imgLogoPreview = (ImageView) vi.findViewById(R.id.imgLogoPreview);
imgLogoPreview.setOnClickListener(this);
edTxtUserText = (EditText) vi.findViewById(R.id.edTxtPreview);
relLogo = (RelativeLayout) vi.findViewById(R.id.RelLogo);
relText = (RelativeLayout) vi.findViewById(R.id.RelText);

logoWheel = (WheelView) vi.findViewById(R.id.wheelLogo);

logoWheel.setAdapter(new ArrayWheelAdapter<String>(logoWheelList));
logoWheel.setVisibleItems(4);
logoWheel.setCurrentItem(1);
positionWheel = (WheelView) vi.findViewById(R.id.wheelPosition);
positionWheel.setAdapter(new ArrayWheelAdapter<String>(
        positionWheelTextList));

// LogoWheel changed listener
changedListenerLogo = new OnWheelChangedListener() {
    public void onChanged(WheelView wheel, int oldValue, int newValue) {
        if (!wheelScrolled) {

        }
    }
};

logoWheel.addChangingListener(changedListenerLogo);

// Wheel scrolled listener
scrolledListenerLogo = new OnWheelScrollListener() {

    public void onScrollStarts(WheelView wheel) {
        wheelScrolled = true;

    }

    public void onScrollEnds(WheelView wheel) {
        wheelScrolled = false;
        btnInsert.setText(logoWheelList[wheel.getCurrentItem()] + "");
        wheel.setVisibility(View.INVISIBLE);
        if (wheel.getCurrentItem() == 2) {

            txtPosition.setVisibility(View.INVISIBLE);
            btnPosition.setVisibility(View.INVISIBLE);
            relText.setVisibility(View.INVISIBLE);
            relLogo.setVisibility(View.INVISIBLE);

        } else if (wheel.getCurrentItem() == 1) {

            relText.setVisibility(View.VISIBLE);
            relLogo.setVisibility(View.INVISIBLE);
            txtPosition.setVisibility(View.VISIBLE);
            btnPosition.setVisibility(View.VISIBLE);
            btnPosition.setText("Top");
            positionWheel.setAdapter(new ArrayWheelAdapter<String>(
                    positionWheelTextList));
            positionWheel.setVisibleItems(4);
            positionWheel.setCurrentItem(1);

        } else if (wheel.getCurrentItem() == 0) {

            relLogo.setVisibility(View.VISIBLE);
            relText.setVisibility(View.INVISIBLE);
            txtPosition.setVisibility(View.VISIBLE);
            btnPosition.setVisibility(View.VISIBLE);
            btnPosition.setText("Top Left");
            positionWheel.setAdapter(new ArrayWheelAdapter<String>(
                    positionWheelLogoList));
            positionWheel.setVisibleItems(4);
            positionWheel.setCurrentItem(1);

        }
    }
};

logoWheel.addScrollingListener(scrolledListenerLogo);

// /////////////////////Positon Wheel Listners///////////

// LogoWheel changed listener
changedListenerPosition = new OnWheelChangedListener() {
    public void onChanged(WheelView wheel, int oldValue, int newValue) {
        if (!wheelScrolled) {

        }
    }
};

positionWheel.addChangingListener(changedListenerPosition);

// Wheel scrolled listener
scrolledListenerPosition = new OnWheelScrollListener() {

    public void onScrollStarts(WheelView wheel) {
        wheelScrolled = true;

    }

    public void onScrollEnds(WheelView wheel) {
        wheelScrolled = false;

        String btnStatus = btnInsert.getText().toString();
        if (btnStatus.equals("Logo")) {
            btnPosition.setText(positionWheelLogoList[positionWheel
                    .getCurrentItem()] + "");

        } else if (btnStatus.equals("Text")) {
            btnPosition.setText(positionWheelTextList[positionWheel
                    .getCurrentItem()] + "");
        }

        wheel.setVisibility(View.INVISIBLE);

    }
};

positionWheel.addScrollingListener(scrolledListenerPosition);

return vi; 
```

}

*   在什么时候我必须保存状态，在什么时候我应该检索保存的状态？

*   请用简单的话告诉我如何实现片段的生命周期。

我也尝试了`saveInstance()`片段的方法。但没有调用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:39:38.623

如果我理解正确，那么[这](https://stackoverflow.com/questions/11059951/how-to-preserve-fragments-recreation/11061913#11061913)可能会有用。而不是每次都重新创建片段，您可以隐藏和显示它们。

这当然会保留您的 Fragments，因此可能只是您需要做的事情，因为您有几个选项卡。这样做的好处是

1.  您无需担心保存数据和重新创建片段
2.  选择相关选项卡后，用户可以立即使用更改。

# dns - 不同域上的 tinymce 插件和 tinymce.init()

> ID：15038355
> 
> 赞同：1
> 
> 时间：2013-02-23T07:45:26.330
> 
> 标签：dns, tinymce, cross-domain

如何跨域运行 tinymce？tinymce.js、tiny_mce_popup.js 及其插件位于服务器上，而 tinymce.init() 在本地文件系统的 index.html 上初始化。本地文件系统可以访问服务器的所有路径，但 tiny_mce_popup.js 似乎无法正常工作。

当 index.html 和所有 tinymce 插件集位于 localhost 时，一切正常，即我的域是 localhost。

有什么想法/建议/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:55:14.697

请确保 document.domain 在所有框架（主窗口和 tinymce iframe）中都相同！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T12:00:04.860

假设您在版本 3 上运行，

根据[此处](https://www.tiny.cloud/docs-3x/howto/TinyMCE3x@How-to_load_TinyMCE_crossdomain/)的文档， TinyMCE 不能跨域运行，只能跨子域运行。

如果你想跨子域运行它，你应该设置

```
document.domain = example.com 
```

完成此操作后，例如，您可以将 tinymce 文件托管在 CDN 子域上，并在您的网站中使用它。

# batch-file - 如何保留 GOTO :EOF 但绕过它来完成脚本的其余部分？

> ID：15038358
> 
> 赞同：-2
> 
> 时间：2013-02-23T07:45:59.607
> 
> 标签：batch-file, batch-processing, batch-rename

请看下面的这段代码。它可以工作，但在**goto :EOF**它会停止脚本并且不会完成它下面的内容。有解决办法吗？这个脚本当然还有更多内容，但 goto :EOF 需要在那里才能工作。

```
:stripdup

 >_.vbs echo set regex=new regexp
>>_.vbs echo regex.global=true
 >>_.vbs echo regEx.IgnoreCase=False
 >>_.vbs echo regex.pattern="%~3"
>>_.vbs echo wscript.stdOut.write regex.replace(wscript.stdin.readall,"%~4")
cscript /nologo _.vbs <"%~1" >"%~2"

del _.vbs

goto :EOF

 del Campaign_RND.mis

copy Campaign_RND.mis.tmp Campaign_RND.mis

del Campaign_RND.mis.tmp

del "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_RND" /q

rd "C:\Users\P Ditty\Documents\SH3\data\cfg\Backups_RND"

tasklist /FI "IMAGENAME eq sh3.exe" | find /i "sh3.exe"  
IF ERRORLEVEL 2 GOTO TEST2 
IF ERRORLEVEL 1 GOTO TEST1  
:TEST2 
goto start 
:TEST1 
exit 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T22:04:50.767

如果您希望 GOTO 在某些情况下工作而在其他情况下被省略，那么您需要使您的跳转*有条件*：

```
IF *condition* GOTO :EOF 
```

在这一点上，只有你可以说这个条件必须是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T13:38:35.007

```
goto :EOF 
```

每次都会这样做！如果您需要做其他事情，您将需要重组您的代码。

# highcharts - 不显示不存在的日期值

> ID：15038363
> 
> 赞同：3
> 
> 时间：2013-02-23T07:46:49.183
> 
> 标签：highcharts

我正在尝试让 Highcharts 显示例如公司资源的每日使用统计信息。公司的营业日为周一至周五。

我的数据系列如下所示：

```
[Date.UTC(2012, 8, 6),17.5], (Thu)
[Date.UTC(2012, 8, 7),42.5], (Fri)
-- weekend
[Date.UTC(2012, 8, 10),20],  (Mon)
[Date.UTC(2012, 8, 11),20],  (Tue)
[Date.UTC(2012, 8, 12),40],  (Wed)
[Date.UTC(2012, 8, 13),30],  (Thu)
... 
```

在时间序列图中，为缺少的两个周末日期（2012、8、8 和 2012、8、9）插入了两个标签，但我不希望显示这些标签，因为这些标签没有值所以相邻的日期将通过一条线连接，但这是错误的。

是否可以关闭此“日期插值”并仅显示我插入的值？

谢谢你，菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T13:25:57.653

我知道这是一个老问题，但是您是否尝试在插入日期之前将日期格式化为字符串？如果是这样，您可以使用类别轴。只要您没有任何日期条目而不是空值，这应该可以工作。

我使用嵌入在 JasperReports 中的 Highcharts，但这使我们能够获得您想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:36:04.563

可以使用散点序列并自定义 x 轴的 tickPositioner 回调并过滤非工作日的 x 系列数据（日期）。

我在[http://jsfiddle.net/hkskoglund/6jNGg/创建了一个小提琴](http://jsfiddle.net/hkskoglund/6jNGg/)

为了允许缺少周末天数，应该为系列数据中的 y 值推送**null （如上面的评论中所述）**

不使用日期时间轴的另一个选项是使用类别轴，您可以在其中推送您拥有数据的系列中的日期。这将允许有一个连续的情节。看看新的小提琴：[Areaspline with categories as dates](http://jsfiddle.net/hkskoglund/fsUqY/)

```
xAxis: {
            labels: {
                formatter: function() {
                    // http://api.highcharts.com/highcharts#Highcharts.dateFormat()
                    return Highcharts.dateFormat('%d %b', this.value);
                }
            },
            categories : [            
                Date.UTC(2012, 8, 6),Date.UTC(2012, 8, 7),
                Date.UTC(2012, 8, 10),Date.UTC(2012, 8, 11),
                Date.UTC(2012, 8, 11)]
       },

        series: [{
            name : 'resources',
            data: [17.5,42.5,20,25,20]

        }] 
```

据我所知，如果不更改 Highcharts 系列的源/渲染，则无法使用您请求的绘图配置在 x 轴上使用日期时间。似乎带有空值的不连续性被分成所谓的*段*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:46:21.303

您是否尝试将 oridinal 设置为 false？

[http://api.highcharts.com/highstock#xAxis.ordinal](http://api.highcharts.com/highstock#xAxis.ordinal)

# rendering - Three.js - 使用延迟渲染为区域光添加阴影

> ID：15038366
> 
> 赞同：2
> 
> 时间：2013-02-23T07:47:20.117
> 
> 标签：rendering, three.js, webgl, deferred, shadows

我将 WebGLDeferredRenderer 用于一个简单的场景（由一个模拟房间的立方体和两个用于测试阴影的小立方体制成），但我无法显示场景中使用的 areaLight 生成的任何阴影！

在[这个演示](http://mrdoob.github.com/three.js/examples/webgldeferred_arealights.html)中，有 3 个区域灯，但它们都不会在单个对象上产生阴影（它们只是照亮“房间”）。

我可以使用任何特定的着色器来解决这个问题吗？或者更好……有没有机会在延迟渲染中投下阴影？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T16:15:37.903

Three.js r.56 目前不支持使用延迟渲染和`WebGLDeferredRenderer`.

下面是两个示例，其中点光源和聚光灯在 three.js 中使用延迟渲染投射阴影，但它们使用的*是库的修改版本*。

[http://alteredqualia.com/three/examples/webgl_deferred_shadowmap.html](http://alteredqualia.com/three/examples/webgl_deferred_shadowmap.html)

[http://alteredqualia.com/three/examples/webgl_deferred_shadowmap_point.html](http://alteredqualia.com/three/examples/webgl_deferred_shadowmap_point.html)

然而，还没有区域灯的例子。

所以你想要的是可行的，只是还不支持，而不是区域灯。

三.js r.56

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:45:11.340

使用定向或点光源。区域光不投射阴影。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:49:44.600

我相信区域光影还没有实现，尽管有人可能正在研究它，所以将来可能会实现。您可以尝试自己做，但这需要一些严肃的编程技能，这不是一个容易解决的问题:)

我认为目前您可以在延迟渲染器中使用点光和定向光影，甚至可能使用点光影。

您可以通过仅对阴影使用低强度的不同灯光类型来伪造阴影，但这可能看起来有点不稳定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-17T20:01:11.727

我认为你必须根据面积的大小来推回你的阴影贴图源......你也可以根据你必须推动你的阴影施法者多远的距离来使用百分比更接近过滤的眼球。

# sql - 在 VB.NET 表单文本框中增加 AlphaNumeric

> ID：15038372
> 
> 赞同：0
> 
> 时间：2013-02-23T07:48:12.160
> 
> 标签：sql, vb.net, visual-studio-2012

我正在尝试在表单加载时在文本框中生成一个自动递增的字母数字 ID，并使用下面的代码，我可以将 ID 为“ABC1”的第一组数据插入到空表中，但在下一次加载时，系统将抛出一个错误，说从字符串“ABC1”转换为双精度类型无效。

我可以对代码有一些帮助吗？

谢谢。

```
Try

    Dim con As New SqlClient.SqlConnection()
        con.Open()
        Dim myCommand As SqlCommand
        Dim pdid As String
        myCommand = New SqlCommand("select ISNULL(Max(ID),0) From SQLTable", con)
        Dim reader As SqlDataReader = myCommand.ExecuteReader
        reader.Read()
        id= reader.Item(0) + 1
        pdidbox.Text = "ABC" + pdid.ToString()
        reader.Close()
    Catch ex As Exception
        System.Windows.Forms.MessageBox.Show(ex.Message)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:59:36.487

试试这个

```
 Public Function IncrementString(ByVal Sender As String) As String
    Dim Index As Integer
    For Item As Integer = Sender.Length - 1 To 0 Step -1
        Select Case Sender.Substring(Item, 1)
            Case "000" To "999"
            Case Else
                Index = Item
                Exit For
        End Select
    Next
    If Index = Sender.Length - 1 Then
        Return Sender & "1" '  Optionally throw an exception ?
    Else
        Dim x As Integer = Index + 1
        Dim value As Integer = Integer.Parse(Sender.Substring(x)) + 1
        Return Sender.Substring(0, x) & value.ToString()
    End If
End Function 
```

然后如图所示调用它：

```
Dim comm As New SqlCommand
 comm.CommandText = "SELECT MAX(UserID) FROM SQLTable" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:15:19.097

使用此代码，您将获得可以使用 MAX 函数从数据库中正确检索的格式化字符串

```
Dim curValue as Integer
Dim result as String
using con as SqlConnection = new SqlConnection("server=localhost;initial catalog=TEMPDB;Trusted_Connection=True;")
    con.Open()
    Dim cmd  = new SqlCommand("Select MAX(ID) FROM TEST", con)
    result = cmd.ExecuteScalar().ToString()
    if string.IsNullOrEmpty(result) Then
        result = "ABC000"
    End If

    result = result.Substring(3)
    Int32.TryParse(result, curValue)
    curValue = curValue  + 1
    result = "ABC" + curValue.ToString("D3")

End Using 
```

此代码将存储在 ID 列中，字符串格式为“ABC001”、“ABC002”等。如果您尝试在字符串值上使用它，则 MAX 函数需要在存储的数字之前包含零，否则字符串 ABC2 将高于 ABC19，因为比较第 4 个字符。当然，当您查询数据表以搜索像上面这样的单个结果时，使用 ExecuteScalar 比使用数据读取器更简单。

# c++ - 初始化 std::complex

> ID：15038375
> 
> 赞同：4
> 
> 时间：2013-02-23T07:48:29.860
> 
> 标签：c++

我在网上看到几个例子表明 std::complex 变量可以通过以下方式初始化：

```
std::complex<float> val(10, -2); 
```

但是，有没有办法执行以下操作：

```
std::complex<float> val;
val.real = 10;
val.imag = -2; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T08:02:21.817

[`std::complex::real`](http://en.cppreference.com/w/cpp/numeric/complex/real)并且[`std::complex::imag`](http://en.cppreference.com/w/cpp/numeric/complex/imag)是实际功能。它们可用于返回实部/虚部以及设置它们，但仍然通过提供值作为参数来使用函数调用语法：

```
std::complex<float> val;
val.real(10);
val.imag(-2); 
```

但是，这不称为**初始化**。这会更改 的值`val`，该值已在第一行代码中初始化为零。

实际上，您会看到相同的结果（在该代码之后，`val`具有您期望的值），但需要更多指令，除非编译器可以优化它。由于`std::complex`是标准类型，编译器很可能会这样做，但您永远无法确定这一点。

# java - 如何在 slf4j 中仅显示标记的日志？

> ID：15038377
> 
> 赞同：1
> 
> 时间：2013-02-23T07:48:52.457
> 
> 标签：java, logging, slf4j, markers

我正在开发一个大项目的子系统。所以我制作了一个特殊的日志标记来将该子系统的日志与主项目日志分开。

如何在 slf4j 中仅显示由该特殊日志标记标记的日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:24:10.057

AFAIK 它必须在底层日志框架中完成。在 Logback 中，您可以将过滤器添加到您的日志附加程序。它在文档中有所描述：http: [//logback.qos.ch/manual/filters.html](http://logback.qos.ch/manual/filters.html)。Log4j 似乎有类似的机制：[http://logging.apache.org/log4j/2.x/manual/filters.html](http://logging.apache.org/log4j/2.x/manual/filters.html)，不过我还没有尝试过。

# css - 对具有相同父 CSS 类的多个表的所有 tr 和 td 应用相同的样式

> ID：15038382
> 
> 赞同：1
> 
> 时间：2013-02-23T07:49:16.327
> 
> 标签：css, css-selectors

我正在尝试合并以下两个 CSS 类：

```
.addActivityTable table tr {
    border: none;
}

.addActivityTable table td {
    border: none;
} 
```

作为

```
.addActivityTable table tr, table td {
    border: none;
} 
```

它没有任何效果，我也尝试过：

```
.addActivityTable table tr, td {
    border: none;
} 
```

这也行不通。有没有办法合并这些？

如果有人给我指出关于这类 css 选择器的好文章或博客，这对我学习会有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:52:19.927

你需要：

```
.addActivityTable table tr, .addActivityTable table td {
    border: none;
} 
```

或者

```
.addActivityTable tr, .addActivityTable td {
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:51:47.307

```
.addActivityTable tr, .addActivityTable td {
    border: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:53:03.403

试试这个，希望对你有帮助。只需删除表

```
 .addActivityTable tr, td {
    border: none;
  } 
```

# postgresql - PostgreSQL 中的日期时间转换

> ID：15038384
> 
> 赞同：0
> 
> 时间：2013-02-23T07:49:52.113
> 
> 标签：postgresql, datetime

如何转换`'dd-MM-yyyy HH:mm:ss.fff'`为`'yyyy-MM-dd HH:MI:SS.MS'`格式以便可以将时间戳值存储在 PostgreSQL 8.0.2`timestamp`列中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:20:59.977

想必您不必转换格式，只需在发布`COPY`.

命令是：

```
SET datestyle to 'DMY'; 
```

# android-layout - 如何在单个应用程序中使用应用程序小部件创建 android 应用程序

> ID：15038385
> 
> 赞同：37
> 
> 时间：2013-02-23T07:49:56.733
> 
> 标签：android-layout, android-widget, android-activity

我已经完成了一个**android 应用程序**，它用人名和电话号码存储日期。

现在我必须为这个应用程序开发一个**小部件**，用按钮显示今天的（日期、人名和电话号码）。

**要求：**

1.  带有应用程序和小部件的单个应用程序。
2.  当我单击小部件中的按钮时，它将启动我的应用程序。
3.  小部件数据应始终与我的应用程序同步 - 今天（第 5 个人和应用程序添加 5 个人然后小部件显示 10 个人数据）
4.  我该如何设计这个小部件？有什么指导方针吗？我必须使用水平滚动视图。

我做了一个简单的小部件演示，但我不知道如何将它与我的应用程序同步。

请分享您的经验并就我的小部件和应用程序提供一些想法。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-05T10:25:22.897

**创建和配置小部件**

> 要注册一个小部件，您需要为 android.appwidget.action.APPWIDGET_UPDATE 操作创建一个带有意图过滤器的 BroadcastReceiver。

```
<receiver
       android:icon="@drawable/icon"
       android:label="Example Widget"
       android:name="MyWidgetProvider" >
       <intent-filter >
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
       </intent-filter>

       <meta-data
          android:name="android.appwidget.provider"
          android:resource="@xml/widget_info" />
</receiver> 
```

您还可以通过 android:name="android.appwidget.provider 属性为小部件指定元数据。此元数据引用的配置文件包含小部件的配置设置。如果包含例如更新界面，则小部件的大小和初始布局。

在 /res/drawable 目录中创建一个新文件 myshape.xml。该文件将定义我们在您的小部件中使用的背景。

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
           android:shape="rectangle" >

    <stroke
        android:width="2dp"
        android:color="#FFFFFFFF" />

    <gradient
        android:angle="225"
        android:endColor="#DD2ECCFA"
        android:startColor="#DD000000" />

    <corners
        android:bottomLeftRadius="7dp"
        android:bottomRightRadius="7dp"
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />

</shape> 
```

`widget_layout.xml`在 res/layout 文件夹下定义以下文件。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/layout"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:layout_margin="8dip"
          android:background="@drawable/myshape" >

        <TextView
            android:id="@+id/update"
            style="@android:style/TextAppearance.Medium"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:gravity="center_horizontal|center_vertical"
            android:layout_margin="4dip"
            android:text="Static Text" >
        </TextView>

    </LinearLayout> 
```

现在上课。

```
public class MyWidgetProvider extends AppWidgetProvider {

  private static final String ACTION_CLICK = "ACTION_CLICK";  

     @Override
  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

    // Get all ids
    ComponentName thisWidget = new ComponentName(context,
        MyWidgetProvider.class);
    int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
    for (int widgetId : allWidgetIds) {
      // Create some random data
      int number = (new Random().nextInt(100));

      RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
          R.layout.widget_layout);
      Log.w("WidgetExample", String.valueOf(number));
      // Set the text
      remoteViews.setTextViewText(R.id.update, String.valueOf(number));

      // Register an onClickListener
      Intent intent = new Intent(context, MyWidgetProvider.class);

      intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
      intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

      PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
          0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
      remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
      appWidgetManager.updateAppWidget(widgetId, remoteViews);
    }
  } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T13:24:37.147

我发现几天我以某种方式得到了解决方案。所以我分享我的想法。

这个网站对我非常有用。

[http://kasperholtze.com/android/how-to-make-a-simple-android-widget/](http://kasperholtze.com/android/how-to-make-a-simple-android-widget/)

我做了一些改变并完成了我的工作。

**需求解决方案：**

**1.** 像这样制作Receiver并放入manifest权限。

```
<receiver
        android:name=".WatchWidget"
        android:label="WatchWidget" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/watch_widget_provider" />
    </receiver> 
```

**2.**在我这边需要顶部的TextView点击所以可以使用TextView id in `onUpdate()`。

```
 remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget_lay);

    Intent intent = new Intent(context, TestActivity.class);
    intent.setAction("callActivity");
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
    remoteViews.setOnClickPendingIntent(R.id.widget_textview, pendingIntent); 
    appWidgetManager.updateAppWidget(new ComponentName(context,WatchWidget.class), remoteViews); 
```

**3.**我想调用数据库并获取记录并显示它。现在问更新呢？

所以我使用了计时器类并每 1000 秒运行一次，因为过度小部件总是更新 30 分钟（可能是）。

```
@Override
public void onUpdate( final Context context, final AppWidgetManager appWidgetManager, final int[] appWidgetIds )
{

    this.appWidgetManager = appWidgetManager;
    try {
        Timer timer = new Timer();
        timer.scheduleAtFixedRate(new MyTime(context, appWidgetManager,appWidgetIds), 1, 1000);

    } catch (Exception e) {
        System.out.println("Exception:");
    }
    updateSwitch1(context, appWidgetManager, appWidgetIds[0]);

} 
```

如果有任何疑问，请发表评论，并感谢所有给予我全力支持以使此答案有用的人。

# haskell - STUArray sie - 仅当 i == Int 时空间泄漏？

> ID：15038386
> 
> 赞同：13
> 
> 时间：2013-02-23T07:49:56.537
> 
> 标签：haskell, space-leak

我对以下片段的行为感到困惑：

```
import Data.Int
import Data.Array.ST
import Control.Monad.ST

{-# INLINE fib #-}
fib _ 0 = return 0
fib _ 1 = return 1
fib c n = do
  f1 <- memo c (fib c) (n-1)
  f2 <- memo c (fib c) (n-2)
  return (f1+f2)

newtype C a = C a

{-# INLINE memo #-}
memo (C a) f k = do
  e <- readArray a k
  if e == (-1)
     then do
       v <- f k
       writeArray a k v
       return v
     else return e

evalFib :: Int -> Int
evalFib n = runST $ do
  a <- newArray (0,n) (-1) :: ST s (STUArray s Int Int)
  fib (C a) n

main = print $ evalFib 120000 
```

使用它编译`-O2`时堆栈溢出（显示 20M 内存在使用中）。*令人困惑的部分是，如果进行以下任何*更改，它实际上会按预期工作（没有堆栈溢出和 9M 内存正在使用） ：

*   `Int64`用于代替`Int`: （给出`evalFib :: Int64 -> Int`和`STUArray s Int64 Int`）。事实上，任何`Int*`( `Int32`, `Int16`, etc) 都可以像`Word`or `Word*`;
*   `newtype C a`从图片中删除；
*   `data C a = C !a`被用来代替`newtype`

我试图弄清楚这种行为：它是 GHC/array 模块中的错误（它在`7.4.2`and中显示相同的行为`7.6.2`）还是应该以这种方式工作？

PS 有趣的是，当我尝试编译它`ghc array.hs -O2 -fext-core`以查看产生的核心差异时，两个 GHC 版本都以“ghc：恐慌！（'不可能'发生）”失败。这里也没有运气..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T10:52:06.430

正如您所说，您的初始程序堆栈溢出：

```
$ ghc -O2 A.hs --make -rtsopts
$ ./A +RTS -s
Stack space overflow: current size 8388608 bytes.
Use `+RTS -Ksize -RTS' to increase it.
      21,213,928 bytes allocated in the heap
       3,121,864 bytes copied during GC
       5,400,592 bytes maximum residency (4 sample(s))
          20,464 bytes maximum slop
              20 MB total memory in use (0 MB lost due to fragmentation) 
```

如果我们更改为 Int64，它可以正常工作：

```
$ time ./A
-2092835058118682368
./A  0.03s user 0.01s system 92% cpu 0.050 total 
```

那么漏水在哪里呢？

只是目视检查您的代码，有一个明显的问题：

*   fib 在其数组参数中是惰性的

您还可以从您看到的行为中推断出这一点：

```
newtype C a is removed from the picture;

data C a = C !a is used instead of newtype 
```

将数组公开给严格性分析器的所有服务器。

如果您在数组中设置 fib 严格：

```
{-# LANGUAGE BangPatterns #-}

{-# INLINE fib #-}
fib !_ 0 = return 0
fib !_ 1 = return 1
fib !c n = do
  f1 <- memo c (fib c) (n-1)
  f2 <- memo c (fib c) (n-2)
  return (f1+f2) 
```

然后它就可以工作了：

```
$ time ./A
-2092835058118682368
./A  0.03s user 0.01s system 89% cpu 0.052 total 
```

那么为什么它会泄漏一种类型，而不是另一种呢？我认为您对 Int64 很幸运。但我认为这是一个“错误”，可能在各种 num 类型的重写规则中。

查看 simplifier 的输出，我们得到在 Int64 情况下与 Int 情况下完全不同的重写规则运行。由于底层函数通常由 Int 索引，因此您最终会通过使用常见的 Int 类型来执行不同的优化。在这种情况下，足以迷惑严格度分析器。

与往常一样，一般规则适用：给编译器更多提示，你就会得到更好的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T23:15:24.827

从 7.6.1开始，无论我使用还是作为索引类型，使用`-O2`and`-dsuppress-uniques`完成工作的函数在`Main.main_$spoly_$wa`结构上（几乎）是相同的。由于核心又长又复杂，所以输出如下：`int``Int64``diff`

```
$ diff Int_core.dump-simpl Int64_core.dump-simpl 
11,12c11,12
<           (Data.Array.Base.STUArray s GHC.Types.Int GHC.Types.Int)
<           (Main.C (Data.Array.Base.STUArray s GHC.Types.Int GHC.Types.Int))
---
>           (Data.Array.Base.STUArray s GHC.Int.Int64 GHC.Types.Int)
>           (Main.C (Data.Array.Base.STUArray s GHC.Int.Int64 GHC.Types.Int))
26,27c26,27
<             (Data.Array.Base.STUArray s GHC.Types.Int GHC.Types.Int)
<             (Main.C (Data.Array.Base.STUArray s GHC.Types.Int GHC.Types.Int)))
---
>             (Data.Array.Base.STUArray s GHC.Int.Int64 GHC.Types.Int)
>             (Main.C (Data.Array.Base.STUArray s GHC.Int.Int64 GHC.Types.Int))) 
```

不同的索引类型，这些当然是不同的。

```
33,40d32
<           l :: GHC.Types.Int
<           [LclId]
<           l = GHC.Types.I# sc } in
<         let {
<           u :: GHC.Types.Int
<           [LclId]
<           u = GHC.Types.I# sc1 } in
<         let { 
```

对于 index type `Int`，GHC 会为越界索引产生更多信息错误，因为它需要有效索引的下限和上限。（ 的默认实现在 .`index`中没有被覆盖`instance Ix Int64`。）

```
45,46c37
<           GHC.Types.False ->
<             case poly_$w$j5 (GHC.Types.I# a) l u of wild2 { };
---
>           GHC.Types.False -> case GHC.Arr.hopelessIndexError of wild1 { }; 
```

不同的错误，`indexError`与`hopelessIndexError`. 以下差异也仅涉及索引错误。

```
49,50c40
<               GHC.Types.False ->
<                 case poly_$w$j5 (GHC.Types.I# a) l u of wild2 { };
---
>               GHC.Types.False -> case GHC.Arr.hopelessIndexError of wild2 { };
58c48
<                     case poly_$w$j4 y (GHC.Types.I# sc2) of wild3 { };
---
>                     case poly_$w$j3 y (GHC.Types.I# sc2) of wild4 { };
62c52
<                         case poly_$w$j4 y (GHC.Types.I# sc2) of wild5 { };
---
>                         case poly_$w$j3 y (GHC.Types.I# sc2) of wild5 { };
77,78c67
<                                 GHC.Types.False ->
<                                   case poly_$w$j3 (GHC.Types.I# a1) l u of wild6 { };
---
>                                 GHC.Types.False -> case GHC.Arr.hopelessIndexError of wild6 { };
81,82c70
<                                     GHC.Types.False ->
<                                       case poly_$w$j3 (GHC.Types.I# a1) l u of wild7 { };
---
>                                     GHC.Types.False -> case GHC.Arr.hopelessIndexError of wild7 { }; 
```

现在再次使用不同的索引类型：

```
110c98
<                                                                       GHC.Types.Int
---
>                                                                       GHC.Int.Int64
152c140
<                                                 s GHC.Types.Int GHC.Types.Int>)>)
---
>                                                 s GHC.Int.Int64 GHC.Types.Int>)>) 
```

最后，`0`得到`1`了不同的顶级名称。

```
177,178c165,166
<       0 -> (# sc5, lvl5 #);
<       1 -> (# sc5, lvl6 #)
---
>       0 -> (# sc5, lvl #);
>       1 -> (# sc5, lvl1 #) 
```

所以完成实际工作的整个代码是相同的。然而，一个会导致堆栈溢出（尽管只是，`-K9M`足够 [`-K8731K`在这里就足够了，`-K8730K`不是]），而另一个则不会。

差异确实是由索引错误引起的。带有`Int`索引的代码`Int`在代码未分配的每个递归调用中分配两个装箱的 s `Int64`，因为

```
Main.main_$spoly_$wa [Occ=LoopBreaker]
  :: forall s.
     GHC.Prim.Int#
     -> GHC.Prim.Int#
     -> GHC.Prim.Int#
     -> GHC.Prim.MutableByteArray# s
     -> (GHC.Prim.~#)
          *
          (Data.Array.Base.STUArray s GHC.Types.Int GHC.Types.Int)
          (Main.C (Data.Array.Base.STUArray s GHC.Types.Int GHC.Types.Int))
     -> GHC.Prim.Int#
     -> GHC.Prim.State# s
     -> (# GHC.Prim.State# s, GHC.Types.Int #) 
```

携带对数组的*两个*引用。

这使用了更多的堆栈，并且这些装箱`Int`的 s 必须被垃圾收集，这会导致更大的 GC 数字。此外，索引错误的 thunk 比`hopelessIndexError`thunk 稍大。

现在，如果您通过以下方式帮助编译器

*   删除 newtype 包装器
*   使函数在数组中严格（通过 bang 模式或`data C a = C !a`）

或者其他一些方式，它可以生成更好的代码，在没有给定参数的堆栈溢出的情况下进行管理，因为在 worker 中只有*一个*`Int`对数组的引用，因此不需要为边界分配装箱的 s。

请注意，即使在编译器的帮助下，此算法也会导致稍大的参数出现堆栈溢出。

# java - 关闭 clicklistener 上的自定义警报对话框

> ID：15038390
> 
> 赞同：-1
> 
> 时间：2013-02-23T07:50:59.223
> 
> 标签：java, android, android-alertdialog, onclicklistener

我有三个按钮的自定义对话框。我有 3 个按钮的单击侦听器....这是代码。

```
 public void addDialog() {
        // TODO Auto-generated method stub
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
            // Setting Dialog Title
            alertDialog.setTitle("Add From");
            // Setting Dialog Message
            alertDialog.setMessage("Add Number: ");
            LayoutInflater layoutInflater 
            = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view=layoutInflater.inflate(R.layout.dialog_lay,null);

           Button btn_Contact = (Button)view.findViewById(R.id.btn_contact);
           Button btn_SMS = (Button)view.findViewById(R.id.btn_sms);
           Button btn_Manually = (Button)view.findViewById(R.id.btn_manually);
           //  Setting Negative "NO" Button
            alertDialog.setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                // Write your code here to invoke NO event
                Toast.makeText(getApplicationContext(), "You clicked on NO", Toast.LENGTH_SHORT).show();
                dialog.cancel();
                }
            });

            OnClickListener listenerDial = new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
            // i want to close alert dialog here    

            Toast.makeText(getApplicationContext(), "You clicked contact btn", Toast.LENGTH_SHORT).show();

                }
            };

            // add listener to button.
            btn_Contact.setOnClickListener(listenerDial);
            btn_SMS.setOnClickListener(listenerDial);
            btn_Manually.setOnClickListener(listenerDial);
            alertDialog.setView(view);
            alertDialog.show();

    } 
```

**我想在按下三个键中的任何一个时关闭此警报对话框..任何建议plzzzz ..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:52:53.510

用来`alertDialog.dismiss()`关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:59:16.447

```
OnClickListener listenerDial = new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
        // i want to close alert dialog here    

        alertDialog.dismiss();
        Toast.makeText(getApplicationContext(), "You clicked contact btn",        
        Toast.LENGTH_SHORT).show();

            }
        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T09:33:36.437

我已经修改了您的代码，只需检查一下

```
 public void addDialog() {
    // TODO Auto-generated method stub
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
        // Setting Dialog Title
        alertDialog.setTitle("Add From");
        // Setting Dialog Message
        alertDialog.setMessage("Add Number: ");
        LayoutInflater layoutInflater 
        = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view=layoutInflater.inflate(R.layout.dialog_lay,null);

       Button btn_Contact = (Button)view.findViewById(R.id.btn_contact);
       Button btn_SMS = (Button)findViewById(R.id.btn_sms);
       Button btn_Manually = (Button)findViewById(R.id.btn_manually);
       //  Setting Negative "NO" Button
        alertDialog.setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            // Write your code here to invoke NO event
            Toast.makeText(getApplicationContext(), "You clicked on NO", Toast.LENGTH_SHORT).show();
            // dialog.dimiss(); // dialog will dismiss when you click on this button un-comment it so it works.
            }
        });

        OnClickListener listenerDial = new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            dialog.dimiss(); // dialog will dismiss when you click on this button

        Toast.makeText(getApplicationContext(), "You clicked contact btn", Toast.LENGTH_SHORT).show();

            }
        };

        // add listener to button.
        btn_Contact.setOnClickListener(listenerDial);
        btn_SMS.setOnClickListener(listenerDial);
        btn_Manually.setOnClickListener(listenerDial);
        alertDialog.setView(view);
        alertDialog.show();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:13:17.523

刚刚添加

```
final AlertDialog Dial = alertDialog.create(); 
```

**和改变**

```
dialog.setView(layout); to Dial.setView(layout); 
```

**现在打电话给** `Dial.dismiss(); in onclick listener`..对我来说很好。

# php - 如何附加查询字符串而不是替换 PHP 中的当前字符串？

> ID：15038396
> 
> 赞同：0
> 
> 时间：2013-02-23T07:52:09.320
> 
> 标签：php, symfony-1.4, url-routing

我正在使用 symfony，可能有这样的东西：

```
<a href="<?php echo url_for('home/index?color=blue') ?>">Test</a> 
```

但是，如果我在 URL 中已经有一个查询字符串，`?height=tall`那么它就会被删除。我怎么能附加它以便两者都可以保留？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:57:57.730

我不知道 Symfony 是否有专门的方法来做到这一点，但是在普通的 PHP 代码中你会做这样的事情：

```
'home/index?' . http_build_query(array('color' => 'blue') + $_GET) 
```

# php - 如何构造一个返回标志的 MySQL 查询，根据另一个表中的行返回 y 或 n？

> ID：15038397
> 
> 赞同：0
> 
> 时间：2013-02-23T07:52:18.533
> 
> 标签：php, mysql, sql

这是我的表：

```
foo1
------
| id |
------
| 1  |
| 2  |
| 3  |
| 4  |
| 5  |
------ 
```

和：

```
foo2
------------------
| id | id2 | foo |
------------------
| 1  |  1  |  2  |
| 2  |  1  |  1  |
| 3  |  3  |  2  |
| 4  |  3  |  1  |
| 5  |  5  |  1  |
------------------ 
```

基本上，我想选择`foo1`id 对应于`id2`of 的所有行`foo2`，并返回一`flag`列，其中包含`y`是否存在`foo2`与 in 相同`id2`的`id`行`foo1`，并且`foo`等于`2`，`n`否则。例如，这是查询应该从我的两个示例表中返回的内容：

```
-------------
| id | flag |
-------------
| 1  |   y  |
| 3  |   y  |
| 5  |   n  |
------------- 
```

请注意，为 id = 1 返回的标志是`y`，不是`n`，因为至少有一行`id2`等于`1`和`foo`等于`2`。

这样的查询可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:55:16.413

```
SELECT  DISTINCT a.ID, 
        IF(c.id2 IS NULL, 'n', 'y') flag
FROM    foo1 a
        INNER JOIN foo2 b
            ON a.ID = b.id2 
        LEFT JOIN foo2 c
            ON b.id2 = c.id2 AND
                c.foo = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7271b/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T07:59:05.950

```
select foo1.id id, if(max(foo2.foo = 2), 'y', 'n') flag
from foo1 join foo2 on foo1.id = foo2.id2
group by id 
```

# mule - 使用 mule esb 社区版进行集群

> ID：15038400
> 
> 赞同：1
> 
> 时间：2013-02-23T07:52:22.703
> 
> 标签：mule, cluster-computing, mule-cluster

我使用骡 CE 3.3.0。我在我的 mule 服务器中创建了 cxf 代理服务。我的交易号非常多，所以我想使用集群。我可以在多台机器（物理或逻辑）上安装许多 mule esb 实例并将它们连接在一起吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:02:04.950

从您在评论中所说的（感谢您提供额外的上下文顺便说一句），您似乎不需要集群。您可以在不同的 Mule 实例中运行相同的 Mule 配置，并在它们前面有一个 HTTP 负载均衡器。

我忘了问的一件事是：你有轮询端点吗？如果是，您必须仅在一个 Mule 实例上启动轮询流程，以防止对同一数据进行多次轮询。

# python - 警告：某些字符无法解码，并被替换为 REPLACEMENT CHARACTER

> ID：15038402
> 
> 赞同：1
> 
> 时间：2013-02-23T07:52:53.987
> 
> 标签：python, unicode, encoding, web-scraping, beautifulsoup

我正在创建一个脚本来从一个站点下载一些 mp3 播客并将它们写入某个位置。我快完成了，正在下载和创建文件。但是，我遇到了无法完全解码二进制数据并且无法播放 mp3 文件的问题。

这是我的代码：

```
import re
import os
import urllib2
from bs4 import BeautifulSoup
import time

def getHTMLstring(url):
    html = urllib2.urlopen(url)
    soup = BeautifulSoup(html)
    soupString = soup.encode('utf-8')
    return soupString

def getList(html_string):
    urlList = re.findall('(http://podcast\.travelsinamathematicalworld\.co\.uk\/mp3/.*\.mp3)', html_string)
    firstUrl = urlList[0]
    finalList = [firstUrl]

    for url in urlList:
        if url != finalList[0]:
            finalList.insert(0,url)

    return finalList

def getBinary(netLocation):
    req = urllib2.urlopen(netLocation)
    reqSoup = BeautifulSoup(req)
    reqString = reqSoup.encode('utf-8')
    return reqString

def getFilename(string):
    splitTerms = string.split('/')
    fileName = splitTerms[-1]
    return fileName

def writeFile(sourceBinary, fileName):
    with open(fileName, 'wb') as fp:
        fp.write(sourceBinary)

def main():
    htmlString = getHTMLstring('http://www.travelsinamathematicalworld.co.uk')
    urlList = getList(htmlString)

    fileFolder = 'D:\\Dropbox\\Mathematics\\Travels in a Mathematical World\\Podcasts'
    os.chdir(fileFolder)

    for url in urlList:
        name = getFilename(url)
        binary = getBinary(url)
        writeFile(binary, name)
        time.sleep(2)

if __name__ == '__main__':
    main() 
```

当我运行代码时，我在控制台中收到以下警告：

警告：根：某些字符无法解码，并被替换为替换字符。

我认为这与我使用的数据以 UTF-8 编码这一事实有关，也许 write 方法需要不同的编码？我是 Python 新手（实际上是一般编程），我被困住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:27:17.823

假设您想从 url 下载一些 mp3 文件。
您可以通过 检索这些网址`BeautifulSoup`。但是您不需要使用`BeautifulSoup`来解析网址。您只需要直接保存即可。
例如，

```
url = 'http://acl.ldc.upenn.edu/P/P96/P96-1004.pdf'
res = urllib2.urlopen(url)
with open(fileName, 'wb') as fp:
    fp.write(res.read()) 
```

如果我`BeautifulSoup`用来解析那个 pdf url

```
reqSoup = BeautifulSoup('http://acl.ldc.upenn.edu/P/P96/P96-1004.pdf') 
```

`reqSoup`不是 pdf 文件，而是 HTML 响应。其实是

```
<html><body><p>http://acl.ldc.upenn.edu/P/P96/P96-1004.pdf</p></body></html> 
```

# rest - 我应该将 JDBC 驱动程序放在哪里，以便它作为 Jax-rs Web 服务的一部分工作？

> ID：15038407
> 
> 赞同：1
> 
> 时间：2013-02-23T07:53:46.657
> 
> 标签：rest, jdbc, driver, jax-rs

我正在构建一个 RESTful Web 服务。我正在使用 Jax-rs(Jersey)，一个简单的客户端和一个简单的服务器。我附加了一个 PostgreSQL 数据库，它是相应的 JDBC 驱动程序。

当不涉及数据库内容时，服务器和客户端可以完美地工作。（所以客户端/服务器代码很好）

问题开始当我扩充服务器以查询数据库时：
服务器抛出：`No suitable driver found for jdbc:postgresql://localhost/MyDataBase`
客户端报告`500 internal service error`

如果我从一个普通的旧 java 应用程序（在同一个包中）以相同的方式使用数据库，则没有任何问题（所以连接/查询代码也很好）。

只有当我从服务器查询它时才会收到错误。所以，我认为代码没有问题，只有 JDBC 驱动程序的位置。

我试过了：

*   将 postgresql 驱动程序 .jar 放在我项目中的几乎所有地方
*   Class.forName("../../..postgresql.jar")

我想知道：

*   这个 .jar 应该放在动态 Web 项目中的什么位置？
*   为什么它适用于 Java 应用程序，但不适用于应用程序服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:58:39.447

您不能将整个 .jar 文件加载为驱动程序。您需要从中选择一个 Driver 类。

```
Class.forName("../../..postgresql.jar") 
```

上面的代码似乎不对。

试试这个代码：

```
Class.forName("org.postgresql.Driver");
Connection connection = null;
connection = DriverManager.getConnection(
   "jdbc:postgresql://hostname:port/dbname","username", "password");
connection.close(); 
```

# git - 是否可以在 .gitattributes 中将特定文件或特定文件夹的内容标记为二进制文件？

> ID：15038409
> 
> 赞同：3
> 
> 时间：2013-02-23T07:53:57.203
> 
> 标签：git, gitattributes

在我们的 repo 中，我们有一个`js`非常可读的文件，但我们不需要任何关于其中差异的报告。它只会使屏幕混乱。所以我们希望它被认为是二进制的。这就是我们所做的`*.min.js`，每个人都对结果感到满意。在`.gitattributes`我们得到：`*.js text eol=lf`行中，现在我们需要以某种方式为特定`js`文件覆盖它。我试过了：

```
filename.js binary
path/filename.js binary 
```

我什至尝试将`.gitattributes`文件放在文件`bin/`夹本身（我们保存所有编译文件的位置）下，内容如下：

```
* binary 
```

但这似乎不起作用。我猜应该是简单的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:06:06.410

如果你想从输出中**完全**删除一些文件，[这个技巧](https://stackoverflow.com/a/14789642/229034)对你很有用。`git diff`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:10:26.173

尝试在 bin 文件夹中创建一个 .gitattributes 说：

```
*.js binary 
```

# android - 将操作项添加到直接打开链接的操作栏

> ID：15038412
> 
> 赞同：1
> 
> 时间：2013-02-23T07:54:13.597
> 
> 标签：android, android-actionbar

将操作项添加到直接链接到特定 URL 的操作栏的最简单方法是什么？意思是，我点击一个操作栏图标，它会加载一个 URL。该活动已经是一个网络视图，我希望该操作项在同一活动中打开指定的 URL。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:28:01.260

在您的菜单项上执行此操作

```
loadUrl("www.google.com"); 
```

或者

```
super.loadUrl("www.google.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:10:06.753

这是我会这样做的方式，我不确定这是否是最好的方式：我会像往常一样声明`menu.xml`，`MenuItem`然后`android:showAsAction="ifRoom"` ：

```
@override
public boolean  onOptionsItemSelected(MenuItem item) {
 switch(item.getItemId() {
  case R.id.myActionItem:
  // get a reference to your webView and load new content
  break;
  default:
   break;
 }
 return true;
} 
```

我希望我有所帮助。

# vb.net - 如何在后台听键盘并按需触发击键？

> ID：15038413
> 
> 赞同：4
> 
> 时间：2013-02-23T07:54:35.573
> 
> 标签：vb.net, visual-studio-2008, keystroke, keyboard-hook, keystrokes

我想在 vb.NET 2008 中制作一个程序，它将在后台监听键盘，即即使应用程序已最小化（全局）。如果用户按下了特定键，它应该以固定的给定时间间隔继续触发其他 2 个键，直到用户再次按下该特定键。

这如何在 vb.NET 2008 中完成？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-23T09:03:40.647

## 来源：[这里](http://sim0n.wordpress.com/2009/03/28/vbnet-keyboard-hook-class/)

用法：创建钩子

```
Private WithEvents kbHook As New KeyboardHook 
```

然后可以处理每个事件：

```
Private Sub kbHook_KeyDown(ByVal Key As System.Windows.Forms.Keys) Handles kbHook.KeyDown
    Debug.WriteLine(Key.ToString) 
End Sub 
Private Sub kbHook_KeyUp(ByVal Key As System.Windows.Forms.Keys) Handles kbHook.KeyUp 
    Debug.WriteLine(Key) 
End Sub 
```

键盘挂钩类：

```
Imports System.Runtime.InteropServices

Public Class KeyboardHook

    <DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
    Private Overloads Shared Function SetWindowsHookEx(ByVal idHook As Integer, ByVal HookProc As KBDLLHookProc, ByVal hInstance As IntPtr, ByVal wParam As Integer) As Integer
    End Function
    <DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
    Private Overloads Shared Function CallNextHookEx(ByVal idHook As Integer, ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
    End Function
    <DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
    Private Overloads Shared Function UnhookWindowsHookEx(ByVal idHook As Integer) As Boolean
    End Function

    <StructLayout(LayoutKind.Sequential)> _
    Private Structure KBDLLHOOKSTRUCT
        Public vkCode As UInt32
        Public scanCode As UInt32
        Public flags As KBDLLHOOKSTRUCTFlags
        Public time As UInt32
        Public dwExtraInfo As UIntPtr
    End Structure

    <Flags()> _
    Private Enum KBDLLHOOKSTRUCTFlags As UInt32
        LLKHF_EXTENDED = &H1
        LLKHF_INJECTED = &H10
        LLKHF_ALTDOWN = &H20
        LLKHF_UP = &H80
    End Enum

    Public Shared Event KeyDown(ByVal Key As Keys)
    Public Shared Event KeyUp(ByVal Key As Keys)

    Private Const WH_KEYBOARD_LL As Integer = 13
    Private Const HC_ACTION As Integer = 0
    Private Const WM_KEYDOWN = &H100
    Private Const WM_KEYUP = &H101
    Private Const WM_SYSKEYDOWN = &H104
    Private Const WM_SYSKEYUP = &H105

    Private Delegate Function KBDLLHookProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer

    Private KBDLLHookProcDelegate As KBDLLHookProc = New KBDLLHookProc(AddressOf KeyboardProc)
    Private HHookID As IntPtr = IntPtr.Zero

    Private Function KeyboardProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
        If (nCode = HC_ACTION) Then
            Dim struct As KBDLLHOOKSTRUCT
            Select Case wParam
                Case WM_KEYDOWN, WM_SYSKEYDOWN
                    RaiseEvent KeyDown(CType(CType(Marshal.PtrToStructure(lParam, struct.GetType()), KBDLLHOOKSTRUCT).vkCode, Keys))
                Case WM_KEYUP, WM_SYSKEYUP
                    RaiseEvent KeyUp(CType(CType(Marshal.PtrToStructure(lParam, struct.GetType()), KBDLLHOOKSTRUCT).vkCode, Keys))
            End Select
        End If
        Return CallNextHookEx(IntPtr.Zero, nCode, wParam, lParam)
    End Function

    Public Sub New()
        HHookID = SetWindowsHookEx(WH_KEYBOARD_LL, KBDLLHookProcDelegate, System.Runtime.InteropServices.Marshal.GetHINSTANCE(System.Reflection.Assembly.GetExecutingAssembly.GetModules()(0)).ToInt32, 0)
        If HHookID = IntPtr.Zero Then
            Throw New Exception("Could not set keyboard hook")
        End If
    End Sub

    Protected Overrides Sub Finalize()
        If Not HHookID = IntPtr.Zero Then
            UnhookWindowsHookEx(HHookID)
        End If
        MyBase.Finalize()
    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T09:46:39.233

如果您使用 KeyboardHook 类，请确保您必须在使用前构建您的程序。对于特定键的问题，您可以在 KeyDown 或 KeyUp 事件中触发它。但在此之前，您必须使用 sendkeys 将密钥发送到活动窗口。

> SendKeys.Send("L") '将字母 L 发送到活动窗口。

然后您可以执行以下代码；下面检查是否按下了字母“a”。

```
Private Sub kbHook_KeyDown(ByVal Key As System.Windows.Forms.Keys) Handles kbHook.KeyDown
    Debug.WriteLine(Key.ToString) 
    if Key.ToString() = "a" then
     'trigger your sendkeys
    end if
End Sub 
```

要触发特定键（如切换按钮），只需声明一个布尔变量来检查按钮是否被切换。您可以全局声明它：

> 将开关调暗为 boolean = false

只需更新您设置条件以检查按下的字母的区域。如下所示：

```
if Key.ToString() = "a" then
  if switch = false then
    switch = true
    'trigger send keys
  else
    switch = false
    'deactivate send keys
  end if
end if 
```

要确定发送密钥的特定时间，请使用计时器。我希望它有所帮助。

# java - 如何在Java中获取机器的IP地址

> ID：15038414
> 
> 赞同：4
> 
> 时间：2013-02-23T07:54:48.903
> 
> 标签：java, ip-address

有没有办法用Java获取机器的IP地址？从运行我的 jar 文件的机器获取 IP 地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T08:36:15.423

最佳答案是：

```
InetAddress.getLocalHost().getHostAddress(); 
```

（该`getLocalHost`方法在`InetAddress`not中声明`Inet4Address`。）

进行一些安全检查也`getLocalHost()`毫无价值，因此如果您的 JAR 在沙箱中运行，这可能不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T07:57:29.127

您可以使用以下调用获取机器的 IP 地址：

```
Inet4Address.getLocalHost().getHostAddress(); 
```

以上是在 Java API 中，所以你不需要任何 jar。

# ios - NSDictionary 方法返回类型

> ID：15038415
> 
> 赞同：-2
> 
> 时间：2013-02-23T07:54:53.033
> 
> 标签：ios, objective-c, nsdictionary

我有一个方法返回它在 FrameWork 库中定义的 NSDictionary

```
- (NSDictionary*) getApplicationConfig
  {         
        ...................................
   } 
```

现在我想在我的 App 委托中调用这个方法，任何人都可以建议我正确的方法。

NSDictionary *abc = getApplcationConfig();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:00:05.210

从阅读[Objective-C教程](http://cocoadevcentral.com/d/learn_objectivec/)开始 它应该是这样的

```
NSDictionary *abc = [someObject getApplicationConfig]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:00:54.093

如果您查看[NSDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)的 Apple 文档，您有几个选择。

您可以使用实例方法`[[NSDictionary alloc]initWithDictionary:[someInstance getApplicationConfig]]`或类方法`[NSDictionary dictionaryWithDictionary:[someInstance getApplicationConfig]]`

# c# - 如何将数据行值添加到 arraylist 的 Parallel.Foreach 循环中？

> ID：15038418
> 
> 赞同：1
> 
> 时间：2013-02-23T07:55:09.370
> 
> 标签：c#, asp.net, visual-studio-2010

**编码：**

```
int rownum = 1;

Parallel.ForEach(listofstaffuid.Cast<object>(), staffuid =>
{
string staffname = dbmanager.GetNameViaUserID(staffuid.ToString());
staffdr = staffdt.NewRow();
staffdr["No"] = rownum;
staffdr["StaffName"] = staffname;
staffdr["RadioList"] = listofradio;
staffdr["RemarkTbx"] = string.Empty;
staffdt.Rows.Add(staffdr);
rownum++;

}); 
```

我只想添加我在数组列表中找到的数据表 foreach 列表。有这个错误说我已经有一个数据行因此无法添加。我现在卡住了，有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:05:56.787

你有一个共享资源，你的行计数器。您需要同步对共享资源的访问。另一方面，数据[表对于写操作来说不是线程安全的](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.110%29.aspx)。因此，您还需要[同步](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx)对数据表的访问。

唯一不需要同步的是您的 GetNameViaUserID 函数（也许这是您要找出的部分）。该功能需要很长时间吗？如果是这样，可能值得尝试从该函数并行获取所有结果，然后使用这些结果按顺序填充数据表。如果根本不需要任何时间，那么在这里使用并行处理没有意义，因为您需要同步整个代码块，这意味着您的 foreach 无论如何都是顺序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:06:44.207

在 Parallel.X 中使用计数器时，您必须使用线程安全的方式来增加计数器，例如 Interlock.Increment。

此外，如果您使用在 Parallel 操作之外定义的字段或变量，您将遇到竞争条件。总是尽量减少对 Parallel 操作的外部世界的依赖（至少从写作的角度来看，或者利用 Concurrent 对象（ConcurrentBag ...））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:01:19.537

代替

```
staffdr = staffdt.NewRow(); 
```

利用

```
var staffdr = staffdt.NewRow(); 
```

由于并行性，rownum 也不正确

# php - MySQL LIKE 运算符和通配符

> ID：15038425
> 
> 赞同：1
> 
> 时间：2013-02-23T07:56:33.110
> 
> 标签：php, mysql, database, wildcard, sql-like

我一直在阅读教程，并没有学到任何新东西。我有一张客户表。客户的名字和姓氏存储在不同的列中。我想编写一个可以按姓名搜索客户的查询，无论是名字、姓氏还是两者。

这是我所拥有的：

```
$queryyy = "
    SELECT *
    FROM `customers`
    WHERE
        `first_name1` LIKE '".mysql_real_escape_string($_GET['custname'])."%'
        OR `last_name1` LIKE '%".mysql_real_escape_string($_GET['custname'])."'
        AND `status` = 'active'
    LIMIT 6
"; 
```

如果我想找到“Lindsay Thompson”，我可以查询“lindsay”或“Thompson”并得到我想要的结果，但如果我查询“lindsay thompson”，我什么也得不到。

我觉得我错过了通配符的意义，或者没有正确使用它们。有人可以向我解释一下并更正我的查询..

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T08:09:46.367

引入通配符来表示“任意数量的任意字符”（在 的情况下`%`）。

所以

```
col LIKE '%foo' 
```

将匹配`foo`价值和`barfoo`价值。

您想要的实际上是相反的-您需要连接两列并检查它是否等于请求，例如：

```
CONCAT(first_name, ' ', last_name) = 'foo bar' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T08:13:24.913

% 通配符将匹配任意数量的字符。[要使用页面http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html) 中显示的示例，`D%i%`将匹配`David`.

您遇到的问题是您正在搜索`Lindsay`or 或`Thompson`for `%Lindsay Thompson`，即在任一名称中搜索任意数量的字符，后跟全名。因此这永远不会匹配。

一种选择是对两个名称的串联字符串运行查询。

> SELECT * from customers WHERE CONCAT(first_name1, ' ', last_name1) LIKE '%" .mysql_real_escape_string($_GET['custname']). "%' AND `status`= 'active' LIMIT 6";

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T08:20:56.987

试试这个，希望对你有帮助

```
 $queryyy = "SELECT * FROM `customers`
             WHERE (`first_name1` LIKE '".mysql_real_escape_string($_GET['custname'])."%' 
             OR `last_name1` LIKE '%".mysql_real_escape_string($_GET['custname'])."') 
             or concat(`first_name1`,' ',last_name1`) 
             LIKE'".mysql_real_escape_string($_GET['custname'])."%' 
             AND `status` = 'active' LIMIT 6"; 
```

# javascript - blend 2012 - 不要在后台运行整个应用程序

> ID：15038426
> 
> 赞同：2
> 
> 时间：2013-02-23T07:56:37.200
> 
> 标签：javascript, windows-8, windows-store-apps, blend, expression-blend-5

我正在使用 Blend 2012 设计 HTML5 Windows 8 Metro 应用程序，但我遇到了问题，因为 Blend 在后台运行网页中的所有 JavaScript，并在运行时实时更新我的​​应用程序。这严重减慢了混合速度，因为我仍在进行原型设计并且尚未完成应用程序的功能，因此它正在进行大量调试打印等。

有没有办法禁用 JavaScript 或简单地暂停执行，这样我就可以在 Blend 中编辑 HTML 而无需运行我的代码？我更喜欢在 Blend 中切换的解决方案，而不是在我的项目中添加代码以禁用功能，如果它检测到 Blend 作为它的主机，但是如果它是最明智的方法，我会很乐意接受。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:44:49.120

我认为不可能在 Blend 中禁用 JavaScript 的执行。

就像在 XAML 世界中一样，您可以检测您的代码是否在设计器中运行，例如 Blend。这是一个如何使用它的示例：

```
var isInDesigner = Windows.ApplicationModel.DesignMode.designModeEnabled;

if(!isInDesigner){
    // code not running in Expression Blend
} 
```

# c - C: 试图声明一个变量会导致一个未声明的变量错误

> ID：15038429
> 
> 赞同：1
> 
> 时间：2013-02-23T07:56:54.783
> 
> 标签：c, variable-declaration, undeclared-identifier

我只是在做一个小编程项目，我遇到了一个相当常见的错误，即未声明的东西：

```
MP_HighLevelData.c:230:15: error: ‘RemovedUser’ undeclared (first use in this function) 
```

以为我刚刚忘记声明变量，我顺着源文件中的那行，发现错误指向这行代码：

```
User *RemovedUser; 
```

奇怪，我不能声明一个新变量，因为它不存在？我确定不是这行代码有问题，所以这里有一个更完整的代码片段。我真的很想知道我做错了什么。

```
void RemoveUserFromGameRoom(User *User) {

  if (User->GameRoom != NULL) {
    GameRoom *GameRoom = User->GameRoom;

    if (GameRoom->Owner == User) {

      // We should delete the whole game room, since the owner is leaving and a new owner isn't chosen automatically
      while (GameRoom->UsersHead != NULL) { // Awesome way of looping while there are users left in the room
        // We need to get rid of all the users in this game room, including the owner, before we can remove it
        User *RemovedUser;
        RemovedUser = GameRoom->UsersHead->User;
        DeleteUserPtrFromGameRoom(GameRoom->UsersHead); // Remove reference to the user from the game room
        RemovedUser->GameRoom = NULL; // Remove reference to the game room from the user (needs to be set afterwards, whoops)
      }

      // All the users have been kicked out, now we can take care of the game room
      FreeRIDfromGameCategory(GameRoom->RID, User->GameCategory);
      ClearGameRoomName(GameRoom);
      DeleteGameRoomFromGameCategory(GameRoom, User->GameCategory);

    } else {
      UserPtr *UserPtr = GameRoom->UsersHead;

      while (UserPtr != NULL) {
        if (UserPtr->User == User) {
          DeleteUserPtrFromGameRoom(UserPtr);
          User->GameRoom = NULL;
          break;
        }

        UserPtr = UserPtr->next;
      }
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:03:03.023

通常，当面临“类型”或“类型变量”的决定时，编译将始终假定“类型变量”，这就是`User`作为对象访问的原因。

但是，与此同时，使用该类型声明一个新对象`User`无法正常工作，因为对于编译器来说，这是一个变量，而不是一个类型。

简而言之：将您的变量重命名`User`为除类型名称（即`UserObject`或其他名称）之外的任何名称，并且您的代码在这方面应该可以正常工作。

为了澄清，这是我建议的修复：

```
void RemoveUserFromGameRoom(User *myUser) {

    if (myUser->GameRoom != NULL) {
        GameRoom *GameRoom = myUser->GameRoom;
        //More code to come
    }
    //Some more code
 } 
```

# couchdb - 在 ubuntu 上使用 geocouch 扩展 couchdb 后出现初始化问题

> ID：15038431
> 
> 赞同：1
> 
> 时间：2013-02-23T07:57:17.560
> 
> 标签：couchdb, couchapp, couchdb-futon

环境是 ubuntu 12.10。src 版本是**apache-couchdb-1.2.1**和 **geocouch-couchdb1.2.x**，首先尝试我只是将两者都放到下载文件夹中，但是当我在 geocouch 文件夹中执行 make 时出现以下问题：

```
ryu@ryu-Asp:~/Downloads/geocouch-couchdb1.2.x$ make
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git 
```

我在谷歌上没有找到解决方案，所以忽略这个问题，继续在[https://github.com/couchbase/geocouch/tree/couchdb1.2.x](https://github.com/couchbase/geocouch/tree/couchdb1.2.x)上进行配置。：

```
sudo cp etc/couchdb/default.d/geocouch.ini /usr/local/etc/couchdb/default.d/
export ERL_FLAGS="-pa /usr/local/src/geocouch/ebin"
ryu@ryu-Asp:/usr/local/bin$ sudo ./couchdb 
```

然后得到以下错误消息：

```
Apache CouchDB 1.2.1 (LogLevel=info) is starting. 
[error] [<0.93.0>] {error_report,<0.31.0>,
                {<0.93.0>,supervisor_report,
                 [{supervisor,{local,couch_secondary_services}},
                  {errorContext,start_error},
                  {reason,
                   {'EXIT',
                    {undef,
                     [{couch_spatial,start_link,[],[]},
                      {supervisor,do_start_child,2,
                       [{file,"supervisor.erl"},{line,303}]},
                      {supervisor,start_children,3,
                       [{file,"supervisor.erl"},{line,287}]},
                      {supervisor,init_children,2,
                       [{file,"supervisor.erl"},{line,253}]},
                      {gen_server,init_it,6,
                       [{file,"gen_server.erl"},{line,304}]},
                      {proc_lib,init_p_do_apply,3,
                       [{file,"proc_lib.erl"},{line,227}]}]}}},
                  {offender,
                   [{pid,undefined},
                    {name,spatial_manager},
                    {mfargs,{couch_spatial,start_link,[]}},
                    {restart_type,permanent},
                    {shutdown,brutal_kill},
                    {child_type,worker}]}]}}
{"init terminating in do_boot",{{badmatch,{error,{bad_return,{{couch_app,start,[normal, ["/usr/local/etc/couchdb/default.ini","/usr/local/etc/couchdb/local.ini"]]},{'EXIT',   {{badmatch,{error,shutdown}},[{couch_server_sup,start_server,1,[{file,"couch_server_sup.erl"},{line,98}]},{application_master,start_it_old,4,[{file,"application_master.erl"},{line,274}]}]}}}}}},[{couch,start,0,[{file,"couch.erl"},{line,18}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}

=SUPERVISOR REPORT==== 23-Feb-2013::16:24:04 ===
 Supervisor: {local,couch_secondary_services}
 Context:    start_error
 Reason:     {'EXIT',
                 {undef,
                     [{couch_spatial,start_link,[],[]},
                      {supervisor,do_start_child,2,
                          [{file,"supervisor.erl"},{line,303}]},
                      {supervisor,start_children,3,
                          [{file,"supervisor.erl"},{line,287}]},
                      {supervisor,init_children,2,
                          [{file,"supervisor.erl"},{line,253}]},
                      {gen_server,init_it,6,
                          [{file,"gen_server.erl"},{line,304}]},
                      {proc_lib,init_p_do_apply,3,
                          [{file,"proc_lib.erl"},{line,227}]}]}}
 Offender:   [{pid,undefined},
              {name,spatial_manager},
              {mfargs,{couch_spatial,start_link,[]}},
              {restart_type,permanent},
              {shutdown,brutal_kill},
              {child_type,worker}]

Crash dump was written to: erl_crash.dump
init terminating in do_boot () 
```

顺便说一句，我已经尝试过将 src 放到[http://euroside.wordpress.com/2011/12/06/installing-geocouch/](http://euroside.wordpress.com/2011/12/06/installing-geocouch/)上的 /usr/local/src 的方法。但它仍然无法正常工作。

# c# - 将对象转换为长

> ID：15038435
> 
> 赞同：3
> 
> 时间：2013-02-23T07:57:33.070
> 
> 标签：c#

我有以下功能：

```
 public virtual long AsLong(object originalValue,long defaultValue)
    {
        double buffer = defaultValue;
        if (originalValue != null)
        {
            double result;
            var readValueIsconverted = double.TryParse(originalValue.ToString(), out result);
            if (readValueIsconverted)
                buffer = result;
        }

        var roundedValue = Math.Round(buffer, 0);
        var convertedValue = (long) roundedValue;
        return convertedValue;
    } 
```

为了允许转换 14.4，我使用了 double ！我有以下失败的测试：

```
 [Fact]
    public void CanConvertLongMaxValue()
    {
        var cellValue = new Converter();
        const long longValue = 0x7FFFFFFFFFFFFFFF;
        var result = cellValue.AsLong(longValue, 12);

        Assert.Equal(longValue, result);

    } 
```

我跟踪了代码，roundedValue 是正数，但 convertValue 是负数。那么问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T08:34:32.560

问题是您试图在`double`具有[15-16 位有效数字](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.80%29.aspx)的 a 中保存一个具有 19 位有效数字（十进制）的整数值。

因此，不可能在`double`. 显然，舍入会导致值在转换为 long 时溢出，使其成为负值。

您可以这样确认：

```
var convertedValue = checked((long)roundedValue); 
```

如果您绝对必须处理这种情况，我建议您使用[`decimal`](http://msdn.microsoft.com/en-US/library/364x0z75%28v=vs.80%29.aspx)而不是 double，或者在小数点处拆分字符串（或您的语言环境中使用的任何内容）并以这种方式处理舍入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T16:46:50.620

检查您的`originalValue`. 它的编译时类型是`object`，但运行时的真正类型是什么？如果是盒装号码类型，则无需 call`.ToString()`后跟`TryParse`. 最好直接拆箱为正确的类型（特别是如果它始终是相同的运行时类型），然后在必要时转换为另一种数值类型。

如果您通过a 发送`long`具有许多数字的 a，例如`0x7FFFFFFFFFFFFFFF`与 相同，请注意 a的精度比 a 高大约 10 位。从技术上讲，这是因为 a使用 11 位作为指数，但不必存储最高有效位。`long.MaxValue``double``long``double``double`

在 的值处`long.MaxValue`，a 的精度会发生`double`变化，因为当我们通过 2 的幂时，指数会增加 1。`double`下面的值`long.MaxValue`的精度为 1024。这意味着只能表示 1024 的整数倍。毫不奇怪，*上面*`double`的值具有 2048 的精度。当然，整数类型的精度始终是 1。 *`long.MaxValue``long`*

 *以下是最近的三个`double`下和三个上`long.MaxValue`：

```
9.22337203685477'27'36 E+18
9.22337203685477'37'60 E+18
9.22337203685477'47'84 E+18
---
9.22337203685477'58'08 E+18  <-- two to the 63rd power
9.22337203685477'78'56 E+18
9.22337203685477'99'04 E+18 
```

当您转换`long.MaxValue`时，即`9223372036854775807`，`double`最接近的可表示`9.223372036854775808E+18`是`1.0`太大。它的字符串表示`.ToString()`将仅显示 15 位数字，而`.ToString("R")`将显示 17 位数字（我上面列表中的撇号`'`）。将`double` ``9.223372036854775808E+18`back转换为 时，由于数字太大`long`，我们得到了溢出异常。`1.0`当然，您仍然可以将数字转换为`ulong`，这应该会显示确切的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:37:26.487

您应该检查是否`long`首先提供了参数：

```
public virtual long AsLong(object originalValue,long defaultValue)
{
    if(originalValue.GetType() == typeof(long))
        return (long) originalValue;

    double buffer = defaultValue;

    ...
} 
```

否则，您可能会丢失一些有关`long`转换的信息`double`。*

# java - 网页需要很长时间才能响应，并在第二次尝试后恢复正常

> ID：15038437
> 
> 赞同：0
> 
> 时间：2013-02-23T07:57:54.297
> 
> 标签：java, jsp, web, tomcat6

我已经在 linux 服务器上的 tomcat 6(6.0.26) 上部署了我的 web 应用程序（jsp+servlet）。这个问题发生在我第一次访问网页时，第二次尝试后，它不会有问题，页面加载成功。我的索引文件包含从数据库查询数据的新闻模块。如果有任何建议可以避免这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:13:12.513

几个原因

*   DB缓存第一次调用后的查询结果
*   那是因为 Tomcat 仅在第一次尝试访问它们时编译 JSP 文件，在第一次尝试加载后快速加载，因为 JSP 文件已经编译为 Servlet 类。[如何配置tomcat进行预编译](http://tomcat.apache.org/tomcat-5.5-doc/jasper-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:10:10.800

DBs 缓存查询结果或至少更新它自己的优化器。在您的第一个查询中，检索需要时间，但连续查询会快得多。因此，请检查您的查询在您的 db IDE 中首次查询需要多少时间并优化您的查询。

# inno-setup - Inno Setup，在运行时更改 WizardImageFile

> ID：15038439
> 
> 赞同：0
> 
> 时间：2013-02-23T07:58:00.760
> 
> 标签：inno-setup

是否可以在运行时更改 WizardImageFile？我希望这张照片在某些情况下改变。无法在代码中更改它，{code:GetGraphics} 也不能在 WizardImageFile 参数中使用。有没有人在运行时成功改变它？也许还有另一种方法来设置 WizardForm.WizardBitmapImage 的图片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:38:46.633

以下脚本显示了如何根据是早上还是下午有条件地显示两个图像之一。这些图像仅出于此目的包含在设置中，并在初始化向导表单时被提取到设置使用的临时目录中。由于您试图使用代码部分来更改`WizardImageFile`指令值（这是不可能的），您将使用以下`WizardBitmapImage`图像[`WizardForm`](http://jrsoftware.org/ishelp/topic_scriptclasses.htm#TWizardForm)：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[Files]
Source: "Image1.bmp"; Flags: dontcopy
Source: "Image2.bmp"; Flags: dontcopy

[Code]
procedure InitializeWizard;
var
  FileName: string;
begin
  if StrToInt(GetDateTimeString('h', #0, #0)) < 12 then
    FileName := 'Image1.bmp'
  else
    FileName := 'Image2.bmp';

  ExtractTemporaryFile(FileName);
  WizardForm.WizardBitmapImage.Bitmap.LoadFromFile(
    ExpandConstant('{tmp}\' + FileName));
end; 
```

# java - 等待（）的问题；

> ID：15038444
> 
> 赞同：1
> 
> 时间：2013-02-23T07:59:03.080
> 
> 标签：java, multithreading, synchronization

我目前有这个运行方法，我希望 3 个单独的线程访问并等待另一个线程通知。

```
public void run(){
   try {
      System.out.println(this.name + " waits on the table...");
      /// waits for agent to signal that new ingredients have been passed out
      wait();
   } catch(InterruptedException ex) {
      Thread.currentThread().interrupt();
   }
   System.out.println(this.name + " stops waiting and checks the table...");
   checkTable();
} 
```

目前这会抛出一个`java.lang.IllegalMonitorStateException`可以通过在方法上使用同步来解决的问题。问题是当我使用同步时，第一个线程将等待，而其他两个线程无法执行任何操作，因为第一个线程对该方法具有锁定。所以我的问题是我怎样才能让三个单独的线程可以访问这个方法并同时等待？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:05:07.217

要使用[`wait()`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.2.1)您必须[拥有显示器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.2)。 [您通过使用获得所有权`synchronize`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.1)。在你的情况下`synchronize(this)`。

但是要阻止 3 个线程并从第 4 个线程释放它们，您可以使用[`java.util.concurrent.CyclicBarrier`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)或[Perception](https://stackoverflow.com/users/680925/perception)[`java.util.concurrent.CountDownLatch`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)提到的

这是一个带有 CyclicBarrier 的版本：

```
import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CyclicBarrier;

public class RendezVous extends Thread {

   private final CyclicBarrier _barrier;

   RendezVous( String name, CyclicBarrier barrier ) {
      super( name );

      _barrier = barrier;
      setDaemon( true );
      start();
   }

   @Override public void run() {
      System.out.println( getName() + " waits for counterparts..." );
      try { _barrier.await(); }
      catch( InterruptedException | BrokenBarrierException x ) {
         x.printStackTrace(); }
      System.out.println( getName() + " has reached its rendez-vous!");
   }

   public static void main( String[] args ) throws InterruptedException {
      CyclicBarrier barrier = new CyclicBarrier( 4 );
      new RendezVous( "Rdvz 1", barrier ); Thread.sleep(  1000L );
      new RendezVous( "Rdvz 2", barrier ); Thread.sleep(  1000L );
      new RendezVous( "Rdvz 3", barrier ); Thread.sleep(  1000L );
      new RendezVous( "Rdvz 4", barrier ); Thread.sleep( 10000L );
   }
} 
```

输出：

```
Rdvz 1 waits for counterparts...
Rdvz 2 waits for counterparts...
Rdvz 3 waits for counterparts...
Rdvz 4 waits for counterparts...
Rdvz 4 has reached its rendez-vous!
Rdvz 1 has reached its rendez-vous!
Rdvz 2 has reached its rendez-vous!
Rdvz 3 has reached its rendez-vous! 
```

还有一个带有 CountDownLatch 的版本：

```
import java.util.concurrent.CountDownLatch;

public class CountDownLatchDemo extends Thread {

   private final CountDownLatch _cdl;

   CountDownLatchDemo( String name, CountDownLatch cdl ) {
      super( name );

      _cdl = cdl;
      setDaemon( true );
      start();
   }

   @Override public void run() {
      System.out.println( getName() + " waits for counterparts..." );
      try {
         _cdl.countDown();
         _cdl.await();
      }
      catch( InterruptedException x ) {
         x.printStackTrace(); }
      System.out.println( getName() + " has reached its rendez-vous!");
   }

   public static void main( String[] args ) throws InterruptedException {
      CountDownLatch cdl = new CountDownLatch( 4 );
      new CountDownLatchDemo( "Rdvz 1", cdl ); Thread.sleep(  1000L );
      new CountDownLatchDemo( "Rdvz 2", cdl ); Thread.sleep(  1000L );
      new CountDownLatchDemo( "Rdvz 3", cdl ); Thread.sleep(  1000L );
      new CountDownLatchDemo( "Rdvz 4", cdl ); Thread.sleep( 10000L );
   }
} 
```

输出：

```
Rdvz 1 waits for counterparts...
Rdvz 2 waits for counterparts...
Rdvz 3 waits for counterparts...
Rdvz 4 waits for counterparts...
Rdvz 4 has reached its rendez-vous!
Rdvz 1 has reached its rendez-vous!
Rdvz 2 has reached its rendez-vous!
Rdvz 3 has reached its rendez-vous! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:08:18.953

当第一个线程等待时，它会释放锁。所以其他线程可以获取锁

# mysql - 带有 WHERE 子句的 MySQL SELECT 不包括数量为“0”的结果

> ID：15038447
> 
> 赞同：1
> 
> 时间：2013-02-23T07:59:11.207
> 
> 标签：mysql, sql, select, where

我正在尝试创建一个选择存储过程来返回一个值的计数不同实例。但是，如果不存在不同的实例，它应该返回 0。以下查询几乎可以满足我的所有需求

```
SELECT br.barangay,COUNT(DISTINCT cr.cr_patient_no) as `amount`
FROM barangay as br LEFT JOIN case_report_main as cr  on cr.cr_barangay = br.barangay
GROUP BY br.barangay 
ORDER BY br.barangay  ASC 
```

此代码返回包含位置名称的列“barangay”和“计数”列。但是，我还需要能够使用 WHERE 子句搜索它们。

```
WHERE cr.cr_date_onset BETWEEN '2010-01-01' AND '2014-12-12' 
```

我需要一个包含 0 数量的结果，如下所示：

```
'NAME1'|'1'
'NAME2'|'0'
'NAME3'|'4'
'NAME4'|'0' 
```

但是当我添加 WHERE 子句时，它会删除数量为 0 的所有结果。

```
'NAME1'|'1'
'NAME3'|'4' 
```

有人可以为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:12:10.617

把它放在你的 WHERE 子句中：

```
cr.cr_date_onset IS NULL OR cr.cr_date_onset BETWEEN '2010-01-01' AND '2014-12-12' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T08:08:41.300

您需要在子句上添加该条件`ON`，而不是在`WHERE`子句上

```
SELECT  br.barangay,
        COUNT(DISTINCT cr.cr_patient_no) AS `amount`
FROM    barangay AS br
        LEFT JOIN case_report_main AS cr
            ON  cr.cr_barangay = br.barangay AND
                cr.cr_date_onset BETWEEN '2010-01-01' AND '2014-12-12'
GROUP   BY br.barangay
ORDER   BY br.barangay ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:08:30.633

试试这个查询：

```
 SELECT br.barangay,ifnull(COUNT(DISTINCT cr.cr_patient_no),0) as `amount`
    FROM barangay as br LEFT JOIN case_report_main as cr  on cr.cr_barangay = br.barangay 
    where cr.cr_date_onset between '2010-01-01' and '2014-12-12'
    GROUP BY br.barangay 
    ORDER BY br.barangay  ASC 
```

# ios - 使用 nsdate 格式化程序进行日期格式化

> ID：15038448
> 
> 赞同：0
> 
> 时间：2013-02-23T07:59:13.260
> 
> 标签：ios, nsdate, nsdateformatter

我正在获取以下格式的数据

```
20130224233000 where,

2013 - year
02 month 
24 day

23 hh 
30 mm
00 ss 
```

我想要以下格式

```
Wednesday, 24-Feb-13  11:30 PM 
```

我尝试如下代码

```
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MM/dd/yyyy hh:mma"];
NSString *dateString = [dateFormat stringFromDate:today];
return dateString; 
```

但它提供了我不需要的格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:22:01.213

您需要两个 NSDateFormatter，一个转换为 NSDate，另一个转换为 NSString。使用[格式表](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)作为参考。

```
NSString* date = @"20130224233000";
NSDateFormatter *parser = [[NSDateFormatter alloc] init];
[parser setDateFormat:@"yyyyMMddHHmmss"];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"eeee, dd-MMM-yy hh:mm a"];
NSString *dateString = [formatter stringFromDate:[parser dateFromString:date]];
return dateString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:13:11.337

尝试这个：

```
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"EEE d-MMM-yy HH:mma"];
NSString *dateString = [dateFormat stringFromDate:today];
return dateString; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:14:19.627

```
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
dateFormat setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease]];
[dateFormat setDateFormat:@"EEEE, dd-MMM-yy HH:mm a"];
NSString *dateString = [dateFormat stringFromDate:today];
return dateString; 
```

希望这可以帮助。

# ruby-on-rails - 为什么在演示者中使用 Bootstrap 媒体对象时图像会消失？

> ID：15038450
> 
> 赞同：0
> 
> 时间：2013-02-23T07:59:18.967
> 
> 标签：ruby-on-rails, twitter-bootstrap

在 Rails 3.2 应用程序中，我有一个围绕 Twitter Bootstrap 的媒体对象组件构建的索引视图。我正在尝试整理它并将一些代码移动到演示者中（[http://railscasts.com/episodes/287-presenters-from-scratch](http://railscasts.com/episodes/287-presenters-from-scratch)）。

我遇到了一个奇怪的问题，即 div 完全从渲染的标记中消失了。我的代码有错误吗？

```
def render_object
  content_tag(:div, class: "row") do
    div_for(object, class: "object-container") do
      content_tag(:div, class: "media") do
        link_to(object, class: "pull-left") do
          image_tag(object.image_url(:thumb), class: "media-object") if object.image?
        end
        content_tag(:div, class: "media-body") do
          link_to(object.user.name, object.user) 
        end
      end
    end
  end
end 
```

当我加载页面时，图像及其 href 链接在标记中无处可见。奇怪的是`.media-body`div 及其内容都存在。

如果我注释掉描述`.media-body`div 的 3 行，则呈现链接的图像。

我不明白为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T16:50:55.463

事后看来，这个问题的答案是显而易见的，但它困扰了我很长时间，所以添加一个答案，以防它对其他人有用。

基本上 content_tag 将只返回最后一项，根据任何 ruby​​ 函数。所以秘诀就是连接链接和内容方法。

```
def render_object
  content_tag(:div, class: "row") do
    div_for(object, class: "object-container") do
      content_tag(:div, class: "media") do
        html = link_to(object, class: "pull-left") do
          image_tag(object.image_url(:thumb), class: "media-object") if object.image?
        end
        html += content_tag(:div, class: "media-body") do
          link_to(object.user.name, object.user) 
        end
      end
    end
  end
end 
```

注意`html =`

# jquery - 保持 Twitter Boostrap 下拉菜单在单击切换项目时保持打开状态

> ID：15038456
> 
> 赞同：2
> 
> 时间：2013-02-23T08:00:02.237
> 
> 标签：jquery, drop-down-menu, twitter-bootstrap

我试图在单击切换项目时保持下拉菜单保持打开状态。我成功地保持下拉菜单打开，但我切换的项目不能正常工作。我第一次单击切换项时，它会执行它应该执行的操作，但第二次单击它时，它不会切换，直到我关闭下拉菜单。谁能给我一些指示？

```
HTML:
<div class="span2">
  <div class="dropdown sort_main">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Sort by: </a>
    <span>Rating</span>
    <ul class="dropdown-menu sort" role="menu" aria-labelledby="dLabel">
       <li><a id="ratings" href="#">Option1</a></li>
       <li><a id="timezone" href="#">>Option2</a></li>
       <li><a id="level" href="#">>Option3</a></li>
    </ul>
  </div>
</div>

<script>        
$("a#ratings").click(function(){
  $(this).toggleClass("option_selected");  //it will not remove this class until i close menu and open it again
});

$('.dropdown-menu a#ratings').click(function(e) {
  e.stopPropagation();
});
</script> 
```

# c# - 无法执行 CVTRES.exe

> ID：15038457
> 
> 赞同：4
> 
> 时间：2013-02-23T08:00:03.110
> 
> 标签：c#, .net, visual-studio-2010

无法写入输出文件“xxx”——“无法执行 CVTRES.EXE。” . 我有这个问题。我已经重新安装了VS2010，但问题仍然存在。我也应用了 devnev -resetsettings 但徒劳无功。如何解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:33:33.373

在需要调试某些东西的客户的 VMware 映像上安装 VS2010 后，我刚刚遇到了这个问题。该错误使我无法构建任何 C# 项目，而构建 C++ 项目工作得很好。

问题的根源是损坏的`cvtres.exe.config`. 我只是碰巧检查了这个文件：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\cvtres.exe.config 
```

并发现它只包含一个零字节序列。从已知的良好系统恢复文件内容后，一切都开始正常工作。这是我现在在文件中的内容：

```
<?xml version ="1.0"?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <requiredRuntime safemode="true" imageVersion="v4.0.30319" version="v4.0.30319"/>
        <supportedRuntime version="v4.0" sku="client" />
    </startup>
</configuration> 
```

这个答案对您来说可能为时已晚，但我正在写它以防万一它对其他人有所帮助。关于我的系统配置的最后说明：Win7 64 位、VS2010 (10.0.40219.1 SP1Rel)、.NET Framework 4 (4.0.30319 SP1Rel)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-23T08:40:45.920

我解决了这个问题

`cvtres.exe`从复制`framework/v2.0.50727`到`framework/v4.0.30319`

我不知道为什么，但它的工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T10:00:38.310

同样，以防万一这对其他人有用...

我在 Visual Studio 2013 中遇到了同样的问题。包含项目 A（只有代码的类库）和项目 B（另一个类库，这个包含一堆资源文件）的解决方案，A 引用 B。确切的错误是:`Metadata failure while creating assembly -- Could not execute CVTRES.EXE`对于项目 B。

结果表明 A 的目标是 .NET 4.5，而项目 B 的目标是 .NET 2.0。将 B 更改为 4.5 也解决了这个问题。我想也许 Visual Studio 正在一个不存在的 2.0 相关文件夹或类似的文件夹中寻找 CVTRES.EXE。

**更新：**确实，Visual Studio 正在文件夹中搜索该文件`C:\Windows\Microsoft.NET\Framework\v2.0.50727`，但它不存在。重新安装 .NET Framework 3.5（2.0 不再提供下载）没有帮助。我从同事的机器上复制了文件，效果很好。我不明白为什么这发生在我身上而不是我部门的其他人身上，我们都有完全相同的计算机设置（Windows 7 Pro x64，VS 2013 Pro）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T13:18:28.873

当资源 .resx 文件无法链接时，CVTRES.exe 通常会报错。也许额外的 ui 语言文件等是问题所在。尝试编译排除这些文件，看看会发生什么。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-12-04T23:55:41.970

我知道已经很晚了，在我的情况下，CVTRES.EXE 文件被另一个进程使用，重新启动服务器解决了问题

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-08-23T04:35:13.300

万一有人遇到 cvtres.exe 的问题 - 在我的情况下，它是反病毒启动，阻止文件执行。

# php - Wordpress 查询和 Get_Post_Meta

> ID：15038458
> 
> 赞同：0
> 
> 时间：2013-02-23T08:00:03.057
> 
> 标签：php, wordpress

我的一个页面上有以下代码。当我使用 `echo get_num_queries()`. 我正在尝试减少查询量，但我无法找到它们的来源。

我唯一能想到的是`get_post_meta`. get_post_meta 是否每次都运行查询？如果是这样，有没有更好的方法来做到这一点，所以我不会每次都运行查询？

```
<?php
/*  This is the second wordpress loop which will show only non paid dealers per the above wp_query in query_single.  The 0 passed is non-paid dealers*/

     query_single('dealers', 'draft', '0', $taxtype,  $value);
?>

<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?>

<?php
$address=get_post_meta($post->ID, 'wpcf-street_address', TRUE);
$city=get_post_meta($post->ID, 'wpcf-city', TRUE);
$state=get_post_meta($post->ID, 'wpcf-state_abbreviation', TRUE);
$zip=get_post_meta($post->ID, 'wpcf-zip_code', TRUE);
$phone=get_post_meta($post->ID, 'wpcf-phone_number', TRUE);
$paid=get_post_meta($post->ID, 'wpcf-paid', TRUE);
$post_id=get_the_ID();
get_each_dealer_brand($post_id);?>

<ul class="ullisting">
<?php
if($paid==0) {

    echo "<li><p class=\"plisting\"><strong>";the_title();echo "</strong></p></li>";
    echo "<li><p class=\"plisting\">$address | $city, $state $zip</p></li>";
    echo "<li><p class=\"plisting\">P: $phone</p></li>";
    echo "<li><p class=\"listing\"><span><small>$brands_list</small></span></p></li>";
} 
?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:06:03.550

您可以通过调用 get_post_meta 一次来减少查询计数 - 它会获取所有相关字段：

```
// will have all of your fields and more in an array, with fewer queries called
$post_meta = get_post_meta($post->ID);
var_dump($post_meta); 
```

[http://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

# jquery - Jquery .click() 函数在类问题上的实现

> ID：15038465
> 
> 赞同：0
> 
> 时间：2013-02-23T08:00:45.830
> 
> 标签：jquery, html

我正在尝试在 Jquery 中实现一个简单的代码，如果我单击类的任何元素，我必须得到一个弹出窗口说**hello**。

我试过这个：

```
$(document).ready(function(){
    $(".thumb_radio").click(function(){

       alert("hello");

    });

}); 
```

但这不起作用。

HTML是这样的：

```
<tr>
<td>
<input id="thumb_radio_0" class="thumb_radio" type="radio" value="0" name="thumbnail_template">
Please select ...
</td>
</tr>
<tr>
<td>
<input id="thumb_radio_1" class="thumb_radio" type="radio" value="1" name="thumbnail_template">
one

</td>
<td>
<input id="thumb_radio_2" class="thumb_radio" type="radio" value="2" name="thumbnail_template">
two

</td>
<td>
<input id="thumb_radio_3" class="thumb_radio" type="radio" value="3" name="thumbnail_template">
three

</td>
<td>
<input id="thumb_radio_4" class="thumb_radio" type="radio" value="4" name="thumbnail_template">
four

</td>
</tr> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:15:31.617

原型也覆盖了`$`变量。如果你想和它一起使用 jQuery，你必须消除冲突。jQuery 有一个自己的方法来做到这一点：[`$.noConflict`](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-23T08:58:58.983

```
<script type="text/javascript" src="/scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(function(){
    $(".thumb_radio").click(function(){
       alert("hello");
    });
 });

</script> 
```

提琴手示例：http: [//jsfiddle.net/UtcQu/](http://jsfiddle.net/UtcQu/)

确切来源：查看来源： http: [//fiddle.jshell.net/UtcQu/show/light/](http://fiddle.jshell.net/UtcQu/show/light/)

`jQuery.noConflict()`如果您使用任何其他库以及本机 jquery，您可能需要做一些事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T09:34:42.697

尝试

```
jQuery(function(){
    jQuery(".thumb_radio").click(function(){
       alert("hello");
    });

}); 
```

# android - 使用 Eclipse / adb 调试已签名的 APK

> ID：15038466
> 
> 赞同：1
> 
> 时间：2013-02-23T08:00:50.827
> 
> 标签：android, eclipse, adb, billing

我需要调试一个签名的 APK（由于计费问题必须签名）。但是，它在启动时崩溃，所以我需要在它做任何事情之前让它处于调试器的控制之下。

我找到了一个关于调试签名 APK 的问题/答案，但这需要您在启动后使用 DDMS 连接到它的进程 - 问题是它在我开始这样做之前很久就崩溃了。

因此，我需要能够使用 Eclipse/adb 加载和启动签名的 APK，在主活动 onCreate() 中设置断点，以便在它执行任何操作之前获得控制权。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:12:21.203

我对您的需求有点困惑 - 但如果您只是想调试一个已签名并安装在手机上的应用程序，为什么不将手机连接到您的计算机，启动它，然后阅读 LogCat Eclipse 启动时看到错误？

# python - 不确定“Heroku 上的 Python 入门”中的下一步

> ID：15038471
> 
> 赞同：1
> 
> 时间：2013-02-23T08:01:29.503
> 
> 标签：python, git, heroku, gitignore

[https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)

我正在尝试将我的应用程序存储在 Git 中，但我不确定如何继续第一部分：

```
 venv
    *.pyc 
```

我在哪里输入这个？我必须下载什么（如果我必须下载任何东西）？

我该如何进行这一步？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:05:55.860

你不在 shell 中运行它——你把它添加到你的`.gitignore`文件中。

如果你*确实*想在 shell 上运行一些东西，你可以像这样添加它：

```
$ cat > .gitignore
venv
*.pyc
<press ctrl-d>
$ 
```

# node.js - 如何使用 express 区分 Node.js 中的 HTTP 请求和 XML HTTP 请求？

> ID：15038474
> 
> 赞同：0
> 
> 时间：2013-02-23T08:01:50.867
> 
> 标签：node.js, http, express, xmlhttprequest

在我的代码中，出于某种原因，我想区分普通的 HTTP 请求和 AJAX 请求（即 XML HTTP 请求）。

经过大量搜索后，我尝试使用`req.isXMLHttpRequest`，但是对于这两种类型的 Request 它都会返回`undefined`。

现在我通过在每个 HTTP 请求中添加一个标志来处理它，如`isAjax`真*或*假*值*。

**问题：**最好的建议方法是什么？

1.  `isAJAX`使用向每个 XML HTTP 请求添加标志 ( ) （使用*true*或*false*）

2.  找出并修复`req.isXMLHttpRequest`相关问题。

`req.isXMLHttpRequest`如果有人告诉我，为什么要返回，将会有很大帮助`undefined`？

高级感谢

**注意：**我使用的是*Node.JS 版本 0.8.20*和*Express 版本 3.1.0*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:12:12.997

你可以试试这个。

```
req.xhr 
```

如果它是 XMLHttpRequest 与否，这将返回 true 或 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T14:29:02.100

跟随@scartag 回答。如果您控制发送请求的人（例如，它是您的客户端代码），那么您只需设置 HTTP 标头`X-Requested-With: xmlhttprequest`或更改正文/url 以标记 xhr 请求。

如果您不控制发送您无法依赖的请求的人，`req.xhr`那么您的选择取决于您的用例。例如，如果您只想使用适合请求的内容进行响应，那么`res.format(_)`可能比`req.xhr`（这取决于您的客户，但您可能会假设客户不会请求他们无法处理的格式）更有用。

# apache - mod_rewrite 漂亮的 URL 不会留下

> ID：15038484
> 
> 赞同：0
> 
> 时间：2013-02-23T08:03:24.137
> 
> 标签：apache, mod-rewrite

我需要我的网址

> /crescenty/**名字**

重定向到

> /crescenty/profile.php?player=**名称**

我用过这个 mod_rewrite 代码

```
RewriteEngine on
RewriteRule ^([a-z]+)$ /crescenty/$1/ [NC,R]
RewriteRule ^([a-z]+)/$ /crescenty/profile.php?player=$1 [NC,R] 
```

但是有一个小问题，URL没有停留，它一直回到

> /crescenty/profile.php?player=**名称**

我尝试使用上面的 mod_rewrite 代码，最后一行的标志为 [NC,L]，URL 保持我想要的方式

> /crescenty/**名字**

但页面没有正确显示（css 似乎不适用）

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:25:43.520

这可能是因为您的链接被定义为相对于*当前目录*。

当您重写 URL 时，它比原始 URL 低一级（/crescenty/ vs **/crescenty/name/**）。这意味着将相对于第二个目录级别查找资源，这当然不会起作用。

通过在链接中添加**前导斜杠**，将资源 URL 更改为使用相对于*Web 根目录*的 URL 。

 **例如将 <img href=" *images/mying.jpg* " /> 更改为 <img href=" **/images/mying.jpg** " /> （注意前导斜杠）。**

# php - 如何防止网站显示退出确认（该网站在您的网站弹出窗口中打开）？

> ID：15038485
> 
> 赞同：0
> 
> 时间：2013-02-23T08:03:24.490
> 
> 标签：php, javascript, popup

我有一个基于 php 的网站，我正在制作一个要在弹出窗口中打开的网站，我需要在特定时间后在同一个弹出窗口中打开另一个网站（它是一种网站旋转器）。

大多数网站都可以正常工作，但是当打开一个有退出确认的网站时，旋转器会在一个对话框打开时停止，说你确定要离开这个页面吗？

有什么方法可以让这些网站正常工作并重定向而不打开任何确认对话框？

注意：网站（正在轮换）所有者故意这样做是为了吸引更多访问者。他们在利用我的旋转器！旋转器中的网站数量如此之多，以至于我无法手动删除所有这些网站，因为检查每个网站并手动删除不良网站需要很长时间 + 用户每天都会将更多网站添加到旋转器中。

我们可以做的第二件事可能是制作一个确认页面，检查每个网站是否有退出确认对话框，只有在没有退出确认对话框时才通过。只有在通过确认页面后，该网站才会被添加到旋转器中。

那么任何人都可以分享一个检查退出确认对话框的脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:23:09.810

你可以写一个脚本。例如，使用 selenium，您可以在那里检查是否打开了弹出窗口。如果它打开，请单击它，记录页面的 id 并继续。每隔几毫秒就有一个新站点。

您可以使用 EC2 或其他一些云服务来托管您的检查器。您可以同时运行多个实例，并在第一次运行后向所有作弊者发送电子邮件，如果他们不删除它，他们将被淘汰。

这也可以自动化:-)

# html - 重置具有一定不透明度的元素的子元素的不透明度

> ID：15038488
> 
> 赞同：0
> 
> 时间：2013-02-23T08:03:30.933
> 
> 标签：html, css

我不希望子元素继承父不透明度。[在此处输入链接描述][1]

[1]： http : [//jsfiddle.net/xALAW/jsfiddle](http://jsfiddle.net/xALAW/)

```
<html>

    <head></head>
    <body>

        <div class='hasopacity'>
            This is the text with some opacity
            <div class='noopacity'>
                This is the text with no opacity 
            </div>
        </div>
</body> 
```

css

```
.hasopacity{opacity:0.5}
.noopacity{opacity:1} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:10:06.310

子元素必须继承父元素的不透明度设置。

我知道的唯一解决方案是让通常是子元素的元素实际上是一个兄弟元素，它的位置看起来像是一个子元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:08:21.497

你不能，这是因为你在做透明的东西，如果里面有别的东西，它也是透明的！

无论如何，这是一个重复的问题：[我不想在 CSS 中从父级继承子级不透明度](https://stackoverflow.com/questions/5770341/i-do-not-want-to-inherit-the-child-opacity-from-the-parent-in-css)

# vbscript - QTP 中的对象必需错误

> ID：15038490
> 
> 赞同：1
> 
> 时间：2013-02-23T08:03:47.300
> 
> 标签：vbscript, qtp

我正在尝试单击 Web 表（Emp 索引）的单元格（2,3）中的第三个链接

设置 EditLink = Browser("Browser").Page("Page").WebTable("Emp Index").ChildItem(2,3,"Link",2) EditLink.Click

运行脚本 QTP 时显示“需要对象：Line(2) EditLink.click”错误。任何机构都可以请你帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:37:11.200

当单元格存在并且存在类型为链接的子对象时返回此错误，但不包含此索引 (3)。尝试通过以下方式确认是否存在索引为 0 的链接：

```
Set EditLink = Browser("Browser").Page("Page").WebTable("Emp Index").ChildItem(2,3,"Link",0) 
MsgBox EditLink.Exist(0) 
```

要查看该链接在页面上的位置，您可以使用`EditLink.Highlight`
From this point you can start debug 来查看索引为 1、2 和最后为 3 的链接是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:38:00.907

尝试使用函数单击 webtable 中的链接。

检查此[链接](http://www.nucleation.in/qtp-function-click-link-web-table/ "用于单击 Web 表中的链接的 QTP 函数")。

# macos - Applescript 为所有窗口设置窗口边界

> ID：15038492
> 
> 赞同：1
> 
> 时间：2013-02-23T08:03:59.780
> 
> 标签：macos, applescript

我修改了我不久前找到的一些 AppleScript，以某种方式定位最前面的窗口，以便屏幕/停靠/菜单边缘的每一侧都有大约 10px 的边距：

```
set front_app to (path to frontmost application as Unicode text)

tell application "Finder"
    set _b to bounds of window of desktop
    set scrn_width to item 3 of _b
    set scrn_height to item 4 of _b
end tell

tell application front_app
    activate
    set bounds of window 1 to {10, 35, (scrnWidth - 10), (scrnHeight - 80)}
end tell 
```

问题是我必须为每个窗口单独做。我想只运行一次并让它在每个应用程序的所有窗口上运行。

我尝试修改了大约 5 个不同的脚本，但只是得到了错误。这是我所拥有的：

```
tell application "System Events"
    tell application "Finder"
        set _b to bounds of window of desktop
        set scrn_width to item 3 of _b
        set scrn_height to item 4 of _b
    end tell
    set _windows to get windows of (application processes whose visible is true)
    repeat with this_window in (items of _windows)
        set bounds of this_window to {10, 35, (scrn_width - 10), (scrn_height - 80)}
    end repeat
end tell 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T10:45:30.913

经过一些工作，这就是我想出的。

```
tell application "System Events"
    set frontmostApps to every process whose frontmost is true
    if ((count of frontmostApps) = 0) then return
    set frontmostAppAlias to application file of (item 1 of frontmostApps)
end tell

tell application "Finder" to set desktopBounds to bounds of window of desktop

set screenWidth to item 3 of desktopBounds
set screenHeight to item 4 of desktopBounds

tell application (frontmostAppAlias as string)
    set resizableAppWindows to every window whose resizable is true
    repeat with i from 1 to (count of resizableAppWindows)
        set appWindow to item i of resizableAppWindows
        set bounds of appWindow to {10, 35, (screenWidth - 10), (screenHeight - 80)}
    end repeat
end tell 
```

我最初开始尝试在一个`tell app "System Events"`块内做所有事情，但发现 es 的`window`s`application process`似乎不允许与普通`window`s 相同的调用，即使从脚本定义来看它们应该如此。这导致`tell`直接阻止应用程序本身。

您可能希望将其包装`set bounds`在一个`try`块中，因为可能有一些应用程序的可调整大小的窗口设置了最大大小限制，这可能会导致错误。

# iphone - 在 ARC 上使用 @property

> ID：15038504
> 
> 赞同：0
> 
> 时间：2013-02-23T08:06:04.767
> 
> 标签：iphone, ios, properties, automatic-ref-counting

```
// .h
@property ( strong, nonatomic ) NSString *note;

// .m
@synthesize note = _note;

- ( id ) initWithNote: ( NSString * )note {

    self = [ super init ];
    if ( self ) {
        _note = note;   // _note is just a instance variable.
        self.note = note;   // 'self.note = note;' is using setter method.
        return self;
    }
    return nil;
} 
```

`@property ( strong, nonatomic ) NSString *note;`影响 setter 和 getter 方法。默认情况下，变量在 ARC 上是 __strong 类型。

`_note = note;`和`self.note = note;`then有什么区别？而不是`strong`,`retain`在非 ARC 上在这种情况下有所作为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:12:58.970

如果我正确理解了这个问题...

如果要覆盖 setter，则要分配 to`_propertyName`而不是`self.propertyName`，以避免无限递归：

```
- (void)setNote:(NSString *)note
{
    _note = note;
    // self.note = note; // <-- doing this instead would freeze, and possibly crash your app
} 
```

如果你覆盖吸气剂，同样的事情。在其他情况下，您可以使用两者中的任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:13:46.693

如果你使用它们，它们现在实际上是相同的`(nonatomic)`。`(atomic)`但是，如果您使用（默认设置）或更可能**定义自定义设置器**，它们会有所不同：

```
- (void)setNote:(NSString *)note {
    // Do something fancier than this
    _note = note;
}
self.note = note; // use the custom setter 
```

相对

```
_note = note; // set the variable directly 
```

# c# - 在 n 树实现中需要帮助

> ID：15038506
> 
> 赞同：3
> 
> 时间：2013-02-23T08:06:28.870
> 
> 标签：c#, recursion, tree, mutation

我正在尝试使用 c# 实现 n 元类型的数据结构。树将有一个根节点和子数组，并且子数组中的每个子节点也将具有一组子节点。我想要做的是每当我们添加子数组时，应该将其添加到叶节点中存在的所有子节点中。我的代码是

```
 public void addChildren(Node root, Node[] children)
        {

             if (root.children == null)
            {
                root.children = children;

            }
            else
            {
                for (int i = 0; i < root.children.Length; i++)
                {

                    addChildren(root.children[i], children);
                }
            }

        } 
```

> **主程序**

```
 Dictionary<String, String[]> measurelist = new Dictionary<string, string[]>();
        String[] values = { "y", "n" };
        measurelist.Add("m1", values);
        measurelist.Add("m2", values);
        measurelist.Add("m3", values);           
        foreach (KeyValuePair<String, String[]> entry in measurelist)
        {
            Node[] children = new Node[entry.Value.Length];
           for(int i = 0; i < entry.Value.Length ;i ++)
            {
                Node child = new Node(entry.Key+":"+entry.Value[i]);
                children[i] = child;
            }

            clustertree.addChildren(clustertree.root, children);               
        } 
```

但是这段代码会导致无限递归调用。我试过但无法弄清楚出了什么问题？请帮助我找出我做错了什么。 [我已经描述了图像中的问题](http://i.stack.imgur.com/HVtKN.png)

> **解决方案：** 在您的帮助下，我找到了解决此问题的方法。如果我解释根本原因，我认为这将对可能面临同样问题的其他人有所帮助。当我传递子节点数组时，问题的主要原因是作为引用而不是值传递。我已经稍微更改了我的代码，以确保相同的子数组引用不会传递给下一个递归调用。
> 
> **这是我更正的代码**：

```
 public void addChildren(Node root, Node[] children)
        {

             if (root.children == null)
            {

                root.children = children;

            }
            else
            {
                for (int i = 0; i < root.children.Length; i++)
                {                       
                    Node[] children1 = new Node[children.Length];
          //I am creating a new array and nodes and passing the newly created array to                                       the next recursive call
                    for (int j = 0; j < children.Length; j++)
                    {
                        Node node = new Node(children[j].key);                           
                        node.children = children[j].children;
                        children1[j] = node;
                    }
                    addChildren(root.children[i], children1);
                }
            }

        } 
```

再次感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:13:01.523

您可能应该将您的内部`node[]`变成 a`list<node>`而不是数组。

然后使用此代码

```
 public void addChildren(Node root, Node[] children)
        {

            if (root.children == null)
            {
                root.children = new List<Node>();

            }

            root.children.AddRange(children);

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:43:40.593

您没有像图中所示那样创建树，而是在执行如下操作：

```
 R
      / \
     /   \
    a1   a2 (children of this are actually b1 and b2)
   / \   
  /   \
 b1   b2 
```

当您添加`b1, b2`作为您的子项时，`a2`您将引用`b1 and b2`已添加到`a1`.

在下一次迭代中，当您添加时`c1 and c2`，根据您的算法，您首先引用`c1 and c2`两个`b1 and b2`via，`a1`但您的函数不会在这里停止，它会再次进入`b1 and b2`这次 via `a2`，但由于`c1 and c2`已经添加为 的子级`b1 and b2`，因此算法会变得混乱并进入永远循环。

要解决这个问题：

找到树的最后一层，但直到最后一层才使用递归路径，只使用一个孩子。

```
public boolean addChildren(Node root, Node[] children)
{

    if (root.children == null)
    {
        root.children = children;
        return true;
    }
    else
    {
        for (int i = 0; i < root.children.Length; i++)
        {
            /* if it returns true then it was last level 
                   else break */
            if(!addChildren(root.children[i], children)) 
            {
                /* this is non-last level break */
                break;
            }
        }
    }
    return false;
} 
```

# python - 南迁移添加的模型未显示在生产管理站点中

> ID：15038509
> 
> 赞同：1
> 
> 时间：2013-02-23T08:06:45.943
> 
> 标签：python, django, uwsgi

我正在尝试通过以下步骤将新模型添加到我的生产站点上的预先存在的应用程序中：

1.  添加模型

2.  `admin.site.register(<ModelName>)`在应用程序中添加`admin.py`

3.  `./manage.py schemamigration <appname> --auto`

4.  `./manage.py migrate <appname>`

    上述步骤适用于我的开发机器（使用 SQLite3），所以我继续

5.  `models.py`将代码（`admin.py`和迁移文件）上传到生产机器

6.  在生产机器上重复第 4 步（使用 MySQL）

7.  `service uwsgi restart`

迁移工作。我可以在数据库中看到新表，并且可以正确使用模型（`./manage.py shell`在生产机器上）。唯一的问题是模型未显示在管理站点中。我试过了：

*   开发站点 + 开发数据库 => 有效。
*   生产站点 + 生产数据库 => 在管理站点中看不到模型。
*   开发站点 + 生产数据库 => 在管理站点中看不到模型。

有什么我错过的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:45:10.413

经过一番`pdb`折腾，我终于找到了问题所在。这是关于权限的。我在我的开发数据库和生产数据库上设置了不同的权限——我是使用开发数据库的超级用户，但无论出于何种原因，我只是生产数据库的一名员工。我添加的新模型的权限设置为仅对超级用户可见，所以显然我在管理页面上看不到它。在我提升自己之后一切正常。

# php - 如何获取在 Wordpress 中按类别过滤的自定义帖子类型的永久链接？

> ID：15038510
> 
> 赞同：0
> 
> 时间：2013-02-23T08:06:50.210
> 
> 标签：php, wordpress

我有一个像“文章”这样的自定义帖子类型，并使用“摇滚、流行、爵士乐等”等内置类别来对这篇文章进行分类。我有一个“文章”档案的永久链接，也有指向和类别档案页面的永久链接，如爵士档案页面。

但我也想永久链接到按指定类别过滤的文章。我的存档页面也处理这种情况，但我无法获得此页面的永久链接！

当我在浏览器'index.php?post-type=articles&category-name=jazz' 中键入这个地址时，这个 url 重定向到 /category/jazz/?post-type=articles 但我希望这是以这种格式出现的 /articles/category /爵士乐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:42:07.180

为了实现这一点，您首先需要使用自定义帖子类型注册您的类别，然后您可以分配类别并获得所需的结果。用于`register_taxonomy_for_object_type();`将类别分类分配给您的自定义帖子类型。你可以在这里得到一个例子：http: [//codex.wordpress.org/Function_Reference/register_taxonomy_for_object_type](http://codex.wordpress.org/Function_Reference/register_taxonomy_for_object_type)

# android - 将字符串值转换为日期格式

> ID：15038512
> 
> 赞同：1
> 
> 时间：2013-02-23T08:07:43.653
> 
> 标签：android, string, date-format

我想将字符串值转换为日期格式我有这样的字符串

```
String date = 1360004238; 
```

我能得到这样的`Fri Jan 16 23:43:30 GMT+05:30 1970`

我如何将其转换为日期格式（例如“2013 年 2 月 23 日”）

谁能帮帮我。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:09:44.127

像这样的东西：

```
Date d = new Date(date);
SimpleDateFormat format = new SimpleDateFormat("dd MMM yyyy");
format.format(d); 
```

哪里`date`是 a `long`，不是 a `String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:10:13.680

你可以试试这个：

```
String date = 1360004238;
System.out.println(new Date(date).toLocaleString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:13:54.417

如果字符串包含一个纪元时间戳，您可以执行以下操作：

```
String epoch = "number";
Date date = new Date(Long.parseLong(epoch)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T09:59:55.557

你可以试试这样的东西..

```
DateFormat formatter = new SimpleDateFormat("E,MMM dd,yyyy h:mmaa");   

                        String today = formatter.format(newdate); 
```

有关更多信息，您可以查看此[链接](http://developer.android.com/reference/android/text/format/DateFormat.html)

# android - 如何在 Android 中使用 Flickr 身份验证？

> ID：15038513
> 
> 赞同：3
> 
> 时间：2013-02-23T08:07:54.600
> 
> 标签：android, flickr

我对 Android 很陌生，想构建一个允许用户登录到他们的 Flickr 帐户并允许他们上传照片的应用程序。我看过很多文章，看过 FlickrjAndroid 但无法理解如何入门。我还阅读了 Flickr Api 文档。请指导我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:17:52.813

`flickrj-androi`是一个很好的选择，但是您必须参考他们的[API 文档](http://www.flickr.com/services/api/)以使事情变得更容易，还请务必查看[http://www.flickr.com/services/api/upload.api.html](http://www.flickr.com/services/api/upload.api.html)`Photo Upload API`部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:23:17.943

这可能是Flickr Api for Android 上最好[的入门教程之一。](http://android-er.blogspot.in/2011/07/access-flickr-api-using-httpclient.html)看看吧，应该会有帮助的。

# playframework-2.0 - Play framework 2.0 模板问题

> ID：15038523
> 
> 赞同：0
> 
> 时间：2013-02-23T08:08:59.270
> 
> 标签：playframework-2.0, scala-template

```
@(myForm: Form[FormObject]) 

@import helper._
@import helper.twitterBootstrap._

@main("Test") {
  @form(routes.Application.save) {
    @input(myForm("number"), '_label -> "Number") { (id, name, value, args) =>
      @if(value.isEmpty) {
        <input type="text" name="@name" id="@id" value="@value">
      } else {
        <input type="text" name="@name" id="@id" value="@value" disabled>
      }
    }
    @input(myForm("startDate"), '_label -> "Start Date") { (id, name, value, args) =>
      <div class="input-append date datepicker" data-date="@value" data-date-format="dd-mm-yyyy">
        <input class="span2" size="16" type="text" value="@value"><span class="add-on"><i class="icon-calendar"></i></span>
      </div>
    }
    <button type="submit" class="btn" title="Save"><i class="icon-ok"></i></button>
  }
}

public class FormObject {
public String number;
public String startDate;
} 
```

1.  第一个问题是，当字段“数字”的值不为空（因此显示为禁用）时，不会绑定回 FormObject，所以我失去了这个值。

2.  第二个问题是字段“startDate”未绑定到 FormObject。

    我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:18:00.103

第一：这是一个常见的错误 -`disabled`属性甚至禁止发送该字段，因此它甚至无法播放请求时间。改为使用`readonly`。（[更多关于`disabled`vs`readonly`](https://stackoverflow.com/a/7730719/1066240)）

```
 @input(myForm("number"), '_label -> "Number") { (id, name, value, args) =>
       <input type="text" name="@name" id="@id" value="@value" @if(!value.isEmpty){ readonly="readonly" }>
    } 
```

也许您需要使用一些 CSS/JS 来强调该字段是只读的，否则用户通常会认为它是一个错误（*我无法编辑该字段并且不知道为什么*）

第二：如果它真的是`String`现场 - 我不知道原因。如果`Date`是格式改变导致的问题，Play 无法自动解析。在保存/更新之前，您还需要使用控制器中的给定格式对其进行解析。

# jquery - 完成图像后的滑块过渡

> ID：15038525
> 
> 赞同：1
> 
> 时间：2013-02-23T08:09:13.897
> 
> 标签：jquery, slider, supersized

我正在使用超大滑块..

我面临一个问题...

如果图像尺寸很大并且加载需要时间，那么在完全加载之前，滑块会被更改为新图像..

我想添加一个功能，比如当一个图像完全下载时，然后滑块将传输..

有人可以帮我解决这类问题吗？

```
EDIT 
```

当上一张图片完全下载时，我想要幻灯片中转。

假设我有 3 张图片 a.jpg、b.jpg、c.jpg

a.jpg 转换为 b.jpg，

b.jpg 是一个非常大的文件.. 除非 b.jpg 完全下载，否则它不会被转换为 c.jpg ......

所以过渡可能会根据每个图像停止，直到图像完全下载......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:41:20.143

您想预加载图像。

此函数将加载图像并将它们附加到容器中：

```
function preloadImages() {
    for(var i = 0; i < arguments.length; i++) {
        $('<img />').attr('src', arguments[i]).appendTo('#myImages');
    }
} 
```

在文档就绪时调用该函数：

```
$(function() {
    preloadImages('a.jpg', 'b.jpg');
    $('#myImages').show();
}); 
```

在您的 HTML 中有：

```
<div id="myImages" style="display:none"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:22:30.063

`document`完全加载后初始化滑块。

```
$(window).load(function(){
   //slider initialization.
}); 
```

现在在 html 中，如下所示。

```
<div id="slider">
    <ul>
        <li><img src="loading.jpg" alt="" id="slider_loading"/></li>
        <li><img src="1.jpg" alt="" /></li>
        <li><img src="2.jpg" alt="" /></li>
        <li><img src="3.jpg" alt="" /></li>
    </ul>
</div> 
```

`slider div`现在为内部女巫制作 css`dislpay:none;`为所有图像添加规则。

**CSS**

```
#slider ul li img
{
    display:none;
}

#slider_loading
{
    display:block !important;
} 
```

现在在`slider initialization`代码**删除加载图像**之前，如下所示。

```
$(window).load(function()
{
    $("#slider_loading").remove();
   //slider initialization.
}); 
```

你就完成了。

# c# - 使用 IsCancellationRequested 属性？

> ID：15038529
> 
> 赞同：4
> 
> 时间：2013-02-23T08:09:56.607
> 
> 标签：c#, parallel-processing, task-parallel-library

`CancellationToken`的属性有什么用`IsCancellationRequested`？考虑下面的代码

```
static void Main(string[] args)
{
    CancellationTokenSource tokenSource = new CancellationTokenSource();
    var token = tokenSource.Token;
    Console.WriteLine("Press Enter to Start.\nAgain Press enter to finish.");
    Console.ReadLine();
    Task t = new Task(() =>
    {
        int i = 0;
        while (true)
        {
            if (token.IsCancellationRequested)
            {
                Console.WriteLine("Task Cancel requested");
                break;
            }
            Console.WriteLine(i++);
        }
    }, token);

    t.Start();

    // wait for input before exiting
    Console.ReadLine();
    tokenSource.Cancel();
    if(t.Status==TaskStatus.Canceled)
        Console.WriteLine("Task was cancelled");
    else
        Console.WriteLine("Task completed");
} 
```

我发现在极少数情况下，`if`块内的代码不会运行。如果是这样，轮询以查看是否请求取消有什么用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T10:46:17.537

您的代码的问题是您不等待`Task`完成。所以，可能发生的事情是这样的：

1.  你打电话`Cancel()`。
2.  你检查`Status`，它返回`Running`。
3.  `Task`令人困惑的是，当仍在运行时，您会写“任务已完成” 。
4.  `Main()`完成，应用程序退出。
5.  （此时，`IsCancellationRequested`将从后台线程进行检查。但这永远不会发生，因为应用程序已经退出。）

要解决此问题，`t.Wait()`请在调用后添加`Cancel()`。

但这仍然不能完全修复您的程序。你需要告诉`Task`它它被取消了。你通过抛出`OperationCanceledException`包含`CancellationToken`（通常的方法是调用）来做到这一点`ThrowIfCancellationRequested()`。

一个问题是取消`Wait()`的 ing`Task`会引发异常，因此您必须抓住它。

# javascript - 如何使用 jquery 或 javascript 在元素中模拟 Ctrl+A 的行为？

> ID：15038544
> 
> 赞同：0
> 
> 时间：2013-02-23T08:13:03.650
> 
> 标签：javascript, jquery, keyboard-shortcuts, selectall

当用户执行特定事件时，我还想模拟他们在 textarea 元素中按下 Ctrl+A。我知道插入符号的定位和选择所有文本作为一个单独的问题，但我不希望这样。我希望能够通过在该元素上模拟 Ctrl+A（使用跨浏览器键码）来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:16:15.853

您可以使用

```
$("#textareaid").select(); 
```

Control+A 的目标是一个选择。据我所知，你不能伪造输入。但你可以做一些动作……

# linux-device-driver - 英特尔极速显卡2驱动安装方法

> ID：15038554
> 
> 赞同：0
> 
> 时间：2013-02-23T08:14:12.960
> 
> 标签：linux-device-driver, ubuntu-11.10

我在 Intel Panel PC 上安装了 Linux。骑师无法检测到任何驱动程序。我不知道如何先安装我的图形驱动程序，以便我能够安装触摸屏。

以下是一些信息`dmesg`：

dmesg | grep vga

```
[    0.254052] vgaarb: device added: PCI:0000:00:02.0,decodes=io+mem,owns=io+mem,locks=none
[    0.254082] vgaarb: loaded
[    0.254088] vgaarb: bridge control possible 0000:00:02.0
[   13.506146] vgaarb: device changed decodes: PCI:0000:00:02.0,olddecodes=io+mem,decodes=io+mem:owns=io+mem

# dmesg | grep -i controller

[    0.411625] pciehp: PCI Express Hot Plug Controller Driver version: 0.4
[    1.109132] ehci_hcd: USB 2.0 'Enhanced' Host Controller (EHCI) Driver
[    1.109226] ehci_hcd 0000:00:1d.7: EHCI Host Controller
[    1.128532] ohci_hcd: USB 1.1 'Open' Host Controller (OHCI) Driver
[    1.128569] uhci_hcd: USB Universal Host Controller Interface driver
[    1.128674] uhci_hcd 0000:00:1d.0: UHCI Host Controller
[    1.129311] uhci_hcd 0000:00:1d.1: UHCI Host Controller
[    1.129930] uhci_hcd 0000:00:1d.2: UHCI Host Controller
[    1.130580] uhci_hcd 0000:00:1d.3: UHCI Host Controller
[    1.131337] i8042: PNP: PS/2 Controller [PNP0303:PS2K] at 0x60,0x64 irq 1 
```

当我搜索更多时，我认为图形驱动程序是默认安装的，但我不知道如何在我的系统中检查它的可用性。声音驱动程序安装正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:24:41.580

您可以检查内核中驱动程序的状态，如果它使用命令“lsmod”实现为“内核对象”= .ko 文件。如果它没有加载到内核中，您可以使用命令“insmod mod_name_with_path”手动加载它。您还可以使用命令“echo mod_name_with_path >/proc/sys/kernel/modprobe”设置在系统启动时自动加载驱动程序。有关于 lkm（内核对象）的有用信息：[http ://www.tldp.org/HOWTO/html_single/Module-HOWTO/](http://www.tldp.org/HOWTO/html_single/Module-HOWTO/)

# vb.net - 添加小数点后位数较多的数字

> ID：15038555
> 
> 赞同：1
> 
> 时间：2013-02-23T08:14:16.117
> 
> 标签：vb.net, numbers, double, decimal-point

如何在 vb.net 中准确地将两个超过 18 位的十进制数字（例如：“0.12345678901234567345342343”和“-0.540811569342790340234”）添加到所有小数位。我尝试使用双精度数据类型，但它确实舍入了小数点后的 18 位数字。那么我怎样才能做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:36:04.090

您可以改用`Decimal`数据类型。它为您提供[28-29 位有效数字](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.71%29.aspx)的精度- 应该足以满足大多数需求。

# cloud-foundry - vmc推送nodeJS报告应用程序启动失败

> ID：15038557
> 
> 赞同：0
> 
> 时间：2013-02-23T08:14:32.733
> 
> 标签：cloud-foundry

我是第一次学习 CloudFoundry，在他们的 hello-world nodeJS 应用程序中，我得到“应用程序无法启动”。信息。输出如下。我尝试使用不同的名称并得到相同的结果。如果我尝试浏览此 url，我会收到 404 响应。

我正在使用 Mac OS X 10.8.2

MyMac:hello-node ido$ vmc push Name> ido-hello-node

实例> 1

1：节点 2：其他框架>节点

1：节点 2：node06 3：node08 4：其他运行时>

运行时>节点

1：64M 2：128M 3：256M 4：512M 5：1G 内存限制>64M

创建 ido-hello-node... 好的

1：ido-hello-node.cloudfoundry.com 2：无 URL> ido-hello-node.cloudfoundry.com

正在更新 ido-hello-node... 好的

为应用程序创建服务？> n

保存配置？> n

上传 ido-hello-node... OK 开始 ido-hello-node... OK 检查 ido-hello-node... **GAVE UP**

**应用程序无法启动。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:30:07.260

有时您可以使用“vmc logs”命令找出您的应用程序出了什么问题，该命令将报告服务器上发生的情况。

你能分享代码吗？

您是否能够在本地成功运行您的应用程序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:52:57.223

你能告诉我你使用的是什么版本的vmc，node吗？你也安装了 npm 吗？你能得到vmc日志吗？

也可以在这里使用更新的教程：http: [//cloudfoundry.github.com/docs/using/deploying-apps/javascript/](http://cloudfoundry.github.com/docs/using/deploying-apps/javascript/)

谢谢，

*   希特什

# javascript - 用于 appjs 应用程序的飞溅

> ID：15038560
> 
> 赞同：1
> 
> 时间：2013-02-23T08:15:00.127
> 
> 标签：javascript, appjs

是否可以在打开 appjs 应用程序之前显示启动画面？我需要在打开appjs应用程序2或3秒之前显示图像并且需要关闭然后需要打开应用程序窗口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:50:05.173

可以打开多个窗口：-

```
var splashWindow = app.createWindow({ 
   width  : 300,
   height : 300,
   icons  : __dirname + '/content/icons',
   resizable: false, 
   url: 'http://appjs/splash.htm'
}); 
```

所以也许你可以打开第一个窗口，然后连接到服务器或预加载内容，一旦你准备好了，你就可以打开主应用程序窗口：

```
var window = app.createWindow({ ... }); 
```

/西蒙

# android - 如何在 android 的活动中加载图像。

> ID：15038565
> 
> 赞同：0
> 
> 时间：2013-02-23T08:15:50.213
> 
> 标签：android

此代码将图像保存在“MyApp”中。但是如何在其他活动中加载图像

```
final EditText txtRegid = (EditText)this.findViewById(R.id.regid);
     String RegID = txtRegid.getText().toString();

     Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        File mImageFile = new File(Environment.getExternalStorageDirectory()+File.separator+"MyApp",  
                "PIC"+RegID+".jpg");
      String mSelectedImagePath = mImageFile.getAbsolutePath();
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(mImageFile));
        startActivityForResult(intent, TAKE_PICTURE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:31:44.783

好吧，如果您已将 BitMap 变量定义为 MyApp 类的数据成员，您可以轻松地在其他活动中获取它，方法是使用 a`getter() function`获取存储在 MyApp 中的 BitMap 图像。

或者，您可以将图像与 Intent 一起传递，将其编码为字符串格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:43:24.297

如果你知道文件的绝对路径。您可以使用`BitmapFactory.decodeFile(filePath, opts)`方法来获取位图。然后使用 ImageView 的方法 setImageBitmap() 来显示它。

# iphone - “没有这样的表：游戏。例程适用于 iPhone 5.1 模拟器，但不适用于 iPhone 设备

> ID：15038567
> 
> 赞同：1
> 
> 时间：2013-02-23T08:16:16.807
> 
> 标签：iphone

我在加载视图时遇到问题（请参阅下面的代码）。基本上，我从表中检索数据并将其显示在 iPhone 屏幕上。

*iPhone 5.1 模拟器*有效，但是，我在设备上收到消息

> “准备语句的问题：没有这样的表：游戏”

谁能给我一点方向？

提前感谢您的时间和评论。

这是代码：

```
-(NSMutableArray *) gameList{
 thegames = [[NSMutableArray alloc] initWithCapacity:5];
 @try {

    NSDate* date = [NSDate date];
    NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MM/dd/yyyy"];
    [formatter setDateFormat:@"MMdd"];
    NSString* str1 = [formatter stringFromDate:date];
    [toDaysDate setText:str1];

    NSFileManager *fileMgr = [NSFileManager defaultManager];

        NSString *docsDir;
        NSArray *dirPaths;

       dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
       docsDir = [dirPaths objectAtIndex:0];

    NSString *dbPath = [[NSString alloc]initWithString: [docsDir stringByAppendingPathComponent:@"sportretortdatab2.sqlite"]];        

    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }
    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
    {
        NSLog(@"An error has occured: %s", sqlite3_errmsg(db));
    }

    const char* GamesSQLString(NSString* str1);

    NSString* sql= [NSString stringWithFormat:@"SELECT * FROM Games WHERE SeqNo= \"5\" AND GameDate < \"%@\"", str1];
    sqlite3_stmt *sqlStatement;

// THIS IS WERE I GET THE ERROR - THIS STATEMENT WORKS ON iPhone Simulator 5.1, NOT on iPhone device /////// 

if(sqlite3_prepare_v2(db, [sql cStringUsingEncoding:NSASCIIStringEncoding], -1, &sqlStatement, NULL) != SQLITE_OK)

////////////////////////////////////////////////////////////////////////////////////////

    {

         NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
    }else{
        while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
            Game * game = [[Game alloc] init];
            game.GameDate = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
            game.Completed = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,13)];
            if ([game.Completed isEqualToString:@"N"]) {
                NSString * strRR = [NSString stringWithFormat:@"%@%@", game.GameDate, @" - Open"];
                game.GameDate = strRR;}
            else {
                NSString * strRR = [NSString stringWithFormat:@"%@%@", game.GameDate, @" - Completed"];
                game.GameDate = strRR;}
            [thegames addObject:game ];
        }
    }
}
@catch (NSException *exception) {
    NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
}
@finally {
    sqlite3_close(db);
    return thegames;
}
} 
```

# c# - 如何在 Mono 中使用现有的 .NET 4.0 应用程序？

> ID：15038569
> 
> 赞同：1
> 
> 时间：2013-02-23T08:16:29.600
> 
> 标签：c#, .net, mono

我有一个功能强大的 .NET WinForms 应用程序，它使用 .NET 4.0 / C# 4.0 的所有最新功能，例如反射、动态代码生成 (CIL)、扩展、用户组件等。在 Mono 上运行这个应用程序是否容易？我目前希望在 Windows 7 上看到它的全部功能，如果一切顺利，我将尝试在 Unix 上运行它。这很容易实现吗，还是我前面有大量的“移植”工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:07:38.733

是的，只需将 .exe 和 .dll 文件复制到 Linux 机器上，然后运行应用程序：

```
mono yourapp.exe 
```

我建议您使用 mono 3.x，而不是更旧的版本。

您发现的大多数故障很可能与路径假设有关（例如使用“\”连接路径而不是使用 Path.Combine）。解决方法是使用此处定义的环境变量：[http ://www.mono-project.com/IOMap](http://www.mono-project.com/IOMap)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-23T08:23:37.950

除了 UI 之外的所有东西都应该在 Mono 上运行良好。然而，在 MonoTouch 上，代码是静态链接的，因此某些反射功能不可用（例如发出代码和虚拟泛型方法）。

# iphone - 异步加载 Web 内容

> ID：15038570
> 
> 赞同：0
> 
> 时间：2013-02-23T08:16:38.670
> 
> 标签：iphone, ios, objective-c, xcode, asynchronous

我正在尝试异步加载网页内容。我的 viewdidappear 方法中有大量网络调用，我的应用程序非常无响应。我了解内容的同步和异步加载的概念，但不知道如何判断这是否是异步完成的。下面的代码只是嵌入在我的 viewdidappear 方法中，我假设它是同步加载的。我将如何编辑它以使其异步加载？谢谢你们！

```
NSString *strURLtwo = [NSString stringWithFormat:@"http://website.com/json.php?
id=%@&lat1=%@&lon1=%@",id, lat, lon];

NSData *dataURLtwo = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURLtwo]];

NSArray *readJsonArray = [NSJSONSerialization JSONObjectWithData:dataURLtwo options:0 
error:nil];
NSDictionary *element1 = [readJsonArray objectAtIndex:0];

NSString *name = [element1 objectForKey:@"name"];
NSString *address = [element1 objectForKey:@"address"];
NSString *phone = [element1 objectForKey:@"phone"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:42:38.853

您可以使用 NSURLConnectionDelegate：

```
// Your public fetch method
-(void)fetchData
{
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://website.com/json.php?id=%@&lat1=%@&lon1=%@",id, lat, lon]];

    // Put that URL into an NSURLRequest
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

    // Create a connection that will exchange this request for data from the URL
    connection = [[NSURLConnection alloc] initWithRequest:req
                                                 delegate:self
                                         startImmediately:YES];
} 
```

实现委托方法：

```
- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
{
    // Add the incoming chunk of data to the container we are keeping
    // The data always comes in the correct order
    [jsonData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{
    // All data is downloaded. Do your stuff with the data
    NSArray *readJsonArray = [NSJSONSerialization jsonData options:0 error:nil];
    NSDictionary *element1 = [readJsonArray objectAtIndex:0];

    NSString *name = [element1 objectForKey:@"name"];
    NSString *address = [element1 objectForKey:@"address"];
    NSString *phone = [element1 objectForKey:@"phone"];

    jsonData = nil;
    connection = nil;
}

// Show AlertView if error
- (void)connection:(NSURLConnection *)conn didFailWithError:(NSError *)error
{
    connection = nil;
    jsonData = nil;
    NSString *errorString = [NSString stringWithFormat:@"Fetch failed: %@", [error     localizedDescription]];

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:errorString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alertView show];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:29:59.300

对于异步 Web 内容加载，我建议您使用[AFNetworking](https://github.com/AFNetworking/)。它将解决您未来在网络方面的许多主要难题。怎么做：

1）子类AFHTTPCLient，例如：

```
//WebClientHelper.h
#import "AFHTTPClient.h"

@interface WebClientHelper : AFHTTPClient{

}

+(WebClientHelper *)sharedClient;

@end

//WebClientHelper.m
#import "WebClientHelper.h"
#import "AFHTTPRequestOperation.h"

NSString *const gWebBaseURL = @"http://whateverBaseURL.com/";

@implementation WebClientHelper

+(WebClientHelper *)sharedClient
{
    static WebClientHelper * _sharedClient = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        _sharedClient = [[self alloc] initWithBaseURL:[NSURL URLWithString:gWebBaseURL]];
    });

    return _sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url
{
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFHTTPRequestOperation class]];
    return self;
}
@end 
```

2）异步请求您的网页内容，将此代码放在任何相关部分

```
 NSString *testNewsURL = @"http://whatever.com";
    NSURL *url = [NSURL URLWithString:testNewsURL];
    NSURLRequest *request  = [NSURLRequest requestWithURL:url];

    AFHTTPRequestOperation *operationHttp =
    [[WebClientHelper sharedClient] HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject)
     {
         NSString *szResponse = [[[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding] autorelease];
         NSLog(@"Response: %@", szResponse );

         //PUT your code here
     }
     failure:^(AFHTTPRequestOperation *operation, NSError *error)
     {
         NSLog(@"Operation Error: %@", error.localizedDescription);
     }];

    [[WebClientHelper sharedClient] enqueueHTTPRequestOperation:operationHttp]; 
```

# selenium-webdriver - Selenium RemoteWebDriver 给出 UnreachableBrowserException

> ID：15038573
> 
> 赞同：2
> 
> 时间：2013-02-23T08:17:12.710
> 
> 标签：selenium-webdriver

我正在实现 selenium 网格以及使用 RemoteWebDriver 在远程机器上启动测试的能力。

我正在调用 RemoteWebDriver 实例，如下所示：

```
private static String browserType = "firefox";

public static boolean setup(String browserType) throws Exception,MalformedURLException  {
try {
   logger.debug("Launching the browsersession");
   DesiredCapabilities capability= new DesiredCapabilities();
   capability.setBrowserName(browserType);
   webdriver1 = new RemoteWebDriver(new URL("http://www.ipaddress.com:4444/wd/hub"), capability);
}

webdriver1.get(http://url of the webserver);

} 
```

我使用 java -jar selenium-server-standalone-2.30.0.jar -role hub 启动 selenium-standalone 作为集线器

节点为 java -Dwebdriver.chrome.driver=C:/Chrome/chromedri ver.exe -jar selenium-server-standalone-2.30.0.jar -role webdriver -hub [http://www.ipaddress.com:4444 /grid/register](http://www.ipaddress.com:4444/grid/register) -port 5555 -browser browserName=chrome

集线器出现错误：INFO：连接到 tar 获取主机时捕获 I/O 异常 (java.net.SocketException)：权限被拒绝：连接

当我从 Eclipse 运行测试时，出现异常：org.openqa.selenium.remote.UnreachableBrowserException：无法启动新会话。可能的原因是远程服务器地址无效或浏览器启动失败。

有没有人遇到过这个错误？感谢任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:16:15.430

仅设置浏览器名称是不够的。您需要设置您需要使用的浏览器。例如。

```
DesiredCapabilities capability = DesiredCapabilities.firefox(); 
```

Browsername 只会帮助列出测试应该去的节点。

请参考[这里](http://code.google.com/p/selenium/wiki/Grid2)开始。

# c# - 在 Fluent NHibernate 中插入具有现有子实体的父实体

> ID：15038574
> 
> 赞同：1
> 
> 时间：2013-02-23T08:17:16.980
> 
> 标签：c#, nhibernate, fluent-nhibernate

这是一个普遍的问题，我敢肯定它很常见，但是我没有在上面找到任何东西（或者我不知道要搜索什么）。

我的项目中有以下实体：

```
public class User
{
    public virtual int      Id          { get; set; }
    public virtual string   FirstName   { get; set; }
    public virtual string   LastName    { get; set; }
    public virtual Unit     Unit        { get; set; }
}

public class Unit
{
    public virtual int      Id          { get; set;}
    public virtual string   Name        { get; set;}
} 
```

这就是我完成 Fluent NHibernate 映射的方式：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.Id).GeneratedBy.Identity().Column("UserId");
        Map(x => x.FirstName);
        Map(x => x.LastName);
        References(x => x.Unit).Column("UnitId");
    }
}

public class UnitMap : ClassMap<Unit> 
{        
    public UnitMap() 
    {
        Table("Unit");
        LazyLoad();
        Id(x => x.Id).GeneratedBy.Identity().Column("UnitId");
        Map(x => x.Name).Column("Name").Not.Nullable();
        HasMany(x => x.Users).KeyColumn("UnitId");
    }
} 
```

现在这是我的问题。如果我只有用户的单位 ID 而不是完整的单位对象，并且该单位已经存在于数据库中（先前创建），如何创建新用户？像这样的东西：

```
public class TestClass
{
    // Adding a user to a unit example
    public void SavingAUser(int unitId)
    {
        var user = new User
        {
            FirstName = "TestFirstName",
            LastName = "TestLastName",
            Unit = new Unit() // <-- I have only the Id of the unit I don't actually have a unit object here I don't want to query the DB to get the full object, I already have the Id 
        };

        var userRepository = new UserRepository();
        userRepository.Save(user);
    }
} 
```

我该怎么做这样的事情。我希望我说得通，如果没有，请告诉我，我会做更多的澄清。我也很确定这是一个非常常见的场景

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:02:30.350

您可以将代理返回到单元而不获取它。

```
 var user = new User
    {
        FirstName = "TestFirstName",
        LastName = "TestLastName",
        Unit = Session.Load<Unit>(unitId)
    } 
```

您需要公开会话对象。

# android - android中的字符串HTML

> ID：15038575
> 
> 赞同：1
> 
> 时间：2013-02-23T08:17:31.410
> 
> 标签：android, textview, html

我有一个字符串 html ，在其中我无法更改字体大小和字体类型，我可以更改字体颜色。如何在其中使用特殊的字体类型和大小。

```
<![CDATA[
       <font color=\"red\" size=20 ><b>Title</b></font>
        <p>  text </p>
        ]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:44:29.520

您可以像这样设置颜色、大小和字体：

```
<![CDATA[
  <font color='red' size='20' face='serif'>title</font>
  <p>text</p>
]]> 
```

# xml - 如何确定 XMLNode 在 XML 文档中的位置？

> ID：15038580
> 
> 赞同：2
> 
> 时间：2013-02-23T08:17:55.467
> 
> 标签：xml, delphi, xml-parsing, delphi-xe2, msxml

我`TXMLDocument`用于解析 XML 文档（从文件或内存中），并将其显示在树视图中。有什么方法可以获取`XMLNode`XML 内容中的字符位置和长度？我想突出显示原始文档中的节点文本，或者当用户在树中选择其等效节点时，或者当该节点有一些奇怪的地方时，比如空值、错误文本等。

我读[了这篇文章](http://msdn.microsoft.com/en-gb/library/e3x60fe9.aspx)，但我不确定如何在 Delphi 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:17:28.777

可以提供此信息的唯一类是 XML 解析器。我不知道 TXMLDocument 是否这样做（我找不到任何东西）。但是文件中的确切位置可能存在问题。通常，XML 文档可能是脏文件，需要一些格式才能显示。如果是这样，则问题会在格式化后更改以确定节点的位置。这样做更容易一些，因为您可以使用相同的数据 (IXMLNode) 来填充树并显示格式化的 XML。

我曾经`FormatXMLData`在 RichEdit 中显示 XML，并`DomToTree`从[这里](http://www.delphisources.ru/pages/faq/master-delphi-7/content/LiB0209.html)用来填充树。我更改`DomToTree`为保留每个节点的行索引。结果是这样的：

```
procedure TForm1.DomToTree (XmlNode: IXMLNode; TreeNode: TTreeNode;
  var CurrentLineIndex: Integer); // <--- added this parameter
var
  I: Integer;
  NewTreeNode: TTreeNode;
  NodeText: string;
  AttrNode: IXMLNode;
begin
  // skip text nodes and other special cases
  if XmlNode.NodeType <> ntElement then
    Exit;
  // add the node itself
  NodeText := XmlNode.NodeName;
  if XmlNode.IsTextElement then
    NodeText := NodeText + '=' + XmlNode.NodeValue;
  NewTreeNode := TreeView1.Items.AddChildObject(TreeNode, NodeText, Pointer(CurrentLineIndex));
  // add attributes
  for I := 0 to xmlNode.AttributeNodes.Count - 1 do
  begin
    AttrNode := xmlNode.AttributeNodes.Nodes[I];
    TreeView1.Items.AddChildObject(NewTreeNode,
      '[' + AttrNode.NodeName + '="' + AttrNode.Text + '"]', Pointer(CurrentLineIndex));
  end;
  Inc(CurrentLineIndex);
  // add each child node
  if XmlNode.HasChildNodes then
  begin
    for I := 0 to xmlNode.ChildNodes.Count - 1 do
    begin
      DomToTree (xmlNode.ChildNodes.Nodes[I], NewTreeNode, CurrentLineIndex);
    end;
    Inc(CurrentLineIndex);
  end;
end; 
```

现在我可以在 RichEdit 中突出显示选定节点的等效文本：

```
procedure TForm1.TreeView1Change(Sender: TObject; Node: TTreeNode);
var
  LineIndex, TextPos: Integer;
  Text: string;
begin
  SetSelBgColor(RichEdit1, clWhite);
  LineIndex := Integer(Node.Data);
  TextPos := RichEdit1.Perform(EM_LINEINDEX, LineIndex, 0);
  Text := Node.Text;
  Text := ReplaceStr(Text, '[', '');
  Text := ReplaceStr(Text, ']', '');

  RichEdit1.SelStart := TextPos + Pos(Text, RichEdit1.Lines[LineIndex]) - 1;
  RichEdit1.SelLength := Length(Text);
  SetSelBgColor(RichEdit1, clYellow);
end; 
```

整个事情是这样开始的：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  FirstLineIndex: Integer;
begin
  with TOpenDialog.Create(Self) do
  begin
    if Execute then
    begin
      XMLDocument1.LoadFromFile(FileName);
      Treeview1.Items.Clear;
      FirstLineIndex := 1;
      DomToTree (XMLDocument1.DocumentElement, nil, FirstLineIndex);
      TreeView1.FullExpand;
      RichEdit1.Lines.Text := FormatXMLData(XMLDocument1.XML.Text);
    end;
    Free;
  end;
end; 
```

但这并不是预期的那样有保证的代码，因为`DomToTree`和`FormatXMLData`不能一起正常工作。我用一些文件测试了代码，但很多文件都失败了。最好的方法是重写它们。但是如果你想测试代码，它可以像这样工作：

```
<?xml version="1.0" standalone="yes"?>
<DATAPACKET Version="2.0">
  <METADATA>
    <FIELDS>
      <FIELD attrname="ClientDataSet1FieldCode" fieldtype="i4"/>
      <FIELD attrname="ClientDataSet1FieldContact" fieldtype="string" WIDTH="50"/>
      <FIELD attrname="ClientDataSet1FieldNoTell" fieldtype="string" WIDTH="15"/>
    </FIELDS>
    <PARAMS CHANGE_LOG="1 0 4"/>
  </METADATA>
  <ROWDATA>
    <ROW RowState="4" ClientDataSet1FieldCode="1" ClientDataSet1FieldContact="Ali" ClientDataSet1FieldNoTell="012345678"/>
  </ROWDATA>
</DATAPACKET> 
```

# c - C 缓冲区溢出 - 为什么会有恒定数量的字节触发段错误？（Mac OS 10.8 64 位，clang）

> ID：15038582
> 
> 赞同：2
> 
> 时间：2013-02-23T08:18:12.737
> 
> 标签：c, macos, clang, buffer-overflow, lldb

我在 C 中试验缓冲区溢出，发现了一个有趣的怪癖：

对于任何给定的数组大小，似乎有一定数量的溢出字节可以在 SIGABRT 崩溃之前写入内存。例如，在下面的代码中，10 字节数组可以溢出到 26 字节，然后在 27 处崩溃。类似地，一个 20`char`秒的数组可以`char`在 41 号中止之前溢出到 40 秒。

谁能解释这是为什么？此外，SIGABRT 是否与“分段错误”相同（或由其引起）？

Mac OS 10.8 - Xcode 4.6、clang 和 lldb。谢谢！

```
#include <stdio.h>

int main(int argc, const char * argv[])
{
  char aString[ 10 ];
  char aLetter = 'a';

  printf("The size of one array slot sizeof( aString[0] ) is %zu\n", sizeof(aString[0]));
  printf("The size of one letter     sizeof( aLetter )    is %zu\n", sizeof(aLetter));

  // Overflow the aString array of chars
  // lldb claims aString is initialized with values \0 or NULL at all locations

  // Substitute i<27 and this code will crash regularly
  for (int i=0; i<26; i++) {
    aString[i]= aLetter;
  }

return 0;
} 
```

编辑 - 我在反汇编中逐步完成了它，并在 for 循环之后发现了这种保护：

```
0x100000f27:  movq   226(%rip), %rax           ; (void *)0x00007fff793f24b0: __stack_chk_guard
0x100000f2e:  movq   (%rax), %rax
0x100000f31:  movq   -8(%rbp), %rcx
0x100000f35:  cmpq   %rcx, %rax
0x100000f38:  jne    0x100000f49               ; main + 121 at main.c:26
.
.
.
0x100000f49:  callq  0x100000f4e               ; symbol stub for: __stack_chk_fail 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:37:14.910

这是由于`mac`os 上的堆栈对齐。

这不是什么大新闻，如果你用谷歌搜索过，你会找到答案：

[为什么 Mac ABI 要求 x86-32 的 16 字节堆栈对齐？](https://stackoverflow.com/questions/612443/why-does-the-mac-abi-require-16-byte-stack-alignment-for-x86-32)

* * *

很高兴看到您实际上可以在小于 16 字节的块中写入堆栈而没有副作用。

如果您多次利用它，您可能会进入一种可以放下所有恶意代码的状态，并且您可以在堆栈上跳转执行它。

# c++ - While 循环不会循环 C++

> ID：15038584
> 
> 赞同：0
> 
> 时间：2013-02-23T08:18:33.043
> 
> 标签：c++, function, loops, parameters, while-loop

我似乎无法弄清楚为什么这个 while 循环停止了循环。在我移动一些代码之前它做得很好。现在我得到了其他工作，它只是不循环。我还尝试将退出 bool 设置为 true 并尝试让它在它为 true 时循环，直到用户点击 4 退出，在这种情况下它会将其变为 false 但这不起作用。我还尝试在 showMenu 的函数中添加一个 while 循环，但这也没有用。我知道这一定很简单，我就是无法理解。gggrrrr。

```
#include "stdafx.h"
#include <iostream>
#include <iomanip> 

using namespace std; 

enum transType { SETUP=1, DEPOSITE, WITHDRAW, EXIT};

int showMenu(double balance);
double transaction(double amount, double balance, transType trans);

int menuSwitch; 
int quit=0; 

int _tmain(int argc, _TCHAR* argv[]){

    int amount=0,balance=0; 
    while(quit!=4){

    showMenu(balance);
    switch (menuSwitch){
        case DEPOSITE:
            cout<<"Enter the amount of deposit: ";
            cin>>amount;
            cout<<"Your current balance is: "<<transaction(amount,balance,DEPOSITE)<<endl<<endl;
            break;
        case WITHDRAW:
            cout<<"Enter the amount of withdraw: ";
            cin>>amount; 
            if(amount>balance){
                cout<<"*** Insufficient funds."<<"Your current balance is: "<<transaction(amount,balance,WITHDRAW)<<endl<<endl; 
            }
            else cout<<"Your current balance is: "<<transaction(amount,balance,WITHDRAW)<<endl<<endl;
            break;
        case EXIT:
            cout<<"Have a Nice Day."<<endl;
            quit=4;
            break;

    }

    return 0;
}
}
int showMenu(double balance){
    // while(quit==true){
    cout<<"Your Online Checking Account System"<<endl;
    cout<<"-------------------------------------------"<<endl; 
    cout<<"Select an option:"<<endl<<endl; 
    cout<<"  1\. Set up the account."<<endl; 
    cout<<"  2\. Deposit Funds into your Account."<<endl; 
    cout<<"  3\. Withdraw Funds out of your Account."<<endl; 
    cout<<"  4\. Exit"<<endl; 
    cout<<endl<<">>";
    cin>>menuSwitch;
    switch (menuSwitch){
        case SETUP:
            cout<<"Enter the balance: ";
            cin>>balance;
            cout<<endl<<"Your current balance is: "<<balance<<endl<<endl;
            break; 
    }

    return balance;
    // }
}
double transaction(double amount, double balance, transType trans){
    double withdraw = balance-amount;
    double deposite = balance+amount;
    if(trans=DEPOSITE){
        return deposite; 
    }
    else
        return withdraw; 

}
    //return balance; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T08:23:51.337

您在 switch 括号内返回 0，即在 while 循环内。更改它，以便在 while 循环之外返回 0。

# sql - 用于将精确的 plsql 查询输出写入 csv 文件的 bat 文件命令

> ID：15038585
> 
> 赞同：2
> 
> 时间：2013-02-23T08:18:40.910
> 
> 标签：sql, oracle, batch-file

我想从批处理文件执行查询并将查询的确切输出放入 csv 文件。喜欢：我的查询是：从双重选择 sysdate。这个的输出：

```
Sysdate
23-feb-2013 
```

因此，在 csv 中它存储为

```
sysdate
22-feb-2013 
```

数据库：Oracle 11g 操作系统：Windows 7

请帮助我实现这一目标..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:11:05.970

c:\myfolder\mybatch.bat：

```
call sqlplus oracleuser/oraclepwd@oracledb @c:\myfolder\myquery.sql 
```

c:\myfolder\myquery.sql:

```
set head off
set feed off
set pagesize 0
spool c:\myfolder\myresult.csv
prompt sysdate
select to_char(sysdate, 'dd-mon-yyyy') from dual;
spool off
set head on
set feed 6
quit 
```

# c++ - QRadioButton 未重置为未选中状态

> ID：15038591
> 
> 赞同：-1
> 
> 时间：2013-02-23T08:19:27.970
> 
> 标签：c++, qt

我有一个`QDialog`类说' *OptionsClass* '来显示我的应用程序选项的对话框。我在*Qt Designer*中设计了它，该类的对象是在`constructor`我`QMainWindow`继承的类中创建的`new`，它是`delete`d 中的`destructor`（我认为这有助于在单击按钮时快速加载对话框）。每当单击选项按钮时，我都会调用一个函数，`OptionsClass`该函数基本上在`QLabel`调用`show`() 之后编辑 & 中的一些文本。里面也有3`QRadioButton`个`QDialog`班级。当我在应用程序启动中第一次打开对话框时，未选中单选按钮。现在说我检查任何按钮并关闭对话框。现在，如果我再次打开对话框，那么仍然选中该单选按钮。我希望每次打开对话框时都应取消选中所有单选按钮。

这是单击以打开对话框的按钮的插槽：

```
void MyMainWindow::on_actionCut_triggered()
{
    optionsObj->init(n, 'x');
    optioobjn->show();
} 
```

这是函数 init 的片段：

```
void OptionsClass::init(int n, char c)
{
    //some settings to edit the QLabel
    ui->radio1->setChecked(false);
    ui->radio2->setChecked(false);
    ui->radio3->setChecked(false);
} 
```

我尝试过使用其他属性，如 SetDown()、SetChecked() 等，但它仍然不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:25:31.747

为了防止您的按钮重置，您需要做

```
radio-> setAutoExclusive(false); 
```

然后你可以取消勾选。不要忘记再次打开 autoExclusive。

AutoExclusive 通常对其他抽象按钮关闭，[但对单选按钮打开。](http://qt-project.org/doc/qt-4.8/qabstractbutton.html#autoExclusive-prop)

# c# - 如何在特定条件下获取数据表的唯一性

> ID：15038599
> 
> 赞同：-1
> 
> 时间：2013-02-23T08:21:28.640
> 
> 标签：c#, asp.net, linq, datatable, unique

如果我有这样的数据表：

```
pic_id  selected

  1        1
  1        1
  1        0
  2        0
  2        0
  2        0 
```

* * *

我想获得独特的（pic_id）

但在至少一张图片（具有相同id）的`selected`值=1的情况下

对于前面的例子

我想要这样的结果：

```
 1    1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:24:27.310

```
var list = dataTable.Select("selected = 1");

var uniqueList = list.Distinct().ToList(); 
```

# c# - 如何安全地结束 NetworkStream.Read() ？（在 C# 或 VB.net 中）

> ID：15038612
> 
> 赞同：1
> 
> 时间：2013-02-23T08:23:19.293
> 
> 标签：c#, sockets, tcpclient, networkstream

我写了一个类，试图读取服务器发送的字节数据，当我的应用程序结束时，我也希望循环结束，但`NetworkStream.Read()`如果没有数据可用，它似乎只是等待。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;
using System.Threading.Tasks;
namespace Stream
{
    class Program
    {
        private static TcpClient client = new TcpClient("127.0.0.1", 80);
        private static NetworkStream stream = client.GetStream();

        static void Main(string[] args)
        {
            var p = new Program();
            p.Run();
        }

        void Run()
        {
            ThreadPool.QueueUserWorkItem(x =>
            {
                while (true)
                {
                    stream.Read(new byte[64], 0, 64);
                }
            });

            client.Close();
            // insert Console.ReadLine(); if you want to see an exception occur.
        }
    }
} 
```

使用这段代码，我们会得到

1.  `System.IO.IOException`说“无法从传输连接中读取数据：现有连接被远程主机强行关闭”，
2.  `ObjectDisposedException`说“无法访问已处置的对象”，或
3.  `System.IO.IOException`说“对 WSACancelBlockingCall 的调用中断了阻塞操作”。

那么我怎样才能安全地结束这种方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T08:48:16.867

1.  为避免阻塞，仅在 DataAvailable 为 true 时调用 Read()。
2.  ThreadPool 不适合长时间运行的任务，因此请重构您的 while 循环
3.  在读取连接之前关闭连接（因为工作项是异步执行的）。

这可能会有所帮助

```
 void Run() {
        ThreadPool.QueueUserWorkItem(ReadLoop);
     }

     void ReadLoop(object x) {
         if (stream.DataAvailable) 
           stream.Read(new byte[64], 0, 64);
         else 
             Thread.Sleep(TimeSpan.FromMilliseconds(200));

         if (Finished)
               client.Close();
         else if (!Disposed && !Finished) 
               ThreadPool.QueueUserWorkItem(ReadLoop);
     } 
```

您需要在真正的课堂上自己管理 Finished & Disposed。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T20:29:29.240

从我在运行您的程序时看到的情况来看，您的第一个异常“无法从传输连接中读取数据...”不是由 Stream.Read 引发的，而是由 TcpClient 的构造函数引发的，很可能是由于存在没有服务器接受 127.0.0.1:80 上的连接。

现在，如果您想在 Stream.Read 上完美结束，我会异步执行。通过这种方式，您可以捕获读取期间引发的任何异常并相应地清理您的程序。这是您的程序的修改版本：

```
using System;
using System.Net.Sockets;

namespace Stream
{
    class Program
    {
        private static TcpClient client;
        private static NetworkStream stream;

        static void Main(string[] args)
        {
            var p = new Program();
            p.Run();
        }

        void Run()
        {
            try
            {
                client = new TcpClient("127.0.0.1", 80);
                stream = client.GetStream();
                byte[] buffer = new byte[64];

                stream.BeginRead(buffer, 0, buffer.Length, new AsyncCallback(OnRead), buffer);

                client.Close();
                Console.ReadKey();
            }
            catch (Exception)
            {
                //...
            }
        }

        void OnRead(IAsyncResult result)
        {
            try
            {
                stream.EndRead(result);
                byte[] buffer = result.AsyncState as byte[];

                if (buffer != null)
                {
                    //...
                }

                // continue to read the next 64 bytes
                buffer = new byte[64];
                stream.BeginRead(buffer, 0, buffer.Length, new AsyncCallback(OnRead), buffer);
            }
            catch (Exception)
            {
                // From here you can get exceptions thrown during the asynchronous read
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T11:18:46.853

如果实现了简单的控制台客户端应用程序，那么*为什么要使用另一个线程*来连接和接收来自服务器的数据？

```
static void Main(string[] args)
{
    var client = new TcpClient("...", ...);
    var buffer = new byte[1024];
    using (var networkStream = client.GetStream())
    {
        int bytesRead;
        while ((bytesRead = networkStream.Read(buffer, 0, buffer.Length)) > 0)
        {
            var hexString = BitConverter.ToString(buffer, 0, bytesRead);
            Console.WriteLine("Bytes received: {0}", hexString);
        }
    }
} 
```

# c++ - 如何在 Objective-C/C/C++ 中的字符和字节位置之间进行转换

> ID：15038616
> 
> 赞同：2
> 
> 时间：2013-02-23T08:24:08.707
> 
> 标签：c++, objective-c, c, utf-8, nsstring

我需要将 UTF-8 字符串中的字节位置转换为 Objective-C 中相应的字符位置。我确信必须有一个库来执行此操作，但我找不到一个 - 任何人都可以（尽管显然任何 C 或 C++ 库都可以在这里完成这项工作）。

我意识到我可以在所需字符处截断 UTF-8 字符串，将其转换为 NSString，然后读取 NSString 的长度以获得我的答案，但这似乎是一个可以解决的问题的有点棘手的解决方案只需在 C 中使用一个小的 FSM。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:06:47.483

“字符”是一个有点模棱两可的术语，它在不同的上下文中意味着不同的东西。我猜你想要和你的例子一样的结果，`[NSString length]`.

`NSString`文档并没有完全提前说明这一点，而是计算`[NSString length]`了字符串中*UTF-16 代码单元的数量。*所以 U+0000..U+FFFF 每个算一个，但 U+10000..U+10FFFF 每个算两个。并且不要拆分代理对！

您可以根据每个 UTF-8 字符的前导字节来计算 UTF-16 代码点的数量。尾随字节使用一组不相交的值，因此您根本不需要跟踪*任何*状态，除了您在字符串中的位置（好消息：有限状态机是多余的）。

```
static const unsigned char BYTE_WIDTHS[256] = {
    // 1-byte: 0xxxxxxx
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    // Trailing: 10xxxxxx
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    // 2-byte leading: 110xxxxx
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    // 3-byte leading: 1110xxxx
    // 4-byte leading: 11110xxx
    // invalid: 11111xxx
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0
};

size_t utf8_utf16width(const unsigned char *string, size_t len)
{
    size_t i, utf16len = 0;
    for (i = 0; i < len; i++)
        utf16len += BYTE_WIDTHS[string[i]];
    return utf16len;
} 
```

该表是 1 表示 1 字节、2 字节和 3 字节 UTF-8 前导字符，2 表示 4 字节 UTF-8 前导字符，因为这些字符在转换为`NSString`.

我在 Haskell 中生成了表格：

```
elems $ listArray (0,256) (repeat 0) //
    [(n,1) | n <- ([0x00..0x7f] ++ [0xc0..0xdf] ++ [0xe0..0xef])] //
    [(n,2) | n <- [0xf0..0xf7]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:48:13.023

查看[UTF-8 编码](http://en.wikipedia.org/wiki/UTF-8#Description)并注意代码点以以下 8 位模式开头：

```
76543210 <- bit
0xxxxxxx <- ASCII chars
110xxxxx \
1110xxxx  } <- more byte(s) (of form 10xxxxxx) follow
11110xxx / 
```

这就是您在搜索代码点的开头时应该寻找的内容。

但这只是解决方案的一部分。您需要考虑[Combining characters](http://en.wikipedia.org/wiki/Combining_Diacritical_Marks)。您需要将变音符号与它们之前的主要字符组合在一起，您不能将它们分开并视为独立字符。

可能还有更多。

# java - 即使类文件在同一目录中，Java 文件也无法访问方法

> ID：15038617
> 
> 赞同：1
> 
> 时间：2013-02-23T08:24:10.433
> 
> 标签：java

我只得到了一个用于家庭作业的 .class 文件，并且需要编写一个访问其方法的程序。好吧，我在同一目录中有 .class 文件，但我无法访问它的方法，所以我的程序无法编译！我已经尝试过 JGrasp 和 Eclipse。两者都“找不到符号”（方法名称）。

我绝对肯定我使用了正确的方法名称。为什么它不起作用？

这是我在 Hw.java 中的代码

```
public class Hw {

    public static void main(String[] args) 
    {
     int[] a1 = {1, 2, 3, 4, 5};
        int[] a2 = {5, 4, 3, 2, 1};
        int[] a3 = {1};
        int[] a4 = {2, 5, 3, 1, 4};
        int[] a5 = {1, 2, 1};

        System.out.println(sortA(a1));        
        System.out.println(sortA(a2));
        System.out.println(sortA(a3));
        System.out.println(sortA(a4));
        System.out.println(sortA(a5));        
  }
} 
```

我在 JGrasp 中遇到的错误：

Hw.java:11：错误：找不到符号 System.out.println(sortA(a1));
^ 符号：方法 sortA(int[]) 位置：Hw 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:35:34.300

如果`sortA`是给定类的静态方法，则必须使用类名对其进行限定：

```
System.out.println(GivenClass.sortA(a1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:35:51.943

您必须创建该类的实例并调用 sort 方法。

```
 System.out.println(new ThatClass().sortA(a1)); 
```

如果 sortA(a1) 是一个静态方法，你应该在类名上调用它。

```
 System.out.println(ThatClassName.sortA(a1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:39:48.520

如何在没有来自另一个类的对象的情况下访问方法...如果您尝试对所有方法进行排序，那么您的 .class 引用要调用...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T08:43:03.997

您需要首先导入特定的类..打开 .class 文件在顶部，您会注意到写了一些包名..所以记下它..现在将您的类文件放在 eclipse.. 并导入包在你的 Hw.java.. 确保你这样做.. 说包名是 p1 然后这样写`import p1.*`以确保你有所有的类都存在于其中..
现在 eclipse 和其他 IDE 有智能感知所以你可以利用它的..我的意思是制作该类的一个对象并使用该对象按期（点。）来了解该类提供的带有签名的方法..并使用它..
我注意到一件事，您还没有创建对象来访问排序方法。你需要先这样做..如果方法是静态的..然后做静态导入所以你不必指定类名..像这样`import static p1.*`

希望这可以帮助！！

# android - 当视图出现时创建计时器（处理程序）并在视图消失时停止它

> ID：15038622
> 
> 赞同：2
> 
> 时间：2013-02-23T08:24:31.127
> 
> 标签：android, android-handler

我已经开发 iOS 应用程序很长一段时间了，现在我已经切换到 android。我有一个要求，当视图出现（onResume）时我必须启动计时器（在 Android 中，我需要使用处理程序）并在视图消失（onPause）时使计时器无效（停止处理程序）。我能够创建可运行的处理程序，但无法停止它。我的代码是：

```
 protected void AutoRefresh() {
     try{
handler.postDelayed(new Runnable() {
                     public void run() { 
                          new LongOperation().execute("");
                         }
                         AutoRefresh();

                 }, 60000);
    }
        catch(Exception ex){

        }

} 
```

现在，当视图消失时，我怎样才能停止这个处理程序线程。如果它不是在 android 中执行计时器的正确方法，也请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:07:07.607

> 当视图出现时（onResume）并在视图消失时（onPause）使计时器无效（停止处理程序）。我能够创建可运行的处理程序，但无法停止它。

保留对`Runnable`您使用的参考：

```
private Runnable mRefresh = new Runnable() {
     public void run() { 
          new LongOperation().execute("");
     }
     AutoRefresh();
}
//...
protected void AutoRefresh() {
    handler.postDelayed(mRefresh, 60000);
} 
```

并`onPause`像这样删除它：

```
handler.removeCallbacks(mRefresh); 
```

请记住，这不会删除当前`Runnable`正在执行的（如果有的话），因此在`LongOperation`'s`onPostExecute`方法中，您可能需要`Activity`在刷新 UI 或与`Activity`.

> 如果它不是在 android 中执行计时器的正确方法，也请发表评论。

您似乎需要在某个时间间隔内执行一项操作，并且使用 a`Handler`是这样做的方式，我认为您不需要计时器。

# python - pyside (python/Qt) 中的自定义小部件不会显示

> ID：15038625
> 
> 赞同：0
> 
> 时间：2013-02-23T08:24:38.583
> 
> 标签：python, qt, widget, pyside

我只是在 pyside (python/Qt) 中尝试我的第一个原型。应用程序本身启动良好，根据我的布局创建一个带有小部件的窗口。线程启动并执行，一切正常。除了...

我想通过添加一些指示线程执行状态的自定义小部件来增强 GUI。所以我认为闪烁的 LED 就可以了。为此，我尝试实现一个自定义 LED 小部件。

请记住，我目前正在尝试*学习*python，因此可能会有一些奇怪的方法。无论如何，这是当前状态下的 LED 小部件类：

```
from PySide import QtCore, QtGui

class LED(QtGui.QWidget):

    class Mode:
        STATIC_OFF   = 0
        STATIC_ON    = 1
        FLASH_SLOW   = 2
        FLASH_MEDIUM = 2
        FLASH_FAST   = 3

    class Color:
        BLACK  = '#000000'
        GREEN  = '#00FF00'
        RED    = '#FF0000'
        BLUE   = '#0000FF'
        YELLOW = '#FFFF00' 
        WHITE  = '#FFFFFF'

    mode   = Mode.STATIC_ON
    color  = Color.BLACK
    radius = 10
    status = False
    timer  = None

    outdated = QtCore.Signal()

    def __init__(self, mode, color, radius, parent=None):
        super(LED, self).__init__(parent)
        self.outdated.connect(self.update)
        self.setMode(mode,False)
        self.setColor(color,False)
        self.setRadius(radius,False)
        self.timer = QtCore.QTimer(self)
        self.timer.timeout.connect(self.adjustAppearance)
        self.adjustAppearance()

    def getCenter(self):
        return QtCore.QPoint(self.radius, self.radius)

    def getBox(self):
        return QtCore.QRect(self.radius, self.radius)

    def setColor(self, color, update=True):
        assert color in (self.Color.GREEN,self.Color.RED,self.Color.BLUE,self.Color.YELLOW,self.Color.WHITE), "invalid color"
        self.color = color
        if update:
            self.adjustAppearance()

    def setMode(self, mode, update=True):
        assert mode in (self.Mode.STATIC_OFF,self.Mode.STATIC_ON,self.Mode.FLASH_SLOW,self.Mode.FLASH_MEDIUM,self.Mode.FLASH_FAST),"invalid mode"
        self.mode = mode
        if update:
            self.adjustAppearance()

    def setRadius(self, radius, update=True):
        assert isinstance(radius, int), "invalid radius type (integer)"
        assert 10<=radius<=100, "invalid radius value (0-100)"
        self.radius = radius
        if update:
            self.adjustAppearance()

    def switchOn(self):
        self.status = True
        self.adjustAppearance()

    def switchOff(self):
        self.status = False
        self.adjustAppearance()

    def adjustAppearance(self):
        if self.mode is self.Mode.STATIC_OFF:
            self.status = False
            self.timer.stop()
        elif self.mode is self.Mode.STATIC_ON:
            self.status = True
            self.timer.stop()
        elif self.mode is self.Mode.FLASH_SLOW:
            self.status = not self.status
            self.timer.start(200)
        elif self.mode is self.Mode.FLASH_SLOW:
            self.status = not self.status
            self.timer.start(500)
        elif self.mode is self.Mode.FLASH_SLOW:
            self.status = not self.status
            self.timer.start(1000)
            self.outdated.emit()

    def paintEvent(self, event):
        painter = QtGui.QPainter()
        painter.begin(self)
        self.drawWidget(event, painter)
        painter.end()

    def drawWidget(self, event, painter):
        if self.status:
            shade = QtGui.QColor(self.color).darker
        else:
            shade = QtGui.QColor(self.color).lighter
        #painter.setPen(QtGui.QColor('black'), 1, QtCore.Qt.SolidLine)
        painter.setPen(QtGui.QColor('black'))
        painter.setBrush(QtCore.Qt.RadialGradientPattern)
        painter.drawEllipse(self.getCenter(), self.radius, self.radius) 
```

我的问题是，当我将小部件添加到 Windows 布局时，它根本不显示。其他小部件（非定制的、普通的 Qt 小部件）确实会显示，所以我认为这不是创建小部件的问题，而不是我如何使用小部件的问题。然而，如果小部件是（缩短的）实例：

```
class View(QtGui.QMainWindow):

    ui = None

    def __init__(self, config, parent=None):
        log.debug("window setup")
        self.config = config
        super(View, self).__init__(parent)
        try:
            self.ui = self.Ui(self)
            self.setObjectName("appView")
            self.setWindowTitle("AvaTalk")
            self.show()
        except RuntimeError as e:
            log.error(e.message)

    class Ui(QtCore.QObject):

        # [...]
        iconDetector = None
        buttonDetector = None
        # [...]

        def __init__(self, window, parent=None):
            log.debug("ui setup")
            super(View.Ui, self).__init__(parent)
            self.window = window

            # central widget
            log.debug("widget setup")
            self.centralWidget = QtGui.QWidget()
            self.widgetLayout = QtGui.QVBoxLayout(self.centralWidget)

            # create toolbars
            #self.createMenubar()
            #self.createCanvas()
            self.createToolbar()
            #self.createStatusbar()

            # visualize widget
            self.window.setCentralWidget(self.centralWidget)

            # actions
            log.debug("actions setup")
            self.actionQuit = QtGui.QAction(self.window)
            self.actionQuit.setObjectName("actionQuit")
            self.menuFile.addAction(self.actionQuit)
            self.menubar.addAction(self.menuFile.menuAction())

            log.debug("connections setup")
            QtCore.QObject.connect(self.actionQuit, QtCore.SIGNAL("activated()"), self.window.close)
            QtCore.QMetaObject.connectSlotsByName(self.window)

        def createToolbar(self):
            log.debug("toolbar setup")
            self.toolbar = QtGui.QHBoxLayout()
            self.toolbar.setObjectName("toolbar")
            self.toolbar.addStretch(1)
            # camera
            # detector
            self.iconDetector = LED(LED.Mode.STATIC_OFF,LED.Color.GREEN,10,self.window)
            self.buttonDetector = IconButton("Detector", "detector",self.window)
            self.toolbar.addWidget(self.iconDetector)
            self.toolbar.addWidget(self.buttonDetector)
            self.toolbar.addStretch(1)
            # analyzer
            # extractor
            # layout
            self.widgetLayout.addLayout(self.toolbar) 
```

很可能使用QPainter的实际绘画仍然是胡说八道。我还没有来测试：实际上，在测试时，我发现设置完成后小部件会`isVisible()`返回`False`。所以我想我错过了一个中心点。不幸的是，我无法找出我想念的东西......

也许有人可以发现我的问题？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:49:48.140

实现派生自的自定义小部件时要小心的一件事`QWidget`是：`sizeHint`或默认情况`minimumSizeHint`下`QWidget`返回无效`QSize`。这意味着，如果将其添加到布局中，取决于其他小部件，它将缩小为`0`. 这有效地使其“不可见”。虽然，`isVisible`还是会回来`True`。小部件是“可见的”，但它没有任何东西可显示（0 大小）。所以，如果你得到`False`，肯定还有另一个问题。

所以有必要用合理的尺寸定义这两种方法：

```
class LED(QtGui.QWidget):
    # ...

    def sizeHint(self):
        size = 2 * self.radius + 2
        return QtCore.QSize(size, size)

    def minimumSizeHint(self):
        size = 2 * self.radius + 2
        return QtCore.QSize(size, size) 
```

注意：还有其他问题：

*   就像将`mode`,`color`等定义为类属性，然后用实例属性覆盖它们。它们不会破坏任何东西，但它们毫无意义。
*   `painter.setBrush(QtCore.Qt.RadialGradientPattern)`是错的。你不能用`QtCore.Qt.RadialGradientPattern`. 它在那里，所以`brush.style()`可以返回一些东西。如果你想要一个渐变图案，你应该用[`QGradient`constructor](http://qt-project.org/doc/qt-4.8/qbrush.html#QBrush-10)创建一个画笔。
*   `if self.mode is self.Mode.STATIC_OFF`: 比较`is`是错误的。`is`比较身份，你要`==`在这里。（也`FLASH_SLOW`和`FLASH_MEDIUM`都是`2`）
*   `assert`用于调试和单元测试。您不应该在实际代码中使用它。如果需要，请引发异常。或者有 sensible `default`s，其中无效值将被替换。

# cmake - 如何从 cmake-gui 获取 cmake 命令？

> ID：15038637
> 
> 赞同：6
> 
> 时间：2013-02-23T08:27:09.650
> 
> 标签：cmake

我使用 cmake-gui 来配置 OpenCV，我想在其他计算机上使用相同的配置。
因为我使用ssh没有X转发，所以我不能使用cmake-gui再次配置。
我不知道如何使用cmake来完成我的配置，所以我想知道cmake-gui可以生成用于cmake的命令吗？
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-13T20:23:43.803

有一个名为：的选项`Tools-> Show my Changes`，它准确显示您已配置的与原始配置相关的内容。一个版本是复制和粘贴命令行参数，另一个版本是人类可读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T21:53:43.533

默认情况下，您不能做您想做的事情，因为该路径存储在`CMAKE_COMMAND`其中是一个内部变量，因此它在 GUI 中不可见。您可以使用类似的命令从缓存中手动读取它`grep CMAKE_COMMAND CMakeCache.txt | cut -d = -f 2`。或者，您可以更新您`CMakeLists.txt`的值以将 的值放入`CMAKE_COMMAND`缓存中，以便您可以使用 GUI 读取它。例如：

```
set(USED_CMAKE_PATH ${CMAKE_COMMAND} CACHE FILEPATH
    "The path to the CMake executable used to configure this project" FORCE) 
```

此外，如果您使用的是“Unix Makefiles”生成器，则为此提供了两个目标：

*   `rebuild_cace`这相当于`cmake .`
*   `edit_cache`这相当于`ccmake .`或`cmake-gui .`取决于您的安装。

*注意：*我使用 CMake 版本 2.8.10.2 来测试它，但我希望它适用于任何版本。

# iphone - 如何隐藏一个标签栏控制器并在单击按钮时显示另一个..？

> ID：15038639
> 
> 赞同：0
> 
> 时间：2013-02-23T08:27:51.700
> 
> 标签：iphone

我正在展示一个 ExchangeWardrobe 视图。在这个视图中，我有一个按钮 Mywardrobe 点击此按钮，打开用户自己的 Exchange Wardrobe。这将有以下 3 个选项卡..一个是 myProducts 视图..其中有一个按钮提供..单击此报价按钮打开产品详细信息页面..它也在另一个tabbarcontroller..所以我想问一个tabbarcontroller的一个类是否可以调用另一个tabbarcontroller的另一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:34:27.873

在您的应用程序委托中，您可以在主窗口中添加和删除标签栏控制器（即 [window addSubview:usersWardrobeTabBarController.view]）。

只需在您的应用程序委托中创建一个方法来交换这些视图，从您的窗口中添加/删除它们。或者，如果内存不是问题，则将它们都添加并隐藏/取消隐藏它们。

# python - 将代码部署到 Heroku（问题？）

> ID：15038640
> 
> 赞同：3
> 
> 时间：2013-02-23T08:28:19.223
> 
> 标签：python, git, heroku, github

[https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)

当我尝试通过`$ git push heroku master`我部署我的代码时出现错误：

```
 Warning: Permanently added the RSA host key for IP address '50.19.85.132' to the list      of known hosts.
    Permission denied (publickey).
    fatal: The remote end hung up unexpectedly 
```

接下来，我能够为该 IP 地址添加 RSA 主机密钥，`$ heroku keys:add`但我仍然收到此错误：

```
 Found existing public key: /Users/opalkale/.ssh/github_rsa.pub
   Uploading SSH public key /Users/opalkale/.ssh/github_rsa.pub... done
   (venv)Opal-Kales-MacBook-Pro:helloflask opalkale$ git push heroku master
   Permission denied (publickey). 
```

我究竟做错了什么...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:35:10.670

在线将您的 id_rsa.pub SSH 密钥添加到您的 Heroku 帐户：[https ://dashboard.heroku.com/account](https://dashboard.heroku.com/account)

并确保相应的私钥已添加到您的身份中

```
$ ssh-add ~/.ssh/id_rsa 
```

例如

```
$ ssh-add ~/.ssh/github_rsa 
```

# jquery - .remove 在 chrome 和 safari 中工作，但不在 FF 和 IE 中

> ID：15038642
> 
> 赞同：0
> 
> 时间：2013-02-23T08:28:45.190
> 
> 标签：jquery, internet-explorer, firefox

我找到了一个 jquery 脚本来创建一个表，并且有一个按钮可以将行添加到表的底部。然后，当单击以删除该特定行时，每行上都有链接。在 Chrome 和 Safari 中一切正常，但在 FireFox 或 IE 中却没有。这是Jquery。

```
 if ($("table#data tbody tr").size() == 1) {
    $('.deleteRowButton').hide();
}

$('.deleteRowButton').live('click',function() {
    var bid = $(this).attr('id');
    var nid = bid.replace(/[^\d.]/g, "");
    var pid = $("#product" + nid).val();
    $("#productschanges").append("2:" + nid + ":" + pid + ","); 
    if ($("table#data tr").size() > 1) {
    $(this).parents('tr').first().remove();

    if ($("table#data tbody tr").size() == 1) {
        $('.deleteRowButton').hide();
    } else {
        $('.deleteRowButton').show();
    }
} else {
    $('.deleteRowButton').hide();
}
});

$(".addRowButton").click(function() {
    $("table#data tbody tr:last").clone(true).find("select").each(function() {
        $(this).attr({
            'id': function(_, id) {
                return this.id.replace(/[0-9]/g, '') + i;
            },
            'name': function(_, name) {
                return this.name.replace(/[0-9]/g, '') + i;
            },
            'value': function(_, value) {
                return '';
            }
        });
        $(this).prop('disabled', false);

    }).end().find("input").each(function() {
        $(this).attr({
            'id': function(_, id) {
                return this.id.replace(/[0-9]/g, '') + i;
            },
            'name': function(_, name) {
                return this.name.replace(/[0-9]/g, '') + i;
            },
            'value': function(_, value) {
                return '';
            }
        });

    }).end().find("button").each(function() {
        $(this).attr({
            'id': function(_, id) {
                return this.id.replace(/[0-9]/g, '') + i;
            },
        });

    }).end().appendTo("table#data tbody");
    i++;

    $('.deleteRowButton').show();
}); 
```

.deleteRowButton 中的追加适用于所有浏览器，但未按预期删除该行。关于为什么这在两个浏览器中不起作用的任何帮助？

谢谢 2Pher

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:04:35.607

我查看您的源 html。我看到很多 html 标签的位置不正确。在标签样式之前有关闭标签而不是任何打开标签。您应该修复此错误。具有有效的打开标签和关闭标签。

# android - android.bat 打开SDK Manager，SDK Manager.exe没有

> ID：15038643
> 
> 赞同：1
> 
> 时间：2013-02-23T08:29:17.457
> 
> 标签：android, batch-file, sdk

在过去的 48 小时里，我一直在努力解决这个问题，这让我发疯了。

我的 SDK Manager.exe 会闪现一个 cmd 屏幕并在不到一秒的时间内关闭。

经过一番搜索，我终于在调整android.bat后打开了我的SDK Manager，并以管理员身份运行它。

但是，SDK Manager.exe 找不到 android.bat，所以我将其复制到 android-sdk 文件夹中。

SDK Manager.exe 现在可以找到 android.bat，但它仍然短暂闪烁 cmd 然后关闭。

我的 PATH 变量将我的 jdk java.exe 目录作为第一个条目，并且我已经重新启动并重新安装了几次。

这是什么原因造成的？为什么我可以从 android.bat 打开管理器，但不能从可执行文件中打开？

我正在尝试将 Eclipse 配置为使用 SDK 管理器，但显然我不能，因为可执行文件拒绝打开。

Eclipse 还告诉我 adb.exe 丢失了，在检查平台后我已经确认了这一点。我假设 adb.exe 将从 SDK 管理器安装？

编辑：经过考虑，我认为问题可能与android.bat的权限有关。它必须以管理员身份运行才能工作，否则如果定期打开它会显示“访问被拒绝”。

有可能改变这个吗？查看 android.bat 的属性，我调整了我的帐户以完全控制。不过，这并没有影响到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:22:07.463

我在某些机器上遇到过这种情况，但在其他机器上却没有。这是一个奇怪的问题，我相信它与其中一个 android 文件（android.bat？）中的路径问题有关。

为什么会在某些安装上发生这种情况，而在其他安装上却没有，我还没有弄清楚。我已经阅读了在这里和互联网上可以找到的所有内容，尝试了许多不同的解决方案，包括安装另一个版本的 JDK 6 和 7、修改路径变量、添加 JAVA_HOME 变量等，但都没有奏效。

这在 Windows 7 中对我有用...

1) 在 SDK 文件夹中添加“SDK Manager.exe”文件的副本（因此它位于工具、平台等文件夹旁边），然后运行它。您仍然会看到命令窗口“闪烁”一秒钟然后消失，但请耐心等待，SDK 管理器会出现。

2) 创建 SDK Manager.exe 的“内部”副本的快捷方式，并将其移动到您想要的任何位置；它现在知道在哪里可以找到文件并且每次都能正常工作。我的桌面上有一个副本，但不管你把它放在哪里都没关系。

注意：某处仍然存在问题，并且可能与 Google 有关，但似乎某些人无论何时/何时进行安装都会发生这种情况，而其他人则根本没有问题。

这可能不是我们需要让 Google 修复它的答案，但它无需卸载/重新安装 java 或 SDK、修改/添加变量、修改 android.bat、更改路径、以管理员身份运行等即可工作，并且最好的部分是它很容易。太糟糕了，我们中的许多人都浪费了数小时的时间来尝试修复它。

祝你好运！

注意：我在下面添加了关于 x64 机器的评论。这很奇怪，但是当我们在一台 x64 (OS/ADT) 机器上尝试它时，它不起作用。我刚刚尝试在使用 32 位安装的机器上全新安装 Java 7 x64 和 ADT x64（这意味着我现在在同一台机器上同时安装了 Java 和 ADT 的 32 位和 64 位），再次，它工作正常. 短暂闪烁，它消失了，然后 SDK 管理器按预期打开。谜团还在继续。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T21:26:14.710

当我将我的 android SDK 工具更新到 23.0.2 时，我遇到了同样的问题。花了很多时间（大约 6 个小时）四处寻找解决办法......我找到了它，但仍然不确定它是如何工作的。

它与 android SDK 目录的 tools 文件夹中的 android.bat 文件有关，如下所示：

```
set java_exe=
call lib\find_java.bat 
```

我将这些行修改为以下值：

```
set java_exe=pathwhereyoufindjavaexe
REM call lib\find_java.bat 
```

基本上，做了两件事：

1.  将您的 java_exe 变量设置为您的 Java.exe 路径

2.  删除或注释行：“call lib\find_java.bat”

我评论了第二行，所以它不会通过 find_java.bat 重新设置我的 java_exe 变量，而是手动将我的 java_exe 变量设置为我的 java.exe 文件所在的位置。如果您不知道（或忘记了）您的 java.exe 在哪里，请尝试使用 windows 搜索它。

我的 java.exe 路径与使用 find_java.bat 找到的路径不同。我的实际路径：

```
U:\PortableApps\CommonFiles\Java\bin\Java.exe 
```

路径 find_java.bat 将其设置为：

```
C:\Windows\systems32\java.exe 
```

注意：我想出了什么路径“调用 lib\find_java.bat”通过在行本身下面添加以下命令来设置 java_exe 变量：

```
echo %java_exe%
pause 
```

我不确定这是否是某种许可或访问错误，或者此解决方案仅对我有效，因为我的 java JDK 位于 USB 设备或类似设备上。好吧，如果其他人遇到这个问题，试试我的解决方案，看看它是否也适用于你们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:48:49.637

我不知道它是否能解决您的问题，但请确保您已为同一个位系统安装了 jre 和 jdk 以及 android sdk（我的意思是这三个都是用于 32 位或 64 位系统的）。我曾经有一个基于此的android问题！如果您将它们用于一个系统，请尝试重新安装它们。我有一个类似的问题，它在将所有版本更改为 64 位后工作。希望我能帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T13:16:51.283

当您“以管理员身份运行”时，当前目录会更改，因为您正在模拟另一个用户。为了证明这一点，请将以下行放在 bat 文件的顶部：

```
echo.CD=%CD% & pause 
```

然后以普通用户身份执行您的 bat 文件并观察结果。

现在通过“以管理员身份运行”执行 bat 文件，注意 CD 已更改为 C:\Windows\system32（典型）。

修复很简单。将以下行放入您的 bat 文件以恢复当前目录：

```
pushd %~dp0 
```

它需要在您引用任何文件/文件夹之前。我通常将该行放在所有可能是“以管理员身份运行”的 bat 文件的顶部附近。如果用于较旧的 (XP) 操作系统，它不会造成任何伤害。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-21T13:45:08.373

我遇到过同样的问题！

我已经安装了 64 位的 ADT 包，所以我下载了 64 位的 Java。我弄乱了路径和东西，但最终修复它的东西是安装了 Java 32 位。

简单的解决方法是安装这两个版本。[您可以在此处](http://java.com/en/download/manual.jsp)手动下载它们。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-20T06:57:07.440

我对 Windows 8.1 64 位和 JDK8 有同样的问题。我卸载了 JDK8x64 并安装了 JDK8i586，现在它就像一个魅力。

# objective-c - NSTableViewCell.ImageView 设置位置？

> ID：15038644
> 
> 赞同：0
> 
> 时间：2013-02-23T08:29:31.033
> 
> 标签：objective-c, xcode, cocoa

我有一个 NSTableViewCell，它在单元格中有一个 ImageView。

使用代码控制单元格内图像的位置需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:00:10.567

如果您使用的是`NSTextFieldCell`（[ImageAndTextCell](http://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Listings/ImageAndTextCell_m.html)）的子类。
`- (NSRect)imageRectForBounds:(NSRect)cellFrame`您可以在方法中控制图像的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:11:25.103

您可以创建自定义单元格...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"ImageOnRightCell";

    UIImageView *photo;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]];
        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

        photo = [[[UIImageView alloc] initWithFrame:CGRectMake(225.0, 0.0, 80.0, 45.0)]];
        photo.tag = PHOTO_TAG;
        photo.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
        [cell.contentView addSubview:photo];
    } else {
        photo = (UIImageView *)[cell.contentView viewWithTag:PHOTO_TAG];
    }
    return cell;
} 
```

这看起来像...... ![在此处输入图像描述](../Images/7441c683fdbee4c3f125e093e891295a.png) 或者你可以阅读这个链接...... [http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T10:29:07.983

而不是默认的 TableViewCell，创建您自己的自定义 tableViewCell 并根据您的需要定位它。

# facebook-graph-api - 如何永久连接fb账号？

> ID：15038645
> 
> 赞同：-1
> 
> 时间：2013-02-23T08:29:42.173
> 
> 标签：facebook-graph-api

嗨，我想为我的 cms 创建一个功能。它应该是这样工作的：当用户在网站上发布新闻时，它会自动在 Facebook 页面上发布一个链接。

什么是最好的解决方案？假设我们有一个 Facebook 帐户，但有多个网站管理员。并且永久访问令牌不存在，所以我将不得不进行一些重新身份验证？

如何使这项工作的任何提示将非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:20:14.627

截至上个月，facebook 删除了离线访问，您使用的访问令牌只能使用 60 天。为了在那段时间之后使用它，每次您的用户进入您的网页或您拥有的任何东西时，您都必须更新访问令牌。看看这个链接 [How to renew/extend facebook access tokens with PHP?](https://stackoverflow.com/questions/10021892/how-to-renew-extend-facebook-access-tokens-with-php)

# php - $x * $y = $z 为零

> ID：15038646
> 
> 赞同：-1
> 
> 时间：2013-02-23T08:29:47.627
> 
> 标签：php, math

我必须将价格从 RON tu EUR 转换为我`0`在运营中获得的价格。

我使用的代码：

```
 include('./panou/simple_html_dom.php');
  function euro() {
       $dom= file_get_html("http://www.cursvalutar.ro/");;  
       foreach ($dom->find('tr') as $node) {
       if (is_a($node->children(1), 'simple_html_dom_node')) {
            if ($node->children(1)->plaintext == "Euro") {
            $plain = explode(',', $node->children(2)->plaintext);           
         if(!isset($plain[0])!== false) {
                      echo("Nu are");
                  }
          elseif(stripos($plain[0], $plain[0])!== false{
                      "4.30"
                  }
             }
        }
   }
   $plain[0]*=$koyos; echo "$plain[0]";} 
```

`$plain[0] = 4.3780`脚本的`$koyos = 545.66`结果是`0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:46:39.507

相反，使用此 URL 获取 RON-EUR 的实际价值：http: [//download.finance.yahoo.com/d/quotes.csv](http://download.finance.yahoo.com/d/quotes.csv?s=RONEUR=X&f=sl1d1t1ba&e=.csv) ?s=RONEUR=X&f=sl1d1t1ba&e= .csv 解析 CSV 文件比解析 HTML 更容易文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:40:27.667

代码问题：$koyos 变量未在 euro() 函数中定义。将其传递给函数。如果你想打印一个数组的元素，你应该这样做：

```
 echo $plain[0]
     echo "{$plain[0]}"    //  this two prints what you want 
```

这不是好方法：

```
 echo "$plain[0]"      // the result of this might be "Array[0]" 
```

但最好用这个替换你的代码：

```
 function getEuroRon(){
            if (!$file = fopen('http://download.finance.yahoo.com/d/quotes.csv?s=EURRON=X&f=sl1d1t1ba&e=.csv','r')){
                    die('resource can not be read');
            }
            $data = fgetcsv($file);
            fclose($file);
            return $data[1];
    }
    $euroron = getEuroRon();
    /*
    //... somewhere in code:
    $koyos = 545.66;

    //i dont recommend to use global variables but you might need this:
    function euro(){
          global $koyos,$euroron;
          print $euroron * $koyos;
    }
    */
    //This should be better instead the previous:
    function euro($koyos){
          global $euroron;
          print $euroron * $koyos;
    }   
    euro(545.66); 
```

您可以在需要打印结果的地方调用 euro() 函数......应该有更好的方法，但我不知道您的代码的其他细节，并试图以几乎与您编码相同的方式解决您的问题。

或者您可以使用更好的解决方案：http: [//pastebin.com/HMp8SR2j](http://pastebin.com/HMp8SR2j)

# r - 读取下载的 CSV 时出现问题

> ID：15038653
> 
> 赞同：0
> 
> 时间：2013-02-23T08:30:55.197
> 
> 标签：r, csv, https

我正在尝试从我的在线数据库中下载 CSV，它似乎正在工作，

```
tempCSV <- postForm(myDB_URL, .params=myParameters) 
```

但是当我尝试读取文件时，

```
> dat <- read.csv(textConnection(tempCSV)) 
```

我收到此错误：

```
Error in textConnection(tempCSV) : invalid 'text' argument 
```

我也试过这个（如果我在这里完全抓住吸管，请不要笑，这是周五晚上的凌晨 2 点 19 分）

```
> dat <- read.csv(tempCSV) 
```

出现此错误：

```
Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
'file' must be a character string or connection 
```

作为参考，这是数据的实际样子：

```
> tempCSV[1:20]
 [1] 43 69 74 79 73 70 61 6e 20 43 6c 61 73 73 20 2d 20 46 69 6e 
```

RStudio 说它是原始的[225758]

如果我打印整个内容会发生以下情况，如果这有帮助的话：

```
> tempCSV
...
[ reached getOption("max.print") -- omitted 215758 entries ]
attr(,"Content-Type")

"application/x-comma-separated-values" 
```

# css - 两个 div 重叠

> ID：15038654
> 
> 赞同：0
> 
> 时间：2013-02-23T08:31:14.900
> 
> 标签：css, image, html, stack

所以我正在尝试做类似的事情（[你如何让两个 <div> 重叠？](https://stackoverflow.com/questions/270493/how-would-you-make-two-divs-overlap)），但在我的网站顶部放了更多的东西，这将包括一些 div 层。所以我想将图像移动到顶部进行修复，然后在图像上我想放置带有菜单的链接，以及音乐播放器 iframe，旁边有一些正在播放的文本......

它在 wordpress 中，所以我拥有所有 div 的东西，只是没有定位它们和 css 的方式。

大概的样子：

```
 ____________________________________________________________
|  [           -Logo fixed to top of site-                ]  |
|  [                  [Menu div]                          ]  |
|  [                                                      ]  |
|  [      [music player div]   [html/java div]            ]  |
|  [______________________________________________________]  |
|                                                            |
|                                                            |
|                       [Content]                            ] 
```

编辑：我想要实现的是（[http://ngaradio.org](http://ngaradio.org)）“会员区”，“特色艺术家”链接在正确的位置，就在黄色上，但我想把它们放在前面。然后我想抓住底部的 iframe 并将其也放在顶部。到目前为止它还没有解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:58:44.207

要显示重叠的元素，您需要给它更高的 z-index，反之，后面的元素使用较低的 z-index。

示例-如果我有两张图片`#Img1`& `#Img2`，从现在开始，我将把图片二重叠在图片一上。怎么做-

```
#Img1{
z-index:1;
}
 #Img2{
z-index:2;
} 
```

重叠图像应具有更高的 z-index 率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:54:27.547

[我已经尝试过我认为你想要的。原谅可怕的颜色。](http://jsbin.com/oyemun/1)

编辑：使用 z-index

# java - Eclipse Geronimo 无法启动模块 sharedlib-3.0.0.car

> ID：15038655
> 
> 赞同：0
> 
> 时间：2013-02-23T08:31:15.877
> 
> 标签：java, eclipse, geronimo

在 Eclipse 中启动 Geronimo 服务器时出现此错误：

> 模块 23/66 org.apache.geronimo.configs/sharedlib/3.0.0/car
> 
> 2013-02-23 20:26:13,165 错误 [GBeanInstanceState] 启动时出错；GBean 现在处于 FAILED 状态： abstractName="org.apache.geronimo.configs/sharedlib/3.0.0/car?ServiceModule=org.apache.geronimo.configs/sharedlib/3.0.0/car,j2eeType=GBean,name =共享库"
> 
> org.eclipse.osgi.framework.internal.core.Framework$DuplicateBundleException: Bundle "org.apache.geronimo.configs.sharedlib.SharedLib" 版本 "3.0.0" 已经安装自：reference:file:/c:/ geronimo/var/共享/

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:28:03.697

刚刚为这个问题获得了一个风滚草徽章！

我花了 2 天时间让 geronimo 与 eclipse 交谈，这个问题在修复另一个问题时在某个阶段消失了。我在运行 geronimo 时仍然收到警告，但我选择忽略它并继续生活。

令我惊讶的是，本来应该如此简单的事情，竟然变得如此该死的复杂。

如果有人在寻找同样的问题，我认为（不是 100% 肯定），这是因为我将 geronimo 安装在 c:\geronimo 下，然后当我重新安装它以确保路径时在 c:\g 下最长路径名称的名称足够短。

无论如何，祝你好运:)

# node.js - 使用集群的 Node.js 性能

> ID：15038656
> 
> 赞同：1
> 
> 时间：2013-02-23T08:31:21.233
> 
> 标签：node.js, concurrency, benchmarking

我一直试图弄清楚这一点。我在node中写了一个非常简单的http服务器来对使用集群的效果进行基准测试。这是我的代码：

```
var cluster = require('cluster');
var http = require('http');
var numCPUs = 0; //require('os').cpus().length;

if(process.argv.length >= 3)
{
  numCPUs = process.argv[2];
}

if (cluster.isMaster && numCPUs > 0) {
  console.log("launching " + numCPUs + " procs");
  // Fork workers.
  for (var i = 0; i < numCPUs; i++) {
    console.log("launching proc #" + i);
    cluster.fork();
  }

  cluster.on('death', function(worker) {
    console.log('worker ' + worker.pid + ' died');
  });
} else {
  // Worker processes have a http server.
  http.Server(function(req, res) {
    res.writeHead(200);
    res.end("hello world\n");
  }).listen(3000);
} 
```

问题是我根本没有看到任何性能提升。1 进程在大多数情况下具有更好的性能。而且，如果我添加更多工作，例如从 redis 或 mongo 检索数据，那么增加进程会有所帮助，但只是适度（大约 15%）。我已经在 i7 MBPr（带 HT 的四核）和 i5（四核）Win7 系统上进行了尝试，结果相同。

有人可以解释一下这段代码有什么问题吗？或者，为什么我没有看到使用集群的优势/好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:39:09.233

您的测试似乎几乎完全是面向 I/O 的，在这种情况下 using`cluster`几乎没有什么好处（如您所见），因为无论如何 I/O 都是并发的。

要看到显着的好处，您需要让部分代码受 CPU 限制，因为只有这样您才能在集群工作程序之间提供额外的并行性。

# c# - 在 XmlTextReader 对象中读取“假”xml 文档（xml 片段）

> ID：15038663
> 
> 赞同：3
> 
> 时间：2013-02-23T08:33:49.370
> 
> 标签：c#, xml, xmldocument

**[案例]** 我收到了一堆“xml 文件”，其中包含有关大量文档的元数据。至少，这是我要求的。我在没有根元素的“xml 文件”中收到的内容，它们的结构是这样的（我遗漏了一堆元素）：

```
<folder name = "abc"></folder>
<folder name = "abc/def">
<document name = "ghi1">
</document>
<document name = "ghi2">
</document>
</folder> 
```

**[问题]** 当我尝试读取 XmlTextReader 对象中的文件时，它无法告诉我没有根元素。

**[当前解决方法]** 当然，我可以将文件作为流读取，附加 <xmlroot> 和 < /xmlroot> 并将流写入新文件并在 XmlTextReader 中读取该文件。这正是我现在正在做的事情，但我不想“篡改”原始数据。

**[请求的解决方案]** 我知道我应该为此使用 XmlTextReader，并带有 DocumentFragment 选项。但是，这会产生编译时错误：

> System.Xml.dll 中出现“System.Xml.XmlException”类型的未处理异常
> 
> 附加信息：部分内容解析不支持 XmlNodeType DocumentFragment。第 1 行，位置 1。

**[错误代码]**

```
using System.Diagnostics;
using System.Xml;

namespace XmlExample
{
    class Program
    {
        static void Main(string[] args)
        {
            string file = @"C:\test.txt";
            XmlTextReader tr = new XmlTextReader(file, XmlNodeType.DocumentFragment, null);
            while(tr.Read())
                Debug.WriteLine("NodeType: {0} NodeName: {1}", tr.NodeType, tr.Name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T13:00:19.973

这有效：

```
using System.Diagnostics;
using System.Xml;

namespace XmlExample
{
    class Program
    {
        static void Main(string[] args)
        {
            string file = @"C:\test.txt";
            XmlReaderSettings settings = new XmlReaderSettings();
            settings.ConformanceLevel = ConformanceLevel.Fragment;
            using (XmlReader reader = XmlReader.Create(file, settings))
            {
                while (reader.Read())
                    Debug.WriteLine("NodeType: {0} NodeName: {1}", reader.NodeType, reader.Name);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T15:49:10.483

尽管`XmlReader`可以使用`ConformanceLevel.Fragment`Martijn 演示的选项来读取数据，但似乎`XmlDataDocument`不喜欢拥有多个根元素的想法。

我想我会尝试一种不同的方法，就像您当前使用的方法一样，但没有中间文件。大多数 XML 库（XmlDocument、XDocument、XmlDataDocument）都可以将 a`TextReader`作为输入，因此我实现了自己的一个。它是这样使用的：

```
var dataDocument = new XmlDataDocument();
dataDocument.Load(new FakeRootStreamReader(File.OpenRead("test.xml"))); 
```

实际类的代码：

```
public class FakeRootStreamReader : TextReader
{
    private static readonly char[] _rootStart;
    private static readonly char[] _rootEnd;

    private readonly TextReader _innerReader;
    private int _charsRead;
    private bool _eof;

    static FakeRootStreamReader()
    {
        _rootStart = "<root>".ToCharArray();
        _rootEnd = "</root>".ToCharArray();
    }

    public FakeRootStreamReader(Stream stream)
    {
        _innerReader = new StreamReader(stream);
    }

    public FakeRootStreamReader(TextReader innerReader)
    {
        _innerReader = innerReader;
    }

    public override int Read(char[] buffer, int index, int count)
    {
        if (!_eof && _charsRead < _rootStart.Length)
        {
            // Prepend root element
            return ReadFake(_rootStart, buffer, index, count);
        }

        if (!_eof)
        {
            // Normal reading operation
            int charsRead = _innerReader.Read(buffer, index, count);
            if (charsRead > 0) return charsRead;

            // We've reached the end of the Stream
            _eof = true;
            _charsRead = 0;
        }

        // Append root element end tag at the end of the Stream
        return ReadFake(_rootEnd, buffer, index, count);
    }

    private int ReadFake(char[] source, char[] buffer, int offset, int count)
    {
        int length = Math.Min(source.Length - _charsRead, count);
        Array.Copy(source, _charsRead, buffer, offset, length);
        _charsRead += length;
        return length;
    }
} 
```

第一次调用`Read(...)`将只返回`<root>`元素。后续调用正常读取流，直到到达流的末尾，然后输出结束标记。

代码有点……嗯……主要是因为我想处理一些永远不会发生的情况，即有人试图一次读取少于 6 个字符的流。

# python - 如何找到损坏的管道（Python 单元测试）？

> ID：15038671
> 
> 赞同：2
> 
> 时间：2013-02-23T08:35:30.417
> 
> 标签：python, unit-testing, python-3.x, multiprocessing

我编写了一个 Thread 类，它从 URL 读取、处理流并将结果作为属性保存。在单元测试中，将“rb”文件而不是 URL 传递给对象。

我已将该类重构为带有队列的进程。正常运行程序会给我预期的结果，但在单元测试中，我遇到了“断管”错误。

问题是我看不到哪个测试失败了，所以我什至无法开始调试。

```
def testThread(self):
    f = open('TestFiles/test.html', 'rb')

    q = Queue()     #One individual queue for each individual process
    myclass = MyClass(q, f)
    myclass.start()
    myclass.join()

    value = myclass.get_data()
    q.close()

    self.assertEqual(0.7628, value, value) 
```

注意：文件在 run() 方法中关闭。

# node.js - 使用 express 节点中的本机驱动程序连接到 heroku 上的 mongodb

> ID：15038673
> 
> 赞同：2
> 
> 时间：2013-02-23T08:35:41.527
> 
> 标签：node.js, mongodb, heroku, express

在我的本地机器上，我以这种方式连接到 mongoDb“tasksdb”数据库：

```
var server = new Server('localhost', 27017, {auto_reconnect: true, });
db = new Db('tasksdb', server);

db.open(function(err, db) {
if(!err) {
   console.log("Connected to 'tasksdb' database");
   db.collection('tasks', {safe:true}, function(err, collection) {
if (err) {
   console.log("The 'tasks' collection doesn't exist. Creating it with sample data...");
   populateDB();
  }
 });
 }
}); 
```

如何强制它在heroku上工作？我试过了：

```
var server = new Server(process.env.MONGOLAB_URI, process.env.PORT, {auto_reconnect: true, });
db = new Db('heroku_mydatabase', server); 
```

但它不起作用。在网络中的每个示例中，人们都使用“连接”，但我想这样做。可能吗 ？

# c++ - “Peek ahead”以检查下一次对 getline(file,line) 的调用是否会返回 false - 不实际调用它，即不消耗该行

> ID：15038676
> 
> 赞同：0
> 
> 时间：2013-02-23T08:36:00.713
> 
> 标签：c++

所以我们通常会做类似的事情

```
std::ifstream file("file");
std::string line;
bool ret = getline(file,line); 
```

并且“ret”布尔值告诉我们是否找到了该行。

但是我如何事先确定下一次调用“getline()”是否肯定会返回 false？换句话说，我如何检查我是否已经到达 EOF，而不必调用“getline()”来确认它？

我想这样做的原因是我有这样的情况：

```
while(getline(file,line))
{
  //code
  //i want to do some "final" thing right here in this loop, for the last line.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:44:14.313

你可以使用**[`std::istream::peek`](http://www.cplusplus.com/reference/istream/istream/peek/)**

> 读取并返回下一个字符而不提取它，即将它作为要从流中提取的下一个字符。

`EOF`如果到达终点，将返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:46:36.583

getline 实际上返回对 ostream 的引用，只有在达到 eof 或流变坏时才会强制转换为 false，这是无法预测的。因此，这取决于您的情况以及是否要同时处理 eof 和坏流。

# java - BigInteger 最优化时间乘法

> ID：15038678
> 
> 赞同：3
> 
> 时间：2013-02-23T08:36:13.817
> 
> 标签：java, performance, algorithm, biginteger, multiplication

嗨，我想以最及时优化的方式将 2 个大整数相乘。我目前正在使用 karatsuba 算法。任何人都可以建议更优化的方式或算法来做到这一点。

谢谢

```
public static BigInteger karatsuba(BigInteger x, BigInteger y) {

        // cutoff to brute force
        int N = Math.max(x.bitLength(), y.bitLength());
        System.out.println(N);
        if (N <= 2000) return x.multiply(y);                // optimize this parameter

        // number of bits divided by 2, rounded up
        N = (N / 2) + (N % 2);

        // x = a + 2^N b,   y = c + 2^N d
        BigInteger b = x.shiftRight(N);
        BigInteger a = x.subtract(b.shiftLeft(N));
        BigInteger d = y.shiftRight(N);
        BigInteger c = y.subtract(d.shiftLeft(N));

        // compute sub-expressions
        BigInteger ac    = karatsuba(a, c);
        BigInteger bd    = karatsuba(b, d);
        BigInteger abcd  = karatsuba(a.add(b), c.add(d));

        return ac.add(abcd.subtract(ac).subtract(bd).shiftLeft(N)).add(bd.shiftLeft(2*N));
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-17T23:17:59.567

jdk8 中的 BigInteger 版本根据输入的大小在朴素算法、Toom-Cook 算法和 Karatsuba 之间切换，以获得出色的性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T09:06:35.760

由于 O 符号中涉及的常数因素，复杂性和实际速度在实践中是非常不同的事情。总有一点复杂性占主导地位，但它很可能超出您正在使用的（输入大小）范围。算法的实现细节（优化级别）也直接影响这些常数因素。

我的建议是尝试一些不同的算法，最好是从作者已经花费了一些精力优化的库中，并实际测量和比较它们在您的输入上的速度。

关于 SPOJ，不要忘记主要问题出在其他地方的可能性（即不在于大整数的乘法速度）。

# python - Python：循环中的字符串切片

> ID：15038684
> 
> 赞同：-1
> 
> 时间：2013-02-23T08:36:32.423
> 
> 标签：python, string

我正在尝试对以下字符串进行切片，但我的代码在第二个循环之后没有返回任何内容。

```
s = "93011NULL                5011005874          A0000000000010000000000001JKL00000000NULL                                              00000000A63"

d = [5,20,20,1,16,9,3,8,50,8,1,2]

start = 0
for x in d:
    print(s[start:x])
    start += x 
```

当我运行该代码时，我只得到：

```
43011
NULL 
```

其余十个循环打印“”，即空字符串。理想情况下，它应该在给定变量 d 中给出的字符串长度的情况下将该字符串循环并切片。

我可能做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T08:41:38.627

**更新 1**

对于您的具体问题，解决方案如下所示：

```
s = "93011NULL                5011005874          A0000000000010000000000001JKL00000000NULL                                              00000000A63"
d = [5,20,20,1,16,9,3,8,50,8,1,2]

# Convert sizes to indexes
d = [sum(d[:i+1]) for i in range(len(d))]

splits = [s[i:j] for i, j in zip([0]+d, d+[None])]

print splits 
```

**输出**

```
>>> 
['93011', 'NULL                ', '5011005874          ', 'A', '0000000000010000', '000000001', 'JKL', '00000000', 'NULL                                              ', '00000000', 'A', '63', ''] 
```

* * *

如果你需要切片，为什么不试试这个……

```
>>> s = 'AA111-99XYZ '

>>> d = [2, 4, 5, 8, 11]

>>> [s[i:j] for i, j in zip([0]+d, d+[None])]

['AA', '11', '1', '-99', 'XYZ', ' '] 
```

**解释**

`zip`将多个列表作为参数，并从每个输入列表中获取第 i 个元素的集合列表。

```
>>> zip(d, d)
[(2, 2), (4, 4), (5, 5), (8, 8), (11, 11)] 
```

我们需要`[(0, 2), (2, 4), (4, 5), (5, 8), (8, 11), (11, None)]`. 因此，列表元素需要移动一个索引。

```
>>> [0] + d
[0, 2, 4, 5, 8, 11]

>>> d + [None]
[2, 4, 5, 8, 11, None] 
```

现在我们打电话`zip`

```
>>> zip([0] + d, d + [None])
[(0, 2), (2, 4), (4, 5), (5, 8), (8, 11), (11, None)] 
```

接下来，我们调用`s[i:j]`which 将给出一张来自 index 的幻灯片`i to j-1`。

```
>>> s[0:2]
'AA'
>>> s[2:4]
'11' 
```

因此，我们创建了一个列表推导来为 zip 输出中的每个条目生成一个切片列表。

```
[ s[i:j] for i, j in zip([0] + d, d + [None]) ] 
```

这相当于

```
[ s[i:j] for i, j in [(0, 2), (2, 4), (4, 5), (5, 8), (8, 11), (11, None)] ] 
```

最后一部分，`s[i:None]`与`s[i:]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T08:43:50.780

您的问题是您正在制作第二个索引大于第一个索引的切片。对于给定的值`d`，您的切片如下所示：

第一次迭代：0,5

第二次迭代：5,20

第三次迭代：25,20 <——这就是问题所在。

请注意，这是因为您只是不断添加`start`，因此它会越来越大。

编辑：我刚刚意识到您可能误解了 Python 切片语法。第二项不是切片的长度；**相反，它是未**包含在切片中的第一个元素的索引。

如果你想对字符串进行分区（即有一组没有重叠的切片，使得它们的连接等于原始字符串），而不是使用`+=`，只需使用`=`，并设置`d`以便每个值`d`都是你所在的索引希望剪一个。（请注意，这些索引必须按升序排列。）

或者，如果您希望每个值`d`表示分区中每个切片的大小，请使用以下代码：

```
for x in d:
    print s[start:start+x]
    start += x 
```

# php - 支付宝结账火狐

> ID：15038685
> 
> 赞同：0
> 
> 时间：2013-02-23T08:36:40.300
> 
> 标签：php, paypal

我试着像[这里](https://stackoverflow.com/questions/7615964/php-easy-way-to-start-paypal-checkout)一样进行 Paypal 结帐。这适用于 Chrome，但在 Firefox 中我遇到了这个问题：

![贝宝](../Images/270f179eb17aa454f32d237647df9a5c.png)

形式

```
<html><body>
Paypal redirect...<br />
<form name="frm" action="https://sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick" />
    <input type="hidden" name="business" value="bbbb@bbb.com" />
    <input type="hidden" name="return" value="http://bbb.com/yeah.php" />
    <input type="hidden" name="undefined_quantity" value="1" />
    <input type="hidden" name="item_name" value="Order #<?= $_SESSION['order_id'] ?>" />
    <input type="hidden" name="item_number" value="order_<?= $_SESSION['order_id'] ?>" />
    <input type="hidden" name="amount" value="<?= $_SESSION['kasse_price'] ?>" />
    <input type="hidden" name="shipping" value="0.00" />
    <input type="hidden" name="no_shipping" value="1" />
    <input type="hidden" name="cn" value="Comments" />
    <input type="hidden" name="currency_code" value="EUR" />
    <input type="hidden" name="lc" value="DE" />
    <input type="hidden" name="bn" value="PP-BuyNowBF" />
    <input type="image" src="https://www.paypal.com/de_DE/i/btn/btn_paynow_SM.gif" border="0" name="submit" alt="Mit PayPal bezahlen." />
    <img alt="" border="0" src="https://www.paypal.com/de_DE/i/scr/pixel.gif" width="1" height="1" />
</form>
<script language="JavaScript">
    document.frm.submit();
</script></body></html> 
```

我检查了发送到 Paypal 的 POST 参数。两种浏览器的外观都很好。请注意，我会自动发送表单。我知道这不好，但我不知道更好的方法来尝试完成这项工作。

知道为什么 Firefox 会失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:40:38.253

这与 Firefox 或 Chrome 无关，您需要使用您的开发者帐户登录。您应该有一个开发者帐户（在此处设置[https://developer.paypal.com/](https://developer.paypal.com/)），用于定义至少一个买家和一个卖家帐户。

要使用沙盒帐户，您需要登录。您将拥有该买家帐户的“伪登录”，但这是在您已经使用开发帐户登录的情况下。

# javascript - renderAll 函数不调用

> ID：15038688
> 
> 赞同：0
> 
> 时间：2013-02-23T08:37:12.077
> 
> 标签：javascript, jquery, backbone.js, requirejs

**设想**

我正在使用backbonejs、requirejs 和jquery 制作应用程序。我正在从远程服务器检索数据。获取数据后，我想将其显示给用户。

**问题**

首先，我在`app.js`文件中获取数据，然后创建一个实例`MoviesView`并将其传递`collection`给该视图。在里面`MoviesView`，我有一个`initialize`函数，在这个函数里面我正在听一个`Event triggered`by `router`。一旦该事件被监听，那么它应该调用`renderAll`函数。**问题出在这里，它根本不调用`renderAll`函数。**

**我的代码**

这是我从服务器获取数据的功能

```
fetchBoxOfficeMovies: function () {
        var movieCollection = new MoviesCollection;

        movieCollection.fetch({success: this.successCallback, error: this.errorCallback}).then(function () {
            //console.log(movieCollection.toJSON());
            new MoviesView({ collection: movieCollection });
        });
    },

    successCallback: function () {
        console.log('successCallback');
    }, 
```

这是`router`我触发事件的地方

```
routes: {
        '': 'index'
    },

    index: function () {
        App.Vent.trigger('init');
        console.log('router');
    } 
```

这是`initialize and renderAll`MoviesView 中的函数

```
initialize: function () {
        App.Vent.on('init', this.renderAll, this);
        console.log('movies view');
    },

    renderAll: function () {
        console.log('renderAll');
    }, 
```

**我在控制台中看到的输出**

这是我在控制台中看到的

```
router 
successCallback 
movies view 
```

**如您所见，我在控制台中看不到*renderAll*。**

**问题**

**为什么我看不到*renderAll*，我该如何解决这个问题？**

**更新**

这是我的整个应用程序视图

```
var App = Backbone.View.extend({
    el: 'body',

    initialize: function () {
        App.router = new MainRouter();
        Backbone.history.start();

        this.fetchBoxOfficeMovies();
    },

    fetchBoxOfficeMovies: function () {
        var movieCollection = new MoviesCollection;

        movieCollection.fetch({success: this.successCallback, error: this.errorCallback}).then(function () {
            //console.log(movieCollection.toJSON());
            new MoviesView({ collection: movieCollection });
        });
    },

    successCallback: function () {
        console.log('successCallback');
    },

    errorCallback: function () {
        console.log('errorCallback');
    }

}); 
```

可以看出，我正在创建`MainRouter`before call的新实例`fetchBoxOfficeMovies`，这意味着我在其他所有事情之前触发事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:14:49.980

正如 DCoder 所说，您的顺序错误。重命名您的 console.log 以更好地了解正在发生的事情。

```
router                 -> I trigger a 'init' event
successCallback        -> successCallback
movies view            -> I start listening 'init' events NOW 
```

建议的“修复”：

```
movieCollection.fetch({
    success: this.successCallback, 
    error: this.errorCallback
}).then(function () {
    //console.log(movieCollection.toJSON());
    var moviesView = new MoviesView({ collection: movieCollection });
    moviesView.renderAll()
}); 
```

# ios - NSString 填充/两个字符之间的空格

> ID：15038693
> 
> 赞同：1
> 
> 时间：2013-02-23T08:38:20.667
> 
> 标签：ios, objective-c, macos, nsstring, nsarray

我在 Objective-C 中寻找一种简单的方法来在我的字符串的每 2 个字符之间添加一个空格。所以“12345678”看起来像“12 34 56 78”。

其他方式，将字符串（包含所有数字的 128 位长字符串）转换为每 2 个字符的数组。

有人知道可以帮助我吗？

谢谢。- 伊莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:56:51.503

试试这个：

```
 NSString *str = @"12345678";
    NSMutableString *tempStr = [[NSMutableString alloc] init];

    for (int position=0; position < str.length; position++) {

        if(position%2==0)
        {
            [tempStr appendString:[NSString  stringWithFormat:@"%c",[str characterAtIndex:position]]];
        }
        else
        {
            [tempStr appendString:[NSString  stringWithFormat:@"%c",[str characterAtIndex:position]]];

            NSLog(@"%@\n",tempStr);
            [tempStr setString:@""];
        }
    }
    [tempStr release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:45:32.823

试试这个：

```
NSString *str = @"12345678";
NSMutableString* mStr= [NSMutableString string];
for(NSUInteger i=0 ; i<str.length; i++)
{
    [mStr appendString: [str substringWithRange: NSMakeRange(i,1)]];
    if(i%2 && i!=0)
    {
        [mStr appendString: @" "];
    }
}
NSLog(@"%@",mStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:24:38.657

由于您似乎已经找到了解决方案，这只是另一个示例（并且不是一个特别有效的示例）如何完成它。此版本正确处理奇数个字符；

```
NSString *original = @"192190129";
NSMutableString *result = [NSMutableString stringWithCapacity:2*original.length];

for (int pos=0; pos < original.length; pos++) {

    NSString *formatToAppend = (pos && !(pos & 1)) ? @" %C" : @"%C";
    [result appendString:[NSString stringWithFormat:formatToAppend,
        [original characterAtIndex:pos]]];

}

>>> "19 21 90 12 9" 
```

如果您是初学者，自己编写（或至少阅读和理解）这样的代码是非常好的培训，并且有很多方法可以做到这一点，因此您可以尝试几种方法来查看您喜欢的代码风格。

# plugins - 早期绑定的（缺点）优点是什么？

> ID：15038699
> 
> 赞同：11
> 
> 时间：2013-02-23T08:39:23.153
> 
> 标签：plugins, dynamics-crm-2011

我正在研究 CRM 中早期和晚期绑定的优缺点。我对这个主题有一个好主意，但有些地方我不清楚。

1.  有人说早买最快，有人说晚买。有什么显着差异吗？

2.  如何处理自定义实体的早期绑定？

3.  如何处理具有自定义字段的默认实体的早期绑定？

有很多链接，但最有用的是我的鼠标。还有其他指针吗？

[亲都](https://stackoverflow.com/questions/1008903/what-are-the-disadvantages-of-early-binding)
[亲早](https://stackoverflow.com/questions/367411/early-binding-vs-late-binding-what-are-the-comparative-benefits-and-disadvanta)
[临晚](https://stackoverflow.com/questions/8421168/early-bound-classes-usage)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-23T11:38:41.440

1.  有人说早出价最快，其他人说晚出价。有什么显着差异吗？

    一种。由于早期绑定只是后期绑定实体类的包装器，并且包含其中的所有功能，因此它的运行时不会比后期绑定更快。但是，这种差异非常小，我[在 What's Fastest 类型的问题中与 Eric Lippert](http://ericlippert.com/2012/12/17/performance-rant/)不同。一个不可忽略的速度差异是开发速度。早期绑定对于开发来说要快得多，而且更不容易出错恕我直言。

2.  如何处理自定义实体的早期绑定？

    一种。CrmSrvcUtil为自定义实体[生成早期绑定的类](http://msdn.microsoft.com/en-us/library/gg327844.aspx)，就像默认的一样（我创建了[这个工具](https://xrmearlyboundgenerator.codeplex.com/)来使生成类更加容易。 **更新**：它已经转移到[GitHub](https://github.com/daryllabar/DLaB.Xrm.XrmToolBoxTools/releases) **更新 2**现在在 XrmToolBox 插件商店中，搜索为`"Early Bound Generator"`）。每次对 CRM 实体进行更改时，都需要更新实体类型定义（仅当您想要使用新的属性或实体，或者您已删除当前使用的属性或实体时。您可以使用过时的早期绑定实体类，只要您不设置任何实际不存在的属性的值，这与后期绑定的确切要求相同）

3.  如何处理具有自定义字段的默认实体的早期绑定？

    一种。请参阅问题 2 的答案。

使用早期绑定实体时的小问题之一是需要在您的`IOrganizationService`. 这对于 .js 来说很容易`OrganizationServiceProxy`，但对于插件，尤其是自定义工作流活动，可能需要更多步骤。

## 编辑 1 - 我的测试

下面是我的代码，针对一个相当不活跃的本地开发环境进行测试。随意为自己测试

```
using (var service = TestBase.GetOrganizationServiceProxy())
{
    var earlyWatch = new Stopwatch();
    var lateWatch = new Stopwatch();

    for (int i = 0; i < 100; i++)
    {
        earlyWatch.Start();
        var e = new Contact() { FirstName = "Early", LastName = "BoundTest"
        e.Id = service.Create(e);
        earlyWatch.Stop();

        lateWatch.Start();
        var l = new Entity();
        l.LogicalName = "contact";
        l["firstname"] = "Late";
        l["lastname"] = "BoundTest";
        l.Id = service.Create(l);
        lateWatch.Stop();

        service.Delete(e);
        service.Delete(l);
    }

    var earlyTime = earlyWatch.ElapsedMilliseconds;
    var lateTime = lateWatch.ElapsedMilliseconds;
    var percent = earlyWatch.ElapsedTicks / (double)lateWatch.ElapsedTicks;

} 
```

我的两个测试结果（请注意，运行两个测试在统计上并不显着，无法得出任何统计结论，但我认为它们赋予了它的权重，因为它并没有那么大的性能下降来证明一些开发收益是合理的）在哪里运行针对本地开发环境，几乎没有其他活动来破坏测试。

```
Number Creates  |   Early (MS)  |   Late (MS)   |   % diff (from ticks)
10              |   1242        |   1106        |   12.3%
100             |   8035        |   7960        |   .1% 
```

现在让我们插入数字并查看差异。12% 看起来很多，但 12% 是什么？实际差异为 0.136 秒。假设您`Contacts`每分钟创建 10 个... .136 x 60 分钟/小时 x 24 小时/天 = 195.84 秒/天或每天大约 3 秒。假设您花了 3 个开发人员小时试图找出哪个更快。为了让程序能够节省那么多时间，需要 60 天的 24/7 10 联系人/分钟处理，以便更快的代码“回报”3 小时的决策。

所以规则是，总是选择比首先更快的方法更具可读性/可维护性的方法。如果性能不够快，那么看看其他可能性。但是 100 次中有 98 次，它确实不会以最终用户可以检测到的方式影响性能。

*过早的优化是万恶之*源——DonaldKnuth

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-23T11:34:42.133

1.  可能不是。如果您想确定，我建议您运行一些测试并分析结果。

然而，这些 MSDN 文章建议后期绑定它更快。

[使用 Microsoft Dynamics CRM 进行开发的最佳实践](http://msdn.microsoft.com/en-us/library/gg509027.aspx)

> 使用早绑定类型
> 
> 当您的代码必须处理编写代码时未知的实体和属性时，请使用 Entity 类。**此外，如果您的自定义代码与数千个实体记录一起使用，则使用 E​​ntity 类会导致比早期绑定实体类型稍好一些的性能。**但是，这种灵活性有一个缺点，因为您无法在编译时验证实体和属性名称。**如果您的实体已在代码时定义并且轻微的性能下降是可以接受的，您应该使用**可以通过使用 CrmSvcUtil 工具生成的早期绑定类型。有关详细信息，请参阅在代码中使用早期绑定实体类。

[为 Microsoft Dynamics CRM 选择托管代码的开发风格](http://msdn.microsoft.com/en-us/library/jj602917.aspx#entity_programming)

> 实体编程（Early Bound vs. Late Bound vs. Developer Extensions）
> 
> 早期绑定...序列化成本随着实体在网络传输期间转换为后期绑定类型而增加。

2 & 3\. 您不必对自定义字段或实体采取任何特殊操作。Svcutil 将为两者生成类。

[在代码中使用早期绑定的实体类](http://msdn.microsoft.com/en-us/library/gg328210.aspx)

> 代码生成工具创建的类包括实体的所有属性和关系。通过在代码中使用类，您可以访问这些属性并确保类型安全。为组织中的所有实体创建了一个具有属性和关系的类。**系统实体和自定义实体的生成类型之间没有区别。**

作为旁注，我不会太挂念它，它们都是可接受的实现方法，在大多数情况下，我怀疑性能影响是否足以令人担忧。我个人更喜欢后期绑定，但这主要是因为我不喜欢生成类。

* * *

**编辑。**

我通过在 CRM 中创建帐户（一组 200 和 5000）对此进行了一些快速分析。它证实了 Microsoft 提供的信息，在两次运行中，后期绑定都快了大约 8.5 秒。在非常短的运行中，后期绑定明显更快 - 90%。然而，早期绑定很快就会加快速度，到创建 5000 条记录时，后期绑定仅快 2%。

![短期内](../Images/6ea5b002c7076700d86ae9bb0f7fd8c0.png)

![短期数据](../Images/e25586e039396adc1219bdf6e3af19a0.png)

![长跑](../Images/9e1982b6455b20320af5c70883bb5cb3.png)

![长期数据](../Images/f005810b979a35a33ced64d8aa860418.png)

[完整的细节博客在这里。](http://woodsworkblog.wordpress.com/2013/02/25/crm-2011-early-binding-vs-late-binding-performance/)

# java - 在 Struts2 中，我没有在 success.jsp 页面上获得表单值

> ID：15038703
> 
> 赞同：2
> 
> 时间：2013-02-23T08:39:48.287
> 
> 标签：java, jsp, struts2, ognl, model-driven

在我的应用程序中，我试图通过将用户的详细信息添加到数据库中来注册用户，并在成功后完全插入这些值。我需要显示表单输入页面，但在结果页面上我没有得到任何输出。

**我的动作课是**

```
package action;

import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;

import dao.Empdao;
import model.Empmodel;
public class Empaction extends ActionSupport implements ModelDriven<Object>{
private static final long serialVersionUID = 1L;
Empmodel modelobj;

    public Empmodel getModelobj() {
    return modelobj;
}

public void setModelobj(Empmodel modelobj) {
    this.modelobj = modelobj;
}
    public String execute() throws Exception{
        Empdao empdao = new Empdao();
        int queryResult = empdao.registration(modelobj);

        if (queryResult==0)
        {   
          addActionError("it is a dublicate entry please enter anothe id");
         return ERROR;
        }   
        else{

         return SUCCESS;    
            }

}

    @Override
    public Object getModel() {
        modelobj = new Empmodel();
        return null;
    }

} 
```

**Success.jsp 是**

```
<body>

  first name : <s:property value="modelobj.firstname"/> <br>
last name :<s:property value="modelobj.lastname" />
<s:property value="modelobj.id" />
<s:property value="modelobj.gender" />
<s:property value="modelobj.dob" />
<s:property value="modelobj.maritalstatus" />
<s:property value="modelobj.email" />
<s:property value="modelobj.joiningdate" />
<s:property value="modelobj.designation" />
<s:property value="modelobj.country" />
<s:property value="modelobj.state" />
<s:property value="modelobj.city" />
<s:property value="modelobj.pincode" />
<s:property value="modelobj.mobileno" />
<s:property value="modelobj.groups" />

</body>
</html> 
```

**Empmodel 类是**

```
package model;

public class Empmodel {
private String firstname;
private String lastname;                        
private String id;
private String gender;
private String dob;
private String maritalstatus;
private String email;
private String joiningdate;
private String designation;
private String address;
private String country;
private String state;
private String city;
private int  pincode;
private long mobileno;
private String groups;
public String getFirstname() {
    return firstname;
}
public void setFirstname(String firstname) {
    this.firstname = firstname;
}
public String getLastname() {
    return lastname;
}
public void setLastname(String lastname) {
    this.lastname = lastname;
}
public String getId() {
    return id;
}
public void setId(String id) {
    this.id = id;
}
public String getGender() {
    return gender;
}
public void setGender(String gender) {
    this.gender = gender;
}
public String getDob() {
    return dob;
}
public void setDob(String dob) {
    this.dob = dob;
}
public String getMaritalstatus() {
    return maritalstatus;
}
public void setMaritalstatus(String maritalstatus) {
    this.maritalstatus = maritalstatus;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}
public String getJoiningdate() {
    return joiningdate;
}
public void setJoiningdate(String joiningdate) {
    this.joiningdate = joiningdate;
}
public String getDesignation() {
    return designation;
}
public void setDesignation(String designation) {
    this.designation = designation;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getCountry() {
    return country;
}
public void setCountry(String country) {
    this.country = country;
}
public String getState() {
    return state;
}
public void setState(String state) {
    this.state = state;
}
public String getCity() {
    return city;
}
public void setCity(String city) {
    this.city = city;
}

public long getMobileno() {
    return mobileno;
}
public void setMobileno(long mobileno) {
    this.mobileno = mobileno;
}
public String getGroups() {
    return groups;
}
public void setGroups(String groups) {
    this.groups = groups;
}
public int getPincode() {
    return pincode;
}
public void setPincode(int pincode) {
    this.pincode = pincode;
}

} 
```

**struts.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
   "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
           <constant name="struts.enable.DynamicMethodInvocation" value="true"/>
           <constant name="struts.devmode" value="true"/>
          <package name="loginmodel" extends ="struts-default">

           <action name ="emplogin" class ="action.Empaction">

          <result name= "wait">/Registration/wait.jsp</result>
          <result name = "input">/Registration/empregistration.jsp</result>
           <result name ="success" type="redirect" >/Registration/success.jsp</result>
         <result name="error">/Registration/empregistration.jsp</result>                   
        </action>

          </package> 
```

**empregistration.jsp**

```
<%@ page language ="java" contentType ="text/html; charset=ISO-8859-1" pageEncoding ="ISO-8859-1"%>
<%@ taglib uri="/struts-tags" prefix="s"%>
<%@ taglib uri="/struts-dojo-tags" prefix="sx" %> 
 <html>
    <head>
       <sx:head/>
    <script type="text/javascript"  src ="script.js"></script>

    </head>  

      <body>
        <div align="center"> <h1 style="color: red">  ENPLOYEE REGISTRATION FORM</h1>
        <s:form  action="emplogin"  method="post">

      <s:textfield name="modelobj.firstname" label="Employee Firstname"/>
      <s:textfield name ="modelobj.lastname" label ="Last name"/>  
      <s:textfield name ="modelobj.id"  label="Id"/>
      <s:radio name ="modelobj.gender"   list="{'male', 'female'}" label = "Gender"/>
    <sx:datetimepicker name="dob" displayFormat="dd-MMM-yyyy"  label="DOB"></sx:datetimepicker> 
      <s:radio  name ="modelobj.maritalstatus" list="{'singale','married'}" label="Marital Status" />

      <s:textfield name ="modelobj.email" label ="Email"/>
 <sx:datetimepicker name ="modelobj.joiningdate" displayFormat="dd-MMM-yyyy" label="Joining Date"></sx:datetimepicker>

      <s:textfield name= "modelobj.designation" label = "Designation"/>
      <s:textarea name ="modelobj.address" label ="Address" />
      <s:textfield name = "modelobj.country" label ="Country" />     
      <s:textfield name  ="modelobj.state" label = "State" />
      <s:textfield name  ="modelobj.city" label ="City"/> 
      <s:textfield name ="modelobj.pincode" label ="Pincode"/>
      <s:textfield name ="modelobj.mobileno" label="Mobile No"/>
      <s:select   name ="modelobj.groups" list="{'group 1', 'group 2', 'group 3'}"  label ="Group"  cssStyle="{width:184px"/>
     <tr><td>&nbsp;</td></tr>
        <tr>
    <td>&nbsp;</td>
      <s:submit align="center"></s:submit>
      </s:form>
       </div>
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:03:38.367

您正在重定向错误的成功页面，因为您丢失了显示结果所需的值。利用

```
<result name ="success">/Registration/success.jsp</result> 
```

或者干脆

```
<result>/Registration/success.jsp</result> 
```

顺便说一句，您只有 and 的 getter 和 setter `firstname`，`lastname`因此只会显示这些属性。如果要显示其他属性，则应在字段中添加相应的方法。

您可以阅读[servlet API javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)以了解可能导致结果的原因`type="redirect"`。

为了进一步比较转发和重定向结果之间的差异，请考虑[这个线程](http://www.theserverside.com/discussions/thread.tss?thread_id=742)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:11:15.420

如果 type=redirectAction 那么你必须提到没有任何扩展名的动作名称，如果它只是重​​定向，那么你必须提到包括动作名称和扩展名，对于你的问题，这是因为重定向问题发生了。

即使在重定向到某个页面之后，当您返回结果页面时，如果您想保留数据，那么您最好放入会话中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:25:15.517

不要重定向你的页面删除它并使用

```
<result name ="success">/Registration/success.jsp</result> in you struts.xml file 
```

# javascript - 使用立即函数为对象声明方法

> ID：15038706
> 
> 赞同：0
> 
> 时间：2013-02-23T08:40:03.397
> 
> 标签：javascript, performance

我想知道这两种方法之间是否有任何区别，学习目的。

* * *

```
var myObject = {
  myMethod: function(){
    alert('Hello I am a method!')
  }
};
myObject.myMethod() 
```

* * *

```
var myObject = { 
  myMethod: (function(){
    alert('Hello I am a method!')
  })
};
myObject.myMethod() 
```

# ruby-on-rails - 仅从 Rails 中的 PostGIS 加载所需的点以进行映射

> ID：15038715
> 
> 赞同：0
> 
> 时间：2013-02-23T08:41:53.480
> 
> 标签：ruby-on-rails, google-maps, postgis

我正在将 PostGIS 数据库中的大量点、多边形和线加载到谷歌地图中。如果我加载整个数据库，它会杀死浏览器，所以我正在寻找一种仅在用户可以看到的区域中加载的方法。有没有办法做到这一点？

我正在使用 GMaps3 来显示数据、RGeo、PostGIS 和 Rails 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:42:23.180

您可以通过 ajax 加载积分。

观察`bounds_changed`地图的事件，将边界发送到服务器并让服务器响应点（由给定的边界过滤）。过滤的具体工作原理我无法准确告诉您，因为我不熟悉 PostGIS，但[ST_CONTAINS](http://postgis.net/docs/manual-2.0/ST_Contains.html)似乎是您需要的方法。

但是，用户可能会缩放到非常低的级别，在这种情况下，您仍然会获得大量的点，但您可以另外将点的加载限制到更高的缩放级别。

另一种选择（我更喜欢它）：将数据导入 FusionTable 并使用 FusionTableLayer，这将提供更好的性能。

# html - Chrome 不显示所有带有 display:inline 的列表项

> ID：15038724
> 
> 赞同：4
> 
> 时间：2013-02-23T08:42:39.393
> 
> 标签：html, css, list, google-chrome, anchor

所以我有一个包含 7 个项目的无序列表，它们显示为内联，并且 li 内部有空的锚标签（我真的需要它们是空的和锚标签）。这是一个链接[http://jsfiddle.net/FTHMf/2/](http://jsfiddle.net/FTHMf/2/)。

Chrome 只显示其中的 6 个，我想知道为什么，Firefox 似乎显示所有 7 个。

另外，出于各种原因，我不想使用 inline-block 。

有没有什么办法解决这一问题？是什么导致了问题？

谢谢！

**HTML**

```
<ul class="john">
    <li><a href="#"></a></li>
    <li><a href="#"></a></li>
    <li><a href="#"></a></li>
    <li><a href="#"></a></li>
    <li><a href="#"></a></li>
    <li><a href="#"></a></li>
    <li><a href="#"></a></li>
</ul> 
```

**CSS**

```
.john {
    width:100%;
    text-align:center;
}
.john li {
    display:inline;
}
.john li a {
    background-color:green;
    line-height:0px;
    font-size:0px;
    padding:6px;
    margin:0px 2px 0px 2px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:26:39.050

无论出于何种原因，Chrome 都没有显示第一个元素。这是一个不会以任何方式影响您的 HTML/布局，但让我知道为什么会发生的问题 - 看起来绝对是一个错误。

```
.john li:first-child a:after { position: absolute; content: ""; } 
```

[http://jsfiddle.net/chrisdanek/xW2e2/](http://jsfiddle.net/chrisdanek/xW2e2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:55:14.000

@user1128245 使用这个

```
.john li {
    float:left;
} 
```

# ruby-on-rails - Ruby on rails 命名日期/时间字段的约定

> ID：15038726
> 
> 赞同：15
> 
> 时间：2013-02-23T08:43:00.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coding-style, naming-conventions

我想做一个这样的脚手架：

```
rails generate scaffold Job started_at:datetime completed_at:datetime price:decimal paid_at:datetime estimated_completion_at:datetime comment:text 
```

我在日期时间字段中添加了“_at”，因为这似乎是惯例，因为 Rails 时间戳字段要么是日期时间的“_at”，要么是日期的“_on”。但这实际上是一个约定吗？如果我只是用“paid”而不是“paid_at”和“completed”而不是“completed_at”可以吗？

我真的很想从一开始就做到这一点。多年来我一直在用 c# 编程，但我对 ruby​​ on rails 很陌生。我喜欢所有的约定，我想确保我以正确的“rails 方式”来做这件事。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-23T09:32:51.233

我不知道任何特定的 Rails 约定，这并不重要，因为 Rails 中没有任何内容可以关闭日期时间字段。我一直采用的惯例是`_at`使用`_on`. 在一天一次的时间里说似乎总是更自然。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-10-20T12:35:52.650

命名日期和时间列的方式不是官方规定的约定，也不会影响代码的工作方式。但是，如果您想采用“Rails 方式”，您可能应该遵循 Rails 社区普遍接受的约定。

*   首先，有[一个社区驱动的 Ruby on Rails 样式指南](https://github.com/bbatsov/rails-style-guide#models)，但它不包含任何日期列命名约定。

*   一个提示是 Active Record 时间戳列，就像`created_at`@sierrasdetandil 在他们的回答中指出的那样。

*   另一种了解某些约定的方法是查看流行的 Rails 商店的 Rails 样式指南。例如[他们的风格指南中的思想机器人状态](https://github.com/thoughtbot/guides/tree/master/style/rails)：

> *   `_on`使用后缀命名日期列。
> *   `_at`使用后缀命名日期时间列。
> *   `_time`使用后缀命名时间列（指没有日期的一天中的时间） 。

这将帮助您为列找到好的名称，并防止其他开发人员混淆。我认为这是一个很好的约定，您也可以这样做，只要您没有令人信服的理由以不同的方式命名您的列。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-05T17:45:34.037

实际上，Rails 中对两个特定时间戳列的名称有一个约定：*并且*`created_at`具有`updated_at`特殊的行为。来自 [Active Record Basics — Ruby on Rails 指南；2.2 模式约定](http://edgeguides.rubyonrails.org/active_record_basics.html#schema-conventions)

> 还有一些可选的列名可以为 Active Record 实例添加额外的特性：
> 
> *   `created_at`- 首次创建记录时自动设置为当前日期和时间。
> *   `updated_at`- 每当记录更新时，自动设置为当前日期和时间。
> *   ...

该页面中没有提到以“_on”结尾的列名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T08:48:01.453

`_at`这可能不是 Rails 中的约定，但在日期/日期时间列的末尾附加实际上是有意义的。与 just 相比`paid`，`paid_at`让您认为您正在使用日期/日期时间对象，`paid`同时也可以是解释付款状态的布尔值或字符串。所以我想这不仅限于 Rails。

# java - 不打印堆栈中输入的第一个节点（toString）

> ID：15038728
> 
> 赞同：0
> 
> 时间：2013-02-23T08:43:08.947
> 
> 标签：java, linked-list, nodes, comparable, stack

首先，代码很长，但我只关心 toString 方法。我粘贴了所有内容以防万一。

该代码应该检查输入的元素是否小于堆栈顶部的元素。我已经弄清楚了那部分。当我调用我的 toString 方法来打印保存的输入时，它不会打印添加到堆栈中的第一个节点。但是，它会打印所有剩余的输入。例如，如果用户输入以下内容：

```
testing
test
te
t

What its currently outputing:
t te test

What it needs to output:
t te test testing 
```

主要的：

```
import java.util.*;

public class Stack {
public static void main(String args[]) {
    int loopInt = 1;
    PyramidStack<String> stringStack = new PyramidStack<String>();
    PyramidStack<Integer> intStack = new PyramidStack<Integer>();

    System.out
            .println("This program will save some of the strings you enter. ");
    System.out
            .println("Can you predict which ones will be saved?  (Enter nothing to quit.)");
    Scanner sc = new Scanner(System.in); // Opens Scanner for keyboard input

    try {
        do {
            System.out.print("Enter a String: ");
            String input = sc.nextLine();

            if (input.length() > 0) {

                if (stringStack.size() == 0) {
                    intStack.push(input.length());
                    stringStack.push(input);
                    System.out.println("String Saved");
                }

                else if (input.length() < intStack.peek()) {
                    stringStack.push(input);
                    intStack.push(input.length());
                    System.out.println("String Saved");

                }
                else {
                    System.out.println("String NOT saved. Already saved "
                            + intStack.countBefore(input.length())
                            + " strings that should come before this one.");
                }
            } else {
                System.out.println();
                System.out.println(stringStack.toString());
                System.out.println(intStack.toString());

                loopInt--;
                sc.close();
            }
        } while (loopInt > 0);

    } catch (NullPointerException e) {
        System.out.println("No strings have been entered. Ending the program.");
    }
}
} 
```

PyramidStack 方法：

```
import java.util.*;
import java.lang.Comparable;

public class PyramidStack<E extends Comparable<E>> extends Stack<E> {

@Override
public void push(E item) throws IllegalArgumentException {

    if (super.size == 0) {
        super.push(item);

    }
    else if(item.compareTo(super.peek()) <= 0) {

        super.push(item);
    } 
    else {
        System.out.println("String NOT saved. " + countBefore(item) +  " strings that should come before this one.");
    }
}

@Override
public String toString() {
    Node<E> node;
    node = this.top;
    String s = "";

    while(node.getNext() != null){
        s += node.getData() + " ";
        node = node.getNext();
    }    
    return s;
}

public int countBefore(E item) {
    Node<E> node;
    node = this.top;
    int i = 0;

    while(node.getNext() != null){
        if(item.compareTo(super.peek()) <= 0) {
        node = node.getNext();
        }
        else{
        i++;
        node = node.getNext();
        }
    }
    return i;
}
} 
```

堆栈方法和节点方法在下面的评论中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:49:23.597

`while(node.getNext() != null){ s += node.getData() + " "; node = node.getNext(); }`

这是您缺少打印最后一个数据的地方..您正在检查 node.getnext() 是否为空..因此它会跳过最后一个对象并且不打印..您的条件应该是
`node != null`
**OR**
在循环结束后有这个
`s += node.getData()` -- 这不会给出空指针异常，因为节点不为空.. 因为它确实检查了 node.getnext()

希望能帮助到你

# c# - PInvoke - 方法的类型签名与 PInvoke 不兼容

> ID：15038735
> 
> 赞同：0
> 
> 时间：2013-02-23T08:43:52.667
> 
> 标签：c#, c++, pinvoke

这是我试图在 C# 中使用的头文件签名和 C 代码：

```
__declspec(dllexport) emxArray_real_T *emxCreateWrapper_real_T(real_T *data, int32_T rows, int32_T cols);

struct emxArray_real_T
{
    real_T *data;
    int32_T *size;
    int32_T allocatedSize;
    int32_T numDimensions;
    boolean_T canFreeData;
};

emxArray_real_T *emxCreateWrapper_real_T(real_T *data, int32_T rows, int32_T
  cols)
{
  emxArray_real_T *emx;
  int32_T size[2];
  int32_T numEl;
  int32_T i;
  size[0] = rows;
  size[1] = cols;
  emxInit_real_T(&emx, 2);
  numEl = 1;
  for (i = 0; i < 2; i++) {
    numEl *= size[i];
    emx->size[i] = size[i];
  }

  emx->data = data;
  emx->numDimensions = 2;
  emx->allocatedSize = numEl;
  emx->canFreeData = FALSE;
  return emx;
} 
```

我目前正在尝试在 C# 中按如下方式调用它：

```
[DllImport(@"C:\bla\bla.dll", CallingConvention = CallingConvention.Cdecl)]
private static extern emxArray_real_T emxCreateWrapper_real_T(double[,] data, int rows, int cols);

double[,] array2D = new double[,] { { 1 }, { 3 }, { 5 }, { 7 } };
var x = emxCreateWrapper_real_T(array2D, 1, 4); 
```

但得到：

```
Method's type signature is not PInvoke compatible. 
```

`emxArray_real_T`目前看起来像这样：

```
[StructLayout(LayoutKind.Sequential)]
public struct emxArray_real_T
{
    //public IntPtr data;
    //public IntPtr size;
    double[] data;
    int[] size;
    public int allocatedSize;
    public int numDimensions;
    [MarshalAs(UnmanagedType.U1)]
    public bool canFreeData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:08:45.010

有多个问题。首先，您的 C++ 函数返回一个指针 (emxArray_real_T *)，但您的导入声明返回一个结构。那是行不通的。此外，您在导入声明中将数据声明为 double[,]，但在结构中声明为 double[]。建议：

*   用类替换结构
*   确定 data 应该是 double[] 还是 double[,]
*   还要检查 real_T 的最终大小。我相信这是一个平台相关变量，可以是浮点（32 位）或双精度（64 位）。

# jquery - jQuery 插入元素表示法

> ID：15038736
> 
> 赞同：0
> 
> 时间：2013-02-23T08:43:56.013
> 
> 标签：jquery, syntax, insertion

我之前有人帮过我，他们使用这种表示法在 jQuery 中插入了一个段落。我以前没见过。

```
$('<p />', {'class': 'preview',text: 'Test'}).insertAfter($uls.eq(0)); 
```

插入：

```
<p class="preview">Test</p> 
```

如何修改此代码以插入以下代码？

```
<div class="preview"><p>Test</p></div> 
```

我试过：`$('<div />', {'class': 'preview',text: '<p>Test</p>'})` 但它将`<p>`标签解析为文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:48:47.057

也许你可以使用 HTML

```
 $('<div />', {'class': 'preview'}).html('<p>Test</p>').insertAfter($uls.eq(0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T08:52:54.670

尝试使用`html`代替`text`，像这样：

```
$('<div />', {'class': 'preview', html: '<p>Test</p>'}) 
```

# php - 搜索多个表php activerecord

> ID：15038739
> 
> 赞同：0
> 
> 时间：2013-02-23T08:44:32.427
> 
> 标签：php, mysql, codeigniter, phpactiverecord

我在mysql中有两个表

用户：-id -name -email -role

位置-id-位置

我需要在 Codeigniter 中使用 PHPActiveRecord 构建一个搜索词。用户键入一个术语，例如“John”或“Designer”，我需要在用户和职位表中搜索它。我可以使用 like 运算符在 Users 表中搜索该术语，但无法弄清楚如何在 Positions 表中的 position 字段中进行搜索。

我用来在单个表中搜索的代码如下：

```
/**
 * 
 * Search users based on parameters
 * @param integer $limit
 * @param integer $start
 * @param string $term
 */
public function search_candidates($limit, $start, $term, $role)
{
  $candidates = User::all(array(
                                'conditions' => "('role' => $role) 
                                  AND ((name like '%".$term."%') 
                                  OR (email like '%".$term."%'))",
                                'limit' => $limit,
                                'offset' => $start,
                                'order' => "name"
  ));

  return $candidates;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:48:59.560

有多种方法可以执行此搜索。
[http://www.phpactiverecord.org/projects/main/wiki/Finders#joins](http://www.phpactiverecord.org/projects/main/wiki/Finders#joins)，它解释了你可以在查询中添加连接

```
 $candidates = User::all(array(
                            'joins'=>'LEFT JOIN position on (normal left join stuff)
                            'conditions' => "('role' => $role) 
                              AND ((name like '%".$term."%') 
                              OR (email like '%".$term."%'))",
                              //(Your extra where conditions for the position)
                            'limit' => $limit,
                            'offset' => $start,
                            'order' => "name"
)); 
```

我认为这至少应该让你走上正轨。

此外，当您以这种方式使用自定义条件时，您的查询对 SQL 注入开放。您必须使用查询占位符，否则您只是将原始输入放入查询中。

`User::find($id)`会自动转义。

`User::all(array('conditions'=>'id'=>1))`被自动转义

`User::all(array('conditions'=>"id = $id"))`没有逃脱。

你所要做的`User::find(array('conditions'=>'id = ?', array($id)));`

您的查询将被转换为如下所示。

```
 $candidates = User::all(array(
                            'conditions' => "('role' = ?) 
                              AND ((name like ?) 
                              OR (email like ?))",
                            'limit' => $limit,
                            'offset' => $start,
                            'order' => "name"
  ),array($role,"%$term%","%$term%"); 
```

# android - 使用 ADB 将 Nexus 7 连接到 Android 手机

> ID：15038741
> 
> 赞同：1
> 
> 时间：2013-02-23T08:45:20.880
> 
> 标签：android, adb

我正在研究一个有趣的问题。我想从我的 nexus 7 平板电脑上调试我的安卓手机。

我已经设法使用 USB 电缆连接了两个设备，并且 nexus 7 处于主机模式，但是手机仅被识别为相机或存储设备。

我在我的 nexus 7 上启动并运行了终端。我正在运行 adb 但看不到连接的三星 s3 设备。

有没有人做过这样的事情？关于可以在这里做什么的任何想法？

感谢并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:31:11.850

我尝试通过[Terminalemulator](https://play.google.com/store/apps/details?id=jackpal.androidterm)做同样的事情。我首先得到了和你一样的结果，然后我尝试从三个交叉点拔出 USB 电缆，并再次更换：

1.  在电话中
2.  OTG和标准电缆之间
3.  在关系 7

当我从nexus 7（主机）中取出并更换它时，我让它工作了。

我有一个扎根的 nexus 7，但它似乎不需要任何 su 权限。它还可以在两个设备之间放置一个 USB 集线器并添加一个键盘，以便终端操作更流畅。

我希望你让它工作，这是一个非常酷的功能！

# odp.net - ODP.NET x64 ANYCPU 和首选 32 位设置

> ID：15038742
> 
> 赞同：0
> 
> 时间：2013-02-23T08:45:27.277
> 
> 标签：odp.net, anycpu

我的机器安装了最新的 Oracle ODP.NET x64（xCopy 版本）。我的机器是x64。我不知道目标机器是 x86 还是 x64，所以我在 VS 2012 中将构建属性设置为 AnyCPU。有一个默认复选框处于活动状态“首选 32 位”

编译没问题，但是当我运行代码时它说找不到程序集。取消选中“首选 32 位”可以解决此问题。

但这是什么原因造成的？我认为首选 32 位是可以的，但如果这是唯一的选择，它将使用 x64。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:43:24.210

带有“首选 32 位”的“任何 CPU”将在 64 位机器上作为 32 位进程运行。而且由于 32 位进程无法加载 64 位 ODP.NET 程序集（以及本机 DLL），它会引发您提到的异常。

您可以在此处阅读有关“首选 32 位”设置的更多信息：[https ://stackoverflow.com/a/12066861/631802](https://stackoverflow.com/a/12066861/631802)

# c# - 如何从创建它的线程以外的线程读取文本框？

> ID：15038744
> 
> 赞同：1
> 
> 时间：2013-02-23T08:46:00.960
> 
> 标签：c#, multithreading

我对 C# 还很陌生，我已经编写了几个功能程序，但它们都是单线程应用程序。这是我的第一个多线程应用程序，我正在努力解决这个“跨线程操作无效：控制'cbLogType'从创建它的线程以外的线程访问”错误。我的应用程序在用户定义的事件日志源 (cbLogType) 中搜索 Windows 事件查看器以查找用户定义的事件 ID。我正在使用后台工作进程来完成所有工作，并且正在使用 worker.reportprogress 更新标签，但是在调试时收到上述错误。我尝试了几种 Invoke 方法，但似乎都没有解决我的错误。我也尝试过删除组合框并直接在代码中设置日志源，这在一定程度上有效，但仍然失败。我已经包含了我的代码，任何帮助将不胜感激。我怀疑我可能没有正确使用 Invoke 方法。提前致谢！代码：

```
 private void bgWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        {
            if (File.Exists(@"C:\Events.log"))
                MessageBox.Show("File 'Events.log' already exists. All new data will be appended to the log file!", "Warning!");

            string message = string.Empty;
            string eventID = (tbEventID.Text);

            string text;

            EventLog eLog = new EventLog();
            Invoke((MethodInvoker)delegate() { text = cbLogType.Text; });
            eLog.Source = (this.cbLogType.Text); // I am receiving the error here
            eLog.MachineName = ".";

            int EventID = 0;
            string strValue = string.Empty;
            strValue = tbEventID.Text.Trim();
            //string message = string.Empty;

            EventID = Convert.ToInt32(strValue); // Convert string to integer

            foreach (EventLogEntry entry in eLog.Entries)
            {
                int entryCount = 1;
                if (cbDateFilter.Checked == true)
                {
                    if (entry.TimeWritten > dtPicker1.Value && entry.TimeWritten < dtPicker2.Value)
                        if (entry.InstanceId == EventID)
                            message = "Event entry matching " + (tbEventID.Text) + " was found in " + (cbLogType.Text);
                    using (StreamWriter writer = new StreamWriter(@"C:\Events.log", true))
                        writer.WriteLine("EventID: " + entry.InstanceId +
                            "\r\nDate Created: " + entry.TimeWritten +
                            "\r\nEntry Type: " + entry.EntryType +
                            "\r\nMachinename: " + entry.MachineName +
                            "\r\n" +
                            "\r\nMessage: " + entry.Message +
                            "\r\n");
                    if (entry.InstanceId != EventID)
                        message = "No event ids matching " + (tbEventID.Text) + " was found in " + (cbLogType.Text);
                }
                else
                {
                    if (cbDateFilter.Checked == false)
                    {
                        if (entry.InstanceId == EventID)
                            using (StreamWriter writer = new StreamWriter(@"C:\Events.log", true))
                                writer.WriteLine("EventID: " + entry.InstanceId +
                                    "\r\nDate Created: " + entry.TimeWritten +
                                    "\r\nEntry Type: " + entry.EntryType +
                                    "\r\nMachinename: " + entry.MachineName +
                                    "\r\n" +
                                    "\r\nMessage: " + entry.Message +
                                    "\r\n");
                        else if (entry.InstanceId != EventID)
                            message = "No event ids matching " + (tbEventID.Text) + " was found in " + (cbLogType.Text);
                    }
                    bgWorker1.ReportProgress((entryCount) * 10, message);
                    entryCount++;
                }
            }
        }
    }

    private void bgWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        lblStat.Text = e.UserState.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:54:49.763

您正在非 UI 线程中访问 c​​bLogType。

改成

```
eLog.Source = text; 
```

# javascript - 使用 XMLHttpRequest 从 Javascript 调用 Soap Web 服务函数

> ID：15038745
> 
> 赞同：1
> 
> 时间：2013-02-23T08:46:10.983
> 
> 标签：javascript, web-services, soap, xmlhttprequest

Web服务中函数的参数：

```
POST /_vti_bin/******.ConnectorService.asmx HTTP/1.1
Host: www.*****.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://www.*****.com/SaveFile"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <SaveFile xmlns="http://www.proged.tn">
      <urlSite>string</urlSite>
      <iListName>string</iListName>
      <iUpdateMode>NotVerified or FillEmpty or Replace or NotReplace</iUpdateMode>
      <iMetaData>xml</iMetaData>
      <iAttachments>xml</iAttachments>
      <iOverWrite>boolean</iOverWrite>
    </SaveFile>
  </soap:Body>
</soap:Envelope> 
```

我的js代码：

```
function sendReq()
{
var my_title="title";
var c='<img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhE.....AAAElFTkSuQmCC" />';
    var b= false;
    var wsUrl = "http://www.proged.tn/sites/toyourbusiness/_vti_bin/PROGED.ConnectorService.asmx?op=UpdateListItem";
    var soapRequest ='<?xml version="1.0" encoding="utf-8"?>'+
        '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'+
  '<soap:Body>'+
    '<SaveFile xmlns="http://www.*****.com">'+
      '<urlSite>http://www.*****.com/***/***</urlSite>'+
      '<iListName>{*****}</iListName>'+
      '<iUpdateMode>NotVerified</iUpdateMode>'+
      '<iMetaData><Fields><Field Name="Title" >'+my_title+'</Field></Fields></iMetaData>'+
      '<iAttachments><Attachments><Attachment Name="name of the file">'+c+'</Attachment></Attachments></iAttachments>'+
      '<iOverWrite>'+b+'</iOverWrite>'+
    '</SaveFile >'+
  '</soap:Body>'+
'</soap:Envelope>';
    var xmlhttp =  createXMLHttpRequest();

    xmlhttp.open("POST", wsUrl, true,"username","password");

    xmlhttp.setRequestHeader ("Post", "/_vti_bin/****.ConnectorService.asmx HTTP/1.1");
    xmlhttp.setRequestHeader ("Host", "www.****.com");
    xmlhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
    xmlhttp.setRequestHeader ("Content-Type", "text/xml; charset=utf-8");
    xmlhttp.setRequestHeader("Content-Length", soapRequest.length);
    xmlhttp.setRequestHeader ("SOAPAction", "http://www.****.com/SaveFile");

    xmlhttp.onerror = function(e) {
        alert("Error ocurred. Error = " + e.message);
    }
    xmlhttp.ontimeout = function(e) {
        alert("Timeout error!");
    }
    xmlhttp.onreadystatechange  = function () { 
        alert(xmlhttp.readyState);

        if (xmlhttp.readyState==4)
        {
            alert(xmlhttp.responseText);
            alert(xmlhttp.status);
            // if "OK"
            if (xmlhttp.status==200 || xmlhttp.status==0)
            {
                alert(xmlhttp.responseXML);
            //[Get xmlhttp.responseXML.xml and do something with it]

            }
            else
            {
            //[Get xmlhttp.responseXML.xml and do something with it in the case of an error]
            }
        }
    }

    xmlhttp.send(soapRequest);
} 
```

这会返回 xmlhttp.responseXML=null, status=0，怎么回事！！

# php - preg_match 用于我想要的电子邮件验证，但不知何故我不知道我在哪里搞砸了

> ID：15038749
> 
> 赞同：0
> 
> 时间：2013-02-23T08:46:46.060
> 
> 标签：php, email

哦 eh...ya ...很多评论说可以使用很多电子邮件验证，但对于这个我必须像下面提到的那样做这就是为什么....

我需要像这样验证电子邮件

字母数字字符后跟@，后跟字母数字字符，后跟. 后跟 2 – 4 个字母数字字符

这就是我所做的，但不知何故我知道这是之后的最后一部分。我搞砸了，但我找不到我搞砸的地方......

```
preg_match("/^([0-9]|[a-z])([0-9]|[a-z]|[_-])*@([0-9]|[a-z])*\.([0-9][a-z]){2,4}$/i","") 
```

一开始我使用 [0-9]|[az])([0-9]|[az]|[_-] 因为我不希望人们能够使用 _- 作为开始......所以被迫仅以数字/字母开头

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:50:14.827

一定有一百万不同的人为电子邮件验证编写了一个新的正则表达式。如果您对电子邮件格式感兴趣，您可以使用

```
$email = filter_var($email, FILTER_VALIDATE_EMAIL); 
```

如果最终值为空，则初始值不是有效的电子邮件地址格式。

（作为额外的步骤，您可以尝试使用此函数[http://php.net/manual/en/function.checkdnsrr.php](http://php.net/manual/en/function.checkdnsrr.php)来验证域）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:58:03.777

电子邮件验证的原因是什么？当您尝试输入电子邮件并且由于愚蠢的验证而无法输入时，您会感到非常沮丧。我认为检查'@'和'.'的可用性是没有意义的。标志，以防用户无意中错过了这一点。

```
$res = preg_match("/@[^@\.]*\./", $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:52:31.053

试试这个：

^[0-9a-z_\-]+@[0-9a-z_\-]+\.[0-9a-z]{2,4}$

但正如所说：有现成的正则表达式，比试图重新发明轮子要好得多。此外，这种当前方法并*不能*计算所有有效地址并验证一些非法地址。

# c# - WebBrowserDocumentCompleted

> ID：15038751
> 
> 赞同：0
> 
> 时间：2013-02-23T08:47:22.540
> 
> 标签：c#, .net, winforms, webbrowser-control

如何使正在进行的操作 WebBrowserDocumentCompleted 在单独的线程中工作。所以它不会影响主窗体（不会挂起整个应用程序）

**表格1**

```
private void bStart_Click(object sender, EventArgs e)
        {
            wb.Navigate("http://www.moswar.ru");
        } 
```

**表格2**

```
 public void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
            {
                wb = sender as WebBrowser;
                ThreadPool.QueueUserWorkItem(new WaitCallback((object unused) =>

                    {

                        if (wb.Document.GetElementById("login-email") != null)
                        {
                            wb.Document.GetElementById("login-email").InnerText = "myemail@blah.pe";
                            wb.Document.GetElementById("login-password").InnerText = "MyPassword";
                           GetElementsByClassName(new string[] { "button luxury" })[0].InvokeMember("click");
                        }

                if (e.Url.AbsoluteUri == "http://www.moswar.ru/player/" || e.Url.AbsoluteUri == "http://www.moswar.ru/player/#login")
                {
                    wb.Navigate("http://www.moswar.ru/metro/");
                }
                    }));
            //and so on .....
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:00:51.357

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
  ThreadPool.QueueUserWorkItem(delegate
  {
    MessageBox.Show("hi");
  }
} 
```

# c++ - C ++中的神秘分段错误？

> ID：15038752
> 
> 赞同：0
> 
> 时间：2013-02-23T08:47:25.793
> 
> 标签：c++, segmentation-fault

我一直在寻找，找不到这样的东西。现在，我不会对我的整个程序感到厌烦。它非常长。但是，这是您的基本概述：

```
int main()
{
  int i=0;
  int h=5;

  cout << "h(IS) = " << h << endl;

  cout << "testing comment.";

  while(i < 10)
  {
  cout << "I'm in the loop!";
  i++;
  }

  return 0;
} 
```

看起来很棒，对吧？好的，问题就在这里。我运行它，我得到一个分段错误。最奇怪的部分是我得到它的地方。该测试评论甚至不打印。哦，如果我在循环之前注释掉所有行，我仍然会出错。

所以，这是我的输出，所以你明白：

```
h(IS) = 5
Segmentation fault 
```

我完全，完全，困惑。在我的程序中， h 调用了一个函数 - 但是注释掉打印 h 的行和函数调用都没有效果，事实上，它所做的只是给出了打印 h 行上方的行曾经所在的分段错误。

是什么导致了这个故障？我能做些什么来测试它的来源？

请保持您的答案简单，与这里的大多数人相比，我只是一个初学者:)

注意：我可以根据要求提供我的完整代码，但它有 600 行长。

编辑：我在这里粘贴了真实的代码：http: [//pastebin.com/FGNbQ2Ka](http://pastebin.com/FGNbQ2Ka)

原谅到处都是奇怪的评论——还有数组。这是一项学校作业，我们必须使用它们，而不是指针。目标是打印出 15-Puzzle 的解决方案。现在是凌晨 1 点，所以我不会在整个过程中修复我恼火的评论。

我最近很生气，并评论了整个第一次印刷，只是因为我认为里面有东西……但不……不是。我仍然得到错误。只是没有打印任何东西。

对于那些有兴趣的人，我的输入信息是 0 6 2 4 1 10 3 7 5 9 14 8 13 15 11 12

非常感谢，所有帮助的人！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T09:03:14.700

您滑过数组边界，导致损坏：

```
for (i=0; i<=4; i++)
{
  for (j=0; j<=4; j++)
  {
        if (cur[i][j] == 0)
        {
          row = i;
          col = j;
        }
  }
} 
```

您的`i`和`j`索引不得达到 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:55:34.647

*valgrind*是调试内存访问问题的好工具。它在 Linux 上非常容易使用。只需安装 G++ 和 valgrind，然后运行（不带`$`符号）：

```
$ g++ -g -o prog prog.cpp
$ valgrind ./prog 
```

它将打印有关内存访问问题的非常详细的错误消息，以及源代码行号。如果这些对您仍然没有意义，请发布完整的源代码 (prog.cpp) 和 valgrind 的完整输出。

我已经为你运行了 valgrind，它的输出在这里： http: [//pastebin.com/J13dSCjw](http://pastebin.com/J13dSCjw)

您似乎使用了一些未初始化的值：

```
==21408== Conditional jump or move depends on uninitialised value(s)
==21408==    at 0x8048E9E: main (prog.cpp:61)
...
==21408== Conditional jump or move depends on uninitialised value(s)
==21408==    at 0x804A809: zero(int (*) [4], int (*) [4], int*, int, int, int, int, int, int) (prog.cpp:410)
==21408==    by 0x804A609: lowest(int (*) [4], int (*) [4], int, int, int, int, int, int) (prog.cpp:354)
==21408==    by 0x804932C: main (prog.cpp:125)
... 
```

要解决这些问题，请添加代码来初始化上面错误行中描述的变量（例如第 61、410 行），然后重新编译，并再次使用 valgrind 重新运行，直到所有错误消失。

如果您的程序在修复了 valgrind 报告的所有问题后仍表现异常，请告诉我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T09:08:35.390

第 57 - 67 行：

```
for (i=0; i<=4; i++)
{
  for (j=0; j<=4; j++)
  {
    if (cur[i][j] == 0)
        {
          row = i;
          col = j;
        }
  }
} 
```

这段代码中至少有一个错误，cur 被声明为 int cur[4][4]; 这意味着当 j==4（并且当 i==4 时）您不在数组的范围内（当然，您在其中一些数组的内存中，但不是全部）有效值将是 0 - 3。

# java - 在java中制作大小为biginteger的bigInteger数组

> ID：15038754
> 
> 赞同：1
> 
> 时间：2013-02-23T08:48:05.557
> 
> 标签：java, biginteger

我正在尝试制作一个大小为 biginteger 的 biginteger 数组。

```
public class Polynomial4   
{  
private BigInteger[] coef;      
private BigInteger deg;   
public Polynomial4(BigInteger a,BigInteger b)   
{  
coef =  new BigInteger[b+1];// here its giving the error   
coef[b] = a; // here also its showing error *  ///required int found Biginteger  

}    

} 
```

请帮助我....提前谢谢....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T08:50:21.060

**[BigInteger](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)**有一个[**intValue**](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#intValue%28%29)方法。它将 BigInteger 转换为 int 原语。数组期望 int 作为其大小，而 BigInteger 是一个对象。

```
 coef =  new BigInteger[b.intValue()+1];
       coef[b.intValue()] = a; 
```

# svn - 为 Subversion 存储库目录创建 HTTP 别名

> ID：15038763
> 
> 赞同：0
> 
> 时间：2013-02-23T08:49:26.873
> 
> 标签：svn

我想授予我们的一个开发团队读/写访问权限，以仅访问 SVN 存储库中的特定子目录。我使用 subversion.conf(httpd) 中的指令“AuthzSVNAccessFile”实现了这一点。

假设我在我的 svn 存储库中有以下目录结构：
- 工作区
      - 分支
             - 移动
                   - 应用程序
                         - Phase1
                         - Phase2
                         - Phase3 （这是我要授予的目录）.....

我们的开发团队可以使用以下 URL
       [http://mydomain.com/svn/Workspace/Branches/Mobile/App/Phase3访问 Phase3](http://mydomain.com/svn/Workspace/Branches/Mobile/App/Phase3)

如何创建如下所示的短网址来访问上述网址。
       [http://mydomain.com/svn/Phase3](http://mydomain.com/svn/Phase3)

请帮我完成这件事。谢谢。

我的 apache 配置如下：
<Location /Phase3>
     DAV svn
     ReWriteEngine On
     ReWriteRule ^Phase3$ Workspace/Branches/Mobile/App/Phase3
     SVNParentPath /var/www/svn
     AuthzSVNAccessFile /var/www/svn/Workspace/conf/authz
     要求有效-user
     AuthType Basic
     AuthName "Subversion repositories"
     AuthUserFile /etc/svn-auth-users
</Location>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:07:17.600

**前言**：我从未将它用于 SVN 位置，以后我会尽量避免使用它，但您必须进行测试。我无法用简单的语言解释，为什么我尽量避免`Alias`指令，你可以把它想象成我的“interbal voice”

**脸**：

对于这个简单的案例，我认为 mod_rewrite 有点矫枉过正，建议从 mod_alias 开始。[“...mod_alias 旨在处理简单的 URL 操作任务...”](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)

在相应的容器内（位置或虚拟主机，但我将从**外部和**SVN-Location 定义之前开始）

`Redirect /svn/Phase3 /svn/Workspace/Branches/Mobile/App/Phase3`

如果 Phase3 反过来，是节点，而不是叶子，你可能不得不使用`RedirectMatch`指令

# mysql - mysql从列中减去两行并放入别名

> ID：15038767
> 
> 赞同：2
> 
> 时间：2013-02-23T08:49:48.607
> 
> 标签：mysql, sql, coalesce, subtraction

我有**`meter_readings`**带有列的表：`id`, `date_taken`, `kwh`.

我正在尝试将列中的两行相减`kwh`并将结果放入名为`consumption`.

我正在使用：

```
SELECT id, kwh COALESCE(kwh-(SELECT kwh FROM meter_readings WHERE id= id+1), kwh) AS consumption 
FROM meter_readings; 
```

我在消费别名中得到的和原来的一样简单`kwh`：

```
 id   date_taken        kwh        consumption 
  1   2013-01-01      4567.89       4567.89 
  2   2013-01-08      4596.71       4596.71  
  3   2013-01-15      4607.89       4607.89 
```

我想要的是：

```
 id   date_taken        kwh        consumption 
  1   2013-01-01      4567.89          0
  2   2013-01-08      4596.71        28.11
  3   2013-01-15      4607.89        11.18 
```

所以 id 1 = 0 因为这是第一个 date_taken kwh 读数，所以不需要消耗值。这是试图计算一年多的每周千瓦时消耗量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:55:29.887

只需给表名一个别名，相关子查询中的表一个不同的别名。像这样的东西：

```
SELECT 
  m1.id, 
  m1.kwh,
  COALESCE(m1.kwh - (SELECT m2.kwh 
                     FROM meter_readings AS m2
                     WHERE m2.id = m1.id + 1),
           m1.kwh) AS consumption 
FROM meter_readings AS m1; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/57be2/1)

这会给你：

```
| ID |     KWH | CONSUMPTION |
------------------------------
|  1 | 4567.89 |     1141.18 |
|  2 | 3426.71 |     1181.37 |
|  3 | 2245.34 |     2245.34 | 
```

* * *

## 更新 1

对于更新后的样本数据，只需`WHERE m2.id = m1.id - 1`在相关子查询中使用 with`COALESCE(..., 0)`以便第一个为 0。像这样：

```
SELECT 
  m1.id, 
  date_format(m1.date_taken, '%Y-%m-%d') AS date_taken,
  m1.kwh,
  COALESCE(m1.kwh - (SELECT m2.kwh 
                     FROM meter_readings m2
                     WHERE m2.id = m1.id - 1), 0) AS consumption 
FROM meter_readings m1; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/fe43e/3)

这会给你：

```
| ID | DATE_TAKEN |     KWH | CONSUMPTION |
-------------------------------------------
|  1 | 2013-01-01 | 4567.89 |           0 |
|  2 | 2013-01-08 | 4596.71 |       28.82 |
|  3 | 2013-01-15 | 4607.89 |       11.18 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:55:59.523

COALESCE 返回第一个非空值，所以你必须在没有 COALESCE 的情况下尝试这个查询，看看有什么问题

# hadoop - 虚拟机hadoop上的文件块复制分配

> ID：15038771
> 
> 赞同：0
> 
> 时间：2013-02-23T08:50:41.850
> 
> 标签：hadoop, replication, allocation

我想尝试实现我从 IEEE“虚拟云中的位置感知 MapReduce”获得的这篇论文工作。这里总结一下：8台物理机，每台机器包含4台虚拟机，每台VM安装hadoop hdfs。假设我们有一个包含 p 台物理机的集群，每台都有一个硬盘，副本数为 3。那么 n 个文件块从集群外的另一台计算机放入集群或在集群中随机生成。该模型是关于具有一定数据模式的数据模式生成和任务模式生成。每个块都有相同的概率被放置在托管相同数量虚拟机的物理机上。可能会出现数据模式，使用 hadoop 策略，文件块副本所有堆栈在一台物理机器上，因为 hadoop 的策略数据分配是随机的。 [http://imageshack.us/photo/my-images/42/allstack.png/](http://imageshack.us/photo/my-images/42/allstack.png/)

建议的策略是循环分配和蛇形分配，理论上是这样的：http: [//imageshack.us/photo/my-images/43/proposed.png/](http://imageshack.us/photo/my-images/43/proposed.png/)

如何让hadoop知道一些虚拟机在一台物理机器上？

使hadoop不将文件块的第二个和第三个副本复制到同一物理机上的虚拟机上？？？我问过如何实现这样的，并得到答复，它使用机架感知配置。但我仍然感到困惑，需要更多关于此的参考。

我如何跟踪这些数据，那些文件块复制均匀分布在物理机器上，确保在一台物理机器上没有文件块副本全部堆栈？确定我是否按照机架意识进行配置，文件块副本均匀分布在物理机上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:02:33.633

假设：我们知道哪个虚拟机是在哪个物理机上创建的。

这种假设在公共云环境中不成立。因此，下面描述的解决方案不能在那里工作。下面描述的解决方案将在私有云中工作

实施机架感知包括 2 个步骤

1.  core-site.xml 中的设置脚本文件名

    ```
     <property>
          <name>topology.script.file.name</name>
          <value>core/rack-awareness.sh</value>
     </property> 
    ```

2.  实现脚本

    一个示例 rack-awareness.sh 可以如下所示

    ```
    HADOOP_CONF=/etc/hadoop/conf
    while [ $# -gt 0 ] ; do
      nodeArg=$1
      exec< ${HADOOP_CONF}/cluster.data
      result=”" 
      while read line ; do
         ar=( $line ) 
         if [ "${ar[0]}” = “$nodeArg” ] ; then
           result=”${ar[1]}”
         fi
      done 
      shift 
      if [ -z "$result" ] ; then
         echo -n “/default/rack “
      else
         echo -n “$result “
      fi
    done 
    ```

    而cluster.data的内容可以是

    ```
    hadoopdata1.ec.com     /dc1/rack1
    hadoopdata1            /dc1/rack1
    10.1.1.1               /dc1/rack2 
    ```

如您所见，Hadoop 完全依赖于我们提供的机架值。您可以使用此事实将数据块分布在存在于不同物理机上的虚拟机上。

例如。

```
Virtual Machine 1 (VM1) 10.83.51.2 is on Physical Machine 1 (PM1)
Virtual Machine 2 (VM2) 10.83.51.3 is on Physical Machine 1 (PM1)
Virtual Machine 2 (VM2) 10.83.51.4 is on Physical Machine 2 (PM2) 
```

您可以将 cluster.data 作为

```
10.83.51.2 /DC1/rack1
10.83.51.3 /DC1/rack1
10.83.51.4 /DC1/rack2 
```

# javascript - document.getElementById() 通过分配动态变量

> ID：15038772
> 
> 赞同：2
> 
> 时间：2013-02-23T08:50:56.200
> 
> 标签：javascript, html

我正在使用该表的 td 中输入字段的 id 在 html 表中动态创建行。使用新添加的行和输入框 id 正确创建的表也创建了。但是当我尝试使用 id 获取该输入框时，它会引发空异常。

```
var cell1 = row.insertCell(1);
var element1 = document.createElement("input");
    element1.name = rId + "_" + rowCount + "_newscheduledate";
    element1.id = rId + "_" + rowCount + "_newschedueldate";
    cell1.appendChild(element1);

     alert(rowCount+"  : "+rId);  //here alert shows the values
     var tt = document.getElementById(rId + '_' + rowCount + '_newscheduledate');
     alert(tt); // here null comes 
```

**异常是这样的**

```
Error: document.getElementById(rId + ("_" + rowCount + "_newscheduledate")) is null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:53:35.497

改变：-

```
element1.id = rId + "_" + rowCount + "_newschedueldate"; 
```

到

```
element1.id = rId + "_" + rowCount + "_newscheduledate"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:00:15.483

你有一个拼写错误

element1.id = rId + "_" + rowCount + "_newschedueldate";

需要

element1.id = rId + "_" + rowCount + "_newscheduledate";

# android - buttonclick 上没有开始活动？

> ID：15038775
> 
> 赞同：0
> 
> 时间：2013-02-23T08:51:44.960
> 
> 标签：android, android-activity

```
 Button b1=(Button)findViewById(R.id.b1);
           final EditText ed=(EditText)findViewById(R.id.ed1);
           TextView t=(TextView)findViewById(R.id.t1);
           b1.setOnClickListener(new Button.OnClickListener() { 
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                     abc=ed.getText().toString();
                    Intent intent=new Intent(v.getContext(),AnotherActivity.class);
                    startActivityForResult(intent,0);

                }
                 }) 
```

这是我的主要活动代码，我正在点击按钮开始另一个活动，但是我得到了错误并且我的应用程序崩溃了，有人可以帮我删除这个错误/

```
02-23 14:20:06.557: E/AndroidRuntime(2732): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newpicker/com.example.newpicker.AnotherActivity}: java.lang.NullPointerException 
```

这是我的日志猫

```
public class AnotherActivity extends Activity {

 static Context context;
   public boolean a;
    private DownloadManager downloadManager;
 static TextView tt1;
  String url="http://www.digitalmarketingbox.com/";
  private DownloadManager dm;
  String v1,v2;
   ArrayList<String> imageid = new ArrayList<String>();
    ArrayList<String> imagepath = new ArrayList<String>();
   ArrayList<String> playlist_content = new ArrayList<String>();
     ArrayList<String> al=new ArrayList();
     String i1;
   @Override
   protected void onCreate(Bundle savedInstanceState) 
   {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.showimages);
            //tt1=(TextView)findViewById(R.id.text1);
            TextView tt1=(TextView)findViewById(R.id.it);
            AnotherActivity.tt1.append(MainActivity.abc);

   }

    02-23 14:35:08.561: D/dalvikvm(4900): Late-enabling CheckJNI
02-23 14:35:08.702: D/libEGL(4900): loaded /system/lib/egl/libEGL_adreno200.so
02-23 14:35:08.702: D/libEGL(4900): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
02-23 14:35:08.702: D/libEGL(4900): loaded /system/lib/egl/libGLESv2_adreno200.so
02-23 14:35:08.702: I/Adreno200-EGL(4900): <eglInitialize:269>: EGL 1.4 QUALCOMM build: Nondeterministic AU_full_mako_PARTNER-ANDROID/JB-MR1-DEV_CL2961380_release_AU (CL2961380)
02-23 14:35:08.702: I/Adreno200-EGL(4900): Build Date: 12/10/12 Mon
02-23 14:35:08.702: I/Adreno200-EGL(4900): Local Branch: 
02-23 14:35:08.702: I/Adreno200-EGL(4900): Remote Branch: m/partner-android/jb-mr1-dev
02-23 14:35:08.702: I/Adreno200-EGL(4900): Local Patches: NONE
02-23 14:35:08.702: I/Adreno200-EGL(4900): Reconstruct Branch: NOTHING
02-23 14:35:08.742: D/OpenGLRenderer(4900): Enabling debug mode 0
02-23 14:35:12.936: D/AndroidRuntime(4900): Shutting down VM
02-23 14:35:12.936: W/dalvikvm(4900): threadid=1: thread exiting with uncaught exception (group=0x41d10930)
02-23 14:35:12.946: E/AndroidRuntime(4900): FATAL EXCEPTION: main
02-23 14:35:12.946: E/AndroidRuntime(4900): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newpicker/com.example.newpicker.AnotherActivity}: java.lang.NullPointerException
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.os.Looper.loop(Looper.java:137)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.ActivityThread.main(ActivityThread.java:5041)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at java.lang.reflect.Method.invokeNative(Native Method)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at java.lang.reflect.Method.invoke(Method.java:511)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at dalvik.system.NativeStart.main(Native Method)
02-23 14:35:12.946: E/AndroidRuntime(4900): Caused by: java.lang.NullPointerException
02-23 14:35:12.946: E/AndroidRuntime(4900):     at com.example.newpicker.AnotherActivity.onCreate(AnotherActivity.java:41)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.Activity.performCreate(Activity.java:5104)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-23 14:35:12.946: E/AndroidRuntime(4900):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-23 14:35:12.946: E/AndroidRuntime(4900):     ... 11 more 
```

这是我的完整日志

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:00:53.720

我认为您需要更改这行代码：

```
b1.setOnClickListener(new Button.OnClickListener() { 
```

进入这个：

```
b1.setOnClickListener(new View.OnClickListener() { 
```

当您使用 View 作为按钮函数内部的参数来处理按钮事件侦听器时。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:01:22.457

尝试如下：

> ```
>  b1.setOnClickListener(new View.OnClickListener() { 
>             @Override
>             public void onClick(View v) {
>                 // TODO Auto-generated method stub
>                  abc=ed.getText().toString();
>                 Intent intent=new Intent(this,AnotherActivity.class);
>                 startActivity(intent);
>             }
>              }); 
> ```

并确保您已`AnotherActivity`在清单中定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T09:36:40.983

我已将 textview 定义为上面的静态，并尝试再次将其定义为普通的，刚刚检查过，问题已解决，谢谢大家

```
public class AnotherActivity extends Activity {

  static Context context;
  public boolean a;
  private DownloadManager downloadManager;
  static TextView tt1;
  String url="http://www.digitalmarketingbox.com/";
  private DownloadManager dm;
  String v1,v2;
  ArrayList<String> imageid = new ArrayList<String>();
  ArrayList<String> imagepath = new ArrayList<String>();
  ArrayList<String> playlist_content = new ArrayList<String>();
  ArrayList<String> al=new ArrayList();
  String i1;
 @Override
  protected void onCreate(Bundle savedInstanceState) 
  {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.showimages);
        tt1=(TextView)findViewById(R.id.it);
        //---tt1.append(MainActivity.abc);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T09:12:47.553

这发生在我昨天。即使我定义了里面的活动，`Manifest`但我很难启动它。我所做的是检查我是否在清单上写了类名。为了检查它是否工作，我想把它改成`MainActivity`并且它工作了，所以我知道出了点问题。无论如何，我确实通过使用它使它工作

```
 if(Build.MANUFACTURER.contains("Samsung") || Build.MANUFACTURER.contains("samsung")){
            doAll();
            }else {
                Intent intent = new Intent(Smaller.this.getApplicationContext(),ForOthers.class);
                startActivity(intent);
                finish();
              } 
```

这是我在用户启动我的应用程序时正在检查的内容。忘记它，看看

```
YourClassName.this.getApplicationContext(),OtherAcitvity.class 
```

# java - 从java中的单词中删除复数后缀

> ID：15038776
> 
> 赞同：0
> 
> 时间：2013-02-23T08:51:54.870
> 
> 标签：java, regex

在 Java 中，我想用 'monster' 替换 'monsters' ，用 'crash' 替换 'crashes' 之类的词。我如何写正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T08:58:56.913

您可以使用**[`String.replaceAll(regex, charSeq)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)**

```
String str="monsters";
str = str.replaceAll("\\w$","");
System.out.println(str); 
```

1.  $ 检查是否有行尾跟随

2.  \w 单词字符，[a-zA-Z_0-9] 的缩写

如果您只想更改`s`末尾有字符的单词。

```
str = str.replaceAll("s$",""); 
```

# java - 包含方法有问题

> ID：15038779
> 
> 赞同：0
> 
> 时间：2013-02-23T08:52:23.010
> 
> 标签：java, string, loops, contains

我在 while 循环中遇到了 contains java 方法的问题，这就是我的代码的样子

```
Scanner input = new Scanner(System.in)
String s = "";
int moveOn = 0;
while (moveOn == 0) {
            if (s.equals("")){
                System.out.println("blah 1");
                System.out.print("> ");
                s = input.next();
                System.out.println();
            }
            else if (s.contains("something") ||
                     s.contains("something else")) {
                System.out.println("blah 2");
                moveOn++;
            } else {
                System.out.println("blah 3");
                s = "";
            }
}
moveOn = 0;

System.out.println(s + " <- s test"); 
```

我正在尝试制作一个简单的命令行文本游戏。如果您在提示符处输入*“某物”*，那么它会起作用，如果您输入的输入没有*“某物”*或*“其他东西”*，它会按预期工作。但是如果你输入*“blah blah something”*，它会输出

```
blah 1
> blah blah something

blah 3
blah 1
> 
blah 3
blah 1
> 
blah 2
something <- s test 
```

基于这种行为，我很确定这是我不理解的 contains 方法。我确定这很简单，但是有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:56:01.487

`Scanner.next()`返回下一个标记，标记的默认分隔符是空格，因此输入的结果`blah blah something`值为`blah`.

此外，您的`moveOn`变量应该是一个布尔值。

# asp.net - 从我的网站在 asp.net 中使用 Twilio 发送短信

> ID：15038780
> 
> 赞同：1
> 
> 时间：2013-02-23T08:52:24.747
> 
> 标签：asp.net

我正在尝试从 twilio 帐户发送短信。这是我的代码。

```
try 
{  
    string ACCOUNT_SID = ConfigurationManager.AppSettings["XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"];  
    string AUTH_TOKEN = ConfigurationManager.AppSettings["XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"];  

    TwilioRestClient client = new TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN);  
    client.SendSmsMessage("+1XXXXXXXXXX", "+1XXXXXXXXXXX", "Hi");    
    Label1.Text = "Sent Successfully";    
 }  
 catch (Exception ex) 
 {  
    Label1.Text = "Error:"+ex.Message;  
 } 
```

在我的服务器上运行，我收到“发送成功”的消息，但在我的手机上没有收到消息。

我已经用“XXXXX”更改了原始数字。我还为 Twilio 添加了包。

请让我知道是否可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T18:23:01.067

Twilio 布道者在这里。

当您调用 SendSmsMessage 时，您可能会从 Twilio REST API 收到错误消息。您可以通过获取从方法返回的值并查看 RestException 属性是否为空来检查是否发生这种情况：

```
var result = client.SendSmsMessage("+1xxxxxxxxxx", "+1xxxxxxxxxx", "Hi");
if (result.RestException!=null)
{
    //An error occured
    Console.Writeline(result.RestException.Message);
} 
```

另一种选择是使用像[Fiddler](http://fiddler2.com/)这样的工具来观察实际的 HTTP 请求/响应，看看是否发生了任何错误。

希望有帮助。

# c++ - 创建一个里面有弹跳球的立方体

> ID：15038782
> 
> 赞同：-2
> 
> 时间：2013-02-23T08:52:35.580
> 
> 标签：c++, opengl

我真的很想画一个立方体，球在立方体的墙上弹跳，但我不能比下面的代码更进一步，这只是一个立方体旋转，我是一个新手，我上周刚开始学习 opengl我需要提供所需的信息，我将不胜感激，我希望球在不相互接触的情况下颠倒反弹，并且它们的半径应该相同

```
#include <GL\glut.h>
 GLfloat xRotated, yRotated, zRotated;
void init(void)
{
glClearColor(0,0,0,0);

}

void DrawCube(void)
{

     glMatrixMode(GL_MODELVIEW);
    // clear the drawing buffer.
    glClear(GL_COLOR_BUFFER_BIT);
   glLoadIdentity();
        glTranslatef(0.0,0.0,-10.5);
    glRotatef(xRotated,1.0,0.0,0.0);
    // rotation about Y axis
    glRotatef(yRotated,0.0,1.0,0.0);
    // rotation about Z axis
    glRotatef(zRotated,0.0,0.0,1.0);
  glBegin(GL_QUADS);        // Draw The Cube Using quads
    glColor3f(0.0f,1.0f,0.0f);    // Color Blue
    glVertex3f( 1.0f, 1.0f,-1.0f);    // Top Right Of The Quad (Top)
    glVertex3f(-1.0f, 1.0f,-1.0f);    // Top Left Of The Quad (Top)
    glVertex3f(-1.0f, 1.0f, 1.0f);    // Bottom Left Of The Quad (Top)
    glVertex3f( 1.0f, 1.0f, 1.0f);    // Bottom Right Of The Quad (Top)
    glColor3f(1.0f,0.5f,0.0f);    // Color Orange
    glVertex3f( 1.0f,-1.0f, 1.0f);    // Top Right Of The Quad (Bottom)
    glVertex3f(-1.0f,-1.0f, 1.0f);    // Top Left Of The Quad (Bottom)
    glVertex3f(-1.0f,-1.0f,-1.0f);    // Bottom Left Of The Quad (Bottom)
    glVertex3f( 1.0f,-1.0f,-1.0f);    // Bottom Right Of The Quad (Bottom)
    glColor3f(1.0f,0.0f,0.0f);    // Color Red    
    glVertex3f( 1.0f, 1.0f, 1.0f);    // Top Right Of The Quad (Front)
    glVertex3f(-1.0f, 1.0f, 1.0f);    // Top Left Of The Quad (Front)
    glVertex3f(-1.0f,-1.0f, 1.0f);    // Bottom Left Of The Quad (Front)
    glVertex3f( 1.0f,-1.0f, 1.0f);    // Bottom Right Of The Quad (Front)
    glColor3f(1.0f,1.0f,0.0f);    // Color Yellow
    glVertex3f( 1.0f,-1.0f,-1.0f);    // Top Right Of The Quad (Back)
    glVertex3f(-1.0f,-1.0f,-1.0f);    // Top Left Of The Quad (Back)
    glVertex3f(-1.0f, 1.0f,-1.0f);    // Bottom Left Of The Quad (Back)
    glVertex3f( 1.0f, 1.0f,-1.0f);    // Bottom Right Of The Quad (Back)
    glColor3f(0.0f,0.0f,1.0f);    // Color Blue
    glVertex3f(-1.0f, 1.0f, 1.0f);    // Top Right Of The Quad (Left)
    glVertex3f(-1.0f, 1.0f,-1.0f);    // Top Left Of The Quad (Left)
    glVertex3f(-1.0f,-1.0f,-1.0f);    // Bottom Left Of The Quad (Left)
    glVertex3f(-1.0f,-1.0f, 1.0f);    // Bottom Right Of The Quad (Left)
    glColor3f(1.0f,0.0f,1.0f);    // Color Violet
    glVertex3f( 1.0f, 1.0f,-1.0f);    // Top Right Of The Quad (Right)
    glVertex3f( 1.0f, 1.0f, 1.0f);    // Top Left Of The Quad (Right)
    glVertex3f( 1.0f,-1.0f, 1.0f);    // Bottom Left Of The Quad (Right)
    glVertex3f( 1.0f,-1.0f,-1.0f);    // Bottom Right Of The Quad (Right)
  glEnd();            // End Drawing The Cube
glFlush();
}

void animation(void)
{

     yRotated += 0.01;
     xRotated += 0.02;
    DrawCube();
}

void reshape(int x, int y)
{
    if (y == 0 || x == 0) return;  //Nothing is visible then, so return
    //Set a new projection matrix
    glMatrixMode(GL_PROJECTION);  
    glLoadIdentity();
    //Angle of view:40 degrees
    //Near clipping plane distance: 0.5
    //Far clipping plane distance: 20.0

    gluPerspective(40.0,(GLdouble)x/(GLdouble)y,0.5,20.0);
    glMatrixMode(GL_MODELVIEW);
    glViewport(0,0,x,y);  //Use the whole window for rendering
}

int main(int argc, char** argv){

glutInit(&argc, argv);
//we initizlilze the glut. functions
glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
glutInitWindowPosition(100, 100);
glutCreateWindow(argv[0]);
init();
glutDisplayFunc(DrawCube);
glutReshapeFunc(reshape);
//Set the function for the animation.
glutIdleFunc(animation);
glutMainLoop();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T09:05:37.353

1.  引入一个球对象或至少一个球的位置向量。

2.  让绘图坐标取决于球的位置；因为你现在有一个立方体，你需要找到一个球的绘图代码，你不是第一个这样做的人，所以在互联网上可以找到很多例子。

3.  现在，您更改动画功能以将球朝您希望的方向移动；一个简单的实现是让它下降，当它到达底部时，您切换一个布尔值，表明它上升，然后当它是顶部时，您再次切换它。

    在伪代码中，我们有这样的东西：

    ```
    if (goingDown)
    {
        letBallGoDown();

        if (ballTouchesBottom())
        {
            goingDown = false;
        }
    }
    else
    {
        letBallGoUp();

        if (ballTouchesTop())
        {
            goingDown = true;
        }
    } 
    ```

    在检查它是否接触顶部或底部时，请确保将半径考虑在内。

# java - GWT 从弹性表中的一行中提取所有值

> ID：15038791
> 
> 赞同：0
> 
> 时间：2013-02-23T08:54:36.113
> 
> 标签：java, gwt, flextable

我有一个包含许多行和 5 个列的 flextable，当我选择一个时，我需要从特定行中提取所有值。该值必须出现在窗口上。我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:21:46.097

您可以使用以下代码访问任何表 td 元素的内容：

```
flexTable.getFlexCellFormatter().getElement(row, column).getInnerHTML() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T09:37:11.797

如果您知道行号，则可以使用获取每个元素

```
flexTable.getWidget(rowNum,colNum ).getelement().getInnerHtml();//will give with html tags 
```

您也可以像下面那样遍历整个 flex 表。

```
 Iterator<Widget> widgetiterator = flexTable.iterator();
              while (widgetiterator.hasNext()){
                Widget childWidget = widgetiterator.next();
                if (childWidget instanceof RadioButton) { //Example
                ((RadioButton) childWidget).getValue(); 

                }
              } 
```

和

```
Widget w flexTable.getWidget(rowNum,colNum );
 if (w instanceof TextBox) {
//TO Do get value 
```

# javascript - 使用sencha touch 2的谷歌地图

> ID：15038792
> 
> 赞同：0
> 
> 时间：2013-02-23T08:54:44.113
> 
> 标签：javascript, google-maps, sencha-touch-2

我对 sencha touch 2 完全陌生。

我想做一个简单的谷歌地图应用程序。

请告诉如何逐步开发它，如果可能的话，请给我地图应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:23:51.477

查看[http://dev.sencha.com/deploy/touch/examples/production/oreilly/](http://dev.sencha.com/deploy/touch/examples/production/oreilly/)，它也是与 sencha touch sdk 捆绑在一起的示例。这个在选项卡式面板中有地图，您也可以查看代码。

# c - Lua C API push existing pointers

> ID：15038796
> 
> 赞同：2
> 
> 时间：2013-02-23T08:54:51.307
> 
> 标签：c, api, lua

Assume I have a pointer owned from the C-side, that I wish to push onto the Lua stack in the form of a userdata. What would be the best way to accomplish this, while not sacrificing the ability to specify a specific metatable?

My original idea was to use a light userdata, but from what I've read [here](http://www.lua.org/pil/28.5.html), all light userdatas share a common metatable. This isn't desirable, as it would force common behavior for all of my c-sided objects.

Considering I desire to reuse metatables for Lua allocated objects, simply passing a different this pointer to the metamethods, my second idea involved attaching an artificial this pointer to userdata objects.

```
struct ud
{               
    struct T* ptr;
    struct T data;
};

struct ud* p = (struct ud*)lua_newuserdata(L, sizeof(struct ud));
p->ptr = &(p->data); 
```

Or, in the case of pushing a light userdata

```
struct T object;
struct T** p = (struct T**)lua_newuserdata(L, sizeof(struct T*));
*p = &object; 
```

Is attaching a this pointer recommended, or is there a more API friendly alternative? My ultimate goal is simply to push an existing pointer to Lua, and associate a metatable with it in such a way that the metatable can be reused for both heavy and light userdatas.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:18:14.253

A common (but not the only) way to do this is with a technique called a "boxed pointer". The idea is that you allocate a userdata large enough to hold the pointer and then attach your metatable etc to it.

```
void push_pointer(lua_State *L, void *p) {
    void **bp = lua_newuserdata(L, sizeof(p));
    *bp = p;

    // setup metatable, etc
} 
```

Then a function called through the metatable will receive this userdata on the stack, and you unpack the original pointer from it.

```
// called via metatable
int some_function(lua_State *L) {
    assert(lua_type(L, 1) == LUA_TUSERDATA);
    void **bp = lua_touserdata(L, 1);
    void *p = *bp;

    // do stuff with p
} 
```

There's a couple of things you have to think about when doing this:

*   Object lifetimes. If the C-side object is deallocated while something on the Lua side has a reference to its userdate, then you'll have a dangling pointer. If this is something that can happen then you need a way to deal with it. I dealt with this myself by having a registry of "live" C object that I can check against before trying to use the pointer.

*   Userdata equality. Since you push a new userdata for each pointer, two userdata with the same pointer won't compare equal in Lua. If that's important to you there's a few ways you can deal with it. A `__eq` metamethod is the easiest, but isn't always suitable. I've used the same object registry mentioned above to provide a pointer->userdata mapping and then, when pushing, if I already have a userdata for the pointer I just push it instead of creating a new one.

# c++ - 如何将 SIFT 算法与彩色反转图像一起使用

> ID：15038797
> 
> 赞同：0
> 
> 时间：2013-02-23T08:55:05.423
> 
> 标签：c++, algorithm, opencv, sift, date-arithmetic

例如，我有两张图像，其中第一张是常规图像，第二张是颜色反转的（我的意思是 255 - 像素颜色值）。

[我已经使用 OpenCV 和Lowe 论文](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)将 SIFT 算法应用于它们，所以现在我有了每个图像的关键点和描述符。

关键点位置确实匹配，但关键点方向和描述符值不匹配，因为颜色反转。

我很好奇有人试图解决这样的问题吗？

* * *

**此外** ，这里是渐变示例：

我正在使用[本](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html)教程和 modules/nonfree/src/sift.cpp 文件使用 OpenCV C++ 实现。此外，我还采用了以下方法来查看渐变：

```
void MINE::showKeypoints(cv::Mat image, std::vector<cv::KeyPoint> keypoints, string number)
{
    cv::Mat img;
    image.copyTo(img);

    for(int i=0;i<(int)keypoints.size();i++)
    {
        cv::KeyPoint kp = keypoints[i];

        cv::line(img, cv::Point2f(kp.pt.x ,kp.pt.y), cv::Point2f(kp.pt.x ,kp.pt.y), CV_RGB(255,0,0), 4);
        cv::line(img, cv::Point2f(kp.pt.x ,kp.pt.y), cv::Point2f(kp.pt.x+kp.size*cos(kp.angle),kp.pt.y+kp.size*sin(kp.angle)), CV_RGB(255,255,0), 1);
    }
    cv::imshow (str, img);
} 
```

![例子](../Images/0197407eff7b946cbec2fe3141752566.png) 渐变示例。

如您所见，倒置图像和原始图像的渐变并不相反

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:25:04.827

If you [negate](http://www.imagemagick.org/Usage/color_mods/#negate) the input image then the gradients will have **opposite directions** (`G <- -G`).

You need to remind that SIFT descriptors are basically histogram of gradient orientations:

![histogram of gradients](../Images/fb14bd745b3be0789095bd643ddc40a0.png)

Since the gradient is negated on the inverted image we obtain:

*   `0th arrow => 4th arrow`
*   `1st arrow => 5th arrow`
*   `2nd arrow => 6th arrow`
*   `3th arrow => 7th arrow`

In other words if you consider the first 8-bins histogram (there are 4x4 such histograms in total), and if you denote `a`, `b`, etc the related SIFT descriptors components, we have:

*   original image: `[a, b, c, d, e, f, g, h]`
*   inverted image: `[e, f, g, h, a, b, c, d]`

So you can convert the inverted image SIFT descriptor by swapping the components by 4-sized packs.

Pseudo-algorithm:

```
# `sift` is the 128-sized array that represents the descriptor
NCELLS = 16
NORI   = 8

0.upto(NCELLS - 1) do |cell|
  offset = cell * NORI
  offset.upto(offset + NORI/2 - 1) do |i|
    sift.swap!(i, i + NORI/2)
  end
end 
```

* * *

Here's how to verify this with [vlfeat](http://www.vlfeat.org/):

1.  Negate the default image: `convert -negate default.pgm negate.pgm`
2.  Extract keypoints on default image: `./sift --frames default.pgm`
3.  Select the first keypoint: `tail -n 1 default.frame > kpt.frame`
4.  Describe it with the default image: `./sift --descriptors --read-frames kpt.frame default.pgm`
5.  Describe it with the negated image: `./sift --descriptors --read-frames kpt.frame negate.pgm`
6.  Format both descriptors with 4 components per line (see below)

Then visualize the output with e.g. `diff -u` or `opendiff`: the lines are swapped 2-by-2 as expected.

```
cat default.descr | ruby -e\
'STDIN.read.split(" ").each_slice(4) {|s| p s}'\
> default.out

cat negate.descr | ruby -e\
'STDIN.read.split(" ").each_slice(4) {|s| p s}'\
> negate.out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:38:36.820

deltheil 的回答是正确的，但是我们可以轻松地更改 16 x 8 描述符元素的顺序而不改变梯度的方向（基本上是相同的，但实现更简单）

例如我们有 2x4 描述符，

原来是：

```
[a,b
c,d
e,f
g,h] 
```

倒置将是：

```
[g,h
e,f
c,d
a,b] 
```

# php - PHP 正则表达式匹配图像 URL

> ID：15038800
> 
> 赞同：1
> 
> 时间：2013-02-23T08:55:15.737
> 
> 标签：php, regex, pattern-matching

这是我的图片网址 PHP 代码。

$GetImage = ' [https://lh6.ggpht.com/hWXw7YRl9DpSMewd29xT9rvxcgnmGXeXSY9FTaPc3cbBCa-JO8yfwSynmD5C1DLglw=w124](https://lh6.ggpht.com/hWXw7YRl9DpSMewd29xT9rvxcgnmGXeXSY9FTaPc3cbBCa-JO8yfwSynmD5C1DLglw=w124) ';

preg_match_all("/https://\w\w\d.\w+.com/[\w-]+=\w\d{2,3}/", $GetImage, $Result, PREG_SET_ORDER);

它对我有用，但我想提取“[\w-]”模式结果，换句话说，我想从我的图像网址中提取“hWXw7YRl9DpSMewd29xT9rvxcgnmGXeXSY9FTaPc3cbBCa-JO8yfwSynmD5C1DLglw”这个字符串...

请任何人帮助我解决这个问题....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:05:20.657

我觉得尝试使用正则表达式匹配整个 URL 有点过头了。我建议您首先使用 PHP 的内置函数[parse_url()](http://www.php.net/manual/en/function.parse-url.php)解析 URL 。

```
<?php

$str = 'https://lh6.ggpht.com/hWXw7YRl9DpSMewd29xT9rvxcgnmGXeXSY9FTaPc3cbBCa-JO8yfwSynmD5C1DLglw=w124';

// Parse the URL before applying a regex. Only get the path part. Use substring to remove the leading slash
$path = substr( parse_url( $str, PHP_URL_PATH ), 1 );

$pattern = '/([^=]+)/';
$matches = array();

if ( preg_match( $pattern, $path, $matches ) ) {
    // Regex matched

    $id = $matches[1];

    // Outputs: string 'hWXw7YRl9DpSMewd29xT9rvxcgnmGXeXSY9FTaPc3cbBCa-JO8yfwSynmD5C1DLglw' (length=66)
    var_dump( $id );
}

?> 
```

请注意，该片段不检查域名。您可以通过不将[parse_url()](http://www.php.net/manual/en/function.parse-url.php)函数限制为仅返回路径以及其他部分来轻松调整脚本以执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:07:44.340

像这样试试

```
$GetImage = 'https://lh6.ggpht.com/hWXw7YRl9DpSMewd29xT9rvxcgnmGXeXSY9FTaPc3cbBCa-JO8yfwSynmD5C1DLglw=w124';
preg_match_all('#https://.*\.com/([\w-]+=\w\d{2,3})#iU', $GetImage, $match, PREG_SET_ORDER);
print_r($match); 
```

# macos - mac os X上的svn，SSL错误：点不在曲线上

> ID：15038805
> 
> 赞同：0
> 
> 时间：2013-02-23T08:55:34.283
> 
> 标签：macos, svn, ssl, macports

我的 Mac 上的 svn 有问题。当我尝试从 code.google.com 提交更改或签出我的项目的源时，我收到以下错误：

Ibis:grid-gen$ svn -m "" commit svn: E175002: Commit failed (详情如下): svn: E175002: Unable to connect to a repository at URL' [https://grid-gen.googlecode.com/svn/中继](https://grid-gen.googlecode.com/svn/trunk)'svn：E175002：' [https](https://grid-gen.googlecode.com/svn/trunk) ://grid-gen.googlecode.com/svn/trunk'的选项：SSL握手失败：SSL错误：点不在曲线上（[https://grid-gen.googlecode.com](https://grid-gen.googlecode.com) )

如何解决这个问题？

MacOS 10.8.2，iMac（64 位），svn 版本 1.7.7 (r1393599) 编译 2012 年 11 月 18 日，00:18:52 从 macports 安装 Subversion，现在我无法使用系统 svn (1.6.18)，因为工作副本是 1.7 格式。

在我的其他 mac svn 与相同的存储库（10.8.2，MBP 64 位，svn 版本 1.6.18 (r1303927) 编译于 2012 年 8 月 4 日，19:46:53）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:38:54.123

这是 macports/openssl 的问题（感谢 Eugenes 的跟进！），修复它的方法在这里描述：http: [//trac.macports.org/ticket/38015](http://trac.macports.org/ticket/38015)

# actionscript-3 - AS3障碍hitTest

> ID：15038807
> 
> 赞同：0
> 
> 时间：2013-02-23T08:55:47.423
> 
> 标签：actionscript-3, hittest

好的，我已经阅读了一些关于基本平台游戏创建的文章，人们说这是最难的部分——在高速下进行正确的碰撞。事实上，即使我有 60 fps，也很难追踪以每滴答声 50-100 像素移动的对象。问题是，如果它撞到墙上，它会穿过它，检测到走得太远，然后将物体返回到速度为 0（或弹跳）的墙旁边的定义点。但是如果我在舞台中间有一个 5 像素的墙，即使在低速时也可能会错过碰撞。是的，你会说“制作 2 个区域，检查对象是否在一个区域中，另一个区域将是一个完整的 hitTest 区域以从中返回”但是如果我需要一个随机绘制的墙壁迷宫怎么办？**什么是使薄壁物体不会通过的好方法？**

想到平台游戏，我记得恶魔城和银河战士，它不是 AS3，但是，也许你知道他们是如何做到如此流畅的吗？帧数好？预测碰撞？或者没有人会像弹跳的子弹一样做出疯狂的速度？

在我深入编码之前，我真的可以使用一些想法。我希望至少知道我正在朝着正确的方向前进，即使这很困难。为了不以 1000 行结尾，不记得 1 个单个对象的 CPU 负载在哪里，@ 95% XD 我现在的猜测是在对象的右、左、上和下制作 4 个不可见的块，并分别计算每个侧面碰撞。但它可能会在角落变得难看。8个街区吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:56:30.933

目前，您正在检查对象是否在帧发生的确切时刻与墙壁相交，但实际上您想知道对象*是否*在最后一帧和现在之间与墙壁相交。您可以想象在对象之前的位置和现在的位置之间有一条线，因此基本上您需要检查该线是否与墙壁的线相交。

它已经很老了，但是 tonypa 有一个很好的教程[，](http://www.tonypa.pri.ee/vectors/start.html)它涵盖了所有的基础知识。

# javascript - IE 和 Chrome 不会触发鼠标悬停事件 元素

> ID：15038811
> 
> 赞同：4
> 
> 时间：2013-02-23T08:56:39.090
> 
> 标签：javascript, jquery, html, internet-explorer, google-chrome

我的代码仅适用于 Firefox。为什么是这样？

HTML：

```
<select id="selecter">
         <option>one</option>
         <option>two</option>
         <option>three</option>
   </select> 
```

Javascript：

```
$(function() {
   $(document).on("mouseover", "#selecter option",function(){
            alert(1)        
    });
}); 
```

我很好奇为什么 IE 和 chrome 不会触发鼠标悬停事件。请参阅此 JSFiddle： http: [//jsfiddle.net/yT6Y5/72/](http://jsfiddle.net/yT6Y5/72/)（在 Firefox 中完美运行。）

如何让 IE 和 Chrome 触发鼠标悬停事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T09:07:18.070

问题是浏览器呈现下拉菜单的方式不同。Chrome 不是将其呈现为 HTML 组件，而是呈现为原生 GUI 组件。那不能从 JS 关联悬停处理程序。

如果您想确保它适用于所有浏览器，请不要使用下拉菜单或获取脚本来创建使用 HTML 元素的下拉菜单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:08:08.540

看起来，当您将鼠标悬停在 IE 和 chrome 中的某个选项上时，实际上并没有触发任何事件，

充其量应该绑定在更改事件上。

```
$(function() {
    $("#selecter").change(function(){
            alert(1);
    });
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-23T09:02:32.443

也许您应该使用不同的方法来绑定事件

```
 $(function() {
    $("#selecter").mouseover(function(){
        alert(1)        
     });
  }); 
```

# java - Restful Web 服务找不到 Java 类和 Java 类型类和 MIME 媒体类型应用程序/xml 的消息正文编写器

> ID：15038817
> 
> 赞同：0
> 
> 时间：2013-02-23T08:57:31.707
> 
> 标签：java, web-services

我有一个完整的网络服务，它将通过休眠从数据库中获取某些值，并使用 Seeter 和 getter 设置这些值。我能够设置这些值，但在尝试使用 Web 服务时出现异常“找不到 Java 类和 Java 类型类和 MIME 媒体类型应用程序/xml 的消息正文编写器”

我的网络服务代码是

```
@Path("/IFConfig")
public class IFconfigService {
    private static final String FILE_PATH = "C:\\Users\\298637\\Desktop\\sample.xml";
    @GET
    @Path("/get/{varX}")
    @Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
    public IfMainbo  Webserviceoutput(@PathParam("varX") String varX)
    {

        List iFObjects = new ArrayList();
        String iFName=varX;
        System.out.println("the parameter name is "+iFName);
        IfMainbo ifMainbo = new IfMainbo();
        IfMain ifMain = new IfMain();
        FetchConfiguration passing = new FetchConfiguration();
        iFObjects = passing.loadConfigData(iFName);
        System.out.println("OBJECT SIZE"+iFObjects.size());
        for (Iterator iterator = iFObjects.iterator(); iterator.hasNext();){
            ifMain = (IfMain)iterator.next();
    }
        ifMainbo.setIfId(ifMain.getIfId());
        ifMainbo.setIfName(ifMain.getIfName());
        System.out.println(ifMainbo.getIfId());
        System.out.println(ifMainbo.getIfName());
        return ifMainbo;
}
} 
```

我的提供类或 setter 和 getter 类代码是

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ifMainbo", propOrder = {
    "entities",
    "ifId",
    "ifName"
})
public  class IfMainbo implements MessageBodyWriter{

    @XmlElement(required = true, nillable = true)
    protected List<Object> entities;
    protected String ifId;
    protected String ifName;

    /**
     * Gets the value of the entities property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the entities property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getEntities().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link Object }
     * 
     * 
     */
    public List<Object> getEntities() {
        if (entities == null) {
            entities = new ArrayList<Object>();
        }
        return this.entities;
    }

    /**
     * Gets the value of the ifId property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getIfId() {
        return ifId;
    }

    /**
     * Sets the value of the ifId property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setIfId(String value) {
        this.ifId = value;
    }

    /**
     * Gets the value of the ifName property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getIfName() {
        return ifName;
    }

    /**
     * Sets the value of the ifName property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setIfName(String value) {
        this.ifName = value;
    }

    @Override
    public long getSize(Object arg0, Class arg1, Type arg2, Annotation[] arg3,
            MediaType arg4) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public boolean isWriteable(Class arg0, Type arg1, Annotation[] arg2,
            MediaType arg3) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void writeTo(Object arg0, Class arg1, Type arg2, Annotation[] arg3,
            MediaType arg4, MultivaluedMap arg5, OutputStream arg6)
            throws IOException, WebApplicationException {
        // TODO Auto-generated method stub

    }

} 
```

谁能告诉我为什么会这样，因为我可以使用 setter 方法设置值。

# jquery - 使用正则表达式从 textarea 中删除字符串

> ID：15038819
> 
> 赞同：0
> 
> 时间：2013-02-23T08:57:52.163
> 
> 标签：jquery, regex

```
<textarea name="test">
  test
  [url=http://test.com]test[/url]
  [url][img]http://test.com/test.jpg[/img][/url]
  test
</textarea> 
```

我怎样才能删除包裹在里面的所有东西`[url][/url]`，`[url=][/url]`但保留`[img]`？

我试过的：

```
var value = $('textarea[name="test"]').val();
value = value.replace(/\[url=(.+?)\](.+?)\[\/url\]/g, '');
value = value.replace(/\[url=(.+?)\]/g, '');
value = value.replace('[url]', '');
value = value.replace('[\/url]', '');
$('textarea[name="test"]').val(value); 
```

预期输出：

```
<textarea>
  test

  [img]http://test.com/test.jpg[/img]
  test
</textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:17:21.317

这应该可以解决您的问题-可以通过一个正则表达式替换来实现：

```
var value = $('textarea[name="test"]').val();
value = value.replace(/\[\/?url([^\]]+)?\]/g, '');
$('textarea[name="test"]').val(value); 
```

[jsFiddle 演示在这里](http://jsfiddle.net/toomanyredirects/Y667D/)。

本质上发生的事情是正则表达式查找以方括号开头的字符串，该字符串`[`后面可能有也可能没有结束`/`，但后面是`url`，然后它将继续匹配直到遇到 a `]`，并且赢了'不在乎它在这一点上发现了什么。这样您就可以获得以下所有内容的匹配项：

*   `[url]`
*   `[/url]`
*   `[url=http://www.google.com]`
*   `[url hello world this is nice]`（如果你真的想要:-P）

我在上面提到，您`textarea`将 jQuery 中的字段名称从“文本”更改为“签名”，但从未发布包含第二个文本区域的 HTML - 我刚刚使用了相同的 - 在我上面的代码中的“测试”。

希望有帮助。

# angularjs - 如何从 ng-click 访问父范围

> ID：15038821
> 
> 赞同：1
> 
> 时间：2013-02-23T08:58:09.770
> 
> 标签：angularjs

我需要将 $scope.correct 的值传递给 checkAnswer 函数，但它一直未定义。ng-click 似乎只了解它自己的范围。我究竟做错了什么？

```
angular.module('Tutorials', ['functions']).controller('getAnswers', function ($scope, $element){
    $scope.verbs = conjugate(conjugationsets[tutorial_number][questionnum]);
    $scope.correct = $scope.verbs.conjugations[0].text; 
    $scope.randomizeAnswers = function () {

      fisherYates($scope.verbs.conjugations);
    }();

    $scope.checkAnswer = function (answer, correct){
        checkanswer($scope, answer, correct);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:00:26.350

您可以使用`$scope.$parent`来访问父范围。

```
$scope.checkAnswer = function (answer){
    checkanswer($scope, answer, $scope.$parent.correct);
} 
```

注意：我还没有把完整的问题看完，看看有没有更好的办法解决问题

# jquery - jquery在鼠标悬停时淡入img背景，但不是内容indide

> ID：15038823
> 
> 赞同：0
> 
> 时间：2013-02-23T08:58:39.917
> 
> 标签：jquery, html, background, fadein, fadeout

用 jquery 卡住了一点，请检查`jsfiddle.net/7HXEF/1/` 带有背景 img 的 DIV，其中背景 imd 应该在鼠标悬停时淡入和淡出。但是内部带有链接的 div 永远不应该淡入或/淡出。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:01:09.843

您的想法是正确的，但是如果您在透明或半透明的 div 中有内容，则该内容将反映其父级的不透明度。

我将内容移到背景之外，并将它们包含在一个新容器中，并将其设置为在鼠标悬停在内容或背景上时触发，现在它似乎可以按照您的意愿工作。

HTML：

```
<div class="parent">
    <div class="box-side-link" style="background-image:url(http://st.datapic.ru/img/13-02/23/vlSI25yi3zLUuNCpKzBWNAK1G.jpg)"></div>
    <div class="mylink"><a href="#">001</a></div>
</div> 
```

JS：

```
$(function(){
    // fade out on load
    $('.box-side-link').fadeTo(0,0.5);
});

$('.box-side-link, .mylink').on('mouseenter mouseleave', function(ev) {
    ev=ev.type==='mouseenter' ? $('.box-side-link').stop().fadeTo(500,1) : $('.box-side-link').stop().fadeTo(500,0.5);
}); 
```

CSS：

```
.box-side-link, .parent{
    width: 100%;
    height: 125px;
}
.box-side-link {
    background-position: center center;
    background-size: 100%;
    position: absolute;
}
.parent {
    position: relative;
}
.mylink {
    position: absolute;
} 
```

这是它放在一起的小提琴：http: [//jsfiddle.net/2ANut/1/](http://jsfiddle.net/2ANut/1/)

# android - 将侦听器添加到联系人的 ListView？

> ID：15038828
> 
> 赞同：0
> 
> 时间：2013-02-23T08:59:18.347
> 
> 标签：android

我需要一些帮助才能将 onItemClickListener 添加到联系人的 ListView 中。我想从选定的联系人中捕获一些信息，例如姓名、电话号码和其他信息，并将其传递给另一个活动。

我不确定如何在下面的代码中添加 onListItemListener 以及如何从所选联系人中获取信息？我还想知道如何通过 Intent 传递多个值？我将其用于一个值：

```
Intent i = new Intent(Activity_1.this, Activity_2.class);
startActivityForResult(i, 1);

Intent intent = new Intent();
intent.putExtra("imageId", imagePath);
setResult(RESULT_OK, intent);
finish(); 
```

这是我在 ListView 活动中的代码。我昨天在这里得到了一些帮助，我想知道代码的 while (cursor.moveToNext()){} 部分是否对 ListView 很重要，因为它没有它也能工作？

一些帮助！谢谢！

```
public class Activity_3 extends Activity {

ListView listView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_3);
    listView=(ListView)findViewById(R.id.contactList);

    String[] projection = {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, 
                           ContactsContract.CommonDataKinds.Phone.NUMBER, 
                           ContactsContract.CommonDataKinds.Phone._ID};

    // Get a cursor with all people
    Cursor cursor = managedQuery(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, projection,null,null, null);
    //Cursor cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, projection,null,null, null);

    String[] fromColumn = {ContactsContract.Contacts.DISPLAY_NAME};
    int[] toView = {R.id.contactItem };

    while (cursor.moveToNext())
    {
         String Name=cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
         String Number=cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

    }
    startManagingCursor(cursor);

    ListAdapter adapter = new SimpleCursorAdapter(this, R.layout.activity_3, cursor, fromColumn, toView );

    listView.setAdapter(adapter);

}    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:17:29.777

```
 listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapter, View view , int position,
                    long id) {
                // TODO Auto-generated method stub
                        do your operations here...

            }
        });

use this onitemclicklistener to listen to your listview clicks . 
```

# android - 使用 PackageManager.getApplicationIcon 检索高分辨率图标

> ID：15038831
> 
> 赞同：1
> 
> 时间：2013-02-23T09:00:16.530
> 
> 标签：android

对于一个类似主屏幕的应用程序，我正在尝试尽可能收集最高分辨率的应用程序图标。主屏幕会显示更大一点的图标，因此我需要一个高分辨率的图标。

这是我的代码：

```
final PackageManager pk = getPackageManager();
final String size;
try {
    Drawable d = pk.getApplicationIcon("com.mycompany.android.icontest");
    size = String.format("Width: %d, height: %d", d.getMinimumWidth(), d.getMinimumHeight());
} catch (PackageManager.NameNotFoundException e) {
    return;
} 
```

此代码会将图标读入drawable。在该特定包中将出现 2 个图标，一个 res-hdpi 图标和一个 res-xhdpi 图标。使用上面的方法，只会`HDPI`读取版本。

如何`XHDPI`默认读取版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-10T03:15:06.117

您可以使用 getDrawableForDensity() 返回与 DPI 中给定屏幕密度的特定资源 ID 关联的可绘制对象：

```
ActivityInfo info = packageManager.getActivityInfo(componentName, PackageManager.GET_META_DATA);

Resources resources;
try {
    resources = mPackageManager.getResourcesForApplication(
            info.applicationInfo);
} catch (PackageManager.NameNotFoundException e) {
    resources = null;
}

if (resources != null) {
    int iconId = info.getIconResource();
    if (iconId != 0) {
        Drawable d;
        try {
            d = resources.getDrawableForDensity(iconId, DisplayMetrics.DENSITY_XHIGH);
        } catch (Resources.NotFoundException e) {
            d = null;
        }
        return d;
    }
} 
```

# android - S3 上没有可见的控件

> ID：15038832
> 
> 赞同：0
> 
> 时间：2013-02-23T09:00:19.853
> 
> 标签：android, image, amazon-s3, radio-button, visibility

我面临以下问题 - 下载我的新太空模拟游戏的人（但不是所有人）都在抱怨，他们在他们的设备上看不到任何控件。该问题似乎仅存在于 S3 设备上。我自己和 S3 在一起，一切都按设计显示。

这些控件被实现为自定义单选按钮，我将在下面发布代码，但是我的问题是：什么可能导致这种不同的行为？

```
public class CenteredRadioButton extends RadioButton {

private Drawable buttonDrawable;

public CenteredRadioButton(Context context, AttributeSet attrs) {
    super(context, attrs);
    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CompoundButton, 0, 0);
    buttonDrawable = a.getDrawable(1);
    setButtonDrawable(R.drawable.radio_empty);
}

public void setCustomDrawable(Drawable drawable) {
    buttonDrawable = drawable;
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    if (buttonDrawable != null) {
        buttonDrawable.setState(getDrawableState());
        final int verticalGravity = getGravity() & Gravity.VERTICAL_GRAVITY_MASK;
        final int height = buttonDrawable.getIntrinsicHeight();

        int y = 0;

        switch (verticalGravity) {
            case (Gravity.BOTTOM) : {
                y = getHeight() - height;
                break;
            } case (Gravity.CENTER_VERTICAL) : {
                y = (getHeight() - height) / 2;
                break;
            }
        }

        int buttonWidth = buttonDrawable.getIntrinsicWidth();
        int buttonLeft = (getWidth() - buttonWidth) / 2;
        buttonDrawable.setBounds(buttonLeft, y, buttonLeft + buttonWidth, y + height);
        buttonDrawable.draw(canvas);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:46:10.870

事实证明，某些 Android 版本并不完全支持 GIF 图像格式，有关更多信息，您可以查看下面的帖子，非常感谢 Rich 解决了这个问题！

[图像无法在 Galaxy S3 上加载](https://stackoverflow.com/questions/15146250/images-not-loading-on-galaxy-s3)

# go - 有更好的方法来跟踪 goroutine 响应吗？

> ID：15038834
> 
> 赞同：5
> 
> 时间：2013-02-23T09:00:27.277
> 
> 标签：go, goroutine

我正试图了解 goroutines。我创建了一个简单的程序，可以跨多个搜索引擎并行执行相同的搜索。目前，为了跟踪回复的数量，我计算了我收到的数量。不过好像有点业余。

有没有更好的方法来知道我何时收到了以下代码中所有 goroutine 的响应？

```
package main

import (
    "fmt"
    "net/http"
    "log"
)

type Query struct {
    url string
    status string
}

func search (url string, out chan Query) {
    fmt.Printf("Fetching URL %s\n", url)
    resp, err := http.Get(url)

    if err != nil {
        log.Fatal(err)
    }

    defer resp.Body.Close()

    out <- Query{url, resp.Status}
}

func main() {
    searchTerm := "carrot"

    fmt.Println("Hello world! Searching for ", searchTerm)

    searchEngines := []string{
        "http://www.bing.co.uk/?q=",
        "http://www.google.co.uk/?q=",
        "http://www.yahoo.co.uk/?q="}

    out := make(chan Query)

    for i := 0; i < len(searchEngines); i++ {
        go search(searchEngines[i] + searchTerm, out)
    }

    progress := 0

    for {
                    // is there a better way of doing this step?
        if progress >= len(searchEngines) {
            break
        }
        fmt.Println("Polling...")
        query := <-out
        fmt.Printf("Status from %s was %s\n", query.url, query.status)
        progress++
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T09:48:51.510

请使用， [pkg doc](http://golang.org/pkg/sync/#WaitGroup)`sync.WaitGroup`中有一个示例

```
searchEngines := []string{
    "http://www.bing.co.uk/?q=",
    "http://www.google.co.uk/?q=",
    "http://www.yahoo.co.uk/?q="}
var wg sync.WaitGroup
out := make(chan Query)

for i := 0; i < len(searchEngines); i++ {
    wg.Add(1)
    go func (url string) {
        defer wg.Done()
        fmt.Printf("Fetching URL %s\n", url)
        resp, err := http.Get(url)

        if err != nil {
            log.Fatal(err)
        }

        defer resp.Body.Close()

        out <- Query{url, resp.Status}

    }(searchEngines[i] + searchTerm)

}
wg.Wait() 
```

# php - 监控 MySQL 数据库中的变化

> ID：15038836
> 
> 赞同：0
> 
> 时间：2013-02-23T09:00:44.907
> 
> 标签：php, android

所以，我有一个 MySQL 数据库，从我的 Html/Php 页面，我可以访问它并读取一些值并将其显示在网页中，

我的问题 ：

另一方面，Android 应用程序也会修改数据库和一些值，所以我必须从显示数据的 Web 浏览器中单击刷新按钮，

有没有什么方法可以持续监控数据库中特殊行的任何更改，例如，然后在 Html 页面上更新它，我尝试了这段代码，但没有运气：

```
<?php
 session_start();
 $One=$_SESSION['One']; 
 $Two=$_SESSION['Two'];  
 $Three=$_SESSION['Three']; 
 $Four=$_SESSION['Four']; 
 $tbl_name =$_SESSION['Five']; 
 // Connect to server and select databse.
 mysql_connect("$One", "$Two", "$Three")or die("cannot connect"); 
 mysql_select_db("$Four")or die("cannot select DB");
 $q=mysql_query("SELECT message FROM $tbl_name WHERE pass='".$_SESSION['pass']."'");

 while($row = mysql_fetch_array($q)){

 }
while(true!=false)
 echo $row['message'];
 ?>
 <head>
 <html>
 <body>

<title>Title</title>
<div><h2><?php echo 'I found something in the session: ' .$_SESSION['text']?></h2>   </div>
 </br>
 </br>

 </body>
 </html>
 </head> 
```

# pascal - 如何将整数转换为字节数组？

> ID：15038838
> 
> 赞同：3
> 
> 时间：2013-02-23T09:00:50.943
> 
> 标签：pascal

我在 ST 代码中有一种动作监听器（类似于 Pascal），它返回一个整数。然后我有一个 CANopen 函数，它允许我只以字节数组发送数据。我怎样才能从这些类型转换？

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T16:49:57.853

以下是使用 Free Pascal 的解决方案。

首先，用“绝对”：

```
var x: longint;
    a: array[1..4] of byte absolute x;

begin
x := 12345678;
writeln(a[1], ' ', a[2], ' ', a[3], ' ', a[4])
end. 
```

带指针：

```
type tarray = array[1..4] of byte;
     parray = ^tarray;

var x: longint;
    p: parray;

begin
x := 12345678;
p := parray(@x);
writeln(p^[1], ' ', p^[2], ' ', p^[3], ' ', p^[4])
end. 
```

使用二元运算符：

```
var x: longint;

begin
x := 12345678;
writeln(x and $ff, ' ', (x shr 8) and $ff, ' ',
        (x shr 16) and $ff, ' ', (x shr 24) and $ff)
end. 
```

有记录：

```
type rec = record
              case kind: boolean of
              true: (int: longint);
              false: (arr: array[1..4] of byte)
           end;

var x: rec;

begin
x.int := 12345678;
writeln(x.arr[1], ' ', x.arr[2], ' ', x.arr[3], ' ', x.arr[4])
end. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T09:30:24.783

您可以使用`Move`标准函数将整数块复制到四个字节的数组中：

```
var
    MyInteger: Integer;
    MyArray: array [0..3] of Byte;
begin
    // Move the integer into the array
    Move(MyInteger, MyArray, 4);

    // This may be subject to endianness, use SwapEndian (and related) as needed

    // To get the integer back from the array
    Move(MyArray, MyInteger, 4);
end; 
```

PS：我已经几个月没有用 Pascal 编码了，所以可能会有错误，请随时修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T14:46:40.710

您还可以使用变体记录，这是在 Pascal 中故意为变量起别名而不使用指针的传统方法。

```
type Tselect = (selectBytes, selectInt);
type bytesInt = record
                 case Tselect of
                   selectBytes: (B : array[0..3] of byte);
                   selectInt:   (I : word);
                 end; {record}

var myBytesInt : bytesInt; 
```

变体记录的好处在于，一旦您设置它，您就可以自由地访问任何一种形式的变量，而无需调用任何转换例程。例如“ **myBytesInt.I:=$1234** ”，如果你想将它作为一个整数访问，或者“ **myBytesInt.B[0]:=4** ”等，如果你想你作为一个字节数组访问它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-23T09:07:12.313

你可以这样做：

```
byte array[4];
int source;

array[0] = source & 0xFF000000;
array[1] = source & 0x00FF0000;
array[2] = source & 0x0000FF00;
array[3] = source & 0x000000FF; 
```

然后，如果将数组 [1] 与数组 [4] 粘合在一起，您将获得源整数；

编辑：更正了面具。

编辑：正如托马斯在评论中指出的那样->您仍然必须将 ANDing 的结果值移位到 LSB 以获得正确的值。

# ios - 如何将字典数组保存到plist？

> ID：15038842
> 
> 赞同：1
> 
> 时间：2013-02-23T09:00:56.153
> 
> 标签：ios, objective-c, nsdictionary

Plist只是不会保存自己......

我不明白我在这里做错了什么。请帮忙。

```
NSString *factorsFile = [[NSBundle mainBundle]pathForResource:@"factors" ofType:@"plist"];
NSMutableArray *factorsArray = [NSMutableArray arrayWithContentsOfFile:factorsFile];

NSMutableDictionary *dictFactor = [NSMutableDictionary dictionary];
[dictFactor setObject:self.nameField.text forKey:@"Factor"];
[dictFactor setObject:self.rankField.text forKey:@"Rank"];

NSLog(@"%@",dictFactor);

[factorsArray addObject:dictFactor];

NSLog(@"%@",factorsArray);

if([factorsArray writeToFile:factorsFile atomically:YES]){
    NSLog(@"lalal");
} 
```

此代码能够进入最后一个 if 循环，但 plist 保持不变......为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:08:00.083

因为您无法在应用程序包中写入/修改文件。

**但是，您可以在 Google 上搜索**[“ios plist write to bundle modified”](https://www.google.com/search?q=ios+plist+write+to+bundle+unchanged)这个表达式，然后您可以查看前四个结果。它们都是相同/重复的 StackOverflow 问题：

[plist 在字典中写入数据](https://stackoverflow.com/questions/11497517/plist-writing-data-inside-dictionary)

[使用 NSDictionary 对象写入 plist 文件](https://stackoverflow.com/questions/9433598/write-into-plist-file-using-nsdictionary-object)

[无法在 plist 文件中写入布尔值](https://stackoverflow.com/questions/6593627/not-able-to-write-boolean-in-plist-file)

[writeToFile 在 iphone 上失败，但在模拟器上工作](https://stackoverflow.com/questions/2092026/writetofile-fails-on-iphone-but-works-on-simulator)

# javascript - 我如何提取 .text(data) 值以将其放入条件语句中

> ID：15038843
> 
> 赞同：2
> 
> 时间：2013-02-23T09:00:56.660
> 
> 标签：javascript, jquery

我在这里要做的是在用户名存在时禁用按钮。否则，该按钮被启用。我不擅长 javascript/jquery，所以我可能需要一点帮助。任何将不胜感激：

```
$('#username2').keyup(function() {
    var username = $(this).val();
    $('#username_status').text('searching....');
    if(username2 != "") {
        $.post('username_check.php',{username2:username}, function(data) {
            $('#username_status').text(data);
        });
    }
    else {
        $('#username_status').text('Nothing');
    }

    if ($('#username_status').text(data) != 'Username available!') {
        $("#btnSignUp").prop("disabled", false);
    } else {
         $("#btnSignUp").prop("disabled", true);
    }
}); 
```

我猜我做条件陈述的方式是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:08:43.043

它应该是。

```
$('#username_status').text() 
```

这将为您提供正确的文本内容

```
if ($('#username_status').text() != 'Username available!') {

    $("#btnSignUp").prop("disabled", false);

} else {

     $("#btnSignUp").prop("disabled", true);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:21:55.693

您需要在 AJAX 请求中进行检查：

```
$('#username2').keyup(function() {
    var username = $(this).val();
    if(username != "") {
        $('#username_status').text('searching....');
        $.post('username_check.php',{username2:username}, function(data) {
            $('#username_status').text(data);
            $("#btnSignUp").prop("disabled", data != 'Username available!');
        });
    }
    else {
        $('#username_status').text('Nothing');
        $("#btnSignUp").prop("disabled", true);
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T09:08:31.017

您可以默认禁用该按钮。

```
<input id="btnSignUp" name="btnSignUp" disabled="disabled" type="button" value="Sign Up" /> 
```

如果用户名可用，您可以通过以下方式启用它

```
$("#btnSignUp").removeAttr('disabled'); 
```

你也可以得到比较字符串如下

```
$("#username_status").val() != 'Username available!' 
```

# php - 从 Wordpress Get_Post_Meta 中提取值

> ID：15038850
> 
> 赞同：0
> 
> 时间：2013-02-23T09:01:51.100
> 
> 标签：php, arrays, wordpress, variables

我正在使用`get_post_meta($post->ID);`，它返回如下结果。

我需要将这些字段 wpcf-business_listing_title、wpcf-street_address、wpcf-city 等的实际值打印到屏幕上。

我该怎么做？谢谢！

```
array(25) { 
    ["wpcf-business_listing_title"]=> array(1) {
         [0]=> string(17) "Davis Car Dealer" 
     } 
    ["wpcf-street_address"]=> array(1) { 
        [0]=> string(21) "720 Olympad Drive Ste X" 
     } 
    ["wpcf-city"]=> array(1) { 
        [0]=> string(5) "Portland" 
     } 
    ["wpcf-state_abbreviation"]=> array(1) { 
        [0]=> string(2) "ME" 
     } 
    ["wpcf-full_state_name"]=> array(1) {
        [0]=> string(10) "Maine" 
     } 
    ["wpcf-zip_code"]=> array(1) { 
        [0]=> string(5) "95616" 
     } 
    ["wpcf-county"]=> array(1) { 
        [0]=> string(4) "Yolo" 
    } 
    ["wpcf-phone_number"]=> array(1) { 
        [0]=> string(12) "555-755-3666" 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:16:02.113

在这里，您可以给出特定的字段 slug 名称，例如您用于 wpcf-street_address 然后您想给出

`$wpcf-street_address = get_post_meta($post->ID,'wpcf-street_address',true);`

这为您提供了特定的字段值。

# ruby-on-rails - 空数据库上的 Mysql2 错误，运行 rake 任务

> ID：15038855
> 
> 赞同：0
> 
> 时间：2013-02-23T09:02:31.067
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake

我有一个空数据库，使用 创建`rake db:create`，当我对它运行 rake db:migrate 时，我得到 mysql2 错误。我在跑`rails 3.2.8`，`ruby - 1.9.3`。我还尝试创建一个新的 rails 项目，`rake db:create`并且`rake db:migrate`运行良好

```
rake aborted!
Mysql2::Error: Table 'groups_empty_db.groups' doesn't exist: SHOW FULL FIELDS FROM `groups`
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in `query'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in `block in execute'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:243:in `execute'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/mysql2_adapter.rb:211:in `execute'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:257:in `execute_and_free'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:424:in `columns'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:16:in `yield'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:16:in `default'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/connection_adapters/schema_cache.rb:16:in `block in initialize'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:56:in `yield'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:56:in `default'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:56:in `block in build_from_hash'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `map'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/predicate_builder.rb:4:in `build_from_hash'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/query_methods.rb:327:in `build_where'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/relation/query_methods.rb:136:in `where'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activerecord-3.2.12/lib/active_record/querying.rb:9:in `where'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/group.rb:262:in `<class:Group>'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/group.rb:27:in `<top (required)>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `block in load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:639:in `new_constants_in'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:468:in `load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:353:in `require_or_load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:502:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:514:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/program.rb:116:in `<class:Program>'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/program.rb:58:in `<top (required)>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `block in load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:639:in `new_constants_in'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:468:in `load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:353:in `require_or_load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:502:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:514:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/user.rb:113:in `<class:User>'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/user.rb:28:in `<top (required)>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `block in load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:639:in `new_constants_in'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:468:in `load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:353:in `require_or_load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:502:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:514:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/member.rb:63:in `<class:Member>'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/models/member.rb:31:in `<top (required)>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `block in load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:639:in `new_constants_in'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:468:in `load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:353:in `require_or_load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:502:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:514:in `load_missing_constant'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:192:in `block in const_missing'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:190:in `const_missing'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/helpers/members_helper.rb:4:in `<module:MembersHelper>'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/app/helpers/members_helper.rb:1:in `<top (required)>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:469:in `block in load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:639:in `new_constants_in'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:468:in `load_file'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:353:in `require_or_load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:313:in `depend_on'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:225:in `require_dependency'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/abstract_controller/helpers.rb:135:in `block in modules_for_helpers'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/abstract_controller/helpers.rb:131:in `map!'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/abstract_controller/helpers.rb:131:in `modules_for_helpers'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/action_controller/metal/helpers.rb:92:in `modules_for_helpers'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/abstract_controller/helpers.rb:95:in `helper'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/action_controller/railties/paths.rb:18:in `block (2 levels) in with'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/action_view/test_case.rb:11:in `<class:TestCase>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/action_view/test_case.rb:10:in `<module:ActionView>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/actionpack-3.2.12/lib/action_view/test_case.rb:8:in `<top (required)>'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/vendor/gems/prototype-rails-3.2.1/lib/prototype-rails/on_load_action_view.rb:17:in `<top (required)>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `block in require'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/vendor/gems/prototype-rails-3.2.1/lib/prototype-rails.rb:12:in `block (2 levels) in <class:Engine>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:25:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/vendor/gems/prototype-rails-3.2.1/lib/prototype-rails.rb:11:in `block in <class:Engine>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/username/Projects/Mentor_26_03_2012/ChronusMentor/config/environment.rb:14:in `<top (required)>'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `block in require'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/application.rb:103:in `require_environment!'
/home/username/.rvm/gems/ruby-1.9.3-p125@mentor/gems/railties-3.2.12/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks' 
```

# jquery - 使用 jquery for css 时，firefox 不显示边框图像

> ID：15038858
> 
> 赞同：0
> 
> 时间：2013-02-23T09:02:41.817
> 
> 标签：jquery, css, image, firefox, backbone.js

我正在使用require.js 和backbone.js 框架开发一个Web 应用程序。

我正在尝试使用 jquery.css 方法设置“boder-image”的 CSS 属性。它在 chrome 和 safari 中运行良好。但是，在 Firefox 中，第一次加载（当没有缓存时）总是导致不绘制边框。如果我用 F5 刷新，渲染效果很好。但是，如果我使用 Ctrl+F5，边框图像就消失了。

我不知道如何解决这个问题。如果有人可以提供提示，那就太好了。

这就是我在代码中设置border-image 属性的方式。

```
obj.css             
            'border-image': 'url(/static/images/border-background-green.png) 40 40 40 40 fill stretch'
            '-moz-border-image': 'url(/static/images/border-background-green.png) 40 40 40 40 stretch'
            '-webkit-border-image': 'url(/static/images/border-background-green.png) 40 40 40 40 stretch'
            '-o-border-image': 'url(/static/images/border-background-gray.png) 40 40 40 40 stretch'             
            'border-width' : '10px 10px 10px 10px' 
```

**：：：：：：：编辑：：：：：：**

我发现将属性“border-image”应用于表格时会出现此问题。当我将表格元素更改为“div”时，问题就消失了。花了 4 小时和一个良好的睡眠来做到这一点！

# ruby - BasicObject、Object 和 Kernel 如何相互交互？

> ID：15038864
> 
> 赞同：-1
> 
> 时间：2013-02-23T09:03:22.600
> 
> 标签：ruby

为了理解它们是如何`BasicObject, Object, and Kernel`相互作用的，我想到了下面的代码，它是从David A Black 的书的*page#100中找到的：*

```
class BasicObject
# a scant seven method definitions go here
end
module Kernel
# over 100 method definitions go here!
end
class Object < BasicObject
# one or two private methods go here,
# but the main point is to mix in the Kernel module
include Kernel
end 
```

Object 是 BasicObject 的子类。每个没有显式超类的类都是 Object 的子类。您可以在 irb 中看到此默认值的证据：

```
class C
end
#=>nil
C.superclass
#=>Object 
```

好的，但是大卫布莱克在他的书中下面的**粗体线条让我感到困惑理解：**

“每个类都有 Object ——因此是 Kernel 和`BasicObject`——在它的祖先中。当然，***仍然存在一个悖论，`BasicObject`即一个`Object`，`Object`一个`Class`，`Class`一个`Object`。但正如你之前看到的，类模型中的一点循环有助于跳跃- 启动层次结构；一旦启动，它就会合乎逻辑地运作，而且干净利落。”***

以下是我的问题：

1.  为什么他提到这种关系是一个**悖论**， 并且是一个，并且 是一个？`BasicObject``Object``Object``Class``Class``Object`
2.  `circularity`他在这里想说什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T09:33:42.893

您混淆了“是”的两个含义：“实例”和“子类”。

1）关于子类关系：

*   `Class`是 的子类`Module`。
*   `Module`是 的子类`Object`。
*   `Object`是 的子类`BasicObject`。

并且由于传递性，`Class`是 和 的子类`Object`，`BasicObject`并且`Module`是 的子类`BasicObject`。但这里没有循环。例如，`BasicObject`不是 、 或 的`Class`子`Module`类`Object`。

2）关于实例化关系：

*   `Class`是`Class`(以及 (种类) of `Module`, `Object`, `BasicObject`) 的一个实例。
*   `Module`是`Class`(以及 (种类) of `Module`, `Object`, `BasicObject`) 的一个实例。
*   `Object`是`Class`(以及 (种类) of `Module`, `Object`, `BasicObject`) 的一个实例。
*   `BasicObject`是`Class`(以及 (种类) of `Module`, `Object`, `BasicObject`) 的一个实例。

但是实例化关系没有循环性。循环性是在传递关系上定义的概念。例如，如果`A → B`和，那么由于传递性，`B → C`那么它遵循，如果它也是，那么就有循环性。但是实例化关系不是传递的。“A 是 B 的实例”和“B 是 C 的实例”并不意味着“A 是 C 的实例”。因此，不能以非平凡的方式在实例化关系上定义循环性。`A → C``C → A`

# facebook-graph-api - facebook c# api，视频上传但它的公共

> ID：15038867
> 
> 赞同：0
> 
> 时间：2013-02-23T09:03:26.590
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我可以从下面的代码上传视频。但视频不是私人的。我需要视频是私人的，或者换句话说，它应该是自我的。

```
FacebookMediaObject mediaObject1 = new FacebookMediaObject
{
FileName = pbmFile.fullPath,
ContentType = Path.GetExtension(filePath)
};
byte[] fileBytes1 = System.IO.File.ReadAllBytes(filePath);
mediaObject1.SetValue(fileBytes1);
IDictionary<string, object> upload1 = new Dictionary<string, object>();
upload1.Add("image", mediaObject1);

staticGlobalConst.fbClient1.Post("/me/videos", upload1, staticGlobalConst.del1Video) as JsonObject 
```

当我在下面添加代码时，它会引发异常

我尝试添加参数

```
upload1.Add("privacy", "SELF"); 
```

如何上传私人视频？

谢谢苏吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:09:16.290

我通过添加以下参数解决了它

```
upload1.Add("privacy", "{\"value\":\"SELF\"}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:19:05.153

这取决于您`Visibility of app and posts:`第一次使用应用程序进行身份验证时对“”选项的选择。

您可以将其更改为：**`Public,Friends,Only Me`**，从您的`Account Settings>Apps`并选择您的应用程序并更改它。

# rss - 使用 Biztalk 阅读 RSS 提要

> ID：15038868
> 
> 赞同：0
> 
> 时间：2013-02-23T09:03:35.857
> 
> 标签：rss, biztalk

是否可以使用 Biztalk 导入 RSS 提要的内容？我想导入 RSS 提要并将其发送到将内容放入 SQL Server 数据库的发送端口。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:32:29.187

您需要从定义 RSS 消息的 Xml Schema (XSD) 开始 - 查看定义 RSS 2.0 模式的[http://rss2schema.codeplex.com/ 。](http://rss2schema.codeplex.com/)

您通常会通过发出 HTTP GET 请求从 HTTP 端点检索 RSS 提要，并且网络服务器将使用 RSS 内容进行响应。

不幸的是，BizTalk HTTP 发送适配器（代表您执行 HTTP 请求的东西）仅支持 POST 动词，我想您会发现大多数网站不会让您使用 POST 检索 RSS 提要。

似乎确实有一些选项，包括使用 WCF 自定义发送端口（[http://social.msdn.microsoft.com/Forums/en-US/biztalkgeneral/thread/3d001f89-88e2-4c67-8a54- 2ea5a5f7c064/](http://social.msdn.microsoft.com/Forums/en-US/biztalkgeneral/thread/3d001f89-88e2-4c67-8a54-2ea5a5f7c064/)）。如果这看起来工作量很大，您可能只想考虑编写一个 WCF 服务或 Web 服务来执行您从 BizTalk 调用的 GET 请求。

获得 RSS 响应消息后，只需使用配置了 SQL 适配器（或 WCF-SQL 适配器）的发送端口解析并写入 SQL。

我想 BizTalk HTTP 适配器中缺少 HTTP GET 是 nsoftware 编写其 RSS 适配器的原因......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:44:19.313

由于 rss 基本上是一个 xml 消息，并且 BizTalk 提供了一个 HTTP 协议，所以看起来相当简单。

*   创建接收位置以检索 rss 提要
*   使用编排加载内容
*   创建一个发送端口以连接到 sql server 以写入您检索到的内容。

这不是微不足道的，但似乎并不太难

# windows-phone-7 - 如何在 windows phone 8 应用程序中为 httpwebrequest 设置超时？

> ID：15038875
> 
> 赞同：4
> 
> 时间：2013-02-23T09:05:41.690
> 
> 标签：windows-phone-7, httpwebrequest, windows-phone-8

我正在开发一个 windows phone 8 应用程序，在我的应用程序中我正在调用服务并将一些数据下载到我的应用程序中。

我正在使用 httpwebrequest 进行请求，但我无法为我的 httpwebrequest 对象设置超时。

这就是我创建和使用 httpwebrequest 的方式：-

```
public async Task<string> ServiceRequest(string serviceurl, string request, string methodname)
        {
            string response = "";
            try
            {

                var httpwebrequest = WebRequest.Create(new Uri(serviceurl)) as HttpWebRequest;
                httpwebrequest.Method = "POST";
                httpwebrequest.Headers["SOAPAction"] = "http://tempuri.org/" + iTestservice + "/" + methodname + "";
                httpwebrequest.ContentType = "text/xml";

                byte[] data = Encoding.UTF8.GetBytes(request);
                using (var requestStream = await Task<Stream>.Factory.FromAsync(httpwebrequest.BeginGetRequestStream, httpwebrequest.EndGetRequestStream, null))
                {
                    await requestStream.WriteAsync(data, 0, data.Length);
                }

                response = await httpRequest(httpwebrequest);

            }
            catch (Exception ex)
            {

                return null;
            }

            return response;

        }

        public async Task<string> httpRequest(HttpWebRequest request)
        {
            string received;

            using (var response = (HttpWebResponse)(await Task<WebResponse>.Factory.FromAsync(request.BeginGetResponse, request.EndGetResponse, null)))
            {
                using (var responseStream = response.GetResponseStream())
                {
                    using (var sr = new StreamReader(responseStream))
                    {

                        received = await sr.ReadToEndAsync();
                    }
                }
            }

            return received;
        } 
```

**我的疑问是：-**

1）如何将超时属性设置为 Httpwebrequest ？

2）我可以在我的 Windows Phone 8 应用程序中设置超时属性的不同方法是什么？

请告诉我 。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T14:07:39.743

您不能`HttpWebRequest.Timeout`在 Windows Phone 上使用，因为该平台不存在它。

如果您愿意使用 beta 库，则可以[`HttpClient`通过 NuGet](https://nuget.org/packages/Microsoft.Net.Http)安装并使用*它的* `Timeout`属性。

否则，您可能最好使用[Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async)`TaskEx.Delay`的一部分。安装该库后，您将替换此行：

```
response = await httpRequest(httpwebrequest); 
```

有了这个：

```
var httpTask = httpRequest(httpwebrequest);
var completeTask = await TaskEx.WhenAny(httpTask, TaskEx.Delay(5000));
if (completeTask == httpTask)
  return await httpTask;
else
  return null; // timeout 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T10:27:06.533

您可以使用 HttpStatusCode。HttpStatusCode 是一个枚举，可用于获取 HttpWebRequest 中的错误类型。

`catch(WebException ex)` `{`

```
HttpWebResponse response = (HttpWebResponse)ex.Response; 
```

`if(response.StatusCode==HttpStatusCode.GatewayTimeout) { }`

`}`

GatewayTimeout 表示中间代理服务器在等待另一个代理或源服务器的响应时超时。有关详细信息，您可以参考[msdn](https://msdn.microsoft.com/en-us/library/system.net.httpstatuscode(v=vs.110).aspx) 站点。希望对您有所帮助

# python - 拓扑排序python

> ID：15038876
> 
> 赞同：8
> 
> 时间：2013-02-23T09:06:00.927
> 
> 标签：python, algorithm, graph

我为 DFS 非递归编写了一个解决方案，但我无法修改它以进行拓扑排序：

```
def dfs(graph,start):
    path = []
    stack = [start]    
    while stack != []: 
        v = stack.pop()
        if v not in path: path.append(v)
        for w in reversed(graph[v]): 
            if w not in path and not w in stack:
                stack.append(w) 
    return path 
```

任何想法如何修改它？

使用递归版本，我可以轻松进行排序：

```
def dfs_rec(graph,start,path):
    path = path + [start]
    for edge in graph[start]: 
        if edge not in path:
            path = dfs_rec(graph, edge,path)
    print start
    return path 
```

输入：

```
>>> graph = {
        1: [2, 3],
        2: [4, 5, 6],
        3: [4,6],
        4: [5,6],
        5: [6],
        6: []
    }
>>> dfs_rec(graph,1,[])
6
5
4
2
3
1
[1, 2, 4, 5, 6, 3]
>>> dfs(graph,1)
[1, 2, 4, 5, 6, 3]
>>> graph = {
        1: [3],
        3: [5,6],
        5: [4],
        4: [7],
        7: [],
        6: []
    }
>>> print dfs_rec(graph,1,[])
7
4
5
6
3
1
[1, 3, 5, 4, 7, 6]
>>> print dfs(graph,1)
[1, 3, 5, 4, 7, 6] 
```

所以我也需要在非递归中得到这个排序。

## 非递归解决方案：

我认为这也可能是解决方案，如果我错了，请标记我。

```
def dfs(graph,start):
    path = []
    stack = [start]
    label = len(graph)
    result = {}  
    while stack != []:
        #this for loop could be done in other ways also
        for element in stack:
            if element not in result:
                result[element] = label
                label = label - 1

        v = stack.pop()
        if v not in path: path.append(v)
        for w in reversed(graph[v]): 
            if w not in path and not w in stack:
                stack.append(w) 

    result = {v:k for k, v in result.items()}
    return path,result 
```

输入：

```
graph = { 1: [3], 3:[5,6] , 5:[4] , 4:[7], 7:[],6:[]}
print dfs(graph,1) 
```

输出：

```
([1, 3, 5, 4, 7, 6], {1: 7, 2: 4, 3: 5, 4: 6, 5: 3, 6: 1})

        1
       / 
      3
     /\
    5  6
   /
  4
 /
7 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-02-21T05:30:12.497

FWIW，这是我为非递归拓扑排序编写的一些代码。

```
from collections import defaultdict, namedtuple
from itertools import islice

Results = namedtuple('Results', ['sorted', 'cyclic'])

def topological_sort(dependency_pairs):
    'Sort values subject to dependency constraints'
    num_heads = defaultdict(int)   # num arrows pointing in
    tails = defaultdict(list)      # list of arrows going out
    heads = []                     # unique list of heads in order first seen
    for h, t in dependency_pairs:
        num_heads[t] += 1
        if h in tails:
            tails[h].append(t)
        else:
            tails[h] = [t]
            heads.append(h)

    ordered = [h for h in heads if h not in num_heads]
    for h in ordered:
        for t in tails[h]:
            num_heads[t] -= 1
            if not num_heads[t]:
                ordered.append(t)
    cyclic = [n for n, heads in num_heads.items() if heads]
    return Results(ordered, cyclic)

if __name__ == '__main__':
    print( topological_sort('aa'.split()) )
    print( topological_sort('ah bg cf ch di ed fb fg hd he ib'.split()) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-05T20:26:27.407

```
from collections import defaultdict, deque

class Graph:
    def __init__(self, directed=False, nodes=None, edges=None):
        self.graph = defaultdict(list)
        self.directed = directed
        self.add_nodes(nodes)
        self.add_edges(edges)

    @property
    def nodes(self):
        if not self.directed:
            return list(self.graph.keys())
        elif self.directed:
            nodes = set()
            nodes.update(self.graph.keys())
            for node in self.graph.keys():
                for neighbor in self.graph[node]:
                    nodes.add(neighbor)
            return list(nodes)

    def add_node(self, node):
        if node not in self.nodes:
            self.graph[node] = list()

    def add_nodes(self, nodes):
        if nodes is None:
            return None
        for node in nodes:
            self.add_node(node)

    @property
    def edges(self):
        edges = list()
        for source, neighbors in self.graph.items():
            for neighbor in neighbors:
                edges.append((source, neighbor))
        return edges

    def add_edge(self, edge):
        node1, node2 = edge
        self.graph[node1].append(node2)
        if not self.directed:
            self.graph[node2].append(node1)

    def add_edges(self, edges):
        if edges is None:
            return None
        for edge in edges:
            self.add_edge(edge)

    def topological_util(self, node, visited, label):
        visited[node] = True
        for edge in self.graph[node]:
            if not visited[edge]:
                self.topological_util(edge, visited, label)
        label.appendleft(node)

    def topological_sort(self):
        visited = dict.fromkeys(self.nodes, False)
        # store all nodes in topological order, the index is the position
        label = deque()
        for node in self.nodes:
            if not visited[node]:
                self.topological_util(node, visited, label)
        return label 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-30T20:37:24.603

```
 from collections import defaultdict  # importing defaultdict      
    def topological_sort(graph,b,a):     # defining function
        T = []
        visited = []
        in_degree = []
        for i in range(a+1):            
                in_degree.append(0)     # initialising the degree of each vertex =0
                visited.append(0)       # initialising all the vertics unvisited
        for i in range(1,a+1):
                for j in graph[i]:
                    in_degree[j] = in_degree[j] + 1  # now assigning and incrementing 
        Queue=[]                                     # the degree of each vertex acc.
        for i in range(1,a+1):
                if in_degree[i]==0:
                        Queue.append(i)         # appending those vertices which have zero 
                        visited[i] = 1          # degree and making it as visited   
        while Queue :
                vertex = Queue.pop(Queue.index(min(Queue))) # popping each element in 
                T.append(vertex)                            # lexicographical order and 
                for j in graph[vertex]:                     # appending to T
                        if visited[j]==0:
                            in_degree[j] = in_degree[j] - 1
                            if in_degree[j] == 0:          
                                    Queue.append(j)       #according to each popped vertex
                                    visited[j] = 1        #as key in graph check whether
        return T                                          #in list corresponding to key 
                                                          # as value,is it not visited and 
                                                          #decreasing its value when it 
                                                          #becomes zero,append it to queue
                                                          #and mark it as visited
    graph=defaultdict(list)    
    a,b=list(map(int,input().split())) #a=no. of vertices  
    for i in range(b):                 #b=no. of edges
        p,q=list(map(int,input().split())) 
        graph[p].append(q)      # we take input in graph as DAG
    ss=topological_sort(graph,b,a) # calling function
    for i in ss:
        print(i,end=" ")
'''Input
    5 6
    1 2
    1 3
    2 3
    2 4
    3 4
    3 5
  Your Code's Output
    1 2 3 4 5
  Expected Correct Output
    1 2 3 4 5 ''' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-23T19:49:10.397

```
 #this algorithm gives the logic of topological sorting..if u want to run this 
    #give adjacency mat of your choice and this algorithm works on graph elements ranging from 0 to n 

    a=[[0,0,1,0,0,0],[0,0,1,0,0,0],[0,0,0,1,1,0],[0,0,0,0,1,0],[0,0,0,0,0,0],[0,0,1,0,0,0]]
    vis=[0 for i in range(0,len(a))]
    s=[]

    orderstack=[]#stores the reverse order of topological sorted elements

    def dfs_for_topological_sorting(a,vis,i):

        vis[i]=1
        x=0
        for j in range(0,len(a[0])):
            if(a[i][j]==1 and vis[j]==0):
                x=1
                s.append(j)
                #print(s)
                dfs_for_topological_sorting(a,vis,j)
        if(x==0 and len(s)!=0):

            orderstack.append(s[len(s)-1])
        if(len(s)>0):
            dfs_for_topological_sorting(a,vis,s.pop())

    for i in range(0,len(a)):
        if(i not in orderstack):
            s.append(i)
            dfs_for_topological_sorting(a,vis,i)
    print(orderstack[len(orderstack)-1::-1]) 
```

# .net-3.5 - 无法安装 .Net 框架 3.5

> ID：15038887
> 
> 赞同：2
> 
> 时间：2013-02-23T09:07:43.857
> 
> 标签：.net-3.5, windows-server-2008-r2, .net-framework-version

我在 Windows Server 2008 R2、64 位操作系统上下载了 .Net framework 3.5.1 sp1，每次运行 exe 文件时都会收到一条错误消息

> “您必须使用角色管理工具来安装或配置 Microsoft .NET Framework 3.5 SP1”。

我启动服务器管理器，选择功能节点和“添加功能”并启用 .net 框架功能，但仍然发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T14:43:12.710

请参阅[如何在 Windows Server 2008 R2 上为 SQL Server 2008 和 SQL Server 2008 R2 安装/启用 .Net 3.5 SP1](http://blogs.msdn.com/b/sqlblog/archive/2010/01/08/how-to-install-net-framework-3-5-sp1-on-windows-server-2008-r2-environments.aspx)

# java - 那么如何创建安装程序并获取资源

> ID：15038889
> 
> 赞同：0
> 
> 时间：2013-02-23T09:07:47.030
> 
> 标签：java

我用 Java 创建了一个应用程序。现在我想为它创建安装程序。我知道如何创建 JAR 文件，但我想创建像 exe 文件这样的安装程序。所以2个问题：

1.  首先 - 我应该使用哪个程序来创建安装程序。有没有简单的方法来创建多平台安装程序？我听说 IzPack 是创建多平台安装程序的好选择吗？
2.  创建安装程序后，我应该如何在这个应用程序中获取图片和文档？在我的应用程序中，它看起来像：*ImageIO.read(new File("/home/me/Pictures/picture.jpg))*。当然，在其他一些环境中，这不可能奏效。创建安装程序后我应该如何获得资源. 也许我应该使用方法：getResource()、getResourceAsStream() 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:11:59.527

关于安装，我可能会简单地选择一个包含可执行 jar 或启动 shell 脚本的 zip 文件。或使用 Java Web Start。

关于图像，它们应该与您的 .class 文件一起位于 jar 文件中，并使用 .class 文件加载[`Class.getResourceAsStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)。

# debugging - 如何创建到远程机器的完整内存转储？

> ID：15038891
> 
> 赞同：1
> 
> 时间：2013-02-23T09:07:57.087
> 
> 标签：debugging, kernel, windbg, crash-dumps

我想获取远程机器的完整物理内存转储。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-21T18:18:14.107

这可以通过 WinDbg 实现。看来您已经知道 WinDbg，因为您使用了该标签。建立[远程内核会话 (MSDN)](https://msdn.microsoft.com/en-us/library/windows/hardware/hh439346(v=vs.85).aspx)。

连接后，用于`.dump /f`获取完整的内核转储，即物理 RAM 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:22:38.980

取决于 Windows 风格，但通常像这样（Windows 7 示例）：

1.  控制面板 -> 系统 -> 高级系统设置 -> 高级 -> 启动和恢复 -> 设置。在写入调试信息列表框中选择完整内存转储并写入存储路径。也选择自动重启复选框。
2.  创建一个要在系统启动时运行的任务（运行任务计划程序实用程序），它将获取内存转储文件并将其复制到首选的远程位置。该任务可以是任何受支持的脚本语言的简单脚本（最直接的方法是使用该 Windows 批处理语言）。

# java - 如何使用 Java 线程模拟客户端-服务器应用程序？

> ID：15038901
> 
> 赞同：0
> 
> 时间：2013-02-23T09:08:49.090
> 
> 标签：java, multithreading

对于这个学校作业，我需要使用 Java 线程模拟客户端服务器类型的应用程序（不需要套接字等）。我该怎么做呢？

我需要一种方法来启动服务器并等待客户端调用它，然后它应该返回响应。我心中的“API”是这样的：

```
server.start()
client1.connect(server)
client2.connect(server)

x = client1.getData()
y = client2.getData()

success1 = client1.sendData(1)
success2 = client2.sendData(2) 
```

server|client.run 方法看起来如何？假设我现在可以对方法调用进行硬编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:23:12.807

我建议使用以下方法：
1\. 让“服务器”代码与阻塞队列一起使用 -
阻塞队列是一种同步的数据结构，让从中读取数据的线程（“消费者”线程）等到队列中有要读取的数据。
“生产者”线程是在队列中“推送”数据的线程。
我建议您使用其中一种[阻塞队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)实现。
我还建议您阅读有关[“消费者生产者](http://en.wikipedia.org/wiki/Producer-consumer_problem)”模式的更多信息。
阻塞队列还消除了多线程编程中不推荐的“忙等待”的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:20:29.757

根据您提供的描述，我可以建议您写一些类似的东西

1）有一个队列，所有客户端都可以放置消息。

2) 在像 while(true) 这样的无限循环中运行的服务器等待已放入队列中的新消息，如果找到，则对其进行处理并将其标记为已处理。

3）客户端线程的工作是创建消息并将它们放入队列中。并通知服务器新消息已添加到队列中，以便服务器可以知道新消息已到达进行处理。

为了让这个程序正常工作，我认为你需要学习 Thread 的 notify、notifyAll() 和 wait() 方法。所以基本上没有套接字你正在寻找它“线程间通信”。[此](http://www.tutorialspoint.com/java/java_thread_communication.htm)链接可以提供帮助。

希望这可以帮助。

# vb.net - 获取 VB 2008 中的所有列表框项

> ID：15038902
> 
> 赞同：0
> 
> 时间：2013-02-23T09:08:57.670
> 
> 标签：vb.net, listbox

我正在开发一个食谱库。我有一个带有 3 个列表框（lstIngredient、lstSelected、lstRecipe）和一个查找按钮的表单。lstIngredient 填充了存储在数据库中的成分名称。

当用户在 lstIngredient 中选择（双击）一个名称时，它将被列出到 lstSelected。之后，当用户单击查找按钮时，它将在数据库中找到哪些食谱使用了这些成分。数据库中的表如下所示：

```
 id |   recipe   |   ingredient
 1  | spaghetti  |  tomato sause
 2  | spaghetti  |  cheese
 3  | spaghetti  |  hotdog
 4  |  burger    |  bread bun
 5  |  burger    |  burger patty
 6  |  burger    |  cheese 
```

所以在这里，假设用户选择了`cheese`，`bread bun`并且`hotdog`（注意：这些项目是一一选择的），这些将在 lstSelected 中列出。单击查找按钮时，结果应为`burger`and `spaghetti`。如果您注意到，汉堡是列表中的第一项。这是一个示例，lstRecipe 中的结果应取决于所选成分的出现次数。这是我所做的：

```
Call Connect()

    Dim dt As New DataTable
    Dim cmd As New MySqlCommand
    Try
        lstRecipe.Items.Clear()

        cmd.Connection = myConn
        cmd.CommandText = "select recipe from cook_book where ingredient = @item"
        cmd.Parameters.AddWithValue("item", lstSelected.Items)

        myReader = myCmd.ExecuteReader
        If (myReader.Read()) Then
            myReader.Close()
            myAdptr.SelectCommand = cmd
            myAdptr.Fill(dt)
            lstRecipe.DisplayMember = "recipe"

            For Each row As DataRow In dt.Rows
                lstRecipe.Items.Add(row("recipe"))
            Next
            Dim builder As New StringBuilder()
            builder.Append("select distinct recipe from cook_book where")
            For y As Integer = 0 To lstSelected.Items.Count - 1

                Dim parameterName As String = "@item" & y.ToString()
                If y <> 0 Then
                    builder.Append("and ")
                End If
                builder.Append(parameterName)
                builder.Append(" in (select ingredient from cook_book where recipe = i.recipe) ")
                cmd.Parameters.AddWithValue(parameterName, lstSelected.Items(y))
            Next
            cmd.CommandText = builder.ToString()
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
    cmd = Nothing
    myReader = Nothing
    myConn.Close()
    Call Disconnect() 
```

该代码位于 btnFind_Click 事件下。我没有收到任何错误，但它没有按应有的方式运行。它只找到用户选择的最后一种成分的最后一个配方。

# php - 如果程序员不将参数传递给 PHP OOP 中的类方法，最好的解决方案是什么？

> ID：15038903
> 
> 赞同：0
> 
> 时间：2013-02-23T09:08:58.257
> 
> 标签：php, methods, parameters

我需要知道我们是否必须检查 PHP OOP 中类方法的输入参数？
例如想象下面的方法：

```
public function show_message($message)
{
   echo $message;
} 
```

如果程序员不将消息参数传递给方法，最好的解决方案是什么？让 PHP 显示它的警告或运行时错误或做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:21:20.420

“*最佳”*解决方案取决于您希望该方法确切执行的操作，但通常，我建议将类型提示和默认值结合使用：

```
class Foo
{
    public function doSomething ($message = 'None')
    {
        echo $message;
    }
    public function somethingElse (array $foo = array())
    {
        echo '<pre>';
        print_r($foo);
        echo '</pre>';//will always be an array
    }
    public function onlyMyself (Foo $instance)
    {
        return $instance->doSomething('I know this method exists');
    }
    public function myselfOrNothing(Foo $instance = null)
    {
        if ($instance === null)
        {
            return $this->doSomething('No instance provided');
        }
        return $instance->doSomething('Instance provided to '.__METHOD__);
    }
}
$foo = new Foo;
$bar = new Bar;
$foo->onlyMyself($bar);//works fine
$foo->onlyMyself(array());//fails
$bar->myselfOrNothing();//works
$bar->somethingElse();//ok... 
```

等等，你得到了基本原理。
请注意，如果您使用的是抽象父类（或任何旧的父类），则类型提示父类也允许传递子类：

```
class Bar extends Foo
{
}
class Foobar extends Bar
{
}
$fb = new Foobar;
$b = new Bar;
public function someClass(Foo $instance)
{//accepts instances of Foo, Bar and Foobar...
    echo get_class($instance);//can echo any class name
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:20:22.960

允许默认值，然后捕获该默认值。这使您可以控制您的操作，而不是简单的默认 PHP 行为

```
public function show_message($message = "\x00")
{
    if ($message === "\x00") {
        // decide how critical this argument actually is, and react appropriately
        throw new BadMethodCallException("The message argument is critical and must be passed to this method");
        // or simply apply a default if it isn't critical
        $message = 'Hello World';
    }
    echo $message;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T09:11:40.467

我认为错误的类型应该取决于函数的重要性，以及如果参数不存在，这是否足以成为停止执行的理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T09:21:39.030

如果您正在谈论输入参数验证。你可以做这样的事情。

```
public function show_message($message = '') {

  $result = 'No message';

  if (!empty($message)) {

    if (is_bool($message)) {
      $result = 'It is a boolean';
    }
    if (is_int($message)) {
      $result = 'It is a integer';
    }
    if (is_float($message)) {
      $result = 'It is a float';
    }
    if (is_string($message)) {
      $result = 'It is a string';
    }
    if (is_array($message)) {
      $result = 'It is an array';
    }
    if (is_object($message)) {
      $result = 'It is an object';
    }
  }

  return $result;
} 
```

# php - jquery-ajax 表单提交是否有大小限制

> ID：15038906
> 
> 赞同：0
> 
> 时间：2013-02-23T09:09:38.480
> 
> 标签：php, jquery, ajax, file-upload, size

我想在不加载新的 php 页面的情况下提交表单。我的表单包含文件上传和 textarea 字段。基本上数据可以像博客一样，即必须提交大数据

我正在阅读一些关于 jquery-ajax 表单提交的教程

*   本教程均未显示如何上传文件。任何人都可以帮助我吗？
*   由于使用了get方法，jquery-ajax可以提交的数据大小是否有限制。如果是，我应该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:18:07.990

您可以使用 iframe，这样您就不必刷新当前页面。

许多人直接使用插件。但是您可以很容易地自己完成此操作，并且具有 AJAX 请求的所有功能。

将表单提交到一个隐藏的 iframe，该 iframe 附加了一个加载事件处理程序，因此当提交表单时，您有一个回调函数，该函数实际上包含服务器响应（加载后 iframe 的 HTML）。

例子：

```
<form action="..." method="post" encrypt="application/x-www-form-urlencoded" target="workFrame" >
    <input type="file" name="file" />
    <input type="submit" />
</form>
<iframe id="workFrame" src="about:blank" style="display:none;"></iframe> 
```

Javascript代码是：

```
(function () {
    $('form').on('submit', function () {
        //check if the form submission is valid, if so just let it submit
        //otherwise you could call `return false;` to stop the submission
    });

    $('#workFrame').on('load', function () {

        //get the response from the server
        var response = $(this).contents().find('body').html();

        //you can now access the server response in the `response` variable
        //this is the same as the success callback for a jQuery AJAX request
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:15:00.590

如您所知，设置的限制不是浏览器。并且根据很多众所周知的指令，例如在 Apache 中这一段定义了参数 LimitRequestBody。此参数可以取值从 0 字节到 2 GB。在 PHP 中，还有一个名为 post_max_size 的指令。指定 POST 请求的大小。

# ios - 固定大小的 UIView，在视图中居中

> ID：15038907
> 
> 赞同：2
> 
> 时间：2013-02-23T09:09:55.757
> 
> 标签：ios, objective-c, cocoa-touch

我想要一个带有`width=480`and的 UIView `height=640`，位于我的主视图中间。

我希望在横向和纵向都发生这种情况，但是现在如果我将其设计为纵向，当我将设备转为横向时，我的 UIView 具有`width=640`和`height=480`.

我的 UIView 有什么解决方案可以在两种方向类型中保持其大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T10:39:19.827

您可以实现`viewDidLayoutSubviews`(in `UIViewController`) 或`layoutSubviews`(in `UIView`) 来重新定位视图。

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    self.myCustomView.bounds = CGRectMake(0, 0, 480, 640); // update size
    self.myCustomView.center = self.view.center;           // update center
} 
```

# javascript - JavaScript 中的对象到字符串的转换

> ID：15038908
> 
> 赞同：0
> 
> 时间：2013-02-23T09:09:57.373
> 
> 标签：javascript

我正在玩 JavaScript 中的对象到字符串的转换。所有对象都继承两个转换函数 -`toString()`和`valueOf()`. 当 JavaScript 尝试将对象转换为字符串时，它会搜索`toString()`实现，然后再搜索`valueOf()`实现。所以我以这种方式覆盖了`toString()`and ：`valueOf()`

```
var obj = {
x: 10,
y: 20,   
toString: function() {
    return "x = " + this.x + ", y = " + this.y;
},
valueOf: function() {
    return this.x + ", " + this.y;
}}; 
```

将对象文字与字符串连接起来：

```
console.log("hello " + obj); 
```

**输出**：`hello 10, 20`

输出不应该是 :`hello x = 10, y = 20`吗？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:38:13.977

在 中`console.log("hello " + obj);`，执行 is 的类型转换的运算符`obj`，`+`称为加法运算符。

在加法运算符中，不是将每个参数强制转换为字符串，而是将每个参数强制转换为没有类型提示的原始值。当对象被强制转换为没有类型提示的基元时，`valueOf`如果可用，则使用该方法。仅当`valueOf`不可调用或返回非原始值时才`toString`使用。如果两者都`valueOf`返回`toString`非原始值，`TypeError`则抛出 a。

* * *

引用规范：

[http://es5.github.com/#x11.6.1](http://es5.github.com/#x11.6.1)

> ### 11.6.1 加法运算符（+）
> 
> 1) 令 lref 为 AdditiveExpression 求值的结果。
> 2) 令 lval 为 GetValue(lref)。
> 3) 令 rref 为 MultiplicativeExpression 求值的结果。4) 设 rval 为 GetValue(rref)。5) 令 lprim 为 ToPrimitive(lval)。
> 6) 令 rprim 为 ToPrimitive(rval)。
> 7) 如果 Type(lprim) 是 String 或 Type(rprim) 是 String，那么
> ...
> 
> **注 1**在步骤 5 和 6 中对 ToPrimitive 的调用中没有提供任何提示。

[http://es5.github.com/#x9.1](http://es5.github.com/#x9.1)

> ### 9.1 ToPrimitive
> 
> ...
> 
> **对象**- 返回对象的默认值。通过调用对象的 [[DefaultValue]] 内部方法检索对象的默认值，并传递可选提示 PreferredType。本规范为 8.12.8 中的所有原生 ECMAScript 对象定义了 [[DefaultValue]] 内部方法的行为。

[http://es5.github.com/#x8.12.8](http://es5.github.com/#x8.12.8)

> ### 8.12.8 [[DefaultValue]]（提示）
> 
> 当 O 的 [[DefaultValue]] 内部方法在没有提示的情况下被调用时，它的行为就好像提示是 Number 一样，除非 O 是 Date 对象（参见 15.9.6），在这种情况下，它的行为就好像提示是细绳。
> 
> ...
> 
> 当 O 的 [[DefaultValue]] 内部方法用提示 Number 调用时，采取以下步骤：
> 
> 1) 令 valueOf 为使用参数“valueOf”调用对象 O 的 [[Get]] 内部方法的结果。
> 2) 如果 IsCallable(valueOf) 为真，则
> 
> *   令 val 为调用 valueOf 的 [[Call]] 内部方法的结果，其中 O 作为 this 值和一个空参数列表。
> *   如果 val 是原始值，则返回 val。
>     ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:22:32.193

如果您要添加带有对象的字符串，它会尝试转换为原始值，这就是调用 valueOf 而不是 toString 的原因

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf)

# asp.net-mvc - ViewModel 和 DB 模式中的验证

> ID：15038909
> 
> 赞同：1
> 
> 时间：2013-02-23T09:10:42.713
> 
> 标签：asp.net-mvc, entity-framework, validation, ef-code-first, dry

现在我在 ViewModels 和 POCO-models 中使用验证。我在 POCO 模型中验证正确的数据库模式。但是在这种方法中，我复制了相同的代码（例如 - 两种模型都需要）。这不是 DRY 原则。如何避免重复？

# sql - 此 SQL 语句检测到死锁？

> ID：15038915
> 
> 赞同：1
> 
> 时间：2013-02-23T09:12:18.633
> 
> 标签：sql, database, ibm-soliddb

我对以下陈述有一些问题，有人知道吗？

任何意见表示赞赏！

```
UPDATE tableTx 
SET tableTx.ResultCode = 0 
WHERE tableTx.id in (SELECT tableTxInfo.id 
                     FROM tableTxInfo 
                     WHERE tableTxInfo.messageId = 'john-to-bob' 
                     and tableTx.ResultCode != 1) 
```

`id`of`tableTx`和相同（`tableTxInfo`用作`INTEGER PRIMARY KEY`_`tableTx``tableTxInfo`

我有大约 40000 条记录`messageId = "john-to-bob"`。

当我尝试从两个不同的线程执行上述 SQL 语句时，一个挂起很长时间，另一个线程刚刚得到响应：

> 事务检测到死锁，事务被回滚。

我对 SQL 和数据库概念不太熟悉。有没有办法防止这种错误？

我的数据库是 IBM soliddb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:26:21.890

你可以这样尝试：

```
UPDATE tableTx 
SET tableTx.ResultCode = 0 
WHERE tableTx.id in (SELECT tableTxInfo.id 
                     FROM tableTxInfo 
                     WHERE tableTxInfo.messageId = 'john-to-bob') 
      AND tableTx.ResultCode != 1; 
```

这可能会阻止两个查询之间的循环依赖。

祝你好运！

# sql - 如何将两个表组合成拥有相同的列？

> ID：15038919
> 
> 赞同：7
> 
> 时间：2013-02-23T09:12:55.207
> 
> 标签：sql, database, oracle

我有两个表 A 和 B。A 有两列：id、amount。B也有两列：id，amount。我希望将 A 和 B 结合起来创建一个新表 C，具有相同的两列：id、amount。我怎样才能使用 SQL 来做到这一点？例如：

```
A
    ('A1',1)
    ('A2',5)
    ('A3',2)
    ('A4',5)
    ('A5',2)
    ('A6',7)
B
    ('A1',3)
    ('A3',2)
    ('A4',7)
    ('A5',4)
    ('A8',2)
    ('A9',10) 
```

所以 C 应该是：

```
C
    ('A1',4)
    ('A2',5)
    ('A3',4)
    ('A4',12)
    ('A5',6)
    ('A6',7)
    ('A8',2)
    ('A9',10) 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T09:14:30.200

```
SELECT  ID, SUM(Amount) total
FROM
        (
            SELECT ID, Amount FROM A
            UNION ALL
            SELECT ID, AMount FROM B
        ) s
GROUP   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/941b9/5)

您可以根据查询结果创建表。

```
CREATE TABLE C
AS
SELECT  ID, SUM(Amount) total
FROM
        (
            SELECT ID, Amount FROM A
            UNION ALL
            SELECT ID, AMount FROM B
        ) s
GROUP   BY ID; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/b98f3/1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-31T15:42:55.503

上面的答案绝对没问题。只需向其中添加一个按 ID 排序的 order by 子句。

```
SELECT  ID, SUM(Amount) as total
FROM
        (
            SELECT ID, Amount FROM A
            UNION ALL
            SELECT ID, AMount FROM B
        ) s
GROUP by ID
order by ID 
```

# c# - Metro StorageFile 多线程文件记录

> ID：15038920
> 
> 赞同：1
> 
> 时间：2013-02-23T09:12:58.047
> 
> 标签：c#, multithreading, microsoft-metro, storagefile

处理对对象的多线程文件访问的正确方法是什么`StorageFile`？

创建一个 后`StorageFile`，我使用`FileIO.AppendTextAsync`.

这可行，但是一旦多个线程调用`FileIO.AppendTextAsync`，我就会收到 Access Denied 错误 - 可能是因为之前对它的调用仍在运行。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:22:53.403

我还没有找到完美的解决方案，但我找到了一个可行的解决方案。

1.  `StorageFile`用`volatile`关键字标记（显着减少错误）。
2.  然后我重构了一些从不同线程不必要地执行的代码（现在所有错误都消失了）。

**注意：** 1 和 2 一起实施对于实现预期结果是必要的 - 因此我对解决方案不完美的评论。

**更新：有关更正确的解决方案，请参阅此帖子：** [FileIO 多线程](https://stackoverflow.com/questions/17000227/metro-app-fileio-writetextasync-multiple-threads)

# spring - Spring-security：页面没有正确重定向

> ID：15038921
> 
> 赞同：1
> 
> 时间：2013-02-23T09:13:13.863
> 
> 标签：spring, web-applications, spring-security

我想在 m web 应用程序中使用 spring 中的 spring security 所以这里是配置：

这是 spring-security.xml ：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config="true" use-expressions="false">
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page="/authentication"  login-processing-url="/static  
              /j_spring_security_check" authentication-failure 
              url="/login?login_error=t" />

</http>

<authentication-manager>
  <authentication-provider>
     <jdbc-user-service id="userService"
       data-source-ref="DataSource"
       users-by-username-query="select name, password, true from person where name=?"
       authorities-by-username-query="select name,'ROLE_USER' from person where    
       name=?" />
  </authentication-provider>
</authentication-manager> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns  
 /javaee/web-app_2_5.xsd"
 id="WebApp_ID" version="2.5">

  <display-name>OTV_JSF_PrimeFaces_Spring_Hibernate</display-name>

  <!-- Spring Context Configuration' s Path definition -->
  <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>
  /WEB-INF/applicationContext.xml
  /WEB-INF/spring-security.xml
  </param-value>
 </context-param>

 <!-- The Bootstrap listener to start up and shut down Spring's root  
   WebApplicationContext. It is registered to Servlet Container -->
 <listener>
  <listener-class>
    org.springframework.web.context.ContextLoaderListener
  </listener-class>
 </listener>
 <listener>
 <listener-class>
     org.springframework.web.context.request.RequestContextListener
 </listener-class>
 </listener>

<!-- Project Stage Level -->
 <context-param>
  <param-name>javax.faces.PROJECT_STAGE</param-name>
  <param-value>Development</param-value>
 </context-param>

<!-- Welcome Page -->
<welcome-file-list>
  <welcome-file>/home.xhtml</welcome-file>
</welcome-file-list>

<!-- JSF Servlet is defined to container -->
 <servlet>
 <servlet-name>Faces Servlet</servlet-name>
 <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
 <load-on-startup>1</load-on-startup>
</servlet>

<!-- Mapping with servlet and url for the http requests. -->
<servlet-mapping>
 <servlet-name>Faces Servlet</servlet-name>
 <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
   <servlet-name>Faces Servlet</servlet-name>
   <url-pattern>*.faces</url-pattern>
 </servlet-mapping>
<servlet-mapping>
 <servlet-name>Faces Servlet</servlet-name>
 <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>

   <!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>  org.springframework.web.filter.DelegatingFilterProxy   
            </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

这是应用程序：![在此处输入图像描述](../Images/885bdb3f088997b94c5c0a0570de4979.png)

当我运行应用程序时，这个 URL 被打开 `http://localhost:8089/MVNOONPProject/authentication`并且我得到这个错误：

```
 `The page isn't redirecting properly
  Firefox has detected that the server is redirecting the request for this address in 
  a way that will never complete.` 
```

我确定这是 web.xml 的问题。但我没有找到如何解决它。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:27:04.663

尝试 2 件事

添加

> <intercept-url pattern="/authentication" access="IS_AUTHENTICATED_ANONYMOUSLY" />

在表单登录标签中添加 default-target-url

> default-target-url='/home.xhtml'

您使用自定义登录页面的另一件事，如果您使用自定义登录页面，您的 http auto-config="true" 将其更改为 false

所以你的安全配置应该是这样的（login-processing-url 也不需要）

```
<http auto-config="false" use-expressions="false">
<intercept-url pattern="/**" access="ROLE_USER" />
 < intercept-url pattern="/authentication" access="IS_AUTHENTICATED_ANONYMOUSLY" />
<form-login login-page="/authentication"   authentication-failure 
          url="/login?login_error=t" default-target-url='/home.xhtml'/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T09:32:14.577

通常只保护适当的网页是有意义的，这些网页将在此处呈现 JSF。当然，您不应该拦截所有网址，否则将无法登录。这假设您在 /authentication 下有一个工作登录页面。

```
<http auto-config="true" use-expressions="false">
    <intercept-url pattern="/**/*.faces" access="ROLE_USER" />
    <intercept-url pattern="/**/*.jsf" access="ROLE_USER" />
    <intercept-url pattern="/**/*.xhtml" access="ROLE_USER" />
    <form-login login-page="/authentication"  login-processing-url="/static  
              /j_spring_security_check" authentication-failure 
              url="/login?login_error=t" />

</http> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T09:19:05.703

那是因为，您的弹簧安全配置循环重定向。

尝试这个 ，

```
<http auto-config="true" use-expressions="false">
     <intercept-url pattern="/login.jsp*" filters="none"/>
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page="/authentication"  login-processing-url="/static  
              /j_spring_security_check" authentication-failure 
              url="/login?login_error=t" />

</http> 
```

**编辑**

* * *

```
<http auto-config="true" use-expressions="false">
     <intercept-url pattern="/authentication" filters="none"/>
     <intercept-url pattern="/login.jsp*" filters="none"/>
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page="/authentication"  login-processing-url="/static  
              /j_spring_security_check" authentication-failure 
              url="/login?login_error=t" />

</http> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T06:56:38.057

由于 pattern="/**" 拦截了所有 URL 请求，包括登录页面本身，任何用户都必须登录才能访问登录页面。所以经过数小时的尝试，以下为我做了诀窍。

```
<intercept-url pattern="/login**" access="ROLE_ANONYMOUS" />
<intercept-url pattern="/resources/**" access="ROLE_ANONYMOUS, ROLE_USER, ROLE_ADMIN" />
<intercept-url pattern="/**" access="ROLE_USER" />

<form-login 
    login-page="/login" 
    default-target-url="/home"
    authentication-failure-url="/login?error=true" /> 
```

注意，

*   拦截 URL 标签的顺序
*   pattern="/**" 基本上拦截所有 url 请求，甚至包括 css 和图像文件之类的资源。这就是为什么需要第二行。

其他答案非常接近，但不适用于 Spring MVC 3.2.3.RELEASE 版本

我认为这可能会在未来引起其他问题，所以更好的方法可能是，

```
<intercept-url pattern="/admin*" access="ROLE_ADMIN" />
<intercept-url pattern="/user*" access="ROLE_USER, ROLE_ADMIN" />
<form-login 
    login-page="/login" 
    default-target-url="/home"
    authentication-failure-url="/login?error=true" /> 
```

# android - 在 Android 平板电脑上安装蓝牙 SPP

> ID：15038927
> 
> 赞同：0
> 
> 时间：2013-02-23T09:14:22.143
> 
> 标签：android, bluetooth, bluez, spp

我无法从我的 Android JellyBean 平板电脑上找到我的蓝牙打印机。但是这两种设备都可以从我的 macbook 中找到。蓝牙打印机规范说它使用 SPP（串行端口配置文件）进行通信。sdptool 输出如下

```
shell@android:/ # sdptool browse local
Browsing FF:FF:FF:00:00:00 ...
Service RecHandle: 0x10000
Service Class ID List:
  "PnP Information" (0x1200)
Profile Descriptor List:
  "PnP Information" (0x1200)
    Version: 0x0102

Service Name: Audio Source
Service RecHandle: 0x10001
Service Class ID List:
  "Audio Source" (0x110a)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 25
  "AVDTP" (0x0019)
    uint16: 0x102
Profile Descriptor List:
  "Advanced Audio" (0x110d)
    Version: 0x0102

Service Name: AVRCP TG
Service RecHandle: 0x10002
Service Class ID List:
  "AV Remote Target" (0x110c)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 23
  "AVCTP" (0x0017)
    uint16: 0x103
Profile Descriptor List:
  "AV Remote" (0x110e)
    Version: 0x0100

Service Name: Voice Gateway
Service RecHandle: 0x10003
Service Class ID List:
  "Headset Audio Gateway" (0x1112)
  "Generic Audio" (0x1203)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 11
Profile Descriptor List:
  "Headset" (0x1108)
    Version: 0x0100

Service Name: OBEX Object Push
Service RecHandle: 0x10004
Service Class ID List:
  "OBEX Object Push" (0x1105)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 12
  "OBEX" (0x0008)
Profile Descriptor List:
  "OBEX Object Push" (0x1105)
    Version: 0x0100

Service Name: Network service
Service Description: Network service
Service RecHandle: 0x10005
Service Class ID List:
  "Network Access Point" (0x1116)
Protocol Descriptor List:
  "L2CAP" (0x0100)
    PSM: 15
  "BNEP" (0x000f)
    Version: 0x0100
    SEQ16: 800 806
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  "Network Access Point" (0x1116)
    Version: 0x0100 
```

尝试添加SP

```
shell@android:/ # sdptool add SP
Serial Port service registered 
```

添加 SP 后，使用 sdptool 浏览列表显示 SP 服务

```
Service Name: Serial Port
Service Description: COM Port
Service Provider: BlueZ
Service RecHandle: 0x10006
Service Class ID List:
  "Serial Port" (0x1101)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 1
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
Profile Descriptor List:
  "Serial Port" (0x1101)
    Version: 0x0100 
```

我尝试使用此设置进行发现，但仍然找不到蓝牙打印机。

我不确定 SP 是否安装在我的 Android 上的 bluez 堆栈上，因为我找不到 hcitool 或 rfcomm 可执行文件。

这是我的 /etc/bluetooth 文件夹中的列表

```
shell@android:/ # ls /etc/bluetooth/                                           
BCM40183B2_26M.hcd
audio.conf
auto_pairing.conf
blacklist.conf
bt_addr.conf
input.conf
main.conf
network.conf 
```

# c# - Windows 8 应用程序通过 Windows IE 打开外部应用程序

> ID：15038931
> 
> 赞同：0
> 
> 时间：2013-02-23T09:15:01.617
> 
> 标签：c#, powershell, windows-8, microsoft-metro, named-pipes

我必须通过 Windows 8 应用程序打开一个外部应用程序。我了解通过 Windows 应用程序打开外部应用程序存在一些限制。

但它可以与 IE 应用程序通信。如果我与 Windows IE 应用程序通信，它会在桌面上运行一个 powershell 脚本来打开应用程序。

基本上我想运行以下命令，有没有办法可以做到这一点？

C:\Program Files (x86)\Microsoft Dynamics AX\6.2\Client>ax32.exe –startupcmd = dr lldown_26738

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:17:53.120

对于内部应用程序（即不通过商店分发），您[可以使用环回接口](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx)。

所以我的建议是有一个小的包装器可执行文件，它在环回接口上打开一个端口，然后使用[IApplicationActivationManager](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706902.aspx)调用 Win8 应用程序。当应用程序关闭时，环回端口关闭，应用程序再次终止（请参阅我们的[apprunner 工具](https://github.com/doo/metro-driver)了解如何执行此操作）。

我不确定这如何与您的要求和 Win8 应用程序的正常扩展应用程序生命周期（挂起、恢复）兼容，但这样您就可以轻松地将可以运行外部命令的非沙盒应用程序的功能与 UI 结合起来并集成到 W8 生态系统/合约中。

# c# - 如何在 C# 中打印 datagridvew

> ID：15038937
> 
> 赞同：-5
> 
> 时间：2013-02-23T09:15:59.827
> 
> 标签：c#

我有一个具有 sqlquery 数据的 datagirdview。我想打印这个。请告诉我打印按钮的代码。我正在使用 C#

![在此处输入图像描述](../Images/e840a6445e34d77d16e10a4946ce1f77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:28:23.790

这是关于它的文章[DataGridViewPrinter 类](http://www.codeproject.com/Articles/13678/The-DataGridViewPrinter-Class)。您可以使用此类轻松打印 DataGridView。

例如，您可以在 Toolbox 中的表单上添加[PrintDocument 组件](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)，并在其 PrintPage 事件中编写以下代码：

```
 bool more = printer.DrawDataGridView(e.Graphics);
 if (more == true)
     e.HasMorePages = true; 
```

其中打印机是 DataGridViewPrinter 对象。

要打印此文档，您可以添加按钮并将此代码添加到它的单击事件中：

```
 printer = new DataGridViewPrinter(yourGridView, printDocument1, 
                      true, true, "title", this.Font, Color.Black, true);

        if (printDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            printDocument1.Print();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:29:26.280

这是一个很好的例子，您可以使用[如何打印数据网格](http://www.codeproject.com/Articles/28046/Printing-of-DataGridView)

这是一些代码：

```
private void btnPrint_Click(object sender, EventArgs e)
{           
    //Open the print dialog
    PrintDialog printDialog = new PrintDialog();            
    printDialog.Document = printDocument1;
    printDialog.UseEXDialog = true;    
    //Get the document
    if (DialogResult.OK == printDialog.ShowDialog())
    {
        printDocument1.DocumentName = "Test Page Print";                
        printDocument1.Print();
    }
    /*
    Note: In case you want to show the Print Preview Dialog instead of 
    Print Dialog then comment the above code and uncomment the following code
    */

    //Open the print preview dialog
    //PrintPreviewDialog objPPdialog = new PrintPreviewDialog();
    //objPPdialog.Document = printDocument1;
    //objPPdialog.ShowDialog();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T09:22:35.940

检查此代码可能对您有帮助：-

```
 using System;
    using System.Windows.Forms;
    using System.Drawing;
    using System.Drawing.Printing;

    public class Form1 :
        Form
    {
        private Button printButton = new Button();
        private PrintDocument printDocument1 = new PrintDocument();

        public Form1()
        {
            printButton.Text = "Print Form";
            printButton.Click += new EventHandler(printButton_Click);
            printDocument1.PrintPage += new PrintPageEventHandler(printDocument1_PrintPage);
            this.Controls.Add(printButton);
        }

        void printButton_Click(object sender, EventArgs e)
        {
            CaptureScreen();
            printDocument1.Print();
        }

        Bitmap memoryImage;

        private void CaptureScreen()
        {
            Graphics myGraphics = this.CreateGraphics();
            Size s = this.Size;
            memoryImage = new Bitmap(s.Width, s.Height, myGraphics);
            Graphics memoryGraphics = Graphics.FromImage(memoryImage);
            memoryGraphics.CopyFromScreen(this.Location.X, this.Location.Y, 0, 0, s);
        }

        private void printDocument1_PrintPage(System.Object sender,  
               System.Drawing.Printing.PrintPageEventArgs e)
        {
            e.Graphics.DrawImage(memoryImage, 0, 0);
        }

        public static void Main()
        {
            Application.Run(new Form1());
        }
    } 
```

# c - 在 C 中链接任务指针

> ID：15038939
> 
> 赞同：1
> 
> 时间：2013-02-23T09:16:42.060
> 
> 标签：c, pointers, task, threadpool

所以我试图在这里链接任务，但是在 linux 下使用 GCC 编译时，我收到警告：分配来自不兼容的指针类型 [默认启用]。即使我只是使用相同类型的指针。

```
typedef struct
{
    void (*routine)(void*);
    void* data;

    struct p_task* next;
    struct p_task* prev;

    int deadline;
    int timeWaiting;
}p_task;
typedef struct 
{   
    pthread_t mainThread;   

    pthread_t* threadArray;
    int threadCount;

    p_task* firstInLine;
    p_task* lastInLine;
}p_pool;

void pool_add_task(p_pool* pool, void* routine, void* data)
{   
    // create new task
    p_task* task = malloc(sizeof(p_task));
    task->routine = routine;
    task->data = data;
    task->deadline = 5;
    task->timeWaiting = 0;

    // when no tasks are chained yet
    if (pool->firstInLine == NULL) 
    {
        pool->firstInLine = task;
        pool->lastInLine = task;
    }
    else
    {       
        pool->lastInLine->next = task; // bad line 1
        task->prev = pool->lastInLine; // bad line 2
        pool->lastInLine = task; // new task is last in line
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T09:21:03.363

这是因为`struct p_task`它是前向声明的，因为您没有在结构的定义中使用它。这意味着编译器不知道

1.  它确实存在

2.  它与（`typdef`馈给）`p_task`类型相同。

你需要这样写：

```
typedef struct p_task
{
    // etc.
} p_task; 
```

# php - 我尝试使用 ajax 提交表单，但我得到 NS_ERROR_XPC_BAD_CONVERT_JS: 无法转换 JavaScript 参数

> ID：15038941
> 
> 赞同：0
> 
> 时间：2013-02-23T09:17:17.693
> 
> 标签：php, ajax

这是包含正在提交的表单的页面。我为具有以下形式的代码加了星标

```
<html>

<head> <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
   <script src="Scripts/homepage.js"></script>

<link rel='stylesheet' href='index.css'> 

</head>

<body>

<img src="wc.png" id="wc">

<div id="banner"> <h1> Wolfeboro Connection </h1> </div>

<div id="feed"> <iframe src="feed.html" id="iframefeed"> </iframe> </div>

<div id="footer"> </div>

<div id="accounts">   <table> <tr> <th> Sign In </th> </tr>
<tr> <td> Username </td> <td>  <input type="text" name="loginusername"> </td> </tr>
<tr> <td> Password </td> <td> <input type="password" id="loginpassword"> </td> </tr>
<tr> <td> </td> <td> <input type="submit" value="submit"> </td> </tr>

</table>

**<table>
<tr> <th>Sign Up </th> </tr>  
<tr> <td>Restaurant Name </td> <td>  <input type="text" id="signupusername"> </td> </tr>
<tr> <td> Password </td> <td> <input type="password" id="verifypassword"> </td> </tr>
<tr> <td> Verify Password </td> <td> <input type="password" id="signuppassword"> 
</td> </tr> 
<tr> <td> Phone Number </td> <td> <input type="text" id="phoneNumber"> </td> </tr>
<tr> <td> Email </td> <td>  <input type="text" id="email"> </td> </tr>
<tr> <td> </td> <td> <input type="button" value="submit" id="signupsubmit"> </td> </tr>
</table>**

</div>

</body>

</html> 
```

这是我试图提交表单的ajax

```
$(function () {

$("#signupsubmit").click(function() {

$.ajax({
type: "POST",
url: "signup.php",
data: { name: signupusername, password: signuppassword , phonenumber: phoneNumber ,    
email: email }
});

});

}); 
```

这是带有php的页面

```
 <?php

    $db = new mysqli('localhost', 'root', 'brewster01', 'WolfeboroConnection');

    $stmt = $db->stmt_init();

    if($stmt->prepare("INSERT INTO users 
    (BusinessName, Password, Phone, Email) VALUES (?,?, ?, ?)")) {

    $stmt->execute();
    $stmt->close();

    }
    else
    {
    error_log(mysqli_error($db));
    }

?> 

[04:16:51.977] NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument @ http://code.jquery.com/jquery-1.9.1.min.js:5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:26:36.783

输入元素不会自动转换为变量，您必须使用方法获取它们的值。

```
$.ajax({
    type: "POST",
    url: "signup.php",
    data: { name: $("#signupusername").val(), 
            password: $("#signuppassword").val(),
            phonenumber: $("#phoneNumber").val(),    
            email: $("#email").val()
    }
}); 
```

在 PHP 中，准备好语句后，您需要执行以下操作：

```
$stmt->bind_param('ssss', $_POST['name'], $_POST['password'], $_POST['phonenumber'], $_POST['email']); 
```

# c++ - 如何将一个字符的用户输入存储到 C++ 中数组的每个元素中？

> ID：15038948
> 
> 赞同：1
> 
> 时间：2013-02-23T09:18:11.783
> 
> 标签：c++

我希望用户只输入一个字符，比如'Y'，然后我希望 Y 存储在数组的每个元素中（即：array[9]），这样当我打印时它就像'YYYYYYYYY'，或者当它是一个二维数组（即：array[2][2]）时，它看起来像：

```
YYY
YYY
YYY 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:33:06.490

如果您需要打印每个输入的字符相同的次数，为什么要全部存储？它会浪费内存，只存储一个字符并打印所需的任意次数，所以一个数组就足够了，我猜。但是这个解决方案是我从你的问题中得到的，如果有一些限制，请分享或更好地分享代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:44:14.627

您可以使用[memset()](http://www.cplusplus.com/reference/cstring/memset/) from`<cstring>`或[std::fill()](http://www.cplusplus.com/reference/algorithm/fill/) from `<algorithm>`。所以对于 a `char array[9];`，你可以这样做：

```
memset(array, 'Y', 9); 
```

或者：

```
std::fill(array, array + 9, 'Y'); 
```

对于二维数组，您需要单独设置每一行。

使用 memset() 时要小心，因为长度以字节而不是元素给出。例如，如果你有一个`int`数组，`memset(array, 'Y', 9)`那就行不通了。std::fill() 没有这个问题。

# jquery - CSS工作（或不工作？）奇怪

> ID：15038954
> 
> 赞同：3
> 
> 时间：2013-02-23T09:19:08.277
> 
> 标签：jquery, html, css, internet-explorer

所以我的网站有一些问题，特别是 CSS。我对网页设计相当陌生，所以这些东西不断出现。一般来说，我自己很容易弄清楚，但这真的让我很难过。

基本上发生的事情是无序列表中的最后两个元素由于某种原因被向下移动（下图）。根本想不通。我能找到的唯一解决方案是添加一个类并自己手动移动它。

同样，IE 9.0 也会出现问题，但前提是我启用了 javascript（我需要为我的子菜单项执行此操作）。

任何关于正在发生的事情的见解（并且手指交叉有一个简单的解决方案）将是惊人的。

![在此处输入图像描述](../Images/168e15b7cb37f93ad590f6e67d88b6c9.png)

```
<div id="main_menu">
            <div id="main_menu_container">
                <ul>
                    <li><a href=# id="home_button">Home</a></li>
                    <li><a href=# id="products_button">Products</a></li>
                    <li class="baq"><a href=# id="baq_button">Book a Quote</a></li>
                    <li><a href=#>Gallery</a></li>
                    <li class="misplace"><a href=#>About Us</a></li>
                    <li class="misplace"><a href=#>Contact Us</a></li>
                </ul>
            </div>
        </div> <!--END OF MAIN MENU --> 
```

和CSS...

```
div#main_menu{
    height:45px;
    position:relative;
    z-index:11;

    background: rgb(246,246,246);
    background: -moz-linear-gradient(top,  rgba(246,246,246,1) 0%, rgba(225,225,225,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,246,246,1)), color-stop(100%,rgba(225,225,225,1)));
    background: -webkit-linear-gradient(top,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    background: -o-linear-gradient(top,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    background: -ms-linear-gradient(top,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    background: linear-gradient(to bottom,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f6f6', endColorstr='#e1e1e1',GradientType=0 );

    -webkit-box-shadow: inset 0px -1px 0px 1px rgba(255, 255, 255, .2);
    box-shadow: inset 0px -1px 0px 1px rgba(255, 255, 255, .2);

}

div#shadow_1{
    position:relative;
    background:url('images/shadow_grad.png') repeat-x;
    height:6px;
    z-index:20;
}

div#main_menu div#main_menu_container{
    width:920px;
    height:45px;
    margin:0 auto;
}

#main_menu #main_menu_container ul li{
    position:relative;
    float:left;
    list-style:none;
    width:150px;
    height:45px;
    line-height:45px;
    text-align: center;
    margin:0px 0px;
    padding:0px 0px;
    z-index:21;

    font-family: 'Roboto Condensed', sans-serif;
    font-size:16px;
    font-weight: 700;
    color:#747474;
    text-transform: uppercase;
}

#main_menu #main_menu_container ul li a{
    display:block; 
    color:#747474;

    transition:all .05s linear;
    -o-transition:all .05s linear;
    -moz-transition:all .05s linear;
    -webkit-transition:all .05s linear;
}

#main_menu #main_menu_container ul li.baq a{background:#3d9dff; color:white;}

#main_menu #main_menu_container ul li a:hover{
    /*background:#ffab00;*/
    background:#ffab00; /*#3d9dff*/
    color:white;
}

li.misplace{position:relative; top:-18px;} 
```

jQUERY 代码（实际上并不知道 jquery，所以我已经让其他人这样做了。这意味着任何建议都可能超出我的头脑：/）：

```
$(document).ready(function(){
    $("#products_button").mouseenter(function(){
        $(".products").addClass("active_products");
        $(".products_container").addClass("active_products_container");
    });
});

$(document).ready(function(){
    $(".products").mouseenter(function(){
        $(".products").addClass("active_products");
        $(".products_container").addClass("active_products_container");
    });
});

$(document).ready(function(){
    $(".products").mouseleave(function(){
        $(".products").removeClass("active_products");
        $(".products_container").removeClass("active_products_container");
    });
});

$(document).ready(function(){
    $("#home_button, #baq_button, #header").mouseenter(function(){
        $(".products").removeClass("active_products");
        $(".products_container").removeClass("active_products_container");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:47:07.953

@user1090635 删除类`li.misplace{}` 然后更改中心菜单的 css 像这个演示：http: [//jsfiddle.net/bsPrabu/EtmSW/6/embedded/result/](http://jsfiddle.net/bsPrabu/EtmSW/6/embedded/result/)

```
 div#main_menu div#main_menu_container {
    width:100%;
    text-align:center;
    height:45px;
    margin:0 auto;
}

#main_menu #main_menu_container ul
{
     display:inline-block;
    *display:inline;/* IE*/
    *zoom:1;/* IE*/
    overflow:hidden;
    text-align:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:40:50.443

它在这里工作正常[http://jsfiddle.net/KmrZ3/1/](http://jsfiddle.net/KmrZ3/1/)没有`.misplace`

所以也许你没有在这里显示的其他地方的css（或javascript）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:21:00.597

请测试以下CSS，我已经清理了一点并添加了所需的样式：（我更改了字体大小，请设置为您喜欢的大小）

```
div#main_menu{
    position:relative;
    z-index:11;

    background: rgb(246,246,246);
    background: -moz-linear-gradient(top,  rgba(246,246,246,1) 0%, rgba(225,225,225,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,246,246,1)), color-stop(100%,rgba(225,225,225,1)));
    background: -webkit-linear-gradient(top,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    background: -o-linear-gradient(top,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    background: -ms-linear-gradient(top,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    background: linear-gradient(to bottom,  rgba(246,246,246,1) 0%,rgba(225,225,225,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f6f6', endColorstr='#e1e1e1',GradientType=0 );

    -webkit-box-shadow: inset 0px -1px 0px 1px rgba(255, 255, 255, .2);
    box-shadow: inset 0px -1px 0px 1px rgba(255, 255, 255, .2);

}

div#main_menu div#main_menu_container{
    width: 1000px;
    margin: auto;
}

#main_menu #main_menu_container ul li{
    display: inline-block;

    list-style:none;

    margin:0px;
    padding:0px;
}

#main_menu #main_menu_container ul li a{
    display:block;

    text-align: center;
    color:#747474;
    font-family: 'Roboto Condensed', sans-serif;
    font-size:12px;
    font-weight: bold;
    text-transform: uppercase;

    width: 150px;
    line-height: 4em;

    transition:all .05s linear;
    -o-transition:all .05s linear;
    -moz-transition:all .05s linear;
    -webkit-transition:all .05s linear;
}

#main_menu #main_menu_container ul li.baq a{background:#3d9dff; color:white;}

#main_menu #main_menu_container ul li a:hover{
    background:#ffab00;
    color:white;
} 
```

# three.js - 如何在three.js中将文本附加到立方体的顶点？另外，我可以在多维数据集内的任何位置添加文本吗？

> ID：15038956
> 
> 赞同：5
> 
> 时间：2013-02-23T09:19:41.270
> 
> 标签：three.js

我正在尝试使用 three.js 为一个项目创建一个多维数据集。我需要将文本添加到顶点和立方体内的不同点。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T22:03:44.870

有关在 Three.js 中使用 Sprite 对象的一些基本代码示例，请查看：

[http://stemkoski.github.com/Three.js/Sprites.html](http://stemkoski.github.com/Three.js/Sprites.html)

要创建包含用作精灵纹理的文本的图像的简单方法，请查看以下示例代码：

[http://stemkoski.github.com/Three.js/Texture-From-Canvas.html](http://stemkoski.github.com/Three.js/Texture-From-Canvas.html)

我认为这两个想法的结合将实现您想要做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:19:03.207

如果您想拥有标签样式的文本，以便文本从特定点开始，但始终面向相机并且无论相机位置如何都易于阅读，您可以使用精灵。（画布创建的文本标签精灵的示例：http: [//i.imgur.com/e9I68xD.jpg](http://i.imgur.com/e9I68xD.jpg) - 在这里，它们在单独的通道上呈现，它们永远不会被场景遮挡，但您可以在同一通道上完成)

如果这就是您要寻找的东西，我建议首先检查 Sprites 示例，并学习将一些静态图像作为精灵附加到场景中的正确位置。完成该工作后，您修改代码，以便使用标准 Javascript Canvas 函数将文本生成到图像画布，并将该图像用作精灵。

# sublimetext2 - Sublime 自定义代码段未在弹出窗口中显示代码提示

> ID：15038962
> 
> 赞同：0
> 
> 时间：2013-02-23T09:20:29.307
> 
> 标签：sublimetext2, code-snippets

我是 Sublime 的新手，我刚刚创建了一个保存在 HTML 文件夹中的新片段。我的问题是创建的代码段不显示自动完成框。我需要在制表符触发器中输入整个单词，然后按两次制表符。下面，您将看到它以 JavaScript 语法运行。

![在此处输入图像描述](../Images/fdd1f6e95d376914c1578f3dfc7df912.png)

```
 <snippet> 
     <content><![CDATA[ <ccbn:html-block> ${1} </ccbn:html-block> ]]></content>
     <!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
     <tabTrigger>hblock</tabTrigger> 
     <!-- Optional: Set a scope to limit where the snippet will trigger -->
     <!-- <scope>source.python</scope> --> 
 </snippet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:17:20.820

如果您希望在编辑 HTML 时启动代码段，那么我认为您需要将代码段更改`<scope>`为 text.html

# php - 使用 facebook php sdk 登录

> ID：15038966
> 
> 赞同：0
> 
> 时间：2013-02-23T09:20:58.667
> 
> 标签：php, facebook, sdk

我正在使用*Facebook PHP SDK*进行身份验证，我收到以下消息：

```
{
    "error": {
        "message": "Error validating verification code. Please make sure
                  your redirect_uri is identical to the one you used in 
                  the OAuth dialog request",
        "type": "OAuthException",
        "code": 100
    }
} 
```

# c++ - 如何在 C++ 中使用具有多个参数的 if 语句调用多个函数

> ID：15038968
> 
> 赞同：2
> 
> 时间：2013-02-23T09:21:08.953
> 
> 标签：c++, function, if-statement

该程序为每个条件运行所有函数，而它应该只为每个条件运行一个函数。为什么？我应该编写计算球体、圆柱体和圆锥体的体积和表面积的函数：我不知道是 if 语句搞砸了，还是函数本身。该程序的理想输出如下：

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：1 选择计算 (1) 体积 (2) 表面积：1 输入球体半径：5.5 球体体积为 696.91

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：1 选择计算 (1) 体积 (2) 表面积：2 输入球体半径：5.5 球体表面积为 380.133

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：2 选择计算 (1) 体积 (2) 表面积：1 输入圆柱体半径：5.5 输入圆柱体高度：4.2 圆柱体体积是 399.139

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：2 选择计算 (1) 体积 (2) 表面积：2 输入圆柱体半径：5.5 输入圆柱体高度：4.2 表面积气缸是 335.208

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：3 选择计算 (1) 体积 (2) 表面积：1 输入圆锥半径：5.5 输入圆锥高度：4.2 圆锥体积是 133.046

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：3 选择计算 (1) 体积 (2) 表面积：2 输入圆锥体半径：5.5 输入圆锥体高度：4.2 表面积圆锥是 214.607

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：q

再见！

```
#include <iostream>
#include <math.h>

using namespace std;

double sphere_volume(double radius);
double sphere_surface_area(double radius);
double cylinder_volume(double radius, double height);
double cylinder_surface_area(double radius, double height);
double cone_volume(double radius, double height);
double cone_surface_area(double radius, double height);

int main()
{
double entHeight;
double entRadius;
char shapeCall;
char compCall;

cout << "Select a Shape (1) sphere (2) cylinder (3) cone (q) quit: ";
cin >> shapeCall;
cout << "Select a Computation (1) volume (2) surface area: ";
cin >> compCall;

    if ( shapeCall == 1 )
    {
        if ( compCall == 1)
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << sphere_volume (entRadius) << endl;
    }
    if ( shapeCall == 1 )
    {
        if ( compCall == 2)
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << sphere_surface_area (entRadius) << endl;
    }
    if ( shapeCall == 2 )
    {
        if ( compCall == 1)
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << "Enter Height: ";
            cin >> entHeight;
            cout << cylinder_volume (entRadius, entHeight) << endl;
    }
    if (shapeCall == 2 )
    {
        if ( compCall == 2)
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << "Enter Height: ";
            cin >> entHeight;
            cout << cylinder_surface_area (entRadius, entHeight) << endl;
    }
    if (shapeCall == 3 )
    {
        if ( compCall == 1)
        cout << "Enter Radius: ";
        cin >> entRadius;
        cout << "Enter Height: ";
        cin >> entHeight;
        cout << cone_volume (entRadius, entHeight) << endl;
    }
    if (shapeCall == ) 
    {
        if ( compCall == 2)
        cout << "Enter Radius: ";
        cin >> entRadius;
        cout << "Enter Height: ";
        cin >> entHeight;
        cout << cone_surface_area (entRadius, entHeight) << endl;
    }

return 0;
}

double sphere_volume(double radius)
{
    double sphereVolume; 
    sphereVolume = 3.14 * pow(radius, 3) * 4/3;
    return sphereVolume;
}
double sphere_surface_area(double radius)
{
    double sphereSurfArea = 4 * 3.14 * pow( radius, 2 );
    return sphereSurfArea;
}
double cylinder_volume(double radius, double height)
{
    double cylinderVolume = 3.14 * pow (radius, 2) * height;
    return cylinderVolume;
}
double cylinder_surface_area(double radius, double height)
{
    double cylinderSurfArea = 2 * 3.14 * pow (radius, 2) + 2 * 3.14 * radius * height;
    return cylinderSurfArea;
}
double cone_volume(double radius, double height)
{
    double coneVolume;
    coneVolume = (1/3) * 3.14 * pow (radius, 2) * height;
    return coneVolume;
}
double cone_surface_area(double radius, double height)
{
    double coneSurfArea = 3.14 * pow (radius, 2) + 3.14 * sqrt(pow (radius, 2) + pow (height, 2));
    return coneSurfArea;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:43:20.987

if 语句应采用以下格式

```
if (expression)
    statement; 
```

如果`expression`计算结果为非零数，或`true`，`statement`则执行。在其他所有事件中，都不是。

之所以*看起来*好像每个条件都评估为真，是因为您在整个代码中更改了 if 语句的格式。您似乎经常为条件句使用以下格式。

```
if ( compCall == 1)
        cout << "Enter Radius: ";
        cin >> entRadius;
        cout << sphere_volume (entRadius) << endl; 
```

考虑到 if 语句将仅与紧随其后的语句相关联。因此，该代码等效于

```
if ( compCall == 1)
{
    cout << "Enter Radius: ";
}
cin >> entRadius;
cout << sphere_volume (entRadius) << endl; 
```

您遇到的问题是由于没有将条件正确地括在花括号中。它可能仍然被认为是有效的代码，但如果使用不正确，它会产生非常意想不到的结果。在这种情况下，以下代码将产生您期望的结果，因为与条件相关的语句正确地括在花括号中。

```
if ( compCall == 1)
{
   cout << "Enter Radius: ";
   cin >> entRadius;
   cout << sphere_volume (entRadius) << endl;
} 
```

# asp.net - 使用模型中的值生成链接

> ID：15038977
> 
> 赞同：0
> 
> 时间：2013-02-23T09:22:06.707
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我有以下 Mvc 4 剃须刀代码

```
@foreach (var item in Model.DealDetails) {
<tr>
    <td>@Html.DisplayFor(m => item.DetailId)</td>
    <td>@Html.DisplayFor(m => item.AppGuid)</td>
    ....
</tr> 
```

我想`<td>`为每一行在另一列中生成一个链接。链接看起来像

```
<a href="/Control/Action/{item.DetailId}?h={item.AppGuid}">
    Link text
</a> 
```

控制和动作在同一个项目中。有帮助功能吗？我希望在 item.AppGuid 为空时不创建链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:27:54.290

```
@foreach (var item in Model.DealDetails) {
<tr>
    <td>@Html.DisplayFor(m => item.DetailId)</td>
    <td>@Html.DisplayFor(m => item.AppGuid)</td>
    @if(item.AppGuid != null){
        <td>@Html.ActionLink("text", "action", "controller", new { id = item.DetailId , h = item.AppGuid}, null)</td>
    }
</tr> 
```

# javascript - 如何从其他函数获取属性

> ID：15038978
> 
> 赞同：0
> 
> 时间：2013-02-23T09:22:16.163
> 
> 标签：javascript, jquery

我想从其他函数访问 var w 值。可能吗。

```
<script type="text/javascript">
var first = {
myFirst: function(){
var w= 90;
var q=12;
}}

var second= {
mySecond: function(){
first.myFirst.w     
}}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T09:25:14.577

这样您就无法访问`w`，因为它是在`myFirst`. 您可以执行以下操作：

```
var first = {
  myFirst: function(){
    first.myFirst.w = 90;
    var q=12;
  }
};

var second= {
  mySecond: function(){
    alert(first.myFirst.w);
  }
};

first.myFirst();
second.mySecond(); //alerts 90 
```

这样`w`将作为函数的属性添加`myFirst`，如果要将其添加为的属性`first`，请使用：

```
var first = {
  myFirst: function(){
    this.w = 90;
    var q=12;
  }
};

var second= {
  mySecond: function(){
    alert(first.w);
  }
};

first.myFirst();
second.mySecond(); //alerts 90 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:25:26.763

不，这是不可能的，因为 w 的范围在函数内。一旦函数被调用，w 就不再存在了。

此外，从技术上讲，您需要调用 first.myFirst().w;

为了让它工作，你可以这样做：

```
var first = {
  myFirst: function(){
    var w= 90;
    var q=12;
    return { w : w };
  }
}

first.myFirst().w // now works. 
```

# java - 提高 Atom/RSS 阅读器的速度和可靠性

> ID：15038983
> 
> 赞同：0
> 
> 时间：2013-02-23T09:22:55.177
> 
> 标签：java, android, asynchronous, reliability, android-strictmode

我最近从“ [Atom Reader 阅读困难](https://stackoverflow.com/questions/15021427/difficulty-reading-with-atom-reader/15024490#comment21113544_15024490)”的问题中做了。现在，我正在考虑我制作的博客应用程序的最大兼容性，从 Android Froyo 到 Jellybean。问题是我在使用**StrictMode**检查时收到错误通知。我正在通过*Windows 7*操作系统运行 Eclipse IDE。

```
 //-----[ UI Thread Debug Setup ]-----
    if(DEVELOPER_MODE)
    {
        /*
         * 
         *             Manage main thread control for Android 3.0 and later. Not work on Android 2.3.3 and below, otherwise, you will get an error 
         *          for changing minimum SDK version at manifest. If you want to publish this project as an Android app (APK)  that  will  run  on 
         *          Android 3.0 or later, set DEVELOPER_MODE to "true", otherwise, will not work. (App for Boy Kuripot [Ver. 1])
         * 
         */

        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder().detectDiskReads().detectDiskWrites().detectAll().penaltyLog().build());
        StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectLeakedSqlLiteObjects().detectLeakedClosableObjects().penaltyLog().penaltyDeath().build());
    } 
```

如果我将最低 SDK 版本设置为 7 会发生以下情况，您会看到错误出现在红线中：

![在此处输入图像描述](../Images/1e4dcf792c4d675036c349efba0d3eed.png)

如果我通过 Android Manifest 将最低 SDK 版本设置为 11，会发生以下情况：

![在此处输入图像描述](../Images/f35408fe0265faa63b7c985c098559de.png)

此外，当我使用**AsyncTask**运行它时，它会变得更慢、更快或只是滞后。

```
//TODO _________________________[ Activity Starter Subclass ]_________________________
private class Post_Task extends AsyncTask<String, Integer, String> // --> This class will be revised and to be used for next version. (Compatible now with Android 2.1 and later.)
{
    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... params) 
    {
        //-----[ RSS Feed Setup ]-----
        xp.Get_Parse_Feed(URL_link, is, lm.headlines, lm.links);

        return "All done!";
    }

    @Override
    protected void onProgressUpdate(Integer... values)
    {
        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(String result)
    {
        super.onPostExecute(result);
    }
} 
```

**当我在onCreate()**作为主线程恢复并运行此`xp.Get_Parse_Feed(URL_link, is, lm.headlines, lm.links);`代码时，有时我们很快就会正确加载链接。问题是我应该管理哪一个以及如何使这个博客应用程序与 Android 2.1 及更高版本兼容？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:40:25.363

> 如果我将最低 SDK 版本设置为 7 会发生以下情况，您会看到错误出现在红线中：

发生这种情况是因为`StrictMode`在 Gingerbread（API 级别 10）中引入，并且您的 SDK 最低版本为 7。在这种情况下`Lint`，如果您在运行应用程序时会注意到您遇到问题（应用程序将崩溃）的错误姜饼下面的平台。当您将最低版本设置为 11 时，不会发生`StrictMode`该 API 级别及更高级别可用的错误。

要保持最低 SDK 版本 7，请将`StrictMode`代码包装在一个`if`条件中，以便仅在 Gingerbread 及更高版本上运行应用程序时使其可用：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
    // Strict mode available            
} 
```

或者您告诉`Lint`在使用更高 API 级别的类时将其设为警告而不是错误。由于您可能会`StrictMode`在分发应用程序时忘记删除引用，因此请使用第一个选项。

> 此外，当我使用 AsyncTask 运行它时，它会变得更慢、更快或只是滞后。

什么变得越来越慢或越来越快？如果您需要帮助，您应该更好地解释**使用**任务时发生了什么，在`onCreate`方法中移动行时发生了什么，任何异常等。**

# python - 将数组划分为 bin

> ID：15038986
> 
> 赞同：1
> 
> 时间：2013-02-23T09:23:08.013
> 
> 标签：python, arrays, bin

我有一个包含三列（x、y 和 z）的 file.dat，如下所示：

```
 2.89e+13 1.56 5.78 
  4.76e+12 7.12 2.35
  2.01e+10 4.53 7.23
  ........ .... .... 
```

我想将 x 数组分成三个 bin 并评估每个 bin 的中值，然后将 y 绘制为 x 的函数（所以，基本上它应该给我 3 分，每个 bin 一个）。你知道我是否也必须将 y 数组划分为 bin 吗？对于大于某个值的 z 值，我还必须绘制（x，y）。所以我用这种方式把z数组分成了两个bin：

```
index_above = (z > 6)
z = z[index_above] 
index_below = (z < 6)
z = z[index_below] 
```

这就是我为 x 所做的：

```
idx1 = ((x >= 10**(10)) & (x < 10**(11)))
x1 = x[idx1]
median_x1 = np.median(x1)
...... 
```

对于 y：

```
y1 = y[idx1]
median_y1 = np.median(y1)
.... 
```

对于 3 个垃圾箱。对于 z>6 和 z<6 的值，我现在如何将 y 绘制为 x 的函数，并将这两个图放在同一个图中？

# android - 在自定义图像视图中拖动带有图像的矩形而不使用矩阵Android

> ID：15038987
> 
> 赞同：0
> 
> 时间：2013-02-23T09:23:12.417
> 
> 标签：android, math, imageview

我必须做一个项目，我有一个图像（如地板模式）并且我可以在这个图像上绘制矩形。

我设法绘制图像，缩放和拖动。我设法在此图像上绘制矩形并以图像的相同比例进行缩放。

所以我的主要问题是如何使用图像移动这些矩形。不使用矩阵。

我使用图像的中心作为几何地标，它可能是错误的。

谢谢您的帮助。

**我的活动**

```
public class ZoneActivity extends Activity implements OnItemSelectedListener, OnSeekBarChangeListener {
private TextView tv;
private View cadre;
ArrayList<RiskyZone> listRz;
private FloorImageView floorImage;
private final FloorMapper floormapper;
private Menu menu;
private SubMenu editRiskyZone;
private SubMenu editWard;

private SeekBar zoomBar; 

public ZoneActivity(FloorMapper floormapper){
    this.floormapper=floormapper;
}

public ZoneActivity(){
    this.floormapper=new FloorMapper();
    this.floormapper.addFloor(new Floor("floor0"));
    this.floormapper.addFloor(new Floor("floor1"));
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Spinner s = (Spinner) findViewById(R.id.zone_spinner);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, floormapper.getFloorNames());
    s.setAdapter(adapter);
    s.setOnItemSelectedListener(this);

    this.tv = (TextView) findViewById(R.id.testID);
    this.tv.setText("TEST2");
    this.tv.setTextColor(Color.rgb(200,0,0));

    listRz = new ArrayList<RiskyZone>();
    RiskyZone rz1 = new RiskyZone(Color.RED, 1, "toto");
    //rz1.addRectangle(new ZoneRectangle(new Coordinates(10, 40), new Coordinates(50, 50)));    
    rz1.addRectangle(new ZoneRectangle(new Coordinates(30, 50), new Coordinates(100, 100)));    

    RiskyZone rz2 = new RiskyZone(Color.BLUE, 2, "tata");
    rz2.addRectangle(new ZoneRectangle(new Coordinates(0, 0), new Coordinates(50, 60)));    

    listRz.add(rz1);
    listRz.add(rz2);

    this.floorImage = (FloorImageView) findViewById(R.id.zone_image);
    this.floorImage.setRiskyZones(listRz);

    //savoir la taille de l'image charge
    ViewTreeObserver vto = floorImage.getViewTreeObserver();
    vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
        public boolean onPreDraw() {
            int finalHeight = floorImage.getMeasuredHeight();
            int finalWidth = floorImage.getMeasuredWidth();
            //tv.setText("Height: " + finalHeight + " Width: " + finalWidth);
            return true;
        }
    });

    this.zoomBar = (SeekBar) findViewById(R.id.zoomBar);
    this.zoomBar.setOnSeekBarChangeListener(this);

}

/**
 * permet de changer de menu lorsque l'on change de floor
 * permet d'afficher que les zone a risque presente sur l'etage en cours de visu
 */
private void onChangeFloorChangeMenu(){
    if(editRiskyZone != null){
        editRiskyZone.clear();
        Floor floor = floormapper.getFloorByName(tv.getText().toString());

        // add menu items to the submenu
        for (RiskyZone rz : listRz) {
            //voir a ajoute une couleur sur chaque ligne
            editRiskyZone.add(R.string.edit_risky_zone, rz.getId(), Menu.NONE, rz.getName());
        }

        editWard.clear();
        //TODO:Ajouter les ward de l'etage dans le menu
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    //Creation des menus de base
    editRiskyZone = menu.addSubMenu(R.string.edit_risky_zone);
    editWard = menu.addSubMenu(R.string.edit_ward);
    return true;
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    String floorName = (String)parent.getItemAtPosition(pos);
    this.tv.setText((CharSequence) parent.getItemAtPosition(pos));
    int resId = getResources().getIdentifier(floorName, "drawable", getPackageName());
    this.floorImage.setImageResource(resId);
    onChangeFloorChangeMenu();
}

@Override
public void onNothingSelected(AdapterView<?> parent) {
    // Another interface callback
}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    this.floorImage.setZoom(progress);
}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}
} 
```

**我的自定义 ImageView**

```
public class FloorImageView extends ImageView implements OnTouchListener {
private Drawable image;
ImageButton img,img1;
private int zoomControler;
private int oldZoomControler;
private ArrayList<RiskyZone> riskyZones = new ArrayList<RiskyZone>();

PointF last = new PointF();
PointF start = new PointF();

private float translateX;
private float translateY;

private int left;
private int top;
private int right;
private int bottom;

public FloorImageView(Context context, AttributeSet attrset){
    super(context, attrset);
    image = context.getResources().getDrawable(R.drawable.floor0);
    setFocusable(true);
    setOnTouchListener(this);
}

public ArrayList<RiskyZone> getRiskyZones() {
    return riskyZones;
}

public void setRiskyZones(ArrayList<RiskyZone> riskyZones) {
    this.riskyZones = riskyZones;
}

public void drawZoneRectangles(Canvas canvas, ArrayList<Integer> riskyZoneFilters){
    for(RiskyZone r : riskyZones){
        canvas.save();
        ArrayList<ZoneRectangle> rectangles = (ArrayList<ZoneRectangle>) r.getRectangles();
        Paint paint = new Paint();
        paint.setAlpha(80);
        paint.setColor(r.getColor());
        for(ZoneRectangle rect : rectangles){

            float ratioX = (float)((right+oldZoomControler)-(left-oldZoomControler))/(float)((right+(getWidth()/2))-(left-(getWidth()/2)));
            float ratioY = (float)((bottom+oldZoomControler)-(top-oldZoomControler))/(float)((bottom+(getWidth()/2))-(top-(getWidth()/2)));

            float xDistance = (rect.getCooSE().getX()-rect.getCooNW().getX());
            float yDistance = (rect.getCooSE().getY()-rect.getCooNW().getY());
            System.out.println("xDistance = " + xDistance + " :::   yDistance = " +  yDistance);

            float xCenter = (rect.getCooNW().getX() + (xDistance/2)) + this.left - (rect.getCooNW().getX() + this.left);
            float yCenter = (rect.getCooNW().getY() + (yDistance/2)) + this.bottom - (rect.getCooNW().getY() + this.bottom);
            System.out.println("xCenter = " + xCenter + " yCenter = " +  yCenter);

            canvas.drawRect(xCenter-((xDistance/2)*ratioX), yCenter-((yDistance/2)*ratioY), 
                    xCenter+((xDistance/2)*ratioX), yCenter+((yDistance/2)*ratioY) , paint);
        }
        canvas.restore();
    }
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(0xff000000);

    image.setBounds(left-zoomControler, top-zoomControler, right+zoomControler, bottom+zoomControler);
    image.draw(canvas);
    drawZoneRectangles(canvas, new ArrayList<Integer>());

}

public void setZoom(int zoom){
    System.out.println(zoom);
    this.oldZoomControler = this.zoomControler;
    this.zoomControler = (getWidth()/2) + (zoom*10);
    invalidate();
}

@Override
public void setImageResource(int resId) {
    super.setImageResource(resId);
    this.image = getResources().getDrawable(resId);
    this.zoomControler = getWidth()/2;
    this.left = (getWidth()/2);
    this.top = (getHeight()/2);
    this.right = (getWidth()/2);
    this.bottom = (getHeight()/2);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    PointF curr = new PointF(event.getX(), event.getY());

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        last.set(curr);
        start.set(last);

        break;

    case MotionEvent.ACTION_MOVE:
        float deltaX = curr.x - last.x;
        float deltaY = curr.y - last.y;

        translateX = deltaX;
        translateY = deltaY;

        this.left = this.left + (int) deltaX;
        this.top = this.top + (int) deltaY;
        this.right = this.right + (int) deltaX;
        this.bottom = this.bottom + (int) deltaY;

        last.set(curr.x, curr.y);
        break;
    case MotionEvent.ACTION_UP:
        break;

    case MotionEvent.ACTION_POINTER_UP:
        break;
    }

    invalidate();
    return true;
}
} 
```

**XML 活动**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
xmlns:app="fr.umlv.assistoid.zoning"
android:layout_height="fill_parent"
android:background="#000000"
android:layout_centerHorizontal="true"
android:orientation="vertical" >

<Spinner
    android:id="@+id/zone_spinner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:background="#FFFFFF"/>

<TextView
    android:id="@+id/testID"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="floor0"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<fr.umlv.assistoid.zoning.FloorImageView
    android:id="@+id/zone_image"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/floor0" 
    android:layout_weight="2">
</fr.umlv.assistoid.zoning.FloorImageView>

<SeekBar
    android:id="@+id/zoomBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

# javascript - Javascript 移动 div onClick

> ID：15038989
> 
> 赞同：-1
> 
> 时间：2013-02-23T09:23:17.877
> 
> 标签：javascript, html, jquery-animate, move

我试图让一个`#sidebar`位于我的主 div 上方的`#stream`div 从一个位置移动`left: 565px;`到另一个位置`left: 0px;`onClick 中的一个图像`#sidebar`（下图中的红色箭头），并对同一图像执行反向 onClick。我知道我必须使用 JavaScript，但我不知道代码是什么。如果可能的话，我也想为 div 移动设置动画。

预点击状态（箭头将是我的链接）： ![主视图](../Images/047952612aabd8b34ac5b4e1354c5d5b.png)

点击后状态： ![应用视图](../Images/6ade09dd08bbf3e6309bb8859093e030.png)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T10:07:43.860

如果您想使用 animate 对其进行动画处理，请查看此内容。它应该让你指出正确的方向：

[http://jsfiddle.net/3DpfJ/5/embedded/result/](http://jsfiddle.net/3DpfJ/5/embedded/result/) - 全屏结果

[http://jsfiddle.net/3DpfJ/5/](http://jsfiddle.net/3DpfJ/5/) - 源代码

所以我所做的只是：

```
$(function()
{
  var expanded = false;
  $('#sidebar').click(function()
                      {
                          if (!expanded)
                          {
                              $(this).animate({'left' : '0px'}, {duration : 400});
                              expanded = true;
                          }
                          else
                          {
                             $(this).animate({'left' : '565px'}, {duration: 400});
                              expanded = false;
                          }
                      });
 }); 
```

这可能是通过动画实现的最简单的方法。持续时间设置为 400，因此动画需要 0.4 秒。随意调整。

此脚本应在您加载页面后立即执行，以确保展开工作。您将要`<script type="text/javascript"></script>`在标题中创建标签并将代码放在那里。

希望对你有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:28:00.743

```
$('#sidebar').click(function(){
    $(this).animate({"left": "0"});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T09:29:41.603

jquery 使用切换来处理这个问题。它比常规的“动画”效果更好，因为它将隐藏和显示组合成一个功能（切换）。

您可能需要进行一些调整以满足您的需求，但这应该可以帮助您入门：http: [//jqueryui.com/toggle/](http://jqueryui.com/toggle/)

# php - 需要帮助使用 PHP 将文本字符串替换为一组外部文件的内容

> ID：15038991
> 
> 赞同：1
> 
> 时间：2013-02-23T09:23:22.883
> 
> 标签：php, curl

我正在开展一个项目，以提高公众对立法机构内部运作的可及性，但我遇到了障碍。希望能得到一些帮助，因为我一直在寻找几个小时却一无所获。

基本上，我有一些我想要操作的数据。源目前看起来像这样：

> HB 2434 HB 1980 SB 5234 SB 6185 HB 1320 SB 5238 HB 2239 HB 2224 HB 1052 HB 1032 SB 6178 SB 6185 HB 1320

在另一天，它可能看起来像这样：

> SB 5234 SB 6185 HB 1320 SB 6178 SB 6185 SB 5238 HB 2239 HB 2224 HB 1980 HB 1032 HB 1320 HB 1052 HB 2434

其中每一个（即 HB 2434 或 SB 5324）都是一个法案编号，指的是一项立法。顺序很重要 - 这些帐单按修改日期列出，最近修改的帐单在前。随着文件的重新生成，顺序会定期更改。格式不变；它始终只是一个文本文件，其中包含由空格分隔的账单列表。

我想用外部文件中的内容替换上面列出的每个账单编号，然后将该内容包含在网页上。我有一组外部文件，其中包含与每个账单编号相对应的说明信息（即 SB5324.html）。

因此“SB 5324”将被替换为 SB5324.html 的内容，类似于以下内容：

```
<div>
  <h2>HB 5324 Information<h2>
  <p>John Doe is the primary sponsor of this bill. The bill was introduced on January 1st, 2013 by Reps. Doe of Cooltown and Jane Smith of Anytown. It is scheduled for a hearing in the Committee that Doesn't Matter on March 18th, 2013\. Comments regarding the bill may be directed to Rep. Doe.</p> <p>Recent comments about the bill:</p>
  <ul>
    <li>First comment</li><li>Second comment</li><li>Third comment</li>
  </ul>
</div> 
```

其他每一个法案都将被类似的东西取代。

顺序对最终结果很重要，因为我希望出现在页面顶部的 div 与最近活动的账单相对应，而非活动账单 div 位于底部。

使用 PHP 和 cURL 解决此问题的最佳方法是什么？我了解 cURL 的基本用法，但我想包含源文件，然后按顺序将每个账单编号替换为一个小文件，该文件只包含包含在 div 中的内容，如上述。这些文件都存储在同一个地方，并且可以像这样访问：

[http://website.tld/bills/divs/SB5324.html](http://website.tld/bills/divs/SB5324.html) 和 [http://website.tld/bills/divs/HB1980.html](http://website.tld/bills/divs/HB1980.html)

我一直试图让这仅适用于其中两张账单，但我确定我做错了：

```
<?php function getBills($billlistid) {$ch = curl_init(); $timeout = 5;
curl_setopt ($ch, CURLOPT_URL, 'http://website.tld/bills/' .
$billlistid . '.html'); curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout); $file_contents =
curl_exec($ch); if (curl_errno($ch)) {echo "<p>Sorry, can't show the bills! Try refreshing the page.</p>"; } else {
curl_close($ch);
$file_contents = preg_replace('/SB 5324/', file_get_contents($_SERVER['DOCUMENT_ROOT'].'/bills/divs/SB5324.html'), $file_contents);
$file_contents = preg_replace('/HB 1980/', file_get_contents($_SERVER['DOCUMENT_ROOT'].'/bills/divs/HB1980.html'), $file_contents);
echo $file_contents; }}?>

<?php getBills('MyBillList.txt') ?> 
```

我是 PHP 新手，所以会很感激一些指针。谢谢。

**POSTSCRIPT**：我现在拥有的 PHP 代码正在生成：

```
<div>
  <h2>SB 5234 Information<h2>
  <p>John Doe is the primary sponsor of this bill. The bill was introduced on January 1st, 2013 by Reps. Doe of Cooltown and Jane Smith of Anytown. It is scheduled for a hearing in the Committee that Doesn't Matter on March 18th, 2013\. Comments regarding the bill may be directed to Rep. Doe.</p> <p>Recent comments about the bill:</p>
  <ul>
    <li>First comment</li><li>Second comment</li><li>Third comment</li>
  </ul>
</div>

HB 2434 HB 1980 HB 1032 SB 6178 SB 6185 HB 1320 SB 5234 SB 5238 HB 2239 HB 2224 SB 6178 SB 6178 SB 6178 SB 5234 SB 5234 SB 5234 SB 5234 HB 1052 SB 5234 SB 5234 SB 5234 
```

替换 div 出现在账单列表的顶部，这不是我想要的。我希望每个 div 出现在它要替换的账单编号的位置。像这样：

```
HB 2434 HB 1980 HB 1032 SB 6178 SB 6185 HB 1320 <div><h2>SB 5234 Information<h2><p>John Doe is the primary sponsor of this bill. The bill was introduced on January 1st, 2013 by Reps. Doe of Cooltown and Jane Smith of Anytown. It is scheduled for a hearing in the Committee that Doesn't Matter on March 18th, 2013\. Comments regarding the bill may be directed to Rep. Doe.</p> <p>Recent comments about the bill:</p><ul><li>First comment</li><li>Second comment</li><li>Third comment</li></ul></div> SB 5238 HB 2239 HB 2224 SB 6178 SB 6178 SB 6178 SB 5234 SB 5234 SB 5234 SB 5234 HB 1052 SB 5234 SB 5234 SB 5234 
```

当然，其他的账单号码最终也会被 div 取代。但是只替换一个应该会导致上述结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:08:33.663

像这样使用正则表达式怎么样？

```
$s='HB 2434 HB 1980 HB 1032 SB 6178 SB 6185 HB 1320 SB 5234 SB 5238 HB 2239 HB 2224 SB 6178 SB 6178 SB 6178 SB 5234 SB 5234 SB 5234 SB 5234 HB 1052 SB 5234 SB 5234 SB 5234';

$count=preg_match_all('/([A-Z]+) ([0-9]+)/', $s, $matches);

for($i=0; $i<$count; $i++)
  include("{$matches[1][$i]}{$matches[2][$i]}.html"); 
```

# php - 如何在 for 循环中跟踪基数？

> ID：15038995
> 
> 赞同：1
> 
> 时间：2013-02-23T09:24:13.897
> 
> 标签：php, mysql, arrays, for-loop

![在此处输入图像描述](../Images/ada5f01050261b5b518f64b17a6cd0bb.png)我有一个元素数组，每个元素都有 1 或 0。我想遍历每个元素并计算哪些元素的 1 最多。

所以我有三个领域：

id、question 和 yesno

值如下所示：

```
1,1,0
1,2,0
1,3,1
1,4,0
1,5,1
2,1,0
2,2,1
2,3,1
2,4,0
2,5,1
3,1,0
3,2,1
3,3,1
3,4,0
3,5,1 
```

这就是它的要点。现在，我想计算中间列中的哪些元素，第三列中的 1 最多。换一种方式来解释。我想遍历 for 循环并计算中间数字是“1”的次数。稍后，我将排序找出哪个最多。我该如何进行这种类型的迭代？

如有混淆请追问！我自己也糊涂了……！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T09:37:43.187

如果这是在数据库中，您可以使用以下 SQL：

```
SELECT question_id, SUM(value = 1) AS value
FROM mytable
GROUP BY question_id
ORDER BY value DESC
LIMIT 1; 
```

1.  每个值出现的`SUM(value = 1)`次数`yesno`等于 1；
2.  `GROUP BY question_id`每个问题使用它计数 #1
3.  然后根据出现次数降序排列（第一个最高）
4.  拿第一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:48:48.657

如果您仍然喜欢在 PHP 中执行此操作：

```
$counts=array();
foreach($arr as $v) @$counts[$v['movie_id']]+=$v['value']; 
```

我们创建一个空数组，然后添加`$v['value']`到该数组中带有键的项`$v['movie_id']`。如果该键尚不存在，则使用 value 创建它`0`，并且根据您的 PHP 设置，将显示一条通知。放置在 PHP 命令前面的 at 符号`@`会抑制该行中生成的通知和警告。

# php - 通过 php 脚本更改 linux pc 密码的 passwd 命令显示权限被拒绝

> ID：15038997
> 
> 赞同：0
> 
> 时间：2013-02-23T09:25:02.807
> 
> 标签：php

我想使用“passwd”命令通过php脚本更改linux pc的密码，但不知何故这对我不起作用，当m在终端中运行相同的命令时它执行得很好，但是当m在浏览器中运行相同的命令时它显示“密码：权限被拒绝错误”。

我检查了权限，它们是 755，所有权是“wwwrun”。

并且 exec() 函数在我的 php.ini 文件中没有被禁用。

请提供解决方案，因为我必须在星期一提交此申请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:34:15.047

这应该有效：

```
shell_exec("sudo -u root -c 'echo test2 | passwd --stdin testuser'"); 
```

`sudo`而且您的命令仅对您不起作用，`echo`并且在当前用户凭据下执行管道之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:11:01.820

必须以 root 身份运行的程序是`passwd`而不是`echo`：

```
echo mypswabc | sudo -u root passwd --stdin testuser 
```

# entity-framework-5 - EF Code First 没有实体的多对多关系

> ID：15038998
> 
> 赞同：0
> 
> 时间：2013-02-23T09:25:08.257
> 
> 标签：entity-framework-5, code-first, junction-table

我已经阅读了很多关于如何使用 EF Code First 和流利的配置来配置多对多关系的内容。但我不明白为什么要为联结表创建一个额外的实体。假设我有以下实体：

```
Department
----------
Id
Name

Material
----------
Id
Name 
```

现在我想保留每个部门的材料记录。所以我需要

```
DepartmentMaterial
-------------------
DepartmentId
MaterialId
Quantity 
```

到目前为止，我所阅读的内容需要 3 个实体：Department、Material 和 DepartmentMaterial。所以实际上我将每个表映射到一个相应的实体，这在我开始学习 DDD 时并不是我打算做的。我假设 EF 将自动映射该连接表，并且可以在 Department 上完成有关材料数量的查询。

因此，是否可以在 EF Code First 中流畅地配置这种关系而无需额外的实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:36:24.760

**如果联结表只有**两个外键 ( ) ，它可以远离概念模型（类模型`DepartmentId, MaterialId`）。您想记录一些*有关*关联的数据。没关系，数量属于那里。一个部门有一定数量`x`的材料`y`。说一个部门有数量是没有意义的。

这并不违反 DDD 原则。关联类是类模型中的一等公民。它甚至可以有自己的行为（例如限制某些部门/材料组合的数量）。

这意味着您的模型将不包含多对多关联，而是`Department 1-n DepartmentMaterial n-1 Material`. 还要通过联结表查询部门资料。这是很常见的情况。我在现实生活中几乎看不到纯接线表。它们是收藏家的物品。

示例查询：

```
var query = from d in db.Departments
            from dm in d.DepartmentMaterials
            select new { Department = d, Materials = dm.Select(x => x.Material)}; 
```

# java - StAX 解析器的 XMLSchema 验证

> ID：15038999
> 
> 赞同：0
> 
> 时间：2013-02-23T09:25:13.253
> 
> 标签：java, xsd

在 Java 中的 DOM 或 SAX 解析器中，可以通过调用方法 DocumentBuilderFactory.setSchema(..) 或 SAXParserFactory.setSchema(...) 来定义要使用的 XML Schema。

使用 StAX 解析器时如何做类似的事情（启用 XML 模式验证）？实际上我正在创建解析器，如下所示：

```
XMLInputFactory factory = XMLInputFactory.newInstance();
factory.setProperty(XMLInputFactory.IS_NAMESPACE_AWARE, true);
XMLStreamReader reader = factory.createXMLStreamReader(docIs);
parseDoc(reader); // own method which reads data from XML 
```

我想知道 XML 文档何时与架构不匹配或者是无效的 XML 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:13:39.423

[XMLBeans](http://xmlbeans.apache.org/)对此有一个工具。查看使用 ValidatingXMLStreamReader 的 StreamInstanceValidator。

svn.apache.org/viewvc/xmlbeans/trunk/src/xmlcomp/org/apache/xmlbeans/impl/tool/StreamInstanceValidator.java?view=markup

svn.apache.org/viewvc/xmlbeans/trunk/src/typeimpl/org/apache/xmlbeans/impl/validator/ValidatingInfoXMLStreamReader.java?view=markup