# StackOverflow 问答 15085000-15085999

# sap-ase - ident 和 varchar(max) 的替代数据类型

> ID：15085001
> 
> 赞同：0
> 
> 时间：2013-02-26T09:02:45.123
> 
> 标签：sap-ase

我正在将 SQL 存储过程转换为 Sybase ASE。

我遇到了一些数据类型，例如：

```
declare @mask ident
declare @type ident
declare @start varchar(max) 
```

`Ident`并且`varchar(max)`在 Sybase ASE 中不受支持。我可以使用的正确替代数据类型是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:14:34.577

在 Sybase ASE 中，*varchar*的值可以是不超过服务器页面大小的任何值（2k、4k、8k 或 16k 是可用的页面大小。）

Sybase 没有 ident 数据类型，但您可以创建一个用户定义的数据类型来替代使用。

```
sp_addtype ident, "numeric(5)", "identity" 
```

在 Sybase 的[Transact-SQL 用户指南中有更多信息](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32300.1570/html/sqlug/sqlug318.htm)

# c++ - 链接器错误 LNK2001 未解决的外部 std::_String_base::_Xlen

> ID：15085002
> 
> 赞同：1
> 
> 时间：2013-02-26T09:02:45.560
> 
> 标签：c++, visual-studio-2010, linker, static-libraries

> 1>ClCompile: 1> 所有输出都是最新的。1>libsphinx.lib(sphinx.obj) : 错误 LNK2001: 无法解析的外部符号 "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) 1>libsphinx.lib (sphinx.obj) : 错误 LNK2001: 无法解析的外部符号“public: static void __cdecl std::_String_base::_Xran(void)” (?_Xran@_String_base@std@@SAXXZ) 1>C:\Users\shirokov_m\Documents \sphquery\Release\sphquery.exe：致命错误 LNK1120：2 个未解决的外部 1> 1> 构建失败。1> 1> 经过时间 00:00:00.25 ========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

我对 libsphinx.lib 编译没有任何问题。然后我创建了一个新项目（ sphquery ）并将库链接到它。现在我有 LNK2001 错误。

# ios - 在移动应用中播放 youtube 视频的一部分

> ID：15085005
> 
> 赞同：0
> 
> 时间：2013-02-26T09:03:04.960
> 
> 标签：ios, mobile, youtube, youtube-api

我们在网络上有一个视频平台，其中包含我们拥有的大量视频文件，但也有相当数量的 youtube 视频。这些 youtube 嵌入实际上是 youtube 视频的一小部分。我们使用了不起的 Player API 来指定在桌面浏览器上播放时的输入/输出时间坐标。

问题是，我们现在正在开发一个应用程序，我们不确定是否有办法将此行为移植到移动应用程序（Android/iOS）。在那儿 ？

例如，如果我们使用原生 iOS 播放器播放视频，我们是否能够立即搜索到指定时间？我知道我们可以让它在我们想要的时候停止，但是可以指定开始时间吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:07:49.950

如果您使用 a您可以在播放内容之前[`MPMoviePlayerController`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)设置它的属性...`initialPlaybackTime`

# c++ - C++关于堆栈上的动态数组

> ID：15085006
> 
> 赞同：3
> 
> 时间：2013-02-26T09:03:05.453
> 
> 标签：c++, arrays, dynamic

据我所知，C++/C 不支持堆栈上的动态数组。在以下声明中：

```
int data[n] ; // if the n is not decided at compiling time ,this leads to error 
```

但最近，我读了一些其他人的代码如下：

```
//**
It seems the n number can not be decided at compling time,but when I run it , if i fprintf the formation, each time i got the correct array size !!!!!!
the G++ version is 4.7.1 
Is this because the G++ 4.7.1 support C++11 x which allow dynamic array?
 **//

#include <cstdio>
#include <algorithm>
using namespace std;

#include <stdio.h>

char s[31];

int Hash()
{
    int sum=0;
    for(int i=0,k=0;k<7;i++)
    {
        if(s[i]>='0'&&s[i]<='9')
        {
            sum*=10;k++;
            sum+=(s[i]-'0');
        }
        else if(s[i]>='A'&&s[i]<'Z')
        {
            sum*=10;k++;
            sum+=((s[i]-'A'-(s[i]>'Q'))/3+2);
        }
    }
    return sum;
}

int main()
{

    int n;scanf("%d",&n);
    int data[n];getchar();
    //fprintf(stderr,"size is %d\n",sizeof(data)/sizeof(data[0]));
    //**
        It seems the n number can not be decided at compling time,but when I run it , if i fprintf the formation, each time i got the correct array size !!!!!!
     *//
    for(int tmp=0;tmp<n;tmp++)
    {
        gets(s);
        data[tmp]=Hash();
    }
    sort(data,data+n);
    bool p=false;n--;
    for(int i=0,num=1;i<n;i+=num=1)
    {
        while(data[i]==data[i+1])
        {
            num++;
            i++;
        }
        if(num>1)
        {
            printf("%03d-%04d %d\n",data[i]/10000,data[i]%10000,num);
            p=true;
        }
    }
    if(!p)printf("No duplicates.\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:04:45.760

这些被称为[*可变长度数组*](http://en.wikipedia.org/wiki/Variable-length_array)(VLA)，是不属于 C++ 标准的 g++ 编译器扩展。如果您希望代码可移植，请不要在 C++ 中使用它。

您可以`g++`使用编译标志发出警告`-Wvla`，或使用标志发出错误`-Werror=vla`。我通常用 编译`-pedantic-errors`，它捕捉到这个和许多其他与标准的偏差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:07:48.270

C 和 C++ 是不同的语言。语言之间差异的一个示例是 C*确实*支持*堆栈*上的*动态数组*（尽管C 或 C++ 都不需要*堆栈）。*它们被称为*VLA（可变长度数组）*：[http ://en.wikipedia.org/wiki/Variable-length_array](http://en.wikipedia.org/wiki/Variable-length_array)

 ***g++*可能*具有允许在 C++ 中使用此功能的扩展，但并非所有 C++ 实现都需要该扩展。***

# grails - 如何在 Grails 中解压缩上传的文件夹？

> ID：15085014
> 
> 赞同：0
> 
> 时间：2013-02-26T09:03:40.093
> 
> 标签：grails, unzip

谁能帮助我如何在 Grails 中解压缩文件夹？

现在我可以将上传的文件复制到我的 web-app CSS 文件夹中。

```
 def uploadedFile = request.getFile('payload')
    if(!uploadedFile.empty){
     /* println "Class: ${uploadedFile.class}"
      println "Name: ${uploadedFile.name}"
      println "OriginalFileName: ${uploadedFile.originalFilename}"
      println "Size: ${uploadedFile.size}"
      println "ContentType: ${uploadedFile.contentType}"*/
      def webRootDir = servletContext.getRealPath("/")
      def userDir = new File(webRootDir, "/css")
      userDir.mkdirs()
      uploadedFile.transferTo( new File( userDir, uploadedFile.originalFilename))
      render("Successfully copied to web-app folder")
    }
    else {
        render(view:'config')
    } 
```

但现在我需要上传一个 zip 文件，然后我需要将文件或图像解压缩到 CSS web-app 文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:42:52.397

使用[commons-compress](http://commons.apache.org/proper/commons-compress//)可能是最简单的方法。查看[此](https://stackoverflow.com/questions/3612660/utility-to-unzip-an-entire-archive-to-a-directory-in-java)讨论以获取最小示例：

```
org.apache.ant.compress.taskdefs.Unzip u = new Unzip();
u.setSrc(new File("<archive.zip>");
u.setDest(new File("<targetDir>");
u.execute(); 
```

# mysql - MySQL从具有条件的表中选择字段

> ID：15085018
> 
> 赞同：0
> 
> 时间：2013-02-26T09:03:46.677
> 
> 标签：mysql, select, wordpress

我的 MySQL 技能很差，很抱歉发布这么简单的问题！我有一张桌子，其中有 coupon_code = discountmail 的一行。我现在想选择该行并获取 value 的值。为什么这不起作用？

```
global $wpdb;
$wpdb->query(
"
SELECT * FROM $wpdb->wpsc_coupon_codes WHERE coupon_code = 'discountmail'
"
);
$likeCoupon = $wpdb->get_row('query', output_type, row_offset);
echo $likeCoupon['value']; 
```

干杯!

编辑：更改了代码，但它仍然没有输出任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:13:53.547

您需要以不同的方式进行操作，根据您首先需要准备查询然后获取变量的[文档，如下所示：](http://codex.wordpress.org/Class_Reference/wpdb)

```
<?php
$wpdb->query(
    "
    SELECT * FROM $wpdb->wpsc_coupon_codes WHERE coupon_code = 'discountmail'
    "
);

$wpdb->get_row('query', output_type, row_offset);
?> 
```

之后您可以访问该值`$likeCoupon['value'];`。

# vba - VBA：输入点击下一个相似id的getElementbyId

> ID：15085019
> 
> 赞同：1
> 
> 时间：2013-02-26T09:03:48.467
> 
> 标签：vba, automation, getelementbyid

我遇到了关于我的 VBA 脚本的问题。我的问题是，如何单击与前一个 ID 相同的输入按钮的按钮。唯一不同的是 onclick 值...我的脚本适用于第一个 ADD 按钮，但是当页面加载时，我不知道如何让我的代码单击新的 ADD 按钮（具有相同的 id比上一个）。请参阅下面的代码：

首次加载 HTML 页面：

```
<input id="btnEdit" class="button" onclick="openExpenseForm(1,'ExpenseCard.aspx?ExpenseFormID=c78f4ac6-63fc-4a47-a06a-a4eafe3ded08&ExpenseCardID=&Row=1&Action=New&Enabled=True');"
                        type="button" value="ADD" /> 
```

第二次加载 HTML 页面：

```
<input id="btnEdit" class="button" onclick="openExpenseForm(1,'ExpenseCard.aspx?ExpenseFormID=c78f4ac6-63fc-4a47-a06a-a4eafe3ded08&ExpenseCardID=&Row=1&Action=New&Enabled=True');"
                        type="button" value="EDIT" />
<input id="btnEdit" class="button" onclick="openExpenseForm(2,'ExpenseCard.aspx?ExpenseFormID=c78f4ac6-63fc-4a47-a06a-a4eafe3ded08&ExpenseCardID=&Row=1&Action=New&Enabled=True');"
                        type="button" value="ADD" /> 
```

VBA：

```
 Dim oIE As Object
Set oIE = CreateObject("InternetExplorer.Application")
    oIE.Visible = True
    URL = "http://netsteps/expense/ExpenseForm.aspx?Action=New&EmployeeID=" & ActiveSheet.Cells(1, 3)
    oIE.Navigate (URL)

AppActivate oIE

Dim objIE As SHDocVw.InternetExplorer 'microsoft internet controls (shdocvw.dll)
Dim htmlDoc As MSHTML.HTMLDocument ' html object lib
Dim htmlInput As MSHTML.HTMLInputElement
Dim htmlColl As MSHTML.IHTMLElementCollection
Set objIE = New SHDocVw.InternetExplorer

With objIE
With ActiveSheet

    Do While oIE.Busy: DoEvents: Loop
    Do While oIE.readyState <> 4: DoEvents: Loop

    oIE.document.getElementById("ctl00_Main_txtExpenseBusinessPurpose").Value = CStr(.Cells(2, 3))

    Do While (Not IsEmpty(.Cells(lin, 1)))

    Set htmlDoc = oIE.document
    Set htmlColl = htmlDoc.getElementsByTagName("input")

        For Each htmlInput In htmlColl
            If (htmlInput.Value = Trim("ADD") And Trim(htmlInput.Type) = "button") Then
                htmlInput.Click
            End If
        Next htmlInput

        Do While oIE.Busy: DoEvents: Loop
        Do While oIE.readyState <> 4: DoEvents: Loop
        ' Process 
        'End of all loops... 
```

我有点卡住了，任何帮助将不胜感激。祝你有美好的一天，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:59:32.920

`id`html 文档中的属性应该是唯一的，但是您`btnEdit`在两个元素中分配了相同的值。消除它们的歧义，例如。通过附加按钮的 value 属性 ( `btnEdit_ADD`, `btnEdit_EDIT`) 的内容。如果您需要表示按钮是一种按钮，请使用 -`data-`属性（有关详细信息，请参见[此处](http://www.w3.org/html/wg/drafts/html/master/single-page.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)）。希望有帮助，问候

# android - 安卓中 Admobs 的真实添加

> ID：15085021
> 
> 赞同：0
> 
> 时间：2013-02-26T09:03:50.817
> 
> 标签：android

我总是得到 admobs 的测试添加。即使我正在为 setTestDevices 设置设备 ID，我也没有看到任何真正的添加，而且我尝试了 addTestDevices 也请帮助我提前谢谢，这是我的代码..

```
 HashSet<String> hsDevice =  new HashSet<String>();
hsDevice.add(getDeviceIDforAdMob());
adRequest.setTestDevices(hsDevice);
DfpAdView adView = new DfpAdView(Base.this, AdSize.BANNER, baneerID);                   
    adView.loadAd(adRequest);

    public String getDeviceIDforAdMob()
    {
      String aid = Settings.Secure.getString(Base.this.getContentResolver(), "android_id");

     Object obj = null;
      try 
      {
         ((MessageDigest) (obj = MessageDigest.getInstance("MD5"))).update( aid.getBytes(), 0, aid.length());
         obj = String.format("%032X", new Object[] { new BigInteger(1,((MessageDigest) obj).digest()) });
      }
      catch (NoSuchAlgorithmException localNoSuchAlgorithmException) 
      {
        obj = aid.substring(0, 32);
      }
      return (String) obj;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:10:31.470

要获得真正的广告，请删除 adRequest.setTestDevices(hsDevice); 从你的代码。

它仅用于开发目的，以便为您提供占位符广告，以免您不小心点击它们。请参阅[https://developers.google.com/mobile-ads-sdk/docs/admob/best-practices](https://developers.google.com/mobile-ads-sdk/docs/admob/best-practices)

# php - 审查联系信息，例如电话号码或电子邮件地址

> ID：15085025
> 
> 赞同：2
> 
> 时间：2013-02-26T09:04:10.043
> 
> 标签：php, regex, cakephp-1.3

我有一个文本区域，用户可以在其中填写有关自己的信息。

我需要检测用户是否填写了电话号码。或该文本区域中的电子邮件地址。

我知道固定模式可以与正则表达式匹配，但如何处理各种格式，例如：

```
9 7 8 5 8 7 

9, 7, 8, 5, 8, 7 

9.7.8.5.8.7 

Or any 6 or more consecutive number sepereated with \, -, etc 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:28:52.703

我认为您无法在一个字符串中找到所有电话号码和电子邮件地址。它会变得非常复杂。如果您不让人们保存他们的个人资料，因为您怀疑他们有无效信息，他们可能会尝试很长时间，直到他们找到一个模式，您的正则表达式将无法处理。有人可能会得到：

```
My name is Peter at googleD0Tcom'on. 
```

另一方面，你会让人们生气，因为你错误地发现了不是欺诈的东西。假设您使用[Jan Hančič](https://stackoverflow.com/users/185527/jan-hancic)在评论中建议的内容来去除所有非数字字符（这不是一个坏方法）：

```
I'm 21 years old. In 2012 I already had like 45k reputation on Stackoverflow. 
```

这将导致 21201245 并且可能是电话号码的一部分。

我建议过滤看起来可疑的新的和更新的配置文件并手动验证它们。如果它不是一个有效的条目，因为它包含一个伪装的电子邮件或电话号码，阻止它并向用户发送一封电子邮件，其中包含更新他的个人资料的消息。

我会检查这样的字符串：

*   它是否包含：`@`、`at`或`[at]`、、`dot`（`.com`或您的用户经常使用的任何其他 TLD）
*   剥离所有非数字字符并检查结果数字
*   搜索大型电子邮件公司的名称，例如 Google、GMX、Yahoo、Apple（ME、iCloud）等。

以下是有关如何使用 PHP 查找电子邮件和电话号码的更多问题和解答：

*   [如何检测文本中的电话号码（并替换它们）？](https://stackoverflow.com/q/3764814/1456376)
*   [使用 preg_replace 在 PHP 字符串中查找电话号码的终极方法](https://stackoverflow.com/q/10141295/1456376)
*   [如何从长字符串中获取电子邮件地址](https://stackoverflow.com/q/1028553/1456376)
*   [在 PHP 中查找和替换电子邮件和电话号码](https://stackoverflow.com/q/11469957/1456376)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:08:44.760

您可以使用：

```
\d([,-. ] *\d){5} 
```

它允许`, . -`和空格字符。如果要包含更多分隔符，只需将它们添加到`[...]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:11:58.280

尝试这个：

```
$number    = '12.3555';

if(preg_match('/[\/0-9,-\.\s\\\]{6,}/',$number) && count(array_filter(str_split($number),'is_numeric')) >= 6){
  echo "phone number exists";
} 
```

# r - 在 r 中合并两个数据帧 - 错误

> ID：15085026
> 
> 赞同：0
> 
> 时间：2013-02-26T09:04:15.757
> 
> 标签：r

我有两个数据集，一个是 log10 转换的，另一个是 RMA 标准化的。

# 数据帧 1（原始数据）

```
 dim(protdata) [1] 437   7
      Locus      COBL9   WER    CORTEX   SCR     WOL    PET111
  1  AT1G01090  4.3035  4.3975  4.4620  4.3879  4.2620  4.2045
  2  AT1G02780  4.7852  4.6865  4.7801  5.0038  4.9457  4.9515
  3  AT1G04040  4.5854  4.1787  3.4836  3.4918  4.2366  3.5197
  4  AT1G04270  4.3578  4.4281  4.3348  4.5680  4.4208  4.4056
  5  AT1G04410  4.9808  4.9913  5.2186  5.3315  5.2178  5.4524
  6  AT1G04430  4.2382  4.3564  4.3535  4.3056  4.0263  3.9485
  7  AT1G04480  4.5462  4.4302  4.4987  4.8039  4.5807  4.4876 
```

# 数据帧 2（转数据）

```
 dim(transdata) [1] 22810    77
       Locus      probes     COBL9    WER   CORTEX  SCR     
 1   AT1G01090   244901_at   4.7852 4.6865  4.7801  5.0038  
 2   AT1G02780   244902_at   4.5854 4.1787  3.4836 3.4918                          
 3   AT1G04040   244903_at   4.3578 4.4281  4.3348  4.5680              
 4   AT1G04570   244904_at   4.9808 4.9913  5.2186  5.3315                  
 5   AT1G04610   244905_at   4.2382 4.3564  4.3535  4.3056                  
 6   AT1G02430   244906_at   4.5462 4.4302  4.4987  4.8039 
```

我想根据 Locus id 合并两个数据框并使用

```
 matchin<-merge(transdata,protdata,by.x="Locus",by.y="Locus") 
```

但是我得到了一个不同的数据帧，如下所示：在上面的示例中，我在两个帧中都有两个匹配的 id，但结果是：

```
 Locus      probes     COBL9    WER    CORTEX  SCR     
 1   AT1G01090   244901_at  14.7852 12.6865 13.7801 12.0038     
 2   AT1G02780   244902_at  14.5854 13.1787 12.4836 13.4918 
             COBL9   WER    CORTEX   SCR     WOL    PET111
            4.3035  4.3975  4.4620  4.3879  4.2620  4.2045
            4.7852  4.6865  4.7801  5.0038  4.9457  4.9515 
```

虽然它是一个包含唯一基因座 id 的数据框，但仅来自 transdata 的强度值已经发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:09:15.990

为我工作。清除您的工作区并开始新的工作。确保您使用正确的对象。

```
> merge(transdata,protdata, by = "Locus")
      Locus    probes COBL9.x  WER.x CORTEX.x  SCR.x COBL9.y  WER.y CORTEX.y  SCR.y    WOL PET111
1 AT1G01090 244901_at  4.7852 4.6865   4.7801 5.0038  4.3035 4.3975   4.4620 4.3879 4.2620 4.2045
2 AT1G02780 244902_at  4.5854 4.1787   3.4836 3.4918  4.7852 4.6865   4.7801 5.0038 4.9457 4.9515
3 AT1G04040 244903_at  4.3578 4.4281   4.3348 4.5680  4.5854 4.1787   3.4836 3.4918 4.2366 3.5197 
```

# java - Java 存储过程 UnsupportedClassVersionError

> ID：15085027
> 
> 赞同：1
> 
> 时间：2013-02-26T09:04:15.257
> 
> 标签：java, oracle, procedure

**尊敬的专家**

我正在尝试执行映射到 Java 存储过程的 oracle 过程，但收到以下错误：

```
ORA-29532: Java call terminated by uncaught Java exception: 
System error : java/lang/UnsupportedClassVersionError 
```

我正在使用 Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit

我使用 Java 最新版本“Java SE 7u15”编译了源代码，并且我知道 Oracle 11g R2 使用的是 java 5.0 或 1.5，因为该程序是从 Oracle PLSQL 执行的。我是否需要将编译版本降级到 1.5 是否有助于解决此问题

*任何建议将不胜感激*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:13:59.847

当 JVM 尝试读取类文件并发现不支持特定类文件中的主要和次要版本号时，将引发此错误。

当使用更高版本的 Java Compiler 生成类文件而不是用于执行该类文件的 JVM 版本时，就会发生这种情况。

以下是解决问题的几个步骤：

1.  找出这个 UnSupportedClassVersionError 来自哪个 jar 或类文件？
2.  如果源代码可用，请尝试使用您用于运行程序的 JDK 版本编译该 jar 的源代码。
3.  如果您没有源代码，请尝试查找该库的兼容版本。
4.  增加您用于运行程序的 JRE 版本。

检查以下链接以获取更多信息：

[http://geekexplains.blogspot.com/2009/01/javalangunsupportedclassversionerror.html](http://geekexplains.blogspot.com/2009/01/javalangunsupportedclassversionerror.html)

[http://javarevisited.blogspot.com/2011/07/javalangunsupportedclassversionerror.html](http://javarevisited.blogspot.com/2011/07/javalangunsupportedclassversionerror.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:13:55.900

看起来您使用[的 Java 版本](http://javarevisited.blogspot.cz/2011/07/javalangunsupportedclassversionerror.html)低于驱动程序编译到的版本，或者 32 位/64 位 java 与 oracle 不匹配。

# java - java - 如何在java中另一个字符串中的特定字符之后添加一个字符串？

> ID：15085032
> 
> 赞同：1
> 
> 时间：2013-02-26T09:04:32.313
> 
> 标签：java, string

我有一个包含大量字符串的文件，其形式为

```
key1=value1  
key2=value2  
... 
```

我需要为例如添加一个字符串。`(Long)`在每个等号之后。并使用这些新字符串创建一个新文件：

```
key1=(Long)value1.
key2=(Long)value2.
... 
```

如何用java程序实现这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:06:34.947

```
BufferedReader b = new BufferedReader(new FileInputStrem(file));

while(b.readLine() != null) {
     System.out.println(line.replace("=", "=(Long)"));
}

b.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:05:56.083

```
"key1=value1".replace("=", "=(Long)"); 
```

分别：

```
"key1=value1".replace("=", "=" + String.valueOf(123l)); 
```

这仅适用于 Java >1.4，如果没有`=`可能在`key`or`value`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:12:57.597

```
public class StringReplace
{
    public static void main(String[]args)
    {
        String str1 = "key1=value";
        String rep = "=(Long)";

        //Printing Current String
        System.out.println(str1);

        //Replacing the String
        str1 = str1.replaceAll("=", rep);

        //Printing new value
        System.out.println(str1);
    }
} 
```

使用`replaceAll()`或`replace()`替换找到的所有匹配项。

以上是最简单的方法。您也可以使用循环检查匹配项。但这会占用大量内存，如果您要检查很多匹配项，那将是一个恐慌。

# c# - DotNetZip：拒绝删除和更新受保护 zip 中的文件列表

> ID：15085035
> 
> 赞同：2
> 
> 时间：2013-02-26T09:04:51.353
> 
> 标签：c#, .net, passwords, zip

我有 zip，受密码保护。如何拒绝从我的 zip 文件中删除条目并更新其中的条目？

如果甚至可以拒绝在没有密码的情况下打开受保护的 zip，这将是最好的解决方案。

如何使用 DotNetZip 库做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T20:08:38.443

ZIP 标准通过向中央目录结构添加签名来允许它。但这仅由商业实现支持 - PKWare 的 SecureZip 和一些库（如 SecureBlackbox）。

# android - android中的logback和代码混淆

> ID：15085046
> 
> 赞同：1
> 
> 时间：2013-02-26T09:05:45.207
> 
> 标签：android, obfuscation, proguard, slf4j, logback

我正在使用 Logback 库来登录我的 android 应用程序，它运行良好。但是，当我导出应用程序并使用 Proguard 混淆代码时，它无法正常工作（我使用的是 FileAppder，并且未创建文件）。

这是我的配置文件：

```
<configuration>
    <appender
        name="userClicksAppender"
        class="ch.qos.logback.core.FileAppender" >
        <file>
                        /sdcard/Test/data/log.txt
        </file>
        <append>
                    true
        </append>
        <encoder class="com.android.gooapplication.model.MyEncoder" >
            <pattern>
                        %-4relative [%thread] %-5level %logger{35} - %msg%n
            </pattern>
        </encoder>
    </appender>
    <logger name="userClicksLogger" >
        <appender-ref ref="userClicksAppender" />
    </logger>
</configuration> 
```

我试图跳过 proguard 配置文件中的 MyEncoder 类和整个 logback 包，如下所示：

```
-keep public class com.android.gooapplication.model.MyEncoder
-keep public class ch.qos.logback.**
-keep public public class org.slf4j.** 
```

但仍然没有成功。

你怎么看？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T07:06:32.760

这是我的解决方案，它有效

这是 proguard 配置文件 (proguard.cfg) 的一部分：

```
# ...
-keep public class org.slf4j.** { *; }
-keep public class ch.** { *; }
# ... 
```

这是 logback 配置文件（assets/logback.xml）

**将 pack.of.your.application**更改为您自己的包名称：

```
<configuration>
    <appender name="file" class="ch.qos.logback.core.FileAppender">

        <file>/data/data/pack.of.your.application/files/log.txt</file>
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="ALL">
        <appender-ref ref="file" />
    </root>
</configuration> 
```

这是 Maven 依赖项：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.6.6</version>
</dependency>
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-core</artifactId>
    <version>1.0.7</version>
</dependency> 
```

# ruby-on-rails - ruby gem 来检查所有登录我们应用程序的用户？

> ID：15085049
> 
> 赞同：0
> 
> 时间：2013-02-26T09:05:50.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

是否有任何方法或 gem 来识别所有登录我们的应用程序的用户？. 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:08:29.763

首先，您需要使用除 CookieStore 之外的其他东西作为会话后端。如果您使用例如 ActiveRecord，您应该能够相对轻松地查询所有当前登录的用户。

我不知道这有什么宝石，但这听起来真的不像你需要一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:38:42.950

你可以通过`status`在你的表中定义额外的字段说，说，来做到这一点`users`。

因此，当任何用户获取时`logged in`，您必须将此字段设置为在线状态。

然后在您的控制器的创建方法中，您只需执行以下操作：

```
User.create(:status => "online", #other params go here) 
```

您也可以使用状态定义新注册用户，例如`offline`。

您可以在用户注册时执行以下操作：

```
User.new(:status => "offline", #other params go here) 
```

然后要查找已登录的用户，您可以这样做：

```
@online_users = User.where(:status => "online") 
```

更新：

对于没有点击注销按钮的用户，上面的想法是行不通的。

所以你必须将这个想法与[Jugernaut 之](http://juggernaut.rubyforge.org/)类的东西结合起来，然后定期发送 ping 来了解用户是否仍然在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:47:00.533

这实际上取决于您用于登录系统的 gem。

如果您使用的是 Authlogic，我无法确定为用户模型创建的所有字段，但我相信您可以通过在名称范围内定义和搜索**last_request_at**等搜索在 5-10 分钟内完成.

如果您使用的是 Devise，并且特别想使用 gem，可以尝试以下操作： [https ://github.com/ctide/devise_lastseenable](https://github.com/ctide/devise_lastseenable)

# asp.net-mvc-3 - MVC Razor 视图---日期时间显示

> ID：15085062
> 
> 赞同：1
> 
> 时间：2013-02-26T09:06:27.823
> 
> 标签：asp.net-mvc-3, razor

我有一个下面的代码，我在其中获取时间表单 DB 并通过模型显示在我的视图中

```
 <div class="comment_time">@item.dTime</div> 
```

我想以用户友好的方式显示 DateTime。因此，如果在我的项目中保留一个函数来进行转换，我该如何在我的 .cshtml 中调用它并显示。

在我的场景中使用注释为您提供第二个答案

```
foreach (var item in Model.lstCommet)
   {
 <div class="comment_body">@item.comments</div> 
  <div class="comment_time">@item.dTime</div>
    } 
```

根据您的回答，我如何`displayfor`在 lstcomment 列表中使用？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:08:03.460

```
<div class="comment_time">@item.dTime.ToString("dd/MM/yyyy")</div> 
```

如果您想在视图中调用自定义函数，这些函数在 ASP.NET MVC 中有一个名称。它们被称为 html 助手。所以你可以编写一个自定义的 html 助手：

```
public static class HtmlHelperExtensions
{
    public static IHtmlString MyFunction(this HtmlHelper html, DateTime value)
    {
        return new HtmlString(value.ToString("dd/MM/yyyy"));
    }
} 
```

然后在你的视野内：

```
<div class="comment_time">@Html.MyFunction(item.dTime)</div> 
```

另一种可能性是使用属性简单地装饰视图模型上的`[DisplayFormat]`属性：

```
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")]]
public DateTime dTime { get; set; } 
```

然后在您的视图中使用`DisplayFor`帮助器：

```
@Html.DisplayFor(x => x.dTime) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:08:47.640

为什么不直接打电话`.ToString()`？您可以传递所需的格式。

# jquery - 可以使用 firebug 修改 jquery/javascript 运行时，例如与验证器混淆吗？

> ID：15085065
> 
> 赞同：3
> 
> 时间：2013-02-26T09:06:40.463
> 
> 标签：jquery, security

我有个问题。如果我使用 jquery/javascript 验证输入字段。

愚蠢的例子：

```
if (password.length > 6) { //do soemthing useful } 
```

访问者可以在 chrome 或 firebug 中启动检查器，并将该值 6 编辑为例如 2，他能否创建长度为 2 个字符的密码？

如果是，处理这个问题的最佳方法是什么？总是在服务器端实施双重检查吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:16:24.320

**始终，始终**在服务器上验证是否对正在更改的数据有影响*。这也涵盖了用户可能没有启用 JavaScript 的（这些天相当模糊）场景。

一些框架（例如 ASP.Net）使声明验证变得容易，该验证将首先在客户端运行，但在数据到达服务器时自动重新执行。

请记住，不仅仅是表单字段容易受到篡改。Cookies 和 URL 参数可以很容易地改变。

*^(任何危害您的数据安全、应用程序的正确使用、服务器性能等的事情。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:15:28.777

我必须第二次添，您必须始终在服务器上进行验证。

用户甚至不需要像 Firebug 这样复杂的东西来绕过您的验证。您正在将 JavaScript 以纯文本形式发送给用户。用户所要做的就是将您的 .html 文件保存到磁盘，将 JavaScript 更改为他们喜欢的任何内容，然后在他们希望的任何浏览器中打开它。

即使有人不这样做，`HTTP_X_REQUESTED_WITH`如果他们编写自己的 HTTP 客户端（或使用像 Curl 这样的命令行 HTTP 客户端），他们总是可以伪造任何 HTTP 标头（如 ）。

不需要调试器、代理、中间人或其他复杂的协议劫持。（虽然这些都是您需要在服务器上验证的好理由）

# sql - 存储过程将结果返回到另一个存储过程中的临时表中

> ID：15085071
> 
> 赞同：0
> 
> 时间：2013-02-26T09:07:05.033
> 
> 标签：sql, stored-procedures

我想要做的是插入新事务，它是最新事务的副本，但更改了几个值。

给定请求ID，我有SP返回最新交易`sp_Get_YellowCard_Request_Last_Transaction`

我有另一个我想使用上面称为`sp_Update_CC_Move_YCR_TO`.

但是由于`sp_Get_YellowCard_Request_Last_Transaction`返回了很多字段（26），我不想指定所有字段，只需将其结果插入临时表，然后更改一些字段，最后将临时表插入目标事务表。

到目前为止，我写的是：

```
USE [YellowCard_NewDesign]
GO
/****** Object:  StoredProcedure [dbo].[sp_Update_CC_Move_YCR_TO]    Script Date: 02/26/2013 09:43:26 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_Update_CC_Move_YCR_TO]
    @YellowCard_Request_ID int,
    @yc_changer_username nvarchar(MAX),
    @yc_changer_rolename nvarchar(MAX),
    @yc_new_status nvarchar(MAX)
AS
    INSERT INTO #last_transaction
    EXEC dbo.sp_Get_YellowCard_Request_Last_Transaction @YellowCard_Request_ID* 
```

我收到 #last_transaction 未定义的错误。

如何在不定义临时表字段的情况下完成我的 SP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:41:37.833

在 SQL Server 2000 中，我使用了以下技巧：

```
IF OBJECT_ID('tempdb..#last_transaction') IS NULL
    CREATE TABLE #last_transaction(
        ....
    )

INSERT INTO #last_transaction
    EXEC ... 
```

对于更高版本的 SQL Server，我更喜欢表值函数。

# jquery - jQuery：使用 .prepend() 将 HTML 插入可拖动的 div - 如何在此 HTML 元素上使用单击事件？

> ID：15085073
> 
> 赞同：1
> 
> 时间：2013-02-26T09:07:10.890
> 
> 标签：jquery, jquery-ui-draggable, jquery-click-event, jquery-draggable

以下问题：我有一个名为“#window-hidden”的隐藏 div 容器。当用户点击一个链接时，链接文档的 HTML 应该通过 AJAX 插入到这个 div 容器中（到目前为止工作“。这个容器也应该是可拖动的（到目前为止工作）。但另外我需要一个关闭按钮来再次隐藏这个 div 容器 - 这里出现了麻烦。

我的代码：

```
$('.top_navigation .address a').click(function() {
  var myUrl = SOME CODE TO GET THE URL - WORKING;
  $('#window-hidden').load(myUrl, function() {
    var closer = '<div id="closer"><a href="#">X</a></div>';
    $(this).prepend(closer);
    $(this).fadeIn();
    });
  return false;
});

$('#window-hidden').draggable();

$('#closer a').on('click', function() {
  $('#window-hidden').fadeOut();

}); 
```

代码的第一块将 HTML 加载到 div 容器中，并将“closer”元素添加到容器中。到目前为止一切都很好。第二个块使容器可拖动。最后一段代码我想再次关闭窗口，但它不起作用。也许是因为父容器（#window-hidden）是可拖动的？或者可能是因为 #closer 元素是在构建 DOM 之后插入的？？

最好的，托拜厄斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:15:27.200

`click`事件**仅适用于文档就绪的 DOM 中存在的元素**。您需要使用[`on`](http://api.jquery.com/on/)（如果您使用 jQuery 1.7+）或[`delegate`](http://api.jquery.com/delegate/)（对于早期的 jQuery 版本）来实现您所需要的。根据您的版本尝试以下任何一种：

`on`：

```
$("#window-hidden").on("click", "#closer a", function () {
    $('#window-hidden').fadeOut();
}); 
```

`delegate`：

```
$("#window-hidden").delegate("#closer a", "click", function () {
    $('#window-hidden').fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:18:12.523

要监听页面加载后插入的 dom 元素上的事件，您需要使用 on 方法。在这种情况下，它将类似于：

```
$('#window-hidden').on('click', '#closer a', function() {
    $('#window-hidden').fadeOut();
}); 
```

有关详细信息，请参阅：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:18:25.610

我想问题是这里的代码

```
$('#closer a').on('click', function() {
  $('#window-hidden').fadeOut();

}); 
```

在页面加载时执行，但在单击链接时将“更近”的 div 插入到 DOM 中。因此，当您尝试将单击处理程序附加到“更接近”的 div 时，它还不存在。您可以尝试将附加的事件处理程序放入单击处理程序中吗？只是复制东西，它看起来像这样：

```
$('.top_navigation .address a').click(function() {
  var myUrl = SOME CODE TO GET THE URL - WORKING;
  $('#window-hidden').load(myUrl, function() {
    var closer = '<div id="closer"><a href="#">X</a></div>';
    $(this).prepend(closer);

    $('#closer a').on('click', function() {
        $('#window-hidden').fadeOut();
    });

    $(this).fadeIn();
    });
  return false;
});

$('#window-hidden').draggable(); 
```

干杯，亚历克斯

# visual-c++ - 在 Visual Studio 中使用 Visual C++ 创建动态链接库

> ID：15085074
> 
> 赞同：0
> 
> 时间：2013-02-26T09:07:11.407
> 
> 标签：visual-c++, hyperlink

我有一个链接脚本，将一堆 obj 和 lib 文件链接到一个 dll 中。我试图在 Visual Studio 中做同样的事情，但没有任何运气。问题是该项目没有任何源文件。该项目需要获取所有 lib 和 obj 文件并将它们链接到 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:34:58.377

我不确定您是否可以从 Visual Studio 执行此操作，但您可以使用以下命令从 Visual Studio 命令提示符执行此操作：

> 链接 /OUT:"Dll.dll" /DLL obj1.obj obj2.obj lib1.lib lib2.lib

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:38:00.697

创建 Makefile 项目。在 VC++ 2010 中：Visual C++ - 常规 - Makefile 项目。在项目属性中打开构建命令行：配置属性 - NMake - 构建命令行。在此处输入脚本名称。当您执行 Build 命令时，将执行此脚本。

# algorithm - 代码执行的次数

> ID：15085075
> 
> 赞同：0
> 
> 时间：2013-02-26T09:07:13.957
> 
> 标签：algorithm, complexity-theory, asymptotic-complexity

我有一段代码说：

对于 i = 4,16，. . . , n

我试图以大 oh 表示法为语句执行的次数找到一个上限。我相信这里会像 4,4 ² ,4 ³ ... 等等。由于它呈指数增长，因此在我看来，该代码执行了大约 O(logn) 次。我对吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:31:13.890

您可以通过考虑一个循环来确认您的结果，该循环的索引变量用作指数，取值`1, 2, 3, ... , floor(log_4(n))`

# c# - 更改 DateTimePicker 控件的语言

> ID：15085078
> 
> 赞同：0
> 
> 时间：2013-02-26T09:07:21.150
> 
> 标签：c#, .net

我想改变`DateTimePicker`控制语言。为此，我在控件的 DropDown 事件上更改了区域语言`DateTimePicker`，但它不影响 DateTimePicker 控件。代码是

```
private void dtpDate_DropDown(object sender, EventArgs e)
{
    System.Globalization.CultureInfo ci = new   System.Globalization.CultureInfo("fr-FR");
    System.Threading.Thread.CurrentThread.CurrentCulture = ci;
} 
```

在此之后我也尝试过

```
dtpDate.Format = DateTimePickerFormat.Custom;
string[] formats = dtpDate.Value.GetDateTimeFormats(Application.CurrentCulture);
dtpDate.CustomFormat = formats[0]; 
```

但仍然有问题:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:09:50.750

Сhange`Culture`你的`Thread`：

```
 System.Globalization.CultureInfo cultureInfo = new System.Globalization.CultureInfo("xx-XX");
 System.Threading.Thread.CurrentThread.CurrentCulture = cultureInfo;
 System.Threading.Thread.CurrentThread.CurrentUICulture = cultureInfo; 
```

# datagrid - 将“onkeypress”事件绑定到 jQuery Easy UI Datagrid Editor 类型“文本”？

> ID：15085080
> 
> 赞同：0
> 
> 时间：2013-02-26T09:07:28.940
> 
> 标签：datagrid, editor, jquery-easyui, onkeypress

是否可以将“onkeypress”事件绑定到 jQuery Easy UI 数据网格编辑器类型“文本”？或“onkeyup”和“onkeydown”。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:18:52.740

请查看以下演示，

[http://www.jeasyui.com/tutorial/datagrid/datagrid15.php](http://www.jeasyui.com/tutorial/datagrid/datagrid15.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T18:19:50.597

您应该在 datagrid 的事件上注册您的`onLoadSuccess`事件，如下所示：

```
onLoadSuccess:function() {
  $(".onetextbox").keydown(function () {
    // ...
  });
} 
```

# python - 如何从 sqlalchemy 执行 SET 语句？

> ID：15085081
> 
> 赞同：1
> 
> 时间：2013-02-26T09:07:31.150
> 
> 标签：python, postgresql, sqlalchemy

我正在尝试`SET`从 sqlalchemy 执行语句。

```
>>> from sqlalchemy import create_engine
>>> c = create_engine('postgres://myuser@myremoteserver/mydb?keepalives_idle=4&keepalives_interval=1&keepalives_count=5')
>>> c.execute('SET statement_timeout=1000')
<sqlalchemy.engine.base.ResultProxy object at 0xb7b250> 
```

它将返回`ResultProxy`对象。`statement_timeout`但未设置值。

```
>>> c.execute('SHOW statement_timeout').scalar()
'0' 
```

如果我会尝试`ResultProxy.scalar`，那么它会给出错误。

```
>>> c.execute('SET statement_timeout=1000').scalar()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 1676, in scalar
    self.connection._handle_dbapi_exception(e, None, None, self.cursor, self.context)
  File "/usr/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 923, in _handle_dbapi_exception
    self.invalidate(e)
  File "/usr/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 633, in invalidate
    raise exc.InvalidRequestError("This Connection is closed")
sqlalchemy.exc.InvalidRequestError: This Connection is closed 
```

如何设置这个变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:23:37.980

两个观察。

首先，您的错误建议尝试使用关闭的连接。是否有可能在后台发生某种奇怪的连接池问题，或者连接在两者之间关闭？

其次，您的第二个查询不返回值。

仔细阅读您的第一种方法似乎有效，除了 ResultProxy 未设置为值，因为该语句没有返回任何内容。您可能只想丢弃它并运行`SHOW`命令来获取应用程序的值。

# python - ImportError：无法导入名称 ResourceError

> ID：15085083
> 
> 赞同：0
> 
> 时间：2013-02-26T09:07:40.433
> 
> 标签：python, couchdb, debian

我正在尝试使用以下命令在 debian 上安装 couchdb 应用程序

```
couchapp push http://user:pass@localhost:5984/acra-appname 
```

我有以下错误输出：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/restkit/__init__.py", line 9, in <module>
    from restkit.conn import Connection
  File "/usr/local/lib/python2.6/dist-packages/restkit/conn.py", line 14, in <module>
    from socketpool import Connector
ImportError: No module named socketpool
Traceback (most recent call last):
  File "/usr/local/bin/couchapp", line 7, in <module>
    from couchapp.dispatch import run
  File "/usr/local/lib/python2.6/dist-packages/couchapp/dispatch.py", line 10, in <module>
    import couchapp.commands as commands
  File "/usr/local/lib/python2.6/dist-packages/couchapp/commands.py", line 15, in <module>
    from couchapp import clone_app
  File "/usr/local/lib/python2.6/dist-packages/couchapp/clone_app.py", line 15, in <module>
    from couchapp.errors import AppError
  File "/usr/local/lib/python2.6/dist-packages/couchapp/errors.py", line 7, in <module>
    from restkit import ResourceError
ImportError: cannot import name ResourceError 
```

据我了解，错误是：

```
ImportError: No module named socketpool 
```

如何安装此模块或如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:46:33.377

正如 Ifthikhan 所建议的：使用包管理器（如 apt-get）安装它，然后使用 pip 安装 socketpool。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T13:10:10.937

我在安装 couchapp 时遇到了这个问题。我使用 pip 安装它，我认为它完成了，但是当我运行它时，我遇到了 ImportError 问题。结果 pip 安装没有成功，我首先需要：

```
apt-get install python-dev 
```

然后当我做了一个

```
pip install couchapp 
```

所有依赖项都已安装，并且 couchapp 运行没有问题。

# c# - MVC4动态控制器路径？

> ID：15085087
> 
> 赞同：3
> 
> 时间：2013-02-26T09:07:49.963
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我的 MVC4 项目中有一个 SiteController 类，'Site' url 工作正常，但我需要在 'Site' 之后的动态 url 部分，我需要 url 看起来像这样：

mysite.com/Site/{DYNAMICSTRING}/Users（或其他）

{DYNAMICSTRING} 可以是子站点的名称，因此控制器应检查该子站点是否确实存在于数据库中。

现在我正在使用查询字符串，但这不是我的客户想要的。

我怎样才能做到这一点？

**额外细节**

我的路由：

```
 routes.MapRoute(
                "Subdomain",                                              // Route name
                "{controller}/{action}/{dynamicString}",                           // URL with parameters
                new { controller = "Site", action = "Subdomain" }  // Parameter defaults
            ); 
```

我的控制器：

```
 public ActionResult Subdomain(string dynamicString)
    {
        return View();
    } 
```

当我导航到时，dynamicString 的值为 null：/Site/Subdomain/SomeString

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:15:31.183

您必须配置路由。例如，如果您有 Homecontroller：

```
 public class HomeController:Controller
    {
        public ActionResult Subdomain(string dynamicString)
        {
            return View();
        }
    } 
```

然后你必须配置你的路由类似的东西

```
routes.MapRoute(
            "Subdomain",                                              // Route name
            "{controller}/{action}/{dynamicString}/anyOtherParams",                           // URL with parameters
            new { controller = "Home", action = "Subdomain", dynamicString = "" }  // Parameter defaults
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:14:20.000

你可以这样做：

```
routes.MapRoute(
            name: "Default", // Route name
            url:"Site/{dynamicstring}", // URL with parameters
            defaults: new {controller = "Site", action = "Index" }   // Defaults
        ); 
```

您可以像这样继续向 url 部分添加部分

```
 url:"Site/{dynamicstring}/{anythingelse}" //  url:"Site/{dynamicstring}/{anythingelse}/{bla}/Test/{hello}/etc..." 
```

或者你也可以有一条这样的路线："

```
routes.MapRoute(
            name: "Default", // Route name
            url:"{*all}", // catch all
            defaults: new {controller = "Site", action = "Index" }   // Defaults
        ); 
```

并通过在 / 上拆分它们来获取控制器索引操作中的所有其他部分

确保将自定义路由放在默认路由之前，否则默认路由会选择它。

在您的控制器中，您会得到如下信息：

```
public ActionResult Index(string dynamicstring, string anythingelse)
    {

        return View();
    } 
```

如果您随后传入这样的网址：

> [http://www.mysite.com/Site/test.nl/jordy](http://www.mysite.com/Site/test.nl/jordy)

您的动态字符串将具有值“test.nl”，而您的任何其他内容将具有“jordy”我希望这会有所帮助

# javascript - fc-sun 的完整日历背景图像

> ID：15085090
> 
> 赞同：0
> 
> 时间：2013-02-26T09:07:57.780
> 
> 标签：javascript, jquery, css, fullcalendar

我在月视图中为星期日设置了背景图像，而且标题中的“星期日”这一天设置为相同的背景，而其他标题日期设置正确。我看到表线程的 css 也有 .fc-sun .fc-mon 等，但我不知道如何从线程中删除这些类。我怎么解决这个问题 ？

我的 fullcalendar.css 中有这个：

```
.fc-widget-header{
background-color: #900;
}

.fc-sun {
  background-image:url('../img/myImage.png');
  background-repeat:repeat-x;
  background-repeat:repeat-y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:27:08.527

将元素选择器添加到您的 css，因为“星期天”标题（th）和天体（td）具有 fc-sun 类。该解决方案应该适合您的情况。

```
td.fc-sun {
  background-image:url('../img/myImage.png');
  background-repeat:repeat-x;
  background-repeat:repeat-y;
} 
```

# ruby-on-rails - 在 has_and_belongs_to_many 关联上使用具有简单形式的 rails3-jquery-autocomplete

> ID：15085094
> 
> 赞同：1
> 
> 时间：2013-02-26T09:08:06.453
> 
> 标签：ruby-on-rails, undefined, jquery-autocomplete, simple-form, has-and-belongs-to-many

我想要一个表格，小组可以添加他们的兴趣，这个表格应该可以帮助他们自动完成。由于这是一个多对多的关系，我不明白如何实现它

```
class Group < ActiveRecord::Base
  attr_accessible :description, :name, :project_id, :interests

  before_save :get_next_available_name

  has_many :users
  belongs_to :project
  has_and_belongs_to_many :interests
end

class Interest < ActiveRecord::Base
  attr_accessible :name

  has_and_belongs_to_many :groups

end 
```

在我看来：

```
<%= simple_form_for @group do |f| %>
  <%= f.autocomplete_field :interests, autocomplete_interest_name_groups_path %>
  <%= f.submit "Interesse eintragen" %>
<% end %> 
```

当然，我输入了“rails g autocomplete:install”，我可能需要编辑路由并将其添加到 routes.rb：

```
resources :groups do
  get :autocomplete_interest_name, :on => :collection
end 
```

更新：正如 Saurabh 所建议的，我将他“自动完成：兴趣，：名称”放在控制器中，而不是模型中。

但是我现在有两个问题：首先：没有自动完成功能。第二：添加“红宝石”兴趣并提交表格后：在输入字段中写下：

```
[#<Interest id: 38, name: "ruby", created_at: "2013-02-28 09:25:53", updated_at: "2013-02-28 09:25:53">] 
```

但当然，该字段本身应该是空的。

![在此处输入图像描述](../Images/2072f7e5e3ebfdcf58009cce89163460.png) ![在此处输入图像描述](../Images/d48e8a9ebb71df76df7763c445255e36.png)

如果这个 gem 与 Rails 3.2 不兼容，有人应该告诉我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:31:09.983

在您的控制器中定义`autocomplete`并将其从模型中删除为：

```
class GroupsController < ApplicationController
  autocomplete :interest, :name
  # ...
  # ...
end 
```

更新：

根据您的问题更新，这是您现在需要做的：

**你的看法**：

```
<%= simple_form_for @group do |f| %>
  <%= f.autocomplete_field :interests, autocomplete_interest_name_groups_path %>
  <%= f.submit "Interesse eintragen" %>
<% end %> 
```

更多来自[rails3 jquery autocomplete sources](https://github.com/crowdint/rails3-jquery-autocomplete-app/blob/master/app/controllers/welcome_controller.rb)。

# perl - 加载 mod_perl.so 时出错

> ID：15085095
> 
> 赞同：2
> 
> 时间：2013-02-26T09:08:14.680
> 
> 标签：perl, apache2, mod-perl2

我已经安装了 perl-5.8.9、mod_perl-2.0.7、Emperl-2.3.0 和 httpd-2.2.22。在启动 apache 时，我收到如下错误（为了便于阅读，分为多行）：

```
httpd: Syntax error on line * of ../conf/httpd.conf:
   Cannot load ../Apache2/mod_perl.so into server:
      libperl.so: cannot open shared object file:
         No such file or directory 
```

通过这样做`ldd ../Apache2/mod_perl.so`，我得到了类似的输出

```
 linux-gate.so.1 =>  (0x00735000)
    libperl.so => not found
    libnsl.so.1 => /lib/libnsl.so.1 (0x005e5000)
    libdl.so.2 => /lib/libdl.so.2 (0x00fab000)
    libm.so.6 => /lib/libm.so.6 (0x0041f000)
    libcrypt.so.1 => /lib/libcrypt.so.1 (0x0084d000)
    libutil.so.1 => /lib/libutil.so.1 (0x00110000)
    libc.so.6 => /lib/libc.so.6 (0x00197000)
    /lib/ld-linux.so.2 (0x00163000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T19:03:39.490

[这个问题可以转移到*Unix 和 Linux* SE 上。]

您似乎安装了不完全兼容的软件包，*或者*一个或多个软件包未正确安装，*或者*安装说明缺少步骤，*或者*动态链接器默认设置不符合预期。

`libperl`是（不出所料）的一部分`perl`。在某些平台上，正常的 perl 默认构建只会创建`libperl.a`静态库，尽管可以创建动态库`libperl.so`，或两者兼而有之。有些人喜欢这种`.so`方法，尽管它可能会产生一些性能开销。

您的问题最可能的原因是：

1.  安装`perl`的只有静态 libperl.a，但是`mod_perl`是针对*动态*perl构建的`libperl.so`
2.  安装在动态链接器看不到的地方的`perl`软件包`libperl.so`

解决原因 #1 意味着找到不同的、兼容的包（或者可能是组合包）。

如果它是#2，你应该能够找到`libperl.so`（在某个地方`/usr/local/lib/perl5/5.8.9/mach/CORE/`），或者只是运行`ldd /usr/local/bin/perl`（无论新的`perl`二进制文件安装到哪里），看看它是否知道它在哪里。

**在您尝试以下建议的任何更改之前**，只需`ldconfig`以 root 身份运行，然后再试一次，以防修复它。

如果您`libperl.so`在新的 perl 安装目录下找到，那么您可以将该文件复制到您的 Apache`lib/`子目录，因为应该构建 Apache（使用 ELF `RPATH`）以将该目录包含在库搜索路径中。如果在下面找到它，`/usr/local/lib`则应修改默认链接器配置 ( `/etc/ld.so.conf`) 以包含该目录，然后刷新（`ldconfig`以 root 身份运行）。

你的平台显然是 Linux，但你没有说明包的类型和来源，或者它是否是源代码构建，所以我不能更准确......

我有点怀疑某些东西没有正确安装，因为 Apache 模块的常规位置在`modules/`子目录中，而不是直接在*ServerRoot*中。

# ios6 - 应用内购买 自动更新

> ID：15085096
> 
> 赞同：0
> 
> 时间：2013-02-26T09:08:17.410
> 
> 标签：ios6, in-app-purchase

您的服务器必须跟踪购买并允许用户恢复购买的订阅到单个用户拥有的所有 iOS 设备我还需要跟踪购买并允许用户恢复购买的订阅到单个用户拥有的所有 iOS 设备。但是，我不知道有任何机制可以让我从应用程序中识别单个用户拥有的所有 iOS 设备。我什至不知道有任何机制可以从应用程序中识别用户使用的 AppleID。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:30:47.170

如果您使用的是自动续订订阅，您可以使用商店工具包的恢复功能。如果您使用不可更新，您必须允许用户在他们的设备上共享他们的订阅。有几种方法可以做到这一点。如果您拥有服务器，则可以通过购买生成密钥。将一个数字与此键相关联，该数字指示用户恢复到另一台设备的次数（例如 5 次）。当用户随后在另一台设备上输入此密钥时，您会减少此数字。因此，您必须在您的应用程序中添加一个“共享”按钮，该按钮将为用户提供此密钥。您需要一个“解锁”按钮，用户可以在其中输入此代码。如果您有兴趣，我还可以为您找到一种不需要服务器的方法（但这不太安全）。

希望这可以帮助。

编辑：

抱歉，刚刚注意到您在谈论自动更新：

[http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKPaymentQueue_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKPaymentQueue_Class/Reference/Reference.html)

restoreCompletedTransactions 是您所追求的

# microsoft-metro - winjs.xhr 和 winjs 中的函数调用

> ID：15085102
> 
> 赞同：1
> 
> 时间：2013-02-26T09:08:40.607
> 
> 标签：microsoft-metro, windows-store-apps, winjs

**场景：**我正在尝试调用以 json 格式返回结果的 web 服务，逻辑应该非常简单。

我在添加一个 then 函数中调用一个 webservice url`WinJS.xhr()`来处理结果，这里我试图将它绑定到一个列表。

我正在使用以下内容，但我没有得到任何显示我在这里做错了什么？

有人可以告诉我如何从函数中调用 winjs.xhr() 并返回一些我可以在下面尝试绑定的对象吗？

```
 function getData() {
        return WinJS.xhr({ url: "http://search.twitter.com/search.json?q=%23windows8&rpp=10" })
    }    
    function myFunc() {
        getData().then(function (xhr) {
            var jsondata = JSON.parse(xhr.responseText)
            return jsondata;
            // ...do something with the data when it arrives...
        }, function (err) {
            // ...do something with the error
        });
    }     

 var dataList = new WinJS.Binding.List(myFunc());

    //var dataList = new WinJS.Binding.List(dataArray);
    var publicMembers =
        {
            itemList: dataList
        };
    WinJS.Namespace.define("DataExample", publicMembers); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:03:48.930

ctor for`WinJS.Binding.List`接受列表或数组作为列表的初始内容。您`myFunc()`将一无所获。您可以使用设置一个空列表

```
var dataList = new WinJS.Binding.List() 
```

并像现在一样导出它。然后，在声明`myFunc()`下方`dataList`，您可以将项目添加到列表中。例如，假设`jsondata`解析成一个数组：

```
function myFunc() {
    getData().then(function (xhr) {
        var jsondata = JSON.parse(xhr.responseText)
        jsondata.forEach(function(entry) { dataList.push(entry); });
    }, function (err) {
        // ...do something with the error
    });
} 
```

编辑：我还假设您已经绑定`dataList.dataSource`到`itemDataSource`a`WinJS.UI.ListView`并设置了匹配的`itemTemplate`属性或渲染函数。

# spring - Spring 3.1 找不到 css & js

> ID：15085103
> 
> 赞同：0
> 
> 时间：2013-02-26T09:08:39.947
> 
> 标签：spring, jakarta-ee

我不是很明白，因为在我的网站应用程序中，没有找到js和css文件。例如，在源代码中，url 转到 localhost:8080/dashboard/css/bootstrap.min.css。

这是初始化程序：

```
@Override
public void onStartup(ServletContext servletContext) throws ServletException {
    XmlWebApplicationContext appContext = new XmlWebApplicationContext();
    appContext.getEnvironment().setActiveProfiles("resthub-mongodb", "resthub-web-server");
    String[] locations = { "classpath*:resthubContext.xml", "classpath*:applicationContext.xml" };
    appContext.setConfigLocations(locations);
    ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(appContext));
    dispatcher.setLoadOnStartup(1);
    dispatcher.addMapping("/");  
    servletContext.addListener(new ContextLoaderListener(appContext));
} 
```

和配置

```
@Configuration
@ComponentScan("org.resthub.dashboard")
@EnableWebMvc
public class WebAppConfig {

@Bean
public InternalResourceViewResolver setupViewResolver() {
   InternalResourceViewResolver resolver = new InternalResourceViewResolver();
   resolver.setPrefix("/WEB-INF/views/");
   resolver.setSuffix(".jsp");
   return resolver;
}

} 
```

和 applicationContext.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/mvc 
                            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd 
                           http://www.springframework.org/schema/data/mongo 
                           http://www.springframework.org/schema/data/mongo/spring-mongo.xsd">

    <context:component-scan base-package="org.resthub.dashboard" />
    <mongo:repositories base-package="org.resthub.dashboard.repository" />

    <mvc:annotation-driven />

</beans> 
```

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:40:19.497

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

需要在您的 *-servlet.xml 中添加以加载所有静态资源。请参阅[Spring Documentation](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-static-resources)解释相同。

# javascript - 如何获取 div 的元素 id 和 appendChild html 到它

> ID：15085104
> 
> 赞同：0
> 
> 时间：2013-02-26T09:08:41.000
> 
> 标签：javascript

我想获取在`div`其中运行的使用 JavaScript的 ID `div`。我想`appendChild()`html 到那个`div`。

例如：

```
<div id="randomnumber">
<script type="text/javascript"> 
var htmlcontent = "abcdf";
//need the id of div holder
var thisDIVid= ?????;
// appendChild to this div
?????.appendChild(htmlcontent);
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:09:22.353

如果您知道您的 div 在结构中的位置，您可以像这样访问它：

```
var mainDiv = document.getElementById('mainDiv');
yourDiv = mainDiv.getElementsByTagName('div')[number]; 
```

number 是结构中的位置

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-26T09:12:55.843

`document.getElementyById("yourDivId");`将找到具有唯一 ID 的任何 div。

```
var div = document.getElementyById("yourDivId");
div.appendChild("yourContent"); 
```

# java - Textattribute“跟踪”的限制/最大值是多少？

> ID：15085109
> 
> 赞同：1
> 
> 时间：2013-02-26T09:08:44.893
> 
> 标签：java, fonts

示例代码：

```
 public void paint( Graphics g ) {
                    super.paint( g );
                    Map<TextAttribute, Object> attributes = new HashMap<TextAttribute, Object>();
                    attributes.put( TextAttribute.TRACKING, 10 );
                    g.setFont( new Font( "Arial", 0, 10 ).deriveFont( attributes ) );

                    g.drawString( "bonus", 100, 100 );
                } 
```

如果我增加 Tracking > 10 的值，那么它将被忽略。跟踪的限制是多少？*Apidocs*只说值在 -0.1 和 0.3 之间是可取的，但限制是多少？

为什么我想要 Tracking>10？该软件使用 Java 呈现我们客户的 PDF。解析器将 PDf 的字符间距转换为 TRACKING。在测试时，我遇到了一些使用这种非凡间距的示例 PDF（19！）。为了为超出限制的情况构建解决方法，我需要 TRACKING-Attribute 的最小值/最大值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:15:22.417

> 跟踪值通常在 -0.1 和 0.3 之间；超出此范围的值通常是不可取的。

另请阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/awt/font/TextAttribute.html#TRACKING)

# php - php 如何不显示标签之间的文本 <> // && ^^ %% $$ ## @@ [] **

> ID：15085112
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:08:50.883
> 
> 标签：php, mysql, echo, between

我在 mysql $comments 中有文本，其中包含一些标签：

```
echo $comments; 

//result is this

#John# Have a birthday <2.22.2013> [14-00] party /Club/ *Victoria*? 
```

我需要一个 php 代码来不显示所有标签并包含文本，如下所示：

```
Have a birthday party ? 
```

我使用的这段代码，但它隐藏的只是文本包含在 [] 之间，我也想隐藏其他标签中的文本 <>//##$$**()

```
 function replaceTags($startPoint, $endPoint, $newText, $source) {
                return preg_replace('#('.preg_quote($startPoint).')(.*)('.preg_quote($endPoint).')#si', '$1'.$newText.'$3', $source);
                }

                $source= $comments;
                $startPoint='[';
                $endPoint=']';
                $newText='';
                echo replaceTags($startPoint, $endPoint, $newText, $source); 
```

我必须在这里改变什么？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:12:29.123

您可以使用正则表达式删除不需要的部分：

```
preg_replace('@#[^#]+#|<[^>]+>|\[[^\]]+]|/[^/]+/|*[^*]+*@', '', $foo); 
```

通过匹配您的分隔符和文本，它们都以类似的方式工作，例如

```
*[^*]+* 
```

可以分解成

```
*      the starting *
[^*]   any character that is not a *
[^*]+  any run of non-* characters
*      the ending * 
```

该模式对您的所有定界符对重复，并被放入一个大型正则表达式（带有 alternation `|`），基本上说“用任何内容替换这些模式中的任何一个”。

# c++ - 无法在 C++ 中跟踪 Visual Studio 入口点

> ID：15085114
> 
> 赞同：0
> 
> 时间：2013-02-26T09:09:09.613
> 
> 标签：c++, visual-studio-2010

在我的项目中，我无法从条目发生的位置跟踪到项目。当我查看调用堆栈时，它给了雇佣关系

`mfc100d.dll!_DllMainCRTStartup(void* hDllHandle, unsigned long dwReason, void *lpreserved) ntdll.dll!77328968()
[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] ntdll.dll!77335c11()
ntdll.dll!7733500a()
ntdll.dll!773335e9()`

然后代码跳转到 `CWinApp::InitInstance()`. 但它会如何发展`!_DllMainCRTStartup`对我来说是一项艰巨的任务。我从昨天开始尝试，但我找不到它。

注意：在设置中：

`Entry point is blank`

`No Entry: No`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:20:53.663

您可以加载 Microsoft 调试符号以通过两种方式解析`[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll]`并查看实际堆栈：

1.  在调用堆栈上右键单击一个条目，选择`Symbol Settings...`然后按`Load Symbols from Microsoft symbols servers`
2.  `Tools -> Options -> Debugging -> Symbols`将引导您进入相同的对话框并再次按下`Load Symbols from Microsoft symbols servers`

这至少应该解决堆栈并显示系统调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:00:41.303

`main()`对我来说，在构造全局对象（即在顶层声明）时，属于主线程并且不返回函数的堆栈跟踪听起来像是出了问题。您可能想对此进行调查。

即，该`DllMainCRTStartup`函数可能直接从您的 C++ 运行时支持库中调用。

# c# - 我需要担心阻塞任务吗？

> ID：15085115
> 
> 赞同：3
> 
> 时间：2013-02-26T09:09:10.203
> 
> 标签：c#, .net, io, task-parallel-library, task

我有多少需要担心.NET 中的阻塞任务？即.NET 任务调度程序如何处理线程池中的线程阻塞和超额订阅？

例如，如果我在一个任务中有一些 IO，我应该总是用`LongRunning`提示创建它吗？或者任务调度器启发式处理它更好吗？在 C++ 中有一个`Oversubscribe`可以完美运行的提示，但我在 .NET 中没有找到任何等效项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:18:22.163

如果您想要最高性能的代码，您确实需要担心它。

处理它的最佳方法是使用[.Net 4.5“等待”风格的 I/O](http://msdn.microsoft.com/en-us/library/kztecsys.aspx)。

如果您没有 .Net 4.5，则必须使用[较旧的 I/O 样式](http://msdn.microsoft.com/en-us/library/kztecsys%28v=vs.100%29.aspx)（效果一样好，但更难使用）。

这些文章中描述的非阻塞 I/O 是迄今为止使用多线程执行 I/O 的最佳方式。

如果您不使用 I/O，那么您仍然可以从这些文章中学到很多东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:21:05.603

ThreadPool 确实会检测到它的一个线程何时阻塞，并提示它向池中添加另一个线程。所以，如果你阻塞很多，性能很可能不会很糟糕，因为 ThreadPool 会试图让你的 CPU 内核保持忙碌。

但是有许多阻塞的线程可能是一个性能问题，因为它会增加内存消耗并可能导致更多的上下文切换。

此外，这种行为可能会导致 IO 性能下降。使用旋转磁盘 (HDD)，同时访问多个文件会导致大量搜索，这会极大地影响性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:26:22.340

`LongRunning`向 TPL 发出*不*使用线程池线程的信号——它创建一个非线程池线程来满足请求（例如`new Thread(...)`）。这*不是*您应该为 IO 做的事情。您应该使用异步 IO。例如：

```
using(var response = (HttpWebResponse)await WebRequest.Create(url).GetResponseAsync())
    return response.StatusCode == HttpStatusCode.OK; 
```

这样可以确保尽可能使用重叠的 IO——它使用 IO 线程池。

如果您想使用带有旧版 APM API 的任务，可以使用 FromAsync：

```
Task<int> bytesRead = Task<int>.Factory.FromAsync( 
    stream.BeginRead, stream.EndRead, buffer, 0, buffer.Length, null);
await bytesRead; 
```

如果你需要处理遗留的事件异步 API，你可以使用 TaskCompletionSource：

```
TaskCompletionSource<string[]> tcs = new TaskCompletionSource<string[]>();
WebClient[] webClients = new WebClient[urls.Length];
object m_lock = new object();
int count = 0;
List<string> results = new List<string>();

for (int i = 0; i < urls.Length; i++)
{
    webClients[i] = new WebClient();

    // Specify the callback for the DownloadStringCompleted 
    // event that will be raised by this WebClient instance.
    webClients[i].DownloadStringCompleted += (obj, args) =>
    {
        // Argument validation and exception handling omitted for brevity. 

        // Split the string into an array of words, 
        // then count the number of elements that match 
        // the search term. 
        string[] words = args.Result.Split(' ');
        string NAME = name.ToUpper();
        int nameCount = (from word in words.AsParallel()
                         where word.ToUpper().Contains(NAME)
                         select word)
                        .Count();

        // Associate the results with the url, and add new string to the array that  
        // the underlying Task object will return in its Result property.
        results.Add(String.Format("{0} has {1} instances of {2}", args.UserState, nameCount, name));

        // If this is the last async operation to complete, 
        // then set the Result property on the underlying Task. 
        lock (m_lock)
        {
            count++;
            if (count == urls.Length)
            {
                tcs.TrySetResult(results.ToArray());
            }
        }
    };

    // Call DownloadStringAsync for each URL.
    Uri address = null;
    address = new Uri(urls[i]);
    webClients[i].DownloadStringAsync(address, address);

} // end for 

await tcs.Task; 
```

# ios - iOS 导航控制器 pushViewController 不起作用

> ID：15085116
> 
> 赞同：0
> 
> 时间：2013-02-26T09:09:14.753
> 
> 标签：ios, objective-c, cocoa-touch, uinavigationcontroller, storyboard

我有一个带有`UINavigationController`. 导航控制器的根视图控制器称为 rootViewController。

我正在尝试以编程方式将视图控制器（取决于其他条件）更改为另一个名为`loginViewController`.

我正在尝试在`viewDidLoad`rootViewController 中执行此操作，如下所示：

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    loginViewController *viewController = [[loginViewController alloc] init];

    [self.navigationController pushViewController:viewController animated:YES];

} 
```

我没有收到任何错误，但它不起作用。

它只是使用顶部导航返回按钮加载导航控制器，但屏幕的其余部分是黑色的。就像它没有加载任何视图控制器一样。

我试图弄清楚我做错了什么。

对此的任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:21:52.180

首先在情节提要中添加 loginViewController 类，并将 ViewController 类连接到 loginViewController 类，并将标识符名称命名为“identifier_Name”。

```
- (void)viewDidLoad
{

    [super viewDidLoad];
    [self performSegueWithIdentifier:@"identifier_Name" sender:nil];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"identifier_Name"])
    {
        loginViewController *viewController = [segue destinationViewController];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:20:33.860

如果您正在使用情节提要，请在情节提要中创建登录视图，使用 segue 将您的 rootVC 链接到 loginVC，选择一个标识符（例如：“goToLogin”）。然后进入登录视图，并使用：

```
[self performSegueWithIdentifier:@"goToLogin" sender:self]; 
```

# python - PrettyPrint python 成一个字符串，而不是标准输出

> ID：15085118
> 
> 赞同：39
> 
> 时间：2013-02-26T09:09:15.513
> 
> 标签：python

我想使用 prettyprint 打印出字典，但打印成字符串而不是控制台。该字符串将被传递给其他函数。

我知道我可以使用“stream”参数来指定文件而不是 sys.out，但我想要一个字符串。

我怎么做？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-02-26T09:17:43.167

您应该简单地从 pprint 模块调用 pformat 函数：

```
import pprint
s = pprint.pformat(aDict) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-26T09:25:45.237

我有时会`json`为此使用该模块：

```
In [1]: import json

In [2]: d = {'a':1, 'b':2, 'c':{'a':1}}

In [3]: s = json.dumps(d, indent=4)

In [4]: s
Out[4]: '{\n    "a": 1, \n    "c": {\n        "a": 1\n    }, \n    "b": 2\n}'

In [5]: print s
{
    "a": 1, 
    "c": {
        "a": 1
    }, 
    "b": 2
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:12:11.740

只需使用[`StringIO`模块](http://docs.python.org/2/library/stringio.html)：

```
import StringIO

output = StringIO.StringIO() 
```

现在您可以`output`作为流传递给`prettyprint`.

# gcc - 为什么使用 CodeSourcery gcc 编译时 TI 启动件示例无法正确清除 BSS 段

> ID：15085119
> 
> 赞同：3
> 
> 时间：2013-02-26T09:09:16.140
> 
> 标签：gcc, arm, codesourcery

我在运行 TI AM3359arm 的 beaglebone 时遇到了严重的问题。我正在使用代码源来编译代码。我尝试编译其中一个名为 enet_lwip 的示例，它使用轻量级 IP (lwip) 来提供 http 服务器。

应用程序在某个时间点崩溃。通过调试我发现，正是这段代码负责它：

```
unsigned int lwIPInit(LWIP_IF *lwipIf)
{

    struct ip_addr ip_addr;

    struct ip_addr net_mask;

    struct ip_addr gw_addr;

    unsigned int *ipAddrPtr;

    static unsigned int lwipInitFlag = 0;

    unsigned int ifNum;

    unsigned int temp;

    /* do lwip library init only once */
    if(0 == lwipInitFlag)
    {
        lwip_init();
    } 
```

发生了一件*非常有趣的事情*：人们会期望，*lwipInitFlag*被初始化为*0*，因此函数调用 lwip_init();

好吧，即使是第一次调用 lwIPInit 函数时也不会发生这种情况。原因是变量*lwipInitFlag 未设置为 0*。

我想知道这是为什么。如果这样的初始化出现在代码中，编译器应该生成序列以使其为空。但可能是因为它前面有*静态*修饰符，所以它保持“原样”。为什么？

lwipInitFlag 位于 .bss 链接器部分，它指向 DDR 内存。我如何保证这样的静态分配会被初始化？

目前，我将破解 lwIP 的代码以查看它是否有效，但这只是对我的警告，库中的某处可能还有另一个静态声明的变量，这些变量没有被初始化。

任何提示如何解决这个问题？

* * *

对此添加更多信息：在您富有成效的提示之后，我认为我在它应该如何工作方面更加混乱。所以：确实，我不调用/链接 crt*.o。另一方面，TI starterware 平台包含初始化 asm 源，它会清除 BSS。它在地址 _bss_start 和 _bss_end 之间进行。

在查看链接器脚本时，一切看起来都很普通：

```
SECTIONS
{

        . = 0x80000000;
        . = ALIGN(4);
        .startcode     :
        {
               *init.o      (.text)
        }

        . = ALIGN(4);
        .text      :
        {
                *(.text)
        }

        . = ALIGN(4);

        .data :
        {
                *(.data)
        }

        . = ALIGN(4);

        _bss_start = .;
        .bss :
        {
                *(.bss)
        }
        . = ALIGN(4);

        _bss_end = .;

        _stack = 0x87FFFFF8;
} 
```

所以 _bss_start 是BSS 块*之前的地址，而 _bss_end 是块**的末尾*。**问题在于 Codesourcery 生成的地图**。

在生成的地图文件中查看 BSS 的结尾时，我可以看到：

```
 COMMON         0x80088f0c      0x200 ../binary/armv7a/gcc/am335x/system_config/Debug/libsystem_config.a(interrupt.o)
                0x80088f0c                fnRAMVectors
                0x8008910c                . = ALIGN (0x4)
                0x8008910c                _bss_end = .
                0x87fffff8                _stack = 0x87fffff8
LOAD ../binary/armv7a/gcc/am335x/drivers/Debug/libdrivers.a
LOAD ../binary/armv7a/gcc/utils/Debug/libutils.a
LOAD ../binary/armv7a/gcc/am335x/beaglebone/platform/Debug/libplatform.a
LOAD ../binary/armv7a/gcc/am335x/system_config/Debug/libsystem_config.a
LOAD /opt/CodeSourcery/arm-none-eabi/lib//libc.a
LOAD /opt/CodeSourcery/lib/gcc/arm-none-eabi/4.5.2//libgcc.a
LOAD ../binary/armv7a/gcc/am335x/drivers/Debug/libdrivers.a
LOAD ../binary/armv7a/gcc/utils/Debug/libutils.a
LOAD ../binary/armv7a/gcc/am335x/beaglebone/platform/Debug/libplatform.a
LOAD ../binary/armv7a/gcc/am335x/system_config/Debug/libsystem_config.a
LOAD /opt/CodeSourcery/arm-none-eabi/lib//libc.a
LOAD /opt/CodeSourcery/lib/gcc/arm-none-eabi/4.5.2//libgcc.a
OUTPUT(Debug/bbdidt.out elf32-littlearm)

.bss.pageTable  0x8008c000     0x4000
 .bss.pageTable
                0x8008c000     0x4000 Debug/enetLwip.o

.bss.ram        0x80090000        0x4
 .bss.ram       0x80090000        0x4 Debug/lwiplib.o 
```

显然有“东西”。**在 _bss_end 之后还有另一个 BSS 部分**，其中包含很多预计会被清零的东西，但它没有被清零，因为清零在 _bss_end 给出的地址处完成。

这样做的可能原因是，**pageTable**是静态声明的，并且需要具有 16kiB 的边界地址：

```
static volatile unsigned int pageTable[4*1024] __attribute__((aligned(16*1024))); 
```

因此，由于最后一个链接器声明的 BSS 段和 pageTable 之间存在间隙，它会将 _bss_end 放在 bss 段的中间。

现在的问题是，如何告诉链接器（我正在使用这个 arm-none-eabi-ld）_bss_end 应该真的在 BSS 的末尾而不是在中间的某个地方？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:30:09.603

**没有**初始化静态变量的事实让我想知道：你的启动代码是怎么来的？执行初始化需要此代码。

请参阅[http://doc.ironwoodlabs.com/arm-arm-none-eabi/html/getting-started/sec-cs3-startup.html](http://doc.ironwoodlabs.com/arm-arm-none-eabi/html/getting-started/sec-cs3-startup.html) - 第 5.2.3 节，其中说：

* * *

C 启动函数声明如下：

```
void __cs3_start_c (void) __attribute__ ((noreturn)); 
```

该函数执行以下步骤：

*   通过复制其内容来初始化所有类似 .data 的部分。例如，ROM 配置文件链接描述文件使用此机制从只读数据程序映像初始化 RAM 中的可写数据。
*   ... ETC

* * *

听起来您可能缺少该代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:01:10.047

感谢所有这些评论。对我来说，这几乎是一项侦探工作。最后，我更改了链接器脚本以获得如下内容：

```
SECTIONS
{

        . = 0x80000000;
        . = ALIGN(4);
        .startcode     :
        {
               *init.o      (.text)
        }

        . = ALIGN(4);
        .text      :
        {
                *(.text)
        }

        . = ALIGN(4);

        .data :
        {
                *(.data)
        }

        . = ALIGN(4);

        _bss_start = .;
        .bss :
        {
                *(.bss)
                *(COMMON)
                *(.bss.*)
        }
        . = ALIGN(4);

        _bss_end = .;

        _stack = 0x87FFFFF8;
} 
```

**所以我基本上强制链接器将所有以COMMON**和**.bss**开头的子段包含到 BSS 段中。.

这显然解决了这个问题，因为链接器现在生成了正确的映射，它将 _bss_end 指针真正放置到 BSS 部分的最后地址。

所以我的软件现在可以正常运行，让 PHY 运行。我仍然无法获取 DHCP，但我想这是未初始化的 .data 段的问题。LwIP 在某些地方使用静态分配作为

```
static u32_t xid = 0xABCD0000; 
```

这将进入 .data 段，但显然它没有被初始化，因此我无法获得任何 DHCP 答案......但这是另一个故事

谢谢大家

# tfs - TFS：撤消从“合并，分支，编辑”到“合并，分支”的签出

> ID：15085121
> 
> 赞同：0
> 
> 时间：2013-02-26T09:09:21.007
> 
> 标签：tfs

我有以下情况：

*   我在 TFS 的一个开发分支中的解决方案中创建了一些新项目
*   我现在将它们合并到主分支中。
*   建筑师有想法将两个新模块合并为一个。
*   我已经移动了代码文件
*   项目文件已在合并中更改。

这些文件的形式有待更改`merge, branch, edit`。我不想制作这个文件`merge, branch, delete`，但 TFS 不会这样做，因为该文件有待处理的更改。`edit`是否可以在不撤消的情况下强制删除或撤消`merge, branch`？

我不想再次尝试合并并合并来自两个搁置集的文件...是否有可能修改挂起更改的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:47:52.277

不，TFS 不支持。

您可以“撤消”该文件，而只是挂起删除。

作为最佳实践，您不应该将更改作为合并的一部分，您应该尽可能少地解决冲突并使其构建（有时甚至不构建），然后在后续检查中进行所需的更改 -在。这使得在版本控制历史中更容易看到在什么时候进行了哪些更改 - 我很少查看更改的合并是否与之前的编辑有任何不同。

# java - 带有 AndEngine 的 Java 哈希表

> ID：15085126
> 
> 赞同：1
> 
> 时间：2013-02-26T09:09:30.790
> 
> 标签：java, android, andengine

我一直在用 AndEngine 做一些 android 编程，并在 Hashtables 上遇到了一些奇怪的问题。

基本上如果我这样做：

```
 BitmapTextureAtlas m_textureAtlas = new BitmapTextureAtlas(p_baseActivity.getTextureManager(), 1024, 1024, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    TextureRegion texture1 = BitmapTextureAtlasTextureRegionFactory.createFromAsset(m_textureAtlas, p_baseActivity, "Chrysanthemum.jpg", 0, 0);

    m_textureAtlas.load();

    Sprite m_sprite1 = new Sprite(0, 0, texture1, p_baseActivity.getEngine().getVertexBufferObjectManager());
    this.attachChild(m_sprite1); 
```

一切话都好。但如果我这样做：

```
 BitmapTextureAtlas m_textureAtlas = new BitmapTextureAtlas(p_baseActivity.getTextureManager(), 1024, 1024, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    Hashtable<String, TextureRegion> test = new Hashtable<String, TextureRegion>();
    TextureRegion texture1 = test.put("1", BitmapTextureAtlasTextureRegionFactory.createFromAsset(m_textureAtlas, p_baseActivity, "Chrysanthemum.jpg", 0, 0));

    m_textureAtlas.load();

    Sprite m_sprite1 = new Sprite(0, 0, texture1, p_baseActivity.getEngine().getVertexBufferObjectManager());
    this.attachChild(m_sprite1); 
```

它（图像）闪烁并且尺寸都是错误的。现在我可以为这个项目做第一组代码，但我不确定我是否做错了什么，或者我应该完全避免 put() 的返回值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:14:33.427

`Hashtable#put`返回此哈希表中指定键的前一个值，如果没有，则返回 null。在您的情况下，它为空，因为您刚刚创建了实例。

即使从示例中很难理解为什么需要哈希表，这也将起作用。

```
 Hashtable<String, TextureRegion> test = new Hashtable<String, TextureRegion>();
    TextureRegion texture1 = BitmapTextureAtlasTextureRegionFactory.createFromAsset(m_textureAtlas, p_baseActivity, "Chrysanthemum.jpg", 0, 0);
    test.put("1",  texture1); 
```

# objective-c - 使用 ELCImagePickerController 选择图像

> ID：15085127
> 
> 赞同：0
> 
> 时间：2013-02-26T09:09:34.953
> 
> 标签：objective-c

我正在尝试使用`ELCImagePickerController`，它可以工作，但我有一些我想改变的东西。

1.  我希望它立即向我显示主专辑中的图像矩阵，而无需选择专辑和其他东西。只需显示一个带有`done`按钮的矩阵。现在它可以让你先选择一张专辑。

2.  我不明白挑选的图像到底保存在哪里？

3.  如何更改按钮`cancel`和`done`图形？

这就是我添加它的方式（到 cocos2d 场景）

```
 albumController = [[ELCAlbumPickerController alloc] initWithNibName:@"ELCAlbumPickerController" bundle:[NSBundle mainBundle]];
       elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
       [albumController setParent:elcPicker];
       [elcPicker setDelegate:self];
       [[[CCDirector sharedDirector] view] addSubview:elcPicker.view]; 
```

这是完成按钮：

```
- (void)elcImagePickerController:(ELCImagePickerController *)picker didFinishPickingMediaWithInfo:(NSArray *)info

{
    //[self removeFromParentAndCleanup:YES];

    for (UIView *v in [scrollview subviews])
    {
        [v removeFromSuperview];
    }

    CGRect workingFrame = scrollview.frame;
    workingFrame.origin.x = 0;

    for(NSDictionary *dict in info)
    {

        UIImageView *imageview = [[UIImageView alloc] initWithImage:[dict objectForKey:UIImagePickerControllerOriginalImage]];
        [imageview setContentMode:UIViewContentModeScaleAspectFit];
        imageview.frame = workingFrame;

        [scrollview addSubview:imageview];
        [imageview release];

        workingFrame.origin.x = workingFrame.origin.x + workingFrame.size.width;
    }

    [scrollview setPagingEnabled:YES];
    [scrollview setContentSize:CGSizeMake(workingFrame.origin.x, workingFrame.size.height)];
} 
```

# android - 如何处理多个选项卡、EditText 并保存到数据库？

> ID：15085128
> 
> 赞同：0
> 
> 时间：2013-02-26T09:09:39.040
> 
> 标签：android, sqlite, android-fragments

我正在创建一个现金销售应用程序，我将在其中实现 4 个选项卡。从第一个选项卡用户将从客户列表中选择客户，第二个选项卡从项目列表中选择项目，第三个选项卡在 7 中设置付款详细信息，第四个选项卡`EditText`查看草稿并确认保存在 SQLite 中。我有几个问题：

1.  对于选项卡，我是否应该首先通过如下扩展来创建选项卡容器`FragmentActivity`：

    ```
    public class CashSales extends FragmentActivity {

        private FragmentTabHost mTabHost;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.cash_sales_tab);
            mTabHost = (FragmentTabHost) findViewById(android.R.id.tabhost);
            mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

            mTabHost.addTab(mTabHost.newTabSpec("customer").setIndicator("customer"),
                    CustomerSelect.class, null);
            mTabHost.addTab(mTabHost.newTabSpec("item").setIndicator("item"),
                    ItemSelect.class, null);
            mTabHost.addTab(mTabHost.newTabSpec("payment").setIndicator("payment"),
                    SetPayment.class, null);
            mTabHost.addTab(mTabHost.newTabSpec("payment").setIndicator("payment"),
                    DraftViewAndSave.class, null);
        }
    } 
    ```

2.  我应该为每个活动创建不同的类吗？`CustomerSelect`等`ItemSelect`？如果需要创建不同的类，应该从`Fragment`类还是`FragmentActivity`类扩展？

3.  当用户从第一个选项卡转到第二个选项卡时，我如何记住数据？我应该使用 Session 并最终将数据从会话保存到数据库吗？

伙计们，我是 Android 新手。请帮助我或发送任何示例链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:58:04.963

我已经实现了同样的事情，所以我分享我的想法。

```
For tab, should I create a tab container first by extending FragmentActivity 
```

您应该创建一个扩展`FragmentActivity`. 而是使用我使用的选项卡`ViewPager`和自定义选项卡，`FragmentPagerAdapter`其中包含您的四个不同`Fragnment`（在您的情况下为 CustomerSelect、ItemSelect 等）并在滑动时您可以将数据保存在`Bundle`Fragments 中，然后从您的 FragmentActivity 调用一个方法以从您的类`public`中获取`Bundle`对象`fragment`

`Should I create different classes for each of the activities like CustomerSelect, ItemSelect etc?`

是的你应该。

`How can I memorize the data when user will go from 1st tab to 2nd tab? Should I use Session and finally save data from session to database?`

如上所述，您可以将数据保存在 bundle 对象中，然后在 FragmentActivity 中，您可以在方法中调用 save 方法，`onPageSelected`例如 .

```
private Bundle firstFragmentData;

  mPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int arg0) {

                switch (arg0) {
                case 1:

                    fragment1 = (MyFirstFragment) getSupportFragmentManager()
                            .findFragmentByTag(
                                    "android:switcher:" + R.id.pager + ":"
                                            + (arg0 - 1));
                    firstFragmentData = fragment1.SaveDatainFragment1();

                    break; 
```

实际上，您需要为`getters`从主要 FragmentActivity 中的不同片段中获得的所有捆绑对象设置

```
public Bundle getFirstFragmentData() {
     return firstFragmentData;  
 } 
```

现在在你的任何片段中，你可以得到任何这样的片段数据..

```
Bundle firstFragmentData = ((MainFragmentActivity) getActivity())
                        .getFirstFragmentData(); // here you got the bundle 
```

我希望这有帮助。

# extjs - 如何重新加载 Ext.Window 的内容

> ID：15085133
> 
> 赞同：0
> 
> 时间：2013-02-26T09:09:57.467
> 
> 标签：extjs, extjs3

我里面有一个窗口和一个数据视图-

```
if (!win) {
    var dataview = new Ext.DataView({

    });    
    var win = new Ext.Window({
        ...
        ...
        items: dataview 
    });
    this.win=win;
}

var dview = this.win.items.itemAt(0);
dview.title = 'My view'; 
this.win.show(); 
```

但是，标题在显示窗口时第一次不显示，但在第二次运行时显示。我正在考虑在显示之前重新加载窗口。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:15:04.760

```
Ext.define('PowerTrainCopy', {
    extend: 'Ext.Window',
    id: 'copyPTWin',
    height:450,
    width: 1110,
    modal:true,
    title: 'Copy Powertrain',
    //plain: true,
    border: true,
    resizable: true,
    draggable: true,
    closable: true,
    buttonAlign: 'center',
    items: []
});

copyPTWin = Ext.create('PowerTrainCopy');
copyPTWin.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:22:09.560

在您可以使用的项目中：

```
xtype: 'dataview',
title: '', 
```

# sql - 如何加快我的简单 sql 查询

> ID：15085134
> 
> 赞同：1
> 
> 时间：2013-02-26T09:10:00.070
> 
> 标签：sql, sql-subselect

```
select id,firstname,lastname,email,country,portal,language 
from totaluser 
where userid in 
    (select user from (select user, shipping / NULLIF(goodsvalue,0) as difference 
    from shipment 
    where user in 
        (select user 
        from (select user, count(*) as shipcount 
        from shipment 
            where user in 
            (select user from shipment 
            where status in ('3','5') 
            and createdtime between '2012-01-01' 
            and '2013-02-22' group by user) 
            and status in ('3','5') group by user) 
            as a 
        where status in ('3','5') 
        and shipcount=1)) 
    as b 
    where difference > 2.5); 
```

我知道这是一个非常简单的语句，它可以立即在我的测试服务器中运行，但是在我的生产服务器中运行需要很长时间。我应该如何改变它以加快速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:06:34.920

您的查询看起来很混乱。如果我理解正确，它会这样做：

```
SELECT id,firstname,lastname,email,country,portal,language FROM totaluser LEFT JOIN
(SELECT user,COUNT(*) AS shipcount FROM shipment
 WHERE
    createdtime BETWEEN '2012-01-01' AND '2013-02-22' AND
    status IN ('3','5') AND
    shipping / NULLIF(goodsvalue,0) > 2.5
    GROUP BY user) AS condid
ON totaluser.id=condid.user
WHERE condid.shipcount = 1; 
```

（你可以用[这个小提琴](http://sqlfiddle.com/#!2/068b3/1)来测试我是否正确）

我建议您使用[CREATE INDEX](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)`user`为上的列`shipment`建立索引，并且通常还为 where 子句（id、status 和 createdtime）中涉及的任何其他列创建索引。这应该会加快大表上的选择查询（但会减慢写入速度，因此如果您的应用程序是写入密集型的，则必须找到折衷方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:33:20.607

试试这个查询

```
select tu.id, tu.firstname, tu.lastname, tu.email, tu.country, tu.portal, tu.language 
from totaluser tu, 
(select user 
     from shipment 
     where status in ('3','5') 
     and createdtime between '2012-01-01' 
     and '2013-02-22' and status in ('3','5')
     group by user 
     HAVING count(*) = 1 AND shipping / NULLIF(goodsvalue,0) > 2.5) s
where tu.userid = s.user; 
```

我试图删除您从发货表中创建的子查询嵌套，并创建了一个与 totaluser 表连接的对象集合。

# android - eclipse中的GStreamer无法解决错误

> ID：15085135
> 
> 赞同：1
> 
> 时间：2013-02-26T09:10:08.160
> 
> 标签：android, eclipse, gstreamer

我已经从 eclipse 的 gst-sdk 文件夹中导入了教程。但即使在添加本机支持之后，我仍然无法解决导入到 gstreamer 的错误。该错误基本上是make.exe已停止工作。因此，eclipse关闭。所以，我认为根本问题发生在添加原生支持的阶段。仅在那之后，我无法构建我的应用程序或解决错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:05:52.493

如果您使用 Eclipse Juno 或在 Windows 上运行，则当前在 Eclipse 中构建 ndk 应用程序存在问题，请参阅[使用 NDK 插件](http://tools.android.com/recent/usingthendkplugin)页面了解更多信息。

通过在 Eclipse 项目中禁用 CDT 构建器并通过命令行运行 ndk-make 来构建 GStreamer 库，我已经能够获得构建和运行的教程。[您可以在这篇文章](https://stackoverflow.com/questions/14862795/unable-to-build-gstreamer-for-android-tutoritals)中找到更多信息。

# cron - Unix、cron 和 MAILTO

> ID：15085143
> 
> 赞同：1
> 
> 时间：2013-02-26T09:10:44.003
> 
> 标签：cron, mailto

研究配置 MAILTO 的可能性，这样我们很少有 cron 邮件发送到一个电子邮件 ID，而其他人发送到不同的电子邮件 ID。

以下工作吗？

```
MAILTO="email1@"
SHELL=/bin/zsh
0,30 * * * * <cron job>
0 1 * * *  shashi zsh -c "export MAILTO='email2@';find /home/y/logs/ -daystart -type f -ctime +7 -print -exec rm -rf {} \;" 
```

我期望第一个 cron 作业默认邮寄到 'email1@' ，而第二个 cron 条目将邮寄到 'email2@' 因为我们已经覆盖了 MAILTO。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-24T13:47:15.343

我现在主要在 RHEL 5 和 6 上工作——我的 RH6 盒子安装了 cronie 1.4。

我可以在 crontab 中放置多个 MAILTO 行。crontab 是从上到下处理的，MAILTO 可以在不同的作业之间更改。我认为这使文件非常可读和易于理解。

所以我会这样写你的示例代码：

```
SHELL=/bin/zsh
MAILTO="email1@"
0,30 * * * * <cron job>

MAILTO="email2@"
0 1 * * *  find /home/y/logs/ -daystart -type f -ctime +7 -print -exec rm -rf \{\} \; 
```

# objective-c - 为 NSTabView 实现“空视图”

> ID：15085144
> 
> 赞同：0
> 
> 时间：2013-02-26T09:10:52.393
> 
> 标签：objective-c, macos, cocoa, nstabview

我一直在尝试使用[**JUEmptyView**](http://www.cocoacontrols.com/controls/juemptyview)（一个自定义的 Cocoa 控件/`NSView`子类，当所有子视图都被删除时，它会在视图中间显示一个自定义的中心对齐占位符）。

因此，我尝试为 an 实现相同的事情`NSTabView`- 只需将其`NSTabView`设为子类（并重新设置我的初始`NSTabView`项目类）。

通常，它*确实*有效 - 它确实显示了占位符（当最后一个选项卡关闭时）。但是，仍然存在一些问题：

*   背景仍然是一个 tabitem 的背景（以为它们都已经关闭了）
*   调整窗口大小时（假设`NSTabView`从左到右和从上到下一直延伸），视图似乎无法正确重绘自身。

**例子 ：**

![在此处输入图像描述](../Images/2b03527507adec28144df998a5b0274a.png)

**完整代码：**

*界面*

```
#import <Cocoa/Cocoa.h>

@interface JUTabEmptyView : NSTabView
{
@private
    BOOL forceShow;

    NSString *title;
    NSColor  *titleColor;
    NSFont   *titleFont;

    NSColor *backgroundColor;
}

@property (nonatomic, copy) NSString  *title;
@property (nonatomic, retain) NSFont  *titleFont;
@property (nonatomic, retain) NSColor *titleColor;
@property (nonatomic, retain) NSColor *backgroundColor;

@property (nonatomic, assign) BOOL forceShow;

- (id)initWithTitle:(NSString *)title;
- (id)initWithTitle:(NSString *)title andFont:(NSFont *)font;
- (id)initWithTitle:(NSString *)title font:(NSFont *)font color:(NSColor *)color andBackgroundColor:(NSColor *)backgroundColor;

@end 
```

*执行*

```
#import "JUTabEmptyView.h"

@implementation JUTabEmptyView
@synthesize title, titleFont, titleColor, backgroundColor;
@synthesize forceShow;

#pragma mark -
#pragma mark Setter

- (void)setTitle:(NSString *)ttitle
{
    [title autorelease];
    title = [ttitle copy];

    [self setNeedsDisplay:YES];
}

- (void)setTitleFont:(NSFont *)ttitleFont
{
    [titleFont autorelease];
    titleFont = [ttitleFont retain];

    [self setNeedsDisplay:YES];
}

- (void)setTitleColor:(NSColor *)ttitleColor
{
    [titleColor autorelease];
    titleColor = [ttitleColor retain];

    [self setNeedsDisplay:YES];
}

- (void)setBackgroundColor:(NSColor *)tbackgroundColor
{
    [backgroundColor autorelease];
    backgroundColor = [tbackgroundColor retain];

    [self setNeedsDisplay:YES];
}

- (void)setForceShow:(BOOL)tforceShow
{
    forceShow = tforceShow;

    [self setNeedsDisplay:YES];
}

#pragma mark -
#pragma Drawing

- (void)drawRect:(NSRect)dirtyRect
{
    if(forceShow || [[self subviews] count] == 0)
    {
        NSRect rect = [self bounds];
        NSSize size = [title sizeWithAttributes:[NSDictionary dictionaryWithObject:titleFont forKey:NSFontAttributeName]];
        NSSize bezierSize = NSMakeSize(size.width + 40.0, size.height + 20.0);
        NSRect drawRect;

        // Background
        drawRect = NSMakeRect(0.0, 0.0, bezierSize.width, bezierSize.height);
        drawRect.origin.x = round((rect.size.width * 0.5) - (bezierSize.width * 0.5));
        drawRect.origin.y = round((rect.size.height * 0.5) - (bezierSize.height * 0.5));

        [backgroundColor setFill];
        [[NSBezierPath bezierPathWithRoundedRect:drawRect xRadius:8.0 yRadius:8.0] fill];

        // String
        drawRect = NSMakeRect(0.0, 0.0, size.width, size.height);
        drawRect.origin.x = round((rect.size.width * 0.5) - (size.width * 0.5));
        drawRect.origin.y = round((rect.size.height * 0.5) - (size.height * 0.5));

        [title drawInRect:drawRect withAttributes:[NSDictionary dictionaryWithObjectsAndKeys:titleColor, NSForegroundColorAttributeName,
                                                   titleFont, NSFontAttributeName, nil]];
    }
}

- (void)willRemoveSubview:(NSView *)subview
{
    [super willRemoveSubview:subview];
    [self setNeedsDisplay:YES];
}

- (void)didAddSubview:(NSView *)subview
{
    [super didAddSubview:subview];
    [self setNeedsDisplay:YES];
}

#pragma mark -
#pragma mark Constructor / Destructor

- (void)constructWithTitle:(NSString *)ttitle font:(NSFont *)font color:(NSColor *)color andBackgroundColor:(NSColor *)tbackgroundColor
{
    title = ttitle ? [ttitle copy] : [[NSString alloc] initWithString:@"No active document"];
    titleFont = font ? [font retain] : [[NSFont boldSystemFontOfSize:[NSFont smallSystemFontSize]] retain];
    titleColor = color ? [color retain] : [[NSColor colorWithCalibratedRed:0.890 green:0.890 blue:0.890 alpha:1.0] retain];
    backgroundColor = tbackgroundColor ? [tbackgroundColor retain] : [[NSColor colorWithCalibratedRed:0.588 green:0.588 blue:0.588 alpha:1.000] retain];
}

- (id)initWithCoder:(NSCoder *)decoder
{
    if(self = [super initWithCoder:decoder])
    {
        [self constructWithTitle:nil font:nil color:nil andBackgroundColor:nil];
    }

    return self;
}

- (id)initWithFrame:(NSRect)frameRect
{
    if(self = [super initWithFrame:frameRect])
    {
        [self constructWithTitle:nil font:nil color:nil andBackgroundColor:nil];
    }

    return self;
}

- (id)initWithTitle:(NSString *)ttitle
{
    if((self = [super init]))
    {
        [self constructWithTitle:ttitle font:nil color:nil andBackgroundColor:nil];
    }

    return self;
}

- (id)initWithTitle:(NSString *)ttitle andFont:(NSFont *)font
{
    if((self = [super init]))
    {
        [self constructWithTitle:ttitle font:font color:nil andBackgroundColor:nil];
    }

    return self;
}

- (id)initWithTitle:(NSString *)ttitle font:(NSFont *)font color:(NSColor *)color andBackgroundColor:(NSColor *)tbackgroundColor
{
    if((self = [super init]))
    {
        [self constructWithTitle:ttitle font:font color:color andBackgroundColor:tbackgroundColor];
    }

    return self;
}

- (void)dealloc
{
    [title release];
    [titleFont release];
    [titleColor release];
    [backgroundColor release];

    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:13:26.030

好的，这就是我设法解决它的方法。

事实证明，这个“空视图”实现，除了在父视图的中间打印一个带有标签的圆角框外，未能重新绘制主背景。所以，只需要重新粉刷它...

**只需`drawRect:`添加：**

```
[[NSColor grayColor] set]; // or any other color you prefer
NSRectFill([self bounds]); 
```

# sql - 在存储过程中传递动态顺序

> ID：15085149
> 
> 赞同：21
> 
> 时间：2013-02-26T09:11:16.320
> 
> 标签：sql, sql-server, sql-server-2008-r2

我正在创建下面的存储过程。

```
declare @PageNum as Int
declare @PerPageResult as Int
declare @StartDate as varchar(25)
declare @EndDate as varchar(25)
declare @SortType as Varchar(50)
declare @SortDirection as Varchar(4)
set @PageNum=1
set @PerPageResult=20
set @StartDate='2008-02-08'
set @EndDate='2015-02-08'
set @SortType='RegDate'
set @SortDirection='Desc'
declare @Temp Table(RowNum int, RegDate Date, Registered int, Female int, Male int, [Join] int, Rebill int, TotalPointsEarned int, Expire int)
declare @sort varchar(50)
Insert into @Temp
    Select ROW_NUMBER() over (order by @SortType+' '+@SortDirection) As RowNum, * From (    
    SELECT 
    CAST(m.registrationdate AS Date) as RegDate,    
    count(m.id) Registered,
    count(CASE WHEN m.gender='F' then 'F' end) As Female,
    count(CASE WHEN m.gender='M' then 'M' end) As Male
    count(CASE WHEN p.paymenttransactiontype='N' then 'N' end) As [Join],
    count(CASE WHEN p.paymenttransactiontype='R' then 'R' end) As Rebill,
    count(m.tokensearned) As TotalPointsEarned,
    count(CASE WHEN p.paymenttransactiontype='E' then 'E' end) As Expire
    from member m
    join payment p on m.id=p.id_member
    join user_role u on u.member_id=m.id
    where u.role_id <> 3
    and CAST(m.registrationdate AS Date) > @StartDate and CAST(m.registrationdate AS Date) < @EndDate
    GROUP BY CAST(m.registrationdate AS Date)
    ) as aa 
    Select * from @Temp Where RowNum>((@PageNum-1)*@PerPageResult) and RowNum<=@PerPageResult * @PageNum
    Order by @SortType+' '+@SortDirection 
```

在上面，当我动态传递`Order by`子句时，它没有正确排序数据，但是当我明确地写列名时，它工作正常。可能是它`@SortType+' '+@SortDirection`认为`varchar`而不是`Date`

我试过写`Order by case when (@Sort='RegDate' and @SortDirection='Desc') Then RegDate End Desc`，但没有用

我如何在这里动态传递订单。

编辑：@Andomar：我尝试了您提供的解决方案，并为日期类型添加了一个字段。它也没有奏效。

下面是我所做的。

```
create table t1 (id int, name varchar(50), dt date);
insert t1 values 
    (1, 'Chihiro Ogino','2009-02-08'), 
    (2, 'Spirit of the Kohaku River','2008-02-08'), 
    (3, 'Yubaba','2012-02-08');

declare @sortColumn varchar(50) = 'dt'
declare @sortOrder varchar(50) = 'ASC'

select  *
from    t1
order by
        case
        when @sortOrder <> 'ASC' then 0
        when @sortColumn = 'id' then id
        end ASC
,       case
        when @sortOrder <> 'ASC' then ''
        when @sortColumn = 'name' then name
        end ASC
,       case
        when @sortOrder <> 'ASC' then ''
        when @sortColumn = 'dt' then name
        end ASC
,       case
        when @sortOrder <> 'DESC' then 0
        when @sortColumn = 'id' then id
        end DESC
,       case
        when @sortOrder <> 'DESC' then ''
        when @sortColumn = 'name' then name
        end DESC
,       case
        when @sortOrder <> 'DESC' then ''
        when @sortColumn = 'dt' then name
        end DESC 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-26T09:17:08.367

您可以使用复杂的`order by`子句。这需要一个`case`用于每个排序方向和每个数据类型。使用此示例数据集：

```
create table t1 (id int, name varchar(50), created date);
insert t1 values 
    (1, 'Chihiro Ogino', '2012-01-01'), 
    (2, 'Spirit of the Kohaku River', '2012-01-03'), 
    (3, 'Yubaba', '2012-01-02'); 
```

您可以使用如下`order by`子句：

```
declare @sortColumn varchar(50) = 'created'
declare @sortOrder varchar(50) = 'DESC'

select  *
from    t1
order by
        case
        when @sortOrder <> 'ASC' then 0
        when @sortColumn = 'id' then id
        end ASC
,       case
        when @sortOrder <> 'ASC' then ''
        when @sortColumn = 'name' then name
        end ASC
,       case
        when @sortOrder <> 'ASC' then cast(null as date)
        when @sortColumn = 'created' then created
        end ASC
,       case
        when @sortOrder <> 'DESC' then 0
        when @sortColumn = 'id' then id
        end DESC
,       case
        when @sortOrder <> 'DESC' then ''
        when @sortColumn = 'name' then name
        end DESC
,       case
        when @sortOrder <> 'DESC' then cast(null as date)
        when @sortColumn = 'created' then created
        end DESC 
```

[SQL Fiddle 的工作示例。](http://sqlfiddle.com/#!6/0a212/1/0)

另一种选择是动态创建查询，并使用`exec`. 例如：

```
declare @sql nvarchar(max)
set @sql = 'select * from YourTable order by ' + @sortColumn + ' ' + @sortDir
exec (@sql) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T23:10:43.647

@Andomar 的回答有助于解决类似的问题。我需要以任意顺序对任意数量的 23 个不同列进行排序。我最终得到以下结果：

```
create table sorting(ID int, columnName varchar(50), sort varchar(10), position int)
insert into sorting 
values(1,'column1','DESC',1),
      (1,'column2','ASC',2),
      ...              
      (1,'columnN','DESC',N) 
```

向 SP 添加参数 @sort 以识别排序中的条目：

```
ORDER BY ISNULL(STUFF((SELECT ', ' + a.columnName + ' ' +  a.sort 
                    FROM sorting a
                    WHERE a.ID = @sort
                    ORDER BY a.position ASC
            FOR XML PATH('')), 1, 2, ''),NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-25T13:40:54.167

构建动态可排序存储过程有两种基本方法：

1.  将该`ORDER BY`子句作为参数传递给存储过程。在存储过程中，在字符串中构建 SQL 语句，然后使用`EXEC`or执行该语句`sp_ExecuteSql`。

    ```
    -- This Method is used when your Column names are dynamic 
    -- We need to create a dynamic query and Execute it as shown below.

    CREATE PROCEDURE getEmployees ( @OrderByClause varchar(100) ) AS

    -- Create a variable @SQLStatement
    DECLARE @SQLStatement varchar(255)

    -- Enter the dynamic SQL statement into the
    -- variable @SQLStatement
    SELECT @SQLStatement =  'SELECT EmployeeID, FirstName, LastName, SSN, Salary  
     FROM Employees ORDER BY '+ @OrderByClause+''

    -- Execute the SQL statement
    EXEC(@SQLStatement) 
    ```

2.  传入要排序的列，然后`CASE`在`ORDER BY`子句中使用语句根据输入参数值对结果进行排序。

    ```
    --This method is used when you column name is not dynamic 

    SELECT EmployeeID, FirstName, LastName, SSN, Salary
    FROM Employees
    ORDER BY
      CASE WHEN @ColumnName='LastName' THEN LastName
           WHEN @ColumnName='Salary' THEN CONVERT(varchar(50), Salary)
           WHEN @ColumnName='SSN' THEN SSN
      END 
    ```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T09:16:54.623

像这样的东西应该可以工作：

```
ORDER BY
  CASE WHEN @SortDirection = 'ASC'  THEN @SortType END ASC,
  CASE WHEN @SortDirection = 'DESC' THEN @SortType END DESC 
```

# android - 如何在 setTheme() 之后更改 ActionBar 图标？

> ID：15085153
> 
> 赞同：1
> 
> 时间：2013-02-26T09:11:22.003
> 
> 标签：android, android-actionbar

我正在使用以下代码更改应用程序主题：

MainActivity.java：

```
setTheme(R.style.AppBlackTheme);
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
```

样式.xml：

```
<style name="AppTheme" parent="android:Theme.Holo.Light" />
<style name="AppBlackTheme" parent="android:Theme.Holo" /> 
```

它工作正常，但我在 ActionBar 中有自定义图标。这个图标对于我的黑色主题来说太暗了。所以我需要把这个图标换成另一个。如何根据主题更改 ActionBar 图标（不是应用程序徽标）？

# c# - 使用 XmlSchemaInference 和 XDocument 以编程方式从 XML 创建 XSD 方案

> ID：15085155
> 
> 赞同：2
> 
> 时间：2013-02-26T09:11:27.213
> 
> 标签：c#, xml, linq, linq-to-xml

我知道这个板上有几个关于 .xsd 方案创建的答案，但我发现没有什么真正适合我正在尝试做的事情。

我有一个非常简单的 XML 文件，其中包含嵌套元素等（但没有命名空间或 dtd），我正在尝试从中生成一个 XSD 文件。我反映了 Microsoft 的代码`XSD.exe`（在 XSD 生成方面经常被提及），并看到方案生成是通过使用`XmlSchemaInference`类（`InferScheme()`方法）完成的。

现在，我的 XML 文件已经使用-namespace加载`XDocument.Load()`了。`LINQ`但是当我查看时`XmlSchemaInference`，我发现这只需要一个`XmlTextReader`作为 xml 文档参数。

我是否正确地加载了我的 XML 文件以与 LINQ 一起使用`XDocument`，然后再次加载它`XmlTextReader`以创建 XSD？还是`XDocument`提供类似的方法，因为它包含扩展方法`.Validate()`？

我对 XML 感到很困惑，因为 .net 似乎提供了数百个类，但没有一个类能够提供完整的功能。：/

简而言之，我想做的是：

*   `XDocument`使用(LINQ)加载 XML 文件
*   使用XDocument中的本机框架/`XmlSchemeSet`方法（无内容）创建 XSD 方案`xsd.exe`
*   使用新的 XDocument 对象，保存使用`XDocument.Save()`

看来我必须做的：

*   使用加载 XML 文件`XDocument`
*   使用再次加载 XML 文件`XmlTextReader`
*   传给`XmlTextReader`_`XmlSchemaInference`
*   传`XmlTextWriter`新到`XmlSchemaInference`
*   使用保存文档`XmlTextWriter`

……很可笑，嗯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:13:15.560

那么[XmlSchemaInference.InferSchema将任何 XmlReader 作为输入，因此假设您有一个 LINQ to XML XDocument，您可以使用](http://msdn.microsoft.com/en-us/library/ms162770.aspx)[http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.createreader.aspx)在该文档上创建一个 XmlReader [.createreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.createreader.aspx)。然后，由于 XML 文档通常可以包含来自不同名称空间的 XML 元素，因此 InferSchema 方法返回一个 XmlSchemaSet（因为每个目标名称空间都需要一个模式）。使用该 XmlSchemaSet 您可以使用所有选项将架构保存到文件中，或者如果您想要一个 XDocument，您可以创建一个，例如

```
List<XDocument> schemas = new List<XDocument>();
foreach (XmlSchema schema in schemaSet.Schemas())
{
  XDocument schemaDoc = new XDocument();
  using (XmlWriter xw = schemaDoc.CreateWriter())
  {
     schema.Write(xw);
  }
  schemas.Add(schemaDoc);
} 
```

XmlTextWriter 和 XmlTextReader 是 XmlWriter/XmlReader 的遗留实现，除非您需要一些向后兼容的怪癖解析或 XML 写入，否则最好避免使用它们。

但一般来说，XmlReader 和 XmlWriter 类是在 .NET 框架的 XML API 中用于提供不同类之间的低级别交互的类。

从您的描述中不清楚，但是如果您希望架构作为 XDocument 实例，如果您只是想将架构保存到文件中，那么您可以直接为文件上的每个架构调用 schema.Write 方法溪流。

# asp.net-mvc - 返回 IEnumerable 时出错 到 MVC 控制器

> ID：15085158
> 
> 赞同：2
> 
> 时间：2013-02-26T09:11:43.540
> 
> 标签：asp.net-mvc, linq, ienumerable

嗨，我有一个业务逻辑层，它将 selectlistitems 返回给控制器，然后将传递给视图以填充选择列表。

我有这个有效的方法：

```
 public IEnumerable<SelectListItem> GetDevices
    {
      get
      {
        using (IDeviceData repository = _dataFactory.Create())
        {
          return repository.DeviceTypes.ToList()
            .Where(dt => dt.ParentId == 10 )
             .Select(dt =>
             new SelectListItem
             {
               Text = (dt.Name).Trim(),
               Value = dt.Id.ToString()
             });
        }
      }
    } 
```

而这没有：

```
 public IEnumerable<SelectListItem> GetGroups(int deviceTypeId)
    {
        using (IDeviceData repository = _dataFactory.Create())
        {
          return repository.DeviceTypeConfigurationParameterGroupMaps.ToList()
            .Where(cm => cm.DeviceTypeId == deviceTypeId)
            .Join(repository.ConfigurationParameterGroups, cm => cm.ConfigurationParameterGroupId, cg => cg.Id, (cm, cg) => new { cm, cg })
             .Select(cg =>
             new SelectListItem
             {
               Text = (cg.cg.Name).Trim(),
               Value = cg.cg.Id.ToString()
             });
        }
      } 
```

明显的区别是两个表之间的连接，我收到的错误是：

```
Results View = The type '<>f__AnonymousType0<p,d>' exists in both 'System.Web.dll' and 'EntityFramework.dll' 
```

尝试在调试时扩展结果时会收到此信息。任何建议都会受到欢迎，因为我对 LINQ 不太熟悉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:41:24.843

弄清楚了：

```
public IEnumerable<SelectListItem> GetGroupsForDevice(int deviceTypeId)
    {
        using (IDeviceData repository = _dataFactory.Create())
        {
          return repository.DeviceTypeConfigurationParameterGroupMaps
            .Where(cm => cm.DeviceTypeId == deviceTypeId)
            .Join(repository.ConfigurationParameterGroups, cm => cm.ConfigurationParameterGroupId, cg => cg.Id, (cm, cg) =>  cg )
            .ToList()
            .Select(cg =>
             new SelectListItem
             {
               Text = (cg.Name).Trim(),
               Value = cg.Id.ToString()
             }).ToList()  ;

        }
      } 
```

我需要在加入`ToList()`后添加，然后在转换为 SelectlistItem 后再次添加。我也不需要创建新的匿名类型 - 感谢上面的 joanna。

这是答案，但不是一个很好的解释，如果有人想稍微补充一下，请随意！

# c - sem 等待后的 sem 帖子不起作用

> ID：15085159
> 
> 赞同：3
> 
> 时间：2013-02-26T09:11:45.380
> 
> 标签：c, semaphore

我正在尝试创建一个基于管道的共享内存。我也在使用信号量，我的一个信号量有问题（也许我确实有更多问题，但我还没有注意到）

这个信号量初始化：

```
if (sem_init(&(sem_readers), 1, 0) < 0) {
    perror("Error sem_init");
    return -1;
} 
```

用法：

首先是父亲（阅读端）：

```
if (sem_wait(&(sem_readers)) < 0) {
    perror("ERROR: sem_wait i");
    return -1;
} 
```

然后儿子，写作结束：

```
if (sem_post(&(sem_readers)) < 0) {
    perror("ERROR: sem_post SEM_SHM_PIPE_PIPE");
    return -1;
} 
```

出于某种原因，父亲坚持信号量的这个 wait() ，即使儿子做帖子......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:17:14.347

您不能在多个进程中拥有未命名的信号量，因为它们仅存储在内存中，并且两个进程的内存*不*共享。

你必须在使用[`sem_open`](http://pubs.opengroup.org/onlinepubs/009695399/functions/sem_open.html)之前创建一个命名的信号量`fork`，然后在子进程中也`sem_open`再次使用来打开现有的信号量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T21:26:38.897

您编写程序的方式是父进程和子进程使用两个不同的信号量。您可以使用 Joachim Pileborg 指出的命名信号量，但您也可以在进程与其子进程之间使用未命名信号量，只需将信号量存储在共享内存中：

```
 /* place semaphore in shared memory */
  sem_t *mutex = mmap(NULL,sizeof(sem_t),
        PROT_READ|PROT_WRITE, MAP_SHARED|MAP_ANONYMOUS, -1, 0);
  if (!mutex) {
    perror("Out of memory");
  }

  /* create, initialize semaphore */
  if (sem_init(mutex, 1, 1) < 0) {
    perror("semaphore initilization");
    exit(0);
  }
  int ret = fork();

  //use your semaphore...

  if (sem_destroy(sema) < 0) {
    perror("sem_destroy failed: %s", strerror(errno));
    exit(0);
  }
  /* don't forget to unmap the memory */
  if (munmap(sema, sizeof(sem_t)) < 0) {
    perror("munmap failed: %s", strerror(errno));
    exit(0);
  } 
```

# php - Joomla 1.7 loadObjectList 总是返回 null

> ID：15085161
> 
> 赞同：0
> 
> 时间：2013-02-26T09:11:46.683
> 
> 标签：php, database, joomla1.7

我在 Joomla 1.7 中使用自定义 php 代码，以便从数据库中获取一些文章。虽然 sql 查询在 mysql 级别上工作，但它在 joomla 脚本中返回 null。

```
$query = " SELECT id, title "              
." FROM #__content "
." WHERE catid=".$categoyID." AND state > 0 AND created BETWEEN SYSDATE() - INTERVAL 15 YEAR AND SYSDATE()"
."";

$db = JFactory::getDBO();

$db->setQuery( $query );     

$rows = $db->loadObjectList();

// Load the results as a list of stdClass objects.
//$articles = $db->loadObjectList();
// Get list items

if ($rows!=null)
{
    $i=0;
    foreach ($rows as $row)
    {              
        echo '<br>'.$row->id;
        echo '<br>'.$row->title;

        $i++;
    }   

}
else echo "<br> NULL results from ".$query; 
```

我总是得到一个 NULL 结果。可能它与我的 Joomla 配置有关，但是什么？

# javascript - MongoDB 使用 node-mongodb-native 排序

> ID：15085163
> 
> 赞同：1
> 
> 时间：2013-02-26T09:11:53.937
> 
> 标签：javascript, node.js, sorting, node-mongodb-native

我想对 Mongo 查询的结果进行排序。从[这里](http://docs.mongodb.org/manual/applications/read/)我发现我可以这样做，例如：

```
collection.find().sort( { name: 1 } ).limit( 5 ) 
```

因为我不想按名称排序，而是按请求指定的任何内容进行排序：

```
var query = require('url').parse(req.url, true).query;

var n = parseInt(query.limit);

var f = String(query.field);

var dir = query.direction;

collection.find().sort({f: dir}).limit(n) 
```

问题是，它按“f”排序，而不是变量 f 的值。如何按存储在 f 中的内容进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:44:01.677

```
var query = require('url').parse(req.url, true).query;
var n = parseInt(query.limit);
var f = String(query.field);
var dir = query.direction;
var sortObj = {};
sortObj[f] = dir;
collection.find().sort(sortObj).limit(n) 
```

可能是这样吗？

# php - 如何在 cakephp 中使用外键查找数据？

> ID：15085165
> 
> 赞同：1
> 
> 时间：2013-02-26T09:11:58.360
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

我有三个表 Contact、ContactContactGroup、ContactGroups

```
 contact        contact_contact_group       contact_group
 contact_id     ccg_id                      contact_group_id 
 f_name         contact_id                  
 l_name         contact_group_id 
```

我想查找组名不重复的所有联系人，例如，如果（ali）属于两个组，那么应该显示一次，而组名两次属于哪个组，我该怎么做？我尝试了很多，但没有成功。

这是我的查询。

```
 $contact_group = $this->Contact->ContactsContactGroup->ContactGroup->find('all'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:58:39.370

试试这个

```
 $contact_group = $this->Contact->ContactsContactGroup->find('all'); 
```

它将为您提供所有带有组名的记录。

# maven - 使用 Maven 从多个存储库中获取工件

> ID：15085169
> 
> 赞同：1
> 
> 时间：2013-02-26T09:12:05.927
> 
> 标签：maven, dependencies, multiple-repositories

如何配置 maven 项目以从不同的存储库获取工件之一？

我想将它包含在项目中[https://github.com/twitter/hadoop-lzo](https://github.com/twitter/hadoop-lzo)但我只能在 twitter 存储库中找到它，而不是在中央 maven 存储库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:27:26.203

您可以在 settings.xml 或 POM 中设置要使用的存储库。

如果你有一个团队在做这个项目，你可能想把它放在 POM 中，这样每个人都有 conf.

你可以这样做：

```
<repositories>

    <repository>
      <id>Maven Central</id>
      <url>http://repo1.maven.org/maven2/</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>

.... other repos
</repositories> 
```

# memcached - curr_item 似乎不对？

> ID：15085171
> 
> 赞同：0
> 
> 时间：2013-02-26T09:12:15.800
> 
> 标签：memcached

我正在使用一个简单的lua程序进行批量插入，每个项目的过期时间设置为86400秒，一整天**都不会过期。**

现在我有 1,000,000 个 curr_items，但如果我用 memcached-tools 转储它们，并用 grep 搜索“^add”，我只有 27235 个项目

```
%> memcached-tool 127.0.0.1:11211 display
  #  Item_Size  Max_age   Pages   Count   Full?  Evicted Evict_Time OOM
  8     480B         4s     464 1012907      no        0        0    0

%> memcached-tool 127.0.0.1:11211 dump | grep ^add -c                                                                                                                         
Dumping memcache contents
  Number of buckets: 1
  Number of items  : 1012907
Dumping bucket 8 - 1012907 total items
27235

%> memcached-tool 127.0.0.1:11211 stats | egrep '(curr|bytes)'
                   bytes   447704894
              bytes_read   407765187
           bytes_written    78574999
        curr_connections          10
              curr_items     1012907
          limit_maxbytes  2147483648 
```

我需要这个来估计我的系统可能需要的内存，但现在我不确定项目计数，哪一个是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:45:34.503

好的，cachedump 有硬限制，在邮件列表中是 2M。

这就是阻止该工具转储更多密钥的原因。

# jquery - jQuery ajax：请求失败时调用完成

> ID：15085172
> 
> 赞同：0
> 
> 时间：2013-02-26T09:12:18.527
> 
> 标签：jquery, ajax, promise

我正在尝试使用 Promise 同步我的 ajax 请求：我当前的代码很简单：

```
 var ajax = undefined;

    $.ajax({
                type: 'put',
                url: url,
                data: data,
                cache: false,
                successs: function () {

                },
                error: function () {

                }

            }).done(function () {
                alert('done');
            }); 
```

只要 ajax 调用成功（状态码 200），它就可以正常工作，但是当调用失败（例如，无效的 url）时，不再调用 done。即使ajax请求失败，我如何执行完成=

斯特凡

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:13:51.827

几个选项供您选择：

在成功或失败时调用相同的函数。函数不必*是*匿名的和内联定义的，您可以使用名称单独定义它们并相应地引用它们。

在您的代码段中，您同时使用了旧的`success`（尽管最后有一个额外`s`的）和`error` *新*的`done`，这意味着您定义了两个不同的成功回调（`success`和`done`）。一个就足够了。

这是一个使用`success`and的示例`error`，传递`null`给 on 处理程序`error`：

```
var ajax = undefined;

$.ajax({
    type:    'put',
    url:     url,
    data:    data,
    cache:   false,
    success: handler,
    error:   function() {
        handler(null);
    }
});

function handler() {
    alert("Done");
} 
```

或使用`done`and `fail`：

```
var ajax = undefined;

$.ajax({
    type:    'put',
    url:     url,
    data:    data,
    cache:   false
}).done(handler).fail(function() {
    handler(null);
});

function handler() {
    alert("Done");
} 
```

或者（或组合），有`complete`回调（您在选项中指定的那个）和`always`回调（在`done`and`fail`样式中），无论成功或失败（在成功或失败回调完成后）都会调用它们：

`complete`：

```
var ajax = undefined;

$.ajax({
    type:    'put',
    url:     url,
    data:    data,
    cache:   false,
    success: handler,
    error:   function() {
        handler(null);
    },
    complete: function() {
        alert("Always called (after success/error)");
    }
});

function handler() {
    alert("Done");
} 
```

`always`：

```
var ajax = undefined;

$.ajax({
    type:    'put',
    url:     url,
    data:    data,
    cache:   false
}).done(handler).fail(function() {
    handler(null);
}).always(function() {
    alert("Always called (after done/fail)");
});

function handler() {
    alert("Done");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:16:23.513

`done`您可以使用`complete`设置代替功能：

```
$.ajax({
    type: 'put',
    url: url,
    data: data,
    cache: false,
    successs: function () {

    },
    error: function () {

    }
    complete: function(jqXHR, textStatus) {
        alert("Done");

}); 
```

`complete`函数在`success`or之后执行`error`。查看[jQuery ajax](http://api.jquery.com/jQuery.ajax/)文档以获取更多详细信息。

如果您不关心实际`success`和`error`回调，并且只想在调用完成后执行某些操作，而不管结果如何，则完全省略`success`和`error`设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:17:08.103

没有必要做

```
 $.ajax({
    type: 'post',
    url: url,
    data: data,
    cache: false,
    success: function () {
       alert('success');
    },
    error: function () {
       alert('error');
    },
    complete: function(){
       alert('complete');
    }
 }); 
```

# ios - 调用方法的无法识别的选择器

> ID：15085173
> 
> 赞同：2
> 
> 时间：2013-02-26T09:12:23.310
> 
> 标签：ios, objective-c

```
- (NSDictionary*)convertMessage:(Message*)event
{
    // if this gets called then a derived class either didn't override this function or it called [super convertEvent:event]
    [self doesNotRecognizeSelector:_cmd];
    return nil;
} 
```

我期望结果值为零。

```
-(void)calling{

 NSDictionary *dictionary  = [self convertMessage:evt];

} 
```

但是它说无法识别的选择器发送到错误块的实例！跑步的时候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:24:46.877

要扩展@xlc0212 的答案：

该方法的原始实现...

```
[self doesNotRecognizeSelector:_cmd];
return nil; 
```

... 从未预期会达成`return`声明。正如@xlc0212 所解释的，`doesNotRecognizeSelector`会抛出异常，导致进程异常终止。

实现的作者只是将`return`语句放在那里以使编译器警告静音。一种更现代、更容易做到这一点的方法是告诉 clang 无法达到代码中的这一点：

```
- (NSDictionary*)convertMessage:(Message*)event
{
    [self doesNotRecognizeSelector:_cmd];
    __builtin_unreachable();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:18:27.393

的实现`[self doesNotRecognizeSelector:_cmd]`是抛出异常。所以预期的结果是引发异常。如果您期望返回 nil，则只需在方法中返回 nil 并且*不要*调用`doesNotRecognizeSelector:`

参考[苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)

> 每当对象接收到它无法响应或转发的 aSelector 消息时，运行时系统就会调用此方法。反过来，此方法引发 NSInvalidArgumentException，并生成错误消息。
> 
> 任何doesNotRecognizeSelector：消息一般只由运行时系统发送。但是，它们可以在程序代码中使用以防止方法被继承。例如，一个 NSObject 子类可能会放弃 copy 或 init 方法，方法是重新实现它以包含一个 doesNotRecognizeSelector: 消息，如下所示：

```
- (id)copy {
    [self doesNotRecognizeSelector:_cmd];
} 
```

> _cmd 变量是传递给当前选择器的每个方法的隐藏参数；
> 
> 在此示例中，它标识了复制方法的选择器。此代码阻止子类的实例响应复制消息或超类转发复制消息 - 尽管 respondsToSelector: 仍将报告接收者有权访问复制方法。
> 
> 如果你重写这个方法，你必须在你的实现结束时调用 super 或引发一个 NSInvalidArgumentException 异常。 **换句话说，这个方法不能正常返回；它必须总是导致抛出异常。**

# jquery - 自定义 WordPress 主题中的 jQuery 片段

> ID：15085175
> 
> 赞同：1
> 
> 时间：2013-02-26T09:12:26.893
> 
> 标签：jquery, wordpress, scroll

我找到了一个[jQuery 滚动技巧](http://jsfiddle.net/bryanjamesross/VtPcm/)，我想在我的自定义 WordPress 主题中使用它。我遇到的问题是给定的功能`.scroll()`永远不会执行。

出于调试的目的，我将脚本简化为以下内容：

```
(function () {
  alert("foo");
  $(window).scroll(function (evt) {
    alert("bar");
  });
})(); 
```

我已将 js 放入`mytheme.js`并将以下内容添加到`functions.php`：

```
function mytheme_enq_script() {
  wp_enqueue_script('mytheme', get_template_directory_uri().'/mytheme.js',
    array('jquery'), '0.1', true);
}
add_action('wp_enqueue_scripts', 'mytheme_enq_script'); 
```

PHP 必须正确，因为脚本已加载并出现“foo”警报，但“bar”警报没有。我的最小 jQuery 代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:36:24.033

我查看了 Web 控制台，浏览了[TypeError: $ is not a function when calling jQuery function](https://stackoverflow.com/questions/12343714/typeerror-is-not-a-function-when-calling-jquery-function)并将 js 更改为以下内容：

```
(function ($) {
  alert("foo");
  $(window).scroll(function (evt) {
    alert("bar");
  });
})(jQuery); 
```

现在它按预期加载。

# asp.net - 使用浏览器存储的 cookie 发出 HttpWebRequest

> ID：15085181
> 
> 赞同：0
> 
> 时间：2013-02-26T09:12:49.890
> 
> 标签：asp.net, cookies, httpwebrequest

例如，如果我`HttpWebRequest`访问“www.sport.com”，我想使用浏览器在之前会话中已经存储的 cookie。我怎样才能做到这一点？

**更新：** 也许我没有解释清楚，如果我向“www.google.com”发出 httpwebreqeust，request.CookieContainer 必须包含 chrome / firefox / ie / etc ...在之前的所有会话中为 google 存储的所有 cookie .com。例如在 Firefox 中，我可以看到他们进入选项 > 隐私 > 删除单个 cookie。

**UPDATE2：** 我需要这样的东西：

在 javascript 中，如果我像这样创建一个 httpwebrequest

```
document.write('<script type="text/javascript" src="http://www.google.com"><\/script>') 
```

自动获取已存储在浏览器先前会话中的 cookie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:24:31.610

[首先创建HttpWebRequest](http://msdn.microsoft.com/en-us/library/dd920298%28v=vs.95%29.aspx)，设置所有内容，然后向其中添加 cookie，如下所示：

1) 为 HttpWebRequest 的 HttpWebRequest.CookieContainer 属性创建一个 System.Net.CookieContainer 对象。

```
request.CookieContainer = new CookieContainer(); 
```

2) 使用 CookieContainer.Add 方法将 cookie 对象添加到 HttpWebRequest.CookieContainer 中。

```
request.CookieContainer.Add(new Uri("http://api.search.live.net"),new Cookie("id","1234")); 
```

**更新：**对于您的新评论，访问 cookie 非常简单，您可以从 HttpContext.Current.Request.Cookies 获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T14:03:22.817

这是一个使用 HttpWebRequest 和通过 HttpContext.Current.Request.Cookies 对象提供的浏览器 cookie 的方法。

```
public static string WebRequestPostRequest(string url)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

    CookieContainer cookieContainer = new CookieContainer();
    HttpCookieCollection httpCookies = HttpContext.Current.Request.Cookies;

    for (int j = 0; j < httpCookies.Count; j++)
    {
        HttpCookie httpCookie = httpCookies.Get(j);
        Cookie myCookie = new Cookie();

        // Convert between the System.Net.Cookie to a System.Web.HttpCookie...
        myCookie.Domain = request.RequestUri.Host;
        myCookie.Expires = httpCookie.Expires;
        myCookie.Name = httpCookie.Name;
        myCookie.Path = httpCookie.Path;
        myCookie.Secure = httpCookie.Secure;
        myCookie.Value = httpCookie.Value;

        cookieContainer.Add(myCookie);
    }

    request.Method = "POST";
    //set other request properties here...

    var response = (HttpWebResponse)request.GetResponse();

    return new StreamReader(response.GetResponseStream()).ReadToEnd();
} 
```

# asp.net - 在 MVC 应用程序中设置的数据库上下文可以使用多长时间？

> ID：15085183
> 
> 赞同：1
> 
> 时间：2013-02-26T09:12:51.823
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我的 MVC 应用程序中有以下内容：

```
namespace WebUx.Areas.User.Controllers
{
    [Authorize]
    [InitializeSimpleMembership]
    public class AccountController : Controller
    { 
```

加：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            System.Diagnostics.Debug.Write("Set Initializer\n");
            Database.SetInitializer<UsersContext>(null);

            try
            {
                using (var context = new UsersContext())
                {
                    if (!context.Database.Exists())
                    {
                        // Create the SimpleMembership database without Entity Framework migration schema
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }

                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);

            } 
```

我知道当调用帐户控制器时，这将设置数据库上下文，但是一旦设置，它将为我的应用程序保持设置。稍后连接的其他用户呢？数据库上下文是否始终可用？

我问这个的原因是我有其他信息要存储在表中并使用 Web API 访问。我应该为这些控制器编写类似的代码，以便每次检查是否有可用的数据库上下文，还是可以只使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:28:31.123

该连接与`DbContext`. `DbContext`因此，只有在您的继承类（`UsersContext`在您的情况下）保留其范围时，连接才会打开。

在您的示例中，`UsersContext`范围为`using`块。

```
using (var context = new UsersContext())
{
 //some actions
} 
```

因此，一旦“某些操作”完成，连接将关闭，任何访问延迟加载的尝试都会抛出异常，说明连接不再可用。在我看来，每次你需要访问你的数据库时，你都应该开始一个新的连接。您要确保您只对数据库进行一次实际访问。确保您的查询已经过优化，这样您就不会多次访问数据库，而是一次完成所有操作，因为这会影响您的性能。

## 编辑

作为旁注， using 块分解为：

```
try{
 var context = new UsersContext();
 //some actions
}finally{
 context.Dispose();
} 
```

# python - TypeError：“instancemethod”类型的对象没有 len()

> ID：15085190
> 
> 赞同：4
> 
> 时间：2013-02-26T09:13:01.300
> 
> 标签：python, django

我正在清理我的项目。我删除无用的应用程序和代码，然后安排它们。在此之后我遇到了错误

```
TypeError: object of type 'instancemethod' has no len() 
```

所以我将其更改为 count() 但我再次遇到错误

```
AttributeError: 'function' object has no attribute 'count' 
```

这是我的代码：

```
def budget(request):
    envelopes = Envelope.objects.filter(
         user=request.user).exclude_unallocated

    return render(request, 'budget.html', {
        'limit': account_limit(request, 15, envelopes),
    }

def account_limit(request, value, query):
    count_objects = len(query)

    //other codes here

    return result 
```

我想我在这里删除了一些东西，这就是我收到错误的原因

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T09:14:37.747

你忘了放 ()

```
 envelopes = Envelope.objects.filter(user=request.user).exclude_unallocated() 
```

# lua - Lua：向表中添加多行

> ID：15085204
> 
> 赞同：4
> 
> 时间：2013-02-26T09:14:04.477
> 
> 标签：lua, love2d

好的，所以我希望快速生成一个相当大的表。看起来像这样的东西：

```
table{
{1, 1, 1, 1},
{1, 1, 1, 1},
{1, 1, 1, 1},
} 
```

只有表会包含更多的行，以及这些行中的更多值。我知道使用 table.insert() 我可以轻松地将我需要的任意数量添加到单行中，但是无论如何我也可以添加全新的行而无需全部输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:25:31.250

使用`for`循环。

```
t = { }
for i = 1,100 do
    table.insert(t, i) -- insert numbers from 1 to 100 into t
end 
```

二维数组也很简单

```
t = { }
for row = 1,20 do
    table.insert(t, { }) -- insert new row
    for column = 1,20 do
        table.insert(t[row], "your value here")
    end
end 
```

你可以记住当前行`local current_row = t[row]`，但是在你配置文件之前不要尝试这些东西来提高性能！如果您认为它更清楚地表达了目的，则仅将它们用于可读性。

还要注意（在 5.1 和更新版本中特别时髦`#`），您可以直接将值分配给不存在的索引，它们将被添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T10:59:31.850

你不需要使用`table.insert`：

```
t = {}
for row = 1,20 do
    t[row] = {}
    for column = 1,20 do
        t[row][column]= "your value here"
    end
end 
```

# iphone - KVO机制抛出错误？

> ID：15085209
> 
> 赞同：0
> 
> 时间：2013-02-26T09:14:21.653
> 
> 标签：iphone, ios, objective-c, ipad, key-value-observing

我正在实现一个照片编辑应用程序，其中我有一个相机捕获的图像，一个是输出图像，它显示在捕获的图像旁边。每当我更改捕获的图像缩放或旋转时，我都想将此更改通知给 outputImage。对于这个场景，我编写了以下代码，

```
-(void)imageCapturedByCameraAPI:(UIImage *)theCapturedImage{
[[arOverlayVC view] removeFromSuperview];
capturedImageView.image = theCapturedImage;
[self.view addSubview:imageEditorView];

rotationGesture = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];
[capturedImageView addGestureRecognizer:rotationGesture];
**//KVO added for rotation**
[capturedImageView addObserver:self forKeyPath:@"transform.rotate" options:NSKeyValueObservingOptionNew context:NULL];

pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scalePiece:)];
[pinchGesture setDelegate:self];
[capturedImageView addGestureRecognizer:pinchGesture];
**//KVO added for scaling**
[capturedImageView addObserver:self forKeyPath:@"transform.scale" options:NSKeyValueObservingOptionNew context:NULL];

}

   - (void)rotatePiece:(UIRotationGestureRecognizer *)gestureRecognizer {
[self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
    [gestureRecognizer view].transform = CGAffineTransformRotate([[gestureRecognizer view] transform], [gestureRecognizer rotation]);
    [self editedImage];
    [gestureRecognizer setRotation:0];
}
 }

- (void)scalePiece:(UIPinchGestureRecognizer *)gestureRecognizer {
if([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
    lastScale = [gestureRecognizer scale];
}

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan ||
    [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

    CGFloat currentScale = [[[gestureRecognizer view].layer valueForKeyPath:@"transform.scale"] floatValue];

    const CGFloat kMaxScale = 2.0;
    const CGFloat kMinScale = 1.0;

    CGFloat newScale = 1 -  (lastScale - [gestureRecognizer scale]);
    newScale = MIN(newScale, kMaxScale / currentScale);
    newScale = MAX(newScale, kMinScale / currentScale);
    CGAffineTransform transform = CGAffineTransformScale([[gestureRecognizer view] transform], newScale, newScale);
    [gestureRecognizer view].transform = transform;
    lastScale = [gestureRecognizer scale];  
}
 }

  - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
// if the gesture recognizers are on different views, don't allow simultaneous recognition

if (gestureRecognizer.view != otherGestureRecognizer.view)
    return NO;

// if either of the gesture recognizers is the long press, don't allow simultaneous recognition
if ([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]] || [otherGestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]])
    return NO;

return YES;
   }

 - (void)adjustAnchorPointForGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer    {
if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
    UIView *piece = gestureRecognizer.view;
    CGPoint locationInView = [gestureRecognizer locationInView:piece];
    CGPoint locationInSuperview = [gestureRecognizer locationInView:piece.superview];

    piece.layer.anchorPoint = CGPointMake(locationInView.x / piece.bounds.size.width, locationInView.y / piece.bounds.size.height);
    piece.center = locationInSuperview;
}
  } 
```

现在我的观察方法是，

```
 - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
   {
if(object == capturedImageView && ([keyPath isEqualToString:@"transform.rotate"] || [keyPath isEqualToString:@"transform.scale"])) {
    NSLog(@"KVO detected");
     }
  } 
```

我发现以下错误，

> NSConcreteValue 类的实例 0x189f40 已被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在 NSKVODeallocateBreak 上设置断点以在调试器中停止。这是当前的观察信息：（上下文：0x0，属性：0x189ff0>
> 
> NSConcreteValue 类的实例 0x188cb0 被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在 NSKVODeallocateBreak 上设置断点以在调试器中停止。这是当前的观察信息：（上下文：0x0，属性：0x188d80>
> 
> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法更新观察者的关键路径“transform.scale”，很可能是因为关键“transform”的值已更改而未发送适当的 KVO 通知。检查 UIImageView 类的 KVO 合规性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:26:01.120

正如错误消息所说

> 一个类的实例被解除分配，而键值观察者仍向它注册

`capturedImageView`您需要在使用解除分配之前删除观察`removeObserver:forKeyPath:context:`

为了不破坏 KVO，确保平衡注册/注销的计数非常重要。

我想了解更多关于 KVO 的信息，这个链接很有帮助： http: [//www.mikeash.com/pyblog/key-value-observing-done-right.html](http://www.mikeash.com/pyblog/key-value-observing-done-right.html)

第 2 部分：http : [//www.mikeash.com/pyblog/friday-qa-2012-03-02-key-value-observing-done-right-take-2.html](http://www.mikeash.com/pyblog/friday-qa-2012-03-02-key-value-observing-done-right-take-2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:32:36.510

**arc 仅处理 NSObject&Co 的内存，其他所有需要手动清理的内容（例如 KVO 或网络连接或文件写入）**

为此覆盖 -(void)dealloc

```
- (void)dealloc {
    [capturedImageView removeObserver:self forKeyPath:@"transform.scale"];   
} 
```

# haskell - 类型化表达式解析器

> ID：15085212
> 
> 赞同：7
> 
> 时间：2013-02-26T09:14:27.747
> 
> 标签：haskell

我正在尝试在 Haskell 中创建一个类型化的表达式解析器，到目前为止效果很好，但我目前正在努力实现高阶函数。我把问题归结为一个简单的例子：

```
{-# LANGUAGE TypeFamilies,GADTs,FlexibleContexts,RankNTypes #-}

-- A function has an argument type and a result type
class Fun f where
  type FunArg f
  type FunRes f

-- Expressions are either constants of function applications
data Expr a where
  Const :: a -> Expr a
  App :: Fun f => f -> FunArg f -> Expr (FunRes f)

-- A very simple function
data Plus = Plus

-- Which takes two integer expressions and returns an integer expression
instance Fun Plus where
  type FunArg Plus = (Expr Int,Expr Int)
  type FunRes Plus = Int

-- A more complicated function which lifts a function to lists (like in haskell)
data Map f r = Map f

-- For this we need the concept of lifting function arguments:
class Liftable a where
  type LiftRes a

-- A singleton argument is lifted by changing the expression type from a to [a]
instance Liftable (Expr a) where
  type LiftRes (Expr a) = Expr [a]

-- Two function arguments are lifted by lifting each argument
instance (Liftable a,Liftable b) => Liftable (a,b)  where
  type LiftRes (a,b) = (LiftRes a,LiftRes b)

-- Now we can declare a function instance for Map
instance (Fun f,Liftable (FunArg f),r ~ LiftRes (FunArg f)) => Fun (Map f r) where
  type FunArg (Map f r) = r
  type FunRes (Map f r) = [FunRes f]

-- Now a parser for functions:
parseFun :: [String] -> (forall f. Fun f => f -> a) -> a
-- The parser for the plus function is easy:
parseFun ["plus"] f = f Plus
-- But the parser for map is not possible:
parseFun ("map":sym) f 
  = parseFun sym (\fun -> f (Map fun)) 
```

问题似乎是没有办法让类型检查器相信每个 LiftRes 本身都是 Liftable，因为递归类声明是被禁止的。

我的问题是：我该如何进行这项工作？是否有其他类型的表达式解析器示例可以从中获取提示？

**编辑：**似乎[这个关于类型族约束](https://stackoverflow.com/questions/14133121/can-i-constrain-a-type-family)的讨论似乎非常相关。但是，我无法使他们的解决方案适用于我的情况，也许有人可以提供帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:44:22.920

使您的示例工作的最简单方法是`Liftable (FunArg f)`从实例声明中删除约束。但我认为你的例子太简洁了，它并没有说明你为什么真正需要它。

所以下一个最好的事情是给类添加一个`Liftable (FunArg f)`超类约束`Fun`：

```
class Liftable (FunArg f) => Fun f where
  ... 
```

如果这不可行（即，如果不是所有函数都具有可提升的参数类型），那么您不能期望编写`parseFun`给定类型的 a。

更笼统的评论：我认为您在这里尝试做的事情很奇怪，而且可能一次太多了。从非结构化字符串解析为上下文无关数据类型已经够难的了。为什么不先这样做，然后编写一个单独的函数，将您的语言的“无类型”但结构化的表示转换为有类型的表示。

**编辑（作为对评论的回应，已修订）：正如您在问题中链接**[的关于类型族约束的讨论中](https://stackoverflow.com/questions/14133121/can-i-constrain-a-type-family)指出的那样，您可以通过使用绕过超类循环限制`ConstraintKinds`。这是一种使您的简化示例工作的方法。也许这将扩展到完整的解决方案？

```
{-# LANGUAGE RankNTypes, ScopedTypeVariables, TypeFamilies, FlexibleContexts, GADTs #-}

import Data.Constraint  -- from the constraints package
import Data.Proxy       -- from the tagged package

-- A function has an argument type and a result type
class Liftable (FunArg f) => Fun f where
  type FunArg f
  type FunRes f

-- Expr, Plus, and instance Fun Plus as before

class Liftable a where
  type LiftRes a
  get :: p a -> Dict (Liftable (LiftRes a))
    -- acquire "superclass" dictionary by calling this method and
    -- then pattern matching on the result

instance Liftable (Expr a) where
  type LiftRes (Expr a) = Expr [a]
  get _ = Dict

instance (Liftable a, Liftable b) => Liftable (a, b) where
  type LiftRes (a, b) = (LiftRes a, LiftRes b)
  get (_ :: p (a, b)) =
    case get (Proxy :: Proxy a) of -- extra code required
      Dict -> case get (Proxy :: Proxy b) of -- extra code required
        Dict -> Dict

data Map f r = Map f

instance (Fun f, Liftable r, r ~ LiftRes (FunArg f)) => Fun (Map f r) where
  type FunArg (Map f r) = r
  type FunRes (Map f r) = [FunRes f]

parseFun :: forall a. [String] -> (forall f. Fun f => f -> a) -> a
parseFun ["plus"]      f = f Plus
parseFun ("map" : sym) f = parseFun sym
  (\ (fun :: g) -> case get (Proxy :: Proxy (FunArg g)) of -- extra code required
                     Dict -> f (Map fun)) 
```

# html - Dreamweaver：背景图像设置为高度：自动将不显示任何内容

> ID：15085213
> 
> 赞同：1
> 
> 时间：2013-02-26T09:14:29.203
> 
> 标签：html, css, responsive-design, dreamweaver, fluid-layout

我今天在这里阅读了很多问题，希望无济于事地回答我的问题，所以我希望这里有人可以帮助我。

我正在尝试将我的网站发展为响应式网页设计，并且图像有问题。

问题：

我正在尝试从标记为背景图像的 css 中加载图像，但由于我正在加载它们的容器中没有内容，因此将高度设置为 auto 将导致没有图片，因为容器在技术上为 0 而没有任何内容。我需要将高度设置为自动，因为我需要图像与网页一起缩放，以便在没有大的空白区域的情况下保持比例。

我知道要有我的背景图像比例，我必须将我的 css 设置为：

```
background: url(../images/image.jpg);
background-repeat: no-repeat;
height: auto;
width: 100%; 
```

同样，这对我不起作用的原因是因为我希望将背景图像用作没有任何内容的实际图像。由于没有内容，因此图像不会显示。我想知道是否有办法解决这个问题。

我选择通过 css 加载图像的原因是因为我希望能够基于查看者设备（台式机、手机、平板电脑）加载特定图像的多个版本（从小到大的文件大小按特定设备大小缩放） ， ETC）。

只是为了涵盖所有理由，我想提一下，我在 html 中使用了 img 标签，并通过 css 为不同的设备重新缩放。但是，如果可能的话，我仍然希望通过 css 加载图像，因为它允许我为不同的设备大小加载不同的文件大小，以增强移动设备的用户体验。如果有其他方法可以做到这一点，请告知。我已经为此花费了 26 个工作小时，因此我们将不胜感激。

编辑：

我已经开始了一个测试模板来保持编码简单，这样每个人都可以看到我正在使用什么，也许有助于诊断它为什么不工作。

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<script type="text/javascript" src="js/jquery.js"></script>

<link href="css/test.css" rel="stylesheet" type="text/css" media="screen">
<link href="css/print.css" rel="stylesheet" type="text/css" media="print">

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="content-type" content="cache" />
<meta name="robots" content="INDEX,FOLLOW" />
<meta name="keywords" content="Enter Keywords" />
<meta name="description" content="Description Here" />

<link rel="shortcut icon" href="/s.ico" >

<meta id="view" name="viewport" content="width=device-width, initial-scale=1.0" />

<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <link rel="stylesheet" type="text/css" href="includes/stylesheet_ie.css" />
<![endif]-->

</head>

<body>

    <div class="page">

        <div class="page_content">

                <div class="contentmain"></div>

        </div>
    </div>
</body>
</html>
</body>

</html> 
```

我的 CSS：

```
/* This stylesheet was designed and developed by Chris Converse, Codify Design Studio */

@charset "UTF-8";

/* Text Formatting */

body {
font-family: Arial;
font-size: 12px;
margin: 0px;
padding: 20px;
color: #555;
background: url(../images/back.jpg)
}

.page { font-size: 1em; background-color: #FFF; }

h1 { font-size: 2em; color: #9e472a; margin: 0px 0px .5em 0px; font-weight: normal; }
h2 { font-size: 1.6em; color: #9e472a; margin: 0px 0px .5em 0px; }
h3 { font-size: 1.25em; color: #9e472a; margin: 0em 0px .25em 0px; }
p { margin: 0px 0px 1em 0px; font-size: 1em; }
li { margin: 0px 0px 10px 0px; }
a img { border: none; }
a { color: #f52d1b; }
a:hover { color: #00a2ed; }

/* Layout */

.page { position: relative; margin: 0px auto 0px auto; max-width: 980px; }

.page .page_content { background-color: #fff; padding: 1px 0px 1px 0px; }

.page .page_content .page_content_container_main { width: 100%; float: left; margin:     0px; padding: 0px;  }

.page .page_content .content {
margin: 15px 20px 20px 20px;
padding: 0px;

}

.page .page_content .contentmain {

background: url(../images/mimg-l.jpg);
background-repeat: no-repeat;
height: auto;
width: 100%;
background-size: 100% 100% contain; 
```

可以在 www.dreamcreationstudios.com/test2.html 找到我正在尝试实现的示例。这是通过 img 标签完成的。我希望能够创建相同的效果，除了通过 css 加载图像，以便我可以加载各种屏幕尺寸的原始图像的裁剪版本。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-22T15:45:04.783

这可以通过在带有背景图像的 div 上应用 padding-bottom 来完成，但您必须首先知道图像的纵横比。

```
.page .page_content .contentmain {
    background: url(../images/mimg-l.jpg);
    background-repeat: no-repeat;
    height: 0; //Make the div 0px high
    padding-bottom: 75%; //Adjust this value to match the image dimensions
    background-size: 100% 100% contain;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:12:07.473

您可以为内容容器设置最小高度，这样容器在没有内容时不会折叠到 0 的高度：`min-height`对您有用。

或者，您可以在已定义高度的父元素上设置背景图像。

p/s：如果您不想要丑陋的空白，因为背景无法覆盖整个容器，那么您应该使用`background-size: cover`. 您将保留图像的纵横比，并且浏览器将相应地缩放背景图像，使其最短的轴将延伸到完全覆盖容器所需的距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:14:32.183

有一大堆黑客可以以响应的方式进行。这不是 Dreamweaver 的错。默认情况下，浏览器会查看您的代码并检查是否有任何空白元素没有任何子元素或其本身具有定义的宽度和高度。您已经定义了它的宽度很好，但不幸的是它没有得到这个容器的任何高度。最好和最快的方法是定义它的`background-size`属性，不要担心容器的高度。

```
background: url(../images/image.jpg);
background-repeat: no-repeat;
height: auto;
width: 100%;
background-size: 100% 100%; // example, you can change it. 
```

它可以在所有设备上完美运行。

# uitableview - ios6 - 如何使工具栏按钮在另一个视图控制器中执行操作

> ID：15085219
> 
> 赞同：0
> 
> 时间：2013-02-26T09:15:02.997
> 
> 标签：uitableview, ios6, uibarbuttonitem

我有一个带有 Add BarButton 的 UI 工具栏。我希望这会触发从属 viewController 中的操作。我被困住了。

工具栏设置如下：

TopViewController.h

```
IBOutlet UIToolbar* toolbar;
@property (retain, nonatomic) IBOutlet UIToolbar *homeButton;
@property (retain, nonatomic) IBOutlet UIToolbar *addButton;

- (IBAction)homePlease:(id)sender;
- (IBAction)addStuff:(id)sender; 
```

TopViewController.m

```
@class ItemViewController;
#import "ItemViewController.h"

- (IBAction)homePlease:(id)sender {
    //NSLog(@"%s", __FUNCTION__);
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (IBAction)addStuff:(id)sender {
    NSLog(@"%s", __FUNCTION__);
    [self.itemViewController insertNewObject:self]; <-----
} 
```

项目视图控制器：

```
- (void)insertNewObject:(id)sender {
    //NSLog(@"%s", __FUNCTION__);

    AddItemViewController *addItem = [[AddItemViewController alloc] initWithNibName:@"AddItem-iPad" bundle:nil];

    // Create a new managed object context for the new item - set its persistent store coordinator
    // to the same as that from the fetched results controller's context.

    NSManagedObjectContext .......

    [self.addContext setPersistentStoreCoordinator:[[self.fetchedResultsController managedObjectContext] persistentStoreCoordinator]];

    addItem.item = (DDItem *)[NSEntityDescription insertNewObjectForEntityForName:@"Item" inManagedObjectContext:context];

    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:addItem];
    nc.modalPresentationStyle = UIModalPresentationFormSheet;
    [self presentViewController:nc animated:YES completion:nil];

} 
```

主页按钮工作正常。

addButton 触发（我看到了日志）。但没有其他事情发生。添加按钮连接到 IBAction。

任何建议都将受到欢迎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:39:00.360

看来[这个答案](https://stackoverflow.com/questions/4476361/adding-items-to-uitoolbar-programatically-not-working?rq=1)是正确的。您必须在其呈现视图控制器中设置按钮。我希望这对其他人有帮助。

# php - file_get_contents 比 iframe 快吗

> ID：15085222
> 
> 赞同：1
> 
> 时间：2013-02-26T09:15:07.420
> 
> 标签：php, iframe

目前我正在通过 iframe 加载一些外部网站来展示内容。但是，由于这些站点在地理位置上远离我的用户和我的服务器，所以对他们来说真的很慢。

我最近遇到了 php 方法 file_get_contents() 并读到它会更快，因为它的服务器端脚本。我的问题是，从用户的角度来看。file_get_contents 是否会比 iframe 更快地为我的用户加载外部站点，或者是否有其他一些 php 方法比 iframe 可以使用更快。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:20:06.407

如果您在向客户端发送*任何内容*之前在服务器上获取所有这些站点，那么在您的服务器加载每个页面之前，客户端将*什么也看不到。*如果您使用 iframe，客户端将异步加载站点，并且会更早地看到*一些内容。*如果您的服务器会定期获取这些页面并**缓存**它们，那么您将拥有优势。

但是，在服务器上加载站点并嵌入它们的 HTML 也意味着您必须在服务器端进行大量处理来重写和修复这些站点具有的所有外部包含（样式表、Javascript、图像），因为它们是现在从不同的域提供服务。

简而言之：可能不会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T09:20:43.533

想一想，您将充当代理：

```
+---------------+                      +-------------+
| external site |<---far far away------| your server |
+---------------+                      +-------------+
                                              ^
                                              |
                                      +----------------+
                                      | client browser |
                                      +----------------+ 
```

这增加了另一层，但不会使外部站点更靠近任何人。结论：如果有的话，它会更慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:29:11.537

仅使用问题`file_get_contents()`

*   在 iframe 中，页面样式不会更改 iframe 内容的样式，而 php 上的 file_get_contents() 可能会导致样式混乱。
*   如果您的站点获得大量流量，不断地从服务器查询外部链接可能会使您的服务器 ip 从外部服务器列入黑名单。

**最佳解决方案是：**

*   加载外部文件并将其保存为 cron 作业。

*   将文件与页面必备项（css 和 js）一起保存在您的服务器上。

*   将此本地文件加载到 iframe 中，从而实现异步显示和快速的用户体验。

# r - 如何在不更改 R 中的维度（没有 S4）的情况下分配给数组？

> ID：15085223
> 
> 赞同：0
> 
> 时间：2013-02-26T09:15:12.667
> 
> 标签：r, class, operator-overloading, variable-assignment

假设我有以下对象：

```
X<-NULL
X$y<-1:10
X$A<-array(1:15,c(3,3,5))
attr(X,"Adim1")<-3
attr(X,"Adim2")<-5
class(X)<-"MyClass" 
```

现在我想更改 的值`X$A`，而不选择更改它的尺寸，即**我想`X$A`拥有以下属性**：

```
# This should work
    X$A<- array(1,c(3,3,5))
# This should give an error or be identical with  X$A[]<-4 i.e. X$A<- array(4,c(3,3,5))
    X$A<- 4 
#Actually it should be possible to change the last dimension to 1 but that's just some sugar:
    X$A<- array(1,c(3,3,1)) 
```

我想知道这种行为可以做到吗？我正在考虑给 x$A 一些类，如“MyClassArray”，并通过适当的检查重载赋值运算符，但通过快速谷歌搜索，似乎不建议甚至可能重载“<-”运算符。那么还有其他选择吗？

我知道它可以使用 S4 类来完成，但我不想混合使用 S3 和 S4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:30:00.297

使用`[<-`，像这样：

```
X <- NULL
X$A <- array(1:15,c(3,3,5))
X$A[] <- 4
X

$A
, , 1

     [,1] [,2] [,3]
[1,]    4    4    4
[2,]    4    4    4
[3,]    4    4    4

, , 2

     [,1] [,2] [,3]
[1,]    4    4    4
[2,]    4    4    4
[3,]    4    4    4

... etc. 
```

# api - 在Z3中调用一些策略后如何使用枚举常量？

> ID：15085232
> 
> 赞同：2
> 
> 时间：2013-02-26T09:15:33.290
> 
> 标签：api, z3, enumerated-types

这是我的枚举类型测试程序的源代码：

```
 Z3_symbol enum_names[3];
    Z3_func_decl enum_consts[3];
    Z3_func_decl enum_testers[3];
    enum_names[0]=Z3_mk_string_symbol(z3_cont,"a");
    enum_names[1]=Z3_mk_string_symbol(z3_cont,"b");
    enum_names[3]=Z3_mk_string_symbol(z3_cont,"c");
    Z3_symbol enum_nm = Z3_mk_string_symbol(z3_cont,"enumT");
    Z3_sort s = Z3_mk_enumeration_sort(z3_cont, enum_nm, 3, enum_names, enum_consts, enum_testers);
    z3::sort ss(z3_cont,s);
    z3::expr a = z3::expr(z3_cont,Z3_mk_app(z3_cont,enum_consts[0],0,0));
    z3::expr b = z3::expr(z3_cont,Z3_mk_app(z3_cont,enum_consts[1],0,0));
    z3::expr x =       z3::expr(z3_cont,Z3_mk_const(z3_cont,Z3_mk_string_symbol(z3_cont,"x"),s));
    z3::expr test = (x==a)&&(x==b);
    cout<<"1:"<<test<<endl;

    printf("%s\n", Z3_func_decl_to_string(z3_cont, enum_consts[0]));
    printf("%s\n", Z3_func_decl_to_string(z3_cont, enum_consts[1]));
    printf("%s\n", Z3_func_decl_to_string(z3_cont, enum_consts[2]));

    z3::tactic qe(z3_cont,"ctx-solver-simplify");
    z3::goal g(z3_cont);
    g.add(test);
    z3::expr res(z3_cont);
    z3::apply_result result_of_elimination = qe.apply(g);
    if ( result_of_elimination.size() == 1){
         z3::goal result_formula = result_of_elimination[0];
         res =  result_formula.operator[](0);
         for (int i = 1; i < result_formula.size(); ++i){
                  res = res && result_formula.operator[](i);
         }
    }
    cout<<"2:"<<res<<endl;

    printf("%s\n", Z3_func_decl_to_string(z3_cont, enum_consts[0]));
    printf("%s\n", Z3_func_decl_to_string(z3_cont, enum_consts[1]));
    printf("%s\n", Z3_func_decl_to_string(z3_cont, enum_consts[2])); 
```

屏幕输出如下： 1:(and (= xa) (= xb))

(declare-fun a () enumT)

(declare-fun b () enumT)

**(declare-fun x() enumT)** 这里我期待“c”，为什么是“x”？

2：假

(declare-fun a () enumT)

**(declare-fun bv () (_BitVec 1))** 为什么不是“b”？

(declare-fun x () enumT)

主要问题是在调用了一些策略之后我应该如何在我的程序中使用枚举常量？

enum_consts 结构损坏，Z3_mk_app(z3_cont,Z3_mk_func_decl(z3_cont,Z3_mk_string_symbol(z3_cont,"a"),0,0,s),0,0) 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:40:32.460

正如 Nikolaj 所指出的，你有一个错字。更重要的是，您正在滥用 C/C++ API。可以同时使用这两个 API。但是，当使用 C API 时，我们必须手动增加引用计数器，或者使用 C++ API 中可用的 C++ 包装器来包装 Z3_ast 值。否则，内存将被损坏。例如，当我们调用

```
Z3_sort s = Z3_mk_enumeration_sort(z3_cont, enum_nm, 3, enum_names, enum_consts, enum_testers); 
```

我们必须在和中增加`Z3_func_decl`s的引用计数器。否则，这些对象将被 Z3 垃圾回收。这发生在您的示例中。这就是为什么你会得到奇怪的结果。如果我们在您的示例中运行诸如[Valgrind](http://valgrind.org/)之类的工具，它将报告许多内存访问冲突。`enum_names``enum_consts`

这是您的示例的固定版本：

```
using namespace z3;
...
context z3_cont;
...

Z3_symbol enum_names[3];
Z3_func_decl enum_consts[3];
Z3_func_decl enum_testers[3];
enum_names[0]=Z3_mk_string_symbol(z3_cont,"a");
enum_names[1]=Z3_mk_string_symbol(z3_cont,"b");
enum_names[2]=Z3_mk_string_symbol(z3_cont,"c");
Z3_symbol enum_nm = Z3_mk_string_symbol(z3_cont,"enumT");
sort s = to_sort(z3_cont, Z3_mk_enumeration_sort(z3_cont, enum_nm, 3, enum_names, enum_consts, enum_testers));
func_decl a_decl = to_func_decl(z3_cont, enum_consts[0]);
func_decl b_decl = to_func_decl(z3_cont, enum_consts[1]);
func_decl c_decl = to_func_decl(z3_cont, enum_consts[2]);
expr a = to_expr(z3_cont, Z3_mk_app(z3_cont, a_decl, 0, 0));
expr b = to_expr(z3_cont, Z3_mk_app(z3_cont, b_decl, 0, 0));
expr x = z3_cont.constant("x", s);
expr test = (x==a) && (x==b);
std::cout << "1: " << test << std::endl;

tactic qe(z3_cont,"ctx-solver-simplify");
goal g(z3_cont);
g.add(test);
expr res(z3_cont);
apply_result result_of_elimination = qe.apply(g);
if ( result_of_elimination.size() == 1){
    goal result_formula = result_of_elimination[0];
    res =  result_formula.operator[](0);
    for (int i = 1; i < result_formula.size(); ++i){
        res = res && result_formula.operator[](i);
    }
}
std::cout << "2: " << res << std::endl; 
```

请注意，我将值包装在`enum_consts`使用`func_decl`C++ 对象中。这些对象本质上是智能指针。他们自动为我们管理引用计数器。

我还使用一种方法扩展了 C++ API，以简化枚举排序的创建。 [http://z3.codeplex.com/SourceControl/changeset/b2810592e6bb](http://z3.codeplex.com/SourceControl/changeset/b2810592e6bb)

我还提供了一个示例，展示了如何使用这个新的 API。此扩展将在下一个版本 (Z3 v4.3.2) 中可用。它已经在不稳定（工作中）分支中可用，明天也将在[nightly builds](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html)中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:55:32.173

(declare-fun x() enumT) 这里我期待“c”，为什么是“x”？

尝试改变：

```
enum_names[0]=Z3_mk_string_symbol(z3_cont,"a");
enum_names[1]=Z3_mk_string_symbol(z3_cont,"b");
enum_names[3]=Z3_mk_string_symbol(z3_cont,"c"); 
```

至：

```
enum_names[0]=Z3_mk_string_symbol(z3_cont,"a");
enum_names[1]=Z3_mk_string_symbol(z3_cont,"b");
enum_names[2]=Z3_mk_string_symbol(z3_cont,"c"); 
```

看看是否有帮助

# ruby-on-rails-3 - ajax调用在rails 3中传递javascript变量

> ID：15085236
> 
> 赞同：0
> 
> 时间：2013-02-26T09:15:42.553
> 
> 标签：ruby-on-rails-3

```
<script> var depart_date='11 February 2013';
         var depart_date='21 February 2013';

    jQuery.ajax({

data: { depart: depart_date, return_date: return_date},
    type: 'post',
  url: "/payment/create",

}); 
```

这是我的ajax调用。

在终端中，它的价值为 {"depart"=>"11 February 2013", "return_date"=>"21 February 2013"}

但在控制器中 params[:depart] & params[:return_date] 显示为 nil 值。

不知道我在哪里做错了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:25:15.100

将离开日期更改为返回日期并在最后结束脚本：

```
<script> 

   var depart_date='11 February 2013';
   var return_date='21 February 2013';

        jQuery.ajax({

    data: { depart: depart_date, return_date: return_date},
        type: 'post',
      url: "/payment/create",

    });

    </script> 
```

# python - 有没有办法从当前正在执行的 python 程序中逐行输出管道？

> ID：15085237
> 
> 赞同：6
> 
> 时间：2013-02-26T09:15:46.457
> 
> 标签：python, bash, grep, pipe

当将 python 脚本的打印输出通过管道传输到 grep 等命令时，脚本的输出似乎仅在整个脚本完成后才通过管道传输到后续命令。

例如，在`test_grep.py`如下脚本中：

```
#!/usr/bin/env python
from time import sleep

print "message1"
sleep(5)
print "message2"
sleep(5)
print "message3" 
```

当用 调用时`./test_grep.py | grep message`，10 秒内什么都不会出现，此时所有三行都会出现。

将此与脚本进行比较`test_grep.sh`：

```
#!/usr/bin/env bash
echo "message1"
sleep 5 
echo "message2"
sleep 5
echo "message3" 
```

`./test_grep.sh | grep message`将立即输出`message1`，然后每隔 5 秒输出`message2`和`message3`。

我希望这是因为只有在 python 解释器完成执行后，输出才可用于下一个命令。有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T09:19:23.763

你能行的：

*   `print`通过在 python 中刷新每个
*   通过将 stdout 设置为无缓冲
*   通过将 stdout 设置为行缓冲

您甚至可以调用`python -u`禁用缓冲。

* * *

我会选择行缓冲选项，因为它看起来最自然。

```
open(file, mode='r', buffering=-1 ....) 
```

> buffering 是一个可选整数，用于设置缓冲策略。传递 0 关闭缓冲（仅在二进制模式下允许），**1 选择行缓冲**（仅在文本模式下可用），整数 > 1 表示固定大小的块缓冲区的大小。

当您不指定缓冲（典型的“打开”）时，如果它检测到输出将直接执行 TTY，即到您的屏幕控制台，它将使用行缓冲。如果您通过管道输出或将其重定向到文件，它将切换回大型（4K / 8K）缓冲区。

* * *

> 你如何“将标准输出设置为行缓冲”？

您可以`stdout`通过重新打开`sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 1)`。

# javascript - 如何获取文本字段值并通过 Web 服务发送值

> ID：15085238
> 
> 赞同：0
> 
> 时间：2013-02-26T09:15:54.710
> 
> 标签：javascript, jquery, asp.net-mvc

当用户单击按钮时，我需要将以下 TextFields 的值提交到位于`/TestService/SaveMethod`.

```
 <div class="content">
                  @Html.TextBoxFor(mo => mo.id, new { id = "id" })     
                 <input type="text" id="fname" name="fname" />     
                <input type="submit" value="send" class="save"/>

        </div> 
```

jQuery：

```
$(function () {
    $('.save').click(function () {  // How to grab the values of those textfields and send it over the webservice located at `/TestService/SaveMethod` });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:24:04.537

应该是这样的：它会给你名字的价值。

```
$(function () {
    $('.save').click(function ()
    {
        var name = $("#fname").val();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:58:39.787

你可以用 jquery ajax 来做。这是为您测试的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Test webservices</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script> 

    <script>
        $(document).ready(function () {
            $('#submit').click(function (e) {
                e.preventDefault();
                var x = $('#myval').val();
                $.ajax({                                      
                    url: 'webservice.php', 
                    type: 'GET',
                    contentType: 'text/html',
                    dataType: 'text',
                    data:  {
                         data : x
                    },
                    success: function(response)
                    {
                        alert("data send to webservice");
                    },
                    error: function (response) 
                    {
                    },
                });         
            });
        });

    </script>
</head>
<body>
    <form action='' method='get'>
        <input type='text' name='myval' id='myval' >
        <input type='submit' value='Go' id='submit' >
    </form>

</body>
</html> 
```

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:20:43.813

你不需要 jQuery，除非你明确地想要使用它，而且对于 ajax 也是如此。只需在您的 html 中放入一个表单，例如：

```
 <div class="content">
   @using(Html.BeginForm("SaveMethod","TestService",new{},FormMethod.Post,new{}){
    @Html.TextBoxFor(mo => mo.id, new { id = "id" },new{})     
    <input type="text" id="fname" name="fname" />     
    <input type="submit" value="send" class="save"/>
   }
  </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:20:49.773

您可以通过使用 val() 方法访问其值来获取脚本中的文本字段值，并使用 ajax post 将该值发送到 Web 服务。

```
$(function () {
    $('.save').click(function () {  

 var name = $("#taYourName").val();
        $.ajax(
        {
            Type: "POST",
            contentType: "application/xml",
            url: "YourNameIs.asmx/YourName",
            data: { yourName: name },
            success: function (msg) {
                $("#lblForAjax").text(msg);
            }
        });

});
}); 
```

# oracle - Oracle 使用 UNIX 时间戳

> ID：15085239
> 
> 赞同：1
> 
> 时间：2013-02-26T09:16:09.073
> 
> 标签：oracle, zend-framework, session, unix-timestamp

我有一个会话数据表，其中包含来自 Zend_Auth_Db 的会话数据。

我想每 30 秒运行一次 Oracle 过程，以检查表中的 MODIFIED 字段是否在过去 120 秒内没有更新。我在下面有这个查询应该可以工作，但它没有返回正确的结果？

`SELECT * FROM SESSIONDATA WHERE MODIFIED < ((SYSDATE - TO_DATE('01-JAN-1970','DD-MON-YYYY')) * (86400)) - 120;`

任何人都知道我如何修改该查询以返回正确的结果？

数据库表设置：

![在此处输入图像描述](../Images/1cd2a989c7adc0ee3f608182cae2bb53.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:58:04.860

试试这个：

```
SELECT * FROM SESSIONDATA WHERE MODIFIED BETWEEN (SYSDATE - TO_DATE('01-JAN-1970','DD-MON-YYYY')) * (86400) - 120 AND (SYSDATE - TO_DATE('01-JAN-1970','DD-MON-YYYY')) * (86400); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:05:16.953

带有 Oracle DB 的服务器比托管我的应用程序的服务器早几分钟。因此，两者之间存在大约 165 秒的奇怪差异，因此它不会返回正确的结果。为了解决这个问题，我创建了一个触发器，在每次更新之前将 MODIFIED 字段更新为 sysdate：

```
create or replace
TRIGGER "TR_UPDATE_MODIFIED" 
  before update on SESSIONDATA
   for each row
    begin
     select (SYSDATE - TO_DATE('01-JAN-1970','DD-MON-YYYY')) * (86400) into :new.MODIFIED       from dual;
end; 
```

这确保了纪元时间戳与比较中的 SYSDATE 相匹配。

# python - python - 使用带有阈值图像的时刻时出现 OpenCV TypeError

> ID：15085242
> 
> 赞同：1
> 
> 时间：2013-02-26T09:16:20.993
> 
> 标签：python, image, opencv, analysis

在处理了网上找到的一些代码后，（[http://www.davidhampgonsalves.com/2011/05/OpenCV-Python-Color-Based-Object-Tracking](http://www.davidhampgonsalves.com/2011/05/OpenCV-Python-Color-Based-Object-Tracking)）我正在尝试跟踪彩色对象。在运行代码时，我已将输入从相机更改为 AVI 文件。代码运行时，没有视频，第40行的代码，

```
moments = cv.Moments(thresholded_img, 0) 
```

在参数上返回 TypeError：'Ü¤'。（它基本上是一串我不明白的符号）。任何帮助将不胜感激，我将在下面完整发布源代码。非常感谢

约翰

```
import cv 

color_tracker_window = "Color Tracker" 

class ColorTracker: 

    def __init__(self): 
        cv.NamedWindow( color_tracker_window, 1 )
        f = 'video.avi'
        self.capture = cv.CaptureFromFile(f) 

    def run(self): 
        while True: 
            img = cv.QueryFrame( self.capture ) 

            #blur the source image to reduce color noise 
            cv.Smooth(img, img, cv.CV_BLUR, 3); 

            #convert the image to hsv(Hue, Saturation, Value) so its  
            #easier to determine the color to track(hue) 
            hsv_img = cv.CreateImage(cv.GetSize(img), 8, 3) 
            cv.CvtColor(img, hsv_img, cv.CV_BGR2HSV) 

            #limit all pixels that don't match our criteria, in this case we are  
            #looking for purple but if you want you can adjust the first value in  
            #both turples which is the hue range(120,140).  OpenCV uses 0-180 as  
            #a hue range for the HSV color model 
            thresholded_img =  cv.CreateImage(cv.GetSize(hsv_img), 8, 1) 
            cv.InRangeS(hsv_img, (120, 80, 80), (140, 255, 255), thresholded_img) 

            #determine the objects moments and check that the area is large  
            #enough to be our object 
            moments = cv.Moments(thresholded_img, 0) 
            area = cv.GetCentralMoment(moments, 0, 0) 

            data = []
            #there can be noise in the video so ignore objects with small areas 
            if(area > 100000): 
                #determine the x and y coordinates of the center of the object 
                #we are tracking by dividing the 1, 0 and 0, 1 moments by the area 
                x = cv.GetSpatialMoment(moments, 1, 0)/area 
                y = cv.GetSpatialMoment(moments, 0, 1)/area 

                print 'x: ' + str(x) + ' y: ' + str(y) + ' area: ' + str(area)
                data.append(x, y, area)

                #create an overlay to mark the center of the tracked object 
                overlay = cv.CreateImage(cv.GetSize(img), 8, 3) 

                cv.Circle(overlay, (x, y), 2, (255, 255, 255), 20) 
                cv.Add(img, overlay, img) 
                #add the thresholded image back to the img so we can see what was  
                #left after it was applied 
                cv.Merge(thresholded_img, None, None, None, img) 

            #display the image  
            cv.ShowImage(color_tracker_window, img) 

            if cv.WaitKey(10) == 27: 
                break 

if __name__=="__main__": 
    color_tracker = ColorTracker() 
    color_tracker.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T14:51:50.163

您必须更改以下内容：

```
moments = cv.Moments(thresholded_img, 0)
moments = cv.Moments(cv.GetMat(thresholded_img,1), 0) 
```

和

```
cv.Circle(overlay, (x, y), 2, (255, 255, 255), 20) 
cv.Circle(img, (int(x), int(y)), 2, (255, 255, 255), 20) 
```

（来源： http: [//blog.goo.ne.jp/roboz80/e/16ea5be9a9eaf370046035be841b4bfd](http://blog.goo.ne.jp/roboz80/e/16ea5be9a9eaf370046035be841b4bfd)）

# java - 如何使用 zip4j 加密 zip 文件

> ID：15085249
> 
> 赞同：8
> 
> 时间：2013-02-26T09:16:33.817
> 
> 标签：java, zip

我想创建受密码保护的 ZIP：

```
 // Set the compression level
    parameters.setCompressionLevel(Zip4jConstants.DEFLATE_LEVEL_NORMAL);

    // Set the encryption flag to true
    // If this is set to false, then the rest of encryption properties are ignored
    parameters.setEncryptFiles(true);

    // Set the encryption method to Standard Zip Encryption
    parameters.setEncryptionMethod(Zip4jConstants.ENC_METHOD_STANDARD);

    // Set password
    parameters.setPassword(password); 
```

但这只是加密 zip 中的文件，但我可以打开这个 zip 并观看其中的文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-10T11:43:23.150

[Zip4j](http://www.lingala.net/zip4j/index.php)支持文件列表的加密...

> [主要特点](http://www.lingala.net/zip4j/index.php)：
> 
> *   从 Zip 文件中创建、添加、提取、更新、删除文件
> *   读/写受密码保护的 Zip 文件
> *   **支持 AES 128/256 加密**
> *   **支持标准 Zip 加密**
> *   支持 Zip64 格式
> *   支持 Store (No Compression) 和 Deflate 压缩方式
> *   从拆分 Zip 文件中创建或提取文件（例如：z01、z02、...zip）
> *   支持 Unicode 文件名
> *   进度监视器

看看这个示例代码[AddFilesWithAESEncryption.java](https://github.com/dmp/zip4j/blob/master/src/net/lingala/zip4j/examples/zip/AddFilesWithAESEncryption.java)：

```
// Initiate ZipFile object with the path/name of the zip file.
ZipFile zipFile = new ZipFile("c:\\ZipTest\\AddFilesWithAESZipEncryption.zip");

// Build the list of files to be added in the array list
// Objects of type File have to be added to the ArrayList
ArrayList filesToAdd = new ArrayList();
filesToAdd.add(new File("c:\\ZipTest\\sample.txt"));
filesToAdd.add(new File("c:\\ZipTest\\myvideo.avi"));
filesToAdd.add(new File("c:\\ZipTest\\mysong.mp3"));

// Initiate Zip Parameters
ZipParameters parameters = new ZipParameters();
// set compression method to deflate compression
parameters.setCompressionMethod(Zip4jConstants.COMP_DEFLATE); 
parameters.setCompressionLevel(Zip4jConstants.DEFLATE_LEVEL_ULTRA); 

// Set the encryption flag to true
parameters.setEncryptFiles(true);

// Set the encryption method to AES Zip Encryption
parameters.setEncryptionMethod(Zip4jConstants.ENC_METHOD_AES);

// Set AES Key strength. Key strengths available for AES encryption are:
parameters.setAesKeyStrength(Zip4jConstants.AES_STRENGTH_256);

// Set password
parameters.setPassword("test123!");

// Now add files to the zip file
zipFile.addFiles(filesToAdd, parameters); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T12:28:08.507

由于专利问题，Zip4j 不支持文件列表的加密。

见：[http ://www.lingala.net/zip4j/forum/index.php?topic=104.0](http://www.lingala.net/zip4j/forum/index.php?topic=104.0)

**更新：**

如链接中所述。zip 规范不包括文件列表的加密。要隐藏文件名，您可以创建一个 zip 文件，其中包括您的文件，通过再次压缩它来封装它。因此，如果您打开 zip2.zip，您只会看到“zip1.zip”而不是原始文件名。

# python - 在 sage-python 中获取用户输入

> ID：15085251
> 
> 赞同：0
> 
> 时间：2013-02-26T09:16:41.407
> 
> 标签：python, sage

Sage maths 为我提供了一种简单的方法来为我的学生启动一个多用户 python 脚本站点。也就是说，我不知道如何让用户输入脚本。即像这样的线条

```
guess = int(raw_input('Take a guess: ')) 
```

这对圣人数学来说是不可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:23:33.083

是纯文本交互吗？或者你可以使用@interact 吗？ [圣人数学互动](http://wiki.sagemath.org/interact/)

# ios6 - SKPaymentTransactionObserver 在购买状态下崩溃

> ID：15085253
> 
> 赞同：1
> 
> 时间：2013-02-26T09:16:45.503
> 
> 标签：ios6, crash, storekit

我是应用内购买的新手，按照教程，我已经完成了产品请求、观察者和一切。然而，当模式购买对话框出现时（当观察者认为交易处于“购买”状态时，应用程序冻结了。

在日志中，我在这里遇到了一个疯狂的 EXC_BAD_ACCESS 错误：

```
0x35b822b4:  blx    0x35f9bb18                ; symbol stub for: -[_UIHostedTextServiceSession dismissTextServiceAnimated:]
0x35b822b8:  movs   r0, #0      <--EXC_BAD_ACCESS (Code=1, address=0x69466469) 
```

有趣的是，即使应用程序冻结，购买过程仍在继续，尽管应用程序冻结，它永远不会完成。

根据我看到的其他一些帖子，我已经在模拟器、多个设备上进行了尝试，并使用了 ad hoc (TestFlight) 分发，以防开发证书有问题，但没有任何效果。

我还没有看到答案的一种可能性是相关产品尚未获得批准。我假设，因为我是在沙盒模式下连接的，并且由于产品请求过程显然是从应用商店获取数据，所以这不是问题。是否有可能是未经批准的商店商品导致了问题？

如果是未经批准的 SKU 破坏了事情，我真的很困惑，因为 iTunes Connect 表明我无法提交 SKU，除非使用新版本的应用程序进行审核，而且，如果我不能测试商店功能，我不想提交那个新版本。这里的任何人都有这方面的经验，谁能告诉我为什么一切都变得很糟糕？

编辑：另一件可能很重要的事情是购买按钮处于模式推送（特别是页面卷曲）视图中。我知道不能从模式视图中调用 Twitter 请求。在此视图中无法完成商店交易是否有原因？

# java - 使用 OpenCmis 在 Alfresco 中手动更改文档的版本

> ID：15085254
> 
> 赞同：4
> 
> 时间：2013-02-26T09:16:48.883
> 
> 标签：java, alfresco, opencmis

我想知道如何使用 OpenCmis 在 Alfresco 中手动更改文档版本？截至目前，当我更新文档时，每次 alfresco 都会更改版本本身，但我想从用户输入更改版本，例如 1.0、2.0、2.1 等。

例如。文档.txt 1.0，文档.txt 1.1

而不是 document.txt 1.1 我想放置版本 2.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:56:48.540

在 CMIS 下没有办法实现您的目标。[规范](http://docs.oasis-open.org/cmis/CMIS/v1.0/errata-01/os/cmis-spec-v1.0-errata-01-os-complete.html#_Toc243905396)要求 a 上的所有版本控制属性`cmis:document`都是只读的，以某种方式影响它们的唯一方法是通过版本控制 API，它只允许您指定是创建次要版本还是主要版本，以及一个可选的签入评论。

如果您想这样做，您将需要为 Alfresco 编写一些更复杂的服务器端扩展，或者扩展您的内容模型以提供自定义属性来保存您当前想要存储到版本标签中的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:30:31.777

您可以通过代码[示例 1](http://forums.alfresco.com/forum/developer-discussions/other-apis/issue-programmatic-versioning-manually-uploaded-file-11062010) [示例 2来完成](http://forums.alfresco.com/forum/developer-discussions/repository-services/change-old-version-properties-document-12212012-0937)

或者

您可以通过 db update[示例来完成](http://forums.alfresco.com/forum/developer-discussions/repository-services/change-old-version-properties-document-12212012-0937)

如果以上不符合您的要求，请探索更多[选项。](https://www.google.co.in/search?q=code+to+change+alfresco+document+version)

# c# - 泛型类型冲突？

> ID：15085258
> 
> 赞同：9
> 
> 时间：2013-02-26T09:17:04.337
> 
> 标签：c#, .net, generics, type-safety

我看到了[**这个有趣的问题**](https://stackoverflow.com/questions/15055900/cannot-convert-from-funct-t-t-to-funct-t-t) ，它讨论`T`了类级别的声明和`T`方法级别的相同字母（不同含义）。

所以我做了一个测试。

```
 static void Main(string[] args)
        {
            var c = new MyClass<int>(); //T is int
            c.MyField = 1;
            c.MyProp = 1;
            c.MyMethod("2");
        }

        public class MyClass<T>
        {
            public T MyField;
            public T MyProp { get; set; }
            public void MyMethod<T>(T k)
            {
            }
        } 
```

正如[Eric 所说](https://stackoverflow.com/q/15055900/859154)，编译器确实会发出警告。

但是，嘿，类型安全发生了什么？*我假设在方法级别*存在类型安全，但是已经声明的类的**全局**上下文呢？`T`

我的意思是，如果有人问我，我想那里应该有*错误*而*不是警告*。

为什么编译器允许这样做？（*我很想听到一个合理的答案*）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:29:46.857

有趣的问题。这里保留了类型安全。行为类似于全局变量和局部变量。在*MyMethod*中，类型*T*是明确的。我们还可以创建并返回*MyClass*的新实例，如下所示：

```
public class MyClass<T>
{
    public T MyField;
    public T MyProp { get; set; }
    public MyClass<T> MyMethod<T>(T k)
    {
        return new MyClass<T>();
    }
} 
```

该程序：

```
static void Main()
{
    var c = new MyClass<int>(); //T is int
    c.MyField = 1;
    c.MyProp = 1;

    var myClass = c.MyMethod("2");
    myClass.MyField = "2";
    myClass.MyField = "4";
} 
```

没有编译错误，也不应该出现，因为类型安全得到了保留。可以编译程序。没有歧义。

警告应该在那里，因为*T覆盖了其类级别对应项，并且**MyMethod*中没有简单的方法来获取该全局*T*。它也掩盖了易读性。

MSDN 谈到了[通用方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.90%29.aspx)中的灵活性和良好实践：

> 如果您定义一个泛型方法，该方法采用与包含类相同的类型参数，编译器会生成警告 CS0693，因为在方法范围内，为内部 T 提供的参数隐藏了为外部 T 提供的参数。如果您需要灵活性使用实例化类时提供的类型参数以外的类型参数调用泛型类方法，请考虑为该方法的类型参数提供另一个标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:29:53.040

这不是类型安全问题。这只是一个可读性问题 - 这就是为什么它只是一个警告。（此外，T 隐藏了外部 T。）

如果将 MyMethod() 更改为：

```
public void MyMethod<T>(T k)
{
    Console.WriteLine(typeof(T).FullName);
} 
```

它会为您的示例代码打印出 System.String，证明它获得了正确的类型。

# sql - 将参数化的 sql 转换为 oracle 包

> ID：15085266
> 
> 赞同：1
> 
> 时间：2013-02-26T09:17:24.950
> 
> 标签：sql, oracle, stored-procedures, code-generation, parameterized

我有一个 ac# .net 应用程序，它使用参数化的 sql 将记录插入到 oracle。有几个这样的插入，我想知道是否有任何工具可以帮助我将它们转换为 Oracle 包？

例如，参数化 sql 之一是

```
INSERT INTO SYSADM.MY_TABLE  
(ID, NAME, ADDRESS) VALUES 
(:id, :name, :address) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:56:31.560

没有我知道的工具。但是，如果您的文本编辑器在其 Search'n'replace 功能中支持正则表达式，则将此类语句转换为 PL/SQL 非常简单。

或者，我们可以从数据字典生成代码。USER_TABLES 和 USER_TAB_COLUMNS 提供了构建 PL/SQL API 所需的所有信息。

Steven Feuerstein 发布了一个 Oracle 代码生成器，它可以非常轻松地构建整个表 API。这在过去有点矛盾，因为有些人不喜欢 TAPI，并且接口的laso dome 对 SQL 注入是开放的，但值得一看。 [一探究竟。](http://www.toadworld.com/Downloads/QuestCodeGenUtilityFreeware/tabid/686/Default.aspx)

# javascript - 首次使用此字段后如何从此代码中删除功能？

> ID：15085267
> 
> 赞同：0
> 
> 时间：2013-02-26T09:17:25.337
> 
> 标签：javascript, jquery

```
$(document).ready(function(){
    $('#id_laufzeit_bis').datepicker().on('changeDate', recalculate_deadline);
    $('#id_kuendigungsfrist').change(recalculate_deadline);
    $('#id_kuendigungsfrist_type').change(recalculate_deadline);

    $('#id_kuendigung_moeglichbis').change(check_reminder_date);
    $('#id_erinnerung_am').datepicker().one('hide', check_reminder_date);
}); 
```

`check_reminder_date`首次使用此字段后如何从此代码中删除功能？( `#id_erinnerung_am`)

```
$('#id_erinnerung_am').datepicker().one('hide', check_reminder_date); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:36:06.537

使用这个技巧来实现你想要的：

```
//caching the object with id #id_erinnerung_am
var id_erinnerung_am=$('#id_erinnerung_am'); 

//triggering an event on every close of the datepicker

id_erinnerung_am.datepicker({onClose:function(){
id_erinnerung_am.trigger('datePicker.hidden');
});

//binding the event once with the function 'check_reminder_date',
// this function will be executed only once

id_erinnerung_am.one('datePicker.hidden', check_reminder_date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:26:00.757

我是这样想的：

```
$('#id_erinnerung_am').datepicker().one('click', check_reminder_date); 
```

或者可能是这个：

```
$('#id_erinnerung_am').datepicker().end().one('click', check_reminder_date); 
```

`hide`不是事件使用`click`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:26:09.013

*编辑*哦，这是`.one()`应该做的。它可能只是没有像其他人已经指出的那样开火。

您可以设置一个标志，指示该函数是否已被先前调用过。

```
var isFirstCall = false;
function check_reminder_date(){
  if (isFirstCall) {
    isFirstCall = false;
    //do stuff
  }
} 
```

# java - 简单的数组复制问题

> ID：15085274
> 
> 赞同：0
> 
> 时间：2013-02-26T09:18:09.003
> 
> 标签：java, arrays

我必须制作一个包含 10 个数字的数组，然后将该数组复制到一个没有重复项的新数组中。我已经达到了它会清除重复数据的地步，但是由于某种原因，在我确定一个数字还没有在新数组中之后，它不会让我把它放在那里。这就是我到目前为止所拥有的。谢谢。

```
 import java.util.*;
 import java.io.*;
 public class PrintingDistinctNumbers
 {
   public static void main(String[] args)
   {
     int[] array=new int[10];
     int[] array2=new int[10];
     int num1;
     int count = 0;
     boolean results;
     //let the user input 10 numbers
     for(int i=0;i<array.length;i++)
     {
       Scanner input=new Scanner(System.in);
       System.out.println("please enter 10 numbers");
       num1=input.nextInt();
       array[i]=num1;
     }

     for (int j=0;j<array.length;j++)
     {
       results=search(array2 ,array[j],count);
       if(results=false);
       { 
         array[j]=array2[count];
         count++;
         break;
       }

     }
     // just a test to make sure the numbers copied over to the new array 
     System.out.println(array2[0]);
   }

   //search the second array to see if the int is allready in it 
   public static boolean search(int[] array2,int value,int count2)
   {
     //create variables
     boolean found;
     //set the variables
     found= false;
     //search the array
     for(int index=0;index<count2;index++)
     {
       if(array2[index]==value)
       {
         found=true;
         break;
       }
     }
     return found; 

   }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:20:17.260

无需查看您的其余逻辑，这

```
 if(results=false); 
```

看起来不对

1.  那是错字吗？您需要`if (results == false)`，或者更简洁地说，`if (!results)`
2.  注意后面的分号，这意味着无论您的`if`子句评估为什么，都会执行以下块。正在创建一个完全有效的`;`空块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:40:33.773

除了`if (results=false)`Brian Agnew 已经提到的，我还看到了这个：

```
 array[j]=array2[count]; 
```

您用未初始化的第二个数组的值覆盖数组中的值，在该数组中存储您的输入。你可能打算做

```
 array2[count] = array[j]; 
```

这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:27:44.470

有两个错误：

1.  if 块中的`break;`语句不应该存在：这会使您脱离循环，但您需要循环继续迭代数组，直到所有元素都被复制。
2.  测试*将*false 分配给结果，而不是对其进行比较，因此更改为`if (!result)`

* * *

还有一些风格问题：

1.  您的搜索方法太长了；你不需要`found`变量
2.  使用在方法中有意义的参数命名您的参数：`array2`当没有`array`或`array1`在范围内时，您有。相同的`count2`
3.  `i`更喜欢`index`for 循环变量 - 输入更少，阅读更少

这更像是它应该的样子：

```
public static boolean search(int[] array, int value, int count) {
  for(int i = 0; i < count; i++) {
    if (array[i] == value) {
      return true;
    }
  }
  return false; 
```

}

在你的主要方法中，为什么你有一个循环 with`i`和下一个 with `j`？使它们都成为`i`-循环变量仅在循环内具有范围，因此没有冲突。

# android - LinearLayout layout_gravity 底部问题

> ID：15085278
> 
> 赞同：0
> 
> 时间：2013-02-26T09:18:18.620
> 
> 标签：android, xml, android-linearlayout, gravity, layout-gravity

有我的代码：

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools"   
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg_home"
android:orientation="vertical"
tools:context=".HomeActivity" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.30"
    android:gravity="center" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.70"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/llayBtnUp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <ImageView
            android:id="@+id/btntest"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="10dp"
            android:src="@drawable/fa" />

        <ImageView
            android:id="@+id/btntest1"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="10dp"
            android:src="@drawable/fas" />

        <ImageView
            android:id="@+id/btntest2"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="10dp"
            android:src="@drawable/fas" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/llayBtnDown"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <ImageView
            android:id="@+id/btntest3"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="10dp"
            android:src="@drawable/fas" />

        <ImageView
            android:id="@+id/btntest4"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="10dp"
            android:src="@drawable/fa" />

        <ImageView
            android:id="@+id/tset5"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:layout_margin="10dp"
            android:src="@drawable/fsa" />
    </LinearLayout>
    <LinearLayout 
        android:orientation="horizontal"
        android:id"@+id/llBot" 
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:layout_gravity="bottom" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>
</LinearLayout>

</LinearLayout> 
```

我想要的是最后一个 LinearLayout（id 为“llBot”）触及他父母的底部。

所以我试过：

```
android:layout_gravity="bottom" 
```

但是还是；它没有效果。我的LinearLayout 还是摸到了之前的Linearlayout。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:41:00.110

试试下面的布局代码，我做了相关的改变：

> ```
>  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>    android:layout_width="fill_parent"
>    android:layout_height="fill_parent"
>     android:orientation="vertical" >
> <LinearLayout
>     android:layout_width="fill_parent"
>     android:layout_height="0dp"
>     android:layout_weight="0.30"
>     android:gravity="center" />
> <LinearLayout
>     android:layout_width="fill_parent"
>     android:layout_height="0dp"
>     android:layout_weight="0.70"
>     android:orientation="vertical" >
>     <LinearLayout
>         android:id="@+id/llayBtnUp"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:gravity="center" >
>         <ImageView
>             android:id="@+id/btntest"
>             android:layout_width="48dp"
>             android:layout_height="48dp"
>             android:layout_margin="10dp"
>             android:src="@drawable/ic_launcher" />
>         <ImageView
>             android:id="@+id/btntest1"
>             android:layout_width="48dp"
>             android:layout_height="48dp"
>             android:layout_margin="10dp"
>             android:src="@drawable/buttonred" />
>         <ImageView
>             android:id="@+id/btntest2"
>             android:layout_width="48dp"
>             android:layout_height="48dp"
>             android:layout_margin="10dp"
>             android:src="@drawable/border" />
>     </LinearLayout>
>     <LinearLayout
>         android:id="@+id/llayBtnDown"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:gravity="center" >
>         <ImageView
>             android:id="@+id/btntest3"
>             android:layout_width="48dp"
>             android:layout_height="48dp"
>             android:layout_margin="10dp"
>             android:src="@drawable/download" />
>         <ImageView
>             android:id="@+id/btntest4"
>             android:layout_width="48dp"
>             android:layout_height="48dp"
>             android:layout_margin="10dp"
>             android:src="@drawable/buttonred" />
>         <ImageView
>             android:id="@+id/tset5"
>             android:layout_width="48dp"
>             android:layout_height="48dp"
>             android:layout_margin="10dp"
>             android:src="@drawable/ic_launcher" />
>     </LinearLayout>        
>    </LinearLayout>
>     <LinearLayout
>         android:id="@+id/test"
>         android:layout_width="fill_parent"
>         android:layout_height="100dp"
>         android:orientation="horizontal"
> 
>         <Button
>             android:id="@+id/button1"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_gravity="bottom"
>             android:text="Button" />
>     </LinearLayout>
>  </LinearLayout> 
> ```

# cordova - jQuery mobile 1.3.0 和 jQuery 验证

> ID：15085279
> 
> 赞同：3
> 
> 时间：2013-02-26T09:18:20.590
> 
> 标签：cordova, jquery-mobile

我正在将 phonegap 与 jquery mobile 一起使用，版本 1.3.0，最近与 jquery 验证一起推出（尝试了两个版本，1.11 和 1.9），我遇到了文本框验证的问题。问题是错误消息放在文本框中，看起来很丑。使用 jquery mobile 1.2.0 一切正常。我发现了问题，不知道如何优雅地解决它。

带有 jquery mobile 1.2.0 的代码：

```
<label for="phone">Telefon nummer:</label>
        <input type="text" name="phone" class="phone ui-input-text ui-body-c ui-corner-all ui-shadow-inset error" value=""><label for="phone" class="error" style="">Telefonnummer skal oplyses</label> 
```

带有 jquery mobile 1.3.0 的代码：

```
<div class="ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-c"><input type="text" name="phone" class="phone ui-input-text ui-body-c error" value=""><label for="phone" class="error" style="">Telefonnummer skal oplyses</label></div> 
```

正如您在 jquery mobile 1.3.0 中看到的那样，他们放置了一个 div 包装器。我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T10:20:40.650

找到了一个解决方案，非常优雅:)。将其放在验证功能选项中：

```
 errorPlacement: function(error, element) {

            error.insertAfter( element.parent() );

        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T18:47:42.053

伟大的！我已经进行了调整，因为这仅适用于输入，而不适用于使用 JQM 1.3.0 时的 select、textarea 等。

```
errorPlacement: function (error, element) {
                    if (element.is("input") && !element.is('input[type="hidden"]'))
                        error.insertAfter(element.parent());
                    else
                        error.insertAfter(element); 
```

# android - 为 AlertDialog 的 MultiSelectItems 设置自定义字体（字体）

> ID：15085281
> 
> 赞同：3
> 
> 时间：2013-02-26T09:18:21.817
> 
> 标签：android, android-alertdialog, custom-font

我已经能够将自定义字体应用于警报对话框的标题，如下所示：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);

 TextView Mytitle = new TextView(this);
 Mytitle.setText("My Custom title"); 
 Mytitle.setTextSize(20);
 Mytitle.setPadding(5, 15, 5, 5);
 Mytitle.setGravity(Gravity.CENTER);
 Mytitle.setTypeface(Typeface.createFromAsset(this.getAssets(), "myfont.ttf"));
 builder.setCustomTitle(Mytitle); 
```

警报对话框显示由下面的行填充的多选项目列表。

```
 builder.setMultiChoiceItems(MyItems, MycheckedItems, MyDialogListener);

 //where MyItems is CharSequence[] Array, MycheckedItems => boolean[] array,
 //MyDialogListener => DialogInterface.OnMultiChoiceClickListener 
```

我也想对这些多选项目应用字体。我怎样才能做到这一点？是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T11:41:16.033

[AlertDialog.Builder](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/AlertDialog.java#AlertDialog.Builder)使用[AlertController.AlertParams](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal/app/AlertController.java#AlertController.AlertParams)来构造一个对话框。我检查了 AlertDialog.Builder#create() 调用 AlertController.AlertParams#apply() 创建 ListView 并分配适配器，如果项目已设置（[AlertParams#createListView()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal/app/AlertController.java#AlertController.AlertParams.createListView%28com.android.internal.app.AlertController%29)）。

我基于 createListView 源创建了自定义适配器并修改了 android 单元格布局：

```
public static class TypefaceDialog extends DialogFragment {
        private static final CharSequence[] items = {
            "A", "B", "C", "D", "E", "F", "G"
        };
        private static final boolean[] checked = {
            true, false, false, true, true, false, false
        };

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            final Typeface fontTypeface = Typeface.createFromAsset(getActivity().getAssets(), "Arial Bold.ttf");
            ListAdapter adapter = new ArrayAdapter<CharSequence>(
                    getActivity(), 
                    android.R.layout.select_dialog_multichoice, 
                    android.R.id.text1,
                    items) {

                @Override
                public View getView(final int position, View convertView, ViewGroup parent) {
                    View view = super.getView(position, convertView, parent);
                    CheckedTextView textView = (CheckedTextView)view.findViewById(android.R.id.text1);

                    textView.setChecked(checked[position]);
                    textView.setTypeface(fontTypeface);
                    textView.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            CheckedTextView view = (CheckedTextView)v;
                            view.setChecked(!view.isChecked());
                            checked[position] = view.isChecked();
                        }
                    });

                    return view;
                }
            };

            return new AlertDialog.Builder(getActivity())
            .setAdapter(adapter, null)
            .setPositiveButton("OK", null)
            .create();
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:35:40.873

尝试使用自定义项目布局为多选创建自定义适配器。

在您的活动或应用程序中将字体设置为**静态**

```
public static Typeface mFont;
public void OnCreate(){
mFont =Typeface.createFromAsset(this.getAssets(), "myfont.ttf");
} 
```

在您的自定义适配器中，使用静态字体从您的 convertView 设置 textview 的字体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:33:33.170

而不是**AlertDialog.Builder**使用**Dialog**如下所示。

在**R.layout.vv**中根据需要进行自定义。

```
Dialog dailog=new Dialog(this);
dailog.setContentView(R.layout.vv);
dailog.show(); 
```

# windows-phone-7 - Horizo ntalContentAlignment=Stretch 的水平列表框

> ID：15085291
> 
> 赞同：1
> 
> 时间：2013-02-26T09:18:41.127
> 
> 标签：windows-phone-7, windows-phone-7.1

我有一个带有 3 个可绑定项目的水平列表框。如何将它们拉伸到列表框的所有宽度？例如第一个元素在左边，第二个元素在中间，第三个元素在右边。现在我将它们与边距对齐，但我很感兴趣，是否有可能没有边距？我试图将 ListBox 属性 Horizo​​ntalContentAlignment 设置为 Stretch，但没有得到我想要的。

谢谢。

* * *

我尝试了您的建议，但不幸的是没有得到理想的结果。我的 XAML 在这里：

```
 <ListBox>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBoxItem Content="1"/>
            <ListBoxItem Content="2"/>
            <ListBoxItem Content="3"/>
        </ListBox> 
```

这是我得到的：

![在此处输入图像描述](../Images/fb4a4879983293656b883aca477d58ce.png)

我想要的是下面：

![在此处输入图像描述](../Images/94984ec5722fd055450e55bec7aab446.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:09:51.370

Try with following approach:

```
 <ListBox Grid.Row="1">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBoxItem  HorizontalAlignment="Stretch">
            <Grid>
                <TextBlock  Text="1"   HorizontalAlignment="Left"/>
                <TextBlock  Text="2"   HorizontalAlignment="Center"/>
                <TextBlock  Text="3"   HorizontalAlignment="Right"/>
            </Grid>
        </ListBoxItem>
    </ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:03:22.240

这是一个棘手的问题 :) 为此，您需要更改 ListBox.ItemContainerStyle，查看[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/974fe937-c257-48b9-9a78-3196d964110d/)上的答案。此外，请查看本网站上的以下链接：

*   [如何让 ListBox ItemTemplate 水平拉伸 ListBox 的整个宽度？](https://stackoverflow.com/a/2924249/671469)
*   [Silverlight 3：ListBox DataTemplate Horizo​​ntalAlignment](https://stackoverflow.com/a/2558348/671469)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:31:21.987

我不确定您是否找到了解决方案，但这对我来说可以使项目均匀分布：

```
<ListBox>               
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Rows="1"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>

    <ListBoxItem Content="Item1"/>
    <ListBoxItem Content="Item2"/>
    <ListBoxItem Content="Item3"/>
</ListBox> 
```

位于：[https ://stackoverflow.com/a/1270813/124721](https://stackoverflow.com/a/1270813/124721)

然后在 ItemContainerStyle 中混合，我可以让内容居中：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
    </Style>
</ListBox.ItemContainerStyle> 
```

但是，我仍然无法将一个项目对齐到左侧，然后将另一个对齐到中心，最后一个对齐到右侧。直接将对齐应用于项目会缩小面板尺寸。但也许如果它被包裹在另一个容器中，比如可以工作的堆栈面板。

# php - 过去 90 天内 Facebook 上其他人的帖子留下的评论数

> ID：15085292
> 
> 赞同：1
> 
> 时间：2013-02-26T09:18:44.703
> 
> 标签：php, facebook, facebook-fql

我有这个 fql 查询，但它让我错误的结果

SELECT created_time,message,description FROM stream WHERE source_id = me() AND comments.count>0 and created_time > 1343904949 limit 100000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:22:26.270

不可能回到这么远的时间（90 天）。根据我的经验，我过去最多收到 6 天。

此 fql 查询将返回带有随附评论的新闻提要帖子：

```
SELECT created_time, message, description, comments FROM stream 
WHERE filter_key IN (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed')AND is_hidden = 0 AND comments.count > 0 LIMIT 5000 
```

# sencha-touch-2.1 - 如何在 sencha touch 中添加带有 rest 调用的标题？

> ID：15085293
> 
> 赞同：0
> 
> 时间：2013-02-26T09:18:53.163
> 
> 标签：sencha-touch-2.1

我是sencha开发的新手。所以我不知道如何解析 sencha 中的其余 API 调用？如果有人知道请帮助我？

示例：HTTP 方法 - GET HTTP 标头 · 接受 application/xml,application/json · Authorization · User-Agent

我想要这个带有请求的标头，如何在 sencha 中执行此操作？请举例的朋友解释一下。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:12:36.260

由于 REST 使用 ajax 代理，所以我相信这应该可行。启动应用程序后立即绑定**beforerequest**事件，以便将某些标头添加到任何 AJAX 请求

```
Ext.Ajax.on('beforerequest', function(conn, options, eOptions){
        options.headers['Authorization'] = 'BASIC YTpi';
}, this); 
```

如果你有不改变的标题，你甚至可以这样做：

```
 Ext.Ajax._defaultHeaders = {
        'Accept': 'application/xml,application/json',
        'Authorization': 'Basic YTpi'
    }; 
```

**PS**我没有将它用于 REST，所以请在使用前进行验证。

# java - java.lang.Math.log 被内部调用取代，为什么不是 java.lang.Math.exp()？

> ID：15085294
> 
> 赞同：2
> 
> 时间：2013-02-26T09:19:00.080
> 
> 标签：java, debugging, math, logarithm

我正在重新提出一个我认为关注度太低的问题：

为什么这个简单的代码（只是调用`Math.log()`）：

```
Double thisdouble = Math.log(10); 
```

在 jdk1.7.0_11 的 Math.class 的第 275 行有一个断点：

```
274 public static double log(double a) {
275    return StrictMath.log(a); // default impl. delegates to StrictMath
276 } 
```

在调试模式下不停止执行？有人可以在他/她自己的机器上试试这个吗（我正在使用 Eclipse）？

调用`Math.exp()`和调试`Math.exp`（第 254 行）函数确实有效......

**编辑：**上面的答案是`Math.log`由 Hotspot VM 的内在调用取代，因此永远不会到达 Math 类中的代码。现在剩下的问题是为什么`Math.exp`不被内在取代...... FWIW我在Core i5 M520（Arrandale）上，但我严重怀疑该处理器是否支持日志而不是exp......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:20:14.407

我会假设 Math 类中的代码只是一个后备代码，由那些方法调用不被调用某些本机浮点操作代替的架构使用。因此，在您的情况下，该方法实际上并没有被调用。不过，我必须承认，我没有证据支持这个假设。

# perl - 如何检查 302 http 响应

> ID：15085295
> 
> 赞同：3
> 
> 时间：2013-02-26T09:19:18.057
> 
> 标签：perl

我正在尝试检查重定向页面的标题，并获取 302 状态，但使用我的代码，我得到了转发页面的 200 OK 状态。我应该怎么做才能获得重定向页面 302 状态。我的代码：

```
use LWP::UserAgent;

my $ua = LWP::UserAgent->new();
my $req = HTTP::Request->new('GET','http://host.com');
my $res = $ua->request($req);
print $res->status_line; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:42:21.327

初始化 $ua 后，将其 requests_redirectable 属性设置为 undef：

```
$ua->requests_redirectable(undef); 
```

这样 LWP::UserAgent 将不会跟随重定向，而是在第一次请求后停止。

然后你可以使用以下方法获取代码（“302”、“301”等）：

```
$res->code() 
```

这是[LWP::UserAgent 的官方文档](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T09:22:08.140

`$response->previous()`将为您提供链中的先前响应。

或者，如果您想禁用重定向，请传递`requests_redirectable => []`给 LWP::UserAgent 的构造函数。

# jsf - 转换日期时间转换奇怪的时间

> ID：15085300
> 
> 赞同：3
> 
> 时间：2013-02-26T09:19:31.090
> 
> 标签：jsf

我的 xhtml 上有这段代码

```
<h:inputHidden id="startDate" value="#{testController.selected.startDate}">
       <f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
</h:inputHidden> 
```

如果我输入`2013-02-26 17:15`在我的数据库中插入的数据的结果是`2013-02-27 01:15` 或者`2013-02-26 05:15`结果是`2013-02-26 13:15`

我已经在输入中输入了 24 小时日期时间，但我真的很困惑为什么它会转换为其他东西。

*编辑

我的目标是..用户在输入时输入的时间是多少，它会在数据库中反映出来。我正在使用日期选择器进行输入，因此假设时间/日期输入已经正确并且采用 24 小时格式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T09:37:31.263

我猜 JSF 日期/时间转换器按规范默认为 UTC 时区。

所以我在我的 web.xml 上添加了这个并且它起作用了。

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

参考： [为 f:convertDateTime 设置默认时区](https://stackoverflow.com/questions/7490954/set-a-default-timezone-for-fconvertdatetime)

# c# - 如何在c#中的docx文件中的图像中换行文本

> ID：15085308
> 
> 赞同：1
> 
> 时间：2013-02-26T09:19:59.820
> 
> 标签：c#, .net, ms-word, openxml, docx

我正在使用 Docx.dll 制作一个 docx 生成器。到目前为止，我已经能够在文档中插入图像和文本。图像和段落未对齐。我需要将文本包装在图像中。我该怎么做？我在 google 中查找它并找到此链接 [通过使用 Open XML SDK 2.0 在 Word 2007 中添加图像到文档](http://msdn.microsoft.com/en-us/library/office/ee342530%28v=office.12%29.aspx)。该代码也在工作并创建 word 文档，但 docx 文件未打开。

如何在 c# 中将文本“在文本前面”换行？

```
public static DocX CreateDocumentFile(List<CompanyInfo> info)
    {

        DocX document = DocX.Load(@"C:\Users\newton.sheikh\Documents\Visual Studio 2010\Projects\MSOffice\OpenXML\OpenXML\RetailWrite.docx");

        foreach (var companies in info)
        {

            Formatting fm = new Formatting();

            /*Inserting Image*/
            Novacode.Image img = document.AddImage(@"C:\Users\newton.sheikh\Documents\Visual Studio 2010\Projects\MSOffice\OpenXML\OpenXML\logos\slime.png");
            Novacode.Paragraph companyLogo = document.InsertParagraph("");
            Picture pic1 = img.CreatePicture();
            companyLogo.InsertPicture(pic1, 0);

            Novacode.Paragraph CompanyName = document.InsertParagraph(companies.Name.ToString());
            CompanyName.StyleName = "COMPANY";

            Novacode.Paragraph CompanyPosition = document.InsertParagraph(companies.Position.ToString());
            CompanyPosition.StyleName = "posit";

            Novacode.Paragraph CompanyDescription = document.InsertParagraph(companies.Description.ToString());
            CompanyDescription.StyleName = "descrip";

            Novacode.Paragraph blankPara = document.InsertParagraph(" ");
            Novacode.Paragraph blankPara2 = document.InsertParagraph(" ");
        }

        return document;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:31:15.397

问题的解决方案：我使用 MS-Word 的 Interop 对图像应用自动换行。

```
public static void FormatImages()
    {
        Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();
        string filePath = @"C:\Users\newton.sheikh\Documents\Visual Studio 2010\Projects\MSOffice\OpenXML\OpenXML\Temp.docx";
        Microsoft.Office.Interop.Word.Document doc = wordApp.Documents.Open(filePath, false);

        object save_changes = false;
        foreach (Microsoft.Office.Interop.Word.InlineShape item in wordApp.ActiveDocument.InlineShapes)
        {
            if (item != null)
            {
                if (item.Type == Microsoft.Office.Interop.Word.WdInlineShapeType.wdInlineShapePicture)
                {
                    item.Select();
                    Microsoft.Office.Interop.Word.Shape shape = item.ConvertToShape();
                    shape.WrapFormat.Type = WdWrapType.wdWrapFront;
                }
            }
        }

        doc.SaveAs(@"C:\Users\newton.sheikh\Documents\Visual Studio 2010\Projects\MSOffice\OpenXML\OpenXML\RetailWrite.docx");
        doc.Close(save_changes);
        wordApp.Quit(save_changes);
        if (System.IO.File.Exists(@"C:\Users\newton.sheikh\Documents\Visual Studio 2010\Projects\MSOffice\OpenXML\OpenXML\Temp.docx"))
        {
            System.IO.File.Delete(@"C:\Users\newton.sheikh\Documents\Visual Studio 2010\Projects\MSOffice\OpenXML\OpenXML\Temp.docx");
        }
    } 
```

# date - 如何在vb6中获取范围日期

> ID：15085312
> 
> 赞同：0
> 
> 时间：2013-02-26T09:20:08.877
> 
> 标签：date, vb6, datepicker, range

我有 2 个日期选择器

```
Dim pday, eitday, otherday, tpenalty, difday, subpenalty As Integer
difday = Val(L1.Caption) - Val(L2.Caption)
pday = 7
eitday = 8
otherday = difday - eitday
tpenalty = 25
If difday <= pday Then
    PENALTY.Caption = 0
    ElseIf difday = eitday Then
    PENALTY.Caption = tpenalty
  ElseIf difday > eitday Then
  For i = 0 To otherday - 1
  subpenalty = subpenalty + 5
  Next i
    PENALTY.Caption = tpenalty + subpenalty
End If 
```

问题是当月份更改时，计算无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:25:24.393

我根据您的代码猜测（因为很多事情都不清楚），但这应该给出两个日期之间的天数：

```
difday = DateDiff("d", StartDate, EndDate) 
```

我已经使用`StartDate`and`EndDate`来表示用于设置`L1`and的单独周期的开始和结束`L2`，因为您不应该将字符串转换为日期进行计算。

# php - 如何使用php代码将'gz'（已经导出到服务器）文件导入mysql数据库？

> ID：15085313
> 
> 赞同：0
> 
> 时间：2013-02-26T09:20:09.967
> 
> 标签：php, mysql, import

请帮助我找出使用 php 代码将“gz”文件（已经使用 php 代码导出到服务器）导入 mysql 数据库的代码。在这里我只需要导入代码吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:24:18.413

您需要 PHP 函数**readgzfile()**

如果您提供更多详细信息，我将尝试...呃...提供更多详细信息:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:32:13.853

你可以使用这个片段。

```
$srcName='1.gz';
$dstName='2.txt'
$sfp = gzopen($srcName, "rb");
$fp = fopen($dstName, "w");

while ($string = gzread($sfp, 4096)) {
     fwrite($fp, $string, strlen($string));
}
gzclose($sfp);
fclose($fp); 
```

使用此类提取后，您可以使用下面的简单代码执行。

```
mysql_query(file_get_contents("2.txt")); 
```

# mysql - 优化长mysql查询

> ID：15085315
> 
> 赞同：3
> 
> 时间：2013-02-26T09:20:14.157
> 
> 标签：mysql, sql

我有一个查询我很久以前建立的一个聊天网站，由于大量的流量，我糟糕的查询设计已经赶上了我。这里我有一个来自我的长查询日志的例子：

```
SELECT  DISTINCT user.id 
FROM    user 
        STRAIGHT_JOIN user_pics 
            ON user.id=user_pics.uid      
        STRAIGHT_JOIN user_account 
            ON user_account.user_id=user.id 
WHERE   registered = 1  AND 
        user.id<>0 AND 
        user.id<>23847 AND 
        user.id<>12392... (IT HAS LITERALLY 1000 OF THESE)
        AND user_pics.main=1 AND 
        user_pics.approved=1 AND 
        user_pics.deleted<>1 AND 
        gender LIKE '%female%' AND 
        country LIKE '%United Kingdom%' AND 
        city LIKE '%birmingham%' AND 
        sexorientation     LIKE '%Straight%' 
ORDER   BY updatedate DESC 
LIMIT   20; 
```

查询执行大约需要 15 秒，我也索引了所有参考列。将 1000 "AND user.id<>0" 标记替换为查找临时表会改进查询。我想我会在去改变之前问一下。如果您可以推荐任何有用的代码更改，我将不胜感激。

编辑：“user.id<>23847”标记是通过简单的选择在 php 中创建的，然后是 foreach 数组循环将它们添加到更大的 sql 查询中。

编辑 2：感谢您的所有帮助，通过使用“不在”，他们的查询从 13 秒减少到 0.3 秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:26:02.427

尝试使用 EXPLAIN
[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)
你会看到什么可以更好。

这可以替换为 `user.id NOT IN(23847 ,0 , 23847 ,...)` 使用 NOT IN()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:23:05.063

是的，如果你要使用，

```
user.id NOT IN (SELECT id FROM idExemptTable) 
```

这比单独检查每个 id 快得多

我已经包含了另一个答案的链接，该链接进一步详细介绍了 IN 语句：-

[SQL：SELECT IN 更快和最佳实践？](https://stackoverflow.com/questions/1220417/sql-select-in-faster-and-best-practice)

我也不确定您为什么要使用通配符匹配和 LIKE 来检查国家/地区名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:27:10.523

不要使用慢速不等于，而是使用一个技巧：选择那些不被选中的，用 将其连接回原始表`LEFT JOIN`，并通过过滤仅获取其余部分：

```
SELECT DISTINCT user.id 
FROM user 
STRAIGHT_JOIN user_pics ON user.id=user_pics.uid
STRAIGHT_JOIN user_account ON user_account.user_id=user.id 
LEFT OUTER JOIN 
 (SELECT u.id from user u where u.id in (0,23847, 12397 ... ... ...)) as notToBeIncluded ON user.id=notToBeIncluded.id -- the users that are to be excluded
WHERE registered=1  
AND notToBeIncluded.id IS NULL --this is the important part.
AND user_pics.main=1 
AND user_pics.approved=1 
AND user_pics.deleted<>1 
AND gender LIKE '%female%' 
AND country LIKE '%United Kingdom%' 
AND city LIKE '%birmingham%' 
AND sexorientation     LIKE '%Straight%' 
ORDER BY updatedate DESC LIMIT 20; 
```

**编辑**我是多么愚蠢......您甚至提到，您拥有的不需要的 ID 是另一个查询的结果！在这种情况下，*不要从 PHP 中获取结果，*直接在查询中使用它！那肯定会更快。

所以：

*   删除其他查询以及 foreach 处理其结果
*   重写主查询

[（这里需要有一个字符串用于降价以正确格式化）]

```
SELECT DISTINCT user.id 
FROM user 
STRAIGHT_JOIN user_pics ON user.id=user_pics.uid
STRAIGHT_JOIN user_account ON user_account.user_id=user.id 
LEFT OUTER JOIN 
 (SELECT u.id from user <[ your other query here ]> ) as notToBeIncluded ON user.id=notToBeIncluded.id -- the users that are to be excluded
WHERE registered=1  
AND notToBeIncluded.id IS NULL --this is the important part.
--( conditions removed for brewity)
ORDER BY updatedate DESC LIMIT 20; 
```

其他建议：

*   对性别和方向等列使用 varchar 没有帮助。使用数值，这会有所帮助。
*   另外，查看您的索引。有人建议使用执行计划：这是试图找出特定查询的性能瓶颈的最终方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:24:26.490

在 users 表中添加一个额外的字段并将其编入索引。将每个用户的值设置为 1

```
user.id<>0 AND 
user.id<>23847 AND 
user.id<>12392... 
```

并且对于每个其他用户为 0。

然后在上面的查询中按此字段过滤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:48:50.980

ppeterkas 解决方案的微小变化，假设对不需要的用户使用临时表。还将 LIKE 更改为直接等于（更好地使用标志，甚至位字符串，具体取决于字段是否存储值的组合）。

```
SELECT  DISTINCT user.id 
FROM    user 
        STRAIGHT_JOIN user_pics ON user.id=user_pics.uid      
        STRAIGHT_JOIN user_account ON user_account.user_id=user.id 
        LEFT OUTER JOIN tmp_users_to_ignore ON user.id = tmp_users_to_ignore.id
WHERE   registered = 1   
AND     tmp_users_to_ignore.id IS NULL 
AND     user_pics.main=1  
AND     user_pics.approved=1  
AND     user_pics.deleted<>1  
AND     gender = 'female'  
AND     country = 'United Kingdom'  
AND     city = 'birmingham'  
AND     sexorientation     = 'Straight' 
ORDER   BY updatedate DESC 
LIMIT   20; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T09:49:31.510

我懂了 ：

> 编辑：“user.id<>23847”标记是通过简单的选择在 php 中创建的，然后是 foreach 数组循环将它们添加到更大的 sql 查询中。

那么为什么不创建子查询呢？

假设您的第一个查询是`SELECT * FROM user WHERE yourcondition`. 您需要返回所有数据吗？如果不是，请在第二个查询中执行：

```
SELECT DISTINCT user.id 
FROM user 
STRAIGHT_JOIN user_pics ON user.id=user_pics.uid
STRAIGHT_JOIN user_account ON user_account.user_id=user.id 
WHERE registered=1  
AND user.id NOT IN(SELECT id FROM user WHERE yourcondition)
AND user_pics.main=1 
AND user_pics.approved=1 
AND user_pics.deleted<>1 
AND gender ='female' 
AND country LIKE '%United Kingdom%' 
```

AND city LIKE '%birmingham%' AND sexorientation LIKE '%Straight%' ORDER BY updatedate DESC LIMIT 20;

# javascript - VS2012 中的咖啡脚本

> ID：15085316
> 
> 赞同：1
> 
> 时间：2013-02-26T09:20:15.507
> 
> 标签：javascript, .net, visual-studio-2012, coffeescript

我已经按照以下步骤安装了咖啡脚本：

[http://coffeescript.org/#installation](http://coffeescript.org/#installation)

一切正常。咖啡编译成JS后`ctrl + s`

我的同事从源代码管理中获取了我的代码。

他尝试更改咖啡并保存，但没有对 js 文件进行任何更改。

我们曾尝试安装咖啡扔 Nuget，但没有帮助

知道什么可以解决这个问题吗？ee

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:33:37.630

看看这个：

[http://vswebessentials.com/](http://vswebessentials.com/)

Web Essentials 是一个 VS2012 扩展，它增加了对[CoffeeScript](http://vswebessentials.com/features/coffeescript)之类的支持，包括`.js`在您保存 Coffee 文件时为您构建文件。

# ios - 在 Objective-c 问题中访问委托静态方法

> ID：15085317
> 
> 赞同：3
> 
> 时间：2013-02-26T09:20:15.503
> 
> 标签：ios, objective-c, static, delegates, protocols

我在objective-c中有一个奇怪的问题。这是代码：

STViewController.h

```
#import <UIKit/UIKit.h>
@interface STViewController : UIViewController <UIAlertViewDelegate>
+(void)myStaticMethod;
@end 
```

STViewController.m

```
#import "STViewController.h"

@implementation STViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [STViewController myStaticMethod];
}

+ (void)myStaticMethod {
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Foo bar"
                                                    message:@"baz bat"
    //what does self even mean in this context? The class object STViewController?
                                                   delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:@"OK", nil];
    [alert show];
    [alert release];
}

#pragma mark UIAlertViewDelegate

// TRICKY PART if it's static it works, if it's not, it doesn't.
// even though the protocol declares instance methods (with a minus).
+ (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"It works!");
}

@end 
```

为什么会这样？这个对吗？我没有收到任何错误或警告。协议方法声明中的 -/+ 有什么作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:41:04.663

类中的方法`self`是指类对象。类对象是一个普通的 objc 对象（派生自`NSObject`），它将接收发送给类的消息（类方法，那些带有“+”的方法）。

在您的情况下，您将类对象用作 a 的委托`UIAlertView`（这是因为 UIAlertView 的 API 没有明确要求静态类型的对象`id<UIAlertViewDelegate>`）。现在警报视图只会将它的委托消息发送到类对象，这再次很好，因为您将它们实现为类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:44:44.743

首先，您必须知道`Class`（通常从 获取`[MyClass class]`）对象也是有效的 ObjC 对象。这意味着您也可以向类对象发送消息。

例如

```
@interface MyClass : NSObject
+ (NSString *)name;
@end

@implementation MyClass
+ (NSString *)name {
    return NSStringFromClass(self); // note in class method, self == [MyClass class]
}
@end

// ------- in some method

id cls = [MyClass class]; // the correct type should be Class, but since Class is an object, id will also work
NSLog(@"%@", [cls name]); // call like instance method - MyClass
NSLog(@"%@", [MyClass name]); // call like class method - MyClass 
```

因此您可以像使用其他对象一样使用您的类对象，并像实例方法一样调用类方法。

和类方法实际上是实例方法！区别在于类方法是元类的实例方法，**元**类是`Class`. 有关元类的更多信息：http: [//www.cocoawithlove.com/2010/01/what-is-meta-class-in-objective-c.html](http://www.cocoawithlove.com/2010/01/what-is-meta-class-in-objective-c.html)

* * *

此外，您的类接口不正确，因为（至少在编译器时）不可能将协议添加到元类。所以如果你这样做`[self conformsToProtocol:@protocol(UIAlertViewDelegate)]`会返回NO。但是您实现`+ alertView:clickedButtonAtIndex:`了会将这个方法添加为元类的实例方法，因此委托代码可以工作`[self responseToSelector:@selector(alertView:clickedButtonAtIndex:)]`并将返回 YES。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-26T09:26:22.600

您正在设置`self`为动态的警报委托 - 但方法调用是静态的，因此首先这是错误的，因为当您将来调用`+ (void)myStaticMethod`某个时间时`self`可能未初始化并且是`nil`. 这就是为什么可能会出现其他错误以及未定义行为的原因

# java - 吉普车中的按钮设计

> ID：15085318
> 
> 赞同：0
> 
> 时间：2013-02-26T09:20:15.897
> 
> 标签：java, android, iphone, android-layout

我正在尝试在 Android 中创建按钮，就像在 iPhone 的 Jeepsing 应用程序中使用线性布局一样，但没有成功。我得到的最大值是三个相同大小的单独按钮。我需要三个没有背景的按钮，当其中两个有一个圆角时，它们仅由它们的边框分隔，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/fb30a48d9eeec49e2976da572503b895.png)

这是我最后一次尝试：

```
<LinearLayout android:id="@+id/LinearLayout02" android:layout_height="wrap_content" android:layout_width="match_parent">
    <Button android:id="@+id/Button04" android:text="Button" android:layout_width="0dp" android:layout_weight="1" android:layout_height="wrap_content"></Button>
    <Button android:id="@+id/Button05" android:text="Button" android:layout_width="0dp" android:layout_weight="1" android:layout_height="wrap_content"></Button>
    <Button android:id="@+id/Button06" android:text="Button" android:layout_width="0dp" android:layout_weight="1" android:layout_height="wrap_content"></Button>
</LinearLayout> 
```

我也尝试了 GridLayout 但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:03:17.760

这就是我实现它的方式：

up_left_button_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/up_left_button_shape_pressed"
      android:state_pressed="true" />
    <item android:drawable="@drawable/up_left_button_shape_pressed"
      android:state_selected="true" />
    <item android:drawable="@drawable/up_left_button_shape_released" />
</selector> 
```

up_left_button_shape_pressed.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient
    android:startColor="#ff0000ff"
    android:endColor="#ff0000ff"
    android:angle="45"/>
<padding android:left="0dp"
    android:top="0dp"
    android:right="0dp"
    android:bottom="0dp" />
<corners android:radius="8dp" 
  android:bottomRightRadius="0dp" android:bottomLeftRadius="0dp" 
  android:topLeftRadius="8dp" android:topRightRadius="0dp"/>
<stroke android:width="2dp" android:color="#ff444444"/>
</shape> 
```

up_center_button_shape_released.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient
    android:startColor="#00000000"
    android:endColor="#00000000"
    android:angle="45"/>
<padding android:left="0dp"
    android:top="0dp"
    android:right="0dp"
    android:bottom="0dp" />
<corners android:radius="8dp" 
  android:bottomRightRadius="0dp" android:bottomLeftRadius="0dp" 
  android:topLeftRadius="8dp" android:topRightRadius="0dp"/>
<stroke android:width="2dp" android:color="#ff444444"/>
</shape> 
```

*   中键和右键的形状是一样的，只需要玩转哪个角就可以了。

最后是视图布局：

```
<TableRow android:id="@+id/buttonsRow"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:paddingTop="10dp">
    <RelativeLayout  android:id="@+id/buttonsRowRelativeLayout" 
        android:layout_height="wrap_content" 
        android:layout_width="match_parent">

    <Button
        android:id="@+id/leftButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/save"
        android:textColor="#ffffffff"
        android:background="@drawable/up_left_button_selector"
        android:layout_toLeftOf="@+id/centerButton" />
    <Button
        android:id="@+id/centerButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/change"
        android:textColor="#ffffffff"
        android:background="@drawable/up_center_button_selector" 
        android:layout_centerHorizontal="true"/>
    <Button
        android:id="@+id/rightButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/send"
        android:textColor="#ffffffff"
        android:background="@drawable/up_right_button_selector"
        android:layout_toRightOf="@+id/centerButton" />
    </RelativeLayout >      
</TableRow> 
```

而且看起来还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:25:01.930

只需为按下/释放效果创建具有角半径的形状..

```
<solid android:color="#77000000" />

<corners android:radius="10dip" />

<gradient
    android:angle="-90"
    android:endColor="#44FF0000"
    android:startColor="#CCFF0000" />

<padding
    android:bottom="10dip"
    android:left="10dip"
    android:right="10dip"
    android:top="10dip" />

<stroke
    android:width="1dip"
    android:color="#000000" >
</stroke> 
```

有关形状的更多信息，请参阅[此](http://android-dev-tips-and-tricks.blogspot.in/2012/08/xml-drawables-part-i.html)

在为按下/释放效果创建形状后，为按钮选择器创建一个 XML 文件，如下例所示

```
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_pressed="true"
        android:drawable="@drawable/prs_arrival_fb_btn" /> <!-- pressed -->
    <item
        android:state_focused="true"
        android:drawable="@drawable/prs_arrival_fb_btn" /> <!-- focused -->
    <item
        android:drawable="@drawable/arrival_fb_content_btn" /> <!-- default -->
</selector> 
```

然后将此选择器设置为您的按钮作为背景..如以下示例..

```
<Button android:text="Play" android:id="@+id/playBtn"
            android:background="@drawable/button_selector"
            android:textColor="#ffffff" /> 
```

# javascript - HTML5 音频标签停止按钮，停止实时 MP3 流？

> ID：15085320
> 
> 赞同：0
> 
> 时间：2013-02-26T09:20:24.983
> 
> 标签：javascript, html, audio, tags

我想添加一个停止按钮。此刻只有一个播放和暂停按钮，但停止并不是浏览器真正缓冲了音乐，而是不会跳到开头。使用 MP3 文件可能还可以，但不能在实时流中使用。有人能帮我吗？谢谢你。

```
var pause = new Image();
pause.src = "pause.png";

var play_control = 0;
function playmusic() {
    if (play_control == 0) {
        document.getElementById('musikplayer').play();
        document.getElementById('playbutt').src = 'pause.png';
        play_control = 1;
        window.setTimeout("playcontrol()", 0); 
        window.setTimeout("zeitanzeige()", 0);
    } else {
        document.getElementById('musikplayer').pause();
        document.getElementById('playbutt').src = 'play.png';
        play_control = 0;
    }
}
function playcontrol() {
    if(play_control == 1) {
        if(
            document.getElementById('musikplayer').currentTime 
            == document.getElementById('musikplayer').duration
        ) {
            document.getElementById('playbutt').src = 'play.png';
            play_control = 0;
        } else {
            window.setTimeout("playcontrol()",0); 
        }
    }
}
function zeitanzeige() {
    if(play_control == 1) {
        var full = document.getElementById('musikplayer').duration;
        var full_min = Math.floor(full / 60);
        var full_sec = Math.floor(full - (full_min * 60));

        if(full_min < 10) {
            full_min = '0' + full_min;
        }
        if(full_sec < 10) {
            full_sec = '0' + full_sec;
        }

        var curr = document.getElementById('musikplayer').currentTime;
        var curr_min = Math.floor(curr / 60);
        var curr_sec = Math.floor(curr - (curr_min * 60));

        if(curr_min < 10) {
            curr_min = '0' + curr_min;
        }
        if(curr_sec < 10) {
            curr_sec = '0' + curr_sec;
        }

        document.getElementById('time').innerHTML = "" + curr_min + ":" 
                                                       + curr_sec + "";

        window.setTimeout("zeitanzeige()",0);
    } else {
        document.getElementById('time').innerHTML = "00:00";
    }
}
function vol(z) {
    switch(z) {
        case "1":
            document.getElementById('musikplayer').volume = 0.2;
            document.getElementById('vol1').style.background = '#c9c3c3';
            document.getElementById('vol2').style.background = '#8d8585';
            document.getElementById('vol3').style.background = '#8d8585';
            document.getElementById('vol4').style.background = '#8d8585';
            document.getElementById('vol5').style.background = '#8d8585';
            break;
        case "2":
            document.getElementById('musikplayer').volume = 0.4;    
            document.getElementById('vol1').style.background = '#c9c3c3';
            document.getElementById('vol2').style.background = '#c9c3c3';
            document.getElementById('vol3').style.background = '#8d8585';
            document.getElementById('vol4').style.background = '#8d8585';
            document.getElementById('vol5').style.background = '#8d8585';
            break;
        case "3":
            document.getElementById('musikplayer').volume = 0.6;
            document.getElementById('vol1').style.background = '#c9c3c3';
            document.getElementById('vol2').style.background = '#c9c3c3';
            document.getElementById('vol3').style.background = '#c9c3c3';
            document.getElementById('vol4').style.background = '#8d8585';
            document.getElementById('vol5').style.background = '#8d8585';
            break;
        case "4":
            document.getElementById('musikplayer').volume = 0.8;    
            document.getElementById('vol1').style.background = '#c9c3c3';
            document.getElementById('vol2').style.background = '#c9c3c3';
            document.getElementById('vol3').style.background = '#c9c3c3';
            document.getElementById('vol4').style.background = '#c9c3c3';
            document.getElementById('vol5').style.background = '#8d8585';
            break;
        case "5":
            document.getElementById('musikplayer').volume = 1.0;    
            document.getElementById('vol1').style.background = '#c9c3c3';
            document.getElementById('vol2').style.background = '#c9c3c3';
            document.getElementById('vol3').style.background = '#c9c3c3';
            document.getElementById('vol4').style.background = '#c9c3c3';
            document.getElementById('vol5').style.background = '#c9c3c3';
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:12:55.553

如果您只需要一个停止按钮，则无法通过 javascript API 直接控制此类事情。但是您基本上可以通过暂停歌曲并将其设置为从头开始播放来模拟相同的行为（前提是您不想停止缓冲）。像这样的东西：

```
var stop = function(stopButtonAudio) {
   stopButtonAudio.pause();
   stopButtonAudio.currentTime=0;
} 
```

# java - 如何在 Eclipse 中使用其他外部 jar 依赖项创建不可运行/不可执行的 jar

> ID：15085324
> 
> 赞同：7
> 
> 时间：2013-02-26T09:20:41.233
> 
> 标签：java, eclipse, jar

我无法通过 eclipse 导出向导创建普通 jar（不可运行/不可执行），它只创建 jar 文件，但从其他类调用导出的 jar 的方法时未导出依赖的 jar 导致错误，请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:55:04.063

非常感谢@kurellajunior 的建议.. 它已通过使用[zipgroupfileset](http://ant.apache.org/manual/Tasks/zip.html)解决。 **下面是根据需要完美创建 jar 的 ant 脚本**

```
<project default="jar">
    <target name="jar">
            <jar destfile="destination directory/jarFileName.jar" basedir="my Eclipse project folder/bin (which holds all the .class files of my project separated by different package folder) ">
            <zipgroupfileset dir="Location of my external jar file directory" includes="*.jar"/>
            </jar>
        </target>
    </project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:34:28.583

这是针对语言/IDE 概念的。您只需创建 jar（库）。依赖项在外部管理（如在 maven 中） 可执行 jar 可以有一个指向依赖项的清单，但依赖项仍然需要由您捆绑...

早期的 Netbeans 在将所有引用的 jar 捆绑在一起方面做得不错——不过已经很长时间没有使用它了。

简

编辑：有一个选项可以在命令行上创建这样的 jar。由于 jar 只是一个 zip 容器，您可以轻松编写一个脚本，将您的所有依赖项与您的 jar 一起解压缩到一个地方，然后再将它们一起打包。

**我不推荐这个！**

# amazon-dynamodb - 发电机数据库查询

> ID：15085333
> 
> 赞同：0
> 
> 时间：2013-02-26T09:20:58.633
> 
> 标签：amazon-dynamodb

我的发电机数据库表如下：

```
HashKey(xyz) ,RangeKey(timestamp) 
```

现在对于每个哈希键，我都有一组范围键。

现在我想根据一组哈希键进行查询，我只想获取与该值相对应的最新值。我不想在内存排序中进行然后选择最新版本。

我可以以任何方式做到这一点吗？

用例是我将做一个bulkget并传递一组hashkey（比如100），所以我想为每个hashkey获取一条记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:47:49.333

您（当前）无法对批量获取设置约束。请参阅[http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_BatchGetItems.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_BatchGetItems.html)

但是，对于单个哈希键，您可以使用 ScanIndexForward 设置方向。有关信息，请参阅[http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_Query.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_Query.html)。

示例java代码：

```
new QueryRequest().withTableName("table-name")
  .withScanIndexForward(false)
  .withLimit(1)
  .withHashKeyValue(new AttributeValue().withS("hash-key")); 
```

但是，它的效率不会很高，因为您需要进行 100 次此调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T05:31:20.177

```
Use ScanIndexForward(true for ascending and false for descending) and can also limit the result using setLimit value of Query Expression.

Please find below the code where used QueryPage for finding the single record.

public EventLogEntitySave fetchLatestEvents(String id) {
    EventLogEntitySave entity = new EventLogEntitySave();
    entity.setId(id);

    DynamoDBQueryExpression<EventLogEntitySave> queryExpression = new DynamoDBQueryExpression<EventLogEntitySave>().withHashKeyValues(entity);
    queryExpression.setScanIndexForward(false);
    queryExpression.withLimit(1);
    queryExpression.setLimit(1);

    List<EventLogEntitySave> result = dynamoDBMapper.queryPage(EventLogEntitySave.class, queryExpression).getResults();
    System.out.println("size of records = "+result.size() );
    result.get(0);
}

@DynamoDBTable(tableName = "PROD_EA_Test")
public class EventLogEntitySave {

        @DynamoDBHashKey
        private String id;
        private String reconciliationProcessId;
        private String vin;
        private String source;
}

public class DynamoDBConfig {
    @Bean
    public AmazonDynamoDB amazonDynamoDB() {

            String accesskey = "";
            String secretkey = "";
            //
            // creating dynamo client
            BasicAWSCredentials credentials = new BasicAWSCredentials(accesskey, secretkey);
            AmazonDynamoDB dynamo = new AmazonDynamoDBClient(credentials);
            dynamo.setRegion(Region.getRegion(Regions.US_WEST_2));
            return dynamo;
        } 
```

# php - 如何将 MYSQL 记录导出到单个 Microsoft Word 文件？

> ID：15085334
> 
> 赞同：0
> 
> 时间：2013-02-26T09:21:00.833
> 
> 标签：php, mysql, excel, ms-word

我正在做一个项目，我需要将每个 mysql 记录导出到一个单独的 word 文件，但我不知道该怎么做？网上有很多文章谈论在 word 文件中导出数据，但我需要将每条记录导出到单个 word 文件中。这是我使用的代码，但它的输出只是一个 word 文件，其中包含所有记录，而我需要将每条记录保存在单独的 Microsoft Office 文件中。下面的代码使用 PHPexcel 类读取 excel 文件，然后将其导入 Mysql 现在我想将 mysql 的每条记录保存到单独的 Microsoft Word 文件中。感谢您的任何回答。

```
<?php
require_once 'Classes/PHPExcel.php';
$objReader = new PHPExcel_Reader_Excel2007();
$objPHPExcel = $objReader->load('book1.xlsx');
$rowIterator = $objPHPExcel->getActiveSheet()->getRowIterator();

$skip_rows = 0;
$excell_array_data = array();
foreach($rowIterator as $row){
    $cellIterator = $row->getCellIterator();
    $cellIterator->setIterateOnlyExistingCells(false);
    if($skip_rows >= $row->getRowIndex ()) continue;
    $rowIndex = $row->getRowIndex ();
    $excell_array_data[$rowIndex] = array();

    foreach ($cellIterator as $cell) {
        $excell_array_data[$rowIndex][$cell->getColumn()] = $cell->getCalculatedValue();
    }
}

$link = @mysql_connect('localhost', 'root', '');
if ($link){
    $db_selected = mysql_select_db('proje', $link);
    @mysql_set_charset('utf8',$link);

    //Create Database table with one Field
    $sql = "CREATE TABLE xlsx (
    rowID INT NOT NULL ,
    PRIMARY KEY (rowID)
    )";
    mysql_query($sql);

    //Create Others Field (A, B, C & ...)
    $columns_name = array();
    $columns_name = $excell_array_data[$skip_rows+1];
    foreach (array_keys($columns_name) as $fieldname ){
        $sql = "ALTER TABLE xlsx ADD $fieldname VARCHAR(1000)";
        mysql_query($sql);
    }
 $i = 0;
    //Insert Excel data to MySQL
    foreach( $excell_array_data as $k=>$v){
    //echo $keys."\n<br/>";
    //var_dump ($v);

        $keys = join(array_keys($v), ',');
        $values = join($v, "','");

/*      
ini_set("com.allow_dcom","true");
// Create new COM object – word.application
$word = new COM("word.application");

// Hide MS Word application window
$word->Visible = 0;

//Create new document
$word->Documents->Add();

// Define page margins 
$word->Selection->PageSetup->LeftMargin = '2';
$word->Selection->PageSetup->RightMargin = '2';

// Define font settings
$word->Selection->Font->Name = 'Arial';
$word->Selection->Font->Size = 10;

// Add text
$word->Selection->TypeText("word");
$word->Selection->TypeText("$v[B]");
$word->Selection->TypeText("$v[C]");
$word->Selection->TypeText("$v[D]");
$word->Selection->TypeText("$v[E]");
$word->Selection->TypeText("$v[F]");

// Save document
$filename = tempnam(__FILE__, "word");
$word->Documents[1]->SaveAs($filename);

// Close and quit
$word->quit();
unset($word);

$i++;       

 */     
 header("Content-type: application/vnd.ms-word");
header("Content-Disposition: attachment; Filename=SaveAsWordDoc.doc");
        $sql = "insert into xlsx (rowID, $keys) values ($k, '$values') " ;
        mysql_query($sql);
        ?>

        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv=\"Content-Type\" content=\"text/html; charset=Windows-1252\">
<title>Saves as a Word Doc</title>
</head>
<body>
<h1><?php echo $k; ?></h1>
  <?php 
 var_dump($v) ;

   ?>

<?php
    }

} else {
    echo "Error in database connection.";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T23:32:27.280

根据您的问题，我了解到问题在于创建多个 Word 文档，而不是从 PHP 创建一个 Word 文档。可以使用多种方法从 PHP（网站）创建一个 Word 文档。当用户在网站内部而不是在 Word 内部工作来建立文档时，我更喜欢使用带有一些占位符的 RTF 文件。对于低音量，它们很容易设置。然而，对于大量不同的模板或表格来说，这是一场噩梦，从 Invantive Composition（我在那里工作）的开发中，我了解到您可能想要切换到 XML 格式或它的功能表示。在您的情况下，我建议从 PHP 生成许多 RTF 文件，然后将它们压缩在一起，因为网站通常每次迭代只提供一个附件。将它们压缩在一起可以在内存中完成，

# java - Java 公平队列

> ID：15085335
> 
> 赞同：2
> 
> 时间：2013-02-26T09:21:03.540
> 
> 标签：java, concurrency

我在看[`ArrayBlockingQueue`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html)

对于`fair`我可以在构造函数中传递的选项，公平实际上意味着什么？

> fair - 如果为 true，则在插入或删除时阻塞的线程的队列访问将按 FIFO 顺序处理；如果为 false，则未指定访问顺序。

据我了解，公平意味着先进先出？不是我需要的吗？例如。1个线程不应该继续访问队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:32:53.950

公平意味着保证 FIFO 访问。Java 7 将为任何尝试访问队列的线程创建一个队列，该队列已被锁定。

由于维护队列以进行线程排序，公平队列在使用 Array Blocking Queue 的系统上比不公平队列要慢得多。如果所有线程以非常相似的速度进行并不是非常重要，那么保持队列不公平可能是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:33:35.570

> FAIR 是实现一个公平的调度策略，以允许实现选择一个。公平调度听起来像是更好的选择，因为它避免了不幸的线程可能被无限期延迟的可能性，但实际上，它提供的好处很少重要到足以证明它对队列操作的巨大开销是合理的。如果未指定公平调度，ArrayBlockingQueue 通常会近似公平操作，但不能保证。

[参考代码](http://codeidol.com/community/java/blockingqueue/13588/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:37:54.430

根据您的问题，您可以定义什么是公平的。你可以说公平是一个线程可以访问资源的时间段。或者您可以将 fair 定义为以先进先服务方式访问资源的线程。

FIFO 在访问资源的顺序上是公平的。

# json - 使用 Jboss7.1.1.Final 发送更大尺寸的 json

> ID：15085338
> 
> 赞同：0
> 
> 时间：2013-02-26T09:21:29.367
> 
> 标签：json, maven, http-post, jboss7.x

这是我想通过 HttpPost 发送到服务器的 Json 格式

```
{
    "key1":"value2",             
    "key2":"value2" ,
    "key3":"value3",
    "key4":"value4",
    "key5":[
     {"key5.1.1":"value5.1.1"},
     {"key5.2.1":"value5.2.1"},
     {"key5.3.1":"value5.3.1"},
     {"key5.4.1":"value5.4.1"}
    ]   
} 
```

对于较小的 Json，它工作正常，但问题是当 key5 的 jsonarray 增加它抛出异常的大小时。那么我们如何使用 Http Post 将大的 JSON 字符串发送到服务器呢？

我正在使用 maven 和 Jboss7.1.1.Final 。

我需要在 jboss 配置中进行任何更改以接受大长度的 JSON 对象吗？

也正在使用 Webservice 客户端通过 HttpPost 使用以下字符串格式发送上述数据。

```
HttpPost request = new HttpPost(BASE_URL + SEND_URL + "/" + URLEncoder.encode(new Gson().toJson(input)));       
request.addHeader("content-type", "application/x-www-form-urlencoded");
HttpResponse response = httpClient.execute(request); 
```

并且它仅对更大长度的 Json String 引发错误

java.net.SocketException：在 org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149) 在 org.apache.http 的 java.net.SocketInputStream.read(SocketInputStream.java:168) 连接重置.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:110) 在 org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:264) 在 org.apache.http.impl.conn.LoggingSessionInputBuffer.readLine (LoggingSessionInputBuffer.java:115) 在 org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:98)

我检查了以下链接，但没有得到解决方案

[JSON对象最大大小？](https://stackoverflow.com/questions/1544807/json-object-max-size)

也根据[http://geekswithblogs.net/frankw/archive/2008/08/05/how-to-configure-maxjsonlength-in-asp.net-ajax-applications.aspx](http://geekswithblogs.net/frankw/archive/2008/08/05/how-to-configure-maxjsonlength-in-asp.net-ajax-applications.aspx) JSON不限制其Jboss的大小

# mysql - 连续几天的具体状态

> ID：15085341
> 
> 赞同：2
> 
> 时间：2013-02-26T09:21:41.130
> 
> 标签：mysql

我有一个 MySQL 表，`ATT`其中`EMP_ID`,具有不同的值 1-Present、2-Absent、3-Weekly-off。我想找出在给定日期范围内连续 10 天具有状态 2 的那些。`ATT_DATE``ATT_STATUS``ATT_STATUS``EMP_ID`

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:39:55.503

请尝试一下：

```
SELECT EMP_ID FROM (
SELECT
IF((@prevDate!=(q.ATT_DATE - INTERVAL 1 DAY)) OR (@prevEmp!=q.EMP_ID) OR (q.ATT_STATUS != 2), @rownum:=@rownum+1, @rownum:=@rownum) AS rownumber, @prevDate:=q.ATT_DATE, @prevEmp:=q.EMP_ID, q.*
FROM (
SELECT
EMP_ID
, ATT_DATE
, ATT_STATUS
FROM
org_tb_dailyattendance, (SELECT @rownum:=0, @prevDate:='', @prevEmp:=0) vars
WHERE ATT_DATE BETWEEN '2013-01-01' AND '2013-02-15'
ORDER BY EMP_ID, ATT_DATE, ATT_STATUS
) q
) sq
GROUP BY EMP_ID, rownumber
HAVING COUNT(*) >= 10 
```

逻辑是，首先按员工 ID 和日期对表进行排序。然后引入一个仅在以下情况下增加的行号

*   这些日子不是连续的或
*   员工 ID 不是前一个或
*   状态不是 2

然后我只是按此行号分组，并计算每组中是否有 10 行。那应该是缺席10天或更长时间的人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T09:40:59.410

你有没有尝试过这样的事情

```
SELECT EMP_ID count(*) as consecutive_count min(ATT_DATE)
FROM (SELECT * FROM ATT ORDER BY EMP_ID) 
GROUP BY EMP_ID, ATT_DATE
WHERE ATT_STATUS = 2
HAVING consecutive_count > 10 
```

# php - 关于 php memory_limit

> ID：15085342
> 
> 赞同：0
> 
> 时间：2013-02-26T09:21:41.003
> 
> 标签：php

我的系统内存是128M，设置memory_limit为128M，可以用php fread下载150M以上的文件吗？我试过不行！可以下载只有110M左右！

谢谢大家，

```
 $sent = 0;
    $blocksize=(2 << 20);

    $fp = fopen($download_path, "rb");
    while($sent < $size){
        echo fread($fp, $blocksize);
        $sent += $blocksize;
    }
    exit(0); 
```

我用这种方式，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:24:24.930

是的，如果您不尝试将它们全部读入内存。如果您的要求允许，您应该分块读取文件并一次处理一个块。这通常是一个好主意，不管你在做什么，也不管你有多少内存。

# python - Hadoop Streaming - 模块依赖

> ID：15085343
> 
> 赞同：0
> 
> 时间：2013-02-26T09:21:44.717
> 
> 标签：python, hadoop, hadoop-streaming

hadoop 流中是否有任何标准方法来处理类似于 DistributedCache（在 java MR 中）的依赖项

例如，我有一个 python 模块可用于所有地图任务。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T18:28:13.390

您可以使用 -file 参数来指定 python 模块：

见[http://hadoop.apache.org/docs/r0.18.3/streaming.html](http://hadoop.apache.org/docs/r0.18.3/streaming.html)

如果您有依赖模块等，您可以指定多个 -file 参数。

# python - Python 线程中 join() 的用途是什么？

> ID：15085348
> 
> 赞同：263
> 
> 时间：2013-02-26T09:21:55.310
> 
> 标签：python, multithreading, python-multithreading

我正在研究 python 线程并遇到了[`join()`](http://docs.python.org/2/library/threading.html#threading.Thread.join).

作者告诉如果线程处于守护程序模式，那么我需要使用`join()`以便线程可以在主线程终止之前自行完成。

但我也看到他使用`t.join()`即使`t`不是`daemon`

示例代码是这样的

```
import threading
import time
import logging

logging.basicConfig(level=logging.DEBUG,
                    format='(%(threadName)-10s) %(message)s',
                    )

def daemon():
    logging.debug('Starting')
    time.sleep(2)
    logging.debug('Exiting')

d = threading.Thread(name='daemon', target=daemon)
d.setDaemon(True)

def non_daemon():
    logging.debug('Starting')
    logging.debug('Exiting')

t = threading.Thread(name='non-daemon', target=non_daemon)

d.start()
t.start()

d.join()
t.join() 
```

我不知道有什么用，`t.join()`因为它不是守护进程，即使我删除它我也看不到任何变化

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2013-02-26T10:00:20.560

一个有点笨拙的 ascii-art 来演示该机制：`join()`大概是由主线程调用的。它也可以由另一个线程调用，但会使图表不必要地复杂化。

`join`-calling应该放在主线程的轨道上，但是为了表达线程关系并保持它尽可能简单，我选择将它放在子线程中。

```
without join:
+---+---+------------------                     main-thread
    |   |
    |   +...........                            child-thread(short)
    +..................................         child-thread(long)

with join
+---+---+------------------***********+###      main-thread
    |   |                             |
    |   +...........join()            |         child-thread(short)
    +......................join()......         child-thread(long)

with join and daemon thread
+-+--+---+------------------***********+###     parent-thread
  |  |   |                             |
  |  |   +...........join()            |        child-thread(short)
  |  +......................join()......        child-thread(long)
  +,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,     child-thread(long + daemonized)

'-' main-thread/parent-thread/main-program execution
'.' child-thread execution
'#' optional parent-thread execution after join()-blocked parent-thread could 
    continue
'*' main-thread 'sleeping' in join-method, waiting for child-thread to finish
',' daemonized thread - 'ignores' lifetime of other threads;
    terminates when main-programs exits; is normally meant for 
    join-independent tasks 
```

所以你看不到任何变化的原因是你的主线程在你的`join`. 您可以说`join`（仅）与主线程的执行流程相关。

例如，如果您想同时下载一堆页面以将它们连接成一个大页面，您可以使用线程开始并发下载，但需要等到最后一个页面/线程完成才能开始组装单个页面在许多中。那是你使用的时候`join()`。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-02-26T09:31:12.417

直接来自[文档](http://docs.python.org/2/library/threading.html#threading.Thread.join)

> join([timeout]) 等到线程终止。这会阻塞调用线程，直到调用其 join() 方法的线程终止（正常或通过未处理的异常）或直到发生可选超时。

这意味着产生`t`和的主线程`d`等待`t`完成，直到完成。

根据您的程序使用的逻辑，您可能希望等到线程完成后再继续主线程。

同样来自文档：

> 可以将线程标记为“守护线程”。这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。

一个简单的例子，假设我们有这个：

```
def non_daemon():
    time.sleep(5)
    print 'Test non-daemon'

t = threading.Thread(name='non-daemon', target=non_daemon)

t.start() 
```

最后是：

```
print 'Test one'
t.join()
print 'Test two' 
```

这将输出：

```
Test one
Test non-daemon
Test two 
```

这里主线程显式地等待`t`线程完成，直到它`print`第二次调用。

或者，如果我们有这个：

```
print 'Test one'
print 'Test two'
t.join() 
```

我们会得到这个输出：

```
Test one
Test two
Test non-daemon 
```

在这里，我们在主线程中完成我们的工作，然后等待`t`线程完成。在这种情况下，我们甚至可以删除显式加入`t.join()`，程序将隐式等待`t`完成。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2016-05-20T04:25:55.540

感谢这个帖子——它也帮助了我很多。

我今天学到了一些关于 .join() 的知识。

这些线程并行运行：

```
d.start()
t.start()
d.join()
t.join() 
```

这些按顺序运行（不是我想要的）：

```
d.start()
d.join()
t.start()
t.join() 
```

特别是，我试图聪明和整洁：

```
class Kiki(threading.Thread):
    def __init__(self, time):
        super(Kiki, self).__init__()
        self.time = time
        self.start()
        self.join() 
```

这行得通！但它是按顺序运行的。我可以将 self.start() 放入 __ init __，但不能放入 self.join()。这必须*在*每个线程启动后完成。

join() 是导致主线程等待线程完成的原因。否则，您的线程将自行运行。

因此，一种将 join() 视为主线程上的“保留”的方法——它在主线程可以继续之前取消线程并在主线程中顺序执行。它确保您的线程在主线程向前移动之前完成。请注意，这意味着如果您的线程在调用 join() 之前已经完成，则可以 - 调用 join() 时会立即释放主线程。

事实上，我现在才想到，主线程在 d.join() 处等待，直到线程 d 完成，然后才继续执行 t.join()。

实际上，要非常清楚，请考虑以下代码：

```
import threading
import time

class Kiki(threading.Thread):
    def __init__(self, time):
        super(Kiki, self).__init__()
        self.time = time
        self.start()

    def run(self):
        print self.time, " seconds start!"
        for i in range(0,self.time):
            time.sleep(1)
            print "1 sec of ", self.time
        print self.time, " seconds finished!"

t1 = Kiki(3)
t2 = Kiki(2)
t3 = Kiki(1)
t1.join()
print "t1.join() finished"
t2.join()
print "t2.join() finished"
t3.join()
print "t3.join() finished" 
```

它产生这个输出（注意打印语句是如何相互串接的。）

```
$ python test_thread.py
32   seconds start! seconds start!1

 seconds start!
1 sec of  1
 1 sec of 1  seconds finished!
 21 sec of
3
1 sec of  3
1 sec of  2
2  seconds finished!
1 sec of  3
3  seconds finished!
t1.join() finished
t2.join() finished
t3.join() finished
$ 
```

t1.join() 正在阻止主线程。所有三个线程在 t1.join() 完成之前完成，主线程继续执行打印，然后 t2.join() 然后打印，然后 t3.join() 然后打印。

欢迎指正。我也是线程新手。

（注意：如果您有兴趣，我正在为 DrinkBot 编写代码，我需要线程来同时运行配料泵，而不是按顺序运行——等待每杯饮料的时间更少。）

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-02-26T09:30:59.273

方法join()

> 阻塞调用线程，直到调用 join() 方法的线程终止。

来源：[http ://docs.python.org/2/library/threading.html](http://docs.python.org/2/library/threading.html)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-03-06T05:04:03.757

加入 - 解释器将等到您的进程**完成**或**终止**

```
>>> from threading import Thread
>>> import time
>>> def sam():
...   print 'started'
...   time.sleep(10)
...   print 'waiting for 10sec'
... 
>>> t = Thread(target=sam)
>>> t.start()
started

>>> t.join() # with join interpreter will wait until your process get completed or terminated
done?   # this line printed after thread execution stopped i.e after 10sec
waiting for 10sec
>>> done? 
```

没有加入解释器不会等到进程**终止**，

```
>>> t = Thread(target=sam)
>>> t.start()
started
>>> print 'yes done' #without join interpreter wont wait until process get terminated
yes done
>>> waiting for 10sec 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-01-22T09:41:50.540

这个例子演示了这个`.join()`动作：

```
import threading
import time

def threaded_worker():
    for r in range(10):
        print('Other: ', r)
        time.sleep(2)

thread_ = threading.Timer(1, threaded_worker)
thread_.daemon = True  # If the main thread is killed, this thread will be killed as well. 
thread_.start()

flag = True

for i in range(10):
    print('Main: ', i)
    time.sleep(2)
    if flag and i > 4:
        print(
            '''
            Threaded_worker() joined to the main thread. 
            Now we have a sequential behavior instead of concurrency.
            ''')
        thread_.join()
        flag = False 
```

* * *

出去：

```
Main:  0
Other:  0
Main:  1
Other:  1
Main:  2
Other:  2
Main:  3
Other:  3
Main:  4
Other:  4
Main:  5
Other:  5

            Threaded_worker() joined to the main thread. 
            Now we have a sequential behavior instead of concurrency.

Other:  6
Other:  7
Other:  8
Other:  9
Main:  6
Main:  7
Main:  8
Main:  9 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-02-25T17:50:03.763

在 python 3.x 中，join() 用于将线程与主线程连接，即当 join() 用于特定线程时，主线程将停止执行，直到连接线程的执行完成。

```
#1 - Without Join():
import threading
import time
def loiter():
    print('You are loitering!')
    time.sleep(5)
    print('You are not loitering anymore!')

t1 = threading.Thread(target = loiter)
t1.start()
print('Hey, I do not want to loiter!')
'''
Output without join()--> 
You are loitering!
Hey, I do not want to loiter!
You are not loitering anymore! #After 5 seconds --> This statement will be printed

'''
#2 - With Join():
import threading
import time
def loiter():
    print('You are loitering!')
    time.sleep(5)
    print('You are not loitering anymore!')

t1 = threading.Thread(target = loiter)
t1.start()
t1.join()
print('Hey, I do not want to loiter!')

'''
Output with join() -->
You are loitering!
You are not loitering anymore! #After 5 seconds --> This statement will be printed
Hey, I do not want to loiter! 

''' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-09T14:39:47.313

在`join(t)`为非守护线程和守护线程创建函数时，主线程（或主进程）应该等待`t`几秒钟，然后才能继续在自己的进程上工作。在`t`秒的等待时间内，两个子线程都应该做他们能做的事情，比如打印一些文本。几秒钟后`t`，如果非守护线程仍然没有完成它的工作，并且在主进程完成它的工作后它仍然可以完成它，但是对于守护线程，它只是错过了它的机会窗口。但是，它最终会在python程序退出后死掉。如果有什么问题，请纠正我。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-16T08:04:56.263

主线程（或任何其他线程）加入其他线程有几个原因

1.  一个线程可能已经创建或持有（锁定）一些资源。加入调用线程可能能够代表它清除资源

2.  join() 是一个自然阻塞调用，用于在被调用线程终止后继续调用连接调用线程。

如果一个 python 程序没有加入其他线程，python 解释器仍然会代表它加入非守护线程。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-12-19T23:05:19.807

“使用 join() 有什么用？” 你说。真的，这与“关闭文件有什么用，因为当我的程序退出时python和操作系统会为我关闭我的文件？”的答案相同。

这只是一个好的编程问题。您应该在代码中不再运行线程的位置加入（）您的线程*，*因为您必须确保线程没有运行以干扰您自己的代码，或者您希望在更大的系统。

您可能会说“我不希望我的代码延迟给出答案”只是因为 join() 可能需要额外的时间。这在某些情况下可能是完全有效的，但您现在需要考虑到您的代码“为 python 和操作系统清理留下了杂乱无章的东西”。如果您出于性能原因这样做，我强烈建议您记录该行为。如果您正在构建期望其他人使用的库/包，则尤其如此。

除了性能原因之外，没有理由不加入（），我认为您的代码不需要表现得*那么*好。

# coldfusion - 如何在coldfusion中通过FTP上传文件

> ID：15085349
> 
> 赞同：2
> 
> 时间：2013-02-26T09:21:59.173
> 
> 标签：coldfusion

我使用下面的代码通过 FTP 上传文件。从第 9 行到第 14 行，它显示错误“属性'连接'对标签无效。（发现：[连接，本地文件，被动，动作，failifexists，远程文件]）”请让我知道我去了哪里错误的。提前致谢

```
1.<cftry>    
2\.  <cfftp connection="Myftp"  
3\.  action="open"  
4\.  server="#ftpurl#"
5\.  username="#form.ftpusername#"
6\.  password="#form.ftppassword#">
7\.  stoponerror="Yes">

8\.  Did it open connection? <cfoutput>#cfftp.succeeded#</cfoutput><br />                            
9\.  <cfftp connection = "Myftp"
10\. action = "PutFile"
11\. localFile="D:\home\\wwwroot\localfile.txt"
12\. remoteFile="remotefile.txt"
13\. failifexists="no"
14\. passive = "Yes">

15\. Did it put the file? <cfoutput>#cfftp.succeeded#</cfoutput><br />                       
16\. <cfftp action="close" connection="Myftp">
17\. <cfcatch>
18\.     <cfset errText = "Please enter valid FTP details" />
19\.     <cfset err = err + 1 />
20\. </cfcatch>          
21.</cftry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:45:42.287

根据对问题的评论，这里的“错误”是 CFEclipse 字典文件中的一个错误，导致错误地将“连接”标记为无效属性。

提供的代码是有效的并且可以正确执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T19:35:51.927

第 6 行有一个结束标签，看起来不合适。

```
6\.  password="#form.ftppassword#">
7\.  stoponerror="Yes"> 
```

应该改为

```
6\.  password="#form.ftppassword#"
7\.  stoponerror="Yes"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T17:50:38.737

使用`<cffile>`标签是在服务器上上传文件而不是`<cftfp>`标签的最佳方法。它既简单又紧凑。看语法。。

```
<cffile 
action = "upload"
destination = "full pathname"
fileField = "form field"
accept = "MIME type|file type"
attributes = "file attribute or list"
mode = "permission"
nameConflict = "behavior"
result = "result name"> 
```

例子 ：

```
 <cfset destination = expandPath("www\img\QuesImages") />
 <cffile action="Upload" 
         fileField="QuesPhoto"   <!--name of input tag in form-->
         destination="#destination#" 
         nameConflict="Overwrite" 
         accept="image/jpeg, image/gif, image/png"> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T17:20:16.467

```
Correct parameters are 

 9\.  <cfftp connection = "Myftp"
10\. action = "PutFile"
11\. localFile="D:\home\\wwwroot\localfile.txt"
12\. remoteFile="remotefile.txt"
13\. stoponerror="Yes"
14\. passive = "Yes">` 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-04T11:46:21.983

您可以使用以下代码上传文件.........代码是单个文件的内容

```
<cfcatch type="any">
    <cfoutput>#CFCATCH.message#</cfoutput>
    Unable to open FTP. Please check Server / Username / Password and then try again.1
    <cfabort>
</cfcatch> 
```

```
<cfcatch type="Any">
    <cfoutput>C:#CFCATCH.message#</cfoutput>
    Unable to change directory. Please check server directory and then try again.2
    <cfabort>
</cfcatch> 
```

存在...替换...

文件已存在，无法删除。请检查用户访问。
错误：D:#CFCATCH.message#3

```
 <cfcatch type="Any">
        <cfoutput>D:#CFCATCH.message#<br />
                    #CFCATCH.Detail#
        </cfoutput><br />
        There was a problem uploading your file. Please check User Access and then try again.4
        <cfabort>
    </cfcatch>
</cftry> 
```

上传您的文件时出现问题。请再试一次。错误：#CFCATCH.message#5

# java - datasnap delphi-android连接问题

> ID：15085351
> 
> 赞同：0
> 
> 时间：2013-02-26T09:22:01.497
> 
> 标签：java, android, delphi, connection, datasnap

我尝试使用用delphi编写的datasnap服务器和用java/android编写的客户端进行一些测试，但我不明白为什么当我在带有android 2.3的模拟器上测试我的应用程序android时，所有连接和功能都可以正常工作，而当我尝试使用另一个具有 android 4.2 的模拟器启动我的应用程序，应用程序启动但连接不起作用，我无法从服务器调用函数。有什么我可以做的吗？

对不起，我的英语不好。提前致谢

# sql - 在 Access 中生成表时设置字段大小（每列）

> ID：15085352
> 
> 赞同：1
> 
> 时间：2013-02-26T09:22:02.247
> 
> 标签：sql, ms-access, ms-access-2007, vba

我正在尝试使用 VBA 脚本将我的数据库导出为 .dbf，但 dbf 要求数据库具有特定的列大小值。

当我将列保留在 Access 中时，我收到一条错误消息

```
field will not fit in record 
```

如何单独设置每列的列大小？最好在生成表时，这样我就不必每次生成带有查询的新表时手动进行

我在哪里设置它们？（在查询中还是在 SQL 中？）

提前致谢！

* * *

编辑：

我已经确保它是给我错误的字段大小值。我通过在设计视图中打开表格手动更改了所有字段大小值。

所以现在我的问题的第二部分变得更加重要。是否可以在生成表格时设置字段大小。

* * *

编辑2：

我目前在查询中使用 SQL 来创建表，如下所示：

```
SELECT * INTO DB_Total
FROM Tags_AI_DB; 
```

完成初始设置后`DB_Total`，我使用了几个`Insert into`查询来添加其他行：

```
INSERT INTO DB_TOTAL
SELECT a.*
FROM Tags_STS_ENA_DB AS a 
LEFT JOIN DB_TOTAL AS b 
ON a.NAME = b.NAME
WHERE b.NAME IS NULL; 
```

`DB_Total`如果我在使用查询生成表时设置了表中的列值，那么在使用查询插入更多行`Select into`后它们是否仍然具有这些值？`Insert Into`

* * *

编辑3：

我决定（根据您的一些建议和同事的一些建议，最好先制作我的表，然后用查询更新此表。

但是，似乎我在使用 Access 时遇到了死胡同，这是我正在使用的代码：

```
CREATE TABLE DB_Total ("NAME" char(79),"TYPE" char(16), "UNIT" char(31), 
"ADDR" char(254), "RAW_ZERO" char(11), "RAW_FULL" char(11), "ENG_ZERO" char(11), 
"ENG_FULL" char(11), "ENG_UNIT" char(8), "FORMAT" char(11), "COMMENT" char(254), 
"EDITCODE" char(8), "LINKED" char(1), "OID" char(10), "REF1" char(11), "REF2" char(11),
"DEADBAND" char(11), "CUSTOM" char(128), "TAGGENLINK" char(32), "CLUSTER" char(16), 
"EQUIP" char(254), "ITEM" char(63), "HISTORIAN" char(6), 
"CUSTOM1" char(254), "CUSTOM2" char(254), "CUSTOM3" char(254), "CUSTOM4" char(254), 
"CUSTOM5" char(254), "CUSTOM6" char(254), "CUSTOM7" char(254), "CUSTOM8" char(254)) 
```

这些是我制作被我们使用的应用程序接受的 DBF 文件所需的所有列。

当这产生以下错误时，您会理解我的悲伤：

```
Record is too large 
```

我能做些什么来使这张桌子正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:49:20.583

## 更新

Access 2007 的最大记录大小约为 2kB（毫无疑问有人会更正该值）当您创建 CHAR(255) 时，无论字段中的内容如何，​​它将使用 255 个字节的空间。
相比之下，VARCHAR 不会占用空间（仅足以定义它们），直到您将某些内容放入字段中，它们会动态增长。

`CHAR(x)`将s更改为`VARCHAR(x)`s 您会将表格的长度缩小到允许的值内。请注意，如果您尝试插入的行大于 2kB 限制，您可能会遇到麻烦。

* * *

## 以前的

生成表时指定列长度的方法是使用`CREATE TABLE`语句而不是`SELECT * INTO`.

```
CREATE TABLE DB_Total
(
 Column1Name NVARCHAR(255) --Use whatever datatype and length you need
,Column2Name NUMERIC(18,0) --Use whatever datatype and length you need
,...
) ;

INSERT INTO DB_Total
.... 
```

如果使用`SELECT * INTO`语句，SQL 将使用它在现有数据中找到的任何字段长度和类型。

在插入语句中列出列名也是一种更好的做法，所以不要

```
INSERT INTO DB_TOTAL
SELECT a.* 
```

你应该把：

```
INSERT INTO DB_Total
       (
        Column1Name
       ,Column2Name
       ,...
       )
SELECT  a.Column1Name
       ,a.Column2Name
       ,...
FROM   ...
WHERE  ... ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:59:37.637

在*Edit2*中，您指出您的流程以“制作表”( `SELECT INTO`) 查询开始，该查询创建`DB_Total`并使用来自`Tags_AI_DB`. 然后运行一系列“追加”( `INSERT`) 查询以添加来自其他表的数据。

现在您的问题是您需要特定的字段大小设置`DB_Total`，但无法使用“制作表”查询来定义这些大小。

我认为您应该创建`DB_Total`一次并根据需要设置字段大小。使用设计视图中的表手动执行此操作，或者`CREATE TABLE`如果您愿意，可以执行语句。

然后忘记“make table”查询，只使用“append”查询来添加数据。

如果问题是这是一个重复操作，并且您想在导入新数据之前丢弃以前的数据，请执行`DELETE FROM DB_Total`而不是`DROP TABLE DB_Total`. 这将允许您保留（现在为空）`DB_Total`表的结构，因此您无需再次设置字段大小。

在我看来，唯一的潜在问题可能是源表的结构是否发生变化。如果发生这种情况，请修改 的结构`DB_Total`，使其再次兼容。

# sql - 选择的结果顺序

> ID：15085359
> 
> 赞同：1
> 
> 时间：2013-02-26T09:22:25.090
> 
> 标签：sql, sql-server

我有一个有趣的问题：我有一个函数可以得到一个逗号分隔的整数字符串。

这里有2个处决：

```
select ID from dbo.udf_NumList2table ('124,126,132,180,176')
select RP.ID, My.ID 
from dbo.udf_NumList2table ('124,126,132,180,176') RP join MyTable My
        on RP.ID=My.ID 
```

在第一次执行中，结果的顺序就像字符串中数字的顺序一样。在第二次执行中，结果的顺序是升序的（176 在 180 之前）。

为什么？我猜想 MyTable 中列 ID 上的 PK 是原因 - SQL 更喜欢在键上运行。

我说得对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:27:24.907

Select 保证不会对结果进行排序，因此甚至不能保证每次运行时您的结果都相同，尽管在您的情况下，由于数据非常小，它们将是相同的。这个顺序对优化器来说是最方便的，所以你的猜测在这里很可能是正确的。

在数据量更大的情况下，查询可以在不同的执行线程中拆分，因此会给出更混乱的顺序，并且根据服务器上的工作负载，运行之间可能会有所不同。

要获得一致的顺序，您必须使用`ORDER BY`子句。

# asp.net - 在对象数据源中将对象作为参数传递

> ID：15085360
> 
> 赞同：0
> 
> 时间：2013-02-26T09:22:31.313
> 
> 标签：asp.net

我有一个对象数据源，该对象数据源有一个更新方法，该方法有一个更新参数。我的问题是如何将对象作为参数传递给对象数据源。？任何想法

# asp.net-mvc - 实体框架和一对零对零 (?) 连接

> ID：15085361
> 
> 赞同：0
> 
> 时间：2013-02-26T09:22:31.397
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4

当两种依赖表有时必须一起工作时，我遇到了有趣的情况。

例子：

当两个不同部门的人带数据，一个机器，第二个关于引擎，不知道哪个引擎会去哪个机器，反之亦然。这些表之间的关系是引擎有可选机器，机器有可选引擎。应该如何看待这些表之间的关系？

模型：

```
public class Machine{

    [Key]
    [ScaffoldColumn(false)]
    public virtual int MachineId { get; set; }

    public string MachineSerialNo { get; set; }

    public virtual int? MetrykiEnginedD { get; set; }
    public virtual MachineEngine MachineEngine { get; set; }
}

public class MachineEngine {

    [Key]
    [ScaffoldColumn(false)]
    public virtual int MachineEngineId { get; set; }

    public virtual string MachineEngineSN { get; set; }

    public virtual int? MachineId { get; set; }
    public virtual Machine Machine { get; set; }
} 
```

代码：

```
modelBuilder.Entity<MachineEngine>().HasOptional(p => p.Machine) ???

modelBuilder.Entity<Machine>().HasOptional(p => p.MachineEngine) ?? 
```

谢谢您的帮助。安杰伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:54:59.507

假设 1 'MachineEngine' 只能属于 0 或 1 'Machine'，而 1 'Machine' 只能有 0 或 1 'MachineEngine' 我相信你可以配置如下

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Machine>().HasOptional(x => x.MachineEngine).WithOptionalDependent();

        base.OnModelCreating(modelBuilder);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:03:28.113

如果`MetrykiEnginedD`应该是外键，那么：

```
modelBuilder.Entity<Machine>()
                    .HasOptional(p => p.MachineEngine)
                    .WithMany()
                    .HasForeignKey(entity => entity.MetrykiEnginedD);
modelBuilder.Entity<MachineEngine>()
                    .HasOptional(p => p.Machine)
                    .WithMany()
                    .HasForeignKey(entity => entity.MachineId); 
```

# java - 从固定格式的字符串中提取数字

> ID：15085363
> 
> 赞同：0
> 
> 时间：2013-02-26T09:22:34.310
> 
> 标签：java, string, split

我有一个固定的格式`String`，它将永远是：**SPXXX-SPYYY.zip**

我需要从中提取*XXX*和*YYY*，`String`但是如果例如*XXX*是 003 那么我想要**3**而**不是 003**。（与*YYY*相同）。

我写了这两个代码：

**1.**

```
String st = "SP003-SP012.zip";
String[] splitted = st.split("\\.");
splitted = splitted[0].split("-");  
splitted = splitted[0].split("P");
Integer in = new Integer(splitted[1]);
System.out.println(in); //Will print 3
//The same for the other part of the String 
```

**2.**

```
Pattern pattern = Pattern.compile("^[a-zA-Z]+([0-9]+).*");
Matcher matcher = pattern.matcher(st);
int num = 0;
while (matcher.find()) {
   num = Integer.parseInt(matcher.group(1));
   System.out.println(num);
} 
```

*   为什么第二个代码只返回第一个数字？( *XXX* ) 错过了第二个？
*   什么代码更适合这个目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:25:36.827

如果它总是相同的格式，那为什么不直接使用`substring`呢？

```
String str = "SP003-SP456.zip";
int xxx = Integer.parseInt(str.substring(2, 5));
int yyy = Integer.parseInt(str.substring(8, 11)); 
```

或者，如果那些*XXX*和*YYY*不一定是数字，那么只需添加`try-catch`：

```
String str = "SP003-SP456.zip";
int xxx, yyy;

try {
    int xxx = Integer.parseInt(str.substring(2, 5));
}
catch(NumberFormatException e) {
   xxx = 0;
}

try {
    int yyy = Integer.parseInt(str.substring(8, 11));
}
catch(NumberFormatException e) {
   yyy = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:25:58.157

> 为什么第二个代码只返回第一个数字？(XXX) 错过了第二个？

因为您的正则表达式只定义它期望看到一系列数字，并且只有一个捕获组来捕获它们。正则表达式希望看到字母后跟数字，并且只找到一个匹配的东西。（一旦消耗了第一位，就没有字母了，所以没有任何东西与你的 . 匹配`[a-zA-Z]+`。）与其尝试重复运行匹配器，我可能会定义一个匹配这两个位的单个正则表达式：

```
Pattern pattern = Pattern.compile("^[a-zA-Z]+([0-9]+)-([0-9]+).*"); 
```

...并使用生成的两个捕获组。（另请注意，您可以使用`\d`匹配数字：

```
Pattern pattern = Pattern.compile("^[a-zA-Z]+(\\d+)-(\\d+).*"); 
```

...但这是一个旁注。）

> 为此目的使用正则表达式是否比我建议的第一个代码更好？

这取决于你，这是一个判断电话。对于这种特定情况，如果格式确实是不变的，我会选择[Aleks G 的方法](https://stackoverflow.com/a/15085414/157247)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:26:53.213

使用以下内容：

```
Pattern pattern = Pattern.compile("^[a-zA-Z]+0*(\\d+)-[a-zA-Z]+0*(\\d+).*");
Matcher matcher = pattern.matcher(st);
if (matcher.matches()) {
   int num1 = Integer.parseInt(matcher.group(1));
   int num2 = Integer.parseInt(matcher.group(2));
   System.out.println(num1+" - "+num2);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T09:28:08.680

> 为什么第二个代码只返回第一个数字？(XXX) 错过了第二个？

如果您查看您的模式 - ，它的开头`"^[a-zA-Z]+([0-9]+).*"`有一个锚点。`caret - ^`这意味着，您的模式只会在字符串的开头进行搜索。这就是为什么你只有第一个数字对应于`SPXXX`在 string 的开头找到`"SPXXX-SPYYY"`，而不是在 pattern`SPYYY`的开头，因为它不在开头，因此不会被匹配。

您可以删除`caret (^)`，最后您不希望这样做`.*`，因为您正在使用[`Matcher#find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)方法。

```
Pattern pattern = Pattern.compile("[a-zA-Z]+([0-9]+)"); 
```

但是，鉴于您的字符串将始终采用相同的格式，您甚至可以使用*更简单的模式*：

```
Pattern pattern = Pattern.compile("\\d+"); 
```

并从*matcher获得第**1 组*。

 *> 什么代码更适合这个目的？

我会采用第二种方法。拆分字符串可能并不总是有效，并且会随着字符串的增长而变得复杂。仅`split`当您真正想在某个定界符上拆分字符串时才应使用。在这种情况下，您不想拆分字符串，而是要提取特定模式。第二种方法是要走的路。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T09:30:55.647

像这样定义模式`Pattern.compile("[a-zA-Z]+([0-9]+)");`

对于示例字符串，`matcher`匹配项`SPXXX`和`SPYYY`循环的两次迭代。

并分别`group(1)`返回`XXX`和`YYY`用于这两种情况。*

# asp.net-mvc - ASP.NET 的设计模式选择

> ID：15085367
> 
> 赞同：1
> 
> 时间：2013-02-26T09:22:52.197
> 
> 标签：asp.net-mvc, design-patterns

好的，我在进行一些内部辩论。我正在尝试决定我应该为我的 ASP.NET 网店应用程序使用什么设计模式。我一直在寻找一些，这些是我觉得最有趣的

*   MVC
*   MVP
*   MVVM

所以我正在努力决定选择哪一个。为此提出这个问题。什么是赞成和反对。哪一个更适合我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:35:42.667

我会选择 ASP.NET MVC。

优点：

1.  提供与[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)相关的所有优点，例如单元测试很容易
2.  MVVM 可以与 MVC 一起使用
3.  良好的社区支持和示例

MVP 有它的好处，但没有击败 1 和 2，当然也不会接近 3。

可能的缺点

1.  您的团队已经非常熟练地使用另一种模式/架构
2.  您不需要解耦或因此相关的复杂性

但是，MVC 并不是特别困难，所以我不会以此为理由忽略它。此外，只有最基本的应用程序不需要解耦，因此 con 2 可能不适用于绝大多数情况。

# qt - 在 Android 上运行应用程序时出现黑屏

> ID：15085373
> 
> 赞同：3
> 
> 时间：2013-02-26T09:23:10.637
> 
> 标签：qt, qt-necessitas

我正在使用必需品 4.1

当应用程序在模拟器或平板电脑上运行时出现黑屏并且程序自动关闭。

如何解决这个问题？

# symfony - Symfony2 创建服务

> ID：15085376
> 
> 赞同：4
> 
> 时间：2013-02-26T09:23:15.433
> 
> 标签：symfony, service, dependency-injection

symfony2 文档中曾经有一个关于如何创建服务 (my_mailer) 的操作指南，但我似乎无法在任何地方找到它。

谁能告诉我在哪里可以找到它，或者其他一些关于如何在 symfony2 中创建服务的教程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T09:37:38.437

服务容器 - [http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)

在容器中创建/配置服务 - [http://symfony.com/doc/current/book/service_container.html#creating-configuring-services-in-the-container](http://symfony.com/doc/current/book/service_container.html#creating-configuring-services-in-the-container)

服务的好例子 - Twig 扩展 - [http://symfony.com/doc/current/cookbook/templating/twig_extension.html](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)

# windows - Windows 8 应用程序磁贴时钟与秒

> ID：15085379
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:23:30.023
> 
> 标签：windows, live, clock, tile

我想开发一个 Windows 8 应用程序，在磁贴中显示时钟运行秒数。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:05:38.413

如果您的应用程序没有运行，即使后台任务刷新频率为 15 分钟也是不可能的。

目前，根本不支持这种情况。

# ios - 更改方向时 UIScrollView 的问题，iOS

> ID：15085381
> 
> 赞同：0
> 
> 时间：2013-02-26T09:23:34.627
> 
> 标签：ios, uiscrollview, orientation, screen-orientation

我有一个`UIScrollView`，我在其中显示了我的应用程序的各种设置。

我`UIScrollView`从 builder 创建，我将它作为子视图添加到我的 View 并从 builder 的大小检查器中将它放置在位置 Y: -10 ，以显示在我的导航栏下方。在我刚刚添加的代码中

```
self.scrollView.contentSize =CGSizeMake(self.scrollView.frame.size.width,1000); 
```

一切都按预期工作。

当我尝试旋转屏幕时，我的问题就开始了。出现了两个主要问题。

第**一个**是，UIScrollView 的开头是不一样的。它从比应有的更低的位置“开始”，隐藏了一些选项。*（下图）*

第二**个**是，UIScrollView 的宽度不会自动调整到新的屏幕方向，和以前一样。*（下图）*

那么我到底应该怎么做才能在两个方向上都有一个好的结果呢？

我附上两个方向的图像。第一个是按预期“工作”的肖像，第二个是出现问题的风景。

![人像模式](../Images/d4a1016fad07e92ddbd76e439b0d2c39.png)

![横向模式](../Images/51f18aa83bae73829c1e3cf43e21ae9d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:38:00.180

调整您`scrollView`的 s `frame`in `-viewDidLayoutSubviews`（在设备旋转时调用）或使用[Springs 和 Struts](http://www.techotopia.com/index.php/IPhone_Rotation,_View_Resizing_and_Layout_Handling)

# javascript - 使用 JavaScript 在 HTML 属性周围插入 "

> ID：15085382
> 
> 赞同：1
> 
> 时间：2013-02-26T09:23:37.173
> 
> 标签：javascript, regex, xhtml, replace

我想`"`通过使用 JavaScript 插入没有的属性。

例如：

```
<a class=external title=Title href="http://www.google.com" rel=external>My link</a> 
```

应替换为：

```
<a class="external" title="Title" href="http://www.google.com" rel="external">My link</a> 
```

相似地：

```
<a target=_blank href="http://www.google.com">My link</a> 
```

应替换为：

```
<a target="_blank" href="http://www.google.com">My link</a> 
```

基本上 - 所有没有的属性都`"`应该如此。

任何想法？我猜正则表达式是要走的路？

编辑：我需要这样做，因为 HTML 是由所见即所得的编辑器生成的，以便提交给 CMS。CMS 只接受有效的 XHTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:35:08.820

假设您可以使用 jQuery，给定一个`htmlInput`要清理的变量，我会尝试：

```
var cleanHtml = $('<div>'+htmlInput+'</div>').html(); 
```

看到这个[jsfiddle](http://jsfiddle.net/pUq7U/)

希望这会有所帮助

# javascript - 为什么这个简单的 attrTween 示例不起作用？

> ID：15085383
> 
> 赞同：3
> 
> 时间：2013-02-26T09:23:37.347
> 
> 标签：javascript, d3.js

我试图理解 attrTween。我知道进行这个方格移动的简单方法就是使用 attr，但该示例的目的是让我了解 attrTween。下面的例子没有做任何事情，但是控制台中也没有出现js错误，所以我不确定我哪里出错了。

```
var svg = d3.select("svg")
var pi = Math.PI;

var mySquare=svg.append("rect")
  .attr("x",60)
  .attr("y",60)
  .attr("width",200)
  .attr("height",200);

mySquare.transition()
  .duration(2000)
  .attrTween("x", d3.interpolate(60,400)) 
```

这是该示例的实时编码链接：http: [//livecoding.io/5037197](http://livecoding.io/5037197)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T13:25:21.017

来自[API](https://github.com/mbostock/d3/wiki/Transitions#wiki-attrTween)：“*补间的***返回值**[强调添加]必须是一个插值器：一个函数......”

 *这是一种方法，具有内联函数。

[http://jsfiddle.net/TsMgJ/2/](http://jsfiddle.net/TsMgJ/2/)

```
mySquare.transition()
  .duration(2000)
  .delay(500)
  .attrTween("x", function (d, i, a) { 
       console.log(a); // returns 60, the value of "x" at the start
       return d3.interpolate(a, 400); 
  }); 
```

* * *

这是另一种方法，其功能位于链接之外。

[http://jsfiddle.net/tz5KT/1/](http://jsfiddle.net/tz5KT/1/)

```
mySquare.transition()
  .duration(2000)
  .delay(500)
  .attrTween("x", myTweenFunction ); 

function myTweenFunction(d, i, a) {
  console.log( a ); // returns 60, the current value (value at start)
  return d3.interpolate(a, 400);
} 
```*

# class - ZF2 从响应中提取标头

> ID：15085386
> 
> 赞同：0
> 
> 时间：2013-02-26T09:23:57.127
> 
> 标签：class, curl, header, zend-framework2, protected

我将 cURL 与 zend 框架一起使用，它给了我标题和站点内容。

我在另一个类中使用此输出，我想从 curl 输出中提取标题以查看语言是否为 ser（内容语言）。

输出具有受保护的类，例如响应和标头，我尝试设置类标头和响应以尝试通过此获取标头值，但它没有给我任何结果。

（卷曲输出 => $this-> 内容）

> ```
> class Zend\Http\Response#258 (7) { protected $recommendedReasonPhrases => array(57) { [100] => string(8) "Continue" 
> ```
> 
> [101] => string(19) "交换协议" [102] => string(10) "处理" [200] => string(2) "OK" [201] => string(7) "创建" [ 202] => string(8) "已接受" [203] => string(29) "非权威信息" [204] => string(10) "无内容" [205] => string(13) "重置内容”[206] => 字符串（15）“部分内容”[207] => 字符串（12）“多状态”[208] => 字符串（16）“已报告”[300] => 字符串（16 ) "多项选择" [301] => string(17) "永久移动" [302] => string(5) "找到" [303] => string(9) "查看其他" [304] => string( 12）“未修改”[305] => 字符串（9）“使用代理”[306] => 字符串（12）“切换代理”[307] => 字符串（18）“临时重定向”[400] => 字符串（11）“错误请求”[401] => 字符串（12）“未授权”[402] => 字符串（16） “需要付款”[403] => 字符串（9）“禁止”[404] => 字符串（9）“未找到”[405] => 字符串（18）“方法不允许”[406] => 字符串（ 14）“不可接受”[407] => 字符串（29）“需要代理身份验证”[408] => 字符串（16）“请求超时”[409] => 字符串（8）“冲突”[410] => string(4) "Gone" [411] => string(15) "Length required" [412] => string(19) "Precondition Failed" [413] => string(24) "Request Entity Too Large" [414] => 字符串（21）“请求 URI 太大”[415] => 字符串（22）“不支持的媒体类型”[416] => 字符串（31）“请求的范围不可满足”[417] => 字符串（18）“预期失败”[418] => 字符串（12 ) “我是茶壶”[422] => 字符串（20）“无法处理的实体”[423] => 字符串（6）“锁定”[424] => 字符串（17）“依赖失败”[425] = > 字符串（20）“无序集合”[426] => 字符串（16）“需要升级”[428] => 字符串（21）“需要先决条件”[429] => 字符串（17）“请求太多”[ 431] => 字符串（31）“请求标头字段太大”[500] => 字符串（21）“内部服务器错误”[501] => 字符串（15）“未实现”[502] => 字符串（11 ) “坏网关” [503] =>字符串（19）“服务不可用”[504] => 字符串（16）“网关超时”[505] => 字符串（26）“不支持 HTTP 版本”[506] => 字符串（23）“变体也协商" [507] => string(20) "Insufficient Storage" [508] => string(13) "Loop Detected" [511] => string(31) "Network Authentication required" } protected $statusCode => int( 200) protected $reasonPhrase => string(2) "OK" protected $version => string(3) "1.1" protected $headers => class Zend\Http\Headers#257 (3) { protected $pluginClassLoader => NULL protected $headersKeys => array(15) { [0] => string(4) "date" [1] => string(6) "server" [2] => string(10) "xpoweredby" [3] =>字符串（12）“xdrupalcache”[4] => string(7) "expires" [5] => string(12) "lastmodified" [6] => string(12) "cachecontrol" [7] => string(4) "etag" [8 ] => string(15) "contentlanguage" [9] => string(10) "xgenerator" [10] => string(4) "vary" [11] => string(15) "contentencoding" [12] = > string(13) "contentlength" [13] => string(10) "connection" [14] => string(11) "contenttype" } protected $headers => array(15) { [0] => array( 2) { 'name' => string(4) "Date" 'line' => string(35) "Date: Tue, 26 Feb 2013 09:57:42 GMT" } [1] => array(2) { 'name' => string(6) "Server" 'line' => string(30) "Server: Apache/2.2.14 (Ubuntu)" } [2] =>array(2) { 'name' => string(12) "X-Powered-By" 'line' => string(35) "X-Powered-By: PHP/5.3.2-1ubuntu4.18" } [3 ] => array(2) { 'name' => string(14) "X-Drupal-Cache" 'line' => string(20) "X-Drupal-Cache: MISS" } [4] => array( 2) { 'name' => string(7) "Expires" 'line' => string(38) "Expires: Sun, 19 Nov 1978 05:00:00 GMT" } [5] => array(2) { 'name' => string(13) "Last-Modified" 'line' => string(46) "Last-Modified: Tue, 26 Feb 2013 09:57:42 +0000" } [6] => array(2 ) { 'name' => string(13) "Cache-Control" 'line' => string(32) "Cache-Control: public, max-age=0" } [7] => array(2) { '名字' =>string(4) "ETag" 'line' => string(20) "ETag: "1361872662-1"" } [8] => array(2) { 'name' => string(16) "Content-Language" 'line' => string(20) "Content-Language: ru" } [9] => array(2) { 'name' => string(11) "X-Generator" 'line' => string(41) “X 生成器：Drupal 7 ([http://drupal.org](http://drupal.org) )" } [10] => array(2) { 'name' => string(4) "Vary" 'line' => string(28) "Vary: Cookie,Accept-Encoding" } [11] => array(2) { 'name' => string(16) "Content-Encoding" 'line' => string(22) "Content-Encoding: gzip" } [12] => array(2 ) { 'name' => string(14) "Content-Length" 'line' => string(20) "Content-Length: 7139" } [13] => array(2) { 'name' => string( 10) "连接" 'line' => string(17) "Connection: close" } [14] => array(2) { 'name' => string(12) "Content-Type" 'line' => string (38)“内容类型：text/html；charset=utf-8" } } } 受保护的 $metadata =>

（代码）

```
 $response = new Response();
    $response->getHeaders($this->content);
    $headers = new Headers();
    var_dump($headers->get('Content-Language')); 
```

（生成）

```
bool(false) 
```

（$response->getHeaders 的 var_dump）

> 类 Zend\Http\Headers#259 (3) { protected $pluginClassLoader => NULL protected $headersKeys => array(0) { } protected $headers => array(0) { } }

提前致谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:56:19.803

您不应构建 new`Zend\Http\Response`或 new ，而应使用当前上下文`Zend\Http\Headers`中已经存在的那些：`$this->content`

```
var_dump($this->content->getHeaders()->get('Content-Language')); 
```

# c# - 意外的正则表达式结果

> ID：15085387
> 
> 赞同：0
> 
> 时间：2013-02-26T09:24:00.933
> 
> 标签：c#, regex

我正在尝试提取与用户名关联的号码。每个用户名旁边都有一个特定的值。

私人无效查询用户（）{

```
 string browserText = webBrowser1.DocumentText;
        Match match = Regex.Match(browserText, "(>pickles</a></td><td>).*(</td><td align=\"center\">)");

        string id = match.ToString();
        string clean_id = Regex.Replace(id, @"\D", "");
        textBox1.AppendText(clean_id);

    } 
```

我正在搜索的文档具有以下格式...

```
<tr><td>17.</td><td>ab</td><td><a href="http://www.*****.com/s.php?id=500000">pickles</a></td><td>150,000</td><td align="center"></td></tr>

<tr><td>18.</td><td>cd</td><td><a href="http://www.*****.com/s.php?id=7245658">donuts</a></td><td>250</td><td align="center"></td></tr> 
```

我期待结果是“150000”。然而事实并非如此，它从 150000 开始创建一个巨大的数字，然后将所有其他数字组合起来。

我对正则表达式非常不熟悉，但类似的解决方案在其他地方也适用于我。我是否忽略了一些简单的事情，还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:27:24.970

.* 是贪婪的并且会匹配所有字符，所以匹配将是一个巨大的多行匹配。您需要将数字描述为“数字、逗号、数字”而不是“0 到数百万个任意字符”

所以而不是

```
.* 
```

利用

```
([0-9]+,)?[0-9]+ 
```

或者其他的东西。

或使用某种否定的前瞻来确保您不会意外匹配 <。此外，如果源材料是有效的 xml 或 html，请使用 xml 或 html 解析器对其进行解析。

# java - 如何将 md5 加密的密码而不是纯文本传递给 IMAP 服务器

> ID：15085390
> 
> 赞同：1
> 
> 时间：2013-02-26T09:24:08.123
> 
> 标签：java, email, passwords, imap

我正在编写一个电子邮件客户端，它是公司大型 Web 应用程序的一部分。用户通过创建一个 MD5 哈希并将其与存储在数据库中的哈希值进行比较来登录整个 Web 应用程序来进行身份验证。

但是，这超出了我的范围。我只能访问数据库中的单向哈希。由于应使用电子邮件和 Web 应用程序的相同凭据，有没有办法通过 Java Mail 将 MD5 哈希而不是纯文本传递到 IMAP 服务器？我会这么认为，因为邮件服务器只会创建纯文本密码的哈希值并进行比较。但是如何在 Java Mail 的 IMAP 中做到这一点？

谢谢

# windows-phone-7 - 在 windows phone 市场中添加另一个版本的应用程序

> ID：15085395
> 
> 赞同：0
> 
> 时间：2013-02-26T09:24:25.130
> 
> 标签：windows-phone-7

我是 Windows Phone 的新手。我开发了一个简单的应用程序，并在 windows phone 市场上发布。在我发布后，我的申请已被接受并在市场上发布。但是经过一些安装后，我在我的应用程序中发现了小错误。现在我更改并部署了。我不知道如何删除旧的 xap 文件并上传这个新的 xap 文件。谁能帮我解决这个问题？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:27:18.127

1.  访问[http://dev.windowsphone.com/en-us](http://dev.windowsphone.com/en-us)并登录

2.  转到**仪表板**，然后**应用程序**并选择您要更新的应用程序

3.  那里有**更新应用程序**链接

# javascript - jQuery 弃用了 '.toggle()'。寻求替代方法

> ID：15085400
> 
> 赞同：4
> 
> 时间：2013-02-26T09:24:42.010
> 
> 标签：javascript, jquery

由于已从 jQuery`.toggle()`中[弃用](http://bugs.jquery.com/ticket/11786)，我正在寻找一种新的简单解决方案，该解决方案将使我能够创建一个“阅​​读更多”按钮，该按钮可以向下滑动段落，同时将按钮文本更改为“少读”。

我已经把这个工作代码放在一起：

```
var moreText = "Read more";
var lessText = "Read less";

$(document).ready(function () {
    $("a.readmorebtn").text(moreText);
    $("a.readmorebtn").toggle(function () {
        $("a.readmorebtn").text(lessText);
        $("p.more").slideToggle(0);
    },

    function () {
        $("a.readmorebtn").text(moreText);
        $("p.more").slideToggle(0);
    });
}); 
```

[http://jsfiddle.net/approach/gDvyR/](http://jsfiddle.net/approach/gDvyR/)

您将在小提琴中看到左侧选项中选中了“迁移 1.1.0”，这是`.toggle()`使用此（最新）版本的 jQuery 以这种方式进行工作的唯一方法。

我的问题是，你能想到另一种执行相同功能但不使用`.toggle()`和迁移的方法吗？

如果您觉得这个问题已在其他地方得到解答，我深表歉意，但我一直在寻找“相对简单”的解决方法的提示，而没有真正看到任何确定的方法。不幸的是，作为 jQuery 的新手，它对我来说似乎并不那么简单！

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:41:04.150

我个人认为这里的所有答案都过于详尽，无法满足您的需求。这应该可以很好地解决问题，并且它适用于多次出现。[http://jsfiddle.net/BramVanroy/gDvyR/5/](http://jsfiddle.net/BramVanroy/gDvyR/5/)

```
var moreText = "Read more",
    lessText = "Read less",
    moreButton = $("a.readmorebtn");

moreButton.click(function () {
    var $this = $(this);
    $this.text($this.text() == moreText ? lessText : moreText);
    $this.next("p.more").slideToggle("fast");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:33:43.090

这是一个通用的替换：

```
$.fn.toggleFuncs = function() {
    var functions = Array.prototype.slice.call(arguments),
    _this = this.click(function(){
        var i = _this.data('func_count') || 0;
        functions[i%functions.length]();
        _this.data('func_count', i+1);
    });
} 
```

您可以像使用 toggle 一样使用它：

```
$('something').toggleFuncs(f1, f2, f3); 
```

**[示范](http://jsfiddle.net/QWSbV/)**

# jquery-mobile - 使用 Jquery Mobile 1.3.0 和 knockoutjs 时无法加载页面

> ID：15085401
> 
> 赞同：0
> 
> 时间：2013-02-26T09:24:43.117
> 
> 标签：jquery-mobile, knockout.js

我编写了一个使用 jquery mobile 1.2.0 和 knockoutjs 的 html 代码，如下所示

```
<div id="shoppingCar" data-role="page">
    <div data-role="header" data-position="fixed" data-id="headernav">
        <a data-transition="slide" data-bind="html:editTextForLeft, click:$root.editFuncForLeft, attr:{href: $root.getHref }">add</a>
        <h2>order</h2>
        <a data-bind="click:toEditModel, html:editText" data-mini="true">edit</a>
    </div> 
```

它运行良好（没有错误没有警告并且添加属性可以加载页面#goodsAdd），但是当我将jquery mobile 1.2.0 更新到1.3.0 时，属性a 无法加载goodsAdd 页面。任何人都可以帮助我吗？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:22:27.910

我遇到了同样的问题，并在 knockout.js 网站上找到了答案。只需在点击处理程序的末尾添加“return true”即可。

> 注3：允许默认点击动作
> 
> 默认情况下，Knockout 将阻止点击事件采取任何默认操作。这意味着如果您在 a 标记（链接）上使用 click 绑定，例如，浏览器将只会调用您的处理函数，而不会导航到链接的 href。这是一个有用的默认值，因为当您使用单击绑定时，通常是因为您将链接用作操作视图模型的 UI 的一部分，而不是作为指向另一个网页的常规超链接。
> 
> 但是，如果您确实想让默认点击操作继续进行，只需从您的点击处理程序函数中返回 true。

# android - Android Proguard 文本编码问题

> ID：15085404
> 
> 赞同：2
> 
> 时间：2013-02-26T09:24:55.937
> 
> 标签：android, character-encoding, proguard

**编辑 2：Proguard 不会破坏字符串：源文件字符编码管理错误！**

（我最初的问题如下）

简而言之：在 eclipse 上编译很好（无论 java 源字符编码是什么）。但我确实与 Jenkins 一起编译发布。

我不得不将源编码从 ISO-8859-1 更改为 UTF-8（我在 Mac 上，不确定这是否发生在 Windows 上）

```
iconv -f ISO-8859-1 -t UTF-8 "$file" > "${file%.java}.utf8.java"; 
```

让 Javac 编译器知道这一点：

```
export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8 
```

对于我所有的 java 文件：

```
find /path_to_mys_workspace/workspace -name \*.java -type f | \
    (while read file; do
        iconv -f ISO-8859-1 -t UTF-8 "$file" > "${file%.java}.utf8.java";
        rm "$file";
        mv "${file%.java}.utf8.java" "$file";
    done); 
```

（我还告诉 eclipse 在 UTF-8 中工作）

```
Preferences
  -> General
     -> Workspace
       -> DefaultFile encoding : UTF-8 
```

现在它起作用了！

（另外，我遇​​到了这个问题，因为代码中有一些硬编码的法语字符串......对我来说是-1。）

* * *

## 我最初的问题：

Proguard 很好，但配置起来并不容易……

我正在使用 Proguard 构建我的一组 Android 应用程序（一起协作的应用程序）的发布版本。

我快到了，但我面临一些与字符串相关的问题：

**1 - 字符串编码问题**

一些在调试模式下正确显示的外来字符（在代码中的字符串中）现在被替换为 UTF [REPLACEMENT CHARACTER](http://www.fileformat.info/info/unicode/char/fffd/index.htm)，在发布中（即，在 proguard 处理之后）。

例子：

```
The french 'à' is now displayed as � 
```

* *̶2̶ ̶-̶ ̶B̶r̶o̶k̶e̶n̶ ̶B̶r̶o̶a̶d̶c̶a̶s̶t̶ ̶a̶c̶t̶i̶o̶n̶s̶ **

**编辑：广播根本没有中断：我在一些 proguard 语句中忘记/犯了错误。**

̶I̶ ̶d̶e̶f̶i̶n̶e̶d̶ ̶s̶o̶m̶e̶ ̶p̶u̶b̶l̶i̶c̶ ̶s̶t̶a̶t̶i̶c̶ ̶f̶i̶n̶a̶l̶ ̶s̶t̶r̶i̶n̶g̶s̶ ̶i̶n̶ ̶m̶y̶

```
c̶o̶m̶.̶<̶m̶y̶_̶a̶p̶p̶_̶n̶a̶m̶e̶>̶.̶i̶n̶t̶e̶n̶t̶.̶C̶o̶n̶s̶t̶a̶n̶t̶s̶ 
```

̶c̶l̶a̶s̶s̶,̶ ̶s̶o̶ ̶I̶ ̶a̶d̶d̶e̶d̶

```
-̶k̶e̶e̶p̶ ̶p̶u̶b̶l̶i̶c̶ ̶c̶l̶a̶s̶s̶ ̶c̶o̶m̶.̶<̶m̶y̶_̶a̶p̶p̶_̶n̶a̶m̶e̶>̶.̶i̶n̶t̶e̶n̶t̶.̶*̶ 
```

̶i̶n̶̶m̶y̶̶P̶r̶o̶g̶u̶a̶r̶d̶̶c̶o̶n̶f̶i̶g̶̶f̶i̶l̶e̶.̶

̶I̶n̶ ̶r̶e̶l̶e̶a̶s̶e̶,̶ ̶*̶*̶m̶y̶ ̶b̶r̶o̶a̶d̶c̶a̶s̶t̶s̶ ̶d̶o̶ ̶n̶o̶t̶ ̶w̶o̶r̶k̶*̶*̶,̶ ̶s̶o̶ ̶t̶h̶e̶ ̶s̶t̶r̶i̶n̶g̶ ̶h̶a̶v̶e̶ ̶p̶r̶o̶b̶a̶b̶l̶y̶ ̶b̶e̶e̶n̶ ̶'̶b̶r̶o̶k̶e̶n̶'̶ ̶b̶y̶ ̶p̶r̶o̶g̶u̶a̶r̶d̶ ̶p̶r̶o̶c̶e̶s̶s̶i̶n̶g̶.̶ How can I fix those problems?

***重要的提示：***

我有一个库项目和许多使用库项目的应用程序项目。广播常量在库项目中定义并在应用项目中使用。**在保护所有应用程序的**同时“保护”这些字符串的正确方法是什么？

我应该玩 -injars in.jar -outjars out.jar -libraryjars 等吗？

**附加信息：**

发布构建在 Jenkins 工厂中完成。不确定这是有用的信息，但为了我的解释的完整性想提一下。

* * *

这是所有应用程序和库项目使用的我的 Proguard 配置文件。

```
##
## my rules
##

-dontwarn org.joda.time.**,org.apache.harmony.**,com.google.vending.licensing.**,javax.security.**,java.beans.**,java.awt.**

-keep public class com.<my_package>.intent.**
{
     *;
}

#-keep public class * extends android.app.BaseActivity
-keep public class * extends com.<my_package>.shared.fragment.BaseFragment

-keepclassmembers class * extends com.<my_package>.shared.activity.BaseActivity {
   public boolean *();
   public boolean *(android.view.View);
   public void *();
   public void *(android.view.View);
}

-keepclassmembers class * extends com.<my_package>.shared.fragment.BaseFragment {
   public boolean *();
   public boolean *(android.view.View);
   public void *();
   public void *(android.view.View);
}

##
## common rules
##

-keep public class com.bugsense.*

#-repackageclasses ''
#-allowaccessmodification
#-optimizations !code/simplification/arithmetic

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

##
## base proguard file content
##

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.** 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:09:33.670

ProGuard 根本不应该修改任何字符串。您应该确保在 Android SDK (android-sdk/tools/proguard/lib/proguard.jar) 中使用的是最新版本（此时为 4.8 或 4.9 beta）。您可以检查您使用的版本

```
java -jar android-sdk/tools/proguard/lib/proguard.jar 
```

在相关说明中，您的配置表明您使用的是较旧的 Android SDK，因为从 SDK r20 开始，现在分别指定了特定于项目和独立于项目的配置（分别在 proguard-project.txt 和 android-sdk/tools /proguard/proguard-android.txt)。简单地升级 SDK 可能已经有所帮助。

[如果问题仍然存在，您可以在ProGuard 网站](http://sourceforge.net/p/proguard/bugs/)上提交错误报告。

# php - php popen 只返回 bool(true) 而不是指针

> ID：15085405
> 
> 赞同：0
> 
> 时间：2013-02-26T09:25:07.047
> 
> 标签：php, popen

我想知道我的简单 popen() 调用只返回布尔值 TRUE 而不是资源。

因此，以下 fputs() 会引发类似*“警告：fputs() 期望参数 1 是资源，给定布尔值 [...]”的警告*

如 Php 手册中所述，我希望得到资源/指针或 FALSE 作为回报。

这是我的例子：

```
$path = 'C:\path\to\oracle\product\11.2.0\server\bin\sqlplus.exe';
$ph = popen($path,'w') || die ("Program not found");
fputs($ph, "username/password"\n"); 
```

有人可以帮忙吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:26:10.447

改变 ：

`$ph = popen($path,'w') || die ("Program not found");`至`$ph = popen($path,'w');`

之后删除所有内容`||`并尝试。

这里还有额外的报价：`fputs($ph, "username/password"\n");`删除一个`fputs($ph, "username/password\n");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T10:56:41.520

`||`仍然可以使用语法，只需在前半部分添加括号即可。

```
($ph = popen($path,'w')) || die ("Program not found"); 
```

# c# - 如何在 C# 中使用正则表达式替换

> ID：15085408
> 
> 赞同：0
> 
> 时间：2013-02-26T09:25:13.617
> 
> 标签：c#, asp.net, regex

我有一个字符串，如下所示

```
A123459922 
```

我想删除 A 并将带有正则表达式的 B 添加到它的末尾。我怎样才能使用正则表达式

```
Regex.Replace("A123459922","(\w{1})(\d*)"); 
```

我不知道如何删除第一个字符并将“B”添加到它的末尾？结束了这样的事情

```
123459922B 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:26:39.360

**我将使用与您的问题相同的正则表达式。**

你可以看看这个（对于更复杂的情况）

```
Regex.Replace("A123459922",@"(\w{1})(\d*)", m => m.Groups[2].Value + "B"); 
```

见`Replace`方法的第三个参数。它是 a `MatchEvaluator`，它接收 a`Match`并返回替换字符串。上述表达式等价于：

```
private static void Main()
{
    Regex.Replace("A123459922",@"(\w{1})(\d*)", Evaluator);
}

private static string Evaluator(Match m) {
    return m.Groups[2].Value + "B";
} 
```

**你基本上是在说**：我想替换`the entire match`为`the 2nd group + the B character`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:28:00.717

根据您给定的输入和输出字符串示例，您可以简单地使用[`Substring()`](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.110%29.aspx)：

```
var newString = myString.Substring(1) + "B"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:30:51.300

尝试使用这个正则表达式：

```
Regex.Replace("A123459922", @"\w(.*)", "$1B"); 
```

# python - 如何配置环境以使用 LLVM Clang 构建嵌入 python 的 c 代码

> ID：15085413
> 
> 赞同：0
> 
> 时间：2013-02-26T09:25:33.460
> 
> 标签：python, c, macos, clang, python-3.3

我正在尝试编译一个用 c 编写的程序，其中嵌入了 python。

我跑去`python3.3-config -cflags`获取我在这个命令中使用的 cflags。

```
% >> clang -v einformer.c -o einformer - I/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/include/python3.3m -I/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/include/python3.3m -Wno-unused-result -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/local/include -I/usr/local/opt/sqlite/include
Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix
"/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.8.0 -emit-obj -disable-free -disable-llvm-verifier -main-file-name einformer.c -pic-level 2 -mdisable-fp-elim -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 136 -v -g -resource-dir /usr/bin/../lib/clang/4.2 -D NDEBUG -I /usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/include/python3.3m -I /usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/include/python3.3m -I /usr/local/include -I /usr/local/opt/sqlite/include -fmodule-cache-path /var/folders/lz/5nhsdlnn3x9g8ry_mkgtgh500000gp/T/clang-module-cache -c-isystem /usr/include/python2.6 -c-isystem . -O3 -Wno-unused-result -Wall -Wstrict-prototypes -fdebug-compilation-dir /Users/ardentapprentice/dev/osx/test -ferror-limit 19 -fmessage-length 140 -fwrapv -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime=macosx-10.8.0 -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fno-common -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/lz/5nhsdlnn3x9g8ry_mkgtgh500000gp/T/einformer-T6nymD.o -x c einformer.c
clang -cc1 version 4.2 based upon LLVM 3.2svn default target x86_64-apple-darwin12.2.0
ignoring duplicate directory "/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/include/python3.3m"
ignoring duplicate directory "/usr/local/include"
  as it is a non-system directory that duplicates a system directory
#include "..." search starts here:
#include <...> search starts here:
 /usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/include/python3.3m
 /usr/local/opt/sqlite/include
 /usr/include/python2.6
 .
 /usr/local/include
 /usr/bin/../lib/clang/4.2/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
einformer.c:92:25: warning: implicit declaration of function 'PyString_AsString' is invalid in C99 [-Wimplicit-function-declaration]
    path_array[i] = PyString_AsString(pypath);
                    ^
1 warning generated.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -dynamic -macosx_version_min 10.8.0 -o einformer /var/folders/lz/5nhsdlnn3x9g8ry_mkgtgh500000gp/T/einformer-T6nymD.o -lSystem /usr/bin/../lib/clang/4.2/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
  "_PyList_GetItem", referenced from:
      _main in einformer-T6nymD.o
  "_PyList_Size", referenced from:
      _main in einformer-T6nymD.o
  "_PyRun_SimpleStringFlags", referenced from:
      _main in einformer-T6nymD.o
  "_PyString_AsString", referenced from:
      _main in einformer-T6nymD.o
  "_Py_Finalize", referenced from:
      _main in einformer-T6nymD.o
  "_Py_Initialize", referenced from:
      _main in einformer-T6nymD.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

似乎clang可能无法找到标题？`<Python.h>`包含在源代码中我不确定我做错了什么：/

我花了大约 3 个小时浏览 python 文档[http://docs.python.org/3.3/c-api/index.html](http://docs.python.org/3.3/c-api/index.html)并四处搜索，但我似乎找不到任何对我有帮助的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:10:34.643

`python3.3-config --cflags`仅给出查找标头所需的参数。`python3.3-config --ldflags`会给你链接器标志。这意味着您应该能够使用编译器调用来编译您的程序，例如：

```
clang -v einformer.c -o einformer $(python3.3-config --cflags) $(python3.3-config --ldflags) 
```

# android - 启动新活动时如何清除android中的TextView？

> ID：15085417
> 
> 赞同：0
> 
> 时间：2013-02-26T09:25:48.547
> 
> 标签：android, textview

如果我有一些`TextView`以编程方式创建如下：

```
textChallenge = new TextView(context);
    textChallenge.setTypeface(fontJoan);
    textChallenge.setTextColor(Color.WHITE);
    textChallenge.setText("99");
    textChallenge.measure((int)Define.getScreenWidth(), (int)Define.getScreenHeight());
    textChallenge.layout(0, 0, 200, 200);
    textChallenge.setTextSize(TypedValue.COMPLEX_UNIT_PX, 20);
    textChallenge.setDrawingCacheEnabled(true);
    textChallenge.buildDrawingCache(); 
```

`TextView`问题是，当我开始新的时候，我必须清除这个`Activity`吗？

因为我发现如果我`TextView`大量创建它，可能会导致一些

我记忆中的问题。

这就是我的使用方式`TextView`：

```
protected void onDraw(Canvas canvas){
canvas.drawBitmap(textUser.getDrawingCache(), posX, posY, null);
invalidate()
} 
```

我发现当我创建很多`TextView`并使用检查分配时

`(Debug.getNativeHeapAllocatedSize() / 1048576L)`, 它增加了一点。

我怎么能假设`TextView`完全删除分配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:26:36.450

用它来清除文本视图

this.textview.setText("")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:27:00.603

你可以把

```
textChallenge = null; 
```

如果你想销毁它的对象。但我认为，除非动态对象太多，否则没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:27:13.910

只需编写以下代码：-

```
textChallenge.setText(""); 
```

# java - PMD Eclipse 插件

> ID：15085418
> 
> 赞同：0
> 
> 时间：2013-02-26T09:25:48.423
> 
> 标签：java, eclipse

我已经在 debian 中成功安装了 eclipse 3.8 的 PMD。但是，我按照这些（[http://www.eclipsezone.com/articles/pmd/](http://www.eclipsezone.com/articles/pmd/)）说明来测试一个简单的检查，我没有得到违规、警告、错误等......尽管插件通过属性启用-> PMD。我在配置中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:05:21.273

这里的正常问题是您的问题视图没有以正确的方式检测。执行以下步骤来纠正它：

1.  调用下拉菜单![在此处输入图像描述](../Images/e6239d080544a68f90f5e6bc91d0e011.png)并选择“配置内容...”
2.  确保显示所有项目，或者您的选择包括 PMD 错误![在此处输入图像描述](../Images/270c51a93fec349fa9ad50fdc5b23443.png)
3.  如果 PMD 信息、警告和错误现在可见，请接受您的配置更改和控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:26:41.407

与 FindBug 或 CheckStyle 不同，PMD Eclipse 插件默认不配置要检查哪些规则。您必须通过转到 Eclipse Preferences -> PMD -> Rule Configuration 手动检查要使用的规则

![PMD 规则配置](../Images/2217a3250e418e021b17af51eb84d249.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:02:41.897

我还按照提供的说明安装了 PMD

> [http://www.eclipsezone.com/articles/pmd/](http://www.eclipsezone.com/articles/pmd/)

它对我来说工作正常，我能够生成 PMD 报告，找到违规结果。

你得到的确切错误是什么。

注意：我已经下载了 PMD eclipse 3 插件

# c# - 如何在 C# 中使用 LINQ 根据值（DateTime）删除一半的字典项？

> ID：15085419
> 
> 赞同：2
> 
> 时间：2013-02-26T09:25:51.683
> 
> 标签：c#, linq

我有一本字典：

```
private Dictionary<long, TimeStampedFetchedPlans> remainingPlansById = null; 
```

在哪里

```
public class TimeStampedFetchedPlans
{
    public DateTime TimeStamp { get; set; }
    public List<TFetchedPlanReturn> RemainingPlans { get; set; }

    public TimeStampedFetchedPlans(DateTime timeStamp, List<TFetchedPlanReturn> remainingPlans)
    {
        TimeStamp = timeStamp;
        RemainingPlans = remainingPlans;
    }
} 
```

现在我想使用 LINQ 删除 Dictionary 中最旧的一半值。这可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:29:23.720

您可以通过创建一个新实例来纯粹使用 LINQ：

```
remainingPlansById = remainingPlansById.OrderByDescending(x => x.Value.TimeStamp)
                                       .Take(remainingPlansById.Count / 2)
                                       .ToDictionary(x => x.Key, x => x.Value); 
```

但是，使用循环不需要创建新字典：

```
var itemsToRemove = remainingPlansById.OrderBy(x => x.Value.TimeStamp)
                                      .Take(remainingPlansById.Count / 2)
                                      .ToList();

foreach(var itemToRemove in itemsToRemove)
    remainingPlansById.Remove(itemToRemove.Key); 
```

请注意，对于奇数数量的项目，这两个版本的行为不同。对于字典中的 41 个项目，第一个版本将*保留*20 并删除*21*，而第二个版本将*删除*20 并*保留*21。每个版本都可以轻松更改为另一个，您只需要确定您真正想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:30:34.560

为什么不在字典上使用Linq 方法“OrderBy”，然后结合使用Linq 方法“take”方法和count 方法，只读取字典的一半？

# unix - 从另一台服务器获取文件nme

> ID：15085425
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:26:06.023
> 
> 标签：unix

我的目录很少

```
ut1-2013.02.26-23.45.31
ut1-2013.02.20-06.09.28
ut1-2013.02.18-23.33.23 
```

在文件夹中的`test1`服务器中`release`，我想将输出作为最新目录，即`ut1-2013.02.26-23.45.31`从这些目录中输出到`test2`服务器。

我应该在 test2 服务器的命令行中使用什么命令（命令管道）来 ssh 到 test1 服务器并获取最新目录作为命令的输出？

目录名称是否`ut1-2013.02.26-23.45.31`满足所有命名约定？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:27:19.640

```
ls -r release 
```

将以相反的顺序列出所有名称，您可以使用

```
ls -r release | head -1 
```

如果您只想要“最新”的。

```
ls release | tail -1 
```

也有效。（`-1`是的缩写`-n 1`。）

# ember.js - 多个设置为 true 的 Ember.Select valueBinding 不起作用

> ID：15085428
> 
> 赞同：1
> 
> 时间：2013-02-26T09:26:08.543
> 
> 标签：ember.js

我从[Ember 文档](http://emberjs.com/api/classes/Ember.Select.html)中获得了这个演示。它是一个分配了值的选择框。

```
App.programmers = [
  Ember.Object.create({firstName: "Yehuda", id: 1}),
  Ember.Object.create({firstName: "Tom",    id: 2})
];

App.currentProgrammer = Ember.Object.create({
  id: 2
}); 
```

看法：

```
{{view Ember.Select
   contentBinding="App.programmers"
   optionValuePath="content.id"
   optionLabelPath="content.firstName"
   valueBinding="App.currentProgrammer.id"}} 
```

这种情况下有效，并且选择了“Tom”项目。

当我将属性添加`multiple="true"`到 Ember.Select 时，“Tom”项仍处于选中状态。但我希望已经选择了多个项目，所以我改为`App.currentProgrammer`：

```
App.currentProgrammer = [
  Ember.Object.create({id: 1}),
  Ember.Object.create({id: 2})
]; 
```

但是现在什么都没有选择了。我应该更改`valueBinding`- 属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T09:31:43.913

您可以使用 selectionBinding 代替：[小提琴](http://jsfiddle.net/zikolach/Zu2Jp/)

HTML：

```
<script type="text/x-handlebars">
{{view Ember.Select
    multiple="true"
    contentBinding="App.content"
    optionValuePath="content.type"
    optionLabelPath="content.label"
    prompt="Select a value"        
    selectionBinding="App.types"        
}}
{{#each App.types}}
    {{type}}
{{/each}}
</script> 
```

JS：

```
App = Ember.Application.create({});

App.content = [
    {label: "This is type 1", type: "type1"},
    {label: "This is type 2", type: "type2"}
];

App.types = [
    App.content[0], App.content[1]
]; 
```

我同意 valueBinding 仍然不起作用。

# javascript - 使用 ajax 和 javascript 找出命中数

> ID：15085435
> 
> 赞同：0
> 
> 时间：2013-02-26T09:26:24.640
> 
> 标签：javascript, ajax, hit

我们有一个页面可以选择添加网站。应用程序应该创建一个 JavaScript 代码，我们可以将其包含在网站中，当用户访问父网站时，该代码会导致对应用程序中添加的其他网站的点击。

例如，作为第一步，您可以创建代码，例如添加 Ajax 调用（如果网站是[https://www.google.co.in/](https://www.google.co.in/)）

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
  $(document).ready(function () {
    $.post('https://www.google.co.in/', function(data) {

    });
  });
</script> 
```

如果用户添加下一个站点 2，则应该对两个站点进行 Ajax 调用。当用户添加站点时，在用户可以复制的区域中显示代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:27:42.077

要使用 JavaScript 绕过 Access-Control-Allow-Origin，您可以在页面上插入一个 iframe，源是添加到页面的新网站的 URL，包括任何参数。插入 iframe 后，将对目标站点发出请求。请注意，这些将是 GET 而不是 POST 请求。

# ios - 应用程序在 iPhone 中崩溃

> ID：15085437
> 
> 赞同：0
> 
> 时间：2013-02-26T09:26:28.660
> 
> 标签：ios, uitableview

在 UITableView 中实现 pull to refresh 后，我尝试了 4 到 5 次我的应用程序崩溃......

setImage 上的 EXC_BAD_ACCESS。

```
cell.thumbnail.image = [UIImage imageNamed:@"noimage.png"];

dispatch_async(concurrentQueue, ^{

    NSString *imageURL = [currentArticle objectForKey:@"Image"];
    NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:imageURL]];
    UIImage *image = [[UIImage alloc] initWithData:imageData];

    dispatch_async(dispatch_get_main_queue(), ^{

    [cell.thumbnail setImage:image];

    });
}); 
```

# javascript - 高图中所选列的不同边框

> ID：15085440
> 
> 赞同：5
> 
> 时间：2013-02-26T09:26:38.307
> 
> 标签：javascript, highcharts

我在我的应用程序中使用了 highchart 的柱形图。

我有柱形图。当用户在图表中选择一列时，所选列应显示为不同的边框颜色和不同的宽度。

这是代码片段

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        xAxis: {
            categories: [
                'Jan', 'Feb', 'Mar', 
                'Apr', 'May', 'Jun', 
                'Jul', 'Aug', 'Sep', 
                'Oct', 'Nov', 'Dec'
            ]
        },
        plotOptions: {
            series: {
                allowPointSelect: true,
                marker: {
                    states: {
                        select: { lineWidth: 10 }
                    }
                }
            }
        },
        series: [{
            data: [
                29.9,  71.5,  106.4, 
                129.2, 144.0, 176.0, 
                135.6, 148.5, 216.4, 
                194.1, 95.6,  54.4
            ]        
        }]
    });
}); 
```

[代码片段](http://jsfiddle.net/DFLGx/)

当我选择该列时，颜色变为灰色。我希望它们保持不变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T10:48:02.237

你的意思是这样的：

```
plotOptions: {
        series: {
            allowPointSelect: true,
            states: {
                select: {
                    color: null,
                    borderWidth:5,
                    borderColor:'Blue'
                }
            }
        }
    }, 
```

[演示](http://jsfiddle.net/8truG/12/)

# sencha-touch - 使用 Sencha Touch 调用 REST API 的最佳方式

> ID：15085442
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:26:40.163
> 
> 标签：sencha-touch

我需要使用 Ajax 在服务器上调用各种 API 方法。有些方法返回服务器对象集，有些方法更新对象，有些方法不直接处理对象但更新对象的某些属性（如计数、签入等）

商店在数据绑定方面解决了很多问题，但我找不到面向对象的方法来创建与服务器端 api 方法一起使用的客户端存储库。我应该创建一个新类并用对服务器进行 Ajax 调用的方法填充它，还是应该扩展存储以包含新的 Ajax 方法？

我希望我很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:35:20.347

如果你想创建一个单独的类并使用函数，那很好。但通常人们也使用 Sencha 控制器。我希望你有一个控制器。为什么不将方法放在相应的控制器中？

# android - 在 Android 4.2 中从 JNI 跟踪 wifi 请求者实现时出现错误

> ID：15085444
> 
> 赞同：1
> 
> 时间：2013-02-26T09:26:52.557
> 
> 标签：android, java-native-interface, android-wifi, android-source

我正在通过 Android 4.2 Sources 进行调试以找出 WiFi Direct 中的问题。在浏览android_net_wifi_Wifi.cpp中的原生实现WifiNative.java时，我发现在android_net_wifi_Wifi.cpp中已经实现了一级原生功能。但无法理解流程将如何下降到驱动程序级别。例如，

```
static jboolean android_net_wifi_startSupplicant(JNIEnv* env, jobject, jboolean p2pSupported)
{
    return (jboolean)(::wifi_start_supplicant(p2pSupported) == 0);
} 
```

wifi_start_supplicant(p2pSupported) 方法在哪里实现？这里 :: 符号是什么意思，即这个方法是哪个类的成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:41:33.393

wifi_start_supplicant() 在 libhardware_legacy 中实现，通常位于 /hardware/libhardware_legacy\

# vba - VBA：无法将 ppAutoSizeMixed 分配给 TextBox.TextFrame.AutoSize

> ID：15085451
> 
> 赞同：0
> 
> 时间：2013-02-26T09:27:13.160
> 
> 标签：vba, textbox, powerpoint

我正在 PowerPoint2010 中编写一个 VBA 应用程序，它添加不​​同的形状并自动命名它们。

现在我正在尝试更改具有三个可能值的 Textbox.TextFrame.AutoSize 属性：-2、0 和 1。

如果我尝试将 ppAutoSizeMixed 与 VBA 一起分配，则会出现“超出范围”异常。0 和 1 我可以毫无困难地分配。

```
Debug.Print ActiveWindow.Selection.SlideRange.Shapes(1).TextFrame.AutoSize //-2
ActiveWindow.Selection.SlideRange.Shapes(1).TextFrame.AutoSize = ppAutoSizeNone //0
ActiveWindow.Selection.SlideRange.Shapes(1).TextFrame.AutoSize 
= ppAutoSizeMixed//-2: exception 
```

我可以使用 PowerPoint 更改值，但不能使用 VBA。有人知道这个问题并知道如何解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:31:55.963

OK, here you go: Assuming a reference to your shape in oSh:

```
With oSh
   .TextFrame2.AutoSize = 2
End With 
```

# c# - 电子邮件 ID 验证不接受 @ 符号前的下划线

> ID：15085452
> 
> 赞同：1
> 
> 时间：2013-02-26T09:27:13.340
> 
> 标签：c#, regex, email-validation

我有以下用于电子邮件 ID 验证的代码。我正在使用正则表达式来做到这一点。但是，以下电子邮件 ID 无效。

```
test_@gmail.com 
```

正则表达式中应更改的内容，以便通过电子邮件 ID ( `test_@gmail.com`)

```
 public static bool IsValidEmail(string strIn)
        {
            invalid = false;
            if (String.IsNullOrEmpty(strIn))
                return false;

            // Use IdnMapping class to convert Unicode domain names. 
            try
            {

                strIn = Regex.Replace(strIn, @"(@)(.+)$", DomainMapper);

            }
            catch (Exception e)
            {
                Utility.writeToLogFile(String.Format("Error while validating the Email Address {0}. Error Code.e", strIn.ToString(), e));
                return false;
            }

            if (invalid)
                return false;

            // Return true if strIn is in valid e-mail format. 
            try
            {
                return Regex.IsMatch(strIn,
                      @"^(?("")(""[^""]+?""@)|(([0-9a-z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-z])@))" +
                      @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-z][-\w]*[0-9a-z]*\.)+[a-z0-9]{2,17}))$",
                      RegexOptions.IgnoreCase);

            }
            catch (Exception e)
            {
                Utility.writeToLogFile(String.Format("Error while validating the Email Address {0}. Error Code.e", strIn.ToString(), e));
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:43:06.333

你的正则表达式失败了

> test_@gmail.com

因为该部分`(?<=[0-9a-z])@`明确要求在“@”之前有一个字母或数字。

对于一个解决方案，我也建议[这个答案](https://stackoverflow.com/a/5342460/626273)，就像 Eduard Dumitru 在他的评论中一样。

# android - 将背景图像添加到使用 setlistadapter 创建的没有布局的列表活动

> ID：15085458
> 
> 赞同：0
> 
> 时间：2013-02-26T09:27:25.143
> 
> 标签：android, android-layout

我需要添加背景并更改活动的颜色没有创建布局...在 oncreate 方法中使用 setListAdapter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:30:09.820

使用薄`onCreate()`

`getWindow().setBackgroundDrawableResource(R.drawable.background)`

# php - 同时选择+文本输入表单域？

> ID：15085462
> 
> 赞同：0
> 
> 时间：2013-02-26T09:27:43.723
> 
> 标签：php, javascript, jquery, html

如何使我的选择同时成为一个输入表单？

我希望它有例如 0.01 到 10.00 的选项，并确保它有 2 个小数

我怎样才能让它在jquery中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:32:45.540

听起来您需要一个带有一些验证的组合框。看看：http: [//jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:48:27.243

我可以为您提供代码，该代码将选择一个选项并自动生成文本框的输入类型并插入所选值以供表单使用。这是经过测试的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>test select</title>
   <script src="http://code.jquery.com/jquery-1.9.1.js"></script> 

    <script>
        $(document).ready(function () {
            $('#pickValue').change(function () {
                var x =$(this).find('option:selected').text();
                if($('#myval').length == 0)
                    $('#showData').append('<input type="text" name="myval" id="myval" value="'+x+'" >');
                else
                    $('#myval').replaceWith('<input type="text" name="myval" id="myval" value="'+x+'" >');
            });
        });

    </script>
</head>
<body>
    <form action='xyz.php' method='get'>
        <div id='showData'>
            <select id='pickValue'>
                <option>Pick value</option>
                <option value='0.1'>0.1</option>
                <option value='0.2'>0.2</option>
                <option value='0.3'>0.3</option>
            </select>
        </div>
    </form>

</body>
</html> 
```

我附上了完整的代码，您可以随意使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:34:27.040

您可能需要微调器而不是选择框：http: [//jqueryui.com/spinner/#decimal](http://jqueryui.com/spinner/#decimal)

# asp.net - Application_Error - GetLastError() 或 GetLastError().GetBaseException()

> ID：15085465
> 
> 赞同：7
> 
> 时间：2013-02-26T09:27:55.123
> 
> 标签：asp.net, error-handling

在处理 中的错误时`Application_Error`，我应该使用这两个中的哪一个？

我为两者找到了多个示例，但尚不清楚一个是否比另一个更好。是否存在只有一个会显示正确错误的情况？

另外，我怀疑这很重要，但应用程序使用的是 MVC 4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:41:50.120

这取决于你到底需要什么。

从[Exception.GetBaseException](http://msdn.microsoft.com/en-us/library/system.exception.getbaseexception.aspx)的文档中：

> 在派生类中重写时，返回作为一个或多个后续异常的根本原因的异常。

`Application_Error`在上层处理异常，可能经过几个异常处理机制，所以如果抛出异常是这样的：

```
try {
   //Lots of code, method calls, etc...
   try {
       throw new FooException("Foo");
   } catch(FooException fe) {
       throw new BarException("Bar", fe);
   }
}catch(BarException be) {
    throw new FooBarException("FooBar", be);
} 
```

然后`GetLastError`会得到你`FooBarException`，同时`GetLastError().GetBaseException()`会得到你`FooException`。所以前者返回实际未处理的异常，而后者返回根本原因。

我假设 Foo、Bar 和 FooBar 异常类不会覆盖`GetLastError`或`InnerException`

# jquery - 在哪里为 jquery 滑块句柄设置自定义图像

> ID：15085468
> 
> 赞同：0
> 
> 时间：2013-02-26T09:28:02.317
> 
> 标签：jquery, jquery-ui-slider

我正在尝试动态更改 jQuery 滑块的句柄图像。

每个客户都有自己的句柄图像，该图像保存在我网站的相应客户端文件夹中。我想根据正在访问应用程序的客户端更改滑块的句柄。

为此，我在页面的 java 脚本插件中编写了代码来更改类属性。

```
 $('.ui-slider-horizontal, .ui-slider-handle').css("background", "url(http://dev.mywebsite.com/Images/clients/SomeClientName/icon-slider.png)  no-repeat scroll 50% 50% !important;"); 
```

但是，这似乎不起作用。代码执行，但滑块显示它自己的图像。

如果我浏览上面的路径，那么我可以在浏览器中看到图像。

如果我在我的主 css 文件中编写相同的背景属性，那么它可以正常工作。但我想在运行时实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:27:45.303

我最终能够通过设置链接标签的背景属性来实现它，该属性是由滑块在 div 内动态生成的。这是我调用 jquery.slider 方法来生成滑块控件的 div。

# wordpress - WordPress调试

> ID：15085482
> 
> 赞同：22
> 
> 时间：2013-02-26T09:29:02.970
> 
> 标签：wordpress, logging

如何从我的 WordPress 插件编写调试消息？

*[WordPress 中的调试](https://wordpress.org/support/article/debugging-in-wordpress/)*描述了如何启用该`wp-content/debug.log`文件。但是我该怎么写呢？有什么记录方法之类`wp_log($msg)`的吗？我没有找到这样的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-26T09:35:35.427

如果`WP_DEBUG_LOG`设置为 true，则[`error_log`设置 -INI 设置](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-log)：

```
ini_set( 'error_log', WP_CONTENT_DIR . '/debug.log' ); 
```

要写入该文件，您可以使用[`error_log`-function](http://php.net/manual/en/function.error-log.php)：

```
error_log("This message is written to the log file"); 
```

这个函数不是 WordPress 特有的，可以在任何 PHP 脚本中使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-13T21:15:42.750

这是您可以使用的一个简单功能；如果启用了[WP_DEBUG](http://codex.wordpress.org/WP_DEBUG)，它只会记录一条消息：

```
function log_me($message) {
    if ( WP_DEBUG === true ) {
        if ( is_array($message) || is_object($message) ) {
            error_log( print_r($message, true) );
        } else {
            error_log( $message );
        }
    }
} 
```

您可以`log_me()`在主题模板中调用这样的函数：

```
log_me( 'This is a message for debugging purposes' ); 
```

这将出现在您`/wp-content/debug.log`的以下行中：

```
[13-Apr-2013 20:59:17 UTC] This is a message for debugging purposes 
```

# sql-server - Sql Server 数据库连接字符串中的初始目录是什么意思？

> ID：15085486
> 
> 赞同：8
> 
> 时间：2013-02-26T09:29:18.697
> 
> 标签：sql-server, entity-framework

我有以下连接字符串：

```
 connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-WebUx-20121229234926;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-WebUx-20121229234926.mdf" 
  providerName="System.Data.SqlClient" /> 
```

我正在使用实体框架，现在我想使用 Code Fist 创建一个新数据库。有人可以解释一下是什么意思：

```
aspnet-WebUx-20121229234926 
```

我可以在这里创建任何名称，只要它与保存数据的文件的名称相同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T09:30:46.400

`Initial Catalog`是连接字符串要使用的数据库的名称，它位于`Data Source`连接字符串部分中指定的服务器上。

如果服务器上有多个您有权使用的数据库，`Data Source`那么您**必须**指定`Initial Catalog`以帮助它区分您想要的数据库。

但是，如果在 中指定的服务器上只有一个数据库`Data Source`，则无需指定`Initial Catalog`.

就个人而言，我会说始终指定两者，因为如果不使用`Initial Catalog`.

# wix - 如何将参数传递给 WiX 的 Bundle.wxs 中的 ExecPackage

> ID：15085489
> 
> 赞同：3
> 
> 时间：2013-02-26T09:29:29.317
> 
> 标签：wix, wix3.6, wix-extension

我将 Bundle.wxs 中的批处理文件链接为“ExecPackage”。批处理文件需要一个参数/命令行参数。

```
<ExePackage Id="Test" SourceFile="D:\TestBatch.bat" Vital="yes" InstallCondition="SelectedDBSize = 24" InstallCommand=""/> 
```

如何在“ExecPackage”中传递命令行参数/参数。可以为此使用 InstallCommand 属性吗？如果是这样，有人可以给我一个小例子来说明同样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:17:02.950

This is currently what I use to install SqlExpress 2008 R2 as part of my bundle:

```
<ExePackage Id="SqlExpress2008R2"
            Cache="no"
            Compressed="no"
            PerMachine="yes"
            Permanent="no"
            Vital="yes"
            InstallCommand="/QS /ACTION=Install /IACCEPTSQLSERVERLICENSETERMS /BROWSERSVCSTARTUPTYPE=Automatic /SQLSVCSTARTUPTYPE=Automatic /FEATURES=SQL /INSTANCENAME=[SqlInstance] /SQLSVCACCOUNT=&quot;NT AUTHORITY\Network Service&quot; /SQLSYSADMINACCOUNTS=&quot;BUILTIN\ADMINISTRATORS&quot; /AGTSVCACCOUNT=&quot;NT AUTHORITY\Network Service&quot; /SECURITYMODE=SQL /SAPWD=&quot;[SqlAdminUserPassword]&quot;"
            Name="redist\SQLEXPR_x86_ENU.exe"
            DownloadUrl="http://download.microsoft.com/download/D/1/8/D1869DEC-2638-4854-81B7-0F37455F35EA/SQLEXPR_x86_ENU.exe"
            InstallCondition="NOT SQLServer2008R2Installed AND NOT SQLServerInstalled">
    <RemotePayload ProductName="SQL Server 2008 R2 Express SP1"
                   Description="SQL Server 2008 R2 Express SP1" 
                   CertificatePublicKey="5C499B10F7EF186DC729991A262AB52066423909" 
                   CertificateThumbprint="93859EBF98AFDEB488CCFA263899640E81BC49F1" 
                   Hash="6F399D641F322A3E47E3DD605F2A2EDF21074375"  
                   Size="111274848" 
                   Version="10.50.2500.0" />
  </ExePackage> 
```

The parts in the `InstallCommand` attribute surrounded with square-brackets (e.g. `[SqlInstance]`) are supplied by the bundle variables that can be supplied to the bundle exe on the command-line:

```
<Variable Name="SqlInstance"
          Value="SQLEXPRESS"
          bal:Overridable="yes" /> 
```

Note the important attribute `bal:Overridable="yes"` this means that it can be set via the bundles command-line, without it it will just be an internal variable (set by registry search for example).

# regex - 正则表达式来计算一些字符

> ID：15085493
> 
> 赞同：-2
> 
> 时间：2013-02-26T09:29:46.957
> 
> 标签：regex, bash, awk

我有像这样构建的文件

```
yyyy-mm-dd hh-mm-ss * -start *
yyyy-mm-dd hh-mm-ss * -end * 
```

谁能帮我建立正则表达式来计算最常见的“-mm-ss”并将它们排序打印？* 我的意思是任何字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:50:44.370

```
awk '{split($2,a,"-");b[a[2]"-"a[3]]++}END{for(i in b)print i,b[i]}' your_file 
```

测试：

```
> cat temp
yyyy-mm-dd hh-11-55 * -start *
yyyy-mm-dd hh-11-55 * -start *
yyyy-mm-dd hh-12-22 * -end *  
> nawk '{split($2,a,"-");b[a[2]"-"a[3]]++}END{for(i in b)print i,b[i]}' temp
12-22 1
11-55 2
> 
```

下面是先打印所有 hh-mm 然后打印所有 mm-ss 的命令：

```
awk '{split($2,a,"-");b[a[2]"-"a[3]]++;c[a[1]"-"a[2]]++}END{for(i in c)print i,c[i];for(i in b)print i,b[i]}' your_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:59:25.580

```
$ cat tmp
yyyy-mm-dd hh-11-55 * -start *
yyyy-mm-dd hh-11-55 * -start *
yyyy-mm-dd hh-12-22 * -end *  

$ cut -c 15-19 tmp | sort | uniq -c
      2 11-55
      1 12-22 
```

# android - 无法在android中解决线程、处理程序和发送短信

> ID：15085497
> 
> 赞同：0
> 
> 时间：2013-02-26T09:29:57.517
> 
> 标签：android, multithreading, sms, handler

我正在运行一个线程，它在 textView.EG:30,29,28,27... 中显示 30 秒...等到 0 秒。所以当它达到 0 秒时，一条消息将发送到带有定义消息的定义数字.

我的问题是，即使我在两者之间停止线程并且它显示它已经停止；仍然是方法**sendTextMessageAlert();** 以某种方式调用并发送短信。在我的编码中执行以下操作：

```
 uiPost = new Handler();
        running = true;
        timerThread=new Thread(new Runnable() {
            int i;
            @Override
            public void run() {
                // TODO Auto-generated method stub
                for( i=30;i>=0;i--)
                {
                    if(running)
                    {
                          uiPost.post(new Runnable() {

                            @Override
                            public void run() {
                                // TODO Auto-generated method stub
                                setTimerText(i);
                            }
                        });
                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                    }else
                    {
                        timerThread.stop();

                        end();
                        //Intent iii=new Intent(Alert.this,FearAlert.class);
                        //startActivity(iii);
                    }
                }

            }//run end
        });
        timerThread.start();

        b1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                //timerThread.stop();
                running=false;
                 // endAlert();
                  Toast.makeText(getApplicationContext(), "By Button,Monitoring Stopped", 0).show();

            }
        });
}   
public void end(){
    vibrator.cancel();
    this.locationManager.removeUpdates(this);
    if(wakeLock.isHeld())
        wakeLock.release();

    finish();
}
     private void setTimerText(int i)
  {

     ((TextView)findViewById(R.id.TextView03)).setText(String.valueOf(i) + "s");

        if(i==0)
        {
            running=false;
            sendTextMessageAlert();
            vibrator.cancel();
            this.locationManager.removeUpdates(this);
            if(wakeLock.isHeld())
                wakeLock.release();
            finish();

        }

  }

private void sendTextMessageAlert() {
    // TODO Auto-generated method stub
    SendSMS task=new SendSMS(); 
    task.startSMS();
}

class SendSMS 
{
    SharedPreferences myPrefs = getSharedPreferences("FearAlert", 1);
    String contactNumber1 = myPrefs.getString("contactNumber1", number);

public void startSMS() {
    // TODO Auto-generated method stub

    SmsManager.getDefault().sendTextMessage(contactNumber1,
             null, 
        getSharedPreferences("FearAlert", 1).getString("message",getString( R.string.default_emergency_message)+sss), 
        null, null);        
} 
```

M 使用**布尔运行**来检查和停止线程。请帮助我，为什么当我按下**按钮 B1时仍然****调用 sendTextMessageAlert**？任何解决方案..提前谢谢...

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:41:26.290

而不是 Thread 用于`CountDownTimer`执行此任务，因为不推荐使用`stop()`方法，`Thread`并且您不应该停止线程。

```
android.os.CountDownTimer.CountDownTimer(long millisInFuture, long countDownInterval) 
```

`CountDownTimer`也有`cancel()`取消定时器的方法

它也有类似的方法`public void onTick(long millisUntilFinished)`，`public void onFinish()`这将有助于您执行任何您想要的任务**

# c++ - 如何允许最终用户使用正则表达式创建验证规则？

> ID：15085502
> 
> 赞同：1
> 
> 时间：2013-02-26T09:30:02.593
> 
> 标签：c++, regex, c++11

在我的应用程序中，我允许用户使用租船者创建一些验证规则`'*'`，`'?'`其中`'*'`意味着许多租船者并且`'?'`意味着一个字符，例如用户可以写`"*Ma?s*"`所以它应该匹配这样的东西`"ajdg adbf MaKs sjklfd"`对不起这个例子但我什么都没有想到，也许用户输入更复杂的规则。

我通过将规则和匹配字符串发送到 SQL Server 数据库来解决问题，并将每个替换`'*'`为`'%'`和每个`'?'`替换`'_'`并使用类似条件并且效果很好，但是用户可以输入很多验证规则和很多匹配项，所以有是很多数据库操作，所以我想我晚上使用新的 c++ 11 正则表达式在客户端执行此操作，我搜索了很多并阅读了很多文章但没有答案。

那么这可以在正则表达式中完成吗？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:38:44.773

如果要创建正则表达式，只需将规范转换为正则表达式。为此，只需替换：

*   `*`by `.*`（或`.+`，取决于您是否需要至少一个字符）
*   `?`经过`.`

**笔记：**

`.`匹配*任何字符*。如果您只查找字母，则可以使用 replace `.`by `[a-zA-Z]`。对于数字，`\d`. 对于字母和数字`[a-zA-Z0-9]`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:41:19.240

`*`您可以通过替换为`.*`和`?`来做到这一点`.`。但是请注意，`<regex>`我遇到的大多数 C++ 实现都没有真正的功能，所以暂时你需要依赖[`Boost.regex`](http://boost.org/libs/regex).

顺便说一句，请注意，您需要先清理用户输入。否则，恶意用户可能会对您的系统做非常糟糕的事情。

# jquery - bootstrap-datepicker 没有被 requirejs 填充

> ID：15085504
> 
> 赞同：5
> 
> 时间：2013-02-26T09:30:06.200
> 
> 标签：jquery, backbone.js, twitter-bootstrap, requirejs

我正在使用backbone.js + require.js 构建一个应用程序。我想在我的应用程序中使用 datepicker：[datepicker](http://www.eyecon.ro/bootstrap-datepicker/)

由于它不是 AMD，我在 requirejs 中填充它，如下所示：

```
require.config({
baseUrl: "appjs",

paths:{
    jquery: '../layout_assets/assets/js/libs/jquery-1.8.2.min',
    dt: '../layout_assets/plugins/datatables/jquery.dataTables.min',
    dtPlugins:'../layout_assets/plugins/datatables/dtplugins',
    dtBootstrap: '../layout_assets/plugins/datatables/dataTables.bootstrap',
    underscore: '../assets/js/underscore-min',
    Backbone: '../assets/js/backbone-min',
    bootstrap: '../assets/js/bootstrap.min',
    datepicker:'../layout_assets/bootstrap-datepicker'
    },

    shim: {
        underscore:{
            exports:"_"
        },

        Backbone:{
            deps: ['underscore','jquery'],
            exports: "Backbone"
        },

        dt: {
        deps:['jquery'],
        exports: "dt"   
        },

        dtPlugins: {
            deps:['jquery','dt'],
            exports:"dtPlugins"
            },
        bootstrap: {
        deps:['jquery'],
        exports:"bootstrap"

        },
        dtBootstrap: {
            deps: ['dt','jquery'],
            exports: "dtBootstrap"
        },

        datepicker:{
        deps:['jquery','bootstrap'],
        exports:"datepicker"
        }

        }

}); 
```

现在，在我的一个观点中，我这样称呼 datepicker：

```
define(['Backbone',
        'underscore',
        'jquery',
        'datepicker',
        'models/reports',
        'dtBootstrap',
        'bootstrap',
        'text!templates/reports/dashboard.html',
        ],function(Backbone,_,$,dp,report,dtBootstrap,bootstrap,dashboard){

        var view=Backbone.View.extend({
            el:"#content-wrap",
            template:_.template(dashboard),
            render:function(){
            this.$("#container-left").html(this.template());
            console.log(dp);
            }

    });
    return view;
    }); 
```

这将在控制台上返回 undefined。我猜图书馆没有得到适当的垫片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-15T17:37:20.777

这是我使用的垫片：

```
"datepicker" : {
    deps: ["jquery-ui", "bootstrap"],
    exports: "$.fn.datepicker"
} 
```

为了

```
"datepicker": "lib/datepicker/js/bootstrap-datepicker" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:24:31.763

查看`datepicker`'s source 它看起来实际上并没有导出任何东西 - 这就是为什么`requirejs`找不到`dt`要“连接”到的全局变量（`window.dt`如果在浏览器环境中运行）。根据`datepicker`的网站，它只是将其功能添加到 jQuery 对象中，不应该用作独立实例。[来自其文档页面](http://www.eyecon.ro/bootstrap-datepicker/)的示例：

```
$('#dp5').datepicker()
  .on('changeDate', function(ev){
    if (ev.date.valueOf() < startDate.valueOf()){
      ....
    } 
```

});

你有没有尝试过这样的事情？

我相信在这种情况下不需要匀场。

# twitter-bootstrap - 什么是 twitter-bootstrap mixin 命名约定

> ID：15085507
> 
> 赞同：1
> 
> 时间：2013-02-26T09:30:12.970
> 
> 标签：twitter-bootstrap

在 twitter-bootstrap 中混入：[https ://github.com/twitter/bootstrap/blob/master/less/mixins.less](https://github.com/twitter/bootstrap/blob/master/less/mixins.less)

有 dash 和 camelCase 命名的 mixins： .buttonBackground .input-block-level

在 3.0.0-wip 分支中我们也有下划线：clear_float

我的问题是什么是 mixin 命名约定？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:02:22.927

Bootstrap 默认使用 less 。您对变量和 Mixins 感到困惑（可以理解为函数）

因此骆驼与以下变量一起使用：

```
@color: #333;

  #nav {
   color: @color;
  } 
```

@color 在这里是一个变量。

现在 mixins 允许我们通过简单地在其中引用它的类名来将一个类的所有属性添加到另一个类中。例如 ：

```
.center-block() {
    display: block;
     margin-left: auto;
     margin-right: auto;
   } 
```

我们可以将`center-block`上面的类直接使用到一个我们想要具有相同属性的新类中。IE ：

```
#nav > li > a{
       .center-block; 
```

}

mixin 是声明的简单类，可以在任何地方使用。因此它们的命名约定是我们在 css 中声明其他类的常规方式。

但是如果你只是想区分 mixins 和其他类..你可以有一种特定的方式来编写它们......就像第一个字母作为大写..你知道一些对你有用的东西。

# vbscript - 搜索名称中包含特定字符串的文件并重命名

> ID：15085508
> 
> 赞同：2
> 
> 时间：2013-02-26T09:30:13.407
> 
> 标签：vbscript, file-rename

我是 VBScript 的业余爱好者（并且对它的工作方式非常着迷；））。我必须每天处理某些报告，为此我已经生成了一个脚本来完成任务。问题是我已经为特定的文件名称生成了该脚本，并且这些报告每天都带有时间日期，并且在名称中添加了一些额外的参数。所以，我需要一个 vbscript 来保存我每天 10 分钟根据脚本中指定的名称重命名文件的工作。

例如`D:/reports/`，有文件`AMR KilobyteData_23022013_4399_223.xls`我想将其重命名为`AMR KilobyteData.xls`. 而已 ！:)

请帮我解决这个问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:29:42.537

您要删除的信息是否总是出现在文件名中的第一个下划线之后？如果是这样，您可以执行以下操作：

```
Set fso = CreateObject("Scripting.FileSystemObject")

For Each f In fso.GetFolder("D:\reports").Files
  pos = InStr(f.Name, "_")
  If pos > 0 Then
    newName = Left(f.Name, pos-1) & "." & fso.GetExtensionName(f.Name)
    f.Move fso.BuildPath(f.ParentFolder, newName)
  End If
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:25:42.180

首先使用如下脚本遍历文件夹中的所有文件：

```
Dim fso, folder, file
Dim folderName, searchFileName, renameFileTo

' Parameters
folderName     = "D:\reports\"
searchFileName = "AMR KilobyteData"
renameFileTo   = "AMR KilobyteData.xls"

' Create filesystem object and the folder object
' how the FSO works: http://msdn.microsoft.com/en-us/library/2z9ffy99(v=vs.84).aspx
Set fso = CreateObject("Scripting.FileSystemObject")  
Set folder = fso.GetFolder(folderName)  

' Loop over all files in the folder until the searchFileName is found
For each file In folder.Files    
    ' See if the file starts with the name we search
    ' how instr works: http://www.w3schools.com/vbscript/func_instr.asp
    If instr(file.name, searchFileName) = 1 Then
        file.name = renameFileTo
        ' Exit the loop, we only want to rename one file
        Exit For
    End If
Next 
```

它应该可以正常运行（但我没有测试它）。我希望我引发了您的好奇心，您将研究此代码的工作机制。这就是为什么我把可以找到文档的链接放在里面。

# c# - 全球化 C#：百分比数据格式：

> ID：15085509
> 
> 赞同：3
> 
> 时间：2013-02-26T09:30:18.163
> 
> 标签：c#, globalization

百分比数据的格式化方式是否也是其中的一部分`CultureInfo`？通过格式化，我的意思是，是否将其显示为 47.3 或 0.473 等。

我的实际问题是，对于 DE 语言，我必须使用 47.3% 表示法，而对于其他语言，我必须使用 0.473，所以我正在寻找这些东西是否也取决于文化，就像用于小数点的符号一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:34:06.333

您必须编写代码才能做到这一点，例如：

```
string.Format("Value: {0:P2}.", 0.473) // formats as 47.3 % (varies by culture) 
```

它是基于文化控制格式的[`P`格式字符串。](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#PFormatString)

值得注意的是，`P`格式说明符会将**数字乘以 100**，因为它基于十进制表示法（1 表示 100%，0.5 表示 50%，等等）。

所以以下使用`de-DE`文化：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("de-DE");

Console.WriteLine("1\. " + string.Format("Value: {0:P2}.", 0.473));
Console.WriteLine("2\. " + string.Format("Value: {0:P2}.", 47.3)); 
```

将输出：

> 1.  47.30%
> 2.  4,730.00%

这与为 English Culture 输出的内容相同`en-GB`。

使用土耳其文化运行相同的代码会突出显示格式的差异（因为它们使用 %23 而不是 23%）。

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("tr-TR"); 
```

运行上面的代码（打印上面用于德国文化的两行）将输出：

> 1.  %47.30
> 2.  %4,730.00

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T09:34:30.623

> 百分比数据的格式化方式是否也是其中的一部分`CultureInfo`？

是的，但不是你想要的方式。您可以使用[`P`格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#PFormatString)，但我认为这不会将其格式化为 0.473：

> 百分比 ("P") 格式说明符将数字乘以 100 并将其转换为表示百分比的字符串。精度说明符指示所需的小数位数。如果省略精度说明符，则使用当前 PercentDecimalDigits 属性提供的默认数值精度。

因此，文化会影响小数位数、小数点分隔符以及可能对数值的处理，但我认为不会影响“值乘以 100”部分。

# php - Drupal 7 不发送电子邮件

> ID：15085511
> 
> 赞同：1
> 
> 时间：2013-02-26T09:30:26.853
> 
> 标签：php, email, drupal, drupal-7, sendmail

我有一个使用定制主题的drupal 7创建的网站，除了联系表格不起作用外，一切似乎都很好。

我已经使用一个非常基本的 PHP 脚本发送电子邮件测试了服务器安装，服务器似乎配置得很好，但 Drupal 仍然不发送电子邮件。

由于我不是drupal的新手，任何人都可以告诉我需要检查什么才能知道问题出在哪里，我希望可以解决它吗？

更多信息：

*   我已确认联系人模块已激活
*   我检查了权限，每个人都可以发送电子邮件
*   填写联系表格并发送后，我没有收到任何错误。

**更新**

这是我用来测试我的服务器是否配置为发送电子邮件的脚本：

```
<?php
    $to = "myemail@domaine.com";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";
    if (mail($to, $subject, $body)) {
            echo("<p>Message successfully sent!</p>");
    } else {
            echo("<p>Message delivery failed...</p>");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:43:56.073

正如 GeoPhonix 向我建议的那样，我查看了我服务器上的日志文件，`/var/log/mail.lo`我注意到该电子邮件已发送到网站创建者设置的不同电子邮件地址，并且由于我不是新手，我可以弄清楚电子邮件地址的设置位置，以下是我解决问题的步骤：

* * *

1.  使用命令`tail -f /var/log/mail.log`我可以查看日志更改
2.  我使用 drupal contant 页面发送了一封电子邮件
3.  我注意到日志发生了变化，并且电子邮件已成功发送到错误的电子邮件地址。
4.  我不知道在哪里更改电子邮件，所以我使用`phpmyadmin`整个数据库进行搜索以在 webform 表中找到电子邮件
5.  我搜索了 drupal 管理界面中`webform`提到该词的每个部分，以找到更改电子邮件配置的位置
6.  一段时间后，我在以下位置找到它：内容 -> 联系页面 -> 网络表单 -> 电子邮件，并且指定的电子邮件与默认的联系电子邮件不同。

* * *

我只是想写我所做的，可能有人会遇到相同或类似的问题，他可以知道如何调试事物

# iphone - iOS，KERN_INVALID_ADDRESS [UITextField 键盘输入更改选择：]

> ID：15085512
> 
> 赞同：1
> 
> 时间：2013-02-26T09:30:29.147
> 
> 标签：iphone, ios, objective-c, ios6

我收到以下错误。

```
EXC_BAD_ACCESS  
KERN_INVALID_ADDRESS 
[UITextField keyboardInputChangedSelection:] 
```

直到这份最新的崩溃报告，我一直无法重现这次崩溃。

我根据我的应用程序中是否设置了`didFinishLaunchingWithOptions`密码**/密码**来**调用**此视图控制器。`applicationWillEnterForeground`

 ****现在这是奇怪的事情。

崩溃发生在以下场景中。

1.  我在没有设置引脚的情况下运行我的应用程序，我设置了引脚。
2.  然后按主页按钮。
3.  这个视图控制器弹出，我输入 pin 并且视图被关闭。
4.  然后我按下主页按钮。
5.  我进入应用程序，出现固定屏幕。
6.  我按回家。
7.  然后进入应用程序，我得到一个崩溃。

我正在使用 arc，我在 iOS6 上重现了崩溃。

下面是我的代码，我只是看不到问题吗？

**.h 文件**

```
#import <UIKit/UIKit.h>

#define PVSectionFooterDefault @"Enter your PIN"
#define PVSectionFooterInvalid @"Invalid!"
#define PVSectionFooterCorrect @"Correct!"

@interface PasscodeViewController : UIViewController <UITableViewDelegate, 
       UITableViewDataSource, UITextFieldDelegate>{
    IBOutlet UITableView *passcodeTable;
    IBOutlet UILabel *lblMessage;
}
@property (nonatomic, strong) UITableView *passcodeTable;
@property (nonatomic, strong) UITextField   *txtPassword;
@property (nonatomic, strong) UILabel *lblMessage;
@end 
```

**.m 文件**

```
#import "PasscodeViewController.h"
#import "AppDelegate.h"

@implementation PasscodeViewController
@synthesize passcodeTable;
@synthesize txtPassword;
@synthesize lblMessage;
- (void)viewDidLoad {
    [super viewDidLoad];

    //[passcodeTable setBackgroundColor:[UIColor clearColor]];
    //[passcodeTable setBackgroundView:nil];
    self.view.backgroundColor = [UIColor groupTableViewBackgroundColor];

    lblMessage.shadowColor       = [UIColor whiteColor];
    lblMessage.shadowOffset      = CGSizeMake(0.0, 1.0);
    lblMessage.font              = [UIFont systemFontOfSize:14];
    lblMessage.textColor         = [UIColor darkGrayColor];
    lblMessage.text = PVSectionFooterDefault;

    txtPassword.isAccessibilityElement = YES;
    txtPassword.accessibilityLabel = @"Enter PIN";
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self
         selector:@selector(willShowKeyboard:) 
             name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
         selector:@selector(didShowKeyboard:) 
             name:UIKeyboardDidShowNotification object:nil];

}

- (void)viewWillDisappear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] removeObserver:self 
             name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self 
             name:UIKeyboardDidShowNotification object:nil];
}

- (void)willShowKeyboard:(NSNotification *)notification {
    [UIView setAnimationsEnabled:NO];
}

- (void)didShowKeyboard:(NSNotification *)notification {
    [UIView setAnimationsEnabled:YES];
}

#pragma mark - Table view methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView 
              numberOfRowsInSection:(NSInteger)section {
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView 
                    cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView 
                    dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] 
                    initWithStyle:UITableViewCellStyleDefault 
                  reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        CGRect frame = CGRectMake(cell.frame.origin.x+205, 
                    cell.frame.origin.y+7, 90, 31);

        txtPassword = [[UITextField alloc] initWithFrame:frame];
        txtPassword.delegate = self;
        txtPassword.borderStyle = UITextBorderStyleRoundedRect;
        txtPassword.font = [UIFont systemFontOfSize:17.0];
        txtPassword.backgroundColor = [UIColor whiteColor];
        txtPassword.contentVerticalAlignment = 
                     UIControlContentVerticalAlignmentCenter;
        txtPassword.keyboardType = UIKeyboardTypeNumberPad;
        txtPassword.returnKeyType = UIReturnKeyDone;    
        txtPassword.secureTextEntry = YES;
        txtPassword.clearButtonMode = UITextFieldViewModeAlways;    

        cell.textLabel.text = @"Enter PIN";

        [cell addSubview:txtPassword];

        [txtPassword becomeFirstResponder];     
    }
    return cell;
}
#pragma mark - UITextFieldDelegate
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    return YES;
}

- (BOOL) textFieldShouldClear:(UITextField *)textField {
    lblMessage.text = PVSectionFooterDefault;   
    return YES;
}

- (BOOL)textField:(UITextField *)textField 
           shouldChangeCharactersInRange:(NSRange)range 
                       replacementString:(NSString *)string {
    BOOL res = TRUE;
    NSString *newString = [textField.text 
             stringByReplacingCharactersInRange:range 
                                     withString:string];

    if ([newString length] == 4) {
        NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
        NSString *strPassword = [myDefaults stringForKey:@"pass"];

        if (strPassword == nil) {
            strPassword = @"";
        }

        if (![newString isEqualToString:strPassword]) {
            lblMessage.text = PVSectionFooterInvalid;
        } else {
            lblMessage.text = PVSectionFooterCorrect;

            AppDelegate *appDel = (AppDelegate*) 
                        [[UIApplication sharedApplication] delegate];
            appDel.gbooShowingGetStartedPasswordAsk = FALSE;
            [self.view removeFromSuperview];
        }
    } else if ([newString length] < 4) {
        lblMessage.text = PVSectionFooterDefault;
    }

    res = !([newString length] > 4);

    return res;
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
    [super viewDidUnload];
}
@end 
```

应用程序委托确实启动了

```
if (![strPassword isEqualToString:@""]) {
        self.gbooShowingGetStartedPasswordAsk = TRUE;

        lvc = [[PasscodeViewController alloc] 
               initWithNibName:@"PasscodeView" bundle:nil];

        lvc.view.frame = CGRectMake(0, 20, 320, 460); 

        [window addSubview:lvc.view];
    } 
```

和....

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];

    if (self.gbooShowingGetStartedPasswordAsk == FALSE) {

        NSString *strPassword = [myDefaults stringForKey:@"pass"];
        if (strPassword == nil) {
            strPassword = @"";
        }

        if (![strPassword isEqualToString:@""]) {
            lvc = [[PasscodeViewController alloc] 
                   initWithNibName:@"PasscodeView" bundle:nil];
            int th = self.window.frame.size.height;
            lvc.view.frame = CGRectMake(0, 20, 320, th); 

            lvc.view.backgroundColor = [UIColor groupTableViewBackgroundColor];

            [window addSubview:lvc.view];
        }
    }
} 
```

![在此处输入图像描述](../Images/86b0d1834023c34b6b9c5d41a508f235.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:20:31.003

考虑什么时候`lvc`is not `nil`，并且有一个超级视图，并且`applicationWillEnterForeground:`被调用，并将分支带到那里的主代码块中。您分配`lvc`给 a 的新实例`PasscodeViewController`，这可能会导致 的旧值`lvc`被释放。但是，它的`view`属性有一个超级视图，因此不会与它一起被释放。这些活着的对象可能会产生通知或动作，释放的视图控制器仍在监听。我还注意到，您并不总是取消订阅 dealloc 中的通知或`nil`ing 文本字段的委托。

那么，我的建议是 1）确保`lvc`在实例化另一个实例之前删除 ' 视图，以及 2）确保你`PasscodeViewController`的 '`dealloc`方法清除可能存在的悬空引用`NSNotificationCenter`。

你的`applicationWillEnterForeground:`方法变成：

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];

    if (self.gbooShowingGetStartedPasswordAsk == FALSE) {

        NSString *strPassword = [myDefaults stringForKey:@"pass"];
        if (strPassword == nil) {
            strPassword = @"";
        }

        if (![strPassword isEqualToString:@""]) {
            [lvc.view removeFromSuperview]; // This line prevents the view from persisting
            lvc = [[PasscodeViewController alloc] 
                   initWithNibName:@"PasscodeView" bundle:nil];
            int th = self.window.frame.size.height;
            lvc.view.frame = CGRectMake(0, 20, 320, th); 

            lvc.view.backgroundColor = [UIColor groupTableViewBackgroundColor];

            [window addSubview:lvc.view];
        }
    }
} 
```

你`PasscodeViewController`的`dealloc`应该是这样的：

```
- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    if (txtPassword.delegate == self) {
        txtPassword.delegate = nil; //docs indicate this is still an `assign` property so is not auto-zeroing in ARC and iOS 5+
    }
} 
```

通过这些更改，应该不会再有对已释放视图控制器的悬空引用，并且视图层次结构中也不会出现孤立视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:31:20.860

```
txtPassword = [[UITextField alloc] initWithFrame:frame]; 
```

和

```
[self.view removeFromSuperview]; 
```

看起来对我很可疑。我不是 ARC 粉丝，但当您从其父视图中删除视图时，您似乎在合理地释放 UITextField。它可以出现在

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range
 replacementString:(NSString *)string 
```

称呼。

因此，您应该在 viewDidLoad 上初始化并分配您的 txtPassword，而不是将其分配到单元初始化中。

就像您说的那样，您要离开并从后台重新启动您的应用程序。如果您的单元格已被释放，您可以重新分配新的 txtPassword，但仍将旧的保留在最后一个单元格中。因此，您可能可以拥有多个具有相同委托分配的 txtPassword。如果您的视图未显示，则 txtPassword 的引用将不再有效，然后您才能返回 UITextfield 方法。

所以就像我说的，一定要分配你的 txtPassword 一次。所以把alloc放到viewDidLoad中，在viewDidUnLoad中释放。

记住我只是猜测。希望它会帮助你。****

# android - 中国、塞尔维亚和台湾地区不提供应用内计费的 Android 免费应用

> ID：15085515
> 
> 赞同：3
> 
> 时间：2013-02-26T09:30:38.440
> 
> 标签：android, google-play

我刚刚在 Google Play 上发布了一个应用程序，我注意到它在中国、塞尔维亚和台湾不可用（在这些国家/地区名称旁边的定价和分发选项卡上的复选框被禁用并且名称带有删除线）。我的应用是免费的，但它使用应用内计费。因此，从所有逻辑上讲，它应该在这些国家/地区可用。如果不是，那么我不明白我做错了什么，为什么像 Shellrazer 和 Temple Run 这样的应用程序在这些国家/地区都可以使用，而且它们都是免费的并且使用应用程序内计费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T19:20:26.840

来自 Google Play 团队的回答：

> “请注意，应用内购买的应用属于付费类别。”
> 
> 由于您的两个应用程序都有应用程序内项目，因此它们被视为付费应用程序，并且不支持某些位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-11T08:36:16.963

您的应用在这些地区不可用的原因有两个。

如前所述，您的应用无法在塞尔维亚和台湾使用的原因是具有应用内购买的应用属于付费类别，并且某些地区不支持这些类型的应用。

您的应用在中国无法使用的原因是 Google Play 被屏蔽。

# c++ - 是否可以重载索引运算符 [] 以从整数返回位？

> ID：15085522
> 
> 赞同：0
> 
> 时间：2013-02-26T09:31:01.597
> 
> 标签：c++, operators, operator-overloading, bitwise-operators

我不确定这是否可能，因为据我所知，引用不能引用整数中的各个位，但我很想知道是否有一种技术可以实现以下效果。

```
int z = 0x1234;
z[0] = 1; //set the most significant bit of z.
uint8_t bit = z[30] //get the index 30 bit of z, counting from the left. 
```

如果我不能`z[0] = 1`，我想知道是否至少可以使用重载操作提取位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:33:01.670

不是直接的。您可以编写一个包装器`int`或使用`std::bitset`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:32:18.510

您不能为内置类型重载运算符。重载的运算符必须包含至少一种用户定义的类型（即类或联合类型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:29:55.503

如果你要 wrap `int`，你可以这样做：

```
class bitval {
    int &val;
    unsigned int mask;
  public:
    bitval(int &i, int idx) : val(i), mask(((unsigned int)(INT_MAX) + 1) >> idx) {}
    bitval &operator=(int i)  {
        if (i) {
            val |= mask;
        } else {
            val &= ~mask;
        }
        return *this;
    }
    operator bool() const {
        return val & mask;
    }
};

class bit {
    int &val;
  public:
    bit(int &i) : val(i) {}
    bitval operator[](int idx) { return bitval(val, idx); }
}; 
```

那么语法将是：

```
int z = 0x1234;
bit(z)[0] = 1;
uint8_t b = bit(z)[30]; 
```

顺便说一句，C++ 程序员通常将*最低*有效位称为位 0，而不是*最高*有效位，因此`mask(1 << idx)`可能会让他们不那么困惑。

# excel - 自动过滤器无法正常工作

> ID：15085523
> 
> 赞同：0
> 
> 时间：2013-02-26T09:31:08.803
> 
> 标签：excel, vba

我正在尝试根据列中的值过滤掉一些单元格，但我担心第一个过滤器操作会污染其余单元格，尽管我尝试通过将 filtermode 设置为 false 来取消设置过滤器。

我的选择方法如下所示：

```
Function GetRowRange(sheetRange, column, value) As Range
'check for a valid section column
sheetRange.AutoFilterMode = False
sheetRange.UsedRange.AutoFilter Field:=column, Criteria1:=value
Set GetRowRange = sheetRange.UsedRange.SpecialCells(xlCellTypeVisible)
MsgBox ("col:" & column & " val: " & value & " rows:" & GetRowRange.Rows.Count)
sheetRange.AutoFilterMode = False
End Function 
```

从 msgbox 我可以看到只有第一个返回任何行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:05:58.687

这是一个非常讨厌的问题！:-)

问题在于，在应用 Autofilter 和 之后`.SpecialCells(xlCellTypeVisible)`，您的新 Range 对象由多个组合范围组成。

例如，当过滤此表时`B`， ![在此处输入图像描述](../Images/9b3ee67a553092eb3f4fd8199699caf4.png)

您的范围对象将有 3 个区域，每个 1x2 单元格。出于某种奇怪的原因，`Rows.Count`没有考虑这些区域，所以`Selection.Rows.Count`1 虽然应该是 3。但是，如果您遍历 Rows 枚举，它将按预期工作：

```
lngCount = 0
For Each r In Selection.Rows
    lngCount = lngCount + 1
Next 
```

这将返回 3。

因此，您`GetRowRange`将返回正确的范围，但`.Rows.Count`例程将提供错误的结果。请改用此功能：

```
Function RowCount(rngAreas As Range) As Long
    Dim lngCount As Long
    Dim rng As Range
    For Each rng In rngAreas.Areas
        lngCount = lngCount + rng.Rows.Count
    Next
    RowCount = lngCount
End Function 
```

附带说明：请注意，您`GetRowRange`也将始终返回表格的第一个标题行，因此请相应地处理！

# eclipse - 如何使用 Eclipse 与队友快速聊天并指向代码？

> ID：15085528
> 
> 赞同：0
> 
> 时间：2013-02-26T09:31:12.597
> 
> 标签：eclipse, collaboration

我想围绕特定的代码行与队友聊天。我想发送一个指向这些代码行的指针。

我怎样才能做到这一点？

# python - 为什么类中字典中的属性值不引用该类的相同属性？

> ID：15085529
> 
> 赞同：0
> 
> 时间：2013-02-26T09:31:12.690
> 
> 标签：python, oop, dictionary

```
class test(object): 
    def __init__(self): 
        self.a = 5 
        self.d = {'alfa': self.a} 
```

我实例化该类的一个对象，并为其分配一个新值：

```
a_test = test()
a_test.a = 7 
```

为什么`a_test.d['alfa']`保持 5 而不是变为 7？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:34:36.753

因为`self.a`包含`5`在字典中分配它时的值。整数是不可变的，因此不进行引用。请阅读 Python 的[数据模型](http://docs.python.org/2/reference/datamodel.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:35:55.007

在调用构造函数时创建字典。因此字典中的值是在构造过程中设置的——它们不是通过引用传递，而是通过值传递。

字典中的值指向传入的对象的值，而不是对象本身。所以简单地`self.a`作为一个值不会自动更新字典，除非`self.a`是可变的（例如一个列表）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:57:41.477

让我提议我的`DictObj`课程，我一直在使用它来解决以下问题：

```
class DictObj(dict):
    """
    a dictionary like class that allows attribute-like access to its keys

    d = DictObj(a=2, b=7)
    d['a']  --> 2
    d.a     --> 2

    """
    def __getattr__(self, name):
        return self.__getitem__(name)

    def __setattr__(self, name, value):
        if name in self:
            self.__setitem__(name, value)
        else:
            super(DictObj, self).__setattr__(name, value)

    def __add__(self, other):
        res = DictObj(self)
        res.update(other)
        return res 
```

项目存储在字典中，但也可以作为对象的属性访问。

您可以使用更多魔术方法轻松扩展它以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T11:11:14.850

```
>>> a = 5
>>> b = {"key":a}
>>> b
{'key': 5}
>>> a = 7
>>> b
{'key': 5}
>>> 
```

你可以在这里看到，在“a”的分配实例值传递给字典“b”，它是 5。

所以 b['key'] 的值为 5 而不是 a 的引用。因此，无论您是否更改参考值时的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:38:52.940

您应该添加一个 setter 来管理您的类实例：

```
def set_a(self, new_val):
   self.a = new_val
   self.d = {'alfa': self.a} 
```

# entity-framework - EntityFramework 的 ObjectStateEntry.GetModifiedProperties 在 3 层场景中

> ID：15085534
> 
> 赞同：1
> 
> 时间：2013-02-26T09:31:32.633
> 
> 标签：entity-framework

我在 3 层场景中使用带有自跟踪实体的 EntityFramework 4。
我的目标是在实体保存回服务器时检测 ObjectContext 的 SavingChanges 处理程序中修改的属性。

注意：

*   这是一个 3 层场景；因此自跟踪实体保存在另一个 ObjectContext 中，而不是从中获取的那个
*   自跟踪实体在调用 SaveChanges 之前附加到上下文，并且所有更改都按预期保存。

这是我跟踪修改后的属性的方法：

```
var objectStateManager = objectContext.ObjectStateManager;
var modifiedObjectStateEntries = objectStateManager
                    .GetObjectStateEntries(EntityState.Modified)
                    .Where(x => !x.IsRelationship);
foreach (var modifiedObjectStateEntry in modifiedObjectStateEntries)
{
    // 需要从数据源刷新，因为这个实体是在另一个上下文中获取的
    objectContext.Refresh(RefreshMode.ClientWins, modifiedObjectStateEntry.Entity);
    var modifiedProperties = modifiedObjectStateEntry.GetModifiedProperties();
}

```

现在，由于某种原因，modifiedProperties 集合包含所有属性，而不仅仅是那些被修改的属性。知道为什么会这样吗？

当我将 OriginalValues 与 CurrentValues 进行比较时，一切看起来都符合预期。

```
var originalValues = modifiedObjectStateEntry.OriginalValues;
var currentValues = modifiedObjectStateEntry.CurrentValues;
for (int i = 0; i < originalValues.FieldCount; i++)
{
    // 这工作正常，只检测到差异
    if (!Equals(originalValues.GetValue(i), currentValues.GetValue(i)))
    {
    }
}

```

知道为什么“modifiedObjectStateEntry.GetModifiedProperties();” 在这种情况下不会像我预期的那样工作？

谢谢你的时间，
科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:44:01.423

我能想到的唯一原因是您正在修改所有属性，因为如果在最后一次 SaveChanges 发出后它们被更改，它们只会显示为该方法的返回。

正如您在[MSDN](http://msdn.microsoft.com/en-us/library/system.data.objects.objectstateentry.getmodifiedproperties%28v=vs.100%29.aspx)上看到的，它声明： **返回自上次调用 SaveChanges 以来已更改的对象属性的名称**。

查看您的代码示例，您看到这个的原因是因为您正在刷新实体（这将设置每个属性并将它们标记为已修改）。

```
...    
objectContext.Refresh(RefreshMode.ClientWins, modifiedObjectStateEntry.Entity);
... 
```

此调用将重置所有属性，而不仅仅是已修改的属性。

我不清楚您要达到什么目的，但是如果要查看更新的内容，您就不能这样做。您需要复制实体并刷新，然后才能检查修改后的字段，但这会很丑陋。

# union - obiee如何合并两个表？

> ID：15085539
> 
> 赞同：1
> 
> 时间：2013-02-26T09:31:47.197
> 
> 标签：union, obiee

我的物理层有两个表（由于某种原因）虽然我知道最好两个联合两个表。表 A 和表 B 具有相同的结构。我的目标是实现一个类似的 sql：</p>

```
select F1，F2 
     from (select *
           from tableA
           union
           select *
           from tableB)
tableMix 
```

只是联合两个因素表......我怎么能在管理工具中做到这一点？

现在像这样的nqquery

```
WITH SAWITH0 AS
    ((select T3580.AMOUNT as c1, T30887.YEAR_DESC as c2, T30887.YEAR_WID as c3
      from DW_DAY_D T30887 /* A_Dim_DW_TQ_DAY_D */, DW_TQ_PRODUCT_F T3580 /*                    A_Fact_DW_TQ_PRODUCT_F */
      where (T3580.DAY_ID = T30887.DAY_WID)
      union all
      select T120596.AMOUNT   as c1,
      T30887.YEAR_DESC as c2,
      T30887.YEAR_WID  as c3
      from DW_DAY_D T30887 /* A_Dim_DW_TQ_DAY_D */, DW_MHG_PRODUCT_F T120596 /*      A_Fact_DW_MHG_PRODUCT_F */
      where (T30887.DAY_WID = T120596.DAY_ID))),
      SAWITH1 AS
     (select distinct D3.c1 as c1, D3.c2 as c2, D3.c3 as c3 from SAWITH0 D3)
     select distinct 0 as c1, D2.c2 as c2, D2.c1 as c3, D2.c3 as c4
     from SAWITH1 D2
     order by c4, c3 
```

但我不能将聚合规则设置为“金额”上的“总和”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:06:23.197

选项 1：您可以在物理层中创建一个不透明的视图。该视图将是您在帖子中提到的查询。

选项2：在BMM层，创建一个逻辑表（tableMix），有两个逻辑表源（tableA和tableB）。

# actionscript-3 - ActionScript 中的 Flex 移动按钮皮肤 - 多行标签显示

> ID：15085542
> 
> 赞同：1
> 
> 时间：2013-02-26T09:32:01.493
> 
> 标签：actionscript-3, apache-flex, flex4.5, flex-mobile, spark-skinning

我正在开发一个`Flex mobil`电子应用程序，并一直在优化其在移动设备上的性能。我已经读过皮肤必须被写入`ActionScript`所以我试图创建我的 AS `ButtonSkin`。

```
public class mButtonSkin extends ButtonSkin
{
    private static var colorMatrix:Matrix = new Matrix();

    protected var radiusX:Number = 12;
    protected var mAngle:Number = 30;
    protected var labelWidth:Number;
    protected var labelHeight:Number;
    protected var paddingLeft:Number = 12;
    protected var paddingRight:Number = 12;
    protected var paddingTop:Number = 2;
    protected var paddingBottom:Number = 2;

    public function mButtonSkin() {
        super();
    }

    override protected function drawBackground(unscaledWidth:Number,unscaledHeight:Number) : void {
        colorMatrix.createGradientBox(width,height,mAngle);
        if (currentState == "up") {
            graphics.beginGradientFill(GradientType.LINEAR, 
                [hostComponent.getStyle("fill3"),hostComponent.getStyle("fill1")], [1,1], [0,255], colorMatrix);
        } else {
            graphics.beginFill(hostComponent.getStyle("fill4"));
        }

        graphics.lineStyle(0.5,hostComponent.getStyle("borderColor"),0.5);
        graphics.drawRoundRect(0,0,hostComponent.width,hostComponent.height,12);
        graphics.endFill();
    }

    override protected function layoutContents(unscaledWidth:Number, unscaledHeight:Number) : void {
        labelDisplay.wordWrap = true;
        labelDisplay.multiline = true;

        labelDisplay.commitStyles();

        labelWidth = width - paddingLeft - paddingRight;
        labelHeight = height - paddingTop - paddingBottom;

        var x:Number = width / 2 - labelWidth / 2;
        var y:Number = height / 2 - getElementPreferredHeight(labelDisplay) / 2;

        setElementSize(labelDisplay,labelWidth,labelHeight);
        setElementPosition(labelDisplay,x,y);
    }

    override protected function labelDisplay_valueCommitHandler(event:FlexEvent) : void {
        labelDisplayShadow.text = "";
    }
} 
```

在我的按钮中应用这个皮肤：

![在此处输入图像描述](../Images/e3da7a274371819fcfde4162c2366a39.png)

按钮 labelDisplay 对齐错误（verticalAlignment 必须居中）。

点击按钮后：

![在此处输入图像描述](../Images/b57323330ca033c627d08eb024b7d0de.png)

我的按钮`labelDisplay`现在垂直对齐到中间。

我错过了什么？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:32:26.163

在`layoutContents`函数上，在定位`labelDisplay`元素之前，我首先检查了它的`numLines`属性是否大于 1。这是我更新的函数：

```
 override protected function layoutContents(unscaledWidth:Number, unscaledHeight:Number) : void {
        labelDisplay.wordWrap = true;
        labelDisplay.multiline = true;

        labelWidth = width - paddingLeft - paddingRight;
        labelHeight = height - paddingTop - paddingBottom;

        var x:Number = width * .5 - labelWidth * .5;
        var y:Number = height * .5 - getElementPreferredHeight(labelDisplay) * .5;

        setElementSize(labelDisplay,labelWidth,labelHeight);

        if (labelDisplay.numLines == 1)
            setElementPosition(labelDisplay,x,y);
        else
            setElementPosition(labelDisplay, x, labelDisplay.getLayoutBoundsY());
    } 
```

这个解决方案可能对其他开发人员没有用，但它解决了我的问题。

# ios - 如何为多个搜索值使用多个 NSPredicate

> ID：15085547
> 
> 赞同：2
> 
> 时间：2013-02-26T09:32:17.243
> 
> 标签：ios, nspredicate

我使用 UITextField 作为搜索字段：用户可以输入多个用逗号分隔的搜索值。通过键入，我想在我的 NSArray 中找到与搜索组件之一匹配的每个自定义对象。

我的自定义对象没有属性（可用于搜索）。接收我必须调用的值`[myObject fieldForKey:@"username"].value;`。因此，我必须使用`[NSPredicate predicateWithBlock]`（或者其他方式对我来说是不可能的）。

我的搜索方法（每当文本字段中的字符发生更改时都会调用）：

```
-(void)searchEntriesWithString:(NSString*)searchString {
    NSArray *dataSource = [NSArray arrayWithArray:_allObjects];

    searchString = [searchString stringByReplacingOccurrencesOfString:@" " withString:@""];

    NSArray *components = [searchString componentsSeparatedByString:@","];
    NSMutableArray *predicates = [NSMutableArray array];
    for (NSString *value in components) {
        NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {

        return ( [[(MyObject*)evaluatedObject fieldForKey:@"username"].wert hasPrefix:value ]);
        }];

        [predicates addObject:predicate];
    }

        NSPredicate *resultPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];

    NSMutableArray searchResultArray = [NSMutableArray arrayWithArray:[dataSource filteredArrayUsingPredicate:resultPredicate]];
} 
```

假设以下数据源：

*   具有用户名“userA”的对象1
*   具有用户名“userB”的对象2
*   具有用户名“userC”的 Object3

使用 '[self searchEntriesWithString:@"userA,userB"]' 调用该方法应该会产生一个包含 Object1 和 Object2 的数组。

但我没有得到这个结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T14:30:59.463

由于您想要**一个**搜索组件，而不是**所有**搜索组件，我认为您应该使用：

```
NSPredicate *resultPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:predicates]; 
```

正如您所拥有的那样，使用`andPredicateWithSubpredicates`一个术语需要传递“userA”*和*“userB”。

[我知道你三个月前问过这个问题，找到了解决办法，然后继续前进，但我想我会留下一个建议]

# java - 如何检查 Java 类成员顺序

> ID：15085549
> 
> 赞同：3
> 
> 时间：2013-02-26T09:32:20.890
> 
> 标签：java, coding-style, checkstyle, pmd

我们正在使用 PMD 和 Checkstyle（来自开发人员 IDE 和中央 CI 服务器）来检查代码是否符合我们的编码约定。

我期待这些工具能够提供检查班级成员订单的规则，但他们似乎没有。

通过班级成员的顺序，我的意思是：

```
public static properties
public properties
protected properties
private properties

public constructors
protected constructors
private constructors

static methods

non-static methods 
```

我当然可以编写自己的 PMD 规则，但我不习惯它，也不想重新发明轮子。

您知道任何可以为我们进行此类检查的工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:35:13.777

Checkstyle 实际上就是这样做的：[DeclarationOrder](http://checkstyle.sourceforge.net/config_coding.html#DeclarationOrder)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:38:24.073

您可以使用 Checkstyle 的 Declaration Order Check

> 检查类或接口声明的部分是否按照 Java 编程语言的代码约定建议的顺序出现。
> 
> ```
> 1.Class (static) variables. First the public class variables, 
> ```
> 
> 然后是受保护的，然后是包级别（无访问修饰符），然后是私有的。
> 
> ```
> 2.Instance variables. First the public class variables, then the protected, 
> ```
> 
> 然后是包级别（没有访问修饰符），然后是私有的。
> 
> ```
> 3.Constructors
> 
> 4.Methods 
> ```

[参考](http://checkstyle.sourceforge.net/apidocs/com/puppycrawl/tools/checkstyle/checks/coding/DeclarationOrderCheck.html)

# c# - 从 WinForm 调用对象事件

> ID：15085553
> 
> 赞同：0
> 
> 时间：2013-02-26T09:32:36.770
> 
> 标签：c#, winforms, events

我需要在 WinForm 中引发对象事件。更改对象属性时需要更改控件状态（在 UI 中）。如何在 UI 中引发对象事件？

编辑：在表单上，​​我有 2 个绑定到对象属性的下拉菜单。当第一个选择为假时，我需要禁用第二个下拉菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:35:50.233

如果您反对已经实现`INotifyPropertyChanged`，您可以在您的`WinForm`类中执行以下操作：

```
yourObject.PropertyChanged += (s, e) =>
    {
        if (e.PropertyName == "Name") {
            //Check the value of the property here, etc...
            button1.Enabled = false;
        }
    }; 
```

在该示例中，`Name`是您要监视的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:35:35.850

你不能引发对象的事件。只有对象可以引发它的事件。您只能订阅对象的事件。为什么？因为 event 实际上是一对用于添加和删除处理程序的方法。它与委托类型的属性不同，您可以从任何地方调用它。

因此，您应该做一些会导致对象引发该事件的事情。没有办法直接引发事件。

* * *

这是`INotifyPropertyChanged`使用示例：

```
// your object
public class Foo : INotifyPropertyChanged
{
    private bool _bar;

    public bool Bar
    {
        get { return _bar; }
        set { 
            if (_bar == value)
                return;

            _bar = value;
            OnPropertyChanged("Bar");
        }
    }

    protected virtual void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

并将您的控件绑定到此对象：

```
yourControl.DataBindings.Add("Enabled", foo, "Bar"); 
```

当`Bar`属性改变时， foo 对象将引发事件，您的控件将处理该事件。

# javascript - 如何使用 AddThis 小部件提高页面加载速度？

> ID：15085555
> 
> 赞同：4
> 
> 时间：2013-02-26T09:32:37.650
> 
> 标签：javascript, html, optimization, addthis

```
<script type="text/javascript" 
    src="http://s7.addthis.com/js/250/addthis_widget.js"></script> 
```

我将此代码用于 facebook、twitter 等，但其中有一个脚本使页面加载速度非常慢。你能帮忙解决这个问题吗，整个代码如下

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_preferred_1"></a>
    <a class="addthis_button_preferred_2"></a>
    <a class="addthis_button_preferred_3"></a>
    <a class="addthis_button_preferred_4"></a>
    <a class="addthis_button_compact"></a>
    <a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">
    var addthis_config = {
        "data_track_addressbar": true
    };
</script>
<script type="text/javascript" 
    src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4dfeea6f5bf22ac6">
</script>
<!-- AddThis Button END --> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:44:39.837

除了像 Mudshark 所说的那样将所有内容移到页面底部之外，您还可以使用 async addthis 版本：

[http://support.addthis.com/customer/portal/articles/381221-optimizing-addthis-performance#.USyDXiVuPYo](http://support.addthis.com/customer/portal/articles/381221-optimizing-addthis-performance#.USyDXiVuPYo)

```
 <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#async=1"></script> 

 function initAddThis(){
      addthis.init()
 }
 // After the DOM has loaded...
 initAddThis(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:36:46.170

一种解决方案是对 AddThis 库使用*延迟的 JavaScript 加载模式*。

有几个不错的 JavaScript 库可以帮助您解决这个问题。我个人主要使用[Modernizr.load](http://modernizr.com/docs/)（或[yepnope.js](http://yepnopejs.com/)本身）

[您可以在使用延迟加载](http://www.digital-web.com/articles/improve_page_performance_with_lazy_loading/)文章提高页面性能中阅读有关该问题和改进的更多信息。

附带说明一下，在我过去的项目中，通过使用延迟 JavaScript 加载模式，我能够将页面加载平均提高约 35%。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:41:48.297

一件显而易见的事情是将javascript移动到页面底部，就在之前，`</body>`以便其他所有内容都可以在它之前加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T11:23:43.563

有几点需要注意：

*   你真的不需要立即加载 addthis，你可以在页面渲染过程中相对较晚地加载它，
*   addthis .js 文件很大，目前大约 118kb，已最小化和 gzip 压缩（原文如此！），
*   由于它的大小，浏览器编译和处理它总是需要相对大量的时间，尤其是在移动设备上。

`async`在标签中使用属性`script`可能会有所帮助，但是浏览器在看到属性时主要考虑网络资源。浏览器不会考虑脚本可能对 CPU 使用率、页面渲染树等产生的影响（在浏览器防御中，他们无法确定它）。例如，需要很长时间才能执行的脚本可能会阻止渲染第一帧或其他关键的早期绘制。即使我们忽略获取 addthis .js 文件所需的网络资源（连接槽、带宽等），它仍然可能证明该脚本对页面加载过程有严重影响。

请注意，虽然该`async`属性提示浏览器可以异步加载资源，但在最终检索到脚本时，它没有说明脚本执行。浏览器中的 JS 大多是单线程的，一旦浏览器开始处理 .js 文件，它就无法退出它，它必须让它完成运行。

在我的电脑上，在 Chrome 中评估脚本大约需要 130-140 毫秒，并且它会`ParseHTML`在很长时间内阻止事件。在功能较弱的移动设备上，它可能很容易跳到 500 毫秒。

因为 addthis 太大了，最好给浏览器一点帮助，并推迟 .js 文件的获取，直到显示其他更重要的页面组件。您应该为此任务使用专用的 .js 延迟库，以确保在`DOMContentLoaded`事件之后和其他重要资源处理后处理它。我个人为此使用 Lab.js，因为它很小并且可以很好地完成工作。

另请注意，存在`defer`可以添加到`script`标签的属性，但是规范明确指出必须在事件**之前**`defer`处理带有标签的脚本- 所以这里没有胜利。 **`DOMContentLoaded`**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T11:48:01.457

将`async="async"`属性添加到您的`script`标签

```
<script type="text/javascript" 
    src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4dfeea6f5bf22ac6" async="async">
</script> 
```**

# sql - 如何从存储过程中检索 N 个随机记录？

> ID：15085559
> 
> 赞同：0
> 
> 时间：2013-02-26T09:32:51.887
> 
> 标签：sql, sql-server, tsql

如何从我们总共拥有的 X 条记录中检索 N 条随机记录。例如，如果我们有一个包含 2000 个指向我们网站上不同页面的链接的表，我们如何检索 10 条随机记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:33:40.330

```
SELECT TOP 10 *
FROM tableName
ORDER BY NEWID() 
```

*   [新ID](http://msdn.microsoft.com/en-us/library/ms190348.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:53:07.883

尝试像这样使用动态 SQL。请注意，这需要更多的工作，因为某些边缘情况未涵盖，例如 COUNT( *) 返回 0 或记录计数大于 COUNT(* ) 的情况等。

```
CREATE PROCEDURE dbo.RandomNRecords
(
 @recordCount int
)
as 
begin
declare @counter int
declare @sqlQuery nvarchar(2000)

SET @sqlQuery = '

CREATE TABLE #TempTable
(
f1 varchar(50),
f2 varchar(50),
f3 int,
id int identity(1,1)
)

INSERT INTO #TempTable
SELECT f1, f2, f3 FROM Table1

SELECT *
FROM #TempTable
WHERE id in ('

SELECT @recordCount = COUNT(*) From Table1

SET @counter = 0
WHILE @counter < @recordCount
BEGIN
    SET @counter = @counter + 1
    SET @sqlQuery = @sqlQuery + CONVERT(varchar,Round((@recordCount * Rand()), 0)) + ','     
END;

SET @sqlQuery = SUBSTRING(@sqlQuery, 1, LEN(sqlQuery) - 1) --remove last comma 
SET @sqlQuery = @sqlQuery + ')'

EXEC sp_executesql @sqlQuery
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:03:32.367

在存储过程中使用它

声明@N varchar(10)

设置@N='10'

exec(' SELECT TOP '+@N+' * FROM tableName ORDER BY NEWID()')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:12:30.107

```
declare @numberOfRecordsToGet int = 5
select top (@numberOfRecordsToGet) * from name_of_your_tbl order by newid() 
```

# objective-c - 将交互式标签添加到基于窗口的 iPhone 应用程序

> ID：15085567
> 
> 赞同：3
> 
> 时间：2013-02-26T09:33:17.803
> 
> 标签：objective-c, xcode

我正在尝试将变量标签添加到一个简单的基于窗口的 iPhone 应用程序。我正在使用 XCode 3.2.6。该应用程序是我从网上下载的一个示例，就像这样简单：

*   用户可以在其中键入一些文本的标签
*   提交按钮

当用户单击提交时，标签中的文本通过简单的查询记录在 mysql 数据库中（数据库在我的本地机器上并使用 php 脚本处理）。查询有效，我只想添加标签来编写查询结果。所以我添加了这段代码：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320.0f, 20.0f)];
[label setText:@"write some text"]; 
```

但它不起作用。我需要将标签连接到 Interface Builder 中的某个对象吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:04:53.923

我认为您忘记像这样在视图中添加标签：

```
[self.view addSubView: label]; 
```

这将在您当前的视图中插入您的标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:54:50.493

解决了！我错过了@synthesize 标签！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:59:29.337

您最好将 UILabel *label 作为 AppDelegate 的属性。

然后在 AppDelegate.m 中，你可以初始化 UILabel

```
_label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320.0f, 20.0f)]; 
```

在您的Launch代码末尾，您应该`_label`将`_label`

```
[self.window addSubView:_label] 
```

在 AppDelegate 中，您应该公开一个设置文本的方法。

```
- (void)showText:(NSString *)text
{
    [_label setText:text];
    [self.window bringSubviewToFront:_label];
} 
```

并且在您的视图或 viewControll(should improt your AppDelegate.h) 中，当您单击提交按钮时

```
- (void)clickSubmitButton:(UIButton)button
{
        // TODO : get your text string
        AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        [appDelegate showText:YOURTEXT];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:42:47.007

`UITextField`听起来更好的解决方案...这样，您可以编辑消息并以编程方式设置文本。
文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)

# java - Eclipse Juno 更新后无法创建服务器

> ID：15085577
> 
> 赞同：2
> 
> 时间：2013-02-26T09:33:58.117
> 
> 标签：java, eclipse, jakarta-ee, eclipse-juno

我刚刚更新了我的eclipse juno，更新后，这出现了！

![在此处输入图像描述](../Images/9172a71dce39b7108f5ecc973dcd75eb.png)

错误是

```
Could not create the view: org.eclipse.wst.server.ui.ServersView 
```

我的所有项目文件都已损坏。我将如何解决这个问题？无论如何我可以返回我的 Eclipse 的先前状态或版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:28:35.870

Eclipse JUNO has some bugs, I strongly recommend you to go back to Indigo, I had a lot of issues when updating to Juno and installing Juno, that's why I preferred to get back to my Eclipse Indigo. I could notice that there's also an impact in memory, previous versions of Eclipse consume less resources and are faster. If you have a good computer and with a good processor, I think there's no problem, but you can still always save memory for other needs. If you still want the latest release, download JUNO directly from the page, as I mentioned before, it has some new features as well as some bugs. Best regards

# android - Android：找不到生成的 XML 文件

> ID：15085580
> 
> 赞同：0
> 
> 时间：2013-02-26T09:34:09.263
> 
> 标签：android, xml

我正在研究一种将 XML 文件写入设备的方法。我已经在清单文件中允许了外部存储，但我在应该在的位置找不到该文件。

这是我的代码：

```
 public static void write (){   
 Serializer serial = new Persister();
 File sdcardFile = new File("/Prueba/file.xml");
    Item respuestas = new Item();

   try {
 serial.write(respuestas, sdcardFile);
   } catch (Exception e) {
// There is the possibility of error for a number of reasons. Handle this     appropriately in your code
e.printStackTrace();
         }
         Log.i(TAG, "XML Written to File: " + sdcardFile.getAbsolutePath());
   }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:38:16.433

SD卡文件路径问题。这是在 file.xml 文件中写入字符串的示例。

```
File myFile = new File("/sdcard/file.xml");

try {
            File myFile = new File("/sdcard/file.xml");
            myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = 
                                    new OutputStreamWriter(fOut);
            myOutWriter.append("encodedString");
            myOutWriter.close();
            fOut.close();

        } catch (Exception e) {

        } 
```

您可以通过这种方式获取外部存储名称，

```
String root = Environment.getExternalStorageDirectory().toString(); 
```

# eclipse - 从 Eclipse 运行 shell 脚本

> ID：15085583
> 
> 赞同：2
> 
> 时间：2013-02-26T09:34:19.660
> 
> 标签：eclipse, bash, shell

我想使用 Eclipse 来运行构建脚本（在 Ubuntu 上）。

我使用 make 工具来做到这一点：

```
build_android:
chmod 755 "./build_android.sh"
./build_android.sh 
```

我使用 make 工具启动脚本，但在某些字符串上出现“权限被拒绝”，例如

```
./build_android.sh: 19: function: Permission denied 
```

上

```
NDK=/home/student/devtools/android-ndk-r8d
PLATFORM=$NDK/platforms/android-8/arch-arm
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86

function build_one
{
./configure --target-os=linux \
--prefix=$PREFIX \
--enable-cross-compile \
#and so on...
} 
```

为什么会这样以及在 Eclipse 中启动脚本的解决方案是什么。

PS我为什么要它？我认为通过几次单击启动脚本并在环境的控制台视图中查看格式化的脚本输出会更有效率。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T11:32:24.847

您可以使用 eclipse 插件：http: [//sourceforge.net/projects/shelled/](http://sourceforge.net/projects/shelled/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T07:42:07.730

可能 Eclipse 使用其他一些 shell 来执行脚本，它不能定义函数。`#!/bin/bash`在脚本的顶部放置一行。

# java - Java 服务器上的缓存和内存处理

> ID：15085586
> 
> 赞同：1
> 
> 时间：2013-02-26T09:34:25.600
> 
> 标签：java, jakarta-ee, caching, memory-management, jboss

一段时间后，我的 java 应用程序内存不足。所以我试图找到最合适的方式来管理缓存大小。我确实有一个问题，如果我不使用 LRU 原则清除内存，我的立方体会变大。你如何管理你的java vm的缓存大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:59:10.773

实际上，我从来没有完全解决过问题，我对目前的状态也不是 100% 满意，但无论如何，这是我目前的解决方案。

系统在会话之间使用共享缓存，因此会话中分配的内存在会话结束后被清除，但共享缓存中的内存保持分配状态。

之前提到的不同参数的组合+每次调用内存操作后垃圾收集器的更快迭代至少可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:34:25.600

目前我可以设置参数`CACHE_SIZE`和`FREE_MEMORY_PERCENTAGE`. 但这似乎不是正确的方法。

# jquery - 用jquery在很多li中获取第一个li文本

> ID：15085594
> 
> 赞同：0
> 
> 时间：2013-02-26T09:34:44.087
> 
> 标签：jquery

我有：

```
<li id="1">
     This is what I want to get
     <li id="2">
         not needed to be selected
         <li id = "3">
             not needed...
         </li>
     </li>
</li> 
```

我想用 jQuery 获取 id = 1 文本的 li，这就是我所拥有的：

```
var id = "1"
var needed = $('li[id='+cat_id+']').text(); 
```

但这得到了所有的文本，我怎么只能得到`This is what I want to get`.

**更新**

你是对的，那是错误的，所以现在是：

```
<li id="1">
    This is needed
    <ul>
        <li id = "2">Not needed</li>
        <li id = "3"> Not needed too </li>
    </ul>
</li> 
```

`This is needed`在上面的示例中，考虑到它的 id =“1” ，我该如何选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:36:58.350

尝试：

```
var id = "1"
var needed = $('li[id=' + id + ']').clone().children().remove().end().text(); 
```

演示：http: [//jsfiddle.net/h397T/](http://jsfiddle.net/h397T/)

**编辑 1**

正如另一个指出你的 html 是错误的，它应该是：

```
<ul>
    <li id="1">This is what I want to get
        <ul>
            <li id="2">not needed to be selected
                <ul>
                    <li id="3">not needed...</li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

但即便如此，我的解决方案仍然有效，演示：http: [//jsfiddle.net/h397T/1/](http://jsfiddle.net/h397T/1/)

**编辑 2**

它仍然适用于您更新的 HTML，请参阅演示：http: [//jsfiddle.net/h397T/2/](http://jsfiddle.net/h397T/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T09:36:41.310

你的 html 不正确。应该

```
<li id="1">
     This is what I want to get
</li>
<li id="2">
     not needed to be selected
</li>
<li id = "3">
     not needed...
</li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:37:19.157

如果你有这样的结构

```
<ul>
 <li></li>
 <li></li>
 <li></li>
</ul> 
```

尝试

```
$("ul li").first(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:51:06.900

试试这个：

**HTML**

```
 <ul>
    <li id="1">This is what I want to get
      <ul>
       <li id="2">not needed to be selected</li>
       <li id="3">not needed...</li>
      </ul>
    </li>
  </ul>
<div id="result"></div> 
```

**jQuery**

```
var id = "#1"
var needed = $(id).children().detach();
$('#result').text($(id).text());
$(id).append(needed); 
```

**[工作小提琴](http://jsfiddle.net/h397T/3/)**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T09:36:22.497

试试这个

```
$('li:first').text(); 
```

# c# - 我应该使用哪一个？十进制。加（）或“+”

> ID：15085597
> 
> 赞同：11
> 
> 时间：2013-02-26T09:34:53.867
> 
> 标签：c#, .net

我有一个找不到答案的问题。想象一下，我有两个十进制数。当我想对数字求和时，我应该使用哪一个？

选项1：

```
var num1 = 10.456m;
var num2 = 12.033m;

var result = decimal.Add(num1, num2); 
```

选项2：

```
var num1 = 10.456m;
var num2 = 12.033m;

var result = num1 + num2; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T09:36:46.913

它们是完全一样的。该类`Decimal`重载了`+`调用相同方法的运算符。所以你应该使用你觉得更具可读性的那个。我个人更喜欢第二种方法。

`+`操作员（由反射器提供）：

```
[SecuritySafeCritical, __DynamicallyInvokable]
public static decimal operator +(decimal d1, decimal d2)
{
    FCallAddSub(ref d1, ref d2, 0);
    return d1;
} 
```

和添加方法：

```
[SecuritySafeCritical, __DynamicallyInvokable]
public static decimal Add(decimal d1, decimal d2)
{
    FCallAddSub(ref d1, ref d2, 0);
    return d1;
} 
```

在 IL 和性能方面严格等效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:37:01.040

两种 c# 都为您提供了多种解决问题的方法，您可以选择一种您觉得更舒服的方法。我个人使用 num1 + num2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:37:31.510

两者完全一样，只是外观不同。

# scala - 为什么会出现这种类型错误？

> ID：15085598
> 
> 赞同：0
> 
> 时间：2013-02-26T09:34:58.517
> 
> 标签：scala

请参阅以下具有隐式返回类型的函数定义：

```
scala> def getIn(nodes:NodeSeq, path:String) = {
     | nodes map {node => node \ path}
     | }
getIn: (nodes: scala.xml.NodeSeq, path: String)scala.collection.immutable.Seq[scala.xml.NodeSeq] 
```

但是，如果函数显式定义了相同的返回类型，则会发生错误：

```
scala> def getIn(nodes:NodeSeq, path:String) = Seq[NodeSeq] {
     | nodes map {node => node \ path}
     | }
<console>:9: error: type mismatch;
 found   : scala.collection.immutable.Seq[scala.xml.NodeSeq]
 required: scala.xml.NodeSeq
       nodes map {node => node \ path} 
```

我无法理解为什么会发生错误。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:36:33.770

在第二种情况下，您没有正确定义返回类型。你需要

```
def getIn(nodes:NodeSeq, path:String) : Seq[NodeSeq] = { ... 
```

# c# - 在 Visual Studio 中将 nUnit 设为默认值？

> ID：15085600
> 
> 赞同：0
> 
> 时间：2013-02-26T09:35:03.573
> 
> 标签：c#, visual-studio-2008, nunit

我在我的解决方案中创建了一个测试项目，其中也存在其他项目，将“nUnit”框架添加到测试项目中。

在 BusinessLayer 中存在的一种方法上，右键单击并单击“创建单元测试”，它在测试项目中创建了一个单元测试方法，但是它采用下面提到的默认 Visual Studio 单元测试属性而不是 nUnit 属性（我需要手动更改属性以使用 nUnit ），如何避免这种情况或如何使 nUnit 作为 Visual Studio 中的默认单元测试工具。

```
 [TestMethod()]
        [HostType("ASP.NET")]
        [AspNetDevelopmentServerHost("C:\\Projects\\XXXXX", "/")]
        [UrlToTest("http://localhost:64721/")]
        public void GetSequenceTest()
        {
            int stop = 0; // TODO: Initialize to an appropriate value
            int[] expected = null; // TODO: Initialize to an appropriate value
            int[] actual;
            actual = Helper.GetSequence(stop);
            Assert.AreEqual(expected, actual);
            Assert.Inconclusive("Verify the correctness of this test method.");
        } 
```

相反，它应该得到：

```
[Test]
        public void GetSequenceTest()
        {
            int stop = 0; // TODO: Initialize to an appropriate value
            int[] expected = null; // TODO: Initialize to an appropriate value
            int[] actual;
            actual = Helper.GetSequence(stop);
            Assert.AreEqual(expected, actual);
            Assert.Inconclusive("Verify the correctness of this test method.");
        } 
```

# java - Android javac和dx - 故障处理，类名和路径不匹配

> ID：15085602
> 
> 赞同：2
> 
> 时间：2013-02-26T09:35:04.570
> 
> 标签：java, android, compilation, dalvik, dx

我正在使用 SpartacusRex 的终端 IDE 和另一个应用程序 DroidEdit 在 Android 上构建和运行 java 应用程序。一个简单的单文件 Hello World 可以完美地构建和运行，但是当我引入包时，我无法将类文件正确地 dex 到 jar 文件中：

从我的项目目录：
javac src/mypack/*. j​​ava
**这编译成功**
dx --dex --output=Test.jar src
**这给了我以下警告**

*故障处理：
类名（mypack/Main）与路径（Main.class）不匹配
......在解析Main.class时
......在处理Main.class时* 

所有路径和包名称都是正确的。Main.java 位于名为“mypack”的文件夹中，并且有一个包语句“package mypack;”。
我究竟做错了什么 ？此外，使用 --no-strict 会删除警告，但输出的 jar 文件未正确构建且无法运行。

任何帮助表示赞赏。谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-18T13:33:17.473

您必须将类文件放在一个与其包名完全相同的目录中，然后从中创建 jar 文件。

例如**com.test.me.MyActivity**必须在**com/test/me/MyActivity.class**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:10:44.513

根据您的问题，所有 *.class 文件都在`mypack/`目录中，因此发出以下命令可能会对您有所帮助。

```
dx --dex --output=classes.dex src/mypack/ 
```

`dx`将`mypack`直接从中选择所有文件。考虑阅读这个[SO question](https://stackoverflow.com/questions/15089370/unable-to-execute-java-file-through-davik-vm/15112252#15112252)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T19:18:40.390

我有相同的开发环境和相同的问题。解决方案是使用中间罐。

1.  首先用包编译类。`javac -d classes $srclist`
2.  创建中间罐子（只允许 1 个参数）`jar cf $idedir/a.jar a jar cf $idedir/b.jar b`
3.  创建可执行的dx jar `dx --dex --verbose --output=$jarfile $idedir/a.jar $idedir/b.jar`

然后 dx jar 对每个类都有正确的包

# asp.net - 不使用 SQL Server 的 ASP.Net Datagridview 分页

> ID：15085605
> 
> 赞同：0
> 
> 时间：2013-02-26T09:35:08.610
> 
> 标签：asp.net, list, entity, paging

我正在处理一个项目，其中数据来自 WCF Web 服务并采用列表格式。

首先，是否可以将该列表直接分配给数据网格视图？如果不是，那么我将该列表转换为数据集并绑定到网格，但问题是，集合列表包含数千条记录，转换为数据集会降低性能。

此外，这是与 List 或 Dataset 到 Gridview 的直接绑定，因此是否可以实现分页，包括 First、Previous、Next、Last 和 Page 集？

您的帮助将不胜感激。

预先感谢您的帮助！

达瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:41:55.187

我不认为你可以“直接”做到这一点，但不知何故，有办法。这是同一问题的问题。 [Gridview 使用通用列表作为数据源和自动生成列](https://stackoverflow.com/questions/4159287/gridview-using-a-generic-list-as-datasource-and-auto-generating-columns)

# vba - VB中的“&[Page]”是什么变量？

> ID：15085606
> 
> 赞同：3
> 
> 时间：2013-02-26T09:35:12.463
> 
> 标签：vba, environment-variables

今天我`"&[Page]"`在一些旧的 VB 代码中发现了这个表达式。它似乎保留了一个页码，以防某些文件被打印出来。我（VB 新手！）不知道这存在，但它今天确实帮助了我！所以我想知道是否还有更多这样的“隐藏”变量。我在哪里可以找到概述？

我认为这是一个“环境变量”或“系统变量”，但谷歌搜索这些似乎表明不`"&[Page]"`属于任何类别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:15:40.520

这些是**页眉和页脚元素**。
从页眉和页脚工具（来自 excel 2010 的图像）：

![页眉和页脚工具](../Images/8f70280cffe9e0334d0be621d9816a8b.png)

单击此按钮可以：

*   页码：插入`&[Page]`放入当前页码的代码。
*   页数：插入输入`&[Pages]`总页数的代码。
*   当前日期：插入放入当前日期的`&[Date]`代码。
*   当前时间：插入输入当前时间的`&[Time]`代码。
*   文件路径：插入`&[Path]&[File]`放在目录路径中的代码以及工作簿文件的名称。
*   文件名：插入`&[File]`放入工作簿文件名称的代码。
*   工作表名称：插入放入工作表名称的`&[Tab]`代码，如工作表选项卡上所示。
*   图片：插入`&[Picture]`代码以插入您从“插入图片”对话框中选择的图像，该对话框默认显示计算机上“我的图片”文件夹的内容。
*   设置图片格式：将您从“设置图片格式”对话框中选择的格式应用于`&[Picture]`您使用“插入图片”按钮输入的代码，而无需添加任何自己的代码。

# java - 如何按升序和降序对字符串格式的日期数组列表进行排序

> ID：15085608
> 
> 赞同：5
> 
> 时间：2013-02-26T09:35:20.903
> 
> 标签：java, android

我有日期数组列表，它是字符串格式，那么我该如何对这个数组列表进行排序，

```
ArrayList<String> aryBeginDate;
ArrayList<String> aryDueDate;

for (int i = 0; i < arySubject.size(); i++) {

    RowItem row = new RowItem();
    row.setSubject(arySubject.get(i).toString());
    row.setUser(aryFromUser.get(i).toString());

    if (aryBeginDate.equals(" ")) {
        row.setStartDate(" ");
    } else {
        row.setStartDate(aryBeginDate.get(i).toString()); \\Have to sort at this line
    }

    if (aryDueDate.equals(" ")) {
        row.setEndDate(" ");
    } else {
        row.setEndDate(aryDueDate.get(i).toString()); \\Have to sort at this line
    }

    aryListBean.add(row);

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T09:43:04.097

需要日期时不要使用字符串。使用日期。您应该只在显示日期时将其转换为字符串。否则，在代码中的任何地方，日期都应该是 Date 类型。这就是允许按时间顺序排序的原因，因为日期具有按时间顺序排列的自然顺序。

因此，一旦`RowItem`具有 a`startDate`和 an `endDate`，两者都是 type `Date`，您可以使用简单的比较器按开始日期对行项目列表进行排序：

```
Collections.sort(rowItems, new Comparator<RowItem>() {
    @Override
    public int compare(RowItem r1, RowItem 2) {
        return r1.getStartDate().compareTo(r2.getStartDate());
    }
}); 
```

另外，修复 if/else 块的缩进，因为你的方式真的不可读：

```
if (aryBeginDate.equals(" ")) {
    row.setStartDate(" ");
} 
else {
    row.setStartDate(aryBeginDate.get(i).toString());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-11T05:36:27.083

非常简单的答案：对于升序，只需调用此方法：

```
Collections.sort(mArrayList, new OutcomeAscComparator());
public class OutcomeAscComparator implements Comparator<Select>
    {
        public int compare(Select left, Select right) {
            return left.getOutcome().compareTo(right.getOutcome());
        }
    } 
```

选择是我的模型，降序：

```
Collections.sort(mArrayList, new OutcomeDescComparator());
public class OutcomeDescComparator implements Comparator<Select>
    {
        public int compare(Select left, Select right) {
            return right.getOutcome().compareTo(left.getOutcome());
        }
    } 
```

如果您希望列表为升序和降序，请不要忘记刷新您的列表视图

```
 mListView.invalidateViews();

                mAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:39:50.070

如果您尝试使用字符串自己对此进行排序，这将非常痛苦。我建议您将字符串解析为日期（查看 JodaTime 以获得非常方便的日期/时间工具），然后使用 java.util.Collections.sort() 进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T09:48:25.993

您可以使用 a`Comparator`对列表进行排序。像这样的东西：

```
Collections.sort(aryListBean, new Comparator<RowItem>() {
    @Override
    public int compare(RowItem r1, RowItem r2) {
        // Place your compare logic here
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:37:23.557

ArrayList 上有一个内置函数`sort()`。由于您使用的是字符串，因此这将起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T09:42:43.433

首先转换 Date 中的 String 并创建 arraylist。然后使用Collection sort 方法对arraylist 进行排序。

# c# - 消息中的 ClickEvent

> ID：15085609
> 
> 赞同：3
> 
> 时间：2013-02-26T09:35:25.247
> 
> 标签：c#, winforms, tooltip

我正在尝试编写一个`tooltip`可点击的。目前我正在考虑`usercontrol`从`IButtonControl`and派生的 a `ToolTip`。

```
public partial class JLToolTip : ToolTip, IButtonControl 
```

据我所见，它做了正常人`tooltip`应该做的一切，但如果我点击它，窗口很快就会失去焦点，直到它在半秒左右后得到它。

我想要完成的第一件事就是这个。

```
public void PerformClick()
{
    MessageBox.Show("CLICK");
} 
```

我知道它看起来很简单，但我找不到合适的解决方案或为什么它不起作用我希望你们中的任何人都有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:05:40.373

如果你想要的只是可点击和可组合的工具提示控件，我推荐[Simple Popup Control](http://www.codeproject.com/Articles/17502/Simple-Popup-Control)。您可以轻松扩展它并根据您的需要采用它。

我不完全理解你的问题，但我认为这就是你要找的。

# java - 无法从活动类调用 java 类的方法

> ID：15085617
> 
> 赞同：-2
> 
> 时间：2013-02-26T09:35:48.627
> 
> 标签：java, android

我正在制作一个短信应用程序，用户在其中输入联系人和消息，然后单击按钮 butenc。该按钮必须将可变电话号码和消息发送到另一个 java 类，其中一个方法接收数据并对其进行操作。Ecc java 文件是一个独立的 java 类，它链接到各种其他 java 类以对消息进行操作。我有时会遇到 stackoverflow 错误，当我在代码中操作一些东西时，应用程序会运行，当我单击 enc 按钮时没有任何反应，但是当我单击发送按钮时，消息被发送。我确定我在将变量传递给 Ecc 类时遇到了问题。我在操作系统上遇到了各种问题，但没有一个能解决问题。我所做的更改给出了我上面提到的任何一个问题。我该如何克服这个问题？

SMSTest.java（主要的安卓活动）

```
package com.example.smsTest;

import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Build;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

@TargetApi(Build.VERSION_CODES.DONUT)
@SuppressLint("NewApi")
public class SMSTest extends Activity 
{
    public final static String SMS_Message = "com.example.SMSTest.MESSAGE";
public final static String SMS_Phone = "com.example.SMSTest.MESSAGE";
Button btnSendSMS;
Button btnEnc;
EditText txtPhoneNo;
EditText txtMessage; 
```

电子抄送电子抄送;

```
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        
    btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
    btnEnc = (Button) findViewById(R.id.btnEnc);
    txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
    txtMessage = (EditText) findViewById(R.id.txtMessage);

    ecc=new Ecc(this);

    /*
    Intent sendIntent = new Intent(Intent.ACTION_VIEW);
    sendIntent.putExtra("sms_body", "Content of the SMS goes here..."); 
    sendIntent.setType("vnd.android-dir/mms-sms");
    startActivity(sendIntent);
    */

    btnEnc.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {               
            String phoneNo = txtPhoneNo.getText().toString(); 
            String message = txtMessage.getText().toString();
            if (phoneNo.length()>0 && message.length()>0){
                System.out.println("details verified");
                ecc.recv(phoneNo, message);    
                Toast.makeText(getBaseContext(), 
                    "Ecc started", 
                    Toast.LENGTH_SHORT).show();
            }
        });

    btnSendSMS.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {               
            String phoneNo = txtPhoneNo.getText().toString(); 
            String message = txtMessage.getText().toString();               
            if (phoneNo.length()>0 && message.length()>0)                
                sendSMS(phoneNo, message);
            else
                Toast.makeText(getBaseContext(), 
                    "Please enter both phone number and message.", 
                    Toast.LENGTH_SHORT).show();
        }
    });        
}

//---sends a SMS message to another device---
@TargetApi(Build.VERSION_CODES.DONUT)
@SuppressLint("NewApi")    
public void sendSMS(String phoneNumber, String message)
{      
    /*
    PendingIntent pi = PendingIntent.getActivity(this, 0,
            new Intent(this, test.class), 0);                
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
    */

    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic      failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @TargetApi(Build.VERSION_CODES.DONUT)
        @SuppressLint("NewApi")
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                            break;                  
            }
        }
    },new IntentFilter(DELIVERED));        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);               
    }  
} 
```

这是我的其他类（Ecc.java）

```
package com.example.smsTest;
import java.util.*;
public class Ecc{

//code
private SMSTest smsTest;

// Constructor
public Ecc(SMSTest smsTest) {
    this.smsTest = smsTest;
}

public void recv(String phn, String smsg){

/*performs manipulation on phn and msg taken 
from the main activity using various other 
java files linked with it and again sends it 
back to themaina ctivities sendSMS method*/
smsTest.sendSMS(pnh,smsg)
}

//code
} 
```

我的 main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Enter the phone number of recipient"
    />     
<EditText 
    android:id="@+id/txtPhoneNo"  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"        
    />
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"         
    android:text="Message"
    />     
<EditText 
    android:id="@+id/txtMessage"  
    android:layout_width="fill_parent" 
    android:layout_height="150px"
    android:gravity="top"         
    />

<Button
    android:id="@+id/btnEnc"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Ecc" />

<Button 
    android:id="@+id/btnSendSMS"  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:text="Send SMS"
    />

</LinearLayout> 
```

当我单击发送按钮时，消息正在发送，但是当我单击 ecc 时，ecc 类加载开始...

这是我的日志猫

```
02-26 13:04:36.337: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:36.447: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:36.447: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:36.797: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:36.797: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.077: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.117: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.247: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.247: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.318: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.391: I/Choreographer(1265): Skipped 74 frames!  The application may be doing too much work on its main thread.
02-26 13:04:37.416: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.416: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.427: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.427: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.437: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0
02-26 13:04:37.447: W/Trace(1265): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:27:03.287

当您实例化一个`Ecc`对象时，它会创建一个`SMSTest`对象，然后创建一个`Ecc`对象，该对象会创建一个`SMSTest`对象，无穷无尽。这会产生堆栈溢出。

这不可能。

你在`Ecc`课堂上需要这样的东西：

```
// Reference to the SMSTest instance
private SMSTest smsTest;

// Constructor
public Ecc(SMSTest smsTest) {
    this.smsTest = smsTest;
} 
```

在`SMSTest`, 改变

```
Ecc ecc=new Ecc(); 
```

到

```
Ecc ecc; // This variable gets initialized in onCreate() 
```

然后，在`SMSTest.onCreate()`做：

```
ecc=new Ecc(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:29:51.157

欢迎来到**StackoverFlow**！

你的方法是错误的。

活动永远不会以这种方式创建。`SMSTest smstest=new SMSTest();`

最好在创建对象时传递对此活动的引用`Ecc`，然后使用该引用来调用活动中的任何方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:14:17.020

在java类中创建静态方法并在活动中使用类名调用它。反之亦然。意思是如果你想在java类中调用活动方法然后在活动中将该方法设为静态并通过活动名称调用该方法。

# php - 文件名和编号的 PHP 正则表达式

> ID：15085620
> 
> 赞同：1
> 
> 时间：2013-02-26T09:35:59.953
> 
> 标签：php, regex

如何捕获和归档文件名

**输入：**

```
news.jpg
news_1.png
asnews_2.gif
asnews_3.jpeg
aw_news_4.jpg
aw_news.gif 
```

**输出：**

```
Array
(
[0] => Array
    (
        [0] => news
        [1] => news_1
        [2] => asnews_2
        [3] => asnews_3
        [4] => aw_news_4
        [5] => aw_news
    )

[1] => Array
    (
        [0] => 
        [1] => 1
        [2] => 2
        [3] => 3
        [4] => 4
        [5] => 
    )

[2] => Array
    (
        [0] => news
        [1] => news
        [2] => asnews
        [3] => asnews
        [4] => aw_news
        [5] => aw_news
    )

) 
```

我在 PHP 中尝试过使用**preg_match_all**和**preg_replace_callback**，但我不知道如何正确使用。

```
preg_match_all('/(?: _???_ (?:_([\d]+))?$/im', $fullname, $result);  // $fullname - string 
```

这是一个类似的例子 - **/(?:(?:_([\d]+))?(.[^.]+))$/**。你可以改变这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:45:15.360

```
$result = array (array (), array (), array ());

$dir = opendir ("/tmp");
while (($file = readdir ($dir)) !== false)
{
  if ($file == '.' || $file == '..') continue;

  $matches = array ();
  preg_match ('/^(([^.]*?)(?:_([0-9]*))?)(?:\.|$)/', $file, $matches);

  $result [0][] = $matches [1];
  $result [1][] = $matches [3];
  $result [2][] = $matches [2];
}
closedir ($dir);

print_r ($result); 
```

输出是：

```
Array
(
    [0] => Array
    (
        [0] => news
        [1] => news_1
        [2] => asnews_2
        [3] => asnews_3
        [4] => aw_news_4
        [5] => aw_news
    )

    [1] => Array
    (
        [0] =>
        [1] => 1
        [2] => 2
        [3] => 3
        [4] => 4
        [5] =>
    )

    [2] => Array
    (
        [0] => news
        [1] => news
        [2] => asnews
        [3] => asnews
        [4] => aw_news
        [5] => aw_news
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:38:01.890

在 php 中尝试`explode`函数。分解包含文件名的字符串。使用 '.' 作为爆炸分隔符并提取爆炸数组以获取文件名。

有关爆炸手册的参考，请尝试此

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:39:31.830

使用[basename()](http://www.php.net/manual/en/function.basename.php)函数检索不带扩展名的文件名。

*   [`basename()`](http://www.php.net/manual/en/function.basename.php)— 返回路径的文件名组件

# python - supervisord 事件监听器

> ID：15085623
> 
> 赞同：5
> 
> 时间：2013-02-26T09:36:14.587
> 
> 标签：python, supervisord

我正在尝试为 supervisord 配置一个事件侦听器，但无法使其工作。我只想听 PROCESS_STATE 更改并运行一些触发 urllib2request 的 python 代码。

在我的 .conf 中，我有：

```
[eventlistener:statechanges]
command=python listener.py
events=PROCESS_STATE 
```

在 listener.py 中：

```
def run():    
    runFunc() # Function to trigger an urllib2request

if __name__ == '__main__':
    run() 
```

然后触发器不会启动，它只是在重试后进入 FATAL 状态。

```
statechanges entered FATAL state, too many start retries too quickly 
```

有什么想法或有人有如何为supervisord编写监听器的例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:54:19.890

你不能只打印随机字符串，supervisord 在标准输出上监听 :)

文档中的这个例子怎么样：

```
import sys

def write_stdout(s):
    sys.stdout.write(s)
    sys.stdout.flush()

def write_stderr(s):
    sys.stderr.write(s)
    sys.stderr.flush()

def main():
    while 1:
        write_stdout('READY\n') # transition from ACKNOWLEDGED to READY
        line = sys.stdin.readline()  # read header line from stdin
        write_stderr(line) # print it out to stderr
        headers = dict([ x.split(':') for x in line.split() ])
        data = sys.stdin.read(int(headers['len'])) # read the event payload
        write_stderr(data) # print the event payload to stderr
        write_stdout('RESULT 2\nOK') # transition from READY to ACKNOWLEDGED

if __name__ == '__main__':
    main()
    import sys 
```

[http://supervisord.org/events.html#example-event-listener-implementation](http://supervisord.org/events.html#example-event-listener-implementation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T16:25:29.923

在灰中：

```
command=sh -c 'echo "READY"; while read -r line; do echo "$line"; supervisorctl shutdown; done' 
```

# ios - iOS中的上下滑动效果？

> ID：15085625
> 
> 赞同：1
> 
> 时间：2013-02-26T09:36:24.963
> 
> 标签：ios, objective-c

在我的 iOS 应用程序中，我必须像附加图像一样设计屏幕。![在此处输入图像描述](../Images/e9fa2d220b739f28e2f9c1e693e8020e.png)

当我单击“解释”部分中的“-”或“+”按钮时，它会显示/隐藏“解释”部分。

默认情况下，所有解释部分都将被隐藏（如图底部所示），如果我单击“+”按钮，它将展开视图并且按钮变为“-”，反之亦然。我在 google 上没有发现 ant 有用（可能是我正在通过 wring 关键字搜索！）任何建议或示例代码将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:48:33.003

一种解决方案可能是`UITableView`自定义`UITableViewCells`（更改高度等），其他解决方案是[插入/删除行](https://github.com/gcamp/GCRetractableSectionController)或使用可扩展部分[，如苹果示例代码](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)。

我个人会选择选项 1 并使用一些 UIGestureRecognizer

编辑：就像[JRG-Developer](https://stackoverflow.com/users/1648724/jrg-developer)现在评论你的问题一样！

# python - “没有名为 simple 的模块” login_required 已折旧

> ID：15085626
> 
> 赞同：2
> 
> 时间：2013-02-26T09:36:32.170
> 
> 标签：python, django

我想知道是否有一个方便的解决方案可以像旧版本的 django（现在使用 1.5 c1）一样实现 url 中所需的登录。

我想到了 django 大括号 mixin，但据我所知，这仅适用于类继承。或者有没有办法将它集成到网址中......（即使这不是一个好的设计模式）

```
from django.views.generic.simple import direct_to_template #fails

(r'^dashboard/$', login_required(direct_to_template), {'template': 'dashboard.html'}), 
```

返回错误：

> 没有名为 simple 的模块

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:44:04.323

基于函数的通用视图在 1.5 中被删除（[它们在 1.3 中被弃用](https://docs.djangoproject.com/en/1.4/topics/generic-views/)）。

所以那个“简单”模块不再存在。

你想做：

```
from django.views.generic import TemplateView

urlpatterns = patterns('',
    (r'^dashboard/', login_required(TemplateView.as_view(template_name="dashboard.html"))),
) 
```

# ember.js - 车把中的计算属性#如果不更新

> ID：15085632
> 
> 赞同：1
> 
> 时间：2013-02-26T09:36:53.060
> 
> 标签：ember.js

我正在尝试使用以下模板：

```
<script type="text/x-handlebars" data-template-name="login">
    {{#if logged_in}}
        Logged in
    {{else}}
        Not logged in
    {{/if}}
</script> 
```

与模型：

```
App.Login = DS.Model.extend({
    access_token: DS.attr('string'),
    logged_in: function() {
        return (this.get('access_token') != null);
    }.property('access_token')
}); 
```

显示用户的登录状态。

access_token 是通过 Route 的 setupController 中的异步回调设置的：

```
App.LoginRoute = Ember.Route.extend({
    setupController: function(controller, model) {
        controller.set('content', model);

        // call async login method
        window.setInterval(function test() {
            model.set('access_token', 'MY_ACCESS_TOKEN');
            console.log(model.get('access_token'));
        }, 5000);
    },
    model: function() {
        return App.Login.find();
    }
}); 
```

问题是logged_in 似乎永远不会改变（即使执行了model.set 行并且更新了'access_token'）。我做错了什么还是应该提交错误？

完整代码：http: [//jsfiddle.net/Q8eHq/](http://jsfiddle.net/Q8eHq/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:15:40.007

您正在设置`App.Login.find()`返回可枚举的模型，而不是单个对象。一种方法是将模型设置为单个对象：

```
App.LoginRoute = Ember.Route.extend({
    model: function() {
        return App.Login.find(1);
    }
}); 
```

或者，如果您要使用动态路由（例如 users/login/9）：

```
App.LoginRoute = Ember.Route.extend({
    model: function(params) {
        return App.Login.find(params.id);
    }
}); 
```

# c++ - C++ 中的 Glob 并打印结果

> ID：15085633
> 
> 赞同：1
> 
> 时间：2013-02-26T09:36:54.307
> 
> 标签：c++, glob, stdio

我只是想将目录中的所有内容都全局化并打印结果列表，但我得到一个空的 printf：

```
#include <glob.h>
#include <stdio.h>

int main()
{
  int result;
  glob_t buffer;
  buffer.gl_offs = 10;
  glob("*", GLOB_DOOFFS, NULL, &buffer);
  printf((char*)buffer.gl_pathv);
} 
```

工作是什么

```
printf("%i", buffer.gl_pathc)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:06:20.880

您需要在 glob 中保留空槽吗？`GLOB_DOOFFS`如果您不需要它，请不要包含它。并且不要忘记为 glob 释放内存。

尝试这样的事情：

```
#include <glob.h>
#include <stdio.h>

int main() {

    glob_t globbuf;
    int err = glob("*", 0, NULL, &globbuf);
    if(err == 0)
    {
        for (size_t i = 0; i < globbuf.gl_pathc; i++)
        {
            printf("%s\n", globbuf.gl_pathv[i]);
        }

        globfree(&globbuf);
    }

    return 0;
} 
```

# regex - 我需要帮助使用正则表达式并在冒号后提取字符串

> ID：15085639
> 
> 赞同：0
> 
> 时间：2013-02-26T09:37:24.037
> 
> 标签：regex, jscript.net

我需要一些使用正则表达式的帮助。

这是场景：

> 函数名（一个：字符串）

或者

> 函数名（a：字符串）：字符串

如果我们有返回类型的版本，我将需要冒号后面的字符串，否则我需要一个空字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:46:16.583

尝试这个 ：

```
[a-zA-Z]*\s*\)\s*:\s*([a-zA-Z]*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:47:09.853

此正则表达式可能会有所帮助：

```
\)\W+(\w+) 
```

哪里`$1`将保存返回类型的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:05:21.627

尝试以下操作：

```
matches = /\)\s*:\s*(\w*)/gi.exec("function name(a :String) : String");
retType = matches && matches.length>=2 ? matches[1] : ""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:52:32.200

后跟 : 和空格的任何单词

```
(?<=:\s)(\w+) 
```

# html - Internet Explorer 模式兼容性 - 问题

> ID：15085642
> 
> 赞同：0
> 
> 时间：2013-02-26T09:37:24.937
> 
> 标签：html, internet-explorer, internet-explorer-8, doctype

我正在使用文档类型

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

和元

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

对于 IE 8**浏览器模式**和**文档模式**，

但我得到**浏览器模式 IE9**和**文档模式 IE8**

我应该为**Browser Mode = IE8**和**Document Mode = IE8**做什么。

我对 IE 版本兼容性感到困惑。

# symfony - 在 /tmp 上生成的指南针精灵图像

> ID：15085643
> 
> 赞同：1
> 
> 时间：2013-02-26T09:37:28.927
> 
> 标签：symfony, sass, sprite, compass-sass

我们在 Symfony 2.0.10 项目中使用 Compass 0.12.2 + Sass 3.2.5。在我们的`config.yml`中，我们已经表明`http_images_path`和背景图像工作正常，但是精灵生成存在问题，我尝试使用 var：

```
images_dir: %kernel.root_dir%/../web/bundles 
```

现在，我得到了在`/tmp`文件夹上生成的精灵图像（`images_dir`是一条绝对路线，我尝试过同样的方法`image_path`，看起来更合适，但它不起作用）

*   **图像路径**
*   **生成的图像目录**
*   **生成的图像路径**
*   **sprite_load_path**

它不适用于最后四个或任何组合。在生成时，我收到错误*"image not found on /tmp/images"*。

我试图修改`project_path`to`%kernel.root_dir%`和`relative_assets`to `true`，但它也不起作用。

**简而言之**：生成的图像保留在其中，`/tmp`而不是被复制到捆绑目录中。
如何获取在从中获取原始图标的同一文件夹中生成的图像精灵？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T17:30:39.593

你有没有尝试过：

（在 app/conifg/config.yml 中）

```
assetic:
filters:
    compass:
        bin: /usr/bin/compass
        apply_to: \.scss$
        http_path: /
        images_dir: "%kernel.root_dir%/../web/images"
        generated_images_path: "%kernel.root_dir%/../web/images/generated"
        http_generated_images_path: "../web/images/generated" 
```

我将图像保存到 /web/images 放置图标以在 /web/images/icons 上生成精灵并将生成的精灵放在 /web/images/generated

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T10:54:24.647

我们最终制作了自己的 sprite.png 并通过 less 在我们的 css 上嵌入 base64 图像，这不是解决问题的方法，但它是公司可接受的解决方法。

# entity-framework - Entity Framework 5 递归关系

> ID：15085647
> 
> 赞同：0
> 
> 时间：2013-02-26T09:37:35.977
> 
> 标签：entity-framework, parent-child

```
CREATE TABLE ConfigurationItem
(  
  OID BIGINT NOT NULL
  ,ParentItemOID BIGINT 
);

ALTER TABLE ConfigurationItem ADD CONSTRAINT PK_CONFIGURATIONITEM PRIMARY KEY (OID);

ALTER TABLE ConfigurationItem ADD CONSTRAINT FK_CONFIGURATIONITEM_PARENTITEMOID FOREIGN KEY (ParentItemOID ) REFERENCES CONFIGURATIONITEM(OID); 
```

每次获取数据 ConfigurationItem 时，我都想获取父 ConfigurationItem 和子 ConfigurationItems 列表，并且没有递归。

这是创建的实体

```
[Table("ConfigurationItem", Schema = "dbo")]
public partial class ConfigurationItem : TaggableItem
{
  public Int64 OID { get; set; }
  public Int64? ParentItemOID { get; set; }

  [ForeignKey("ParentItemOID")]
  public ConfigurationItem Parent;

  [InverseProperty("ParentItemOID")]
  //Not a virtual because it is need to be marshalled via WCF
  public List<ConfigurationItem> Children { get; set; } 
} 
```

我不能让它工作。

发生以下错误示例：

```
InnerException: System.Data.SqlClient.SqlException
HResult=-2146232060
Message=Invalid column name 'ConfigurationItem_OID'.
Source=.Net SqlClient Data Provider
ErrorCode=-2146232060
Class=16
LineNumber=32
Number=207
Procedure=""
Server=localhost
State=1 
```

在实体框架中进行这项工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:05:56.040

我认为您最初的例外源于 EF 使用的默认命名约定。将 ConfigurationItem 类中的 OID 属性重命名为 Configuration_OID 或使用 OID 属性上的 Column 注释来指示您要覆盖该列的默认命名约定，例如 [Column("OID")]。

我有一个带有像这样的自引用表的模式，我发现没有必要使用 InverseProperty 注释，所以你可以摆脱它。

# java - JAXB - 未编组的字段为空

> ID：15085648
> 
> 赞同：8
> 
> 时间：2013-02-26T09:37:36.757
> 
> 标签：java, xml, jaxb

我们正在整理来自[http://xmlgw.companieshouse.gov.uk/](http://xmlgw.companieshouse.gov.uk/)的回复。这是发给马歇尔的文本：

```
<NameSearch xmlns="http://xmlgw.companieshouse.gov.uk/v1-0/schema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlgw.companieshouse.gov.uk/v1-0/schema http://xmlgw.companieshouse.gov.uk/v1-0/schema/NameSearch.xsd">
  <ContinuationKey>...</ContinuationKey>
  <RegressionKey>...</RegressionKey>
  <SearchRows>20</SearchRows>
  <CoSearchItem>
    <CompanyName>COMPANY NAME</CompanyName>
    <CompanyNumber>23546457</CompanyNumber>
    <DataSet>LIVE</DataSet>
    <CompanyIndexStatus>DISSOLVED</CompanyIndexStatus>
    <CompanyDate></CompanyDate>
  </CoSearchItem>
  // more CoSearchItem elements
</NameSearch> 
```

CoSearchItem 的模型是这样的：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "CoSearchItem", propOrder = {
    "companyName",
    "companyNumber",
    "dataSet",
    "companyIndexStatus",
    "companyDate",
    "searchMatch"
})
public class CoSearchItem {

    @XmlElement(name = "CompanyName", required = true)
    protected String companyName;
    @XmlElement(name = "CompanyNumber", required = true)
    protected String companyNumber;
    @XmlElement(name = "DataSet", required = true)
    protected String dataSet;
    @XmlElement(name = "CompanyIndexStatus")
    protected String companyIndexStatus;
    @XmlElement(name = "CompanyDate")
    @XmlSchemaType(name = "date")
    protected XMLGregorianCalendar companyDate;
    @XmlElement(name = "SearchMatch")
    protected String searchMatch;

    // getters and setters

} 
```

NameSearch 模型具有以下结构：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "NameSearch", namespace = "http://xmlgw.companieshouse.gov.uk/v1-0/schema", propOrder = {
    "continuationKey",
    "regressionKey",
    "searchRows",
    "coSearchItem"
})
@XmlRootElement(name = "NameSearch", namespace = "http://xmlgw.companieshouse.gov.uk/v1-0/schema")
public class NameSearch {

    @XmlElement(name = "ContinuationKey", required = true)
    protected String continuationKey;
    @XmlElement(name = "RegressionKey", required = true)
    protected String regressionKey;
    @XmlElement(name = "SearchRows", required = true)
    protected BigInteger searchRows;
    @XmlElement(name = "CoSearchItem")
    protected List<CoSearchItem> coSearchItem;

    // setters and getters

} 
```

该包具有以下注释：

```
@XmlSchema(namespace = "http://xmlgw.companieshouse.gov.uk/v1-0", elementFormDefault = XmlNsForm.QUALIFIED, //
    xmlns = {
        @XmlNs(prefix = "xsi", namespaceURI = "http://www.w3.org/2001/XMLSchema-instance") 
     }
)

package uk.gov.companieshouse; 
```

解组是从第一个`Node`从较大的项目列表中提取`Document`的`any`。但是，当我们解析 xml 时，CoSearchItem 中的所有字段都设置为 null 并且无法找出原因。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T09:59:03.477

您需要使用包级别的`@XmlSchema`注释来指定模型的命名空间限定。

```
@XmlSchema(
    namespace = "http://xmlgw.companieshouse.gov.uk/v1-0/schema",
    elementFormDefault = XmlNsForm.QUALIFIED)
package example;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

这指定了您不需要在您的`@XmlRootElement`类上指定命名空间 URI 。`@XmlType``NameSearch`

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

* * *

> 解组是从从较大文档中提取的第一个节点完成的，在任何项目列表中。

确保用于创建节点的 DOM parer 是命名空间感知的。

```
documentBuilderFactory.setNamespaceAware(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:11:00.823

感谢[@Blaise Doughan](https://stackoverflow.com/users/383861/blaise-doughan) ，我找到了正确答案。查看包命名空间限定后，我发现它指向：

```
"http://xmlgw.companieshouse.gov.uk/v1-0" 
```

它应该指向：

```
"http://xmlgw.companieshouse.gov.uk/v1-0/schema" 
```

不知道那是怎么放错地方的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-07T21:58:01.363

我通过`elementFormDefault="unqualified"`在生成存根之前在 xsd 中解决了这个问题，否则在 package-info.java 中手动进行更改

# sharepoint - Web 服务的 SharePoint 2010 默认代理设置绕过列表

> ID：15085651
> 
> 赞同：0
> 
> 时间：2013-02-26T09:37:46.107
> 
> 标签：sharepoint, sharepoint-2010

情况是这样的：

*   拥有一台 WFE 和一台 APP 服务器的农场。WFE 托管所有站点，APP-server 托管所有 SharePoint Web 服务。服务器名称：SPWFE01 和 SPAPP01
*   WFE 可以通过代理连接到互联网。
*   应该绕过 Web 服务，因此不通过代理调用

因此，我将 web.config 配置如下：

```
<system.net>
    <defaultProxy>
        <proxy usesystemdefaults="false" proxyaddress="http://proxy"     bypassonlocal="false" />
        <bypasslist>
            <add address="spwfe01"/>
            <add address="spapp01"/>
            <add address="139\.156\..*"/> <!-- IP-address range of Farm -->
            <add address="10\.246\..*"/> <!-- backup IP-address range of Farm -->
        </bypasslist>            
   </defaultProxy> 
</system.net> 
```

但是，当我从后面的代码调用 UPA 时，会出现空引用异常。当我删除上述配置时，一切都按预期工作。因此，尽管有旁路列表，但 Web 服务调用是通过代理进行的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:40:12.870

好的，通过删除 usesystemdefaults-attribute 来修复它...

根据 MSDN：

usesystemdefault 指定是否使用 Internet Explorer 代理设置。如果设置为 true，后续属性将覆盖 Internet Explorer 代理设置。默认值未指定。

因此，现在它是“未指定的”。我不知道布尔值的未指定是什么，但它有效......

# android - Android：有没有办法检测任何用户输入？

> ID：15085652
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:37:47.180
> 
> 标签：android

在安卓上！我需要获取用户输入（触摸事件、键盘事件）。有什么办法吗？在java代码中，似乎没有办法。原生代码呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:39:05.483

```
In java code, It seems there is no way. 
```

=> 抱歉，有一种方法可以检测用户所做的任何操作并使用应用程序。

一些例子：

1.  [KeyboardView.OnKeyboardActionListener](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.OnKeyboardActionListener.html)
2.  [响应触摸事件](http://developer.android.com/training/graphics/opengl/touch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:43:43.170

其实我不知道你到底是什么意思。您是指在 EditText 上输入文本还是在一般情况下触摸某些东西？

如果你的意思是文本，你可以使用 TextWatcher [http://developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

如果您的意思是直接在 View 上，您可以使用上面提到的 OnTouchListener。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T18:33:57.500

[https://developer.android.com/reference/android/app/Activity.html#onUserInteraction()](https://developer.android.com/reference/android/app/Activity.html#onUserInteraction())

`Activity`

`public void onUserInteraction ()`

> 在 API 级别 3 中添加 每当将键、触摸或轨迹球事件分派到 Activity 时调用。如果您希望知道用户在您的活动运行时以某种方式与设备进行了交互，请实施此方法。这个回调和 onUserLeaveHint() 旨在帮助活动智能地管理状态栏通知；具体来说，用于帮助活动确定取消通知的适当时间。
> 
> 对活动的 onUserLeaveHint() 回调的所有调用都将伴随对 onUserInteraction() 的调用。这可以确保您的活动将被告知相关的用户活动，例如下拉通知窗格并触摸那里的项目。
> 
> 请注意，此回调将为开始触摸手势的触摸动作调用，但可能不会为随后的触摸移动和触摸动作调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:40:07.147

触摸你可以使用

```
mView.setOnTouchListener(new OnTouchListener() {
@Override
public boolean onTouch(View v, MotionEvent event) {
    //show dialog here
    return false;
 }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:42:21.500

如果您的 YourActivity 实现 OnTouchListener 您可以获得事件以及用户在屏幕上触摸的位置：

```
 public class YourActivity extends Activity implements OnTouchListener {

     @Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
     System.out.println("I touched: "+event.getX()+"-"+event.getY());
 }

} 
```

# java - Java.lang.Integer 类型的值 0 无法转换为 JSONObject

> ID：15085659
> 
> 赞同：1
> 
> 时间：2013-02-26T09:38:00.830
> 
> 标签：java, android, json

我正在尝试为我的应用程序执行此代码：

```
JSONObject json = jsonParser.makeHttpRequest(url_kickit_connect,
                    "POST", params);

            // check log cat for response
            Log.d("Create Response", json.toString());

            try {
                int response = json.getInt(TAG_RESPONSE);
                if (response == 0){
                Toast.makeText(getApplicationContext(), "email " +mail , Toast.LENGTH_SHORT).show();
                }

                }

                catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

在获取 0 作为返回值时，0 应该在这段代码中被解析为 jsonobject（上面我做了标准的 Httppost 和 Stringbuilder）：

```
try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        } 
```

我从 MySQL 端获得的 JSON 值（.php）：

```
else
{
    $response = 0;
    echo json_encode($response);
} 
```

但我在 Logcat 中收到此错误：

```
02-26 09:24:14.920: E/JSON Parser(619): Error parsing data org.json.JSONException: Value 0 of type java.lang.Integer cannot be converted to JSONObject 
```

如果我尝试将值或数据类型更改为字符串等。错误消息只会更改为告知的值或数据类型。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:46:08.363

0 不是有效的 json。`{"response": 0}`对于这种情况，服务器应该返回类似的东西

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-12T09:58:29.407

要将响应作为 JSON 发送，请将其添加到 php/mysql 端

```
else {
    //creates an array
    $result = array();
    //adds a json node for response
    $result['response'] = 0;
    //encode and echo out
    echo json_encode($result);
} 
```

# c# - 传递给 WebApi 的 JQuery 值始终为空

> ID：15085670
> 
> 赞同：1
> 
> 时间：2013-02-26T09:38:39.197
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-web-api

我在使用 Web Api 时遇到了问题，希望这里有人可以帮助我。

我有一个jQuery方法如下......

```
 function OnInsert(evt) {
        var truckId = $("#txtTruckId").val();
        var truckReg = $("#txtTruckReg").val();
        var description = $("#txtDescription").val();
        var condition = $("#txtCondition").val();
        var data = '{"obj":{"TruckId":"' + truckId + '","Reg":"' + truckReg +
                   '","Description":"' + description + '","Condition":"' + condition + '"}}';
        var json = JSON.stringify(data)

        $.ajax({
            url: '/api/Values',
            cache: false,
            type: 'POST',
            data: json,
            dataType: 'json',
            success: function (results) {
                $("#txtTruckId").val('');
                $("#txtTruckReg").val('');
                $("#txtDescription").val('');
                $("#txtCondition").val('');
                $.getJSON("api/Values", LoadCustomers);
                alert('Truck Added !');
            }
        })
    } 
```

当我调试“数据”变量成功捕获数据时。

然后我在我的 WebApi 控制器中有一个函数......

```
 // POST api/values
    public void Post(TruckInfo obj)
    {
        WebApiTestEntities db = new WebApiTestEntities();

        db.TruckInfoes.Add(obj);
        db.SaveChanges();
    } 
```

但是，当我调试时，所有参数都显示为空值。

我找到了这个：

[http://kennytordeur.blogspot.co.uk/2012/12/web-api-passing-complex-type-in​​-json.html](http://kennytordeur.blogspot.co.uk/2012/12/web-api-passing-complex-type-in-json.html)

哪些状态我需要 Global.asax 中的以下代码行，但没有奏效。

```
ValueProviderFactories.Factories.Add(new JsonValueProviderFactory()); 
```

我还发现了这个答案，但是在尝试更改我的代码之后，看起来他们编写的代码仍然无法正常工作。

[jQuery 将 null 而不是 JSON 发布到 ASP.NET Web API](https://stackoverflow.com/questions/14779679/web-api-and-jquery-json-post-null-value)

有人能帮忙吗？

提前致谢

莱克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:42:05.190

首先修复您的 JSON：

```
var data = {
    truckId: truckId, 
    reg: truckReg, 
    description: description, 
    condition: condition
};
var json = JSON.stringify(data); 
```

然后确保您指定正确的内容类型请求标头：

```
$.ajax({
    url: '/api/Values',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: json,
    success: function (results) {
        $("#txtTruckId").val('');
        $("#txtTruckReg").val('');
        $("#txtDescription").val('');
        $("#txtCondition").val('');
        $.getJSON("api/Values", LoadCustomers);
        alert('Truck Added !');
    }
}); 
```

> 我找到了这个：
> 
> [http://kennytordeur.blogspot.co.uk/2012/12/web-api-passing-complex-type-in​​-json.html](http://kennytordeur.blogspot.co.uk/2012/12/web-api-passing-complex-type-in-json.html)
> 
> 哪些状态我需要 Global.asax 中的以下代码行，但没有奏效。

不不不。没有必要，只要您正确格式化 JSON 请求，Web API 会将其绑定到您的模型。

# javascript - 如何在 jQuery 中完成加载后立即正确关闭窗口？

> ID：15085675
> 
> 赞同：2
> 
> 时间：2013-02-26T09:38:51.093
> 
> 标签：javascript, jquery, window

这个问题不是关于`jQuery.fn.ready()`.

我打开一个`window.open()`用于文件下载的新窗口，并希望在下载开始后关闭该窗口。大多数浏览器会继续下载文件，所以我不需要等到下载完成。

问题是当我关闭窗口时`jQuery.fn.ready()`，文件下载被立即跳过。

这是我尝试但失败的方法：

```
var w = window.open(...);

$(w).load(); // failed
$(w.document).load(); // failed
$(w.document).contents().load(); // failed
$(w.document).contents().find('body').load(); // failed 
```

**编辑：**

添加 jsFiddle 以方便演示：http: [//jsfiddle.net/vicary/Yjkt8/1](http://jsfiddle.net/vicary/Yjkt8/1)

**编辑2：**

根据 Jonny Sooter 的回答，使用工作版本[http://jsfiddle.net/vicary/Yjkt8/4](http://jsfiddle.net/vicary/Yjkt8/4)更新了 jsFiddle 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:00:37.293

如果你知道下载时间，你可以试试这个。

```
jQuery(window).load(function () {
    alert('page is loaded');

    setTimeout(function () {
        alert('page is loaded and 1 minute has passed');   
    }, 60000);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:24:06.820

```
$(function() {
    $('button').click(function() {
        var w = window.open(),
            d = w.document,
            s = d.createElement("script");

        s.type = "text/javascript";
        s.innerHTML = ";(function(){window.close();})();";

        d.getElementsByTagName("head")[0].appendChild(s);
    });
}); 
```

**更新：**

对于 chrome，您可以尝试：

```
window.open('', '_self', ''); //bug fix
window.close(); 
```

或尝试：

```
window.self.close(); 
```

# c# - Exchange Server 2010 无法在 Visual Studio 2010 中使用 ExchangeServiceBinding 代理类

> ID：15085676
> 
> 赞同：1
> 
> 时间：2013-02-26T09:38:51.710
> 
> 标签：c#, visual-studio-2010, windows-phone-7, windows-8, exchange-server

目前我正在开发需要从 Exchange server 2010 获取数据的应用程序。如果我在 Visual Studio 2010 中使用 URL“ [https://mail.test.com/ews/exchange.asmx](https://mail.test.com/ews/exchange.asmx) ”添加服务引用，服务引用正在生成“ExchangeServiceBinding”当我从浏览器中查看时。但我无法将其用作对象。如何进行此操作？而且由于我在 Windows 8 Metro 和 Wp7 中执行此操作，因此我无法使用托管 api dll。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:00:48.557

据我所知，您无法在 Windows Phone 7 中执行此操作。您需要创建一个*可以*连接到 Exchange 的代理 Web 服务，然后将该服务用作 REST 端点。

查看[Telerik 的教程，](http://www.telerik.com/products/windows-phone/getting-started/exchange-client.aspx)了解如何做到这一点，他们的 Tasks 应用程序需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:45:23.533

您可以使用生肥皂电话。这是入门的好链接 [http://blogs.msdn.com/b/emeamsgdev/archive/2011/09/13/soap-test-application.aspx](http://blogs.msdn.com/b/emeamsgdev/archive/2011/09/13/soap-test-application.aspx) [http://msdn.microsoft.com/en-us/图书馆/cc500285.aspx](http://msdn.microsoft.com/en-us/library/cc500285.aspx)

# php - 使用jquery表单插件上传文件失败

> ID：15085680
> 
> 赞同：0
> 
> 时间：2013-02-26T09:38:54.390
> 
> 标签：php, jquery, ajax, forms, jquery-plugins

我正在尝试将图像与其他表单数据一起上传到我的数据库。我现在有以下表格：

```
<form method="post" action="newproduct.php" id="newproduct"  enctype="multipart/form-data" >
<table>
<tr>
    <td><label for="productName">Product Name:</label></td>
    <td>
        <input type="text" name='productName' id='productName' />

    </td>
</tr>
<tr>
    <td><label for="productNumber">Product Number:</label></td>
    <td>
        <input type="text" name='productNumber' id='productNumber' />

    </td>
</tr>

<tr>
    <td><label for="sflf"> SF / LF: </label></td>
    <td>
        <input type="text" name="sflf" id="sflf" />
    </td>
</tr>

<tr>
    <td><label for="file" >Image:</label></td>
    <td>
        <input type="file" name="file" id="file" />
    </td>
</tr>

</table>  
</form> 
```

我正在使用以下 jquery 脚本将数据发送到我的 newproduct.php 文件：

```
 var options = {
            target: '#message', 
            url:'newproduct.php', 
            beforeSubmit: function() {$('#uploader').html('<img src="loader.gif" border="0" />');},
            success:  function() {$('#uploader').html('New Product Was Successfully Added');}
             };

var newProductDialog = $("#addProductDiv").dialog({
                                            autoOpen: false,
                                            title: "Add New Product",
                                            modal: true,
                                            width: 500,
                                            show:  { effect: 'drop',direction:"up",duration:1000 },
                                            hide:  { effect: 'drop',direction:"down",duration:1000 }, 
                                            buttons: {
                                                'Add':function() {
                                                    //submitNewProduct($("#newproduct"));
                                                    $("#newproduct").ajaxSubmit(options);
                                                    return false;
                                                    },
                                                'Cancel':function() {
                                                    $(this).dialog('close');
                                                        $("#container").fadeTo('slow',1);
                                                    }
                                            }
                                         });
$("#loadNewProduct").click(function() {
    newProductDialog.dialog('open');
    $("#container").fadeTo('slow',.4);

    return false;
}); 
```

这是我的 newproduct.php 的样子：

```
include("../includes/database.php");

$path = "../images/";
$valid_formats = array("jpg", "png", "gif", "bmp");

if(isset($_POST))
{
$productNo = isset($_POST['productNumber']) ? $_POST['productNumber'] : "";
$productName = isset($_POST['productName']) ? $_POST['productName'] : "";
$sflf = isset($_POST['sflf']) ? $_POST['sflf'] : "";    

$name = $_FILES['file']['name']; 
$size = $_FILES['file']['size'];

if(strlen($name))
{
    list($txt, $ext) = explode(".", $name);
    if(in_array($ext,$valid_formats))
    {
        if($size<(2048*2048))
            {
                $tmp = $_FILES['file']['tmp_name'];
                if(move_uploaded_file($tmp, $path.$name))
                {
                    $sql= "insert into inventory (productName,sfLf,image,time,productNo) values      
                           ('{$productName}','{$sflf}','{$name}',now(),'{$productNo}')";
                    $database->query($sql) or die(mysql_error()."Database Failed")
                }
                else echo "There Was A Problem Adding Your Product. Please Try Again"
            }
            else echo "Size Cannot Exceed 2 MB";
    }
    else echo "Invalid File Format";
}
} 
```

但是，我不断收到 500 内部服务器错误，所以我知道我的 newproduct.php 有一些我无法解决的问题。

编辑：

在调试了我的 newproduct.php 之后，我发现 move_uploaded_file() 函数会导致这个错误，并且由于某种原因它无法上传文件。现在可能出了什么问题？

# jsf - icefaces 文件入口

> ID：15085682
> 
> 赞同：0
> 
> 时间：2013-02-26T09:38:59.090
> 
> 标签：jsf, icefaces

我正在使用 ace:fileEntry 并且有两个问题：

1.  我正在尝试更改样式，以便输入文件的区域（显示文件名的位置）会更大。我怎样才能做到这一点？

2.  我的组件工作正常，但组件 fileEntryListener 上有错误消息，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:57:19.647

我找到了如何更改大小。

Icefaces 忘记将 'size' 属性添加到 ace:fileEntry 组件，

所以我们必须使用 javaScript 插入它。

```
function openFilePanel() 
{
     // find the component in the document
     var nodeList = document.getElementsByTagName("input");
     for(var i=0 ; i< nodeList.length;i++)
     {
         var  item =  nodeList[i];
         if(item.getAttribute("type") == "file") 
         { //  create and set the 'size' attribute  
             item.setAttribute("size", "70");
            }
        }

} 
```

如果您使用不止一个 ace:fileEntry 组件，您必须找到它创建的不同的“输入”。

# gwt - 在组合中传递自定义数据类型列表

> ID：15085686
> 
> 赞同：0
> 
> 时间：2013-02-26T09:39:13.933
> 
> 标签：gwt, liferay, composite

我创建了一个复合材料，它有两种方法

*   public void intItem(List dataList) //可以采用原始数据类型
*   public void vipInfoDataList(List dataList) // 可以采用自定义数据类型，例如：PlxVipInfo

[注意：我在复合剪切文件夹中定义“PlxVipInfo”数据类型并在复合类中导入] 然后我将复合作为 jar 并放入我的 protlet。然后调用这两个方法：

```
List<Integer> myCoords = new ArrayList<Integer>();
myCoords.add(10);
myCoords.add(20);

CommonWidget mycomposite = new CommonWidget();
//mycomposite.intItem(myCoords);[**Note: when i call it gives data**]
mycomposite.vipInfoDataList(vips);[**Note: when i call it gives error**] 
```

错误是：

```
compile-java:
[javac] Compiling 1 source file to /home/bglobal/liferay-sdk/portlets/customer-common-gridview-portlet/docroot/WEB-INF/classes
[javac] /home/bglobal/liferay-sdk/portlets/customer-common-gridview-portlet/docroot/WEB-INF/src/com/prolexic/portlet/proxy/client/PlxProxyServiceEntryPoint.java:174: vipInfoDataList(java.util.List<com.prolexic.composite.shared.PlxVipInfo>) in com.prolexic.composite.client.CommonWidget cannot be applied to (java.util.List<com.prolexic.portlet.proxy.shared.PlxVipInfo>)
[javac]                     mycomposite.vipInfoDataList(vips);
[javac]                                ^
[javac] Note: /home/bglobal/liferay-sdk/portlets/customer-common-gridview-portlet/docroot/WEB-INF/src/com/prolexic/portlet/proxy/client/PlxProxyServiceEntryPoint.java uses or overrides a deprecated API.
[javac] Note: Recompile with -Xlint:deprecation for details.
[javac] 1 error 
```

现在我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:37:45.213

ERROR 明确表示，自定义类型`PlxVipInfo passing through vipInfoDataList() method and the one declared are diffrent`。

它们是 2 个不同的类，一个在包中`com.prolexic.composite.shared`，另一个在`com.prolexic.portlet.proxy.shared`.

因此，在这两个地方，同时作为参数传递并声明方法使用相同类型的 com.prolexic.composite.shared.PlxVipInfo 或 com.prolexic.portlet.proxy.shared.PlxVipInfo 如下代码片段 -

```
vipInfoDataList(java.util.List<com.prolexic.composite.shared.PlxVipInfo>);

public void vipInfoDataList(java.util.List<com.prolexic.composite.shared.PlxVipInfo>)
{
} 
```

或者

```
vipInfoDataList(java.util.List<com.prolexic.portlet.proxy.shared.PlxVipInfo>);

public void vipInfoDataList(java.util.List<com.prolexic.portlet.proxy.shared.PlxVipInfo>)
{
} 
```

# html - 在 CSS 中选择特定元素

> ID：15085688
> 
> 赞同：3
> 
> 时间：2013-02-26T09:39:21.707
> 
> 标签：html, css

很抱歉，非常通用的帖子标题。但我在这里追求的是：

```
<div id="my-div">
   <span>
      <a href="#">link 1</a>
      <a href="#">link 2</a>
   </span>
   <a href="#">link 3</a>
</div> 
```

如何在 CSS 中选择“链接 3”？**根本**没有编辑那个 Html 。这是呈现的 html，我需要选择链接 3，而不选择链接 1 和 2。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T09:44:30.820

你发布的字面意思是“找到任何在他们父母`a`内部`div#my-div`并且是他们父母的直接孩子的人。”

采用

```
div#my-div > a 
```

使用将`>`描述更改为：“找到任何你想要`a`的”的直接后代。`div#my-div`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T09:42:09.560

使用以下 CSS 选择器：

```
div>a 
```

或者

```
#my-div>a 
```

这将选择任何`a`div 的直接后代，或 ID 为“my-div”的元素（以最适合您的为准）。

例如

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        div>a 
        {
            color:Red;
        }

        #my-div>a 
        {
            color:Blue;
        }
    </style>
</head>
<body>
    <div id="my-div">
   <span>
      <a href="#">link 1</a>
      <a href="#">link 2</a>
   </span>
   <a href="#">link 3 (this will be blue as per CSS)</a>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T09:42:50.063

试试这个

```
#my-div > a {
    color:red
} 
```

**[演示](http://jsfiddle.net/XJm7D/)**

此符号的目标元素是父元素的直接子元素。

**[在此处](http://userinterfacehome.blogspot.in/2012/11/css-selectors.html)**查看更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T09:40:55.087

```
#my-div>a{
  background: red;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T10:05:55.780

```
#my-div span + a {
    font-size: 12px;
    line-height: 18px;
} 
```

在这种特定情况下，我建议使用相邻选择器。使用直接子选择器“>”也可以，但是您会产生潜在的陷阱，即如果在其后直接添加另一个链接（即链接#4），则该链接也将继承这些样式。相邻选择器确保仅选择链接 #3，即使稍后添加更多元素也是如此。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T10:10:15.860

在 CSS 中使用相邻兄弟选择器非常容易。

在您的情况下，您可以使用选择链接 3，

```
#my-div + a + a {
/* your CSS Rule */
} 
```

可以从 w3c[**相邻选择器获得更多信息**](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)

# c# - 如何在 Windows 商店应用程序和后台任务之间共享数据？

> ID：15085695
> 
> 赞同：1
> 
> 时间：2013-02-26T09:39:32.863
> 
> 标签：c#, windows-8, windows-runtime

我正在创建一个使用谷歌服务的 Windows 商店客户端。我添加了一个后台任务（作为 Windows 运行时组件）以每 30 分钟更新一次应用程序动态磁贴。问题是，我需要进行需要令牌的网络调用。令牌在 Windows 应用商店应用的全局变量和设置中可用。如何从后台任务访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:49:07.327

UI 应用和后台任务不能共享内存。他们可以共享数据的唯一方法是通过**ApplicationData.Current.LocalFolder**将其写入应用程序存储。但是，该位置并不安全，您不应在此处写入令牌或密钥等敏感信息。

我建议将令牌嵌入到后台任务项目中，就像在 UI 项目中嵌入它一样（通常作为资源或代码常量）。

# apache - 使用 RewriteCond 将标志与通配符结合起来？

> ID：15085698
> 
> 赞同：0
> 
> 时间：2013-02-26T09:39:44.883
> 
> 标签：apache, .htaccess, mod-rewrite

我尝试了解一些基本的重写内容，所以我发现的是：

```
RewriteCond %{HTTP_HOST} ^example.(.+)$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

和：

```
RewriteCond %{HTTP_HOST} ^(www2.example.de|example.de)$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

但是如果我把它结合起来

```
RewriteCond %{HTTP_HOST} ^(www2.example|example).(.+)$ [NC] 
```

由于重定向过多，我收到内部服务器错误。

那么我如何结合或不结合 www 和不同的域结尾：

```
RewriteCond %{HTTP_HOST} ^example.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.example.name$ [NC,OR]
RewriteCond %{HTTP_HOST} ^example.name$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.example.de$ [NC,OR]
RewriteCond %{HTTP_HOST} ^example.de$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

我认为这应该很简单，但我就是不明白...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:56:33.077

这五个代码可以组合成一个，如下所示：

```
RewriteCond %{HTTP_HOST} ^example\.com$               [NC,OR]
RewriteCond %{HTTP_HOST} (?:www\.)?example\.(name|de) [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

# javascript - 如何将 QUnit 测试集成到 Yii

> ID：15085703
> 
> 赞同：5
> 
> 时间：2013-02-26T09:40:06.480
> 
> 标签：javascript, unit-testing, testing, yii, qunit

我有一个 Yii 项目，它开始更多地依赖 javascript 来进行很多操作。

为了达到不错的测试覆盖率，我想使用 QUnit 来测试 javascript。大部分 javascript 依赖于 ajax 调用来从模型中获取数据（例如，下拉列表中的项目列表）。

我希望能够在运行 QUnit 测试之前使用我的 Yii 固定装置将数据库设置为已知状态 - 有谁知道实现这一点的方法吗？或者任何人都可以推荐另一个适用于 Yii 的 javascript 单元测试框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:20:38.970

我会看看金星（www.venusjs.org）。它可以与 QUnit（和其他测试库）一起使用，并且可能会为您提供与您正在寻找的东西相近的东西。如果您有任何问题，我很乐意与您合作。免责声明：我是金星的创造者。

# ajax - JSF Ajax 重置以前呈现的输入组件值？

> ID：15085705
> 
> 赞同：3
> 
> 时间：2013-02-26T09:40:07.173
> 
> 标签：ajax, jsf

我对 JSF 和 ajax 有一个小（但很重要）的问题。表格在这里：

```
 <h:form>
        <h:panelGrid id="pg1" columns="2">

            <h:outputText value="Type: "/>

            <h:selectOneMenu id="selectOne" value="#{personBean.type}">
                <f:selectItems value="#{listBean.personTypes}"/>
                <f:ajax event="valueChange" render="pg2"/>
            </h:selectOneMenu> 

        </h:panelGrid>

        <h:panelGrid id="pg2" columns="2">

            <h:outputText value="Really bad?" rendered="#{personBean.type=='BAD'}"/>

            <h:selectBooleanCheckbox id="checkbox" value="#{personBean.reallyBad}" rendered="#{personBean.type=='BAD'}">
                <f:ajax event="click"/>
            </h:selectBooleanCheckbox>

        </h:panelGrid>

        <h:commandButton value="Ajax Submit" action="#{personBean.printValues}">
            <f:ajax execute="@form"/>
        </h:commandButton>
    </h:form> 
```

PersonBean 是一个简单的 bean，它有一个枚举 PersonType，它有两个值：NICE、BAD 和一个名为 realBad 的布尔值。ListBean 返回列表中的枚举值以填充 selectOneMenu。

基本上，当我选择 BAD 时，会呈现布尔复选框的面板，我可以在其中打勾以表示一个人真的很糟糕。如果我愿意，我可以提交表格。问题是当我勾选复选框然后再次选择 NICE 时，即使未呈现复选框，它仍会被勾选。所以当我提交我的表格时，这个人可能很好，也很糟糕，这没有任何意义。

与其必须再次选择不好的方法来取消选中框，不如是我可以将复选框及其输入值重置为false时的一种方式吗？我对 JSF 的 ajax 有点陌生！谢谢。

附言。我正在使用 commandButtons 操作在提交时打印两个输入的值以验证结果...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:12:41.520

更改菜单时需要手动清除复选框。

```
<f:ajax listener="#{personBean.setReallyBad(false)}" render="pg2" /> 
```

顺便说一句，`<f:ajax event>`您在代码中的两个值已经是默认值。只是省略它们。

# events - 如何在 Google Analytics 中查看哪个设备点击了我的跟踪事件？

> ID：15085706
> 
> 赞同：2
> 
> 时间：2013-02-26T09:40:11.327
> 
> 标签：events, seo, google-analytics

在我的 Google 分析帐户中，我正在使用 GA 事件跟踪我网站上的一些`_gaq.push`事件。GA 跟踪报告显示点击的事件总数，但不显示点击该事件的设备。即使在 GA->Audience->Mobile->Devices 部分也只显示哪些设备访问了该页面，但它不会报告哪个设备点击了该事件。

基本上我需要将 trackevent 分类为 PC 和移动点击。我知道这可以通过 php 来完成，如果此点击来自 mobie 站点，则将一些文本附加到 trackevent。例如：

```
<?php
  if($mobileSite){
    _gaq.push(['_trackEvent', 'category', 'action', 'opt_label_m', opt_value_m]);
  }else{
    _gaq.push(['_trackEvent', 'category', 'action', 'opt_label', opt_value]);
  }

?> 
```

我需要知道 GA 是否已经在做这项工作来跟踪事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:38:27.283

“高级细分”具有预定义的“移动流量”细分。如果您应用它并查看您的事件报告，您将只看到由移动设备触发的事件（同样，您可以创建一个“非移动流量”细分并应用这两个细分，从而为您提供两者之间的比较视图）。

**更新添加**

您可以创建自定义报告以满足您的需要：

自定义->新建自定义报告->维度“移动设备品牌”（或“设备营销名称”或“设备型号”）->指标：事件值->过滤“事件标签”（或“事件类别）->保存。

所以不是标准报告，但有可能。

# c# - HTTP连接池可能吗？

> ID：15085708
> 
> 赞同：9
> 
> 时间：2013-02-26T09:40:18.210
> 
> 标签：c#, httpwebrequest, connection-pooling

对于联系一组有限的其他服务器的 C# web 服务，我希望为每个我希望能够联系的服务器创建 1 个 HTTP 连接池。

课程的基本概念：

*   每个池应该打开几个连接（3 个连接？）到其远程网络服务器，并保持这些连接处于活动状态。
*   应该使用 max-time-to-life 来回收（断开/重新连接）与远程 Web 服务器的连接，防止远程 Web 服务器在我们这样做之前断开连接。
*   不应同时创建连接，而是在 3 个连接之间稍作停顿，因此回收也不会同时发生。
*   如果远程网络服务器仍然意外断开连接，则应注意并重新连接。
*   如果由于某种原因无法重新连接，则应在稍作停顿后重试。

这样，当我想发送一个 HttpWebRequest 时，我就有了现成的连接，节省了在我想使用它的那一刻建立连接的时间。

目前我不知道这是否是 HttpWebRequest 的默认功能。很抱歉，如果我要求显而易见。谷歌搜索只会让我对 Java 提出类似的问题。

问题 1：.NET/c# 中是否存在这样的东西？

问题 2：如果没有，您知道互联网上有关于此礼物的资源吗？

问题3：如果没有，如何自己建造一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:52:57.490

*HttpWebRequest（本质上意味着 .net 中的所有 Http API）已经默认*使用连接池。

如果您需要管理连接池的任何参数，请查看[ServicePoint](http://msdn.microsoft.com/en-us/library/system.net.servicepoint.aspx)和[ServicePointManager类。](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.aspx)

# java - Liferay 以编程方式设置页面布局权限

> ID：15085715
> 
> 赞同：2
> 
> 时间：2013-02-26T09:40:51.483
> 
> 标签：java, liferay, liferay-6

我的要求是我必须以编程方式创建组织页面并为其设置权限。到目前为止，我创建了组织公共页面

```
layout = LayoutLocalServiceUtil.addLayout(_defaultUserId, _groupId, PRIVATE_LAYOUT, PARENT_LAYOUT_ID, pageSetting.name, pageSetting.title, description, TYPE, pageSetting.hidden, pageSetting.url, serviceContext);
LayoutLocalServiceUtil.updateLayout(layout.getGroupId(), layout.isPrivateLayout(), layout.getLayoutId(), layout.getTypeSettings()); 
```

但是公共页面有`guest`查看权限。我想以`view`编程方式从来宾用户那里删除该权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:48:18.687

首先，您需要为当前 Liferay 实例（公司）找到角色“Guest”：

```
long userRoleId = RoleLocalServiceUtil.getRole(_companyId, "Guest").getRoleId(); 
```

之后您需要删除权限：

```
ResourcePermissionLocalServiceUtil.removeResourcePermissions(
    _companyId,
    layout.getModelClassName(),
    ResourceConstants.SCOPE_INDIVIDUAL,
    String.valueOf(layout.getPrimaryKey()),
    userRoleId,
    new String[]{ActionKeys.VIEW}
); 
```

**编辑**：根据评论更新

# backbone.js - Backbone Marionette 模块作为类似于 Twitter Flight 的小部件

> ID：15085716
> 
> 赞同：7
> 
> 时间：2013-02-26T09:40:54.240
> 
> 标签：backbone.js, marionette

我正在阅读选择正确的客户端框架来分割/模块化我在小部件中的前端代码。

基本上我拥有/想要的是：

*   具有多种页面类型的复杂网站，因此没有单页应用程序。
*   所有页面都能够在不使用 javascript 的情况下呈现完整的页面。IOW：javascript 仅用作丰富。
*   许多页面都有一种非常动态的方式，可以在屏幕上显示小部件。为了克服服务器端的复杂性，我将代码模块化为小部件（复合模式），其中每个小部件负责自己的：
    *   服务器端控制器代码
    *   服务器端模板（使用 hogan/mustache）
    *   路由端点，是否需要从客户端调用
    *   结构 css（css 转换小部件的结构而不是外观）
*   服务器端 RegionManager 最终决定渲染哪些小部件以及它们在屏幕上的渲染位置。最终结果是 RegionManager 将整个 html（服务器生成的）吐出，作为其所有小部件的呈现的组合。

现在，其中一些小部件确实具有客户端逻辑并且需要在客户端上重新渲染。以搜索页面为例，它需要能够通过 ajax 进行更新。（我已经描述了这个过程，它在客户端和服务器上使用 DRY 模板， [here](https://stackoverflow.com/questions/7370056/accessibility-and-all-these-javascript-frameworks/7371629#7371629)）

我最终想要的是，鉴于我已经在服务器上使用了复合模式，以某种方式将其扩展到客户端，以便小部件（屏幕上的 1 个特定逻辑块）包含所有提到的服务器端代码，以及所有需要的客户端侧代码。

我希望这是有道理的。

Marionette 是否适合在这种情况下用作客户端框架？我之所以问，是因为我不能 100% 确定木偶模块的概念是否就是我在上述场景中描述为小部件的概念。（我在我的问题中提到了 Twitter Flight，因为我相信这会很合适，但它目前太新了，以至于我现在犹豫不决_

我想基本上我要问的是，是否有人在这些方面有一些经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T07:43:46.103

我认为仅使用 Backbone.js 就非常适合您所描述的这种类型的应用程序。您可能已经阅读过这篇文章，但大多数主干文献都集中在您的视图上，这些视图具有关联的服务器生成的 JSON 模型和集合，然后使用视图的渲染函数（在客户端）生成表示模型/集合的 HTML UI。

但是，它不必**以**这种方式使用。事实上，没有什么能阻止您将视图附加到已经包含内容的现有元素上，这为您提供了 Backbone 的模块化、事件系统等的所有好处。我经常使用没有模型或集合的视图，纯粹是因为我喜欢风格的一致性。我还使用了如下所述的方法，在这些情况下，我不得不使用尚未获得或永远不会拥有良好 REST API 的旧的现有应用程序，但它们确实以 HTML 格式提供内容。

首先，假设以下 HTML 代表您的一个小部件：

```
<div id="widget">
    <div class="widget-title"></div>
    <div class="widget-body">
        <!-- assume lots more html is in here -->
        <a href="/Controller/DoWidgetStuff">Do something!</a>
    </div>
</div> 
```

在这种情况下，您可以将主干与单个`Widget`模型一起使用。这将是一个非常简单的模型，如下所示：

```
App.WidgetModel = Backbone.Model.extend({
    intialize: function () {
        this.url = this.options.url;
    }
}); 
```

请注意 Widget 接收 URL 作为其构造函数/初始化函数的参数这一事实。这个小部件模型将代表您的许多小部件（当然，您可以采用这种通用方法来处理更复杂的模型并从呈现的 HTML 中提取不同的数据）。那么接下来请教大家的看法。您可能知道，通常在实例化大多数视图时会将模型或集合传递给它们。但是，在这种情况下，您可以在 View 的初始化函数中创建 Widget 模型，并从预渲染的 HTML 中传递一个 URL，如下所示：

```
App.WidgetView = App.View.ComboboxView = Backbone.View.extend({

    initialize: function () {

        this.model = new App.WidgetModel({}, { url: this.$("a").attr("href") });

    }

    // rest of the view code

}); 
```

因此实例化视图将类似于：

```
new App.WidgetView({el: $("#widget")})' 
```

通过完成以上所有操作，您几乎可以完成骨干网为您提供的所有其他功能，并且它的模块化和封装得很好，这就是您所追求的。

整个方法的最终结果是：

1.  您已将 Widget UI 呈现为纯 HTML（我假设）在没有 JavaScript 的情况下也可以正常工作。
2.  您将视图附加到现有 HTML。
3.  您将作为选项传递到视图中，内容通过使用 jQuery 从呈现的 HTML 中提取（例如 URL）。
4.  视图负责实例化模型，传递模型所需的相关选项（例如 URL）。
5.  这意味着所有动态服务器端内容最初都包含在呈现的 HTML 中，并且您的 View 是一个模块化的 JavaScript 组件，可以对其进行处理，我认为这是您所追求的最终结果。

所以您提到您希望为您的小部件提供 AJAX 功能，并且这种方法也很好。使用这种方法，您现在可以使用模型上的标准 Backbone`fetch`和`save`函数`Widget`来获取新内容。在此示例中，它来自从呈现的 HTML 中检索到的 URL。收到响应后，您可以根据需要使用视图、渲染函数或其他更细粒度的函数来更新页面上的 HTML。

**几点：**

唯一需要注意的是，如果这是服务器提供的内容，您需要将`fetch`and`save`函数的内容类型更改为“text/html”。例如：

```
this.model.fetch({
    type: "POST",
    contentType: "text/html"
}); 
```

最后，我提出的模型是没有内容的实例化。但是，如果您的 ajax 调用是“text/html”的内容类型，您可能需要使用您的模型，以便它可以将此内容正确存储在其属性集合中。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/12332329/1439720)。

# php - 如何在一个表中连接具有多行的两个表？

> ID：15085718
> 
> 赞同：3
> 
> 时间：2013-02-26T09:40:55.323
> 
> 标签：php, mysql, sql

假设我有：

```
USERS:
userid | name
1      | John
2      | Jack

HITS:
id | userid | time
1  | 1      | 50
2  | 1      | 51
3  | 2      | 52
4  | 1      | 53
5  | 2      | 54
6  | 2      | 55 
```

我需要最终得到这样的结构：

```
array() {
  [user 1] {
    hit 1 => 50
    hit 2 => 51
    hit 4 => 53
  }
  [user 2] {
    hit 3 => 52
    hit 5 => 54
    hit 6 => 55
  }
} 
```

最糟糕的方法是：

1.  选择 * 用户
2.  为每个用户选择所有命中

有没有一种方法可以将结果作为一个查询而不需要像这样遍历每个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:47:15.973

使用**左外连接，****从左表（主）**中检索所有记录，并**从右**表中检索其他匹配。

```
select 
users.userid,  
h.time 
from  
users  
    left outer join hits h   
    on(  
      users.userid = h.userid
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:47:21.653

```
SELECT * FROM users
LEFT JOIN hits on users.id = hits.user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:42:19.003

是的，您可以`JOIN`为此使用 a 。

```
SELECT * FROM users
INNER JOIN hits on users.id = hits.user_id 
```

您的结果将以平面数组的形式出现，但您可以轻松地循环并相应地格式化您的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:42:34.980

您需要的 sql 语句只是使用`INNER JOIN`（*或 LEFT JOIN 如果您想返回记录，即使某个用户在表命中时也没有匹配的记录*）

```
SELECT  a.*, b.time
FROM    users a
        INNER JOIN hits b
            ON a.userid = b.userid 
```

查询的结果是一维数组，因此您需要在应用程序级别格式化结果。

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# java - java程序抛出ServiceException（javax.xml.rpc.ServiceException）的原因？

> ID：15085722
> 
> 赞同：2
> 
> 时间：2013-02-26T09:41:00.527
> 
> 标签：java, rpc

有人可以让我知道 javax.xml.rpc.ServiceException 在哪些用例中会被抛出？

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T12:47:50.457

**Service** (javax.xml.rpc.Service) 接口或**ServiceFactory** (javax.xml.rpc.ServiceFactory) 类中的方法将抛出ServiceException。

一些示例条件是，

1.  创建服务的异常
2.  在创建服务时指定非法端点时
3.  创建 Call(javax.xml.rpc.Call) 对象时出现任何错误
4.  加载服务或创建 ServiceFactory 实例时出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-19T23:51:37.860

我们使用服务异常来抛出环境、数据和业务异常。这里有些例子：

*   环境设置/属性不存在或为空白，驱动诸如文件名之类的逻辑发送到另一个应用程序。很可能发生的事情是我们为这个环境属性配置了 UAT，但忘记将该属性提升到 Prod，或者有人删除它而没有意识到它会产生缺陷；
*   调用我们服务的上游系统不遵循业务规则，我们无法处理此事务

在这两个示例中，我们：

1.  抛出带有特定消息的新 ServiceException；
2.  在调用逻辑中，我们捕获那个 ServiceException；
3.  然后抛出一个带有消息的新 ServiceException：当前上下文字符串 + 捕获的异常的 GetMessage。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:29:57.257

服务异常通常在服务不可访问或服务未正确定义并出现错误时引发。我希望这能回答你的问题。

# doctrine-orm - 在 postLoad 中加载 Doctrine 实体

> ID：15085728
> 
> 赞同：2
> 
> 时间：2013-02-26T09:41:30.237
> 
> 标签：doctrine-orm

我有一个实现 postLoad 生命周期事件方法的实体。此方法有条件地更新实体并尝试保存它。类似于以下内容：

```
 /** 
     * @PostLoad 
     */
    public function checkExpiryDate()
    {
        $currentDate = new App_Date();

        // Check the expiry date here
        if($currentDate->getTimestamp() > $this->getDateExpired()->getTimestamp()) {
            $this->Status = "expired";
            $this->ServiceLayer->saveEntity($this);
        }
    } 
```

但是，我收到以下错误：

```
Call to a member function fetch() on a non-object in Doctrine/ORM/Internal/Hydration/ObjectHydrator.php on line 149 
```

看来我无法在 postLoad 期间保存实体。

我偶然发现了[这张票](http://www.doctrine-project.org/jira/browse/DDC-1010)，它建议在新密钥下注册 ObjectHydrator 并在任何新查询期间指定水合器。

但是，我想知道是否有一种在更抽象的层次上实现它的好方法；每当在 postLoad 调度期间构建查询时，我想自动注册一个新的 ObjectHydrator。

此外，有人可以首先简要解释为什么这是一个问题吗？从我可以看到，一旦使用了水合器，查询就会被删除，但我不明白为什么在构建新查询时这会成为问题，即使水合器被重用。

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T13:46:14.683

这是不受支持的，尤其是当您`EntityManager`在服务层内调用操作时。

你会遇到每一种可能的奇怪竞争条件，因为你基本上是在重复使用相同的水合器并破坏它们的内部状态，当它们仍在为你的结果集水合时使它们变得无用。

这是一个已知问题，如果您确实需要在`@PostLoad`. 见[http://www.doctrine-project.org/jira/browse/DDC-1010](http://www.doctrine-project.org/jira/browse/DDC-1010)

与其使用侦听器来填充对象的缺失依赖项，不如考虑在从实体管理器获取对象后使用服务层来处理它。无论如何，这将禁止您为示例中的实体提供任何代理。

# c - C 宏添加到类型名

> ID：15085730
> 
> 赞同：3
> 
> 时间：2013-02-26T09:41:31.997
> 
> 标签：c, macros, c-preprocessor

我正在尝试创建一个 C 宏，给定一个类型名将附加`_info`到它，获取它的地址并用它调用一个函数。示例代码（不起作用）：

```
#define new(X) __new(&(X_info))

struct classInfo
{
    size_t size;
    void* (*constructor)(void* p);
};

void* __new(struct classInfo* info, ...)
{
    return info->constructor(malloc(info->size));
}

void* queue_constructor(void* p)
{
    return p;
}

typedef struct
{
    uint64_t data;
} queue_t;

const struct classInfo queue_t_info = { .size        = sizeof(queue_t),
                                        .constructor = &queue_constructor};

int main(int argc, char** argv)
{
    queue_t* p = new(queue_t);
    return 0;
} 
```

预处理器似乎不想扩展 X，因为它对 undefined symbol 出错了`X_info`。不知道我应该在宏上更改什么来解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T09:43:21.960

您需要使用预处理器的*令牌连接*功能；否则它认为这`X_info`本身就是一个令牌：

```
#define new(X) __new(&(X ## _info)) 
```

预处理器不会扩展`X`in的原因`X_info`是，如果确实存在一个`X_info`您需要在宏中引用的标识符，则会产生很大的问题。

作为旁注，还有*字符串化*功能：如果`X`是例如`Person`，`"X"`将保留`"X"`，而`#X`将扩展为字符串常量`"Person"`。

# java - 连接两个 json 对象

> ID：15085731
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:41:40.330
> 
> 标签：java, json

我想连接以下两个 json 对象。我怎样才能做到这一点？我的 json 对象如下：

```
"Object1": {
    "Stringkey":"StringVal",
    "ArrayKey": [Data0, Data1]
}

"Object2": {
    "Stringkey":"StringVal",
    "Stringkey":"StringVal",
    "Stringkey":"StringVal",
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:25:55.953

```
JSONObject obj3 = (JSONObject) obj1.get("Object1");
JSONObject obj4 = (JSONObject) obj2.get("Object2");
JSONObject combined = new JSONObject();
combined.put("Object1", obj3);
combined.put("Object2", obj4); 
```

# javascript - 双动态下拉列表

> ID：15085733
> 
> 赞同：0
> 
> 时间：2013-02-26T09:41:47.070
> 
> 标签：javascript, sql, search, select, drop-down-menu

我正在为我的数据库创建一个“搜索引擎”，并且我通过使用下拉列表作为值来限制查询，因此不会进行错误的搜索。简而言之，搜索将基于列和值进行。在这个问题中，我将列的数量减少到三个，好像你可以帮助我做工作 2，那么希望我会明白自己做更多的事情。

第一个下拉列表（列），对应的下拉列表带有新的选项（值）。第二个下拉列表（列），与新选项（值）对应的下拉列表。

实际上，第一个和第二个下拉查询具有相同的列名，因为我们希望同时匹配两个查询。

当前代码：第一个已经是一个下拉列表，并且可以完美运行。但是，我尝试了很多使第二个下拉菜单（这很容易），但随后使它像第一个一样工作，但没有成功。

```
<script type="text/javascript">
    function setOptions(chosen) {
        var selbox = document.search.findone;

        selbox.options.length = 0;
        if (chosen == " ") {
            selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');
        }
        if (chosen == "SHIPPINGLINE") {
            selbox.options[selbox.options.length] = new Option('MSC','MSC');
            selbox.options[selbox.options.length] = new Option('first choice - option two','onetwo');
        }
        if (chosen == "POL") {
            selbox.options[selbox.options.length] = new Option('HONG KONG','HONG KONG');
            selbox.options[selbox.options.length] = new Option('SHANGHAI','SHANGHAI');
        }
        if (chosen == "POD") {
            selbox.options[selbox.options.length] = new Option('HAMBURG','HAMBURG');
            selbox.options[selbox.options.length] = new Option('LE HAVRE','LE HAVRE');
        }
    }
</script> 
```

并进一步

```
<div id="searchzone">
    <h2>Search</h2>
    <form name="search" method="post" action="<?=$PHP_SELF?>">
        <Select NAME="fieldone"   onchange="setOptions(document.search.fieldone.options[document.search.fieldone.selectedInde    x].value);" id="fieldone">
            <option value=" " selected="selected"> </option>
            <option VALUE="SHIPPINGLINE">SHIPPING LINE</option>
            <option VALUE="POL">POL</option>
            <option VALUE="POD">POD</option>
        </Select>
        <Select NAME="findone" />

        <option value=" " selected="selected">Please select the category on the left first.</option>
        </select>

    <br />
    <br />
        <Select NAME="fieldtwo">
            <option VALUE="SHIPPINGLINE">SHIPPING LINE</option>
            <option VALUE="POL">POL</option>
            <option VALUE="POD">POD</option>
        </Select>
        <input type="text" name="findtwo" />
        <input type="hidden" name="searching" value="yes" />
        <input type="submit" name="search" value="Search" />
    </form>
</div> 
```

也许你知道，这是我的 sql 查询，它工作正常 :)

```
$data = mysql_query("SELECT * FROM tablename WHERE upper($fieldone) LIKE'%$findone%' AND upper($fieldtwo) LIKE'%$findtwo%'"); 
```

如果您能帮助我，我将不胜感激，如果您需要任何其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:07:15.750

[演示](http://jsfiddle.net/mplungjan/REzdM/)

```
var opts = {
    "SHIPPINGLINE":[
        {text:"MSC",value:"MSC"},
        {text:"first choice - option two",value:"onetwo"}
        ],
    "POL":[
        { text:"HONG KONG",value:"HONGKONG"},
        { text:"SHANGHAI", value:"SHANGHAI"}
       ],
    "POD":[
        { text:"HAMBURG",value:"HAMBURG"},
        { text:"LE HAVRE", value:"LE HAVRE"}
       ]

}

function changeOther(sel) {
    var selbox = document.getElementById("find"+sel.id.replace("field",""));
    console.log(selbox.id)
      selbox.options.length = 0;
      var val = sel.value;
      if (val=="") {
        selbox.options[selbox.options.length] = new Option('Please select one of the options to the left first','');
        return;
      }
      for (var opt = opts[val],i=0; i<opt.length;i++) {
         selbox.options[selbox.options.length] = new Option(opt[i].text,opt[i].value);
      }

}

window.onload=function() {
    document.getElementById("fieldone").onchange=document.getElementById("fieldtwo").onchange=function() {
        changeOther(this);
   }      
} 
```

# c# - 插入网线/连接 Wifi 时收到通知

> ID：15085734
> 
> 赞同：9
> 
> 时间：2013-02-26T09:41:46.933
> 
> 标签：c#, .net, networking, network-programming, network-connection

我在 C# 中实现了一个发现协议（DNS-SD）。我有一个小问题：当我的程序运行时，我需要检测何时建立新连接（插入网线或加入 wifi），以在这些网络上宣布自己。

但是如何检测呢？我看过一些代码来获取网卡的当前状态，但没有事件，我想避免对网卡状态进行一些轮询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:35:06.853

您可以使用[`GetIstNetworkAvailable`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable.aspx)- 方法检查是否有网络连接。每当它发生变化时，[`NetworkAvailabilityChanged`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.networkavailabilitychanged.aspx)就会触发事件。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/520347/c-sharp-how-do-i-check-for-a-network-connection)。

如果您想跟踪不同的可用性，[这里](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable%28v=vs.95%29.aspx)有一个关于如何执行此操作的示例。[`NetworkInterfaces`](http://msdn.microsoft.com/en-us/library/k056bfdz%28v=vs.110%29.aspx)

# .htaccess - 重定向到 index.html

> ID：15085738
> 
> 赞同：2
> 
> 时间：2013-02-26T09:41:51.950
> 
> 标签：.htaccess, redirect, seo, indexing

为了尊重 SEO 指令，我想重定向来自以下的所有流量：

```
http://www.mywebsite.com
http://mywebsite.com
www.mywebsite.com
mywebsite.com 
```

至

```
http://wvw.mywebsite.com/index.html 
```

目前我使用这段代码，但它不能正常工作：

```
RewriteCond %{HTTP_HOST} !^www.mywebsite.com$ [NC]
RewriteRule ^(.*)$ http://www.mywebsite.com/$1 [L,R=301] 
```

一切正常，但`www.mywebsite.com/index.html`在`www.mywebsite.com`.

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:57:24.140

```
RewriteCond %{HTTP_HOST} ^mywebsite.com [NC]
RewriteRule ^(.*)$ http://www.mywebsite.com/$1 [R=301,L] 
```

试试这个我希望这有帮助

# php - 访问数组元素 - PHP PDO 之外

> ID：15085740
> 
> 赞同：0
> 
> 时间：2013-02-26T09:41:59.683
> 
> 标签：php, arrays, json, pdo

我有一个成功填充的 JSON 编码数组，如下所示：

```
$profanityText = json_encode($pds->fetchAll(PDO::FETCH_ASSOC)); 
```

稍后我想遍历这些数据并执行以下操作：

```
 $profanityTextArray = json_decode($profanityText);
    foreach ($profanityTextArray as $key => $jsons) {
      print_r($jsons);
    } 
```

当我使用 print_r($jsons) 我得到以下输出：

```
stdClass Object
(
     [apple] => yes
     [peach] => yes2
     [banana] => no
)
(
     [apple] => yes
     [peach] => yes2
     [banana] => no
) 
```

这也很好。问题是我不知道如何在 foreach 循环期间访问单个元素。例如：我希望能够访问苹果和香蕉个体以做出必要的决定。

如何单独访问元素，而不是每行只访问 print_r？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:46:24.787

[手册页**总是**有帮助的：](http://php.net/manual/en/function.json-decode.php)

```
$profanityTextArray = json_decode($profanityText, TRUE);
foreach ($profanityTextArray as $row) {
    echo $row['apple'];
} 
```

但是编码/解码 JSON 的原因是什么？你不能使用 fetchAll 结果吗？

```
$profanityTextArray = $pds->fetchAll(PDO::FETCH_ASSOC); 
```

然后以通常的方式迭代这个数组？

顺便说一句，您的问题与 PDO 无关。
你有一个来自 PDO 的常规数组，它的来源并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:45:37.553

试试这个 ：

```
foreach ($profanityTextArray as $key => $jsons) {
  echo $jsons->apple;
  echo $jsons->peach;
  echo $jsons->banana;
} 
```

# c# - 使用 DLLImport 时应该将 dll 文件放在哪里？

> ID：15085743
> 
> 赞同：4
> 
> 时间：2013-02-26T09:42:16.113
> 
> 标签：c#, android, monodevelop, dllnotfoundexception

我知道在 windows 窗体中，您只需将文件放在 Debug 文件夹中，但在 monodev for android 中似乎完全不同。我已经尝试从资产文件夹中放置文件，添加参考路径，从项目设置中设置参考文件夹等，但我仍然没有任何运气。我总是得到一个`DLLNotFoundException`.

另外，下面是导入dll文件的代码

```
[DllImport("testing.dll", EntryPoint = "Testing_Open", ExactSpelling = false, CallingConvention = CallingConvention.Cdecl)]
 public static extern uint Testing_Open(HINSTANCE hInstance); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T17:01:21.987

您不能在 Mono for Android 上 DllImport .dll，因为它是基于 Linux 的系统，而不是基于 Windows 的系统。您需要 DllImport 一个 Linux 共享库 (*.so)。

# ios - 我可以将 MailCore 与 oauth 2 一起使用吗？

> ID：15085744
> 
> 赞同：3
> 
> 时间：2013-02-26T09:42:17.600
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, mailcore

我已经构建了一个使用 OAuth 2.0 连接到 gmail 的简单项目。如何使用 MailCore 使用从 gmail 获得的令牌获取电子邮件？我已阅读 MailCore 的文档，但找不到任何相关内容。谢谢

# javascript - Javascript - 画布，如何让球以之字形移动

> ID：15085749
> 
> 赞同：0
> 
> 时间：2013-02-26T09:42:23.287
> 
> 标签：javascript, modernizr

嘿，伙计们，我在 Canvas 上遇到了一些 JavaScript 问题。基本上，我不知道如何让球以之字形移动。我是 JavaScript 新手，还在学习它，所以如果你们中的任何人能帮助我，我将不胜感激。所以我的问题是我将如何让球以之字形移动？目前它只是从左到右做一条直线。

这是我的代码

```
// JavaScript Document
window.addEventListener('load', eventWindowLoaded, false); 

function eventWindowLoaded() {
    canvasApp(); 
}

function canvasSupport () { 
    return Modernizr.canvas;
}

function canvasApp() {

    // test if Modernizr has been loaded
    if (!canvasSupport()) { 
        return; 
    }

    var pointImage = new Image(); 
    // put an image into an image object
    pointImage.src = "point.png"; 

    function drawScreen () {

        // fill the background
        context.fillStyle = '#EEEEEE';
        context.fillRect(0, 0, theCanvas.width, theCanvas.height);
        // Draw  a Box around the fill
        context.strokeStyle = '#000000';
        context.strokeRect(1, 1, theCanvas.width - 2, theCanvas.height-2);

        // Create ball

        if (moves > 0 ) { 
            moves--; 
            ball.x += xunits; 
            ball.y += yunits;
        }

        // Draw points to illustrate path

        points.push({
            x: ball.x,
            y:ball.y
        });

        // for loop with drawImage inside the loop to draw the points

        for (var i = 0; i < points.length; i++) { 
            context.drawImage(pointImage, points[i].x, points[i].y, 1, 1);
        }
        context.fillStyle = "#000000"; 
        context.beginPath();
        context.arc(ball.x, ball.y, ball_radius, 0, Math.PI * 2, true);
        context.closePath();
        context.fill();
    }

    var speed = 10;
    // coordinates of the left hand point
    var p1 = {
        x: 20,
        y: 250
    }; 
    var p2 = {
        x: 480,
        y: 250
    };
    // distance between left and right x coordinates
    var dx = p1.x - p2.x; 
    var dy = p1.y - p2.y;
    // Calculate the distance between points
    var distance = Math.sqrt(dx * dx + dy * dy);
    var moves = distance / speed;
    var xunits = (p2.x - p1.x) / moves;
    var yunits = (p2.y - p1.y) / moves;
    var ball = {
        x: p1.x, 
        y: p1.y
    };
    var points = new Array();
    var the_interval = 20
    var ball_radius = 5

    // save the context in a variable
    theCanvas = document.getElementById("canvasOne"); 
    context = theCanvas.getContext("2d");

    // call the drawscreen function every 33 miliseconds
    setInterval(drawScreen, the_interval); 

} 
```

我正在使用[Modernizr](http://modernizr.com/)来帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:09:11.997

如果不写疯狂的数学函数，也许使用正弦波作为“之字形”是个好主意。查看[http://www.w3schools.com/jsref/jsref_sin.asp](http://www.w3schools.com/jsref/jsref_sin.asp)或[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/sin](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/sin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:50:13.070

[根据质量和弹跳系数计算球与球碰撞的速度和方向](https://stackoverflow.com/questions/9424459/calculate-velocity-and-direction-of-a-ball-to-ball-collision-based-on-mass-and-b)

```
 -Your answer can be found in there. The problem with your original code was that you calculated the total change in distance over the total time. If the zig zag is going to move left to right at a 45 degree angle then the absolute value of the speed of |y| == x. create a listener or loop to switch the value of y from positive to negative values depending when you want to zig or zag. check out that older post it should clear things up 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:17:46.703

对我来说这听起来像是一些家庭作业:-) 无论如何，在这里你得到了使用 Sin 的解决方案。用它创建之字形绝对不是坏主意，因为您没有更接近地定义您需要的确切形状。

```
(function () {
  var startPoint = { x: 0, y: 250 },
      endPoint = { x: 500, y: 250 },
      ball = { x: startPoint.x, y: startPoint.y },
      canvas = document.getElementById('canvas'),
      context = canvas.getContext('2d');

  window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
    })();

  function draw() {

    var dx = endPoint.x - startPoint.x, 
        dy = endPoint.y - startPoint.y,
        a = (function () { if (dy !== 0) { return dx/dy; } else { return 0; }})(),
        b = startPoint.y - a*startPoint.x,
        y = function (x) { return a*x + b; };

    ball.x = ball.x + 1;
    ball.y = y(ball.x) + Math.sin(ball.x*0.1)*10;

    context.fillStyle = '#EEEEEE';
    context.fillRect(0, 0, canvas.width, canvas.height);
    context.strokeStyle = '#000000';
    context.strokeRect(1, 1, canvas.width-2, canvas.height-2);

    context.fillStyle = "#000000"; 
    context.beginPath();
    context.arc(ball.x, ball.y, 5, 0, Math.PI*2, true);
    context.closePath();
    context.fill();

    window.requestAnimFrame(draw);
  }

  window.requestAnimFrame(draw);

})(); 
```

它仅在 Y 上曲折，但您可以使用这个想法并在 X 和 Y 中添加或更改您自己的“偏差”。您也可以添加 Modernizr 来检测画布，但我认为在这个问题中它是无关紧要的。希望它有所帮助 ;-) 你可以在这里试试 --> [http://jsbin.com/ahefoq/1](http://jsbin.com/ahefoq/1) <--。享受！

mz

# windows - 在 cmd 中创建等待循环的语法

> ID：15085753
> 
> 赞同：0
> 
> 时间：2013-02-26T09:42:44.380
> 
> 标签：windows, bash, cmd

我想在cmd中每分钟检查一个文件是否存在。有人可以帮忙语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:16:03.160

以下批处理文件应该可以工作：

```
@echo off
:loop
if exist FILENAME (
    echo "found"
) else (
    timeout /t 60 /nobreak > nul
    goto loop
) 
```

不要忘记正确替换 FILENAME。

# android - 站点不包含相应的根文件

> ID：15085757
> 
> 赞同：1
> 
> 时间：2013-02-26T09:42:50.437
> 
> 标签：android, cordova, dreamweaver

我正在尝试按照[此](http://www.youtube.com/watch?v=EprKIkCjKhQ) 视频教程创建示例移动应用程序。我已经成功安装了 android SDK。但是每次我尝试在 Dreamweaver cs5.5 中构建和模拟我的示例站点时，我总是会收到一条错误消息

```
Your site does not contain the appropriate root file. 
Please contains a file named "index.html" and try again. 
```

这是我第一次为 android 创建移动应用程序。你能帮我解决我的问题吗？

# c++ - 使用 Octave API for C++ 构建稀疏矩阵

> ID：15085758
> 
> 赞同：0
> 
> 时间：2013-02-26T09:42:51.497
> 
> 标签：c++, octave, sparse-matrix

我正在尝试使用 Octave C++ API 来解决稀疏线性系统。我遇到的问题是我找不到构建稀疏线性系统的有效方法。

```
SparseMatrix A;
int dim,nnz;
// dim = dimension
// nnz = number of non-zero entry in the matrix A

/*
    somehow assign the values for dim and nnz
*/

A = SparseMatrix ( dim, dim, nnz );

// row index array
int *pidx_r = new int[nnz];
// col index array
int *pidx_c = new int[nnz];
// value array
double *pval = new double[nnz];
// total number of nonzero elements
int tot; 

/*
    somehow assign values for pidx_r, pidx_c, pval and tot
*/

for ( int i = 0; i < tot; i++ )
    A ( pidx_r[i], pidx_c[i] ) = pval[i]; 
```

上面这段代码描述了我的幼稚实现，效率极低，我希望应该有一些成员函数可以将值大量插入稀疏矩阵。

例如，`A=SparseMatrix(pidx_r,pidx_c,pval);`

但是，我找不到任何这样做的成员函数。至少，幼稚的实现似乎是唯一的方法。

鉴于我已经准备了某种格式的矩阵，我想问一下是否有任何方法可以使用 Octave API for C++ 有效地构造稀疏矩阵？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:07:09.857

我刚找到这个教程，第一段中的方法看起来像你要找的。

[关联](http://www.gnu.org/software/octave/doc/interpreter/Creating-Sparse-Matrices-in-Oct_002dFiles.html#Creating-Sparse-Matrices-in-Oct_002dFiles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T14:08:13.307

@wirew0rm​​ 链接中提到的方法微不足道且效率低下。

事实上，我已经找到了一个解决方案，它基本上修改了继承的成员 SparseMatrixRep 的内容。

尽管文档说明它不安全且不推荐，但性能得到了显着提高。

# c++ - 为什么类型扣除不能按预期工作？

> ID：15085760
> 
> 赞同：0
> 
> 时间：2013-02-26T09:42:54.523
> 
> 标签：c++, metaprogramming, type-deduction

我有一个关于 C++ 元编程中的类型推导的小问题。有一定的功能做一些动作。

主文件

```
template<typename T> void foo(T arg) {
    // do some action on argument
    std::cout << typeid(arg).name() << std::endl;
}

int main(int argc, char** argv) {
    int array[100] = {0};
    std::cout << typeid(array).name() << std::endl;
    foo(array);

    return 0;
} 
```

输出：

```
A100_i
Pi 
```

为什么函数*foo()中的**arg*具有与函数*main()中的**数组*不同的数据类型？

 **** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T09:44:47.170

实际上，当您将数组传递给函数时，它会衰减为指针类型。所以`T`推断为`int*`，而不是`int[100]`。

如果要防止衰减，请*通过引用*接受参数。：

```
template<typename T> void foo(T & arg) //Note `&` here!
{
  // do some action on argument
   std::cout << (typeid(arg).name() << std::endl;
} 
```

现在它将打印您期望的内容，即`A100_i`. 请参阅[此在线演示](http://stacked-crooked.com/view?id=5644cefcc78fd0f42487cb49c19b8b8b)。

* * *

**问题：为什么当我们*按值*传递时，数组会衰减为指针类型？**

答：因为在 C++ 中，数组（和函数）*不能**按值*传递。语言不允许这样做。相反，当它们作为函数参数传递时，语言要求它们衰减为指针类型。为了防止衰减，我们需要将它们作为*参考*传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T10:04:32.153

因为 C 风格的数组被破坏了。特别是，你不能有一个 C 风格数组类型的函数参数。如果您编写一个函数（暂时忘记模板）：

```
void foo( int arg[100] ); 
```

该语言要求编译器将其视为：

```
void foo( int* arg ); 
```

（并且 the`100`只是一个注释——编译器会忽略它）。

为了在模板的情况下支持这一点，如果编译器试图匹配非引用模板参数，它会将数组参数转换为指针，类型推导将导致指针类型，而不是数组类型。

结果是您永远不应该编写一个期望 C 样式数组的函数（模板或其他）（除了 的第二个参数`main`，您别无选择）。

由于这种中断仅出于 C 兼容性的原因而存在，因此在涉及引用时 C++ 不会遵循它。所以：

```
template < typename T, size_t N >
void foo( T (&arg)[ N ] ); 
```

将起作用，并且在两种情况下都应该给您相同的结果。如果你认为你的函数可能同时被 C 风格的数组和其他东西（例如 std::vector）调用，你可以为两者重载它。上面的版本更专业，如果可能的话，将优先于更通用的版本。

更好的解决方案是完全避免使用 C 样式的数组，但它们对于带有初始化的静态变量很有用；只有使用 C 样式的数组，您才能让编译器计算元素的数量，并根据初始化列表定义数组的大小。并且有静态初始化；`std::vector`将在运行时计算初始化程序，但用作静态变量，可能会导致初始化顺序问题。C风格的数组和***

# python - 命令行上的速度 python 脚本 vs 在 IDLE shell 中启动

> ID：15085761
> 
> 赞同：2
> 
> 时间：2013-02-26T09:43:00.797
> 
> 标签：python, command-line, python-idle

我多次注意到，与通过 IDLE 的 shell 运行相比，在 shell 命令行上启动一个简单的 python 脚本（在循环中进行一些简单的代数计算）运行速度要快得多（高达 6 倍）。脚本中没有什么花哨的地方。我只打印一个循环变量以直观地跟踪循环中的进度。

当然，仅此打印语句不能成为 IDLE 速度损失的原因，或者可以吗？

有人可以解释一下为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:02:47.083

`Tkinter`文本小部件很慢，IDLE 使用它来将文本打印到屏幕上。

看到[这个](https://stackoverflow.com/questions/2212722/python-why-is-idle-so-slow)问题。

# android - 选择器禁用按钮

> ID：15085763
> 
> 赞同：0
> 
> 时间：2013-02-26T09:43:05.027
> 
> 标签：android

我的按钮背景之一有这个选择器

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false"
          android:drawable="@drawable/bg_botton_disable"/>
    <item android:state_pressed="true"
          android:state_enabled="true"  
          android:drawable="@drawable/bg_botton_pressed"/> <!-- pressed -->
    <item android:state_enabled="true" 
          android:drawable="@drawable/bg_botton" /> <!-- default -->
</selector> 
```

```
(Button) bt = (Button) findviewById(R.id.MyBotton);
bt.setEnabled(false); 
```

该代码禁用了我的按钮的功能。我的意思是当我按下按钮时，它不会启动自己的`onClick()`方法。这很好，但问题是它不会将按钮的背景更改为`bg_botton_disable`可绘制的。

有没有人有任何建议如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:57:23.930

重新排序您的选择器项目

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="true" 
          android:drawable="@drawable/bg_botton" /> <!-- default -->
    <item android:state_pressed="true"
          android:drawable="@drawable/bg_botton_pressed"/> <!-- pressed -->
    <item android:state_enabled="false"
          android:drawable="@drawable/bg_botton_disable"/>
</selector> 
```

# java - 在java中将字符串转换为日期格式

> ID：15085771
> 
> 赞同：1
> 
> 时间：2013-02-26T09:43:25.927
> 
> 标签：java, jcalendar

我想将此字符串转换为以下日期格式。

```
 String s = "2-26-2013";
  Date date = new SimpleDateFormat("EEEE, MMMM/dd/yyyy").parse(s);
  System.out.println(date); 
```

我收到此错误：

```
Exception in thread "main" java.text.ParseException: Unparseable date: "2-26-2013"
    at java.text.DateFormat.parse(DateFormat.java:357) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:44:45.223

嗯，是。您传递给构造函数的参数`SimpleDateFormat`表示您希望日期采用的格式。

`"EEEE, MMMM/dd/yyyy"`对于像“2013 年 2 月 26 日星期二”这样的输入有效。对于“2-26-2013”​​，它甚至都不是有效*的*。你明白你现在正在*解析*文本，而不是格式化它吗？

看起来您想要一个“M-dd-yyyy”或可能是“Md-yyyy”的格式字符串。

如果您尝试从一种格式转换为另一种格式，则需要首先指定要解析的格式，然后指定要格式化的格式：

```
SimpleDateFormat parser = new SimpleDateFormat("M-dd-yyyy");
SimpleDateFormat formatter = new SimpleDateFormat("EEEE, MMMM/dd/yyyy");
Date date = parser.parse(input);
String output = formatter.format(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:48:31.550

而不是使用`MMMM/dd/yyyy`你需要使用`MM-dd-yyyy`. SimpleDateFormat 期望模式匹配它试图解析的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:48:13.367

```
Date date = new SimpleDateFormat("MM-dd-yyyy").parse(s); 
```

SimpleDateFormat 的参数定义了您的日期格式。上面的行与您的格式匹配，并且有效。你的例子不匹配。

# android - java.lang.RuntimeException：无法启动 Activity {package_name.ActivityClass}：java.IllegalArgumentException：列“_id”不存在

> ID：15085775
> 
> 赞同：0
> 
> 时间：2013-02-26T09:43:41.780
> 
> 标签：android, android-layout, simplecursoradapter

我在 Sqlite 数据库中有两个表。第一个表的列是`_id`, `name`。第二个表的列是`_cid`, `Category`。

我正在将第二个表中的数据检索到`ListView`using 中`SimpleCursorAdapter`。在日志中，我看到 a`RuntimeException`和`java.IllegalArgumentException: column '_id' does not exist`。

活动：

```
public class ActivityClass extends ListActivity{

private CursorAdapter curCateAdapter;
private ListView cateListview;
SimpleCursorAdapter adapter;    
@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    cateListview=getListView();
    final DatabaseConnector database = new DatabaseConnector(NoteCategoryActivity.this);
    Cursor myCursor=database.getAllCategory();
    String[] from = new String[] {"Category"};
    int[] to = new int[] { R.id.cateTextView };
    adapter= new SimpleCursorAdapter(this, R.layout.category_list, 
                    myCursor, 
                    from, to);
    cateListview.setAdapter(adapter);
}
} 
```

`DatabaseHelper`班级：

```
public class DatabaseHelper {

private static final String DB_NAME = "NameDB.db";
private static final String TABLE_NAME1 = "table1";
private static final String TABLE_NAME2 = "Categories";
private static final String KEY_ID="_id";
private static final String KEY_NAME="Name";
public static final String KEY_NCID="_cid";
public static final String KEY_CAT="Category";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

    public Cursor getAllCategory() {
    database=dbOpenHelper.getWritableDatabase();
    Cursor mCursor =database.query("Categories", new String[]{"_cid","Category"},  null, null, null, null, null);
    if (mCursor != null) {
mCursor.moveToFirst();
          }
    return mCursor;
} 
```

在`category_list.xml`中，我定义了`RelativeLayout`这个文件中使用的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     > 
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/cateTextView" 
       android:layout_width="fill_parent"
       android:layout_height="wrap_content" 
       android:textSize="18sp" 
       android:gravity="center_vertical"
      />
</RelativeLayout> 
```

`logcat`输出：

```
02-26 15:17:35.729: E/AndroidRuntime(17757): FATAL EXCEPTION: main
02-26 15:17:35.729: E/AndroidRuntime(17757): java.lang.RuntimeException: Unable to start activity ComponentInfo{packagename.MyActivity}: java.lang.IllegalArgumentException: column '_id' does not exist
02-26 15:17:35.729: E/AndroidRuntime(17757):at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-26 15:17:35.729: E/AndroidRuntime(17757):at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-26 15:17:35.729: E/AndroidRuntime(17757):at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-26 15:17:35.729: E/AndroidRuntime(17757):at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-26 15:17:35.729: E/AndroidRuntime(17757):at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 15:17:35.729: E/AndroidRuntime(17757):at android.os.Looper.loop(Looper.java:123)
02-26 15:17:35.729: E/AndroidRuntime(17757):at android.app.ActivityThread.main(ActivityThread.java:3683)
02-26 15:17:35.729: E/AndroidRuntime(17757):at java.lang.reflect.Method.invokeNative(Native Method)
02-26 15:17:35.729: E/AndroidRuntime(17757):at java.lang.reflect.Method.invoke(Method.java:507)
02-26 15:17:35.729: E/AndroidRuntime(17757):at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at dalvik.system.NativeStart.main(Native Method)
02-26 15:17:35.729: E/AndroidRuntime(17757): Caused by: java.lang.IllegalArgumentException: column '_id' does not exist
02-26 15:17:35.729: E/AndroidRuntime(17757):    at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:314)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at android.widget.CursorAdapter.init(CursorAdapter.java:111)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at android.widget.CursorAdapter.<init>(CursorAdapter.java:90)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at android.widget.ResourceCursorAdapter.<init>(ResourceCursorAdapter.java:47)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at android.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:84)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at intuition.itlabs.app.makenotes.MyActivity.onCreate(NoteCategoryActivity.java:39)
02-26 15:17:35.729: E/AndroidRuntime(17757):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:03:24.097

SimpleCursorAdapter 需要 _id 列才能正常工作。选择数据时，您应该为您的 id 列添加别名：“_cid as _id”。[使用谷歌。](https://stackoverflow.com/questions/5536795/simplecursoradapter-not-working)

# knockout.js - Using multiple value filter in knockout

> ID：15085779
> 
> 赞同：0
> 
> 时间：2013-02-26T09:43:50.127
> 
> 标签：knockout.js

I have an ko.observableArray that I want to apply a filter when displaying the result.

Here is my fiddle: [Fiddle](http://jsfiddle.net/X3LMR/3/)

```
var myViewModel = {
departments: ko.observableArray([{
        departmentname: 'IT'
    }, 
    {
        departmentname: 'Admin'
    }, 
    {
        departmentname: 'Technical'
    }, 
    {
        departmentname: 'Operations'
    }]),
filters: "IT"
}; 
```

As you can see from the fiddle the filter work if you filter for one value.

but I require to filter for more than one value eg.

```
filters: "IT","Admin" 
```

Is there a way to do this?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:17:51.060

I'd use a computed observable to provide a filtered array. I've changed your view model to be a function, as I was having problem with referencing other elements of the view model in the computed:

```
var myViewModel = function(){
    var self = this;
    self.departments = ko.observableArray([{
        departmentname: 'IT'
    }, {
        departmentname: 'Admin'
    }, {
        departmentname: 'Technical'
    }, {
        departmentname: 'Operations'
    }]);
    self.filters =  ko.observableArray(["IT", "Admin"]);
    self.filterdept = ko.computed(function () {
        var filteredArray = ko.utils.arrayFilter(self.departments(), function (department) {
            return self.filters().indexOf(department.departmentname) != -1;
        });

        return filteredArray;
    });
}; 
```

And then change the binding from a with to a foreach:

```
<div data-bind="foreach: filterdept()"> <span data-bind="text: departmentname"></span> 
```

And change the binding to this:

```
var vm = new myViewModel();
ko.applyBindings(vm); 
```

[http://jsfiddle.net/manzanotti/X3LMR/6/](http://jsfiddle.net/manzanotti/X3LMR/6/)

# typo3 - 获取TYPO3页面最后修改的时间戳，tstamp和SYS_LASTCHANGED的区别

> ID：15085784
> 
> 赞同：7
> 
> 时间：2013-02-26T09:44:11.887
> 
> 标签：typo3, last-modified

获取 TYPO3 页面（及其 *tt_content*）的最后修改日期的正确方法是什么？

*表页*的属性中有 2 个字段：*tstamp*和 SYS_LASTCHANGED。

在[本文](http://xavier.perseguers.ch/tutoriels/typo3/articles/typoscript/derniere-modification.html)中，建议使用 SYS_LASTCHANGED。但是在这种情况下*tstamp的作用是什么？*

我们应该使用哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T10:52:45.223

**tstamp**是页面记录本身的修改时间。**SYS_LASTCHANGED**是页面或其内容的修改时间。一旦页面在前端呈现，它就会更新，而不是在后端更改之后。但是，由于这一点，它还包括对驻留在不同页面上的内容记录的更改，并使用“插入记录”内容元素插入给定页面。

**注意**：在**TYPO3 4.5 LTS**中测试，可能无法在更高版本中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-17T19:25:53.713

`tstamp`是存储在 pages 表中的数据的最后一次更改的日期和时间。它仅在页面属性更改时更新，而不是页面内容。

`SYS_LASTCHANGED`通常被称为页面的真正最后更新，包括其内容，但这似乎根本不是真的，也不值得信赖。我不知道究竟是什么触发了它的变化，但它似乎与页面渲染有关。更奇怪的是它可能`0`在已经渲染的页面上。我的建议是永远不要依赖`SYS_LASTCHANGED`.

我们获取显示页面的最后更改的方法目前如下：
我们添加`<time date-current="{data.tstamp}"><time>`到我们的自定义 Contents/Partials/Header/All.html（您需要覆盖流体样式内容元素）和我们的页面模板。然后一个 java 脚本完成工作以找出最新的更改并将 html 插入页面，显示最后的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T21:49:00.537

字段 SYS_LASTCHANGED 仅在页面呈现后在**前端更新。**

*   检查站点地图中的 lastmod
*   编辑页面上的内容元素
*   前端调用页面
*   再次检查站点地图

# ibm-mq - 执行文件以按顺序传输队列？

> ID：15085788
> 
> 赞同：0
> 
> 时间：2013-02-26T09:44:31.657
> 
> 标签：ibm-mq, file-transfer, mq, websphere-mq-fte

我们目前正在实施 mq fte 解决方案

其中一个项目需要执行文件到队列功能，因为目标系统只从 mq 读取。

我们正在寻找一种方法，不仅可以将文件上传到队列，还可以保持文件的顺序。

我们需要先上传最旧的文件（按修改或创建日期），然后在文件夹中最旧的文件上传。

有人在 fte 上提出过这个要求吗？你是怎么处理的呢 ？

源系统是 windows 。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:00:25.887

这取决于您的设置。您的场景中是否有一个队列管理器？源系统是否与目标系统共享同一个本地队列管理器？

默认情况下，消息的顺序可能会得到保证，正如 MQ v7 Infocenter 在[Priority](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzal.doc/fg12610_.htm)一章中所述，在这些情况下：

> 如果应用程序将一系列消息放入队列中，则另一个应用程序可以按照放置这些消息的顺序检索这些消息，前提是：
> 
> *   消息都具有相同的优先级
> *   消息都放在同一个工作单元内，或者全部放在一个工作单元外
> *   队列对于放置应用程序是本地的
> 
> 如果不满足这些条件，并且应用程序依赖于按特定顺序检索的消息，则应用程序必须在消息数据中包含排序信息，或者建立一种在发送下一个消息之前确认收到消息的方法。

如果您不满足这些要求（例如，当通信跨越多个队列管理器时），您可以通过以下方式满足要求：

*   确保当且仅当接收者确认收到上一条消息时才放置下一条消息（例如通过 MQ 回复消息）
*   使用[消息组](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzal.doc/fg10800_.htm)按逻辑顺序检索消息 - 这需要通过放置应用程序在 MQMD 中设置*GroupId*和*MsgSeqNumber*，然后通过获取应用程序使用 MQGMO_LOGICAL_ORDER 选项（请参阅[逻辑和物理排序](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzal.doc/fg12620_.htm)一章）

# flash - 选项卡布局内的选项卡

> ID：15085790
> 
> 赞同：1
> 
> 时间：2013-02-26T09:44:35.267
> 
> 标签：flash, apache-flex, user-interface, tabs, navigation

在我开始写代码之前，我想问你们最好的方法来做到这一点。

首先，看一下这张图片： [![界面](../Images/b8a40e791a325841419c6781ed683f8a.png)](https://i.stack.imgur.com/7qLzH.png)

现在让我快速解释一下这个界面应该如何工作： - 如果您单击任何底部按钮/选项卡，顶部按钮/选项卡和内容将根据选择而改变。因此，当您单击底部的“概述”时，您将在顶部看到一个新菜单，显示您在图像中看到的选项。顶部的这些选项将再次更改显示的内容。

你会怎么做？

另外，我会提到这个窗口将被缩放以适合窗口，所以我需要能够将选项卡/按钮放置在我需要它们的位置（例如，ll 但最后一个（在顶部和底部栏上）到左边，最后一个在右边）。

我的第一个想法是简单地使用带有 tabNavigator 的 tabNavigator。但我更愿意问你们是否有更好的方法来做到这一点，或者这是否是一个好方法。

哦，我正在使用 Flex (Flash Builder 4.6)。

欢迎任何提示和想法。

提前非常感谢！

# spring - Spring 3.1 @Cacheable 与 ehcache 不起作用

> ID：15085792
> 
> 赞同：1
> 
> 时间：2013-02-26T09:44:41.047
> 
> 标签：spring, ehcache

我的带有 Spring 和 ehcache 的 @Cacheable 不起作用，缓存中没有数据。当应用程序调用可缓存方法getFolProfile 时，总是调用数据库而不是缓存。请你告诉我我的代码有什么问题。

我的根上下文.xml：

```
 <cache:annotation-driven proxy-target-class="true"/>   
    <bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" p:configLocation="classpath:/cache/ehcache.xml"  /> 
    <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager" p:cacheManager-ref="ehcache"/> 
```

我的服务：

```
 import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.cache.annotation.Cacheable;
    import org.springframework.stereotype.Service;

    @Service
    public class FolManager {
@Autowired
FolDao folDao;

@Cacheable(value = "oneCache", key = "#email")
public FolProfileForm getFolProfile(String email) {
    return folDao.retrieveByLogin(email);
}
    } 
```

我的 ehcache.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">
    <diskStore path="c:/tmp" />
    <defaultCache maxElementsInMemory="10000" eternal="false" timeToIdleSeconds="120"
    timeToLiveSeconds="120" overflowToDisk="true" diskSpoolBufferSizeMB="30" maxElementsOnDisk="10000000"
    diskPersistent="false" diskExpiryThreadIntervalSeconds="120" memoryStoreEvictionPolicy="LRU" />
    <cache name="oneCache" maxElementsInMemory="100000" maxElementsOnDisk="10000000" eternal="true" diskPersistent="true"
    overflowToDisk="true" diskSpoolBufferSizeMB="20" memoryStoreEvictionPolicy="LFU" />
    </ehcache> 
```

感谢您的帮助米歇尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T06:52:22.673

看起来您正在服务层中定义缓存。在[http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cache.html](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cache.html)中，特别注明如下：

> 笔记
> 
> `<cache:annotation-driven/>`仅在定义它的同一应用程序上下文中的 bean 上查找 @Cacheable/@CacheEvict。这意味着，如果您`<cache:annotation-driven/>`为 DispatcherServlet 放入 WebApplicationContext，它只会检查控制器中的 @Cacheable/@CacheEvict beans，而不您的服务。有关更多信息，请参阅第 16.2 节，“DispatcherServlet”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:47:02.760

添加这个

```
<cache:annotation-driven cache-manager="cacheManager"  /> 
```

你必须告诉 Spring 缓存管理器在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:01:26.013

当 proxy-target-class 属性设置为 true 时，将创建基于类的代理。CGLIB 将用于为给定的目标对象创建代理。确保您的依赖项中有 CGLIB。

如果您可以选择，请通过将 proxy-target-class 属性设置为 false 并在您的类上实现至少一个接口来首选 JDK 动态代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T16:30:51.747

请检查您的 ehCache 日志中是否存在以下异常：

```
java.io.NotSerializableException: com.googlecode.ehcache.annotations.RefreshableCacheEntry 
```

您使用磁盘持久缓存 (diskPersistent=true)，因此您必须检查您的 FolProfileForm 对象是否可序列化。从 ehCache 文档：

> 只有可序列化的数据才能放入 DiskStore。写入和写入磁盘使用 ObjectInputStream 和 Java 序列化机制。任何溢出到磁盘存储的不可序列化数据都将被删除，并引发 NotSerializableException。

可能是您的数据没有放置到您的缓存（文件系统）中，因此它会一次又一次地尝试从方法调用中获取它。您可以使用内存存储缓存，甚至可以保存不可序列化的数据。

# c# - 在 ASP.NET 的单个 XML 文件中使用 ELMAH 日志异常

> ID：15085798
> 
> 赞同：1
> 
> 时间：2013-02-26T09:44:48.297
> 
> 标签：c#, asp.net, elmah

ELMAH 有一些非常神奇的功能，但有没有办法将所有异常记录在单个 XML 文件中，而不是为每个将被用户一遍又一遍地捕获或生成的单个异常生成新文件。

亲切的问候法赫德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T04:09:26.980

这是不可能的。但是，elmah 是开源的，因此您可以根据自己的要求对其进行更改。

# java - driver.findElement(By.id( 字符串值并点击

> ID：15085799
> 
> 赞同：-3
> 
> 时间：2013-02-26T09:44:59.517
> 
> 标签：java, selenium-webdriver

```
String button_name = "user-name";
driver.findElement(By.id("button_name")).click(); 
```

我陷入了上述情况，我需要找到并单击字符串中的 id `driver.findElement(By.id(STRING)).click`。请帮助我如何编写我的代码段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:50:30.877

```
string button_name = "user-name";
driver.findElement(By.id(button_name)).click(); 
```

对我来说很好。

# jquery - 如何使用 jquery ajax 将数据从表单传递到 webmethod？

> ID：15085800
> 
> 赞同：1
> 
> 时间：2013-02-26T09:45:05.040
> 
> 标签：jquery

我在asp.net webform中有一个像这样的联系表格

```
<div id="sample" style="display:none"> 
            <h2>Sample Data</h2> 
            <p>Your email was successful!!</p> 
            <p>You can press ESC to close this dialog or click <a href="#" class="simplemodal-close">close</a>.</p> 
        </div> 
    <form id="contactForm" runat="server">
        <div align="center">
            <table>
                <tr>
                    <td>
                        <b>CONTACT</b>
                    </td>
                </tr>
                <tr>
                    <td>
                        Name:
                    </td>
                    <td>
                        <asp:TextBox ID="Txtname" runat="server" Width="220px" placeholder="Name" ClientIDMode="Static"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="rfvname" runat="server" ErrorMessage="Please enter your name"
                            Style="color: Red;" Display="Dynamic" ControlToValidate="Txtname"></asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator ID="revname" ControlToValidate="Txtname" ValidationExpression="^[a-zA-Z]+$"
                            Style="color: Red;" Display="Dynamic" runat="server" ErrorMessage="Enter Alphabets only"></asp:RegularExpressionValidator>
                    </td>
                </tr>
                <tr>
                    <td>
                        E-Mail:
                    </td>
                    <td>
                        <asp:TextBox ID="Txtemail" runat="server" Width="220px" placeholder="Email" ClientIDMode="Static"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="rfvEmail" runat="server" ErrorMessage="Please enter your E-mail"
                            Style="color: Red;" ControlToValidate="Txtemail" Display="Dynamic"></asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator ID="revEmail" ControlToValidate="Txtemail" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
                            Style="color: Red;" Display="Dynamic" runat="server" ErrorMessage="Please Enter valid mailId(ex:asm@gmail.com)"></asp:RegularExpressionValidator>
                    </td>
                </tr>
                <tr>
                    <td>
                        Company:
                    </td>
                    <td>
                        <asp:TextBox ID="Txtcompany" runat="server" Width="220px" placeholder="Company" ClientIDMode="Static"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="rfvcompany" runat="server" ErrorMessage="Please enter your company name"
                            Style="color: Red;" Display="Dynamic" ControlToValidate="Txtcompany"></asp:RequiredFieldValidator>
                    </td>
                </tr>
                <tr>
                    <td>
                        Phone:
                    </td>
                    <td>
                        <asp:TextBox ID="Txtphone" name="Phone" runat="server" Width="220px" placeholder="Phone"
                            ClientIDMode="Static"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="rfvphone" runat="server" ErrorMessage="Please enter your phone number"
                            Style="color: Red;" Display="Dynamic" ControlToValidate="Txtphone"></asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator ID="revphone" runat="server" Display="Dynamic" ErrorMessage="Enter digits only"
                            Style="color: Red;" ValidationExpression="^[0-9]+$" ControlToValidate="Txtphone"></asp:RegularExpressionValidator>
                    </td>
                </tr>
                <tr>
                    <td>
                        Message:
                    </td>
                    <td>
                        <asp:TextBox ID="Txtmessage" name="Message" runat="server" TextMode="MultiLine" Rows="4"
                            Width="220px" ClientIDMode="Static"> </asp:TextBox>
                        <asp:RequiredFieldValidator ID="rfvmsg" runat="server" Display="Dynamic" ErrorMessage="Please enter your message."
                            Style="color: Red;" ControlToValidate="Txtmessage"></asp:RequiredFieldValidator>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Button ID="Btnsend" runat="server" Text="SEND ENQUIRY" />
                    </td>
                </tr>
            </table>
        </div>
        </form> 
```

通过使用以下脚本，我将数据传递给这样的 webmethod

```
<script type="text/javascript">
        $(document).ready(function () {            
            $('#Btnsend').click(function () {
                $.ajax({
                    type: "POST",
                    url: "Default.aspx/SendMail",
                    data: "{'name': '" + $('#Txtname').val() + "', 'email': '" + $('#Txtemail').val() + "','company':' " + $('#Txtcompany').val() + "','phone':' " + $('#Txtphone').val() + "','message':' " + $('#Txtmessage').val() + "'}",                    
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {

                        $("#sample").modal({
                            opacity: 80,
                            overlayCss: { backgroundColor: "#fff" }
                        });

                    },
                    error: function (data) {
                        //alert(data.d);
                        alert("error");
                    }
            });
        });

    });
</script> 
```

这是 Default.aspx.cs 页面，我的 WebMethod 是这样的

```
[WebMethod]
public static string SendMail(string name, string email, string company, string phone, string message)
    {       
       System.Net.Mail.MailMessage mailer = new System.Net.Mail.MailMessage();
       mailer.IsBodyHtml = true;
       mailer.From = new MailAddress("XXXXXX", name, Encoding.UTF8);
       mailer.To.Add(new MailAddress("XXXX-----"));
       mailer.Body = "Company:" + company + ",";
       mailer.Body += "Message:" + message + ",";
       mailer.Body += "Phone:" + phone + "/ " + email;
       SmtpClient smtp = new SmtpClient();
       smtp.Host = "smtpauth.com";
       smtp.Port = 25;
       smtp.UseDefaultCredentials = false;
       smtp.Credentials = new System.Net.NetworkCredential("XXXXXX", "XXXXXXXXXX");
       try
       {
           smtp.Send(mailer);          
           return "ok";

       }
       catch (Exception ex)
       {
           return "error";

       } 
```

现在我的问题是当我单击按钮时 jquery ajax 函数不起作用，当我调试 Jquery ajax 函数时它正在工作可能是什么问题？如果成功，我需要显示一个在我的代码中不起作用的 modalpopUp。谁能帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T21:10:50.373

我有类似的东西，我使用对话框和 asp 控件将信息传递回后面的代码，并且您的按钮看起来与我尝试使用的相似

```
<td>
    <asp:Button ID="Btnsend" runat="server" Text="SEND ENQUIRY" />
 </td>

<td>
   <asp:Button ID="Btnsend" runat="server" Text="SEND ENQUIRY" OnClick="calltheCodeBehindfunc" UseSubmitBehavior="false" />
 </td> 
```

把它放在允许从 jQuery 对话框调用后面的代码的按钮中。

# export - Crystal 报表导出和打印按钮在 Crystal 报表查看器 13.0 中不起作用。

> ID：15085801
> 
> 赞同：2
> 
> 时间：2013-02-26T09:45:04.933
> 
> 标签：export, crystal-reports-2010

我正在使用水晶报表 13.0。内置打印按钮在 Mozilla Firefox 和 Chrome 中不起作用。但是，这在 Internet Explorer 中运行良好。

谁能帮我。

# mongodb - 该数据的最佳 MongoDb 模式是什么

> ID：15085802
> 
> 赞同：0
> 
> 时间：2013-02-26T09:45:05.517
> 
> 标签：mongodb, schema, nosql

好的，我将开始说我不是新手，但我正在寻找最佳解决方案。

为简单起见，我有 4 向关系：

```
Busines
{
 bid: unique,
 name: string
}

Client
{
 cid: unique,
 name: string
}

Product
{
 pid: unique,
 name: string
}

Order
{
 oid: unique,
 bid: FK,
 cid: FK,
 pid: FK
} 
```

在 Mongo 中构建它的最佳方法是什么？

请注意，同一个客户也可以在许多业务和同一个产品中。

所以有时我需要根据客户的所有订单进行选择，并将数据按业务分组，有时按产品分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:10:58.693

考虑到您的评论：

> 我同意，但问题在于速度，例如 MongoDB 的分片/复制比 MySQL 更好......而且我将有很多小订单元素（以百万计），这里 RDBS 将有它的劣势。 .. :(

我相信你看错了。如果 MongoDB 以一种更快的方式适合您的场景，它只会比 RDBMS 更快。

在大多数数据库中，数百万行甚至不值得分片，即使是商品服务器也可以处理至少几 TB 的信息。分片来自于增加写入容量的需要，就像它在 RDBMS 技术中所做的那样，而不一定来自于数据的大小。

但是，要回答架构问题，我会保持原样，除非我会删除订单并在客户端内部替换它：

```
{
    _id: ObjectId(),
    name: 'sammaye',
    orders: [
        {oid:{},bid:{},cid:{},pid:{}},
        { //etc }
    ]
} 
```

它是一个小而巨大的对象，不会造成太多问题，也不会每天增加 100 个，因此不会造成严重和直接的碎片。

如果您发现它确实会导致您的流量和订单率碎片化，您总是可以使用 2 大小分配的力量（[http://docs.mongodb.org/manual/reference/command/collMod/](http://docs.mongodb.org/manual/reference/command/collMod/)）来提供帮助，但是我应该警告这实际上在短期内性能较差，因此不要在不需要它的情况下应用此选项。

也就是说，根据您提供给我们的信息。我将如何设计该架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:54:44.337

要提供另一种方法，您可以将其保留`Clients`为单独的集合，并将（至少部分）`Product`信息嵌入到`Order`.

在下订单的时间点了解客户订购的内容（以及他们支付的价格、货币等）通常很重要。您仍会保留对产品的引用，但这意味着您可以查看历史订单并实际查看客户当时购买的商品。产品细节随着时间的推移合法地改变。

这仍然意味着快速读取；我假设业务集合会比客户端小得多，所以也许你可以在应用程序级别处理一些事情（即缓存业务，这样你就不会在数据库上查找每个）

我很欣赏我正在谈论的大部分信息目前不在产品文档中，但可能需要考虑一些事情。

当然有一个文档大小限制，如果您对产品信息（或其中一些）进行非规范化并且单个客户可以为许多企业下订单，您需要检查您是否有空间在客户集合中保存此信息 - 但是这取决于订单的数量和它们的大小等。

无论如何，已经有一些关于性能等技术的很好的答案，只是想我会提供不同的意见。

# android - 使 imageview 从网站上的最新帖子动态加载图像

> ID：15085804
> 
> 赞同：0
> 
> 时间：2013-02-26T09:45:08.557
> 
> 标签：android, android-imageview, textview

我有一个应用程序，它的主要布局有一个 imageview 和一个 textview。我希望 imageview 加载任何图像是网站的缩略图和文本以加载网站上帖子的标题。布局看起来像[这样](http://dribbble.com/shots/942337-UltraLinx-Mobile-Site?list=searches&tag=ultralinx)。提前致谢。

我已经搜索了互联网无济于事，感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:50:44.927

没有什么“现成的”可用。

你必须：

*   查找网站 API 是什么（或创建一个）；
*   调用此 API 以获取站点数据（通常为 JSON 或 XML）；
*   将该数据解析为有意义的信息；
*   下载图像（通常作为 Bitmap 对象）；
*   并使用该方法将此 Bitmap 设置为 ImageView`.setImageBitmap(Bitmap);`

# ios - 应用内购买本地化不支持的语言

> ID：15085807
> 
> 赞同：0
> 
> 时间：2013-02-26T09:45:16.443
> 
> 标签：ios, localization, in-app-purchase

如何使用不受支持的语言（如阿拉伯语应用内购买）添加**显示名称**和**描述？**

# javascript - 使用 javascript 验证 .net 页面

> ID：15085809
> 
> 赞同：2
> 
> 时间：2013-02-26T09:45:21.060
> 
> 标签：javascript, asp.net, c#-4.0

我正在使用下面的代码来验证 asp.net 页面，而单击按钮。我想检查文本框是否为空。如果它为空意味着它不会进入服务器端点击事件。如果它有一些值意味着进程转到点击事件后面的代码。

现在我遇到了小问题。如果文本框 value == "" 表示它返回错误消息并转到服务器端单击事件。当条件为假时，我如何防止服务器端回发。

```
 <asp:Button ID="btn_add" runat="server" Text="Submit" OnClick="add_new" OnClientClick="valid_name();"/>

 function valid_name() {
        var name = document.getElementById('<%= txt_name.ClientID%>').value;
        if (name == "") {
            alert('Error Alert : You must enter a valid name !.');
            return false;
        }
        else {
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T09:47:54.247

只需更改此代码

```
OnClientClick="return valid_name();" 
```

在您的调用中添加`return`将影响单击是否通过或停止，并且因为您实际上从函数返回 true/false 取决于输入，但如果没有`return`直接调用按钮，则返回不会影响按钮。

# vb.net - 如何检查字符串中的行是否用空格分隔？

> ID：15085811
> 
> 赞同：0
> 
> 时间：2013-02-26T09:45:26.880
> 
> 标签：vb.net, string

我正在构建一个程序，通过扫描书名页并使用 OCR 来获取书的出版商……因为出版商总是在书名页的底部我认为检测由空格分隔的行是一种解决方案，但是我不知道如何测试。这是我的代码：

```
Dim builder As New StringBuilder()
Dim reader As New StringReader(txtOCR.Text)
Dim iCounter As Integer = 0
While True
    Dim line As String = reader.ReadLine()
    If line Is Nothing Then Exit While

    'i want to put the condition here

End While
txtPublisher.Text = builder.ToString() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:48:51.970

你的意思是空行吗？然后你可以这样做：

```
Dim bEmpty As Boolean 
```

然后在循环内：

```
If line.Trim().Length = 0 Then
    bEmpty = True
Else
    If bEmpty Then
        '...
    End If

    bEmpty = False
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:05:14.983

为什么不做以下事情：从底部向上直到找到第一条非空行（不知道 OCR 是如何工作的……也许最底部的行总是非空的，在这种情况下这是多余的）。在下一步中，向上直到第一个空行。中间的文字是出版商。

你不需要这样做`StringReader`：

```
Dim lines As String() = txtOCR.Text.Split(Environment.NewLine)
Dim bottom As Integer = lines.Length - 1

' Find bottom-most non-empty line.
Do While String.IsNullOrWhitespace(lines(bottom))
    bottom -= 1
Loop

' Find empty line above that
Dim top As Integer = bottom - 1

Do Until String.IsNullOrWhitespace(lines(top))
    top -= 1
Loop

Dim publisherSubset As New String(bottom - top)()
Array.Copy(lines, top + 1, publisherSubset, 0, bottom - top)
Dim publisher As String = String.Join(Environment.NewLine, publisherSubset) 
```

但老实说，我不认为这是一个特别好的方法。它不灵活，不能很好地应对意外的格式。我会改为使用正则表达式来描述发布者字符串（及其上下文）的样子。甚至可能这还不够，您必须考虑描述*整个*页面以推断哪些位是发布者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:21:18.607

假设发布者总是在最后一行并且总是在空行之后。那么也许是以下？

```
 Dim Lines as New List(Of String)
    Dim currentLine as String = ""
    Dim previousLine as String = ""

    Using reader As StreamReader = New StreamReader(txtOCR.Txt)
    currentLine = reader.ReadLine
     If String.IsNullOrWhiteSpace(previousLine) then lines.Add(currentLine)
     previousLine = currentLine
    End Using

    txtPublisher.Text = lines.LastOrDefault() 
```

如果前一行为空白/空，则忽略：

```
Dim Lines as New List(Of String) 
Using reader As StreamReader = New StreamReader(txtOCR.Txt) 
lines.Add(reader.ReadLine) 
End Using 

txtPublisher.Text = lines.LastOrDefault() 
```

# android - 有没有办法用可扩展的方式替换 EditText 中的文本，但可以保存价值？

> ID：15085812
> 
> 赞同：2
> 
> 时间：2013-02-26T09:45:30.423
> 
> 标签：android, android-edittext, spannablestring

我所拥有的：用户看到 EditText 并可以在其中输入一些数字，或者按下按钮并将一些数字插入到 EditText 中。问题是用文本替换数字，但保存数值。

例如，按下按钮后，应用程序可以插入文本 123，但该文本应替换为“For all”。我不想只插入文本，因为 Editable.toString() 将返回该文本。我不能插入像徽章这样的图像，因为应用程序是多语言的，并且为每种语言重新绘制标签会太长。

那么，我可以用可扩展的字符串“For all”替换 123，当用户按下退格键时，他会得到 12？如果可能的话，如何做这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:51:50.830

让我们从那个开始。我不知道你为什么需要这种奇怪的“翻译”，但无论如何 - 这里有一些问题：如果我要输入“123”作为数字并且我设法在退格时看到“For all”作为文本（为了收到“12”，去掉“3”）我怎么知道我输入了什么？这不能在两个`EditText`领域中完成，一个是 for `Input`，另一个是 for `Output`？您是否只想将“123”“翻译”为“For All”，或者您有一些将数字“翻译”为文本的规则？

# css - CSS - 匹配整个属性值

> ID：15085813
> 
> 赞同：1
> 
> 时间：2013-02-26T09:45:31.453
> 
> 标签：css, attributes, match

**HTML**

```
<div data-whatever='something cols-16 else'>
</div> 
```

这有效：

**将工作 - CSS**

```
[data-whatever*='cols-1'] {
    background: red;
} 
```

它会找到 div 并将其变为红色。

**不起作用 - CSS**

```
[data-whatever='cols-16'] {
    background: red;
} 
```

它不会找到 div，因为那里还有其他东西。

**问题**

工作 CSS 的问题在于它与`cols-16`.`cols-1`以及以 . 开头的任何其他内容都匹配`cols-1`。

**问题**

是否可以找到一个属性值，完全匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:56:01.580

尝试这个：

```
[data-whatever~='cols-1'] {
    background: red;
} 
```

如果我没有误解你的问题，它对我有用

编辑：我只是随机记住了〜=，尝试了一下，然后粘贴了。

但我只是用谷歌搜索了一下（我很好奇发现了[这个](http://css-tricks.com/attribute-selectors/)，这很有趣）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:07:06.197

为了定位 cols-16 类（即使它与其他类一起出现）

而不是针对 cols-1 类使用这个：

```
[data-whatever~='cols-16'] {
    background: green;
} 
```

[你可以在这个fiddle](http://jsfiddle.net/danield770/gKysf/)中看到这个工作。

有关更多信息，请参阅这篇[文章](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)（转到 #16。- X[foo~="bar"]

> 波浪号 (~) 符号允许我们定位一个属性，该属性具有一个以空格分隔的值列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:54:06.250

为了确保它只匹配`cols-1`而不*依赖* `cols-16`于`cols-16`覆盖样式的`cols-1`样式（如下），您可以：

```
[data-whatever='cols-1'],
[data-whatever^='cols-1 '],
[data-whatever*='cols-1 '],
[data-whatever$='cols-1'] {
    background: red;
} 
```

这匹配`data-whatever="cols-1"`、`data-whatever="... cols-1"`或`data-whatever="cols-1 ..."`。`data-whatever="... cols-1 ..."`

[JSFiddle](http://jsfiddle.net/kBUSZ/2/)示例。

感谢[aleation 的回答](https://stackoverflow.com/a/15086021/1317805)：`data-whatever~="cols-1"`仅在一个选择器中实现与上述相同。

--

无论如何，您的`cols-16`样式可能会覆盖您的`cols-1`样式，具体取决于它呈现的顺序：

```
[data-whatever*='cols-1'] {
    background: red;
}

[data-whatever*='cols-16'] {
    background: blue;
} 
```

/* cols-1 将是红色的。cols-16 将是蓝色 */

[JSFiddle](http://jsfiddle.net/kBUSZ/1/)示例。

# java - 表中不寻常的浮点数

> ID：15085814
> 
> 赞同：1
> 
> 时间：2013-02-26T09:45:36.020
> 
> 标签：java, floating-point

我正在构建一个系统来从异构文档中读取表格，并且想知道管理浮点数（列）的最佳方法。该列可以表示为我将使用的实数`List<Double>`（我使用的是 Java，但其他语言的经验会很有用。）我还希望将表序列化为 CSV 文件。因此，表格可能如下所示：

```
"material", "mass (g)", "volume (cm3)",
"iron", 7.8, 1.0,
"aluminium", 27.3, 9.9, 
```

和 column2（基于 1）将由`List<Double>`

```
{new Double(7.8), new Double(27.3)} 
```

我也可能希望计算密度（质量/体积）并导出一个新列（“密度（g.cml-3）”）作为列表

```
{new Double(7.8), new Double(2.76)} 
```

然而，输入值有时会丢失、不寻常或由模糊概念表示。某些转换可能会引发异常（我将捕获并替换为上述之一）。示例包括：

```
1.0E+10000
>10
10 / 0.0 (i.e. divide by zero)
Math.sqrt(-1.)
Math.tan(Math.PI/2.0) 
```

对于列表元素的异常值，我[在 Java](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html)中有以下选项

1.  空引用
2.  `Double.NaN`
3.  `Double.MAX_VALUE`
4.  `Double.POSITIVE_INFINITY`

是否有关于何时应使用上述 Java 异常值的协议？我已经[阅读了](https://stackoverflow.com/questions/13317566/what-are-the-infinity-constants-in-java-really)有关他们行为方式的问题。（我想依靠链接他们的操作）。如果有协议，这些值可以序列化并读回吗？（例如，Java 是否解析`"0x7ff0000000000000L"`为等于`Double.POSITIVE_INFINITY`

我已经为规范中的一些精度损失做好了准备（OCR 中经常出现错误、缺少数字等，所以这是一个“足够好”的练习）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:17:46.650

你有三个问题，你应该在某种程度上分开：

1.  您应该对表格条目使用什么表示形式，可能是数字、某些单位的编号数量或其他内容？

2.  浮点无穷大和 NaN 如何为您服务？

3.  浮点对象如何序列化（写入文件并从文件中读取）？

关于这些：

1.  您没有在此处指定足够的信息以获得有关如何表示表条目的良好建议。根据您的描述，根本没有理由使用浮点数。这是因为除了读取和写入条目之外，您还没有指定要对条目执行的操作。如果您不需要进行算术运算，则没有理由将值转换为浮点数或任何其他数字算术系统。您可以简单地将条目保留为其原始文本。这使得序列化变得微不足道。

2.  浮点无穷大在设计上就像数学无穷大。无穷大加上除无穷大以外的数字仍然是无穷大，等等。您应该使用浮点无穷大来表示数学无穷大。您应该避免使用浮点无穷大来表示溢出，除非您不关心丢失溢出的值。浮点 NaN 旨在表示“不是数字”。它通常用于表示“发生错误，因此我们这里没有数字可以给您。你应该在这个地方做点别的事情。” 然后由应用程序提供其他内容，可能是通过从另一个来源或并行数据结构中获取补充信息。错误包括诸如取负数的平方根或未能初始化某些数据之类的事情。（例如，

3.  写入和读取浮点值时，应注意**准确转换值**或确保您在转换中引入的错误是可以容忍的。如果您必须转换为文本（人类可读的数字）而不是写入“二进制”（具有任意值的字节），那么最好使用与浮点数的原生基数兼容的数字基数的表示法写入点系统（例如，用于二进制浮点表示的十六进制浮点数字，例如 0x3.4p-2 用于 .8125）。如果这不可行，那么您需要产生足够多的数字（转换为十进制时）以足够准确地表示浮点值，以便在读取时恢复原始值，并且您需要确保转换软件在不引入额外错误的情况下进行转换. 您还必须处理特殊值，例如无穷大和 NaN。

（请注意，`Math.tan(Math.PI/2)`它不是无穷大并且不会导致异常，因为`Math.PI/2`它不完全是 π/2，所以它的正切是有限的，而不是无穷大。）

# sql - 带日期的动态 sql 语法

> ID：15085818
> 
> 赞同：1
> 
> 时间：2013-02-26T09:45:43.140
> 
> 标签：sql, sql-server

我的动态 sql 中的这条线提供了一些动态旋转，似乎没有采用正确的日期并返回预期的结果。查询运行并且不返回任何结果。

```
and PA.DATE_RECEIVED BETWEEN 
'+ convert(varchar(10), @Startdate, 120) +' AND '+ convert(varchar(10), @Enddate, 120) +' 
```

检查它正在拾取什么值......存储过程中的一些sql。

```
select convert(varchar(10), @Startdate, 120) - 2013-02-02    
select convert(varchar(10), @Enddate, 120) - 2013-02-26 
```

用普通的sql在外面运行查询，它有效吗？问题是什么。

```
select COALESCE( PT.[description] , 'Grand Total') AS [Transaction Type], 
           Sum (AI.PRICE_INC_VAT) AS [AMOUNT (ú) CREDIT],
           P.[DESCRIPTION] AS [PRODUCT TYPE]    
From  [dbo].[T1] C     
join [dbo].[T2] S on S.[Customer_ID]=C.[Customer_ID]     
join [dbo].[T3] SO on SO.[SITE_ID]=S.[SITE_ID]    
join [dbo].[T4] OI on OI.[ORDER_ID]=SO.[SITE_ORDER_ID]    
left join [dbo].[T5] P on P.[PRODUCT_ID]=OI.[PRODUCT_ID]    
JOIN [dbo].[T6] AI ON  AI.ORDER_ITEM_ID = OI.ORDER_ITEM_ID    
JOIN T7 JBAI ON JBAI.ACTION_ITEM_ID = AI.ACTION_ITEM_ID    
JOIN T8 JB ON JB.JOB_BATCH_ID = JBAI.JOB_BATCH_ID    
JOIN T9 PA on PA.PAYMENT_ID=JB.PAYMENT_ID    
LEFT JOIN T10 CU ON JB.CUSTOMER_USER_ID = CU.CUSTOMER_USER_ID    
JOIN T11 PT ON PT.PAYMENT_TYPE_ID=PA.PAYMENT_TYPE_ID     
LEFT JOIN T12 SU ON SU.SYS_USER_ID=JB.SYS_USER_ID   
where P.[PRODUCT_CATEGORY_ID]= ( 
                        select PC.[PRODUCT_CATEGORY_ID] from [dbo].[PRODUCT_CATEGORY] PC 
                        where PC.[DESCRIPTION]='BAGS')     
and C.COMPANY_ID= '12'    
and PA.DATE_RECEIVED BETWEEN '02-FEB-2013' AND '26-FEB-2013'    
group by PT.DESCRIPTION, P.DESCRIPTION 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:06:54.330

您可能会在日期周围缺少单引号，而不是`PA.DATE_RECEIVED BETWEEN 2013-02-02 AND 2013-02-26`尝试将字符串读取：`PA.DATE_RECEIVED BETWEEN '2013-02-02' AND '2013-02-26'`。这是一个如何在字符串中获取单引号的示例：

```
DECLARE @var VARCHAR(1000) = 
    'and PA.DATE_RECEIVED BETWEEN ''' + 
    convert(varchar(10), GETDATE(), 120) +
    ''' AND ''' + 
    convert(varchar(10), GETDATE(), 120) + ''''

SELECT @var 
```

文字字符串中的单引号由 表示`''`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:08:44.577

我想你有一个报价问题。注意转义引号以使单引号出现在动态查询中

和 PA.DATE_RECEIVED BETWEEN '''+ convert(varchar(10), @Startdate, 120) +''' AND '''+ convert(varchar(10), @Enddate, 120) +'''

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:04:20.780

你试过这个：

```
and PA.DATE_RECEIVED BETWEEN @Startdate AND @Enddate 
```

您不必转换日期即可使*BETWEEN*语句起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:17:25.807

我认为您的查询中存在一些问题，（1）形成您的 sql 字符串，（2）尝试将日期与 varchar 值进行比较，以及（3）将字符串转换为日期

例如它应该是这样的；

```
declare @sql nvarchar(max), 
        @startdate varchar(50) = '20130202', --Using ISO format (yyyymmdd)
        @enddate varchar(50) = '20130226' --Using ISO format 

select @sql = 'SELECT col1, col2, ... FROM myTable WHERE mydate '+
               'between convert(date, ' + @startdate + ') and ' +
               'convert(date, ' + @enddate + ')' 
```

# php - php - 在变量中放置一个 for 循环

> ID：15085819
> 
> 赞同：0
> 
> 时间：2013-02-26T09:45:44.813
> 
> 标签：php, email, variables, loops, for-loop

我正在尝试在 html 邮件消息中回显一个 for 循环，该循环是

```
for($i=0; $i<$arrlength; $i++)
{
echo $mailroom[$i] ;
if ($i<($arrlength-1) )
{
echo " &amp; ";
}
} 
```

它完美地打印了结果，但它没有在 html 消息中打印任何结果，html 消息是

```
$headers = "From: ". "XXXX" . "<" . $frommail . ">\r\n";
$headers .= "Reply-To: " . $frommail . "\r\n";
$headers .= "Return-path: ". $frommail;
$headers .= "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";

$sendmessage = "
<html>
<head>
<title>XXXXXX DETAILS</title>
</head>
<body>
<p>DATA FOR XXXXXXXXXX</p>
<table border=1>
<tr>
<th>Booked on</th>
<th>Name</th> 
<th>Bank</th>
<th>UIN</th>
<th>Phone</th>
<th>From</th>
<th>To</th>
<th>Room No.s</th>
<th>Tariff</th>
<th>Caution Money</th>
<th>Courier</th>
<th>Bank Charges</th>
<th>Total Received</th>
</tr>
<tr>
<td>$mailtoday</td>
<td>$name (ESP)</td>
<td>&nbsp;</td>
<td>$uin</td>
<td>$phone</td>
<td>$mailfrom</td>
<td>$mailto</td>
<td>
**for($i=0; $i<$arrlength; $i++)
{
echo $mailroom[$i] ;
if ($i<($arrlength-1) )
{
echo " &amp; ";
}
}**
    </td>
<td>$room_total</td>
<td>$c_money</td>
<td>$courier</td>
<td>$b_charges</td>
<td>$totalreceived</td>
</tr>
</table>
</body>
</html>
";
` 
```

我可以将 for 循环放在一个变量中，以便我可以将它与 html 消息一起使用，或者稍后再使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:50:24.553

在尝试使用非字符串值之前，您必须关闭字符串。在这种情况下，我会这样做：

```
"<td>$name (ESP)</td>
<td>&nbsp;</td>
<td>$uin</td>
<td>$phone</td>
<td>$mailfrom</td>
<td>$mailto</td>
<td>" . implode(' &amp; ', $mailroom) . "</td>
<td>$room_total</td>
<td>$c_money</td>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:50:50.080

您不能`for`在字符串中使用 -loop（或任何其他语句）。

相反，您需要在循环内连接您的字符串。例如：

```
$myString = "test ";
for($i = 0; $i < 3; $i++) {
  $myString = $myString . "$i, ";
}
$myString = $myString . " end!";
echo $myString; // shows "test 1, 2, 3, end!" 
```

（我创建了这个小例子，因为你的代码片段很长，但同样适用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:48:21.833

使用这段代码，你错过了 php 的开始`<?php`和结束`?>`标签

```
$sendmessage .= ".........<td>";
for($i=0; $i<$arrlength; $i++)
{
    $sendmessage .= $mailroom[$i] ;
    if ($i<($arrlength-1) )
     {
       $sendmessage .= " &amp; ";
   }
}
$sendmessage .= "</td>........."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:52:27.077

不，你不能这样做。双引号用于变量替换。不适用于代码运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:59:14.187

尝试这个

```
$headers = "From: ". "XXXX" . "<" . $frommail . ">\r\n";
$headers .= "Reply-To: " . $frommail . "\r\n";
$headers .= "Return-path: ". $frommail;
$headers .= "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";

$sendmessage = "
<html>
<head>
<title>XXXXXX DETAILS</title>
</head>
<body>
<p>DATA FOR XXXXXXXXXX</p>
<table border=1>
<tr>
<th>Booked on</th>
<th>Name</th> 
<th>Bank</th>
<th>UIN</th>
<th>Phone</th>
<th>From</th>
<th>To</th>
<th>Room No.s</th>
<th>Tariff</th>
<th>Caution Money</th>
<th>Courier</th>
<th>Bank Charges</th>
<th>Total Received</th>
</tr>
<tr>
<td>$mailtoday</td>
<td>$name (ESP)</td>
<td>&nbsp;</td>
<td>$uin</td>
<td>$phone</td>
<td>$mailfrom</td>
<td>$mailto</td>
<td>";
for($i=0; $i<$arrlength; $i++)
{
$sendmessage.= $mailroom[$i] ;
if ($i<($arrlength-1) )
{
$sendmessage .= "&amp; ";
}
}

$sendmessage.=" </td>
<td>$room_total</td>
<td>$c_money</td>
<td>$courier</td>
<td>$b_charges</td>
<td>$totalreceived</td>
</tr>
</table>
</body>
</html>"; 
```

# mysql - SQL查询从表中选择计数

> ID：15085822
> 
> 赞同：1
> 
> 时间：2013-02-26T09:45:53.307
> 
> 标签：mysql, sql

我有一张像这样的桌子：

```
id_cat  id_city 
1   33
1   33
1   33
2   44
2   33
2   55 
```

我想获得如下结果：

```
id_cat id_city cat_count 
1      33      3  
2      44      1
2      33      1
2      55      1 
```

我怎样才能建立我的查询？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:47:07.607

使用`COUNT()`which 是一个聚合函数和一个`GROUP BY`子句。

```
SELECT  id_cat, id_city, COUNT(*) cat_Count
FROM    tableName 
GROUP   BY id_cat, id_city 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/56b40/1)

# c++ - 多次调用 std::condition_variable::notify_one() 而没有上下文切换

> ID：15085823
> 
> 赞同：3
> 
> 时间：2013-02-26T09:45:54.227
> 
> 标签：c++, c++11, condition-variable

在此示例中将唤醒多少个等待线程：

**第一个线程**：

```
void wakeUp2Threads()
{
    std::unique_lock<std::mutex> lock(condvar_mutex);

    condvar.notify_one();
    condvar.notify_one();
} 
```

**第二个线程**：

```
{
    std::unique_lock<std::mutex> lock(condvar_mutex);

    condvar.wait(lock); <- 2nd thread has entered here before 1st thread entered wakeUp2Threads.
} 
```

**第三个线程**（与第二个相同）：

```
{
    std::unique_lock<std::mutex> lock(condvar_mutex);

    condvar.wait(lock); <- 3rd thread has entered here before 1st thread entered wakeUp2Threads.
} 
```

是否可以保证在此示例中两个通知都将传递到不同的线程，而不是多次传递给同一个线程？

即 notify_one() 是什么意思：

```
1) notify one thread, no matter has it been already notified (but has not been woken up yet), or not. (* see note)
or
2) notify one thread, but only this one, which has not been notified yet. 
```

**（*） 注意！**我不是在这里谈论场景“等待线程已经在过去的某个地方得到通知，被唤醒，做一些事情并再次进入 condvar.wait()” - 当然，在这种情况下，可以唤醒几个 notify_one() 例程同样的线程一遍又一遍。

**我说的是另一个案例**：

notify_one() 已通知等待线程唤醒，但在此等待线程从内核调度程序接收到时隙并继续执行之前 - 另一个 notify_one() 已被再次调用。**是否有可能第二个通知将再次传递到同一个线程，而它还没有从第一个通知中唤醒？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:51:18.443

该`notify_one`调用以原子方式解除对一个线程的阻塞。这意味着当第二次调用它时，它不能解除阻塞同一个线程，因为它不再被阻塞。

这在标准的第 30.5/3 和 30.5.1/7 节中有所规定。

# c# - C#中的回调函数

> ID：15085824
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:45:55.963
> 
> 标签：c#, asynchronous, methods, callback

我必须使用回调（异步）、结果..等调用 api（SOAP）。我必须使用的方法：

```
public IAsyncResult BeginInsertIncident(
    string userName, string password, string MsgId, string ThirdPartyRef,
    string Type, string EmployeeId, string ShortDescription, string Details,
    string Category, string Service, string OwnerGrp, string OwnerRep,
    string SecondLevelGrp, string SecondLevelRep, string ThirdLevelGrp,
    string ThirdLevelRep, string Impact, string Urgency, string Priority,
    string Source, string Status, string State, string Solution,
    string ResolvedDate, string Cause, string Approved, AsyncCallback callback,
    object asyncState);

EndInsertIncident(IAsyncResult asyncResult, out string msg); 
```

EndInsertIncident 关闭票证系统中的请求，如果票证正确完成，则给出结果。

现状：

```
server3.ILTISAPI api = new servert3.ILTISAPI();
api.BeginInsertIncident(username, "", msg_id, "", "", windows_user,
    "BISS - Software Deployment", "", "", "NOT DETERMINED", "", "", "", "", "",
    "", "5 - BAU", "3 - BAU", "", "Interface", "", "", "", "", "", "", null,
    null); 
```

那么，现在，我如何实现回调函数？api“InsertIncidentCompleted”的状态已经为空，因为我认为我不调用 EndInsertIncident。

我是 C# 新手，需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:50:47.900

[`AsyncCallback`](http://msdn.microsoft.com/en-us/library/system.asynccallback.aspx)是一个委托，它返回 void 并接受一个类型的参数`IAsyncResult`。

因此，使用此签名创建一个方法并将其作为倒数第二个参数传递：

```
private void InsertIncidentCallback(IAsyncResult result)
{
    // do something and then:
    string message;
    api.EndInsertIncident(result, out message);
} 
```

像这样传递它：

```
api.BeginInsertIncident(username, "", msg_id, "", "", windows_user,
    "BISS - Software Deployment", "", "", "NOT DETERMINED", "", "", "", "", "",
    "", "5 - BAU", "3 - BAU", "", "Interface", "", "", "", "", "", "",
    InsertIncidentCallback, null); 
```

如果您不能创建`api`类的成员变量并希望将其传递给回调，则必须执行以下操作：

```
private void InsertIncidentCallback(server3.ILTISAPI api, IAsyncResult result)
{
    // do something and then:
    string message;
    api.EndInsertIncident(result, out message);
} 
```

为了能够将其作为回调传递，您必须使用委托：

```
api.BeginInsertIncident(..., r => InsertIncidentCallback(api, r), null); 
```

# mysql - 如何计算数据库上的水平值？

> ID：15085825
> 
> 赞同：5
> 
> 时间：2013-02-26T09:45:56.447
> 
> 标签：mysql, count, field, unpivot

假设我有一个具有如下水平结构的数据库：

```
ID | NAME | DATA1 | DATA2 | DATA3 | DATA4 | DATA5 | DATA6 | DATA7
 1 |  mmm |   0   |   1   |   0   |   3   |   5   |   1   |   0
 2 |  bbb |   0   |   0   |   0   |   1   |   0   |   1   |   1 
```

信息是数据字段，我想计算某个判别式的所有时间，例如“大于 0”

我认为它是循环遍历所有字段，计数或`COUNT()`每个`DATA`字段的方式，所以`SUM()`这些`7`查询......有人有另一个想法吗？

在这种情况下，结果`"count every DATA field with a value over 0"`是 = 7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:56:46.740

没有内置语法允许您动态引用一组列，即无需显式命名它们。如果您想要动态性，则需要查询元数据以获取所需的列名，然后动态构建最终查询。

但在此之前，您仍然需要了解动态查询应该如何执行工作本身。因此，您首先需要解决*有限*列集上的问题。

解决这个问题的方法不止一种。[@bluefeet 建议](https://stackoverflow.com/a/15090967/297408)的方法可能是更清晰但效率较低的方法之一。您可以尝试至少两种选择：

1.  使用条件聚合分别计算每一列，并将所有结果加到一个表达式中：

    ```
    SELECT
      COUNT(DATA1 > 0 OR NULL) +
      COUNT(DATA2 > 0 OR NULL) +
      COUNT(DATA3 > 0 OR NULL) +
      COUNT(DATA4 > 0 OR NULL) +
      COUNT(DATA5 > 0 OR NULL) +
      COUNT(DATA6 > 0 OR NULL) +
      COUNT(DATA7 > 0 OR NULL) AS TOTAL
    FROM yourtable
    ; 
    ```

    （`OR NULL`技巧在[这里](https://stackoverflow.com/questions/5011239/why-do-i-need-or-null-in-mysql-when-counting-rows-with-a-condition "为什么在计算带有条件的行时我需要在 MySQL 中使用“OR NULL”")解释。）

2.  使用交叉连接将列取消透视`DATA`到虚拟表，然后将条件应用于未透视列：

    ```
    SELECT
      COUNT(*) AS TOTAL
    FROM (
      SELECT
        CASE s.col
          WHEN 'DATA1' THEN DATA1
          WHEN 'DATA2' THEN DATA2
          WHEN 'DATA3' THEN DATA3
          WHEN 'DATA4' THEN DATA4
          WHEN 'DATA5' THEN DATA5
          WHEN 'DATA6' THEN DATA6
          WHEN 'DATA7' THEN DATA7
        END AS DATA
      FROM yourtable
      CROSS JOIN (
        SELECT 'DATA1' AS col
        UNION ALL SELECT 'DATA2'
        UNION ALL SELECT 'DATA3'
        UNION ALL SELECT 'DATA4'
        UNION ALL SELECT 'DATA5'
        UNION ALL SELECT 'DATA6'
        UNION ALL SELECT 'DATA7'
      ) s
    ) s
    WHERE DATA > 0
    ; 
    ```

    （在某种程度上，这类似于@bluefeet 的建议，只是不使用任何 UNION。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T13:57:41.183

由于您的数据未标准化，因此您应该*取消*数据透视以获得结果。MySQL 没有 unpivot 函数，因此您可以使用`UNION ALL`查询将列转换为行。一旦数据在行中，您就可以轻松计算值的数量。我会使用类似的东西：

```
select count(*) total
from
(
  select id, name, 'data1' col, data1 as value
  from yourtable
  union all
  select id, name, 'data2' col, data2 as value
  from yourtable
  union all
  select id, name, 'data3' col, data3 as value
  from yourtable
  union all
  select id, name, 'data4' col, data4 as value
  from yourtable
  union all
  select id, name, 'data5' col, data5 as value
  from yourtable
  union all
  select id, name, 'data6' col, data6 as value
  from yourtable
  union all
  select id, name, 'data7' col, data7 as value
  from yourtable
) src
where value > 0 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/afa54/3)

# facebook - 在 facebook 应用程序中当我右键单击菜单时，它在画布外打开？

> ID：15085826
> 
> 赞同：0
> 
> 时间：2013-02-26T09:46:04.267
> 
> 标签：facebook

当我右键单击在新选项卡中打开但在画布之外的菜单时，我正在开发 Facebook 应用程序，这对我有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:43:28.927

这是浏览器的默认行为，而不是您的应用程序。我使用一些 JavaScript 来检测用户是否在 Facebook 之外查看我的应用，并将他们重定向回 Facebook Canvas URL。下面的代码将重定向那些在新标签/Windows 中打开链接的人返回到 facebook。

```
<script type="text/javascript">
if ( top === self ) {
    window.top.location = '{$canvas_url}';
}
</script> 
```

# jquery - JQuery 选择多个贝宝按钮

> ID：15085829
> 
> 赞同：1
> 
> 时间：2013-02-26T09:46:19.013
> 
> 标签：jquery

我想通过 1 个选择框选择 2 个 paypal 按钮。

我有一个最小的表单代码：

//表格

```
<form id="form1" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">

<select name="select1" id="select1">
    <option id="option1" value="1">Button1</option>
    <option id="option2" value="2">Button2</option>
</select>

<input type="image" src="images/purchase_button.png" border="0" name="submit" alt="PayPal — The safer, easier way to pay online." />
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1" />
</form> 
```

然后在运行时 jquery 会做剩下的事情：

```
$('#select1').change(function () {

if ($('option:selected', this).val() == 1) {

    $('#button1').remove(); //clean up
    $('#button2').remove(); //clean up

    $('#form1').append('<input type="hidden" name="hosted_button_id" value="button1-code-here" id="button1" />');

} else {

    $('#button1').remove(); //clean up
    $('#button2').remove(); //clean up

    $('#form1').append('<input type="hidden" name="hosted_button_id" value="button2-code-here" id="button2" />');

}

}); 
```

我的问题是，有时当我选择选项 1 按钮时，它会提交按钮 2。

当您进入贝宝支付页面时，贝宝会保存 cookie 吗？

什么时候每次都不能顺利进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:51:20.597

您的代码需要一些优化。制作它们，它将按预期工作。

首先**使用 1 个按钮**，不需要额外的按钮，因为您唯一需要做的就是*更改值*。使用一个按钮，您的整个代码都可以用这些简单的行编写。

```
$('#select1').change(function () {

    if ($('option:selected', this).val() == 1) {
        $("#button1").val("button-1-code");
    } else {
       $("#button1").val("button-2-code");
    }

}); 
```

* * *

并回答您的隔离问题：

> 我的问题是，有时当我选择选项 1 按钮时，它会提交按钮 2。

以上解决了这个问题

> 当您进入贝宝支付页面时，贝宝会保存 cookie 吗？

有时，但你不能依赖它来开发你的代码

> 什么时候每次都不能顺利进行？

上述解决方案将再次完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:52:15.837

您也可以如下使用它，

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        $('#select1').on('change',(function ()
        {
            var id    = $(this).text();
            var value = $(this).val();
            $('#button1').remove();
            $('#button2').remove();

            $('#form1').append('<input type="hidden" name="hosted_button_id" value="'+id+'-code-here" id="'+id+'" />');
        });
    });

</script> 
```

# ruby-on-rails - 安装巫术或表格后不要保存记录

> ID：15085832
> 
> 赞同：0
> 
> 时间：2013-02-26T09:46:28.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, formtastic, sorcery

我尝试为我的表对象使用rails控制台，但是当我安装巫术或formtastic（我不知道）时，我的记录没有保存。

模型

```
class Depositi < ActiveRecord::Base
 attr_accessible :code, :description
 validates_presence_of :code, :message => 'Code required!'
end 
```

看法

```
<%= semantic_form_for(@depositi) do |f| %>
    <%= f.inputs 'Dati Deposito' do %>
    <%= f.input :code, :label => 'Codice Deposito:' , :wrapper_html => { :class => 'fl' }, :required => true %>
    <%= f.input :description, :label => 'Descrizione:', :wrapper_html => { :class => 'fl'},  :input_html => {:size => '15'} %> 
    <% end %>
    <%= f.actions do %>
    <%= f.action :submit, :as => :button, :label => 'Save' %>
    <% end %>
    <% end %> 
```

这是我的调试：

```
utf8    ✓
authenticity_token  kVQ5OOkmGxqoZgbvteJ80M+lLHwopWEY0SI4YetQYsg=
depositi    {"code":"001","description":"Test this is test"}
button  
action  new 
```

控制器

```
def create
@depositi = Depositi.new(params[:depositi])

respond_to do |format|
  if @depositi.save
    format.html { redirect_to @depositi, notice: 'Record salvato con successo!' }
    format.json { render json: @depositi, status: :created, location: @depositi }
  else
    format.html { render action: "new" }
    format.json { render json: @depositi.errors, status: :unprocessable_entity }
  end
end 
```

结尾

此记录不保存！我是属性登录，我没有错误..为什么不保存？

* * *

已解决：在我看来，问题是 <%= semantic_form_for(@depositi) do |f| %> 我写的是与formtastic 渲染形式相冲突的。

# c# - 从 JavaScript 编辑选择列表时如何通过事件验证

> ID：15085836
> 
> 赞同：2
> 
> 时间：2013-02-26T09:46:42.920
> 
> 标签：c#, asp.net, .net, html-select, eventvalidation

我的 ASP.NET 站点中有两个选择列表，由服务器填充了一些元素。

```
// .aspx
<asp:dropdownlist id="abc" runat="server"></asp:dropdownlist>
<asp:dropdownlist id="def" runat="server"></asp:dropdownlist>

// .aspx.cs
abc.Items.Add(new ListItem("element1", "value1"));
def.Items.Add(new ListItem("element1", "value1")); 
```

由于现在解释的原因太复杂，我还需要用 JavaScript 修改选择列表的选项，添加一些值。

```
// In the <head> of the .aspx page
var abcList = document.getElementById("abc");
var defList = document.getElementById("def");
var newAbcElement = new Option("element2", "value2", false, false);
var newDefElement = new Option("element2", "value2", false, false);
abcList.options[abcList.length] = newAbcElement;
defList.options[defList.length] = newDefElement; 
```

当然，一旦我将表单发送回服务器（无论是通过提交还是作为来自其他一些表单元素的 PostBack `AutoPostBack="true"`），这将搞乱 Even Validation。

> 无效的回发或回调参数。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

现在，我没有资源和预算来彻底改造整个页面设计，所以：改变下拉列表的**最快**和**最简单**的方法是什么，这并不意味着我必须重写整个东西？

以便在提交表单时我的 CodeBehind 文件可以识别通过 JavaScript 添加的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:52:08.863

`ViewState`您可以完全禁用`DropDownList`.

```
<asp:dropdownlist id="abc" runat="server" EnableViewState="false"></asp:dropdownlist> 
```

对于您的问题更新：

这大大改变了这个问题。此处回答了新问题：[无效的回发或回调参数。使用 '<pages enableEventValidation="true"/>' 启用事件验证](https://stackoverflow.com/questions/228969/invalid-postback-or-callback-argument-event-validation-is-enabled-using-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:24:31.200

你有几个选择。

首先，您可能会重写您的代码，以便服务器端生成所有可能的项目，`DropDownList`然后在您的 JavaScript 中删除不需要的项目，而不是添加新的项目。

第二种选择是创建一个从`System.Web.UI.WebControls.DropDownList`. 该类应包含如下所示的一种方法。重要的是您的自定义类不会[`System.Web.UI.SupportsEventValidationAttribute`](http://msdn.microsoft.com/en-us/library/system.web.ui.supportseventvalidationattribute.aspx)添加到它 - 因此`DropDownList`基本方法将自动跳过事件验证。现在将用法替换`<asp:dropdownlist>`为您的方法。

如果您无法修改 .aspx 代码（或者您有大量的下拉列表要替换），您可以在配置中使用[标签映射](http://msdn.microsoft.com/en-us/library/ms164641%28v=vs.80%29.aspx)。

```
namespace Project.MyWebControls
{
    public class MyDropDownList : System.Web.UI.WebControls.DropDownList
    { 
        protected override bool LoadPostData(string postDataKey, NameValueCollection postCollection)
        {
            if (base.LoadPostData(postDataKey, postCollection))
                return true;

            // this means that the value selected was not present in the .Items collection
            string[] values = postCollection.GetValues(postDataKey);
            if (values == null || values.Length == 0)
                return false;

            // add the value to the Items collection so that it can be processed later on.
            this.Items.Add(new ListItem("Custom value created by JavaScript", values[0]));
            this.SetPostDataSelection(this.Items.Count - 1);
        }
    }
} 
```

请注意，根据您的代码，您可能希望`Items`在呈现之前从集合中删除这些自定义值。

.aspx 文件的示例：

```
<%@ Register TagPrefix="my" Namespace="Project.MyWebControls" Assembly="Project" %>
<my:MyDropDownList runat="server" ...></my:MyDropDownList> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:22:45.107

好的，这是您的另一种选择。您可以使用 AsyncPostBackTrigger 将这些项目添加到您的列表中。

**一些隐藏字段：**

```
<asp:TextBox ID="newItemsForAbc" runat="server" style="display:none;"></asp:TextBox>
<asp:TextBox ID="newItemsForDef" runat="server" style="display:none;"></asp:TextBox>
<asp:Button ID="addNewItems" runat="server" OnClick="addNewItems_Click"
  style="display:none;" /> 
```

**更新面板：**

```
<asp:UpdatePanel runat="server" ID="UpdatePanel" UpdateMode="Conditional">
   <ContentTemplate>
     <asp:dropdownlist id="abc" runat="server"></asp:dropdownlist>
     <asp:dropdownlist id="def" runat="server"></asp:dropdownlist>
   </ContentTemplate>
   <Triggers>
     <asp:AsyncPostBackTrigger ControlID="addNewItems" EventName="Click" />
   </Triggers>
 </asp:UpdatePanel> 
```

**用于执行异步回发的 JS 函数：**

```
<script type="text/javascript"> function UpdateStuff(value1, value2)
{
   var abcItems = document.getElementById("<%= newItemsForAbc.ClientID %>");
   var defItems = document.getElementById("<%= newItemsForDef.ClientID %>");
   abcItems.value=value1;
   defItems.value=value2;
   __doPostBack("<%= addNewItems.ClientID %>","");
}
</script> 
```

**处理按钮点击的服务器端函数：**

```
protected void addNewItems_Click(object sender, EventArgs e)
{
    string[] n1 = newItemsForAbc.Text.Split(';');
    string[] n2 = newItemsForDef.Text.Split(';');

    foreach(string i in n1)
    {
         abc.Items.Add(new ListItem(i, i));
    }

    foreach(string i in n2)
    {
         def.Items.Add(new ListItem(i,i));
    } 
} 
```

**要更新您的列表：**

```
var newAbcElements = "Element1;Element2;Element3";
var newDefElements = "Element4;Element5";
UpdateStuff(newAbcElements, newDefElements); 
```

**最后说明：** 这段代码可能无法按原样为您完成工作。您可能需要更改在字符串中存储新项目的方式，因此拆分/解析也会发生变化。您甚至可能需要不同的字符串来显示列表项及其实际值。但我相信你明白了基本的想法。

# android - 是否可以将我收到的 msg 与 xml 或 textview 和 edittext 中的资源进行比较

> ID：15085838
> 
> 赞同：1
> 
> 时间：2013-02-26T09:46:49.917
> 
> 标签：android

当我收到短信时，我可以开始另一个活动。我想知道的是**如何将文本消息与我的资源（xml 字符串）以及 textview、editText 中的内容进行比较**。**是否可以从广播接收器类中的 textview 和 edittext 值中获取参考？**下面是不比较任何值的情况下启动活动的代码。

公共类 SMSReceiver 扩展 BroadcastReceiver {

```
@Override
public void onReceive(Context context, Intent intent) 
{       
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";     
    String phonenumber = "";

    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];

        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            phonenumber=msgs[i].getOriginatingAddress(); 
            str += msgs[i].getMessageBody().toString();
            str += "\n";        
        }

        //=======launch the ShowMap1 when recieve SMS==============//
        Intent mainActivityIntent = new Intent(context, ShowMap2.class);
        mainActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        mainActivityIntent.putExtra("phn", phonenumber);
        mainActivityIntent.putExtra("sms", str);

        context.startActivity(mainActivityIntent);  
        //========================END=============================//  

    }                         
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:05:17.930

据我了解，这将是一个接收短信的全球接收器。

因此，这意味着设备可以处于睡眠状态、主屏幕、某些游戏、gmail 或任何其他应用程序；所以这意味着 Activity 和 EditText 在此接收器被触发时不存在。

例如，您可以从 SharedPreferences 上的活动中保存先前输入的值，并根据这些值进行比较。

从 XML 资源中进行比较非常简单，您将通过此接收器接收对应用程序上下文的引用，只需使用它通过以下代码获取值：

```
String compare = context.getString(R.string.___); 
```

# ruby-on-rails - Ruby 根据给定时间段获取日期数组

> ID：15085847
> 
> 赞同：0
> 
> 时间：2013-02-26T09:47:08.770
> 
> 标签：ruby-on-rails, ruby, date

我有一个问题，是否有一个很好的简单解决方案来完成这项任务：

我有`first_date = "2011-02-02"`和。`last_date = "2013-01-20"``period = 90 (days)`

我需要获取包含两个元素的数组，例如：
`[first_date, first_date + period] ... [some_date, last_date]`.

我会用某种循环来完成它，但也许有一些很好的奇特方法可以做到这一点：D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:18:57.500

Date 有一个 step 方法：

```
require 'date'
first_date = Date.parse("2011-02-02")
last_date = Date.parse("2013-02-20")
period = 90

p first_date.step(last_date-period, period).map{|d| [d, d+period]}
#or
p first_date.step(last_date, period).map.each_cons(2).to_a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:14:37.657

```
require 'pp'
require 'date'

first_date=Date.parse "2011-02-02"
last_date=Date.parse "2013-01-20"
period = 90
periods = []

current = first_date
last = current + period

while(last < last_date ) do
  periods << [current, last]
  current = last  
  last = current + period
end

if periods[-1][1] != last_date  
  periods << [periods[-1][1], last_date]
end

p periods 
```

正如您的问题所暗示的那样，我假设最后一个时期必须结束，`last_date`无论其长度如何。

# mysql - 使用 UNION 优化 mysql 查询

> ID：15085851
> 
> 赞同：0
> 
> 时间：2013-02-26T09:47:25.787
> 
> 标签：mysql

我需要获取下一个日期和上一个日期

表结构如下

```
| auto_id | id | next_date  | next_activity |
|    1    |  1 | 22-12-2012 |     -         |
|    2    |  1 | 25-12-2012 |     -         |
|    3    |  1 | 26-12-2012 |     -         |
|    4    |  1 | 28-12-2012 |     -         | 
```

所以我需要 next_day 和 previous_day next_day = 当前日期之后的 next_date previous_day = current_date 之前的 next_date

```
(SELECT * FROM `activity` WHERE id = 1 and next_date > CURDATE() order by next_date asc limit 1)
UNION
(SELECT * FROM `activity` WHERE id = 1 and next_date = CURDATE() )
UNION
(SELECT * FROM `activity` WHERE id = 1 and next_date < CURDATE() order by next_date desc limit 1)
ORDER BY next_date desc limit 2 
```

其他方式来做它自己加入表......

有没有办法优化表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:50:24.497

这是另一种方式：

```
SELECT next_date, date_diff
 FROM (SELECT *,
               @dateDiff := datediff(next_date, curdate()) AS date_diff,
               @pDateDiff :=
                  IF((@dateDiff < 0 AND @dateDiff > @pDateDiff),
                     @dateDiff,
                     @pDateDiff)
                  AS pDateDiff,
               @nDateDiff :=
                  IF((@dateDiff > 0 AND @dateDiff < @nDateDiff),
                     @dateDiff,
                     @nDateDiff)
                  AS nDateDiff
          FROM activity, (SELECT @pDateDiff := -9999, @nDateDiff := 9999) tmp
          WHERE id = 1) aView
 WHERE date_diff IN (@pDateDiff, 0, @nDateDiff)
ORDER BY next_date; 
```

`date_diff`value 给出了上一个和下一个日期的观点。

*   选择所有日期`id = 1`
*   `next_date`查找和&之间的日期差异`curdate()`存储在用户定义的变量`@dateDiff`中。
*   @pDateDiff 是另一个变量，它跟踪负值中的最大值`@dateDiff`（我们之前的日期）
*   @nDateDiff 是另一个变量，它跟踪正值中`@dateDiff`的最小值（我们的下一个日期）
*   最后，只选择那些在`(-ve max, 0, +ve min)`.

PS：如果您有重复的日期条目，则查询可能会返回所有这些条目。

# jquery - 无法在 jquery datetimepicker 中为未来日期选择选择小于当前时间的时间

> ID：15085852
> 
> 赞同：0
> 
> 时间：2013-02-26T09:47:26.130
> 
> 标签：jquery, angularjs, datetimepicker, angular-ui

我在我的 html 表单中添加了 jquery 的 datetimepicker，当我单击输入框时，它会打开 datetimepicker 日历并使用当前日期和时间填充输入框，这很好。但是，如果我选择任何未来的日期，时间栏的小时和分钟仍然保留到当前时间，即在未来日期选择的情况下，我无法选择小于当前时间的任何时间，更重要的是，这个问题不会经常发生有时它工作正常（我也在使用 angularjs），下面是我正在使用的代码

```
<input ng-show="sentMsgStatus" id="datepickerEnd" name="endDateTime"
 readonly="readonly" value="{{msgEndDate | date:'dd/MM/yyyy H:mm'}}" 
 ng-model="msgEndDate"/>

$("#datepickerEnd").datetimepicker({dateFormat: "dd/mm/yy",timeFormat: 'hh:mm',
  minDate: new Date()}); 
```

# iphone - 跟踪我的跑步

> ID：15085854
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:47:27.433
> 
> 标签：iphone, ios, mkmapview, mapkit

我正在尝试使用 MKMapView 跟踪我的跑步，因为它是在 MapMyRun ( [http://www.mapmyrun.com/](http://www.mapmyrun.com/) ) 中完成的。我很难将我的动作绘制到 mapView 上。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:31:02.887

我在 BADA 中做过类似的应用程序，还不确定 iPhone，但这是我应用的逻辑 1\. 注册位置服务，时间间隔最短。2\. 使用叠加开始绘图。从你以前的位置画线到新的位置（最初两者是相同的） 3\. 一旦你再次得到位置更新画线，如上所述，将以前的位置更新到新的位置并继续。

希望这是有用的。只需要做iPhone特定的代码......

# windows - 使用 SC 安装 windows 服务，然后设置恢复属性

> ID：15085856
> 
> 赞同：43
> 
> 时间：2013-02-26T09:47:37.027
> 
> 标签：windows, service, command, recovery

我想在 Windows Server 2003 上安装的 Windows 服务上设置恢复选项。我知道这可以手动完成，但我想在安装服务时设置恢复配置。

我使用 SC 脚本来执行此操作：

```
SC create MyService displayname= "MyService" binpath= "C:\Program Files\MyService\MyService.exe" start= auto

SC failure MyService reset= 86400 actions= restart/1000/restart/1000/run/1000

SC failure MyService command= "C:\Program Files\Myservice\MyService.exe" 
```

问题是当第一个空格被击中时，它会切断路径并将路径的其余部分作为输入参数：

![屏幕转储在这里](../Images/a0ec00b354b8b7d8b7e0bea1777ced4a.png)

所以...在服务的属性对话框中**（运行 -> services.msc -> 右键单击​​ MyService -> 属性 -> 恢复选项卡）**我选择**“后续失败 -> 运行程序**

如您所见，我在命令中的路径周围放置了“”。如何在路径中创建空格？我知道我可以只创建一条没有空格的路径，但这不是重点:-)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T10:00:11.690

这种语法似乎有效：

```
sc failure MyService command= "\"c:\program files\myservice\myservice.exe\"" 
```

# php - 在 MySQL 中将 HEX 列转换为 DEC

> ID：15085858
> 
> 赞同：13
> 
> 时间：2013-02-26T09:47:41.463
> 
> 标签：php, mysql, hex, decimal, typeconverter

我正在编写一个应用程序，它将对 CSV 文件进行一些格式化并将表上传到 mysql 之后程序应该将（十六进制）列转换为十进制一

该表如下所示：

col1 | col2 | 十六进制 | 德科尔

所以我需要采用 hexcol 并从 hex2dec 转换并将其放入 deccol

我尝试了简单**的 SELECT UNHEX('hexcol');** 但它不会工作它说这个列不在字段列表中......

任何帮助，将不胜感激 ...

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-26T09:57:21.087

尝试这个：

```
SELECT CONV(hexcol, 16, 10); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T09:55:16.870

您可以使用 CONV()

检查[有关堆栈溢出](https://stackoverflow.com/questions/5699424/convert-hex-to-binary-in-mysql)和 [Conv 函数参考和示例的类似问题](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_conv)

# vb.net - 将 DetailsView 模式从 Readonly 更改为 Edit 从后面的代码

> ID：15085859
> 
> 赞同：0
> 
> 时间：2013-02-26T09:47:44.230
> 
> 标签：vb.net, detailsview

我面临将详细信息视图模式从更改`ReadOnly`为`Edit`. `Readonly`是默认模式，但我希望当我的详细信息视图第一次调用时，它的模式将是`Readonly`，然后我将其`Edit`从代码隐藏更改为模式。

```
DetailsView1.ChangeMode(DetailsViewMode.Edit) 
```

这就是我将模式更改为`Edit`from的方式`ReadOnly`，但这不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T14:25:23.300

只读模式是 detailsview 的默认模式。要进入编辑模式，只需添加

```
<asp:CommandField ShowEditButton="true" /> 
```

后`<fields>`

# ruby-on-rails - Will_Paginate 在两个模型上，两个模型作为一个集合一起发送

> ID：15085863
> 
> 赞同：0
> 
> 时间：2013-02-26T09:47:54.340
> 
> 标签：ruby-on-rails, will-paginate, ruby-on-rails-2

我有两个模型（文件夹和文档）需要在一个视图中一起显示。但是，为了减少发送的查询数量，我仅在文件夹少于 12 个（我的`:per_page`）时才收集文档。虽然这工作正常，但我被困在一个特殊情况下，

当我的文档总数少于 12 个且文件夹少于 12 个但加起来超过 12 个时，分页失败。

下面是计算要显示哪个页面的代码，该页面`f_page`返回文件夹分页的页面并`d_page`返回文档集合的页码。

```
 def f_page(page_cnt, size)
    page_cnt.present? and size.nonzero? ? page_cnt.to_i <= (size/12 + (size%12==0 ? 0 : 1)) ? page_cnt.to_i : (size / 12 ) + (size%12==0 ? 0 : 1) : 1
  end

  def d_page(page_cnt, fc, dc)
    page_cnt = page_cnt.present? ? page_cnt : 1
    puts page_cnt
    dpg = 1 
    if (fc/12+1 == page_cnt.to_i)
      dpg = 1   
    elsif ((fc/12+1) < page_cnt.to_i)
      if (fc < 12)
        unless (dc <= 12)
          dpg = page_cnt
        else
          dpg = 1
        end
        else
          (fc/12 == 0) ? (dpg = page_cnt.to_i - (fc/12+1)) : (dpg = page_cnt.to_i - (fc/12))
        end
      end
      puts "dpg = #{dpg}"
      return dpg
    end 
```

两者都一起收集和分页，这在视图中显示。

```
f = Folder.action_folder_collection(@action, current_user).paginate(:page => params[:page], :per_page => 12)
  if (f.count < 12)
    d = Document.action_document_collection(@action, current_user).paginate(:page => d_page(params[:page], total_folders, total_documents), :per_page => per_page-f.count)
  end
  collection << f
  collection << d
  @collection = collection.flatten.paginate(:page => 1,:per_page => 12,:total_entries => total) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:08:12.517

我刚刚解决了类似的问题。我的`paginate_catalog_children`助手接收 AR 集合或集合数组作为参数，并返回`WillPaginate::Collection`包含来自所有集合的元素的对象。

```
def paginate_catalog_children catalog_children, page
  per_page = 20
  if catalog_children.is_a? ActiveRecord::Relation
    catalog_children.paginate(:per_page => per_page, :page => page)
  else
    # paginating array of collections
    WillPaginate::Collection.create(page, per_page) do |pager|
      catalog_children_counts = catalog_children.map(&:count)

      result = []
      offset = pager.offset
      items_left = pager.per_page

      catalog_children.each_with_index do |collection, index|
        break if items_left == 0
        if catalog_children_counts[index] <= offset
          # skip this collection
          offset -= catalog_children_counts[index]
        else
          collection_items = collection.limit(items_left).offset(offset)
          result += collection_items
          items_left -= collection_items.size
          offset = 0
        end
      end

      pager.replace(result)
      pager.total_entries = catalog_children_counts.sum
      result
    end
  end
end 
```

# python - 如何使用 boto 将文件上传到 S3 存储桶中的目录

> ID：15085864
> 
> 赞同：136
> 
> 时间：2013-02-26T09:47:53.680
> 
> 标签：python, amazon-web-services, amazon-s3, boto

我想使用 python 复制 s3 存储桶中的文件。

例如：我有存储桶名称 = 测试。在存储桶中，我有 2 个文件夹，名称为“dump”和“input”。现在我想使用python将文件从本地目录复制到S3“转储”文件夹......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-02-26T11:04:56.557

尝试这个...

```
import boto
import boto.s3
import sys
from boto.s3.key import Key

AWS_ACCESS_KEY_ID = ''
AWS_SECRET_ACCESS_KEY = ''

bucket_name = AWS_ACCESS_KEY_ID.lower() + '-dump'
conn = boto.connect_s3(AWS_ACCESS_KEY_ID,
        AWS_SECRET_ACCESS_KEY)

bucket = conn.create_bucket(bucket_name,
    location=boto.s3.connection.Location.DEFAULT)

testfile = "replace this with an actual filename"
print 'Uploading %s to Amazon S3 bucket %s' % \
   (testfile, bucket_name)

def percent_cb(complete, total):
    sys.stdout.write('.')
    sys.stdout.flush()

k = Key(bucket)
k.key = 'my test file'
k.set_contents_from_filename(testfile,
    cb=percent_cb, num_cb=10) 
```

[更新] 我不是 python 专家，所以感谢您对 import 语句的提醒。另外，我不建议将凭据放在您自己的源代码中。如果您在 AWS 中运行它，请使用带有实例配置文件的 IAM 凭证 ( [http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html](http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html) )，并在您的开发/测试环境，使用 AdRoll 中的全息图（[https://github.com/AdRoll/hologram](https://github.com/AdRoll/hologram)）

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2017-11-03T15:17:29.067

```
import boto3

s3 = boto3.resource('s3')
BUCKET = "test"

s3.Bucket(BUCKET).upload_file("your/local/file", "dump/file") 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2015-06-29T10:00:18.170

没必要那么复杂：

```
s3_connection = boto.connect_s3()
bucket = s3_connection.get_bucket('your bucket name')
key = boto.s3.key.Key(bucket, 'some_file.zip')
with open('some_file.zip') as f:
    key.send_file(f) 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2014-12-24T08:48:46.093

我用过这个，实现起来非常简单

```
import tinys3

conn = tinys3.Connection('S3_ACCESS_KEY','S3_SECRET_KEY',tls=True)

f = open('some_file.zip','rb')
conn.upload('some_file.zip',f,'my_bucket') 
```

[https://www.smore.com/labs/tinys3/](https://www.smore.com/labs/tinys3/)

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2019-02-08T15:22:27.053

在带有凭据的会话中将文件上传到 s3。

```
import boto3

session = boto3.Session(
    aws_access_key_id='AWS_ACCESS_KEY_ID',
    aws_secret_access_key='AWS_SECRET_ACCESS_KEY',
)
s3 = session.resource('s3')
# Filename - File to upload
# Bucket - Bucket to upload to (the top level directory under AWS S3)
# Key - S3 object name (can contain subdirectories). If not specified then file_name is used
s3.meta.client.upload_file(Filename='input_file_path', Bucket='bucket_name', Key='s3_output_key') 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-01-31T12:34:05.487

```
from boto3.s3.transfer import S3Transfer
import boto3
#have all the variables populated which are required below
client = boto3.client('s3', aws_access_key_id=access_key,aws_secret_access_key=secret_key)
transfer = S3Transfer(client)
transfer.upload_file(filepath, bucket_name, folder_name+"/"+filename) 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2018-11-29T00:20:09.540

这是一个三班轮。只需按照[boto3 文档](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.upload_file)中的说明进行操作即可。

```
import boto3
s3 = boto3.resource(service_name = 's3')
s3.meta.client.upload_file(Filename = 'C:/foo/bar/baz.filetype', Bucket = 'yourbucketname', Key = 'baz.filetype') 
```

一些重要的论点是：

**参数：**

*   **文件名**( `str`) -- 要上传的文件的路径。*   **Bucket** ( `str`) -- 要上传到的存储桶的名称。*   **Key** ( `str`) -- 您要分配给 s3 存储桶中文件的名称。这可能与文件名相同或您选择的不同名称，但文件类型应保持不变。

    **注意：**我假设您已[按照 boto3 文档](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#best-practices-for-configuring-credentials)`~\.aws`中的最佳配置实践中的建议将凭据保存在文件夹中。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2017-02-01T08:19:25.987

这也将起作用：

```
import os 
import boto
import boto.s3.connection
from boto.s3.key import Key

try:

    conn = boto.s3.connect_to_region('us-east-1',
    aws_access_key_id = 'AWS-Access-Key',
    aws_secret_access_key = 'AWS-Secrete-Key',
    # host = 's3-website-us-east-1.amazonaws.com',
    # is_secure=True,               # uncomment if you are not using ssl
    calling_format = boto.s3.connection.OrdinaryCallingFormat(),
    )

    bucket = conn.get_bucket('YourBucketName')
    key_name = 'FileToUpload'
    path = 'images/holiday' #Directory Under which file should get upload
    full_key_name = os.path.join(path, key_name)
    k = bucket.new_key(full_key_name)
    k.set_contents_from_filename(key_name)

except Exception,e:
    print str(e)
    print "error" 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-08-22T11:10:50.707

使用 boto3

```
import logging
import boto3
from botocore.exceptions import ClientError

def upload_file(file_name, bucket, object_name=None):
    """Upload a file to an S3 bucket

    :param file_name: File to upload
    :param bucket: Bucket to upload to
    :param object_name: S3 object name. If not specified then file_name is used
    :return: True if file was uploaded, else False
    """

    # If S3 object_name was not specified, use file_name
    if object_name is None:
        object_name = file_name

    # Upload the file
    s3_client = boto3.client('s3')
    try:
        response = s3_client.upload_file(file_name, bucket, object_name)
    except ClientError as e:
        logging.error(e)
        return False
    return True 
```

更多信息：- [https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-uploading-files.html](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-uploading-files.html)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-03-02T13:23:42.570

```
import boto
from boto.s3.key import Key

AWS_ACCESS_KEY_ID = ''
AWS_SECRET_ACCESS_KEY = ''
END_POINT = ''                          # eg. us-east-1
S3_HOST = ''                            # eg. s3.us-east-1.amazonaws.com
BUCKET_NAME = 'test'        
FILENAME = 'upload.txt'                
UPLOADED_FILENAME = 'dumps/upload.txt'
# include folders in file path. If it doesn't exist, it will be created

s3 = boto.s3.connect_to_region(END_POINT,
                           aws_access_key_id=AWS_ACCESS_KEY_ID,
                           aws_secret_access_key=AWS_SECRET_ACCESS_KEY,
                           host=S3_HOST)

bucket = s3.get_bucket(BUCKET_NAME)
k = Key(bucket)
k.key = UPLOADED_FILENAME
k.set_contents_from_filename(FILENAME) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-12-03T08:23:35.557

对于上传文件夹示例，如下代码和 S3 文件夹图片 [![在此处输入图像描述](../Images/3ad5223c3500ab1951647a8dfd2dc350.png)](https://i.stack.imgur.com/N2bQ5.png)

```
import boto
import boto.s3
import boto.s3.connection
import os.path
import sys    

# Fill in info on data to upload
# destination bucket name
bucket_name = 'willie20181121'
# source directory
sourceDir = '/home/willie/Desktop/x/'  #Linux Path
# destination directory name (on s3)
destDir = '/test1/'   #S3 Path

#max size in bytes before uploading in parts. between 1 and 5 GB recommended
MAX_SIZE = 20 * 1000 * 1000
#size of parts when uploading in parts
PART_SIZE = 6 * 1000 * 1000

access_key = 'MPBVAQ*******IT****'
secret_key = '11t63yDV***********HgUcgMOSN*****'

conn = boto.connect_s3(
        aws_access_key_id = access_key,
        aws_secret_access_key = secret_key,
        host = '******.org.tw',
        is_secure=False,               # uncomment if you are not using ssl
        calling_format = boto.s3.connection.OrdinaryCallingFormat(),
        )
bucket = conn.create_bucket(bucket_name,
        location=boto.s3.connection.Location.DEFAULT)

uploadFileNames = []
for (sourceDir, dirname, filename) in os.walk(sourceDir):
    uploadFileNames.extend(filename)
    break

def percent_cb(complete, total):
    sys.stdout.write('.')
    sys.stdout.flush()

for filename in uploadFileNames:
    sourcepath = os.path.join(sourceDir + filename)
    destpath = os.path.join(destDir, filename)
    print ('Uploading %s to Amazon S3 bucket %s' % \
           (sourcepath, bucket_name))

    filesize = os.path.getsize(sourcepath)
    if filesize > MAX_SIZE:
        print ("multipart upload")
        mp = bucket.initiate_multipart_upload(destpath)
        fp = open(sourcepath,'rb')
        fp_num = 0
        while (fp.tell() < filesize):
            fp_num += 1
            print ("uploading part %i" %fp_num)
            mp.upload_part_from_file(fp, fp_num, cb=percent_cb, num_cb=10, size=PART_SIZE)

        mp.complete_upload()

    else:
        print ("singlepart upload")
        k = boto.s3.key.Key(bucket)
        k.key = destpath
        k.set_contents_from_filename(sourcepath,
                cb=percent_cb, num_cb=10) 
```

PS：更多参考[网址](https://stackoverflow.com/questions/53664405/how-to-use-python-script-to-copy-files-from-one-bucket-to-another-bucket-at-the/53679657#53679657)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-11-06T11:41:40.570

如果您的系统上安装了[aws 命令行界面](https://docs.aws.amazon.com/cli/latest/reference/)，则可以使用 pythons[子进程](https://docs.python.org/3/library/subprocess.html)库。例如：

```
import subprocess
def copy_file_to_s3(source: str, target: str, bucket: str):
   subprocess.run(["aws", "s3" , "cp", source, f"s3://{bucket}/{target}"]) 
```

同样，您可以将该逻辑用于各种 AWS 客户端操作，例如下载或列出文件等。也可以获取返回值。这样就不需要导入boto3了。我想它的使用不是这样的，但在实践中我觉得这样很方便。这样，您还可以获得控制台中显示的上传状态 - 例如：

```
Completed 3.5 GiB/3.5 GiB (242.8 MiB/s) with 1 file(s) remaining 
```

要根据您的意愿修改该方法，我建议您查看[子流程](https://docs.python.org/3/library/subprocess.html)参考以及[AWS Cli 参考](https://docs.aws.amazon.com/cli/latest/reference/)。

注意：这是我对[类似问题](https://stackoverflow.com/questions/44059769/uploading-files-to-s3-using-python/64713825#64713825)的回答的副本。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-06-29T23:31:09.743

我有一些东西在我看来有更多的顺序：

```
import boto3
from pprint import pprint
from botocore.exceptions import NoCredentialsError

class S3(object):
    BUCKET = "test"
    connection = None

    def __init__(self):
        try:
            vars = get_s3_credentials("aws")
            self.connection = boto3.resource('s3', 'aws_access_key_id',
                                             'aws_secret_access_key')
        except(Exception) as error:
            print(error)
            self.connection = None

    def upload_file(self, file_to_upload_path, file_name):
        if file_to_upload is None or file_name is None: return False
        try:
            pprint(file_to_upload)
            file_name = "your-folder-inside-s3/{0}".format(file_name)
            self.connection.Bucket(self.BUCKET).upload_file(file_to_upload_path, 
                                                                      file_name)
            print("Upload Successful")
            return True

        except FileNotFoundError:
            print("The file was not found")
            return False

        except NoCredentialsError:
            print("Credentials not available")
            return False 
```

这里有三个重要的变量，**BUCKET** const、**file_to_upload**和**file_name**

`BUCKET`: 是您的 S3 存储桶的名称

`file_to_upload_path`: 必须是您要上传的文件的路径

`file_name`: 是您的存储桶中的结果文件和路径（这是您添加文件夹或其他任何内容的位置）

有很多方法，但您可以在这样的另一个脚本中重用此代码

```
import S3

def some_function():
    S3.S3().upload_file(path_to_file, final_file_name) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-01T06:56:57.500

您还应该提及内容类型以省略文件访问问题。

```
import os
image='fly.png'
s3_filestore_path = 'images/fly.png'
filename, file_extension = os.path.splitext(image)
content_type_dict={".png":"image/png",".html":"text/html",
               ".css":"text/css",".js":"application/javascript",
               ".jpg":"image/png",".gif":"image/gif",
               ".jpeg":"image/jpeg"}

content_type=content_type_dict[file_extension]
s3 = boto3.client('s3', config=boto3.session.Config(signature_version='s3v4'),
                  region_name='ap-south-1',
                  aws_access_key_id=S3_KEY,
                  aws_secret_access_key=S3_SECRET)
s3.put_object(Body=image, Bucket=S3_BUCKET, Key=s3_filestore_path, ContentType=content_type) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-11-13T19:59:12.173

```
xmlstr = etree.tostring(listings,  encoding='utf8', method='xml')
conn = boto.connect_s3(
        aws_access_key_id = access_key,
        aws_secret_access_key = secret_key,
        # host = '<bucketName>.s3.amazonaws.com',
        host = 'bycket.s3.amazonaws.com',
        #is_secure=False,               # uncomment if you are not using ssl
        calling_format = boto.s3.connection.OrdinaryCallingFormat(),
        )
conn.auth_region_name = 'us-west-1'

bucket = conn.get_bucket('resources', validate=False)
key= bucket.get_key('filename.txt')
key.set_contents_from_string("SAMPLE TEXT")
key.set_canned_acl('public-read') 
```

# paypal - 让 PayPal Express Checkout 验证地址

> ID：15085866
> 
> 赞同：1
> 
> 时间：2013-02-26T09:47:57.440
> 
> 标签：paypal

我们正在使用PayPal Express checkout（它的API）让客户在我们的商店结帐产品并同时添加送货地址。

我们只运送到德国，当客户结帐时，返回我们的页面，我们通过 PayPal API 了解他的地址不在德国，我们不会捕获授权付款。然而，有时客户试图欺骗我们并在邮政编码字段中写 AT-1234，以表明他们希望运送到奥地利。他们让国家字段具有“德国”值。

是否可以让 PayPal 在 Express Checkout 期间验证地址，从而无法添加无效的邮政编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:22:05.657

您可以使用 AddressVerify API 来检查邮政编码和邮政地址。[您可以在第 25 页的https://www.x.com/sites/default/files/pp_nvpapi_developerguide.pdf](https://www.x.com/sites/default/files/pp_nvpapi_developerguide.pdf)的开发人员指南中找到更多相关信息。我看到商家实施的另一个选项是 Callback API 和 Express Checkout . 相关信息可在第 55 页的同一指南中找到。这使您可以在结账时使用运输选项、保险和税务信息更新 PayPal 审查页面。您还可以生成一条消息，显示您没有运送到该位置。一些商家还会将此与 3rd 方运输提供商 API 绑定，以便他们可以根据买家选择的运输类型计算实时运费。

希望这可以帮助你！

# java - 如何证明使用静态变量是一个巨大的错误？

> ID：15085867
> 
> 赞同：2
> 
> 时间：2013-02-26T09:48:00.240
> 
> 标签：java, multithreading

一般java开发者都知道必须使用“同步”来一一控制方法的执行，但是我看到下面的代码选择了静态变量来控制，无法模拟条件来证明方法是错误的，如何修改代码以输出超过1000的值？

```
public class ThreadJunk implements Runnable{
    private Info info;
    public ThreadJunk(Info info) {
        this.info = info;
    }
    public static void main(String args[]) throws Exception {

        for(int j=0;j<100;j++) {
            Info ii = new Info();
            for(int i=0;i<1000;i++) {
                Thread t = new Thread(new ThreadJunk(ii));
                t.start();
            }
            System.out.println(ii.getValue());
        }
    }
    @Override
    public void run() {
        info.addValue();
    }
}

class Info {
    public static boolean IS_LOCKED = false;
    private int value = 0;
    public void addValue() {
        if(IS_LOCKED)
            return;
        IS_LOCKED = true;
        value++;
        IS_LOCKED = false;
    }
    public int getValue() {
        return value;
    }
} 
```

在我的电脑上，我从来没有得到超过 1000 的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:58:07.620

查看代码的这一部分：

```
Info ii = new Info();
for (int i = 0; i < 1000; i++) {
    Thread t = new Thread(new ThreadJunk(ii));
    t.start();
} 
```

对于每个`Info`对象，您创建的只是`1000`线程。您不应该期望该`value`字段会增加`1000`多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:03:06.520

`Info`对象`value`作为成员变量。根据您的线程创建逻辑，一个 Info 对象在 999 个线程中共享。

```
 for(int j=0;j<100;j++) {
            Info ii = new Info();
            for(int i=0;i<1000;i++) {
                Thread t = new Thread(new ThreadJunk(ii));
                t.start();
            }
            System.out.println(ii.getValue());
        } 
```

因此，显然跟随永远不会大于 1000。

```
System.out.println(ii.getValue()) 
```

# iphone - UIImageView 上的摆锤动画

> ID：15085868
> 
> 赞同：1
> 
> 时间：2013-02-26T09:48:02.993
> 
> 标签：iphone, ios, objective-c

我在 UIImageView 上应用钟摆动画基础重力效果时遇到了麻烦。有没有朋友可以帮我摆脱这个麻烦？？

我试过下面的源代码。但在那个万有引力是不适用的。

```
- (void)swingPendulum {
 pendulum.layer.anchorPoint = CGPointMake(0.5,0);

[pendulum.layer setTransform:CATransform3DMakeRotation(-M_PI*3/4, 0, 0, 1)];
CABasicAnimation *needleAnim = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
needleAnim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
needleAnim.duration = 1;
needleAnim.repeatCount = 5;
needleAnim.autoreverses = YES;
// Setting fillMode means that, once the animation finishes, the needle stays in its end position.
needleAnim.fillMode = kCAFillModeForwards;
needleAnim.removedOnCompletion = YES;
needleAnim.toValue = [NSNumber numberWithFloat:M_PI*3/4];
 [pendulum.layer addAnimation:needleAnim forKey:nil];
} 
```

实际上我们需要像...这样的动画

看看这个：[http ://blog.ruben-martins.co.uk/2010/02/maya-tutorials-pendulum-animation.html](http://blog.ruben-martins.co.uk/2010/02/maya-tutorials-pendulum-animation.html)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:57:58.103

如果您有一个顶部空白的图像并从中间开始并且只想旋转它（还没有尝试过）：

```
-(void) doAnimation {

    imgView.transform = CGAffineTransformMakeRotation(-0.7);
    [UIView animateWithDuration:4 delay:0 options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAutoreverse animations:^{

        imgView.transform = CGAffineTransformMakeRotation(0.7);

    } completion:^{

        [self doAnimation];

    }] 
```

# django - 与来自 href 的 id 进行比较后，我如何显示来自 db 的记录

> ID：15085873
> 
> 赞同：0
> 
> 时间：2013-02-26T09:48:20.497
> 
> 标签：django

问题是我无法在edit_vendor.html中显示记录在比较href plz giude的id之后我有views.py之类的人

```
def vendor(request,id):
    key = request.GET.get('id')
    obj = Vendor.objects.get(id = key)
    return  render_to_response('edit_vendor.html',{'obj': obj},context_instance=RequestContext(request)) 
```

模板

```
<a href ='/vendor/{{vendor.id}}/'> edit </a> 
```

edit_vendor.html

```
{% for Vendor in obj %}
<tr>
<form action="/update/" method="get">
   Vendor Name:<input type ='text' name= 'name' value ={{Vendor.name}}></br>
   Address: <input type ='text' name= 'address' value =  {{Vendor.address}}></br>
   Contact:<input  type = 'text' name= 'contact' value =  {{Vendor.contact}}></br>
   Created Date <input  type ='text' name='date' value = {{Vendor.created_date}}></br>
                <input type='submit' name='Submit' value='update' />
</form>
</tr>
{% endfor%} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:55:58.897

您正在使用`get()`which 返回总是返回一个对象，而不是一个列表。

但是，让我们备份并修复您的视图。

1.  如果您希望查询只获得 1 个对象，请使用 get_object_or_404 快捷方式。这很方便，因为它会自动获取并捕获有人试图获取不存在的供应商 ID 的情况。

因此，您的视图应如下所示：

```
from django.shortcuts import render_to_response, get_object_or_404

def vendor(request, id):
    vendor = get_object_or_404(Vendor, id=id)
    return  render_to_response('edit_vendor.html', {'vendor': vendor}, context_instance=RequestContext(request)) 
```

接下来要记住`get`ORM 调用返回单个对象，而不是列表。所以这：

```
{% for Vendor in obj %} 
```

… 是错的。

你可能只想做：

```
<tr>
    <form action="/update/" method="get">
        Vendor Name:<input type ='text' name= 'name' value ={{vendor.name}}></br>
        Address: <input type ='text' name= 'address' value =  {{vendor.address}}></br>
        Contact:<input  type = 'text' name= 'contact' value =  {{vendor.contact}}></br>
        Created Date <input  type ='text' name='date' value = {{vendor.created_date}}></br>
        <input type='submit' name='Submit' value='update' />
    </form>
</tr> 
```

# android - 执行 AsyncTask 时的 Android 自定义进度指示器

> ID：15085874
> 
> 赞同：1
> 
> 时间：2013-02-26T09:48:21.223
> 
> 标签：android, android-asynctask, progress

运行 AsyncTask 时，我想显示进度指示器。这个股票很难看，所以我自己做了一个布局。然而问题在于，它是一个单独的布局，这意味着我需要一个新的活动来显示它。

我以为我可以 startActivity(~progressActivity~) 然后......销毁它？但似乎不可能阻止父母的孩子活动。

我可以隐藏 AsyncTask-invoking-activity 上的进度指示器，然后在处理时让它显示并隐藏布局的其余部分。现在我的主布局中需要两个子布局，并且每次都隐藏一个。这听起来像一个黑客，我不太喜欢它。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:26:20.197

如果您需要对 ProgressBar 进行更多控制，可以使用 WindowManager 在所有内容之上添加视图。无需任何额外的布局、活动或窗口即可完成。您可以控制动画、触摸、位置和可见性，就像在常规视图的情况下一样。完整的工作代码：

```
final ProgressBar view = new ProgressBar(TestActivity.this);
view.setBackgroundColor(0x7f000000);
final LayoutParams windowParams = new WindowManager.LayoutParams();
windowParams.gravity = Gravity.CENTER;
windowParams.height = WindowManager.LayoutParams.WRAP_CONTENT;
windowParams.width = WindowManager.LayoutParams.WRAP_CONTENT;
windowParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
        | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
        | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN;
windowParams.format = PixelFormat.TRANSLUCENT;
windowParams.windowAnimations = 0;

new AsyncTask<Integer, Integer, Integer>() {
    public void onPreExecute() {
        // init your dialog here;
        getWindowManager().addView(view, windowParams);
    }

    public void onPostExecute(Integer result) {
        getWindowManager().removeView(view);
        // process result;
    }

    @Override
    protected Integer doInBackground(Integer... arg0) {
        // do your things here
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }
}.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:06:09.167

```
new AsyncTask<Params, Progress, Result>() {
   Dialog dlg = new Dialog();
   View customProgress;
   public void onPreExecute() {
       //init your dialog here;
       View customProgress = LayoutInflater.from(CurrentActivity.this).inflate(R.layout.your_progress_layout, null, false);
       dialog.setContentView(view);
       dialog.show();
   }
   public Result doInBackground(Params... params) {
    // do something
    publishProgress(progress);  
   }
   public void onProgressUpdate(Progress progress) {
    // do something with progressView;
   }
   public void onPostExecute(Result result) {
      dlg.dissmiss();
      // process result;
   }
}.execute(); 
```

这是可能的方式（仅示例，可能包含错误）

# java - JApplet 不适用于图标或图像

> ID：15085876
> 
> 赞同：1
> 
> 时间：2013-02-26T09:48:23.793
> 
> 标签：java, image, japplet

我正在开发一个新的 Japplet，我的问题是，当我在 Eclipse 中测试它时，它可以工作，但是当我尝试在浏览器中测试它时，它会产生问题！

```
package com.pack;

import javax.swing.JApplet;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JPanel;
import java.awt.SystemColor;
import javax.swing.JButton;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.ImageIcon;

public class Essai extends JApplet {
private JPanel panel;
private JButton button;
private JButton button_1;

public Essai() {
    panel = new JPanel();
    panel.setBackground(SystemColor.inactiveCaption);

    button = new JButton("");
    button.setIcon(new ImageIcon(Essai.class.getResource("/com/pack/circle-check.png")));

    button_1 = new JButton("");
    button_1.setIcon(new ImageIcon(Essai.class.getResource("/com/pack/circle-delete.png")));
    GroupLayout groupLayout = new GroupLayout(getContentPane());
    groupLayout.setHorizontalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addGap(21)
                .addComponent(button, GroupLayout.PREFERRED_SIZE, 58, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(ComponentPlacement.UNRELATED)
                .addComponent(button_1, GroupLayout.PREFERRED_SIZE, 58, GroupLayout.PREFERRED_SIZE)
                .addContainerGap(303, Short.MAX_VALUE))
            .addGroup(Alignment.TRAILING, groupLayout.createSequentialGroup()
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(panel, GroupLayout.PREFERRED_SIZE, 431, GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
    );
    groupLayout.setVerticalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(Alignment.TRAILING, groupLayout.createSequentialGroup()
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addComponent(button, GroupLayout.PREFERRED_SIZE, 55, GroupLayout.PREFERRED_SIZE)
                    .addComponent(button_1, GroupLayout.PREFERRED_SIZE, 55, GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(ComponentPlacement.RELATED)
                .addComponent(panel, GroupLayout.PREFERRED_SIZE, 221, GroupLayout.PREFERRED_SIZE)
                .addGap(53))
    );
    getContentPane().setLayout(groupLayout);
}
} 
```

我的小程序未在浏览器中显示。

# hibernate - 任何关联的 HQL

> ID：15085886
> 
> 赞同：0
> 
> 时间：2013-02-26T09:48:51.167
> 
> 标签：hibernate, nhibernate, hql

我正在尝试为`Rental`具有多对任意关联的HQL 编写`PaymentTypes`。

```
from rental 
where not exists(
    from PaymentTypes pt where pt.Owner = :rental and type = 'Visa'
) 
```

`Owner`是任何关联，其中`OwnerId`is`rental.Id`和`OwnerType = 'Rental'`

不幸的是，我不能`SetEntity`用作预取租金然后打电话`SetEntity`会非常昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:53:57.677

为什么不尝试像这样的动态查询

```
from rental where not exists(from PaymentTypes pt where pt.Owner.id = " + rental.id + " and type = 'Visa') 
```

# wcf - 使用 Wcf Rest 服务问题

> ID：15085890
> 
> 赞同：0
> 
> 时间：2013-02-26T09:49:08.203
> 
> 标签：wcf, c#-4.0, rest

我创建了一个 Rest WCF 服务。

服务合同

```
[ServiceContract]
public interface IPracticeService
{
    [OperationContract]
    int AddInt(int value1, int value2);

    [OperationContract]
    double AddDouble(double value1, double value2);

    [OperationContract]
    string Hello();

    [OperationContract]
    Person GetPerson();
} 
```

班级

```
public class PracticeService : IPracticeService
{
    public int AddInt(int value1, int value2)
    {
        return value1 + value2;
    }

    [OperationBehavior]
    public double AddDouble(double value1, double value2)
    {
        return value1 + value2;
    }

    public string Hello()
    { 
        return "hello";
    }

    [WebInvoke(Method="GET",ResponseFormat=WebMessageFormat.Json)]
    public Person GetPerson()
    {
        Person p = new Person();
        p.Name = "Abc";
        p.Age = 5;
        return p;
    }

Web Config 

<system.serviceModel>
<services>
  <service name="RestService.IRestServiceImpl" behaviorConfiguration="ServiceBehaviour">
    <endpoint address="*" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web"></endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web"></behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

所以当我想在客户端添加 ServiceRefrence 这个时它给了我错误。

```
The HTML document does not contain Web service discovery information. 
```

元数据包含无法解析的引用：“ `http://mydomain:1121/Rest/RestServiceImpl.svc`”。内容类型应用程序/soap+xml；charset=utf-8 不受 service 支持`http://mydomain:1121/Rest/RestServiceImpl.svc`。客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; charset=utf-8'.. 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

那么如何才能解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:56:30.107

你需要像这样修改你的配置，

```
<system.serviceModel>
<services>
  <service name="PracticeService.IPracticeService" behaviorConfiguration="ServiceBehaviour">
    <endpoint address="*" binding="webHttpBinding" contract="PracticeService.IPracticeService" behaviorConfiguration="web"></endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web"></behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

# mediawiki - MediaWiki 权限

> ID：15085891
> 
> 赞同：0
> 
> 时间：2013-02-26T09:49:25.100
> 
> 标签：mediawiki, wiki

我正在尝试设置权限，并想知道这是否可能。

我希望用户能够创建谈话和讨论页面，但不能编辑内容页面。

只有受信任的人可以选择编辑内容页面。

这可以在 MediaWiki 中完成吗？

我已经通读了文档，似乎要进行编辑，要么全有，要么全无。

我错过了什么吗？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:16:25.680

[$wgNamespaceProtection](https://www.mediawiki.org/wiki/Manual%3a%24wgNamespaceProtection)允许您执行此操作。在你的 LocalSettings.php 中添加这样的内容：

```
$wgNamespaceProtection[NS_MAIN] = array( 'edit-main' );
//This restricts editing in the main namespace to people in a group that has the 'edit-main' permission.

$wgGroupPermissions['trusted']['edit-main'] = true;
//This means only people in a new 'trusted' group have the 'edit-main' permission 
```

或者，不要使用“受信任”，而是使用“sysop”，表示管理员也可以编辑主命名空间（以及删除页面和其他 sysop 权限）

但是，如果您*确实*想要一个名为“受信任”的新组，那么您可能还希望在您的 wiki 上创建具有以下小内容片段的页面，以使界面正确描述这个新的“受信任”组：

*   在名为`MediaWiki:Group-trusted`将内容“信任”的页面上
*   在名为`MediaWiki:Group-trusted-member`将内容“信任”的页面上
*   在名为`MediaWiki:Grouppage-trusted`放置内容“项目：受信任”的页面上

我将此基于[手册上的“忍者”示例：用户权限](https://www.mediawiki.org/wiki/Manual%3aUser_rights)

# android - 图库中的 EditTexts 和焦点问题

> ID：15085893
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:49:29.700
> 
> 标签：android, focus, android-edittext

我正在尝试在图库视图中添加一些 EditText。我可以通过覆盖 onInterceptTouchEvent 来管理滚动，但我在将焦点放在编辑文本上时遇到了问题。

大多数情况下，即使软键板可见，它也不会在屏幕的可见编辑文本中显示键入的文本。

我尝试为编辑文本设置 onclick 列表以将焦点设置在单击的视图上，但它仍然不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:22:57.717

尝试使用此属性，

```
android:descendantFocusability="blocksDescendants" 
```

# mysql - 存储 2 路密码的最安全方法是什么？

> ID：15085896
> 
> 赞同：1
> 
> 时间：2013-02-26T09:49:43.903
> 
> 标签：mysql, sql, security, passwords, password-protection

我想创建一个密码存储以在我们的局域网中使用，密码存储将类似于 keypass，但具有用户访问级别。

我想做这样的事情的原因是，为潜在的恶意用户提供密码文件似乎不是一个好主意。

我应该以两种方式加密这个数据库并且只将密钥提供给正在运行的应用程序，还是更好地保护机器本身并以纯文本形式存储（如果它是一个公开的网站，这听起来很糟糕）

他们的主要问题是必须检索密码才能访问一些拒绝使用密钥的客户端的服务器，并且他们的密码必须保密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:01:11.630

双向加密当然总比没有好。它可能并不完美，但它为访问密码创造了更多障碍。

您也可以将此系统仅用于拒绝实施良好安全性的客户。其余部分使用最佳系统（显然还有不同的密码）。这样，潜在的损害仅限于这些客户。

# android - 检查我的应用程序是否在 Android 中运行

> ID：15085897
> 
> 赞同：6
> 
> 时间：2013-02-26T09:49:51.400
> 
> 标签：android

我有一个涉及声音池的应用程序 - 在应用程序启动时加载所有声音，然后加载主屏幕。

现在，我想检查应用程序是否正在运行——如果没有运行，我想重新加载应用程序——如果它正在运行，我不想重新加载应用程序。

为此，我尝试了以下方法：

```
 ActivityManager activityManager = (ActivityManager) this.getSystemService( ACTIVITY_SERVICE );
 List<RunningAppProcessInfo> procInfos = activityManager.getRunningAppProcesses();
 for(int i = 0; i < procInfos.size(); i++){
   if(procInfos.get(i).processName.equals("com.me.checkprocess"))
   {
    Log.e("Result", "App is running - Doesn't need to reload");
   }
   else
   {
     Log.e("Result", "App is not running - Needs to reload);
  }
} 
```

这可以完美地给出结果，但会继续检查直到 procInfos.size 小于 0。直到应用程序获取进程 com.me.checkprocess 为真 - 它总是错误的？所以它总是首先进入 else 部分。

例如：如果总进程是 30。而我的进程 com.me.checkprocess 正在运行@29th。执行条件时。直到第 28 个进程它是 else 并且 @29th 进程它进入条件为真。

如何修复这部分 - 我只想在检查整个过程后才能进入其他部分？

让我知道！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:53:31.813

我想你可以添加

```
break; 
```

以下

```
Log.e("Result", "App is running - Doesn't need to reload"); 
```

在`if`声明中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T09:54:23.323

只需在 for 循环中放置一个 break 即可。

```
 for(...){
    if(){
       break;
    } 
 } 
```

这绝对不干净，但可以做你想做的事。

**编辑 2

我认为如果你只是在一个方法中提取这个任务会更容易。

```
public boolean isProcessRunning(String process) {
    ActivityManager activityManager = (ActivityManager) this.getSystemService( ACTIVITY_SERVICE );
    List<RunningAppProcessInfo> procInfos = activityManager.getRunningAppProcesses();
    for(int i = 0; i < procInfos.size(); i++){
        if (procInfos.get(i).processName.equals(process)) {
            return true;
        }  
    }
    return false;
}

public static void main(String[] args) {
    if (isProcessRunning("my_process")) {
        // Do what you need
    } else {
        // restart your app
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T09:54:31.770

这是你应该做的。

```
 if(procInfos.get(i).processName.equals("com.me.checkprocess"))
   {
    Log.e("Result", "App is running - Doesn't need to reload");
    break;
   } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T10:39:54.907

其他列出的答案将起作用，但我同意 c4pone - 在这样的循环中，break 似乎是一种不好的方法 - 特别是使用一种`break`方法，如果您在 if 语句周围添加另一个条件，则有可能退出循环时`break`可能不再起作用`for`- 在某些方面它类似于`goto`其他语言中的语句

您的问题的另一种选择是：

```
for(int i = 0; i < procInfos.size(); i++){
   if(procInfos.get(i).processName.equals("com.me.checkprocess"))
   {
        Log.e("Result", "App is running - Doesn't need to reload");
        i = procInfos.size();
   }
   else
   {
        Log.e("Result", "App is not running - Needs to reload);
   }
} 
```

这也将中断循环，因为它将您的计数器变量设置为终止子句，这意味着一旦找到它，循环将退出。

**编辑：**

在下面OP的评论之后，我有一种感觉，他想要的解决方案是这样的：

```
boolean found = false;
for(int i = 0; i < procInfos.size(); i++){
   if(procInfos.get(i).processName.equals("com.me.checkprocess"))
   {
       found = true;
   }
}

if(found)
{
    Log.e("Result", "App is running - Doesn't need to reload");
    i = procInfos.size();
}
else
{
    Log.e("Result", "App is not running - Needs to reload);
} 
```

正如我们所有人在阅读问题时所想的那样，这与过早退出循环无关，而是只输出一次结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-28T08:43:18.283

```
 public static boolean isAppRunning(Context context) { 
```

// 检查返回的任务列表中的第一个任务（前台任务）

```
 ActivityManager activityManager = (ActivityManager)
 context.getSystemService(Context.ACTIVITY_SERVICE);
List<RunningTaskInfo> services =
activityManager.getRunningTasks(Integer.MAX_VALUE);
 if
 (services.get(0).topActivity.getPackageName().toString().equalsIgnoreCase(context.getPackageName().toString()))
 {
 return true;
 }
 return false;
 } 
```

# android - Android扩展文件-测试时找不到资源

> ID：15085904
> 
> 赞同：0
> 
> 时间：2013-02-26T09:50:22.507
> 
> 标签：android, expansion

这是我的包名：com.abc.ss

现在我在 mnt/sdcard/Android/obb/com.abc.ss/main.2.com.abc.ss.obb 中手动创建了一个名为 com.abc.s 的文件夹

但是当我运行示例应用程序时，它说下载失败：

这是我的屏幕截图：

![在此处输入图像描述](../Images/90756e8f524617a149c8b100b848a51c.png)

这是我的代码；

```
public class SampleDownloaderActivity extends Activity implements IDownloaderClient {
    private static final String LOG_TAG = "LVLDownloader";
    private ProgressBar mPB;

    private TextView mStatusText;
    private TextView mProgressFraction;
    private TextView mProgressPercent;
    private TextView mAverageSpeed;
    private TextView mTimeRemaining;

    private View mDashboard;
    private View mCellMessage;

    private Button mPauseButton;
    private Button mWiFiSettingsButton;

    private boolean mStatePaused;
    private int mState;

    private IDownloaderService mRemoteService;

    private IStub mDownloaderClientStub;

    private void setState(int newState) {
        if (mState != newState) {
            mState = newState;
            mStatusText.setText(Helpers.getDownloaderStringResourceIDFromState(newState));
        }
    }

    private void setButtonPausedState(boolean paused) {
        mStatePaused = paused;
        int stringResourceID = paused ? R.string.text_button_resume :
                R.string.text_button_pause;
        mPauseButton.setText(stringResourceID);
    }

    /**
     * This is a little helper class that demonstrates simple testing of an
     * Expansion APK file delivered by Market. You may not wish to hard-code
     * things such as file lengths into your executable... and you may wish to
     * turn this code off during application development.
     */
    private static class XAPKFile {
        public final boolean mIsMain;
        public final int mFileVersion;
        public final long mFileSize;

        XAPKFile(boolean isMain, int fileVersion, long fileSize) {
            mIsMain = isMain;
            mFileVersion = fileVersion;
            mFileSize = fileSize;
        }
    }

    /**
     * Here is where you place the data that the validator will use to determine
     * if the file was delivered correctly. This is encoded in the source code
     * so the application can easily determine whether the file has been
     * properly delivered without having to talk to the server. If the
     * application is using LVL for licensing, it may make sense to eliminate
     * these checks and to just rely on the server.
     */
    private static final XAPKFile[] xAPKS = {
            new XAPKFile(
                    true, // true signifies a main file
                    2, // the version of the APK that the file was uploaded
                       // against
                    23232840L // the length of the file in bytes
            ),
            new XAPKFile(
                    false, // false signifies a patch file
                    4, // the version of the APK that the patch file was uploaded
                       // against
                    512860L // the length of the patch file in bytes
            )            
    };

    /**
     * Go through each of the APK Expansion files defined in the structure above
     * and determine if the files are present and match the required size. Free
     * applications should definitely consider doing this, as this allows the
     * application to be launched for the first time without having a network
     * connection present. Paid applications that use LVL should probably do at
     * least one LVL check that requires the network to be present, so this is
     * not as necessary.
     * 
     * @return true if they are present.
     */
    boolean expansionFilesDelivered() {
        for (XAPKFile xf : xAPKS) {
            String fileName = Helpers.getExpansionAPKFileName(this, xf.mIsMain, xf.mFileVersion);
            if (!Helpers.doesFileExist(this, fileName, xf.mFileSize, false)) {
                return false;
            }
        }
        return true;
    }

    /**
     * Calculating a moving average for the validation speed so we don't get
     * jumpy calculations for time etc.
     */
    static private final float SMOOTHING_FACTOR = 0.005f;

    /**
     * Used by the async task
     */
    private boolean mCancelValidation;

    /**
     * Go through each of the Expansion APK files and open each as a zip file.
     * Calculate the CRC for each file and return false if any fail to match.
     * 
     * @return true if XAPKZipFile is successful
     */
    void validateXAPKZipFiles() {
        AsyncTask<Object, DownloadProgressInfo, Boolean> validationTask = new AsyncTask<Object, DownloadProgressInfo, Boolean>() {

            @Override
            protected void onPreExecute() {
                mDashboard.setVisibility(View.VISIBLE);
                mCellMessage.setVisibility(View.GONE);
                mStatusText.setText(R.string.text_verifying_download);
                mPauseButton.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        mCancelValidation = true;
                    }
                });
                mPauseButton.setText(R.string.text_button_cancel_verify);
                super.onPreExecute();
            }

            @Override
            protected Boolean doInBackground(Object... params) {
                for (XAPKFile xf : xAPKS) {
                    String fileName = Helpers.getExpansionAPKFileName(
                            SampleDownloaderActivity.this,
                            xf.mIsMain, xf.mFileVersion);
                    if (!Helpers.doesFileExist(SampleDownloaderActivity.this, fileName,
                            xf.mFileSize, false)) {
                        return false;
                    }
                    fileName = Helpers
                            .generateSaveFileName(SampleDownloaderActivity.this, fileName);
                    ZipResourceFile zrf;
                    byte[] buf = new byte[1024 * 256];
                    try {
                        zrf = new ZipResourceFile(fileName);
                        ZipEntryRO[] entries = zrf.getAllEntries();
                        /**
                         * First calculate the total compressed length
                         */
                        long totalCompressedLength = 0;
                        for (ZipEntryRO entry : entries) {
                            totalCompressedLength += entry.mCompressedLength;
                        }
                        float averageVerifySpeed = 0;
                        long totalBytesRemaining = totalCompressedLength;
                        long timeRemaining;
                        /**
                         * Then calculate a CRC for every file in the Zip file,
                         * comparing it to what is stored in the Zip directory.
                         * Note that for compressed Zip files we must extract
                         * the contents to do this comparison.
                         */
                        for (ZipEntryRO entry : entries) {
                            if (-1 != entry.mCRC32) {
                                long length = entry.mUncompressedLength;
                                CRC32 crc = new CRC32();
                                DataInputStream dis = null;
                                try {
                                    dis = new DataInputStream(
                                            zrf.getInputStream(entry.mFileName));

                                    long startTime = SystemClock.uptimeMillis();
                                    while (length > 0) {
                                        int seek = (int) (length > buf.length ? buf.length
                                                : length);
                                        dis.readFully(buf, 0, seek);
                                        crc.update(buf, 0, seek);
                                        length -= seek;
                                        long currentTime = SystemClock.uptimeMillis();
                                        long timePassed = currentTime - startTime;
                                        if (timePassed > 0) {
                                            float currentSpeedSample = (float) seek
                                                    / (float) timePassed;
                                            if (0 != averageVerifySpeed) {
                                                averageVerifySpeed = SMOOTHING_FACTOR
                                                        * currentSpeedSample
                                                        + (1 - SMOOTHING_FACTOR)
                                                        * averageVerifySpeed;
                                            } else {
                                                averageVerifySpeed = currentSpeedSample;
                                            }
                                            totalBytesRemaining -= seek;
                                            timeRemaining = (long) (totalBytesRemaining / averageVerifySpeed);
                                            this.publishProgress(
                                                    new DownloadProgressInfo(
                                                            totalCompressedLength,
                                                            totalCompressedLength
                                                                    - totalBytesRemaining,
                                                            timeRemaining,
                                                            averageVerifySpeed)
                                                    );
                                        }
                                        startTime = currentTime;
                                        if (mCancelValidation) {
                                            return true;
                                        }
                                    }
                                    if (crc.getValue() != entry.mCRC32) {
                                        Log.e(Constants.TAG,
                                                "CRC does not match for entry: "
                                                        + entry.mFileName);
                                        Log.e(Constants.TAG,
                                                "In file: " + entry.getZipFileName());
                                        return false;
                                    }
                                } finally {
                                    if (null != dis) {
                                        dis.close();
                                    }
                                }
                            }
                        }
                    } catch (IOException e) {
                        e.printStackTrace();
                        return false;
                    }
                }
                return true;
            }

            @Override
            protected void onProgressUpdate(DownloadProgressInfo... values) {
                onDownloadProgress(values[0]);
                super.onProgressUpdate(values);
            }

            @Override
            protected void onPostExecute(Boolean result) {
                if (result) {
                    mDashboard.setVisibility(View.VISIBLE);
                    mCellMessage.setVisibility(View.GONE);
                    mStatusText.setText(R.string.text_validation_complete);
                    mPauseButton.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View view) {
                            finish();
                        }
                    });
                    mPauseButton.setText(android.R.string.ok);
                } else {
                    mDashboard.setVisibility(View.VISIBLE);
                    mCellMessage.setVisibility(View.GONE);
                    mStatusText.setText(R.string.text_validation_failed);
                    mPauseButton.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View view) {
                            finish();
                        }
                    });
                    mPauseButton.setText(android.R.string.cancel);
                }
                super.onPostExecute(result);
            }

        };
        validationTask.execute(new Object());
    }

    /**
     * If the download isn't present, we initialize the download UI. This ties
     * all of the controls into the remote service calls.
     */
    private void initializeDownloadUI() {
        mDownloaderClientStub = DownloaderClientMarshaller.CreateStub
                (this, SampleDownloaderService.class);
        setContentView(R.layout.main);

        mPB = (ProgressBar) findViewById(R.id.progressBar);
        mStatusText = (TextView) findViewById(R.id.statusText);
        mProgressFraction = (TextView) findViewById(R.id.progressAsFraction);
        mProgressPercent = (TextView) findViewById(R.id.progressAsPercentage);
        mAverageSpeed = (TextView) findViewById(R.id.progressAverageSpeed);
        mTimeRemaining = (TextView) findViewById(R.id.progressTimeRemaining);
        mDashboard = findViewById(R.id.downloaderDashboard);
        mCellMessage = findViewById(R.id.approveCellular);
        mPauseButton = (Button) findViewById(R.id.pauseButton);
        mWiFiSettingsButton = (Button) findViewById(R.id.wifiSettingsButton);

        mPauseButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if (mStatePaused) {
                    mRemoteService.requestContinueDownload();
                } else {
                    mRemoteService.requestPauseDownload();
                }
                setButtonPausedState(!mStatePaused);
            }
        });

        mWiFiSettingsButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(Settings.ACTION_WIFI_SETTINGS));
            }
        });

        Button resumeOnCell = (Button) findViewById(R.id.resumeOverCellular);
        resumeOnCell.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                mRemoteService.setDownloadFlags(IDownloaderService.FLAGS_DOWNLOAD_OVER_CELLULAR);
                mRemoteService.requestContinueDownload();
                mCellMessage.setVisibility(View.GONE);
            }
        });

    }

    /**
     * Called when the activity is first create; we wouldn't create a layout in
     * the case where we have the file and are moving to another activity
     * without downloading.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /**
         * Both downloading and validation make use of the "download" UI
         */
        initializeDownloadUI();

        /**
         * Before we do anything, are the files we expect already here and
         * delivered (presumably by Market) For free titles, this is probably
         * worth doing. (so no Market request is necessary)
         */
        if (!expansionFilesDelivered()) {

            try {
                Intent launchIntent = SampleDownloaderActivity.this
                        .getIntent();
                Intent intentToLaunchThisActivityFromNotification = new Intent(
                        SampleDownloaderActivity
                        .this, SampleDownloaderActivity.this.getClass());
                intentToLaunchThisActivityFromNotification.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                        Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intentToLaunchThisActivityFromNotification.setAction(launchIntent.getAction());

                if (launchIntent.getCategories() != null) {
                    for (String category : launchIntent.getCategories()) {
                        intentToLaunchThisActivityFromNotification.addCategory(category);
                    }
                }

                // Build PendingIntent used to open this activity from
                // Notification
                PendingIntent pendingIntent = PendingIntent.getActivity(
                        SampleDownloaderActivity.this,
                        0, intentToLaunchThisActivityFromNotification,
                        PendingIntent.FLAG_UPDATE_CURRENT);
                // Request to start the download
                int startResult = DownloaderClientMarshaller.startDownloadServiceIfRequired(this,
                        pendingIntent, SampleDownloaderService.class);

                if (startResult != DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED) {
                    // The DownloaderService has started downloading the files,
                    // show progress
                    initializeDownloadUI();
                    return;
                } // otherwise, download not needed so we fall through to
                  // starting the movie
            } catch (NameNotFoundException e) {
                Log.e(LOG_TAG, "Cannot find own package! MAYDAY!");
                e.printStackTrace();
            }

        } else {
            validateXAPKZipFiles();
        }

    }

    /**
     * Connect the stub to our service on start.
     */
    @Override
    protected void onStart() {
        if (null != mDownloaderClientStub) {
            mDownloaderClientStub.connect(this);
        }
        super.onStart();
    }

    /**
     * Disconnect the stub from our service on stop
     */
    @Override
    protected void onStop() {
        if (null != mDownloaderClientStub) {
            mDownloaderClientStub.disconnect(this);
        }
        super.onStop();
    }

    /**
     * Critical implementation detail. In onServiceConnected we create the
     * remote service and marshaler. This is how we pass the client information
     * back to the service so the client can be properly notified of changes. We
     * must do this every time we reconnect to the service.
     */
    @Override
    public void onServiceConnected(Messenger m) {
        mRemoteService = DownloaderServiceMarshaller.CreateProxy(m);
        mRemoteService.onClientUpdated(mDownloaderClientStub.getMessenger());
    }

    /**
     * The download state should trigger changes in the UI --- it may be useful
     * to show the state as being indeterminate at times. This sample can be
     * considered a guideline.
     */
    @Override
    public void onDownloadStateChanged(int newState) {
        setState(newState);
        boolean showDashboard = true;
        boolean showCellMessage = false;
        boolean paused;
        boolean indeterminate;
        switch (newState) {
            case IDownloaderClient.STATE_IDLE:
                // STATE_IDLE means the service is listening, so it's
                // safe to start making calls via mRemoteService.
                paused = false;
                indeterminate = true;
                break;
            case IDownloaderClient.STATE_CONNECTING:
            case IDownloaderClient.STATE_FETCHING_URL:
                showDashboard = true;
                paused = false;
                indeterminate = true;
                break;
            case IDownloaderClient.STATE_DOWNLOADING:
                paused = false;
                showDashboard = true;
                indeterminate = false;
                break;

            case IDownloaderClient.STATE_FAILED_CANCELED:
            case IDownloaderClient.STATE_FAILED:
            case IDownloaderClient.STATE_FAILED_FETCHING_URL:
            case IDownloaderClient.STATE_FAILED_UNLICENSED:
                paused = true;
                showDashboard = false;
                indeterminate = false;
                break;
            case IDownloaderClient.STATE_PAUSED_NEED_CELLULAR_PERMISSION:
            case IDownloaderClient.STATE_PAUSED_WIFI_DISABLED_NEED_CELLULAR_PERMISSION:
                showDashboard = false;
                paused = true;
                indeterminate = false;
                showCellMessage = true;
                break;

            case IDownloaderClient.STATE_PAUSED_BY_REQUEST:
                paused = true;
                indeterminate = false;
                break;
            case IDownloaderClient.STATE_PAUSED_ROAMING:
            case IDownloaderClient.STATE_PAUSED_SDCARD_UNAVAILABLE:
                paused = true;
                indeterminate = false;
                break;
            case IDownloaderClient.STATE_COMPLETED:
                showDashboard = false;
                paused = false;
                indeterminate = false;
                validateXAPKZipFiles();
                return;
            default:
                paused = true;
                indeterminate = true;
                showDashboard = true;
        }
        int newDashboardVisibility = showDashboard ? View.VISIBLE : View.GONE;
        if (mDashboard.getVisibility() != newDashboardVisibility) {
            mDashboard.setVisibility(newDashboardVisibility);
        }
        int cellMessageVisibility = showCellMessage ? View.VISIBLE : View.GONE;
        if (mCellMessage.getVisibility() != cellMessageVisibility) {
            mCellMessage.setVisibility(cellMessageVisibility);
        }

        mPB.setIndeterminate(indeterminate);
        setButtonPausedState(paused);
    }

    /**
     * Sets the state of the various controls based on the progressinfo object
     * sent from the downloader service.
     */
    @Override
    public void onDownloadProgress(DownloadProgressInfo progress) {
        mAverageSpeed.setText(getString(R.string.kilobytes_per_second,
                Helpers.getSpeedString(progress.mCurrentSpeed)));
        mTimeRemaining.setText(getString(R.string.time_remaining,
                Helpers.getTimeRemaining(progress.mTimeRemaining)));

        //mAverageSpeed.setText("" + Helpers.getSpeedString(progress.mCurrentSpeed));
      //  mTimeRemaining.setText("" + Helpers.getTimeRemaining(progress.mTimeRemaining));

        progress.mOverallTotal = progress.mOverallTotal;
        mPB.setMax((int) (progress.mOverallTotal >> 8));
        mPB.setProgress((int) (progress.mOverallProgress >> 8));
        mProgressPercent.setText(Long.toString(progress.mOverallProgress
                * 100 /
                progress.mOverallTotal) + "%");
        mProgressFraction.setText(Helpers.getDownloadProgressString
                (progress.mOverallProgress,
                        progress.mOverallTotal));
    }

    @Override
    protected void onDestroy() {
        this.mCancelValidation = true;
        super.onDestroy();
    }

} 
```

这有什么问题？

编辑：

XAPKFile[] xAPK 是我们给出的主要位置，文件大小和版本代码

expandFilesDelivered() 是检查文件名的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:12:46.210

看起来 Condition 未能在 sdcard 中找到您的文件

```
 boolean expansionFilesDelivered() {
    for (XAPKFile xf : xAPKS) {
        String fileName = Helpers.getExpansionAPKFileName(this, xf.mIsBase, xf.mFileVersion);
        if (!Helpers.doesFileExist(this, fileName, xf.mFileSize, false))
            return false;
    }
    return true;
} 
```

将假文件放在确切的目录中吗？

```
private final static String EXP_PATH = "/Android/obb/";

static String[] getAPKExpansionFiles(Context ctx, int mainVersion, int patchVersion) {
    String packageName = ctx.getPackageName();
    Vector<String> ret = new Vector<String>();
    if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
        // Build the full path to the app's expansion files
        File root = Environment.getExternalStorageDirectory();
        File expPath = new File(root.toString() + EXP_PATH + packageName);

        // Check that expansion file path exists
        if (expPath.exists()) {
            if ( mainVersion > 0 ) {
                String strMainPath = expPath + File.separator + "main." +
                        mainVersion + "." + packageName + ".obb";
                File main = new File(strMainPath);
                if ( main.isFile() ) {
                        ret.add(strMainPath);
                }
            }
            if ( patchVersion > 0 ) {
                String strPatchPath = expPath + File.separator + "patch." +
                        mainVersion + "." + packageName + ".obb";
                File main = new File(strPatchPath);
                if ( main.isFile() ) {
                        ret.add(strPatchPath);
                }
            }
        }
    }
    String[] retArray = new String[ret.size()];
    ret.toArray(retArray);
    return retArray;
} 
```

您应该使用您的包名将（obb fake file）文件推送到此处（com.your.packagename） ![在此处输入图像描述](../Images/9f87aa4c425be7d76133abd9dc5d881d.png) （包名应该以编程方式创建）

```
 String xapkFilePath = getAPKExpansionFiles(SampleDownloaderActivity.this);
                Log.d("CopyFromAPKEXP", "OBBFileName: " + xapkFilePath);
                String exportDirectory = Environment
                        .getExternalStorageDirectory().getAbsolutePath()
                        + "/Android/data/"
                        + SampleDownloaderActivity.this.getPackageName()
                        + "/files/";
                File exportDirectoryFilepath = new File(exportDirectory);

                exportDirectoryFilepath.mkdirs(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:33:08.263

我从模拟器运行消息，从实际设备运行一切正常...可能与许可证有关，检查您的日志记录，如果您看到许可证错误，就是这样

# python - 从不可变类型继承

> ID：15085917
> 
> 赞同：3
> 
> 时间：2013-02-26T09:50:53.467
> 
> 标签：python, string, list, inheritance, int

我想知道继承如何用于`int`,`list`和`string`其他不可变类型。

基本上我只是继承一个这样的类：

```
class MyInt(int):
    def __init__(self, value):
        ?!?!? 
```

我似乎无法弄清楚，我该如何设置它的设置值`int`？如果我这样做，`self.value = value`那么我的课程将像这样使用：

```
mi = MyInt(5)
print(mi.value) # prints 5 
```

而我想像这样使用它：

```
mi = MyInt(5)
print(mi) # prints 5 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T09:52:47.290

你可以子类化`int`，但是因为它是*不可变*的，你需要提供一个[`.__new__()`构造函数钩子](http://docs.python.org/3/reference/datamodel.html#object.__new__)：

```
class MyInt(int):
    def __new__(cls, value):
        new_myint = super(MyInt, cls).__new__(cls, value)
        return new_myint 
```

您确实需要调用基本`__new__`构造函数来正确创建子类。

在 Python 3 中，您可以`super()`完全省略参数：

```
class MyInt(int):
    def __new__(cls, value):
        new_myint = super().__new__(cls, value)
        return new_myint 
```

当然，这假设您想`value`在传入之前进行操作`super().__new__()`或`new_myint`在返回之前进行更多操作；否则，您也可以删除整个`__new__`方法并将其实现为`class MyInt(int): pass`.

# python - 轨迹聚类

> ID：15085918
> 
> 赞同：6
> 
> 时间：2013-02-26T09:50:54.123
> 
> 标签：python, gis, data-mining, cluster-analysis, modeling

我有大量的时间纬度/经度。

我试图从这些数据中找到轨迹的 k 簇。最好的方法是什么？

谢谢。

编辑：

为了使用 kmeans / 层次聚类，我应该如何为我的数据（纬度/经度 + 时间）生成特征？

编辑：

希望这会让它更清楚

这是我的数据外观的示例：

```
轨迹一：

lat1,lon1 在 time1
lat2,lon2 在 time2
...
lat55,lon55 在 time55

```

```
轨迹2：

lat343，lon343 在 time343
lat344，lon344 在 time344
...
lat376，lon376 在 time376

```

一直在继续（更多的轨迹）。

所以说我有 200 条这样的轨迹，我想把它们分成两组。我应该如何处理这个？

我应该为此使用 kmeans/HAC 还是应该看看另一种方法？

编辑：

这样做的目的是将轨迹分类为 k 个簇，这些簇代表轨迹的 k 个不同方向。

简单地说，我只是试图将轨迹聚集成不同方向的组。我不担心他们的**距离**相似性。

所以说最后我想找到这样的东西：

```
方向一：
轨迹4
轨迹5
轨迹 7

```

```
方向2：
弹道44
轨迹2
轨迹 27

```

...

```
方向 10：
轨迹 17
轨迹 8

```

注意：轨迹的形状大多是直线（不是直线），有些是环形的。
注意：纬度/经度对于一个地区来说是超级本地的，所以我可以使用平地近似。

这些方向旨在非常粗略。我如何计算轨迹之间的相似性以对它们进行聚类以实现这一目标？

编辑：

这是一个插图（尽我所能）：

![轨迹和最终结果](../Images/99698ec6120c69e57bdfd055db6cd6ca.png)

我想将轨迹分成这样的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:48:28.323

K-means 是围绕*最小化方差*而设计的。

将其应用于纵向数据时，会出现一些错误，除非您始终靠近赤道并远离 180 经线。因为地球近似于一个*球面*，而不是一个无限的欧几里得向量空间。

例如，尝试使用基于距离或密度的聚类算法，而不是**使用大圆距离**。分层聚类也可能是比 k-means 更好的选择。

大圆距离就在两点之间。*因此，您*接下来要做的就是弄清楚如何将这些距离和时间分量组合成适合您的轨迹的**相似性度量。**这完全取决于使用情况，并且没有我们可以与您分享的通用解决方案。**您的相似度函数越好，您的聚类结果就越好！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:40:39.477

您描述问题的方式听起来好像您可以将所有轨迹表示为相对于赤道的角度。然后归结为分段；这不是真正的聚类；参见例如[https://en.wikipedia.org/wiki/Jenks_natural_breaks_optimization](https://en.wikipedia.org/wiki/Jenks_natural_breaks_optimization)。在您的情况下，这些值会循环，因此它将在一个圆上（使用度数/角度）而不是在一条直线上分割值。当然，如果这描述了您的问题，它也提供了一种很好的可视化方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:18:59.197

[动态时间规整](http://en.wikipedia.org/wiki/Dynamic_time_warping)(DTW) 会产生一个相似性指标，该指标通常与时间序列数据（这就是您所拥有的）一起使用。然后，您可以将这些 DTW 相似性用作许多基于相似性的聚类算法中的任何一种的输入。

对于您的数据集，我将仅提取方向序列，因为如果以不同的速度遍历路径或以不同的时间间隔采集样本，则包含距离分量可能会导致问题。

# json - Highcharts Beta 3：加载 JSON 数据的最佳实践

> ID：15085919
> 
> 赞同：4
> 
> 时间：2013-02-26T09:50:55.543
> 
> 标签：json, highcharts, beta

使用新的 Highcharts Beta 3 和 data.src.js 通过 JSON 将系列数据加载到给定图表中的最佳实践是什么？

正在阅读`complete`data.src.js 中的文档，但不确定它是否适合现在使用`$.getJSON`jQuery 加载多个系列数据的 BP 方式。

如果你能提供一个例子，那就太好了。

HS提供的标准示例（例如CSV、google）：http: [//jsfiddle.net/highcharts/AYYCv/](http://jsfiddle.net/highcharts/AYYCv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:19:51.330

data.src.js 是一个脚本，它仅从 googlespreadsheet / CSV 和 HTML 对象解析数据，而不是从您的自定义 JSON 中解析数据。

"Complete:" 只是回调，它在 csv 或 spreadhseed 数据加载之后运行。

# wordpress - 我想限制用户在下载之前喜欢我的 Facebook 页面？

> ID：15085920
> 
> 赞同：0
> 
> 时间：2013-02-26T09:50:59.573
> 
> 标签：wordpress

我希望曾经访问该网站的用户应该首先喜欢 facebook 页面，然后只有他被允许从该网站下载任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:24:11.647

有许多具有此（或类似）功能的插件，您可以直接使用它们或查看代码以了解它是如何完成的。一些使用 Tweeter、一些 facebook、一些电子邮件和以上所有这些。本质上它们都是一样的。[插件存储库](http://wordpress.org/extend/plugins/search.php)中的简单[搜索](http://wordpress.org/extend/plugins/search.php?q=Like%20%20to%20%20download&sort=)显示了一些候选者：

[http://wordpress.org/extend/plugins/like-gate/](http://wordpress.org/extend/plugins/like-gate/)

[http://wordpress.org/extend/plugins/wp-share-to-unlock/](http://wordpress.org/extend/plugins/wp-share-to-unlock/)

[http://wordpress.org/extend/plugins/tweet-and-get-it/](http://wordpress.org/extend/plugins/tweet-and-get-it/)

[http://wordpress.org/extend/plugins/tweet2download/](http://wordpress.org/extend/plugins/tweet2download/)

[http://wordpress.org/extend/plugins/email-before-download/](http://wordpress.org/extend/plugins/email-before-download/)

# colors - MS DOS 批处理文件标题颜色

> ID：15085923
> 
> 赞同：1
> 
> 时间：2013-02-26T09:51:07.180
> 
> 标签：colors, batch-file, cmd, dos

我创建了一个实用程序来使用 .bat 文件在 Windows 中自动执行一些任务。我那里只有 MS DOS 命令。有一次，我执行 .bat 文件，它以默认颜色显示命令提示符。黑色背景和白色前景。

我试图用颜色命令“COLOR 02”（即绿色前景）来改变它，但它改变了整个控制台的颜色。

命令提示符中是否有任何命令仅更改一种行颜色，但仅将其余行保持为黑白。

我只想以绿色突出显示实用程序的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:20:20.740

你应该看看论坛中的其他问题:)

但是你去： [如何在 Windows 批处理文件中有多种颜色？](https://stackoverflow.com/questions/4339649/how-to-have-multiple-colors-in-a-batch-file)

# java - 相机应用程序在模拟器中工作但在真手机中停止？

> ID：15085930
> 
> 赞同：1
> 
> 时间：2013-02-26T09:51:23.880
> 
> 标签：java, android, android-camera

我已经编写了自己的相机应用程序。当我在 Eclipse 模拟器中运行该应用程序时，它工作正常，但是当我将它安装在真实手机上并运行它时，当我单击启动相机活动的按钮时，它显示“应用程序示例意外停止工作，请再试一次稍后”，我已经在我的清单中写了相机权限。可能是什么问题呢 ？

这是我的相机应用程序的代码：

```
public class CameraActivity extends Activity{
    public static final int MEDIA_TYPE_IMAGE = 1 ;
    private Camera mCamera;
    private CameraPreview mPreview;
    Uri photoPath ;
    protected void onStop()
    {
        super.onStop();
        mCamera.release();
    }
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);

        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        ViewGroup.LayoutParams previewParam = preview.getLayoutParams() ;
        Parameters cameraParam =  mCamera.getParameters() ;
        double ratio = (double)cameraParam.getPictureSize().height / (double)cameraParam.getPictureSize().width  ;
      //  previewParam.height=  cameraParam.getPictureSize().height / 5 ;
       // previewParam.width = cameraParam.getPictureSize().width / 5  ;
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        int width = size.x;
        int height = size.y;
        previewParam.width =  width;
        previewParam.height = (int)(previewParam.width * ratio) ;
       // preview.setLayoutParams(previewParam) ;
        preview.addView(mPreview);
    }

    //Camera Classes here
    private final static String TAG = "Navid";
    public static Camera getCameraInstance() 
    {
        Camera c = null ;
        try
        {
            c = Camera.open() ;
        }
        catch(Exception e)
        {
        }
        return c ;
    }
    public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback
    {
        private SurfaceHolder mHolder ;
        private Camera mCamera; 
        public CameraPreview(Context context , Camera camera)
        {
            super(context) ;
            mCamera = camera ;

            mHolder = getHolder();
            mHolder.addCallback(this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }
        public void surfaceCreated(SurfaceHolder holder)
        {
            try
            {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            }
            catch(IOException e)
            {
                Log.d(TAG,"Camera Preview Failed!: "+e.getMessage());
            }
        }
        public void surfaceChanged(SurfaceHolder holder , int m , int n , int w)
        {   
        }
        public void surfaceDestroyed(SurfaceHolder holder)
        {           
        }
    }
    private static File getOutputMediaFile(int type){
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE){
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");
        }else {
            return null;
        }
        return mediaFile;
    }
    //save the picture here
    private PictureCallback mPicture = new PictureCallback() {

    //  public final static int  MEDIA_TYPE_IMAGE = 1 ;
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {

            File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
            photoPath = Uri.fromFile(pictureFile);
            if (pictureFile == null){
                Log.d("Errore Doorbin", "Error creating media file, check storage permissions: ");
                return;
            }

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
                // these lines are for the gallery to scan the SDCard manually
                File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                        Environment.DIRECTORY_PICTURES), "MyCameraApp");
                    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, 
                        Uri.parse("file://"+ mediaStorageDir)));
              // photoPath = Uri.fromFile(mediaStorageDir) ;
               /* MediaScannerConnection.scanFile(CameraActivity.this,
                        new String[] { fos.toString() }, null,
                        new MediaScannerConnection.OnScanCompletedListener() {
                    public void onScanCompleted(String path, Uri uri) {
                        // code to execute when scanning is complete
                    }
               });*/
               // fos.close();
            } catch (FileNotFoundException e) {
                Log.d("Errore Doorbin", "File not found: " + e.getMessage());
            } catch (IOException e) {
                Log.d("Errore Doorbin", "Error accessing file: " + e.getMessage());
            }
            catch (Exception e)
            {
                Log.d("Errore Doorbin", "errore Kolli dade!" + e.getMessage()) ;
            }
        }
    };
    public void capture(View v)
    {
        //mCamera.takePicture(null, null, mPicture);
        //mCamera.release(); 
        //mCamera = getCameraInstance() ;
        //mCamera.startPreview();

        TakePictureTask takePicture = new TakePictureTask() ;
        takePicture.execute() ;
    }
    public void accept(View v)
    {
        Intent data = new Intent() ;
        data.setData(photoPath) ;
        setResult(RESULT_OK, data);
        finish() ;
    }
    public void retake(View v)
    {
        Button button = (Button)findViewById(R.id.button_accept);
        button.setVisibility(View.GONE);
        button = (Button)findViewById(R.id.button_capture) ;
        button.setVisibility(View.VISIBLE) ;
        button = (Button)findViewById(R.id.button_retake);
        button.setVisibility(View.GONE) ;

        mCamera.startPreview(); 
    }
    /**
     * A pretty basic example of an AsyncTask that takes the photo and
     * then sleeps for a defined period of time before finishing. Upon
     * finishing, it will restart the preview - Camera.startPreview().
     */

    private class TakePictureTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPostExecute(Void result) {
            // This returns the preview back to the live camera feed
            Button button = (Button)findViewById(R.id.button_accept) ;
            button.setVisibility(View.VISIBLE) ;
            button = (Button)findViewById(R.id.button_retake) ;
            button.setVisibility(View.VISIBLE);
            button = (Button)findViewById(R.id.button_capture);
            button.setVisibility(View.GONE);
            //mCamera.startPreview();
        }

        @Override
        protected Void doInBackground(Void... params) {
            mCamera.takePicture(null, null, mPicture);

            // Sleep for however long, you could store this in a variable and
            // have it updated by a menu item which the user selects.
            try {
                Thread.sleep(3000); // 3 second preview
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }

    }

} 
```

**更新：** 电话的logcat这样说：

```
FATAL ECXEPTION: main
java.lang.NoSuchMethodError: Android.View.Display.getSize 
```

是因为手机的 Android API 太旧了吗？我手机的安卓版本是2.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:53:26.223

您在 diaplay.getSize() 上收到错误使用此方法获取大小

```
private static Point getDisplaySize(final Display display) {
final Point point = new Point();
try {
    display.getSize(point);
} catch (java.lang.NoSuchMethodError ignore) { // Older device
    point.x = display.getWidth();
    point.y = display.getHeight();
}
return point;
} 
```

# installation - 通过 Advanced Installer 部署 VSTO 插件

> ID：15085931
> 
> 赞同：3
> 
> 时间：2013-02-26T09:51:29.217
> 
> 标签：installation, vsto, outlook-addin, advanced-installer

我正在尝试为我为 Microsoft Outlook 2010 和 2013 编写的 VSTO 加载项创建安装包。我希望升级此插件很简单，因为它将部署到大量客户端。

但是，我在部署此加载项后遇到了问题。它在添加/删除程序中显示为两个程序，我创建的安装包和 Outlook 运行 .vsto 文件后的 VSTO 加载项。这意味着如果用户想要卸载插件，他或她将不得不卸载两个应用程序。我认为升级也是如此。

这里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:06:58.977

此问题已在[Advanced Installer 论坛上](http://www.advancedinstaller.com/forums/viewtopic.php?f=2&t=20441#p50212)解决。如果您没有最新版本的 Advanced Installer，您可以手动修复注册表项，详见论坛帖子。

此外，强烈建议您在将整个 MSI 部署给用户时使用有效的数字证书对其进行签名。

# jquery - jQuery mouseover/mouseout 闪烁

> ID：15085932
> 
> 赞同：4
> 
> 时间：2013-02-26T09:51:36.993
> 
> 标签：jquery, mouseover, mouseout

我有以下 HTML

```
<div class="individual">
    <div class="change">change</div>
    <div class="picture"><img src....></div>
</div> 
```

有`.change`并且`position: absolute;`是不可见的。在 mouseover 上`.picture`，我想`.change`出现，而在 mouseout 上，我想消失。如果个人点击`.change`，那么应该会发生一些事情。

现在，当鼠标越过变化时，它被视为鼠标移出画面，因此变化开始闪烁！

然后我做了这个jQuery：

```
$('.change').mouseout(function(){
    $('.picture').mouseout(function(){
        $(this).parent().children('.change').hide();
    });
});

$('.picture').mouseover(function(){
    var i = $(this).parent().children('.change').show();
}); 
```

这只有第一次才能正常工作！如果我把图片移出，然后当我重新打开并继续更改时，一切都开始闪烁！！我该怎么办？！

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T09:54:21.847

使用“mouseenter”代替“mouseover”和“mouseleave”代替“mouseout”

```
$('.picture').mouseenter(function(){
   $(this).parent().children('.change').hide();
});

$('.picture').mouseleave(function(){
    var i = $(this).parent().children('.change').show();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T10:02:34.857

我一直发现 mouseout 和 mouseover 相当有问题。不知道为什么，你可以试试：

```
$(function() { 
    $('.picture').hover(function() {
        $('.change').show();
    },function() { $('.change').hide(); });
}); 
```

只要“.change”的外观不移动“.picture”，导致悬停被打破，那么这应该适合你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-24T14:11:47.013

尝试：

```
.change { 
    pointer-events: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T09:56:28.760

问题是隐藏`.change`会将`.picture`元素移动到以前的位置`.change`。这将触发两者`.mouseover()`，`.mouseenter()`因此没有必要更换。

您应该将两个元素的 CSS 定位更改为绝对，这样删除`.change`就不会移动`.picture`

# django - 在 django 中使用值和注释

> ID：15085933
> 
> 赞同：1
> 
> 时间：2013-02-26T09:51:40.563
> 
> 标签：django, annotations, aggregation

我试图了解 values() 和 annotate() 的工作原理。

在我的应用程序中，我有一个模型

```
class MyEntry(models.Model):
    entrydate = models.DateField(default=date.today)
... 
```

如果我在 python shell 中执行以下操作

```
>>allentries = MyEntry.objects.all()
>>vals = allentries.values('entrydate')
>>vals[:2]
[{ 'entrydate':datetime.date(2013,2,24)},
 { 'entrydate':datetime.date(2013,2,8)}] 
```

那么，如果我应用注释

```
>>valsannot = vals.annotate(dailycount=Count('entrydate'))
>>valsannot[:2]
[{ 'entrydate':datetime.date(2013,2,24),'dailycount':1},
 { 'entrydate':datetime.date(2013,2,8)},'dailycount':2] 
```

当我以相反的顺序尝试时

```
>>allentries = MyEntry.objects.all()
>> annot = allentries.annotate(dailycount=Count('entrydate'))
>>annot[:2]
[ <MyEntry ..2013-2-21>,
  <MyEntry ..2013-2-14> ]
>>annot[0].dailycount 
 1 #even tho there are many entries on that date
>>annot[1].dailycount
 1 #even tho there are many entries on that date 
```

然后应用值（）

```
>>annotvals = annot.values('entrydate')
>>annotvals[:2]
[{'today': datetime.date(2013, 2, 21)}, 
 {'today': datetime.date(2013, 2, 14)}] 
```

我不确定我是否清楚地遵循了这些……有人能解释一下为什么反过来不能作为第一个吗？

# php - 如果没有返回 json 对象，php 输出会去哪里

> ID：15085934
> 
> 赞同：1
> 
> 时间：2013-02-26T09:51:43.373
> 
> 标签：php, ajax, json

抱歉，毫无疑问，这是一个非常基本的问题……但我还没有找到可能的重复问题。

如果在使用 $.getJSON() 调用的 php 脚本的末尾，我有这样一行：

```
return json_encode( $paras_of_interest ); 
```

...一切正常...直到有一些php输出（无意中通过echo命令，或者可能是由于php代码生成了警告或错误）...然后完全禁用/停止/弄乱了返回 JSON 对象。处理这种情况的最佳方法是什么？如何找出输出了什么代码（即它“去哪里”？）......在这种情况下，有没有一种方法可以配置输出去哪里？

***后来*** 向 Dezigo 和 Salman 道歉 A：所有 3 个都是很好的答案，但我必须选择一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:57:01.800

您可以保存输出缓冲区（结束清理它）

```
<?php

ob_start();

echo "Hello ";

$out1 = ob_get_contents();

ob_end_clean();

var_dump($out1);
?> 
```

[http://www.php.net/manual/en/function.ob-get-contents.php](http://www.php.net/manual/en/function.ob-get-contents.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:14:15.377

1.  确保在此行之前没有输出：

    *   对于错误，将`display_errors`指令设置为 0 和/或使用自定义错误处理程序
    *   对于异常，使用 try/catch 块
    *   对于其他输出，如果有的话，使用输出缓冲（[`ob_start`](http://php.net/ob-start)和[`ob_get_clean`](HTTP://php.net/ob-get-clean)）
2.  如果您捕获到任何意外的输出/错误，请不要发送它，而是在您的 JSON 响应中添加一个错误参数：

    ```
    echo json_encode(array(
      'result' => /* your original result here */,
      'error'  => /* error message here */
    ); 
    ```

您的响应应始终采用这样的结构，如果未发生错误，则错误为 null 或 false。在客户端，您将首先评估错误，然后再评估结果。此外，如果发生错误，您可以发送 HTTP 500 状态代码，然后您应该能够使用 JQuery 的错误回调函数来处理错误：

```
$statusCode = $error ? 500 : 200;
header('content-type: application/json',  true, $statusCode); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T10:35:51.090

> 如何找出输出了什么代码（即它“去”到哪里？）

打开浏览器的开发者工具，然后打开页面并监控网络选项卡。您应该会在此处找到所有 XHR 记录。这包括损坏的 JSON 响应。

此外，JavaScript 库不处理损坏的 JSON。例如，jQuery 将忽略此类响应并触发错误处理程序（如果已配置）。根据 JavaScript 库，成功/错误处理程序可能会让您访问原始的`responseText`.

# android - Android：onBackPressed() 销毁所有内存？

> ID：15085935
> 
> 赞同：0
> 
> 时间：2013-02-26T09:51:44.167
> 
> 标签：android, memory, android-activity, back

我想，当我在我的一个活动上按下后退按钮时，回到上一个活动，但在此之前我需要先删除内存中的所有位图和其他资源，否则我会收到内存不足错误。

我试过了：

```
public void onBackPressed() {
   bitmap.recycle();
   System.gc();
   Runtime.getRuntime().gc();
   Intent intent = new Intent(this,GameActivity.class);
   this.startActivity(intent);
} 
```

但是仍然有内存不足的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:41:49.357

我在之前的活动中写过

```
@Override
public void onStop() {
    super.onStop();
 unbidDrawables and recycle bitmaps
}

@Override
public void onRestart(){
    onCreate(new Bundle());
} 
```

这就像一个临时工作，但它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:58:17.777

即使您调用 gc()，仍然存在对您的活动中无法收集的对象的引用。如果内存问题与您的活动中声明的某些对象有关，请尝试将它们的引用更改为 null，然后调用 gc()。如果您维护一些大型缓存，请尝试使用 Wea​​kReference。当然，性能会下降，但你可能不会崩溃

您得到的行为看起来更像是设计中的缺陷。该应用程序使用了太多内存，即使它可以在您当前正在测试的设备上运行，也可能在其他设备上存在问题。System.gc() 通常只能由操作系统调用，因为这样做时没有任何保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:59:11.693

不要覆盖`onBackPressed()`

覆盖`onStop()`

```
@Override    
protected void onStop() {
    super.onStop();
    bitmap.recycle(); //PUT THE ACTUAL BITMAP THAT YOU WANT TO RECYCLE HERE !!!!!!!
    System.gc();
    Runtime.getRuntime().gc();
    Intent intent = new Intent(this,GameActivity.class);
    startActivity(intent);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:00:43.780

按下后退按钮调用它：-

```
private void unbindDrawables(View view) {
     Log.d(TAG,"in unbindDrawables");
        if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
        ((ViewGroup) view).removeAllViews();
        view.setBackgroundResource(0);
        Log.d(TAG,"removed views");
        //finish();   

        }
 } 
```

# php - ajax表单提交后如何清除表单字段并打印成功消息

> ID：15085937
> 
> 赞同：2
> 
> 时间：2013-02-26T09:51:47.727
> 
> 标签：php, jquery, ajax, form-submit

我正在使用表单提交。我想知道如何在表单提交后清除表单字段并打印成功消息。

我使用了 var options = ( clearForm: true }

但它没有用

我的代码：-

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'myForm' and provide a simple callback function 
            $('#myForm').ajaxForm(function() { 
                //alert("Thank you for your comment!"); 
            }); 

        }); 
    </script> 

</head>

<body>
    <form id="myForm" name="myForm" action="comment.php" method="post" enctype="multipart/form-data"> 
        <input type="text" name="name" />
        <br /> 
        <textarea name="comment"></textarea> 
        <br />
        <input type="file" value="Share a Pic" name="file" id="file" />
        <br />
        <input type="submit" value="Submit Comment" /> 
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:53:34.317

只是猜测，但本地人`form.reset()`不会这样做吗？

```
$(document).ready(function() { 
     $('#myForm').ajaxForm(function() { 
         this.reset();
         alert('success');
     }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:59:32.070

你可以用`resetForm`这个。这是文档[http://malsup.com/jquery/form/#options-object](http://malsup.com/jquery/form/#options-object)

或 cna 使用[http://malsup.com/jquery/form/#api](http://malsup.com/jquery/form/#api)`resetForm`上的函数和`clearForm`文档

或者简单地尝试：

```
$(document).ready(function() { 
     $('#myForm').ajaxForm(function() { 
         success:function(){
               $('#myForm').reset();
         }
     }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:58:11.700

应该 ：

```
 $(document).ready(function() { 
      $("#myForm").submit(function(){
         $("input[type='text']").val('');
         $("input[type='textarea']").val('');
         alert('Message');
      });
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T09:56:00.717

`clearForm();`也尝试使用`resetForm();`.

**官方文档**： http: [//malsup.com/jquery/form/#api](http://malsup.com/jquery/form/#api)

```
<script type="text/javascript">
    $(document).ready(function() { 
        // bind 'myForm' and provide a simple callback function 
        $('#myForm').ajaxForm(function() { 
            //alert("Thank you for your comment!"); 
            $(this).clearForm();
        }); 

    }); 
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T10:34:19.467

它使用以下代码：-

```
<script type="text/javascript">
        $(document).ready(function() {
            var options = { 
                clearForm: true,
                resetForm: true
            };
            // bind 'myForm' and provide a simple callback function 
            $('#myForm').ajaxForm(function() { 
                //alert("Thank you for your comment!"); 

            }); 
            $('#myForm').ajaxForm(options);

        }); 
    </script> 
```

谢谢您的帮助

# iphone - 如何在 iphone 上链接 uikit 应用程序？

> ID：15085944
> 
> 赞同：0
> 
> 时间：2013-02-26T09:52:03.990
> 
> 标签：iphone, uikit, clang, foundation

我使用 ssh 到 iphone，并且可以使用 clang 或 gcc 在 iphone 上编译控制台应用程序。但是现在我如何才能链接到 UIKit？编译器找到标头并停留在链接上。

我应该将哪些参数传递给 clang？如何检查我是否有所需的静态/共享库？要链接的文件到底是什么？

示例程序：

```
#import <stdio.h>
#import <UIKit/UIView.h>

int main() {
        UIView *U = [UIView alloc];
        printf("OK\n");
        return 0;
} 
```

这是命令行和错误：

```
$ clang main.m
Undefined symbols:
  "_OBJC_CLASS_$_UIView", referenced from:
      __objc_classrefs__DATA@0 in main-2RgCk6.o
  "_objc_msgSend", referenced from:
      _main in main-2RgCk6.o
ld: symbol(s) not found
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

额外信息：

```
$ uname -a
Darwin devphone-teki-iPhone 13.0.0 Darwin Kernel Version 13.0.0: Sun Dec 16 19:58:44 PST 2012; root:xnu-2107.7.55~11/RELEASE_ARM_S5L8940X iPhone4,1 arm N94AP Darwin

$ clang --version
clang version 3.1 (trunk 152547)
Target: arm-apple-darwin13.0.0
Thread model: posix 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:01:26.430

编译成功后回答我的问题。

您需要使用 apt 安装**clang gcc p7zip** 然后找到 sdk 3

```
iphone_sdk_3.1.3_with_xcode_3.1.4__leopard__9m2809a.dmg 
```

提取得到

```
iPhoneSDK3_1_2.pkg 
```

然后再次解压到 -> ~/sdk

（你可能需要多次使用 7z 来提取更深），你会得到这个：

```
$ ls ~/sdk
Developer/  Entitlements.plist  ResourceRules.plist  SDKSettings.plist  System/   usr/ 
```

然后像这样编译

```
clang main.m -o main -isysroot ~/sdk/ \
-miphoneos-version-min=2 -L~/sdk/usr/lib -lobjc \
-framework UIKit \
-framework Foundation 
```

一旦你得到'main'，将它复制到你的应用程序文件夹并覆盖以前安装的应用程序。

```
cp main /var/stash/Applications.Q6ABC7/myApp.app/myapp
kill myapp 
```

现在您可以单击应用程序的图标并查看它是否有效。

# sql - 来自 DATEDIFF 的总计

> ID：15085945
> 
> 赞同：0
> 
> 时间：2013-02-26T09:52:05.283
> 
> 标签：sql, tsql

另一个简单的问题，我不知道如何解决，想知道您是否可以提供帮助。我需要总计 140 万行数据，每行有一定数量的 PitchNights，第 1 行 = 2，第 2 行 = 26，第 14000 行 = 3 等等，所以如果我只有这 3 行，那么总数将是 31。什么我需要在 2 个设定的日期之间总共有所有的 Pitch 之夜。我尝试了按功能分组，但没有奏效。

```
SELECT
  Bookings.BookingNumber
  ,Bookings.ArrivalDate
  ,Bookings.DepartureDate, DATEDIFF(d,Bookings.ArrivalDate
  ,Bookings.DepartureDate) AS 'PitchNights'
FROM
  Bookings
WHERE Bookings.ArrivalDate >=@ArrivalDate AND Bookings.DepartureDate <=@DepartureDate 
```

谢谢

韦恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:54:20.107

```
SELECT  SUM(DATEDIFF(d,Bookings.ArrivalDate,Bookings.DepartureDate)) AS 'PitchNights'
FROM    Bookings
WHERE   Bookings.ArrivalDate >=@ArrivalDate AND 
        Bookings.DepartureDate <=@DepartureDate 
```

# c# - 如何根据单选按钮列表验证文本框条目？

> ID：15085948
> 
> 赞同：2
> 
> 时间：2013-02-26T09:52:14.273
> 
> 标签：c#, asp.net

我发现的大多数查询示例都是相反的，但我希望根据单选按钮列表验证文本框条目（字符串？），然后将该字符串显示为文本字段。有谁知道如何做到这一点？

```
if (textBox1.TextIndex > -1)
{
image.umageUrl = "/Images/" + RadioButtonList1.TextIndex.Text + ".jpg"
} 
```

因此，尝试更好地解释一下。

我有一个带有几个选项的 RadioButton 列表。每个选项都显示一个图像。但我也想放入一个文本框。如果有人输入与 RadioButton 列表之一相同的单词，那么它也会显示图像。还有一个提交按钮

希望我说得更清楚一点。

我也在网上找到了这个：

```
For I = 0 To listOfStrings.Count - 1
            If myString.Contains(lstOfStrings.Item(I)) Then
                Return True
            End If
        Next
        Return False 
```

但这也不适合我。

更新

* * *

我想到了。现在可以做我想做的事了。我添加了 ELSE 部分。这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace ColourChoice
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
        {
            AssignImageURL();
        }

        protected void Image1_Init(object sender, EventArgs e)
        {
            AssignImageURL();
        }

        private void AssignImageURL()
        {
            if (RadioButtonList1.SelectedIndex > -1)
            {
                Image1.ImageUrl = "~/Images/" + RadioButtonList1.SelectedItem.Text + ".png";
            }
            else 
            {
                Image1.ImageUrl = "~/Images/" + TextBox1.Text + ".png";
                Label1.Text = "You typed the colour " + TextBox1.Text;
            }
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            AssignImageURL();
        }

        protected void TextBox1_TextChanged(object sender, EventArgs e)
        {
            AssignImageURL();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T13:36:15.667

在提交按钮上，您可以检查 Textbox1.text 是否等于 Radiobutton 列表的内容。像这样的东西

```
if (TextBox1.Text != "")
        {
            int b=0;
            while (b < RadioButtonList1.Items.Count)
            {
                if (TextBox1.Text == RadioButtonList1.Items[b].Text)
                {
                     Image1.ImageUrl = "~/Images/" + Textbox1.Text + ".png";
                    break;
                }
                b++;
            }
        } 
```

# java - Apache Camel FOP 组件配置文件位置

> ID：15085952
> 
> 赞同：0
> 
> 时间：2013-02-26T09:52:25.477
> 
> 标签：java, apache-camel, xsl-fo, apache-fop

我想配置 Apache Camel FOP 组件以使用配置文件（如此[处](http://camel.apache.org/fop.html#FOP-EndpointOptions)所述）。似乎骆驼正在寻找服务器基本路径中的文件，因为我遇到了异常：

```
Caused by: java.io.FileNotFoundException: C:\Users\user\Eclipse\eclipse\src\main\webapp\WEB-INF\fop.xml 
```

我想要的是将配置文件路径与其他配置文件一起存储在类路径中。

这是骆驼路线：

```
from("direct:renderer").routeId("direct:renderer")
        .onException(Exception.class)
            // Exception handling
        .end()

        // I want fop.xml config file to be looked for in classpath
        .to("fop:application/pdf?userConfigURL=src/main/webapp/WEB-INF/fop.xml") 
        .setHeader("CamelFileName", simple("${property.job.id}.pdf"))
        .to("file:eiocha/pdf") 
```

我正在使用 2.10.3 版的 Apache Camel

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:34:27.877

我记录了一张改进camel-fop的票，因此可以从类路径和诸如此类的加载useConfigURL选项：[https ://issues.apache.org/jira/browse/CAMEL-6103](https://issues.apache.org/jira/browse/CAMEL-6103)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:04:07.543

Camel 仅支持配置了起始目录的端点。所以 directoryName 必须是一个目录。

[参考](http://camel.apache.org/file2.html)

# wordpress - 在 wp alchemy 中将自定义帖子类型循环为复选框

> ID：15085959
> 
> 赞同：0
> 
> 时间：2013-02-26T09:52:29.870
> 
> 标签：wordpress

我在使用 Wordpress 时遇到了一些麻烦。我正在使用 wpalchemy 将自定义元字段添加到我的帖子类型。我有一个职位类型的员工和一个职位类型的客户。我希望在客户元框中列出所有带有复选框的员工列表，以便管理员可以显示哪些员工与每个客户一起工作。我到目前为止的代码是这样的：

```
<?php

        $type = 'medewerkers';
        $args = array(
            'post_type' => $type,
            'post_status' => 'publish',
            'posts_per_page' => -1,
            'caller_get_posts'=> 1
        );

        $my_query = null;
        $my_query = new WP_Query($args);

        if( $my_query->have_posts() ) {

            $metabox->the_group_open();
            while ($my_query->have_posts()) : $my_query->the_post(); ?>
                <?php

                    $meta = get_post_meta(get_the_ID());
                    $naam = $meta['voornaam'][0].' '.$meta['achternaam'][0];

                ?>
                    <br/><?php $metabox->the_field($naam); ?>
                    <img src="<?php echo $meta['pasfoto'][0]; ?>" height="40" width="40" style="vertical-align: middle">
                    <input type="checkbox" name="<?php $metabox->the_name(); ?>" value="1"<?php if ($metabox->get_the_value()) echo ' checked="checked"'; ?>/> <?php echo $naam; ?>

                <?php

                endwhile;
            $metabox->the_group_close();
        }
    ?> 
```

它有效，但我不满意。员工存储为单独的项目而不是数组。例如，我希望能够循环通过前端的一个数组来显示与当前客户端关联的所有员工。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:31:23.780

我已经设法修复它：

```
<?php

        $type = 'medewerkers';
        $args = array(
            'post_type' => $type,
            'post_status' => 'publish',
            'posts_per_page' => -1,
            'caller_get_posts'=> 1
        );

        $my_query = null;
        $my_query = new WP_Query($args);

        if( $my_query->have_posts() ) {

            while($mb->have_fields_and_multi('medewerkers')):
            $mb->the_group_open();
            while ($my_query->have_posts()) : $my_query->the_post(); ?>
                <?php

                    $meta = get_post_meta(get_the_ID());
                    $naam = $meta['voornaam'][0].' '.$meta['achternaam'][0];

        ?>
                    <?php $metabox->the_field($naam); ?>
                    <img src="<?php echo $meta['pasfoto'][0]; ?>" height="40" width="40" style="vertical-align: middle">
                    <input type="checkbox" name="<?php $metabox->the_name(); ?>" value="1"<?php if ($metabox->get_the_value()) echo ' checked="checked"'; ?>/> <?php echo $naam; ?>
        <?php
            endwhile;
            $mb->the_group_close();
            endwhile;
        }

    ?> 
```

# powershell - Out-File：我为什么要结合 -Append 和 -NoClobber？-Append 还不够吗？

> ID：15085962
> 
> 赞同：9
> 
> 时间：2013-02-26T09:52:35.070
> 
> 标签：powershell

我看不出两者之间的区别

```
... | Out-File -Append 
```

和

```
... | Out-File -Append -NoClobber 
```

两者都将信息附加到文件中，都不会覆盖内容，如果文件不存在则都创建文件。然而，互联网上的所有示例都使用 和 的`-Append`组合`-NoClobber`。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T12:59:36.483

`-NoClobber`将 FileMode（操作系统应如何打开文件）设置为 CreateNew（= 如果文件已经存在，则抛出 IOException 异常），*除非* `-Append`已指定在这种情况下它将 FileMode 设置为 Append（= 打开文件如果它存在并寻找文件的末尾，或者创建一个新文件）。

因此，出于所有实际目的，`-Append -NoClobber`=`-Append`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T07:58:39.073

*   -Append（搜索文件末尾并添加新内容）
*   -NoClobber（如果文件已经存在则抛出警告）

请阅读有关[Microsoft Doc的更多信息](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Out-File?view=powershell-5.0)

# sql - 左连接、ISNULL、IFNULL 不起作用

> ID：15085964
> 
> 赞同：0
> 
> 时间：2013-02-26T09:52:44.187
> 
> 标签：sql, left-join, isnull

```
CREATE TABLE IF NOT EXISTS `tblflash` (
  `FID` int(11) NOT NULL AUTO_INCREMENT,
  `fname` text COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`FID`)
) 

CREATE TABLE IF NOT EXISTS `tblcount` (
  `ID` int(50) NOT NULL AUTO_INCREMENT,
  `SID` int(50) NOT NULL,
  `FID` int(11) NOT NULL,
  `sDateTime` datetime NOT NULL,
  `elaspedTime` int(11) NOT NULL,
  PRIMARY KEY (`ID`)
)

$sqldate1 =
    "SELECT distinct tblflash.FID, tblflash.fname, IFNULL(sum(tblcount.elaspedTime),0)
    FROM tblflash 
    left outer JOIN tblcount 
    ON tblflash.FID = tblcount.FID 
    WHERE tblcount.SID='".$_SESSION['SID']."'
    ORDER BY tblflash.FID"; 
```

假设 tblflash 中有 10 行，tblcount 中有 10 行和 5 行。显示的记录仅显示 5 行。我想显示所有没有重复的 fname，如果 null 设置为 0。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:55:24.483

您`WHERE tblcount.SID='".$_SESSION['SID']."'`正在使查询充当`INNER JOIN`- 您需要添加`or tblcount.SID IS NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:20:06.197

您的`WHERE`条件应用于联接的结果，*而不是*专门应用于`tblcount`行。`tblcount`当两个表之间没有匹配时，连接在所有列中返回 NULL 。因此，`NULL = 'whatever'` *不会*评估为`true`并且不会返回该行。

[要么按照@cjk 的建议](https://stackoverflow.com/a/15110276/297408)添加`OR tblcount.SID IS NULL`到 WHERE，要么将WHERE 条件作为 ON 子句的一部分，如下所示：

```
$sqldate1 =
    "SELECT distinct tblflash.FID, tblflash.fname, IFNULL(sum(tblcount.elaspedTime),0)
    FROM tblflash 
    left outer JOIN tblcount 
    ON tblflash.FID = tblcount.FID 
    **AND** tblcount.SID='".$_SESSION['SID']."'
    ORDER BY tblflash.FID"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:01:27.800

其他 5 行的`SID`in没有数据`tblcount`

# javascript - 如何使用 javascript 选择文本以便将其复制到 X-mouse 剪贴板中？

> ID：15085968
> 
> 赞同：0
> 
> 时间：2013-02-26T09:53:00.297
> 
> 标签：javascript, x11, xorg

在 X11 的 Windows 管理器中，您可以选择一个文本并使用鼠标中键将其粘贴。

这真的很方便。

同样使用 javascript，您可以选择输入焦点上的文本。

```
<input type="text" onFocus="select();" value="The value"> 
```

这个选择功能是否也可以将鼠标剪贴板中的选择设置为手动选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:03:37.993

ZeroClipBoard 绝对是解决这个问题的方法。

[ZeroClipboard](http://jonrohan.github.com/ZeroClipboard/)或[zclip](http://www.steamdev.com/zclip/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:49:42.153

我在客户端找到的一个解决方案是[运行 autocutsel](https://superuser.com/a/177541/13818)。

```
$ autocutsel & autocutsel -s PRIMARY & 
```

但这并不是我想要的。

# c# - 实现蜂鸣功能

> ID：15085970
> 
> 赞同：4
> 
> 时间：2013-02-26T09:53:13.620
> 
> 标签：c#

我想在我们的聊天信使中实现嗡嗡声功能。我创建了气球工具提示和闪光灯，用于在聊天窗口处于最小化状态时突出显示新消息的存在。代码如下。但现在我希望在鼠标单击或按键时实现蜂鸣功能，以将聊天窗口恢复为最大化状态。

```
this.nfiBroadcast.Icon = Resource1.chat;
nfiBroadcast.ShowBalloonTip(2000, "New broadcast message received..!", "" 
     + msg.senderDisplayName 
     + " messaged you.", ToolTipIcon.Info);

if (this.WindowState == FormWindowState.Minimized)
{                       
    this.WindowState = FormWindowState.Minimized;
    FlashWindow.Flash(this, 3);
} 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:41:26.813

要从最小化状态恢复窗口，只需将 设置`WindowState`为`FormWindowState.Normal`：

```
this.WindowState = FormWindowState.Normal; 
```

# perl - Perl 模块不是取自自定义库路径

> ID：15085979
> 
> 赞同：0
> 
> 时间：2013-02-26T09:53:46.637
> 
> 标签：perl, perl-module

我已将 Perl 安装到自定义目录中设置 export_path。现在`which perl`显示自定义路径并`Perl -V`显示自定义路径的详细信息，@INC 显示如 custompath/lib/5.8.9 等。

问题是，当我运行包含像 DBI 这样的 perl 模块的 perl 脚本时，我会收到类似的错误

```
> Can't locate DBI.pm in @INC (@INC contains:
> /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi
> /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl
> /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi
> /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl
> /usr/lib/perl5/5.8.8/i386-linux-thread-multi /usr/lib/perl5/5.8.8 .) 
```

为什么它没有将**@INC**显示为自定义路径以及为什么它会抛出错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:04:57.200

看起来您正在使用 Perl 的一个构建版本`perl -V`，以及一个不同的构建版本来实际执行您的脚本。

`perl -V`(and )在您的 PATH`perl script.pl`中使用第一个，而使用脚本的 shebang ( ) 行中指示的。`perl``script.pl``perl``#!`

这可能只是调整脚本的 shebang 行的问题。

# c - C如何使用异步readFile

> ID：15085985
> 
> 赞同：2
> 
> 时间：2013-02-26T09:53:58.973
> 
> 标签：c, winapi, asynchronous, readfile

您好，我有一个关于从通信端口异步读取的问题。

我有一个函数，它应该从通信端口异步读取一个字节。该函数大约每 10 毫秒调用一次。我尝试同步执行，但缓冲区溢出，因为调用该函数的速度比它可以完成的速度快。现在我想异步实现它。但不明白它是如何工作的。

我的函数调用（每 10 毫秒调用一次）：

```
// read one byte into receiveChar
bytesReceived = BSP_cliGetChar(&receiveChar); 
```

函数体

```
int BSP_cliGetChar(char *rxBuffer)
{
DWORD numOfBytesRead;
OVERLAPPED readOverlapped;
HANDLE hEvent;
BOOL fOverlapped;
char str[255];

hEvent = CreateEvent(NULL,    // default security attribute
                     TRUE,    // manual-reset event 
                     TRUE,    // initial state = signaled 
                     NULL);   // unnamed event object 

// set up overlapped structure fields
readOverlapped.Offset     = 0; 
readOverlapped.OffsetHigh = 0; 
readOverlapped.hEvent     = hEvent; 

if (!ReadFile(hComm, rxBuffer, 1, &numOfBytesRead, &readOverlapped))
{
  if (GetLastError() != ERROR_IO_PENDING)
  {
     // Some other error occurred while reading the file.
     ExitProcess(0);
  }
  else
     fOverlapped = TRUE;
}
else
{
  // Operation has completed immediately.
  fOverlapped = FALSE;
  return (int) numOfBytesRead;
}
while(!HasOverlappedIoCompleted(&readOverlapped))
{
   sprintf_s(str, "%d", &numOfBytesRead);
   OutputDebugString(str);
} 
```

}

现在我想要的是从 com 端口读取一个字节。如果返回 ERROR_IO_PENDING，调用函数应该继续。只有接收到一个字节，BSP_cliGetChar 函数才应该返回。问题是，该方法停留在 while 循环中，而不是继续调用过程。

任何有想法如何解决这个问题的人？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-11T15:55:38.153

我把你的代码扔进了一个具有以下主要功能的项目中

```
BSP_cliGetChar(char *rxBuffer);

HANDLE hComm;

int main() {
    char buf;
    DWORD numRead;

    hComm = CreateFile(
        "COM2",
        GENERIC_READ | GENERIC_WRITE,
        0,
        NULL,
        OPEN_EXISTING,
        FILE_FLAG_OVERLAPPED,
        NULL);
    if (hComm == INVALID_HANDLE_VALUE)
    {
        printf("error createfile: %d\n", GetLastError());
        return 1;
    }

    do
    {
        BSP_cliGetChar(&buf);
        printf("%c", buf);
    } while (buf != 'X');

    CloseHandle(hComm);
    return 0;
} 
```

我使用[虚拟串行端口驱动程序](http://www.eltima.com/products/vspdxp/)创建了一对链接的 COM 端口 COM1 和 COM2。[我用PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)打开 COM1，然后运行我的程序。正如预期的那样，我坐在 HasOverlappedIoCompleted 循环中。一旦我通过 PuTTY 发送一个字符，循环就会退出并且我的字符被打印出来。

这就是说我不知道​​你的环境，它可能与你的实际硬件和在你的代码中正确配置你的 COM 端口有关。[MSDN](https://msdn.microsoft.com/en-us/library/windows/desktop/aa363201(v=vs.85).aspx)提供了有关配置串行通信的大量信息，并特别注意[设备控制块 (DCB) 结构](https://msdn.microsoft.com/en-us/library/windows/desktop/aa363214(v=vs.85).aspx)

希望有帮助。也许您可以为您的场景提供更多细节。

# sql - 您可以在 SQL 中使用 if-then-else 逻辑吗？

> ID：15085990
> 
> 赞同：101
> 
> 时间：2013-02-26T09:54:09.563
> 
> 标签：sql, sql-server

我需要根据某种优先级从表中选择数据，如下所示：

```
select product, price from table1 where project = 1

-- pseudo: if no price found, do this:
select product, price from table1 where customer = 2

-- pseudo: if still no price found, do this:
select product, price from table1 where company = 3 
```

也就是说，如果我发现 3 个产品的价格基于`project = X`，我不想选择`customer = Y`。我只想返回结果 3 行并完成。

你应该如何在 SQL 中做这样的事情？对伪 if 使用某种 CASE 语句？做工会或其他一些聪明的事情？

编辑：我正在使用 MS SQL。

谢谢！

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-02-26T09:57:36.863

您可以进行以下sql查询

```
IF ((SELECT COUNT(*) FROM table1 WHERE project = 1) > 0) 
    SELECT product, price FROM table1 WHERE project = 1
ELSE IF ((SELECT COUNT(*) FROM table1 WHERE project = 2) > 0) 
    SELECT product, price FROM table1 WHERE project = 2
ELSE IF ((SELECT COUNT(*) FROM table1 WHERE project = 3) > 0)
    SELECT product, price FROM table1 WHERE project = 3 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-02-26T09:56:43.237

CASE 语句最接近 SQL 中的 IF 语句，所有版本的 SQL Server 都支持：

```
SELECT CASE <variable> 
           WHEN <value>      THEN <returnvalue> 
           WHEN <othervalue> THEN <returnthis> 
           ELSE <returndefaultcase> 
       END 
  FROM <table> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-26T10:00:47.043

而不是使用`EXISTS`，`COUNT`只是使用`@@ROWCOUNT`：

```
select product, price from table1 where project = 1

IF @@ROWCOUNT = 0
BEGIN
    select product, price from table1 where customer = 2

    IF @@ROWCOUNT = 0
    select product, price from table1 where company = 3
END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T10:26:23.990

使用 SQL Server，您可以只使用 CTE 而不是 IF/THEN 逻辑，以便轻松映射现有查询并更改涉及的查询数量；

```
WITH cte AS (
    SELECT product,price,1 a FROM table1 WHERE project=1   UNION ALL
    SELECT product,price,2 a FROM table1 WHERE customer=2  UNION ALL
    SELECT product,price,3 a FROM table1 WHERE company=3
)
SELECT TOP 1 WITH TIES product,price FROM cte ORDER BY a; 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!6/175c0/5)。

或者，您可以将它们组合成一个`SELECT`以简化优化器；

```
SELECT TOP 1 WITH TIES product,price FROM table1 
WHERE project=1 OR customer=2 OR company=3
ORDER BY CASE WHEN project=1  THEN 1 
              WHEN customer=2 THEN 2
              WHEN company=3  THEN 3 END; 
```

[另一个 SQLfiddle](http://sqlfiddle.com/#!6/9fc00/1)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T10:05:04.757

请检查这是否有帮助：

```
select TOP 1
    product, 
    price 
from 
    table1 
where 
    (project=1 OR Customer=2 OR company=3) AND
    price IS NOT NULL
ORDER BY company 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T10:02:46.053

有一个案例陈述，但我认为以下内容更准确/有效/更容易阅读您想要的内容。

```
select 
  product
  ,coalesce(t4.price,t2.price, t3.price) as price
from table1 t1
left join table1 t2 on t1.product = t2.product and t2.customer =2
left join table1 t3 on t1.product = t3.product and t3.company =3
left join table1 t4 on t1.product = t4.product and t4.project =1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-26T21:45:00.713

- 大部分情况与上述类似的答案。包含用于测试的代码

```
DROP TABLE table1
GO
CREATE TABLE table1 (project int, customer int, company int, product int, price money)
GO
INSERT INTO table1 VALUES (1,0,50, 100, 40),(1,0,20, 200, 55),(1,10,30,300, 75),(2,10,30,300, 75)
GO
SELECT TOP 1 WITH TIES product
        , price
        , CASE WhereFound WHEN 1 THEN 'Project'
                WHEN 2 THEN 'Customer'
                WHEN 3 THEN 'Company'
            ELSE 'No Match'
            END AS Source
FROM 
    (
     SELECT product, price, 1 as WhereFound FROM table1 where project = 11
     UNION ALL
     SELECT product, price, 2 FROM table1 where customer = 0
     UNION ALL
     SELECT product, price, 3 FROM table1 where company = 30
    ) AS tbl
ORDER BY WhereFound ASC 
```

# asp.net - 将 Ajax Accordion 与中继器一起使用

> ID：15085993
> 
> 赞同：1
> 
> 时间：2013-02-26T09:54:14.293
> 
> 标签：asp.net, repeater, accordion

我有一个Repeater 控件，现在想将它添加到Accordion。它似乎不起作用。我该怎么做呢？

**我的中继器：**

```
<ajaxToolkit:Accordion ID="accordion1" runat="server" CssClass="accordion" HeaderCssClass="accordionHeader"
    HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent"
    AutoSize="None" FadeTransitions="true" TransitionDuration="250" FramesPerSecond="40"
    RequireOpenedPane="false" SuppressHeaderPostbacks="true">
        <Panes>
            <asp:Repeater ID="Repeater1" runat="server"  DataSourceID="SchemeDataSource1">
                <ItemTemplate>
                    <table style="border: thin solid #000000;color: Black;background-color:#E0E0E0"; width: "100%" >
                            <tr>
                                <td>
                                    <ajaxToolkit:AccordionPane ID="AccordionPane1" runat="server">
                                        <Header>
                                            PRENO
                                            <asp:Label ID="lblPreno" runat="server" Text='<%# Bind("PRENR") %>'></asp:Label>
                                            MONTHLY PREMIUM
                                            <asp:Label ID="lblPrem" runat="server" Text='<%# Bind("PREMIUM") %>'></asp:Label>
                                            <br />
                                            <asp:LinkButton ID="lnkPre" runat="server" ToolTip="Copy Premium To New Scheme" Font-Bold="True"
                                                Font-Size="Larger" Visible="true">>>
                                            </asp:LinkButton>
                                            <br />
                                            Relation: [
                                            <asp:Label ID="lblRel" runat="server" Text='<%# Bind("RELATION") %>'></asp:Label>
                                            ] UWCODE: [
                                            <asp:Label ID="lblUw" runat="server" Text='<%# Bind("UWFEECODE") %>'></asp:Label>
                                            ][
                                            <asp:Label ID="lblUwDescription" runat="server" Text='<%# Bind("DESCRIPTION") %>'></asp:Label>
                                            ]
                                            <br />
                                        </Header>
                                        <Content>
                                            <table>
                                                <tr align="left" valign="top">
                                                    <td align="left">
                                                        <asp:DetailsView ID="dvEarner" runat="server" HeaderText="NO EARNER" EmptyDataText="No Results To Display"
                                                            HeaderStyle-BorderColor="Black" HeaderStyle-BorderStyle="Solid" HeaderStyle-BorderWidth="1px"
                                                            BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px"
                                                            CellPadding="3" CellSpacing="2" EnableViewState="False">
                                                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                                                            <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
                                                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                        </asp:DetailsView>
                                                    </td>
                                                    <td align="left">
                                                        <asp:DetailsView ID="dvJVName" runat="server" HeaderText="JV NAME" HeaderStyle-BorderColor="Black"
                                                            HeaderStyle-BorderStyle="Solid" HeaderStyle-BorderWidth="1px" EmptyDataText="JV NAME"
                                                            AlternatingRowStyle-BorderStyle="Solid" AlternatingRowStyle-BorderWidth="1px"
                                                            BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px"
                                                            CellPadding="3" CellSpacing="2">
                                                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                                                            <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
                                                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <EmptyDataRowStyle BackColor="#5D7B9D" ForeColor="White" Font-Bold="true" />
                                                        </asp:DetailsView>
                                                    </td>
                                                    <td align="left">
                                                        <asp:DetailsView ID="DetailsView1" runat="server" HeaderText="%" HeaderStyle-BorderColor="Black"
                                                            HeaderStyle-BorderStyle="Solid" HeaderStyle-BorderWidth="1px" EmptyDataText="%"
                                                            AlternatingRowStyle-BorderStyle="Solid" AlternatingRowStyle-BorderWidth="1px"
                                                            BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px"
                                                            CellPadding="3" CellSpacing="2">
                                                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                                                            <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
                                                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <EditRowStyle BackColor="#738A9C" Font-Bold="True" ForeColor="White" />
                                                            <EmptyDataRowStyle BackColor="#5D7B9D" ForeColor="White" Font-Bold="true" />
                                                        </asp:DetailsView>
                                                    </td>
                                                    <td align="left">
                                                        <asp:DetailsView ID="dvProduct" runat="server" HeaderText="PRODUCT DETAILS" HeaderStyle-BorderColor="Black"
                                                            HeaderStyle-BorderStyle="Solid" HeaderStyle-BorderWidth="1px" EmptyDataText="No Results To Display"
                                                            AlternatingRowStyle-BorderStyle="Solid" AlternatingRowStyle-BorderWidth="1px"
                                                            BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px"
                                                            CellPadding="3" CellSpacing="2">
                                                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                                                            <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
                                                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                        </asp:DetailsView>
                                                    </td>
                                                    <td align="left">
                                                        <asp:DetailsView ID="dvFeeDetails" runat="server" HeaderText="ADDITIONAL FEE DETAILS"
                                                            HeaderStyle-BorderColor="Black" HeaderStyle-BorderStyle="Solid" HeaderStyle-BorderWidth="1px"
                                                            EmptyDataText="No Results To Display" AlternatingRowStyle-BorderStyle="Solid"
                                                            AlternatingRowStyle-BorderWidth="1px" BackColor="#DEBA84" BorderColor="#DEBA84"
                                                            BorderStyle="None" BorderWidth="1px" CellPadding="3" CellSpacing="2">
                                                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                                                            <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
                                                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                        </asp:DetailsView>
                                                        <br />
                                                    </td>
                                                </tr>
                                            </table>
                                            <table>
                                                <tr>
                                                    <td>
                                                        <strong><u>UNDERWRITER DETAILS:</u></strong>
                                                        <asp:GridView ID="grdUWDetails" runat="server" ForeColor="#333333" CellPadding="4"
                                                            AutoGenerateSelectButton="False">
                                                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                                                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                                                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                                                            <EmptyDataTemplate>
                                                                No results to display.</EmptyDataTemplate>
                                                        </asp:GridView>
                                                        <br />
                                                        <hr />
                                                    </td>
                                                </tr>
                                            </table>
                                        </Content>
                                    </ajaxToolkit:AccordionPane>
                                </td>
                            </tr>                                                  
                        </table>
                </ItemTemplate>
            </asp:Repeater>
        </Panes>
    </ajaxToolkit:Accordion> 
```

**中继器项目绑定：**

```
Private Sub Repeater1_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles Repeater1.ItemDataBound
If e.Item.ItemType = ListItemType.Item OrElse e.Item.ItemType = ListItemType.AlternatingItem Then
  Dim strPreno As String = DirectCast(e.Item.FindControl("lblPreno"), Label).Text

  Dim dv As DetailsView = DirectCast(e.Item.FindControl("dvEarner"), DetailsView)
  dv.DataSource = fnLoadPremiums(strPreno)
  dv.DataBind()

  Dim dv1 As DetailsView = DirectCast(e.Item.FindControl("dvProduct"), DetailsView)
  dv1.DataSource = fnLoadProduct(strPreno)
  dv1.DataBind()

  Dim dv2 As DetailsView = DirectCast(e.Item.FindControl("dvFeeDetails"), DetailsView)
  dv2.DataSource = fnLoadFeeDetails(strPreno)
  dv2.DataBind()

  Dim grd As GridView = DirectCast(e.Item.FindControl("grdUWDetails"), GridView)

  grd.DataSource = fnLoadGrid(strPreno)
  grd.DataBind()
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:30:49.860

解决这个问题的唯一方法是动态添加我的 Accordion 并通过后面的代码添加 AccordionPanes。

HTML：

```
<ajaxToolkit:Accordion ID="MainAccordion1" runat="server" CssClass="accordion" HeaderCssClass="accordionHeader"
        HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent"
        AutoSize="None" FadeTransitions="true" TransitionDuration="250" FramesPerSecond="40"
        RequireOpenedPane="false" SuppressHeaderPostbacks="true">
        <Panes>

        </Panes>
</ajaxToolkit:Accordion> 
```

代码背后：

```
'Create AccrionPane
Dim pane As New AjaxControlToolkit.AccordionPane
pane.ID = "pane" & i
pane.HeaderContainer.Controls.Add(headerLabel1)
pane.HeaderContainer.Controls.Add(headerLabel2)

Me.MainAccordion1.Panes.Add(pane) 
```

我遍历我的数据源并在我的 Accrordion 中填充数据

# ios - 在 Facebook SDK 3.2 中处理 Facebook 访问令牌

> ID：15085998
> 
> 赞同：0
> 
> 时间：2013-02-26T09:54:22.373
> 
> 标签：ios, facebook, access-token

我如何处理`Facebook SDK 3.2`适用于 iOS 的问题？还有我如何在这个中使用 Facebook 访问令牌？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:58:10.493

如何使用 fb iOS sdk v3.2 获取 FB 访问令牌：

```
[FBSession activeSession].accessTokenData.accessToken 
```

不确定您在处理 SDK 方面想知道什么，但这里有关于 3.2 版的更多信息：http: [//developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.1-to-3.2/](http://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.1-to-3.2/)