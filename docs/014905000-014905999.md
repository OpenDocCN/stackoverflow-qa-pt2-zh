# StackOverflow 问答 14905000-14905999

# java - System.exit() 结果无法执行 finally 块

> ID：14905006
> 
> 赞同：7
> 
> 时间：2013-02-15T23:21:48.543
> 
> 标签：java, try-catch-finally, system.exit

我正在努力`My application's under maintanace module`

```
try {
    if (isUndermaintanace) {
        System.exit(1);
    } else {
        prepareResources();
    }           
} catch (Exception e) {
    printStack(e);
} finally {
    cleanResources();
} 
```

当我通过时 `isundermaintanace` `true` 终于没有执行。

我错过了什么？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T23:23:19.117

`Finally`如果您杀死 VM（或者如果 VM 以其他方式死机），则不会执行。System.exit() 是一种相当粗暴的杀死程序的方法，而 finally 是一个高级 OOP 概念。System.exit() 非常快地退出，尽可能少地进行清理。

如果您进入任务管理器并终止该进程或`kill -9`在该进程上发出一个，您会期望最终执行吗？模糊地（*非常*模糊地）是同一件事。

* * *

有几点值得注意。特别是，我在帖子的第一部分撒了一点谎。`System.exit()`将其比作真正立即杀死程序是一种误导。特别是，关闭钩子运行，[如果配置](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#runFinalizersOnExit%28boolean%29)，终结器实际上可以运行。但是请注意，文档强烈建议不要使用`runFinalizersOnExit`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:23:51.943

`System.exit`立即退出程序，绕过任何其他代码执行（例如`finally`块）。如果要在`finally`块运行后退出程序，请改为抛出异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T23:24:30.910

如果 JVM 在执行 try 或 catch 代码时退出，例如`System.exit()`，finally 块可能不会执行。同样，如果执行 try 或 catch 代码的线程被中断或杀死，即使应用程序作为一个整体继续运行，finally 块也可能不会执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T23:23:30.507

finally 块不会执行的唯一**例外情况**`finally block`是，如果您在 之前调用 'System.exit(1)' ，这是`System.exit(1)`终止 JVM 的预期行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T23:25:15.357

如果您调用`System.exit()`您的代码将不会执行`finally`，因为该调用会终止您的 JVM。

# javascript - 循环中定义的 HTML5 多个放置目标

> ID：14905007
> 
> 赞同：1
> 
> 时间：2013-02-15T23:21:54.550
> 
> 标签：javascript, html, drag-and-drop

这似乎与此处发现的类似问题，但恐怕我不理解所提供的解决方案。 [HTML5 中的多个放置事件](https://stackoverflow.com/questions/6717853/multiple-drop-events-in-html5)

我正在尝试使用 Ext JS 库从一个拖动源设置多个放置目标。当我为 notifyEnter 定义闭包时，它似乎总是使用变量“i”来发出警报（出于调试目的，我已将其更改为警报）。来自Java背景，我的直觉是通过在循环中定义一个最终变量并在定义闭包之前分配我想要的 i 或 playerLocationPanel 来解决这个问题，但这似乎不是一个有效的解决方案.

这是我 8-10 年来第一次涉足 Javascript，非常感谢您的帮助。

```
/****
* Setup Drop Targets
***/
var playerPanelDropTargets = new Array();
var dropTargetEls = new Array();
for(var i=0;i<=5; i++){
    dropTargetEls[i] = playerLocationPanels[i].body.dom;

    playerPanelDropTargets[i] = Ext.create('Ext.dd.DropTarget', dropTargetEls[i], {
        ddGroup: 'GridExample',
        notifyEnter: function(ddSource, e, date){
            // The problem here is that it always calls, specifically playerLocationPanels[i]
            // and i is always going to be 1 more than the top of the loop.
            //playerLocationPanels[i].body.stopAnimation();
            //playerLocationPanels[i].body.highlight();
            alert(i);

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:40:34.830

您需要采用与您引用的那个问题中提到的相同的基本方法：您的“notifyEnter”函数需要在一个单独的函数中创建，您将“i”传递给该函数，并返回处理函数。像这样的东西：

```
playerPanelDropTargets[i] = Ext.create('Ext.dd.DropTarget', dropTargetEls[i], {
    ddGroup: 'GridExample',
    notifyEnter: makeHandler(i)
});

// ...

function makeHandler(i) {
  return function(ddSource, e, date){
        alert(i);
        // etc.
    };
} 
```

通过调用另一个函数来创建处理函数，您可以确保每个处理函数都有自己的“i”值副本。

# jquery - JQuery 问题：显示隐藏对象

> ID：14905008
> 
> 赞同：0
> 
> 时间：2013-02-15T23:21:59.727
> 
> 标签：jquery

我在正确编写代码方面确实存在问题。我想我的知识不足以解决它，所以我问你们中的一个人是否可以修复我的代码。

所以我想要实现的目标：http: [//jsfiddle.net/yHHFJ/](http://jsfiddle.net/yHHFJ/)

```
$('[class^=is]').hide();
$("#select_2").change(function(){          
var value = $("#select_2 option:selected").val();
var theDiv = $(".is" + value);

theDiv.slideDown();
theDiv.siblings('[class^=is]').slideUp();
});

var $j = jQuery.noConflict();
function changesizedropdown(size){
var option = size;
var select = document.getElementById("select_2");
var opt, o = 0;
while (opt = select[o++]){
if (opt.value == option){ select.selectedIndex = o - 1; }
}
}

$j(document).ready(function () {

var swatch ='';
$j('#sizebox:eq(0) option').each(function() {swatch = swatch + "<li> <a    href='javascript:void(0)' onclick='changesizedropdown(&amp;quot;"+ $j(this).val() +"&amp;quot;);'>" + $j(this).text() + "</a></li>"});
var sizeswatchhtml = "<div class='size'><div style='float: left; margin: 6px 5px 0px 0px;'>SELECT SIZE : </div><div style='float: left; margin: 0pt 7px 0px 13px;'><ul>"+ swatch + " </ul></div></div>";
document.getElementById('sizeswatch').innerHTML = sizeswatchhtml;

}); 
```

我有一个带有 SML 大小的选择和选项下拉列表，我设法将其显示为单独的 DIV。我还有隐藏的 DIV（小、中、大），当我单击 S（显示小）、M（显示中）或 L（显示大）时应该显示这些 DIV，但它们没有出现，我正在努力制作对的。

你们能帮帮我吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:48:58.967

我对您的脚本做了一些小改动，现在看起来工作正常。

```
<script>

var $j = jQuery.noConflict();
$j('[class^=is]').hide();

$j("#select_2").change(function(){          
process();
});
function process()
{
var value = $j("#select_2 option:selected").val();
var theDiv = $j(".is" + value);
theDiv.slideDown();
theDiv.siblings('[class^=is]').slideUp();
}
function changesizedropdown(size){
var option = size;
var select = document.getElementById("select_2");
var opt, o = 0;
while (opt = select[o++]){
if (opt.value == option){select.selectedIndex = o - 1; process();}
}
}

$j(document).ready(function () {

var swatch ='';
$j('#sizebox:eq(0) option').each(function() {
swatch = swatch + "<li> <a href='javascript:void(0)' onclick='changesizedropdown(\""+       $j(this).val() +"\");'>" + $j(this).text() + "</a></li>"});
var sizeswatchhtml = "<div class='size'><div style='float: left; margin: 6px 5px 0px    0px;'>SELECT SIZE : </div><div style='float: left; margin: 0pt 7px 0px 13px;'><ul>"+ swatch + " </ul></div></div>";
document.getElementById('sizeswatch').innerHTML = sizeswatchhtml;

}); 
```

第一个变化是我使用 \" 代替了 "，因为它给出了错误。

第二个变化是，即使您更改了下拉列表的选择索引，它的更改事件也没有被触发，所以我已经从函数 changesizedropdown 本身显式调用它。

第三个变化是我首先编写了 noconflict 语句，并且在任何地方都使用了 $j 代替 $。

谢谢。

# javascript - 广告拦截器的参考，例如网页内容过滤

> ID：14905016
> 
> 赞同：0
> 
> 时间：2013-02-15T23:23:31.147
> 
> 标签：javascript, web, filtering, adblock

我想为浏览器实现一个扩展来阻止第三方弹出广告，就像广告拦截器一样。但我不知道从哪里开始。有人可以向我指出一些参考资料，我可以使用这些参考资料来了解有关过滤 Web 内容的更多信息吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:37:19.620

对于谷歌浏览器，广告拦截的基础是[`chrome.webRequest`](http://developer.chrome.com/extensions/webRequest.html)API，它将提供有关正在进行的网络请求的扩展信息，并允许它拦截或修改正在进行的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:36:13.247

我讨厌把你推到你可能已经找到的链接，但你真正需要的一切都在这里：

[http://developer.chrome.com/extensions/index.html](http://developer.chrome.com/extensions/index.html)

如果您花时间阅读它，您将了解扩展程序是如何构建并存在于浏览器中的。如果你阅读足够长的时间，你会发现这个部分：

[http://developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

其中详细说明了如何将 javascript 注入选项卡并在页面上下文与插件上下文的情况下运行它。

这些资源相当详细，您只需阅读它们即可。

* * *

要跟进您的评论，**不。**每个浏览器环境的架构都不同，即使目标相同，您也可能不得不对同一个问题采取不同的方法。

在我看来，有两种方法可以做到这一点（在高层次上）。阻止传输甚至发生，或在页面加载后追溯删除页面中的元素。

如果您停止传输，那会更好，因为它应该可以防止大量的偷渡式攻击，因为字节永远不会到达计算机，或者至少不会到达页面。

正如duskwuff 解释的那样，chrome 有一个API，可以让您拦截请求并在当时做出决定。IE 将有一个与 chrome 完全不同的 api，而 firefox 则不同于两者。

采用追溯方法，您可能会构建一些针对页面运行并删除广告的 x 平台 javascript。如果您可以在所有浏览器的选项卡中找到注入/执行此脚本的独特方法，这将“跨浏览器”工作，但该部分的实现将是平台独有的。

不同的浏览器甚至使用不同的语言。

Chrome 对大多数扩展使用 JS/HTML5，您可以明显地使用本机 DLL，但是当您将扩展提交到商店时，您会受到更严格的审查，因为需要审查二进制文件，因为它不会暴露浏览器的问题，因为 html/ Node.js 版本位于沙箱内，可以适当隔离。

Firefox 在过去的一段时间里发生了很大的变化，我没有跟上他们的变化，但这是一个完全不同的球赛。他们的扩展框架在某一时刻已经足够成熟，可以构建小型独立应用程序 iirc，但我可能错了。

IE 主要是 COM 扩展，它可能在最近一段时间内发生了一些变化，但您可能会制作与浏览器的 COM 接口互操作的 .NET 或 C++ .dll。

所以你可以看到每个浏览器都有很大的不同，然后就是所有的异常值（Safari / Opera / 等等......）

我们不要忘记很多这些浏览器也是跨平台的，根据您如何解决问题，您可能必须考虑到这一点。

* * *

还值得注意的是：Chrome 是一个异步模型，每个选项卡/插件彼此“隔离”，并且基本上使用异步消息进行通信。这使得使用浏览器的一般方法与其他浏览器根本不同，因为您需要在回调方法中工作很多。

# ruby-on-rails - Rake 任务中的 Rails 引擎模型

> ID：14905019
> 
> 赞同：0
> 
> 时间：2013-02-15T23:23:39.617
> 
> 标签：ruby-on-rails, rake

我正在为一个分成多个引擎的 Rails 项目执行 rake 任务。该任务位于Rails*主*`lib/tasks`应用程序的文件夹中，并试图从引擎 ( ) 创建一个新的。*`Post``Blog``engines/blog/app/models/post`*

 *引擎文件 ( `blog/lib/blog/engine.rb`) 如下所示：

```
module Blog
  class Engine < ::Rails::Engine
    isolate_namespace Blog
  end
end 
```

所以如果我理解正确，引用`Blog::ModelHere`是正确的语法。这是 rake 任务：

```
namespace :blog do
  desc "Import blog posts from old Wordpress site"
  task :import => :environment do
    # ... generating variables here  
    post = Blog::Post.create!(
        post.title = title,
        post.slug = title.parameterize,
        post.date = date,
        post.user_id = User.find_by_name(user).id,
        post.content = content,
        post.tags = tags
    )
  end
end 
```

返回...
`undefined method 'title=' for nil:NilClass`

它似乎在`Blog::Post`通话中窒息。我也试过`::Blog::Post`了，但这似乎没有多大意义。我也尝试将其`blog/lib/tasks`作为引擎任务保留，但我也无法使其正常工作。

我环顾了 SO 和 Github，看看是否有人为引擎中的 rake 任务编写代码，但找不到任何具体的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:06:16.933

你的创造！应该接受一个块来执行分配，你所拥有的是做分配然后将结果作为参数传递。

```
post = Blog::Post.create! do |post|
    post.title = title
    post.slug = title.parameterize
    post.date = date
    post.user_id = User.find_by_name(user).id
    post.content = content
    post.tags = tags
end 
```*

# php - 我的列不是空白的，但我收到此错误：'where 子句'中的未知列''

> ID：14905020
> 
> 赞同：0
> 
> 时间：2013-02-15T23:23:40.497
> 
> 标签：php, mysql

我知道 npi 列存在，所以我不确定为什么会出现此错误；我在这里阅读了其他一些主题，但没有任何东西对我有用。在我的 where 子句中，我尝试了反引号和单引号，但无济于事。任何帮助将不胜感激。谢谢你。

```
 <?php
    include('config.php');
    if (isset($_GET['insurance_id']) ) {
    $insurance_id = (string) $_GET['insurance_id'];
    if (isset($_POST['submitted'])) {
    foreach($_POST AS $key => $value) { $_POST[$key] = mysql_real_escape_string($value); }
    $sql = ("UPDATE `doctor_data` SET `dr_first_name` = '{$_POST['dr_first_name']}', `dr_last_name` = '{$_POST['dr_last_name']}' where npi='$npi'");

    mysql_query($sql) or die(mysql_error());
    echo (mysql_affected_rows()) ? "Edited Record.<br />" : "Nothing changed. <br />";
    echo "<a href='index.php?id=28&insurance_id=($REQUEST:insurance_id)'>Back To List</a>";
    }
    $row = mysql_fetch_array ( mysql_query("SELECT * from `doctor_data`"));
    ?>

    <form action='' method='POST'>
    <p><b>Doctor:</b><br /><input type='text' name='dr_first_name' value='<?= stripslashes($row['dr_first_name']) ?>' /> <input type='text' name='dr_last_name' value='<?= stripslashes($row['dr_last_name']) ?>' />
    <p><input class="btn btn-success" type='submit' value='Update Record' /><input type='hidden' value='1' name='submitted' />
    </form>
    <? } ?> 
```

此外，数据在发布后保存在表单上，​​但未保存到数据库中，并且在按下发布按钮后，我收到标题中发布的错误消息。

```
-- phpMyAdmin SQL Dump
-- version 3.4.11.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Feb 15, 2013 at 05:50 PM
-- Server version: 5.5.23
-- PHP Version: 5.2.17

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `anag_demo`
--

-- --------------------------------------------------------

--
-- Table structure for table `doctor_data`
--

CREATE TABLE `doctor_data` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `npi` int(11) DEFAULT NULL,
  `dr_first_name` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `dr_last_name` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `npi` (`npi`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=17 ;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:40:23.050

尝试这个：

```
$nameFirst = $_POST['dr_first_name'];
$nameLast = $_POST['dr_last_name'];

$sql = "UPDATE doctor_data SET dr_first_name = '$nameFirst', dr_last_name = '$nameLast' where npi = '$npi'"; 
```

该字符串格式错误 b/c 您有一系列单引号，其中一些表示传递给 mysql 的字符串，另一些表示关联数组引用的键。如评论中所述，您应该查看[PDO](http://php.net/pdo)和[bindValue](http://www.php.net/manual/en/pdostatement.bindvalue.php)。

--**更新**--

您的姓氏中可能有撇号，这会导致损坏。您应该始终**清理**传递给 mysql 的变量，以确保恶意用户不会尝试执行恶意命令。您使用已弃用的 mysql api，您至少应该转向[mysqli](http://www.php.net/manual/en/book.mysqli.php)或更好的 pdo，如上所述。无论如何，试试这个：

```
$nameFirst = mysql_real_escape_string($_POST['dr_first_name']);
$nameLast = mysql_real_escape_string($_POST['dr_last_name']); 
```

# ios - UIView 背景渐变与界面生成器视图

> ID：14905022
> 
> 赞同：8
> 
> 时间：2013-02-15T23:23:44.937
> 
> 标签：ios, ios6

我想使用渐变作为 UIView 的背景。我知道这通常是通过图像和`backgroundColor`属性完成的。但是，我想学习如何在代码中做到这一点。使用[https://stackoverflow.com/a/1931498/99683](https://stackoverflow.com/a/1931498/99683)我可以以编程方式创建一个`UIView`并给它一个渐变层。这很好用。

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(20, 340, 280, 100)];
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = view.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor redColor] CGColor], (id)[[UIColor yellowColor] CGColor], nil];
[view.layer insertSublayer:gradient atIndex:0];
[self.view addSubview:view]; 
```

但是，如果我在 Interface Builder 中放置一个视图（背景设置为清除）并尝试相同的操作，渐变永远不会出现。

```
CAGradientLayer *gradient2 = [CAGradientLayer layer];
gradient2.frame = self.containerView.bounds;
gradient2.colors = [NSArray arrayWithObjects:(id)[[UIColor blueColor] CGColor], (id)[[UIColor greenColor] CGColor], nil];
[self.containerView.layer insertSublayer:gradient2 atIndex:0]; 
```

我还需要在 IB 或代码中做些什么来完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T16:09:28.397

我遇到了同样的问题，但最终发现 UIView 尚未在您尝试设置背景渐变的代码中创建，我猜在您的情况下可能是以下之一 - *viewDidLoad*或 - *viewWillAppear*正因为如此

> self.containerView.bounds 将是 {{0, 0}, {0, 0}}

相反，你应该在里面设置渐变层

> viewDidAppear

此时视图已创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-08T06:28:49.217

该库支持使用 IB_DESIGNABLE / IBInspectable 在 Storyboard 中设置渐变背景。

这真的很有用。

[https://github.com/recruit-mtl/EXTView/](https://github.com/recruit-mtl/EXTView/)

# c++ - 对象可能修改的功能

> ID：14905028
> 
> 赞同：0
> 
> 时间：2013-02-15T23:24:07.263
> 
> 标签：c++, oop, class, c++11

我在 C++ 中有一个对象。

它的一些函数对对象没有任何改变并且被限定为 being `const`。

其他函数确实对对象进行了更改，这将导致重新计算几个值。

我的问题是 C++ 或 C++11 中是否存在一些特殊的类方法，如果使用非常量方法，则会自动调用这些方法。

如果不是，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:53:37.680

简短的回答是不，该语言没有任何东西可以直接支持它。

您仍然可以至少做一点集中代码来跟踪您的参数是否已更改。例如，您可以编写一个小模板，如下所示：

```
template <class T>
class param {
    T value_;
    bool clean_;
public:
    param(T v) : value_(v), clean_(false) {}

    param &operator=(param &other) { value_ = other.value; clean_ = false; return *this; }

    param &operator=(T const &t) { value_ = t; clean_ = false; return *this; }

    operator T() { return value_; }    

    void clean() { clean_ = true; }

    bool isclean() { return clean_; }
}; 
```

然后你会有类似的东西：

```
class integrator { 
    double value;
    param<double> a, b, c;

    double calculate_value(double a, double b, double c);

public:
    double operator()() { 
        if (a.isclean() && b.isclean() && c.isclean())
            return value;
        value = calculate_value(a, b, c);
        a.clean();
        b.clean();
        c.clean();
        return value;
    }
}; 
```

这不会使*整个*过程自动化，但可以让您隔离代码，因此只有使用参数的函数需要跟踪它们是否是最新的——其余代码可以只分配值，以及何时分配这些值被自动标记为脏。

# xcode - 是否可以记录某个对象在我的应用程序中使用了多少内存？

> ID：14905039
> 
> 赞同：1
> 
> 时间：2013-02-15T23:25:16.730
> 
> 标签：xcode, memory-management, cocos2d-iphone

我正在创建一个游戏，我想知道是否可以输入一个日志来打印出某个对象正在使用多少内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:26:47.730

有点。您可以使用 ObjC 运行时方法 (objc_getInstanceSize) 获取类实例的大小。但它不包括对象引用（id 和指针类型）使用的内存和使用 malloc 分配的内存。

更多细节在我的[博文中。](http://www.learn-cocos2d.com/2013/01/memory-calculating-size-textures-audio-buffers-classes-collections/)

# perl - Perl在命令行中返回对象

> ID：14905040
> 
> 赞同：0
> 
> 时间：2013-02-15T23:25:19.107
> 
> 标签：perl, cmd

在我的代码中，我加载数据库文件然后多次使用它们。

有没有办法在 Perl 中使用命令行返回一个对象，然后在另一个命令中重用它？

例如：

```
perl -Mpckg -e '$v = pckg::foo();'
perl -Mpckg2 -e 'pckg2::foo(&v);' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:34:36.957

这是行不通的。有几个原因。一个是当您启动第二个 perl 进程时，您的第一个 perl 进程就消失了。顺便说一句，您不能以这种方式使用引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T23:52:26.427

不，一个进程无法访问另一个进程的内存，尤其是一个甚至不再运行的进程，更不用说安全地使用它的变量了。

您可能正在寻找制作第一个脚本的服务器。它不会退出，而是继续运行并接受命令（例如，通过其父进程的 STDIN，或通过任何进程的套接字），它将使用它在第一次启动时构造的对象解析和执行这些命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T00:11:40.113

您可以这样做，但您必须使用临时文件来保存对象。

`perl -MStorable -Mpckg -e '$v=pckg::foo(); Storable::store(\$v,file)'`

你的对象 $v 将被写入文件之后你必须运行它：

`perl -MStorable -Mpckg2 -e '$v = Storable::retrieve(file); unlink file; pckg2::foo($v)`

因此，您可以将定义的对象提供给 pckg2::foo() 函数，之后您的临时文件将被删除。就这样。

# ruby-on-rails - 未定义的方法“options_for_select”

> ID：14905047
> 
> 赞同：0
> 
> 时间：2013-02-15T23:26:00.080
> 
> 标签：ruby-on-rails, ruby, helpers

我在哪里定义多个控制器使用的辅助方法时遇到了一些麻烦。

我将此方法提取到它自己的模块中：

```
module ColumnMapHelper
  def drop_down_upload_file_types
    options = [["Use the RoyaltyZone Sales Upload Template", "RZ"], ["Use my own data file (Quickbooks, iTunes, etc)", "Create New"]]
    ...
    select_tag "file_upload_type", options_for_select(options, default), :id=>"upload_file_type_selection"
  end
end 
```

我将它包含在控制器中并将其作为辅助方法公开：

```
class SalesDataController < ApplicationController
  before_filter :login_required, :except => [:download]

  include ColumnMapHelper
  helper_method :drop_down_upload_file_types 
```

当它在我的控制器的帮助程序（app/helpers/sales_data_helper.rb）中定义时很好，但是现在当我在视图中调用我的帮助程序方法时出现此错误：

```
undefined method `options_for_select' for #<SalesDataController:0x109bbbd18> 
```

我需要包含一些模块吗？分享这样的助手的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:00:06.993

如果您只在视图中使用助手，那么您不需要做任何事情，因为 app/helpers 中的所有内容都默认包含在内。

当您拥有要与视图共享的 current_user 之类的方法时，您希望在控制器中使用 helper_method。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:58:26.840

这`options_for_select`是一个视图方法，它在控制器中不可用。但是，没有理由在控制器中使用它。

如果您将文件保存在`ColumnMapHelper`文件`/app/helpers`夹中，`drop_down_upload_file_types`您的所有视图都会自动使用该文件（只要您的应用程序默认包含所有帮助程序）。

# .htaccess - 将 301 从 /store 重定向到 /

> ID：14905048
> 
> 赞同：0
> 
> 时间：2013-02-15T23:26:08.573
> 
> 标签：.htaccess, redirect

我的商店曾经被命名为 domain.com/store 但现在它只是 domain.com

但是由于这个原因，我所有的谷歌链接现在都死了，我该如何解决这个问题？我可以重写一些方法，以便将所有旧的 domain.com/store/category/item.html 重定向到 domain.com/category/item.html 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:51:21.640

重定向 301 /store/ [http://www.domain.com/](http://www.domain.com/)

将此添加到我的 .htaccess 解决了我的问题

# android - Google Maps Android API v2 是免费的吗？

> ID：14905051
> 
> 赞同：10
> 
> 时间：2013-02-15T23:26:28.237
> 
> 标签：android, google-maps-android-api-2

我的控制台上的 Google Maps Android API v2 没有礼节限制，它是免费服务吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T23:29:51.870

在常见问题解答中指出：

Maps API 有哪些使用限制？

“使用 Google Maps API 的网站和应用程序每天可为每项服务免费生成多达 25,000 个地图加载。

如果您的应用程序超出这些使用限制，您必须通过以下方式之一做出响应，才能继续在您的应用程序中使用 Maps API：

修改您的 Maps API 应用程序，使每天生成的地图加载次数低于您的应用程序使用的每项服务的使用限制；在 Google API 控制台中注册对超额地图加载的自动计费；或购买 Maps API for Business 许可证

为了适应使用量出现短期峰值的站点，只有在指定站点连续超过 90 天超过限制时，使用限制才会对给定站点生效。

被视为符合公共利益（由 Google 自行决定）的非营利组织和应用程序不受这些使用限制的约束。例如，救灾地图不受使用限制的约束，即使它是由商业实体开发和/或托管的。此外，我们建议符合条件的非营利组织通过 Google Earth Outreach Grants 计划申请 Maps API for Business 许可证，该计划提供了许多好处。

此处提供了构成“地图加载”的精确定义。可以在此处找到有关定价的详细信息。”

[https://developers.google.com/maps/faq#usagelimits](https://developers.google.com/maps/faq#usagelimits)

# php - Symfony2 安装在子目录中

> ID：14905062
> 
> 赞同：0
> 
> 时间：2013-02-15T23:27:35.153
> 
> 标签：php, .htaccess, symfony

我知道以前有人问过这个问题，但由于某种原因，它对我不起作用。

我正在尝试将 symfony2 安装在子文件夹中（IE：[http](http://www.mydomain.com/myapp) ://www.mydomain.com/myapp ），但是，我遇到了几个问题：

看起来我必须修改我的所有路由以指向这个子路径，即：

```
fos_user_group:
    resource: "@FOSUserBundle/Resources/config/routing/group.xml"
    prefix: /myapp/group 
```

..确实可以完成路由工作。

但是，无论如何，即使在 symfony 文档中，它指出资产将确定正确的路径（[http://symfony.com/doc/current/book/templating.html#linking-to-assets](http://symfony.com/doc/current/book/templating.html#linking-to-assets)），它是仍在尝试从根域 IE 中查找资产：

```
http://www.mydomain.com/bundles/acmedemobundle/js/script.js 
```

我基本上在谷歌上查看了相关问题的每个链接，我试过了`RewriteBase /myapp`，`RewriteBase /myapp/web`但都无济于事。

有谁可以帮我离开这里吗？这似乎很疯狂，很难将我的 URL 和资产正确路由到子文件夹。为了可移植性（即使资产问题以某种方式解决），难道不应该有办法在不修改我所有路线的情况下做到这一点吗？

附带说明一下，我还没有尝试在 unix 服务器上尝试这个。目前所有测试都在 wampserver 上进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T23:34:18.353

我不知道这是否仍然是您的问题，但它可能对其他人有所帮助。我相信你应该改变你的 config.yml 或 config_dev.yml （取决于环境）

对于资产设置这个（参见“模板”部分）：

```
framework:
router:
    resource: "%kernel.root_dir%/config/routing_dev.yml"
    strict_requirements: true
profiler: { only_exceptions: false }
#set default asset root
templating:
    assets_base_urls: 
        http: [ /path/to/web ]
        ssl:  [ /path/to/web ] 
```

其中 /path/to/web 是 bundle 文件夹的父文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:16:00.287

您可以在路由器对象中设置基本 url，也许这会解决您的问题？

```
$this->getContainer()->get('router')->getContext()->setBaseUrl('/myapp'); 
```

如果这样做，则不必在所有路由前加上子目录的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T16:04:22.703

我在本地环境中对此的解决方案是在`app/config/config.yml`

```
framework:
    templating:
        assets_base_urls:
            http: "http://localhost/symfony_folder/"
            ssl: "http://localhost/symfony_folder/" 
```

# java - 范围问题

> ID：14905065
> 
> 赞同：1
> 
> 时间：2013-02-15T23:28:01.813
> 
> 标签：java, scope

我不知道我的代码有什么问题，它不会编译，因为编译器找不到变量 k。

我的代码：

```
public class t
{
    public static void main(String args[])
    {
        int r = 10;
        int c = 10;

        char[][] map = new char[r][c];

        for(int i = 1; i < (r - 1); i++)
        {
            for(int k = 1; k < (c - 1); k++);
            {
                map[i][k] = '$';
            }
        }
    }
} 
```

它给我的错误：

```
 symbol:   variable k
  location: class t
  1 error 
```

我一直认为这是一个范围问题，但是`variable k`在嵌套的 for 循环内，所以应该没问题吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:29:21.673

您的“k” for 循环末尾有一个分号；去掉它。改变

```
for(int k = 1; k < (c - 1); k++);
{
    map[i][k] = '$';
} 
```

到

```
for(int k = 1; k < (c - 1); k++)
{
    map[i][k] = '$';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T23:30:49.490

您的代码中有一个小错误：

```
for(int k = 1; k < (c - 1); k++); 
```

最后不应该有分号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T23:31:17.777

在第二个循环结束时使用分号，将其删除，这将有助于您的事业

```
for(int k = 1; k < (c - 1); k++);
                                ^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T23:29:22.743

这是因为在下一行的末尾有额外的分号......

```
for(int k = 1; k < (c - 1); k++) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T23:29:26.043

```
for(int k = 1; k < (c - 1); k++); 
```

放下`;`

* * *

# ***阐述：***

`;`实际上是一个在 Java 中有效的空语句：

```
Foo f = new Foo();
;
f.doSomething(); 
```

在 Java 中，您可以使用不带花括号的控制语句`{` `}`，例如：

```
if(booleanFlag) doSomething();
else doSomethingElse();

// ...

for(String s : stringArray) System.out.println(s); 
```

这就是您在代码中使用的内容：

```
for(int k = 1; k < (c - 1); k++); // iterate on the empty statement 
```

然后，您打开了一个与 for 循环无关的新代码块：

```
{
    map[i][k] = '$';
} 
```

只执行一次。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T23:29:30.583

`for loop`您在初始化的末尾有一个分号`k`- 删除它，您应该没问题！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-15T23:30:05.047

`for`在第二个循环之后删除分号。

分号是合法的语句，称为空语句；这意味着“什么都不做”。

# java - JApplet：不能在静态上下文错误中引用非静态方法

> ID：14905072
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:28:51.380
> 
> 标签：java, netbeans, static, applet

人们经常询问这个错误，但我无法找到对我正在处理的代码有帮助的答案。我想这与有一个实例或什么有关？

我希望用户能够在 GUI (GridJApplet) 中输入一个数字，并在单击“Go”时将该数字传递给 JPanel (GridPanel) 以将网格重绘到该宽度和高度。

我尝试在 GridJApplet 中创建 getter 和 setter，但随后无法在我的其他类中使用 getter，它给了我错误“无法在静态上下文中引用非静态方法 getGridSize()”。我在 NetBeans 工作，还没有完成这段代码。我真的不明白如何让用户输入在另一个班级工作。

这是 GridJApplet 中的代码

```
public void setGridSize() {
size = (int) Double.parseDouble(gridSize.getText());
    }

public int getGridSize() {
return this.size;
   } 
```

这是来自 GridPanel 的代码

```
public void executeUserCommands(String command) {
    if (command.equals("reset")) {
        reset();
    } else if (command.equals("gridResize")) {
                NUMBER_ROWS = GridJApplet.getGridSize(); //error occurs here
            }

    repaint(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:31:20.863

这不是静态方法；您需要一个实例`GridJApplet`才能调用实例方法。

或者让它成为一个静态方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:32:02.190

您正在调用 GridJApplet 类的 getGridSize() 方法，而不是该类的实例。getGridSize() 方法未定义为静态方法。因此，您需要在实际的 GridJApplet 实例上调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:34:43.883

爪哇 101：

不要这样做：

```
public void executeUserCommands(String command) {
    if (command.equals("reset")) {
        reset();
    } 
    else if (command.equals("gridResize")) {
                      // WRONG
        NUMBER_ROWS = GridJApplet.getGridSize(); //error occurs here
    } 
```

反而：

```
 else if (command.equals("gridResize")) {
        // You must specify an *instance* of your class (not the class name itself)
        NUMBER_ROWS = myGridJApplet.getGridSize();
    } 
```

# node.js - node.js - 坚持做简单的网络聊天

> ID：14905079
> 
> 赞同：2
> 
> 时间：2013-02-15T23:29:40.863
> 
> 标签：node.js

听起来可能很奇怪，但我正在尝试进行非常简单的网络聊天，我需要帮助..

我用节点做到了这一点 -

```
var http = require('http');
var fs = require('fs');
var path = require('path');

var messages = [];

// Simple Function to load HTML/JavaScript/CSS Files
function LoadHTML(html, requrl, res) {
    var filePath = '.' + requrl;
    if (filePath == './') {
        filePath = './' + html;
    }

    var extname = path.extname(filePath);
    var contentType = 'text/html';
    switch (extname) {
        case '.js':
            contentType = 'text/javascript';
        break;
        case '.css':
            contentType = 'text/css';
        break;
    }

    fs.exists(filePath, function(exists) {

        if (exists) {
            fs.readFile(filePath, function(error, content) {
                if (error) {
                    res.writeHead(500);
                    res.end();
                }
                else {
                    res.writeHead(200, { 'Content-Type': contentType });
                    res.end(content, 'utf-8');
                }
            });
        }
        else {
            res.writeHead(404);
            res.end();
        }
    });  
}

http.createServer(function (req, res) {
    LoadHTML('index.html', req.url, res);
}).listen(8125); 
```

我正在使用的 HTML/CSS - [http://jsfiddle.net/yZ5at/](http://jsfiddle.net/yZ5at/)

从这里我被卡住了.. 我希望当用户在文本区域中输入内容并按回车时，他的文本将显示在聊天 div 中。

但我该怎么做呢？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:11:35.610

好吧，您没有对您的请求做任何事情，所以下一步可能是检查 socket.io 或为 ajax 调用制作一些客户端脚本，以将 textarea 中的文本传递给服务器并检索新消息。无论如何，简单的 loadHTMl 函数是不够的

# java - 我如何在java中递归地重新排列字符串

> ID：14905084
> 
> 赞同：2
> 
> 时间：2013-02-15T23:30:04.540
> 
> 标签：java, string, recursion

我正在尝试从单行字符串重新排列字符串的内容

> (file).DS_Store(~file)(folder)server(file).DS_Store(~file)(folder)test1(~folder)(folder)test2(~folder)(folder)test3(file).DS_Store(~file )(文件夹)test4(文件).DS_Store(~文件)(文件夹)test5(文件).DS_Store(~文件)(文件)item.txt(~文件)(~文件夹)(~文件夹)(~文件夹)( 〜文件夹）（文件）text.txt（〜文件）

到一个多行字符串，如

```
(file).DS_Store(~file)
(folder)client
    (folder)test6(~folder)
    (folder)test7
        (folder)test9
            (folder)test10
                (file)itemClient(~file)
            (~folder)
        (~folder)
    (~folder)
    (folder)test8(~folder)
(~folder)
(file)test.txt(~file)
(file)text.txt(~file) 
```

我知道递归会对我有所帮助，但是当我尝试编写递归函数时，它只检查第一个分隔符并停止，而不检查字符串的其余部分。这是我正在使用的代码。

```
public String getFileStructure(String list, int level){
    String str = list;
    String ret = "";
    String fileStart = "(file)";
    String fileEnd = "(~file)";
    String folderStart = "(folder)";
    String folderEnd = "(~folder)";

    if (!list.isEmpty()) {
         for (int i = 0; i < level; i++) {
                ret+="\t";
            }
            if (str.startsWith(folderStart)) {
                ret+= "[" + str.substring(str.indexOf(folderStart)+8, str.indexOf(folderEnd)) + "]\n";
                getFileStructure(str, level + 1);
            } else {
                ret+= str.substring(str.indexOf(fileStart)+6, str.indexOf(fileEnd));
            }
    }
    return ret;
} 
```

但它只是返回

```
.DS_Store
.DS_Store 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:35:11.260

您没有使用 getFileStructure 的返回值：

ret += getFileStructure(...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:40:27.670

编辑 ：

我原来的答案是完全错误的。

经过进一步考虑，我认为在这种情况下递归不是一个好主意。为了使递归起作用，无论何时遇到文件夹开头，您都必须找到匹配的文件夹结尾，然后以文件夹的内容作为输入递归调用该函数。但是，为了找到哪个 (~folder) 标记了当前文件夹的结尾，您必须扫描文件夹的所有内容。在执行此操作时，您已经可以为文件夹的竞争构造输出，因此递归调用没有意义。

例如，假设你有结构 (folder)A(file)a(~file)(folder)B(file)b(~file)(~folder)(folder)C(~folder) **(~folder)** (folder )D(~文件夹)。我用粗体标记了文件夹 A 的结尾。为了找到它，您必须维护一个计数器。每次找到（文件夹）字符串时，您都会增加计数器，每次找到（〜文件夹）字符串时都会减少它。只有当计数器恢复到启动文件夹 A 之前的值时，您才到达该文件夹的末尾。在遍历字符串时，您可以打印文件夹 A 的所有内容，使用计数器来决定缩进需要多少个制表符。

# php - 愚蠢的mysql_fetch_assoc（）：错误

> ID：14905088
> 
> 赞同：0
> 
> 时间：2013-02-15T23:30:31.247
> 
> 标签：php, html, mysql

抱歉，我是一个新手，正在制作一个填充一系列 div 的简单页面。如果我所缺少的是基本的，我深表歉意-

我得到一个

> 警告：mysql_fetch_assoc()：提供的参数不是第 56 行的有效 MySQL 结果资源

第 56 行开始：

```
<?php
$result = mysql_query('SELECT * FROM `all_products`;'); 
while($row = mysql_fetch_assoc($result)){
echo '<div class="product">';
echo '<img src="images/product-\'.$row[\'id\'].\'s.jpg" onclick="JavaScript:newPopup(\'images/product-\'.$row[\'id\'].\'.jpg\');">';
echo '<span class="tiger" data-name="show" data-price="show" data-text="Buy Now">\'.$row[\'id\'].\'</span>\'.$row[\'description\'].\'</div>';
}
?> 
```

任何建议都非常感谢它已经几个小时了哈哈。

-AR

更新 - -

新代码：

```
<?php 
$link = mysqli_connect('ip', 'usr', 'pass');

if (!$link) {
die('Connect Error (' . mysqli_connect_errno() . ') '
        . mysqli_connect_error());
}
mysqli_select_db($link, "db");
?>

<?php
$result = mysqli_query($link, "SELECT * FROM `all_products`") or die(mysql_error());
while($row = mysqli_fetch_assoc($result)){
echo '<div class="product">';
echo '<img src="images/product-\'.$row[\'id\'].\'s.jpg" onclick="JavaScript:newPopup(\'images/product-\'.$row[\'id\'].\'.jpg\');">';
echo '<span class="tiger" data-name="show" data-price="show" data-text="Buy Now">\'.$row[\'id\'].\'</span>\'.$row[\'description\'].\'</div>';
}
?> 
```

我现在已更改为 sqli，我确实得到了多个 div，每行一个，但每个 div 内部是消息

> 警告：mysql_num_rows()：提供的参数不是 /classes/class.product.php 第 16 行的有效 MySQL 结果资源 Invalid Product'.$row['description']。'

更新-

希望一些背景知识会有所帮助-此代码：

```
<div class="product">
<img src="images/product-1s.jpg" onclick="JavaScript:newPopup('images/product-1.jpg');">
<span class="tiger" data-name="show" data-price="show" data-text="Buy Now">
1</span>Lorem Ipsum Dolar</div> 
```

一切都完美地工作，类已经编码，主要使用 mysql_ 。

我想要做的就是将 id# 和 desc 粘贴到表中的每一行。我想它不能像我想的那样简单。我可以手动写出所有这些并让一切正常工作，但显然这并不理想。

有没有另一种方法可以让我在已经发生的事情之外执行这个？

这个功能：

```
class Product{
var $error = '';
var $msg = '';
public function all(){
$result = mysql_query("SELECT * FROM  " . PFX . "products WHERE active = 1");
$products = array();
while($rows = mysql_fetch_assoc($result)){
    $products[]=$rows;
    }
return $products;
} 
```

已经完成，我可以调用它来填充我需要的数据库中的变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:32:46.440

最简单的方法是检查是否`$result`是`false`，请参阅[`mysql_query`](http://www.php.net/manual/en/function.mysql-query.php)

> **返回值**
> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 在成功时返回资源，**在错误时返回 FALSE**。

或使用`or die(...)`

```
$result = mysql_query('SELECT * FROM `all_products`') or die(mysql_error()); 
```

您应该考虑切换到`mysqli`or `PDO`，因为`mysql_*`不推荐使用函数。

**更新**您的更新：

这不适合在一起。

*   您`mysql_num_rows()`在修改后的代码中没有。
*   不要`mysql_*`与`mysqli_*`.
*   最后，变量没有在单引号内替换`'`，所以我看不出这个错误消息来自哪里。

**更新2**：

由于此方法不使用任何对象成员，因此可以将其定义为静态成员函数

```
public static function all(){
    $result = mysql_query("SELECT * FROM  " . PFX . "products WHERE active = 1");
    $products = array();
    while($rows = mysql_fetch_assoc($result)){
        $products[]=$rows;
    }
    return $products;
} 
```

然后将其称为

```
$products = Product::all(); 
```

# xpages - 如何将数据源设置为notes文档

> ID：14905094
> 
> 赞同：0
> 
> 时间：2013-02-15T23:31:04.887
> 
> 标签：xpages

我有一个执行 dblookup 以获取 notesDocument 的按钮。我想将数据源设置为该文档，以便可以在我的 xpage 的其他地方使用它。

例如，我有三个不同的按钮作用于同一个文档。我不想在每个按钮中查找该文档。

我尝试将数据源 docUNID 设置为在执行 dblookup 的第一个按钮中更新的范围变量，然后刷新 xPage，但这似乎并没有更新数据源。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:52:43.507

make sure your dblookup return a docunid and add your dblookup to the documentUniqueID property in the docment data source to the xpages and then use the data source variable to save or update values

There is a keyword on dblookup for getting the unid or you can return a column containing the unid

something like this

```
<xp:panel>
    <xp:this.data>
        <xp:dominoDocument var="doc" action="openDocument"
            documentId="#{javascript:@DbLookup(...)}">
        </xp:dominoDocument>
    </xp:this.data>
    <xp:button value="Label" id="button1">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.action><![CDATA[#{javascript:doc.save()}]]></xp:this.action>
        </xp:eventHandler></xp:button>
    <xp:button value="Label" id="button2">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.action><![CDATA[#{javascript:doc.save()}]]></xp:this.action>
        </xp:eventHandler></xp:button>
    <xp:button value="Label" id="button3">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.action><![CDATA[#{javascript:doc.save()}]]></xp:this.action>
        </xp:eventHandler></xp:button> 
```

# php - 重定向 .htaccess 文件中的绝对路径

> ID：14905103
> 
> 赞同：3
> 
> 时间：2013-02-15T23:32:23.030
> 
> 标签：php, .htaccess, redirect

我有这个网站，以前页面的 URL 类似于：

*   [http://www.thesite.com/page1](http://www.thesite.com/page1)
*   [http://www.thesite.com/page2](http://www.thesite.com/page2)
*   [http://www.thesite.com/page3](http://www.thesite.com/page3)

请注意，这些 URL 中的任何一个都没有扩展名，即使它们是 .php 文件。这是一个位于域根目录中的 Wordpress 站点。wordpress-site 现在已被移动到一个文件夹中，但我想设置从所有以前的 URL 到新 URL 的重定向（出于 SEO 原因）。

到目前为止，我找到了一个远非完美的临时解决方案。我所做的是将它放在 .htaccess 文件中（以删除 PHP 扩展）：

```
 # Turn on the rewrite engine
  RewriteEngine  on
  # If the request doesn't end in .php (Case insensitive) continue processing rules
  RewriteCond %{REQUEST_URI} !\.php$ [NC]
  # If the request doesn't end in a slash continue processing the rules
  RewriteCond %{REQUEST_URI} [^/]$
  # Rewrite the request with a .php extension. L means this is the 'Last' rule
  RewriteRule ^(.*)$ $1.php [L] 
```

然后我创建了与以前的 URL 相同的不同文件（使用 .php 扩展名，然后由于我的 .htaccess 文件而被删除）。在每个文件的顶部，我插入了一个

```
 <?php header('Location: THE_NEW_URL'); ?> 
```

它有效，但它像贝蒂一样丑陋！最近，由于这个临时的、愚蠢的解决我的问题，我遇到了一个错误。我试图在文件夹的根目录中设置一个新页面（称为 test.php）。这个 test.php 文件有一个样式表，它链接到以下方式（非常标准，我假设）：

```
 <link href="css/style.css" rel="stylesheet" type="text/css" /> 
```

但是 test.php 文件找不到这个样式表（是的，我确定我上传正确）。如果我转到源文件并单击它，那么我可以看到它试图访问

```
 css/style.css.php 
```

您不必是爱因斯坦就知道，这是我在狼群中提出的 .htaccess 文件。但是我该怎么办？有没有办法制作我的 .htaccess 文件，所以我可以按照以下方式做一些事情：

```
 Redirect from SPECIFIC_URL to A_NEW_SPECIFIC_URL 
```

它不会搞砸我域上的所有 URL。我喜欢在我的文件上有扩展名。我只需要修复这 15 个现在已被移动的旧 URL（没有扩展名）。

我对 .htaccess-files 很烂，在任何地方都找不到任何教程。糟透了！我不知道如何变得更好。我一直在实施我不理解的解决方案！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:44:39.673

我相信这将满足您的需求：

```
 <IfModule mod_rewrite.c>
      # enable URI rewrite 
      RewriteEngine on
      # set virtual root
      RewriteBase /
      # if request is for an actual file or directory on disk,
      # then do not continue with rewrite engine
      RewriteCond %{REQUEST_FILENAME} !-d
      RewriteCond %{REQUEST_FILENAME} !-f
      # setup rewrite table
      RewriteRule ^page1$ page1.php [R=302,L]
      RewriteRule ^page2$ page2.php [R=302,L]
      RewriteRule ^page3$ page3.php [R=302,L]
    </IfModule> 
```

只需在现有条件的上方添加这两条 RewriteCond 行，您可能会发现成功：

```
 RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:45:02.857

如果只有 15 个旧文件，一个简单的解决方案可能是硬编码这 15 个文件

```
RewriteEngine on
RewriteRule ^/?oldfile1$ /new1/path1/file1.php [R,L]
RewriteRule ^/?oldfile2$ /new2/path2/file2.php [R,L]
RewriteRule ^/?oldfile3$ /new3/path3/file3.php [R,L]
... 
```

# visual-c++ - 托管线程可以调用调用boost asio async_write的C++方法吗

> ID：14905104
> 
> 赞同：0
> 
> 时间：2013-02-15T23:32:43.393
> 
> 标签：visual-c++, pinvoke, boost-asio, multithreading

我正在用 C# 编写一个客户端，它与使用 boost asio 异步调用的 Windows C++ DLL 进行通信。我之前读过，ASIO 在托管环境中不能很好地工作。VC++ DLL 是一个非托管项目，它为 I/O 处理程序创建一个非托管线程。C# 代码创建一个后台线程来处理通过 pinvoke 向 C++ DLL 发送消息。我的问题是-对 boost::asio::async_write 方法的调用可以在托管线程上吗？或者，它必须在非托管线程上吗？

如果我可以在托管线程上调用 async_write，这将有助于简化逻辑和处理。但是，我担心当 .NET 垃圾收集器运行并停止线程时会发生什么。我不知道 ASIO 是否能够处理这个问题。我没有传递任何指向 C# 代码中定义的数据的指针，所以这应该不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T00:40:51.703

“托管线程”的概念很弱，操作系统只支持一种线程。运行托管代码的线程并不特殊，托管代码被转换为 C 编译器生成的完全相同的机器代码。唯一的区别是 CLR 知道线程并且有理由在垃圾回收发生时查看它的堆栈。需要查找可能包含对象引用的托管代码的堆栈帧。

它*不会*对属于本机代码的任何堆栈帧感兴趣，它只是忽略它们。是的，线程可能会在 GC 执行搜索时暂停，但前提是它当前正在执行托管代码。本机代码继续运行，如果 GC 正在进行，它只会在返回托管方法时阻塞。这种暂停与线程可能暂停的任何其他原因没有什么不同，包括在操作系统调度程序运行其他东西时失去处理器一段时间。

所以使用 boost::asio 很好，没有任何问题。就像托管程序可以执行本机代码的许多其他方式一样，包括操作系统调用。您需要注意的唯一细节是确保在 /clr 不生效的情况下编译您的代码。将 boost 代码编译为 IL 工作正常，只是效率不高。

# c++ - 命名空间中的 c++ 函数不起作用？

> ID：14905105
> 
> 赞同：3
> 
> 时间：2013-02-15T23:32:44.617
> 
> 标签：c++

这很奇怪，我试图找出原因，为什么`Draw`对对象的第一次调用`shape`很好，而对“文本”字段的第二次调用 Draw 仅在提供命名空间的前缀时才有效？（即`Shapes::Draw`）：

```
#include <iostream>
namespace Shapes
{
    class Shape {
        public:
            Shape() {}
            virtual void InnerDraw() const {
                std::cout << "Shape\n";
            }
    };

    class Square : public Shape {
        public:
            void InnerDraw() { std::cout << "Square\n"; }
    };

    void Draw(char* text) { std::cout << text; }

    void Draw(const Shape& shape) {
        Draw("Inner: ");
        shape.InnerDraw();
    }

    Shape operator+(const Shape& shape1,const Shape& shape2){
        return Shape();
    }
}

int main() {
    const Shapes::Square square;
    Shapes::Shape shape(square);

    Draw(shape); // No need for Shapes::
    Draw("test"); // Not working. Needs Shapes:: prefix

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:35:45.700

`Draw(shape)`编译器会在定义了 s 类型的命名空间中查看`shape`是否有一个名为 的匹配函数`Draw`。它找到它，并调用它。因为`Draw("test")`参数没有命名空间，所以无处可寻。这称为**参数依赖查找**，简称 ADL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:35:54.220

这称为[依赖于参数的查找](https://en.wikipedia.org/wiki/Argument-dependent_name_lookup)。当调用非限定函数时，编译器会查询函数的所有参数的命名空间，并将任何匹配的函数添加到重载集。因此，当您说它基于论点`Draw(shape)`找到时。但是当您说 时，参数没有命名空间，当然也不是所需的命名空间。`Shapes::Draw(const Shapes::Shape& shape)``shape``Draw("test")``"test"``Shapes::`

# javascript - 指向嵌入式的 JQuery youtube 链接不起作用

> ID：14905108
> 
> 赞同：0
> 
> 时间：2013-02-15T23:32:57.863
> 
> 标签：javascript, jquery, html

请检查：http: [//jsfiddle.net/T6Nja/](http://jsfiddle.net/T6Nja/)

我的查询：

```
$('.training').html(function(i,v){
    var id = v.split('watch?v=')[1]; // get the id so you can add to iframe
    return '<iframe width="150" height="150" src="http://www.youtube.com/embed/' + id + '" frameborder="0" allowfullscreen></iframe>';
}); 
```

}); 我的 HTML：

```
<div class="training">http://www.youtube.com/watch?v=DABphlXEyW8e</div><div class="training">http://youtu.be/DABphlXEyW8f</div> 
```

我一无所知...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:01:24.383

我认为问题在于第一个 div 中的视频 ID[看这个例子](http://jsfiddle.net/T6Nja/4/)，我将视频 ID 从更改`DABphlXEyW8e`为`DABphlXEyW8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:54:16.413

第一个确实有效（从某种意义上说，它从 div 中的 url 获取 id），因为它包含：

```
watch?v= 
```

提取此行上的 id 需要哪个：

```
var id = v.split('watch?v=')[1]; // get the id so you can add to iframe 
```

但是它在 jsfiddle 中抛出了这个错误：

```
Unsafe JavaScript attempt to access frame with URL
http://jsfiddle.net/T6Nja/ from frame with URL 
http://www.youtube.com/embed/DABphlXEyW8e.
Domains, protocols and ports must match. 
```

第二个“培训”`div`不起作用，因为它不包含：

```
watch?v= 
```

需要提取Id

您需要将 html 更新为如下所示：

```
<div class="training">http://www.youtube.com/watch?v=DABphlXEyW8e</div>

<div class="training">http://www.youtube.com/watch?v=DABphlXEyW8f</div> 
```

[Youtube 嵌入：不安全的 JavaScript 尝试访问框架](https://stackoverflow.com/questions/6346176/youtube-embed-unsafe-javascript-attempt-to-access-frame)

上面的链接将帮助您解决不安全的 JavaScript 尝试

# css - 在css中将行距更改 为其他行距方法

> ID：14905111
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:33:02.607
> 
> 标签：css, html

我现在正在编写一个 HTML5 页面，我在将格式从使用 br 用于行间距切换到行高、填充或边距（以更容易的为准）时遇到问题。一切都在表单和字段集标记内，我不希望每一行都是独立的，只是一些。我确实想要一些文本彼此相邻，因为我正在制作一个包含单选按钮和复选框的表单。但不是使用 br 标记，而是如何将其切换为 css 中的行高、填充或边距。

```
<form>
<fieldset class = "top">
Please Select a car: <br>
<input type="radio" name="car" value="truck">truck
<input type="radio" name="car" value="van">van
<input type="radio" name="car" value="suv">suv<br>
<input type="radio" name="car" value="coupe">coupe
<br>
<br>
<input type="checkbox" name="color" value="Blue">Blue
<input type="checkbox" name="color" value="red">red
<br>
<br>
<input type="checkbox" name="color" value="Orange">Orange
<input type="checkbox" name="color" value="black">Black
<br>
<br>
<input type="checkbox" name="color" value="Green">green
<input type="checkbox" name="color" value="brown">brown
<br>
<br> 
```

……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:14:09.270

尝试为每组无线电使用一个字段集，以便您可以更精确地控制它们，仅在您的组周围设置边距等。

您可以使用标签并跨越标签/输入组，以便更好地控制它们。

```
<span>
    <label for="name">Value</label>
    <input type="checkbox" name="name" value="1"/>
</span> 
```

此外，如果您使用特定于您的输入的类，则可以使其显示在块中，如下所示：

```
input.block {
    display: block;
} 
```

那么如果你把这个类块放在你的输入上，标签将留在另一行......

如需更大的图片，请参阅此小提琴：

[http://jsfiddle.net/BxwNL/1/](http://jsfiddle.net/BxwNL/1/)

**更新：根据肉桂评论的另一种解决方案**

您也可以为您的项目使用列表，但如果您根据它们的属性对它们进行分组，例如颜色列表，类型列表......

用法如下：

```
<ul>
    <li>
        <label for="name">Value</label>
        <input type="checkbox" name="name" value="1"/>
    </li>
    <li>
        <label for="name2">Value2</label>
        <input type="checkbox" name="name2" value="2"/>
    </li>
</ul> 
```

列表解决方案的小提琴示例：http: [//jsfiddle.net/BxwNL/2/](http://jsfiddle.net/BxwNL/2/)

# css - 如何将 .input-append 与 .form-inline 一起使用？

> ID：14905113
> 
> 赞同：5
> 
> 时间：2013-02-15T23:33:20.603
> 
> 标签：css, twitter-bootstrap

我是 Twitter Bootstrap 的新手，并且开始摸索它的使用方式。虽然框架的某些方面开始变得有意义，但我仍在为表单样式而苦苦挣扎。我正在尝试设置表单的几个不同部分，这些部分将具有使用`.form-inline`. 在一个这样的例子中，我也试图在`.input-append`运气不佳的情况下使用。

```
<div class="row">
    <div class="well span12">
        <div class="row">
            <div class="span12 form-inline input-append">
                <label for="assetSearch">Asset Search</label>
                <input type="search" id="assetSearch" placeholder="">
                <span class="add-on"><i class="icon-search"></i></span>
            </div>
        </div>
        <div class="row">
            <div class="span12 form-inline">
                <label for="service">Service</label>
                <input type="text" id="service" autocomplete="off" />
            </div>
        </div>
    </div>
</div> 
```

上面的标记呈现如下：

![上述标记如何呈现的屏幕截图](../Images/c87c6025fea2dbfb6ae8e9cfb39e5f78.png)

如您所见，“资产搜索”不与表单输入内联。如果我`.input-append`从包含的 div 中删除该类，则事情会排成一行。但是，搜索图标不再嵌入在文本框中，而是在文本框的右侧。

我怎样才能使用`.form-inline`与`.input-append`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:54:12.777

除了s、s 或s（这可能并不详尽）之外，您不应将`input-append`任何其他内容放入（或前置）任何内容。`input``button``.add-on`

尝试将整个东西包装成一个`div.input-append`并让`.form-inline`处理浮动：[jsfiddle上的演示](http://jsfiddle.net/Sherbrow/Hx5f7/)

```
<div class="span12 form-inline">
    <label for="assetSearch">Asset Search</label>
    <div class="input-append">
        <input type="search" id="assetSearch" placeholder="" />
        <span class="add-on"><i class="icon-search"></i></span>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:23:57.277

这是一个工作对齐的小提琴：http: [//jsfiddle.net/Jeff_Meadows/xGRtL/](http://jsfiddle.net/Jeff_Meadows/xGRtL/)

这两个修复是在 class`vertical-align`的`<label>`元素中设置元素`.input-append`，并将元素的 重置`font-size`为 14px（它在引导程序的其他地方设置为 0）。我没有创建基于 的规则`.input-append`，而是创建了一个新类，您可以将其添加到包含元素中。这样，您就不会在其他地方得到意想不到的结果。

```
.input-prepend label, .input-append label {
    vertical-align: middle;
}
.fix-text-spacing {
    font-size: 14px;
} 
```

# ruby-on-rails - 我的 application.js 无法工作，并且 application.css 不会在 Rails 中更新

> ID：14905117
> 
> 赞同：1
> 
> 时间：2013-02-15T23:34:26.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, asset-pipeline

我将我的应用程序配置为在 Heroku 上工作，但我遇到了问题。在开发模式下，当我更改 CSS 的一部分并刷新浏览器时，我的 CSS 不会加载。

我检查了日志，application.css 没有加载。我需要它每次在开发模式下加载。此外，我的 application.js 停止工作，我不知道为什么。

开发.rb：

```
 # Do not compress assets
  config.assets.compress = false
  config.assets.precompile += %w( login.css )

  # Expands the lines which load the assets
  config.assets.debug = true 
```

环境.rb：

```
 config.active_record.whitelist_attributes = true

   # Enable the asset pipeline
   config.assets.enabled = true

   # Version of your assets, change this if you want to expire all your assets
   config.assets.version = '1.0'

   config.assets.initialize_on_precompile = true 
```

我使用手动编译资产`$ rake assets:precompile RAILS_ENV=development`，除了 application.js 代码之外它可以工作：

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require jquery.reveal
$(document).ajaxStart(function() {
    $( "#load_img" ).animate({
            height:"toggle",
      opacity:"toggle"
        });
});

$(document).ajaxSuccess(function() {
    $( "#load_img" ).fadeOut('fast');
});

$(document).ready(function() {
  setTimeout(
    function() {
      $("#flash_messages").fadeOut(3000)
    }, 
    2500);
}); 
```

在部署到 Heroku 之前一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:37:41.903

您不需要`application.js`文件本身。像这样使用[require_self ：](https://github.com/sstephenson/sprockets#the-require_self-directive)

```
//= require jquery
...
//= require_self

$(function() {}); 
```

`application.js`也很确定你应该在文件本身的包含结尾和代码开头之间有一个换行符。

还有这一行：

```
config.assets.precompile += %w( login.css ) 
```

可能应该是 in`application.rb`而不仅仅是`development.rb`，尽管如果您在部署到 Heroku 之前在开发模式下手动预编译资产，这无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:53:19.080

如果你想看到开发中的变化，你不应该预编译你的 assets 。要恢复预编译，请尝试`rake assets:clean`. 此外，在清单文件中包含 js 代码也不是一种好的风格`application.js`。在其中创建一个新文件`app/assets/javascripts/`并将代码移到那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T07:35:52.893

在开发中预编译您的资产意味着您将需要*继续*预编译它们以查看您所做的任何更改。

当您预编译资产时，这将在 中创建一个静态 css 文件`public/assets`，并且您的 Web 服务器将始终提供静态资产（例如 中的那些`public/assets`），然后再在资产管道中查找新文件。

通过手动清空`public/assets`或调用`rake assets:clean`.

当您部署到 Heroku 时，它会在部署时自动为您编译资产。

# android - BitmapFactory.decodeFile 仅在手机中返回 null，而不是在模拟器中

> ID：14905118
> 
> 赞同：0
> 
> 时间：2013-02-15T23:34:32.613
> 
> 标签：android

我有这个代码的问题。我想从路径加载图像到图像视图。当使用此代码时，一切正常

```
image.setImageBitmap(BitmapFactory.decodeFile(imagePath)); 
```

但是当我使用这个时，在模拟器上是可以的，但是应用程序停止在手机中工作并让我出错，位图为空

```
Bitmap bitmap = BitmapFactory.decodeFile(imagePath); 
```

`image.setImageBitmap(bitmap);`

我需要这个代码。

```
Matrix mat = new Matrix();
mat.postRotate(90);
bitmap = BitmapFactory.decodeFile(imagePath);
bitmap_final = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), mat, true);
image.setImageBitmap(bitmap_final); 
```

再次，在模拟器中一切都很好，在电话中不是：/感谢您的帮助，抱歉英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:12:00.213

所以我解决了这个问题。这可能是内存，我使用文档[setPic](http://developer.android.com/training/camera/photobasics.html)中的方法，现在应用程序没有问题。但奇怪的是它在模拟器中没有问题。

# c# - 如何将数字格式的文本框输入存储到列表中？

> ID：14905122
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:34:43.043
> 
> 标签：c#, arrays

这是作业：

任务 1 - 编写一个 Windows 应用程序，它接受任意数量的正值，通过按钮输入。用户随时单击另一个按钮来处理所有输入的数据。结果输出应该是：

第一个输出 - 所有 n 个输入数字的总和，

第二个输出 - 在列表视图上显示两列包含以下信息 -

column1 - 输入的数字，

column2 - 每个数字对总和的贡献百分比。

到目前为止，我有这个：

```
 {
        InitializeComponent();
    }

    double number = 0, total = 0, numDisplay;
    string[] numbers;

    private void button1_Click(object sender, EventArgs e)
    {
        {

        }
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void button2_Click(object sender, EventArgs e)
    {
        number = double.Parse(textBox1.Text);
        if (number > 0)
        {
            total += number;
            textBox1.Text = number.ToString();
            numDisplay = double.Parse(textBox1.Text);
            textBox1.Clear();
        }
    }

    private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (Char.IsDigit(e.KeyChar) || Char.IsControl(e.KeyChar)) { }
        else if (e.KeyChar == '.' && textBox1.Text.IndexOf(".") == -1) { }
        else
        {
            e.Handled = true;
        }
    }

    private void listView1_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        label1.Text = "sum: " + total.ToString();
    }
} 
```

基本上，我唯一需要完成的就是制作最后两列.. soo..

考虑到我对这个程序完全陌生......我如何获取输入到文本框中的数字并存储它们，但是当你按下按钮时将它们显示在列表视图上？我想存储任何数量......这意味着列表将被循环。

因此，例如，如果我将 1、2、3、4、5 作为输入，我希望它在我的列表视图的第一列中显示为 1-5 沿着我的第一列向下，对于我的第二列，我想要数字占总和的百分比，因此在这种情况下，1-5、1/15 (1+2+3+4+5=15)、2/15、3/15、4/15、5/15 一直都是100

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:38:40.773

**更新：**

问题不是很清楚。感谢@ChristofferLette 先生，我意识到，如果我们想输入一个数字，`15 21 12 24 and etc`但 OP`TextBox`有一个只允许输入*数字*的功能。

这将是解决方案和建议，`TextBox`我们是否应该允许*`,`*和*退格*以及*所有数字*的功能，提示是，我们需要将数字分开，这样我们才能得到*二、三或四等*。数字号码并应用[`.RegEx Class`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx).

```
 private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsControl(e.KeyChar)
                && !char.IsDigit(e.KeyChar)
                && e.KeyChar != ',')
            e.Handled = true;
    } 
```

然后，

```
 private void button1_Click(object sender, EventArgs e)
    {
        listView1.Items.Clear();
        var text = Regex.Split(textBox1.Text, @"\D+");
        var t = text.Select(c => decimal.Parse(c)).Sum(); //<--Get all the total
        foreach (var i in text)
        {
            ListViewItem item = new ListViewItem();
            item.Text = i;
            item.SubItems.Add(((decimal.Parse(i) / t) * 100).ToString());
            listView1.Items.Add(item);
        }

        //decimal total = listView1.Items.Cast<ListViewItem>()
        //                         .Select(c => decimal.Parse(c.SubItems[1].Text))
        //                         .Sum();

        //ListViewItem item2 = new ListViewItem();
        //item2.Text = "Total:";
        //item2.SubItems.Add(total.ToString("#,#0.00"));
        //listView1.Items.Add(item2);
    } 
```

# javascript - 使用 AJAX / jQuery 锚定标签

> ID：14905123
> 
> 赞同：1
> 
> 时间：2013-02-15T23:34:44.527
> 
> 标签：javascript, jquery, ajax, anchor, hyperlink

我正在寻找一种方法来使用图像作为我的网络应用程序中新页面的链接。

我正在使用数据文件锚标记将用户保留在 Web 应用程序中。

```
<a data-file="salt.html?v=1"><img src="assets/images/template/salt.jpg" width="125" height="125" /> </a> 
```

这些标签在里面：

```
<div class="products_content"> 
```

我的代码如下所示：

```
$('.products_content a').on('click', function(){  
    $('.products_content a').removeClass('selected');
    $(this).addClass('selected');
    changePage( $(this).attr('data-file') );
}); 
```

有任何想法吗？我不知道为什么它不起作用。我为我的导航设置了类似的设置，并且效果很好。我的导航设置如下：

```
<nav>
    <a data-file="home.html?v=1">Home</a>
    <a data-file="about.html?v=1">About Us</a>
    <a data-file="services.html?v=1">Services</a>
    <a data-file="products.html?v=1">Products</a>
</nav> 
```

和：

```
$('nav a').on('click', function(){
    $('nav a').removeClass('selected');
    $(this).addClass('selected');
    changePage( $(this).attr('data-file') );
});

$('nav a:nth-child(1)').trigger('click'); 
```

任何帮助将不胜感激。我在我的头上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:50:20.590

[在jsFiddle](http://jsfiddle.net/nuq4x/1/)为我工作。控制台中是否显示任何错误？您的选择器是否从`anchor`s 开始？点击事件甚至被触发了吗？该`changePage()`方法是否包含在该页面中的某个地方？

# c - 使用 C 将文件的前半部分替换为后半部分并截断？

> ID：14905126
> 
> 赞同：2
> 
> 时间：2013-02-15T23:35:27.613
> 
> 标签：c, file

所以我有一个大文件，一旦达到一定大小，我想完全删除前半部分并将后半部分向下移动，有效地将其缩小一半。这是我的想法：

```
FILE *fp, *start;
int ch, block_length, filesize;
char c;

//open the file and initialize pointers
fp = fopen(FILEPATH, "rb+");
start = fp;
rewind(start);

//Check the size of the file
fseek(fp, 0, SEEK_END);
filesize = ftell(fp);    

if(filesize >= LOG_MAX_FILE_SIZE)
{
  //Go to middle of file
  fseek(fp, (-1) * LOG_MAX_FILE_SIZE/2, SEEK_END);

  //Go forwards until you get a new line character to avoid cutting a line in half
  for(;;)
  {
     //Read char
     fread(&ch, 1, 1, fp);

     //Advance pointer
     fseek(fp, 1, SEEK_CUR);

     if( (char)ch == '\n' || ch == EOF)
        break;
  }

  //fp is now after newline char roughly in middle of file

  //Loop over bytes and put them at start of file until EOF
  for(;;)
  {
     //Read char
     fread(&ch, 1, 1, fp);

     //Advance pointer
     fseek(fp, 1, SEEK_CUR);

     if(ch != EOF)
     {
        c = (char)ch;
        fwrite(&c,1,1,start);
        fflush(start);

        //Advance start
        fseek(start, 1, SEEK_CUR);
     }

     else
        break;
  }

  //Calculate length of this new file
  block_length = ftell(start);

  //Go back to start
  rewind(start);

  //Truncate file to block length
  ftruncate(fileno(start), block_length);

} 
```

但是，这似乎在做一些非常非常奇怪的事情（用'f'填充文件，混合行和其中的一些字符等）。有没有人知道我在这段代码中可能做错了什么？预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:45:59.737

我认为部分问题是您`fseek`在阅读时使用。对 fread 和 fwrite 的调用使文件指针前进。如果您调用 fseek，它将跳过下一个字符。

在下面的代码序列中，`fread`调用将读取一个字符并将当前偏移量推进到下一个字符。随后的`fseek`然后跳过该字符并移动到下一个。所以它会读取每个第二个字符。

```
fread(&ch, 1, 1, fp);
fseek(fp, 1, SEEK_CUR); 
```

write 调用也存在同样的问题（它不需要后续的查找）。此外，由于对 OP 的编辑显示 start 和 fp 是相同的值，因此逻辑将不正确（您需要单独的文件指针才能使用该逻辑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:49:09.933

找到开始位置后，您可以大块复制文件（例如一次 64 KB），从尾部读取，然后跳向开始并写入，然后再跳回尾部......

这`ftruncate()`是释放空间的最后一步。

考虑让读取文件流和写入文件流指向同一个文件是否更容易。减少对单个流的搜索（代码更简单）。这是我可能会做的。

# vb.net - DotNetBar SuperDataGrid 中的 ComboBox 渲染

> ID：14905127
> 
> 赞同：0
> 
> 时间：2013-02-15T23:35:27.377
> 
> 标签：vb.net, datagrid, combobox, render, dotnetbar

我想将 DotNetBar SuperDataGrid Controll 中的一列呈现为一个组合框（更准确地说是一个`GridComboBoxExEditControl`）。`SuperDataGrid`连接到绑定源。在`DataBindingComplete`事件中，我有以下内容：

```
Private Sub SuperGrid_DataBindingComplete(ByVal sender As Object, ByVal e As DevComponents.DotNetBar.SuperGrid.GridDataBindingCompleteEventArgs) Handles SuperGrid.DataBindingComplete
    Dim panel As DevComponents.DotNetBar.SuperGrid.GridPanel
    panel = e.GridPanel

    panel.Columns("ArticleID").RenderType = GetType(MyComboBox)
    panel.Columns("ArticleID").RenderParams = New Object() {ArticleBindingSource, "Article", "Article"}

End Sub 
```

MyComboBox 类如下：

```
Public Class MyComboBox
Inherits GridComboBoxExEditControl
Public Sub New(ByVal Bind As BindingSource, ByVal disp As String, ByVal val As String)
    DataSource = Bind
    DisplayMember = disp
    ValueMember = val
End Sub
End Class 
```

这将导致以下结果： SuperDataGrid 在单元格中显示正确的值。如果呈现为“Article”，绑定是正确的，并且“ArticleID”的每个值。问题是当值从`ArticleID = 1 to ArticleID = 2` (Article = "Article No1" 到 Article = "Artcle No2") 时，SuperDataGrid 会进入某种形式的无限循环，并且值开始在 1 和 2 之间移动。我做错了什么吗？如果有人能就这个问题提供一些建议，我将不胜感激。PS我也试过这个：

```
panel.Columns("ArticleID").EditorType = GetType(GridComboBoxExEditControl)
Dim art As GridComboBoxExEditControl = DirectCast(panel.Columns("ArticleID").EditControl, GridComboBoxExEditControl)
        art.DataSource = ArticleBindingSource
        art.DisplayMember = "Article"
art.ValueMember = "ArticleID" 
```

得到了同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:18:49.493

{ArticleBindingSource, "Article", "ArticleID"} 我认为 DisplayMember 和 ValueMember 的值相同时不正确

# embedded - 关于微控制器编程开发工具的入门问题

> ID：14905132
> 
> 赞同：2
> 
> 时间：2013-02-15T23:35:55.907
> 
> 标签：embedded, arm, microcontroller, cortex-m

我最近被分配了一个微控制器编程任务。我需要在[MKL05Z32VFM4](http://www.futureelectronics.com/en/Technologies/Product.aspx?ProductID=MKL05Z32VFM4FREESCALESEMICONDUCTOR1025520)设备上编程。

我正在阅读一些关于 Microchip Technology 的 MPLAB IDE X 的编程教程，因为这似乎包含最多的信息，但看起来 IDE 仅适用于 Microchip 产品。

我应该为 MKL05Z32VFM4 选择哪些开发工具？是否有通用的 IDE 和模拟器环境？有一些教程让我开始看吗？

我为一个基本问题道歉。我是一个体面的普通软件开发人员，但我对这个领域很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:18:58.793

（如果你打算使用一些商业工具链，如 Keil、IAR 或类似的东西，这篇文章将部分无用）

对于 ARM Cortex 设备，您有很多可用选项（；如果您有兴趣进行一些自动翻译，可以查看我的网站 - 我写了一个关于 ARM （开源）工具链的教程 - [http:// www.freddiechopin.info/pl/artykuly/35-arm/59-arm-toolchain-tutorial](http://www.freddiechopin.info/pl/artykuly/35-arm/59-arm-toolchain-tutorial) - 不幸的是它没有翻译成英文，所以你必须使用谷歌翻译。还有一些你可能会觉得有用的其他资源，尤其是我的模板/示例项目，用于此类工具链（在下载中）。如果您曾经使用过 Eclipse、Makefile 和 GCC，那么整个主题对您来说应该很容易。大多数示例项目将接近您的需要，但您可能应该检查一下STM32（任何）的示例 - 这是一个 Cortex-M3，以及 LPC1114 的示例 - 这是一个 Cortex-M0。

至于模拟器，我个人认为不值得麻烦，最近的GCC工具链无论如何都禁用它，因为它只是指令模拟器，你将无法轻松模拟外围设备。如果您想模拟指令，只需为 PC 编写代码，因为它的工作方式相同（；如果您需要在真实硬件上检查某些内容，您可以使用 GDB 和 JTAG。只要它不是一些极其昂贵的专有设计（您可以 - 再次 - 检查我的网站以获取其他选项）这些工具几乎是免费的 - OpenOCD（GDB 服务器）是开源的，您可以购买基于 FTx232 的 JTAG（OpenOCD 最流行的类型），起价约为 30 美元。

大型商业工具链有时具有带外围设备模拟的模拟器，但这些成本为几千欧元/年（；

用 Google 搜索“ARM Cortex”，其中包含以下关键字：toolchain、gcc、openocd、debugging、jtag 等，以查找一些文章 - 网络中有很多。

您的问题非常笼统，很难回答，因为我们不知道您将使用哪些工具，您是否打算使用一些外部库，您打算使用这些设备做什么类型的工作等等。

根据我的经验，接触嵌入式世界对 PC 软件开发人员来说往往是一个巨大的冲击。它的工作原理大致相同，但是由于资源有限，您确实应该以不同的方式做事。您没有“+infinity”的 RAM，您通常应该尝试在 ROM 等中放入很多东西。当然只有 C 和 C++，但是在 C++ 中你不应该使用它的一些特性（例外、RTTI、iostreams、STL 的部分......），内存的动态分配通常不是一个好主意（使用您提到的芯片 - 4kB 的 RAM - 在我看来这是毫无疑问的）。

您提到的芯片非常小，因此可能会受到更大的冲击（；

尝试提出一些具体问题并提供有关您项目的更多详细信息，以便我们提供更详细的答案（;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T06:45:27.813

那是一个 Cortex-M0 设备。你可以在网上找到*很多信息。*您可以从[arm.com](http://arm.com)开始。就工具链而言，gcc 和 clang 都是免费的并且支持 ARM 并且可以正常工作。如果你喜欢的话，你也可以获得 ARM 的工具。用于调试的 JTAG 会让您付出代价 - 大多数人使用 ARM 的内部 RealView 调试器或 Lauterbach 的 Trace32。我还使用了 Abatron 的 BDI3000。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:36:14.647

它看起来像一个飞思卡尔MCU。飞思卡尔选择的 IDE 是 CodeWarrior。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T19:55:10.407

一个好的起点是零件制造商的网站，通常他们会有工具或链接到推荐的第三方以及应用说明和库。从[飞思卡尔 Kinetis KL0 系列“软件和工具”](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=KL0&nodeId=01624698C9E3EC&fpsp=1&tab=Design_Tools_Tab)页面开始。

飞思卡尔自己的 CodeWarrior 工具是基于 Eclipse 的。

# macos - 如何在 Emacs 中设置 CMD 键绑定？

> ID：14905133
> 
> 赞同：15
> 
> 时间：2013-02-15T23:36:05.023
> 
> 标签：macos, emacs, homebrew

我在 Mac OS X 终端中使用 Emacs，安装了 homebrew。

我的 CTRL 键是我的 C 键，而 ALT 键是 Meta。

如何为 CMD 组合键定义键绑定？

例如，我想将 CMD-（右箭头）设置到行尾。

* * *

编辑

我在下面尝试了@nickcarlo 的建议

```
(setq mac-command-modifier 'super)
(global-set-key (kbd "s-<right>") 'move-end-of-line) 
```

我不认为 CMD 键被设置为超级正确，因为我`s-foo`在迷你缓冲区中看不到我输入`C-x`或`M-x`或任何东西时的样子。我注意到 CMD-right，当我打开两个终端窗口时，会在两个终端窗口之间切换，所以我认为这可能会阻止任何自定义设置。但是，我尝试了：

```
(global-set-key (kbd "s-9") 'move-end-of-line) 
```

.. CMD-9 仍然什么都不做，除了哔哔声告诉我我按错了。

设置非 CMD 组合键似乎可以正常工作，例如：

```
(global-set-key (kbd "C-w") 'move-end-of-line) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T23:39:31.943

您可以使用以下内容进行设置：

```
(global-set-key (kbd "s-<right>") 'move-end-of-line) 
```

“s”是对您的命令键的引用。

PS：我现在不在我的mac上，所以我不确定你需要写什么来将它设置为你提到的将它移动到行尾的特定键，但是命令在emacs中由一个s表示。

**编辑** 刚刚在我的mac上测试了这个。这是您要编写的确切代码（如果您想全局设置它）以绑定您的命令键 + 右箭头键以将光标移动到行尾。

如果上述方法不起作用，您也可以尝试

```
(global-set-key (kbd "\s <right>") 'move-end-of-line) 
```

上一个和这个的区别是，上一个相当于CMD+right，这个相当于CMD，然后松开CMD，按右键。两者都适用于我系统上的 OS X。

另请查看以下帖子以将您的 CMD 设置为超级键，以防您的 Emacs 尚未将其注册为这样：

[http://ergoemacs.org/emacs/emacs_hyper_super_keys.html](http://ergoemacs.org/emacs/emacs_hyper_super_keys.html)

具体来说，您可以使用以下代码将您的 CMD 密钥设置为 Super：

```
(setq mac-command-modifier 'super) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-23T15:59:08.300

在 Aquamacs 中，对我有用的是以下内容

```
(global-set-key (kbd "A-r") 'my-command) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T05:17:03.160

第 1 步：cx cf .emacs // 打开 .emacs 文件

第 2 步：在 .emacs 文件末尾添加以下行

```
 ;; changing the command to control
    (setq mac-command-modifier 'control) 
```

第 3 步：保存 .emacs 文件

第 4 步：Mx eval-buffer //Mx = Alt-x // 这会评估 .emacs 缓冲区并重新加载 Emacs

第 5 步：尝试 CMD-e 到行尾。// 现在 CMD 就像控制一样

第 6 步：CMD-e 仍然不起作用重新启动 Emacs。

享受使用 Emacs！

# ios - 核心数据加密

> ID：14905135
> 
> 赞同：7
> 
> 时间：2013-02-15T23:36:16.843
> 
> 标签：ios, core-data, encryption, nsvaluetransformer

我有一个关于核心数据加密的问题。我将一些敏感的用户数据存储在 Core Data SQLite 数据库中。关键值都是可转换的，我正在使用 AES256 对它们进行“动态”加密和解密，包括每个值的单独 IV。加密密钥是用户选择的密码的 SHA512 哈希。到目前为止，这非常有效。

现在关于用户密码。当用户启动应用程序时，系统会要求他输入密码。密码使用 SHA512 进行哈希处理并存储在 iOS 钥匙串中。对于每个写入或读取操作，NSValueTransformer 将从钥匙串中获取密码。如果应用程序正在关闭，我会从钥匙串中删除密码哈希。

在我的核心数据数据库中，我有一个特殊的实体，它有一个随机数！= 0，因为它是唯一的值。为了测试用户是否输入了正确的密码，我获取了这个实体并读取了这个数字。如果是=！0，我知道密码是正确的，因为当解密失败时 NSValueTransformer 总是返回 0。

现在我的实际问题是：您认为这是一种很好的加密方法吗？如果输入的密码正确，您将如何测试？

我有点担心在应用程序运行时将密码哈希存储在钥匙串中会使一切变慢，因为 NSValueTransformer 必须一直访问钥匙串。将密码哈希保存在内存中是否足够安全，以便在应用程序关闭时将其删除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T22:10:40.287

您不应该使用密码的哈希值，哈希值的设计速度很快，因此（相对而言）很容易进行暴力攻击。使用像[PBKDF2这样的](http://en.wikipedia.org/wiki/PBKDF2)[密钥派生函数](http://en.wikipedia.org/wiki/Key_derivation_function)。

不要使用直接从密码派生的密钥作为加密密钥。如果用户更改密码，则需要重新加密所有数据，备份将变得毫无价值。使用随机生成的加密密钥，您使用基于密码的密钥加密密钥进行加密。

我不太确定将哈希存储在钥匙串中，而不是仅仅将其保存在内存中。上次我研究这个时，解密钥匙串比较容易。每个可以读取您正在运行的应用程序内存的攻击者很可能能够窥探钥匙串访问或解密数据。只需将其保存在内存中，并确保在应用程序暂停到后台等情况下擦除内存。这显然也适用于每条解密数据。

[编辑：@JeffLockhart 澄清主加密密钥的过程] 您生成一个随机密钥来加密您的数据，我们称之为密钥 A。您可以使用[SecRandomCopyBytes](https://developer.apple.com/library/ios/#documentation/Security/Reference/RandomizationReference/Reference/reference.html)生成密钥 A，有关使用示例，请参阅[Apple 的 CryptoExcercise](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html)。您使用密钥 A 来加密用户数据。要保存密钥 A，您必须使用第二个密钥 B 对密钥 A 进行加密。您不应该将密码直接用作密钥 B，因为快速暴力或字典攻击。因此，您可以使用 PBKDF 从密码中派生一个密钥，就像在[这个](https://stackoverflow.com/questions/8569555/pbkdf2-using-commoncrypto-on-ios) stackoverflow 答案中一样。然后，您使用密钥 B 加密密钥 A，例如使用[CCCrypt](https://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man3/CCCrypt.3cc.html). 您保存加密的密钥 A 和用于派生密钥 B 的盐。要解密，用户输入密码，您使用密码和盐派生密钥 B。您使用派生密钥 B 解密密钥 A。希望澄清。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T09:42:42.377

你可以看看这个：

[安全增量存储](http://www.stoeger-it.de/en/secureincrementalstore/)

他们实现了一个使用加密 SQLite 数据库的 NSIncrementalStore 子类。这是 Apple 的 SQLite Store 的直接替代品。还带有价格标签。

# python - 如何在 Python 中将元素从“列表”“翻译”到另一个“列表”中的元素？

> ID：14905138
> 
> 赞同：1
> 
> 时间：2013-02-15T23:36:31.417
> 
> 标签：python, list, compare, matching

好吧，我来这里之前做了一些研究，我没有找到任何特别适合我想要找到的东西。

这个问题有点困难，（至少，对我来说）所以我会尽力在这里解释它。

好的：所以我有一个字母列表，这些字母取自用户输入的字符串。

（他们输入一个字符串，然后将其全部分解为单个字母并添加到一个列表中，其中每个字母都是它自己的“元素”）

现在我想这样做是因为我想让这个列表中的所有字母都被翻译成别的东西，这取决于我“设置”每个字母要翻译成什么。

我对如何做到这一点有点困惑，我可以有一个完整的 while 循环来执行以下操作：

获取第一个元素，然后运行整个字母表和数字 1-9。如果它匹配任何内容，它会将其添加到新列表中。

问题是，这样做似乎效率很低，我认为他们肯定是这样做的更好方法，我将在下面发布我正在谈论的内容：

我无法让代码格式正常工作，我对此感到沮丧。这是代码：

```
print("\t\t\tThe fun encryptor")
print("\n\n Please Enter the following string to be encrypted")
STRING = input("Entry: ")
STRINGCOPY = [STRING]
DIRECTORY = []
#The string is to be encyrypted.
STRINGLEN = len(STRING)
OPPLIMIT = 0
REPEAT = False
DIRECTORYT = []

while OPPLIMIT < STRINGLEN:
    DIRECTORY = DIRECTORY + str.split(STRING[OPPLIMIT])
    OPPLIMIT += 1

# String Added to the Directory necessary
if "a" in DIRECTORY[0]:
    DIRECTORYT += [0.01]
elif "b" in DIRECTORY[0]:
    DIRECTORYT += [0.11]
elif "c" in DIRECTORY:
    DIRECTORYT += [1.11]

    #and so on and so forth

a="0.01"
b="0.11"
c="1.11"
d="0.02"
e="0.22"
f="2.22"
g="0.03"
h="0.33"
i="3.33"
j="0.04"
k="0.44"
l="4.44"
m="0.05"
n="0.55"
o="5.55"
p="0.06"
q="0.66"
r="6.66"
s="0.07"
t="0.77"
u="7.77"
v="0.08"
w="0.88"
x="8.88"
y="0.09"
z="0.99" 
```

如您所见，经历这一切似乎几乎毫无意义，有没有更简单的方法呢？

也许使用`for`功能的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:45:59.377

首先，不要创建 26 个名为`a`,`b`等的单独变量，只需创建一个`dict`:

```
values = {'a': 0.01,
          'b': 0.11', 
          #...
} 
```

现在，您可以这样做：

```
for letter in DIRECTORY[0]:
    DIRECTORYT += [values[letter]] 
```

或者，或者：

```
for letter in values:
    if letter in DIRECTORY[0]:
        DIRECTORYT += [values[letter]] 
```

两者之间的区别在于它们如何处理重复项。而且我不确定你想要哪一个（或者，如果你从来没有任何重复，所以没关系）。尝试使用不同的样本数据执行这两种方法，直到你明白这一点。

作为旁注，通常最好这样做：

```
DIRECTORYT.append(values[letter]) 
```

比：

```
DIRECTORYT += [values[letter]] 
```

换句话说，`list`如果不需要，就不要创建一个。

但在这种情况下，您可以用列表推导式或生成器表达式替换整个循环：

```
DIRECTORYT += [values[letter] for letter in DIRECTORY[0]]
DIRECTORYT += [values[letter] for letter in values if letter in DIRECTORY[0]] 
```

或者：

```
DIRECTORYT.extend(values[letter] for letter in DIRECTORY[0])
DIRECTORYT.extend(values[letter] for letter in values if letter in DIRECTORY[0]) 
```

/generator 表达式版本的优势`extend`再次在于它们不构建临时`list`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:45:56.500

不太确定您要做什么，但这里有两种方法。

您可以设置一个包含字母及其翻译的字典，然后在您的用户输入单词时在该字典上进行查找。

```
codes = {}
codes['a'] = 9
codes['b'] = 133
# and so on
codes['z'] = 1

user_input = raw_input('Please enter a string: ')

translated_stuff = []

for letter in user_input:
   if letter in codes:
       translated_stuff.append(codes[letter])

# a shorter way to do the above loop is
# translated_stuff = [codes[i] for i in user_input if i in codes]

print "Your translated stuff is : {}".format(''.join(translated_stuff)) 
```

或者，如果您想要简单地检查输入是否与集合匹配：

```
import string

match_list = string.letters + string.digits

user_input = raw_input('Please enter a string: ')
matched_stuff = [i for i in user_input if i in match_list] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:34:46.877

我不清楚您在代码中尝试完成的所有工作，但在这里如何将输入的字符串的每个字符转换为代码中显示的值。无需先将其转换为列表，因为字符串已经是一个字母序列，在大多数情况下可以将其视为列表中的项目（主要区别在于它们不能更改）。

它使用 Python 字典（或`dict`）来保存翻译，因为它允许使用它来查找每个字母并非常快速地找到与之关联的值，通常比通过检查常规表中的每个条目来搜索它要快得多`list`。

它还确保仅翻译字母字符（字母）并将大写字母转换为小写字母以进行查找操作，因为字典中只有它们的条目。

```
import string

translate = {
    'a': "0.01", 'b': "0.11", 'c': "1.11", 'd': "0.02", 'e': "0.22", 'f': "2.22",
    'g': "0.03", 'h': "0.33", 'i': "3.33", 'j': "0.04", 'k': "0.44", 'l': "4.44",
    'm': "0.05", 'n': "0.55", 'o': "5.55", 'p': "0.06", 'q': "0.66", 'r': "6.66",
    's': "0.07", 't': "0.77", 'u': "7.77", 'v': "0.08", 'w': "0.88", 'x': "8.88",
    'y': "0.09", 'z': "0.99",
}

print("\t\t\tThe fun encryptor")
print("\n\nPlease type in a string to be encrypted and press the Enter key")
entry = input("Entry: ")

directory = [translate[ch.lower()] for ch in entry if ch in string.ascii_letters]

print('directory:', directory) 
```

# openmp - Openmp没有更新

> ID：14905140
> 
> 赞同：0
> 
> 时间：2013-02-15T23:36:46.343
> 
> 标签：openmp

我正在尝试编写一个 C (gcc) 函数，该函数将在跨多个线程运行时计算双精度数组的最大值。我创建了一个 size 数组`omp_get_num_threads`，在最终最大化这个小数组之前，我在其中存储了每个线程的局部最大值。代码（或多或少）如下：

```
int i;
double *local_max;
double A[1e10]; //made up size

#pragma omp parallel
{

#pragma omp master
{
local_max=(double *)calloc(omp_get_num_threads(),sizeof(double));
}

#pragma omp flush  //so that all threads point 
                   //to the correct location of local_max

#pragma omp for

for(i=0;i<1e10;i++){
   if(A[i]>local_max[omp_get_thread_num()])
      local_max[omp_get_thread_num()]=A[i];
}

}

free(local_max); 
```

然而，这会导致段错误，并且 valgrind 抱怨使用了未初始化的变量。`for`事实证明，在所有线程进入构造之前，local_max 实际上并未在所有线程中更新。我想`#pragma omp flush`应该这样做吗？如果我用 替换它`#pragma omp barrier`，一切正常。

有人可以向我解释发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:40:01.983

解决您的问题的最简单方法是简单地将`master`结构替换为`single`一个，因为哪个线程会进行分配并不重要（除非您在 NUMA 机器上运行，但是您还有许多其他事情要担心):

```
#pragma omp single
{
   local_max=(double *)calloc(omp_get_num_threads(),sizeof(double));
} 
```

`master`和之间的细微差别在于`single`，在结尾处有一个隐含的障碍，`single`而在结尾处不存在这样的障碍`master`。这个隐式屏障使所有其他线程等待，直到执行`single`块的线程到达块的末尾（除非`nowait`指定了子句，它删除了隐式屏障）。`master`必须明确添加屏障。我无法理解为什么 OpenMP 设计者会做出这样的决定，`master`而不会像现在这样有隐含的障碍`single`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:41:03.363

您需要设置屏障以确保内存分配已完成。内存分配是一项耗时的操作，当您的最终 for 循环开始运行时，local_max 未指向正确分配的空间。我在下面修改了您的代码以演示该行为。

```
int i;
double *local_max;
omp_set_num_threads(8);
#pragma omp parallel
{
#pragma omp master
    {           
        for(int k = 0; k < 999999; k++) {} // Lazy man's sleep function
        cout << "Master start allocating" << endl;
        local_max=(double *)calloc(omp_get_num_threads(),sizeof(double));
        cout << "Master finish allocating" << endl;
    }
#pragma omp flush 
#pragma omp for
    for(i=0;i<10;i++){
        cout << "for : " << omp_get_thread_num()  << " i: " << i << endl;
    }
}
free(local_max);
getchar();
return 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-30T22:15:13.747

更好的是，只需在#pragma omp 并行之前移动内存分配。不需要冲洗，或单，或主。

# c - `FT_Set_Pixel_Sizes` 是如何工作的？

> ID：14905141
> 
> 赞同：2
> 
> 时间：2013-02-15T23:36:49.310
> 
> 标签：c, freetype

文档对`FT_Set_Pixel_Sizes`功能不是很清楚。

我在设置什么？单位是什么？我总是必须通过反复试验来寻找正确的价值。

# asp.net-mvc-3 - 如何在 onchange 事件中发送 Html.HiddenFor 值作为参数？

> ID：14905143
> 
> 赞同：0
> 
> 时间：2013-02-15T23:36:53.450
> 
> 标签：asp.net-mvc-3

我正在尝试使用下拉列表和 onchange 将参数发送到操作。我试过发送这样的硬编码值：

onchange = "this.form.action='/Profile/Edit/16

这很好，但现在我想从这里找到的隐藏 id 发送值：

@Html.HiddenFor(model => model.StudentID)

......做这样的事情：

```
 @Html.DropDownList("DropDownValue", new SelectList(ViewBag.sellectedSubjects, "text"), "select one", new { onchange = "this.form.action='/Profile/Edit/@model => model.StudentID';this.form.method='get';this.form.submit();" }) 
```

当我这样做时，我收到“错误请求”错误。如何将 Html.HiddenFor 中的值作为 onchange 中的参数发送？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:59:12.570

尝试：

```
 @Html.DropDownList("DropDownValue", new SelectList(ViewBag.sellectedSubjects, "text"), "select one", new { onchange = "this.form.action='/Profile/Edit/"+Model.StudentID+"';this.form.method='get';this.form.submit();" }) 
```

# java - 如何计算关键字符？

> ID：14905146
> 
> 赞同：2
> 
> 时间：2013-02-15T23:37:13.023
> 
> 标签：java, string

我有以下代码：

```
import java.util.Scanner;

public class chara{

   public static void main(String[]args){

     Scanner input = new Scanner(System.in); 

     System.out.println("Input a string");

     String user=input.nextLine();

     if(user.length()<7)

     {

        return;

     }

     else

    {

    }

    System.out.println("now input a letter to be replaced");

    String letter = input.next();

    String user2 = user.replace(letter, "-");

    String user3 = user.replace(letter, "");

    System.out.println(user2);

    System.out.println(user3);

  }
} 
```

代码需要做三件事，接受一个字符串和一个字母和：

1.  用“-”替换字符串中的关键字母
2.  删除字符串的关键字母
3.  计算关键字母出现的次数。

目前我有两个问题。我不知道如何计算字母出现的次数，因为从技术上讲它是一个字符串而不是一个字符，而且我不知道如何计算字符串。其次，我需要这样做，以便如果字符串不是所需的长度，它只是再次询问而不是退出程序。我曾尝试使用 getString() 方法，但由于某种原因，它总是说该方法未定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:48:38.470

对于问题 #1：

靠近 main 方法的顶部：

```
int count = 0; 
```

分配 user3 后：

```
count += (user3.length() - user.length()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:02:27.530

充分感谢 user1324109 对问题 #1 的解决方案，以下是解决问题 #2 的方法：

```
import java.util.Scanner;

public class StringReader {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        String user1 = "", user2 = "", user3 = "";
        int count = 0;
        while(user1.equals("") || user1.length() < 7) {
            System.out.println("Input a string");
            user1 = input.nextLine();
        }
        if(!user1.equals("")) {
            System.out.println("now input a letter to be replaced");
            String letter = input.next();
            user2 = user1.replace(letter, "-");
            user3 = user1.replace(letter, "");
            System.out.println(user2);
            System.out.println(user3);
            count += (user1.length() - user3.length());
            System.out.println("letter was found to be present "+count+" times");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:01:01.803

为了帮助解决问题 #3：

```
 int count = 0;

    for(char c : user.toCharArray() ){
        if ( c ==  letter.charAt(0)) count++;
    }

    System.out.println("Number of occurences: "+count); 
```

# angularjs - 以角度更改我的指令的值

> ID：14905148
> 
> 赞同：0
> 
> 时间：2013-02-15T23:37:34.533
> 
> 标签：angularjs, dynatree, angularjs-directive, jquery-dynatree

我有这个指令

```
 MyApp.directive('dynatree', function ($rootScope) {
    return {
        restrict: 'E',
        link: function postlink(scope, element, attrs) {
            $(element).dynatree({
                onActivate: function (node) {
                    scope.$emit('nodeActivated', node);
                },
                persist: false,
                children: scope.treeData //this variable is in the layout for either csb or sku
            });
        }
    };
}); 

```

我的控制器包含儿童的值：

```
 scope.treeData = [ ... ] 

```

每次我更新 scope.treeData，我的指令都不会更新。有谁知道如何从我的控制器更新我的指令？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:46:31.470

我从来没有使用过 dynatree，但是当 src 数组发生变化时，树似乎没有被重绘。

尝试观察变化`scope.tree.data`并在发生时重新加载 dynatree：

```
MyApp.directive('dynatree', function ($rootScope) {
    return {
        restrict: 'E',
        link: function postlink(scope, element, attrs) {
            $(element).dynatree({
                onActivate: function (node) {
                    scope.$emit('nodeActivated', node);
                },
                persist: true,
                children: scope.tree.data //this variable is in the layout for either csb or sku
            });

            scope.$watch('tree.data', function() {
                // try to update the tree data here (I'm not aware how it's done)
                // and after that, reload...
                $(element).dynatree("getTree").reload();
            });
        }
    };
}); 
```

如果无法更新树数据，请尝试销毁 dynatree 并重新创建它（在 watcher 函数中）：

```
// destroy tree
$(element).dynatree("destroy");    
// recreate tree with new data
$(element).dynatree({ ... children: scope.tree.data ... }); 
```

请注意，我使用了`tree.data`and not `treeData`，这是因为您不应将此类信息直接存储在示波器上，而应将其存储在模型中（即`scope.tree = { data: [ ... ] }`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:53:49.623

Dynatree 如何知道您更改了 treeData？您可能需要通过在指令中的 treedata 上安装观察程序来告诉它：

```
scope.$watch('treeData', function(treeData, old, scope){
  element.dynatree().howEverDynatreeIsUpdated();
}) 
```

我不知道 dynatree，但如果它应该自我更新，请注意这仅适用于树*内的修改。*

`treeData`Dynatree 不会检测到用范围上的另一棵树替换整个树（= 将 scopes属性设置为其他内容），因为您在创建期间传递给 Dynatree 的树是 Dynatree 唯一可以知道的。在没有人工干预的情况下，它无法知道`treeData`范围上的属性已更改，并且它自己的引用指向一个过时的引用。你需要以某种方式告诉它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T07:59:48.697

使用 scope.$watch 是要走的路——正如前面提到的那些人。在观看对象时，我发现有必要使用“true”作为附加参数

```
$watch("tree.data", function () {..}, true) 
```

所以比较不会懒惰，并且会比参考更深入地检查。

[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$rootScope.Scope

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T18:18:11.220

好的，所以答案是

```
 scope.$watch('treeData', function (treeData, old, scope) {
                if (treeData.children) {
                    $(element).dynatree({children: treeData.children});
                    $(element).dynatree("getTree").reload();
                    $(element).show();
                }
            }, true) 

```

仅更改树的数据是不够的，必须重新加载它...我添加了节目，因为我之前隐藏了它，这样你就不会看到它随着数据的变化而反弹

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T22:02:00.883

有两种方法可以在 AngularJs 指令中绑定你的变量。当你不想有孤立的范围时，使用第一种方法。**您在属性字段上设置观察者**。使用第二种方式，当您有隔离范围时。这种方式更专业。**您仅在范围的变量上设置观察者**。如果你想要更多，这里有一篇好文章。

[http://www.w3docs.com/snippets/angularjs/bind-variable-inside-angularjs-directive-isolated-scope.html](http://www.w3docs.com/snippets/angularjs/bind-variable-inside-angularjs-directive-isolated-scope.html)

# c# - 单击一次部署 winForm 应用程序

> ID：14905153
> 
> 赞同：0
> 
> 时间：2013-02-15T23:37:54.857
> 
> 标签：c#, winforms, clickonce, publish

我有一个 winform 应用程序，它是我组织中的遗留应用程序，我必须进行一些改进。该应用程序在我的本地运行良好，但我无法发布它。在发布的最后阶段，我收到提示“输入密码以打开文件 SOMv1.1.1._TemporaryKey.pfx”。

我还将上述文件视为解决方案文件夹的一部分。

我的问题是这个 .pfx 文件是什么？如何检索完成发布所需的密码或如何重置密码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:44:47.007

由于您可以访问该项目的源代码，因此您可以简单地删除 .pfx 文件，然后添加一个新文件。

鉴于您正在创建应用程序的新版本，因此 .pfx 文件已更改并不重要。

作为参考，.pfx 文件是一个“个人信息交换文件”，它存储了安全证书的公钥/私钥对。

[来源](http://msdn.microsoft.com/en-us/library/ms247123%28v=vs.110%29.aspx)

# android-source - 将间隙添加到自定义 rom？

> ID：14905154
> 
> 赞同：1
> 
> 时间：2013-02-15T23:38:33.287
> 
> 标签：android-source, rom

我对rom开发真的很陌生，但是我设法为galaxy nexus构建了一个自定义rom。我显然没有差距。

我想知道如何在构建中合并 gapps 而无需刷新 .zip 文件？

这些应用程序不是开源的，它们是预构建的 apk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:57:05.293

找到您想要包含的 Google 应用程序的 APK 文件。复制目录 /system/app/ 和 chmod 644 下的每一项（将权限更改为 rwrr）。重新编译您的 ROM 并根据需要刷新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-09T08:18:40.593

您可以使用`micro g`项目在自定义 ROM 中使用谷歌服务。例如在`Replicant`ROM 中使用 microg。微g有定位服务、应用商店等多种工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T11:43:50.287

goto [https://github.com/opengapps](https://github.com/opengapps) and in opengapps repo follow the instruction.. there will be a common makefile to initiate the build then you have to add its path to your romname_device.mk

# ruby-on-rails-3 - Rails 属于不同的列名

> ID：14905159
> 
> 赞同：0
> 
> 时间：2013-02-15T23:38:48.063
> 
> 标签：ruby-on-rails-3

我正在开发一些投票软件，用户可以在其中为 3 个不同的条目投票。对于投票模型，我想的是：

> 投票：
> 电子邮件地址 - 字符串
> 验证码 - 字符串
> 验证 - 布尔值
> 第一 - 条目
> 第二 - 条目
> 第三 - 条目

其中 Entry 是我的 rails 应用程序中的另一个模型。我怎么可能有这种归属关系？因为我想运行查询，例如获得票数最高的条目以获得第一名。这是解决这个问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:04:16.700

**用户模型：**

```
has_many :votes, :dependent => :destroy
has_many :entries, :through => :votes 
```

**入门模型**

```
has_many :votes, :dependent => :destroy
has_many :users, :through => :votes 
```

**投票模式**

```
belongs_to :user
belongs_to :entry 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:48:43.703

我会设计 Vote 对象，使其仅包含一个 user_id 和一个 entry_id。然后，您的应用程序逻辑将强制执行，如果他们已经投票了 3 次，他们将无法再次投票。这样，当您查询最高票数时，您不必为第一个、第二个和第三个条目编写特殊情况。

至于belongs_to 声明，我会说一个投票belongs_to 用户和条目，并且当任何一个依赖对象被销毁时都应该被销毁，因此：

```
class Vote < ActiveRecord::Base
    belongs_to :user, :dependent => :destroy
    belongs_to :entry, :dependent => :destroy
end 
```

# objective-c - Objective-C 中 BFS 的内存注意事项

> ID：14905167
> 
> 赞同：0
> 
> 时间：2013-02-15T23:39:27.560
> 
> 标签：objective-c, cocoa, memory-management, nsautoreleasepool

我在 Objective-C 中编写了一个解谜程序。它使用广度优先搜索来探索从初始拼图状态可到达的状态。当遇到第一个获胜状态时终止搜索。唯一的优化是一个查找表，它有助于防止从已经看到的状态重新探索。

该算法似乎工作正常。但是分析显示它使用了大量内存，我想了解原因。我认为我的理解差距与 Objective-C 运行循环和自动释放池有关。

**以下（简化的）代码是否允许运行循环完成迭代并耗尽自动释放池？**

```
- (void) search {
    while (![myQueue empty]) {
        State *state = [myQueue pop];
        for (State *s in [state allReachableStates]) {
            [myQueue push:s];
        }
    }
} 
```

分析显示大量内存用于 NSArray。这是有道理的，因为`allReachableStates`确实创建了相当数量的数组。由于它们都是自动释放的，上述代码似乎有可能阻止自动释放池耗尽。

请注意，所有代码都在主线程上运行，我没有使用 ARC。

**编辑：**所以修复将`for`循环包装在一个`@autoreleasepool`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:58:16.473

您是对的，与此轮运行循环关联的自动释放池不会在此方法中耗尽。在此方法返回后的一段时间内，它不会被耗尽。

您可以自己将 while 块包装在 @autoreleasepool 中（每个状态一个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:05:51.320

最好不要`autorelease`在 for 循环中使用很多。你可以检查这个[Understanding Objective-C autorelease memory management](http://www.alphero.com/mobile-development/understanding-objective-c-autorelease-memory-management/)

# python - re.sub 上的非贪心运算符

> ID：14905169
> 
> 赞同：2
> 
> 时间：2013-02-15T23:39:36.123
> 
> 标签：python, regex

给定以下字符串：

```
>>> s = 'Claude Binyon [Director / Screenwriter] Walter Benjamin Hare [Play Author]' 
```

我想实现以下目标：

```
'Claude Binyon,Walter Benjamin Hare,' 
```

我有以下正则表达式，但它很贪心，所以在`[`. 我将如何根据需要使以下非贪婪工作？

```
>>> re.sub('\[.+]',',',s)
'Claude Binyon ,' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T23:41:48.607

尝试这样做：

```
>>> re.sub('\[.+?]',',',s) 
```

# php - Kohana 控制器列表

> ID：14905172
> 
> 赞同：0
> 
> 时间：2013-02-15T23:39:51.887
> 
> 标签：php, kohana, kohana-3

我正在寻找一种以编程方式获取 Kohana 应用程序中的控制器列表的方法。

就像是：

```
public function build_site_map(){
     $controllers = Kohana::get_controllers();

     echo '<ul>';
     foreach($controllers as $controller){
         echo '<li><a href="'.URL::base().$controller.'">'.$controller.'</a></li>';
     }
     echo '</ul>';
} 
```

我意识到我可以阅读 /application/classes/controllers/ 目录，但我希望有更简单的方法。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:16:51.017

获取控制器文件列表可以使用`Kohana::list_files('classes/controller')`. 但正如 Michal 已经说过的，控制器/动作和路由之间没有 1:1 的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:47:01.017

恐怕没有任何`Kohana::get_controllers()`方法可以让您轻松调用以获取各种站点地图。这是因为控制器是动态调用的，即根据请求的 URL 和路由配置 Kohana 检查是否存在控制器（和操作）然后调用它们。Kohana 不会记录所有可用的控制器和可访问的操作。

遍历`/application/classes/controllers`目录和获取所有文件的列表都不会为您提供所需的结果，因为不仅有要读取的操作（使用[Reflection 类](http://php.net/manual/en/book.reflection.php)可以很容易地完成），而且还有您必须考虑的[路线](http://kohanaframework.org/3.3/guide/kohana/routing)帐户。

正如您所看到的，这可能是一个非常复杂的问题，不能简单地用可以粘贴在这里的代码片段来回答。

如果您决定编写一个脚本来实际创建这样的地图，但是您在途中遇到了问题，那么我们将能够提供更多帮助，否则这个问题太开放了。另外，如果您要编写它，我建议您将其创建为一个模块，您可以将其包含在任何其他项目中并共享它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T13:49:35.017

这是我获取所有控制器及其操作的解决方案。我用它来向我们的系统添加权限[https://github.com/open-classifieds/openclassifieds2/](https://github.com/open-classifieds/openclassifieds2/)

```
/**
 * get all the controllers and the actions that can be used
 * @return array 
 */
public static function list_controllers()
{
    $list_controllers = array();

    $controllers = Kohana::list_files('classes/controller');

    foreach ($controllers as $controller) 
    {
        $controller = basename($controller,'.php');
        $list_controllers[] = $controller;

        $class      = new ReflectionClass('Controller_Panel_'.$controller);
        $methods    = $class->getMethods();
        foreach ($methods as $obj => $val) 
        {
            if (strpos( $val->name , 'action_') !== FALSE )
            {
                $list_controllers[$controller][] = str_replace('action_', '', $val->name);
            }
        }
    }

    return $list_controllers;
} 
```

# objective-c - How is retain count implemented in NSObject?

> ID：14905181
> 
> 赞同：5
> 
> 时间：2013-02-15T23:40:43.083
> 
> 标签：objective-c, cocoa, nsobject, objective-c-runtime, retaincount

My question is how the current versions of Foundation (or of the Objective-C runtime library, since this seems to be there) implement retain count for `NSObject` derived objects? As I could see at [NSObject.mm](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm), there is no ivar called `retain count` in the `NSObject`'s interface body. Instead, there seems to be a kind of table or map which contains references counters for each object. But if retain count is really done with a map, aren't `retain` and `release` operations too expensive with this kind of implementation (since, in this case, it's necessary to lock and unlock mutexes, lookup the map to find the right object, besides the fact that, in a multithreaded environment, only one object can be retained/released at a time)?

I didn't find anything related to setting the retain counter to 1 when allocating a new object, neither in `_objc_rootAllocWithZone` at [NSObject.mm](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm) (which seems to be the function that is called by `[NSObject alloc]`) nor in `_class_createInstanceFromZone` at [objc-runtime-new.mm](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-runtime-new.mm) (that gets called later by `_objc_rootAllocWithZone`).

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T23:46:06.393

The retain count for `NSObject` is indeed kept in a global map. IIRC it actually uses a set of maps that are partitioned, presumably based on the address of the object, to reduce lock contention, but the actual implementation details are just that, implementation details.

In any case, you can't find code that sets the retain count to 1 because there isn't any. Objects with a retain count of 1 aren't put into the map. Objects only enter the retain count map when they're `retain`ed past the initial 1\. This is an optimization that speeds up the common case of objects that never have their retain count rise past 1.

# coq - 引入先前证明的定理作为假设

> ID：14905182
> 
> 赞同：24
> 
> 时间：2013-02-15T23:40:51.037
> 
> 标签：coq

假设我已经在 coq 中证明了某个定理，稍后我想将其作为假设引入另一个定理的证明中。有没有一种简洁的方法来做到这一点？

当我想做类似案例证明之类的事情时，我通常会需要这样做。而且我发现这样做的一种方法是`assert`陈述定理，然后立即证明它，但这似乎有点麻烦。例如，我倾向于写如下内容：

```
Require Import Arith.EqNat.

Definition Decide P := P \/ ~P.

Theorem decide_eq_nat: forall x y: nat, Decide (x = y).
Proof.
  intros x y. remember (beq_nat x y) as b eqn:E. destruct b.
    left. apply beq_nat_eq. assumption.
    right. apply beq_nat_false. symmetry. assumption. Qed.

Theorem silly: forall x y: nat, x = y \/ x <> y.
Proof.
  intros x y.
  assert (Decide (x = y)) as [E|N] by apply decide_eq_nat.
    left. assumption.
    right. assumption. Qed. 
```

但是有没有比输入整个内容更简单的方法`assert [statement] by apply [theorem]`呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-15T23:45:37.333

您可以使用`pose proof theorem_name as X.`,`X`您要介绍的名称在哪里。

* * *

如果您要立即销毁它，您还可以：`destruct (decide_eq_nat x y).`

# ruby-on-rails - Rails 中的异步 GET 请求

> ID：14905185
> 
> 赞同：0
> 
> 时间：2013-02-15T23:41:23.520
> 
> 标签：ruby-on-rails, asynchronous

我正在开发一个 Ruby on Rails 应用程序，该应用程序依赖于我的应用程序对用户指标进行一些简单的 URL 调用。对于部分跟踪，我需要在呈现索引页面之前进行服务器端调用。这是通过调用特殊格式的 URL 来实现的。目前我正在通过以下方式实现这一目标：

```
url = URI.parse('https://example.tracking.url')
result = Net::HTTP.start(url.host, use_ssl: true, verify_mode: OpenSSL::SSL::VERIFY_NONE) do
  |http| http.get url.request_uri, 'User-Agent' => 'MyLib v1.2'       
end 
```

我的页面的加载有时似乎有些延迟。除了它是一个数据库延迟问题，我认为它只是有时 URL 需要额外的时间来响应，并且这是一个同步请求。在 Rails、Threads 中发出异步请求的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:07:19.403

您是否考虑过使用延迟作业或 Thread.new？

我会将其移至辅助方法，然后在辅助方法上调用 Thread.new。就个人而言，我喜欢使用delayed_job 来处理可能会导致用户界面延迟的事情。

# php - 如何使用 Request::factory()->execute() 从同一主机中的另一个库调用脚本

> ID：14905188
> 
> 赞同：1
> 
> 时间：2013-02-15T23:42:04.263
> 
> 标签：php, request, kohana, kohana-3.2

我正在使用 Kohana 3.2，并且我希望能够调用另一个返回`application/json`响应的脚本（与 Kohana 无关，在其“管辖范围”之外）。当我尝试使用：

```
$response = json_decode(Request::factory('/scripts/index.php?id=json')->execute()->body()); 
```

它错误地说没有通往`scripts/index.php`. 所以我尝试使用`Request_Client_External`

```
Request_Client_External::factory()->execute(Request::factory('/scripts/index.php?page=s'))->body(); 
```

给我`Request_Exception [ 0 ]: Error fetching remote /scripts/index.php?page=s [ status 0 ] Could not resolve host: scripts; Host not found`。看来它需要一个使用 http/https 的完整标记 URL，但是如何避免它执行真正的外部请求的开销？

做一个

```
Request::factory(url::site('/scripts/index.php?page=s', 'http'))->execute() 
```

有效，但它被认为是“外部的”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:58:29.343

对您的问题的简短回答是，`Request::factory()->execute()`实现这一目标的唯一方法是使用完整的 url 传递它（无论需要什么“开销”，这都不应该太多：您的服务器可能非常擅长自言自语）。

否则，理想情况下，您会将 的功能`scripts`放入库中并从 Kohana 调用它。但是，听起来这不是您的选择。如果您必须`/scripts/index.php`保持不变并**坚持**“内部”请求，则可以使用[PHP 的输出缓冲](http://www.php.net/manual/en/ref.outcontrol.php)，如下图所示。但是有很多警告，所以我不推荐它：最好的方法是传递一个完整的 url。

```
 // Go one level deeper into output buffering
    ob_start();

    // Mimic your query string ?id=json (see first caveat below)
    $_GET = $_REQUEST = array('id' => 'json');
    // Get rid of $_POST and $_FILES
    $_POST = $_FILES = array();

    // Read the file's contents as $json
    include('/scripts/index.php');
    $json = ob_get_clean();

    $response = json_decode($json); 
```

一些警告。

首先，代码发生了变化`$_GLOBALS`。你可能不会在你的 Kohana 代码中使用这些（你`$this->request->get()`像一个好的 HMVCer 一样使用，对吧？）。但如果你这样做了，你应该“记住”，然后`$old_globals = $GLOBALS;`在上面的代码之前和之后恢复值、放置等`$GLOBALS = $old_globals;`。

会话：如果您`/scripts/index.php`使用 `session_start() 如果您已经在 Kohana 中启动了会话，则会导致警告。

请注意，所有设置的变量都`scripts/index.php`将在您所在的上下文中保持设置。如果您想避免与该上下文可能发生的冲突，您将启动一个新的上下文，即将上述内容包装到它自己的函数中。

最后，您还需要确保它`/scripts/index.php`不会做任何类似的事情，或触及任何其他静态属性，或[使用 this](http://www.php.net/manual/en/function.runkit-function-redefine.php)`Kohana::base_url = 'something_else'`做一些灾难性的事情。

# algorithm - 将一组大整数转换为一组小整数

> ID：14905190
> 
> 赞同：2
> 
> 时间：2013-02-15T23:42:36.160
> 
> 标签：algorithm, combinatorics, sampling, random-sample, number-theory

我们如何重新编码一组严格递增（或严格递减）的正整数 P，以减少我们集合中的整数之间可能出现的正整数的数量？

**我们为什么要这样做：**假设我们要对 P 进行随机抽样，但是 1.) P 太大而无法枚举，并且 2.) P 的成员以非随机方式相关，但以一种太复杂而无法抽样的方式经过。但是，当我们看到 P 的成员时，我们就知道它了。假设我们知道 P[0] 和 P[n]，但无法接受枚举所有 P 或准确理解 P 成员之间关系的想法。同样，出现在 P[0] 和 P[n] 之间的所有可能整数的数量比 P 的大小大很多倍，这使得随机抽取 P 的成员的机会非常小。

**示例：**设 P[0] = 2101010101 & P[n] = 505050505。现在，也许我们只对 P[0] 和 P[n] 之间具有特定质量的整数感兴趣（例如 P[x 中的所有整数） ] 总和为 Q 或更少，P 的每个成员的最大整数为 7 或更少）。因此，并非所有正整数 P[n] <= X <= P[0] 都属于 P。我感兴趣的 P 在下面的评论中讨论。

**我已经尝试过：**如果 P 是一个严格递减的集合，并且我们知道 P[0] 和 P[n]，那么我们可以将每个成员视为从 P[0] 中减去它。这样做可能会大大减少每个数字，并将每个成员保持为唯一的整数。对于我感兴趣的 P（如下），可以将 P 的每个减小值视为除以公分母 (9,11,99)，这会减少 P 成员之间可能的整数数量。我已经发现结合使用，这些方法将所有 P[0] <= X <= P[n] 的集合减少了几个数量级，从而有机会从所有正整数 P[n 中随机抽取 P 的成员] <= X <= P[0] 仍然很小。

**注意**：应该清楚，我们必须知道一些关于 P 的信息。如果我们不知道，那基本上意味着我们不知道我们在寻找什么。当我们随机抽样 P[0] 和 P[n] 之间的整数（是否重新编码）时，如果确实如此，我们需要能够说“是的，它属于 P。”。

一个好的答案可以大大增加我开发的计算算法的实际应用。评论 2 中给出了我感兴趣的那种 P 的例子。我坚持给予应有的信任。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:13:48.247

虽然最初的问题是询问有关整数编码的非常通用的场景，但我认为不太可能存在一种完全通用的方法。例如，如果 P[i] 或多或少是随机的（从信息论的角度来看），如果有什么可行的话，我会感到惊讶。

因此，相反，让我们将注意力转向 OP 的实际问题，即生成整数 N 的分区，其中正好包含 K 个部分。当将组合对象编码为整数时，我们应该尽可能多地保留组合结构。为此，我们求助于[Nijenhuis 和 Wilf的经典文本](http://www.math.upenn.edu/~wilf/website/CombAlgDownld.html)[*组合算法*](http://www.math.upenn.edu/~wilf/website/CombAlgDownld.html)，特别是第 13 章。事实上，在本章中，他们展示了一个框架来枚举和采样许多组合族——包括 N 的分区，其中最大的部分等于K。利用众所周知的具有K个部分的分区和最大部分为K的分区之间的对偶性（取[费勒斯图](http://en.wikipedia.org/wiki/Ferrers_diagram#Ferrers_diagram)的转置），我们发现我们只需要对解码过程进行更改。

无论如何，这里有一些源代码：

```
import sys
import random
import time

if len(sys.argv) < 4 :
    sys.stderr.write("Usage: {0} N K iter\n".format(sys.argv[0]))
    sys.stderr.write("\tN = number to be partitioned\n")
    sys.stderr.write("\tK = number of parts\n")
    sys.stderr.write("\titer = number of iterations (if iter=0, enumerate all partitions)\n")
    quit()

N = int(sys.argv[1])
K = int(sys.argv[2])
iters = int(sys.argv[3])

if (N < K) :
    sys.stderr.write("Error: N<K ({0}<{1})\n".format(N,K))
    quit()

# B[n][k] = number of partitions of n with largest part equal to k
B = [[0 for j in range(K+1)] for i in range(N+1)] 

def calc_B(n,k) :
    for j in xrange(1,k+1) :
        for m in xrange(j, n+1) :
            if j == 1 :
                B[m][j] = 1
            elif m - j > 0 :
                B[m][j] = B[m-1][j-1] + B[m-j][j]
            else :
                B[m][j] = B[m-1][j-1]

def generate(n,k,r=None) :
    path = []
    append = path.append

    # Invalid input
    if n < k or n == 0 or k == 0: 
        return []

    # Pick random number between 1 and B[n][k] if r is not specified
    if r == None :
        r = random.randrange(1,B[n][k]+1)

    # Construct path from r    
    while r > 0 :
        if n==1 and k== 1:
            append('N')
            r = 0   ### Finish loop
        elif r <= B[n-k][k] and B[n-k][k] > 0  : # East/West Move
            append('E')
            n = n-k
        else : #  Northeast/Southwest move
            append('N')
            r -= B[n-k][k]
            n = n-1
            k = k-1

    # Decode path into partition    
    partition = []
    l = 0
    d = 0    
    append = partition.append    
    for i in reversed(path) :
        if i == 'N' :
            if d > 0 : # apply East moves all at once
                for j in xrange(l) :
                    partition[j] += d
            d = 0  # reset East moves
            append(1) # apply North move
            l += 1            
        else :
            d += 1 # accumulate East moves    
    if d > 0 : # apply any remaining East moves
        for j in xrange(l) :
            partition[j] += d

    return partition

t = time.clock()
sys.stderr.write("Generating B table... ")    
calc_B(N, K)
sys.stderr.write("Done ({0} seconds)\n".format(time.clock()-t))

bmax = B[N][K]
Bits = 0
sys.stderr.write("B[{0}][{1}]: {2}\t".format(N,K,bmax))
while bmax > 1 :
    bmax //= 2
    Bits += 1
sys.stderr.write("Bits: {0}\n".format(Bits))

if iters == 0 : # enumerate all partitions
    for i in xrange(1,B[N][K]+1) :
        print i,"\t",generate(N,K,i)

else : # generate random partitions
    t=time.clock()
    for i in xrange(1,iters+1) :
        Q = generate(N,K)
        print Q
        if i%1000==0 :
            sys.stderr.write("{0} written ({1:.3f} seconds)\r".format(i,time.clock()-t))

    sys.stderr.write("{0} written ({1:.3f} seconds total) ({2:.3f} iterations per second)\n".format(i, time.clock()-t, float(i)/(time.clock()-t) if time.clock()-t else 0)) 
```

以下是一些性能示例（在 MacBook Pro 8.3、2GHz i7、4 GB、Mac OSX 10.6.3、Python 2.6.1 上）：

```
mhum$ python part.py 20 5 10
Generating B table... Done (6.7e-05 seconds)
B[20][5]: 84    Bits: 6
[7, 6, 5, 1, 1]
[6, 6, 5, 2, 1]
[5, 5, 4, 3, 3]
[7, 4, 3, 3, 3]
[7, 5, 5, 2, 1]
[8, 6, 4, 1, 1]
[5, 4, 4, 4, 3]
[6, 5, 4, 3, 2]
[8, 6, 4, 1, 1]
[10, 4, 2, 2, 2]
10 written (0.000 seconds total) (37174.721 iterations per second)

mhum$ python part.py 20 5 1000000 > /dev/null
Generating B table... Done (5.9e-05 seconds)
B[20][5]: 84    Bits: 6
100000 written (2.013 seconds total) (49665.478 iterations per second)

mhum$ python part.py 200 25 100000 > /dev/null
Generating B table... Done (0.002296 seconds)
B[200][25]: 147151784574    Bits: 37
100000 written (8.342 seconds total) (11987.843 iterations per second)

mhum$ python part.py 3000 200 100000 > /dev/null
Generating B table... Done (0.313318 seconds)
B[3000][200]: 3297770929953648704695235165404132029244952980206369173   Bits: 181
100000 written (59.448 seconds total) (1682.135 iterations per second)

mhum$ python part.py 5000 2000 100000 > /dev/null
Generating B table... Done (4.829086 seconds)
B[5000][2000]: 496025142797537184410324290349759736884515893324969819660    Bits: 188
100000 written (255.328 seconds total) (391.653 iterations per second)

mhum$ python part-final2.py 20 3 0
Generating B table... Done (0.0 seconds)
B[20][3]: 33    Bits: 5
1   [7, 7, 6]
2   [8, 6, 6]
3   [8, 7, 5]
4   [9, 6, 5]
5   [10, 5, 5]
6   [8, 8, 4]
7   [9, 7, 4]
8   [10, 6, 4]
9   [11, 5, 4]
10  [12, 4, 4]
11  [9, 8, 3]
12  [10, 7, 3]
13  [11, 6, 3]
14  [12, 5, 3]
15  [13, 4, 3]
16  [14, 3, 3]
17  [9, 9, 2]
18  [10, 8, 2]
19  [11, 7, 2]
20  [12, 6, 2]
21  [13, 5, 2]
22  [14, 4, 2]
23  [15, 3, 2]
24  [16, 2, 2]
25  [10, 9, 1]
26  [11, 8, 1]
27  [12, 7, 1]
28  [13, 6, 1]
29  [14, 5, 1]
30  [15, 4, 1]
31  [16, 3, 1]
32  [17, 2, 1]
33  [18, 1, 1] 
```

我将把它留给 OP 来验证此代码是否确实根据所需的（均匀）分布生成分区。

编辑：添加了枚举功能的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:52:03.813

下面是一个完成我所要求的脚本，就重新编码表示 N 和 K 部分的整数分区的整数而言。需要一种更好的重新编码方法才能使该方法适用于 K > 4。这绝对不是最佳或首选方法。然而，它在概念上很简单，很容易被认为是基本无偏见的。小 K 也很快。脚本在 Sage notebook 中运行良好，不调用 Sage 函数。它不是随机抽样的脚本。随机抽样本身不是问题。

**方法：**

1.) 将整数分区视为它们的和被连接在一起并根据第一个词法分区中最大和的大小用零填充，例如 [17,1,1,1] -> 17010101 & [5,5,5,5 ] -> 05050505

2.) 将得到的整数视为从最大整数中减去它们（即表示第一个词法分区的 int）。例如 17010101 - 5050505 = 11959596

3.) 将每个结果减少的整数视为除以公分母，例如 11959596/99 = 120804

**所以，如果我们想选择一个随机分区，我们会：**

1.) 选择一个介于 0 和 120,804 之间的数字（而不是介于 5,050,505 和 17,010,101 之间的数字）

2.) 将数字乘以 99 并从 17010101 中减去

3.) 根据我们如何将每个整数视为用 0 填充来拆分结果整数

**优点和缺点：**如问题正文中所述，这种特殊的重新编码方法不足以大大提高随机选择代表 P 成员的整数的机会。对于少量部分，例如 K < 5 并且基本上更大的总数，例如 N > 100，实现此概念的函数可能非常快，因为该方法避免了及时递归（蛇吃尾巴），这会减慢其他随机分区函数或使其他函数无法处理大 N。

在小 K 时，在考虑其余过程的速度时，绘制 P 成员的概率可能是合理的。再加上快速的随机抽取、解码和评估，此函数可以为 N&K 的组合（例如 N = 20000，K = 4）找到其他算法无法实现的统一随机分区。**非常需要一种更好的方法来重新编码整数，以使其成为一种普遍强大的方法。**

```
import random
import sys 
```

**首先，一些通常有用且简单明了的功能**

```
def first_partition(N,K):
    part = [N-K+1]
    ones = [1]*(K-1)
    part.extend(ones)
return part

def last_partition(N,K):
    most_even = [int(floor(float(N)/float(K)))]*K
    _remainder = int(N%K)
    j = 0

    while _remainder > 0:
        most_even[j] += 1
        _remainder -= 1
        j += 1
    return most_even

def first_part_nmax(N,K,Nmax):
    part = [Nmax]
    N -= Nmax
    K -= 1
    while N > 0:
        Nmax = min(Nmax,N-K+1)
        part.append(Nmax)
        N -= Nmax
        K -= 1

    return part

#print first_partition(20,4)
#print last_partition(20,4)
#print first_part_nmax(20,4,12)
#sys.exit()

def portion(alist, indices): 
    return [alist[i:j] for i, j in zip([0]+indices, indices+[None])]

def next_restricted_part(part,N,K): # *find next partition matching N&K w/out recursion

    if part == last_partition(N,K):return first_partition(N,K)
    for i in enumerate(reversed(part)):
        if i[1] - part[-1] > 1:
            if i[0] == (K-1):
                return first_part_nmax(N,K,(i[1]-1))

            else:
                parts = portion(part,[K-i[0]-1]) # split p
                h1 = parts[0]
                h2 = parts[1]
                next = first_part_nmax(sum(h2),len(h2),(h2[0]-1))
                return h1+next

""" *I don't know a math software that has this function and Nijenhuis and Wilf (1978) 
 don't give it (i.e. NEXPAR is not restricted by K). Apparently, folks often get the
 next restricted part using recursion, which is unnecessary """

def int_to_list(i): # convert an int to a list w/out padding with 0'
    return [int(x) for x in str(i)]

def int_to_list_fill(i,fill):# convert an int to a list and pad with 0's
    return [x for x in str(i).zfill(fill)]

def list_to_int(l):# convert a list to an integer
    return "".join(str(x) for x in l)

def part_to_int(part,fill):# convert an int to a partition of K parts
# and pad with the respective number of 0's

    p_list = []
    for p in part:
        if len(int_to_list(p)) != fill:
            l = int_to_list_fill(p,fill)
            p = list_to_int(l)
        p_list.append(p)
    _int = list_to_int(p_list)
    return _int       

def int_to_part(num,fill,K): # convert an int to a partition of K parts
    # and pad with the respective number of 0's
    # This function isn't called by the script, but I thought I'd include
    # it anyway because it would be used to recover the respective partition

    _list = int_to_list(num)
    if len(_list) != fill*K:
        ct = fill*K - len(_list) 
        while ct > 0:    
            _list.insert(0,0)
            ct -= 1    
    new_list1 = []
    new_list2 = []

    for i in _list:
        new_list1.append(i)
        if len(new_list1) == fill:
            new_list2.append(new_list1)
            new_list1 = []

    part = []
    for i in new_list2:
        j = int(list_to_int(i))
        part.append(j)

    return part 
```

**最后，我们得到总 N 和部分数量 K。下面将按词汇顺序打印满足 N&K 的分区，以及相关的重新编码整数**

```
N = 20
K = 4

print '#,  partition,  coded,    _diff,    smaller_diff'

first_part = first_partition(N,K) # first lexical partition for N&K
fill = len(int_to_list(max(first_part)))
# pad with zeros to 1.) ensure a strictly decreasing relationship w/in P,
# 2.) keep track of (encode/decode) partition summand values

first_num = part_to_int(first_part,fill)
last_part = last_partition(N,K)
last_num = part_to_int(last_part,fill)

print '1',first_part,first_num,'',0,'      ',0

part = list(first_part)
ct = 1
while ct < 10:
    part = next_restricted_part(part,N,K)
    _num = part_to_int(part,fill)

    _diff = int(first_num) - int(_num)
    smaller_diff = (_diff/99)
    ct+=1

    print ct, part, _num,'',_diff,' ',smaller_diff 
```

**输出：**

ct，分区，编码，_diff，smaller_diff

1 [17, 1, 1, 1] 17010101 0 0

2 [16, 2, 1, 1] 16020101 990000 10000

3 [15, 3, 1, 1] 15030101 1980000 20000

4 [15, 2, 2, 1] 15020201 1989900 20100

5 [14, 4, 1, 1] 14040101 2970000 30000

6 [14, 3, 2, 1] 14030201 2979900 30100

7 [14, 2, 2, 2] 14020202 2989899 30201

8 [13, 5, 1, 1] 13050101 3960000 40000

9 [13, 4, 2, 1] 13040201 3969900 40100

10 [13, 3, 3, 1] 13030301 3979800 40200

简而言之，最后一列中的整数可能要小得多。

**为什么基于这种思想的随机抽样策略从根本上是无偏的：**

N 的每个具有 K 个部分的整数分区对应于一个且仅一个重新编码的整数。也就是说，我们不会随机选择一个数字，对其进行解码，然后尝试重新排列元素以形成 N&K 的适当分区。因此，每个整数（无论是否对应于 N&K 的分区）都有相同的机会被绘制。目标是固有地减少不对应于 N 和 K 部分的分区的整数数量，从而使随机抽样的过程更快。

# java - Android 开发：类中的 Calendar.getInstance() 导致问题

> ID：14905193
> 
> 赞同：1
> 
> 时间：2013-02-15T23:43:11.307
> 
> 标签：java, android

基本上，我创建了一个简单的类，以便将某些日期作为应用程序的一部分。由于我对 Java 不太了解，所以我在网上找到了一些处理日期的代码，主要是日历类。所以我从示例代码中提取了一些部分，并提出了以下类。

```
package com.example.myApp;
import java.util.Calendar;
import android.util.Log;

public class Date {
    public int day;
    public int month;
    public int year;
    public String formattedDate;
    public Calendar calendar;

    public Date(){
        //Set to today by default.
          // Create a Calendar object
          Calendar calendar = Calendar.getInstance();        
          // Get current day from calendar
          day = calendar.get(Calendar.DATE);
          // Get current month from calendar
          month = calendar.get(Calendar.MONTH); 
          // Get current year from calendar
          year = calendar.get(Calendar.YEAR);
    }

    public String getDate(){
        formattedDate = day+"/"+month+"/"+year;
        return formattedDate;
    }

    public void incDate(){
        calendar.add(Calendar.DATE, +1);
    }
} 
```

当我在我的主要活动中运行 incDate() 方法时，程序崩溃了。由于这个类是相当基本的，并且与我拥有的另一个运行良好的类相比，它的唯一不同之处是声明一个日历实例而不是正常实例化它，这让我认为这是问题所在。

如果有人能解释为什么有问题的方法导致应用程序崩溃，我将非常感激。

PS。我确实打算以此类为基础并添加更多方法，但由于上述原因，目前显然这是一个毫无意义的冒险。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:45:04.450

改变

```
Calendar calendar = Calendar.getInstance(); 
```

至

```
calendar = Calendar.getInstance(); 
```

您是构造函数中的变量阴影，仅此而已。

*当你改变影子时，你在另一个*作用域上使用同名的变量。在这种情况下，您只需将一个`calendar`局部实例化为构造函数，因此作用域内的类实例`calendar`保持为`null`. 我还建议不要命名您的类`Date`，因为它已经是 Java 提供的类 - 您正在引入歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:45:12.967

更改此行：

```
Calendar calendar = Calendar.getInstance(); 
```

至：

```
calendar = Calendar.getInstance(); 
```

因为你正在初始化一个新的变量即`shadows`实例变量，所以当你调用`incDate()`实例变量`calendar`的时候还是`null`

# ios - 为什么核心位置管理器无法在 iOS 6 模拟器上运行（使用 OSX Mountain Lion）

> ID：14905194
> 
> 赞同：1
> 
> 时间：2013-02-15T23:43:15.083
> 
> 标签：ios, ios6, core-location, cllocationmanager, simulator

我从这个[链接](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008305-CH1-SW1)关注 iOS 的核心数据教程 ，我的位置管理器似乎没有收到任何事件。我在模拟器上启用了定位服务，当我启动应用程序时，它会请求使用我的位置的权限，然后我说“好的”。知道为什么它没有拾取任何东西吗？

我的位置管理器委托方法如下所示返回以下错误：

> 2013-02-15 18:05:16.653 Locations[8280:c07] errorError Domain=kCLErrorDomain Code=0 “操作无法完成。（kCLErrorDomain 错误 0。）”

我什至尝试过调试 --> 模拟位置。顺便说一句，我正在使用 OSX Mountain Lion。

谢谢！

```
//location manager delegate method for fail
- (void)locationManager:(CLLocationManager *)manager
       didFailWithError:(NSError *)error {
    NSLog(@"Reached loc mngr delegate method 2...error occurred");
    [manager stopUpdatingLocation];
    NSLog(@"error%@",error);
    switch([error code])
    {
        case kCLErrorNetwork: // general, network-related error
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"please check your network connection or that you are not in airplane mode" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;
        case kCLErrorDenied:{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"user has denied to use current Location " delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;
        default:
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"unknown network error" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;
    }
    addButton.enabled = NO;
} 
```

# c# - 使用 EF Code First 本地扩展

> ID：14905198
> 
> 赞同：0
> 
> 时间：2013-02-15T23:43:44.710
> 
> 标签：c#, entity-framework, ef-code-first, local, first-level-cache

以下方法在我的服务层中正常工作：

```
public override IList<City> GetAll()
 {
           var query = from item in _tEntities
                       select item;
           query.Load();
           return _tEntities.Local;
 } 
```

但是当我尝试运行以下方法时，该方法返回由 GetAll() 方法加载的旧数据。

```
public override IList<City> GetAll(Func<City, bool> predicate)
       {
           var query = from item in _tEntities
                       select item;
           query.Where<City>(predicate);
           query.Load();
           return _tEntities.Local;
       } 
```

有什么问题，我该如何解决？
如何在此示例中使用本地方法并将新数据重新加载到本地（缓存）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:50:17.000

您正在查看错误的问题。您最有可能看到的结果是，当您执行第一次查询时，本地缓存为空。所以它只返回查询的结果。但是当你做第二个时，它会返回你的第一个查询和你的第二个查询的结果。

这归结为您在所有方法之间使用共享 DbContext 的事实。Local 包含上下文已检索的所有记录的缓存，而不仅仅是最近的查询。

正确的解决方案是不要以这种方式使用 Local。更好的是，不要使用共享上下文，因为这会导致上下文缓存膨胀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:48:32.083

我不太确定你想用 .Load 方法在这里实现什么，但看起来你想要以下。

```
public override IList<City> GetAll(Func<City, bool> predicate)
{
    return _tEntities.Where<City>(predicate).ToList();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:01:41.923

> ```
> query.Where<City>(predicate); 
> ```

这不会改变`query`。`query.Load()`下一行的 忽略谓词：you're call and `query.Load()`not `query.Where<City>(predicate).Load()`。好像你写过

> ```
> int i = 3;
> i + 1;
> Console.WriteLine(i); // still prints 3 
> ```

在该示例中，C# 实际上并不允许将加法用作语句，而是`.Where(predicate)`方法调用，并且方法调用可以这样使用，即使它们返回值。

这不是您唯一的问题（请参阅其他答案），但我猜这个问题是导致您看到的意外结果的问题。

# android - Service goes to standby when device sleeps - Android

> ID：14905201
> 
> 赞同：4
> 
> 时间：2013-02-15T23:44:24.980
> 
> 标签：android, android-wake-lock, sleep-mode, android-powermanager

Envrionment: Eclipse
Language: Java (Android)

I have a bit of a problem, which I didn't realise until I tested my application out on a device. I always thought that services would continuously be running in the background, even when the phone's sleeping. I found out that this is not the case, so, my question is that does the service start up again once you wake your device up? And if not, how would I cause the service to start-up again.

Would I be able to wake the phone every 5 minutes or so, just to run my service, which will last 30 seconds to 1 minute. And then make the phone sleep again?

Thanks in advance.

EDIT: I am very new to Android programming and would really appreciate if someone would tell me how to use WakefulIntentService. I have a service that is searching for the user's GPS Location every so often, and when the phone goes to sleep, I want my service to still look for their location. How would I go about using the WakefulIntentService for this? And would I be able to use it in this scenario.

Thanks.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T23:46:55.180

You need to hold the processor `lock` to keep your service running

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "TAG");
wl.acquire();
// When you are done
wl.release(); 
```

And if your service is using `Wi-Fi`, you need another lock as well

```
WifiManager wm = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wifiLock= wm.createWifiLock(WifiManager.WIFI_MODE_FULL, "TAG");
wifiLock.acquire();

// When you are done
wifiLock.release(); 
```

Remember to add `android.permission.WAKE_LOCK` in your manifest

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T01:02:07.303

> I have a service that is searching for the user's GPS Location every so often, and when the phone goes to sleep, I want my service to still look for their location. How would I go about using the WakefulIntentService for this? And would I be able to use it in this scenario.

`WakefulIntentService` is inappropriate here, as it is designed only to keep the device awake for a short period of time to do some work. It is not designed to keep the device awake for an indeterminate time, such as the time it takes to get a GPS fix.

I have [a `LocationPoller` project](https://github.com/commonsguy/cwac-locpoll) that handles your scenario a bit better.

> I am very new to Android programming

What you are trying to do is not a suitable project for somebody with your Android experience level, IMHO.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T08:57:01.183

I don't know what your service is doing exactly, but if it's down/uploading data to a server you might want to consider using a [Sync Adapter](https://developer.android.com/training/sync-adapters/creating-sync-adapter.html).

Unless you need exact timing this is less of a burden on your system than AlarmManager.

I you are doing something else, you might want to look into the [JobScheduler API](http://toastdroid.com/2015/02/21/how-to-use-androids-job-scheduler/).

Anyway if you really want to stick to AlarmManager just know that Inexact Repeating is already a lot better than Exact Repeating.

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-02-25T18:53:51.030

I used `AlarmManager`, I looked at `WakefulIntentService` and that gave me an idea on what to do. Thanks again for the help everyone.

# php - 表单中的php echo不起作用

> ID：14905206
> 
> 赞同：1
> 
> 时间：2013-02-15T23:44:47.943
> 
> 标签：php, forms, mysqli, echo

我的代码似乎不起作用..单选按钮出现但它们旁边没有任何东西..似乎mysql_fetch_row由于某种原因无法正常工作，因为我已经玩过代码并将$ qnumber手动替换为一个值并对其进行了测试什么都没有出现。有人可以请教什么是错的吗？干杯 ps。我是新手。

这是我的代码。

```
<?php

include 'dbyear2.php';

$qnumber = ($_REQUEST['uqn']); // obtain question number from URL

$find = mysqli_query($condbyear2, "SELECT * FROM Renal WHERE UQN='$qnumber'");

 while($retrieve=mysqli_fetch_row($find));
 {

      $question = $retrieve['question'];
      $a = $retrieve['MCQ_A']; 
       $b = $retrieve['MCQ_B'];
      $c = $retrieve['MCQ_C'];
         $d = $retrieve['MCQ_D'];
      $e = $retrieve['MCQ_E'];
     $answer = $retrieve['answer'];
       $correct = $retrieve['MCQ_correct'];

       }

      ?>

        <form action='check.php' method='POST'>  

    <table> 

  <tr><td></td><td></td></tr>
   <tr></tr>
        <tr><td><input type='radio' name='group1' value='A' /></td><td> <?php echo $a; ?></td></tr>
       <tr><td><input type='radio' name='group1' value='B' /></td><td> <?php echo $b; ?></td></tr>
         <tr><td><input type='radio' name='group1' value='C' /></td><td> <?php echo $c; ?></td></tr>
      <tr><td><input type='radio' name='group1' value='D' /></td><td> <?php echo $d; ?></td></tr>
       <tr><td><input type='radio' name='group1' value='E' /></td><td> <?php echo $e; ?></td></tr> 
   <tr>

      <?php 

     // sending the retrieved information from MYSQL via POST for use in check.php file

    $qnumber;
  $a;
   $b;
     $c;
  $d;
    $e;
  $answer;
    $correct;

   ?></tr>
         <tr><td><input type="submit" value="Submit"></td></tr>

     </table>

        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:51:56.350

1）删除`;`while语句末尾的

2)`mysqli_fetch_row`返回一个枚举数组。您需要的是一个关联数组，因此您应该使用`mysql_fetch_assoc`or`mysqli_fetch_array`代替。

```
while($retrieve=mysqli_fetch_assoc($find))
{
.... 
```

# php - PHP MYSQL插入命令不起作用

> ID：14905208
> 
> 赞同：0
> 
> 时间：2013-02-15T23:45:04.300
> 
> 标签：php, mysql, insert

我正在为这段代码苦苦挣扎。为什么它不起作用？它确实接收变量，但 sql 命令不起作用。

```
 if ($action=='create')
  {

  $Surname=$_REQUEST['Surname'];
  $Name=$_REQUEST['Name'];
  $Fathername=$_REQUEST['Fathername'];
  $Dateofbirth=$_REQUEST['Dateofbirth'];
  $Afm=$_REQUEST['Afm'];
  $Landline=$_REQUEST['landline'];
  $Mobile=$_REQUEST['Mobile'];
  $Address=$_REQUEST['Adrs'];
  $Addressnum=$_REQUEST['Adrsnm'];
  $Location=$_REQUEST['Location'];
  $ZIP=$_REQIEST['Zip'];
  $Bankaccount=$_REQUEST['Bankaccount'];

$createuser=mysql_query("INSERT INTO `Customers` (`Surname`,`CName`,`Fathername`,`Birthdate`,`AFM`,`Landline`,`Mobile`,`Address`,`Adressnum`,`Location`,`ZIP`,`Bankaccount`) VALUES ('$Surname','$Name','$Fathername','$Dateofbirth','$Afm','$Landline','$Mobile','$Address','$Addressnum','$Location','$ZIP','$Bankaccount')");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:50:10.743

```
mysql_query("INSERT INTO `Customers` (`Surname`,`CName`,`Fathername`,`Birthdate`,`AFM`,`Landline`,`Mobile`,`Address`,`Adressnum`,`Location`,`ZIP`,`Bankaccount`) VALUES ('$Surname','$Name','$Fathername','$Dateofbirth','$Afm','$Landline','$Mobile','$Address','$Addressnum','$Location',
'$ZIP','$Bankaccount')")or die(mysql_error()); 
```

会给你答案。

并确保转义您的数据：

```
 $Surname=mysql_real_escape_string($_REQUEST['Surname']);
  $Name=mysql_real_escape_string($_REQUEST['Name']);
  $Fathername=mysql_real_escape_string($_REQUEST['Fathername']);
 [...] 
```

更好的是，使用准备好的语句：

```
$q =  $sql->prepare("INSERT INTO `Customers` SET `Surname` = ? [...]");
$q->execute( array( $_REQUEST['Surname'], [...] ) ); 
```

# javascript - Google Maps API v3 地理编码 OVER_QUERY_LIMIT

> ID：14905211
> 
> 赞同：1
> 
> 时间：2013-02-15T23:45:13.437
> 
> 标签：javascript, google-maps-api-3, geocoding

我有一个应用程序需要一次对大量地址进行地理编码（~1500）。我正在使用 Javascript Google Maps API Library v3 来检索纬度和经度，并将信息存储在 MySQL 数据库中以供以后使用。

显然这需要一段时间。我的代码将地址放入数组中，然后在数组上调用递归函数。该函数获取每个地址并尝试对其进行地理编码。如果地理编码成功，则函数继续使用下一个地址。如果地理编码返回`ZERO_RESULTS`，则函数继续下一个地址。如果地理编码返回`OVER_QUERY_LIMIT`，该函数将`setTimeout`暂停一段时间（存储在 中`var timeout`，然后再次重试。

现在我尝试了许多不同的值`timeout`，它们的工作效果不同。最好的可能是`2000`，或两秒，这使我能够对大约 365 个地址进行地理编码。但是，一旦程序编码了大约 250 个地址，它就会完全减速，直到每 10 秒编码 1 个地址。

所以..有谁知道如何加快这个过程？`OVER_QUERY_LIMIT`我目前还有一个计数器，用于检查在同一地址上调用函数的次数（以跟踪在编码地址之前收到了多少错误）。我是否应该正常延迟 2 秒，然后如果同一个地址收到`OVER_QUERY_LIMIT`10 次，延迟 30 秒或什么？

任何帮助深表感谢！干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:55:28.233

您可以支付更高的限制或使用不同的地理编码提供商。

我在 SmartyStreets 工作，这是一家这样的提供商，没有请求限制。[LiveAddress](http://smartystreets.com/products/liveaddress-api)在云中扩展。与我们习惯于进行地理编码的数以千万计的地址相比，1,500 个地址并不算多。当然，我会让你自己研究，但如果你[好奇](http://smartystreets.com/kb/liveaddress-api/javascript)它是什么样的：

```
var addr = {
    street: "7584 E Big Canyon Dr.",
    zipcode: "92808"
};

// If you don't have the address in component form, you could just pass
// in a string containing the entire address instead.

LiveAddress.geocode(addr, function(geo) {
    alert("The address is at: " + geo.coords);
}); 
```

# ruby-on-rails-3 - 使用 Carrierwave 和 Ruby 重新创建版本

> ID：14905212
> 
> 赞同：8
> 
> 时间：2013-02-15T23:45:19.737
> 
> 标签：ruby-on-rails-3, amazon-s3, carrierwave

我正在开发的网站正在重新设计，因此我们的用户图像需要重新调整大小。该网站目前使用carrierwave gem来处理所有的图像和视频处理，每个图像都有一个原始文件，其文件名基于以下内容：

```
def filename
  if original_filename
    if model && model.read_attribute(:user_image).present?
      model.read_attribute(:user_image)
    else
      @name ||= "#{secure_token}.#{file.extension}" if original_filename.present?
    end
  end
end 
```

和secure_token由生成

```
def secure_token
  var = :"@#{mounted_as}_secure_token"
  model.instance_variable_get(var) or model.instance_variable_set(var, SecureRandom.uuid)
end 
```

为此创建的任务是：

```
##
# CarrierWave Amazon S3 File Reprocessor Rake Task
#
# Written (specifically) for:
# - CarrierWave
# - Ruby on Rails 3
# - Amazon S3
#
# Works with:
# - Any server of which you have write-permissions in the Rails.root/tmp directory
# - Works with Heroku
#
# Not tested with, but might work with:
# - Ruby on Rails 2 
#
# Might work with, after a couple of tweaks:
# - File System Storage
# - Cloud Files Storage
# - GridFS
#
# Examples:
#
# Reprocess all versions of User#avatar
#  rake carrierwave:reprocess class=User mounted_uploader=avatar
#
# Reprocess the versions: thumb, small, medium for User#avatar
#  rake carrierwave:reprocess class=User mounted_uploader=avatar versions='thumb, small, medium'
#
# Reprocess for an underlying association, for things like Embedded MongoDB Documents
# which are models you cannot access directly, but rather through a regular Document
#
# Embeds One (picture) Association
#  rake carrierwave:reprocess class=User association=picture mounted_uploader=image versions='thumb, small, medium'
#
# Embeds Many (pictures) Association
#  rake carrierwave:reprocess class=User association=pictures mounted_uploader=image versions='thumb, small, medium'
#
# WARNING
# There is an issue with "Rake", that you cannot name your mounted_uploader "file".
# If you do this, then you will not be able to reprocess images through this rake task
#  class User
#    include Mongoid::Document
#    mount_uploader :file, PictureUploader
#  end
#
# This will NOT work with reprocessing through Rake because the mounted_uploader uses the "file" attribute.

namespace :carrierwave do

  ##
  # Only tested with Amazon S3 Storage
  # Needs some minor modifications if you want to use this for File System Store, Cloud Files and GridFS probably.
  # This should work without Ruby on Rails as well, just set a different TMP_PATH.
  desc "Reprocesses Carrier Wave file versions of a given model."
  task :reprocess => :environment do

    ##
    # Load in the OPEN URI library to be able
    # to pull down and store the original file in a temp directory
    require 'open-uri'

    ##
    # Default constants
    TMP_PATH          = "#{Rails.root}/tmp/carrierwave"

    ##
    # Set environment constants
    CLASS             = ENV['class'].capitalize
    ASSOCIATION       = ENV['association'] || nil
    MOUNTED_UPLOADER  = ENV['mounted_uploader'].to_sym
    VERSIONS          = ENV['versions'].nil? ? Array.new : ENV['versions'].split(',').map {|version| version.strip.to_sym}

    ##
    # Find the Model
    MODEL = Kernel.const_get(CLASS)

    ##
    # Create the temp directory
    %x(mkdir -p "#{TMP_PATH}")

    ##
    # Find all records for the provided Model
    records = MODEL.all

    ##
    # Output to console
    puts "\nCarrier Wave Version Reprocessing!"
    puts "======================================="
    puts "Model:              #{CLASS}"
    puts "Mounted Uploader:   #{MOUNTED_UPLOADER}"
    puts "Association:        #{ASSOCIATION}" if ASSOCIATION
    puts "Versions:           #{VERSIONS.empty? ? "all" : VERSIONS.join(', ')}\n\n"

    ##
    # Run through all records
    records.each do |record|

      ##
      # Set the mounted uploader object
      # If it has a one-to-one association (singular) then that object
      # will be returned and wrapped in an array so we can "iterate" through it below.
      # 
      # If it has a one-to-many association then it will return the array of associated objects
      #
      # If no association is specified, it assumes the amounted uploader is attached to the specified CLASS 
      if ASSOCIATION
        if ASSOCIATION.singular?
          objects = [record.send(ASSOCIATION)]
        else
          objects = record.send(ASSOCIATION)        
        end
      else
        objects = [record]
      end

      ##
      # Iterates through the objects
      objects.each do |object|

        ##
        # Returns the mounted uploader object
        mounted_object = object.send(MOUNTED_UPLOADER)

        ##
        # Retrieve Filename
        filename = mounted_object.path.split('/').last

        ##
        # Output to console
        puts "Reprocessing: #{filename}"

        ##
        # Read out the original file from the remote location
        # and write it out to the temp directory (TMP_PATH)
        # This file will be used as the base file to reprocess
        # the versions. Once all versions have been processed,
        # this temp file will be directly removed.
        open(mounted_object.url) do |original_object|
          File.open(File.join(TMP_PATH, filename), 'w') do |temp_file|
            temp_file.write(original_object.read)
          end
        end

        ##
        # By default it will add all available versions to the versions variable
        # which means that all available versions will be reprocessed.
        # If the "versions" argument has been provided, then only the specified
        # version(s) will be set to the versions variable, and thus, only these
        # will be reprocessed.
        versions = mounted_object.versions.map {|version| version[0]}
        versions = VERSIONS unless VERSIONS.empty?

        ##
        # Reprocesses the versions
        versions.each do |version|
          mounted_object.send(version).cache!(File.open(File.join(TMP_PATH, filename)))
          mounted_object.send(version).store!
        end

        ##
        # Removes the temp file
        %x(rm "#{TMP_PATH}/#{filename}")
      end
    end
  end
end 
```

问题在于，当它创建新图像时，文件以新文件名保存，而不是遵循图像上传器中的命名，因此网站无法找到它们。以下是如何存储图像的示例。

应该如何：

原始文件：fdk392ks93_39ei.png

缩略图版本：thumb_fdk392ks93_39ei.png

它是怎样的：

原始文件：fdk392ks93_39ei.png

缩略图版本：thumb_fajeilkadifej_jakdjfi.png

任何帮助将不胜感激。

其他信息：

型号：用户

上传者：user_image（这也是存储文件夹/文件名的列名）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-25T14:14:04.407

调用后，`recreate_versions!`您必须调用`save!`模型。您可以查看[这个问题](https://stackoverflow.com/questions/8371234/recreate-versions-using-the-unique-filename-method-stated-in-the-wiki/12903595#12903595)，其中有人提出了基本相同的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-16T07:31:03.160

自述文件清楚地说明了如何重新创建 Carrierwave 版本：

[https://github.com/jnicklas/carrierwave/blob/master/README.md](https://github.com/jnicklas/carrierwave/blob/master/README.md)

“您可能会遇到想要追溯更改版本或添加新版本的情况。您可以使用 recreate_versions! 方法从基本文件重新创建版本。这使用了一种简单的方法，它将重新上传和处理指定版本或所有版本，如果没有作为参数传递。

```
instance = MyUploader.new
instance.recreate_versions!(:thumb, :large) 
```

或在已安装的上传器上：

```
User.all.each do |user|
  user.avatar.recreate_versions!
end 
```

# css - 动画图标字体微调器

> ID：14905216
> 
> 赞同：1
> 
> 时间：2013-02-15T23:45:48.700
> 
> 标签：css, css-transitions, css-animations

我在自定义图标字体中创建了 12 个字形来表示加载微调器的每个刻度（OSX/iOS 样式）。

标记看起来像这样

```
<div class="spinner">
  <span class="c1">&#xf001</span>
  ...
  <span class="c12">&#xf012</span>
</div> 
```

这是CSS

```
.spinner {
  font-family: "nvicons";
  font-size: 24px;
  letter-spacing: -1em;
  .c1 {
    color: #eee;
  }

  ...

  .c12 {
    color: #222;
  }
} 
```

现在我想在刻度字形的情况下为颜色设置动画，但不幸的是，`color`css 属性似乎不是可动画的，并且`background`在这种情况下似乎没有帮助。此外，我没有找到用关键帧制作动画的方法，因为动画很流畅，不像我需要的那样前卫。

有没有可能用 CSS 制作动画？我需要做的是以某种方式循环颜色，我真的想避免使用 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:55:56.360

我不确定我是否满足所有要求，但我会说您正在尝试更改序列中元素的颜色。

当您说您希望动画前卫而不是平滑时，可以使用关键帧来完成，它只会给您更多的工作。您只需要创建非常接近另一个的重复步骤：

```
@-webkit-keyframes colors {
    0%   {color: red;}
    49%  {color: red;}
    50%  {color: blue;}
    100% {color: blue;} 
```

}

请注意，从红色到蓝色的所有变化都在 49% 到 50% 之间

当然，这可能会扩展到您想要的步骤数量；只是您需要两次声明每个属性。

还要注意我确实在改变颜色。一个演示（仅限 webkit）：

[小提琴](http://jsfiddle.net/vals/Q6UPJ/1/)

**新答案**

现在很清楚您想要什么，最好的解决方案是：

[来自一个 div web 的示例](http://one-div.com/pictos/ajax-loader/)

请注意，最后您正在进行旋转：

```
@-keyframes ajax-loader-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
} 
```

并隐藏中间步骤（圆圈将位于中间位置）动画按以下步骤完成：

```
animation: .85s ajax-loader-rotate steps(8) infinite; 
```

当然，所有这些都带有供应商前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:31:22.293

找到了更好的解决方案。放在[jsfiddle上](http://jsfiddle.net/zsy3g/)

```
.spinner {
    position: relative;
    font-family:"nvicons";
    font-size: 24px;
    letter-spacing: -1em;
    color: #eee;
    text-rendering: optimizeSpeed;
}
.spinner > span {
    position: absolute;
    top: 0;
    left: 0;
    -webkit-animation: coloring 1s linear infinite;
}
.spinner .e1 {
    -webkit-animation-delay: 0.0s;
}
.spinner .e2 {
    -webkit-animation-delay: 0.08333s;
}
.spinner .e3 {
    -webkit-animation-delay: 0.16667s;
}
.spinner .e4 {
    -webkit-animation-delay: 0.25s;
}
.spinner .e5 {
    -webkit-animation-delay: 0.33333s;
}
.spinner .e6 {
    -webkit-animation-delay: 0.41667s;
}
.spinner .e7 {
    -webkit-animation-delay: 0.5s;
}
.spinner .e8 {
    -webkit-animation-delay: 0.58333s;
}
.spinner .e9 {
    -webkit-animation-delay: 0.66667s;
}
.spinner .e10 {
    -webkit-animation-delay: 0.75s;
}
.spinner .e11 {
    -webkit-animation-delay: 0.83333s;
}
.spinner .e12 {
    -webkit-animation-delay: 0.91667s;
}
@-webkit-keyframes coloring {
    from {
        color: #222;
    }
    to {
        color: #eee;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:09:31.987

你应该做的是将你的微调器图标在一个固定的距离上放置 12 次，该点与相邻的部件相隔 30 度。然后将第一块（12 点钟）的背景更改为您想要开始动画的第三个最暗的颜色。然后在动画设置一段时间后，将第三个最暗的颜色移动到下一个片段作为其背景。如果你能给我提供你的图标字体，我会让你成为一个 jsfiddle。

# javascript - 如何只制作一个可选择的菜单选项html和jquery

> ID：14905224
> 
> 赞同：0
> 
> 时间：2013-02-15T23:46:13.827
> 
> 标签：javascript, jquery, html, css

我有一个菜单栏，我试图让它一次只有一个可选择的根列表项。当用户单击顶部标题之一时，会显示相应的子菜单。我遇到的问题是，当用户单击一个头并将鼠标向上或向一侧移动而没有悬停在子菜单中时，他们现在可以舔另一个标题并同时显示 2 个子菜单。

如果您从手机查看，则可以单击尽可能多的根菜单项，并且它们都同时显示各自的菜单……不理想。

但是，如果用户单击一个标题，并将鼠标移动到子菜单中，那么一切正常，因为当他们离开该菜单并单击另一个根项目时，第一个菜单（及其子菜单）会消失。

[在这里提琴](http://jsfiddle.net/2SC5G/)

在此先感谢男孩/女孩。

HTML：

```
<!-- <LINK REL="SHORTCUT ICON" HREF="favicon.ico"> -->
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="includes/menu.js"></script></script>
    <link type="text/css" href="includes/menu.css" rel="stylesheet" />
</head>
<body>
    <div style="z-index:100;width:100%;position:fixed;top:0;left: 0;min-width:1000px;">
        <div id="menuJQ">
            <ul class="menuJQ">
                <li class="parent"><a href="#"><span>Home</span></a></li>
                <li><a class="parent" href="#"><span>Product View</span></a> 
                    <div class="submenu">
                        <ul>
                            <li><a href="#"><span>DevTask Search</span></a></li>
                            <li><a href="#"><span>Active Machines</span></a></li>
                        </ul>
                    </div>
                </li>
                <li class="parent"><a href="#"><span>Request Tool</span></a></li>
                <li><a href="#" class="parent"><span>Search</span></a>
                    <div class="submenu">
                        <ul>
                            <li><a href="#"><span>DevTask Search</span></a></li>
                            <li><a href="#"><span>Active Machines</span></a></li>
                            <li><a href="#"><span>Integrity Query</span></a></li>
                            <li><a href="#"><span>Internal DevTasks</span></a></li>
                            <li><a href="#" class="parent"><span>Results</span></a>
                                <div class="submenu">
                                    <ul>
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a></li>
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a>
                                            <div class="submenu">
                                                <ul>
                                                    <li><a href="#"><span>DevTask Search</span></a></li>
                                                    <li><a href="#"><span>Active Machines</span></a></li>
                                                    <li><a href="#"><span>Integrity Query</span></a></li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li><a href="#"><span>Issues for Stability Team</span></a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

CSS：

```
/* menu::base */
.expand{
    display:block;
}
.collapse{
    display:none;
}
div#menuJQ {
    height: 46px;
    padding-left: 0px;
    width:auto;
    /* background: url(../includes/images/right2.png) repeat right 0;  */
    background-color:black; 
}

div#menuJQ ul {
    margin: 0;
    padding: 0;
    list-style: none;
    float: left;
}
div#menuJQ ul.menuJQ {
    padding-right: 0px;
}

div#menuJQ li {
    position: relative;
    margin: 0;
    padding: 0;
    display: block;
    float: left;
    z-index: 9;
    width: auto;
}

div#menuJQ ul ul li {
    z-index: 9;
}
div#menuJQ li div {
    list-style: none;
    float: left;
    position: absolute;
    z-index: 11;
    top: 39px;
    left: -18px;
    -left: 4px;
    visibility: hidden;
    transition-delay: 0.5s;
    -moz-transition-delay: 0.5s; /* Firefox 4 */
    -webkit-transition-delay: 0.5s; /* Safari and Chrome */
    -o-transition-delay: 0.5s; /* Opera */
    width: 180px;
      margin: 0px 0 0 -4px;
    padding: 0; 
    background: url(../includes/images/submenu-top.png) no-repeat 0px 0;
    -background: url(../includes/images/submenu-top.gif) no-repeat 0px 0; 
}
div#menuJQ ul ul { /*submenu*/
    display:none;
      z-index: 12;
      width: 180px;
    padding: 0px 0px 12px 0px;
    -padding: 0px 0px 3px 0px;    
    background: url(../includes/images/submenu-bottom.png) no-repeat 0px bottom;
    -background: #E4E4E2 none;        
    margin: 14px 0 0 0;   
    -margin: 5px 0 0 0;      
}
div#menuJQ li > div {
    visibility: visible;
}

div#menuJQ a {
    position: relative;
    z-index: 10;
    height: 38px;
    display: block;
    float: left;
    line-height: 38px;
    text-decoration: none;
    margin-top: 1px;
    white-space: nowrap;
    width: auto;
    padding-right:5px;
    text-align:center;
}
div#menuJQ span {
    margin-top: 2px;
    padding-left: 15px;
    color: #fff;
    font: normal 13px Tahoma;
    background: none;
    line-height: 38px;  
    display: block;
    cursor: pointer;
    background-repeat: no-repeat;
    background-position: 95% 0;
    text-align: center;
}

/* menu::level1 */
div#menuJQ a {
    padding: 0 15px 0 0;
    line-height: 38px;
    height: 46px;
    _margin-right: 1px;
    background: none;
    font-weight:bold;    

}
div#menuJQ span {
    font-weight:bold; 
}
div#menuJQ a:hover{
    background-image: url(../includes/images/selected-sub.png);
    background-repeat: repeat-x;
    background-position: right -1px;    
    -background: url(../includes/images/selected-sub.gif) repeat-x right -1px; 
}
div#menuJQ li.current a,
div#menuJQ ul.menuJQ>li:hover>a {
    background-image: url(../includes/images/selected-sub.png);
    background-repeat: repeat-x;
    background-position: right -1px;  
    -background: url(../includes/images/selected-sub.gif)  repeat-x right -1px; 
}
div#menuJQ a:hover span{
      color: #000000;
}   
div#menuJQ ul.menuJQ>li:hover>a span {
      color: #000000;
}
div#menuJQ li {}
div#menuJQ li.last { background: none; }

/* menu::level2 */
div#menuJQ ul ul li {
    background-image: url(../includes/images/sep-sub.png);
    background-repeat: repeat-x;
    background-position: left bottom;
    margin: 0;
    padding: 0;
}
div#menuJQ ul ul li:hover {
    background-image: url(../includes/images/sub-item-hover.gif);
    background-color: #717171;
    background-repeat: repeat-x;
    background-position: left top;
}
div#menuJQ ul ul a {
      color: #000000;   
    height: auto;
    float: none;
    display: block;
    line-height: 25px;
    font-size: 13px;
    z-index: -1;
    padding: 6px 0 6px 0px;
    white-space: normal;
    width: 166px;
    margin: 0 0px 0 13px;
    background: none;
}

div#menuJQ ul ul a span {
    color: #000000; 
      padding: 0 3px;
    line-height: 25px;
    font-size: 13px;
    font-weight: normal;
    margin:0;    
}
div#menuJQ li.current ul a,
div#menuJQ li.current ul a span {
    background: none;
}
div#menuJQ ul ul a:hover {
    background: none;
  color: #fff;
}
div#menuJQ ul ul a:hover span {
  background: none;
  color: #fff;
}
div#menuJQ ul ul a.parent {
  background: url(../includes/images/submenu-pointer.png) no-repeat right top;
  -background: url(../includes/images/submenu-pointer.gif) no-repeat right top;  
  margin-right: -1px;
}
div#menuJQ ul ul a.parent span {
  padding-right: 26px;
}
div#menuJQ ul ul a.parent:hover {
  background: url(../includes/images/submenu-pointer-hover.gif) no-repeat right top;
  -background: url(../includes/images/submenu-pointer.gif) no-repeat right top;  
}
div#menuJQ ul ul a.parent:hover span {
}
div#menuJQ ul ul span {

    margin-top: 0;
    text-align: left;
}
div#menuJQ ul ul li.last { background: none; }
div#menuJQ ul ul li {
    width: 100%;
}

/* menu::level3 */

div#menuJQ ul ul div {
      width: 180px;
      padding: 0;
    background: url(../includes/images/subsubmenu-top.png) no-repeat 0px 0;
    -background: url(../includes/images/subsubmenu-top.gif) no-repeat 0px 0;      
    margin: -32px 0 0 198px !important;
    margin: -32px 0 0 176px;
}
div#menuJQ ul ul ul {
    padding: 11px 0px 9px 0px;  
    margin: 20px 0 0 0; 
}
div#menuJQ ul ul div li {
    position:relative;
    top:-10px;
}

/* lava lamp */
div#menuJQ li.back {
    background: url(../includes/images/selected-sub.png) no-repeat 0 0;
    -background: url(../includes/images/selected-sub.gif) no-repeat 0 0;    
    width: 5px;
    height: 46px;
    z-index: 8;
    position: absolute;
    padding: 0;
    margin: 0px 0 0 0;
}

div#menuJQ li.back .left {
    padding:0;
    width:auto;
    background: url(../includes/images/selected-sub.png) repeat-x right 0;
    -background: url(../includes/images/selected-sub.gif) repeat-x right 0;     
    height: 46px;
    margin: 0 0 0 5px;
    float: none;
    position: relative;
    top: 0;
    left: 0;
    visibility: visible;
} 
```

查询：

```
$(document).ready(function(){
    $(function() {
        $('#menuJQ > ul li').click(function(e) {
            e.preventDefault();
            $('ul:first', this).show("fast").siblings().hide("fast");
        });
    });
    $('.submenu').mouseleave(function() {
        $('ul', this).hide("fast");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:05:27.240

将 Javascript 更改为：

```
$(document).ready(function(){

    $('#menuJQ').on('click', 'li', function(e) {
        e.preventDefault();
        $('.submenu').find('ul').css('display', 'none'); //display none all submenus
        $('ul:first', this).show("fast").siblings().hide("fast");
    });

    $('.submenu').on('mouseleave', 'ul', function(e) {
        e.preventDefault();
        $(this).hide("fast");
    });

}); 
```

这是一个 JS 小提琴更新：http: [//jsfiddle.net/2SC5G/3/](http://jsfiddle.net/2SC5G/3/)

# php - 添加到 mysql 列而不是替换？

> ID：14905228
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:46:32.333
> 
> 标签：php, mysql

我想为 mysql 表列添加一个额外的值，例如：

“照片”字段中已经有一个图像名称，但我想使用 php 在字段中添加另一个图像名称。

我以为 INSERT 只会将它添加到顶部，但它似乎替换了现有的图像名称。我想避免选择当前字段值，添加新值并尽可能重新插入。

谢谢！

代码：

php:

```
$query = "INSERT INTO `listings-rent` (photos) VALUES ('$fileName') WHERE id = '$insertID'";
mysqli_query($mysqli, $query); 
```

问题是这替换了“照片”列中的现有值，而不是添加到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:52:10.253

**强烈建议不要**在同一列中保留多个值。但这当然是可能的。

```
UPDATE `photos` SET imagename = CONCAT(imagename, ",", $second_name) WHERE id=$insertID' 
```

然后，您将`explode`在 PHP 中使用来获取字符串数组，例如：

```
array("image1.jpg", "image2.jpg") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:53:24.477

您使用 WHERE 语句插入。这行不通。

尝试：

```
 $query = "INSERT INTO `listings-rent` (photos,id) VALUES ('$fileName', $insertID)";
mysqli_query($mysqli, $query); 
```

# jquery - 如果部分显示，则完全隐藏 div

> ID：14905229
> 
> 赞同：0
> 
> 时间：2013-02-15T23:46:32.870
> 
> 标签：jquery, html, css, layout, stylesheet

我有一个里面`container`有多个的酒吧`divs`。一些 div 喜欢`.first`有足够的宽度来显示所有内部文本。但有些人喜欢`.third`只显示部分文字。

我想：

1.  无论宽度如何，都显示父 div ( `.first`, `.second`, ,...)`.third`
2.  但是`.text`div 只有在完全显示时才可见。如果它的一部分溢出，那么它必须是完全不可见的。
3.  所有的父 div 都有不同的宽度和灵活性。我不知道也不能分配固定宽度，因为可能还有更多。困难的部分是其中的文字。
4.  在我想使用 .js 作为最后手段之前首选 CSS

[http://jsfiddle.net/qhoc/paYuV/3/](http://jsfiddle.net/qhoc/paYuV/3/)

![在此处输入图像描述](../Images/c111f6321e108249f780eea472d58cb2.png)

谢谢您的帮助。

**更新 1：**

**理由（为什么）：**这用于具有多个 div/图像的主页，例如[http://www.flickr.com/photos/ishotyourdesign/4636952172/in/photostream/](http://www.flickr.com/photos/ishotyourdesign/4636952172/in/photostream/)。当鼠标悬停在每张图片上时，会有`.text`. 但是有些图像不会以全尺寸显示（被推到屏幕外），文本不应显示在`hover`. 只要用户看不到它，如何`.text`隐藏并不重要。

# java - Solr - 如何区分 to* 和 to *

> ID：14905230
> 
> 赞同：0
> 
> 时间：2013-02-15T23:46:46.697
> 
> 标签：java, solr, lucene, solrj

我的`Solr 4.0`设置中有以下索引文档，其标题字段包含文档-

1.  去工作
2.  拓扑
3.  ... <更多>

我的标题字段为`solr.StrField`（字符串）。我也有另一个类型字段中`copyField`的字段，带有标记 器和过滤器。`title``title_token``solr.TextField``StandardTokenizerFactory``LowerCaseFilterFactory`

当用户搜索 just`To`时，为了获取以`title`开头的文档`To`，我查询`Solr`. `title:To*`工作正常。显示文档 1 和 2。

但是，当用户搜索`To`（在 To 之后有一个空格）时，我将此查询发送到`Solr`like `title:To *`（在 To 和 * 之间有一个空格）。理想情况下，应该只显示第一个文档。但是，所有文档都会显示。

当我查询`title:To *`时 `&debugQuery=true`，查询被解析为`"parsedquery_toString":"title:to title:*"`.

由于`title:*`会显示所有文件，所以显示所有文件。

我如何查询`To *`哪个会给我所有`title`以（To 之后有一个空格）开头`To`的文档，在这种情况下应该显示文档 1？

我在跑步`Embedded Solr server`中使用跑步。我用来查询和获取结果。`Web App``Tomcat``solrj`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:48:23.607

您应该转义空格`field:to\ *`，以便形成的查询是`title:to *` 否则它将匹配所有文档。

还有[通配符查询](http://lucidworks.lucidimagination.com/display/lweug/Wildcard+Queries)：-
请注意，引用的短语中不支持通配符。它们将被视为空白。

在前缀、通配符和模糊搜索中，不对搜索词进行文本分析。
因此`To*`，如果您使用小写过滤器，则不会匹配索引文档。

# javascript - 如何防止使用键盘提交表单（尤其是空格键）

> ID：14905236
> 
> 赞同：1
> 
> 时间：2013-02-15T23:47:25.623
> 
> 标签：javascript, jquery, keyboard

我有一个 web 应用程序，在一个特定的屏幕上，我必须确保用户使用鼠标单击按钮，而不是只按 enter 或空格。

我写了这段代码：

```
$('button').keydown(function (e) {
    if (e.which === 10 || e.which === 13 || e.which === 32) {
        return false;
    }
}); 
```

但是，这仅适用于输入。仍然可以通过按按钮上的空格来提交表单。我只是想知道是什么导致了这种不一致以及如何解决它？

编辑：

小提琴示例：http: [//jsfiddle.net/billccn/3JmtY/1/](http://jsfiddle.net/billccn/3JmtY/1/)。选中第二个复选框并在焦点位于按钮上时按 Enter 将无效。如果我进一步禁用输入并将keydown捕获扩展到整个表单，则无法使用输入来提交表单。

编辑2：

我确实有一个备份计划，它用链接甚至普通 div 替换按钮，并使用点击事件以编程方式提交表单。但是，需要额外的工作才能使它看起来像一个按钮，所以我宁愿使用一个按钮是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:49:32.310

刚刚发现：处理空间（32）`keyup`将阻止点击事件。

更新小提琴：http: [//jsfiddle.net/3JmtY/2/](http://jsfiddle.net/3JmtY/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:55:29.410

错过了您的问题的重点。经过一番谷歌搜索，如果发现以下技巧：

将事件绑定`keypress`到您的 from 并收听它的键码。如果键码为`13` (enter)，则阻止所有默认操作 ( `event.preventDefaul()`) 并阻止进一步的事件冒泡 ( `return false;`)。

她是一个提琴手代码示例：

HTML：

```
<form id="target" action="destination.html">
    <input type="text" value="Hello there" />
    <input type="submit" value="Go" />
</form>
<div id="other">Trigger the handler</div> 
```

JavaScript：

```
$('#target').keypress(function (event) {
    var code = event.keyCode || event.which; 
  if (code  == 13) {               
    event.preventDefault();
    return false;
  }
});

$('#target').submit(function (event, data2) {
    debugger;
    alert('test');
    return false;
}); 
```

提琴手：http: [//jsfiddle.net/ggTDs/](http://jsfiddle.net/ggTDs/)

请注意，单击输入时不会提交表单！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T06:44:31.550

使用下面的代码。13 为 Enter 键，32 为空格键。

```
$("#form_id").on('keydown keyup keypress', function( e ) {

    if ( e.keyCode == 13 || e.which == 13 || e.which == 32 ) {
        e.preventDefault();
        return false;
    }
}); 
```

# g++ - g ++编译错误：对存在的共享库函数的未定义引用

> ID：14905239
> 
> 赞同：15
> 
> 时间：2013-02-15T23:48:04.020
> 
> 标签：g++, shared-libraries, ld, hdf5, undefined-reference

我最近在 ubuntu 机器上安装了**hdf5**库，现在无法链接到导出的函数。我写了一个简单的测试脚本**readHDF.cpp**来解释这个问题：

```
#include <hdf5.h>

int main(int argc, char * argv[])
{
  hid_t     h5_file_id = H5Fopen(argv[1], H5F_ACC_RDWR, H5P_DEFAULT);
  return 0;
} 
```

编译命令是

```
g++ -Wl,-rpath,$HOME/hdf5/lib -I$HOME/hdf5/include \
    -L$HOME/hdf5/lib -l:$HOME/hdf5/lib/libhdf5.so readHDF.cpp 
```

返回以下错误

```
/tmp/cc6DXdxV.o: In function `main':  
readHDF.cpp:(.text+0x1f): undefined reference to `H5check_version'  
readHDF.cpp:(.text+0x3c): undefined reference to `H5Fopen'  
collect2: ld returned 1 exit status 
```

我很困惑，因为**nm**命令似乎说该函数已被导出：

```
nm -C $HOME/hdf5/lib/libhdf5.so | grep H5check_version 
```

返回

```
0000000000034349 T H5check_version 
```

和类似的结果`H5Fopen`。对可能出了什么问题有任何想法吗？不确定它是否有帮助，但如果我注释掉`H5Fopen`脚本的一部分，那么它编译得很好：

```
#include <hdf5.h>

int main(int argc, char * argv[])
{
hid_t     h5_file_id;// = H5Fopen(argv[1], H5F_ACC_RDWR, H5P_DEFAULT);
return 0;
} 
```

服务器上还安装了多个版本的 hdf5，供各种 python 模块使用，例如 h5py 和表，但我无法让它们中的任何一个工作，所以我在本地目录中安装了这个版本并更改了 rpath 选项对于 g++ 链接器。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-16T22:26:11.230

好的，解决了。问题在于 -lhdf5 在编译命令中的位置。显然 -lhdf5 应该放在 readHDF.cpp 之后。例如`g++ -Wl,-rpath=$HOME/hdf5/lib -L$HOME/hdf5/lib -I$HOME/hdf5/include readHDF.cpp -lhdf5`，将编译没有问题，但`g++ -Wl,-rpath=$HOME/hdf5/lib -L$HOME/hdf5/lib -I$HOME/hdf5/include -lhdf5 readHDF.cpp`会因未定义的引用错误而失败。有趣的是，这只是 Ubuntu 12.04 的问题，因为两个编译命令都适用于 Ubuntu 10.04。

在这篇文章中找到了带有解释的答案：

[即使 nm 指示此符号存在，对符号的未定义引用](https://stackoverflow.com/questions/10456581/undefined-reference-to-symbol-even-when-nm-indicates-that-this-symbol-is-present)

我想在脚本之后放置 -lXXX 是更安全的做法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-25T00:51:08.130

这不是错误。请参阅 [C++ 共享库未定义对 `FooClass::SayHello()' 的引用](https://stackoverflow.com/questions/12748837/c-shared-library-undefined-reference-to-fooclasssayhello)

“最新版本的 GCC 要求您按照它们相互依赖的顺序放置目标文件和库......”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:02:22.180

你忘了`-lhdf5`输入编译命令。另外，也不需要`-l:$HOME/hdf5/lib/libhdf5.so`

这应该有效：`$ g++ -Wl,-rpath,$HOME/hdf5/lib -I$HOME/hdf5/include -L$HOME/hdf5/lib -lhdf5 readHDF5.cpp`

# javascript - 如何防止小书签自动重新加载页面？

> ID：14905240
> 
> 赞同：1
> 
> 时间：2013-02-15T23:48:07.637
> 
> 标签：javascript, seo, bookmarklet

我正在试用这个书签

```
javascript:window.prompt("Title: " +document.title.length+ "/69\n\n" +document.title+ "\n\nCopy Title to clipboard: Ctrl+C, Enter",document.title); 
```

我正在尝试获取页面标题以及字符数以及将其复制到剪贴板的简单方法，但由于某种原因，在显示所需信息后，页面重新加载

关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:51:38.620

将 void(0) 添加到小书签的末尾

> javascript:window.prompt("标题: " +document.title.length+ "/69\n\n" +document.title+ "\n\n复制标题到剪贴板: Ctrl+C, Enter",document.title);void (0);

# c - 将初始化器向下转换为指针

> ID：14905243
> 
> 赞同：5
> 
> 时间：2013-02-15T23:48:41.637
> 
> 标签：c, casting, initialization

为什么这不起作用？是否有可能做一些创造性的演员来让它发挥作用？

```
1: const char* yo1 = "abc";
2: const char* yo2 = { 'a', 'b', 'c', '\0' }; // <-- why can't i do this?
3: printf("%s %s\n", yo1, yo2); 
```

结果：分段错误

第 2 行没有做我期望它做的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T23:51:56.170

你可以做：

```
const char* yo2 = (char [4]) { 'a', 'b', 'c', '\0' }; 
```

这是有效的，将实现你想要的。请注意，它不等同于：

```
const char* yo2 = "abc": 
```

在前一种情况下，when`yo2`在文件范围内声明：复合文字数组具有静态存储持续时间，但 when`yo2`在块范围内声明，复合文字具有自动存储持续时间。

在后一种情况下，`"abc"`是一个字符串文字并且具有静态存储持续时间（文件范围或块范围）。

您还可以使用数组而不是指针：

```
 const char yo2[] = { 'a', 'b', 'c', '\0' }; 
```

关于你的例子。在 C 中：

```
const char* yo2 = { 'a', 'b', 'c', '\0' }; 
```

无效，您的编译器将其解释为：

```
const char* yo2 = (char *) 'a'; 
```

的值`'a'`不是指针值（地址），因此取消引用会`yo2`调用未定义的行为。

# gwt - GWTEventService 客户端创建监听器失败

> ID：14905255
> 
> 赞同：1
> 
> 时间：2013-02-15T23:50:15.803
> 
> 标签：gwt, push, event-listener

我正在尝试运行 GWTEventService 2.1.0 和 GWT 2.6 附带的 hellogwteventservice。我将代码导入到 Eclipse 中，以便可以通过 Eclipse GWT 插件运行。

但是，在客户端模块上，当调用以下行时抛出异常，并且我收到错误说明初始化 GWTServiceEvent 失败。

```
theRemoteEventService.addListener(ServerGeneratedMessageEvent.SERVER_MESSAGE_DOMAIN,
    new RemoteEventListener() {

        public void apply(Event anEvent) {
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:52:23.643

最新版本不是 GWT 2.5 吗？无论如何，您提到的 GWTEventService 的最新版本是 2.1.0。然而，这使用了一个较旧的 gwt-servlet-2.1，它与一个 gwt 使用 gwt-servlet-2.5 不兼容。所以你有2个选择：

1）回到GWT 2.1（不推荐）

2) 构建最新版本的 GWTEventService，因为它们在最新源中包含 GWT 2.5 支持。

注意：添加 IDE 抛出的错误可能有助于进一步说明问题

# javascript - 用 jquery 获取 inputString

> ID：14905260
> 
> 赞同：0
> 
> 时间：2013-02-15T23:50:45.487
> 
> 标签：javascript, jquery, html

我正在将这段代码更改为 jquery，并且我想获取 inputString。这是如何用 jquery 完成的。我想我应该使用 .val() ，但我看不出它适合哪里。谢谢

```
$(document).ready(function() {
   $("#email").keyup(function() {

      if(inputString.length == 0) {
         //do something

      }
   });
});

     <input type = "text" id = "email"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:51:48.217

除了你可以使用`$(this).val()`，但以下方式更快：

```
$("#email").keyup(function() {
    var inputString = this.value;
    // ...
}); 
```

# java - Java 类和 ArrayList 说明

> ID：14905262
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:51:16.483
> 
> 标签：java, arrays, list, class, arraylist

我创建了一个 Java 类，我正在尝试学习如何`ArrayList`工作。

假设我有一个名为`Complex`. 在那个类中，我们有`Houses`等`Employees`，所有这些都是单独的类。

如果我想创建一个`ArrayList`我会怎么做？

元素的数量是动态的，所以当有人说添加新房子时，我会调用那个询问与房子有关的问题的方法，然后它将所有这些都添加到我假设的列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:57:52.743

要创建一个`ArrayList`包含类型对象的对象`House`，您可以执行以下操作：

```
ArrayList<House> houseList = new ArrayList<House>();

houseList.add(new House()); 
```

遍历列表中的所有项目

```
for(House house:houseList){
   // do something with the house object
} 
```

请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)以了解其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:01:28.703

尝试这个。我会把主要的写作留给你；）

```
import java.util.ArrayList;

public class Complex {
    private ArrayList<House> houses;
    private ArrayList<Employee> employees;

    public void addEmployee(String firstName, String secondName, boolean lazy){
        if(employees == null)
            employees = new ArrayList<Complex.Employee>();

        employees.add(new Employee(firstName, secondName, lazy));
    }

    public void addHouse(String color, boolean withRoof){
        if(houses == null)
            houses = new ArrayList<Complex.House>();

        houses.add(new House(color, withRoof));
    }

    class House{
        private String color;
        private boolean withRoof;
        public String getColor() {
            return color;
        }
        public void setColor(String color) {
            this.color = color;
        }
        public boolean isWithRoof() {
            return withRoof;
        }
        public void setWithRoof(boolean withRoof) {
            this.withRoof = withRoof;
        }
        public House(String color, boolean withRoof) {
            super();
            this.color = color;
            this.withRoof = withRoof;
        }

    }

    class Employee{
        private String firstName;
        private String secondName;
        boolean lazy;
        public String getFirstName() {
            return firstName;
        }
        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }
        public String getSecondName() {
            return secondName;
        }
        public void setSecondName(String secondName) {
            this.secondName = secondName;
        }
        public boolean isLazy() {
            return lazy;
        }
        public void setLazy(boolean lazy) {
            this.lazy = lazy;
        }
        public Employee(String firstName, String secondName, boolean lazy) {
            super();
            this.firstName = firstName;
            this.secondName = secondName;
            this.lazy = lazy;
        }

    }
} 
```

# python - 使用 XPath 选择另一个节点时，如何引用当前节点的子节点的值？(DDEX 相关)

> ID：14905263
> 
> 赞同：1
> 
> 时间：2013-02-15T23:51:18.247
> 
> 标签：python, xml, xpath, ddex

考虑这个 XML 结构，一个 DDEX 标准的简化版本：

```
<doc>
<master>
 <ResourceInfo>
  <Name>Foo</Name>
  <Seq>1</Seq>
 </ResourceInfo>
 <ResourceInfo>
  <Name>Bar</Name>
  <Seq>2</Seq>
 </ResourceInfo>
</master>
<track>
 <Resource>
  <Name>Foo</Name>
 </Resource>
</track>
<track>
 <Resource>
  <Name>Bar</Name>
 </Resource>
</track>
</doc> 
```

我想选择 ResourceInfo 节点，`<master>`其中的子节点与`<Name>`每个轨道节点的名称的文本值匹配，以获取 Seq 编号。

我可以通过获取每个轨道的 lxml 树并明确请求`<ResourceInfo>`' 来直接这样做：

```
track.xpath('/doc/master/ResourceInfo/Seq[../Name[text()="Foo"]]') 
```

但这假设我知道每首曲目的名称并且可以提前明确说明。我希望能够对此进行愚蠢的映射，并以某种方式将 xpath 中的“Foo”替换为`text()`对当前曲目资源名称的一些引用。

`text()`这有点像在 master 中的 Name上加入轨道和资源，并`text()`在每个轨道中加入 Name。有没有一种简单的方法可以用 XPath 做到这一点？

我正在尝试遍历每个轨道，并从轨道中拉出 Seq。因此，我不能明确要求“Foo”。我需要反省 - “给我 Seq，它是 master 中节点的兄弟节点，其值与“中的当前节点`<Name>`匹配。`<Name>``<track>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:24:30.210

我不确定我是否完全理解，但如果当前上下文是：

```
/doc/track/Resource/Name 
```

并且您使用以下 XPath：

```
/doc/master/ResourceInfo[Name = current()]/Seq 
```

你应该得到相同`Seq`的。`ResourceInfo``Name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:21:55.253

阅读您的评论后，我现在了解您的目标。Uou 可以简单地使用 Python 进行连接：

```
from lxml import etree

doc = etree.parse('sample.xml')

# gather resources
resources = {}
for element in doc.xpath('/doc/master/ResourceInfo'):
    name = element[0].text
    seq  = element[1].text
    resources[name] = seq

# gather tracks
tracks = []
for element in doc.xpath('/doc/track/Resource/Name'):
    name = element.text
    tracks.append(name)

# join:

for track in tracks:
    print 'Track: %s, seq: %s' % (track, resources.get(track))

# returns: 
# Track: Foo, seq: 1
# Track: Bar, seq: 2 
```

上一个答案：

XML 格式不正确：

```
<doc>
  <master>
    <ResourceInfo>
      <Name>Foo</Name>
      <Seq>1</Seq>
    </ResourceInfo>
    <ResourceInfo>
      <Name>Bar</Name>
      <Seq>2</Seq>
    </ResourceInfo>
  </master>
  <track>
    <Resource>
      <Name>Foo</Name>
    </Resource>
  </track>  <!-- was missing backslash -->
  <track>
    <Resource>
      <Name>Bar</Name>
    </Resource>
  </track>
</doc> 
```

您的代码有效：

```
from lxml import etree

doc = etree.parse('a.xml')

for element in doc.xpath('/doc/master/ResourceInfo/Seq[../Name[text()="Foo"]]'):
    #print etree.tostring(element)
    print element.text  

# returns
# 1 
```

# ember.js - 无法使用 setupController 中的数据集渲染模板

> ID：14905264
> 
> 赞同：5
> 
> 时间：2013-02-15T23:51:30.847
> 
> 标签：ember.js

Emberjs v1.0.0-pre.4

车把 1.0.0.rc.2

我正在 ember 中建立一个 facebook 好友列表管理器。当我导航到`list/1/members`MembersRoute 填充 MembersController 的数据时没有出现。

MembersRoute 将呈现朋友模板，该模板通常显示我们所有的朋友，但在这种情况下仅显示选定列表的成员。

应用程序的路由器

```
App.Router.map(function () {
    this.route('instructions');
    this.route('friends');
    this.route('members', {path: '/list/:list_id/members'});
}); 
```

路线

```
App.MembersRoute = Ember.Route.extend({
    model: function () {
        var list = this.controllerFor('application').get('selectedList'),
            friends = list && list.get('members') || [];
        return friends;
    },
    setupController: function (controller, model) {
        var list = this.controllerFor('application').get('selectedList');
        controller.set('title', list.get('title'));
        controller.set('list', list);
        controller.set('content', model);
    },
    renderTemplate: function () {
        this.render('friends');
    }
}); 
```

朋友模板

```
<script type='text/x-handlebars' data-template-name='friends'>
  <h2>{{title}}</h2>
  <ul id='friends'>
    {{#each friend in controller}}
      <a href='#' {{action 'select' friend}}>
        <li {{bindAttr class='friend.isSelected:selected'}}>
            <img {{bindAttr src='friend.imageUrl'}}/>
            <p>{{friend.name}}</p>
        </li>
      </a>
    {{else}}
      <h3>There are no friends in this list.</h3>
    {{/each}}
  </ul>
</script> 
```

申请模板

```
<script type='text/x-handlebars' data-template-name='application'>
      <div class='row'>
          <div class='span4'>
              {{render 'lists'}}
          </div>
          <div class='span8>
              {{outlet}}
          </div>
      </div>
</script> 
```

最后，数据存储和模型

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
});

App.List = DS.Model.extend({
    members: DS.hasMany('App.Friend'),
    name: DS.attr('string'),
    isSelected: DS.attr('boolean'),
    num_of_members: function () {
        var num = this.get('members').toArray().length,
        str = num + ' Member';
        return num === 1 ? str : str + 's';
    }.property('members'),
    title: function () {
        return 'Friends in ' + this.get('name');
    }.property('name'),
    toggleSelected: function () {
        this.set('isSelected', !this.get('isSelected'));
        return this;
    }
});

App.Friend = DS.Model.extend({
    lists: DS.hasMany('App.List'),
    name: DS.attr('string'),
    imageUrl: DS.attr('string'),
    isSelected: DS.attr('boolean'),
    toggleSelected: function () {
        this.set('isSelected', !this.get('isSelected'));
        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-08T22:12:42.063

真的你应该只使用 _super 来实现默认实现。

```
setupController: function(controller, model) {
  this._super(controller, model)
  controller.set('something', 'some value');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T04:32:16.733

不确定这是否有帮助，但看起来在定义`model`时被忽略或丢失。`setupController`我不知道这是否是 EmberJS 的错误。

我的解决方法是直接设置模型：

```
model: function() {
   return this.modelFor('todos');
} 
```

可以通过以下方式扩展：

```
setupController: function(controller) {
  controller.set('something', 'some value');
  controller.set('model', this.modelFor('todos'));    // this was originally in the model function
} 
```

甚至更好：

```
setupController: function(controller, model) {
  controller.set('something', 'some value');
  controller.set('model', model);    // this was originally in the model function
} 
```

# c# - 如何以编程方式访问公共录制的电视？

> ID：14905274
> 
> 赞同：0
> 
> 时间：2013-02-15T23:52:13.450
> 
> 标签：c#, .net, c#-4.0, .net-4.5

如何以编程方式引用`C:\Users\Public\Public Recorded TV`？

有`Environment.SpecialFolder`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:18:35.933

肯定有比这更直接（并且支持本地化）的方法吗？

```
string PublicRecordedTV = Path.Combine(new DirectoryInfo(
  Environment.GetFolderPath(Environment.SpecialFolder.CommonDocuments)
).Parent.FullName, "Recorded TV"); 
```

# for-loop - Python inFile 带循环

> ID：14905275
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:52:17.227
> 
> 标签：for-loop, python-3.x, average, load-data-infile

我正在尝试使用 python 打开一个文件，以便从文件 input.txt 中获取平均值。取平均值后，它们必须显示在每个人的姓名之后，例如

```
<student>'s score is <avg> bacons. 
```

我们还没有在课堂上讨论过这个，所以我不太确定我在做什么。我假设我们应该使用循环，但我不确定我将如何实现它。

这是代码，它不断返回该 avg 作为无效语法：

```
def main():
    inFile = open("input.txt","r")
    numVals = int(inFile.readline())
    name = inFile.readline()
    number = float(int(inFile.readline().split())
    avg = float(int(number[0]* .3 + number[1]* .1 + number[2]* .6))
    print("name[0 , len(name)]'s Score is",avg,"bacons.")
    inFile.close()

main() 
```

输入文件包含

```
5
Amelia 
90 100 75 
George 
87 90 90 
Adam 
100 80 85 
Jenny
75 80 90 
Carl 
86 87 88 
```

对此的任何帮助将不胜感激。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T00:20:15.147

你的第一个问题是这一行：

```
number = float(int(inFile.readline().split()) 
```

你有四个`(`s，但只有三个`)`s。

因此，Python 期望表达式在下一行继续，但它看到一个`=`不能出现在表达式中间的 ，所以它引发了一个`SyntaxError`。

当你得到一条`SyntaxError`看起来非常好的线路时，有两件好事可以尝试。

首先，将该行分成更小的部分，将这些更小的部分输入到交互式解释器中，等等。

其次，一旦你确定那条线没问题，看看它上面的那条线并计算括号（以及括号和大括号）。一个好的编辑器可以更容易地发现这一点——或者只需在交互式解释器中输入该行；如果你还没有关闭所有的括号，它会给你一个`...`而不是`>>>`，这意味着它正在等待你完成上一行，而不是等待一个全新的行。

* * *

一旦你超过了那个，你就会得到 a `ValueError`，因为你试图调用你从 回来的三个字符串中`int`的 a 。那是行不通的；你必须打电话给每一个。所以，而不是这个：`list``readline``int`

```
numbers = float(int(inFile.readline().split())) 
```

做这个：

```
numbers = [float(int(number)) for number in inFile.readline().split()] 
```

如果您还没有学习列表推导，则必须使用循环来代替。例如：

```
numbers = inFile.readline().split()
for n in range(len(numbers)):
    numbers[n] = float(int(numbers[n])) 
```

顺便说一句，我不确定你为什么这样做`float(int(…))`。如果要将它们全部截断为整数值，则不需要`float`此处-将整数乘以 0.3 就可以了。如果要保留任何小数部分，则不需要`int`. 因此，只需使用其中一种。

你在下一行做同样的事情：

```
avg = float(int(number[0]* .3 + number[1]* .1 + number[2]* .6)) 
```

的结果`number[0]* .3 + number[1]* .1 + number[2]* .6`是`float`，例如`89.1`George。然后，您将其转换为`int`，这将为您提供`89`. 然后，您将其转换回`float`，得到`89.0`. 我无法想象这就是你想要的——你可能想要 unconverted `89.1`，或者截断`89`为`int`，而不是`89.0`误导`float`。

* * *

此外，你打印出来的东西的方式很奇怪，我不确定它应该做什么：

```
print("name[0 , len(name)]'s Score is",avg,"bacons.") 
```

这将打印如下内容：

```
name[0 , len(name)]'s Score is 89.0 bacons. 
```

如果要打印变量的值，请不要将其放在引号中：

```
print(name, "'s Score is",avg,"bacons.") 
```

但是无论你想做什么，`0`而且`len(name)`……好吧，我不知道你想做什么，所以我无法解释如何去做。

无论如何，这将打印：

```
George 's Score is 89.0 bacons. 
```

你可能不想要那个空间`George`，对吧？解决此问题的最佳方法是使用字符串格式：

```
print("{}'s Score is {} bacons'".format(name, avg)) 
```

如果你还没有学过，老实说，我认为最好的办法就是处理多余的空间，或者重写句子，这样就不成问题了：

```
print(name, 'has a score of', avg, 'bacons.') 
```

或者，当然，在你的老师开始之前自己学习它。没那么复杂。

* * *

最后，当你超越这一点时，你只会阅读一个名字和数字列表，而不是`numVals`一文不值。为此，您需要一个循环：

```
def main():
    inFile = open("input.txt","r")
    numVals = int(inFile.readline())
    for i in range(numVals):
        name = inFile.readline()
        # ... the rest of your code that happens for each player
    # ... the code that happens after all the players, like inFile.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:36:20.043

编辑***我最后想通了。我的代码没有工作的原因有很多，主要是 b/c 我不知道缩进有多重要

```
def main():

    inFile = open("input.txt","r")
    numVals = int(inFile.readline())

    for i in range(numVals):

        name = inFile.readline().replace("\n","")
        numbers = inFile.readline().split()
        avg = float(numbers[0])*.3 + float(numbers[1])*.1 + float(numbers[2])*.6
        print(name,'has a final score of',avg)

    inFile.close()
main() 
```

# python - Python - 在网站源中搜索并在找到单 词时打印出网站

> ID：14905276
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:52:21.403
> 
> 标签：python, url

我正在尝试创建一个 python 脚本（但直到现在还没有结果）以从 url 列表中返回包含源中一个单词的 url，在我的情况下是两种类型的 url，其中包含其中一些

```
"var dle_act_lang   = ["Yes", "No", "Enter", "Cancel", "Save"];" 
```

其中一些：

```
"var dle_act_lang   = ["Да", "Нет", "Ввод", "Отмена", "Сохранить"];" 
```

**这两行是我正在搜索的单词，而不是单独的单词**

请问有人可以帮我创建这个脚本吗？我想要的只是通过这两个代码行对这些 url 进行排序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:07:30.597

首先，您有一堆 URL，并且您想获取它们引用的页面的来源：

```
urls = ['http://example.com/foo', 'http://example.com/bar']
pages = {url: urllib2.urlopen(url).read() for url in urls} 
```

现在，您想找出其中哪些包含来自`dle_act_lang`. 一种方法是将所有内容转换为`set`s 并仅使用 set 交集：

```
pagesets = {url: set(page.split()) for url, page in pages.iteritems()}
wordset = set(dle_act_lang)

matching_urls = [url for url, pageset in pagesets.iteritems() if wordset & pageset] 
```

而已。

然而，虽然这回答了您开始的问题，但到问题的结尾，您似乎要求的是完全不同的东西：“我想要的只是通过这两个代码行对这些 url 进行排序！” 我不知道您所说的“按这两条代码行排序”是什么意思，但是无论您的意思是，在您要求的内容或此代码中都没有进行排序。

* * *

从您以后的编辑来看，您可能正在搜索一行 JavaScript 代码，如下所示：

```
"var dle_act_lang   = ["Yes", "No", "Enter", "Cancel", "Save"];" 
```

所以，不需要创建一个`wordset`然后做`wordset & pageset`；只需将 JS 代码和页面保留为旧字符串并使用`in`运算符：

```
urls = ['http://example.com/foo', 'http://example.com/bar']
pages = {url: urllib2.urlopen(url).read() for url in urls}
jscode = '''"var dle_act_lang   = ["Yes", "No", "Enter", "Cancel", "Save"];"'''
matching_urls = [url for url, pages in pages.iteritems() if jscode in page] 
```

* * *

`set`但是，如果这些实际上是完整的行，并且它们有很多，那么您可能希望使用s of *lines*而不是*words* ，而不是为要搜索的每一行代码重复，然后返回到某些内容就像我给出的第一个例子：

```
urls = ['http://example.com/foo', 'http://example.com/bar']
pages = {url: urllib2.urlopen(url).read() for url in urls}
pagesets = {url: set(line.strip() for line in page.split('\n')) 
            for url, page in pages.iteritems()}
jscodeset = {'''"var dle_act_lang   = ["Yes", "No", "Enter", "Cancel", "Save"];"''',
             '''"var dle_act_lang   = ["Да", "Нет", "Ввод", "Отмена", "Сохранить"];"''']}
matching_urls = [url for url, pageset in pagesets.iteritems() if wordset & pageset] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:14:56.267

```
urls = ['http://yahoo.com', 'http://google.com', 'http://facebook.com', 'http://turnplay.com']
words = ['book', 'play']

matches = []

for url in urls:
   for word in words:
      if word in url:
         matches.append(url)

print matches  # <== ['http://facebook.com', 'http://turnplay.com'] 
```

# chef-infra - Chef 守护进程每 30 分钟运行一次

> ID：14905278
> 
> 赞同：5
> 
> 时间：2013-02-15T23:52:28.427
> 
> 标签：chef-infra

我了解 Chef 是基于拉取的，因为它检测到食谱中的任何更改并使用 Chef 客户端安装更改。我们使用 chef 来启动 EC2 实例，但 chef-client 作为守护程序每 30 分钟运行一次，并再次运行所有食谱，从而对某些服务造成不必要的更改。我想知道有哪些选项可以改变这一点并按需运行厨师客户端。

以下是我到目前为止想到的选项，

1.  将 chef-client 食谱上的间隔时间更改为非常高的时间，以便守护程序不会经常运行。
2.  部署 EC2 实例后，杀死 chef daemon ssh 甚至可能是 chef-recipe。

另外我相信厨师客户端每周安排一次日志轮换，这将再次重新启动厨师客户端。关于如何避免这种基于拉的行为的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T10:11:31.850

首先：

无论厨师运行多少次，您的厨师食谱都应将您的节点设置为 1 和相同的配置。您也不应该自行重新启动任何服务。如果更改了配置文件，则应通过配置文件通知此行为。例如：

```
service 'apache2' do
  action [:enable, :start]
end

template '/etc/apache2/httpd.conf' do
  action :create
  [...]
  notifies, :restart, 'service[apache2]' #this notification will launch, only if the file has changed
end 
```

您还可以通过运行来禁用 chef-client 守护进程`chef-client --once`。这样，厨师将配置节点并将 self 从 cron 中删除。因此，将来它将仅按需手动运行。

但是您更大的问题实际上是您的主厨客户端运行会导致每次运行都会更改您的某些服务。你应该先解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:50:46.253

我同意 Draco 关于解决潜在问题的说法，但如果你想阻止 chef-client 每 30 分钟运行一次，你应该能够从你的运行列表中删除 chef-client::service 配方。请参阅[chef-client README](https://github.com/opscode-cookbooks/chef-client#recipes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-25T19:52:15.767

如果您正在从 Chef 数据包构建配置文件，您将需要对搜索结果进行排序，因为这些结果在不同的运行中*不会*以相同的顺序返回。如果您不对结果进行排序，您的 Apache 服务将无缘无故地频繁重启。

确保您的 chef-client 运行对于相同的数据是幂等的。不能强调这一点。

# java - 引用另一个类作为实例变量？

> ID：14905282
> 
> 赞同：1
> 
> 时间：2013-02-15T23:53:16.843
> 
> 标签：java, class, methods

我正在寻求一些帮助来利用 Java 中另一个类的方法。我创建了一个具有一些 getter 和 setter 方法的类。getter 方法包​​含一个 switch 语句，该语句具有一个传入的参数“i”，该参数确定 switch 语句的大小写。

现在在我的主程序中，我希望使用该类方法，但由于某种原因，我得到了 java.lang.nullpointerexception。

我的主程序中的代码如下所示：

```
public class Hangman extends ConsoleProgram {

    public void run() {

        String name = word.getWord(5);

        println(name);
    }

    /* Private Instance Variable */
    private HangmanLexicon word; // Creates a new lexicon from the HangmanLexicon class.
    private RandomGenerator rgen = RandomGenerator.getInstance(); // Creates a new random generator instance. 
```

}

所以你可以说我创建了私有 ivar，但由于某种原因它不起作用。任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:55:10.280

在您显示的代码中，`word`从未给过一个值，因此它将是`null`

你可能需要类似的东西：

```
 private HangmanLexicon word = new HangmanLexicon(); 
```

或者您可能需要获取一个 HangmanLexicon 对象以其他方式放入您的实例变量中。

*注意*如果您是为斯坦福 CS 课程（或类似的大学课程）执行此操作，我通过搜索在线找到了 HangmanLexicon 的来源。*如果且仅当这与我找到的代码相同时，*上面的行才会起作用。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:55:20.813

创建变量 us 还不够：您还必须为它分配一些东西。

```
private HangmanLexicon word = /*put something here*/; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:55:54.430

您还没有初始化`word`变量。所以它有默认值：null。并且在空对象上调用方法会导致 NullPointerException。

阅读一本关于 Java 的好书，或者[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/index.html)。这是您需要了解的基本内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T23:56:49.327

发生的原因`NullPointerException`是因为 word 没有分配值。`word`在使用它调用方法之前，您必须先赋值`getWord(5)`；

```
private HangmanLexicon word;
                        ^ 
```

像这样初始化或分配单词，如下所示

```
private HangmanLexicon word=new HangmanLexicon(); 
```*

# xml - 具有条件属性的 XSD

> ID：14905284
> 
> 赞同：0
> 
> 时间：2013-02-15T23:53:20.030
> 
> 标签：xml, xsd, xsd-validation

我想创建一个 XSD 文件，它可以根据其父节点的名称检查属性是否存在。知道我该怎么做吗？下面是我正在尝试做的一个例子。

Xml - AttrA 和 AttrB 是必需的，因为父节点是“A”

```
<A>
 <B AttrA="1" AttrB="2" />
</A> 
```

Xml - AttrB 和 AttrC 是必需的，因为父节点是“C”

```
<C>
 <B AttrB="2" AttrC="3" />
</C> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:13:46.357

最简单的方法是使 B 的一种或两种形式局部于其父级的复杂类型。如果 A 和 C 都是顶级元素，并且我们将 B 的两种形式都设为本地，例如，您可以这样写：

```
<xs:element name="A">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="B" type="B-in-A"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:element name="C">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="C" type="B-in-C"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

两种类型的 B-in-A 和 B-in-C 可以随意声明，例如

```
<xs:complexType name="B-in-A">
  <xs:sequence/>
  <xs:attribute name="AttrA" type="xs:integer"/>
  <xs:attribute name="AttrB" type="xs:integer"/>
</xs:complexType>

<xs:complexType name="B-in-C">
  <xs:sequence/>
  <xs:attribute name="AttrB" type="xs:integer"/>
  <xs:attribute name="AttrC" type="xs:integer"/>
</xs:complexType> 
```

在某些情况下，您可能希望为 B 声明一个泛型类型并从中派生出两种类型 B-in-A 和 B-in-C，以便它们彼此之间具有某种遗传关系；这取决于您是否有办法利用这种推导关系。

在 XSD 1.1 中，您还可以选择使用必需的 AttrB 和可选的 AttrA 和 AttrC 声明 B，然后对 A 和 C 的类型进行断言，以检查 A 中的 B 携带 AttrA 而不是 AttrC，反之亦然对于 C 中的 B。

哪种感觉更清晰和更简单可能取决于您是否将 B 的属性差异视为 (a) B 基于其上下文的行为差异，或 (b) 对 A 和/或 C 的约束采取要求其子项具有特定形式的形式。

# javascript - Jquery $(window).height() 在函数内部返回不正确的值

> ID：14905296
> 
> 赞同：2
> 
> 时间：2013-02-15T23:54:20.673
> 
> 标签：javascript, jquery, browser

当我在任何函数之外（例如在脚本的开头）调用 $(window).height() 时，它会给出正确的高度。但是当我在任何函数中调用它时，例如

```
$(window).resize(function (){

    window_height = $(window).height();
}); 
```

它总是给出相同的错误结果（2100）。它在其他功能中执行此操作（不仅仅是这个）。我正在 Chrome 中对此进行测试（不确定其他浏览器是否出现问题）。

# linux - 禁用终端命令

> ID：14905298
> 
> 赞同：1
> 
> 时间：2013-02-15T23:54:51.467
> 
> 标签：linux, bash, ubuntu-12.04, rm

我想`rm`在某些情况下禁用 except 。我写了一个`remove`在`.sh`文件中调用的函数，它通过了我想在实际调用之前强加的某些检查`rm`。但是，仍然可以进入终端并简单地调用`rm`函数而不是使用`remove`. 有没有办法禁用该`rm`功能，除非被调用`remove`？我希望它对登录终端的用户来说好像该`rm`功能不“存在”，所有“存在”的是删除功能。

甚至可能更进一步，当用户调用`rm`它时，它会在屏幕上打印一条声明说使用`remove`.

作为一个更广泛的问题，除了在某些情况下，有没有办法禁用终端命令？我知道我可以为`rm`需要 root 设置一个别名，但这是一种简单且不太方便的方法。

```
#!/bin/bash

function rm {
  if [ $# -le 0 ]; then
    echo "Error: no arguments specified."
  else
    hasDir=0
    for arg in "$@"; do
      if [ -d "$arg" ]; then hasDir=1; fi
    done

    ac="Action canceled."
    resp=("y" "n" "e")

    sure=" "
    while [ "$sure" != "y" ] && [ "$sure" != "n" ]; do
      read -p "PERMANENT ACTION.  Are you sure? (y/n): " sure
    done

    if [ "$sure" == "n" ]; then echo "$ac"; return; fi

    if [ $hasDir -eq 1 ]; then
      direc=" "
      validResp=0
      while [ $validResp -eq 0 ]; do
        read -p "Remove all sub-directories? (y/n/e): " direc
        for ans in "${resp[@]}"; do
          if [ "$direc" == "$ans" ]; then validResp=1; fi
        done
      done

      if [ "$direc" == "e" ]; then echo "$ac"; return; fi
    else
      direc="n"
    fi

    check=" "
    validResp=0
    while [ $validResp -eq 0 ]; do
      read -p "Verify removal of each file? (y/n): " check
      for ans in "${resp[@]}"; do
        if [ "$check" == "$ans" ]; then validResp=1; fi
      done
    done

    if [ "$check" == "e" ]; then echo "$ac"; return; fi

    if [ "$direc" == "n" ]; then
      if [ "$check" == "n" ]; then
        for file in "$@"; do
          if [ ! -d "$file" ]; then command rm -f "$file"; fi
        done
      else 
        for file in "$@"; do
          if [ ! -d "$file" ]; then command rm -i "$file"; fi
        done
      fi
    else
      if [ "$check" == "n" ]; then
        command rm -rf "$@"
      else
        command rm -ir "$@"
      fi
    fi
  fi    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T00:21:19.123

您可以覆盖`rm`（或任何其他命令）；`command`内置允许您在必要时访问原始命令。

```
rm () {
    # Do something in addition to removing the file

    command rm "$@"
} 
```

`command`禁用 shell 函数查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:21:46.673

如果您想捕获 的所有用途`rm`，那么有一种方法。但是，我必须提到这是一种肮脏的，不推荐的方式。

```
mv /bin/rm /bin/rm.bak
cp my_rm_script /bin/rm 
```

my_rm_script 应该包含对 /bin/rm.bak 的调用，而不是 /bin/rm。

这将捕获对 command 的所有调用`rm`。

但是，这不适用于busybox 类型的架构，其中二进制文件的名称也很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:12:19.607

这是一个解决方案，它有点奇怪，但完全按照您想要的方式工作。

`directory`在您的主文件夹中创建一个

`$~ mkdir ~/myrm`

`$~ cd ~/myrm`

创建指向二进制文件的`rm`符号`remove`链接

`$~ ln -s /path/to/remove rm`

现在，上面的命令将创建一个链接，该链接基本上`rm`指向`remove`您`remove`通过调用`rm`. 确保在`rm`else 使用时赋予可执行权限

`$~ chmod 0777 rm`

现在是时候将路径放入`$PATH`变量中了。

`$~ PATH=~/myrm/:$PATH`

确保它`~/myrm:$PATH`不是`$PATH:myrm`。所以现在每当你调用它时，它都会在目录中`rm`搜索并调用它。`rm``~/myrm`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T00:40:09.737

您可以使用在您的系统上[`dpkg-divert`](http://manpages.ubuntu.com/manpages/intrepid/en/man8/dpkg-divert.8.html)安装不同的。`rm`

另请参阅这篇文章[用 dpkg-divert 替换二进制文件以](http://www.debian-administration.org/articles/118)获取使用 shell 脚本的示例。

# c++ - 使用指针而不是迭代器擦除 std::list 中的元素

> ID：14905300
> 
> 赞同：0
> 
> 时间：2013-02-15T23:54:55.970
> 
> 标签：c++, list, sorting, pointers, priority-queue

如标题所述，我正在使用`std::list`. 我在`master.list`. 然后我使用 a`std::priority_queue`或其他调用`sortedList`来存储指向 my 中对象的指针，现在`master.list`它都在 this 中排序`sortedList`。因为它已排序，所以我可以使用`sortedList.pop()`.

问题是我怎样才能优雅地删除我原来的对象`master.list`

我想使用`erase`，但它只需要迭代器，而我只有指针。因为我要速度，这里真的不想用`remove`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T00:09:58.720

为什么不将迭代器存储在优先级队列中而不是原始指针中？由于您使用的是列表，因此您无需担心迭代器失效。然后你就可以使用`std::list::erase`. 存储迭代器的开销应该可以忽略不计，因为它只保存一个指向列表节点的指针。

```
typedef std::list<T> MyListT;
typedef std::priority_queue<MyListT::iterator> MyQueueT;

MyListT myList;
MyQueueT myQueue;

myList.push_front(T());
myQueue.push_back(myList.begin());

// Later...

MyListT::iterator itr = myQueue.front();
myQueue.pop_back();
myList.erase(itr); 
```

# php - 新线 在php中

> ID：14905305
> 
> 赞同：6
> 
> 时间：2013-02-15T23:55:31.077
> 
> 标签：php, nl2br

我目前在数据库中有很多笑话，这些笑话是用 nl2br() 格式化的，它产生......

```
This is just dummy text. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
<br /><br />
Vestibulum gravida justo in arcu mattis lacinia. Mauris aliquet mi quis diam euismod blandit ultricies ac lacus.
<br /><br />
Aliquam erat volutpat. Donec sed nisi ac velit viverra hendrerit.
<br />
Praesent molestie augue ligula, quis accumsan libero. 
```

我需要一个 php 函数来转换`<br /><br />`为 a `<p></p>`，如果只有 1`<br />`则不要管它。还修剪任何空白

所以最终的结果将是......

```
<p>This is just dummy text. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p>Vestibulum gravida justo in arcu mattis lacinia. Mauris aliquet mi quis diam euismod blandit ultricies ac lacus. </p>
Aliquam erat volutpat. Donec sed nisi ac velit viverra hendrerit.<br />
Praesent molestie augue ligula, quis accumsan libero. 
```

有人可以指出我正确的方向或给我一个简单的功能吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T00:00:06.047

使用 PHP 的字符串替换功能将所有内容替换`<br /><br />`为`</p><p>`. [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

示例代码：

```
$stringWithBRs = nl2br($originalString)
$stringWithPs = str_replace("<br /><br />", "</p>\n<p>", $stringWithBRs);
$stringWithPs = "<p>" . $stringWithPs . "</p>"; 
```

或者，您甚至可以在不调用 nl2br() 函数的情况下使用以下代码。

```
$stringWithPs = str_replace("\n\n", "</p>\n<p>", $originalString);
$stringWithPs = "<p>" . $stringWithPs . "</p>"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-29T17:39:40.107

只需直接转换原始字符串：

```
$text=str_replace("<br /><br />", "</p><p>", $original_string); 
```

在 HTML 中，像这样：

```
<p>
 <?php echo $text; ?>
</p> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-23T12:15:49.250

单线：

```
$sNewString = implode('</p><p>',explode('<br /><br />', nl2br($sOriginalString))) 
```

解释：

1.  将换行符转换为 br
2.  通过这些 br 将字符串拆分为数组
3.  通过在每个数组项之间粘贴 P 标签将数组粘回字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-26T09:19:01.903

```
$new = '';
foreach(explode("\n<br /><br />\n", $text) as $p) // split by double newlines
    $new.= "<p>$p</p>\n"; // and convert each part to a paragraph

// or if you want to keep it in a single line
$new = join(array_map(function($p){return "<p>$p</p>\n";}, explode("\n<br /><br />\n", $text))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-09T19:09:01.767

**试试看**

```
$old_string = preg_replace("/[\r\n]/","</p><p>",$old_string);
$new_string = "<p>" . $old_string . "</p>";
echo $new_string; 
```

# html - 滚动时如何隐藏横幅图像但将导航固定到顶部？

> ID：14905307
> 
> 赞同：1
> 
> 时间：2013-02-15T23:55:34.167
> 
> 标签：html, css

当用户向下滚动时，我试图让导航栏保持固定在浏览器的顶部。但是，我在导航上方有一个图像，我希望它也向上滚动，因此滚动时只保留导航栏。

造成这种情况的主要原因是，当窗口尺寸减小时，标识最终会覆盖屏幕的大部分，内容变得很难看清。

这就是我想要完成的：[http ://corp.ign.com/](http://corp.ign.com/)

这是我到目前为止所拥有的 JSfiddle：http: [//jsfiddle.net/cZKeG/](http://jsfiddle.net/cZKeG/)

HTML：

```
<div id="topWrapper">
    <a href="index.html">
        <header id="top_header">
            <h1>MacroPlay Games</h1>
        </header>
    </a>
    <nav id="topnav">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="video.html">Trailers</a></li>
        </ul>
    </nav>   
</div> 
```

CSS：

```
#topWrapper {
    /*border:1px solid #00ffff;*/
    background-color:#0d0d0d;
    text-align:center;
    position:fixed;
    z-index:9999;
    width:100%;
    max-width: 850px;
    margin: 0 auto; left:0px; right:0px;
    float:clear;
    background-image: url('bg5.jpg');    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:09:30.303

快速查看您提供的代码表明，当您只想修复 topnav 时，您正在修复整个 topWrapper

试试这个

```
#topnav {
/*border:1px solid #00ffff;*/
background-color:#0d0d0d;
text-align:center;
position:fixed;
z-index:9999;
width:100%;
max-width: 850px;
margin: 0 auto; left:0px; right:0px;
float:clear;
background-image: url('bg5.jpg'); 
```

}

# underscore.js - Underscore.js - 迭代对象并计算对象属性

> ID：14905310
> 
> 赞同：2
> 
> 时间：2013-02-15T23:55:50.920
> 
> 标签：underscore.js

我刚刚开始使用 Underscore.js，希望能得到一些关于如何执行以下操作的建议。我有以下 JSON 已被解析并存储在 parsedJson 变量中：

```
{
    "name": {
        "cinema": {
            "size": {
                "w": 256,
                "h": 200
            },
            "frame": {
                "x": 0,
                "y": 0,
                "w": 256,
                "h": 200
            }
        },
        "dirt": {
            "size": {
                "w": 128,
                "h": 64
            },
            "animaton": {
                "frames": 0,
                "speed": 0
            },
            "frames": {
                "frame1": {
                    "x": 128,
                },
                "frame2": {
                    "x": 128,
                },
                "frame3": {
                    "x": 128,
                },
                "frame4": {
                    "x": 128,
                }
            }
        },
        "grass": {
            "size": {
                "w": 128,
                "h": 64
            },
            "animaton": {
                "frames": 0,
                "speed": 0
            },
            "frames": {
                "frame1": {
                    "x": 0,
                },
                "frame2": {
                    "x": 0,
                }
            }
        },
        "icecream": {
            "size": {
                "w": 128,
                "h": 110
            },
            "frame": {
                "x": 128,
            }
        },
        "tree": {
            "size": {
                "w": 128,
                "h": 110
            },
            "frame": {
                "x": 0,
            }
        }
    }
} 
```

我想要实现的是将 animation.frames 值（如果存在）设置为 frames 属性中的帧数。

因此，dirt.animation.frames 的值应设置为
4。grass.animation.frames 的值应设置为 2。

我知道要计算 n 对象中的属性数量，我可以使用 _size() 但我应该如何遍历对象中的每个名称并设置 animation.speed 值（如果存在）。该对象也是动态的，因此可以包含任意数量的名称。

感谢您的帮助，答案将使我朝着正确的方向了解如何使用 underscore.js。

注意：我正在使用 CoffeeScript

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T03:44:46.213

JS，不是 CS，而是：

```
_.each(obj.name,function(val){
    if('animation' in val && 'frames' in val.animation) {
        val.animation.frames = _.size(val.frames);
    }
}); 
```

# php - PHP：删除所有包含给定类或 id 的标签

> ID：14905314
> 
> 赞同：0
> 
> 时间：2013-02-15T23:56:18.283
> 
> 标签：php, html, html-parsing

我需要一些帮助。我研究了正则表达式，但还没有完全理解它的实现。如果父级包含给定的类或ID，我需要一个片段来删除所有标签及其子级。

例子：

```
<?php

function remove_tag($find="",$html)
{
    # Remove multiple #IDs and classes at once

    # When given a string (separating objects with a comma)
    if (is_string($find))
    {
        $objects = explode(',', str_replace(' ', '', $find);
    } else if (is_array($find)) {
        $objects = $find;
    }

    foreach ($objects as $object)
    {
        # If ID
        if (substr($object,0,1) == '#')
        {
            # regex to remove an id
            # Ex: '<ANYTAG [any number of attributes] id='/"[any number of ids] NEEDLE [any number of ids]'/" [any number of attributes]>[anything]</ENDTAG [anything]>'

        }

        if (substr($object,0,1) == '.')
        {
            # remove a class
            # Ex: '<ANYTAG [any number of attributes] class='/"[any number of classes] NEEDLE [any number of classes]'/" [any number of attributes]>[anything]</ENDTAG [anything]>'
        }

        # somehow remove it from the $html variable?
    }
} 
```

抱歉，如果这是一个新手问题，谢谢您的宝贵时间！:)

-拍

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:24:03.923

您可以使用 XPath 而不是正则表达式来查找文档中要删除的所有元素。

[DOMDocument](http://php.net/manual/class.domdocument.php)和[XPath](http://www.w3schools.com/xpath/default.asp)对我来说似乎是一个好的开始。

您可以使用[`DOMNode::removeChild()`](http://php.net/manual/domnode.removechild.php)方法来删除子节点，并使用[`DOMXPath`](http://php.net/manual/class.domxpath.php)类来评估 XPath，以获得您需要删除的节点。

# javascript - 遍历（输入和选择）元素并检查值是否为空

> ID：14905315
> 
> 赞同：0
> 
> 时间：2013-02-15T23:56:17.877
> 
> 标签：javascript, jquery

我想循环遍历 div 中的所有（输入和选择）元素并检查该值是否为空，然后将其隐藏

我已经尝试过了，但它不起作用：

```
$("#tabspanel").find('input[type=text] , select').each(function (){
    if (!(jQuery.trim(this.value).length > 0)) {
        this.hide();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:57:53.307

你应该用过`$(this).hide()`. 但是，我建议先过滤元素：

```
$("#tabspanel :input").filter(function() {
    return $.trim(this.value).length === 0;
}).hide(); 
```

# maven - 将 SSL 与 maven cargo tomcat 插件一起使用

> ID：14905319
> 
> 赞同：5
> 
> 时间：2013-02-15T23:57:03.400
> 
> 标签：maven, tomcat, ssl, maven-cargo

我看到这篇文章使用 Maven Jetty 插件配置 SSL。

[如何在 Maven/Mortbay Jetty 插件中使用 https / ssl？](https://stackoverflow.com/questions/3794892/howto-use-https-ssl-with-maven-mortbay-jetty-plugin)

有人可以告诉我如何使用tomcat 7的货物插件来做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T18:48:11.817

通过在货物插件配置标签中添加这些参数，我能够配置 SSL。

```
<cargo.servlet.port>8443</cargo.servlet.port>
<cargo.protocol>https</cargo.protocol>
<cargo.tomcat.connector.clientAuth>false</cargo.tomcat.connector.clientAuth>
<cargo.tomcat.connector.sslProtocol>TLS</cargo.tomcat.connector.sslProtocol>
<cargo.tomcat.connector.keystoreFile>path/to/kestorefile</cargo.tomcat.connector.keystoreFile>
<cargo.tomcat.connector.keystorePass>password to the keystore</cargo.tomcat.connector.keystorePass>
<cargo.tomcat.connector.keyAlias>your_alias</cargo.tomcat.connector.keyAlias>
<cargo.tomcat.httpSecure>true</cargo.tomcat.httpSecure> 
```

如果您遵循[http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)上的一般 Tomcat SSL 配置说明，请将您的 keyAlias 设置为“tomcat”。如果您省略 cargo.tomcat.connector.keyAlias 属性，您的密钥应该在您的密钥库中具有别名“mykey”。

# apache - 使用位置指令时没有 url-change

> ID：14905328
> 
> 赞同：0
> 
> 时间：2013-02-15T23:58:33.010
> 
> 标签：apache, location, rewrite

我的 trac.fcgi 在 /var/www/vhosts/domain.com/trac 下。它受 .htaccess 文件的保护，该文件包含以下行

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /trac.fcgi/$1 [L,QSA]
RewriteRule ^$ trac.fcgi [L] 
```

我的 /var/www/vhosts/trac.domain.com/conf 下的 vhost.conf 有以下内容：

```
<Location /trac.fcgi/login>
AuthType Basic
AuthName "trac"
AuthUserFile /var/www/vhosts/domain.com/trac/.htpasswd
Require valid-user
</Location> 
```

每当我登录时，URL 都会被重写为[http://trac.domain.com/trac.fcgi](http://trac.domain.com/trac.fcgi) **/trac.domain.com**。（为什么？我该如何防止呢？）

Trac 总是回答错误信息

```
No handler matched request to /trac.domain.com 
```

这很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:47:06.850

我可以通过添加来解决问题

```
Redirect /trac.fcgi/trac.domain.com /trac.fcgi/wiki 
```

到我的 .htaccess 文件。解决方案很丑陋，但它有效。

# c# - 是否有一个 RX 扩展来从另一个只捕获异常的 observable 创建一个 observable

> ID：14905330
> 
> 赞同：1
> 
> 时间：2013-02-15T23:58:38.597
> 
> 标签：c#, system.reactive

功能上与此等效的东西

```
//someObservable is an observable from another part of my application which produces Command objects
//can also have a ConnectionException

IObservable<Command> someObservable;

Subject<Command> sub = new Subject<Command>();

someObservable.Subscribe(c => { }, x =>
{
        sub.OnError(x);
}); 
```

这将允许我对异常有一个可观察的，以便我可以在其他地方处理它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T19:53:16.840

您可以使用 Materialize/Dematerialize 过滤除异常之外的所有内容。例如：

```
var subject = new Subject<int>();

var onlyExceptions = subject.Materialize().Where(n => n.Exception != null).Dematerialize();

subject.Subscribe(i => Console.WriteLine("Subscriber 1: {0}", i),
                    ex => Console.WriteLine("Subscriber 1 exception: {0}", ex.Message));

onlyExceptions.Subscribe(i => Console.WriteLine("Subscriber 2: {0}", i),
                            ex => Console.WriteLine("Subscriber 2 exception: {0}", ex.Message));

subject.OnNext(123);
subject.OnError(new Exception("Test Exception")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T14:23:44.193

此扩展方法只会返回单个 OnError，并且当且仅当源发送 OnError 时。

```
public static IObservable<T> ErrorsOnly<T>(this IObservable<T> source)
{
    return source.IgnoreElements().Concat(Observable.Never<T>());
} 
```

虽然不确定它在实践中有多有用。如果您不关心 OnCompleted(); 的话， IgnoreElements() 可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:46:38.520

不要忘记，一旦出现可观察到的错误，它就结束了。您当然可以订阅，或使用 Observable.Catch 或 finally 扩展方法之一，但您只会得到一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T21:08:32.707

您可以有一个只处理错误的订阅者（并且对序列中的常规项目不执行任何操作），并使用 Catch() 来消除其他任何地方的错误。

# nginx - Virtualmin 上的 Nginx PHP FPM 安装问题

> ID：14905331
> 
> 赞同：2
> 
> 时间：2013-02-15T23:58:59.967
> 
> 标签：nginx, php, webmin

我有一个 linode，我使用 LEMP 脚本来安装 nginx。然后我使用 Virtualmin 来管理我的虚拟服务器。当我使用 phpinfo() 时，我的版本是 5.3.2，服务器 api 是 CGI/FastCGI。我更新了我的 ubuntu 存储库并有了一个新的 php 5.4，其中默认包含 php5-fpm。

现在 phpinfo() 说我有 php 5.4.11 但仍将 CGI/FastCGI 显示为服务器 API。我试图启动 php5-fcm 服务，它正在工作。

我的问题是，我无法将服务器 API 切换到 PHP-FPM。我需要一起使用 Virtualmin+Nginx+PHP-FPM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T14:47:05.960

你试过了`sudo apt-get install php5-fpm`吗？

# pascal - 帕斯卡记录集

> ID：14905337
> 
> 赞同：5
> 
> 时间：2013-02-15T23:59:37.720
> 
> 标签：pascal

我想知道是否有一种方法可以用帕斯卡制作一组记录。我正在寻找整个互联网，并相信这是不可能的。

```
type    
  TRecord = record
    StrField: string;
    IntField: Integer;
  end;

  TSetOfRecord = set of TRecord; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T00:21:17.497

是的，集合成员不可能是序数类型。据我所知，您也只能拥有有限数量的成员，255 个响铃。

似乎比您的记录中的组合更多，但尚不清楚是什么定义了成员的唯一性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:17:07.880

“记录集”没有意义。我猜你的意思是“收集记录”。如果是这种情况，您可以通过多种方式实现它。

我建议使用“开放数组”（与“动态数组”不同）。

您需要编写几个自己的例程，其中一个是：

```
function RecordInCollection(const ARecord: TYourRecord; const ACollection: array of TYourRecord): Boolean;
var
  Index1: Integer;
begin
  Result := False;
  for Index1 := Low(ACollection) to High(ACollection) do begin
    Result := (ACollection[Index1].StrField = ARecord.StrField) and (ACollection[Index1].IntField = ARecord.IntField);
    if Result then Exit;
  end;
end; 
```

并这样称呼它：

RecordInCollection(Record1, [Record2, Record3, Record4])

或者您可以使用预先声明的常量数组而不是 [Record2, Record3, Record4]。

# playframework - 播放模板引擎：如何传递隐式参数

> ID：14905340
> 
> 赞同：2
> 
> 时间：2013-02-15T23:59:50.623
> 
> 标签：playframework, playframework-2.0

我正在尝试将隐式参数传递给 Play 模板......下面是我的代码：

`test.scala.html:`

```
@(implicit request: RequestHeader)

@()(implicit p = Some(controllers.routes.MyController.myActionMethod().absoluteURL))
@main("My Title") {

    // some HTML here...
} 
```

`main.scala.html:`

```
@(title: String)(implicit request: RequestHeader, p: Option[String])

<html>
    ...
</html> 
```

`p`从未分配过......而且我总是收到错误消息`could not find implicit value for parameter p`。我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:21:29.280

我刚刚弄清楚如何使它工作：

```
@(implicit request: RequestHeader)

@defining(Some(controllers.routes.MyController.myActionMethod().absoluteURL)) { implicit p =>

    // now main is able to access p
    @main("My Title") {
    ...
}} 
```

# xcode - MonoTouch：应用程序窗口在应用程序启动结束时应该有一个根视图控制器

> ID：14905341
> 
> 赞同：1
> 
> 时间：2013-02-15T23:59:59.123
> 
> 标签：xcode, xamarin.ios

## 请注意，与过去的类似问题不同，这个问题是针对 IOS 6 的，我没有调用 window.AddSubview (navigation.View) ，它记录在过去的答案中。

当我在模拟器中启动我的应用程序时，它会打开，并且下面的消息会显示在应用程序输出窗口中。我正在运行：Monotouch：6.0.10，xcode 4.6

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

```
 [Register ("AppDelegate")]
public partial class AppDelegate : UIApplicationDelegate
{
    UIWindow window;
    ProductXchangeViewController viewController;
    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        window = new UIWindow (UIScreen.MainScreen.Bounds);         
        viewController = new ProductXchangeViewController ();
        window.RootViewController = viewController;
        window.MakeKeyAndVisible ();
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:24:39.597

你确定这会及时完成吗？您有 iirc 17 秒的时间从 FinishedLunching 返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:27:33.020

我在一个新的 UIViewController xib 中重新实现了我的用户界面，并且没有更改 FinishedLaunching() 或任何其他代码并且它有效。

XCode 一定是在 xib 文件中引入了问题。

# php - 将 php 代码添加到 url 链接

> ID：14905346
> 
> 赞同：0
> 
> 时间：2013-02-16T00:00:53.463
> 
> 标签：php

**我应该在下面的NEXT ARTICLE** url 链接中添加什么 php 代码，这将导致下一篇文章随后被回显？

我打算一个接一个地依次回应。

谢谢！

(form.php)

```
<form action="process.php" method="get">
    Group:
    <select name="group">
        <option value="group1">Group1</option>
        <option value="group2">Group2</option>
    </select>

    Chapter:
    <input type="text" name="chapter">

    Article:
    <input type="text" name="article">

    <input type="submit" value="Go to Article">    

</form> 
```

（进程.php）

```
<?php

session_start();

$laws=array(
       "group1"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group1)",
                                "2"=>"This is article (2) in chapter (1) of (group1)",
                                "3"=>"This is article (3) in chapter (1) of (group1)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group1)",
                                "2"=>"This is article (2) in chapter (2) of (group1)",
                                "3"=>"This is article (3) in chapter (2) of (group1)",
                                ),
                       ),
       "group2"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group2)",
                                "2"=>"This is article (2) in chapter (1) of (group2)",
                                "3"=>"This is article (3) in chapter (1) of (group2)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group2)",
                                "2"=>"This is article (2) in chapter (2) of (group2)",
                                "3"=>"This is article (3) in chapter (2) of (group2)",
                                ),

       )
       );

$grp= $_GET['group'];
$chap = $_GET['chapter'];
$art = $_GET['article'];

if(isset($laws[$grp]) && isset($laws[$grp][$chap]) && isset($laws[$grp][$chap][$art])){
$_SESSION['group'] = $grp;
$_SESSION['chapter'] = $chap;
$_SESSION['article'] = $art;    
}else{
$_SESSION['group'] = 'group1';
$_SESSION['chapter'] = '1';
$_SESSION['article'] = '1';   
}

$group = $_SESSION['group'];
$chapter = $_SESSION['chapter'];
$article = $_SESSION['article'];

echo $laws[$group][$chapter][$article]; // ALL NEXT ARTICLES TO BE ECHOED HERE!!!!!

?>

<a href="process.php" style="text-decoration: none;">NEXT ARTICLE</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:08:01.667

不清楚下一篇文章是什么，并且您似乎有错误（请参阅我的评论）

我已经更新了您的代码，以便链接将加载一篇文章（但可能不是下一篇文章）。也许这至少会帮助您找到答案...

```
 <?php

    // $_GET['group'] receives a string
    // $_GET['chapter'] receives a number
    // $_GET['article'] receives a number

    $_SESSION['group'] = $_GET['group'];
    $_SESSION['chapter'] = $_GET['chapter'];

        // this line here doesn't really make sense....
        //$_SESSION['article' = $_GET['article']];  
        //so perhaps you mean:
        $_SESSION['article'] = $_GET['article'];  

        $group = $_SESSION['group'];
        $chapter = $_SESSION['chapter'];
        $article = $_SESSION['article'];

        echo $group . " " . $chapter . " " . $article . "<br/>";

        $group_num = preg_replace("[^0-9]","",$group); //get the number of the group by removing everying in the string `$group` that is not a number (leaving just the number)

        $next_article_data = array();
        if(isset($laws[$group][$chapter][$article+1])){
             $next_article_data['group'] = $group;
             $next_article_data['chapter'] = $chapter;
             $next_article_data['article'] = $article+1;
        }else if(isset($laws[$group][$chapter+1][1])){
             $next_article_data['group'] = $group;
             $next_article_data['chapter'] = $chapter+1;
             $next_article_data['article'] = 1;
        else if (isset($laws["group".($group_num+1)][1][1])){
             $next_article_data['group'] = "group".($group_num+1);
             $next_article_data['chapter'] = 1;
             $next_article_data['article'] = 1;
        else
            echo "NO NEXT ARTICLE!";

        ?>

        <a href="process.php<?php 

        //I added this to pass article info in the url
        echo "?".http_build_query($next_article_data); 
        ?>" style="text-decoration: none;">NEXT ARTICLE</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:10:47.553

你没有做太多的事情，但假设它`$_GET['article']`应该是一个文章编号，你只需将它增加 1（假设你的文章是连续的）：

```
<a href="process.php?article=<?php echo (int)$_GET['article'] + 1; ?>" style="text-decoration: none;">NEXT ARTICLE</a> 
```

# javascript - 具有意外结果的浮点数正则表达式

> ID：14905348
> 
> 赞同：0
> 
> 时间：2013-02-16T00:01:08.277
> 
> 标签：javascript, regex

我正在使用这个正则表达式来验证浮点数：

```
var reg = /\d+\.?\d+/; 
```

但它验证了这是真的：

```
"11.34x"
"11.34abs"
"1a1.34abs" 
```

`\d`应该只匹配数字。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:02:01.800

如果您不**锚定**正则表达式，它将匹配包含匹配子字符串的字符串。

尝试：

```
var reg = /^\d+\.?\d+$/; 
```

匹配测试字符串的`^`开头，并`$`匹配结尾。因此，该正则表达式将只匹配只有数字和最多一个“.”的字符串。

*编辑*——正如所指出的，你使用`+`量词意味着你的正则表达式**需要**数字；如果有小数点，则两边都需要数字。也许这就是你想要的，也许不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T00:08:36.953

使用这个正则表达式`^\d+(\.\d+)?$`

或`^\d+([.,]\d+)?$`分隔符可以是逗号或点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T00:17:11.277

考虑改用[`Number`包装器/构造器函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)：

```
Number('11.34'); // => 11.34
Number('11.34x'); // => NaN 
```

**[编辑]**正如评论者@VisioN 指出的那样，该函数对空字符串和纯空白字符串有一个边缘情况，因此可以创建一个包装函数：

```
function reallyParseFloatingPointNumber(s) {
  var s = (''+s).trim();
  return (s==='') ? NaN : Number(s);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T00:54:58.563

```
if (!"12 34.98 ".replace(/^\s+|\s+$/g,"").match(/^\d+\.?\d+$/))
  alert("Please enter numbers in float form")
else alert ("Good Form, Old Chap!") 
```

唉，我又错了！Burning_LEGION 是正确的：

```
/^\d+(\.\d+)?$/ 
```

也会匹配个位数。

# javascript - 尝试使用 Ember 获取 json 数据

> ID：14905349
> 
> 赞同：1
> 
> 时间：2013-02-16T00:01:17.083
> 
> 标签：javascript, json, ember.js

这是我的 json 数据的样子：

```
[{"id":1,"iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"Lorem ipsum lorem ipsum lorem ipsum"}] 
```

这是我的 Ember 代码：

```
window.Messages = Ember.Application.create();

Messages.Store = DS.Store.extend({
  revision: 11
});

Messages.MessagesRoute = Ember.Route.extend({
  setupControllers: function(controller) {
    controller.set('content', Messages.Message.find());
  }
});

Messages.Message = DS.Model.extend({
  msgbody: DS.attr('string')
});

Messages.MessagesController = Ember.ArrayController.extend({
  content: []
}); 
```

问题是我的 json 数据存在于 /app_dev.php/messages 而不是 /messages/ ...

我只是试图做一个成功的获取请求，但我无法管理......你能告诉我我做错了什么，以便我可以掌握 Ember 语法吗？

*编辑*感谢您的回答。只是为了告知，经过大量努力使事情变得微不足道后，我尝试了 Angular，它似乎做得更好、更快、更容易。所以我正在切换框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:21:33.247

您需要在适配器上使用命名空间选项。这可以指定如下，然后在创建商店时使用 MyApp 适配器。

```
MyApp.Adapter = DS.RESTAdapter.extend({
  namespace: 'app_dev.php'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:58:18.807

1.  我认为最好通过以下`url`选项指定文件名：

    App.Store = DS.Store.extend({ 修订：11，适配器：DS.RESTAdapter.create({ url: "/app_dev.php" }) });

2.  您的 JSON 的结构应如下所示：

```
{
    messages: [
        {"id":1,"iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"ipsum "},
        {"id":2,"iam":1,"youare":2,"lat":50.8275853,"lng":4.3809764,"msgbody":"Lorem "}
    ]
} 
```

请参阅[ember 指南](http://emberjs.com/guides/models/the-rest-adapter/)以获取更多参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T15:30:14.223

Ember 要求您使用他们所谓的“类型键”来成功读取 JSON，换句话说，您需要将模型的名称放在对象本身之前，以便 Ember 识别该类型。

就我而言，我制作了一个 Java/Spring 后端并且不想将其添加到我的对象中，要在 ember 中解决这个问题，您可以创建一个 Serializer 文件，Ember Serializers 的文档，特别是 RESTSerializer 可以在[这里](http://emberjs.com/api/data/classes/DS.RESTSerializer.html#method_typeForRoot)找到。

要将 typeKey 添加到传入的 JSON 覆盖 normalizePayload 挂钩。这是我如何做到的一个例子：

```
normalizePayload: function(type, payload) {
    var json = {};
    json[type.typeKey] = payload;
    return json;
} 
```

如果您在输出时没有将 typeKey 放在 JSON 上，那么在 PUT 或 POST 数据时可能会遇到类似的问题，因此您可能需要重载 serializeIntoHash 挂钩以删除传出数据上的 typeKey。这是一个对我有用的例子：

```
serializeIntoHash: function(hash, type, record, options){
    Ember.merge(hash, this.serialize(record, options));
} 
```

希望有帮助！我看到你正在切换到 Angular（很棒的决定，我更喜欢 Angular 100x 而不是 Ember，但我的工作需要我目前使用 Ember，所以我正在努力解决它。）但希望这可以帮助遇到类似问题并且想要的其他人或被迫使用 Ember。

# django - 自定义模板标签 args 和 kwargs 解析器

> ID：14905355
> 
> 赞同：7
> 
> 时间：2013-02-16T00:01:32.197
> 
> 标签：django, django-templates

Django 附带了一些用于制作自定义模板标签的好工具。

注册 simple_tag 和 assignment_tag 都解析传入的令牌内容并将它们转换为`args, kwargs`正确解析到它们的引用（比如传入了一个变量）。

有没有一种简单的方法可以将此行为添加到常规标签中？

我需要使用该`parser`对象，所以我需要使用常规标签，但似乎我正在涉足大量代码来重现`args, kwargs`解析器。

```
@register.tag(name='snippet')
def snippet_with_defaults(parser, token):
    bits = token.split_contents()[1:]
    bits # bits needs to be converted to args, kwargs easily 
```

我需要一个功能如下的标签：

```
{% snippet foo=bar bar=baz %}
This is a glorious django template tag!
{% endsnippet %} 
```

似乎这是一个常见的问题（用于标记参数的 args、kwargs 解析器），它应该有一个 django 片段或其他东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T11:36:33.100

我找到了一个可以帮助你的片段。

[解析 args 和 kwargs 的标签](http://djangosnippets.org/snippets/1113/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-03T17:14:13.153

你也可以在新的 Django 中使用它。

```
from django import template

template.base.token_kwargs(bits, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-27T09:03:31.653

要详细说明 Peyman 的答案，它使用 Django 内置`token_kwargs`函数：

```
from django.template.base import token_kwargs

def do_foo(parser, token):
    tag_name, *bits = token.contents.split()
    arguments = token_kwargs(bits, parser) 
```

的文档字符串`token_kwargs`：

```
def token_kwargs(bits, parser, support_legacy=False):
    """
    Parse token keyword arguments and return a dictionary of the arguments
    retrieved from the ``bits`` token list.

    `bits` is a list containing the remainder of the token (split by spaces)
    that is to be checked for arguments. Valid arguments are removed from this
    list.

    `support_legacy` - if True, the legacy format ``1 as foo`` is accepted.
    Otherwise, only the standard ``foo=1`` format is allowed.

    There is no requirement for all remaining token ``bits`` to be keyword
    arguments, so return the dictionary as soon as an invalid argument format
    is reached.
    """ 
```

# android - 如何在 android 活动中显示 HttpResponse 页面

> ID：14905359
> 
> 赞同：0
> 
> 时间：2013-02-16T00:01:54.440
> 
> 标签：android, http-post, httpresponse

我做了一个 HttpPost 到“ [https://portal.sibt.nsw.edu.au/Default.asp](https://portal.sibt.nsw.edu.au/Default.asp) ”

```
HttpClient client = new DefaultHttpClient();
String URL = (String) "https://portal.sibt.nsw.edu.au/Default.asp";
HttpPost post = new HttpPost(URL); 
```

在后台执行时

```
HttpResponse response = client.execute(post);
Log.d("Response", response.toString()); 
```

logCat 显示此“org.apache.http.message.BasicHttpResponse@413f0a28”

我如何显示结果页面，从电脑访问时应该是这个“ [https://portal.sibt.nsw.edu.au/std_Alert.asp ”。](https://portal.sibt.nsw.edu.au/std_Alert.asp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:15:17.167

`response.toString()`将打印对象引用而不是内容。您想要的是读取响应内容并将其转换为`String`. 最简单的方法是使用`EntityUtils.toString()`类，这是一个示例：

```
HttpResponse response = client.execute(post);
String responseContent = EntityUtils.toString(response.getEntity());
Log.d("Response", responseContent ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:14:19.117

我在下面的课程中这样做。你可以在你的项目中使用这个库，或者你可以复制代码。

[https://github.com/aguynamedrich/beacon-utils/blob/master/Library/src/us/beacondigital/utils/StringUtils.java](https://github.com/aguynamedrich/beacon-utils/blob/master/Library/src/us/beacondigital/utils/StringUtils.java)

以下是重要的方法：

```
public static String readStream(HttpResponse response) {
    String data = null;
    try
    {
        data = readStream(response.getEntity().getContent());
    }
    catch(Exception ex) { }
    return data;
}

public static String readStream(InputStream in)
{
    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    StringBuilder sb = new StringBuilder();
    String line = null;
    try
    {
        while((line = reader.readLine()) != null)
        {
            sb.append(line + "\n");
        }
    }
    catch(Exception ex) { }
    finally
    {
        IOUtils.safeClose(in);
        IOUtils.safeClose(reader);
    }
    return sb.toString();
} 
```

和来自另一个类（上面使用）：

[https://github.com/aguynamedrich/beacon-utils/blob/master/Library/src/us/beacondigital/utils/IOUtils.java](https://github.com/aguynamedrich/beacon-utils/blob/master/Library/src/us/beacondigital/utils/IOUtils.java)

```
public static void safeClose(Closeable closeable)
{
    if(closeable != null)
    {
        try
        {
            closeable.close();
        }
        catch (IOException e) { }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T00:05:15.107

要使 toString 不起作用，您需要从响应流中读取：

```
byte[] buffer = new byte[1024];
int bytesRead = response.getEntity().getContent().read(buffer, 0, 1024);
String responseContent = new String(buffer, 0, bytesRead); 
```

您可能需要增加缓冲区大小或以块为单位读取数据，但这正是您所需要的。

# java - Java 无法在 OSX 上使用 JNI 加载共享对象库

> ID：14905361
> 
> 赞同：4
> 
> 时间：2013-02-16T00:02:06.403
> 
> 标签：java, c, java-native-interface, shared-libraries

我正在尝试使用 JNI 在我朋友的 64 位 OSX 上以最简单的方式加入 Java 和 C，但我收到了这个错误。以下是所涉及的所有内容：

测试.java

```
public class test {

    static {System.loadLibrary ("test");}

    native void aaa ();

    public static void main (String [] args) {
        new test ();
    }

    public test () {
        aaa ();
    }
} 
```

测试.h

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class test */

#ifndef _Included_test
#define _Included_test
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     test
 * Method:    aaa
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_test_aaa
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

测试.c

```
#include <stdio.h>
#include <jni.h>
#include "test.h"

JNIEXPORT void JNICALL Java_test_aaa
  (JNIEnv *env, jobject obj) {
    printf ("AWD");
} 
```

生成文件

```
CC          =   gcc
CFLAGS      =   -Wall -ansi -pedantic -g3

default :
    javac test.java
    javah -jni test
    gcc -c test.c -o test.o -I${HOME}/../../System/Library/Frameworks/JavaVM.framework/Versions/A/Headers/
    gcc -shared -Wl,-install_name,libtest.so -o libtest.so test.o 
```

我不得不使用 -install_name 而不是 -soname 因为我读到 OSX 没有 -soname 像 Linux。

然后我做

```
export LD_LIBRARY_PATH=.
java test 
```

我得到

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no test in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at test.<clinit>(test.java:2) 
```

所以我真的不知道问题是什么。我将所有文件复制到 Linux 并将 -install_name 切换为 -soname 并将路径更改为 jni.h ，它工作得很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T00:28:36.240

在 OS X 上，JNI 查找具有扩展名的库`.jnilib`，或者具有标准 OS X 共享库扩展名`.dylib`.

来源：http: [//developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/05-CoreJavaAPIs/CoreJavaAPIs.html](http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/05-CoreJavaAPIs/CoreJavaAPIs.html)

# symfony - Symfony 更改表单呈现 ManyToOne 字段的表单

> ID：14905363
> 
> 赞同：0
> 
> 时间：2013-02-16T00:02:22.103
> 
> 标签：symfony, doctrine-orm, doctrine, symfony-forms

这是我的第一个问题：S

我正在使用 Symfony2，但遇到以下问题

我有两个在 ManyToOne 关系中相关的实体，我想为以下实体制作一个表单

```
/**
 * @ORM\Entity
 * @ORM\Table(name="product")
 */
class Product
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;
    /**
     * @ORM\Column(type="string", length=100)
     */
    protected $name;
   /**
     * @ORM\ManyToOne(targetEntity="Acme\ProductsBundle\Entity\ProductCategory", inversedBy="products")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $productCategory;
} 
```

所以我做了以下“ProductType”

```
class ProductType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('productCategory')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\ProductsBundle\Entity\Product'
        ));
    }

    public function getName()
    {
        return 'acme_hellobundle_producttype';
    }
} 
```

当我呈现表单时，一切都很好，但现在我想将“productCategory”的小部件更改为文本小部件，因为用户需要编写作为 productCategory 主键的数字。

但是当我这样做并填写表格时，我收到以下错误。

> 警告：spl_object_hash() 期望参数 1 是对象，字符串在 C:\xampp\htdocs\sym2\Symfony\vendor\doctrine\orm\lib\Doctrine\ORM\UnitOfWork.php 第 1358 行中给出

似乎 ORM 无法读取 PK 字符串，任何人都知道我必须看到什么来修复它。感谢您的建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:51:02.393

您的产品实体与产品类别有关。因此，您的表单期望类别是实体而不是字符串。这就是您收到错误的原因`expects parameter 1 to be object, string given`。

为避免这种情况，您可以删除`setDefaultOptions`方法。如果您这样做，表单类将不再知道它与某个实体类相关联。这样做的缺陷是，当您将实体传递给表单类时，它不会自动设置字段。

但是，现在您可以输入类别 ID 并进行处理。

例如

```
class ProductType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('productCategory');        
    }

    public function getName()
    {
        return 'acme_hellobundle_producttype';
    }
} 
```

现在 productCategory 将自动成为文本小部件。但是，您需要在控制器中自行保存它。但为此，您可能会问另一个问题。

请注意，当您创建表单时，不要传递产品对象。有这样的

```
$form = $this->createForm(new ProductType(), array()); 
```

# php - 在 PHP 中跳过全局头文件中的 div 块

> ID：14905367
> 
> 赞同：1
> 
> 时间：2013-02-16T00:02:30.973
> 
> 标签：php, html

我有一个 php 头文件，我在其中编写了一些全局代码。我网络中的所有 php 页面都使用该页面

```
include_once(TEMPLATEPATH."includes/html_header.php"); 
```

但是，在网络中的其中一个页面上，我想跳过 html_header 页面的功能。我有一个名为“mySocialTool”的 div，它出现在标题中并在所有页面中使用。我可以跳过在我的一个 php 文件中使用的那个 div 块，比如 sidebarCalender.php 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:07:14.703

您可以尝试在包含头文件之前设置一个变量，然后在头文件中检查该变量的值。根据您显示或不显示 div 的值。

在要跳过 div 的文件中：

```
define('HIDE_DIV', true);
include_once TEMPLATEPATH . "includes/html_header.php"; 
```

在标题模板中：

```
if (! defined('HIDE_DIV') || HIDE_DIV == false) {
    echo 'YOUR DIV';
} 
```

# perl - $ 和 % 运算符一起使用

> ID：14905370
> 
> 赞同：4
> 
> 时间：2013-02-16T00:03:02.443
> 
> 标签：perl

我现在正忙于学习 Perl，并且已经给了我一些代码来查看和“解决”。

```
foreach $field (keys %$exam) 
```

上面的代码是我难以理解的领域。我认为 $ 是标量而 % 是哈希，所以我不确定 %$ 是什么。

任何帮助表示赞赏！

多谢你们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T00:16:19.713

`%$exam`表示您使用的不是普通哈希，而是取消引用的哈希，即在此语句`$exam`成为哈希引用之前的某个地方（例如`$exam = \%somehash`或`$exam = { a => 1 }`匿名哈希引用）。现在，为了使用先前引用的哈希，您必须使用此语法来取消引用它。为了明确地使用它，它可以写成`%{$exam}`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T00:21:25.433

```
$exam = {a=>1, b=>2}; # anonym hash, $exam is ref for this hash 
```

为了像哈希一样使用这个 ref，你必须`%`在 ref 之前使用解引用运算符

`foreach $field (keys %$exam)`

例如，对于数组 ref 也是如此。

```
$a = [1,2,3,4]; # anonym arr, $a is ref for this array 
```

所以你必须`@`在 ref $a 之前使用运算符来取消引用

`foreach $element (@$a) {print $element;}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T00:04:26.203

这是*取消引用* `$exam`引用变量的语法。

看

*   [http://perldoc.perl.org/perlreftut.html](http://perldoc.perl.org/perlreftut.html)
*   [http://perldoc.perl.org/perlref.html](http://perldoc.perl.org/perlref.html)

# node.js - 锁定全局 npm 包

> ID：14905375
> 
> 赞同：5
> 
> 时间：2013-02-16T00:03:17.137
> 
> 标签：node.js

是否可以将全局包锁定到特定版本？例如，如果我这样做：

```
$ npm install -g some-awesome-package@1.7.0 
```

如果 some-awesome-package@1.7.1 存在，我可以阻止 npm 更新这个特定的包吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:28:30.890

答案似乎是否定的。我打开了[这个](https://github.com/isaacs/npm/issues/3175)问题，但它被关闭了。很难想象我是唯一拥有这个用例的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:56:14.013

可能有一种方法可以通过`npm`CLI 执行此操作，但我找不到它。似乎也没有`npm shrinkwrap`for 全局包。

我认为可能可以使用`npm link`（它创建一个从本地包到全局文件夹的符号链接），但是在`npm install -g somepackage@foo`之后运行`npm link`，会覆盖以前安装的全局包。

当 npm 尝试覆盖全局安装的包时，强制 npm 失败的一种（非常hacky）方法是删除文件夹（对于运行的用户帐户）的写权限，`npm`如下所示`chmod -w /usr/local/lib/node_modules/<some package>`。

一旦你这样做了，`npm`就不能安装/更新那个全局包，因为它没有写访问权。不过，我不能说我建议走那条路。

# ios - 我可以在 UIScrollView 中使用 UIRefreshControl 吗？

> ID：14905382
> 
> 赞同：82
> 
> 时间：2013-02-16T00:04:06.343
> 
> 标签：ios, iphone, uiscrollview, xamarin.ios, uirefreshcontrol

我的应用程序中已经有大约 5 个`UIScrollView`，它们都加载了多个`.xib`文件。我们现在想使用`UIRefreshControl`. 它们被构建为与 UITableViewControllers 一起使用（每个 UIRefreshControl 类参考）。我不想重新做所有5个`UIScrollView`工作。我已经尝试`UIRefreshControl`在我`UIScrollView`的 's 中使用它，它可以按预期工作，除了一些事情。

1.  刷新图像进入加载器后，`UIScrollView`向下跳跃约10个像素，只有当我非常小心地`UIScrollview`非常缓慢地向下拖动时才会发生这种情况。

2.  当我向下滚动并开始重新加载时，松开`UIScrollView`，`UIScrollView`停留在我松开的位置。完成重新加载后，会`UIScrollView`跳到顶部，没有动画。

这是我的代码：

```
-(void)viewDidLoad
{
      UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
      [refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
      [myScrollView addSubview:refreshControl];
}

-(void)handleRefresh:(UIRefreshControl *)refresh {
      // Reload my data
      [refresh endRefreshing];
} 
```

有什么办法可以节省大量时间并使用 a `UIRefreshControl`in a`UIScrollView`吗？

谢谢你！！！

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-02-21T17:08:18.120

我有一个`UIRefreshControl`工作`UIScrollView`：

```
- (void)viewDidLoad
{
    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 500, 500)];
    scrollView.userInteractionEnabled = TRUE;
    scrollView.scrollEnabled = TRUE;
    scrollView.backgroundColor = [UIColor whiteColor];
    scrollView.contentSize = CGSizeMake(500, 1000);

    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(testRefresh:) forControlEvents:UIControlEventValueChanged];
    [scrollView addSubview:refreshControl];

    [self.view addSubview:scrollView];
}

- (void)testRefresh:(UIRefreshControl *)refreshControl
{    
    refreshControl.attributedTitle = [[NSAttributedString alloc] initWithString:@"Refreshing data..."];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        [NSThread sleepForTimeInterval:3];//for 3 seconds, prevent scrollview from bouncing back down (which would cover up the refresh view immediately and stop the user from even seeing the refresh text / animation)

        dispatch_async(dispatch_get_main_queue(), ^{
            NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
            [formatter setDateFormat:@"MMM d, h:mm a"];
            NSString *lastUpdate = [NSString stringWithFormat:@"Last updated on %@", [formatter stringFromDate:[NSDate date]]];

            refreshControl.attributedTitle = [[NSAttributedString alloc] initWithString:lastUpdate];

            [refreshControl endRefreshing];

            NSLog(@"refresh end");
        });
    });
} 
```

需要在单独的线程上进行数据更新，否则会锁定主线程（UI 用于更新 UI）。因此，当主线程忙于更新数据时，UI 也会被锁定或冻结，您永远看不到流畅的动画或微调器。

编辑：好的，我正在做与 OP 相同的事情，我现在已经向它添加了一些文本（即“拉动刷新”），它确实需要回到主线程来更新该文本。

更新了答案。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-12-04T15:55:01.017

添加到上述答案中，在某些情况下，您无法设置 contentSize（也许使用自动布局？）或 contentSize 的高度小于或等于 UIScrollView 的高度。在这些情况下，UIRefreshControl 将不起作用，因为 UIScrollView 不会反弹。

要解决此问题，请将属性**alwaysBounceVertical**设置为**TRUE**。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2019-08-06T12:53:44.450

由于**iOS 10** UIScrollView 已经**有一个 refreshControl 属性**。当您创建 UIRefereshControl 并将其分配给此属性时，将出现此 refreshControl。

**不再需要**将 UIRefereshControl 添加为子视图。

```
func configureRefreshControl () {
   // Add the refresh control to your UIScrollView object.
   myScrollingView.refreshControl = UIRefreshControl()
   myScrollingView.refreshControl?.addTarget(self, action:
                                      #selector(handleRefreshControl),
                                      for: .valueChanged)
}

@objc func handleRefreshControl() {
   // Update your content…

   // Dismiss the refresh control.
   DispatchQueue.main.async {
      self.myScrollingView.refreshControl?.endRefreshing()
   }
} 
```

> UIRefreshControl 对象是附加到任何 UIScrollView 对象的标准控件

[来自https://developer.apple.com/documentation/uikit/uirefreshcontrol](https://developer.apple.com/documentation/uikit/uirefreshcontrol)的代码和引用

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-07-28T01:05:18.183

如果您有幸支持 iOS 10+，您现在可以简单地设置`refreshControl`. `UIScrollView`这与之前存在`refreshControl`的`UITableView`.

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-03-22T02:52:50.210

这是在 C#/Monotouch 中执行此操作的方法。我在任何地方都找不到 C# 的任何示例，所以就在这里。谢谢 Log139！

```
public override void ViewDidLoad ()
{
    //Create a scrollview object
    UIScrollView MainScrollView = new UIScrollView(new RectangleF (0, 0, 500, 600)); 

    //set the content size bigger so that it will bounce
    MainScrollView.ContentSize = new SizeF(500,650);

    // initialise and set the refresh class variable 
    refresh = new UIRefreshControl();
    refresh.AddTarget(RefreshEventHandler,UIControlEvent.ValueChanged);
    MainScrollView.AddSubview (refresh);
}

private void RefreshEventHandler (object obj, EventArgs args)
{
    System.Threading.ThreadPool.QueueUserWorkItem ((callback) => {  
        InvokeOnMainThread (delegate() {
        System.Threading.Thread.Sleep (3000);             
                refresh.EndRefreshing ();
        });
    });
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-19T04:05:32.260

对于跳跃问题，[蒂姆诺曼的回答](https://stackoverflow.com/a/19926917/4298881)解决了它。

如果您使用的是 swift2，这里是 swift 版本：

```
import UIKit

class NoJumpRefreshScrollView: UIScrollView {

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
override func drawRect(rect: CGRect) {
    // Drawing code
}
*/
override var contentInset:UIEdgeInsets {
    willSet {
        if self.tracking {
            let diff = newValue.top - self.contentInset.top;
            var translation = self.panGestureRecognizer.translationInView(self)
            translation.y -= diff * 3.0 / 2.0
            self.panGestureRecognizer.setTranslation(translation, inView: self)
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-31T21:01:18.867

如何在 Swift 3 中做到这一点：

```
override func viewDidLoad() {
    super.viewDidLoad()

    let scroll = UIScrollView()
    scroll.isScrollEnabled = true
    view.addSubview(scroll)

    let refreshControl = UIRefreshControl()
    refreshControl.addTarget(self, action: #selector(pullToRefresh(_:)), for: .valueChanged)
    scroll.addSubview(refreshControl)
}

func pullToRefresh(_ refreshControl: UIRefreshControl) {
    // Update your conntent here

    refreshControl.endRefreshing()
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-05T16:06:37.520

我在`UIRefreshControl`里面正常工作`UIScrollView`。我继承`UIScrollView`，阻止更改 contentInset 并覆盖 contentOffset 设置器：

```
class ScrollViewForRefreshControl : UIScrollView {
    override var contentOffset : CGPoint {
        get {return super.contentOffset }
        set {
            if newValue.y < -_contentInset.top || _contentInset.top == 0 {
                super.contentOffset = newValue
            }
        }
    }
    private var _contentInset = UIEdgeInsetsZero
    override var contentInset : UIEdgeInsets {
        get { return _contentInset}
        set {
            _contentInset = newValue
            if newValue.top == 0 && contentOffset.y < 0 {
                self.setContentOffset(CGPointZero, animated: true)
            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-22T11:06:36.240

对于 Jumping 问题， override contentInset 只能在 iOS 9 之前解决。我只是尝试了一种避免跳转问题的方法：

```
let scrollView = UIScrollView()
let refresh = UIRefreshControl()
//        scrollView.refreshControl = UIRefreshControl() this will cause the jump issue
refresh.addTarget(self, action: #selector(handleRefreshControl), for: .valueChanged)
scrollView.alwaysBounceVertical = true
//just add refreshControl and send it to back will avoid jump issue
scrollView.addSubview(refresh)
scrollView.sendSubviewToBack(refresh) 
```

适用于 iOS 9 10 11 等，我希望他们（Apple）能解决这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-15T15:39:13.103

从 iOS 10 开始，UIScrollView 有一个 refreshControl 属性，您可以将其设置为 UIRefreshControl。与往常一样，您不需要管理控件的框架。只需配置控件，为 valueChanged 事件设置目标操作并分配给属性。

无论您使用的是普通滚动视图、表格视图还是集合视图，创建刷新控件的步骤都是相同的。

```
if #available(iOS 10.0, *) {
  let refreshControl = UIRefreshControl()
  refreshControl.attributedTitle = NSAttributedString(string: "Pull to refresh")
  refreshControl.addTarget(self,
                           action: #selector(refreshOptions(sender:)),
                           for: .valueChanged)
  scrollView.refreshControl = refreshControl
}

@objc private func refreshOptions(sender: UIRefreshControl) {
  // Perform actions to refresh the content
  // ...
  // and then dismiss the control
  sender.endRefreshing()
} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-02-20T12:36:33.147

您可以简单地创建刷新控件的实例并将其添加到滚动视图的顶部。然后，在委托方法中，您可以根据自己的要求调整其行为。

# ant - 无法找到或加载主类 ant 文件

> ID：14905385
> 
> 赞同：0
> 
> 时间：2013-02-16T00:04:33.660
> 
> 标签：ant

```
<target name="init">
    <property name="src.dir" value="src"/>
    <property name="build.dir" value="build"/>
    <property name="apidoc.dir" value="apidoc"/>
    <property name="lib.dir" value="lib"/>

    <property name="lib.res" value="resources.jar"/>
    <property name="jar.path" value="${build.dir}/AntLabRun.jar"/>
    <property name="main.class" value="edu.gatech.oad.antlab.pkg1.AntLabMain"/>
    <path id="classpath">
        <fileset dir="${lib.dir}" includes="lib.res"/>
    </path>
</target>

<target name="jar" depends="compile">
    <manifestclasspath property="jar.classpath" jarfile="${jar.path}">
        <classpath refid="classpath"/>
    </manifestclasspath>
    <jar destfile="${jar.path}" basedir="${src.dir}">
    <manifest>
        <attribute name="Main-Class" value="${main.class}"/>
        <attribute name="Class-Path" value="${jar.classpath}" />
    </manifest>
    </jar>
</target>

<target name="clean" depends="init">
    <delete dir="${build.dir}"/>
    <delete dir="${apidoc.dir}"/>
</target>

<target name="run" depends="jar">
    <java jar="${jar.path}" fork="true"/>
</target>

<target name="all">
    <antcall target="init"/> 
    <antcall target="prepare"/>
    <antcall target="compile"/>
    <antcall target="javadoc"/>
    <antcall target="jar"/>
    <antcall target="run"/>
</target> 
```

每次我运行我的 jar 它都会给我这个错误，我不知道是什么原因造成的。其他一切都很好，我已经用谷歌搜索并发现了几个具有相同问题的帖子，但对他们有用的东西似乎对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T19:04:57.990

尝试在目标的标签`classname="${main.class}"`内添加一个。 另外，我认为即使在运行程序时，也需要将库添加到类路径中。`java``run`

# jquery - Facebook 相册图片网址

> ID：14905386
> 
> 赞同：1
> 
> 时间：2013-02-16T00:04:58.467
> 
> 标签：jquery, facebook-graph-api

我试图获取响应图像 url，以便我可以将其附加为背景。它有效，但它为每个附加相同的图像。这是我的代码：

```
 getUserAlbums : function(){
    FB.api('/me/?fields=id,name,albums', function(response) {
        var albums = response.albums.data;
        var frame = "";
        console.log(albums);
        _.each(albums, function(album) {

            FB.api('/'+album.cover_photo+"/picture?type=album", function(response) {
                var url = response.data;
                _.each(url, function(bg) {
                    console.log(url);
                    $("li.album").css({backgroundImage:"url("+bg.replace("_s.jpg", "_a.jpg")+")"});
                });
            });

            frame += '<li class="album"><img src="images/fb_frame.png"/></li>';

            $('ul#albums').append(frame);

        });

    });
} 
```

我使用下划线顺便说一句，这就是“_.each”。这里真正的问题是，当添加照片时，它会为每个相册显示相同的照片，这意味着我的循环正在覆盖，但我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:28:33.040

我想通了，我必须改变我附加数据的方式：

```
 FB.api('me/?fields=albums', function(response) {
        var albums = response.albums.data;
        _.each(albums, function(album, i) {
            FB.api('/'+album.cover_photo+"/picture?type=album", function(res) {
                var frame = $('<li class="album"><img src="images/fb_frame.png"/></li>').appendTo('ul#albums');
                frame.css({backgroundImage:'url('+res.data.url.replace('_s.jpg', '_a.jpg')+')'});
            });
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:47:17.250

您不需要将 _s.jpg 替换为 a_jpg。检查照片对象的图像字段。从这里你可以选择图片。

```
 me/?fields=id,name,albums.fields(photos.fields(images))

"albums": {
    "data": [
      {
        "id": "xxxxxx", 
        "created_time": "2011-04-01T03:17:15+0000", 
        "photos": {
          "data": [
            {
              "images": [
                {
                  "height": 1107, 
                  "width": 2048, 
                  "source": "https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-prn1/s2048x2048/xxxx_n.jpg"
                }, 
                {
                  "height": 330, 
                  "width": 610, 
                  "source": "https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-prn1/XXXX_n.jpg"
                }, 
                {
                  "height": 330, 
                  "width": 610, 
                  "source": "https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-prn1/xxxxx_n.jpg"
                }, 
                {
                  "height": 324, 
                  "width": 600, 
                  "source": "https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-prn1/s600x600/xxxxxxxxx_n.jpg"
                }, 
                {
                  "height": 259, 
                  "width": 480, 
                  "source": "https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-prn1/s480x480/xxxxxxxx_n.jpg"
                }, 
                {
                  "height": 173, 
                  "width": 320, 
                  "source": "https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-prn1/s320x320/xxxxxxx_n.jpg"
                }, 
                {
                  "height": 97, 
                  "width": 180, 
                  "source": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-prn1/xxxxxx_a.jpg"
                }, 
                {
                  "height": 70, 
                  "width": 130, 
                  "source": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-prn1/xxxxxxxx_s.jpg"
                }, 
                {
                  "height": 70, 
                  "width": 130, 
                  "source": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-prn1/s75x225/xxxxxx_s.jpg"
                }
              ], 
              "id": "4274066575883", 
              "created_time": "2013-02-09T10:43:54+0000"
            }, 
```

# xml - Tomcat 6 到 Tomcat 7 导致上下文路径停止合作

> ID：14905388
> 
> 赞同：0
> 
> 时间：2013-02-16T00:05:22.303
> 
> 标签：xml, jsp, tomcat, contextpath

我有一个在 Tomcat 6 中运行良好的 web 应用程序。假设它在`server:8282/MyApplication`. 我有一个看起来像这样的上下文 xml：

```
<Context crossContext="true"
         debug="5"
         docBase="MyApplication"
         path="MyApplication"
         reloadable="true"> 
```

在我的应用程序中，我的链接看起来像

```
server:8282/MyApplication/myAction.do?params=blah 
```

当我将它切换到 Tomcat 7 时，它似乎将链接更改为：

```
server8282/myAction.do?params=blah 
```

我没有更改应用程序中的任何内容，这两个地方的代码都是相同的。是否有一些全局设置我可以更改以恢复“MyApplication”？

编辑：例如，生成链接的代码是：

```
<a href="<%=request.getContextPath() %>/myAction.do?params=blah">do the blah</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:20:19.380

似乎您的部署过程有问题，并且由于某种原因，Tomcat 试图在服务器的根目录上为您的应用程序提供服务，因为您`${pageContext.request.contextPath}`返回的是空的。

由于我不确定您的确切部署要求，请尝试以下过程之一。为了确保避免配置冲突，请在全新的 Tomcat 7 安装上执行此操作：

1.  如果您有一个`MyApplication.war`文件，只需将其放在`<CATALINA_HOME>\webapps`，不要使用任何上下文文件（请注意 war 文件中的上下文文件，即`/META-INF/context.xml`）
2.  如果您有一个展开的应用程序，请在其中创建一个文件夹并将应用程序内容`MyApplication`放在`webapps`那里（同样，否`context.xml`）。

如果您确实需要将您的应用程序保留在以下范围之外`webapps`：

1.  在里面添加一个新`Context`元素：`<CATALINA_HOME>\conf\server.xml``<Host>`

    ```
    <Context path="/MyApplication"
             docBase="/absolute/physical/path/to/MyApplication" 
             reloadable="true"
             crossContext="true"> 
    ```

2.  或者创建一个包含上述内容的`MyApplication.xml`文件。`<CATALINA_HOME>\Catalina\localhost`

有关详细信息，请参阅[上下文容器文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)。

# ajax - 无法让 javascriptRoutes 与 Play Framework 2 一起使用

> ID：14905392
> 
> 赞同：1
> 
> 时间：2013-02-16T00:05:55.100
> 
> 标签：ajax, scala, playframework-2.0, url-routing

我正在尝试`javascriptRoutes`在 Play 2 (Scala) 中使用，但出现错误（见下文）。这是我所做的：

### 向控制器添加`javascriptRoutes`方法`Application`

```
def javascriptRoutes = Action { implicit request =>
    import routes.javascript._
    Ok(Routes.javascriptRouter("jsRoutes")(Orders.searchProducts))
        .as("text/javascript")
} 
```

### 将路由添加到`routes`文件

```
GET    /assets/javascripts/routes    controllers.Application.javascriptRoutes 
```

### 添加`<script>`导入到`main.scala.html`

```
<head>
...
<script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>
...
</head> 
```

进行这些更改后，我在 JavaScript 控制台中收到以下错误：

```
GET http://localhost:9000/assets/javascripts/routes 404 (Not Found)
Uncaught ReferenceError: jsRoutes is not defined 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-07T21:07:43.747

wrong order within the **conf/routes** file may cause the issue.

there is a hint:

[http://grokbase.com/t/gg/play-framework/1348rbs2vk/2-1-scala-javascript-router-404](http://grokbase.com/t/gg/play-framework/1348rbs2vk/2-1-scala-javascript-router-404)

once I adjusted the order according to the hint:

> Move the route definition of the javascript router action above the assets route.

the issue was fixed.

```
 # Routes
    # This file defines all application routes (Higher priority routes first)
    # ~~~~

    GET     /                           controllers.MainController.index()
    GET     /message                    controllers.MessageController.getMessage()
    GET     /assets/javascripts/routes  controllers.MessageController.javascriptRoutes()

    # Map static resources from the /public folder to the /assets URL path
    GET     /assets/*file               controllers.Assets.at(path="/public", file)
    GET     /webjars/*file              controllers.WebJarAssets.at(file)` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T18:36:03.610

与此同时，我发现了与此相关的另一篇文章->

[无法解析 IntelliJ 中的反向路由方法](https://stackoverflow.com/questions/16676311/unable-to-resolve-reverse-routing-methods-in-intellij)

我必须从项目配置中删除一些信息才能使以下文件夹成为源路径的一部分->

文件 -> 项目结构

在右窗格中选择源

添加源文件夹 target/scala-XXX/classes_managed target/scala-XXX/src_managed/main

# xml - 使用powershell读取/修改/重写sharepoint xml文档

> ID：14905396
> 
> 赞同：4
> 
> 时间：2013-02-16T00:06:34.263
> 
> 标签：xml, powershell, sharepoint-2010

我想使用 PowerShell 打开存储在 Sharepoint 2010 文档库中的 XML 文档，将其读入内存，修改其中一个节点，然后将修改后的 XML 保存回来，覆盖原始文档。我宁愿不写任何本地文件；我真的不认为这是必要的。

这是我现在拥有的脚本：

```
param
(
    $siteCollection = $(read-host -prompt "Site Collection"),
    $subSite = "StoreOps",
    $libraryName = "Data Connections",
    $UDCXName = $(read-host -prompt "UDCX document name"),
    $listName = $(read-host -prompt "List name")
)

$site = get-spsite $siteCollection
$web = $site.openweb($subSite)
$library = $web.Folders[$libraryName]
$document = $library.Files[$UDCXName]

# Load the contents of the document.

$data = $document.OpenBinary()
$encode = New-Object System.Text.ASCIIEncoding
$UDCX = [xml]($encode.GetString($data))
$ns = New-Object Xml.XmlNamespaceManager $UDCX.NameTable
$ns.AddNamespace("udc", "http://schemas.microsoft.com/office/infopath/2006/udc")
$root = $UDCX.DataSource
$node = $root.SelectSingleNode("udc:ConnectionInfo/udc:SelectCommand/udc:ListId", $ns)
$oldListId = $node."#text"

# Get the ListId of the current list.

$list = $web.Lists[$listName]
$newListId = "{$($list.ID)}"
write-host "List: $listName, Old ListId: $oldListId, New ListId: $newListId"
$node."#text" = $newListId 
```

（对于那些感兴趣的人，此脚本将修改 InfoPath 表单使用的数据连接文件）。

所有这些脚本都可以正常工作，但现在如何将 XML 重新写入 Sharepoint？我努力了：

```
$document.SaveBinary($UDCX.xml) 
```

但这不起作用。我对如何让 $UDCX xml 对象生成它包含的 xml 的文本表示有点困惑。如果我知道该怎么做，那么我可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:58:47.793

是使用该方法`$Document`打开的`OpenBinary()`，因此要直接保存到它，我们需要使用该`SaveBinary()`方法。XMLDocument 对象，`$UDCX`可以保存到一个`MemoryStream`对象，然后使用该对象直接保存回 Sharepoint。最后你需要的代码如下：

```
$Stream = New-Object System.IO.MemoryStream
$UDCX.Save($Stream)
$document.SaveBinary($Stream.ToArray()) 
```

我希望这会有所帮助。

# sinatra - Cucumber 的 AfterConfiguration 无法访问辅助模块

> ID：14905397
> 
> 赞同：0
> 
> 时间：2013-02-16T00:06:51.940
> 
> 标签：sinatra, cucumber

我有一个没有数据库的模块化 Sinatra 应用程序，为了测试 memcache，我有一些需要在文件系统上创建和删除的测试文件。我想使用一些辅助方法（在与 rspec 共享的模块中，还需要创建/删除这些文件进行测试）在 AfterConfiguration 挂钩中生成这些文件。我只想在 Cucumber 开始时创建一次。

我似乎无法从位于“support/hooks.rb”中的 AfterConfiguration 中访问帮助程序。助手可以从 Cucumber 的步骤中访问，所以我知道它们已正确加载。

这个之前的帖子好像有答案了：[Want to load seed data before running cucumber](https://stackoverflow.com/questions/5296270/want-to-load-seed-data-before-running-cucumber)

这个答案中的第二个例子似乎说我的模块应该可以被我的 AfterConfiguration 块访问，但是当我尝试调用帮助方法“foo”时，我得到“nil:NilClass 的未定义方法 `foo'”。

我可以将所有内容提取到 rakefile 中并以这种方式运行，但我想知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:14:20.987

After digging around in the code, it appears that AfterConfiguration not only runs before any features are loaded, but before World is instantiated. Running self.class inside of the AfterConfig block returns NilClass. Running self.class inside of any other hook, such as a Before, will return MyWorldName. In retrospect, this makes sense as every feature is run in a separate instance of World.

This is why helpers defined as instance methods (ie def method_name) are unknown. Changing my methods to module methods (ie def ModuleName.method_name) allows them to function, since they really are module methods anyway.

# php - 如何安全地让用户提交代码定期运行？

> ID：14905406
> 
> 赞同：0
> 
> 时间：2013-02-16T00:08:12.047
> 
> 标签：php, cron, sandbox, sanitization

基本上我需要允许用户提交代码以定期在服务器端运行。

用户应该提交简单的脚本，我将运行他们的代码服务器端以确定谁提出了更好的解决方案。我创建了一个简单的提交表单，代码存储在 SQL 数据库中。

我显然担心安全，但我也不知道使用哪种语言。我需要一种语法简单的脚本语言，让我限制用户可以做的事情的数量（我只需要让他们定义变量、创建函数、使用循环以及一些数组和代数函数）。甚至可以创建一种语法简单的伪语言。

所以基本上：

1.  我可以使用什么语言？
2.  如何定期运行用户代码？（只知道 cronjobs 但我不知道它们是否会允许较长的执行时间）
3.  创建伪语言是个好主意吗？如果是，请指出我正确的方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:14:13.577

1.  什么语言：嗯，你可以使用任何语言，只要确保你有最小的权限。不过，像 Ruby 或 Python 这样的脚本语言会更容易。

如果这项任务落在我的腿上，我会研究 pythons [virtualenv](http://pypi.python.org/pypi/virtualenv)以便我有一个隔离的环境。那么显然我会确定运行上传程序的脚本的权限。

这也意味着您可以为使用此服务的每个用户设置一个 python 环境。

1.  嗯，是的，cron 有效。

2.  确实，但一个好的答案的范围并不适合这里。但是谷歌 DSL 或域特定语言，你一定会找到一些教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:19:29.440

如果您专门针对 PHP，则可以使用 runkit 扩展 - 专门为运行用户提供的 PHP 代码而创建：

[http://www.php.net/manual/en/intro.runkit.php](http://www.php.net/manual/en/intro.runkit.php)

还有一个更新的 runkit 项目可用（尽管您必须手动编译它）：

[https://github.com/zenovich/runkit/](https://github.com/zenovich/runkit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:10:37.317

Q1。我可以使用什么语言？

A1。几乎任何。因为编译器会增加系统的复杂性，所以最好使用解释（或 JIT 编译）语言。

Q2。如何定期运行用户代码？（只知道 cronjobs 但我不知道它们是否会允许较长的执行时间）

A2。cron 工作可能是要走的路。它不关心执行时间。但是，这意味着您的工作是确保仅在先前的运行完成后才重新启动作业（假设这是您希望它执行的操作）

Q3。创建伪语言是个好主意吗？如果是，请指出我正确的方向

A3。很少发明轮子是个好主意。您可以这样做，但有理由怀疑这是必要的和/或可取的。

我个人的建议是把 JavaScript 作为脚本语言——因为它非常普遍，周围有大量的工具和文档。所以你可能想看看[Node.js](http://nodejs.org/)和[这个沙盒模型](http://gf3.github.com/sandbox/)来在服务器端运行它。

# python - Linux 和 Mac OS X 上烧瓶开发服务器的行为不一致

> ID：14905407
> 
> 赞同：1
> 
> 时间：2013-02-16T00:08:32.050
> 
> 标签：python, linux, macos, flask

我正在为烧瓶应用程序编写一些测试用例。

这个应用程序有一个这样的蓝图：

```
@api_blueprint.route('/api/search/', methods=['GET'])
def search():
   ... 
```

我的测试试图验证这样的请求：

```
http://127.0.0.1:5000/api/search 
```

返回状态码 301

该测试在 CentOS 6 服务器上运行良好（以及在我尝试过的任何其他 linux 机器上）

事实上，一个非常简单的 get 请求会给出正确的结果：

```
In [1]: import requests
In [2]: r = requests.get('http://127.0.0.1:5000/api/search')
Starting new HTTP connection (1): 127.0.0.1
In [3]: r.history
Out[3]: (<Response [301]>,) 
```

但它在我的 Mac Pro 上失败了，通过 MacPorts 安装了 Mac OS X 10.6.8 和 python 2.6。

在 Mac 上，同样的简单请求直接给出状态码 200：

```
In [1]: import requests
In [2]: r = requests.get('http://127.0.0.1:5000/api/search')
Starting new HTTP connection (1): 127.0.0.1
In [3]: r.history
Out[3]: []
In [4]: r.status_code
Out[4]: 200 
```

显然我已经检查过我在两台机器上都有相同版本的 Flask。

有人知道为什么会有这种令人讨厌的行为差异吗？

谢谢！

# php - 在 WHERE rlike 和 between 方面需要帮助以获取搜索代码

> ID：14905410
> 
> 赞同：0
> 
> 时间：2013-02-16T00:08:43.687
> 
> 标签：php, mysql

大家好，你能指出我的错误吗:(我想对我的页面进行多列搜索：所以我的脚本是这样的：

```
<?
$search=$_GET['s'];

$query="SELECT * FROM `filmi` WHERE `nomer` rlike '$search' or `rezume` rlike '$search' or `kategoriq` rlike '$search' or ' order by seriq asc ";
?> 
```

想要按价格范围进行搜索，所以我创建了这个：

```
<?
$search=$_GET['s'];
$pricemin=$_GET['min'];
$pricemax=$_GET['max'];
$query="SELECT * FROM `filmi` WHERE `nomer` rlike '$search' or `rezume` rlike '$search' or `kategoriq` rlike '$search' or 'seriq' BETWEEN '$pricemin' and '$pricemax'  order by seriq asc ";
?> 
```

在这种情况下如何替换它？我看一些其他人为搜索引擎编写代码，他们使用`(SELECT * FROM table WHERE Table1 LIKE '%$table1%' AND Table2 LIKE '%$table2%' AND Price BETWEEN '%$min%','%$max%'");` 但它不适用于我的；（请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:41:03.873

用于`BETWEEN`按价格范围过滤您的结果集，如下所示

```
$query="SELECT * FROM `filmi` 
         WHERE (`nomer` RLIKE '$search' OR 
                `rezume` RLIKE '$search' OR 
                `kategoriq` RLIKE '$search') AND 
                `seriq` BETWEEN '$pricemin' AND '$pricemax'  
         ORDER BY seriq"; 
```

这是[sqlfiddle](http://sqlfiddle.com/#!2/c5eda/2)

正如@cryptic 建议的那样，考虑使用带有`mysqli_*`或的准备好的语句`PDO`。

**UPDATE3：**这就是您如何在您的情况下使用准备好的语句，`mysqli`并可以仅按关键字、按关键字和价格范围或仅按价格范围进行搜索：

```
$stype = 0;
if (isset($_GET['s']) && $_GET['s']){
    $search=$_GET['s'];
    $stype += 1;
}
if (isset($_GET['min']) && $_GET['min'] && 
    isset($_GET['max']) && $_GET['max']){
    $pricemin=$_GET['min'];
    $pricemax=$_GET['max'];
    $stype +=2;
}
if (!$stype) {
    echo "Required parameter(s) missing.";
    exit;
}
/* connect to the database*/
$db = new mysqli("localhost", "user", "password", "dbname");
/* check connection */
if ($db->connect_errno) {
    echo "Connection failed: " . $db->connect_error;
    exit();
}
$query="SELECT * FROM `filmi` WHERE ";
if ($stype == 1) {
    $query .= " (`nomer` rlike ? OR `rezume` rlike ? OR `kategoriq` rlike ?) ";
} elseif ($stype == 2) {
    $query .= " `seriq` BETWEEN ? AND ? ";
} elseif ($stype == 3) {
    $query .= " (`nomer` rlike ? OR `rezume` rlike ? OR `kategoriq` rlike ?) AND `seriq` BETWEEN ? AND ?";
}
$query .= " ORDER BY seriq";
/* create a prepared statement */
if (!$stmt = $db->prepare($query)) {
    //handle error here;
    echo "Error preparing statement.";
    exit;
}
/* bind parameters for markers */
if ($stype == 1) {
    $stmt->bind_param("sss", $search, $search, $search);
} elseif ($stype == 2) {
    $stmt->bind_param("dd", $pricemin, $pricemax);
} elseif ($stype == 3) {
    $stmt->bind_param("sssdd", $search, $search, $search, $pricemin, $pricemax);
}
/* execute query */
$stmt->execute();
/* get result */
$result = $stmt->get_result();
if ($result) {
/* now you can fetch the results into an assoc array */
    while ($row = $result->fetch_assoc()) {
        echo $row['nomer']. ", " .$row['rezume']. ", " .$row['kategoriq']. ", " .$row['seriq']. "<br>";
    }
}
/* close statement */
$stmt->close();
/* close db connection */
$db->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:43:13.487

查询（忽略 SQL 注入）：

```
SELECT * FROM table 
WHERE field1 LIKE '%$table1%' 
AND field2 LIKE '%$table2%' 
AND Price BETWEEN 'val3' AND 'val2' 
```

您不能使用[BETWEEN](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)进行`like`比较。

# c# - 正则表达式将第一次出现的“#”替换为“_”

> ID：14905411
> 
> 赞同：0
> 
> 时间：2013-02-16T00:09:14.013
> 
> 标签：c#, regex

如何构建一个正则表达式来替换第一次出现的`#`with `_`。

我需要更改`f2b1_last_name_buyer`为 `f2b1#last_name_buyer`

```
resultString = Regex.Replace(subjectString, "^([^_]+)_", "#", RegexOptions.Singleline); 
```

但它会将所有字符都擦到第一个 _

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:20:30.203

你可以这样做：

```
var input = "f2b1_last_name_buyer";
var pattern = "_";
var regex = new Regex(pattern);
var result = regex.Replace(input, "#", 1);

//Do something with result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:12:06.707

```
Regex.Replace(subjectString, "^([^]+)", "#", RegexOptions.Singleline, 1); 
```

最后一个参数是停止前要进行的替换次数。

请参阅此处的示例：http: [//msdn.microsoft.com/en-us/library/haekbhys.aspx](http://msdn.microsoft.com/en-us/library/haekbhys.aspx)

# sql - 类表继承、运行时模式更改和 ORM

> ID：14905415
> 
> 赞同：1
> 
> 时间：2013-02-16T00:09:35.010
> 
> 标签：sql, orm

我正在考虑产品属性的模型。类表继承看起来很棒，但我想知道是否可以将 ORM 与这样的模型一起使用。

如果您以商业软件为例，供应商可能想要创建新的产品类型（即新表）。

例子 ：

```
product {
  id,
  name,
  creation_date
} 
```

供应商创建了一个新的 tshirts 类型，它创建了表：

```
product_tshirts {
  product_id (fk to a product in the products table),
  size,
  color
} 
```

ORM 必须适应运行时模式的变化（即具有某种可以映射到任何产品表的动态实体）。

应该可以这样做：

```
// Should return all tshirts having a size = 10
tshirts = orm->find('tshirts', 'size', 10) 
```

如果您使用表名的约定，例如 product_*

```
// Should return all products from different tables having a "size" column
// and a size = 10
products = orm->find('size', 10) 
```

我想知道这样的 ORM 是否存在（不管是什么语言，它只是为了提供信息）。

# c# - 分析为什么在分析我的应用程序时会在内存中保留更多数量的字符串对象

> ID：14905417
> 
> 赞同：0
> 
> 时间：2013-02-16T00:10:15.910
> 
> 标签：c#, asp.net, vb.net

我一直在分析我的应用程序是否存在高 CPU 问题（负载测试期间 CPU 时钟频率约为 80%）。我们从 MS 支持团队得到的反馈之一是 Full GC 每 2 秒运行一次，这是 CPU 密集型的，他们提到创建了许多字符串对象。因此，我一直在使用 ANTS 分析器对应用程序进行分析，并且我看到我们在自定义 Web 控件中动态呈现的 html 标记被保存在内存中（由 ANTS 分析器显示）。即使我们动态绑定到按钮 onclick 事件的字符串被保存在内存中。

例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    Button1.Attributes.Add("OnClick", "return ValidateTheWorksheet('Default');");
} 
```

在上面的代码中，ANTS 分析器显示`"return ValidateTheWorksheet('Default');"`，即使在页面完全呈现后，String 也会保留在内存中。

ANTS profiler 支持说每个内存快照都会进行一次完整的 GC 收集。那为什么那个字符串会出现在内存中？

任何建议都会有所帮助...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:49:58.713

问题已解决。它被发现是依赖团队的可重用代码之一，他们有一个 linq 查询，在 linq 查询中，他们使用 ToUpper 和 Trim 函数进行字符串比较。

因为，它将在整个列表中循环，这部分逻辑是 CPU 昂贵的。

谢谢

# .net - 删除 Visual Studio 2010 事件处理程序

> ID：14905418
> 
> 赞同：1
> 
> 时间：2013-02-16T00:10:26.873
> 
> 标签：.net, winforms, visual-studio-2010, event-handling, windows-forms-designer

我正在处理一个项目，直到最近我才将所有控件都保留为默认名称。在项目开始时多次，我不小心双击了某个东西，它为该控件创建了一个事件处理程序。当时我不知道如何删除它们，因为 Ctrl+Z 的撤销远远超出我的预期。

`Events`我现在知道我可以在窗口部分查看和重构控件正在使用的事件`Properties`。我主要解决了这些问题，但我有一个函数调用`TabPage4_Click`，但我找不到实际使用它的控件。我不再有 TabPage4，此时我已重命名所有内容，并且我的所有标签页都没有使用此事件处理程序，但如果我删除它，我的应用程序将无法编译。

此时，我的表单上有太多控件，无法逐一检查它们是否有任何使用此事件处理程序。我想知道是否有任何方法可以查看事件处理程序列表和使用它们的控件。Visual Studio 2010 中是否有任何方法可以轻松跟踪当前正在使用事件处理程序的控件，以便在不产生任何冲突的情况下将其删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:51:35.577

除了在表单上添加控件之外，避免将设计器用于其他任何事情。如果您在表单初始化时显式注册事件，您会发现事件和事件处理程序更容易管理：

```
void RegisterControlEvents()
{
    myButton.Click += MyClickHandler;
    ...
}

void MyClickHandler(object sender, EventArgs e)
{
    ...
} 
```

很快你就会发现自己根本不使用设计器......

至于死代码，删除它并尝试构建；如果有参考，VS 会告诉你删除在哪里破坏了你的代码/去哪里修复它。

如果您正在寻找工具，我会说获取 ReSharper 演示。我认为没有其他东西可以比较（不，我不为 JetBrains/ReSharper 工作，它只是一个很棒的工具）。

# excel - 使用 VBA 选择和过滤 Excel 工作表列表

> ID：14905420
> 
> 赞同：-2
> 
> 时间：2013-02-16T00:10:37.840
> 
> 标签：excel, vba

对于每个 Excel 工作表，都存在一个变量*var1*。

我想编写一个 VBA 表达式，它将选择 Excel 工作表，其中变量*var1*的值是相同的。

如何获取所有工作表的列表？然后根据*var1*值过滤它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:19:32.237

要浏览工作表，您可以使用 FOR EACH 循环。如果可能，将 ActiveWorkbook 替换为您的工作簿。

```
For Each Sheet In ActiveWorkbook.Sheets
        <do things; 'Sheet' is an object now that takes on the properties 
          of each sheet in the workbook one at a time.>
Next Sheet 
```

进入该循环后，您可以检查 var1 并做任何您喜欢的事情。我不完全确定每张纸上的变量 var1 是什么意思，您可能想在评论中澄清一些。

# php - Codeigniter PDO 模拟准备

> ID：14905423
> 
> 赞同：4
> 
> 时间：2013-02-16T00:11:00.933
> 
> 标签：php, mysql, codeigniter, pdo, prepared-statement

我一直在阅读，人们说在设置与数据库的连接时应该添加

```
$dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

告诉 PDO 使用真实的 PDO 语句禁用模拟的准备好的语句。

如何在 Codeigniter 中进行设置？

我正在使用 codeigniter 2.1.3

编辑1：

我现在如何连接：

```
$active_group = 'default';
$active_record = FALSE;

$db['default']['hostname'] = 'mysql:host=localhost';
$db['default']['username'] = 'XXXXXXX';
$db['default']['password'] = 'XXXXXXXXXX';
$db['default']['database'] = 'XXXXXXX';
$db['default']['dbdriver'] = 'pdo';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = FALSE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

一个查询示例是：

```
function validate_login()
    {
    $bcrypt = new Bcrypt(17);   
    $sql = "SELECT * FROM users WHERE username = :user";
    $loginQ = $this->db->conn_id->prepare($sql);
    $loginQ->bindParam(':user', $this->input->post('username'));
    $loginQ->execute(); 
    $row = $loginQ->fetch();
    $hash = $row['password'];
    $password = $this->input->post('password');
    $verified = $bcrypt->verify($password, $hash);

        if($bcrypt->verify($password, $hash))
        {
            return $loginQ;
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T01:46:43.393

system/database/drivers/pdo 在第 96 行附近，您可以编辑错误模式，并且可以将 emulate prepares 添加为 false。现在大多数数据库服务器都可以利用这一点，我知道 mysql 可以。希望这对其他人有帮助。

```
function db_connect()
    {
        $this->options['PDO::ATTR_ERRMODE'] = PDO::ERRMODE_EXCEPTION;
        $this->options['PDO::ATTR_EMULATE_PREPARES'] = FALSE;

        return new PDO($this->hostname, $this->username, $this->password, $this->options);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T08:07:39.227

我在这个问题上挣扎了很久。而且我无法找到一个不太老套的可行解决方案。这就是我想出的。在所有控制器中工作，但可以以类似的方式扩展到任何 CI 类。

1.  更改**application/config/database.php**以使用 PDO：

    ```
    $db['default'] = array(
        'dsn'   => 'mysql:host=localhost;dbname={{my_db}};charset=utf8;',
        'username' => 'my_db_user',
        'password' => '123',
        'database' => 'my_db',
        'dbdriver' => 'pdo',
        ...
    ); 
    ```

2.  创建 MY_Controller 类以扩展 CI_Controller **application/core/MY_Controller.php**：

    ```
    class MY_Controller extends CI_Controller {
        public function __construct() {
            parent::__construct();
            $this->db->conn_id->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        }
    } 
    ```

3.  在控制器中使用扩展类。在所有控制器中更改此设置（示例用户控制器）：

改变这个：

类用户扩展**CI** _Controller {

进入这个->

类用户扩展**我**的 _Controller {

现在您应该拥有从数据库返回的所有正确类型的数据。在 CI3 上测试，但我相信它也应该在 CI2 上工作。

# wordpress - 升级后的 Wordpress 错误“无法重新声明”+“eval()'d”

> ID：14905426
> 
> 赞同：0
> 
> 时间：2013-02-16T00:11:21.623
> 
> 标签：wordpress, eval

强制 wordpress 上传后出现此错误（我在数据库中工作时有一次收到警报 - 在后端，只有一个选项可以升级到较新的可用版本）：

```
Fatal error: Cannot redeclare _421736532() (previously declared in /home/user/domains/mydomain.com/public_html/wp-content/themes/twentyelevenmodified/header.php(68) : eval()'d code:1) in /home/user/domains/mydomain.com/public_html/wp-content/themes/twentyelevenmodified/header.php(68) : eval()'d code on line 1 
```

以上是我尝试 mydomain.com 时

当我尝试 mydomain.com/wp-admin/ 时，我被重定向到 wp-login.php 并收到以下错误：

```
Fatal error: Cannot redeclare _421736532() (previously declared in /home/user/domains/mydomain.com/public_html/wp-login.php(80) : eval()'d code:1) in /home/user/domains/mydomain.com/public_html/wp-login.php(80) : eval()'d code on line 1 
```

从现在 5 个小时开始，我就开始尝试不同的事情。任何帮助将不胜感激。

编辑：经过测试，我发现function.php文件正确调用了函数twentyeleven_header_style（），并且在调用此函数后问题就来了。所以这是导致问题的下一个函数调用。如果我能知道下一个功能是什么！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:15:03.917

Wordpress 不使用具有这些名称的函数。停用您的插件或重命名插件文件夹。

如果这不起作用，那么它可能来自您的主题。重命名您的主题文件夹，以便 wordpress 恢复为默认主题（假设存在默认主题）。

听起来您购买了带有混淆代码的主题或插件，并且正在使用它`eval()`来运行它，并且可能会打电话回家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:52:19.487

经过大量研究，我发现有问题的网站被黑了。超过 100 个文件被代码损坏。我把它们都清理干净了，现在一切正常。

对于其他面临相同问题的人，请将整个文件下载到您的计算机并查找 eval 代码（可以很容易地识别）。

# expression - 旋转自动化

> ID：14905427
> 
> 赞同：0
> 
> 时间：2013-02-16T00:11:35.200
> 
> 标签：expression, maya

我在 Maya 中遇到了这个表达式的一些问题，基本上只要半径小于 1，计算就会被抛出太多。

```
float $radius = `getAttr prefix66_calculations_shape.rad`;
float $prevZval = `getAttr -time (frame -1) prefix66_driver.translateZ`;
float $prevXval = `getAttr -time (frame -1) prefix66_driver.translateX`;
float $Zval = prefix66_driver.translateZ - $prevZval;
float $Xval = prefix66_driver.translateX - $prevXval;
float $distance = ($Zval * $Zval) + ($Xval * $Xval);
float $direction;
$distance = sqrt($distance);
if ($prevZval > prefix66_driver.translateZ) {
    $direction = 360;
}
else { 
    $direction = 360;
}
float $rotation = ($distance / (2 * 3.142 * $radius)) * $direction;
print $rotation;
pCube1.rotateX = pCube1.rotateX + $rotation; 
```

也许我的操作顺序是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:09:07.713

您的代码的旋转部分看起来不错。`getAttr -time`但是，您有一个 if/else 块在两种情况下都返回相同的内容，正如@joojaa 所提到的，如果您缓存翻译值，则可以避免。实际上，您应该避免`getAttr`并`setAttr`完全在表达式中。

相反，直接引用您想要的属性，Maya 将为您创建连接。当您重命名节点等时，这会更快并且更不容易出错。

要缓存平移值并计算位置变化，您可以向节点添加属性并在表达式中使用它们。

假设您有一个名为 wheel 的圆柱体，它围绕其局部 X 旋转，并且是一个名为 control 的组节点的父级：

添加向量属性：`control.lastTranslate`
添加向量属性：`control.deltaTranslate`
添加浮点属性：`control.distance`

这是一个表达式，它将存储平移的变化，然后根据行进的距离旋转轮子。

```
// When deltaTranslate is calculated, lastTranslate still has its previous value.
control.deltaTranslateX = control.translateX - control.lastTranslateX;
control.deltaTranslateY = control.translateY - control.lastTranslateY;
control.deltaTranslateZ = control.translateZ - control.lastTranslateZ;
control.lastTranslateX = control.translateX;
control.lastTranslateY = control.translateY;
control.lastTranslateZ = control.translateZ;
control.distance = mag(<<control.deltaTranslateX,control.deltaTranslateY,control.deltaTranslateZ>>);

// Get radius from history node (or somewhere) and move the wheel's hub off the floor.
wheel.translateY = polyCylinder1.radius;

// add rotation to the wheel 
float $tau = 6.283185307179586;
wheel.rotateX = wheel.rotateX + ( control.distance* -360.0) /  (polyCylinder1.radius * $tau ); 
```

最好通过动画而不是在视图中拖动节点来测试这种事情。

如果你想让车轮瞄准行驶方向，你可以在 translate + deltaTranslate 处添加一个定位器并连接一个瞄准约束。

例如

```
aimLocator.translateX = (control.deltaTranslateX / control.distance) + control.translateX;
aimLocator.translateY = (control.deltaTranslateY / control.distance) + control.translateY;
aimLocator.translateZ = (control.deltaTranslateZ / control.distance) + control.translateZ; 
```

除以距离将使偏移正常化。您可能应该检查距离不为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:33:41.467

我相信我已经弄清楚了:)

用新的翻译平均值查询旧的翻译平均值会给我一个正确或错误的答案，这是我改变方向所需要的。

还添加了一个 if 语句，如果球是静止的且旋转的，则轮子不会自动转动。

```
float $oldRotateAverage;
float $oldTransAverage;
float $direction;

nurbsCircle1.DeltaTranslateX = nurbsCircle1.translateX - nurbsCircle1.LastTranslateX;
nurbsCircle1.DeltaTranslateY = nurbsCircle1.translateY - nurbsCircle1.LastTranslateY;
nurbsCircle1.DeltaTranslateZ = nurbsCircle1.translateZ - nurbsCircle1.LastTranslateZ;
nurbsCircle1.LastTranslateX = nurbsCircle1.translateX;
nurbsCircle1.LastTranslateY = nurbsCircle1.translateY;
nurbsCircle1.LastTranslateZ = nurbsCircle1.translateZ;
nurbsCircle1.Distance = mag(<<nurbsCircle1.DeltaTranslateX,nurbsCircle1.DeltaTranslateY,nurbsCircle1.DeltaTranslateZ>>);

if ($oldTransAverage >= (nurbsCircle1.LastTranslateX + nurbsCircle1.LastTranslateY + nurbsCircle1.LastTranslateZ)){
    $direction = -360.00;
} else {
    $direction = 360.00;
};

if (Sh54_anim.auto == 1 )
{
    Sh54_point_grp.rotateZ -= nurbsCircle1.Distance * $direction / 2 / 3.14 / 2;    
};

if ((nurbsCircle1.rotateX + nurbsCircle1.rotateY + nurbsCircle1.rotateZ) != $oldRotateAverage && nurbsCircle1.Distance == $oldTransAverage){
    Sh54_anim.auto = 0;
} else {
    Sh54_anim.auto = 1;
};

Sh54_point_grp.back_up = Sh54_point_grp.translateX;
$oldRotateAverage = nurbsCircle1.rotateX + nurbsCircle1.rotateY + nurbsCircle1.rotateZ;
$oldTransAverage = nurbsCircle1.translateX + nurbsCircle1.translateY + nurbsCircle1.translateZ; 
```

# javascript - jQuery在每个选项卡中选择第一个手风琴

> ID：14905430
> 
> 赞同：0
> 
> 时间：2013-02-16T00:11:57.387
> 
> 标签：javascript, jquery, jquery-selectors, tabs, jquery-tabs

我有一个使用 jQuery 选项卡的页面。除了其他内容之外，每个选项卡都包含一个或多个动态生成的 jQuery 手风琴。例子：

```
<div id="tab1" class="tab">
    <div>
        Some stuff
    </div>
    <div class="accordion">
        I am an accordion
    </div>
</div>
<div id="tab2" class="tab">
    <div class="accordion">
        I am also an accordion
    </div>
    More stuff
    <div class="accordion">
        I am also an accordion
    </div>
</div> 
```

我希望每个选项卡中的第一个手风琴保持打开状态，而其他（如果有的话）折叠起来。我努力了：

```
$('.tab .accordion:first') 
```

它只选择页面上的第一个手风琴（显然）。我也试过：

```
$('.tab .accordion:first-child') 
```

这会选择 tab2 中的第一个手风琴，但不会选择 tab1 中的手风琴，因为它上面有一些东西。我也试过：

```
$('.tab > .accordion').filter(':first-child')
$('.tab').children('.accordion:first-child') 
```

以及我能想到的几乎所有选择器组合。此时我的大脑已经炸了。在您向我指出一个重复的问题之前，这些都不是完全相同的问题：

[JQuery Tab each Selected tab first text box focus](https://stackoverflow.com/questions/8178898/jquery-tab-each-selected-tab-first-text-box-focus)

[jquery选择具有类的父类的第一个孩子](https://stackoverflow.com/questions/13406332/jquery-select-first-child-with-class-of-a-parent-with-class)

[每个父级上每个第一个元素的 jQuery 选择器](https://stackoverflow.com/questions/3968853/jquery-selector-for-each-first-element-on-every-parent)

[jQuery选择具有特定属性的第一个孩子](https://stackoverflow.com/questions/1766652/jquery-selecting-the-first-child-with-a-specific-attribute)

就我而言，不同之处在于我几乎无法控制这些选项卡中显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:19:06.187

我建议：

```
$('.tab').find('.accordion:first'); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/KZnwa/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:19:24.103

尝试这个：

```
 $('.accordion:first', '.tab') 
```

# java - 帮助在java中循环代码

> ID：14905434
> 
> 赞同：-1
> 
> 时间：2013-02-16T00:12:21.443
> 
> 标签：java, loops, boolean, variable-assignment

我需要帮助在 Java 中循环我的代码。到目前为止，我有：

```
import java.util.Scanner;
public class chara{
    public static void main(String[]args){
        int count = 0;
        Scanner input = new Scanner(System.in); 
        System.out.println("Input a string");
        String user=input.nextLine();
        if(user.length()<7)
        {
            return;
        }
        else
        {
        }
        System.out.println("Now input a letter to be replaced");
        String letter = input.next();
        if(letter.length()!=1) 
        {
            return;
        }
        else
        {
        }
        String user2 = user.replace(letter, "-");
        String user3 = user.replace(letter, "");
        count += (user.length() - user3.length());
        System.out.println(user2);
        System.out.println(user3);
        System.out.println("#"+letter+"'s: "+count);
    }
} 
```

除了不满足字符串条件（用户<7，字母！= 1）时，代码会执行我想要的所有操作，程序终止并且我需要它做的是再次提出问题。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:36:08.263

您只需要一个带有中断条件的循环，这应该为您完成：

```
 Scanner input = new Scanner(System.in); 
       System.out.println("Input a string");
       String user=input.nextLine();
       while (true)
       {
           if(user.length() <7 ) {break;}
           input = new Scanner(System.in); 
           System.out.println("Too long, input a string < 7");
             user=input.nextLine();

       }

   if(user.length()<7)...... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:36:26.677

一种简单的方法是将主逻辑包装在带有布尔条件的循环中。当输入中存在“错误”时，此条件保持为真。当用户按需要继续时，条件为假。

您的代码将如下所示：

```
import java.util.Scanner;
public class Tester{
    public static void main(String[]args){
        int count = 0;
        boolean keepGoing = true;
        Scanner input = new Scanner(System.in); 
        while(keepGoing) {

            System.out.println("Input a string");
            String user=input.nextLine();
           if(user.length()<7)
           {
               keepGoing = true;
               //enter an error message here
           }
           else
           {
               System.out.println("Now input a letter to be replaced");
                String letter = input.next();
                if(letter.length()!=1) 
                {
                    keepGoing = true;
                    //enter an error message here
                }
                else
                {
                    String user2 = user.replace(letter, "-");
                    String user3 = user.replace(letter, "");
                    count += (user.length() - user3.length());
                    System.out.println(user2);
                    System.out.println(user3);
                    System.out.println("#"+letter+"'s: "+count);
                    keepGoing = false;
                }
           }
        }   
        input.close();  //Close resources
    }
} 
```

## 无关

约定是类名以大写字母开头。在您的情况下，您的课程应该是`Chara`，而不是`chara`。

此外，在打开资源时，请确保关闭它们。这是为了避免资源泄露。一些 IDE 会告诉您类似这样的信息`Resource leak: 'input' is never closed`。使用一个好的 IDE 来帮助您解决像这样的潜在问题是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:19:02.430

您需要将循环代码放在可以调用的方法中，然后当不满足条件时，您可以返回您的问题，并根据该条件退出程序或调用循环方法。

# android - 如何下载多张图片（只知道根地址）

> ID：14905436
> 
> 赞同：0
> 
> 时间：2013-02-16T00:12:36.387
> 
> 标签：android, image, connect

我遇到了以下问题。我想下载多个图像并将它们显示到网格视图或画廊中。我设法从特定地址下载了单个图像。例如：“www.example.com/images/image1.jpg”

现在我想下载位于根地址“www.example.com/images/”的所有图像，但我不知道图像的名称，所以我不知道每个图像的具体地址。

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:19:22.710

如果 html 页面引用图像或 /images/ 文件夹内容在 Web 浏览器中可见，您可以使用 wget 或 curl 检索图像。这本身就是另一个编程问题。WGET 或 CURL

说不可能，就等于放弃。

世事皆可能 ：）

# c++ - 将异常类与主类放在同一个文件中是不是不好的形式

> ID：14905438
> 
> 赞同：0
> 
> 时间：2013-02-16T00:13:12.220
> 
> 标签：c++

我正在编写一个非常简单的程序，只有一个类。我也想导出我自己的异常，但我不想使用新文件。在一个文件中有多个不完全相关的类是可以的还是不好的编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:15:06.383

对于小型项目来说这没问题，但对于任何更大的项目来说，它很快就会变成维护难题。

在文件和命名空间中对类进行分类有助于组织，更直观地找到您要查找的内容，并且**更**容易跟踪更改（在版本控制中）。

还有依赖问题，这可能是最重要的问题——如果你想在其他地方使用那个异常怎么办？您不能包含实现文件，即使您将其保留为与其他不相关类共享的标头，您也会用不需要的符号污染新的翻译单元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:27:02.690

我认为答案，就像许多事情一样，取决于情况。在这种情况下，问题将是异常与类的耦合程度。如果你的类被调用`FooBarBaz`并且你的异常被调用`FooBarBazException`，那么似乎没有人想在其他地方使用它，我认为将它与类打包是可以的。（实际上，您可能会争辩说它应该是 FooBarBaz 的嵌套类。）

也就是说，当我编写异常时，我会尝试将它们与原因而非特定类联系起来。例如，如果我正在编写一个压缩库并且我支持几种不同的算法，我可能会编写一个`DataCorruptionException`类来传达对损坏的检测。然后我可以使用异常消息来提供更详细的信息，例如异常来自哪个类/函数。

# php - 如何将对象实例作为函数的默认参数？

> ID：14905442
> 
> 赞同：0
> 
> 时间：2013-02-16T00:13:44.547
> 
> 标签：php

我正在尝试为我的函数设置一个默认参数。因此，例如，您通常总是可以做类似的事情。

```
function foo ($var = 'blah')
{
    return $var;
} 
```

但是当我尝试一些更复杂的东西时，我遇到了一个解析错误，显示出意外的 T_VARIABLE。

```
function foo ($var = $this->string)
{
    return $var;
} 
```

您将如何使用对象的实例作为默认参数。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:15:41.573

```
function foo ($var = null)
{
    return ($var === null) ? $this->string : $var;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:15:41.370

您不能从默认函数参数值实例化对象。

您可以测试`$null`然后在方法中实例化它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:16:17.470

你不能这样做。函数参数只能初始化为常量值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T00:16:27.953

我不认为你能做到这一点。默认值只能是常量。

[http://php.net/manual/en/functions.arguments.php](http://php.net/manual/en/functions.arguments.php)

“默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。”

# python - 我可以避免使用“asmatrix”吗？

> ID：14905443
> 
> 赞同：0
> 
> 时间：2013-02-16T00:13:49.893
> 
> 标签：python, numpy

我有什么方法可以直接创建矩阵而不必使用[`asmatrix`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.asmatrix.html)？据我所见，Numpy 中的所有典型矩阵函数（`ones`、`rand`等）都返回数组，而不是矩阵，这意味着（根据文档）`asmatrix`将复制数据。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:18:01.543

根据文档：

> 与矩阵不同，如果输入已经是矩阵或 ndarray，则 asmatrix 不会进行复制。相当于矩阵（数据，复制=假）。

因此，如果`asmatrix`不需要，*则不*复制数据：

```
>>> import numpy as np
>>> a = np.arange(9).reshape((3,3))
>>> b = np.asmatrix(a)
>>> b.base is a
True
>>> a[0] = 3
>>> b
matrix([[3, 3, 3],
        [3, 4, 5],
        [6, 7, 8]]) 
```

# c# - SignalR 和 c# 导致版本错误

> ID：14905444
> 
> 赞同：3
> 
> 时间：2013-02-16T00:14:00.773
> 
> 标签：c#, jquery, .net, signalr

我刚刚安装了 SignalR 并收到以下错误。看起来好像我有一个版本问题，但我不知道在哪里解决它。我已经使用 NuGet 安装程序安装了 SignalR。

有人知道怎么修这个东西吗？

```
Could not load file or assembly 'Microsoft.Owin.Host.SystemWeb, Version=0.10.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileLoadException: Could not load file or assembly 'Microsoft.Owin.Host.SystemWeb, Version=0.10.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)

Source Error: 

Line 35:         protected void Session_Start(Object sender, EventArgs e)
Line 36:         {
Line 37:   RouteTable.Routes.MapHubs();
Line 38:         }
Line 39:     } 
```

* * *

未捕获的类型错误：无法读取未定义 signalR_test.html:35 的属性“客户端”

```
 <!--Script references. -->
    <script src="../Scripts/jquery-1.9.1.js"></script>
    <script src="../Scripts/jquery.signalR-1.0.0-rc1.js"></script>
    <script src="../Scripts/jquery.signalR-1.0.0-rc1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>

    <!--Add script to update the page and send messages.-->
    <script type="text/javascript">
        $(function () {
            // Declare a proxy to reference the hub. 
            var chat = $.connection.CollaboratorHub;
            // Create a function that the hub can call to broadcast messages.
            chat.client.broadcastMessage = function (name, message) {
                // Html encode display name and message. 
```

* * *

——包裹。

```
<packages>
  <package id="EntityFramework" version="5.0.0" targetFramework="net45" />
  <package id="jQuery" version="1.8.2" targetFramework="net45" />
  <package id="jQuery.UI.Combined" version="1.8.11" targetFramework="net45" />
  <package id="jQuery.Validation" version="1.9.0.1" targetFramework="net45" />
  <package id="knockoutjs" version="2.1.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Mvc" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Providers.Core" version="1.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Providers.LocalDB" version="1.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Razor" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.SignalR" version="1.0.0-rc1" targetFramework="net45" />
  <package id="Microsoft.AspNet.SignalR.Core" version="1.0.0-rc1" targetFramework="net45" />
  <package id="Microsoft.AspNet.SignalR.JS" version="1.0.0-rc1" targetFramework="net45" />
  <package id="Microsoft.AspNet.SignalR.Owin" version="1.0.0-rc1" targetFramework="net45" />
  <package id="Microsoft.AspNet.SignalR.SystemWeb" version="1.0.0-rc1" targetFramework="net45" />
  <package id="Microsoft.AspNet.Web.Optimization" version="1.0.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi" version="4.0.20505.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Client" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Core" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.WebHost" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.jQuery.Unobtrusive.Ajax" version="2.0.20505.0" targetFramework="net45" />
  <package id="Microsoft.jQuery.Unobtrusive.Validation" version="2.0.20505.0" targetFramework="net45" />
  <package id="Microsoft.Net.Http" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Owin.Host.SystemWeb" version="1.0.0-rc1" targetFramework="net45" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" targetFramework="net45" />
  <package id="Modernizr" version="2.6.2" targetFramework="net45" />
  <package id="Newtonsoft.Json" version="4.5.9" targetFramework="net45" />
  <package id="Owin" version="1.0" targetFramework="net45" />
  <package id="WebGrease" version="1.1.0" targetFramework="net45" />
</packages> 
```

使用地点：[AlumCloud](http://www.AlumCloud.Com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:22:12.567

对我来说，这听起来像问题是你正在使用一些想要依赖于特定版本的 Microsoft.Owin.Host.SystemWeb 的程序集：即版本 X，但正在加载的 Microsoft.Owin.Host.SystemWeb 版本是版本 Y。默认情况下，CLR 会为此引发错误。

您可以通过确保始终使用一个版本（例如 X）并且所有依赖程序集都引用该版本来解决此问题。

您可能需要查看 ildasm/reflector 中的所有程序集，以确切了解它们尝试加载的版本。

[或者，您可以尝试通过使用程序集绑定重定向](http://msdn.microsoft.com/en-us/library/twy1dw1e%28v=vs.80%29.aspx)来强制 CLR 接受不同的程序集版本，该重定向对 CLR 说“当某些程序集要求版本 X 时加载版本 Y”。即使您尝试这样做，您的应用程序也只有在程序集公共界面没有更改时才会成功。

（注 1，我无法从您的问题中看出它在哪里找到 Microsoft.Owin.Host.Systemweb 但由于缺乏更多信息，我认为它是 app bin 文件夹，它不会影响答案，但它确实得到了在调试版本不匹配的方式。）

# c - 尝试从排序列表创建新链表时出现分段错误 11

> ID：14905452
> 
> 赞同：0
> 
> 时间：2013-02-16T00:14:43.393
> 
> 标签：c, arrays, linked-list, segmentation-fault, nodes

只是为了解释发生了什么，我将一个排序的链表输入到一个方法中。在这个链表中是包含字符串的节点。节点包含字符串和后面会提到的 2 个计数器。这些字符串是字母数字的，可以重复。最后，我想输出一个链表，其中每个节点包含一个唯一的单词（全部小写），出现次数的计数器，以及单词不同方差的计数器（方差是由某些字符的不同大小写引起的）。我相信它合乎逻辑；但是，我遇到了分段错误。

提前致谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

typedef int bool;
#define TRUE 1
#define FALSE 0

struct Node{
  char value[100];
  int numOccur;
  int numVariance;
  struct Node *next;
};

struct Node * getFinalNodes(struct Node *head){
    struct Node * curr;
    struct Node * finalNode;
    struct Node * ptr;
    struct Node * finalCurr;
    struct Node * prev;
    int m = 0;
    int z = 0;
    char lowercase1[100];
    char lowercase2[100];

    curr = head;                                        //curr = head of sorted node
    finalNode = head;
    ptr = finalNode;
    finalCurr = finalNode;

    for(m = 0; curr->value[m] != '\0'; m++){
        finalNode->value[m] = tolower(curr->value[m]);          //gets first word all lower-cased
    }

    ptr->numOccur=1;                                     //occurance is 1
    ptr->numVariance=1;                                  //variance is 1
    while(curr != NULL && curr->next != NULL){
        prev = curr;
        curr = curr->next;
        if((strcmp(prev->value, curr->value) != 0) && (strlen(prev->value) == strlen(curr->value))){            //example: Ab vs. AB
            for(z=0; curr->value[z] != '\0'; z++){                                                               //turn prev and curr into lowercase
                lowercase1[z] = tolower(prev->value[z]);                                                        //ex. Ab->ab and AB->ab
                lowercase2[z] = tolower(curr->value[z]);
            }
            if(strcmp(lowercase1,lowercase2) == 0){                                                              //if values are same, that means they are the same words, just different capitalizations
                ptr->numOccur++;
                ptr->numVariance++;
            }
            else{                                                                                               //if values are different, then they are completely different strings and put curr.value into a new finalNode
                strcpy(finalNode->value,lowercase2);
                ptr->next = finalNode;
                ptr = ptr->next;
                ptr->numOccur = 1;
                ptr->numVariance =1;
            }
        }
        else if((strcmp(prev->value, curr->value) != 0) && (strlen(curr->value) != strlen(prev->value))){                                                                     //created arrays for prev and curr
            for(z=0; curr->value[z] != '\0'; z++){                                                               //turn prev and curr into lowercase                                                      //ex. Ab->ab and AB->ab
                lowercase2[z] = tolower(curr->value[z]);
            }
            strcpy(finalNode->value,lowercase2);
            ptr->next = finalNode;
            ptr = ptr->next;
            ptr->numOccur = 1;
            ptr->numVariance =1;
       }
       else if(strcmp(prev->value, curr->value) == 0){
            ptr->numOccur++;
       }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:26:49.953

在循环

```
while(curr != NULL){
    prev = curr;
    curr = curr->next;
    if((strcmp(prev->value, curr->value) != 0) && (strlen(prev->value) == strlen(curr->value))){ 
```

`curr`是`NULL`在结束之后`curr = curr->next;`。

然后`strcmp(prev->value, curr->value)`取消引用一个空指针。

您可以将循环条件更改为

```
while(curr != NULL && curr->next != NULL) 
```

# graphics - 我应该在管道的哪个阶段进行剔除和裁剪以及裁剪后应该如何重建三角形

> ID：14905454
> 
> 赞同：2
> 
> 时间：2013-02-16T00:14:47.470
> 
> 标签：graphics, 3d, render

我正在尝试在软件级别实现图形管道。我现在在裁剪和剔除方面遇到了一些问题。

基本上，有两个主要问题：

1.  什么时候应该进行背面剔除？眼睛坐标、剪裁坐标还是窗口坐标？我最初在眼睛坐标中进行了剔除过程，认为这种方式可以减轻剪切过程的负担，因为许多背面的顶点已经被丢弃了。但是后来我意识到，这种方式顶点需要进行2次矩阵乘法，即左乘模型-视图矩阵->剔除->左乘透视矩阵，这在一定程度上增加了开销。

2.  如何剪裁和重建三角形？据我所知，裁剪发生在裁剪坐标中（透视变换之后），换句话说，齐次坐标中的每个顶点都被确定是否应该通过将其 x、y、z 分量与 w 分量进行比较来确定它是否应该被丢弃。到目前为止一切顺利，对吧？但在那之后我需要重建那些有一个或两个顶点的三角形被丢弃。我在谷歌上搜索到 Liang-Barsky 算法在这种情况下会有所帮助，但是在裁剪坐标中我应该使用哪个裁剪平面？我应该只记录裁剪的三角形并在 NDC 中重建它们吗？

任何想法都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T00:40:38.527

(1)

背面剔除可以在您想要的任何地方进行。

在 3dfx 硬件上，可能还有其他只光栅化的卡，它是在窗口坐标中实现的。正如您所说，这会让您处理一些您从未使用过的顶点，但您需要将其与其他成本进行权衡。

您还可以剔除世界坐标；您知道相机的位置，因此您知道从相机到脸部的矢量——只需转到任何边缘顶点。因此，您可以针对正常情况测试其点积。

当我为基于 z80 的 micro 实现软件光栅化器时，我更进一步，将相机转换为模型空间。所以你得到了模型矩阵的逆矩阵（在这种情况下很便宜，因为它们被保证是正交的，所以转置就可以了），将它应用于相机，然后从那里剔除。它仍然是矢量差异和点积，但是如果您仅将表面法线用于剔除，那么它就不必为了相机的利益而对它们中的每一个进行变换。对于那个特定的渲染器，我可以继续从哪些面可见，以确定哪些顶点是可见的，并仅将这些顶点转换为窗口坐标。

(2)

Sutherland-Cohen 的变体是我记得最常看到的东西。您将在多边形外部进行前向扫描，依次检查每条边并进行适当调整。

因此，例如，您从点（V1、V2、V3）之间的凸多边形开始。对于每个剪裁平面，您依次执行以下操作：

```
for(Vn in input vertices)
{
    if(Vn is on the good side of the plane)
        add Vn to output vertices

    if(edge from Vn to Vn+1 intersects plane) // or from Vn to 0 if this is the last edge
    {
        find point of intersection, I
        add I to output vertices
    }
} 
```

并为每架飞机重复。如果您担心重复成本，那么您要么需要采用在面和边之间具有额外间接级别的结构，要么只保留缓存。一旦将顶点标记为输入或输出，您可能会在顶点周围进行破折号，然后缓存每条边的交点，通过键（v1，v2）进行查找。如果您为自己设置了额外的间接级别，则将结果存储在边缘对象中。

# android - 为什么我在运行我的网络应用程序时收到“网页不可用”？

> ID：14905456
> 
> 赞同：1
> 
> 时间：2013-02-16T00:15:02.203
> 
> 标签：android

为什么会这样？

```
public class MainActivity extends Activity

    {

    WebView browser;

    @Override
    public void onCreate(Bundle icicle)
    {
        super.onCreate(icicle);
        setContentView(R.layout.activity_main);
        //browser.getSettings().setJavaScriptEnabled(true);

        browser = (WebView)findViewById(R.id.webkit);

        browser.loadUrl("www.microsoft.com");
    }
} 
```

但是当我运行 Android HTML5 应用程序时，我得到了这个屏幕 goo.gl/uDkj1

我还尝试了其他可能性，例如 http:// 在前面或用斜杠结束地址等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T00:18:21.347

我猜你忘了设置互联网权限：

```
<manifest [...]>
 [...]
 <uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T00:18:23.903

确保您在 AndroidManifest.xml 中设置了 Internet 权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

编辑：

```
browser.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {         
        view.loadUrl(url);
        return true;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:25:15.827

正如另一个答案所说，您必须包含`Internet`许可，但请注意 `http://www.google.com`不同，`www.google.com`因此请在`URL`.

# gtkmm - Glade 文件的数据类型是什么？

> ID：14905461
> 
> 赞同：1
> 
> 时间：2013-02-16T00:15:13.300
> 
> 标签：gtkmm, gtk3

按照 gtkmm 3 的官方教程，这是如何实例化一个 glade 文件：

```
Glib::RefPtr<Gtk::Builder> builder=Gtk::Builder::create_from_file("basic.glade"); 
```

那么，“basic.glade”的数据类型是什么？我知道它的 XML，但如何在代码中做到这一点？

在 GTK 2.4 中它是：

```
Glib::RefPtr<Gnome::Glade::Xml> &refXml; 
```

这在 gtkmm 3 / GTK 3 中不再适用于我。我想要的是创建一个类，我需要声明正确的数据类型。

谢谢

PS我正在经历的教程是[这个](http://www.c-plusplus.de/forum/113239)。我知道代码是 2.x，我想在 3.x 中做同样的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:24:28.257

`Gtk::Builder`是 的替代品`Gnome::Glade::Xml`。

# scala - 如何通过组合其他对象的 API 来创建 API 外观？

> ID：14905473
> 
> 赞同：2
> 
> 时间：2013-02-16T00:16:38.530
> 
> 标签：scala

我在 Scala 中有许多无状态对象，我想将它们组合成一个 API - 一种外观如下：

```
object tools {
   // List all methods in toolA

   // List all methods in toolB

   // List all methods in toolC

}
object ToolA { ... }
object ToolB { ... }
object ToolC { ... } 
```

显然，维护列表很烦人，因为,和中`tools`的方法变化很大。A/B/C 中没有状态，也没有设置参数。`ToolA``ToolB``ToolC`

有什么说法…… *“make `tools`contains the set of all the methods in `ToolA`, `ToolB`, and `ToolC`”*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T01:08:30.713

将 ToolA、B 和 C 定义为特征

```
trait ToolA {
    //stateless methods in ToolA
} 
```

然后你可以做

```
object tools extends ToolA with ToolB with ToolC 
```

您还可以为 ToolA、ToolB 和 ToolC 设置一个辅助对象

```
object toolA extends ToolA
object toolB extends ToolB
object toolC extends ToolC 
```

# java - 如何确定已提交的表单并在 servlet 中验证它们

> ID：14905475
> 
> 赞同：0
> 
> 时间：2013-02-16T00:16:52.110
> 
> 标签：java, servlets

我有两个由表单组成的 jsp 页面。一个是“signup.jsp”页面，另一个是“login.jsp”。两个表单动作都被发送到“验证”servlet。servlet 将如何确定已提交的表单，因此将根据用户提交的表单对其进行验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T00:23:12.083

给提交按钮一个唯一的名称。

```
<form ...>
    ...
    <input type="submit" name="signup" value="Signup" />
</form> 
```

```
<form ...>
    ...
    <input type="submit" name="login" value="Login" />
</form> 
```

与所有其他输入元素一样，它们的名称=值对也将作为请求参数发送。所以，你需要在 servlet 中做的只是

```
if (request.getParameter("signup") != null) {
    // Signup form is submitted.
}
else if (request.getParameter("login") != null) {
    // Login form is submitted.
} 
```

* * *

**与具体问题无关**，这种设计却有些奇怪。我希望每个表单都有一个单独的 servlet。无论您在“验证”servlet 中使用什么代码，都应该将其重构为一个独立的类，您可以在两个 servlet 中导入/使用该类。

### 也可以看看：

*   [Servlet 中的 doGet 和 doPost](https://stackoverflow.com/questions/2349633/doget-and-dopost-in-servlets)
*   [设计模式基于 Web 的应用程序](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-20T10:26:30.857

BalusC 答案的替代方案：

```
<form ...>
    ...
    <input type="submit" name="signup" value="signup" />
</form>

<form ...>
    ...
    <input type="submit" name="signup" value="login" />
</form> 
```

如果我正确理解 Java 是“按值传递”，那么在 servlet 中您可以使用 switch/case 来检查参数值：

```
String signup = request.getParameter("signup");
switch(signup){
  case "signup":
    // signup form is submitted
  break;
  case "login":
    // login form is submitted
  break;
} 
```

# java - Java，是否可以在不创建临时文件的情况下用字符串替换文件的第 N 行？

> ID：14905477
> 
> 赞同：1
> 
> 时间：2013-02-16T00:17:07.513
> 
> 标签：java

我管理的唯一方法是创建一个临时文件来执行此操作，但这不是我想要的。有人可以提供一个示例，说明如何在不制作临时文件的情况下用字符串替换文本文件的第 N 行。

提前感谢=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:36:00.953

您可以使用 RandomAccessFile ...这可以同时读取和写入文件...因此您不需要创建临时文件...

想法是使用 readLine 跳过第 N-1 行。

然后计算第七行的字节并与您的 replaceString 字节进行比较...

如果replaceStringBytes < SevenLineBytes 然后替换整个第七行字节并在第七行之后继续读取并在文件中移动之前的字节......

如果 replaceStringBytes > SevenLineBytes 然后创建以字节为单位的差异缓冲区并在第七行之后存储额外的字节......每次前进时继续用差异填充缓冲区......

这是一个线程，它会给你一些提示......

[Java - 通过在读取时覆盖从文本文件中删除行](https://stackoverflow.com/questions/6477762/java-delete-line-from-text-file-by-overwriting-while-reading-it)

# javascript - 欧几里得算法 (JS)

> ID：14905479
> 
> 赞同：-1
> 
> 时间：2013-02-16T00:17:26.147
> 
> 标签：javascript, pseudocode

（对不起我的英语=/） **这是伪：**

```
function lnko(a, b)

  -if a = b then lnko := a 

  -if a < b then lnko := lnko(a, b-a) 

  -if a > b then lnko := lnko(a-b, b) 

function end 
```

**我的代码是：**

```
<html>
<head>
    <script type="text/javascript">
        function run()
            {
                var a = document.getElementById("a").value;
                var b = document.getElementById("b").value;

                var s = lnko(a,b)
                document.write(a+"/"+b+"<br>"+(a/s)+"/"+(b/s));
            //  document.write("<br>"+s)
            }
        function lnko(a,b)
            {
                alert(a+"..."+b)
                if (a==b)
                    {
                        return a;
                    }
                if (a<b)
                    {
                        return lnko(a,(b-a));
                    }
                if (a>b)
                    {
                        return lnko((a-b),b);
                    }
            }
    </script>
</head>
<body>
    <input type="text" id="a" />
    <input type="text" id="b" />
    <input type="button" onclick="run()" />
</body> 
```

问题是，如果我用 10/5、15/3 等来调用 lnko，它什么都不会。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T00:25:09.387

当您检索`a`and`b`时，您得到的是字符串，而不是数字，因此这`lnko`并没有达到您的预期。具体来说，这会导致比较出现问题：`10 > 5`但是`"10" < "5"`.

解决此问题的简洁方法是：

```
var a = +document.getElementById("a").value;
var b = +document.getElementById("b").value; 
```

正如 Pascal Belloncle 指出的那样，您可以交替使用：

```
var a = parseInt(document.getElementById("a").value, 10);
var b = parseInt(document.getElementById("b").value, 10); 
```

最大的区别将是如何`42a`处理格式不正确的“数字”。第一种形式 ( `+doc...`) 无法将值转换为数字并返回`NaN`，同时`parseInt`解析它可以解析的内容并返回`42`。

# mysql - 无法通过实例访问 Django 管理器

> ID：14905481
> 
> 赞同：1
> 
> 时间：2013-02-16T00:17:40.190
> 
> 标签：mysql, django

我有一个使用名为的类创建的 MySQL 表`UserProfile`，另一个使用名为`Connection`. 我编写了以下代码来检索一个用户发送的每个连接请求，并将目标名称转换为字符串：

```
allprofiles = UserProfile.objects.all()

for UserProfile in allprofiles:
    userconnections = Connection.objects.filter(source_user=UserProfile)
    for Connection in userconnections:
        toplay = Connection
        target_tostring = toplay.target_user
        print target_tostring 
```

但是当我尝试运行它时，Django 显示以下内容：

```
AttributeError                            Traceback (most recent call last)
<ipython-input-6-323348f76c1f> in <module>()

      1 for UserProfile in allprofiles:
----> 2         userconnections = Connection.objects.filter(source_user=UserProfile)
      3         for Connection in userconnections:
      4                 toplay = Connection
      5                 target_tostring = toplay.target_user

/usr/lib/python2.7/dist-packages/django/db/models/manager.pyc in __get__(self, instance, type)

    209     def __get__(self, instance, type=None):
    210         if instance != None:
--> 211             raise AttributeError("Manager isn't accessible via %s instances" % type.__name__)
    212         return self.manager
    213 

AttributeError: Manager isn't accessible via Connection instances 
```

我究竟做错了什么？我过去写过类似的代码，没有任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T00:34:11.343

你正在覆盖你的`UserProfile`和`Connection`类。换句话说，您正在用数据库中的数据替换模型类。请改用以下内容：

```
for user_profile in UserProfile.objects.all():
    for user_connection in Connection.objects.filter(source_user=user_profile):
        print user_connection.target_usr 
```

# php - 使用ajax将表单变量发送到多个php脚本

> ID：14905482
> 
> 赞同：1
> 
> 时间：2013-02-16T00:17:53.590
> 
> 标签：php, ajax, forms

我一直在试图弄清楚如何使用 ajax 将变量从表单发送到多个页面，并让每个页面脚本更改 div 内容。

我拥有的脚本正在运行，但这似乎是对资源的巨大浪费，我确信有一种更简单的方法。

```
// Function to process the input form
function ConsoleUpdateFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        $('#outputDiv').Typewriter({animDelay: 10,text: ajaxRequest.responseText, div: 'outputDiv' }); 

        //clear the form
        $('#inputForm').each(function(){ this.reset();});

        //hide the input form till the out has finished showing
        window.setTimeout(function(){ document.getElementById('inputForm').style.visibility="visible"; },ajaxRequest.responseText.length*10);
    }
}
var age = document.getElementById('inputfield').value;
var queryString = "?inputfield=" + age;
ajaxRequest.open("GET", "consoleprocess.php" + queryString, true);
ajaxRequest.send(null); 

//hide the input form
document.getElementById('inputForm').style.visibility="hidden";
}

// Function to process the input form
function VisualInterfaceUpdateFunction(){
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        var ajaxDisplay = document.getElementById('visualWindowContent');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;

        //clear the form
        $('#inputForm').each(function(){ this.reset();});

        //hide the input form till the out has finished showing
        window.setTimeout(function(){ document.getElementById('inputForm').style.visibility="visible"; },ajaxRequest.responseText.length*10);
    }
}
var age = document.getElementById('inputfield').value;
var queryString = "?inputfield=" + age;
ajaxRequest.open("GET", "visualinterfaceprocess.php" + queryString, true);
ajaxRequest.send(null); 

//hide the input form
document.getElementById('inputForm').style.visibility="hidden";
}

// Function to process the input form
function CommandExecutionFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        eval(ajaxRequest.responseText);
    }
}
var age = document.getElementById('inputfield').value;
var queryString = "?inputfield=" + age;
ajaxRequest.open("GET", "commandexecution.php" + queryString, true);
ajaxRequest.send(null); 
} 
```

我基本上创建了 3 次相同的函数，而只更改了将变量发送到的页面以及如何处理返回的内容。但我不知道如何让它在一个功能中工作。

任何帮助将不胜感激。

编辑：谢谢大家的帮助。我相信我已经解决了这个问题，因为它工作正常。当然，如果您发现我做错了什么，请告诉我！

```
$('#inputForm').submit(function() {

$string ="inputfield=" + $('#inputfield').val();

$.ajax({  
type: "GET",  
url: "consoleprocess.php",
data: $string,  
success: function(data) {  
    $('#outputDiv').Typewriter({animDelay: 10,text: data, div: 'outputDiv' }); 
}  
});  

$.ajax({  
type: "GET",  
url: "visualinterfaceprocess.php",
dataType: "html",
data: $string,  
success: function(data) {  
    $('#visualWindowContent').replaceWith(data);
}  
});  

$.ajax({  
type: "GET",  
url: "commandexecution.php",
dataType: "script",
data: $string,
});  

//clear the form
$('#inputForm').each(function(){ this.reset();});
return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:30:23.757

首先，我认为您最好使用 jQuery`$.ajax`来发送您的 ajax 请求。您的代码并不一致：

```
var age = document.getElementById('inputfield').value; 
```

但后来你使用 jQuery 选择器

```
$('#inputForm').each(function(){ this.reset();}); 
```

另外我认为解决您的问题的更好方法是使用`Events`. 一个动作（点击、提交、...）触发一个名为`MyEvent`.

然后你可以有一个`Event Listener`会触发你所有的功能：`ConsoleUpdateFunction(event, data)`,,,`VisualInterfaceUpdateFunction(event, data)``CommandExecutionFunction(event, data)`

要恢复，请使用 jQuery `$.ajax()` [（此处的文档）](http://api.jquery.com/jQuery.ajax/)和`Events`使用 jQuery`$.trigger()`或`$.bind()`（`$.on()` [此处的文档）](http://api.jquery.com/trigger/)。

我希望这能帮到您。它会简化你的很多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:42:17.123

首先尝试使用 Prototype 或 jQuery 来简化您的代码。您可以尝试将请求发送到单个脚本而不是三个脚本，然后从 PHP 以 JSON 格式返回数据。见 php json_encode() 和[http://prototypejs.org/learn/json](http://prototypejs.org/learn/json)

# mysql - MYSQL 语法错误，意外 IDENT_QUOTED，期待 $end

> ID：14905484
> 
> 赞同：2
> 
> 时间：2013-02-16T00:18:00.357
> 
> 标签：mysql, delimiter

我正在尝试在我的数据库上链接多个操作以更改存储库，以简化开发/生产环境之间的数据库一致性。我创建了一个包含多个命令的文件，并且遇到了这个我似乎无法找到参考的奇怪错误。

一个片段如下：

```
deallocate prepare stmt;

END$$

drop procedure if exists SearchByWantListCount;

delimiter $$

CREATE DEFINER=`webaccess`@`%` PROCEDURE `SearchByWantListCount`(
    IN loggedInUser INT,
    IN filter varchar(255))
BEGIN 
```

以`delimiter`红色下划线显示，我收到错误消息：

> 语法错误，意外 IDENT_QUOTED，期待 $end

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:27:57.230

我添加了一个

```
delimiter ;
drop procedure if exists SearchByWantListCount; 
```

这似乎让一切都很开心....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T08:04:51.077

那是因为当您想使用分隔符时，您不需要将分隔符放在 $$ 之前。简单地说$$。

您使用的语法定义了分隔符，这是之前已经完成的事情（因为我们可以看到您在 END 上使用了分隔符）。

为什么是“分隔符;” 工作是因为“如果存在 SearchByWantListCount 则删除过程；”末尾的分号 然后被算作一个分隔符。您是否将“delimiter $$”放在这里，您需要在放置线和下一个过程的开始（SearchByWantListCount）之间放置一个$$，或者如果您想重新定义它，则需要在“delimiter $$”之前。

顺便说一句，你不需要你的“分隔符;” 因为您将 $$ 放在前一个 END 符号之后。只需删除 $$ 之前的“分隔符”。

# iphone - 当用户的设备在 iOS 中设置为 24 小时制时，如何将包含“am/pm”的字符串转换为 NSDate？

> ID：14905490
> 
> 赞同：2
> 
> 时间：2013-02-16T00:18:28.460
> 
> 标签：iphone, ios, nsdate, nsdateformatter

我需要将 NSString 转换为 NSDate，但以下代码仅在用户设备未设置为 24 小时制时才有效。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
[formatter setDateFormat:@"MM/dd/yyyy hh:mm:ss a"];

NSString *aTime = @"2/11/2013 12:00:00 AM";
NSDate *aDate = [formatter dateFromString:aTime]; 
```

但是，当设备处于 24 小时制时，aDate 返回 null。有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T00:45:24.513

我认为您可能会看到[QA1480](http://developer.apple.com/library/ios/#qa/qa1480/_index.html)描述的行为的副作用。Apple 已经解决了它可能认为开发人员没有正确遵守语言环境的问题，方法是修改您规定的日期格式，除非您明确表示不这样做。

您可以通过添加：

```
formatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
      /* and autorelease if not using ARC */ 
```

这基本上是说“我刚刚设置的日期格式是我想要的，请不要以任何方式修改它”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T16:57:09.153

```
 I think the following snippet might helps you out.

    NSString *dateString = @"09:34 AM";
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateFormat = @"dd-MM-yyyy";
    NSString *stringFromDate = [dateFormatter stringFromDate:[NSDate date]];

    dateFormatter.dateFormat = @"dd-MM-yyyy hh:mm a";
    dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

    NSDate *returnDate = [dateFormatter dateFromString:[NSString stringWithFormat:@"%@ %@", stringFromDate, dateString]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T07:27:31.193

> 试试这个代码

```
NSString *string = @"2015-11-30 15:00:00";
NSDateFormatter* formatter =  [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";
[formatter setTimeZone:[NSTimeZone localTimeZone]];
NSDate *date = [formatter dateFromString:string]; 
```

> 日期：2015-11-29 21:30:00 +0000

它采用 UTC 格式，您可以根据需要进行修改！

# java - 我需要帮助修复（打印正确信息）一个简单的应用程序，其中玩家使用随机生成器攻击老板

> ID：14905491
> 
> 赞同：0
> 
> 时间：2013-02-16T00:18:29.520
> 
> 标签：java

我制作了一个简单的应用程序，其中玩家攻击老板，玩家必须尝试击败老板。我遇到的麻烦是在老板被击败后打印我的小型 Java 应用程序。我老板的生命值为 5，我有一个随机骰子生成器，范围为 1 - 6。当玩家在第一次攻击中掷出“5”或“6”时，我希望程序结束。另一件事是我的程序打印出我已经击败了老板，即使玩家没有造成 5 或 6 点伤害。我认为这可能是因为 for 循环，但我不确定。

这是代码：

```
import java.util.Scanner;
import java.util.Random;

public class Hey{
    public static void main (String args[]){

        Scanner attack = new Scanner(System.in);
        Random dice = new Random();

        String hits;
        int hitss,total = 0;

        System.out.println("Time to attack the boss!");
        System.out.println("Press letter 'A' to attack!");
        hits = attack.next();
        hitss = 1+dice.nextInt(6);

        for(int i=0;i<2;i++){

        if(hits.equals ("a")){

            System.out.println("You have hit a " + hitss);
            total += hitss;
        }
        if(total >= 5){
            System.out.println("Well done, You have defeated the boss!");

        }
        else if(total < 5){
            total = 5 - total;
             System.out.println("You need " + total + " more hits to defeat the boss!");

        }

        else
        {
             System.out.println("Sorry, you did not defeat the boss");
        }

        }
    }
} 
```

输出：

```
You have hit a 2
You need 3 more hits to defeat the boss!
You have hit a 2
Well done, You have defeated the boss! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:15:32.100

你没有关闭扫描仪。

你不打败老板的测试必须在 for 循环之外。

您需要一个不同的变量（更多）来查看剩下的点击量。

如果您在第一轮中获胜，则需要跳出 for 循环。

这是您的代码以及我的更改

```
import java.util.Scanner;
import java.util.Random;

public class Hey {
    public static void main(String args[]) {

        Scanner attack = new Scanner(System.in);
        Random dice = new Random();

        String hits;
        int hitss, total = 0;

        System.out.println("Time to attack the boss!");
        System.out.println("Press letter 'A' to attack!");
        hits = attack.next();
        hitss = 1 + dice.nextInt(6);

        for (int i = 0; i < 2; i++) {
            if (hits.equals("a")) {
                System.out.println("You have hit a " + hitss);
                total += hitss;
            }
            if (total >= 5) {
                System.out.println("Well done, You have defeated the boss!");
                break;
            } else {
                int more = 5 - total;
                System.out.println("You need " + more
                        + " more hits to defeat the boss!");

            }

        }
        if (total < 5) {
            System.out.println("Sorry, you did not defeat the boss");
        }
        attack.close();
    }
} 
```

# c++ - 指针算术混淆

> ID：14905499
> 
> 赞同：0
> 
> 时间：2013-02-16T00:19:27.497
> 
> 标签：c++, pointers

我知道您可以添加一个指向 int 的指针，并减去两个指针，一个指针和一个 int，但是您可以将一个 int 添加到一个指针。所以5+指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T00:20:32.267

可以，但有限制。指针算法仅在数组内有效（或数组末尾后 1 位）。

以下是一些规则：

### 5.7 加法运算符 [expr.add]

> 5) [...] 如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则评估不应产生溢出；否则，行为未定义。

和

> 6）当两个指向同一个数组对象的元素的指针相减时，结果是两个数组元素的下标之差。[...]除非两个指针都指向同一个数组对象的元素，或者指向数组对象的最后一个元素，否则行为是未定义的。

粘贴在这里进行确认。

所以

```
int* x = new int;
int* y = new int; 
```

没关系，但是：

```
y-x;
x + 4;
y - 1; 
```

甚至使用二进制比较运算符的比较都是未定义的行为。

但是`x+1`，`1+x`没关系（单个对象算作大小为 1 的数组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:26:28.910

向指针添加一个`int`在语法上是可以的，但是您必须注意很多问题，例如溢出错误。

理想情况下，您应该只在数组中执行此操作。

# jquery - jQuery 如何防止动画重置 div 的滚动？

> ID：14905502
> 
> 赞同：0
> 
> 时间：2013-02-16T00:19:53.317
> 
> 标签：jquery, animation, scroll, reset

如果我使用 jQuery 动画函数将 #wrapper div (z-index:2) 向右滑动并在其后面显示一个 #menu div (z-index:1)，则 #wrapper div 重置是用户所做的滚动在上面。

[这是显示问题的 jsFiddle](http://jsfiddle.net/pgXZG/)。如果您滚动#wrapper div（带有“Main #”的那个），然后单击“打开/关闭菜单”链接以激活动画，滚动将重置。我知道这是由 引起的`position:fixed`，但这是必要的，以便在打开菜单时，唯一滚动的 div 是#menu 的 div 而不是 #wrapper 的 div。

我试过`href="javascript:void(0)"`在激活动画的按钮和`return false;`点击功能上使用。没有任何效果。

如何禁用#wrapper div 重置滚动？或如何在#menu div 显示后锁定#wrapper div 滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:54:30.813

在.Click `return false`() 回调函数中使用可防止 div 滚动，但不幸的是，它也强制两个 div 具有相同的滚动量。期望的效果是每个 div 始终拥有并保持自己的滚动量，直到用户重新加载页面。

我通过保存两个 div 上的滚动量并在动画回调函数中恢复它们来解决这个问题。这是一个显示我的方法的[jsFiddle 。](http://jsfiddle.net/qGvjc/)

尽管这在桌面浏览器中可以无缝运行，但“重新定位和滚动”回调方法描述为

```
menu.css("position","fixed");
content.css("position","absolute").css("top","0");
window.scrollTo(0,contentScroll); 
```

和

```
menu.css("top","0");
window.scrollTo(0,menuScroll); 
```

在移动浏览器中非常慢，以至于您可以看到 div 的重新定位和滚动，这使得动画看起来很可怕。如果您正在为桌面设计或为移动设计但重视功能而不是美观，这是一个很好的方法。我没有在平板电脑上测试它。

# assembly - 在汇编中输入一个浮点数并将其输出回屏幕？

> ID：14905509
> 
> 赞同：0
> 
> 时间：2013-02-16T00:20:55.120
> 
> 标签：assembly, input, output

我一直在做这个任务，但不能通过第一部分，这应该很简单。我已经和我的教授讨论过了，但他也想不通……我希望在这里能得到一些帮助。我只想输入一个数字，将其推入st0，然后将其弹出并存储到total_mean中。出于测试目的，我在开头注释掉了代码。

```
extern printf
extern scanf

segment .data
    prompt_name db "Please enter you name: ", 0
    input_name db "%s %s",0
    ready db "Please have your numberic data ready",10,0
    get_num db "Enter a floating number: ",0
    stringdata db "%s",0

    namedata db "%s ",0
    display_name db "%s",10,0
    floatdata db "%Lf",0
    ask db "Are there more numbers (Y or N)? ", 0

    mean db "The mean of these %d values is %Lf",10,0
    largest db "the largest value is %Lf",10,0
    smallest db "the smallest value is %Lf",10,0

    more db "Do you have more data to analyze (Y or N)? ",0

    bye db "Thank you %s. I hope you enjoyed this program.",10,0

segment .bss
    user_float: resq 1
    large: resq 1
    small: resq 1
    total_mean: resq 2
    first_name: resb 32
    last_name: resq 32

segment .text

    global start_loop

start_loop:

;   mov rax,0
;   mov rdi, stringdata
;   mov rsi, prompt_name
;   call printf
;
;   mov qword rax, 0
;   mov rdi, input_name
;   mov rsi, first_name
;   mov rdx, last_name
;   call scanf
;
;   mov rax, 0
;   mov rdi, namedata
;   mov rsi, first_name
;   call printf
;
;   mov rax, 0
;   mov rdi, display_name
;   mov rsi, last_name
;   call printf
;
;   mov rax, 0
;   mov rdi, stringdata
;   mov rsi, ready
;   call printf
;
;   mov rax, 0
;   mov rdi, stringdata
;   mov rsi, get_num
;   call printf

    mov qword rax, 0
    push qword 0
    push qword 0
    mov rdi, floatdata
    mov rsi, rsp
    call scanf

    push qword 0
    push qword 0

    fld tword [rsp]
    fmul

    fstp tword [total_mean]

    mov qword rax, 0
    mov qword rax,0
    mov rdi, floatdata
    mov rsi, total_mean
    call printf

    pop rax
    pop rax
    pop rax
    pop rax

ret 
```

它只是我试图从我遇到问题的键盘输入的下半部分。当我输入一个数字（例如 12.0）并显示它时，它显示 0.00000。任何人都可以帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:30:55.083

在 x86-64 中，您`double`在寄存器中传递参数`XMM`，而不是在 80387 fpu 堆栈中。当您在这里使用 SystemV ABI 时（通过`printf`and`scanf`调用可见），只需将第一个`double`参数放入`XMM0`，第二个（如果有的话）放入`XMM1`，依此类推（直到`XMM7`）。

# .htaccess - 在 htaccess 身份验证中单击取消处理错误

> ID：14905516
> 
> 赞同：0
> 
> 时间：2013-02-16T00:21:51.767
> 
> 标签：.htaccess

我已经编写了一个 .htaccess 文件，并且能够正确验证用户名和密码。但是当我在 htaccess 身份验证期间单击取消时，我收到“访问错误 - 未经授权”或服务器错误消息。

首先我不确定错误代码是什么。我尝试了以下

```
ErrorDocument 400 /400.html 
```

我还尝试了错误代码 401、403、404、500，但该错误仍然存​​在。

我的 htacess 文件看起来像这样。我使用 <files> 标签来强制对不同的 html 文件进行身份验证。

```
AuthType Basic
AuthName "prompt"
AuthUserFile /.htpasswd
Require user mike 
```

我是否需要为我要保护的每个 html 文件放置“ErrorDocument”，或者最后一个“ErrorDocument”语句就足以满足我要保护的所有文件..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:53:45.863

您可能忘记了两条规则。

1.  错误页面本身**不得**受 .htaccess 保护。它必须是可达的。
2.  文件的路径`ErrorDocument`从文档根开始计算。

如果你遵守规则，代码就可以工作（刚刚测试过）。这就是我成功的测试所涉及的：

### 文件：

> /protected/.htaccess
> /protected/.htpasswd
> /401.php

### .htaccess

```
ErrorDocument 401 /401.php
AuthType Basic
AuthName "My Protected Area"
AuthUserFile protected/.htpasswd
Require valid-user 
```

# php - 在 PHP 中，如何实现与 Java 中的 StringTokenizer 相同的目的？

> ID：14905518
> 
> 赞同：0
> 
> 时间：2013-02-16T00:22:00.870
> 
> 标签：php, mysql, stringtokenizer

假设我有一个 String `030512 Jack 25 Male\n030513 David 23 Male\n030514 ...`，如何从这个 String 中提取信息作为 PHP 中的二维表？

在 Java 中，我可以使用`StringTokenizer`，例如：

```
StringTokenizer lineTokenizer = new StringTokenizer("030512 Jack ...", "\n");
List<Student> students = new ArrayList<Student>();

while(lineTokenizer.hasMoreTokens()) {
    String line = lineTokenizer.nextToken();
    StringTokenizer itemTokenizer = new StringTokenizer(line, " ");
    String id = itemTokenizer.nextToken();
    String name = itemTokenizer.nextToken();
    String age = itemTokenizer.nextToken();
    String sext = itemTokenizer.nextToken();
    students.add(new Student(id, name, age, sex));
} 
```

实际上，我的最终目标是提取这个“类似表格”的信息并将它们存储到 Mysql 数据库中。

我对PHP不熟悉，你能告诉我如何在PHP中做到这一点，或者将这种二维数据插入Mysql数据库的好做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:25:17.720

您可以使用分解或拆分功能。例如

```
$records = explode("\n", $raw_data);
foreach($record in $records) {
    $fields = explode(" ", $record);
    $id = fields[0];
    $name = fields[1];
    ///....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:24:02.880

您可以`explode()`结合使用`list()`：

```
foreach (explode("\n", $yourString) as $line) {
    list($id, $name, $age, $sex) = explode(' ', $line);
    // ...
} 
```

**编辑：**

更新解决方案以纠正对原始数据结构的误解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T00:37:37.593

在我看来，这不是花哨但更容易理解（要求字符串不以换行符结尾，并且信息的格式始终正确）：

```
$students = array();

//no newline at the end, or you'll have to add a check for that in the loop.
$str = "030512 Jack 25 Male\n030513 David 23 Male";

foreach(explode("\n", $str) as $student_str) {
    list($id, $name, $age, $sex) = explode(" ", $student_str);
    array_push($students, array(":id"=>$id,":name"=>$name, ":age"=>$age, ":sex"=>$sex));
}

//For the DB part which has been quite absent.
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
$query = "INSERT INTO students (id, name, age, sex) VALUES (:id, :name, :age, :sex)";
$prepared_query = $conn->prepare($query);

foreach($students as $student) {
    $prepared_query->execute($student);
} 
```

如果那是您想要的，您当然可以在第一个循环中执行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T00:27:35.187

你可以这样做

```
$string = "030512 Jack 25 Male\n030513 David 23 Male\n030514";

$array = array_map(function($v) {
    return explode(' ', $v);
}, explode("\n", $string)); 
```

# linux - 有 Linux 无线电标准吗？

> ID：14905522
> 
> 赞同：16
> 
> 时间：2013-02-16T00:22:23.157
> 
> 标签：linux, embedded, radio, hal

我们即将着手实现一个运行 Linux 的设备，该设备（除其他外）将连接到一个软件定义的 FM/AM 收音机，该收音机还可以接收描述播放列表和其他此类内容的 RDS 数据。这是一个相对愚蠢的设备，主要包含一个或两个用作调谐器的 DSP，否则对信号的处理很少。

我在想设备的内核驱动程序，然后是一个用户态硬件抽象层，它提供了一个标准化的接口，并抽象出接收 RDS 数据的确切时间的细节，并处理错误处理和所有其他杂乱的东西。是否已经有这样的用户层？要么完全避免制作它，要么让我们的东西与已经存在的东西兼容，这样我们就可以根据需要将其他项目用于广播 UI。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T18:02:22.730

# linux中的无线电支持

听起来您正在创建一个新的硬件无线电设备？您可能需要为此设备构建驱动程序。[可以在此处](http://www.linux-mag.com/id/381/)、[此处](http://kernelbook.sourceforge.net/videobook.pdf)和[此处](http://alumnos.elo.utfsm.cl/~yanez/video-for-linux-2-sample-programs/)找到一些入门帮助。如果您的设备不是新设备，它可能已经[在 Video4Linux2 项目中有驱动程序](http://linuxtv.org/wiki/index.php/Radio_devices)。

目前似乎有一些基于**saa6588**内核模块的 RDS 相关项目。

根据[此页面](http://linuxtv.org/wiki/index.php/Radio_Data_System_(RDS)#What_devices_can_receive_RDS_information.3F)，这些卡目前具有**SAA6588**芯片组：

*   Terratec Cinergy 600
*   KNC ONE 电视台 RDS
*   KNC 一台电视台 DVR
*   台风电视调谐器卡 RDS
*   Sundtek MediaTV Pro（制造商支持）
*   Sundtek USB FM 收音机（FM 发射器/接收器，制造商支持）

# RDS 特定信息

我建议查看一些与 Video4Linux2 (v4l2) 相关的项目，这里有一个[RDS 解码](http://rdsd.berlios.de/)库。该库在用户空间中运行，因此可以在那里为您完成 RDS 解码工作：

> 根据 V4L2 规范，来自 RDS 解码器的原始数据是从无线电设备中读取的。数据由块组成，每个块长 3 个字节。所有解码都必须在用户空间中完成。

## RDS API

这是[Video4Linux2 的完整 API 参考](http://linuxtv.org/downloads/v4l-dvb-apis/)。这是一个[熟悉它的文章系列](http://lwn.net/Articles/203924/)。

[RDS API](http://linuxtv.org/downloads/v4l-dvb-apis/rds.html)的特定部分在此处。此页面提供有关如何获取有关 RDS 数据是否可用的更新的信息：

> 可以通过查看 struct v4l2_tuner 的 rxsubchans 字段来检测是否存在 RDS 信号：如果检测到 RDS 数据，则将设置 V4L2_TUNER_SUB_RDS。

## Gnu Radio Companion 中的 SDR RDS 解码器 DSP

虽然它不是官方 API，但我发现了最后一个可能值得研究的小项目：

*   [使用 SDR 的 RDS 接收](http://www.anotherurl.com/library/sdr/sdrrds.htm)

[这里还有一些](http://linux-sound.org/radio.html)值得研究的无线电相关项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T06:48:09.507

可能值得研究一下 GENIVI 联盟 ( [http://www.genivi.org/](http://www.genivi.org/) ) 是否有一个标准的应用程序。他们正在开发专门用于汽车“信息娱乐”目的的此类标准，这似乎属于他们的标准化领域。

不幸的是，他们似乎没有公开发布他们的东西，因此您可能需要四处询问或直接向他们发送电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:15:15.380

[GNU Radio](http://gnuradio.org)怎么样？他们为许多软件定义的无线电组件提供硬件支持，并且通过 GUI 与他们的“GNU Radio Companion”（GRC）轻松连接数据流。

他们使用可以为您的 UI 层访问的 Python 和 C++ API。网上有很多例子。

# python - 获取指向列表元素的指针

> ID：14905527
> 
> 赞同：10
> 
> 时间：2013-02-16T00:23:30.443
> 
> 标签：python, list, pointers

我想知道是否有可能获得指向 python 列表中元素的“指针”。这样，我就可以直接访问我的元素，而无需知道我的元素的索引。我的意思是，在列表中，您可以在任何地方添加元素；在开始、中间甚至结束时，单个元素并没有从它们的实际内存位置移动。从理论上讲，应该可以执行以下操作：

`myList = [1]`

**[1]**

`element = &myList[0]`

element 将在此处充当指针。

```
myList.insert(0, 0)
myList.append(2) 
```

**[0, 1, 2]**

此时，即使列表中的索引已更改，我仍然可以直接访问该元素。

我想这样做的原因是因为在我的程序中，跟踪我添加到列表中的每一项都太乏味了。每个项目都由一个对象生成。有时，对象必须更新值，但不能保证它会在与添加时相同的索引处找到它的项目。有一个指针可以解决问题。我希望这是有道理的。

在 Python 中做类似事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T00:40:43.987

python 上没有指针的概念（至少我知道）。

如果您将对象保存在列表中，您可以简单地保留对该对象的引用。

如果您将原始值保存到列表中，我将采取的方法是围绕值/值创建一个包装器对象，并保留该对象的引用以便以后使用它而无需访问列表。这样，您的包装器就可以作为一个可变对象工作，并且无论您从何处访问它都可以进行修改。

一个例子：

```
class FooWrapper(object):
    def __init__(self, value):
         self.value = value

# save an object into a list
l = []
obj = FooWrapper(5)
l.append(obj)

# add another object, so the initial object is shifted
l.insert(0, FooWrapper(1))

# change the value of the initial object
obj.value = 3
print l[1].value # prints 3 since it's still the same reference 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T12:53:02.303

`element = mylist[0]`如果您不需要更改元素或者如果`element`是可变对象，则已经可以使用。

不可变对象，例如`int`Python 中的对象，您无法更改。此外，您可以在 Python 中使用多个名称来引用同一个对象，例如，`sys.getrefcount(1)`在我系统上的新 REPL 中是 ~2000。自然，您不想`1`在`2`所有这些地方突然出现。

如果您想稍后更改对象，那么它应该是可变的，例如，如果`mylist[0] == [1]`要更改值，您可以设置`element[0] = 2`. 自定义对象而不是 `[1]`列表可能更适合特定应用程序。

作为替代方案，您可以使用字典（或其他名称空间对象，例如`types.SimpleNamespace`）而不是`mylist`列表。然后要更改项目，请通过其名称引用它：`mydict["a"] = 2`。

# python - Python - 可选列表值 - 一种更 Python 的方式？

> ID：14905539
> 
> 赞同：1
> 
> 时间：2013-02-16T00:25:46.097
> 
> 标签：python, list, optional-values

我想知道是否有更 Pythonic 的方式来声明具有可选值的列表？

```
title = data.get('title')
label = data.get('label') or None

if label:
   parent = [title, label]
else:
   parent = [title] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:30:58.293

这将在 Python 2 中工作。

```
title = data.get('title')
label = data.get('label')

parent = filter(None, [title, label]) 
```

在 Python 3 中使用`list(filter(...))`，因为它在 Python 3 中返回*惰性*对象，而不是列表。

或者`parent = [i for i in parent if i]`，在两个版本中都有效的列表理解。

每个片段都会过滤掉*虚假*值，只留下实际包含数据的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:42:39.393

您甚至可以将这一切合并为一行：

```
parent = [data[k] for k in ('title', 'label') if data.get(k)] 
```

或者，如果您只想跳过*缺失*值，而不是所有虚假值：

```
parent = [data[k] for k in ('title', 'label') if k in data] 
```

# c++ - 向量 push_back 导致未处理的异常

> ID：14905540
> 
> 赞同：2
> 
> 时间：2013-02-16T00:25:50.887
> 
> 标签：c++, vector, push-back

一切正常，直到编译器尝试执行 push_back 操作。在 if 条件中返回正确的值。
我已将项目声明为：

```
vector<int> items; // inside the header file. 
```

//在.cpp文件中

```
void MsPs::findnSort()
{
    for(int i = 1; i<50 ; i++)
    {

        string temp = static_cast<ostringstream*>( &(ostringstream() << i) )->str();    // TO convert int i to a string temp
        if(findSupport(temp) >= MIS[i])
        {
            items.push_back(i);
        }

    }

} 
```

弹出以下错误：

```
Unhandled exception at 0x5052ad4a (msvcp100d.dll) in PrefixScan.exe: 0xC0000005: Access violation reading location 0x3d4cccd1. 
```

PS：我还有一个使用 push_back 操作的功能，它工作正常。

谁能帮我这个？

即使这给出了同样的错误：

```
void MsPs::findnSort()
{
    for(int i = 1; i<50 ; i++)
    {

        items.push_back(i);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:32:17.223

我认为问题是当静态转换返回时 ostringstream 被破坏。`str()`因此，您的指针在被调用时悬空。试试这个：

```
void MsPs::findnSort()
{
    for(int i = 1; i<50 ; i++)
    {
        ostringstream blah;
        string temp = (blah << i).str();

        if(findSupport(temp) >= MIS[i])
        {
            items.push_back(i);
        }

    }

} 
```

# mysql - MySQL 查询优化 - 子查询 & 使用 where；使用临时的；使用文件排序

> ID：14905543
> 
> 赞同：0
> 
> 时间：2013-02-16T00:26:04.117
> 
> 标签：mysql, optimization, query-optimization

我正在寻找优化以下 MySQL 查询：

```
SELECT 
    `l`.`id` AS `l__id`, `l`.`latitude` AS `l__latitude`, `l`.`longitude` AS `l__longitude`, `l`.`name` AS `l__name`, `f`.`id` AS `f__id`, `f`.`day` AS `f__day`, `f`.`temperature_low` AS `f__temperature_low`, `f`.`temperature_high` AS `f__temperature_high`, `c`.`id` AS `c__id`, `c`.`name` AS `c__name` 
FROM `location` `l` 
INNER JOIN `forecast` `f` ON `l`.`id` = `f`.`location_id` 
INNER JOIN `condition` `c` ON `f`.`condition_id` = `c`.`id` 
WHERE (
    `f`.`day` IN ('2012-12-28', '2012-12-29') AND 
    EXISTS (
        SELECT 
            `f2`.`id` AS `f2__id` 
        FROM `forecast` `f2` 
        WHERE (
            `f2`.`location_id` = `l`.`id` AND `f2`.`day` = "2012-12-28" AND `f2`.`condition_id` IN (6, 7, 9, 10, 11, 12, 13, 14, 18) AND `f2`.`temperature_high` <= 30 AND `f2`.`temperature_low` >= 0
        )
    ) AND 
    EXISTS (
        SELECT 
            `f3`.`id` AS `f3__id` 
        FROM `forecast` `f3` 
        WHERE (
            `f3`.`location_id` = `l`.`id` AND `f3`.`day` = "2012-12-29" AND `f3`.`condition_id` IN (6, 7, 9, 10, 11, 12, 13, 14, 18) AND `f3`.`temperature_high` <= 30 AND `f3`.`temperature_low` >= 0
        )
    ) 
    AND `l`.`latitude` IS NOT NULL AND `l`.`longitude` IS NOT NULL
); 
```

运行 EXPLAIN 会给出以下输出：

```
+----+--------------------+-------+--------+--------------------------------------+-----------------+---------+------------------------+------+----------------------------------------------+
| id |    select_type     | table |  type  |            possible_keys             |       key       | key_len |          ref           | rows |                    Extra                     |
+----+--------------------+-------+--------+--------------------------------------+-----------------+---------+------------------------+------+----------------------------------------------+
|  1 | PRIMARY            | f     | range  | location_id_idx,condition_id_idx,day | day             |       3 | NULL                   | 1298 | Using where; Using temporary; Using filesort |
|  1 | PRIMARY            | l     | eq_ref | PRIMARY                              | PRIMARY         |       8 | weather.f.location_id  |    1 | Using where                                  |
|  1 | PRIMARY            | c     | eq_ref | PRIMARY                              | PRIMARY         |       8 | weather.f.condition_id |    1 |                                              |
|  3 | DEPENDENT SUBQUERY | f3    | ref    | location_id_idx,condition_id_idx,day | location_id_idx |       9 | weather.l.id           |  276 | Using where                                  |
|  2 | DEPENDENT SUBQUERY | f2    | ref    | location_id_idx,condition_id_idx,day | location_id_idx |       9 | weather.l.id           |  276 | Using where                                  |
+----+--------------------+-------+--------+--------------------------------------+-----------------+---------+------------------------+------+----------------------------------------------+
```

我知道问题是“使用哪里；使用临时；使用文件排序”和子查询，但我不确定如何重写它以提高性能。

提前感谢任何可以帮助我在未来解决此类问题的指针。

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:05:27.150

在您的查询中，您提供了谓词来限制`forecast`集合，但正在无序地加入您的表。mysql 优化器做了一些工作，并在预测中使用键，并在加入其他表之前`day`限制使用的预测集。`f.day IN ('2012-12-28', '2012-12-29')`优化器无法使用您的依赖子查询（看起来没有必要）来进一步限制由 设置的预测`condition_id`，`temperature_high`并且`temperature_low`在加入之前，所以这是在完成所有连接之后完成的。为了改进查询，您应该删除依赖子查询并限制预测集开始。

```
SELECT *
FROM forecast f 
INNER JOIN location l 
  ON l.id = f.location_id AND l.latitude IS NOT NULL AND l.longitude IS NOT NULL
INNER JOIN condition c
  ON f.condition_id = c.id
WHERE f.day IN ('2012-12-28', '2012-12-29') 
  AND f.condition_id IN (6, 7, 9, 10, 11, 12, 13, 14, 18) 
  AND f.temperature_high <= 30 AND f.temperature_low >= 0 
```

# php - date() 与我的任务栏上显示的不同

> ID：14905544
> 
> 赞同：0
> 
> 时间：2013-02-16T00:26:11.330
> 
> 标签：php, date, time

这可能是最愚蠢的问题之一，但是....好的，这是我的代码

```
date("l, M-d-Y, H:i:s") 
```

但是当我通过我的计算机而不是服务器运行它时，输出会以某种方式显示

```
Saturday, Feb-16-2013, 00:21:49 
```

我的电脑时间实际上是

```
Friday, Feb-15-2013, 16:21:49 
```

当我将它上传到服务器以尝试代码时，这就是它所显示的

```
Friday, Feb-15-2013, 19:21:59 
```

任何原因导致`date()`提前几个小时并且上传到服务器时的时间不同.....我使用了代码 P 和 e 并且时区标识符显示 UTC +00:00(GMT) 但我相信我的 GMT 应该是 -08:00 或 +08:00 我忘了。我是否对代码做错了什么，或者只是我需要用我的电脑调整一些设置？因为这发生在我的笔记本电脑和台式机上。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:57:33.810

检查您的 php.ini 中的 date.timezone：

[http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone](http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone)

例如 date.timezone = "欧洲/柏林"

或者你可以使用

[http://www.php.net/manual/en/function.date-default-timezone-set.php](http://www.php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:02:33.993

您应该在访问日期之前调整时区。在php中有一个设置时区的函数

```
date_default_timezone_set("Asia/Calcutta");  //setting timezone
date("l, M-d-Y, H:i:s"); 
```

这是所有时区的列表

[http://php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

# javascript - 如何对三角形或平面进行 gourad 着色，其三个点分别用各自的颜色给出？

> ID：14905550
> 
> 赞同：-3
> 
> 时间：2013-02-16T00:26:35.217
> 
> 标签：javascript

如何对三角形或平面进行 Gourad 着色，其三个点都用各自的颜色给出？

三角形ABC

点 A 有坐标 x1,y1 和颜色 r1,g1,b1

点 B 有坐标 x2,y2 和颜色 r2,g2,b2

点 C 有坐标 x3,y3 和颜色 r3,g3,b3

谁能帮忙

仅使用 Javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:52:04.603

好的，当然。这是 C 中的一个实现：[http ://www.nbb.cornell.edu/neurobio/land/oldstudentprojects/cs490-95to96/guo/report.html](http://www.nbb.cornell.edu/neurobio/land/oldstudentprojects/cs490-95to96/guo/report.html)

如果我没记错的话，您还可以在 Quake 和/或 Quake2 源代码版本中找到一个。

老实说，距离我上次实施它已经过去了大约 18 年。早在 3d 卡开始出现在消费类计算机上的时代。当然，现在甚至在 DirectX 和 openGL 都可用的板载图形芯片中也有硬件实现。当然，可以使用 WebGL 从网页中利用 openGL。

该算法非常简单直接。您渲染水平线。每条线都有一个开始颜色和一个结束颜色。您只需在这两点之间插入颜色。为了获得每条水平线的开始颜色和结束颜色，您需要对每个顶点给出的颜色进行插值。

它只是颜色本身的线性插值 - 仅在每个*顶点*从面法线和光矢量计算颜色，这与 Phong 模型不同，它对入射角进行插值，然后用于计算每个*像素*的颜色. （Phong 允许在多边形中间出现镜面高光，Gouraud 允许在高光区域内包含顶点时使用它们。Gouraud 显然也更便宜，因为每个三角形有 3 个点积，而对于每个像素只有一个点积蓬）

使用 1 个组件的粗略示例，而不是 3 个

```
?...?
.....
.....
.....
?...?

1...?
.....
.....
.....
5...?

1...2
.....
.....
.....
5...3

11122
22222
33322
44433
55433 
```

仅从算法的描述来实现是非常令人满意的。您可能会发现一些有用的资源：

shaderToy (webGL 演示) - [http://www.iquilezles.org/apps/shadertoy/](http://www.iquilezles.org/apps/shadertoy/)

Gouraud 着色的 js 示例 - [http://eng-przemelek.blogspot.com.au/2010/05/gouraud-shading-in-javascript.html](http://eng-przemelek.blogspot.com.au/2010/05/gouraud-shading-in-javascript.html)

玩得开心！

# javascript - 调试 Mixpanel track_forms

> ID：14905553
> 
> 赞同：2
> 
> 时间：2013-02-16T00:26:56.850
> 
> 标签：javascript, jquery, forms, mixpanel, user-tracking

有没有人有调试 Mixpanel track_forms 的经验？

首先，Firebug Chrome 控制台（在 Mixpanel 配置中启用调试时）显示任何 track_forms 事件的空属性对象。每个其他 Mixpanel 事件都有一个填充的属性对象，其中包含引用者、浏览器数据等。不清楚这是否是控制台计时问题并且实际记录了数据，或者这些事件中是否确实缺少数据。

其次，我有一个 jquery 提交的表单（在单击复选框时提交），这是我试图记录到 mixpanel 的事件。无论我使用 track 还是 track_forms，事件似乎都没有记录。如果我添加一个延迟表单提交的断点，该事件似乎会记录下来。所以这似乎是一个竞争条件，并且 Mixpanel 计时器不起作用。

```
/* doesn't work */
var d={};
$('.ch').bind('change',function(){  /*checkbox click submits form*/
    d['checked']=$(this).is(':checked'); 
    d['value']=$(this).val();
    mixpanel.track("my event",d);
    $('#myform').submit();
});

/* also doesn't work */
mixpanel.track_forms("#myform",'my event',d); 
```

以前有没有人解决过这个问题？这是客户端表单提交的一个非常基本的用例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-31T00:18:45.863

在 mixpanel 文档中并不是很明显，但 mixpanel.track_forms() 应该在页面加载时执行。我怀疑 mixpanel API 在幕后检查 DOM 元素以寻找“提交”类型的子元素，然后挂钩“点击”侦听器以拦截表单提交，以便在实际提交表单之前尝试混合面板跟踪.

我也希望在表单字段更改时自动提交表单，而不是让用户单击单独的按钮。我们仍然需要“提交”输入按钮，但可以将其设置为隐藏。

以下对我有用：

```
 $('#lang_form_footer_form_select').bind('change',function(){
      $('#lang_form_footer_submit_btn').click();
    });
    mixpanel.track_forms("#lang_form_footer", "Language form - Footer");

    <form id="lang_form_footer" action="/i18n/setlang/" method="post">
    {% csrf_token %}
    {% get_current_language as LANGUAGE_CODE %}
    <input name="next" type="hidden" value="{{ redirect_to }}" />
      <select id="lang_form_footer_form_select" name="language">
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
          <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %}selected="selected"{% endif %}>{{ language.name_local }}</option>
        {% endfor %}
      </select>
    <input id="lang_form_footer_submit_btn" type="submit" value="{% trans "Go" %}" style="display:none" />
    </form> 
```

还有一个问题：确保输入元素没有设置为“提交”的 id 或名称，因为这会覆盖 DOM 选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T00:08:21.490

在提交表单之前调用`track`将不起作用，因为页面更改会阻止跟踪完成。这就是`track_forms`存在的原因；不幸的是，它不适用于以这种方式提交的表单。

最简单的方法是跟踪提交所在页面上的数据。

最好的方法是跟踪正在处理表单数据的服务器上的数据。

顺便说一句，`properties`track(_forms) 的参数是可选的，所以你可以这样做`mixpanel.track('my event');`

# image - 在 Play Framework 2.10 中路由到图像和 css

> ID：14905556
> 
> 赞同：0
> 
> 时间：2013-02-16T00:27:45.697
> 
> 标签：image, playframework, routes, assets, playframework-2.1

我的设计师已经完成了整个网站，我需要使用 Play 2.10 使其工作。

问题是：

所有资产都以这种方式加载

```
<img src="images/logo.png" alt="" /> 
```

我无法正确路由。

我试过这个

```
GET  images/*file  controllers.Assets.at(path="/public/images", file) 
```

但结果是
**“/”预期但“我”找到**

如何在不重写所有 URL 的情况下路由到我的资产？

在此先感谢莱昂纳多·罗德里戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:11:31.003

斜线不见了，试试：

```
GET  /images/*file  controllers.Assets.at(path="/public/images", file) 
```

# c# - Mono for Android 与 Java 相比的性能

> ID：14905560
> 
> 赞同：2
> 
> 时间：2013-02-16T00:28:16.810
> 
> 标签：c#, java, performance, xamarin.android

我已经阅读了一些关于它的文章、博客和 stackoverflow 问题，但我再次问它，因为我对一件事感到困惑。

MonoDroid 是 Xamarin 出现之前的一个项目，当然也是 Xamarin 进行 XoboxOS 研究项目之前的一个项目。很多博客说 MonoDroid 速度稍慢并且消耗更多电池，因为它运行了两个框架，并且两个垃圾收集器可能针对 MonoDroid，而不是针对 Android 的 Mono。

基准测试表明 XobotOS 比 Dalvik 快得多，所以我的问题是：使用 Mono for Android 编写的应用程序是否仍然同时使用 Dalvik VM 和 Mono VM？或者他们只是在比 Dalvik VM 更快的 Mono VM 上运行？哪个消耗更多能量（Android 或 Java 的 Mono）？

我目前正在开发一个用 Java 编写的大约 50,000 行代码的项目。我想将它移植到 iOS、Android、Windows 8（Metro）、Windows、WP、Mac OS X、Linux 等，因此它涵盖了世界上最流行的操作系统，其中一些我需要将我的代码转换为另一种语言。我首先决定转换为 C#。转换对我来说不是一件难事，因为 C# 和 Java 是如此相似，但我可以在任何地方使用它。但是我非常关心功耗和性能。我不太关心文件大小。

谢谢，

# apache-flex - Flex 演示模型：视图中是否应该保留状态？

> ID：14905561
> 
> 赞同：1
> 
> 时间：2013-02-16T00:28:17.643
> 
> 标签：apache-flex, singleton, state, presentation-model

我有两个视图实例，它们是 V1a 和 V1b。由于它们是相同类型的实例，它们都使用相同的表示模型 (PM1) 实例，因为它作为单例注入到每个实例中。每个视图显示不同的状态（V1a 的 S1a 和 V1b 的 S1b）但是在这两个视图之间切换（例如当它们在 TabNavigator 中时）会产生奇怪的结果：

1.  用户查看**V1a**并看到**S1a**中的状态；
2.  用户查看 V1b 并看到 S1b 的状态；
3.  用户再次查看**V1a**，但这次看到的是**S1b**的状态。

这是因为 S1b 覆盖了 PM1 单例中的状态，因此当重新打开 V1a 时，视图会显示来自 V1b 的状态。我有三个解决方案：

1.  不要注入单例！但这似乎是最常见的方式；
2.  当用户切换视图时，它会将其数据重新注入 PM1。在顶层具有状态并需要将其注入底层的分层视图中，这可能会变得复杂。绑定需要更加小心；
3.  保持视图中的状态，并在视图要采取行动时将其传递给 PM。

解决方案 3 似乎是最简单的。然而，我所读到的关于演示模型的所有内容都倾向于表明状态保存在演示模型中。谁能告诉我哪里出错了？据我所知，在视图中保存状态比在表示模型中要容易和安全得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T21:58:57.630

解决方案 1 是一个很好的解决方案 - 将您的 PM 类配置为不是单例的。不幸的是，据我所知，Tide 框架不支持这一点。其他 DI 框架将 - 例如，[Parsley](http://www.spicefactory.org/parsley)（不再维护）支持每次注入新实例的 DynamicObject。 [RobotLegs](http://www.robotlegs.org/)（已维护）有一个`mapClass`注入器映射，它将为每次注入提供一个新实例。

解决方案 2 听起来很乱。

如果 Tide 框架不提供动态对象，解决方案 3 听起来不错。

# objective-c - 带有索引 UITableViewController 和 UILocalizedIndexedCollat ion 的 NSFetchedResultsController

> ID：14905570
> 
> 赞同：2
> 
> 时间：2013-02-16T00:29:53.813
> 
> 标签：objective-c, nsfetchedresultscontroller, uilocalizedcollation

我有一个使用 NSFetchedResultsController 的表。这让我得到了一个包含存在的标题的索引

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[_fetchedResultsController sections] count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [[[_fetchedResultsController sections] objectAtIndex:section] name];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSInteger numberOfRows = 0;
    NSArray *sections = _fetchedResultsController.sections;
    if(sections.count > 0)
    {
        id <NSFetchedResultsSectionInfo> sectionInfo = [sections objectAtIndex:section];
        numberOfRows = [sectionInfo numberOfObjects];
    }
    return numberOfRows;
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
    return [_fetchedResultsController sectionIndexTitles];
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    return [_fetchedResultsController sectionForSectionIndexTitle:title atIndex:index];
} 
```

但我想使用 UILocalizedIndexCollat​​ion 来获取完整的字母表。

如何将这些方法连接到 NSFetchedResultsController？

我想我需要从当前的 Collat​​ion 中获取索引标题

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
    return [[UILocalizedIndexedCollation currentCollation] sectionIndexTitles];
} 
```

但我不知道如何编写这个方法

```
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    //How do I translate index here to be the index of the _fetchedResultsController?
    return [_fetchedResultsController sectionForSectionIndexTitle:title atIndex:index];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:10:28.390

我认为您必须遍历获取的结果控制器部分并找到给定标题的匹配部分，例如：

```
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    NSInteger section = 0;
    for (id <NSFetchedResultsSectionInfo> sectionInfo in [_fetchedResultsController sections]) {
        if ([sectionInfo.indexTitle compare:title] >= 0)
            break;
        section++;
    }
    return section;
} 
```

对于没有匹配部分的部分索引标题，您必须决定是否要跳转到“较低”或“较高”部分。上述方法跳转到下一个更高的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:26:25.403

在 Martin 的启发下，我采用的解决方案。

```
 - (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    NSInteger localizedIndex = [[UILocalizedIndexedCollation currentCollation] sectionForSectionIndexTitleAtIndex:index];
    NSArray *localizedIndexTitles = [[UILocalizedIndexedCollation currentCollation] sectionIndexTitles];
    for(int currentLocalizedIndex = localizedIndex; currentLocalizedIndex > 0; currentLocalizedIndex--) {
        for(int frcIndex = 0; frcIndex < [[_fetchedResultsController sections] count]; frcIndex++) {
            id<NSFetchedResultsSectionInfo> sectionInfo = [[_fetchedResultsController sections] objectAtIndex:frcIndex];
            NSString *indexTitle = sectionInfo.indexTitle;
            if([indexTitle isEqualToString:[localizedIndexTitles objectAtIndex:currentLocalizedIndex]]) {
                return frcIndex;
            }
        }
    }
    return 0;
} 
```

# javascript - 为什么连接到 indexedDB 时有时会在 onupgradeneeded 之前调用 onsuccess？

> ID：14905573
> 
> 赞同：5
> 
> 时间：2013-02-16T00:30:24.553
> 
> 标签：javascript, html, asynchronous, indexeddb

我在使用 IndexedDB 时遇到问题。在 Firefox 18 上，当我创建一个新数据库时，该`onsuccess`方法同时被调用了`onupgradeneeded`. 在 Chrome 24 上（这是我想要的行为），该`onsuccess`方法仅在`onupgradeneeded`方法完成后调用。

根据 IndexedDB 上的 MDN 信息，我的印象是，当调用 onsuccess 方法时，使用数据库是安全的，但这使它看起来好像不在 Firefox 中。

```
(function(){
  app = {};

  // These will hold the data for each store.
  app.objectstores = [
    { name: 'UNIVERSITIES',
      keyPath: 'UID',
      autoIncrement: false,
      data_source: 'http://mysites.dev/nddery.ca_www/larelance/data/universite.json' },
  ];

  // Some information pertaining to the DB.
  app.indexedDB    = {};
  app.indexedDB.db = null
  app.DB_NAME      = 'testdb';
  app.DB_VERSION   = 1;

  /**
   * Attempt to open the database.
   * If the version has changed, deleted known object stores and re-create them.
   * We'll add the data later.
   *
   */
  app.indexedDB.open = function() {
    // Everything is done through requests and transactions.
    var request = window.indexedDB.open( app.DB_NAME, app.DB_VERSION );

    // We can only create Object stores in a onupgradeneeded transaction.
    request.onupgradeneeded = function( e ) {
      app.indexedDB.db = e.target.result;
      var db = app.indexedDB.db;

      // Delete all object stores not to create confusion and re-create them.
      app.objectstores.forEach( function( o ) {
        if ( db.objectStoreNames.contains( o.name ) )
          db.deleteObjectStore( o.name );

        var store = db.createObjectStore(
          o.name,
          { keyPath: o.keyPath, autoIncrement: o.autoIncrement }
        );

        app.indexedDB.addDataFromUrl( o.name, o.data_source );
      });
    }; // end request.onupgradeneeded()

    // This method is called before the "onupgradeneeded" has finished..??
    request.onsuccess = function( e ) {
      app.indexedDB.db = e.target.result;
      app.ui.updateStatusBar( 'Database initialized...' );

      // ***
      // Would like to query the database here but in Firefox the data has not
      // always been added at this point... Works in Chrome.
      //
    }; // end request.onsuccess()

    request.onerror = app.indexedDB.onerror;
  }; // end app.indexedDB.open()

  app.indexedDB.addDataFromUrl = function( store, url ) {
    var xhr = new XMLHttpRequest();
    xhr.open( 'GET', url, true );
    xhr.onload = function( event ) {
      if( xhr.status == 200 ) {
        console.log('*** XHR successful');
        // I would be adding the JSON data to the database object stores here.
      }
      else{
        console.error("addDataFromUrl error:", xhr.responseText, xhr.status);
      }
    };
    xhr.send();
  }; // end app.indexedDB.addDataFromUrl()
})(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T06:45:41.620

您可能遇到的一件事是 indexeddb 中的自动提交功能。如果事务在短时间内变为非活动状态，它将提交事务并关闭它。

在您的情况下，您正在调用异步方法来填充数据，这就是事务可能变为非活动状态的原因。如果在 app.indexedDB.addDataFromUrl(o.name, o.data_source) 之后添加一个 console.write；你会看到它会在你的数据被检索之前被调用，从而导致事务的提交。这就是调用成功回调时数据不存在的原因。chrome 中的事务超时可能比 Firefox 中的高。它没有在规范中描述，因此它可能因供应商而异。

顺便说一句，如果您想在 ajax 调用中添加数据，您还必须将对象存储作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:35:15.330

在里面做你必须做的事情，`if( xhr.status == 200 ) {}` 从那里调用一个事务，把数据放到 objectStore 中，你还需要什么

编辑：

我这样做，对我有用，只有在插入所有数据并且 objectStore 可供使用时才会调用 oncomplete 函数：

```
var xhr = new XMLHttpRequest();
xhr.open("GET", "http://...", true);
xhr.addEventListener("load", function(){
    if(xhr.status === 200){
        console.info("Data received with success");
        var data = JSON.parse(xhr.responseText);
        var transaction = db.transaction([STORe],'readwrite');
        var objstore = transaction.objectStore(STORE);
        for(i = 0; i < data.length; i++){
            objstore.put(data[i]);
        };
        transaction.oncomplete = function(event){
            //do what you need here
            console.info("Inserted data: " + data.length);
        };
        transaction.onerror = function(event){              
        };
        transaction.onabort = function(event){
        };
        transaction.ontimeout = function(event){
        };
        transaction.onblocked = function(event){
        };                      
    };
}, false);
xhr.send(); 
```

# ruby-on-rails - 需要控制列表的 Rails 应用程序的时事通讯邮件服务

> ID：14905582
> 
> 赞同：-1
> 
> 时间：2013-02-16T00:31:59.417
> 
> 标签：ruby-on-rails, actionmailer, newsletter, mailchimp

我希望能够管理我自己的订阅者列表并从我数据库中的电子邮件列表中发送新闻通讯。同时，我想要像 mailchimp 这样的服务提供的统计数据和高交付率。WYSIWYG 电子邮件设计师之类的东西对我来说并不重要，因为电子邮件将由 rails 应用程序生成。什么商业服务最适合这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:41:25.277

我会使用带有长臂猿宝石的邮件芯片[https://github.com/amro/gibbon](https://github.com/amro/gibbon)

# c# - 为什么没有只接受错误处理程序的订阅重载？

> ID：14905586
> 
> 赞同：4
> 
> 时间：2013-02-16T00:33:04.960
> 
> 标签：c#, exception-handling, system.reactive

IObservable 具有 Next、Next+Error、Next+Complete、Next+Complete+Error 的 Subscribe 重载，但为什么只有 Errors 没有 observable 呢？

我认为这是因为可能存在异常的 IObservable 并且它会导致冲突，即：

```
IObservable<Exception> obs;
obs.Subscribe(ex => { }); 
```

RX 不会知道您订阅的是 Next 还是 Error。

有没有办法单独订阅错误而不创建空的 Complete 委托？

```
obs.Subscribe(
    o => { },
    ex =>
    {
        // error-handling-code
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T11:51:51.747

好的，这似乎是一个智力问题，所以：

从 c# 编译器的角度来看，对于 IObservable 方法签名，您建议的是（考虑到 T = Exception）：

```
public static IDisposable Subscribe<T>(this IObservable<T> source, Action<T> onNext);
public static IDisposable Subscribe<T>(this IObservable<T> source, Action<T> onError); 
```

两种方法重载都将具有相同的签名，并且编译器不支持。

从接口的角度来看，您的 IObserver 定义如下：

```
public interface IObserver<in T>
{
    void OnCompleted();
    void OnError(Exception error);
    void OnNext(T value);
} 
```

接口的实现者必须是这样的：

```
public class Observer<T> : IObserver<T>
{
    public void OnCompleted()
    {
    }

    public void OnError(Exception error)
    {
        // Do something with exception
    }

    public void OnNext(T value)
    {
    }
} 
```

因此，即使不指定 OnNext = () => {}，底层基础设施也必须实现它。您不会失去任何指定它的性能。

从观察者模式的逻辑角度来看，您的意图是异步订阅元素/事件序列。省略 OnNext 函数而只留下 OnError 的方法签名会误导 Rx 库的用户。如果您明确表示您不想在 OnNext 上做任何事情，则更清楚。

> 一旦接收到 OnCompleted 或 OnError 方法，Rx 语法保证**可以认为订阅已完成。**

您尝试做的相当于制作空的 foreach 循环并等待异常：

```
try
{
    foreach (var e in sequence)
    {
        // do nothing
    }
}
catch (Exception ex)
{
    // Do something
} 
```

这不是常见的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:23:11.413

我认为这是您忽略的：

> 一旦接收到`OnCompleted`or`OnError`方法，Rx 语法保证**订阅可以被认为是完成**的。

1.  如果您只关心将终止操作的异常，try-catch 就是您所需要的。
2.  如果您关心异常序列，则必须使用 捕获它们并返回`observer.OnNext(ex)`，而不是使用 中断订阅`observer.OnError`。

# ruby-on-rails - 得到# 我正在使用带有 Rails 的 FbGraph gem。每次我尝试发布操作时，都会收到此错误： [OpenGraph] Publishing publish # <groupcomment>(valid user token) [OpenG 问问题 问问题 2013-02-16T00:33:24.677 924 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用带有 Rails 的 FbGraph gem。每次我尝试发布操作时，都会收到此错误： [OpenGraph] Publishing publish # <groupcomment>(valid user token) [OpenGraph] # <fbgraph::invalidrequest: oauthexception="" ::="" unknown="" path="" components:="" gaymerx:publish="">OAuthException :: Unknown path components: /gaymerx:publish 自定义日志格式，但错误如打印。gaymerx 是我们应用程序的命名空间，我们已经创建了发布操作（尽管我们必须在提交之前向 fb 发布一些“发布”操作）。验证用户令牌有效，并具有打开图权限。 这是调用代码： me = FbGraph::User.me(@token) action = me.og_action!("gaymerx:#{action}", :custom_object => "http://www.gaymerconnect.com/action") 知道会发生什么吗？ 一些简单的vim命令 抱歉，如果这不完全是一个编程问题。 我主要使用 Vim 来编辑我的程序。所以我对所有 Vim 专家的问题是： 有没有办法在 Vim 中选择和滚动？我想复制一堆代码，在传递过程中，我总是复制我可以在 vim 屏幕上查看的所有内容，然后将其粘贴到任何地方，然后向下滚动，然后复制并粘贴..重复..直到完成。有没有办法可以有效地复制一大块代码？ 格式化代码行——你知道当你复制和粘贴一些代码时，有时 10 行代码会变成 30 行非常混乱的代码吗？那么，有没有重新格式化代码的命令？在pass中，我手动返回并正确缩进所有当你得到500行时有时会超级重复的东西。我在其他网站上看到了有关命令的内容，1G = G有人可以确认吗？当我在命令行中尝试它时，我收到一个错误E464: ambiguous use of user-command line，我什至不知道这意味着什么。 我知道 Vim 中有一个帮助命令，但是当有 200 个 txt 文件之类的文件时，我什至不知道从哪里开始，坦率地说，这更快:) ruby-on-railsfacebookfacebook-opengraphfb-graph 4 1 回答 1 This answer is useful 0 看起来您缺少请求路径的一部分 你有/gaymerx:publish，但如果你的应用命名空间是gaymerz并且你的行为是publish你应该发布到/me/gaymerx:publish或/<user id="" here="">/gaymerx:publish 于 2013-02-16T01:17:31.173 回答 Related 2 numpy - 将方程的 txt 文件格式化为相同的格式，然后在 Python 中对其进行操作以进行线性代数计算 1 fortran95 - (1) 处的不可分类语句，Fortran90 错误 2 joomla - 在 joomla 中处理复杂页面布局的最佳方法 1 java - iOS 上的 Java 小程序 3 javascript - 如何判断输入字段中何时输入了字符？ 1 opengl - 如何在 emacs 启动时自动加载 cl- opengl 和 lispbuilder-sdl-image？ 2 java - JAVA中的`type a[]`和`type[] a`有什么区别 2 java - Java Jersey 使用 GET 来返回 JSON，它只返回一些字段而不是全部 3 php - 访问 JSON 对象属性 3 javascript - JavaScript 代码解释: (e && e.target) || (window.event && window.event.srcElement) Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</user></fbgraph::invalidrequest:></groupcomment></groupcomment>

> ID：14905587
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, facebook, facebook-opengraph, fb-graph

我正在使用带有 Rails 的 FbGraph gem。每次我尝试发布操作时，都会收到此错误：

```
[OpenGraph] Publishing publish #<GroupComment> (valid user token)
[OpenGraph] #<FbGraph::InvalidRequest: OAuthException :: Unknown path components: /gaymerx:publish>
OAuthException :: Unknown path components: /gaymerx:publish 
```

自定义日志格式，但错误如打印。gaymerx 是我们应用程序的命名空间，我们已经创建了发布操作（尽管我们必须在提交之前向 fb 发布一些“发布”操作）。验证用户令牌有效，并具有打开图权限。

这是调用代码：

```
me = FbGraph::User.me(@token)
action = me.og_action!("gaymerx:#{action}", :custom_object => "http://www.gaymerconnect.com/action") 
```

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:17:31.173

看起来您缺少请求路径的一部分

你有`/gaymerx:publish`，但如果你的应用命名空间是`gaymerz`并且你的行为是`publish`你应该发布到`/me/gaymerx:publish`或`/<USER ID HERE>/gaymerx:publish`

# vim - 一些简单的vim命令

> ID：14905588
> 
> 赞同：1
> 
> 时间：2013-02-16T00:33:28.567
> 
> 标签：vim

抱歉，如果这不完全是一个编程问题。

我主要使用 Vim 来编辑我的程序。所以我对所有 Vim 专家的问题是：

1.  有没有办法在 Vim 中选择和滚动？我想复制一堆代码，在传递过程中，我总是复制我可以在 vim 屏幕上查看的所有内容，然后将其粘贴到任何地方，然后向下滚动，然后复制并粘贴..重复..直到完成。有没有办法可以有效地复制一大块代码？

2.  格式化代码行——你知道当你复制和粘贴一些代码时，有时 10 行代码会变成 30 行非常混乱的代码吗？那么，有没有重新格式化代码的命令？在pass中，我手动返回并正确缩进所有当你得到500行时有时会超级重复的东西。我在其他网站上看到了有关命令的内容，`1G = G`有人可以确认吗？当我在命令行中尝试它时，我收到一个错误`E464: ambiguous use of user-command line`，我什至不知道这意味着什么。

我知道 Vim 中有一个帮助命令，但是当有 200 个 txt 文件之类的文件时，我什至不知道从哪里开始，坦率地说，这更快:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T08:59:18.187

您的问题是关于 vi / Vim 的基本使用。帮自己一个忙，阅读 Vim 教程；你会在网上找到很多，而且 Vim 带有它自己的介绍*vimtutor*。

> 在 Unix 上，如果 Vim 已正确安装，您可以从 shell 启动它：
> 
> 导师
> 
> 在 MS-Windows 上，您可以在 Program/Vim 菜单中找到它。或者执行 $VIMRUNTIME 目录下的 vimtutor.bat。

此外，学习如何查找命令和导航内置的`:help`; 它很全面，并提供了许多提示。你不会像其他编辑器那样快速学习 Vim，但如果你致力于持续学习，它将证明是一个非常强大和高效的编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T09:31:23.610

vim 的方式是完全忘记使用鼠标进行的选择，而不是一屏，而是设置一个标记，移动到所需文本的另一端，然后拉动标记：

1.  在文本开头设置标记 m`mm`
2.  移动到文本末尾
3.  Yank 以标记`y'm`
4.  粘贴`P`或`p`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T01:21:10.973

`+`仅当您可以将寄存器用作剪贴板时，整个答案才有帮助。在vim中试试`"+yy`，在另一个应用程序中尝试粘贴，看看是否可以使用剪贴板，如果可以的话：

你真的应该阅读手册和其他帮助：
拉线（简单）：http: [//vim.wikia.com/wiki/Moving_lines_up_or_down](http://vim.wikia.com/wiki/Moving_lines_up_or_down)
寻址 线：[VIM](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#%5Brange%5D)
中的寻址 那就是开始。

您可以执行的操作的一些示例：
`:.,+50y a`从当前行拉出 50 行并提前 50 行注册 a，`A`而不是使用追加到注册 A。
`:.,/some pattern/y A`从当前行拉（追加）到匹配 /some pattern/ 的第一行注册 a。
`"Ay/some pattern<CR>`会做同样的事情。

一旦你学会了你应该如何寻址，就很容易将命令与寻址结合起来，例如“缩进命令” `=`：
`=}`自动缩进到当前段落的末尾
`=/some pattern<CR>`自动缩进到行匹配/某些模式/
在可视模式下标记一些东西并输入`=`它会自动缩进选定的文本。

等等......所以阅读手册，你会很好地使用它。
**在上面的示例中，您可以使用 register`+`而不是 register 来“拉”到剪贴板`a`。**

# django - NoReverseMatch 在 Django 1.4.x 中使用 URLConf 和通用视图

> ID：14905589
> 
> 赞同：0
> 
> 时间：2013-02-16T00:33:36.867
> 
> 标签：django, views, urlconf

我的模板文件中有这个：

```
<a href="{% url polls.views.vote poll.id %}">Vote again?</a> 
```

这是我的 URLConf：

```
urlpatterns = patterns('polls.views', 
    url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$', 'detail'),
    url(r'^(?P<poll_id>\d+)/results/$', 'results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),
) 
```

我更改了一些视图以使用泛型：

```
urlpatterns = patterns('polls.views',
    url(r'^$',
        ListView.as_view(
            queryset=Poll.objects.order_by('-pub_date')[:5],
            context_object_name='latest_poll_list',
            template_name='polls/index.html')),
    url(r'^(?P<pk>\d+)/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/details.html')),
    url(r'^(?P<pk>\d+)/results/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/results.html'),
        name='results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),
) 
```

现在显示此错误：

> 未找到带有参数“(1,)”和关键字参数“{}”的“polls.views.results”的反向操作。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:43:21.657

将名称添加到您的 url 模式：

```
url(r'^(?P<pk>\d+)/results/$',
    DetailView.as_view(
        model=Poll,
        template_name='polls/results.html'),
    name='results'), 
```

然后在模板中使用名称而不是视图名称：

```
{% url results poll.id %} 
```

# jquery - 如何将事件处理程序绑定到 Zurb Foundation 框架自定义下拉菜单？

> ID：14905593
> 
> 赞同：6
> 
> 时间：2013-02-16T00:34:24.133
> 
> 标签：jquery, zurb-foundation

我正在使用 Zurb Foundation 框架并有一个选择元素，其中框架为自定义选择元素注入 HTML（下面的自定义下拉列表）。

```
<select id="caseModule" style="display: none;">
  <option value="gifting">Gifting</option>
  <option value="other">Other</option>
</select>
<div class="custom dropdown" style="width: 97px;">
  <a href="#" class="current">Other</a>
  <a href="#" class="selector"></a>
  <ul style="width: 95px;">
    <li>Gifting</li>
    <li class="selected">Other</li>
  </ul>
</div> 
```

如何将 jQuery 事件处理程序绑定到自定义下拉列表，因为它是在页面加载时即时插入的？如果我将 .change() 事件处理程序绑定到原始选择元素，它不会被触发。我是否假设在选择元素之后立即会有一个带有“自定义下拉”类的 div 元素？如果框架发生变化，这种方法似乎可能充满潜在问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-05T20:12:36.327

使用 Foundation 5.4.5，这对我有用：

```
$('.dropdown').on('opened.fndtn.dropdown', function() {
  return console.log('opened');
});
$('.dropdown').on('closed.fndtn.dropdown', function() {
  return console.log('closed');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:34:16.210

绑定到原始选择元素对我来说非常好

```
$(document).ready(function () { 
    $('#caseModule').change(function () {
        console.log('changed');
    });
}); 
```

# json - 仅具有主键/规范化数据的 JPA 到 JSON

> ID：14905601
> 
> 赞同：2
> 
> 时间：2013-02-16T00:36:13.677
> 
> 标签：json, jpa, cxf, jax-rs

我有两个具有 OneToMany ManyToOne 关系的 JPA 实体（患者和诊所）。我想以 JSON 格式返回数据（目前使用`org.apache.cxf.jaxrs.provider.JSONProvider`）。以下是患者信息及其相关诊所。但是，它会返回诊所的所有字段。我怎么能只返回诊所的主键/ID（@Id）？

```
{
    "Patient": {
        "age": 0,
        "clinic": {
            "address": "long address here",
            "otherKeys": "other values",
            "id": 5
        },
        "ic": "010101",
        "id": 12,
        "name": "Patient 01"
    }
} 
```

# mysql - MySQL 临时表或视图？

> ID：14905607
> 
> 赞同：0
> 
> 时间：2013-02-16T00:37:15.140
> 
> 标签：mysql, views, temp-tables

我得到了 3 个表，这些表存储了用户注册时的常用数据：**语言、国家、国籍**。每个表都有字段：**id**和**name**。

我有一个主表**users**，它几乎存储了来自用户的所有数据。

另一个名为**tableregistry**的表具有以下结构：

```
id | tableName | tableValue

 1 | finalJoin | 0

 2 | language  | 1

 3 | country   | 2

 4 |nationality| 3 
```

它存储的另一个称为**巧合**的是共享许多用户的公共数据：

```
id | idUser | nTable | cValue 
```

因此，如果我们有第 80 位用户住在荷兰，但他是秘鲁本地人并且说中文，则数据将以这种方式保存（考虑荷兰在**国家**表中的 id 为 20，秘鲁国籍在**国籍**表中的 id 为 34，而中文在**语言**表上的 id 为 22 )

```
198 | 80    | 2      | 20

199 | 80    | 3      | 34

200 | 80    | 1      | 22 
```

因此，如果我们想要执行人员搜索，我使用存储过程来搜索**巧合**，公共数据只是获取 3 个临时表来获取用户 1.来自某个国家 2.taht 生活在任何国家，而不是本地和 3。说某种语言。

**使用表用户**对这些临时表进行多重连接，我们将获得此搜索的用户列表。

问题是。最好使用视图还是只保留临时表策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:58:19.670

你有一个奇怪的模式。这个怎么样：

```
CREATE TABLE users (
  id int(11) not null auto_increment,
  ...
);

CREATE TABLE languages (
  id int(11) not null auto_increment,
  name varchar(20) not null
);

CREATE TABLE countries (
  id int(11) not null auto_increment,
  name varchar(20) not null
);

CREATE TABLE nationalities (
  id int(11) not null auto_increment,
  name varchar(20) not null
);

CREATE TABLE user_rel_languages (
  user_id int(11) not null,
  language_id int(11) not null
);

CREATE TABLE user_rel_countries (
  user_id int(11) not null,
  country_id int(11) not null
);

CREATE TABLE user_rel_nationalities (
  user_id int(11) not null,
  nationality_id int(11) not null
); 
```

因此，要获得具有特定语言 + 国家 + 国籍配置的用户，您将`users`通过关系表从这些表中进行选择并加入其中。例如：

```
select u.* from users u
join user_rel_countries urc on urc.user_id = u.id 
join user_rel_languages url on url.user_id = u.id 
join user_rel_nationalities urn on urn.user_id = u.id 
where country_id = 1 and language_id = 2 and nationality_id = 3 
group by u.id ; 
```

或者，如果您不关心非规范化，您可以放弃和之间的`countries`区别`user_rel_countries`

# php - 从 Jquery 中的选定列表元素中检索数据

> ID：14905609
> 
> 赞同：0
> 
> 时间：2013-02-16T00:37:41.810
> 
> 标签：php, jquery, ajax, json

我是整个编码方面的新手，最近在你的帮助下学到了很多东西，所以我希望它可以继续解决我遇到的下一个问题！

我有一个完美呈现的 Jquery 列表，它的作用是显示一些我输入的来自本地 MYSQL 数据库的虚拟信息。到目前为止，我所做的是，当用户单击其中一个列出的链接时，它会将它们带到下一页并说“您已选择链接 #”，并且此实例中的 # 标签表示用户的交易编号选定的列表链接。

我试图找出该怎么做是这样的：

1.  使用我从用户选择中获得的信息（即选择的交易号码），我如何才能将其传递回数据库，以便我可以找到并检索具有该交易号码的特定条目。

我的 HTML 代码如下：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Find A Deal</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <style>
        img.fullscreen {
            max-height: 100%;
            max-width: 100%;
        }
        </style>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript">
    $(document).on('pagebeforeshow', '#index', function(){
        $("#list").empty();
        var url="http://localhost/test/json3.php";
        $.getJSON(url,function(json){
            //loop through deals
            $.each(json.deals,function(i,dat){
                $("#list").append("<li><a id='"+dat.dealid+"'><h1>"+dat.name+"</h1><p>"+dat.dname+"</p></a></li>");
                $(document).on('click', '#'+dat.dealid, function(event){  
                    if(event.handled !== true) // This will prevent event triggering more then once
                    {
                        listObject.itemID = $(this).attr('id'); 
                        $.mobile.changePage( "#index2", { transition: "slide"} );
                        event.handled = true;
                    }
                });            
            });
            $("#list").listview('refresh');
        });
    });

    $(document).on('pagebeforeshow', '#index2', function(){       
    $('#index2 [data-role="content"]').html('You have selected Link' + listObject.itemID);
//  var url="http://localhost/test/json9.php";
//  $.getJSON(url, function(json){

    });

    var listObject = {
        itemID : null
    }    
</script>
</head>     
<body>    
<div data-role="page" id="index">
    <div data-role="header" data-position="fixed">
        <h1>Current Deals</h1>
    </div>

    <div data-role="content">
        <div class="content-primary">
            <ul id="list" data-role="listview" data-filter="true"></ul>
        </div>
    </div>

    <div data-role="footer" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="http://localhost/findadeal/index.html" data-icon="home">Home</a></li>
                <li><a href="http://localhost/findadeal/mydeal.html" data-icon="grid">My Deals</a></li>
            </ul>
        </div>
    </div>
</div>

<!--New Page --> 

<div data-role="page" id="index2">
<div data-role="header">
        <h1> Find A Deal </h1> 
    </div>

    <div data-role="content">
        <a data-role="button" href="#page1" data-icon="star" data-iconpos="left">Get Deal </a>
    </div>

    <footer data-role="footer" data-position="fixed">
        <nav data-role="navbar">
            <ul>
                <li><a href="index.html" data-icon="home">Home</a></li>
                <li><a href="#index" data-icon="grid">My Deals</a></li>
            </ul>
        </nav>
    </footer>   
</div>
</body>
</html> 
```

用于创建原始列表 (Json3.php) 的 PHP/Json 文件如下所示：

```
<?php

$link = mysql_pconnect("localhost", "root", "") or die ("Could not Connect to DB");

mysql_select_db("findadeal") or die("Could not select database");

$arr = array();

$rs = mysql_query("SELECT r.restaurantid, r.name, r.image, d.dealid, d.dname, d.restaurantid
FROM restaurant r, deal d
WHERE r.restaurantid = d.restaurantid;");

while($obj = mysql_fetch_object($rs)) {
$arr[] = $obj;
}

echo '{"deals":'.json_encode($arr).'}';

?> 
```

我在这里不知所措，因为我一直在寻找这方面的信息，但似乎找不到我要找的东西。我感谢任何人的帮助，我是认真的！提前致谢！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:55:04.730

你可以像这样简化你的javascript：

```
$(document).on('click', '#'+dat.dealid, function(event){  
    listObject.itemID = $(this).attr('id'); 
    $.mobile.changePage( "#index2", { transition: "slide"} );
    event.stopPropagation();
}); 
```

如果您想在不重新加载页面的情况下加载项目数据，那么您需要执行 ajax 请求。如果您不介意重新加载页面，请重定向到`http://domain.com/uri/whatever?id=<the_selected_id>`然后在您的 PHP 脚本中，您可以使用 get 参数获取项目`$_GET['id']`并执行查询以获取此 ID 的数据。

**更新**

您需要一个 PHP 脚本来从数据库中检索数据。这个脚本是这样调用的：`http://www.domain.com/foo/bar/my_script.php?id=<the_id_from_the_selection>`

您的脚本应如下所示：

```
<?php

// Default value to return
$data = array('error' => 'No deal found');

if (isset($_GET['id']) && is_numeric($_GET['id'])) {

    // Using PDO for the database connection, it's much better and avoid SQL injection
    // Make sure the PDO extension is enable in your php.ini
    $pdo = new \PDO('mysql:host=localhost;dbname=<SOMEDB>', '<USERNAME>', 'PASSWORD');

    $sql = "SELECT * FROM deal WHERE id = :id";
    $statement = $pdo->prepare($sql);
    $statement->execute(array('id' => $_GET['id']));
    $data = $statement->fetch(\PDO:FETCH_ASSOC);
}

echo json_encode($data);

// You don't need the closing PHP tag. Actually it's easier to debug if you don't use it. 
```

您的 ajax 请求（当用户选择某些内容时调用，这是 javascript）应该如下所示：

```
var dealId; // the selected deal id

$.ajax({
  url : 'foo/bar/my_script.php',
  data: {id: dealId},
  type: "GET",
  async: true,
  onSuccess: function(response){
     console.log(response); // look into the console to check the object structure
     // Display your data here using dom selector and jquery
  }
}); 
```

# ios - 如何使用 Core Graphics 在我的触摸位置画一个圆圈？

> ID：14905616
> 
> 赞同：5
> 
> 时间：2013-02-16T00:39:20.557
> 
> 标签：ios, xcode, touch, cgcontext

新程序员来了。我在尝试使用 Core Graphics 在我的触摸位置周围绘制描边弧时遇到问题。我有绘制圆圈的方法工作正常，并且我已经测试并在点击屏幕时注册了触摸，但是当我尝试在点击时调用绘制圆圈的方法时，我收到错误“CG​​ContextBlahBlah：无效上下文0x0"

我*认为*这是因为我没有在 drawRect:() 中调用该方法。

那么我怎样才能通过触摸调用这个方法呢？此外，如何在我的绘图方法中使用“CGPoint locationOfTouch”作为参数？

这是我正在使用的代码块。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint locationOfTouch = [touch locationInView:self];
    [self drawTouchCircle:(locationOfTouch)];
    [self setNeedsDisplay];
}

-(void)drawTouchCircle:(CGPoint)locationOfTouch
{
    CGContextRef ctx= UIGraphicsGetCurrentContext();

    CGContextSaveGState(ctx);

    CGContextSetLineWidth(ctx,5);
    CGContextSetRGBStrokeColor(ctx,0.8,0.8,0.8,1.0);
    CGContextAddArc(ctx,locationOfTouch.x,locationOfTouch.y,30,0.0,M_PI*2,YES);
    CGContextStrokePath(ctx);
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T00:48:56.773

你是对的。问题是`drawTouchCircle`，您应该实现一个`drawRect`为您调用它的方法，而不是调用您自己，因此您的`touches`方法只需要调用`setNeedsDisplay`，`drawRect`其余的会处理。因此，您可能希望将触摸位置保存在类属性中，然后在您的`drawRect`:

```
@interface View ()
@property (nonatomic) BOOL touched;
@property (nonatomic) CGPoint locationOfTouch;
@end

@implementation View

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];

    self.touched = YES;
    UITouch *touch = [touches anyObject];
    self.locationOfTouch = [touch locationInView:self];
    [self setNeedsDisplay];
}

- (void)drawTouchCircle:(CGPoint)locationOfTouch
{
    CGContextRef ctx= UIGraphicsGetCurrentContext();
    CGRect bounds = [self bounds];

    CGPoint center;
    center.x = bounds.origin.x + bounds.size.width / 2.0;
    center.y = bounds.origin.y + bounds.size.height / 2.0;
    CGContextSaveGState(ctx);

    CGContextSetLineWidth(ctx,5);
    CGContextSetRGBStrokeColor(ctx,0.8,0.8,0.8,1.0);
    CGContextAddArc(ctx,locationOfTouch.x,locationOfTouch.y,30,0.0,M_PI*2,YES);
    CGContextStrokePath(ctx);
}

- (void)drawRect:(CGRect)rect
{
    if (self.touched)
        [self drawTouchCircle:self.locationOfTouch];
}

@end 
```

# python - 我的二分搜索算法错了吗？

> ID：14905619
> 
> 赞同：0
> 
> 时间：2013-02-16T00:39:38.073
> 
> 标签：python, algorithm

如果我问了一个愚蠢的问题，我很抱歉，但我有点困惑......我一直在 edx 上 MIT6.00X 课程，其中一个练习是使用二分搜索算法来查找密码。我花了大约 4 个小时才完成练习（是的，我是菜鸟），但我设法构建了以下代码：

```
numGuesses = 0
lo = 0
hi = 100
mid = (hi + lo)/2
num = raw_input( "Input a number between 0 and 100 ")
if num > 0 or num < 100:
    while mid  != num:
        print ("Is your number " + str(mid) + "?")
        userinput = raw_input( "Enter 'h' to indicate the guess is too high. Enter 'l' to indicate the guess is too low. Enter 'c' to indicate I guessed correctly. ")

        if userinput == 'h':
            hi = mid
            mid = (hi + lo)/2
        elif userinput == 'l':
            lo = mid
            mid = (hi + lo)/2
        elif userinput == 'c':
            print ("Game over. Your secret number was:" + str(mid))
            break
        else:
            print ("Sorry, I did not understand your input.")
else:
    print ("You should use a number between 0 and 100") 
```

虽然手动测试它工作得很好，但在练习中有一些问题没有通过，主要是因为站点而不是不断猜测它是更高还是更低，有时它按下了错误的键并且我没有通过练习。

在尝试更改代码后，我无法完成课程，所以我看到了答案，这是我做错了，我应该使用布尔值来保持代码流畅，直到找到正确的数字。

我的问题是：我的代码错了吗？还有我做的任何错误阻止网站按正确的字母吗？只是好奇

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T04:17:51.243

这是我今天终于解决的 MITx 手指练习之一。这是我的方法：

```
print('Please think of an integers BETWEEN 0 and 100!')
#Define variable
x=100
low=0
high=x
ans=0
#Guessing code part
while ans<=x:
    print'Is your secret number:', str((low+high)/2), '?'
    s=raw_input("Enter 'h' to indicate the guess is too high. Enter 'l' to indicate the guess is too low. Enter 'c' to indicate I guessed correctly:")
    if s!='h' and s!='l' and s!='c':
        print'Sorry I did not understand your input.'
    elif s=='h':
        high=(low+high)/2
    elif s=='l':
        low=(low+high)/2
    elif s=='c':
        print'Game over. Your secret number is:', str((low+high)/2)
        break 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T10:57:21.937

```
lo = 0
hi = 100
mid = (hi + lo)/2
print 'Please think of a number between 0 and 100!'
while True:
    print ("Is your number " + str(mid) + "?")
    userinput = raw_input( "Enter 'h' to indicate the guess is too high. Enter 'l' to indicate the guess is too low. Enter 'c' to indicate I guessed correctly. ")

    if userinput == 'h':
        hi = mid
        mid = (hi + lo)/2
    elif userinput == 'l':
        lo = mid
        mid = (hi + lo)/2
    elif userinput == 'c':
        print ("Game over. Your secret number was:" + str(mid))
        break
    else:
        print ("Sorry, I did not understand your input.") 
```

# java - 当一个变量超出范围时，它永远不会回到范围内

> ID：14905622
> 
> 赞同：1
> 
> 时间：2013-02-16T00:40:12.160
> 
> 标签：java, scope

我偶然发现了这个肯定，它改变了我对 Java 范围的概念。C 我的概念曾经是“范围是指可以访问已声明变量的代码部分” 有人对此有更清晰的引用吗？

例子：

```
public static void main(String[] args) {
    int x = 5;
    amIOutOfScope();        
    System.out.println("Am in the x variable scope again?");
}

private static void amIOutOfScope(){        
    System.out.println("am I outta scope? I can't access x here, Does it mean I'm outta scope?");
    //System.out.println(x);//wrong as hell
} 
```

这个肯定是真的吗？如果是这样，当您转到 amIOutOfScope() 方法时会发生什么，您是否超出了变量 x 的范围？你会怎么称呼它？有人可以向我澄清一下吗？

**更新：** 这本书适用于 SCJA Sun Certified Java Associate Study Guide - Exam CX-310-019（McGraw-Hill，2009，第 5 章），取自认证考试第 6 题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T00:45:28.673

java中“范围”的定义在这里：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)

但基本上你的概念是对的。范围是您分配的名称有意义的代码区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:46:23.437

方法变量范围与JVM中的堆栈空间有关...

所以这里 main 方法的堆栈空间有 x 变量......但是一旦它进入 amIOutOfScope() 方法......我们指的是不同的堆栈空间......其中变量不存在......

所以这并不意味着变量超出范围......

当您从 amIOutOfScope() 中返回时，您将返回到变量 x 仍然存在的 main 方法的堆栈空间中...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:55:10.237

我们可以将范围分为两大类：

## 当地的

这些变量在函数中。它们只能从该函数中访问。

局部变量仅限于它们的封闭`{`和`}`，也称为块。在声明之前和某些赋值之前，它们也是不可访问的。我的意思是

```
{
    //aVar is not accessible here
    {
        //aVar is not accessible here
        Object aVar;
        //aVar access will not compile
        if(aCond()) aVar = new Object();
        //aVar access will not compile unless you did if(true)
        aVar = new Object();
        //aVar is accessible here
        {
            //aVar is accessible here
        }
        //aVar is accessible here
    }
    //aVar is not accessible here
}
{
    //aVar is not accessible here
} 
```

不同的方法将是一组不同的括号，因此超出了范围。

除非...

## 全球的

全局变量始终可以在整个文件中访问。全局变量在函数之外，在类的块中声明，因此所有块都可以访问它们。全局变量可以通过:`FileName.variable`或访问`objectName.variable`。使用文件名还是对象名取决于是否使用`static`。

此外，方法也受全局范围的影响。

下面是一个全局变量的例子：

```
public class Foo {
    public static int bar = 10;
    public static void main(String[] args) {
        System.out.println(bar);
    }
} 
```

### 静止的

如果变量是，`static`那么它对于该对象的所有实例都是常量。（请记住，所有 Java 文件都是真正的对象）

如果变量不是`static`，那么它对于该对象的每个实例都是唯一的。

虽然这不是真正的范围

### 私有/公共/包私有

任何标记为 的`private`内容都可以在整个文件中访问，但只能访问该文件。这就像`static`来自 C.

任何标记的`public`内容都可以从任何文件中访问。这与`extern`来自 C的类似。

例如，任何未标记的内容都`int x;`被视为包私有。这意味着同一包（文件夹）中的任何文件都可以访问它。因此，如果我`Foo.bar()`在包中有，则包`x.y`中的任何其他类都`x.y`可以调用`Foo.bar()`，但不能调用`x.z`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T00:57:05.577

方法`amIOutOfScope`只能看到方法内部定义的变量，包括参数和类级变量。这里`x`不符合那个标准。

# typo3 - 如何在typo3 6 中创建新的扩展？

> ID：14905630
> 
> 赞同：4
> 
> 时间：2013-02-16T00:41:05.063
> 
> 标签：typo3

如何在typo3 6 中创建新的扩展？kickstarter 扩展是否与typo3 6 兼容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T01:03:41.363

您可以使用扩展名“extension_builder”。它为基于 extbase/fluid 的扩展生成（骨​​架），并与 TYPO3 6.0 兼容（甚至在生成的扩展中使用命名空间，仅在 6.0 中引入）。

如果你想构建流体/exbase 扩展，你应该阅读[本书](http://docs.typo3.org/typo3cms/ExtbaseFluidBook/)来熟悉这些扩展。在德语中，它也有平装本。

我不确定“kickstarter”扩展是否仍然有效，但它的最后一次更新是一个维护版本，以使其在 TYPO3 v4.6 中工作，所以它很有可能做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T20:22:00.970

**Q: 如何在typo3 6 中新建一个扩展？**
A: 在typo3 6中创建新扩展有两种方法。

*   这篇文章中描述了第一种方法：[请参阅此页面上接受的答案](https://stackoverflow.com/questions/14905630/how-to-create-a-new-extension-in-typo3-6/14905790#14905790)。它是一个点击式用户界面。您必须安装[扩展“extension_builder”](http://typo3.org/extensions/repository/view/extension_builder)
*   第二种方式是通过命令行。此处对其进行了描述：[“生成提供程序扩展”](https://fluidtypo3.org/documentation/templating-manual/templating/provider-extension/generating-extensions.html)。

创建扩展的第二种方式的简单示例：

1.  登录到您的typo3 v6.2 项目
2.  安装[扩展“builder”](http://typo3.org/extensions/repository/view/builder)
3.  打开一个外壳
4.  cd 记录你的typo3项目的根目录
5.  输入此命令以使用扩展键“test”创建扩展：

    ./typo3/cli_dispatch.phpsh extbase builder:providerextension \
    --extension-key test --author "你的名字 your@email.tld" \
    --pages 1 --content 1 --controllers 1 --git 1 --travis 1 --使用-vhs 1

6.  启动您的 php 编辑器并转到 path_to_your_typo3_project/typo3conf/ext/test 并编辑您的全新扩展。

7.  欲了解更多信息，请访问[https://fluidtypo3.org/documentation/template-manual/templating/provider-extension/generating-extensions.html](https://fluidtypo3.org/documentation/templating-manual/templating/provider-extension/generating-extensions.html)

**问：kickstarter 扩展是否与typo3 6 兼容？**
答：不会。但是您使用 kickstarter 创建的“旧”基于 pi 的扩展仍将在typo3 6 上运行。

# nginx - 在 ubuntu 上使用 pcre 编译 nginx 的问题

> ID：14905631
> 
> 赞同：0
> 
> 时间：2013-02-16T00:41:11.273
> 
> 标签：nginx, pcre

我在 Ubuntu 12.04.1 LTS 上使用 PCRE 库构建 ngnix 时遇到问题。配置运行正常，但 make 命令失败。一般来说，我对 nginx 和 Linux 还很陌生，所以我不确定问题是什么。

安装步骤：

```
./configure --add-module=/home/ubuntu/mod_zip/mod_zip-master --with-http_image_filter_module --without-http_rewrite_module --with-pcre=../pcre-8.32
make
make install 
```

错误

```
cd ../pcre-8.32 \
        && make libpcre.la
make[2]: Entering directory `/home/ubuntu/pcre-8.32'
  CC     libpcre_la-pcre_byte_order.lo
  CC     libpcre_la-pcre_compile.lo
  CC     libpcre_la-pcre_config.lo
  CC     libpcre_la-pcre_dfa_exec.lo
  CC     libpcre_la-pcre_exec.lo
  CC     libpcre_la-pcre_fullinfo.lo
  CC     libpcre_la-pcre_get.lo
  CC     libpcre_la-pcre_globals.lo
  CC     libpcre_la-pcre_jit_compile.lo
  CC     libpcre_la-pcre_maketables.lo
  CC     libpcre_la-pcre_newline.lo
  CC     libpcre_la-pcre_ord2utf8.lo
  CC     libpcre_la-pcre_refcount.lo
  CC     libpcre_la-pcre_string_utils.lo
  CC     libpcre_la-pcre_study.lo
  CC     libpcre_la-pcre_tables.lo
  CC     libpcre_la-pcre_ucd.lo
  CC     libpcre_la-pcre_valid_utf8.lo
  CC     libpcre_la-pcre_version.lo
  CC     libpcre_la-pcre_xclass.lo
rm -f pcre_chartables.c
ln -s ./pcre_chartables.c.dist pcre_chartables.c
  CC     libpcre_la-pcre_chartables.lo
  CCLD   libpcre.la
make[2]: Leaving directory `/home/ubuntu/pcre-8.32'
gcc -o objs/nginx \
        objs/src/core/nginx.o \
        objs/src/core/ngx_log.o \
        objs/src/core/ngx_palloc.o \
        objs/src/core/ngx_array.o \
        ...
        ...
        ...
        objs/addon/mod_zip-master/ngx_http_zip_module.o \
        objs/addon/mod_zip-master/ngx_http_zip_parsers.o \
        objs/addon/mod_zip-master/ngx_http_zip_file.o \
        objs/addon/mod_zip-master/ngx_http_zip_headers.o \
        objs/ngx_modules.o \
        -lpthread -lcrypt ../pcre-8.32/.libs/libpcre.a -lcrypto -lcrypto -lz -lgd
objs/src/core/nginx.o: In function `main':
/home/ubuntu/nginx-1.2.6/src/core/nginx.c:275: undefined reference to `ngx_regex_init'
objs/src/http/ngx_http_core_module.o: In function `ngx_http_gzip_disable':
/home/ubuntu/nginx-1.2.6/src/http/ngx_http_core_module.c:4918: undefined reference to `ngx_regex_compile'
objs/src/http/ngx_http_core_module.o: In function `ngx_http_gzip_ok':
/home/ubuntu/nginx-1.2.6/src/http/ngx_http_core_module.c:2218: undefined reference to `ngx_regex_exec_array'
objs/src/http/ngx_http_variables.o: In function `ngx_http_regex_compile':
/home/ubuntu/nginx-1.2.6/src/http/ngx_http_variables.c:2074: undefined reference to `ngx_regex_compile'
objs/src/http/modules/ngx_http_ssi_filter_module.o: In function `ngx_http_ssi_regex_match':
/home/ubuntu/nginx-1.2.6/src/http/modules/ngx_http_ssi_filter_module.c:1882: undefined reference to `ngx_regex_compile'
objs/src/http/modules/ngx_http_referer_module.o: In function `ngx_http_referer_variable':
/home/ubuntu/nginx-1.2.6/src/http/modules/ngx_http_referer_module.c:197: undefined reference to `ngx_regex_exec_array'
objs/src/http/modules/ngx_http_referer_module.o: In function `ngx_http_add_regex_referer':
/home/ubuntu/nginx-1.2.6/src/http/modules/ngx_http_referer_module.c:582: undefined reference to `ngx_regex_compile'
objs/src/http/modules/ngx_http_fastcgi_module.o: In function `ngx_http_fastcgi_split_path_info':
/home/ubuntu/nginx-1.2.6/src/http/modules/ngx_http_fastcgi_module.c:2891: undefined reference to `ngx_regex_compile'
collect2: ld returned 1 exit status
make[1]: *** [objs/nginx] Error 1
make[1]: Leaving directory `/home/ubuntu/nginx-1.2.6'
make: *** [build] Error 2 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:49:21.177

您指定不使用 rewrite 模块，这意味着 Nginx 不需要 pcre。但随后您指定 pcre 位置。

我认为您应该删除 --with-pcre= 参数，然后就可以了。如果您不使用 rewrite 模块，则无论如何都不需要 pcre。

# java - 这个布尔值“(number & 1) == 0”是什么意思？

> ID：14905643
> 
> 赞同：80
> 
> 时间：2013-02-16T00:43:23.173
> 
> 标签：java, methods, arraylist, boolean, int

[在 CodeReview 上](https://codereview.stackexchange.com/a/22750/4884)，我发布了一段工作代码，并要求提供改进它的提示。我得到的一个方法是使用布尔方法来检查 ArrayList 是否具有偶数个索引（这是必需的）。这是建议的代码：

```
private static boolean isEven(int number)
{
    return (number & 1) == 0;
} 
```

由于我已经纠缠该特定用户以寻求很多帮助，因此我决定是时候纠缠 SO 社区了！我真的不明白这是如何工作的。调用该方法并将ArrayList 的大小作为参数（即ArrayList 有十个元素，number = 10）。

我知道单`&`次运行数字和 1 的比较，但在那之后我迷路了。

我读它的方式是说 return true if `number == 0`and `1 == 0`。我知道第一个不是真的，后者显然没有意义。有人可以帮帮我吗？

**编辑：我可能应该补充一点，代码确实有效，以防有人想知道。**

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-02-16T00:49:16.977

请记住，“&”是按位运算。您可能已经意识到这一点，但根据您提出问题的方式，我并不完全清楚。

话虽如此，理论上的想法是你有一些 int，它可以用一些 1 和 0 的序列以位表示。例如：

```
...10110110 
```

在二进制中，因为它是基数 2，所以当数字的按位版本以 0 结尾时，它是偶数，而当它以 1 结尾时，它是奇数。

因此，用 1 对上述内容进行按位 & 是：

```
...10110110 & ...00000001 
```

当然，这是0，所以你可以说原来的输入是偶数。

或者，考虑一个奇数。例如，将 1 添加到我们上面的内容中。然后

```
...10110111 & ...00000001 
```

等于 1，因此不等于 0。瞧。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-02-16T01:08:50.753

您可以通过二进制表示中的*最后一位*来确定数字是偶数还是奇数：

```
1 -> 00000000000000000000000000000001 (odd)
2 -> 00000000000000000000000000000010 (even)
3 -> 00000000000000000000000000000011 (odd)
4 -> 00000000000000000000000000000100 (even)
5 -> 00000000000000000000000000000101 (odd)
6 -> 00000000000000000000000000000110 (even)
7 -> 00000000000000000000000000000111 (odd)
8 -> 00000000000000000000000000001000 (even) 
```

`&`两个整数之间是按位与运算符：

```
0 & 0 = 0
0 & 1 = 0
1 & 0 = 0
1 & 1 = 1 
```

所以，如果`(number & 1) == 0`是`true`，这意味着`number`是偶数。

* * *

假设`number == 6`，那么：

```
6 -> 00000000000000000000000000000110 (even)

     &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&

1 -> 00000000000000000000000000000001

-------------------------------------

0 -> 00000000000000000000000000000000 
```

什么时候`number == 7`：

```
7 -> 00000000000000000000000000000111 (odd)

     &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&

1 -> 00000000000000000000000000000001

-------------------------------------

1 -> 00000000000000000000000000000001 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-02-16T00:45:00.387

`&`是按位与运算符。`&&`是逻辑 AND 运算符

在二进制中，如果设置了数字位（即一），则该数字为奇数。

在二进制中，如果数字位为零，则该数字是偶数。

`(number & 1)` 是数字位的*按位*与测试。

另一种方法（可能效率较低但更容易理解）是使用模运算符`%`：

```
private static boolean isEven(int number)
{
    if (number < 0)
       throw new ArgumentOutOfRangeException();

    return (number % 2) == 0;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-16T00:45:19.100

这个表达式的意思是“整数代表偶数”。

原因如下：十进制的二进制表示`1`是`00000000001`. 所有奇数都`1`以二进制结尾（这很容易验证：假设数字的二进制表示不以 结尾`1`；那么它由 2 的非零幂组成，它始终是偶数）。当你`AND`用奇数做一个二进制时，结果是`1`; 当你`AND`用偶数做一个二进制时，结果是`0`.

在优化器很差甚至不存在的时候，这曾经是决定奇数/偶数的首选方法，并且`%`操作员需要的循环次数是操作员的二十倍`&`。如今，如果您这样做`number % 2 == 0`，编译器可能会生成执行速度一样快的代码`(number & 1) == 0`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-16T00:45:30.310

单`&`表示按位`and`运算符**不**比较

因此，此代码检查是否设置了第一个`bit`（最不重要/最右边），这表明该数字是否`odd`存在；因为所有奇数都将以`1`最低有效位结尾，例如`xxxxxxx1`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-16T00:53:51.800

`&`是按位`AND`运算。

对于数字 = 8：

```
 1000
  0001
& ----
  0000 
```

结果就是`(8 & 1) == 0`。所有偶数都是这种情况，因为它们是 2 的倍数，并且从右边开始的第一个二进制数字始终为 0。1 的二进制值是 1，前导 0，所以当我们`AND`使用偶数时，我们就剩下了与 0。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-16T00:45:53.947

Java 中的`&`运算符是按位与运算符。基本上，`(number & 1)`在 和 之间执行按位`number`与`1`。结果是 0 或 1，取决于它是偶数还是奇数。然后将结果与 0 进行比较以确定它是否是偶数。

这是[描述按位运算的页面](http://vipan.com/htdocs/bitwisehelp.html)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-16T00:49:02.627

它正在执行二进制和反对 1，如果未设置最低有效位，则返回 0

对于你的例子

00001010 (10)

00000001 (1)

===========

00000000 (0)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-16T07:34:00.293

这是逻辑设计概念按位 & (AND) 运算符。

返回 ( 2 & 1 ); 意味着-将值转换为按位数字并比较（AND）特征并返回值。

更喜欢这个链接[http://www.roseindia.net/java/master-java/java-bitwise-and.shtml](http://www.roseindia.net/java/master-java/java-bitwise-and.shtml)

# java - 战争应用程序中的 Java 类加载器（jar/classloader hell）quartz

> ID：14905645
> 
> 赞同：0
> 
> 时间：2013-02-16T00:43:45.383
> 
> 标签：java, tomcat, classloader, quartz-scheduler

我有一个 Maven 项目设置，例如

```
parent
...pom.xml
...servlet-app 
......pom.xml ( specifies simple-lib as a dependency )
...simple-lib
......src/main/resources/config.properties
......src/main/java/package1/Config.java
......src/main/java/package1/HelloQuartzJob.java 
```

基本上，servlet 应用程序 servlet-app 将 simple-lib 指定为依赖项。配置文件 config.properties 打包在 simple-lib.jar 的顶层/级别。当我解压servelet-app.war 时，我可以看到WEB_INF/lib/simple-lib.jar。所以，一切都很好。

Config.java 看起来像这样：

```
public class Config{

    static final String PROPERTILES_FILE = "config.properties";
    static Properties props;
    static{
        log.info("Loading Config properties from {}", PROPERTILES_FILE);
        props = new Properties();

        try {
            InputStream is = ClassLoader.getSystemResourceAsStream(PROPERTILES_FILE);
            if (is == null) {
                log.info("Loading through ClassLoader as root");
                is = ClassLoader.getSystemResourceAsStream("/"+PROPERTILES_FILE);
            }
            if (is == null) {
                log.info("Loading through Config.class. root");
                is = Config.class.getResourceAsStream("/"+PROPERTILES_FILE);
            }
            if (is == null) {
                log.info("Loading through Config.class. relative");
                is = Config.class.getResourceAsStream(PROPERTILES_FILE);
            }
            if( is == null ) {
                log.info("Thread class loader root");
                is = Thread.currentThread().getContextClassLoader().getResourceAsStream("/"+PROPERTILES_FILE);
            }
            props.load(is);
        } catch (Throwable e) {
            log.error("Config properties loading error ", e);
            throw new RuntimeException(e);
        }
    }
} 
```

但是，当我在 tomcat7 中部署它时，我得到一个 NoClassDefFound/Could not initialize package1.Config 错误。我相信这是因为类加载器。

同样有趣的是，这个 package1.Config 被 HelloQuartzJob.java 使用，它是一个由在这个 servlet 应用程序中运行的调度程序实例运行的石英作业。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T07:59:32.497

您需要从类加载器实例中请求资源。

从静态上下文：

```
String url = Config.class.getClassLoader().getResource("config.properties");
InputStream is = Config.class.getClassLoader().getResourceAsStream("config.properties"); 
```

从一个实例：

```
String url = getClass().getClassLoader().getResource("config.properties");
InputStream is = getClass().getClassLoader().getResourceAsStream("config.properties"); 
```

您应该只使用相对路径而不是绝对路径（以“/”开头）来访问 webapp 上下文中的 jar 资源。

昨天我遇到了同样的麻烦，这样很容易解决:-)

这只是一个简单的类加载器问题，但它非常重要。如果您使用绝对路径，加载程序只会查看 WEB-INF/classes 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:17:16.660

我看到两个问题：

```
is = ClassLoader.getSystemResourceAsStream("/"+PROPERTILES_FILE); 
```

和

```
is = Thread.currentThread().getContextClassLoader().getResourceAsStream("/"+PROPERTILES_FILE); 
```

* * *

直接从类加载器加载资源时不要使用前导“/”字符。

从`Class.getResourceAsStream()`使用前导“/”（否则资源是相对于类的包加载的）但`ClassLoader.getResourceAsStream()`不`getSystemResourceAsStream()`使用*前导*“/”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:07:14.137

你应该替换这一行：

```
InputStream is = ClassLoader.getSystemResourceAsStream(PROPERTILES_FILE); 
```

和：

```
InputStream is = Config.class.getClassLoader().getResourceAsStream(PROPERTILES_FILE); 
```

为了使用当前的 webapp 类加载器，它的根是战争的根。

# java - 使用特定用户在java中运行jar

> ID：14905647
> 
> 赞同：0
> 
> 时间：2013-02-16T00:44:20.547
> 
> 标签：java, jar, runtime, execute, updates

让我解释一下问题：

**语境**

我有这个想要更新的应用程序。它调用了我也制作的更新程序 jar。更新程序会杀死运行旧版本的应用程序，并且更新程序会使用新版本启动一个新应用程序。

**问题**

除非我自己运行 jar，否则新版本不会启动。添加睡眠并没有解决问题。

**假设**

也许运行更新应用程序的用户是 java 并且它没有运行新版本的权限

我用我的用户运行第一个 java，而不是这个 java 应用程序用“java user”运行 jar，java 用户不能运行新版本。

当我使用运行时运行我的 jar 时，有没有办法可以指定用户。

```
Runtime.getRuntime().exec("C://Temp//myapp.jar"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:53:05.693

如果您使用的是 Windows 环境，尝试以下可能会帮助您解决问题

在 windows system32 路径上尝试该命令

```
runas /showtrustlevels 
```

你应该得到如下内容：

```
C:\Windows\system32>runas /showtrustlevels
The following trust levels are available on your system:
0x20000 (Basic User) 
```

然后，您将获取“基本用户”的值并运行以下内容来启动 jar：

```
runas /trustlevel:0x20000 "java -jar yourfileName.jar" 
```

或者你可以试试这个[链接](https://superuser.com/questions/262571/how-do-i-easily-elevate-when-running-a-jar-file)它可能有用

# javascript - mustache js - 无法使用表访问数组值

> ID：14905648
> 
> 赞同：2
> 
> 时间：2013-02-16T00:44:32.983
> 
> 标签：javascript, templates, mustache

我在 Mustache.js 访问 json 数组的值时遇到问题，我需要一些帮助。

问题是当我想使用表格访问值时。`[object Object]`当它应该显示数组内容时，它总是显示。

下面是一个工作和非工作的例子：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://raw.github.com/janl/mustache.js/0.7.2/mustache.js"></script>
</head>
<body>
<div id="template" style="display:none">
  <p>Works but not what I need:</p>
  <p>{{#numbers}} {{.}} {{/numbers}} </p>
  <p>Doesn't work:</p>
  <table>
      <tr>
        {{#numbers}} <th> {{.}} </th> {{/numbers}}
      </tr>
  </table>
</div>
<div id="rendered"></div>
<script>
var json = {
  "numbers": [ 1, 2, 3 ]
  };
var compiledTemplate = Mustache.to_html($('#template').html(), json).replace(/^\s*/mg, '');
$('#rendered').html(compiledTemplate);
</script>
</body>
</html> 
```

输出是：

```
Works but not what I need:
1 2 3
Doesn't work:
[object Object] 
```

有没有办法解决这个问题或使用 mustache.js 打印对象属性？

这个问题已经在他们的问题系统中被问过了，还没有回复： [https ://github.com/janl/mustache.js/issues/295](https://github.com/janl/mustache.js/issues/295)

谢谢，马里亚诺。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:07:41.223

最后，这就是我所做的。

将 div 元素模板替换为 script 元素：

从`<div id="template" style="display:none">`到`<script id="template" type="text/x-mustache-template">`

并按预期工作=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:19:58.340

你想要这个吗？

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://raw.github.com/janl/mustache.js/0.7.2/mustache.js"></script>
</head>
<body>
<div id="template" style="display:none">
  <p>Works but not what I need:</p>
  <p>{{#numbers}} {{.}} {{/numbers}} </p>
  <p>Doesn't work:</p>
  <table>
      <tr>
        {{#numbers}} {{{th}}} {{/numbers}}
      </tr>
  </table>
</div>
<div id="rendered"></div>
<script>
var json = {
  "numbers": [ 1, 2, 3 ],
  "th": function () {
    return "<th>" + this + "</th>"
  }
};
var compiledTemplate = Mustache.to_html($('#template').html(), json);
$('#rendered').html(compiledTemplate);
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T22:10:34.037

我花了很多时间调试这个。

问题是`$('#template').html()`。它返回损坏的 HTML，因为表格标记格式错误（外部的东西`<th>`由浏览器呈现在表格之外）

这就是为什么更改为有`<script>`帮助的原因

# php - PHP SimpleXML 元素解析问题

> ID：14905655
> 
> 赞同：0
> 
> 时间：2013-02-16T00:45:09.820
> 
> 标签：php, xml, xml-parsing, simplexml

我遇到了一个 API 返回的奇怪但显然有效的 XML 字符串。我一直在使用 SimpleXML 解析 XML，因为将它传递给函数并将其转换为方便的数组非常容易。

SimpleXML 错误地解析了以下内容：

```
<?xml version="1.0" standalone="yes"?>
<Response>
    <CustomsID>010912-1
        <IsApproved>NO</IsApproved>
        <ErrorMsg>Electronic refunds...</ErrorMsg>
    </CustomsID>
</Response> 
```

简单的 XML 会导致：

```
SimpleXMLElement Object ( [CustomsID] => 010912-1 ) 
```

有没有办法在 XML 中解析它？或者另一个返回反映 XML 结构的对象的 XML 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:39:13.783

这是对文本和其他节点的奇怪响应。如果您手动遍历它（不是作为数组，而是作为对象），您应该能够进入：

```
<?php
    $xml = '<?xml version="1.0" standalone="yes"?>
    <Response>
        <CustomsID>010912-1
            <IsApproved>NO</IsApproved>
            <ErrorMsg>Electronic refunds...</ErrorMsg>
        </CustomsID>
    </Response>';

    $sObj = new SimpleXMLElement( $xml );

    var_dump( $sObj->CustomsID );

    exit;
?> 
```

结果**第二个**对象：

```
object(SimpleXMLElement)#2 (2) {
  ["IsApproved"]=>
  string(2) "NO"
  ["ErrorMsg"]=>
  string(21) "Electronic refunds..."
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T07:18:09.457

您已经使用 SimpleXML 解析了 XML。我猜你想把它解析成一个*方便*的数组，你没有进一步定义。

您拥有的 XML 的问题在于它的结构不是很明显。如果它没有太大变化，您可以使用 a[`SimpleXMLIterator`](http://php.net/SimpleXMLIterator)而不是 a将其转换为数组`SimpleXMLElement`：

```
$it    = new SimpleXMLIterator($xml);
$mode  = RecursiveIteratorIterator::SELF_FIRST;
$rit   = new RecursiveIteratorIterator($it, $mode);
$array = array_map('trim', iterator_to_array($rit));

print_r($array); 
```

对于有问题的 XML 字符串，这给出：

```
Array
(
    [CustomsID] => 010912-1
    [IsApproved] => NO
    [ErrorMsg] => Electronic refunds...
) 
```

另请参阅[在线演示](http://eval.in/10233)和[如何使用 PHP 解析和处理 HTML/XML？](https://stackoverflow.com/q/3577641/367456).

# javascript - ajax 数据不返回正确的 jQuery html 对象

> ID：14905660
> 
> 赞同：-1
> 
> 时间：2013-02-16T00:45:36.693
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-4, str-replace

当我将 html 数据从部分视图转换为 $(data) 时，它不会返回我希望的 jQuery 对象：

`console.log($(data))`->`[#document]`

相反，它返回：

`console.log($(data))`->`[#text, <meta charset=​"utf-8">​, #text, <meta name=​"viewport" content=​"width=device-width">​, #text, <title>​&lt;/title>​, #text, <link href=​"/​css?v=EY1fW53lN3Ow8WxEYembf-Ji7ogVpt21gpjVWDy8x6c1" rel=​"stylesheet">, #text, <div>​default​&lt;/div>​, #text, <div id=​"test-div">​default​&lt;/div>​, #text, <script src=​"/​jsv=k_VAvcysGBhwGVVEK9GAtPakb2vjMfaxz2PhpxPuN0I1">​&lt;/script>​, #text ]`

当我对我的数据进行原始控制台日志时，它会返回：

`console.log(data)`->

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <link href="/css?v=EY1fW53lN3Ow8WxEYembf-Ji7ogVpt21gpjVWDy8x6c1" rel="stylesheet"/>

</head>
<body>

        <div>default</div>
        <div id="test-div">default</div>

    <script src="/js?v=k_VAvcysGBhwGVVEK9GAtPakb2vjMfaxz2PhpxPuN0I1"></script>

</body>
</html> 
```

**问题1：**如何`#test-div`从这些数据中提取？

* * *

## 更新 1

这是我的控制器：

```
public ActionResult Index(string pageName, string categorySlug, string itemSlug)
        {

            if (categorySlug != null)
            {
                var category = _db.Categories.SingleOrDefault(x => x.Slug == categorySlug);
                if (category == null) return Redirect("/");
                ViewBag.Category = category;

                if (itemSlug != null && category.Items.SingleOrDefault(x => x.Slug == itemSlug) != null)
                {
                    ViewBag.ItemSlug = itemSlug;
                }
                else if (itemSlug != null)
                {
                    return Redirect("/i/" + categorySlug);
                }
            }

            ViewBag.PageName = pageName;
            return View();
        } 
```

这是我的路由：

```
routes.MapRoute(
                name: "Default",
                url: "{pageName}/{categorySlug}/{itemSlug}",
                defaults: new { controller = "Home", action = "Index", pageName = UrlParameter.Optional, categorySlug = UrlParameter.Optional, itemSlug = UrlParameter.Optional },
                namespaces: new string[] { "ClothRent.Controllers" }
            ); 
```

索引视图：

```
@{
    ViewBag.Title = "";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string pageName = ViewBag.PageName;

    ClothRent.Models.Category c = ViewBag.Category;
}
@switch (pageName)
{
    case "info":
        Html.RenderPartial("_Info");
        break;
    case "i":
        Html.RenderPartial("_Category", c);
        break;
    default:
        <div>default</div>
        <div id="test-div">default</div>
        break;
} 
```

_Category部分视图：

```
@model ClothRent.Models.Category
@{
    string zveri = "zveri";
    string teli = "teli";
}
@switch (Model.Slug)
{
    case "zveri":
        @zveri
        break;
    case "pasaku-teli":
        @Html.Partial("_Teli", Model);
        break;

} 
```

它是如何工作的：

1.  我通过 url 访问`/i/category/`它并返回`/home/index`适当的部分视图数据，请参阅上面我如何获取部分视图。
2.  然后，如果用户想要他将继续浏览网站，但不是重新加载页面，我想在女巫情况下执行 htmlPushState，我将对特定控制器进行 ajax 调用，并提取我需要的下一个内容所需的数据。

* * *

## 更新 2

**问题 2：**有没有办法只使用 JavaScript 渲染从 ajax 调用返回的数据，这样我就不需要专门为 ajax 调用编写 API？

* * *

## 更新 3

谢谢大家的回答，我将来肯定会为独家ajax调用制作api，但现在我不掌握我网站的后端，我找到了一个使用JS的解决方案。

**[发布答案。](https://stackoverflow.com/a/14906141/593958)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:58:32.073

感谢[Dave A](https://stackoverflow.com/users/1212341/dave-a) ，我通过使用这种语法解决了问题。

`$("#container").load("/i/category/ #test-div")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:57:18.487

我觉得我懂了。由 div test-div 的选择器过滤的负载会满足您的需求吗？

```
$("#container").load('/i/category/').('#test-div'); 
```

# phantomjs - 从 phantomjs "SyntaxError: Parse error" 消息中获取更多信息

> ID：14905664
> 
> 赞同：54
> 
> 时间：2013-02-16T00:46:03.827
> 
> 标签：phantomjs

我有一个不是我写的很长的剧本。当我运行它时，我得到：

```
phantomjs file.js
SyntaxError: Parse error 
```

我查看了手册和 --help，我能想到的最好的方法是：

```
phantomjs --debug=yes file.js
(irrelevant debug statement from CookieJar)
SyntaxError: Parse error 
```

有没有更好的方法来获得至少一个行号？或任何提示？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-08-26T23:43:47.960

**使用node**运行文件。如果有解析错误，它将报告它。

如果文件有效，那么**node**也会尝试运行它，如果你的脚本依赖于**node**环境中不可用的东西，这将失败。所以你必须忽略任何运行时错误。

例如，给定**hello-world.js：**

```
// Say Hello World twice
for (var i=0; i<2; i++) {
  console.log("Hello World") );
} 
```

**使用节点**运行它：

```
node hello-world.js 
```

输出：

```
/home/someone/somewhere/hello-world.js:3
  console.log("Hello World") );
                             ^
SyntaxError: Unexpected token )
    at Module._compile (module.js:439:25)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:901:3 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-16T04:43:05.080

您`file.js`的语法无效。您应该使用语法验证器对其进行检查。我创建的在线工具可能是一种可能的解决方案，请查看[http://esprima.org/demo/validate.html](http://esprima.org/demo/validate.html)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-20T20:48:10.970

**从 PhantomJS 获取更多信息**

PhantomJS 的下一个版本（大概是 1.9.8，不管是 1.9.7 之后的版本）将输出如下错误：

```
SyntaxError: Parse error
http://localhost:9000/scripts/49e8b4f4.vendor.js:8 
```

所以这比当前消息稍微有用。

不幸的是，没有针对 PhantomJS 的夜间构建，所以此时如果你想尝试这个，你需要编译你自己的 master 版本。

**调试缩小文件**

如果您正在使用缩小文件，通常行号不会很有帮助，并且通常调试未缩小文件不会给您解析错误。

为了解决这个问题，一旦你让 phantomjs 给你文件名，你就可以使用[Esprima 的在线演示](http://esprima.org/demo/parse.html)来获取 JavaScript 代码的实际解析：

[http://esprima.org/demo/parse.html](http://esprima.org/demo/parse.html)

从那里，您可以输入战略换行符以隔离实际错误。

**对于此用例，Lint 工具不是最佳选择**

像 jslint 或 jshint 这样的 lint 工具比真正的解析器更固执己见，所以如果您正在寻找一个非常具体的语法错误，我建议您使用真正的解析器，因为它只会检查代码的有效性，而不是固执己见的样式指南。我并不是说 lint 工具没有价值，只是它们对解决这类问题没有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T08:19:13.320

您还可以使用语法 linter，例如 jslint 或 jshint

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-16T17:46:18.067

我`SyntaxError: Parse error`在尝试`require`自定义缩小 jquery 时收到。

我发现解决方案**是**在`jquery.min.js`.

希望这可以帮助某人。使用 PhantomJS 1.9.7。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-01T16:57:53.770

我使用一个简单的 shell 脚本，如果没有发现解析错误，它将正常运行 Phantom，否则会显示错误。它通过节点运行脚本，在输出中检查，`SyntaxError`如果有错误，则将节点重新运行到终端。它将所有命令行参数传递给 Phantom。

如果您的节点解析器与您的 Phantom 解析器显着不同，则此方法的失败模式是。我的距离很近，从来都不是问题。

用法：`./debug.sh --myArg1 val1 --myArg2 val2`

调试.sh：

```
ERROR=$(node myscript.js 2>&1 >/dev/null |  grep "SyntaxError")

if [ "$ERROR" = "" ]; then
  echo "No parse errors, running script..."
  # run the script with Phantom and pass all the args to it
  phantomjs accession.js $*
else
  echo "*********************************************************"
  echo "********* There are parse errors in the script: *********"
  echo "*********************************************************"
  # show the errors by running again but not redirecting
  node accession.js
fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-10T07:13:39.880

我确实有同样的问题，但没有一个解决方案对我有用。

我认为这个问题可能是 PhantomJS 的 webkit 不支持的语法，因为我的页面在当前浏览器版本中正常工作。

我所做的是找出 PhantomJS 使用的 webkit 版本，对于 1.9.* 它在[这里](https://github.com/ariya/phantomjs/blob/1.9.0/src/qt/src/3rdparty/webkit/Source/WebKit/mac/Configurations/Version.xcconfig)，`34.534`.

[现在我们必须在这里](https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/)找到使用相同 webkit 或接近它的 Chromium 版本（对于 Mac）。

最终选择了[Mac OSX 267668](https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/267668/)并安装了它。

加载了与 PhantomJS 相同的 URL，这是一个`Uncaught SyntaxError: Unexpected token`具有完整堆栈跟踪的真实 URL。

希望有帮助。

# sql-server - 如何通过 Oracle Database Link 执行远程查询

> ID：14905665
> 
> 赞同：1
> 
> 时间：2013-02-16T00:46:16.050
> 
> 标签：sql-server, oracle

我使用 Oracle Database Link 从 SQL Server 查询数据。查询类似于：

```
select *
from tableA@DL_SqlServer a
join tableB@DL_SqlServer b
on a.ID = b.ID 
```

tableA 和 tableB 很大，结果比较小。此查询在 SQL Server 中执行得很快，因为索引是在两个表上构建的。但是 Oracle 数据库链接到 SQL Server 的速度非常慢。我猜连接操作是在 Oracle 端而不是在 SQL Server 端执行的，因此不使用索引。由于我只需要连接的结果，我更喜欢完全在 SQL Server 上执行查询并只获得小结果。我知道使用 SQL Server 的链接服务器和 OPENQUERY 函数可以实现这个目标。我想知道如何在 Oracle Database Link 上执行此操作。谢谢！顺便说一句，我无权在 SQL Sevrer 上创建视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:21:56.980

您很可能需要使用该[`DBMS_HS_PASSTHROUGH`包](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_hspass.htm)。就像是

```
DECLARE
  l_cursor PLS_INTEGER;
BEGIN
  l_cursor := dbms_hs_passthrough.open_cursor@dblink_to_sql_server;
  dbms_hs_passthrough.parse@dblink_to_sql_server( l_cursor, <<select statement>> );
  while dbms_hs_passthrough.fetch_row@link_to_sql_server(l_cursor) > 0 
  loop
    dbms_hs_passthrough.get_value@dblink_to_sqlserver( l_cursor, 1, <<local variable for first column>> );
    dbms_hs_passthrough.get_value@dblink_to_sqlserver( l_cursor, 2, <<local variable for second column>> );
    ...
  end loop;
  dbms_hs_passthrough.close_cursor@dblink_to_sqlserver( l_cursor );
END; 
```

# php - 复制动态创建的变量

> ID：14905668
> 
> 赞同：0
> 
> 时间：2013-02-16T00:46:33.123
> 
> 标签：php, codeigniter

我想在我的代码中概括模型的名称。

我创建了一个父控制器，它会自动加载与控制器类名匹配的模型。

但是，加载模型时，它具有模型的名称。前任; `$this->load->model('some_model') creates $this->some_model`

我想做的是创建变量 $this->model 来替换`$this->some_model`.

我宁愿不更改核心代码，所以我希望有一些 PHP 解决方案可以在我的父控制器中使用。

我尝试了以下没有运气：

```
$this->load->model($model_name);
$this->model = ${ $model_name }; 
```

这将返回一个`$this->model_name undefined`错误。

保重，李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:48:01.037

> 如果您希望将模型分配给不同的对象名称，可以通过加载函数的第二个参数指定它：
> 
> ```
> $this->load->model('Model_name', 'fubar');
> $this->fubar->function(); 
> ```

[http://ellislab.com/codeigniter/user-guide/general/models.html#what](http://ellislab.com/codeigniter/user-guide/general/models.html#what)

# c++ - 二叉搜索树的前序，错误，不确定是什么错误

> ID：14905670
> 
> 赞同：0
> 
> 时间：2013-02-16T00:46:49.217
> 
> 标签：c++, binary-search-tree

这个函数在二叉树类里面

```
/***********************
 *
* give preorder of tree
*
* ********************/

void preorder(Node * node, std::ostream &p_str){
    if(node != NULL){

            //p_str << node->Data() << " ";

            if(node->m_ll) {

                    preorder(node->m_ll, &p_str);

            }

            if(node->m_rl) {

                    preorder(node->m_rl, &p_str);
            }
    }
 } 
```

这在课外打了电话。递归遍历树，从根开始

```
void preorder(Node * node, std::ostream &p_str){
    if(node != NULL){

            //p_str << node->Data() << " ";

            if(node->m_ll) {

                    preorder(node->m_ll, &p_str);

            }

            if(node->m_rl) {

                    preorder(node->m_rl, &p_str);
            }
    }
 } 
```

我收到类似的错误

```
Tree.h:337: error: no matching function for call to       'CTree<int>::preorder(CTree<int>::Node*&, std::ostream*)'
Tree.h:330: note: candidates are: void CTree<T>::preorder(CTree<T>::Node*, std::ostream&) [with T = int]
 Tree.h:343: error: no matching function for call to 'CTree<int>::preorder(CTree<int>::Node*&, std::ostream*)'
 Tree.h:330: note: candidates are: void CTree<T>::preorder(CTree<T>::Node*, std::ostream&) [with T = int] 
```

对我忽略的相当简单的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:48:48.973

您不需要传递地址`ostream`对象。该函数正在获取*引用*，而不是指针：

```
preorder(node->m_rl, p_str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:48:48.983

您的函数需要引用参数，但`&p_str`它是一个指针。

只需调用`preorder(node->m_ll, p_str);`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:49:15.283

`preorder(node->m_ll, &p_str);`应该`preorder(node->m_ll, p_str);`

# javascript - D3.js - 检索给定数据子集的 DOM 子集

> ID：14905671
> 
> 赞同：2
> 
> 时间：2013-02-16T00:47:00.203
> 
> 标签：javascript, d3.js

我正在使用 d3.js 创建大量 svg:ellipse 元素（~5000）。在初始渲染之后，一些数据项可以通过后端更新（我会知道哪些），我想改变那些椭圆的颜色（例如）。

有没有一种快速的方法来恢复与一个或多个数据项关联的 DOM 元素或元素？如果使用数据子集重新计算完整的 DOM 元素集的连接，除了显而易见的技术之外？

```
var myData = [{ id: 'item1'}, { id: 'item2' }, ... { id: 'item5000' }];
var create = d3.selectAll('ellipse).data(myData, function(d) { return d.id; });
create.enter().append('ellipse').each(function(d) {
    // initialize ellipse
});

// later on

// this works, but it seems like it would have to iterate over all 5000 elements
var subset = myData.slice(1200, 1210); // just an example
var updateElements = d3.selectAll('ellipse').data(subset, function(d) { return d.id; });
updateElements.each(function(d) {
    // this was O(5000) to do the join, I _think_
    // change color or otherwise update
}); 
```

我每秒渲染更新多次（尽可能快，真的），而且更新少数元素的 O(5000) 似乎很多。

我在想这样的事情：

```
create.enter().append('ellipse').each(function(d) {
    d.__dom = this;
    // continue with initialization
});

// later on

// pull the dom nodes back out
var subset = myData.slice(1200, 1210).map(function(d) { return d.__dom; });
d3.selectAll(subset).each(function(d) {
    // now it should be O(subset.length)
}); 
```

这行得通。但这似乎是一种常见的模式，所以我想知道是否有解决此问题的标准方法？我实际上想在多个渲染中使用我的数据，所以我需要更聪明，这样它们就不会相互绊倒。

基本上，我知道 d3 通过 domElement 提供来自 DOM -> 数据的映射。`__data__`. 除了手动缓存值之外，是否有一种快速简便的方法来计算反向映射？

我需要从数据-> DOM 中获取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T07:30:40.850

只要您保持 d3 选择引用处于活动状态（`create`在您的示例中），D3 就会使用映射将数据键映射到更新中的 DOM 节点，因此它实际上是 O(log n)。

我们可以使用 D3 update /data 运算符方法与子集上的循环方法进行一些测试：

```
var d3UpdateMethod = function() {
    svg.selectAll("ellipse").data(subset, keyFunc)
        .attr("style", "fill:green");
}
var loopMethod = function() {
    for (var i=0; i < subset.length; i++) {
        svg.selectAll(".di" + i)
        .attr("style", "fill:green");
    }
}
var timedTest = function(f) {
    var sumTime=0;
    for (var i=0; i < 10; i++) {
        var startTime = Date.now();
        f();
        sumTime += (Date.now() - startTime);
    }
    return sumTime / 10;
};
var nextY = 100;
var log = function(text) {
    svg.append("text")
        .attr("x", width/2)
        .attr("y", nextY+=100)
        .attr("text-anchor", "middle")
        .attr("style", "fill:red")
        .text(text);
};

log("d3UpdateMethod time:" + timedTest(d3UpdateMethod));
log("loopMethod time:" + timedTest(loopMethod)); 
```

我还创建了一个小提琴来展示我理解你在[这里](http://jsfiddle.net/activescott/dapPG/)尝试做的事情。

* * *

另一种便于跟踪子集中节点的方法是向子集中添加 CSS 类。例如：

```
var ellipse = svg.selectAll("ellipse").data(data, keyFunc).enter()
    .append("ellipse")
    .attr("class", function (d) { 
        var cl = "di" + d.i;
        if (d.i % 10 == 0)
            cl+= " subset"; //<< add css class for those nodes to be updated later
        return cl;
    })
    ... 
```

请注意如何将“子集”类仅添加到您知道在您的子集中稍后更新的那些节点。然后，您可以稍后选择它们进行更新：

```
svg.selectAll("ellipse.subset").attr("style", "fill:yellow"); 
```

我也更新了[fiddle](http://jsfiddle.net/activescott/dapPG/)以包含这个测试，它几乎和 directMethod 一样快。

# html - CakePHP：将视图文件保存在同一目录中

> ID：14905674
> 
> 赞同：1
> 
> 时间：2013-02-16T00:47:33.543
> 
> 标签：html, cakephp

对于`controller_A`的观点，我目前`$this->element('repeatedly_used_html');`在`element`文件夹`.ctp`中使用了一些多次使用的文件。但是，该文件`element`夹中的某些文件完全用于一个控制器，并且该文件`element`夹中的文件是杂乱无章的。

因此，例如，`controller_A`具有使用文件`element`夹中文件的视图。我希望`.ctp`控制器 A 的视图的这些文件包含在`app/views/A`.. 有没有办法调用类似于`$this->element('repeatedly_used_html');`允许我将文件保存在文件夹中的调用`app/views/controller_A`？我想避免写一个很长的`.ctp`文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T01:04:24.853

看起来您正在使用基于您的目录结构的 CakePHP 1.3。如果是这种情况，您可以通过简单地使用`render()`方法而不是`element()`. 这将使用当前视图路径（在本例中为您所在的控制器）呈现模板。

```
echo $this->render('repeatedly_used_html', false); 
```

第二个参数是布局，我们设置它`false`以确保整个布局不与视图一起呈现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T00:55:37.633

```
echo $this->element( 'subfoldername/viewfile' ); 
```

然后在您的元素文件夹中创建 subfoldername 目录。

# android - 使用 hashmap 检索多个图像

> ID：14905675
> 
> 赞同：-2
> 
> 时间：2013-02-16T00:47:54.723
> 
> 标签：android, hashmap

我想问一下如何同时检索图像，例如如果我在点击完成后输入字母 abc，将出现与我输入的内容相对应的 3 张图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:11:04.033

你的问题有点不清楚，但如果我理解得很好，你想为作为输入输入的每个字符显示一个图像。

因此，您保留一个哈希图，其中键是字符，值是您要为该字符显示的图像。将输入分解为单独的字符后，您会找到要使用该`variable_name.get(Object key)`方法显示的单独图像，因此在这种情况下，您将一个接一个地传递单独的字符作为参数。检索图像后显示它们。

# node.js - ECONNREFUSED socket.io GRITS 谷歌游戏

> ID：14905690
> 
> 赞同：0
> 
> 时间：2013-02-16T00:50:09.413
> 
> 标签：node.js, socket.io

我正在尝试在 Mac OS X 上设置 Google HTML 5“Grits”。

[http://code.google.com/p/gritsgame/wiki/DeveloperSetUp](http://code.google.com/p/gritsgame/wiki/DeveloperSetUp)

当我到达[实际在本地运行](http://code.google.com/p/gritsgame/wiki/DeveloperSetUp#Actually_running_locally)时，我收到了这个错误：

```
$ sudo node games-server/main.js $*
   info  - socket.io started
SERVERID: nKmXj1MfcULEx31vTlBtmz+u
checkConnection: POST http://localhost:9100/register-controller -> FAILED due to Error: connect ECONNREFUSED
Will call checkConnection again in 3.2 seconds 
```

我是节点新手，在运行此命令之前我需要先启动服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:50:09.413

我解决了它：

您需要先启动应用引擎：

```
dev_appserver.py --skip_sdk_update_check --backends . $* 
```

然后就可以运行node命令了

```
node games-server/main.js $* 
```

（我不确定为什么 wiki 以相反的顺序排列它们。）

# php - 如何使用多个表单提交唯一数据 PHP/MySQL

> ID：14905691
> 
> 赞同：0
> 
> 时间：2013-02-16T00:50:10.573
> 
> 标签：php, html, mysql, sql, forms

我构建表单数据的方式是在 while 循环中创建它们，但每次创建它们时，表单都会采用唯一的 id。所以我的问题是，我如何单独访问它们并将指定的数据更新到 MYSQL 服务器。我试图在脚本末尾的代码中执行此操作，但我不确定如何单独访问表单

```
<?php 
        include 'user_data.php';
        include 'core.inc.php';

        $query = mysql_query("SELECT `post_text` FROM `posts`,`sub_posts` WHERE sub_posts.post_id = posts.id AND                sub_posts.user_id='$user_id'");

        while($row = mysql_fetch_array($query)){

          ?><a href="#" class="askedClick"><?php echo $row[post_text].'<br>'?></a>

          <form action="<?php $curent_file ?>" method="POST">
            <textarea name="answer_field" > </textarea><br />
            <input type="submit" value="Submit Answer">
            <input type="hidden" name="post_id" value="<?php echo $row['post_id']; ?>" />
         </form>

    <?php
        }//While Loop
    if (isset($_POST['answer_field']) && !empty($_POST['answer_field'])){   
        $answer = mysql_real_escape_string($_POST['answer_field']);
        $id = intval($_POST ['post_id']);
        $query = "UPDATE `sub_posts` SET `sub_answer`='$answer' WHERE `post_id`='$id'";
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:55:38.447

单击“提交”字段时，只会发布一个表单。表单名称不会自行提交。相反，您可以将表单对应的帖子 ID 放置为隐藏字段：

```
<input type="hidden" name="post_id" value="<?php echo $row['post_id']; ?>" /> 
```

然后后来：

```
$answer = mysql_real_escape_string ($_POST ['answer']);
$id = intval ($_POST ['post_id']);
$query = "UPDATE `sub_posts` SET `sub_answer`='{$answer}' WHERE `post_id`={$id}"; 
```

请注意，您肯定需要在将答案放入查询之前对其进行转义，并确保 ID 是一个数字。否则，您将向 SQL 注入攻击开放您的代码。

# android - 将大型本地 gson 与远程 gson 进行比较

> ID：14905696
> 
> 赞同：0
> 
> 时间：2013-02-16T00:50:30.230
> 
> 标签：android, hash, compare, gson

发送大型 pojo 时，我想检查字节变化而不是结构的细节差异。也许在内存中序列化和散列 pojo，但这在 Android 设备上可能会失败。任何想法都会令人兴奋。也许应该遍历它的dom样式。

**出去**

```
outputStreamWriter = new OutputStreamWriter( out, "UTF-8");
jsonWriter = new JsonWriter(outputStreamWriter);
jsonWriter.setIndent("  ");
jsonWriter.setIndent("\t"); 
jsonWriter. beginArray();
mygson.toJson( largeTestPojo, LargeTestPojo.class, jsonWriter );
jsonWriter.endArray();
jsonWriter.flush(); 
```

**在**

```
InputStreamReader isr = new InputStreamReader( in, "UTF-8");
StatsTypeAdapterFactory stats = new StatsTypeAdapterFactory();
Gson gson = new GsonBuilder().registerTypeAdapterFactory(stats).create();
jsonReader = new JsonReader( isr );
jsonReader. beginArray();
largeTestPojo= gson.fromJson( jsonReader, LargeTestPojo.class );
jsonReader.endArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:02:09.140

> 我想检查字节变化而不是结构的细节差异

我不确定那是什么意思。

> 将大型本地 gson 与远程 gson 进行比较

我不清楚在哪里进行比较，完整的输入和输出内容是否可以在同一个地方获得，或者像哈希这样的东西 - 如前所述 - 用于表示一端的东西，或者另一个。

如果在比较时可以使用完整的输入和输出结构，那么...

我可能不会将 Gson API（或任何序列化 API）用于数据结构（或服务消息）值比较的任务。我更喜欢仅将 Gson 之类的序列化 API 用于序列化/反序列化任务，从而使系统的这些层保持精简和简单合理。

所以，我可能更喜欢反序列化到 target `LargeTestPojo`，并为它实现一个`compareTo`和/或`equals`方法，或者只是将两个数据集放入一个映射中，然后从那里进行比较。

# javascript - 在Jquery中的.on事件期间获取属性

> ID：14905699
> 
> 赞同：-1
> 
> 时间：2013-02-16T00:51:04.250
> 
> 标签：javascript, jquery

所以，我有 10 个这样的链接： `<a href="#" data-test="test" class="testclass"></a>`
and on function。像这样：

```
$(document).on("click", ".testclass", function () {
        alert($(this).attr('data-test'));
    }); 
```

在这种情况下，我无法理解如何获取特定 a 标签的 data-test 属性。`$(this)`返回`document`对象而不是`a`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T00:55:03.487

您必须将侦听器绑定到锚点，而不是文档：

```
$('a.testclass').on('click', function() {
    alert($(this).data('test'));
}) 
```

[数据函数](http://api.jquery.com/jQuery.data/)是获取附加到 DOM 元素的数据的正确方法。

# c# - 如何转换字符串并将其添加到列表 ?

> ID：14905700
> 
> 赞同：2
> 
> 时间：2013-02-16T00:51:15.370
> 
> 标签：c#, string, list, byte

我有一个要转换为字节的字符串（正确使用 encoding.getbytes() 函数），然后将转换产生的字节添加到列表中。

我怎样才能做到这一点？我考虑过做一个 for 并转换字符串中的每个字符并将其一个一个添加到列表中，但我想知道是否有更有效的方法来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:58:09.453

```
class Program
{
    static void Main(string[] args)
    {
        String str = "Kiran Bheemarti";

        List<byte> bytes = Encoding.ASCII.GetBytes(str).ToList();

        Console.Read();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:59:12.327

您不能将 GetBytes 数组转换为列表吗？

```
List<byte> byteList = Encoding.Default.GetBytes(inputString).ToList(); 
```

或者将数组传递给 List 的构造函数：

```
List<byte> byteList = new List<Byte>(Encoding.ASCII.GetBytes(str)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:59:19.813

循环是不必要的，你可以从字符串中获取字节数组，然后调用`AddRange()`List 的方法将它们添加到列表中。

```
List<byte> byteList = new List<byte>();  

foreach (var currentString in stringCollection)
{                
    var bytes = Encoding.Unicode.GetBytes(currentString);
    byteList.AddRange(bytes);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T01:05:54.480

如果你有一个字节格式的字符串列表，你可以应用它。

```
var stringByte = new List<string>();

var sr = stringByte.ConvertAll(c => Encoding.Default.GetBytes(c))).ToList(); 
```

# google-cloud-storage - 如何组织云存储中的大量对象？

> ID：14905701
> 
> 赞同：1
> 
> 时间：2013-02-16T00:51:20.720
> 
> 标签：google-cloud-storage

我正在寻找有关如何组织大量对象的建议。

假设传入率约为每天 60,000,000 个文件，我希望将它们保留 180 天。

使用每小时分区，顶层将有 4320 (24 * 180) 个目录。每个目录平均包含约 2,500,000 个文件。

如果我只需要通过完整路径单独获取文件并且不需要列出目录的内容，那么将所有 2500000 个文件保留在同一级别是否有任何问题？

或者我应该散列文件名并将它们存储在多个子目录中？（就像如果存储在传统文件系统上通常是如何完成的）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T01:29:06.973

您可以在存储桶中存储的对象数量没有限制，并且将对象分成更多“子目录”不会产生任何可伸缩性或性能差异。对于 Google Cloud Storage 服务，所有对象名称都是扁平的：路径中的“/”看起来就像对象名称中的任何其他字符。

Mike Schwartz，谷歌云存储团队

# wordpress - Wordpress，按评论计数对帖子进行排序

> ID：14905702
> 
> 赞同：0
> 
> 时间：2013-02-16T00:51:23.507
> 
> 标签：wordpress, buddypress

我已经尝试了以下链接上的解决方案，但是，我无法让它们显示帖子！

```
http://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query
http://wordpress.stackexchange.com/questions/1529/displaying-posts-depending-on-number-of-comments-and-latest-comments
http://wordpress.org/support/topic/sort-by-number-of-comments 
```

这是我的默认代码，我的问题是，如何让此代码按评论计数排序？

```
<?php
/*
Template Name: Homepage
*/
get_header(); global $gp_settings, $user_ID, $user_identity, $user_level; 

$referrer = $_SERVER['HTTP_REFERER'];

?>

<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

    <!-- BEGIN CONTENT -->  

    <div id="content">

        <!-- BEGIN POST CONTENT --> 

        <?php if($post->post_content) { ?>  

            <div id="post-content">
                <?php the_content(__('Read More &raquo;', 'gp_lang')); ?>
            </div>

            <?php } ?>

        <!-- END POST CONTENT -->           

    </div>

    <!-- END CONTENT -->    

<?php endwhile; endif; ?>

<?php get_footer(); ?> 
```

这是我尝试过但没有成功的代码示例

```
<?php
/*
Template Name: Homepage
*/
get_header(); global $gp_settings, $user_ID, $user_identity, $user_level; 

$referrer = $_SERVER['HTTP_REFERER'];

?>
 <?php

 $querystr = "
SELECT $wpdb->posts.* 
FROM $wpdb->posts, $wpdb->postmeta
WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id 
AND $wpdb->postmeta.meta_key = 'tag' 
AND $wpdb->postmeta.meta_value = 'email' 
AND $wpdb->posts.post_status = 'publish' 
AND $wpdb->posts.post_type = 'post'
AND $wpdb->posts.post_date < NOW()
ORDER BY $wpdb->posts.post_date DESC
 ";

 $pageposts = $wpdb->get_results($querystr, OBJECT);

 ?>
 <?php if ($pageposts): ?>
 <?php global $post; ?>
 <?php foreach ($pageposts as $post): ?>
 <?php setup_postdata($post); ?>

    <!-- BEGIN CONTENT -->  

    <div id="content">

    <!-- BEGIN POST CONTENT --> 

    <?php if($post->post_content) { ?>  

        <div id="post-content">
            <?php the_content(__('Read More &raquo;', 'gp_lang')); ?>
        </div>

    <?php } ?>

    <!-- END POST CONTENT -->           

</div>

<!-- END CONTENT -->    

 <?php endforeach; ?>
 <?php endif; ?>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:58:12.530

经验法则：如果您对默认的 Wordpress 表运行 SQL 查询，您可能做错了。

假设您页面的原始查询中出现的帖子是正确的，并且您只想修改它们的顺序，您可以使用主循环的原始参数来构造一个新的查询并通过它循环：

```
<?php
/*
Template Name: Homepage
*/
get_header(); global $gp_settings, $user_ID, $user_identity, $user_level; 
$referrer = $_SERVER['HTTP_REFERER'];

global $wp_query; //Gets the default query
$default_args = $wp_query->query; //Grabs the original arguments
/*
If you find that the above line returns a string rather than an array,
use this instead:
*/
//parse_str($wp_query->query, $default_args);
$default_args['orderby'] = 'comment_count'; //Set the new order parameter
$q = new WP_Query($default_args); //Generate a new Query

if ($q->have_posts()) : while ($q->have_posts()) : $q->the_post(); //Loop through new Query ?>
    <!-- BEGIN CONTENT -->  
    <div id="content">
        <!-- BEGIN POST CONTENT --> 
        <?php if($post->post_content) { ?>  
            <div id="post-content">
                <?php the_content(__('Read More &raquo;', 'gp_lang')); ?>
            </div>
            <?php } ?>
        <!-- END POST CONTENT -->           
    </div>
    <!-- END CONTENT -->
<?php
endwhile; endif;
get_footer();
?> 
```

# php - Wordpress register_activation_hook() 回调超出范围？

> ID：14905703
> 
> 赞同：1
> 
> 时间：2013-02-16T00:51:31.627
> 
> 标签：php, wordpress, scope

我正在开发一个 Wordpress 插件，它利用 register_activation_hook() 方法在激活时自动安装。但是，永远不会调用挂钩应该处理安装的方法。这是我的代码：

**音频存档/音频存档.php：**

```
<?php
/*
Plugin Name: Audio Archive Manager
...
*/

...
define("FFI_AAM_PATH", plugin_dir_path(__FILE__));
...

require_once(FFI_AAM_PATH . "includes/FFI_AAM_Hook_Manager.php");
new FFI_AAM_Hook_Manager();
?> 
```

**音频存档/包含/FFI_AAM_Hook_Manager.php：**

```
<?php
class FFI_AAM_Hook_Manager {
  public function __construct() {
    echo "Hello"; //Runs perfectly
    register_activation_hook(__FILE__, array($this, "activationHandler"));
    register_uninstall_hook(__FILE__, array($this, "uninstallHandler"));
  } 

//Never called
  public function activationHandler() {
    die("I've been CALLED!");
    require_once(FFI_AAM_PATH . "includes/FFI_AAM_Installer.php");
    new FFI_AAM_Installer();
  }

//Never called
  public function uninstallHandler() {
    die("I've been CALLED!");
    require_once(FFI_AAM_PATH . "includes/FFI_AAM_Uninstaller.php");
    new FFI_AAM_Uninstaller();
  }
}
?> 
```

我相信这是一个与范围相关的问题，但我不知道如何克服它，因为我遵循了[Wordpress 的指示](http://codex.wordpress.org/Function_Reference/register_activation_hook#Examples)。

有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:03:32.020

如果你这样做呢？

```
$hm = new FFI_AAM_Hook_Manager;
register_activation_hook( __FILE__, array( &$hm, 'activationHandler' );
register_uninstall_hook( __FILE__, array( &$hm, 'uninstallHandler' ); 
```

**班级：**

```
class FFI_AAM_Hook_Manager {

    public function activationHandler() {
        // activation code here
    }

    public function uninstallHandler() {
        // deactivation code here
    }
} 
```

# python - 是什么导致 Python 抱怨在没有列表的代码中列出列表？

> ID：14905705
> 
> 赞同：1
> 
> 时间：2013-02-16T00:51:59.343
> 
> 标签：python, numpy, typeerror

在我编写的文件中（从实际代码中剥离）

```
e = numpy.zeros(4)
n = e.copy()
n[0]=e[0]
for i in range(len(e)-1)+1:
    n[i] = n[i-1]*e[i] + e[i] 
```

当我运行 .py 文件时，Python 说：

```
>>> for i in range(len(e)-1)+1:
...     n[i] = n[i-1]
...
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can only concatenate list (not "int") to list 
```

奇怪的是，如果我`"i=1"`将（或其他值）和实际工作的一行粘贴到 Python 提示符中，则没有错误。无论如何，我没有看到任何列表；这都是 numpy 数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T00:53:43.400

```
range(len(e)-1) + 1 
```

这是将一个 int ( `1`) 连接到一个列表 ( `range(...)`) 上。

也许你打算这样做？

```
for i in range(1, len(e)): 
```

# go - Go — 声明但未使用错误，当我认为我对变量这样做时

> ID：14905708
> 
> 赞同：7
> 
> 时间：2013-02-16T00:52:38.067
> 
> 标签：go

这段代码有什么问题？

```
package main

import "fmt"

// fibonacci is a function that returns
// a function that returns an int.
func fibonacci() func() int {
    prev := 0
    curr := 1
    return func() int {
        temp := curr
        curr := curr + prev
        prev := temp
        return curr
    }
}

func main() {
    f := fibonacci()
    for i := 0; i < 10; i++ {
        fmt.Println(f())
    }
} 
```

*prog.go:13: prev 声明但未使用*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-16T00:54:43.527

您声明了一个名为的变量`prev`，然后从未使用过它。

具体来说，你说`prev := temp`。这是在当前范围内创建一个新的局部变量，名为`prev`. 我假设您只想说`prev = temp`，它修改了`prev`从周围范围继承的变量。同样，您可能打算`curr = curr + prev`在上一行说，而不是使用`:=`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T04:23:51.790

如果您做出[Kevin Ballard](https://stackoverflow.com/users/582/kevin-ballard)建议的更改，那么，

```
package main

import "fmt"

// fibonacci is a function that returns
// a function that returns an int.
func fibonacci() func() int {
    prev := 0
    curr := 1
    return func() int {
        temp := curr
        curr = curr + prev
        prev = temp
        return curr
    }
}

func main() {
    f := fibonacci()
    for i := 0; i < 10; i++ {
        fmt.Println(f())
    }
} 
```

输出：

```
1
2
3
5
8
13
21
34
55
89 
```

输出不是[斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)列。

对于[斐波那契数](http://oeis.org/A000045)列，

```
package main

import "fmt"

func fibonacci() func() int {
    a, b := 0, 1
    return func() (f int) {
        f, a, b = a, b, a+b
        return
    }
}

func main() {
    f := fibonacci()
    for i := 0; i < 10; i++ {
        fmt.Println(f())
    }
} 
```

输出：

```
0
1
1
2
3
5
8
13
21
34 
```

# performance - Matlab + CUDA 求解矩阵向量方程 A*x=B 很慢

> ID：14905709
> 
> 赞同：6
> 
> 时间：2013-02-16T00:52:40.560
> 
> 标签：performance, matlab, matrix, cuda, linear-algebra

我正在计算一个方程 A*x=B，其中 A 是矩阵，B 是向量，x 是答案（未知）向量。

硬件规格：Intel i7 3630QM（4 核），nVidia GeForce GT 640M（384 CUDA 核）

这是一个例子：

```
>> A=rand(5000);

>> B=rand(5000,1);

>> Agpu=gpuArray(A);

>> Bgpu=gpuArray(B);

>> tic;A\B;toc;

Elapsed time is 1.382281 seconds.

>> tic;Agpu\Bgpu;toc;

Elapsed time is 4.775395 seconds. 
```

不知何故，GPU要慢得多……为什么？FFT、INV、LU计算也比较慢，应该和矩阵除法有关。

但是，GPU 在矩阵乘法中要快得多（相同的数据）：

```
>> tic;A*B;toc;

Elapsed time is 0.014700 seconds.

>> tic;Agpu*Bgpu;toc;

Elapsed time is 0.000505 seconds. 
```

主要问题是为什么 GPU A\B (mldivide) 比 CPU 慢？

更新

以下是 A、B（在 CPU 上）、AA、BB（在 GPU 上）为 rand(5000) 时的更多结果：

```
>> tic;fft(A);toc;
Elapsed time is *0.117189 *seconds.
>> tic;fft(AA);toc;
Elapsed time is 1.062969 seconds.
>> tic;fft(AA);toc;
Elapsed time is 0.542242 seconds.
>> tic;fft(AA);toc;
Elapsed time is *0.229773* seconds.
>> tic;fft(AA);toc; 
```

大胆的时代是稳定的时代。但是 GPU 几乎慢了两倍。顺便说一句，为什么 GPU 在前两次尝试时更慢？是先编译两次吗？

此外：

```
>> tic;sin(A);toc;
Elapsed time is *0.121008* seconds.
>> tic;sin(AA);toc;
Elapsed time is 0.020448 seconds.
>> tic;sin(AA);toc;
Elapsed time is 0.157209 seconds.
>> tic;sin(AA);toc;
Elapsed time is *0.000419 *seconds 
```

经过两次计算，GPU 在 sin 计算中的速度非常快。

那么，为什么 GPU 在矩阵除法、fft 和类似计算中如此缓慢，而在矩阵乘法和三角函数中却如此之快？这个问题实际上不应该是这样的...... GPU 在所有这些计算中应该更快，因为 Matlab 已经为 GPU 发布了重叠函数（mldivide，fft）。

有人可以帮我解决这些问题吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T23:03:47.657

请阅读 Matlab 如何计算解。它将帮助您了解 GPU 速度较慢的原因。

我会试着用几句话说出来。

A*x=b 变成 L*(U*x=y)=b, L*U=A

1.  因此，Matlab 将 A 变为 L*U（据我所知，此过程不能完全并行完成，而是由于其性质，某些步骤可以并行完成）
2.  然后 Matlab 求解 L*y=B 并找到 y。（此过程不能并行完成，因为每个步骤都需要前一个步骤的数据）
3.  然后 Matlab 求解 U*x=y 并找到 x。（此过程不能并行完成，因为每个步骤都需要前一个步骤的数据）

所以它的 GPU 时钟比 CPU 慢，并且由于进程不能并行完成，所以 CPU 更快。不，除非你想出更好的方法（祝你好运！），否则 GPU 总是会变慢，除非在某些非常特殊的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T08:59:53.437

解释的第 1 部分在 user2230360 的答案中，但是您的问题是双重的，所以我将添加一些关于乘法的内容。

如前所述，即使某些步骤可以并行化，LU 分解也不是很容易并行化。然而，矩阵乘法是非常可并行化的。如果您正在处理这些事情，您应该能够手动进行矩阵乘法，然后您就会知道可以按照您想要的任何顺序来计算矩阵 C 中的元素 A*B=C - 因此有可能用于并行计算。这可能就是为什么您会看到如此快速的乘法，但线性系统的求解速度却很慢。一个不能“与另一个一样多”并行化。

# c# - T-Sql 存储过程必须包含支持 SqlClient 事务的脚本吗？

> ID：14905710
> 
> 赞同：2
> 
> 时间：2013-02-16T00:52:49.237
> 
> 标签：c#, tsql, ado.net

我有一个删除行的存储过程。示例代码：

```
CREATE PROCEDURE [dbo].[ap_um_delete_tems_grid]
(
    @agency char(3) 
    , @subagency char(1)
    , @grid_id int
    , @role_id int
)
AS
DELETE FROM [grid_setup]
  WHERE agency = @agency 
    AND subagency = @subagency 
    AND gs.grid_id = @grid_id 
    AND role_id = @role_id 
```

如果我直接从 Sql Mgmt Studio 执行这个 SProc，它就可以正常工作。但是，如果我尝试使用事务在 C# 代码中执行此操作，我会得到一个非常有趣的 SqlException：

> 'ap_um_delete_tems_grid' 附近的语法不正确

异常详细信息说它发生在第 1 行。C# 代码是：

```
using (SqlConnection connection = new SqlConnection(conn.TemsConnectionString))
{
    connection.Open();
    SqlCommand command = connection.CreateCommand();
    SqlTransaction transaction;

    // Start the local transaction
    transaction = connection.BeginTransaction("GridReplaceTransaction");
    command.Connection = connection;
    command.Transaction = transaction;

    try
    {
        command.CommandText = "ap_um_delete_tems_grid";

        SqlParameter parm = new SqlParameter();

        // Adding the parameters

        int cnt = command.ExecuteNonQuery();
        transaction.Commit();
    }
    catch (Exception ex)
    {
        transaction.Rollback();
    }
} 
```

上面的代码在我将其放入事务之前有效。为什么我收到语法错误？也许是因为在 SProc 中需要一些东西来支持事务？还是我搞砸了别的东西？

注意：*请不要试图告诉我我不需要单次删除的事务。以上是多步骤过程的一部分，即在删除后添加新行。谢谢。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T01:00:43.107

你错过了：

```
 command.CommandType = CommandType.StoredProcedure; 
```

否则，它使用默认的 `CommandType.Text`并视为`"ap_um_delete_tems_grid"`语句而不是存储过程的名称。

# javascript - 小书签如何处理跨源请求 - 是否需要 cors？

> ID：14905711
> 
> 赞同：1
> 
> 时间：2013-02-16T00:52:50.417
> 
> 标签：javascript, bookmarklet

我知道小书签是什么，这意味着我知道如何创建小书签并且它可以访问用户正在浏览的页面。

我不明白的是如何将信息从该页面发送到我的服务器。

当我从书签向我的服务器进行 ajax 调用时（假设这是可能的），它如何知道书签是我的，即不是跨源请求？

或者这甚至可能吗？我需要使用cors吗？

或者我可以将小书签与普通的 ajax 调用一起使用吗？

我只是想从用户所在的任何页面/域中获取一些信息，并将其发送到我的服务器进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:09:58.333

> 它怎么知道书签是我的，即不是跨源请求？

服务器不知道。浏览器不在乎。代码及其所做的一切都被视为页面的本机部分。（你可以告诉你的服务器端代码任何你想告诉它的东西，但这与这里无关。）

> 或者这甚至可能......从用户所在的任何页面/域获取一些信息，并将其发送到我的服务器？

如果您只需要发送数据，您可以通过表单使用常规的旧 POST，或者通过表单或附加脚本甚至 IMG 对象使用 GET。要使用表单发布，请创建一个 iframe，以便主页的位置在提交时不会更改。

如果您还想取回数据，可以使用 JSONP 或 AJAX + CORS（特别是 Access-Control-Allow-Origin 标头）。您甚至不必在最严格的意义上使用 JSONP。这只是传递数据的标准。您的服务器可以轻松地返回您希望执行的任何 JavaScript 代码，而不是返回使用 JSON 参数进行单个函数调用的代码。

# ios - 如何使用下一个上一个按钮转到下一个字段

> ID：14905714
> 
> 赞同：0
> 
> 时间：2013-02-16T00:52:57.067
> 
> 标签：ios, ios5, uiviewcontroller, uitextfield

我已经设置了一个包含两个字段的视图控制器。我在键盘上方实现了一个工具栏，其中包含上一个和下一个按钮。

我有一个字段列表的数组。

```
 // Setup array of listed fields
textFields = [[NSArray alloc] initWithObjects:usernameField,passwordField, nil]; 
```

工具栏

```
(id)initWithTextField:(UITextField*)textField
{
    self = [super initWithFrame:CGRectMake(0, 250, 320, 40)];
    if (self) {

        inputToolBar=[[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
        doneButton= [[UIBarButtonItem alloc]
                     initWithTitle:@"Done"
                     style:UIBarButtonItemStyleDone
                     target:self
                     action:@selector(performdone:)];
        nextButton= [[UIBarButtonItem alloc]
                     initWithTitle:@"Next"
                     style:UIBarButtonItemStyleBordered
                     target:self
                     action:@selector(nextButtonMethod:)];
        nextButton.tintColor = [UIColor blackColor];
        previousButton= [[UIBarButtonItem alloc]
                     initWithTitle:@"Previous"
                     style:UIBarButtonItemStyleBordered
                     target:self
                     action:@selector(previousButtonMethod:)];
        previousButton.tintColor = [UIColor blackColor];

        inputToolBar.barStyle=UIBarStyleDefault;
        UIBarButtonItem* flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

        [inputToolBar setItems:[NSArray arrayWithObjects:previousButton,nextButton,flexSpace,doneButton,Nil] animated:NO];
        [self addSubview:inputToolBar];
    }
    return self;
} 
```

现场调用工具栏：

```
[self.usernameField setInputAccessoryView:myInputAccessoryView]; 
```

我想知道在我的 nextButtonMethod 和 previousButtonMethod 方法中添加什么以使光标转到数组列表中的下一个字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:30:39.173

以下框架可能会对您的情况有所帮助..

[https://github.com/wzbozon/DKKeyboardView](https://github.com/wzbozon/DKKeyboardView) 或 [https://github.com/SimonBS/BSKeyboardControls](https://github.com/SimonBS/BSKeyboardControls)

很简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:37:31.897

所以我可能会推荐的一件事是设置一个视图控制器，创建一个 xib 并使用 UITextField 的内置 setInputAcessoryView。

在我制作的示例中，我使用 xib 制作了一个自定义视图控制器，并将其设置为我希望按钮的外观，然后将该视图加载到 InputAccessoryView 通过以这种方式加载它，您可以使用键盘使按钮上下动画当它辞职或成为第一响应者时。

```
-(void)createFunction{

  [myCustomTextField setDelegate:self];
  [myCustomTextField setInputView:nil]; 
  //Don't have to set this unless you have a custom view
  [myCustomTextField setInputAccessoryView:myCustomInputButtonViewController.view];

} 
```

然后我从我的 AccessoryView 视图控制器设置委托方法。这样当按钮被按下时，我可以得到输入并做出相应的响应。

```
-(void)pressedLeftActionButtonFromEXT{
NSLog(@"Pressed Left Action");
NSInteger nextTag = activeTextField.tag - 1;
// Try to find next responder
UIResponder* nextResponder = [activeTextField.superview viewWithTag:nextTag];
if (nextResponder) {
    // Found next responder, so set it.
    [nextResponder becomeFirstResponder];
  } else {
    // Not found, so remove keyboard.
    [activeTextField resignFirstResponder];
  }

} 
```

这是我制作的示例项目中的确切代码行。正如你可以想象的那样，另一个方向正好相反。

此外，我的界面中有一个 UITextField * activeTextField，这样我就可以知道我何时打开 textField 并做出相应的响应。

我希望这有帮助。如果这不是很让我知道，我会尝试更好地澄清。我知道我可以解决你遇到的这个问题。

好伦克^^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:17:39.517

```
[textFieldInstance becomeFirstResponder]; 
```

将光标放在该字段上。希望您知道如何选择正确的文本字段实例。

# cuda - 在 CUDA 中调用 __syncthreads() 函数的位置

> ID：14905720
> 
> 赞同：-1
> 
> 时间：2013-02-16T00:53:39.590
> 
> 标签：cuda, thread-synchronization

我有一些布尔变量，我的每个线程都必须使用它，所以我需要同步它们，这意味着我需要`__syncthreads()`在我的程序中调用函数，但我不知道在哪里调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:57:47.410

`__syncthreads()`function 是 `__device__`function ，因此您必须从您的`__global__ kernel`或其他一些`__device__`function 调用它，另外`__syncthreads()`是一个同步屏障原语，仅同步同一块中的线程。

# ruby-on-rails - 设计验证错误

> ID：14905722
> 
> 赞同：0
> 
> 时间：2013-02-16T00:53:45.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, devise-confirmable

我正在尝试手动创建一个设计用户。问题是验证似乎只在我调用`User.create`.

当我调用`User.new`时，生成的用户实例无效。不幸的是，我无法确定原因。

生成的错误消息只是“验证失败：”。

知道发生了什么吗？

我宁愿不使用`User.create`，因为我想`#skip_confirmation!`在保存之前打电话，这样就没有电子邮件出去了。

任何想法如何调试这个？我试过遍历堆栈跟踪，但没有运气。

```
if user = User.create(params[:user])
  user.skip_confirmation!
  user.save!
  flash[:success] = "New user #{user.email} created."
  redirect_to user_root_path
else
  flash[:alert] = user.errors
  redirect_to user_root_path
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T00:24:26.837

更改条件，因为该值将始终回答为真。正如dwhalen所说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:15:22.657

尝试将密码添加到参数数组。

`params[:user][:password] = Devise.friendly_token[0,20]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T23:35:08.500

我无法解释为什么会这样，但似乎在调用`user.confirm!`之前调用`user.skip_confirmation!`解决了这个问题。

# c - 如何在c中使用双指针访问数组元素

> ID：14905726
> 
> 赞同：2
> 
> 时间：2013-02-16T00:53:57.053
> 
> 标签：c, matrix

它在屏幕上显示最后 2 个数字和其他 2 个奇怪的数字。如何打印所有元素？我试图将双指针**傻瓜的开头保留在另一个指针**st中。但它似乎不起作用。

```
#include<stdio.h>
#include<stdlib.h>

typedef struct a {
    int x;

}A_t;

typedef struct b {

    A_t **y;

}B_t;

int main() {

    int i, j;

    A_t **fool, **st;

    fool = (A_t**)malloc(2 * sizeof(A_t*));
    st = fool;

    for(i = 0; i < 2; i++) {

        fool[i] = (A_t*)malloc(2 * sizeof(A_t));

        for(j = 0; j < 2; j++) {
            printf("NR: ");
            scanf("%d", &(*fool)[j].x);
        }

    }

    fool = st;
    for(i = 0; i < 2; i++) {
        for(j = 0; j < 2; j++) {
            printf("%d ", (*fool + i)[j].x);
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:58:46.803

这是因为您没有读入`fool`. `scanf("%d", &(*fool)[j].x);`dereferences `fool`，您可以建模为`fool[0]`，然后访问第 j 个元素（所以`fool[0][j]`。当然，因为您从不更改第一个索引，所以读取的最后两个值将占据`fool[0][0]`和`fool[0][1]`。然后您将获得其他两个的随机值简单因为读取一个未初始化的变量是一个未定义的操作。实际上，您倾向于在应用程序之前获取驻留在该内存区域中的任何内容。

相反，您可以使用您在`printf`（例如`scanf("%d", &(*fool+i)[j].x)`）中使用的语法，或者，正如我在上面键入此内容时 KerrekSB 刚刚在上面发布的那样，使用标准的数组访问操作来代替。

详细说明，`fool[i][j]`相当于`(*fool+i)[j]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:57:17.763

它应该`&fool[i][j].x`在`scanf`和`fool[i][j].x`中`printf`。

# c# - 在打开最大化窗口visualbasic或c#时禁用航空动画

> ID：14905729
> 
> 赞同：1
> 
> 时间：2013-02-16T00:54:32.307
> 
> 标签：c#, winapi, aero

我想达到和谷歌浏览器一样的效果。（当谷歌浏览器设置为最大化时，打开时会关闭aero动画）。有没有办法在 Visual Basic/C# 中做到这一点？如果不是，这是windows api的哪一部分？

# ios - 如何在单独的线程中运行整个对象（DAO.h 和 .m）

> ID：14905736
> 
> 赞同：0
> 
> 时间：2013-02-16T00:55:13.507
> 
> 标签：ios, objective-c, grand-central-dispatch

有没有办法使用 GCD 在单独的线程中运行整个对象？或者换一种说法，我如何在它自己的线程中运行 DAO.m？有一些长时间运行的操作与它们运行的​​对象密切相关。详细信息：我们有一个 sqlite3 数据库，其中包含几个长时间运行的操作，这些操作目前阻止应用程序在设备（iPad 2）上运行，但它们在模拟器中工作-但阻塞主线程。优化 SQL 并不足以提高性能。我们从网上下载文件，处理文件并将结果存入数据库。我们已经异步下载了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:44:07.310

我不确定我的意图是否正确，但这是一个想法 - 您可以子类化`NSProxy`以包装您的 DAO 实例并将任何调用转发到它自己的串行队列。像这样的东西（注意，未经测试/编译）：

```
@interface DAOProxy : NSProxy

- (DAO *)initWithDAO:(DAO *)dao;

@end

@implementation DAOProxy {
    dispatch_queue_t _daoQueue;
    DAO *dao;
}

- (DAO *)initWithDAO:(DAO *)dao {
    // no call to [super init] - we are subclassing NSProxy
    _dao = dao;
    _daoQueue = dispatch_queue_create("com.example.MyDaoQueue", DISPATCH_QUEUE_SERIAL);
    return (DAO *)self;
}

- (BOOL)respondsToSelector:(SEL)aSelector {
    return [_dao respondsToSelector:aSelector];
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {
    return [_dao methodSignatureForSelector:aSelector];
}

- (void)forwardInvocation:(NSInvocation *)anInvocation {
    dispatch_async(_daoQueue, ^{
        [anInvocation setTarget:_dao];
        [anInvocation invoke];
    });
}

@end 
```

和用法：

```
DAO *realDao = ...;
DAO *proxiedDao = [[DAOProxy alloc] initWithDAO:realDao];
// use proxiedDao as you would use the real one from there 
```

如果您想获得 DAO 方法的返回结果，则需要一些额外的技巧，例如在结果准备好时传递回调块以在调用者线程中执行它们......嗯，这是您遇到的异步问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:59:31.727

这就是我最终做的。多亏了一位同事和[NSURLConnection 和盛大的中央调度](https://stackoverflow.com/questions/5037545/nsurlconnection-and-grand-central-dispatch)。

我并不真的需要将 URL 连接放在块中，但我需要异步处理响应。

```
[AsyncURLConnection request:pathToProducts  url:getProductsURL completeBlock:^(NSData *data) {

    /* success! */

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        dAO = [DAO getInstance]; 
    /* do processing here */

dispatch_async(dispatch_get_main_queue(), ^{

            /* update UI on Main Thread */

        });
    });

} errorBlock:^(NSError *error) {

    NSLog(@"Well that sucked!");
}]; 
```

# php - 如何更改从另一个网站解析的某些单词？

> ID：14905746
> 
> 赞同：0
> 
> 时间：2013-02-16T00:56:51.287
> 
> 标签：php, html, css

如何更改从另一个网站解析的某些单词？

我使用以下 PHP 代码解析了来自第三方网站的文本：

```
<?php
 include_once 'externalcode/simple_html_dom.php';
set_time_limit(10);
/* update your path accordingly */
$url  ='http://maltadiocese.org/lang/en/parishes/attard/';
$html = file_get_html($url) or die ('Information about this Parish is currently unavailable');
foreach($html->find('span[lang=en]') as $webLink){
    echo $webLink->plaintext.'<br>';
    echo $webLink->href.'<br>';
} 
foreach($html->find('div[id=textwidget]') as $Link2){
    echo $webLink2->plaintext.'<div style="display:none";>';    
}    
?> 
```

我成功地解析了文本。现在我想更改解析文本中某些特定单词的样式，即假设教区教堂，它在我的网站上被解析为纯文本。我想让它变得粗体、红色并带有下划线。

我遵循了本[教程](https://stackoverflow.com/questions/14648709/how-to-change-the-text-parsed-from-php-simple-html-dom-parser)，但它对我不起作用。

我的意图是解析文本并将其更改为遵守 CSS 规则。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:04:30.503

您可以在 CSS 上定义自定义类以提供所需的效果（我们称之为 HTML 类`foo`）。然后，在代码中，您将执行以下操作：

```
<?php
$textToFind = 'Parish Church of the Assumption';
$replace    = '<span class="foo">' . $textToFind . '</span>';
str_replace($textToFind, $replace, $parsedText); 
```

然后，在 css 样式表上，您将执行以下操作：

```
.foo {
    text-decoration: underline;
    color: red;
    font-weight: bold;
} 
```

**编辑：**完整代码的示例。

```
<html>
    <head>
        <style>
            .foo {
                text-decoration: underline;
                color: red;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
    <?php
    $parsedText = fetch_text();
    $textToFind = 'Parish Church of the Assumption';
    $replace    = '<span class="foo">' . $textToFind . '</span>';
    echo str_replace($textToFind, $replace, $parsedText);
?>
    </body>
</html> 
```

# xcode - 在 XCode 4.6 中重新符号化

> ID：14905751
> 
> 赞同：1
> 
> 时间：2013-02-16T00:57:29.097
> 
> 标签：xcode, xcode4.6, symbolicate

我最近更新到 XCode 4.6，但在重新符号化崩溃日志时遇到了问题。我以前能够为同一个项目做到这一点。我通常通过将文件拖到管理器 -> 设备 -> 设备日志来做到这一点。

我的项目的大部分代码都在链接到主项目的库中，并且源代码是工作区的一部分。

我检查了另一个项目，它也发生了，所以它似乎与 XCode 4.6 有关。

我想知道这是否也发生在社区中的其他人身上。如果我发现了什么，我会继续深入研究并更新这篇文章。

谢谢！

# php - 优化周一时段 1-9 的表结构

> ID：14905752
> 
> 赞同：0
> 
> 时间：2013-02-16T00:57:30.437
> 
> 标签：php, mysql

优化下表的最佳方法是什么？

```
// Monday period 1

echo '
<td class="gridSide">Mon</td>
<td class="box" id="grid2_mon1">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 1
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 2

echo '
<td class="box" id="grid2_mon2">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 2
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 3

echo '
<td class="box" id="grid2_mon3">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 3
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 4

echo 
'<td class="box" id="grid2_mon4">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 4
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 5

echo '
<td class="box" id="grid2_mon5">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 5
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 6

echo '
<td class="box" id="grid2_mon6">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 6
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 7

echo '
<td class="box" id="grid2_mon7">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 7
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 8

echo '
<td class="box" id="grid2_mon8">'; 
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 2
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';

// Monday period 9

echo '
<td class="box" id="grid2_mon9">';
$sql = "
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 2
    WHERE 
      ts_room.id = ts_roompref.room_id)
";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':room_id' => $room) );
$rows = $stm->fetchColumn();
echo $rows.'<br>free';
echo '</td>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:22:37.260

主要需要是索引用于选择行的列 - 在 ON 和 WHERE 子句中。在使用多个列时使用复合索引，通常将最低基数列放在首位。

通常可以通过将 SELECT 子句中的列放入索引中来获得额外的性能提升，从而允许 MySQL 从索引中读取它需要的所有内容，而无需从磁盘读取基础记录。

哦，每当您重复相同的查询时，请考虑重构某些内容。

# javascript - 在 JavaScript 中实现 Luhn 算法

> ID：14905766
> 
> 赞同：2
> 
> 时间：2013-02-16T00:59:30.043
> 
> 标签：javascript, luhn

我正在尝试将我在 C# 中的 Luhm 算法实现移植到 JavaScript。我把它移植过来了，我认为它可以工作，但我无法获得合法的卡来验证。我的 AMEX 验证很好，但我的两个 VISA 拒绝这样做。这是代码：

```
luhn = function (number) {
    var _deltas = [0, 1, 2, 3, 4, -4, -3, -2, -1, 0],
        _checksum = 0,
        _digits = [],
        i,
        j;

    while (number != 0) {
        _digits.push(parseInt((number % 10), 10));

        number = parseInt((number / 10), 10);
    }

    for (i = (_digits.length - 1), j = _digits.length; i > -1; i--) {
        _digit = _digits[i];
        _checksum += _digit;
        _checksum += ((((i - j) % 2) === 0) ? _deltas[_digit] : 0);
    }

    return ((_checksum % 10) === 0);
}; 
```

有人可以为我指出错误的正确方向吗？我认为这在 C# 版本中运行良好，但现在我有疑问......提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-11T07:14:04.497

```
 <script>
      // takes the form field value and returns true on valid number
    function valid_credit_card(value) {
      // accept only digits, dashes or spaces
        if (/[^0-9-\s]+/.test(value)) return false;

        // The Luhn Algorithm. It's so pretty.
        var nCheck = 0, nDigit = 0, bEven = false;
        value = value.replace(/\D/g, "");

        for (var n = value.length - 1; n >= 0; n--) {
            var cDigit = value.charAt(n),
                  nDigit = parseInt(cDigit, 10);

            if (bEven) {
                if ((nDigit *= 2) > 9) nDigit -= 9;
            }

            nCheck += nDigit;
            bEven = !bEven;
        }

        return (nCheck % 10) == 0;
    }

    console.log(valid_credit_card("5610591081018250"),"valid_credit_card Validation");
  </script> 
```

最佳解决方案在这里

*   [http://plnkr.co/edit/34aR8NUpaKRCYpgnfUbK?p=preview](http://plnkr.co/edit/34aR8NUpaKRCYpgnfUbK?p=preview)

根据所有测试用例通过

*   [http://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/credit_card_numbers.htm](http://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/credit_card_numbers.htm)

功劳归于

*   [https://gist.github.com/DiegoSalazar/4075533](https://gist.github.com/DiegoSalazar/4075533)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T05:25:04.800

此解决方案接受一个数组作为参数。如果它的有效返回真，如果它的无效返回假。

```
function validateCred(arr) {
    let sumArray = [];
    let numHolder = null;
    let everySecondNumber = 1;
    for (let i = arr.length - 1; i >= 0; i--) {
        if (everySecondNumber % 2 === 0) {
                numHolder = arr[i] * 2;
            if (numHolder > 9) {
                numHolder -= 9;
            }
        } else {
            numHolder = arr[i];
        }
        sumArray.push(numHolder);
        everySecondNumber++;
    }
    totalSum = sumArray.reduce((acc,val) => acc + val, 0);
    if (totalSum % 10 == 0) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-04T05:18:54.193

对于其他人来说，以下是我提交的测试解决方案:)

```
function validateCard(num){
    var oddSum = 0;
    var evenSum = 0;
    var numToString = num.toString().split("");
    for(var i = 0; i < numToString.length; i++){
      if(i % 2 === 0){
        if(numToString[i] * 2 >= 10){
          evenSum += ((numToString[i] * 2) - 9 );
        } else {
          evenSum += numToString[i] * 2;
        }
      } else {
        oddSum += parseInt(numToString[i]);
      }
    }
    return (oddSum + evenSum) % 10 === 0;
  }
console.log(validateCard(41111111111111111));
```

希望这可以帮助。米奇 - 来自[https://spangle.com.au](https://spangle.com.au)

# visual-studio-2010 - 一次单步执行一个语句

> ID：14905769
> 
> 赞同：2
> 
> 时间：2013-02-16T01:00:17.227
> 
> 标签：visual-studio-2010, assembly

在 Visual Studio 2010 中，是否可以一次通过一个语句单步执行汇编语言程序，以便查看程序每一行中每个变量的状态？我听说可以做到这一点，但我还没有在任何地方找到相关信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T01:06:09.033

是的，您只需像使用 C/C++ 代码一样使用调试器，但在显示反汇编的视图中。如果没有可用的源，则为默认值。否则，您需要在上下文菜单中选择“Go To Disassembly”。

如果您想正确检查变量，您将需要调试信息，当然即使没有这些信息，您也可以查看寄存器、内存等。

# html - 右浮动 div 被不同行上的另一个 div 阻止

> ID：14905775
> 
> 赞同：-1
> 
> 时间：2013-02-16T01:01:28.587
> 
> 标签：html, css, web

![问题](../Images/ba6d4c94a953aa4984841946dd851be2.png)

我目前无法将文本框浮动到其父 div 的最右侧。我相信问题出在前一行的一个元素上。我知道我可以通过浮动 2 列来实现此功能，一列在左侧，一列在右侧 - 与将每个文本元素向左浮动和每个输入向右浮动相反。只需在“重置密码”按钮下方插入另一行即可，但我不喜欢这种解决方案。出于好奇，是否有另一种解决方案可以让员工复选框正确浮动到右侧？也许 CSS 中有一种方法可以让员工文本框忽略“重置密码”框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:12:36.977

你需要的是`clear:both;`.

首先让**Reset Password**向右浮动，然后让**Permission Level**向左浮动，但是给它一个`clear:both;`以便它可以浮动在新行上并忽略**Reset Password**，然后当您向右浮动**Employee**时，它​​将以您喜欢的方式浮动。

[**演示**](http://jsfiddle.net/Nt5hG/)

# android - 如何从 android raw 文件夹中读取大于 5mb 的文本文件？

> ID：14905776
> 
> 赞同：0
> 
> 时间：2013-02-16T01:01:33.530
> 
> 标签：android, file, text, dictionary

我正在创建一个 5mb 左右的字典文本文件的 android 应用棋盘游戏，如何从 raw 或 assets 文件夹中读取该文件？

每当我尝试搜索字典时，我都会收到 NullPointerException。

任何有关阅读和拆分大型字典文件的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T06:13:21.347

```
Are You Running your App in Android Version below 2.2..
if yes then there is a limitation of 1MB max in Assets 
or Raw Folder..but in later version there is no restriction 
like this..so if you are able to run your code in later version
then that might be the ISSUE..i it does'nt show Nullpointer 
Exception ,It show Unable To compress large Data..kind of 
Exception... if this is the your can simply resolve this by
changing it to already Compress Format..these are Some Alredy 
Compressed Formet DVM Does'nt compress these formet..and you 
can use it,if it is Greater than !MB.. 
```

> ```
> static const char* kNoCompressExt[] = {
> ".jpg", ".jpeg", ".png", ".gif",
> ".wav", ".mp2", ".mp3", ".ogg", ".aac",
> ".mpg", ".mpeg", ".mid", ".midi", ".smf", ".jet",
> ".rtttl", ".imy", ".xmf", ".mp4", ".m4a",
> ".m4v", ".3gp", ".3gpp", ".3g2", ".3gpp2",
> ".amr", ".awb", ".wma", ".wmv" 
> ```
> 
> }; 所以只需将文件扩展名 .txt 更改为 .jet.. 已解决..:-)

# jquery - jquery垂直鼠标滚轮平滑滚动

> ID：14905779
> 
> 赞同：30
> 
> 时间：2013-02-16T01:02:00.047
> 
> 标签：jquery, mousewheel, smooth-scrolling, parallax.js

我正在制作一个视差网站，我想用鼠标滚轮使页面滚动更流畅，以获得更好的用户体验。我能得到的最好的例子是这个网站： http: [//www.milwaukeepolicenews.com/#menu=home-page](http://www.milwaukeepolicenews.com/#menu=home-page) 如果我能在我的网站中得到类似的东西，平滑的垂直滚动和滚动惯性，那就太好了。

我注意到他们正在使用 Brandon Aaron 的 jQuery 鼠标滚轮，它非常轻巧，但我只是一个初学者，不能自己让它工作。

我也在他们的 mpd-parallax.js 中注意到了这一点：

```
jQuery(window).mousewheel(function(event, delta, deltaX, deltaY){
        if(delta < 0) page.scrollTop(page.scrollTop() + 65);
        else if(delta > 0) page.scrollTop(page.scrollTop() - 65);
        return false;
    }) 
```

谢谢！

**编辑**

我快到了。看看这个小提琴： http: [//jsfiddle.net/gmelcul/cZuym/](http://jsfiddle.net/gmelcul/cZuym/)它只需要添加一个缓动方法来滚动，就像密尔沃基警察网站一样。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-03-03T14:46:16.267

我知道这是一个非常古老的帖子，但这是我提出的一个很好的解决方案：

```
function handle(delta) {
    var animationInterval = 20; //lower is faster
  var scrollSpeed = 20; //lower is faster

    if (end == null) {
    end = $(window).scrollTop();
  }
  end -= 20 * delta;
  goUp = delta > 0;

  if (interval == null) {
    interval = setInterval(function () {
      var scrollTop = $(window).scrollTop();
      var step = Math.round((end - scrollTop) / scrollSpeed);
      if (scrollTop <= 0 || 
          scrollTop >= $(window).prop("scrollHeight") - $(window).height() ||
          goUp && step > -1 || 
          !goUp && step < 1 ) {
        clearInterval(interval);
        interval = null;
        end = null;
      }
      $(window).scrollTop(scrollTop + step );
    }, animationInterval);
  }
} 
```

测试它：http: [//jsfiddle.net/y4swj2ts/3/](http://jsfiddle.net/y4swj2ts/3/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-16T01:25:48.227

这里有两个 jsfiddles - 一个有脚本，一个没有它，所以你可以比较：

*   [带脚本](http://jsfiddle.net/47cDN/)
*   [没有脚本](http://jsfiddle.net/2XJR9/)

JavaScript 使用[jQuery 鼠标滚轮插件](https://github.com/brandonaaron/jquery-mousewheel)：

```
$(document).ready(function() {
    var page = $('#content');  // set to the main content of the page   
    $(window).mousewheel(function(event, delta, deltaX, deltaY){
        if (delta < 0) page.scrollTop(page.scrollTop() + 65);
        else if (delta > 0) page.scrollTop(page.scrollTop() - 65);
        return false;
    })
}); 
```

比较两者。据我所知，脚本减慢了鼠标滚轮的速度，因此它需要更多的物理转动才能滚动与没有脚本相同的距离。由于滚动速度较慢，它可能会感觉更平滑（并且它可能确实更平滑，因为它可能在图形单元上更容易）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-22T12:57:56.933

[嘿，我在这里得到了另一个资源，使用Smoothwheel](https://github.com/fatlinesofcode/jquery.smoothwheel)非常简单

它可以在每个设备上的鼠标滚轮上实现流畅的滚动动画，并且可以完美运行！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-29T19:16:02.590

查看[skrollr](http://prinzhorn.github.io/skrollr/)。这是一个创建视差效果的插件。当您初始化插件以切换平滑滚动时，它具有选项：

```
var s = skrollr.init({
    smoothScrolling: true,
    smoothScrollingDuration: 1800
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-31T09:00:33.693

我找到了这个插件，它有一些不错的选择，适用于所有主要设备[http://areaaperta.com/nicescroll/](http://areaaperta.com/nicescroll/)

# css - 如何修改 twitter 引导程序“.icon-bar”颜色

> ID：14905781
> 
> 赞同：1
> 
> 时间：2013-02-16T01:02:17.863
> 
> 标签：css, twitter-bootstrap, sass, less

当视口很窄时，在引导程序中会出现一个按钮......使用引导响应......

如何更改此按钮的颜色外观？我知道 bootswatch.com 上的人们可以通过在 less 中更改一些变量来做到这一点，但他们是如何做到的？

编辑：我使用以下 SASS 代码取得了一些进展。（我使用 sass-bootstrap gem）

```
.navbar .btn-navbar {
  background-color: $navbarLinkBackgroundHover;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;

          &:hover {
            background-color: lighten($navbarLinkBackgroundHover, 1%);
          }
} 
```

上面改变了我的按钮的背景和按钮的圆度..我仍然不知道如何改变边框笔触？有任何想法吗？

```
.navbar .btn-navbar .icon-bar {
  background-color: $heading-blue;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
} 
```

现在这段代码可以帮助我改变按钮内水平破折号的颜色！

编辑2：

弄清楚了边框中风..它在css中称为边框颜色和边框宽度！（适用于 .navbar .btn-navbar）

```
 border-color: $dropdown-border $dropdown-border darken($dropdown-border, 10%) $dropdown-border;
  border-width: 2px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:19:19.397

```
.navbar .btn-navbar {
display: none;
float: right;
padding: 7px 10px;
margin-left: 5px;
margin-right: 5px;
color: #ffffff;
text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
background-color: #ededed;
background-image: -moz-linear-gradient(top, #f2f2f2, #e5e5e5);
background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#f2f2f2), to(#e5e5e5));
background-image: -webkit-linear-gradient(top, #f2f2f2, #e5e5e5);
background-image: -o-linear-gradient(top, #f2f2f2, #e5e5e5);
background-image: linear-gradient(to bottom, #f2f2f2, #e5e5e5);
background-repeat: repeat-x;
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff2f2f2', endColorstr='#ffe5e5e5', GradientType=0);
border-color: #e5e5e5 #e5e5e5 #bfbfbf;
border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
*background-color: #e5e5e5;
/* Darken IE7 buttons by default so they stand out more given they won't have borders */ 
```

这是带有属性的 CSS 选择器。您可以创建一个新的 CSS 规则来覆盖这些值，而无需更改 less 变量。

如果您想知道 less 变量是如何工作的，它们会根据变量值创建渐变。例如，

```
box-shadow: 0 1px 0 rgba(0, 0, 0, 0.25); 
```

从比黑色亮 75% 的颜色创建一个盒子阴影。变量 0, 0, 0 被传递给 box-shadow 属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-29T05:45:18.047

为什么不简单地用`style = "background-color:#hex;"`. 如果你有用

# websocket - 是否有任何实时推送器类型的服务使用纯 websocket 作为服务器后端？

> ID：14905783
> 
> 赞同：11
> 
> 时间：2013-02-16T01:02:25.790
> 
> 标签：websocket, socket.io, smalltalk, pharo, pusher

我有兴趣使用 Pharo Smalltalk 作为服务器后端和 amber smalltalk + 一个用于 Web 客户端前端的 html5 游戏库开发多人游戏。

Pharo smalltalk 支持 websocket，我已经尝试用它制作游戏。它运行良好，但是我宁愿使用这些推送服务之一，以便我可以轻松扩展到许多用户。

我需要的是（我认为）是一个到这些推送服务之一的 websocket 接口（来自我的后端服务器）。我会使用firebase REST api，但似乎有点奇怪，我必须恢复从我的服务器到firebase服务器的不断轮询，而不是简单地通过websocket订阅他们的服务并在没有轮询的情况下获取更新。

我注意到其中许多服务都有 socket.io 实现，因此您可以通过 socket.io 将后端服务器连接到它们。不幸的是，pharo smalltalk 没有实现 socket.io，也没有我所知道的使用它的方法。

如果我找不到继续在服务器后端使用这些推送服务之一的 pharo smalltalk 的解决方案，我将研究另一种可能性，即负载平衡我的 pharo smalltalk 图像和后端服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T07:58:34.237

AFAIK，您不需要在 pharo 中使用诸如 socket.io 库之类的东西，因为 pharo 中的线程是非阻塞的。这已经在这里讨论过：http: [//forum.world.st/socket-io-td3891592.html#a3893031](http://forum.world.st/socket-io-td3891592.html#a3893031) 这个想法是您可以使用 websockets 和常规 pharo 来完成相同的任务。

（如果你想要一个抽象层，那么不，没有什么已经准备好的，但你可以轻松地自己做）

# php - 使用 Doctrine 将持久对象添加到另一个对象

> ID：14905785
> 
> 赞同：0
> 
> 时间：2013-02-16T01:02:52.363
> 
> 标签：php, orm, doctrine, associations, persist

我猜我只是还没有完全理解 Doctrine，但这就是我正在做的事情：

我有一个创建帐户表单，用户在其中输入典型的东西（用户、密码、电子邮件），我正在获取数据并首先创建一个电子邮件对象并将其保存到我的数据库中：

```
//  Create a new email object.
$email = new Entities\EmailAddress();
$email->setEmailAddress($emailAddress);

//  Persist the new email object.
$this->doctrine->em->persist($email); 
```

然后我正在创建一个用户对象并将其持久化到数据库中：

```
//  Create a new user object.
$user = new Entities\User();
$user->setUsername($username);
$user->setPassword($password);
$user->setSecurityLevel(0);
$user->getEmailAddresses()->add($email);

//  Persist the new user object.
$this->doctrine->em->persist($user); 
```

麻烦`$user->getEmailAddresses()->add($email);`从这条线开始（我试图效仿一个例子，但我担心我离正确地做这件事还差得很远）。

`User.php`电子邮件在我的文件中是这样定义的：

```
/**
 * @ORM\OneToMany(targetEntity="EmailAddress", mappedBy="user")
 */
private $emails; 
```

如何将最近保存的电子邮件对象添加到我的班级的一对多关系`$emails`变量并将用户保存到数据库？`User.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:11:27.807

你很接近，但忘记了：

> $user->getEmailAddresses()->add($email);

并将其替换为

```
$user->addEmails($email); 
```

或者

```
$user->setEmails($email); 
```

取决于映射

# php - 警告：mysql_fetch_assoc()：提供的参数不是 PHP 中有效的 MySQL 结果资源？

> ID：14905786
> 
> 赞同：-4
> 
> 时间：2013-02-16T01:02:53.047
> 
> 标签：php, mysql

我保证，这将是今天的最后一个问题。但我收到错误“警告：mysql_fetch_assoc()：提供的参数不是第 58 行 /home/a1014025/public_html/practice/cart/cart.php 中的有效 MySQL 结果资源”，代码如下：

```
<?php
include('connect.php');
session_start();
?>
<html>
<head>
    <title>Cart</title>
    <link rel='stylesheet' href='css/main.css' />
</head>
<body>
    <?php
    $page = 'index.php';

    if(isset($_GET['add'])){
        $add_id = $_GET['add'];
        $quantity = mysql_query("SELECT id, quantity FROM products WHERE id='$add_id'");
        while($quantity_row = mysql_fetch_assoc($quantity)){
            if($quantity_row['quantity'] !=@$_SESSION['cart_'.$add_id]){
                @$_SESSION['cart_'.$_GET['add']]+='1';
                header('Location: index.php');
            }
            else{
                header('Location: index.php?err=max');
            }
        }

    }

    if(isset($_GET['remove'])){
        $_SESSION['cart_'.(int)$_GET['remove']]--;
        header("Location: index.php");
    }

    if(isset($_GET['delete'])){
        $_SESSION['cart_'.(int)$_GET['delete']]='0';
        header('Location: index.php');
    }

    function products(){
        $get = mysql_query("SELECT id, name, description, price FROM products WHERE quantity > 0 ORDER BY id DESC");
        if(mysql_num_rows($get) == 0){
            echo "There are no products to display.";
        }
        else{
            while($get_row = mysql_fetch_assoc($get)){
                echo '<p>'.$get_row['name'].'<br />'.$get_row['description'].'<br />$'.$get_row['price'].' <a href="cart.php?add='.$get_row['id'].'">Add</a></p>';
            }
        }
    }

    function paypal_items(){
        $num = 0;
        foreach($_SESSION as $name => $value){
            if($value!=0){
                if(substr($name, 0, 5) == 'cart_'){
                    $id = substr($name, 5, strlen($name)-5);
                    $get = mysql_query("SELECT id, name, price, shipping, shipping2 FROM products WHERE id=".$id);
                    while($get_row = mysql_fetch_assoc($get)){
                        $num++;
                        echo '<input type="hidden" name="item_number_'.$num.'" value="'.$id.'">';
                        echo '<input type="hidden" name="item_name_'.$num.'" value="'.$get_row['name'].'">';
                        echo '<input type="hidden" name="amount_'.$num.'" value="'.$get_row['price'].'">';
                        echo '<input type="hidden" name="shipping_'.$num.'" value="'.$get_row['shipping'].'">';
                        echo '<input type="hidden" name="shipping2_'.$num.'" value="'.$get_row['shipping2'].'">';
                        echo '<input type="hidden" name="quantity_'.$num.'" value="'.$value.'">';

                    }
                }
            }
        }
    }

    function cart(){
        $total = 0;
        foreach($_SESSION as $name => $value){
            if($value>0){
                if(substr($name, 0, 5)=='cart_'){
                    $id = substr($name, 5, strlen($name)-5);
                    $get = mysql_query("SELECT id, name, price FROM products WHERE id='$id'");
                    while($get_row = mysql_fetch_assoc($get)){
                        $sub = $get_row['price']*$value;
                        echo $get_row['name'].' x '.$value.' @ $'.number_format($get_row['price'], 2).' = $'.$sub.' <a href="cart.php?add='.$id.'">[+]</a> <a href="cart.php?remove='.$id.'">[-]</a> <a href="cart.php?delete='.$id.'">[Delete]</a><br />';
                    }
                }
                $total += $sub; 
            }
        }
        if($total==0){
            echo "You cart is empty.";
        }
        else{
            echo "<p>Checkout with PayPal for your $".$total." total.</p>";
            ?>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
            <input type="hidden" name="cmd" value="_cart">
            <input type="hidden" name="upload" value="1">
            <input type="hidden" name="business" value="ddromano@comcast.net">
            <?php paypal_items(); ?>
            <input type="hidden" name="currency_code" value="USD">
            <input type="hidden" name="amount" value="<?php echo $total; ?>">
            <input type="image" src="http://www.paypal.com/en_US/i/btn/x-click-but03.gif" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
            </form>
            <?php

        }
    }

    ?>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:25:50.503

请停止抑制脚本中的错误。

```
@$_SESSION['cart_'.$_GET['add']]+='1'; 
```

启用错误报告可以让您更好地了解脚本中的问题所在。

该代码中的第 58 行指向：

```
57  $get = mysql_query("SELECT id, name, price, shipping, shipping2 FROM products WHERE id=".$id);
58  while($get_row = mysql_fetch_assoc($get)){
    ... 
```

由于您在`mysql_`函数中使用资源，因此连接很可能超出范围。您必须将连接传递给函数或全球化连接。

```
function paypal_items($conn){ 
```

或者

```
function paypal_items(){
    global $conn; 
```

我在您[之前的问题](https://stackoverflow.com/questions/14904616/undefined-index-in-php-code)中提到过，您似乎忽略了它；您的脚本容易受到 SQL 注入的攻击。我***强烈***敦促您了解这是什么，修复它并移至`mysqli_`or `PDO`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T01:14:37.933

看起来您在第 57 行的 SQL 中有错误 - 您的 id 值应该用引号引起来：

```
$get = mysql_query("SELECT id, name, price, shipping, shipping2 FROM products WHERE id='".$id."'"); 
```

您可以使用 php 自动报告此问题`or`：

```
$get = mysql_query(...) or die(mysql_error()); 
```

顺便说一句，您确实应该在提交查询之前对其进行清理。每当您将变量传递到 SQL 语句中时，请使用它`mysql_real_escape_string`来防止 SQL 注入。

# c - 如何在C中显示数组

> ID：14905787
> 
> 赞同：0
> 
> 时间：2013-02-16T01:02:56.463
> 
> 标签：c, arrays, printf

```
#include<stdio.h>

int main()
{
int input = 0;
int binaryNumber = 0;
int decimalNumber = 0;
int remainder = 0;
int i = 1;
int wholeNumber = 0;\
int number = 0;
char hexLetters[] = "ABCDEF";

printf("Press 1 to convert Binary to Hex\n");
printf("Press 2 to convert Hex to Binary\n");
printf("Press 3 to convert Decimal to 2's to Compliment Binary\n");
scanf("%d",&input);
printf("\n");

switch (input)
{
    case 1:
    {

    printf("Enter a Binary number\n");
    scanf("%d",&binaryNumber);

    char binaryToHex[2];
    while(binaryNumber != 0)
    {
        remainder = binaryNumber%10;
        decimalNumber = decimalNumber + (remainder*i);
        i = i*2;
        binaryNumber = binaryNumber/10;
    }
    while(decimalNumber != 0)
    {
    remainder = decimalNumber%16;
    wholeNumber = (decimalNumber%16)-(remainder/16);

    decimalNumber = 0;
    }

    int j = 1;
    for(j=1;j<16;j++){
        if(remainder ==j){
            binaryToHex[1] = hexLetters[j-10];
        }
        else{
            binaryToHex[1] = remainder;
        }
    }

    int k = 1;
    for(k=1;k<16;k++){
        if(wholeNumber == k){
            binaryToHex[0] = hexLetters[k-10];
        }
        else{
            binaryToHex[0] = wholeNumber;
        }
    }

    printf("%c%c\n", binaryToHex[0], binaryToHex[1]); 
```

请帮助什么都不会显示，经过一些修补后只有 F 会显示这是
错误的。我已经检查以确保余数和整数都在工作并且它确实得到了正确的数字但是当我尝试将一个字母存储到 binaryToHex 时它总是 F 或者它什么都没有。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:11:48.073

最大的问题可能在这一行：

```
binaryToHex[1] = remainder; 
```

和类似的`binaryToHex[0]`声明。这应该是一个角色（当它是 AF 时）。相反，在这里，您正在分配一个数字。这将导致打印与该数字相对应的 ASCII 字符，对于 0-9，该字符在不可打印值 (NUL-TAB) 的范围内。

ASCII 整数从 48 开始表示“0”。因此，一种解决方法是在形成最终输出时向`remainder`and`wholeNumber`变量添加 48（或删除所有“幻数”，“0”），例如

```
binaryToHex[1] = remainder + '0'; 
```

另一个问题（我刚刚意识到）是你的循环。

```
for(k=1;k<16;k++){
    if(wholeNumber == k){
        binaryToHex[0] = hexLetters[k-10];
    }
    else{
        binaryToHex[0] = wholeNumber;
    }
} 
```

因此，请快速考虑一下。对于 1-16，如果数字匹配，则为其分配一个十六进制字母，否则，分配数字。这在逻辑上是错误的。假设我们有 5 的值，`k`将增加到 5，这将导致第一个子句成功。这将分配`hexLetters[5-10]`给`binaryToHex[0]`，这实际上可能导致访问冲突。然后，`k`将继续增加到16，这将导致`else`子句继续执行，覆盖我们刚刚得到的值。

要修复，`break`当你找到正确的数字时，稍微调整一下你的逻辑，例如：

```
for(k=1;k<16;k++){
    if(wholeNumber == k){
        if(k < 10)
            binaryToHex[0] = k + '0';
        else
            binaryToHex[0] = hexLetters[k-10];

        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:03:07.543

你确定你的逻辑是对的？我尝试输入 10 来跟踪它，但无济于事。我认为这段代码有很多问题。

无论如何你的问题

此语句：binaryToHex[1] = 余数；

或此语句： binaryToHex[0] = wholeNumber;

将 int 分配给 binaryToHex[0]；

所以当你使用 printf("%c", binaryToHex[1]);

您可以将 printf 更改为 printf("%i", binaryToHex[1]) ，它将打印出数字。但是，根据我在您的代码中看到的内容，binaryToHex[1] 和 [0] 可以分配一个数字或一个字符，因此如果它分配一个字符但您使用 %i 那么您将遇到同样的问题. 您可以改为将整数 0 的 asci 编号添加到您的语句中，方法是像 binaryToHex[1] = 余数 + '0' 一样附加它。因此，如果 binaryToHex[1] 的值为 7，您将打印一个不可打印的 ascii 字符，但通过向其添加“0”或 48，您将打印 55 的 ascii 表示，即 7，就像您想要的那样。但我认为您应该考虑重写代码以避免这些黑客攻击。

无论如何，我认为你应该从你的代码逻辑开始，因为我认为它有缺陷，但我可能是错的，因为我没有编译器来测试它。

# magento - Magento 日期文本：它来自哪里以及如何更改它？

> ID：14905791
> 
> 赞同：2
> 
> 时间：2013-02-16T01:03:42.363
> 
> 标签：magento

借助我从最近的 Magento 升级和随后的修复中学到的知识，**请帮助我解决我最大的 UI 抱怨之一：日期**。这是愚蠢的：

![在此处输入图像描述](../Images/7438cc32c3899299847a1ddf37cfd78e.png)

我破解了核心文件`app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php`并将“100px”更改为“165px”，这样可以防止日期换行。我真的很想将日期从“M n, Y g:i:s A”更改为 Gmail 使用“g:i:s a”（如果今天）或“M n, ga”（如果不是今天）。如果要显示的日期的年份不是当前年份，我会添加年份。

我看到[Overriding Magento Admin Controller, for Beginners](https://stackoverflow.com/questions/2849338)，这可能足以让我`_prepareColumns()`在核心文件中覆盖，但我真的很想知道如何更改该日期！顺便说一句，我 grepped 了整个安装，并且没有显示该日期格式字符串的任何部分。

* * *

**更新：**发现日期字符串格式已设置，`lib/Zend/Locale/Data/root.xml`如果您的语言环境不是 en_us（其文件为空），则可能会被覆盖。为了阐述 RS 答案的第一部分，日期“格式”不是 php`date()`样式，我尝试过并得到了非常奇怪的结果。仔细阅读 Locale XML 文件，我做了一些实验，如下所示：

```
 $this->addColumn('created_at', array(
        'header' => Mage::helper('sales')->__('Purchased On'),
        'index' => 'created_at',
        'type' => 'datetime',
        'format' => 'MMM d, h:mm a',  // Feb 18, 1:57 PM
        //'format' => Mage::app()->getLocale()->getDateTimeFormat(Mage_Core_Model_Locale::FORMAT_TYPE_MEDIUM), 
        //'format' => 'MMM d, y G',
        'width' => '165px', // CKCK: edited to fix date field width was 100px
    )); 
```

致力于制作自定义模块以覆盖块渲染器。如图所示，RS 代码的第 2 部分不起作用，但他的链接给了我一个秘诀。将再次更新结果。

* * *

**更新：** 我尝试（[但失败](https://stackoverflow.com/questions/14948525/)）覆盖 Adminhtml 块销售订单网格（`absog`）。另一个模块 EM_DeleteOrder 已经被覆盖了`absog`。我搜索了一个没有覆盖的替换模块，并`absog`找到了一个在销售网格方面具有强大功能的扩展：[MageWorx 增强订单](http://www.mageworx.com/extended-orders-magento-extension.html)。所以我安装了它，并破解了我想要的日期格式的源代码！我很高兴并且完成了，不再更新这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:19:31.250

尝试

```
$this->addColumn('created_at', array(
     'header' => Mage::helper('sales')->__('Purchased On'),
     'index' => 'created_at',
     'type' => 'datetime', 
     'format'    => 'MMM d, h:mm a',
     'width' => '165px',
)); 
```

你也可以使用`renderer`

```
$this->addColumn('created_at', array(
     'header' => Mage::helper('sales')->__('Purchased On'),
     'index' => 'created_at',
      //'type' => 'datetime', //remove
      'renderer' = new MageIgniter_FormatDate_Block_Adminhtml_Renderer_Data()
      'width' => '165px',
)); 
```

然后创建

```
class MageIgniter_FormatDate_Block_Adminhtml_Renderer_Data extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Action
{
  public function render(Varien_Object $row)
   {
     return $this->_getValue($row);
   }

   public function _getValue(Varien_Object $row)
   {
     $val = $row->getData($this->getColumn()->getIndex());  // row value
     // need to format $val

     return $val;

   } 
} 
```

看

*   [Magento 客户网格 - 掩码电子邮件地址](https://stackoverflow.com/questions/12691482/magento-customer-grid-mask-email-address)
*   [http://www.magentocommerce.com/boards/viewthread/192232/#t420795](http://www.magentocommerce.com/boards/viewthread/192232/#t420795)

# c++ - 拆分字符串以检查 C++ 中的第一个字符

> ID：14905796
> 
> 赞同：1
> 
> 时间：2013-02-16T01:04:27.120
> 
> 标签：c++, string, cin

我需要拆分一个字符串，它是 (string) (int) (string) (int)。我有这个一直持续到第一个字符串是'#'。但是每当我想输入“#”来结束这段时间时，我必须输入整个字符串，# (int) (string) (int)。我该如何编码，所以我只需要输入 # 来完成而不是整个字符串？这是我的代码：

```
void afegirEquips(EquipLliga & e) {
// Pre: --
// Post: Afegeix els equips entrats per teclat amb els seus gols al vector d'equips i calcula els seus punts

    string equipA, equipB;
    int golsA=0, golsB=0, n=0, cerca;
    e.n=0;
    cin >> equipA;
    cin >> golsA >> equipB >> golsB;          // Entra el primer equip per poder comprobar la condicio del 'while'
    while(equipA!=FI) {
        if(e.n>0) {
            cin >> equipA;
            cin >> golsA >> equipB >> golsB;      // Entra tots els equips menys el primer
        }
        cerca=cercaEquip(e,equipA);
        int posA=0;
        if(cerca==-1) {                      // Guarda la informacio del primer equip entrat i actualitza els gols i punts
            e.t[n].nomEquip=equipA;          // en el cas que l'equip sigui nou a la llista d'equips
            e.t[n].golsf=golsA;
            e.t[n].golsc=golsB;
           if(golsA>golsB) e.t[n].punts=e.t[n].punts+3;
           if(golsA<golsB) e.t[n].punts=e.t[n].punts;
           if(golsA==golsB) e.t[n].punts=e.t[n].punts+1;
            e.n++;
            n++;
        }
        else {                                              // Guarda la informacio del primer equip entrat i actualitza els gols i punts
            e.t[cerca].golsf=e.t[cerca].golsf+golsA;        // en el cas que l'equip ja existeixi a la llista d'equips
            e.t[cerca].golsc=e.t[cerca].golsc+golsB;
            if(golsA>golsB) e.t[cerca].punts=e.t[cerca].punts+3;
            if(golsA<golsB) e.t[cerca].punts=e.t[cerca].punts;
            if(golsA==golsB) e.t[cerca].punts=e.t[cerca].punts+1;
        }
        cerca=cercaEquip(e,equipB);
        int posB=0;
        if(cerca==-1) {                                     // Guarda la informacio del segon equip entrat i actualitza els gols i punts
            e.t[n].nomEquip=equipB;                         // en el cas que l'equip sigui nou a la llista d'equips
            e.t[n].golsf=golsB;
            e.t[n].golsc=golsA;
            if(golsA>golsB) e.t[n].punts=e.t[n].punts;
            if(golsA<golsB) e.t[n].punts=e.t[n].punts+3;
            if(golsA==golsB) e.t[n].punts=e.t[n].punts+1;
            e.n++;
            n++;
        }
        else {                                              // Guarda la informacio del segon equip entrat i actualitza els gols i punts
            e.t[cerca].golsf=e.t[cerca].golsf+golsB;        // en el cas que l'equip ja existeixi a la llista d'equips
            e.t[cerca].golsc=e.t[cerca].golsc+golsA;
            if(golsA>golsB) e.t[cerca].punts=e.t[cerca].punts;
            if(golsA<golsB) e.t[cerca].punts=e.t[cerca].punts+3;
            if(golsA==golsB) e.t[cerca].punts=e.t[cerca].punts+1;
        }
    }
} 
```

不要介意其余的代码，重要的是 cin。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:11:42.973

您的循环应该更改，以便您在检查后只读取其他输入`equipA`。

```
 cin >> equipA;
  while(equipA!=FI) {
      cin >> golsA >> equipB >> golsB;
      //...
      cin >> equipA;
  } 
```

# python - 使用 Python 进行基准测试

> ID：14905800
> 
> 赞同：2
> 
> 时间：2013-02-16T01:04:50.100
> 
> 标签：python

我希望使用 Python 作为一个系统来对其他进程的时间、数据 I/O、正确性等进行基准测试。我真正感兴趣的是时间的准确性。例如

```
start = time()
subprocess.call('md5sum', somelist)
end = time()
print("%d s", end-start) 
```

子进程是否会给被调用的函数增加相当大的开销。

编辑

好吧，经过几次快速测试后，似乎我最好的选择是使用，`subprocess`但是我已经注意到包含 stdout/stderr 和通信调用，它增加`0.002338 s`了执行的额外时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:10:19.653

使用[时间](http://docs.python.org/2/library/timeit.html)

```
import timeit
timeit.timeit('yourfunction') 
```

**更新**

如果您在 linux 中，则可以使用`time`命令，如下所示：

```
import subprocess
result = subprocess.Popen(['time', 'md5sum', somelist], shell = False, stdout = subprocess.PIPE, stderr = subprocess.PIPE).communicate()
print result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:56:16.603

如果您的计时器脚本不关心它计时的程序的标准输出/标准错误，只需将输出通过管道传输到文件或 /dev/null。这避免了读取蒸汽并将它们转换为 python 字符串的开销。

```
start = time()
subprocess.call(['md5sum'] + some_list, stdout=open('/dev/null', 'w'),
    stderr=subprocess.STDOUT)
delta = time.time() - start 
```

如果您不需要将 stdout 和 stderr 作为单独的流读取，请避免使用communicate()。它产生第二个线程来读取 stderr，这增加了开销。

# c# - 如何使用 LINQ 从列表中读取

> ID：14905809
> 
> 赞同：-3
> 
> 时间：2013-02-16T01:05:57.420
> 
> 标签：c#, console-application

所以我知道有很多关于同一个问题的问题，并且有很多很好的答案，但我似乎仍然无法用我的代码解决我自己的问题。因此，我将非常感谢任何人提供的任何东西。我真的觉得我已经尝试了一切，我只是不知道问题可能是什么。我一直在努力。我想从列表中读取并将其写入控制台。但是当我尝试写它时它是空白的。

```
public class Admin
{
    public void Maine()
    {
        List<Books> myLibraryBooks = new List<Books>();

                Books book1 = new Books();

                Console.Write("Enter Author Name:");
                book1.Author = Console.ReadLine();

                Console.Write("Enter Book Title:");
                book1.Title = Console.ReadLine();

                Console.Write("Enter Book ISBN:");
                book1.ISBN = Console.ReadLine();

                Console.Write("Enter the Publish Date:");
                book1.Publish_Date = Console.ReadLine();

                myLibraryBooks.Add(new Books() { Author = book1.Author.ToUpper(), Title = book1.Title.ToUpper(), ISBN = book1.ISBN, Publish_Date = book1.Publish_Date.ToUpper() });
                Console.WriteLine("Book added Successfully");

                Console.Write("Enter Author's Name:");
                string input_to_find = Console.ReadLine();
                var author = from Authors in myLibraryBooks
                             where Authors.Author == input_to_find
                             select Authors;

                foreach (var book in author)
                {
                    Console.WriteLine(book.Author, book.Title, book.ISBN, book.Publish_Date);
                }

class Books
{
    public string Author { get; set; }
    public string Title { get; set; }
    public string ISBN { get; set; }
    public string Publish_Date { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:12:19.330

一个错误 - 您拼错了入口点方法：

```
// Was Maine()
public void Main() 
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:12:28.783

```
var books = from book in myLibraryBooks
            where book.Author == input_to_find
            select book;

foreach (var book in books)
{
    Console.WriteLine(book.Author, book.Title, book.ISBN, book.Publish_Date);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:21:29.640

```
public class Admin
{
    public void Maine()
    {
        List<Books> myLibraryBooks = new List<Books>();

        Books book1 = new Books();

        Console.Write("Enter Author Name:");
        book1.Author = Console.ReadLine();

        Console.Write("Enter Book Title:");
        book1.Title = Console.ReadLine();

        Console.Write("Enter Book ISBN:");
        book1.ISBN = Console.ReadLine();

        Console.Write("Enter the Publish Date:");
        book1.Publish_Date = Console.ReadLine();

        myLibraryBooks.Add(book1);
        Console.WriteLine("Book added Successfully");

        Console.Write("Enter Author's Name:");
        string input_to_find = Console.ReadLine();

        var author = from Authors in myLibraryBooks
                     where StringComparer.OrdinalIgnoreCase.Equals(Authors.Author,input_to_find)
                     select Authors;

        foreach (var book in author)
        {
             Console.WriteLine(String.Format("{0} - {1} - {2} - {3}", book.Author, book.Title, book.ISBN, book.Publish_Date));
        }

    }

    class Books
    {
        public string Author { get; set; }
        public string Title { get; set; }
        public string ISBN { get; set; }
        public string Publish_Date { get; set; }
    }
} 
```

# ruby - 打开终端时没有这样的文件或目录

> ID：14905812
> 
> 赞同：1
> 
> 时间：2013-02-16T01:06:23.083
> 
> 标签：ruby, rvm

我很难安装 Rails 环境，但我需要的一切都已安装。我还有一个问题，现在每次打开终端我都会得到这个：

```
- bash: /etc/profile.d/rvm.sh: No such file or directory 
```

我正在使用 OSX 10.7。任何想法？

# knockout.js - observableArray：推送到源不会更新副本的 UI（foreach）

> ID：14905817
> 
> 赞同：0
> 
> 时间：2013-02-16T01:07:01.337
> 
> 标签：knockout.js

我有一个可观察数组，我将其复制到另一个可观察数组，如下所示：

```
var source = ko.observableArray(),
    copy = ko.observableArray();

copy(source());
source.push('a'); // 'a' is added to the copy but not to the UI (foreach) 
```

当我推送到源 (source.push('a')) 时，副本将包含新项目，但如果我将副本绑定到 foreach，则 UI 不会更新。如果我推送到副本，它将更新 UI（foreach）。

小提琴显示我的问题：http: [//jsfiddle.net/GvGkp/2/](http://jsfiddle.net/GvGkp/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:30:05.857

如果您希望两个可观察数组“指向”相同的数据，请使用

```
array2(array1); 
```

在这种情况下，两个数组将同时更新（UI 也是）。那是你要的吗？

# hibernate - JPQL/HQL：按与样本的相似性对实体进行排序？

> ID：14905818
> 
> 赞同：0
> 
> 时间：2013-02-16T01:07:03.660
> 
> 标签：hibernate, jpa, jpql, similarity, hibernate-search

我想查询与给定实体（相同类型）相似的实体。相似度（在最简单的情况下）定义为成员集合中相同项目的数量。

JPQL/HQL 查询会是什么样子？

我尝试了什么：

```
 SELECT wuSimilar, COUNT(*) AS score FROM WorkUnit wuBase 
           LEFT JOIN wuBase.tags AS wubTags
           LEFT JOIN WorkUnit wuSimilar ON wubTags IN wuSimilar.tags
           WHERE wuBase = :base
           GROUP BY wuSimilar
           ORDER BY score DESC 
```

这基本上是搜索，所以我可以使用 Hibernate Search，但不确定它是否不是矫枉过正。或者，我对 ElasticSearch 之类的东西持开放态度，在这种情况下，问题是，只为这种情况引入它是否值得？我可能不会在这个项目中进行其他搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:34:40.767

我非常接近，我只是过于依赖我的 SQL 知识。JPQL 仅`JOIN`用于声明的实体关系。

选择由表达式定义的列表时`WHERE`，必须是逗号加入。

```
 SELECT wuSimilar, COUNT(*) AS score FROM WorkUnit wuBase 
           LEFT JOIN wuBase.tags AS wubTags
           , WorkUnit wuSimilar
           WHERE wuBase = :base AND wubTags IN (wuSimilar.tags)
           GROUP BY wuSimilar
           ORDER BY score DESC 
```

好像可以，去试试。

# php - 如何将 PHP 代码添加到 URL

> ID：14905819
> 
> 赞同：-1
> 
> 时间：2013-02-16T01:07:10.320
> 
> 标签：php

我应该使用什么 php 代码以及如何将其添加到下面的**NEXT ARTICLE** url 链接中，这将导致多维数组中的下一篇文章随后被回显？

我打算一个接一个地依次回应。

谢谢！

(form.php)

```
<form action="process.php" method="get">
    Group:
    <select name="group">
        <option value="group1">Group1</option>
        <option value="group2">Group2</option>
    </select>

    Chapter:
    <input type="text" name="chapter">

    Article:
    <input type="text" name="article">

    <input type="submit" value="Go to Article">    

</form> 
```

（进程.php）

```
<?php

session_start();

$laws=array(
       "group1"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group1)",
                                "2"=>"This is article (2) in chapter (1) of (group1)",
                                "3"=>"This is article (3) in chapter (1) of (group1)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group1)",
                                "2"=>"This is article (2) in chapter (2) of (group1)",
                                "3"=>"This is article (3) in chapter (2) of (group1)",
                                ),
                       ),
       "group2"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group2)",
                                "2"=>"This is article (2) in chapter (1) of (group2)",
                                "3"=>"This is article (3) in chapter (1) of (group2)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group2)",
                                "2"=>"This is article (2) in chapter (2) of (group2)",
                                "3"=>"This is article (3) in chapter (2) of (group2)",
                                ),

       )
       );

$grp= $_GET['group'];
$chap = $_GET['chapter'];
$art = $_GET['article'];

if(isset($laws[$grp]) && isset($laws[$grp][$chap]) && isset($laws[$grp][$chap][$art])){
$_SESSION['group'] = $grp;
$_SESSION['chapter'] = $chap;
$_SESSION['article'] = $art;    
}else{
$_SESSION['group'] = 'group1';
$_SESSION['chapter'] = '1';
$_SESSION['article'] = '1';   
}

$group = $_SESSION['group'];
$chapter = $_SESSION['chapter'];
$article = $_SESSION['article'];

echo $laws[$group][$chapter][$article]; // ALL NEXT ARTICLES TO BE ECHOED HERE!!!!!

?>

<a href="process.php" style="text-decoration: none;">NEXT ARTICLE</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:20:54.687

```
<a href="process.php?group=<?php echo $group; ?>&chapter=<?php echo $chapter; ?>&article=<?php echo ($article + 1); ?>" style="text-decoration: none;">NEXT ARTICLE</a> 
```

将链接到本章的下一篇文章。但是，您必须检查您是否不在给定章节的最后一篇文章中，我将留给您

# perl - 使用 XML::LibXML 解析 xml；和 perl

> ID：14905822
> 
> 赞同：1
> 
> 时间：2013-02-16T01:07:14.740
> 
> 标签：perl, parsing, xml-parsing

我很难弄清楚下面布局的 xml 路径是什么。

```
<?xml version="1.0"?>
<Root Name="\\Admin1\ROOT" State="1" Timeout="300" >
       <Target Server="Admin`" Folder="ROOT" State="2"/> 

       <Link Name="users\foo" State="1" Timeout="300" >
              <Target Server="server1" Folder="folder1\foo" State="2"/>
       </Link>

      <Link Name="users\bar" State="1" Timeout="300" >
             <Target Server="server2" Folder="folder2\bar" State="2"/>
      </Link>
</Root> 
```

而且我似乎无法弄清楚如何让波纹管代码打印每个链接名称。

```
use strict;use warnings;

my $filename = 'dfs_dump.xml';

use XML::LibXML;
my $parser = XML::LibXML->new();

my $doc    = $parser->parse_file($filename);
foreach my $link ($doc->findnodes('/Root Name/Target Server')) {
    my($title) = $link->findnodes('/Link Name');
    print $title->to_literal, "\n" 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:28:44.417

```
for my $link_node ($doc->findnodes('/Root/Link')) {
    print $link_node->getAttribute('Name') // "[none]", "\n";
} 
```

或者

```
for my $link_name ($doc->findnodes('/Root/Link/@Name')) {
    print $link_name->getData(), "\n";
} 
```

# c# - GridView 数据绑定不起作用

> ID：14905825
> 
> 赞同：1
> 
> 时间：2013-02-16T01:07:49.160
> 
> 标签：c#, list, gridview

我有一个gridview，它有一个对象列表的数据源。但它似乎在 DataBind 步骤上有问题。它不会在网站上显示任何内容。

```
List<StringTR> strResult_List = new List<StringTR>();

foreach (TSService.STs ST in ST_Returned_list) //I'm converting ST_Returned_list to StringResult as ST_Returned_list has some custom type fields and they are not working with Gridview
{
    strResult_List.Add(new StringResult(ST));
}

ResultsGridView.DataSource = strResult_List;
                    ResultsGridView.DataBind(); // this is where it is failing. when I step through it, it says "Step into: Stepping over method without symbols" 

public class StringResult
    {
         string str_SName { get; set; }
         string IPAddressUsed { get; set; }
         string BTypeUsed { get; set; }
         string SResult { get; set; }

        public StringResult(TestScriptsService.Sel_Test ST)
        {

                str_SName = ST.SName.ToString();
                IPAddressUsed = ST.IPAddressUsed;
                BTypeUsed = ST.BTypeUsed.ToString();
                SResult = ST.SResult.ToString();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:00:52.320

在数据绑定步骤放置一个断点并检查数据源中的内容。这将消除疑虑。

# visual-studio - visual studio express 2012 如何打包一个应用程序？电话间隙

> ID：14905830
> 
> 赞同：1
> 
> 时间：2013-02-16T01:08:37.457
> 
> 标签：visual-studio, cordova, package

我在 VS2012 express 中创建了一个 phonegap 应用程序，我在我的设备和仿真上运行了该应用程序，但我不知道如何创建一个 .appx 或 .appxupload 文件以上传到 Windows 商店。我试着按照我能做的每一个教程，但我的 VS2012 没有他们谈论的任何窗口/工具。没有 Project->Store（我什至查看了自定义菜单，它没有在任何地方作为选项列出），当我打开清单文件时，有 3 个选项卡（应用程序 ui、功能、打包）但是没有选项这些选项卡中的任何一个都可以实际创建仅包配置选项。有没有其他人遇到过这个？你不能用VS2012 express来做这个吗？如果有人有任何想法，请告诉我。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:22:10.063

你试过他们的 Build 产品吗？你压缩你的代码，上传到他们，他们会在它支持的所有平台上为你编译它。

[https://build.phonegap.com/](https://build.phonegap.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T21:46:46.563

> 没有项目->商店（我什至查看了自定义菜单，它没有作为选项列出任何地方）

不是很混乱吗？“项目”并不意味着“项目”菜单。

转到解决方案资源管理器。在顶层，你有你的解决方案。在第二级，您有一个或多个项目。右键单击正确的项目，您将获得一大堆其他选项，其中一个是“存储”。那就是你想要的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T16:37:43.067

Based on your comment you have created a phone app. You should be uploading it to the windows phone store. See [http://msdn.microsoft.com/en-us/library/windowsphone/help/jj206723(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/help/jj206723(v=vs.105).aspx)

The appx is what is expected for Windows 8 Store targeted for the desktop/tablet. See [http://msdn.microsoft.com/en-us/library/windows/apps/br230835.aspx#build_package](http://msdn.microsoft.com/en-us/library/windows/apps/br230835.aspx#build_package)

Make sure you are uploading your stuff in the right store.

# scala - 没有“log.xxxx”的Scala调用记录方法

> ID：14905834
> 
> 赞同：2
> 
> 时间：2013-02-16T01:09:12.647
> 
> 标签：scala, logging, methods

有没有办法在不必手动定义日志记录方法的情况下执行以下操作，例如`def error`：

```
object FooBar {
  lazy val log = LoggerFactory.getLogger("AndroidProxy")
  def error(msg: String) = log.error(msg)

  def my_method(): Unit = {
    error("This is an error!")
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T01:11:34.173

替换`def error`为

```
import log.error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:22:37.367

如果你想登录很多类而不是每次都重写记录方法，你可以创建一个 trait

```
trait Logging {
    lazy val logger = LoggerFactory.getLogger(getClass())

    def error(msg: => String) = log.error(msg)
} 
```

然后在你需要记录的类中你做......

```
class MyClass extend Logging {
    def method() {
        //do stuff
        error("oups!")
    }
} 
```

通常最好按名称传递 msg 参数（使用 :=> String），以便仅在使用时才评估字符串参数。

另外，请注意 getClass 现在是记录器的名称。这很有帮助，因为现在记录器的名称是扩展 Logging 特征的类的名称，而不是硬编码的名称。

# regex - perl 正则表达式不匹配带有换行符 \n 的字符串

> ID：14905836
> 
> 赞同：5
> 
> 时间：2013-02-16T01:09:51.950
> 
> 标签：regex, perl

我正在尝试通过 Kubuntu（GNU/Linux）中的 bash shell（GNU Bash-4.2）使用 perl（v5.14.2）来搜索和替换包含换行符的字符串，但我还没有成功。

这是我正在搜索的文本文件：

```
<!-- filename: prac1.html -->

hello
kitty

blah blah blah 
```

当我使用文本编辑器 (Kate's) 的搜索和替换功能或使用正则表达式测试器 ( [http://regexpal.com/](http://regexpal.com/) ) 时，我可以轻松地让这个正则表达式工作：

```
hello\nkitty 
```

但是在命令行中使用 perl 时，以下命令均无效：

```
perl -p -i -e 's,hello\nkitty,newtext,' prac1.html
perl -p -i -e 's,hello.kitty,newtext,s' prac1.html
perl -p -i -e 's,hello.*kitty,newtext,s' prac1.html
perl -p -i -e 's,hello[\S\s]kitty,newtext,' prac1.html
perl -p -i -e 's,hello[\S\s]*kitty,newtext,' prac1.html 
```

实际上，我绝望了并尝试了许多其他模式，包括所有这些（“单行”和“多行”模式中的不同排列）：

```
perl -p -i -e 's,hello\nkitty,newtext,' prac1.html
perl -p -i -e 's,hello.kitty,newtext,' prac1.html
perl -p -i -e 's,hello\nkitty,newtext,s' prac1.html
perl -p -i -e 's,hello.kitty,newtext,s' prac1.html
perl -p -i -e 's,hello\nkitty,newtext,m' prac1.html
perl -p -i -e 's,hello.kitty,newtext,m' prac1.html
perl -p -i -e 's,hello\nkitty,newtext,ms' prac1.html
perl -p -i -e 's,hello.kitty,newtext,ms' prac1.html

perl -p -i -e 's,hello[\S\s]kitty,newtext,' prac1.html
perl -p -i -e 's,hello[\S\s]*kitty,newtext,' prac1.html
perl -p -i -e 's,hello$[\S\s]^kitty,newtext,' prac1.html
perl -p -i -e 's,hello$[\S\s]*^kitty,newtext,' prac1.html
perl -p -i -e 's,hello[\S\s]kitty,newtext,s' prac1.html
perl -p -i -e 's,hello[\S\s]*kitty,newtext,s' prac1.html
perl -p -i -e 's,hello$[\S\s]^kitty,newtext,s' prac1.html
perl -p -i -e 's,hello$[\S\s]*^kitty,newtext,s' prac1.html
perl -p -i -e 's,hello[\S\s]kitty,newtext,m' prac1.html
perl -p -i -e 's,hello[\S\s]*kitty,newtext,m' prac1.html
perl -p -i -e 's,hello$[\S\s]^kitty,newtext,m' prac1.html
perl -p -i -e 's,hello$[\S\s]*^kitty,newtext,m' prac1.html
perl -p -i -e 's,hello[\S\s]kitty,newtext,ms' prac1.html
perl -p -i -e 's,hello[\S\s]*kitty,newtext,ms' prac1.html
perl -p -i -e 's,hello$[\S\s]^kitty,newtext,ms' prac1.html
perl -p -i -e 's,hello$[\S\s]*^kitty,newtext,ms' prac1.html 
```

（我也尝试使用 \r \r\n \R \f \D 等，以及全局模式。）

任何人都可以发现问题或提出解决方案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T02:21:51.980

尝试这样做，我通过修改*输入记录分隔符*（默认为换行符）来实现这一点：

```
perl -i -p00e 's,hello\nkitty,newtext,' prac1.html 
```

来自[`perldoc perlrun`](http://perldoc.perl.org/perlrun.html)：

> -0[八进制/十六进制]
> 
> 将输入记录分隔符 ($/) 指定为八进制或十六进制数。如果没有数字，则空字符是分隔符。其他开关可以在数字之前或之后。例如，如果您有一个可以打印以空字符结尾的文件名的 find 版本，您可以这样说：
> 
> ```
> find . -name '*.orig' -print0 | perl -n0e unlink 
> ```
> 
> **特殊值 00 将导致 Perl 以段落模式 slurp 文件**。任何 0400 或更高的值都将导致 Perl 将整个文件 slurp，但按照惯例，值 0777 是通常用于此目的的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T01:14:40.090

问题是“-p”已经隐式地将这个循环包裹在你的“-e”周围，并且“<>”将输入分成几行，所以你的正则表达式永远不会有机会看到多于一行。

```
 LINE:
       while (<>) {
           ...             # your program goes here
       } continue {
           print or die "-p destination: $!\n";
       } 
```

有关更多信息，请参见 perlrun 联机帮助页。

# assembly - 推-67是什么意思？

> ID：14905837
> 
> 赞同：-2
> 
> 时间：2013-02-16T01:10:01.683
> 
> 标签：assembly

我真的很困惑，我只是想在一些 dissemblers 中知道这件事

国际开发协会

**6A99 = 按下 FFFFFF99**

在其他方面

**6A99 = 推 -67**

有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:25:06.827

6A 是“PUSH imm8”的操作码。

imm8 是一个有符号字节，其值介于 -128 和 127 之间。

由于作为有符号字节的 0x99 (153) 等于 -103 (-0x67)，反汇编器可以将其显示为 -67h 或符号扩展整数（99h、ff99h 或 ffffff99h）。

# html - 打印 css 以向上移动右列

> ID：14905840
> 
> 赞同：0
> 
> 时间：2013-02-16T01:10:26.500
> 
> 标签：html, css, printing-web-page

我正在尝试打印页面.....为此，我有两个不同的列....所以我减小了一个列的宽度以将前一列向上...但我无法将第二栏...

在下面提供我的打印 css

[http://jsfiddle.net/pd7hF/embedded/result/](http://jsfiddle.net/pd7hF/embedded/result/)

```
@media print 
 {
    .mainDiv { display: none;}

    .form-horizontal .control-label {width: 50px;}

     #poLeft { width: 300px; border: 1px solid red;}

     #billTo {width: 122px;}

     #cityLeft{width:40px;margin-left: 85px;height: 13px;}

     #stateLeft{width: 50px;height: 13px;width: 41px;}

     #zipLeft{width: 40px;height: 13px;}

     #countryLeft{width: 117px;margin-left: 62px;height: 13px;}

     #phoneLeft{width: 121px;height: 13px;}

     #emailLeft{width: 125px;}

     #noteLeft{width: 101px;}

     #poLeft{width: 154px;}  

     #poRight{width: 300px;}

     #fileRight{width: 101px;}

     /* any other styles you wish to target go here */
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:44:26.077

@user2045025 像这样更改打印 CSS

```
 .mainDiv {display: none;width:100%;}
        label {padding-right:10px;}
        .form-horizontal .control-label {width: 20%;}
        #poLeft {width: 48%;border: 1px solid red;}
        #billTo {width: 92%;}
        #cityLeft{width:25%; margin-left:15%; height: 13px;}
        #stateLeft{  height: 13px; width: 5%;}
        #zipLeft{width: 20%; height: 13px;}
        #countryLeft{width:70%; margin-left:11%; height: 13px;}
        #phoneLeft{width:72%; height: 13px;margin-left:11%;}
        #emailLeft{ width:85%;}
        #noteLeft{width:80%;}
        #stateLabelLeft{display: inline-block; margin-left: 1px;}
        #zipLabelLeft{display: inline-block; margin-left: 1px;}
        #poRight{ width: 48%; }
        #fileRight{width: 92%;}

        #vendorListHeading{
            background-color: #1a4567; 
            color: white;
            border: 1px solid red;
          }

     #cityRight{width:20%;height: 13px;}
     #stateRight{width:5%;  height: 13px;}
     #zipRight{width:15%; height: 13px;}
     #countryRight{width: 34%; margin-left:55px; height:13px;}    
     #phoneRight{width:30%; height: 13px;}

    } 
```

# c++ - SFML(C++) 创建窗口时崩溃？[SFML：1.6，CB：12.11]

> ID：14905842
> 
> 赞同：1
> 
> 时间：2013-02-16T01:10:34.307
> 
> 标签：c++, windows, codeblocks, sfml

我开始使用 SFML 和 C++ 创建游戏。但是，我有一个问题。我有基本的骨架类代码，但由于某种原因，当我创建一个窗口（sf::Window）时，我立即崩溃了！此代码不包含任何事件检查代码，但它确实包含并且仍然崩溃；此外，显然，如果由于缺乏事件检查，它应该需要几秒钟才能崩溃。当然，一旦我看到窗口，我会添加它。

```
#include <iostream>
#include <windows.h>
#include <SFML/Window.hpp>
#include "GameBase.h"
#include "Character.h"
#include "GameStart.h"

using namespace std;
using namespace sf;

int main() {
    GameStart::GameStart();
    Clock timer;
    cout << "Started." << endl;

    Window GameWindow(VideoMode(640, 480),"Basic window");

    while (1) {
        Sleep(0.5f);
    }
    return 0;
} 
```

我知道这不是计时器、GameStart 或任何其他个人包含文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:56:45.590

Code::Blocks 12.11 附带 MinGW GCC 4.7.1 TDM 编译器，它与官方下载页面上提供的二进制文件不兼容，因此除非您使用新编译器重新编译 SFML 1.6，否则事情将无法解决。

除此之外，您还应该阅读SFML FAQ 的[这一部分](https://github.com/LaurentGomila/SFML/wiki/FAQ#wiki-grl-version)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:01:44.147

我试过了，它没有问题：

```
#include <iostream>
#include <SFML/Window.hpp>

int main() {
    std::cout << "Started." << std::endl;

     sf::Window gameWindow( sf::VideoMode(640, 480),"Basic window");

     while (gameWindow.IsOpened()) {
         sf::Event event;
        while (gameWindow.GetEvent(event)) {

            if (event.Type == sf::Event::Closed)
                gameWindow.Close();
        }
    }
    return EXIT_SUCCESS;
} 
```

我替换`while(1)`为 while`(gameWindow.IsOpened())`并添加了对关闭按钮的支持。这允许删除此处不相关的 windows 标头。

您应该尝试在调试模式下编译和执行它。它可能会帮助您理解问题。

此外，当您的代码不起作用时。我建议评论所有不相关的内容（在这个例子中：`GameStart::GameStart();`、、`Clock timer;`...），看看它是否有效。

# android - 尝试创建数据库时出错 (Android 2.2)

> ID：14905851
> 
> 赞同：0
> 
> 时间：2013-02-16T01:11:39.497
> 
> 标签：android, database, sqlite

我创建了一个类来使我的代码更干净，这就是它的简单之处，我只是不想使用完整的 ORM：

```
package com.xxx.xxx.db;

public class DatabaseTable {
    private String TABLE_NAME;
    private String[] COLUMN_NAMES;
    private String[] COLUMN_TYPES;
    private String[] COLUMN_SPECS;

    public DatabaseTable(String TABLE_NAME) {
    this.TABLE_NAME = TABLE_NAME;
    }

    public void insertColumn(String COLUMN_NAME, String COLUMN_TYPE, String COLUMN_SPECS) {
        if (COLUMN_NAME != null && COLUMN_TYPE != null) {
            int actualIndex = this.COLUMN_NAMES.length+1;
            this.COLUMN_NAMES[actualIndex] = COLUMN_NAME;
            this.COLUMN_TYPES[actualIndex] = COLUMN_TYPE;
            if (COLUMN_SPECS != null) {
                this.COLUMN_SPECS[actualIndex] = COLUMN_SPECS;
            }
        }
    }

    public String getCreateString() {
        String textoRetorno = "CREATE TABLE IF NOT EXIST " + this.TABLE_NAME + " (";
        for(int i=0;i<=this.COLUMN_NAMES.length;i++) {
            textoRetorno = textoRetorno + this.COLUMN_NAMES[i] + " " + this.COLUMN_TYPES[i];
            if (this.COLUMN_SPECS[i] != null) {
                textoRetorno = textoRetorno + " " + this.COLUMN_SPECS[i];
            }
        }
        textoRetorno = textoRetorno + ");";
        return textoRetorno;
    }
} 
```

这就是我在我的 SQLiteOpenHelper 类中使用它的方式......

```
package com.xxx.xxx.db;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import com.twomadheads.dietcontroller.db.DatabaseTable;

public class DatabaseHelper extends SQLiteOpenHelper {

    static final String DB_NAME = "EDC.db";
    static final int DB_VERSION = 1;

    //TABLES

    public DatabaseHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    DatabaseTable produtos = new DatabaseTable("Produtos");
        produtos.insertColumn("id", "INTEGER", "NOT NULL AUTO_INCREMENT");
        produtos.insertColumn("titulo", "TEXT", "NOT NULL");
        produtos.insertColumn("barcode", "TEXT", "NULL");
        produtos.insertColumn("calorias", "REAL", "NULL");
        produtos.insertColumn("carboidratos", "REAL", "NULL");
        produtos.insertColumn("proteinas", "REAL", "NULL");
        produtos.insertColumn("gorduras totais", "REAL", "NULL");
        produtos.insertColumn("gorduras saturadas", "REAL", "NULL");
        produtos.insertColumn("fibras", "REAL", "NULL");
        produtos.insertColumn("sincronizado", "TEXT", "NULL");

        db.execSQL(produtos.getCreateString());
     }
} 
```

我在 LogCat 上看不到任何错误......所以.. :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:21:06.900

问题1：

您的 create table 语句中缺少字母。这是：

```
CREATE TABLE IF NOT EXIST 
```

并且应该是：

```
CREATE TABLE IF NOT EXISTS 
```

字母 S？

问题 2：数组未初始化。参考问题3。

问题 3：定位超出数组限制的数组元素。试试下面的代码。它可能无法开箱即用，但应该给你一个线索：

```
import java.util.ArrayList;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseTable {
    private String TABLE_NAME;
    private ArrayList<String> COLUMN_NAMES;
    private ArrayList<String> COLUMN_TYPES;
    private ArrayList<String> COLUMN_SPECS;

    public DatabaseTable(String TABLE_NAME) {
        this.TABLE_NAME = TABLE_NAME;
        COLUMN_NAMES = new ArrayList<String>();
        COLUMN_TYPES = new ArrayList<String>();
        COLUMN_SPECS = new ArrayList<String>();
    }

    public void insertColumn(String COLUMN_NAME, String COLUMN_TYPE, String COLUMN_SPECS) {
        if (COLUMN_NAME != null && COLUMN_TYPE != null) {
            this.COLUMN_NAMES.add(COLUMN_NAME);
            this.COLUMN_TYPES.add(COLUMN_TYPE);
            this.COLUMN_SPECS.add(COLUMN_SPECS);

        }
    }

    public String getCreateString() {
        String textoRetorno = "CREATE TABLE IF NOT EXIST " + this.TABLE_NAME + " (";
        for(int i=0;i<=this.COLUMN_NAMES.size();i++) {
            textoRetorno = textoRetorno + this.COLUMN_NAMES.get(i) + " " + this.COLUMN_TYPES.get(i);
            if (this.COLUMN_SPECS.get(i) != null) {
                textoRetorno = textoRetorno + " " + this.COLUMN_SPECS.get(i);
            }
        }
        textoRetorno = textoRetorno + ");";
        return textoRetorno;
    }

    class DatabaseHelper extends SQLiteOpenHelper {

        static final String DB_NAME = "EDC.db";
        static final int DB_VERSION = 1;

        //TABLES

        public DatabaseHelper(Context context) {
            super(context, DB_NAME, null, DB_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        DatabaseTable produtos = new DatabaseTable("Produtos");
            produtos.insertColumn("id", "INTEGER", "NOT NULL AUTO_INCREMENT");
            produtos.insertColumn("titulo", "TEXT", "NOT NULL");
            produtos.insertColumn("barcode", "TEXT", "NULL");
            produtos.insertColumn("calorias", "REAL", "NULL");
            produtos.insertColumn("carboidratos", "REAL", "NULL");
            produtos.insertColumn("proteinas", "REAL", "NULL");
            produtos.insertColumn("gorduras totais", "REAL", "NULL");
            produtos.insertColumn("gorduras saturadas", "REAL", "NULL");
            produtos.insertColumn("fibras", "REAL", "NULL");
            produtos.insertColumn("sincronizado", "TEXT", "NULL");

            db.execSQL(produtos.getCreateString());
         }

        @Override
        public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
            // TODO Auto-generated method stub

        }

    }
} 
```

# ruby-on-rails - rails，活动记录查询

> ID：14905855
> 
> 赞同：0
> 
> 时间：2013-02-16T01:11:46.017
> 
> 标签：ruby-on-rails, rails-activerecord

我有 2 个模型

```
class Article < ActiveRecord::Base
  has_many :images
end 
```

和

```
class Image < ActiveRecord::Base
  belongs_to :article
end 
```

我怎样才能得到所有没有图片的文章

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:14:55.810

试试这个：

```
Article.where('id NOT IN (?)', Image.all.pluck(:article_id).uniq) 
```

# php - 我面临的问题；Javascript 编码与里面的 php 变量

> ID：14905860
> 
> 赞同：0
> 
> 时间：2013-02-16T01:13:18.627
> 
> 标签：php, javascript

我似乎遇到了问题，我有一个 Javascript 代码，它包含 php 变量

```
<?php   // Database information 
$name="whatever"; 

$mp3 = "Link/to/track/";
echo "
var myPlaylist = [{
    mp3:'mix/4.mp3',
    title:'$name',
}]]; </script>"; 
```

在尝试对此进行编码时，我可以对 Javascript 部分进行编码，但它会显示我的变量名（在本例中为 $name）而不是值（无论如何）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:36:20.257

每当您像这样在 PHP 和 JS 之间传输信息时，请使用`json_encode`. 1）你知道你正在构建一个正确的 JavaScript 结构（在你的代码中，你不是......你要关闭数组两次），并且 2）你可以防止转义问题。尝试：

```
<?php
$name = 'whatever';
$mp3 = '/link/to/track';

$json = array(array('mp3' => $mp3, 'title' => $name));
print "var myPlaylist = " . json_encode($json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:14:46.140

这应该可行，但无论如何都要试试这个

```
title:'".$name."', 
```

或者

```
title:'{$name}', 
```

由于您使用了双引号，它应该呈现 php 变量，单引号不会，但您没有使用它们。还要确保对名称进行转义，因为如果它有一个单引号怎么办？它会破坏你的javascript（除非它受到严格控制并且你知道它不会有一个单引号）。

# android - 从图库中选择图像而不会丢失额外

> ID：14905861
> 
> 赞同：1
> 
> 时间：2013-02-16T01:13:45.667
> 
> 标签：android, android-intent, android-gallery

我正在使用[这段代码](https://stackoverflow.com/questions/2507898/how-to-pick-an-image-from-gallery-sd-card-for-my-app-in-android) 来启动一个抛出画廊的意图。一切都很好，除了在调用之前`startActivityForResult`我添加了一些附加功能，并且当我管理所选图像时，附加功能始终为空。我该如何解决？有没有更好的方法来保存我的 Extras？

# python - Python 流提取

> ID：14905866
> 
> 赞同：5
> 
> 时间：2013-02-16T01:14:30.713
> 
> 标签：python, python-3.x, stream, scanf

许多编程语言的标准库包括一个“扫描器 API”，用于从文本输入流中提取字符串、数字或其他对象。（例如，Java 包含`Scanner`类，C++ 包含`istream`，C 包含`scanf`）。

这在 Python 中相当于什么？

Python 有一个流接口，即继承自`io.IOBase`. 但是，Python`TextIOBase`流接口仅提供面向行的输入的功能。在[阅读文档](http://docs.python.org/3.3/library/io.html)并[在 Google 上搜索](http://www.google.com/#hl=en&tbo=d&sclient=psy-ab&q=python+scanner&oq=python+scanner&gs_l=serp.3..0l3j0i30.2971.4161.0.4365.10.6.0.0.0.2.186.595.5j1.6.0.les;..0.0...1c.1.3.psy-ab.kK_-ulgedz4&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=2c7ceae03ba17901&biw=1465&bih=989)之后，我在标准 Python 模块中找不到可以让我从文本流中提取整数或将下一个以空格分隔的单词提取为字符串的东西。是否有任何标准设施可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T08:58:01.257

没有等同于`fscanf`或 Java 的`Scanner`. 最简单的解决方案是要求用户使用换行符分隔输入而不是空格分隔输入，然后您可以逐行读取并将行转换为正确的类型。

如果您希望用户提供更结构化的输入，那么您可能应该为用户输入创建一个解析器。有一些不错的 python 解析库，例如[pyparsing](http://pypi.python.org/pypi/pyparsing)。还有一个[`scanf`](https://hkn.eecs.berkeley.edu/~dyoo/python/scanf/)模块，尽管最后一次更新是 2008 年。

如果您不想有外部依赖项，那么您可以使用正则表达式来匹配输入序列。当然，正则表达式需要处理字符串，但您可以轻松克服以块读取的限制。例如，这样的事情在大多数情况下应该可以正常工作：

```
import re

FORMATS_TYPES = {
    'd': int,
    'f': float,
    's': str,
}

FORMATS_REGEXES = {    
    'd': re.compile(r'(?:\s|\b)*([+-]?\d+)(?:\s|\b)*'),
    'f': re.compile(r'(?:\s|\b)*([+-]?\d+\.?\d*)(?:\s|\b)*'),
    's': re.compile(r'\b(\w+)\b'),
}

FORMAT_FIELD_REGEX = re.compile(r'%(s|d|f)')

def scan_input(format_string, stream, max_size=float('+inf'), chunk_size=1024):
    """Scan an input stream and retrieve formatted input."""

    chunk = ''
    format_fields = format_string.split()[::-1]
    while format_fields:
        fields = FORMAT_FIELD_REGEX.findall(format_fields.pop())
        if not chunk:
            chunk = _get_chunk(stream, chunk_size)

        for field in fields:
            field_regex = FORMATS_REGEXES[field]
            match = field_regex.search(chunk)
            length_before = len(chunk)
            while match is None or match.end() >= len(chunk):
                chunk += _get_chunk(stream, chunk_size)
                if not chunk or length_before == len(chunk):
                    if match is None:
                        raise ValueError('Missing fields.')
                    break
            text = match.group(1)
            yield FORMATS_TYPES[field](text)
            chunk = chunk[match.end():]

def _get_chunk(stream, chunk_size):
    try:
        return stream.read(chunk_size)
    except EOFError:
        return '' 
```

示例用法：

```
>>> s = StringIO('1234 Hello World -13.48 -678 12.45')
>>> for data in scan_input('%d %s %s %f %d %f', s): print repr(data)
...                                                                                            
1234                                                                                           
'Hello'
'World'
-13.48
-678
12.45 
```

您可能必须扩展它并正确测试它，但它应该会给您一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:28:29.550

没有直接的等价物（据我所知）。但是，您可以使用正则表达式做几乎相同的事情（请参阅[`re`](http://docs.python.org/2.7/library/re.html?highlight=re#re)模块）。

例如：

```
# matching first integer (space delimited)
re.match(r'\b(\d+)\b',string)

# matching first space delimited word
re.match(r'\b(\w+)\b',string)

# matching a word followed by an integer (space delimited)
re.match(r'\b(\w+)\s+(\d+)\b',string) 
```

它比通常的 C 风格扫描仪界面需要更多的工作，但它也非常灵活和强大。不过，您必须自己处理流 I/O。

# iphone - 使用 iPhone 加速度计沿 x 轴移动精灵

> ID：14905871
> 
> 赞同：3
> 
> 时间：2013-02-16T01:15:03.423
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone, uiaccelerometer

我正在使用 cocos2d 开发 iPhone 游戏。我正在尝试使用加速度计在纵向模式下移动精灵以左右移动。由于某种原因，我使用的代码默认向右移动，除非手机倾斜 45 度角，即返回值都是正数（表示它应该向右移动），直到它倾斜 45 度角，左或右。死点返回 600 左右，然后随着您向左或向右倾斜手机的进一步降低，直到它达到 45 度角（它达到 0 并开始变为负数）。下面是我正在使用的代码。任何帮助将不胜感激。

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {

        #define kFilteringFactor 0.75
            static UIAccelerationValue rollingX = 0, rollingY = 0, rollingZ = 0;

            rollingX = (acceleration.x * kFilteringFactor) +
            (rollingX * (1.0 - kFilteringFactor));
            rollingY = (acceleration.y * kFilteringFactor) +
            (rollingY * (1.0 - kFilteringFactor));
            rollingZ = (acceleration.z * kFilteringFactor) +
            (rollingZ * (1.0 - kFilteringFactor));

            float accelX = rollingX;
            float accelY = rollingY;
            float accelZ = rollingZ;

            CGSize winSize = [CCDirector sharedDirector].winSize;

        #define kRestAccelX 0.6
        #define kShipMaxPointsPerSec (winSize.height*0.5)
        #define kMaxDiffX 0.2

            float accelDiffX = kRestAccelX - ABS(accelX);
            float accelFractionX = accelDiffX / kMaxDiffX;
            float pointsPerSecX = kShipMaxPointsPerSec * accelFractionX;

            _shipPointsPerSecX = pointsPerSecX;
            NSLog(@"_shipPointsPerSecX: %f", _shipPointsPerSecX);
}

- (void)updateShipPos:(ccTime)dt {

    CGSize winSize = [CCDirector sharedDirector].winSize;

    float maxX = winSize.width - _ship.contentSize.width/2;
    float minX = _ship.contentSize.width/2;

    float newX = _ship.position.x + (_shipPointsPerSecX * dt);
    newX = MIN(MAX(newX, minX), maxX);
    _ship.position = ccp(newX, _ship.position.y);
   // NSLog(@"newx: %f", newX);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T06:16:36.270

基本上，您的加速度计应该做的是更新加速度（像您一样使用过滤因子）。

但在它旁边，您应该保持速度和位置，并在您的预定步骤（float dt）函数中进行调整，如下所示：

速度 += 加速度*dt 位置 += 速度 * dt

对 x 和 y 执行此操作

# java - java应用程序swing中的按钮共享图像

> ID：14905872
> 
> 赞同：0
> 
> 时间：2013-02-16T01:15:15.430
> 
> 标签：java, facebook, swing, twitter, share

我正在从事修饰图像的 java swing 应用程序，我想在社交网络中添加按钮共享。我不知道我如何调用 Facebook、twitter 或其他人的界面来做到这一点。

如果有人可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:51:09.167

我假设您的意思是您希望用户能够使用您的应用程序登录 Facebook 或 Twitter 并发布图像。在这种情况下，您将需要：

1.  向 Facebook[注册您的应用程序。](https://developers.facebook.com/docs/concepts/login/)
2.  下载 Facebook API，例如[http://restfb.com](http://restfb.com)。
3.  将 API 集成到您的应用程序中。请参阅主页上的发布照片示例。

同样，对于 Twitter，您将需要使用类似[Twitter4J](http://twitter4j.org/en/index.html)的 Java API 。

# ruby - 从 rest-client 调用返回的无效字符

> ID：14905874
> 
> 赞同：2
> 
> 时间：2013-02-16T01:15:31.037
> 
> 标签：ruby, character-encoding

这是我的 Ruby 脚本：

```
#!/usr/bin/env ruby
# -*- encoding : utf-8 -*-

(...)

begin
    response = RestClient.post props['server']['host'] + post_to + "?auth=" + props['server']['auth'],
            model_name => o, :content_type => :json, :accept => :json
rescue => e
    response = e.response
end

if response.code != 201
    puts "Erro ao salvar #{model_name} #{o[descriptor]}: " + response.to_str
end 
```

它工作得很好，但是，当我的模型有一些无效字段时，我返回的消息`response.to_str`应该是：

```
"{"kind":["Só é permitido uma matriz por domínio."]}" 
```

打印为：

```
"{"kind":["S\u00f3 \u00e9 permitido uma matriz por dom\u00ednio."]}" 
```

我已经检查`response.headers`过了，返回的字符集确实是`utf-8`。

如果我尝试：

```
if response.code != 201
    puts "{\"kind\":[\"S\u00f3 \u00e9 permitido uma matriz por dom\u00ednio.\"]}"
    puts "{\"kind\":[\"Só é permitido uma matriz por domínio.\"]}"
    puts response.to_str
end 
```

第一个和第二个输出打印正确，但第三个输出不正确。为什么！？

我正在使用 Ubuntu 并从 gnome 终端调用此脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:09:24.243

谢谢你，mudasobwa，你的小费帮助我解决了这个问题。

问题是我从服务器接收一个 JSON 对象：

```
"kind":["Só é permitido uma matriz por domínio."] 
```

只是打印它似乎不是正确的方法。我认为这是因为我的 Ruby 代码将这个 JSON 解析为一个数组并打印它。如果我这样做：

```
require 'mysql2'
require 'yaml'
require 'rest_client'
require 'json'

# (...)

if response.code != 201
    obj = JSON.parse(response.to_str)
    puts "Erro ao salvar #{model_name} #{o[descriptor]}: " + obj.to_s
end 
```

问题得到解决。

# windows - 如何在不关闭命令提示符窗口的情况下返回错误代码？

> ID：14905876
> 
> 赞同：28
> 
> 时间：2013-02-16T01:15:33.720
> 
> 标签：windows, batch-file, command-prompt

我正在编写一个验证几个文件的批处理文件。当其中一个文件无效时，我希望批处理脚本停止并返回错误代码 >0。下面的代码似乎可以完成这项工作，但调用“EXIT 2”会关闭运行脚本的命令提示符窗口。

```
:Validate
SETLOCAL
Validator %1
IF %ERRORLEVEL% GEQ 1 EXIT 2
ENDLOCAL 
```

关于如何在不关闭命令提示符的情况下返回错误代码的任何想法？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-16T01:28:08.663

要获得命令提示符命令的帮助，请使用它们的 /? 选项。 `Exit /?`显示：

> 退出 CMD.EXE 程序（命令解释器）或当前批处理脚本。
> 
> 退出 [/B] [退出代码]
> 
> /B 指定退出当前批处理脚本而不是 CMD.EXE。如果从批处理脚本外部执行，它将退出 CMD.EXE
> 
> exitCode 指定一个数字。如果指定了 /B，则设置 ERRORLEVEL 该数字。如果退出 CMD.EXE，则使用该编号设置进程退出代码。

所以你要

```
IF %ERRORLEVEL% GEQ 1 EXIT /B 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T01:19:35.510

您可以`pause`在调用 exit 之前使用该命令。

如果您不喜欢该消息：

```
pause > nul 
```

如果您不想关闭窗口，而只是返回命令提示符，则应使用

```
EXIT /B 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-08-22T05:55:11.117

遇到了同样的问题。如果您正在编写批处理（Windows shell 脚本）。' **cmd** ' 应该为你做。这不会退出批处理并保留在命令提示符下。解决了我的问题。例如： `cd "\view\Flex Builder 3\gcc-mvn" set path="c:\view\jdk1.7.0_02\bin";"c:\view\apache-maven-3.0.5\bin";%path% mvn sonar:sonar cmd` 执行后应保持在提示符处。

# cuda - CUDA 中所有线程的全局变量

> ID：14905879
> 
> 赞同：1
> 
> 时间：2013-02-16T01:16:08.470
> 
> 标签：cuda, boolean, global-variables

我的控制台应用程序中需要全局布尔变量，那么如何声明它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T08:37:42.713

为了声明将驻留在 CUDA 全局内存中的变量，您需要将`__device__`关键字放在它前面，例如

```
__device__ bool myGlobalBoolVar; 
```

或者，您可以在全局内存空间中分配内存`cudaMalloc`，例如

```
bool* myGlobalBoolVarPtr;
cudaMalloc(&myGlobalBoolVarPtr, sizeof(bool)); 
```

然后您可以将指针作为参数传递给内核。请注意，指针参数本身将驻留在常量或共享内存空间中（取决于架构），但它将指向全局内存。

# java - 使用 JUnit 对 Webview 进行单元测试

> ID：14905882
> 
> 赞同：2
> 
> 时间：2013-02-16T01:16:28.807
> 
> 标签：java, android, testing, junit, webview

我在使这个单元测试正常工作时遇到了一些麻烦，我似乎无法弄清楚。如果可以，请帮助检查以下代码和错误，看看它是否对您有意义。我知道这很容易，但我似乎无法让它正常工作。

我有一个问题（mError 无法解析为变量）。我做错了什么，我在 MockWebViewClient 类中创建了变量。现在，当我注释掉使用 mError 的代码行时，测试仍然可以运行。

但是现在，在运行我的测试时，我在下面的以下代码行中得到“junit.framework.AssertionFailedError”

```
assertTrue(!(mWeb.getProgress() < 100)); 
```

提前致谢。

## WebviewTest.java

```
private static final String VALID_URL = "http://www.google.com";
private static final String INVALID_URL = "http://invalid.url.doesnotexist987.com";
private static final long TIMEOUT = 5000; 
private Enlighten_Webview_Main mActivity;
private WebView mWeb;
private WebViewClient mMockWebViewClient;

// Rest of my code....

public final void testLoadValidUrl() {
        assertLoadUrl(VALID_URL);
        assertFalse(mMockWebViewClient, mError);
    }

    public final void testLoadInvalidUrl() {
        assertLoadUrl(INVALID_URL);
        assertTrue(mMockWebViewClient.mError);
    }

    private void assertLoadUrl(String url) {
        mWeb.loadUrl(url);
        sleep();

            //Added to hopefully let webview load all the way
        getInstrumentation().waitForIdleSync();

        assertTrue(!(mWeb.getProgress() < 100));            
    }

    private void sleep() {
        try {
            Thread.sleep(TIMEOUT);
        } catch (InterruptedException e) {
            fail("Unexpected timeout");
        }
    }
    public class MockWebViewClient extends WebViewClient {
        boolean mError;

        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            mError = true;
        }
    } 
```

## 编辑

我通过将`mMockWebViewClient`变量切换为正确的类型（即`MockWebViewClient`. 由于`MockWebViewClient`该类包含`mError`我需要的布尔值`testLoadValidUrl`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:20:17.333

您的方法中未定义变量“mError” `testLoadValidUrl`，可能是拼写错误。当您可能表示句号“。”时，有一个逗号“，”。用于会员访问。

即改变

```
public final void testLoadValidUrl() {
    assertLoadUrl(VALID_URL);
    assertFalse(mMockWebViewClient, mError);
} 
```

到

```
public final void testLoadValidUrl() {
    assertLoadUrl(VALID_URL);
    assertFalse(mMockWebViewClient.mError);
} 
```

# parallel-processing - GNU 并行有两个参数

> ID：14905883
> 
> 赞同：3
> 
> 时间：2013-02-16T01:16:29.973
> 
> 标签：parallel-processing, csh, gnu-parallel

我有一个 C-shell 脚本，其中有一个名为`$hosts_string`以下形式的变量：

```
host1,host2,...,hostN 
```

我还有一个名为`$chrs_string`以下形式的变量：

```
chr1,chr2,...,chrM 
```

我还有一个名为的变量`$inputFn`，它指定了我需要处理的文本文件。

我想做的是让每个主机运行一个`doStuff`对 的每个成员调用的命令`$chrs_string`，并将`$inputFn`其作为输入文件名参数。

我尝试了以下方法：

```
parallel -S $hosts_string 'doStuff {1} {2} > {1}' ::: {$chrs_string} ::: {$inputFn} 
```

如果这可行，这应该`chr1`通过`chrM`命令的输出创建文件`doStuff`，但我什么也没得到。并行完成而没有发出错误，但没有输出。

如果我不使用命令本身就可以正常工作`parallel`，所以它不是命令，而是我如何为`parallel`.

为了确认这一点，我尝试了以下方法：

```
parallel -S $hosts_string 'echo {1} {2} > {1}' ::: {$chrs_string} ::: {$inputFn} 
```

如果*这*可行，并且`$inputFn`是 (例如) `/foo/bar`，那么我将获得 (例如) 一个名为 的文件`chr1`，其中包含以下字符串：

```
chr1 /foo/bar 
```

如何调整我的命令，`parallel`以便它正确地循环遍历每个组合？`$chrs_string``$inputFn`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:30:39.410

你很亲密。您只是忘记了 ::: 与 :::: 不同

```
parallel -S $hosts_string 'echo {1} {2} > {1}' ::: {$chrs_string} :::: {$inputFn} 
```

如果您只想要 echo 中的文件名，您只需执行以下操作：

```
parallel -S $hosts_string echo '{1}' {$inputFn} '> {1}' ::: {$chrs_string} 
```

# wordpress - 链接在 wordpress 中不起作用

> ID：14905884
> 
> 赞同：0
> 
> 时间：2013-02-16T01:16:31.953
> 
> 标签：wordpress, templates, http-status-code-404

我的导航中的链接在我的 wordpress 网站上不起作用。我所做的只是上传一个自定义模板，并不是每个链接都指向 404。这没有任何意义。我检查了 .htaccess 文件，它并不表示它做错了什么。这是网址[http://www.winecountryclassicboats.com/](http://www.winecountryclassicboats.com/)有人有什么想法吗？谢谢！

# javascript - 复选框被标记，然后它将在另一个字段中提供美元金额

> ID：14905885
> 
> 赞同：-1
> 
> 时间：2013-02-16T01:16:46.510
> 
> 标签：javascript

我正在为一家细节公司创建一份车辆状况报告。在底部有带有详细信息包的复选框字段。每个描述的末尾都有一个美元金额字段。我要做的是，如果选中该复选框，它将在最后的那个字段中放置正确的美元金额。

例子

> (CB1) Silver Package `_____`< 此字段将显示 $65.00
> (CB2) Gold Package `________`< 此字段将显示 $85.00

我知道如何计算总额，但我不能说如果这个框被选中，那么这个文件将显示应付的美元金额。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:33:44.450

我认为它真的很简单。请检查这个

```
 <body>
 <script type="text/javascript">
 <!--
    function assignvalue(x, id, value)
    {
        if(x.checked)
            document.getElementById(id).value = "$" + value;
        else
            document.getElementById(id).value = "$";
    }
 //-->
 </script>
  <input type="checkbox" onclick="assignvalue(this, 'SilPack', '65.00')"><input type = "text" id = "SilPack">
  <input type="checkbox" onclick="assignvalue(this, 'GoldPack','85.00')"><input type = "text" id = "GoldPack">
 </body> 
```

复选框具有选中的属性，可以选中该属性，然后将适当的值分配给相应的文本框

# .net - 检查两个数组列表是否包含相同的元素

> ID：14905889
> 
> 赞同：0
> 
> 时间：2013-02-16T01:17:23.937
> 
> 标签：.net, vb.net, arraylist

我有两个数组列表；清单 1 和清单 2。它包含数组列表中的对象。

如何检查两个数组列表是否包含相同的元素？

我试过用equals，但它似乎总是返回false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:26:58.437

而不是使用有点弃用的`System.Collections`，你应该使用通用的对应物`System.Collections.Generic`。[这里](http://msdn.microsoft.com/en-us/library/b5bx6xee%28v=vs.80%29.aspx)描述了各种优点。

您可以创建一个通用方法来确定两个集合是否相同：

```
Private Function UnanimousCollection(Of T)(ByVal firstList As List(Of T), ByVal secondList As List(Of T)) As Boolean
    Return firstList.SequenceEqual(secondList)
End Function 
```

样品用法：

```
Dim teachers As List(Of String) = New List(Of String)(New String() {"Alex", "Maarten"})
Dim students As List(Of String) = New List(Of String)(New String() {"Alex", "Maarten"})
Console.WriteLine(UnanimousCollection(teachers, students)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:26:21.213

如果您必须使用 arraylist，您可以将它们转换为 IEnumberable，然后使用 linq 交集。

```
static bool IsSame(ArrayList source1, ArrayList source2)
{
    var count = source1.Count;
    // no use comparing if lenghts are different
    var diff = (count != source2.Count);
    if (!diff)
    {
        // change to IEnumberable<object>
        var source1typed = source1.Cast<object>();
        var source2typed = source2.Cast<object>();
        // If intersection is the same count then same objects
        diff = (source1typed.Intersect(source2typed).Count() == count);
    }
    return diff;
} 
```

# iphone - 在 iOS 中使用 AVFoundation 暂停和恢复相同文件的视频捕获

> ID：14905892
> 
> 赞同：10
> 
> 时间：2013-02-16T01:17:32.127
> 
> 标签：iphone, ios, objective-c, avfoundation, video-capture

我试图弄清楚如何实现在单个会话中重复暂停和恢复视频捕获的功能，但是使用 AVFoundation 将每个新片段（每次暂停后捕获的片段）添加到同一个视频文件中。目前，每次我按“停止”然后再次“录制”时，它只是将一个新的视频文件保存到我的 iphone 相册并开始捕获到一个单独的/新文件。我需要能够一遍又一遍地按下“录制/停止”按钮......仅在录制处于活动状态时捕获视频和音频......然后当按下“完成”按钮时，拥有一个包含所有段在一起。所有这些都需要在同一个捕获会话/预览会话中发生。

我能想到的唯一方法是按下“完成”按钮，获取每个单独的输出文件并将它们组合成一个文件......但我很确定基本上粘贴一堆单独的处理时间剪辑在一起是不可接受的。另外，看起来这将是一种非常混乱且不必要的方法，代码太多。

有什么简单的方法可以在单个会话中暂停视频捕获并简单地将捕获恢复到同一个文件？还是有其他想法？

如果不是太麻烦，示例代码会帮助我很多......我仍在自学和自学，所以我不太擅长在解释中遵循术语和术语。谢谢

编辑：这是我开始学习 AVFoundation 的项目...所以这是我希望更改以实现上述功能的代码：http: [//developer.apple.com/library/ios/#samplecode/AVCam /Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T17:53:15.030

您可以在委托中使用 and ，而不是使用捕获会话的电影文件输出`AVCaptureVideoDataOutput`，将样本传递给`AVAssetWriterInput`. 然后，您可以将预览与录制分离。如果您的委托人没有将缓冲区转发给资产编写器，则该部分没有记录。

当您想开始将第二个（和后续）会话记录到同一个文件时，您需要调整时间戳，以便它们从您停止的点开始连续，并且您需要确保您制作相同的调整音频和视频，使它们保持同步。所以有点繁琐，但肯定是可行的。

编辑：有一个[示例 iPhone 应用程序](http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html)演示了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:41:05.583

一般来说，如果我使用 AVCaptureSession，我会使用 startRunning 和 stopRunning。我假设你会的。

请参阅 AVCaptureSession 的文档。

# buffer-overflow - 缓冲区溢出堆栈防护

> ID：14905894
> 
> 赞同：0
> 
> 时间：2013-02-16T01:17:42.000
> 
> 标签：buffer-overflow

我不确定我是否在针对此特定任务的正确位置发帖。但我希望有人能帮助我。

这是关于缓冲区溢出

[http://nsfsecurity.pr.erau.edu/bom/Smasher.html](http://nsfsecurity.pr.erau.edu/bom/Smasher.html)

和：

[http://nsfsecurity.pr.erau.edu/bom/StackGuard.html](http://nsfsecurity.pr.erau.edu/bom/StackGuard.html)

你们会不会碰巧知道我怎样才能让它显示“哦，麻烦”。这是关于 Stack Guard 和 Smasher 的。

我尝试输入“D”，因为它确实提示了 ACSII 0x44，但我迷失了方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:04:45.843

制作教程太长了。正如*Computer Systems: A Programmer's Perspective*中所述，基本上您需要覆盖返回地址，以便当函数返回时（在汇编语言中`ret`），`%pc`计数器设置为某个地址（通常在堆栈上）。然后程序继续在*错误*的地址上执行，以便您执行其他操作。

您需要反汇编二进制文件并检查程序集。单步执行`gdb`or`ntsd`可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T02:01:08.000

我知道这已经很晚了，但我刚刚发现了这个。D 必须进入缓冲区溢出。例如，HELLOHOWARD 有 D 在缓冲区溢出。

# jquery - 按下回车键时 IE 重复输入字段

> ID：14905895
> 
> 赞同：1
> 
> 时间：2013-02-16T01:17:43.077
> 
> 标签：jquery, internet-explorer, click

我有以下代码

**HTML**

```
<button id="add-input">add</button>
<div id="input-container"></div> 
```

**JS**

```
$('#add-input').on('click',function () {
    $('<input type="text">').appendTo('#input-container');
}); 
```

当我单击带有 id add-input 的按钮时，一切都按预期工作。 但是，如果我关注新添加的`<input>`元素并在键盘上按 Enter，则将再次触发 click 事件。这仅在使用 IE(9) 时发生。我已经在 Chrome 和 Firefox 中对其进行了测试，它们都按预期工作。`<div>``<input>`

jsfiddle 来验证这一点：http: [//jsfiddle.net/nMhMd/](http://jsfiddle.net/nMhMd/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:38:00.780

Internet Explorer 认为您的`<button>`元素是一个提交按钮。要更改行为，请添加`type="button"`以使其认为这是正常行为。

```
<button id="add-input" type="button">add</button> 
```

# javascript - 如何在 jquery mobile 中添加自定义选择表单元素？

> ID：14905897
> 
> 赞同：1
> 
> 时间：2013-02-16T01:17:56.147
> 
> 标签：javascript, jquery, forms, jquery-mobile, select

我有一个带有选择菜单的简单表格：

```
<div data-role="page">
    <div data-role="popup" id="popupAddItem">
        <select name="select-choice" data-native-menu="false">
            <option>Select an option</option>
            <option value="a">A</option>
        </select>
    </div>
    <a href="#popupAddItem" data-rel="popup" data-role="button" data-icon="info">Add Item</a>
</div> 
```

我添加了`data-native-menu="false"`这样的下拉菜单看起来会更好，但如果表单位于弹出窗口内，它似乎不起作用。

所以如果我删除`data-role="popup"`然后自定义选择元素似乎工作，否则不行。

这是一个错误，还是我做错了什么？见[jsfiddle](http://jsfiddle.net/patrioticcow/KkJqn/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:35:20.203

我的理解是自定义选择菜单呈现为弹出窗口本身和 jQM 中的弹出窗口不能链接。

您可以使用 jQM 模式对话框而不是弹出窗口来实现类似的效果。

```
<div data-role="page">
    <a href="#popupAddItem" data-rel="dialog" data-role="button" data-icon="info">Add Item</a>
</div>
<div data-role="page" id="popupAddItem">
        <div data-role="content">
        <select name="select-choice" data-native-menu="false">
            <option>Select an option</option>
            <option value="a">A</option>
        </select>
        </div>
</div> 
```

这是[jsFiddle](http://jsfiddle.net/pmatseykanets/a7hRR/)

# eclipse - 如何在 Eclipse 的 gradle 项目中引用 maven 项目？

> ID：14905899
> 
> 赞同：0
> 
> 时间：2013-02-16T01:18:16.153
> 
> 标签：eclipse, dependencies, project, gradle

我正在使用 eclipse，我是 gradle 新手。我已经将一个 Maven 项目[OrientDB](https://github.com/nuvolabase/orientdb)导入到 Eclipse 工作区中。然后我在这个工作区中创建了一个新的 java 项目，以及一个 gradle 构建文件。

如何引用 Maven 多项目以在我自己的使用 gradle 管理的 java-eclipse-project 中使用它们？有人可以为我提供 gradle 构建文件的代码片段吗？

我试图操纵类路径，但没有奏效。

```
apply plugin: 'java'
apply plugin: 'eclipse'

eclipse {
classpath {
  file {
     beforeMerged { classpath ->
             classpath.entries.add "/orientdb"
         }

      }
    }
} 
```

认为我误解了文档，但不知道如何正确处理。

注意：我不能使用 maven 存储库中的库，因为我需要新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:41:22.170

您可以使用[文件依赖](http://www.gradle.org/docs/current/userguide/dependency_management.html#sub%3afile_dependencies)项，如下例所示。eclipse 插件应该获取这些依赖项并将其添加到 Eclipse 中项目的类路径中。

```
dependencies {
    compile fileTree(dir: 'orientdb', include: '*.jar')
} 
```

# objective-c - UIPageViewController 以编程方式翻页不会更新页面指示器

> ID：14905902
> 
> 赞同：3
> 
> 时间：2013-02-16T01:19:17.760
> 
> 标签：objective-c, ios6, uipageviewcontroller, ios6.1

当我使用类似于[此答案](https://stackoverflow.com/a/8678367/1103584)的方法以编程方式在 UIPageViewController 中翻页时，页面指示器不会更新。滑动到下一页/上一页按预期更新页面指示器。以编程方式翻页时，我需要做什么来更新页面指示器？即如何在以编程方式更改页面后设置当前“索引”，以便页面指示器知道哪个页面指示器显示为活动？

我在文档中注意到，说明如下：

> 如果实现了“支持页面指示器”中的两个方法，并且页面视图控制器的过渡样式为 UIPageViewControllerTransitionStyleScroll，则页面指示器是可见的。这两个方法都是在调用 setViewControllers:direction:animated:completion: 方法之后调用的。**在手势驱动导航之后，这些方法都不会被调用。**索引会自动更新，并且视图控制器的数量预计将保持不变。

（见上面的粗体字）

[UIPageViewController 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerDataSourceProtocolRef/UIPageViewControllerDataSource.html#//apple_ref/occ/intf/UIPageViewControllerDataSource)

这是否意味着如果你不使用手势来翻页，那么就没有办法更新 UIPageIndicators 了？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-06T00:06:01.700

您可以使用正确的页面索引实现以下数据源协议方法：

```
- (NSInteger)presentationIndexForPageViewController:(UIPageViewController *)pageViewController
{
 NSInteger currentPageIndex=0;
 //find out actual page index of the current view controller
return currentPageIndex;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:24:43.073

这意味着您正在设置一次**页数**和**第一页**，并且无法在不再次`Page Control`调用的情况下添加（或删除）页面。 它基本上是协议中定义的只写属性。`setViewControllers:direction:animated:completion:`

`DataSource`

# c++ - 标准：：向量；无法转换参数；视觉工作室 2012

> ID：14905904
> 
> 赞同：1
> 
> 时间：2013-02-16T01:19:22.267
> 
> 标签：c++, vector, visual-studio-2012, std

VS2012 x64 express edition 出现错误。相同的代码在 VS2010 下也能正常工作。我在stackoverflow上经历了很多线程，这似乎是VS2012中的一个错误。

编码：

```
typedef vector< vector<cv::Point2d> > vec_type; 
vec_type table;
table.assign( 100, 0 ); 
```

错误：

> 错误 C2664：“ `void std::vector<_Ty>::assign(unsigned __int64, const std::vector<cv::Point2d> &)`”：无法将参数 2 从“ `int`”转换为“ `const std::vector<_Ty> &`”

请任何人指出解决方案或解决此问题的方法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T01:21:57.333

`vec_type`element 是`vector<cv::Point2d>`类型，您不能分配`0`给它，解决方法可以是：

传递`vector<Point2d>`默认构造函数

```
table.assign(100, vector<Point2d>()); 
```

或使用[std::vector::resize](http://en.cppreference.com/w/cpp/container/vector/resize)获得同样的努力：

```
table.resize(100); 
```

# xaml - 调整 GridViewItems 的大小以填充 GridView？

> ID：14905907
> 
> 赞同：3
> 
> 时间：2013-02-16T01:19:41.330
> 
> 标签：xaml, windows-runtime, winrt-xaml

我有这个问题的反面： [如何动态调整 GridView 项的大小？](https://stackoverflow.com/questions/13254107/how-do-i-dynamically-size-a-gridview-item)

我有一个两行四列的 GridView。所需的行为是让 GridViewItems 填充单元格，我想不出办法来做到这一点。GridViewItem 是一个包含一些其他内容的网格，我将其作为 DataTemplate。我可以为项目提供宽度和高度，但这仅适用于一种分辨率，并且我需要项目是动态且成比例的，因此如果它们显示在不同的设备上，它们将继续为 2 行，每行 4 个项目。

在不同的页面上，我有一个布局相同的静态网格，每个单元格中都包含矩形。这些会自动拉伸，我尝试将它们的宽度和高度存储在我在 Rectangle 的 SizeChanged 上获得的 DependencyProperties 中，但我不知道如何绑定到它们。

XAML 页面是这样的：

```
 <Grid x:Name="Pane2LayoutGrid" 
                    Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="90"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <TextBlock x:Name="TitleText" Text="Favorites" Style="{StaticResource TitleBarHeader}"/>

                    <GridView x:Name="GridView" 
                        Grid.Row="1" 
                        Margin="0,10,0,8" 
                        Style="{StaticResource GridView}" 
                        ItemsSource="{Binding Items, Source={StaticResource vm}}" 
                        />

                </Grid> 
```

和数据模板：

```
 <DataTemplate>
                <Grid>

                    <Border x:Name="Border" Style="{StaticResource GridBorder}">

                        <Grid x:Name="grid" Style="{StaticResource Grid}" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1.3*"/>
                                <ColumnDefinition Width="2*"/>
                            </Grid.ColumnDefinitions>
                            <!-- rows for alignment -->
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="3*"/>
                                <RowDefinition Height="1*"/>
                            </Grid.RowDefinitions>
                            <TextBlock x:Name="Text1" Grid.Row="1" Text="{Binding Title}" Style="{StaticResource Title}" />
                            <TextBlock x:Name="Text2" Grid.Row="1" Text="{Binding Subtitle}" Style="{StaticResource SubTitle}" />
                        </Grid>

                    </Border>
                </Grid>
            </DataTemplate> 
```

![所需的gridviewitems布局](../Images/13386f40ab9aea48d7404e5341713219.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:18:28.443

我的队友 Dwayne 有解决方案，但我们花了一段时间才弄清楚。

*   为 GridViewItem 的所需宽度和高度创建 DependencyProperties。
*   在其 SizeChanged 事件上测量 GridView 的大小。（我们的问题是试图获得一个不为零的值——其他事件不会在正确的时间呈现面板。）
*   将 ItemContainer WrapGrid 的 ItemWidth 和 ItemHeight 绑定到这些 DependencyProperties。在 DataTemplate 中设置宽度和高度将不起作用。

其中一个问题是一堆单独的小块需要缝合在一起。

# javascript - 当我单击时，jQuery 没有返回正确的 ID

> ID：14905908
> 
> 赞同：0
> 
> 时间：2013-02-16T01:19:44.327
> 
> 标签：javascript, jquery

我使用 PHP 来显示来自数据库的一些结果。

```
while ($row = $stmt->fetch()) {
print "
   <tr id = '".$row[0]."' class = 'fila'>
         <td><input type='checkbox' name='checkboxx[]' value = '".$row[0]."'</td>
         <td>".$row[1]."</td>   
         <td>".$row[3]."</td>
         <td>".$row[4]."</td>
    </tr>
";
} 
```

使用 jQuery，如果单击它，我想显示每行 (TR) 的 ID。

我有这个代码。

```
$(document).ready(function(){
    $(".fila").click(function(){
       var id = $('.fila').attr('id');
        alert(id);
    });
}); 
```

**问题**：点击不同行时总是显示相同的ID，实际上我查看源代码，每个TR都有它的ID，因为它们是从DB中选择的，所以它们是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:20:41.330

```
 var id = $('.fila').attr('id'); 
```

应该

```
 var id = $(this).attr('id'); 
```

否则，您不会在正确的行上进行操作。`$('.fila')`选择**所有**行，而不是您要附加`click`到的行。

如果您使用`$(this)`，它会提醒自己的 id，在这种情况下，它本身就是您刚刚单击的正确行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:20:45.730

改成这个...

```
$(document).ready(function(){
    $(".fila").click(function(){
       var id = $(this).attr('id');
       alert(id);
    });
}); 
```

`$(this)`是单击事件处理程序中被单击的元素。

你也可以用这个...

```
$(document).ready(function(){
    $(".fila").click(function(){
       var id = this.id;
       alert(id);
    });
}); 
```

它不依赖 jQuery 来获取被点击元素的 id。他们都达到了相同的结果，但第二个“稍微”更有效率。

# android - 视图体积/视锥体和视口之间的区别？

> ID：14905910
> 
> 赞同：0
> 
> 时间：2013-02-16T01:20:09.860
> 
> 标签：android, graphics, opengl-es

相机视图体积/视锥体与视口之间的 Open GL ES 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:04:52.247

这是一个解释得很好的链接.. [http://code.google.com/p/libgdx/wiki/GraphicsFundamentalsViewport](http://code.google.com/p/libgdx/wiki/GraphicsFundamentalsViewport)

这是我的想法..即使我对opengl不太了解...

视口是...类似于您家的窗户，您只会看到窗户可以让您看到外面的世界...换句话说...世界很大但窗户只能让您看到一小部分它...

体积/截锥体是......就像链接所说......你只能看到这个体积的边界......只有这个体积内的对象被渲染......

例如，如果您的场景中有一条火车轨道..并且您想要为火车离开制作动画..从技术上讲，火车可以继续行驶..直到它变成一个小点并且只占用一个像素左右。但是您不想这样做..（类似于游戏）..它会消失在云/灰尘/隐藏在建筑物或其他物体后面...这样它就不会在用户所在的计算机上占用太多内存别管它了。。

# .htaccess - 禁止没有扩展名的文件

> ID：14905911
> 
> 赞同：0
> 
> 时间：2013-02-16T01:20:12.717
> 
> 标签：.htaccess, robots.txt

我目前正在使用 htaccess 执行此操作

```
RewriteRule ^view$ view.php [L] 
```

我链接到`/view`没有扩展名，它工作正常。但是如何禁用机器人索引`/view`？在`robots.txt`我放的

```
Disallow: /view.php
Disallow: /view 
```

当我进入网站管理员工具并以谷歌的身份获取时。我可以获取`mydomain.com/view`，这不应该发生，但是当我尝试获取`mydomain.com/view.php`它时说被 robots.txt 阻止了，这很好。

如何阻止`/view`机器人访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:15:37.210

线

```
Disallow: /view 
```

应该阻止以下 URL：

*   `example.com/view`
*   `example.com/view/`
*   `example.com/view/foobar`
*   `example.com/view.php`
*   `example.com/viewer`

如您所见，您根本不需要`Disallow: /view.php`。

所以似乎有一个不同的问题。这是最近的变化吗？也许 Google 缓存了您的 robots.txt 的旧变体。我不知道这个抓取工具，但也许问题与重定向有关？我猜应该将 Google 抓取工具重定向到`/view.php`.

# c# - 调用存储过程时处理 SQL 注入的最佳实践

> ID：14905917
> 
> 赞同：4
> 
> 时间：2013-02-16T01:20:27.070
> 
> 标签：c#, .net, sql-server, stored-procedures, sql-injection

我继承了正在修复安全漏洞的代码。调用存储过程时处理 SQL 注入的最佳实践是什么？

代码类似于：

```
StringBuilder sql = new StringBuilder("");

sql.Append(string.Format("Sp_MyStoredProc '{0}', {1}, {2}", sessionid, myVar, "0"));

using (SqlConnection cn = new SqlConnection(ConfigurationManager.ConnectionStrings["Main"].ToString()))
{
    cn.Open();
    using (SqlCommand command = new SqlCommand(sql.ToString(), cn))
    {
        command.CommandType = CommandType.Text;
        command.CommandTimeout = 10000;
        returnCode = (string)command.ExecuteScalar();
    }
} 
```

我只是用常规的 SQL 查询做同样的事情并使用`AddParameter`正确的添加参数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T01:22:18.213

问：处理 SQL 注入的最佳实践是什么？

A. 使用[参数化查询](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx)

例子：

> ```
> using (SqlConnection connection = new SqlConnection(connectionString))
> {
>     // Create the command and set its properties.
>     SqlCommand command = new SqlCommand();
>     command.Connection = connection;
>     command.CommandText = "SalesByCategory";
>     command.CommandType = CommandType.StoredProcedure;
> 
>     // Add the input parameter and set its properties.
>     SqlParameter parameter = new SqlParameter();
>     parameter.ParameterName = "@CategoryName";
>     parameter.SqlDbType = SqlDbType.NVarChar;
>     parameter.Direction = ParameterDirection.Input;
>     parameter.Value = categoryName;
> 
>     // Add the parameter to the Parameters collection.
>     command.Parameters.Add(parameter);
> 
>     // Open the connection and execute the reader.
>     connection.Open();
>     SqlDataReader reader = command.ExecuteReader();
>     .
>     .
>     .
> } 
> ```

# ios - iOS Facebook 通过 HTML 连接

> ID：14905926
> 
> 赞同：0
> 
> 时间：2013-02-16T01:21:57.827
> 
> 标签：ios, facebook, connect

我想知道是否有可能通过应用程序中的 Web 窗口连接的网页能够使用 iOS facebook 连接。所以用户不必输入他们的登录设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:42:47.870

不，这是不可能的。

在您的应用程序中创建新的 UIWebView 将不包含来自其“常规”移动浏览器的 HTTP cookie，因此他们必须输入其登录凭据。

最好的办法是使用[Facebook 的 iOS SDK](https://developers.facebook.com/ios/)。

# android - 在android中使用外部GPS项目

> ID：14905929
> 
> 赞同：0
> 
> 时间：2013-02-16T01:22:31.690
> 
> 标签：android, google-maps, gps, location

我在我的项目中使用 novoda ( [https://github.com/novoda/Novocation](https://github.com/novoda/Novocation) ) 外部位置 jar，我将更新间隔设置为半分钟，并且我使用地图中的定位器类来显示用户位置，因此，在尝试在外面使用应用程序时，我可以在地图上获得我的第一个位置，但之后它似乎不再“跟踪”我的位置 - 即用户覆盖不会根据给定时间重新定位其在地图上的位置间隔（30 秒） - 有人使用同一个项目并有建议吗？这是我的代码：

```
package com.mappermate.ui.phone;

import java.util.List;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
    import android.graphics.drawable.Drawable;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
    import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.Overlay;
import com.novoda.location.Locator;
import com.novoda.location.exception.NoProviderAvailable;
import com.readystatesoftware.maps.OnSingleTapListener;
    import com.readystatesoftware.maps.TapControlledMapView;
import com.mappermate.R;
import com.mappermate.application.MappermateApp;
import com.mappermate.logic.config.MappermateConfig;
import com.mappermate.logic.gps.GPSTracker;
import com.mappermate.logic.mapmenu.MapSearchMenu;
import com.mappermate.logic.mapoverlays.CustomItemizedOverlay;
import com.mappermate.logic.mapoverlays.CustomOverlayItem;
import com.mappermate.logic.mapoverlays.SimpleItemizedOverlay;
import com.mappermate.logic.mapoverlays.UserItemizedOverlay;
import com.mappermate.logic.mapoverlays.UserOverlayItem;
import com.mappermate.logic.net.AlertDialogManager;
import com.mappermate.logic.net.ConnectionDetector;

public class MyLocationActivity extends MapActivity implements LocationListener{

private TapControlledMapView m_MapView; // use the custom
                                        //     TapControlledMapView
private List<Overlay> m_MapOverlays;
Drawable redCircle;
Drawable greenCircle;
CustomItemizedOverlay<CustomOverlayItem> itemizedOverlayWithPicture;
SimpleItemizedOverlay itemizedOverlayWithoutPicture;
/**
 * Added after original
 */
// Checkers to validate user have an open network connection
// And an active GPS
private ConnectionDetector m_ConnectionDetector;
private AlertDialogManager m_Alert = new AlertDialogManager();

// User overlay
private double m_UserLongitude;
private double m_UserLatitude;
private Drawable m_UserLocationMarker;
private GeoPoint m_UserGeoPoint;
private UserOverlayItem m_UserOverlayItem;
private UserItemizedOverlay m_UserItemizedOverlay;

// Class variables
private static ImageButton m_MapMenuButton;
private GPSTracker m_GPS;
private boolean m_WorkOffline;
private final static int ZOOM_LEVEL = 17;
private MapController m_MapController;
private static final int USER_OVERLAY = 0;
private static final int PLACES_OVERLAY = 1;
private MapSearchMenu m_MapSerachMenu;
private final int TRANSPERENT = 150;
private final int OPAQUE = 255;
private View m_View;
// Added those for locator jar file
Locator m_Locator;
MappermateApp m_MappermateApp;

@Override
public void onCreate(Bundle savedInstanceState) {

    // Inflate the map with the given xml and return to saved instance in
    // Case there is such one
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);

    // Get the reference to the locator object
    m_MappermateApp = (MappermateApp) getApplication();
    m_Locator = m_MappermateApp.getLocator();

    // Initiate class fields
    InitiateMapFields();

    // Get the map and set the zoom controls to on
    m_MapView = (TapControlledMapView) findViewById(R.id.mapview);
    m_MapView.setBuiltInZoomControls(false);

    // Get the map overlays - to place objects on
    m_MapOverlays = m_MapView.getOverlays();

    // Place user on map
    initUserLocationOnMap();

    if (savedInstanceState == null) {
        m_MapController = m_MapView.getController();
        m_MapController.setZoom(ZOOM_LEVEL);
        if (m_UserGeoPoint != null) {
            m_MapController.animateTo(m_UserGeoPoint);
        }
    } else {
        // restoring focused state of overlays
        int focused;
        focused = savedInstanceState.getInt("focused_1", -1);
        if (focused >= 0) {
            itemizedOverlayWithPicture.setFocus(itemizedOverlayWithPicture
                    .getItem(focused));
        }
        focused = savedInstanceState.getInt("focused_2", -1);
        if (focused >= 0) {
            itemizedOverlayWithoutPicture
                    .setFocus(itemizedOverlayWithoutPicture
                            .getItem(focused));
        }
    }
}

/***********************************************************
 *********************************************************** 
 **************** Initiate Class Members *******************
 *********************************************************** 
 ***********************************************************/
private void InitiateMapFields() {
    // Init the classes
    m_ConnectionDetector = new ConnectionDetector(getApplicationContext());
    m_GPS = new GPSTracker(MyLocationActivity.this);

    // Set the map buttons images their listeners
    m_MapMenuButton = (ImageButton) findViewById(R.id.show_map_menu);
    m_MapMenuButton.setAlpha(TRANSPERENT);
}

/*******************************************
 ****************************************** 
 ******** User overlay methods ************
 ****************************************** 
 ******************************************/

private void initUserLocationOnMap() {
    // User overlay on map
    m_UserLocationMarker = getResources().getDrawable(
            R.drawable.user_location);
    m_UserItemizedOverlay = new UserItemizedOverlay(m_UserLocationMarker,
            m_MapView);

    // set OS behavior attributes for overlay
    m_UserItemizedOverlay.setShowClose(true);
    // m_UserItemizedOverlay.setShowDisclosure(true);
    m_UserItemizedOverlay.setSnapToCenter(true);
}

/**
 * Add the current user location to the map
 * 
 * @param i_GeoPoint
 *            - The user current location
 */
public void addUserLocationAndInvalidate(GeoPoint i_GeoPoint) {
    m_MapOverlays = m_MapView.getOverlays();
    if (m_MapOverlays.contains(m_UserItemizedOverlay)) {
        m_MapOverlays.remove(m_UserItemizedOverlay);
    }
    m_UserOverlayItem = new UserOverlayItem(i_GeoPoint);
    m_UserItemizedOverlay.addOverlay(m_UserOverlayItem);
    m_MapOverlays.add(m_UserItemizedOverlay);
    m_MapView.invalidate();
    m_MapController.animateTo(i_GeoPoint);
    Toast.makeText(this, "Changed", Toast.LENGTH_SHORT)
    .show();
}

/************************************************************************
 ************ Default inherited methods and menu methods ****************
 ************************************************************************/

// Saving state of overlays
@Override
protected void onSaveInstanceState(Bundle i_OutState) {
    super.onSaveInstanceState(i_OutState);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
}

@Override
public void onResume() {
    super.onResume();
    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction(MappermateApp.LOCATION_UPDATE_ACTION);
    registerReceiver(m_FreshLocationReceiver, intentFilter);
    try {
        m_Locator.startLocationUpdates();
    } catch (NoProviderAvailable i_NoProviderAvailable) {
        Toast.makeText(this, "No provider available", Toast.LENGTH_LONG)
                .show();
        m_UserGeoPoint = getLastKnownLocation();
    }
}

private GeoPoint getLastKnownLocation() {
    GeoPoint geopoint = null;
    Location location;
    long bestTime = -1;
    boolean hasResult = false;
    LocationManager locationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);
    List<String> providers = locationManager.getAllProviders();
    if (providers != null) {
        for (String provider : providers) {
            location = locationManager.getLastKnownLocation(provider);
            if (location != null) {
                hasResult = true;
                if (location.getTime() > bestTime) {
                    geopoint = new GeoPoint(
                            (int) (location.getLatitude() * 1E6),
                            (int) (location.getLongitude() * 1E6));
                    bestTime = location.getTime();
                }
            }
        }
    }

    if (hasResult)
        return geopoint;
    return null;
}

public BroadcastReceiver m_FreshLocationReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        m_UserLatitude = m_Locator.getLocation().getLatitude();
        m_UserLongitude = m_Locator.getLocation().getLongitude();
        m_UserGeoPoint = new GeoPoint((int) (m_UserLatitude * 1E6),
                (int) (m_UserLongitude * 1E6));
        addUserLocationAndInvalidate(m_UserGeoPoint);
    }
};

@Override
public void onPause() {
    unregisterReceiver(m_FreshLocationReceiver);
    m_Locator.stopLocationUpdates();
    super.onPause();
}

@Override
public void onLocationChanged(Location location) {
    addUserLocationAndInvalidate(new GeoPoint(
            (int) (location.getLatitude() * 1E6),
            (int) (location.getLongitude() * 1E6)));
}

@Override
protected void onDestroy() {
    super.onDestroy();
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
public void onProviderDisabled(String provider) {}

@Override
public void onProviderEnabled(String provider) {}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {}
} 
```

# cakephp - 在 CakePHP 中按两个字段的平均值排序

> ID：14905933
> 
> 赞同：1
> 
> 时间：2013-02-16T01:22:48.447
> 
> 标签：cakephp, sorting

所以我有一个包含两个字段的模型：customer_rating 和 official_rating。我显然可以按其中一个排序。我很好奇：在进行查找时，是否有一种干净的方法可以按这两个字段的平均值进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:14:25.090

我建议保留另一个字段“avg_rating”并通过模型上的“afterSave()”填充它。它保持最新，您不需要不断地进行过多的 MySQL 计算。

应该让你的生活更轻松，因为你可以像在那个时候处理任何其他价值一样处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:02:36.183

Use [virtualFields](http://book.cakephp.org/2.0/en/models/virtual-fields.html)

```
$this->Model->virtualFields['sum_field'] = 'Model.field_1 + Model.field_2';
$this->Model->find('all', array(
    'order' => array(
        'Model.sum_field'
    )
)); 
```

# c++ - 是 char 空终止符是否包含在长度计数中

> ID：14905937
> 
> 赞同：46
> 
> 时间：2013-02-16T01:24:00.833
> 
> 标签：c++, c

```
#include <stdio.h>

int main(int argc, char *argv[]) {
   char s[]="help";
   printf("%d",strlen(s));  
} 
```

为什么上面的输出是 4，那不是 5 是正确的答案吗？

它应该是 'h','e','l','p','\0' 在内存中..

谢谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-16T01:27:07.080

`strlen`：返回给定字节字符串的长度，不包括空终止符；

```
char s[]="help";
strlen(s) should return 4. 
```

`sizeof`：返回给定字节字符串的长度，包括空终止符；

```
char s[]="help";
sizeof(s) should return 5. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-16T01:25:14.847

`strlen`计数元素直到它到达空字符，在这种情况下它将停止计数。它不会包含在长度中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-16T01:28:29.363

`strlen()`不计算数组中的字符数（事实上，这甚至可能是不可知的（如果你只有一个指向内存的指针，而不是数组）。正如你所发现的，它确实计算了最多但不包括空字符的字符。考虑`char s[] = {'h','i','\0','t','h','e','r','e'};`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T01:25:23.523

是4。

strlen() 计算最多但不包括值为 0 的第一个字符的字符数 - nul 终止符。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-16T03:44:01.230

`strlen(const char* ptr)`通过计算从开始直到达到零的非零元素来返回字符串的长度。所以`'\0'`不算。

对于此类问题，我建议您参考参考[链接](http://www.cplusplus.com/reference/cstring/strlen/)。

它明确表示为：

```
 A C string is as long as the number of characters between the beginning 
 of the string and the terminating null character (without including the
 terminating null character itself). 
```

# javascript - JavaScript 序列化无法正常工作

> ID：14905938
> 
> 赞同：0
> 
> 时间：2013-02-16T01:24:02.677
> 
> 标签：javascript, jquery, ajax

我目前正在尝试将 ajax 与 jQuery 一起使用，但是有一行代码不想工作。我将在下面显示我收到的错误：

> TypeError: $(...).searialize 不是函数

有错误的行是：

```
 var info = $(this).searialize(); 
```

这是代码：

```
$(document).ready(function() {

  $("#SearchField").submit(function(e) {

    e.preventDefault();

    // grabs all post variables in the form
    var info = $(this).searialize();

    $.post('dictionary.php', info, function(data) {

    $('.DictionaryContentWrapper').append(data);

    });

    // prevent server from refreshing page
    return false;

  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:26:43.667

```
$(document).ready(function() {

  $("#SearchField").submit(function(e) {

    e.preventDefault();

    // grabs all post variables in the form
    var info = $(this).serialize(); //not searialize

    $.post('dictionary.php', info, function(data) {

    $('.DictionaryContentWrapper').append(data);

    });

    // prevent server from refreshing page
    return false;

  });
}); 
```

# objective-c - Objective-c 中的 DAO 模式？

> ID：14905940
> 
> 赞同：1
> 
> 时间：2013-02-16T01:24:07.587
> 
> 标签：objective-c, sqlite, ios5, datasource

如何在 Objective-C 中实现对数据的访问？

我在谷歌上搜索 DAO + Objective-C 并没有太多结果，所以我相信这不是完成数据访问的方法。

我的数据存储在 sqlite 数据库中。我对 UITableView 数据源和委托有一些经验，但我想拥有我的“DAO”。

我应该创建一个协议 - 委托来访问我的数据吗？如果是这样，我的委托方法应该是实例方法还是类方法？ETC？

你知道任何关于在 iOS 中创建类来访问数据的好资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:09:42.493

有几个选择：

> 1) 使用 sqlite3 提供的 c 包装器。如果你擅长 C 或者如果你仔细阅读，这可能是一个不错的选择。 [http://www.sqlite.org/docs.html](http://www.sqlite.org/docs.html) 这是一本非常好的关于 sqlite 的书，其中有一章关于在 iOS 中使用 sqlite：SQLite 权威指南，第二版 作者：Grant Allen；Mike Owens 出版商：Apress Pub。日期：2010 年 11 月 30 日印刷 ISBN：978-1-4302-3225-4 网络 ISBN：1-4302-3225-0 印刷版页数：367
> 
> 2) 使用核心数据。如果您不需要直接访问 sqlite 数据库（执行 sql 查询等），这是一个特别好的选择。[http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)
> 
> 3) 使用 FMDB 之类的数据库包装器（从 gi​​thub 获取）

# c - (C) 短整型变量中的位移/字符放置

> ID：14905941
> 
> 赞同：0
> 
> 时间：2013-02-16T01:24:14.463
> 
> 标签：c, hex, byte

C的新手。

这里的总体目标是将一个字符放入一个短整数中，并让它占据短整数的左字节而不是右字节。详细说明 -

我正在尝试使用一个变量：

```
unsigned short int packager; 
```

（short int 为 2 个字节。）

并将此字符放入其中：

```
unsigned char temp = A; 
```

（二进制中的 A 是 01000001。）

那么，这是如何做到的呢？我希望短 int 看起来像这样：

0100 0001 0000 0000

我目前的想法是使用十六进制值。如果我可以说类似 `packager = 0x(temp)`or 0x(temp) 并附加一个 0？（idk ..）然后使用移位或掩蔽..我也许可以到达某个地方。最大的障碍似乎是我无法使用变量来生成十六进制值。同样，总体目标是将一个字符放入一个短整数中，并让它占据短整数的左字节而不是右字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T01:27:07.273

只需使用

```
packager = A << 8 
```

请注意，谈论左右字节是一个坏习惯。而是使用高和低。左右可能被某些人解释为依赖于地址顺序，因此依赖于字节序（除非你真的想要与地址顺序有关）。

# c# - SqlDataAdapter 和 SqlDataReader

> ID：14905945
> 
> 赞同：1
> 
> 时间：2013-02-16T01:25:03.583
> 
> 标签：c#

我有一个存储过程，它返回一定数量的行。

案例 1：当我使用 SqlDataAdapter

```
SqlDataAdapter sdAdapter = new SqlDataAdapter();
ds = new DataSet();
sdAdapter.SelectCommand = myCommand;
sdAdapter.Fill(ds);
int recordCount = ds.Tables[0].Rows.Count; 
```

案例 2：当我使用 SqlDataReader

```
SqlDataReader reader = myCommand.ExecuteReader();
if (reader.HasRows)
{
   while (reader.Read())
    {
     recordCount++;
    }
 } 
```

在案例 1 中，recordCount 为 15，这是正确的。

在案例 2 中，由于某种原因，reader.HasRows 返回 false。

我在语法方面做错了吗？我确信 myCommand 已经正确构建，因为我确实得到了案例 1 中的计数。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:36:55.303

1.DataReader 工作在连接的环境中，而DataSet 工作在断开的环境中。2.DataSet 表示由任意数量的相互关联的DataTable 对象组成的内存中数据缓存。DataTable 对象表示内存中数据的表格块。

更多详细信息，请访问[sqldataadapter 或 sqldatareader](http://deepakgoelblog.blogspot.de/2012/06/difference-between-sqldataadapter-or.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:08:01.013

`if (reader.HasRows)`是多余的。当你说`while (reader.Read())`时，它只会在有任何行时循环。此外，[此链接](https://stackoverflow.com/questions/197220/sqldatareader-hasrows-returns-false-since-sql-2008-upgrade)将解释 HasRows 需要可滚动光标。[在此处](http://msdn.microsoft.com/en-us/library/ms172375.aspx)阅读有关游标的信息。

# c++ - C/C++ 处理程序 SIGFPE 是什么？

> ID：14905947
> 
> 赞同：7
> 
> 时间：2013-02-16T01:25:13.193
> 
> 标签：c++, signals, sigfpe

好吧，我搜索了有关 SIGFPE 的文章，然后我写了一些测试，但它的行为很奇怪。然后我不得不把它贴在这里寻求帮助。GCC/G++ 或 ISO C++ 是否明确定义了如果除以零会发生什么？

1）我搜索了文章： [除以零不会抛出 SIGFPE](https://stackoverflow.com/questions/7267838/division-by-zero-does-not-throw-sigfpe) 它与输出相同的是 inf

2）如果我将其重写如下：

```
void signal_handler (int signo) {
    if(signo == SIGFPE) {
      std::cout << "Caught FPE\n";
    }
}

int main (void) {
  signal(SIGFPE,(*signal_handler));

  int b = 1;
  int c = 0;
  int d = b/c;
  //fprintf(stderr,"d number is %d\n,d);
  return 0;
} 
```

然后 signal_handler 不会发生。但是如果我取消注释该行

```
//fprintf(stderr,"d number is %d\n,d); 
```

然后 signal_handler 继续调用。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T01:38:42.777

这很有趣：通过`fprintf`注释掉，编译器确定计算结果：`d = b/c`是未使用的局部表达式，可以优化掉。

很明显，它在执行过程中并不是没有副作用的，但是编译器在这个阶段无法确定任何关于运行时环境的信息。我很惊讶静态分析在现代编译器中没有将其作为警告（至少）。

@vonbrand 是对的。您对在（异步）信号处理程序中所做的事情感到很幸运。

* * *

**编辑：**当您说“signal_handler 不断调用”时，您的意思是它无限期地重复吗？如果是这样，则可能存在底层系统调用重新启动的问题。尝试：（`siginterrupt(SIGFPE, 1);`假设它可用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T01:35:41.653

信号处理程序中只允许进行少数操作，并且使用任何缓冲 I/O（`std::cout`等，而且`fprintf(3)`，顺便说一句，我不知道它是否与前一个混合良好）是不可能的。请参阅`signal(7)`限制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-19T02:41:43.343

为什么 signal_handler 不会发生：编译器优化杀死了未使用结果的除法。

为什么 signal_handler 一直在调用：从信号处理程序返回后，FPE 重新执行相同的指令。您可以通过使用 longjmp 来避免它。

这是我为此目的而运行良好的代码（至少在 Mac OS X 上） [https://github.com/nishio/learn_language/blob/master/zero_division/zero_division.cpp](https://github.com/nishio/learn_language/blob/master/zero_division/zero_division.cpp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T03:40:31.517

> GCC/G++ 或 ISO C++ 是否明确定义了如果除以零会发生什么？

就标准而言，除以零是未定义的行为，任何事情都可能发生。

在实践中，即使标准说它是 UB，它实际上是在操作系统（而不是语言/编译器）级别实现定义的。在 POSIX 上，这确实会生成一个 SIGFPE，在 Windows 上它会抛出一个异常（Windows 的 SEH 异常，而不是 C++ 异常，即使某些编译器另外将 SEH 映射到 C++ 异常）等等。

> 如果我取消注释该行`//fprintf(stderr,"d number is %d\n,d);`，则 signal_handler 会继续调用。有人可以解释一下吗？

正如其他人所说，这是因为编译器检测到`d`从未使用过并优化计算（以及很可能的`b`和`c`定义）。发生这种情况是因为语言无法预见会发生什么（记住，它是 UB），所以它不妨假设什么都没有发生。

# flash - Flex和Flash pro开发移动应用的区别

> ID：14905952
> 
> 赞同：0
> 
> 时间：2013-02-16T01:25:36.553
> 
> 标签：flash, apache-flex, air

我正在尝试学习如何使用 Flash 在 Android 上开发应用程序。在我看来，Flex 和 Flash Pro CS6 都可以做到。那么两者有什么区别呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:47:15.767

Flex（本质上）是一个用于构建富 Internet 应用程序的大型 ActionScript 3 库（尽管您可以将它用于您喜欢的任何事情，例如游戏）。Flex 提供了一系列可样式化和可扩展的组件，这些组件比您在 Flash Pro 中获得的组件要好得多，而且还有更多 - 太多了，无法在此处列出。

要正确使用 Flex，您需要一些 ActionScript 3 知识 - 大多数事情都是通过代码完成的，并且没有时间线。

Flex 应用程序通常是“代码繁重”，并且使用 Flash Builder（或其他类似的 IDE）创建，因为 Flash Pro 的编码功能很差，并且不适合（恕我直言）大型项目。

# django - Django ORM 问题 - pk 的 objects.get() 有时无法在 DB 中找到对象

> ID：14905956
> 
> 赞同：1
> 
> 时间：2013-02-16T01:25:55.023
> 
> 标签：django, rabbitmq, django-orm

我们有一个 Django 应用程序，它在数据库中创建一个带有一些基本默认和初始信息的存根对象，然后将一条消息放到 Rabbit MQ 上以执行填充此存根对象数据所需的 IO 繁重工作。我们有一个单独的 rabbit MQ 消费者，它作为命令行脚本运行（由 daemontools 包装 - 所以它不会关闭），它处理来自 rabbit MQ 的消息。

所以这就是发生的事情 - 有时，当消息返回（此消息具有存根对象 ID）并且我们尝试使用 StubObject.objects.get(pk=message['ID']) 读取此对象时，我们会得到一个匹配的查询不存在异常（消息通常需要大约 30 秒才能返回）。但是，当我们检查数据库时，当我们得到查询不存在异常时，对象的数据肯定存在。这种情况大约在我们处理消息的 5 次中发生一次。我们不知道为什么会发生这种情况，并正在努力解决这个问题。特别奇怪的是它有时会失败。有任何想法吗？

我们尝试打印 connection.queries 但没有打印输出。

尝试保存的 rabbit MQ 消费者在标准 django python 文件之外运行，因此我们需要导入一堆东西以使其能够访问 ORM（不确定问题是否与我们如何执行此操作有关）。下面的代码：

```
#!/usr/bin/env python
import sys
import os
sys.path.append('/myproject')
os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'

from django.db import connection
from django.core import serializers
from django.core.management import setup_environ
from register_obj.models import Obj
from myproject import settings
import datetime
import json
import pika

setup_environ(settings)

conn = pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))
channel = conn.channel()

print '[*] Waiting for responses. To exit press CTRL+C'

def callback(ch, method, properties, body):
    print "[x] Received %r" % (body,)
    objDict = json.loads(body)
        print objDict
    try:
        obj = Obj.objects.get(pk=objDict["id"])
        print connection.queries
    except Exception, e:
        print datetime.datetime.now()
        print "Error occurred, could not find obj by ID - "
        print objDict["id"]
        print e
        print '################Query##############'
        print connection.queries

    obj.updateDict(objDict)

    # Save the obj data
    obj.save()

channel.basic_consume(callback,
        queue='myQueue',
        no_ack=True)

channel.start_consuming() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:36:01.567

通常，这是由于 Django 应用程序提交事务和队列使用者之间的竞争条件。

最有可能的是，您正在运行设置为自动将每个请求包装在事务中的 Django 应用程序。即，它开始一个事务，执行所有数据库操作，然后在处理请求并将其发送回浏览器后提交（或者如果有任何抛出异常则回滚）。在那里的某个地方创建你的存根对象，然后使用该存根的 id 将任务放入队列中。当队列为空时问题就来了，因此您的消费者立即获得任务。同时，在 Django 端完成其余请求时有一点延迟（即使只是将字节通过线路发送到浏览器并关闭连接也可能需要一段时间）并且事务仍然打开。在事务关闭之前，数据库中该对象的行将不可用于其他事务，例如您的消费者。

解决方案是为将任务放入队列并在将其放入队列之前提交的视图切换到手动事务处理。

它看起来像这样：

```
from django.django.db import transaction

@transaction.commit_manually
def some_view(request):
    try:
        # do some work...
        stub = Obj.objects.create(...)
    except:
        transaction.rollback()
        raise
    else:
        transaction.commit()
        add_task_to_queue(obj_id=stub.id)
        # finish serving request
        ... 
```

当然，一旦您手动处理事务，您需要非常小心，始终提交或回滚您打开的任何事务。

# matlab - 使用 Matlab 的牛顿法

> ID：14905960
> 
> 赞同：-2
> 
> 时间：2013-02-16T01:26:36.197
> 
> 标签：matlab

我为牛顿算法编写了以下代码，以通过使用两个不同的起点来最小化错误。它们不应位于误差函数轮廓的椭圆的主轴上。

```
R=[0.5 -0.25;-0.25 0.5];
P=[0;-0.866];
Pt=transpose(P);
Rinv=[2.67 1.33;1.33 2.67];
M=6;  %number of iterations
mu=1/2;  %step size
for k=1:M
    W(1)=1.16; %initial weight value
    W(2)=2.32;
    G(k)=2*R*W(k)-2*P;
end
for k=2:M
    W(1)=1.16;
    W(2)=2.32;
    W(k+1)=W(k)-mu*Rinv*G(k);
end
for k=1:M
    Wtrans(k)=trans(W(k));
    E(k)=Wtrans(k)*R*W(k)-2*Pt*W(k)+2;   % error function.
end
plot(E(k)); 
```

有人可以告诉我这段代码有什么问题吗？我无法绘制它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:32:26.527

当您到达代码的最后一行时，k 不是您想象的 1:M，而只是标量值 M。使用 plot(E) 而不是 plot(E(k))

# python - 确定（几乎）就地计算的处理顺序

> ID：14905967
> 
> 赞同：2
> 
> 时间：2013-02-16T01:27:31.140
> 
> 标签：python, algorithm, permutation, in-place

我有一个`i`频道图像，`image`. 我也有`f`过滤器，`filters`可以应用于频道。我想通过有选择地将过滤器应用于图像的通道来生成`o`通道图像。`output`我目前用两个列表定义了这个，`image_idx`并且`filter_idx`，因此处理完成为

```
for j in xrange(o) :
    output[j] = filter[filter_idx[j]](image[image_idx[j]]) 
```

因为图像可能非常大，我可能想就地进行此处理。这可能需要按特定顺序处理通道，以避免覆盖您稍后需要的数据。我目前正在检查是否存在这样的订单，并使用以下函数对其进行计算：

```
def in_place_sequence(indices) :
    """
    Figure out a processing sequence for in-place computation.
    """
    indices = [j for j in indices]
    positions = set(range(len(indices)))
    processing_order = []
    change = True
    while change and len(positions) :
        change = False
        for j in list(positions) :
            val = indices[j]
            if (j not in indices) or (indices.count(val) == 1 and val == j) :
                indices[j] = None
                positions.remove(j)
                processing_order.append(j)
                change = True
    if len(positions) :
        return None
    return processing_order 
```

例如：

```
In [21]: in_place_sequence([4, 0, 3, 0, 4])
Out[21]: [1, 2, 3, 0, 4] 
```

避免覆盖的可能处理顺序是：

```
img[0] -> img[1]
img[3] -> img[2]
img[0] -> img[3]
img[4] -> img[0]
img[4] -> img[4] 
```

这是实现的：

```
for j in in_place_sequence(image_idx) :
    image[j] = filter[filter_idx[j]](image[image_idx[j]]) 
```

我开始暗示，当它找不到序列时，是因为`image_idx`定义了一个闭环排列。例如：

```
In [29]: in_place_sequence([2, 0, 3, 1]) 
```

返回`None`，但它仍然可以在 1 个通道的最小存储量的情况下就地完成：

```
img[0] -> temp
img[2] -> img[0]
img[3] -> img[2]
img[1] -> img[3]
temp   -> img[1] 
```

我在想办法自动实现这一点时遇到了麻烦。我认为你要走的路是保留我当前的算法，如果它无法耗尽`positions`，找出闭环并为每个闭环做类似上面的事情。不过，我的印象是，我可能在这里重新发明轮子。所以在开始编码之前，我想我会问：确定处理顺序以最小化中间存储的最佳方法是什么？

* * *

**编辑**在 Sam Mussmann 的鼓励下，我已经开始计算剩余的周期。我的代码现在看起来像这样：

```
def in_place_sequence(indices) :
    """
    Figures out a processing sequence for in-place computation.

    Parameters
    ----------
     indices : array-like
         The positions that the inputs will take in the output after
         processing.

    Returns
    -------
     processing_order : list
         The order in which output should be computed to avoid overwriting
         data needed for a later computation.

     cycles : list of lists
         A list of cycles present in `indices`, that will require a one
         element intermediate storage to compute in place.

    Notes
    -----
    If not doing the opearation in-place, if `in_` is a sequence of elements
    to process with a function `f`, then `indices` would be used as follows to
    create the output `out`:

        >>> out = []
        >>> for idx in indices :
        ...     out.append(f(in_[idx]))

    so that `out[j] = f(in_[indices[j]])`.

    If the operation is to be done in-place, `in_place_sequence` could be used
    as follows:

        >>> sequence, cycles = in_place_sequence(indices)
        >>> for j, idx in enumerate(sequence) :
        ...     in_[j] = f(in_[idx])
        >>> for cycle in cycles :
        ...     temp = in_[cycle[0]]            
        ...     for to, from_ in zip(cycle, cycle[1:]) :
        ...         in_[to] = f(in_[from_])
        ...     in_[cycle[-1]] = f(temp)
    """
    indices = [j for j in indices]
    print indices
    positions = set(range(len(indices)))
    processing_order = []
    change = True
    while change and positions :
        change = False
        for j in list(positions) :
            val = indices[j]
            if (j not in indices) or (indices.count(val) == 1 and val == j) :
                indices[j] = None
                positions.remove(j)
                processing_order.append(j)
                change = True
    cycles = []
    while positions :
        idx = positions.pop()
        start = indices.index(idx)
        cycle = [start]
        while idx != start :
            cycle.append(idx)
            idx = indices[idx]
            positions.remove(idx)
        cycles.append(cycle)
    return processing_order, cycles 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:56:07.660

我认为你的方法和你得到的一样好。

将您的`indices`列表表示为有向图，其中每个通道是一个节点，边 ( `u`, `v`) 表示输出通道`v`取决于输入通道`u`。

如所写，您的解决方案找到一个没有出站边的节点，删除该节点及其传入边，并重复直到无法删除更多节点。如果没有更多的节点，你就完成了——如果还有节点，你就卡住了。

在我们的图形表示中，被卡住意味着存在一个循环。添加一个临时通道让我们“拆分”一个节点并打破循环。

不过，在这一点上，我们可能想要变得聪明。是否有任何我们可以拆分的节点会破坏一个以上的循环？不幸的是，答案是否定的。每个节点只有一个入站边，因为每个输出通道`v`只能依赖一个输入通道。为了让一个节点成为多个循环的一部分，它（或某个其他节点）必须有两个入站边。

所以，我们可以通过添加一个临时通道来打破每个循环，而添加一个临时通道只能打破一个循环。

此外，当您只剩下循环时，拆分任何节点都会破坏其中一个循环。所以你不需要任何花哨的启发式方法。只需运行你现在拥有的代码，直到它完成——如果还有`positions`剩余，添加一个临时通道并再次运行你的代码。

# ruby - 意外的'期待kEND'

> ID：14905968
> 
> 赞同：0
> 
> 时间：2013-02-16T01:27:31.830
> 
> 标签：ruby

这是应该给出一副牌的代码：

```
class Cards
attr_accessor :value, :color

    def initialize(value, color)
    @value = value
    @color = color
end

end

2.upto(14) do |number|
recent = number
    1.upto(4) do |value|
        case value
        when 1
            color = :Spades
        when 2
            color = :Clubs
        when 3
            color = :Hearts
        when 4
            color = :Diamonds
        end             
        #{recent}of#{color} = Cards.new(recent, color)
        puts "#{recent}of#{color}"
    end
end 
```

它工作正常。但是当我尝试添加这一行时：

```
deck << #{recent}of#{color} 
```

后

```
puts '#{recent}of#{color}' 
```

突然出现一个疯狂的错误！

```
poker.rb:29: syntax error, unexpected kEND 
```

而且我一点也不知道这条将对象移动到数组中的线如何导致它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:56:01.453

我认为您没有意识到这一点，但以下行是一个*注释*，并且在执行期间被完全忽略（这是该行“有效”的唯一原因）：

```
#{recent}of#{color} = Cards.new(recent, color) 
```

定义局部变量时不能进行插值。事实上，在 Ruby 中根本无法动态定义局部变量（好吧，在 1.9+ 中不行）。

更广泛地说，你不能只使用开放插值（就像你试图用 做的那样`deck << #{recent}of#{color}`）——插值*只能*发生在双引号字符串（或等效结构）或正则表达式中。

相反，只需将新卡直接铲入牌组：

```
deck << Cards.new(recent, color) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:33:39.743

您需要双引号或字符串文字才能使用字符串插值：

```
deck << "#{recent}of#{color}" 
```

或者

```
deck << %(#{recent}of#{color}) 
```

# asp.net-mvc-4 - Bing 地图未显示在 Localhost MVC 应用程序上

> ID：14905975
> 
> 赞同：0
> 
> 时间：2013-02-16T01:28:59.267
> 
> 标签：asp.net-mvc-4, bing-maps

我正在构建一个示例 MVC4 Web 应用程序，我的目标是学习和掌握 Bing Maps API 的使用，但恐怕进展不顺利。

我正在关注[本教程](https://rachelappel.com/2013/06/02/add-html5-geolocation-plus-bing-maps-into-asp-net-mvc-views/)，但是当我重新加载页面时，我没有得到地图，地图应该显示的地方，我只看到空白背景颜色！即使在获得 API 密钥并将其放入我页面上的脚本之后！没有地图显示！

这是我的脚本代码：

```
<script type="text/javascript">
var map = null;

function getMap()
{
    var boundingBox = Microsoft.Maps.LocationRect.fromLocations(new Microsoft.Maps.Location(47.618594, -122.347618), new Microsoft.Maps.Location(47.620700, -122.347584), new Microsoft.Maps.Location(47.622052, -122.345869));
    map = new Microsoft.Maps.Map(document.getElementById('myMap'), { credentials: 'MyKeyGoesHere', bounds: boundingBox });
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:56:10.783

在您的实现中需要考虑几件事。

1.  将脚本引用添加到 Bing Maps API
2.  在您的网页中添加 HTML 元素和所需信息
3.  添加加载事件并触发您的 getMap() 方法（使用在主体上设置的 onload 事件或通过代码动态）

请参阅 MSDN 以帮助您进行第一次实施：http: [//msdn.microsoft.com/en-us/library/gg427624.aspx](http://msdn.microsoft.com/en-us/library/gg427624.aspx)

这是一个示例静态页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script type="text/javascript" charset="UTF-8" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0">
    </script>
    <script type="text/javascript">
        var map = null;

        function getMap() {
            var boundingBox = Microsoft.Maps.LocationRect.fromLocations(
                new Microsoft.Maps.Location(47.618594, -122.347618), 
                new Microsoft.Maps.Location(47.620700, -122.347584), 
                new Microsoft.Maps.Location(47.622052, -122.345869));

            map = new Microsoft.Maps.Map(
                document.getElementById('myMap'), 
                { 
                    credentials: 'YOURKEY', 
                    bounds: boundingBox 
                });
        }

    </script>
</head>
<body onload="getMap();">
    <div id="myMap" style="position: relative; width: 800px; height: 600px;">
    </div>
</body>
</html> 
```

# java - 当用户单击该字段中的输入时，删除 Radio 检查？仅供参考：“日期选择器”的 jquery ui。（小提琴）

> ID：14905981
> 
> 赞同：0
> 
> 时间：2013-02-16T01:29:49.603
> 
> 标签：java, jquery, input, datepicker, radio-group

[http://jsfiddle.net/G3SxU/](http://jsfiddle.net/G3SxU/)

在用户选择日期但决定使用 jquery ui datepicker 输入日期后，应清除选中的单选。有没有办法用 Jquery 或 JS 做到这一点？

我希望在用户单击输入字段时清除选中的收音机（来自..）

```
`<li >
    <input id="time1" type="radio" name="radiohide" >
    <label for="time1" >Today</label>               
</li>
<li >
    <input id="time2" type="radio" name="radiohide" >
    <label for="time2" >Yesterday</label>       
</li>
<li  >
    <input id="time3" type="radio" name="radiohide" >
         <label for="time3" >3 Days ago</label>     
 </li>
 <li  >
    <input id="time4" type="radio" name="radiohide" >
    <label for="time4" >4 Days ago</label>              
</li>
<li>
         <input type="text" id="datepicker"  placeholder="From..."/>
</li>                 
<li>
         <input type="text" id="datepicker1" placeholder="To..." /> 
</li> 

  $(function() {
    $( "#datepicker" ).datepicker({
      changeMonth: true,
      changeYear: true
    });
  });

      $(function() {
    $( "#datepicker1" ).datepicker({
      changeMonth: true,
      changeYear: true
    });
  });` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:33:17.050

取消选中 datePicker 的 onSelect 函数中的收音机：

```
$(function() {
   $( "#datepicker" ).datepicker({
      changeMonth: true,
      changeYear: true,
      onSelect: function() {
          $('input[type="radio"]').prop('checked', false);
      }
   });
}); 
```

[**小提琴**](http://jsfiddle.net/G3SxU/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:33:41.847

这是一个工作示例：http: [//jsfiddle.net/G3SxU/4/](http://jsfiddle.net/G3SxU/4/)

```
 $(function() {
    $( "#datepicker" ).datepicker({
      changeMonth: true,
      changeYear: true
    }).on('change', function() {
        $('input[type="radio"]').prop('checked', false);
    });
  });

  $(function() {
    $( "#datepicker1" ).datepicker({
      changeMonth: true,
      changeYear: true
    }).on('change', function() {
        $('input[type="radio"]').prop('checked', false);
    });
  }); 
```

要在单击单选按钮时重置日期选择器，您可以运行：

```
$('input[type="radio"]').on('change', function() {
    $('#datepicker, #datepicker1').val('');
}); 
```

这现在在上面链接的 JSFIDDLE 中。

您可以使用[jQuery Datepicker](http://api.jqueryui.com/datepicker/#option-onSelect)`onSelect`的选项，因为它会做与更通用的事件相同的事情。`change`

# java - JAVA 使用 InetAddress 指定端口

> ID：14905982
> 
> 赞同：9
> 
> 时间：2013-02-16T01:30:00.290
> 
> 标签：java, inetaddress

我正在使用 InetAddress 来确定我的服务器是否在线。

如果服务器离线，它将重新启动服务器。

此过程每 5 分钟循环一次，以再次检查服务器是否在线。

它工作正常，但现在我需要弄清楚如何指定在检查服务器状态时使用端口 43594 而不是默认端口 80。

谢谢！这是我的代码：

```
import java.net.InetAddress;
public class Test extends Thread {
    public static void main(String args[]) {
        try {
            while (true) {
                try
                {
                    InetAddress address = InetAddress.getByName("cloudnine1999.no-ip.org");
                    boolean reachable = address.isReachable(10000);
                    if(reachable){
                        System.out.println("Online");
                    }
                    else{
                        System.out.println("Offline: Restarting Server...");
                        Runtime.getRuntime().exec("cmd /c start start.bat");
                    }
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
                Thread.sleep(5 * 60 * 1000);
            }
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

编辑：

好的，所以我接受了某人的建议，并做到了这一点。但是现在当我取消注释这一行时.. `Runtime.getRuntime().exec("cmd /c start start.bat");`

我得到这个错误..

`error: unreported exception IOException; must be caught or declared to be thrown`

这是我当前的代码：

```
import java.net.*;
import java.io.*;
public class Test extends Thread {
    public static void main(String args[]) {
        try {
            while (true) {
                SocketAddress sockaddr = new InetSocketAddress("cloudnine1999.no-ip.org", 43594);
                Socket socket = new Socket();
                boolean online = true;
                try {
                    socket.connect(sockaddr, 10000);
                }
                catch (IOException IOException) {
                    online = false;
        }
                if(!online){
            System.out.println("OFFLINE: Restarting Server..");
            //Runtime.getRuntime().exec("cmd /c start start.bat");
        }
                if(online){
                    System.out.println("ONLINE");
                }
                Thread.sleep(1 * 10000);
            }
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T01:54:45.717

正如我在评论中已经提到的，根据[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#isReachable%28int%29) ， isReachable 没有以允许您控制所选端口的方式实现。实际上，如果系统权限允许这样做，它只会 ping 机器（ICMP 请求）。

手动进行（即使用套接字）肯定会起作用，并且不会更复杂和/或更长：

```
SocketAddress sockaddr = new InetSocketAddress("cloudnine1999.no-ip.org", 43594);
// Create your socket
Socket socket = new Socket();
boolean online = true;
// Connect with 10 s timeout
try {
    socket.connect(sockaddr, 10000);
} catch (SocketTimeoutException stex) {
    // treating timeout errors separately from other io exceptions
    // may make sense
    online=false;
} catch (IOException iOException) {
    online = false;    
} finally {
    // As the close() operation can also throw an IOException
    // it must caught here
    try {
        socket.close();
    } catch (IOException ex) {
        // feel free to do something moderately useful here, eg log the event
    }

}
// Now, in your initial version all kinds of exceptions were swallowed by
// that "catch (Exception e)".  You also need to handle the IOException
// exec() could throw:
if(!online){
    System.out.println("OFFLINE: Restarting Server..");
    try {
        Runtime.getRuntime().exec("cmd /c start start.bat");
    } catch (IOException ex) {
         System.out.println("Restarting Server FAILED due to an exception " + ex.getMessage());
    }
} 
```

编辑：忘记处理`IOException`这也意味着服务器无法运行，补充说

EDIT2：添加了对 close() 可以抛出的 IOException 的处理

EDIT3：和 exec() 的异常处理

# mysql - SQL，按 MAX 查找组的计数

> ID：14905984
> 
> 赞同：2
> 
> 时间：2013-02-16T01:30:11.963
> 
> 标签：mysql, sql, group-by

基本上，我有一个带有评论的 MySQL 表，其中包含提交的 ID 和日期，我希望用户能够编辑这些评论。编辑评论时，我想在表中创建一个新条目，其 ID 与正在编辑的评论相同，但有一个新日期。

所以当我选择我的评论列表时，我想使用 SELECT MAX( `DateSubmitted`) ... Group By `ID`，但我也想计算为每个 ID 分组的数量，所以我知道评论被编辑了多少次。

我认为应该是这样的：

```
SELECT ID, COUNT(1) as "Number of edits"
FROM comments
GROUP BY ID; 
```

合并：

```
SELECT ID, MAX(`DateSubmitted`), Comment
FROM comments
GROUP BY ID; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T01:33:52.680

如果您想获取最新的评论文本以及编辑和计数的日期：

```
SELECT a.ID, a. MaxDateSubmitted, a.NumComments, b.Comment
(SELECT ID, 
        MAX(`DateSubmitted`) as "MaxDateSubmitted", 
        COUNT('ID') as "NumComments"
FROM comments
GROUP BY ID) a
INNER JOIN comments b ON a.ID = b.ID and b.DateSubmitted = a.MaxDateSubmitted; 
```

**注意**：这假设没有两个编辑具有完全相同的日期和时间（直到时间部分的精度）。但在这种情况下，我认为这是一个有效的假设。

如果您只想要最新的编辑日期和计数：

```
 SELECT ID, 
        MAX(`DateSubmitted`) as "MaxDateSubmitted", 
        COUNT('ID') as "NumComments"
 FROM comments
 GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T01:32:34.830

```
SELECT ID, COUNT(ID) as "Number of edits", MAX(`DateSubmitted`)
FROM comments
GROUP BY ID; 
```

# python - 使用装饰器对自定义对象进行编码 - Python

> ID：14905985
> 
> 赞同：4
> 
> 时间：2013-02-16T01:30:33.667
> 
> 标签：python, json, dictionary, decorator, encoder

我正在寻找一种使用类装饰器将自定义对象编码为 Python 中的 dict 的方法，以提供应作为参数包含在结果 dict 中的变量的名称。有了 dict，我就可以用来`json.dumps(custom_object_dict)`转换为 JSON。

换句话说，这个想法是有以下`@encoder`类装饰器：

```
@encoder(variables=['firstname', 'lastname'], objects=['professor'], lists=['students'])
class Course(Object):
   def __init__(self, firstname, lastname, professor, students):
        self.firstname = firstname
        self.lastname = lastname
        self.professor = professor
        self.students = students

#instance of Course:
course = Course("john", "smith", Professor(), [Student(1), Student(2, "john")]) 
```

这个装饰器可以让我做类似于以下的事情：

选项 A：

```
json = json.dumps(course.to_dict()) 
```

选项 B：

```
json = json.dumps(course.dict_representation) 
```

...或类似的东西

所以问题是：如何编写这个编码器，唯一真正的要求是：

1.  编码器应该只编码通过装饰器提供的变量
2.  编码器应该能够编码其他对象（例如：课程中的教授，如果教授类也有装饰器`@encoder`
3.  还应该能够编码其他对象的列表（例如：课程内的学生，计算班级学生也必须`@encoder`装饰）

我研究了不同的方法（包括创建一个继承自 json.JSONEncoder 的类），但似乎没有一个完全符合我的想法。有人可以帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:18:35.480

也许是这样的（只是一个快速草图）：

```
#! /usr/bin/python3.2

import json

class Jsonable:
    def __init__ (self, *args):
        self.fields = args

    def __call__ (self, cls):
        cls._jsonFields = self.fields
        def toDict (self):
            d = {}
            for f in self.__class__._jsonFields:
                v = self.__getattribute__ (f)
                if isinstance (v, list):
                    d [f] = [e.jsonDict if hasattr (e.__class__, '_jsonFields') else e for e in v]
                    continue
                d [f] = v.jsonDict if hasattr (v.__class__, '_jsonFields') else v
            return d
        cls.toDict = toDict

        oGetter = cls.__getattribute__
        def getter (self, key):
            if key == 'jsonDict': return self.toDict ()
            return oGetter (self, key)
        cls.__getattribute__ = getter

        return cls

@Jsonable ('professor', 'students', 'primitiveList')
class Course:
    def __init__ (self, professor, students):
        self.professor = professor
        self.students = students
        self.toBeIgnored = 5
        self.primitiveList = [0, 1, 1, 2, 3, 5]

@Jsonable ('firstname', 'lastname')
class Student:
    def __init__ (self, firstname, lastname, score = 42):
        self.firstname = firstname
        self.lastname = lastname
        self.score = score

@Jsonable ('title', 'name')
class Professor:
    def __init__ (self, name, title):
        self.title = title
        self.name = name

p = Professor ('Ordóñez', 'Dra')
s1 = Student ('Juan', 'Pérez')
s2 = Student ('Juana', 'López')
s3 = Student ('Luis', 'Jerez')
s4 = Student ('Luisa', 'Gómez')
c = Course (p, [s1, s2, s3, s4] )

print (json.dumps (c.jsonDict) ) 
```

您可能想检查除`list`if之外的其他可迭代对象`hasattr (v, __iter__) and not isinstance (v, str)`。