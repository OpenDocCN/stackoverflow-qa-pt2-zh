# StackOverflow 问答 15251000-15251999

# javascript - 在 JSF 应用程序中显示消息

> ID：15251002
> 
> 赞同：1
> 
> 时间：2013-03-06T15:12:44.763
> 
> 标签：javascript, jsf, onmouseover

当鼠标移动到界面的特定元素上时，如何在 JSF 应用程序中显示简单的消息？我已经尝试过这段代码，但它不起作用，没有显示任何消息：

JSF 文件：

```
<h:form id ="f">
<h:selectManyCheckbox onmouseover="#{hello.message()}" layout="pageDirection" border="1"  value="#{hello.customersSelect}">
    <f:selectItems value="#{hello.customers}"></f:selectItems>
</h:selectManyCheckbox><br />
<h:commandButton action="response.xhtml" value="Click me" />
</h:form> 
```

支持 bean Hello (ManagedBean) 包含方法 message() 如下：

```
public void message(){
    FacesContext.getCurrentInstance().addMessage("f", new FacesMessage("Done"));
} 
```

我想我应该在某处添加一个标签 h:message，但我无法完成它，尽管我很努力。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:29:09.713

你应该在 javascript 中处理它，因为 mouseOver 是一个 dom 事件

```
<h:head>    
<h:outputScript library="js" name="rollover.js" />
[...]
<h:form id ="f">
<h:selectManyCheckbox onmouseover="mouseOn('foobar')" layout="pageDirection" border="1"  value="#{hello.customersSelect}"> 
```

和 rollover.js ：

```
function mouseOn(text) {
   alert(text)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:32:26.083

为了满足您的好奇心，请使用`<f:ajax event="mouseover" listener="#{hello.messageListener}" />`：

JSF 代码

```
<h:selectManyCheckbox layout="pageDirection" border="1"
    value="#{hello.customersSelect}">
    <f:selectItems value="#{hello.customers}"></f:selectItems>

    <f:ajax event="mouseover" listener="#{hello.messageListener}" render="messages" />
</h:selectManyCheckbox>
<br />
<h:messages id="messages" /> 
```

你好 bean 代码

```
@ManagedBean
@ViewScoped
public class Hello {
    //attributes, constructor and other methods

    public void messageListener(AjaxBehaviorEvent event) { 
        System.out.println("OnMouseOver ajax event.");
        FacesContext.getCurrentInstance().addMessage(
            null, new FacesMessage("Done"));
    }
} 
```

但更重要的是，您确定这是您真正问题的解决方案吗？最好指定功能需求以获得更好的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:44:21.283

如果您只想显示一条静态消息，该消息在显示页面时不会更改：

```
<h:form>
    <h:selectManyCheckbox title="#{hello.message}" layout="pageDirection"
        border="1" value="#{hello.customersSelect}">
        <f:selectItems value="#{hello.customers}"></f:selectItems>
    </h:selectManyCheckbox><br />
    <h:commandButton action="response.xhtml" value="Click me" />
</h:form> 
```

还有豆子：

```
public String getMessage() {
    return "Done";
} 
```

根本没有 JavaScript ;-)

# android - 将水平中心设置为相对Lout中的textView为线性布局

> ID：15251003
> 
> 赞同：0
> 
> 时间：2013-03-06T15:12:47.923
> 
> 标签：android, android-layout

我正在使用线性布局来将我的不同元素放在我的视图中。在这一个中，我放置了一个相对布局以将水平中心设置为 textView。这是我的观点的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context="com.selectionModele.seguin_android.SelectionModeleActivity"
android:background="@drawable/selection_modele_fond"
android:orientation="vertical">
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="120dp"
    android:layout_height="46dp"
    android:layout_marginTop="34dp"
    android:layout_marginLeft="200dp" />
<RelativeLayout
    android:layout_marginTop="20dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
        <TextView
        android:id="@+id/selection_modele_textView_famille"
        android:layout_width="280dp"
        android:layout_height="36dp"
        android:textSize="20dp"
        android:layout_centerHorizontal="true"/>
</RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
        <android.support.v4.view.ViewPager
            android:id="@+id/selection_news_viewPager"
            android:layout_width="320dp"
            android:layout_centerHorizontal="true"
            android:layout_height="308dp">
        </android.support.v4.view.ViewPager>
</RelativeLayout> 
```

但是当我启动我的应用程序时，我的 textView 不在中心，我不知道为什么？请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:22:34.083

添加 `android:gravity="center"`到您`TextView`的 xml 中：

```
<TextView
    android:id="@+id/selection_modele_textView_famille"
    android:layout_width="280dp"
    android:layout_height="36dp"
    android:textSize="20dp"
    android:gravity="center"
    android:layout_centerHorizontal="true"/> 
```

# android - 解析 XML 文件时出现非法参数异常

> ID：15251005
> 
> 赞同：1
> 
> 时间：2013-03-06T15:12:59.537
> 
> 标签：android, xml, illegalargumentexception, xmlpullparser

我正在尝试提取可以在此处看到的 XML 文件：

[http://feeds.pcworld.com/pcworld/latestnews](http://feeds.pcworld.com/pcworld/latestnews)

这是我的`MainActivity`

```
 public class MainActivity extends ListActivity {

    ArrayAdapter<Item> adapter;
    List<Item>items;//Holds item objects containing info relating to element pulled from XML file.
    Item item;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //initialize variables
        items = new ArrayList<Item>();

        new PostTask().execute();

        adapter=  new ArrayAdapter<Item>(this, android.R.layout.simple_list_item_1, items);
        setListAdapter(adapter);        

    }

    private InputStream getInputStream(URL url) {
        try{
            return url.openConnection().getInputStream();
        }catch(IOException e){
            return null;
        }
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        Uri uri = items.get(position).getLink();
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    //ASYNC CLASS
    private class PostTask extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... arg0) {
            try{
                //link to data source
                URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

                //Set up parser
                XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(false);
                XmlPullParser xpp = factory.newPullParser();

                //get XML from input stream
                xpp.setInput(getInputStream(url), "UTF_8");

                //Keep track of which tag inside of XML
                boolean insideItem = false;

                //Loop through the XML file and extract data required
                int eventType = xpp.getEventType();

                while (eventType != XmlPullParser.END_DOCUMENT) {

                    if (eventType == XmlPullParser.START_TAG) {
                        Log.v("ENTER", String.valueOf(xpp.getEventType()));

                        if (xpp.getName().equalsIgnoreCase("item")) {
                            insideItem = true;

                            //Create new item object
                            item = new Item();

                        } else if (xpp.getName().equalsIgnoreCase("title")) {
                            if (insideItem){
                                item.setTitle(xpp.nextText());
                            }

                        } 

                        else if (xpp.getName().equalsIgnoreCase("description")) {
                            if (insideItem){
                                item.setDescription(xpp.nextText());
                            }
                        }

                        else if (xpp.getName().equalsIgnoreCase("link")) {
                            if (insideItem){
                                item.setLink(Uri.parse(xpp.nextText()));                            
                            }
                        }
                    }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){

                        insideItem=false;
                        //add item to list
                        items.add(item);

                    }

                    eventType = xpp.next(); //move to next element
                    publishProgress();
                }

                    } catch (MalformedURLException e) {

                        e.printStackTrace();

                    } catch (XmlPullParserException e) {

                        e.printStackTrace();

                    } catch (IOException e) {

                        e.printStackTrace();

                    }

            return "COMPETED";
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            adapter.notifyDataSetChanged();

        }

        public void onPostExecute(String s) {
            Toast.makeText(getApplicationContext(), s + " Items: " + items.size(), Toast.LENGTH_SHORT).show();
            adapter.notifyDataSetChanged();
        }

    }

} 
```

这是`Item`课

```
 public class Item {

    //Variables
    private String title;
    private Uri link;
    private String description;

    public Item() {
        super();
    }

    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public Uri getLink() {
        return link;
    }
    public void setLink(Uri link) {
        this.link = link;
    }
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }

} 
```

但是，当我运行我的应用程序时出现此错误

**原因：com.example.simplerss.MainActivity$PostTask.doInBackground(MainActivity.java:86) 的 com.example.simplerss 的 org.kxml2.io.KXmlParser.setInput(KXmlParser.java:1615) 的 java.lang.IllegalArgumentException .MainActivity$PostTask.doInBackground(MainActivity.java:1) at android.os.AsyncTask$2.call(AsyncTask.java:287) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)**

这是堆栈跟踪：

```
03-06 15:06:08.095: E/AndroidRuntime(670): FATAL EXCEPTION: AsyncTask #1
03-06 15:06:08.095: E/AndroidRuntime(670): java.lang.RuntimeException: An error occured while executing doInBackground()
03-06 15:06:08.095: E/AndroidRuntime(670):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-06 15:06:08.095: E/AndroidRuntime(670):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.lang.Thread.run(Thread.java:856)
03-06 15:06:08.095: E/AndroidRuntime(670): Caused by: java.lang.IllegalArgumentException
03-06 15:06:08.095: E/AndroidRuntime(670):  at org.kxml2.io.KXmlParser.setInput(KXmlParser.java:1615)
03-06 15:06:08.095: E/AndroidRuntime(670):  at com.example.simplerss.MainActivity$PostTask.doInBackground(MainActivity.java:86)
03-06 15:06:08.095: E/AndroidRuntime(670):  at com.example.simplerss.MainActivity$PostTask.doInBackground(MainActivity.java:1)
03-06 15:06:08.095: E/AndroidRuntime(670):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-06 15:06:08.095: E/AndroidRuntime(670):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-06 15:06:08.095: E/AndroidRuntime(670):  ... 5 more 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:16:29.370

我刚刚检查了`KXmlParser` [源代码](https://github.com/OESF/OHA-Android-4.0.3_r1.0/blob/master/libcore/xml/src/main/java/org/kxml2/io/KXmlParser.java)。`IllegalArgumentException`它在`InputStream`传递给`setInput`方法时抛出is `null`。这意味着`getInputStream`方法有问题，它返回null。确保您传递了有效值`URL`并已添加`android.permission.INTERNET`到`AndroidManifest`.

也尝试改变你的`getInputStream`方法：

```
private InputStream getInputStream(URL url) throws IOException {
    return url.openConnection().getInputStream();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:58:59.697

经过多次检查，事实证明这是我校园防火墙的问题。此后，我设法从家用计算机运行该应用程序，并且错误不存在。谢谢你的帮助。

# java - 使用 Jackson 和 Json 时出错

> ID：15251010
> 
> 赞同：12
> 
> 时间：2013-03-06T15:13:12.293
> 
> 标签：java, json, jackson

我正在尝试解析一些 JSON（可以在[这个 Gist](https://gist.github.com/anonymous/306ffbf0cc1ea6c7ee30/raw/7a017a56e1f20466d8b04cfab1ce0ddf4b176f02/library.json)中看到 JSON 的完整示例）。我在下面展示了 JSON 的一般结构：

```
[
    {
        "title": "Principles of Compiler Design",
        "authors": [
            "Aho",
            "Ullman"
        ],
        "publisher": "Addison Wesley",
        "year": 1977
    },
    {
        "title": "Compilers: Principles Techniques and Tools",
        "authors": [
            "Aho",
            "Sethi",
            "Ullman"
        ],
        "publisher": "Addison Wesley",
        "year": 1985
    }
] 
```

我正在尝试使用 Jackson 库解析 JSON，但在测试时出现以下错误：

```
Exception in thread "main" com.fasterxml.jackson.databind.JsonMappingException: Can not deserialize instance of java.lang.String out of START_ARRAY token
 at [Source: library.json; line: 2, column: 49] (through reference chain: com.acme.datatypes.User["authors"])
    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:163)
    at com.fasterxml.jackson.databind.DeserializationContext.mappingException(DeserializationContext.java:588)
    at com.fasterxml.jackson.databind.deser.std.JdkDeserializers$StringDeserializer.deserialize(JdkDeserializers.java:90)
    at com.fasterxml.jackson.databind.deser.std.JdkDeserializers$StringDeserializer.deserialize(JdkDeserializers.java:59)
    at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:336)
    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:89)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:290)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:112)
    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:2563)
    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:1759)
    at com.acme.datatypes.UserTest.main(UserTest.java:20) 
```

这是我的代码：

用户测试类：

```
public class UserTest {
    public static void main(String[] args) throws JsonParseException,
            JsonMappingException, IOException {
        File jsonFile = new File("library.json");

        User user = null;

        ObjectMapper mapper = new ObjectMapper();

        user = mapper.readValue(jsonFile, User.class);
        System.out.println(user.getTitle());

        user = mapper.readValue(jsonFile, User.class);
        System.out.println(user.getAuthors());

        user = mapper.readValue(jsonFile, User.class);
        System.out.println(user.getPublisher());

        user = mapper.readValue(jsonFile, User.class);
        System.out.println(user.getYear());
    }
} 
```

用户等级：

```
public class User {

    private String authors;
    private String publisher;
    private String title;
    private Number year;

    public String getAuthors() {
        return this.authors;
    }

    public void setAuthors(String authors) {
        this.authors = authors;
    }

    public String getPublisher() {
        return this.publisher;
    }

    public void setPublisher(String publisher) {
        this.publisher = publisher;
    }

    public String getTitle() {
        return this.title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public Number getYear() {
        return this.year;
    }

    public void setYear(Number year) {
        this.year = year;
    }
} 
```

有谁知道问题可能是什么？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T18:18:50.797

两件快速的事情：

1.  您的 User 类将`authors`属性定义为字符串。但在 JSON 中它是一个数组，因此您需要在 Java 对象中使用集合或数组类型。就像是：

    `private List<String> authors`

2.  您在测试类中反复解析 JSON 文件。您只需要解析一次，并且需要使用超类型标记，因为 JSON 中有一个项目列表（不仅仅是一个）。您还使用了错误的类型来反序列化（User.class）。而不是所有这些行：

    `user = mapper.readValue(jsonFile, User.class);` `System.out.println(user.getTitle());`

    `user = mapper.readValue(jsonFile, User.class); // <-- unnecessary parsing System.out.println(user.getAuthors());`

    `user = mapper.readValue(jsonFile, User.class); // <-- unnecessary parsing System.out.println(user.getPublisher());`

    `user = mapper.readValue(jsonFile, User.class); // <-- unnecessary parsing System.out.println(user.getYear());`

只需使用：

```
List<User> userList =
    mapper.readValue(jsonFile, new TypeReference<List<User>>() {}); 
```

一旦您获得了测试类中的用户列表，您就可以使用增强的 for 循环对其进行迭代。

```
for(User user : userList) {
    System.out.println(user.getTitle());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T15:19:36.900

由于您使用的是数组，因此您需要将其转换为数组或列表

作为数组

```
MyClass[] myObjects = mapper.readValue(json, MyClass[].class); 
```

作为列表

```
List<MyClass> myObjects = mapper.readValue(jsonInput, new TypeReference<List<MyClass>>(){}); 
```

用户

```
public class User {

    private List<String> authors;
    private String publisher;
    private String title;
    private Number year;

    public List<String> getAuthors() {
        return this.authors;
    }

    public void setAuthors(List<String> authors) {
        this.authors = authors;
    }

    public String getPublisher() {
        return this.publisher;
    }

    public void setPublisher(String publisher) {
        this.publisher = publisher;
    }

    public String getTitle() {
        return this.title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public Number getYear() {
        return this.year;
    }

    public void setYear(Number year) {
        this.year = year;
    }
} 
```

用法：

```
List<User> l = mapper.readValue(new File(""),new TypeReference<List<User>>() {}); 
```

# django - Django - 与 S3 配合良好的文件浏览器的替代品

> ID：15251011
> 
> 赞同：2
> 
> 时间：2013-03-06T15:13:13.410
> 
> 标签：django, amazon-s3, boto, django-storage, django-filebrowser

[Django Filebrowser](https://github.com/sehmaschine/django-filebrowser)不适用于[存储服务](https://github.com/sehmaschine/django-filebrowser/issues/40#issue-ref-34723825)。

[在Django Packages](https://www.djangopackages.com/grids/g/file-managers/)上找到的[Django Filer](https://github.com/stefanfoulis/django-filer)似乎是一个不错的选择，但它对存储后端的支持似乎不完整。

我想知道与 S3 很好地集成的 Django 文件浏览器的其他替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T12:32:53.573

我在我的项目中使用了[https://github.com/bradleyg/django-s3direct 。](https://github.com/bradleyg/django-s3direct)效果很好。它也列在您提到的 Django Packages 站点上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-10T14:34:40.127

当你包含 时`S3BotoStorageMixin`，这个包应该能够在 S3 上工作。

```
from filebrowser.storage import S3BotoStorageMixin
from storages.backends.s3boto import S3BotoStorage

class CustomS3BotoStorage(S3BotoStorageMixin, S3BotoStorage):
    def path(self, name):
        # Workaround for django-filebrowser, which requests full_path on uploaded files.
        # The operation is not needed at all, since no chmod happens afterwards.
        return self.url(name)

    def isfile(self, name):
        # Hacky performance optimization for filebrowser.
        # The original isdir() method is really inefficient.
        if '.' in name:
            return True
        return super().isfile(name) 
```

并在`settings.py`：

```
DEFAULT_FILE_STORAGE = 'myproject.lib.storages.CustomS3BotoStorage' 
```

# xcode - 钛 iPhone 模组

> ID：15251012
> 
> 赞同：1
> 
> 时间：2013-03-06T15:13:17.137
> 
> 标签：xcode, module, delegates, google-analytics, titanium-mobile

这是我第一次为 iPhone 开发钛金属模块。我正在为 iPhone 构建 Google Analytics 模块。

如果我要使用 XCode 实现 Google Analytics，我可以只使用**didFinishLaunchingWithOptions**委托。下面是示例：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
  {
         // Override point for customization after application launch.
         id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-XXXXXXXX-X"];
          return YES;
  } 
```

我试过了，对我来说效果很好。

说到Titanium Module，我认为没有didFinishLaunchingWithOptions这样的委托。

我把它放在**启动**函数中，如下所示：

```
-(void)startup
{
    // this method is called when the module is first loaded
    // you *must* call the superclass
    [super startup];
        id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-38803610-1"];
    NSLog(@"[INFO] %@ loaded",self);
 } 
```

但是当我像下面这样执行我的应用程序时：

```
var mod = require("com.mymodule")
Ti.API.log("The module: " +  mod) 
```

我收到以下错误：

```
: Dispatcher initialization failed: Error Domain=com.google.analytics.error Code=1 "Dispatcher must be initialized on main thread." UserInfo=0xb3d1270 {NSLocalizedDescription=Dispatcher must be initialized on main thread.} 
```

任何帮助都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T05:48:41.263

您需要在主线程中执行 UI 任务。你可以这样做：

`ENSURE_UI_THREAD(functionName,args);`

和

```
ENSURE_UI_THREAD_0_ARGS 
```

有关更多类似方法，请查看此[iOS 模块开发指南](https://wiki.appcelerator.org/display/guides/iOS+Module+Development+Guide)

# wpf - 将文本框绑定到 wpf 中的 Datagrid 和数据库？

> ID：15251013
> 
> 赞同：1
> 
> 时间：2013-03-06T15:13:20.010
> 
> 标签：wpf, xaml, binding, datagrid, textbox

我有一个`TextBox`从 a 中的单个单元格获取数据的 a `DataGrid`，我想将内容发送到数据库。这就是我绑定`TextBox`到我的`DataGrid`并且工作正常的方式：

```
<TextBox x:Name="TestText" Text="{Binding ElementName=MyDGTest, Path=SelectedItem.Test}" /> 
```

现在我希望将内容保存到数据库中：

```
<TextBox x:Name="TestText" Text="{Binding TestTable.Test, Mode=OneWayToSource}" /> 
```

我的问题是我只能同时使用 1 个绑定。

编辑：

如果无法绑定到 2 个源，有什么方法可以`TextBox`从我的`ViewModel`? 我可以将值直接保存到数据库中。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:06:04.290

好的，我找到了解决方案。我使用代理进行输入和输出绑定，如 [http://www.11011.net/wpf-binding-properties](http://www.11011.net/wpf-binding-properties)中所述。唯一的区别是我使用 new Action 而不是 new Operation（我找不到任何具有此名称的类）。

# hive - 使用 Hive 构建和聚合时间序列

> ID：15251014
> 
> 赞同：1
> 
> 时间：2013-03-06T15:13:20.137
> 
> 标签：hive

我是 Hive 的新手，我有一张表，其中的架构是：

```
Name, Count, Timestamp 
```

我想知道是否可以编写一个查询来触发 EMR 作业并在给定间隔和开始/结束时期的情况下提取/聚合每个名称的计数列表。

例如

表格内容：

```
NameA, 1, 10000
NameA, 1, 2
NameA, 1, 1
NameB, 1, 500
NameB, 1, 1 
```

参数：

```
Interval: 1000ms
Start: 0
End: 10000 
```

输出：

```
NameA, [2,0,0,0,0,0,0,0,0,1]
NameB, [2,0,0,0,0,0,0,0,0,0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:04:06.117

要获得*完全*一样的格式会有点棘手，但类似于......

```
SELECT
   name,
   round((timestamp - ${hiveconf:start})/${hiveconf:interval}) as interval_group,
   count(*) as interval_count
FROM source_table
WHERE timestamp >= ${hiveconf:start} and timestamp <= ${hiveconf:end}
GROUP BY name, round((timestamp - ${hiveconf:start})/${hiveconf:interval})
ORDER BY name, interval_group 
```

您必须进行后处理以填充不存在的间隔组的零并格式化输出，但这应该可以为您提供所需的数据。

# knockout.js - 只有两个连续绑定元素中的第一个被渲染

> ID：15251020
> 
> 赞同：1
> 
> 时间：2013-03-06T15:13:28.557
> 
> 标签：knockout.js, typescript

我不明白为什么这里的第二项没有渲染，即只有一个 p 得到输出..：

```
 <div class="row" data-bind="foreach: Foos">
       <div class="three columns">
           <p data-bind="text: CriteriaStub"></p>
           <p data-bind="text: CriteriaStub"></p>
       </div>
       <div class="three columns">
           <!--this gets rendered fine-->
           <p data-bind="text: Baa"></p>
       </div>
    </div> 
```

它似乎只发生在连续绑定元素上。

查看 foreach 的模型项：

```
var Foo= (function () {
    function Foo(jsonObject) {
        var self = this;

        self.AdHocRecipients = ko.observableArray(jsonObject.AdHocRecipients);
        self.CriteriaStub = ko.computed(function () {

            return "No criteria";
        });

        self.AdHocRecipientsToStringStub = ko.computed(function () {
            var stub = "";
            for(var i in self.AdHocRecipients()) {
                stub += (self.AdHocRecipients()[i].User) + ', ';
            }
            return self.AdHocRecipients().length > 0 ? stub.slice(0, -2) : "No recipiants";
        });
        var t = 2;
    }
    return Foo;
})(); 
```

家长：

```
var ViewModel = (function () {
    function ViewModel(json) {

        var parsedFoos = new Array();
        for(var i in json.Foos) {
            parsedFoos.push(new Foo(json.Foos[i]));
        }
        this.Foos = ko.observableArray(parsedFoos);
    return ViewModel;
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:43:43.813

我不太确定，但唯一突出的潜在错误是 Foo 是一个自执行函数，它也返回自身。当您多次调用它时，我看不出它会给您带来什么。您是否尝试过将 Foo 作为函数？

```
function Foo(jsonObject) {
    var self = this;

    self.AdHocRecipients = ko.observableArray(jsonObject.AdHocRecipients);
    self.CriteriaStub = ko.computed(function () {

        return "No criteria";
    });

    self.AdHocRecipientsToStringStub = ko.computed(function () {
        var stub = "";
        for(var i in self.AdHocRecipients()) {
            stub += (self.AdHocRecipients()[i].User) + ', ';
        }
        return self.AdHocRecipients().length > 0 ? stub.slice(0, -2) : "No recipiants";
    });
    var t = 2;
} 
```

另外，请注意您的 html 标签。虽然我认为自闭合标签通常是有效的，但它们并不总是有效，所以使用而不是 .

# android - ADB - VirtualBox 连接

> ID：15251024
> 
> 赞同：12
> 
> 时间：2013-03-06T15:13:50.447
> 
> 标签：android, eclipse, adb, virtualbox

我正在尝试连接 ADB 和 VirtualBox Android 设备。我已经按照网络上所有可能的教程进行操作，但仍然无法正常工作。我做了什么：

*   来自 androidx86.org 的 dl Adroidx86
*   在 VirtualBox 上安装
*   使用正确的访问模式（网桥）和网卡（PC-net Fast III）配置网络
*   输入`netcfg`虚拟机终端，获取 IP 地址 192.168.1.12（静态）
*   `adb kill-server`在主机上键入
*   `adb connect 192.168.1.12`在主机上键入

并得到错误无法连接到 192.168.1.12:5555。我正在将 Windows 7 作为操作系统运行。

你知道为什么吗？如何知道要连接的设备的端口？谢谢 ！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-31T14:06:48.443

我曾经遇到过同样的问题，你检查你的虚拟机网络配置了吗？我的 VM 网络配置如下：NAT 模式，拒绝，适配器为 PCnet-FAST III，我将此规则添加到转发。

![在此处输入图像描述](../Images/9a3388aa40686d47cb2cb5b2fc8749e3.png)

最偷偷摸摸的部分总是虚拟机的网络配置，试试这个。如果您仍有问题，请查看本教程： [使用 Android-x86 和 VirtualBox 加速 Android 开发](http://web.archive.org/web/20121115204402/http://brunocosta.com/blog/2011/11/02/speeding-up-android-development-with-android-x86-and-virtualbox/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T10:36:40.887

我认为现在它应该是自动的。但是您可以通过执行以下操作尝试连接 Android x86 的旧方法：

*   按`Alt`+转到控制台`F1`
*   执行这个命令：

    > 苏
    > 
    > setprop service.adb.tcp.port 5555
    > 
    > 停止 adbd
    > 
    > 启动 adbd

*   返回安卓：`Alt`+`F7`

之后尝试在您的 Windows 主机中通过 adb 连接并查看它是否有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-11T14:20:51.577

首先像这样进行**端口转发**设置

[![VirtualBox 网络设置](../Images/88524c273b2e625c1cd7b63e7791793a.png)](https://i.stack.imgur.com/MmkXA.jpg)

然后运行这个**命令**：`adb connect 127.0.0.1`

[![亚行连接](../Images/76b3fbd2ab632faea576d4cb6b7b939d.png)](https://i.stack.imgur.com/OtRgb.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-08T11:46:24.807

我所做的是使用桥接网络连接，然后将访客操作系统上的 adb 与电话 IP 地址连接，在设置->关于电话中找到。例如

```
adb connect 192.168.0.222:5555 
```

# sql - 如何在查询中组合 Right 和 Like 函数？

> ID：15251026
> 
> 赞同：2
> 
> 时间：2013-03-06T15:13:52.780
> 
> 标签：sql, ms-access

给定以下字段和条目，如何找到最后 4 个字母中包含非数字字符的 3 个条目？

```
Field1
------
MA1234
DC4567
OHABCD
CAWXYZ
FLLMNO
MI9876 
```

我猜这将是 and 的组合`Right`，`Like "[A-Z]*"`例如`Right([Field1], 4) = Like "[A-Z]*"`但这不起作用。

编辑：我正在寻找最后 4 个字符中的任何一个不是数字的任何条目。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:19:31.273

您可以抓取最后四个字符，一次比较一个字符，如下所示：

```
WHERE RIGHT(Field1, 4) LIKE '[A-Z][A-Z][A-Z][A-Z]' 
```

我知道该示例在 SQL 2008 中，但这里[有一个 SQL Fiddle](http://sqlfiddle.com/#!3/5d420/1)也可以演示它。

**编辑**：

如果您想要至少有一个非数字字符（即不全是 0-9）的字段，您可以搜索一个非数字值 ( `LIKE '*[^0-9]*'`) 并确保所有四个字符都不是数字 ( `NOT LIKE '[0-9][0-9][0-9][0-9]'`) ：

```
WHERE RIGHT(Field1, 4) LIKE '*[^0-9]*' AND 
    RIGHT(Field1, 4) NOT LIKE '[0-9][0-9][0-9][0-9]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:21:26.933

这是答案：

```
SELECT *
FROM 
(
    VALUES
        ('MA1234'),
        ('DC4567'),
        ('OHABCD'),
        ('CAWXYZ'),
        ('FLLMNO'),
        ('MI9876')
) v(Code)
WHERE Code like '*[A-Z][A-Z][A-Z][A-Z]' 
```

# php - PHP 和 MySQL - 大量查询导致 300 秒超时

> ID：15251027
> 
> 赞同：0
> 
> 时间：2013-03-06T15:13:53.120
> 
> 标签：php, mysql

我有一个导致 MySQL 性能问题的 PHP 应用程序。发生的情况是：数据库条目扩展一定数量后；它开始随机超时 PHP 页面 300 秒。

我知道我必须重写我的代码，因为它很乱，过时了，而且我基本上在运行很多查询，这可能会更有效率。

但是，我很好奇是什么导致了这种情况，以及是否有短期解决方案。php 应用程序运行良好，但是在浏览了一些页面后，查询的结果表现得像应该的那样，有时加载时间会变为 300 秒。之后，带有数据库结果的页面完美显示。之后，我可以再次查看一些页面，之后该过程随机重新开始。在页面加载的 300 秒内，SQL 进程列表显示了完整加载时间的命令“睡眠”，没有附加任何查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:19:51.747

如果进程列表没有显示正在运行的查询，那么问题可能出在您的应用程序上，而不是在 MySQL 上。看看这个：[如何找出一个进程在 Linux 中运行的 PHP 脚本？](https://stackoverflow.com/questions/9468332/how-can-i-find-out-which-php-script-a-process-is-running-in-linux).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:25:17.063

假设问题确实与 MySQL 有关，您可以尝试为 MySQL 服务器分配更多内存，看看性能是否有所提高。在此处查看“巨大”的 my.cnf 配置：

[http://fts.ifac.cnr.it/cgi-bin/dwww/usr/share/doc/mysql-server-5.0/examples/my-huge.cnf.gz](http://fts.ifac.cnr.it/cgi-bin/dwww/usr/share/doc/mysql-server-5.0/examples/my-huge.cnf.gz)

此外，如果您不需要 InnoDB 功能但您的数据库是 InnoDB，您可以切换到 MyISAM 并获得一些性能。

您还应该检查会话锁定和冲突，这有时会造成超时。您应该在读取/写入数据后立即释放会话，因为会话文件保持锁定状态，直到您关闭会话或脚本结束。

# javascript - 如何将两个变量设置为一个

> ID：15251028
> 
> 赞同：2
> 
> 时间：2013-03-06T15:13:53.873
> 
> 标签：javascript, jquery, arrays, variables

我有这个问题，我找不到任何激进的答案......

那么，有没有可能用 jQuery 将两个变量设置为一个，像这样：

```
 var $self = {
        car_img_stage: $('.car_img_stage'),
        vis_home: $('#vis_home')
    } 
```

然后像这样使用：

```
 $self.animate({
        'margin-left': '-1200px'
    }, 600) 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:14:58.597

您可以创建一个应该完成相同事情的组合选择器：

```
$self = $('.car_img_stage,#vis_home'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:29:26.833

有几种方法可以做到这一点 -

[多个选择器](http://api.jquery.com/jQuery/)

```
$self = $('.car_img_stage,#vis_home'); 
```

[jQuery添加](http://api.jquery.com/add/)

```
//basic use
$self = $('.car_img_stage').add('#vis_home'); 
```

它们的动画方式相同：

```
$self.animate({
    'margin-left': -1200
}, 600); 
```

如果您想缓存选择器并稍后单独使用它们，添加也很有用。

```
//cached selectors
$car_img = $('.car_img_stage');
$vis_home = $('#vis_home');
$self = $car_img.add($vis_home);

$car_img.animate({
    'color': 'red'
}, 600);

$vis_home.animate({
    'height': 200
}, 600);

$self.animate({
    'margin-left': -1200
}, 600); 
```

你也可以让你的选择器保持原样并循环遍历它。不推荐这种方式，但在技术上可行。

```
var $self = {
    car_img_stage: $('.car_img_stage'),
    vis_home: $('#vis_home')
}

for (var each in $self){
    $self[each].animate({
        'margin-left': -1200
    }, 600);
} 
```

下一个注释与原始问题无关，但在处理多个选择器的动画时要记住这一点。

请注意，在为多个选择器设置动画时，附加的任何回调都将为每个 ANIMATED 项目触发。当说，淡出链接列表（而不是包含它们的包装器）或类似的东西时，这是相关的。为避免此问题，您可以使用[promise](http://api.jquery.com/promise/)，如下所示：

```
$self = $('.car_img_stage,#vis_home');

$self.animate({
    'margin-left': -1200
}, 600, function(){
    //callback code here to happen for every animated element.
}).promise().done(function(){
    //callback code here, to happen once when ALL animations are complete.
}); 
```

您可以省略这些回调函数中的一个或两个：

只是一个回调：

```
$self.animate({
    'margin-left': -1200
}, 600, function(){
    //callback code here to happen for every animated element.
}); 
```

只是一个承诺：

```
$self.animate({
    'margin-left': -1200
}, 600).promise().done(function(){
    //callback code here, to happen once when ALL animations are complete.
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:16:54.977

你可以这样做：

```
var some_things = $('.car_img_stage, #vis_home');

some_things.animate({
    'margin-left': '-1200px'
}, 600) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:54:08.550

作为我的附加回答，我找到了其他解决方案，而且它的工作。

```
var car_img_stage = $('.car_img_stage'),
    vis_home = $('#vis_home');

var self = jQuery.makeArray(vis_home,car_img_stage); 
```

和行动

```
self.animate({
    // some animate action
}, 600); 
```

# javascript - 是否可以在不修改原始代码的情况下向现有的 javascript 函数添加一些代码？

> ID：15251030
> 
> 赞同：2
> 
> 时间：2013-03-06T15:14:01.040
> 
> 标签：javascript, append, aop, user-defined-functions, prepend

有一些javascript代码，例如

```
function hello() {
}
function world() {
} 
```

我想向它们添加一些日志记录代码，但我不想修改代码。我希望我可以在另一个文件中编写一些代码，它会在运行时修改函数。有可能做到这一点吗？

* * *

**更新**

感谢您的两个答案，但我必须让这个问题更清楚。

和函数只是一些示例`hello`，`world`实际上文件中有数百个函数，它是手动重新定义它们的实现。

我正在寻找一种自动执行此操作的方法（类似于 java 中的 AspectJ）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:17:33.800

您不能*修改*函数，但可以包装它们并用包装器替换函数。

这样（见[现场演示](http://jsbin.com/emutop/1/edit)）：

```
function logFactory(func, message) {
    return function () {
        console.log(message);
        return func.apply(this, arguments);
    }
}

hello = logFactory(hello, "Some log message"); 
```

这不会让您在函数操作时获取任何数据*，*也不会更改函数内部发生的事情（尽管您可以捕获参数并在传递它们之前修改它们，并且您可以捕获返回值并修改它退还之前）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:17:25.350

你总是可以使用另一个函数名并调用你想要“扩展”的函数

```
function extendSomefunction(param) {
    somefunction(param);
    // additional things here
} 
```

但是你可以在[这里找到另一个技巧](https://stackoverflow.com/questions/5409428/how-to-override-a-javascript-function)

复制代码：

```
var origParseFloat = parseFloat;
parseFloat = function(str) {
     alert("And I'm in your floats!");
     return origParseFloat(str);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:51:04.467

除了将函数包装在新版本中之外，您唯一的其他选择是在 JavaScript 文件离开您的服务器之前对其进行修改。手动，作为构建步骤，或通过 HttpHandler 动态进行。这是最强大的解决方案，因为它还捕获了在运行时未公开给您包装的*私有函数和私有引用。*但是，它需要大量的工作，所以如果上面的简单函数包装答案就足够了，我衷心推荐它！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T15:27:16.770

您可以包装函数并用包装器替换它：

```
var originalHello;
originalHello = hello;

hello = function () {
    // log your stuff
    console.log('fired before original hello is triggered');

    // call original hello with the current scope & arguments
    originalHello.apply(this, arguments);
} 
```

# android - 为什么我的系统覆盖会捕获所有触摸（无法与底层视图交互）

> ID：15251037
> 
> 赞同：14
> 
> 时间：2013-03-06T15:14:13.963
> 
> 标签：android, overlay, touch-event

我有一个启动系统覆盖的服务。当覆盖层可见时，我希望它是可触摸的/检测触摸，但我想保留与它后面的屏幕的交互（后面是指底层活动，例如覆盖层旁边）。

我的叠加层是 128x128px 的位图/PNG。它被绘制，当我点击它时，我收到了 TOUCH！日志，这很好。但是当我点击屏幕的任何其他部分（除了覆盖）时，我也会得到 TOUCH！记录并且不可能与下面的屏幕进行交互。

以下是我的代码部分：

**启动服务的主要活动**

```
buttonStart.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // start Service and return to Homescreen
                Intent i = new Intent(MainActivity.this, MyService.class);
                startService(i);                

                Intent newActivity = new Intent(Intent.ACTION_MAIN); 
                newActivity.addCategory(Intent.CATEGORY_HOME);
                newActivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(newActivity);
            }
        }); 
```

**服务/显示叠加**

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        myOverlay = new Overlay(MyService.this);

        WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | 
                WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL, 
                PixelFormat.TRANSLUCENT);
        params.gravity = Gravity.LEFT | Gravity.TOP;

        wm = (WindowManager) getSystemService(WINDOW_SERVICE);
        wm.addView(myOverlay, params);

        myOverlay.setAnimation(new Waiting(MyService.this, 0, 0));
        myOverlay.postInvalidate();

        return super.onStartCommand(intent, flags, startId);
    } 
```

**覆盖**

```
public MyOverlay(Context context) {
        super(context);     
        this.context = context;

        setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.i("TOUCH!", event.getAction() + ", x:"+event.getX()+", y:"+event.getY());
                return false;
            }
        });
    } 
```

我究竟做错了什么？还尝试了 WindowManager.LayoutParams.TYPE_PHONE 而不是 WindowManager.LayoutParams.TYPE_SYSTEM_ALERT，但行为相同。

我没有使用标志 FLAG_WATCH_OUTSIDE_TOUCH，那么为什么没有在覆盖层旁边注册触摸？

**编辑**

看来我找到了问题，但仍然不知道如何解决它......覆盖中显示的图像真的很小而且不是问题，但覆盖本身是全屏的（！）

我在 Overlay / onTouch() 事件中添加了以下日志：

```
Log.i("TOUCH!", "View: "+v.toString() +", size="+ v.getWidth()+"/"+v.getHeight()); 
```

然后告诉我 View: package.overlay.myOverlay, **size=480/762**

现在我试图通过在服务中添加以下行来强制它不是全屏：

```
 @Override
        public int onStartCommand(Intent intent, int flags, int startId) {

            myOverlay = new Overlay(MyService.this);
//HERE
myOVerlay.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

            WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                    WindowManager.LayoutParams.WRAP_CONTENT,
                    WindowManager.LayoutParams.WRAP_CONTENT,
                    WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
                    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | 
                    WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL, 
                    PixelFormat.TRANSLUCENT);
            params.gravity = Gravity.LEFT | Gravity.TOP;

            wm = (WindowManager) getSystemService(WINDOW_SERVICE);
            wm.addView(myOverlay, params);

            myOverlay.setAnimation(new Waiting(MyService.this, 0, 0));
            myOverlay.postInvalidate();

            return super.onStartCommand(intent, flags, startId);
        } 
```

但这无济于事... myOverlay 的大小仍然为 480x762... 为什么它那么大，我怎样才能让它具有包含图像的大小？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-27T06:51:17.380

这对我有用：

```
WindowManager.LayoutParams params = new WindowManager.LayoutParams();
params.height = WindowManager.LayoutParams.WRAP_CONTENT;
params.width = WindowManager.LayoutParams.WRAP_CONTENT;
params.type = WindowManager.LayoutParams.TYPE_TOAST;
params.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
    | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL
    | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE; 
```

`View`将 LayoutParams 添加到时使用此 LayoutParams `WindowManager`，它会阻止它接收任何点击，这可能`TYPE_TOAST`就足够了，但我添加了标志只是为了确保。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T01:55:48.537

我也遇到了同样的问题，我通过设置 params.width 和 params.height 解决了这个问题。尝试这个。

```
params.width = 128;
params.height = 128; 
```

我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-19T15:09:54.207

我遇到了同样的问题，只需尝试将其添加到您的代码中：

```
WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY 
```

我非常有信心代码可以正常工作，如果它不仅检查代码是否有其他错误，而且就触摸而言，这是您的解决方案。无论如何，请告诉我。我几乎忘记了第二部分，只需将属性更改为 matchparent 而不是 wrapcontent。

祝你好运

# java - 如何添加过滤功能？

> ID：15251039
> 
> 赞同：1
> 
> 时间：2013-03-06T15:14:17.060
> 
> 标签：java, mysql, jsp, jakarta-ee, servlets

例如，我的 html 页面中有 4 个下拉列表。

```
DDL1 - OrgType
DDL2 - Region
DDL3 - Category
DDL4 - Sector 
```

现在我怎样才能查询数据库并搜索 1 个 DDL？为了让自己清楚，这是场景

```
Select * 
from table1 
where OrgTypeId = 1 
  AND RegionId = 1 
  AND CategId = 1 
  AND SectorId = 1 
```

现在，如果我只想搜索扇区 ID = 1 的扇区怎么办？而其他 DDL 可以有任何价值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:20:18.403

`WHERE`仅在子句中包含您想要的条件。您可以通过动态构建查询并仅在需要时插入条件，或者将它们设置为类似`LIKE '%'`or`IS NOT NULL`或根据您的架构始终返回 true 的内容来做到这一点。

例子：

```
--Removing unnecessary criteria
Select * 
from table1 
where SectorId = 1

--Making unused criteria always evaluate to true
Select * 
from table1 
where OrgTypeId >= 0 
  AND RegionId >= 0
  AND CategId >= 0 
  AND SectorId = 1 
```

上面的第二个示例假设您的值是 all `ints`，并且它们永远不会为空，但它可以适应大多数情况。

# javascript - Javascript，instanceof 函数的行为

> ID：15251042
> 
> 赞同：1
> 
> 时间：2013-03-06T15:14:22.937
> 
> 标签：javascript, node.js, instanceof

我正在创建一个 Node.js 应用程序。我有一个具有这种结构的项目：

```
[Project Folder]
  |
  |---[plc]
  |     |--- plc.js
  |     |--- scheduler.js
  |
  |---[source]
  |     |--- source.js
  |
  |---[test]
        |--- test.js 
```

文件*plc.js*、*scheduler.js*和*source.js*是“对象”，它们需要其他对象，并且在文件末尾有一个对象的“导出”。特别是文件*plc.js*有一个奇怪的行为。首先是代码：

```
var mod_pollist     = require('./polling_list.js');     // Polling list.
var mod_operation   = require('./operation.js');        // Single operation.
var mod_scheduler   = require('./scheduler.js');        // Scheduler object.
var mod_events      = require('events');            // Event emitter
var mod_util        = require('../util.js');        // Util functions

function plc(comm_driver){
    var self = this;
    // Other variables are set here
}

// Other functions written as plc.prototype.something = function(parameters){...}

module.exports = plc; 
```

现在奇怪的行为：所有其他文件的文件顶部都有用于导入*plc.js*（`var mod_plc = require('../plc/plc.js');`或`var mod_plc = require('./plc.js');`调度程序）的代码，但只有在*test.js*中它才能正常工作，事实上如果我写

```
if(PLC instanceof mod_plc)
    console.log('yes'); 
```

在文件*test.js*中，我可以在控制台上找到“是”，如果我在其他文件中编写相同的代码，我会收到错误：

```
if(PLC instanceof mod_plc)
                  ^
TypeError: Expecting a function in instanceof check, but got #<Object>
    at Object.<anonymous> (C:\Users\Massimo\workspace\Scada\plc\scheduler.js:16:
19) 
```

一个“临时解决方案”可能是

```
if(PLC instanceof mod_plc.constructor)
    console.log('yes'); 
```

但我认为这不是真正的解决方案，因为对于所有其他对象（我有 20 多个类似*plc.js*的文件），这个问题不存在。

有什么建议吗？您需要更多信息吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:25:11.353

总结一下我上面的评论：

鉴于：

*   `TypeError`告诉你是`mod_plc`一个`Object`（不是构造函数）；和
*   using`mod_plc.constructor`为您提供预期的行为；

看起来您的`PLC`变量已在某处分配了一个实例`mod_plc`（因此不再是对预期构造函数的引用）。

# jquery - mvc4应用程序中的jquery文件冲突

> ID：15251043
> 
> 赞同：0
> 
> 时间：2013-03-06T15:14:25.447
> 
> 标签：jquery, jquery-ui, asp.net-mvc-4

我创建了一个 mvc4 应用程序并在参考[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)的组合框中实现了自动完成。该应用程序工作正常。但是当我将相同的代码放到另一个应用程序中时，自动完成组合框不起作用。它正在显示错误'Microsoft JScript 运行时错误：对象不支持此属性或方法'..文件之间存在一些冲突..

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:19:54.410

确保包含 jQuery UI `BundleConfig.cs`，然后确保在 Layout.cshtml 或视图页面上正确调用它：

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryui")    
} 
```

显然，您需要在尝试在代码中使用它之前调用此依赖项。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:15:32.450

确保 jquery 库没有在同一页面上添加两次

# image - Matlab：找到轮廓并拉直近乎矩形的图像

> ID：15251045
> 
> 赞同：4
> 
> 时间：2013-03-06T15:14:29.080
> 
> 标签：image, matlab, image-processing

我有这张图片：

![长方形](../Images/909c529161eabee363d08df6a35da2be.png)

这是矩形的，但不完全是。我想找到矩形轮廓，我尝试使用**边缘**和**霍夫**，但找不到连续线。我也尝试过**侵蚀**和**扩张**，但它无法擦除水平最上面一行上一个像素的差异，因此它仍然找不到连续线。

问题的第二部分是纠正它。

我得到的另一个想法是找到用直线将它们连接起来的**角落**，但它也不起作用。

我相信它不应该很复杂，但我做不到。

欢迎任何想法！干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:29:05.527

您可以使用[**`regionprops()`**](http://www.mathworks.nl/help/images/ref/regionprops.html)在二值图像中查找连续区域的边界框：

```
img = imread('rect.jpg');
bw = im2bw(img);

% find both black and white regions
stats = [regionprops(bw); regionprops(not(bw))]

% show the image and draw the detected rectangles on it
imshow(bw); 
hold on;

for i = 1:numel(stats)
    rectangle('Position', stats(i).BoundingBox, ...
    'Linewidth', 3, 'EdgeColor', 'r', 'LineStyle', '--');
end 
```

结果：

![带有矩形的图像](../Images/4b19fca458229b78cf8aaf04ac105102.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:38:28.570

要找到轮廓，您可以进行边缘检测，然后加粗线条。您可能无法仅通过形态学操作获得一条直线，因为您的图形就是这样。形态学操作将对整个图像应用相同的效果。此外，边缘检测不会给出一条直线。

至于找到一条直线，我认为问题属于找到最小边界矩形的范畴。但是，如果术语`straight`意味着`parallel to X-Y axis`然后回答`Junuxx`应该有效。最小边界矩形紧贴图像，但不一定平行于 XY 轴。[您可以在此处](http://www.mathworks.com/matlabcentral/fileexchange/34767-a-suite-of-minimal-bounding-objects/content/MinBoundSuite/minboundrect.m)找到该算法的实现。要找到上图的最小边界矩形，首先使用`remove`from`bwmorph`然后将该点集作为最小边界矩形算法的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:03:37.533

假设您知道“黑色”和“白色”的值，您可以通过在中间点绘制轮廓来找到边缘 - 因此，如果黑色 = 0 且白色 = 1，则在 0.5 处绘制轮廓。例如，您可以使用以下方法执行此操作：

```
img = zeros(500, 500);
img(200:300, 200:300) = 1;
img(210:290, 210:290) = 0;
img = imrotate(img, 3);
c = contourc(img, 0.5*[1 1]); % repeat 0.5 to be interpreted as value of contour 
```

轮廓的坐标现在在 c 中。您还可以绘制轮廓

```
contour(img, 0.5*[1 1]); 
```

当您查看时`c`，您可以找出角落在哪里；一旦知道这一点，您就可以使用`imtransform`图像处理工具箱中的投影变换。

我希望这两件事能让你继续......

# django - 如何在 Django 网站中进行有效搜索

> ID：15251048
> 
> 赞同：-2
> 
> 时间：2013-03-06T15:14:37.383
> 
> 标签：django, search, sphinx

我正在尝试有效地使用 Django 网站的搜索功能。让我们尝试以下搜索：

假设我想在 Django 网站上获取有关[命名](https://docs.djangoproject.com/en/1.4/topics/http/urls/#id2)**url 模式**的信息，我会在搜索中使用`url`和`name=`作为关键字。（两个关键字都出现在我想查找的部分中）

我尝试了以下搜索，但**没有产生任何结果**：

1.  `url name=`
2.  `url AND name=`
3.  `"url" "name="`
4.  `"url" AND "name="`

如何使用关键字和找到[我正在寻找的信息](https://docs.djangoproject.com/en/1.4/topics/http/urls/#id2)？我宁愿不求助于在本地获取文档。`url``name=`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:31:47.467

`site:`您可以使用 Google 使用搜索修饰符搜索特定网站。我通过以下查询访问了您的网址：

`name= url site:djangoproject.com`

# c - 底层字符集是否仅取决于 C 实现？

> ID：15251049
> 
> 赞同：6
> 
> 时间：2013-03-06T15:13:43.697
> 
> 标签：c, ascii

许多文本警告将`char`值处理为整数是不可移植的，例如假设'A'的值为65（如ASCII）。

但是是什么决定了这个字符集是 ASCII（或扩展形式）还是其他字符集？是操作系统决定的，还是编译器决定的？我假设这不依赖于硬件。

例如，英特尔 PC 是否可以具有诸如 EBCDIC 之类的字符集（理论上）？并且更改`LANG`Linux/Unix 中的环境变量是否会更改 C 程序的基本字符集的值（如果随后重新编译）？

（编辑：我现在看到 Linux 中的各种非拉丁字符集都具有相同的基本 ASCII 代码，例如[KOI8-U](http://en.wikipedia.org/wiki/KOI8-U) - 我假设存在字符集与 ASCII 不兼容的变体）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:37:36.957

该标准不关心任何这些细节，就它而言，只有“实现”。

在实践中，硬件和操作系统都可以指定该平台上的 C 实现预期使用的实现细节，或者如果它们想要与系统功能（即提供的代码）互操作则*需要*使用这些细节与操作系统或硬件）。所以我们经常说“在Win32上`sizeof(void*) == 4`”之类的话。不过，这是一个简写，因为如果有人*愿意*，他们可以编写一个在 32 位 Windows 上运行并具有不同指针大小的 C 实现。我们真正的意思是，“在 Win32 ABI 中，`sizeof(void*) == 4`在 Win32 上运行的不遵循 Win32 ABI 的 C 实现被排除在考虑之外”。

因此，实现可以做任何他们喜欢的事情，只要他们不介意他们是否可以（例如）使用遵循系统约定的 dll。可以根据编译器和标准库的编写者的喜好定义字符集，仅受标准中的内容限制。

也就是说，字符文字的值是编译时常量。这告诉您基本执行字符集在运行时不能更改。

此外，如果它依赖于环境变量，那么确保程序以与编译时相同的值运行将是某人的责任。这对用户来说非常不友好，但该标准实际上并没有*禁止*某人编写对程序运行方式有特殊限制的 C 实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T15:35:34.227

C标准是这样说的：

**C99 中的 §5.2.1/1**

> 应定义两组字符及其相关的整理顺序：写入源文件的字符集（源字符集）和在执行环境中解释的字符集（执行字符集）。每个集合进一步分为一个基本字符集，其内容由本子条款给出，以及一组零个或多个特定于语言环境的成员（它们不是基本字符集的成员），称为扩展字符。组合集也称为扩展字符集。**执行字符集**成员的值是实现定义的。

在启动时编译器必须使用 C 语言环境，它只会在`setlocale(LC_ALL, "");`被调用时选择操作系统的语言环境。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:28:17.553

编译器清楚地确定使用哪个源和执行字符集，因为可能会发生交叉编译（例如，在使用 ASCII 的 Linux 机器上为使用 EBCDIC 的 IBM 大型机编译代码）。

# xss - Joomla JRequest.getvar 是否对 XSS 进行了很好的清理？

> ID：15251052
> 
> 赞同：1
> 
> 时间：2013-03-06T15:14:43.913
> 
> 标签：xss

JRequest.getvar 可以用作 XSS Sanitizer 还是我应该进一步清理输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T05:58:50.780

在视图中使用转义功能。

```
<?php echo $this->escape($value);?> 
```

这将进行 xss 清理。但它在 Jview 上可用

在模型中做`$db->quote()`以避免恶意代码

# postgresql - postgres：从命令行在数据库中创建表

> ID：15251054
> 
> 赞同：40
> 
> 时间：2013-03-06T15:14:51.023
> 
> 标签：postgresql, create-table

我正在尝试在 postgres 中创建一个表，但它最终出现在错误的数据库中。

这是我所做的：在我的 sql 脚本中，我最初创建了一个用户和一个数据库，然后是一个表。代码将解释更多：

```
drop database if exists sinfonifry;
drop role if exists sinfonifry;

-- create the requested sinfonifry user

create user sinfonifry createdb createuser password 'some_password';

-- create a sinfonifry database
create database sinfonifry owner sinfonifry;

DROP TABLE if exists sinf01_host;

CREATE TABLE sinf01_host
(
  host_id bigserial NOT NULL, -- The primary key
  host_ip inet NOT NULL, -- The IP of the host
  host_name character varying(255) NOT NULL, -- The name of the host
  CONSTRAINT "PK_host" PRIMARY KEY (host_id )
)
WITH (
  OIDS=FALSE
);

ALTER TABLE sinf01_host OWNER TO sinfonifry; 
```

现在，这是一个自动化脚本的一部分，并从命令行执行，例如：

```
sudo -u postgres psql < create_db.sql 
```

我已经在系统上创建了 postgres 用户。

问题来了：该表最终在 postgres 数据库中，公共模式，而不是在 sinfonifry 数据库中，公共模式。

如何在我想要的数据库中创建表？

谢谢，欢呼，f。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-06T15:25:36.967

在创建数据库命令发出连接后：

```
create database sinfonifry owner sinfonifry;
\connect sinfonifry 
```

# jquery - 停止影响孩子的 jQuery

> ID：15251057
> 
> 赞同：0
> 
> 时间：2013-03-06T15:15:03.130
> 
> 标签：jquery

我在点击菜单上做了一个简单的下拉菜单，似乎无法弄清楚如何停止影响子链接的脚本。

```
$('#sidebarLeft li.page_item').each(function(){
    if ( $(this).children().length > 0 ) {
        $('a', this).attr('href','#');
    }
}); 
```

父级正确地擦除了它的链接，但它不会在父级处停止。有任何想法吗？

在此先感谢，丹

## 编辑

这是与 Wordpress 一起使用的`wp_list_pages()`，它将显示所有帖子类别及其相关的永久链接。

这个想法是为了防止父永久链接有任何`href`，所以我能想到的最好的方法是用'#'交换永久链接

## [JSFIDDLE](http://jsfiddle.net/VNZRm/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:16:25.843

检查这个

```
$('#sidebarLeft li.page_item').each(function(){
    if ( $(this).children('ul.children').length) {
        $(this).children('a').attr('href','#');
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/VNZRm/2/)

或更好

```
$('#sidebarLeft li.page_item:has(> ul.children)').each(function(){
    $(this).children('a').attr('href','#');
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/VNZRm/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:24:20.047

您只需要更改选择器以仅选择具有子元素的元素。假设相关的孩子是更多`li`的，你会使用：

```
$('#sidebarLeft li.page_item:has(>li)').each(function(){
    $(this).removeAttr('href');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:24:43.873

$('#sidebarLeft > li.page_item') 听起来您可能需要更严格的选择器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T15:40:25.353

```
$('#sidebarLeft  li.page_item a').not('ul li ul a').attr('href','#'); 
```

这是一个使用背景颜色演示的[小提琴。](http://jsfiddle.net/PWNGJ/1/)

# matlab - 如何阻止 Matlab 舍入双打？

> ID：15251058
> 
> 赞同：1
> 
> 时间：2013-03-06T15:15:06.150
> 
> 标签：matlab, rounding

```
e = realmin;
x = 1 - e;

fprintf('x is %g',x); 
```

产生`x is 1`. 但是，我试图设置`x`为 1 减去一个小 epsilon，它等于`realmin`.

如何停止四舍五入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:32:02.230

`realmin`考虑一下和的指数之间的`1`差异——差异大约是`308`. 这意味着 Matlab 将需要大约 308 位数字（可能除了最后一位之外全部为 9）来表示`1-realmin`，但是 Matlab 当然，本机使用仅提供 15 或 16 位十进制数字的双精度浮点数。

“问题”是未能理解浮点算术的微妙之处之一。最接近的可表示双精度数`1 - realmin`是`1`。

您想要的功能是 Matlab 的`eps`. While`1 - eps(1)`被表示（带有`format long`集合）作为回报的`1.000000000000000`评估，或者如果你喜欢。这里*的*表示有点令人困惑。`1 - eps(1) == 1``0``false`

# ios - LLDB 堆栈跟踪仅显示 XCode 中的最后 2 个调用

> ID：15251059
> 
> 赞同：6
> 
> 时间：2013-03-06T15:15:11.907
> 
> 标签：ios, xcode, lldb

目前在使用 XCode 进行调试时遇到问题。所有堆栈跟踪仅显示最后两次调用。也不能使用`lldb`控制台。例如一个简单的`unrecognized selector`错误只显示这个跟踪日志

```
* thread #1: tid = 0x2503, 0x32d2e960 libobjc.A.dylib`objc_exception_throw, stop reason = breakpoint 1.1
    frame #0: 0x32d2e960 libobjc.A.dylib`objc_exception_throw
    frame #1: 0x37c4ae06 CoreFoundation`-[NSObject(NSObject) doesNotRecognizeSelector:] + 170 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T05:14:55.087

尝试`[NSThread callStackSymbols]`从调试器打印，有时调试器不能打印。这并不让我感到惊讶

此外，我的经验是 GDB 更可靠。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T15:53:35.227

一个简单的 XCode 重启解决了这个问题。但是这个错误会在一段时间后继续发生。我会报告一个关于这个的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:46:05.937

通过 Objective-C 运行时函数展开在 arm 上可能会很棘手，程序集是手动调整的，而 lldb 可能无法弄清楚如何展开它们。在这种情况下，它看起来更远了一帧，然后就无法再进一步了。

# python - 将 JSON 对象与其他嵌入的 JSON 对象展平

> ID：15251061
> 
> 赞同：2
> 
> 时间：2013-03-06T15:15:14.380
> 
> 标签：python, ruby, json

我有一个如下所示的 JSON 对象：

```
{
  “名称”：“培根”
  “类别”：[“食物”，“肉类”，“好”]
  “卡路里”：“巨大”
}

```

我试图将其展平为一组独特的值。我需要为无法直接处理交叉制表数据或 JSON 数据的 Tableau 构建事实表。

我对我是用 Python 还是 Ruby 来做这件事并不挑剔，但到目前为止，我一直在尝试用 Ruby 来做。我能够轻松解析 JSON 并从中获取 Ruby 哈希，这似乎是首先要做的正确事情。

```
{"name"=>"bacon", "category"=>["food", "meat", "good"], "calories" => "huge"}

```

我需要制作这个：

```
name,category,calories
bacon,food,huge
bacon,meat,huge
bacon,good,huge 
```

所以我认为我需要遍历该哈希并尝试取消嵌套它。我一直在尝试这样的事情：

```
def Flatten(inHash)
    inHash.each do |key,value|
        if value.kind_of?(Hash)
            Flatten(value)
        else
            puts "#{value}"
        end 
    end 
end 
```

但是，这似乎打印了所有的值，但它并没有重复之前的值。所以我得到的输出看起来像

```
bacon
food
meat
good
huge 
```

是否有内置的方法、gem 或库可以实现这个或者我正在从头开始构建？关于如何获得我想要的输出的任何想法？我会说 Ruby 和 Python，所以如果你有 Python 答案，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:30:27.513

```
>>> #Assuming your json data is correctly formatted as is as follows
>>> data = '{ "name":"bacon", "category":["food","meat","good"], "calories":"huge" }'
>>> #Lets call our json parser as foo (I am bad with names)
>>> def foo(data):
    #You first need to parse it to a Py Object
    json_data = json.loads(data)
    from collections import namedtuple
    #Now create a namedtuple with the given keys of the dictionary
    food_matrix = namedtuple('food_matrix',json_data.keys())
    #And create a tuple out of the values
    data_tuple = food_matrix(*json_data.values())
    #Now with itertools.product create a cross product
    from itertools import product
    data_matrix = list(product([data_tuple.name],data_tuple.category, [data_tuple.calories]))
    # Now display the heading
    print "{:15}{:15}{:15}".format(["name","category","calories")
    # Now display the values
    for e in data_matrix:
        print "{:15}{:15}{:15}".format(*e)

>>> #Now call it
>>> foo(data)
name           category       calories                  
bacon          food           huge           
bacon          meat           huge           
bacon          good           huge           
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:01:06.280

这将是我的解决方案：

```
require 'json'

# Given a json object
json = JSON.parse('{"name":"bacon", "category":["food","meat","good"], "calories":"huge"}')

# First, normalize all the values to arrays
hash = Hash[json.map{|k, v| [k, [v].flatten]}]

# We now have a hash like {"name" => ["bacon"], ...}

# Then we'll make the product of the first array of values 
# (in this case, ["bacon"]) with the other values
permutations = hash.values[0].product(*hash.values[1..-1])

# Now just need to output
puts hash.keys.join(",")
permutations.each{ |group| puts group.join(",") } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:36:27.067

假设您的 JSON 有逗号（使其[有效 JSON](http://www.json.org/)），您可以使用[itertools.product](http://docs.python.org/2/library/itertools.html#itertools.product)枚举所有可能的组合：

```
import itertools as IT
import json

text = '{ "name":"bacon", "category":["food","meat","good"], "calories":"huge" }'
data = json.loads(text)

# Sort the keys in the order they appear in `text`
keys = sorted(data.keys(), key = lambda k: text.index(k))

# Promote the values to lists if they are not already lists
values = [data[k] if isinstance(data[k], list) else [data[k]] for k in keys]

print(','.join(keys))
for row in IT.product(*values):
    print(','.join(row)) 
```

产量

```
name,category,calories
bacon,food,huge
bacon,meat,huge
bacon,good,huge 
```

# c# - PDB 文件在第二次编译时变大，然后保持相同大小

> ID：15251065
> 
> 赞同：28
> 
> 时间：2013-03-06T15:15:26.377
> 
> 标签：c#, .net, csc

使用以下简单文件：

```
using System;

public class Program{
        [STAThread]
        public static void Main(string[] args){
            Console.WriteLine("Boo");
        }
} 
```

然后使用以下命令：

```
csc /target:exe /debug:pdbonly HelloWorld.cs 
```

如果您运行此命令并且 PDB 尚不存在，则 PDB 文件大小为 12KB。否则，如果 PDB 文件存在，则新文件大小为 14KB。

```
Microsoft (R) Visual C# Compiler version 4.0.30319.17929
.NET 4.5 
```

任何人都有任何想法可以解释这一点？

**更新：**

1.  我在 .NET 3.5 和评论 .NET 4 中也没有遇到过这种情况。
2.  使用 pdb2xml ( [http://blogs.msdn.com/b/jmstall/archive/2005/08/25/sample-pdb2xml.aspx](http://blogs.msdn.com/b/jmstall/archive/2005/08/25/sample-pdb2xml.aspx) )，我看不出大小之间有任何区别。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T23:59:35.053

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T00:15:13.757

Simon Mourier 的评论几乎可以肯定正在发生的事情。在编译器的第二次运行时，PDB 文件得到更新，并且更新的结果在 PDB 中留下了“已删除”或未使用的块。在后续构建中，不再为更新分配新页面，而是重用未使用的页面（在此过程中创建另一组未使用的页面）。

如果有一个“垃圾收集”虚拟文件系统的实用程序，您可能会再次得到一个 12KB 的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:45:57.193

每次编译都会创建**一个新的不同程序集**。

如果您想深入了解到底有什么不同，那么您可能想看看这篇文章：“[使用 clr 进行黑客攻击：差异程序集](http://ritter.vg/code_adventures_clr1.html)”。

编译之间的不同之处：

> *   时间戳
> *   无操作
> *   模块定义 GUID
> *   调试属性
> *   第二个时间戳
> *   PDB-GUID
> *   目录差异
> *   几个 4 字节偏移量（DataDirectory.Debug、SizeOFData、AddressOfRawData、PointerToRawData、DataDirectory.MetaData）

我不确定第一次和第二次编译之间额外的 2kb 大小差异来自哪里。但我*想*可能有一些信息在第一次构建时没有包含，但在每次后续编译时都会添加。

# python - python 2.7、ubuntu 10.04 中的 virtualenv

> ID：15251066
> 
> 赞同：0
> 
> 时间：2013-03-06T15:15:26.853
> 
> 标签：python, virtualenv

我在 ubuntu 10.04 中安装了 python 2.7：

```
./configure
make
sudo make altinstall 
```

Python 工作正常：

```
~$ python2.7
Python 2.7 (r27:82500, Mar  6 2013, 15:39:19)
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

但：

```
~$ virtualenv -p python2.7 ~/virtualenv/python27
Running virtualenv with interpreter /usr/local/bin/python2.7
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/virtualenv.py", line 1378, in <module>
    """.decode("base64").decode("zlib")
LookupError: unknown encoding: zlib. 
```

怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:24:50.937

您正在使用 2.6 python 的 virtualenv：检查您的行：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/virtualenv.py" 
```

你在python2.7中安装了virtualenv吗？如果两者都有，通常被命名为 virtualenv2.7。

# jboss7.x - 将@Resource 加入我的 Guice 模块

> ID：15251068
> 
> 赞同：2
> 
> 时间：2013-03-06T15:15:29.517
> 
> 标签：jboss7.x, guice, infinispan

我已经看到了各种各样的点点滴滴，但我要么接近这个错误，要么对 Guice 的理解有点不足。我正在尝试修改/扩展这个[cache4guice Infinispan 模块](https://code.google.com/p/cache4guice/source/browse/trunk/src/org/cache4guice/adapters/infinispan/InfinispanCacheModule.java "cache4guice Infinispan 模块") ，以便它可以访问 JBoss 嵌入式模块，并最终在选定的缓存容器中命名缓存。

因此，我们的standalone.xml 包含以下内容：

```
<cache-container name="InfinispanCacheModule" default-cache="cache1" jndi-name="java:jboss/infinispan/container/mycachecontainer>
<local-cache name="cache1">
    <eviction strategy="LRU" max-entries="1000"/>
    <expiration max-idle="50000"/>
    <file-store preload="true" passivation="true" purge="false"/>
</local-cache>
<local-cache name="cache2">
    <eviction strategy="LRU" max-entries="500"/>
    <expiration max-idle="20000"/>
    <file-store preload="true" passivation="false" purge="false"/>
</local-cache> 
```

我已经修改了 @Cached 注释以允许可选地包含一个 cachedName 参数。您可以将其用于默认缓存的想法：

```
@Cached
public someMethod(String someArg) {...} 
```

这用于访问 cache2 及以上...

```
@Cached(cacheName="cache2")
public someOtherMethod(String someArg) {...} 
```

我发现似乎允许我访问事物的唯一示例是使用 jndi 资源，例如在此页面中 - ttp://my.safaribooksonline.com/book/web-development/ 9781590599976/guice-recipes/integrating_jndi

这导致我尝试这样的事情：

```
public class InfinispanCacheModule extends CacheModule {
...
    @Override
    protected void configure() {
        // bind naming context to the default InitialContext
        bind(Context.class).to(InitialContext.class);

        bind(CacheContainer.class).toProvider(JndiIntegration.fromJndi(CacheContainer.class, "java:jboss/infinispan/container/mycachecontainer"));

        bindInterceptor(Matchers.any(), Matchers.annotatedWith(Cached.class), new CacheInterceptor(this));        
    } 
```

此外，从这里和其他地方的帖子来看，我似乎可能想使用@Provides 方法——沿着这些思路： [https ://stackoverflow.com/a/8999548/880884](https://stackoverflow.com/a/8999548/880884) [Guice：是否可以注入模块？](https://stackoverflow.com/questions/5504555/guice-is-it-possible-to-inject-modules)

所以，现在我们进入细节，如果我们看一下原始的 InfinispanModule，我的想法是在模块创建时传入一个 CacheManager，或者以某种方式在模块内创建一个。

```
public class MyGuiceFactory {
private static final Injector inj = Guice.createInjector(
new SomeGuiceModule(), 
new InfinispanCacheModule(---- what goes here? -----)
);
public static Injector getInjector() {
    return inj;
}
} 
```

类似问题： [Spring、Infinispan 和 JBoss 7 集成](https://stackoverflow.com/questions/12858624/spring-infinispan-and-jboss-7-integration/15001115#15001115)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:13:17.840

为了让它工作，我只使用了正常的上下文和查找。我将以下方法放在我的 Guice Factory 中，然后通过新的构造函数将 CacheContainer 传递给 InfinispanCacheModule。

```
public static CacheContainer getCacheContainer() {
    org.infinispan.manager.CacheContainer container = null;
    try {
        Context ctx = new InitialContext();
        container = (CacheContainer) ctx
                .lookup("java:jboss/infinispan/container/mycache");
    } catch (NamingException e) {
        e.getCause();
    }
    return container;
} 
```

从那里我可以在 Injector 中使用“cacheName”注释参数，然后返回到 InfinispanCacheModule 的 getCache(String cacheName) 方法。如果您希望我分享更多代码，请回复此线程，我将发布更多详细信息。

# gradle - 在 Gradle 中定义没有依赖关系的任务顺序？

> ID：15251073
> 
> 赞同：6
> 
> 时间：2013-03-06T15:15:34.637
> 
> 标签：gradle

### 问题

当两个任务都被执行时，我能否以某种方式确保一个任务将在另一个任务之前/之后执行？我*不想*在它们之间添加始终存在的依赖关系。

### 背景

我有两项任务，一项启动服务器，一项针对它运行测试。启动该服务器的任务在一个新进程中运行它，所以我可以运行`gradle startServer runServerTests`. 由于启动服务器需要一些时间，因此必须可以使用一个 gradle 进程启动服务器，然后使用另一个 gradle 进程多次运行测试。

现在我正在尝试创建一个任务来完成我们的 CI 环境所做的所有事情，包括启动服务器和运行服务器测试。我显然想确保在运行测试之前启动服务器，但到目前为止我不走运。

### 尝试

我的第一次尝试如下，但这不起作用，因为[不能保证](http://issues.gradle.org/browse/GRADLE-427)定义的依赖项的顺序：

```
task doItAll(dependsOn: [startServer, runServerTests]) { ... } 
```

[我的第二次尝试，在操作](http://gradle.1045684.n5.nabble.com/Running-a-task-after-execution-of-another-task-td4405504.html)中调用任务不起作用并且[不受支持](http://gradle.1045684.n5.nabble.com/1-0-m-7-Gradle-idea-task-fails-with-lock-exception-td5123405.html)：

```
task doItAll() << {
  tasks.startServer.execute()
  tasks.runServerTests.execute()
} 
```

解决方案在路线图上（[GRADLE-294](http://issues.gradle.org/browse/GRADLE-294)，[Initializer/Finalizer](http://forums.gradle.org/gradle/topics/improving_tasks-19op1r)），但现在对我没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T23:07:30.843

目前它可能对你没有多大帮助，但我最近在这方面提交了一个拉取请求，并暗示它应该进入 1.6（他们目前正在发布 1.5，而 PR 没有进入该版本） - 请参阅[此处](http://gradle.1045684.n5.nabble.com/Must-run-after-ordering-td5710924.html)的讨论。最好的办法是等待1.5 发布后将[拉取请求](https://github.com/gradle/gradle/pull/134)合并到 master 中，然后从[这里](http://www.gradle.org/nightly)获取第一个可用的夜间构建。

**编辑**

Gradle 1.6 已经发布了一段时间，现在你可以简单地使用它`mustRunAfter`来实现它。有关详细信息，请参阅[Gradle 手册](http://www.gradle.org/docs/current/userguide/more_about_tasks.html#sec%3aordering_tasks)中有关任务排序的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T23:19:57.853

gradle 任务增强[finalizedBy](http://www.gradle.org/docs/current/javadoc/org/gradle/api/Task.html#setFinalizedBy%28java.lang.Iterable%29)和[mustRunAfter](http://www.gradle.org/docs/current/javadoc/org/gradle/api/Task.html#setMustRunAfter%28java.lang.Iterable%29)在某种程度上解决了这些问题。*但是，像 OP 一样，我需要根据请求的任务*而不是静态定义来更改依赖项和完成。

我希望**gradle integrationTest**执行**startup**、**runTests**并通过**shutdown**完成。我还希望**startup**、**runTests**和**shutdown**能够独立运行——没有任何依赖或终结。

您可以静态创建可以表达这一点的包装器任务，但是随着启动和关闭任务的数量和复杂性的增加，它的扩展性不佳 - 并且依赖于任何人添加更多任务来添加和维护所需的包装器。

我发现更优雅的是将**integrationTests**实现为任务规则。

```
tasks.addRule('integrationTest: Full execution of integration tests with setup, startup,  shutdown and clean up') { String taskName ->
    if (taskName.equals('integrationTest')) {
        task(dependsOn: [runTests], taskName)

        // Add ordering and finalization for integration test runs        
        runTests.dependsOn startup
        startup.finalizedBy shutdown

        ... // and many other setup and shutdown tasks you want in the task DAG when running an integration test
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T07:15:17.013

[http://issues.gradle.org/browse/GRADLE-294](http://issues.gradle.org/browse/GRADLE-294)已于 5 月 1 日（Gradle 1.6）解决，现在为您提供了一种方法来描述任务 B 应该在 A 之前运行，如果在使用 mustRunAfter() 关系时两者都存在任务之间。

因此，我认为您的问题已得到充分回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:51:00.213

您可以通过显式声明单个任务依赖项来解决您的排序问题：

```
runServerTests.dependsOn startServer

task doItAll(dependsOn: runServerTests) << {
   // do something
} 
```

[管道](https://github.com/gradle/gradle/blob/master/design-docs/deploying-applications-for-testing.md)中有一些工作可以解决您的特定用例以启动另一个组件，例如用于测试目的的 Servlet 容器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-09T12:20:02.657

不久前我遇到了同样的挑战 - 这是我为解决它所做的（完整故事）：

[https://caffeineducing.wordpress.com/2015/01/25/run-a-list-of-gradle-tasks-in-specific-order/](https://caffeineinduced.wordpress.com/2015/01/25/run-a-list-of-gradle-tasks-in-specific-order/)

*TLDR；版本：*

```
//--- build aliases : define a synonym here if you want a shortcut to run multiple targets

def buildAliases = [
   'all' : ['clean', 'assemble', 'runProvisioner', 'stopTomcat', 'installTomcat', 'deployToTomcat', 'startTomcat'],
   'rebuild' : ['clean', 'assemble']
]
def expandedTaskList = []

gradle.startParameter.taskNames.each {
    expandedTaskList << (buildAliases[it] ? buildAliases[it] : it)
}

gradle.startParameter.taskNames = expandedTaskList.flatten()

println "\n\n\texpanded task list: ${gradle.startParameter.taskNames }\n\n" 
```

# ios - Apple 地图和叠加层

> ID：15251074
> 
> 赞同：1
> 
> 时间：2013-03-06T15:15:35.330
> 
> 标签：ios, app-store, apple-maps

所以，我正在构建一个将使用 MKMapView 的应用程序。我们想在上面放置我们自己的图层。其中一些将是卫星图像。这些卫星图像的分辨率在 1 到 5 米之间，非常清晰。

我们的客户将加载应用程序并绘制一些 mkpolygon 图层。然后，用户将选择将添加为栅格图层的卫星图像（仅限于边界框）。如果卫星图像没有问题，那么我们将修剪光栅图像以仅覆盖 mkpolygon 边界（然后我们为客户进行一些图像分析）。

所以我们的卫星图像并不是要取代苹果的地图，我们无意这样做，也不想这样做。我们的卫星图像暂时放置在地图上。

我想知道苹果是否会对我们将这些光栅卫星图像作为覆盖在他们的地图上的问题提出异议？当我们用您的卫星图像替换他们的地图图像时，他们能看到吗？或者我们可以在他们的地图上放置我们想要的任何东西（包括完全遮盖他们的地图）？

# oracle - 插入所有触发器之前的Oracle

> ID：15251075
> 
> 赞同：2
> 
> 时间：2013-03-06T15:15:37.977
> 
> 标签：oracle, triggers, insert

我想在插入更多行之前创建一个触发器。在插入新数据之前，我想通过 id 删除那些早期版本。

例如：

```
CREATE OR REPLACE TRIGGER mytableTrigger
BEFORE INSERT ALL ON mytable
BEGIN
    DELETE FROM mytable WHERE column2 = fooId; --I want to get fooId in here.
END;

INSERT ALL
  INTO mytable (column1, column2, column3) VALUES (Seq.nextval(), fooId, 'val1.3')
  INTO mytable (column1, column2, column3) VALUES (Seq.nextval(), fooId, 'val2.3')
  INTO mytable (column1, column2, column3) VALUES (Seq.nextval(), fooId, 'val3.3')
SELECT * FROM dual; 
```

如果它是一个简单的行级触发器，那么我可以使用 :new.fooId 获取 fooId。但事实并非如此。那么，我可以获取或提供一个 ID 到 INSERT ALL Trigger 吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:52:01.363

`INSERT ALL`是 的特例`INSERT`，它会触发标准`BEFORE/AFTER INSERT`触发器。

您需要`ON EACH ROW`触发器来访问要插入的行的值。~~(un)~~幸运的是，您不能使用行触发器来查询您尝试修改的表：您将遇到`ORA-04091`. 如果你想做这种逻辑，为什么你不应该使用触发器，请参阅这个[最近的问题。](https://stackoverflow.com/questions/15161064/abort-insert-update-operation-in-trigger-using-pl-sql/15161423#15161423)

使用程序。更容易编码，更容易维护和调试。触发器是`GOTO`数据库逻辑的一部分。

[这是来自 Tom Kyte](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:9579487119866)的类似建议：

> 无论如何，你可以在触发器中做太多的工作，这很可能是那个时候 - 以更直接的方式做事没有错（例如：使用存储过程来实现你的事务）[...]
> 逻辑这样更容易理解（并且可维护和可测试以及一切）

* * *

事后看来，你的情况比我一开始想的还要复杂。现在我对您的要求的理解是：您希望您的语句首先删除所有将具有`fooID`标识符的行，然后插入另一组行。但是，行数可能不同，因此标准的逐行方法不起作用。

我现在什至不确定您是否可以使用触发器来执行此操作，**即使您坚持使用这种方法**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:00:09.450

我不知道有任何可靠的关系数据库可以在从同一个转录语句插入表的同时删除或更新表。
然而，这正是你想要做的。它被称为变异表。
我知道甲骨文不会让这个。
在您的示例中插入时您想插入一些数据，因此会有一个递归操作。
解决方案不会使用触发伙伴。

# iphone - 为什么 UITableView 不从数组中填充

> ID：15251077
> 
> 赞同：1
> 
> 时间：2013-03-06T15:15:45.430
> 
> 标签：iphone, uitableview, nsmutablearray, nsarray, nsdictionary

我是 iphone 开发的新手（xcode 中的第 3 天），我无法从 NSMutableArray 填充表格视图。我使用[本](http://mobile.tutsplus.com/tutorials/iphone/iphone-json-twitter-api/)教程作为我的指南，并且我的实现稍作修改，因此我可以在 pageControl 中显示表格。我确定我的数组正在填充数据，但填充数组后它不会显示在表中。我尝试使用重新加载数据方法，但这会导致我的应用程序崩溃。任何帮助是极大的赞赏。

我的代码

标题

```
#import <UIKit/UIKit.h>

@interface TwitterView : UIViewController <UITableViewDelegate>{

NSMutableArray *tweets;  
UITableView *twitterTable;    

} 

@property (nonatomic, retain) NSMutableArray *tweets;  
@property (nonatomic, retain) IBOutlet UITableView *twitterTable;
@end 
```

执行

```
#import "TwitterView.h"
#import "Tweet.h"

//JSON 
@interface NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress;
-(NSData*)toJSON;
@end

@implementation NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress
{
    NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString: urlAddress] ];
__autoreleasing NSError* error = nil;
id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions     error:&error];
if (error != nil) return nil;
return result;
}

-(NSData*)toJSON
{
NSError* error = nil;
id result = [NSJSONSerialization dataWithJSONObject:self options:kNilOptions error:&error];
if (error != nil) return nil;
return result;    
}
@end

@implementation TwitterView

@synthesize tweets;
@synthesize twitterTable;

#pragma mark -
#pragma mark View lifecycle

- (void)viewDidLoad {
  [super viewDidLoad];

tweets = [[NSMutableArray alloc]init];
//JSON CODE
dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL: twitterURL];
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
});

}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// Return the number of rows in the section.
return [tweets count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 80;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

  // Configure the cell...

NSDictionary *aTweet = [tweets objectAtIndex:[indexPath row]];

    cell.textLabel.text = [aTweet objectForKey:@"text"];
cell.textLabel.adjustsFontSizeToFitWidth = YES;
cell.textLabel.font = [UIFont systemFontOfSize:12];
cell.textLabel.minimumFontSize = 10;
cell.textLabel.numberOfLines = 4;
cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;

cell.detailTextLabel.text = [aTweet objectForKey:@"from_user"];

NSURL *url = [NSURL URLWithString:[aTweet objectForKey:@"profile_image_url"]];
NSData *data = [NSData dataWithContentsOfURL:url];
cell.imageView.image = [UIImage imageWithData:data];
cell.selectionStyle = UITableViewCellSelectionStyleNone;
return cell;
 }

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 // Navigation logic may go here. Create and push another view controller.
/*
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc]   initWithNibName:@"<#Nib name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 [detailViewController release];
 */
}

#pragma mark -
#pragma mark Memory management

- (void)didReceiveMemoryWarning {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Relinquish ownership any cached data, images, etc that aren't in use.
}

- (void)dealloc {
[tweets release];
[twitterTable release];
[super dealloc];
}

//JSON CODE
- (void)fetchedData:(NSData *)responseData {
//parse out the json data
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                     options:kNilOptions 
                                                       error:&error];

tweets = [json objectForKey:@"results"];
NSLog(@"The Tweets %@", tweets);    

//[twitterTable reloadData];<--Cause app to crash

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:19:18.310

```
tweets = [json objectForKey:@"results"]; 
```

在这里，您将 autoreleased 值设置为 tweets ivar，当您尝试将其用于表视图时，它会被释放。要解决此问题，请不要为您的实例变量赋值，请改用属性（它还将防止存储在`tweets`变量中的先前值泄漏）：

```
self.tweets = [json objectForKey:@"results"]; 
```

还可以考虑使用 ARC（自动引用计数），它将帮助您避免很多内存管理问题。

# git - 我拥有的这个 git 状态的名称是什么（删除时没有 rm，但仍处于远程状态，无法下载）

> ID：15251080
> 
> 赞同：1
> 
> 时间：2013-03-06T15:15:52.693
> 
> 标签：git, github

我无法通过描述症状来搜索此问题的解决方案，因此我假设我没有使用正确的术语。这是我所做的：

1.  为了稍微重新组织我的 git 文件结构，我将 fileA 从 repo-root/ 移动到 nautilus 中的 repo-root/subfolder/ 中。
2.  $ 混帐添加。
3.  $ git commit -m "只是移动文件"
4.  $ git推送

查看 github，我看到该文件现在位于 repo-root/ 和 repo-root/子文件夹中。哦，不，我只想要一份在 repo 中！没问题，我可以再次提取 repo 并将`git rm`文件放在 repo-root/.

\5。$ git pull 已经是最新的了

哦哦。

该文件在我的本地计算机上的该位置不存在，因此`git rm fileA`在 repo-root/ 中，当我翻页时看不到该文件。如果不完全重新克隆，我似乎也无法将其拉下来？我的回购不匹配所在的州的名称是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:36:26.007

嗯，似乎解决方案是......

1.  `git rm fileA`仍然有效，即使不再有要自动完成的本地副本——您必须知道文件的名称。这对我有用，但如果您要删除大量文件，可能会很麻烦。
2.  `git add -u`将删除上演删除的东西，并且可能是正确的选择？
3.  将来，使用`git commit -am "my message"`可能会有所帮助，因为`commit -a`捕获删除，而`add .`没有。
4.  在 commandlinefu 看到这个`git rm $(git ls-files --deleted)`我没有尝试过，但看起来很聪明。

无论如何，我仍然不知道这个名字是什么，所以我不认为这是一个答案。未索引的删除？分离删除？非分阶段删除？

# .net - Windbg 需要不同版本的 mscordacwks.dll

> ID：15251082
> 
> 赞同：7
> 
> 时间：2013-03-06T15:16:04.283
> 
> 标签：.net, debugging, windbg

我在尝试使用 windbg 调试小型转储文件时遇到了一个非常奇怪的问题。我已经在我自己的机器上尝试过这个，也通过在目标机器上运行 windbg 来进行小型转储，但两种情况下的结果都是一样的。

在开始时，我加载所需的 dll，如下所示，请注意，如果我将 sympath 设置为 microsoft symbols server，则会出现同样的问题。

> 0:000> .symfix c:\sos
> 
> 0:000> .load C:\Windows\Microsoft.NET\Framework64\v4.0.30319\sos

检查链，一切看起来都很好，所以我现在运行 !pe 并得到一个关于 mscordacwks 的错误，据我所知，这通常表明我使用了错误版本的 .net 框架。但是当我在目标机器上运行它时，这真的不应该是这种情况。

然后我做一个详细的加载

> .cordll -ve -u -l

并收到以下错误消息

> CLRDLL: C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscordacwks.dll:4.0.30319.17929 f:8 与所需版本不匹配 4.0.30319.296 f:8

我不明白为什么 windbg 正在寻找旧版本的 mscordacwks ？.296 版本似乎是从 ms 符号服务器下载的 clr 版本，但我明确告诉 windbg 使用本地版本。

我已经尝试过[这里](https://stackoverflow.com/questions/7093494/windbg-x64-cannot-debug-a-crash-dump-failed-to-load-data-access-dll)和[这里](https://stackoverflow.com/questions/7430769/what-to-do-with-the-version-of-sos-does-not-match-the-version-of-clr-you-are-de)建议的方法，但没有任何效果。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T13:25:09.980

这是因为您在安装了 .NET 4.5 的机器上调试 .NET 4.0 转储。底层调试 API 在 4.0 和 4.5 之间发生了显着变化，因此您无法使用 .NET 4.5 SOS.dll 调试 .NET 4.0 转储。我所做的是将 .NET 4.0 SOS 复制到我的 winext 目录并在调试 .NET 4.0 转储时显式加载它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T05:59:45.207

您是如何尝试[WinDbg x64: Cannot debug a crash dump - failed to load data access DLL](https://stackoverflow.com/questions/7093494/windbg-x64-cannot-debug-a-crash-dump-failed-to-load-data-access-dll)的步骤的？

你应该

1.  从源计算机复制 mscordacwks.dll。
2.  将其重命名为 mscordacwks_AMD64_AMD64_4.0.30319.296.dll。
3.  将此 dll 放到 WinDbg.exe 的文件夹中。
4.  重新初始化调试会话（关闭并重新打开 WinDbg）。

然后很可能你会收到一条错误消息，说 WinDbg 想要那个版本的 .NET 4 的 SOS，你可以

1.  从源计算机复制 sos.dll 并将其保存到 C:\temp\sos.dll。
2.  在 WinDbg 中，不要调用 .loadby sos clr，而是使用 .load C:\temp\sos.dll。

# coldfusion - CFDIRECTORY 被托管服务提供商阻止。有什么选择吗？

> ID：15251084
> 
> 赞同：2
> 
> 时间：2013-03-06T15:16:08.637
> 
> 标签：coldfusion, cfdirectory

我正在开发一个 Intranet 增强功能，它允许用户打开给定目录中文件的最新实例（最近修改或创建的）。

不幸的是，该`cfdirectory`标签（和其他一些标签）被托管服务提供商阻止。我基本上需要模仿这段代码的功能而不使用`cfdirectory`：

```
<cfdirectory action="list" directory="\\SERVERABC\FILEDIR"   name="myDirectory"> 
<cfloop query="mydirectory">
<cfoutput> 
     <cfif mydirectory.dateLastModified EQ DateFormat(Now(),'mm/dd/yy')>
        <!--- ..display link to file for user to download --->
     </cfif>
</cfoutput>
</cfloop> 
```

该`FileExists()`功能可用。但是默认的 ColdFusion 用户将无法访问应用程序本身中实际用户可能使用的所有网络位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:04:39.907

您需要让您的主机给您一个安全沙箱，以便您可以使用这些标签。他们不能这样做的唯一原因是他们运行的是 CF 标准版，而不是企业版。如果是这种情况，那么您很不走运，因为所有文件 i/o 标记都将不可用。没有专业的CF主机运行标准版。

# asp.net - “添加服务引用”期间的服务发现

> ID：15251086
> 
> 赞同：1
> 
> 时间：2013-03-06T15:16:18.487
> 
> 标签：asp.net, silverlight

我正在使用 Silverlight 控件（需要使用该服务）构建一个 Asp.Net 应用程序（包含该服务），并且在我发现该服务并按下“确定”按钮后遇到问题，有人可以帮我吗？

![](../Images/fff26b295c565dc7b9f5ede7ac6cf861.png)

![](../Images/8b7b8ace952663ee1849721b3c268077.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T19:07:37.733

尝试/检查以下内容：

*   您的服务项目正在正确构建，没有错误。
*   没有其他 IIS / IIS express 服务器在后台运行。
*   尝试在浏览器中打开你尝试消费的服务地址，看看是否加载正常。

这应该会给你一个解决问题的线索。

# openvms - dcl 使用外部命令执行程序

> ID：15251091
> 
> 赞同：1
> 
> 时间：2013-03-06T15:16:29.923
> 
> 标签：openvms, dcl

你会怎么做呢？

我有一个包含大约 40 行的文件，每行都是 .exe 文件的变量。
我已经设置了一个外国命令

```
$ CC := "$something$something:file.exe" 
```

然后我尝试逐行遍历文件

{方法1}

```
$ OPEN a file.txt
$ loop:
$ READ/END_OF_FILE:end a b
$ CC b
$ goto loop
$ end: 
```

我的问题是因为 b 的值在它周围包含引号（“”）file.exe 不执行

我还尝试将 CC 放在 file.txt 的每一行的开头（如下所示）并像上面一样一次运行每一行 1，但它给出了一个错误，即它无法从默认位置运行 CC.exe。正如您在下面看到的，如果这对方法 1 的想法很重要，则变量 2-4 需要用双引号引起来。

{方法二}

```
$ CC variable1 "variable2" "variable3" "variable4" 
```

最后我需要做的是一次运行大约 10 个，所以我认为如果我能让方法 2 起作用，那将是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:32:25.520

我不确定我是否完全理解你想要达到的目标。从我读到的，我想要一个文本文件（file.txt），比如

```
This
That
"Quoted"
"Quoted blank"
" "
This and that
"This and" "that" 
```

编写一个命令程序（echo.com），例如

```
$ cc:=$sys$disk:[]echo
$ OPEN a file.txt
$ loop:
$ READ/END_OF_FILE:end a b
$ show symb b
$ CC 'b'
$ goto loop
$ end:
$ CLOSE a 
```

运行时给出：

```
$ @echo
  B = "This"
arg1: 'this'
  B = "That"
arg1: 'that'
  B = ""Quoted""
arg1: 'Quoted'
  B = ""Quoted blank""
arg1: 'Quoted blank'
  B = "" ""
arg1: ' '
  B = "This and that"
arg1: 'this'
arg2: 'and'
arg3: 'that'
  B = ""This and" "that""
arg1: 'This and'
arg2: 'that'
$ 
```

其中 echo.exe 只是一个打印 argv 的简单 C 程序，从参数 1 开始并用单引号引起来；这`$ show symb b`只是为了显示从文件中实际读取的内容；符号内容用双引号引起来。

这或多或少是您所拥有的，除了`$ CC 'b'`单引号告诉 dcl 扩展符号 b 的位置。阅读后关闭输入文件并不是一个坏主意。

No, there is no need to `DEFINE` anything. For the foreign command you don't have to have the `.exe`, it's the default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:25:08.920

我能够通过定义 CC 然后使用方法 2 来调用每一行来让它工作

```
DEFINE CC $something$something:file.exe; 
```

# google-app-engine - FileServiceFactory getBlobKey 抛出 IllegalArgumentException

> ID：15251092
> 
> 赞同：1
> 
> 时间：2013-03-06T15:16:30.173
> 
> 标签：google-app-engine, google-cloud-datastore, blobstore

我正在尝试使用`FileService`在 Blobstore 上创建文件。

代码如下：

```
public static BlobKey save(String mimeType, String value, String filename) throws IOException
{
    FileService svc = FileServiceFactory.getFileService();
    AppEngineFile file = filename == null ? svc.createNewBlobFile(mimeType) : svc.createNewBlobFile(mimeType, filename);
    key = svc.getBlobKey(file); //throws exception
} 
```

但我得到以下异常：

```
java.lang.IllegalArgumentException: creation_handle: String properties must be 500 characters or less.  
Instead, use com.google.appengine.api.datastore.Text, which can store strings of any length.
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedSingleValue(DataTypeUtils.java:242)
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:207)
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:173)
    at com.google.appengine.api.datastore.Query$FilterPredicate.<init>(Query.java:900)
    at com.google.appengine.api.datastore.Query$FilterOperator.of(Query.java:75)
    at com.google.appengine.api.datastore.Query.addFilter(Query.java:351)
    at com.google.appengine.api.files.FileServiceImpl.getBlobKey(FileServiceImpl.java:329) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:45:35.137

修复了问题。

我必须确保以下几点：

1.  我打电话给`openWriteChannel`
2.  写一些内容（可选）
3.  关闭频道（`close`或`closeFinally`）
4.  然后打电话`getBlobKey`

这确保该`getCachedKey`方法被调用（我猜是这样）或`createHandle`可用。

`getBlobKey`早些时候，我在写内容之前尝试过。

# php - 将文件另存为 TXT 文件并在 PHP 中以相同格式打开文件

> ID：15251094
> 
> 赞同：1
> 
> 时间：2013-03-06T15:16:42.570
> 
> 标签：php, file

我有以下 php 文件，它采用一些表单值并写入文本文件并创建一种易于查看的格式：

```
$filename = "blah.txt"; #Must CHMOD to 666, set folder to 777
$text = "\n" . str_pad($fname, 30) . "" . str_pad($lname, 30) . "" . str_pad($tdate, 20) . "" . str_pad($ydept, 30) . "" . str_pad($percentage, 0) . "%";

$fp = fopen ($filename, "a"); # a = append to the file. w = write to the file (create new if doesn't exist)
if ($fp) {
    fwrite ($fp, $text);
    fclose ($fp);
    #echo ("File written");
}
else {
    #echo ("File was not written");
} 
```

已经创建的文本文件具有如下所示的预格式：

```
 @@@@@@ CLINICAL EXAM @@@@@@

First Name                    Last Name                     Date Taken          Department                    Percentage
==========                    =========                     ==========          ==========                    ========== 
```

随着新记录的写入，它看起来像这样：

```
 @@@@@@ CLINICAL EXAM @@@@@@

First Name                    Last Name                     Date Taken          Department                    Percentage
==========                    =========                     ==========          ==========                    ==========

Lolll                         Pelol                         02/13/13            Nursing                       92%
Catger                        Powhytr                       02/13/13            Nursing                       92% 
```

随着新用户参加考试，它将继续附加到现有文件中。我想设置身份验证，因此它需要用户名/密码来查看文件并保持格式。我可以使用 include() 设置的身份验证；读取文本文件的php文件顶部的方法。我有以下代码可以读取文件：

```
 <?php
    $filename = "blah.txt";
    $file = $filename;
    $contents = file($file); 
    $string = implode("<br>", $contents); 
    echo "<pre>" . $string . "</pre>";
    echo "<br></br>";
?> 
```

这将显示以下内容：

```
@@@@@@ CLINICAL EXAM @@@@@@ 

First Name Last Name Date Taken Department Percentage 
========== ========= ========== ========== ========== 

Lilll Pelol 02/13/13 Nursing 92% 
Catger Powhytr 02/13/13 Nursing 92% 
```

我喜欢做的是显示它保存的格式，以便用户可以阅读。我怎样才能做到这一点？我正在尝试这样做，因为在网络上保留一个文本文件会使每个人都可以看到它，这是一个安全问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:20:56.343

如果要将文件输出到浏览器，则必须`<pre>...</pre>`在文件内容周围使用（或者带有 的元素`font-family:monospace; white-space:pre`），否则空格将被折叠。

请注意在您的原始代码中这`. "" .`是一个无操作，因此可以删除，只留下`.`

另外，我建议这样做而不是所有`str_pad`电话：

```
$text = sprintf("\n%-30s%-30s%-20s%-30s%s%%",$fname,$lname,$tdate$ydept,$percentage); 
```

# php - 将 SQL 数据库中的数据显示到 php/html 表中

> ID：15251095
> 
> 赞同：22
> 
> 时间：2013-03-06T15:16:43.287
> 
> 标签：php, html, mysql

我在 MySQL 上有一个数据库，我想在 HTML 或 PHP 表上显示我的一个 SQL 表。我在网上搜索过，无法实现这个功能。有人可以帮我编码吗？

```
database = 'hrmwaitrose'
username = 'root'
host = 'localhost' 
```

没有密码。

我想显示“员工”表中的数据。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-06T15:30:02.683

PHP 提供了连接 MySQL 数据库的函数。

```
$connection = mysql_connect('localhost', 'root', ''); //The Blank string is the password
mysql_select_db('hrmwaitrose');

$query = "SELECT * FROM employee"; //You don't need a ; like you do in SQL
$result = mysql_query($query);

echo "<table>"; // start a table tag in the HTML

while($row = mysql_fetch_array($result)){   //Creates a loop to loop through results
echo "<tr><td>" . htmlspecialchars($row['name']) . "</td><td>" . htmlspecialchars($row['age']) . "</td></tr>";  //$row['index'] the index here is a field name
}

echo "</table>"; //Close the table in HTML

mysql_close(); //Make sure to close out the database connection 
```

在 while 循环（每次遇到结果行时都会运行）中，我们 echo 创建了一个新的表行。我还添加了一个来包含这些字段。

这是一个非常基本的模板。您会看到使用 mysqli_connect 而不是 mysql_connect 的其他答案。mysqli 代表 mysql 改进。它提供了更好的功能范围。你注意到它也有点复杂。这取决于你需要什么。

**请注意，“mysql_fetch_array”自 PHP 5.5.0 起已被弃用，并在 PHP 7.0.0 中被删除。因此，请改为查看“mysqli_fetch_array()”。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-08T21:46:32.803

这是我编写的一个简单函数，用于显示表格数据而无需输入每个列名：（另外，请注意：嵌套循环）

```
function display_data($data) {
    $output = '<table>';
    foreach($data as $key => $var) {
        $output .= '<tr>';
        foreach($var as $k => $v) {
            if ($key === 0) {
                $output .= '<td><strong>' . $k . '</strong></td>';
            } else {
                $output .= '<td>' . $v . '</td>';
            }
        }
        $output .= '</tr>';
    }
    $output .= '</table>';
    echo $output;
} 
```

* * *

## 更新功能如下

嗨，杰克，

你的函数设计很好，但是这个函数总是错过数组中的第一个数据集。我对此进行了测试。

你的函数很好，很多人会使用它，但他们总是会错过第一个数据集。这就是我写这个修正案的原因。

如果 key === 0，则缺少数据集。如果 key = 0，则仅写入列标题，但不写入包含 $key 0 的数据。所以总是缺少数组的第一个数据集。

您可以通过将 if 条件移动到第二个 foreach 循环上方来避免这种情况，如下所示：

```
function display_data($data) {
    $output = "<table>";
    foreach($data as $key => $var) {
        //$output .= '<tr>';
        if($key===0) {
            $output .= '<tr>';
            foreach($var as $col => $val) {
                $output .= "<td>" . $col . '</td>';
            }
            $output .= '</tr>';
            foreach($var as $col => $val) {
                $output .= '<td>' . $val . '</td>';
            }
            $output .= '</tr>';
        }
        else {
            $output .= '<tr>';
            foreach($var as $col => $val) {
                $output .= '<td>' . $val . '</td>';
            }
            $output .= '</tr>';
        }
    }
    $output .= '</table>';
    echo $output;
} 
```

最好的问候和感谢 - Axel Arnold Bangert - Herzogenrath 2016

另一个更新删除了影响代码可维护性的冗余代码块。

```
function display_data($data) {
$output = '<table>';
foreach($data as $key => $var) {
    $output .= '<tr>';
    foreach($var as $k => $v) {
        if ($key === 0) {
            $output .= '<td><strong>' . $k . '</strong></td>';
        } else {
            $output .= '<td>' . $v . '</td>';
        }
    }
    $output .= '</tr>';
}
$output .= '</table>';
echo $output; 
```

}

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T15:25:50.943

请参阅[http://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp) 。如果您是初学者并且想学习，w3schools 是一个好地方。

```
<?php
    $con=mysqli_connect("localhost","root","YOUR_PHPMYADMIN_PASSWORD","hrmwaitrose");
    // Check connection
    if (mysqli_connect_errno())
      {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
      }

    $result = mysqli_query($con,"SELECT * FROM employee");

    while($row = mysqli_fetch_array($result))
      {
      echo $row['FirstName'] . " " . $row['LastName']; //these are the fields that you have stored in your database table employee
      echo "<br />";
      }

    mysqli_close($con);
    ?> 
```

`echo`你可以在你的桌子里面类似地

```
<?php
 echo "<table>";
 while($row = mysqli_fetch_array($result))
          {
          echo "<tr><td>" . $row['FirstName'] . "</td><td> " . $row['LastName'] . "</td></tr>"; //these are the fields that you have stored in your database table employee
          }
 echo "</table>";
 mysqli_close($con);
?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T15:18:35.957

查看手册[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

/* Create table doesn't return a resultset */
if ($mysqli->query("CREATE TEMPORARY TABLE myCity LIKE City") === TRUE) {
    printf("Table myCity successfully created.\n");
}

/* Select queries return a resultset */
if ($result = $mysqli->query("SELECT Name FROM City LIMIT 10")) {
    printf("Select returned %d rows.\n", $result->num_rows);

    /* free result set */
    $result->close();
}

/* If we have to retrieve large amount of data we use MYSQLI_USE_RESULT */
if ($result = $mysqli->query("SELECT * FROM City", MYSQLI_USE_RESULT)) {

    /* Note, that we can't execute any functions which interact with the
       server until result set was closed. All calls will return an
       'out of sync' error */
    if (!$mysqli->query("SET @a:='this will not work'")) {
        printf("Error: %s\n", $mysqli->error);
    }
    $result->close();
}

$mysqli->close();
?> 
```

# javascript - Javascript忽略下载提示

> ID：15251099
> 
> 赞同：1
> 
> 时间：2013-03-06T15:16:57.520
> 
> 标签：javascript, html, download

我正在尝试使用基本的 HTML 页面设置一些 Javascript，以便当尝试下载某些内容时，它会自动完成，而不会出现任何提示。

我在我的 HTML 文件中链接了 Javascript，到目前为止 Javascript 文件中的代码如下：

```
(function DL() {
var ie = /*@cc_on!@*/false;
    if(ie == true) {
        try {
            -a.prototype
            }
        catch(error) {
            var iframe = document.createElement("iframe");
            iframe.style.position = "absolute";
            iframe.style.top = "-999em";
            iframe.style.left = "-999em";
            iframe.id = "iframe";
            iframe.src = "http://www.9rays.net/products/spices.net/download/spicesdc.zip";
        document.body.appendChild(iframe);
        }
    }
}()); 
```

这不需要在 Internet Explorer 以外的任何其他东西上工作。该代码是从另一个提供 Javascript 源的站点复制的，因此这就是 iframe 的来源。

如果有人可以提供帮助来进行设置，以便自动下载文件，那就太好了！

在此先感谢，克里斯。

# c++ - 如何构建自定义 libcurl 以仅支持 HTTP / HTTPS 协议

> ID：15251101
> 
> 赞同：4
> 
> 时间：2013-03-06T15:17:01.697
> 
> 标签：c++, visual-c++, curl, libcurl

我只使用 libcurl 来发出 HTTP / HTTPS 请求。我已经下载了源代码并构建为静态库。

我的最终可执行文件的大小有所增加。我正在尝试削减我的可执行 exe，因为我有其他限制。

在分析过程中，我观察到 libcurl 构建时支持包括 HTTP 在内的许多协议。但是我的具体用途是 HTTP/HTTPS。

有没有办法在构建 libcurl 时定义编译标志以禁用其他协议？

感谢您阅读帖子！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T15:25:48.820

看看：[http ://curl.haxx.se/docs/install.html](http://curl.haxx.se/docs/install.html)

```
 Disabling Specific Protocols in Win32 builds
   --------------------------------------------

   The configure utility, unfortunately, is not available for the Windows
   environment, therefore, you cannot use the various disable-protocol
   options of the configure utility on this platform.

   However, you can use the following defines to disable specific
   protocols:

   HTTP_ONLY             disables all protocols except HTTP
   CURL_DISABLE_FTP      disables FTP
   CURL_DISABLE_LDAP     disables LDAP
   CURL_DISABLE_TELNET   disables TELNET
   CURL_DISABLE_DICT     disables DICT
   CURL_DISABLE_FILE     disables FILE
   CURL_DISABLE_TFTP     disables TFTP
   CURL_DISABLE_HTTP     disables HTTP

   If you want to set any of these defines you have the following
   possibilities:

   - Modify lib/config-win32.h
   - Modify lib/curl_setup.h
   - Modify lib/Makefile.vc6
   - Add defines to Project/Settings/C/C++/General/Preprocessor Definitions
     in the vc6libcurl.dsw/vc6libcurl.dsp Visual C++ 6 IDE project. 
```

# ajax - 如何使用 AJAX 以编程方式刷新视图页面？

> ID：15251103
> 
> 赞同：7
> 
> 时间：2013-03-06T15:17:02.637
> 
> 标签：ajax, drupal, drupal-7, views

我在我的页面中写了一个由视图模块创建的自定义链接，我想点击它做一些事情，然后页面将通过 ajax 刷新，我该如何实现呢？

很抱歉我没有表达清楚，我使用 Drupal 7 和 Views 模块来自定义我自己的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-08T14:49:02.277

你可以使用这个模块[https://www.drupal.org/project/views_refresh](https://www.drupal.org/project/views_refresh)或者在你的 JS 中使用下面的代码来刷新视图。

```
$('.view-dom-id-403402eee35f68cd32fe87b45702dc63').triggerHandler('RefreshView'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:36:32.643

将一个事件附加到链接，当它被触发时，执行一个 AJAX 请求。

# push-notification - Foursquare api 测试推送适用于场地 ID，但不适用于实际签到

> ID：15251104
> 
> 赞同：1
> 
> 时间：2013-03-06T15:17:05.570
> 
> 标签：push-notification, real-time, foursquare

测试推送有效，也可以使用场地 ID 进行测试推送。我被任命为该场所的经理，并且我拥有将推送作为授权服务的应用程序在我的帐户上。

这应该解决问题吗？实际签到不会导致任何推送。我看到还有已连接的应用程序表明您尚未连接任何应用程序，但我似乎无法以任何方式连接到我的应用程序

虽然在访问foursquare.com/app/clientID*时*我看到它已连接，因为按钮显示断开连接的可能性。

任何人都知道需要改变什么？这是它处于开发者模式的事实吗？因为我想保持这种状态...

干杯，

乔纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T15:25:25.760

我不确定它是否有帮助，但我想，如果您最近已经在同一地点签到（抱歉，我无法为您提供有关最近对foursquare 意味着什么的更多信息），则不会触发推送。

另一个原因可能是用户签到的隐私设置。我还没有证据证明这一点，但没有激活“将我包括在当前在场地登记的人员的公开名单中”或“让场地经理看到我何时登记他们的业务，或者我何时是其中之一他们最好的客户”也可能会抑制这种推动。

亲切的问候，托马斯

# php - 将当前 URL 提交到稍后将重定向到同一 URL 的页面

> ID：15251105
> 
> 赞同：1
> 
> 时间：2013-03-06T15:17:12.650
> 
> 标签：php, url, redirect, submit

我有一个提交隐藏输入的表单，因此可以将项目添加到购物车。

为了避免重新提交问题（如果用户刷新页面或从另一个页面按下），我这样做如下：

*   项目页面有表格并提交
*   cartAdding.php 接收值并将项目添加到购物车。然后我把一个`header`重定向回项目页面

```
include ("../cart/functions.php");
if(isset($_REQUEST['command']) && $_POST['add']=='add' && $_POST['itemId']>0)
{
    if (array_key_exists($pid, $_SESSION['cart']['itemId']))
    { 
    }
    else 
    {
        $pid=$_REQUEST['itemId'];
        addtocart($pid,1);
        $itemAdded = 1;
        $max = 0; 
foreach ($_SESSION['cart'] as $item) 
    { 
        $max = $max + $item['qty']; 
    }
    }
unset($_POST['add']);
header("Location: http://".$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"]);
exit();
} 
```

我的问题是关于`Location`. 如何存储项目的 url，以便我可以在 cartAdding.php 中使用它进行重定向？将它与表单一起提交是一个好习惯，这样称呼它：`$_SERVER['PATH_INFO']`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:25:23.003

您可以使用其 URL 添加另一个隐藏输入。

但是项目的 URL 不是从它的 id 派生的吗？喜欢`itemList.php?id=item_id`？如果是这样，你已经有了它的 id (on `$pid = $_REQUEST['itemId'];`)，所以你可以重定向到那个，用

```
header('Location: http://'.$_SERVER["HTTP_HOST"].'/itemList.php?id='.$pid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:24:48.037

您可以通过 $_POST 或 $_GET 甚至 $_SESSION 变量传递此 URL 或 ItemId 或其他任何内容。

# memory-leaks - 在执行 Segues 时避免 MomoryLeak

> ID：15251106
> 
> 赞同：1
> 
> 时间：2013-03-06T15:17:14.073
> 
> 标签：memory-leaks, xamarin.ios, segue

我可以使用没有 segues 的导航 (1) 但我想使用它 (2)。

执行 segue 并返回会使我的应用程序变慢！因为当我向后导航时它不会处理目标视图。你如何以正确的方式使用这个 segues ？

```
/*1) This code ok! But what about segues */ 
        if(_tabbarController==null)
        _tabbarController = (UITabBarController)this.Storyboard
                           .InstantiateViewController ("MainTabbarController");
        this.NavigationController.PushViewController (_tabbarController,true);

/*2) If I run this code I get  a new instance of UITabbar   */          
      this.PerformSegue("SegueShowDetail",this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:01:34.643

如果您使用故事板和导航控制器，导航控制器应在弹出堆栈时自动释放您的视图和关联的内存。

例如，如果您有一个在您按下按钮转到另一个视图时被调用的方法，您将拥有：

```
[self performSegueWithIdentifier:@"mySegueName" sender:self]; 
```

当您单击辅助视图左上角的后退按钮时，这将触发导航控制器处理视图。

# android - 如何将双精度值和字符串值从活动传递到android中的广播

> ID：15251108
> 
> 赞同：1
> 
> 时间：2013-03-06T15:17:16.810
> 
> 标签：android, android-intent, android-activity, android-service, android-broadcast

我正在开发始终在后台运行并自动响应 SMS 字符串而无需用户交互的 android 手机监控应用程序我成功获得了活动中的电池电量和 GPS 坐标，但无法将这些值从活动传递到广播接收器，然后自动发送这些值作为对 SMS 字符串的回复。

这是将值从活动类传递到广播接收器类的代码：

```
String info = "Battery Level: " + level + "%\n";
            setBatteryLevelText(info);

            Intent in = new Intent("my.action.string");
            in.putExtra("stat", info);
            startActivity(in);
            sendBroadcast(in); 
```

广播接收器类中的代码：

```
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
String batt = getIntent().getStringExtra("stat");
if (bundle != null)
{
  //---retrieve the SMS message received---
  Object[] pdus = (Object[]) bundle.get("pdus");
  msgs = new SmsMessage[pdus.length];            
  for (int i=0; i<msgs.length; i++){
      msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
      str += "SMS from " + msgs[i].getOriginatingAddress();                    
      str2=msgs[i].getOriginatingAddress();
      str += " :";
      str += msgs[i].getMessageBody().toString();
      str += "\n";      

    //---display the new SMS message---
      Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
    //  int number=Integer.parseInt(str2);
      SmsManager sms = SmsManager.getDefault();

      String autoReplybat = "Battery";
      boolean isAutoReplybat = msgs[i].getMessageBody().toString().equals(autoReplybat);
      if (!isAutoReplybat) {

          sms.sendTextMessage(str2, null,  batt, pi, null);
          } 
```

GPS 坐标（数据类型为 double）也有同样的问题，我无法自动回复 GPS 坐标和电池电量。从我这边来看，空消息会根据 SMS 字符串自动发送。我想问题是将值从活动传递到广播接收器请帮助我并纠正我的逻辑/语法错误提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:20:30.463

尝试这个

```
 String batt = intent.getStringExtra("stat") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:20:46.937

当您应该使用传递给 onReceive 函数的意图变量时，您正在调用 getIntent() 来检索额外内容。

**编辑：**

在接收器的顶部，您有：

```
 @Override
   public void onReceive(Context context, Intent intent) {
       // TODO Auto-generated method stub
          String batt = getIntent().getStringExtra("stat"); 
```

将其更改为：

```
 @Override
   public void onReceive(Context context, Intent intent) {
       // TODO Auto-generated method stub
          String batt = intent.getStringExtra("stat"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-25T18:20:04.163

```
Intent intent = new Intent("my.action.string"); 
intent.putExtra("phonenum", "98588685959"); 
sendBroadcast(intent);

public void onReceive(Context context, Intent intent) {
  String action = intent.getAction();
  Log.i("Receiver", "Broadcast received: " + action);
  if(action.equals("my.action.string")){
     String state = intent.getExtras().getString("phonenum");
 }
} 
```

# url - Web 应用程序中的 URL 标准

> ID：15251113
> 
> 赞同：2
> 
> 时间：2013-03-06T15:17:26.207
> 
> 标签：url, web-applications, intranet

在 Intranet 中命名通过 URL 访问的 Web 应用程序的标准或常规方法是什么？

例如，http://hostname:port/App_Name2.0 // 这是有效的吗？我可以用应用程序名称添加版本号吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:18:58.173

Wikipedia 提供了有关此主题的出色大纲 ( [URL](http://en.wikipedia.org/wiki/Uniform_resource_locator) )。

```
scheme://username:password@domain:port/path?query_string#fragment_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:22:00.237

我认为将版本号添加到 URL 并不明智。我宁愿将它显示在我的 Web 应用程序的标题栏中，以便通知用户他们正在使用的版本。正如@poitroae 所指出的，一个好的 URL 可以使用这些指南进行格式化

# rdf - java - 如何在Java中使用jena API返回资源的属性？

> ID：15251115
> 
> 赞同：1
> 
> 时间：2013-03-06T15:17:32.713
> 
> 标签：rdf, jena, ontology

如何返回模型中涉及指定资源（作为主题或对象）的所有属性......？

返回与该资源相关的属性的字符串 [] 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:58:32.637

AFAIK 没有等效于`listSubjectsWithProperty`返回模型中的所有谓词或给定主题的所有谓词。虽然它很容易实现：

使用 Jena `SimpleSelector`，您可以遍历模型并将遍历限制在某些条件下。在这种情况下，我只过滤具有主题的语句`someRelevantSubject`：

```
SimpleSelector selector = new SimpleSelector(null, null, (RDFNode)null) {
    public boolean selects(Statement st)
        { return st.getSubject().equals(someRelevantSubject);}
} 
```

使用选择器，迭代模型并添加谓词并将谓词添加到标准 Java 集中：

```
StmtIterator iter = model.listStatements(selector);
while(it.hasNext()) {
   Statement stmt = iter.nextStatement();
   some_set.add(stmt.getPredicate().toString());
} 
```

如果您想要所有不同的谓词而不管主题，只需`true`始终在选择器中返回。

# django - Django - 使用 ForeignKeys 相互引用的两个类的模型结构建议

> ID：15251118
> 
> 赞同：0
> 
> 时间：2013-03-06T15:17:40.217
> 
> 标签：django, foreign-keys

我一直在尝试为我想要实现的目标提出解决方案。作为自学 django 的一部分，我正在尝试为我的武术俱乐部创建一个俱乐部会员网站。作为其中一个应用程序的一部分，我提出了两类模型；会员和学校。

这个想法是让成员使用 ForeignKey 引用他们所属的学校，并让学校引用成员来识别教师。讲师只是一个普通的成员，带有一个布尔字段来识别他们是否是讲师。

我只是不断地遇到一个又一个的问题，我正在一个接一个地解决这个问题，但我想知道我一开始所做的是否是最有效的方法。

下面是 Members 模型的那部分目前的样子：

```
instructor = models.BooleanField('Instructor?', default=False)
school = models.ForeignKey('School') 
```

这是学校班级的样子：

```
class School(models.Model):
SCHOOL_CHOICES = (
    ('RED', 'Redruth - Centre of Excellence'),
    ('FAL', 'Falmouth - FXU'),
    ('MEV', 'Mevagissey'),
    )

name = models.CharField(max_length=3, choices=SCHOOL_CHOICES, default='RED')
instructors = models.ForeignKey('Student', related_name='instructors', blank=True, null=True) 
```

我不得不将related_name 添加到讲师ForeignKey，因为没有它会引发错误。我还尝试在成员模型中向学校 ForeignKey 添加一个 to_field，因为目前它只显示三个“学校对象”副本，但这似乎并没有改变它（编辑：使用**unicode**定义修复）。

我这样做的方式（两个类使用 ForeignKeys 相互引用）是最好的方式，还是我应该做其他事情？

抱歉这么含糊：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:38:04.437

由于您是在`Member`模型上标记讲师，因此您无需使用`School`模型上的另一个关系来识别他们。相反，如果您想获得讲师，对于特定学校，您可以这样做：

```
instructors = Members.objects.filter(instructor=True, school=my_school) 
```

# java - 意外的动画行为

> ID：15251119
> 
> 赞同：0
> 
> 时间：2013-03-06T15:17:45.797
> 
> 标签：java, android

![在此处输入图像描述](../Images/fe61dfee71afea215ea6a1479ccf31f6.png)

我的情况：

1.  目标 SDK：2.2
2.  目标动画效果：路径菜单。当您向右滑动时，上方的视图会向右移动，从而显示下方的菜单视图。

我的 XML 结构：

```
<Parent Relative Layout>    //background color is white
    <Upper Linear Layout>
    <Bottom Linear Layout>  //background color is red
</Parent Relative Layout> 
```

我为上部线性布局设置动画的 2 种方法：

1.  官方 pre-honeycomb **TranslateAnimation**方法，**FillAfter**设置为 true。
2.  非官方 pre-honycomb **ObjectAnimator.ofFloat**方法通过[Nineoldandroids](http://nineoldandroids.com)

我对这两种方法的期望：

1.  动画被触发
2.  上部线性布局逐渐向右动画化
3.  下面的线性布局（红色背景）逐渐显露出来

我实际看到这两种方法：

1.  动画被触发
2.  上部线性布局逐渐向右动画化
3.  父级相对布局（白底）逐渐显露
4.  线性布局下方无处可见

我不知道我在这里做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:50:36.087

问题解决了。我需要动态创建这个**Upper Linear Layout**并将其添加到**Parent Relative Layout**，而不是在 xml 中静态声明它。当我再次滑动动画时，会出现下方的**底部线性布局**。

# python - Python bitand (&) vs and

> ID：15251121
> 
> 赞同：4
> 
> 时间：2013-03-06T15:17:55.750
> 
> 标签：python, bitwise-operators, logical-and

大家好，我有这部分代码：

```
for line in response.body.split("\n"):
    if line != "": 
        opg = int(line.split(" ")[2])
        opc = int(line.split(" ")[3])
        value = int(line.split(" ")[5])
        if opg==160 & opc==129:
            ret['success'] = "valore: %s" % (value)
            self.write(tornado.escape.json_encode(ret)) 
```

我有一系列的类型

```
1362581670        2459546910990453036    156     0     30      0 
```

我只想取第三个和第四个元素分别为 160 和 129 的行。这段代码不起作用。我必须做一些铸造吗？我认为 opg==160 正在努力将 int 与 int 进行比较...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:19:32.767

您对运营商感到困惑；[`and`是正确的布尔测试](http://docs.python.org/2/reference/expressions.html#boolean-operations)，`&`而是[二进制位运算符](http://docs.python.org/2/reference/expressions.html#binary-bitwise-operations)：

```
if opg == 160 and opc == 129: 
```

作为数字运算符，`&`运算符的[优先级高于比较运算符](http://docs.python.org/2/reference/expressions.html#operator-precedence)，而布尔运算符的优先级较低。因此，该表达式`opg == 160 & opc == 129`被解释为`opg == (160 & opc) == 129`，这可能不是您想要的。

您可以稍微简化您的代码：

```
for line in response.body.splitlines():
    if line:
        line = map(int, line.split())
        opg, opc, value = line[2], line[3], line[5]
        if opg == 160 and opc == 129:
            ret['success'] = "valore: %s" % (value)
            self.write(tornado.escape.json_encode(ret)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:19:36.247

`&`是按位运算。你可能想要`and`. 使用整数，您*可能*不会认为它会有所作为

```
>>> True & False
False
>>> True & True
True
>>> False & False
False 
```

但是，请注意`&`和`and`有[不同的优先级](http://docs.python.org/2/reference/expressions.html#operator-precedence)。

```
>>> opc,opg = 160,129
>>> opc == 160 & opg == 129
False
>>> opc == 160 and opg == 129
True 
```

基本上，`&`绑定比`==`, 所以`a == b & c == d`被解析为`a == ( b & c) == d`而不是`(a == b) & (c == d)`像你想要的那样。

```
>>> def func1():
...     opc,opg = 160,129
...     opc == 160 & opg == 129
... 
>>> def func2():
...     opc,opg = 160,129
...     opc == 160 and opg == 129
... 
>>> import dis
>>> dis.dis(func1)
  2           0 LOAD_CONST               3 ((160, 129))
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               0 (opc)
              9 STORE_FAST               1 (opg)

  3          12 LOAD_FAST                0 (opc)
             15 LOAD_CONST               1 (160)
             18 LOAD_FAST                1 (opg)
             21 BINARY_AND          
             22 DUP_TOP             
             23 ROT_THREE           
             24 COMPARE_OP               2 (==)
             27 JUMP_IF_FALSE_OR_POP    39
             30 LOAD_CONST               2 (129)
             33 COMPARE_OP               2 (==)
             36 JUMP_FORWARD             2 (to 41)
        >>   39 ROT_TWO             
             40 POP_TOP             
        >>   41 POP_TOP             
             42 LOAD_CONST               0 (None)
             45 RETURN_VALUE        
>>> dis.dis(func2)
  2           0 LOAD_CONST               3 ((160, 129))
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               0 (opc)
              9 STORE_FAST               1 (opg)

  3          12 LOAD_FAST                0 (opc)
             15 LOAD_CONST               1 (160)
             18 COMPARE_OP               2 (==)
             21 JUMP_IF_FALSE_OR_POP    33
             24 LOAD_FAST                1 (opg)
             27 LOAD_CONST               2 (129)
             30 COMPARE_OP               2 (==)
        >>   33 POP_TOP             
             34 LOAD_CONST               0 (None)
             37 RETURN_VALUE 
```

正如 Hoopdady 所指出的，您也没有正确拆分字符串。 `line.split()`或`line.split(None)`将在连续运行的空白处拆分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:23:23.940

只需使用`line.split()`而不是`line.split(" ")`. 这样它就可以处理任何类型的空白。如果这些不仅仅是空格，你会得到一些奇怪的结果，这可能就是正在发生的事情。

# c++ - 我怎样才能解决这个歧义wrt。mem_fun?

> ID：15251124
> 
> 赞同：0
> 
> 时间：2013-03-06T15:18:02.323
> 
> 标签：c++, templates, generics, mem-fun

为了练习，我再次熟悉的主题之一是树。深度优先搜索和广度优先搜索的区别仅在于支持算法的数据结构的选择。

我想我可以编写一个通用的树搜索，我可以使用模板提供堆栈（DFS）或队列（BFS）。`stack`并且`queue`足够好，他们的添加和删除成员具有相同的名称。不幸的是，访问函数被调用一次，然后又被调用`top`一次`front`。正因为如此，我没有完全到达我想要的地方。没有那个 lambda，我无法做到：

```
template<typename T, typename D, typename G>
bool ts(Tree<T> const & tree, T const value, D & ds, G getter)
{
    if (empty(tree))
    {
        return false;
    }

    ds.push(tree.Root);
    while (!ds.empty())
    {
        auto const current = getter();
        ds.pop();

        if (current->Value == value)
        {
            return true;
        }
        if (current->Left)
        {
            ds.push(current->Left);
        }
        if (current->Right)
        {
            ds.push(current->Right);
        }
    }
    return false;
}

template<typename T>
bool dfs(Tree<T> const & tree, T const value)
{
    stack<typename Tree<T>::Node const * const> ds;
    return ts(tree, value, ds, [&ds](){ return ds.top(); });
}

template<typename T>
bool bfs(Tree<T> const & tree, T const value)
{
    queue<typename Tree<T>::Node const * const> ds;
    return ts(tree, value, ds, [&ds](){ return ds.front(); });
} 
```

我认为我应该能够使用`mem_fun`（或`mem_fun_ref`）来提供相应的访问功能。我试过

```
template<typename T>
bool dfs(Tree<T> const & tree, T const value)
{
    typedef stack<typename Tree<T>::Node const * const> DataStructure;
    return ts(tree, value, DataStructure(), mem_fun(&DataStructure::top));
} 
```

但随后编译器抱怨歧义（在 a`const`和非`const`版本之间）。

所以我搜索了互联网并了解到我应该明确提供模板类型。

```
template<typename T>
bool dfs(Tree<T> const & tree, T const value)
{
    typedef stack<typename Tree<T>::Node const * const> DataStructure;
    return ts(tree, value, DataStructure(), mem_fun</*???*/>(&DataStructure::top));
} 
```

可悲的是，没有很多可能性**？？？**我可以想出满意的编译器。

有人可以给我一个提示吗？

* * *

**更新：**这是一个完整的工作示例（除非您定义 NO_LAMBDA）：

```
#include <iostream>
#include <stack>
#include <functional>

using namespace std;

template<typename T>
struct Tree
{
    struct Node
    {
        T Value;
        Node * Left;
        Node * Right;

        Node(T value) : Value(value), Left(nullptr), Right(nullptr) {}

        virtual ~Node()
        {
            if (Left) delete Left;
            if (Right) delete Right;
        }
    };

    Node * Root;

    Tree() : Root(nullptr) {}

    virtual ~Tree() { if (Root) delete Root; }
};

template<typename T> void insert(typename Tree<T>::Node * node, T const & value)
{
    typename Tree<T>::Node ** selected = &(value < node->Value ? node->Left : node->Right);

    if (*selected)
        insert(*selected, value);
    else
        *selected = new typename Tree<T>::Node(value);
}

template<typename T> void insert(Tree<T> & tree, T value)
{
    if (!tree.Root)
        tree.Root = new typename Tree<T>::Node(value);
    else
        insert(tree.Root, value);
}

template<typename T, typename D, typename G>
bool ts(Tree<T> const & tree, T const value, D & ds, G getter)
{
    if (!tree.Root) return false;

    ds.push(tree.Root);
    while (!ds.empty())
    {
        auto const current = getter();
        ds.pop();

        if (current->Value == value) return true;

        if (current->Left) ds.push(current->Left);
        if (current->Right) ds.push(current->Right);
    }
    return false;
}

template<typename T>
bool dfs(Tree<T> const & tree, T const value)
{
    typedef typename Tree<T>::Node const * DataStructureContent;
    typedef stack<DataStructureContent> DataStructure;
#ifdef NO_LAMBDA // With this defined, it breaks.
    return ts(tree, value, DataStructure(),
        mem_fun(static_cast<DataStructureContent (DataStructure::*)() const>(&DataStructure::top)));
#else // This works.
    DataStructure ds;
    return ts(tree, value, ds, [&ds] () { return ds.top(); });
#endif
}

int main()
{
    Tree<int> tree;
    insert(tree, 5);
    insert(tree, 2); insert(tree, 1); insert(tree, 3);
    insert(tree, 7); insert(tree, 6); insert(tree, 9);
    cout << "DFS(7) -> " << dfs(tree, 7) << endl;
    cout << "DFS(8) -> " << dfs(tree, 8) << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:21:32.717

您可以将成员函数指针转换为您需要的类型：

```
mem_fun( static_cast< R (DataStructure::*)( Args... ) >( &DataStructure::top ) ) 
```

或者

```
mem_fun( static_cast< R (DataStructure::*)( Args... ) const >( &DataStructure::top ) ) 
```

适合`R`结果类型和`Args...`参数。

**编辑：**您在完整示例中犯了两（三）个错误：

a) 转换需要准确，即您需要提供正确的返回类型。幸运的是，`std::stack`有 typedef 可以帮助你。在您的情况下，您可以使用以下两个选项进行投射：

```
typedef typename DataStructure::reference (DataStructure::*non_const_top)();
mem_fun( static_cast< non_const_top >( &DataStructure::top ) ) 
```

或者

```
typedef typename DataStructure::const_reference (DataStructure::*const_top)() const;
mem_fun( static_cast< const_top >( &DataStructure::top ) ) 
```

b）您在调用时尝试将临时绑定到引用`ts`。连同 a)，将代码更改为：

```
DataStructure ds;
typedef typename DataStructure::reference (DataStructure::*non_const_top)();
return ts(tree, value, ds, mem_fun(static_cast<non_const_top>(&DataStructure::top))); 
```

c) 在`ts`中，您尝试在`getter`没有对象的情况下调用 。您需要将其更改为：

```
auto const current = getter( &ds ); 
```

通过这些更改，代码对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:24:22.887

将几个 typedef 定义为：

```
typedef typename DataStructure::reference       reference;
typedef typename DataStructure::const_reference const_reference;

typedef reference (DataStructure::*top_type)();             //non-const version
typedef const_reference (DataStructure::*ctop_type)() const;//const version 
```

然后使用你需要的任何东西。

在发布的代码中，您需要 const 版本，所以这样写：

```
mem_fun( static_cast<ctop_type>(&DataStructure::top )) 
```

强制转换有助于编译器选择您打算使用的版本。

顺便说一句，在 C++11 中，`std::mem_fun`不**推荐使用**。它还添加了另一个名为`std::mem_fn`. 注意拼写的不同。有关详细信息，请参阅此主题：

*   [std::mem_fun 与 std::mem_fn](https://stackoverflow.com/questions/11680807/stdmem-fun-vs-stdmem-fn)

* * *

你需要的是所谓`std::bind`的，而不是`std::mem_fun`（或`std::mem_fn`）：

它现在有效：

*   [在线演示](http://stacked-crooked.com/view?id=88f50b5f7e3e4d1e94de019640326075-18aa934a8d82d638dde2147aa94cac94)

你打电话的方式`getter`表明你需要`std::bind`，因为你是这样调用`getter`的：

```
auto const current = getter(); 
```

`getter`如果是从 中返回的对象，则这是一个错误`std::mem_fun`，在这种情况下，应该像这样调用它：

```
auto const current = getter(&ds); 
```

看这个演示：

*   [在线演示](http://stacked-crooked.com/view?id=d764365d5460991ace4d8f9ebe6b685f-18aa934a8d82d638dde2147aa94cac94)

或者，如果您只是传递指向成员的指针，则调用如下：

```
auto const current = (ds.*getter)(); 
```

请参阅：[在线演示](http://stacked-crooked.com/view?id=aa7c828018df318ab3b6d53b75ecb538-18aa934a8d82d638dde2147aa94cac94)

比较所有三个。看看差异！

希望有帮助。

# ruby-on-rails - rspec 无法确定正在运行的 spork 服务器

> ID：15251126
> 
> 赞同：1
> 
> 时间：2013-03-06T15:18:19.033
> 
> 标签：ruby-on-rails, ruby, rspec, spork

spork 启动输出：

```
spork # =>

Using RSpec, Rails
  -- Starting to fill pool...
     Wait until at least one slave is provided before running tests...
  ** CTRL+BREAK to stop Spork and kill all ruby slave processes **
Spork is ready and listening on 8989!
Preloading Rails environment
Preloading Rails environment
Loading Spork.prefork block...
Loading Spork.prefork block...
# ... some app output info... 
```

似乎正在运行（我可以通过浏览器访问它，有一些响应）但每次我尝试运行规范时：

```
rspec --drb -c ./spec/path/to_file # =>

No DRb server is running. Running in local process instead ... 
```

为什么 ？

预先感谢。

* * *

环境：

*   Ubuntu 12.10
*   jruby-1.6.8@ruby-1.9.2；
*   rspec 2.13；

spec_helper.rb：

```
require 'rubygems'
require 'spork'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rails' #an alternative to webrat

  Dir[Rails.root.join("spec/helpers/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    config.mock_with :rspec
    config.use_transactional_fixtures = true
  end
end

Spork.each_run do
  FactoryGirl.reload
end 
```

# css - UL 左侧有边距

> ID：15251127
> 
> 赞同：25
> 
> 时间：2013-03-06T15:18:22.087
> 
> 标签：css, html-lists, space

由于某种原因，在我的页脚中，我的 ul 左侧​​有一个空格，因此它没有与上面的内容对齐（会员文本等）如果我要将文本放在这个 ul 之外（但仍在页脚包装器内）是没有这样的空间。

这是它的样子： ![](../Images/294355b8cee1cdc3c29087087cd885e1.png)

HTML：

```
<!DOCTYPE html>
<html>
<head>
<title>Ozanam Club </title>

<link rel="stylesheet" href="css/styles.css" />
<link rel="stylesheet" href="css/normalize.css"/>

<link rel="stylesheet" href="css/flexslider.css" type="text/css" media="screen" />
<link rel="stylesheet" href="css/fonts/enigma.css" />

</head>

<body>

<div id="wrap">
    <header>
        <div id="logo"><a href="#"><img src="images/logo.png" height="157px" width="237px"></a></div>
    <!--
    <div class="social">
      <ul>
        <li><a href="#"><img src="images/icons/facebook.gif"/></a></li>
        <li><a href="#"><img src="images/icons/twitter.gif"/></a></li>
        <li><a href="#"><img src="images/icons/youtube.gif"/></a></li>
    </ul>
    </div>
    -->
        <div id="navigation">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Events</a></li>
            <li><a href="#">Clubs</a></li>
      <li><a href="#">Photos</a></li>
            <li><a href="#">F.A.Q</a></li>
            <li><a href="#">Contact</a></li>
        </ul>   
    </div>

    </header>

     <section class="slider">
        <div class="flexslider">
          <ul class="slides">
            <li>
                <img src="images/slider/image1.gif" />
                </li>
                <li>
                <img src="images/slider/image2.gif" />
                </li>
                <li>
                <img src="images/slider/image3.gif" />
                </li>
          </ul>
        </div>
      </section>

    <div class="main">
        <h1>Ozanam Club</h1>
        <p>The first Ozanam Club was started in May 1989 by James Lynch, a member of the
St. Vincent De Paul society who himself had two children with learning difficulties 
and who was concerned at the general lack of leisure provision for them.</p>
<p>The Ozanam Club is a Special Works Conference of the St. vincent De Paul Society.
The name of the clubs are called after Blessed Frederick Ozanam who is the founder
of the S.S.V.P. At this present time we have two clubs in Viewpark, an adults club
and a seperate club for younger members. We have an adults club in Hamilton and 
Paisley and also a club in Carfin for younger members. </p>
        <h1>Membership</h1>
        <p>Membership is open to anyone who has disablities, regardless of their race or religious belief.</p>
<p>The aim of the clubs are a fun night out for our members and some temporary respite for parents. All of the clubs are run solely by volunteers who are disclosure checked prior to working with
vulnerable adults/children.</p><p> They are also made aware of the Adults/Children Protection Procedures and encouraged to attend an information session.</p>
<p>You can find more information on our a <a href="#">F.A.Q page.</a></p>

    </div>
<div class="side">
  <img src="images/events.gif" alt="Events" />
  <a href="#" class="button">View</a>
</div>

<div class="side">
  <img src="images/photos.gif" alt="Events" />
  <a href="#" class="button">View</a>
</div>

</div>
<footer>
  <div id="footer-wrap">
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">Events</a></li>
      <li><a href="#">Clubs</a></li>
      <li><a href="#">Photos</a></li>
      <li><a href="#">F.A.Q</a></li>
      <li><a href="#">Contact</a></li>
    </ul> 
  </div>
</footer>    

  </div>
  </div>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script defer src="js/jquery.flexslider-min.js"></script>
<script>
$(window).load(function() {
  $('.flexslider').flexslider({
    animation: "slide"
  });
});
</script>
</body>
</html> 
```

CSS：

```
body {background: white; background: url('../images/grunge.png'); font-family: 'EnigmaticRegular';}
#wrap {margin: 0 auto; width: 100%; max-width: 1000px;}

header {position: relative;}

#logo {margin: 20px 0 0 0; display: block; float: left;}

.social ul { z-index: 1; list-style: none; position: absolute; top: 0; right: 0;}
.social li { float: left;}
.social img { height: 35px; width: 35px;}

#navigation {  width: 100%; max-width: 1000px; height: 200px; position: relative; }
#navigation ul {  padding: 0.5em; background: white; border-radius: 5px; border-bottom: solid 3px #3c88bc; display: inline-block; position: absolute; bottom: 0; right: 0;}
#navigation li { padding-left: 0.5em; padding-right: 0.5em; list-style: none; font-style: none; font-family: 'EnigmaticBold'; border-right: solid 1px black;}
#navigation li:last-child { border: 0;}
#navigation ul, 
#navigation li {float: left;}

#navigation a { color: #195c8a; text-decoration: none; font-weight: bold;}
#navigation a:hover { color: #13405f;}

.main { float: left; margin-top: 20px; width: 625px;}
.main h1 {font-family: 'EnigmaticBold'; color: #13405f; }
.main p {color: #13405f;}
.main a {color: inherit; }

.side {float: right; margin-top: 20px; border-radius: 10px; margin-bottom: 10%; }
.side a { text-decoration: none; color: #3c88bc;}
.button { font-size: 14px;font-family: 'EnigmaticBold'; display: block; width: 100px; margin: 0 auto; text-align: center; background: #fff; padding: 5px; border-radius: 10px; border-bottom: solid 3px #3c88bc;}

footer { height: 100px; background: #195c8a; clear: both; }
#footer-wrap {margin: 0 auto; padding: 0; width: 100%; max-width: 1000px; }
#footer-wrap li { float: left; list-style: none; padding-right: 3em;}
#footer-wrap a {color: white ;text-decoration: none;} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-06T15:24:36.630

默认情况下，该`<ul>`元素具有浏览器固有的填充和边距。在你的情况下，使用

```
#footer ul {
    margin: 0; /* To remove default bottom margin */ 
    padding: 0; /* To remove default left padding */
} 
```

或 CSS 浏览器重置 ( [https://cssreset.com/](https://cssreset.com/) ) 来处理这个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T15:21:01.493

我没有看到任何`margin`或`margin-left`声明`#footer-wrap li`。

这应该可以解决问题：

```
#footer-wrap ul,
#footer-wrap li {
    margin-left: 0;
    list-style-type: none;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-06T15:24:36.647

默认情况下`<UL/>`包含默认填充

因此尝试`padding:0px`在 css 类或内联 css 中添加样式

# ruby - 将值替换为管理面板中的选择字段

> ID：15251128
> 
> 赞同：1
> 
> 时间：2013-03-06T15:18:28.330
> 
> 标签：ruby, padrino

我创建了两个模型：

答案答案类型`{id, text}`

后者可以接受两个值`{correct / wrong}`作为文本。

我修改了管理面板以接受一个 html 选择字段以直接在 Answer 中链接 AnswerType。

现在的问题是，在答案的列表页面中，我有一个 AnswerType 列，我可以在其中看到链接的 AnswerType 的 ID，但我想查看文本而不是 ID。

在文件`/admin/answers/views/index.erb`中的字段是：

`<td><%= answer.answer_type %=></td>`

我如何修改它以选择从该 id 开始的文本！？

非常感谢你......我不得不说帕德里诺岩石！

**编辑：添加一些信息** `SCHEMA` create_table "answer_types" t.string "text" [..]

```
create_table "answers"
    t.string "text"
    t.integer "answer_type_id"
[..] 
```

`models/answer.rb` 类答案 < ActiveRecord::Base [..] has_one :answerType

`models/answer_types.rb`

类 AnswerTypes < ActiveRecord::Base [..] belongs_to :answer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:53:43.000

您应该能够通过调用对象`text`从对象中检索值：`AnswerType``text`

```
<td><%= answer.answer_type.text %></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:46:25.800

我试着给你一些更多的信息：

在*db/schema.rb*我有：

```
create_table "answer_types", :force => true do |t|
  t.string "text"
end

create_table "answers", :force => true do |t|
  t.string "text"
  t.integer "answer_type_id"
end 
```

在*models/answer.rb*我有：

```
class Answer < ActiveRecord::Base
    validates_presence_of :text
    belongs_to :question
    has_one :answer_type
end 
```

在 *models/answer_types.rb* 我有： class AnswerTypes < ActiveRecord::Base belongs_to :answer end

所以在*admin/views/answers/index.erb*我有：

```
<td><%= answer.answer_type_id %></td> 
```

哪个正确打印链接到答案的**answer_type_id 。**

回到最初的问题：如何替换**answer_type_id**打印 answer_types 文本字段？

谢谢！

# matlab - 提取多边形的网格坐标

> ID：15251129
> 
> 赞同：-2
> 
> 时间：2013-03-06T15:18:30.743
> 
> 标签：matlab, grid, geometry, polygon

我有一个网格图，使用 Matlab 构建。我在上面放置了一些多边形。如何提取这些多边形内的网格坐标？谢谢..

```
% construct grid
MAX_X=10;
MAX_Y=10;
MAX_VAL=10;
MAP=2*(ones(MAX_X,MAX_Y));
axis([1 MAX_X+1 1 MAX_Y+1])
grid on;
hold on;
%obst 1
x = [1 1 4 4];
y = [1 11 11 1];
plot([x x(1)],[y y(1)],'r-');

% obst 2
x = [7 7 11 11];
y = [11 1 1 11];
plot([x x(1)],[y y(1)],'r-'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:59:41.550

首先做一个封闭的线：

```
x = [x x(1)]
y = [y y(1)] 
```

`X`和`Y`不同点的值矩阵：

```
Y = repmat((1:MAX_Y)',[1,MAX_X])
X = repmat(1:MAX_X,[MAX_Y,1]) 
```

然后你可以使用[inpolygon](http://www.mathworks.com/help/matlab/ref/inpolygon.html)：

```
MAP = inpolygon(X,Y,x,y) 
```

这也应该适用于非凸多边形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:54:39.973

处理非凸多边形会很棘手，所以也许您应该从将多边形划分为多个凸多边形开始。您可以使用内角来确定角在哪里是非凸的，并应用最少涉及这些角的切割。但也许 matlab 确实支持一些您可以使用的[三角测量算法。](http://en.wikipedia.org/wiki/Polygon_triangulation)

一旦有了凸多边形，就可以将它们视为半空间的交集。如果*A*和*B*是跨越一条线的两个角，并且*P*是一个网格点，则可以使用行列式的符号

```
| Ax Bx Px |
| Ay By Py |
| 1  1  1  | 
```

来决定点位于直线的哪一侧。哪个符号取决于您在多边形周围行走的顺序，但如果您按顺序处理拐角，则点*P*位于凸多边形内，前提是符号永远不会改变。在此公式中，水平线或垂直线不会是特殊情况，并且您也不会有对性能有好处的划分，也可能有助于提高准确性。

如果您不想使用该方法遍历所有网格点，您可以提出各种优化。一种是预先计算 跨越每条线的两个角的叉积*A* × *B。*该叉积与点*P*之间的点积等于上述行列式（即 det(A,B,P)=(A×B)·P），因此您现在只需计算三个行列式而不是完整的行列式每个点-线组合的乘积和两个总和。

如果您想进一步优化这一点，您可能最好看一下[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)来计算多边形边界处的点，然后简单地枚举匹配边界之间的水平（或垂直）线上的所有点点。

除非您使用整数或其他精确数字执行所有计算，否则舍入问题可能是所有这一切的主要问题。您必须决定是否计算边界点，并确保在原始多边形内但在其凸部分的边界上只计算一次。这需要多少努力在很大程度上取决于您输入的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:38:03.657

相关帖子在这里：[计算图像和多边形之间重叠的简单方法是什么？](https://stackoverflow.com/questions/12222328/what-is-an-simple-way-to-compute-the-overlap-between-an-image-and-a-polygon/12269837#12269837)

*inpolygon*可能适用于您的应用程序，但仅当特定网格框的中心点位于多边形内时才会返回 true。如果您想知道网格框的任何部分是否在多边形内，它将不起作用。上述帖子中的提问者展示了一个使用*多边形的示例。*

# c# - asp中如何重叠图形：图表控件

> ID：15251130
> 
> 赞同：1
> 
> 时间：2013-03-06T15:18:31.867
> 
> 标签：c#, asp.net, graph

我正在尝试使用 asp:Chart 制作帕累托图。它基本上是一个由条形图和折线图组成的图表。现在，当我尝试将两者放在同一个 ChartArea 中时，它给了我一个错误，说我不能将两个不同的系列放在同一个 ChartArea 中。

我需要右 y 轴是每个 Bar 元素的价格，左 y 轴是对应于折线图的百分比。

到目前为止我的代码：

```
<asp:Chart ID="Chart1" runat="server" onload="Chart1_Load" Width="847px" Height="422px">
    <Series>
        <asp:Series Name="Bar" YValueType="Double">
        </asp:Series>
    </Series>
    <Series>
        <asp:Series Name="Line" YValueType="Double" ChartType="Line">
        </asp:Series>
    </Series>

    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart> 
```

我在底层 C# 代码的条形图中插入了值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:55:42.100

尝试将您的两个 asp 系列标签放在同一个系列容器标签中：

```
<asp:Chart ID="Chart1" runat="server" onload="Chart1_Load" Width="847px" Height="422px">
    <Series>
        <asp:Series Name="Bar" YValueType="Double">
        </asp:Series>
        <asp:Series Name="Line" YValueType="Double" ChartType="Line">
        </asp:Series>
    </Series>

    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart> 
```

# opennlp - 使用 openNLP 识别命名实体（默认模型）

> ID：15251132
> 
> 赞同：6
> 
> 时间：2013-03-06T15:18:42.523
> 
> 标签：opennlp, named-entity-recognition

谁能指出 openNLP NameFinder 模块使用的算法？代码很复杂，而且文档很少，并且作为一个黑盒（提供默认模型）使用它给我的印象是它主要是启发式的。以下是输入和输出的一些示例：

输入：

> 约翰史密斯很沮丧。
> 
> 约翰史密斯很沮丧。
> 
> 巴拉克奥巴马很沮丧。
> 
> 雨果查韦斯很沮丧。（不再）
> 
> 杰夫阿特伍德很沮丧。
> 
> Bing Liu 对 openNLP NER 模块感到沮丧。
> 
> 诺姆乔姆斯基对这个世界感到沮丧。
> 
> 杰登史密斯很沮丧。
> 
> 史密斯杰登很沮丧。
> 
> Lady Gaga 很沮丧。
> 
> Gaga 女士很沮丧。
> 
> Gaga 夫人很沮丧。
> 
> 杰登很沮丧。
> 
> 刘先生很沮丧。

输出（我将菱形改为方括号）：

> [START:person] John Smith [END] 很沮丧。
> 
> 约翰史密斯很沮丧。
> 
> [START:person] Barak Obama [END] 很沮丧。
> 
> 雨果查韦斯很沮丧。（不再）
> 
> [START:person] Jeff Atwood [END] 很沮丧。
> 
> Bing Liu 对 openNLP NER 模块感到沮丧。
> 
> [START:person] Noam Chomsky [END] 对这个世界感到沮丧。
> 
> Jayden [START:person] Smith [END] 很沮丧。
> 
> [START:person] Smith [END] [START:person] Jayden [END] 很沮丧。
> 
> Lady Gaga 很沮丧。
> 
> Gaga 女士很沮丧。
> 
> Gaga 夫人很沮丧。
> 
> 杰登很沮丧。
> 
> 刘先生很沮丧。

该模型似乎只是学习了在训练数据中注释的固定名称列表，并允许进行一些平铺和组合。两个值得注意的 (FN) 示例是：

1.  忽略诸如 Mr. 和 Mrs. 之类的强姓名指示符。
2.  Jayden（2011 年美国最受欢迎的第 4 名）未被确定，而以下“Smith”（在“Jayden Smith...”中）被确定。我怀疑模型“认为”句子开头的大写 Jayden 是句子的开头而不是 NE。颠倒顺序，“Smith Jayden”作为提示（假设为 1），openNLP 将其识别为两个独特的 NE，与其他全名（例如“John Smith”）不同，可能暗示“Smith”在姓氏列表中。 .

-> 我感到困惑和沮丧，如果有人能指出我的算法（或验证它很糟糕），我将不胜感激。

ps 斯坦福和 UIUC NER 系统的性能要好得多，但存在一些有趣但偏离主题的细微差异（这个问题太长了）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-07T18:59:33.947

顾名思义，[NameFinderME](http://opennlp.sourceforge.net/api/opennlp/tools/namefind/NameFinderME.html)使用最大熵模型。[这](http://dl.acm.org/citation.cfm?id=234289)是关于我的开创性论文。

如果 OpenNLP 的性能不能满足您的要求，并且您不能使用 Stanford 或 UIUC NER，我建议尝试使用[Mallet](http://mallet.cs.umass.edu/)，使用[CRF](http://www.cs.umass.edu/~mccallum/papers/crf-tutorial.pdf)。[此示例代码](https://github.com/chbrown/nlp/blob/master/src/main/java/cc/mallet/share/weili/ner/enron/TUI.java)应该可以帮助您入门。

# plugins - 声纳插件开发分步指南

> ID：15251136
> 
> 赞同：4
> 
> 时间：2013-03-06T15:19:05.910
> 
> 标签：plugins, sonarqube

我已经浏览了[http://docs.codehaus.org/display/SONAR/Developing+Plugins](http://docs.codehaus.org/display/SONAR/Developing+Plugins)但不幸的是它没有给出详细的步骤。有人可以帮助我了解如何调用使用 ANTLR 解析代码文件然后将输出捕获到 Sonar 的代码审查工具以及如何开始为 Sonar 上的代码分析工具维护基于 XPATH 的规则它是为 Java/Javascript 完成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T06:13:02.593

一个好的起点是查看现有插件的代码：http: [//github.com/sonarqubecommunity](http://github.com/sonarqubecommunity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:30:48.653

我建议你使用 sonar dev 邮件列表：dev at sonar dot codehaus dot org。开发声纳插件不能简单地由“指南”涵盖......

# asp.net - 使用 ASP.NET Web 窗体的 JQGrid 自动完成配置

> ID：15251138
> 
> 赞同：0
> 
> 时间：2013-03-06T15:19:09.687
> 
> 标签：asp.net, ajax, jqgrid, autocomplete

我无法理解如何使用 ASP.NET Web 窗体实现 JQGrid JQAutoComplete 控件。我的网格的数据来自 DataTable，我想从同一个 DataTable 中的现有列加载我的 AutoComplete DataSource。

我已经这样定义了我的专栏：

```
<trirand:JQGridColumn 
                HeaderText="System Id"
                DataField="system_id"
                Editable="true"
                EditType="AutoComplete"
                EditorControlID="SystemId_AutoComplete">
</trirand:JQGridColumn> 
```

我的自动完成控件定义如下：

```
<trirand:JQAutoComplete
                runat="server"
                ID="SystemId_AutoComplete"
                DisplayMode="ControlEditor" 
                DataTextField="system_id"
/> 
```

然后，在我的代码中，我使用以下内容尝试将 DataTable 绑定到 AutoComplete 控件。

```
SystemId_AutoComplete.DataSource = myDataTableGoesHere;
SystemId_AutoComplete.DataBind(); 
```

但是，在实现时，.NET 会抛出错误“找不到列 [system_id]”，即使它是我的列名之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:22:31.793

尝试更换

```
<trirand:JQGridColumn 
                HeaderText="System Id"
                DataField="system_id"
                Editable="true"
                EditType="AutoComplete"
                EditorControlID="SystemId_AutoComplete">
</trirand:JQGridColumn> 
```

和

```
<trirand:JQGridColumn 
                HeaderText="System Id"
                DataField="system_id"
                Searchable="true" 
                SearchType="AutoComplete"
                SearchControlID="SystemId_AutoComplete">
</trirand:JQGridColumn> 
```

检查[文档左侧窗格中的搜索/过滤](http://www.trirand.net/demoaspnet.aspx)

# xml - 什么是递归 DTD？可能的例子

> ID：15251141
> 
> 赞同：1
> 
> 时间：2013-03-06T15:19:16.763
> 
> 标签：xml, xquery, 3nf, dtd

我试图找到一个递归 DTD 和一个对其有效的 XML 数据文件。现有的验证器是否能够验证递归 DTD？我希望能够在该 XML 文件之后执行 XQuery。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:02:58.107

如果“递归 DTD”是指包含至少一个可以作为其自己的后代出现的元素的 DTD，那么示例包括 HTML DTD（div、ul、ol 和 li 在这种意义上都是递归的；span 也是如此） 、TEI、DocBook、JATS 和任何数量的其他 DTD。是的，任何验证 XML 解析器都能够针对此类 DTD 进行验证。

如果您需要一个简单的示例进行测试，您可以使用这个 DTD 和文档：

```
<!DOCTYPE e [
<!ELEMENT e (#PCDATA | e)* >
]>
<e>
This is a test document. 
In it, the <e>e</e> element is allowed
to test <e>within <e>itself</e></e>.
</e> 
```

如果“递归 DTD”是指别的意思，那么……你是什么意思？

# c# - 隐藏没有数据的 XElement 节点

> ID：15251143
> 
> 赞同：2
> 
> 时间：2013-03-06T15:19:24.337
> 
> 标签：c#, xml, xsd, xelement

我无法隐藏没有数据的 XElements。

如果我有这个代码：

```
string missing = string.Empty;
XElement missingNodes = new XElement("TOPLEVEL",
    new XElement("FIELD1", "VALUE1"),
    new XElement("FIELD2", missing),
    new XElement("FIELD3", "VALUE3")
); 
```

我最终构建了这个架构：

```
<TOPLEVEL>
  <FIELD1>VALUE1</FIELD1>
  <FIELD2></FIELD2>
  <FIELD3>VALUE3</FIELD3>
</TOPLEVEL> 
```

如果我将缺失更改为 null 而不是 String.Empty，则第二个字段将变为：

```
<FIELD2 /> 
```

有没有一种简单的方法来隐藏具有空/空数据的节点？

我希望它看起来更像这样：

```
<TOPLEVEL>
  <FIELD1>VALUE1</FIELD1>
  <FIELD3>VALUE3</FIELD3>
</TOPLEVEL> 
```

* * *

**编辑：**

按照@sine 和@gunr2171 的建议，我走上了不添加空/空节点的道路。

由于我想将所有内容保持在嵌套的新格式中（没有很多 if/then 分支），我尝试使用三条件检查 null。有趣的是，如果您将 null 作为任何内容的内容传递，XElement 不会留下任何工件。

所以这成功了：

```
string missing = null;
XElement missingNodes = new XElement("TOPLEVEL",
    new XElement("FIELD1", "VALUE1"),
    (missing != null ) ? new XElement("FIELD2", missing) : null,
    new XElement("FIELD3", "VALUE3")
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:27:07.177

我相信@sine 是对的。您只需要检查该值是否为空/空而不插入该值。

```
public void AddIfValid(XElement root, string tagName, string value, string excludeValue)
{
    if (value != excludeValue)
        root.Add(new XElement(tagName, value);
} 
```

# java - 当数据在 ListView 中发生变化时保持选定元素的状态

> ID：15251149
> 
> 赞同：2
> 
> 时间：2013-03-06T15:19:35.610
> 
> 标签：java, android, android-listview, state

我有一个产品列表（如购物清单）的活动，我们可以在其中选择产品单位的数量。

该活动包含带有 TextWatcher 的 EditText 和带有个人适配器（扩展 BaseAdapter）的 ListView。

当我在 EditText 中键入一个键时，产品的 listView 将使用新数据刷新。

但我想保留我选择的数据的状态。

比如我在EditText中输入一个引用，然后listView包含3个数据（A，B，C），我选择A，输入5个单位，然后我在EditText中输入一个新的引用（A和B消失）。

listView 仅包含 C，但我删除了我的搜索并返回到 A、B、C。

问题是，产品 A 未被选中并且有 0 个单位（5 个单位已经消失）。

即使我在 EditText 中更改搜索，我也想保留选定的产品和单位。

请问该怎么做？

这是一个代码片段：

活动布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText  
        android:id="@+building_list/search_box" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="Filter by reference"
        android:inputType="textAutoCorrect|none|textAutoComplete|none|textNoSuggestions"
        android:maxLines="1"
        android:textSize="20dp" />

    <ListView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="10dp"
        android:id="@+id/productListView">
    </ListView>
</LinearLayout> 
```

适配器：

```
public class AdapterProduct extends BaseAdapter {   
    private List<Product> lstProduct;
    private LayoutInflater mInflater;

    public AdapterProduct(Context context, List<Product> listP) {
        lstProduct = listP;
        mInflater = LayoutInflater.from(context);
        }

public View getView(int position, View convertView, ViewGroup parent) {
        CheckedLinearLayout layoutItem;

        if (convertView == null) {      
            layoutItem = (CheckedLinearLayout) mInflater.inflate(R.layout.row_product, parent, false);
            final ViewHolderProduct viewHolder;
            viewHolder = new ViewHolderProduct();

            viewHolder.btPlusAmount = (Button)layoutItem.findViewById(R.id.btPlusAmount);
            viewHolder.btPlusAmount.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Product p = (Product) viewHolder.product.getTag();
                    p.setAmount(p.getAmount()+1);
                    notifyDataSetChanged();
                }
            });
        }
        else {
            layoutItem = (CheckedLinearLayout) convertView;
            ((ViewHolderProduct) layoutItem.getTag()).btPlusAmount.setTag(lstProduct.get(position));
        }

        ViewHolderProduct viewHolder = (ViewHolderProduct) layoutItem.getTag();
        viewHolder.amount.setText(String.valueOf(lstProduct.get(position).getAmount()));
}

static class ViewHolderProduct {
    protected TextView amount;
    protected Button btPlusAmount;
}
} 
```

以及带有 TextWatcher 的 AsyncTask ：

```
AsyncTask
doInBackground =>
    modelProduct = new AdapterProduct(leContext, 
                        ProductJSON.getService().searchProducts(leContext, url, params[0])); //params[0] = the text of EditText

private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {

        //AsyncTask task
        task.execute(s.toString());
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:45:43.107

我让你[在这里检查我的答案](https://stackoverflow.com/a/15070130/1685143)。

1）基本上，为您的适配器添加一个新属性。一个简单的 int[] 就足够了。将选择的产品数量存储在里面。

2) 每次构建一行视图时`ListView`，检查所选产品的数量。

3）确保在单击按钮时更新选择的产品数量。此外，请确保在您的列表更改时调整/更新此数组的大小。每次单击产品时调用 notifyDataSetChanged()。

# java - Java 的扫描仪。如何匹配空格？

> ID：15251157
> 
> 赞同：2
> 
> 时间：2013-03-06T15:19:53.023
> 
> 标签：java, regex

假设，我需要匹配包含空格的括号。

这是一个片段：

```
String input = "( ) ( ) ( )";
Pattern pattern = Pattern.compile("\\(\\s\\)");

Scanner scanner = new Scanner(input);
scanner.useDelimiter("\\n");
Matcher matcher = pattern.matcher(input);

System.out.println(scanner.hasNext(pattern)); // false
System.out.println(matcher.find()); // true
System.out.println(matcher.start(0) + " " + matcher.end(0)); // 0 3 
```

Matcher 完全符合我的需要，但 Scanner 没有。

这个问题没有被正确地问到。我的目的是用扫描仪按顺序抓取字符串中的所有 ( ) 标记，因为 matcher 似乎有不方便的 API 来完成此类任务。我应该彻底阅读文档。

我需要的方法是：

```
scanner.findInLine(pattern); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:27:23.897

从 Scanner.hasNext(Pattern) 检查 javadoc：

> **如果下一个完整的标记**与指定的模式匹配，则返回 true ...

因此，由于您的模式与整个令牌不匹配，`"( ) ( ) ( )"`它将返回 false。

然而`Scanner`，有一个名为的函数`findInLine`可以做你想做的事：

```
scanner.findInLine(pattern); // returns "( )" or null if not found 
```

（但是，这种方法可以跳过字符...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:29:08.090

当您`"\\n"`用作分隔符（并因此覆盖作为空格的默认值）时，整个输入`"( ) ( ) ( )"`将成为一个标记。

当`hasNext`尝试将**完整**的令牌与`pattern`它返回的匹配时`false`。

从文档中获取方法[**`Scanner.hasNext(Pattern pattern)`**](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNext%28java.util.regex.Pattern%29)

> 如果下一个完整的标记与指定的模式匹配，则返回 true。

因此，在您的情况下，方法调用实际上是在尝试`"( ) ( ) ( )"`与`"( )"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:26:19.870

```
 String input = "( ) ( ) ( )";
        Pattern pattern = Pattern.compile("\\(\\s\\)");

        Scanner scanner = new Scanner(input);
        scanner.useDelimiter(pattern);  //**CHANGED**
        Matcher matcher = pattern.matcher(input);

        System.out.println(scanner.hasNext()); //**CHANGED**
        System.out.println(matcher.find());
        System.out.println(matcher.start(0) + " " + matcher.end(0)); // 0 3 
```

如上所述更新您的代码。

你误会了`useDelimiter()`。您必须设置`Pattern`为`Scanner`对象的分隔符。

# c# - 将一项添加到 IEnumerable 的最佳方法是什么 ?

> ID：15251159
> 
> 赞同：32
> 
> 时间：2013-03-06T15:19:54.450
> 
> 标签：c#, extension-methods, ienumerable

以下是我将一项添加到 IEnumerable 对象的方法：

```
//Some IEnumerable<T> object
IEnumerable<string> arr = new string[] { "ABC", "DEF", "GHI" };

//Add one item
arr = arr.Concat(new string[] { "JKL" }); 
```

这很尴尬。但是，我没有看到类似的方法`ConcatSingle()`。

是否有更简洁的方法将单个项目添加到 IEnumerable 对象？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-06T15:23:56.553

不，这与使用内置语言/框架功能一样简洁。

如果您愿意，您可以随时创建扩展方法：

```
arr = arr.Append("JKL");
// or
arr = arr.Append("123", "456");
// or
arr = arr.Append("MNO", "PQR", "STU", "VWY", "etc", "...");

// ...

public static class EnumerableExtensions
{
    public static IEnumerable<T> Append<T>(
        this IEnumerable<T> source, params T[] tail)
    {
        return source.Concat(tail);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T15:22:42.757

`IEnumerable`是*不可变*的集合，这意味着您不能添加或删除项目。相反，您*必须为此*创建一个新集合，只需转换为列表即可添加：

```
var newCollection = arr.ToList();
newCollection.Add("JKL"); //is your new collection with the item added 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-06T15:22:58.160

写一个扩展方法`ConcatSingle`:)

```
public static IEnumerable<T> ConcatSingle<T>(this IEnumerable<T> source, T item)
{
    return source.Concat(new [] { item } );
} 
```

但是你需要更加小心你的术语。
您不能将项目添加到`IEnumerable<T>`. `Concat`创建一个新实例。

例子：

```
var items = Enumerable.Range<int>(1, 10)
Console.WriteLine(items.Count()); // 10
var original= items;
items = items.ConcatSingle(11);
Console.WriteLine(original.Count());   // 10
Console.WriteLine(items.Count()); // 11 
```

如您所见，我们保存的原始枚举`original`没有改变。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-06T15:23:53.210

由于[`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)是只读的，因此您需要转换为列表。

```
var new_one = arr.ToList().Add("JKL"); 
```

或者你可以得到一个*[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)*，比如；

```
public static IEnumerable<T> Append<T>(this IEnumerable<T> source, params T[] item)
{
    return source.Concat(item);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-12T22:52:45.223

`Append()`- 正是您所需要的，它已被添加到 .NET Standard（2017 年）中，因此您不再需要编写自己的扩展方法。你可以简单地这样做：

`arr = arr.Append("JKL");`

由于 .NET 是开源的，因此您可以在这里查看实现（它比上面建议的自定义方法更复杂）： [https ://github.com/dotnet/runtime/blob/master/src/libraries/System.Linq/ src/System/Linq/AppendPrepend.cs](https://github.com/dotnet/runtime/blob/master/src/libraries/System.Linq/src/System/Linq/AppendPrepend.cs)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-06T15:48:46.350

您正在将一个数组分配给一个 IEnumerable。为什么不使用 Array 类型而不是 IEnumerable？

否则，如果要更改集合，可以使用 IList（或 List）。

当我需要阅读时，我仅将 IEnumerable 用于方法参数，而当我需要更改其中的项目时，我将使用 IList（或列表）。

# vhdl - vhdl 乘数

> ID：15251164
> 
> 赞同：0
> 
> 时间：2013-03-06T15:20:09.760
> 
> 标签：vhdl, multiplication, xilinx, hdl

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity Lab3_Adder1 is
    Port ( cin : in  STD_LOGIC;
           a : in  STD_LOGIC_VECTOR (3 downto 0);
           b : in  STD_LOGIC_VECTOR (3 downto 0);
           s : out  STD_LOGIC_VECTOR (3 downto 0);
           cout : out  STD_LOGIC);
end Lab3_Adder1;

architecture Behavioral of Lab3_Adder1 is

    SIGNAL c : STD_LOGIC_VECTOR (4 DOWNTO 0);

begin
    c(0) <= cin;
    s <= a XOR b XOR c (3 DOWNTO 0);
    c (4 DOWNTO 1) <= (a AND b) OR (a AND c(3 DOWNTO 0)) OR (b AND c(3 DOWNTO 0));
    cout <= c(4);
end Behavioral; 
```

你好，这是我第一次使用这个论坛。我在 VHDL 上做华莱士树乘法。上面的代码是全加器的代码。我想知道我们如何在主代码中调用函数/组件？（就像在 C 编程中一样）。我会在我的主代码中调用这个全加器。（如果有任何错误，对不起我的英语，我是法语）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:45:58.163

您可以像在 C 中一样在 VHDL 中调用函数——或者初始化常量、信号或变量，或者作为进程中的顺序语句。但这并不重要。

但是你不调用组件！这就像在 C++ 中调用一个对象——这完全没有意义！

在 VHDL 中，您可以实例化组件或（更简单！）只是实体，并使用信号来互连它们的端口。这（非常非常粗略地）更像是在面向对象的语言中声明对象和发送消息。这被称为“结构化 VHDL”，通常出现在 VHDL 设计的顶层，用于创建和互连 CPU、内存接口、FFT 处理器等组件。

给定您的实体

```
entity Lab3_Adder1 is
    Port ( cin : in  STD_LOGIC;
           a : in  STD_LOGIC_VECTOR (3 downto 0);
           b : in  STD_LOGIC_VECTOR (3 downto 0);
           s : out  STD_LOGIC_VECTOR (3 downto 0);
           cout : out  STD_LOGIC);
end Lab3_Adder1; 
```

例如，我可以构建一个 8 位加法器，如下所示：

```
entity Adder_8bit is
    Port ( cin : in  STD_LOGIC;
           a : in  STD_LOGIC_VECTOR (7 downto 0);
           b : in  STD_LOGIC_VECTOR (7 downto 0);
           s : out  STD_LOGIC_VECTOR (7 downto 0);
           cout : out  STD_LOGIC);
end Adder_8bit;

architecture Structural of Adder_8bit is

signal carry_int : std_logic;   -- between lower and upper halves

begin
-- We need to create and connect up two adders

LSB_adder : entity work.Lab3_Adder1
    Port Map( 
           cin => cin,
           a  => a(3 downto 0),
           b  => b(3 downto 0),
           s  => s(3 downto 0),
           cout => carry_int
    );
MSB_adder : entity work.Lab3_Adder1
    Port Map( 
           cin => carry_int,
           a  => a(7 downto 4),
           b  => b(7 downto 4),
           s  => s(7 downto 4),
           cout => cout
    );

end Structural; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T17:13:13.087

您可以定义替换组合电路的 VHDL 函数，并且可以在主 VHDL 代码中的任何位置调用，类似于 C 函数。

您需要首先在函数定义所在的位置定义一个包。

======= myAdders.vhdl ==============

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.std_logic_unsigned.all;

package myAdders is

function Lab3_Adder1( cin : in  STD_LOGIC;
a : in  STD_LOGIC_VECTOR (3 downto 0);
b : in  STD_LOGIC_VECTOR (3 downto 0);
s : out  STD_LOGIC_VECTOR (3 downto 0)) return std_logic;
end Lab3_Adder1;

end myAdders;

package body myAdders is

function Lab3_Adder1 ( cin : in  STD_LOGIC;
a : in  STD_LOGIC_VECTOR (3 downto 0);
b : in  STD_LOGIC_VECTOR (3 downto 0);
s : out  STD_LOGIC_VECTOR (3 downto 0)) return std_logic is
variable c: std_logic_vector(4 downto 0);
begin

c(0) := cin;
s := a XOR b XOR c (3 DOWNTO 0);
c (4 DOWNTO 1) := (a AND b) OR (a AND c(3 DOWNTO 0)) OR (b AND c(3 DOWNTO 0));
return c(4);
end Lab3_Adder1;

end myAdders; 
```

======= topLevel.vhdl ===============

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.std_logic_unsigned.all;
use work.myAddres.all;

entity TopLevel is
    Port ( 
           cin : in  STD_LOGIC;
           a : in  STD_LOGIC_VECTOR (3 downto 0);
           b : in  STD_LOGIC_VECTOR (3 downto 0);
           c : out  STD_LOGIC_VECTOR (3 downto 0)
           );
end TopLevel;

architecture Structural of TopLevel is

signal carry : std_logic;  

begin

carry <= Lab3_Adder1(cin, a, b, c);

... and so on ...

end Structural; 
```

# c# - 如何在 C# 中扩展一个类？

> ID：15251167
> 
> 赞同：25
> 
> 时间：2013-03-06T15:20:24.170
> 
> 标签：c#, .net

我有自己的对象，我想扩展它，从一个人那里保存数据并添加新信息。

所以代码是：

```
public class Student : Person
{
    public string code { get; set; }
} 
```

但是当我尝试初始化它并添加新值时：

```
Person person = new Person("Paul", "Catch");
Student student = (Person)person;
student.code = "1234"; 
```

我有`System.InvalidCastException: Unable to cast object of type 'MyLayer.Person' to type 'Student'.`

我错过了什么吗？

**编辑**：也许我放错了 Person 类。您必须假设它来自作为对象的数据库，例如`Person person = new MyPersons().First();`

所以我不会一个一个地用属性填充新的，只是扩展一个属性，这要归功于扩展旧对象的新对象。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-06T15:28:22.743

您不能直接将 a 转换`Person`为`Student`。

OOP 中的继承带有`hierarchy level`，即您可以将`derived`类强制转换为`base`类，但是`opposite is not possible`.`You cannot cast base class to derived class`

一种可能的解决方案是：

从Person`Student`使用`constructor overload`.

```
public class Person
{
    public string FName { get; set; }
    public string LName { get; set; }

    public Person(string fname, string lname)
    {
        FName = fname;
        LName = lname;
    }
}

public class Student : Person
{
    public Student(Person person, string code)
        : base(person.FName, person.LName)
    {
        this.code = code;
    }
    public Student(Person person)
        : base(person.FName, person.LName)
    {

    }

    public string code { get; set; }
}

static class Program
{
    static void Main(string[] args)
    {
        Person person = new Person("Paul", "Catch");

        // create new student from person using 
        Student student = new Student(person, "1234"); 
        //or
        Student student1 = new Student(person);
        student1.code = "5678";

        Console.WriteLine(student.code); // = 1234
        Console.WriteLine(student1.code); // = 5678
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T15:22:39.867

将 a 分配`Student`给您的`Person`.

```
Person person = new Student("Paul", "Catch");
Student student = (Person)person;
student.code = "1234"; 
```

请注意，这使得所有铸造都变得毫无用处，更好的是：

```
Student student = new Student("Paul", "Catch");
student.code = "1234"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:32:47.370

在你的`Student`类中，添加这个构造函数，假设你有一个在`Person`类中有两个字符串的构造函数

```
public Student(string val1, string val2) : base(val1, val2) { } 
```

那么你可以像这样使用它

```
Student student = new Student("Paul", "Catch");
student.code = "1234"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T21:19:51.410

您看到的问题是，在您的作业中，您试图将 Person 转换为 Student。这是不可能的，因为对象是 Person，而 Person 类型不知道 Student。

我对它的解释是对象具有特定的类型，无论您如何转换它。投射（就像光线投射到物体上的方式一样）只是决定了你如何看待那个物体。在示例情况下，Person 不了解 Student，因此无论您如何看待它，都无法将其分配给 student。

然而，一个学生对象可以向上转换为一个人，因为每个学生都是一个人。您始终可以向上转换为基类，但不能始终向下转换为派生类。

我希望这能让你清楚。（我也希望我完全正确。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:25:05.080

您的转换不正确，一个人可以成为学生（不是相反）

改成：

```
Student student = (Student)person; 
```

尽管可以避免您的类型转换..

```
Person person = new Person("Paul", "Catch");
Student student = (Person)person;
student.code = "1234"; 
```

变成....

```
Student student = new Student("Paul", "Catch");
student.code = "1234"; 
```

# c++ - 移动文件夹 Windows C++：适用于 Vista 及更高版本，不适用于 XP

> ID：15251170
> 
> 赞同：3
> 
> 时间：2013-03-06T15:20:35.100
> 
> 标签：c++, windows, winapi

几个小时以来，我一直在努力解决这个问题，它在 Windows Vista 和 Windows 7 上运行*良好*，但是当我在 Windows XP 上运行它时，它失败了，没有任何消息。不幸的是，我没有 XP 下的开发环境，所以我不能只通过调试器运行它来检查，我是否错过了一些非常明显的东西？同一段代码实际上确实使用 a`CopyFile`和几个命令来写出数据，`C:\`所以如果它是一个权限错误，那就是一个奇怪的错误。

编辑：返回值为 1223，`ERROR_CANCELLED`表示被用户取消。

编辑2：我禁用了s.fFlags，它立即弹出一个对话框，询问它是否应该创建`dir-test`文件夹，所以我切换到`FOF_NOCONFIRMATION`它似乎忽略了该标志。我也在删除过程中使用相同的`SHFileOperation`方法使用它，因此它不适用于文件副本。

```
LPTSTR source = L"dir-test\\*\0";               
LPTSTR dest = L"C:\\dir-test\0";

SHFILEOPSTRUCT s = { 0 };
s.hwnd = 0;
s.wFunc = FO_COPY;
s.fFlags = FOF_SILENT;
s.pTo = dest;
s.pFrom = source;
int n;
n = SHFileOperation(&s);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:37:11.617

因此，出于某种奇怪的原因，使用`SHFileOperation`将强制 Windows XP（但不是 Vista 或 7）的确认对话框并忽略标志告诉它只是确认。在运行副本之前使用的简单修复，`CreateDirectory()`不需要确认对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:57:25.850

的文档[`SHFILEOPSTRUCT`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759795%28v=vs.85%29.aspx)有这个警告：

> 毫不夸张地说，您的路径应该始终是完整路径。如果 pFrom 或 pTo 成员是非限定名称，则当前目录取自由 GetCurrentDirectory 和 SetCurrentDirectory 函数管理的全局当前驱动器和目录设置。

您的`source`规范是一个不合格的名称。

# c# - 将用户输入解析为用户在 winforms 文本框控件中键入

> ID：15251171
> 
> 赞同：2
> 
> 时间：2013-03-06T15:20:37.907
> 
> 标签：c#, winforms

我正在尝试创建某种许可证验证文本框，该文本框会自动将用户输入拆分为由连字符分隔的块。我的许可证有 25 个字符长，它是这样分开的：

> XXXXX-XXXXX-XXXXX-XXXXX-XXXXX

我想出了以下代码来解析用户输入，而他正在键入或通过复制/粘贴通过处理`TextChanged`文本框控件的事件，如下所示：

```
public static string InsertStringAtInterval(string source, string insert, int interval)
        {
            StringBuilder result = new StringBuilder();
            int currentPosition = 0;
            while (currentPosition + interval < source.Length)
            {
                result.Append(source.Substring(currentPosition, interval)).Append(insert);
                currentPosition += interval;
            }
            if (currentPosition < source.Length)
            {
                result.Append(source.Substring(currentPosition));
            }
            return result.ToString();
        }

        private bool bHandlingChangeEvent = false;
        private void txtLicense_TextChanged(object sender, EventArgs e)
        {
            if (bHandlingChangeEvent == true)
                return;

            bHandlingChangeEvent = true;
            string text = txtLicense.Text.Replace("-", "").Replace(" ","");
            int nPos = txtLicense.SelectionStart;
            if((text.Length==5||text.Length==10||text.Length==15||text.Length==20) && txtLicense.Text[txtLicense.Text.Length-1]!='-')
            {
                txtLicense.Text += "-";
                txtLicense.SelectionStart = nPos + 1;
            }
            if(text.Length>=25)
            {
                string tmp = text.Substring(0, 25);
                tmp = InsertStringAtInterval(tmp, "-", 5);
                txtLicense.Text = tmp;
                txtLicense.SelectionStart = nPos;
            }

            bHandlingChangeEvent = false;
        } 
```

当我用户在框内键入和粘贴时，这工作得很好。我唯一的问题是，当用户尝试通过按退格键或删除键从输入的键中删除字符时。

由于强制连字符插入@位置 5,10,15,20 一旦用户在退格键上达到这些标记之一，上面的逻辑会强制将连字符添加到字符串中，并且用户不能超出此范围。

我尝试摆弄 KeyDown 事件，但想不出任何有用的东西。有人可以帮忙吗？

我也尝试过使用 MaskedTextbox，但这很丑，因为我不希望掩码/连字符在焦点上可见，而且我当然不想用空格替换提示，因为在单击内部时会产生一些混乱当“假定”为空时，作为光标的框并不总是位于框的开头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:59:12.423

这些年来，这种事情一直是我遭受很多痛苦的原因。我处理它的方法是将文本的每个更改都视为从头开始粘贴 - 我去掉连字符，然后将它们放回适当的位置。然后你可以处理用户删除最后一个字符的特殊情况。在这种情况下，您将 TextChanged 事件之前的文本与之后的文本进行比较。如果它们相同，但前面的文本长一个字符，就不要做任何特别的事情。

这里有一些似乎适用于文本输入、剪切/复制/粘贴等的代码。可以通过一些花哨的 LINQ、一些错误处理等来改进它，但希望它能让你的想法得到理解。

```
private string previousText = string.Empty;
private bool processing = false;

private void textBox1_TextChanged(object sender, EventArgs e)
{
    // If we're already messing around with the text, don't start again.
    if (processing)
        return;

    processing = true;

    // The current textbox text
    string newText = textBox1.Text;

    // What was there before, minus one character.
    string previousLessOne = previousText == string.Empty ? string.Empty : previousText.Substring(0, previousText.Length - 1);

    // Get where the user is, minus any preceding dashes
    int caret = textBox1.SelectionStart - (textBox1.Text.Substring(0, textBox1.SelectionStart).Count(ch => ch == '-'));

    // If the user has done anything other than delete the last character, ensure dashes are placed in the correct position.
    if (newText.Length > 0 && newText != previousLessOne)
    {
        textBox1.Text = string.Empty;
        newText = newText.Replace("-", "");

        for (int i = 0; i < newText.Length; i += 5)
        {
            int length = Math.Min(newText.Length - i, 5);
            textBox1.Text += newText.Substring(i, length);

            if (length == 5)
                textBox1.Text += '-';
        }
    }

    // Put the user back where they were, adjusting for dashes.
    textBox1.SelectionStart = caret + (caret / 5);

    previousText = textBox1.Text;

    processing = false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:47:19.753

你可以试试这个版本：

```
void txtLicense_KeyDown(object sender, KeyEventArgs e) {
  if (e.KeyCode == Keys.Back) {

    int index = txtLicense.SelectionStart;
    while (index > 0 && txtLicense.Text[index - 1] == '-') {
      --index;
    }

    if (index > 0) {
      --index;
    }

    txtLicense.Select(index, txtLicense.SelectionLength + Math.Max(index, 1));
    txtLicense.SelectedText = string.Empty;

    e.SuppressKeyPress = true;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:48:17.390

我以前做过类似的事情。我要做的不是在插入点后面有一个字符之前添加连字符。例如，不要在输入 5 个字符后添加连字符，而是在 6 处添加，这样就不会在末尾添加。

这是我用来在特定位置插入连字符的算法：

```
public static string FormatLicenseNumber(string str)
{
    if (string.IsNullOrEmpty(str))
        return str;
    else
    {
        str = str.Replace("-", string.Empty);
        if (str.Length > 20)
            str = str.Insert(20, "-");
        if (str.Length > 15)
            str = str.Insert(15, "-");
        if (str.Length > 10)
            str = str.Insert(10, "-");
        if (str.Length > 5)
            str = str.Insert(5, "-");
        return str;
    }
} 
```

# sql - 如何通过 T-SQL 更改 SQL Server 表中列的长度

> ID：15251177
> 
> 赞同：1
> 
> 时间：2013-03-06T15:20:58.520
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在寻找如何通过 SQL 脚本更改 SQL Server 2008 表中包含的字段属性。

我正在寻找专门更改“长度”属性。

有人知道怎么做这个吗？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-06T15:32:49.540

所以，假设你有这张桌子：

```
CREATE TABLE YourTable(Col1 VARCHAR(10)) 
```

而您想更改`Col1`为`VARCHAR(20)`. 你需要做的是：

```
ALTER TABLE YourTable
ALTER COLUMN Col1 VARCHAR(20) 
```

由于列的长度变大，这将毫无问题地工作。如果您想将其更改为`VARCHAR(5)`，那么您首先需要确保您的列中没有包含更多字符的值，否则`ALTER TABLE`将失败。

# javascript - 如何使用 JavaScript 在 HTML 中查找最后一个 id

> ID：15251178
> 
> 赞同：1
> 
> 时间：2013-03-06T15:20:58.843
> 
> 标签：javascript, html

我的 javascript 有问题，我需要在我的 html 文档中找到 div 的最后一个 id。我可以通过查看它来找到它，但我希望它在 JavaScript 中是自动的。

```
<body>
  <div id="start">
    <div id="1">Text</div>
    <div id="2">Text</div>
    <div id="3">Text</div>
    <div id="4">Text</div>
    <div id="5">Text</div>
    <div id="6">Text</div>
  </div>
</body> 
```

javascript:

```
 function setCookie() {
    document.cookie = '1';
 }

 function startPage() {

     var cookieValueInt = parseInt(document.cookie);
     var secondPage = cookieValueInt + 1;
     document.getElementById(document.cookie).style.visibility = 'visible';
     document.getElementById(secondPage).style.visibility = 'visible';
     if (cookieValueInt == 1) {
         document.getElementById('leftarrow').style.visibility = 'hidden';
     }

 }

 function nextPage() {
     var cookieValueInt = parseInt(document.cookie);
     var secondPage = cookieValueInt + 1;
     var newCookieValue = cookieValueInt + 2;
     document.getElementById(document.cookie).style.visibility = 'hidden';
     document.getElementById(secondPage).style.visibility = 'hidden';
     document.getElementById(newCookieValue).style.visibility = 'visible';
     document.getElementById(newCookieValue + 1).style.visibility = 'visible';
     document.getElementById('leftarrow').style.visibility = 'visible';
     document.cookie = newCookieValue;

 }

 function previousPage() {
     var cookieValueInt = parseInt(document.cookie);
     var secondPage = cookieValueInt + 1;
     var newCookieValue = cookieValueInt - 2;

     document.getElementById(document.cookie).style.visibility = 'hidden';
     document.getElementById(secondPage).style.visibility = 'hidden';
     document.getElementById(newCookieValue).style.visibility = 'visible';
     document.getElementById(newCookieValue + 1).style.visibility = 'visible';
     document.cookie = newCookieValue;
     cookieValueInt = parseInt(document.cookie);
     if (cookieValueInt == 1) {
         document.getElementById('leftarrow').style.visibility = 'hidden';
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:24:30.300

不要使用数字作为 ID。虽然它在 HTML5 中在技术上是有效的，但它对 ID 的使用很差，而且很容易出现意外重复。我会建议使用`<div id="someprefix_1">`等等。您可以随时获取 ID 并去掉前缀以获取号码。

除此之外，这会很好用（IE7 及以下版本除外）：

```
var divsWithIDs = document.querySelectorAll("div[id]"),
    lastDiv = divsWithIDs[divsWithIDs.length-1]; 
```

编辑：如果你把它与前缀的想法结合起来，你可以很容易地得到“具有那种 ID 的最后一个元素”：

```
var divsWithPrefixedIDs = document.querySelectorAll("div[id^='someprefix_']"),
    lastDiv = dovsWithPrefixedIDs[divsWithPrefixedIDs.length-1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:29:53.770

我建议使用容器：

```
var parentEl = document.getElementById("start");
var id = parentEl.children(parentEl.children.length-1).id; 
```

此外，您不应使用数字作为 ID，请参阅 Kolink 的答案。编辑：更正的代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:30:43.613

您可以尝试使用 jQuery 并使用以下代码：

```
$(document).ready(function(){

      var attrId = $('#start').children('div:last-child').attr('id');

 }); 
```

另外，请注意您的 HTML 无效，因为您在结束 div 标记中缺少 < 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:25:57.573

使用 getElementsByTagName 并从数组中获取最后一个？

[https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)

另外，我的建议是使用 jQuery :)

# templates - JSF 嵌套 ui:insert - 已找到组件 ID

> ID：15251186
> 
> 赞同：0
> 
> 时间：2013-03-06T15:21:17.487
> 
> 标签：templates, jsf, primefaces, facelets

我的模板的结构

**布局.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui">
...
<h:form id="headerForm" />
...
<ui:insert name="content">Put default content here, if any.</ui:insert>
... 
```

**集成.xhtml**

```
<ui:composition template="/WEB-INF/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jstl/core">
<ui:define name="content">
...
<ui:insert name="tabContent">Tab content</ui:insert>
...
</ui:define> 
```

**customerSide.xhtml**

```
<ui:composition template="/pages/protected/integration/integration.xhtml" 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<ui:define name="tabContent">
...
</ui:define>
</ui:composition> 
```

当我转到该页面时，`http://localhost:8080/dcc/pages/protected/integration/customerSide.xhtml` 我得到了这个异常

```
java.lang.IllegalStateException: Component ID headerForm has already been found in the view. 
```

headerForm 没有问题。如果我删除它，它将在具有 id 的下一个组件上失败。如何嵌套这些模板而不会出现错误？

# mysql - MySQL数学获得前三名

> ID：15251187
> 
> 赞同：0
> 
> 时间：2013-03-06T15:21:20.633
> 
> 标签：mysql

我正在为一个奇幻电影联盟做一个网站，我想做的是获得总分前 3 名

总分应该是：每个玩家的活跃电影的各个分数的总和除以该玩家的活跃电影的数量

（所以如果一个玩家从活跃电影中获得 300 分并且有 3 部活跃电影，那么答案应该是 100）

所以我的问题是：如何在不指定 player_id 的情况下计算单个玩家的活跃电影数量（在子查询中）？

```
SELECT 
players.id as player_id,
first_name, last_name,
(metacritic + (imdb*10) + top_bottom + power(receipts,(2/9)) + ticket + oscar_noms + oscar_wins + gg_noms + gg_wins + isa_noms + isa_wins + razzie_noms + razzie_wins + festival_points + ifca_points) / (SELECT COUNT(id) FROM movies WHERE release_date >= CURDATE() and year_id=1 and player_id=4) as player_active_movie_total
FROM movies
INNER JOIN players on players.id=movies.player_id
WHERE release_date >= CURDATE() and year_id=1
ORDER BY player_active_movie_total DESC
LIMIT 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:35:38.033

您的选择语句中不需要子查询。根据您的标准，您只需要使用 GROUP BY 语句和 ID 上的 COUNT。下面的查询将不起作用，因为您需要对每一列进行分组/求和，但应该为您指明正确的方向

```
SELECT players.id as player_id, first_name, last_name,
(metacritic + (imdb*10) + top_bottom + power(receipts,(2/9)) + ticket + oscar_noms +     oscar_wins + gg_noms + gg_wins + isa_noms + isa_wins + razzie_noms + razzie_wins +     festival_points + ifca_points) / 
(COUNT(id)) as player_active_movie_total
FROM movies
 INNER JOIN players on players.id=movies.player_id
WHERE release_date >= CURDATE() and year_id=1
GROUP BY players.id, first_name, last_name
ORDER BY player_active_movie_total DESC
LIMIT 3 
```

您的 metacritic 列（以及 SELECT 列表中的所有其他列）要么需要成为聚合函数的一部分，即`SUM`要么`COUNT`或要么`MAX`或列在`GROUP BY`像 player.id 这样的语句中。我假设你想要整个列上的某种 SUM

# awk - 找出两个文件之间的差异

> ID：15251188
> 
> 赞同：1
> 
> 时间：2013-03-06T15:21:22.633
> 
> 标签：awk

我有以下情况：

file1.dat 是这样的：

```
1 2
1 3
1 4
2 1 
```

file2.dat 就像：

```
1 2
2 1
2 3
3 4 
```

我想找到第二个文件与第一个文件之间的差异。我试过机智`grep -v -f file1 file2`，但我的真实文件比这两个大，当我尝试使用它时，外壳永远不会结束。

结果应该是：

```
2 3
3 4 
```

文件已排序，并且它们具有相同数量的元素。有什么方法可以用 awk 找到解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T15:24:17.737

似乎您想要`file2`不在的行`file1`：

```
$ awk 'FNR==NR{a[$0];next}!($0 in a)' file1 file2
2 3
3 4 
```

但是使用起来更简单`comm`：

```
$ comm -13 file1 file2
2 3
3 4 
```

# javascript - jquery html函数不起作用

> ID：15251190
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:20:39.100
> 
> 标签：javascript, jquery

我想在我的网页上显示 twitter 用户信息。我创建了一个 div 标签，它将使用 jquery 包含用户信息。当光标在这个 div 标签上时，我想显示用户信息。以下是我在 jquery 中的代码：

```
var hideDelay = 500;
var currentID;
var hideTimer = null;
var container;

$(function () {
    container = $('<div id="personPopupContainer" style=\"max-width:400px;\">'
    + '<table border="0" cellspacing="0" cellpadding="0" align="center" class="personPopupPopup">'
    + '<tr>'
    + '   <td class="corner topLeft"><div style="position:absolute;top:15px;left:-16px;"><img src="images/balloon_tail.png" /></div></td>'
    + '   <td class="top"></td>'
    + '   <td class="corner topRight"></td>'
    + '</tr>'
    + '<tr>'
    + '   <td class="left"></td>'
    + '   <td><div id="personPopupContent"></div></td>'   //the div tag is here
    + '   <td class="right"></td>'
    + '</tr>'
    + '<tr>'
    + '   <td class="corner bottomLeft">&nbsp;</td>'
    + '   <td class="bottom"></td>'
    + '   <td class="corner bottomRight"></td>'
    + '</tr>'
    + '</table>'
    + '</div>');
    $('body').append(container);

    $('#personPopupContainer').mouseover(function () {
        if (hideTimer)
            clearTimeout(hideTimer);
    });

    $('#personPopupContainer').mouseout(function () {
        if (hideTimer)
            clearTimeout(hideTimer);
        hideTimer = setTimeout(function () {
            container.css('display', 'none');
        }, hideDelay);
    });
}); 
```

那运作良好。但是下面的代码是

```
$('#personPopupContent').html('<center><img src="images/loading_sm.gif" /></center>'); 
```

不工作。

```
function UserMouseOver(o) {

    var obj = $("#" + o);

        var Settings = obj.attr('rel').split(',');

        var UserID = Settings[0];
        var ScreenName = Settings[1];
        if (hideTimer)
            clearTimeout(hideTimer);

        var pos = obj.offset();
        var width = obj.width();
        if (pos != null && width != null) {
            container.css({
                left: (pos.left + width) + 20 + 'px',
                top: pos.top - 23 + 'px'
            });
        }
        $('#personPopupContent').html('<center><img src="images/loading_sm.gif" /></center>');

} 
```

我做错了什么？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:34:14.157

**注意：**在实际代码中没有错字（图像标签没有提前关闭）但是在你关注的代码中，有一个错字，正如 Stian 指出的那样。

Longshot..图像甚至可用吗？你可以使用这个插件：

[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

..然后在已知图像在 DOM 中时更改 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:42:09.580

如果代码按您所说的那样工作（我看不到您在哪里调用鼠标悬停方法）并且它只是没有显示的图像。

**使用 Web 调试器检查任何 404 错误，**例如[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)甚至是浏览器的 F12 Web 调试器。

确保您的图像路径正确。

**更新**

好的，现在我们知道它有效。尝试以下操作：向 #personPopupContent 添加一个类，例如 class="popupContent" 。更改设置 html 以调用类选择器而不是 ID 选择器的代码行。然后为了确保 jQuery 正在获取要添加内容的 html 元素，向其中添加一些文本。

```
 //All  the other code
   + '   <td><div id="personPopupContent" class="popupContent"></div></td>'
  //All  the other code 
```

更改 UserMouseOver() 方法中的选择器：

```
$('.popupContent').html('<center><img src="images/loading_sm.gif" /></center>'); 
```

**请确保**

我不知道你在哪里调用 UserMouseOver() 方法，所以请在 jquery 周围添加一个 Document Ready。

```
function UserMouseOver(o) {

    //All the other code

    $(function () {
        $('.popupContent').html('<center><img src="images/loading_sm.gif" /></center>');
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:55:32.740

*您的问题并不能完全解释您要做什么。但是，我至少可以解释为什么您的图像没有显示。*

*首先，您需要* `function UserMouseOver(o)` *从内部调用您的* `$('#personPopupContainer').mouseover(function () {. . .}`*。您编写它的方式* `UserMouseOver(o)` *永远不会被调用，并且函数中的任何逻辑都不会被执行。*

*其次，在您的 中* `$('#personPopupContainer').mouseout(function () {. . .}`*，该行在鼠标移出时* `container.css('display', 'none')` *隐藏了您的整个`container`对象（所有 HTML！）。这将导致您的“加载” gif 永远不会显示，因为您尝试显示的 div* ( `personPopupContent`)*位于* `container` *您刚刚设置的对象中* `display: none`*！* *您应该仅在您尝试隐藏的特定元素上将显示设置为无；例如，您可以添加* `id="balloon_tail"` *到气球图像并将 Javascript 行更改为* `$('#balloon_tail).css('display', 'none')`.

*`var Settings = obj.attr('rel').split(',');` *第三，由于您没有* `rel` *在最外层元素中包含属性，因此* *您将在该行中收到错误*`personPopupContainer`消息。 *您需要将* `rel` *逗号分隔字符串的属性添加到此元素才能使该行正常工作。（然而，根据 W3C，唯一使用该`rel`属性的官方元素是* `<a>`*锚标记。）**

 **最后，我会添加一个图像标签，* `#personPopupContent` *使其类似于* `<div id="personPopupContent"><img src="" id="loading_sm" /></div>`. *然后你可以改变*

```
$('#personPopupContent').html('<center><img src="images/loading_sm.gif" /></center>'); 
```

至

```
$('#loading_sm').attr("src", "images/loading_sm.gif"); 
```

但这只是我。

我希望这有帮助！*

# django - 在 Heroku 上运行 Django 和 Neo4j

> ID：15251191
> 
> 赞同：2
> 
> 时间：2013-03-06T15:21:32.193
> 
> 标签：django, heroku, authorization, neo4j, neo4django

我正在尝试使用 Neo4j 的插件将我的 Django 应用程序部署到 Heroku。我正在使用[Neo4django](https://github.com/scholrly/neo4django/ "Neo4django")。在本地，在我的`settings.py`我有以下

```
NEO4J_DATABASES = {
        'default' : {
            'HOST':'localhost',
            'PORT':7474,
            'ENDPOINT':'/db/data'
        }
    } 
```

但是，在部署到 Heroku 时，我将设置更改为

```
NEO4J_DATABASES = {
    'default' : {
        'HOST':'<someid>.hosted.neo4j.org',
        'PORT':7281,
        'ENDPOINT':'/db/data/',

    }
} 
```

..我显然无法连接到数据库以解决身份验证问题。我的堆栈跟踪底部的错误：

```
StatusException: Error [401]: Unauthorized. No permission -- see authorization schemes. 
```

需要授权

.. 即使我添加了 Heroku Neo4j 插件提供的登录名和密码。

以前有没有人遇到过类似的问题？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:59:35.460

Heroku 托管的 Neo4j[禁用了 Gremlin 插件](https://devcenter.heroku.com/articles/neo4j)，这将阻止您运行 neo4django、bulbflow 或任何其他需要 Gremlin 的客户端库。

最常见的解决方案是在 AWS 上运行您自己的 Neo4j 实例，然后连接到该实例。请[向 Neo 人明确](https://groups.google.com/forum/?fromgroups#!forum/neo4j)表示您希望在 Heroku 上支持 Gremlin - 我认为由于 Heroku Neo4j 实例的共享性质，它已被禁用，但它绝对阻碍了许多库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T10:45:47.243

我通过使用 graphenedb.com 来托管我的 neo4j 数据库来完成这项工作。

他们将允许您选择您想要托管的 neo4j 版本。如果您选择 1.9.6（或更早版本），则 gremlin 插件可以工作，neo4django 也可以。

您可以通过他们的网站注册graphenedb并在那里创建您的数据库，或者只使用他们的heroku插件（[http://blog.graphenedb.com/blog/2014/02/06/our-new-add-on-helps- heroku-users-build-applications-on-top-of-neo4j/](http://blog.graphenedb.com/blog/2014/02/06/our-new-add-on-helps-heroku-users-build-applications-on-top-of-neo4j/)）将为您完成所有工作。我发现使用 Web 界面的唯一优势是您还可以获得 neo4j 网络管理员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:46:15.760

您可以使用 . 查看 Neo4j 配置 URL `heroku config --app your-app`。只需`NEO4J_URL`在代码设置中使用来自环境变量的。它已经包含基本身份验证的凭据。

# ruby-on-rails - Rails：上传文本文件，预览，然后保存

> ID：15251194
> 
> 赞同：0
> 
> 时间：2013-03-06T15:21:38.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload, text-files

我想上传有几百行的文本文件。我想向用户展示文件前 10 行的预览，他们可以在其中调整格式，然后单击处理。单击后，我想根据指定的格式处理文件并将条目保存到数据库中。最后应该在服务器端删除该文件。

我怎么能那样做？是否有像回形针这样的宝石来处理文本文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:24:37.810

看看 Ryan Bate 的演员阵容：[http ://railscasts.com/episodes/396-importing-csv-and-excel](http://railscasts.com/episodes/396-importing-csv-and-excel)

# sql - 如何在 Rails 3 中重写这个 SQL 查询？

> ID：15251195
> 
> 赞同：0
> 
> 时间：2013-03-06T15:21:42.753
> 
> 标签：sql, ruby-on-rails

假设我有两个模型，`submission` `has_many` `submissionstate`

并且 table`submissionstates`具有以下列：

```
id | submission_id | state_id | created_at 
```

查询是

```
SELECT submission_id, state_id
FROM submissionstates ss
JOIN (
  SELECT MAX(created_at) as created_at
  FROM submissionstates ss
  GROUP BY submission_id
) x
ON ss.created_at = x.created_at
WHERE state_id = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:54:25.143

就像 Saurabh 提供的链接一样，您最终将 sql 片段放入 rails 查询方法；像这样的东西

```
list = SubmissionState.select("submission_id, state_id")
  .where(:state_id => 0)
  .joins("
    JOIN (
      SELECT MAX(created_at) as created_at
      FROM submissionstates ss
      GROUP BY submission_id
    ) x
    ON ss.created_at = x.created_at
  ")

puts list.length 
```

老实说，此时您最好使用 find_by_sql

```
sql = "
  SELECT submission_id, state_id
  FROM submissionstates ss
  JOIN (
    SELECT MAX(created_at) as created_at
    FROM submissionstates ss
    GROUP BY submission_id
  ) x
  ON ss.created_at = x.created_at
  WHERE state_id = ?
  AND some_other_value = ?
"

list = SubmissionState.find_by_sql([sql, 0, 'something-else'])
puts list.length 
```

注意：一旦你开始使用连接或 find_by_sql rails 就像它给你对象一样，但实际上它们将包含在 select 子句中定义的任何属性，并且 find_by_sql 将所有属性作为字符串返回，这可能很烦人

# asp.net - 从asp.net中的iframe内部重定向导致双后退按钮

> ID：15251197
> 
> 赞同：0
> 
> 时间：2013-03-06T15:21:56.860
> 
> 标签：asp.net, redirect, iframe

好的，我明白标题*不是*很清楚。我现在会更好地解释：

我有一个带有 asp.net 页面的 iframe。要从 iframe 重定向父级，我使用以下命令：

```
ClientScript.RegisterStartupScript(Me.GetType(), "redirector", "window.parent.location.href='myOtherPage.aspx'", True) 
```

它运行*良好*，在 Internet Explorer 和 Chrome 上完美，在 firefox 和 opera 上很糟糕。在这两个浏览器中，用户可以在父级重新加载之前看到单个 iframe 重新加载，但这*不是*我想要解决的问题。

重定向后，如果我点击浏览器上的后退按钮，我会返回旧页面并再次向前反弹。再次回击有效（使用 Chrome）。使用 Internet Explorer 没问题，只需 1 回即可正常工作。Firefox 和 Opera 让我无数次弹跳！

我试图在执行后擦除脚本，所以我使用了这个（没有任何换行符）：

```
ClientScript.RegisterStartupScript(Me.GetType(), "redirector", 
    "<script id=""redirector"">
    document.getElementById('redirector').innerHTML = '';
    window.parent.location.href='myOtherPage.aspx';
    </script>", False) 
```

但它没用。重定向仍然有效，但同样的两个后退按钮问题。

对此有任何想法吗？

# oracle - Plsql 未初始化的集合

> ID：15251201
> 
> 赞同：2
> 
> 时间：2013-03-06T15:22:04.543
> 
> 标签：oracle, collections, plsql, user-defined-types, initialization

我在包的规范中定义了以下类型

```
type column_info is record (col_name varchar2(20), col_value varchar2(1000));
type c_info is varray(10) of column_info;
type table_info is record (table_name varchar2(20), col_info c_info); 
```

在声明部分包体中我有

```
t_info table_info; 
```

在我拥有的包体内的程序内部

```
t_info:=null;
t_info.table_name:='gl_temp_report1';
t_info.col_info(1).col_name:='table_idx';
t_info.col_info.extend;
t_info.col_info(2).col_name:='table_row';
t_info.col_info.extend;
t_info.col_info(3).col_name:='table_row_detail'; 
```

即使包编译成功，在运行时我也会收到异常 ORA-06531: Reference to uninitialized collection 。
我如何初始化 col_info 集合？我试图初始化 t_info.col_info() 但我得到“没有功能”这样的一个。TIA，奥雷尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:26:24.740

您应该在访问它们之前正确初始化所有集合（包括嵌套）。
它们在初始化之前是原子的空值。

```
t_info := table_info('gl_temp_report1', c_info()); 
```

您还必须`extend`在为每个 varray 元素分配值之前调用（或使用 扩展一次`extend(3)`）。
或者在一个语句中完成所有操作：

```
t_info := table_info('gl_temp_report1', c_info('table_idx','table_row','table_row_detail')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:36:04.190

要执行初始化，您需要以类似于以下方式将初始化块添加到包主体：

```
CREATE OR REPLACE PACKAGE BODY your_package IS
  t_info  table_info;

  -- Whatever other procedure definitions, etc, are needed

BEGIN  -- package initialization
  t_info.table_name:='gl_temp_report1';
  t_info.col_info := c_info();
  t_info.col_info.extend;
  t_info.col_info(1).col_name:='table_idx';
  t_info.col_info.extend;
  t_info.col_info(2).col_name:='table_row';
  t_info.col_info.extend;
  t_info.col_info(3).col_name:='table_row_detail';
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('Exception!');  -- Add whatever error handling is needed
END your_package; 
```

分享和享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T04:04:29.920

您可以创建*t_info*，如下所示：

```
declare
type column_info is record (col_name varchar2(20), col_value varchar2(1000));
  type c_info is varray(10) of column_info;
  type table_info is record (table_name varchar2(20), col_info c_info);
  t_info table_info;
begin
  t_info.table_name := null;
  t_info.col_info := c_info();
  for i in 1..10 loop
    t_info.col_info.extend;
    t_info.col_info(i).col_name := null;
    t_info.col_info(i).col_value := null;
  end loop;
end;
/ 
```

干杯!

# matlab - 如何在工作区中创建数据

> ID：15251204
> 
> 赞同：0
> 
> 时间：2013-03-06T15:22:17.063
> 
> 标签：matlab

如何创建如下图所示的数据：

![m1 带 6x6 单元](../Images/1b7f7d122f9d9d25d2cf0859e857621f.png)

图 1：m1 与 6x6 单元

![双击进入m1后，如图2，假设图中所有的0都是<code><6x63 cell></code>](../Images/e90a5fbcc6acc80afe02164f3b3ca545.png)

图 2：双击进入 m1 后，如图 2 所示，假设图中所有的 0 为`<6x63 cell>`

![双击m1{1,2}如图3，每个包含<code><4x4 double></code>](../Images/96eb46183c65ced210c789531a211b52.png)

图3：双击如图3所示的m1{1,2}，每个包含`<4x4 double>`

![在此处输入图像描述](../Images/96c1458b1173aed0449adfe17e33931b.png)

我想将 0 放入每个`<4x4 double>`中，如图 4 所示，有什么建议来创建这个数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:42:21.063

先阅读一些[文档](http://www.mathworks.com/help/matlab/ref/cell.html)怎么样？

此外，[num2cell](http://www.mathworks.com/help/matlab/ref/num2cell.html)可以提供帮助。首先，您可以构造一个大的零矩阵，在您的情况下：

```
A = zeros([6,63,4]) 
```

然后你可以把它改成一个单元格数组，只取前 2 个维度（图 2）

```
C = num2cell(A,[1,2]) 
```

最后一步是通过复制矩阵制作图 3：

```
D = repmat(C,[6,6]) 
```

然后，您只需删除对角线：

```
for ii = 1:6
    D(ii,ii) = 0 
```

PS：代码未经测试

# ruby-on-rails - gem 更新后的错误 --system

> ID：15251214
> 
> 赞同：3
> 
> 时间：2013-03-06T15:22:36.420
> 
> 标签：ruby-on-rails, gem, rvm, rack-pow

我在 OSX 上的 ruby​​ on Rails 应用程序上工作。使用 RVM 管理 ruby​​。我已经做了：

```
gem update --system 
```

我认为这是你必须偶尔做的事情。但这似乎破坏了一些东西。当我启动我的应用程序（我正在使用 Pow）时，我看到了这些错误：

```
Error starting application
Your Rack app raised an exception when Pow tried to run it.

NameError: uninitialized constant Gem::SourceIndex
~/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:187:in `stub_source_index170'
~/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:353:in `stub_rubygems'
~/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:250:in `replace_entrypoints'
~/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/runtime.rb:14:in `setup'
~/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler.rb:116:in `setup'
~/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/setup.rb:17:in `<top (required)>'
~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:110:in `require'
~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:110:in `rescue in require'  
~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:35:in `require' ~/Sites/mafticket/config/boot.rb:6:in `<top 
(required)>' ~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require' 
~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require' ~/Sites/mafticket/config/application.rb:1:in `<top 
(required)>' ~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require' 
~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require' ~/Sites/mafticket/config/environment.rb:2:in `<top 
(required)>' ~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require' 
~/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require' ~/Sites/mafticket/config.ru:3:in `block in <main>'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/builder.rb:4:in `instance_eval' ~/Library/Application
Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/builder.rb:4:in `initialize' ~/Sites/mafticket/config.ru:1:in `new' ~/Sites/mafticket/config.ru:1:in 
`<main>' ~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:50:in `eval' ~/Library/Application
Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:50:in `load_config' ~/Library/Application
Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:43:in `initialize' ~/Library/Application
Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:13:in `new' ~/Library/Application
Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:13:in `run' ~/Library/Application  
Support/Pow/Versions/0.4.0/node_modules/nack/bin/nack_worker:4:in `<main>' 
```

我做错了什么还是应该重新开始？我可以撤消吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:35:41.043

很好的反馈，谢谢

看起来我通过键入以下内容解决了我的问题：

```
gem update bundler 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:36:02.753

而不是`gem update --system`尝试：

```
rvm use ruby-1.9.3-p362
rvm rubygems latest 
```

不同之处可能是第一个命令将获得`rubygems-2.0`+ 并且 RVM 仍然`1.8`为除 ruby​​-2.0.0 之外的所有 rubies 保留 +

# asp.net - Crystal 报告 /IIS 错误，在我将 WEB 从 IIS6 移动到 IIS 7 之后

> ID：15251222
> 
> 赞同：0
> 
> 时间：2013-03-06T15:22:45.560
> 
> 标签：asp.net, iis-7, visual-studio-2012, crystal-reports, iis-6

我尝试将 WEB 站点从 32 位 Windows 2003 移动到 64 位 Windows 2008。旧服务器具有 .net framework 2.0 (10.2.3600.0) 的 CR。我在 .net (13.0.2000.0) 的新服务器 CR 上安装了我的所有报告都不起作用。在 VS 2012 中，我发现了下一个错误：验证（ASP.Net）：属性“DisplayGroupTree”不是元素 CrystalReportViewer 的有效属性。
Web.config 有下一行：我在网上搜索了一个解决方案，但没有找到任何答案。

请帮忙

提前感谢弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:22:58.653

`.DisplayGroupTree`，以及我不记得的其他几个属性，在 Crystal Viewer 的 .NET 4.0 版本中被删除。在您的代码隐藏和/或设计器中查找对该属性的引用并将其删除。

这勾起了美好的回忆。

# jsf - 将 PrimeFaces 组件集成到另一个组件中

> ID：15251223
> 
> 赞同：0
> 
> 时间：2013-03-06T15:22:52.810
> 
> 标签：jsf, jakarta-ee, primefaces

我想使用这张表[http://www.primefaces.org/showcase/ui/d](http://www.primefaces.org/showcase/ui/d) ... tering.jsf 但我想用两列替换列年份，即首次亮相日期和结束日期。我不希望用户手动输入他想要适应的日期，而是希望他点击文本然后日历显示，基本上，我想使用这个[https://www.primefaces.org/showcase /ui/input/calendar.xhtml](https://www.primefaces.org/showcase/ui/input/calendar.xhtml)，第二个弹出窗口。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:28:43.410

您可以将任何您想要的内容包装到您的列中。您只需要绑定变量值。在那里你以一种简单的方式得到了你想要的东西：

```
<p:column id="dateDebutColumn" filterBy="#{rep.dateDebut}" headerText="Date de début" footerText="startsWith"> 
    <h:outputText value="#{rep.dateDebut}" 
        id="popupDate"> 
        <f:convertDateTime pattern="d/M/yyyy" /> 
    </h:outputText>
    <p:calendar value="#{rep.dateDebut}" />
</p:column> 
```

这将显示您选择的日期并默认添加具有该值的日历对象。

# ios - 使用 UITableViewCellDeleteConfirmationControl 知道当前单元格的子视图是什么

> ID：15251233
> 
> 赞同：3
> 
> 时间：2013-03-06T15:23:18.203
> 
> 标签：ios, objective-c, cocoa-touch, uitableview, delete-row

这样使用 UITableViewCellDeleteConfirmationControl 可以吗：

```
- (void)layoutSubviews {
    [super layoutSubviews];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.0f];

    for (UIView *subview in self.subviews) {
        if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]) { 
        CGRect newFrame = subview.frame;
        newFrame.origin.x = 200;
        subview.frame = newFrame;
        }
        else if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]) {             
            CGRect newFrame = subview.frame;
            newFrame.origin.x = 100;
            subview.frame = newFrame;
        }
        else if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellReorderControl"]) {             
        CGRect newFrame = subview.frame;
        newFrame.origin.x = 200;
        subview.frame = newFrame;
       }
   }
   [UIView commitAnimations];
} 
```

即使 UITableViewCellDeleteConfirmationControl 不是公共类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T12:47:41.823

由于您正在比较字符串相等性，因此您没有公开任何私有 API，因此应该有资格提交 AppStore。

我已经成功地在我自己的应用程序中使用了这种相等检查，该应用程序已进入 AppStore。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T13:12:37.107

首先，类不是字符串。您应该使用`NSStringFromClass([subview class])`来获取类名的字符串表示形式。

其次，将整个类名作为字符串文字是一个很大的风险，你不应该这么明显。例如，您可以测试名称是否包含您要查找的名称的一部分：`[className rangeOfSubstring:@"DeleteConfirmation"].location != NSNotFound`.

第三，不公开的原因是它是 tableview 单元格的私有实现。一个很好的例子，为什么你不应该在 iOS7 上，cell 的整个实现已经完全改变了。您在示例中提到的类不再使用。

# ios - 如何使 Xcode 调试构建与临时构建完全一样？

> ID：15251237
> 
> 赞同：1
> 
> 时间：2013-03-06T15:23:26.437
> 
> 标签：ios, xcode, ad-hoc-distribution

我有一个噩梦般的错误，它只发生在临时构建上，发生时不会创建崩溃日志，并且被证明无法追踪。我费力地在各处添加了警报视图，直到找到应该发生的语句（在此语句之前但不在此语句之后显示警报视图）。所以我评论了那个声明，它仍然在某个地方发生。我已经在这里工作了 8 个小时，我真的只需要在调试会话中让这个有效的错误发生。如何在调试构建中创建临时构建（优化或其他）的确切条件，以便我可以追踪它？

# mysql - Perl 在脚本之间传递数据而不使用查询字符串

> ID：15251239
> 
> 赞同：0
> 
> 时间：2013-03-06T15:23:35.030
> 
> 标签：mysql, perl

我是 Perl 的新手。编程新手。我为创建、搜索和查看“代理”编写了一些 CGI 屏幕。Create 将记录插入数据库表，搜索显示记录的一些详细信息，允许用户选择他们希望使用的记录，视图将记录拉回并根据从搜索中选择的 ID 将它们显示给用户（当然不是但它没有）。

在我的搜索页面上，我根据用户定义的搜索类型和搜索关键字显示了页面。我希望根据他们从搜索中选择的记录将用户带到“查看代理”页面。

我希望通过从用户在搜索屏幕上选择的记录的数据库表中传递记录 ID 来实现这一点。有没有办法让我在不使用查询字符串的情况下可靠地传递在脚本（searchagent.pl 到 agent.pl）之间选择的 ID？此脚本仅供内部使用，不涉及任何私人信息。

我确实环顾四周，看到了全局变量和包，但我不太确定这些都是我需要的。

在此先感谢您的帮助。

编辑以包含一些代码：

从先前的子程序中获取搜索类型和搜索关键字，并基于此运行 sql 查询。将表格输出返回到显示结果的不同子例程中。我在表格输出中发生了奇怪的多链接事情，因为我有一些 css 样式，使得鼠标悬停时看起来整行都突出显示。

```
sub GetResults {

my $searchtype = $form{'radio'}; 
my $searchfor = $form{'searchby'};
my ($selectID, $selectname, $selectphone, $selectstate, $selectzip);

given ($searchtype) {
    when('a.agentid') { $selectID = "CHECKED"; }
    when('a.name') { $selectname = "CHECKED"; }
    when('c.phonenumber') { $selectphone = "CHECKED"; }
    when('addy.state') { $selectstate = "CHECKED"; }
    when('addy.zipcode') { $selectzip = "CHECKED"; }
    default { $selectID = "", $selectname = "", $selectphone     = "",$selectstate = "", $selectzip = "";  }
}

my $sth = $dbh->prepare("select a.AgentID, a.name, c.phonenumber, addy.state,   addy.zipcode from agent a inner join entity e on entityid = agentid inner join contact c on contactid = billingcontactid inner join address addy on addressid = physicaladdressid where $searchtype like '%$searchfor%' order by $searchtype;") or die "prepare statement failed: $DBI::errstr\n";

$sth->execute;

my ($table, $f1, $f2, $f3, $f4, $f5);

while (($f1, $f2, $f3, $f4, $f5) = $sth->fetchrow_array)
{
$table .= "<tr><td align=center><font size=\"4\" color=\"black\"><a name=\"idagent\" href=\"agent.pl?agentid=$f1\">$f1</a></font></td><td align=center><font size=\"4\" color=\"black\"><a name=\"idagent\" href=\"agent.pl?agentid=$f1\">$f2</a></font></td><td align=center><font size=\"4\" color=\"black\"><a name=\"idagent\" href=\"agent.pl?agentid=$f1\">$f3</a></font></td><td align=center><font size=\"4\" color=\"black\"><a name=\"idagent\" href=\"agent.pl?agentid=$f1\">$f4</a></font></td><td align=center><font size=\"4\" color=\"black\"><a name=\"idagent\" href=\"agent.pl?agentid=$f1\">$f5</a></font></td></tr>";
}

$sth->finish;

return ($table, $searchfor, $selectID, $selectname, $selectphone, $selectstate, $selectzip);

} 
```

选择记录时，我使用查询字符串传递所选记录的 ID 并运行此子例程并在另一个子例程中显示结果。我正在使用数组的值将值打印到文本字段中，并使用一些给定的语句来确定下拉菜单。 **话虽如此，我是否有一种更快的方法来确定使用给定并列出所有 50 个州的州选择？**

```
sub GetAgent {

my $sth = $dbh->prepare("select a.name, a.paidcommission, a.paidreferral, paddy.address1, paddy.address2, paddy.city, paddy.state, paddy.zipcode, maddy.address1, maddy.address2, maddy.city, maddy.state, maddy.zipcode, bc.name, bc.phonenumber, bc.phoneext, bc.phonenumber2, bc.phoneext2, bc.fax, bc.email, sc.name, sc.phonenumber, sc.phoneext, sc.phonenumber2, sc.phoneext2, sc.fax, sc.email from agent a inner join entity e on entityid = agentid inner join address paddy on paddy.addressid = physicaladdressid inner join address maddy on maddy.addressid = mailingaddressid inner join contact bc on bc.contactid = billingcontactid inner join contact sc on sc.contactid = salescontactid where a.agentid = $form{agentid};") or die "prepare statement failed: $DBI::errstr\n";

$sth->execute;

my @agentval = $sth->fetchrow_array;

$sth->finish;

return (@agentval);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T06:12:19.063

如果不想使用查询字符串，可以使用 POST，见：

[如何隐藏我的网址参数？](https://stackoverflow.com/questions/1716649/how-to-hide-my-url-params)

您还可以使用 cookie：

[http://perldoc.perl.org/CGI/Cookie.html](http://perldoc.perl.org/CGI/Cookie.html)

如果您刚刚开始，查询字符串是最简单的。

# c# - 在服务器上安装了 Word 但找不到它以在组件服务中设置权限

> ID：15251240
> 
> 赞同：5
> 
> 时间：2013-03-06T15:23:37.043
> 
> 标签：c#, com, office-interop

我在看这个问题；[System.UnauthorizedAccessException：检索 Word 互操作的 COM 类工厂失败，出现错误 80070005。](https://stackoverflow.com/questions/1491123/system-unauthorizedaccessexception-retrieving-the-com-class-factory-for-compone)

我们在测试服务器中安装了 word，以便让 Word Interop 能够在上面工作。这导致了这个新错误，我无法应用我在 Componenet 服务 DCOM 配置上找不到 Microsoft Word 推荐的修复程序。那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:13:46.943

使用[ERR 工具](http://www.microsoft.com/en-us/download/details.aspx?id=985)，我们看到错误：80070005 是访问被拒绝，因此您要么没有权限，要么是设计使然。

```
 for hex 0x80070005 / decimal -2147024891 :
  COR_E_UNAUTHORIZEDACCESS                                      corerror.h     
 MessageText: 
 Access is denied.
  DIERR_OTHERAPPHASPRIO                                         dinput.h       
  DIERR_READONLY                                                dinput.h       
  DIERR_HANDLEEXISTS                                            dinput.h       
  DSERR_ACCESSDENIED                                            dsound.h       
  ecAccessDenied                                                ec.h           
  ecPropSecurityViolation                                       ec.h           
  MAPI_E_NO_ACCESS                                              mapicode.h     
  STIERR_READONLY                                               stierr.h       
  STIERR_NOTINITIALIZED                                         stierr.h       
  E_ACCESSDENIED                                                winerror.h     
 General access denied error
 11 matches found for "0x80070005" 
```

我之所以提到按设计是因为这篇知识库文章中记录的所有问题：[Office 服务器端自动化的注意事项](http://support.microsoft.com/kb/257757)。

*在服务器操作系统上安装 Office 会导致各种问题。对于 VSTO 开发，我在 Win7 上安装 TFS 以进行自动构建以避免服务器端互操作问题。*

不要使用服务器操作系统进行办公自动化，根据知识库文章不支持，使用 Win7！

> Microsoft 强烈建议使用一些不需要在服务器端安装 Office 并且可以比自动化更高效、更快速地执行大多数常见任务的替代方案。在将 Office 作为服务器端组件加入项目之前，请考虑替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:52:37.220

您不应该寻找确切的 000209FF-0000-0000-C000-000000000046 代码，在您的情况下它可能有不同的名称。我有 00021401-0000-0000-C000-000000000046，尝试根据最后一个寻找数字对。并且不要忘记在 mmc 控制台中添加服务组件选项卡。

**更新**

![在此处输入图像描述](../Images/9c6360598818174ac586efe2bba9ce7f.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T11:39:13.947

在不知道您从链接的 stackoverflow 帖子中尝试了什么的情况下：当 COM 对象不出现时，您通常需要运行

```
mmc -32 
```

并手动添加*组件服务*管理单元。这在 Windows Server 2008 R2 和 Windows Server 2012 中都适用于我。

您还需要在以下位置创建桌面目录：

> C:\Windows\SysWOW64\config\systemprofile
> 
> C:\Windows\System32\config\systemprofile

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T02:38:41.383

这比输入 SO 答案要容易得多，因为需要检查和对齐各种宫殿。

但总体目标是 1) 追踪尝试访问和启动/激活 COM 组件的安全帐户，以及 2) 哪个 COM 组件出现故障。

**注意：**所描述的程序会增加您的安全风险，因此请务必创建您所做的所有更改的大量日志，以便您知道究竟是什么解决了您的问题，而且您可以回滚所有不相关的内容。
**注意 2**一次更改一项，无论是否需要重新启动服务器。\ - 所以你知道是什么修复了它。

*   从您的 Windows 日志开始——它们通常会记录所涉及的确切安全主体以及它尝试访问/激活的 DCOM 组件。通常两者：安全上下文和组件都非常明显 - 在这种情况下，您可以跳到`dcomcnfg`下面的段落。

*   **临时**测试您是否已找到组件/帐户的一种方法是允许安全帐户的管理员权限或“每个人”访问组件并查看您是否消除了错误
    **注意：这些是临时措施，仅用于测试。不要忘记回滚所有内容。**

*   您的永久配置更改将在组件服务 MMC 片段中完成。您可以通过手动将其添加到提升的 MMC 窗口，或者更简单地通过在管理员权限下运行以下命令来进行：

> />dcomcnfg

*   尝试在 Component Services/Computers/My Computer/DCOM Config/ 下找到感兴趣的组件，右键单击并执行*Properties*：![在此处输入图像描述](../Images/396a5b3ba5f831ab1b071e8441f480b2.png)

*   转到“*安全*”选项卡并将*激活*和*访问*权限调整为可以解决您的问题的最低限度，但尽可能保持接近锁定状态。
    **注意：**我从来没有用 MS Office 互操作做过这个。请务必考虑这样做的所有安全隐患：
    ![在此处输入图像描述](../Images/a8cd39898cfc9c0685029492bcc6a1de.png)

这就是你开始的方式。我在所有版本的 Windows 上都这样做过，感觉总是不同的。通常我不得不依靠其他方法来跟踪这种情况：SysInternals“间谍”工具、Windows 安全审计、*COM+ 应用程序*属性，以及在少数情况下直接修改文件系统或注册表项 ACL。大多数时候它是实验室/开发机器，所以黑客，比如编辑注册表项的安全性，是可以的。

再次 - 跟踪并回滚您不需要的所有更改！

# c# - 在我所有的 IP 上发送一个 UDP 多播数据包

> ID：15251242
> 
> 赞同：0
> 
> 时间：2013-03-06T15:23:43.717
> 
> 标签：c#, sockets, network-programming, udp, multicast

我正在尝试在我的所有网络接口（2 个 LAN，一个 wifi）上发送一个多播数据包。我最初遵循本[教程](http://www.codeproject.com/Articles/1705/IP-Multicasting-in-C)。

我遇到的问题是，数据包似乎只有我的一个 IP 地址。

这是我当前的代码。

```
private static void SendOnAllCards(int port, String address)
{
    using (Socket mSendSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp))
    {
        mSendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership,
                                    new MulticastOption(IPAddress.Parse(address)));
        mSendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastTimeToLive, 255);
        mSendSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
        mSendSocket.Bind(new IPEndPoint(IPAddress.Any, port));
        IPEndPoint ipep = new IPEndPoint(IPAddress.Parse(address), port);
        mSendSocket.Connect(ipep);

        byte[] bytes = Encoding.ASCII.GetBytes("This is my welcome message");
        mSendSocket.Send(bytes, bytes.Length, SocketFlags.None);
    }
} 
```

我尝试手动进行：

```
private static void SendOnAllCards(int port, string remoteAddressSrc)
{
    foreach (IPAddress remoteAddress in Dns.GetHostAddresses(Dns.GetHostName()).Where(i=>i.AddressFamily == AddressFamily.InterNetwork))
    {

        using (Socket mSendSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp))
        {
            mSendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership,
                                        new MulticastOption(IPAddress.Parse(remoteAddressSrc)));
            mSendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastTimeToLive, 255);
            mSendSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
            mSendSocket.Bind(new IPEndPoint(IPAddress.Any, port));
            IPEndPoint ipep = new IPEndPoint(remoteAddress, port);
            mSendSocket.Connect(ipep);

            byte[] bytes = Encoding.ASCII.GetBytes("This is my welcome message");
            mSendSocket.Send(bytes, bytes.Length, SocketFlags.None);
        }
    }
} 
```

这可行，但这意味着我必须创建与 IP 一样多的套接字（在此示例中，我在每次发送时创建它们，但这只是一个测试），而且我不喜欢我必须获得的方式我所有的IP。

那么这样做的正确方法是什么？

**编辑**第二个奖励问题：为什么当我在指定远程地址的本地 ip 中`Connect`指定远程地址但不在`Bind`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:23:52.847

似乎我们必须在网络接口上进行迭代，在本地 IP 上进行绑定并执行 Send* *To* * 调用：

```
public void SendTestMessage()
{
    foreach (IPAddress localIp in
        Dns.GetHostAddresses(Dns.GetHostName()).Where(i => i.AddressFamily == AddressFamily.InterNetwork))
    {
        IPAddress ipToUse = localIp;
        using (var mSendSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp))
        {
            mSendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership,
                                        new MulticastOption(_multicastIp, localIp));
            mSendSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastTimeToLive, 255);
            mSendSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
            mSendSocket.MulticastLoopback = true;
            mSendSocket.Bind(new IPEndPoint(ipToUse, _port));

            byte[] bytes = Encoding.ASCII.GetBytes("This is my welcome message");
            var ipep = new IPEndPoint(_multicastIp, _port);
            mSendSocket.SendTo(bytes, ipep);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:03:21.790

您可以使用 WMI 类找到网络适配器`Win32_NetworkAdapter`。您可能需要优化查询实例带来的结果，因为 Windows 和第三方软件都创建了许多“虚拟适配器”。我编写了一个快速的豪华脚本来使用 WMI 检索适配器。这应该只显示具有 IP 地址的适配器。这只是为了显示您可以查询以检索激活适配器的 WMI 信息。

```
$networkadapters = @(Get-CimInstance -ClassName Win32_NetworkAdapter -Property *)
$networkadapters_configs = @($networkadapters | Get-CimAssociatedInstance -ResultClassName Win32_NetworkAdapterConfiguration)

0..($networkadapters.Length-1) | %{
    if($networkadapters_configs[$_].IPAddress -gt '') {
        Write-Output "Adapter #$($_)" 
        Write-Output $networkadapters[$_]
        Write-Output "Config #$($_)" 
        Write-Output $networkadapters_configs[$_]
    }
} 
```

# android - 在应用程序计费 - 如何测试另一种货币

> ID：15251244
> 
> 赞同：5
> 
> 时间：2013-03-06T15:23:44.440
> 
> 标签：android, in-app-billing

我设置了新的应用内计费 (v3) 系统并在应用中工作。但现在我想知道对于想要以欧元购买的欧洲人来说，这一切会如何。这是否与“模拟地点”有关 - 或者只是假设我正在度假并且仍然以我自己的货币给出价格？

**编辑：**再想一想，我想它可能是您的谷歌帐户所附的信用卡/借记卡所定义的货币。

# java - 不同的（HotSpot）JVM 线程类型有什么作用？

> ID：15251250
> 
> 赞同：15
> 
> 时间：2013-03-06T15:23:51.817
> 
> 标签：java, multithreading, jvm

我看到 HotSpot JVM 中实现了六种线程类型：VMThread、CGCThread、PGCThread、JavaThread、CompilerThread 和 WatcherThread。但是我不知道哪种线程类型在做什么。这是我到目前为止所理解的：

*   VMThread：像垃圾收集器一样运行 VM 任务。
*   CGCThread：并发垃圾收集器。
*   PGCThread：并行垃圾收集器（与 CGC 的区别？）。
*   JavaThread：我猜是程序的线程。
*   CompilerThread：编译器的线程？
*   观察者线程：？

附加问题：其他 JVM 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-14T16:27:42.747

[您可以在OpenJDK 网站](http://openjdk.java.net/groups/hotspot/docs/RuntimeOverview.html#Thread%20Management%7Coutline)上找到简要说明：

> VM线程的主要种类如下：
> 
> *   VM线程：VMThread的这个单例实例负责执行VM操作，下面讨论
> *   周期性任务线程：WatcherThread 的这个单例实例模拟定时器中断，用于在 VM 中执行周期性操作
> *   GC 线程：这些线程，不同类型，支持并行和并发垃圾收集
> *   编译器线程：这些线程将字节码运行时编译为本机代码
> *   信号分派器线程：该线程等待进程定向信号并将它们分派到 Java 级别的信号处理方法

您可能想阅读整个线程管理段落，因为它继续进一步解释，例如 VM 线程负责什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:47:12.233

好的，感谢评论，我们有了答案的开始：

1）由于垃圾收集器有一个停止世界的机制，除了调整之外，还有两种方法可以减少这些暂停：

*   通过 PGCThreads 运行并行 GC，如果有 n 个内核可用，则可以在暂停期间运行 n 个线程以缩短它们。
*   使用并发 GC，通过 CGCThread 运行并完成常规 GC 关闭暂停的工作，与主程序线程同时进行。

2) CompilerThread 运行即时编译器。

3）WatcherThread每50ms模拟一次定时器中断，在VM中运行周期性操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-24T17:04:53.320

我要补充一点， [JVM中有](http://hg.openjdk.java.net/jdk8u/jdk8u-dev/hotspot/file/d3cc20285653/src/share/vm/runtime/os.hpp#l446)**7 个**线程类型！不要错过`os_thread`

路径：定义在：`/hotspot/src/share/vm/runtime/os.hpp`

```
 enum ThreadType {
    vm_thread,
    cgc_thread,        // Concurrent GC thread
    pgc_thread,        // Parallel GC thread
    java_thread,       // Java, CodeCacheSweeper, JVMTIAgent and Service threads.
    compiler_thread,
    watcher_thread,
    os_thread
  }; 
```

# java - 如何使用 dbus-java 注册 dbus 对象？

> ID：15251256
> 
> 赞同：3
> 
> 时间：2013-03-06T15:24:08.460
> 
> 标签：java, linux, dbus

我正在尝试使用 org.freedesktop 中的 dbus-java 在 dbus 上注册对象。根据[文档](http://dbus.freedesktop.org/doc/dbus-java/)，此类操作需要：创建 DBusConnection，创建对象并在 DBusConnection 上调用方法 exportObject。

我的代码：

```
DatabaseAccessImpl dbAccess = new DatabaseAccessImpl();

    System.out.println("Object created.");

    System.out.println("Trying to connect session bus");
    try {
        conn = DBusConnection.getConnection(DBusConnection.SESSION);
    } catch(DBusException ex) {
        ex.printStackTrace();
    }

    System.out.println("Connected to session bus.");

    System.out.println("Trying to register dbus object");

    try {
        conn.exportObject("/obj/path", new DatabaseAccessImpl());
    } catch (DBusException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    } 
```

在哪里：

DatabaseAccessImpl 是由 CreateInterface 自动创建的接口的实现（xml 在与 c++ (qt) 一起使用时工作正常）。

dbAccess 将在 dbus 上从数据库发送一些数据（主要是整数）。这一切在 Qt 中运行良好，但我必须在 java（不是我的语言）中重新实现它。

要使用 dbus-java，您必须安装 libmatthew-debug 并执行程序

> -Djava.library.path=/usr/lib/jni

我正在研究 Linux Mint。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:46:04.133

两件事情：

1.  您需要先注册一个总线名称，即`conn.requestBustName("com.example")`
2.  `DatabaseAccessImpl`需要实现一个扩展的接口`DBusInterface`。

[这](http://rm5248.com/?page_id=76)是我不久前用代码编写的教程，可以帮助您了解正在发生的事情。

# spring - Spring MVC ExceptionHandling：注释为@ExceptionHandling 的操作无法将变量传递给错误视图

> ID：15251257
> 
> 赞同：1
> 
> 时间：2013-03-06T15:24:13.947
> 
> 标签：spring, jakarta-ee, web-applications, spring-mvc, exception-handling

我知道很多人都遇到过类似的问题。抱歉再次发布，但我相信有些事情我可能做得不好。

我正在`Spring 3.0.5`使用`freemarker 2.3.14`. 基本上我想向用户显示一个友好的错误消息。

```
@Controller("exceptioncontroller")
public class ExceptionController {
private static Logger logger = Logger.getLogger(ExceptionController.class);

@RequestMapping(value = "/site/contentnofoundexception")
public String throwContentFileNotFound(){
    boolean exception = true;
    if(exception){
        throw new ContentFileNotFoundException("content ZZZ123 not found");
    }
    return  "errortest";
}

@ExceptionHandler(value = ContentFileNotFoundException.class)
public String handleFileNotFoundException(ContentFileNotFoundException ex, Model model) {
    model.addAttribute("msg",ex.getErrorMessage());//this message is never passed to the error view. msg is always null 
    return "error";
 }
}

//same issue for handleException action which uses ModelAndView
@ExceptionHandler(value = Exception.class)
public ModelAndView handleException(Exception ex){
   logger.error(ex);
    ModelAndView mv = new ModelAndView();
    mv.setViewName("error");
    String message = "Something Broke. Please try again later";
    mv.addObject("msg", message);
    return mv;
} 

 // Custom Exception class   
 public class ContentFileNotFoundException extends RuntimeException {

 private String errorMessage;

 public ContentFileNotFoundException(String message) {
    this.setErrorMessage(message);
 }

 public String getErrorMessage() {
    return errorMessage;
 }

 public void setErrorMessage(String errorMessage) {
     this.errorMessage = errorMessage;
 }
} 
```

因此，每个案例`handleFileNotFoundException`或`handleException`操作都可以调用，但它们不能向`error.ftl`视图发送任何消息以显示给用户。有什么我需要配置的吗？

感谢您提前帮助

# sql-server - 如何跟踪从 VS2012 发送到本地 SQL Server 的 SQL 命令？

> ID：15251264
> 
> 赞同：0
> 
> 时间：2013-03-06T15:23:25.827
> 
> 标签：sql-server

我曾经使用管理工作室，但这仍然是我现在应该使用的，我正在运行代码并使用 VS2012 进行开发。

我看到现在有一​​些用于 VS2012 的 SQL Server Data 工具。我可以使用这些来观看 SQL 和查询计划还是应该下载管理工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:27:45.610

您可以使用[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)来跟踪命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:27:54.097

数据工具只允许您在 VS2012 中创建数据库项目，查看正在运行的命令并查看执行计划，您将需要管理工具、SQL 分析器来查看命令，然后 SSMS 来检索和查看执行计划。

对于执行计划，您当然可以使用 SQL Sentry 之类的其他工具，但您仍然需要管理工作室来获取探查器。

# mysql - 错误 1062 - 键 'PRIMARY' 的重复条目 '127' - 找不到原因

> ID：15251267
> 
> 赞同：3
> 
> 时间：2013-03-06T15:24:36.287
> 
> 标签：mysql

我收到此错误：

> #1062 - 键 'PRIMARY' 的重复条目 '127'

并且找不到原因。

查询：

```
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('00');
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('01'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('02'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('03'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('04'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('05'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('06'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('07'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('08'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('09'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('0A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('0B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('0C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('0D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('0E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('0F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('10'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('11'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('12'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('13'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('14'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('15'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('16'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('17'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('18'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('19'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('1A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('1B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('1C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('1D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('1E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('1F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('20'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('21'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('22'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('23'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('24'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('25'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('26'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('27'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('28'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('29'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('2A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('2B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('2C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('2D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('2E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('2F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('30'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('31'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('32'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('33'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('34'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('35'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('36'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('37'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('38'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('39'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('3A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('3B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('3C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('3D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('3E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('3F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('40'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('41'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('42'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('43'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('44'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('45'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('46'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('47'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('48'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('49'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('4A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('4B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('4C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('4D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('4E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('4F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('50'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('51'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('52'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('53'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('54'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('55'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('56'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('57'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('58'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('59'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('5A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('5B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('5C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('5D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('5E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('5F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('60'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('61'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('62'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('63'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('64'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('65'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('66'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('67'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('68'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('69'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('6A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('6B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('6C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('6D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('6E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('6F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('70'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('71'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('72'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('73'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('74'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('75'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('76'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('77'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('78'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('79'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('7A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('7B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('7C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('7D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('7E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('7F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('80'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('81'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('82'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('83'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('84'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('85'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('86'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('87'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('88'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('89'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('8A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('8B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('8C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('8D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('8E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('8F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('90'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('91'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('92'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('93'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('94'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('95'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('96'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('97'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('98'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('99'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('9A'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('9B'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('9C'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('9D'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('9E'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('9F'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A0'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A1'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A2'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A3'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A4'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A5'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A6'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A7'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A8'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('A9'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('AA'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('AB'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('AC'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('AD'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('AE'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('AF'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B0'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B1'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B2'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B3'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B4'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B5'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B6'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B7'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B8'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('B9'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('BA'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('BB'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('BC'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('BD'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('BE'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('BF'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C0'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C1'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C2'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C3'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C4'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C5'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C6'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C7'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C8'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('C9'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('CA'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('CB'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('CC'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('CD'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('CE'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('CF'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D0'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D1'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D2'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D3'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D4'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D5'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D6'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D7'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D8'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('D9'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('DA'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('DB'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('DC'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('DD'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('DE'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('DF'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E0'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E1'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E2'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E3'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E4'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E5'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E6'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E7'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E8'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('E9'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('EA'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('EB'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('EC'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('ED'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('EE'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('EF'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F0'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F1'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F2'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F3'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F4'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F5'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F6'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F7'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F8'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('F9'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('FA'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('FB'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('FC'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('FD'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('FE'); 
INSERT INTO `portautomadb`.`tag` (`codigo`) VALUES ('FF'); 
```

表的结构：

```
CREATE TABLE `tag` (  
    `idtag` tinyint(4) NOT NULL AUTO_INCREMENT,  
    `codigo` varchar(3) NOT NULL,  
    PRIMARY KEY (`idtag`),  
    UNIQUE KEY `codigo_UNIQUE` (`codigo`)
) ENGINE=InnoDB AUTO_INCREMENT=127 DEFAULT CHARSET=utf8 
```

需要帮助谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:27:25.730

signed`TINYINT`可以包含从 -128 到 127 的数字。您的表中很可能已经有 127 行，因此您的主键列不能包含更多。更改您的数据类型`SMALLINT UNSIGNED`(0-65535) `MEDIUMINT UNSIGNED`(0-16777215) 或只是`INT UNSIGNED`(0-4294967295) - 最后一个应该绰绰有余

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T15:27:55.473

您的主键是一个 TINYINT（有符号 8 位整数），它最多只能取 127 的值。如果您尝试插入第 128 行，新的自动增量值将被截断为 127，这会失败，因为已经有具有该值的行。

更改表以将 idtag 的数据类型更改为 INT：

```
mysql> alter table tag modify column idtag int auto_increment; 
```

虽然在一个非常大的表中更改列是一项昂贵的操作，但在这种情况下它应该非常快，因为根据定义，您的表中最多有 127 行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:28:11.203

您已达到数据类型的最大值，该值`TINYINT`可容纳从 -128 到 127。改为`INT`改为。

# ios - 带有画外音的 iOS UIScrollView

> ID：15251274
> 
> 赞同：5
> 
> 时间：2013-03-06T15:24:48.780
> 
> 标签：ios, uiscrollview, accessibility

我对 iOS 开发相对较新，并且`UIScollView`在 Voice Over 模式下遇到问题。

我有一个`UIScollView`和一组`WebViews`显示在滚动视图中。滚动与正常模式下的滑动完美配合。当我打开 VoiceOver 时，我预计它会以与三指滑动手势相同的方式工作，但它没有响应或滚动。

我有一个`xib`文件，它`ScrollView`被添加到`xib`并有自定义控制器类，它向`ScrollView`

如果我遗漏了一些非常基本的东西，请告诉我。

# java - 带有 JPAContainer 和 FieldGroup 的 Vaadin 7.0.1 组合框

> ID：15251275
> 
> 赞同：3
> 
> 时间：2013-03-06T15:24:49.023
> 
> 标签：java, vaadin

（对不起，如果这是一个新问题）

我有两个 JPAContainer，一个用于 Employee 类/表，一个用于 Language 类/表。员工可以使用选定的语言。

我正在尝试创建一个员工编辑表单，其中包含一个用于语言选择和 FieldGroup 的组合框来处理绑定和创建。

我可以通过 JPAContainer 获取下拉菜单以包含 Languages 表中的条目，但它不会显示 Employee 记录中已经存在的值。我究竟做错了什么？

```
//Key parts of code....

private JPAContainer<Employee> employees;
private JPAContainer<Language> languages;

FormLayout formLayout = new FormLayout();

formFieldGroup = new FieldGroup(employeeItem);

Field<?> firstName = formFieldGroup.buildAndBind("First name", "firstName");
Field<?> lastName = formFieldGroup.buildAndBind("Last name", "lastName");
Field<?> userName = formFieldGroup.buildAndBind("Username", "userName");
Field<?> fullName = formFieldGroup.buildAndBind("Full name", "fullName");
Field<?> initials = formFieldGroup.buildAndBind("Initials", "initials");

ComboBox language = new ComboBox("Language",languages);
language.setContainerDataSource(languages);
language.setItemCaptionPropertyId("languageName");
language.setFilteringMode(FilteringMode.CONTAINS);
language.setImmediate(true);

formFieldGroup.bind(language, "language");

firstName.addValidator(new BeanValidator(Employee.class, "firstName"));
lastName.addValidator(new BeanValidator(Employee.class, "lastName"));
firstName.addValidator(new BeanValidator(Employee.class, "userName"));
lastName.addValidator(new BeanValidator(Employee.class, "fullName"));
lastName.addValidator(new BeanValidator(Employee.class, "initials"));

formLayout.addComponent(userName);
formLayout.addComponent(fullName);
formLayout.addComponent(firstName);
formLayout.addComponent(lastName);
formLayout.addComponent(initials);
formLayout.addComponent(language);

 // A few details of the domain classes
@Entity
@Table(name="Employees")
public class Employee   extends BaseEntity
{
private static final long   serialVersionUID    = 1L;

@Id 
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="EmployeeID")
private Integer     employeeID;

    ...

@ManyToOne 
@JoinColumn(name="LanguageID",updatable=false)
private Language    language;
    ...}

@Entity
@Table(name="Languages")
public class Language  extends BaseEntity
{

@Id 
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="LanguageID")
private Integer languageID;

@Column(name="LangaugeName")
private String  languageName;

    ... } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T10:13:03.760

我通过回答这个问题的 Vaadin 论坛收到了以下回复（感谢 Jonatan Kronqvist）。

> 嗨迈克尔，
> 
> JPAContainer 项目 ID 与数据库中的 ID 相同，这意味着在选择/组合框中使用 JPAContainer 会导致选择的值是数据库中行的 ID，而不是 POJO 本身，正如预期的那样通过您的员工实体 POJO。将 SingleSelectConverter 添加到组合框应该可以解决您的问题：
> 
> ```
> language.setConverter(new SingleSelectConverter(language)); 
> ```
> 
> ...
> 
> HTH, /乔纳坦

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T09:06:50.087

我写了一篇关于这个主题的博客文章：[选择带有 Vaadin FieldGroup 的嵌套 JavaBeans](http://blog.oio.de/2014/04/25/select-nested-javabeans-vaadin-fieldgroup/)。在本文中，我尝试解释 Vaadin 的 FieldGroup 如何在内部工作以及它如何将`Item`属性绑定到字段组件。在尝试为已编辑的 选择引用的 JavaBean（例如`Language`在此问题中）的情况下`Item`，了解此属性绑定的工作原理以及如何通过自定义`com.vaadin.data.util.converter.Converter`实现协助该绑定非常重要。这也从迈克尔的回答中解释了为什么`SingleSelectConverter`在这种特殊情况下需要 a 。

# ios - 可以让 ivar 存储对所有者的引用吗？

> ID：15251278
> 
> 赞同：1
> 
> 时间：2013-03-06T15:25:02.503
> 
> 标签：ios, objective-c, xcode

我有一个视图控制器，它需要它的一个 ivars 在某个时候调用它的方法。ivar 存储对其所有者的引用是否可以接受？这会导致任何问题吗？如果是这样，更好的方法？

```
// From MainViewController.h
#import <UIKit/UIKit.h>
#import "MyObject.h"

@interface MainViewController : UIViewController

@property (strong, nonatomic) MyObject *myObject;

@end

// From MyObject.h
#import <UIKit/UIKit.h>

@interface MyObject : NSObject

@property (strong, nonatomic) id myOwner;

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:29:57.637

当 2 个对象彼此具有强引用时，这将创建保留循环 - 因此它们将永远不会被释放（因此您将获得内存泄漏），除非您手动中断循环（例如，如果合适，在 viewWillDisappear 上将 myObject 属性设置为 nil）。

更好的方法是“子”对象将对其“所有者”有弱引用，因此您根本不会有保留循环：

```
@interface MyObject : NSObject

@property (weak, nonatomic) id myOwner;

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:30:20.397

是的，但是您想考虑将属性声明更改为：

```
@property ( weak, nonatomic ) id myOwner; 
```

这样可以避免可能的[保留周期](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:51:34.547

一个块也可以解决问题。

# c# - XAML 图像源不适用于 https？

> ID：15251283
> 
> 赞同：1
> 
> 时间：2013-03-06T15:25:12.313
> 
> 标签：c#, xaml, rest, jira

嗨，一群很棒的人，

在我的 XAML 中，我想为图像的 Source 属性使用绝对 URI。

如果 URI 是“http”，它可以工作。如果 URI 是“https”，则不是。

为了备份并将其放在上下文中，我通过 REST API 连接到 JIRA，并且我正在反序列化给我一个 JIRA 问题的响应。该问题具有问题类型，并且该问题类型具有我要绑定的“iconUrl”属性。

我已经调试并验证了到目前为止一切都是正确的。我相信这是获得正确身份验证的问题，因此我对图像的请求不会被拒绝。

我的 JiraRestClient 构造函数（使用 RestSharp）：

```
public JiraRestClient(string baseUrl, string username, string password)
{
    this.BaseUrl = baseUrl;
    this.ServerUrl = baseUrl.Substring(0, baseUrl.IndexOf("rest"));
    client = new RestClient();
    client.BaseUrl = baseUrl;
    client.Authenticator = new HttpBasicAuthenticator(username, password); //culprit??
} 
```

我对客户端的使用：

```
public JiraIssue GetIssueByID(string issueKeyOrId)
{
    request = new RestRequest();
    request.Resource = "issue/" + issueKeyOrId;
    IRestResponse response = client.Execute(request);
    JavaScriptSerializer serializer = new JavaScriptSerializer();
    // Deserialize the response into a JiraIssue object
    JiraIssue issue = serializer.Deserialize<JiraIssue>(response.Content);
    ...
    return issue;
} 
```

在我通过身份验证并创建我的 REST 客户端之后，我只是试图直接在 XAML 中提取问题类型的图像（在这里，我用绝对 URI 替换了绑定，这也不起作用）：

```
...
<Image Height="16" Width="16" Source="https://..."/>
... 
```

我错过了什么？HttpBasicAuthenticator 的东西？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:09:10.033

问题的根源是我试图绑定的图像/图标实际上并不存在于 JIRA 服务器上；它们位于 Confluence 网站上，作为 wiki 页面的附件。因此，问题与 HTTPS 无关，更多的是与使用 Confluence 进行身份验证以下载图像有关。

# php - jQuery / JSON / CodeIgniter - 表单验证

> ID：15251285
> 
> 赞同：0
> 
> 时间：2013-03-06T15:25:13.867
> 
> 标签：php, jquery, json, codeigniter

我试图从 JSON 和 jQuery 开始。我根本不是 JavaScript 程序员，所以我正在混合和匹配，并且在让我的代码正常工作时遇到了很多问题。我想有人可能会帮助我。

我有一个模型，它使用以下 PHP 代码来检查电子邮件地址是否已在系统中注册：

```
function is_email_available($email) {
  $this->db->select('1', FALSE);
  $this->db->where('LOWER(email)=', strtolower($email));
  $this->db->or_where('LOWER(new_email)=', strtolower($email));

  $query = $this->db->get($this->table_name);
  return $query->num_rows() == 0;
} 
```

我的 ajax 控制器使用以下代码调用上面的代码，如果已注册，则返回 json true 或 false

```
function email_availability() {

  // Check to see if the username is available or taken
  if ( $this->users->is_email_available( $this->input->post('emailaddress'))) {
    echo json_encode(TRUE);
  } else {
    echo json_encode(FALSE);
  }

} 
```

上面是使用以下 jQuery 从我的 JS 文件中调用的，但它似乎根本不起作用。

```
if(iEmail.val()) {
  $.ajax({
    url: '/ajax/email_availability',
    data: 'emailaddress=' + iEmail.val(),
    dataType: 'json',
    type: 'post',
    success: function(msg) {
      iEmail.next('.error').text('This Email Address is not registered');
      error = true;
    }
  });
} 
```

我认为我的 jQuery 完全关闭但无法弄清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:29:02.140

您并没有真正检查结果是真还是假。

```
 success: function(msg) {
            if (msg){
                //email is available
            }
            else{
                //email is not available
            }
        } 
```

# ios - 在 Dropbox IOS 中使用 loadDelta 功能

> ID：15251289
> 
> 赞同：4
> 
> 时间：2013-03-06T15:25:19.223
> 
> 标签：ios, xcode, dropbox

我正在使用 Dropbox 上传和下载文件。我希望能够在某个文件夹中的文件更改时（或者如果在整个保管箱帐户中不可能）得到通知，以便通知用户。除了使用 delta 功能之外，我似乎没有找到任何方法来做到这一点。我找到了这段代码：

```
-(void)restClient:(DBRestClient *)client loadedDeltaEntries:(NSArray *)entries reset:(BOOL)shouldReset cursor:(NSString *)cursor hasMore:(BOOL)hasMore{
for (DBDeltaEntry *file in entries) {
     if(!file.metadata.isDirectory){
         NSLog(@"File: %@ ", file.metadata.filename );
     }else {
         NSLog(@"Directory: %@  ", file.metadata.filename );
     }
 }
} 
```

....来自这个堆栈溢出问题：[Using Delta in Dropbox API with iOS](https://stackoverflow.com/questions/10691367/using-delta-in-dropbox-api-with-ios)

但它给出了错误。我发现有一个功能，例如：

```
[self.restClient loadDelta:NSString]; 
```

但我似乎没有找到任何示例，请不要给我一个指向完全没有示例代码的 Dropbox 站点的链接。

# javascript - 为什么 parentNode 未定义？

> ID：15251294
> 
> 赞同：5
> 
> 时间：2013-03-06T15:25:30.303
> 
> 标签：javascript, dom

我正在尝试编写一个函数，该函数需要一个 ID，然后遍历 DOM 以查看该项目是否是标签的子项。这应该不会太难，但是我`parentNode`回来了`undefined`？我错过了什么？

这是我的代码的简化版本...在此先感谢。

```
<!DOCTYPE html>
<html lang="en">
<body>

<div id="top">
    <div id="top2"></div>

    <div id="top3"></div>

    <div id="top4"></div>

    <div id="top5">
        <div id="top5_1"></div>
    </div>
    <div id="top6">
            <div id="top6_1">
                <a href="" id="findMe">here I am...</a>
            </div>
    </div>
</div>

<script>

function findParent(startID, finish){

// change this from id to tag 
start = document.getElementById(startID).tagName;

    while (start.parentNode) {
        start = start.parentNode;

        if (start.tagName === finish){
            console.log("true " + startID + " is a child of " + finish);

        }else{
            console.log("false " + startID + " ISN'T a child of " + finish);
        }

    }
}

findParent("findMe", "BODY");

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T15:33:03.280

问题是：

```
start = document.getElementById(startID).tagName;

    while (start.parentNode) {
        start = start.parentNode; 
```

您试图`parentNode`从中获取`tagName`，这是一个字符串。删除`tagName`，你应该没问题。

# git - stash 然后 pop in git 执行自动提交

> ID：15251295
> 
> 赞同：1
> 
> 时间：2013-03-06T15:25:30.700
> 
> 标签：git, github

伙计们，

我对 git 的存储有点陌生，所以我可能在这里遗漏了一些基本的东西，这就是我正在做的事情：

*   我在我的 master 分支上，我一直在处理文件 app/models/medicine.rb ，我想从我的同事推送的 master 中提取更改。所以我做了一个**git stash**
*   现在我做了一个**git pull origin master**这会拉出所有新的变化
*   现在我做了一个**git stash pop**，它抱怨我修复了合并冲突
*   现在，当我执行**git diff app/models/medicine.rb**时，我看不到任何我隐藏在 diff 中的更改。此外，当我执行**git log**时，我看不到我的工作在任何地方提交。

所以看起来我正在处理的那些更改已经提交，我没想到会发生这种情况。我想进一步工作，然后做一个提交。那么我对 stash 的理解是错误的吗？如果我有一个用例，我正在做某事，然后我还没有准备好提交，但想要拉，然后继续进一步工作，然后进行提交，那么正确的 git 进程是什么？另一个副作用是我现在隐藏的工作没有 sha，假设我想在某个时候回到我的工作或挑选我的工作，没有办法做到这一点。我什至没有在我的 git 日志中看到它。非常感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:27:55.517

更改未提交，但已暂存。要看到它们，请执行`git diff --cached`. 要取消暂存它们，请执行`git reset`.

# wix - WiX：如果这是 c# 自定义操作函数中的“已安装”状态，如何获取？

> ID：15251296
> 
> 赞同：1
> 
> 时间：2013-03-06T15:25:31.370
> 
> 标签：wix, custom-action

我有一个自定义操作 c# 函数，它需要知道“已安装”或“未安装”的状态。如何获得这种状态？

即我需要在 c# 自定义操作中知道这个状态（已安装或未安装）

```
<Custom Action="CA_myfun" After="PublishProduct">NOT Installed</Custom>
    </InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:35:17.487

假设自定义操作计划立即执行：

```
bool installed = session.EvalulateCondition("Installed"); 
```

# grid - Dynamics Axe 预览窗格中的网格行高

> ID：15251298
> 
> 赞同：1
> 
> 时间：2013-03-06T15:25:36.937
> 
> 标签：grid, axapta, preview, dynamics-ax-2012, pane

我构建了一个表单并在其中嵌入了一个预览窗格。预览窗格显示填充了来自数据源的数据的网格。问题是行高异常。它的出现是网格行正常高度的 3 倍。我正在使用 Dynamics Ax 2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:16:12.020

您是否显示地址、街道名称或类似名称？

带有`DisplayHeight`属性为 2 或更大的扩展数据类型的字符串字段的网格会使行高更大以容纳该字段。您也可以更改属性`FormStringControl`。

解决方案可能是将`DisplayHeight`控件的 back 更改为 1。

# php - 删除 Netbeans 7.x 中的空行

> ID：15251301
> 
> 赞同：19
> 
> 时间：2013-03-06T15:25:42.350
> 
> 标签：php, netbeans, line-breaks, code-formatting

是否有任何插件、宏或内置函数可以删除 Netbeans 7.2（PHP 包，Windows 7）中的空行或冗余空行？由于我的上传和下载过程中的不同换行格式（Win <> Unix，通过 FileZilla 和 Netbeans），许多 PHP 文件的换行符增加了一倍（甚至四倍）。

![PHP文件中的双换行符](../Images/c0c60d9a6c00594b4dca658cd5330551.png)

*我可以使用 PSPad逐个文件*删除它们——但我正在寻找一种自动或批处理功能的解决方案。如果可用，我可以接受外部工具。

**编辑**：我知道`Source > Format`助手，但没有删除空行的设置。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-06T17:12:17.013

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)+ 和替换来做到这一点。在编辑器窗口*或*项目（*或*文件）目录树中执行此操作：

*   Ctrl + H
*   检查“正则表达式”
*   搜索`\n\n`
*   用。。。来代替`\n`
*   单击“全部替换”，直到删除所有行

如果你想保留一个空行，你应该：

*   搜索`\n\n\n`
*   用。。。来代替`\n\n`

如果要替换非空但*仅包含空格*的连续行，您应该：

*   搜索`\n[\t\r]+$\n`
*   用。。。来代替`\n`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-23T07:38:54.150

试试这个...

`Ctrl`+ `F`（查找）在 Netbeans 中作为正则表达式：

```
\n\s*(\n) 
```

并全部替换为

```
$1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-10T11:29:15.243

在 NetBeans 7.3 中（我不确定早期版本，它应该在 7.x 中可用）

自动删除：

> 工具 > 选项 > 编辑器 > 保存时 >**删除尾随空格**：

您可以选择：“*无/所有行/仅修改的行*”

手动方式：

`Alt`+ `Shift`+`F`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T15:30:10.840

是的，有一个，这确实是一个非常重要的功能。这取决于您的设置，但默认情况下您可以按`Alt`+ `Shift`+`F`或在上下文菜单中找到它：源 > 格式。

您可以在此处设置自己的格式化样式：**工具 > 选项 > 格式化**。您可以为所有语言或个人设置此项。

希望这可以帮助。

# c++ - 创建一个简单的 ListView Cascades

> ID：15251302
> 
> 赞同：0
> 
> 时间：2013-03-06T15:25:43.213
> 
> 标签：c++, blackberry-10, blackberry-cascades

我想在 Cascades 中创建一个简单的 ListView（在 C++ 或 QML 中）。ListView 的数据很简单，只是我想传递给它的字符串（没有 XML 或 SQL 等）；ListView 也可能有部分，例如，

```
 - Green
        - Cucumber
        - Peas
        - Salad
 - Red
        - Tomato
        - Red Radish
        - Carrot 
```

此外，我希望能够自定义列表视图项目的外观，可能还有 ListView 本身（例如，设置背景颜色、设置列表项目文本颜色等）。

任何实现我上面写的教程或简单的示例应用程序将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:32:55.600

最简单的方法是，如果您只想使用静态列表（我的意思是，您不想在运行时更改它）是从 XML 文件（例如：文件夹`model.xml`中的a）加载它`assets`，如下所示：

```
<model>
    <header title="Green"/>
    <item title="Cucumber"/>
    <item title="Peas"/>
    <item title="Salad"/>
    <header title="Red"/>
    <item title="Tomato"/>
    <item title="Red Radish"/>
    <item title="Carrot"/>
</model> 
```

您的 ListView 只需要加载它：

```
ListView {
    dataModel: XmlDataModel {
        source: "model.xml"
    }
} 
```

现在，如果您想自定义外观，您只需在 listItemComponents 中输入您希望它们如何显示：

```
ListView {
    dataModel: XmlDataModel {
        source: "model.xml"
    }
    listItemComponents: [
        ListItemComponent {
            type: "header"
            Container {
                // your personal code
            }
        },
        ListItemComponent {
            type: "item"
            Container {
                // your personal code
            }
        }
    ]
} 
```

这些容器允许您定义自己的布局。例如，假设您只想显示具有匹配背景颜色的标题，您可以这样做：

```
ListView {
    dataModel: XmlDataModel {
        source: "model.xml"
    }
    listItemComponents: [
        ListItemComponent {
            type: "header"
            Container {
                background: {
                    if (ListItemData.title == "Green") {
                        return Color.Green
                    } else {
                        return Color.Red
                    }
                }
                Header {
                    title: ListItemData.title
                }
            }
        },
        ListItemComponent {
            type: "item"
            Container {
                preferredHeight: 100
                Label {
                    text: ListItemData.title
                    verticalAlignment: VerticalAlignment.Center
                }
                Divider {}
            }
        }
    ]
} 
```

希望这能让您了解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:28:22.243

如果我理解正确你想要像`ExpandableListView`在android中一样你可以使用实现`bb::cascades::DataModel`示例来实现它是[here](https://github.com/blackberry/Cascades-Samples/tree/master/filtereddatamodel)

# wpf - Wpf PRISM 一次性模块

> ID：15251303
> 
> 赞同：0
> 
> 时间：2013-03-06T15:25:47.880
> 
> 标签：wpf, prism, design-patterns, idisposable, prism-4

我有一个分为 PRISM 模块的 WPF 应用程序。

我有一个处理一些非托管资源的服务，因此它实现了 IDisposable 接口：

```
public class MyCacheService : IMyCacheService, IDisposable
{
    ...
} 
```

我还有一个注册 IMyCacheService 实例的 CameraServicesModule：

```
public class CameraServicesModule : IModule
{
    public CameraServicesModule(IComponentsManager manager)
    {
        this.manager = manager;
    }

    public void Initialize()
    {
       ...
       var theCacheService = new MyCacheService();
       this.manager.RegisterInstance(typeof(IMyCacheService), null, theCacheService);
    }
} 
```

问题是：如何处置服务实例？我必须在应用程序关闭时执行此操作，但现在 MyCacheService.Dispose() 不会在应用程序关闭时（或任何其他时间点）被调用。

CameraServicesModule 也应该实现 IDisposable 吗？像这样：

```
public class CameraServicesModule : IModule, IDisposable
{
    public CameraServicesModule(IComponentsManager manager)
    {
        this.manager = manager;
    }

    public void Initialize()
    {
       ...
       this.theCacheService = new MyCacheService();
       this.manager.RegisterInstance(typeof(IMyCacheService), null, theCacheService);
    }

    public void Dispose()
    {
        this.theCacheService.Dispose();
    }
} 
```

如果是这样，问题是：我如何处置模块？如果不是，那么问题是：我应该以哪种方式处理服务？

```
 LocalFileSystemConfigurationManager configManager = new LocalFileSystemConfigurationManager(this.PathToSettings);
 ComponentsManager compManager = new ComponentsManager(configManager, null, null); 
```

注意：即使我的模块确实实现了 IDisposable，处置 componentsManager 或 configurationManager 也不会处置该模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:23:22.193

好的，在咨询了一些高级开发人员后，我得出一个结论，最合适的处理服务的方法是在创建服务实例的模块上实现 IDisposable：

```
public class CameraServicesModule : IModule, IDisposable
{
    public CameraServicesModule(IComponentsManager manager)
    {
        this.manager = manager;
    }

    public void Initialize()
    {
       ...
       this.theCacheService = new MyCacheService();
       this.manager.RegisterInstance(typeof(IMyCacheService), null, theCacheService);
    }

    public void Dispose()
    {
        this.theCacheService.Dispose();
    }
} 
```

尽管该模块实现了 IDisposable，但我们可以保持原样，而无需手动调用 Dispose。该模块应该存在，直到应用程序工作（至少在我的情况下），所以所有分配的资源无论如何都会在应用程序关闭时释放。

# git - 将 git 存储库克隆到 /home/public 而不是 /home/public/exampleproject？

> ID：15251310
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:26:05.193
> 
> 标签：git, ssh, console, clone, host

我已经使用 ssh 将 github 存储库克隆到我的 Web 服务器上，但是当我这样做时，它创建了一个子文件夹，而不是将文件拉到“根”文件夹。例如，当使用：

```
cd /home/public
git pull GITEXAMPLEHERE 
```

将文件放在 /home/public/GITEXAMPLE HERE 中，当我真的想将拉取的文件不是放在它自己的子文件夹中，而是放在 /home/public 中时。我环顾四周，这似乎很容易解决，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:29:21.873

试试这个：

```
git clone <repo_url> /home/public/dir_name 
```

更好的是，在要创建存储库的文件夹中进行克隆。你会`dir_name`用一个替换`.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:30:11.617

如果你只是想解决你的特定问题，你可以

```
cd /home/public/subdir
mv .git * ..
cd ..
rm -r subdir 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:31:43.357

您可以直接克隆到目录（在您的情况下为“.”）。

请参阅“git clone”的以下用法（或在控制台上键入“git clone”）：

```
git clone [options] [--] <repo> [<dir>] 
```

所以在你的情况下，这将是：

```
git clone GITEXAMPLEHERE . 
```

之后，您可以在当前文件夹中使用`git pull`和。`git push`

或者，您可以将您的文件，包括“.git”目录移动到您想要的任何其他目录（如果您克隆到错误的文件夹）。

# javascript - 在 JavaScript 中使用正则表达式时，我可以保持对 WebMatrix 的 Intellisense 的理智吗？

> ID：15251311
> 
> 赞同：1
> 
> 时间：2013-03-06T15:26:06.943
> 
> 标签：javascript, regex, webmatrix

我不确定为什么微软不允许 Intellisense 友好的环境在 WebMatrix 中使用原生正则表达式和 JavaScript，但这是我在尝试其他正常的 JavaScript 函数时看到的：

![在此处输入图像描述](../Images/0b765c77efca0ecd26f20d3193889f80.png)

如您所见，虽然这是完全有效的 JavaScript（使用本机正则表达式），但我的 .js 文件的 WebMatrix 智能感知显示的随机颜色比万花筒多。

我可能不应该抱怨，因为它有效，但如果可以的话，我想恢复人类可读性。我注意到以前在其他任何地方都没有提到过这个（我可以找到），我想知道考虑到环境是否有更美观的方式来处理这个问题。

我尝试`new RegEx(/&/g)`在替换函数的第一个参数中使用类似的东西，但是当然，它会产生相同的故障。

我也尝试将正则表达式存储在字符串中，但我认为这不是第一个参数所期望的格式，所以也没有骰子。

无论如何，我不是正则表达式的大师，所以如果我在这里忽略了一个简单的解决方法，我深表歉意。

我能做些什么来以更易于阅读的方式保留此功能吗？

- - - - - - - - - - - - - 更新 - - - - - - - - - - - - ------

我刚刚注意到该行`input = input.replace(/'/g, "&#x2C")`实际上是用逗号替换撇号。我不会重新加载图片，而是在这里提一下（撇号的正确十六进制代码应该是`&#x27`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:29:59.467

`new RegExp(/&/g)`没有真正意义，因为`/&/g`已经创建了一个`RegExp`对象。你可以`new RegExp('&', 'g')`改用。

顺便说一句，这不是 JavaScript Intellisense 存在的唯一问题。

# html - XSLT 禁用输出转义不转义字符 <

> ID：15251312
> 
> 赞同：0
> 
> 时间：2013-03-06T15:26:08.970
> 
> 标签：html, xslt, xslt-1.0

在以下样式表中：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
    <h1>Music Collection:</h1>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <tr>
        <td><xsl:value-of select="catalog/cd/title" disable-output-escaping="yes" /></td>
        <td><xsl:value-of select="catalog/cd/artist" /></td>
      </tr>
    </table> 
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

为什么它在与以下 HTML 一起使用时不转换`&lt;`为？`<`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
    <cd>
        <title>Empire Burlesque &lt; </title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia </company>
        <price>10.90</price>
        <year>1985</year>
    </cd>   
</catalog> 
```

输出可以在这里测试.. [http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=tryxsl_value-of](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=tryxsl_value-of)

## 编辑

这是另一个不起作用的示例

```
<xsl:for-each select="//productType"> 
<xsl:value-of select="." disable-output-escaping="yes" />
            <br></br>
</xsl:for-each> 
```

使用 DOE，< 被剥离。没有它我可以看到 < 字符（使用 XSLT 1.0）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:38:21.950

disable-output-encoding 是 XSLT 1 中的可选功能（在 XSLT 2 中已弃用），因此允许处理器忽略它。特别是在任何处理管道中，它几乎总是被忽略，其中来自 XSLT 的输出作为内存中的树（例如 DOM 节点）传递给随后序列化 XML 的后续应用程序。doe 本质上是对 XSLT 序列化阶段的提示，并且在这样的处理管道中不使用 XSLT 序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:38:27.517

这是与处理器相关的东西（我会说一个错误） - 在 Visual Studio 中使用 .NET XSLT 处理器，我得到`<`了预期的结果，`&lt;`如果我删除了，我得到了`disable-output-escaping="yes"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:49:37.370

禁用输出转义的效果取决于您使用的处理器以及您使用它的方式。你没有给我们足够的信息来回答这些问题。

更重要的是，你为什么要使用它？你想解决什么问题？通常，当人们使用禁用输出转义时，他们会以错误的方式处理事情 - 有更好的方法可用。在某些情况下 doe 是合适的，但这意味着您只能将样式表与支持它的处理器一起使用，在您知道样式表的结果树被直接传送到序列化程序而不是其他一些树的管道中 -消费过程。

# winapi - 使用 Windows 功能区框架托管自定义控件

> ID：15251325
> 
> 赞同：3
> 
> 时间：2013-03-06T15:26:36.857
> 
> 标签：winapi, controls, ribbon, windows-ribbon-framework

有谁知道在使用本机 Windows 功能区框架（Windows 7 引入的，例如在 MS 画图/写字板中使用，而不是 Office 功能区框架）时，是否可以在功能区栏中托管自定义控件？

我知道以下 MSDN 源中列出的可用控件，但我想知道是否也可以使用我自己的控件。

[http://msdn.microsoft.com/en-us/library/dd940497(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/dd940497(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T11:48:33.283

从我目前的经验来看，这是不可能的。在这里和微软合作伙伴论坛都没有得到答案。

标记为已解决。

# java - Android - 调用对象时崩溃

> ID：15251326
> 
> 赞同：1
> 
> 时间：2013-03-06T15:26:38.060
> 
> 标签：java, android, function, methods

我的论文现在有一个工作代码，但我决定使用函数/方法/对象（不确定如何称呼它们）来清理它，但是在组织它们之后，我的应用程序每次启动时都会崩溃。我真的不知道问题是什么。

主屏幕显示开始和退出按钮。当我按开始时，应用程序显示“不幸的是论文已停止”。

我的代码是这样的：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.items, menu);
    View v = (View) menu.findItem(R.id.search).getActionView();
    final EditText txtSearch = ( EditText ) v.findViewById(R.id.txt_search);
    txtSearch.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            String curtextArray = txtSearch.getText().toString();
            char[] curletters = curtextArray.toCharArray();
            char[] curenhancedLetters = curtextArray.toCharArray();

//probably, problem here on Stemming stem
            Stemming stem = new Stemming(curtextArray, curletters, curenhancedLetters);
            AsyncTaskRunner newTask = new AsyncTaskRunner(enhancedStem);

// and probably, problem is here on the stem.<x process>;
            stem.removeApostrophe();
            stem.vowelMarking();
            stem.shortSyllable();
            if (continueStem == 1){
                stem.region1();
                stem.region2();
                stem.shortWord();
                stem.step0();
                stem.step1a();
                stem.step1b();
                newTask.execute();
            }
            return false;
        };
    });     
    return super.onCreateOptionsMenu(menu); 
```

}

这是我的词干课程

```
public class Stemming {
    String textArray;
    char[] letters;
    char[] enhancedLetters;

    public Stemming (String curtextArray, char[] curletters, char[] curenhancedLetters){
        this.textArray = curtextArray;
        this.letters = curletters;
        this.enhancedLetters = curenhancedLetters;
    }

    public Stemming(){

    }

     public void removeApostrophe(){
       ...processes here
     }
     public void vowelMarking(){
       ...processes here
     }
     public void shortSyllable(){
       ...processes here
     }

    public void region1(){
       ...processes here
     }
     public void region2(){
       ...processes here
     }
     public void shortWord(){
       ...processes here
     }
     public void step0(){
       ...processes here
     }
     public void step1a(){
       ...processes here
     }
     public void step1b(){
       ...processes here
     }
} 
```

}

我有一个关于它为什么会崩溃的理论。这种方法可行吗？（伪代码）：

```
public class Stemming {
String result;
String sample = "A A A A A";

public void changeAtoB{

    //do process to convert all As to Bs making String sample = "B B B B B"
    result = sample;
}

   public void changeBtoC{
   //do process to convert all Bs to Cs making String result = "C C C C C"
   result = result;
}

   ... so on {
   }
} 
```

我所做的是直接处理字符串，而不做任何变量声明（我的变量是全局声明的）或初始化。而且我也没有放任何退货声明。

我的代码在它仍然没有那些功能/方法/对象的时候可以工作。

对不起我的长帖子。不知道如何更好地解释它。我希望你能帮助我。先感谢您！

日志猫：

```
>E/AndroidRuntime(11007): FATAL EXCEPTION: main
E/AndroidRuntime(11007): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.atienzaerni.thesis/com.atienzaerni.thesis.secondactivity}: java.lang.NullPointerException
E/AndroidRuntime(11007): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
E/AndroidRuntime(11007): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
E/AndroidRuntime(11007): at android.app.ActivityThread.access$600(ActivityThread.java:127)
E/AndroidRuntime(11007): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
E/AndroidRuntime(11007): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(11007): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(11007): at android.app.ActivityThread.main(ActivityThread.java:4441)
E/AndroidRuntime(11007): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(11007): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(11007): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(11007): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(11007): at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(11007): Caused by: java.lang.NullPointerException
E/AndroidRuntime(11007): at android.app.Activity.findViewById(Activity.java:1794)
E/AndroidRuntime(11007): at com.atienzaerni.thesis.secondactivity.<init>(secondactivity.java:54)
E/AndroidRuntime(11007): at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime(11007): at java.lang.Class.newInstance(Class.java:1319)
E/AndroidRuntime(11007): at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
E/AndroidRuntime(11007): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
E/AndroidRuntime(11007): ... 11 more
I/Process(11007): Sending signal. PID: 11007 SIG: 9 
```

（顺便说一句，我正在使用我的手机。不是模拟器。如果这有所作为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:47:02.813

看起来你得到了 NullPointerException 因为 v 在这一行是空的：

```
 final EditText txtSearch = ( EditText ) v.findViewById(R.id.txt_search); 
```

这可能是由此处的菜单项操作视图返回 null 引起的：

```
 View v = (View) menu.findItem(R.id.search).getActionView(); 
```

您应该在代码中设置操作视图而不是调用 getActionView，或者确保在菜单 XML 中设置了正确的操作视图。如果没有看到您的菜单 XML，就很难判断问题是否出在 XML 中。

# drupal - 为什么需要清除缓存以影响任何 hook_menu() 更改？

> ID：15251329
> 
> 赞同：0
> 
> 时间：2013-03-06T15:26:57.767
> 
> 标签：drupal, drupal-7, hook-menu

我创建了简单的模块来测试 hook_menu() 函数

```
my_menu()
{
    $item["abc"] = array(
    "title"=> t("abc")
    "page callback"=> "my_page");
    return $item;
} 
```

每当我更改项目的“标题”（例如更改为“ABC”）时，我想知道为什么需要清除缓存才能生效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:37:44.537

因为出于性能原因缓存了菜单。构建网站的菜单需要大量的处理，如果在每次浏览量上都完成，这会减慢网站的速度。

# c - Stm32 虚拟 COM 端口 - 无法连接

> ID：15251338
> 
> 赞同：4
> 
> 时间：2013-03-06T15:27:19.953
> 
> 标签：c, stm32, virtual-serial-port

这是一个代码，是我项目的一部分；

```
 //----------------------------------------------------------------------------
  // USB: Virtual COM ----------------------------------------------------------
  //----------------------------------------------------------------------------
  USB_Interrupts_Config();
  Set_USBClock();
  USB_Init();

  while (bDeviceState != CONFIGURED)
      ;

  //----------------------------------------------------------------------------
  // Main Loop -----------------------------------------------------------------
  //----------------------------------------------------------------------------
  while(1)
  {
    USB_printf("Main Function");

    GPIO_SetBits(GPIOC, GPIO_Pin_10);
    Wait(200);
    GPIO_ResetBits(GPIOC, GPIO_Pin_10);
    Wait(200);
  } 
```

将我的 USB 插入电路后，虚拟 COM 端口驱动程序安装正确完成，LED 闪烁也正常。

但是当我尝试通过超级终端或第三方工具连接 COM 端口时，我无法实现。

有意见吗？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-06T15:00:36.063

我有类似的问题，措辞略有不同 - 可以连接到设备**，直到它被重置**。我的定制板将正确枚举 VCP，但在设备重置后无法连接。事实证明，该 USB 主机保留了设备的枚举地址，而设备在重置/重新编程后会丢失其地址。为避免此类问题，软件复位还应执行 USB 物理层复位（断开 D+/D- 引脚上的上拉电阻，具体取决于使用的速度）。在这种情况下，应该可以在设备管理器中禁用然后重新启用它或重新插入后连接到设备

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-06T15:55:41.753

不一定是答案，但可能值得检查。

如果您定期从 COM 端口发送信息并且看起来您的程序确实如此（从未使用过 STM32），Windows（超术语，所以我假设是 Windows XP）可以将其检测为串行鼠标并将其枚举为鼠标，从而打开端口并防止使用它的任何其他应用程序。

我们的设备（来自 SiLabs 的 CP2103）遇到了很多问题，这也是 GPS 接收器的常见问题。

这个答案[GPS Detected as serial mouse](https://superuser.com/questions/341630/gps-detected-as-serial-mouse)很好地描述了问题和可能的解决方法。

# iphone - UIRefreshControl 无限期挂起

> ID：15251341
> 
> 赞同：2
> 
> 时间：2013-03-06T15:27:26.140
> 
> 标签：iphone, ios, asynchronous, uirefreshcontrol

我有一个 UIRefreshControl，当你使用它时它工作正常，但它挂起，它永远不会消失。我试过了

```
[self.refreshControl endRefreshing]; 
```

这个解决方案来自一个类似的[问题](https://stackoverflow.com/questions/13387378/uirefreshcontrol-uitableview-stuck-while-refreshing?rq=1)，但它没有解决我的问题。

即使这样，refreshControl 也会继续旋转，而不是关闭。为什么是这样？

在我看来DidLoad：

```
[NSThread detachNewThreadSelector:@selector(refreshFeed) toTarget:self withObject:nil];

refreshControl = [[UIRefreshControl alloc] init];

[refreshControl addTarget:self
                   action:@selector(refreshFeed)
         forControlEvents:UIControlEventValueChanged];

[self.tableView addSubview:refreshControl]; 
```

refreshFeed 方法...

```
-(void)refreshFeed
//load those feeds
{
RSSLoader* rss = [[RSSLoader alloc] init];    
[rss fetchRssWithURL:feedURL
            complete:^(NSString *title, NSArray *results) {
                dispatch_queue_t downloadQueue = dispatch_queue_create("downloader",NULL);
                dispatch_async(downloadQueue, ^{

                _objects = results;

                //completed fetching the RSS
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self.refreshControl endRefreshing];
                    [self.tableView reloadData];
                });
                });
                }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:59:02.420

你能试着改变这条线吗

```
[self.tableView addSubview:refreshControl]; 
```

和

```
[self setRefreshControl:refreshControl]; 
```

# python - python解析文件并放入for循环

> ID：15251343
> 
> 赞同：0
> 
> 时间：2013-03-06T15:27:28.477
> 
> 标签：python, linux, for-loop

我想使用 python for 循环或任何简单的方法`httpd_`从输出中解析。`chkconfig`

```
[spatel@04 ~]$ /sbin/chkconfig --list| grep httpd_
httpd_A    0:off   1:off   2:on    3:on    4:on    5:on    6:off
httpd_B      0:off   1:off   2:off   3:on    4:on    5:on    6:off
httpd_C      0:off   1:off   2:on    3:on    4:on    5:on    6:off 
```

我知道怎么做，`bash`但我想要同样的东西`python`。

```
[spatel@04 ~]$ for qw in `/sbin/chkconfig --list| grep httpd_ | awk '{print $1}'`
> do
> echo $qw
> done
httpd_A
httpd_B
httpd_C 
```

如何在python中做到这一点？我的python版本是

```
[root@04 ~]# python -V
Python 2.4.3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:31:04.343

使用分割空白行`.split()`并测试第一个元素是否以字符串开头`.startswith()`：

```
import subprocess

output = subprocess.check_output(['chkconfig', '--list'])

for line in output.splitlines():
    if line.startswith('httpd_'):
        print line.split()[0] 
```

对于较旧的 python 版本，直接使用`Popen()`调用：

```
output = subprocess.Popen(['chkconfig', '--list'], stdout=subprocess.PIPE).stdout

for line in output:
    if line.startswith('httpd_'):
        print line.split()[0] 
```

# ios - 是否正在显示 UIView？

> ID：15251344
> 
> 赞同：3
> 
> 时间：2013-03-06T15:27:32.240
> 
> 标签：ios, objective-c, uiview

我有一个 UIViewController。根 UIView 包含一个自定义 UIScrollView，我用于在网格中显示缩略图（ThumbnailGrid 类）。该网格可以包含许多显示图像的 UIView（GridTile 类）。因为有很多网格图块，用户可以向下滚动 ThumbnailGrid。我只想加载用户实际可以看到的网格图块的图像，我不想为屏幕边缘的网格图块加载图像。

如何确定这些 GridTile UIView 之一是否正在屏幕上显示？

我尝试了以下方法，但它似乎总是返回错误。

```
- (bool) isViewDisplayed:(UIView*)view
{
        CGRect viewFrame = view.frame;
        CGRect appFrame = [[UIScreen mainScreen] applicationFrame];
        if (CGRectIntersectsRect(viewFrame, appFrame)) return true;
        return false;
} 
```

我错过了什么吗？

提前感谢您的帮助！

**编辑**

**解决方案**

原来坐标系是错误的，所以我遇到了一些奇怪的情况，该方法应该返回 true，但它返回 false，反之亦然。

```
- (bool) isViewDisplated:(UIView*)view
{
    CGRect viewFrame = [parentOfView convertRect:view.frame toView:nil]; 
    CGRect appFrame = [[UIScreen mainScreen] applicationFrame];
    if (CGRectIntersectsRect(viewFrame, appFrame)) return true;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T15:40:33.877

您还需要将 rect 转换为正确的坐标系：

```
- (bool)isViewDisplayed:(UIView*)view
{
    if (view.window) {
        CGRect viewFrame = [view.window convertRect:view.frame fromView:view.superview];
        CGRect screenFrame = view.window.bounds;
        return CGRectIntersectsRect(viewFrame, screenFrame);
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:46:17.660

你可以做一个这样的比较：

```
 NSMutableArray *outArray = [NSMutableArray array];
  NSMutableArray *inArray = [NSMutableArray array];

for (UIView *vw in rootView.subViews){
  if(vw.frame.origin.x <0 || vw.framew.origin.x >rootView.frame.size.width){
     [outArray addObject:vw];
  }else if(vw.frame.origin.y <0 || vw.framew.origin.y >rootView.frame.size.height){
     [outArray addObject:vw];
  }else{
     [inArray addObject:vw];
  }
} 
```

所以最后你的 outArray 将包含所有部分/完全超出超级视图的视图，而 inArray 将包含所有完全在超级视图内的视图。如果您想使用方法（例如）检查单个视图 `-(bool)isViewDisplayed:(UIView*)vw`，则 for 循环中的相同代码就足够了，唯一的事情是您必须返回 true/false 而不是添加到数组

PS：如果您只想完全从超级视图中获取视图，那么不要将零检查与`-vw.frame.size.width`&进行比较`-vw.frame.size.height`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:43:50.860

老实说，我认为你这样做是错误的。有大量现有的框架旨在做到这一点。我不知道我是否会花时间手动推出自己的解决方案并处理所有内存和视图管理。查看这篇文章：[iOS 中的图像网格](https://stackoverflow.com/questions/6003220/grid-of-images-in-ios)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:43:30.360

我知道它不能直接回答你的问题，但仍然：你为什么不使用 a `UICollectionView`？它能够为您处理大部分重型部件。您不必关心它们在屏幕之外的那些。你只关心行为（委托）和内容（数据源）。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-03-06T15:37:45.380

使用标签很容易管理。像这样的东西

```
 UIView *view1 = [UIView]alloc]init];
view1.tag = 1;
[mainView addSubview:view1 
```

];

并检查

```
UIView *temp = [mainView.view viewWithTag:1];
if(temp!=nil)return YES;
else NO; 
```

看看这是否有帮助

# java - Google AppEngine 上的不同环境配置

> ID：15251346
> 
> 赞同：4
> 
> 时间：2013-03-06T15:27:36.767
> 
> 标签：java, google-app-engine

我有一个在 Google AppEngine 上运行的网络应用程序。

我有一个 PRODUCTION 环境、一个 STAGING 环境和多个开发和 QA 环境。在 PRODUCTION 和其他环境之间有许多配置参数应该不同 - 例如我们集成的服务的 API 密钥（例如 GoogleAnalytics）。其中一些参数在代码中定义，其他在 web.xml 中定义（例如，在过滤器的 init-param 标记内），以及其他情况。

我知道有几种方法可以做到这一点：

1.  将所有参数保存在数据存储中（并可能将它们缓存在每个运行实例/Memcached 中）

2.  在 web.xml 中部署具有不同系统属性/环境变量的应用程序

3.  其他选择...？

无论如何，我很想听听您解决这个问题的最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:51:18.503

我最喜欢的方法是将它们全部存储在数据存储中，其中只有一个具有所有不同属性的主记录，并充分利用内存缓存。通过这样做，您不需要拥有不同的配置文件或使用不同的配置设置污染您的代码。相反，您可以从必须创建的管理表单部署和更改此值，以便更新此主记录。

此外，如果您要存储令牌和密钥，那么您会意识到将它们放在`web.xml`代码中或其他任何地方绝对不是一个好主意，而是将每个应用程序放在更安全的东西上，比如数据存储。

一旦你有了它，你就可以拥有一个全局函数，它会按名称检索属性，如果你想从应用程序中的任何地方获取 Google Analytics ID，你应该通过以下方式使用它：

```
getProperty('googleAnalyticsID') 
```

此全局`getProperty()`函数将尝试通过以下步骤找到此值：

*   检查它是否存在于 memcache 中并返回
*   如果不在 memcache 中，则从数据存储中的主实体更新 memcache 并返回
*   如果不在数据存储区中创建一个具有默认值的实体，则更新 memcache 并返回

当然，关于如何从该模型中检索数据有不同的方法，但想法是相同的：存储在一条记录中并使用内存缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:53:34.453

您的生产/登台/质量保证环境必须有单独的应用程序 ID。这必须硬编码到您的 web.xml 中（或者您有某种脚本可以更新您的 web.xml）

之后，您可以根据 appid 在设置中进行编码。我假设有一个等效于这个的java： [https ://developers.google.com/appengine/docs/python/appidentity/functions#get_application_id](https://developers.google.com/appengine/docs/python/appidentity/functions#get_application_id)

如果它们是动态更改的设置，则可以将其放入数据存储中，但如果它们对环境是静态的，则继续从数据存储中获取是没有意义的。

# c# - UI 未绑定到 INotifyCollectionChanged

> ID：15251347
> 
> 赞同：0
> 
> 时间：2013-03-06T15:27:38.397
> 
> 标签：c#, windows-store-apps, winrt-xaml, inotifycollectionchanged

我有一些实现 INotifyCollectionChanged 的​​集合。

```
public sealed class GroupCollection : INotifyCollectionChanged, IList<Group>
{
    //...
    public event NotifyCollectionChangedEventHandler CollectionChanged;

    private void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        if (CollectionChanged != null)
        {
            CollectionChanged(this, e);
        }
    }
    //...
} 
```

它用于 xaml

```
 <CollectionViewSource x:Name="groupedItemsViewSource" Source="{Binding Groups}"/> 
```

然后在 xaml.cs

```
 this.DefaultViewModel["Groups"] = groups.GroupCollection; 
```

收藏品显示得很好。但是 UI 在被触发时不订阅`CollectionChanged`也不更新自身。`CollectionChanged`也许我需要实现更多的接口来让 UI 控件订阅事件？

PS 我不能使用 ObservableCollection 因为编译器说这“不是 Windows 运行时接口”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:49:57.097

使用默认 Grid 应用程序模板时，以下使用`ObservableCollection`对我来说很好：

```
using System.Collections.ObjectModel;
...
class MyOC : ObservableCollection<SampleDataGroup> { };
...
var oc = new MyOC();
string id = "title1";
oc.Add(new SampleDataGroup(id, id, id, "", id));
id = "title2";
oc.Add(new SampleDataGroup(id, id, id, "", id));
this.DefaultViewModel["Groups"] = oc; 
```

我猜你可以在你的项目中做类似的事情：

```
using System.Collections.ObjectModel;
...
public sealed class GroupCollection : ObservableCollection<Group>
{
... 
```

# android - Android - 我应该通过 saveinstancestate 保存我的对象还是仅保存它的 ID

> ID：15251349
> 
> 赞同：1
> 
> 时间：2013-03-06T15:27:41.357
> 
> 标签：android, android-configchanges

我是 Android 开发的新手，并且编写了一个小应用程序，它调用 Web 服务并为一个相对简单的对象提供水合（想想：拍卖列表或类似的东西）。现在，当手机旋转并重新加载视图时，Web 服务被重新调用，对象被重新水化并重新显示列表。这似乎非常浪费。通过 onSaveInstanceState 存储数据时的最佳做法是什么？存储对象本身是否被认为是可以的，或者最好的做法是存储 ID 并完成每次重新加载它的整个过程。这里是否还有其他需要考虑的经验法则或陷阱？

谢谢

J.P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:42:36.163

对于 Android 配置更改场景，即使从数据库中重新创建信息通常也被认为是过多的工作。

您要使用的是创建一个类，该类包含对您希望在配置更改中幸存下来的对象的引用，并让您的 Activity 对此具有引用。此外，您将在`onRetainNonConfigurationInstance()`回调中返回它。在`onCreate()`中，您调用`getLastNonConfigurationInstance()`以查看这是否是由于配置更改而重新创建的。此调用将返回您的对象以及您需要的所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:32:18.230

由于您正在调用网络服务来填充您的列表，我想您应该存储列表的数据（调用网络服务会消耗时间并且如果您的用户没有稳定的连接可能会失败）。您可以通过不同的方式（例如数据库）执行此操作。如果用户重新启动您的应用程序，这种方法也会对您有所帮助，因为他不必等到 Web 服务响应。

另外：当您提出问题时，请重新考虑您的术语。您通常不会看到有人谈论物体的“水合作用”。谈论人口等更为常见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:42:03.310

尽可能多地缓存数据，每个数据连接在时间、资源和最终电池寿命方面都有“标准”成本。

尝试将您的请求分组并将它们全部放在一起，并尽可能长时间地缓存响应。

[很好地阅读有关 android 开发人员的网络](http://developer.android.com/training/efficient-downloads/efficient-network-access.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:42:24.907

如果您只想避免在方向更改时召回服务，那么您可以在活动标签中的清单中添加以下内容。

android:configChanges="导航|方向|keyboardHidden"

但正如@DigCamara 所说，他的方法是最好的，甚至对于重启等其他场景也很有用。

# ms-access - 访问数据库引擎无法锁定表 - 为表单上保存的字段制作表脚本

> ID：15251359
> 
> 赞同：1
> 
> 时间：2013-03-06T15:27:56.917
> 
> 标签：ms-access, ms-access-2010

我在尝试从表单上的按钮运行一些 vba 脚本时遇到了一些麻烦。

通过链接的 MDB 文件，我编写了一系列 Make Table 查询，以帮助某些其他查询工作。我没有让用户一个接一个地重新运行每个单独的 Make Table 查询，而是将查询放在 VBA 脚本中（使用**DoCmd.RunSQL**），然后将该脚本分配给表单上的按钮。

我正在使用的数据源还有一个文件信息表，其中包含数据的文件名和文件日期。

当用户单击按钮时，我希望他们知道运行 Make Tables 查询字符串时使用的数据源；这样他们就知道脚本在哪些数据上运行。

我的方法是使用 File Info 表创建最终的 Make Table 查询，将文件名和文件日期放在它自己的表中。

然后我会将这些字段添加到表单中，并将**DoCmd.RunSQL**用于这个最终的 Make Table 查询添加到按钮的 VBA 脚本的底部；一旦所有的 Make Tables 都运行了，文件信息和文件日期字段将在表单上显示/更新，告诉用户上次运行脚本时使用了哪些数据文件。

这是此代码（为简洁起见，我将在 FileInfo 之前运行的所有 Make Table 脚本总结为一些虚假的“AllOtherMakeTables”字符串）

```
Private Sub Command0_Click()

On Error GoTo Err_Command0_Click

DoCmd.SetWarnings False

Dim AllOtherMakeTables As String
Dim FileInfoStamp As String

AllOtherMakeTables = " SELECT SomeField INTO AnotherTable" _
& " FROM SomeTable" _

FileInfoStamp = " SELECT FileInfo.FileName, FileInfo.FileDate INTO FileInfoStamp" _
& " FROM FileInfo;" _

DoCmd.RunSQL AllOtherMakeTables
DoCmd.RunSQL FileInfoStamp

DoCmd.SetWarnings True

Exit_Command0_Click:
Exit Sub

Err_Command0_Click:
    MsgBox Err.Description
    Resume Exit_Command0_Click

End Sub 
```

使用上面的脚本单击按钮会产生以下错误消息：

> 数据库引擎无法锁定表“FileInfoStamp”，因为它已被其他人或进程使用

我认为正在发生的事情是我添加到表单中的字段（文件名和文件日期）在表单打开时锁定了 FileInfoStamp 表，因此当脚本尝试重新创建 FileInfoStamp 时，由于表被锁定，因此无法执行此操作。

我认为这可以通过在上述脚本的开头添加一个**DoCmd.Close然后在脚本末尾添加一个****DoCmd.OpenForm**来解决（本质上是在运行 Make Table 命令然后重新打开时关闭表单最后的表格）。

所有这一切都是关闭表单并显示相同的错误消息。所以我猜即使表单“关闭”了与表单上字段的连接仍然以某种方式保持活动状态（...？）

任何有关我如何解决此问题的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:53:52.970

不要`FileInfoStamp`每次都重新创建。请改用以下两个步骤：

1.  丢弃现有行
2.  追加新数据

```
Dim db As DAO.database
Dim FileInfoStamp As String

FileInfoStamp = "INSERT INTO FileInfoStamp(FileName, FileDate)" & vbCrLf & _
    "SELECT fi.FileName, fi.FileDate FROM FileInfo AS fi;"
Debug.Print FileInfoStamp

Set db = CurrentDb
' empty out FileInfoStamp
db.Execute "DELETE FROM FileInfoStamp;", dbFailOnError
' add new data to FileInfoStamp
db.Execute FileInfoStamp, dbFailOnError
Set db = Nothing 
```

添加一个错误处理程序来处理从`dbFailOnError`.

代替`DoCmd.RunSQL`，对您的其他查询使用 DAO 数据库`.Execute`方法。使用这种方法，您将没有任何使用`DoCmd.SetWarnings False`. 关闭是不明智`SetWarnings`的，因为它会抑制诊断问题所需的信息。

# java - 设置Heroku模板java应用的开发环境

> ID：15251361
> 
> 赞同：0
> 
> 时间：2013-03-06T15:28:06.830
> 
> 标签：java, plugins, heroku, eclipse-plugin, local

我已经安装了 Heroku java 插件并尝试设置示例应用程序，即“Web & Asynchronous worker with Spring, CloudAMQP”。该项目遵循 maven，应用程序通过 maven 部署在 heroku 上。

是否可以使用在相同和/或不同 JVM 中运行的本地 java 容器、rabbitmq 和 worker 运行相同的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:50:25.187

是的，Foreman 将启动任何具有 Procfile 的项目。如果定义了多个进程，它将全部启动。

[https://devcenter.heroku.com/articles/procfile#developing-locally-with-foreman](https://devcenter.heroku.com/articles/procfile#developing-locally-with-foreman)

您必须首先使用 Maven 在本地构建项目。您可以将 rabbitmq 实例的配置信息设置为环境变量，也可以将它们保存在工头将拾取的 .env 文件中。您可以使用“heroku config”查看您的 Heroku 应用程序，以查看应用程序所期望的变量。

# file-upload - 覆盖文件上传控件的上传函数

> ID：15251366
> 
> 赞同：0
> 
> 时间：2013-03-06T15:28:19.750
> 
> 标签：file-upload, xpages

我想覆盖文件上传控件的上传功能，以添加我需要的功能。我正在尝试将以下链接中的代码改编为我的案例

[删除文件下载控件中的附件后自动保存文档？](https://stackoverflow.com/questions/13101615/auto-save-doc-after-delete-of-attachment-in-file-download-control)

通过将第二个参数的类型更改为*com.ibm.xsp.component.xp.XSPFileUpload*，即：

```
function rekOverrideFileDownloadAction( component:javax.faces.component.UIOutput,  fDownload:com.ibm.xsp.component.xp.XSPFileUpload ){ 
```

以及 MethodBinding mBinding 中的代码，并使用我的文件上传控件的名称，即：

```
 var mBinding = facesContext.getApplication().createMethodBinding("#{javascript:print('Uploaded');}", null );
overrideFileDownloadAction( getComponent( 'fileUpload1' ) ); 
```

不幸的是，发生了 javax.faces.FacesException。

谁能帮我修改此代码，以便在用户上传文件时仅打印此消息？

堆栈跟踪：

```
javax.faces.FacesException
javax.faces.FacesException.<init>(FacesException.java:97)
com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:86)
com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:96)
com.ibm.xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250)
com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:209)
com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:204)
com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653)
com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:476)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)

java.lang.NullPointerException
com.ibm.xsp.actions.ActionGroup.invoke(ActionGroup.java:135)
com.ibm.xsp.actions.ActionGroup.invoke(ActionGroup.java:135)
com.ibm.xsp.application.ActionListenerImpl.processAction(ActionListenerImpl.java:60)
javax.faces.component.UICommand.broadcast(UICommand.java:324)
com.ibm.xsp.component.UIEventHandler.broadcast(UIEventHandler.java:366)
com.ibm.xsp.component.UIViewRootEx.broadcast(UIViewRootEx.java:1535)
javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:307)
javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:428)
com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:94)
com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:96)
com.ibm.xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250)
com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:209)
com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:204)
com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653)
com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:476)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272) 
```

我还注意到，如果我将脚本添加到事件中，例如 onChange，以便创建事件处理程序，则不会发生异常。所以我认为抛出异常是因为没有事件处理程序并导致空指针。现在我已经将我需要的功能添加到 onChange 事件中，这没问题，但如果有人能告诉我是否有办法覆盖它，那就太好了。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:55:53.887

你想做什么？我认为片段不可能（它覆盖下载链接的事件处理程序，该处理程序仅可用于上传控件）。

也许这个片段可以帮助你：[http ://openntf.org/XSnippets.nsf/snippet.xsp?id=replace-attachment-when-uploading-a-new-attachment](http://openntf.org/XSnippets.nsf/snippet.xsp?id=replace-attachment-when-uploading-a-new-attachment)

# macos - 什么是文件的所有者（在界面生成器中）？

> ID：15251370
> 
> 赞同：45
> 
> 时间：2013-03-06T15:28:37.447
> 
> 标签：macos, cocoa, interface-builder, nib

我是 Cocoa 的新手，我不了解`File's Owner`.nib 文件的概念。

这是我看待事物的方式：

*   考虑一个`myNibFile.nib`描述窗口外观的文件。

*   现在，我想将一个实际的窗口连接到这个 .nib 文件。所以，我创建了一个类`myWindow`，它是`NSWindowController`. 而且，为了进行这种连接，我改变了`init`这样的方法：

    ```
     -(id)init
         {
             [super initWithWindowNibName:@"myNibFile"];
             return self;
         } 
    ```

所以，我知道当我创建一个实例时`myWindow`，“系统”会去查看 .nib 文件并创建足够的对象。

所以，我的问题是：

*   为什么我必须指定`File's Owner`我的 .nib 文件是`myWindow`？这不是多余的吗？

*   我想这意味着我并没有真正理解`File's Owner`. 它是什么 ？为什么 .nib 文件必须属于某个东西？难道它不能在我的“应用程序”中的“某处”，当需要它时，“系统”会去那里使用它吗？

感谢您帮助我更清楚地了解这些新概念！

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-07T07:17:05.570

需要记住两点：

*   文件所有者是加载 nib 的对象，即接收消息的对象`loadNibNamed:`或`initWithNibName:`.
*   如果你想在加载后访问 nib 中的任何对象，你可以在文件所有者中设置一个 outlet。

因此，您创建了一个带有许多按钮、子视图等的精美视图。如果您想在从加载对象（通常是视图或窗口控制器）加载 nib 后随时修改这些视图/对象中的任何一个，您可以将这些对象的出口设置为文件所有者。就是这么简单。

这就是为什么默认情况下所有视图控制器或窗口控制器都充当文件所有者的原因，并且在 nib 文件中也有到主窗口或视图对象的出口：因为呃，如果你正在控制某些东西，你肯定需要有一个出口，以便您可以向它发送消息。

The reason it's called file owner and given a special place, is because unlike the other objects in the nib, the file owner is external to the nib and is not part of it. In fact, it only becomes available when the nib is loaded. So the file owner is a stand-in or proxy for the actual object which will later load the nib.

希望你已经明白了。如果你问，我会澄清任何一点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-06T19:28:49.363

要理解的基本内容是，Interface Builder 允许您创建自动相互连接的对象，而无需您的程序。您可以实例化各种对象，包括非视图对象，并且它们可以相互关联；例如，您可以创建表视图数据源的实例以及视图本身等。这种机制通常用于在主菜单 NIB 中创建应用程序委托。

但是，由于这一切都是通过拖放完成的，因此您似乎无法在任何 NIB 对象和应用程序中已存在的对象之间建立连接，但有一个例外。

当代码加载 NIB 文件时，您可以选择精确指定*一个*对象，NIB 将其视为“文件所有者”。这是您在 Interface Builder 中看到的占位符；因为它可以代表应用程序中的任何对象，所以 Interface Builder 无法知道它上面有哪些可用的操作/出口。这就是您可以在“属性”选项卡中修改文件所有者的“类”的原因。

文件所有者并不真正代表“所有权”或“父母身份”。它代表的是“加载这个NIB的对象”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:39:24.163

File's Owner 是 IB 中的占位符，因此代码中的所有出口和操作在 IB 中都是“可链接的”，您可以控制拖动以将屏幕上的内容连接到代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:47:44.213

Interface Builder 中的 File's Owner 使其知道父对象的对象类型。这以两种方式使用。首先，在 Interface Builder 中，IB 知道哪些出口和操作可供您连接。其次，应用程序框架使用它来了解如何在加载 nib 文件后将事物重新连接到其余代码。

# .net - 使用 .NET 4.0x 进行 TCP 编程

> ID：15251378
> 
> 赞同：0
> 
> 时间：2013-03-06T15:29:15.797
> 
> 标签：.net, sockets, tcp, network-programming

我需要与了解自定义 TCP 命令的三星收银机 SPS 500 交谈。

我以前从未这样做过，我想知道从哪里开始使用 .NET 4.x，是否有SocketWrench 7.2 之类的**3rd 方工具**（需要花钱），还是使用**内置的 .NET API**更好。

基本上，我必须构建一个包含多个位和字节（标头、apyload 和 CRC）的命令，将其发送到寄存器（具有 IP 地址）并期望返回一些东西（ACK 或消息或其他）。

我再次得到的东西必须被阅读和评估。

**问题： 1\. 使用给我的规范，我将如何开始使用 .NET 4？2\. 我怎样才能最好地调试在线上发送的内容？线鲨？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:33:51.143

> 问题： 1\. 使用给我的规范，我将如何开始使用 .NET 4？2\. 我怎样才能最好地调试在线上发送的内容？线鲨？

我首先希望供应商（在这种情况下是三星）提供一个模拟（例如调试控制台），它可以响应有效和无效的命令，而无需使用 TCP 连接到它。然后您可以测试您的命令并对其进行调试，而不必怀疑您的套接字编程能力。

现在，当“干”的功能正常时，您将其连接到 TCP 的，因为套接字实际上只是发送您提供给它的字节。所以这不是关于套接字，而是关于命令构建和解释。

但是您确实可以查看（例如）[`TcpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)和[Wireshark](http://www.wireshark.org/download.html)。

# asp.net - 带有 onfocus/__doPostBack 的 Asp.Net 用户键盘选项卡

> ID：15251386
> 
> 赞同：0
> 
> 时间：2013-03-06T15:29:30.133
> 
> 标签：asp.net, web-applications

我有一个带有 __doPostBack 的 onfocus 事件，页面上有几十个左右的文本框。如果用户选项卡（tabkey）真的很快到达特定的文本框，它就会滞后，因为它试图填充每个 onfocus。有没有办法捕捉控件聚焦之间的延迟？

# javascript - HTML 和 CSS：根据行数向屏幕添加更多表格？

> ID：15251388
> 
> 赞同：0
> 
> 时间：2013-03-06T15:28:34.580
> 
> 标签：javascript, html, css, dojo

我正在为一个朋友开发一个网站，这个网站会有一个数据表，但是出于他自己的原因，他不想向下滚动查看数据，他希望数据水平展开以便他可以使用多个屏幕查看所有数据。

我想出的最好的想法是创建一个水平表，这基本上意味着我不是向下滚动以查看更多数据，而是在最后一个表的右侧创建一个新表来保存额外的行。

因此，假设每个表不应超过 20 行，如果有更多行，则我们创建一个新表，放置在包含前 20 行的表的右侧，依此类推。

从 HTML 和 CSS 布局的角度来看，最好的方法是什么？我将使用 dojo 增强网格创建表格，并且将动态添加网格，这部分我不需要任何代码。

所以也许我有一个空的 div 元素并将网格附加到该 div 并让它们正确对齐？

我并不是说这是最好的方法，所以如果有人有更好的方法来满足要求，我很乐意听到并从中学习。

编辑：

只是为了澄清我不需要 JavaScript 代码或任何其他代码来动态添加网格。

我只想知道 HTML 和 CSS 结构应该是什么。

例如，我有一个固定高度的容器 Div，我向其中添加元素，元素应该具有 x 和 y CSS 属性等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:42:59.103

```
$("#tables").append(
    $("<table style='float:left;border: 1px solid black'>").append(
        $("<tr>").append(
            $("<td>").html(
                "content"
            )
        )
    )
); 
```

[http://jsfiddle.net/7PpRB/1/](http://jsfiddle.net/7PpRB/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T15:45:57.660

您可以使用 div 并在需要新信息时添加新 div，我不建议使用表格，因为每次在另一个旁边添加新表格时，就像有不同的信息上下文。

--css

```
.holder{
  width:200px;
  float:left;
  background:#333;
  color:#FFF;  
  font-family:Arial; 
}

.holder.zebra{
  background:#222;
}

.holder div.row{
  padding:10px;  
}

.break{
  clear:both;
  height:40px;
  width:100%;
  display:block; 
}

table{
  margin-top:10px;

  background:#333;
  float:left;
  color:#FFF;
  font-family:Arial;
}

table td, table th{
  padding:5px;
  text-align:left;
} 
```

-- 表解决方案

```
<table>
  <tr>
    <th>title 1</th>
    <th>title 2</th>
  </tr>
  <tr>
    <td>content 1</td>
    <td>content 2</td>
  </tr>
</table>
<table>
  <tr>
    <th>title 1</th>
    <th>title 2</th>
  </tr>
  <tr>
    <td>content 1</td>
    <td>content 2</td>
  </tr>
</table> 
```

-- 分区解决方案

```
<!-- could be the table 1 -->
<div class="holder">
  <div class="row">content 1</div>
  <div class="row">content 2</div>
  <div class="row">content 3</div>
</div>
<!-- could be the table 2 -->
<div class="holder zebra">
  <div class="row">content 1</div>
  <div class="row">content 2</div>
  <div class="row">content 3</div>
</div>
<!-- could be the table 3 -->
<div class="holder">
  <div class="row">content 1</div>
  <div class="row">content 2</div>
  <div class="row">content 3</div>
</div> 
```

这是您可以查看结果的代码笔[http://cdpn.io/sAoxB](http://cdpn.io/sAoxB)

编辑：

我不是说这是一个好习惯我只是回答这个问题，请不要无缘无故地投反对票。谢谢

![结果](../Images/b6acda37287a2f723c90d39618b6ef38.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T15:44:27.740

您可能应该为此使用 PHP。如果你不熟悉它，你可以保持简单。

```
echo '<table>';

for($i = 0; $i < total_elements; $i++){
    echo '<tr><td>'./*Whatever you want to insert.*/.'</td></tr>';

    if($i % 20 = 0)
        echo '</table><table>'
}

echo '</table>'; 
```

插入样式由您决定。

# vba - 关于从输入文件中解析数据的最传统方法的建议

> ID：15251390
> 
> 赞同：0
> 
> 时间：2013-03-06T15:29:36.233
> 
> 标签：vba, excel

我是我公司人员的 Excel 宏的新手作家。我可以通过几种不同的方式来解决手头的问题，但想要一些关于最有效和最传统的方式的建议。

宏需要从输入文件中检索数据，并将此数据与第二个输入文件中的其他数据进行比较。这些文件的结构是一致的，但它们包含的数据明显不同。每个文件最多可包含 96 个样本的信息。每个样本有大约 20 个类别的信息，每个类别可能有 10 条数据。因此，每个样本最多可以关联 200 条数据。

在我看来，存储此信息的最佳方法是创建一个类来定义一个对象，然后拥有这些对象的集合，例如：

```
Dim Samples as Collection
Dim Smp as CSample

Set Samples = New Collection

For x = 1 to NumberOfSamplesInFile
   Set Smp = New CSample
   'Set the properties of Smp for each piece of data
   Samples.Add Smp
Next x 
```

我假设我可以将 Smp 的某些属性设置为数组？即可以将类的属性定义为：

```
Private pSampleID as String
Private pAreaUnderCurve(1 to 10) as double
Private pRetentionTime(1 to 10) as double 
```

这样

```
Smp.SampleID = "XYZ" 
```

但

```
Smp.AreaUnderCurve(1) = 1234
Smp.AreaUnderCurve(2) = 2345
Smp.AreaUnderCurve(3) = 123.78 
```

保留时间相同（显然不同的值）？

我想象的另一种方法是使用类型声明：

```
Type Sample
   SampleID as String
   AreaUnderCurve(1 to 10) as double
   RetentionTime(1 to 10) as double
End Type 
```

我的问题是哪种方式最传统/推荐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:40:12.377

您还可以将这两个文件导入 2 个工作表中的 excel 中，然后通过循环或输入公式对它们进行比较以匹配记录并突出显示不匹配的数据...

数据文件的格式是否适合导入 Excel？

# ruby - Ruby callback function to continue execution of another function

> ID：15251391
> 
> 赞同：0
> 
> 时间：2013-03-06T15:29:37.980
> 
> 标签：ruby, lambda, callback, pubnub

I'm using Pubnub to publish live messages from a Server to a client (browser page). When using Pubnub, one must abide by their message size constraints, sometimes resulting in the need to chunk the message, send it in pieces, and reconstruct on the client side. Following Pubnub's advice, one can ensure delivery of each chunk of a message if the `Pubnub.publish()` function is not called too quickly (i.e. if the message pieces are simply being pumped through a for loop).

The Pubnub Ruby API specifies 3 required arguments in a `Pubnub.publish()`, a channel, a message, and a callback function. The callback function shown below is from Pubnub's Ruby examples:

```
 @my_callback = lambda { |message| puts(message) }
    pn.publish(:channel => :hello_world,
      :message => "hi",
      :callback => @my_callback) 
```

The *message* in the callback (not the "hi" message in the publish), contains the status information of the `publish()` call with values like "sent" and "message to large", both of which would be accompanied by a unique identifier.

So somewhere under the Pubnub hood, this callback is getting a `.call()` - I'm wondering if there is a way for me to get inbetween this process. More detailed, say I have a message that needs to be broken up into three chunks, I would like for chunk 0 to be sent, and upon receipt of a "sent" status in the callback, I would like to then send chunk 1, etc...

I'm not very familiar with lambda functions and their scopes, and this was my first attempt:

```
 @my_callback = lambda { |message| 
                            puts(message) 
                            Rails.logger.debug("Setting pubnub_do_send to true from callback")
                            pubnub_do_send = true
                          }

    pubnub_do_send = true

    while !pubnub_message.nil?
      if pubnub_do_send 

        #Send pubnub message
        #Cut off first chunk of message (this is why I'm testing for nil)
        #Set pubnub_do_send to false

        Rails.logger.debug("Message #{message_id} chunk #{chunk_id} sent")
        pubnub_do_send = false
      end
    end 
```

This resulted in an utter failure - getting the server completely locked into an infinite while loop because (if I had to guess) pubnub_do_send was never set to true again. Looking at the debug log, I see the first message print ("Message 1 chunk 0 sent") but never the output from the callback function. (Probably because of the infinite while loop it's found itself in)

There must be a clean way to do this, and I'm ok with refactoring code to some extent, chunking up the messages and storing into an array first and then simply looping through the array to send, but I feel like the solution can't be far off, I'm just not too handy with lambda functions and callbacks.

I feel like the solution should look like:

```
 @my_callback = lambda { |message| 
                            puts(message) 
                            send_pubnub_message(message_id, chunk_id, chunk)
                          }

    def send_pubnub_message(message_id, chunk_id, chunk)
      #Send pubnub message
      #Send message_id, next chunk_id, and next chunk to my_callback
    end 
```

But the problem is `my_callback` is called by Pubnub when the `Pubnub.publish()` gets some status back about the message rather than me directly calling it! (Is there a way for me to insert message_id, chunk_id, and chunk into the callback *while* still letting pubnub attach its message to the mix? That sounds way wrong, but maybe with Ruby...)

Thanks in advance for all help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:30:40.563

You shouldn't be trying to handle message chunk state in your callback. It has only a single responsibility, notifying about the status of the publish. However, you can insert things into the message. I might create a message wrapper that knows it's current state, and send that in the lambda, so you don't have to keep track of it. I haven't tested the following code, but here's an example of what I'm talking about:

```
class Message
  attr_accessor :id, :message, :chunked_message, :chunk_id
  def initialize(id, message)
    @id, @message = id, message
    chunk_message
  end
  def current_chunk
    @chunked_message[@chunk_id]
  end
  def next_chunk
    @chunk_id += 1
    self
  end
  def more?
    @chunked_message.length > chunk_id
  end
  private
  def chunk_message 
    implement splitting message here
  end
end 

def send_pubnub_message(message)
  pn.publish(:channel => :hello_world,
  :message => message.current_chunk
  :callback => lambda { |status| 
                        puts(status)
                        case status[0] // 1 = success, 0 = fail
                        when 1
                          send_pubnub_message(message.next_chunk) if message.more?
                        when 0
                          handle_pubnub_error(status[1], message)
                        end
                      }
end 
```

# php - 如何将多个图像上传到服务器到 Django 应用程序中？

> ID：15251398
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:29:54.050
> 
> 标签：php, javascript, django, angularjs, tastypie

我目前正在开发一个使用 AngularJS 作为前端部分的 Django 应用程序。我现在想在服务器上上传一些图像，并获取一个包含上传文件路径的列表作为回调。之后我想将回调作为 POST 请求发送到 API（我正在使用 Tastypie 框架），并将其插入到数据库中的特定字段中。我的问题是我不知道如何处理图片上传（我应该使用 PHP？）部分，最重要的是如何接收回调？我希望我解释得足够清楚。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:48:36.210

在 django 中上传文件的文档：[https ://docs.djangoproject.com/en/dev/topics/http/file-uploads/](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)

HTML 只允许每个上传控制器上传一个文件。要上传多个文件，用户可以创建一个 zip 文件（或类似文件），上传该文件，然后在服务器端将其提取到多个文件中。或者您必须使用 Flash 组件。有很多可用的，例如[http://developer.yahoo.com/yui/uploader/](http://developer.yahoo.com/yui/uploader/)

# css - 字体在 Windows 中看起来失真

> ID：15251399
> 
> 赞同：0
> 
> 时间：2013-03-06T15:29:56.263
> 
> 标签：css, html, twitter-bootstrap, font-face

我正在 ubuntu 中做一个网站，并完成了 UI 部分。在 ubuntu 中一切都很顺利，但是当我打开 Windows 时，所有的字体都被扭曲了。我尝试了以下代码

```
@font-face {
    font-family: 'garrisonsb';
    src: url('../fonts/garrisons-bold.eot');
    src: url('../fonts/garrisons-bold.eot?#iefix') format('embedded-opentype'),
         url('../fonts/garrisons-bold.woff') format('woff'),
         url('../fonts/garrisons-bold.ttf') format('truetype'),
         url('../fonts/garrisons-bold.svg#garrison_sansbold') format('svg');
    font-weight: bold;
    font-style: normal;

}

@font-face {
    font-family: 'garrisons';
    src: url('../fonts/garrisons-regular.eot');
    src: url('../fonts/garrisons-regular.eot?#iefix') format('embedded-opentype'),
         url('../fonts/garrisons-regular.woff') format('woff'),
         url('../fonts/garrisons-regular.ttf') format('truetype'),
         url('../fonts/garrisons-regular.svg#garrison_sansregular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'rupee';
    src: url('../fonts/Rupee.eot');
    src: url('../fonts/Rupee.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Rupee.woff') format('woff'),
         url('../fonts/Rupee.ttf') format('truetype'),
         url('../fonts/Rupee.svg#rupeeregular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

指定的代码是使用 squirrel-generator 生成的。我尝试将 font-smooth 属性设置为“always”，并将 -webkit-font-smoothing 设置为 antialiased，并且 font-weight 也被指定为常规的 700 和粗体的 900 而不是“正常”，但没有任何效果。

请提出最佳解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:46:23.810

Web 字体在所有浏览器中都不是流畅的。您可能必须使用`-webkit-font-smoothing: antialiased`web-kit 浏览器。

您最好使用`text-shadow: 0px 0px 1px #GOOD-COLOR-HERE`或`text-shadow: 0px 0px 1px rgba(COLOR-SETTINGS-HERE)`调整颜色设置和阴影以获得最佳效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:56:45.990

当说问题存在于所有浏览器中时，它会弹出问题，是您的字体有问题还是其他原因？您可以尝试在 Windows 中使用另一种自定义字体来查看结果吗？

尽管@Madhu Rox 提供的解决方案非常先进。

# django-models - Django过滤器与模型中的获取

> ID：15251401
> 
> 赞同：13
> 
> 时间：2013-03-06T15:29:57.977
> 
> 标签：django-models

我是 Django 的新手，想了解 filter 与 get 之间的区别

得到

```
Entry.objects.get(id__exact=14) 
```

筛选

```
Entry.objects.filter(id__exact=14) 
```

上面的陈述有什么不同？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-08-12T20:02:20.610

唯一会带来与`get`您正在寻找的元素相同的元素，但会`filter`带来与您想要的该项目相关的所有内容。

过滤器返回找到的许多东西。get 只返回你正在寻找的东西

例如：

得到

```
Task.objects.get(id=1,status=1) 
```

筛选

```
Groups.objects.filter(user=1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-10T06:54:49.200

如果您知道这是一个与您的查询匹配的对象，请使用`get`. 如果它不止一个，它将失败，并给出如下错误：

```
Traceback (most recent call last):

    File "<console>", line 1, in <module>
    File "/usr/local/lib/python2.7/dist-packages/django/db/models/manager.py", line 143, in         get
    return self.get_query_set().get(*args, **kwargs)
    File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py", line 407, in get
    (self.model._meta.object_name, num))
    MultipleObjectsReturned: get() returned more than one Poll -- it returned 2! 
```

否则使用`filter`，它会为您提供对象列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-16T14:33:59.147

基本上`get`在您想要获取单个唯一对象时使用，并在您想要获取与查找参数匹配的所有对象时进行过滤

```
 __data = User.objects.get(is_active=1).exclude(id=id) 
```

> 错误：get() 返回多个用户 - 它返回 19！，类型：`<class 'django.contrib.auth.models.MultipleObjectsReturned'>`

- - - 成功的 - - - -

```
__data = User.objects.filter(is_active=1).exclude(id=id) 
```

- - - -成功的 - - -

[检查链接](https://docs.djangoproject.com/en/1.6/ref/models/querysets/#django.db.models.query.QuerySet.filter)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-07T06:40:24.957

为了补充其他人所说的......（get 只返回 1 条记录，而 filter 返回一组），需要注意的重要一点是结果的*类型*。

get() 返回一个对象，而 filter 返回一个查询集类型。这意味着你可以做类似的事情

```
age = User.objects.get(name="Ryan").age 
```

而如果您使用的是过滤器，则需要执行几个额外的步骤：

```
ages = User.Objects.filter(name="ryan").values('age')
for user_age in users:
    print(user_age) 
```

需要注意的重要一点是 filter 返回一个可迭代的类型，其中的 values() 方法指示您想要哪些字段。Get 只是返回一个带有字段作为属性的对象，因此获取所需的数据要简单得多。

# regex - 如何使用正则表达式从仅 2 个级别访问文件/文件夹

> ID：15251405
> 
> 赞同：-2
> 
> 时间：2013-03-06T15:30:06.390
> 
> 标签：regex

出于性能原因，我应该从 2 个文件夹中访问文件。

目前，对于一个级别，我有这个正则表达式：

`'test/spec/{,*/}*.js'`

要访问所有子文件夹，我可以使用它：

`'test/spec/**/*.js'`

你知道只访问 2 个子文件夹的最佳正则表达式吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:07:59.147

试试这个：

```
ls -al test/spec/{,*/,*/*/}*.js
```

还使用`find`：

```
find -maxdepth 3 -type f -iname "*.js" 
```

# javascript - 在 Google 协作平台中使用 JavaScript 访问 iFrame

> ID：15251407
> 
> 赞同：0
> 
> 时间：2013-03-06T15:30:09.713
> 
> 标签：javascript, iframe, google-api, sites

我目前正在开发一个小工具，它通过谷歌文档电子表格在我的谷歌网站上显示评论。我希望 Gagdet 自动获取当前登录用户的用户名，并在 Gadget 的“名称：”字段中自动解析它。我尝试使用 JavaScript 来获取具有跨度 ID 的名称，但 JavaScript 不允许您从另一个域访问外部 iFrame。我的问题是，是否有可能获取有关登录用户的信息？也许使用 Google API 或使用 JavaScript 的任何其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:33:09.383

正如您所说，这是不可能的，如果 iframe 从外部获取内容是*permission denied*。但是谷歌有一些 API 可以让你看到登录用户的一些信息。但是您需要获得许可：

```
GET https://www.googleapis.com/plus/v1/people/{userId} 
```

或者

```
https://www.googleapis.com/plus/v1/activities/z12gtjhq3qn2xxl2o224exwiqruvtda0i?key=YOUR-API-KEY 
```

有关更多信息，请查看[https://developers.google.com/+/api/](https://developers.google.com/+/api/)

# mysql - 根据值对行进行分组并插入到另一个表中

> ID：15251411
> 
> 赞同：0
> 
> 时间：2013-03-06T15:30:12.833
> 
> 标签：mysql, sql, group-by

我有一张看起来像这样的桌子

```
Subject    Mark    Girls      Boys

Math        85      4          6
Math        86      1          3
Math        87      1          9
Math        92      2          9
Math        96      9          4
English     83      4          5
English     87      2          4 
English     91      2          3
English     99      4          1 
```

我希望将这些数据插入到另一个看起来像的表中

```
Subject    Range    Girls    Boys
Math       80-89    6         19
Math       90-99    11        13
English    80-89    6         9
English    90-99    6         4 
```

假设只有两位数的分数，我的查询应该是什么来完成这个。我尝试了一个很幼稚的方法`GROUP BY`，`IF MARK like 1%`但失败得很惨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:34:43.263

您可以使用`CASE`表达式来创建范围。如果您有更多范围，则将它们添加到`CASE`：

```
select subject,
  case 
    when mark >= 80 and mark <= 89 then '80-89'
    when mark >= 90 and mark <= 99 then '90-99'
  end `Range`,
  sum(girls) Girls,
  sum(boys) Boys
from yourtable
group by subject, case 
    when mark >= 80 and mark <= 89 then '80-89'
    when mark >= 90 and mark <= 99 then '90-99'
  end
order by subject 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/85dd5/5)。

如果您不想在 中重复`CASE`，`GROUP BY`则可以使用子查询：

```
select subject, 
  `range`,
  sum(girls) girls,
  sum(boys) boys
from
(
  select subject,
    case 
      when mark >= 80 and mark <= 89 then '80-89'
      when mark >= 90 and mark <= 99 then '90-99'
    end `Range`,
    girls,
    boys
  from yourtable
) src
group by subject, `range`
order by subject 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/85dd5/7)。

我建议您考虑创建一个开始/结束范围类似于此的表：

```
create table mark_ranges
(
  start_range int,
  end_range int
);

insert into mark_ranges values
(0, 9),
(10, 19),
(20, 29),
(30, 39),
(40, 49),
(50, 59),
(60, 69),
(70, 79),
(80, 89),
(90, 99); 
```

创建表格后，通过加入表格来获取范围非常容易：

```
select subject,
  `range`,
  sum(girls) girls,
  sum(boys) boys
from
(
  select t.subject,
    concat(r.start_range, '-', r.end_range) `range`,
    t.girls,
    t.boys
  from yourtable t
  inner join mark_ranges r
    on t.mark >= r.start_range
    and t.mark <= r.end_range
) src
group by subject, `range` 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/46adf/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:19:07.997

这是一个查询，它将自动定义标记范围并产生所需的结果：

```
SELECT 
  Subject, 
  CONCAT(MarkMin, '-', MarkMax),  
  (
    SELECT SUM(Girls) 
    FROM yourtable 
    WHERE Subject = Marks.Subject AND Mark >= MarkMin AND Mark <= MarkMax
  ) AS Girls,
  (
    SELECT SUM(Boys) 
    FROM yourtable 
    WHERE Subject = Marks.Subject AND Mark >= MarkMin AND Mark <= MarkMax
  ) AS Boys
FROM
(
SELECT
    Subject,
    ROUND(TRUNCATE(Mark/10,0),0) * 10 AS MarkMin,
    ROUND(TRUNCATE(Mark/10,0),0) * 10 + 9 AS MarkMax
FROM yourtable
GROUP BY Subject, MarkMin
) Marks; 
```

[演示](http://www.sqlfiddle.com/#!2/46adf/16)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:36:39.963

这是实现您的结果的 TSQL：

```
select
    Subject,
    Range,
    Girls = Sum(Girls),
    Boys  = Sum(Boys)
from (
    values('80-89', 80, 89),
          ('90-99', 90, 99)
) T(Range, MinValue, MaxValue)
left join Data on Data.Mark between T.MinValue and T.MaxValue
group by Subject, Range 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:43:09.767

这是一个如何执行此操作的示例。我使用了 SQL Server 2008 你可以用你的确切问题修改查询，但我给出了想法。如果这解决了您的问题，请将答案标记为已接受。

```
-- sample: marks table
create table marks(sj varchar(200), mark  int, girl int, boy int)

-- insert some data
insert into marks values ('eng', 85, 2, 3)
insert into marks values ('eng', 86, 3, 4)
insert into marks values ('eng', 95, 4, 5)
insert into marks values ('eng', 95, 5, 6)

-- check data
select * from marks

-- create range table
create table marks_range(sj varchar(200), range varchar(200), girl int, boy int)

--now enter the ranges one by one

--80-89
insert into marks_range 
select sj, '80-89', SUM(girl), SUM (boy) from marks where mark < 90 and mark >= 80
group by sj

--90-99
insert into marks_range 
select sj, '90-99', SUM(girl), SUM (boy) from marks where mark < 100 and mark >= 90
group by sj

-- check result
select * from marks_range 
```

# c++ - 从 C++ 中类的函数成员返回一个数组

> ID：15251412
> 
> 赞同：1
> 
> 时间：2013-03-06T15:30:12.913
> 
> 标签：c++, opencv, return, ros

我在 C++ 环境中使用 ROS 和 OpenCV，以便从 ROS 节点获取视频（灰度），通过 cv_bridge 转换数据（以便通过 OpenCV 详细说明），提取一些数据并将它们发布在一个主题上作为 ROS 消息。

我的问题是我不知道如何将数组发送`frame`到`main`函数以便详细说明！我无法详细说明，因为我需要区分不同帧的不同数据。这是我的代码：

```
#include <ros/ros.h>
#include <image_transport/image_transport.h>
#include <cv_bridge/cv_bridge.h>
#include <sensor_msgs/image_encodings.h>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <vector>
#include "rd_ctrl/proc_data.h"
#include <cv.h>

using namespace std;
namespace enc = sensor_msgs::image_encodings;

rd_ctrl::proc_data points;

ros::Publisher data_pub_; 

static const char WINDOW[] = "Image window";

class ImageConverter
{
  ros::NodeHandle nh_;
  image_transport::ImageTransport it_;
  image_transport::Subscriber image_sub_;
  image_transport::Publisher image_pub_;

public:
  ImageConverter()
    : it_(nh_)
  {
    image_pub_ = it_.advertise("out", 1);
    image_sub_ = it_.subscribe("/vrep/visionSensorData", 1, &ImageConverter::imageCb, this);

    cv::namedWindow(WINDOW);
  }

  ~ImageConverter()
  {
    cv::destroyWindow(WINDOW);
  }

  void imageCb(const sensor_msgs::ImageConstPtr& msg)
  {
    cv_bridge::CvImagePtr cv_ptr;
    try
    {
      cv_ptr = cv_bridge::toCvCopy(msg, enc::BGR8);
    }
    catch (cv_bridge::Exception& e)
    {
      ROS_ERROR("cv_bridge exception: %s", e.what());
      return;
    }

 CvMat frame= cv_ptr->image;     //definition of "frame"
cvSmooth(&frame, &frame, CV_MEDIAN);
 cvThreshold(&frame, &frame,200, 255,CV_THRESH_BINARY);

    cv::imshow(WINDOW, cv_ptr->image);
    cv::waitKey(3);

    image_pub_.publish(cv_ptr->toImageMsg());
  }
};

int main(int argc, char** argv)
{
  ros::init(argc, argv, "image_proc");
  ImageConverter ic;
ros::NodeHandle n;

//....elaboration of "frame" and production of the data "points"

data_pub_.publish(points);

data_pub_ = n.advertise<rd_ctrl::proc_data>("/data_im", 1);

 ros::spin();
  return 0;
} 
```

我希望这个问题足够清楚。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:57:13.923

现在，如果我对您的理解正确，您想要调用`imageCb`并将它创建的框架传递回`main`. 如果确实如此，那么您可以`imageCb`进行如下修改：

```
void imageCb(const sensor_msgs::ImageConstPtr& msg, cv::Mat frame ) 
```

您将需要在其中创建框架`main`并传递它`imageCb`：

```
cv::Mat frame ;
ic.imageCb( ..., frame ) ; 
```

这将使用复制构造函数，它只会复制标头并使用指向实际数据的指针，因此不会很昂贵。

这个先前的[线程](https://stackoverflow.com/questions/11016866/simple-passing-of-matrices-ie-cvmat-to-functions-in-opencv2-4)对 cv::Mat 复制构造函数有更详细的阐述。

# android - 跨 JAR 边界关闭游标

> ID：15251414
> 
> 赞同：1
> 
> 时间：2013-03-06T15:30:14.243
> 
> 标签：android, cursor, android-contentprovider, memory-leaks

我使用内容提供程序/解析器，有一个单独的项目/lib，它提供了许多 DB 辅助方法。我有第二个项目/lib 可以用光标做一些方便的事情。

想象一下这样的 DB Helper Method (com.example.DBHelper)：

```
 public String[] dumpColumnTable() {
        Cursor cursor = cr.query(MY_URI, 
                new String[] { FIELD }, 
                null,                   
                null,                   
                null                    
                );
        return UtilMethods.createArrayFromCursor(cursor);
} 
```

然后是 Util 方法（com.example.UtilMethods）：

```
public static String[] createArrayFromCursor(Cursor cursor) {
    return createArrayFromCursor(cursor, 0);
}

public static String[] createArrayFromCursor(Cursor cursor, int column) {
    if (cursor == null) return null;
    String[] strings = new String[cursor.getCount()];
    if (cursor.moveToFirst()) {
        int i=0;
        do {
            strings[i] = cursor.getString(column);    
            i++;
        } while (cursor.moveToNext());
    }
    return strings;
} 
```

显然光标没有关闭。这将泄漏一个游标。Logcat 会给你那个信息。

所以，在内部 util 函数中关闭它：

```
public static String[] createArrayFromCursor(Cursor cursor, int column) {
    if (cursor == null) return null;
    String[] strings = new String[cursor.getCount()];
    if (cursor.moveToFirst()) {
        int i=0;
        do {
            strings[i] = cursor.getString(column);    
            i++;
        } while (cursor.moveToNext());
    }
    cursor.close();
    return strings;
} 
```

但是 logcat 仍然会声称游标在 finalize 之前没有关闭。

如果相反，在 DB Helper 方法中，我保存返回值，关闭游标，然后返回它，我不会收到游标泄漏/logcat 消息：

```
public String[] dumpColumnTable() {
        Cursor cursor = cr.query(MY_URI, 
                new String[] { FIELD }, 
                null,                   
                null,                   
                null                    
                );
        String[] toret =  UtilMethods.createArrayFromCursor(cursor);
        cursor.close();
        return toret;
} 
```

为什么 ？在调试中，当调用返回时，光标被标记为关闭。调用堆栈来自我的 activity->db helper->util 方法。db helper 和 util 方法位于与活动不同的项目中。

是否有一些我缺少的引用/值传递问题，或者跨越多个 JAR 边界，或者将 SQLiteCursor 转换为我缺少的通用 Cursor 类型？

# exception - 将 boost::serialization 与 boost::asio 一起使用时的异常

> ID：15251415
> 
> 赞同：1
> 
> 时间：2013-03-06T15:30:17.920
> 
> 标签：exception, boost-asio, boost-serialization

我的服务器运行以下代码：

```
boost::asio::streambuf streambuf;
std::istream istream(&streambuf);
boost::archive::xml_iarchive xml_iarchive(istream);
boost::asio::read_until(socket_, streambuf, '\n'); 
```

当服务器启动并运行时，我从另一台机器连接 vie telnet。建立连接后，连接立即关闭，服务器崩溃，但出现以下异常：

```
terminate called after throwing an instance of 'boost::archive::xml_archive_exception'
    what():  unrecognized XML syntax 
```

上面代码片段的失败在哪里？在我手动输入一些 XML 字符串之前，我认为 telnet 会话正在发送一个“\n”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:03:40.110

您没有发布[sscce](http://sscce.org)，所以我为您创建了一个

```
#include <boost/asio.hpp>
#include <boost/archive/xml_iarchive.hpp>

int
main()
{
    try {
        boost::asio::streambuf streambuf;
        std::istream istream(&streambuf);
        boost::archive::xml_iarchive xml_iarchive(istream);
    } catch ( const std::exception& e ) {
        std::cerr << e.what() << std::endl;
    }
} 
```

正如预期的那样，从第 10 行抛出异常：

```
samm$ ./a.out
unrecognized XML syntax 
```

这与 Boost.Asio 无关，您正在尝试反序列化一个空缓冲区，这不是有效的 XML。为了解决这个问题，将反序列化延迟到从套接字读取到缓冲区之后

```
boost::asio::read_until(socket_, streambuf, '\n');
std::istream istream(&streambuf);
boost::archive::xml_iarchive xml_iarchive(istream); 
```

# css - 如何阻止 CSS 元素样式进入我的类样式？

> ID：15251421
> 
> 赞同：2
> 
> 时间：2013-03-06T15:30:29.423
> 
> 标签：css, html-table, element

我有两种样式，一种是元素级别的“td”，另一种是类级别的“.specialTable td”。而且我遇到了一些问题，因为如果我没有再次指定它们，类级别样式会继承所有“td”样式属性。

我有一个 CSS 样式

```
td
{
  background-color:black;
} 
```

然后我有

```
.specialTable tr:nth-child(even) {
    background-color: white;
} 
```

和

```
.specialTable td
{
  background-color:none;
} 
```

这里发生的情况是，即使我要求 .specialTable td 没有背景，它也会从元素样式“td”继承黑色背景，这会导致我的元素样式“tr”被屏蔽，因为单元格位于顶部行。

我正在尝试为我的表格设置交替行样式。请帮助我如何阻止原始的 'td' 元素样式妨碍我。

这是小提琴：http: [//jsfiddle.net/PIyer/phADs/1/](http://jsfiddle.net/PIyer/phADs/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:32:18.193

你的css中有一个类型，但我不确定这是否是问题

```
specialTable tr:nth-child(even) {
    background-color: white;
} 
```

应该

```
.specialTable tr:nth-child(even) {
    background-color: white;
} 
```

同样 background-color:none 是无效的 css ，也许是 background-color:transparent

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:40:30.697

`none`不是背景颜色的有效属性。试试这个：

```
.specialTable tr {
    background-color: black;
}

.specialTable tr:nth-child(even) {
    background-color: white;
} 
```

或者你可以在你的例子中使用

```
.specialTable td
{
    background-color: transparent;
} 
```

这应该让白色发光。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:42:49.690

您可以通过使用基本的 CSS 覆盖来简化事情。

假设你有这个：

```
<table class="specialTable">
    <tr>
        <td>This is an odd row</td>
    </tr>
    <tr>
        <td>This is an even row</td>
    </tr>
    <tr>
        <td>This is an odd row</td>
    </tr>
    <tr>
        <td>This is an even row</td>
    </tr>
</table> 
```

您的默认`<td>`样式是这样的：

```
td { 
    background-color:black;
    color: #FFF;
} 
```

要对 进行交替（斑马）样式`.specialTable`，您可以简单地执行以下操作：

```
.specialTable tr:nth-child(even) td {
    background-color: blue;
} 
```

这将覆盖偶数标签`<td>`中所有标签的原始 CSS 定义。`<td>``<tr>`

在这里查看一个工作示例：http: [//jsfiddle.net/rh5vV/](http://jsfiddle.net/rh5vV/)

重要的是要注意`nth-child`sudo 选择器在 IE8 及更低版本中不起作用，因此您可能希望将 class of`.even`应用于您的偶数`<tr>`标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:32:49.647

您可以使用`background-color:transparent;`或取决于`background:none;`：

```
.specialTable td {
  background-color:transparent;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:45:30.320

试试这个

```
 .specialTable tr td {
         background-color:transparent;
    } 
```

使用背景无不正确，使用透明代替

[http://jsfiddle.net/RBY2v/1/](http://jsfiddle.net/RBY2v/1/)

# asp.net - VS2012 在 SharePoint 可视化 Web 部件中使用标准 ASP.NET Web 用户控件

> ID：15251428
> 
> 赞同：0
> 
> 时间：2013-03-06T15:30:58.070
> 
> 标签：asp.net, sharepoint, visual-studio-2012

全部，

我在 VS2012.1 中创建了一个空的 SharePoint 项目。我已经向其中添加了一个可视化 Web 部件，我可以将各种标准控件添加到我的本地计算机上的 SharePoint 站点并部署到它。

我想要做的是在我的 SharePoint 项目中创建一个自定义 ASP.NET 控件。但是，在 VS2012 中没有选项可以将新的 ASP.NET Web 用户控件添加到我的 SharePoint 项目中。这可能吗？

谢谢，

安德斯

# asp.net - 在 Windows 7 上发布 asp.net 应用程序

> ID：15251429
> 
> 赞同：1
> 
> 时间：2013-03-06T15:31:01.133
> 
> 标签：asp.net, windows-7, iis-7

我有一个 asp.net 项目，我想将它安装在另一台装有 windows 7 的计算机上的 iis 上（这台计算机不包含 VS）

我需要安装什么来上传这个网站？？？

以及如何在 iis7 中上传该网站？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:58:05.613

用于在 windows7 中的 iis 上托管应用程序。请按照步骤操作。

> 1.  打开inetmgr。
> 2.  为您的应用程序创建新的应用程序池。apppool 版本应该等于或高于您开发应用程序的版本。
> 3.  右键单击默认站点并创建虚拟目录。
> 4.  在下拉列表中选择您为应用程序创建的应用程序池。
> 5.  提供您的应用程序的物理路径和名称以从浏览器调用您的应用程序。

之后，您可以根据需要配置默认文档、身份验证等。

然后，浏览应用程序以确保其正常工作。

我希望你的 windows 7 已经安装了 iis 并且在 iis 中注册了 asp.net。如果没有，请在开始托管之前安装相同的并使用 aspnet_regiis 和选项 -i 注册 iis。

> C:\Windows\Microsoft.NET\Framework\v4.0.30319>aspnet_regiis -i

用于托管，而不是不需要。默认情况下，Windows 7 附带 .net 4.0。

有关更多详细信息，请参阅 iis.net 站点或 msdn 站点以获取带有图形示例的分步过程。

# codeigniter - codeigniter 中的路由问题导致错误的 img src

> ID：15251433
> 
> 赞同：0
> 
> 时间：2013-03-06T15:31:13.313
> 
> 标签：codeigniter

我正在为我的项目使用 codeigniter，并在此处有一个名为 A.php 的页面，其中一个主容器 div 具有以下 html。我的本地 base_url 是 project.local。A.php页面在controller文件夹的文件夹front

```
<?php echo '
<div class="preview">    
      <img src="'.base_url().'resources/front/img/SBase1.png">
</div>
<div class="base">    
      <img src="'.base_url().'resources/front/img/SBase1.png">
</div>'
;?> 
```

我的路线如下

```
$route['build_shirt/(:any)'] = "front/test/A/$1"; 
```

我的控制器如下

```
class test extends CI_Controller {

   public function __construct() {
        parent::__construct();

        $this->data = null;

        // Load required CI libraries and helpers.

    }
   public function A($value)
   {
       //code here
   }
 } 
```

最初，基本 div 是隐藏的，而预览 div 是可见的。预览 div 中的图像 SBase1 正确加载。但是，当实现一些 js 时，当我单击 btn 并预览 div 时，将隐藏并显示基本 div。此时base div中的img Sbase1不会显示，因为指定的url错误。网址如下

project.local/A/resources/front/img/SBase1.png

代替

project.local/resources/front/img/SBase1.png

我的 js 除了隐藏和显示所需的 div 之外什么都不做，这只是预览和基础。我的路由有什么问题吗？

帮助表示赞赏。多谢你们！

# javascript - 使用 javascript 动态创建标签并在服务器端获取此标签

> ID：15251440
> 
> 赞同：1
> 
> 时间：2013-03-06T15:31:49.853
> 
> 标签：javascript, asp.net, controls

我是开发 .NET 的新人

我在 javascript 中动态创建一个标签。按下页面上创建的按钮后。

```
<label name="lblPerson1" id="lblPerson1" runat="server">Person:</label> 
```

之后我想在服务器端捕获这个标签。

来人帮帮我！

编辑：

我想要的是能够在您单击按钮时创建一组标签和输入。（在客户端）然后当您单击另一个按钮以更改标签的文本时（在服务器端）它是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:39:55.690

The label won't be posted to the server as part of the post request because it is not an input control.

What you can do (for example) :

*   have a asp.net hidden input control where, using some javascript, you will store the label's html markup upon click on the submit button, before submitting the form
*   or, upon click on the submit button, perform a post ajax request, where you will put your label's html markup

And BTW, I don't see how you will be able to use the `runat="server"` unless you parse the HTML markup server side to generate server controls (which does not seem a simple idea to me)

Hope this will help

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T15:34:49.637

因为此控件不是在服务器端创建的，所以您需要使用 FindControl 方法，如下所示：

使用这样的控件：

```
 <label name="lblPerson1" id="lblPerson2" runat="server">Person:</label>

    Dim myLabel As HtmlGenericControl
    myLabel = Me.lblPerson2

    Dim test As String = myLabel.InnerText 
```

让我知道这是否有效。

# javascript - 在 Javascript 中处理 alert() 的一个奇怪问题

> ID：15251446
> 
> 赞同：1
> 
> 时间：2013-03-06T15:32:13.437
> 
> 标签：javascript

我在 JavaScript 中有以下方法：

```
function getData(){
    var result;

    $.getJSON("app/data/ptl", function (data) {
        if (data == null) {
            return false;
        }

        var x_data = new Array();
        var y_data = new Array();

        $.each(data, function(index, value) {
            x_data.push(index);
            y_data.push(value);
        });

        result = [months_data,value_data];

    });

    alert('');
    return result;
} 
```

调用此方法时，将检索确切的数据。但是，当我删除`alert('')`数据时没有收到。有谁知道这个问题的合理解释？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:34:07.043

那是因为您的函数是异步的，并且删除该行会在远程服务器应答之前执行`alert`该行。`return r`

您不能简单地从调用异步工作的函数同步返回。通常的解决方案是提供一个回调并在回调中执行你想要做的事情：

```
function fetchData(doWithData){
  $.getJSON("app/data/ptl", function (data) {
    if (data == null) {
        return;
    }
    var x_data = new Array();
    var y_data = new Array();
    $.each(data, function(index, value) {
        x_data.push(index);
        y_data.push(value);
    });
    r = [months_data,value_data];
    doWithData(r);
   });
}

fetchData(function(result) {
   // use result here
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T15:34:34.247

您`alert()`和`return r;`您的 ajax 调用的“成功”处理程序之外。请记住 AJAX 调用是异步的。警报迫使浏览器等待您确认警报，这通常允许 AJAX 调用完成并填充您的`r`变量。没有警报，`.getJSON()`立即返回，BEFORE`r`被填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:34:50.237

该`$.getJSON()`调用建立了一个**异步进程**。该函数本身（几乎）立即返回，但您传入的回调函数将在稍后执行，当浏览器实际收到您正在联系的服务器的响应时。因此，从这样的回调中返回一个值本质上是没有意义的，因为没有人可以或不会关注它。

相反，您应该做任何需要访问回调函数中检索**到的信息的工作。**

# javascript - 为具有多条路径的地图设计优化的 SVG

> ID：15251448
> 
> 赞同：0
> 
> 时间：2013-03-06T15:32:16.910
> 
> 标签：javascript, performance, svg, gis

我有一个从 shapefile 创建的 SVG，假设有 100 个城市。我还预先计算了这些城市之间的最短旅行路径。当您单击任意两个城市时，我想显示它们之间的最短路径。问题是我至少有 10,000-30,000 条路径，具体取决于我拥有的城市数量（城市数量选择 2）。此外，路径被分割成不同的类型（例如，道路与高速公路），因此选择 2 条路径的城市数量甚至超过了 # 个。

SVG 可以从几 MB 到 100 MB 不等，具体取决于我对 SVG 所做的详细程度和优化。所以我不是在问如何优化 SVG，我感兴趣的是我是否可以重新考虑我目前的方法。现在我只是将所有路径放在 SVG 中并将它们设置为隐藏并在选择两个城市时更改属性。我想知道我是否不能将路径存储在其他文件中并使用脚本将它们交互地注入到 SVG 中，所以它们只是按需加载。最终游戏是在一台机器上拥有一个很好的交互式地图来展示想法，所以我并不完全需要出于服务器端的原因进行优化。

有没有人可以指出我的任何想法或读物？我对思考这类问题还很陌生，并且对必须存在的公认智慧持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:54:28.690

我不会将所有可能的路径都放在 SVG 中，而是将它们拆分为单个节点到节点的连接，并在选择逻辑中存储哪个路径使用哪个连接。这样，您将大量减少 SVG 元素的数量，能够以更好的可压缩格式存储最短路径数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T16:29:31.033

我和我的学生做了一些可能会回答你的问题的事情，关于动态添加更多的 svg 路径。它可以在 HTML 文档中完成，外加几行 Javascript。

1.  main svg 直接包含在 html 中，但只有最小的功能：

    ```
    <body>
      <svg>
        <g id="fullg">
        <rect ...>
        <!-- additional data will be inserted here later -->
        </g>
      </svg> 
    ```

2.  更多数据，例如几个

    ```
    <path id="name1" d="path_data1">
    ... 
    ```

    存储在这样的 json 文件中：

    ```
    { "items": [
       {"id":"name1", "d":"path_data1..."},
       {"id":"name2, "d":"..."},
       ... ] } 
    ```

3.  然后用几行 javascript: get json data via ajax, parse, and build as many

    ```
    <g><path ...></g> 
    ```

    根据需要行。

4.  将您的行添加到 svg 中：（**更新：使用 svg 命名空间**）

    ```
    var g = document.querySelector("#fullg"),
        ng = document.createElementNS("http://www.w3.org/2000/svg", 'g'),
        np = document.createElementNS("http://www.w3.org/2000/svg", 'path');
    ng.setAttribute("id","the_name_for_that_g");
    np.setAttribute("id","the_name_for_that_path");
    np.setAttribute("d","the_d_data_for_that_path");
    ng.appendChild(np);
    g.appendChild(ng); 
    ```

# python - Python：我可以使用什么来将 .pages 转换为 .ppt 并将 .pages 转换为 .doc？

> ID：15251451
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:32:22.770
> 
> 标签：python, macos, ms-office, iwork

我正在尝试编写一个 Python 脚本来在上述这些格式之间进行转换，但我一直无法找到能够执行此操作的合适库。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:12:01.033

我不确定的部分（我假设您需要一个主题文件来执行此操作）`.pages`。`.ppt`但是，对于`.pages`to`.doc`部分，您可能需要查看[PyObjC Scripting Bridge](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/RubyPythonCocoa/Articles/UsingScriptingBridge.html)支持与 Pages 的接口。有一个指南[着眼于这样做 pages](http://www.mugginsoft.com/kosmictask/help/automation-python)，更改对文档支持的`.rtf`引用`.pages`和`"SLDocumentTypeRichText"`to 。`"Microsoft Word 97 - 2004 document"`

# java - Java 构造函数参数 Selenium 与 WebDriverBackedSelenium

> ID：15251452
> 
> 赞同：0
> 
> 时间：2013-03-06T15:32:23.033
> 
> 标签：java, selenium

我正在使用旧版本的自动化脚本登录页面并运行测试。

我们想将经典的 selenium 构造函数更改为 WebDriverBackedSelenium 构造函数，以便进行一些更复杂的测试。

我们最初的构造函数调用是：

```
selenium = new DefaultSelenium("localhost", 4444, "*firefox", "https://asdffdsa.com/"); 
```

如何使用相同的参数设置 WebDriverBackedSelenium 构造函数？API 显示我们需要将构造函数设置为：

```
seWebDriver = new WebDriverBackedSelenium(driver, "https://asdffdsa.com"); 
```

似乎没有任何迹象表明 selenium 服务器在哪里运行、什么端口以及什么浏览器。

目前使用以下代码：

```
driver = new FirefoxDriver();
    seWebDriver = new WebDriverBackedSelenium(driver, "https://www.asdfdfdfsfs.com");

    seWebDriver.open("/"); 
```

刚才注意到我收到以下错误：

原因：org.openqa.selenium.firefox.NotConnectedException：45000 毫秒后无法连接到端口 7055 上的主机 127.0.0.1。Firefox 控制台输出： *** LOG addons.manager：应用程序已升级** **LOG addons.xpi：启动* ****LOG addons.xpi：跳过不可用的安装位置 app-system-share** **LOG addons.xpi：忽略名称不是有效加载项 ID 的文件条目：/var/folders/pf/hvzyf38x59vfbgf8zpvw5v800000gn/T/anonymous2501560210712840923webdriver-profile/extensions/webdriver-staging* ****LOG addons.xpi: checkForChanges** **LOG addons.xpi-utils：打开数据库* ****LOG addons.xpi-utils：创建数据库模式** **LOG addons.xpi：安装在 app-profile 中的新插件 fxdriver@googlecode.com* ****Blocklist::_loadBlocklistFromFile: 阻止列表被禁用** **LOG addons.xpi：安装在 app-global 中的新插件 {972ce4c6-7e08-4474-a285-3208198ce6fd}* ****LOG addons.xpi：使用已安装插件的更改更新数据库** **LOG addons.xpi-utils：更新插件状态* ****LOG addons.xpi-utils：编写插件列表** **LOG addons.manager: 关机* ****LOG addons.xpi：关机** **LOG addons.xpi-utils：关机* ****LOG addons.xpi-utils：数据库关闭** **LOG addons.xpi：启动* ****LOG addons.xpi：跳过不可用的安装位置 app-system-share** **LOG addons.xpi：忽略名称不是有效加载项 ID 的文件条目：/var/folders/pf/hvzyf38x59vfbgf8zpvw5v800000gn/T/anonymous2501560210712840923webdriver-profile/extensions/webdriver-staging* ****LOG addons.xpi: checkForChanges *** LOG addons.xpi: 未发现更改******************************

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:37:43.093

这是使用 Webdriver 支持的 selenium 的示例。

使用 webdriverbacked Selenium 时无需提及端口号。

在下面的程序中，该对象`Selenium`用于利用 Selenium RC（您的旧自动化脚本构造函数）的属性。

该对象`driver` 用于利用 Webdriver (Selenium2.0) 的特性。

```
public class BackedWebdriver {

    public static WebDriver driver;
    public static String baseUrl;
    public static Selenium selenium;

    public static void main(String[] args) {
        driver = new FirefoxDriver();    //Here we are mentioning that we will use Firefox browser
        baseUrl = "http://www.google.co.in/";
        driver.get(baseUrl);
        selenium = new WebDriverBackedSelenium(driver, baseUrl);
        selenium.windowMaximize();
        driver.findElement(By.id("gbqfq")).clear();
        driver.findElement(By.id("gbqfq")).sendKeys("selenium");
        selenium.click("g");
        driver.findElement(By.id("gbqfb")).click();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:03:26.963

```
DesiredCapabilities ffLinux = DesiredCapabilities.firefox();
ffLinux.setBrowserName("firefox");
ffLinux.setPlatform(Platform.LINUX);
String hubLocation = http://yourmachine.com:4444/wd/hub;
WebDriver driver = new RemoteWebDriver(hubLocation, ffLinux);
driver.get(yourWebApplicationURLThatsBeingTested); 
```

在上面使用 WebDriverBackedSelenium 的示例中，您传入的第一个参数是“驱动程序”。看看我如何在上面设置我的 WebDriver：它指定了集线器位置。******

# c# - 在 C# asmx webservice 中实现动态磁贴推送通知

> ID：15251455
> 
> 赞同：0
> 
> 时间：2013-03-06T15:32:26.160
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, windows-store-apps

我有一个托管各种数据的 asmx Web 服务，现在我想从 Web 服务发送实时磁贴更新。我知道推送通知可以从云发送到 WSN，但我还没有真正找到任何自定义 Web 服务的好例子。任何想法如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:04:50.357

除了已经提供的大量参考资料之外，我还想特别谈谈“**自定义 Web 服务**”的使用。在未开发的推送通知场景中，我强烈建议查看[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)(WAMS)，它抽象了许多底层 REST/HTTP/OAuth 编排，并提供了由 Windows Azure 云架构支持的好处（支付什么费用）您使用、故障转移、数据备份等）

鉴于您已经拥有一项服务，您可能会或可能不会决定 WAMS 的好处是否值得它所需的代码更改/迁移。如果您想继续使用您拥有的服务，您最终将自己做一些繁重的工作 - 使用 OAuth 向 WNS 进行身份验证等。这不是火箭手术，但它很乏味 :)[适用于 Windows 8 的 Windows Azure 工具包](http://watwindows8.codeplex.com/)做到了包括做这一切的秘诀，但它现在已被 Windows Azure 移动服务弃用。

我解决了在 Windows Azure 网站（您可以将其视为您的服务的主机）中利用 ASP.NET（我使用 WebAPI，但也可以使用 ASMX）“从头开始”[执行推送通知流程的主题。](http://blogs.msdn.com/b/jimoneil/archive/2012/11/08/windows-8-notifications-push-notifications-via-windows-azure-web-sites-part-3.aspx)涉及一些辅助工作，因为您需要在某个地方存储通知的通道 ID（我使用了免费的 MySQL 实例），并且您需要使用 OAuth 与 WNS 通信（我使用了一个[发布为要点），但我在](https://gist.github.com/jimoneil/4037330)[一个由三部分组成的博客系列](http://blogs.msdn.com/b/jimoneil/archive/2012/11/07/windows-8-notifications-push-notifications-via-windows-azure-web-sites-part-1.aspx)中涵盖了所有端到端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:43:41.793

您的服务器基础架构（Windows 与 Linux）和应用程序类型（asmx 与 aspx）对您发送通知的方式没有任何影响。通知以 HTTP POST 的形式从您的服务器发送到带有特殊格式 XML 数据的 MPNS 服务器。

这里有两个非常好的参考资料可以帮助您入门：

**推送通知概述** [http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx)

**发送推送通知** [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868244(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868244(v=win.10).aspx)

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:35:35.393

这本书可能会有所帮助。转到第 13 章。 [http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx)

# solr - 我可以将一个实体用于 Solr 中的多个数据源吗？

> ID：15251456
> 
> 赞同：0
> 
> 时间：2013-03-06T15:32:30.503
> 
> 标签：solr, entity

我想将多个分片数据库导入 Solr 中的一个实体。分片数据库具有相同的方案。

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:46:02.897

当然，应该可以。你在使用 DataImportHandler （问题没有说）？

您是否已经完成了单个数据库的 DIH 导入，并且只想将该定义应用于多个源？

如果是这样，您有两个基本选择可以继续：

*   使用适当更改的源复制实体定义。当您运行 DIH 时，它将执行第一个实体，然后执行另一个
*   使用 rootEntity = false 创建一个外部实体，其中包含您的数据库实体。然后，您的外部实体需要生成某种变量，每一轮对应于不同的分片。您的内部实体将使用该变量连接到正确的分片并执行加载。例如，您可以为外部实体创建一个带有数据源名称的 XML 文件，以便使用 XPathEntityProcessor 对其进行解析

# recursion - 这些帕斯卡三角函数是如何工作的？

> ID：15251458
> 
> 赞同：0
> 
> 时间：2013-03-06T15:32:41.997
> 
> 标签：recursion, oz, mozart

我正在阅读[《计算机编程的概念、技术和模型》](https://rads.stackoverflow.com/amzn/click/com/0262220695)，开头有一段代码，无论我多么努力，我都无法理解。

```
declare Pascal AddList ShiftLeft ShiftRight

fun {Pascal N}
   if N==1 then [1]
   else
      L in
      L = {Pascal N-1} % Recursion
      {AddList {ShiftLeft  L}
               {ShiftRight L}}
   end
end

fun {ShiftLeft L}
   case L of H|T then
      H|{ShiftLeft T}  % Recursion
   else [0]
   end
end

fun {ShiftRight L}
   0 | L
end

fun {AddList L1 L2}
   case L1 of H1|T1 then
      case L2 of H2|T2
      then
     H1+H2|{AddList T1 T2} % Recursion
      end
   else nil
   end
end 
```

我有点了解语言结构（这是对它的介绍），但真正阻碍我的是递归。

我试图在每个递归调用上贴一个标签，抽象地说明这里发生了什么，但我就是想不通。

我要求的是对这些功能如何工作的清晰而简单的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:52:05.473

从 N == 1 开始：这很简单。结果只是`[1]`。

现在检查 N == 2：

```
First we calculate L = {Pascal N-1} = {Pascal 2-1} = {Pascal 1} = [1]
Now shifted to the left: [1 0]
Shifted to the right: [0 1]
AddList just adds elementwise. So the result for {Pascal 2} is [1 1]. 
```

现在对于 N == 3：

```
{Pascal 2} = [1 1]
Shifted left:  [1 1 0]
Shifted right: [0 1 1]
Added:         [1 2 1] 
```

当然，该程序以相反的方式工作：它从一些较大的`N`. 但在`Pascal`函数开始时，程序会反复递归，直到参数`N`变为`1`。像这样的东西：

```
{Pascal 3}
   {Pascal 2}
      {Pascal 1}
      [1]
   [1 1]
[1 2 1] 
```

编辑：程序中实际上有多种递归。第一个`Pascal`以某个整数开头`N`并递归到`1`.

另一个（在辅助方法中）从一个由头和尾组成的列表开始，一旦列表为空就停止，即不能再拆分。（这是使用所谓的 cons 列表，一种本质上递归的数据类型。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-30T23:31:26.543

wmeyer 的解释非常好。我只想添加一个可能有用的“可视化”-->

首先，我用的是书的原版（PDF），我相信，功能是这样的 -->

```
declare Pascal AddList ShiftLeft ShiftRight
fun {Pascal N}
   if N==1 then [1]
   else
      {AddList {ShiftLeft {Pascal N-1}} {ShiftRight {Pascal N-1}}}
   end
end

fun {ShiftLeft L}
   case L of H|T then
      H|{ShiftLeft T}
   else [0] end
end

fun {ShiftRight L} 0|L end

fun {AddList L1 L2}
   case L1 of H1|T1 then
      case L2 of H2|T2 then
         H1+H2|{AddList T1 T2}
      end
   else nil end
end 
```

想象一下，您想查看帕斯卡三角形的第八行。你要输入：

```
{Browse {Pascal 8}} 
```

即，您想显示将 8 馈送到本书/此处定义的函数 Pascal 的结果。

首先，函数测试它刚刚传递的值是否为 1（直到递归的最后一次迭代（或最终的递归调用）才会为真，此时 [1]（来自 if N= =1) 将作为 THAT CALL OF Pascal 的输出返回，并将（Pascal 的）执行“链”传递回最先调用的下一个最近的调用（该结果 [1] 被添加到匹配的 ShiftLeft 或 ShiftRight，然后该结果被发送回链上，一直循环，直到它到达第一个（Pascal 8）。所以调用深入 8 个级别，然后将答案传递回这些级别，直到你得到了最终的答案......但我已经跳到前面了。

好的，由于您输入了 8，因此测试 N==1 失败，因此无法立即移动“列表”并将它们添加到 else 子句中，该函数无法使用未定义的术语执行此操作在'方程式'中说“我会尝试 N - 1！也许这将是最终答案！” （对于 ShiftLeft 和 ShiftRight - 所以每次递归发生时都会发生这种分支）

因此，该函数在 ShiftLeft 和 ShiftRight 中等待来自 Pascal N-1 的答案......等待，等待......

好吧，对于 N==1，{Pascal 7} 也不是真的，所以 Pascal 的新调用（“调用”，第二和第三调用，左右！）也会问“什么是 Pascal N - 1 “（这次是7-1）他们都会等待答案......

这种情况一直在继续……哦，等等，直到 N==1！

然后 [1]，一个列表，被返回 BACK UP THE CHAIN ......所以，每个连续的等待函数调用，最近的第一个（请记住，所有这些都在向下到达“底部”的过程中越来越多地发生其中 N==1 随着拆分的增加（通过每次调用一次调用 ShiftLeft 和 ShiftRight））最终可以使用它一直在等待的答案进行 AddList 计算，该答案来自它自己对 ShiftLeft 和 ShiftRight 的个人、私人调用。

一切都一直到底部，分解成越来越多的函数调用，然后我们回到顶部，最后可以得到一个返回的答案。最后的答案是第一次调用 Pascal 函数 {Pascal 8} 的 else 子句，现在，在内部，（因为 Pascal 三角形的第 8 行是 [1 7 21 35 35 21 7 1]）将如下所示：

{AddList [1 7 21 35 35 21 7 0] [0 7 21 35 35 21 7 1]} <-- 至少我认为这是要添加的最终列表的样子

添加后的列表作为最终答案返回并显示：[1 7 21 35 35 21 7 1]

# php - 在 web 服务 php 上下文中转换日期格式

> ID：15251460
> 
> 赞同：0
> 
> 时间：2013-03-06T15:32:44.080
> 
> 标签：php, web-services, date, formatting

我正在使用 php 中的 web 服务。下面的一段代码给了我关于日期符号的以下结果：

开始日期：2012-07-02T00:00:00。我想以欧洲格式提供，例如：

开始日期：2012 年 2 月 7 日。我一直在尝试实施标准解决方案：

[转换日期格式 yyyy-mm-dd => dd-mm-yyyy](https://stackoverflow.com/questions/2487921/convert-date-format-yyyy-mm-dd-dd-mm-yyyy)

但没有成功。帮助表示赞赏。

```
 foreach($array as $k=>$v){
 print "
 <tr>
      <td>
            <ul>
                <li><b>Naam         : {$v->Naam}</b></li>
                <li><b>Status       : {$v->Status}</b></li>
                <li><b>Aanbieder    : {$v->VerstrekkerNaam}</b></li>
                <li><b>Bedrag       : {$v->Bedrag}</b></li>
                <li><b>Begindatum   : {$v->Begindatum}</b></li>

            </ul>
      </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:37:32.433

你可以试试这个

```
$d = "2012-07-02T00:00:00";
echo $newDate = date("d-m-Y",strtotime($d)); 
```

`[Demo](http://codepad.org/vyWLXFwJ)`

在您的代码中，您可以将其应用为

```
foreach($array as $k=>$v){
 print "
 <tr>
      <td>
            <ul>
                <li><b>Naam         : {$v->Naam}</b></li>
                <li><b>Status       : {$v->Status}</b></li>
                <li><b>Aanbieder    : {$v->VerstrekkerNaam}</b></li>
                <li><b>Bedrag       : {$v->Bedrag}</b></li>
                <li><b>Begindatum   : " . date("d-m-Y",strtotime($v->Begindatum)) ."</b></li>
            </ul>
      </td>
</tr> 
```

# c - C ，没有换行符的换行符？

> ID：15251464
> 
> 赞同：3
> 
> 时间：2013-03-06T15:31:53.113
> 
> 标签：c, printf, stdout, linefeed

愚蠢的问题但是，是否可以使用 printf(); 在没有换行的情况下在标准输出上换行？如果没有，如果可能的话，关于如何覆盖 2 行以上的任何提示？

我正在尝试生成一种进度条，但在多行上。有任何想法吗？

编辑：所以是的，我接受了以下答案，尽管它不适用于我的具体情况。我正在尝试覆盖 2+ 行而不是单行。

```
printf("12345\r");
fflush(stdout);
printf("67890\n"); 
```

结果是
$ ./a.out
67890

但我想要实现的是用新数据覆盖 2+ 行。类似于进度条，但在 2+ 行上，除了我有一些数据的百分比数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:46:43.007

要重写一行的全部（或部分），您需要使用正确数量的退格字符。例如：

```
printf("some text");
printf("\b\b\b\bstuff"); 
```

将输出：

```
some stuff 
```

这对于简单的东西很好；对于更复杂的事情，您应该使用[ncurses](http://www.gnu.org/software/ncurses/)，它使用 ANSI 转义技巧来操纵屏幕周围的光标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:26:23.577

如果您的终端（或者更可能是终端仿真器）支持 VT100 样式的转义序列，您可以打印特定的代码序列来控制光标位置、清除部分或全部屏幕/窗口等。

例如，要将光标向上移动 1 行：

```
printf("\x1b[A");
fflush(stdout); 
```

要将光标向上移动 2 行，请执行两次或：

```
printf("\x1b[2A"});
fflush(stdout); 
```

这些通常称为[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)；该链接指向列出其中许多的 Wikipedia 文章。它们首先由旧的 DEC VT-100 终端实现，大多数现代终端和仿真器都对其进行了仿真。

还有这个：

```
printf("\x1b[J");
fflush(stdout); 
```

将清除部分屏幕，从当前光标位置到底部。

这些序列应该足以满足您的需求。（它们可能无法在 Windows 命令窗口中工作。）

更便携，如果您的系统支持它，您可以使用`termcap`或`terminfo`确定当前终端的正确命令序列（由`$TERM`环境变量确定）。该`tput`命令允许您在命令行上执行此操作；`man tput`了解更多信息。实际上，您现在不太可能找到一个支持 termcap 或 terminfo 的系统，其终端与 VT100 不兼容；打印原始转义序列严格来说是不可移植的，但可能已经足够好了。

一个建议：您的程序可能应该有一个选项来禁止任何此类控制序列；例如，如果想要将输出重定向到文件的用户不希望在文件中包含这些转义序列。有些程序只有在可以确定 stdout 是终端时才使用控制序列，但显式选项也是一个好主意。

**更新：**

这是我编写的一个程序，它演示了如何使用`terminfo`. 它应该适用于几乎任何类 Unix 系统。

```
#include <stdio.h>
#include <stdlib.h>
#include <curses.h>
#include <term.h>
#include <unistd.h>

int main(void) {
    const char *term = getenv("TERM");
    if (term == NULL) {
        fprintf(stderr, "TERM environment variable is not set\n");
        exit(EXIT_FAILURE);
    }
    setterm(term);
    for (int i = 0; i < 10; i ++) {
        putp(tparm(clr_eos));
        printf("%d\n%d\n", i, i+1);
        sleep(1);
        putp(tparm(parm_up_cursor, 2));
    }
    return 0;
} 
```

# windows - 在 silverlight 和 WinRT 应用程序之间共享代码

> ID：15251470
> 
> 赞同：1
> 
> 时间：2013-03-06T15:33:03.593
> 
> 标签：windows, silverlight, microsoft-metro, windows-runtime, windows-store-apps

我正在创建一个将在浏览器中运行并使用 ComponentArt 提供的一些数据可视化内容的 silverlight 应用程序。在某些时候，我还想创建一个 WinRT xaml/c# 版本，以便它可以作为 Windows 商店应用程序运行所有版本的 Windows 8，包括 WindowsRT。

我的问题是我如何才能在两个版本之间获得最大的代码重用。除了拥有 2 个版本之外，我没有其他方法（因为我使用 componentart 并且不能使用 html/js 方法）。特别是 Silverlight 应用程序中使用的 xaml 对 Windows 商店应用程序的可移植性如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:59:57.080

您的 XAML 与您使用的功能一样可移植。您不能重用相同的 XAML 文件，因为它们使用不同的命名空间和 xmlns URI 方案，而且您很可能希望 UI 略有不同，因为 Silverlight 主要是鼠标+键盘 UI，而 WinRT/XAML 主要是触摸。

确保使用 MVVM 能够重用大量非 XAML 代码。选择要使用的控件时 - 确保它们在 WinRT/XAML 中可用或有很好的替代品。我看到的一些缺失的东西是方法`WriteableBitmap.Render()`、、、`RadialGradientBrush`/绑定、`TypeConverterAttribute`或 控件。尽管有很多缺失控件的开源版本 - 您很可能希望为 Windows 应用商店应用程序使用替代 UI 设计方法，因为这些方法不适用于触控。`Style``Setter``TreeView``DataGrid``GridSplitter`

供参考 - 我花了大约 2-3 个小时将`TreeView`控件从 Silverlight Toolkit 移植到 WinRT，大约花费了大约`Calendar`20-30 个小时来移植`Chart`带有多种数据点和系列的控件 - 这是最重要的Mahmoud Moussa 的原始端口。根据您使用的功能的复杂性 - 所需的工作量显然会增加。如果您只是使用`Buttons, TextBoxes, TextBlocks, RadioButtons, CheckBoxes`等 - 您主要可以复制和粘贴来移植 XAML。我还会避免重新模板化控件，因为这些平台之间的模板部分和视觉状态/视觉状态组略有不同，因此您需要重做工作或花时间更正模板。

# ios5 - 块内/外的变量范围

> ID：15251475
> 
> 赞同：1
> 
> 时间：2013-03-06T15:33:17.570
> 
> 标签：ios5, objective-c-blocks

我想知道在块内部和外部使用相同名称的变量时变量的范围是什么。一个例子会自言自语：

```
NSSet *test = [NSSet setWithObjects@"Test"];

void (^onComplete)(id) = ^(NSSet *test) {

    // do we see the variable define as an argument of the block or the variable define outside of the block?
    NSSet *test2 = test;

}

NSSet *test3 = test; 
```

这里有什么可能的冲突吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:35:47.133

局部变量隐藏外部范围。所以在块中，`test`是参数，而不是外部变量。

# windows - 我从哪里获得适用于 Windows Server 2008 R2 的 x86 wlanapi.dll？

> ID：15251478
> 
> 赞同：0
> 
> 时间：2013-03-06T15:33:29.733
> 
> 标签：windows, wlanapi

为我的 32 位 dll 运行 Dependency Walker 表明我需要我的 Microsoft Server 2008 R2 机器中缺少的 wlanapi.dll (x86)。以下帖子提到需要安装无线局域网服务[http://geekswithblogs.net/dlussier/archive/2008/06/02/122558.aspx](http://geekswithblogs.net/dlussier/archive/2008/06/02/122558.aspx)

我这样做了，但它只安装了 x64 版本。知道如何获得 x86 版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:10:29.690

这似乎是第 3 方 dll 的重新分配问题。我试图避免安装第 3 方软件并尝试复制 dll（是的，不好，我知道，但我想暂时解决问题）。安装软件解决了上述情况。

PS：网络搜索没有提供 32 位 wlanapi.dll 的任何详细信息。

# javascript - 用单引号和/或双引号显示文本

> ID：15251480
> 
> 赞同：0
> 
> 时间：2013-03-06T15:33:41.937
> 
> 标签：javascript

我有一个文本变量，可以有单引号或双引号。例如在某些情况下。

```
`Estado 'mayor`' or  Esto dijo: "Ayer". 
```

在某些情况下，此文本取自 Json，或通过 .spring mvc 从数据库中获取的变量。

我试过这个：

```
 try{
            descrp='${dataProvider.description}';
        }
        catch(err){
            descrp="${dataProvider.description}";
        } 
```

但我有 Uncaught SyntaxError: Unexpected identifier

与：

```
 try {
            alert(data.description);
            }
            catch(err){
             alert(data.description.replace("'", "\'"));    
            } 
```

同样的错误。有可能为这两种情况做点什么吗？（单引号和双引号）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:39:02.673

尝试使用[escape()](http://www.w3schools.com/jsref/jsref_escape.asp)，或在服务器端转换特殊字符（引号）。

# java - Tomcat 从 URL 中删除上下文路径

> ID：15251484
> 
> 赞同：4
> 
> 时间：2013-03-06T15:33:55.557
> 
> 标签：java, tomcat7

当我给出上下文路径时，我只能访问我的应用程序，例如：

```
www.mydomain.com/projName 
```

而不是：

```
www.mydomain.com 
```

如果我给`www.mydomain.com`它，它会在 ROOT 下加载 tomcat 应用程序。我必须进行哪些更改才能在没有上下文路径的情况下访问应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:50:05.297

您可以将以下内容更改`{CATALINA_HOME}/conf/server.xml`为指向您的网络应用程序，

```
 <Context path="" docBase="your application folder relative 
               path from webapps" debug="0"> 
    </Context> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:44:10.240

您应该提供配置文件的内容，特别是位于 /META-INF/context.xml 中的 context.xml。

在该文件中，您是否尝试指定“”的上下文路径？

就像是：

`<Context path=""/>`

不要忘记在对 context.xml 进行任何更改后重新部署您的解决方案。

# mysql - 如何将mysql中的表与不同的列连接起来

> ID：15251488
> 
> 赞同：2
> 
> 时间：2013-03-06T15:34:08.367
> 
> 标签：mysql, sql, database

这些是我的表：

![](../Images/eb45d6f834b7d978ab1d6f2fbf5b3abd.png)

如果我使用表 2 左连接表 1，那么我只有 3-7 .. 在这种情况下我需要什么样的连接？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:41:57.990

可惜`MySQL`不支持`FULL OUTER JOIN`。但是，您仍然可以模仿它。

```
SELECT  a.ID1,  
        b.ID2, 
        b.var1, 
        b.var2
FROM    TableA a
        LEFT JOIN TableB b
            ON a.ID2 = b.ID1
UNION 
SELECT  COALESCE(b.ID1, a.ID2), 
        a.ID2, 
        a.var1, 
        a.var2
FROM    Tableb a
        LEFT JOIN TableA b
            ON b.ID2 = a.ID1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/faf3f/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:36:20.607

您需要一个完整的外部联接。请参阅 Xaprb 的这篇文章以在 MySql 中进行模拟：

[http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/](http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/)

# jquery - jQuery 效果/动画执行延迟

> ID：15251495
> 
> 赞同：1
> 
> 时间：2013-03-06T15:34:41.013
> 
> 标签：jquery, animation, effects

使用以下代码，Firebug 控制台中的所有内容都按顺序正常显示，条目按顺序（包括数据的 Ajax 发布），但所有 jQuery 效果/动画（`fadeIn`, `animate`, `slideUp`, `slideDown`, `animate`, `fadeOut`）在在执行实际步骤时不调用我的 Ajax 函数。

为什么要这样做？我如何解决它？

```
$('#overlay').fadeIn(500, function () { 
  $('#overlaybox').animate({ 'top': '40px' }, 100);
});
$('#survey').slideUp(1500);

console.log('-after overlay show');
console.log('before ajaxPutSurveyItems()');

ajaxPutSurveyItems(save, after);

console.log('after ajaxPutSurveyItems()');

$('#survey').slideDown(1500);
$('#overlaybox').animate({ 'top': '-200px' }, 300, function () {
  $('#overlay').fadeOut(2500); 
});

console.log('-after overlay hide'); 
```

这是 ajaxPutSurveyItems

```
function ajaxPutSurveyItems(answers, nextstep) {
    console.log('ajaxPutSurveyItems()');
    var p = {};
    p.uniqueid = gUniqueID;
    p.answers = answers;
    p.pageid = gSurveyPages[gCurrentPageIndex].ID;
    p.pageindex = gCurrentPageIndex.toString();
    p.surveydefid = gSurveyID;
    p.bypass = gIsBypass;
    var j = JSON.stringify(p);
    $.ajax({
        async: false,
        type: "POST",
        url: "surveydata.asmx/putSurveyItems",
        data: j,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        beforeSend: function(XHR) {
            console.log(':beforeSend');
        },
        success: function (data, status) {
            console.log(':success');
            // code removed for brevity
        },
        error: function (XHR, errStatus, errThrown) {
            console.log(':error');
            // code removed for brevity
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:45:46.373

如前所述，您不会等到一个动画完成后才开始另一个动画。您刚刚将它们设置为同时启动。虽然您使用了一些回调，但我相信您了解它们的工作原理并且只需要添加更多。

所以`callbacks`需要：

```
 $('#overlay').fadeIn(500, function () { 
   $('#overlaybox').animate({ 'top': '40px' }, 100);
 });
 $('#survey').slideUp(1500, function(){

      console.log('-after overlay show');
      console.log('before ajaxPutSurveyItems()');

      ajaxPutSurveyItems(save, after);

      console.log('after ajaxPutSurveyItems()');

      $('#survey').slideDown(1500, function(){

            $('#overlaybox').animate({ 'top': '-200px' }, 300, function () {
              $('#overlay').fadeOut(2500); 
            });     
      });

      console.log('-after overlay hide');
 }); 
```

# php - PHP 错误 - 无法打开文件

> ID：15251502
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:34:56.540
> 
> 标签：php, header, include, warnings

我正在构建一个小型 PHP 系统，但无法打开 CSS 样式、PHP 包含函数和图像等文件。

我也遇到了一些错误：

```
Warning: include(includes/functions.php) [function.include]: failed to open stream: No such file or directory in /home/chezki/public_html/XXX.XXX/cp/CMS/index.php on line 2

Warning: include(includes/functions.php) [function.include]: failed to open stream: No such file or directory in /home/chezki/public_html/XXX.XXX/cp/CMS/index.php on line 2

Warning: include() [function.include]: Failed opening 'includes/functions.php' for inclusion (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/chezki/public_html/XXX.XXX/cp/CMS/index.php on line 2

Built by YYY.YYY
logo  // Thats the Logo alt

Fatal error: Call to undefined function getlists() in /home/chezki/public_html/XXX.XXX/cp/CMS/index.php on line 28
Title   Actions  // Some images alt 
```

编辑：在 Windows 上，没关系，但在 Linux 上，它正在做这些错误 更多编辑：已解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:40:58.123

从您的错误消息中，您的脚本似乎是这样的：

```
/home/chezki/public_html/XXX.XXX/cp/CMS/index.php 
```

您正在尝试加载此文件：

```
includes/functions.php 
```

由于您收到此错误消息：

> 没有这样的文件或目录

...显而易见的结论是该文件不存在：

```
/home/chezki/public_html/XXX.XXX/cp/CMS/includes/functions.php 
```

如果不是这种情况，请随时编辑您的问题并提供更多详细信息。

**编辑：**文件必须具有该精确名称。如果它被称为 eg `Functions.php`，它是一个不同的文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T15:37:56.303

您有权限问题。由于权限错误，您的 Web 服务器无法读取 functions.php。使用 chown 和 chmod 调整权限。

# html - 有人可以为我解释这段代码吗？它来自照片库代码

> ID：15251505
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:35:02.490
> 
> 标签：html, gallery

我不明白这个：

```
img onmouseover="preview.src=img6.src" 
   id="img6" src="http://bit.ly/yRo1i" alt="Image Not Loaded"/> 
```

特别是这个：`src="http://bit.ly/yRo1i`，你能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:37:24.353

源是图像所在的位置。在这种情况下，它指向另一台服务器上的图像。要更改它，请将其指向您的图像现在所在的位置——比如服务器上的“images/pic.jpg”。

'onmouseover' 属性是一种将动作与图像上的鼠标悬停事件联系起来的旧方法——在这种情况下，我相信它正在切换源，因此在悬停时它看起来像另一个图像。

“Alt”标签适用于视力受损的浏览器，不幸的是也适用于 SEO。他们应该描述图像，因为它的文本无法阅读。

ID 是用于通过 CSS 或 JS 进行定位的标识符。

此外，正如许多评论者所指出的，这是基本的 HTML 标记，您需要学习它。[http://www.w3schools.com/tags/tag_img.asp](http://www.w3schools.com/tags/tag_img.asp)似乎是解决这个问题的好资源。

# button - 动态按钮背景变化

> ID：15251507
> 
> 赞同：0
> 
> 时间：2013-03-06T15:35:11.743
> 
> 标签：button, dynamic, highcharts

我想知道这是否可能：我添加了自己的按钮（见下文），现在我想知道是否可以在单击时动态更改按钮背景颜色。这个想法是模拟一个复选框启用/禁用。

```
 exporting: {
        enabled: true,
        buttons: {
            'realTimeButton': {
                id: 'realTimeButton',
                symbol: 'diamond',
                x: -62,
                symbolFill: '#B5C9DF',
                hoverSymbolFill: '#779ABF',
                _titleKey: "realTimeButtonTitle",
                onclick: function() {
                    // handle change to real time
                    if ( enable_lastRoundsChart_realtime )
                    {
                        enable_lastRoundsChart_realtime = 0;
                    }
                    else
                    {
                        enable_lastRoundsChart_realtime = 1;
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:17:58.090

以简单的方式不可能，但您可以使用渲染器来准备自己的按钮和悬停/按下样式。

[http://jsfiddle.net/AvpDk/](http://jsfiddle.net/AvpDk/)

```
normalState = new Object();
    normalState.stroke_width = null;
    normalState.stroke = null;
    normalState.fill = null;
    normalState.padding = null;
    normalState.r = null;

    hoverState = new Object();
    hoverState = normalState;
    hoverState.fill = 'red';

    pressedState = new Object();
    pressedState = normalState;

    var custombutton = chart.renderer.button('button', 74, 10, function(){
        alert('aaa');
    },null,hoverState,pressedState).add(); 
```

# wpf - 如何指定自动隐藏延迟？

> ID：15251513
> 
> 赞同：2
> 
> 时间：2013-03-06T15:35:51.543
> 
> 标签：wpf, avalondock

如何在 AvalonDock 中指定延迟，例如 LayoutAnchorable 是自动隐藏的？

# tfs - 使用 API 以编程方式从 TFS2012 中删除/删除 TestSuite

> ID：15251514
> 
> 赞同：1
> 
> 时间：2013-03-06T15:35:51.983
> 
> 标签：tfs, tfs-sdk

我正在使用 TFS2012 中的 API 在我们的 tfs 中自动创建测试套件。这一切都很好。但我想在通过 API 添加之前从 tfs 中删除所有 TestSuite。

有谁知道 API 是否提供此功能。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:29:13.023

执行以下操作，其中`tfsUri`是集合的位置，并且`tfsProjectName`是项目的名称：

```
var tfsTeamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(tfsUri);
var tfsTestManagementService = tfsTeamProjectCollection.GetService<ITestManagementService>();
var tfsTestManagementTeamProject = tfsTestManagementService.GetTeamProject(tfsProjectName);
var tfsTestPlans = tfsTestManagementTeamProject.TestPlans.Query("SELECT * FROM TestPlan");
foreach (var tfsTestPlan in tfsTestPlans)
{
    tfsTestPlan.Delete(DeleteAction.ForceDeletion);
} 
```

# google-apps-script - 有没有办法保证执行顺序？或者有什么办法可以取消当前正在执行的脚本？

> ID：15251518
> 
> 赞同：1
> 
> 时间：2013-03-06T15:34:55.743
> 
> 标签：google-apps-script

我在文本框上有一个类似自动完成的功能。

```
textBox.addKeyUpHandler(textBoxLookupHandler) 
```

## 发生什么了

如果用户打字相对较快，例如`a` `b`，似乎会发生以下情况。

1.  `a`调用处理程序。
2.  `ab`调用处理程序。
3.  `ab`返回更少的结果。因此，它在处理程序*之前*`a`返回。
4.  然后的处理程序`a`返回许多结果。

所以最后，用户输入了`ab`，但他们看到了结果，`a`因为结果`a`覆盖了`ab`.

## 可能的解决方案

如果我可以编写一些客户端脚本，我知道我将如何处理这个问题。但是由于我使用的是 UiApp，所以我不能这样做。

1.  保证 GAS 的执行顺序（我确信这是不可能的/是一个荒谬的要求）
2.  在 GAS 中有一些方法可以取消所有其他当前正在运行的脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:13:58.703

GAS 有一个[锁定服务](https://developers.google.com/apps-script/service_lock)，可以为您保证执行顺序。请参阅 Google Apps 开发人员博客“[并发和 Google Apps 脚本](http://googleappsdeveloper.blogspot.ca/2011/10/concurrency-and-google-apps-script.html)”条目。

您的处理程序应如下所示：

```
function textBoxLookupHandler(e) {
  var lock = LockService.getPrivateLock(); // Lock for just this user
  lock.waitLock(15000);  // wait max 15 seconds before exception.

  // Do whatever you used to do...

  lock.releaseLock();
  return app;
} 
```

# javascript - Rails 呈现部分 Ajax 错误，但在调试器中显示正确的响应

> ID：15251520
> 
> 赞同：4
> 
> 时间：2013-03-06T15:35:55.943
> 
> 标签：javascript, ruby-on-rails, ajax

我正在尝试使用不显眼的 Javascript 在现有链接上触发附加的 ajax 查询。

查询将进入服务器并进行处理，返回字符串“javascript template ok”进行测试。

但是，永远不会调用 ajax“成功”函数。到位，触发的是“错误”功能......

我查看了 Chrome 调试器，我可以看到从服务器返回的响应文本，但从来没有调用“成功”方法...... :-(

我的电话是

```
jQuery.ajax({
    type: 'POST',

    success: function(response) {   
        $("#details").html(response);
        console.log(response);
    },
    error: function(){ 
        alert("Error\nData could not be retrieve from the server");
    },
    url: '/treeview/show/1538.js',
    cache: false,
}); 
```

（在此示例中，url 是硬编码的）。浏览器中的相同 Url 无需布局即可获得正确的数据 :-)

删除url中的“.js”返回带有布局的html模板，并且正确实现了“details”div的更新......

控制器是

```
 respond_to do |format|
      format.html # show.html.erb
      format.js   { render :inline => "JAVASCRIPT TEMPLATE !" }
    end 
```

谢谢

编辑 ：

这是从 ajax 查询返回的对象（错误的第一个参数： function(jqXHR) ）：

```
Object
    abort: function ( statusText ) {
    always: function () {
    complete: function () {
    done: function () {
    error: function () {
    fail: function () {
    getAllResponseHeaders: function () {
    getResponseHeader: function ( key ) {
    overrideMimeType: function ( type ) {
    pipe: function ( /* fnDone, fnFail, fnProgress */ ) {
    progress: function () {
    promise: function ( obj ) {
    readyState: 4
    responseText: "JAVASCRIPT TEMPLATE !"
    setRequestHeader: function ( name, value ) {
    state: function () {
    status: 200
    statusCode: function ( map ) {
    statusText: "OK"
    success: function () {
    then: function ( /* fnDone, fnFail, fnProgress */ ) {
    __proto__: Object 
```

所以我得到了正确的回复文本??!! 那么错误可能在哪里？:-s

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T20:52:06.723

您没有明确指定`dataType`选项，`jQuery.ajax`因此 jQuery 推断它是`script`（依赖于 Rails 提供的 MIME 类型）。由于`JAVASCRIPT TEMPLATE !`不是有效的 Javascript 语句，因此会引发解析器错误。有两个选项可以`success`调用回调而不是`error`：

明确指定`dataType`为`text`：

```
jQuery.ajax({
    type: 'POST',
    dataType: 'text',
    // ...
}); 
```

或者从控制器返回有效的 Javascript：

```
respond_to do |format|
  format.html # show.html.erb
  format.js { render :inline => "{}" }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:00:37.627

您是否考虑过响应可能会被评估为 javascript 代码并因此引发被捕获的错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:10:54.623

好的，我不确定这个，但也许其中一个有帮助：

使用[`done()`](http://api.jquery.com/deferred.done/)and[`fail()`](http://api.jquery.com/deferred.fail/)而不是错误/成功。像这样：

```
$.ajax({ ...}).done(...).fail(...); 
```

**或者**

尝试在成功/错误回调中使用正确的函数参数。也许 jQuery 不喜欢签名，因此不调用该函数？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T06:24:26.913

在您的 ajax 调用中，添加

```
dataType: 'json', 
```

并且，控制器

```
format.js   render :text => { :some_data => "JAVASCRIPT TEMPLATE !" }.to_json 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T17:46:33.107

编辑错误调用以将错误数据传递给 DOM：

```
error: function(data){ console.log(data); } 
```

然后你会确切地看到正在发生的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T15:31:50.197

这是你应该做的：

```
$.post('/treeview/show/1538.js', function(response, data){
  $("#details").html(data.responseText);
}).error(function(){
  alert("Error\nData could not be retrieve from the server");
}) 
```

在您的控制器中可选

```
respond_to do |format|
  format.html # show.html.erb
  format.js   { render text: "JAVASCRIPT TEMPLATE !" }
end 
```

尝试一下。

# ios - CGContextSetFillColorWithColor 不适用于传入的颜色变量

> ID：15251521
> 
> 赞同：0
> 
> 时间：2013-03-06T15:34:58.723
> 
> 标签：ios, objective-c

我正在尝试使用`CGContextSetFillColorWithColor`我从 Parse 数据库中获取的颜色变量为图像着色。

以这种方式更改图像的颜色效果很好：

```
[...]
UIImage *image = [UIImage imageNamed:@"menuButton.png"];
CGRect rect = CGRectMake(0, 0, image.size.width, image.size.height);
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextClipToMask(context, rect, image.CGImage);
CGContextSetFillColorWithColor(context, [[UIColor whiteColor] CGColor]);
[...] 
```

这将 menuButton.png 更改为白色没问题。

但是，当我尝试将其更改为从 Parse（使用十六进制颜色实用程序）获得的十六进制颜色时：

```
self.bgColor = [post objectForKey:@"bgColor"]; //bgColor = "#ffffff"
[...]
CGContextSetFillColorWithColor(context,
   [[UIColor colorWithHexString:self.bgColor] CGColor]); 
```

图像不再出现。这是指针问题吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:46:08.787

我遇到了类似的问题，但没有找到直接的解决方案。我的解决方案是`-setFill`在我的对象上使用该方法`UIColor`，而不是使用中间`CGColor`对象：

```
[[UIColor colorWithHexString:self.bgColor] setFill]; 
```

# c# - 检查是否至少选择了一个复选框列表

> ID：15251522
> 
> 赞同：9
> 
> 时间：2013-03-06T15:35:59.563
> 
> 标签：c#, asp.net, checkboxlist

我有复选框列表，我想检查是否至少选中了一个复选框。如果没有选中，那么我想显示警告消息，说请至少选择一项。如果可能的话，我想在后面的代码中做到这一点。我已经开始了，但不知道是对还是错，但无法完成。

```
 public void alert()
    {
        foreach (ListItem listItem in cblCustomerList.Items)
        {
            if (!listItem.Selected)
            {
            }
        }
    } 
```

这是 aspx 中的复选框列表：

```
 <asp:CheckBoxList ID="cblCustomerList" runat="server" DataSourceID="SqlDataSource1" CssClass="CheckBoxList"
            DataTextField="GroupName" DataValueField="GroupName" 
                onclick="readCheckBoxList()" >               
            </asp:CheckBoxList> 
```

这是按钮：

```
 <asp:Button ID="Button1" runat="server" CausesValidation="True" 
                            CommandName="Insert" Text="Insert" OnClientClick="return Validate_Checkbox()" /> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T15:37:56.107

```
if(cblCustomerList.Items.Cast<ListItem>().Any(item => item.Selected))
{
   // at least one selected
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T15:39:43.667

编辑：

这是一个示例代码。它对我有用

必须添加此脚本文件：`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>`

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        function Validate_Checkbox() {
            var chks = $("#<%= cblCustomerList.ClientID %> input:checkbox");          

            var hasChecked = false;
            for (var i = 0; i < chks.length; i++) {
                if (chks[i].checked) {
                    hasChecked = true;
                    break;
                }
            }
            if (hasChecked == false) {
                alert("Please select at least one checkbox..!");

                return false;
            }

            return true;
        }     
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:CheckBoxList ID="cblCustomerList" runat="server" CssClass="CheckBoxList">
            <asp:ListItem Value="0">xx</asp:ListItem>
            <asp:ListItem Value="1">yy</asp:ListItem>
        </asp:CheckBoxList>
        <asp:Button ID="xx" runat="server" OnClientClick="javascript:Validate_Checkbox();return true;" />
    </div>
    </form>
</body>
</html> 
```

你改变了

```
<asp:CheckBoxList ID="cblCustomerList" runat="server" DataSourceID="SqlDataSource1" CssClass="CheckBoxList" DataTextField="GroupName" DataValueField="GroupName">             
            </asp:CheckBoxList> 
```

控制而不是我的示例代码。并`javascript function`在按钮控件中调用。看看我的示例代码。

雪儿！！！

编辑

请添加此脚本文件

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

代替`<script src="scripts/jquery-1.8.3.min.js" type="text/javascript"></script>`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T15:38:40.240

试试这个;

```
boolean b = cblCustomerList.Items.Cast<ListItem>().Any(i => i.Selected) 
```

如果`b`是`true`，则在您的复选框列表中至少选择了一个。

不要忘记使用`System.Linq`命名空间。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-06T15:37:40.500

```
// using System.Linq;

// Considering that items are of ListItem type, otherwise use Cast<ListItem>()
if (!cblCustomerList.Items.Any(i => i.Selected))
{
    // TODO: Warn an user
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-06T15:40:17.437

您只需使用`cblCustomerList.SelectedItem == null`, SelectedItem 将返回已检查项目列表中的最低序数项目，因此如果未返回任何内容，则不检查任何内容。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-06T15:46:07.477

```
 if(! cblCustomerList.Items.Cast<ListItem>().AsParallel().Any(i => i.Selected))
        {
           ShowAlert("Please select at least one option");
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-06T16:01:25.933

jQuery 解决方案。

```
if (!$(".CheckBoxList").find("input:checked").length) {
    alert("Houston, we've had a problem!");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T15:41:46.127

我能想到的最简单的方法......

```
public void alert()
        {
            int i=0;
            foreach (ListItem listItem in cblCustomerList.Items)
            {
                if (listItem.Selected)
                {
                    i++;
                }
            }
            if(i !=0)
            {
                Response.Write("Please check at least one option");
            }
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-25T19:51:36.233

使用内置的“CheckedItems”：

```
 dim x1 As Integer = clbMoveTo.CheckedItems.Count
 If x1 <= 0 Then
     MessageBox.Show("Select Move To.","Verify")
     return
  End If 
```

# jquery - 如何在一个 jQuery UI 选项卡中使用 jQuery UI 选项卡？

> ID：15251524
> 
> 赞同：1
> 
> 时间：2013-03-06T15:36:02.513
> 
> 标签：jquery, jquery-ui, zend-framework, jquery-tabs

我正在使用 jQuery UI 选项卡**（通过 AJAX 的内容）**我需要做的是在我的一个选项卡中我想要其他简单的 jQuery UI 选项卡意味着**（内容不是通过 AJAX）**但它不起作用.. 请原谅我做错了什么:(

```
<div id="tabs">  //these tabs are working fine
  <ul>
      <li><a href="<?php echo $this->url(array(), 'abc')  ?>">A</a></li>
      <li><a href="<?php echo $this->url(array(), 'asd')  ?>">B</a></li>
      <li><a href="<?php echo $this->url(array(), 'xyz')  ?>">C</a></li>
  </ul> 
```

我在`xyz`控制器的视图中添加了以下代码，但它不起作用

```
<script>
     $(function() {
         $( "#tabss" ).tabs();
       });
</script>

<div id="tabss">
  <ul>
      <li><a href="#tabss-1">Nunc tincidunt</a></li>
      <li><a href="#tabss-2">Proin dolor</a></li>
      <li><a href="#tabss-3">Aenean lacinia</a></li>
  </ul>

<div id="tabss-1">
  <p>abcd.......</p>
</div>

<div id="tabss-2">
  <p>xyz.......</p>
</div>

<div id="tabss-3">
  <p>abcd.......</p>
   <p>content.......</p>
</div> 
```

我已经包括了所有这些

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:22:40.723

正如 Kevin B 指出的那样，您在 xyz 控制器中创建选项卡的脚本会立即执行。

```
<script>
     $(function() {
         $( "#tabss" ).tabs();
       });
</script> 
```

当您可以单击“C”选项卡以加载此数据时，documnent.ready 事件已经触发。文档暗示但没有明确说明 AJAX 内容是延迟加载的，这意味着它不会在单击选项卡之前不要发出请求。但是如果您检查网络流量，您可以清楚地看到这种情况。

在标签内容本身的所有 HTML 之后，尝试更改“xyz”控制器的内容`<script>`以设置最后一个标签。`tabss`像这样：

```
<div id="tabss">
  <ul>
      <li><a href="#tabss-1">Nunc tincidunt</a></li>
      <li><a href="#tabss-2">Proin dolor</a></li>
      <li><a href="#tabss-3">Aenean lacinia</a></li>
  </ul>

<div id="tabss-1">
  <p>abcd.......</p>
</div>

<div id="tabss-2">
  <p>xyz.......</p>
</div>

<div id="tabss-3">
  <p>abcd.......</p>
   <p>content.......</p>
</div>

<script>
     $(function() {
         $( "#tabss" ).tabs();
       });
</script> 
```

[雅虎](http://developer.yahoo.com/performance/rules.html#js_bottom)和[其他几个来源](https://stackoverflow.com/questions/436411/where-is-the-best-place-to-put-script-tags-in-html-markup)建议将任何页面脚本放在页面末尾，即使您使用库来延迟执行直到 document.ready。这是出于客户端性能的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T05:07:28.957

我得到了这个问题的解决方案。

将脚本放入javascript中的页面加载功能

```
 function pageLoad(sender, args) {
        $(document).ready(function () {
            $("#tabs").tabs();
        });
    } 
```

现在它的工作完美。

# java - 我可以从动态生成的 XML 创建 JSP 吗？

> ID：15251525
> 
> 赞同：6
> 
> 时间：2013-03-06T15:36:03.353
> 
> 标签：java, xml, jsp, xslt, jstl

我想使用 XSLT 和`<x:transform>`标记生成 JSP。但是我的文件系统上没有 XML 文件，我不能像这样导入它：`<c:import url="./xml/MyXml.xml" var="xmldoc"/>`. 它在 Java 代码中动态生成并设置为 String 以请求属性。我试着这样做：

```
<div id="mydiv">
    <c:set var="xmldoc">
       <c:out value="${requestScope.someXmlString}"/>
    </c:set>
    <c:import url="./xsl/MyStylesheet.xsl" var="xsltdoc"/>
    <x:transform xml="${xmldoc}" xslt="${xsltdoc}"/>
</div> 
```

或者

```
<div id="mydiv">
    <c:set var="xmldoc" value="${requestScope.someXmlString}">           
    <c:import url="./xsl/MyStylesheet.xsl" var="xsltdoc"/>
    <x:transform xml="${xmldoc}" xslt="${xsltdoc}"/>
</div> 
```

但它不起作用。似乎`<x:transform>`只需要一个 xml 文档（不是字符串）。我该怎么做？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T13:56:26.820

您无需尝试设置可以直接在`<x:transform>`标签中引用请求值的值。

```
<x:transform xml="${requestScope.someXmlString}" xslt="${xsltdoc}"/> 
```

默认情况下，jstl 使用请求范围。所以如果你设置像 request.setAttribute("someXmlString", xmlStr); 这样的值 那么你可以直接调用

```
<x:transform xml="${someXmlString}" xslt="${xsltdoc}"/> 
```

两者都应该工作。

# memory - 内核模式 - 它可以访问用户模式吗？

> ID：15251527
> 
> 赞同：2
> 
> 时间：2013-03-06T15:36:06.573
> 
> 标签：memory, kernel, usermode

据我所知，内核模式代码可以访问任何可用的地址（高权限），但是如果我将用户模式指针传递给内核模式函数，它会在使用之前被更改吗？我的意思是：它会像在用户模式下那样通过分页/分段系统（或仅针对长模式分页）来解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:46:21.703

首先，您不会“提供指向内核模式函数的指针”。内核调用不是简单的跳转，它们要么是特殊指令，要么是软件中断。内核函数调用约定也不同于您通常的函数调用。

无论如何，从内核上下文访问用户内存的确切方式取决于所讨论的操作系统。内核通常有自己的（虚拟）地址空间。这可以是与用户进程空间完全独立的地址空间（例如 32 位 OSX），也可以位于特殊区域（许多操作系统中的高/低地址拆分）。*在高/低模型中，内核通常可以在该进程的上下文中执行时*取消引用指向用户空间的指针。在一般情况下，内核可以显式查找用户虚拟地址所引用的底层物理内存，然后将其映射到自己的虚拟地址空间中。

由于用户空间可以恶意提供错误的指针，因此内核在没有首先检查有效性之前决不能使用它们。这个和随后的访问对于用户进程的内存映射必须是原子的，否则进程可能会`munmap()`在内核指针有效性检查和实际读/写内存之间的时间范围内。出于这个原因，大多数内核都有辅助函数，它们`memcpy`在用户空间和内核空间之间本质上是安全的，可以保证是安全的，或者在指针无效的情况下返回错误。

在任何情况下，内核代码都必须明确地完成所有这些，没有什么是“自动的”。当然，您的系统调用可能会通过在到达内核模块之前自动执行此操作的抽象层。

**更新：**现代硬件支持 SMAP（监督模式访问预防），旨在防止内核意外/恶意取消引用指向用户地址空间的指针。各种操作系统已开始启用此功能，因此在这些情况下，您绝对必须通过特殊的内核函数来访问用户内存。

# wordpress - Azure 管理屏幕 wordpress

> ID：15251529
> 
> 赞同：0
> 
> 时间：2013-03-06T15:36:19.797
> 
> 标签：wordpress, azure, azure-web-app-service

最初在 azure 中创建网站时，我选择了 Wordpress 选项并成功完成了这项工作。在做了一些对齐更改并删除了不必要的东西后，我从我的网站上退出了 word press。但现在我无法通过我的网站登录到我的 Wordpress 管理屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:52:48.433

Sounds like more of a WordPress issue than an Azure issue. In any case: try visiting yoursite.azurewebsites.net/wp-login.php.

# regex - 正则表达式查找上一期间和字符串之间的文本

> ID：15251530
> 
> 赞同：0
> 
> 时间：2013-03-06T15:36:20.063
> 
> 标签：regex

示例文本：“这是开始。第一组词。第二个简单的句子。另一组词。”

模式逻辑：匹配单词“sentence”和前一个句点之间的任何内容。匹配可能会延伸多行。

期望的匹配：“第二平原”

注意：匹配不应包含引号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:45:51.907

不分组，使用前瞻（零宽度）

```
 [^.]*(?=sentence) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:40:33.357

这很简单：

```
\.([^.]+?)sentence 
```

比赛是第一组（$ 1）

# django - 在 Python Django 中像 SignalR 一样从服务器向客户端发送信号

> ID：15251538
> 
> 赞同：4
> 
> 时间：2013-03-06T15:36:35.553
> 
> 标签：django, python-2.7, signalr

我正在使用 Backbone.js 和 Python Django 组合。

为了检查用户是否经过身份验证，我正在使用 setTime out 方法并调用一个对服务器进行 ajax 调用的方法。

我从对 .Net 技术感兴趣的朋友那里听说了 SignalR。这可以从服务器向客户端发出信号。所以他说没有必要用signalR定期轮询。

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T19:05:11.067

可能的数据流程图：

![可能的数据流图](../Images/0e3e11a929ee02c4a2826869b1bcf19a.png).

如果您想控制从 Django 应用程序推送到 Web 客户端的数据，则需要使用 SignalR 作为可以使用 ASP.NET 应用程序托管的各种中继。

ASP.NET 应用程序可以让 REST 端点只能由您的 Django 应用程序访问，然后可以从那里根据 REST 参数将消息推送到您的部分或全部客户端。[使用 ASP.NET MVC 执行此操作的示例](https://stackoverflow.com/questions/7549179/signalr-posting-a-message-to-a-hub-via-an-action-method/11098832#11098832)。

SignalR [Wiki 可能是一个很好的资源。](https://github.com/SignalR/SignalR/wiki)您还需要[EnableCrossDomain 才能](https://github.com/SignalR/SignalR/blob/master/ReleaseNotes.md#10)使此设置正常工作。

如果您不喜欢设置另一台服务器只是为了将数据推送到您的客户端的想法，您可能更喜欢基于云的产品，例如[Pusher](http://pusher.com/)，它带有[围绕其 REST API 的预构建包装器](http://pusher.com/docs/server_libraries#python)。

如果您想使用 Python 实际推送到客户端，您可以使用类似[tornado.websocket](http://www.tornadoweb.org/documentation/websocket.html)的东西，但这不支持不支持最终 WebSocket 规范的浏览器。

# android - 共享首选项错误

> ID：15251540
> 
> 赞同：0
> 
> 时间：2013-03-06T15:36:41.450
> 
> 标签：android, sharedpreferences

我有一个像这样的活动：

```
public class LogoActivity extends Activity{

SharedPreferences data = getSharedPreferences("la",MODE_PRIVATE);

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_logo);
    SharedPreferences.Editor editor = data.edit();

    for(int i=0;i<5;i++){
        ImageAdapter.items[i] = data.getInt(Integer.toString(i),0);
    }
    name = Names.forDrawable(id);
    check.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            a=name.isCorrect(text.getText().toString());
            if(a==true){ 

            ImageAdapter.items[LogoSelectionActivity.pos] = 1;
            Intent intent = new Intent(LogoActivity.this, CorrectActivity.class);
            intent.putExtra ("clicked_position", LogoSelectionActivity.pos);
            startActivity(intent);

            }
            else{
                incorrect.setVisibility(0);
            }

        }
        });

    for(int i = 0;i<5;i++){
        editor.putInt(Integer.toString(i),ImageAdapter.items[i]);
    }
    editor.commit();

    back.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(LogoActivity.this, LogoSelectionActivity.class);
            startActivity(intent);  
            }
    });

}
} 
```

我在 imageAdapter 中保存了 5 个项目的阶段，例如 0 或 1。默认为全 0。我正在更改此阶段的活动。更改后，我想保存此阶段并在用户再次打开应用程序时获取它。我写了代码，但我有错误。我还尝试在代码末尾而不是开头获取首选项，但没有任何改变。

错误信息：

```
03-06 17:27:49.520: E/AndroidRuntime(14808): FATAL EXCEPTION: main
03-06 17:27:49.520: E/AndroidRuntime(14808): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.turkishlogoquiz/com.example.turkishlogoquiz.LogoActivity}: java.lang.NullPointerException
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.os.Looper.loop(Looper.java:137)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at dalvik.system.NativeStart.main(Native Method)
03-06 17:27:49.520: E/AndroidRuntime(14808): Caused by: java.lang.NullPointerException
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:160)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at com.example.turkishlogoquiz.LogoActivity.<init>(LogoActivity.java:32)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at java.lang.Class.newInstanceImpl(Native Method)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at java.lang.Class.newInstance(Class.java:1319)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.app.Instrumentation.newActivity(Instrumentation.java:1068)
03-06 17:27:49.520: E/AndroidRuntime(14808):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:38:47.780

将您的代码更改为：

```
public class LogoActivity extends Activity{

SharedPreferences data ;  //<<< declare here

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    data = this.getSharedPreferences("la",MODE_PRIVATE); //<<initialize data here
    setContentView(R.layout.activity_logo);
    //...your code here 
```

您需要`SharedPreferences`在 onCreate 方法中初始化实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:38:50.660

```
SharedPreferences data = getSharedPreferences("la",MODE_PRIVATE); is wrong 
```

在全局中声明共享首选项并像这样在 OnCreate() 中获取它们

`SharedPreferences data;`全球

在 onCreate

```
 data= getSharedPreferences("la",MODE_PRIVATE); 
```

# c# - 添加后刷新列表框

> ID：15251541
> 
> 赞同：1
> 
> 时间：2013-03-06T15:36:43.540
> 
> 标签：c#, winforms, listbox

我`listbox`在 C# 中有一个并希望在添加新项目后刷新它（使用新表单对话框打开）

这是我的代码不起作用。

```
 private void showAllItems()
    {
        itemList = Db.getAllItems();
        lb_itemList.DataSource = itemList;
    }

    private void showItemPreview(object sender, EventArgs e)
    {
        string curItem = lb_itemList.SelectedItem.ToString();
        briefPreviewList = Db.getItemBriefPreview(curItem);
        string itemInfos = string.Join(",", briefPreviewList.ToArray());
        string[] infos = itemInfos.Split(',');
        l_itemDB.Text = curItem;
        l_CategoryDB.Text = infos[0];
    }

    private void b_addItem_Click(object sender, EventArgs e)
    {
        int uid = 1;
        AddItem addItemForm = new AddItem(uid);
        addItemForm.ShowDialog();
        CurrencyManager cm = (CurrencyManager)BindingContext[itemList];
        cm.Refresh();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:42:16.293

我假设当您插入一个新项目时，它会存储到数据库中，如果是这种情况，那么您需要做的就是重置数据源：

```
private void b_addItem_Click(object sender, EventArgs e)
{
    int uid = 1;
    AddItem addItemForm = new AddItem(uid);
    addItemForm.ShowDialog();
    addItemForm.Dispose();

    this.showAllItems();
 } 
```

# math - 手刹 CLI 作物问题

> ID：15251550
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:37:27.720
> 
> 标签：math, video, html5-video

我喜欢 Handbrake CLI，并一直将它用于我创建的内部工具，以帮助将未压缩的大型视频转换为 HTML5 就绪的 MP4。

这对您的普通高清电影 (1920x1080 / 1280x720) 非常有效，但当您从 YouTube 添加 720p 视频时效果不佳，例如，黑条已被其编码器自动删除。

这意味着输入视频的分辨率为 1280x528（而不是 720 高度，因为它缺少黑条）。

因此，为了适合我拥有的预览面板，我必须做的是缩放视频以适合面板的高度，然后裁剪多余的宽度。

基本逻辑，基本数学，但手刹扭曲了整个事情，让我发疯。

这是我正在使用的线路：

> ./HandBrakeCLI -i Man_of_Steel.mp4 -e x264 -a none -q 25 -f mp4 -o test.mp4 --optimize -w 714 -l 402 --start-at duration:1 --stop-at duration:3 --作物 0:0:130:130

这样可以节省 3 秒的预览时间。

> 数学是：
> 
> int scaledWidth;
> int scaledHeight;
> 
> int 目标宽度 = 714;
> 
> int 目标高度 = 402;
> 
> float scaleFactor = (float) targetHeight / videoHeight; // 缩放到适合高度
> 
> scaledWidth = (float)videoWidth * scaleFactor; // 输出为 974
> 
> scaledHeight = (float)videoHeight * scaleFactor; // 输出为 402
> 
> int offset = (scaledWidth - targetWidth); // 输出为 130px，需要在每一侧进行裁剪

但是，视频出来时失真了！通过反复试验，我发现使它看起来不错的正确偏移量是**169**，只是我不知道为什么这是正确的值。

谁能帮我找出问题所在？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:01:53.923

您的数字表明`offset`适用于*原始*视频，即首先移动然后缩放。此外，您必须除以 2，因为您希望整个边距在两侧均匀分布。

```
int offset = (scaledWidth - targetWidth)/(2 * scaleFactor)
     170   = (    974     -     714    )/(2 * (402 / 528)) 
```

# jquery - .ajaxError(function(event,xhr,options,exc)) 的参数是什么意思

> ID：15251551
> 
> 赞同：2
> 
> 时间：2013-03-06T15:37:29.913
> 
> 标签：jquery, ajax

我一直在使用`error()`Ajax 事件，`$.ajax()`它`$.ajaxSetup()`有三个参数：`error(xhr,status,error)`我知道这些参数是什么，并且没有问题。

但无法理解 的论点`.ajaxError(function(event,xhr,options,exc))`**。**任何人都可以描述这些论点，每一个。特别`event`论证。并且可以给我一个例子来使用四个参数中的每一个`.ajaxError(function(event,xhr,options,exc))`

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:34:14.043

我在 JQuery 论坛中讨论了我的问题并得到了有用的[答案](https://forum.jquery.com/topic/what-does-mean-arguments-of-ajaxerror-function-event-xhr-options-exc#14737000003991067) **：**

`event is an ajaxError event object and doesn't contain any particularly useful information. xhr is the jQuery wrapper around the XMLHttpRequest object that made the request - useful attributes are status and statusText. options is the full set of options sent to the ajax request - useful attributes are url, isLocal, and type. exc is the exception thrown - useful attributes are filename and message, and possibly lineNumber and columnNumber.`

```
$('#results').ajaxError(function(event, xhr, options, exc) {
  $(this).text('Couldn\'t load ' + options.url + ' because (' +
        xhr.status + ' - ' + xhr.statusText + ') ' + exc.message);
}); 
```

并且另外研究`The Event Object (page 173)`了`JavaScript & jQuery: The Missing Manual, 2nd Edition`书的部分。部分金额为：

**事件对象** `Whenever a web browser fires an event, it records information about the event and stores it in an event object. The event object contains information that was collected when the event occurred, like the vertical and horizontal coordinates of the mouse, the element on which the event occurred, or whether the Shift key was pressed when the event was triggered.`

现在知道什么是不明白的。**就一件事：**

谁能明确地给我几个`$.ajaxError event(parameter) attributes.` 我进行调试的实例，`Firebug`并查看`event Object`并发现非常有用的信息，但我是新手，需要一些适合我的文章的功能`$.ajaxError parameters.`

# web-services - JBoss Web 服务和 EJB

> ID：15251558
> 
> 赞同：0
> 
> 时间：2013-03-06T15:37:45.343
> 
> 标签：web-services, ejb, jboss6.x

我的应用程序应该通过 RESTful WebServices 显示内容列表。

这个东西列表是通过一个 EJB 生成的，它部署在 JBoss AS 6 的 .jar 中。

我的问题是，我如何获得这个东西列表以便通过 Web 服务显示它？如果我尝试在使用@WebService 注释的无状态bean 中注入@EJB，并尝试调用生成列表的方法，~~我会收到一条错误消息，指出无法解析（或导入）@EJB。~~（已修复，需要修改 maven 依赖项）。现在，`NullPointerException`当我调用所谓的注入 EJB 时，我得到了一个...

我正在使用来自 Maven 的 webapp 原型，其中包含一个 EAR、一个 JAR 和一个 WAR。

我在这里完全不知所措，一直试图弄清楚这一点将近一个星期。

提前致谢！

--EDIT-- 代码和错字已修复

这是我的无状态 bean，应该作为 WebService 公开（根据： http: [//www.adam-bien.com/roller/abien/entry/restful_calculator_with_javascript_and](http://www.adam-bien.com/roller/abien/entry/restful_calculator_with_javascript_and)）

```
@Stateless
@Path("/MyRESTApplication")
public class HelloWorldResource {
    @EJB
    private TestBean testBean;

    @GET()
    @Produces("text/plain")
    public String sayHello(String name) {
        return testBean.doMoreStuff();
    }
} 
```

该`doMoreStuff()`函数只返回“HELLO！”。

# sql - 找不到适用于 H2 和 Postgres 的通用 SQL

> ID：15251562
> 
> 赞同：5
> 
> 时间：2013-03-06T15:37:47.270
> 
> 标签：sql, postgresql, timestamp, h2

在我的项目中，我使用 Postgres 数据库，但有时，为了开发，我使用 H2。我正在尝试定义一个 sql 脚本，它将更新时间戳列，如下所述，但我找不到可以同时应用于 Postgres 和 H2 的单一格式。

基本上，sql 试图将时间戳设置为`NOW + 1 week`.

这是适用于 Postgres 的 sql：

```
update mytable set mytime = CURRENT_TIMESTAMP + INTERVAL '7 days'; 
```

这是适用于 H2 的 sql：

```
update mytable set mytime = CURRENT_TIMESTAMP + 7; 
```

有人可以建议一个可以对两个数据库执行相同操作的 sql 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:29:58.560

根据我的测试，这适用于 H2 和 PostgreSQL：

```
update mytable set mytime = 
cast(cast(current_timestamp as date) + 7 as timestamp) + 
cast(current_timestamp as time); 
```

我同意这有点奇怪，但这是我在当前版本的 H2 和 PostgreSQL 中发现的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-04T22:27:59.063

我们遇到了类似的问题，我们将 PostgreSQL 用于我们的应用程序，但我们的单元测试使用 H2。我们最终只是将日期算术移动到应用程序代码中。因此，使用上面的示例，将 sql 更改为

```
update mytable set mytime = ?; 
```

然后在应用程序代码中（使用 Java）我们计算出时间：

```
Instant future1Week = Instant.now().plus(1, ChronoUnit.WEEKS); 
```

并将该值绑定在 PreparedStatement 中。

# tfs - TFS 2010 在特定状态下构建工作项

> ID：15251566
> 
> 赞同：1
> 
> 时间：2013-03-06T15:37:57.630
> 
> 标签：tfs, msbuild

一段时间以来，我们一直在使用 TFS 2010 来管理工作项和 sprint，并且最近增加了一个专门的 QA 人员。我需要做的是创建一个可以按计划运行的构建定义（例如星期二晚上 9 点），它只会构建和/或部署处于“ReadyToDeploy”状态的工作项. 或者一种基于 TFS API 获取要推送的文件列表的方法。

我的最终目标是有一种方法来自动化发布过程，以便每周仅将通过 QA 的项目发送到我们的暂存环境。然后客户或 QA 可以批准这些项目在作为生产镜像的 staging 中工作，另一个流程或构建定义将部署这些将处于不同状态的项目。

我已经修改了工作项和工作流程以完成不同的状态，但是我在获取仅修复的构建或根据工作项的状态推送的所有文件列表时遇到问题。

我对任何想法或解决方案持开放态度，另一种选择是我必须每周管理文件列表并手动推送文件，我正试图摆脱这种情况。

谢谢，

编辑：我们现在设置的方式是，每个开发人员都有自己的分支和自己的网站，我们的软件是基于服务器的，并且必须在特定的服务器上运行。我们的主干链接到主要的开发网站。这是 QA 最初进行测试以将项目移动到准备部署状态的地方。当开发人员准备好进行 QA 时，他们会在分支中签入更改并合并到主干中。目前，构建是从主干创建的。在我们的部署之夜，我在 VS 中打开主干网站并进行发布，然后将这些文件与开发人员提供给我的列表进行比较，并将编译后的文件通过 ftp 传输到我们的生产服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:29:08.957

我可能是错的，但我不知道如何根据附加工作项的状态告诉构建避免某些变更集。

我认为实现这一目标的唯一方法是创建一个`Release`分支并每天合并处于“ReadyToDeploy”状态的变更集。合并时，您可以挑选变更集，但它们必须是[连续的](http://dictionary.reference.com/browse/contiguous)。这意味着您必须执行多次合并才能使`Release`分支进入适当的条件。

我们多年来一直经营类似的东西，它对我们来说效果很好。很多人会告诉你这是不好的做法，而且很可能是这样，但这是你自己决定的。

至于自动化构建，我认为这不是一件容易的事。最困难的部分将是合并。您可能认为不会有冲突，因为它是单向合并，但是这样做了很多年，我可以告诉您确实会出现冲突。

**分步说明**

1.  `trunk`创建一个被调用的分支`release`
2.  当您想要进行部署时，从`trunk`into合并`release`，但只挑选`ReadyToDeploy`变更集。这可能需要多次合并，因为变更集必须是连续的。
3.  启动发布分支的构建/部署。
4.  在发布计划允许的情况下重复步骤 2 - 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:19:58.440

你可以做一些自动的事情，这需要大量的编码。它还需要一个分支策略，以便 Dev、Staging 和 Production 都来自它们自己的分支。

1.  设置使用 TFS API 扫描处于该状态的项目的进程
2.  使用 API 遍历项目以附加签到
3.  使用 API 获取最新的源分支和目标分支
4.  使用 API 通过变更集进行合并（在 #2 中确定）（这很重要，必须处理很多情况，但合并应该是一种没有冲突的方式，所以可行）
5.  使用 API 签入
6.  开始编译构建
7.  如果编译构建成功启动发布构建

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T22:40:17.600

据我所知，这种方法存在一个主要问题。假设您有两个变更集：# 1 和 2。它们都包含对同一文件的修改。现在变更集 #2 包含自己的更改以及来自 #1 的更改。如果你决定引入变更集 2 并跳过 #1，猜猜会发生什么。您将吸收 #1 的变化。这显然是个问题。

# javascript - 如何让我的 html 按钮保持点击状态？

> ID：15251567
> 
> 赞同：-5
> 
> 时间：2013-03-06T15:37:57.370
> 
> 标签：javascript, html, css, mobile, browser

`:active`即使在不更改浏览器默认`:active`选择器的按钮 css的情况下，如何在单击后维护选择器的 css。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:44:05.170

您可以设置按钮的“活动”和“已访问”属性的样式，使其看起来相同。

```
#button:active{
    border:1 px solid red;
    color:#FFF;
    background:black;
}
#button:visited{
    border:1 px solid red;
    color:#FFF;
    background:black;
} 
```

一定要给你的按钮一个 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:46:26.833

您可以通过 css 依赖`:active`伪类并相应地对其进行样式设置，或者使用 JavaScript 在 click 事件上设置一个 css 类，以添加一个样式类似于 mousedown 状态的 css 类。

您还可以在他们的示例页面上查看 bootstrap 是如何做到这一点的：

[http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)

# c# - XMLSerializer 序列化日期错误：不是有效的 AllXsd

> ID：15251570
> 
> 赞同：3
> 
> 时间：2013-03-06T15:38:00.043
> 
> 标签：c#, .net, xml-serialization, xmlserializer

我使用`XmlSerializer`来序列化包含 datetime 属性的对象。

这与以下产生的结果示例一起很好地序列化：

```
<GuestUserLinkItemActivity>
<ActivityDateTime>2013-03-06T00:00:00+00:00</ActivityDateTime>
<ActivityMessage>Invitation email sent to guest.</ActivityMessage>
</GuestUserLinkItemActivity> 
```

但是当我尝试反序列化时，再次使用`XmlSerializer`，我得到以下错误

字符串 '2013-03-06T00:00:00 00:00' 不是有效的 AllXsd 值。xmlserializer 反序列化

我发现有几篇帖子有类似的问题，但没有提供解决方案。

[XmlSerializer：字符串 '' 不是有效的 AllXsd 值](https://stackoverflow.com/questions/2861779/xmlserializer-the-string-is-not-a-valid-allxsd-value)

[字符串 '3/18/09 10:16 PM' 不是有效的 AllXsd 值](https://stackoverflow.com/questions/661881/the-string-3-18-09-1016-pm-is-not-a-valid-allxsd-value/661898#661898)

它最有可能与以非预期格式存储的日期以及来自不以 xml 规范预期格式的文章之一有关。所以我希望如果我手动修改存储的日期，我可以让它正确反序列化。

如何使用`XmlSerializer`.

请参阅下面的复制和粘贴代码：

```
public class GuestUserLinkItemActivity
{
public DateTime ActivityDateTime { get; set; }
    public string ActivityMessage { get; set; }
} 
```

序列化器类：

```
public static class Serializer
{

    public static T DeSerialise<T>(string contentsToDesrialise)
    {
        if (string.IsNullOrEmpty(contentsToDesrialise))
            return default(T);

        var xmlSer = new XmlSerializer(typeof(T));
        var stream = new MemoryStream();
        var sw = new StreamWriter(stream);
        sw.Write(contentsToDesrialise);
        sw.Flush();
        stream.Position = 0;
        var obj = (T)xmlSer.Deserialize(stream);
        sw.Close();
        stream.Close();
        return obj;
    }

    public static string Serialise<T>(T obectToSerialise)
    {
        var ms = new MemoryStream();
        var sr = new XmlSerializer(typeof(T));
        sr.Serialize(ms, obectToSerialise);
        ms.Position = 0;
        var sread = new StreamReader(ms);
        var serialisedObjectString = sread.ReadToEnd();
        sread.Close();
        ms.Close();
        return serialisedObjectString;
    }
} 
```

用法：

```
var guestHistoryList = new List<GuestUserLinkItemActivity>();
guestHistoryList.Add(new GuestUserLinkItemActivity(){
                         ActivityDateTime = DateTime.Now, 
                         ActivityMessage = "Invitation email sent to guest."}
);

var serialisedArray = Serializer.Serialise<GuestUserLinkItemActivity[]>(guestHistoryList.ToArray());
var deserialisedObject = Serializer.DeSerialise<GuestUserLinkItemActivity[]>(serialisedArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:18:25.293

不要尝试序列化/反序列化数组，而是尝试使用 `List<GuestUserLinkItemActivity>`- 它对我有用：

```
var serialisedArray = Serializer.Serialise<List<GuestUserLinkItemActivity>>(guestHistoryList);
var deserialisedObject1 = Serializer.DeSerialise<List<GuestUserLinkItemActivity>>(serialisedArray); 
```

# c - Sqlite 访问 db 函数

> ID：15251575
> 
> 赞同：0
> 
> 时间：2013-03-06T15:38:03.447
> 
> 标签：c, xcode, sqlite

我正在使用函数 sqlite3_prepare_v2 访问数据库，但它不返回 SQLITE_ERROR（[http://www.sqlite.org/c3ref/c_abort.html](http://www.sqlite.org/c3ref/c_abort.html)）。我尝试使用另一个数据库，它没关系。我做了一个新的db(with navicat) 函数返回 SQLITE_ERROR...代码没问题，问题与 db 有关。我想用命令行创建新的 db，但保存在哪里？有什么建议吗？

# c++ - C++ 的除法和 cout 问题

> ID：15251579
> 
> 赞同：1
> 
> 时间：2013-03-06T15:38:16.327
> 
> 标签：c++, floating-point, double, cout

我正在做计算机科学的作业。我们必须制定一个击球率计划。我让它工作，以便它可以计算安打、出局、单打等，但是当它计算击球率时，它会得到 0.000。我不知道为什么，我已经进行了大量的谷歌搜索，尝试将变量设为 double 和 float 等。这是代码：

```
#include <iostream>
#include <iomanip>
#include <cstdlib>

using namespace std;

int main(){
const int MAX_TIMES_AT_BAT = 1000;
int hits = 0, timesBatted = 0, outs = 0, walks = 0, singles = 0, doubles = 0, triples = 0, homeRuns = 0;
float battingAverage = 0.0, sluggingPercentage = 0.0;

for(int i = 0; i < MAX_TIMES_AT_BAT; i++){
    int random = rand() % 100 +1;

    if(random > 0 && random <= 35){ 
        outs++;
    }else if(random > 35 && random <= 51){
        walks++;
    }else if(random > 51 && random <= 71){
        singles++;
        hits++;
    }else if(random > 71 && random <= 86){
        doubles++;
        hits++;
    }else if(random > 86 && random <= 95){
        triples++;
        hits++;
    }else if(random > 95 && random <= 100){
        homeRuns++;
        hits++;
    }else{
        cout << "ERROR WITH TESTING RANDOM!!!";
        return(0);
    }
    timesBatted++;
}
    cout << timesBatted << " " << hits << " " << outs << " " << walks << " " << singles << " " << doubles << " " << triples << " " << homeRuns << endl;

battingAverage = (hits / (timesBatted - walks));
sluggingPercentage = (singles + doubles * 2 + triples * 3 + homeRuns*4) / (timesBatted - walks);

cout << fixed << setprecision(3) << "Batting Average: " << battingAverage << "\nSlugging Percentage: " << sluggingPercentage << endl;

return 0;
} 
```

任何帮助都会很棒！怎么了？？？我计算了一下，安打率应该是0.5646，重击率应该是1.0937。它的显示是 0.0000 和 1.0000。提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:39:49.383

您正在执行整数除法。将至少一个操作数显式转换为`double`. 例如：

```
battingAverage = (static_cast<float>(hits) / (timesBatted - walks)); 
```

分配给`sluggingPercentage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:40:17.017

简单的除以`int`an`int`就是 another `int`。只需投一个到`double`.

例如，

```
battingAverage = static_cast<double>(hits) / (timesBatted - walks)
sluggingPercentage = static_cast<double>(singles + doubles * 2 + triples * 3 + homeRuns*4) / (timesBatted - walks) 
```

始终使用 C++ casts ( `static_cast<double>()`) 而不是 C casts `(double)()`，因为编译器会在您做错事时为您提供更多提示。

PS 不要讨厌 C++！:( 给它一点爱，它会爱你！

# wpf - 拆分页面并在 WPF 中导航

> ID：15251581
> 
> 赞同：0
> 
> 时间：2013-03-06T15:38:24.977
> 
> 标签：wpf

我正在尝试创建一个 WPF 页面项目，其中我将屏幕一分为二。在左侧，我有四个可点击的链接/按钮。

单击其中一个链接会在屏幕右侧打开相应的页面。在那里，可以设置选项。当用户使用屏幕顶部的导航栏时，它应该只应用在右侧。

这可能吗？什么是更好的方法？

我想知道如何告诉页面（部分）要加载哪个页面。那么这会使正确的页面动态吗？

分开会更好`Grid`吗？或者会`DockPanel`是一个更好的解决方案？

我`Window`在 WPF 中创建了一个大页面，但我想将所有这些页面拆分成一个有用的导航`Page`。所以我在使用 WPF 和 XAML 方面有一点经验。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:18:52.843

首先你需要确定你想要的组件，主要我看到三个组件，LeftSide 导航窗格、TopSide 导航窗格和 MainContent 窗格。首先让我们谈谈 MainContent 窗格，我认为这样做的最佳方法是使用绑定和日期模板来动态制作它。在您的 ViewModel 或 DataContext 中，您需要有一个属性来表示要在 MainContent 中显示的内容，让我们调用它`MainContent`，然后 MainContent 视图可以是 a`ContentControl`并将属性`Content`绑定设置为 ViewModel`MainContent`财产。这样，您只需为要显示的每个类项设置 DataTemplate。其他方式可能是使用选项卡控件并更改 ControlTemplate，这种方式不是动态的，因为您需要预定义将显示的所有内容。

现在，对于导航窗格，您可以使用任何控件，例如，您可以使用单选按钮并更改 ControlTemplate，并在视图模型中创建逻辑，例如使用命令。

现在，使用`Grid`or`DockPanel`取决于您希望应用程序做什么。如果你想要一个动态宽度，你应该使用 a`Grid`和 a `GridSplitter`，但是如果你想要固定宽度，你可以使用 a `DockPanel`due 它比`Grid`.

希望这个答案有所帮助，不要混淆。如有疑问请反馈。

* * *

**编辑**

例如，在视图模型中：

```
public class MainViewModel:INotifyPropertyChanged
{
    public object Content {get; set;}    //Here you must to raise the PropertyChanged event
    private ICommand _showSummaryCommand
    public ICommand ShowSummaryCommand
    {
         get { return new _showSummaryCommand ?? (_showSummaryCommand = new SomeCommandImplementation((sender,e)=>{Content = new SummaryViewModel()},true))}    //most of commands implementations recive two parameters, an delegate to execute and a bool delegate for can excecute
    }
} 
```

对于视图，在一些资源字典中：

```
<DataTemplate TargetType="{x:Type ViewModels:SummaryViewModel}">
    <DataGrid>
        <!--Here goes what ever you want to show for instace-->
        <TextBlock x:Name="descriptionText" Text={Binding Description}/>
    </DataGrid>
</DataTemplate> 
```

并在您将显示所有内容的地方

```
<!--....-->
    <ContentControl Content={Binding Content}/>
<!--....--> 
```

希望这段代码能帮助更多:)

# php - 是否可以从 DateInterval 对象中获取“interval_spec”字符串？

> ID：15251587
> 
> 赞同：5
> 
> 时间：2013-03-06T15:38:42.113
> 
> 标签：php, string, dateinterval

假设我有这个 DateInterval 的对象实例：

```
$obj=new DateInterval("P1Y12D"); 
```

现在我可以用那个`$obj`实例做一些漂亮的事情，但是说我想`"P1Y12D"`从对象中取出那个字符串，是否可以直接而不需要重写类？

我没有找到解决这个问题的方法，也许你找到了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-18T20:41:33.927

这是我的[@Yaslaw](https://stackoverflow.com/users/2156231/yaslaw) [代码](/a/15335379/1056679)版本。

它根据当前的 PHP 社区和 PSR 要求进行了改进。我还尝试使它更具可读性和直截了当。

```
/**
 * @param \DateInterval $interval
 *
 * @return string
 */
function dateIntervalToString(\DateInterval $interval) {

    // Reading all non-zero date parts.
    $date = array_filter(array(
        'Y' => $interval->y,
        'M' => $interval->m,
        'D' => $interval->d
    ));

    // Reading all non-zero time parts.
    $time = array_filter(array(
        'H' => $interval->h,
        'M' => $interval->i,
        'S' => $interval->s
    ));

    $specString = 'P';

    // Adding each part to the spec-string.
    foreach ($date as $key => $value) {
        $specString .= $value . $key;
    }
    if (count($time) > 0) {
        $specString .= 'T';
        foreach ($time as $key => $value) {
            $specString .= $value . $key;
        }
    }

    return $specString;
} 
```

* * *

这是初始`\DateInterval`类的扩展：

```
class CustomDateInterval extends \DateInterval
{
    public function __toString()
    {
        // Reading all non-zero date parts.
        $date = array_filter(array(
            'Y' => $this->y,
            'M' => $this->m,
            'D' => $this->d
        ));

        // Reading all non-zero time parts.
        $time = array_filter(array(
            'H' => $this->h,
            'M' => $this->i,
            'S' => $this->s
        ));

        $specString = 'P';

        // Adding each part to the spec-string.
        foreach ($date as $key => $value) {
            $specString .= $value . $key;
        }
        if (count($time) > 0) {
            $specString .= 'T';
            foreach ($time as $key => $value) {
                $specString .= $value . $key;
            }
        }

        return $specString;
    }
} 
```

它可以这样使用：

```
$interval = new CustomDateInterval('P1Y2M3DT4H5M6S');

// Prints "P1Y2M3DT4H5M6S".
print $interval . PHP_EOL; 
```

* * *

我希望它会帮助别人，干杯！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T09:44:55.640

您可以使用 format() 函数：

```
echo $obj->format('P%yY%mM%dDT%hH%iM%sS'); 
```

或者更好的可读版本（字符串中没有零值）：

```
function getSpecString(DateInterval $delta){
    //Read all date-parts there are not 0
    $date = array_filter(array('Y' => $delta->y, 'M' => $delta->m, 'D' => $delta->d));
    //Read all time-parts there are not 0
    $time = array_filter(array('H' => $delta->h, 'M' => $delta->i, 'S' => $delta->s));

    //Convert each part to spec-Strings
    foreach($date as $key => &$value) $value = $value.$key;
    foreach($time as $key => &$value) $value = $value.$key;

    //Create date spec-string
    $spec = 'P' . implode('', $date);            
    //add time spec-string
    if(count($time)>0) $spec .= 'T' . implode('', $time);
    return $spec;        
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:50:37.137

我不是 C 大师，但在构造函数的源代码中，该值似乎根本没有存储：

```
/* {{{ proto DateInterval::__construct([string interval_spec])
   Creates new DateInterval object.
*/
PHP_METHOD(DateInterval, __construct)
{
    char *interval_string = NULL;
    int   interval_string_length;
    php_interval_obj *diobj;
    timelib_rel_time *reltime;
    zend_error_handling error_handling;

    zend_replace_error_handling(EH_THROW, NULL, &error_handling TSRMLS_CC);
    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &interval_string, &interval_string_length) == SUCCESS) {
        if (date_interval_initialize(&reltime, interval_string, interval_string_length TSRMLS_CC) == SUCCESS) {
            diobj = zend_object_store_get_object(getThis() TSRMLS_CC);
            diobj->diff = reltime;
            diobj->initialized = 1;
        } else {
            ZVAL_NULL(getThis());
        }
    }
    zend_restore_error_handling(&error_handling TSRMLS_CC);
}
/* }}} */ 
```

似乎都没有执行此`date_interval_initialize()`功能：

```
static int date_interval_initialize(timelib_rel_time **rt, /*const*/ char *format, int format_length TSRMLS_DC)
{
    timelib_time     *b = NULL, *e = NULL;
    timelib_rel_time *p = NULL;
    int               r = 0;
    int               retval = 0;
    struct timelib_error_container *errors;

    timelib_strtointerval(format, format_length, &b, &e, &p, &r, &errors);

    if (errors->error_count > 0) {
        php_error_docref(NULL TSRMLS_CC, E_WARNING, "Unknown or bad format (%s)", format);
        retval = FAILURE;
    } else {
        if(p) {
            *rt = p;
            retval = SUCCESS;
        } else {
            if(b && e) {
                timelib_update_ts(b, NULL);
                timelib_update_ts(e, NULL);
                *rt = timelib_diff(b, e);
                retval = SUCCESS;
            } else {
                php_error_docref(NULL TSRMLS_CC, E_WARNING, "Failed to parse interval (%s)", format);
                retval = FAILURE;
            }
        }
    }
    timelib_error_container_dtor(errors);
    return retval;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:58:09.853

没有内置功能可以做到这一点，您必须自己创建一个。如果您不想覆盖 DateInterval，请尝试使用静态方法：

```
class DateIntervalUtils{
    public static function getSpecString(DateInterval $i){
         $stat ="P";
         foreach($i as $key=>$value){
            if($key !=="days"){
               if($key=="h"){
                  $stat.="T";
               }
               $stat.=$value.upper($key);
             }
          }
          return $stat;
      }
  } 
```

如果要添加功能（比较等），可以添加。

# javascript - 在不使用 eval 的情况下向 JSON 添加函数

> ID：15251594
> 
> 赞同：0
> 
> 时间：2013-03-06T15:39:03.083
> 
> 标签：javascript, json, eval

是否可以在不使用 eval 的情况下制作这样的东西？

```
foo1 = {"x": 4};
foo2 = {"x": "someFunc(foo1.x)"};

someFunc(var1)
{
    return (var1 + 1);
}

alert(foo1.x); // 4
alert(foo2.x); // 5 (hopefully) 
```

其实这是两个问题。第一个是执行一个函数，第二个是不带括号执行，因为在循环中我不知道它是 foo2.x 还是 foo2.x()。

我能想到的最好的事情是在 JSON 对象中搜索表示函数的关键字，并使用开关列表来执行它们并将关键字替换为值。

缺点是每次发生变化时我都需要更新 JSON 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:42:01.740

你只需要一个普通的 javascript 对象：

```
var foo1 = {x: 4};
// we make foo2.x a function so it will dynamically update with foo1.x 's value
var foo2 = {x: function(){ 
    return someFunc(foo1.x);}
};

function someFunc(var1)
{
    return (var1 + 1);
}

alert(foo1.x); // 4
alert(foo2.x()); // 5 
```

如果您需要将这些对象作为 JSON 传递，您可以使用`JSON.stringify`将对象传递给服务器。

JSON 不是动态的，它是一种传递数据的语言。您应该在操作数据时将数据表示为一个对象，然后如果需要发送它，可以随时将其转换为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:43:08.930

JSON 没有内置的函数类型。

您的选择：

*   eval（这是邪恶的）
*   将您的函数预加载到您的页面上（例如，作为对象上的方法），然后在 JSON 中传递函数的名称。（然后您可以调用`myObject[function_name_as_string_from_json](foo, bar)`
*   为它编写一个 DSL 和一个 JS 解析器（如果你的函数以简单的方式变化）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:44:29.913

不是以任何直接的方式。想象一下任何可能做到这一点的算法。那么算法就没有直接的方法来区分这些数据：

```
foo1 = {"x": "someFunc(foo2.x)"};
foo2 = {"x": "someFunc(foo1.x)"};

function someFunc(var1) {
    return (var1 + 1);
} 
```

很难想出一种算法来阻止这个无限循环，或者一个不那么直接的循环。

# ios - 动态文本 UITableViewCell 高度 属性文本

> ID：15251596
> 
> 赞同：2
> 
> 时间：2013-03-06T15:39:09.670
> 
> 标签：ios, objective-c, uitableview

我有以下代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath     *)indexPath {
SectionController *sectionController = [_sectionAndRowControllers objectAtIndex:indexPath.section];
return [[sectionController rowControllerForRow:indexPath.row] heightForRowInInterfaceOrientation:self.interfaceOrientation];
} 

- (CGFloat)heightForRowInInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAXFLOAT);

CGSize size = [[self descriptionString] sizeWithFont:_descriptionLabelFont constrainedToSize:constraint];

CGFloat height = MAX(size.height, kMinCellHeight);

return height + (CELL_CONTENT_MARGIN * 2);
} 
```

我遇到的问题是某些单元格有很多额外的填充。我怀疑这是因为我有“\n”字符来表示内容中的逻辑中断。我在这个问题上尝试了许多不同的方法和帖子，但我无法弄清楚为什么我有额外的空间。在某些情况下，额外的空间非常明显。

# asp.net - 在网站上记录错误的最佳方法

> ID：15251597
> 
> 赞同：0
> 
> 时间：2013-03-06T15:39:17.530
> 
> 标签：asp.net, error-handling, web

我正在构建使用 ASP.NET、MS-SQL 和 AJAX 的网站。我想知道，在整个网站中记录错误的最佳方法是什么？

我在想的只是创建一些全局日志类（可从整个应用程序访问）并使用 asp.net 中的 try catch 块将错误记录到“asperror.txt”文件中。

这是跟踪错误的好方法吗？也许有一些更好的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:41:37.227

我的拙见，而不是重新发明轮子，是使用[ELMAH](https://code.google.com/p/elmah/)，它在 ASP.NET 中非常好且易于配置。

它允许登录到数据库、文件、电子邮件等。它捕获所有未处理的异常，甚至允许您通过网页查看最后 X（某些缓冲区可用，我相信是 500）数量的消息。如果您想订阅它，它甚至还有一个 RSS 提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:41:24.237

使用[ELMAH](http://nuget.org/packages/elmah/)：

> 带有初始配置的 ELMAH，可快速入门。ELMAH（错误记录模块和处理程序）是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。

# node.js - 获取字段不是特定字符串的文档

> ID：15251601
> 
> 赞同：1
> 
> 时间：2013-03-06T15:39:31.677
> 
> 标签：node.js, mongodb, database

我想从 MongoDB 中获取**没有**该字段的文档`"name":"John"`（只是一个示例）。

我怎样才能做到这一点？

为了获取具有`"name":"John"`我使用的字段的文档：

```
db.col.find({"name":"John"}) 
```

我已经试过了`...find(!{"name":"John"})`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:43:53.487

```
db.col.find({"name":{$ne: "John"}}) 
```

应该可以，这里有文档：[Mongo，Advanced Queries。](http://docs.mongodb.org/manual/reference/operators/#AdvancedQueries-%24ne)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:48:54.637

只需像这样使用`$ne`选择器：

```
db.col.find({"name":{$ne:"John"}}) 
```

[http://docs.mongodb.org/manual/reference/operator/ne/#_S_ne](http://docs.mongodb.org/manual/reference/operator/ne/#_S_ne)

# python - 如何在python中读取和划分文件的各个行？

> ID：15251602
> 
> 赞同：0
> 
> 时间：2013-03-06T15:39:31.633
> 
> 标签：python, file, buffer

感谢stackoverflow，我能够读取和复制文件。但是，我需要一次读取一个图片文件，并且缓冲区数组不能超过 3000 个整数。我将如何分隔行，阅读它们，然后复制它们？这是执行此操作的最佳方法吗？

这是我的代码，由@Chayim 提供：

```
import os
import sys
import shutil
import readline

source = raw_input("Enter source file path: ")
dest = raw_input("Enter destination path: ")

file1 = open(source,'r')

if not os.path.isfile(source):
    print "Source file %s does not exist." % source
    sys.exit(3)
    file_line = infile.readline()

try:
    shutil.copy(source, dest)

    infile = open(source,'r')
    outfile = open(dest,'r')

    file_contents = infile.read()
    file_contents2 = outfile.read()

    print(file_contents)
    print(file_contents2)

    infile.close()
    outfile.close()

except IOError, e:
    print "Could not copy file %s to destination %s" % (source, dest)
    print e
    sys.exit(3) 
```

我添加了 file_line = infile.readline() 但我担心 infile.readline() 将返回一个字符串，而不是整数。另外，我如何限制它处理的整数数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:52:31.230

I think you want to do something like this:

```
infile = open(source,'r')

file_contents_lines = infile.readlines()

for line in file_contents_lines:
    print line 
```

This will get you all the lines in the file and put them into a list containing each line as an element in the list.

Take a look at the [documentation](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects) here.

# windows-8 - 从 Property Changed handler Store App 调用 MessageDialog

> ID：15251603
> 
> 赞同：0
> 
> 时间：2013-03-06T15:39:33.430
> 
> 标签：windows-8, windows-store-apps, unauthorizedaccessexcepti, messagedialog

我正在尝试调用`MessageDialog`处理`PropertyChanged`程序。第一次调用总是成功的，但是当`Dialog`第二次调用时，我得到一个`UnauthorizedAccessException`.

我试图将调用包装在 a 中`Dispatcher`，但我得到了相同的行为。

这是代码（的片段`MainPage.xaml.cs`）：

```
void PropertyChanged(object sender, PropertyChangedEventArgs e)
{
  await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
  {
    showMessage("Message", "Title");
  });
}

async void showMessage(String message, String title)
{
  MessageDialog dialog = new MessageDialog(message, title);
  await dialog.ShowAsync();
} 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:26:19.907

我认为您的问题是多个属性更改会导致多次调用显示对话框。您一次只应该显示一个对话框：

```
bool _isShown = false;
async void showMessage(String message, String title)
{
    if (_isShown == false)
    {
        _isShown = true;

        MessageDialog dialog = new MessageDialog(message, title);
        await dialog.ShowAsync();

        _isShown = false;
    }
} 
```

# php - preg_replace 字符串与数组

> ID：15251606
> 
> 赞同：1
> 
> 时间：2013-03-06T15:39:39.027
> 
> 标签：php, regex, parsing

好的，所以我的问题很简单。我希望答案也是。假设我有以下 php 字符串：

```
<!DOCTYPE html>
<html>
<head>
    <title>test file</title>
</head>
<body>
    <div id="dynamicContent">
        <myTag>PART_ONE</myTag>
        <myTag>PART_TWO </myTag>
        <myTag> PART_THREE</myTag>
        <myTag> PART_FOUR </myTag>
    </div>
</body>
</html> 
```

假设这是 $content。现在，您可以看到我有 4 个自定义标签 (myTag)，其中包含一个单词的内容。（PART_ONE、PART_TWO 等）我想用 4 个不同的字符串替换这 4 个。后面的 4 个字符串在一个数组中：

```
$replace = array("PartOne", "PartTwo", "PartThree", "PartFour"); 
```

我这样做了，但没有成功：

```
$content = preg_replace("/<myTag>(.*?)<\/myTag>/s", $replace, $content); 
```

因此，我想搜索 myTags（它找到 4 个）并将其替换为数组的一个条目。第一次出现应替换为 $replace[0]，第二次应替换为 $replace[1]，依此类推。然后，它将以字符串（而不是数组）的形式返回“新”内容，以便我可以进一步使用它解析。

我应该如何意识到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:49:03.020

像下面这样的东西应该可以工作：

```
$replace = array("PartOne", "PartTwo", "PartThree", "PartFour");
if (preg_match_all("/(<myTag>)(.*?)(<\/myTag>)/s", $content, $matches)) {
    for ($i = 0; $i < count($matches[0]); $i++) {
        $content = str_replace($matches[0][$i], $matches[1][$i] . $replace[$i] . $matches[3][$i], $content);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:54:36.053

一种方法是循环遍历要替换的数组中的每个元素；`myTag`用or替换`myDoneTag`你完成的每一个单词，这样你就可以找到下一个。然后你总是可以放回`myTag`最后，你有你的字符串：

```
for(ii=0; ii<4; ii++) {
    $content = preg_replace("/<myTag>.*<\/myTag>/s", "<myDoneTag>".$replace[ii]."<\/myDoneTag>", $content, 1);
}
$content = preg_replace("/myDoneTag/s", "myTag", $content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:07:32.813

使用正则表达式，你可以这样：

```
$replaces = array('foo','bar','foz','bax');
$callback = function($match) use ($replaces) {
        static $counter = 0;
        $return = $replaces[$counter % count($replaces)];
        $counter++;
        return $return;
};
var_dump(preg_replace_callback('/a/',$callback, 'a a a a a ')); 
```

但实际上，在 html 或 xml 中搜索标签时，您需要一个解析器：

```
$html = '<!DOCTYPE html>
<html>
<head>
    <title>test file</title>
</head>
<body>
    <div id="dynamicContent">
        <myTag>PART_ONE</myTag>
        <myTag>PART_TWO </myTag>
        <myTag> PART_THREE</myTag>
        <myTag> PART_FOUR </myTag>
    </div>
</body>
</html>';

$d = new DOMDocument();
$d->loadHTML($html);
$counter = 0;
foreach($d->getElementsByTagName('mytag') as $node){
        $node->nodeValue = $replaces[$counter++ % count($replaces)];
}
echo $d->saveHTML(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-06T15:45:20.627

这应该是您正在寻找的语法：

```
$patterns = array('/PART_ONE/', '/PART_TWO/', '/PART_THREE/', '/PART_FOUR/');
$replaces = array('part one', 'part two', 'part three', 'part four');

preg_replace($patterns, $replaces, $text); 
```

但请注意，这些是按顺序运行的，因此如果“PART_ONE”的文本包含随后将被替换的文本“PART_TWO”。

# c++ - 在受保护的方法中提升线程函数

> ID：15251609
> 
> 赞同：0
> 
> 时间：2013-03-06T15:39:49.277
> 
> 标签：c++, class, boost

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:41:11.753

因为`workerFunc`是成员函数，所以你必须将它绑定到线程。

```
boost::thread workerThread(&Base::workerFunc, this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:52:14.063

The cause of the error is that to take the address of the member function you need to say `&Base::workerFunc`

Once you fix that you'll get another error, which is that a non-static member function can't be called without an object, so you need to pass an object (or pointer to an object) to the `thread` constructor:

```
boost::thread workerThread(&Base::workerFunc, this); 
```

This tells the `thread` object to create a new thread and then run `this->workerFunc()`, so that should work now.

If the function had arguments you would pass them after the `this` parameter:

```
boost::thread workerThread(&Base::workerFunc, this, arg1, arg2); 
```

# oop - 您将如何为阅读/关注系统建模？

> ID：15251614
> 
> 赞同：0
> 
> 时间：2013-03-06T15:40:14.637
> 
> 标签：oop, model, domain-driven-design

所以我有以下域模型：

`Article`这基本上是一篇博客文章，目前是一个实体。

现在，我想添加以下功能：

*   当用户（在其浏览器中）查看文章时，会进行 api 调用以将博客文章“标记”为正在阅读。

> 现在，如果我进行一些计算，我应该能够确定哪些文章还没有被阅读。

*   当用户对一篇文章发表评论时，会进行一个 api 调用以将博客文章“标记”为被关注。

> 现在，如果我进行一些计算，我应该能够确定自最新用户发表评论以来是否有一些新发表的评论。

基本上，两个功能（阅读和关注）共享属性、文章 ID、用户 ID 和阅读/操作日期。

请注意，如果关注文章，然后阅读，则应使用阅读日期。

因此，我虽然可以使用相同的对象并添加额外的属性来将其标记为如下。

你有什么设计想法吗？

请注意，有很多文章和用户，我使用的是 Doctrine2 和 MySQL，但这适用于任何语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:12:34.107

为了确保您的应用程序能够很好地扩展，我会在触发事件时在本地进行计算。即，某人添加了一条评论，它会导致系统检查谁对该新评论进行了投资。否则，您最终会得到一个处理所有数据的计划任务，该任务一开始会运行良好，但随着用户、文章和评论之间的关系增加，工作量将呈指数级增长。

您还可以考虑使用 Map/Reduce 模式，[Ayende](http://ayende.com/blog/4435/map-reduce-a-visual-explanation)对此有一篇很好的介绍文章，它几乎与您描述的应用程序领域相同（文章、评论等）。

至于将文章或评论标记为已被特定用户阅读的事件，这既不是文章也不是用户的事情。如果您正在使用文档数据库并希望针对用户存储这些数据，那么随着时间的推移它可能会积累大量数据，我更倾向于将数据存储在新实体中或针对文章（从理论上讲，这将引起最初的兴趣，他们的兴趣下降到代表它的受欢迎程度的水平。

希望其中一些可能会有所帮助。

# javascript - 如何通过在 HTML 中使用另一个组合框来控制组合框

> ID：15251617
> 
> 赞同：0
> 
> 时间：2013-03-06T15:39:56.413
> 
> 标签：javascript, html, ajax

我的 HTML 表单中有 4 个组合框。前 2 个是区域和子区域。另外 2 个是类型和子类型。我想使用数据库值填充组合框。我已经填写了第一个组合框，即区域 ID，但是之后当我选择特定区域时，然后根据该值我想填充子区域组合框。我不能只在 PHP 中做到这一点。我是 JavaScript 和 Ajax 的新手。你能帮帮我吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:48:58.940

事实上，很多人以前都解决过这个问题。它经常被称为“依赖”或“相关”或“级联”选择框/组合框。这是一个谷歌搜索，为您提供一些 javascript 插件（使用优秀的[jQuery 库](http://jquery.com/)）：[https ://www.google.com/search?hl=en&q=jquery+dependent+select&oq=jquery+dependent+select](https://www.google.com/search?hl=en&q=jquery+dependent+select&oq=jquery+dependent+select)

此外，这个问题右侧的“相关问题”看起来与您的情况相当相关，请尝试阅读其中一些。

请注意，[常见问题解答](https://stackoverflow.com/faq#questions)鼓励问题符合一项或所有标准

*   一个特定的编程问题
*   软件算法软件工具
*   程序员常用的实用的、可回答的问题
*   编程职业独有

正如 mustafa.0x 指出的那样，您的问题过于宽泛，不包括具体问题。尝试使用插件，或研究一些非 jQuery 解决方案，如果您遇到麻烦，请针对您遇到的具体问题发布另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T16:27:08.633

我在 javascript 中使用了一个事件，然后我可以从中检索正在使用的 id，但遗憾的是无法将其导入 php。

` * 部门名称

```
<select name = "dept_type" id = 'new_jobdep_id' onchange = 'clickSelect(this.value)' class= "form-control" required>
       <option value = "" selected>-----Select Department---</option>

     <?php 

           $sql_in = mysql_query('Select * from department where DeptStatus = 1');

                while ($r = mysql_fetch_assoc($sql_in)){
                     $depID = $r['DeptID'];
                     $depName = $r['DeptName'];

                    $depName = ucwords($depName);

        ?>
               <option value = <?php echo $depID; ?>  required><?php echo $depName; ?> </option>
         <?php
                }
        ?>
  </select>` 
```

希望这段代码能给你一个很好的逻辑。

请..回答这个问题..我只想获取下面选择语句的值，然后通过将检索ID从php插入到我的查询中，使其作为对另一个组合框的引用..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T15:42:07.133

This is a broad design question, but you'll need to attach an event to the combo box, so when an item is selected, you execute an AJAX request which retrieves the sub-items of the selected item.

# php - 如何使学说不要尝试更新表？

> ID：15251619
> 
> 赞同：0
> 
> 时间：2013-03-06T15:40:26.907
> 
> 标签：php, oracle, view, doctrine, doctrine-1.2

我正在开发一个项目，我们使用视图在另一个系统之间创建接口/层，该系统是数据源但没有匹配的模型。这样，在我的系统中，这些视图实际上就是模型。到目前为止，一切都运行良好，除了这一部分：

```
-------------------------------
|Table    |Table        |View |
-------------------------------
|Order  > |OrderItem  > |Item |
-------------------------------

Relation: Order (has many)> OrderItem (has many)> Item. 
```

我最近遇到了一个问题，它试图保存表的整个关系集（顺序）。系统应该保存订单及​​其项目（订单项目）。但不知何故，保存最终会在作为视图的项目模型上发生更新并返回此错误，显然：

代码：

```
$order->save(); 
```

错误：

```
Data manipulation operation not legal on this view : UPDATE ITEM (...) 
```

有没有办法跟踪它，强制它不发生，或者将它设置为只读模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:38:13.980

当视图由来自不同表的元素组成时，mysql会发生此错误。

如果您从同一个表中编辑列，则可以，但如果同一查询尝试编辑不同表的列，则会出现错误。

你还在使用 Doctrine 1.2 吗？我认为在 Doctrine 中使用视图很棘手[Link](http://www.doctrine-project.org/blog/using-views-with-doctrine.html)

此外，错误可能来自您在实体上声明关系的方式：

拥有：订购多对多 OrderItem 多对一商品。

您应该确保 OrderItem > Item 的关系是[单向](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#many-to-one-unidirectional)的，并且 OrderItem 是拥有方。

# android - 如何在 webview Android 上打开链接 http://facebook.com？

> ID：15251635
> 
> 赞同：1
> 
> 时间：2013-03-06T15:41:09.887
> 
> 标签：android

我尝试打开[http://facebook.com](http://facebook.com)但我的 webview 打开并显示链接[http://m.facebook.com](http://m.facebook.com)。

这是我的代码。

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.webview);

        webviewv=(WebView) findViewById(R.id.webView1);

        webviewv.setWebViewClient(new WebViewClient());

        webviewv.getSettings().setJavaScriptEnabled(true);

        webviewv.loadUrl("http://facebook.com");

} 
```

有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:53:39.727

您可能需要`User-Agent`为您的`WebView`. 网站使用它来区分客户端。

```
webviewv.getSettings().setUserAgentString("Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1"); 
```

# android - 获取帖子 ID 后，如何在 Android 上使用原生 Facebook 应用显示帖子？

> ID：15251636
> 
> 赞同：1
> 
> 时间：2013-03-06T15:41:11.710
> 
> 标签：android, facebook, facebook-android-sdk, android-facebook

我正在尝试开发一个使用 Graph API 与 Facebook 交互的 Android 应用程序。

我的计划是在获得帖子 ID 后在原生 Facebook 应用程序上显示原始帖子。我尝试将 URL 传递`www.facebook.com/[post_id]`给浏览器并成功显示该帖子。

有没有办法用原生 Facebook 应用程序做到这一点？我试过使用`fb://posts/[post_id]`，`fb://[post_id]`但都没有工作。

任何评论表示赞赏:)

# git - 混帐结帐。添加稀疏结帐排除的目录

> ID：15251638
> 
> 赞同：3
> 
> 时间：2013-03-06T15:39:57.043
> 
> 标签：git, sparse-checkout

在稀疏签出场景中，该命令`git checkout .`恢复应该被忽略的目录。这是设计使然，还是 Git 中的潜在问题？我`git checkout .`用来丢弃我对工作副本所做的任何更改——是否有另一个命令可以做同样的事情并且不会遇到这个问题？

这是一个可重现的示例：

```
rm -rf test
git init test
cd test
for f in a b c; do
  mkdir $f
  touch $f/$f
  git add $f/$f
  git commit -m "added $f"
done
git config core.sparsecheckout true
echo a > .git/info/sparse-checkout
echo b >> .git/info/sparse-checkout
git read-tree -m -u HEAD
ls 
```

> ```
> a b 
> ```

到现在为止还挺好。这是问题所在：

```
git checkout .
ls 
```

> ```
> a b c 
> ```

顺便一提：

```
git --version 
```

> ```
> git version 1.7.10.4 
> ```

问题[为什么排除的文件不断重新出现在我的 git sparse checkout 中？](https://stackoverflow.com/questions/11148579/why-do-excluded-files-keep-reappearing-in-my-git-sparse-checkout)是相关的，但年龄更大，并不能完全描述我所看到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T14:03:56.183

这不是设计使然。[Git 1.8.3](http://permalink.gmane.org/gmane.comp.version-control.git/224297)中的行为发生了[变化](https://git.coe.so/git/commit/?id=08d595dc1cdf6f0d8e6022a69c4fcdd2fba628cf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:30:56.313

我很确定这是设计使然。您正在积极地命令 git 创建所有这些文件，所以它会这样做。回到上次提交状态的正确命令是：

```
git reset --hard 
```

这也应该考虑到您的稀疏结帐设置。

# c++ - msvc 10 的 cmake + 预编译头文件 + 对象库有问题。或者是吗？

> ID：15251641
> 
> 赞同：1
> 
> 时间：2013-03-06T15:41:30.820
> 
> 标签：c++, cmake, visual-studio-2010

我有一个由 cmake 处理的巨大跨平台项目，其编译时间使用预编译头文件 (PCH) 和 cmake 调用的对象库来加快，这些对象库不过是对象文件的集合。

请注意，我负责在 MakeLists.txt 文件中将 PCH 和对象库设为可选，这很有趣，因为事实证明，使用 CMake 2.8.10.2（最新）和 msvc 10 RTM 同时打开这两个选项会触发“符号双定义”错误，在任何其他设置下都不会出现（其他选项与 MSVC10 组合或与 GCC 和 clang 的任何选项组合）

```
error LNK2005: "int `anonymous namespace'::defined_twice_if_msvc_plus_precompiled_headers_plus_object_library" (?defined_twice_if_msvc_plus_precompiled_headers_plus_object_library@?A0x57991313@@3HA) was already defined in common-header.obj C:\git\bug\build\common-header.obj  main 
```

代码（如下）非常简单：一个主入口点（main.cpp），一个源文件，可选地打包在一个 cmake 对象库中，（lib.cpp）其内容应该可以从入口点及其头文件（lib .hpp），一个可选预编译的通用头文件（common-header.hpp），最后是一个与预编译头文件对应的源文件（对于MSVC10的/Yc选项，对于GCC/Clang无用）。

所以我的问题是：

*   这段代码应该在标准下编译吗？我认为答案是肯定的。
*   如果是，问题是来自 CMake 还是 MSVC10？

谢谢

* * *

（可完全复制以下内容）

main.cpp 的内容：

```
#include "common-header.hpp"
#include "lib.hpp"

int main ()
{
} 
```

common-header.hpp 的内容：

```
#ifndef _INCL_COMMON_HEADER
#define _INCL_COMMON_HEADER

//variable inside anonymous namespace mimics the troublemaking code inside #include <boost/asio.hpp>
namespace {
    int defined_twice_if_msvc_plus_precompiled_headers_plus_object_library;
}
#endif 
```

lib.hpp 的内容：

```
//empty 
```

lib.cpp 的内容：

```
#include "common-header.hpp"
#include "lib.hpp" 
```

common-header.cpp 的内容：（仅 MSVC 预编译头文件需要）

```
#include "common-header.hpp" 
```

为 msvc 和 gcc 提供可选 PCH 和可选对象库的 CMakeLists 内容可在此处获得 ( [http://pastebin.com/BAdcpzMb](http://pastebin.com/BAdcpzMb) )

* * *

# svn - TeamCity：版本控制系统用户名设置

> ID：15251646
> 
> 赞同：0
> 
> 时间：2013-03-06T15:41:43.060
> 
> 标签：svn, version-control, teamcity

如何在团队城市中添加新的版本控制系统 (VCS) 用户名​​？

因为我是构建所有者，所以我在团队城市登录名和颠覆用户名中设置了我的用户名。

那么在添加新的版本控制系统用户名时我需要注意任何先决条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:20:06.857

You can [configure VCS roots](http://confluence.jetbrains.com/display/TCD7/Configuring+VCS+Roots) with whatever username/password you choose. Some roots, such as SVN and Git, even allow you to use SSH keys.

You can not, however, use TeamCity to create a new SVN user. That must be done at the SVN server.

**EDIT:** You can test the connection to SVN by clicking the `Test Connection` button at the bottom of the `Edit VCS Root` screen. If this indicates that the connection is successful, then you've set up your VCS authentication properly.

# javascript - HandlebarsJS 预编译模板中的空白

> ID：15251651
> 
> 赞同：3
> 
> 时间：2013-03-06T15:41:57.403
> 
> 标签：javascript, html, handlebars.js

我正在迁移我的一个项目以使用 HandlebarsJS 模板而不是下划线模板，我遇到了一个非常奇怪的问题。

我正在使用预编译的模板，并且在任何地方我都将渲染的模板附加到 DOM 我得到了一个空的文本元素，这导致了布局问题，用空白渲染代替了它们

查看 chrome 开发控制台显示附加到 div 的 3 个模板的以下标记：

```
> <div>
      ""
      <div><!--content --></div>
      ""
      <div><!--content --></div>
      ""
      <div><!--content --></div>
  </div> 
```

将父 div HTML 转储到 javascript 控制台时，根本没有任何空格，这很简单：

```
<div><!--content --></div><div><!--content --></div><div><!--content --></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:21:18.330

好的，现在已经解决了，根据对原始问题的评论，问题是在预编译期间添加的 \ufeff 字符，即使启用了可见的空白选项，我的 IDE 和开发者浏览器扩展也不会显示该字符。

为了解决这个问题，我更新了我的模板附加代码

```
$container.append(template({ *data* }).replace(/\ufeff/, '')); 
```

# android - NotifyDataSetChanged 在 ExpandableListView 中不起作用

> ID：15251658
> 
> 赞同：0
> 
> 时间：2013-03-06T15:42:04.887
> 
> 标签：android, listview, checkbox, invalidation, notifydatasetchanged

这是我的可扩展列表视图：

```
public class SnatchView extends ExpandableListView {
public SnatchAdt m_adt;

public FileBrowser fileBrowser;

public SnatchView(Context context) {
    super(context);
    m_adt = new SnatchAdt(context, this);
}

public SnatchView(Context context, AttributeSet attrs) {
    super(context);
    m_adt = new SnatchAdt(context, this);
}

public void start() {
    setAdapter(m_adt);
    m_adt.start();
    setBackgroundColor(SnatchAdt.clr_back);
    setGroupIndicator(null);// getResources().getDrawable(R.drawable.folder_icon)
}

public void edit() {
    m_adt.notifyDataSetChanged();
    m_adt.notifyDataSetInvalidated();
}

public String getChildPath(int group, int child) {
    return m_adt.getChildPath(group, child);
}

public boolean getChildDelete(int group, int child) {
    return m_adt.getChildDelete(group, child);
}

public void close() {
    m_adt.close();
}
} 
```

这是我的适配器中更相关的部分：

```
public class SnatchAdt extends BaseExpandableListAdapter implements ExpandableListAdapter {
private final String TAG = SnatchAdt.class.getSimpleName();

protected static int clr_back = 0xff356AA0;// 0xFFCCCCCC;

protected int clr_text = 0xffffffff;// 0xFF000044;

private SnatchView snatchView;

public class SnatchItem {
    public String m_path;

    public String m_name;

    public boolean toDelete = false;

    LinearLayout m_view;
}

public class SnatchGroup {
    private Vector<SnatchItem> m_items = new Vector<SnatchItem>();

    public SnatchItem get(int index) {
        return m_items.get(index);
    }

    public int get_count() {
        return m_items.size();
    }

    public void add_item(String path, String name, boolean toDelete) {

        final SnatchItem item = new SnatchItem();
        item.m_name = name;
        item.m_path = path;
        item.toDelete = toDelete;
        item.m_view = new LinearLayout(m_context);
        Bitmap myBitmap = BitmapFactory.decodeResource(m_context.getResources(), R.drawable.file_icon);

        ImageView v = new ImageView(m_context);
        v.setImageBitmap(myBitmap);

        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        lp.setMargins(50, 0, 0, 0);
        v.setLayoutParams(lp);
        final CheckBox cb = new CheckBox(m_context);
        cb.setPadding(10, 10, 10, 10);
        cb.setFocusable(false);
        cb.setFocusableInTouchMode(false);

        cb.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (cb.isChecked()) {
                    item.toDelete = true;
                    snatchView.smoothScrollBy(1, 1);
                } else {
                    item.toDelete = false;
                    snatchView.smoothScrollBy(1, 1);
                }
                // snatchView.invalidateViews();
                // notifyDataSetChanged();
                snatchView.edit();
                // snatchView.post(new Runnable() {
                // @Override
                // public void run() {
                // notifyDataSetChanged();
                // }
                // });
            }
        });

        TextView view = new TextView(m_context);
        view.setText(name);
        view.setBackgroundColor(clr_back);
        view.setTextSize(18);
        view.setTextColor(clr_text);
        view.setPadding(20, 0, 0, 0);
        item.m_view.addView(cb);
        item.m_view.addView(v);
        item.m_view.addView(view);
        item.m_view.setPadding(12, 20, 0, 20);
        item.m_view.setBackgroundColor(clr_back);
        m_items.add(item);
        item.m_view.setId(clr_back);
    }

    String m_path;

    LinearLayout m_view;
}

private Vector<SnatchGroup> m_groups = new Vector<SnatchGroup>();

private DataSetObserver m_obs;

private Context m_context;

private boolean canceling = false;

private Handler m_hand_ui = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if (m_groups != null) {
            m_groups.add((SnatchGroup) msg.obj);
        }
        if (m_obs != null) {
            m_obs.onChanged();
        }
        super.handleMessage(msg);
    }
};

private Thread m_thread = new Thread() {
    @Override
    public void run() {
        set_group_root();
    }
};

public SnatchAdt(Context ctx, SnatchView snatchView) {
    m_context = ctx;
    this.snatchView = snatchView;
}

private synchronized Object get_child(int groupPosition, int childPosition) {
    return m_groups.get(groupPosition).get(childPosition);
}

private synchronized String get_child_path(int groupPosition, int childPosition) {
    return m_groups.get(groupPosition).get(childPosition).m_path;
}
} 
```

现在它不会失效，只有在我移动列表视图之后。除非我移动列表视图，否则我调用的代码`snatchView.edit();`也不会被调用。有谁知道如何使该代码工作？我也尝试过调用 invalidate、notifyDataSetChanged、notifyDataSetInvalidated、在 runOnUIThread 或单独的线程中调用 notifyDataSetChange，但仍然没有运气。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-18T12:11:46.547

我已将 Expandable ListView 更改为普通 ListView，并在复选框上将焦点和 setEnabled 设置为 false

# javascript - 在 Javascript 中四舍五入到小数点后 2 位

> ID：15251659
> 
> 赞同：0
> 
> 时间：2013-03-06T15:42:07.460
> 
> 标签：javascript

我有一个下拉列表，它的值是小数点后 2 位。

```
<label for="delivery">Delivery:</label>
<select id="delivery" name="delivery">
    <option value="1.50">Fast</option>
    <option value="2.50">Medium</option>
    <option value="3.50">Slow</option>
</select> 
```

如何在 Javascript 中调用它，我知道我必须在下面一行的某处使用 toFixed(2)，但我不确定该放在哪里。

```
var delivery = parseInt($('#delivery').val()); 
```

另外，我会将它放在输出它的 div 中还是在计算中，或两者兼而有之？

约拿

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T15:44:04.533

不要使用`parseInt()`（因为它会杀死小数）。[`parseFloat()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)然后使用[`toFixed()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)：

```
 var delivery = parseFloat($('#delivery').val()).toFixed(2); 
```

**注意：**如果您对带有 的回合感兴趣，请`toFixed()`参考[此问题](https://stackoverflow.com/questions/566564/javascript-functions-math-roundnum-vs-num-tofixed0-and-browser-inconsistenci)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:44:27.700

怎么样

```
var delivery = parseFloat($('#delivery').val()).toFixed(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:44:29.240

采用

```
var delivery = parseFloat($('#delivery').val()).toFixed(2); 
```

# asp.net - 用户控件（ascx）中使用的asp.net自定义控件-如何捕获加载错误？

> ID：15251662
> 
> 赞同：1
> 
> 时间：2013-03-06T15:42:15.017
> 
> 标签：asp.net, .net, exception-handling, custom-controls

我有一个放置在用户控件（ascx）上的自定义控件。在加载自定义控件时发生错误。我想在用户控件（ascx）中“捕捉”这个错误。我怎么能这样做？

默认aspx：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.vb" Inherits="WebApplication1._Default" %>
<%@ Register src="WebUserControl1.ascx" tagname="WebUserControl1" tagprefix="uc1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server"><title></title></head>
<body><form id="form1" runat="server">
        <asp:Label runat="server" ID="test" Text="hello world"></asp:Label>
        <uc1:WebUserControl1 ID="WebUserControl11" runat="server" />
</form></body></html> 
```

WebUserControl1.ascx：

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="WebUserControl1.ascx.vb" Inherits="WebApplication1.WebUserControl1" %>
<%@ Register tagPrefix="test" namespace="WebApplication1" assembly="WebApplication1" %>
<test:MyControl runat="server" ID="test2" Text="test"></test:MyControl> 
```

WebUserControl1.ascx.vb：

```
Public Class WebUserControl1
    Inherits System.Web.UI.UserControl

    Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
        Try
            'Doesn't work!
            MyBase.OnLoad(e)
        Catch ex As Exception
            handleException(ex)
        End Try
    End Sub
    Private Sub Page_Error(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Error
        'Doesn't work!
        handleException(New Exception())
    End Sub
    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
   End Sub

    Private Sub handleException(ByVal ex As Exception)
        Me.Controls.Add(New LiteralControl("ex.tostring"))
    End Sub
End Class 
```

最后但同样重要的是：我的自定义控件：

我的控制.vb：

```
Public Class MyControl
    Inherits System.Web.UI.WebControls.Label

    Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
        Throw New Exception("")
        MyBase.OnLoad(e)
    End Sub
End Class 
```

我希望能够在 *.ascx 文件中捕捉到这个错误，这似乎是不可能的？或者是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:58:08.877

您不能拦截父控件中的 , 等`OnLoad`事件`OnInit`中引发的异常。`OnPreRender`

您可以尝试通过附加到`Page.Error`事件在 Page/UserControl 中执行此操作。

一个更好的选择是在事件处理程序的`global.asax`文件中添加一个全局错误处理程序。`Application_Error`

# performance - 如何测量 Excel 计算时间

> ID：15251663
> 
> 赞同：1
> 
> 时间：2013-03-06T15:42:15.640
> 
> 标签：performance, excel, excel-formula, processing-efficiency, array-formulas

例如，我怎样才能找到更快的公式？

```
=SUMPRODUCT((Data!D:D="RC Corp")*(Data!AD:AD="Expected Allowances / Provisions")) 
```

VS

```
=COUNTIFS(Data!D:D,"RC Corp",Data!AD:AD,"Expected Allowances / Provisions") 
```

Vs 将 2 个字段连接到一个新列中并做

```
 Z1 = D1&AD1
=Countif(Data!Z:Z,"RC CorpExpected Allowances / Provisions") 
```

与 VBA

```
Dim i as integer
Dim Total as integer
Total = 0 
i=0
While i < 1000 
    IF Range("D"&i).Value = "RC Corp" AND Range("AD"&i).Value = "Expected Allowances / Provisions" Then
Total = Total + 1
End If 
Wend
Range("$A$1").Value = Total 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:18:01.877

从 evocandy 的回答中醒来，我想出了这个基本代码。

```
time1 = Timer
Range("A1").Calculate ' Or the cell containing the Formula I want. OR use Sheets("Sheet1").Calculate for the calculation including concated columns
time2 = Timer

CalculationTime = Time2-Time1 
```

为了使其工作，我必须将示例数据隔离到新的空工作表并禁用 Excel 中的自动刷新，以确保它不会为任何其他计算计时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:00:47.343

在 VBA 中，您可以使用`Timer`.

放

```
time1 = Timer
'Your code
time2 = timer

totaltime = time2-time1 
```

# android - 如何从 PreferenceActivity 外部更改首选项的状态？

> ID：15251667
> 
> 赞同：6
> 
> 时间：2013-03-06T15:42:23.420
> 
> 标签：android, sharedpreferences, android-preferences

我的应用程序中有一些功能需要 android 版本 4.2+。因此，在我的主要活动中，我需要检查可用的操作系统功能并修改（启用/禁用）在我的`PreferenceActivity`.

以下代码无法从外部访问`PreferenceActivity`

```
ListPreference prefReport = (ListPreference)getPreferenceScreen().findPreference("pref_report");
prefDspProfile.setValue("0"); 
```

所以我的问题是如何从 PreferenceActivity 外部修改首选项项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:09:37.103

如果您隐式使用 PreferenceAcitivity，则您使用的是 SharedPreference 文件。因此，在 PreferenceAcitivity 之外，您可以访问 SharedPrefence 文件并对其进行更改。很快，这些更改将反映在您的 PreferenceActivity 上。

您需要 Context 来访问 SharedPreference。期待其他 simpleAcitivity 的 onCreate 方法。

*更新：* **使用这种方法，您无法启用/禁用项目。您可以更改它们的值或删除它们**

```
@Override
protected void onCreate(Bundle state){
   super.onCreate(state);

   // Restore preferences
   SharedPreferences settings = getPreferences(MODE);
   // Make sure we're running on Honeycomb or higher to use ActionBar APIs
   if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
      //change your setting here
      // We need an Editor object to make preference changes.
      // All objects are from android.context.Context
      SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
      SharedPreferences.Editor editor = settings.edit();
      editor.putBoolean("silentMode", mSilentMode);

      // Commit the edits!
      editor.commit();
   }

} 
```

其他方式，我认为更好更容易的是**提供替代资源**。您可以提供许多 xml 文件，这些文件根据 Android API 级别**使用资源限定符**定义您的应用程序设置。例如：v2、v17。

```
 res-v4
     setting.xml

 res-v17
     setting.xml -> This file can include specific Jelly Beans configs 
```

# c++ - Valgrind 在不应该的情况下报告竞争条件

> ID：15251670
> 
> 赞同：1
> 
> 时间：2013-03-06T15:42:28.713
> 
> 标签：c++, c, linux, valgrind, race-condition

我使用`helgrind`来自`Valgrind`. 但它报告了一个受锁保护的代码的竞争。错误地将其报告为`Valgrind`比赛条件，或者我错过了什么。代码如下。

```
 pthread_mutex_lock(&G_Memory->lock_array[pb->exp_lock_index]);

    pb->subtree_cost += b->subtree_cost;
    pb->interaction_synch += 1; // <--- race here (cost_zones.c:91)

    pthread_mutex_unlock(&G_Memory->lock_array[pb->exp_lock_index]); 
```

`Valgrind/Helgrind`报告以下

```
==29768== Possible data race during read of size 8 at 0x56bf8e0 by thread #4
==29768==    at 0x404C51: ComputeSubTreeCosts (cost_zones.c:91)
          ...................
==29768==  This conflicts with a previous write of size 8 by thread #1
==29768==    at 0x404C5F: ComputeSubTreeCosts (cost_zones.c:91)
          ................... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:46:27.550

从您在评论中描述的内容来看，您遗漏了一些东西。这里有一个竞争条件，因为线程使用不同的互斥锁。您的线程必须在此处使用相同的互斥锁，以便代码仅在它们获得唯一锁时执行。

# ios - 确定应用程序存储空间需求

> ID：15251675
> 
> 赞同：2
> 
> 时间：2013-03-06T15:42:52.943
> 
> 标签：ios, ipad, storage, hard-drive

我正在开发我的第一个 iPad 应用程序，我正在使用 CoreData 和一个 sqlite 数据库来进行一些持久性存储。有没有一种方法可以告诉我的应用程序（和数据库）在安装后将使用多少硬盘空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:05:00.373

当您在提交之前归档您的应用程序时，管理器中有一个按钮，显示“估计大小”。这将计算您完成的应用程序的大小。

![在此处输入图像描述](../Images/8a8b7445eb0f024129409314ce6436f8.png)

# java - 在语音命令上启动应用程序 (android)

> ID：15251677
> 
> 赞同：5
> 
> 时间：2013-03-06T15:43:06.630
> 
> 标签：java, android, speech-recognition, voice, launcher

我需要一个示例，说明如何通过语音命令（触发词）启动我的应用程序。因此，某种在后台运行的服务会监听所有内容，如果单词与设置的文本值匹配（我想这可以通过语音识别来完成），应用程序将打开。我知道这是可能的，但我不知道从哪里开始......

我看到其他应用程序能够建立这一点。我有近 100 万用户，这是最常被要求的功能之一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-06T20:23:21.787

为此，您必须将 Android 语音识别作为服务而不是活动来运行。然后让您的服务聆听关键字或短语。

查看这个 git 示例代码，了解如何将 Android 语音识别作为服务运行：

[https://github.com/gast-lib/gast-lib/](https://github.com/gast-lib/gast-lib/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-07T17:50:57.987

Google 刚刚从 android M 引入了一个新的语音交互 API。你可以在这里查看视频，[http://www.youtube.com/watch?v= OW1A4XFRuyc&list=PLOU2XLYxmsIJDPXCTt5TLDu67271PruEk](http://www.youtube.com/watch?v=OW1A4XFRuyc&list=PLOU2XLYxmsIJDPXCTt5TLDu67271PruEk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-31T19:12:53.573

在 Android 6 及更高版本上，您只需说“Ok Google”或单击麦克风图标，然后说“启动 YourAppName”，您的应用就会启动。

如果 Google 语音搜索无法识别您的应用名称，请尝试拼写出来。

要打开“Ok Google”语音搜索： [https ://support.google.com/websearch/answer/2940021?hl=en](https://support.google.com/websearch/answer/2940021?hl=en)

希望有帮助！

# php - 我应该如何使用 cakephp 中的程序流程？（MVC）

> ID：15251680
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:43:13.047
> 
> 标签：php, cakephp

我用 cakephp 弄湿了我的脚，我开始习惯这些概念。我想知道使用 MVC 流程执行此操作的最佳方法是什么。

可以说这是我的 default.ctp 布局：

```
<body>
<div id="container"><?php echo $this->fetch('content'); ?></div>
<div id="tagcloud"></div>
</body> 
```

我的控制器是 Posts，当我调用 index() 操作时，它将列出数据库中的所有帖子。

我还有一个控制器标签，它访问一个表格，每个标签用于标记帖子的次数。

我需要的是生成一个应该在任何页面中的标签云。那么，我应该在哪里编写我的 tagcloud 代码？

我的第一个任务显然是在标签控制器中编写它，但是我将如何将标签云输出到布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:55:47.753

您可能想要使用[组件](http://book.cakephp.org/2.0/en/controllers/components.html)：

> 组件是控制器之间共享的逻辑包。如果您发现自己想在控制器之间复制和粘贴内容，您可能会考虑在组件中包装一些功能。

在这种情况下，您应该导入要在组件中使用的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:03:58.970

在您的 PostsController::index() 中，您可以这样做：

```
public function index() {

    $this->set('posts', $this->paginate()); // pass a paginated list of posts to the view

    $this->set('tagCloud', $this->Post->tag->tagcloud()); // pass the tag cloud data to the view

} 
```

在您的标签模型中：

```
public function tagcloud() {

    $tagcloud = //funky code to build a tagcloud

    return $tagcloud;

} 
```

或者，您可以将标签云打包成一个元素：

/app/View/Elements/tagcloud.ctp：

```
<?php

$tagCloud = $this->requestAction('/tags/tagcloud');

// code to display your tag cloud in the Tag Model as before.

?> 
```

并插入您的 index.ctp 以获取帖子：

```
<?php echo $this->Element('tagcloud'); ?> 
```

并在您的 TagsController 中：

```
public function tagcloud() {

   return $this->tagcloud();

} 
```

并像以前一样将构建标签云的逻辑放在标签模型中。

# extjs - 禁用 ExtJS 数字字段中的特殊字符

> ID：15251684
> 
> 赞同：1
> 
> 时间：2013-03-06T15:43:15.840
> 
> 标签：extjs, validation, extjs3

我在 ExtJS 中有一个表单，我想在其中放置一个只能将数字作为输入的字段。我还想禁用其他特殊字符（特别是 % 符号），因为无论字段（basechars、regex、maskRe）有什么限制，这些特殊字符似乎都被视为有效输入。

禁用特殊字符的最佳方法是什么？

编辑：抱歉不清楚。我已经在使用数字字段，它确实会阻止所有字母，但允许一些特殊字符，例如 %、&、# 等。

我试过的：

```
numfield1 = new Ext.form.NumberField({
            fieldLabel: 'numfield1',
            name: 'numfield1',
            baseChars: "0123456789"
        });

numfield2 = new Ext.form.NumberField({
            fieldLabel: 'numfield2',
            name: 'numfield2',
            regex: /^[0-9]*/
        });

numfield3 = new Ext.form.NumberField({
            fieldLabel: 'numfield3',
            name: 'numfield3',
            maskRe: /[0-9]/
        }); 
```

所有这些仍然允许特殊字符，我希望该字段仅采用数字字符，并且不允许所有其他特殊字符。

更新：我发现它的工作原理完全符合我在 Firefox 上的预期，但问题仍然存在于 chrome 和 safari 中。有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:21:20.847

在 ExtJS 3.4 中有[NumberField](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.NumberField)可以让您防止除数字以外的击键将数据输入到您的字段中。

要使用它：

```
Ext.define('myapp.view.MyForm', {
    extend: 'Ext.form.Panel',

    defaultType: 'textfield',

    items: [{
        xtype: 'numberfield',
        fieldLabel: 'Price',
        name: 'price',
        allowBlank: false,
        minValue: 0 //prevents negative numbers        
    }],

...

}); 
```

# java - 嵌套的 IF 语句

> ID：15251685
> 
> 赞同：2
> 
> 时间：2013-03-06T15:43:21.690
> 
> 标签：java, design-patterns

我经常遇到需要编写如下代码的情况任何设计模式都可以巧妙地做到这一点，而无需大量的 IF 语句 -

```
A obj = new A();
B obj2 = new B();

for ( i = 1 ; i < 20  ; i ++ )  {

if( i == 1 ) 
  obj.setField1(obj2.getOption1())
else if ( i == 2 ) 
  obj.setField1(obj2.getOption2())
else if ( i == 3 ) 
  obj.setField1(obj2.getOption3())

And so on.. for 20 times .. 

obj.setField2(obj2.getNonOptionField2());
obj.setField3(obj2.getNonOptionField3())

} 
```

**编辑 -**

这里循环的类比是我在数据库上循环，每条记录在其他表中创建 20 多条记录。在 20 条记录中，除了我添加条件的那一列之外，大多数列都是相同的。

是的，设计不是最好的，但我别无选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:45:58.910

如果操作以整数值为条件，您可以创建一个`Map<Integer,MyAction>`，其中`MyAction`是您为此特定目的定义的接口。将 的实现`MyAction`放入映射中以对应于整数选项，并在运行时调用操作以响应传入的值：

```
interface MyAction {
    void setField(A obj, B obj2);
}
...
Map<Integer,MyAction> actionByNumber = new HashMap<Integer,MyAction>();
actionByNumber.put(1, new MyAction() {
    void setField(A obj, B obj2) {
        obj.setField1(obj2.getOption1());
    }
});
actionByNumber.put(2, new MyAction() {
    void setField(A obj, B obj2) {
        obj.setField1(obj2.getOption2());
    }
});
...
A obj = ...
B obj2 = ...
for (int i = 0 ; i != 20 ; i++) {
    MyAction action = actionByNumber.get(i);
    if (action != null) {
       action.setField(obj, obj2);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:48:15.297

尝试改用[开关盒](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)。

例如，您的代码将是：

```
for ( i = 1 ; i < 20  ; i ++ )  {
    switch(i){
        case(1): obj.setField1(obj2.getOption1());
                 break;
        case(2): obj.setField1(obj2.getOption2());
                 break;
        case(3): obj.setField1(obj2.getOption3());
                 break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:47:38.263

一种选择是`switch`声明。

另一种选择是`obj2`保留一个选项数组，并通过索引访问它。就像是：

`obj.setField1(obj2.options[i]);`

人们会争论这个的 O-Oness，但你可以用访问器方法来修饰它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:29:01.350

+1 dasblinkenlight 使用界面和建议的模式。不断增长的 if/switch 通常是一种代码异味，表明某些 OO 重构是合适的。您可以添加一个方法来将新的 MyAction 实例传递到地图。这种方法相对于*if*和*switch*构造的好处是：

1 - 实现对扩展开放，对修改关闭的策略。你想添加一个新的行为？无需为不断增长的原始类添加另一个条件，您只需创建 MyAction 的新实现并将其传入。

2 - 行为可以通过改变地图的内容在运行时改变。

根据您的确切要求，您可能不需要 actionByNumber 成为 Map，如果需要，可能需要一个列表，排序或排序。

# jquery - 全局变量更新未触发 jquery 中的 if/else 语句

> ID：15251690
> 
> 赞同：1
> 
> 时间：2013-03-06T15:43:34.640
> 
> 标签：jquery, if-statement

请参阅下面的示例，基本上我希望它在第一次单击时执行 if，然后对于所有后续单击执行 else 语句，但即使变量正在更新它也不会切换到 else 例如如果警报消息说变量现在是三，它仍然不会去其他地方。我猜这是一个范围问题，但我该如何解决它 - 任何人都可以建议吗？

```
var loaded = 0;

if (loaded == 0) {
$('body').on('click', '#button', function(){
alert(loaded);
loaded += 1;
});

} else {
alert(loaded + 'yay its not 0');
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:47:52.690

这应该有望按预期运行：

```
$(document).ready(function() {
    var clicked = false;
    $('body').click(function() { 
        if(clicked) {
            alert("Already clicked");
        } else {
            alert("Not clicked yet");
            clicked = true;
        }
    });
}); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:45:42.110

你的 if 条件只运行一次。尝试将您的支票放在点击事件中：

```
var loaded = 0;
$('body').on('click', '#button', function () {
    if (loaded == 0) {
        alert(loaded);
        loaded += 1;
    } else {
        alert(loaded + 'yay its not 0');
    };
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/5Xgf9/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:45:58.487

事件一旦分配就不会像那样工作，除非您在事后使用`.one`或手动调用，否则它总是运行 - 但即使这样，您的检查也只会在脚本加载时执行一次，而不是在发生点击时执行。`.off`您需要在事件处理程序中处理 if/else。

```
var loaded = 0;
$('body').on('click', '#button', function(){
   if(loaded === 0) {
      alert(loaded);
      loaded += 1;
   } else {

   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:46:18.803

将您的支票放入点击处理程序中：

```
 $('body').on('click', '#button', function(){
      if(loaded == 0){
          alert(loaded);
          loaded += 1;
      }
      else{
         alert(loaded + 'yay its not 0');

      }
   }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:46:18.833

该语句只执行第一次`if`，之后进入`on()`方法并将函数绑定`#button`到您应该将代码更改为：`else``loaded`

```
$('body').on('click', '#button', function(){
if (loaded == 0) {
  alert(loaded);
loaded += 1;
  } else {
alert(loaded + 'yay its not 0');
  }
}); 
```

# spring - Spring Integration：使用 RowMapper 时的 Inbound-channel-adapter 更新查询参数异常

> ID：15251692
> 
> 赞同：1
> 
> 时间：2013-03-06T15:43:45.040
> 
> 标签：spring, spring-integration

我的目标是从表中读取行并将它们作为消息放在通道上并更新表。我正在使用 RowMapper 将结果集转换为对象列表（列表）。

**这是我的问题：** UPDATE Query 参数应该是什么：**STATUS_TABLE_ID IN (:payload[Status.id])**，因为有效负载将是 List 并且查询 Status.Id 是正确的语法。

我的配置：

```
<si:channel id="output">
    <si:queue capacity="50" />
<si:interceptors>
     <si:wire-tap channel="logger"/>
 </si:interceptors>
</si:channel>
<si-jdbc:inbound-channel-adapter channel="input" data-source="myDataSource" auto-startup="true" query="SELECT * FROM STATUS_TABLE WHERE MESSAGE_STATUS ='WAITING'"
                                 update="UPDATE STATUS_TABLE SET MESSAGE_STATUS='IN_PROGRESS' WHERE STATUS_TABLE_ID IN (:payload[Status.id])"  max-rows-per-poll="20"  row-mapper="rowMapper" update-per-row="true">
    <si:poller fixed-rate="60000">
        <si:transactional/>
    </si:poller>
</si-jdbc:inbound-channel-adapter>

<bean id="rowMapper" class="com.test.StatusMapper"></bean> 
```

我的 RowMapper 类：

```
public class StatusMapper implements RowMapper<Status>{

@Override
public Status mapRow(ResultSet rs, int rowNum)throws SQLException {

    Status status = new Status();       
    status.setMessageContent(rs.getString("MESSAGE_CONTENT"));      
    status.setId(rs.getLong("STATUS_ID"));      
    return status;
} 
```

如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:26:11.860

假设`Status`有一个方法`getId()`，您只需使用`:id`.

更新查询对查询返回的对象集合使用投影...

`expression = "#root.![" + expression + "]";`

这在`Note`此处的第二个中进行了描述[http://static.springsource.org/spring-integration/reference/html/jdbc.html#jdbc-inbound-channel-adapter](http://static.springsource.org/spring-integration/reference/html/jdbc.html#jdbc-inbound-channel-adapter)

此处描述了集合投影[http://static.springsource.org/spring-framework/docs/3.2.1.RELEASE/spring-framework-reference/html/expressions.html#expressions-collection-projection](http://static.springsource.org/spring-framework/docs/3.2.1.RELEASE/spring-framework-reference/html/expressions.html#expressions-collection-projection)

# java - Java - 带小数的计算器

> ID：15251693
> 
> 赞同：0
> 
> 时间：2013-03-06T15:43:46.520
> 
> 标签：java, calculator, decimal

我正在使用 Java 制作计算器。一切正常，我现在正在尝试实现小数。我正在使用双打来存储数字。我有一个解决方案以下解决方案：

```
decPoints++; //decPoints holds the current number of numbers after the decimal point
currentVal = currentVal + (n/Math.pow(10, decPoints)); //n is the number that is to be added on 
```

这可行，但是会导致舍入错误，例如 3.369 将变为 3.689999..

是否有解决此问题的简单方法或其他实现小数的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T15:55:12.387

没关系，我自己使用 BigDecimals 找到了解决方案。

```
decPoints++;
currentVal = currentVal + (n/Math.pow(10, decPoints));

BigDecimal bd = new BigDecimal(currentVal);
bd = bd.setScale(decPoints, BigDecimal.ROUND_HALF_UP);
currentVal = bd.doubleValue(); 
```

# php - 从 Python 中运行 PHP 脚本 - 将值从 Python 传递到 PHP

> ID：15251694
> 
> 赞同：2
> 
> 时间：2013-03-06T15:43:47.917
> 
> 标签：php, python, image, getimagesize

已解决：[解决方案](https://stackoverflow.com/a/15254608/1981075)---------------------------------------------------------- ------------------

我想`getimagesize()`在 Python 脚本中执行 PHP 标准库中的函数。该函数必须从 Python 传递一个图像路径。

我知道如何在 Python 中运行 php 脚本，但我不知道如何从 Python -> PHP 传递参数，然后将结果返回到 Python。

这是我在 Python 脚本中的内容：

```
def php_script_runner(script_path):
    p = subprocess.Popen(['php', script_path], stdout=subprocess.PIPE)
    result = p.communicate()[0]
    return result 
```

这是我在 PHP 文件中的内容（我不确定如何将参数传递给它）：

`<?php getimagesize() ?>`

我如何将参数传递给`'get_image_size.php'`并让它在 Python 中返回结果以进行进一步处理？

我想为其他自定义 PHP 函数进一步实现这个想法。这个问题的主要目标不仅是找到图像的大小，而且能够将其用于将来的其他 php 密集型功能。

其主要目标是确定：

1.  如何在 Python 中调用 PHP 脚本
2.  如何从 Python 将 agrument 发送到 PHP 脚本
3.  如何将 PHP 脚本的输出解析回 Python

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:26:52.650

使用 Python 图像库 PIL 有什么问题？

```
from PIL import Image
im=Image.open(filepath)
print im.size # (height,width) tuple 
```

调用 PHP 脚本来获取图像尺寸是完全错误的。我真的想不出 PHP 比 Python 做得更好的任何事情，它证明了启动两个运行时的实例是合理的 :)

我的建议：一次坚持使用一种语言，并学习 Python 的标准库 :) 如果你可以在 PHP 中做某事，那么在 Python 中做某​​事应该不会有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T17:58:43.753

通过这样做解决：Python：

```
import subprocess
import json
import sys
import os

def php(script_path, argument):
    p = subprocess.Popen(['php', script_path, argument], stdout=subprocess.PIPE)
    result = p.communicate()[0]
    return result

image_dimensions_json =str(php("get_image_size.php", image_location_relative[1:]))
dic = json.loads(image_dimensions_json)
print str(dic["0"]) + "|" + str(dic["1"]) 
```

的原因`[1:]`是由于某种原因路径中的“/”导致错误。我发现删除它可以解决问题。

PHP：

```
<?php

echo(json_encode(getimagesize($argv[1])));

?> 
```

`echo`或`print_r`工作。我发现将数组转换为 JSON 很容易，因为 Python 在标准库中内置了一个 json 解码器。

希望这对人们有所帮助！我计划使用这个 conecpt 来实现更大的 PHP 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T15:47:39.130

如果我在你的位置，我会将 Python 结果作为 JSON（或可能的 XML）对象回显，然后使用 PHP 脚本重新读取该信息。如果可能的话，我强烈建议将这两种语言分成两个单独的网页，甚至可能让 Python 通过`GET`样式查询将数据返回到页面，也就是 API 样式。

# java - 如何获得只有一个图像的缩略图以将其放入 ImageView？

> ID：15251696
> 
> 赞同：0
> 
> 时间：2013-03-06T15:43:52.760
> 
> 标签：java, android, windows, image, thumbnails

我在用于测试的设备的 SD 卡上有一张照片。路径：

```
Uri selectedImageUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory()+"/test/test/test1.jpg")); 
```

（是的，文件已经存在于 SD 卡上）

我已经设法获得了 SD 卡上所有图像的缩略图，但我只想要这个特定的。

我该如何存档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:45:49.420

这是创建缩略图的代码：

```
public static Bitmap decodeSampledBitmapFromFile(String path,
    int reqWidth, int reqHeight) { // BEST QUALITY MATCH

// First decode with inJustDecodeBounds=true to check dimensions
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeFile(path, options);

// Calculate inSampleSize
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    options.inPreferredConfig = Bitmap.Config.RGB_565;
    int inSampleSize = 1;

    if (height > reqHeight) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    }

    int expectedWidth = width / inSampleSize;

    if (expectedWidth > reqWidth) {
        //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }

options.inSampleSize = inSampleSize;

// Decode bitmap with inSampleSize set
options.inJustDecodeBounds = false;

return BitmapFactory.decodeFile(path, options);
} 
```

# php - 在产品编辑和提交时从数据库中检索图像名称时遇到问题

> ID：15251698
> 
> 赞同：0
> 
> 时间：2013-03-06T15:42:54.717
> 
> 标签：php, file-upload

我有 1 周的时间找不到解决方案，所以让我 exmaplin 我有一个 html 表单上的输入类型文件，看起来像这样

```
 <form action ="MenaxhoProduktet.php?ID=<?php print $_SESSION["ID"]; ?>&Editing=<?php print $Editing; ?>"method = "POST" enctype="multipart/form-data"> 
```

和一个看起来像这样的输入类型文件

```
<input class="form-input" type="file"  name="Fotografia"  id="file"  value="<?php print $Fotografia ?>" accept="image/*"/> 
```

我有 php 代码将图像上传到数据库中保存名称的目录

```
 if(isset($_FILES['Fotografia']['name'])) 
                $Fotografia = $_FILES['Fotografia']['name'];
                $file_size =$_FILES['Fotografia']['size'];
                $file_tmp =$_FILES['Fotografia']['tmp_name'];
                $file_type=$_FILES['Fotografia']['type'];   
                $file_ext=strtolower(end(explode('.',$_FILES['Fotografia']['name'])));

                $extensions= array("jpeg","jpg","png");         
                if(in_array($file_ext,$extensions)=== false){
                    $mesazhiGabim ="extension not allowed, please choose a JPEG or PNG file.";
                }
                if($file_size > 2097152){
                $mesazhiKujdes='File size must be excately 2 MB';
                }               
                if(empty($errors)==true){
                    move_uploaded_file($file_tmp,"uploads/".$Fotografia);
                    echo "Success";
                }
                else
                {
                    print_r($errors);
                }
        } 
```

但是当我编辑产品并且只想更改价格时，我需要再次上传图片，否则它将从数据库中删除图片名称

当我编辑产品时，如何防止此代码从数据库中删除图像名称，或者如何更改产品名称或价格而无需一次又一次地上传图像......如果你让我免于发疯，非常感谢你。 .

# javascript - 用 JS 检测 Android 智能手机或 Android 平板电脑

> ID：15251701
> 
> 赞同：0
> 
> 时间：2013-03-06T15:44:01.520
> 
> 标签：javascript, android, tablet, smartphone

我如何使用 JS 检测用户是从智能手机还是平板电脑访问我的网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:46:32.900

不，没有。您可能会使用浏览器或用户代理，但这并不可靠。

如果您想根据屏幕大小展示您的网站，您可以使用 css 媒体类型和查询。[这篇文章](http://alistapart.com/article/return-of-the-mobile-stylesheet)是一个很好的介绍。

# java - 在数组中查找模式

> ID：15251706
> 
> 赞同：4
> 
> 时间：2013-03-06T15:44:18.393
> 
> 标签：java, algorithm

我想知道是否有更简单的方法可以在数组中找到模式？

假设我正在寻找给定数组中的一种模式：A) 微笑、皱眉、微笑、皱眉等 B) 微笑、愤怒、皱眉、微笑、愤怒、皱眉等 C) 微笑、微笑、微笑

现在说给定的数组与模式 A 匹配：

生气，生气，生气，`Smile, Frown, Smile, Frown, Smile, Frown,`生气，皱眉，生气，皱眉，微笑

突出显示的部分是与模式 A 匹配的部分以及我想要存储在列表中的部分。

现在我有这样的事情：

```
For each element in the array
check to see if element is smile
if element is smile, check to see if next element is frown
if element is smile and next element is frown - store away in a list 
set a boolean saying we've found pattern A

if the boolean value is false and we did not find the smile frown pattern
For each element in the array
check to see if element is smile
if element is smile, check to see if next element is angry,
is next element is angry, check to see if next next element is frown
if element is smile, next element is angry, next next element is frown - store away in a list
set a boolean saying we've found pattern B

if boolean value is false for both finding pattern A and pattern B search for pattern C 
```

有更好的方法吗？总感觉这个不好。。。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:48:06.697

您可以将数组转换为字符串并将其与任何正则表达式模式匹配。

**UPD：**可能是[前缀树](http://en.wikipedia.org/wiki/Prefix_tree)可以帮助你。首先将所有模式添加到 trie，然后再匹配您的数组。但这很像一个本土的正则表达式引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:56:23.553

更新：我实现了我描述的方法。

运行下面的代码返回：

```
First match against pattern found at index 3
No match found. 
```

为了简单起见，我将代码和测试代码放在一个类中。完成这项工作的函数是 findPatternIndex。剩下的就是简单的测试、初始化和显示逻辑。

```
import java.util.LinkedHashMap;
import java.util.Map;

import org.junit.Before;
import org.junit.Test;

public class PatternMatching {

  private final Map<String, Character> encodedWords = new LinkedHashMap<String, Character>();

  @Before
  public void init() {
    encodedWords.put("Angry", 'A');
    encodedWords.put("Smile", 'S');
    encodedWords.put("Frown", 'F');
  }

  public int findPatternIndex(final String[] array, final String pattern) {
    final StringBuffer encodedSequence = new StringBuffer();
    for (final String element : array) {
      encodedSequence.append(encodedWords.get(element));
    }
    return encodedSequence.toString().indexOf(pattern);
  }

  private void displayFindings(final int index) {
    if (index==-1) {
      System.out.println("No match found.");
    } else {
      System.out.println("First match against pattern found at index " + index);
    }
  }

  @Test
  public void shouldFindOneMatchThenNone() {
    final String[] array = {"Angry","Angry","Angry","Smile","Frown","Smile","Frown","Smile","Frown","Angry","Frown","Angry","Frown","Smile"};
    String pattern="SFSF";
    displayFindings(findPatternIndex(array, pattern));
    pattern="AAF";
    displayFindings(findPatternIndex(array, pattern));
  }

} 
```

如果事先不知道填充数组的单词，则可以进一步更新代码以动态构建编码单词。显示所有匹配项的索引也很简单，而不仅仅是第一个匹配项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T17:34:09.637

[KMP 字符串搜索算法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)的修改版本在这里可能很有用。

这是一些示例 Java 代码：[http ://www.fmi.uni-sofia.bg/fmi/logic/vboutchkova/sources/KMPMatch.java](http://www.fmi.uni-sofia.bg/fmi/logic/vboutchkova/sources/KMPMatch.java)

需要考虑的一些差异：

*   它应该被构建为同时处理多个搜索词。在您的情况下，多种模式，例如：`Smile, Frown,`和`Smile, Angry, Frown,`
*   重复的模式本身只是同一个词的多次重复。在您发现单个单词的位置后，您可以在搜索完成后组合找到的彼此相邻的模式。这将允许您获得重复的完整完整模式，例如：`Smile, Frown, Smile, Frown, Smile, Frown,`

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:54:33.490

用于`Arrays.toString(Object[] a)`将数组转换为`String`然后查找您的模式。

例如`Arrays.toString(new String[] { "a", "b" })`返回`"[a, b]"`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:45:13.627

可能有更简单的解决方案，但您可以在字符串的帮助下完成。优点是，您可以使用已经过测试的高性能代码。缺点是，您必须将数组转换为`String`.

**创建`String`：**您需要从值空间到字符串空间的映射。所以例如

```
{0, 1, 2} -> {"0", "1", "2"}
{0, 1, ..., 99, 100} -> {"_0", "_1", ..., "_99", "_100"}
{SMILE, FROWN, ANGRY} -> {"S", "F", "A"}
{"Smile", "Frown", "Angry"} -> {"Smile", "Frown", "Angry"} 
```

您需要注意映射的值不能相互交互。例如映射

```
{0, 1, ..., 10} -> {"0", "1", ..., "10"} 
```

将是一个无效的映射，因为你无法找出，如果`"10"`是 a`1`后跟 a `0`，或者如果它是 a `10`。

*示例：*假设您的数组包含`{ANGRY. SMILE, FROWN, SMILE, FROWN, SMILE, FROWN, SMILE}`. 那么你的映射`String`将是`"ASFSFSFS"`.

**定义模式：**接下来，您需要定义一个模式。这只是一个`String`包含正确模式的 a，正如您期望在 mapped 中找到的那样`String`。

*示例：*在您的情况下，那将是

```
String pattern = "SFSFSF"; 
```

**将字符串与模式匹配：**现在，您可以使用它`indexOf()`来查找您的模式。

```
int start = mappedString.indexOf(pattern); 
```

`pattern`这将为您提供in的第一次出现的索引`mappedString`。如果返回`-1`，则在字符串中未找到您的模式。

**存储模式：**否则，您可以将模式存储在列表中。

```
if (start > 0) storePatternInList(yourList, new ObjectEnum[]{SMILE, FROWN, SMILE, FROWN, SMILE, FROWN}); 
```

您可以使用 再次搜索`mappedString.subString(start+pattern.length()).indexOf(pattern)`。寻找下一个外观。

# c++ - 使用 OpenCV 和 VLC SDK 的函数入口点的奇怪错误

> ID：15251709
> 
> 赞同：0
> 
> 时间：2013-03-06T15:44:21.890
> 
> 标签：c++, opencv, dll, linker, vlc

我正在尝试实现一个使用 VLC SDK 和 OpenCV 的 Video Caputre，以便我可以在 OpenCV 项目中使用来自 VLC 的更好的流处理。我已经构建了一个包含 CVLCVideoCaputre 类的静态库 A。这个库包括 vlc/vlc.h 和 cv.h。它构建成功。

当我想在应用程序中实现这个库 A 时。我动态链接 libvlc.lib 和 libvlccore.lib 以及 OpenCV 库。这个项目也在构建中。

但是通过运行程序，我得到了以下错误：

“函数入口点：“？create@Mat@cv@@QAEXHPBHH@Z”未在 DLL“libvlc.dll”（德语翻译）中找到“

它的怪异是因为这个函数在“opencv_core231.dll”中。

有谁知道为什么 cv::Mat::create 函数与错误的库相关联以及我该如何解决这个问题。

我正在使用 Windows 7、Visual Studio 2010。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:26:50.453

最后，解决方案是将链接器标志设置为 /OPT:NOREF，这不会优化您的引用。您可以通过以下方式在 Visual Studio 设置中找到它：

配置属性->链接器->优化->参考

# javascript - 从表单中获取输入以分配变量

> ID：15251716
> 
> 赞同：0
> 
> 时间：2013-03-06T15:44:29.610
> 
> 标签：javascript, html, forms

我如何写一个表格来从用户那里获取一个数字，并在该数字的范围内掷骰子，其中变量“输入”是他们的数字。我没有足够的表单经验，所有表单教程都是内联的。

```
<html>
<head>
</head>
<body>
<script>
result = Math.floor(((Math.random())* input))+1;
document.write(result);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:48:01.677

```
<html>
<head>
</head>
<body>

<form>
<input id="txtInput" type="TextBox" onkeyup="myFunc();" />
</form>

<script>
function myFunc(){
    var input = document.getElementById("txtInput").value;
    result = Math.floor(((Math.random())* input))+1;
    document.write(result);
}
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:11:15.747

To achieve your goal and avoid document.write() that would erase everything, you can create a empty div, and then write the result to it. With this code you can repeat the operation of calling the random function as much times as you want:

```
<html>
<head>
</head>
<body>

n: <input type="text" id="n" name="n" value="">
<input type="submit" value="submit" onclick="call_result();">

<div id="result"></div> 

<script type="text/javascript">
function call_result(){
    var input = parseInt(document.getElementById("n").value);
    var result = Math.floor((Math.random())*input)+1;
//  document.write(result);
    document.getElementById("result").innerHTML=result;
}
</script>

</body>
</html> 
```

# javascript - 遍历数组并使用 splice() 更新父数组？

> ID：15251725
> 
> 赞同：0
> 
> 时间：2013-03-06T15:44:46.253
> 
> 标签：javascript, jquery, iteration

当用户单击按钮时，我将抓取`availableTags`数组，将其存储在一个新的`var tagsToWorkWith`. 然后我迭代`tagsToWorkWith`并`moveTag()`在每一行上运行，以便移动`availableTags`.

在里面`moveTag()`，我正在从`availableTags`使用中删除该行`splice()`。但是，由于某种原因，这会从 中删除该行`tagsToWorkWith`，这导致我的`for()`函数只能`moveTag()`在每隔一行上运行。

**为什么`splice()`要从中删除行`tagsToWorkWith`？**我明确地将 tagsToWorkWith 设置为等于原始版本`availableTags`以避免此问题，但这似乎不起作用。

以下代码在[http://jsfiddle.net/EdnxH/处运行时出现错误](http://jsfiddle.net/EdnxH/)

```
var availableTags = [{"label":"Label A","value":"1"},{"label":"Label B","value":"2"}, {"label":"Label C","value":"3"}];

$(document).on('click', '#clickButton', function () {
    var tagsToWorkWith = availableTags;                         
    for(var countera=0; countera< tagsToWorkWith.length; countera++) {
        alert(tagsToWorkWith[countera].label);
        moveTag(tagsToWorkWith[countera].label, tagsToWorkWith[countera].value);
        //This should match the first alert label, since we haven't increased the counter yet. But, for some reason, moveTag()'s splice() removes the row from tagsToWorkWith.
        alert(tagsToWorkWith[countera].label);
    }   
});

function moveTag(itemToMove, itemToMoveValue) {
   var selectedTagArrayIndex = -1;    
   for(var counter=0; counter< availableTags.length; counter++) {
       if (availableTags[counter].value == itemToMoveValue) {
           selectedTagArrayIndex = counter;
       }
   } 
   if (selectedTagArrayIndex > -1)  {
       availableTags.splice(selectedTagArrayIndex, 1);
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:46:49.127

数组是对象，当您在变量之间分配引用时，对象不会“深度复制”。因此，您的两个变量都引用了完全相同的对象。

因此：

```
var a = ["hello", "world"];
var b = a;
a[2] = "again";
alert(b[2]); // "again" because "a" and "b" are the same object 
```

如果要复制数组，可以使用：

```
var b = a.slice(0); 
```

# eclipse - OSB - JCA 适配器连接错误

> ID：15251727
> 
> 赞同：0
> 
> 时间：2013-03-06T15:44:46.977
> 
> 标签：eclipse, soa, jdeveloper, jca, osb

当我在 OEPE 中尝试流程时，我的域日志中出现此错误：

“嵌套异常是：BINDING.JCA-11812

交互处理错误。处理与 API、[SCHEMA].[PACKAGE].[STORED_PROCEDURE] 的交互执行时出错。处理交互以调用 API，[SCHEMA].[PACKAGE].[STORED_PROCEDURE] 时发生错误。原因：java.lang.NullPointerException。

确保包含参数数据的 XML 符合 XSD 参数定义。这个异常是不可恢复的，可能是因为建模错误。”

（注意：我的 OSB 是西班牙语。我翻译了这个）

我正在制作一个接收 SOAP 消息 (HTTP) 的流程，并将参数数据发送到数据库中的存储过程。我使用 JDeveloper 创建了一个 JCA 适配器来引用我办公室中的数据库，以及我在其上创建的存储过程。我将 jca、wsdl 和 xsd 放在 OEPE 中并生成了一个业务服务。

因此，我有 2 个流，一个接收 SOAP 并从其属性的数据中设置我在消息正文上替换的那些属性的串联字符串（使用肥皂信封），并将其路由到第二个流。

在第二个流程中，我只是直接路由到使用 JCA 的业务服务。已经测试过了，但是根据上面的错误，它没有连接到数据库。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T21:19:08.937

检查您的 JCA uri。您必须让 DBAdaptor（在 weblogic 控制台中）指向与您的 JCA 生成的文件中相同的 JCA uri。此外，您拥有的 DataSource 应该具有与 DBAdaptor 连接 xADataSourceName 中的 JNDI 相同的 JNDI。

这是连接问题。如上所述，尝试验证数据源和 DBAdaptor 设置。希望它能解决您的问题。

# python - Python multiprocessing.Pool 与许多进程

> ID：15251728
> 
> 赞同：0
> 
> 时间：2013-03-06T15:44:48.790
> 
> 标签：python, parallel-processing, multicore, numa

我正在尝试创建许多并行进程来利用 32 核机器，但是当我查看顶部屏幕时，它只显示了 5 个 Python 进程。这是我的代码：

```
max_processes = min(len(corpus_paths), cpu_count()*2)
__log.debug("Max processes being used: " + str(max_processes))
pool = Pool(max_processes)
for path in corpus_paths:
    pool.apply_async(...)
pool.close()
pool.join() 
```

这是机器的配置：

```
[minh.lengoc@compute-1-5 ~]$ lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                32
On-line CPU(s) list:   0-31
Thread(s) per core:    2
Core(s) per socket:    8
CPU socket(s):         2
NUMA node(s):          4
Vendor ID:             AuthenticAMD
CPU family:            21
Model:                 1
Stepping:              2
CPU MHz:               2099.877
BogoMIPS:              4199.44
Virtualization:        AMD-V
L1d cache:             16K
L1i cache:             64K
L2 cache:              2048K
L3 cache:              6144K
NUMA node0 CPU(s):     0,2,4,6,8,10,12,14
NUMA node1 CPU(s):     16,18,20,22,24,26,28,30
NUMA node2 CPU(s):     1,3,5,7,9,11,13,15
NUMA node3 CPU(s):     17,19,21,23,25,27,29,31 
```

谢谢！

* * *

现在可以了。我的代码一定有问题，但我无法回滚查看它是什么。关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:55:30.780

未使用所有内核的一个可能原因是 pool.apply_async 运行的目标函数完成得太快。这种情况下的解决方案是向目标函数发送更多数据（因此每次调用它会做更多的工作）。

这就像把煤铲进 32 个熔炉。如果你用小铲子，你可能只能在第一个炉子里的煤用完之前到达第五个炉子。然后你必须重新装满第一个熔炉。即使你有一大堆煤，你也永远无法使用所有的炉子。如果你使用足够大的铲子，那么你可以让所有的炉子都燃烧起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:09:13.190

我有一个类似的问题，在我的情况下，我使用的是 gearman 并且希望每个核心都有工作人员，最初使用“Pool”，但注意到只有一个工作人员正在处理消息，所以我用下面的代码替换“Pool”以使用所有“cores - 1”，这样我就可以让工作人员同时读取队列：

```
if __name__ == '__main__':
jobs = []
for i in range(multiprocessing.cpu_count() - 1): 
    p = multiprocessing.Process(target=start_worker)
    jobs.append(p)
    p.start()

for j in jobs:
    j.join()
    print '%s.exitcode = %s' % (j.name, j.exitcode) 
```

你怎么看 ？有更好的方法/想法来处理这个吗？

# javascript - 带有 jQ uery 宽度的 IE8

> ID：15251736
> 
> 赞同：0
> 
> 时间：2013-03-06T15:45:03.140
> 
> 标签：javascript, jquery

我正在尝试在 div 上动态设置宽度。这适用于 Safari、Chrome 和 Firefox，但不适用于 IE8。这是使用 jQuery UI 的滑块功能。到目前为止，这是我的代码：

```
var ourStoryPosts = $(".ourStory .grid_12mod").children();
var ourStoryLength = ourStoryPosts.length;
var ourStoryWidth = $(ourStoryPosts[2]).outerWidth(true);
var ourStoryWrapperWidth = ourStoryLength * ourStoryWidth;
var maxSlider = ourStoryWrapperWidth - 1020;

$(".ourStory .grid_12mod").width(ourStoryWrapperWidth);

$(".ourStorySlider").slider({ 
    step: 1, 
    max: maxSlider,
    slide: function( event, ui) {
        $(".ourStory").css({
            "left" : -ui.value
        });
    }
}); 
```

如您所见，我使用变量来设置这些值。该`width()`方法未按预期工作。

我尝试使用`String()`构造函数显式转换为字符串。我也尝试`+ "px"`在表达式的末尾使用。每次， div 都被设置为`0px`. 为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:19:33.570

Not sure what the actual issue was, but using native JS fixed it for me:

```
var elem = document.querySelector(".grid_12mod");
var ourStoryChildren = elem.children; 
```

Using the jQuery 1.9 method of `children()` logged a result of `5` elements in Safari, Chrome and Firefox, while IE8 logged `1`. Using the native `children` attribute of the `elem` object fixed the problem and logged `5` for all browsers.

The reason this was logging `0` is because IE8 was returning only `1` child element, when `5` existed, therefore the math was off and IE8 was trying to find the second array element when it only found `1` element.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:50:20.033

您可以尝试设置css属性宽度吗？

```
$(".ourStory .grid_12mod").css('width', ourStoryWrapperWidth.toString() + 'px'); 
```

# javascript - Javascript var 作为 Razor 参数

> ID：15251737
> 
> 赞同：3
> 
> 时间：2013-03-06T15:45:04.287
> 
> 标签：javascript, c#, jquery, asp.net-mvc, razor

这看起来很简单，但我到处搜索，找不到简单的方法来做到这一点。我有一个带有搜索按钮的文本框，我正在调用一个操作结果，它将在数据库中搜索与我的文本框中的内容匹配的值。一切都按预期工作，除了我的操作结果（在 javascript click 函数中从 razor 调用）需要文本框中的参数（var 策略），并且我找不到在我的 razor 操作结果调用中使用该值的方法。

这是我的文本框和处理它的 javascript。“PolicyNum =”是我试图传递“var policy”值的地方

文本框：

```
<span class="k-textbox k-space-right" style="width: 185px">
    <input id="polText" type="text" />
    <a id="polSearch" href="#" class="k-icon k-i-search">&nbsp;</a>
</span> 
```

Javascript：

```
$(function () {
    $("#polSearch").click(function () {
        var policy = $("#polText").val();
        location = '@Url.Action("SearchByPolicy", new { policyNum =  })';
    });
}); 
```

这段代码都位于我的主视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:50:39.663

你不会以这种方式实现你想要的。您的困惑是可以理解的：Razor 变量在 HTML 和 JS 执行之前呈现。

使用 URL 方法你会是更好的服务器

```
$(function () {
    $("#polSearch").click(function () {
        var policy = $("#polText").val();
        location = '{Controller}/SearchByPolicy/" + policy';
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:56:26.443

使用[Html.ActionLink](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink%28v=vs.108%29.aspx)代替`a`元素。

```
@Html.ActionLink("Action", "Controller", 
    new { policy = ""}, 
    new { id = "polSearch", class="k-icon k-i-search"}) 
```

脚本

```
$(function () {
    $("#polSearch").click(function () {
        var policy = $("#polText").val();
        location = $(this).attr("href");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:48:34.870

Razor 运行服务器端，JS 客户端。您需要在 Razor 中提供无参数 URL，并使用 JS 在其中设置 ID。就像是：

```
location = '@Url.Action("SearchByPolicy")' + policy; 
```

# java - 如何在java中重置JFrame

> ID：15251738
> 
> 赞同：3
> 
> 时间：2013-03-06T15:45:07.230
> 
> 标签：java, swing

我是java的初学者。我有 ImageFrame 类如下：

```
public class ImageFrame extends JFrame {
    private static final long serialVersionUID = 1L;

    public static final int DEFAULT_WIDTH = 1365;
    public static final int DEFAULT_HEIGHT = 730;

    GettingImage getimg = new GettingImage();
    private BufferedImage image = getimg.getImage();

    final ImageProcessing operation = new ImageProcessing(image);

    public ImageFrame(){
        setTitle("ImageTest");
        setSize(DEFAULT_WIDTH, DEFAULT_HEIGHT);

        JMenu process = new JMenu("Process");

        JMenuItem greyscale = new JMenuItem("greyscale");
        process.add(greyscale);

        //adding action listener to menu items
        greyscale.addActionListener(
            new ActionListener(){
                public void actionPerformed(ActionEvent e)
                {
                    image = operation.greyscale();
                    System.out.println("greyscale is pressed");  
                }
            }
        );

        JMenuBar bar = new JMenuBar();
        setJMenuBar(bar);
        bar.add(process);

        setSize(1365, 730);
        setVisible(true);

        ImageComponent component = new ImageComponent(image);
        add(component);
    }   
} 
```

但是当我按下灰度子菜单时图像不会转换为灰度，但是当我最小化窗口并最大化它时，图像会变成灰度。我认为这是由于窗口没有刷新。我该如何刷新它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:49:26.567

在你的动作监听器中调用[repaint 。](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#repaint%28%29)`ImageComponent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:50:13.347

尝试在你的动作监听器结束时调用 repaint()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:52:31.713

Well since when minimize the window and then maximize it, you could try .dispose() it closes the window or you can write your own restart method to set the variables to their starting values.

# wordpress - 用 javascript 调用 tinymce - 在 wordpress 中

> ID：15251739
> 
> 赞同：1
> 
> 时间：2013-03-06T15:45:07.603
> 
> 标签：wordpress, tinymce

在 wordpress 管理员中，我想使用 javascript 调用 tinymce 文本编辑器（在用户单击事件中......即在页面加载后）。

我可以调用编辑器，但它看起来不像 wp 编辑器，我为编辑器创建的自定义按钮也没有显示。

如何使用与 wordpress 帖子/页面编辑器相同的设置通过 javascript 调用 tinymce 编辑器？

```
 tinyMCE.init({
   mode:"exact",
   width:"100%",
   theme:"advanced",
   skin:"wp_theme",
   editor_selector : "mceAdvanced"+tick
 }); 
```

# ruby-on-rails - 如何从字符串中删除 HTML 标记

> ID：15251746
> 
> 赞同：25
> 
> 时间：2013-03-06T15:45:29.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html-safe

假设我有：

```
@string = "it is a <a href="#">string</a>" 
```

我想以两种方式在我的应用程序的不同部分使用它：

*   带有可点击的链接
*   没有可点击链接（但不显示任何 HTML 标记）

第一个可以使用`html_safe`：

```
@string.html_safe 
```

它是一个[字符串](http://www.foo.com)

我怎样才能实现第二个？

它是一个字符串。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-06T15:53:24.607

你可以试试这个：

```
ActionView::Base.full_sanitizer.sanitize(@string) 
```

见*[strip_tags(html)](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags)*。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-18T09:12:10.430

**你可以试试这个：**

```
strip_tags(@string) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-22T11:05:14.017

用于一般用途（例如网络刮板）：

```
puts Rails::Html::FullSanitizer.new.sanitize("<div>Hello</div><br>")
# Hello 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T16:00:07.637

你可以用`nokogiri`它来做同样的事情。

这篇[SO 帖子](https://stackoverflow.com/questions/5922041/how-do-i-remove-http-links-with-activesupports-starts-with-using-nokogiri)讲述了这个故事。

简而言之：

这使用了 XPath 的`starts-with`功能：

您必须首先像这样定义它：

```
require 'nokogiri'

item = Nokogiri::HTML('<a href="#">string</a>')
puts item.to_html 
```

以上将给出html输出。然后您可以使用 XPath。

```
item.search('//a[not(starts-with(@href, "http://"))]').each do |a|
  a.replace(a.content)
end
puts item.to_html 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-19T19:17:06.620

在 Rails 中，另请参见 strip_tags 方法。[http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T15:54:17.147

Rails 提供了一个名为 的方法[`strip_links`](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_links)，它似乎可以做你想做的事（看它的名字）。

根据[其 APIDock 页面](http://apidock.com/rails/ActionView/Helpers/SanitizeHelper/strip_links)，它有点受限。要使其适用于/任何字符串，您可以扩展字符串类：

```
class String
  def strip_links
    ActionController::Base.helpers.strip_links(self)
  end
end 
```

所以你可以使用：

```
@string.strip_links 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-17T02:23:05.877

受楼上的启发，我在我的项目中定义了这个函数

```
 def delete_html_markup(data)
    return data if data.blank?
    if data.is_a?(Array)
      data.map{ | s |  delete_html_markup(s)  }
    elsif data.is_a?(Hash)
      data.each do | k, v |
        data[k] = delete_html_markup(v)
      end
    else
      ActionView::Base.full_sanitizer.sanitize(data)
    end
  end 
```

# r - 使用 slideify 将图像添加到标题幻灯片

> ID：15251751
> 
> 赞同：13
> 
> 时间：2013-03-06T15:45:41.213
> 
> 标签：r, r-markdown, slidify

我正在使用最新版本的 Rstudio（和 knitr），并且我已经从 github 安装了 slidify 的开发版本。Slidify 允许您一键从 Rmarkdown 直接转到 html5slides。

我的问题是我想将图像添加到标题幻灯片，但使用正常的 Rmarkdown 语法不起作用。我认为这是因为第一张幻灯片被指定为 YAML。

```
title       : 
subtitle    : 
author      : 
job         : 
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft} 
```

如果我在第一张幻灯片规范中添加任何内容，我会在解析 YAML 的函数 yaml.load() 中出现错误。有没有办法使用 YAML 指定背景图像？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T17:30:51.090

`io2012`框架中的标题幻灯片标有 class `title-slide`。因此，您可以使用 css 自定义幻灯片。例如，如果要指定背景图片，则需要添加以下css。

```
 .title-slide {
     background-image: url(http://goo.gl/cF6W2);
   } 
```

您可以通过使用标签将其直接添加到 Rmd 文件中，也可以将其添加`<style></style>`到自定义 css 文件中`assets/css`，当您运行时将自动包含该文件`slidify`。

希望这是有用的。

编辑。如果您想进一步自定义标题幻灯片的外观，您可以调整[library/frameworks/io2012/layouts/deck.html](https://github.com/ramnathv/slidifyLibraries/blob/master/inst/libraries/frameworks/io2012/layouts/deck.html#L25-L48)中的行。

# select - SQL 查询 Distinct / Group By 不工 作

> ID：15251755
> 
> 赞同：0
> 
> 时间：2013-03-06T15:45:25.103
> 
> 标签：select, duplicates, left-join

我不是一个很好的选择陈述工匠，希望有人能提供帮助。我有两个制造零件表：

STOCK 表中有常备库存。它包含所有零件编号，这些零件编号存在于多行中，因为零件分散在多个位置。这是对的。

RECEIPT 表是某人构建的表。它只是最近收到零件的年份。每一行只有零件编号和收货年份。零件编号仅明确列出一次。

我正在尝试将 Receipt Year 列粘贴到原始 STOCK 表上，以仅报告收到零件的年份。我不想更改 STOCK 表中的原始数据，只需根据 PART NUMBER 上的匹配将收据年份添加到每一行。这是我的选择声明：

```
SELECT DISTINCT STOCK.Project, STOCK.[Part Id], STOCK.Warehouse, STOCK.Location, RECEIPTS.Year from STOCK LEFT JOIN RECEIPTS on STOCK.[Part Id] = RECEIPTS.ITEM_ID GROUP BY STOCK.Project, STOCK.[Part Id], STOCK.Warehouse, STOCK.Location, RECEIPTS.Year; 
```

不幸的是，我的查询不断复制 RECEIPTS 表中可用的每一年的行，如下所示：

```
Proj        Part Id         Whse_ID Loc         Receipt_Year
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2004
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2005
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2006
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2007
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2009
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2011
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2012
A198.730    5962-9313101MPA 770 GFMSTK-116B2    2013 
```

仅在 2004 年收到了 5962 份（收据中有不同的一行）。

任何帮助是极大的赞赏。谢谢，JM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:58:24.240

通过首先提取数据上的最大日期记录的引物查询来解决。

# sql - SQL查询一对多关系

> ID：15251761
> 
> 赞同：18
> 
> 时间：2013-03-06T15:45:57.023
> 
> 标签：sql, join

我有一张员工表和另一张培训表。培训表包含员工已完成的各种培训课程。我们有强制性的安全意识培训，所以每个员工都必须完成这个培训课程。我在运行查询时遇到问题，该查询将返回列出的所有员工是否已完成培训。

员工表示例

```
╔════╦══════╗
║ ID ║ NAME ║
╠════╬══════╣
║  1 ║ Bob  ║
║  2 ║ Tom  ║
║  3 ║ John ║
╚════╩══════╩ 
```

示例训练表

```
╔════╦══════════════╦════════════════════╗
║ ID ║ DEPARTMENT_ID║       CLASS        ║
╠════╬══════════════╬════════════════════╣
║  1 ║           1  ║ Security Awareness ║
║  2 ║           1  ║ Workplace Safety   ║
║  3 ║           2  ║ Security Awareness ║
╚════╩══════════════╩════════════════════╝ 
```

目标结果

```
╔════╦══════╦════════════════════╗
║ ID ║ NAME ║       CLASS        ║
╠════╬══════╬════════════════════╣
║  1 ║ Bob  ║ Security Awareness ║
║  2 ║ Tom  ║ Security Awareness ║
║  3 ║ John ║ (null)             ║
╚════╩══════╩════════════════════╝ 
```

我正在使用的查询是

```
SELECT employee.id, employee.name, training.class
FROM employee
JOIN training ON employee.id = training.department_id
WHERE training.class LIKE '%SECURITY%'
ORDER BY employee_id 
```

错过“安全意识”课程的员工只是没有出现，并且从裂缝中掉了下来。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-06T15:50:17.090

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:48:26.453

您正在执行内部联接，您想要的是左外部联接。不同之处在于：内连接*只会*在连接表中有匹配项的情况下产生。左外连接将返回主表中的所有结果，无论连接表中是否有结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:50:04.087

代替 JOIN 使用 LEFT OUTER JOIN。我还将您的 WHERE 子句更改为

```
WHERE training.Id = 1 
```

如果那是等价的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:49:00.913

您要查找的内容称为外部联接。在这种情况下，您将需要一个左外连接：

```
SELECT employee.id, employee.name, training.class 
FROM employee LEFT OUTER JOIN training ON employee.id = training.department_id 
WHERE training.class LIKE '%Security%'
ORDER BY employee_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:54:27.703

```
Select e.id, e.name, t.class from employee e left outer join training t on e.id = t.department_id where t.class like '%Security%' order by e.id 
```

# javascript - 使用 SqlWhereBuilder ASP.NET 服务器控件从数据库中填充值

> ID：15251769
> 
> 赞同：0
> 
> 时间：2013-03-06T15:46:05.307
> 
> 标签：javascript, asp.net, web

我无法让 SqlWhereBuilder.js 用我的数据库中的值填充我的下拉列表。我已经指定了一个 valueentry 配置文件和一个相应的 .ascx 和 .ascx.cs 文件。我检查了 .ascx.cs 文件中的查询，它返回了我需要的值。但我无法使用这些值填充我的网站过滤器功能中的下拉列表。有什么我在这里遗漏的......我使用这个控件对吗？

我的 fieldsfile 和 operatorlists 文件从 xml 正确填充。但只有来自 db 的值不会填充。

我的 .aspx 文件：

```
<asp:Panel ID="panelContentCS" Style="overflow: hidden;" Width="650px" runat="server">
                                <div id="LayerCS" style="padding-left: 20px; padding-bottom: 10px; padding-top: 10px;
                                    padding-right: 10px;">
                                    <cc1:SqlWhereBuilder ID="swb1" runat="server" ClientCodeLocation="js/SqlWhereBuilder.js"
                                        FieldsFile="Configuration/fields.config" OperatorListsFile="Configuration/operatorLists.config"
                                        ValueEntryFile="Configuration/valueEntryDivs.config" NoConditionsText="Please Specify conditions"
                                        ButtonStyle="font-size: 10pt; background:whitesmoke;border:2px; border-style:solidline;"
                                        MainStyle="background-color:gainsboro;" ConditionCellStyle="border:1px solid black; padding:2px; background-color:#eeeeee"
                                        EditButtonText="Edit" DeleteButtonText="Delete" AddButtonText=" Add " EditButtonsHiliteColor="Gray"
                                        EditButtonsStyle="font-family: 'Arial'; font-size: 10pt; cursor:pointer;" ConditionDisplayStyle="font-family: 'Tahoma': font-size: 10pt; padding 2px;">
                                    </cc1:SqlWhereBuilder>
                                </div>
                            </asp:Panel> 
```

我的 valueEntryDivs.config：

```
<valueEntry id="vCodeR" userControl="SQLBuilder/CodeR.ascx" />
<valueEntry id="vCodeQ" userControl="SQLBuilder/CodeQ.ascx" />
<valueEntry id="vCodeT" userControl="SQLBuilder/CodeT.ascx" /> 
```

我的代码 T.ascx：

```
 <%@ Control Language="C#" AutoEventWireup="false" CodeFile="CodeT.ascx.cs"     Inherits="CodeT" TargetSchema="http://schemas.microsoft.com/intellisense/ie5" %>
<asp:DropDownList id="ddCodeT" runat="server" DataValueField="CodeT" DataTextField="CodeT"></asp:DropDownList> 
```

我的代码 T.ascx.cs：

```
public partial class CodeT : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        int count = 0;
        int j = 0;

        DbDataReader rdr = null;
        DbProviderFactory provider = Framework.ConnectionClass.GetDbFactory();
        DbConnection conn = null;
        conn = Framework.ConnectionClass.GetConnection("Code"); conn.Open();
        DbCommand cmd = provider.CreateCommand();
        cmd.CommandText = "SELECT [VALUE] AS CodeT  FROM tb_Searchcache WHERE LabelName = 'CodeT'";
        cmd.Connection = conn;

        if (!this.IsPostBack)
        {
            try
            {
                rdr =  Framework.DBClass.GetReader(ref cmd);
                ddCodeT.DataSource = rdr;
                ddCodeT.DataBind();
                count = ddCodeT.Items.Count;
                while (j < count)
                {
                    ddCodeT.Items[j].Value = "'" + ddCodeT.Items[j].Value + "'";
                    j = j + 1;
                }
            }
            finally
            {
                if ((rdr != null))
                {
                    rdr.Close();
                }
                cmd.Dispose();
                if (conn.State != ConnectionState.Closed)
                    conn.Close();

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:46:01.540

在浪费了相当多的时间之后，我才意识到我需要将 AutoEventWireup 设置为“true”。回发从未触发任何事情！

# c++ - 线段上的水平和垂直翻转

> ID：15251774
> 
> 赞同：0
> 
> 时间：2013-03-06T15:46:13.830
> 
> 标签：c++, algorithm, matrix, 2d

我有一组定义线的点（x，y）（c++向量）。如何实现一个函数，该函数返回样本线，相对于其自身大小水平和垂直翻转？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:59:39.667

我假设您的意思是您没有针对某个固定的原点进行翻转；您正在相对于线的质心翻转。

这是一些伪代码：

```
Get the min and max y and x in the vector
Height = yMax - yMin
Width = xMax - xMin
yCentroid = yMin + (Height / 2)
xCentroid = xMin + (Width / 2)

for each point...
  xNew = xMax - (xOld - xMin)
  yNew = yMax - (yOld - yMin) 
```

例如，如果我们有一条从 (-5, 3) 到 (7, 4) 到 (11, -1) 的简单 3 点线，这将给我们一条从 (11, 0) 到 (-1) 的翻转线, -1) 到 (-5, 4)。这在下面的蓝色示例中显示。

它也适用于几个点，如下面的绿色示例所示。

![算法结果的Excel图](../Images/34ca0015f1730d6ff0ed007035ed1312.png)

# c++ - SDL Surface 正在使用而未初始化错误

> ID：15251776
> 
> 赞同：1
> 
> 时间：2013-03-06T15:45:59.063
> 
> 标签：c++, opengl, sdl, game-engine

我正在使用 SDL 加载图像并将其分配给 OpenGL 四边形。我找到了一个向我展示如何操作的教程，但是当我运行程序时，它说 SDL Surface 变量（代码中的表面）正在使用而没有初始化。我不知道是不是因为我正在使用课程，因为我已经使用其他语言的知识来找到解决方案但没有运气。

这是一些代码：实体类（到目前为止）：

```
//d2_entity.h
class d2Entity
{
public:
    bool LoadImage(const char* fileName);
    void DrawImage();
    void Clear();

private:
    GLuint *texture;
    GLenum textureFormat;
    GLint noColours;
};

//d2_entity.cpp
bool d2Entity::LoadImageW(const char* fileName)
{
SDL_Surface *surface;

if((surface == IMG_Load(fileName)))
{
    // Check if image size is a power of 2
    if((surface->w & (surface->w - 1)) != 0)
        cout << "Opps! '" << fileName << "'s' width is not a power of 2!";
    if((surface->h & (surface->h -1)) != 0)
        cout << "Opps! '" << fileName << "'s' height is not a power of 2!";

    // Get the No. of channels
    d2Entity::noColours = surface->format->BitsPerPixel;
    // Contains a alpha channel  
    if(d2Entity::noColours == 4)
    {
        if(surface->format->Rmask == 0x000000ff)
            d2Entity::textureFormat = GL_RGBA;
        else
            d2Entity::textureFormat = GL_BGRA;
    }
    // No alpha channel
    else if(d2Entity::noColours == 3)
    {
        if(surface->format->Rmask == 0x000000ff)
            d2Entity::textureFormat = GL_RGB;
        else
            d2Entity::textureFormat = GL_BGR;
    }
    else
        cout << "Opps! The image '" << fileName << "' is not truecolour!" << endl;

    // Create an OpenGL texture
    glGenTextures(1, d2Entity::texture);
    glBindTexture(GL_TEXTURE_2D, *d2Entity::texture);
    // Set texture streching properties
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, d2Entity::noColours, surface->w, surface->h, 0, d2Entity::textureFormat, GL_UNSIGNED_BYTE, surface->pixels);
}
else
{
    cout << "Opps! The entity image could not be loaded!" << endl;
    SDL_Quit();
    return false;
}

if(surface)
    SDL_FreeSurface(surface);

return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:08:44.347

```
SDL_Surface *surface;    
if((surface == IMG_Load(fileName))) 
```

您从未初始化`surface`，然后您尝试将其与`IMG_Load`. 我很确定您打算分配它。

```
SDL_Surface *surface;
if((surface = IMG_Load(fileName))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:12:01.767

您在这里进行了比较而不是分配

```
if((surface == IMG_Load(fileName)))
{ 
```

代码应该是：

```
SDL_Surface surface;
surface = IMG_Load("image.bmp");

if(surface != NULL)
{
    //do stuff with surface 
```

# wcf - 获取执行异步 WCF 调用的集合

> ID：15251777
> 
> 赞同：1
> 
> 时间：2013-03-06T15:46:18.650
> 
> 标签：wcf

我有一个 UI，它调用一个名为“LongRunningProcess”的 WCF 方法——WCF 已经为我生成了异步方法“BeginLongRunningProcess”（假设客户端对象是预先配置的）：

```
for (int i = 0; i < 5; i++)
{
    WCFObject.BeginLongRunningProcess(null, null);
}

Application.Exit(); 
```

假设这个长时间运行的方法运行了一个小时。结果是在 WCF 服务器上发生了 5 次异步调用，而 UI 已关闭。

问题是，我如何获得那些正在执行的线程的列表，并取消其中一个？甚至可能吗？

问题：

1.  我如何获取线程列表
2.  我如何识别彼此的线程（我可以在调用它们时标记它们吗？）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:25:36.780

在我开始回答之前，我想解决这个问题引入的一些歧义：

WCF，或者更具体地说，承载 WCF 的 Web 应用程序，将创建一个新的服务实例来并发执行任何服务调用，而不管在客户端上创建服务使用者类时是否生成了异步方法。异步方法只是为了客户端的利益，因此可以进行服务调用，客户端可以继续执行，然后可以在以后的任意时间请求调用的结果。（通常，您会执行 MyService.BeginMyMethod 调用，稍后再执行 MyService.EndMyMethod。）

现在为了解决这个问题，我将采用更简单的方法，并假设您希望 WCF 主机跟踪其当前长时间运行的方法。为了让服务了解其长期运行的方法，您只需维护自己的静态列表即可。一个简单的代码示例：

```
public class Service1 : IService1
{
    public static List<Task> MyRunningTasks = new List<Task>();
    private static object MyRunningTasksLockObject = new object();

    public void StartMyLongRunningMethod()
    {
        var myTracker = new MyProcessTrackingClass()
        {
            OwnerName = HttpContext.Current.User.Identity.Name,
            StartTime = DateTime.Now
        };
        var myAction = new Action<object>(userState => 
            {
                var myActionTracker = (MyProcessTrackingClass)userState;
                for (int i = 0; i < 10; i++)
                {
                    System.Threading.Thread.Sleep(TimeSpan.FromMinutes(1.0));
                    myActionTracker.PercentComplete += 10M;
                }
            });
        var myTask = Task.Factory.StartNew(myAction, myTracker, TaskCreationOptions.LongRunning);
        AddLongRunningMethod(myTask);
        myTask.ContinueWith(t => RemoveLongRunningMethod(t));
    }

    private static void AddLongRunningMethod(Task item)
    {
        lock (MyRunningTasksLockObject)
        {
            MyRunningTasks.Add(item);
        }
    }
    private static void RemoveLongRunningMethod(Task item)
    {
        lock (MyRunningTasksLockObject)
        {
            MyRunningTasks.Remove(item);
        }
    }
}

public sealed class MyProcessTrackingClass
{
    public string OwnerName { get; set; }
    public DateTime StartTime { get; set; }
    public Decimal PercentComplete { get; set; }
} 
```

上面示例中的主体`myAction`是您的方法逻辑所在的位置（或者您可以从该点调用一个单独的方法）。此外，这种方法还提供了一些其他好处。一方面，服务方法本身只是创建一个`Task`将完成所有繁重工作的方法，因此该方法实际上会快速向客户端返回响应，因此无论您在客户端创建异步方法还是创建异步方法都没有关系不是。

另一个好处是，由于您的服务知道正在运行的进程，您甚至可以公开另一个允许客户端查询当前长时间运行的进程的服务方法，如下所示：

```
public IEnumerable<MyProcessTrackingClass> ListLongRunningProcesses()
{
    return MyRunningTasks.Select(t => (MyProcessTrackingClass)t.AsyncState);
} 
```

正如在最后一个示例中所指出的，`AsyncState`每个属性都`Task`包含我们的自定义类，作为`state`创建. 您可以更新以包含您希望与运行方法关联的任何属性。`StartNew``Task``MyProcessTrackingClass`

# javascript - 使用 Javascript 从文本框实时计算总计

> ID：15251780
> 
> 赞同：0
> 
> 时间：2013-03-06T15:46:02.167
> 
> 标签：javascript, asp.net, html

我正在编写一个脚本，该脚本本质上应该是每次用户在选定的文本框中输入值时更新表单的总成本。我的问题是我不确定为什么即使在通话后它也没有更新。我知道我在某个地方犯了一个错误，我只是不确定在哪里。

```
 $(document).ready(function () {
      var total = document.getElementById(txtTotalCost);
      ComputeCosts();

      total.blur(function () {
        ComputeCosts();
    }); 
```

});

```
function ComputeCosts()
{
    var amount1 = document.getElementById(txtPAmount1);
    var amount2 = document.getElementById(txtPAmount2);
    var amount3 = document.getElementById(txtPAmount3);
    var amount4 = document.getElementById(txtPAmount4);
    var amount5 = document.getElementById(txtPAmount5);
    var totalBox = document.getElementById("txtTotalCost");          

    var totalGift = (txtPAmount1.val() +txtPAmount2.val() + txtPAmount3.val()+txtPAmount4.val()+txtPAmount5.val()).toFixed(2);
    totalBox.val(totalGift);
} 
```

这是它的html方面：

```
<asp:TextBox runat="server" ID="txtPAmount1" CssClass="narrow" onClick="ComputeCosts();" text="0.00" />
<asp:TextBox runat="server" ID="txtPAmount2" CssClass="narrow" onClick="ComputeCosts();" text="0.00" />  
<asp:TextBox runat="server" ID="txtPAmount3" CssClass="narrow" onClick="ComputeCosts();" text="0.00" />  
<asp:TextBox runat="server" ID="txtPAmount4" CssClass="narrow" onClick="ComputeCosts();" text="0.00" />  
 <asp:TextBox runat="server" ID="txtTotalCost" CssClass="narrow" onClick="ComputeCosts();" text="0.00" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:53:46.243

1) 传递客户 ID

```
<%=ElementName.ClientID%> 
```

`document.getElementById("<%=ElementName.ClientID%>")`

2) 使用 onClientClick 而不是 onClick

3)`value`改用`val()` 或使用

```
var amount1 = $("#<%=txtPAmount1.ClientID%>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:07:35.217

服务器控件需要设置为`ClientIDMode="Static"`或用于`<%= %>`从客户端访问。

您还想将字符串转换为浮点数以计算总数。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TextBoxDemo.aspx.cs" 
    Inherits="WebApplication2012.TextBoxDemo" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="/Scripts/jquery-1.9.1.js"></script>
</head>
<body>
<form id="form1" runat="server">

<asp:TextBox runat="server" ID="txtPAmount1" CssClass="narrow" 
    onClick="ComputeCosts();" Text="0.00" ClientIDMode="Static" />
<asp:TextBox runat="server" ID="txtPAmount2" CssClass="narrow" 
    onClick="ComputeCosts();" Text="0.00" ClientIDMode="Static"/>
<asp:TextBox runat="server" ID="txtPAmount3" CssClass="narrow" 
    onClick="ComputeCosts();" Text="0.00" ClientIDMode="Static"/>
<asp:TextBox runat="server" ID="txtPAmount4" CssClass="narrow" 
    onClick="ComputeCosts();" Text="0.00" ClientIDMode="Static"/>
<asp:TextBox runat="server" ID="txtPAmount5" CssClass="narrow" 
    onClick="ComputeCosts();" Text="0.00" ClientIDMode="Static"/>
<asp:TextBox runat="server" ID="txtTotalCost" CssClass="narrow" 
    onClick="ComputeCosts();" Text="0.00" ClientIDMode="Static"/>

<script>
    $(document).ready(function () {
        var total = $('#txtTotalCost');
        ComputeCosts();

        total.blur(function () {
            ComputeCosts();
        });
    });

    function ComputeCosts() {
        var amount1 = parseFloat($('#txtPAmount1').val());
        var amount2 = parseFloat($('#txtPAmount2').val());
        var amount3 = parseFloat($('#txtPAmount3').val());
        var amount4 = parseFloat($('#txtPAmount4').val());
        var amount5 = parseFloat($('#txtPAmount5').val());

        var totalGift = (amount1+ amount2 + amount3 + amount4 + amount5);
        $('#txtTotalCost').val(totalGift);
    }
</script>
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:09:41.427

删除内联 onclick，并使用以下 jQuery：

```
$(function () {
    ComputeCosts();

    $(".narrow").on('click', ComputeCosts).addBack().last().on('blur', ComputeCosts);

    /* 
    Above should work, if not seperate the binds
    $(".narrow").on('click', ComputeCosts);
    $("#txtTotalCost").on('blur', ComputeCosts);
    */
});

function ComputeCosts() {
    var amount1 = parseFloat($("#txtPAmount1").val());
    var amount2 = parseFloat($("#txtPAmount2").val());
    var amount3 = parseFloat($("#txtPAmount3").val());
    var amount4 = parseFloat($("#txtPAmount4").val());
    var amount5 = parseFloat($("#txtPAmount5").val());

    var totalGift = (amount1 + amount2 + amount3 + amount4 + amount5).toFixed(2);
    $("#txtTotalCost").val(totalGift);
} 
```

# html - 整体 SVG 不透明度/透明度

> ID：15251783
> 
> 赞同：1
> 
> 时间：2013-03-06T15:46:24.123
> 
> 标签：html, svg

控制 SVG 不透明度/透明度的最佳方法是什么？我看到了诸如填充不透明度之类的属性，但我不想使其特定于“填充”。相反，我想为整个 SVG 图像定义一个整体透明度。我正在寻找一种在 SVG 内而不是从外部执行此操作的方法。情况是你在另一个里面有一个 SVG。

```
<svg xmlns="http://www.w3.org/2000/svg" ...>
....
  <image ... xlink:href="half-transparent.svg" />
....
</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:41:56.057

听起来您正在寻找该`opacity`物业。如果需要，您可以将其应用于整个 svg，详情请[点击此处](http://www.w3.org/TR/SVG11/masking.html#OpacityProperty)。

# php - 从 url 中删除 index.php 不起作用

> ID：15251785
> 
> 赞同：0
> 
> 时间：2013-03-06T15:46:30.127
> 
> 标签：php, .htaccess, codeigniter, url-rewriting, codeigniter-url

这是我的 .htaccess 文件：

```
 RewriteEngine On

     RewriteBase /mydomainname.com/
     RewriteCond $1 !^(index\.php|images|assets|robots\.txt) 
     RewriteRule ^(.*)$ /index.php/$1 [L] 
```

此代码在一个主机上运行，​​而在另一个主机上不运行。我尝试在两个主机上运行此代码

1）在一个主机上，我的代码可以在没有在 url 中添加 index.php 的情况下运行，即

```
 www.mydomainname.com/contrlerName/functionname 
```

2）在另一个域上，我需要在 url 中添加 index.php，例如：

```
 www.mydomainname.com/index.php/contrlerName/functionname 
```

可能是什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:49:07.437

删除 RewriteBase 行，这可能是您的旧行所必需的，但不是没有新行。那是非标准的，它不应该真的是必需的。可能他们有一些疯狂的虚拟主机设置。

它也可能是你的新主机，不允许 .htaccess 文件，所以它被忽略了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:51:30.597

`AllowOverride All|None|directive-type [directive-type]`

确保允许覆盖指令`.htaccess`在其不工作的第二个主机中启用文件。

[http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:56:51.527

只需检查 mod_rewrite 在您的第二个主机上的工作。询问托管支持。就像托管不支持重写一样。

# c# - 从通过反射创建的通用对象访问成员/函数而不进行反射？

> ID：15251790
> 
> 赞同：0
> 
> 时间：2013-03-06T15:46:42.860
> 
> 标签：c#, .net, vb.net, generics, reflection

我有可用的 aa 类型：

```
Type arg1 = GetGenericType(3); // based on the number passed a type is received. 
```

我想创建一个泛型类型的对象 : `MyGenericType<T>`，所以我这样做：

```
Type g1 = typeof(MyGenericType<>);
Type g2 = g1.MakeGenericType(arg1); 
```

现在我有一个存储在类型“g2”中的类型`MyGenericType<T>`，这里“T”是类型 arg1。接下来我创建一个这种类型的实例，如：

```
object objG = Activator.CreateInstance(g2); 
```

现在我将泛型类型的对象存储在“objG”中。接下来我需要从“objG”访问一些成员。我可以使用反射来做到这一点。但是有没有简单的方法来做到这一点？就像将此对象存储在某个对象中，通过该对象我可以访问其成员或将“objG”类型转换为 MyGenericType ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:51:18.690

是的，您可以利用[`dynamic`](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)下面的简单示例来做到这一点：

```
dynamic listInt = Activator.CreateInstance(typeof (List<int>));
listInt.Add(3);

int count = listInt.Count; 
```

# r - 传递给 .Internal(matrix) 的矩阵 5 参数中的 R 错误需要 7

> ID：15251793
> 
> 赞同：0
> 
> 时间：2013-03-06T15:46:44.997
> 
> 标签：r, matrix

`5 arguments passed to .Internal(matrix) which requires 7`无论出于何种原因，每当我尝试运行以下代码时，我都会不断收到错误消息：

```
library(randomForest)
set.seed(647)
myiris <- cbind(iris[1:4], matrix(runif(508 * nrow(iris)), nrow(iris), 508)) 
```

通过搜索，我发现了其他几个遇到类似问题的人，但这些人的解决方案似乎都没有对我有用。正在运行的RI版本如下：

```
 R version 2.15.3 (2013-03-01) -- "Security Blanket"
    Copyright (C) 2013 The R Foundation for Statistical Computing
    ISBN 3-900051-07-0
    Platform: x86_64-w64-mingw32/x64 (64-bit) 
```

当我运行 searchpaths() 时，我得到以下信息：

```
searchpaths()
 [1] ".GlobalEnv"                                                "C:/Users/XXXX/Documents/R/win-library/2.15/randomForest"
 [3] "tools:rstudio"                                             "C:/Program Files/R/R-2.15.3/library/stats"                
 [5] "C:/Program Files/R/R-2.15.3/library/graphics"              "C:/Program Files/R/R-2.15.3/library/grDevices"            
 [7] "C:/Program Files/R/R-2.15.3/library/utils"                 "C:/Program Files/R/R-2.15.3/library/datasets"             
 [9] "C:/Program Files/R/R-2.15.3/library/methods"               "Autoloads"                                                
[11] "C:/PROGRA~1/R/R-215~1.3/library/base" 
```

我猜这个问题不知何故源于[11]，但我不确定如何永久改变它。我在我的计算机上卸载了所有以前版本的 R 并重新安装了 2.15-3，但我仍然得到：

```
[11] "C:/PROGRA~1/R/R-215~1.3/library/base" 
```

任何解决此问题的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T06:57:06.683

如果这可能对其他人有所帮助...看来（无论出于何种原因...）我在默认工作区（〜.RData）文件中定义了一个“矩阵”函数（默认情况下保存在文档中文件夹，不幸的是，尽管多次卸载并重新安装该程序，但我从未想过在 Documents 文件夹中查找孤立的 R 文件）。

由于我几乎从不保存工作区（该文件的最后一个日期是 2011 年），我什至从未想过要在那里寻找问题（早在 2011 年，我什至怀疑我什至不知道如何编写函数......）。无论如何，从我的工作区中删除“矩阵”功能并重新保存工作区后，我不再有问题。

这个答案也适用于以下帖子：[R (2.15.3; Vista x64) matrix base package: Error 5 arguments passed to .Internal(matrix) which requires 7](https://stackoverflow.com/questions/15328610/r-2-15-3-vista-x64-matrix-base-package-error-5-arguments-passed-to-internal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:29:17.633

我不认为问题出在搜索路径中，如果路径中有 R 版本号，base 的路径看起来总是很奇怪。

您可能有太旧版本的 randomForest 或其他包。尝试`update.packages()`更新您的软件包。

# ios - CFNetwork/ASIHttpRequest：上传失败，无状态码，无响应头

> ID：15251799
> 
> 赞同：0
> 
> 时间：2013-03-06T15:47:12.097
> 
> 标签：ios, asihttprequest, cfnetwork

我在 iOS 上使用 ASIHttpRequest 来上传文件。在某些情况下，用户无法上传文件（因为某些条件不满足），因此我的服务器需要返回带有自定义标头的错误（400 状态代码）。当它发生时，ASIHttpRequest 失败但没有状态代码和响应头......

但它仅适用于大数据（超过 1M）。对于较小的数据，它的工作。我已经深入研究了源代码，发现当服务器在发送所有数据之前返回 400 时，CFNetwork 返回一个**kCFStreamEventErrorOccurred**并且从这里开始，除了读取流中的错误之外，无法读取其他内容。但是，如果在发送所有数据后请求失败，它会发送一个**kCFStreamEventEndEncountered**并从这里读取状态代码和响应阅读器。

由于 ASIHttpRequest 已停产，我想自己修复它，但我还没有找到解决方法。我担心这是 CFNetwork 的限制......我在互联网或文档上没有找到任何相关信息......

有谁知道如何处理？或者对 CFNetwork 有足够的了解可以给我一些线索？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:57:38.267

好的，我找到了答案。

我已经在服务器端修复了它。如果它返回一个带有正文的错误（甚至只有一个字符），它在 iOS 端工作，CFNetwork 能够读取状态代码和标题。

我在服务器上使用 Tomcat 和 Spring，当您只在响应中设置状态代码时，这可能是一个错误。也许它没有正确关闭响应流，我不知道。

顺便说一句，CFNetwork 似乎非常明智......因为它与 NSUrlRequest 没有任何正文一起工作。

# c - 如何检查指针（void）的值不为零（尝试取消引用通用指针）

> ID：15251805
> 
> 赞同：2
> 
> 时间：2013-03-06T15:47:29.630
> 
> 标签：c, pointers, null, segmentation-fault

抱歉，这一定是一个非常简单的问题，但是由于我尝试了不同的方式而没有任何成功，所以我必须在这里询问以确定。C编程：

有一个结构名称`rtg`。编辑： mtch 的类型是 LLIST 初始类型是 LL_NODE obj 的类型是指针（void）

. 检查时使用 gdb

```
(gdb)  print *rtg->mtch->initial->obj
Attempt to dereference a generic pointer.

(gdb) print rtg->mtch->initial->obj

$10 = (void *) 0x4cc660
(gdb) x 0x4cc660
0x4cc660:       0x00000000 
```

这个空指针会导致我的程序出现段错误。我正在寻找的只是如何检查 rtg->mtch->initial->obj 指向的值不为零？（以防止上述段错误）我的意思是如果我检查 `if (rtg->mtch->initial->obj)`，它只会检查指针 obj ，地址是否不为零（这不是我想要的，我打算检查该指针的值不为零（但是当我使用*在检查gdb之前它说“尝试取消引用通用指针”。那么检查该值不为零（并防止此段错误）的正确方法是什么？

编辑：我试过这个

```
if (*((char *) rtg->mtch->initial->obj) != NULL) 
```

但我得到了编译警告：

> 警告：指针和整数之间的比较

EDIT2，这里在源代码中定义了什么

ECM_REQUEST 是结构 ECM_REQUEST rtg；在这个结构中，将 mtch 定义为 LLIST mtch；

初始是 LL_NODE

obj 是一个指针，我想检查 obj 值不为零

所以现在一切都清楚了我的问题不是吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:31:01.800

您不能取消引用通用指针。我能想到的唯一解决方案是创建一个指向整数的临时指针来检查值。基本上

```
int *tmp = rtg->mtch->initial->obj;
if (*tmp != 0)
/* the rest of your code here */ 
```

演员表也可以工作，但在我看来，有一个临时指针会使代码更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:55:50.127

警告是因为左侧是取消引用`char *`（换句话说， a `char`），而右侧是空指针常量，形式为 a `void *`; 您正在将`char`值转换为`void *`值...也许您的意思是`char **`？

```
void *o = rtg == NULL                ? NULL
        : rtg->mtch == NULL          ? NULL
        : rtg->mtch->initial == NULL ? NULL
        : rtg->mtch->initial->obj;

if (o != NULL) { /* ... */ } 
```

...请注意，将 o 的类型更改为任何其他对象指针应该是安全的（例如，您的问题似乎暗示了`char **`？）

# php - 检索除谁被阻止查询之外的所有条目

> ID：15251807
> 
> 赞同：0
> 
> 时间：2013-03-06T15:47:36.237
> 
> 标签：php

我有下表

```
id  blocked  blocker
1     2        1
2     4        2
3     xx       xx
4     xx       xx 
```

假设我提供一个 id 2

1-我想执行一个查询，其中将输出第一个和第二个结果。

我正在使用以下查询

```
$statement = $conn->prepare('SELECT * FROM blocks WHERE blocker = :blocker OR blocked=:blocked'); 
```

这行得通吗？

现在一旦我得到这些条目的数组

```
$row = $statement->fetchAll(PDO::FETCH_ASSOC) 
```

注意：它必须得到所有行，因为我需要它们的替代值，即上面示例中的 1 和 4。

其次使用上面的结果，我有另一个表用户。我想执行一个查询，它将输出除 1 和 4 之外的所有条目（参考上表）

```
id  username  password etc
1
2
3
4 
```

如何在不使用太多服务器资源的情况下执行这两个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:57:37.860

您的第一个查询是错误的...您需要使用`OR`而不是`AND`返回 1 和 2。

`SELECT * FROM blocks WHERE blocker = :blocker OR blocked=:blocked`

现在，您可以使用连接在单个查询中获取所需的所有数据：

```
 SELECT u.*, b.* FROM blocks b, users u 
 WHERE (
    b.blocker = :blocker OR b.blocked=:blocked
 ) AND (
   u.id = b.blocker
   OR u.id = b.blocked
 ) 
```

请注意，这可能会为您提供与单个用户相对应的 2 行，例如结果可能是：

```
id username password etc id blocked blocker
1  user1    *******  **  1   2       1
2  user2    *******  **  1   2       1
2  user2    *******  **  2   4       2 
```

如果您实际上不是在谁被谁阻止之后，那么您甚至不需要选择块数据，您可以对用户进行分组或区分，因此您只能获得每个用户的一个实例：

```
 SELECT DISTINCT u.* FROM users u, blocks b 
 WHERE (
    b.blocker = :blocker OR b.blocked=:blocked
 ) AND (
   u.id = b.blocker
   OR u.id = b.blocked
 ) 
```

这将产生如下结果：

```
id username password etc
1  user1    *******  **
2  user2    *******  ** 
```

# android - 当 Android 使用 html5 地理位置进入睡眠/待机时发生了什么

> ID：15251808
> 
> 赞同：0
> 
> 时间：2013-03-06T15:47:37.900
> 
> 标签：android, google-maps, geolocation

我想在 php 中制作一个类似调度程序的 web 以用于 android 手机。所以我需要以 x 时间间隔将当前位置上传到服务器。我有开始工作的想法和代码，我的问题是：

有人在他们的手机上打开了浏览器，网络通过 ajax 以预设的时间间隔将其位置发送到服务器，并将一些项目返回到谷歌地图。但是当屏幕熄灭时手机会做什么（睡眠/待机模式）。它会继续发布位置吗？它会使用天线（A-GPS）而不是GPS来发布它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:23:33.120

I did something similar, and when de device goes on standby it stops sending data.

# jquery - 获取数组中的父索引

> ID：15251812
> 
> 赞同：-6
> 
> 时间：2013-03-06T15:47:39.003
> 
> 标签：jquery, json

我有一个数组

```
[
{
    "code": "MENU000014",
    "syskey": 2012071310410973022,
    "description": "Jiang Nan Dim Sum & Xiao Long Bao",
    "price": 0.0,
    "images": "kp-1.jpg",
    "imageb": "kp-1.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 0,
    "menutype": 1,
    "priceoperator": 0,
    "chineseDescription": ""
},
{
    "code": "MENU000019",
    "syskey": 2012071310571230035,
    "description": "Mix &  Match Multi-flavoured Xiao Long Bao",
    "price": 0.0,
    "images": "",
    "imageb": "",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 2012071310410973022,
    "menutype": 2,
    "priceoperator": 0,
    "chineseDescription": "é›ªç¢§é…é¦™è‰é›ªç³•"
},
{
    "code": "MENU000020",
    "syskey": 2012071310571230036,
    "description": "Immediate preparation for Jiang Nan Speciality",
    "price": 0.0,
    "images": "",
    "imageb": "",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 2012071310410973022,
    "menutype": 2,
    "priceoperator": 0,
    "chineseDescription": "é›ªç¢§é…é¦™è‰é›ª"
},
{
    "code": "MENU000002",
    "syskey": 2012071305045623001,
    "description": "Jiang Nan Appetizer",
    "price": 0.0,
    "images": "kp-4.jpg",
    "imageb": "kp-4.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 0,
    "menutype": 1,
    "priceoperator": 0,
    "chineseDescription": ""
},
{
    "code": "MENU000024",
    "syskey": 2012111809055570004,
    "description": "Soup",
    "price": 0.0,
    "images": "kp-5.jpg",
    "imageb": "kp-5.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 0,
    "menutype": 1,
    "priceoperator": 0,
    "chineseDescription": ""
},
{
    "code": "MENU000003",
    "syskey": 2012071305062942004,
    "description": "Double-Boiled Soup",
    "price": 0.0,
    "images": "0207_s.jpg",
    "imageb": "0207.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 2012111809055570004,
    "menutype": 2,
    "priceoperator": 0,
    "chineseDescription": "åŽŸç›…ç‚–æ±¤"
},
{
    "code": "MENU000004",
    "syskey": 2012071305080136007,
    "description": "Soup & Thick Soup",
    "price": 0.0,
    "images": "kp-5.jpg",
    "imageb": "kp-5.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 2012111809055570004,
    "menutype": 2,
    "priceoperator": 0,
    "chineseDescription": "ç¾¹ã€‚ç”Ÿæ»šæ±¤"
},
{
    "code": "MENU000022",
    "syskey": 2012111809055570002,
    "description": "Dishes",
    "price": 0.0,
    "images": "kp-6.jpg",
    "imageb": "kp-6.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 0,
    "menutype": 1,
    "priceoperator": 0,
    "chineseDescription": ""
},
{
    "code": "MENU000001",
    "syskey": 2012071304555547001,
    "description": "Pork",
    "price": 0.0,
    "images": "0403_s.jpg",
    "imageb": "0403.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 2012111809055570002,
    "menutype": 2,
    "priceoperator": 0,
    "chineseDescription": "è‚‰ç±»ã€‚çŒª"
},
{
    "code": "MENU000005",
    "syskey": 2012071306020332001,
    "description": "Prawn",
    "price": 0.0,
    "images": "0801_s.jpg",
    "imageb": "0801.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 2012111809055570002,
    "menutype": 2,
    "priceoperator": 0,
    "chineseDescription": "æµ·é²œã€‚è™¾"
},
{
    "code": "MENU000006",
    "syskey": 2012071306033011004,
    "description": "Beef",
    "price": 0.0,
    "images": "0503_s.jpg",
    "imageb": "0503.jpg",
    "plucode": "",
    "style": "",
    "option": "",
    "stocksyskey": 0,
    "parentID": 2012111809055570002,
    "menutype": 2,
    "priceoperator": 0,
    "chineseDescription": "è‚‰ç±»ã€‚ç‰›"
}, 
```

我有一个数组**2012071304555547001**的值现在我怎样才能得到数组的索引而不是这个值的索引，而不是我需要数组的索引。jquery中需要此代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:54:31.153

您是否尝试过基本`for`循环？但是，您需要将`syskey`and转换`parentID`为字符串——这个数字对于（某些实现）JavaScript 来说太大了，无法处理。

```
var index = -1;
for (var i=0; i<arr.length; i++) {
    if (arr[i].parentID === "2012071304555547001") { // use strings, not numbers
        index = i;
    };
}; 
```

# php - XSD 不返回 DOMDocument 错误

> ID：15251814
> 
> 赞同：1
> 
> 时间：2013-03-06T15:46:45.070
> 
> 标签：php, xml, xsd, domdocument, xsd-validation

我正在尝试使用 PHP 中的 XSD 验证 XML 文件`DOMDocument`。该`translation`元素不得出现在我的 XML 中，但`schemaValidate`不会返回错误。我使用另一个验证工具对验证进行了测试，它返回一个错误。我不明白为什么要`schemaValidate`验证错误的 XML。

XSD 的一部分

```
<xs:complexType name="CV">
  <xs:complexContent>
     <xs:restriction base="CE">
        <xs:sequence>
           <xs:element name="originalText" type="ED" minOccurs="0" maxOccurs="1">
              <xs:annotation>
                 <xs:documentation>
                    The text or phrase used as the basis for the coding.
                 </xs:documentation>
              </xs:annotation>
           </xs:element>
           <xs:element name="translation" type="CD" minOccurs="0" maxOccurs="0"/>
        </xs:sequence>
      </xs:restriction>
    </xs:complexContent>
  </xs:complexType> 
```

我的 XML

```
<?xml version="1.0"?>
<CV><translation/></CV> 
```

我的代码

```
$dom = new DOMDocument("1.0","UTF-8");
$dom->loadXML("<?xml version=\"1.0\"?>
<CV><translation></translation></CV>");
echo $dom->schemaValidate("TestClasses.xsd"); 
```

对于完整的 XSD [TestClasses.xsd](http://pastebin.com/RDFk1snY)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:55:16.507

乍一看，这确实像模式验证器中的一个错误。[PHP 手册](http://php.net/manual/en/domdocument.schemavalidate.php)建议（但没有明确说明）schemaValidate() 使用 libxml 。而且libxml 的XSD 支持还没有完成。

对于它的价值，我注意到注释掉这条线

```
<xs:element name="translation" type="CD" 
            minOccurs="0" maxOccurs="0"/> 
```

允许 libxml 在这里产生正确的结果，而不会使模式无效（据我从 Saxon 和 Xerces J 的快速测试中可以看出）。

# r - 您如何在 ggplot2 geom_bar 中订购填充颜色

> ID：15251816
> 
> 赞同：48
> 
> 时间：2013-03-06T15:47:56.713
> 
> 标签：r, graphics, ggplot2

我正在调用 ggplot 函数

```
ggplot(data,aes(x,y,fill=category)+geom_bar(stat="identity") 
```

结果是一个条形图，条形图由与类别对应的各种颜色填充。但是，颜色的顺序在条与条之间并不一致。假设有粉色、绿色和蓝色。有些条从下到上呈粉红色、绿色、蓝色，有些则呈绿色、粉红色、蓝色。我没有看到任何明显的模式。

这些顺序是如何选择的？我怎样才能改变它？至少，我怎样才能让 ggplot 选择一致的顺序？

(x,y 和 category) 的类分别是 (integer,numeric 和 factor)。如果我将类别设为有序因子，它不会改变这种行为。

有人知道怎么修这个东西吗？

可重现的例子：

```
dput(data)

structure(list(mon = c(9L, 10L, 11L, 10L, 8L, 7L, 7L, 11L, 9L, 
10L, 12L, 11L, 7L, 12L, 8L, 12L, 9L, 7L, 9L, 10L, 10L, 8L, 12L, 
7L, 11L, 10L, 8L, 7L, 11L, 12L, 12L, 9L, 9L, 7L, 7L, 12L, 12L, 
9L, 9L, 8L), gclass = structure(c(9L, 1L, 8L, 6L, 4L, 4L, 3L, 
6L, 2L, 4L, 1L, 1L, 5L, 7L, 1L, 6L, 8L, 6L, 4L, 7L, 8L, 7L, 9L, 
8L, 3L, 5L, 9L, 2L, 7L, 3L, 5L, 5L, 7L, 7L, 9L, 2L, 4L, 1L, 3L, 
8L), .Label = c("Down-Down", "Down-Stable", "Down-Up", "Stable-Down", 
"Stable-Stable", "Stable-Up", "Up-Down", "Up-Stable", "Up-Up"
), class = c("ordered", "factor")), NG = c(222614.67, 9998.17, 
351162.2, 37357.95, 4140.48, 1878.57, 553.86, 40012.25, 766.52, 
15733.36, 90676.2, 45000.29, 0, 375699.84, 2424.21, 93094.21, 
120547.69, 291.33, 1536.38, 167352.21, 160347.01, 26851.47, 725689.06, 
4500.55, 10644.54, 75132.98, 42676.41, 267.65, 392277.64, 33854.26, 
384754.67, 7195.93, 88974.2, 20665.79, 7185.69, 45059.64, 60576.96, 
3564.53, 1262.39, 9394.15)), .Names = c("mon", "gclass", "NG"
), row.names = c(NA, -40L), class = "data.frame") 

ggplot(data,aes(mon,NG,fill=gclass))+geom_bar(stat="identity") 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2016-01-06T16:16:05.777

从 ggplot2_2.0.0 开始，`order`美学不再可用。要获得按填充颜色排序的堆栈图，您只需按要排序的分组变量对数据集进行排序。

我经常为此`arrange`使用*dplyr*。在这里，我按调用中的`fill`因子对数据集进行排序，`ggplot`而不是创建有序数据集，但两者都可以正常工作。

```
library(dplyr)

ggplot(arrange(data, gclass), aes(mon, NG, fill = gclass)) +
    geom_bar(stat = "identity") 
```

这很容易在基础 R 中完成，当然，使用`order`带有提取括号的经典：

```
ggplot(data[order(data$gclass), ], aes(mon, NG, fill = gclass)) +
    geom_bar(stat = "identity") 
```

现在两种情况下的结果图都按所需的顺序排列： [![在此处输入图像描述](../Images/85618a514022b923405665f553190ced.png)](https://i.stack.imgur.com/aPkue.png)

**ggplot2_2.2.0 更新**

在 ggplot_2.2.0 中，填充顺序基于因子水平的顺序。*默认顺序将在堆栈顶部*而不是底部 绘制第一级。

如果您想要堆栈底部的第一级，您可以使用`reverse = TRUE`in `position_stack`。请注意，您也可以`geom_col`用作`geom_bar(stat = "identity")`.

```
ggplot(data, aes(mon, NG, fill = gclass)) +
    geom_col(position = position_stack(reverse = TRUE)) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-06T19:05:56.383

您还需要指定`order`美学。

```
ggplot(data,aes(mon,NG,fill=gclass,order=gclass))+
    geom_bar(stat="identity") 
```

![在此处输入图像描述](../Images/89859cf3ea1301012b49ff6622bab169.png)

这可能是也可能不是[错误](https://github.com/hadley/ggplot2/issues/721)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-06T16:19:12.253

要订购，您必须使用`levels`参数并通知订单。像这样：

```
data$gclass
(data$gclass2 <- factor(data$gclass,levels=sample(levels(data$gclass)))) # Look the difference in the factors order
ggplot(data,aes(mon,NG,fill=gclass2))+geom_bar(stat="identity") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-06T16:18:07.203

您可以使用功能更改颜色`scale_fill_`。例如：

```
ggplot(dd,aes(mon,NG,fill=gclass)) + 
  geom_bar(stat="identity") + 
  scale_fill_brewer(palette="blues") 
```

要在 中获得一致的排序`bars`，您需要对数据框进行排序：

```
dd = dd[with(dd, order(gclass, -NG)), ] 
```

为了改变图例的顺序，改变`gclass`因子。所以像：

```
dd$gclass= factor(dd$gclass,levels=sort(levels(dd$gclass), TRUE)) 
```

![在此处输入图像描述](../Images/b553b6491137425f8642ad59070f6ccc.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-13T09:05:18.857

在@aosmith 的回答的基础上，另一种订购酒吧的方式，我发现稍微更直观的是：

```
ggplot(data, aes(x=mon, y=reorder(NG,gclass), fill = gclass)) +
    geom_bar(stat = "identity") 
```

base stats 包中的 reorder 函数的美妙之处在于，您可以将它应用到`reorder(based_on_dimension, y, function)`其中 y 是基于_on_dimension 排序的函数，如 sum、mean 等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-15T19:11:22.670

由于此交换首先出现在“因子填充订单”中，因此我将添加一个更多解决方案，我认为它更直接一些，并且不需要更改您的基础数据。

```
ggplot(data,aes(x,y,fill=factor(category, levels = c("Down-Down", "Down-Stable", "Down-Up", "Stable-Down", "Stable-Stable", "Stable-Down", "Up-Down", "Up-Stable", "Up-Up"))) + 
geom_col(position = position_stack(reverse = FALSE)) 
```

或者按照我的喜好，我首先创建一个变量向量以简化以后的编码并使其更易于编辑：

```
v_factor_levels <- c("Down-Down", "Down-Stable", "Down-Up", "Stable-Down", "Stable-Stable", "Stable-Down", "Up-Down", "Up-Stable", "Up-Up")

ggplot(data,aes(x,y,fill=factor(category, levels = v_factor_levels)) + 
geom_col(position = position_stack(reverse = FALSE)) 
```

您不需要 geom_col() 中的反向位置元素，我将这些作为提醒，以防我想反转，但您可以通过消除它来进一步简化。

# delphi - 如何构造一个具有很多属性的对象？

> ID：15251818
> 
> 赞同：9
> 
> 时间：2013-03-06T15:48:02.513
> 
> 标签：delphi

我在设计一个类时遇到了一些麻烦。创建客户类看起来很简单：

```
TCustomer = Class
  private
    FIdNumber: String;
    FName: String;
    procedure SetName(const Value: String);
    procedure SetNumber(const Value: String);
  public
    Property Name : String read FName;
    Property IdNumber : String read FIdNumber;
    Constructor Create(Number, Name  : String);
end;

constructor TCustomer.Create(ANumber, AName: String);
begin
   SetName(AName);
   SetNumber(ANumber);
end;

MyCustomer := TCustomer.Create('1', 'John Doe'); 
```

但是我的客户有更多的属性：他住在哪里，出生日期等等。

```
TCustomer = Class
  private
    {..snip snip..}
  public
    Property Name : String read FName;
    Property IdNumber : String read FIdNumber;
    Property Street : String read FStreet;
    Property HouseNumber : Integer : read FHouseNumber;
    ..
    ..
    ..
    Constructor Create(Number, Name, Street : String; Housenumber : Integer .. .. ..);
end; 
```

如您所见，我最终得到了一个带有很多参数的构造函数。构造具有很多属性的对象的更好方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T15:54:01.997

如果某个类需要有很多字段，我会创建一个只有强制参数的构造函数，其余的我会保留在可写属性中：

```
type
  TCustomer = class
  private
    FName: string;
    FIdNumber: string;
    FStreet: string;
    FHouseNumber: Integer;
  public
    // constructor is empty or just with mandatory parameters
    constructor Create;
    // properties are writeable
    property Name: string read FName write FName;
    property IdNumber: string read FIdNumber write FIdNumber;
    property Street: string read FStreet write FStreet;
    property HouseNumber: Integer read FHouseNumber write FHouseNumber;
  end; 
```

这当然取决于您是否可以将这些属性公开为可写，但在我看来，这种用法看起来比具有许多参数的构造函数更好：

```
var
  Customer: TCustomer;
begin
  Customer := TCustomer.Create;
  Customer.Name := 'Name';
  Customer.IdNumber := 'ID number';
  Customer.Street := 'Street';
  Customer.HouseNumber := 12345;
end; 
```

# c# - 为什么 AreEqual() 不调用我的 Equals() 实现

> ID：15251820
> 
> 赞同：4
> 
> 时间：2013-03-06T15:48:08.277
> 
> 标签：c#, c#-4.0

如果我想检查，我已经看到了许多说明（[为什么 Assert.AreEqual(T obj1, Tobj2) 因相同的对象](https://stackoverflow.com/questions/7793065/why-does-assert-areequalt-obj1-tobj2-fail-with-identical-objects)而失败，[单元测试 Assert.AreEqual 失败](https://stackoverflow.com/questions/6328218/unit-test-assert-areequal-failed)，[Assert.AreEqual 因相同的类型](https://stackoverflow.com/questions/13825663/assert-areequal-fails-with-the-same-type)而失败）来为我的类实现`Equals`/`IEqualityComparer`基于字段值而不是参考的相等性。

为了尝试这样做，我无法让它工作并将问题缩小到以下问题。

我的班级*主题*需要测试。在*SubjectTestEqual*中，我希望两个实例相等，但结果是“Assert.AreEqual 失败。此外，如果我调试代码，我看不到对*Equals*和*GetHashCode*的调用。

基于神秘的“默认属性检查类型 T 是否实现 System.IEquatable 接口，如果是，则返回使用该实现的 EqualityComparer。否则，它返回使用提供的 Object.Equals 和 Object.GetHashCode 的覆盖的 EqualityComparer由 T。” 在[EqualityComparer.Default 属性文档](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28%22SYSTEM.COLLECTIONS.GENERIC.EQUALITYCOMPARER%601.DEFAULT%22%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)中，我也尝试使用 IEquatable（取消注释代码以查看效果）无济于事。

```
public class Subject : IEqualityComparer<Subject>//, IEquatable<Subject>
{
    public int Id { get; set; }

    public Subject(int name) { Id = name; }

    public bool Equals(Subject x, Subject y)
    { return (x.Id == y.Id); }

    public int GetHashCode(Subject obj)
    { return Id; }

    //public bool Equals(Subject other)
    //{ return Equals(this, other); }
}

[TestClass]
public class SubjectTest
{
    [TestMethod]
    public void SubjectTestEqual()
    { Assert.AreEqual<Subject>(new Subject(1), new Subject(1)); }

    [TestMethod]
    public void SubjectTestSame()
    {
        Subject test = new Subject(1);
        Assert.AreEqual<Subject>(test, test);
    }
} 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:49:26.450

您必须重写基本方法才能调用您的方法：

```
public override bool Equals(object obj)
{ ... }

public override int GetHashCode()
{ ... } 
```

`Equals`但是您必须应用与`GetHashcode`基本方法相同的签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:07:38.267

感谢您的回答，他们在这方面进一步帮助了我，但他们都没有完全帮助我。

如果我像这样覆盖对象的 Equals 和 GetHashCode 方法：

```
public override bool Equals(object obj)
{ return true; }

public override int GetHashCode()
{ return 0; } 
```

方法被调用，我的测试将成功。但是，当然，我不想为对象类型的参数实现这些方法。为什么我的班级会提供将实例与任何对象实例进行比较？

因此，我将此方法修改为静态：`public **static** bool Equals(Subject x, Subject y)`并引入了一种新的测试方法（为简洁起见，所有测试都在一个方法中）：

```
 [TestMethod]
    public void SubjectTestWithSubjectEquals()
    {
        Assert.IsTrue(Subject.Equals(new Subject(1), new Subject(1)));
        Assert.IsTrue(new Subject(1).Equals(new Subject(1)));
        Assert.IsFalse(Subject.Equals(new Subject(1), new Subject(2)));
        Assert.IsFalse(new Subject(1).Equals(new Subject(2)));
    } 
```

这些测试将成功。但是，我不确定这是否是一个好方法。一方面，为了`Assert.IsTrue((new Subject(1)) == (new Subject(1)));`成功，我需要实现：

```
public static bool operator ==(Subject x, Subject y)
    { return Equals(x, y); } 
```

并且还需要：

```
public static bool operator !=(Subject x, Subject y)
    { return !Equals(x, y); } 
```

此外，更进一步，希望能够比较主题类型的列表，我尝试了这个测试：

```
[TestMethod]
public void SubjectTestWithCollections()
{
    var list1 = new List<Subject>() { new Subject(1), new Subject(2) };
    var list2 = new List<Subject>() { new Subject(1), new Subject(2) };
    CollectionAssert.AreEqual(list1, list2);
} 
```

这将失败，显然，每个项目将使用 Assert.AreEqual 而不是 Subject.Equals 进行比较。我已经看到[CollectionAssert.AreEquivalent 的问题](https://stackoverflow.com/questions/5194966/mstest-collectionassert-areequivalent-failed-the-expected-collection-contains/5197536#5197536)，这让我想知道这是否主要是由 Microsoft.VisualStudio.TestTools.UnitTesting 的实现方式引起的，或者我不应该尝试对 Equals 大惊小怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:54:37.547

`Assert.AreEqual`将专门使用`Equals`传入的第一个参数的方法。它现在知道您的`IEqualityComparer`实现，因此不会使用它。

通常，当一个类需要比较对象是否相等时，它会有一个可选参数 an`IEqualityComparer`类可以用来进行比较，而不是`Equals`对象本身的方法，但是`Assert.AreEqual`不接受这样的参数。这意味着要使用`Assert.AreEqual`您需要覆盖从`Equals`继承的方法`object`，即：

```
public override bool Equals(object obj){} 
```

类型实现`IEqualityComparer` *它自己的类型*几乎没有意义。的想法`IEqualityComparer`是它允许您比较*其他类型*的平等，而不是“您自己”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:51:11.533

您的 TestClass 违反了`Object.Equals`. `Assert.AreEqual`非常合理地依赖该合同。

文档状态（在要求列表中）：

x.Equals（一个空引用（在 Visual Basic 中为无））返回 false。

# playframework - Akka 演员遥控器不起作用（在 Play 框架中）

> ID：15251821
> 
> 赞同：2
> 
> 时间：2013-03-06T15:48:10.353
> 
> 标签：playframework, akka, playframework-2.1

尝试运行以下代码时：

```
ActorRef parserActor1 =system.actorFor("akka://ParserActorsSystem@10.0.0.9:2552/user/ParserMainActor");
System.out.println("*$^%$^%$^"+parserActor1);   
parserActor1.tell("Please parse!", mainActor); 
```

第一行和第二行运行良好 - 这意味着远程处理工作正常（我认为）。在第 3 行，我收到错误“发送消息期间吞咽异常”。

我正在使用 akka-remote 版本 2.1.1。可能是什么问题？

application.conf 包含：

```
 akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "10.0.0.8"
      port = 2552
    }
 }
} 
```

这是确切的错误：“[ERROR] [03/06/2013 16:15:42.129] [New I/O worker #1] [akka://ParserActorsSystem@10.0.0.9:2552/user/ParserMainActor] 吞咽异常在消息发送期间 java.lang.IllegalStateException: await*() in I/O thread 导致死锁或突然性能下降。请改用 addListener() 或从不同的线程调用 await*()。

非常感谢，阿维亚德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:24:55.947

您遇到了 Play 与 Akka 远程处理合作公开的 Netty 怪癖：http: [//play.lighthouseapp.com/projects/82401-play-20/tickets/1042-Netty-pipeline-needs-an-executionHandler](http://play.lighthouseapp.com/projects/82401-play-20/tickets/1042-Netty-pipeline-needs-an-executionHandler)

# ruby-on-rails - FORM_TAG（Rails）：如何将选中的选项添加到选项中？

> ID：15251822
> 
> 赞同：0
> 
> 时间：2013-03-06T15:48:11.830
> 
> 标签：ruby-on-rails, forms, selected

我在 Rails 中有一个“form_tag”表单。

现在我遇到了问题，我正在将一些选项从我的数据库加载到一个选择标签。

```
<%= select("get", "object_id", Object.all.collect {|p| [p.name, p.id, {:'data-email' => p.email}] }) %> 
```

我有我想在另一个变量@object.id 中选择的对象的 ID

（通常，我用collection_select解决了这个问题。但据我所见，这不能与“form_tag”一起使用-仅与“form_for”一起使用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:52:12.147

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

> 默认情况下， post.person_id 是选定的选项。指定 :selected => value 以使用不同的选择或 :selected => nil 使所有选项保持未选中状态。

```
select("get", "object_id", Object.all.collect {|p| [p.name, p.id, {:'data-email' => p.email}] }, { :selected => @object.id }) 
```

# javascript - 从一个 jQuery 插件触发事件并在另一个插件中捕获它

> ID：15251823
> 
> 赞同：1
> 
> 时间：2013-03-06T15:48:14.620
> 
> 标签：javascript, jquery, jquery-plugins

我目前有两个插件，根据此处的 jquery 指南编写：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

从一个插件引发命名空间事件然后在另一个插件中捕获它的最佳实践方法是什么？我在这里的 jsfiddle 中设置了一个简化版本：http: [//jsfiddle.net/cMfA7/](http://jsfiddle.net/cMfA7/) - HTML 和 Javascript 如下：

HTML：

```
<div id="container">
    <button id="click">Click Me!</button>
    <div id="result"></div>
</div> 
```

Javascript：

```
/* ===========================
    Plugin that triggers event:
   =========================== */
(function( $ ){

  var methods = {
     init : function( options ) {

       return this.each(function(){
         $("#click").bind('click.pluginTrigger', methods.trigger);
       });

     },
     trigger : function( ) { 
         // TODO: Trigger to go here?

     }
  };

  $.fn.pluginTrigger = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery );

/* ===========================
    Plugin that handles event:
   =========================== */
(function( $ ){

  var methods = {
     init : function( options ) {

       return this.each(function(){
           // TODO: Binding on pluginTrigger event to go here (and call methods.result method below)?

       });

     },
     result : function( ) { 
        $("#result").text("Received!");
     }
  };

  $.fn.pluginBinder = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery );

/* ===============
    Initialisation
   =============== */
$("#container").pluginTrigger();
$("#container").pluginBinder(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:04:03.110

命名空间并不真正适用。唯一的要求是 2 个插件同意事件的名称。我的建议是触发事件的插件有一个带有事件名称的变量。然后消费者可以使用该名称：

```
// within your pluginTrigger plugin
var eventName = "pluginTriggerEvent";
$.fn.pluginTrigger.eventName = eventName;

// within your trigger method:
$(this).trigger(eventName);

// -------------------------------
// within your pluginBinder plugin init method:
$(this).on($.fn.pluginTrigger.eventName, methods.result); 
```

# jsf - selectOneMenu 中是否允许使用 panelGroup？

> ID：15251828
> 
> 赞同：0
> 
> 时间：2013-03-06T15:48:27.207
> 
> 标签：jsf, primefaces

JSF 允许这种`panelGroup`内部的“嵌套”吗？`selectOneMenu`

```
<p:selectOneMenu>
    <f:selectItem itemValue="MOUNT" itemLabel="Local directory" />
    <f:selectItem itemValue="AS3" itemLabel="Amazon S3" />
    <f:selectItem itemValue="FTP" itemLabel="FTP site" />
  <h:panelGroup rendered="#{ConfigBean.rackspace}">
    <f:selectItem itemValue="RCF" itemLabel="RackspaceCloud"/>
  </h:panelGroup>     
</p:selectOneMenu> 
```

4th`selectItem`永远不会被渲染，不管`ConfigBean.rackspace`是`true`.

我也试过`p:outputPanel`代替`h:panelGroup`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:59:31.647

您可以将其包装起来，`c:if`但如果您更改 bean 中的机架空间，它不会重新呈现选择项。

```
<c:if test="#{ConfigBean.rackspace}">
    <f:selectItem itemValue="RCF" itemLabel="RackspaceCloud"/>
  </c:if> 
```

请记住，JSTL 组件仅在创建视图期间执行，因此您将无法 `<f:selectItem itemValue="RCF" itemLabel="RackspaceCloud"/>`根据 bean 中的条件为后续 POSTS 添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:03:10.473

你不能用`<h:panelGroup`那个......你最好不要用`<c:if`那个（INMO它是一种矫枉过正）

相反，只需`f:selectItems`在服务器端有条件地使用和加载它......

# vba - VBA：否则没有如果错误

> ID：15251829
> 
> 赞同：6
> 
> 时间：2013-03-06T15:48:29.740
> 
> 标签：vba, excel

我正在尝试运行以下代码，但我在第一个子中不断得到没有 If Error 的 Else。该代码应该通过一列运行，如果单元格中有 URL，则打开网页，然后将页面信息保存为文本文件。如果没有 url，那么它只是将该文件中的文本保存为文本文件。我不知道如何更改语法以使其正常工作。

```
Sub LoopOverB()

Dim myRow As Long

myRow = 10

While Worksheets("Input_Format_A").Cells(myRow, 2).value <> ""
    If InStr(1, Worksheets("Input_Format_A").Cells(myRow, 2).value, "http://", vbTextCompare) Then Call url_Test(Worksheets("Input_Format_A").Cells(myRow, 2).value, "C:\mallet\test\" & Worksheets("Input_Format_A").Cells(myRow, 1).value & ".txt")
        myRow = myRow + 1
    Else
        Open "C:\mallet\test\" & Worksheets("Input_Format_A").Cells(myRow, 1) & ".txt" For Append As #1
        Print #1, Worksheets("Input_Format_A").Cells(myRow, 2).value
        Close #1

        myRow = myRow + 1
    End If
Wend
End Sub

Sub url_Test(URL As String, Filename As String)

Dim FSO As Object
Dim ieApp As Object
Dim Txt As String
Dim TxtFile As Object

Set FSO = CreateObject("Scripting.FileSystemObject")
Set TxtFile = FSO.OpenTextFile(Filename, 2, True, -1)

Set ieApp = CreateObject("InternetExplorer.Application")
ieApp.Visible = True
ieApp.Navigate URL

While ieApp.Busy Or ieApp.ReadyState <> 4
    DoEvents
Wend

Txt = ieApp.Document.body.innerText
TxtFile.Write Txt
TxtFile.Close

ieApp.Quit

Set ieApp = Nothing
Set FSO = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-06T15:59:41.860

在第一个的行上`If`，你必须在后面去一个新的行`Then`，否则你`If`将被隐式关闭。

```
'Good (in this case)
If <condition> Then    
   DoSomething
   myRow = myRow + 1
Else
   DoSomething Different
End if

'NOT good 
If <condition> Then  DoSomething  
   'the if is now "closed" !!!
   myRow = myRow + 1
Else
   DoSomething Different
End if 
```

# java - 什么是“A”角色？

> ID：15251830
> 
> 赞同：-4
> 
> 时间：2013-03-06T15:48:29.893
> 
> 标签：java, encryption, cryptography

事实上，如果使用代码[A]，运行会失败。我不明白为什么。我也不明白先 -'A' 然后 +'A'。为什么 [A] 失败了？[乙]好吗？

```
Code [A]  (char) (ch + key) % 26 )
Code [B]  (char) ('A' + ((ch -'A' + key) % 26))

public void run() {

        setFont("Arial-PLAIN-24");
        String line = readLine ("Enter line: ");
        int key = readInt ("Enter key: ");

        String siphertext = encryptCaesar(line , key);

        println("The result is: " + siphertext);

        String newplain = encryptCaesar(siphertext , -key);
        println("newplain:" + newplain);

    }

    private String encryptCaesar(String str , int key){
        if(key < 0){
            key = 26 - ( -key % 26 );
        }

        String result = "";
        for(int i = 0; i < str.length(); i++){
            char ch = str.charAt(i);        
            result += encryptChar(ch,key);
        }
        return result;
    }
    /**Why can't use ( (ch + key) % 26 )*/

    private char encryptChar(char ch, int key){
        if(Character.isUpperCase(ch)){
            return ( (char) ('A' + ((ch -'A' + key) % 26)) );
        }
        return ch;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:55:37.380

如果我明白你在问什么...

这里的功能`'A'`是将一个字符转换为一个数字，该数字对应于它在字母表中的顺序位置。

该表达式`(ch -'A' + key) % 26`将根据字符的顺序位置和键变量的值产生一个 0 到 25 范围内的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:52:47.353

那么 [A] 形式给出的值介于`0`和之间`25`，而 [B] 形式给出的值介于`'A'`和之间`'Z'`。它们显然不是同一种表达方式。

* * *

如果您从这个角度阅读这两种形式，`'A'`[B] 形式中的第一个用途是确保结果值保持`'A'`在`'Z'`.

减去的第二个用途`'A'`是需要正确实现凯撒加密。如果你删除它，你最终会得到不同的加密。（`- 'A'`确保`key`选择`key`字母表的第 th 轮换。没有它，您`encryptCaesar(a, key)`将实际计算`real_caesar(a, (key - 64) % 26)`；即使用不同密钥的凯撒加密。）

但是，如果您“手动执行”两个版本的代码以查看它们如何将输入字符映射到输出字符，这一切都应该是显而易见的。

# ios - 设置 UITableView 委托和数据源时的最佳实践

> ID：15251835
> 
> 赞同：0
> 
> 时间：2013-03-06T15:48:42.383
> 
> 标签：ios, uitableview, uiviewcontroller

我遇到了一个问题，即没有为包含 UITableView 的 UIViewController 调用 viewDidAppear 方法。事实上，tableView 数据源方法是在 viewWillAppear 之后立即调用的。我发现这是因为 tableView 委托和数据源是在 viewDidLoad 方法中设置的（tableView reloaddata: 没有被调用）。如果我将这两行代码移至 viewDidAppear 方法（并添加 tableView reloaddata:)，一切正常。我有点困惑，因为我通常在 viewDidLoad 方法中设置视图委托。

有没有人见过这个？这是更大问题的征兆吗？还有设置委托和数据源的最佳实践吗？

任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:57:31.377

当 UIViewController 的视图即将显示时，会调用 viewWillAppear 方法。显示 UIViewController 的视图后，将调用 viewDidAppear 方法。

每当您的 viewController 将要显示它的视图时（即第一次或它被其他一些 viewController 发现），这两个方法都会被调用。

因此，通常您应该将委托设置为 viewDidLoad 方法。

您正在观察的行为绝对没问题。没有更大问题的这种症状。

# ruby - 我可以在网站的应用程序类之外访问 Sintra 设置吗？

> ID：15251837
> 
> 赞同：1
> 
> 时间：2013-03-06T15:48:47.980
> 
> 标签：ruby, sinatra

在`Website`类中，我可以获得 root 为`settings.root`. 在课堂之外，我看不到如何获得类对象的句柄。

我可以在路由块内插入一个实例变量`@root = settings.root`，这将使 HAML 的 root 可用。这是正确的方法吗？

```
 class Website < Sinatra::Base
    configure do
      set :root, File.dirname(__FILE__)
    end
    get '/' do
      haml :index, :layout => :base
    end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:12:40.770

我认为正确的方法是使用`:locals`哈希作为`haml`调用的参数，如下所示：

```
class Website < Sinatra::Base
  configure do
    set :root, File.dirname(__FILE__)
  end
  get '/' do
    haml :index, :layout => :base, :locals => {:root_path => settings.root}
  end
end 
```

在您的视图模板中，您可以访问一个`root_path`变量。

# hadoop - 使用 mahout：运行 .jar 和输入控制台指令之间的区别

> ID：15251838
> 
> 赞同：0
> 
> 时间：2013-03-06T15:48:53.573
> 
> 标签：hadoop, mahout, recommendation-engine

我对 mahout 有点困惑：我的印象是有两种使用方法：

*   使用 Taste 推荐器执行 .jar
*   使用命令行，例如[这里](https://sites.google.com/site/recommendationalgorithm/mahout/-1-installation)`mahout recommenditembased --input input/recommend_data.csv --output output/recommendation --similarityClassname SIMILARITY_PEARSON_CORRELATION`所示。

-> 是正确的还是一样的？

我的问题是：我有一个 csv 输入文件，格式如下：user_id、item_id、rating。我有 100 000 行，我需要每天为所有用户计算推荐。我读过没有hadoop应该没问题，但事实并非如此：我创建的.jar适用于小批量但不适用于整个输入文件。

命令行方法在 5 分钟内工作，这还可以，但它不如 jar 项目灵活（最重要的是与 MySQL 数据库的接口）。

是否可以使用 .jar 并从 hadoop 中受益？由于我没有分发任何计算（hadoop 在一台服务器上运行），在 .jar-without-mahout 方法和命令行-with-hadoop 方法之间存在这种差异是否正常？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:21:47.707

100000 行并不是很多数据。我相信你不需要使用推荐算法的分布式版本，即使它以伪分布式模式运行（只有一台机器）。

您可以轻松地使用 API 来构建您自己的非分布式推荐器。这是 Mahout in Action 一书中的一个示例（我推荐阅读）[[链接]](https://github.com/tdunning/MiA/blob/master/src/main/java/mia/recommender/ch02/RecommenderIntro.java)。在这种情况下，他们使用的是基于相似用户的推荐器，从我在您的问题中看到的，您使用的是基于相似项目的推荐器。

要使用项目相似性制作一个，您需要使用 a`ItemSimilarity`而不是`UserSimilarity`. 同样，`GenericUserBasedRecommender`您将使用 a 而不是 a `GenericItemBasedRecommender`。然后，当然，您将遍历所有用户并要求为每个用户提供建议。

希望这可以帮助。

# html - 页脚的定位导致页面其他部分重叠

> ID：15251840
> 
> 赞同：2
> 
> 时间：2013-03-06T15:48:54.847
> 
> 标签：html, css, less

首先，我必须说我研究了与我相关的主题，但没有解决问题。

我的问题是什么？我用`position : absolute`&`bottom : 0`使页脚粘在页面底部。但除此之外，我还有一组小部件！页脚与它们重叠。我曾经`float : left`让小部件保持在一条线上。我试图清除他们的浮动，但没有奏效。在这里，我为您提供了该特定代码片段和屏幕截图。

代码片段：[http](http://codepen.io/tabibzadeh/pen/AvCow) ://codepen.io/tabibzadeh/pen/AvCow * 请注意 CSS 在 LESS 下

![截屏](../Images/edbf0f3b110282e41a3da758d82777c9.png)

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:39:25.063

感谢您的所有努力和回答。

我正在尝试您的想法并想出了一些新的东西，如上所述，我删除了绝对定位并应用了相对定位。然后我用来`margin-top : 400px`向下推页脚部分，它起作用了！但我想知道这是否是一个好的解决方案？

再次感谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:39:54.987

我解决了这个问题。感谢您的努力。它不需要任何定位。相对、绝对等。解决方案是`clear:both`在页脚类中添加一个并应用`margin-top`

祝朋友们好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:55:50.800

一个真正帮助我解决此类问题的网站如下：[http ://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:00:32.607

您不必使用`position:absolute`将页脚粘贴到页面底部。如果要将页脚粘贴到浏览器窗口的底部，则可以使用`position:absolute`. 但是是的，它可能会与正在发生的内容重叠，因为您的内容的高度比浏览器窗口的高度长，并且您的页脚位于内容上方。这就是您通过这样定位页脚所期望的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:17:40.417

只需在身体底部添加填充以补偿页脚高度，例如

```
body{
     padding:0 0 60px;
} 
```

如果页脚绝对位于另一个容器中，那么您可能需要向其中添加填充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T15:54:26.647

立场：绝对；将您的页脚强制放在其他 div 的顶部，因为您将其“绝对”放置在所述位置。即；底部：0。它不在乎是否有其他元素。

定位与位置：相对；应该很容易解决这个问题。

[http://webdesign.about.com/od/advancedcss/a/aa061307.htm](http://webdesign.about.com/od/advancedcss/a/aa061307.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T15:55:23.127

这是预期的行为`position: absolute`-- 元素绝对定位，与页面上的其他元素无关。如果您希望元素相对于其他元素定位，请使用`position: relative`（这是默认值）。请注意，如果您使用相对定位，则父元素和周围元素会影响您的样式。

# asp.net-mvc-4 - 使用 RabbitMQ 使用来自 ASP.net MVC 4 的 AMQP 消息

> ID：15251853
> 
> 赞同：5
> 
> 时间：2013-03-06T15:49:08.720
> 
> 标签：asp.net-mvc-4, rabbitmq

假设我想使用 RabbitMQ 使用来自 ASP.net MVC 4 的 AMQP 消息。*我在System.Web.HttpContext.Current.Application*中存储了一个对象，该对象在内部使用 BackgroundWorker 的一个实例来侦听消息（侦听器是在*Global.asax.cs*中创建的）

这是实现此操作的好方法还是应该使用静态类/单例？我对 ASP.net MVC 缺乏经验，所以我不确定。也许 ASP.net MVC 4 不是最佳平台选择？你会推荐什么？

目标是能够从 Web 界面随意监控/记录消息流量、杀死/创建/配置消费者。

这是我的第一篇 stackoverflow 帖子，因为我相信好的研究。但是，这次我想听听其他人的意见，thx :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:29:31.560

在我看来，一个 ASP.NET 应用程序是一个糟糕的 RabbitMQ 订阅者。您最好将您的订阅者实现为 Windows 服务。

1.  [Phil Haack 的这篇出色的文章](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)给出了一些很好的理由，为什么应该三思而后行将 BackgroundWorker 用于任何严肃的服务。
2.  这意味着您可以独立于您的 Web 应用程序来监控和维护您的订阅者。您可以使用 Windows 为您提供的所有开箱即用工具 - 任务监视器、性能监视​​器 - 来了解您的服务的行为方式。
3.  您可以独立于 Web 应用程序扩展订阅者。您可能只需要一个 Web 应用程序实例，但需要两个订阅者。将它们作为单独的进程为您提供了那种更细粒度的控制。

# mongodb - MongoDB：如何通过过滤返回不同的数据

> ID：15251854
> 
> 赞同：0
> 
> 时间：2013-03-06T15:49:17.783
> 
> 标签：mongodb, symfony, map, reduce

我有一个包含很多帖子的“帖子”集合，我想从中检索不同的`YearMonth`价值`post.published_date`

返回示例：

```
['201303', '201301', '201212' ... ... ] 
```

我正在使用 Symfony2 + DoctrineMongoDB。我想我必须将 QueryBuilder 与 map 和 reduce 函数一起使用，但我无法使用它们！

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:46:02.907

如果您使用的是 symfony2 和 mongo db，您可以为集合创建一个存储库，如下所示并调用存储库函数`findDistinctYearMonth`

```
class PostRepository extends DocumentRepository {    
    public function findDistinctYearMonth()
            {
                $yearMonths = $this->createQueryBuilder()
                    ->map('function() {
                    var yearMonth =
                    emit("" + this.published_date.getFullYear()+("0"+(this.published_date.getMonth()+1)).slice(-2),1);
                    }')
                    ->reduce('function(k,v) {
                       return 1;
                    }')
                    ->getQuery()
                    ->execute();

    $arr = array();
    foreach($yearMonths as $yearMonth) {
        $arr[] = $yearMonth["_id"];
    }
    return $arr;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:14:09.420

我建议在客户端过滤日期，但如果你真的需要在服务器上过滤，你可以使用聚合框架 $unwind/$addToSet 技巧。像这样的东西：

```
db.post.aggregate([
        {$match: ...}, // your match here
        {$project: {
               published_date: 1
        }},
        {$unwind: "$published_date"},
        {$group: {
             _id: "$_id",
             unique_published_date: {$addToSet: "$published_date"}
        }}
]) 
```

# c# - SQL Server 存储过程生成结果但不返回结果

> ID：15251855
> 
> 赞同：0
> 
> 时间：2013-03-06T15:49:17.957
> 
> 标签：c#, sql, sql-server, linq-to-sql, stored-procedures

我有这个存储过程：

```
alter PROCEDURE [dbo].[DynamicDropDownList]
(
    @TableName varchar(100),
    @DataTextField varchar(100),
    @ValueTextField varchar(100)
)
AS
BEGIN
SET NOCOUNT ON; 

declare @results table (DataTextField varchar(255), DataValueFIeld varchar(2));
    declare @sql varchar(max);

    set @sql = ('select ' + @DataTextField + ', ' + @ValueTextField +
                ' from ' + @TableName +
                ' order by ' + @DataTextField);

    exec(@sql);

    return;
END 
```

当我在 LinqPad 中运行它时，我得到以下输出：

![输出](../Images/92b77ade20f57e993c20b3c292e41432.png)

返回“结果 0”的代码：

```
var results = db.DynamicDropDownList("Countries", "Country", "CountryCode"); 
```

在我的网络项目中，我永远无法访问结果集 - 它只是说没有返回任何内容。我做错了什么导致结果集无法返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:58:07.167

您的 exec() 命令使 Linq2Sql 难以确定输出的形状。也就是说，每次运行 SP 时，列名都可能发生变化。

解决方法是向您的项目添加一个部分类，该类定义一个方法，该方法将调用 SPROC 并将结果集作为 IMultipleResult 对象返回。您需要为每个可能的输出创建一个 ResultType。

Scott Guthrie 的这篇文章对此进行了更多讨论：（在“处理多个结果形状”部分）[http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6 -检索数据使用存储过程.aspx](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)

当然，如果您将存储过程更改为在结果集中具有一致的列名，那会更简单。像这样：

```
ALTER PROCEDURE [dbo].[DynamicDropDownList]
(
    @TableName varchar(100),
    @DataTextField varchar(100),
    @ValueTextField varchar(100)
)
AS
BEGIN
SET NOCOUNT ON; 

    declare @results table (DataTextField varchar(255), DataValueFIeld varchar(2));
    declare @sql varchar(max);

    set @sql = ('select ' + @DataTextField + ' AS Data, ' + @ValueTextField + ' AS Value ' +
                ' from ' + @TableName + ' AS LookupTable ' +
                ' order by ' + @DataTextField);

    exec(@sql);

    return;
END 
```

# java - 如何将数据从 xlsx 文件复制到文本文件

> ID：15251863
> 
> 赞同：0
> 
> 时间：2013-03-06T15:49:28.320
> 
> 标签：java, php, excel, xlsx, vba

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:16:49.023

对于 Java 案例，您可以使用[jXLS](http://jxls.sourceforge.net/index.html)。

> jXLS 是一个小型且易于使用的 Java 库，用于使用 XLS 模板编写 Excel 文件，并使用 XML 配置将 Excel 中的数据 [强调]**读取到 Java 对象中。**

一旦您将 Excel 信息加载到 java 对象中，就可以使用任何 IO 的 java 策略轻松地**将其导出到文本文件中。**

# iis - HTTPS on server running Tomcat and IIS

> ID：15251866
> 
> 赞同：0
> 
> 时间：2013-03-06T15:49:29.953
> 
> 标签：iis, https

I have a server running Tomcat along with IIS 7.5\. I would like to know if it is possible to have https traffic going to Tomcat as well as https traffic on a sub-domain name going to IIS.

My assumption is that this is not possible, but would like some confirmation and maybe just a little clarification on the subject.

Added: Looks like this might be possible with Url rewrite in IIS, but I cannot specify the port in the host name of the rule.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:38:48.407

如果您在 IIS 中配置了站点并在 http 下运行，我不明白为什么不这样做。

从 IIS > 服务器证书的根目录创建自签名 ssl 证书，并使用 https 和刚刚创建的证书将新绑定添加到您的站点。

对于子域，您可以在 IIS 上创建另一个条目，使用相同的证书（不同的端口）或相同的端口（如果使用通配符 ssl 证书）。

# c# - 如何使用 WinRT Caliburn.Micro 将参数传递给导航视图模型？

> ID：15251867
> 
> 赞同：6
> 
> 时间：2013-03-06T15:49:33.047
> 
> 标签：c#, windows-runtime, windows-store-apps, caliburn.micro

我正在使用*WinRT Caliburn.Micro*开发一个 Windows 应用商店应用游戏，并且我依赖于导航框架。

我有游戏设置（定义玩家）和实际游戏的视图模型。从设置导航到游戏时，我想将玩家集合传递给游戏视图模型。我怎样才能做到这一点？

从示意图上看，我的视图模型目前如下所示：

```
public class SetupGameViewModel : NavigationViewModelBase
{
    public SetupGameViewModel(INavigationService ns) : base(ns) { }

    public IObservableCollection<Player> Players { get; set; }

    public void StartGame()
    {
        // This is as far as I've got...
        base.NavigationService.NavigateToViewModel<GameViewModel>();

        // How can I pass the Players collection from here to the GameViewModel?
    }
}

public class GameViewModel : NavigationViewModelBase
{
    public GameViewModel(INavigationService ns) : base(ns) { }

    public ScoreBoardViewModel ScoreBoard { get; private set; }

    public void InitializeScoreBoard(IEnumerable<Player> players)
    {
        ScoreBoard = new ScoreBoardViewModel(players);
    }
} 
```

理想情况下，我想`InitializeScoreBoard`从`GameViewModel`构造函数中调用，但据我所知，不可能将`SetupGameViewModel.Players`集合传递给`GameViewModel`构造函数。

( `INavigationService.NavigateToViewModel<T>`extension) 方法可选地接受一个`[object] parameter`参数，但这个参数似乎没有到达导航到的视图模型构造函数。而且我也无法弄清楚如何`GameViewModel.InitializeScoreBoard`从`SetupGameViewModel.StartGame`方法中显式调用方法，因为`GameViewModel`在这个阶段还没有初始化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T16:09:33.797

OK，放出来，`Caliburn.Micro`WP8和WinRT统一导航：

```
NavigationService.UriFor<TargetViewModel>().WithParam(x => x.TargetProperty, ValueToPass).Navigate(); 
```

您可以链接`WithParam`多个参数。现在有一些限制，并非所有类型都通过，我不太确定确切的原因是什么，但它与 WinRT 中导航的工作方式有关。在[`Caliburn.Micro`讨论部分](http://caliburnmicro.codeplex.com/discussions)的某处提到它。

无论如何，您可以通过这种方式导航。不要依赖构造函数，它会调用`OnInitialize`and `OnActivate`。因此，只是将其切入示例：

```
NavigationService.UriFor<DetailsViewModel>().WithParam(x => x.Id, SelectedDetailsId).Navigate(); 
```

然后在`DetailsViewModel`：

```
protected override void OnInitialize()
{
    //Here you'll have Id property initialized to 'SelectedDetailsId' from the previous screen.
} 
```

所以，在纯理论上，你可以这样做：

```
NavigationService.UriFor<GameViewModel>().WithParam(x => x.Players, Players).Navigate(); 
```

在设置中，然后：

```
public class GameViewModel
{
    public GameViewModel(INavigationService ns) : base(ns) 
    { 
       //It would probably be good to initialize Players here to avoid null
    }

    public ScoreBoardViewModel ScoreBoard { get; private set; }

    public IObservableCollection<Player> Players {get;set;}

    protected void OnInitialize()
    {
        //If everything goes as expected, Players should be populated now.
        ScoreBoard = new ScoreBoard(Players);
    }
} 
```

但在实践中，我不认为传递这样的复杂结构（类集合等）会起作用。

更原始的类型工作得很好（`int`，`string`等`DateTime`，但例如`URI`对我不起作用，总是`null`），所以最坏的情况/解决方法是，例如，`Players`在导航之前将列表序列化为临时文件并传递文件路径作为字符串在`GameViewModel`.

有更多人参与了漫游 SO 的框架，他们可能会给你更多有价值的见解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T06:57:35.173

最后，我通过实现一个临时事件处理程序解决了这个问题。事实证明，我可以使用`NavigateToViewModel<T>(object)`重载来传递播放器集合。

从[Caliburn Micro 讨论论坛](https://caliburnmicro.codeplex.com/discussions/393238)和[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh702394.aspx)中，我得到的印象是这种方法只保证适用于“原始”类型，尽管在我的场景中我到目前为止还没有发现任何问题。

我的`SetupGameViewModel.StartGame`方法现在实现如下：

```
public void StartGame()
{
    base.NavigationService.Navigated += NavigationServiceOnNavigated;
    base.NavigationService.NavigateToViewModel<GameViewModel>(Players);
    base.NavigationService.Navigated -= NavigationServiceOnNavigated;
} 
```

并且*非常*临时附加的`NavigationServiceOnNavigated`事件处理程序实现如下：

```
private static void NavigationServiceOnNavigated(object sender, NavigationEventArgs args)
{
    FrameworkElement view;
    GameViewModel gameViewModel;
    if ((view = args.Content as FrameworkElement) == null || 
        (gameViewModel = view.DataContext as GameViewModel) == null) return;

    gameViewModel.InitializeScoreBoard(args.Parameter as IEnumerable<Player>);
} 
```

不是我一直在努力的干净解决方案，但至少它似乎有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-20T21:03:39.597

在 Win Store Apps 中，您可以在 NavigationService 的帮助下在 ViewModel 之间移交复杂的对象。只有在 Silverlight 应用程序中，您才仅限于必须可序列化为字符串的对象。Win Store 应用程序中不存在此限制。

在您的情况下，类似以下内容应该可以工作。在 StartGame() 中，NavigationService 用于调用 GameViewModel。播放器列表作为一个简单的参数传递。按照惯例，此参数将分配给目标 ViewModel 的属性参数。

```
public class SetupGameViewModel : Screen 
{
    private readonly INavigationService _navigationService;

    public MainPageViewModel(INavigationService navigationService)
    {
        _navigationService = navigationService;
    }

    public IObservableCollection<Player> Players { get; set; }

    public void StartGame() 
    {
        _navigationService.NavigateToViewModel<GameViewModel>(Players);
    }

    ...
}

public class GameViewModel : Screen
{   
    private IObservableCollection<Player> _parameter;

    public IObservableCollection<Player> Parameter
    {
        get { return _parameter; }
        set
        {
            if (value.Equals(_parameter)) return;
            _parameter = value;
            NotifyOfPropertyChange(() => Parameter);
        }
    }

    protected override void OnActivate()
    {
        // do something with the player list
        // ...
    }

    ...
} 
```

可以在此处找到有关此主题的更多详细信息：[http ://wp.qmatteoq.com/using-caliburn-micro-with-universal-windows-app-navigation/](http://wp.qmatteoq.com/using-caliburn-micro-with-universal-windows-app-navigation/)

# java - Netbeans - accessing a txt file so that app works outside netbeans - where to locate the file?

> ID：15251871
> 
> 赞同：0
> 
> 时间：2013-03-06T15:49:56.493
> 
> 标签：java, netbeans, jar

I am using netbeans; I can't figure out the way we are supposed to structure the project when we want to access a ressource file (e.g. a txt file that contains static info):

Here is a simple example, I have a file called Test.java that reads inside a txt file called myfile.txt

I want to type something like :

```
public class Test {
    public static void main(String[] args) {
        try{
            File f = new File("myfile.txt");
            Scanner s = new Scanner(f);
            System.out.println(s.next());
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

which seems reasonnable if the myfile.txt is located in the same directory as the .java file.

But NO it seems that if I type my code like that, the txt file should be at the same level as src/ that is the root of my project. Ok I'll accept that and put the txt there, so I clean and build. Now if I run in netbeans (the green arrow button) it runs fine (even if there is no txt file in my build folder, which seems strange) BUT of course if I try to execute directly the jar in the dist folder (which should be the thing you want to distribute once the project is finished) the program fails since there is no txt folder inside the jar ofr next to it.

Ok so I change my strategy and go for the thing which seemed logical, that is put my txt inside the src directory. When I build it appears in the build directory, and also inside the jar.

BUT the program fails (both within netbeans and outside) since the path to the file is not proper in the new File command. So I could change and type

```
public class Test {
    public static void main(String[] args) {
        try{
            File f = new File("src/myfile.txt");
            Scanner s = new Scanner(f);
            System.out.println(s.next());
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

but now of course it won't run outside netbeans because the src folder does not mean anything to the poor .jar file.

I can't find a way to address this supposedly trivial task.

Can you help me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:46:04.093

如果您想要 jar 中的文本文件，您可以使用如下所示：

```
public class Test {
    public static void main(String[] args) {
        try{
            Scanner s = new Scanner(Test.class.getResourceAsStream("/myfile.txt")); // <- in the src folder
            Scanner s2 = new Scanner(Test.class.getResourceAsStream("./myfile.txt")); // <- in the package of your *.java file
            System.out.println(s.next());
            System.out.println(s2.next());
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:03:21.420

尝试这个：

让`File`对象像这样初始化`File f = new File("myfile.txt");`。

现在不要`myfile.txt`作为 jar 的一部分导出，而是将其放在同一目录中的 jar 文件旁边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T05:09:01.717

首先，通过 netbeans 创建一个新文件只会将文件放入项目文件夹的根目录中。（我仍然不知道如何引用这个位置）。

因此，在创建新文件时右键单击“包”，而不是项目。我创建了一个名为资源的包，并将我的文件放入其中。我使用的解决方案（也应该与 file f = new File 一起使用）：

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
InputStream input = classLoader.getResourceAsStream("resources/file.xml"); 
```

# android - 如何在 Eclipse 中重构 R.java 的包

> ID：15251877
> 
> 赞同：1
> 
> 时间：2013-03-06T15:50:11.083
> 
> 标签：android, eclipse, packages, r.java-file

我想重命名我的 Android 项目的包名。在`src/`包的文件夹重构下成功但是如果想在`gen/`文件夹下重命名包我不能这样做。因为那里有`R.java`文件。它正在*自动*重新创建自己。如果我从选项中禁用此问题，`Project -> Build Automaticall`那么我会看到其他 java 文件的新问题。

不久

如何在 Eclipse 中正确且无错误地重命名我的包名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:56:08.363

右键单击项目-> Android 工具-> 重命名应用程序包。
您还可以更改清单上的包名称并重建项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:52:15.293

Depends really on how you set up things.

The correct way to rename would be to allow eclipse do manually update all the package references:

Try:

```
Right-hand click on resource > Refactor > Rename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:03:39.220

问题已解决。这是愚蠢的 Eclipse 问题。有时它无法理解变化。我重新启动了 Eclipse，clnead 项目然后一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-02T06:44:47.313

请按照下面给出的步骤重命名 gen 文件夹中的包。

1.  右键单击gen文件夹下的包

2.  选择重构

3.  选择重命名

4.  现在根据需要更改您的包裹名称

5.  重命名时确保检查以下选项

    *   更新参考
    *   重命名子包

[![在此处输入图像描述](../Images/9e8183b92eed7913a6e93681f647354c.png)](https://i.stack.imgur.com/1Cu1J.jpg)

6.  点击确定
7.  现在单击您的清单文件
8.  选择清单选项卡
9.  您会注意到包装选项
10.  将其重命名为您想要的名称。

[![在此处输入图像描述](../Images/66d296f4c9d5f79dec308565a56e4ac9.png)](https://i.stack.imgur.com/B6Chf.jpg)

11.  现在清理并构建项目

# javascript - 如何检查变量是否是javascript中的类型化数组？

> ID：15251879
> 
> 赞同：26
> 
> 时间：2013-03-06T15:50:14.853
> 
> 标签：javascript, json, stringify, typedarray

我正在开发一款游戏，我们广泛使用类型化数组 (Float32Arrays) 作为我们的数学类型。我们从 JSON 保存和加载游戏状态。JSON stringify 输出的一个示例是这样一个数组（在 Chrome 中）是：

```
"{"0":0,"1":0,"2":0,"length":3,"byteLength":12,"byteOffset":0,"buffer":{"byteLength":12}}" 
```

这会浪费空间并导致它们作为不方便的对象加载。理想情况下，我们可以使用 stringify 'replacer' 函数来测试变量是否是类型化数组，然后在这种情况下将其转换为 bog 标准数组。不幸的是，我不确定如何可靠地测试变量是否是类型化数组。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-04-15T13:12:05.030

`ArrayBuffer.isView`应该可以帮助你。

```
var data = [0,1,2]
var dataBuffer = new ArrayBuffer( data )
var dataBufferView = new Float32Array( data )

ArrayBuffer.isView(data) //false
ArrayBuffer.isView(dataBuffer) //false
ArrayBuffer.isView(dataBufferView) //true
dataBuffer instanceof ArrayBuffer //true 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-06T15:52:01.453

`Float32Array` **如果您对它是一个或**一个子类感到满意，`Float32Array`并且它们将来自与您正在检查的代码相同的*[领域](https://tc39.github.io/ecma262/#sec-code-realms)*（松散地，窗口），[请参阅 Anton 的答案，使用`instanceof`](https://stackoverflow.com/a/18530197/157247).

如果您需要知道它**具体**是 a`Float32Array`而不是子类（并且它来自同一个领域），您可以使用`yourObject.constructor === Float32Array`：

```
if (yourObject.constructor === Float32Array) {
     // It's a Float32Array
} 
```

现场示例：

```
if (typeof Float32Array === "undefined") {
  console.log("This browser doesn't support Float32Array");
} else {
  var array = new Float32Array(10);
  console.log(array.constructor === Float32Array); // true
}
```

但请注意，如果对象源自不同的领域（如另一个框架），则会失败，因为不同的环境具有不同的`Float32Array`构造函数（即使它们执行相同的操作）。

如果您需要支持`constructor`不起作用的情况，您可以使用该`Object.prototype.toString.call(yourObject)`技巧。这将为所有 JavaScript 内置类型（, 等）返回一个有用的字符串`[object Array]`。`[object Date]`根据[规范](http://www.ecma-international.org/ecma-262/7.0/index.html#sec-object.prototype.tostring)，`Object.prototype.toString`当应用于类型化数组时，必须以格式返回字符串`"[object TypedArrayNameHere]"`。

所以：

```
if (Object.prototype.toString.call(yourObject) === "[object Float32Array]") {
     // It's a Float32Array
} 
```

现场示例：

```
if (typeof Float32Array === "undefined") {
  console.log("This browser doesn't support Float32Array");
} else {
  console.log("Object.prototype.toString.call(new Float32Array()) returns: \"" +
    Object.prototype.toString.call(new Float32Array()) + "\"");
}
```

请注意，可以创建与其类型有关的对象，从而`Object.prototype.toString`返回与 (say) 相同的返回值`Float32Array`：

```
const real = new Float32Array();
const fake = {
  get [Symbol.toStringTag]() {
    return "Float32Array";
  }
};
const realString = Object.prototype.toString.call(real);
const fakeString = Object.prototype.toString.call(fake);
console.log(realString);
console.log(fakeString);
console.log(realString === realString);

// You can also create a class that returns objects that lie:
class Foo {
  get [Symbol.toStringTag]() {
    return "Float32Array";
  }
}
const fake2 = new Foo();
console.log(Object.prototype.toString.call(fake2));
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-30T10:02:38.167

您也可以使用`yourObject instanceof Float32Array`构造。`true`如果您的对象是`Float32Array`and`false`在其他情况下的实例，它会返回。

```
if (yourObject instanceof Float32Array) {
    // your code here
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-12-23T15:52:16.410

我找到了一个更好的方法，如果你想测试每一个可能的 TypedArray，根据[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray)，你可以得到*TypedArray*构造函数。使用此构造函数，您可以测试某物是否属于其类型：

```
var x = new Uint32Array();
var TypedArray = Object.getPrototypeOf(Uint8Array);
console.log(x instanceof TypedArray);
```

您可以将其保存到这样的函数中：

```
const isTypedArray = (function() {
  const TypedArray = Object.getPrototypeOf(Uint8Array);
  return (obj) => obj instanceof TypedArray;
})(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-24T04:56:23.600

我很惊讶没有人在下面得到这个。在大多数情况下，这应该可以确定您是否有类型化数组：

```
function isTypedArray(a) { return !!(a.buffer instanceof ArrayBuffer && a.BYTES_PER_ELEMENT); }

var a = [];
console.log(isTypedArray(a)); // (false);
var a = new Float32Array(3);
console.log(isTypedArray(a)); // (true);
var dataView = new DataView(a.buffer);
console.log(isTypedArray(dataView)); // (false);
console.log(isTypedArray(Float32Array)); // (false); 
```

当然，这是“鸭子打字”，`a instanceof Float32Array`或者类似的方法是确定特定类型的最佳方式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-09T06:02:22.427

如果您想要一个更通用的测试来捕获您可以使用的任何 ArrayBufferView 和 DataView 类型：

```
if (Object.prototype.toString.call(yourObject.buffer) === "[object ArrayBuffer]") {
     // It's either an ArrayBufferView or a DataView
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-29T11:25:46.437

所有类型化的数组都继承自 ArrayBuffer。此类型包含一个 byteLength 属性，因此只需检查此属性是否可用。

```
function isTypedArray(obj)
{
    return !!obj && obj.byteLength !== undefined;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-12T11:12:48.933

实际查找所有*返回*TypedArray 的构造函数的简单方法：

```
isTypedArray = _ => _?.prototype?.__proto__?.constructor?.name == "TypedArray";
for (const key of Object.getOwnPropertyNames(window)) {
  const obj = window[key];
  if (isTypedArray(obj)) {
    console.log(key, "is a TypedArray");
  }
} 
```

当前 Chrome 中的输出：

```
Uint8Array is a TypedArray
Int8Array is a TypedArray
Uint16Array is a TypedArray
Int16Array is a TypedArray
Uint32Array is a TypedArray
Int32Array is a TypedArray
Float32Array is a TypedArray
Float64Array is a TypedArray
Uint8ClampedArray is a TypedArray
BigUint64Array is a TypedArray
BigInt64Array is a TypedArray 
```

# c# - 使用未分配的局部变量“_tr”

> ID：15251881
> 
> 赞同：0
> 
> 时间：2013-03-06T15:50:17.057
> 
> 标签：c#, windows, try-catch

```
bool _Error = false;
ThesResult _tr;
try { _tr = engine["en"].LookupSynonyms(_Word, true); }
catch (Exception)
{
    _Error = true;
}
if (_Error)
{
    _Synonyms.Add(word);
}
else
{
     List<string> SynonymNew = new List<string>();
     foreach (ThesMeaning meaning in _tr.Meanings) 
```

错误发生在底线_tr.Meanings。我不知道如何解决这个问题，逻辑上一切似乎都还可以，但我需要找到一种方法让编译器看到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:57:03.913

我要继续说，也许您可​​能想重新考虑您的操作顺序。`try... catch (set flag) if(flag)`接近于反模式。这样做有几个很好的理由：

*   这不是编写代码的最清晰的方法
*   您不会以这种方式分配额外的内存
*   您正在使用更少的变量（我的猜测是 _Error 没有在其他地方使用）

    ```
    bool _Error = false;
    // ThesResult _tr; <!-- only needed in the try block.
    try { 
        ThesResult _tr = engine["en"].LookupSynonyms(_Word, true); 
        List<string> SynonymNew = new List<string>();
        // no worries about initializing it to null.
        foreach (ThesMeaning meaning in _tr.Meanings)
        // your loop and the rest of the function.
    }
    catch (Exception)
    {
        _Synonyms.Add(word); // is this supposed to be _Word?
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:52:23.953

声明时设置`_tr`为。`null`编译器发现它可能没有被初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:51:49.227

您必须在使用它之前分配**_tr的值。**如果您想从没有水的接受者那里喝水，那么您什么都没有喝，是吗？

在代码的 try 部分中，它不能保证它将获得**_tr**的值，因此您必须在使用它之前自己初始化变量，至少使用 null。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T15:52:40.350

您`null`至少需要在使用它们之前分配给对象：

```
 bool _Error = false;
 ThesResult _tr = null;
 try { _tr = engine["en"].LookupSynonyms(_Word, true); }
 catch (Exception)
       {
          _Error = true;
       }
       if (_Error)
       {
           _Synonyms.Add(word);
       }
       else
         {
                    List<string> SynonymNew = new List<string>();
                    foreach (ThesMeaning meaning in _tr.Meanings) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T15:54:27.363

C# 要求您保证在尝试使用变量之前已为其分配了一个值。在这种情况下，如果`LookupSynonyms`方法抛出异常，则`_tr`永远不会得到值，甚至`null`.

所以它不会让你编译，除非你能保证在你使用它之前你至少已经为`null`变量分配了一些东西（甚至）。

这与其他一些语言 (VB) 不同，它自动将变量初始化为其默认值（如 null 或零或其他），或者其他语言 (C++) 变量开始为垃圾（无论发生在该内存地址中的什么）时间）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T15:53:22.157

初始化时 set _tr = null

```
ThesResult _tr = null; 
```

# licensing - 用于本地应用的 Bing 地图许可证

> ID：15251887
> 
> 赞同：1
> 
> 时间：2013-03-06T15:50:37.690
> 
> 标签：licensing, bing-maps

我看到了这个[bing 地图许可帖子](https://stackoverflow.com/questions/4736146/bing-maps-sdk-silverlight "必应地图 SDK Silverlight")，非常有帮助。但是我认为我仍然需要在这里了解更多。我们将构建一个应用程序，该应用程序将部署在客户内部网络上并由客户管理。我们的应用程序将使用 Bing Map API，在这种情况下，应该是购买我们产品以获得 Bing 地图许可证的客户，而不是我们的软件供应商。或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:20:26.257

这真的取决于你与微软的关系，我认为这两个选项都可以使用。

*   **您是经销商：**如果您有多个客户并且您想为他们简化流程，您必须与 Microsoft 讨论
*   **您不是经销商：**客户直接与 Microsoft 签订合同，每个客户都将签订一份合同

为了给你最好的答案，我强烈建议你联系这个官方邮件：[maplic@microsoft.com](http://maplic@microsoft.com)

# sql - 无法针对 nvarchar 列选择具有条件的行

> ID：15251889
> 
> 赞同：0
> 
> 时间：2013-03-06T15:50:46.897
> 
> 标签：sql, sql-server

我有一张桌子：

```
CREATE TABLE dbo.tblactivity
(
  action NVARCHAR(300)
); 
```

但是，当我运行以下查询时，我没有得到任何结果：

```
select * from tblactivity where action like 'រៀន%' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:51:43.803

# c# - 由于字符串比较，文档编号评估不正确

> ID：15251899
> 
> 赞同：0
> 
> 时间：2013-03-06T15:51:17.370
> 
> 标签：c#, .net, string, linq

    我有一个要评估的文件编号列表。这个列表非常大，我不想将所有文档编号都转换为 int，因为它们也可以包含字母。这是一个数字列表示例。

```
1070
1071
1072
1073
1074
1075
1076
1077
1078
CO1089
CO1099
CO2000 
```

    这些数字包含在 C# 中的对象中，我运行 Linq 以返回 Range 中的对象列表。这是我的 linq 代码。

```
results = from row in MyObjectList.AsQueryable<MyObject>()
          where String.Compare(row.Header.DocNumber, _sDocumentStartNumber) >= 0 
          && String.Compare(row.Header.DocNumber, _sDocumentEndNumber) <= 0
          select row; 
```

如果我的范围

**从：** 1
**到：**       10000

    用户希望取回该范围内的所有数字编号事务。但是，因为我正在比较字符串，所以我没有得到任何结果。

    我可以检测到我的 to 和 from 值是数字的，然后只评估带有数字的事务并使用基于它的 linq 语句（或编辑 linq 语句来进行转换和比较），但我现在关心的是性能，因为返回时列表可能会很大。

    我对这里的建议持开放态度，并且知道可能有许多路径都会导致相同的结果。我最关心的是***性能***。请记住，我可能会对非常大的数据集执行此操作，并且我需要在合理的时间内返回结果。

提前感谢您的任何和所有建议。

~~~编辑~~~

## 附加信息

    我正在利用的对象是 QuickBooks Online 的 Intuit IPP SDK 对象。我正在查询文档（例如发票）的直觉，并且需要对文档编号进行排序。Intuit 不在他们的服务器端执行此操作，因此我必须在我方执行此操作。根据用户为其他搜索条件输入的内容，我最终可能会将他们的所有文档都放在返回的列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:26:30.643

创建自己的比较器，例如`DocumentNumberWithinRangeComparer`：

```
public class DocumentNumberWithinRangeComparer
{
    public int? RangeFrom { get; set; }
    public int? RangeTo { get; set; }

    public DocumentNumberWithinRangeComparer(int? from, int? to)
    {
        RangeFrom = from;
        RangeTo = to;
    }

    public bool IncludeInResults(MyObject obj)
    {
        if (!RangeTo.HasValue || !RangeFrom.HasValue)
            return true;

        int docnumber;
        if (!Int32.TryParse(obj.Header.DocNumber, out docnumber))
            return false;

        return docnumber >= RangeFrom.Value && docnumber <= RangeTo.Value;
    }
} 
```

然后创建它的一个实例并使用它来过滤：

```
var comparer = new DocumentNumberWithinRangeComparer(0,100);
var results = from row in MyObjectList.AsQueryable<MyObject>()
              where comparer.IncludeInResults(row)
              select row; 
```

如果您想要更快的比较，您应该将您的“DocNumber”预处理为整数，但这仅在您处理一次文档列表然后多次查询时才有意义。

* * *

一个简单的预处理解决方案是创建一个字符串值和解析`Dictionary<string, int>`的`Header.DocNumber`数字值。对于不解析的值，您可以使用类似`-1`,`Int32.MinValue`或制作更高级的解析器来处理非数字值。

一旦你有了字典，你就可以像这样查询......

```
var dictionary = new Dictionary<string, int>(); // Fill this...
var results = from row in MyObjectList.AsQueryable<MyObject>()
              where dictionary[row.Header.DocNumber] >= _sDocumentStartNumber &&
                    dictionary[row.Header.DocNumber] <= _sDocumentEndNumber 
              select row; 
```

设置这个字典需要一些额外的时间，但如果你多次查询同一个文档集，它会得到回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:26:51.000

当你得到范围时，用空格向左填充起始数字，使其与结束数字的长度相同。所以在你的例子中，你的结束号码是“10000”。因此，将您的起始编号设为“ *_* _1”（即 4 个空格，然后是 1）。

比较时，在比较前左填充文档编号。所以：

```
string paddedStart = _sDocumentStartNumber.PadLeft(_sDocumentEndNumber.Length);
string padded;
results = from row in MyObjectList.AsQueryable<MyObject>()
      let padded = row.Header.DocNumber.PadLeft(paddedStart.Length)
      where String.Compare(padded, paddedStart) >= 0 
          && String.Compare(padded, _sDocumentEndNumber) <= 0
      select row; 
```

# python - 额外的 django 注册字段

> ID：15251902
> 
> 赞同：0
> 
> 时间：2013-03-06T15:51:20.287
> 
> 标签：python, django, django-registration

我遵循了有关如何向`django-registration`模块添加其他字段的各种教程和解决方案。他们中的一些人成功了，但是在我同步数据库后，数据没有保存。这是我的文件：

**模型.py**

```
from django.db import models
from django.contrib.auth.models import User

# Create your models here.

class Organization(models.Model):
    #user = models.ForeignKey(User, unique=True)
    name = models.CharField(max_length=100, null=True, unique=True) 
```

**表格.py**

```
from registration.forms import RegistrationForm
from django import forms
from drugisok.models import Organization

class OrganizationForm(forms.ModelForm):
    class Meta:
        model = Organization

RegistrationForm.base_fields.update(OrganizationForm.base_fields)

class CustomRegistrationForm(RegistrationForm):
    def save(self, profile_callback=None):
        user = super(CustomRegistrationForm, self).save(profile_callback=None)
        org, c = Organization.objects.get_or_create(user=user, name=self.cleaned_data['name']) 
```

数据库中有一个表，其名称`drugisok_organization`与创建的模型相对应。在该表中有一个名为的列`name`，它也对应于模型。HTML 表单本身显示了一个额外的文本输入`name`，但在提交表单时不会保存名称。

# mysql - 是否可以在不安装 MySqlConnector 的情况下进行编译？

> ID：15251904
> 
> 赞同：0
> 
> 时间：2013-03-06T15:51:23.827
> 
> 标签：mysql, entity-framework, entity-framework-5, mysql-connector

我正在为实体框架 5 开发一个使用 MySql 连接的应用程序。构建解决方案可以在我的机器上运行。

在没有安装 MySQLConnector 的机器上运行应用程序也可以，因为我在 app.config 文件中添加了以下内容：

```
<system.data>
  <DbProviderFactories>
    <clear />
    <add name="MySQL Data Provider" 
         invariant="MySql.Data.MySqlClient"
         description=".Net Framework Data Provider for MySQL"
         type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.3.6.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
  </DbProviderFactories>
</system.data> 
```

但是其他只想编译和运行我的解决方案的程序员，在 .edmx 文件上得到以下错误：

> 在配置中找不到指定的商店提供程序，或无效。

是否可以编译一个使用 MySql 和 EntityFramework 5 但没有安装 MySqlConnector 的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-29T18:26:25.027

我遇到了同样的问题，如果您不想在任何地方安装 MySqlConnector，我刚刚找到了解决方案

以文本模式打开 edmx 文件并查看其中的 Designer 部分。您应该将 ValidateOnBuild 属性设置为 True。将其设置为 false，您将不会在构建时显示错误。

```
<Designer xmlns="http://schemas.microsoft.com/ado/2009/11/edmx">
    [...] 
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="False" />
        [...] 
```

打开图表时，在属性窗口中可以使用相同的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:56:52.690

我认为不不。但我当然不知道......你可以等待其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:57:12.313

您需要在每台机器上拥有`MySql.Data.dll`并且`MySql.Data.Entity.dll`可用，因为构建依赖于它们。它们可以在操作系统中注册，也可以简单地放置在构建路径中以找到它们。

有关相关问题，请参见[此处](https://stackoverflow.com/questions/10638456/entity-framework-5-0-code-first-with-mysql-in-wpf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:11:17.970

我找到了答案：

其他没有安装 MySQL 连接器的机器实际上可以很好地编译解决方案，没有错误。

但是，edmx 设计器会自动弹出错误列表，*配置中找不到指定的商店提供程序，或者无效。*错误。但这不是构建错误！

# jquery - jquery fancybox 加载时间和唯一的 url

> ID：15251905
> 
> 赞同：0
> 
> 时间：2013-03-06T15:51:28.103
> 
> 标签：jquery, url, fancybox, loading

使用fancybox (v2)，我如何创建一个独特的url，在加载时，显示带有iframe 内容的fancybox。我可以很好地处理内联内容（例如 www.mysite.com/index.html#idgoeshere），但不知道 url 或 js 应该包含什么才能加载fancybox，并在其中包含特定的 iframe或 ajax.txt 页面。

我想要实现的是通过以下链接访问：

www.mysite.com/index.html#iframe.html

加载索引页面，打开fancybox 窗口，将iframe.html 页面加载到fancybox 窗口中（或者它也可以是通过ajax 加载的.txt 文件）。

HTML

```
<a class="fancybox fancybox.iframe" href="iframe.html">Iframe</a> 
```

花式盒

```
<script>
$(document).ready(function($) { 
$.fancybox({
content: $(window.location.hash).html()
});
$('.fancybox').fancybox();
});
</script> 
```

感谢您的任何帮助或指导。

凯尔

# .net - 如何存储 WindowsIdentity 以供以后不确定的时间使用

> ID：15251906
> 
> 赞同：2
> 
> 时间：2013-03-06T15:51:29.000
> 
> 标签：.net, vb.net, wcf, windows-identity

我有一个 WCF 服务，它在以后的不确定时间代表用户排队和执行命令。我希望将 WindowsIdentity 存储为字节数组并将其填充到数据库中，然后反序列化并使用该对象。

有时，服务按预期执行：它以用户身份正确序列化、存储、反序列化和执行命令。其他时候，我在反序列化 WindowsIdentity 时收到错误“调用的目标已引发异常”，还有其他时候反序列化有效，但在执行命令的过程中，标识不再有效。

我的问题是：在 .NET 4.0 框架中，是否可以在没有明确用户名和密码的情况下使用 WCF 在稍后的不确定时间代表用户执行命令？

我正在使用的代码如下：

序列化：

```
''' <summary>
''' Serializes a WindowsIdentity as a binary encoded byte array.
''' </summary>
''' <param name="identity">The identity to serialize.</param>
''' <returns>A byte array containing a binary representation of the identity.</returns>
Private Function SerializeWindowsIdentity(ByVal identity As WindowsIdentity) As Byte()
    If IsNothing(identity) Then Return Nothing
    Try
        Dim bf As New BinaryFormatter
        Using ms As New MemoryStream()
            bf.Serialize(ms, identity)
            Return ms.ToArray()
        End Using
    Catch ex As Exception
        Return Nothing
    End Try
End Function ' SerializeWindowsIdentity 
```

反序列化：

```
''' <summary>
''' Deserializes a WindowsIdentity from a binary encoded byte array.
''' </summary>
''' <param name="identity">A byte array containing a binary representation of a WindowsIdentity</param>
''' <returns>The deserialized WindowsIdentity from the byte array.</returns>
Private Function DeserializeWindowsIdentity(ByVal identity As Byte()) As WindowsIdentity
    If IsNothing(identity) OrElse identity.Count = 0 Then Return Nothing
    Try
        Dim bf As New BinaryFormatter()
        Using ms As New MemoryStream(identity)
            Dim obj As Object = bf.Deserialize(ms)
            Return CType(obj, WindowsIdentity)
        End Using
    Catch ex As Exception
        Return Nothing
    End Try
End Function ' DeserializeWindowsIdentity 
```

WindowsIdentity 捕获：

```
identity = SerializeWindowsIdentity(ServiceSecurityContext.Current.WindowsIdentity) 
```

用法：

```
Dim cxt As WindowsImpersonationContext
Try
    Dim wi As WindowsIdentity = DeserializeWindowsIdentity(identity)
    If Not IsNothing(wi) Then cxt = wi.Impersonate()

    ' Do Stuff
Finally
    If Not IsNothing(cxt) Then cxt.Dispose()
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:58:41.837

这是一些伪代码：

```
 //When command comes in from the user, queue the work
    private void QueueWork()
    {
        //Authorization Check
        if (IsAuthorized(DoWork, ServiceSecurityContext.Current.WindowsIdentity))
            throw new SecurityAccessDeniedException("Unauthorized");

        //Queue the work for later
        Queue.Enqueue(ServiceSecurityContext.Current.WindowsIdentity.Name);
    }

    //check if 
    private bool IsAuthorized(Action doWork, WindowsIdentity windowsIdentity)
    {
        //custom logic
    }

    //Command executed at a later point in time
    private void DoWork()
    {
        var user = Queue.Dequeue() as string;

        Log(user + " is invoking DoWork");

        //Perform command on behalf of user
        //...
    } 
```

它假定您启用了 Windows 身份验证以捕获 WindowsIdentity。

此外，我不确定您如何对命令进行排队，以及稍后如何执行它们。

如果您愿意，可以使用其他授权方式替换 IsAuthorized 方法。

该服务有权执行该操作，并简单地记录正在执行的用户和命令。

如果这不太适合您的情况，请告诉我并提供更多信息，我可以修改答案。但希望这会引导你走向正确的方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:27:37.743

因此，到目前为止，我们最好的解决方案是使用来自 的令牌`ServiceSecurityContext.Current.WindowsIdentity`并创建一个新的主令牌，我们将其序列化并存储以供以后使用。不利的一面是，一旦服务重新启动，令牌就无效了，但这是一个很好的临时解决方法，直到我们可以修改我们的服务，这样我们就不需要用户的持久授权。我们研究了使用[S4U2Proxy](http://msdn.microsoft.com/en-us/library/cc246079.aspx)这*将*做我们想做的事，但是配置服务运行的域帐户的要求对我们的用户来说有点繁琐。工作代码片段如下（注意：我们可能不再需要序列化，但由于我们不必更新数据库模式，因此更容易保持原位。此外，我们可以从令牌重复以使代码更易于管理）：

反序列化代码：

```
''' <summary>
''' Deserializes a user token from a binary encoded byte array.
''' </summary>
''' <param name="identity">A byte array containing an binary representation of a user token.</param>
''' <returns>The deserialized user token from the byte array.</returns>
Private Function DeserializeWindowsIdentityToken(ByVal identity As Byte()) As IntPtr
    If IsNothing(identity) Then Return Nothing
    Dim stream As New MemoryStream(identity)
    Dim serializer As New BinaryFormatter()
    Try
        Dim obj As Object = serializer.Deserialize(stream)
        Return CType(obj, IntPtr)
    Catch ex As Exception
        Return IntPtr.Zero
    End Try
End Function ' DeserializeWindowsIdentityToken 
```

序列化代码：

```
''' <summary>
''' Serializes a user token as a binary encoded byte array.
''' </summary>
''' <param name="identity">The token to serialize.</param>
''' <returns>A byte array containing a binary representation of the token.</returns>
Private Function SerializeWindowsIdentityToken(ByVal identity As IntPtr) As Byte()
    Try
        Dim newToken As IntPtr = IntPtr.Zero
        Const securityDelegation As Int16 = 3
        Const tokenPrimary As Integer = 1
        Const maximumAllowed As Integer = &H2000000

        Dim sa As New SecurityAttributes()
        sa.bInheritHandle = True
        sa.Length = Marshal.SizeOf(sa)
        sa.lpSecurityDescriptor = IntPtr.Zero

        If DuplicateTokenEx(identity, maximumAllowed, sa, securityDelegation, tokenPrimary, newToken) = 0 Then Return Nothing

        Dim streamWriter As New MemoryStream()
        Dim serializer As New BinaryFormatter
        serializer.Serialize(streamWriter, newToken)
        Return streamWriter.ToArray()
    Catch ex As Exception
        Return Nothing
    End Try
End Function ' SerializeWindowsIdentityToken

<StructLayout(LayoutKind.Sequential)>
Private Structure SecurityAttributes
    Public Length As Integer
    Public lpSecurityDescriptor As IntPtr
    Public bInheritHandle As Boolean
End Structure ' SecurityAttributes

<DllImport("advapi32.dll", CharSet:=CharSet.Auto, SetLastError:=True)>
Private Shared Function DuplicateTokenEx(ByVal existingTokenHandle As IntPtr,
                                         ByVal desiredAccess As UInteger,
                                         ByRef threadAttributes As SecurityAttributes,
                                         ByVal impersonationLevel As Integer,
                                         ByVal tokenType As Integer,
                                         ByRef duplicateTokenHandle As IntPtr) As Integer
End Function ' DuplicateTokenEx 
```

令牌捕获：

```
Dim storedToken As Byte() = SerializeWindowsIdentityToken(ServiceSecurityContext.Current.WindowsIdentity.Token) 
```

用法：

```
Dim identity As IntPtr = DeserializeWindowsIdentityToken(storedToken)
Dim cxt As WindowsImpersonationContext = Nothing
If Not IsNothing(identity) AndAlso identity <> IntPtr.Zero Then
    Try
        Dim identity As New WindowsIdentity(identity)
        cxt = identity.Impersonate()
    Catch ex As Exception
        ' Perform error handling
    End Try
End If

' Perform operations

If Not IsNothing(cxt) Then cxt.Dispose() 
```

# sql - DB2：合并 3 列输出的函数

> ID：15251909
> 
> 赞同：11
> 
> 时间：2013-03-06T15:51:37.760
> 
> 标签：sql, db2

我在表 1 中有以下记录

```
c1  c2  c3
----------
A   B   C 
```

如何合并 c1 c2 和 c3 以便输出

输出之间有空格的 ABC 我使用了 concat 函数，但它不采用 3 个参数，例如

```
select concat (c1,c2,c3) from table1 
```

我无法运行`select * from table1`，因为我想在一列中输出

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T16:50:48.070

这至少适用于 z/OS 版本：

```
select c1 concat ' ' concat c2 concat ' ' concat c3 
```

了解 DB2[文档](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.intro/src/tpc/db2z_concatenationofstrings.htm)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-22T16:30:12.620

我最近遇到了同样的问题，我用了|| （双管）为了连接到列。

我还必须在我的查询中编写一个包装器来克服这个问题。

下面是我的查询最终的样子的片段。

```
select a1 || a2 as a2, a3 || a4 as a4 --wrapper 2
from (
select '"service":"' as a1,a2, '","total":' as a3, a4 --wrapper 1
from (
select distinct(a2),count(*) as a4 
from abc.table
group by a2 
order by a2)
); 
```

以下是查询的输出：

```
"service":"ABC" , "total":123 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T15:54:19.337

试试这个。

```
select concat(concat (c1,c2),c3) from table1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-16T21:46:23.967

我在从 SQL 转换到 DB2 时遇到了问题。这个页面有所帮助，但我最终做了一些改变：

```
SELECT
RTRIM(C1) || '' || C2 as CFULL
FROM TABLE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-24T14:54:41.413

`SELECT C1 CONCAT '' CONCAT ( C2 CONCAT '' CONCAT C3) FROM TABLENAME`

# android - ListView 具有每行的动态视图

> ID：15251910
> 
> 赞同：2
> 
> 时间：2013-03-06T15:51:38.073
> 
> 标签：android, performance, android-layout, android-listview

我想在一个`ListView`（为了更好的性能和回收）中显示数据，但是每一行都`ListView`会有一个垂直的，但不能保证每个 LinearLayout 中会有`LinearLayout`多少。`TextViews`

目前我正在使用该模式，`ViewHolder`并且我正在将视图动态添加`LinearLayout`到`getView()`. `ListView`注意：我在`linearLayout.removeAllViews()`向其添加视图之前调用，以消除`LinearLayout`.

**Prolem** 由于在`ListView`.

任何其他想法我可以如何处理这种情况？我应该更喜欢 a `ScrollView`and a vertical`LinearLayout`而不是`ListView`？

请帮忙。

让我知道我是否需要进一步澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:04:50.687

如果您遇到性能缓慢的问题，您可能应该尽可能多地摆脱该`getView()`方法中的处理。`getView()`每次创建项目（新的或回收的）时都会调用它，并且删除所有视图并重新绘制它们有点违背回收的目的。

如果您可以在将数据发送到适配器之前解析并简化数据，这可能会`getView()`减轻方法的负担并帮助您解决性能问题。

编辑：就像上面说的 M-WaJeEh 一样，根据我的经验，控制东西`Visibility.VISIBLE`通常`Visibility.GONE`比改变膨胀的东西的数量更好。

# typo3 - TYPO3 RealUrl - alias_field 没有效果

> ID：15251912
> 
> 赞同：0
> 
> 时间：2013-03-06T15:51:39.850
> 
> 标签：typo3, realurl

我有一个安装了 RealUrl 的 TYPO3 安装。它已配置并适用于 tt_news。我复制了 realurl_conf.php 中的 tt_news 配置并将其用于我自己的扩展。配置看起来是这样的：

```
'product'    => array(
    array(
        'GETvar'      => 'tx_extension_pi1[id]',
        'lookUpTable' => array(
            'table'                 => 'tx_extension_product',
            'id_field'              => 'uid',
            'alias_field'           => 'title',
            'addWhereClause'        => ' AND NOT deleted',
            'useUniqueCache'        => 1,
            'useUniqueCache_conf'   => array(
                'strtolower'     => 1,
                'spaceCharacter' => '-',
            ),
            'languageGetVar'        => 'L',
            'languageExceptionUids' => '',
            'languageField'         => 'sys_language_uid',
            'transOrigPointerField' => 'l18n_parent',
        ),
    ),

), 
```

现在我期望的是这样的 URL（对于 tt_news 这工作正常）：

```
http://www.mydomain.com/product/product_title.html 
```

但我得到的是：

```
http://www.mydomain.com/product/1.html 
```

所以基本上'alias_field'参数没有任何作用，url总是带有条目的uid。有谁知道可能导致这种情况的原因？

答：当心 T3 语言字段。我复制了 tt_news 条目，但我的 kickstarter 扩展使用 l10n_parent，而不是 l18n_parent！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:10:53.647

只是几个猜测：

*   tx_extension_product.sys_language_uid 和 tx_extension_product.l18n_parent, tx_extension_product.title 存在吗？
*   如果你是德国头衔或头衔？
*   检查日志文件中的 PHP 错误/警告
*   模块信息 - 检查 Realurl 配置/缓存等。

对我来说，你的配置看起来是正确的。

# java - Jax-WS Glassfish XSD：?xsd=1 与 ?xsd=2

> ID：15251913
> 
> 赞同：4
> 
> 时间：2013-03-06T15:51:43.150
> 
> 标签：java, netbeans, xsd, jax-ws

我完全确定我在这里遗漏了一些简单的东西。

我正在使用 netbeans 在两个单独的项目中创建一个 web jax-ws web 服务和一个客户端，并且我使用 net beans 中的接口将一些自定义绑定添加到客户端。这一切似乎都工作正常，但每隔一段时间在对服务进行更改并重新部署 xsd 的位置后，似乎会发生变化，`/ServiceName?xsd=1`从而`/ServiceName?xsd=2`停止我的自定义绑定工作。

我可以调整我的绑定文件，这在最近几次都有效，但最后一次仍然存在一些内容`?xsd=1`- 这是 的定义`stringArray`，当我尝试刷新客户端时，这似乎导致错误。这是我得到的错误：

> 两个类具有相同的 XML 类型名称“{ [http://jaxb.dev.java.net/array](http://jaxb.dev.java.net/array) }stringArray”。使用@XmlType.name 和@XmlType.namespace 为它们分配不同的名称。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T09:22:55.547

出色地。不，你并没有真正错过任何东西。您选择的方法对于您想要实现的目标并不完美（至少根据我的经验）。

您正在使用“Java 优先”的方法（至少我是这样解释您的问题的）。使用 WSDL 优先策略可能会有所帮助：

1.  获取您生成的 WSDL 文档并将它们保存为权威 WSDL（将 .wsdl 和 .xsd 文件添加到您的项目中）。

2.  用于`wsimport`生成服务器和客户端存根。

3.  以后只对 WSDL/XSD 文件进行更改，并让`wsimport`任务生成新的存根。

4.  导入服务器生成的 WSDL 并仅使用（现在手动维护的）WSDL 文件。

直接编辑 WSDL 文件似乎更乏味，但更适合未来。您可以更好地控制生成的实体，并且对 API 的兼容与不兼容更改有更好的感觉。

# ruby - Setting up a Qt::MainWindow

> ID：15251927
> 
> 赞同：3
> 
> 时间：2013-03-06T15:52:28.247
> 
> 标签：ruby, user-interface, qt4, qtruby

So I'm 100% new to ruby qt, I'm used to python, and I got the basics but because the QMenuBar wont align properly with just Qt::Widget I have been trying to figure out the QMainWindow command. I know its like 1000% easy the second you tell me but the .setCentralWidget command doesnt seem to work for ruby so I'm just lost...

Here is my "testing" code if you get the question you really dont need this but if I dont put it up some one wil be like wherreee yourrr codddee!!! I dont get it?

```
 require 'Qt'

    class Window < Qt::Widget

        slots 'slotAbout()', 'slotExit()', 'slotNew()'

        def initialize(parent = nil)
            super(parent)

    #menubar part 

            @menubar = Qt::MenuBar.new(self)
            @menubar.setObjectName('menubar')
            @menuFile = Qt::Menu.new(@menubar)
            @menuFile.setObjectName('menuFile')
            @menuFile.setTitle('File')
            @menuHelp = Qt::Menu.new(@menubar)
            @menuHelp.setObjectName('menuHelp')
            @menuHelp.setTitle('&Help')
            @actionNew = Qt::Action.new(self)
            @actionNew.setObjectName('actionNew')
            @actionNew.setText('New')
            @actionExit = Qt::Action.new(self)
            @actionExit.setObjectName('actionExit')
            @actionExit.setText('Exit')
            @actionAbout = Qt::Action.new(self)
            @actionAbout.setObjectName('actionAbout')
            @actionAbout.setText('About')
            @menubar.addAction(@menuFile.menuAction())
            @menubar.addAction(@menuHelp.menuAction())
            @menuFile.addAction(@actionNew)
            @menuFile.addAction(@actionExit)
            @menuHelp.addAction(@actionAbout)
            @text = Qt::LineEdit.new
            @textbox.setStyleSheet "QWidget { color : #f52c01 }" 
            @textbox.setStyleSheet "QWidget { color : #009600 }" 
            @text.setStyleSheet "QWidget { color : black }"
            @text.setText(tr("Somthing"))

            connect(@actionExit, SIGNAL('triggered()'), self, SLOT('slotExit()'))
            connect(@actionNew, SIGNAL('triggered()'), self, SLOT('slotNew()'))
            connect(@actionAbout, SIGNAL('triggered()'), self, SLOT('slotAbout()'))

    #causes some bugs        
    #        statusbar = Qt::StatusBar.new(self)
    #        statusbar.setObjectName('statusbar')

    #examples of groups
            oneGroup =  Qt::GroupBox.new(tr("GroupOne"))
            oneLabel = Qt::Label.new(tr("One"))

            twoGroup =  Qt::GroupBox.new(tr("GroupTwo"))
            twoLabel = Qt::Label.new(tr("One, I mean two!"))
            twoslider = Qt::Slider.new(Qt::Horizontal)
            twoslider.setRange(0, 5)
            twoslider.setValue(0)

    #connecting objects to slots        
    #        connect(onething, SIGNAL('thing(int)'), self, SLOT('slotAbout( int )'))

    #layout set up using groups        
            oneLayout = Qt::GridLayout.new
            oneLayout.addWidget(oneLabel, 0, 0)
            oneLayout.addWidget(@text, 1, 0)
            oneGroup.layout = oneLayout

            twoLayout = Qt::GridLayout.new
            twoLayout.addWidget(twoLabel, 0, 0)
            twoLayout.addWidget(twoslider, 1, 0)
            twoGroup.layout = twoLayout

            layout = Qt::VBoxLayout.new
            layout.addWidget(@menubar)
            layout.addWidget(oneGroup)
            layout.addWidget(twoGroup)
            setLayout(layout)

            setWindowTitle(tr("Main Title"))
        end

        def slotExit()
          app.exec
        end

        def slotAbout()
          Qt::MessageBox.about(self, tr("About Recent Files"), tr("Weeeaaalllll thar theaes fear-es that make thes that which happen, well just karda happen."))
        end

        def slotNew()
          other = Window.new
          other.show()
        end

    end

    app = Qt::Application.new(ARGV)
    window = Window.new
    window.show
    app.exec 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:07:44.707

找到了一个很棒的模板，希望这可以帮助任何讨厌 ruby​​ 文档的新手。

```
 require 'Qt4'
    class Ui_MainWindow

          def setupUi(mainWindow)    
          mainWindow.setObjectName("mainWindow")    
          @font = Qt::Font.new    
          @font.setPointSize(14)    
          mainWindow.setFont(@font)    
          @centralwidget = Qt::Widget.new(mainWindow)    
          @centralwidget.setObjectName("centralwidget")    
          @qgridLayout = Qt::GridLayout.new(@centralwidget)    
          @qgridLayout.setObjectName("qgridLayout")    
          @label = Qt::Label.new(@centralwidget)    
          @label.setObjectName("label")    
          @label.setAlignment(Qt::AlignCenter)    
          @qgridLayout.addWidget(@label, 0, 0, 1, 1)   
          mainWindow.setCentralWidget(@centralwidget)    
          @menubar = Qt::MenuBar.new(mainWindow)    
          @menubar.setObjectName("menubar")    
          @menubar.setGeometry(Qt::Rect.new(0, 0, 517, 35))    
          mainWindow.setMenuBar(@menubar)    
          @statusbar = Qt::StatusBar.new(mainWindow)    
          @statusbar.setObjectName("statusbar")    
          mainWindow.setStatusBar(@statusbar)    
          @dockWidget = Qt::DockWidget.new(mainWindow)    
          @dockWidget.setObjectName("dockWidget")    
          @dockWidget.setAutoFillBackground(false)    
          @dockWidget.setAllowedAreas(Qt::TopDockWidgetArea)    
          @dockWidgetContents = Qt::Widget.new(@dockWidget)    
          @dockWidgetContents.setObjectName("dockWidgetContents")    
          @qgridLayout1 = Qt::GridLayout.new(@dockWidgetContents)    
          @qgridLayout1.setObjectName("qgridLayout1")    
          @label_2 = Qt::Label.new(@dockWidgetContents)    
          @label_2.setObjectName("label_2")    
          @label_2.setAlignment(Qt::AlignCenter)    
          @qgridLayout1.addWidget(@label_2, 0, 0, 1, 1)    
          @dockWidget.setWidget(@dockWidgetContents)    
          mainWindow.addDockWidget(4, @dockWidget)    
          @dockWidget_2 = Qt::DockWidget.new(mainWindow)    
          @dockWidget_2.setObjectName("dockWidget_2")    
          @dockWidget_2.setAllowedAreas(Qt::LeftDockWidgetArea)    
          @dockWidgetContents_2 = Qt::Widget.new(@dockWidget_2)    
          @dockWidgetContents_2.setObjectName("dockWidgetContents_2")    
          @qgridLayout2 = Qt::GridLayout.new(@dockWidgetContents_2)    
          @qgridLayout2.setObjectName("qgridLayout2")    
          @label_3 = Qt::Label.new(@dockWidgetContents_2)    
          @label_3.setObjectName("label_3")    
          @label_3.setAlignment(Qt::AlignCenter)    
          @qgridLayout2.addWidget(@label_3, 0, 0, 1, 1)    
          @dockWidget_2.setWidget(@dockWidgetContents_2)    
          mainWindow.addDockWidget(1, @dockWidget_2)    
          @dockWidget_3 = Qt::DockWidget.new(mainWindow)    
          @dockWidget_3.setObjectName("dockWidget_3")    
          @dockWidget_3.setAllowedAreas(Qt::RightDockWidgetArea)    
          @dockWidgetContents_3 = Qt::Widget.new(@dockWidget_3)    
          @dockWidgetContents_3.setObjectName("dockWidgetContents_3")    
          @qgridLayout3 = Qt::GridLayout.new(@dockWidgetContents_3)    
          @qgridLayout3.setObjectName("qgridLayout3")    
          @label_4 = Qt::Label.new(@dockWidgetContents_3)    
          @label_4.setObjectName("label_4")    
          @label_4.setAlignment(Qt::AlignCenter)    
          @qgridLayout3.addWidget(@label_4, 0, 0, 1, 1)    
          @dockWidget_3.setWidget(@dockWidgetContents_3)    
          mainWindow.addDockWidget(2, @dockWidget_3)    
          @dockWidget_4 = Qt::DockWidget.new(mainWindow)    
          @dockWidget_4.setObjectName("dockWidget_4")    
          @dockWidget_4.setAllowedAreas(Qt::BottomDockWidgetArea)    
          @dockWidgetContents_4 = Qt::Widget.new(@dockWidget_4)    
          @dockWidgetContents_4.setObjectName("dockWidgetContents_4")    
          @qgridLayout4 = Qt::GridLayout.new(@dockWidgetContents_4)    
          @qgridLayout4.setObjectName("qgridLayout4")    
          @label_5 = Qt::Label.new(@dockWidgetContents_4)    
          @label_5.setObjectName("label_5")    
          @label_5.setAlignment(Qt::AlignCenter)    
          @qgridLayout4.addWidget(@label_5, 0, 0, 1, 1)    
          @dockWidget_4.setWidget(@dockWidgetContents_4)   
          mainWindow.addDockWidget(8, @dockWidget_4)    
          retranslateUi(mainWindow);    
          size = Qt::Size.new(517, 391)    
          size = size.expandedTo(mainWindow.minimumSizeHint())    
          mainWindow.resize(size)    
          Qt::MetaObject.connectSlotsByName(mainWindow)    
          end 
          # setupUi    
          def retranslateUi(mainWindow)    
          mainWindow.setWindowTitle(Qt::Application.translate("MainWindow", "Example 2", nil, Qt::Application::UnicodeUTF8))    
          @label.setText(Qt::Application.translate("MainWindow", "Central Widget", nil, Qt::Application::UnicodeUTF8))    
          @label_2.setText(Qt::Application.translate("MainWindow", "Top Docking Area", nil, Qt::Application::UnicodeUTF8))    
          @label_3.setText(Qt::Application.translate("MainWindow", "Left Docking Area", nil, Qt::Application::UnicodeUTF8))    
          @label_4.setText(Qt::Application.translate("MainWindow", "Right Docking Area", nil, Qt::Application::UnicodeUTF8))    
          @label_5.setText(Qt::Application.translate("MainWindow", "Bottom Docking Area", nil, Qt::Application::UnicodeUTF8))    
          end 
    # retranslateUi
    end
    module Ui    
          class MainWindow < Ui_MainWindow    
          end
    end  
    # module Ui
    if $0 == __FILE__    
            a = Qt::Application.new(ARGV)    
            u = Ui_MainWindow.new
            w = Qt::MainWindow.new
            u.setupUi(w)
            w.show
            a.exec
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T13:19:52.150

因此，与 setCentralWidget 有点混淆的是，您需要将 Qt::Widget 传递给它，而将 Qt::Layout 传递给它会给您一个 NoMethodError。我认为这似乎有点违反直觉，因为大多数人都想为他们的第一个基本 GUI 设置网格、hbox 或 vbox 布局。

将小部件设置为中央小部件后，您可以调用

```
yourCentralWidget.layout = yourNewLayout 
```

并将您想要的任何布局设置为主窗口。我希望这会有所帮助！

# php - XML Import via PHP

> ID：15251929
> 
> 赞同：0
> 
> 时间：2013-03-06T15:52:29.817
> 
> 标签：php, xml, import

I've got some XML that looks a bit like this:

```
<item code="1">
  <description>This is an item.</description>
  <prices>
     <price nett="1.50"/>
     <price code="RPP" nett="20.33" />
  </prices>
</item> 
```

And I'm trying to import it into our DB using PHP like this:

```
$xmlurl = 'thexmlfile.xml';

$dom = new DOMDocument();   
$dom->load($xmlurl);

$records = $dom->getElementsByTagName('item');

foreach($records as $record) {

    $descs = $record-> getElementsByTagName('description');
    $desc = $descs->item(0)->nodeValue;
    echo $desc . '<br />';  

} 
```

That works fine. It pulls the description. However, how do I get the item code and the prices section? Loop within a loop?]

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:17:49.200

**编辑：**我更正了代码，分别遍历了每个项目的价格。

要获取项目代码，请执行以下操作；

```
$record->getAttribute('code'); 
```

您可以像您说的那样通过在循环中循环来循环该项目的价格。要访问价格，请执行以下操作；

```
$pricesTag = $record->getElementsByTagName('prices');
$prices = $pricesTag->item(0)->getElementsByTagName('price'); 
```

然后重复循环和访问节点值和价格属性的恶作剧。

来源：[类似问题](https://stackoverflow.com/questions/3816806/get-a-specific-child-tag-from-a-domelement-in-php)

工作示例：[更正的代码](http://codepad.viper-7.com/8jCHfQ)

# php - Prestashop，构建子类别树

> ID：15251941
> 
> 赞同：0
> 
> 时间：2013-03-06T15:52:45.077
> 
> 标签：php, tree, categories, prestashop

我正在尝试为 Prestashop 1.4 构建一个模块，我需要检索并显示完整的类别和子类别列表，但我发现了一些困难：

这是我的模块逻辑：

```
class HyperFeed extends Module {

 function __construct(){ blablabla } 

 public function install(){ blablabla } 

public function _getCategories(){

    $version_mask = explode('.', _PS_VERSION_, 3);
    if ($version_mask[1]<5){$id_category=1;}else{$id_category=0;}       

    function getCategories($id_category){

        $sql = 'SELECT '._DB_PREFIX_.'category.id_category,name,'._DB_PREFIX_.'category.level_depth,'._DB_PREFIX_.'category.id_parent FROM '._DB_PREFIX_.'category
        INNER JOIN '._DB_PREFIX_.'category_lang ON '._DB_PREFIX_.'category_lang.id_category = '._DB_PREFIX_.'category.id_category
         WHERE id_parent = '.$id_category.' AND id_lang = 3';

        $contentTable = '<table>';
        if ($results = Db::getInstance()->ExecuteS($sql)){
            foreach ($results as $row){

                $contentTable .= '   
                <tr>
                    <td width="3%"><input type="checkbox" name="footerBox[]" class="cmsBox" id="1_1" value="1_1"></td>
                    <td width="3%">'.$row['id_category'].'</td>
                    <td width="94%"><img style="vertical-align:middle;" src="../img/admin/lv1.gif" alt=""> &nbsp;
                    <label for="1_1" class="t"><b>'.$row['name'].'</b></label></td>
                </tr>';

                getCategories($row['id_category']);                      

            }
        }
        $contentTable .=  '</table>';

    }

    getCategories(1);
    $this->_html .= $contentTable;

} 

 public function getContent(){

$this->_html .='<form>blablabla';

$this->_getCategories();

$this->_html .='blablabla</form>';

}
    return $this->_html;
    } 
```

我得到的只是一个“未定义的变量：contentTable”，我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:09:26.183

你`$contentTable`的定义在 内`getCategories()`，而不是`_getCategories()`。

因此，在以下几行中，它被认为是未定义的。

```
getCategories(1);
$this->_html .= $contentTable; 
```

您可以尝试执行以下操作：

寻找：

```
$contentTable .=  '</table>'; 
```

用。。。来代替：

```
$contentTable .=  '</table>';
return $contentTable; 
```

寻找：

```
getCategories(1);
$this->_html .= $contentTable; 
```

用。。。来代替：

```
$contentTable = getCategories(1);
$this->_html .= $contentTable; 
```

这应该通过从 getCategories() 函数`_getCategories()`返回和分配变量来正确定义函数内的变量。`$contentTable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T08:20:26.813

我发现了别的东西

```
public static function getCategoryTree($id_product,$id_lang){
                $root = Category::getRootCategory();
                $selected_cat = Product::getProductCategoriesFull($id_product, $id_lang);
                $tab_root = array('id_category' => $root->id, 'name' => $root->name);
                $helper = new Helper();
                $category_tree = $helper->renderCategoryTree($tab_root, $selected_cat, 'categoryBox', false, true, array(), false, true);
                return $category_tree;
            } 
```

$this->getCategoryTree(null,$id_lang); 并且您将类别树作为 prestashop 后台关联选项卡。将 null 替换为 $id_product 并检查产品类别。希望我会为我糟糕的英语感到抱歉，我是法国人

# android - SharedPreferences 使应用程序强制关闭

> ID：15251942
> 
> 赞同：0
> 
> 时间：2013-03-06T15:52:45.950
> 
> 标签：android, crash, sharedpreferences, forceclose

我想通过一个类来读写`SharedPreferences`，但是当我在我的 Activity 中调用这个类时，它会使应用程序崩溃/强制关闭

如果`CheckBox`选中“记住电子邮件”，则应用程序将记住该电子邮件。

我的`LoginActivity`：

```
public class LoginActivity extends Activity
{
    private AppPreferences appPreferences;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);        
        appPreferences = new AppPreferences(); // this makes the app crash
        String email = appPreferences.getPreferenceString("email");
        // ... 
```

班上`appPreferences`

```
public class AppPreferences extends Activity
{
    private SharedPreferences settings = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        settings = this.getSharedPreferences(LOGIN_CREDENTIALS, MODE_PRIVATE);
    }
    public String getPreferenceString(String key) {
        return settings.getString(key, DEFAULT_STRING);
    }
    public void setPreferenceString(String key, String value) {
    editor.putString(key, (String) value);
    }
// ... 
```

我一直在寻找几个小时来解决这个问题，我尝试了 SO 的几种解决方案。我确实在`getSharedPreferences`方法中调用了该`onCreate`方法，这样就不会出现问题。

我究竟做错了什么？我是 Java 和 Android 开发的新手，所以请用示例充分描述。也欢迎其他采用完全不同方法的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:55:51.043

不要在 AppPreferences 中扩展 Activity 类。并删除该`onCreate()`方法。

喜欢这种方式。

```
public class AppPreferences extends Activity
{
    private SharedPreferences settings = null;
    AppPreferences(Context context) {
        settings = context.getSharedPreferences(LOGIN_CREDENTIALS, MODE_PRIVATE);
    }

    ...//Rest of your code.

} 
```

在登录活动中。

```
appPreferences = new AppPreferences(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:56:54.537

因为您正在尝试创建一个扩展 Activity 类的类对象。如果 AppPreferences 是非 Activity 类，则只需传递当前的 Activity 上下文，以将 SharedPreferences 相关代码分离到单独的 java 类中：

```
public class AppPreferences  
{
    private SharedPreferences settings = null;
    Context context;
    public AppPreferences(Context context){
     this.context=context;
     settings = context.getSharedPreferences(LOGIN_CREDENTIALS, MODE_PRIVATE);
    }
//your code here.... 
```

}

`AppPreferences`现在使用构造函数传递 Activity 上下文：

```
appPreferences = new AppPreferences(LoginActivity.this);
String email = appPreferences.getPreferenceString("email"); 
```

# ios - 如何从 NSArray 输出中删除新行

> ID：15251944
> 
> 赞同：2
> 
> 时间：2013-03-06T15:52:55.367
> 
> 标签：ios, objective-c, nsarray

我正在尝试从 NSArray 输出中删除新行返回。我首先将其转换为 NSString 以删除 () 但新行仍然显示

```
NSString *myArrayString = [self.selectedStates description];

NSCharacterSet *charsToTrim = [NSCharacterSet characterSetWithCharactersInString:@"()\n\""];
myArrayString = [myArrayString stringByTrimmingCharactersInSet:charsToTrim]; 
```

我的输出如下所示。我需要以某种方式删除新行，所以不要这样：

```
 1,
2,
3,
4,
5,
6 
```

我会`1,2,4,5,6`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:55:29.997

依靠`description`不是*一个好主意*。如何**以正确的方式做事？**

```
NSString *desc = [theArray componentsJoinedByString:@","]; 
```

（顺便说一句，你可以按照你接近它的方式来做：

```
NSString *desc = [[theArray description] stringByReplacingOccurrencesOfString:@"\n" withString:@""]; 
```

但同样，请不要这样做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:56:23.130

的使用`- (NSString *)componentsJoinedByString:(NSString *)separator`方法`NSArray`

例如

```
NSArray *pathArray = [NSArray arrayWithObjects:@"here", @"be", @"dragons", nil];
NSLog(@"%@",[pathArray componentsJoinedByString:@","]); 
```

# jquery - Jquery：如果值与加载页面时的值相同，则按下提交按钮时删除值

> ID：15251945
> 
> 赞同：-1
> 
> 时间：2013-03-06T15:52:57.430
> 
> 标签：jquery, forms, input

当按下提交按钮时，我将如何删除每个输入具有相同值的字段值，就像使用 Jquery 加载页面时一样。

**逻辑示例：** 在加载时将变量设置为等于每个输入值 在提交按钮的鼠标按下时，如果该值仍与该变量匹配，则删除该值。

还是 jQuery 的新手，感谢您的帮助 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:00:16.963

我将使用的一种方法是设置自定义 HTML 属性，例如：

```
<input name="foo" value="test" data-default="test" /> 
```

然后，当用户提交表单时，我们将表单的值与默认值进行比较。如果它们相同，那么我们将其重置。所以：

```
$(document).ready(function() {
    $('form').submit(function() {
        $(this).find('input').each(function() { 
            if($(this).val() == $(this).attr('data-default')) $(this).val('');
        });
    });
}); 
```

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:05:26.187

将 onChange 事件添加到所有输入字段以跟踪修改了哪些字段。

在另一个属性中存储默认值会增加页面加载时间并复制所有数据。也许你的数据是大量的。如果是这样，请注意变化。

**例子：**

```
var untouched_fields = []
$(document).ready(function() {
   $('#form input').each(function() { untouched_fields.push( $(this).attr("id") ) }
   $('#form input').on("change", function() { untouched_fields.remove( $(this).attr("id") ) })
}) 
```

..然后在提交时，阅读 untouched_fields。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:13:16.913

首先，如果浏览器支持占位符，请使用它们而不是您的功能。接下来，如果不支持占位符，则最初相应地更新输入，然后在提交时撤消该更改。

**HTML**：

```
<input name="first-name" placeholder="First Name" /> 
```

**JavaScript**：

```
// before all of your code
jQuery.support.placeholder = (function(){
    var i = document.createElement('input');
    return 'placeholder' in i;
})();

// in document ready
if (!$.support.placeholder) {
    // update value of empty inputs to the value of the placeholder attribute if set.
    $("input[placeholder]").val(function(i,val) {
        return val == "" ? $(this).attr("placeholder") || "" : val;
    }).focus(function(){
        if (this.value == $(this).attr("placeholder")) {
            this.value = "";
        }
    }).blur(function(){
        if (this.value == "") {
            this.value = $(this).attr("placeholder");
        }
    });
}

$('form').submit(function() {
    if (!$.support.placeholder) {
        $("input[placeholder]",this).val(function(i,val) {
            return val == $(this).attr("placeholder") ? "" : val;
        });
    }
}); 
```

在我自己的代码中，我实际上会在输入后面放置一个标签并显示/隐藏它，而不是触摸输入的值。

# jsf - JSF-Request Scope -> 如何归档最新列表以及从表到对象的可靠映射？

> ID：15251950
> 
> 赞同：1
> 
> 时间：2013-03-06T15:53:13.670
> 
> 标签：jsf, scope

嗨，我正在玩 jsf 2.1

我有以下处理程序

```
@Controller("testHandler")
@Scope("request")
public class TestHandler {

    public class EntityObject {

        public EntityObject(String value) {
            this.value = value;
        }

        private String value = "";

        public String getValue() {
            return value;
        }

        public void setValue(String value) {
            log.info(this + " Set value from " + this.value + " to " + value);
            this.value = value;
        }
    }

    private Logger log = Logger.getLogger(getClass());

    private List<EntityObject> objects = new ArrayList<TestHandler.EntityObject>();

    @PostConstruct
    public void init() {
        log.info("INIT");
        // addItem("O0");
        addItem("O1");
        addItem("O2");
        addItem("O3");
    }

    private void addItem(String name) {
        EntityObject e = new EntityObject(name);
        log.info("add " + e + " with value " + name);
        objects.add(e);
    }

    public List<EntityObject> getObjects() {
        return objects;
    }

    public void setObjects(List<EntityObject> objects) {
        this.objects = objects;
    }

} 
```

而这个jsf

```
 <h:form>
        <h:dataTable value="#{testHandler.objects}" var="object">

            <h:column>
                <h:inputText value="#{object.value}" />
            </h:column>

        </h:dataTable>

        <h:commandButton value="submit" />
    </h:form> 
```

我在调试模式下运行tomcat，所以我可以热替换代码。

现在我正在打开页面

```
init | INIT
addItem | add TestHandler$EntityObject@41c3cce3 with value O1
addItem | add TestHandler$EntityObject@1dc06cd0 with value O2
addItem | add TestHandler$EntityObject@4427daf2 with value O3 
```

*   我看到有 3 个输入字段的表格
*   我在每个值的末尾添加“更改”
*   我取消注释“addItem（“O0”）；” 在初始化方法中
*   我点击提交按钮

->

```
init | INIT
addItem | add TestHandler$EntityObject@5d653eaa with value O0
addItem | add TestHandler$EntityObject@21f53acd with value O1
addItem | add TestHandler$EntityObject@6ae77a25 with value O2
addItem | add TestHandler$EntityObject@30449f8 with value O3
setValue | TestHandler$EntityObject@5d653eaa Set value from O0 to O1change
setValue | TestHandler$EntityObject@21f53acd Set value from O1 to O2change
setValue | TestHandler$EntityObject@6ae77a25 Set value from O2 to O3change 
```

在日志中，似乎没有将值分配给之前引用的对象，jsf 似乎只是记忆了列表的索引并更新了错误的对象。

更新对象的最佳范围是什么？如何归档最新列表以及从表到对象的可靠映射？

添加equals和hashcode函数没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:32:14.830

事实上，JSF 并没有更新错误的对象。引用著名文章[JSF 2.0 中的通信](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)

> @RequestScoped：只要 HTTP 请求-响应存在，此范围内的 bean 就会存在。它在 HTTP 请求时创建，并在与 HTTP 请求关联的 HTTP 响应完成时被销毁（这也适用于 ajax 请求！）。

因此，当您点击“点击”按钮时，您的 bean 会被销毁并创建；在初始化期间，它会初始化您的 EntityObject 数组，因此您无法保存状态。

您可以阅读不同类型范围的链接，然后选择最适合您兴趣的类型。如果您没有具体案例[，ViewScoped](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ViewScoped.html)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:03:30.197

Looks like you are mis-using the Request scope. It is not appropriate for updatable data. Beans in request scope are created for every request (button push or even AJAX call).

When you hit submit button, JSF will create new request and your request scope bean will be destoryed. But because you are staying on the same page, the JSF DataTable bean is not destoryed and it will go through all components and update the values.

Note that at this point JSF Table bean has three InputText components, it will update them: ie. only the first three items in list. JSF doesnt keep the full data in components, (waste of memory), just references.. So here's funny thing: if you create two items in second Init() JSF will give you an error.

Here is an excellent explanation of scopes with guidelines: [http://balusc.blogspot.ca/2011/09/communication-in-jsf-20.html#ManagedBeanScopes](http://balusc.blogspot.ca/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)

see also: [How to choose the right bean scope?](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# javascript - 清除 html5 表单错误

> ID：15251961
> 
> 赞同：1
> 
> 时间：2013-03-06T15:53:36.650
> 
> 标签：javascript, html, forms, validation

使用 html5 表单验证时，似乎无法从中清除错误状态。问题出在所需的单选按钮组上。当尝试在未选择单选按钮的情况下提交它时，它会将所有单选都突出显示为错误。然后，当我选择 1 个收音机时，错误消失，但是当执行 from.reset() 将清除所选收音机时，由于没有选择收音机，它将产生错误。

我没有找到规避这一点的方法。我试过使用 setCustomValidity('') 但没有用。同样暂时禁用验证并重新启用它也不起作用。

因为唯一的方法是从 dom 中完全移除并重新生成它。仅删除单选按钮并重新生成它们将不起作用（至少具有相同的 ID）。

任何想法？

请参阅小提琴： http: [//jsfiddle.net/KDkvE/](http://jsfiddle.net/KDkvE/)
不要选择选项并按“下一步”。然后按重置。在 Firefox 中，这不会清除单选按钮周围的红色边框。

```
<form>
<option name='test' type='radio' value='1' required/>
<option name='test' type='radio' value='2' required/>

<input type="submit" name="submitbutton" id="submitbutton" value="next">
<input type='reset' value='Reset'/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-02T02:54:49.577

我自己正在寻找一个优雅的解决方案，但到目前为止还没有聪明的人回答它，我将不得不提供这个不优雅的解决方案：

```
<input type="radio" name="radio_button_name" onclick="for(i=0;i&lt;this.form[ this.name ].length;i++){ this.form[ this.name ][i].setCustomValidity('') }" oninvalid="custom validation message"> 
```

问题似乎是您需要为每个单选按钮重置验证自定义消息，而不仅仅是您单击的那个。

# css - 为了使 div 匹配高度，对 padding-bottom 使用非常高的值和对 margin-bottom 使用非常低的值会不会很糟糕

> ID：15251963
> 
> 赞同：3
> 
> 时间：2013-03-06T15:53:44.250
> 
> 标签：css

[这是我的jsFiddle。](http://jsfiddle.net/QtTeA/)我所指的特定 CSS 在选择器上`.inner div`。我的意思是“它会很糟糕”，你会在你的页面上使用它吗？你预见到它有什么问题吗？这种技术有名字吗？有没有更好的方法来实现这一点？我的目标是让两个`div`s 向左浮动`#one`并`#two`匹配高度，如您所见，左边的水绿色一直延伸到`section`.

html

```
<section>
    <div class="inner">
    <div id="one"><p>Lorem</p></div>
    <div id="two">
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore</p>
    </div>
    </div>
    <div class="clear"></div>
</section> 
```

css

```
section {
    width: 60%;
    margin: 0 auto;
    border: 1px solid red;
    border-radius: 5px;
}
#one, #two {
    float: left;
    width: 50%;
}
#one {
    background: aqua;
    padding-bottom: 1000px;
}
.clear {
    clear: both;
}

.inner {
    overflow: hidden;
}
.inner div {
    margin-bottom: -1000px;
    padding-bottom: 1000px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:05:30.873

这不是很好，而且如果该文本改变大小，您将不得不调整您的 CSS。

相反，删除填充和边距，给整个`.inner`水色背景，但将背景更改`#two`为白色。

这是我在小提琴中所做的更改：

```
#two {
    background-color: #fff;
}

.inner {
    background: aqua;
    overflow: hidden;
    border-radius: 5px;
} 
```

小提琴：http: [//jsfiddle.net/QtTeA/1/](http://jsfiddle.net/QtTeA/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:05:46.353

是的，感觉很恶心，我不会这样做。我个人只是使​​用一个

```
min-height:1000px /* Or whatever height */ 
```

在每个 DIV 上，它都更加灵活。将任何内容放入#one 的那一刻，它将变得比#two 更长

# vb6 - 按住键时 VB6 应用程序崩溃

> ID：15251966
> 
> 赞同：1
> 
> 时间：2013-03-06T15:53:48.260
> 
> 标签：vb6, crash, keypress, crash-dumps

我有一个 VB6 应用程序，其表单通过其 KeyPress 事件处理输入。在该方法中，它检查通过一系列 if 语句传入的 ASCII 代码，并运行必要的代码来响应输入。所以，基本格式是：

```
Private Sub Form_Keypress (KeyAscii As Integer)

If KeyAscii = 97
' Do some stuff

If KeyAscii = 98
' Do some different stuff

End Sub 
```

有 24 个键连接到键盘编码器，可通过信息亭前面的按钮提供输入。操作系统是 Windows 7。我遇到的问题是，如果我按住其中一个键大约十秒钟，应用程序就会崩溃——没有例外，只是停止执行。我确实收集了一些小型转储，我没有看到任何可以给我任何有用信息的东西，但我没有阅读它们的经验。

我需要知道为什么该应用程序似乎无法处理按键流以及如何绕过它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:54:29.900

我会重新编码它看起来更像这样：

```
Private Sub Form_Keypress (KeyAscii As Integer)
    Static bInKeyPress As Boolean
    If bInKeyPress = True Then Exit Sub

    On Error GoTo Handler

    bInKeyPress = True

    If KeyAscii = 97
        ' Do some stuff

    ElseIf KeyAscii = 98
        ' Do some different stuff

' Everything goes through here, after execution is complete.
' Handler also calls through to this, to make sure we clean up things
ExitPoint:
    bInKeyPress = False
    Exit Sub

'Do any error handling / logging you want, here, then clean things up.
Handler:
    GoTo ExitPoint
End Sub 
```

如果您不希望其他任何东西能够重置变量，请在 Sub 本身内部使用静态变量，并且它只会在您的处理完成时切换回 False。如果您认为其他东西应该能够控制是否需要启用 Keypress 功能，请在模块级别使用 Private 变量。

基本上，您希望在处理任何内容时停止听按键。

* * *

**编辑**：*清理它以与评论中的一些建议保持一致，并澄清程序流程。*

# c++ - Connect 4(C++) 中的对角线胜利

> ID：15251971
> 
> 赞同：1
> 
> 时间：2013-03-06T15:53:59.203
> 
> 标签：c++, vector

我正在用 C++ 制作一个连接 4 游戏。我正在制作游戏，以便它是人类与 AI 对手的对抗，因此对于胜利参数，它会检查人类是否获胜或 AI 是否获胜。到目前为止，我已经能够为行中的胜利和列中的行做到这一点。我唯一遇到的问题是对角线连续检测四个。

编辑：我的板是 7x6 网格

这是我检查行的内容：

```
for (int i = 0; i < board.size(); ++i)
    {
        if ((board[i][0] == PLAYER_TOKEN && board[i][1] == PLAYER_TOKEN && board[i][2] == PLAYER_TOKEN && board[i][3] == PLAYER_TOKEN) ||
            (board[i][1] == PLAYER_TOKEN && board[i][2] == PLAYER_TOKEN && board[i][3] == PLAYER_TOKEN && board[i][4] == PLAYER_TOKEN) ||
            (board[i][2] == PLAYER_TOKEN && board[i][3] == PLAYER_TOKEN && board[i][4] == PLAYER_TOKEN && board[i][5] == PLAYER_TOKEN) ||
            (board[i][3] == PLAYER_TOKEN && board[i][4] == PLAYER_TOKEN && board[i][5] == PLAYER_TOKEN && board[i][6] == PLAYER_TOKEN))
        {
            gameover = true;
            human.setWins(human.getWins()+1);
            cout<<"Congratulations You have Won"<<endl;
            system("PAUSE");
        }
    } 
```

对于列，我有这个：

```
for (int j = 0; j < board[0].size(); ++j)
{
    if ((board[0][j] == PLAYER_TOKEN && board[1][j] == PLAYER_TOKEN && board[2][j] == PLAYER_TOKEN && board[3][j] == PLAYER_TOKEN) ||
        (board[1][j] == PLAYER_TOKEN && board[2][j] == PLAYER_TOKEN && board[3][j] == PLAYER_TOKEN && board[4][j] == PLAYER_TOKEN) ||
        (board[2][j] == PLAYER_TOKEN && board[3][j] == PLAYER_TOKEN && board[4][j] == PLAYER_TOKEN && board[5][j] == PLAYER_TOKEN))
    {
        gameover = true;
        human.setWins(human.getWins()+1);
        cout<<"Congratulations You have Won"<<endl;
        system("PAUSE");
    }
} 
```

我一直在尝试用类似的方法来获得对角线的胜利，但无法想出任何可行的方法。我所得到的只是这个，坦率地说，没有任何用处！

```
//for (int rows = 0; rows<4; ++rows){
//  for (int columns = 0; columns<3; ++columns){
//      if ((board[rows][columns]     == PLAYER_TOKEN && board[rows+1][columns+1]   == PLAYER_TOKEN && board[rows+2][columns+2]     == PLAYER_TOKEN && board[rows+3][columns+3] == PLAYER_TOKEN) || 
//      (board[rows+1][columns+1] == PLAYER_TOKEN && board[rows+2][columns+2] == PLAYER_TOKEN && board[rows+3][columns+3] == PLAYER_TOKEN && board[rows+1][columns+4] == PLAYER_TOKEN) || 
//      (board[rows+2][columns+2] == PLAYER_TOKEN && board[rows+3][columns+3] == PLAYER_TOKEN && board[rows+4][columns+4] == PLAYER_TOKEN && board[rows+5][columns+5] == PLAYER_TOKEN))
//      {
//          gameover = true;
//          human.setWins(human.getWins()+1);
//          cout<<"Congratulations you have Won"<<endl;
//          system("PAUSE");
//      }
//  }
//} 
```

有人能帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:21:45.120

您必须分别处理每个单元格并尝试检查是否有从该单元格开始的获胜者对角线。这是一个递归解决方案

```
bool isWinnerRight(int row, int column, int count) {
  if (row < rows && column < columns && board[row][column] == PLAYERTOKEN) {
    if (count == 4) {
      return true;
    } else {
      return isWinnerRight(row+1.column+1, count+1);
    }
  } else return false;
}

bool isWinnerLeft(int row, int column, int count) {
  if (row < rows && column >= 0 && board[row][column] == PLAYERTOKEN) {
    if (count == 4) {
      return true;
    } else {
      return isWinnerRight(row+1.column-1, count+1);
    }
  } else return false;
}

int main() {
   //do the initialization here
   for (int i = 0; i < rows, i++) {
     for (int j = 0; j < columns; j++) {
       if (isWinnerRight(i,j,0)){/*WINNER FOUND*/}
       if (isWinnerLeft(i,columns-j,0)){/*WINNER FOUND*/}
     }
   }
} 
```

其中 isWinnerLeft() 与 isWinnerRight 类似，但在递归调用中除外

# javascript - 需要正则表达式来删除两个 HTML 标记标签之间的 /> 除了 img 标签

> ID：15251974
> 
> 赞同：3
> 
> 时间：2013-03-06T15:54:04.933
> 
> 标签：javascript, html, regex, perl, markup

我需要一些帮助来制作一个删除两个 HTML 标记标签之间的 /> 的正则表达式。

```
<!-- The line could look like this -->
<td align=right valign=bottom nowrap><div>January 24, 2013 /></div></td>

<!-- Or this -->
<div>Is this system supported? /></div>

<!-- Even this -->
<span>This is a span tag /></div>

<!-- It could look like any of these but I do not want /> removed -->
<img src="example.com/example.jpg"/></img>
<img src="example.com/example.jpg"/>
<img src="example.com/example.jpg"/></img>
<div id="example"><img src="example.com/example.jpg"/></div> 
```

（是的，我意识到 img 标签没有与之关联的结束标签。我正在动态编辑我尚未创建的无数页面；这不是我的标记。）

这是我想出的正则表达式（使用 perl）：

```
s|(<.*?>(?!<img).*?)(\s*/>)(?!</img>)(</.*?>)|$1$3|gi; 
```

是否有更好的正则表达式更有效或更快？

将正则表达式应用于上述示例后，结果如下：

```
<!-- The line could look like this -->
<td align=right valign=bottom nowrap><div>January 24, 2013></div></td>

<!-- Or this -->
<div>Is this system supported?></div>

<!-- Even this -->
<span>This is a span tag></div>

<!-- It could look like any of these but I do not want /> removed -->
<img src="example.com/example.jpg"/></img>
<img src="example.com/example.jpg"/>
<img src="example.com/example.jpg"/></img>
<div id="example"><img src="example.com/example.jpg"/></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:11:52.623

一个更短的解决方案是：

```
s/(<[^>]*>[^<]*)\/>/$1/g 
```

它将开始标签和可能的后续内容组合在一起，不包括开始尖括号 - 这将指示另一个标签。然后它寻找`/>`. 如果找到，则使用 substition 将其删除。

**更新：**该问题已扩展为删除`/>`. 这可以通过使`[^<]*`部分“懒惰”来完成，如下所示：

```
s/(<[^>]*>[^<]*?)\s*\/>/$1/g 
```

在[regex101](http://regex101.com/r/dY7uW7)上亲自查看（链接已更新）。

# php - 将类的实例化限制在某个范围内

> ID：15251975
> 
> 赞同：1
> 
> 时间：2013-03-06T15:54:05.627
> 
> 标签：php, oop, design-patterns

我正在编写一个类，我想限制该类的用户只能在 XXX 类型的类中使用它。我怎样才能在 PHP 中完成这个（朋友）功能？与用户交谈不是一个可行的选择:-)

例子：

```
class ActionLog{
 ....
 ....
 ....
}

abstract class Controller{ ...}

class BabaController extends Controller{
    public function SuperAction(){
        $X = new ActionLog();; OK!!!
    }
}

class SomeOtherBabaWhichIsNotAController extends SomthingElse{
    public function super_nice_function(){
        $X = new ActionLog();//WILL CRASHHHH!!!!!!!!!!
    }
} 
```

# c# - 来自 SelectionChanged 事件 WinRT 的 ArgumentOutOfRangeException

> ID：15251978
> 
> 赞同：3
> 
> 时间：2013-03-06T15:54:07.860
> 
> 标签：c#, json, xaml, windows-runtime, windows-store-apps

好吧。我正在使用 C# 和 XAML 开发一个 Windows 8 (WinRT) 应用程序，并且我有一个列表框，其中包含从 JSON 获取的相当多的元素。当您单击其中一个项目时，您将被转移到显示整个新闻项目的新页面。**这行得通。**

但是，每当我单击一个项目并转移，然后单击手机上的后退按钮时，应用程序就会崩溃。我收到以下错误，我不知道为什么它不起作用！有任何想法吗？

![参数OutOfRangeException](../Images/045069d79978ad60acf115862e98c048.png)

```
 private void NewsList_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
    {
        index = NewsList.SelectedIndex;

        NewsItems newsContentGetSet = new NewsItems();

        newsContentGetSet.news_id = newslistJson.ElementAt(index).news_id;
        newsContentGetSet.news_title = newslistJson.ElementAt(index).news_title;
        newsContentGetSet.news_abstract = newslistJson.ElementAt(index).news_abstract;
        newsContentGetSet.news_content = newslistJson.ElementAt(index).news_content;
        newsContentGetSet.news_author = newslistJson.ElementAt(index).news_author;
        newsContentGetSet.news_date_formatted = newslistJson.ElementAt(index).news_date_formatted;
        newsContentGetSet.user_firstname = newslistJson.ElementAt(index).user_firstname;
        newsContentGetSet.user_lastname = newslistJson.ElementAt(index).user_lastname;

        App.newsContentGetSet = newsContentGetSet;
        NavigationService.Navigate(new Uri("/NewsPage.xaml?language=" + chosenLanguage, UriKind.Relative));        
    } 
```

**例外：**

> System.ArgumentOutOfRangeException 未处理 Message= 参数名称：索引 StackTrace：在 System.ThrowHelper.ThrowArgumentOutOfRangeException（ExceptionArgument 参数，ExceptionResource 资源）在 System.ThrowHelper.ThrowArgumentOutOfRangeException() 在 System.Collections.Generic.List `1.get_Item(Int32 index) at System.Linq.Enumerable.ElementAt[TSource](IEnumerable`1 源，Int32 索引）在 MunchApp3 ._0.MainPage.NewsList_SelectionChanged_1（对象发送者，SelectionChangedEventArgs e）在 System.Windows.Controls.Primitives.Selector.OnSelectionChanged（SelectionChangedEventArgs e）在 System.Windows.Controls.Primitives.Selector.InvokeSelectionChanged（列表`1 unselectedItems, List`1 selectedItems) 在 System.Windows.Controls.Primitives.Selector.SelectionChanger.End() 在 System.Windows.Controls.Primitives.Selector.OnItemsChanged(NotifyCollectionChangedEventArgs e) 在 System.Windows.Controls.ListBox.OnItemsChanged(NotifyCollectionChangedEventArgs e) 在System.Windows.Controls.ItemsControl.OnItemCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e) 在 System.Windows.Controls.ItemCollection.NotifyCollectionChanged(NotifyCollectionChangedEventArgs e) 在 System.Windows.Controls.ItemCollection.UpdateItemsSourceList(IEnumerable newItemsSource) 在 System.Windows.Controls System.Windows.DependencyObject 处的 .ItemsControl.ItemsSourceChanged（DependencyObject d，DependencyPropertyChangedEventArgs e）。在 System.Windows.DependencyObject.UpdateEffectiveValue（DependencyProperty 属性、EffectiveValueEntry oldEntry、EffectiveValueEntry& newEntry、ValueOperation 操作）在 System.Windows.DependencyObject.SetValueInternal（DependencyProperty dp、对象值、布尔值 allowReadOnlySet）的 RaisePropertyChangeNotifications（DependencyProperty dp、Object oldValue、Object newValue）在 System.Windows.DependencyObject.SetValueInternal(DependencyProperty dp, Object value) 在 System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value) 在 System.Windows.Controls.ItemsControl.set_ItemsSource(IEnumerable value) 在 MunchApp3._0.MainPage .webClientNews_DownloadStringCompleted(Object sender, DownloadStringCompletedEventArgs e) 在 System.Net.WebClient。OnDownloadStringCompleted(DownloadStringCompletedEventArgs e) 在 System.Net.WebClient.DownloadStringOperationCompleted(Object arg) 在 System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfoculture, Boolean isBinderDefault, Assembly caller, System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化, StackCrawlMark& stackMark) 在 System.Reflection.MethodBase.Invoke(Object obj, Object[] 的布尔 verifyAccess, StackCrawlMark& stackMark)参数）在 System.Delegate.DynamicInvokeOne(Object[] args) 在 System.MulticastDelegate.DynamicInvokeImpl(Object[] args) 在 System.Delegate。DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System。 Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在 System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args) 在 System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams , ScriptParam & pResult)在 System.Windows.Hosting.DelegateWrapper.Invoke(Object[] args) 在 System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam & pResult)在 System.Windows.Hosting.DelegateWrapper.Invoke(Object[] args) 在 System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam & pResult)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T19:11:00.323

尝试

```
Dispatcher.BeginInvoke(() =>
{
   NavigationService.Navigate(new Uri("/NewsPage.xaml?language=" + chosenLanguage, UriKind.Relative));
}); 
```

# c - 数组差异之间的差异

> ID：15251979
> 
> 赞同：1
> 
> 时间：2013-03-06T15:54:08.353
> 
> 标签：c

我正在尝试将二维数组传递给函数。我尝试了互联网上提供的不同解决方案。

```
int arr[3][4];
fun (arr);

1) void fun(int *a[4]) {} -- result into a compilation error (cannot convert int (*)[4] to int **)

2) void fun(int(*a)[4]) {} -- works fine. 
```

我想知道上述两个声明有什么区别，以及 1\. 案例中有什么错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T15:57:00.740

好吧，这就是永远有用的[cdecl](http://www.cdecl.org/)所说的：

*   `int *a[4]`表示“将 a 声明为指向 int 的指针的数组 4”
*   `int(*a)[4]`表示“将 a 声明为指向 int 数组 4 的指针”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:57:20.147

这声明了一个**包含 4 个指向整数的指针的数组**：

```
int* a[4];     // (a) 
```

另一方面，这：

```
int (*a)[4];   // (b) 
```

声明一个**指向 4 个整数数组的指针**。

由于数组在用作函数参数时衰减为指针（指向它们的第一个元素），因此将类型对象传递`int arr[3][4]`给接受上述类型*(b)*参数的函数将成功（衰减为指向 的指针`int[4]`，即 an `int (*)[4])`，而它将当参数类型为*(a)*时失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:06:10.273

除非它是、 或 一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of ”类型的*表达式*将转换为“pointer”类型的表达式到"，表达式的值将是数组中第一个元素的地址。`_Alignof``&`*`T``T`*

 *在函数调用中

```
fun(arr); 
```

*表达式* 的类型`arr`是“4 元素数组的 3 元素数组`int`”。由于`arr`不是`sizeof`, `_Alignof`, 或一元运算符的操作数`&`，它将被转换为“指向 4 元素数组的指针”类型的表达式，`int`写为`int (*arr)[4]`，其值将是 的地址`a[0]`。

后缀运算符 like`[]`和`()`比一元运算符 like 具有更高的优先级`*`，因此`*a[N]`是`N`-element 指针数组，而`(*a)[N]`是指向-element 数组的指针`N`。同样，`*f()`是一个函数返回一个指针，`(*f)()`而是一个指向函数的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T15:56:16.677

1.  `int* a[4]`是一个 4 `int*`s的数组
2.  `int (*a)[4]``int`是一个指向 4 s数组的指针

数组的名称可以转换为指向其第一个元素的指针。也就是说`arr`，由于它是 an 的名称`int[3][4]`，将转换为指向其第一个元素的指针，该元素`arr`本身就是 an `int[4]`。该类型是`int(*)[4]`. 这就是为什么你可以`arr`在第二种情况下通过。

在 C++ 中，您可以像这样传递对完整数组的引用：

```
void fun(int(&a)[3][4]) {} 
```

在这种情况下，不会发生数组到指针的转换。您只是在引用 2D 数组本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:56:41.083

`int *a[4]`是一个由 4 个指针组成的数组`int`，而`int(*a)[4]`是一个指向 4 个数组的指针`int`。

由于数组衰减为指向其第一个元素的指针（只要它不用作`&`,`sizeof`或的操作数`_Alignof`），`a[3][4]`将被转换为`(*a)[4]`.*

# locking - 解锁页面弹出脚本

> ID：15251981
> 
> 赞同：0
> 
> 时间：2013-03-06T15:54:08.677
> 
> 标签：locking

我想锁定一个页面（例如：访问者必须完成比赛才能解锁页面），完成付款后，他们应该被重定向到被锁定的同一原始页面。我看到了这个：[用弹出窗口锁定屏幕，直到时间页面完全加载](https://stackoverflow.com/questions/1905779/lock-the-screen-with-a-popup-till-the-time-page-gets-loaded-completely) 但我想要一个解锁同一页面的代码。如何解锁页面？

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:58:25.810

除非有这样的服务，否则你必须做大量的工作来设置它。您必须使用 Paypal 的卖家 API 构建自己的后端，并使用 PHP 或类似的预处理器删除锁定。我从不喜欢这样做的网页，但你可以自由地做任何你喜欢的事情。

编辑：在比赛中，您仍然需要编写服务器来解释答案/一些比赛信息，并使用 cookie 或基于 IP 的方式解锁门户。您不能只是“获取代码”来解锁它。通过您找到的代码教程，您可能可以在完成后使用 jQuery ( [http://api.jquery.com/hide/](http://api.jquery.com/hide/) ) 删除元素。

# c# - 带有多个“新闻”的 MVC C# ActionLink

> ID：15251984
> 
> 赞同：0
> 
> 时间：2013-03-06T15:54:13.893
> 
> 标签：c#, asp.net, razor

如何更正此问题以使 ActionLink 恢复为`http://localsite/forum/index/4`（其中 4 由 parent_id 定义，如下所示）：

```
 @Html.ActionLink("Cancel", "Index", "Forum", new { @class = "btn"}, new{ @id=ViewBag.parent_id }) 
```

目前它恢复为：

```
http://localhost:53731/Forum?class=btn 
```

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:56:26.347

只需反转最后两个参数：

```
@Html.ActionLink("Cancel", "Index", "Forum",  new{ @id=ViewBag.parent_id }, new { @class = "btn"}) 
```

routeValues 应该在 htmlAttributes 之前

见[msdn](http://msdn.microsoft.com/fr-fr/library/dd504972%28v=vs.108%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T15:57:26.253

看起来你的论点颠倒了。

```
 @Html.ActionLink("Cancel", "Index", "Forum", new{@id=ViewBag.parent_id }, new { @class = "btn"}) 
```

# javascript - Html5 Canvas 形状移动和碰撞，只有创建的第一个形状有碰撞？

> ID：15251987
> 
> 赞同：1
> 
> 时间：2013-03-06T15:54:18.550
> 
> 标签：javascript, html, html5-canvas, collision

似乎当我在 HTML5 画布上创建形状时，只有我创建的第一个形状实际上有工作碰撞。每个形状都应该相互碰撞，但事实并非如此。

这是运动和碰撞检查代码：

```
function handleMouseMove(event)
{
var mouse = canvas.getMouseCoordinates(event);
if (mouseIsDown && canvas.selected)
{
    if (shapes.length > 0)
    {
        for (var i = 0; i < shapes.length; i++)
        {
            canvas.selected.oldX = canvas.selected.x;
            canvas.selected.oldY = canvas.selected.y;
            canvas.selected.x = canvas.selected.x + (mouse.x - canvas.mouseX);
            canvas.selected.y = canvas.selected.y + (mouse.y - canvas.mouseY);
            if (canvas.selected != shapes[i] && canvas.selected.collides(shapes[i], canvas.selected))
            {
                canvas.selected.x = canvas.selected.oldX;
                canvas.selected.y = canvas.selected.oldY;
            }
            canvas.mouseX = mouse.x;
            canvas.mouseY = mouse.y;
        }
    }
}
} 
```

还要注意，其他形状在选择时正确检测到碰撞，但它们不会阻塞（IE oldX 和 x 相等）。上面的代码是唯一改变这些值的地方。

# jquery - 使用 Stellar.js 视差插件有奇怪的位置问题

> ID：15251996
> 
> 赞同：2
> 
> 时间：2013-03-06T15:54:27.753
> 
> 标签：jquery, html, css, parallax

我正在使用 jQuery 库 stellar.js 在我正在构建的网页上创建一些视差样式滚动。到目前为止，我一直遇到一些小问题，但遇到了一个我似乎无法解决的问题。

我有 4 个 div，它们充当宽度和高度为 100% 的视差幻灯片，因此它填满了屏幕。然后，我在内部使用具有设定宽度（940 像素）的“包装器”，以将视差元素包含在其中，这将阻止不同显示器尺寸之间出现任何问题。

我遇到的问题是，当我给这个包装器中的任何元素一个“数据星比”时，它会导致元素在调整窗口大小时表现不同，并以不同的方式定位它们，例如查看它在不同尺寸的显示器上：

这是我的代码示例：

HTML

```
<div class="slide" id="slide1" data-slide="1" data-stellar-background-ratio="0.5">
  <div class="wrapper">
    <img src="images/slide1/big_solution_button.png" data-stellar-ratio="1" data-stellar-vertical-offset="-45"alt="">
    <img src="images/slide1/tailored_text.png" data-stellar-ratio="1" data-stellar-vertical-offset="-35"alt="">
    <img src="images/slide1/button.png" data-stellar-ratio="2" data-stellar-vertical-offset="35"alt="">
    <img src="images/slide1/blur_button.png" data-stellar-ratio="0.5" data-stellar-vertical-offset="35"alt="">
  </div>    
  <a class="button" data-slide="2" title=""></a>
</div> 
```

CSS：

![在此处输入图像描述](../Images/e86bd64c263d7ac36f81f22d88a32235.png)

有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T16:56:32.380

我已经设法为将来遇到类似问题的任何人解决了这个问题。

此问题是由启用水平滚动引起的，可以通过使您的 Stellar 函数调用如下所示来解决：

```
$.stellar({
   horizontalScrolling:false
   // other options... 
```

});

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-26T04:37:35.697

```
$( window).stellar({
    horizontalScrolling:false,
    hideDistantElements: false
}); 
```

***hideDistantElements: false***这是要设置为 false 的参数。如果它设置为***true***，它将在元素位于视口之外时***应用display : none 。***

# c# - 从 BackgroundWorker 开始获取响应

> ID：15251997
> 
> 赞同：3
> 
> 时间：2013-03-06T15:54:28.160
> 
> 标签：c#, multithreading, mono, webrequest

我正在从 UI 线程和`BackgroundWorker`线程创建一个 webrequest。

```
IAsyncResult result = request.BeginGetResponse (o => {
    callCallback (o);
}, state); 
```

……

```
private void callCallback (IAsyncResult o)
{
    RequestStateGen state = (RequestStateGen)o.AsyncState;
    state.context.Post (_ => {
        onGetCustomListObject (o);
    }, null);
} 
```

当我从 UI 线程调用此代码时，它工作正常。当从`BackgroundWorker`线程调用时，它会在 BeginGetResponse 上冻结。

UI 仍然是响应式的。有什么想法吗？

**编辑：**我发现从后台线程调用时我实际上不需要 UI 上下文。而且我认为注入一个始终有效的 ui 上下文真的很难。这是我现在可以使用的代码：

```
private void callCallback (IAsyncResult o)
{
    RequestStateGen state = (RequestStateGen)o.AsyncState;
    if (!state.OnBgThread)
        {
            state.context.Post (_ => {
                onGetCustomListObject (o);
            }, null);
        }
        else
        {
            onGetCustomListObject (o);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:58:14.223

您的代码依赖于`SynchronizationContext.Current`抓取 UI 上下文。如果您已经在后台线程中，那么该上下文将不是 UI 的上下文。

您可以`BeginGetResponse`从后台线程调用就好了，但您需要确保`SynchronizationContext.Current`从 UI 线程调用它并以某种方式暴露给您的后台线程。