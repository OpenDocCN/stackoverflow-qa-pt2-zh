# StackOverflow 问答 12601000-12601999

# php - 如何从 Silex 中的表单数据中过滤 html

> ID：12601000
> 
> 赞同：1
> 
> 时间：2012-09-26T11:44:47.750
> 
> 标签：php, symfony, escaping, silex

我对 Silex 和 Symfony 还很陌生，我正在尝试使用 symfony Form 组件创建一个表单。效果很好，但是在验证/清理方面我不知道该怎么做。

我当然知道 $app->escape($data) 方法，但它似乎不适合我的需要。

在调用 $form->isValid() 方法之前，我想从提交的数据中转义 html 标记。我不想使带有 html 标签的文本无效，只需从文本中转义/删除它们，然后验证获得的值。

所以基本上我想将转义值提供给表单而不是原始值或使用。

我的问题是，只有在删除 html 标签后提交的文本为空时，我才想显示错误消息。

我想写一个自定义约束——因为我在包中没有找到任何关于 html 验证的信息——但在那种情况下，我必须过滤/转义两次，首先是在验证中，然后是在保存数据之前。

我想实现这样的目标：

```
if ($request->getMethod() == 'POST') {            
  $comment = $request->get('comment');
  if($comment) {
    foreach($comment as &$value) {
      $value = $app->escape($value);
    }

    $cleared = new Request(array(), array('comment' => $comment));

    $form->bindRequest($cleared);
    if ($form->isValid()) {
      var_dump($form->getData());
    }
  }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:41:39.573

[$app->escape()](http://silex.sensiolabs.org/doc/usage.html#escaping)只是[htmlspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php)的快捷方式，您必须使用[strip_tags()](http://php.net/manual/en/function.strip-tags.php)函数来删除 html 标签。

> 我的问题是，只有在删除 html 标签后提交的文本为空时，我才想显示错误消息。

```
$form->get('FILED_NAME')->addError(new Form\FormError('ERROR')); 
```

例如 ：

```
if ($request->getMethod() == 'POST') {            
  $comment = $request->get('comment');
  if($comment) {
    $emptyCM = false;
    foreach($comment as &$value) {
      $value = strip_tags($value);
      if (empty($value)) $emptyCM = true;
    }
    if ($emptyCM) 
      $form->get('comment')->addError(new Form\FormError('my custom error message'));

    $cleared = new Request(array(), array('comment' => $comment));

    $form->bindRequest($cleared);
    if ($form->isValid()) {
      var_dump($form->getData());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T09:54:09.490

如果您想在所有数据进入表单之前对其进行预清理，您可以`before`对所有路由或特定路由使用过滤器。

以下示例从 GET 和 POST 的字符串参数中去除所有标签。如果您的参数是数组（如在您的初始示例中），您需要添加另一个`if`分支。如果您的参数嵌套很深，则需要一个递归函数进行过滤。

```
$app->before( function( Request $request ) {
    foreach ( [ $request->request, $request->query ] as $parameterBag ) {
        foreach ( $parameterBag->keys() as $key ) {
            if ( is_string( $parameterBag->get( $key ) ) ) {
                $parameterBag->set( $key, strip_tags( $parameterBag->get( $key ) ) );
            }
        }
    }
}, Application::EARLY_EVENT ); 
```

# javascript - 如何使用javascript获取正在运行（或部署）的Web应用程序的默认端口号

> ID：12601001
> 
> 赞同：0
> 
> 时间：2012-09-26T11:44:51.737
> 
> 标签：javascript, port

我有一个 Web 应用程序，它部署在某个端口，比如 8085，主机名是 sample.something.com。使用 window.location.host 或 window.location.port，端口将变为空白。我如何使用 javascript 检索端口号，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:48:26.277

如果`window.location.port`为空，则表示应用程序正在端口 80 上运行 http 和 443 上 https。

如评论中所述，您可以使用`window.location.protocol`来检查使用的协议（http 或 https）。

执行：

```
function getPort(){
  if(location.port != ''){
      return location.port;
  }
  else if(location.protocol== 'http'){
     return 80;    
  }
  else if(location.protocol== 'https'){
     return 443;    
  }    
} 
```

# java - 在用户按下 [x] 后窗口关闭之前做一些事情

> ID：12601004
> 
> 赞同：2
> 
> 时间：2012-09-26T11:45:01.047
> 
> 标签：java, swing, jframe, windowlistener

我正在构建一个即时通讯应用程序。我需要在 Swing JFrame（小“x”）的默认关闭按钮上添加一个动作事件。
当客户端按下 X 按钮时，我需要告诉服务器他离线并且只有在该操作发生后我必须关闭窗口。我似乎无法找到如何在默认按钮上获取操作侦听器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T11:51:45.607

看看这个可能对你有帮助。[关闭应用程序](http://tips4java.wordpress.com/2009/05/01/closing-an-application/)
如果有人按下关闭按钮，您可以给出自己的实现。

```
frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

frame.addWindowListener( new WindowAdapter()
 {
   public void windowClosing(WindowEvent e)
    {
      // Here you can give your own implementation according to you.
     }
  }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T11:49:29.677

查看 Runtime.addShutdownHook() 方法。[http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T11:48:21.383

只需[将](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#addWindowListener%28java.awt.event.WindowListener%29)[WindowListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)添加到您的 JFrame 并使用事件[windowClosing](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowClosing%28java.awt.event.WindowEvent%29)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T11:48:36.807

听起来你想[`addWindowListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#addWindowListener%28java.awt.event.WindowListener%29)用`WindowListener`which 句柄[`windowClosing`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowClosing%28java.awt.event.WindowEvent%29)或[`windowClosed`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowClosed%28java.awt.event.WindowEvent%29). 您可能很想创建一个子类，[`WindowAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html)这样您就可以覆盖您感兴趣的方法。

不要忘记您与服务器的通信应该在不同的线程中 - 不要用网络流量阻塞 UI 线程。但是，还要记住，如果您的整个应用程序正在关闭：

*   无论如何，与服务器的任何连接都将关闭
*   任何*后台*线程都将被终止

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-26T11:49:17.177

```
JFrame f = new JFrame("Blah");
f.addWindowListener(new WindowAdapter() {
    public void windowClosing(WindowEvent e) {
        //do whatever you want before the window closes.
    }
});
f.setVisible(true); 
```

不要这样做`f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`，因为这可能会中断您的服务器通信。相反，`System.exit(0)`请在完成服务器通信后手动说。

# android - 如何在android中的特定时间和日期获得警报？

> ID：12601011
> 
> 赞同：2
> 
> 时间：2012-09-26T11:45:22.767
> 
> 标签：android, alarmmanager, alarm, android-alarms

我想在特定时间和特定日期设置警报并在那个时间获得警报。例如：=

```
alarm set on 5:30 pm and 26/09/2012 
```

那么如何在android中以编程方式设置警报

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:58:10.147

你将需要一个接收器来做到这一点。整个过程可以在[这个线程中解释](https://stackoverflow.com/questions/6520403/how-to-set-alarm-in-android)

你也可以看到[这里](http://blog.mikesir87.io/2013/04/android-creating-an-alarm-with-alarmmanager/)和[这里](http://justcallmebrian.com/?p=129)

希望这就是你想要的。

# javascript - 如何将矩阵的旋转设置为围绕给定点的弧度绝对值？

> ID：12601024
> 
> 赞同：2
> 
> 时间：2012-09-26T11:46:10.410
> 
> 标签：javascript, matrix, rotation, affinetransform

我有一个用于仿射变换的 javascript Matrix 类，以及一个将旋转设置为围绕给定中心的绝对弧度数的函数：

```
this.setRotation = function (radians, center) {
    var cos = Math.cos(radians);
    var sin = Math.sin(radians);
    this.a = cos;
    this.b = sin;
    this.c = -sin;
    this.d = cos;
    this.tx += center.x - center.x * cos + center.y * sin;
    this.ty += center.y - center.x * sin - center.y * cos;
} 
```

我试图围绕对象本身的中心旋转，所以我传入对象宽度一半和高度一半的中心点，因此对于 100 x 100 对象，我传入 50、50。

如果我的对象从零旋转开始，则可以正常工作：

![前](../Images/02f9f784fc937472fb7ea5dc2caeaa11.png) ![后](../Images/73b2d84e3423721f5c7869c639aacdb0.png)

...但是如果我再次旋转形状，或者以非零的旋转开始，则 tx 和 ty 值最终会出错：

![位置移动](../Images/a5c95b5ed1146b5e379585fe9aeed3e0.png)

我上面的公式有什么问题？设置旋转似乎是准确的，但不是 tx 和 ty。

我已经看到了关于这个主题的其他一些问题，特别是[这个](https://stackoverflow.com/questions/12049003/the-innards-of-a-rotation-function)问题，但没有任何帮助。

**更新**要为此添加一些数字：

如果我从一个 100x100 的矩形开始，位于 100,100，那么我的初始矩阵是：`{Matrix: [a:1, b:0, c:0, d:1, tx:100, ty:100]}`

要将其顺时针旋转 45 度，我输入上述函数 0.7853981633974483（弧度为 45 度）和中心：`{Point: [x:50, y: 50]}`

这会产生以下矩阵： `{Matrix: [a:0.7071067812, b:0.7071067812, c:-0.7071067812, d:0.7071067812, tx:150, ty:79.28932188]}`完全正确。

`{Point: [x:70.71067812000001, y: 70.71067812000001]}`但是，如果我然后从该矩阵开始，并尝试通过提供函数参数 0 和（新的旋转形状的中心）将其返回为零，那么输出是`{Matrix: [a:1, b:0, c:0, d:1, tx:150, ty:79.28932188]}`，这是正确的旋转但不是正确的翻译。我期待得到`{Matrix: [a:1, b:0, c:0, d:1, tx:100, ty:100]}`

我已经尝试了该函数的其他几种变体，包括使用父坐标空间 150,150 中的矩形中心而不是 50,50 的局部中心，并按照下面的建议将 += 替换为 =，但似乎没有任何帮助。如果我注释掉 tx 计算，那么我的形状会围绕它的原点完美旋转，所以问题必须与 tx/ty 计算有关，或者与我传入的中心点有关。

有没有人有任何进一步的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:00:26.247

除了可能是一个不正确的符号（尽管这取决于坐标轴的方向）之外，我认为问题只是您正在使用`+=`而不是`=`在填充仿射矩阵的`tx`和`ty`部分时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:50:13.437

我的问题是让对象回到原点 - 在旋转之前移除左上角的坐标以及高度和宽度的一半，然后再次添加它们。

我发现使用旋转函数比使用 setRotate 函数更容易，最终得到以下代码：

```
// Matrix class functions:
this.rotate = function (radians) {
    var cos = parseFloat(Math.cos(radians).toFixed(10));
    var sin = parseFloat(Math.sin(radians).toFixed(10));
    a = this.a,
    b = this.b,
    c = this.c,
    d = this.d,
    tx = this.tx,
    ty = this.ty;
    this.a = a * cos - b * sin;
    this.b = a * sin + b * cos;
    this.c = c * cos - d * sin;
    this.d = c * sin + d * cos;
    this.tx = tx * cos - ty * sin;
    this.ty = tx * sin + ty * cos;
}

this.setRotation = function (radians) {
    var rotation = this.rotation();
    this.rotate(radians - rotation);
}

this.translate = function (tx, ty) {
    this.tx += tx;
    this.ty += ty;
}

// Called from outside the class
var transformedBounds = pe.Model.ReadTransformedBounds(selection[0]);
var itemTransform = pe.Model.ReadItemTransform(selection[0]);

// Cache the coordinates before translating them away:
var ox = transformedBounds.Left + (transformedBounds.Width / 2); 
var oy = transformedBounds.Top + (transformedBounds.Height / 2);
itemTransform.translate(-ox, -oy);

// Rotate:
itemTransform.setRotation(radians);

// Restore the translation:
itemTransform.translate(ox, oy); 
```

如果你真的能做总和，所有这些可能都很明显，但我把它贴在这里，以防有人和我一样昏暗的一天......

# c# - 交易中止

> ID：12601027
> 
> 赞同：0
> 
> 时间：2012-09-26T11:46:21.290
> 
> 标签：c#, wcf, msmq

我正在创建一个从 MSMQ 获取消息的 C# 和 WCF 服务。

这是使用事务性 MSMQ。在业务逻辑中，有一个条件，然后该条件将一条新消息放在不同的事务队列中，但是我似乎总是抛出异常并且不知道从这里去哪里

“System.Transactions.TransactionAbortedException：事务已中止。\r\n 在 System.Transactions.TransactionStatePromotedAborted.CreateAbortingClone(InternalTransaction tx)\r\n 在 System.Transactions.DependentTransaction..ctor(IsolationLevel isoLevel, InternalTransaction internalTransaction, 布尔阻塞)\r\n 在 System.Transactions.Transaction.DependentClone(DependentCloneOption cloneOption)\r\n 在 System.Transactions.TransactionScope.SetCurrent(Transaction newCurrent)\r\n 在 System.Transactions.TransactionScope.PushScope()\r\ n 在 System.Transactions.TransactionScope..ctor(TransactionScopeOption scopeOption)\r\n 在 E:\Msmq\MsmqDispatcher 中的 TMC.Services.Implementation.InboundMessageHandler.Msmq.MsmqDispatcher.Dispatch(String queueFormatAndLocation, Object itemToPlaceOnQueue, Boolean traceMessage)。 cs:第 39 行\r\n 在 TMC.Services。Implementation.InboundMessageHandler.OmhDispatcher.AckNackDispatcher.SendAckTo

E:\AckNackDispatcher.cs:第 38 行中的 Tg(SendAckToTgRequest 请求)"

有什么想法吗？

将其放入队列时的代码：

```
var queue = new MessageQueue(queueFormatAndLocation);
            var msg = new System.Messaging.Message {Body = itemToPlaceOnQueue, Priority = MessagePriority.High, UseDeadLetterQueue = true, UseTracing = traceMessage};
            using (var ts = new TransactionScope(TransactionScopeOption.Required))
            {
                queue.Send(msg, MessageQueueTransactionType.Automatic); // send the message
                ts.Complete(); // complete the transaction
            } 
```

就 queueFormatAndLocation 而言，它是正确的：

“格式名称：Direct=OS:.\private$\AckMsgs”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:07:40.537

这有助于并且似乎有效：

[http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k(%22SYSTEM.MESSAGING.MESSAGEQUEUETRANSACTION.%23CTOR%22);k(SOLUTIONITEMSPROJECT);k(TargetFrameworkMoniker-%22 .NETFRAMEWORK%2cVERSION%3dV4.0%22);k(DevLang-CSHARP)&rd=true](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k(%22SYSTEM.MESSAGING.MESSAGEQUEUETRANSACTION.%23CTOR%22);k(SOLUTIONITEMSPROJECT);k(TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22);k(DevLang-CSHARP)&rd=true)

[http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k(%22SYSTEM.MESSAGING.MESSAGEQUEUE.%23CTOR%22);k(SOLUTIONITEMSPROJECT);k(TargetFrameworkMoniker-%22 .NETFRAMEWORK%2cVERSION%3dV4.0%22);k(DevLang-CSHARP)&rd=true](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k(%22SYSTEM.MESSAGING.MESSAGEQUEUE.%23CTOR%22);k(SOLUTIONITEMSPROJECT);k(TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22);k(DevLang-CSHARP)&rd=true)

基本上使用 MessageQueueTransasction 和 MessageQueue 类。MQT 的原因是在现有事务中使用它（在我的场景中）。这似乎有效。

代码：

```
 using (var mqt = new MessageQueueTransaction())
            {
                mqt.Begin();
                MessageQueue mq = new MessageQueue(queueFormatAndLocation);
                mq.Send(itemToPlaceOnQueue, mqt);
                mqt.Commit();
            } 
```

# ios - 在 UIPasteBoard 中复制 NSAttributedString

> ID：12601039
> 
> 赞同：11
> 
> 时间：2012-09-26T11:46:51.987
> 
> 标签：ios, uikit, copy-paste, nsattributedstring, uipasteboard

**如何在粘贴板中复制 NSAttributedString**以允许用户粘贴或以编程方式粘贴（使用`- (void)paste:(id)sender`，来自 UIResponderStandardEditActions 协议）。

我试过了：

```
UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
[pasteBoard setValue:attributedString forPasteboardType:(NSString *)kUTTypeRTF]; 
```

但这次崩溃是：

```
-[UIPasteboard setValue:forPasteboardType:]: value is not a valid property list type' 
```

这是意料之中的，因为 NSAttributedString 不是属性列表值。

如果用户在我的应用程序中粘贴粘贴板的内容，我想保留属性字符串的所有标准和自定义属性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-20T15:19:48.120

干净的解决方案不涉及 HTML，而是将 NSAttributedString 作为 RTF（加上纯文本后备）插入粘贴板：

```
- (void)setAttributedString:(NSAttributedString *)attributedString {
    NSData *rtf = [attributedString dataFromRange:NSMakeRange(0, attributedString.length)
                               documentAttributes:@{NSDocumentTypeDocumentAttribute: NSRTFTextDocumentType}
                                            error:nil];
    self.items = @[@{(id)kUTTypeRTF: [[NSString alloc] initWithData:rtf encoding:NSUTF8StringEncoding],
                     (id)kUTTypeUTF8PlainText: attributedString.string}];
} 
```

**斯威夫特 5**

```
import MobileCoreServices

public extension UIPasteboard {
    func set(attributedString: NSAttributedString) {
        do {
            let rtf = try attributedString.data(from: NSMakeRange(0, attributedString.length), documentAttributes: [NSAttributedString.DocumentAttributeKey.documentType: NSAttributedString.DocumentType.rtf])
            items = [[kUTTypeRTF as String: NSString(data: rtf, encoding: String.Encoding.utf8.rawValue)!, kUTTypeUTF8PlainText as String: attributedString.string]]
        } catch {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T13:45:30.087

我发现当我（作为应用程序的用户）将富文本从 UITextView 复制到粘贴板时，粘贴板包含两种类型：

```
"public.text",
"Apple Web Archive pasteboard type 
```

基于此，我在 UIPasteboard 上创建了一个方便的类别。
（大量使用[此答案](https://stackoverflow.com/a/6566850/272342)中的代码）。

它有效，但是：
**转换为 html 格式意味着我将丢失自定义属性。任何干净的解决方案都将被欣然接受。**

文件 UIPasteboard+AttributedString.h：

```
@interface UIPasteboard (AttributedString)

- (void) setAttributedString:(NSAttributedString *)attributedString;

@end 
```

文件 UIPasteboard+AttributedString.m：

```
#import <MobileCoreServices/UTCoreTypes.h>

#import "UIPasteboard+AttributedString.h"

@implementation UIPasteboard (AttributedString)

- (void) setAttributedString:(NSAttributedString *)attributedString {
    NSString *htmlString = [attributedString htmlString]; // This uses DTCoreText category NSAttributedString+HTML - https://github.com/Cocoanetics/DTCoreText
    NSDictionary *resourceDictionary = @{ @"WebResourceData" : [htmlString dataUsingEncoding:NSUTF8StringEncoding],
    @"WebResourceFrameName":  @"",
    @"WebResourceMIMEType" : @"text/html",
    @"WebResourceTextEncodingName" : @"UTF-8",
    @"WebResourceURL" : @"about:blank" };

    NSDictionary *htmlItem = @{ (NSString *)kUTTypeText : [attributedString string],
        @"Apple Web Archive pasteboard type" : @{ @"WebMainResource" : resourceDictionary } };

    [self setItems:@[ htmlItem ]];
}

@end 
```

只实现了setter。如果您想编写 getter 和/或将其放在 GitHub 上，请成为我的客人 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T06:05:51.863

这很简单：

```
 #import <MobileCoreServices/UTCoreTypes.h>

  NSMutableDictionary *item = [[NSMutableDictionary alloc] init];

  NSData *rtf = [attributedString dataFromRange:NSMakeRange(0, attributedString.length)
                             documentAttributes:@{NSDocumentTypeDocumentAttribute: NSRTFDTextDocumentType}
                                          error:nil];

  if (rtf) {
    [item setObject:rtf forKey:(id)kUTTypeFlatRTFD];
  }

  [item setObject:attributedString.string forKey:(id)kUTTypeUTF8PlainText];

  UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
  pasteboard.items = @[item]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T21:53:37.867

OSX 中的粘贴板管理器可以在许多文本和图像类型之间自动转换。

对于富文本类型，您通常会将 RTF 放入粘贴板。您可以从属性字符串创建 RTF 表示，反之亦然。请参阅“NSAttributedString 应用程序工具包添加参考”。

如果您还包含图像，则使用 RTFd 而不是 RTF 风格。

我不知道这些的 MIME 类型（我习惯于 Carbon Pasteboard API，而不是 Cocoa 的），但您可以使用 UTType API 在 UTI、Pboard 和 MIME 类型之间进行转换。

RTF 的 UTI 是“public.rtf”，RTFd 的 UTI 是“com.apple.flat-rtfd”。

# export-to-excel - 将 OBIEE 报告导出到 Excel 时隐藏列

> ID：12601044
> 
> 赞同：0
> 
> 时间：2012-09-26T11:46:58.257
> 
> 标签：export-to-excel, obiee

在 Oracle BI 10g 报表中，一些列使用 CSS: 隐藏`display:none`。但是当我尝试将报告导出到 Excel 文件时，会出现隐藏的列。我在 CSS 中尝试过`mso-hide:all;`，但它没有隐藏任何列，因为该表已进入另一个表。您是否有任何想法如何从 Oracle BI Analytics 中隐藏这些列，以便在将报告导出到 Excel 时不出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:06:26.113

您可以尝试创建一个单独的逻辑表，其中仅包含您需要公开的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:36:50.923

转到分析选项卡中的编辑视图按钮。*-单击相应列中的更多选项按钮。*-点击隐藏。

相关列将隐藏在分析和 excel 文件中。

# eclipse - 使用eclipse在liferay中创建自己的portlet的教程

> ID：12601054
> 
> 赞同：3
> 
> 时间：2012-09-26T11:47:36.133
> 
> 标签：eclipse, liferay, portlet, liferay-6

我想用**Eclipse JUNO** for Liferay 创建我自己的 Portlet。我用谷歌搜索了很多，但这只是为我提供了与 netbeans 一起使用的功能，所以任何人都可以指导我或给我教程的链接，以便在 eclipse 中从头开始创建 portlet。

我试过以下

添加-> 新 Liferay 项目

然后它没有在liferay中显示我创建的portlet

我已经在我的windows7中成功安装了liferay，并且我还集成了现成的书籍portlet，但只是在创建我自己的简单hello world portlet的同时

在我什至关注此链接之前[http://www.youtube.com/watch?v=-EbyIbMWrCI](http://www.youtube.com/watch?v=-EbyIbMWrCI) 但它在管理员帐户的更新管理器选项中显示我的 portlet 作为状态是“未知”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T17:43:38.977

要在 Eclipse 中创建 portlet，请查看[Liferay development in Eclipse](https://stackoverflow.com/questions/2145888/liferay-development-in-eclipse)。

为了准备好在 Liferay 上可见的 portlet，您可以找到以下说明：[如何将 portlet 部署到 Liferay？](https://stackoverflow.com/questions/5260119/how-to-deploy-portlets-to-liferay)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:22:01.280

这是[安装指南](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+IDE+Installation+Guide)和[入门教程](http://www.liferay.com/community/wiki/-/wiki/Main/Liferay+IDE+Getting+Started+Tutorial)。

# python - 在不同的行中打印每个列表元素，并在每个元素之前重复一个字符串 Python

> ID：12601055
> 
> 赞同：0
> 
> 时间：2012-09-26T11:47:37.090
> 
> 标签：python, python-2.7

我想在列表的每个元素前面打印一个字符串，然后在新行中打印：

例子：

```
 test = ["aaa", "bee", "cee"]
    print("hello, %s" % "\n".join(storageVolume)) 
```

我从中得到的是：

```
 hello, aaa
    bee
    cee 
```

我想要的是：

```
 hello, aaa
    hello, bee
    hello, cee 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:50:10.563

```
for x in test:
    print "Hello, {0}".format(x) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:50:26.640

```
In [10]: test = ["aaa", "bee", "cee"]

In [11]: print "\n".join("hello, "+x for x in test)
hello, aaa
hello, bee
hello, cee 
```

或者：

```
In [13]: print "\n".join("hello,  {0}".format(x) for x in test)
hello,  aaa
hello,  bee
hello,  cee 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:49:43.000

```
In [51]: test = ["aaa", "bee", "cee"]

In [52]: for elem in test:
   ....:     print "hello,", elem
   ....:
hello, aaa
hello, bee
hello, cee 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:55:37.637

```
 for i in range(len(test)):
        print "Hello, "+(test[i]); 
```

# html - :hover 无法正常工作

> ID：12601057
> 
> 赞同：2
> 
> 时间：2012-09-26T11:47:42.403
> 
> 标签：html, css

请查看下面的链接

[http://jsfiddle.net/9AbvE/291/](http://jsfiddle.net/9AbvE/291/)

发生的情况是，当我将鼠标悬停在元素`div id = f12`上时，`div id = floater`会改变背景颜色，但是当我悬停在元素上时`div id = f11`，它不会改变颜色，有人知道为什么吗？

非常感谢！

仅限 CSS 解决方案，谢谢！

这里有用于查看的css

```
#f11
{
    width: 100px;
    height: 50px;
    position: absolute;
    background: transparent;
    opacity: 1;
    filter: alpha(opacity=0);
    border-width: 1px;
    border-style: inset;
}
#f11:hover + #floater
{
    background:blue;
    width: 320px;
    height: 320px;
    opacity:100;
    right:0;
    filter: alpha(opacity=100);
    float: left;
    position: fixed;
}

#f12
{
    width: 100px;
    height: 50px;
    position: absolute;
    background: transparent;
    opacity: 1;
    filter: alpha(opacity=0);
    border-width: 1px;
    border-style: inset;
}

#f12:hover + #floater
{
    background:blue;
    width: 320px;
    height: 320px;
    opacity:100;
    right:0;
    filter: alpha(opacity=100);
    float: left;
    position: fixed;
}

#floater
{
    width: 320px;
    height:320px;
    opacity:0;
    position: fixed;
    right:0;
    filter: alpha(opacity=0);
    -webkit-transition: 1s all;
    -moz-transition: 1s all;
    transition: 1s all;
    border-width: 1px;
    border-style: inset;
    filter: alpha(opacity=100);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:51:30.197

改变 `#f11:hover + #floater`

到

`#f11:hover ~ #floater`

`+`用于元素之后的直接兄弟，而`~`用于元素之后的任何兄弟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:59:56.633

检查这个[链接](http://jsfiddle.net/venkateshwar/9AbvE/312/)

您因为没有显示任何颜色而丢失`;`了您的，并且您的 ' 距离不远，这会导致功能损坏。给（或更多）给。并且还像@ClydeLobo 所说的那样使用选择器。`background:black``div``top:50px;``#f12``sibling`

# android - 如何从字符串创建 Joda DateTime

> ID：12601060
> 
> 赞同：0
> 
> 时间：2012-09-26T11:47:45.687
> 
> 标签：android, datetime

我有一个字符串“26/09/2012 07:30:00”是否可以根据这个字符串创建一个新的 DateTime？最终我只想要时间，例如 7:30。我将使用 DateFormatter 格式化 DateTime，例如

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("k,m"); 
```

我的问题是如何从原始字符串构造一个 DT，一旦它是一个 DT，我就可以对其进行格式化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:50:25.933

创建一个适合[`DateTimeFormatter`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html)输入格式，然后调用[`DateTimeFormatter.parseLocalDateTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html#parseLocalDateTime%28java.lang.String%29). （`LocalDateTime`比`DateTime`这里更合适，因为您的输入数据没有时区或 UTC 偏移指示符。`DateTime`如果您*确实*需要，您可以转换为，但听起来您没有。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:55:37.637

```
Calendar c = Calendar.getInstance();   

SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
String formattedDate = df.format(c.getTime());        
Toast.makeText(this, formattedDate, Toast.LENGTH_SHORT).show();

// Now we display formattedDate value in TextView
TextView txtView = new TextView(this);
txtView.setText("Current Date and Time : "+formattedDate);
txtView.setGravity(Gravity.CENTER);
txtView.setTextSize(20);
setContentView(txtView); 
```

# android - 使用 ArrayAdapter 在单个活动中显示 8 个图像和文本

> ID：12601062
> 
> 赞同：0
> 
> 时间：2012-09-26T11:47:47.983
> 
> 标签：android, listview

在这里，我有 17 张图像，我想使用`Grid Layout`但 on `getview()`call 方法在活动中显示这些（连续 2 张图像）。

如何设置单个活动中的图像数量限制。

```
public View getView(int position, View convertView, ViewGroup parent) 
{
    ViewHolder holder = null;
    RowData rowData=null;
    rowData = getItem(TabbedHorizontalPagerDemo.startWith);

    if(convertView == null) {
        convertView = mInflater.inflate(R.layout.list, null);
        holder = new ViewHolder(convertView);
        convertView.setTag(holder);
    }

    holder = (ViewHolder) convertView.getTag();
    ImageView imageView1 = holder.getImage();
    imageView1.setImageResource(rowData.mImgid);

    TextView textView1 = holder.getTextView();
    textView1.setText(rowData.mTitle);
    TabbedHorizontalPagerDemo.startWith++;
    return convertView;
}

/*
 * Class to get values from a single row of list view
 */
private class ViewHolder
{
    private View mRow;
    private TextView textView = null;
    private ImageView image = null;

    public ViewHolder(View row){
        mRow = row;
    }

    public ImageView getImage(){
        if(image == null)
            image = (ImageView) mRow.findViewById(R.id.imageView1);
        return image;
    }

    public TextView getTextView(){
        if(textView == null)
            textView = (TextView) mRow.findViewById(R.id.imgText);
        return textView;
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:12:19.067

*在您的编程代码的getView(int pos, View inView, ViewGroup parent)*中尝试此代码。这里我从数据库中获取数据。可能会解决您的问题：

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
v = inflater.inflate(R.layout.gridstyle, null);
this.c.moveToPosition(pos);      
String albumName = this.c.getString(this.c.getColumnIndex("albumname"));
String image = this.c.getString(this.c.getColumnIndex("image_data"));
ImageView iv = (ImageView) v.findViewById(R.id.imagestyle);
    if (image != null) {
        Uri uri = Uri.parse(image);
        iv.setImageURI(uri);
            }

TextView fname = (TextView) v.findViewById(R.id.textstyle);
fname.setText(albumName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T15:51:18.243

我通过在`getCount()`方法中返回 8 解决了我的问题。所以它给出了单个活动的 8 个图像。

```
public int getCount() {
    return 8;
} 
```

# c - c中的空闲内存

> ID：12601066
> 
> 赞同：1
> 
> 时间：2012-09-26T11:48:12.657
> 
> 标签：c, memory, malloc

我有一个疑问：

```
void *a = malloc(40);
free(a); 
```

如果我认为 malloc(40) 分配了 40 个字节的内存并返回该内存的地址，然后 free(a) 释放/释放该内存**，但对该内存中的位模式不做任何事情**。所以，假设这个相同的内存被分配给说 void *b，然后在打印 b 指向的地址处的值时，给了我相同的值，或者它给了我一个垃圾值，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:55:05.857

我假设您有这种情况：

```
void * a = malloc(40);
free(a);
void * b = malloc(40);

assert(a == b); 
```

这当然是完全合理的，因为内存可能会被重用。

但是，由于`a == b`，您已经回答了自己的问题： 的值`b`与 的值相同`a`！

我相信您问错了问题，并且您*实际上*对*比较`b`*. 那是一锅完全不同的鱼。`malloc`两次通话之间可能发生任何事情。没有什么是保证的。`malloc`调用的返回值指向的内存是*未初始化*的，你不能对其内容做*任何*假设。按理说，在典型的优化 C 库中内存不会发生变化，但不能保证。“安全”运行时环境可能会选择使用特定的测试模式覆盖已释放或分配的内存，以便更好地检测无效访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:50:25.700

它可以给你任何价值。
C/C++ 标准不要求值是任何特定的。用技术术语来说，任何未初始化的变量/内存的值都是**Indeterminate**。

简而言之，你的程序不应该依赖这个值来做任何特定的事情，如果是，那么它是不可移植的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:56:15.247

它不能保证任何事情。从**malloc**获得的打印块可能会打印以前的数据，也可能不会。有很多事情可以改变下一个 malloc 块（所以下一个地址会不同）或改变旧的内存块本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:57:19.910

free 通常会修改你正在释放的内存。

这是一个常见的技巧，尤其是在调试模式下，可以使用一些固定模式免费覆盖内存，以便更容易判断您是在双重释放内存，还是只是在操作释放的内存。

同样 malloc 可能会用不同的模式覆盖内存，以使内存明显未初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:57:20.947

malloc 和 free 是 C 风格的内存管理，而不是 C++。C++ 的替代品是 new 和 delete 运算符。至于 free() 后内存中剩余的位模式，是的，它是相同的位模式。如果要手动删除位模式，可以在编写 WinApi 代码时使用 memset() 或 ZeroMemory()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T12:19:20.657

它将为您提供一些垃圾值，因为函数**free()**会将指定的字节设置为某种模式，这将使内存知道这些字节已被释放和未初始化。话虽如此，您将遇到问题中定义的案例的可能性很小且极不可能。即使您将再次获得相同的字节，相信我，您也不会认出它们 :-)

AFAIK，**free()**通常**使用 Visual Studio 将内存设置为 0xFE 0xEE，**这大致意味着内存已分配但现在已释放。这些值称为**Sentinel Values**，这意味着堆仍归进程所有，但未在使用中。从进程中释放的内存将显示**“?? ??”** .

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-26T12:01:46.840

首先，代码不是 c++，而是纯 c。

原因是`free()`/`delete`存在于那里，因此系统可以**注意到**内存区域再次可用于分配。

它为什么要超越它？

然而，这是一个安全问题。我相信一些面向安全的现代系统在将内存分配给应用程序之前会将其归零。然后，如果您第一次使用，您将获得与[calloc](http://www.cplusplus.com/reference/clibrary/cstdlib/calloc/)`malloc()`等效的。无论如何，如果您碰巧释放内存然后再次分配它可能能够读取您自己的数据。

这种行为的原因很简单。将内存归零会很耗时，您可以手动完成。实际上它有`O(n)`复杂性。如果您编写了一个重用其内存的数字运算器，那么您并不关心之后会得到什么，`malloc()`因为您很可能应该覆盖它，并且您绝对不希望您的 FLOPS`memset()`在调用时受到不必要的负面影响`free()`。

如果你想确保在你调用之后没有任何东西可以读取内存，`free`你需要`memset(a, 0, SIZE)`在调用之前使用`free()`。

# java - 我可以在 JSP 中的 URL 中将列表作为参数传递吗？

> ID：12601070
> 
> 赞同：1
> 
> 时间：2012-09-26T11:48:21.883
> 
> 标签：java, jsp, servlets

我必须将 .jsp 中的列表传递到我的 servlet 中，并且我想通过 URL 来完成。我可以做类似的事情 -

```
<a href="SellSelectedStockServlet?value=content" target="_self"> 
```

其中“内容”是一个列表。我想在我的 servlet 中获取此列表的元素。

或者我只能通过“&”分隔来传递各个参数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T11:55:18.850

列表的每个元素都需要一个参数。所有这些参数都应该具有相同的名称：

```
SellSelectedStockServlet?values=elem1&values=elem2&values=elem3 
```

在 servlet 中，您将获得所有列表元素，如下所示：

```
String[] values = request.getParameterValues("values");
// contains elem1, elem2 and elem3. 
```

注意：查询字符串的长度是有限的。不要以这种方式传递大量值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T11:58:35.367

要将对象获取到另一个 JSP，只需使用脚本将其添加到 HttpServletRequest 对象属性字段：

带有列表的 JSP：

```
 <%
 request.setAttribute("theList", ListObject);
 %> 
```

另一个JSP：

```
<%
List myList = (List) request.getAttribute("theList"); 
%> 
```

# java - XStream xsd 验证

> ID：12601073
> 
> 赞同：4
> 
> 时间：2012-09-26T11:48:32.597
> 
> 标签：java, jakarta-ee, xstream

我不知道 java XStream API 在编组和解组 java 对象时是否提供 xsd 验证。

如果是这样，任何人都可以给我一个示例，XStream API 如何进行 xsd 验证。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:56:54.203

不幸的是，你不能用 XStream 做到这一点。如果您想要/需要一个模式，也许您可​​以查看[JAXB](http://jaxb.java.net/)。这[是一篇](http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html)关于 JAXB/XSD 验证的文章。

# emacs - Emacs dired 使用相同的缓冲区

> ID：12601079
> 
> 赞同：9
> 
> 时间：2012-09-26T11:48:40.213
> 
> 标签：emacs, dired

我在中使用以下代码`.emacs`：

```
(require 'dired+)
(toggle-diredp-find-file-reuse-dir 1) 
```

所以它不会为我访问的每个目录创建一个缓冲区。然后我决定添加一些人体工程学：

```
(add-hook 'dired-mode-hook
          (lambda ()
            (define-key dired-mode-map (kbd "C-<up>") 'dired-up-directory))) 
```

因此，当我单击`Ctrl-<up>`它时，它将移动到父目录。但它会在新缓冲区中打开父目录。

如何让它在同一个缓冲区中打开？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T12:11:28.343

可以在[那里](http://emacswiki.org/emacs/DiredReuseDirectoryBuffer)找到解决方案：

```
(add-hook 'dired-mode-hook
 (lambda ()
  (define-key dired-mode-map (kbd "C-<up>")
    (lambda () (interactive) (find-alternate-file "..")))
  ; was dired-up-directory
 )) 
```

# asp.net - 在触发器中打印“某物”时输出在哪里？

> ID：12601093
> 
> 赞同：1
> 
> 时间：2012-09-26T11:49:39.800
> 
> 标签：asp.net, triggers, sql-server-2008r2-express

我在用着`SQL Server 2008 R2`

如果我想从触发器显示打印语句到我的`.aspx`页面，是否可以从触发器返回任何变量值？

是否可以在列值上`String.Contains()`使用字符串函数？`String.Split()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:58:33.377

它被发送到运行查询的客户端。更具体地说，根据 MSDN：

“该消息作为信息错误返回给使用 SQLClient 命名空间或 ActiveX 数据对象 (ADO)、OLE DB 和开放式数据库连接 (ODBC) 应用程序编程接口 (API) 的应用程序。SQLSTATE 设置为 01000，即本机错误设置为 0，错误消息字符串设置为 PRINT 语句中指定的字符串。该字符串返回给 DB-Library 应用程序中的消息处理程序回调函数。

在触发器内部的情况下`PRINT`，它将冒泡到导致调用触发器的查询。

如果您想通过 ASP.NET 显示它，您需要订阅该`SqlConnection.InfoMessage`事件。

示例代码：http: [//msdn.microsoft.com/en-us/library/a0hee08w.aspx](http://msdn.microsoft.com/en-us/library/a0hee08w.aspx)

# wordpress - 如何在 WordPress 中同时获取位于 2 个特定类别中的帖子数量

> ID：12601094
> 
> 赞同：1
> 
> 时间：2012-09-26T11:49:40.427
> 
> 标签：wordpress, count, categories, posts

我曾尝试使用此代码：

```
$terms = get_terms('translates_category', 'include=220,238'); 
```

但它返回一个包含两个独立对象的数组：

```
Array
(
[0] => stdClass Object
    (
        [term_id] => 220
        [name] => Degrees of comparison
        [slug] => degrees-of-comparison
        [term_group] => 0
        [term_taxonomy_id] => 272
        [taxonomy] => translates_category
        [description] => 
        [parent] => 217
        [count] => 2
    )

[1] => stdClass Object
    (
        [term_id] => 238
        [name] => Lesson
        [slug] => lesson
        [term_group] => 0
        [term_taxonomy_id] => 290
        [taxonomy] => translates_category
        [description] => 
        [parent] => 0
        [count] => 1
    )
) 
```

我可以假设，它分别返回这两个类别中所有帖子的数量（计数）。但我只需要同时位于两个类别中的帖子的总数。

第一个类别可能有 100 个帖子，第二个类别可能有 10 个帖子，但一次可能只有一个帖子与这两个类别相关联。我需要计算这些帖子。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:45:45.750

这应该可以解决您的问题：

```
function my_post_count($tax, $cat1, $cat2) {
    $args = array(
        'tax_query' => array(
            'relation' => 'AND',
            array(
                'taxonomy' => $tax,
                'field' => 'term_taxonomy_id',
                'terms' => array( $cat1 ),
                'operator' => 'IN'
            ),
            array(
                'taxonomy' => $tax,
                'field' => 'term_taxonomy_id',
                'terms' => array( $cat2 ),
                'operator' => 'IN'
            ),
        )
    );
    $query = new WP_Query( $args );
    return $query->post_count;
}
echo my_post_count('translates_category', 220, 238); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:01:31.887

使用下面的代码，为此您必须为帖子制作两部分，即每个部分

```
<?php
global $post;
$args = array( 'numberposts' => 5, 'category' => 3 );

$myposts = get_posts( $args );
foreach( $myposts as $post ) :
setup_postdata($post); ?>

<?php the_title(); ?>
<?php the_content(); ?>

<?php endforeach; ?> 
```

更改要显示的帖子数量和类别...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:21:39.330

您可以将此功能粘贴到您的`functions.php`

```
function get_post_count($categories) {
    global $wpdb;
    $post_count = 0;
    $post_count_array=array();
    foreach($categories as $cat) :
        $catID=get_cat_id($cat);
        $querystr = "SELECT count FROM $wpdb->term_taxonomy WHERE term_id = $catID";
        $result = $wpdb->get_var($querystr);
        $post_count += $result;
        $post_count_array[$cat]=$result;
    endforeach;
    $post_count_array['total']=$post_count;
    return $post_count_array;
} 
```

然后像这样调用这个函数

```
$posts_Cat_Num=get_post_count(array('plugin', 'php')); // these are category names
print_r($posts_Cat_Num); // Array ( [plugin] => 2 [php] => 3 [total] => 5 ) 
echo $posts_Cat_Num['plugin']; // 2
echo $posts_Cat_Num['php']; // 3
echo $posts_Cat_Num['total']; // 5 
```

**更新**（从评论中我理解了这个问题）

```
$q=new WP_Query(array('category__and' => array(220, 238))); // get posts for both category ids
echo $q->post_count; 
```

# c++ - microsoft visual c 可再发行包和运行时包有什么区别？

> ID：12601097
> 
> 赞同：10
> 
> 时间：2012-09-26T11:49:46.390
> 
> 标签：c++, runtime

Microsoft Visual c++ 2010 可再发行包和运行时包有什么区别？我找不到 Runtime visual c++ 2010 的安装文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T11:52:37.857

它是包含运行时的可再发行包。在某些地方，它被称为运行时可再发行组件。

> Microsoft Visual C++ 2010 Redistributable Package 安装 Visual C++ 库的运行时组件，这些组件需要在未安装 Visual C++ 2010 的计算机上运行使用 Visual C++ 开发的应用程序。此软件包安装 C 运行时 (CRT)、标准 C++、ATL、MFC、OpenMP 和 MSDIA 库的运行时组件。

参考：[http ://www.microsoft.com/en-us/download/details.aspx?id=14632](http://www.microsoft.com/en-us/download/details.aspx?id=14632)

# spring - 将 spring 配置文件中的公共属性注入每个测试类

> ID：12601100
> 
> 赞同：0
> 
> 时间：2012-09-26T11:49:58.663
> 
> 标签：spring, testng

我对弹簧注射有一点澄清。我正在编写服务测试。每个测试类都有一个名为“tenantId”的通用属性。我可以通过spring配置文件注入该属性吗？我不想将每个测试类都添加到spring配置文件中，有没有办法呢？

```
@ContextConfiguration(locations = {"classpath*:applicationContext-service-test.xml"})
public class ApplicationServiceTest extends AbstractTestNGSpringContextTests {

    @Autowired
    TenantBasedSessionFactory tenantBasedSessionFactory;

    @Autowired
    private ApplicationService applicationService;
    private String tenantId = "tenantId"; // I want this to inject from applicationContext-service-test.xml 
    private Session session;
} 
```

弹簧配置文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.0.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- Use @Transaction annotations for managing transactions  -->
    <tx:annotation-driven/>

    <!-- Activates scanning of @Autowired -->
    <context:annotation-config/>

    <!-- Activates scanning of @Service and @Repository -->
    <context:component-scan base-package="lk.gov.elg"/>

    <!-- JDBC property file -->
    <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="locations">
            <list>
                <!--<value>classpath:test.jdbc.properties</value>-->
                <value>jdbc.properties</value>
            </list>
        </property>
    </bean>

    <!--<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"-->
    <!--p:driverClassName="org.hsqldb.jdbcDriver" p:url="jdbc:hsqldb:mem:test"-->
    <!--p:username="sa" p:password="" />-->

    <!-- create database connection pool -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <!--<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">-->
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
        <property name="maxActive" value="100"/>
        <property name="maxWait" value="1000"/>
        <property name="poolPreparedStatements" value="true"/>
        <property name="defaultAutoCommit" value="true"/>
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="packagesToScan" value="lk.gov.elg.orm.model"/>
        <property name="hibernateProperties">
            <value>
                hibernate.dialect=${hibernate.dialect.test}
                hibernate.hbm2ddl.auto=update
                hibernate.cache.use_second_level_cache=true
                hibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider
            </value>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="tenantBasedSessionFactory" class="lk.gov.elg.orm.dao.impl.TenantBasedSessionFactoryImpl">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    <bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor"/>
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>
</beans> 
```

提前谢谢你干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:14:56.140

您可以为所有测试创建一个通用超类，以将`tenantId`. 有了这个，你只需要注入一次，并且`tenandId`可以用于所有你想要的类。

# php - YML 验证文件被忽略

> ID：12601104
> 
> 赞同：16
> 
> 时间：2012-09-26T11:50:19.263
> 
> 标签：php, validation, symfony, yaml

我是 Symfony 2 Web 框架的新手，并且正在努力完成一项非常基本的验证任务。我有一个`Post`包含 member 的实体模型，`slug`我用它来建立帖子的链接。在`Post.orm.yml`我定义`unique: true`并希望将此约束作为验证器包含在内。

我创建了一个文件`validation.yml`：

```
# src/OwnBundles/BlogpostBundle/Resources/config/validation.yml

OwnBundles\BlogpostBundle\Entity\Post:
    properties:
        slug:
            - NotBlank: ~
    constraints:
        - Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity: slug 
```

我的控制器中的创建功能非常简单：

```
public function addAction(Request $request)
{
    $post = new Post();
    $form = $this->createForm(new PostType(), $post);

    if($request->getMethod() == 'POST')
    {
        $form->bind($request);
        if($form->isValid())
        {
            $em = $this->getDoctrine()->getManager();
            $em->persist($post);
            $em->flush();
            return $this->redirect(
                $this->generateUrl('own_bundles_blogpost_homepage')
            );
        }
    }
    return $this->render(
        'OwnBundlesBlogpostBundle:Default:add.html.twig',
        array(
            'title' => 'Add new blogpost',
            'form' => $form->createView(),
        )
    );
} 
```

基本的页面流工作正常，我可以添加帖子并查看它们，但是如果我复制帖子标题来测试我的验证，它会引发异常：`SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'duplicate-slug' for key 'UNIQ_FAB8C3B3989D9B62'`. 我已经浏览了很长一段时间的文档，但我无法找出我的`$form->isValid()`退货原因`true`。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-26T12:01:05.260

您是否在 app/config/config.yml 中启用了验证？

```
...

framework:
    ...
    validation:    { enabled: true }
    ...

... 
```

如果你也想用注释定义验证，你必须同时启用验证和注释验证：

```
...

framework:
    ...
    validation:    { enabled: true, enable_annotations: true }
    ...

... 
```

然后不要忘记清除`app/cache`目录。

# java - 缺少工件 org.apache.mina:mina-integration-ognl:bundle:2.0.2

> ID：12601115
> 
> 赞同：0
> 
> 时间：2012-09-26T11:50:50.783
> 
> 标签：java, maven, dependencies, apache-mina, artifact

我在本地 Maven 存储库中配置了自己的 JAR，它通过以下方式依赖于 MINA：

```
<!-- mina-core-2.0.2.jar -->
<dependency>
  <groupId>org.apache.mina</groupId>
  <artifactId>mina-core</artifactId>
  <version>2.0.2</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-integration-jmx</artifactId>
    <version>2.0.2</version>
</dependency> 
```

我写这篇文章是希望 Maven 会根据我的库的需要下载 2.0.2 版的 JAR。

但是 Eclipse 将 2.0.2 工件识别为“捆绑包”。

`mina-integration-jmx`神器依赖于以下`mina-integration-ognl`方式

```
<dependency>
  <groupId>${project.groupId}</groupId>
  <artifactId>mina-integration-ognl</artifactId>
  <version>${project.version}</version>
  <type>bundle</type>
</dependency> 
```

即它希望`mina-integration-ognl`成为一个捆绑包。

我在存储库中看到了这个工件，并且没有看到为什么不能下载它的问题。

**我的整个 POM**

此 POM 用于创建`org.red5:red5`工件：

```
<?xml version="1.0"?>
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.red5</groupId>
  <artifactId>red5</artifactId>
  <name>Red5 Library</name>
  <version>1.0.0-RC1</version>
  <description>Red5 Core Library</description>
  <dependencies>

<!-- com.springsource.slf4j.api-1.6.1.jar -->
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.6.1</version>
</dependency>

<!-- com.springsource.org.apache.xerces-2.9.1.jar -->

<!-- mina-core-2.0.2.jar -->
<dependency>
  <groupId>org.apache.mina</groupId>
  <artifactId>mina-core</artifactId>
  <version>2.0.2</version>
</dependency>

<!-- commons-beanutils-1.8.2.jar -->
<dependency>
    <groupId>commons-beanutils</groupId>
    <artifactId>commons-beanutils</artifactId>
    <version>1.8.2</version>
</dependency>

<!-- ehcache-core-2.2.0.jar -->
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-core</artifactId>
    <version>2.2.0</version>
</dependency>

<!-- com.springsource.org.apache.commons.lang-2.4.0.jar -->
<dependency>
    <groupId>commons-lang</groupId>
    <artifactId>commons-lang</artifactId>
    <version>2.4</version>
</dependency>

<!-- jaudiotagger-1.0.8.jar -->
<dependency>
    <groupId>org.jaudiotagger</groupId>
    <artifactId>jaudiotagger</artifactId>
    <version>1.0.8</version>
</dependency>

<!-- logback-classic-0.9.26.jar -->
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>0.9.26</version>
</dependency>

<!-- logback-core-0.9.26.jar -->
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-core</artifactId>
    <version>0.9.26</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>jul-to-slf4j</artifactId>
    <version>1.6.1</version>
</dependency>

<!-- httpclient-3.1.0.jar -->
<dependency>
    <groupId>commons-httpclient</groupId>
    <artifactId>commons-httpclient</artifactId>
    <version>3.1</version>
</dependency>

<dependency>
    <groupId>commons-codec</groupId>
    <artifactId>commons-codec</artifactId>
    <version>1.4</version>
</dependency>

<!-- bcprov-jdk16-145.jar -->
<dependency>
    <groupId>org.bouncycastle</groupId>
    <artifactId>bcprov-jdk16</artifactId>
    <version>1.45</version>
</dependency>

<!-- xmlrpc-2.0.1.jar -->
<dependency>
    <groupId>org.apache.ws.xmlrpc</groupId>
    <artifactId>xmlrpc</artifactId>
    <version>2.0.1</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-integration-jmx</artifactId>
    <version>2.0.2</version>
</dependency>

<dependency>
    <groupId>org.opensymphony.quartz</groupId>
    <artifactId>quartz</artifactId>
    <version>1.6.5</version>
</dependency>

<!-- com.springsource.org.codehaus.groovy-1.7.0.jar -->
<dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy</artifactId>
    <version>1.7.0</version>
</dependency>

<!-- jython-2.5.jar -->
<dependency>
    <groupId>org.python</groupId>
    <artifactId>jython</artifactId>
    <version>2.5.0</version>
</dependency>

</dependencies>
</project> 
```

使用 JarAnalyzer 从 red5.jar 派生依赖关系，然后将 red5.jar 安装到本地存储库中。

后来在我的 Eclipse 项目中，这个工件被引用了以下 POM：

```
<dependencies>
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.6.1</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.red5</groupId>
    <artifactId>red5</artifactId>
    <version>1.0.0-RC1</version>
</dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T05:59:12.203

Try it with manual installing, I mean **mvn install** This is because maven couldn't download some dependencies automatically. So we have to use manual way to download dependencies with cmd. this is another example with installing ojdbc14.jar

[How to add oracle jdbc jar to maven local repository](http://www.mkyong.com/maven/how-to-add-oracle-jdbc-driver-in-your-maven-local-repository/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T05:59:34.117

我的 pom 中也有一些缺少工件错误，包括使用 mina-integration-jmx 时的“缺少工件 org.apache.mina:mina-integration-ognl:bundle:”。我不能确定这是否适合您的情况，但是如果您将以下示例项目签入 Eclipse，将我的标签放在我损坏的 pom 的末尾，可以修复这些错误。

[http://svn.apache.org/repos/asf/mina/mina/branches/2.0/mina-example](http://svn.apache.org/repos/asf/mina/mina/branches/2.0/mina-example)

这是我放在 pom 末尾的构建标签。

```
<build>
    <finalName>mina-game-server</finalName>
    <sourceDirectory>src/main/java</sourceDirectory>
    <!--  控制资源文件的拷贝
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <targetPath>${project.build.directory}</targetPath>
        </resource>
    </resources>
     -->
    <plugins>
        <!-- 设置源文件编码方式 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <defaultLibBundleDir>lib</defaultLibBundleDir>
                <source>1.7</source>
                <target>1.7</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <!-- 打包jar文件时，配置manifest文件，加入lib包的jar依赖 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                        <mainClass>com.example.bin.StartUp</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
        <!-- 拷贝依赖的jar包到lib目录 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>
                            ${project.build.directory}/lib
                        </outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <!-- 解决资源文件的编码问题 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.6</version>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <!-- 解决mina包maven配置文件报错问题 -->
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
        </plugin>
    </plugins>
</build> 
```

我已经测试了这些示例并且它们有效。

如果你对我为 mina-examples 项目制作的前半部分 pom 感兴趣，这里是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.shirong</groupId>
<artifactId>mina-example</artifactId>
<version>1.0.0</version>

<packaging>jar</packaging>  
<name>Apache MINA Examples</name>
<url>http://www.example.com</url>
<dependencies>

<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
    <scope>test</scope>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.2.9.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-tx</artifactId>
    <version>3.2.9.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>3.2.9.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.2.9.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aspects</artifactId>
    <version>3.2.9.RELEASE</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-core</artifactId>
    <version>2.0.7</version>
</dependency>

<dependency>
  <groupId>org.apache.mina</groupId>
  <artifactId>mina-integration-jmx</artifactId>
  <version>2.0.7</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-integration-xbean</artifactId>
    <version>2.0.7</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-integration-beans</artifactId>
    <version>2.0.7</version>
    <type>bundle</type>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-integration-ognl</artifactId>
    <version>2.0.7</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-statemachine</artifactId>
    <version>2.0.7</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-filter-compression</artifactId>
    <version>2.0.7</version>
</dependency>

<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-transport-apr</artifactId>
    <version>2.0.7</version>
</dependency>

<dependency>
  <groupId>jmock</groupId>
  <artifactId>jmock</artifactId>
  <version>1.2.0</version>
  <scope>test</scope>
</dependency>

<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jcl-over-slf4j</artifactId>
  <version>1.6.6</version>
</dependency>

</dependencies> 
```

升

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-26T14:10:42.823

将以下插件添加到 pom.xml 项目/build/plugins

```
 <plugin>
        <groupId>org.apache.felix</groupId>
        <artifactId>maven-bundle-plugin</artifactId>
        <extensions>true</extensions>
    </plugin> 
```

# c# - PayU 集成网络服务 URL

> ID：12601116
> 
> 赞同：2
> 
> 时间：2012-09-26T11:50:57.013
> 
> 标签：c#, asp.net, .net, payu

我正在尝试通过 Visual Studio 解决方案添加 PayU Web 服务 URL 的 Web 服务引用（在 PayU 集成文档中给出）。但无法检索任何服务。

测试服务器

网络服务网址 [https://test.payu.in/merchant/postservice](https://test.payu.in/merchant/postservice)

您可以参考以下链接 [http://www.scribd.com/doc/77209934/PayU-Technical-Integration-Document-v1-3](http://www.scribd.com/doc/77209934/PayU-Technical-Integration-Document-v1-3)

我无法理解问题出在哪里？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:14:39.937

您确定提供的 URL 实际上是 WebService 吗？

似乎它可能是执行 POST 的页面。

我很快用谷歌搜索，找到[了这个页面](https://secure.safeshop.co.za/documentation/Code/CodingExample_CSharp.htm)。

希望有帮助。

# php - PHP 使用 For Each 循环识别数组的第一个数据

> ID：12601119
> 
> 赞同：0
> 
> 时间：2012-09-26T11:51:01.503
> 
> 标签：php

假设我有这个数组：

```
$cars = array("Saab","Volvo","BMW","Toyota"); 
```

我也有这个 Foreach 循环来“操纵”那个数组：

```
foreach ($cars as $carsdata) 
    { 
        if (*this is array[0]) {
            do something here
        }else if (*array[1] ... array[x]){
            do another thing here
        }        
    } 
```

知道如何正确编写 Foreach 吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T11:52:45.667

您可以包含一个简单的布尔值，如下所示：

```
$firstRow=true;
foreach ($cars as $carsdata) 
{ 
    if ($firstRow) 
    {
        $firstRow=false;
        // do something here
    }
    else
    {
        // do another thing here
    }        
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T11:54:13.087

在您的情况下，您的数组是数字索引的，所以实际上您可以这样做：

```
foreach ($cars as $index => $carsdata) 
{ 
    if ($index == 0) { // array[0]
        do something here
    } else { // *array[1] ... array[x]
        do another thing here
    }        
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T11:53:21.087

如果您已经像输入的问题那样索引了数组 $cars，那么这将起作用：

```
foreach ($cars as $i => $carsdata) {
    if (!$i) {
        // do something with first
    } else {
        // do something with second+
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T11:55:42.413

这行得通吗？

```
foreach ($cars as $key => $carsdata) {
     if ($key == 0) {
        //do
    } else {
        //do
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T11:57:39.123

另一种可能

```
$i = 0;
$len = count($carsdata);
foreach ($cars as $carsdata) 
{ 
    if ( $i == 0 ) {
        // first element
        // do something here
    }else if ($i == $len - 1){
        // last element
        // do another thing here
    } else {
        // do the rest here
    } 
    $i++;     
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T12:03:52.287

```
foreach ($cars as $carsdata=>value) 
{ 
    if($value==0){
        // Do the things for the o th index 
    }
    else{

    }
} 
```

# iphone - iOS - 在 Quartz 上垂直缩放文本

> ID：12601124
> 
> 赞同：0
> 
> 时间：2012-09-26T11:51:33.780
> 
> 标签：iphone, ios, ipad, quartz-graphics

我正在向石英上下文写一些文本。

我有一个 500 x 200 像素的盒子，我正在里面写一些文字。该框可以具有任何纵横比，但文本将始终按照字体比例书写。我想要的是垂直缩放字体并保持水平缩放。

看图片。第一个方框代表我得到的，第二个方框代表我想要的。

![在此处输入图像描述](../Images/d35af7ce73225e13000e6f39aa78a3a0.png)

我就是这样写的……

```
CGRect rect = CGRectMake(0,0,500,200);
[myText drawInRect:rect
        withFont:aFont
        lineBreakMode:UILineBreakModeTailTruncation
        alignment:UITextAlignmentCenter]; 
```

有没有办法垂直缩放字体？

> 注意：因为这是在 PDF 上下文中编写的，所以我不想将文本渲染到图像上下文并垂直缩放，因为我不想失去分辨率。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:36:24.590

```
 - (void) scaleTextVerticallyWithContext:(CGContextRef)myContext withRect:(CGRect)contextRect
{
    CGFloat w, h;
    w = contextRect.size.width;
    h = contextRect.size.height;

    CGAffineTransform myTextTransform;    
    CGContextSelectFont (myContext, "Helvetica-Bold", h/10, kCGEncodingMacRoman);
    CGContextSetCharacterSpacing (myContext, 10);
    CGContextSetTextDrawingMode (myContext, kCGTextFillStroke); 

    CGContextSetRGBFillColor (myContext, 0, 1, 0, .5);
    CGContextSetRGBStrokeColor (myContext, 0, 0, 1, 1);  

         /*  
          *  CGAffineTransformMakeScale ( CGFloat sx, CGFloat sy );
          *  sx: The factor by which to scale the x-axis of the coordinate system.
          *  sy: The factor by which to scale the y-axis of the coordinate system.  
          */

    myTextTransform = CGAffineTransformMakeScale(1,8);

    CGContextSetTextMatrix (myContext, myTextTransform);
    CGContextShowTextAtPoint (myContext, 40, 0, "Hello There", 9);
}

- (void)drawRect:(CGRect)rect{

    // Drawing code
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGRect viewBounds = self.bounds;
    CGContextTranslateCTM(context, 0, viewBounds.size.height);
    CGContextScaleCTM(context, 1, -1);

    [self scaleTextVerticallyWithContext:context withRect:viewBounds];
} 
```

# javascript - 页面关闭和谷歌分析

> ID：12601132
> 
> 赞同：0
> 
> 时间：2012-09-26T11:51:59.297
> 
> 标签：javascript, web, google-analytics

当我要使用谷歌分析的事件跟踪功能记录一些数据时，我有一个 Web 应用程序要求。我正在使用这样的方法使用 onbeforeunload 方法：

```
 window.onbeforeunload = fnUnloadHandler
        function fnUnloadHandler() {
        endTime = new Date()
        var dif = endTime.getTime() - startTime.getTime()
        var diffSeconds = dif / 1000
        var timeSpent = Math.floor(diffSeconds)

        //Register time on app\n");
        RegisterMultipleDataOnGA('timeonapp', timeSpent)

       return 'page closing'
    } 
```

Register multiple on GA 方法负责使用谷歌分析的 _gaq.push 方法记录数据。看起来这在网络浏览器中有点不一致，在移动浏览器中根本不起作用。

在网络浏览器中，如果我有类似 fiddler 的东西在运行，我注意到对 Google Analytics 的服务调用已完成，但它显示为待处理状态，然后页面关闭。我不确定此服务调用是否已完成，以便将数据登录到 Analytics，因此：

1.  onbeforeunload 也能在移动浏览器中完美运行吗？
2.  有没有办法可以确保在页面关闭之前将数据记录到分析中？

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:58:08.257

啊！我提出了同样的问题！但没有运气！beforeunload 非常棘手，并且在不同浏览器中的行为不同，所以我使用模式窗口来跟踪或等到我的请求完成，但令我失望的是它在 chrome 中不起作用。

检查此线程以获取更多信息。

[onbeforeunload 所有浏览器中的无缝行为](https://stackoverflow.com/questions/12561345/onbeforeunload-seamless-behavior-in-all-browsers)

# c# - 设计基于 Windows 的桌面应用程序的最新趋势

> ID：12601139
> 
> 赞同：0
> 
> 时间：2012-09-26T11:52:17.653
> 
> 标签：c#, wpf, winforms, silverlight, desktop-application

我有一个使用 .Net 4.0 框架用 C# 编写的应用程序。由于该应用程序是一种旧应用程序，因此它使用窗口窗体。该应用程序目前非常简单，它没有像使用 WPF 和 Silverlight 那样的高级图形界面。我现在决定将应用程序提升到下一个级别，即最新的、使用当前趋势和出色用户界面的应用程序。在明智地改进此应用程序设计、性能和外观方面，我有哪些选择？喜欢使用 WPF、MS Silverlight 或任何其他很酷的技术吗？

我有点需要想法我能做些什么来获得高科技应用？一些很酷的应用程序的一些例子也将不胜感激。

关于应用程序的一点：

它是一个 Windows 桌面应用程序，使用 Access 作为用于某些财务分析的数据库。

如果需要更多信息？请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:34:04.890

简而言之：我说 WPF 是您在技术方面所需要的全部。它真的很整洁，我喜欢它的外观并且非常易于使用（尤其是使用 Expression Blend！）

附带说明：

这里最大的问题是设计一个好的界面，而不是使用“更闪亮”的按钮。目前，UI设计的元素越来越多，转向UX设计。如果你谷歌，你可以阅读它，一些链接开始：

[http://msdn.microsoft.com/en-us/library/aa511258.aspx](http://msdn.microsoft.com/en-us/library/aa511258.aspx)

[http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/industryinsights/solutions/pdfs/Forrester_Best_Prac_In_User_Exp.pdf](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/industryinsights/solutions/pdfs/Forrester_Best_Prac_In_User_Exp.pdf)

[http://developer.android.com/design/get-started/creative-vision.html](http://developer.android.com/design/get-started/creative-vision.html) - 这是关于 Android 的，但它可以而且应该转移到桌面环境

我会用一个小比喻：你问我们“我应该用什么样的颜料来画我的杰作，这会让莱昂纳多·达·芬奇感到羞耻？”。您确定您已经知道该涂料的用途和方法吗？一些艺术家只用一支铅笔就画出了杰作，而另一些艺术家尽管使用了最好的工具，但也无法做任何有价值的事情。

# c - 如何在C中显示一些变量的起始地址？

> ID：12601140
> 
> 赞同：2
> 
> 时间：2012-09-26T11:52:28.320
> 
> 标签：c, memory-address

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <string.h>

extern char **environ;

int global_x = 10;                  // initialised global variable
int global_y;                       // un-initialised global variable
char global_array1[] = "Hello, world!";     // initialised global array and a string literal
char global_array2[10];             // un-initialised global array
char *global_pointer1 = "bye!";         // global pointer to a string literal 
char *global_pointer2;              // un-initialised global pointer 
float global_float = 100.1;         // initialised global variable
double global_double;               // un-initialised global variable

#define ONEGB  1073741824
#define ONEMB  1048576
#define ONEKB  1024

char *addr(unsigned long a)
{
    unsigned long r; // remainder

    r = (unsigned long) a;
    int gb = (int) ( r / ONEGB );

    r -=  gb * ONEGB;
    int mb = (int) ( r  / ONEMB );

    r -=  mb * ONEMB;
    int kb = (int) ( r  / ONEKB );

    r -=  kb * ONEKB;
    int b  = (int) ( r );

    char *p = malloc(64);

    sprintf(p, "%4dGB, %4dMB, %4dKB, %4d", gb, mb, kb, b);
    return p;
}

int f2(int x)
{
    char * f2_p;
    int f2_x = 21;

    f2_p = malloc(1000);         // dynamically allocated memory

    // print out the address of x
    // print out the addresses of f2_p, and f2_x
    // print out the starting address of the dynamically allocated memory
    .....

    L: f2_x = 10;
    return f2_x;
}

void f1(int x1, int x2, float x3, char x4, double x5, int x6)
{
    int f1_x = 10;
    int f1_y;
    char *f1_p1 = "This is inside f1";   // pointer to another string literal 
    char *f1_p2;

    f1_p2 = malloc(100);         // dynamically allocated memory

    // print out the addresses of x1, x2, x3, x4, x5, x6
    // print out the addresses of f1_x, f1_y, f1_p1, f1_p2
    // print out the address of the string literal "This is inside f1"
    .....

    f1_y = f2(10);
    return;
}

int main(int argc, char *argv[])
{

    // print out the addresses of argc, argv
    // print out the starting address and end address of the command line arguments of this process
    // print out the starting address and end address of the environment of this process
    // print out the starting addresses of function main, f1, and f2
    // print out the addresses of global_x, global_y, global_array1, global_array2, global_pointer1,
    //           global_pointer2, global_float, global_double
    // print out the addresses of string literals 10, "Hello, world!", "bye", 100.1

    ..... 

    // call function f1 with suitable arguments such as 12, -5, 33.7, 'A', 1.896e-10, 100 
    f1( .... );

    exit(0);
} 
```

我试图在google上搜索，但找不到有用的东西，在这种情况下我只想弄清楚如何打印出动态分配的内存的起始地址；打印出本进程命令行参数的起始地址和结束地址；打印出本进程环境的起始地址和结束地址；打印函数main、f1、f2的起始地址。任何人都可以帮助我吗？..谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:54:40.080

f1 和 f2（没有 (parameter) 块）是函数的起始地址，以便更好地说明。f2(x); 调用函数 int f2(int x) 并传递参数 x。不带括号的“f2”是函数int f2(int x)的地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:54:59.160

在`main`：

打印出地址`argc, argv` ——`printf ("%d, %d", &argc, argv);`

打印出这个进程的命令行参数的起始地址和结束地址——`printf ("%d", (void *)argv);`

打印出这个进程的环境的起始地址和结束地址——`printf ("%d", (void *)environ);`

打印出函数的起始地址`main, f1, and f2`-`printf ("%d %d %d", &main, &f1, &f2);`

打印出地址`global_x, global_y, global_array1, global_array2, global_pointer1, global_pointer2, global_float, global_double`- 只需`&`在要打印其地址的每个变量前面使用运算符。

打印字符串文字的地址`10, "Hello, world!", "bye", 100.1`- 不允许打印字符串文字的地址。

在`f1`：

打印出 x1, x2, x3, x4, x5, x6 的地址 -`printf ("%d %d %d %d %d %d", &x1, &x2, &x3, &x4, &x5);`

打印出 f1_x, f1_y, f1_p1, f1_p2 的地址 -`printf ("%d %d %d %d", &f1_x, &f1_y, f1_p1, f2_p2);`

打印出字符串文字的地址`"This is inside f1"`- 不允许获取字符串文字的地址

在`f2`：

打印出 x 的地址 -`printf ("%d", &x);`

打印出 f2_p 和 f2_x 的地址 - `printf("%d", f2_p, &f2_x)`；

打印出动态分配内存的起始地址——`printf ("%d", f2_p);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-19T15:03:21.193

根据我的讲师的指导声明一个字符串文字 -

```
char *p = "this is a string literal";

printf("address of variable p starts at %p\n",  &p));
printf("address of the string literal starts at %p\n", p); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T11:54:22.517

为此，您需要 & 运算符。它需要一个变量的地址

可以在[此处找到有关指针运算符的更多信息](http://www.cplusplus.com/doc/tutorial/pointers/)

到常规变量的起始地址：

```
printf("%p", &variable); 
```

这些变量并没有真正的结束地址，但我认为你想要的是这样的：

```
printf("%p", (&variable + 1)); 
```

打印下一个可用地址

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-26T12:17:56.323

如果要查看变量的地址，则需要使用`&`运算符或直接指针（在动态分配内存的情况下）。

```
int main(int argc, char *argv[]){  
   int * arr;
   int i = 0;
   arr = malloc(100 * sizeof(int));
   printf("dynamic array starts at: %#x and ends at: %#x\n",arr,arr+100);
   printf("static i is at: %#x\n",&i);
} 
```

输出：

```
mike@linux-4puc:~> ./a.out 
dynamic array starts at: 0x804b008 and ends at: 0x804b198
static i is at: 0xbfc1f6d8 
```

# jquery - 整个页面加载后播放css3动画

> ID：12601141
> 
> 赞同：2
> 
> 时间：2012-09-26T11:52:35.190
> 
> 标签：jquery, animation, css

我一直在尝试根据[this](https://stackoverflow.com/questions/5771378/start-css3-animation-after-entire-page-load)使用jquery将css3动画设置为在整个页面加载后加载，但无济于事。任何人都知道任何其他方式，或者也许我忽略了一些东西？谢谢。

这是我的代码：

```
<script src="scripts/jquery-1.8.0.js" type="text/javascript"></script>

<img id="anim" src="image/some image.png" alt="image"/>
<script type="text/javascript" charset="UTF-8">
    $("window").load(function() {
        $("#anim").addClass("animation");
    });
</script> 
```

类动画是我放置 css3 动画的地方。请注意，当我将类直接包含到图像中时，动画运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:56:22.263

看看[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

回答：

```
<script type="text/javascript">
  $(function() {
    $("#anim").addClass("animation");
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:59:38.773

尝试用以下内容包围您的代码：

```
$(document).ready(function() {
 //Your code here
}) 
```

`.ready(handler)`指定当 DOM 完全加载时要执行的函数。

并且`handler`是在 DOM 准备好后执行的函数。

虽然 JavaScript 提供了在页面呈现时执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。在大多数情况下，只要完全构建了 DOM 层次结构，就可以运行脚本。传递给的处理程序`.ready()`保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序并运行其他`jQuery`代码的最佳位置。当使用依赖 CSS 样式属性值的脚本时，在引用脚本之前引用外部样式表或嵌入样式元素很重要。

[在这里查看更多](http://api.jquery.com/ready/)

# java - 如何告诉 querydsl-maven-plugin 使用 Long 而不是 BigDecimal 生成 NumberPath？

> ID：12601143
> 
> 赞同：5
> 
> 时间：2012-09-26T11:52:41.893
> 
> 标签：java, oracle, maven, querydsl

我正在使用`querydsl-maven-plugin`以从 Oracle 11g 数据库中导出 Q 路径。我面临的问题是 Oracle`NUMBER`字段被映射到 `NumberPath<java.math.BigDecimal>`而不是`NumberPath<Long>`

有什么方法可以指示在代码生成过程中进行`querydsl-maven-plugin`翻译吗？`BigDecimal``Long`

我现在采用的方法是使用插件生成代码，然后手动转换类型。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:57:12.443

目前可以像这样在 querydsl-maven-plugin 的配置中声明自定义用户类型

```
<configuration>
  <customTypes>
    <customType>com.example.NumericLongType</customType>
  </customTypes>
</configuration> 
```

com.example.NumericLongType 需要实现 com.mysema.query.sql.types.Type 接口

但理想情况下，这应该是这样的

```
<configuration>
  <overrides>
    <NUMERIC>java.lang.Long</NUMERIC>
  </overrides>
</configuration> 
```

Querydsl 将在内部处理从 NUMERIC 到 Long 的映射。

随意为它开张票。

**更新**

现在可以在 Querydsl [https://github.com/mysema/querydsl/issues/273中自定义数字映射](https://github.com/mysema/querydsl/issues/273)

# visual-studio-2010 - 从 VS2010 错误 LNK2019 使用 SWIG 创建 DLL：无法解析的外部符号“int __cdecl axtoi

> ID：12601158
> 
> 赞同：0
> 
> 时间：2012-09-26T11:53:48.620
> 
> 标签：visual-studio-2010, swig, main, php-extension

我正在尝试使用 Visual Studio 2010 中的 swig 生成一个 dll 文件，我成功创建并编译了我的 wrapper.cpp 代码，并将每个库依赖项添加到我的项目中。现在，当我尝试使用 .dll 目标扩展名构建项目的发布版本时，出现以下错误：

```
 Generating non-SAFESEH image.
1>Ccrypto_wrap.obj : error LNK2019: unresolved external symbol "int __cdecl axtoi(char const *)" (?axtoi@@YAHPBD@Z) referenced in function __wrap_axtoi 
```

这是有线的，因为 wrapper.cpp 中的所有其他外部符号都已解决，除了

`axtoi`！我的意思是，例如在我的 wrapper.cpp 中，我有 2 个引用`axtoi`：

(1)

```
ZEND_NAMED_FUNCTION(_wrap_axtoi) {   char *arg1 = (char *) 0 ;   zval
**args[1];   int result;
     SWIG_ResetError();   if(ZEND_NUM_ARGS() != 1 || zend_get_parameters_array_ex(1, args) != SUCCESS) {
    WRONG_PARAM_COUNT;   }

      /*@SWIG:C:\Users\user\Desktop\Ccrypto\Lib\php\utils.i,62,CONVERT_STRING_IN@*/
      if ((*args[0])->type==IS_NULL) {
        arg1 = (char *) 0;
      } else {
        convert_to_string_ex(args[0]);
        arg1 = (char *) Z_STRVAL_PP(args[0]);
      }
      /*@SWIG@*/;

      result = (int)axtoi((char const *)arg1);
      {
        ZVAL_LONG(return_value,result);
      }
      return;
    fail:
      SWIG_FAIL();
    } 
```

(2)

> SWIG_ZEND_NAMED_FE(axtoi,_wrap_axtoi,NULL)

我在 Linux 中成功创建了我的班级的共享对象，并将它包含在我的 php 代码中并且它工作正常，所以我尝试`axtoi`在 Linux 中签入我的共享对象，我发现了一件奇怪的事情！`axtoi`当我在我的共享对象中grep 时，我得到：

```
 U _Z5axtoiPKc
0006ccf1 T _wrap_axtoi 
```

但是对于所有其他符号，例如，它的用法与我在包装器代码中的`itoax`用法相同：`axtoi`

```
00093660 T _Z5itoaxi
0006e19f T _wrap_itoax 
```

我有几个类似的符号，它们的使用与上面提到的 wrapper.cpp 代码中的完全相同`axtoi`，但是我没有得到任何未解决的外部符号错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T13:36:37.003

我找到了答案：似乎 C++ 选项调用`axtoi()`函数而不是`atoi()`函数中的 swig 包装器代码生成器。需要在 SWIG 生成的 wrapper.cpp 中进行编辑，然后错误解决。

# c# - 在反序列化期间出现下一个异常：“源数据中的无效字段：0”。如何找出源代码中的原因/错误位置？

> ID：12601164
> 
> 赞同：2
> 
> 时间：2012-09-26T11:54:12.800
> 
> 标签：c#, .net, deserialization, protobuf-net

在这个函数中，我尝试`class Simulator`在客户端反序列化：

```
private void OnHandshakeSimulationStart(Peer peer, Message msg, int seq)
    {
        System.Diagnostics.Trace.WriteLine("TRY OnHandshakeSimulationStart id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
        try
        {
            HandshakeSimulationStart simstart = msg as HandshakeSimulationStart;
            if (simstart == null) OnHandshakeFailed();
            System.Diagnostics.Trace.WriteLine("#1.1 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);

            //Simulator sim = (Simulator)simstart.SimulationState.GetObject();
            Simulator sim = null;
            System.Diagnostics.Trace.WriteLine("#1.2 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);

            try
            {
               // sim = (Simulator)simstart.SimulationState.GetObject();
                using (MemoryStream ms = (MemoryStream)simstart.SimulationState.GetObjectWoDeserialize())
                {
                    System.Diagnostics.Trace.WriteLine("#2.1 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
                    ms.Seek(0, SeekOrigin.Begin);
                    System.Diagnostics.Trace.WriteLine("#2.2 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
                    sim = Serializer.Deserialize<Simulator>(ms); //(Simulator)new BinaryFormatter().Deserialize(ms);
                    System.Diagnostics.Trace.WriteLine("#2.3 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
                }
            }
            catch (SerializationException e)
            {
                Console.WriteLine("Failed to deserialize. Reason: " + e.Message);                    
            }

            System.Diagnostics.Trace.WriteLine("#3 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
            sim.PostDeserialize();
            System.Diagnostics.Trace.WriteLine("#4 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
            lock (this)
            {
                simulator = sim;
                // команды полученные до этого ставим в очередь
                foreach (Commands.Command cmd in CollectedCommandsDuringHandshake)
                    if (cmd.tact >= simulator.tactCounter)
                        simulator.InternalQueue(cmd);
                System.Diagnostics.Trace.WriteLine("#5 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
                CollectedCommandsDuringHandshake = null;

                // настраиваем сетевое время
                networkTime = new Network.Timer(simulator.HZ);
                // настраиваем обработчик команд
                simulator.OnAfterCommand.Add(typeof(Commands.Command), new CommandHandler(OnAfterCommand));
                System.Diagnostics.Trace.WriteLine("#6 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
                // хендшейк закончен
                OnHandshakeCompleted();
                System.Diagnostics.Trace.WriteLine("#7 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
                CurrentReceiveHandler = new Peer.MessageReceivedHandler(OnMessageReceivedInActiveState);
                System.Diagnostics.Trace.WriteLine("#8 id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
            }
        }
        catch (Exception exception)
        {
            System.Diagnostics.Trace.WriteLine("OnHandshakeSimulationStart ERROR: " + exception.Message + " id = " + +System.Threading.Thread.CurrentThread.ManagedThreadId);                
        }
    } 
```

通过使用 DebugView.exe 应用程序，我得到：

```
[26480] Client handshaked: id=0 name=ECDIS[1] version=3.8.1 
[26480] ObjectWrapper(object obj) - ms.Length = 67 id = 10 
[26480] Write(Network.Packet packet) - ObjectDumpProtoBuf.Length = 256 id = 10 
[25404] ObjectWrapper(Network.Packet packet) - len = 256 id = 5 
[25404] TRY OnHandshakeSimulationStart id = 5 
[25404] #1.1 id = 5 
[25404] #1.2 id = 5 
[25404] GetObjectWoDeserialize() id = 5 
[25404] #2.1 id = 5 
[25404] #2.2 id = 5 
[25404] OnHandshakeSimulationStart ERROR: Invalid field in source data: 0 id = 5 
```

我发现反序列化期间引发的异常`class Simulator`：

```
namespace Trainer
{
[Serializable]
[ProtoContract]
public class Simulator
{

    [ProtoMember(1)]
    public IDictionary<int, Task> tasks = new Dictionary<int, Task>();

    [ProtoMember(2)]
    public Workplace[] workplaces;

    [ProtoMember(3)]
    public int tactCounter = 0;

    [ProtoMember(4)]
    public int tactLimit = 0;

    [NonSerialized]
    public int sheduleLimit = 0;

    [ProtoMember(5)]
    public int HZ = 100; 

    public int SyncFactor { get { return 1; } } // HZ/8

    public double DT { get { return 1.0 / (double)HZ; } }

    [ProtoMember(6)]
    List<Commands.Command> commandQueue = new List<Commands.Command>();
    //Queue commandQueue = new Queue();

    [NonSerialized]
    public CommandEventTable OnBeforeCommand = new CommandEventTable();

    [NonSerialized]
    public CommandEventTable OnAfterCommand = new CommandEventTable();

    public void PostDeserialize()
    {
        OnBeforeCommand = new CommandEventTable();
        OnAfterCommand = new CommandEventTable();
        foreach (Task t in tasks.Values)
            t.PostDeserialize();
    }

    public Simulator()
    {

    }

//there are also a lot of functions...

} 
```

对象包装器有助于序列化/反序列化，并且可以与 binaryformatter 一起正常工作，但我将其更改为使用 protobuf-net：

```
namespace Trainer.Network
{
    [Serializable]
    [ProtoContract]
    public class ObjectWrapper : IFile
    {
    //public byte[] ObjectDump;

    [ProtoMember(1)]
    public byte[] ObjectDumpProtoBuf;

    public ObjectWrapper(object obj)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            //for protobuf-net:
            Serializer.Serialize(ms, obj);
            ObjectDumpProtoBuf = ms.GetBuffer();

            //for binaryformatter:
            //new BinaryFormatter().Serialize(ms,obj);
            //ObjectDump = ms.GetBuffer();

            _Guid = Guid.NewGuid();

            System.Diagnostics.Trace.WriteLine("ObjectWrapper(object obj) - ms.Length = " + ms.Length + " id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
        }
    }

    public ObjectWrapper(Network.Packet packet)
    {
        bool body = packet.ReadBool();
        if (body)
        {
            int len = packet.ReadInt();
            ObjectDumpProtoBuf = (byte[])packet.Read(typeof(byte), len);
            //ObjectDump = (byte[])packet.Read(typeof(byte),len);

            System.Diagnostics.Trace.WriteLine("ObjectWrapper(Network.Packet packet) - len = " + len + " id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
        }
        else
            _Guid = (Guid)packet.Read(typeof(Guid));

    }

    public void Write(Network.Packet packet)
    {
        System.Diagnostics.Trace.WriteLine("Write(Network.Packet packet) - ObjectDumpProtoBuf.Length = " + ObjectDumpProtoBuf.Length + " id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
        packet.Write(true);

        //packet.Write((int)ObjectDump.Length);
        //packet.Write(ObjectDump);           
        packet.Write((int)ObjectDumpProtoBuf.Length);
        packet.Write(ObjectDumpProtoBuf);
    }

    public void WriteFileRef(Network.Packet packet)
    {
        packet.Write(false);
        packet.Write(Guid);
    }

    public object GetObject()
    {
        //using (MemoryStream ms = new MemoryStream(ObjectDump))
        using (MemoryStream ms = new MemoryStream(ObjectDumpProtoBuf))
            return new BinaryFormatter().Deserialize(ms);
    }

    public MemoryStream GetObjectWoDeserialize()
    {
        System.Diagnostics.Trace.WriteLine("GetObjectWoDeserialize() id = " + System.Threading.Thread.CurrentThread.ManagedThreadId);
        return new MemoryStream(ObjectDumpProtoBuf);
    }

    #region IFile Members

    [ProtoMember(2)]
    public Guid _Guid = new Guid();
    public Guid Guid { get { return _Guid; } }

    public byte[] Data
    {
        //get { return ObjectDump; } 
        //set { ObjectDump = value;} 
        get { return ObjectDumpProtoBuf; }
        set { ObjectDumpProtoBuf = value; }
    }
    #endregion
} 
```

}

**问题：**如何找出问题的确切位置？我的意思是“源数据中的无效字段：0”源数据 0 是什么？这是一个

```
 [ProtoMember(1)]
    public IDictionary<int, Task> tasks = new Dictionary<int, Task>(); 
```

或不？所以我无法理解什么是错的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:14:45.023

开始了：

```
ObjectDumpProtoBuf = ms.GetBuffer(); 
```

这为您提供了*超大*的后备缓冲区。如果您想避免内存复制，这很方便，**但是**您需要非常小心地只处理`ms.Length`其中的字节 - 其余的都是垃圾。特别是，由于您没有使用该内存，它将全为零......并且零不是有效的字段标题，并且会导致您看到的错误。

要快速检查是否是问题所在，请将其替换为：

```
ObjectDumpProtoBuf = ms.ToArray(); 
```

这是缓冲区中数据的*正确大小的*副本。

如果可行，您*可能*希望切换到返回一个`ArraySegment<byte>`或类似的来表示*超大缓冲区*的部分；IE

```
new ArraySegment<byte>(ms.GetBuffer(), 0, (int)ms.Length); 
```

你逃脱它的原因`BinaryFormatter`是它`BinaryFormatter`知道它自己的长度。协议缓冲区是一种可附加格式，因此它*不*知道自己的长度。

# android - Android Theme.Sherlock.Dialog 对话框填充完整宽度

> ID：12601170
> 
> 赞同：0
> 
> 时间：2012-09-26T11:54:28.243
> 
> 标签：android, actionbarsherlock

我在我的项目中使用 abs。我在清单文件中定义了一个活动，我给了它 Theme.Sherlock.Dialog 样式。这使我的对话框看起来像一个对话框。但是出现的对话框填充了完整的 layout_width ？我究竟做错了什么。这是我的代码

```
<activity
        android:name=".activity.ConfirmationDialog"
        android:configChanges="keyboardHidden|orientation"
        android:label="Confirm"
        android:launchMode="standard"
        android:theme="@style/ThemeWithCorners" />

<style name="ThemeWithCorners" parent="Theme.Sherlock.Dialog">
    <item name="android:windowBackground">@drawable/dialog_round_corners</item>
    <item name="android:windowCloseOnTouchOutside">false</item>
</style>

<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/headerText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="2dp"
    android:textSize="15sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/bodyText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="10dp"
    android:textSize="15sp"
    android:textColor="@color/black"
    android:textStyle="normal" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/posotiveButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="10dp"
        android:layout_weight="1"
        android:background="@drawable/custom_button_grey"
            android:text="@string/postiveButtonText" />

    <Button
        android:id="@+id/negativeButton"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="10dp"
            android:layout_weight="1"
        android:background="@drawable/custom_button_grey"
        android:text="@string/negativeButtonText" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T04:39:29.987

尝试在 ABS\res\layout\abs__dialog_title_holo.xml 中更改以下内容

```
<FrameLayout android:layout_width="wrap_content" 
```

改成

```
<FrameLayout android:layout_width="fill_parent" 
```

这对我有用。

# c# - 首次使用应用程序时，如何使用 C#.Net 创建一个新文件夹？

> ID：12601174
> 
> 赞同：1
> 
> 时间：2012-09-26T11:54:33.857
> 
> 标签：c#, winforms

我希望当我运行我的程序时在我的文档中为它创建一个默认文件夹，以便首次使用这个应用程序（如果已经存在同名的目录，那么我想保留这个文件夹）。

这是我到目前为止尝试的代码：

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
System.IO.Directory.CreateDirectory(path + @"\MaBib"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T11:57:31.393

我不确定我是否理解这个问题，因为

```
Directory.CreateDirectory(path) 
```

仅在目录不存在时才创建该目录。

[`Directory.CreateDirectory`方法](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)

> **除非它们已经存在**或路径的某些部分无效，否则会创建路径中指定的任何和所有目录。...

# android - 确认对话框后如何将数据从类传递到活动？（在地图视图上绘图）

> ID：12601175
> 
> 赞同：1
> 
> 时间：2012-09-26T11:54:36.373
> 
> 标签：android, google-maps, android-mapview

我有一个扩展的覆盖类：

短代码：

```
public class MapOverlay extends Overlay {

private Context context;
private ProgressDialog dDialog;  
Drawable drawable;
GeoPoint MainPoint;
MapView mapView;

public MapOverlay(Context context, MapView mapView)
{
    this.context = context;
    this.mapView = mapView;
}

@Override
public boolean onTap(GeoPoint p, MapView mapView) 
{   
      this.MainPoint = p;
      AlertDialog.Builder dialog = new AlertDialog.Builder(context);
      dialog.setMessage("Do you want to set point here?")
             .setCancelable(false)
   .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
         setPoint();

       }
   })
   .setNegativeButton("No", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
       }
   });

      dialog.show();

    return true;
}    

public void setPoint()
{

       OverlayItem overlayitem = new OverlayItem(MainPoint, "Hi!", "You touched this location!");

} 
```

我想在此活动中的地图视图上绘制触摸点：

```
public class MyMapLocationActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main); 

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    drawable = this.getResources().getDrawable(R.drawable.androidmarker);           
            MapOverlay myOverlay = new MapOverlay(this, mapView);

    mapView.getOverlays().add(myOverlay);
    mapView.postInvalidate();

} 
```

在确认 MapOverlay 类的对话框后，我想标记触摸点。我想我错过了传递一些东西 - 我还应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:18:38.333

您需要有一个扩展 ItemizedOverlay 的类，该类又可以包含一个 OverlayItem，它在其构造函数中采用一个 GeoPoint。就像是

```
public class MapDemo extends MapActivity implements OnTouchListener {

    private Drawable mDrawable;
    private ItemizedMapOverlay mItemizedOverlay;
    private OverlayItem mOverlayitem;
    private GeoPoint mClickedPoint = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        GeoPoint mapCentrePoint = new GeoPoint(51500000, 0);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setOnTouchListener(this);
        MapController mapCtrlr = mapView.getController();
        mapView.setBuiltInZoomControls(true);
        mapCtrlr.setZoom(8);
        mapCtrlr.setCenter(mapCentrePoint);
        List<Overlay> mapOverlays = mapView.getOverlays();
        mDrawable = this.getResources().getDrawable(R.drawable.icon);
        mItemizedOverlay = new ItemizedMapOverlay(mDrawable, this);
        mapOverlays.add(mItemizedOverlay);
    }

    @Override
    protected boolean isRouteDisplayed() {return false;}

    @Override
    public boolean onTouch(View v, MotionEvent e) {

        if (e.getAction() == MotionEvent.ACTION_DOWN) {
            final View fv = v;
            AlertDialog.Builder dialog = new AlertDialog.Builder(v
                    .getRootView().getContext());
            dialog.setMessage("Do you want to set point here?")
                    .setCancelable(false)
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    setPoint(fv);
                                }
                            })
                    .setNegativeButton("No",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    dialog.cancel();
                                }
                            });

            dialog.show();
            // Can't show point till +ve button selected, so store it
            mClickedPoint = ((MapView) v).getProjection()
                            .fromPixels((int)e.getX(), (int)e.getY());
        }
        return true;
    }

    void setPoint(View v) {
        if (mClickedPoint != null) {
            mOverlayitem = new OverlayItem(mClickedPoint, "test", "test2");
            mOverlayitem.setMarker(mDrawable);
            mItemizedOverlay.clear(); // clear last marker
            mItemizedOverlay.addOverlay(mOverlayitem);
            v.postInvalidate();
        }
    }

} 
```

和

```
public class ItemizedMapOverlay extends ItemizedOverlay {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public  ItemizedMapOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public  ItemizedMapOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
    }

    @Override
    protected OverlayItem createItem(int i) {return mOverlays.get(i);}

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView,
            boolean shadow) {
        super.draw(canvas, mapView, shadow);
    }

    @Override
    public int size() { return mOverlays.size();}

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void clear() {
        mOverlays.clear();
    }

} 
```

应该足够接近您以适应。

# bash - 如何使用 rgrep 仅显示包含单词的文件（包括路径）？

> ID：12601177
> 
> 赞同：2
> 
> 时间：2012-09-26T11:54:41.920
> 
> 标签：bash

我在下面使用这个命令来查找所有包含字符串的文件，但它不仅显示文件，还显示字符串所在的行。

```
rgrep "foobar" . 
```

如何只显示文件名（包括路径）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:56:57.183

你需要 -l 选项

来自 grep 手册页：

```
-l, --files-with-matches
          Suppress  normal  output;  instead  print the name of each input file from which output would normally have been printed.  The scanning will stop on the
          first match.  (-l is specified by POSIX.) 
```

# java - 对 Java 客户端使用的 WCF 服务的修改

> ID：12601179
> 
> 赞同：0
> 
> 时间：2012-09-26T11:54:46.107
> 
> 标签：java, wcf

在不影响消费 Java 客户端的情况下，在 Web 服务（WCF）中引入新 DataMember 的最佳方法是什么？

这是我们遇到的问题：有两个团队（Java）使用我们的 Web 服务（WCF）。我们有一个来自上述团队的新要求，需要在我们的 Web 服务中引入新的 DataMember，但另一个团队不需要它。

我们正在考虑将新的 DataMember 添加为 Nullable 类型或在该 DataMember 的数据协定中设置 [IsRequired=false] ，但似乎 Java 不支持 Nullable 类型并且 SOAP 无法识别 [IsRequired] 标记以忽略它。

请有任何建议，以对我们的服务进行此更改，以便只有一个团队需要进行所需的更改而不影响另一个团队？

谢谢。

# c# - 如何通过 jQuery ajax 和 C# 下载文件

> ID：12601180
> 
> 赞同：9
> 
> 时间：2012-09-26T11:54:45.590
> 
> 标签：c#, jquery, webmethod

我想使用 jQuery Ajax Web 方法下载文件，但它不起作用。

这是我对 Web 方法的 jQuery ajax 调用：

```
function GenerateExcel() {
   var ResultTable = jQuery('<div/>').append(jQuery('<table/>').append($('.hDivBox').find('thead').clone()).append($('.bDiv').find('tbody').clone()));
   var list = [$(ResultTable).html()];
   var jsonText = JSON.stringify({ list: list });
   $.ajax({
          type: "POST",
          url: "GenerateMatrix.aspx/GenerateExcel",
          data: jsonText,
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function (response) {

          },
          failure: function (response) {
               alert(response.d);
          }
            });
        } 
```

这是网络方法定义：

```
[System.Web.Services.WebMethod()]
public static string GenerateExcel(List<string> list)
{
    HttpContext.Current.Response.AppendHeader("content-disposition", "attachment;filename=FileEName.xls");
    HttpContext.Current.Response.Charset = "";
    HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
    HttpContext.Current.Response.Write(list[0]);
    HttpContext.Current.Response.End();
    return "";
} 
```

如何完成？

还有一件事：我想在客户端 PC 上下载它，而不是保存在服务器上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:04:43.713

好吧，我已经使用 iframe 完成了

这是修改后的 ajax 函数调用

```
 function GenerateExcel() {
            var ResultTable = jQuery('<div/>').append(jQuery('<table/>').append($('.hDivBox').find('thead').clone()).append($('.bDiv').find('tbody').clone()));
            var list = [$(ResultTable).html()];
            var jsonText = JSON.stringify({ list: list });
            $.ajax({
                type: "POST",
                url: "GenerateMatrix.aspx/GenerateExcel",
                data: jsonText,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    if (isNaN(response.d) == false) {
                        $('#iframe').attr('src', 'GenerateMatrix.aspx?ExcelReportId=' + response.d);
                        $('#iframe').load();
                    }
                    else {
                        alert(response.d);
                    }
                },
                failure: function (response) {
                    alert(response.d);
                }
            });
        } 
```

这是设计部分

```
 <iframe id="iframe" style="display:none;"></iframe> 
```

在页面加载我的代码看起来像这样

```
 Response.AppendHeader("content-disposition", "attachment;filename=FileEName.xls");
 Response.Charset = "";
 Response.Cache.SetCacheability(HttpCacheability.NoCache);
 Response.ContentType = "application/vnd.ms-excel";
 Response.Write(tableHtml);
 Response.End(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-17T19:41:28.703

1.  在您的视图页面中添加这些 -

    ```
    <iframe id="iframe" style="display:none;"></iframe>
    <button id="download_file">Download</button> 
    ```

2.  服务器端

    ```
    public string Download(string file)        
    {

        string filePath = Server.MapPath(System.Configuration.ConfigurationManager.AppSettings["FileManagementPath"]);

        string actualFilePath = System.IO.Path.Combine(filePath, file);
        HttpContext.Response.ContentType = "APPLICATION/OCTET-STREAM";
        string filename = Path.GetFileName(actualFilePath);
        String Header = "Attachment; Filename=" + filename;
        HttpContext.Response.AppendHeader("Content-Disposition", Header);           
        HttpContext.Response.WriteFile(actualFilePath);
        HttpContext.Response.End();
        return "";
    } 
    ```

3.  在您的 JavaScript 中添加此代码

    ```
    <script>

        $('#download_file').click(function(){

            var path = 'e-payment_format.pdf';//name of the file
            $("#iframe").attr("src", "/FileCabinet/Download?file=" + path);

        });

     </script> 
    ```

那应该工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:51:55.310

假设 C# 代码以正确的 Excel 标头响应，您可以简单地重定向到链接而不是使用 ajax：

```
var list = [$(ResultTable).html()];
var url = "GenerateMatrix.aspx/GenerateExcel";
var data = {list: list};
url += '?' + decodeURIComponent($.param(data));

// if url is an excel file, the browser will handle it (should show a download dialog)
window.location = url; 
```

# php - 如何使用加密按钮将价格变量传递给 PayPal

> ID：12601182
> 
> 赞同：0
> 
> 时间：2012-09-26T11:54:56.540
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox

表单包含加密的 Paypal 按钮。我想将值/价格变量传递给 paypal。我不知道该怎么做。

```
 <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
       <input type="hidden" name="cmd" value="_s-xclick">
      <input type="hidden" name="hosted_button_id" value="LMFWRYRBURU2J">

       <input  type="hidden"><h3>Amount of messages </h3> <br /> </div>
    <input class="paypal_input" type="" name="message" id="message" onkeyup="doMath()" maxlength="60"> <br /> 

      </p>
      <div  class="paypal_list2">   
          <p>
     <input type="hidden"><h3>Total amount</h3><br /> </div>
     <input id="total" class="paypal_input_1" type="text" value="" name="amount" readonly>

      <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
     <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
       </form> 
```

我想通过加密按钮将此可变金额传递给贝宝

我试过这样

```
 <input type='hidden' name='amount' value='<?php echo $_POST['total'];?>'> 
```

它不占金额。贝宝中的 item_price 空白。任何人都可以帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:19:45.377

1.  您可以在网站之间传递的唯一内容是字符串值。
2.  另一个网站必须为您提供他们将接受的值的名称。
3.  但这会将值传递给 Paypal。
    1.  添加所需的每个隐藏变量如下
        <input type= `hidden`id= `OrderID`value= `12345`>
    2.  将值提交到外部站点的
        按钮 < input type="button" onclick="javascript: submitToPayPal('http://www.paypal.com/cgi-bin/webscr');" value="提交到贝宝" >
    3.  将必要的 JavaScript 添加到页面

```

    函数 submitToPayPal(formAction){
        var formElementsArray = document.getElementsByTagName('FORM');
        if ( formElementsArray != null ) {   
            var formElement = formElementsArray[0];
            document.getElementById('total_amount').value = '';         
            document.getElementById('__VIEWSTATE').name = 'NOVIEWSTATE';
            formElement.action = formAction;
            formElement.submit();
        }
    }

```

如果您擅长 php 脚本，请使用以下内容。

```
    /*可以通过查询$_POST['item_number']变量动态带入物品名称和数量*/
    $querystring .= "item_name=".urlencode($item_name)."&";
    $querystring .= "amount=".urlencode($item_amount)."&";

```
/*loop for posted values and append to querystring*/
foreach($_POST as $key => $value){
$value = urlencode(stripslashes($value));
$querystring .= "$key=$value&";
}

/* Append paypal return addresses*/
$querystring .= "return=".urlencode(stripslashes($return_url))."&";
$querystring .= "cancel_return=".urlencode(stripslashes($cancel_url))."&";
$querystring .= "notify_url=".urlencode($notify_url);

/* Append querystring with custom field
//$querystring .= "&custom=".USERID; */

/* Redirect to paypal IPN*/
header("location:https://www.sandbox.paypal.com/cgi-bin/webscr".$querystring);
exit(); 
```

.
```

# ruby-on-rails-3 - 如何更改lazyhighcharts中列的颜色？

> ID：12601184
> 
> 赞同：0
> 
> 时间：2012-09-26T11:55:02.643
> 
> 标签：ruby-on-rails-3, lazy-high-charts

我在 rails 3 中使用 LazyHighCharts。我的要求是在一列中显示不同的颜色。当我使用 series = { :type=> 'bar', :name=> [], :data=> @rooms, :color=> 'pink' } 它以粉红色显示整列。假设我在一列中有 5 行，我想以粉红色显示第一行，其余四行以绿色显示。谁能建议我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:38:51.480

i don't know if you have resolved this issue, but this is how i resolved it.

```
#Controller before set data to the series option
data = []
your_array.each do |t|
       data << {:y=>t.value, :color=>"#"+("%06x" % (rand * 0xffffff))}
end

then set data to series option
f.series({:name=>"Subcurso", :data=>data} ) 
```

# ruby-on-rails-3 - 资产错误：由于引擎 gem 中的模型导致预编译

> ID：12601189
> 
> 赞同：2
> 
> 时间：2012-09-26T11:55:18.177
> 
> 标签：ruby-on-rails-3, rubygems, asset-pipeline, rails-engines

我的情况如下：

*   我正在运行应用程序 X
*   X 使用宝石“核心”
*   core 用模型 A、B、C、D 扩展了 X 的模型

在开发中，这完美地工作。但是，当我跑步时

```
(bundle exec) rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile 
```

它失败了

```
** Execute environment
rake aborted!
uninitialized constant A 
```

我试图通过放置 Rails.application.eager_load 来解决这个问题！在environments.rb之前`Application.initialize!`，但恐怕只会导致其他错误。

有没有办法在 assets:precompile 之前将引擎中的模型包含在 gem 中？我读到了一些关于要求它们一一而不是 eager_load all 的内容，但是每个系统的 gem 路径都不同。

“核心”中的engine.rb：

```
require 'paperclip'

module Core
  class Engine < ::Rails::Engine

    config.time_zone = 'Amsterdam'
    config.encoding = "utf-8"
    config.autoload_paths += %W(#{config.root}/lib/**)

    config.generators do |g|
      g.test_framework :rspec, :views => false, :fixture => true
      g.fixture_replacement :factory_girl, :dir => 'spec/factories'
    end

    initializer "core.load_app_instance_data" do |app|
      Core.setup do |config|
        config.app_root = app.root
      end
      app.class.configure do 
        #Pull in all the migrations from Commons to the application
        config.paths['db/migrate'] += Core::Engine.paths['db/migrate'].existent
      end
    end

    initializer "core.load_static_assets" do |app|
      app.middleware.use ::ActionDispatch::Static, "#{root}/public"
    end    
  end
end 
```

我更喜欢在核心 gem 中而不是应用程序 X 中进行任何修复。但是，如果不可能，X 很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:56:34.673

您确定在登台环境中加载了“核心”宝石吗？

# ios - Facebook SDK 3.1 - 验证访问令牌时出错

> ID：12601191
> 
> 赞同：37
> 
> 时间：2012-09-26T11:55:31.363
> 
> 标签：ios, facebook, ios6, facebook-ios-sdk, facebook-sdk-3.1

我正在尝试将我的应用程序转换到新的 Facebook SDK 3.1（支持 iOS6 身份验证）。

我让它工作得很好，所以我决定从我在 FB 网站上的授权应用程序列表中删除该应用程序，以测试 iOS 是否会再次请求许可。

现在我第一次调用`[FBRequest requestForMe]`导致此错误：

回复：

```
{
  "error": {
    "message": "Error validating access token: Session does not match current stored session. This may be because the user changed the password since the time the session was created or Facebook has changed the session for security reasons.",
    "type":"OAuthException",
    "code":190,
    "error_subcode":460
  }
} 
```

一些细节：

我正在尝试按如下方式打开会话：

```
 [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {

                                           switch (state) {
                                               case FBSessionStateOpen:
                                                   [self presentPostOptions];
                                                   break;

                                               case FBSessionStateClosed:
                                               case FBSessionStateClosedLoginFailed:
                                                   [FBSession.activeSession closeAndClearTokenInformation];
                                                   break;

                                               default:
                                                   break;
                                           } 
```

然后我在状态下被回调`FBSessionStateOpen`（此时 iOS 还没有显示请求对话框，这是意料之中的吗）？Facebook 记录了这一点：

```
2012-09-26 13:43:43.768 MyApp[2177:907] FBSDKLog: FBSession INVALID transition from FBSessionStateCreated to FBSessionStateClosed
2012-09-26 13:43:43.769 MyApp[2177:907] FBSDKLog: FBSession transition from FBSessionStateCreated to FBSessionStateCreatedOpening 
2012-09-26 13:43:43.837 MyApp[2177:907] FBSDKLog: FBSession transition from FBSessionStateCreatedOpening to FBSessionStateOpen 
```

会话打开后，在 presentPostOptions 中我会这样做：

```
- (void)presentPostOptions
{    
    [[FBRequest requestForMe] startWithCompletionHandler:^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
        if (!error) {
            self.usersName = user.name;
            self.usersID = user.id;

            [self getPages];
        }
        else
        {
            [self didFailWithError:error];
        }
    }];
} 
```

在回调上述完成块之前，我的主状态处理程序块被调用一个`FBSessionStateClosed`状态。与此同时，Facebook SDK 记录了上述错误。

我找不到任何方法来重置系统；我也不是很了解原因。

任何人都可以阐明一下吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-29T16:09:09.997

设备上的 Facebook 帐户与服务器以及应用程序/SDK 的缓存不同步。这可以通过调用 ACAccountStore 方法 renewCredentialsForAccount 来解决，这将更新操作系统对令牌状态的理解。

在 SDK 的下一次更新中，SDK 会在收到服务器响应的令牌失效时自动调用该 API。对于 SDK 的 3.1.0 版本，应用程序将需要显式调用此 API。这是一个代码示例：

```
ACAccountStore *accountStore;
ACAccountType *accountTypeFB;
if ((accountStore = [[ACAccountStore alloc] init]) &&
    (accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook] ) ){

    NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];
    id account;
    if (fbAccounts && [fbAccounts count] > 0 &&
        (account = [fbAccounts objectAtIndex:0])){

        [accountStore renewCredentialsForAccount:account completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
            //we don't actually need to inspect renewResult or error.
            if (error){

            }
        }];
    }
} 
```

调用 API 的地点/时间有多种选择。最简单的地方是在应用程序启动或视图加载时伺机进行调用。这种方法的一个问题是它会导致通常不必要的网络往返。另一种选择是在会话更改通知发生时调用它，指示会话已关闭。此外，许多应用程序在应用程序启动时获取一些基本信息，例如 graph.facebook.com/me，如果是这样——在错误响应的情况下调用此方法可能是要求 iOS 更新其令牌的合理位置地位。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T11:39:13.207

我只是要贡献另一件事来检查导致我浪费了 3 个小时：如果您尝试使用非应用程序开发人员 FB 用户登录，请确保您的 FB 应用程序设置没有“沙盒”选项...也许很明显，但希望可以为其他人节省几个小时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T17:34:48.920

[尝试按照此处](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/#protip3)的建议在 Facebook APP的[设置面板](https://developers.facebook.com/apps)中添加您的 iOS App Bundle ID（如果尚未添加）。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-08T05:20:27.490

```
[FBSession openActiveSessionWithReadPermissions:nil
 allowLoginUI:YES
 completionHandler:^(FBSession *session, FBSessionState  state, NSError *error) 
    {

       switch (state) {
           case FBSessionStateOpen:
               [self presentPostOptions];
               break;

           case FBSessionStateClosed:
           case FBSessionStateClosedLoginFailed:
               [FBSession.activeSession closeAndClearTokenInformation];
               break;

           default:
               break;
       }

      }]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T04:59:51.903

我很确定这是一个 Facebook iOS SDK 错误（即使在 3.1.1 上），我提交[了这个错误报告](https://developers.facebook.com/bugs/512251508787686)。

在尝试使用他们的示例应用程序 Scrumptious 重现此错误时，我发现如果您使用`openActiveSessionWithReadPermissions`. 但是，如果您通过 请求发布权限`openActiveSessionWithPublishPermissions`，它将被困在`com.facebook.sdk.error 5`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-11T16:15:09.397

在 facebook SDK 3.7.1 我仍然有这个问题。基本上我决定在发生这种情况时从 facebook 缓存中清除令牌。像这样：

```
if(state == FBSessionStateClosed ) {
     [FBSession.activeSession closeAndClearTokenInformation];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-20T11:05:05.653

**Facebook 验证访问令牌时出错的**简单 Swift 2+ 解决方案****

 **```
// Step 1: Logout 
FBSDKLoginManager().logOut()

// Step 2: Login
FBSDKLoginManager().logInWithReadPermissions(["public_profile", "email"], fromViewController: self, handler: { result, error -> Void in 

// ...

} 
```

如果出现此错误，您必须创建新的**Facebook Session**，因此您必须重新登录。**

# symfony - symfony 2 中生成的 formType 的表单小部件中是否提供模式定义？

> ID：12601195
> 
> 赞同：0
> 
> 时间：2012-09-26T11:55:41.330
> 
> 标签：symfony, symfony-forms

当表单类型对应于模型时，我在表单视图中看到，它为非空表字段类型的标签呈现“必需”类。我想知道它是否以任何方式使用模式定义？它是如何通过的？

就像在 form_label.html.php 中一样，我们有

```
<?php if ($required) { $label_attr['class'] = trim((isset($label_attr['class']) ? $label_attr['class'] : '').' required'); } ?> 
```

$required 在这里如何可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:03:45.337

据我所知（Symfony 2.0.x），必需的 FormType 选项仅在现场启用 HTML5 客户端验证。它与服务器端验证无关，与数据库模式无关。

`required`选项`true`默认设置为。因此，您必须明确将其设置`false`为禁用 HTML5 验证和 HTML 输入所需的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:54:12.807

请参阅Symfony 书的 Forms 章节的[*Field Type Options Guessing部分。*](http://symfony.com/doc/current/book/forms.html#field-type-options-guessing)

> `required`：`required`可以根据验证规则（即是字段`NotBlank`或`NotNull`）或Doctrine元数据（即是字段`nullable`）来猜测选项。这非常有用，因为您的客户端验证将自动匹配您的验证规则。

# php - php中的计数器重置

> ID：12601197
> 
> 赞同：0
> 
> 时间：2012-09-26T11:55:51.190
> 
> 标签：php, loops, counter, reset

我有一个脚本可以计算您访问页面的次数，我想做的是让计数器在它达到 5 时重置。即（从 1-5 计数）并将重置回 1。有什么想法吗？

```
$handle = fopen('counter.txt', 'r+');

    flock($handle, LOCK_EX);

        $total = (int) fread($handle, max(1, filesize('counter.txt')));

        $newTotal = ++$total;

        rewind($handle);

        fwrite($handle, $newTotal);

fclose($handle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:59:10.030

很简单，

您可以使用

```
 $handle = fopen('counter.txt', 'r+');

    flock($handle, LOCK_EX);

        $total = (int) fread($handle, max(1, filesize('counter.txt')));
        if($total==5){
            fwrite($handle, 1);
        }
        else{
        $newTotal = ++$total;

        rewind($handle);

        fwrite($handle, $newTotal);
        }
fclose($f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:02:40.587

```
$f = fopen('counter.txt', 'r+');
flock($f, LOCK_EX);
$total = (int) fread($f, max(1, filesize('counter.txt')));

if (isset($_POST['submit'])) {
    rewind($f);
    $total = ($total >= 5)? 1 : $total++; // Increment or reset
    fwrite($f, $total); // Write new value
}

fclose($f); 
```

# sql - 在Oracle中按不同类型的多个列排序？

> ID：12601198
> 
> 赞同：-1
> 
> 时间：2012-09-26T11:55:51.550
> 
> 标签：sql, oracle

我是甲骨文的新手。在 SQLite、PostgreSQL 或 MSSQL 中，我可以执行以下查询：

```
SELECT * FROM users ORDER BY id, email 
```

这是用户的定义：

```
CREATE TABLE "USERS" (
 "ID" NUMBER(38,0) NOT NULL,
 "EMAIL" VARCHAR2(255)
) 
```

Id 是 NUMBER 类型，email 是 VARCHAR 类型。

当我在 Oracle 中运行上述 SELECT 查询时，它会引发错误：

```
ORA-00932: inconsistent datatypes: expected - got CLOB 
```

无论如何在Oracle中可以做到这一点？

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:02:34.383

似乎该`email`字段是 a`CLOB`而不是 a `VARCHAR`。你不能`ORDER BY`一个`CLOB`.

如果您的列是 a`CLOB`那么您可以`CAST()`按以下方式排序字段：

```
select *
from users
order by id, cast(email as varchar2(50))  -- or whatever length you want. 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/89b33/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:59:46.570

仔细检查`email`列的真实类型。它似乎只是 CLOB 不适用于 order by。

显然，不需要存储超过 4000 个字符的电子邮件。

所以 CLOB 应该用 VARCHAR2(255) 代替。

请参阅[有效电子邮件地址的最大长度是多少？](https://stackoverflow.com/questions/386294/maximum-length-of-a-valid-email-address).

ORM 中的 Oracle 类型映射可能存在一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:01:29.867

也可以尝试使用列位置 - （这意味着你不应该使用 * - 无论如何我都会推荐......）

```
select id, email from users order by 1,2 
```

还应该可以通过在 eorder by 子句中应用一些字符串连接函数来按 CLOB 的第一部分进行排序。

# iphone - ios应用程序中的日期选择器

> ID：12601199
> 
> 赞同：1
> 
> 时间：2012-09-26T11:55:52.000
> 
> 标签：iphone, ios, xcode, datepicker, uitextfield

我是 iPhone 开发的新手。我想在`UIDatePicker`选择文本字段时添加一个。有两个日期选择器。

```
- (void)textFieldDidBeginEditing:(UITextField *)aTextField
{

    [aTextField resignFirstResponder];

    pickerViewPopup = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

    UIDatePicker *pickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 44, 0, 0)];
    pickerView.datePickerMode = UIDatePickerModeDate;
    pickerView.hidden = NO;
    pickerView.date = [NSDate date];

    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    pickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [pickerToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
    [barItems addObject:doneBtn];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];
    [barItems addObject:cancelBtn];

    [pickerToolbar setItems:barItems animated:YES];

    [pickerViewPopup addSubview:pickerToolbar];
    [pickerViewPopup addSubview:pickerView];
    [pickerViewPopup showInView:self.view];
    [pickerViewPopup setBounds:CGRectMake(0,0,320, 464)];
} 
```

我使用了这个，但对于两个不同的日期选择器得到了相同的值。我希望如果我按 textfield1 然后 datepicker 打开并将该值保存在 textfield one 和第二个 textfield 相同。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:11:59.113

@Maulik：`- (void)textFieldDidBeginEditing:(UITextField *)aTextField`每次选择文本字段进行编辑时都会调用第一件事。

因此，对于您的选择，即 textfield1 和 textfield2 将调用相同的代码。

您可以做的是点击完成按钮，检查哪个文本字段打开了选择器并将值保存在该文本字段中。

我的意思是在 .h 文件中取一个文本字段 `UITextField *selectedTextField;`

然后在`textFieldDidBeginEditing`方法中将其设置为`selectedTextField = aTextField;` 并点击完成按钮，即`doneButtonPressed`设置所选值`selectedTextField.text`。就是这样..你完成了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T12:26:30.017

我有一个简单的解决方案。

设置委托`<UIPickerViewDelegate,UIPickerViewDataSource>`

在`.h`文件中：

```
UIDatePicker *dtPicker;
UIActionSheet *pickerViewPopup;

-(IBAction)dt_picker:(id)sender; 
```

在`.m`文件中：

```
-(IBAction)dt_picker:(id)sender{

    pickerViewPopup = [[UIActionSheet alloc] init];
    const CGFloat toolbarHeight = 44.0f;
    dtPicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, toolbarHeight, 0, 0)];

    NSDateFormatter *dateFormatter =[[NSDateFormatter alloc] init];
    // if (dateStatus==0) {
        dtPicker.datePickerMode = UIDatePickerModeDate;
        [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
        [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
        dtPicker.minimumDate = [NSDate date];
    /* }else{
        datePicker.datePickerMode = UIDatePickerModeTime;
        [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
        [dateFormatter setDateFormat:@"HH:mm:ss"];

    }*/
    dtPicker.hidden = NO;
    dtPicker.date = [NSDate date];

    [dtPicker addTarget:self action:@selector(LabelChange:) forControlEvents:UIControlEventValueChanged];
    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, toolbarHeight)];
    pickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [pickerToolbar sizeToFit];
    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *btnCancel = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(btncancelPressed:)];
    [barItems addObject:btnCancel];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
    [barItems addObject:doneBtn];

    lbl1.text=[NSString stringWithFormat:@"%@",dtPicker.date];

    [pickerToolbar setItems:barItems animated:YES];

    [pickerViewPopup addSubview:pickerToolbar];
    [pickerViewPopup addSubview:dtPicker];
    [pickerViewPopup showInView:self.view.superview];
    [pickerViewPopup setBounds:CGRectMake(0,0,self.view.frame.size.width, 464)];

}

-(void)LabelChange:(id)sender{

    NSDateFormatter* formatter1 = [[NSDateFormatter alloc] init];
    [formatter1 setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
    [formatter1 setDateFormat:@"yyyy-MM-dd"];

    NSString  *dateString= [formatter1 stringFromDate:dtPicker.date];
    lbl1.text=dateString;
}

-(void)btncancelPressed:(id)sender{
    [pickerViewPopup dismissWithClickedButtonIndex:1 animated:YES];
}

-(void)doneButtonPressed:(id)sender{
    [pickerViewPopup dismissWithClickedButtonIndex:1 animated:YES];
} 
```

# ruby - 在哈希中查找任何大于特定值的值

> ID：12601203
> 
> 赞同：4
> 
> 时间：2012-09-26T11:56:11.473
> 
> 标签：ruby

假设我有这个哈希

```
{ 1 => 4 , 2 => 3 , 4 => 1} 
```

现在我想创建一个循环，在那里我可以找到任何大于 3 的值。

我知道`hash.values?3`我可以找到这些对的值为 3。但是我怎样才能找到所有大于等于 3 的值。

罗洛夫

编辑 1：我尝试让这个伪代码在 ruby​​ 中工作。

```
while there are sets of 3 ones:
  remove the set from the hash (h[1] -= 3)
  sum 1000 to the score
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T11:59:29.630

使用`#select`方法：

```
{a: 1, b: 2, c: 3}.select{|k,v| v > 1} 
```

# asp.net-mvc - 当前上下文中不存在 MVC Razor 助手

> ID：12601204
> 
> 赞同：3
> 
> 时间：2012-09-26T11:56:14.860
> 
> 标签：asp.net-mvc, razor, visual-studio-2012

我在我的 MVC4 Web 应用程序中创建了一个自定义剃须刀助手，我需要在我的所有视图中都可以使用它。

在我所有的视图页面中，我似乎无法使用我的自定义助手。VS2012 不只是看到它。

请问我该如何解决？

**编辑**：它实际上在我运行页面时起作用，只是 VS 没有看到它。

这是我的助手，它位于我的 AppCode 文件夹中的 Helpers.cshtml 中。

```
@helper TextBox(string title, string id, string placeholder, bool required){    
<ul>
    <li>
        <label for="@id">@title</label>
    </li>
    <li>
        <input type="text" name="this" class="@if (@required) {<text>required</text>}" minlength="2" id="@id" placeholder="@placeholder" />
    </li>
</ul>
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-17T14:48:22.403

重新启动 Visual Studio

仅清洁和重建是不够的，但对我有用的步骤是：

1.  清洁溶液
2.  重新启动 Visual Studio (2012)
3.  重建解决方案

在这些步骤之后，Visual Studio Intellisense 再次拾取它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T19:59:06.097

**尝试构建/重建项目**（如果您的助手在`App_Code`文件夹中）。

然后VS会识别助手。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T12:04:36.193

如果它是[razor helper(使用 @helper 语法)](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)，你应该在 \App_Code 中的视图中定义它

> 我们可以通过将 @helper 方法保存在 .cshtml/.vbhtml 文件中来完成此操作，这些文件位于您在项目根目录中创建的 \App_Code 目录中。例如，下面我在 \App_Code 文件夹中创建了一个“ScottGu.cshtml”文件，并在文件中定义了两个单独的辅助方法（每个文件中可以有任意数量的辅助方法）：

如果它是更传统的 html 帮助程序，您应该通过将记录添加到定义的`namespaces`元素来引用它。如果您只想在单个视图中使用它，您可以在视图顶部添加指令。`<system.web.webPages.razor>``~\Views\Web.Config``@using`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T12:48:15.717

在任何视图中，您都可以像这样调用您的自定义 Razor 助手：

```
@Helpers.TextBox("some title", "someid", "default value", false) 
```

这假设您的助手在`~/App_Code/Helpers.cshtml`.

# winforms - 如何使用填充数据弹出带有网格视图的表单，在c#.net中按下按钮时出现

> ID：12601210
> 
> 赞同：1
> 
> 时间：2012-09-26T11:56:24.903
> 
> 标签：winforms, sql-server-2008, c#-4.0, datagridview

我想我需要在此按钮单击事件中编写代码以获得所需的输出，但无法写下步骤。你们的任何帮助都会有所帮助，并使我学习。谢谢你。

```
 private void btnViewAllEntries_Click(object sender, EventArgs e)

    {
        SqlConnection con = new SqlConnection(Helper.ConnectionString);
        SqlCommand cmd = new SqlCommand("Select * from DirDetails");
        con.Open();

        con.Close();
        MessageBox.Show(DetailsView.cs);//DetailsView.cs is winform with gridview
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:13:58.640

首先，`MessageBox`只显示messages，而不是`Form`s。要显示表单，您应该实例化它并使用`Show`or`ShowDialog`方法。

```
DetailsView frm=new DetailsView();
frm.ShowDialog(); 
```

二、在查询中运行`DetailsView.cs`

```
private void Form1_Load(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(Helper.ConnectionString);
        SqlDataAdapter da = new SqlDataAdapter("Select * from DirDetails", con);
        DataTable dt = new DataTable();
        con.Open();
        da.Fill(dt);
        con.Close();
        datagridview1.DataSource = dt;
    } 
```

# apache - 带有 xlsm 文件的 Apache POI Java 堆空间

> ID：12601214
> 
> 赞同：1
> 
> 时间：2012-09-26T11:56:49.647
> 
> 标签：apache, apache-poi, heap-memory, xlsm

我正在尝试执行以下代码将 xlsm 文件转换为 csv ：

```
//Workbook wbk = new HSSFWorkbook(new FileInputStream(new File("myFile.xls")));
Workbook wbk = new XSSFWorkbook(new FileInputStream(new File("myFile.xlsm")));

for (int i = 0; i < wbk.getNumberOfNames(); i++) {

    if (wbk.getNameAt(i).getNameName().startsWith("START\\")) {

        // Get SheetName
        sheetName = wbk.getNameAt(i).getSheetName();

        // Get csv Filename
        csvFilename = generateFileName(wbk.getNameAt(i).getNameName(), currentDate);

        // Starting row index for this sheet
        startingRowIndex = getStartingRowIndex(wbk, i);

        // Max column index for this sheet
        maxColumnIndex = getMaxColumnIndex(wbk, wbk.getSheet(sheetName));

        // Convert sheet to csv
        toCSV(csvFilename, startingRowIndex, maxColumnIndex, wbk, sheetName);
    }
} 
```

-Xmx 参数设置为 1024，我使用 xslm 文件。这个文件是 15 个月。

`"java.lang.OutOfMemoryError: Java heap space"`我在第一行收到此错误。

使用 xls 格式 (50 Mo) 的相同文件，效果很好。

我无法更改 Xmx 参数，也无法使用 POI 以外的其他 API。

我在其他消息中读到更好的方法是使用[SAX API](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api)来解决这种内存问题。

但是，在我的文件中，不需要在 CSV 中提取所有工作表和所有行。这就是为什么我使用“wbk.getNumberOfNames()”来获取所有定义的名称（在名称管理器中）并知道要转换的工作表。

你知道我如何使用 SAX API 访问这些属性吗？

谢谢。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:25:18.880

以下 Apache POI 代码示例使用 SAX 解析器将 XLSX 文件转换为 CSV。 [http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/eventusermodel/XLSX2CSV.java](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/eventusermodel/XLSX2CSV.java)

# javascript - Jquery 变异插件

> ID：12601215
> 
> 赞同：1
> 
> 时间：2012-09-26T11:56:52.233
> 
> 标签：javascript, jquery, html, jquery-plugins

我遇到过这个插件，但我是新手，我想知道是否有人可以给我一个关于如何在我的网站上使用它的例子。

[http://www.jqui.net/jquery-projects/jquery-mutate-official/](http://www.jqui.net/jquery-projects/jquery-mutate-official/)

```
<div id="content">
   <h1>Favourite Teams</h1>
   <ul>
     <li>Arsenal</li>
     <li>Man U</li>
     <li>Liverpool</li>
   </ul>
</div> 
```

我想检查内容 div 高度何时更改以根据可用高度显示更多或更少的团队。

**更新代码**

这是我设法想出的。我不知道为什么它不起作用。

```
$('content ul').mutate('height',function (element,info){  
    var h= $(this).height();
    var calculate = h/$(this).find('li').eq(0).height();
    var i = 0;
    $(this).find('li').hide().each(function (){
        if(i<calculate)$(this).show();
        i++;
    })
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:22:45.523

问题在于你是选择器。如果你想找到`DIV`比`ID = content`你应该使用的`$("#content")`

```
$('#content ul').mutate('height',function (element,info){  
    var h= $(this).height();
    var calculate = h/$(this).find('li').eq(0).height();
    var i = 0;
    $(this).find('li').hide().each(function (){
        if(i<calculate)$(this).show();
        i++;
    })
}); 
```

# android - 链接点击打开 Android 浏览器并退出应用程序

> ID：12601217
> 
> 赞同：1
> 
> 时间：2012-09-26T11:56:54.603
> 
> 标签：android, cordova, sencha-touch-2

**我使用Sencha Touch**和**Phonegap** (cordova-2.0.0)为 Android 开发了一个应用程序。

我有一个包含一些 HTML 的 Ext.Panel，例如：

```
<body>
     <a href="MyPage.html">MyPage</a>
</body> 
```

**我的问题**：当我在设备上运行应用程序并点击链接时，Android 浏览器会打开 URL 并退出应用程序。

**我的目标**：当我在设备上运行应用程序并点击链接时，应用程序应该显示点击的链接，例如：

`navigator.notification.alert(MyPage.html);`

**我的 Phonegap 代码**（在 HTMLPanel 中显示 uniqueid.html）：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onRequestFileSystemSuccess, null);

function onRequestFileSystemSuccess(fileSystem) {
    fileSystem.root.getDirectory(Ext.ComponentQuery.query('#bibliothekDataView')[0].getSelection()[0].get('directory'), null, SelectedItemSuccess, SelectedItemFail);
}

//shows the uniqueid.html in the HTMLPanel
function SelectedItemSuccess(dir) {
    dir.getFile(record.get('id') + '.html', null, gotFileEntry, fail);
}

function SelectedItemFail() {
    navigator.notification.alert("Failed to read file contents: " + error.code);
}

function gotFileEntry(file) {
    file.file(gotFile, fail);
}

function gotFile(file) {
    readAsText(file);
}

function readAsText(file) {
    var reader = new FileReader();
    reader.onload = function (evt) {
        Ext.ComponentQuery.query('#mainHTMLPanel')[0].setHtml(evt.target.result);
    };

    reader.onerror = function () {
        navigator.notification.alert("Failed to read file!");
    };
    reader.readAsText(file);
}

function fail(error) {
    navigator.notification.alert("Failed to read file contents: " + error.code);
} 
```

**我的 HTMLPanel**（视图）：

```
Ext.define('myApp.view.HTMLPanel', {
    extend: 'Ext.Panel',
    xtype: 'mainhtmlpanel',

    config: {
        id: 'mainHTMLPanel',
        scrollable: 'vertical',
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:35:17.130

您是否可以控制 Ext.Panel 中显示的 HTML 内容？如果是，则更`<a href="MyPage.html">MyPage</a>`改为`<a href="javascript:alert('MyPage.html');">MyPage</a>`.

# android - 在不同的任务中启动活动

> ID：12601242
> 
> 赞同：3
> 
> 时间：2012-09-26T11:58:17.617
> 
> 标签：android, android-intent

每次我使用 flag_new_task 启动活动时，我都想在不同的任务中启动一个活动（比如 abc）。

每次启动活动时，如何为活动设置不同的亲和力。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:55:14.170

如果您同时设置了标志`Intent.FLAG_ACTIVITY_MULTIPLE_TASK`并`Intent.FLAG_ACTIVITY_NEW_TASK`在启动活动时设置，那么每次您执行此操作时，Android 都会创建一个新任务。

**大警告**

但是，如果您使用相同的活动创建许多这样的任务，则用户无法通过长按 HOME 按钮返回到特定任务。您需要确保在执行此操作时不会混淆用户。

看

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_MULTIPLE_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_MULTIPLE_TASK)

# html - 中断的列表项在项目符号下重新开始

> ID：12601244
> 
> 赞同：0
> 
> 时间：2012-09-26T11:58:19.473
> 
> 标签：html, css

像这样：

![在此处输入图像描述](../Images/4ef70c30508305b727fed444f0bc51cb.png)

我怎样才能防止这种情况？

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:00:10.567

一种简单的方法是确保您的`<li>`元素在无序列表`<ul>`块内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:02:21.787

看起来您已将您的设置`list-style-position`为“内部”而不是使用默认的“外部”

# c# - c# 将电子邮件编码从 utf-8 更改为 iso-0-8859-1

> ID：12601247
> 
> 赞同：1
> 
> 时间：2012-09-26T11:58:30.080
> 
> 标签：c#, email, encoding, character-encoding

我使用`System.Net.Mail`. 到目前为止，我已将邮件编码设置为 utf-8，但现在我必须使用 ISO-8859-1 编码发送。我了解，如何更改编码，我可以安全地更改编码吗？改变这一点我会面临什么问题？

```
var email = new MailMessage(from, to)
{
    Subject = formManager.ReplaceValuesInString(alert.EmailSubject, replaceValues),
    IsBodyHtml = (alert.EmailMode == 2),
    BodyEncoding = Encoding.UTF8
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:00:56.653

我希望你面临的主要问题是，虽然 UTF-8 涵盖了整个 Unicode，但 ISO-8859-1 没有——它只有 U+0000 到 U+00FF（甚至没有，实际上——有一个ISO-8859-1 中 U+0080 和 U+009F 之间的“洞”）。因此，如果您尝试发送包含非 ISO-8859-1 字符的文本，该文本将无法通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:25:00.950

***这取决于谁在写电子邮件。***

如果电子邮件都是系统生成的（由您），只需确保电子邮件的任何部分（如果从 dbase、Web 服务中提取某些内容......）都不包含不一致的字符。但是，如果您将用户输入作为电子邮件的全部/部分进行中继，那就不那么容易了。

**结论：**如果电子邮件是系统生成的，只要您控制内容的生成方式，以任何编码发送它们都是安全的。如果您无法控制，请使用兼容的编码，该编码涵盖可能需要存储的所有可能字符。

**注意：**除非我们谈论的是大量的数据存储，否则不建议使用其他编码而不是 utf-8 来存储用户输入。此外，在 dbase 或文件系统上使用 utf-8 编码浪费的空间可以通过底层系统（fs、dbase）的内置压缩方法来节省并留给它们。

# java - 使用 JSF 2 和 PrimeFaces 的 DynamicReports

> ID：12601253
> 
> 赞同：0
> 
> 时间：2012-09-26T11:58:55.013
> 
> 标签：java, jsf-2

我正在研究需要将 DynamicReport 与 PrimeFaces 集成的项目。
**我的问题：**有什么方法可以在 PrimeFace 面板中显示未在新页面中打开的报告。

如果可能的话，请完整的例子来做到这一点，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T16:08:12.733

这是一个例子：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
try {
        DynamicReports.report()
                .setTemplate(Templates.reportTemplate)
                .columns(stateColumn, statePorc)
                .title(Templates.createTitleComponent2("Tittle"))
                .summary(
                        DynamicReports.cht.pie3DChart()
                        .setTitleFont(boldFont)
                        .seriesColorsByName(seriesColors)
                        .setKey(stateColumn)
                        .series(
                                DynamicReports.cht.serie(itemColumn).setSeries(stateColumn)
                        )
                )
                .pageFooter(Templates.footerComponent)
                .setDataSource(createDataSource4())
                .toPdf(baos);
        InputStream inputStream = new ByteArrayInputStream(baos.toByteArray());
        barStream = new DefaultStreamedContent(inputStream, "application/pdf", "example.pdf");
        setBarStream(barStream);
    } catch (DRException e) {
        e.printStackTrace();
    } 
```

这是视图：

```
<p:dialog resizable="false" closeOnEscape="false" draggable="false" appendTo="@(body)" modal="true" id="pdfViewer" widgetVar="pdfModal" width="1220px" height="730px" style="z-index: 999;">
                <p:media cache="false" value="#{yourBean.barStream}" width="100%" height="720px" player="pdf"/>
            </p:dialog> 
```

# iphone - 如何为 Uinavigation tableview 创建 plist

> ID：12601256
> 
> 赞同：0
> 
> 时间：2012-09-26T11:58:57.900
> 
> 标签：iphone, plist

我有类似 UITableView 中的任务，在根视图中，如果选择了它应该导航到下一个视图的国家/地区列表，则显示该国家/地区的状态列表，如果我选择状态，它应该导航并显示城市，如果我选择城市需要显示一个受欢迎的区域，然后显示该区域的医院列表，我如何为此创建 plist。那么我将如何从该 plist 中获得价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:11:19.200

为此，您可以按如下方式创建 PList：

为每个国家添加独立的行。每行设置值类型为数组。并且值添加多行并放置状态，并且值再次将数据类型放置为数组。并将各自的城市放入其中。

那时它会为你工作。

有更多方法可以做到这一点，但在这种情况下，您将在一个字典中获取所有数据，并且您可以使用它轻松维护您的表。

# coronasdk - corona sdk 是否支持亚马逊的revmob 广告？

> ID：12601269
> 
> 赞同：0
> 
> 时间：2012-09-26T11:59:39.393
> 
> 标签：coronasdk, revmob

我在适用于 android 和 ios 的电晕 sdk 中有集成的 revmob 广告。但是没有信息表明电晕是否支持亚马逊/kindle 的 revmob？所以请尽快通知我有关亚马逊电晕中的 revmob 广告的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:33:41.700

是的，corona SDK 应该支持亚马逊商店。您只需要在您的面板上为 Amazon App 创建一个 App ID。

# visual-c++ - 在 MFC 中删除菜单

> ID：12601270
> 
> 赞同：7
> 
> 时间：2012-09-26T11:59:40.397
> 
> 标签：visual-c++, mfc

在 MFC 中如何删除 POPUP 类型的菜单项。RemoveMenu() 获取 ID 或位置。因为弹出菜单没有 ID，所以左边的选项是使用位置。

但我不知道如何以及在何处调用 RemoveMenu()。

```
文件编辑测试
            测试子菜单_1
            测试子菜单_2
            Test_submenu_3 > submenu_3_item_1
            测试子菜单_4
            测试子菜单_5

```

我想删除 Test_submenu_3？我不知道如何为 Test 找到 CMenu 对象，以便我可以通过为 submenu_3_item_1 传递位置“2”来调用 RemoveMenu()。

任何这样做的建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T04:09:22.460

您不能使用 LoadMenu，因为此功能就是这样做的。

修改加载的菜单后，当用于加载它的菜单对象超出范围时，它会被杀死。您必须修改当前使用的菜单。

您的菜单是主菜单的弹出部分，排在第二位。它包含 5 个项目，第二个是另一个弹出窗口。据我了解，您要删除此项目并弹出此项目。要使其正常工作，您必须向主窗口询问当前菜单：

```
CMenu* pMenu = GetMenu(); // get the main menu
CMenu* pPopupMenu = pMenu->GetSubMenu(2);//(Test menu with item....)
pPopupMenu->RemoveMenu(2, MF_BYPOSITION); 
```

当然，这段代码来自主框架。如果您想在其他地方使用它，则必须使用指向主框架的指针来访问所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:13:03.757

试试下面的。你首先得到 Test 子菜单（索引 2），然后一旦你告诉它按位置删除它的 Test_submenu_3 子菜单（也是 2）。

```
CMenu topMenu;
topMenu.LoadMenu(IDR_YOUR_MENU);
CMenu& testSubMenu = *topMenu.GetSubMenu(2);
testSubMenu.RemoveMenu(2,MF_BYPOSITION); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:34:49.893

“测试”是顶层菜单上的第三个菜单项（按位置）。它只是水平渲染而不是垂直渲染。假设您有顶级菜单的句柄，使用与获取“测试”菜单相同的代码来获取子菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-13T15:00:56.090

您可以使用下面的代码通过比较名称来删除子菜单

```
bool RemoveSubmenu(CMenu * pMenu) {
 for (int pos = 0; pos < pMenu->GetMenuItemCount(); pos++) {

      wchar_t *name = new wchar_t[mf.cch + 1];
      MENUITEMINFO mf;

      ZeroMemory(&mf, sizeof(mf)); 
      mf.cbSize = sizeof(mf);
      mf.fMask = MIIM_SUBMENU | MIIM_FTYPE | MIIM_STRING;
      mf.fType = MIIM_STRING;
      mf.dwTypeData = NULL;

      if (!GetMenuItemInfo(pMenu->m_hMenu, pos, TRUE, &mf))
        break;

      if (mf.hSubMenu != NULL){

        mf.fMask = MIIM_TYPE;
        mf.fType = MFT_STRING;
        ++mf.cch;

        mf.dwTypeData = (LPSTR)name;

        if (!GetMenuItemInfo(pMenu->m_hMenu, pos, TRUE, &mf)){
         bRet = false;
         break;
        }

        //
        // compare sub menu name (i.e mf.dwTypeData) here, do the required
        // modifications
        //

        pMenu->RemoveMenu(pos, MF_BYPOSITION);
        bRet = true;

        break;
      }
    }
} 
```

# arrays - 返回 Cocoa 中数组中最常见的值

> ID：12601271
> 
> 赞同：1
> 
> 时间：2012-09-26T11:59:40.470
> 
> 标签：arrays, cocoa-touch, collections, counter

Python 有一个集合库。在我的 Web 应用程序中，我用来`collections.Counter(aList).most_common([n])`返回.`n``aList`

不错，简洁，相当快。

现在我正在开发一个 iOS 应用程序。Objective-C 或 Cocoa 框架中是否有任何东西可以为字符串数组提供相同的功能？

假设`aList`是一个`NSArrary`。`NSStrings`

```
NSMutableDictionary *aCounter = [NSMutableDictionary dictionaryWithCapacity:[aList count]];
for aString in aList {
    NSUInteger keyCount = [aCounter valueForKey:aString];
    if keyCount == nil {
        [aCounter setValue:1 forKey:aString];
    }
    else {
        [aCounter setValue:(keyCount+1) forKey:aString];
    } 
```

有什么建议可以压缩它或提高它的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:00:27.473

在我的手机上，但这应该能让你成功：

```
NSArray *input = ...
NSCountedSet *set = [[NSCountedSet alloc] initWithArray:input];
NSMutableDictionary *output = [[NSMutableDictionary alloc] init];
for (id elem in set) [output setObject:[set countForObject:elem] forValue:elem]; 
```

如果这还不够快，我会考虑在插入时进行优化。

# ios - 无法从 Facebook apprequest 检索数据

> ID：12601274
> 
> 赞同：1
> 
> 时间：2012-09-26T11:59:47.350
> 
> 标签：ios, xcode, facebook

我正在使用新的 facebook sdk 3.0 发送应用程序请求和一些数据。我可以成功发送请求。在 FB 应用程序中，我可以看到请求通知，但是当我单击请求 FB 应用程序时，我会将我重定向到我的应用程序，但我没有得到任何数据。

在

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

功能我打印它说的网址 -

> “{类型= 15，串= fb170873116339908：//授权＃expires_in = 0＆的access_token = BAACbaH9mrsQBAP2nmjqTdOzQPezetH2Y5sZAMXjXRPZB3nSSKBRD8lgdOY4OoU8mNl4Jeh3KVZCApYxESBfgQ7bRHsZCYtZAV9vDOyx5yDTCttWMoGKZAQ5eiErRTCyU4ZD＆target_url = HTTP％3A％2F％2Fapps％2Efacebook％2Ecom％2Fapps％2Fapplication％2Ephp％3Fid％{FB APP ID}，编码= 134217984，基数 = (null)}"

我还搜索了答案，发现移动应用程序无法与 appreques 一起发送数据。这是真的？如果没有，有人可以帮助我提供教程或示例。

还有人可以确认[教程是否有效吗？](http://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/#protip1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:19:05.977

您的 FB 应用程序为您提供画布应用程序的 url。可能是您在 FB 应用程序设置中输入了错误的 Url 架构后缀。您将在本机 IOS 应用程序选项卡下找到“Url 架构后缀”。

我也遇到了同样的问题，我删除了所有 Url 架构后缀。希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:38:00.497

据我所知，`data`当用户接受请求时不会发送该字段，您需要对 /REQUEST_ID 进行 API 调用以检索请求的详细信息 -`data`您提供的值应该出现在响应中，然后您可以正常删除请求

如果您也没有请求 ID，则调用`/me/apprequests`将向您显示用户尚未为您的应用接受的所有请求

# php - 我只是看不到语法错误

> ID：12601277
> 
> 赞同：-2
> 
> 时间：2012-09-26T12:00:02.910
> 
> 标签：php

我的页面当前生成此错误；“意外的 T_ENCAPSED_AND_WHITESPACE，期待 T_STRING 或 T_VARIABLE 或 T_NUM_STRING”在第 84 行。

它所指的代码行是这样的：

```
if (empty($ref)) {
$incref = "null";
} else {
$incref = "$_GET['ref'];
} 
```

我真的不明白有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:00:59.833

您添加了太多引号：

```
$incref = $_GET['ref']; 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:01:54.733

### 删除`"`之前`$`：

```
$incref = "$_GET['ref']; 
```

### 正确的：

```
$incref = $_GET['ref']; 
```

# java - 两个while循环为一个

> ID：12601278
> 
> 赞同：0
> 
> 时间：2012-09-26T12:00:03.810
> 
> 标签：java

我编写了这段代码，提示用户输入他们的出生月份和出生年份。有一些错误检查：他们的月份必须是一个整数，并且在 1-12 的范围内。一年也一样。就目前而言，我有两个 while 循环，我想不出一种方法来组合它们以在出现问题时仍然得到错误消息。如果它只是要说“错误输入：重新输入”，我可以想到它，但它需要说明输入有什么问题。它从月份开始，那个月份必须是好的，然后才能继续询问年份。如果年份错误，它会要求重新输入年份——而不是一直回到月份。

如果有人有任何想法，我将不胜感激。用于检查它是否为整数的类是我必须使用的类。

```
while(!monthDone) {
           System.out.print("Enter Month of Birth: ");
           monthInput=scan.next();

           if(!(Type.isInteger(monthInput))) {
                  System.out.println("You need to enter an integer for month");
                  monthDone=false;
           } else {
                         MOB = Integer.valueOf(monthInput);

                         if (MOB<1 || MOB>12) {
                               System.out.println("Your month is out of range");
                               monthDone=false;
                         } else {
                               monthDone=true;
                         }

                         while(!yearDone) {
                                     System.out.print("Enter Year of Birth: ");
                                     yearInput=scan.next();
                                      if(!(Type.isInteger(yearInput))) {
                                             System.out.println("You need to enter an integer for year");
                                      }
                                      else {
                                             YOB = Integer.valueOf(yearInput);
                                             if (YOB<1912 || YOB>2012)  {
                                                    System.out.println("Your year is out of range");
                                                    yearDone=false;
                                                    }
                                                    else
                                                    yearDone=true;
                                             }
                                      }
                               }
                         }
         } // else closed
 } // Outer while close 
```

我只是发布while循环。当两者都出现时`monthDone && yearDone == true`，我会继续打印它们的年龄等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:03:55.630

你可以这样简单地：

```
while (!monthDone) {
...
}

while (!yearDone) {
...
} 
```

因此，在正确完成月份输入之前，您不会进入年份输入。您会看到您可以轻松地将其扩展到每月的某天等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:13:22.337

这就是我可以在没有太多嵌套的情况下布置它的方式。

```
Scanner scanner = new Scanner(System.in);
int month, year;
for (; ; scanner.nextLine()) {
    System.out.println("What is your month and year of birth as [1-12] [1900-2012]");
    if (!scanner.hasNextInt()) {
        System.out.println("Your month is not a number");
        continue;
    }
    month = scanner.nextInt();
    if (month < 1 || month > 12) {
        System.out.println("Your month is out of range");
        continue;
    }
    if (!scanner.hasNextInt()) {
        System.out.println("Your year is not a number");
        continue;
    }
    year = scanner.nextInt();
    if (year < 1900 || year > 2012) {
        System.out.println("Your year is out of range");
        continue;
    }
    break;
} 
```

# php - Facebook API - 需要很长时间才能在朋友墙上发帖

> ID：12601280
> 
> 赞同：0
> 
> 时间：2012-09-26T12:00:18.137
> 
> 标签：php, facebook, facebook-graph-api

我曾尝试使用 facebook api 发布所有朋友的评分。但是需要很长时间才能响应并使我的网页挂起。这是我的代码。

我正在通过 Facebook 连接获取用户信息。连接后，我在会话中设置用户 ID，并允许用户在我的页面上对产品进行评分。提交评级后，我将发布用户评级值，例如。4.5 星给用户的 Facebook 墙和朋友页面。但该页面需要很长时间才能回复。有没有办法解决这个问题。我期待这样的事情，发帖过程应该在后端发生，而不需要用户通知，并且页面应该非常快速地响应他。

```
if($user)
   {
      $accessToken = $facebook->getAccessToken();
      $ret_obj= $facebook->api('/me/feed', 'post', array(
         'access_token' =>$accessToken,
         'message' => $message,
         'link' => $link,
         'name' => strip_tags($pagetitle),
         'picture' => $picture,
         'caption' => $caption,
         'description' => $description,
     ));
      $mypostid = $ret_obj['id'];       
      $friends = $facebook->api('/me/friends'); 
      foreach($friends['data'] as $friend) {

    $frendid = "/".$friend['id']."/feed";         
    $frend_return = $facebook->api($frendid, 'post', array(
         'access_token' =>$accessToken,
         'message' => $message,
         'link' => $link,
         'name' => strip_tags($pagetitle),
         'picture' => $picture,
         'caption' => $caption,
         'description' => $description,
     )); 

      }

   }
$insert = mysql_query("INSERT INTO `rating`
         (
            `id`,
            `user_id`,
            `username`,
            `useremail`,
            `rateformoney`,
            `ratefordesign`,
            `rateforperform`,
            `rateforfeatures`,
            `rateforquality`,
            `avgrating`,
            `ratingcomment`,                
            `recommended`,
            `category`,
            `product_id`,
            `created_date`
         )
      VALUES
         (
            NULL,
            '$usrid',
            '$name',
            '$email',
            '$rat_price', '$rat_design', '$rat_perf', '$rat_feat', '$rat_qlt', '$avgrating',
            '$rat_comment',  '$recommended', '$category', '$productid', CURRENT_TIMESTAMP
         )
          ");

header($redirect); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:46:58.207

> 我曾尝试使用 facebook api 发布所有朋友的评分。

用户的所有朋友是否都*希望*将其发布到他们的墙上？

这种行为很容易导致他们中的一些人将您的帖子标记为垃圾邮件……（只是一个警告，这取决于您的应用程序的功能。）

> 但是需要很长时间才能响应

那是因为您正在进行一次 API 调用，因此您的循环中的每个朋友也需要一个 HTTP 请求。

尝试将 API 调用捆绑到一个（或多个）[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)中以加快处理速度——这会限制实际发生的 HTTP 请求的数量，因此应该会明显更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:36:49.227

我在本教程[http://25labs.com/tutorial-post-to-multiple-facebook-wall-or-timeline-in-one-go-using-graph-api-batch-request/的帮助下解决了这个问题](http://25labs.com/tutorial-post-to-multiple-facebook-wall-or-timeline-in-one-go-using-graph-api-batch-request/)

# c# - 单击Grid每一行中的LinkBut ton时如何触发函数

> ID：12601282
> 
> 赞同：0
> 
> 时间：2012-09-26T12:00:19.613
> 
> 标签：c#, asp.net, gridview

我有`GridView`一个额外的列**Details**，并且在 的每一行中`GridView`，我都有一个`LinkButton`称为 Details 的列。因此，当我单击此按钮时，我希望触发一个事件。

asp.net 代码为：

```
<asp:TemplateField HeaderText="Details">
<ItemTemplate>
<asp:LinkButton ID="Details" runat="server" Text="Details"></asp:LinkButton>
</ItemTemplate>
</asp:TemplateField> 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:03:54.573

然后使用[`LinkButton.Click-event`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.click.aspx)：

```
<asp:LinkButton ID="Details" OnClick="LinkClicked" runat="server" Text="Details"> 
```

在代码隐藏中：

```
protected void LinkClicked(Object sender, EventArgs e) 
{
    LinkButton link = (LinkButton)sender;
    GridViewRow row = (GridViewRow)link.NamingContainer; 
    // assuming there's a label with ID=Label1 in another TemplateField:
    Label label1 = (Label)row.FindControl("Label1");
    label1.Text="You clicked the link button";
} 
```

如果您需要用户单击链接`GridViewRow`的`GridView`位置，例如在 other 中查找控件`templateFields`，您可以使用该`NamingContainer`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:04:03.030

处理**GridView.RowCommand 事件**

在 GridView 控件中单击按钮时发生。

```
<asp:LinkButton ID="Details"  commandname="Details" runat="server" Text="Details"></asp:LinkButton>

void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    // If multiple buttons are used in a GridView control, use the
    // CommandName property to determine which button was clicked.
    if(e.CommandName=="Details")
    {
     // Convert the row index stored in the CommandArgument
     // property to an Integer.
     int index = Convert.ToInt32(e.CommandArgument);

    //Your Code

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:17:44.013

您可以使用命令参数来确定单击了哪一行（假设您在一行中有多个按钮（标准按钮/链接按钮）

```
<asp:GridView OnRowCommand="GridViewOnItemCommand" runat="server">
  <asp:TemplateField HeaderText="Details">
    <ItemTemplate>
      <asp:LinkButton ID="btnDetails" CommandName="Details" CommandArgument="YOUR_COMMAND_ARG_HERE" Text="Details" runat="server"/>
      <asp:LinkButton ID="btnDelete" CommandName="Delete" CommandArgument="YOUR_COMMAND_ARG_HERE" Text="Delete" runat="server"/>
    <ItemTemplate>
  </asp:TemplateField>
</asp:GridView> 
```

在文件后面的代码中

```
protected void GridViewOnItemCommand(object sender, GridViewCommandEventArgs e)
{
     //you can determine which button was clicked (detail or delete)
     var command = e.CommandName;

     //you can determine which row was clicked
     var arg = e.CommandArgument;

     if(command == "Details")
          ShowDetails(arg);
     if(command == "Delete")
          Delete(arg);
} 
```

希望这可以帮助

# c# - 如何检查文件大小或尺寸？

> ID：12601284
> 
> 赞同：3
> 
> 时间：2012-09-26T12:00:28.617
> 
> 标签：c#

```
 var dlg = new Microsoft.Win32.OpenFileDialog();
        dlg.Filter = "(*.JPG;*.GIF)|*.JPG;*.GIF";
        dlg.ShowDialog();
        if (string.IsNullOrEmpty(dlg.FileName)) return;
        var fs = new FileStream(dlg.FileName, FileMode.Open, FileAccess.Read);
        var data = new byte[fs.Length];
        fs.Read(data, 0, System.Convert.ToInt32(fs.Length));
        fs.Close(); 
```

我正在使用此代码，但找不到如何查找图像的大小或尺寸？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:10:09.140

作为此问题的一部分回答：[限制图像大小](https://stackoverflow.com/questions/12491597/limit-image-size/12491758#12491758)

```
string filename = // get it from OpenFileDialog
var length = new FileInfo(filename).Length;
Image img = Image.FromFile(filename);
var w = img.Width;
var h = img.Height; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:10:58.177

使用 FileInfo 给定该文件的路径并使用 Length 作为

```
var dlg = new Microsoft.Win32.OpenFileDialog();
dlg.Filter = "(*.JPG;*.GIF)|*.JPG;*.GIF";
dlg.ShowDialog();

if (string.IsNullOrEmpty(dlg.FileName)) 
  return;

FileInfo info = new FileInfo(dlg.FileName);
Console.Write("Length In Bytes:"+info.Length); 
```

# iphone - 我在我的 iOS 应用程序崩溃报告中收到了很多 SIGSEGV 异常，并且在 UINavigationController 中也崩溃了

> ID：12601286
> 
> 赞同：1
> 
> 时间：2012-09-26T12:00:35.387
> 
> 标签：iphone, ios, segmentation-fault

这是我的崩溃报告，与 iOS 版本和设备无关。另外我想知道，SIGSEGV_ACCERR 是否与内存有关。你能帮我解决这个问题吗？我有一堆带有以下日志的崩溃报告

```
Date/Time:       2012-09-25 23:55:33 +0000
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x60000008
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x37734f78 objc_msgSend + 16
1   UIKit                               0x32e0c503 -[UINavigationController _startDeferredTransitionIfNeeded] + 251
2   UIKit                               0x32e568eb _popViewControllerNormal + 191
3   UIKit                               0x32e56719 -[UINavigationController _popViewControllerWithTransition:allowPoppingLast:] + 393
4   UIKit                               0x32e56c79 -[UINavigationController navigationBar:shouldPopItem:] + 153
5   UIKit                               0x32e56a8f -[UINavigationBar _popNavigationItemWithTransition:] + 99
6   UIKit                               0x32ea6247 -[UINavigationBar popNavigationItemAnimated:] + 123
7   UIKit                               0x32ea60d5 -[UINavigationBar _handleMouseUpAtPoint:] + 925
8   UIKit                               0x32ea5d33 -[UINavigationBar touchesEnded:withEvent:] + 83
9   UIKit                               0x32de192b -[UIWindow _sendTouchesForEvent:] + 319
10  UIKit                               0x32de1319 -[UIWindow sendEvent:] + 381
11  UIKit                               0x32dc7695 -[UIApplication sendEvent:] + 357
12  UIKit                               0x32dc6f3b _UIApplicationHandleEvent + 5827
13  GraphicsServices                    0x36f8622b PurpleEventCallback + 883
14  CoreFoundation                      0x35367523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 39
15  CoreFoundation                      0x353674c5 __CFRunLoopDoSource1 + 141
16  CoreFoundation                      0x35366313 __CFRunLoopRun + 1371
17  CoreFoundation                      0x352e94a5 CFRunLoopRunSpecific + 301
18  CoreFoundation                      0x352e936d CFRunLoopRunInMode + 105
19  GraphicsServices                    0x36f85439 GSEventRunModal + 137
20  UIKit                               0x32df5cd5 UIApplicationMain + 1081
21  Myapp                               0x00003597 main (main.m:20) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T13:59:57.810

一个非常快速的谷歌`SIGSEGV`会告诉你它是什么（一个信号意味着一个分割违规）。这些链接还将教您为什么会发生这种情况。

从堆栈跟踪中，您可以看到主循环正在处理导航栏中的触摸，这导致了`pop`转换。在弹出视图控制器时，错误的内存访问会使应用程序崩溃。

它甚至会告诉你它试图访问的地址（导致崩溃）：`0x60000008` 那个地址看起来是不是有点太“整洁”了？

所以，我首先尝试在调试器中重新创建它。我还会在我的视图控制器中添加一些被推送/弹出的日志记录，这样我就可以知道是哪一个导致了崩溃。

您可以猜测这是按下导航控制器中的“返回”按钮之一的直接结果。

所以，我也倾向于看看我如何设置我的控制器被推送到导航控制器上，并调查你是如何使用导航栏的（因为弹出它们会导致崩溃）。

看起来崩溃发生在核心库中，所以它必须在您的控制器的设置中，因为在堆栈跟踪中似乎没有对您的代码进行任何调用。

# android - SeekBar 中的 onProgressChanged() 和 onStopTrackingTouch 中的不同值

> ID：12601290
> 
> 赞同：0
> 
> 时间：2012-09-26T12:00:42.870
> 
> 标签：android, android-layout, seekbar, android-button

我正在根据搜索栏进度动态修改按钮的高度。

现在我想检索按钮的高度。所以我使用`btn1.getHeight()`了. 但它为按钮高度提供了不正确/旧的值集。`onProgressChanged()``SeekBar`

相反，如果我使用`btn1.getHeight()`in `onStopTrackingTouch()`，我会得到正确的值。

这只是意味着，当我尝试在 中检索按钮的高度时`onProgressChanged()`，UI 更改在屏幕上可见，但**尚未注册**，从而导致获取不正确/旧值。

如何获得正确的值`onProgressChanged()`？

还有其他方法可以做到这一点吗？任何帮助表示赞赏。

## 编辑

@Luksprog：我做了以下更改：

```
<SeekBar
    android:id="@+id/seekBar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="50dp"
    android:maxHeight="9dp"
    android:minHeight="9dp"
    android:padding="10dp"
    android:max="100"
    android:progressDrawable="@drawable/seekbar_progress"
    android:thumb="@drawable/shine_btn" />

<RelativeLayout
    android:id="@+id/Graph01"
    android:layout_width="wrap_content"
    android:layout_height="200dp"
    android:layout_below="@id/seekBar"
    android:layout_marginTop="50dp"
    android:gravity="bottom" >

    <Button
        android:id="@+id/btnGraph01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"                        
        android:layout_alignParentBottom="true"
        android:background="#99f" />

    <com.example.calci.views.MyTextView
        android:id="@+id/tvGraph01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/btnGraph01" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/Graph02"
    android:layout_width="wrap_content"
    android:layout_height="200dp"
    android:layout_below="@id/seekBar"
android:layout_toRightOf="@id/Graph01"
    android:layout_marginTop="50dp"
    android:gravity="bottom" >

    <Button
        android:id="@+id/btnGraph02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"                        
        android:layout_alignParentBottom="true"
        android:background="#99f" />

    <com.example.calci.views.MyTextView
        android:id="@+id/tvGraph02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/btnGraph02" />
</RelativeLayout>

</RelativeLayout> 
```

**并且在活动中**

```
RelativeLayout.LayoutParams lp2 = new RelativeLayout.LayoutParams(20,
            2 * progress * 1);
    lp2.setMargins(55, 0, 0, 0);
    btnGraph01.setLayoutParams(lp2);

RelativeLayout.LayoutParams lp3 = new RelativeLayout.LayoutParams(
            new ViewGroup.MarginLayoutParams(20,
                    RelativeLayout.LayoutParams.WRAP_CONTENT));
    lp3.setMargins(55, 0, 0, 30);
    tvGraph01.setLayoutParams(lp3);
    tvGraph01.setTextSize(6);
    tvGraph01.setGravity(Gravity.CENTER); 
```

但是 TextView 正在按钮内显示......为什么会这样？

**如果我错了，请纠正我...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:29:47.507

首先，我猜这与[您之前的问题有关](https://stackoverflow.com/questions/12562028/modifying-button-height-dynamically-in-upward-direction)。我不会使用`weights`，而是简单地使用 a`RelativeLayout`并附`Buttons`在底部，这样`Buttons`高度会向上增加。像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/parent" >

    <SeekBar
        android:id="@+id/sb"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" 
        android:max="200"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="#99cc00"
        android:text="Button"
        android:onClick="test" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/button1"
        android:background="#0077cc"
        android:text="Button" />

</RelativeLayout> 
```

其次，我不明白为什么您无法获得所需的高度。使用上面的代码，`button.getHeight()`您将获得以前的高度存储（因为在您离开之前不会存储新高度`onProgressChanged`）。但这不应该阻止您获得新的高度，因为您实际上是在自己计算该值：

```
progress * 10 
```

代码：

```
@Override

    public void onProgressChanged(SeekBar seekBar, final int progress,
                        boolean fromUser) {
                    LayoutParams lp = findViewById(R.id.button1).getLayoutParams();
                    lp.width = 50;
                    lp.height = progress * 10;
                    findViewById(R.id.button1).setLayoutParams(lp);
                    Log.e("XZX", "Progress : " + progress + " |Old height : "
                            + findViewById(R.id.button1).getHeight()
                            + "  |New height : " + (progress * 10));
                } 
```

编辑：您的布局文件错误：

```
<RelativeLayout
    android:id="@+id/Graph01"
    android:layout_width="wrap_content"
    android:layout_height="200dp"
    android:layout_below="@id/seekBar"
    android:layout_marginTop="50dp" >

    <Button
        android:id="@+id/btnGraph01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"                        
        android:layout_alignParentBottom="true"
        android:background="#99f" />

    <com.example.calci.views.MyTextView
        android:id="@+id/tvGraph01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/btnGraph01" />
</RelativeLayout> 
```

现在在代码中不需要修改`LayoutParams`of `tvGraph01`，它会`Button`随着它的增长/收缩而跟随，同时获取当前`LayoutParams`的`Button`并修改它，而不是一次又一次地创建新的：

```
RelativeLayout.LayoutParams lp2 = (RelativeLayout.LayoutParams)btnGraph01.getLayoutParams();
lp2.width = 20;
lp2.height = 2 * progress * 1;
lp2.setMargins(55, 0, 0, 0); // <= do you really need the margin? what is its purpose?
btnGraph01.setLayoutParams(lp2);
tvGraph01.setTextSize(6); 
```

# opengl-es - 在opengl es 2中使用透明度绘图

> ID：12601295
> 
> 赞同：0
> 
> 时间：2012-09-26T12:01:00.847
> 
> 标签：opengl-es, opengl-es-2.0

我正在开发一个简单的绘图应用程序。我的线是用多边形构造的，到目前为止看起来还不错。我想添加一个透明度功能，`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`因此我使用了这个功能。但是，因为我的多边形有时会重叠，所以我得到了图片中显示的丑陋结果（多层透明度）。我想得到的是左边的图（没有重叠，因为没有透明度），具有整体透明度。

我想我可以通过保持多边形不重叠来做到这一点，但我认为这对于这项任务来说太过分了。应该有一种方法可以在绘图时控制它们，但是作为 OpenGL 的初学者并没有帮助。

![在此处输入图像描述](../Images/4d00137cd9eceb05478e162aa709f372.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:39:40.813

很抱歉，但透明度的工作方式不允许您在不手动保持多边形重叠的情况下做您想做的事情。透明度的工作方式是它采用其下方表面的颜色，并使用您指定的混合函数来计算像素的最终颜色。

在您的程序中，您正在绘制多个带有 alpha 的多边形。这意味着它们的颜色相加，给出你看到的结果。

我从来没有真正写过一个绘图应用程序，但你也许可以看看三角形条来画你的线条。它们允许您逐点扩展线，并确保几何图形不会与其自身重叠。

# css - 使用 PNG 淡化文本

> ID：12601300
> 
> 赞同：1
> 
> 时间：2012-09-26T12:01:15.950
> 
> 标签：css, png

我怎样才能在里面制作一个褪色的文字

```
<div class="box">
<p>some text, some text</p>
<div class="fading"></div>
</div>

.box {
width: 200px;
}

.fading {
background: url('img/fading.png') no-repeat 0 0;
} 
```

但是如果我没有白色背景怎么办，例如这里：[http](http://beta.ruh.kz) ://beta.ruh.kz（ПОПУЛЯРНЫЕ СТАТЬИ - 称为带有文本的块）如果没有白色背景，我该如何做 png 褪色技巧？

![底部的淡化文字](../Images/75aada7006b3713d7a5d42bdb776d4f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:00:31.310

你的问题很难理解，但我正在努力帮助你。如果您想淡化图像或文本使用`fading{opacity:0.7;}`，您可以相应地更改值。

或者，如果您想在彩色背景上使用图像，您需要制作一个透明的 png 图像，如参考站点中的...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T12:14:38.343

在此页面上：

[http://webdesignerwall.com/tutorials/css-gradient-text-effect](http://webdesignerwall.com/tutorials/css-gradient-text-effect)

[http://css-tricks.com/text-fade-read-more/](http://css-tricks.com/text-fade-read-more/)

有针对您问题的教程

# jquery - 2个具有相同网格大小的浮动图表

> ID：12601301
> 
> 赞同：1
> 
> 时间：2012-09-26T12:01:15.733
> 
> 标签：jquery, grid, flot

我有一个带有 2 个浮动图的网站。图 1 左侧有 (f.ex.) 3 个 y 轴，右侧有 2 个。第一个图下方的第二个图只有一个 y 轴。如何调整两个图，使网格的宽度相同？我用

```
 GridWidth1 = flotGraph.width();
        GridHeight1 = flotGraph.height(); 
```

得到第一个图的宽度和高度，我想用这个值来调整第二个图。但它不起作用。有人知道...吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:17:15.787

从您的问题中不清楚您是否希望图表排列（即网格的左侧应该垂直排列或网格的顶部应该水平排列）或者您是否希望网格具有相同的大小（即图表内的垂直线应具有相同的宽度）。

无论如何，让它们看起来“相同”的最佳选择是使用轴选项`labelWidth`、、`labelHeight`和`reserveSpace`（有关详细信息，请参阅[API](https://github.com/flot/flot/blob/master/API.md)）。

从该页面引用：

> “labelWidth”和“labelHeight”指定刻度标签的固定大小（以像素为单位）。如果您需要对齐多个图，它们很有用。“reserveSpace”意味着即使没有显示轴，Flot 也应该为它保留空间 - 它与 labelWidth 和 labelHeight 结合用于对齐多轴图表很有用。

所以你想要做的是在你的第二张图上指定相同的轴，但不要显示它们。

# gcc - 从对象文件与 -fPIC 链接的静态库创建共享对象

> ID：12601302
> 
> 赞同：1
> 
> 时间：2012-09-26T12:01:20.473
> 
> 标签：gcc, linker, shared-libraries, ld

对于一个项目，我们正在尝试创建一个共享对象文件，该文件导出一组在`libname.exports`. 当然，我们知道`.so`必须使用创建链接文件的目标文件`-fPIC`，所以已经处理好了。然后我们将目标文件合并到一个名为`libname.a`. 这现在应该`.so`是创建文件的基础——或者说是这个想法。

我们正在传递`libname.exports`给`--retain-symbols-file`，因此预期的行为是链接器将拉入`.a`与这些符号相关的任何成员。

但是， 的输出`nm libname.so`为空。另一方面 grepping in`nm libname.a`表明成员中`libname.exports`存在命名的相关符号`.a`。

现在我跌跌撞撞`--whole-archive`，因此调整了命令行：

```
gcc -o libname.so -shared -Wl,-z,defs,--retain-symbols-file,libname.exports,-L. libname.a -lc 
```

至：

```
gcc -o libname.so -shared -Wl,-z,defs,--retain-symbols-file,libname.exports,-L.,--whole-archive,libname.a,--no-whole-archive -lc 
```

这似乎具有包含*所有*目标文件的预期效果`.a`（尽管大小差异很奇怪）。但是，`nm libname.so`仍然没有给我任何输出。

如何使用存档文件创建仅包含`libname.exports`可见符号的共享对象？

不幸的是[，如何从静态库创建共享对象文件](https://stackoverflow.com/questions/6263780)并不能完全回答我的问题。

注意：在你问之前。使用`.a`文件作为输入背后的想法是因为它可以很容易地使用模式规则，`GNUmakefile`并且无论如何都需要`.a`文件`-fPIC`。链接单个目标文件与归档文件之间应该没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:48:32.983

您可以使用该`-u SYMBOL`选项强制从存档中读取对象。

```
% cc -c -fPIC a.c
% nm a.o
00000000 T a
% ar rv liba.a a.o
ar: creating liba.a
a - a.o
% gcc -o liba.so -shared -u a liba.a
% nm liba.so | awk '$3 == "a" { print }'
0000042c T a 
```

要检查的一件事是用 . 指定的符号的拼写`--retain-symbols-file`。例如，从 C++ 代码编译的对象中的符号名称可能会被破坏：

```
% g++ -c -fPIC a.c
% nm a.o | awk '$2 == "T" { print }'
00000000 T _Z1av 
```

# javascript - 重定向到移动网站

> ID：12601304
> 
> 赞同：3
> 
> 时间：2012-09-26T12:01:23.730
> 
> 标签：javascript, navigator

我编写了几行 java 脚本代码。但我不确定它是否正确。几个月前，我发布了一个桌面版网站。但是当用户通过手机（如安卓、iPhone 或可能是 Windows 手机）来时，我想重定向一条新路径。这是代码：

```
// JavaScript Document
var uAgent = navigator.userAgent.toLowerCase();

if(uAgent.indexOf("android") > -1 || uAgent.indexOf("iphone") > -1 || uAgent.indexOf("windows phone") > -1) {
    window.location = "http://website path will come here.";
} 
```

它是正确的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:07:47.923

如果您确实需要检测移动浏览器（而不是制作移动友好的响应式布局，例如[Initializr](http://www.initializr.com/)上仅适用于移动浏览器的[响应式模板](http://verekia.com/initializr/responsive-template)- 谷歌表示“移动优先”和“响应式设计”以获得更多示例）然后采取看看这些链接：

*   [检测移动浏览器](http://detectmobilebrowsers.com/)
*   [检测权](http://www.detectright.com/)
*   [设备图集](http://deviceatlas.com/)
*   [WURFL - 无线通用资源文件](http://wurfl.sourceforge.net/)
*   [移动设备浏览器文件](http://mdbf.codeplex.com/)

有**大量**的移动浏览器——不仅是 iPhone、Android 和 Windows——所以如果你要检测它们，那么你需要做对。另请参阅[jQuery Mobile](http://jquerymobile.com/)，这是一个让您的生活更轻松的出色移动框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T12:10:26.417

这会起作用，但由于以下几个原因，它不是一个很好的方法：

1.  禁用 JavaScript 的用户不会被重定向

2.  移动用户（一些浏览器速度较慢且带宽限制较紧）将在被重定向到移动站点之前下载您的桌面页面。

如果可能的话，更好的方法是通过 Web 服务器配置来管理它，理想情况下根本不需要任何重定向。或者，考虑为所有用户提供相同的内容并使用媒体查询更改布局。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T12:16:48.670

```
uAgent.indexOf("android") > -1 
```

Android 不仅仅是智能手机的操作系统。它还可以在许多平板电脑上运行，这些平板电脑可以轻松处理大多数网站的桌面优化版本。我的一个朋友刚刚抱怨一些网站只为他的 GalaxyTab 提供移动版本，尽管普通版本在他的 10.1 英寸屏幕上看起来不错。

您还忘记了黑莓手机和 symbian 手机。

# jquery - 将焦点保持在当前行，同时将新行动态添加到 jqgrid

> ID：12601306
> 
> 赞同：0
> 
> 时间：2012-09-26T12:01:28.773
> 
> 标签：jquery, jquery-ui, treeview

我在系统中有 jqgrid-treegrid 以滚动显示同一页面中的所有记录。但是我在最初加载记录集后动态加载记录（一种背景过程）。

其中一个网格列是可编辑的，因此在将其余行添加到网格中时，我会不断更新每一行中的特定单元格。

问题是我正在使用

```
afterInsertRow: function(id)
{
  jQuery('#myGrid').jqGrid('editRow',id,true);
} 
```

要将行设置为可编辑，我将焦点（光标）从当前行丢失到新添加的行。

但我真的需要将光标保持在当前行而不中断我的更新过程。

请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:12:54.113

试试这个 API

```
$(grid).setSelection(selectedGuidRow, true); 
```

更多细节[JqGris.Selection](http://www.trirand.com/blog/phpjqgrid/examples/selection/selectedrow_client/default.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:36:15.600

最后我找到了一个方法...

*我在jquery.jqGrid.src.js*中评论了这一行（第 9035 行）

```
//$("td:eq("+focus+") input",ind).focus(); 
```

# windows-8 - Metro 中的 IndexedDB，运行 WACK 工具后域更改了吗？

> ID：12601311
> 
> 赞同：0
> 
> 时间：2012-09-26T12:01:38.710
> 
> 标签：windows-8, microsoft-metro, indexeddb

我正在尝试使用 JS 让这个 IndexedDB 东西在 Metro (Windows 8) 应用程序中工作。

我以为我很好，但后来我运行了几次 WACK 工具，只是想看看我是否遇到了任何问题。

在这些测试之后，IndexedDB.open 调用不再打开我的数据库（其中有 7 个条目），而是触发 onupgradeneeded，并给我一个空白（新）数据库（因为我在 onupgradeneeded 处理程序中创建了一个对象存储）。

我没有更改我的版本号，我没有更改数据库名称。所以我猜测应用程序域在 WACK 测试期间以某种方式发生了变化。

现在有人如何找回我的数据库域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:52:49.897

WACK 测试可能做的一件事是重新安装应用程序，检查一切是否正常。因此，当第一次安装应用程序时，您必须提供数据库的创建，这是在 onupgradeneeded 事件中完成的。

我想你忘了提供这个，这就是他创建一个新的空白数据库的原因。而不是具有所需结构的新数据库。

# google-chrome - 如何在 Chrome 22 的 Web 开发者工具中搜索任何内容？

> ID：12601314
> 
> 赞同：19
> 
> 时间：2012-09-26T12:02:17.817
> 
> 标签：google-chrome, search, google-chrome-devtools

我的 Chrome 自动更新到 22.0.1229.79，而且马上就没有搜索功能了！ [![不找你！](../Images/5451770028fd41e3cd1ced376d529276.png)](https://i.stack.imgur.com/23iYN.png)

通常搜索（无论是元素、“来源”等）位于右上角。但是现在我在任何地方都找不到它，而且似乎没有启用它的选项。有人知道它在哪里吗？

（它在 OSX 上，如果有帮助的话）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-26T12:15:13.037

要搜索当前突出显示的脚本：

Windows：`Ctrl`+ `F`
Mac：`Command`+`F`

要搜索所有来源：

Windows：`Ctrl`+ `Shift`+ `F`
Mac：`Command`+ `Option`+`F`

# python - 如何通过 socks 代理使 python 请求工作

> ID：12601316
> 
> 赞同：93
> 
> 时间：2012-09-26T12:02:26.473
> 
> 标签：python, proxy, socks, python-requests

我在我的 Python 脚本中使用了很棒的[Requests](http://docs.python-requests.org/en/latest/index.html)库：

```
import requests
r = requests.get("some-site.com")
print r.text 
```

我想使用袜子代理。但是 Requests 现在只支持 HTTP 代理。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-03-27T14:20:07.307

现代方式：

```
pip install -U requests[socks] 
```

然后

```
import requests

resp = requests.get('http://go.to', 
                    proxies=dict(http='socks5://user:pass@host:port',
                                 https='socks5://user:pass@host:port')) 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2016-04-30T11:24:19.720

从 2016-04-29 发布的[2.10.0](https://github.com/kennethreitz/requests/blob/master/HISTORY.rst#2100-2016-04-29)`requests`版本开始，支持 SOCKS。`requests`

它需要[PySocks](https://pypi.python.org/pypi/PySocks)，它可以与`pip install pysocks`.

示例用法：

```
import requests
proxies = {'http': "socks5://myproxy:9191"}
requests.get('http://example.org', proxies=proxies) 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2017-04-06T21:38:08.353

如果有人尝试了所有这些较旧的答案，但仍然遇到以下问题：

```
requests.exceptions.ConnectionError: 
   SOCKSHTTPConnectionPool(host='myhost', port=80): 
   Max retries exceeded with url: /my/path 
   (Caused by NewConnectionError('<requests.packages.urllib3.contrib.socks.SOCKSConnection object at 0x106812bd0>: 
   Failed to establish a new connection: 
   [Errno 8] nodename nor servname provided, or not known',)) 
```

这可能是因为默认情况下，`requests`配置为在连接的*本地*端解析 DNS 查询。

尝试将您的代理 URL 从 更改`socks5://proxyhost:1234`为`socks5h://proxyhost:1234`。注意额外的`h`（它代表主机名解析）。

[PySocks 包模块默认是进行远程解析](https://github.com/Anorov/PySocks/blob/010c31bf1ae6cd93449089b73cefb35ca1ff6862/socks.py#L338-L339)，我不确定为什么请求使[它们的集成](https://github.com/shazow/urllib3/blob/a019c5e9e8ac461111552fdf9aa97899977cccbf/urllib3/contrib/socks.py#L141-L166)如此模糊，但我们在这里。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-10-21T07:53:16.357

您需要安装[pysocks](https://github.com/Anorov/PySocks)，我的版本是 1.0 并且代码适用于我：

```
import socket
import socks
import requests
ip='localhost' # change your proxy's ip
port = 0000 # change your proxy's port
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, ip, port)
socket.socket = socks.socksocket
url = u'http://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=inurl%E8%A2%8B'
print(requests.get(url).text) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-05T10:41:59.140

一旦 python`requests`将与`SOCKS5`拉取请求合并，它将像使用`proxies`字典一样简单：

```
#proxy
        # SOCKS5 proxy for HTTP/HTTPS
        proxies = {
            'http' : "socks5://myproxy:9191",
            'https' : "socks5://myproxy:9191"
        }

        #headers
        headers = {

        }

        url='http://icanhazip.com/'
        res = requests.get(url, headers=headers, proxies=proxies) 
```

请参阅[SOCKS 代理支持](https://github.com/kennethreitz/requests/pull/2953)

另一种选择是使用上面提到的[PySocks](https://github.com/loretoparisi/PySocks) ，以防您迫不及待`request`地准备好，当您无法使用时`requesocks`- 例如在 GoogleAppEngine 上由于缺少`pwd`内置模块：

1.  从repo 中获取`socks.py`文件并将副本放在您的根文件夹中；
2.  添加`import socks`和`import socket`

此时在使用 with `urllib2`- 之前配置和绑定套接字，在以下示例中：

```
import urllib2
import socket
import socks

socks.set_default_proxy(socks.SOCKS5, "myprivateproxy.net",port=9050)
socket.socket = socks.socksocket
res=urllib2.urlopen(url).read() 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-06-06T12:42:28.017

您可以使用`https_proxy`环境变量运行脚本。

1.  如有必要，安装袜子支架。

```
pip install PySocks
pip install pysocks5 
```

2.  设置环境变量

```
export https_proxy=socks5://<hostname or ip>:<port> 
```

3.  运行你的脚本。此示例使用代理发出请求并显示 IP 地址：

```
echo Your real IP
python -c 'import requests;print(requests.get("http://ipinfo.io/ip").text)'

echo IP with socks-proxy
python -c 'import requests;print(requests.get("https://ipinfo.io/ip").text)' 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-08-28T09:35:52.293

```
# SOCKS5 proxy for HTTP/HTTPS
proxiesDict = {
    'http' : "socks5://1.2.3.4:1080",
    'https' : "socks5://1.2.3.4:1080"
}

# SOCKS4 proxy for HTTP/HTTPS
proxiesDict = {
    'http' : "socks4://1.2.3.4:1080",
    'https' : "socks4://1.2.3.4:1080"
}

# HTTP proxy for HTTP/HTTPS
proxiesDict = {
    'http' : "1.2.3.4:1080",
    'https' : "1.2.3.4:1080"
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-20T17:17:18.943

我在 urllib3 中安装了 pysocks 和猴子补丁 create_connection，如下所示：

```
import socks
import socket
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS4, "127.0.0.1", 1080)

def create_connection(address, timeout=socket._GLOBAL_DEFAULT_TIMEOUT,
                      source_address=None, socket_options=None):
    """Connect to *address* and return the socket object.

    Convenience function.  Connect to *address* (a 2-tuple ``(host,
    port)``) and return the socket object.  Passing the optional
    *timeout* parameter will set the timeout on the socket instance
    before attempting to connect.  If no *timeout* is supplied, the
    global default timeout setting returned by :func:`getdefaulttimeout`
    is used.  If *source_address* is set it must be a tuple of (host, port)
    for the socket to bind as a source address before making the connection.
    An host of '' or port 0 tells the OS to use the default.
    """

    host, port = address
    if host.startswith('['):
        host = host.strip('[]')
    err = None
    for res in socket.getaddrinfo(host, port, 0, socket.SOCK_STREAM):
        af, socktype, proto, canonname, sa = res
        sock = None
        try:
            sock = socks.socksocket(af, socktype, proto)

            # If provided, set socket level options before connecting.
            # This is the only addition urllib3 makes to this function.
            urllib3.util.connection._set_socket_options(sock, socket_options)

            if timeout is not socket._GLOBAL_DEFAULT_TIMEOUT:
                sock.settimeout(timeout)
            if source_address:
                sock.bind(source_address)
            sock.connect(sa)
            return sock

        except socket.error as e:
            err = e
            if sock is not None:
                sock.close()
                sock = None

    if err is not None:
        raise err

    raise socket.error("getaddrinfo returns an empty list")

# monkeypatch
urllib3.util.connection.create_connection = create_connection 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-02-20T17:48:33.817

我可以在 Linux 上做到这一点。

```
$ pip3 install --user 'requests[socks]'
$ https_proxy=socks5://<hostname or ip>:<port> python3 -c \
> 'import requests;print(requests.get("https://httpbin.org/ip").text)' 
```

# android - 如何重置动画状态？

> ID：12601325
> 
> 赞同：13
> 
> 时间：2012-09-26T12:03:00.393
> 
> 标签：android, android-animation

当我设置：

```
animationSet.setFillAfter(true); 
```

视图在之后保持动画状态。但在做另一个动画之前，我需要将状态重置为旧的。我需要的是这样的：

```
animationSet.resetFillAfter(true); 
```

我怎样才能做到这一点？可能吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-26T12:13:43.303

您可以调用 yourView.clearAnimation()

# c# - 在 C# 中生成精确数量的随机数据

> ID：12601333
> 
> 赞同：0
> 
> 时间：2012-09-26T12:03:48.777
> 
> 标签：c#, string, random, byte

我需要一种方法来生成精确数量的伪随机（字符串）数据。例如，我想编写一个方法，该方法接受要生成的字节数的参数并返回该精确大小的字符串。

我最初打算简单地为每个需要的字节生成 1 个字符，但显然字符不再都是一个字节了。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:08:18.063

我建议使用[RNGCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)它可以生成任意数量的随机字节。然后您可以将其转换为字符串（例如使用 byte64 编码或其他方法）。

记得添加`using System.Security.Cryptography;`到文件中。

```
public class RandomService : IDisposable
{
    private readonly RNGCryptoServiceProvider rngCsp;

    public CryptoService()
    {
        rngCsp = new RNGCryptoServiceProvider();            
    }

    public byte[] GetRandomBytes(int length)
    {
        var bytes = new byte[length];
        rngCsp.GetBytes(bytes);
        return bytes;
    }

    public string GetRandomString(int length)
    {
        var numberOfBytesForBase64 = (int) Math.Ceiling((length*3)/4.0);
        string base64String = Convert.ToBase64String(GetRandomBytes(numberOfBytesForBase64)).Substring(0, length); //might be longer because of padding            
        return base64String.Replace('+', '_').Replace('/', '-'); //we don't like these base64 characters
    }

    public void Dispose()
    {
        rngCsp.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:06:31.307

您可能可以参加[Random](http://msdn.microsoft.com/en-us/library/system.random.aspx)`byte[]`课程，然后转换为`ToString()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:08:15.730

```
char[] UsableChars = { 'a', 'b', 'c', '1', ...., `☺` };
Random r = new Random();

int wantedSize = 12;

string s = new string (Enumerable.Range(0, wantedSize)
    .Select((i) =>  UsableChars[r.Next(UsableChars.Length)]).ToArray()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:50:23.893

如果您使用一组有限的字符，您可以选择那些最终将作为单字节代码的字符，而不管使用何种编码。

```
public byte[] CreateFiller(int length, Random rnd) {
  string chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
  return Encoding.UTF8.GetBytes(Enumerable.Range(0, length).Select(i => chars[rnd.Next(chars.Length)]).ToArray());
}

// only use the overload that creates a Random object itself if you use it once, not in a loop
public byte[] CreateFiller(int length) {
  return CreateFiller(length, new Random());
} 
```

# java - 使用相应的 setter 方法拥有私有变量的目的是什么？

> ID：12601341
> 
> 赞同：7
> 
> 时间：2012-09-26T12:04:08.653
> 
> 标签：java, oop

当我们在java中有私有变量的setter方法时，将变量设为私有的目的是什么？

我们有私有变量来限制用户不能直接访问实例的状态。但有时，我们有相应的 setter 和 getter 方法来访问和更改私有变量的状态。如果是这样，那我们为什么要将变量设为私有？我们可以只使用公共变量，对吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T12:05:55.937

理由是你*隐藏*了实现。你打电话时

```
setX(23); 
```

您对应的变量`x`对客户端类是隐藏的，不能直接观察或修改。

为什么这样好？

1.  它隐藏了实现。您可以`x`在以后更改为（例如） a `string`， a`double`等，并且您的客户端代码不必更改。`x`甚至可能消失，调用`setX()`实际上会执行一些不同*但等效*的功能。
2.  通过实现 setter 函数，您可以强制执行验证等。否则，您无法阻止某人设置`x`为无效（例如负）值。
3.  （这是 Java 特有的好处，而不是一般的 OO 好处）。许多 Java 框架使用*JavaBeans*约定来处理对象。即对于一个属性`x`，将存在一个相应的`getX()`/ `setX()`（或者`isX()`如果它是一个`boolean`）。通过遵守约定，您的类将与这些框架很好地互操作。

请注意，没有设置器而是实现*不可变*对象的参数（因此您可以仅通过构造函数设置值）。这使得对象线程安全和调试/推理对象状态更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:08:09.420

这不是有没有设置器的问题，而是**封装**的问题：成员变量几乎应该总是私有的，以便隐藏实现。

这是我最近看到的一个很好的例子：有人问为什么 Java 没有`AtomicFloat`类型，而其他人指出你实际上可以使用和做一些技巧来实现它，在and`AtomicInteger`之间来回转换。现在这个类看起来像：`int``float`

```
class AtomicFloat {
     private AtomicInteger value;

     public float get() {
         // turn value into float
     }

     public void set(float newValue) {
         // turn newValue into int
     }

     // CAS and whatever else
} 
```

现在在外面看来我已经拥有了我所需要的一切：我可以将这个类用作一个`AtomicFloat`并且我不关心里面发生了什么。现在想象一下，如果用户可以窥视并看到我所有的方法实际上都在用`AtomicInteger`. 那真的会把事情搞砸！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:10:41.893

阻止调用者做一些愚蠢的事情。想象一个 Date 类（一个简单的类，不是 Java 或 Jodatime 的 Date 类），它在 int 字段中存储月份中的日期、月份本身和年份本身：

```
public int dayOfMonth;
public int monthOfYear;
public int year; 
```

这样，没有什么可以阻止调用者在一年中的第 56 个月的第 234 天创建此 Date 类的实例。

另一方面，如果您对私有字段使用 setter 方法，则这些 setter 方法可以检查传递的值是否合理（例如，`setMonth()`不使用 1 到 12 范围之外的值调用它等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:12:05.657

`setter`是 mutator 方法 & 一个 mutator 方法是一种用于`control changes to a variable`.
但是来自其他类的`private`修饰符 可以简单地通过定义一个setter而不是私有修饰符来制作参数`controls the accessiability of a variable`
`write-only`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T12:12:20.227

这种方法通常在以下情况下使用：

```
Class Car {
    Private int wheels
    Private int tyres
    Private time lastUpdated

    - setWheels(int i) {
        lastUpdated = Time.Now
        wheels = i
        tyres = i
    }

    - setTyres(int i) {
        lastUpdated = Time.Now
        tyres = i
        wheels = i
    }
} 
```

假设当该变量更新时，您还想做一些依赖它的其他事情。

这是一个简单的例子，所以轮子的数量与轮胎的数量直接相关，所以我们可以设置，当你使用setter方法时，我们也想知道汽车最后一次更新的时间，基本上它可以让你执行其他任务取决于变量的变化。

将变量设为私有的原因是，在从类外部访问变量时必须使用 setter 方法。

希望这可以帮助。

谢谢，威尔

# visual-studio - WinDDK 版本 6001.18001 的 Microsoft 名称是什么？

> ID：12601342
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:04:12.597
> 
> 标签：visual-studio, wdk

我正在尝试编译 2009 年的一段旧代码。在编译器说明中，开发人员使用了 Visual Studio 2008、.Net 2.0 和 WinDDK：

Microsoft [Windows 驱动程序工具包](http://msdn.microsoft.com/library/windows/hardware/gg487428)

我需要了解 2009 年以来的 WinDDK 版本 6001.18001。

6001.18001 版本的 WinDDK 的 Microsoft 官方名称是什么，您仍然可以从 MSDN 或 TechNET 下载它吗？

(即) WinDDK 7.1 是 7600.16385.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:28:40.017

看起来 WinDDK 版本 6001.18001 被命名为 Windows Server 2008 WDK SP1。

WDK_6001_18001.iso，约 650MB

发布日期：适用于 Windows Server 2008 SP1 的 WDK SP1 发布日期 2008 年 10 月 23 日

[它应该可以通过 Connect 帐户使用](https://login.live.com/login.srf?wa=wsignin1.0&wtrealm=http://connect.microsoft.com&wctx=ru=https%253a%252f%252fconnect.microsoft.com%252fsite%252fsitehome.aspx%253fSiteID%253d148&wct=2012-09-26T12:17:43Z&wp=urn%3aliveid%3aMBI_FED_SSL_URI&wreply=https://connect.microsoft.com/dashboard/)

# gnuplot - gnuplot png 输出不绘制虚线/点线

> ID：12601348
> 
> 赞同：16
> 
> 时间：2012-09-26T12:04:34.170
> 
> 标签：gnuplot

我正在尝试使用 gnuplot v4.4 绘制一个包含虚线和实线的图形。代码是：

```
set term postscript eps enhanced color
set style line 1 linetype 1 lw 2
set style line 2 linetype 1 lw 2 linecolor rgb 'green'
set style line 3 linetype 1 lw 2 linecolor rgb 'blue'
set style line 4 linetype 4 lw 2 linecolor rgb 'red'
set style line 5 linetype 3 lw 2 linecolor rgb 'blue'

set border lw 3
set xtics font ',18'
set ytics font ',18'
set output 'roc.ps'
set key right bottom
plot 'roc_fpdock_isc_test' u 1:2 w l ls 1 title "Full optimization, test set" ,x w l ls 2 title "Random", 'roc_fpdock_isc_training' u 1:2 w l ls 3 title "Full optimization, training set", 'roc_mini_pep_sc_training' u 1:2 w l ls 4 title "Minimization only, training set", 'roc_mini_pep_sc_test' u 1:2 w l ls 5 title "Minimization only, test set" 
```

问题是，我无法将其绘制为 png。当我将`set term`指令更改为：`set term png enhanced`我只得到连续的线条。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-26T12:17:29.437

事实证明，我似乎也无法在`png`终端中看到虚线（带有 GD 后端的虚线）。但是，如果您有 cairo 终端，则可以获得带有虚线的 png（假设您选择了适当的线型）。

```
set term pngcairo dashed
set output "foo.png"
test
!display foo.png
!rm foo.png 
```

顺便说一句，`test`查询特定终端的行为非常棒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-09T11:14:36.623

您在 pngcairo 中有 dashtype 的 dt 选项。传说在这里：

[![传奇](../Images/57edd15bd204e8d2076c715dacef83ef.png)](https://i.stack.imgur.com/9bb2N.png)

例如

```
set style line 5 linetype 3 dt 5 lw 3 linecolor rgb 'green' 
```

给出 dashtype 5

# xml - 如果我将我的 XML 从具有“xmlns”更改为没有“xmlns”会破坏兼容性吗？

> ID：12601351
> 
> 赞同：3
> 
> 时间：2012-09-26T12:04:39.090
> 
> 标签：xml, xsd, xml-namespaces

假设我的 Web 服务发出 XML，其中“xmlns”、“xmlns:xsi”和“xsi:schemaLocation”设置为无效 URI 的占位符（例如“blahblahblah”），并且一旦该服务已从众多系统中使用的用户发现他的 XML 解析器不喜欢占位符。

现在我必须对它做点什么。选项之一是仅删除“xmlns”、“xmlns:xsi”和“xsi:schemaLocation”属性。

删除它们可能会破坏现有用户吗？这样的 XML 是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:16:38.017

If you previously had a `xmlns` attribute in your document element, it means that all XML elements (with no prefix) were in a namespace. If you now remove that namespace, this is no true anymore and the output of any (namespace-aware) parser changes. And with that, most probably the behavior of the programs working on the parsed data.

Just as an example, using XPath in Java is different if the XML elements are in a namespace: [How to query XML using namespaces in Java with XPath?](https://stackoverflow.com/q/6390339/1374678). Although the accepted answer shows a way to use XPath in a namespace-agnostic way, most programs will probably not use this approach.

The XML should still be valid (actually *well-formed*), you can easily check that in a decent XML editor that supports validation (including Eclipse for example). But because you removed the reference to the Schema, validation will only cover basic XML rules (as I said, the *well-formedness*), not the rules set up by the Schema.

So in short, yes, you may break your clients but yes, the XML would (probably) still be valid.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T02:45:13.417

如果 XML 文件以前格式正确，那么它们仍然是格式正确的。有效性并不真正适用，因为您没有指向具有 xsi:location 属性的正确模式文档。

事实上，抱怨的用户可能是唯一一个试图验证您的文件的人。您的其他消费者在占位符方面做得很好。除非他们有专门定制的软件来“识别”你的 blahblahblah 发明，否则他们可能完全没有这些属性规范。

# android - 是否可以在另一个 ScrollView 中有一个 ScrollView？

> ID：12601353
> 
> 赞同：0
> 
> 时间：2012-09-26T12:04:49.557
> 
> 标签：android, android-layout, scrollview, horizontalscrollview

我想学习如何解决这个问题。我想要一个水平滚动视图，滚动被阻止（用户不应该能够滚动它）并且在那个水平滚动视图内部我想要另一个水平滚动视图，并且这个滚动视图必须能够被用户滚动（它具有比屏幕宽度更多的内容）。

有可能做到吗？

我尝试在父水平滚动视图上使用它：

```
((HorizontalScrollView) view).setHorizontalScrollBarEnabled(false);
((HorizontalScrollView) view).setEnabled(false);
((HorizontalScrollView) view).setFocusable(false);
((HorizontalScrollView) view).setFocusableInTouchMode(false); 
```

这在子水平滚动视图上：

```
((HorizontalScrollView) view).requestFocus(); 
```

它不起作用，孩子似乎有一个滚动条，但无法滚动。

如何解决？

PD：我知道这不是一个好的做法，但我想学习如何实现这个目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:59:52.860

> 您永远不应该将 Horizo​​ntalScrollView 与 ListView 一起使用，因为 ListView 负责自己的滚动。最重要的是，这样做会破坏 ListView 中处理大型列表的所有重要优化，因为它有效地强制 ListView 显示其整个项目列表以填充由 Horizo​​ntalScrollView 提供的无限容器。

[http://developer.android.com/reference/android/widget/Horizo​​ntalScrollView.html](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)

```
UPDATE:

Since you may be forced to use a two dimensional scrollview, you may consider using this: 
```

[http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)

我没有使用过这个，但它可能是一个合理的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:47:52.860

你能行的。但是您必须在滚动视图中处理子布局，即**ScrollView 只能承载一个直接子级。**

# php - JSON 数据到 Web 服务 - 如何定义预期的 JSON 数据

> ID：12601354
> 
> 赞同：0
> 
> 时间：2012-09-26T12:04:51.213
> 
> 标签：php, json, web-services, rest

我正在用 PHP 构建一个接受 JSON 作为其有效负载的 RESTful Web 服务。现在，我的问题是，我如何准确地向用户描述 JSON 请求的格式？我是 JSON 新手，我认为我没有 100% 掌握。

其他用户系统基本上会使用我需要的键值对创建一个数据结构（如数组），将其编码为 JSON 并将其发送到我的 Web 服务吗？

我是否真的给他们一份阵列需要看起来的副本？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:14:48.513

遵循 REST 准则，您从 API 用户获得的输入应该是 URL 的一部分（对于 GET 请求；不更新数据，即`http://example.com/api/doc/1243`），或者应该是 POST 变量（在正文中发送） HTTP 请求，发送到相同的 URL）。

因此，对于文档，您需要做的就是指出端点 URL ( `http://example.com/api/doc/1243`)、它们需要使用 POST 的事实以及变量是什么（即`title`、`body`、`author`等）。然后用户将根据他们的需要形成正确的 HTTP 请求，并且在您的服务器端，因为您使用的是 PHP，您将从`$_POST`数组中提取他们的变量（即`$_POST['title']`,`$_POST['body']`等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:31:37.613

[Dropbox](https://www.dropbox.com/developers/reference/api#account-info)是使用 JSON 作为有效负载的 restful api 的一个很好的例子。

您还将很好地了解如何记录您的 API。

# c++ - C++: cin.peek(), cin >> char, cin.get(char)

> ID：12601358
> 
> 赞同：0
> 
> 时间：2012-09-26T12:05:08.637
> 
> 标签：c++

我使用 cin.peek() 方法得到了这段代码。我注意到奇怪的行为，当输入到程序看起来`qwertyu$[Enter]`一切正常时，但当它看起来`qwerty[Enter]$`只有当我输入双美元符号时才有效`qwerty[Enter]$$`。另一方面，当我使用`cin.get(char)`一切正常时。

```
#include <iostream>
#include <cstdlib>

using namespace std;

int main()
{
char ch;
int count = 0;

while ( cin.peek() != '$' )
{
    cin >> ch;         //cin.get(ch);
    count++;
}

cout <<  count << " liter(a/y)\n";

system("pause");
return 0;
}

//Input:
// qwerty$<Enter>  It's ok
//////////////////////////
//qwerty<Enter>
//$                Doesn't work
/////////////////////////////
//qwerty<Enter>
//$$                 works(?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:21:35.167

It's because your program won't get input from the console until the user presses the ENTER key (and then it won't see anything typed on the next line until ENTER is pressed again, and so on). This is normal behavior, there's nothing you can do about it. If you want more control, create a UI.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T15:46:00.163

老实说，我认为目前接受的答案不是那么好。

嗯，我再看一遍，因为它`operator<<`是一个格式化的输入命令，而且`get()`是一个普通的二进制文件，格式化的版本可能会等待比一个字符更多的输入来执行一些格式化魔术。

我认为它比`get()`你看它可以做什么要复杂得多。我认为`>>`会挂起，直到它完全确定它`char`根据设置的所有标志读取 a ，然后才会返回。因此它可以等待比一个字符更多的输入。例如，您可以指定[`skipws`](http://www.cplusplus.com/reference/iostream/manipulators/skipws/).

显然，它需要查看不止一次的输入字符才能获得`char`from `\t\t\t test`。

我认为`get()`不受这些标志的影响，只会从字符串中提取一个字符，这就是为什么它*更容易*以`get()`非阻塞方式表现。

认为当前接受的答案错误的原因是因为它表明程序将不会获得任何输入，直到`[enter]`或其他类似刷新的事情。在我看来，这显然不是这种情况，因为`get()`版本有效。如果它没有得到输入，为什么会这样呢？

由于缓冲，它可能仍然会阻塞，但我认为它的可能性要小得多，而且在您的示例中并非如此。

# wcf - 在 Windows Azure 中部署时拒绝访问 URL？

> ID：12601362
> 
> 赞同：1
> 
> 时间：2012-09-26T12:05:31.450
> 
> 标签：wcf, azure, castle-windsor

我有一个托管在 Azure WorkerRole 中的 WCF 服务。在 localhost 上一切正常，但在 Azure 中部署时出现以下权限问题（在事件查看器中找到）

> 例外：HTTP 无法注册 URL `https://+:5253/IServiceName/`。您的进程无权访问此命名空间（详情请参阅 `http://go.microsoft.com/fwlink/?LinkId=70353`）。

（我正在使用 Castle Windsor WCF 来创建依赖注入服务，但在幕后它基本上是一个 ServiceHost，其基地址设置为`https://<instance-ip-endpoint>.cloudapp.net:<endpoint-port>/IServiceName`和`WSHttpBinding`顶部。）

我从我的另一个项目中复制粘贴了代码，它在 Azure 上运行良好。

有人对如何解决此问题有任何建议吗？部署不应该有权访问它自己的端点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:54:09.657

我收到此错误是因为（看起来像）由于云中缺少程序集引用而导致的异常。

当使用 CopyLocal 标记缺少的程序集（某些特定于应用程序的）并重新部署时，错误就会消失。

（旁注：关于访问权限的错误对故障排除并没有真正的帮助）

# linux - 共享库加载

> ID：12601364
> 
> 赞同：2
> 
> 时间：2012-09-26T12:05:37.553
> 
> 标签：linux, shared-libraries

我的应用显示动态链接没问题。

```
[root@centos udpfltr_fork]# ldd udpfltr
    linux-gate.so.1 =>  (0x00dbe000)
    libnfnetlink.so.0 => /usr/lib/libnfnetlink.so.0 (0x005de000)
    libnetfilter_queue.so.1 => /usr/lib/libnetfilter_queue.so.1 (0x004a5000)
    libnglogc.so.0 => /usr/lib/libnglogc.so.0 (0x00a51000)
    libc.so.6 => /lib/libc.so.6 (0x001b9000)
    /lib/ld-linux.so.2 (0x0019a000) 
```

但是当它被调用时它停止并出现以下错误：

```
./udpfltr: error while loading shared libraries: libnglogc.so.0: cannot open shared object file: No such file or directory 
```

我对实际发生的事情一无所知。我尝试过设置 $LD_LIBRARY_PATH，通过 ldconfig 重新加载 ldcache 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T06:24:55.680

这可能是原因：- 1) 检查 $LD_LIBRARY_PATH - 此路径可能没有 libglogc.so.0 所在的位置未设置 $LD_LIBRARY_PATH，然后将其设置为 .so 位置

# delphi - Indy 10 TCP 命令处理程序是异步的吗？

> ID：12601365
> 
> 赞同：1
> 
> 时间：2012-09-26T12:05:48.273
> 
> 标签：delphi, indy10, anydac

我的应用程序中出现了异常作物，无论是`stack overflow`还是`our of memory`. 它们出现在不同的地方，具体取决于系统何时受够。换句话说，两次运行应用程序不会在同一个地方导致同样的异常。

我有一些导致数据库访问的计时器。AnyDac d/b 组件人员告诉我，我不能重用全局变量，`TADConnection`但必须在每个计时器处理程序中动态分配它，我已经这样做了。

我只是以为我有一个d'oh！我查看最新堆栈跟踪的那一刻。

```
fMainForm.TMainForm.GetToolNumberFromContext($31846FB4)
fMainForm.TMainForm.Received_HEART_BEAT($249AEFD0)
IdCommandHandlers.TIdCommand.DoCommand
IdCommandHandlers.TIdCommandHandler.DoCommand(???,$31846FB4,'')
IdCommandHandlers.TIdCommandHandler.Check('HEART_BEAT',$31846FB4)
IdCommandHandlers.TIdCommandHandlers.HandleCommand($31846FB4,'HEART_BEAT') <===
uADDatSManager.TADDatSRow.SetBlobLength($7DA10FDC,0,$C18DDDC,10,0,1,False)
uADDatSManager.TADDatSRow.SetBlobData($7DA10FDC,0,$C18DDDC,10,False)
uADDatSManager.TADDatSRow.SetData(0,$C18DDDC,10)
uADPhysMySQL.TADPhysMySQLCommand.FetchRow($7D2F4F90,nil)
uADPhysMySQL.TADPhysMySQLCommand.InternalFetchRowSet($7D2F4F90,nil,50)
uADPhysManager.DoFetch(0,50,50,False)
uADPhysManager.TADPhysCommand.FetchBase($7D2F4F90,False)
uADPhysManager.TADPhysCommandAsyncFetch.Execute
uADStanAsync.TADStanAsyncExecutor.ExecuteOperation(False)
uADStanAsync.TADStanAsyncExecutor.Run
uADPhysManager.TADPhysCommand.ExecuteTask(TADPhysCommandAsyncFetch($7DA24FEC) as IADStanAsyncOperation,TADPhysCommandAsyncFetch($7DA24FF8) as IADStanAsyncHandler,True)
uADPhysManager.TADPhysCommand.Fetch($7D2F4F90,False,True)
uADCompClient.TADCustomCommand.Fetch($7D2F4F90,False,True)
uADCompClient.TADCustomTableAdapter.Fetch(False)
uADCompClient.TADAdaptedDataSet.DoFetch($7D2F4F90,False,fdDown)
uADCompDataSet.TADDataSet.InternalFetchRows(False,True,fdDown)
uADCompDataSet.TADDataSet.GetRecord($7DA1AFF4,gmNext,True)
Data.DB.TDataSet.GetNextRecord
Data.DB.TDataSet.GetNextRecords
Data.DB.TDataSet.SetBufferCount(???)
Data.DB.TDataSet.UpdateBufferCount
Data.DB.TDataSet.DoInternalOpen
Data.DB.TDataSet.OpenCursor(???)
uADCompDataSet.TADDataSet.OpenCursor(False)
uADCompClient.TADRdbmsDataSet.OpenCursor(False)
Data.DB.TDataSet.SetActive(???)
uADCompDataSet.TADDataSet.SetActive(True)
Data.DB.TDataSet.Open
uADCompClient.TADRdbmsDataSet.Open('SELECT * FROM tagged_chemicals',(...),(...))
uADCompClient.TADRdbmsDataSet.Open('SELECT * FROM tagged_chemicals')
fMainForm.TMainForm.CheckEndOfScheduleTimerTimer($B116FAC)
Vcl.ExtCtrls.TTimer.Timer
Vcl.ExtCtrls.TTimer.WndProc(???)
System.Classes.StdWndProc(133584,275,1,0)
:768a62fa ; C:\Windows\syswow64\USER32.dll
:768a6d3a USER32.GetThreadDesktop + 0xd7
:768a77c4 ; C:\Windows\syswow64\USER32.dll
:768a788a USER32.DispatchMessageW + 0xf
Vcl.Forms.TApplication.ProcessMessage(???) 
```

我不明白那条标记线，从 AnyDac 到 Indy 代码的突然切换

```
IdCommandHandlers.TIdCommandHandlers.HandleCommand($31846FB4,'HEART_BEAT') <===
uADDatSManager.TADDatSRow.SetBlobLength($7DA10FDC,0,$C18DDDC,10,0,1,False) 
```

有人可以解释一下吗？谢谢

我的第一个想法是 Indy 正在中断 AnyDac，可能是因为它调用 Applciation.ProcessMessages 或类似名称，但我在堆栈上没有看到...

但如果它可以做到这一点，那么它可以中断“正常”的非定时器处理程序代码吗？

我确定我已经破解了，问题是我的 TCP 命令处理程序正在重用其他东西使用的 AnyDac 组件......然后我查看了我的代码，发现命令处理程序中没有数据库访问权限或他们叫的任何东西。

我难住了。我写的还有意义吗？任何人都可以提供任何建议吗？

提前感谢 1,000,000 的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:24:55.813

Indy 的命令处理程序由`TIdCmdTCPServer`和使用`TIdCmdTCPClient`，它们都是多线程组件。命令处理程序在 Indy 内部创建的工作线程内调用。命令处理程序无法中断在不同线程中运行的操作。

# self-extracting - 无法在 IExpress 中设置 Self Extractor 的版本信息

> ID：12601367
> 
> 赞同：0
> 
> 时间：2012-09-26T12:05:51.277
> 
> 标签：self-extracting, iexpress

实际上，尝试为通过 IExpress 创建的自提取器设置版本信息。搜索后我得到了以下[LINK](http://www.mdgx.com/INF_web/custver.htm)，然而，它不识别来自版本部分的值，每次都发布来自 Wextract.exe 的默认值。似乎是 IExpress 忽略了 [VersionSection]。我在 SED 文件中尝试了以下内容。

```
[Options]
VersionInfo=VersionSection;
[VersionSection]
FromFile=MYApp.MSI; 
```

请帮我解决问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T03:56:17.373

首先，您需要删除这些分号。

其次，`FromFile`需要有正确的版本信息类型。MSI 文件似乎没有此信息。当您查看文件的属性时，如果文件有版本信息，则应该有一个*版本选项卡。*（您可以很容易地看到 MSI 文件缺少此选项卡，因此缺少版本信息。）

一个工作示例：

```
[Options]
VersionInfo=VersionSection
[VersionSection]
FromFile=notepad.exe 
```

对于那些好奇的人，可以从使用API`iexpress.exe`中读取版本信息。Stack Overflow 上有一个很好的[例子。](https://stackoverflow.com/questions/940707/how-do-i-programatically-get-the-version-of-a-dll-or-exe-file)`FromFile`[`GetFileVersionInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003.aspx)

# vbscript - 脚本在命令提示符下运行时出现 Windows 脚本宿主错误

> ID：12601368
> 
> 赞同：0
> 
> 时间：2012-09-26T12:05:52.090
> 
> 标签：vbscript

在命令提示符下运行脚本时出现以下错误：

```
Windows Script Host Error
--------------------------
Script : D:\viru\vbs\sample.vbs
Line: 1
Char: 1
Error: Expected Statement
Code : 800A0400
Source: Microsoft VBScript Compilation Error. 
```

这是什么意思，我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:20:58.257

第 1 行字符 1。它看起来像由于文件编码。
将您的脚本文件保存为 UTF-8 不带 Bom、ANSI 或 Unicode (Little Endian) 编码。

# bash - 使用带有“重命名”的通配符

> ID：12601373
> 
> 赞同：5
> 
> 时间：2012-09-26T12:06:04.550
> 
> 标签：bash, unix, wildcard, rename

我一直在使用`rename`命令批量重命名文件。到目前为止，我有如下文件：

```
2010.306.18.08.11.0000.BO.ADM..BHZ.SAC
2010.306.18.08.11.0000.BO.AMM..BHZ.SAC
2010.306.18.08.11.0000.BO.ASI..BHE.SAC
2010.306.18.08.11.0000.BO.ASI..BHZ.SAC 
```

并使用`rename 2010.306.18.08.11.0000.BO. "" *`，`rename .. _. *`我将它们减少到：

```
ADM_.BHZ.SAC
AMM_.BHZ.SAC
ASI_.BHE.SAC
ASI_.BHZ.SAC 
```

这正是我想要的。我想有点笨拙，但它确实有效。现在问题出现了，因为我有如下文件：

```
2010.306.18.06.12.8195.TW.MASB..BHE.SAC
2010.306.18.06.14.7695.TW.CHGB..BHN.SAC
2010.306.18.06.24.4195.TW.NNSB..BHZ.SAC
2010.306.18.06.25.0695.TW.SSLB..BHZ.SAC 
```

它们存在于同一文件夹中。我一直在尝试在`rename`命令中使用通配符来获得与上述类似的结果，例如。`rename 2010.306.18.*.*.*.*. ""`但这会将第一次出现附加`2010.306.18.*.*.*.*.`到所有其他文件的开头 - 显然不是我所追求的，所以我得到：

```
2010.306.18.06.12.8195.TW.MASB..BHE.SAC
2010.306.18.06.12.8195.TW.MASB..BHE.SAC2010.306.18.06.14.7695.TW.CHGB..BHN.SAC
2010.306.18.06.12.8195.TW.MASB..BHE.SAC2010.306.18.06.24.4195.TW.NNSB..BHZ.SAC
2010.306.18.06.12.8195.TW.MASB..BHE.SAC2010.306.18.06.25.0695.TW.SSLB..BHZ.SAC 
```

我想我在这里不了解通配符的一个相当基本的原则，所以有人可以解释为什么这不起作用以及我可以做些什么来获得所需的结果（最好使用`rename`）。

* * *

**注意**

为了澄清，输出希望是：

```
ADM_.BHZ.SAC
AMM_.BHZ.SAC
ASI_.BHE.SAC
ASI_.BHZ.SAC
MASB.BHE.SAC
CHGB.BHN.SAC
NNSB.BHZ.SAC
SSLB.BHZ.SAC 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T12:22:40.520

您可以先尝试一下，看看会执行哪些命令

```
for f in *; do echo mv $f `echo $f | sed 's/2010.*.TW.//'` ; done 
```

如果这是你所期望的，你可以`echo`从命令中删除来执行

```
for f in *; do mv $f `echo $f | sed 's/2010.*.TW.//'` ; done 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T14:50:13.097

`rename``from`和`to`字符串中不允许使用通配符。当您运行`rename 2010.306.18.*.*.*.*. "" *`时，它实际上是您的 shell，它首先扩展通配符，然后将扩展结果传递给`rename`，因此它为什么不起作用。

而不是 using `rename`，而是使用如下循环：

```
for file in *
do
  tmp="${file##2010*TW.}"   # remove the file prefix
  mv "$file" "${tmp/../_}"  # replace dots with underscore
done 
```

# perl - 做危险的事情，如果失败，尝试修复它并重新做。如果仍然失败，请放弃

> ID：12601378
> 
> 赞同：0
> 
> 时间：2012-09-26T12:06:24.927
> 
> 标签：perl

我正在寻找好的形式

```
if (! write_to_file($data) )
{
    open_this_file($file_name)
    write_to_file($data) or die "Cant write to $file_name" ;
} 
```

它看起来很不清楚，不是吗？如何写它自我解释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T12:10:02.727

### “`or`修好就`or`死！”

假设`write_to_file( $data )`失败时返回 false：

```
 write_to_file( $data )
or do { open_this_file( $file_name ); write_to_file( $data ) }
or die "Can't write to $file_name"; 
```

`do`由于运算符优先级，您也可以在没有块的情况下重写它。`open_this_file`和之间的逗号`write_to_file`的优先级高于`or`，所以效果和`do`块一样：

```
 write_to_file( $data )
or open_this_file( $file_name ), write_to_file( $data )
or die "Can't write to $file_name"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T12:28:26.640

```
for my $try (1..$num_tries) {
    last if write_to_file($data);
    die '...' if $try == $num_tries;
    open_this_file($file_name)
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T12:12:20.167

```
open_this_file($file_name) if not write_to_file($data);
write_to_file($data) or die "Cant write to $file_name"; 
```

没有太大区别，但它更清洁，如你所愿..

或者你可以使用这个单线： -

```
write_to_file($data) or open_this_file($file_name) and 
                        write_to_file($data) or die "Cant write to $file_name"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T12:11:21.390

```
sub is_open { return (tell($handle) != -1); }

open_this_file($file_name) if not is_open($handle);
write_to_file($data)       or die "Cant write to $file_name" ; 
```

`$handle`文件句柄在哪里。

# iphone - 使用 xcode 合并音频文件 ( .caf )

> ID：12601382
> 
> 赞同：0
> 
> 时间：2012-09-26T12:06:36.097
> 
> 标签：iphone, ios, ios4

我想在 iphone 中合并两个录制的音频文件 (.caf)。有什么解决方案吗？录制使用 avaudioplayer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:14:59.937

回答者：[中点](https://stackoverflow.com/a/6093397)

您可以使用 ExtAudioFileService 来完成。在 ios 开发人员库中，他们提供了两个示例来将一个音频文件转换为另一种格式。在这些文件中，他们打开一个音频文件用于读取，另一个文件用于写入（转换后的音频）。您可以更改或更新代码以读取两个文件并将它们以相同格式（caf）或压缩格式写入一个输出文件。首先，您打开第一个音频文件并从中读取每个数据包并将其写入新的音频文件。完成第一个音频文件后，关闭文件并打开第二个音频文件进行阅读。现在从第二个音频文件中读取每个数据包并写入新创建的音频文件并关闭第二个音频文件和新的音频文件。

请找到这些示例代码的链接（[1](http://developer.apple.com/library/ios/#samplecode/iPhoneACFileConvertTest/Listings/AudioConverterFileConvert_cpp.html#//apple_ref/doc/uid/DTS40010581-AudioConverterFileConvert_cpp-DontLinkElementID_3)、[2](http://developer.apple.com/library/ios/#samplecode/iPhoneExtAudioFileConvertTest/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009222)）……希望这对您有所帮助……祝您好运。:)

# php - 如何在设计 PHP REST Web 服务时进行身份验证？

> ID：12601386
> 
> 赞同：0
> 
> 时间：2012-09-26T12:07:06.877
> 
> 标签：php, json, web-services, rest, authentication

> **可能重复：**
> [通过 https 发送敏感数据的安全性如何？](https://stackoverflow.com/questions/190771/how-secure-is-sending-sensitive-data-over-https)
> [JSON 数据到 Web 服务 - 如何定义预期的 JSON 数据](https://stackoverflow.com/questions/12601354/json-data-to-web-service-how-do-define-expected-json-data)

我正在构建一个接受 JSON 作为其有效负载的 REST Web 服务。现在，我的 Web 服务非常简单。它只是从客户端系统接收数据并在我们的系统中创建订单（Web 服务基本上是现有功能的包装器）。

现在，我通过应用程序中的用户名和密码对用户进行身份验证。我是否只是要求他们在发送的 JSON 数据中提供他们的用户名/密码？这安全吗？

该服务通过 HTTPS 运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:51:56.427

正如我在上面的评论中所写的，目前还不清楚您想知道什么。也许是因为有很多“取决于”的潜力。

让我们看看你能做什么：

1.  您可以将身份验证放在传输层上，这里是 HTTP。这将允许您很早地进行身份验证，例如在（网络）服务器级别。
2.  您可以使用 json 有效负载传递凭据，然后在您的应用程序中进行身份验证。这可以与 1 结合使用。
3.  您可以创建一个经过身份验证的会话，并传递一个会话密钥。然后 API 请求需要有一个会话，否则它们不会被接受。这可以与 2\. 和 3 结合使用。

只要传输层对您来说足够安全（这里是 TLS/SSL），就可以做任何让您满意的事情。根据您选择的模式，您将有更多工作要做。

此外，通常在用户凭证旁边还有一个所谓的 API 密钥，Web 服务使用它能够将每个 API 请求映射到某个实体，这也可以在身份验证中发挥一些作用。但是，API-Key 就像用户名和密码合二为一，所以它不是那么灵活。

# gtk - 如何使用小部件当前渲染作为拖放图像

> ID：12601387
> 
> 赞同：1
> 
> 时间：2012-09-26T12:07:17.907
> 
> 标签：gtk, pygtk, drag-and-drop

我对 dnd 拖动图像有一个非常烦人的问题。当我开始拖动一些小部件时，它会在移动时显示一些默认图标。我只是希望这个图标实际上是小部件本身的外观。所以它应该看起来就像我通过拖动移动小部件一样。有没有简单的方法可以做到这一点？我开始环顾四周，发现只是使用 pixbuf pixbuf = gtk.gdk.pixbuf_new_from_xpm_data(xpm) myWidget.drag_source_set_icon_pixbuf(pixbuf) 设置图像

这种方式可以工作，但我需要使用小部件的当前外观，因为有主题和少量图像的叠加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:58:00.477

您可以获取小部件的 Cairo 上下文，然后将其复制到 pixbuf：

```
cr = widget.window.cairo_create()
surface = cr.get_target()
surface.write_to_png('test.png')
pixbuf = gtk.gdk.pixbuf_new_from_file('test.png')
context.set_icon_pixbuf(pixbuf, 0, 0) 
```

在这里，我将通过一个中间文件来保存和加载图像数据。可能有一种直接的方法可以做到这一点，但是在阅读了 Cairo 文档并尝试了各种奇怪的事情之后，我放弃了。

# c# - 枚举远程 GAC 程序集

> ID：12601392
> 
> 赞同：1
> 
> 时间：2012-09-26T12:07:39.920
> 
> 标签：c#, gac

我想列出域上以“IN”或“IP”开头的所有程序集条目（GAC），我找到了几种在本地而不是远程执行的方法。

我想显示所有可用信息（大小、版本、日期……），我儿子真的不知道如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:27:56.087

GACed 程序集存储在每台计算机上的“%windir%\Microsoft.Net\assembly”目录中（但可能比 .Net 4.0 中的要复杂一些。请参阅[.NET 4.0 有一个新的 GAC，为什么？](https://stackoverflow.com/questions/2660355/net-4-0-has-a-new-gac-why)更多信息）。该目录包含 GAC-32。GAC_64 和 GAC_MSIL 用于 32 位、64 位和处理器独立程序集，每个文件夹都包含每个程序集的文件夹。您可以在每台计算机上迭代该目录中的文件夹，例如使用[WMI 文件和文件夹访问](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394594%28v=vs.85%29.aspx)，并找到您要查找的程序集。

# jquery - 用于在 td 中首次出现 span 的 jQuery 选择器

> ID：12601394
> 
> 赞同：2
> 
> 时间：2012-09-26T12:07:46.420
> 
> 标签：jquery, jquery-selectors, jquery-filter

我有以下 HTML

```
<table>
    <tr>
        <td><span></span></td>
        <td><a><span></span></a></td>
        <td><span></span><span><span/></td>
    </tr>
<table/> 
```

我需要在每个 td 中选择 span 的第一次出现。我会从上面的 HTML 中提取 3 个跨度。

`$('td span')`返回所有 (4) 个跨度

`$('td span:first-child')`也返回所有跨度

`$('td span:first')`只先返回

`$('td > span')`仅返回 2 个跨度。

我可以通过选择器或过滤器来做到这一点吗？
我必须使用什么来实现这一目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T12:11:24.703

尝试这个：

```
​$('td').find('span:first') 
```

[http://jsfiddle.net/qDAt8/](http://jsfiddle.net/qDAt8/)

请注意，您的标记无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:14:35.407

修复 HTML 后，这将起作用：

```
$('td').find('span:first'); 
```

### [演示](http://jsfiddle.net/Xxn2H/)

上面的 DEMO 使用以下示例 HTML 并直观地突出显示匹配的元素：

```
<table>
    <tr>
        <td><span>span 1.1</span><span>span 1.2</span></td>
        <td><a><span>span 2.1</span><span>span 2.2</span></a></td>
        <td><span>span 3.1</span><span>span 3.2</span></td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:16:43.077

```
$("table td").find("span:first") 
```

为您提供前三个跨度。当您提供更详细的搜索时，jQuery 会更有效地查找元素。

# java - 使用gson将Json序列化/反序列化为不同的结构？

> ID：12601396
> 
> 赞同：0
> 
> 时间：2012-09-26T12:07:59.420
> 
> 标签：java, android, serialization, deserialization, gson

我想从 json 创建不同的对象结构。

例如，我想用内部对象创建 json，但是当我反序列化时，它应该分配给一个字段。

示例 json：

```
{
 "id": 1,
 "innerData": {
    "a": "foo",
    "b": "bar"
 }
} 
```

我想将其反序列化为具有两个字段的对象-`int` `id`并且`String` `b`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:00:57.917

我最终编写了自定义反序列化器。

# http - 网络管理员可以更改http的默认端口吗

> ID：12601397
> 
> 赞同：0
> 
> 时间：2012-09-26T12:07:59.457
> 
> 标签：http, networking, port, admin

[我对以下线程](https://stackoverflow.com/questions/12601001/how-to-get-default-port-number-on-which-web-application-is-running-or-deployed/12601071#comment16983919_12601071)给出了答案。但在评论中，一位用户建议网络管理员可以将 http 的默认端口从 80 更改为其他端口。据我所知，如果我打开一个页面，例如。[http://www.example.com](http://www.example.com)没有端口，这意味着它在端口 80 上运行。

我只是想澄清一下网络管理员是否可以更改默认端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:18:38.460

使用浏览器时，[http://www.example.com](http://www.example.com)将始终尝试连接到服务器的 TCP 端口 80，就像 HTTPS 连接的端口 443 一样。这些端口号（[在此处](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt)定义）在任何浏览器中都是硬编码的。

然而，可以将 Web 服务器配置为侦听任何其他端口，但这几乎没有意义。如果是这样，浏览器将无法连接（除非在[http://myserver.com:81](http://myserver.com:81)中明确给出了端口号）。

# maven - 为使用 Maven 的 Junit 测试传递数据库配置的 VM 参数 -D

> ID：12601398
> 
> 赞同：2
> 
> 时间：2012-09-26T12:08:06.383
> 
> 标签：maven, junit, sonarqube

在 Eclipse 上执行 Junit 测试用例时，我们通过 传递用于 DB 配置的 VM 参数`-D`，但是在通过 Maven 将相同的 Junit 测试用例上传到 Sonar 时，它不起作用，因为没有设置 VM 参数。

我试图通过`MAVEN_OPTS`on传递参数，`MVN.sh`但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:46:08.950

与其在命令行上使用系统属性设置数据库配置，不如考虑使用配置文件进行设置。

在您的 pom.xml 中添加类似这样的内容：

```
<profiles>
  <profile>
    <id>sonar</id>
    <build>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.12.3</version>
          <configuration>
            <systemPropertyVariables>
              <db.user>foo</db.user>
              <db.password>bar</db.password>
            </systemPropertyVariables>
          </configuration>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles> 
```

文档：

[http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

[http://maven.apache.org/plugins/maven-surefire-plugin/examples/system-properties.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/system-properties.html)

# asp.net - 这是创建日志系统的好方法吗

> ID：12601399
> 
> 赞同：0
> 
> 时间：2012-09-26T12:08:08.017
> 
> 标签：asp.net, logging, event-handling, subscription, single-responsibility-principle

我想创建一个日志系统，不是记录异常，而是记录用户活动以及他们对数据所做的事情。例如，当用户删除记录时，我想记录用户名、记录 ID、日期和...。

首先，我决定创建一个日志类并在所有其他类方法中使用它的方法。但是经过一些阅读博客和搜索之后，我发现这种方法违反了 OOP 的 SRP 原则。

现在我正在考虑另一种解决方案。我还有我的日志类。但不是在代码中调用它的方法，我应该使用事件。我正在考虑添加一个订阅由其他类调用的事件的侦听器类。

假设在页面中我有一个删除订单的方法：

```
protected void DeleteOrder(Order order)
{
    Orders.Delete(order);
    DeletedEvent(this,order); 
} 
```

然后订阅者使用发送的数据创建日志。此类检查对象类型并根据类型调用正确的私有方法以使用对象属性创建日志。

这一般适用吗？如果是这样，这是一个好方法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:43:37.343

是的，你的方法很好。

这是一个 MVC.NET 应用程序吗？看看这篇文章：

[http://weblogs.asp.net/shijuvarghese/archive/2011/07/18/user-activity-logging-in-asp-net-mvc-app-using-action-filter-and-log4net.aspx](http://weblogs.asp.net/shijuvarghese/archive/2011/07/18/user-activity-logging-in-asp-net-mvc-app-using-action-filter-and-log4net.aspx)

# objective-c - iOS 应用程序在恢复时崩溃

> ID：12601406
> 
> 赞同：10
> 
> 时间：2012-09-26T12:08:35.937
> 
> 标签：objective-c, ios, crash

**（见底部更新）**

最近，当我的 iPhone 应用程序从后台返回时，我开始遇到奇怪且罕见的崩溃。崩溃日志仅包含系统调用：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000138
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x34c715b0 objc_msgSend + 16
1   CoreFoundation                  0x368b7034 _CFXNotificationPost + 1424
2   Foundation                      0x34379d8c -[NSNotificationCenter postNotificationName:object:userInfo:] + 68
3   UIKit                           0x37ddfec2 -[UIApplication _handleApplicationResumeEvent:] + 1290
4   UIKit                           0x37c37d5c -[UIApplication handleEvent:withNewEvent:] + 1288
5   UIKit                           0x37c376d0 -[UIApplication sendEvent:] + 68
6   UIKit                           0x37c3711e _UIApplicationHandleEvent + 6150
7   GraphicsServices                0x36dea5a0 _PurpleEventCallback + 588
8   CoreFoundation                  0x3693b680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
9   CoreFoundation                  0x3693aee4 __CFRunLoopDoSources0 + 208
10  CoreFoundation                  0x36939cb2 __CFRunLoopRun + 642
11  CoreFoundation                  0x368aceb8 CFRunLoopRunSpecific + 352
12  CoreFoundation                  0x368acd44 CFRunLoopRunInMode + 100
13  GraphicsServices                0x36de92e6 GSEventRunModal + 70
14  UIKit                           0x37c8b2fc UIApplicationMain + 1116
15  [MyAppName]                     0x00083d60 main (main.m:20)
16  [MyAppName]                     0x00080304 start + 36 
```

这可能看起来像一个僵尸对象被调用`UIApplicationWillEnterForegroundNotification`或（通过堆栈跟踪和崩溃的时间`UIApplicationDidBecomeActiveNotification`猜测），但是：`_handleApplicationResumeEvent`

1.  我的所有课程都没有注册`UIApplicationDidBecomeActiveNotification`，只有几个单身人士（永远活着）注册`UIApplicationWillEnterForegroundNotification`；
2.  我做了一些实验，结果发现帖子`UIApplicationWillEnterForegroundNotification`来自`[UIApplication _sendWillEnterForegroundCallbacks:]`，并且它不在崩溃日志中。

对我来说，所有这些都意味着我正在使用的某个库中存在错误，或者系统错误，并且崩溃发生在 iOS 5.1.1（发布版本）、iOS 6.0（发布版本）和 iOS 6.0 上一次（调试构建）。我扫描了我正在使用的每个库并可以访问其源代码，但他们既没有注册也没有`UIApplicationWillEnterForegroundNotification`注册`UIApplicationDidBecomeActiveNotification`. 我唯一无法访问的库是 TestFlight，但崩溃发生在 TestFlight 的 1.0 和 1.1 版本上，我已经使用前者很长一段时间了，没有出现此类问题。所以，总而言之，我不知道为什么会出现这种崩溃以及它来自什么。有任何想法吗？

**更新 1**

感谢 DarthMike 和 matt 的帮助，我对这个问题进行了更深入的调查。通过使用通知中心回调和记录堆栈跟踪，我发现当且仅当`UIApplicationResumedNotification`作为从后台返回的一部分触发通知时，才会出现这个确切的堆栈。你猜怎么着——这是一些“私人”通知，它没有对应的公共标识符。它没有`userInfo`，它的对象是`UIApplication`（在此之前发布的许多其他通知）。显然我不使用它，我也没有任何库我有源代码。我什至在互联网上找不到任何合理的提及！我也高度怀疑 TestFlight 是罪魁祸首，因为在调试期间也发生了崩溃，而且我不会在调试模式下“起飞”TestFlight。

这是接收的堆栈跟踪`UIApplicationResumedNotification`。偏移量都是相同的，但具有恒定的字节偏移量（2 或 4，取决于库 - 可能是因为它是调试堆栈跟踪，而不是发布）：

```
0   [MyAppName]                         0x0016f509 NotificationsCallback + 72
1   CoreFoundation                      0x3598ce25 __CFNotificationCenterAddObserver_block_invoke_0 + 124
2   CoreFoundation                      0x35911037 _CFXNotificationPost + 1426
3   Foundation                          0x333d3d91 -[NSNotificationCenter postNotificationName:object:userInfo:] + 72
4   UIKit                               0x36e39ec7 -[UIApplication _handleApplicationResumeEvent:] + 1294
5   UIKit                               0x36c91d61 -[UIApplication handleEvent:withNewEvent:] + 1292
6   UIKit                               0x36c916d5 -[UIApplication sendEvent:] + 72
7   UIKit                               0x36c91123 _UIApplicationHandleEvent + 6154
8   GraphicsServices                    0x35e445a3 _PurpleEventCallback + 590
9   CoreFoundation                      0x35995683 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
10  CoreFoundation                      0x35994ee9 __CFRunLoopDoSources0 + 212
11  CoreFoundation                      0x35993cb7 __CFRunLoopRun + 646
12  CoreFoundation                      0x35906ebd CFRunLoopRunSpecific + 356
13  CoreFoundation                      0x35906d49 CFRunLoopRunInMode + 104
14  GraphicsServices                    0x35e432eb GSEventRunModal + 74
15  UIKit                               0x36ce5301 UIApplicationMain + 1120
16  [MyAppName]                         0x000aa603 main + 390
17  [MyAppName]                         0x000a41b0 start + 40 
```

NotificationsCallback 是我为调试添加的“观察者”回调。

只是为了证明一点，我故意省略了`removeObserver:`来自我的一个对象的调用以生成僵尸/异常，并且仍然包含堆栈跟踪，`_CFXNotificationPost + 1426`然后是`EXC_BAD_ACCESS`in崩溃`objc_msgSend + 16`，就像我最初的崩溃一样。所以这只是意味着有人已经注册了一个观察者`UIApplicationResumedNotification`并且在观察者被释放之前没有删除它。基于我从未注册过此类通知的事实，我可以假设这次崩溃不是我的错。问题仍然存在——那是谁呢？我想知道谁实际上注册了这个通知......

**更新 2**

虽然我仍在等待查看我的应用程序的新版本上的这个错误是否有任何变化，但我在以前的版本中又遇到了一次崩溃。事实证明，无论为 注册什么，都为其`UIApplicationResumedNotification`指定选择器`_applicationResuming:`。我怀疑这有什么用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T15:23:55.867

在运行 IOS 6.0.1 的设备的崩溃报告中，我有完全相同的堆栈跟踪。我设法通过以下模式在模拟器上重现了该问题：

*   将应用程序置于后台

*   从模拟器菜单模拟内存警告
*   将应用程序带回前台

经过大量调试后，我发现*_applicationResuming:*消息被发送到*UITextField*，我将其作为对内存警告的反应而发布。我在 IOS 5.1 下测试了相同的模式，但它没有导致崩溃。出于某种原因，在 IOS 6 UITextField 中为 ApplicationResumeEvent 注册（可能并不总是，但在键盘出现之后）。
我的解决方法是在释放它之前从 NSNotificationCenter 中删除它：

```
[[NSNotificationCenter defaultCenter] removeObserver:self.placeFld];
self.placeFld = nil; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T07:21:02.157

我刚刚遇到了这个问题，并找到了一个不涉及删除通知的解决方案。在我们的例子中，有一个旧代码正在这样做：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
  [searchBar resignFirstResponder];
  // other stuff
} 
```

我不知道我们为什么会有这个，但它现在消失了，崩溃也消失了。似乎在这种情况下，在调用 searchBarTextDidBeginEditing 时辞职第一响应者会孤立搜索栏的文本编辑字段上的通知，然后一旦拥有此 UISearchBar 的视图控制器被释放并且我们执行了背景/前景，我们就会崩溃舞蹈。

YMMV

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T19:34:38.117

将断点放在`-[NSNotificationCenter postNotificationName:object:userInfo:]`. 它试图向不再存在的对象或类似的对象发送通知。您可能对自己的通知或自己的对象管理不善。

如果您还没有使用它，请考虑切换到 ARC。

使用静态分析器。它可以发现潜在的内存问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T13:25:29.070

可能有很多事情，但我认为检查注册任何 UIApplication 通知的代码会更好。您真的不知道哪个通知触发了错误。

此外，是否有任何对象在 AppDelegate 上保留/持有强引用？它可能会导致一些奇怪的保留周期，从而导致这种崩溃发生。

我从未见过 XCode 的不当行为造成如此严重的崩溃。

编辑：粘贴头文件中的所有通知。可能是矫枉过正，但有些可以在应用程序简历/从后台发送

```
UIKIT_EXTERN NSString *const UIApplicationDidEnterBackgroundNotification       NS_AVAILABLE_IOS(4_0);
UIKIT_EXTERN NSString *const UIApplicationWillEnterForegroundNotification      NS_AVAILABLE_IOS(4_0);
UIKIT_EXTERN NSString *const UIApplicationDidFinishLaunchingNotification;
UIKIT_EXTERN NSString *const UIApplicationDidBecomeActiveNotification;
UIKIT_EXTERN NSString *const UIApplicationWillResignActiveNotification;
UIKIT_EXTERN NSString *const UIApplicationDidReceiveMemoryWarningNotification;
UIKIT_EXTERN NSString *const UIApplicationWillTerminateNotification;
UIKIT_EXTERN NSString *const UIApplicationSignificantTimeChangeNotification;
UIKIT_EXTERN NSString *const UIApplicationWillChangeStatusBarOrientationNotification; // userInfo contains NSNumber with new orientation
UIKIT_EXTERN NSString *const UIApplicationDidChangeStatusBarOrientationNotification;  // userInfo contains NSNumber with old orientation
UIKIT_EXTERN NSString *const UIApplicationStatusBarOrientationUserInfoKey;            // userInfo dictionary key for status bar orientation
UIKIT_EXTERN NSString *const UIApplicationWillChangeStatusBarFrameNotification;       // userInfo contains NSValue with new frame
UIKIT_EXTERN NSString *const UIApplicationDidChangeStatusBarFrameNotification;        // userInfo contains NSValue with old frame
UIKIT_EXTERN NSString *const UIApplicationStatusBarFrameUserInfoKey;                  // userInfo dictionary key for status bar frame
UIKIT_EXTERN NSString *const UIApplicationLaunchOptionsURLKey                NS_AVAILABLE_IOS(3_0); // userInfo contains NSURL with launch URL
UIKIT_EXTERN NSString *const UIApplicationLaunchOptionsSourceApplicationKey  NS_AVAILABLE_IOS(3_0); // userInfo contains NSString with launch app bundle ID
UIKIT_EXTERN NSString *const UIApplicationLaunchOptionsRemoteNotificationKey NS_AVAILABLE_IOS(3_0); // userInfo contains NSDictionary with payload
UIKIT_EXTERN NSString *const UIApplicationLaunchOptionsLocalNotificationKey  NS_AVAILABLE_IOS(4_0); // userInfo contains a UILocalNotification
UIKIT_EXTERN NSString *const UIApplicationLaunchOptionsAnnotationKey         NS_AVAILABLE_IOS(3_2); // userInfo contains object with annotation property list
UIKIT_EXTERN NSString *const UIApplicationProtectedDataWillBecomeUnavailable NS_AVAILABLE_IOS(4_0);
UIKIT_EXTERN NSString *const UIApplicationProtectedDataDidBecomeAvailable    NS_AVAILABLE_IOS(4_0);
UIKIT_EXTERN NSString *const UIApplicationLaunchOptionsLocationKey           NS_AVAILABLE_IOS(4_0); // app was launched in response to a CoreLocation event.
UIKIT_EXTERN NSString *const UIApplicationLaunchOptionsNewsstandDownloadsKey NS_AVAILABLE_IOS(5_0); // userInfo contains an NSArray of NKAssetDownlo 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-26T12:14:29.587

在调试一些奇怪的崩溃之前，我会做一些事情来清理甲板。

Build Clean（摆脱本地缓存文件）。

从模拟器/设备中删除应用程序（有时会缓存 XIB）。

重新启动 Xcode（当 Xcode 与当前设置不同步时会出现一些奇怪的错误）。

然后，再试一次。

# symfony - Doctrine Query Builder，“介于”表达式和子查询之间

> ID：12601413
> 
> 赞同：2
> 
> 时间：2012-09-26T12:09:06.673
> 
> 标签：symfony, doctrine-orm, query-builder

我正在尝试使用 Doctrine 的查询构建器创建一个非常复杂的查询（我使用的是 Doctrine 2.2）。在模型中，我有一个`Distributor`类和一个`DistributorVisit`具有一对多关系的类。每次代表访问经销商时，都会在`DistributorVisit`表格中添加一个带有访问日期的新行。可以在[此处](http://i.stack.imgur.com/qJGK2.png)找到这两个表的 ER 图。

现在我希望能够按他们的**最后访问日期**过滤分销商。因此，用户输入一个日期范围（上次访问时间和上次访问时间），最后访问日期在这两个日期之间的经销商会被列出。我正在使用 Doctrine 的查询生成器，因为我在过滤器中执行了许多其他条件查询，并且我发现面向对象的方法在这种情况下效果最好。这是我在`DistributorRepository`课堂上所做的：

```
$qb = $this->getEntityManager()->createQueryBuilder()
     ->select('o')
     ->from('MyBundle:Distributor', 'o');

// Lots of 'andWhere's here

$qbv = $this->getEntityManager()->createQueryBuilder();

$qb->andWhere($qb->expr()->between(

    $qbv->select($qbv->expr()->max('v.visitDate'))
        ->from('MyBundle:DistributorVisit', 'v')
        ->join('MyBundle:Distributor', 'o2',
            Join::WITH,
            $qbv->expr()->andX(
                $qbv->expr()->eq('o2.id', 'v.distributorId'),
                $qbv->expr()->eq('o2.id', 'o.id')
            ))
        ->getDQL(),

    $filter->getLastVisitFrom()->getTimestamp(),
    $filter->getLastVisitTo()->getTimestamp()
)); 
```

这给了我以下错误：

```
[Syntax Error] line 0, col 83: Error: Expected Literal, got 'SELECT' 
```

我想这是因为查询生成器需要一个文字，我的子选择是，但是，子查询的结果应该是一个文字，对吧？可能是因为查询生成器没有相应地添加括号？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:43:20.347

我现在通过以下方式解决了这个问题：

```
$qb = $this->getEntityManager()->createQueryBuilder()
    ->select('o')
    ->from('MyBundle:Distributor', 'o');

$qbdv = $this->getEntityManager()->createQueryBuilder();
$qbdv->select('MAX(dv2.visitDate)')
    ->from('MyBundle:DistributorVisit', 'dv2')
    ->where($qbdv->expr()->eq('dv2.distributor', 'o'));

$maxVisitDate = '('.$qbdv->getDQL().')';

$qb->leftJoin(
    'o.distributorVisits',
    'dv',
    Join::WITH,
    $qb->expr()->eq('dv.visitDate', $maxVisitDate)
);

$qb->andWhere(
    $qb->expr()->between(
        'dv.visitDate',
        ':dateFrom',
        ':dateTo'
    )
)
->setParameter('dateFrom', $filter->getLastVisitFrom())
->setParameter('dateTo', $filter->getLastVisitTo()); 
```

所以我基本上做的是以下几点：我将`DistributorVisit`表加入到`Distributor`最大访问日期的表中。诀窍在于可以将（子）查询（`$qb1->getDQL()`）的 DQL 直接传递给 Doctrine 表达式（`$qb2->expr()->eq('column', $qb1->getDQL()`）。我在上面的代码中使用左连接来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:16:21.683

我猜您当前的 DQL 如下所示：

```
SELECT ..
FROM ..
WHERE SELECT .. FROM .. BETWEEN .. AND .. 
```

但应该是这样的：

```
SELECT ..
FROM ..
WHERE (SELECT .. FROM ..) BETWEEN .. AND .. 
```

要修复您的代码，我只需将子查询的 dql 放在括号内：

```
$subQueryDQL = $qbv->select($qbv->expr()->max('v.visitDate'))
    ->from('MyBundle:DistributorVisit', 'v')
    ...
    ->getDQL();

$qb->andWhere($qb->expr()->between(
    sprintf('(%s)', $subQueryDQL),
    $filter->getLastVisitFrom()->getTimestamp(),
    $filter->getLastVisitTo()->getTimestamp()
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T13:53:07.037

我的情况：

```
$qb->andWhere(
"t.field BETWEEN (
    {$subQuerybuilder1->getDQL()}
  ) AND (
    {$subQuerybuilder2->getDQL()}
  )
"); 
```

得到：

```
SELECT ... WHERE t.field BETWEEN (
        SELECT t1.field FROM t1
      ) AND (
        SELECT t2.field FROM t2
      ) 
```

# version-control - 将特定变更集从一个 TFS 实例应用到另一个

> ID：12601414
> 
> 赞同：5
> 
> 时间：2012-09-26T12:09:09.873
> 
> 标签：version-control, tfs, patch

将来自一个 TFS 实例的特定变更集的更改应用于另一个实例的最简单方法是什么？

我想要的是从实例 A 中获取某种补丁文件，我可以将其应用于实例 B。由于有两个不同的实例，因此不能使用传统的分支/合并方法。据我所知，TFS 对传统 Unix 意义上的补丁文件的支持很差。

我真的需要检查实例 A 上的变更集并手动压缩相关文件，然后我可以将其提取到实例 B 的源树中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:35:04.980

事实证明，由于缺乏 TFS 的支持，“补丁”路线是一条死胡同。我们最终得到的解决方案是执行一项夜间工作，该工作基本上执行以下操作：

1.  使用只读用户从远程仓库获取所有代码。
2.  用另一个分支的内容覆盖我们仓库中一个单独分支的所有内容。
3.  每当我们想要将他们的更改带入我们的主分支时，执行从该单独分支到主分支的合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T18:35:25.420

我写了一篇关于类似问题的博客文章，其中我使用 TF.exe 命令和 7Zip[创建了一个 TFS 补丁文件](http://codeblog.theg2.net/2014/09/create-tfs-patch-file-with-pending.html)，然后可以将其应用于另一个 TFS 服务器或工作区。[我在Github](https://github.com/gbrayut/CodeBlog/tree/master/20140914_TFS)上发布了 Powershell 脚本，该脚本可用于压缩一个工作区上的任何待处理更改，然后将它们应用到另一台服务器。必须修改它以使用变更集而不是挂起的更改，但这应该不会太难完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T06:56:32.133

[这个答案](https://stackoverflow.com/a/52242/137646)解释了如何使用`tf diff`命令创建补丁文件。但是，没有内置方法可以将该补丁文件应用到另一个实例或分支。我也没有看到任何第三方工具可以这样做。

# c# - 所有表单上的图片框都不会更新

> ID：12601415
> 
> 赞同：0
> 
> 时间：2012-09-26T12:09:10.697
> 
> 标签：c#, .net, picturebox

我打开了许多表格（一次又一次相同的新表格）。它们都是图片框，应该会自动更新。但是，当我启动多个时，除了最后选择/单击/活动的表单之外，表单上的图片框不会在视觉上更新..所有代码都可以正常工作。但是，当我单击其中一个表单时，它会按原样更新。这会让它更清楚： http: [//i50.tinypic.com/2csaooh.jpg](http://i50.tinypic.com/2csaooh.jpg) 如果你仔细观察（或者我知道..）只有左边的第一个表格在更新，其他的图片框没有..如果需要任何额外信息。我会提供的。

绘制事件包含许多 e.graphics.draw...(...); 代码..就是这样..我一直在更新背景（我把背景属性..不是图像作为背景）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:01:40.043

不幸的是，`Invalidate()`仅适用于集中的控件。看来，没有很好的方法来强制重绘未聚焦的控件。

然而，这个问题可以用一个计时器来解决，虽然这很脏：

```
private void Form1_Deactivate(object sender, EventArgs e)
{
    t = new System.Threading.Timer(new System.Threading.TimerCallback(t_Tick), null, 0, 100);
}

private void Form1_Activated(object sender, EventArgs e)
{
    t.Dispose();
}

void t_Tick(object sender)
{
    pictureBox1.Invoke((Action)delegate()
    {
        pictureBox1.Update();
    });
} 
```

也许您应该考虑将所有控件添加到同一个窗口。您的屏幕截图看起来不需要多个窗口。

# database - 我应该分配给我的桌子的 PK 和 FK 是什么？

> ID：12601416
> 
> 赞同：-4
> 
> 时间：2012-09-26T12:09:26.610
> 
> 标签：database, foreign-keys, primary-key, entity-relationship, erd

一家公司为高级员工提供运输服务。有 3 个表：驾驶员、车辆、工作人员。

司机 - 执照号码 [PK] - 姓名 - 语言 - ...（等等..）

VEHICLES - 车辆 ID [PK] - 注册号 - 型号 - 颜色 - ... 等等...

STAFFS - 员工 ID [PK] - 姓名 - 职位名称 - ... 等等....

我想创建一个名为 ORGANIZE 的新表，它将分配一名司机和一辆车辆以满足员工的需求。PK和FK是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:44:06.377

我已经在你的另一个问题上写了一个更详尽的答案。
[数据库规范化](https://stackoverflow.com/questions/12946085/normalization-of-database)

如果您需要将驾驶员和车辆与工作人员匹配，则可以使用与其他三个表的 fk 关联进行三列复合 pk。您需要连接自己的逻辑来实际进行组织......这不会在数据库中完成，数据库应该只保留组织的结果。

# android - 如何在android中读取和更新xml文件？

> ID：12601423
> 
> 赞同：1
> 
> 时间：2012-09-26T12:09:41.657
> 
> 标签：android, xml, xml-parsing, xmlpullparser

这可能是一个基本问题，但我是 xml 解析的新手，这就是我需要帮助的原因。所以问题是：我只想从 android 的 res 文件夹中读取一个 xml 文件，并更新该文件中某个标签的值；那么，怎么办呢？请帮帮我。以下是 xml 文件，我想更新当前值为“moneyback”的标签“事件过滤器”的值。我搜索了很多线程，但仍然无法解决问题。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <HawkAgentPolicy xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <config>
  <installedappthreadtime>10</installedappthreadtime>
  <runningprocessthreadtime>10</runningprocessthreadtime>
  <networkconnectionsthreadtime>10</networkconnectionsthreadtime>
</config>
<policy name="DayCapturePolicy" type="capture">
 <starttime>9:00:00 AM</starttime>
 <endtime>9:00:00 PM</endtime>
 <event name="NEW_APP_INSTALLED">
  <eventFilter selectedAppName="Moneyback"/> 
   <eventParam>selectedAppName</eventParam>
  <eventParam>selectedAppVersion</eventParam>
  <eventParam>appPackageName</eventParam>
  <eventParam>appDirPath</eventParam>
</event>
<event name="NEW_PROCESS_STARTED">
  <eventFilter runningAppName="Moneyback" /> 
  <eventParam>runningAppName</eventParam>
  <eventParam>runningAppProcessId</eventParam>
  <eventParam>runningProcessName</eventParam>
</event>
<event name="INBOUND_CONNECTION">    
  <eventFilter netAppName="Moneyback"/> 
  <eventParam>netProtocol</eventParam>
  <eventParam>netRemoteIP</eventParam>
  <eventParam>netRemotePort</eventParam>
  <eventParam>netStatus</eventParam>
  <eventParam>netUID</eventParam>
  <eventParam>netAppName</eventParam>
</event>
<event name="OUTBOUND_CONNECTION">
<eventFilter netAppName="Moneyback"/> 
<eventParam>netProtocol</eventParam>
  <eventParam>netRemoteIP</eventParam>
  <eventParam>netRemotePort</eventParam>
  <eventParam>netStatus</eventParam>
  <eventParam>netUID</eventParam>
  <eventParam>netAppName</eventParam>
 </event>
 </policy>
</HawkAgentPolicy> 
```

# objective-c - 在一个应用程序 xcode 中使用多个 sqlite 数据库

> ID：12601425
> 
> 赞同：0
> 
> 时间：2012-09-26T12:09:48.593
> 
> 标签：objective-c, ios, xcode, sqlite

如何在运行时识别我的应用程序中的多个**sqlite**数据库。我正在为 iphone 制作一个测验应用程序，其中我需要 5-6 个 sqlite 数据库，一个用于测验的每个类别（主题）。帮助任何人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T12:25:14.570

使用简单的[FMDB](https://github.com/ccgus/fmdb)。

识别数据库很简单，我不明白这个问题......

```
FMDatabase *dbQuestions = [FMDatabase databaseWithPath:@"/tmp/tmpA.db"];
FMDatabase *dbAnswers   = [FMDatabase databaseWithPath:@"/tmp/tmpB.db"];
FMDatabase *dbPeople    = [FMDatabase databaseWithPath:@"/tmp/tmpC.db"];
[...]
[dbQuestions open]
[dbAnswers open]
[dbPeople open]
[...] 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:58:03.347

由于这将太长而无法作为评论发布，并且它确实以某种方式解决了您的问题，因此我再次建议您为您的应用程序使用不同的结构，因为拥有多个数据库对于像测验这样简单的事情是不切实际的。

您可以在此处找到一些数据库结构示例在数据库[中存储多项选择测验 - 确定模式](https://stackoverflow.com/questions/10082751/storing-a-multiple-choice-quiz-in-a-database-deciding-the-schema)或在此处[使用 PHP 和 MySQL 开发“测验”Web 应用程序的数据库设计](https://stackoverflow.com/questions/7102521/database-design-for-developing-quiz-web-application-using-php-and-mysql)

假设您有不同类别的简单测验，可能的替代方法是将您的类别存储在**类别**表中。

```
* Category
    - category_id (integer)
    - category_name (string/text) 
```

每个人的 id 都是唯一的。例如，您可以拥有 ID 为 1 的类别*运动*和 ID 为 2 的类别*历史*。

问题可以存储在另一个名为**Questions的表中**

```
* Questions
    - question_id (integer)
    - question_category (integer)
    - question_text (string/text)
    - question_correct_answer_id (integer) 
```

你可以有问题 1：*John Doe 是为哪支球队效力的？*. 在`question_category`字段中输入 1，因为 1 是 Sports 类别的 id。在`question_correct_answer_id`您将存储正确答案的 id （不是答案本身，只是 id）

最后但并非最不重要的一点是**答案**表。

```
* Answers
    - answer_id (integer)
    - question_id (integer)
    - answer_text (string/text) 
```

这`answer_id`是答案的 id，如果它是正确的，您可以将其存储在**Questions**`question_id`表中，并使用 a来识别问题。

然后您可以执行以下操作：

```
`SELECT * FROM Questions WHERE 'question_category' = 1` 
```

并得到所有的运动问题。对于每个问题，你可以做

```
SELECT * FROM Answers WHERE 'question_id' = 'your question's id' 
```

请注意，我的示例不一定是最佳解决方案，它只是一个基本示例，它仅使用单个数据库，但使用多个表而不是多个数据库。

我对您的建议是考虑这种替代方案，如果您认为值得，请阅读一些有关数据库的信息并设计一个更好的数据库。

祝你好运！

# c# - MDI 子项显示分配给其 MDI 父项的 ContextMenu

> ID：12601426
> 
> 赞同：2
> 
> 时间：2012-09-26T12:09:52.530
> 
> 标签：c#, winforms, mdi

我正在创建一个应用程序，其中启动应用程序时显示的主窗体是 MDI 容器。我为这个表单分配了一个上下文菜单，以便用户可以使用这个菜单打开 MDI 子级。

这工作得很好，但是当我右键单击 MDI 子窗体时，MDI 容器（主窗体）的上下文菜单打开，即使子窗体没有分配任何上下文菜单，所以我希望（并且想要）没有右键单击打开的菜单。

如何确保子项不显示父上下文菜单？

作为旁注，我在 VS2005 中工作，但我认为这与这里无关。

我只是似乎找不到选项/属性来更改它，我希望默认行为是表单仅在分配给它们时才显示上下文菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:42:40.640

不幸的是，将子窗体的 ContextMenuStrip 设置为 null 只会使其显示 MDI 父窗体的 ContextMenuStrip。hack 是将一个空的 ContextMenuStrip 分配给子表单：

```
void button1_Click(object sender, EventArgs e) {
  Form2 f2 = new Form2();
  f2.MdiParent = this;
  f2.ContextMenuStrip = new ContextMenuStrip();
  f2.Show();
} 
```

# android - 在 GridLayout 中对齐按钮

> ID：12601433
> 
> 赞同：5
> 
> 时间：2012-09-26T12:10:09.853
> 
> 标签：android, android-button, gravity, grid-layout

我的布局代码及其图形表示是：

![在此处输入图像描述](../Images/ba15c48fcebe1995dfd2b24f89288fc5.png)

这只是一个例子，我`Buttons`的应用程序中有大约 30 个`GridLayout`. 我希望我`Buttons`在网格中填充它们的整个单元格，并且网格的列应该是均匀的宽度/高度。

我似乎无法完成它，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T14:16:59.307

我没有`GridLayout`太多推荐使用它的东西，我可以推荐你的是使用`TableLayout`. 我这样说是因为您的布局`TableLayout`非常适合 ' 的范围，并且在快速浏览`GridLayout`' 的文档之后，这似乎是一个问题：

*GridLayout 不提供对权重原则的支持，如权重中定义的那样。通常，因此不可能配置 GridLayout 来在多个组件之间分配多余的空间。*

中也`GridLayout`有介绍`ICS`。

您可以在此处查看布局示例`TableLayout`：

[https://gist.github.com/3788301](https://gist.github.com/3788301)

如果您不希望表格填满整个高度，请从和中删除该`weigthSum`属性。`TableLayout``layout_weight="1"``TableRows`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-09T19:09:28.473

使用 API 级别 21+，您可以使用`layout_rowWeight`and `layout_columnWeight`：

```
 <GridLayout
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginBottom="8dp"
        android:layout_marginEnd="8dp"
        android:layout_marginStart="8dp"
        android:layout_marginTop="8dp"
        android:columnCount="2"
        android:rowCount="2"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

        <Button
            android:id="@+id/button1"
            android:layout_gravity="fill"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:text="Button" />
        <Button
            android:id="@+id/button2"
            android:layout_gravity="fill"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:text="Button" />
        <Button
            android:id="@+id/button3"
            android:layout_gravity="fill"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:text="Button" />
        <Button
            android:id="@+id/button4"
            android:layout_gravity="fill"
            android:layout_rowWeight="1"
            android:layout_columnWeight="1"
            android:text="Button" />

    </GridLayout> 
```

# hibernate - Hibernate - HQL 帮助优化查询

> ID：12601435
> 
> 赞同：0
> 
> 时间：2012-09-26T12:10:19.213
> 
> 标签：hibernate, hql

我有一个像这样的 HQL 查询：

```
Select  
... (around 40 items)...
from 
ATable a 
left outer join a.subA SubA 
left outer join a.subB SubB 
left outer join a.Names Names 
left outer join Names.Addresses Addresses 
left outer join Names.Phones Phones 
left outer join a.Roles Roles 
where 
a.aType.someType in ('...') 
and (Names.id.FKey in('...') or Names.id.FKey is null)  
and upper(a.pin) like upper('some%')  
and upper(Names.lastName) like upper('Some%')  
order by  a.pin    asc 
```

由于某种原因，这会超时，但使用 Toad 时由 hibernate 生成的查询（取自日志）需要 5 秒才能执行。我是hibernate的新手。我感谢任何帮助优化此谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T14:08:37.000

我可以建议的有两件事是：

1]避免使用'IN'子句。2] 如果没有必要，避免使用 order by。

阿米特:)

# backbone.js - Backbone.js 保存方法将模型的一些属性放在 PUT/POST 到服务器

> ID：12601436
> 
> 赞同：2
> 
> 时间：2012-09-26T12:10:19.030
> 
> 标签：backbone.js, attributes, ruby-on-rails-3.2, server-side

保存特定骨干模型时，我注意到在检查服务器上的 PUT 请求时缺少其中一个字段。我有这个模型：

```
App.Models.User = Backbone.Model.extend({

    name: "user",

    url: function() {
        u = "/users"
        if ( this.id ) {
            u += "/" + this.id;
        }
        return u;
    }
});

App.Collections.Users = Backbone.Collection.extend({
    urlRoot: "/users",
    model: App.Models.User
}); 
```

我把它保存在 View 上，如下所示：

```
App.Views.EditUserForm = Backbone.View.extend({
    events: {
        "submit": "saveUser"
    },

    saveUser: function(e) {
        e.preventDefault();
        var _id  =  this.$("#user_id").val(); 
        var data = {
            id:         ( _id !== '' ) ? _id : null,
            first_name: this.$("#user_first_name").val(),
            last_name:  this.$("#user_last_name").val(),
            email:      this.$("#user_email").val(),
            bio:        this.$("#user_bio").val()
        };

        var _this = this;
        var user  = new App.Models.User();

        // This will create or update a user 
        // record on the server
        user.save(data,{
            success: _this.handleSuccess,
            error:   _this.handleErrors
        });
    },

    handleSuccess: function(user, resp) { /* ... */ },
    handleErrors:  function(user, resp) { /* ... */ }
}); 
```

但是，当我到达服务器端（Rails）时，该`bio`字段不在请求的参数中：

```
(debugger) params[:user].keys
[ "first_name", "last_name", "email" ] 
```

该`bio`字段允许为空，但使用客户端调试器我可以看到它在`data = {...}`发送到保存方法之前在对象中有一个值。

```
> data.bio
"something, somthing, dark side" 
```

我还可以看到，当我使用集合来获取服务器上的现有对象时，该字段可用并已填充。只有 'model.save()' 方法在沿途某处删除该值。任何想法为什么？谢谢。

* * *

# 更新 -

我可以看到该`bio`字段已发送到服务器，但它不在`params[:user]`params 哈希的根目录下，而是在根目录下：

```
(debugger) ap params
{
        "id"         => "1",
        "first_name" => "John",
        "last_name"  => "Doe",
        "email"      => "john@bleh.com",
        "bio"        => "something, somthing, dark side",
        "user"       => {
                "first_name" => "John",
                "last_name"  => "Doe",
                "email"      => "john@bleh.com",
        },
        "controller" => "users",
        "action"     => "update"
} 
```

什么决定了 params[:user]* 下的内容？

*对不起，如果这更像是一个轨道问题而不是骨干问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:38:08.377

知道了！

`attr_accessible`当您更新或创建时，只有您在模型中标记的属性`ActiveRecord::Base`才会添加到嵌套模型的参数中。以前我有

```
class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :email
end 
```

因此，`params[:user]`仅包含允许批量分配的那些字段-`:first_name`和. 添加到该列表中解决了该问题，使我能够在控制器的操作中使用。`:last_name``:email``:bio``@user.update_attributes(params[:user])``update`

所以这不是 Backbone 问题，只是 Rails 配置问题。

# linux - 符号链接 - 性能下降？

> ID：12601439
> 
> 赞同：7
> 
> 时间：2012-09-26T12:10:33.570
> 
> 标签：linux, bash, unix

出于部署原因，对我来说使用符号链接稍微容易一些，但这些符号链接适用于我的所有网站核心文件和配置，每天将被访问 10 万次。

我是否更明智地将文档移动到服务器上的正确位置（稍微有问题的部署），而不是对所有内容都使用符号链接（轻微的性能下降？）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-26T12:32:03.637

我创建了一个`testfile.txt`包含 1000 行的文件`blablabla`，并为其创建了一个本地符号链接 ( `testfile.link.txt`)：

```
$ ls -n
total 12
lrwxrwxrwx 1 1000 1000    12 2012-09-26 14:09 testfile.link.txt -> testfile.txt
-rw-r--r-- 1 1000 1000 10000 2012-09-26 14:08 testfile.txt 
```

（这个`-n`开关只是用来隐藏我的超级机密用户名。:)）

然后对两个文件执行 10 轮`cat`ing 到`/dev/null`1000 次。（结果以秒为单位。）

直接访问文件：

```
$ for j in `seq 1 10`; do ( time -p ( for i in `seq 1 1000`; do cat testfile.txt >/dev/null; done ) ) 2>&1 | grep 'real'; done
real 2.32
real 2.33
real 2.33
real 2.33
real 2.33
real 2.32
real 2.32
real 2.33
real 2.32
real 2.33 
```

通过符号链接访问：

```
$ for j in `seq 1 10`; do ( time -p ( for i in `seq 1 1000`; do cat testfile.link.txt >/dev/null; done ) ) 2>&1 | grep 'real'; done
real 2.30
real 2.31
real 2.36
real 2.32
real 2.32
real 2.31
real 2.31
real 2.31
real 2.32
real 2.32 
```

在（相当旧的安装）Ubuntu上测量：

```
$ uname -srvm
Linux 2.6.32-43-generic #97-Ubuntu SMP Wed Sep 5 16:43:09 UTC 2012 i686 
```

当然，这是一个简化的示例，但基于此，我不会期望在使用符号链接时性能会下降太多。

我个人认为，使用符号链接更实用：

*   正如您所说，您的部署过程会更简单。
*   如果您在目录名称中包含某种时间戳或版本号（例如`my_web_files.v1`, ），并在指向“实时”版本`my_web_files.v2`的符号链接中使用“官方”名称（例如 ），您还可以轻松地使用版本控制和回滚。`my_web_files`如果要更改版本，只需重新链接到另一个版本化目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:12:39.533

你*测量*过这种性能下降吗？我怀疑与通过网络获取页面所花费的时间相比，它可以忽略不计。

# iphone - CGContext 绘制图像

> ID：12601450
> 
> 赞同：0
> 
> 时间：2012-09-26T12:11:01.273
> 
> 标签：iphone, objective-c, ios, cocoa-touch, cgcontext

我正在使用 CGContext 在 UIImageView 上绘制徒手线。但是当我使用

```
UIGraphicsBeginImageContext(self.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

在 Imageview 中使用 imageView 的大小绘制图像，因此将原始图像大小调整为 imageView 的大小。我再次必须将图像大小调整为其原始大小，同时这样做会失去其质量。如何直接在图像上而不是在 imageView 上绘制？此外，我必须使用 imageview 来适应视图中的图像，以便我可以在其上画线。请帮忙 ！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T13:39:30.050

您可以重新渲染带有线条的图像

```
- (UIImage *)renderImage:(UIImage *)image atSize:(CGSize)size
{
    UIGraphicsBeginImageContext(size);
    [image drawInRect:CGRectMake(0.0, 0.0, size.width, size.height)];
    //Draw your lines here
    UIImage *newImage=UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

尽管取决于您对应用程序所做的事情，这可能不是最好的方法。希望这有帮助。

# scala - sbt：添加对 scalatest 库的依赖。在哪里？

> ID：12601452
> 
> 赞同：5
> 
> 时间：2012-09-26T12:11:11.523
> 
> 标签：scala, sbt, scalatest

我使用 SBT 创建了一个 scala 项目，并使用 scalatest 编写了一些单元测试用例。但不知何故`sbt test`找不到 org.scalatest 包。

这是我的项目定义文件：

*   来源在`src/main/scala respective src/test/scala`
*   `build.sbt`：

    ```
    name := "MyProject"

    version := "0.1"

    scalaVersion := "2.9.2" 
    ```

*   `project/plugins.sbt`：

    ```
    addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0") 
    ```

*   `project/build.sbt`：

    ```
    libraryDependencies += "org.scalatest" %% "scalatest" % "1.8" % "test" 
    ```

我正在使用 SBT 0.11.3。

`sbt compile`在控制台上使用编译程序可以正常工作。此外，我在 中找到了 scalatest jar `~/.ivy2`，所以 SBT 一定已经下载了它。

但是在运行时`sbt test`，它说

```
object scalatest is not a member of package org
[error] import org.scalatest.FlatSpec
...[many errors alike] 
```

并运行`sbt eclipse`创建一个不包含 scalatest jar 的 .classpath。

我是否必须在其他地方指定测试依赖项？我应该如何添加 scalatest 库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T13:12:31.557

放入`libraryDependencies += "org.scalatest" %% "scalatest" % "1.8" % "test"`build.sbt ，*而*不是*project/build.sbt*。

# makefile - Makefile 可以从变量中获取规则的依赖关系并插入到配方中吗？

> ID：12601458
> 
> 赞同：1
> 
> 时间：2012-09-26T12:11:29.940
> 
> 标签：makefile

具体来说，我正在考虑删除剩余文件的“干净”规则。

```
files=file1 file2
clean:
    rm -f $(files)
file1: file1dependancy.o 
```

我怎样才能自动清洁`rm -f` `file1dependancy.o`，甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:43:50.237

通常，makefile 的结构如下所示：

```
RM_F  = rm -f
FILES = file1 file2

all:   ${FILES}

FILE1.o = file1dependency.o

file1: ${FILE1.o}
    ...build command mentioning ${FILE1.o}...

FILE2.o = file2.dependency.o

file2: ${FILE2.o}
    ...build command mentioning ${FILE2.o}...

clean:
    ${RM_F} ${FILE1.o} ${FILE2.o} ${FILES| 
```

根据您的版本`make`，“所有依赖项”可能有一个宏；不过，它不在[`POSIX make`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/make.html)。

# ruby-on-rails - 延迟作业的 Pidfile 丢失

> ID：12601462
> 
> 赞同：0
> 
> 时间：2012-09-26T12:11:56.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, delayed-job

我正在运行delayed_job 来运行几个任务。但由于某种原因，我的延迟作业只是停止响应。所以我正在尝试使用monit监控delayed_job。我无法找到delayed_job 的pidfile。如何找到delayed_job 的pidfile？请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:24:10.520

它应该在代码库的 tmp 目录中：`tmp/pids/delayed_job.pid`

# flash - 每次将鼠标移到按钮上时都不会抛出 MouseEvent.MOUSE_OVER

> ID：12601469
> 
> 赞同：0
> 
> 时间：2012-09-26T12:12:17.090
> 
> 标签：flash, events

我有按钮（扩展类`Sprite`）。按钮中间有一个图标（`Sprite`带有附加图标）。有时（不总是！）当鼠标进入按钮时，`MouseEvent.MOUSE_OVER`不会被抛出。当鼠标进入图标`MouseEvent.MOUSE_OVER`总是抛出。这种奇怪行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:43:44.910

我通过向 sprite 添加一个`hitClip`sprite（alpha aet 为 0）解决了这个问题`button`。正如它在[livedocs中所写](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html#event%3amouseOver)

> 每次鼠标进入显示对象容器的任何子对象区域时，都会调度 mouseOver 事件

所以要得到`MouseEvent.MOUSE_OVER`一个需要有鼠标下的东西（例如透明夹）

# c - perf 缓存事件是什么意思？

> ID：12601474
> 
> 赞同：34
> 
> 时间：2012-09-26T12:12:28.483
> 
> 标签：c, linux, perf

我试图弄清楚为什么修改后的 C 程序比未修改的对应部分运行得更快（我添加了很少的代码行来执行一些额外的工作）。在这种情况下，我怀疑“*缓存效果*”是主要的解释（指令缓存）。因此，我访问了`perf`（https://perf.wiki.kernel.org/index.php/Main_Page）分析工具，但不幸的是我无法理解其关于缓存未命中的输出的含义。

提供了几个关于缓存的事件：

```
 cache-references                                   [Hardware event]
  cache-misses                                       [Hardware event]
  L1-dcache-loads                                    [Hardware cache event]
  L1-dcache-load-misses                              [Hardware cache event]
  L1-dcache-stores                                   [Hardware cache event]
  L1-dcache-store-misses                             [Hardware cache event]
  L1-dcache-prefetches                               [Hardware cache event]
  L1-dcache-prefetch-misses                          [Hardware cache event]
  L1-icache-loads                                    [Hardware cache event]
  L1-icache-load-misses                              [Hardware cache event]
  L1-icache-prefetches                               [Hardware cache event]
  L1-icache-prefetch-misses                          [Hardware cache event]
  LLC-loads                                          [Hardware cache event]
  LLC-load-misses                                    [Hardware cache event]
  LLC-stores                                         [Hardware cache event]
  LLC-store-misses                                   [Hardware cache event]
  LLC-prefetches                                     [Hardware cache event]
  LLC-prefetch-misses                                [Hardware cache event]
  dTLB-loads                                         [Hardware cache event]
  dTLB-load-misses                                   [Hardware cache event]
  dTLB-stores                                        [Hardware cache event]
  dTLB-store-misses                                  [Hardware cache event]
  dTLB-prefetches                                    [Hardware cache event]
  dTLB-prefetch-misses                               [Hardware cache event]
  iTLB-loads                                         [Hardware cache event]
  iTLB-load-misses                                   [Hardware cache event]
  branch-loads                                       [Hardware cache event]
  branch-load-misses                                 [Hardware cache event]
  node-loads                                         [Hardware cache event]
  node-load-misses                                   [Hardware cache event]
  node-stores                                        [Hardware cache event]
  node-store-misses                                  [Hardware cache event]
  node-prefetches                                    [Hardware cache event]
  node-prefetch-misses                               [Hardware cache event] 
```

我在哪里可以找到有关这些字段的说明？cache-misses 事件总是小于其他事件。本次活动衡量什么？

如何解释 ls 的 26,760 个 L1-icache-load-misses 与以下示例中的 5,708 个缓存未命中？

```
perf stat -e L1-icache-load-misses ls
caches  caches~  out

 Performance counter stats for 'ls':

            26,760 L1-icache-load-misses                                       

       0.002816690 seconds time elapsed

perf stat -e cache-misses ls
caches  caches~  out

 Performance counter stats for 'ls':

             5,708 cache-misses                                                

       0.002822122 seconds time elapsed 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-26T12:50:31.197

一些答案：

*   `L1`是一级缓存，最小和最快的一个。`LLC`另一方面是指[缓存层次结构](http://en.wikipedia.org/wiki/CPU_cache#Multi-level_caches)的最后一级，因此表示最大但最慢的缓存。
*   `i`vs.`d`区分指令缓存和数据缓存。这种方式只拆分了L1，其他缓存在数据和指令之间共享。
*   `TLB`指[翻译后备缓冲区](http://en.wikipedia.org/wiki/Translation_lookaside_buffer)，在将虚拟地址映射到物理地址时使用的缓存。
*   不同的 TLB 计数器取决于命名地址是指指令还是某些数据。
*   对于所有数据访问，根据给定的内存位置是被读取、写入还是预取（即在稍后的某个时间检索以供读取），保持不同的计数器。
*   未命中数表示访问给定数据项但*不*存在于缓存中的频率。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-07T22:52:02.353

您似乎认为该`cache-misses`事件是所有其他类型的缓存未命中（`L1-dcache-load-misses`等等）的总和。这实际上是不正确的。

该`cache-misses`事件表示任何缓存都无法提供的内存访问次数。

我承认 perf 的文档并不是最好的。

但是，通过阅读 perf_event_open() 函数的文档（假设您已经对 CPU 和性能监控单元的工作方式有很好的了解，这显然不是一门计算机体系结构课程）可以学到很多东西：

[http://web.eece.maine.edu/~vweaver/projects/perf_events/perf_event_open.html](http://web.eece.maine.edu/~vweaver/projects/perf_events/perf_event_open.html)

例如，通过阅读可以看到`cache-misses`perf list 显示的事件对应于`PERF_COUNT_HW_CACHE_MISSES`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-02T08:28:38.120

根据[perf tutorial](https://perf.wiki.kernel.org/index.php/Tutorial)，*性能监控单元 (PMU) 事件*或*硬件事件*是指可以直接映射到 CPU 供应商的 CPU 特定事件的那些事件。但*硬件缓存事件*是指由 提供的一些硬件事件名字对象`perf`，可能映射到 CPU 提供的实际事件。对于在 Linux 终端中`perf`使用的缓存事件列表。`perf list cache`

# iphone - 如何在 iPhone/iPad 上安装/激活 syslogd

> ID：12601475
> 
> 赞同：4
> 
> 时间：2012-09-26T12:12:29.800
> 
> 标签：iphone, ios, ipad, syslog, cydia

我需要安装 Syslogd 来查看 iPhone/iPad 日志。

我正在通过 Cydia 在越狱设备上尝试这个。

我搜索了几个论坛。许多人告诉我，如果我安装崩溃报告器，那么将安装 Syslogd。那么，如何激活或启动 Syslogd？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:19:47.123

`syslogd`（“to /var/log/syslog”）可以在 Saurik 的 repo 中的 Cydia 中找到。要查看它，请检查您在 Cydia 中的设置并将模式设置为开发人员以查看所有调试软件、支持库、开发人员工具等。然后，当您安装它时，所有日志都存储在`/var/log/syslog`.

调试愉快；P！

# asp.net - 从运行时创建的按钮在运行时创建 TextBox：定义点击事件

> ID：12601479
> 
> 赞同：2
> 
> 时间：2012-09-26T12:12:41.657
> 
> 标签：asp.net, events

我有一个表单，我在其中添加带有 [+] 按钮的 TextBox，第一个文本框和按钮是在运行时创建的，因此，定义按钮的 Click 事件的代码是（或应该是）类似于：

```
AddHandler button1.Click, AddressOf ButtonPlusClick 
```

到目前为止没问题，但问题是：我需要*ButtonPlusClick()*中的 2 个参数：面板 ID 我要在其中添加文本框，因为页面有一个扩展的控件列表和最后创建的 TextBox 的序列号，以便不要在页面中重复 ID。

所以在这里我迷路了，我搜索过的所有关于代表的谈话都像：

```
Delegate Sub MySubDelegate(ByVal container As Panel, ByVal nseq As Integer)
Dim msd As MySubDelegate
msd = AddressOf ButtonPlusClick
msd.invoke(Panel1, 3) 
```

但是，嘿，我现在不是在调用，而是定义了 button1.Click 事件，它**必须调用**一个**需要参数**的函数，你能帮我或指向一些文档吗？

（最终结果将是一个类似的列表，所有这些都是由类的代码创建的）：

```
[TextBox] [+]
[TextBox] [+]
[TextBox] [+] 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:22:55.073

你可以使用一个 `Dictionary(Of String, Int32)`. 键是面板的 ID，值是已创建的计数`TextBoxes`。

然后您可以使用`FindControl(panelID`) 来获取对您的`Panel`. `Page_Load`您最迟需要从计数中重新创建文本框。从连续数字派生 ID，例如“TextBox_1”、“TextBox_2”...“TextBox_10”，其中 10 是`Value`此面板的字典中的值。

在事件处理程序中，您只需调用创建一个文本框并将 1 与字典值相加的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:28:16.650

您必须在 Page_Init 函数中从字典中分配相同的控件 ID，否则不会调用 button_click 事件。

# vb.net - 在 vb.net 中读取文本文件后删除某些字节

> ID：12601485
> 
> 赞同：2
> 
> 时间：2012-09-26T12:13:03.957
> 
> 标签：vb.net, text-files

我已将原始数据（十六进制字符）写入文本文件。我想在文本字符串 MP3 启动到 mp3 结束后检索以原始数据形式存储在此文本文件中的 mp3 信息。我已完成此操作但现在出现问题文本是否包含许多 mp3 开始和 mp3end 字符串，其中 mp3 字符可用。我的程序只是提取第一个 mp3 开始和 mp3 结束字符串之间的字符。提取此信息后，我想从文件中删除此信息，以便我的程序可以提取下一组mp3字符。有什么有效的方法吗。我正在vb.net上工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:18:34.510

那要看。如果文件格式允许将项目空白并留下空白“页面”，那么这将是最有效的选择。但是，如果您必须实际删除一个部分并将其后的所有内容向上移动，则唯一的选择是重写整个文件。

由于您在下面的评论中提到您确实需要将文件的其余部分向上移动以减小文件大小，因此您唯一的选择是覆盖整个文件。在不了解您的代码的更多细节的情况下，很难说如何最好地做到这一点，但最简单的方法看起来像这样：

```
Dim bytes() As Byte = File.ReadAllBytes(filePath)
' Modify and resize the bytes array
File.WriteAllBytes(filePath) 
```

但是，如果文件非常大，您可能不想一次将整个文件全部加载到内存中。在这种情况下，最好一次读取一个段，然后在循环中将每个段附加到一个单独的新文件中。然后，当您完成将所有所需数据复制到新文件时，您需要重命名它以覆盖原始文件。例如，像这样：

```
Using input As New FileStream(inputFilePath, FileMode.Open)
    Using output As New FileStream(tempFilePath, FileMode.Create)
        Dim bytes(lengthOfMp3Record) As Byte
        Dim totalRead As Integer = 0
        Do
            totalRead = input.Read(bytes, 0, bytes.Length)
            If (totalRead <> 0) AndAlso (KeepMp3record(bytes)) Then
                output.Write(bytes, 0, totalRead)
            End If
        Loop While totalRead <> 0
    End Using
End Using
File.Delete(inputFilePath)
File.Move(tempFilePath, inputFilePath) 
```

# java - 具有约束访问问题的通用类

> ID：12601489
> 
> 赞同：9
> 
> 时间：2012-09-26T12:13:30.733
> 
> 标签：java, android

这是一个一般的JAVA问题。在android中，有一个界面[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)：

[这是官方文档](http://developer.android.com/reference/android/os/Parcelable.html)中的一个示例：

```
 public class MyParcelable implements Parcelable {
     private int mData;

     public int describeContents() {
         return 0;
     }

     public void writeToParcel(Parcel out, int flags) {
         out.writeInt(mData);
     }

     public static final Parcelable.Creator<MyParcelable> CREATOR
             = new Parcelable.Creator<MyParcelable>() {
         public MyParcelable createFromParcel(Parcel in) {
             return new MyParcelable(in);
         }

         public MyParcelable[] newArray(int size) {
             return new MyParcelable[size];
         }
     };

     private MyParcelable(Parcel in) {
         mData = in.readInt();
     }
 } 
```

我们需要实现 2 个功能`describeContents()`和`writeToParcel`.

***（问题）*** 除此之外，我们还需要将`Parcelable.Creator<T>`接口实现为一个名为 CREATOR 的静态字段。

一切实际上都是直截了当的。现在我想创建一个具有 Parcelable 类类型的通用类：

```
public class ShushContainer<T extends Parcelable> implements Parcelable 
```

我能够实现 Parcelable。我可以调用`T`'s`writeToParcel`函数。但是，我无法访问静态 CREATOR 字段。

```
public class ShushContainer<T extends Parcelable> implements Parcelable {
    Vector<T> items;
    String someField;

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(someField);
        dest.writeInt(items.size());
        for(int i=0;i<items.size();i++)
            items.get(i).writeToParcel(dest, flags);
    }

    public ShushContainer(Parcel in) {
        someField = in.readString();
        int size = in.readInt();
        for(int i=0;i<size;i++)
            //this does not work
            items.add(T.CREATOR.createFromParcel(in));
    }

    public static final Parcelable.Creator<ShushContainer> CREATOR = new Parcelable.Creator<ShushContainer>() {
        public ShushContainer createFromParcel(Parcel in) {
            return new ShushContainer(in);
        }

        public ShushContainer[] newArray(int size) {
            return new ShushContainer[size];
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:52:44.377

而不是 `<T extends Parcelable>`您需要`<T extends ShushContainer<T> & Parcelable>`这种方式，而是指定它，`T`以便`ShushContainer`您可以访问方法和变量。

```
public class ShushContainer<T extends ShushContainer<T> & Parcelable> 
implements Parcelable 
```

这是使用的示例`Serializable`

```
class Sample<T extends Sample<T> & Serializable> implements Serializable {

  public static int CONST = 0;

   public void foo()
   {
     T.CONST = 5;
   }
} 
```

**更新**

如果我理解正确，还有另一个类实现`Parcelable`了`CREATOR` 你正在尝试静态变量的动态多态性，这是不可能的。

显示它如何失败的示例

```
public class Base {
    public static int count = 10;
}

public class Child extends Base {
    public static int count = 20;
}

class Sample<T extends Base> {
    T t = null;
    public void printCount() {
        System.out.println(T.count);
    }
    public Sample(T t) {
        this.t = t;
    }

    public static void main(String[] args) {
        Sample<Child> sample = new Sample<Child>(new Child());
        Sample<Base> sample1 = new Sample<Base>(new Base());
        sample.printCount();//Child value printed as 10
        sample1.printCount();//Same for parent value printed as  10
    }

} 
```

该程序失败，因为静态字段绑定到类而不是实例，因此有两个单独`count`的一个用于访问值，`Base`一个用于访问，则它始终为 10。`Child``Base`

**您可以使用反射来检查`CREATOR`字段是否存在并访问它。如果没有对象或类对象，这将是不可能的。**

或者您可以使用[TypeToken执行以下操作](http://www.java2s.com/Open-Source/Android/UnTagged/smartshop-project/com/google/gson/reflect/TypeToken.java.htm)

```
class Sample<T extends Serializable> implements Serializable {

    public int abc = 0;
    public void foo() {
    }
    public static void main(String[] args) throws SecurityException, NoSuchFieldException {
        TypeToken<Sample<Integer>> token = new TypeToken<Sample<Integer>>() {
        };
        Class<?> t = token.getRawType();
        Field field = t.getDeclaredField("abc");
        field.setAccessible(true);
        System.out.println(field.getName());

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T08:51:23.903

这并不能回答您关于如何访问静态 CREATOR 属性的问题，但是您不需要访问此属性实现 Parcelable。请参见下面的示例：

```
public class TestModel<T extends Parcelable> implements Parcelable {

private List<T> items;
private String someField;

public List<T> items() {
    return items;
}

public void setItems(List<T> newValue) {
    items = newValue;
}

public String someField() {
    return someField;
}

public void setSomeField(String newValue) {
    someField = newValue;
}

//region: Parcelable implementation

public TestModel(Parcel in) {
    someField = in.readString();

    int size = in.readInt();
    if (size == 0) {
        items = null;
    }

    else {

        Class<?> type = (Class<?>) in.readSerializable();

        items = new ArrayList<>(size);
        in.readList(items, type.getClassLoader());
    }
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(someField);

    if (items == null || items.size() == 0)
        dest.writeInt(0);

    else {
        dest.writeInt(items.size());

        final Class<?> objectsType = items.get(0).getClass();
        dest.writeSerializable(objectsType);

        dest.writeList(items);
    }

    dest.writeInt(items.size());
    for(int i=0;i<items.size();i++)
        items.get(i).writeToParcel(dest, flags);
}

public static final Parcelable.Creator<TestModel> CREATOR = new Parcelable.Creator<TestModel>() {
    public TestModel createFromParcel(Parcel in) {
        return new TestModel(in);
    }

    public TestModel[] newArray(int size) {
        return new TestModel[size];
    }
};

//endregion
} 
```

# android - Android + PhoneGap 拦截 URL（相当于 iOS shouldStartLoadWithRequest）

> ID：12601491
> 
> 赞同：5
> 
> 时间：2012-09-26T12:13:33.990
> 
> 标签：android, cordova

My PhoneGap 封装的、本地托管的 Sencha Touch 应用程序制作了一些虚假的 URL 回调来与本机封装器通信。（即。`app_callback://do_function_a`）。

在iOS中，我实现了以下

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

检查`app_callback://`URL，调用本机函数并返回 NO（以停止实际发生的导航）。

我可以在 Android 中实现一个等价物吗？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:58:58.073

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.setBooleanProperty("showTitle", true);
    super.onCreate(savedInstanceState);

    //creates super.appView and calls setContentView(root) in DroidGap.java
    init();

    this.appView.clearCache(true);
    this.appView.clearHistory();  
    this.appView.setWebViewClient(new CordovaWebViewClient(this, this.appView) {

        @Override
        public WebResourceResponse shouldInterceptRequest(WebView view, String url) {

            Log.d("DEBUG", "Should intercept request" +url);
            //Implement your code
            return super.shouldInterceptRequest(view, url);
        }

        @Override
        public void onLoadResource(WebView view, String url) {
            Log.d("DEBUG", "onLoadResource" +url);
            //Implement your code
            super.onLoadResource(view, url);
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            Log.d("DEBUG", "On page finished "+url);
            //Implement your code
            super.onPageFinished(view, url);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            Log.d("DEBUG", "should override url loading "+url);
            //Implement your code
            return super.shouldOverrideUrlLoading(view, url);

        }

    });super.loadUrl("file:///android_asset/www/index.html");} 
```

这适用于 API 版本 9-17 重要的是还添加了 onLoadResource

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T15:04:18.323

```
public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setIntegerProperty("loadUrlTimeoutValue", 60000);

        this.init();

        this.appView.clearCache(true);
        this.appView.clearHistory();  

        this.appView.setWebViewClient(new CordovaWebViewClient(this, this.appView) {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                if(url.contains("app://")) {
                     url = url.replace("app://", "");
                     Log.d("DEBUG", url);

                     // DO STUFF

                     return true;
                } else {
                 //view.loadUrl(url);
                 return super.shouldOverrideUrlLoading(view, url);
                }

            }

        });

        super.loadUrl("file:///android_asset/www/index.html");
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:04:26.583

是的，[`shouldOverrideUrlLoading`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)的`WebViewClient`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-03T22:40:37.923

由于这是“phonegap android intercept url”出现的第一个搜索结果，并且我遇到了同样的问题，我想我会添加一个更新的答案。我希望使用“tel:01234567890”之类的 URL 启动拨号程序。在 iOS 上，我使用了 shouldStartLoadWithRequest，效果很好。在 Android 上，我需要找到一个替代方案，事实证明，最新的 PhoneGap 内置了一个功能。

在 config.xml 文件中，您可以并且应该定义访问来源，以说明哪些 URL 模式可以在您的应用程序中工作。这是一项安全功能，但您也可以指定将在外部应用程序中启动的 URL 模式。例如，如果您的应用程序向 yourdomain.com 发出 JSON 请求，那么您可能会有如下条目：

```
<access origin="http://www.yourdomain.com/*" />
<access origin="https://www.yourdomain.com/*" />
<access origin="tel:*" launch-external="yes" />
<access origin="http:*" launch-external="yes" />
<access origin="https:*" launch-external="yes" /> 
```

当在 WebView 中访问一个 URL 时，Cordova 将首先检查是否有任何内部规则匹配，然后检查是否有任何外部规则匹配。如果没有任何内部规则匹配，但有一个外部规则匹配，则 URL 在 Intent 中启动。

这对我来说非常有用，但是如果您需要更多定制的东西，我发现处理它的代码在 CordovaUriHelper.java 中的函数 shouldOverrideUrlLoading 中。因此，如果您想稍微自定义一下，您可以做任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T10:49:00.720

实际上 shouldOverrideUrl 加载不太可能工作。相反，对于 SDK>=11 的 android，您应该使用 shouldInterceptRequest。

[webview应该拦截请求示例](https://stackoverflow.com/questions/8273991/webview-shouldinterceptrequest-example)

# uiwebview - iOS 应用程序会自动打开 Safari，其中包含从应用程序访问的最后一个站点的 url

> ID：12601493
> 
> 赞同：0
> 
> 时间：2012-09-26T12:13:38.890
> 
> 标签：uiwebview, safari, uiwebviewdelegate

我在我的 iOS 应用程序中使用 UIWebView 并且我正在显示一个我添加到实际项目中的网络应用程序。在**shouldStartLoadWithRequest**内部，我正在处理对链接的点击（我在同一个 UIWebView 中打开的本地文件，以及我在 Safari 中打开的 Web 链接）。

一切正常，除了一个特定的网络链接。当应用程序使用该 url 打开 Safari 时，当我关闭 Safari 并返回应用程序时，我会再次自动重定向到 Safari，并显示相同的网站。

奇怪的是，**没有**调用 View Lifecycle 方法，也没有调用 UIWebViewDelegate 方法。我不知道如何防止这种行为。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:37:06.270

通过在 ApplicationDidBecomeActive 上注册通知来解决。我把这个

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didBecomeActive:) name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

进入 (void)viewDidLoad 方法，然后编写通过选择器调用的处理函数 (didBecomeActive)

就是这样。

# hibernate - Hibernate 不支持 Oracle 的 TIMESTAMPDIFF

> ID：12601496
> 
> 赞同：1
> 
> 时间：2012-09-26T12:13:45.470
> 
> 标签：hibernate, jpa-2.0

Hibernate 不支持 Oracle 的 TIMESTAMPDIFF

它在 Oracle 中出现错误，但在 MySql 中运行良好

```
**Query** :select app from Application app where app.id not in ( select aml.referenceId from AuditMailLog aml  where app.id = aml.referenceId and aml.event = 'application_expiry_reminder' and aml.referenceTableName = 'application' ) and TIMESTAMPDIFF(DAY, created_date, CURRENT_TIMESTAMP()) >= 30 and status in (0,1) 
```

谁能告诉我有什么替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-17T14:03:38.763

这是因为 Oracle 本身不支持该`timestampdiff()`功能。

`timestampdiff()`在许多数据库中都可用，但在 Oracle、DB2 和 Postgres 中都不可用。

甚至[JDBC 规范](https://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/jdbc4.1-fr-spec.pdf?AuthParam=1558082951_88ee3b4bcf95b0e57a3019fb1a77d342)也列出`timestampdiff()`了它强烈主张 JDBC 驱动程序应通过转义语法`{fn timestampdiff(x,y,z)}`支持的功能，但不幸的是，对这些功能的支持实际上非常不完整。

在 Oracle 中解决此问题的方法是使用`-`运算符减去时间戳，生成一个间隔，然后使用该`extract()`函数将其字段分开。

这里有更多信息：

[https://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#BABBICGH](https://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#BABBICGH)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T23:30:03.273

您可以`DetachedCriteria`用于查询和`Restrictions.sqlRestriction`SQL 函数。

# c# - 部署 TFS 构建时 app.config 未重命名

> ID：12601497
> 
> 赞同：3
> 
> 时间：2012-09-26T12:13:48.077
> 
> 标签：c#, .net, deployment, msbuild, tfsbuild

该`app.config`文件通常`yourAppName.exe.config`在构建期间重命名为类似的东西。我有一个使用通常的 TFS 构建部署到服务器的解决方案。运行应用程序后，我在第一次调用`ConfigurationManager`. 登录服务器并检查文件，我看到`app.config`没有重命名，这导致了异常。重命名文件后，应用程序工作正常。

因此，我想知道为什么文件没有被重命名，以及是否可以以某种方式修复。

UPD：`app.config`文件已`Build Action`设置为`None`并`Copy to Output Directory`设置为`Do not copy`.

# mysql - mysql订单号/字符组合

> ID：12601498
> 
> 赞同：1
> 
> 时间：2012-09-26T12:13:55.703
> 
> 标签：mysql, sql-order-by

我有一个包含以下值的产品名称字段的 SQL 表：

```
10b
 9b
 8b
 7b
 6b
 5b
 4b
 3b
 2b
 1b 
```

这些需要从 1 到 10 排序，但由于某种原因，当我使用以下顺序选择时：`ORDER BY title ASC`，然后我得到：

```
10b
1b
2b
3b
4b 
```

ETC..

但是那个 10 需要在 9 之后，而不是在 1 之前，这怎么可能？

谢谢，亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:26:37.647

```
 SELECT 
          CAST(title AS UNSIGNED INTEGER) AS ORDER_FIELD
          ,title
    ORDER BY
          ORDER_FIELD ASC 
```

# css - Internet Explorer 和 css 背景图像不起作用

> ID：12601505
> 
> 赞同：2
> 
> 时间：2012-09-26T12:14:35.813
> 
> 标签：css, internet-explorer, background-image

> **可能重复：**
> [在 IE 6 和 IE 7 中推出的文本框背景图像](https://stackoverflow.com/questions/6740240/textbox-background-image-pushing-out-in-ie-6-ie-7)

我有一些在 Firefox、Chrome 和其他浏览器中运行良好的 CSS，但在 IE 中无法呈现相同的效果。

我在输入字段上使用这个 CSS，它在所有浏览器中都能完美显示——直到我在字段中写入。在 Internet Explorer 中，当我写到字段末尾时，背景会重复。这是我的代码：

```
.web_contact_text
{
position:relative;
padding-left:10px;
padding-right:10px;
width:244px;
height:65px;
line-height:65px;
margin-left:auto;
margin-right:auto;
margin-bottom:-3px;
left:10px;
background:transparent;
background-image:url("imagenes/contactar/campo_back_text.png");
border:0px solid;
font-family:Arial;
font-size:18px;
color:#000000;
cursor:pointer;
cursor:hand;
}

<input type="text" name="contactar_nombre" class="web_contact_text" value="Insertar Nombre" title="Insertar Nombre" onclick="this.value=''"> 
```

**坏的**

![坏版本（IE）](../Images/1e21a3e2327b681fdff7f08981f35e01.png)

**其他棕色也可以**

![好版本（其他浏览器）](../Images/d612b63ec583bce8f4c69b397e8b24cb.png)

问题在于背景图像，当您使用输入字段，文本等时，当您写入更多此输入字段的大小时，图像用作背景重复，这件事只发生在 Internet Explorer 中，当您写入更多时不尊重背景并重复这一切 不修复背景 不尊重

[http://i40.tinypic.com/4vs187.png](http://i40.tinypic.com/4vs187.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:21:02.533

尝试添加：

```
background-repeat:no-repeat; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:23:47.107

```
.web_contact_text 
{
  background: url(filename.jpg);
  position: relative;
} 
```

有时这不起作用，因此另一种解决方案是为具有背景图像的元素分配宽度或高度。您可能不想指定高度或宽度，因此解决方案是为 Internet Explorer 指定 1% 的高度。因为 IE 将高度解释为最小高度，所以这个 CSS 规则不会影响外观：

```
.web_contact_text
{
  background: url(filename.jpg);
  height: 1%;
}

html>body .web_contact_text 
{
  height: auto;
} 
```

CSS 命令被`height: 1%`CSS 命令取消`height: auto`。Internet Explorer 不理解`html>body`，因此通过在第二个 CSS 规则前面插入这个，整个 CSS 规则将被 IE 忽略。

**来源：** [链接](http://www.webcredible.co.uk/user-friendly-resources/css/internet-explorer.shtml)

# php - 使用 PHP PDO 显示 mysql 选择语句

> ID：12601507
> 
> 赞同：0
> 
> 时间：2012-09-26T12:14:38.770
> 
> 标签：php, mysql, pdo, fetch

新手的问题:-)

我正在尝试将我的 MySQL 查询语法转换为 PDO，但在开始时遇到了一些问题。

我的页面中有一个名为 dbc.php 的包含文件。包含代码：

```
define ("DB_HOST", "localhost"); // set database host
define ("DB_USER", "dbuser"); // set database user
define ("DB_PASS","dbpass"); // set database password
define ("DB_NAME","dbname"); // set database name

$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");
$db = mysql_select_db(DB_NAME, $link) or die("Couldn't select database"); 
```

我的页面代码是：

```
<?php
include 'dbc.php';
page_protect();

function get_users($db) {   
$getusers = $db->query('SELECT employeeid, fullname FROM Persons order by fullname asc');
}

?> 
```

我想使用以下代码显示表格输出：

```
<table>
    <tr>
        <th> Full Name</th>
    </tr>
    <?                      
        while($row = $getusers->fetch(PDO::FETCH_ASSOC)) 
        {
    ?>
    <tr>
        <td>
        <?
        echo $row['fullname'];
        ?>
        </td>
    </tr>
        <?
        }
        ?>
</table> 
```

这当前输出错误：

```
Fatal error: Call to a member function fetch() on a non-object in /home/she/public_html/versionfour/people.php on line 170 
```

其中第 170 行是我的“while($row = $getusers->fetch(PDO::FETCH_ASSOC))”语句。

我知道我在这里遗漏了一些简单的东西，可能是因为还没有完全理解 PDO。

任何帮助表示赞赏。

谢谢和问候， R

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:18:43.833

您的页面代码`$db`在不是时将其视为 PDO 对象。您的设置必须包含一行`$db = new PDO('CONNECTION STRING HERE');`（请参阅[文档](http://php.net/manual/en/pdo.construct.php)以找出您的数据库类型的连接字符串；您没有提及这是 mysql、mssql 还是其他），而不是`mysql_connect`调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:21:46.923

您遇到的这个问题与“$getUsers”变量的**范围有关。**由于该函数不返回其值，HTML 文件无法访问它，并且 fetch() 方法试图在未定义的值上调用，因此错误中的“非对象”部分。

```
<?php
  /** Include the db file which should define a connection as so
  $db = new PDO('dblib:host=$hostname;dbname=$dbName', $user, $pass); etc
  **/
  include 'dbc.php';

  page_protect();

  function get_users($db) 
  {   
    $result = $db->query("SELECT employeeid, fullname FROM Persons order by fullname asc");
    return $result;
  }
  $users = get_users($db);

  /** $users->fetch() can now be used **/

?> 
```

您还应该考虑一些错误检查以确保返回的 db 结果实际上是 PDO 结果，否则您可能仍然会遇到此问题。

# magento - 登录后如何重定向到特定页面，该页面取决于在magento中单击登录的页面？

> ID：12601517
> 
> 赞同：2
> 
> 时间：2012-09-26T12:15:07.060
> 
> 标签：magento

登录后如何重定向到取决于在magento中单击登录的页面的特定页面？我知道重定向发生在`AccountController.php`. 但是如何从客户登录的地方获取页面的链接。我有两个不同的登录页面。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T13:02:38.520

这实际上很容易。您所要做的就是在您正在从中进行*Log In*的页面上的某处插入下一个代码。

```
Mage::getSingleton('customer/session')->setBeforeAuthUrl(Mage::getUrl('*/*/*')); 
```

它的作用 - 它将变量设置为**客户**会话，该会话包含引荐页面的 url。`AccountController`如果设置了变量，将在登录后将您送回该页面。

## 更新

只是想我可能需要编辑帖子，因为信息不完整。因此，正如我前段时间所了解的，实际上有 2 个会话密钥来管理登录后“返回/重定向”的逻辑：

*   `before_auth_url`：这应该设置为页面，您希望您的用户看到，如果他的登录名/密码没有通过验证
*   `after_auth_url`：这是您希望您的用户在成功登录后被重定向到的网址

现在上面的解决方案起作用了，因为 Magento 自动设置`after_auth_url`=`before_auth_url`如果前者没有设置。

**这是一个简单的示例**：您在 Checkout 上有登录表单。因此，您希望您的用户在登录后被重定向回 Checkout。**但**您不希望您的用户在未能输入有效凭据时被重定向回 Checkout。而不是您希望他们留在登录页面上，以便他们能够请求忘记密码电子邮件或重新注册。一旦他们能够登录，您希望他们回到 Checkout。

尽管该用例听起来很复杂，但它实际上很容易实现，并且在 Magento Checkout 中还没有完成。所以这里是你需要设置的：

```
Mage::getSingleton('customer/session')
    ->setBeforeAuthUrl(Mage::getUrl('customer/account/login'));
Mage::getSingleton('customer/session')->setAfterAuthUrl(Mage::getUrl('*/*/*')); 
```

这就是所有人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T12:06:33.703

请也检查一下。我想这就是你想要的。（MAGENTO 1.7）

登录到 Magento 管理员。

转到系统 -> 配置 -> 客户配置 -> 登录选项。

在下拉菜单中，可以选择登录后将客户重定向到何处。

即在登录或不登录后将客户重定向到帐户仪表板。

# c++ - QML 在 Click 上更改视图

> ID：12601520
> 
> 赞同：14
> 
> 时间：2012-09-26T12:15:13.330
> 
> 标签：c++, qt, qml

我正在和我的团队一起做一个项目。我的工作是为嵌入式系统创建一个带有 QML 和 C++ 的 Gui。

我为每个查看一个 qml 文件。

但现在我想在它们之间导航。这意味着当我单击按钮时，视图应该切换。每个视图都有一个后退按钮，所以我可以回到我的主视图。

这在qml中可能吗？如果不是我必须用 C++ 解决它

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T13:04:45.650

您可以创建一个派生自`QDeclarativeView`C++ 的类并使用：

```
void setSource ( const QUrl & url ) 
```

更改当前显示的 qml 文件。当单击按钮时，您可以多次调用此方法。

* * *

还有一个仅使用 QML 的解决方案。看一下[Loader](http://doc.qt.io/qt-5/qml-qtquick-loader.html)元素：

```
 import QtQuick 1.0
 Item {
   width: 200; height: 200

   Loader { id: pageLoader }

   MouseArea {
     anchors.fill: parent
     onClicked: pageLoader.source = "Page1.qml"
   }
 } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-27T10:27:13.967

另一种选择是拥有一个主 qml，您可以在其中实例化这些 qml 视图，并使用状态在它们之间进行更改。

```
Main {
  View1{id:viewid1}
  View2{id:viewid2}
  View3{id:viewid3}
  states: [
    State {
        name: ""
    },
    State {
        name: "view1"
        PropertyChanges {target: viewid1; state: "focused"}
    },
    State {
        name: "view2"
        PropertyChanges {target: viewid2; state: "focused"}
     ...
    }
  ]
} 
```

这些选项与已经提出的选项之间的区别在于，这个选项是永久性的，而另一个选项每次都会向您的 QML 收费（这意味着解析和实例化......）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-17T17:02:26.593

再举一个例子

```
import QtQuick 2.1
import QtQuick.Controls 1.1
import QtQuick.Window 2.1

ApplicationWindow {
    title: qsTr("My super app")
    width: 640
    height: 480

    Button {
        id: settingsButton
        x: 370
        y: 0
        text: qsTr("Settings")
        /* just change `visible` property by click */
        onClicked: {
            statusView.visible     = false
            settingsView.visible   = true
        }
    }

    Button {
        id: statusButton
        x: 171
        y: 0
        text: "Status"
        /* toggle */
        onClicked: {
            statusView.visible     = true
            settingsView.visible   = false
        }
    }

    Item {
        /* use id for access */
        id: statusView
        x: 0
        y: 50
        width: 640
        height: 430
        /* visible: true */

        Text {
            anchors.centerIn: parent
            text: "status"
        }
    }

    Item {
        id: settingsView
        x: 0
        y: 50
        width: 640
        height: 430
        /* invisible */
        visible: false

        Text {
            anchors.centerIn: parent
            text: "settings"
        }
    }
} 
```

# r - 使用列表中的数据创建填充等高线图

> ID：12601522
> 
> 赞同：5
> 
> 时间：2012-09-26T12:15:24.033
> 
> 标签：r, list, ggplot2, contour

我有一个由 .csv 文件中的 3 列组成的数据集。前 2 列是地图坐标，第三列是在相应地图坐标处钻孔中发现的锌百分比。我想创建一个等高线图来显示锌浓度随距离的变化。我已经能够找到使用矩阵形式的数据的所有代码示例，而我的则在列表中。我已经尝试了几种不同的方法来绘制我在下面显示的，大多数方法都会给我错误消息，如“找不到对象 x”，我认为这与我的数据布局有关。有谁知道如何做到这一点？我在下面添加了一个类似的数据集。感谢您提前提供任何帮助。冬青

数据集：

```
Statsrep <- structure(list(X = c(156000L, 156010L, 156421L, 156450L, 156500L, 156700L, 158420L, 158646L, 158970L, 159050L, 159050L, 159130L, 159155L), Y = c(143630, 143980, 147260, 145000, 146000, 142800, 146700, 145207, 147170, 145200, 144800, 147815, 145890), Zn = c(2, 8, 4, 0, 3, 0, 2, 7, 12, 0, 4, 19, 0)), .Names = c("X", "Y", "Zn"), row.names = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L), class = "data.frame")
Statsrep 
```

代码：

```
library(ggplot2)
Grade <- read.csv(file="filename.csv", header=TRUE, sep=",")
ggplot(Grade, aes(x$x="X", y$y="Y", z$z="Zn")) +
stat_contour()

library(lattice)
Grade <- read.csv(file="filename.csv", header=TRUE, sep=",")
levelplot(Grade ~x*y, data = Zn,
xlab = "Eastings", ylab = "Northings",
col.regions = terrain.colours)

Grade <- read.csv(file="filename.csv", header=TRUE, sep=",")
x$x <- X
y$y <- Y
z$z <- Zn
filled.contour(x$x, y$y, z$z, color = terrain.colours,
xlab = "Eastings", ylab = "Northings"),
plot.axes = {axis(1, seq(156000, 165000, by=1000)); axis(2, seq(142000, 150000, by=1000))},
key.title = title(main="Zn content\n(percent)"),
key.axes= axis(4, seq(0, 20, by = 2))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T12:20:19.773

使用 ggplot2，您可以使用示例数据集创建等高线图：

```
ggplot(Statsrep, aes(x=X, y=Y, z=Zn)) + 
    geom_density2d() 
```

给予

![在此处输入图像描述](../Images/6319ad9c9b6896d2a559b9b13e3a829e.png)

你的代码有几个问题`ggplot2`。特别是，在您设置美学的地方：

```
aes(x$x="X", y$y="Y", z$z="Zn") 
```

# android - 如何更改位图的颜色并保留位图中的阴影？

> ID：12601525
> 
> 赞同：5
> 
> 时间：2012-09-26T12:15:28.920
> 
> 标签：android, bitmap, paint, colormatrix

我正在一个android项目中工作，我必须改变墙壁的颜色。例如，如果我拍摄有角落的墙壁的照片并选择一些颜色，比如蓝色。墙壁的颜色应该以这样的方式变化，使墙壁看起来好像是用这种颜色粉刷的。我的意思是说改变颜色后应该保留墙角的阴影。墙不应该看起来像画成扁平的矩形。

请让我知道如何做到这一点。

提前致谢。问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:18:56.460

试试下面的链接

[如何在android中更改位图图像颜色？](https://stackoverflow.com/questions/5699810/how-to-change-bitmap-image-color-in-android)

或者

[http://www.codeproject.com/Articles/17162/Fast-Color-Depth-Change-for-Bitmaps](http://www.codeproject.com/Articles/17162/Fast-Color-Depth-Change-for-Bitmaps)

或者

[如何更改位图android中某些像素的颜色](https://stackoverflow.com/questions/5916216/how-to-change-the-color-of-certain-pixels-in-bitmap-android)

这可能对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T14:00:54.380

这是我为完成它所做的事情：

```
public static Bitmap changeImageColor(Bitmap srcBmp, int dstColor) {

    int width = srcBmp.getWidth();
    int height = srcBmp.getHeight();

    float srcHSV[] = new float[3];
    float dstHSV[] = new float[3];

    Bitmap dstBitmap = Bitmap.createBitmap(width, height, Config.RGB_565);

    for (int row = 0; row < height; row++) {
        for (int col = 0; col < width; col++) {
            Color.colorToHSV(srcBmp.getPixel(col, row), srcHSV);
            Color.colorToHSV(dstColor, dstHSV);

            // If it area to be painted set only value of original image
            dstHSV[2] = srcHSV[2];  // value

            dstBitmap.setPixel(col, row, Color.HSVToColor(dstHSV));
        }
    }

    return dstBitmap;
} 
```

# eclipse-plugin - 在哪里可以找到 p2 存储库规范？

> ID：12601526
> 
> 赞同：7
> 
> 时间：2012-09-26T12:15:35.637
> 
> 标签：eclipse-plugin, p2

我尝试左右搜索，但找不到 Eclipse 正在使用的 p2 存储库格式的规范。

我有兴趣阅读 p2 元数据（`content.xml/jar`和`artifacts.xml/jar`），我想知道它们的语法、存储库布局（复合与简单等）

当然，我可以通过查看一些现有的存​​储库来对此进行逆向工程，但我想知道是否有文档详细描述了这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T21:56:12.330

这些文件的格式不被视为 API，因此没有规范。这些实际上只是 p2 存储库的一种格式，如果您愿意，可以插入自己的格式。存储库格式的唯一 API 是 IMetadataRepository 和 IArtifactRepository 的实现。

如果您想处理这些文件，我建议加载存储库（使用 IMetadataRepositoryManager 和 IArtifactRepositoryManager）并使用这些接口公开的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T12:13:15.123

是的，没有 OSGi，p2 实际上是无法使用的。但是，如果您需要使用 p2 API 的小型命令行应用程序示例，我建议您查看[p2diff](https://github.com/irbull/p2diff)。您可能还会发现以下链接很有趣：[Query Language for p2](https://wiki.eclipse.org/Equinox/p2/Query_Language_for_p2)。如果您真的坚决反对使用 Equinox，您可以尝试查看`org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryIO.Parser`-`org.eclipse.equinox.internal.p2.artifact.repository.simple.SimpleArtifactRepositoryIO.Parser`毕竟它只是 XML（尽管很复杂）。

# spring - 如何将spring项目切换到maven

> ID：12601527
> 
> 赞同：0
> 
> 时间：2012-09-26T12:15:50.743
> 
> 标签：spring, maven

我想将我的 java spring 项目切换到 maven 并从简单的结构开始。我已经创建了原型项目并在主包中添加了带有 Service.java 的子文件夹。我描述了依赖关系，但得到一个错误：

maven 找不到工件 org.springframework:spring:jar:3.1.1 i central (http://repo.maven.apache.org/maven2)

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.home.springtraining</groupId><artifactId>SpringTrainingTemplate</artifactId>
 <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>
  <name>SpringTrainingTemplate</name>
  <url>http://maven.apache.org</url>
  <properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
  <dependencies>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring</artifactId>
    <version>3.1.1</version>
</dependency>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency> 
```

你知道为什么我不能下载这个包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:18:16.607

您的版本和工件 ID 错误，它们应该是：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

请注意，自 (AFAIR) Spring 3.0 以来，不再有单一的-`spring.jar`您必须包括`spring-core.jar`,和任何您还需要的东西。[您可以在Maven 存储库](http://repo1.maven.org/maven2/org/springframework/)中找到所有这些。`spring-context.jar``spring-beans.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:21:24.530

从 3.x 发布系列开始，Spring 不再作为一个单一的、包含所有内容的 jar 分发。您需要包含您实际需要的子库。您可以在[此处](http://mvnrepository.com/artifact/org.springframework)了解 Maven 中央存储库中可用的内容。

# java - 在 J2ME 中的 Session 中存储参数

> ID：12601528
> 
> 赞同：0
> 
> 时间：2012-09-26T12:16:01.040
> 
> 标签：java, java-me

我有一个 J2ME 应用程序。现在我必须在会话中存储登录表单的参数，以便它可以在另一个表单中使用。那么，如何在 J2me 中实现会话。我正在使用 Http POST/GET 来连接 WebServices。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:24:47.723

在 Java ME 中没有会话变量的概念。所以按照面向对象的规则，不是内置的方法，你需要创建**自己的方法**。

让我指导您，您可以通过以下两种方式实现它（根据我的经验，可能还有更多实现方式）

*   创建 Getter/Setter 方法
*   创建公共静态方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:12:02.140

您将需要使用 HttpConnection 请求属性。[http://www.javaworld.com/javaworld/jw-04-2002/jw-0426-wireless.html](http://www.javaworld.com/javaworld/jw-04-2002/jw-0426-wireless.html)上有一篇很好的文章

作者创建了一个 RMSCookieConnector 和一个 HttpRMSCookieConnection 来将 cookie 信息存储在 RMS 中。

# fluent-nhibernate-mapping - 适用于 SQL2008 日期和时间类型的 Fluent nHibernate CustomType

> ID：12601529
> 
> 赞同：1
> 
> 时间：2012-09-26T12:16:03.660
> 
> 标签：fluent-nhibernate-mapping

我对我错误编写的一些有效的代码感到困惑......

```
 Map( x => x.StartTime )
            .Access.Property()
            .CustomType( "time" )
            .Generated.Never()
            .Column( "StartTime" )
            .Default( "(CONVERT([time],getdate(),(0)))" )
            .Nullable()
            .Not.LazyLoad(); 
```

出于某种原因，它工作得很好，但是当我意识到我打算写 CustomSqlType 而不是 CustomType 并对其进行更改时，它停止了工作……而且，如果我只是删除了 CustomType( "time" ) 行，它也会停止工作。让它工作的唯一方法是让它按照上面的方式运行，我不明白为什么:(

编辑：忘了提到在 SQL 方面我的列是“时间”类型，而在 .NET 方面，属性是 DateTime 类型？（可以为空）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:39:55.503

NHibernate 使用 ITypes 将属性类型来回编组到列值。有几种内置类型可供使用，例如`NHibernate.Type.TimeType`名称为“time”的类型。

# php - 用php中的标题输出

> ID：12601531
> 
> 赞同：0
> 
> 时间：2012-09-26T12:16:23.043
> 
> 标签：php, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我有这个登录脚本，它在我的 wampserver 上运行良好，但是当我上传到我的虚拟主机时，我不断收到错误

> 警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由（输出开始于 /data/multiserv/users/988963/projects/2254894/www/admin/processor/login.php:1 ) 在第 2 行的 /data/multiserv/users/988963/projects/2254894/www/admin/processor/login.php
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /data/multiserv/users/988963/projects/2254894/www/admin/processor/login.php:1 ) 在第 2 行的 /data/multiserv/users/988963/projects/2254894/www/admin/processor/login.php
> 
> 警告：无法修改标头信息 - 标头已由 /data/multiserv/users/988963/ 中的（输出开始于 /data/multiserv/users/988963/projects/2254894/www/admin/processor/login.php:1）发送projects/2254894/www/admin/processor/login.php 第 20 行

下面是代码：

```
session_start();
ob_start();
extract($_POST);

include("../admin/includes/connect.php");

$query = "SELECT id,username,password FROM account WHERE username = 
           '$username' and password = '$password'";

$result = mysql_query($query) or die("unable to get query DB");

if ($row = mysql_fetch_array($result)) {
    if ($row) {
        extract($row);

        // create session
        $_SESSION['zen_user'] = 'J@0&fu#iEXHU';
        header("location: ../account.php?id=$id");
        exit();
    } else {
        echo "<script>alert('wrong username or password') ; 
           history.go(-1);</script>";
        exit();
    }
} else {
    echo "<script>alert('wrong username or password') ; history.go(-1);
           </script>";
    exit();
}

ob_end_flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:23:35.367

put ob_flush() this at the end instead of ob_end_flush()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:19:29.117

也许您的包含文件（../admin/includes/connect.php）正在打印空格或什么？

我总是仔细检查你在包含文件中的 php 打开和关闭标签后面没有空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:35:30.110

放在`ob_start();`上面`session_start();`。
也放在`ob_clean`上面`header("location: ../account.php?id=$id");`。

# windows-phone-7 - 识别邮件 ID 和 URL

> ID：12601532
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:16:29.910
> 
> 标签：windows-phone-7

我正在创建一个 wp7 应用程序，在他的应用程序 m 中通过 Web 服务检索数据，数据中有一些 url 和邮件 ID。但看起来像简单的文字。我如何识别网址和邮件 ID。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:20:19.050

使用**正则表达式。**

对于网址：

`Regex r = new Regex("(?\w+)://(?[\w@][\w.:@]+)/?[\w.?=%&=-@/$,]*");
// Match the regular expression pattern against a text string.
Match m = r.Match(text);
while (m.Success)
{
//do things with your matching text
m = m.NextMatch();
}`

对于电子邮件，您可以使用另一个正则表达式：

`Regex regex = new Regex(@"^([\w.-]+)@([\w-]+)((.(\w){2,3})+)$");`

# ruby-on-rails - 防止将默认范围应用于acts_as_list

> ID：12601533
> 
> 赞同：1
> 
> 时间：2012-09-26T12:16:35.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-list

我使用[acts_as_list](https://github.com/swanandp/acts_as_list)来生成书的槽号：

`acts_as_list :scope => :book_id, :column => :slot`

并有一个默认范围，可防止已删除（软删除）书籍进入结果集：

`default_scope where(:is_active => true)`

我想防止默认范围应用于acts_as_list 声明，因为如果有人删除最后一本书并创建一个新书，他们会得到相同的插槽号（因为当它获取最后一个插槽号时，默认范围被应用并且它没有得到已删除的条目）。我知道`unscoped`，但是如何将它与acts_as_list 一起使用？

我正在使用 Rails 3.0.11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:23:23.450

无论您在哪里使用`acts_as_list`

只是这样做，

```
unscoped.acts_as_list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:53:52.533

gem 的旧版本（0.1.4）似乎有一些错误，`unscoped.acts_as_list`并没有阻止应用默认范围。将 gem 更新到最新版本 (0.1.8) 修复了它。默认情况下，它不应用默认范围，所以我们不需要写`unscoped.acts_as_list`

更多详情可在这找到：

[https://github.com/swanandp/acts_as_list/pull/13](https://github.com/swanandp/acts_as_list/pull/13)

# php - 当在另一个 css 文件中的 div 上设置时，它不起作用，当设置为 body 时，它起作用

> ID：12601540
> 
> 赞同：0
> 
> 时间：2012-09-26T12:16:50.917
> 
> 标签：php, html, css

```
<script>
    var obj = {{ data|raw }}
    document.body.innerHTML = "";
    document.body.appendChild(document.createTextNode(JSON.stringify(obj, null, 4)));  
</script> 
```

这是我的 html 文件的正文。问题是，当我为这个 html 文件创建一个新的 css 文件 - **metadata.css时，它包含以下内容：**

```
body {
    white-space: pre-wrap; 
    width: 770px;
} 
```

一切正常。但我不需要这个新文件。所以我尝试将我的 html 更改为：

```
<div class="metadata">
    <script>
        var obj = {{ data|raw }}
        document.body.innerHTML = "";
        document.body.appendChild(document.createTextNode(JSON.stringify(obj, null, 4)));  
    </script> 
</div> 
```

并在css文件中添加div的样式，这是我所有的css，它变成了这样：

```
body {
    text-align: center;
}

table{
    width: 100%;
    border-collapse:collapse;
    margin: 20px 0px;
}

table,th, td{
    border: 1px solid black;
    font-size: 17px;
}

th {
    background-color: #D3D3D3;
    font-weight: bold;
}

td {
   padding: 3px 5px; 
}

a.pagination {
    margin: 9px;
}

span {
    font-weight: bold;
}

.find_page {
    margin: 20px;
}

form input {
    width: 50px;
}

.metadata {
    white-space: pre-wrap; 
    width: 770px;
    text-align: left;
} 
```

但问题是，以这种方式，它不起作用 - 我认为 div 根本没有样式。你能帮我修一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:25:19.640

问题是您的 javascript 没有针对它所在的容器。

```
 document.body.innerHTML = "";
    document.body.appendChild(document.createTextNode(JSON.stringify(obj, null, 4))); 
```

将针对文档的主体，因为它正在使用`document.body`，而不关心代码的定义位置（因此容器的类被完全丢弃......实际上被`innerHTML = ""`语句删除了。你要找的是`document.write`它将在定义的位置输出（并且没有清除语句）。

```
 document.write(document.createTextNode(JSON.stringify(obj, null, 4))); 
```

当您开始做任何事情而不是一次性代码时，这通常应该由显式标记选择和不显眼的 JavaScript 代替。

# ruby-on-rails - 开源项目的 NoSql 数据库

> ID：12601541
> 
> 赞同：0
> 
> 时间：2012-09-26T12:16:52.327
> 
> 标签：ruby-on-rails, ruby, nosql

我需要创建一个具有两种类型条目的网站。一种类型是具有演员、简短描述、图像和流派的电影（电影只能按流派关联和排序）。第二种类型的用户创建电影列表，可以按类型对它们进行排序，并为电影和列表写一些个人评论。网站将在 ruby​​ on rails 中构建。预计所有已创建的电影都将列在数据库中，包括短片，以及许多将创建列表和注释的用户。请告诉我什么nosql数据库最适合存储这种类型的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:20:48.233

除非您要做出疯狂的负载假设并且您的网站非常受欢迎，否则您可能会选择您认为最容易使用的任何类型的数据库。因此，无论是关系数据库还是 NoSQL 数据库，都请选择您觉得舒服的那个。最后，您无论如何都会想要使用 ORM，这会减少选项。因此，请查看 Datamapper、AciveRecord 或 Mongomapper、Mongoid 等。它们提供对象/数据库映射，这可能是存储数据的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:27:44.383

可以在[http://nosql.findthebest.com/](http://nosql.findthebest.com/)找到对 NoSQL 数据库的一个很好的总结。这提供了每个 NoSQL 数据库的存储类型、许可证类型和其他特征。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:42:52.320

你确定你真的从一开始就需要 NoSQL 吗？

您所描述的听起来像是关系数据库的典型用例。

当您需要存储非关系数据（例如文件、图形等）或大量（非常庞大，例如 Twitter、Facebook、Amazon 等）数据时，NoSQL 的使用就会发挥作用。由于您绝对不会从一开始就拥有这些数量的数据，因此只需使用常见的关系数据库方法即可。

参见[维基百科](http://en.wikipedia.org/wiki/NoSQL)：

> 简而言之，NoSQL 数据库管理系统在处理大量数据并且数据的性质不需要数据结构的关系模型时很有用。

# sql-server-2008 - 如何从输出子句中的两个表中获取列

> ID：12601542
> 
> 赞同：0
> 
> 时间：2012-09-26T12:17:05.627
> 
> 标签：sql-server-2008, output-clause

我有两张桌子

```
TableA (Col1 Pk identity, Col2, Col3)
TableB (Col2,Col3, Col4) 
```

现在，我想得到 Col1, Col4 的组合。

我正在使用这个

```
INSERT INTO TableA (Col2, Col3)
OUTPUT inserted.*
SELECT DISTINCT Col2,Col3
FROM TableB 
```

但下面只会给我tableA的Col1、Col2和Col3 ..如果我没记错的话。这里我想要 Col1 (TableA) & Col4 (TableB) 现在，我怎样才能得到 Col4 和 TableA 中受人尊敬的缩进行。

**编辑**

以下是可能对您有所帮助的示例场景

```
 CREATE TABLE [dbo].[A](
    [Col1] [int] IDENTITY(1,1) NOT NULL,
    [Col2] [varchar](50) NULL,
    [Col3] [varchar](50) NULL,
 CONSTRAINT [PK_A] PRIMARY KEY CLUSTERED 
(
    [Col1] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

CREATE TABLE [dbo].[B](
    [Col2] [varchar](50) NULL,
    [Col3] [varchar](50) NULL,
    [Col4] [varchar](50) NULL
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

INSERT INTO A (Col2,Col3)
OUTPUT INSERTED.*
SELECT COL2, Col3, Col4 
FROM B 
```

*我可以用校验和来做吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:07:09.867

```
merge A as T 
using B as S 
on 0=1 
when not matched then 
insert (Col2, Col3) values (S.Col2,S.Col3) 
output inserted.Col1, S.Col4; 
```

# iphone - NSManagedObjectContext 重置似乎正在丢失数据？

> ID：12601551
> 
> 赞同：1
> 
> 时间：2012-09-26T12:17:22.187
> 
> 标签：iphone, objective-c, ios, core-data, managedobjectcontext

我的核心数据存储包含 51 个`Entry`实体，它们的`message`属性为“测试”。为此执行 NSFetchRequest 确认它们都在那里。

然而，我的方法的另一部分将用于内存密集型目的，处理大块 NSData，因此我需要`[oldContext reset];`经常调用。

我有一个内存密集型方法，可以从我的 MOC 访问大量 NSData。因此，它会定期调用`[oldContext reset];`. 没有这条线，它就会耗尽内存。

我发现通过使用它，它并没有返回正确的结果。为了测试这一点，我注释掉了数据密集型代码，留下了返回`message`属性的代码，其中 51 个设置为“测试”（由单独的 NSFetchRequest 确认）。

但是，使用`[oldContext reset];`它只返回 6 个结果，消息设置为“测试”。这是我正在使用的代码：

```
 NSFetchRequest *oldFetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *oldEntryEntity = [NSEntityDescription entityForName:@"Entry"
                                                      inManagedObjectContext:oldContext];
    [oldFetchRequest setEntity:oldEntryEntity];
    [oldFetchRequest setFetchBatchSize:10];
    [oldFetchRequest setIncludesPropertyValues:NO];
    NSArray *entrys = [oldContext executeFetchRequest:oldFetchRequest error:&error];

    int totalEntries = [oldContext countForFetchRequest:oldFetchRequest error:nil];

    int i = 0;

    while (i < totalEntries) {
        @autoreleasepool {

            Entry *entry = [entrys objectAtIndex:i];

            NSLog(@"message 1: %@", [entry valueForKey:@"message"]);

            [oldContext reset];

            i++;
        }
    } 
```

关于为什么它没有给出它应该做的 51 个“测试”结果的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:50:47.917

根据 Apple 文档，这是 ManagedObjectContext reset 所做的：

> *   所有接收者管理的对象都被“遗忘”了。如果使用此方法，则应确保还丢弃对使用接收器获取的任何托管对象的引用，因为之后它们将无效。

因此，在您的代码中，您告诉 oldContext 在每次 while 循环迭代时忘记它的所有对象。

您没有说 NSData 来自 MOC 中的哪个位置，但如果它来自 Entry 实体，我会说您有两个选择：

1）不要每次都重置MOC，而是使用NSManagedObjectContext的`refreshObject:mergeChanges:`方法。这将使实体重新出现故障并释放内存。例如：

```
while (i < totalEntries) {
    @autoreleasepool {

        Entry *entry = [entrys objectAtIndex:i];

        NSLog(@"message 1: %@", [entry valueForKey:@"message"]);

        [oldContext refreshObject:entry mergeChanges:NO];

        i++;
    }
} 
```

2) 不要在核心数据实体中存储大量数据。相反，将数据写入文件系统并保留对实体中数据路径的引用。那将是我的首选方法。在“大数据对象”部分查看 Apple 的[核心数据性能](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:33:11.950

尝试将 fetch batch size 设置为 1 而不是当前的 10。

我对这种情况的解释如下。

1.  通过`executeFetchRequest...`它将 10 条记录提取到上下文中。
2.  但是，通过重置上下文，所有记录都将丢失。所以，只有 10 条记录中的第一个记录。请注意，在上下文重置之前记录第一条记录。
3.  由于我们总共有 51 条记录，所以`51 % 10 = 6`记录仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:43:33.240

```
NSFetchRequest *oldFetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *oldEntryEntity =
    [NSEntityDescription entityForName:@"Entry"
                inManagedObjectContext:oldContext];
[oldFetchRequest setEntity:oldEntryEntity];
[oldFetchRequest setFetchBatchSize:10];
[oldFetchRequest setIncludesPropertyValues:NO];
NSArray *entrys = [oldContext executeFetchRequest:oldFetchRequest error:&error];
int totalEntries = [oldContext countForFetchRequest:oldFetchRequest error:nil]; 
```

上面的代码在 MOC 上执行一个 fetch 请求`oldContext`。因此，该`entrys`数组将包含数据库中与请求匹配的每个对象的托管对象。此外，由于设置了批量大小，提取会导致您的对象批量大小出错。

作为向自己保证正在发生的事情的实验，添加这些日志语句......

```
NSLog(@"entrys count = %u", entrys.count);
for (NSManagedObject *entry in entrys) {
    NSLog(@"entry: %@", entry);
} 
```

你看到那个数组中有什么吗？现在有意义吗？

让我们看看其余的代码。

```
int i = 0;
while (i < totalEntries) {
    @autoreleasepool {
        // You get the i-th entry.  It will be a managed object.  It could be a fault
        // or it could be a fully hydrated object.  Based on your batch size, the
        // first ten (0 <= i < 10) will be complete objects.
        Entry *entry = [entrys objectAtIndex:i];

        // Log the "message" attribute.  By calling valueForKey, the object will be
        // faulted into memory if it is a fault.  Since your batch size is 10,
        // this will make sure 10 objects are faulted if one is needed.
        NSLog(@"message 1: %@", [entry valueForKey:@"message"]);

        // Resetting the entire context blows away everything in the context.
        // Calling reset is a hard call, and should not be done if you have
        // references to the objects in the context.
        [oldContext reset];

        i++;
    }
} 
```

我会建议一种不同的方法。调用`reset`不是为您将保留对象的上下文而设计的。

有几种选择。您可以创建一个子上下文，在其中进行临时工作，然后释放上下文。它将释放它使用的所有内存。

您可以有选择地使用

```
- (void)refreshObject:(NSManagedObject *)object mergeChanges:(BOOL)flag 
```

`flag`如果是，这会将对象转回故障`NO`，从而释放其内存。请注意，这也存在一些固有的危险，特别是如果您有管理关系。

还有其他一些选择，但如果不知道你的最终目标是什么……很难说什么是最有益的。

我强烈建议您阅读与这些调用相关的所有文档。事实上，虽然 Core Data 非常复杂，但它确实有一些“脆弱”的交互作用，如果你做任何不重要的事情，你应该知道这些。

我强烈建议阅读所有核心数据文档。它解决了您在项目中遇到的所有问题。

# java - 根据key获取值

> ID：12601554
> 
> 赞同：1
> 
> 时间：2012-09-26T12:17:29.167
> 
> 标签：java, regex

我有什么错？当我设置变量 param="MOON" 我需要得到 333#444 但我得到：333#444:JUPITER=555。所以我一次只需要一个值。

```
final String parameters = "WORLD=111#222:MOON=333#444:JUPITER=555:SATURN=666:";
final String param = "MOON";

Pattern pattern = Pattern.compile("(.*)(" + param + ")=(.*)(:+)(.*)");
Matcher matcher = pattern.matcher(parameters);

if(matcher.matches()) {
    System.out.println("3: " + matcher.group(3)); // Value that I needed: 333#444
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:19:11.040

`.*`是贪婪的所以它得到尽可能多，而不是尽可能少。

尝试`.*?`或`[^:]*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:22:01.143

我不完全确定，但也许你想要的是提取所有 key=value 字段？如果是这种情况，您应该在字符处拆分字符串`:`并自行处理所有部分。然后将这些字符串部分与正则表达式匹配，或者更好的是，只需在字符`([^=]+)=(.*)`处拆分每个部分。`=`在这种情况下，您甚至不需要正则表达式并可能节省程序执行时间！`MOON= ...`通过搜索很容易找到表达式`MOON`。

**编辑**：我做了以下旧 Java 风格的测试程序（很可能可以改进）：

```
class Test
{
        public static void main(String argv[])
        {
                String parameter="WORLD=111#222:MOON=333#444:JUPITER=555:SATURN=666";
                String[] elements=parameter.split(":");
                for (int i=0; i < elements.length; i++) {
                        String[] parts=elements[i].split("=", 2);
                        if ((parts.length == 2) && (parts[0].equals("MOON"))) {
                                System.out.println("MOON is "+parts[1]);
                        }
                }
        }
}; 
```

输出：

```
MOON is 333#444 
```

在许多情况下，使用正则表达式是多余的，它通常可以避免并且可以节省执行时间。如果您有一个很长的字符串，您可能只是搜索`MOON`并从那里搜索下一个`:`或字符串结尾，然后使用拆分，但在这种情况下我可能会使用正则表达式。这完全取决于您是否还需要其他字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:26:07.343

如果您只是在 之后`333#444`，那么这有效：

`MOON=([0-9]+#[0-9]+)`

这会让你`MOON=333#444`：

`(MOON=[0-9]+#[0-9]+)`

但是在不知道您明确追求什么以及可能的值/格式可能是 MOON 的值的情况下，列表可以继续；-)

这：`([A-Z]+?=[0-9]+(#[0-9]+)?)`

会给你：

`WORLD=111#222` `WORLD=111` `#222`

`MOON=333#444` `MOON=333` `#444`

`JUPITER=555`

和

`SATURN=666`

这这个：`([A-Z]+?)=([0-9]+(#[0-9]+)?)`

会给你：

`WORLD` `111#222` `#222`

`MOON` `333#444` `#444`

`JUPITER` `555`

和

`SATURN` `666`

混合、匹配、冲洗、重复；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:46:13.320

我不确定性能，但它很容易阅读，而且看起来很有效：更新 2012-09-27: added "or end of text" ... |$

```
final String parameter5 = "WORLD=111#222:MOON=333#444:JUPITER=555:SATURN=666:";           
final String P = "MOON";

Pattern pattern = Pattern.compile("(.*" + P + "=)(.*?)(:+.*|$)");
Matcher matcher = pattern.matcher(parameter5);

if (matcher.matches()) {
    System.out.println(matcher.group(2)); // 333#444
} 
```

# ruby-on-rails-3 - Rails 3.1 - find_or_create on nested_attribute for HABTM 关系？

> ID：12601555
> 
> 赞同：0
> 
> 时间：2012-09-26T12:17:29.623
> 
> 标签：ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我有可以有很多艺术家的版本，并且艺术家可以出现在许多版本中。艺术家可以通过嵌套属性在我的发布表单中创建。我遇到的问题是让 find_or_create 为艺术家工作。

我在我的模型中定义了以下代码，您可以在 ArtistRelease 模型中看到一个相当荒谬的 get/set/delete 例程来实现预期的结果。这确实有效，但我不喜欢它。我知道通过 find_or_create 有更好的方法。任何人都可以帮忙吗？我应该把 find_or_create 放在哪里才能工作？

```
class Release < ActiveRecord::Base
  has_many :artist_releases, :dependent => :destroy
  has_many :artists, :through => :artist_releases
  accepts_nested_attributes_for :artists, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
  accepts_nested_attributes_for :artist_releases
end

class Artist < ActiveRecord::Base
  has_many :artist_releases
  has_many :releases, :through => :artist_releases
end

class ArtistRelease < ActiveRecord::Base
  belongs_to :artist
  belongs_to :release

  before_create :set_artist_id
  after_create :destroy_artist

  default_scope :order => 'artist_releases.position ASC'

  private    
  def set_artist_id
    a = Artist.where("name =?", artist.name).reorder("created_at").find(:first)
    a.role = artist.role
    a.position = artist.position
    a.save
    artist_id = a.id
    self.artist_id =  artist_id
  end

  def destroy_artist
    c = Artist.count(:all, :conditions => [ "name = ?", artist.name])
      if c > 1
        a = Artist.where("name =?", artist.name).reorder("created_at").find(:last)
        a.destroy
      end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:01:11.677

您似乎正在寻找`autosave_associated_records_for_[model_name]`应该在您的模型之一中覆盖的方法。

这里解释：[accepts_nested_attributes_for with find_or_create?](https://stackoverflow.com/questions/3579924/accepts-nested-attributes-for-with-find-or-create) . 该示例适用于简单的`has_many`关联。

对于`has_many :through`我在下面的代码中开发的关联。

在我的应用程序中，我有一个`order_item --< seat >-- client`连接。我正在使用新的 order_item 表单创建客户。解决方案让我创建一个新客户和一个座位关联，或者当客户表中已经有一个客户提供了电子邮件时，我只创建一个座位关联。它不会更新现有客户端的其他属性，但也可以轻松扩展以执行此操作。

```
class OrderItem < ActiveRecord::Base
  attr_accessible :productable_id, :seats_attributes

  has_many :seats, dependent: :destroy
  has_many :clients, autosave: true, through: :seats

  accepts_nested_attributes_for :seats, allow_destroy: true   
end

class Client
  attr_accessible :name, :phone_1
  has_many :seats
  has_many :order_items, through: :seats
end

class Seat < ActiveRecord::Base
  attr_accessible :client_id, :order_item_id, :client_attributes

  belongs_to :client, autosave: true
  belongs_to :order_item

  accepts_nested_attributes_for :client

  def autosave_associated_records_for_client
    if new_client = Client.find_by_email(client.email)
      self.client = new_client
    else
      # not quite sure why I need the part before the if, 
      # but somehow the seat is losing its client_id value
      self.client = client if self.client.save!
    end
  end
end 
```

希望能帮助到你！

# php - PHP中SQL字段的总和

> ID：12601560
> 
> 赞同：0
> 
> 时间：2012-09-26T12:17:46.897
> 
> 标签：php, zend-db

您好我正在尝试在 PHP 中查找 SQL 字段的总和。这个总和必须小于或等于我在控制器中从 JavaScript 收到的数字。但是我的 SQL 语法在 PHP 中不起作用，而是从数据库中获取所有行。

```
public function feedbackaverageAction(){                
    $value =$_GET['value'];
    $db = Zend_Registry::get('dbadapter');
    $select = new Zend_Db_Select($db);
    $select = $db->select();
    $select->from(array('feedback' => 'feedback'),
                   array ('customdata',
                          'checkinprocess',
                          'service_by_owner',
                          'locationrating',
                          'cleanlinessrating',
                          'valueformoneyrating',
                          'kitchenequipmentrating'));
    $select->where('feedback.checkinprocess' + 
                   'feedback.service_by_owner' + 
                   'feedback.locationrating' +
                   'feedback.cleanlinessrating' +
                   'feedback.valueformoneyrating' +
                   'feedback.kitchenequipmentrating' <= $value);
    $stmt = $select->query();
    $result = $stmt->fetchAll();
    $this->view->rows = $result;
} 
```

谁能帮助我如何找到总和并将其检查到我在控制器中获得的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:32:02.250

试试这段代码并像这样进行 SQL 查询。

```
$value = $_GET['value'];
$db = Zend_Registry::get('dbadapter');
$select = new Zend_Db_Select($db);
$select = $db->select();

$select->from(array('feedback' => 'feedback'),array ('customdata','checkinprocess','service_by_owner','locationrating','cleanlinessrating','valueformoneyrating','kitchenequipmentrating'));

$select->where(new Zend_Db_Expr('feedback.checkinprocess'+'feedback.service_by_owner'+'feedback.locationrating'+'feedback.cleanlinessrating'+'feedback.valueformoneyrating'+'feedback.kitchenequipmentrating')<= $value);

$stmt = $select->query();

$result = $stmt->fetchAll();

$this->view->rows = $result; 
```

# java - Java - 如何获取操作系统登录用户名（来自域）？

> ID：12601561
> 
> 赞同：5
> 
> 时间：2012-09-26T12:17:47.657
> 
> 标签：java, windows, authentication, tomcat

在以下情况下，我需要一些帮助。

1.  想象一下，最终用户收到一封电子邮件（在其桌面上），其中包含指向 Web 应用程序的链接。我用 Java 构建的那个应用程序运行在另一台专用机器上的 Tomcat servlet 之上。用户登录的那个工作站针对域控制器（活动目录）进行身份验证。

2.  我见过许多商业应用程序也运行在 tomcat 之上，并且以某种方式将自己绑定到 Microsoft IIS/AD，因此当最终用户访问他们的应用程序时，他们可以获得域用户登录和单点登录将它们放入构建的 Java 应用程序中。长话短说，我也必须这样做

但是从哪里开始呢？我所知道的是，目前我无法这样做，因为

**System.getProperty("user.name");** 无法正常工作，因为它获取了针对该应用程序进行身份验证的用户。但现在情况**并非**如此。**我需要的是获得操作系统的身份验证用户**

*   那么我应该将我的 Java 绑定到 Tomcat 并让我的最后一个绑定到 IIS/AD 吗？
*   或者我可以让我的 Java 应用程序直接绑定到 IIS 并让该操作系统登录用户？

非常感谢，布鲁诺奥利维拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:28:40.183

您在上面提到的问题称为“**单点登录**”

您无法仅使用 Web 应用程序在桌面上获取用户信息。

要实现单点登录，您需要三个组件，即 Active Directory、单点登录组件和您的 Web 应用程序

我希望你可以参考这篇关于[IBM 开发者作品](http://www.ibm.com/developerworks/web/library/wa-singlesign/)的文章来自己实现。除此之外，市场上还有许多工具和商业组件，我希望这会对你有所帮助..！

# audio - 如何使用 ffmpeg 将两个音频文件混合为一个？

> ID：12601564
> 
> 赞同：3
> 
> 时间：2012-09-26T12:18:08.120
> 
> 标签：audio, ffmpeg, mixing

我想将两个音频文件混合为一个使用 ffmpeg。于是我下载了最新版的ffmpeg，查看文档，得到代码：

```
ffmpeg -i 10001.wav -i 201.wav -filter_complex amix=inputs=2:duration=shortest output.wav 
```

但我收到了这个错误：

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Aug  9 2012 16:22:59 with gcc 4.1.2 20080704 (Red Hat 4.1.2-52)
  configuration: --prefix=/usr/ --enable-gpl --enable-libx264 --enable-libmp3lame
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
[wav @ 0x13d08100] max_analyze_duration 5000000 reached at 5120000
Guessed Channel Layout for  Input Stream #0.0 : mono
Input #0, wav, from '10001.wav':
  Duration: 00:00:07.91, bitrate: 64 kb/s
    Stream #0:0: Audio: pcm_alaw ([6][0][0][0] / 0x0006), 8000 Hz, mono, s16, 64 kb/s
[wav @ 0x13d08980] max_analyze_duration 5000000 reached at 5120000
Guessed Channel Layout for  Input Stream #1.0 : mono
Input #1, wav, from '201.wav':
  Duration: 00:00:11.88, bitrate: 128 kb/s
    Stream #1:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 8000 Hz, mono, s16, 128 kb/s
[abuffersink @ 0x13d268c0] No opaque field provided, an AVABufferSinkParams struct is required 
```

谁能帮助我？谢谢！

# xcode - phonegap 应用程序是否适用于 xcode 4.0？

> ID：12601575
> 
> 赞同：0
> 
> 时间：2012-09-26T12:18:57.670
> 
> 标签：xcode, macos, cordova

我有 mac os X 10.6.3，我想创建 phonegap 应用程序来处理它，那么我需要下载哪个版本的 xcode？我已经有 mac os x 10.5.8 和 xcode 3.1.4，但我无法在其中安装 phonegap 应用程序。以及如何在雪豹 10.6.3 中安装 xCode？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:42:26.830

对于 Snow Leopard 10.6，您可以下载 Cordova / Phonegap 的 1.5.0 版本。

查看此链接以获取有关如何开始使用 Cordova / Phonegap 1.5.0 版的更多信息：http: [//docs.phonegap.com/en/1.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with %20iOS](http://docs.phonegap.com/en/1.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

但是，我认为您将需要 XCode 4。

# c++ - OpenCV中的旋转和尺度不变模板匹配

> ID：12601583
> 
> 赞同：7
> 
> 时间：2012-09-26T12:19:11.033
> 
> 标签：c++, opencv, pattern-recognition

> **可能重复：**
> [缩放和旋转模板匹配](https://stackoverflow.com/questions/10666436/scale-and-rotation-template-matching)

我有一个模板灰度图像，上面有白色背景和黑色形状。我也有几个类似的测试图像，它们的旋转和形状各不相同。测试图像与模板不同，但它们相似。

我想比较这两个图像，看看模板是否与任何测试图像最相似。图像中没有失真，没有噪音和其他缺陷。有没有关于这个主题的教程？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T19:19:49.137

首先尝试最简单的方法。

如果我理解正确，你有一些模型 - 白色背景上的黑色形状。您可以将其视为 blob - 通过计算主轴角度找到它的质心和旋转 - 看[那里](https://stackoverflow.com/questions/11330269/find-the-orientation-of-an-image?answertab=active#tab-top)。

然后你必须从其他图像中分割出形状。然后尝试使用 matchShapes() 函数找到最佳对应形状 - 看看[如何](https://stackoverflow.com/questions/11735646/opencvmatchshapes-example?answertab=active#tab-top)使用它。

**matchShapes() 函数使缩放和旋转不变匹配。最小的匹配形状导致更好的匹配。**

扩展您的问题，您可以找到最佳匹配斑点的质心和旋转，并找到模型和匹配图像之间的旋转、比例和位移。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T14:27:59.220

这是一个相当复杂的主题。您通常有诸如广义霍夫变换和归一化灰度相关之类的选项来处理模板匹配。问题是它们在最简单的表达式中不是比例或旋转不变的。您当时需要专注于问题，广义的解决方案很复杂。我建议先进行简单的模板匹配。然后为旋转和缩放添加“hacks”。对于旋转，您可以缩小（低分辨率匹配）和模板匹配旋转模型。这也可以处理规​​模。

# javascript - Sinon Fake 服务器没有自动响应

> ID：12601587
> 
> 赞同：3
> 
> 时间：2012-09-26T12:19:24.220
> 
> 标签：javascript, sinon

嗨，我正在使用 fetch 测试一个集合，当我调用它时，只有在调用 server.response 后，假服务器才得到响应，我得到了想要的结果。

这是为什么 ？

我的代码

```
 beforeEach( function() {
    server = sinon.fakeServer.create();
    server.autoRespond = true;
    colhedoraList = new ColhedoraList();
  });

.
.
.
    var spy       = sinon.spy(colhedoraList, 'parse');

    server.respondWith("GET", "getColhedoraInfo",
      [200, {"Content-Type": "application/json"},
      '[{"id":"1","talhaoAtual":1,"posicionamentos":[{"lat":-23.9317401,"lng":-50.2210379,"elevadorLigado":true,"horario":"2012-09-21T11:27:58Z"},{"lat":-23.931544,"lng":-50.2161884,"elevadorLigado":true,"horario":"2012-09-21T11:28:02Z"}]}]']);

    colhedoraList.fetch({add: true});
    server.respond();
    expect(spy).toHaveBeenCalled();
    expect(spygmaps).toHaveBeenCalledTwice();
    expect(colhedoraList.get(1).get('talhaoAtual')).toEqual(1);    <<< ALL EXPECTS FAIL, If I don't call respond(). 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T07:30:58.873

如果您`sinon.useFakeTimers`在规范中的任何地方使用模拟计时器 ()，这可能会阻止自动回复器工作。该`addRequest`方法创建一个超时，在该超时内实际响应请求。默认等待时间为 10 毫秒。

# c# - 将字符串计算转换为十进制答案

> ID：12601591
> 
> 赞同：0
> 
> 时间：2012-09-26T12:19:37.740
> 
> 标签：c#, calculator

我正在尝试编写一个计算器，其中按钮将一个字符发送到一个文本框。当用户按下“等于”按钮时，必须计算整个字符串并且答案必须显示为小数。显然以下方法不起作用：

```
 private void btn_enter_Click(object sender, EventArgs e)
    {
        decimal answer;
        answer = Convert.ToDecimal(textBox1.Text);

        textBox1.Text += "=" + answer;
    } 
```

制作这样的东西的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:43:55.230

虽然你的问题不清楚。但是如果你想在文本框中显示，你应该将它转换为字符串。

```
private void btn_enter_Click(object sender, EventArgs e)
{
    decimal answer;
    answer = Convert.ToDecimal(textBox1.Text);

    textBox1.Text += "=" + answer.toString();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T12:48:17.327

您可以按照动态[评估 C# 的方式进行](https://stackoverflow.com/q/53844/50776)，但是对于您要尝试做的事情，这有点矫枉过正。

我推荐一个计算引擎，比如[NCalc](http://ncalc.codeplex.com/)（你可以[在 NuGet](http://nuget.org/packages/ncalc)上获得）。有了它，您可以轻松地执行以下操作（取自 NCalc 主页）：

```
Expression e = new Expression("2 + 3 * 5");
Debug.Assert(17 == e.Evaluate()); 
```

您可以将类的构造函数替换为`Expression`您的文本`TextBox`，然后将调用结果通过管道传输`Evaluate`到您想要将其输出到的任何位置：

```
Expression e = new Expression(textBox1.Text);
MessageBox.Show(e.Evaluate().ToString()); 
```

# ruby-on-rails - 收到 json 响应时不断收到 406 Not Acceptable 错误

> ID：12601594
> 
> 赞同：0
> 
> 时间：2012-09-26T12:19:41.990
> 
> 标签：ruby-on-rails, jquery, actioncontroller

我过去曾使用过 jQuery 远程功能，但在这种情况下我遇到了麻烦。

我有一个有效的远程功能来检查电子邮件的唯一性，但现在我想检查用户密码，当他使用 jQuery 验证插件（如果可能的话）输入它时，但我经常进入 Firebug：

```
 406 Not acceptable 
```

这是我的行动**（问题在这里。编辑）**： -**编辑**

```
def checkpass 
 @user = User.find_by_email(params[:email])
  if  @user && @user.valid_password?(params[:user][:password])
   @check = true
  end
  respond_to do |format|
   format.json { render :json => @check }
 end
end 
```

**从控制台：** -**编辑**

```
 Started GET "/checkpass?user%5Bpassword%5D=[FILTERED]&email=new%40mail.com" for   127.0.0.1 at 2012-09-30 11:42:26 +0300
   Processing by EditUserController#checkpass as JSON
   Parameters: {"user"=>{"password"=>"[FILTERED]"}, "email"=>"new@mail.com", "pas
   sword"=>"[FILTERED]"}
 ←[1m←[36mUser Load (0.0ms)←[0m  ←[1mSELECT "users".* FROM "users" WHERE "users
   "."email" = 'new@mail.com' LIMIT 1←[0m
  User: new@mail.com
  Pass: 123456
  Devise pass:true
  Completed 200 OK in 438ms (Views: 15.6ms | ActiveRecord: 0.0ms) 
```

这是检查电子邮件唯一性的有效操作：

```
 def checkemail
  @user = User.find_by_email(params[:user][:email])
   respond_to do |format|
    format.json { render :json => !@user }
   end
end 
```

和我的 jQuery 远程功能验证 -**编辑**

```
 $("#edit_password").validate({
   rules: {

        "user[password]":{
            required: true,
            minlength: 6,
            remote: {
            url: "http://127.0.0.1:3000/checkpass",
            type: "get",
            data: {
              email: function() { return $("#user_email").val(); }
            }
        },
   ...
  }) 
```

checkuniqeness jQuery 的工作示例：

```
 "user[email]": {
          required: true,
          email: true,
          remote: {
          url: "http://127.0.0.1:3000/checkemail"
          } 
```

我的错误在哪里？

# java - Java - for 循环声明外的逗号运算符

> ID：12601596
> 
> 赞同：8
> 
> 时间：2012-09-26T12:19:46.890
> 
> 标签：java, for-loop, variable-assignment, assignment-operator, comma-operator

我知道我可以像这样使用逗号运算符

```
for (int i = 1, j = 15; j>10; i++, j--) {
    // do something neat
} 
```

但是有些文章似乎建议可以在 for 循环声明之外使用逗号运算符，例如

```
int j = 2, k = 4 ;
int x ;
// Assignment statement with comma operator
x = j + 1, k ; 
```

来源：[http ://www.cs.umd.edu/~clin/MoreJava/ControlFlow/comma.html](http://www.cs.umd.edu/~clin/MoreJava/ControlFlow/comma.html)

或者

```
int x = (expression) ? (i++,2) : 3; 
```

来源：[https ://stackoverflow.com/a/12047433/1084813](https://stackoverflow.com/a/12047433/1084813)

对于代码混淆竞赛或混淆我的同事来说，这将是一个巧妙的技巧，但两个示例都不会编译（Java 1.6，Eclipse Juno），错误是“赋值的左侧必须是变量”。我尝试查看编译器设置，看看是否可以禁止防止错误代码，但没有运气。

怎么了？逗号运算符是否是后来更改的旧规范的一部分？编写这些示例的人是否使用允许这样做的不同 Java 设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-10T05:23:07.437

[https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.27](https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.27)

> ***15.27。表达***
> 
> *<...>*
> 
> *与 C 和 C++ 不同，Java 编程语言没有逗号运算符。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T12:28:25.417

> 怎么了？

一些在 C 中有效的技巧在 Java 中无效。

> 逗号运算符是否是后来更改的旧规范的一部分？

这在 Java AFAIK 中从未奏效。

> 编写这些示例的人是否使用允许这样做的不同 Java 设置？

假设 Java 就像 C 或 C++ 一样，这是一个常见的错误，因为它们很相似。SO 上的很大一部分编码错误是由于人们试图用 Java 编写 C++ 并且当它没有达到他们的预期时感到困惑。

顺便说一句：假设 C++ 就像 Java 一样，我犯了同样的错误，因为我对 C++ 的了解不是最新的。

* * *

然而，一些适用于 Java 但可能不适用于 C 的技巧。

您可以使用所有货币符号，也可以使用一些看起来最多相同的货币符号。

例如

```
if( ⁀ ‿ ⁀ == ⁀ ⁔ ⁀ || ¢ + ￠== ₡) 
```

您可以使用不可见的字符和 c 对，它们在打印时反转其余行的顺序。;)

该程序编译并运行并打印您可以在 Java 标识符中使用的所有奇数字符

```
for (char c⁯‮h = 0; c⁯‮h < Character.MAX_VALUE; c⁯‮h++)
    if (Character.isJavaIdentifierPart(c⁯‮h) && !Character.isJavaIdentifierStart(c⁯‮h))
        System.out.printf("%04x <%s>%n", (int) c⁯‮h, "" + c⁯‮h); 
```

这使得它几乎太容易了。

[http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html](http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html)

[http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html](http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html)

# python - 使用 xml.dom.minidom.Node.toxml() 保留空标签

> ID：12601597
> 
> 赞同：0
> 
> 时间：2012-09-26T12:19:51.647
> 
> 标签：python, xml, dom

我正在使用 xml.dom 解析 xml 文档，我想`<node></node>`使用 node.toxml()保留空标签（`<node />`如是用xml写的吗？

# c++ - VS 2010 中的错误 LNK2005

> ID：12601599
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:19:55.557
> 
> 标签：c++, vector

我得到以下错误。我无法理解它发生在哪里？哪里出错了。我正在开发一些代码，

`abc.h`

```
#include<vector>
vector<string> vect;
vector<string>::iterator ab; 
```

`def.c`

```
#include "abc.h"

    vect.push_back("a");
    vect.push_back("b");
    for(ab = vect.begin(); ab != vect.end(); ab++)
    {
    if(*ab == "b")
    {
    FIle *file->fun();
    } 
```

`abc.c`

```
#include "abc.h"

    File::file()
    {
    vect.insert(1, "Something");
    } 
```

我收到一个错误

```
"class std::_Vector_iterator<class std::_Vector_val<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > > testCase" (?testCase@@3V?$_Vector_iterator@V?$_Vector_val@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@@std@@A) already defined in abc.obj
1>GTestThread.obj : error LNK2005: "class std::vector<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > vect" (?vect@@3V?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@A) already defined in abc.obj
1>D:/ fatal error LNK1169: one or more multiply defined symbols found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:21:47.237

这：

```
vector<string> vect;
vector<string>::iterator ab; 
```

是标题中的定义，这意味着当您将标题包含在多个翻译单元中时，您将打破一个定义规则。将其更改为：

```
//abc.h
extern vector<string> vect;
extern vector<string>::iterator ab; 
```

使其成为声明并将定义移动到单个实现文件中：

```
//abc.c
#include "abc.h"
vector<string> vect;
vector<string>::iterator ab; 
```

我仍然想知道您的`def.c`编译方式，您不能只是将语句粘贴到上下文之外的实现文件中。

此外，C++ 有扩展`.cc`或`.cpp`（我认为还有其他），而不是`.c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:24:12.733

您通常不会在头文件中*定义*诸如此类`vect`的内容，因为包含它的每个 C++ 文件都会获得自己的副本，因此会出现重复符号警告。

*在标题中*声明它：**

 *```
extern vector <string> vect; 
```

然后在*其中一个*C++ 文件中定义它。*

# java - Java HashMap 排列

> ID：12601600
> 
> 赞同：-4
> 
> 时间：2012-09-26T12:20:14.447
> 
> 标签：java, hash, hashmap

我正在尝试创建一个哈希映射的排列，该映射将键作为键并以随机顺序多次对其进行洗牌，但保留相同的对象。

到目前为止，我有：

```
Map<Integer, GeoPoint> mapPoints = new HashMap<Integer, GeoPoint>();
ArrayList<Integer> keys2 = new ArrayList<Integer>(mapPoints.keySet());

for (int t =0; t < 50; t ++){

            Collections.shuffle(keys2);

        } 
```

但据我所知，它并没有改变它们。谁能看到我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:22:45.850

What does "shuffled" look like to you? There's no order for keys in `HashMap`. You need a `LinkedHashMap` to preserve insertion order.

Shuffling the `Collection` of keys won't affect the `Map` per se; you iterate over it to access the `Map` keys.

See if this gives you a different ordering after you run it.

```
Map<Integer, GeoPoint> mapPoints = new HashMap<Integer, GeoPoint>();
System.out.println("before shuffle ");
Set<Integer> keys = mapPoints.keySet();
for (int key : keys) {
    System.out.println("key : " + key + " value: " + mapPoints.get(key));
}
Collections.shuffle(keys);  // don't know why multiple shuffles are required.  deck of cards?
System.out.println("after shuffle ");
for (int key : keys) {
    System.out.println("key : " + key + " value: " + mapPoints.get(key));
} 
```

# c - matlab和C中的内存管理器问题

> ID：12601605
> 
> 赞同：-2
> 
> 时间：2012-09-26T12:20:35.827
> 
> 标签：c, matlab, memory-leaks, mex

> **可能重复：**
> [matlab中的内存分配](https://stackoverflow.com/questions/12564224/memory-allocation-in-matlab)

我正在寻找解决 C 项目中的内存泄漏问题，该项目调用从 MATLAB 生成的 DLL，我找到了这个[链接](http://www.mathworks.com/matlabcentral/answers/42564)。那个链接里写的都是真的吗？任何人都可以详细解释一下吗？

我在某些细节上的内存泄漏问题是，当我在循环中的第一个图块调用 dll 中的函数时，一切都很好，其余的一些内存是泄漏的，并且**不会累积**，例如：- 在调用第一次内存有`2000 MB`空闲的函数，第二次`1800 MB`空闲。在第三次调用之后是合理`1600 MB`的，但它仍然是**`1800 MB`**免费的，并且仍然`1800 MB`适用于程序的其余部分。为什么它没有增加！

我正在使用 Windows 7 x86 作为操作系统，MatLab 2011a，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:31:22.830

您是否 100% 确定内存泄漏在库中？你知道库函数在做什么吗？

有[调用 dlopen/dlclose 导致的非累积内存泄漏的示例](https://bugs.launchpad.net/ubuntu/+source/eglibc/+bug/883775)（在其他操作系统中，但仍然如此）

# svn - svn 从一个移动的分支合并到一个新的分支

> ID：12601612
> 
> 赞同：0
> 
> 时间：2012-09-26T12:21:08.043
> 
> 标签：svn, merge, branching-and-merging

使用 svn respo，我创建了一个分支 A（修订版 r0），与我的伙伴 John 一起工作。我做了一些更改修订版 r1，约翰提交​​了一些更改修订版 r2。然后我发现我没有足够的时间来测试 r1 的变化，所以我回滚 which –c –r1 。John 将分支 A 合并到主干，并将 mv A 从分支合并到 branch_bak。现在我在 John merge trunk 之后创建了新的分支 B，我想将分支 A 上的 r1 更改合并到分支 B，我该怎么做？

```
 1\. I : svn commit “for point A”  revision:r1
 2\. John: svn commit “for point B” revision: r2
 3\. I : svn merge –c –r1 http://corp/branch/branchA revision:r3
 4\. John: svn merge http://corp/branch/branchA to trunk 
 5\. John:svn mv http://corp/branch/branchA http://corp/branch_bak/branchA
 6\. I : svn cp trunk http://corp/branch/branchB
 7\. I: I want to merge the changes on revision r1 branch A to branch B 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:31:05.663

我认为这样的事情应该有效：

```
$ cd myWorkingCopyOfBranchB
$ svn merge -c -r1 http://corp/branch/branchA@r1 
```

[您可以在 SVN book 的“高级合并”部分](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.advanced.html)找到更多信息。

# c++ - Comparing two TDateTime variables

> ID：12601615
> 
> 赞同：1
> 
> 时间：2012-09-26T12:21:15.117
> 
> 标签：c++, compare, c++builder, tdatetime

I am using C++ Builder and am wanting some help to see if two times are the same.

Here is my code:

```
TDateTime appDateFromVector = TimeOf(appointmentsForFind[i].getAppDateTime());
DateTime appDateFromControl = TimeOf(DateTimePickerAppointmentTime->Time); 
```

These values appear to be the same. I have checked via a ShowMessage statement, and the message displayed is both in time format and they are the same value.

When comparing them though, with the following statement:

```
if (appDateFromVector == appDateFromControl) 
```

I am not getting a true statement. Is there another process needed to check if two times are the same?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:34:08.627

这是来自 Embarcadero 文档

> System::TDateTime 类继承了一个声明为 double 的 val 数据成员，该成员保存了日期时间值。System::TDateTime 值的组成部分是自 1899 年 12 月 30 日以来经过的天数。System::TDateTime 值的小数部分是一天中的时间。

正是这个 double 在使用`==`运算符时进行了相等性测试，因此非常微小的时间差异可能导致明显相似的时间看起来不相等。您应该考虑测试相等性所需的精度分辨率（例如，精确到秒），然后考虑使用将日期时间转换为适当格式的字符串并测试字符串相等性的函数。

这是我测试时间相等的方式，但我从来不需要比一秒更高的分辨率来进行相等测试。看看这个以将 TDateTime 输出为[字符串](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/System__TDateTime__DateTimeString.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:59:43.923

C++Builder 有许多用于比较 TDateTime 值的[辅助函数。](http://docwiki.embarcadero.com/RADStudio/en/Date_and_Time_Support#Comparing_and_Checking_Date_and_Time_values)看看我在下面的示例中包含的 [CompareTime](http://docwiki.embarcadero.com/Libraries/en/System.DateUtils.CompareTime)和[SameTime 。](http://docwiki.embarcadero.com/Libraries/en/System.DateUtils.SameTime)

```
TDateTime TimeA, TimeB;

// offset TimeB by one hour
TimeA = Now();
TimeB = IncHour(TimeA, 1);

// use CompareTime function
if (CompareTime(TimeA, TimeB) == EqualsValue)
{
  ShowMessage("Both times are equal.");
} 

// use SameTime function
if (SameTime(TimeA, TimeB))
{
  ShowMessage("Both times are equal.");
} 
```

# mysql - MySQL表设计，一排还是多pr用户？

> ID：12601617
> 
> 赞同：1
> 
> 时间：2012-09-26T12:21:23.307
> 
> 标签：mysql, sql, database-design

使用 MySQL，我有一个用户表、一个匹配表（使用*实际*结果更新）和一个名为 users_picks 的表（起初它总是 10 场足球比赛 pr.gameweek pr. League 因为到目前为止只有一个联赛，但最终会有更多的联赛出现，其中一些联赛只有 8 场比赛周）。

在 users_picks 表中，我应该将每个“选择”（我的选择是指“主队得分”和“客队得分”）存储在不同的行中，还是将所有 10 个选择存储在一行中？两者都有用户和游戏周的 FK。一行中的所有选择都意味着我的列中附加了如下数字：

`Option 1: [pick_id, user_id, league_id, gameweek_id, match1_hometeam_score, match1_awayteam_score, match2_hometeam_score, match2_awayteam_score ... etc]`

这个选项并没有让我很高兴，而且看起来有点愚蠢。特别是因为数据库中会有很多潜在的 NULL。第二种选择最终意味着数百万行。但看起来像这样：

`Option 2: [pick_id, user_id, league_id, gameweek_id, match_id, hometeam_score, awayteam_score]`

最佳做法是什么？使用第二种方法进行各种统计会是一个 PITA 吗？例如。计算用户在特定回合中正确命中了多少匹配，有多少始终正确命中等。

如果我没有多大意义，我会尝试详细说明任何事情。我只是不想我的桌子设计从一开始就很好，所以几个月后我就不会头疼了。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:22:50.177

第二个选择比第一个好很多。这称为[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)，使查询更容易，而不是更难。我建议阅读链接的文章，以及各种“范式”的相关描述，并至少以第 3 范式数据结构为目标。

要查看您的第一个选项中的缺陷，想象一下如果以后要加入一个有 11 场比赛的新联赛。或 400。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:25:06.957

您应该阅读有关[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)的信息。

当您有 1:n 关系时，例如在您的情况下，一个团队有很多比赛，您将创建两个表。一个表“teams”和第二个表“matches”，其中每一行都包含参加比赛的球队的 ID。

以同样的方式，您还应该为用户、选择和联赛设置单独的表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:26:37.083

选项二更好，只要你正确地索引你的表，因为（如你所指出的）它会变得很大。是主`pick_id`键，但也会在字段上创建一个索引`user_id`，因为最常见的查询可能是

```
SELECT * FROM `users_pics` WHERE `user_id`=?; 
```

获取给定用户的所有选择。

# dart - 如何自动初始化父字段？

> ID：12601620
> 
> 赞同：2
> 
> 时间：2012-09-26T12:21:26.123
> 
> 标签：dart

是否可以在构造函数中自动初始化父类的字段？

我收到语法错误：

无法将参数初始值设定项“this.name”与任何字段匹配

```
class Type {
     String name;  
}

class Language extends Type {
     String id;
     Language(this.name) { 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T13:02:46.630

虽然您的情况很常见，但此时[dart 语言规范](http://www.dartlang.org/docs/spec/latest/dart-language-specification.html#h.flm5xvbwhs6u "生成式构造函数")明确表示：

> 执行初始化形式 this.id 会导致紧邻的类的字段 id 被分配相应的实际参数的值。

这本质上告诉我们，`this.variable`构造函数参数中的符号仅适用于直接类中的变量，而不适用于任何父类。有几个可用的解决方案：第一个是在构造函数的主体中分配它：

```
class Type {
  String name;
}

class Language extends Type {
  String id;
  Language(name) {
    this.name = name;
  }
} 
```

或者，如果我们可以将父类更改为具有初始化变量的构造函数，那么我们可以在子类中使用初始化列表：

```
class Type {
  String name;
  Type();
  Type.withName(this.name);
}

class Language extends Type {
  String id;
  Language(name) : super.withName(name);
} 
```

这是假设默认构造函数`Type`没有自动初始化是有原因的，`name`所以我们创建了第二个命名构造函数。

# jquery - Two iframe fancybox on same page

> ID：12601621
> 
> 赞同：1
> 
> 时间：2012-09-26T12:21:30.997
> 
> 标签：jquery, iframe, fancybox, fancybox-2

i have one problem with fancybox script. I am using fancybox 2.1 (latest). I want for example two iframe links to be working on same page but with different settings and customization for each modal box. For example

```
<li><a class="fancybox fancybox.iframe" href="give-me-meal.html">first</a></li>
<li><a class="fancybox fancybox.iframe" href="give-me-meal.html">second </a></li> 
```

I override default customization with

```
<script type="text/javascript">
jQuery.extend(jQuery.fancybox.defaults, {
            href : 'iframe.html',
            type : 'iframe',
        padding : 0,
        margin  : 20,

        width     : 800,
        height    : 0,
        minWidth  : 100,
        minHeight : 400,
        maxWidth  : 9999,
        maxHeight : 9999,

        autoSize   : true,
        autoHeight : true,
        autoWidth  : false,

});
</script> 
```

But then both popups are same. I wnant to be different like second modal box to be 1000px wide and more height etc. How can i make that>

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:17:13.047

您可以为每个链接使用 HTML5`data-*`属性并为每个 iframe 传递不同的大小，例如将 html 设置为：

```
<li><a class="fancybox fancybox.iframe" href="give-me-meal.html" data-width="1000" data-height="600">first</a></li>
<li><a class="fancybox fancybox.iframe" href="give-me-meal.html" data-width="700" data-height="450">second </a></li> 
```

然后在您的脚本中，获取 and 的值`data-width`并使用回调`data-height`传递大小，例如`beforeShow`

```
<script type="text/javascript">
$(document).ready(function(){
 $(".fancybox").fancybox({
        padding : 0,
        margin  : 20,
        minWidth  : 100,
        minHeight : 400,
        maxWidth  : 9999,
        maxHeight : 9999,
        autoSize   : true,
        autoHeight : true,
        autoWidth  : false,
        beforeShow : function(){
          this.width = $(this.element).data("width");
          this.height= $(this.element).data("height");
        }

 }); // fancybox
}); // ready
</script> 
```

**请注意**，我没有指定 API 选项`type: "iframe"`，因为链接已经`class` `fancybox.iframe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:31:26.460

使用大多数 jQuery 插件执行此操作的常规方法是在调用它时指定选项，并为元素提供不同的 ID。

HTML：

```
<li><a class="fancybox fancybox.iframe" id="box1" href="give-me-meal.html">first</a></li>
<li><a class="fancybox fancybox.iframe" id="box2" href="give-me-meal.html">second </a></li> 
```

JS：

```
$("#box1").fancybox();
$("#box2").fancybox({
    height: 1000
}); 
```

# android - 未调用禁用的编辑文本的 onClickListener

> ID：12601622
> 
> 赞同：5
> 
> 时间：2012-09-26T12:21:33.013
> 
> 标签：android, eclipse, android-edittext

我正在尝试捕获禁用的edittext字段何时被按下。（我只想更改它，我不想在其中插入文本）。我为它分配了一个 onClickListener 但它没有被调用..有什么建议吗？还有其他我可以听的活动吗？

```
final EditText field = column.get(i);
field.setEnabled(false);
field.setClickable(true);
field.setFocusable(false);
field.setFocusableInTouchMode(false);

field.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                ((EditText)v).setText("a");

            }
        }); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:27:31.403

`View`当 a被禁用时，您不能传递单击事件。

因此，尝试更改：

```
field.setEnabled(false); 
```

到：

```
field.setEnabled(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:35:43.767

```
final EditText field = column.get(i);
field.setCursorVisible(false);

field.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                field.setText("something");
                field.clearFocus();
            }
        }
    }); 
```

# authentication - Servicestack v. 3.9.18 Authenticate 属性似乎不再起作用

> ID：12601623
> 
> 赞同：1
> 
> 时间：2012-09-26T12:21:32.847
> 
> 标签：authentication, servicestack

刚刚升级到 servicestack.mvc v. 3.9.18 以修复一些 null ref 异常错误，但现在 AuthenticateAttribute 似乎不再有任何效果。我在控制器中有这个动作：

```
[Authenticate]
public ActionResult Index() {
    var authSession = AuthSession;
    return View(); // <-- When I break here, I can see that AuthSesison is null
} 
```

当我设置断点并使用清除的 cookie 运行时，我可以中断此方法并看到 authSession 为空。这不应该发生，因为 Authenticate 属性应该将操作重定向到 LoginRedirectUrl，或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:35:06.567

这看起来像是一个最近的提交引入的逻辑错误，该提交刚刚[在此提交中修复，](https://github.com/ServiceStack/ServiceStack/pull/271)并且可在[v3.9.19+的 NuGet 中使用](https://nuget.org/packages/ServiceStack.Mvc/3.9.19)

# python - Providing an id for each recursed item in nested dictionary of lists of dictionaries

> ID：12601626
> 
> 赞同：0
> 
> 时间：2012-09-26T12:21:39.347
> 
> 标签：python, dictionary, tree, loops

extension of: [recursing a dictionary of lists of dictionaries, etc et al (python)](https://stackoverflow.com/questions/12532670/recursing-a-dictionary-of-lists-of-dictionaries-etc-et-al-python)

I'm working with a nested dictionary structure of 4 levels, I'm trying to iterate of the entire nested dictionary and give each individual dictionary an identification number(as a precursor to building a tree of the items and being able tell which item node is parent, which children a node has etc.)

I have this function:

```
def r(y):
    cnt = 1
    def recurse(y, count):
        for i in y.iteritems():
            count+=1
            i['id'] = count
            for k,v in y.iteritems():
                if isinstance(v, list):
                    [recurse(i, count) for i in v]
                else:
                    pass
    recurse(y, cnt)
    return y 
```

I put in my nested dictionary of lists of dictionaries,

and I get a mess, i.e. doesn't work like I thought it would.

```
{'sections': [{'id': 11, 'info': 'This is section ONE', 'tag': 's1'},
              {'fields': [{'id': 15,
                           'info': 'This is field ONE',
                           'tag': 'f1'},
                          {'elements': [{'id': 20,
                                         'info': 'This is element',
                                         'tag': 'e1',
                                         'type_of': 'text_field'},
                                        {'id': 20,
                                         'info': 'This is element',
                                         'tag': 'e2',
                                         'type_of': 'text_field'},
                                        {'id': 20,
                                         'info': 'This is element',
                                         'tag': 'e3',
                                         'type_of': 'text_field'},
                                        {'id': 20,
                                         'info': 'This is element',
                                         'tag': 'e4',
                                         'type_of': 'text_field'}],
                           'id': 16,
                           'info': 'This is field TWO',
                           'tag': 'f2'},
                          {'elements': [{'id': 20,
                                         'info': 'This is element',
                                         'tag': 'e5',
                                         'type_of': 'text_field'},
                                        {'id': 20,
                                         'info': 'This is element',
                                         'tag': 'e6',
                                         'type_of': 'text_field'},
                                        {'id': 20,
                                         'info': 'This is element',
                                         'tag': 'e7',
                                         'type_of': 'text_field'},
                                        {'id': 20,
                                         'info': 'This is element ONE',
                                         'tag': 'e8',
                                         'type_of': 'text_field'}],
                           'id': 16,
                           'info': 'This is field THREE',
                           'tag': 'f3'}],
               'id': 12,
               'info': 'This is section TWO',
               'tag': 's2'},
              {'fields': [{'id': 15,
                           'info': 'This is field FOUR',
                           'tag': 'f4'},
                          {'id': 15,
                           'info': 'This is field FIVE',
                           'tag': 'f5'},
                          {'id': 15,
                           'info': 'This is field SIX',
                           'tag': 'f6'}],
               'id': 12,
               'info': 'This is section THREE',
               'tag': 's3'}],
 'tag': 'test'} 
```

What I want to happen is that all items in level one are numbered, then all items in level two are numbered, then the third level, then the fourth. In this case the main item should be given an id of 1, then the sections be identified as 2,3,4 then fields as 5 on, then elements, etc. Looking back on this after sleeping on it I can see it as a start, but quite wrong.

EDIT: What I really need to do is create a tree of parent/child nodes from a nested dictionary structure so that I can iterate/insert/get/work with as needed the items from this tree. Is there a quick way to do that? I seem to be doing more work than I anticipated.

EDIT2: I found a solution to my [original question](https://stackoverflow.com/questions/12532670/recursing-a-dictionary-of-lists-of-dictionaries-etc-et-al-python). I just decided to use the in built id() function instead of an extra step of adding an id, and was able to create the minimal tree I needed, but this is still useful an exercise.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:13:57.773

要考虑的替代方法是双向链表。例如：

```
Index  Tag     Parent  Children        Info
0      test    -1      [s1,s2,s3]      ""
1      s1      0       []              "This is section ONE"
2      s2      0       [f1,f2,f3]      "This is section TWO"
3      f1      2       []              "This is field ONE"
4      f2      2       [e1,e2,e3,e4]   "This is field TWO"
5      e1      4       []              "This is element"
6      e2      4       []              "This is element"
       .
       .
       . 
```

这是一个概念表示，实际实现将使用子列的数字行索引而不是标签，因为您的输入数据可能是脏的，带有重复或缺失的标签，并且您不想构建依赖于标签的结构是独一无二的。可以轻松添加其他列。

您可以通过递归遍历树来构建表，但通过使用平面表（列表的 2D 列表）中的行来引用它们可能更容易处理树中的项目。

编辑：这是您对原始问题（未修饰的节点列表）的解决方案的扩展，它将结构化信息（标签、父级、子级等）添加到每个节点。如果您需要在树上上下导航，这可能很有用。

编辑：这段代码：

```
def recurse(y, n=[], p=-1):
    node = ["", p, [], "", ""]   # tag, parent, children, type, info
    vv = []
    for k,v in y.items():
        if k == "tag":
            node[0] = v
        elif k == "info":
            node[4] = v
        elif isinstance(v, list):
            node[3] = k
            vv = v
    n.append(node)
    p = len(n)-1
    for i in vv:
        n[p][2].append(len(n))
        n = recurse(i, n, p)
    return(n)

nodes = recurse(a)
for i in range(len(nodes)):
    print(i, nodes[i]) 
```

产生（为了便于阅读，手动分隔成列）：

```
 0 ['test', -1, [1, 2, 14],     'sections',   '']
 1 [  's1',  0, [],             '',           'This is section ONE']
 2 [  's2',  0, [3, 4, 9],      'fields',     'This is section TWO']
 3 [  'f1',  2, [],             '',           'This is field ONE']
 4 [  'f2',  2, [5, 6, 7, 8],   'elements',   'This is field TWO']
 5 [  'e1',  4, [],             '',           'This is element']
 6 [  'e2',  4, [],             '',           'This is element']
 7 [  'e3',  4, [],             '',           'This is element']
 8 [  'e4',  4, [],             '',           'This is element']
 9 [  'f3',  2, [10, 11, 12, 13], 'elements', 'This is field THREE']
10 [  'e5',  9, [],             '',           'This is element']
11 [  'e6',  9, [],             '',           'This is element']
12 [  'e7',  9, [],             '',           'This is element']
13 [  'e8',  9, [],             '',           'This is element ONE']
14 [  's3',  0, [15, 16, 17],   'fields',     'This is section THREE']
15 [  'f4', 14, [],             '',           'This is field FOUR']
16 [  'f5', 14, [],             '',           'This is field FIVE']
17 [  'f6', 14, [],             '',           'This is field SIX'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:26:53.600

您会得到重复的 id，因为您的`count`变量是本地的，一旦`recurse`函数退出，对它的任何更改都会丢失。你可以通过声明一个全局变量来绕过它，但由于你没有使用 的返回值`recurse`，你可以使用它来代替：

```
def r(y):
    def recurse(y, count):
        y['id'] = count
        count += 1
        for k,v in y.iteritems():
            if isinstance(v, list):
                for i in v:
                    count = recurse(i, count)
        return count
    recurse(y, 1)
    return y 
```

*编辑：刚刚意识到你正在寻找一个广度优先的 id 分配......这不会实现这一点，但我会留下答案，因为它可能有助于你开始。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:38:16.310

这是一个用迭代器替换`count`变量的解决方案：`itertools.count`

```
from itertools import count
def r(y):
    counter = count()
    def recurse(y, counter):
        for i in y.iteritems():
            i['id'] = next(counter)
            for k,v in y.iteritems():
                if isinstance(v, list):
                    [recurse(i, counter) for i in v]
                else:
                    pass
    recurse(y, counter)
    return y 
```

itertools.count() 将创建一个生成器，每次调用 next() 时都会返回下一个整数。您可以将它传递给递归函数，并确保不会创建重复的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:51:46.740

好吧，我有一个使用深度和父级来设置 ID 的解决方案：

```
>>> def decorate_tree(tree, parent=None, index=None):
    global ID
    if type(tree) == type({}):
        if parent is None:
            parent = '1'
            tree['id'] = parent
        else:
            tree['id'] = '{0}.{1}'.format(parent, index)
        if 'info' in tree:
            print tree['info'], '=>', tree['id']
        child_index = 1
        for key in tree:
            if type(tree[key]) == type([]):
                for item in tree[key]:
                    decorate_tree(item, tree['id'], child_index)
                    child_index += 1

>>> decorate_tree(d)
This is section ONE => 1.1
This is section TWO => 1.2
This is field ONE => 1.2.1
This is field TWO => 1.2.2
This is element => 1.2.2.1
This is element => 1.2.2.2
This is element => 1.2.2.3
This is element => 1.2.2.4
This is field THREE => 1.2.3
This is element => 1.2.3.1
This is element => 1.2.3.2
This is element => 1.2.3.3
This is element ONE => 1.2.3.4
This is section THREE => 1.3
This is field FOUR => 1.3.1
This is field FIVE => 1.3.2
This is field SIX => 1.3.3
>>> from pprint import pprint
>>> pprint(d)
{'id': '1',
 'sections': [{'id': '1.1', 'info': 'This is section ONE', 'tag': 's1'},
              {'fields': [{'id': '1.2.1',
                           'info': 'This is field ONE',
                           'tag': 'f1'},
                          {'elements': [{'id': '1.2.2.1',
                                         'info': 'This is element',
                                         'tag': 'e1',
                                         'type_of': 'text_field'},
                                        {'id': '1.2.2.2',
                                         'info': 'This is element',
                                         'tag': 'e2',
                                         'type_of': 'text_field'},
                                        {'id': '1.2.2.3',
                                         'info': 'This is element',
                                         'tag': 'e3',
                                         'type_of': 'text_field'},
                                        {'id': '1.2.2.4',
                                         'info': 'This is element',
                                         'tag': 'e4',
                                         'type_of': 'text_field'}],
                           'id': '1.2.2',
                           'info': 'This is field TWO',
                           'tag': 'f2'},
                          {'elements': [{'id': '1.2.3.1',
                                         'info': 'This is element',
                                         'tag': 'e5',
                                         'type_of': 'text_field'},
                                        {'id': '1.2.3.2',
                                         'info': 'This is element',
                                         'tag': 'e6',
                                         'type_of': 'text_field'},
                                        {'id': '1.2.3.3',
                                         'info': 'This is element',
                                         'tag': 'e7',
                                         'type_of': 'text_field'},
                                        {'id': '1.2.3.4',
                                         'info': 'This is element ONE',
                                         'tag': 'e8',
                                         'type_of': 'text_field'}],
                           'id': '1.2.3',
                           'info': 'This is field THREE',
                           'tag': 'f3'}],
               'id': '1.2',
               'info': 'This is section TWO',
               'tag': 's2'},
              {'fields': [{'id': '1.3.1',
                           'info': 'This is field FOUR',
                           'tag': 'f4'},
                          {'id': '1.3.2',
                           'info': 'This is field FIVE',
                           'tag': 'f5'},
                          {'id': '1.3.3',
                           'info': 'This is field SIX',
                           'tag': 'f6'}],
               'id': '1.3',
               'info': 'This is section THREE',
               'tag': 's3'}],
 'tag': 'test',
 'type_of': 'custom'}
>>> 
```

所以 ID 1.3.4 的父级是 ID 1.3，兄弟级是 ID 1.3.x，子级是 1.3.4.x ......这样检索和插入应该不会太难（移位索引）。

# android - unable to get rid of that outofmemory error

> ID：12601634
> 
> 赞同：0
> 
> 时间：2012-09-26T12:22:09.607
> 
> 标签：android, bitmapfactory

I want variable background to GridView and I run my app on a 800*480 resolution device. I am able to add variable background, but after some time I am getting `OutOfMemoryError`. I need to add that bitmap for each shelf and shelf has 800*200 dimensions.

I have tried `bitmap.recycle()`
and also

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType; 
```

and also

```
 public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
   }
   public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
   } 
```

But still I am unable to get rid of that `OutOfMemory` error. Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:29:43.343

它对我来说很好用。

```
 public static Bitmap decodeSampledBitmapFromResource(Resources res,
                int resId, int reqWidth, int reqHeight) {

            // First decode with inJustDecodeBounds=true to check dimensions
            final BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            options.inDither=false;                     //Disable Dithering mode
            options.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
            options.inInputShareable=true;  
            options.inTempStorage=new byte[32 * 1024]; 
            BitmapFactory.decodeResource(res, resId, options);

            // Calculate inSampleSize
            options.inSampleSize = calculateInSampleSize(options, reqWidth,
                    reqHeight);

            // Decode bitmap with inSampleSize set
            options.inJustDecodeBounds = false;
            return BitmapFactory.decodeResource(res, resId, options);
        }

        public static int calculateInSampleSize(BitmapFactory.Options options,
                int reqWidth, int reqHeight) {
            // Raw height and width of image
            final int height = options.outHeight;
            final int width = options.outWidth;
            int inSampleSize = 1;

            if (height > reqHeight || width > reqWidth) {
                if (width > height) {
                    inSampleSize = Math.round((float) height / (float) reqHeight);
                } else {
                    inSampleSize = Math.round((float) width / (float) reqWidth);
                }
            }
            return inSampleSize;
        } 
```

# php - ZF2 Zend_Translate content to get search completion

> ID：12601635
> 
> 赞同：0
> 
> 时间：2012-09-26T12:22:10.520
> 
> 标签：php, zend-framework2, zend-translate

i'm searching for a solution to solve the following problem in zf2:

i have a list of destinations, and i want a search-formular on my page with auto-completion. also the list is used to translate parts of my web-page, so i will use zend_translate to do this.

it it possible to "reverse-search" the list of translations with zend_translate? Example:

```
$translate->getKeysByExpression('*ger*'); 
```

result:

```
array (
    array ( 'key' => '__germany__', 'name' => 'germany'),
    array ( 'key' => '__trn_landwithger__', 'name' => 'landwithger'
) 
```

it is not the biggest problem if i have to load the complete list of translations, it is not that much.

or is it better to use mongodb as backend for zend_translate, and use direct queries to find the completion-candidates?

# regex - Regular express to validate url with ip and domain?

> ID：12601637
> 
> 赞同：0
> 
> 时间：2012-09-26T12:22:12.593
> 
> 标签：regex, url, ip-address

i am using following regular expression to validate a url that could be:

```
@"http[s]?://([\\w-]+\\.)+[\\w-]+(/[\\w- ./?%&=]*)?"; 
```

**A domin** www.abc.com (Validates it) subdomain.abc.com (Validates it)

**An Ip Address** 192.168.0.1 (Validates it) 182.494.29.23 (Validates it)

I want to restrict non valid ip addresses 192.192 (Above Expression Validates it as well) 192.192.192 (Above Expression Validates it as well)

any one guide me what changes i need to add in above expression to restrict these non valid ip addresses?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:32:18.677

你可以试试这个正则表达式：

```
/^http(s?)://((\w+\.)?\w+\.\w+|((2[0-5]{2}|1[0-9]{2}|[0-9]{1,2})\.){3}(2[0-5]{2}|1[0-9]{2}|[0-9]{1,2}))(/)?$/gm 
```

它有点长，但它适用于 abc.domain.com、domain.com 和有效的 IP 地址。你可以[在这里](http://regexr.com?329bj)测试它。

它分为“文本”部分，`(\w+\.)?\w+\.\w+`匹配任何没有空格且带有一个或两个点的文本，以及一个数字部分，`((2[0-5]{2}|1[0-9]{2}|[0-9]{1,2})\.){3}(2[0-5]{2}|1[0-9]{2}|[0-9]{1,2})`允许 0 到 255 之间的四个数字由点分隔。

可选地，最后可以有一个斜线。

如果您的意思不是允许由单个字符（例如 abc）组成的域，但至少像 www.bit.ly （即，具有 1 个或多个字符的免费前缀，“body”为三个或更多, 和两个或多个后缀），您可以将文本部分更改为：

```
(\w+\.)?\w{3,}\.\w{2,} 
```

参考：

[http://RegExr.com?2ri07](http://RegExr.com?2ri07)（正则匹配ip）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-04T08:55:12.357

你可以试试这个正则表达式。它支持http、https、ip地址、不同端口的ip地址和任何域名。

> /^http(s?)://((\w+.)?\w+.\w+|((2[0-5]{2}|1[0-9]{2}|[0-9] {1,2}).){3}(2[0-5]{3}|1[0-9]{3}|[0-9]{1,2})(:\d{1, 5})?)(((/)(.+)?)?)$/gm,

# java - Jersey REST Server: how to add monitor GUI

> ID：12601638
> 
> 赞同：0
> 
> 时间：2012-09-26T12:22:15.840
> 
> 标签：java, apache, rest, user-interface, jersey

Hej everyone,

**Current state of my Project:** As part of a distributed framework I'm working on I use a REST. Its a simple implementation in Java using Jersey and runs on Tomcat. It consumes calls from lots of other web services and has no direct user-interaction (so far). However beeing a central part of the whole framework and a lot of the other developer have to see its internal status. So far I had a simple REST call returning the log file and some extra information from the service.

**My task:** For demonstration reasons I need to make this interface a bit more graphic (maybe add some GUI functions later). Also I have to change it from pull based to push based. This pretty much means I cant do it as just another rest call anymore. //EDIT more details for the GUI: Currently the GUI only needs to be able to show some status pictures but it needs to update itself. It has to run in a browser. Later on some interactive parts might be needed (pushing buttons)

**Question:** Is there a simple and easy to integrate tool/framework that would allow me to create a simple GUI (allowing for server push)? At the moment I,m looking at Vaadin but im not sure if thats not overkill. Also I dint get it to work alongside the other code so far.

Hope someone can help me on this. I'm an absolute noob with all that web-service stuff, so I need something as simple as possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:28:39.630

如果您必须推送信息，则让其他服务注册一个回调地址并对它们进行休息调用。（定义一个由他们实现的接口！）这就是我如何满足项目中的推送要求，并被客户很好地接受。这是非常万无一失的。

我不太确定你想要那个 GUI 什么？也许提供一个带有 websockets 的 HTML5 页面来推送更新数据？

# bash - How to set Hyperlinks in the mail sent from Unix Box?

> ID：12601639
> 
> 赞同：0
> 
> 时间：2012-09-26T12:22:16.123
> 
> 标签：bash

I am sending a mail from my unix machine to my Outlook. I want to add a hyperlink to the content of the mail so that I can click on that hyperlink so that it will go to that particular line.. Please help..

eg.. Subject: Testsmail

para1 para2 para 3 ... hyperlinks to be set here

Sabarish bnadzsbcl blkbklbaklb lkbkl bklb lbkbklb klb kl blkbklbbnlb blblkbklblkbklblkblblkbklbklbklbklbladvgfuqggvwhipowehopvhwpohpohvwhbhahhkvk

Happy ksankqihfoihihfihiqhfihqiwfhoiqhfihqfoihiqhihqfihihqfehiqhfihfoiqhifhihqfoiiwhfihqoihiqhcbakbkbckabkcbbakbcjabkjbckabkabkbkacbkcakjbkcakba

Sad a';sjcf;la;fja;;fjajfajjfclaj;lajsljf;ljaljfaljvgaswdegfuewweifwiuggfwguiqw

Here If i click on para1 it should come to Sabarish..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:19:48.833

下面是一种从 BASH 脚本执行此操作的方法。您需要将电子邮件的内容类型设置`HTML`为执行您想要的操作。

```
echo "<html><body><a href="http://www.domain.com">Link text</a></body></html>" > mailbody.html
#You can add more text to the mailbody.html file, but in html format
MAILFROM=admin@domain.com
MAILTO=receiver@domain.com
SUBJECT="HTML Email"

( cat <<HERE; cat mailbody.html ) | sendmail -oi -t
From: ${MAILFROM}
To: ${MAILTO}
Subject: ${SUBJECT}
Content-Type: text/html

HERE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:31:15.617

首先，你应该制作html页面

# para1链接是这样的：

要链接到锚点，您需要： 1 创建指向锚点的链接 2 创建锚点本身。

使用标签创建锚点。如果你想创建一个名为 chapter4 的锚点，你只需在你想要锚点所在的位置添加这一行：

完成此操作后，您可以使用普通标签创建指向锚点的链接，如下所示：

点击这里阅读第 4 章。

注意：当链接到页面上的锚点时，您需要在锚点前面放一个#。

当您链接到同一页面上的锚点时，只需输入

第 4 段

之后，您应该将 html 页面作为 MIME 附件发送。对此使用 mpack 程序。

# java - 如何在 Java 中捕获 ORA-28011 或 ORA-28002？

> ID：12601645
> 
> 赞同：2
> 
> 时间：2012-09-26T12:22:41.733
> 
> 标签：java, oracle, jdbc, passwords, handle

我必须在我的应用程序中处理 ORA-28011 和 ORA-28002。但是这些被 JDBC 抑制的 ORA 警告（我认为）
我怎样才能在 Java 中捕捉到这些？
有什么 JDBC 属性吗？

我不喜欢直接从`dba_users`表中查询状态。

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:25:20.393

它们**不受**JDBC 抑制。您可以使用[`Connection#getWarnings()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#getWarnings%28%29)( `Connection`-related warnings) 检索数据库报告的第一个警告，然后[`SQLWarning#getErrorCode()`](http://docs.oracle.com/javase/7/docs/api/java/sql/SQLException.html#getErrorCode%28%29)用于获取引发的供应商特定警告代码，对于 Oracle JDBC 驱动程序，该代码将为您提供`ORA`编号：

```
Connection connection;
// ...
SQLWarning warn = connection.getWarnings();
int errorCode = warn.getErrorCode();
if (errorCode == 28011) {
  // ORA-28011
} else if (errorCode == 28002) {
  // ORA-28002
} 
```

如果您想获取更多警告，请使用[`SQLWarning#getNextWarning()`](http://docs.oracle.com/javase/7/docs/api/java/sql/SQLWarning.html#getNextWarning%28%29).

### 参考：

*   [处理 SQL 异常——检索警告](http://docs.oracle.com/javase/tutorial/jdbc/basics/sqlexception.html#retrieving_warnings)

# asp.net - 使用开放图形 api 和 C# 将操作发布到 facebook

> ID：12601649
> 
> 赞同：0
> 
> 时间：2012-09-26T12:22:48.160
> 
> 标签：asp.net, asp.net-mvc-3, facebook-graph-api, facebook-c#-sdk, facebook-oauth

使用开放图形 api 发布 facebook 操作时出现以下错误，

**（例外 - #1611072）您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：post。**

这些操作已正确映射到 facebook 应用程序仪表板中的对象，我还在调试器中测试了打开的 grap 对象（我的网页）并且没有警告。页面中的元标记已正确设置。

我正在使用 C# 发布操作。

代码如下：

```
var fb = new FacebookClient("XXX");
var parameters = new Dictionary<string, object>
                                     {
                                         {"og:type", "testnamespace:post"},{"og:url","http://test.sitename.com/postdetails/3247/Hello-ktm"},
                                         {"og:title", "test post"},
                                         {
                                             "og:image",
                                             "http://cdn.test.com/842-ff7c1e64-8d6f-4989-bf77-1a1f1520b39e_th.png"
                                             }
                                     };  
var response = fb.Post("me/testnamespace:share", parameters); 
```

请帮忙。很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:41:10.843

> 必须至少指定以下属性之一：post。

看起来您将操作连接到的对象的名称是`post`。

因此，在发布操作时，您还必须提供一个名为 的参数`post`，其中包含指向您的 OG 对象的 URL。

# ios - Animate View properties by moving other sibling views

> ID：12601654
> 
> 赞同：1
> 
> 时间：2012-09-26T12:23:17.957
> 
> 标签：ios, uiviewanimation

I am trying to create an iOS UI where I have a set of subviews arranged as a grid on the UI and on clicking any of them I would like to expand this subview to a larger size. I am able to do the animation to expand this subview but I would also like this functionality such that other subviews nearby are pushed away.

On dimissing, this expanded view it should contract to the original size and bring back the other views to its original location.

I am thinking of a variety of ways to implement this but there are many use cases, and hence I would like some pointers in the right direction?

Does iOS itself provide a functionality by which expanding a sibling view contracts/moves the neighboring one? If not, what other ways are there to implement this?

Toms

# php - 如何在 Joomla 中创建子菜单！前端

> ID：12601657
> 
> 赞同：0
> 
> 时间：2012-09-26T12:23:28.563
> 
> 标签：php, joomla, joomla2.5, joomla1.7, joomla1.6

我想要做的是使用下面的代码创建一个子菜单（在 Joomla！后端），但它不起作用。

```
JSubMenuHelper::addEntry(JText::_('test'), 'index.php?option=com_test&controller=test', $controller == 'testcon'); 
```

我在这里拍了一张样本图片。它解释了我想要什么类型的菜单。

[示例菜单在这里。检查这张照片](http://i.stack.imgur.com/Ibp6g.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:28:53.187

您应该在管理面板中创建菜单和（子菜单），但我想您已经知道 :) 稍后您使用 CSS 添加外观。我认为你应该用 CSS 而不是 PHP 来做 ti。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:36:50.853

JSubMenuHelper 设计用于 Joomla! 管理员部分，它不是为前端制作的。

如果你真的想得到它，你需要包含该文件：

```
/administrator/includes/toolbar.php 
```

此外，您还会有一堆丢失的 CSS（也许还有 js）文件，您还需要包含这些文件（形成管理模板文件夹）

**但是我看不出你想在前端使用 JSubMenuHelper 的原因。我强烈建议不要使用它。**

# widget - Develop App Like NetFlix Google TV

> ID：12601661
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:23:45.150
> 
> 标签：widget, google-tv, television

I want to develop an application like in netflix in the google tv. Problem is that I don't how to create the icon where user clicks and website opens same as netflix

Can anybody familiar with this issue.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:50:11.037

你的意思是你想创建一个包装应用程序，以便它出现在启动器中？看看摩托罗拉的这篇文章[http://community.developer.motorola.com/t5/MOTODEV-For-Enterprise/Hybrid-Web-Android-Apps-Applying-an-Android-Wrapper-to-an/ba-第 21370 页](http://community.developer.motorola.com/t5/MOTODEV-For-Enterprise/Hybrid-Web-Android-Apps-Applying-an-Android-Wrapper-to-an/ba-p/21370)。您还需要一个 Google Play 帐户才能通过 Eclipse 提交应用程序并在其中构建应用程序，并且您需要记住在 Manifest 中将 android.hardware.touchscreen 功能要求设置为 false。[http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

我建议你花钱请人为你做。

# java - 启动新线程而不是放入队列

> ID：12601664
> 
> 赞同：1
> 
> 时间：2012-09-26T12:23:51.687
> 
> 标签：java, multithreading, threadpool, threadpoolexecutor

从 javadoc 为`ThreadPoolExecutor`：

> 当在方法execute(java.lang.Runnable) ...中提交新任务时。如果运行的线程数大于corePoolSize但小于maximumPoolSize，则只有在队列已满时才会创建新线程。

在这种情况下，我怎样才能让它`ThreadPool`启动新线程而不是将任务提交到队列？

例子：

我有 corePoolSize=5 和 maxPoolSize=10 的线程和无界队列。

假设*corePoolSize*线程现在很忙，并且新任务到达 - 池**必须**启动新线程并执行新任务。

假设*maxPoolSize*线程现在很忙，并且新任务到达 - 池必须将任务持久化到队列中，并且第一个空闲线程必须接受这个任务并执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:34:07.567

如果您想要一个具有最大大小的线程池，其中任务仅在所有线程都忙时才排队。

```
ExecutorService service = Executors.newFixedThreadPool(numberOfThreads); 
```

* * *

缓存线程池，不会对任务进行排队，而是根据需要创建一个新线程。如果一个线程是空闲的，它将重新使用一个线程。

```
ExecutorService service = Executors.newCachedThreadPool(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T21:34:17.993

我刚刚发布了这个确切的问题并在那里提供了答案：

> [如何让 ThreadPoolExecutor 在排队之前将线程增加到最大值？](https://stackoverflow.com/questions/19528304/how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing/19528305#19528305)

很抱歉没有事先找到这个问题，否则我只会回答它。

总结答案，我扩展`LinkedBlockingQueue`它总是返回 false `queue.offer(...)`，如果需要，它将向池中添加额外的线程。如果池已经处于最大线程并且它们都忙，`RejectedExecutionHandler`则将被调用。然后是处理程序`put(...)`进入队列。

我的答案中有示例代码。再次，对不起这个重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:32:56.333

如果您想每次都启动新线程而不考虑空闲线程的可用性，那么您根本不需要 ThreadPool - 只需手动创建和启动新线程。这更好，因为您的线程在完成工作后会立即死亡，并且在 ThreadPool 中他们会等待一些时间来等待新工作但永远不会得到它，因此只会浪费内存。

# asp.net - 搜索框从 2000 条记录中选择一条记录

> ID：12601671
> 
> 赞同：1
> 
> 时间：2012-09-26T12:24:28.007
> 
> 标签：asp.net, ajax, jquery, jquery-plugins

我将为搜索框创建一个 jquery ajax 控件

搜索框应匹配文本中的每个字符

例如，键入“er”然后结果像程序员雇主 eric derry

此控件将一次显示 10 条记录，滚动条可滚动匹配的所有其他记录。

以 2000 员工姓名和他们的 ID 为例

像 102 samual joy roy

任何建议

请帮忙

回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:28:39.400

除非我误解了您的问题，否则您似乎正在寻找自动完成控件。看看[jquery-autocomplete](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:53:05.163

@Claudio 的优秀例子。首先实现他的链接概念，如果你愿意，你可以在这里看到一些其他的例子。

1.  [http://oslund.ca/demos/ausu/](http://oslund.ca/demos/ausu/)

2.  [访问他们的演示部分@底部并在 .net 中相应地更改 php 中的代码](http://www.marcofolio.net/webdesign/a_fancy_apple.com-style_search_suggestion.html)

# javascript - SVG动画如何累积应用值

> ID：12601678
> 
> 赞同：0
> 
> 时间：2012-09-26T12:24:53.430
> 
> 标签：javascript, animation, svg, rotation

我正在做一些需要从 javascript 旋转一些 SVG 中的元素的工作。为此，我一直在测试如何设置 SVG 项目，定义动画，然后基于任意事件运行动画，在 SVG 本身之外（来自 js）。在动画运行之前，我设置了旋转的度数以及我希望旋转发生的速度。

这一切都很好。

我的问题是，当动画完成时，svg 会恢复到原来的状态。这意味着如果我将 SVG 旋转到 90 度，当动画完成时，SVG 会立即恢复到 0 度。

我已经查看了[w3.org](http://www.w3.org/TR/SVG/animate.html#AdditionAttributes)上的 svg doco ，特别是添加和累积选项，但它们似乎对我不起作用。

我确定这是微不足道的，但我看不出问题的原因是什么。

[JSfiddle 问题示例](http://jsfiddle.net/GRQSw/1/)

感谢罗伯特，我有解决方案。我在下面添加了解决方案。

[JSfiddle 解决方案示例](http://jsfiddle.net/FwVZD/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:30:31.857

将 fill="freeze" 添加到 animateTransform 元素。

# datasource - 如何检查 WSO2 ESB 3.0.1 中可轮询连接的状态

> ID：12601683
> 
> 赞同：0
> 
> 时间：2012-09-26T12:25:02.750
> 
> 标签：datasource, wso2, wso2esb

我在 ESB 中有一个数据源：

```
Driver              oracle.jdbc.driver.OracleDriver 
URL                 jdbc:oracle:thin:@(DESCRIPTION = ... ) 
Pool Type           BasicDataSource
Repository Type     JNDI 
Max Active          20 
Max Idle            1 
Max Wait            30000 
Min Idle            0 
Initial Size        0 
Max Open Statements 50 
Transaction Isolation   TRANSACTION_UNKNOWN
Auto Commit         false
Pool Statements     true
Test On Borrow      true
Test While Idle     true
Validation Query    select 1 from dual 
```

在数据库级别，我对我的用户 100 个连接有限制。

在 ESB 数据源 20 中。

但有时我会达到数据库限制：ORA-02391：超出同时 SESSIONS_PER_USER 限制

如何检查池中有多少连接？

我尝试了 JMX，但没有找到合适的 mbean。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:15:37.167

JNDI 连接中似乎存在错误。

当我使用基于 JNDI 的数据源并且最大活动 = 20 时，

服务器允许向每个线程借用 20 个连接！

如果我使用内存数据源，那么 20 是所有线程的限制。

所以，问题解决了，但bug仍然存在。

# c# - 如何使用 MVVM 在 WPF 应用程序中的 InvokeCommandAction 中将多个参数作为 CommandParameter 传递

> ID：12601684
> 
> 赞同：2
> 
> 时间：2012-09-26T12:25:03.273
> 
> 标签：c#, wpf, mvvm

我正在使用 System.Windows.interactivity.dll 通过以下方式在我的 ViewModel 中获取鼠标事件。

```
 <ListBox x:Name="listBox" ItemsSource="{Binding HeaderList}" DisplayMemberPath="Text" Width="Auto"   Margin="0,0,0,300" Height="Auto"  >
    <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseLeftButtonUp">
                <i:InvokeCommandAction Command="{Binding MouseLeftButtonUpCommand}" 
                         CommandParameter="{Binding SelectedItem, ElementName=listBox}"/>
        </i:EventTrigger>

        </i:Interaction.Triggers>
</ListBox> 
```

在 ViewModel 中。

```
 public class Headers
    {
        public Headers()
        {
            IsSelected = false;
        }

        public string Text { get; set; }
        public ListBox Control { get; set; }
        public bool IsSelected { get; set; }
    }
   public ObservableCollection<Headers> HeaderList
    {
        get { return _headerList; }
        set
        {
            _headerList = value;
            base.OnPropertyChanged("HeaderList");
        }

    }
 public ICommand MouseLeftButtonUpCommand { get; set; }
 public DesignTemplateViewModel()
    {
        string file = SessionHelper.FilePath;
        List<string> columns = new List<string>();

        if (!string.IsNullOrEmpty(file))
        {
            ExcelHelper Excel = new ExcelHelper(file);
            columns = Excel.GetHeader();
        }
        else
        {
            columns.Add("Name");
            columns.Add("FatherName");
            columns.Add("MotherName");
            columns.Add("Class");
            columns.Add("RollNo");
            columns.Add("ModeOfTransport");
            columns.Add("Phone");
            columns.Add("Mobile");
        }
        HeaderList = new ObservableCollection<Headers>();

        foreach (string column in columns)
        {
            HeaderList.Add(new Headers
            {
                Text = column,
            });
        }

        MouseLeftButtonUpCommand = new RelayCommand((item) => OnMouseLeftButtonUp((Headers)item));
    }
  private void OnMouseLeftButtonUp(Headers sender)
    {
        ListBox control = sender.Control as ListBox;
        DragDrop.DoDragDrop(control, sender.Text, DragDropEffects.Copy);
    } 
```

所以在这里我需要传递多个对象，例如生成此事件的控件、鼠标相关属性等。现在我正在传递单个参数，这段代码工作正常。所以我的问题是如何从 Xaml(View) 传递多个参数并在此 ViewModel 上访问它们。任何代码帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:46:57.247

您可以尝试自定义`Converter and MultiBinding`

```
<CommandParameter>
      <MultiBinding Converter="{StaticResource CustomConverter}">
       <Binding ElementName=".." Path=".."/>
       <Binding ElementName=".." Path=".."/>
      </MultiBinding>
</CommandParameter> 
```

转换器

```
class CustomConverter : IMultiValueConverter 
{
    public object Convert (object[] Values, Type Target_Type, object Parameter, CultureInfo culture) 
    {
        var findCommandParameters = new FindCommandParameters();
        findCommandParameters.Property1 = (string)values[0];
        findCommandParameters.Property1 = (string)values[1];
        return findCommandParameters;
    }
    public object[] ConvertBack(object value, Type[] targetTypes, object parameter,   System.Globalization.CultureInfo culture)
    {
       throw new NotImplementedException();
    }
} 
```

参数

```
public class FindCommandParameters
{
  public string Property1 { get; set; }
  public string Property2 { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-15T07:39:02.930

我同意阿吉拉斯的观点。这就是它的完成方式。我改进了 Aghilas 的代码，以澄清缺少的内容。请注意，“i:InvokeCommandAction.CommandParameter”必须放在 invokeCommandAction 声明中。

```
 <ListBox x:Name="listBox" ItemsSource="{Binding HeaderList}" DisplayMemberPath="Text" Width="Auto"   Margin="0,0,0,300" Height="Auto"  >
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseLeftButtonUp">
                <i:InvokeCommandAction Command="{Binding MouseLeftButtonUpCommand}">
                    <i:InvokeCommandAction.CommandParameter>
                        <MultiBinding Converter="{StaticResource XAMLResourceAddConverter}">
                            <Binding ElementName="listBox" Path="SelectedItem"/>
                            <Binding ElementName="listBox" Path="SelectedItem"/>
                        </MultiBinding>
                    </i:InvokeCommandAction.CommandParameter>
                </i:InvokeCommandAction>
            </i:EventTrigger>

        </i:Interaction.Triggers>
    </ListBox> 
```

# validation - 验证maven属性值

> ID：12601691
> 
> 赞同：3
> 
> 时间：2012-09-26T12:25:21.810
> 
> 标签：validation, maven, properties

有一个带有属性的pom：

```
<properties>
    <prop.name>some.value</prop.name>
</properties> 
```

生成“some.value”并且可能包含非法字符，在这种情况下构建应该失败。

在构建时验证属性值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:34:40.220

在enforcer中有一个规则专门检查某个属性，该规则也可以检查该属性的值：[http ://maven.apache.org/enforcer/enforcer-rules/requireProperty.html](http://maven.apache.org/enforcer/enforcer-rules/requireProperty.html)

# r - R 和 1 行的矩阵

> ID：12601692
> 
> 赞同：5
> 
> 时间：2012-09-26T12:25:27.770
> 
> 标签：r

是否可以在 R 中有一个只有 1 行的矩阵？

这是我的代码：

```
 nas <- which(!is.na(y))   
   x <- x[nas,]
   y <- y[nas]

   ...
   data.frame(y,x) 
```

这个想法是我有一个向量y和矩阵x。Y 可以包含一些 NA 值，我想从向量和矩阵中找到并删除这些值的索引。

后来我想用x框住y。然而，问题是，当 y 中只有一个值不是 NA 时。这意味着我必须从 y 中删除除 1 之外的所有元素，从 x 中删除除 1 行之外的所有元素，这具有只有 1 行的矩阵，这似乎被转换为数字，这似乎破坏了 data.frame 操作。我希望它返回包含 1 行的帧：y x1 x2 ..，而不是我得到：

```
 y    x
1  0 12.0
2  0 14.8
3  0 14.2
4  0 14.8
5  0  2.0
6  0  4.0
7  0  1.0
8  0  2.0
9  0 26.0
10 0  4.0
11 0  6.0
12 0  2.0
13 0 16.0 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T12:29:03.410

您需要指定`drop = FALSE`停止`R`将矩阵或数组强制为尽可能少的维数。有关`?`[``更多详细信息，请参阅。

```
x <- matrix(1:4,ncol=2)
x[1,]
## [1] 1 2
x[1,,drop=F]
##      [,1] [,2]
## [1,]    1    3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:29:19.843

当然，正如 Patrick Li 在评论中指出的那样，但如果您使用该`vector()`函数创建它，则不是。

所以：

```
R> matrix(1:4, nrow=1)
     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
R> matrix(1:4, ncol=1)
     [,1]
[1,]    1
[2,]    2
[3,]    3
[4,]    4
R> matrix(1:4, ncol=2)
     [,1] [,2]
[1,]    1    3
[2,]    2    4
R> 
```

有关使用的更多选项`matrix()`，请参阅其帮助页面。有关非常基本的问题的更多信息（提示：）`drop=FALSE`，请参阅[R 常见问题解答](http://cran.r-project.org/doc/FAQ/R-FAQ.html)。

# multithreading - 在 JavaEE 6 中执行子进程

> ID：12601696
> 
> 赞同：2
> 
> 时间：2012-09-26T12:25:42.923
> 
> 标签：multithreading, subprocess, java-ee-6, application-server

我正在尝试从我的应用程序服务器中执行子进程（Glassfish 3.1.2）

因此我发现了 Apache Commons Exec 库。问题是这个库创建了不应在应用服务器上完成的线程，因为服务器不知道这些线程。
有什么办法可以解决这个问题？

是否可以创建一个用 Java SE 编写的消息组件，该组件使用包含有关待处理作业信息的消息并将其注册到应用程序服务器？

应用程序服务器将不必处理运行时异常和线程，而只需使用包含结果或异常的消息。

你有更好的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:44:21.100

您可以使用：

*   [MDB](http://docs.oracle.com/javaee/6/tutorial/doc/gipko.html)（如 duffymo 所指），
*   [Servlets 3.0 异步处理](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html)，
*   [异步 EJB 调用](http://docs.oracle.com/javaee/6/tutorial/doc/gkkqg.html)。

实际上，它应该为您提供与普通子流程类似的功能。

使用与 Java EE 通信的 Java SE 组件只是为了克服自己使用线程的问题，这听起来有点矫枉过正。只需阅读上述解决方案并尝试其中任何一个符合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:34:31.563

消息驱动的 bean 是为异步处理而设计的。这可能是您问题的解决方案。您可以创建一个单独的侦听器线程池，其大小可以处理流量。

# html - 文本溢出：省略号在 Chrome 中包含 div 的 div 中不起作用

> ID：12601699
> 
> 赞同：5
> 
> 时间：2012-09-26T12:25:50.750
> 
> 标签：html, css

我想让所有文本都以“...”结尾，但它只适用于内部 div：

```
div {
  border: solid 2px blue;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 40px;
}
```

```
<div>Test test test test test test
  <div>asdasdasdasdasd</div>
</div>
```

[http://jsfiddle.net/JU8Up/](http://jsfiddle.net/JU8Up/)

是否有任何解决方案，以便外部 div 中包含的文本也获得“...”？

编辑：似乎是 chrome 问题，但下面答案中的修复仍然有效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:32:16.677

它通过添加`float: left;`到 div CSS 来工作，但没有任何进一步的上下文，我无法评论您的实现中可能产生的副作用。

[这里的例子](http://jsfiddle.net/JU8Up/1/)。

# .net - 在 Windows Workflow Foundation 中使用 ByRef 变量？

> ID：12601700
> 
> 赞同：1
> 
> 时间：2012-09-26T12:26:01.360
> 
> 标签：.net, workflow-foundation-4, workflow-foundation

假设我创建了一个简单的工作流，其中包含两个变量`result`type`Boolean`和`myInt`type `Integer`。现在添加一个活动“分配”，放置`result`在结果框中，并`Integer.TryParse("22", myInt)`在右手表达式中。运行此活动后，变量仍然具有值`0`。

为什么`TryParse`调用的结果没有正确存储在变量中？（这里也不会产生错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:48:13.647

WF 不是这样工作的。变量没有输入/输出的概念作为参数。它们没有实现隐式运算符，因此结果永远不会按您的意愿存储。

您可以实现自己的 TryParse 活动，也可以像这样使用[InvokeMethod](http://msdn.microsoft.com/en-us/library/system.activities.statements.invokemethod.aspx)：

```
var resultVar = new Variable<bool>("result");
var myIntVar = new Variable<int>("myInt");

var activity = new Sequence
{
    Variables = 
    {
        resultVar,
        myIntVar
    },
    Activities =
    {
        new InvokeMethod
        {
            TargetType = typeof(int),
            MethodName = "TryParse",
            Result = new OutArgument<bool>(resultVar),
            Parameters = 
            {
                new InArgument<string>("22"),
                new OutArgument<int>(myIntVar)
            }
        },
        new WriteLine
        {
            Text = new VisualBasicValue<string>(@"""INT: "" & myInt")
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T23:56:55.303

如果您查看 obj/x86/Debug 或项目中的临时文件所在的位置，您会发现一些可以满足您好奇心的中间 .cs 文件。我试过了，你得到了一个带有私有 int myInt 和私有 bool 结果的类以及一个使用这些变量的 tryparse 语句。因此没有爆炸，尽管我确实在输出窗口中看到了一些问题！

# sql - 在 SQL Server 中根据配置表生成汇总数据

> ID：12601708
> 
> 赞同：4
> 
> 时间：2012-09-26T12:26:55.277
> 
> 标签：sql, sql-server-2008, tsql, summary

我正在尝试从 SQL Server 2008 中的分数列表生成摘要。
我有两个表：[**SQL Fiddle 链接**](http://sqlfiddle.com/#!3/85314)

该`ScorePerson`表包含人员的 ID 和他们从 -5 到 15 的分数。我的 SQL/存储过程的最终用户需要创建如下摘要：

```
Scoreband| TotalNoOfPeople | AvgScore
--------------------------------
-5 to 0  | 2               | -2
0 to 5   | 3               |  2
5 to 10  | 2               |  8
10 to 15 | 3               | 13.3 
```

`ScoreMinMax`最终用户应该可以从表格中配置得分带，即最小值和最大值。

我曾尝试使用 CASE stement 来实现这一点，但它会将摘要生成为列。II 可能需要旋转它或从多个选择语句中使用 UNION。`ScoreMinMax`但是，如果向表中添加了新行，这种方法似乎无法扩展。到目前为止，我能够使用 CROSS JOINT 获得类似于上面示例的一些结果，但它并不总是产生正确的结果。

有人能指出我如何实现这一目标的正确方向吗？

[**SQL 小提琴链接**](http://sqlfiddle.com/#!3/85314)

```
ScorePerson - contains actual scores 
```

![表格截图](../Images/36789f1ba960dd867fcdb0a26e973ded.png)

```
ScoreMinMax - the configuration for min and max score bands 
```

![在此处输入图像描述](../Images/d6bd3b39a2835bbf1789908349b1545a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:33:12.550

您可以使用聚合函数：

```
select title ScoreBand,
  count(*) TotalNoPeople, 
  avg(p.score) AvgScore  
from scoreperson p
inner join scoreminmax m
  on p.score between m.minscore and m.maxscore
group by Title
order by cast(left(title, 2) as int) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/85314/19)

如果您在现有范围内没有人，您可以使用以下方法：

```
select case when title is not null 
            then title
            else 'No Range' end ScoreBand,
  count(personid) TotalNoPeople, 
  avg(p.score) AvgScore  
from scoreperson p
left join scoreminmax m
  on p.score between m.minscore and m.maxscore
group by id, Title
order by id 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b87b8/4)

编辑＃2，根据您可以使用的评论：

```
select m.title ScoreBand,
  count(p.personid) TotalNoPeople, 
  avg(p.score) AvgScore  
from scoreminmax m
left join scoreperson p
  on p.score between m.minscore and m.maxscore
group by m.id, m.Title
order by m.id; 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/14b64/14)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:32:42.090

尝试

```
Select Title, count(personid), AVG(score)
from 
    scoreminmax  
    left join scoreperson 
    on scoreperson.score>=minscore 
    and scoreperson.score<maxscore 
group by ID,title 
order by ID 
```

请注意，我仅在其中一组中包含了边界（0,5,10）的分数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:36:01.327

```
select smm.Title Scoreband, count(*) TotalNoOfPeople, avg(sp.Score) AvgScore
from 
    ScorePerson sp
    inner join
    ScoreMinMax smm on sp.Score >= smm.MinScore and sp.Score < smm.MaxScore
group by smm.Title 
```

# java - 如何使用swing使用tab键将一个字段移动到另一个字段？

> ID：12601711
> 
> 赞同：1
> 
> 时间：2012-09-26T12:27:14.363
> 
> 标签：java, swing, jpanel, jcomponent, gridbaglayout

我正在创建一个扩展的类`JPanel`。我在该面板中添加了几个文本区域和下拉菜单`GridBagConstraints`。现在我想使用键盘的 tab 键将一个字段移动到另一个字段。我还想提一下，以前的 tab 键正在扩展文本区域。

这就是我写这行的原因：`restuarantLocation.setTabSize(0);`现在它停止了扩展。

但我不知道如何使制表键工作？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:36:15.827

当您在任何文本区域内按 TAB 时 - 它会创建制表符。所以你的代码`setTabSize(0)`没有解决任何问题 - 它只是将制表宽度设置为零。

如果您只是在寻找焦点更改热键 - Ctrl+TAB 将在任何 Swing 文本组件中使用简单的 TAB，并将焦点切换到下一个可用且可聚焦的组件。Ctrl+Shift+TAB 将焦点切换到上一个可用且可聚焦的组件。

如果您希望 TAB 以与其他 Swing 组件相同的方式运行 - 您可以添加自定义 TAB 操作：

```
public static void main ( String[] args )
{
    SwingUtilities.invokeLater ( new Runnable ()
    {
        public void run ()
        {
            JFrame frame = new JFrame ();

            frame.setLayout ( new GridLayout ( 1, 2 ) );

            AbstractAction transferFocus = new AbstractAction ()
            {
                public void actionPerformed ( ActionEvent e )
                {
                    ( ( Component ) e.getSource () ).transferFocus ();
                }
            };

            JTextArea textArea1 = new JTextArea ();
            textArea1.getInputMap ().put ( KeyStroke.getKeyStroke ( "TAB" ), "transferFocus" );
            textArea1.getActionMap ().put ( "transferFocus", transferFocus );
            frame.add ( new JScrollPane ( textArea1 ) );

            JTextArea textArea2 = new JTextArea ();
            textArea2.getInputMap ().put ( KeyStroke.getKeyStroke ( "TAB" ), "transferFocus" );
            textArea2.getActionMap ().put ( "transferFocus", transferFocus );
            frame.add ( new JScrollPane ( textArea2 ) );

            frame.setSize ( 500, 200 );
            frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
            frame.setLocationRelativeTo ( null );
            frame.setVisible ( true );
        }
    } );
} 
```

请注意，您必须：

1.  在输入映射中首先将默认选项卡 KeyStroke 替换为您的操作名称
2.  将您的自定义操作添加到组件操作映射中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T05:14:41.257

使用这个例子：

```
Vector vector=new Vector(3);
vector.Add(textBox1);
vector.Add(textBox2);
vector.Add(textBox3);
clsTabOrder newPolicy=new clsTabOrder(vector);
setFocusTraversalPolicy(newPolicy);
textBox1.requestFocus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:10:29.063

如果内置的制表符不起作用，您可能需要查看有关焦点遍历的 Java 教程。

[http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-28T12:06:17.327

```
 jTextField1.setNextFocusableComponent(jTextField2);
    jTextField2.setNextFocusableComponent(jTextField3);
    jTextField3.setNextFocusableComponent(jTextField4);
    jTextField4.setNextFocusableComponent(jTextField5); 
```

当你不显示 jframe 点击自动点击 jtextfild

```
 this.jTextField11.requestFocusInWindow(); 
```

# c# - c#中的序列乘法

> ID：12601717
> 
> 赞同：3
> 
> 时间：2012-09-26T12:27:44.483
> 
> 标签：c#, python

> **可能重复：**
> [是否有一种简单的方法可以返回重复 X 次的字符串？](https://stackoverflow.com/questions/3754582/is-there-an-easy-way-to-return-a-string-repeated-x-number-of-times)

在 Python 中，您可以将这样的序列相乘

```
fivespaces= ' ' * 5 
```

在 C# 中是否有任何内置的等效项？（没有运算符重载或类扩展）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T12:29:25.260

如果它只是一个字符串，那么您可以通过传入一个计数来返回倍数`string()`

`var fivespaces = new string(" ", 5);`

如果您想要一个像自定义类型这样的其他东西的集合，您可以使用`Enumerable.Repeat`来获取一个集合：

`var items = Enumerable.Repeat(new SomeModel(), 5);`

# php - 如何实现客户端-服务器撤消功能？

> ID：12601726
> 
> 赞同：1
> 
> 时间：2012-09-26T12:28:23.110
> 
> 标签：php, zend-framework, doctrine

我正在开发一个 php 应用程序（使用 Zend Framework 和 Doctrine 2）。

最近发生的特殊问题是我必须从数据库表中复制一些数据并将其发送给客户端。

当客户端保存时，数据的副本保留在数据库中（数据**必须**在发送给客户端之前保存在数据库中。暂时存储它不是一种选择）。如果客户端不保存副本，则必须将其删除。

我想到了**命令模式**的实现，这将是任何撤消过程的通用解决方案。但是当客户端断开连接、关闭浏览器或发生其他错误时，如何触发 UNDO 命令？

是否有任何批准的解决方案来解决这个问题？

# ios - IOS应用名称

> ID：12601729
> 
> 赞同：1
> 
> 时间：2012-09-26T12:28:29.677
> 
> 标签：ios, itunes, submission

我的应用程序名称有一个奇怪的问题：我的项目被称为“something - somenumber”（带有**破折号**）。

对于提交，我选择的 App 名称没有 tje dash，事实上，在 iTunes Store 中我可以看到没有它的名称。

但是当我下载我批准的应用程序时，名称带有破折号..

你听过类似的吗？？？这是新的SDK和IOS版本的问题吗？现在名称必须与项目名称一致？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:42:17.333

默认情况下，`Bundle display name`iOS`Info.plist`应用程序中的`${PRODUCT_NAME}`. `${PRODUCT_NAME}`，默认情况下，与项目名称相同，在您的情况下，项目名称带有破折号。这`Bundle display name`是显示在设备主屏幕中应用程序图标下的文本。这可能是您在下载应用程序时可以看到破折号的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:34:41.873

您应该更改应用程序信息 plist 文件中的 CFBundleDisplayName。这个值是 iOS 弹簧板在每个应用程序下使用的值。这也可以本地化。

**.bundle 标识符用于配置文件。**

# android - 下载管理器同时下载，缺少说明

> ID：12601743
> 
> 赞同：1
> 
> 时间：2012-09-26T12:29:26.337
> 
> 标签：android

我使用 DownloadManager 为我的应用下载文件。我看到几个问题。有时我看到同时下载 - 同时下载 2 个文件（至少我看到 2 个通知）。另一个问题是，对于某些文件，我看到了描述，而对于有些则没有。

下载管理器如何工作？是否可以同时下载更多文件？或者什么会导致这个问题？可能是因为应用程序有时会被杀死，下载时重新启动吗？

这是我使用的代码：

```
Request request = new DownloadManager.Request(uri);
request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI);
request.setAllowedOverRoaming(false);
request.setTitle(episodeTitle);
request.setVisibleInDownloadsUi(false);
request.setDescription("Episode is downloading");
request.setDestinationUri(Uri.fromFile(file));

downloadManager.enqueue(request); 
```

正如您在下面的图片中看到的，第二个通知包含描述，第一个不是。

![在此处输入图像描述](../Images/0c3749a7fee6e03a67c358dcfe381269.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:11:53.850

看起来您正在将两个文件下载到同一个文件夹。尝试将文件下载到单独的文件夹中。那应该有帮助。

# jquery - rails应用程序中的jquery阴影框

> ID：12601750
> 
> 赞同：0
> 
> 时间：2012-09-26T12:29:42.897
> 
> 标签：jquery, shadowbox

我正在尝试整合`jQuery shadowbox`. 所以我需要知道它是否可以为`td`'s 做。根据**shadowbox**的文档，`rel=shadowbox`必须为**链接**添加。

但就我而言，我有`table`而不是**links**。因此，当用户单击任何`td`'sa**影子框**时，应该会打开。可以使用**shadowbox**吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:39:48.937

取自[文档](http://www.shadowbox-js.com/usage.html)：

```
Shadowbox.init({
    // skip the automatic setup again, we do this later manually
    skipSetup: true
});

window.onload = function() {

    // set up all anchor elements with a "movie" class to work with Shadowbox
    Shadowbox.setup("a.movie", {
        gallery:            "My Movies",
        autoplayMovies:     true
    });

};​ 
```

在您的情况下，请使用`td.your_class`而不是`a.movie`.

编辑：我不知道应该是什么内容，但你可以这样做：

```
Shadowbox.init({
    skipSetup: true
});

$('table td').click(function(e) { // when td is clicked..
    Shadowbox.open({
        content: '<p>Put your content here.</p>',
        player: 'html',
    title: 'My shadowbox'
    });​
}); 
```

注意`player`和`content`。

# ruby-on-rails - 特定于控制器的rails 3 css未在生产中加载（heroku）

> ID：12601751
> 
> 赞同：0
> 
> 时间：2012-09-26T12:29:56.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我构建了一个小型 Rails 应用程序并将其推送到 heroku。一切似乎都运行良好。除了我通过为每个控制器生成的特定文件 css 赋予视图的样式。在：app/assets/stylesheets 例如：

```
main.css.scss 
```

其中包含以下代码：

```
.login_form {max-width:455px;} 
```

在我的视图中没有加载

```
main_controller 
```

只有 application.css 正在加载我需要配置什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:47:38.887

您可能需要预编译资产。

```
bundle exec rake assets:precompile:all RAILS_GROUPS=assets 
```

阅读[Rails Guides 资产管道](http://guides.rubyonrails.org/asset_pipeline.html)。

这可以解释为什么它在开发中工作，但生产环境将期望使用预编译资产。

# javascript - 可以设置选择元素的样式，以便在下拉“关闭”时显示所选选项的样式？

> ID：12601752
> 
> 赞同：5
> 
> 时间：2012-09-26T12:29:57.957
> 
> 标签：javascript, jquery, html, css

鉴于这个简单的html，

```
<select id="ddl">
    <option style="background:#0f0">a</option>       
    <option style="background:#f00;">b</option>   
    <option>c</option>
</select> 
```

( [http://jsfiddle.net/DxK47/](http://jsfiddle.net/DxK47/) ) 你可以看到每个选项都有它自己的背景颜色。

Unfortunately, when whatever option is selected (causing the dropdownlist to 'close'), the background remains white (or whatever the page default is).

选择后是否可以在下拉列表中显示所选项目的背景（理想情况下不使用javascript）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:35:23.653

是的，有可能

JS：

```
$(function(){
    $("#ddl").on("change", function(){
        $("#ddl").css("background", $("#ddl option:selected").attr("style").replace("background:",""));
    });       
}); 
```

jsfiddle: [http://jsfiddle.net/SnakeEyes/DxK47/3/](http://jsfiddle.net/SnakeEyes/DxK47/3/)

and remove the `;` from second option

`<option style="background:#f00;">b</option>`

to

```
<option style="background:#f00">b</option> 
```

**Other solution**: [http://jsfiddle.net/SnakeEyes/DxK47/13/](http://jsfiddle.net/SnakeEyes/DxK47/13/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:33:47.770

您可以使用[选择](http://harvesthq.github.com/chosen/)的库来做到这一点

> Chosen 是一个 JavaScript 插件，它使长而笨重的选择框更加用户友好。它目前有 jQuery 和 Prototype 两种风格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:35:54.620

When CSS4 introduces the parent selector it may be possible, but for now there is no way to style a parent based on its children. In the meantime, here is a simple JS solution:

```
$("#ddl").change(function () {
   $(this).css('background-color', $(this).find(":selected").css('background-color'));
}); 
```

**NOTE**: this requires *all* of the `<option>` to have a specified background color even if it's white. That's pretty simple to do with JS too if you don't feel like it otherwise.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T13:29:52.707

This can be easily done with a little bit of JavaScript. I made you a small example at JSFiddle: [http://jsfiddle.net/DxK47/84/](http://jsfiddle.net/DxK47/84/)

I used jQuery here, I leave it to you as an exercise to do a similar trick with other js frameworks or even pure js if that's what you want.

```
$("#ddl").change(function(evt) {
  var select = evt.currentTarget;
  var item = select.item(select.selectedIndex);
  var style = $(item).attr("style");
  if (style) {
    $("#ddl").css({"background-color": style.substring(11)});
  } else {
    $("#ddl").css({"background-color": ""});
  }
}); 
```

Edit: I was too slow (and not a jQuery expert), look at above answers for more brief examples that do basically the same.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-26T12:45:10.213

This syntax will work in XHTML and does not work in IE6, but this is a non-javascript way, as you requested:

```
option[selected] { background: #f00; } 
```

If you want to do this on-the-fly, then you would have to go with javascript, the way others have suggested....

# mysql - MySQL - 唯一键约束如何工作？

> ID：12601754
> 
> 赞同：0
> 
> 时间：2012-09-26T12:30:04.260
> 
> 标签：mysql, unique-constraint

表：员工

字段：eid（主键）、empno（唯一键）、empname

这里 empNo 是在 Ex 的代码中手动生成的。Accounts001.. 当 2 个用户输入时差为 0 的员工数据时。在“添加”期间，为两个插入生成的 emp num 将相同，即 Accounts001 和 Accounts001，而它应该是唯一的，即 Accounts001 和 Accounts002..

添加完成后..唯一键约束效果很好..即使手动生成的 empno 是相同的。数据库用唯一的数字更新..

我想知道 mysql 究竟是如何处理这种情况的，因为 empno 是由我们手动生成的。它会返回到代码 n 重新生成还是排队请求？

我希望问题很清楚..

提前致谢

# lucene - Lucene 中的停用词去除

> ID：12601757
> 
> 赞同：0
> 
> 时间：2012-09-26T12:30:12.277
> 
> 标签：lucene

如何删除给定字符串“这是化学方向”的Lucene中的停用词

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:43:07.623

我认为 Lucene 的[StopFilter](http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucene/analysis/core/StopFilter.html)是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-12T13:15:47.247

你应该使用 standardAnalyser ，它知道某些标记类型、小写、删除停用词，......使用标准分析器创建 IndexWriter 的示例：

```
public  IndexWriter Indexer(String dir) throws IOException {
    IndexWriter writer;
    Directory indexDir = FSDirectory.open(new File(dir).toPath());
    Analyzer analyzer = new StandardAnalyzer();
    IndexWriterConfig cfg = new IndexWriterConfig(analyzer);
    cfg.setOpenMode(OpenMode.CREATE);
    writer = new IndexWriter(indexDir, cfg);
    return writer;
} 
```

# c++ - 根据进程 ID 确定进程是否存在

> ID：12601759
> 
> 赞同：6
> 
> 时间：2012-09-26T12:30:12.700
> 
> 标签：c++, linux, gcc

我想在我的程序中知道是否存在具有特定 ID 的进程。我实现了以下功能来实现这一点，它检查是否`/proc/<PID>/maps`存在。但是，我注意到即使我用给定的 ID 杀死一个函数，这个函数仍然返回 1。有没有更好的方法来实现我想要做的事情，如果没有，这个代码有什么问题，为什么它应该返回 0 时返回 1。

```
int proc_exists(pid_t pid)
{
    stringstream ss (stringstream::out);

    ss << dec << pid;

    string path = "/proc/" + ss.str() + "/maps"; 

    ifstream fp( path.c_str() );

    if ( !fp )
        return 0;
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T12:33:08.237

`kill()`与信号一起使用`0`：

```
if (0 == kill(pid, 0))
{
    // Process exists.
} 
```

来自[`man kill`](http://linux.die.net/man/2/kill)：

> 如果 sig 为 0，则不发送信号，但仍进行错误检查；这可用于检查进程 ID 或进程组 ID 是否存在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-27T11:03:42.803

为了克服进程作为僵尸存在的可能性，我使用了以下内容：

```
bool is_pid_running(pid_t pid) {

    while(waitpid(-1, 0, WNOHANG) > 0) {
        // Wait for defunct....
    }

    if (0 == kill(pid, 0))
        return 1; // Process exists

    return 0;
} 
```

这个对我有用！

# python - 从 if 条件传递参数到 split 函数

> ID：12601760
> 
> 赞同：0
> 
> 时间：2012-09-26T12:30:18.503
> 
> 标签：python

```
string= "im fine.gds how are you"

if '.gds' or '.cdl' in string :

    a=string.split("????????") 
```

上面的字符串可能包含`.gds`或`.cdl`扩展。我想根据扩展名拆分字符串。

这里如何将参数传递给拆分函数。（**EX**如果`.gds`存在于字符串中，那么它应该`split(".gds")` 假设`.cdl`存在于字符串中，那么它应该得到`split(".cdl")`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T12:32:21.663

我认为你必须拆分`if`陈述：

```
if '.gds' in string:
    a = string.split('.gds')
elif '.cdl' in string:
    a = string.split('.cdl')
else:
    a = string # this is a fallback in case none of the patterns is in the string 
```

此外，您的`in`陈述不正确；应该是

```
if '.gds' in string or '.cdl' in string: 
```

请注意，此解决方案假定字符串中只有一个模式。如果两种模式都可以出现在同一个字符串上，请参阅 Vikas 的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T12:34:27.993

使用正则表达式模块`re`通过`pattern1`或拆分`pattern2`

```
import re
re.split('\.gds|\.cdl', your_string) 
```

例子：

```
>>> re.split('\.gds|\.cdl', "im fine.gds how are you")
['im fine', ' how are you']
>>> re.split('\.gds|\.cdl', "im fine.cdl how are you")
['im fine', ' how are you']
>>> re.split('\.gds|\.cdl', "im fine.cdl how are.gds you")
['im fine', ' how are', ' you'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:35:41.870

您可以尝试定义一个函数，如：

```
def split_on_extensions(string, *extensions):
    for ext in extensions:
        if ext in string:
            return string.split(ext)
    return string 
```

当然，您提供扩展名的顺序很关键，因为您将在第一个...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:37:44.760

你能保证他们两个中的一个会在那里吗？

```
a = next( string.split(v) for v in ('.gds','.cdl') if v in string ) 
```

如果你不肯定它会在那里，你可以捕捉到`StopIteration`在`next`：

```
try:
    a = next( string.split(v) for v in ('.gds','.cdl') if v in string )
except StopIteration:
    a = string #???? 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T12:46:04.893

标签被捕获到第一个反向引用中。中的问号`regex`使星星变得懒惰，以确保它在第一个结束标记之前停止，而不是在最后一个结束标记之前停止，就像贪婪的星星会做的那样。

此正则表达式将无法正确匹配嵌套在自身内部的标签，例如在`<TAG>one<TAG>two</TAG>one</TAG>`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T13:25:04.693

另一种选择是使用 BIF [str.partition](http://docs.python.org/library/stdtypes.html)。这是它的工作原理：

```
sring= "im fine.gds how are you"
three_parts_of_sring = sring.partition('.gds')
>>> three_parts_of_sring
('im fine', '.gds', ' how are you') 
```

把它放到一个小函数和你的集合中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T07:11:11.327

您可以迭代分隔符：

```
string= "im fine.gds how are you"
separators = ['.gds', '.cdl']
for separator in separators:
    if separator in string:
        a = string.split(separator)
        break
else:
    a = [] 
```

# variables - 如何在批处理文件中添加变量

> ID：12601764
> 
> 赞同：2
> 
> 时间：2012-09-26T12:30:33.637
> 
> 标签：variables, batch-file

我正在尝试获取数字列表，例如 11111111 和一个字母。用数字计算的字母 si。就像是：

```
@echo off
set var=23
FOR /L %%H IN (40000000,1,49999999) DO (
set number = %%H+%var%
echo %number%A
)
pause
exit 
```

我想得到（或多或少）

```
400000023A
400000024A
400000025A
... 
```

但是在不改变 FOR 语句的情况下……这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:04:59.200

要继续 jeb 所说的，对于您请求的输出，代码应该是这样的：

```
@echo off & setlocal EnableDelayedExpansion
set var=23
FOR /L %%H IN (40000000,1,49999999) DO (
  set /a number=%%H+!var!
  echo !number!A
)
endlocal
pause
exit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:44:51.230

1.  `set`语句中 避免空格
2.  如果要计算
    set /a number=%%H+var ，请使用 set /a

3.  避免在块中（以及在 FOR 块中）进行百分比扩展，
    而是使用延迟扩展（将 a 添加`setlocal EnableDelayedExpansion`到您的文件中）
    `echo !number!A`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:24:46.237

jeb 提供了修复代码所需的提示，而 Jeff K 实际实现了修复。

但是，由于您要为每个值添加一个常量，因此将常量添加到 FOR /L 开始值和结束值会更简单、更有效。

```
@echo off
setlocal
set var=23

set /a "start=40000000+var, end=49999999+var"
for /l %%H in (%start%, 1, %end%) do echo %%HA 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-10T00:14:55.453

有，但改变了 FOR 句子。

您实际上在那里忘记了 setlocal 命令。

```
setlocal EnableDelayedExpansion 
```

需要此命令才能添加变量。

还是不明白？

这是代码，以便您添加变量。

```
@echo off
setlocal EnableDelayedExpansion
cls
set var=17
echo %var%
pause
set /a var=%var%+7
echo %var%
pause 
```

尝试找出我的代码中的任何错误和错误。然后测试它。

你有它！添加变量！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T12:39:25.413

批量使用数字

`set /a`

查看`set /?`所有信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-10T03:03:39.373

最好的方法是：

```
set /a counter+=1 
```

所以：

```
@echo off
set /a counter=
:Top
set /a counter+=1
echo 4000000%counter%A
GOTO Top 
```

您可以复制上面的代码。

# actionscript-3 - Stage3D 错误 #3694：该对象已通过较早的 dispose() 调用对其进行处置

> ID：12601769
> 
> 赞同：1
> 
> 时间：2012-09-26T12:30:45.960
> 
> 标签：actionscript-3, stage3d

使用 Flare3D，当播放器（在 flash 中编译时）调整大小时，或者当我在浏览器页面中运行它然后锁定 wy（windows）机器并再次解锁时，我遇到了错误 #3694。

错误是：“该对象已通过较早的 dispose() 调用对其进行处理。”

我做了一些搜索，发现了一些建议来检查 context3D.driverInfo 并在该字符串等于“Disposed”时跳过渲染，但这似乎不起作用。在我的情况下，该字符串是“软件（嵌入式）”（在 Flash ide 中运行时）或在独立播放器中运行时的“DirectX9（直接 blitting）”。

有谁知道错误是什么以及如何避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:14:45.883

我有同样的问题，谷歌搜索，找到你的问题......它帮助我找出答案:)

您可能有一个调整大小处理程序，当任何东西调整舞台大小时都会调用它。它会尝试更改 stage3D 后台缓冲区的大小。

在调整舞台大小时，context3D.driverInfo == "Disposed"。当您完成调整大小时，它会恢复正常。

所以不是这样的：

```
context3D.configureBackBuffer(stageW(), stageH(), 0, false); 
```

尝试：

```
public function onResizeStage(event:Event) { 
    if (stage3D == null) {
        return;
    }           
    if (context3D == null) {
        return;
    }
    if (context3D.driverInfo == "Disposed") {
        return;
    }
    context3D.configureBackBuffer(stageW(), stageH(), 0, false);
} 
```

# java - ImageIcon 不会显示

> ID：12601772
> 
> 赞同：0
> 
> 时间：2012-09-26T12:31:01.857
> 
> 标签：java, imageicon, blackjack

Mac OSX Netbeans JAVA

目标：二十一点计划...我试图让扑克牌的 imageIcon 显示在 JLabel 中

逻辑：我创建了一些 CARD 对象，其中包含返回与其关联的 imageIcon 的方法。在我的主要 GUI 类中，如果我创建指定文件位置的新 imageIcon，它就可以工作 -

```
 private void newGame(){

    String temp1, temp2, temp3, temp4;

    card1 = hand.dealHand();
    card2 = hand.dealHand();
    card3 = hand.dealHand();
    card4 = hand.dealHand();

    image1 = new ImageIcon();
    image1 = card1.getImage();

    //Creates DeckImage and Logo as JLabel and adds it to userPanel

    //image1 = new ImageIcon("/Users/philhunter/NetBeansProjects/PractingProgramming/src/Resources/1.png");

    card1Label = new JLabel(image1, JLabel.LEFT);
    userPanel.add(card1Label);

    card1Label.setText("");

} 
```

注释掉的行可以正常工作并显示 imageIcon 图像，但是当我使用 card1.getImage() 方法时，图像不会显示。方法很简单——

```
public ImageIcon getImage(){
    return this.image;
} 
```

此外，如果您需要它，这里是从 DECK 类创建 CARD 的方法 -

```
private ImageIcon C1,C2, ... ,C52;
private ImageIcon[] imageArray= { C1,C2,...,C52 };
C1 = new ImageIcon("/Users/philhunter/NetBeansProjects/PractingProgramming/src/Resources/1.png");
...
C52 = new ImageIcon("/Users/philhunter/NetBeansProjects/PractingProgramming/src/Resources/52.png");

int SUITS = suit.length;
    int RANKS = rank.length;
    int N = SUITS * RANKS;

    //Creates a deck of 52 CARD objects
    theDeck = new CARD[N];
    for (int i = 0; i < RANKS; i++) {
        for (int j = 0; j < SUITS; j++) {
            //deck[SUITS*i + j] = rank[i] + " of " + suit[j];
            card = new CARD(suit[j], rank[i], value[i], imageArray[SUITS*i + j]);
            theDeck[SUITS*i + j] = card;
        }
    } 
```

所以我的问题是为什么卡片 imageIcon 不显示？（我没有收到错误消息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:34:21.403

好的，所以我发现了问题。我没有用 imageIcons 正确初始化数组 imageArray[] 。愚蠢的错误，但我想我会留下这个，以防其他人也犯这个愚蠢的错误。:)

# c# - 如何在 C#/Windows 窗体中翻转/旋转标签？

> ID：12601774
> 
> 赞同：5
> 
> 时间：2012-09-26T12:31:07.490
> 
> 标签：c#, rotation, image-rotation

如何翻转/旋转 C# [Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)中的标签？

我将背景图像设置为我的标签。

在每个时间间隔，它都会向右移动三个像素。当它到达表单结束位置时，我需要将标签翻转并转回。

我尝试了以下方法，但没有得到解决方案。

```
private void timer1_Tick(object sender, EventArgs e){

    if (label2.Location.X < this.Width)
        label2.Location = new Point(label2.Location.X + incr, label2.Location.Y);
    else
    {
        incr = -2;
        label2.Location = new Point(label2.Location.X - 50, label2.Location.Y);
        label1.Image.RotateFlip();
    }
    this.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T12:36:52.717

创建一个类，`newlabel`它可以按用户指定的任何角度旋转其文本。

```
extend label class& override paint method 
```

您可以通过代码或简单地从工具箱中拖动来使用它。

```
using System.Drawing;

class newLabel : System.Windows.Forms.Label
{
    public int RotateAngle { get; set; }  
    public string NewText { get; set; }   
    protected override void OnPaint(System.Windows.Forms.PaintEventArgs e)
    {
        Brush b =new SolidBrush(this.ForeColor);           
        e.Graphics.TranslateTransform(this.Width / 2, this.Height / 2);
        e.Graphics.RotateTransform(this.RotateAngle);
        e.Graphics.DrawString(this.NewText, this.Font,b , 0f, 0f);
        base.OnPaint(e);
    }
} 
```

现在将此自定义控件拖动到您的表单中。

您必须设置以下属性。

```
newlbl.Text = "";           
newlbl.AutoSize = false;      
newlbl.NewText = "ravindra";     
newlbl.ForeColor = Color.Green;  
newlbl.RotateAngle = -90; 
```

只需更改`RotateAngle`属性即可根据需要更改角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T17:47:05.773

所以......你可以这样做：

1.下载这个dll文件：[http ://www.mediafire.com/download/hc16qezty0k6qnv/RotateLabel.dll](http://www.mediafire.com/download/hc16qezty0k6qnv/RotateLabel.dll)

2.继续你的 Visual Studio 并打开你的解决方案

3.现在您需要进入项目选项卡 -> 添加引用... -> 然后浏览您下载的文件并简单地添加该文件

4.下一步是右键单击工具箱

5.完成后，您需要点击选择项目

6.再次浏览您下载的文件并添加 VerticalLabel

7.然后您可以将 VerticalLabel 从工具箱拖到您的表单中。

就是这样，很简单。

希望对您有所帮助我刚刚翻译了这个[答案](https://stackoverflow.com/questions/12601774/how-can-i-flip-rotate-the-label-in-c-windows-forms?answertab=votes#tab-top)并使它更简单:)

祝你好运，斯特拉尔兹

# directshow - directshow - 如何检测网络摄像头插入/拔出？

> ID：12601779
> 
> 赞同：3
> 
> 时间：2012-09-26T12:31:21.997
> 
> 标签：directshow, directshow.net

DirectShow 是否有一种简单的方法来检测网络摄像头是否已插入（USB），或者是否有人拔掉了它（然后轮询或搜索它）？

我看过 Microsoft Media Foundation 的代码，但它很复杂，而且 Media Foundation 不能安装在 < Vista 上，afaik。

谢谢，WW

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:10:26.283

我使用 WMI 事件观察器在属性字符串中查找 PID（根据驱动程序，某些相机可能会触发两次事件）。这是一个 VB.Net 示例：

```
 Dim CamEventWatcher As ManagementEventWatcher
 Public Delegate Sub SetMessageCallback(ByVal [_Msg] As Boolean)

Private Sub MessageCallback(ByVal _Msg As Boolean)
    If (_Msg) Then
        'cam connected
    Else
        'camera removed
    End If
End Sub

Private Sub RemoveCameraUSBHandler()
    Try
        If Not CamEventWatcher Is Nothing Then
            CamEventWatcher.Stop()
        End If
    Catch ex As Exception

    End Try
End Sub

Private Sub AddCameraUSBHandler()
    Dim q As WqlEventQuery

    Dim scope As ManagementScope = New ManagementScope("root\CIMV2")

    scope.Options.EnablePrivileges = True

    Try

        q = New WqlEventQuery()

        q.EventClassName = "__InstanceOperationEvent"

        q.WithinInterval = New TimeSpan(0, 0, 1)

        q.Condition = "TargetInstance ISA 'Win32_USBControllerdevice'"

        CamEventWatcher = New ManagementEventWatcher(scope, q)

        AddHandler CamEventWatcher.EventArrived, AddressOf CamUSBEvent

        CamEventWatcher.Start()
    Catch ex As Exception
    End Try
End Sub

Private iCreatedFired As Integer = 0
Private iRemovedFired As Integer = 0
Public Sub CamUSBEvent(ByVal sender As System.Object, ByVal e As EventArrivedEventArgs)
    If e.NewEvent.ClassPath.ClassName = "__InstanceCreationEvent" Then

        Dim sAntecedent As String
        Dim sDependent As String

        sAntecedent = e.NewEvent.Properties("TargetInstance").Value.Properties("Antecedent").Value.ToString() + ControlChars.CrLf

        sDependent = e.NewEvent.Properties("TargetInstance").Value.Properties("Dependent").Value.ToString() + ControlChars.CrLf

        If sDependent.Contains(CAM_DEV_ID) Then
            iCreatedFired += 1
            If (iCreatedFired = 1) Then
                e.NewEvent.Dispose()
                Return
            End If
            iCreatedFired = 0
            iRemovedFired = 0
            Dim _delegate As New SetMessageCallback(AddressOf MessageCallback)
            Me.Invoke(_delegate, New Object() {True})

        End If
    ElseIf e.NewEvent.ClassPath.ClassName = "__InstanceDeletionEvent" Then

        Dim sAntecedent As String
        Dim sDependent As String

        sAntecedent = e.NewEvent.Properties("TargetInstance").Value.Properties("Antecedent").Value.ToString() + ControlChars.CrLf

        sDependent = e.NewEvent.Properties("TargetInstance").Value.Properties("Dependent").Value.ToString() + ControlChars.CrLf

        If sDependent.Contains(CAM_DEV_ID) Then
            iRemovedFired += 1
            If (iRemovedFired = 1) Then
                e.NewEvent.Dispose()
                Return
            End If
            iCreatedFired = 0
            iRemovedFired = 0
            Dim _delegate As New SetMessageCallback(AddressOf MessageCallback)
            Me.Invoke(_delegate, New Object() {False})
        End If
    End If

    e.NewEvent.Dispose()
End Sub 
```

# c# - 键盘出现时滑动弹出wp7

> ID：12601781
> 
> 赞同：0
> 
> 时间：2012-09-26T12:31:32.467
> 
> 标签：c#, windows-phone-7, textbox, popup

我有一个带有很多文本框的用户控件，我在单击按钮时出现的弹出窗口中添加了这些文本框作为子项。

问题是当我点击倒数第二个或倒数第三个文本框时，虚拟键盘与弹出窗口重叠。我看不到我输入的文字

在这种情况下可以做些什么来滑动弹出窗口

```
 Popup popMisc = new Popup();
        popMisc.VerticalOffset = 80;
        popMisc.HorizontalOffset = 10;

        ucMisc objMisc = new ucMisc();
        popMisc.Child = objMisc;
        popMisc.IsOpen = true;
        base.IsHitTestVisible = false;

        objMisc.btnContinue.Click += (s, args) =>
            {
                popMisc.IsOpen = false;
                base.IsHitTestVisible = true;
            }; 
```

# compiler-construction - 代码生成

> ID：12601784
> 
> 赞同：2
> 
> 时间：2012-09-26T12:31:35.823
> 
> 标签：compiler-construction, code-generation

编译器如何将二进制代码生成到单独的文件中？参考 GCC 的源代码中的哪些文件处理这将有很大帮助。我想知道的是编译器（尤其是 gcc）究竟是如何从 ASM 生成机器代码的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T16:43:39.347

要回答这个问题，需要书籍，而不仅仅是几行字。

**极**短的版本是：

编译器分为两部分：

1.  将特定语言（如 C）翻译成语法树（表示程序的通用方式）的前端

2.  以及将语法树转换为机器特定（X86、ARM、...）代码的后端。

涉及几个步骤：

1.  词法分析（将“switch”等关键字转换为代码）
2.  语法分析（从上一步转换为语法树）
3.  代码优化（修改语法树以提高性能）
4.  代码生成（从语法树生成机器代码）
5.  链接（将更多执行单元组合到一个二进制文件中）

谷歌搜索可以为您提供更详细的信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T15:43:01.287

汇编器是一个单独的实用程序。您可以在此处找到更多信息：[http ://en.wikipedia.org/wiki/GNU_Assembler](http://en.wikipedia.org/wiki/GNU_Assembler)

源代码是 binutils 包的一部分。你可以在这里找到它：ftp: [//ftp.gnu.org/gnu/binutils/](ftp://ftp.gnu.org/gnu/binutils/)

# c++ - 删除动态创建的对象

> ID：12601786
> 
> 赞同：0
> 
> 时间：2012-09-26T12:31:38.177
> 
> 标签：c++, memory, c++11

在我的应用程序中，我正在创建并返回一个数组，其中填充了来自派生类的动态分配的对象，如下所示：

```
void someGetter(std:vector<DerivedClass> & returnV)
{
    BaseClass* base = object->clone();  // "object" is a "unique_ptr<BaseClass>"

    DerivedClass* derived = dynamic_cast<DerivedClass*> (base);

    if (derived != nullptr)
    {
        returnV.push_back(*derived);
    }
    else
    {
        delete base;
    }
} 
```

这显然会造成内存泄漏（valgrinds 在这里帮助我），因为派生的永远不会被删除。

我试图像这样释放分配的内存：

```
delete &returnV[0]; 
```

它没有给出任何编译错误/警告，代码仍然运行良好。但是 valgrind 在该行代码上报告了一些额外的错误（无效读取，无效免费），并且泄漏仍然存在。

有没有办法释放这样返回的内存？或者我应该返回 unique_ptr 而不是对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T12:35:24.137

如果您要创建一个保存类型*值*`Derived`的向量，那么代码是正确的，除了内存泄漏。请注意，您需要释放的对象不是容器中的对象（它是副本），而是您克隆的对象：

```
void someGetter(std:vector<DerivedClass>&  returnV)
{
    BaseClass* base = object->clone(); (object is a unique_ptr<BaseClass>)
    DerivedClass* derived = dynamic_cast<DerivedClass> (base);
    if (derived != nullptr)
    {
        returnV.push_back(*derived);
    }
    delete base;
} 
```

此外，如果`clone()`按照它所说的去做（即它克隆对象），那么您可以通过首先测试对象`dynamic_cast`是否*为*. 如果是，则将副本插入容器并避免克隆。`base`*`DerivedClass`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:37:21.267

简单的答案 - 总是删除基地。

```
if (derived != nullptr)
{
    returnV.push_back(*derived);
}
delete base; 
```

Vector 获取派生的副本 - 因此不再需要克隆对象。

[更新]

**我希望你有虚拟析构函数`BaseClass`- 如果没有 - 然后添加它。**

**还有一个警告：**它可能会`base->clone()`返回比派生更多的东西：

```
class MoreDerivedClass : public DerivedClass {}; 
```

即使真正的基类是，此代码也会成功`MoreDerivedClass`：

```
DerivedClass* derived = dynamic_cast<DerivedClass> (base); 
```

你可以`typeid()`用来检查基地的真实类型......

* * *

**[更新 2]**
考虑改变你的设计 - 并将你的基地克隆保留在 DerivedClass 的 unique_ptr 向量中：

```
void someGetter(std:vector<std::unique_ptr<DerivedClass>> & returnV)
{
    if (dynamic_cast<DerivedClass*>(base.get()) != nullptr)
    {
        returnV.push_back(dynamic_cast<DerivedClass*>(base->clone()));
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T12:58:28.807

首先，设计对我来说似乎很可疑：您同时拥有一个多态层次结构，以及*一个*包含该层次结构特定成员*值的容器。*你招来的问题没有尽头。拥有一个`std::vector<std::unique_ptr<Base>>`.

无论如何，这是一种适度安全且有效的方法，仅将那些动态类型精确匹配的对象插入容器。它假定层次结构中的每个类都有一个可访问的复制构造函数。

```
void someGetter(std:vector<DerivedClass> & returnV)
{
    if (typeid(*object) != typeid(DerivedClass)) { return; }

    returnV.insert(static_cast<DerivedClass&>(*object));
} 
```

this 的语义与您的语义略有不同，因为您的代码将允许`*object`is 的派生类型比严格更严格的情况`DerivedClass`，并且复制到向量中会*切*分对象。本代码不存在这个问题。

* * *

**更新（在您发表评论后）：**如果`DerivedClass`确实如此`final`（请标记为这样！），那么以下内容没有`typeid`：

```
void someGetter(std:vector<DerivedClass> & returnV)
{
    if (DerivedClass * p = dynamic_cast<DerivedClass *>(object.get()))
    {
        assert(typeid(*p) == typeid(DerivedClass));   // beware of slicing!

        returnV.insert(*p);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T12:51:14.390

是`push_back`的，使用复制构造函数。我认为大卫是说你的代码应该是

```
void someGetter(std:vector<DerivedClass>&  returnV)
{
    DerivedClass*derived = dynamic_cast<DerivedClass*>(object.get());
    if (derived != nullptr)
        returnV.push_back(*derived);
} 
```

完全避免克隆和删除。

*编辑中添加的注意事项：*我们不能将获得的指针传递`unique_ptr<>.get()`给任何可能保留副本的函数，而无视`unique_ptr`. 上面的代码没有这样做。*

# ruby-on-rails - Rails has_many :through 和 :conditions 。如何创建关联？

> ID：12601787
> 
> 赞同：1
> 
> 时间：2012-09-26T12:31:40.190
> 
> 标签：ruby-on-rails, ruby, has-many-through, has-many

通过条件，我有以下与 has_many 关联的模型。

（注意`Membership`验证`kind`属性的存在）

```
class User < ActiveRecord::Base
  has_many :memberships
  has_many :founded_groups,
    :through => :memberships,
    :source  => :group,
    :class_name => 'Group'
    :conditions => {'memberships.kind' => 'founder'}
  has_many :joined_groups, ... # same as above, but the kind is 'member'
end

class Group < ActiveRecord::Base
  has_many :memberships
  has_many :founders, ...        # these two mirror the User's
  has_many :regular_members, ... #
end

class Membership < ActiveRecord::Base
  validates_presence_of :user_id
  validates_presence_of :club_id
  validates_presence_of :kind   # <-- attention here!

  belongs_to :user
  belongs_to :group
end 
```

Rails 似乎很喜欢上面的代码（至少它不喜欢它）。但后来发生了这种情况：

```
> user = User.create(...) # valid user
> club = Club.create(...) # valid club
> user.founded_clubs = [club]

ActiveRecord::RecordInvalid: Validation failed: kind can't be blank

> club.founders << user

ActiveRecord::RecordInvalid: Validation failed: kind can't be blank 
```

我假设 rails 会占用`{'memberships.kind' => 'founder'}`我的代码的一部分并在创建关联时使用它，但似乎并非如此。所以新成员`kind`是空白的，这会引发错误。

有没有一种简单的方法来创建关联，而不是完全痛苦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:44:00.633

这肯定会起作用：

```
> user = User.create(...) # valid user
> club = Club.create(...) # valid club
> user.memberships.create(:club_id => club.id, :kind => 'founder') 
```

我不确定，但这可能有效：

```
> user.memberships.create(:club => club, :kind => 'founder') 
```

# c# - 我的应用程序没有使用 UdpClient 接收数据

> ID：12601789
> 
> 赞同：0
> 
> 时间：2012-09-26T12:31:47.997
> 
> 标签：c#, dhcp

我创建了一个非常简单的应用程序来使用 UdpClient 接收 DHCP 消息。

```
UdpState s = new UdpState();
s.u = server;
s.e = ClientEndPoint;

server = new UdpClient();
server.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
server.Client.Bind(new IPEndPoint(IPAddress.Any, 67));
server.BeginReceive(new AsyncCallback(OnRecieve), s);

void OnRecieve(IAsyncResult asycnResult)
{
   Console.WriteLine("Got something");

   // Do something
} 
```

我有一个请求 IP 地址的设备，因此每 5 秒发送一次请求等。 OnRecieve 永远不会触发，我通过在 Console.WriteLine 处放置一个断点进行了双重检查。

为了检查是连接还是 PC，我下载了 Microsoft Network Monitor 并进行了捕获。这完美地捕获了请求，所以我知道它与我的程序有关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:42:55.237

出色地

我将以下内容放在控制台应用程序中

```
 static Boolean done = false;
        static void Main(string[] args)
        {
            Object s = new object();

            UdpClient server = new UdpClient(); 
server.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true); 
server.Client.Bind(new IPEndPoint(IPAddress.Any, 67)); 
server.BeginReceive(new AsyncCallback(OnRecieve), s);

while (!done) { Thread.Sleep(10); }

        }

        static void OnRecieve(IAsyncResult asycnResult)
        {
            Console.WriteLine("Got something");
            done = true;

            // Do something 
        } 
} 
```

一段时间后它“得到了一些东西”

我会得出结论，要么你的 udpclient 没有等待 - 很可能......这就是我添加 while 循环的原因。

# excel - 如果excel VBA中存在特定标准，我正在寻找一种替换单元格的方法

> ID：12601790
> 
> 赞同：0
> 
> 时间：2012-09-26T12:31:54.250
> 
> 标签：excel, vba

下面附上一张表，它将显示我在这里所说的内容。但这就是我要找的。正如您在 Final 中的表格中看到的那样，所有列表都以整齐的顺序显示。

这是最终用户看到的。现在在某些情况下，当像 Orig 这样的文档发送给我时，如果有的话，我需要导入新行。我一直注意到的是，虽然这条线几乎完全相同，但客户的评论却不同。

并且由于我们在最终表上以红色输入评论的方式，我无法复制和替换所有内容。我想要做的只是替换客户评论和所需的发货日期。

我想把PO、Part和Description作为参考点，然后用新的替换客户评论和要求的发货日期，即使没有变化，我仍然希望有它被替换为以防万一。

有人可以给我看一个 VBA 中的脚本可以做到这一点吗？

我想过使用这样的东西来做到这一点：

```
With Intersect(wsJL.UsedRange, wsJL.Columns("Q"))
        .AutoFilter 1, "<>Same"
        With Intersect(.Offset(2).EntireRow, .Parent.Range("B:U"))
            .Copy wsJAR.Cells(Rows.Count, "B").End(xlUp).Offset(1)
            .EntireRow.Delete
        End With
        .AutoFilter
    End With 
```

但是我遇到了一个问题，这不是 EntireRow 概念，而是两个单独的单元格不在一起，否则对我来说会容易得多。

有没有办法使用这个脚本或其他类似的脚本来获得我正在寻找的结果？

如果您能提供任何帮助，请提前感谢您的帮助。

[示例表](http://kaboomlabs.com/excel/examples/SwitchCells.xlsx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:19:06.763

解决了。

做了一些不同的事情，不是我想要的，但这是最简单的答案。在最终选项卡的数据末尾添加了两个单元格：

**对于 O2-O4**

`=IFERROR(INDEX(Orig!$J$2:$J$4,MATCH(1,INDEX((Orig!$B$2:$B$4=$A2)*(Orig!$D$2:$D$4=$B2),0),0)),"")`

**对于 P2-P4**

`=IFERROR(INDEX(Orig!$E$2:$E$4,MATCH(1,INDEX((Orig!$B$2:$B$4=$A2)*(Orig!$D$2:$D$4=$B2),0),0)),"")`

然后创建了一个新脚本：

```
Option Explicit

Sub One()

    Dim wsFIN As Worksheet 'Final
    Dim wsORI As Worksheet 'Original
    Dim lastrow    
    Set wsFIN = Sheets("Final")
    Set wsORI = Sheets("Orig")

        lastrow = wsFIN.Range("B" & Rows.Count).End(xlUp).Row
        wsFIN.Range("O2:P" & lastrow).Copy wsFIN.Range("I2:J" & lastrow)
        wsFIN.Range("I2:J" & lastrow).Borders.Weight = xlThin
        wsFIN.Range("I2:J" & lastrow).Font.Size = 12
        wsFIN.Range("I2:J" & lastrow).Font.Name = "Calibri"

End Sub 
```

它有效，但我希望有一些更清洁的东西。这是最终结果。

[解决方案](http://kaboomlabs.com/excel/SwitchCells.xlsm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:26:33.070

好吧，如果我了解您的要求，那么这个问题没有简单的 4 行答案。但这是一个简单的 90 行答案。您需要使枚举与您的两张纸“Final”和“Orig”上的列定义保持一致。您可能需要更改范围定义（工作表名称等）。您需要执行 VBE Menu/Tools/References 并检查“Microsoft Scripting Runtime”以获取字典对象。对不起，如果它看起来罗嗦，但它应该很容易维护。

```
Option Explicit

' This is the definition of the columns on "Final" sheet
Enum final_record
    fr_partid
    fr_descr
    fr_vendorid
    fr_po
    fr_due
    fr_quantdue
    fr_status
    fr_orig
    fr_desired
    fr_comment
    fr_dayslate
    fr_pri
    fr_shoporder
    fr_remarks
    fr_end
End Enum

' This is the definition of the columns on "Orig" sheet
Enum orig_record
    or_po
    or_partid
    or_vendorid
    or_descr
    or_comment
    or_status
    or_quant
    or_balance
    or_orig
    or_requested
    or_end
End Enum

Sub UpdateDescrAndShipDate()
' Update comments and required ship date if matches po/partid/description.
' Else add a new row.
Dim lRows As Long, lRow As Long, rFinal As Range, rOrig As Range, sKey As String
Dim lTarget As Long, lNew As Long
Dim dictTarget As New Scripting.Dictionary

' Get Final rows into dict by key
    Set rFinal = Worksheets("Final").Range("A1")

    lRows = rFinal.Offset(65000, 0).End(xlUp).Row - rFinal.Row
    For lRow = 1 To lRows
        sKey = rFinal.Offset(lRow, fr_po).Value & "|" & _
               rFinal.Offset(lRow, fr_partid).Value & "|" & _
               rFinal.Offset(lRow, fr_descr).Value

        If Not dictTarget.Exists(sKey) Then
            dictTarget.Add sKey, lRow
        Else
            MsgBox "Invalid duplicate key? " & sKey
        End If
    Next
    lNew = lRows

' Run through Orig rows, and write to Orig based on key value
    Set rOrig = Worksheets("Orig").Range("A1")

    lRows = rOrig.Offset(65000, 0).End(xlUp).Row - rOrig.Row

    For lRow = 1 To lRows
        sKey = rOrig.Offset(lRow, or_po).Value & "|" & _
               rOrig.Offset(lRow, or_partid).Value & "|" & _
               rOrig.Offset(lRow, or_descr).Value

        If dictTarget.Exists(sKey) Then
' update
            lTarget = dictTarget(sKey)
            rFinal.Offset(lTarget, fr_comment).Value = rOrig.Offset(lRow, or_comment).Value
            rFinal.Offset(lTarget, fr_desired).Value = rOrig.Offset(lRow, or_requested).Value
        Else
' new row
            lNew = lNew + 1
            rFinal.Offset(lNew, fr_partid).Value = rOrig.Offset(lRow, or_partid)
            rFinal.Offset(lNew, fr_descr).Value = rOrig.Offset(lRow, or_descr)
            rFinal.Offset(lNew, fr_vendorid).Value = rOrig.Offset(lRow, or_vendorid)
            rFinal.Offset(lNew, fr_po).Value = rOrig.Offset(lRow, or_po)
            rFinal.Offset(lNew, fr_due).Value = rOrig.Offset(lRow, or_balance)
            rFinal.Offset(lNew, fr_quantdue).Value = rOrig.Offset(lRow, or_orig)
            rFinal.Offset(lNew, fr_status).Value = rOrig.Offset(lRow, or_status)
            rFinal.Offset(lNew, fr_orig).Value = ""
            rFinal.Offset(lNew, fr_desired).Value = rOrig.Offset(lRow, or_requested)
            rFinal.Offset(lNew, fr_comment).Value = rOrig.Offset(lRow, or_comment)
            rFinal.Offset(lNew, fr_dayslate).Value = ""
            rFinal.Offset(lNew, fr_pri).Value = ""
            rFinal.Offset(lNew, fr_shoporder).Value = ""
            rFinal.Offset(lNew, fr_remarks).Value = ""
        End If
    Next

End Sub 
```

# iphone - Iphone 从documentsDirectory 将图像加载到webview

> ID：12601791
> 
> 赞同：0
> 
> 时间：2012-09-26T12:31:54.297
> 
> 标签：iphone, xcode

我正在尝试下载、保存并再次显示图像。我设法将其下载并存储到文档目录中。所以现在如果我带着 finder 去那里，我可以看到那些图像。现在我正在尝试将其加载到 Web 视图中。为此，我使用这些代码：

```
[webview loadHTMLString:simpleHtml baseURL:nil]; 
```

在我的简单 html 中，我有：

```
<html><head></head><body>
<img src='/Users/user/Library/Application Support/iPhone Simulator/5.1/Applications/45584ECD-021A-4789-8936-6A0012242380/Documents/image.png' />
</body></html> 
```

它加载但它显示一个问号，就像那个目录中没有图像一样。（图像在那里是因为我可以在finder中找到它......）

顺便说一句 simpleHtml 是 NSString 不是文件夹...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:54:16.550

你可以检查一下它会对你有所帮助。

```
NSString *path = [[NSBundle mainBundle] bundlePath];

NSURL *baseURL = [NSURL fileURLWithPath:path];

[webView loadHTMLString:htmlString baseURL:baseURL]; 
```

然后，您可以像这样引用您的图像：

或者你可以参考这个链接：

[http://iphoneincubator.com/blog/windows-views/uiwebview-revisited](http://iphoneincubator.com/blog/windows-views/uiwebview-revisited)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:41:59.957

```
 NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *ImagePath = [documentsDirectory stringByAppendingPathComponent:@"yourimage.png"]; 
```

在您的 html 字符串中使用上面的“ImagePath”。而不是使用 'loadHTMLString' 使用以下 webview 方法

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:imagePath]]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:21:25.933

我终于让它工作了，但它不适用于 html。我现在使用图像数据。

```
NSData *imageData = [NSData dataWithContentsOfFile:image];
[webview loadData:imageData MIMEType:@"image/gif" textEncodingName:nil baseURL:nil]; 
```

现在我找到了另一个更好的解决方案：对于我的原始 html 字符串，我需要添加前缀文件：。所以我现在有：

```
<img src="file:/path"> 
```

它就像一个魅力！

# android - 适用于 Zebra RW420 打印机的 Android 打印应用程序

> ID：12601798
> 
> 赞同：4
> 
> 时间：2012-09-26T12:32:09.830
> 
> 标签：android, printing, bluetooth, zebra-printers

我的意思是开始开发一个简单的 android 应用程序，用于使用 zebra RW420 打印机打印标签。他们有适用于 android 的 SDK，但我不知道从哪里开始。

我设想了一个只有一个屏幕的应用程序，它会询问标签或采购订单、我们想要打印多少份，以及一个打印按钮。有人可以帮我开始。任何帮助将不胜感激。

我将如何搜索打印机，SDK 会为我做吗？或者我必须使用 Androids BluetoothAdapter 类...关于标签格式我必须自己创建还是可以使用 SDK 中的现有文件？

我可以设置打印机打印多份吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T13:59:28.607

SDK 提供蓝牙发现类。查看文档和示例。查看`BluetoothDiscoverer`课程。它提供了一种查找所有蓝牙设备的方法，并在处理程序中通知您。SDK 附带了一个 Developer Demo，其中有一个如何进行发现的示例：

```
 try {
        BluetoothDiscoverer.findPrinters(this, new DiscoveryHandler() {

            public void foundPrinter(DiscoveredPrinter printer) {
                String macAddress = printer.address;
                //I found a printer! I can use the properties of a Discovered printer (address) to make a Bluetooth Connection
            }

            public void discoveryFinished() {
                //Discovery is done
            }

            public void discoveryError(String message) {
                //Error during discovery
            }
        });
    } catch (ConnectionException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T14:31:43.370

1）您必须从以下线程打印：

```
new Thread (new Runnable () {
  public void run () {
    enablePrintButton (false);
    Looper.prepare ();
    doConnectionTest ();
    Looper.loop ();
    Looper.myLooper ().quit ();
  }
}).start (); 
```

2）然后：

```
private void doConnectionTest () {
    printer = connect ();

    if (printer != null) {
      //print
    } else {
      disconnect ();
    }
  } 
```

3) 打印方式：

```
private void sendTestLabel () {
    try {
      ZebraPrinterLinkOs linkOsPrinter = ZebraPrinterFactory.createLinkOsPrinter (printer);

      PrinterStatus printerStatus =
          (linkOsPrinter != null) ? linkOsPrinter.getCurrentStatus () : printer.getCurrentStatus ();

      if (printerStatus.isReadyToPrint) {
        byte[] configLabel = getConfigLabel ();
        connection.write (configLabel);
        setStatus ("Sending Data", Color.BLUE);
      } else if (printerStatus.isHeadOpen) {
        setStatus ("Printer Head Open", Color.RED);
      } else if (printerStatus.isPaused) {
        setStatus ("Printer is Paused", Color.RED);
      } else if (printerStatus.isPaperOut) {
        setStatus ("Printer Media Out", Color.RED);
      }
      DemoSleeper.sleep (1500);
      if (connection instanceof BluetoothConnection) {
        String friendlyName = ((BluetoothConnection) connection).getFriendlyName ();
        setStatus (friendlyName, Color.MAGENTA);
        DemoSleeper.sleep (500);
      }
    } catch (ConnectionException e) {
      setStatus (e.getMessage (), Color.RED);
    } finally {
      disconnect ();
    }
  } 
```

**4）标签配置方法：**

```
private byte[] getConfigLabel () {
     byte[] configLabel = null;

     try {
       PrinterLanguage printerLanguage = printer.getPrinterControlLanguage ();
       SGD.SET ("device.languages", "zpl", connection);

       if (printerLanguage == PrinterLanguage.ZPL) {
         configLabel = "^XA^FO17,16^GB379,371,8^FS^FT65,255^A0N,135,134^FDTEST^FS^XZ".getBytes();
       } else if (printerLanguage == PrinterLanguage.CPCL) {

         String msg = setPopratnica ();

         msg = format (msg);

         configLabel = msg.getBytes ("windows-1250");
       }
     } catch (Exception e) {
     }
     return configLabel;
   } 
```

**5) 连接方式：**

```
public ZebraPrinter connect () {
     setStatus ("Connecting...", Color.YELLOW);
     connection = null;
     connection = new BluetoothConnection (getBluetoothAddressKey ());
    try {
       connection.open ();
       setStatus ("Connected", Color.GREEN);
         } catch (ConnectionException e) {
           setStatus ("Comm Error! Disconnecting", Color.RED);
           DemoSleeper.sleep (1000);
           disconnect ();
         }

         ZebraPrinter printer = null;

         if (connection.isConnected ()) {
           try {
             printer = ZebraPrinterFactory.getInstance (connection);
             setStatus ("Determining Printer Language", Color.YELLOW);
             String pl = SGD.GET ("device.languages", connection);
             setStatus ("Printer Language " + pl, Color.BLUE);
          } catch (ConnectionException e) {
             setStatus ("Unknown Printer Language", Color.RED);
             printer = null;
             DemoSleeper.sleep (1000);
             disconnect ();
           } catch (ZebraPrinterLanguageUnknownException e) {
             setStatus ("Unknown Printer Language", Color.RED);
             printer = null;
             DemoSleeper.sleep (1000);
             disconnect ();
           }
         }
         return printer;
} 
```

**6）断开方法：**

```
public void disconnect () {
    try {
      setStatus ("Disconnecting", Color.RED);
      if (connection != null) {
        connection.close ();
      }
      setStatus ("Not Connected", Color.RED);
    } catch (ConnectionException e) {
      setStatus ("COMM Error! Disconnected", Color.RED);
    } finally {
      enablePrintButton (true);
    }
  } 
```

另外你必须有一个卧铺班：

```
public class DemoSleeper {
    private DemoSleeper () {
    }

    public static void sleep(int ms) {
        try {
            Thread.sleep(ms);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

# php - 如何用 PHP 替换字符串中的特殊字符？

> ID：12601799
> 
> 赞同：-6
> 
> 时间：2012-09-26T12:32:09.533
> 
> 标签：php, regex

我有以下字符串：

```
a&b.c'd,e f 
```

我长得怎么样

```
а_b_c_d_e_f 
```

正则表达式模式看起来如何？

提前致谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T12:34:04.890

它看起来很简单...

```
$str = "a&b.c'd,e f";
$str = preg_replace('#\W#', '_', $str); 
```

...但它实际上应该取决于*您*认为特殊的字符，因为`\W`它等同于`[^a-zA-Z0-9_]`（即，任何不是字母数字或'_'的字符）。在您的情况下，这可能足够，也可能不够；如果没有，也许你会在这里使用一个字符类：

```
$str = "a&b.c'd,e f";
$str = preg_replace('#[^a-zA-Z0-9_-]#', '_', $str); 
```

在此示例中，连字符`'-'`也不会被替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:36:40.267

与[`preg_replace`](http://php.net/manual/en/function.preg-replace.php).

```
$regex = "(.*)\W(.*)";
$content = "a&b.c'd,e f"
preg_replace($regex, "_", $content); 
```

# cassandra - Cassandra-CLI 崩溃

> ID：12601806
> 
> 赞同：1
> 
> 时间：2012-09-26T12:32:30.313
> 
> 标签：cassandra, cql

我在 CQLsh -3.0 中创建了一个表并将值插入其中。

```
create table users (
    Id uuid PRIMARY KEY,
    Name varchar,
    Age int
);

insert into users(Id, Name, Age) values ('001', 'XYZ', '30');

cqlsh:usertable> select * from users;
 id                                   | age | name
--------------------------------------+-----+--------
 1381b530-1dd2-11b2-0000-242d50cf1ffd |  30 | XYZ
 13816710-1dd2-11b2-0000-242d50cf1ffd |  28 | ABC
 13818e20-1dd2-11b2-0000-242d50cf1ffd |  30 | PQR 
```

但是，当我尝试从 Cassandra-CLI 界面向该表中插入新行时，它会崩溃：

```
[default@unknown] use usertable;
Authenticated to keyspace: usertable
[default@usertable]
[default@usertable] set users['005']['name'] = 'MNO';
log4j:WARN No appenders could be found for logger (org.apache.cassandra.config.DatabaseDescriptor).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Cannot locate cassandra.yaml
Fatal configuration error; unable to start server.  See log for stacktrace. 
```

有没有其他人观察到类似的行为。？CQLsh 3.0 和 Cassandra-CLI 之间是否存在一些不兼容？此外，我在使用 CQLsh 规范 2.0.0 时看到了类似的结果！

谢谢，VS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:31:33.400

您的“Id”值是一个 uuid。尝试将 uuid 设置为 16 字节的值；在 CLI 的较新版本中，列验证更加严格。

# spring - 测试post方法Spring

> ID：12601807
> 
> 赞同：1
> 
> 时间：2012-09-26T12:32:32.100
> 
> 标签：spring, mocking, spring-3, spring-test

我想测试下面的控制器方法。有没有办法在
模拟请求中添加 Profile 对象？

```
MockHttpServletRequest request = new MockHttpServletRequest();
//request.add(myProfile);

@RequestMapping(value = "/", method = RequestMethod.POST)
public View postUser(ModelMap data, @Valid Profile profile) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:37:00.903

您的配置文件对象应根据作为请求参数提交的内容进行绑定，因此只需设置相关的请求参数，例如，如果您在配置文件中有一个字段作为名称，请设置该请求。`request.addParameter("name", "val")`

测试 Spring MVC 堆栈的一种非常好的方法是使用[Spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)

# openfire - Openfire 管理端口和 HTTP 绑定端口

> ID：12601808
> 
> 赞同：1
> 
> 时间：2012-09-26T12:32:37.227
> 
> 标签：openfire

我只是安装了已安装的 openfire 和 webchat 插件。 webchat 插件在 openfire 的 HTTP 绑定端口中工作正常。我可以为管理员和 HTTP 绑定设置相同的端口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:05:28.543

我觉得不可能

因为管理控制台和 HTTP 绑定都是 openfire 的完全不同的服务。因此，如果您尝试为两者设置相同的端口，则可能会引发“端口已在使用”之类的错误。

# jquery - 如何支持不同的jquery-ui主题

> ID：12601813
> 
> 赞同：1
> 
> 时间：2012-09-26T12:33:03.433
> 
> 标签：jquery, css, jquery-ui

我正在用 jQuery 制作一个日历组件，我希望它可以使用主题滚轮主题和任何可用的 jquery 主题（平滑度、ui-ligtness、ui-darkness 等）来设置样式。使用不同的 css 类 ui-widget、ui-widget-container、ui-state-XXX 我有一些可以正常工作的东西。问题在于，由于背景位置，某些主题的背景最终看起来很奇怪。

此处提供示例：http: [//jsfiddle.net/Ddn3t/1](http://jsfiddle.net/Ddn3t/1)

但是，请注意，我不能真正使用`background-postion: bottom`，因为如果我更改主题，我需要更改该值来`top`代替。

例如在这种情况下：http: [//jsfiddle.net/Uasen/2](http://jsfiddle.net/Uasen/2)

所以我需要一种方法来为这两种情况正确定位背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:13:06.643

状态类用于*可点击的类似按钮的元素*，而不是真正用于其他任何东西。他们是问题所在。如果您删除它们，那么一切都会显示正常。您可能还应该将 ui-widget 类添加到外部元素。IE。

```
<div style="height: 400px;" class="ui-calendar-day ui-widget ui-widget-content">
<div class="ui-calendar-day-name ui-calendar-day-header ui-widget-header ui-helper-clearfix " style="top: 0px; ">Friday</div>
<div style="display: none" class="ui-calendar-day-number ui-calendar-day-header ui-widget-header" style="top: 0px; ">7</div> 
```

​</p>

@see[主题 API](http://jqueryui.com/docs/Theming/API)

# uml - 直径默认可见性

> ID：12601819
> 
> 赞同：1
> 
> 时间：2012-09-26T12:33:12.920
> 
> 标签：uml, dia

有没有办法在 Dia-Editor 中设置属性和方法的默认可见性？我发现自己做了很多点击来将属性的可见性更改为私有。将默认可见性设置为私有也是一个更明智的默认设置，因为它迫使您坚持封装的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:04:37.690

下载[源代码](http://ftp.gnome.org/pub/gnome/sources/dia/)，编辑文件`objects/UML/umlattributes.c`，在函数中`UMLAttribute * uml_attribute_new(void)`（大约第 73 行），更改行

```
attr->visibility = UML_PUBLIC; 
```

至

```
attr->visibility = UML_PRIVATE; 
```

或者，玩弄其他文件并根据自己的喜好进行修改。

编译修改后的源码： [如何编译 Dia](http://dia-installer.de/howto/compile_msvc/index.html.en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T22:43:02.453

我已经使用 dia 进行数据库映射，当我这样做时，我发现拥有我复制的模板对象而不是仅仅创建一个新对象是按照我想要的新对象的方式获取所有默认值的最简单方法。

# windows - 文件 R/W 活动监控

> ID：12601823
> 
> 赞同：0
> 
> 时间：2012-09-26T12:33:31.750
> 
> 标签：windows

我需要一些方便的小工具来检查系统（我的意思是Windows）中文件的一些当前活动，我确实理解从文件读取和对文件的写入。有没有这样的工具，最好是其中最好的一个；-)

我想检查诸如哪些文件，某些程序“接触”以进行读写之类的事情。

很多tnx

编辑我检查了 Pcocess MOnitor 并且它正在工作，但它每秒钟只提供数千个“事件” - 可以按进程名称和事件类型对其进行过滤，但即便如此，它的数量也太多了。我将使用它，但也许有人知道更方便/最简单的东西 - 我需要的基本信息是哪些进程涉及哪些文件不需要原始的数十亿个混乱的系统事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:43:37.623

**ProcMon**或**Process Monitor**将告诉您所有有关您的流程的信息。

**RegMon**或**Registry Monitor**将告诉您所有有关您的注册表项的信息。

**InControl 智能驭领**将为您提供软件安装或卸载后所做的每项更改的日志文件。

使用这些工具的步骤：[RegMon 或 File Monitor](http://technet.microsoft.com/en-us/library/cc758606%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:30:59.163

[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)非常适合以交互方式（即人工）观看文件访问。如果您需要监控文件访问和运行报告等，那么[PA File Sight](http://www.poweradmin.com/File-Sight)非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:36:08.457

你想要微软的[*进程监视器*](http://technet.microsoft.com/en-us/sysinternals/bb896645)；

> Process Monitor 是用于 Windows 的高级监控工具，可显示实时文件系统、注册表和进程/线程活动

（在网站上浏览许多其他审计实用程序）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T12:36:57.753

Microsoft 为此类事情提供了许多诊断工具。例如，要监视文件活动，您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)（它还可以监视注册表访问等）。

# asp.net - 如何使用插入触发器后发送电子邮件

> ID：12601826
> 
> 赞同：0
> 
> 时间：2012-09-26T12:33:43.737
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

在将新数据插入我的 sql server 数据表后，我想发送电子邮件警报。我怎样才能做到这一点？

我试过跟随触发器，但我不太确定它的功能。

```
CREATE TRIGGER dbo.sendMail 
   ON  dbo.staff_leaves
   AFTER INSERT
AS 
BEGIN

    SET NOCOUNT ON;
    EXEC msdb.dbo.sp_send_dbmail
          @to = 'whoever@yourcompany.com', 
          @profile_name = 'default',
          @subject = 'New Row', 
          @body = 'Yep, they sure were.';

END
GO 
```

任何人请解释我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:42:34.707

您写道您对功能不太确定，但不清楚是什么让您不确定。你做过试运行吗？

我建议查看 MSDN 页面，[`sp_send_dbmail`](http://msdn.microsoft.com/en-us/library/ms190307.aspx)该页面提供了几乎相同的代码示例，并且还包含许多其他提示。例如，MSDN 建议：

> 在使用之前，必须使用数据库邮件配置向导或 sp_configure 启用数据库邮件。

和

> sp_send_dbmail 的执行权限（必需）默认授予 msdb 数据库中 DatabaseMailUser 数据库角色的所有成员。但是，当发送消息的用户无权使用请求的配置文件时，sp_send_dbmail 将返回错误并且不发送消息。

[可以在 SQL Server 2008 中设置](http://www.sqlservercentral.com/blogs/databaseexpertisecom/2010/05/12/database-mail-set-up-in-sql-server-2008/)的数据库邮件中找到分步说明

# knockout.js - 如何在 Knockout JS 中完全从视图模型中删除子对象？

> ID：12601828
> 
> 赞同：1
> 
> 时间：2012-09-26T12:33:53.283
> 
> 标签：knockout.js

我有以下设置：

[http://jsfiddle.net/josephbulger/FjmAU/](http://jsfiddle.net/josephbulger/FjmAU/)

我有一个具有父子关系的 KOJS 视图模型。使这种关系有点奇怪的是，孩子需要父母才能执行其中一个计算功能。

这给我带来了各种各样的问题，因为当我调用保存时，我必须重新加载我所有的孩子，每当父母的 observable 发生变化时，老孩子仍然会触发他们的计算函数。

这不是我想要的行为。我想做的是在我保存之前完全删除所有孩子，然后从服务器回调中添加孩子。我的意思是，大孩子将完全从记忆中消失，他们不会再触发任何事件。但是，我不知道如何用 KOJS 正确清理它们。在这一点上，我唯一知道如何正确做的就是将它们从父母的孩子列表中删除。

在 KOJS 视图模型中完全处理子对象的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:48:40.667

作为一种解决方法，我不得不求助于这样做，尽管我真的不希望这成为解决方案：

```
function Parent() {
    var self = this;

    self.children = ko.observableArray([]);

    self.troublemaker = ko.observable(5);    

    self.blowaway = function () {

        //i have to do this so i can serialize later
        for (var i = 0; i < self.children().length; i++) {    
            self.children()[i].alive = false;                        
            self.children()[i].parent = null;
        }

        var dataToServer = ko.toJSON(self);

        //save to server

        self.children.removeAll();

        makeChildren();

    }

    function makeChildren(){
        self.children.push(new Child(self));     
        self.children.push(new Child(self));     
        self.children.push(new Child(self));                         
    }     

    makeChildren();

}

var count = 0;

function Child(parent) {

    var self = this;

    self.parent = parent;

    self.alive = true;

    self.something = ko.observable(10 * count);

    count++;

    self.iwillblowup = ko.computed(function () {      
        if (!self.alive)
            return;
        return self.something () * self.parent.troublemaker();
    });        
}

var viewModel = new Parent();
ko.applyBindings(viewModel);​ 
```

请注意“活动”标志是如何用于有条件地离开计算函数的。对我来说，这只是解决我遇到的基本问题的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:29:07.850

您可以使用 ko 函数：`ko.removeNode(node)`它调用`ko.cleanNode(node)`然后从父节点中删除子节点。

# java - 从 java 更新 ldap

> ID：12601830
> 
> 赞同：0
> 
> 时间：2012-09-26T12:33:58.320
> 
> 标签：java, windows, linux, ldap

我知道java提供了一组api来联系LDAP服务器，并且一个进程可以通过提供凭据来联系LDAP服务器，但我一直认为除了用户名和密码之外要**更新** LDAP，应该加入联系LDAP的PC windows 域。

这是错误的假设吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:46:04.080

这种假设确实是错误的。

LDAP 不是特定于 Windows 的技术。更新目录数据所需的只是能够连接到适当的端口（389 用于未加密或 TLS 加密的连接，或 636 用于 SSL 加密的连接）并使用拥有的用户的凭据绑定到 LDAP 服务器足够的访问权限来修改您想到的属性。

# jquery - Jquery 和 on 函数？

> ID：12601838
> 
> 赞同：1
> 
> 时间：2012-09-26T12:34:17.787
> 
> 标签：jquery, checkbox

我是 jquery 的新手。我有一个复选框

```
<label id="2p">
    <input type="radio" name="due" class="due"  value="2p" checked="yes" />
    <span class="testoCheckbox">2p</span>
</label> 
```

动态附加到 div。在加载、更改或单击事件后附加不会被触发。我知道捕获单击复选框的解决方案必须在“on”功能中，但我无法获得正确的语法。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:42:42.320

您可以使用`on()`这种方式检查动态添加的元素上的事件：

```
$(document).on('change', '.due', function(event){

    // do your stuff

}); 
```

每当`change`在文档中触发事件时，如果它与`.due`选择器匹配，就会触发回调。

您可能希望缩小选择范围以获得更好的性能：

```
$('#someDiv').on('change', '.due', function(event){

    // do your stuff

}); 
```

如果你想定位包含在的*所有*复选框`#someDiv`：

```
$('#someDiv').on('change', 'input[type="checkbox"]', function(event){

    // do your stuff

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:41:04.180

尝试 ：

```
$('body').on('click', '.due', function() {
  // do something here
}); 
```

参见：[jQuery`.on()`](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T12:36:41.767

据我所知，您可以动态地将 checkbvox 附加到`onclick=""`事件中，它应该可以正常工作。如果你想用 jQuery 来做，你应该定义 id（比如“myCheckbox”）并做

```
$('#myCheckbox').click(function(){
  //your code here.
}); 
```

或者，如果您想为所有复选框附加相同的操作，请使用不同的选择器，即：`.due`
顺便说一下，`.click(handler)`这只是根据文档的快捷方式： [http](http://api.jquery.com/click/)`.on("click", handler)` ://api.jquery.com/click/

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-26T12:36:09.593

当您动态加载复选框时，jQuery 无法在页面加载时将事件绑定在其上，使用 .live（在 >= jQuery 1.7 中由 .on 替换）您可以实现以下目标：

“为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。”

[http://api.jquery.com/live/](http://api.jquery.com/live/)

回答：

```
$(body).on("click", ".due", function() {
  // Handler
}); 
```

# python - 如何为以下内容编写 map reduce

> ID：12601843
> 
> 赞同：-4
> 
> 时间：2012-09-26T12:34:27.397
> 
> 标签：python, hadoop, mapreduce

我有以下数据

```
Name Year  score
A    1996  84
A    1997  65
A    1996  76
A    1998  78
A    1998  65
B    1998  53
B    1996  98
B    1996  83
B    1996  54 
```

我想要输出如下

```
Name Year  max_score
A    1996  84
B    1996  98 
```

我如何为这项工作编写 python map reduce 代码？

我可以将 NAME 和 YEAR 创建为单个键，并作为值进行评分。

但是有没有其他方法可以处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:51:33.440

假设你所有的年份和分数都是正数：

```
from collections import defaultdict

mapping = defaultdict( lambda: (0,0) )
with open(datafile) as f:
     for line in f:
         name,year,score = line.split()
         try:
            year = int(year)
            score = int(score)
         except ValueError:
            continue

         if score > mapping[name][1]:
            mapping[name] = year,score 
```

或者稍微简洁一些，但对错误的鲁棒性较差：

```
from collections import defaultdict

mapping = defaultdict( lambda: (0,0) )
with open(datafile) as f:
     f.readline() #header.  Don't need it.
     for line in f:
         name,year,score = line.split()
         if int(score) > mapping[name][1]:
            mapping[name] = int(year),int(score) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:58:02.143

这就是你所追求的吗？

```
def mapper(key, value):
    name, year, score = value.split()
    yield name, (year, score)

def reducer(name, values):
    yield name, max(values, key=operator.itemgetter(1)) 
```

# r - 在 R 中构建后重用 ts 模型以更新数据集（预测包）

> ID：12601848
> 
> 赞同：2
> 
> 时间：2012-09-26T12:35:05.680
> 
> 标签：r, time-series, updates, reusability, forecasting

我对 R 编程很陌生，但我找不到关于我的问题的任何信息......

我想用高分辨率数据（半小时数据）的预测包在 R 中做一些预测。我想让预测在线工作。这就是为什么我认为每次都计算一次拟合不是很有用的原因。

因此，我喜欢将已经拟合的模型传递给模型并将其用于新数据的方法：

```
fcast2 <- forecast ( Arima ( x = extendedSeries , model = oldArimaModel ), h = horizon ) 
```

但它并不真正适用于 HoltWinters 模型......（或 lm 模型，这对于 lm 的含义来说是可以的）

```
fcastArima <- forecast(Arima(x= extendedseries , model=oldArimaFit),h=horizon)
fcastHoltWinters <- forecast(update(oldHWfit, x=extendedSereies), h=horizon) 
```

无论如何，我想保持代码简单，我正在寻找一种更通用的方法来将已经拟合的 ts 模型应用于更新的数据集。

有谁知道如何做到这一点？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:31:53.180

`HoltWinters()`是一个非常有限的功能。该`ets()`函数将拟合相同的模型，具有更好的估计，并将拟合更大范围的相似模型。它还允许以与您相同的方式重新拟合新数据`Arima()`。

# php - 声明一次后更新 PHP 中的变量

> ID：12601850
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:35:07.307
> 
> 标签：php

是否可以在 PHP 中更新变量？

就像在文件头声明变量，然后在 switch case 里面更新变量？

我正在尝试获取它，以便它将标题中的页面更改为 [网站] - [访问页面 [例如。首页/关于我们/联系我们]]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:36:21.153

是的。如果不是，那么它将是一个常数，而不是一个变量。

```
$variable = "new value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:38:39.063

只需`global`像这样使用关键字：

```
$var = "Original Title";
function changeTitle(){
    global $var;

    if("Condition"){
        $var = "New Title";
    }
} 
```

对该变量的任何引用都将指向全局变量。您现在可以在您的 switch case 语句中调用此函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:40:44.197

是的，这是可能的，而且实际上是 PHP 开发人员使用的常见模式之一。

例如

```
<?php

$pageTitle = "Home";

switch ($_GET['show_page']) {
  case 'contact':
  $pageTitle = "Contact Us";
  break;

  default:
  $pageTitle = "Home";
  break;
}

?>

<html>
<head>
<title><?php echo $pageTitle ?></title>
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:37:01.127

当然可以。

```
$title = "Our Website";

...

switch($section)
{

    case 'home';
        $title .= " - Homepage";
        break;

    case 'awesome';
        $title .= " - Awesome";
        break;      

} 
```

# mysql - MySQL 查询中的排序规则的非法混合

> ID：12601856
> 
> 赞同：0
> 
> 时间：2012-09-26T12:35:28.393
> 
> 标签：mysql

我有这段代码允许我搜索所有数据库。

问题是我得到这个错误：

```
llegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation 'like' 
```

我的查询看起来像这样：

```
$sql = "select * from hostess where hostess_id like '%$term%' or..... 
```

当我搜索俄语单词时。我怎样才能防止这样做呢？谢谢。

# ios - 包括对 Mountain Lion 上的 Safari 有用的 Passbook pkpass

> ID：12601857
> 
> 赞同：8
> 
> 时间：2012-09-26T12:35:29.393
> 
> 标签：ios, safari, osx-mountain-lion, passbook

显然，Mountain Lion 10.8.2 Safari“支持”存折通行证，因为它将预览并提供将“.pkpass”文件同步到 iCloud，以便用户配置的 iPhone 加载到存折中。

但是，除了用户明确下载此类文件外，我还没有找到任何有关如何让浏览器加载此类文件的文档。

理想情况下，会有一个`<link rel="alternate" type="application/vnd.apple.pkpass">`或类似的标签，以便支持（并适当配置）的浏览器可以选择并提供它。我找不到任何提及此类功能的内容。

除此之外，用户需要被引导到“单击此处”以下载 pkpass，并希望他们知道它是什么以及如何处理它。否则，它在他们的下载文件夹中是一个不透明的 blob。

显然，我不想明确嗅探 iOS 6 或 OS X 10.8.2 及更高版本的用户代理，因为这也不会检查用户是否配置了 iCloud，并且还排除了对 PassWallet 和 Android 类似应用程序的支持等等，以及其他支持的浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:40:21.950

显而易见的解决方案是为 vnd.apple.pkpass 内容类型包含一个 Accept 标头。这正是这个标题的意图。

不幸的是，这不在个人开发人员手中。

Microsoft 为 .Net Framework 执行此操作，他们在其中将信息作为用户代理的一部分发送。这使您可以检测访问者的计算机上是否安装了 .Net Framework。

OS X Lion 应在发出的所有浏览器请求中包含此标头，iOS 设备也应发送它。

目前，您将拥有的最佳选择是您概述的那个。如果 UserAgent 用于 iOS 或 OS X Lion，您可以推断支持。这并不理想，但您目前可以做到的最好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T00:20:52.597

您的服务器需要发送带有 pkpass 文件的“Content-type: application/vnd.apple.pkpass”标头。

# sql - 基于一列对数据进行分组

> ID：12601859
> 
> 赞同：2
> 
> 时间：2012-09-26T12:35:36.710
> 
> 标签：sql, join, group-by, pivot

您好我有如下数据库：

```
 id   | service | player |  name  |           value            
--------+---------+--------+--------+----------------------------
 104169 |    1232 | 313619 | age    | 30         
 104171 |    1232 | 313619 | email  | something@gmail.com
 104170 |    1232 | 313619 | gender | 0
 104172 |    1232 | 313620 | age    | 21
 104174 |    1232 | 313620 | email  | example@zoznam.sk
 104173 |    1232 | 313620 | gender | 1
 104175 |    1232 | 313621 | age    | 20
 104177 |    1232 | 313621 | email  | nothing@gmail.com
 104176 |    1232 | 313621 | gender | 1
 104178 |    1232 | 313622 | age    | 20
 104180 |    1232 | 313622 | email  | forth_mail@gmail.com
 104179 |    1232 | 313622 | gender | 1
 104181 |    1232 | 313625 | age    | 20
 104183 |    1232 | 313625 | email  | lastmail@citromail.hu
 104182 |    1232 | 313625 | gender | 1 
```

我需要按玩家分组的输出如下：

```
 player |  age  |  gender | email            
--------+-------+---------+------------------
 313619 | 30    | 0       | something@gmail.com
 313620 | 21    | 1       | example@zoznam.sk
 313621 | 20    | 1       | nothing@gmail.com
 313622 | 20    | 1       | forth_mail@gmail.com
 313625 | 20    | 1       | lastmail@citromail.hu 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:39:05.647

试试这个：

```
 SELECT
     player,
     MAX(CASE WHEN name = 'email'   THEN  value END) AS email,
     MAX(CASE WHEN name = 'gender'  THEN value END) AS gender,
     MAX(CASE WHEN name = 'age' THEN value END) AS age
   FROM table 
   GROUP BY player 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:49:03.473

你所拥有的是一团糟。我建议紧急重新考虑您的数据库设计。字段具有数据类型是有原因的。

如果您的数据库支持`PIVOT`，您可以这样做...

```
select player, age,gender, email from 
(select player, name, value from yourtable) src
pivot 
(max(value) for name in ([age],[email],[gender])) p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:52:56.807

您没有指定 RDBMS，但您有几种方法可以做到这一点。如果您知道列数，那么您可以使用以下任一方式进行硬编码：

```
SELECT player,
     MAX(CASE WHEN name = 'email'   THEN  value END) AS email,
     MAX(CASE WHEN name = 'gender'  THEN value END) AS gender,
     MAX(CASE WHEN name = 'age' THEN value END) AS age
FROM yourtable 
GROUP BY player 
```

[MySQL Fiddle with Demo](http://sqlfiddle.com/#!2/6ff27/1)或者如果你的 RDBMS 有一个`PIVOT`函数，那么：

```
select *
from 
(
  select player, name, value
  from yourtable
) x
pivot
(
  max(value)
  for name in ([age], [gender], [email])
) p; 
```

[SQL Server PIVOT 小提琴演示](http://sqlfiddle.com/#!3/6ff27/5)。

但是如果你在 MySQL 中有未知数量的列，你可以使用准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN name = ''',
      name,
      ''' then value else null end) AS ',
      name
    )
  ) INTO @sql
FROM Yourtable;

SET @sql = CONCAT('SELECT player, ', @sql, ' 
                  FROM yourtable 
                  GROUP BY player');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

[MySQL 准备语句 Fiddle Demo](http://sqlfiddle.com/#!2/6ff27/6)或 SQL-Server Dynamic SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(name) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT player, ' + @cols + ' from 
             (
                select player, name, value
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for name in (' + @cols + ')
            ) p '

execute(@query) 
```

[SQL Server 动态小提琴与演示](http://sqlfiddle.com/#!3/6ff27/6)

# perl - 在 perl 中使用长度和编码

> ID：12601869
> 
> 赞同：2
> 
> 时间：2012-09-26T12:36:07.970
> 
> 标签：perl

当我使用 dbi 从数据库中读取一些文本字段并将其存储在 $variable 上并在此变量上运行 lenght 函数时，我的 mysql 数据库被编码为 ut8_generic_ci 我得到一个数字长度

```
 my $data retrive_text_from_db(); #using dbi
  print length $data; 
```

但是当我将 $data 存储在文本文件中然后尝试在另一个脚本上读取它并运行长度函数时，我有时会得到不同的长度

```
 open T, '<'  ,'file.txt' or die $!;
     binmode(T, ":utf8");
     my $text;
     {local $/; $text=<T>; }
     print length $text; 
```

有人遇到过这个问题吗/有人能告诉我问题的根源是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:56:16.570

Perl 字符串要么是面向字节的，要么是面向字符的。我假设您第一个示例报告的长度总是大于或等于第二个示例报告的长度？

当您使用时，`binmode(T, ":utf8")`您告诉 Perl 获取文件中的字节流并使用 UTF-8 编码自动将它们转换为字符。所以在这个例子中`$text`应该是一个字符串。

我的猜测是您尚未配置 DBI 来执行此转换，因此您最终会得到一个包含 UTF-8 编码数据的字节字符串。这意味着某些字符可能每个需要 2-4 个字节。一种选择是将 DBI 配置为正确处理 UTF-8。如何做到这一点取决于驱动程序，因为您使用 MySQL，它应该通过这种方式连接：

```
my $dbh = DBI->connect($dsn, $user, $passwrod, { mysql_enable_utf8 => 1 }); 
```

由于某种原因，此配置变量的默认值似乎已关闭。

或者，您可以使用 Encode 模块自己进行转换：

```
use Encode;
$data = decode_utf8($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:02:20.197

在这里尝试的第一件事是打印两者`$data`并`$text`在屏幕上查看它们是否相同。如果您有字符编码问题，其中之一可能会失败。在这种情况下，请按照 pmakholm 的建议查看[编码模块。](http://perldoc.perl.org/Encode.html)

如果该测试成功，那就更微妙了。

其中一种可能性是换行符在输入数据和文本文件之间的存储方式不同。在某些格式中，换行符是一个字符；在其他情况下，它们是两个字符。即使数据实际上是相同的，这也会给你不同的长度。

# javascript - div 中的内容重叠圆角。

> ID：12601871
> 
> 赞同：0
> 
> 时间：2012-09-26T12:36:15.073
> 
> 标签：javascript, jquery, html, css, cross-browser

我正在尝试在表格元素上获得圆角。理想情况下，我希望在 IE 7-10、Chrome 和 Firefox 上显示圆角。为此，我正在使用[JQuery Corner](http://jquery.malsup.com/corner/)。我面临的问题是，当我将默认的圆角效果应用于围绕我的表格的 div 时，表格与边框/角重叠。

这是一个屏幕截图： ![边界](../Images/2668cd6a71f214bc2b15c0bbc785b40b.png)

为什么表格超出了我的div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:54:04.843

```
Tables don't accept border-radius as a property. 
```

[http://jsfiddle.net/Kyle_/zBE6H/](http://jsfiddle.net/Kyle_/zBE6H/)

您可以做的是将其包装在一个 div 中并赋予该边框半径，同时删除表格的边框（或赋予边框与 div 的背景相同的颜色。）

[http://jsfiddle.net/Kyle_/zBE6H/1/](http://jsfiddle.net/Kyle_/zBE6H/1/)

# android - 在 android 2.3.3 中创建表 android_metadata 失败

> ID：12601874
> 
> 赞同：1
> 
> 时间：2012-09-26T12:36:28.130
> 
> 标签：android, sqlite

我正在开发一个使用 SQlite 数据库的应用程序。我的应用程序在每个操作系统版本和所有模拟器中都运行良好，但它只会在**操作系统版本为 2.3.3**的设备中产生问题。我收到 CREATE TABLE android_metadata 消息并且我的数据库代码崩溃。

**我正在使用带有 Android OS 2.3.3 的 Google Nexus**

请建议我什么是实际问题以及我可以做些什么来解决这个设备相关问题。我也在下面发布我的代码：

```
public class ECatalogueDatabase {

    private static final String DB_PATH = "/data/data/com.weg.ecatalogue/databases/";
    public static final String DATABASE_NAME = "ECatalogue";
    public static final String DATABASE_TABLE = "T_Electrical";
    public static final int DATABASE_VERSION = 1;

    public static final String KEY_ROWID="id";
    public static final String KEY_PRODUCT_LINE="productline";

    public static final String KEY_VOLTAGE="voltage";
    public static final String KEY_OUTPUTHP="outputhp";

    public static final String KEY_FRAME="frame";
    public static final String KEY_RPM="rpm";

    private Context context=null;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    /**
     * Database creation sql statement
     */
    private static final String CREAT_DATABASE="Create Table if not exists "+ DATABASE_TABLE+"("+ KEY_ROWID +" INTEGER PRIMARY KEY NOT NULL,"
    +KEY_PRODUCT_LINE +" nvarchar ,"+ KEY_OUTPUTHP+" numeric ,"+ KEY_RPM +" nvarchar ,"+KEY_VOLTAGE +" nvarchar ," +KEY_FRAME +" nvarchar"+")";

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     *
     * @param ctx the Context within which to work
     */
    public ECatalogueDatabase(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }
    //Helper class
    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREAT_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }

    }

    public ECatalogueDatabase open() //throws SQLException
    {
        try
        {
            db=DBHelper.getWritableDatabase();

        }catch(Exception exception)
        {
            exception.printStackTrace();
        }
        return null;
    }

    public void close()
    {
        DBHelper.close();
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        @SuppressWarnings("unused")
        boolean dbExist = checkDataBase();

        SQLiteDatabase db_Read = null;
        if(dbExist){
        //DO NOTHING IN THIS CASE
        }else{

        db_Read = DBHelper.getReadableDatabase();
        db_Read.close();
        }
        //=================================

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }

    }
    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){
        try{
            String myPath = DB_PATH + DATABASE_NAME;
            db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

        }

        if(db != null){

            db.close();

        }

        return db != null ? true : false;
    }
    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        InputStream myInput = context.getAssets().open(DATABASE_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DATABASE_NAME;

        OutputStream myOutput = new FileOutputStream(outFileName);

        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public int getDatabaseCount(){
        int count = 0;
        Cursor cursor = db.rawQuery("Select * from " + DATABASE_TABLE, null);
        if(cursor!=null){
            count = cursor.getCount();
        }
        cursor.deactivate();
        cursor.close();
        return count;
    }

} 
```

**我的日志**：

```
5CREATE TABLE android_metadata failed
Failed to setLocale() when constructing, closing the database
a
    at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
    at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java1987)
    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java1855)
    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java820)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java854)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java847)
    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java567)
    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java203)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java118)
    at com.weg.ecatalogue.database.ECatalogueDatabase.open(ECatalogueDatabase.java76)
    at com.weg.ecatalogue.HomeScreen.onCreate(HomeScreen.java219)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java1722)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java1784)
    at android.app.ActivityThread.access$00(ActivityThread.java123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java939)
    at android.os.Handler.dispatchMessage(Handler.java99)
    at android.os.Looper.loop(Looper.java123)
    at android.app.ActivityThread.main(ActivityThread.java3839)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java599)
    at dalvik.system.NativeStart.main(Native Method)
Deleting and re-creating corrupt database /data/data/com.weg.ecatalogus/ECatalogue
a
    at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
    at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java1987)
    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java1855)
    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java820)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java854)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java847)
    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java567)
    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java203)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java118)
    at com.weg.ecatalogue.database.ECatalogueDatabase.open(ECatalogueDatabase.java76)
    at com.weg.ecatalogue.HomeScreen.onCreate(HomeScreen.java219)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java1722)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java1784)
    at android.app.ActivityThread.access$00(ActivityThread.java123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java939)
    at android.os.Handler.dispatchMessage(Handler.java99)
    at android.os.Looper.loop(Looper.java123)
    at android.app.ActivityThread.main(ActivityThread.java3839)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java599)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T08:02:24.550

这是完全不同的问题，我只在像 HTC Nexus ONE 设备这样的少数设备上遇到过，它在所有操作系统和所有其他设备上都可以工作。

当我们创建数据库时，我们会自动生成一个名为“android_table”的表，我删除了该表并在我的 SQLite 管理器中手动重新创建了该表。通过以下两步查询：

```
CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US') 
```

和

```
INSERT INTO "android_metadata" VALUES ('en_US') 
```

在我运行代码的这一步之后，我在圣诞节前得到了惊喜。我的应用程序现在运行良好。

所有功劳归功于我长期的研发和经过这么多努力后得到的这个链接： [http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:20:14.340

尝试使用：

```
SQLiteDatabase.openDatabase(your_path, null, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
```

# java - 如何正确安装mysqlconnecter java？

> ID：12601879
> 
> 赞同：2
> 
> 时间：2012-09-26T12:36:46.430
> 
> 标签：java, mysql, netbeans, connector

在网上冲浪后我意识到我应该在系统环境变量中设置类路径连接器 jar 文件的路径文件我这样做了，在命令行中输入这个命令我有这个：

```
C:\Users\User>echo %classpath%
D:\classpath\mysql-connector-java-5.1.22-bin.jar 
```

但是当我编写一个java程序来显示类路径时：

```
System.out.println(System.getProperty("java.class.path")); 
```

它向我展示了这个：

```
C:\Users\User\Documents\NetBeansProjects\JavaApplication3\build\classes;C:\Users\User\Documents\NetBeansProjects\JavaApplication3\src 
```

我想连接到数据库我应该如何安装我的连接器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:17:03.307

JDBC 驱动程序不需要任何“安装”。

您不应该*设置*系统范围的`CLASSPATH`环境变量，这只会导致混乱。

启动程序时，只需将文件的位置提供给 Java 命令：

```
java -cp myapp.jar;D:\classpath\mysql-connector-java-5.1.22-bin.jar MyMain

```

要在 NetBeans 项目中使用它，请将 jar 文件添加到项目的“库”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:12:00.217

只需在命令提示符下使用 set 命令 ( ) 或通过使用 UI 定义 CLASSPATH 环境变量将 * *D:\classpath**添加到 CLASSPTH 。`set CLASSPATH=%CLASSPATH%;D:\classpath;`

# java - 两个不同的对象打印相同的属性值

> ID：12601881
> 
> 赞同：0
> 
> 时间：2012-09-26T12:36:53.013
> 
> 标签：java, variable-assignment

我正在编写一个程序，其中我有一块板（3 x 3 矩阵），我必须通过逻辑交换特定行和列中的值与其相邻的行和列，如果我在 [0,0 处有 0 值] 然后我想要两块板。一个板在 [0,1] 处具有 0 值，在 [0,0] 处具有 [0,1]s 值，在 [1,0] 处具有 0 值并且在 [0,0] 处具有 [1,0]s 值的另一块板， 0]。但是在实现以下代码后，我有两个具有相同值的板，我无法理解对这些错误值的任何解释。

编辑：下面我有两个相关的类和相关的方法。问题在于 Board 类的邻居方法。似乎当我在邻居方法中创建一个板时，它并没有做它应该做的事情。

板级

```
public final class Board {
private final int dimen;
private final int[][] blocks;

public Board(int[][] blocks)           // construct a board from an N-by-N array of blocks
    // (where blocks[i][j] = block in row i, column j)
{
    this.dimen = blocks.length;
    this.blocks = new int[dimen][dimen];
    for (int i = 0; i < dimen; ++i) {
        for (int j = 0; j < dimen; ++j) {
            this.blocks[i][j] = blocks[i][j];
            System.out.println (this.blocks[i][j]);
        }
    }
...
...

public Iterable<Board> neighbors()     // all neighboring boards
{
    Stack<Board> neighborStack = new Stack <Board>();
    int x = 0, y = 0;
    outer : for (int i = 0; i < dimen; ++i){
        for (int j = 0; j < dimen; ++j) {
            if (this.blocks[i][j] == 0) {
                x = i;
                y = j;
                break outer;        
            }
        }
    }

    if (x == 0)
    {
        if (y == 0) {
            int tmpBlocks1[][] = Arrays.copyOf (this.blocks, this.blocks.length );
            int tmpBlocks2[][] = Arrays.copyOf (this.blocks, this.blocks.length );

            tmpBlocks1[0][0] = tmpBlocks1[0][1];
            tmpBlocks1[0][1] = 0;

            tmpBlocks2[0][0] = tmpBlocks2[1][0];
            tmpBlocks2[1][0] = 0;

            Board tmpBoard1 = new Board (tmpBlocks1);
            neighborStack.push (tmpBoard1);

            Board tmpBoard2 = new Board (tmpBlocks2);               
            neighborStack.push (tmpBoard2);

} 
```

求解器类：

```
public final class Solver {

private MinPQ <SearchNode> pqOriginal;
private MinPQ <SearchNode> pqTwin;
Stack <Board> shortestBoardSequence = null;
int moves = 0;

public Solver(Board initial)            // find a solution to the initial board (using the A* algorithm)
{
    pqOriginal = new MinPQ<SearchNode>();
    pqTwin = new MinPQ<SearchNode>();
    pqOriginal.insert(new SearchNode (moves, initial, null) );
    pqTwin.insert(new SearchNode (moves, initial.twin(), null) );
}

public boolean isSolvable()             // is the initial board solvable?
{
    SearchNode originalNode = null;
    SearchNode twinNode = null;
    Stack <Board> neighborBoards = null;
    while (!pqOriginal.isEmpty() || !pqTwin.isEmpty()) {

        originalNode = pqOriginal.delMin();
        // shortestBoardSequence.push(originalNode.board);

        neighborBoards = (Stack<Board>)originalNode.board.neighbors();
...
}
...
}
...
public static void main(String[] args)  // solve a slider puzzle (given below)
{
    // create initial board from file
    In in = new In(args[0]);
    int N = in.readInt();
    int[][] blocks = new int[N][N];
    for (int i = 0; i < N; i++)
        for (int j = 0; j < N; j++)
        blocks[i][j] = in.readInt();
    Board initial = new Board(blocks);

    // solve the puzzle
    Solver solver = new Solver(initial);

    // print solution to standard output
    if (!solver.isSolvable()) // SEE THE ISSOLVABLE
        StdOut.println("No solution possible");
    ..
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:04:44.397

这可能是因为您有一个二维数组，而您只复制一维。

通过做：

```
int tmpBlocks1[][] = Arrays.copyOf (blocks, blocks.length ); 
```

您实际上只是在复制行引用，而不是行数据。你正在做相当于：

```
int[] row0 = {0,0,0};
int[] row1 = {0,0,0};
int[] row2 = {0,0,0};
int[][] blocks = {row0, row1, row2};
int[][] tmpBlocks1 = {row0, row1, row2}; 
```

因此与 .`tmpBlocks`拥有相同的行`blocks`。

您需要执行所谓`deep copy`的数组 a 。

演示问题的示例代码：

```
public final class Test<T> {
  int[][] blocks = {{0,1,2},{10,11,12},{20,21,22}};
  int[][] copyOfBlocks = Arrays.copyOf(blocks, blocks.length);
  int[][] deepCopyOfBlocks = {
    Arrays.copyOf(blocks[0], blocks[0].length),
    Arrays.copyOf(blocks[1], blocks[1].length),
    Arrays.copyOf(blocks[2], blocks[2].length)
  };

  public void test() {
    System.out.println("Before");
    System.out.println("Blocks: "+Arrays.deepToString(blocks));
    System.out.println("Shallow Copy: "+Arrays.deepToString(copyOfBlocks));
    System.out.println("Deep Copy: "+Arrays.deepToString(deepCopyOfBlocks));

    // Change blocks and copy and deep copy.
    blocks[0][0] = 99;
    copyOfBlocks[0][0] = 88;
    deepCopyOfBlocks[0][0] = 77;

    System.out.println("After");
    System.out.println("Blocks: "+Arrays.deepToString(blocks));
    System.out.println("Shallow Copy: "+Arrays.deepToString(copyOfBlocks));
    System.out.println("Deep Copy: "+Arrays.deepToString(deepCopyOfBlocks));
  }

  public static void main(String[] args) throws InterruptedException {
    try {
      Test test = new Test();
      test.test();
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

印刷：

```
Before
Blocks: [[0, 1, 2], [10, 11, 12], [20, 21, 22]]
Shallow Copy: [[0, 1, 2], [10, 11, 12], [20, 21, 22]]
Deep Copy: [[0, 1, 2], [10, 11, 12], [20, 21, 22]]
After
Blocks: [[88, 1, 2], [10, 11, 12], [20, 21, 22]]
Shallow Copy: [[88, 1, 2], [10, 11, 12], [20, 21, 22]]
Deep Copy: [[77, 1, 2], [10, 11, 12], [20, 21, 22]] 
```

请注意，对 99 的更改被对 88 的更改覆盖，这表明副本是指原始的行。使用 77 时只有深拷贝受到影响。

# android - 如何更新我的 Android 应用程序的外观？

> ID：12601885
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:37:05.667
> 
> 标签：android, user-interface, sdk, android-4.0-ice-cream-sandwich

我有一个我不久前构建的 Android 应用程序，它是为 Android 2.3.3 构建的。问题是我看起来很笨重，因为它使用那些旧的 2.3.3 按钮和文本编辑。

我的问题：是否可以将外观更改为 Android 4.0？我的意思是，我可以通过稍作调整来更新应用程序，使其看起来有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:41:44.913

是的，您可以更新您的应用程序并使用 Android SDK 提供的各种主题。有关更多信息，请[阅读此链接](http://developer.android.com/guide/topics/ui/themes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:47:30.960

你可以试试[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)。它为 Android 2.1 到 2.3 的设备带来了默认的 Holo 暗/亮主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:42:08.607

尝试`Theme.DeviceDefault`用于您的主题。这将使您的应用在装有 Android 4 的设备上使用 Android 4.0 主题。

# php - 处理多语言网站

> ID：12601887
> 
> 赞同：1
> 
> 时间：2012-09-26T12:37:16.727
> 
> 标签：php, database

我有一个与数据库通信的多语言网站，其中包含特定语言的翻译。

比如一个表gender有10行，每行表示一种语言。

```
+---------+-----------+-----+
| English | French    | etc |
| Male    | Masculine | ... |
+---------+-----------+-----+ 
```

某些语言（如中文、希腊语、土耳其语、西班牙语、俄语等）具有 latin1 之外的字符，当我从我网站上的数据库中读取数据时，它们会出现`?`乱码*（mojibake）*

那么，我该如何解决这个问题？

我知道我需要在数据库上使用某些排序规则并添加特定的元字符集标记，但它仍然无法正常工作。

```
 cp1256 | Windows Arabic          | cp1256_general_ci (it's not giving me the correct arabic solution.)
 gbk    | GBK Simplified Chinese  | gbk_chinese_ci    (it's not giving me the correct chinese solution.) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:03:42.597

Collat​​ion 仅用于排序目的，而 charset 用于存储。显然您正在使用`latin1`字符集，这很有趣。许多人会建议使用`utf-8`字符集，因此您现在必须将所有数据转换为该字符集。就个人而言，我会使用二进制数据（`binary`vs. `char`、`varbinary`vs. `varchar`、`blob`vs. `text`）。如果您需要准确的排序（整理），这只是一个问题，因为二进制排序是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:13:30.460

在查看多语言系统时，需要考虑系统的很多方面。

您需要确保在整个系统中使用合适的字符编码。在大多数情况下，字符编码的最佳选择是 UTF-8。（在某些情况下 UTF-8 是不够的，在这种情况下有 UTF-16，但这些情况很少，而且 PHP 无论如何都会与 UTF-16 斗争，所以一般都坚持使用 UTF-8你会没事的）。

您需要确保在以下位置使用相同的字符编码：

*   您的数据库表。
*   您的网络服务器。
*   你的 PHP 源代码。

该数据库很容易处理：只需确保所有表的字符集都使用 UTF-8 编码创建。任务完成。

排序规则不太相关——它指定了排序顺序。这当然很重要，但与您看到的乱码文本显示没有任何关系。（值得一提的是，某些字符在不同语言中的排序方式不同，因此如果您需要在单个表中支持多种语言，则几乎不可能选择适合所有人的排序模式，但我不会太担心这一点现在）。

Web 服务器也相对简单，只要您对 Apache 配置（或您使用的任何服务器软件）感到满意。您需要确保所有输出到浏览器的页面都使用 UTF-8 编码发送。

最后，您的 PHP 源代码...

首先，您应该确保在 UTF-8 模式下编辑实际的 PHP 代码文件。否则，如果您的代码中有任何扩展字符，您可能会遇到麻烦。

其次，请注意许多 PHP 的标准字符串处理函数“不支持多字节”。这意味着它们不能与扩展字符集一起正常工作。例如，`strlen()`将返回字符串在内存中占用的字节数。如果您的字符串包含占用超过一个字节的字符，这将是不正确的。幸运的是，PHP 还提供了一组多字节函数来解决这个问题。因此，例如，不要使用 ，而是`strlen()`使用`mb_strlen()`。PHP 手册提供了有关可用函数以及何时使用它们的更多详细信息。

此外，请确保您也使用正确的字符集处理任何传入的发布数据。

希望这会帮助你。这里的关键是确保您的系统在其所有层中使用一致的字符集。当系统中的一个层使用与其他层不同的字符集时，往往会出现看起来怪异的编码错误问题。确保它们都是相同的（最好是 UTF-8），并且你应该处理你的乱码问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:11:02.157

您应该使用特定的表格进行翻译，而不是列。在这种情况下，您可以为每个表指定字符集。

此时你有：

```
+---------+------------+------+
| 英语 | 法语 | 等|
| 男 | 阳刚 | ... |
+---------+------------+------+

```

你应该有：

```
性别_zh
+------------+-------------+
| id_gender | 价值 |
+------------+-------------+
| 1 | 男 |
| 2 | 女 |
+------------+-------------+

性别_es
+------------+-------------+
| id_gender | 价值 |
+------------+-------------+
| 1 | 兄弟 |
| 2 | 穆杰 |
+------------+-------------+

性别_fr
......

```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:22:36.067

最简单的方法是对整个网站使用 UTF-8。UTF-8 可以处理其他编码的所有已知字符。如果您使用的是 mysql，请务必在进行查询之前告诉连接对象使用 UTF-8。我写了一篇关于如何[在 PHP 和 MySQL 中使用 UTF-8](http://www.martinstoeckli.ch/php/php.html#utf8)的短文。

排序规则与字符集不同，它只定义了如何比较两个值（例如用于排序）。

# sql - 表中的重复数据

> ID：12601888
> 
> 赞同：0
> 
> 时间：2012-09-26T12:37:16.910
> 
> 标签：sql, insert

我阅读了一些已回答的问题，但它们对我没有帮助！这是我的桌子：

```
 CREATE TABLE [dbo].[t_status](
[student_id] [nvarchar](50) NOT NULL,
[les_id] [int] NOT NULL,
[year_id] [int] NOT NULL,
[status] [bit] NULL,
[Number_of_fail] [int] NULL, 
```

如果他们的 student_id 和 les_id 相等，我想防止重复数据。我该怎么做，我没有太多关于触发器的信息，但我试过这个不起作用！

```
 ALTER TRIGGER Trigger1
ON dbo.t_status
FOR INSERT
AS

declare @stu_id nvarchar(50)
declare @les_id int
Declare @Count int 

select @stu_id=student_id,@les_id = les_id From inserted

Select @Count=Count(student_id ) From t_status where les_id=@les_id and student_id=@stu_id
group by student_id

if @Count>1
delete From t_status where student_id =@stu_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:43:56.580

> 如果他们的 student_id 和 les_id 相等，我想防止重复数据。怎么办，

`UNIQUE KEY CONSTRAINT`与使用触发器相比，在这两列上执行此操作非常简单。

```
ALTER TABLE t_status
ADD CONSTRAINT T_Status_Unique_StudentId_LesId UNIQUE (student_id, les_id) 
```

触发器用于执行更复杂的完整性约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:42:45.800

制作复合/复合主键，有很多例子：

[http://sqlzoo.net/howto/source/z.dir/tip241027/i02create.xml](http://sqlzoo.net/howto/source/z.dir/tip241027/i02create.xml)

谷歌是你的朋友...

# javascript - 比较 JSON 和 BSON

> ID：12601890
> 
> 赞同：40
> 
> 时间：2012-09-26T12:37:23.293
> 
> 标签：javascript, .net, json, json.net, bson

我正在比较 JSON 和 BSON 来序列化对象。这些对象包含多个包含大量整数的数组。在我的测试中，我正在序列化的对象总共包含大约 12,000 个整数。我只对序列化结果的大小比较感兴趣。我使用 JSON.NET 作为进行序列化的库。我使用 JSON 是因为我也希望能够在 Javascript 中使用它。

JSON 字符串的大小约为 43kb，BSON 结果的大小为 161kb。所以差异因子约为 4。这不是我所期望的，因为我查看了 BSON，因为我认为 BSON 在存储数据方面更有效。

所以我的问题是为什么 BSON 效率不高，它可以变得更有效率吗？或者是否有另一种使用包含大量整数的数组序列化数据的方法，这可以在 Javascript 中轻松处理？

下面是测试 JSON/BSON 序列化的代码。

```
 // Read file which contain json string
        string _jsonString = ReadFile();
        object _object = Newtonsoft.Json.JsonConvert.DeserializeObject(_jsonString);
        FileStream _fs = File.OpenWrite("BsonFileName");
        using (Newtonsoft.Json.Bson.BsonWriter _bsonWriter = new BsonWriter(_fs) 
               { CloseOutput = false })
        {
            Newtonsoft.Json.JsonSerializer _jsonSerializer = new JsonSerializer();
            _jsonSerializer.Serialize(_bsonWriter, _object);
            _bsonWriter.Flush();
        } 
```

编辑：

这是生成的文件 [https://skydrive.live.com/redir?resid=9A6F31F60861DD2C!362&authkey=!AKU-ZZp8C_0gcR0](https://skydrive.live.com/redir?resid=9A6F31F60861DD2C!362&authkey=!AKU-ZZp8C_0gcR0)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-26T22:49:29.987

JSON 与 BSON 的效率取决于您存储的整数的大小。有一个有趣的地方，即 ASCII 占用的字节数比实际存储整数类型要少。64 位整数，即 BSON 文档的显示方式，占用 8 个字节。您的数字都小于 10,000，这意味着您可以将每个数字存储为 4 个字节的 ASCII 码（每个字符一个字节，直到 9999）。事实上，您的大部分数据看起来都小于 1000，这意味着它可以存储在 3 个或更少的字节中。当然，这种反序列化需要时间并且成本不高，但它节省了空间。此外，Javascript 使用 64 位值来表示所有数字，因此如果您在将每个整数转换为更合适的数据格式后将其写入 BSON，您的 BSON 文件可能会更大。

根据规范，BSON 包含许多 JSON 没有的元数据。此元数据主要是长度前缀，因此您可以跳过不感兴趣的数据。例如，获取以下数据：

```
["hello there, this is an necessarily long string.  It's especially long, but you don't care about it. You're just trying to get to the next element. But I keep going on and on.",
 "oh man. here's another string you still don't care about.  You really just want the third element in the array.  How long are the first two elements? JSON won't tell you",
 "data_you_care_about"] 
```

现在，如果您使用 JSON，则必须解析前两个字符串的全部内容以找出第三个字符串的位置。如果你使用 BSON，你会得到更像这样的标记（但实际上不是，因为我制作这个标记是为了举例）：

```
[175 "hello there, this is an necessarily long string.  It's especially long, but you don't care about it. You're just trying to get to the next element. But I keep going on and on.",
 169 "oh man. here's another string you still don't care about.  You really just want the third element in the array.  How long are the first two elements? JSON won't tell you",
 19 "data_you_care_about"] 
```

所以现在，您可以读取“175”，知道向前跳过 175 个字节，然后读取“169”，向前跳过 169 个字节，然后读取“19”并将接下来的 19 个字节复制到您的字符串中。这样，您甚至不必为分隔符解析字符串。

Using one versus the other is very dependent on what your needs are. If you're going to be storing enormous documents that you've got all the time in the world to parse, but your disk space is limited, use JSON because it's more compact and space efficient. If you're going to be storing documents, but reducing wait time (perhaps in a server context) is more important to you than saving some disk space, use BSON.

Another thing to consider in your choice is human readability. If you need to debug a crash report that contains BSON, you'll probably need a utility to decipher it. You probably don't just know BSON, but you can just read JSON.

[FAQ](http://bsonspec.org/#/faq)

# c# - 处理对象时是否需要删除事件？

> ID：12601892
> 
> 赞同：3
> 
> 时间：2012-09-26T12:37:31.963
> 
> 标签：c#, winforms

> **可能重复：**
> [删除处理对象时的处理程序](https://stackoverflow.com/questions/460525/remove-handlers-on-disposing-object)

我有一些代码可以动态添加`Controls`到/从`Form`. 控件存储在表单拥有的集合中。删除控件时，代码会按如下方式处理并处理它们

```
 if (node != null && !node.IsDisposed)
   {
      node.Resize -= docNode_Resize;
      node.DocumentRefreshRequested -= docNode_DocumentRefreshRequested;
      node.Dispose();
   } 
```

是否有必要删除事件部分？好像`Dispose()`就够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:40:52.837

它被问**了很多次**。

不，你不需要那个，除非：

*   事件带有静态订阅
*   海量事件和订阅（来自个人经验，退订在内存消耗方面的好处）

# java - 为服务器端设置 gcm

> ID：12601894
> 
> 赞同：1
> 
> 时间：2012-09-26T12:37:38.223
> 
> 标签：java, android, ant, google-cloud-messaging

我正在尝试设置 GCM 演示应用程序。[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

我被困在试图创建一个战争文件：在一个 shell 窗口中，转到 gcm-demo-server 目录。

通过运行 ant war 生成服务器的 WAR 文件：

我正在使用 MAC，我该如何创建这个 war 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:22:11.773

```
https://github.com/minthubk/GCM-Demo 
```

这是 gcm 演示的链接。您可以查看演示并查看步骤

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:41:32.247

您应该将`ant war`命令运行到`command prompt window`. （如果您没有 Apache Ant，您应该安装它）。检查我对类似问题的[回答。](https://stackoverflow.com/questions/11261000/how-to-setup-google-cloud-messaging-for-android/12375853#12375853)

# java - JDBC 连接失败 (java.lang.ClassNotFoundException)

> ID：12601895
> 
> 赞同：-2
> 
> 时间：2012-09-26T12:37:39.113
> 
> 标签：java, eclipse, sql-server-2008, jdbc

我刚刚从这里为 Sql Server (http://www.microsoft.com/en-us/download/details.aspx?id=11774) 安装了 JDBC 驱动程序，我测试了这个示例代码来测试连接：

[http://msdn.microsoft.com/en-us/library/aa342339.aspx](http://msdn.microsoft.com/en-us/library/aa342339.aspx)

我得到的错误似乎是一致的：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");

 java.lang.ClassNotFoundException:
 com.microsoft.sqlserver.jdbc.SQLServerDriver   
 at java.net.URLClassLoader$1.run(Unknown Source)
 at java.security.AccessController.doPrivileged(Native Method)  
 at java.lang.ClassLoader.loadClass(Unknown Source)     
 at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)  
 at java.lang.ClassLoader.loadClass(Unknown Source)     
 at java.lang.Class.forName0(Native Method) 
```

两个注意事项：

*   如果我删除 try-finally 代码，我会得到 NO 错误 ==>，这可能证明我创建为数据库登录信息的用户和密码没有任何问题。
*   我在我的数据库中创建了一个以联系人为列的 Person 表。

附带问题：

*   这到底是什么意思：localhost:1433
*   如何设置 Eclipse 以显示触发错误的行？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:49:35.577

> 这到底是什么意思：localhost:1433

localhost 是指您的机器。1433 是 SQL Server 公开 TCP/IP 接口以供外部客户端与之交互的默认端口号。

正如 guido 提到的，您应该将 sqljdbc.jar 添加到您的类路径中。如果您使用的是 eclipse，您可以通过右键单击项目 -> 构建路径 -> 添加外部存档 -> 从下载的目录中选择 sqljdbc.jar 来执行此操作。

您可能想在这里查看我对类似问题的回答之一：[错误：与主机的 TCP/IP 连接失败。java.net.ConnectException：连接被拒绝：连接](https://stackoverflow.com/questions/12496045/unable-to-connect-to-sqlexpress-using-jdbc-connection-refused-error/12496575#12496575)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:49:40.303

看起来 JDBC 驱动程序不在正在运行的应用程序的类路径中。也许仅使用 JDK 和 JRE 命令行工具（javac 和 java）尝试您的示例，而不是在 IDE 中进行。

不知道为什么如果删除 try/catch 不会收到错误消息。应该报告未捕获的异常。如果您从命令行而不是 Eclipse 运行程序，您将看到报告的未捕获异常。

localhost:1433 是 JDBC URL 的一部分。localhost 表示数据库与正在运行的应用程序位于同一台机器上。端口 1433 是默认的 SQL Server TCP 端口。

不确定 Eclipse 问题。我主要使用Netbeans。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:52:42.567

两个注意事项：错误说找不到驱动程序（jar），请参阅“guido”的评论

附带问题： localhost - 是本地计算机的网络名称，1433 - 是端口号 SQL 服务器等待连接 您的 catch 子句中有什么？`e.PrintStackTrace();`也应该显示行号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T12:52:45.500

主要问题：

您是否将 sqljdbc4.jar 文件添加到您的类路径中？如果没有，java 不知道在哪里可以找到这些类。

1.  附带问题： localhost 是指您的计算机，这意味着您尝试连接到安装在您运行程序的计算机上的 sql 服务器。

> 本地主机

由您的网络适配器解析为您自己的 ip。冒号 (:) 后面的数字是端口号。在计算机（或任何其他网络设备）上，可以有多个应用程序通过网络发送和接收数据。为此，应用程序在特定端口上侦听数据。SQL server 的标准端口是 1443

1.  附带问题：使用

    try{ 可以抛出异常的代码 }catch(HandledException e){ e.printStacktrace(); }

在控制台上打印有关异常的信息。

# .net - 找不到 VS 2010 express 的 windows 服务模板

> ID：12601899
> 
> 赞同：-1
> 
> 时间：2012-09-26T12:37:49.517
> 
> 标签：.net, vb.net, visual-studio-2010, visual-studio, windows-services

我刚刚安装了 Visual Basic 2010 Express，它工作正常，但我找不到`Windows Service Template`，我正在使用`.NET 4.0`我想我没有任何使用 Visual Studio 的经验
*注意*左侧的在线模板链接不显示任何有用的东西

**问题**我如何获取或安装`Windows Service`到 Visual Studio 2010 Express，

谢谢 ![在此处输入图像描述](../Images/cd879a1c6ec9d9c2f31cd0c3331d8d6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:09:28.863

Windows**服务**模板不适用于 Visual Studio 速成版

查看[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/ms236405%28v=VS.90%29.aspx)。它适用于 C#，但我认为它适用于 VB.NET

# php - mysql 如果列包含

> ID：12601900
> 
> 赞同：2
> 
> 时间：2012-09-26T12:38:00.767
> 
> 标签：php, mysql

我有一张这样的数据表（表 A）

```
id | key  | status
-----------------
1  | dg12 | done
2  | dg12 | 
```

像这样（表B）

```
id   | Name  | status
------------------
dg12 | Dummy | 
```

我想用这个条件更新表 B 的状态

如果第 1 行和第 2 行中的表 A 状态（我的意思是不包含“”值）已完成，则表 B 中的 dg12 状态已完成...

我怎样才能做到这一点？？使用php + mysql，任何人都可以帮忙吗？谢谢之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:44:49.123

```
Update tableA a,tableb b
SET b.status=CASE WHEN (select count(*) from tableB where id=a.key group by key,status) > 0 then 'Done' else b.status end
where a.key=b.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:48:02.350

```
UPDATE 
    tableB AS b
SET 
    b.status = 'done'
WHERE 
    (SELECT COUNT(*) FROM tableA AS a WHERE a.key = b.id) 
    = 
    (SELECT COUNT(*) FROM tableA AS a WHERE a.key = b.id AND a.status = 'done') 
```

**或者**

```
UPDATE 
    tableB AS b
SET 
    b.status = 'done'
WHERE 
    (SELECT COUNT(*) FROM tableA AS a WHERE a.key = b.id AND a.status != 'done') = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T12:59:45.963

它可以更短：

```
UPDATE tableB b
SET b.`status` = 'done'
WHERE 'done' = ALL(SELECT `status` FROM tableA a WHERE a.key = b.id) 
```

测试数据在这里：

```
drop table if exists tableA;
create table tableA(id int, `key` varchar(10), status varchar(10));
insert into tableA values (1, 'dg12', 'done'), (2,'dg12', '');
drop table if exists tableB;
create table tableB(id varchar(10), name varchar(10), status varchar(10));
insert into tableB values ('dg12','Dummy', ''); 
```

从上面执行的查询：

`0 rows affected`

```
update tableA set status='done' where id = 2; 
```

从上面执行的查询：

`1 row affected`

`ALL` [在此处](http://dev.mysql.com/doc/refman/5.1/en/all-subqueries.html)阅读有关子查询的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:48:37.867

```
SELECT
   TRUE
FROM
   tableA
WHERE
   key = ?
   AND status <> 'done'
LIMIT 1
...
// all tableA for key="dg12" are "done"
if (!$query->execute("dg12")->num_rows()) {
   UPDATE tableB SET status = "done" WHERE id = ?
   ...
   $query->execute("dg12");
} 
```

如果您不明白，请告诉我，因为这主要是伪 php。

这也没有考虑到 tableA 在该键上不包含*任何*行的可能性。不确定这是否会发生。

# php - 如何在php中的对象内部获取数组中的元素

> ID：12601903
> 
> 赞同：2
> 
> 时间：2012-09-26T12:38:03.387
> 
> 标签：php, rest

我如何从 RestRequest 对象获取 request_vars..我想要数组中的所有字段。下面是提到的代码

```
RestRequest Object
(
[request_vars:RestRequest:private] => Array
(
[{
"taskStmt":"demoo",
"description":"",
"projectId":"",
"assignedDate":"",
"endDate":"",
"TaskEffort":"",
"estimateTime":"",
"dependencies":_"",
"priority":"",
"timeTaken":"",
"workCompletion":"",
"status":"",
"user_id":"",
"mailsent":"",
"completiondate":""
}
] =>
)

[data:RestRequest:private] =>
[http_accept:RestRequest:private] => json
[method:RestRequest:private] => put
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:40:47.673

根据您的转储，**request_vars**是私有且非静态的属性。

所以你需要一个像这样的getter方法：

```
class RestRequest
{
    // ...

    public function getRequestVars()
    {
        return $this->request_vars;
    }
} 
```

这样你不能直接编辑/写入**request_vars**的值，但是你可以通过**getRequestVars()**公共方法读取它：

```
var_dump( $object->getRequestVars() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:45:11.967

### 更新：

您在评论中发布的示例在`getRequestVars()`class 上有一个方法`RestRequest`，应该返回这些值。

如果必须的话，你可以绕过像反射这样的可见性修饰符，但可能不是一个好`protected`主意：`private`

```
class Foo {
    public    $foo  = 1;
    protected $bar  = 2;
    private   $baz  = 3;
}

$foo = new Foo();

$reflect = new ReflectionClass($foo);
$props   = $reflect->getProperties();

foreach ($props as $prop) {
    $prop->setAccessible(true);
    print $prop->getName().' = '.$prop->getValue($foo)."\n";
} 
```

# google-app-engine - 如何全局设置 URL 获取超时？

> ID：12601905
> 
> 赞同：2
> 
> 时间：2012-09-26T12:38:05.087
> 
> 标签：google-app-engine, timeout, jax-rs, urlfetch

我正在开发一个在 App Engine 上运行的应用程序。我的一项任务调用了 Web 服务。为此，我使用 JAX-RS。但是，其中一个调用达到了应用引擎设置的超时时间（5 秒）。我想将此超时增加到 10 秒，但我无法修改它。实际上，JAX-RS 不允许捕获创建的 HttpConnection 对象。

我的问题是：是否可以全局配置 URL Fetching 的超时时间？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:44:01.633

不确定您使用哪个 JAX-RS 堆栈，但对于 Jersey，您可以这样做：

* * *

```
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig; 
```

* * *

```
ClientConfig cc = new DefaultClientConfig();
cc.getProperties().put(ClientConfig.PROPERTY_THREADPOOL_SIZE,10);
Client client = Client.create(cc);
client.setConnectTimeout(1000);
client.setReadTimeout(15000); 
```

* * *

需要注意的是，在 GAE 上创建 Jersey 客户端相对较慢，因此您可能希望将此客户端设置为实例中的静态变量。（它是一个线程安全的对象，所以没有问题）这仍然可以为您的实例的启动增加 2-5 秒。

# jquery - jQuery 不基于 ID 选择器抓取元素

> ID：12601906
> 
> 赞同：2
> 
> 时间：2012-09-26T12:38:05.977
> 
> 标签：jquery, html, html-table, jquery-selectors

我使用的是 jQuery 1.7.1，没有其他 JS 库/框架。我可以很好地选择大多数元素，除了一个给我带来麻烦的特定表格。这在 Firefox 和 Chrome 中都会发生。

这是描述这一切的图像：

![Chrome JavaScript 控制台](../Images/7c0778f1abaec7e61483a6db26e74429.png)

此图中的步骤，按顺序：

1.  我选择页面上的所有表格
2.  我选择了一张与我想要的不同的桌子
3.  我将该表设置为“显示：无”（只是为了说明 jQuery 不关心“显示：无”）
4.  我再次选择该表，现在它已被隐藏。一切皆好。
5.  然后我尝试选择我真正想要的表。我什么也得不到。
6.  我使用表的初始数组将我想要的表分配给一个变量。
7.  jQuery 很好地返回了该表，它现在位于变量“theTableIWant”中。
8.  表格的“id”与我在第 5 步中选择的“id”完全相同，但不起作用。

为什么 jQuery 不直接把桌子交给我？为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:44:06.533

它不起作用，因为它`#`是 jQuery 选择器中用于 ID 的特殊字符，因此您会收到此错误：`Syntax error, unrecognized expression: #office_set-###`

如果您真的必须`###`在 ID 中使用（由于马特发布的原因，我不推荐它），您可以像这样在选择中对其进行转义：

```
​$('#office_set-\\#\\#\\#') 
```

示例 - [http://jsfiddle.net/infernalbadger/fpcME/](http://jsfiddle.net/infernalbadger/fpcME/)

您必须双重转义，因为您实际上想将 传递`\`给 jQuery 选择器引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:42:35.417

“#”在 DOM id 中不是正式有效的： [http](http://www.w3.org/TR/REC-xml/#NT-Name) ://www.w3.org/TR/REC-xml/#NT-Name ，因此您不会得到一致的支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T12:47:57.717

你不应该使用这些元字符中的任何一个：`!"#$%&'()*+,./:;<=>?@[\]^{|}~`在你的 id、类标记名、属性和值中（还有反引号：`，但我不能把它放在代码块中 ^^）。

如果您必须使用这些字符，您可以在选择器中使用两个反斜杠对它们进行转义

```
$('#office_set-\\#\\#\\#') 
```

顺便说一句，当这些字符用作 javscript 代码（例如在 onclick 属性中）时，您的问题真的很重要。只有正确转义元字符（其中会有很多），才能找到包含特定代码的元素。

来源和更多信息：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T12:44:27.910

1) 确保第 5 步的表格选择器是正确的。也许有不止一个元素具有相同的 id。

2）当您将 JQuery 元素分配给变量时，您不能像那样调用原始 DOM 属性。尝试：

```
theTableIWant.attr('id'); 
```

或者：

```
var theTable = $(theTableIWant).get(0);
theTable.id; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T12:48:00.630

您需要在 ID 中引用 # 字符，因为该字符是 jQuery 的特殊字符。

```
$('#office_set-\\#\\#\\#'); 
```

它是双反斜杠，因此 JavaScript 将它们转换为 jQuery 然后看到的单反斜杠。

# javascript - 在匿名函数中加载谷歌地图

> ID：12601907
> 
> 赞同：5
> 
> 时间：2012-09-26T12:38:14.460
> 
> 标签：javascript, google-maps-api-3, anonymous-function

我正在尝试在匿名函数中加载谷歌地图，但每当我尝试使用其中一种 api 方法时都会收到 javascript 错误。例如：

代码

```
var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(-34.397, 150.644),
      mapTypeId: google.maps.MapTypeId.ROADMAP
}; 
```

错误

```
TypeError: google.maps.LatLng is not a constructor 
```

我创建了 2 个示例：

1）这通过页面正文中的脚本标签加载谷歌地图js。此方法确实有效，并且没有 js 错误。 [http://jsfiddle.net/malonso/hgPQk/1/](http://jsfiddle.net/malonso/hgPQk/1/)

2）这会在匿名函数中加载谷歌地图js。此方法不起作用，并且包含上面提到的 js 错误。[http://jsfiddle.net/malonso/fZqqW/2/](http://jsfiddle.net/malonso/fZqqW/2/)

我确信我遗漏了一些非常明显的东西，但我根本无法弄清楚是什么。提前致谢。

更新：我应该指出，谷歌地图需要从匿名函数中加载。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T12:51:58.283

你可以这样做。您可以在 url 中添加回调函数名称。加载 API 时将调用它。该回调函数必须在文档范围内可访问。

我前段时间通过使用 jQuery 在窗口上触发自定义事件来做到这一点：http: [//jsfiddle.net/fZqqW/5/](http://jsfiddle.net/fZqqW/5/)

使用“ [http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback](http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback) ”

```
window.gMapsCallback = function(){
    $(window).trigger('gMapsLoaded');
}

$(document).ready((function(){
    function initialize(){
        var mapOptions = {
            zoom: 8,
            center: new google.maps.LatLng(-34.397, 150.644),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);
    }
    function loadGoogleMaps(){
        var script_tag = document.createElement('script');
        script_tag.setAttribute("type","text/javascript");
        script_tag.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback");
        (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
    }
    $(window).bind('gMapsLoaded', initialize);
    loadGoogleMaps();
})());​ 
```

> 异步加载 API
> 
> 您可能希望在页面完成加载后或按需加载 Maps API JavaScript 代码。为此，您可以注入自己的代码以响应 window.onload 事件或函数调用，但您需要额外指示 Maps JavaScript API 引导程序延迟应用程序代码的执行，直到 Maps JavaScript API 代码完全加载. 您可以使用回调参数来执行此操作，该参数将在完成加载 API 时执行的函数作为参数。
> 
> 以下代码指示应用程序在页面完全加载后（使用 window.onload）加载 Maps API，并将 Maps JavaScript API 写入页面内的标记中。此外，我们通过将 callback=initialize 传递给 Maps 来指示 API 仅在 API 完全加载后执行 initialize() 函数

见这里：[https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:50:58.590

从返回的 JavaScript

> [http://maps.google.com/maps/api/js?sensor=false](http://maps.google.com/maps/api/js?sensor=false)

包括调用`document.write()`. 如果在加载 DOM 之后发生这种情况，事情将无法正常工作。我认为您不能期望以这种方式异步加载 Google 地图代码。

# jquery - jqgrid中的几个嵌套子网格

> ID：12601908
> 
> 赞同：0
> 
> 时间：2012-09-26T12:38:22.420
> 
> 标签：jquery, asp.net-mvc, model-view-controller, jqgrid, jqgrid-asp.net

当每一行都有子行时，我试图放置一个子网格。

这是我的看法：

![在此处输入图像描述](../Images/60a8d3c13bd645c0c57e83a47d23f3bb.png)

例如，如果我在 COMERCIOS 中按 +，则会打开一些网格并显示两个子行。

当该行有一个或多个孩子时，我想设置一个加号 + 。

我尝试使用 jqgrd Grid 作为子网格，但这不是我想要的。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:56:27.897

您应该使用 jqGrid 的 treegrid 功能。您可以在此处找到示例和更多信息：

*   [jqGrid 文档 - TreeGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atreegrid)
*   [jqGrid 和 ASP.NET MVC - TreeGrid](http://tpeczek.blogspot.com/2009/12/jqgrid-and-aspnet-mvc-treegrid.html)（有点旧但一般仍然有效）
*   [jqGrid Demos](http://www.trirand.com/blog/jqgrid/jqgrid.html) ('New in version 3.3'/'Tree Grid' and 'New in version 3.5'/'TreeGrid real world example'
*   [ASP.NET MVC 3 和 Razor 中的 jqGrid](http://tpeczek.codeplex.com/releases/view/61796)
*   [ASP.NET MVC 中的 jqGrid - 强类型助手](http://tpeczek.codeplex.com/releases/view/62741)

# wcf - 通过 WCF 实现 WS-Notification

> ID：12601911
> 
> 赞同：4
> 
> 时间：2012-09-26T12:38:32.967
> 
> 标签：wcf, ws-notification

我的任务是创建一个基于 WS-Notification（实际上是 WS-BaseNotification）协议的 WCF 服务，但我不知道如何实现它。如何为这些协议生成有效的 wsdl 以及如何格式化我的服务的肥皂信封。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:31:22.397

在 3.5 中没有实现 WS-Notification 标准（[来源](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/ab725cf6-19dd-4cf7-bc92-2bed111ea95c)），如果怀疑它是在 4.0 或 4.5 中实现的，那么您必须自己完成大部分实现。也许一个好的起点是[WS-Eventing-for-WCF](http://www.codeproject.com/Articles/14343/WS-Eventing-for-WCF-Indigo)。

# html - 如何通过 CSS 让背景图像/图像拉伸以填充容器？

> ID：12601913
> 
> 赞同：8
> 
> 时间：2012-09-26T12:38:35.710
> 
> 标签：html, css, svg, background-image

我有一个比例矢量图像，我希望它填充一个容器。SO上有几个这样的问题，尽管它们有点老了。例如[拉伸和缩放 CSS 背景](https://stackoverflow.com/questions/376253/stretch-and-scale-css-background)

但是，当我尝试实施此类解决方案时，结果令人失望。

例如：

```
 body  {

    margin: 0; 
    padding: 0;
    text-align: center; 
    color: #000;
    background-color: #000
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 100%;

}

...

.twoColLiqLtHdr #container {
    width: 80%;
    margin: 0 auto; 
    border: 2px solid #000000;
    text-align: left; 
    background-color: #003;
    background-image: url('background_image.svg'); 
    /*background-position: 80% 80%; */

  background-repeat: no-repeat; 
    color: #000;
    font-family: "Times", cursive;

    background-attachment:fixed;
    min-height:100%;
    /*top: 0;
    left: 0; */

} 
```

我尝试了各种安排，但如果不留下空白区域，我就无法让它伸展（重复是一种成功，但看起来很糟糕）。

但是，由于我正在使用 svg，我是否以错误的方式处理这个问题，我应该在 html 中使用 svg xmlns 标记吗？（PS 我知道 IE8 绝对无法处理 svgs）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T12:41:33.537

你有没有尝试过

```
background-size:cover; 
```

检查一些[例子](http://www.css3.info/preview/background-size/)。

我遇到了 webkit`background-size:cover`和 SVG 背景图像的问题。我解决了它添加

```
-webkit-background-origin:border; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T12:57:07.810

您可能需要添加 preserveAspectRatio="none" 作为`<svg>`SVG 图像本身的外部元素的属性。

如果您不想修改图像文件，那么您可以尝试

背景图像： url('background_image.svg#svgView(preserveAspectRatio(none))');

Firefox 15 将支持这一点，可能还会支持其他 UA。

# php - 我如何将我的应用上传到谷歌应用引擎的后端

> ID：12601919
> 
> 赞同：0
> 
> 时间：2012-09-26T12:39:05.680
> 
> 标签：php, google-app-engine

现在我在谷歌应用引擎上使用 php，按照本教程[http://www.webdigi.co.uk/blog/2009/run-php-on-the-google-app-engine/](http://www.webdigi.co.uk/blog/2009/run-php-on-the-google-app-engine/)，

但是前面的执行时间限制是 60 秒，所以我知道我需要在后端上传我的应用程序才能无限执行时间。我怎样才能在后端上传它，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:46:05.803

看起来您只能将 Python 或 Java 与 AppEngine 后端一起使用。

在此处查看文档： [https ://developers.google.com/appengine/docs/python/backends/overview](https://developers.google.com/appengine/docs/python/backends/overview)

# javascript - 人类可读时间 javascript/jquery

> ID：12601921
> 
> 赞同：1
> 
> 时间：2012-09-26T12:39:26.490
> 
> 标签：javascript, jquery, jquery-plugins

我在 John Resig 的博客上找到了这个片段：

```
function prettyDate(time){
    var date = new Date((time || "").replace(/-/g,"/").replace(/[TZ]/g," ")),
        diff = (((new Date()).getTime() - date.getTime()) / 1000),
        day_diff = Math.floor(diff / 86400);

    if ( isNaN(day_diff) || day_diff < 0 || day_diff >= 31 )
        return;

    return day_diff == 0 && (
            diff < 60 && "just now" ||
            diff < 120 && "1 min" ||
            diff < 3600 && Math.floor( diff / 60 ) + " mins" ||
            diff < 7200 && "1 hour" ||
            diff < 86400 && Math.floor( diff / 3600 ) + " hours") ||
        day_diff == 1 && "Yesterday" ||
        day_diff < 7 && day_diff + " d" ||
        day_diff < 31 && Math.ceil( day_diff / 7 ) + " w";
}

// If jQuery is included in the page, adds a jQuery plugin to handle it as well
if ( typeof jQuery != "undefined" )
    jQuery.fn.prettyDate = function(){
        return this.each(function(){
            var date = prettyDate(this.title);
            if ( date )
                jQuery(this).text( date );
        });
    }; 
```

我在服务器上的时区是**UTC**，我不确定这段代码将在哪个时区工作？

在我的 html 中，我将时间渲染如下：

```
<span id="p-date">2012-09-26T00:12:15</span> 
```

会做

```
 $(function() {
  $("#p-date").prettyDate();
  setInterval(function(){ $("#p-date").prettyDate(); }, 5000);
  }); 
```

时间人性化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:46:59.883

上面的代码片段不考虑时区。如果服务器有 UTC 时区，您需要做一个额外`(d.getTimezoneOffset()*60000)`的转换来转换为本地时间。

整个函数如下：

```
function prettyDate(time){
    d = new Date();
    var date = new Date((time || "").replace(/-/g,"/").replace(/[TZ]/g," ")),
        diff = ((d.getTime() + (d.getTimezoneOffset()*60000) - date.getTime()) / 1000),
        day_diff = Math.floor(diff / 86400);
     if ( isNaN(day_diff) || day_diff < 0 || day_diff >= 31 )
        return;

    return day_diff == 0 && (
            diff < 60 && "just now" ||
            diff < 120 && "1 min ago" ||
            diff < 3600 && Math.floor( diff / 60 ) + " mins ago" ||
            diff < 7200 && "1 hour ago" ||
            diff < 86400 && Math.floor( diff / 3600 ) + " hours ago") ||
        day_diff == 1 && "Yesterday" ||
        day_diff < 7 && day_diff + " days ago" ||
        day_diff < 31 && Math.ceil( day_diff / 7 ) + " week ago";
}

// If jQuery is included in the page, adds a jQuery plugin to handle it as well
if ( typeof jQuery != "undefined" )
    jQuery.fn.prettyDate = function(){
        return this.each(function(){
            var $this = jQuery(this),  
                date = prettyDate($this.text());
            if ( date )
                $this.text( date );
        });
    };

$(function() {
    $(".p-date").prettyDate();
    setInterval(function(){ $(".p-date").prettyDate(); }, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:59:20.410

稍作修改，它应该可以工作：http: [//jsfiddle.net/gfPwa/](http://jsfiddle.net/gfPwa/)

在当前插件中，日期字符串正在被提取，`this.title`它不会为您的`<span>`. 在您的情况下，我们可以改为使用`$this.text()`.

```
if ( typeof jQuery != "undefined" )
    jQuery.fn.prettyDate = function(){
        return this.each(function(){
            var $this = jQuery(this),   // cache jQuery(this)
                date = prettyDate($this.text());  // get date string from .text()
            if ( date )
                $this.text( date );
        });
    }; 
```

# php - php memcache 密钥管理

> ID：12601928
> 
> 赞同：1
> 
> 时间：2012-09-26T12:39:57.193
> 
> 标签：php, codeigniter, memcached

嗨，我正在我的 codeigniter 应用程序中集成 memcache，我的查询更改了用户选择的值。像这样的东西

```
$sql='select * from user where user_name="'.$name.'" and location='".$location."'";
$result = $this->memcached_library->get(md5($sql));
if(!$result ){
       /*  execute query and get $result    */
       $this->memcached_library->add(md5($sql), $result );
}else{
       return $result;
} 
```

这是我处理每个不同查询的键的方法。但是我听说过一些 md5() 并不总是唯一的。

1> **md5()**总是唯一的吗？

2> 如果 md5() 不是唯一的，那么应该是另一个选项....

3> 那么**crc32()**是独一无二的吗？

谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:44:52.410

A. 你的 SQL 错了，应该是

```
 $sql = "select * from user where user_name = '{$name}' and location = '{$location}'"; 
```

B. 您的代码可能有错误，因为 MD5 区分大小写

看

```
var_dump(md5("A"),md5("a")); 
```

输出

```
string '7fc56270e7a70fa81a5935b72eacbe29' (length=32)
string '0cc175b9c0f1b6a831c399e269772661' (length=32) 
```

更好地接近我们使用`strtolower`

```
 $result = $this->memcached_library->get(md5(strtolower($sql))); 
```

C、MD5是否唯一

> MD5 不能保证完全的唯一性，但是在 32 位十六进制值 (16^32) 中大约有 3.402823669209387e+38 个不同的值。这意味着，假设算法背后的数学给出了良好的分布，那么出现重复的几率非常小。

D. 更好的选择是使用`sha1`

```
$betterKey = "user" .  sha1(strtolower($sql));
               ^- identify request for each table 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:47:26.637

MD5 在您的情况下足够独特。

**但：**

在放弃它之前，我使用了这个技术一段时间。**为什么？**

1.  md5 被认为对于密码散列来说太快了。但它仍然是一个散列函数，每次你必须进行数据库查询时调用它，它可能会减慢你的代码。我过去曾看到，散列 SQL 查询以生成密钥占 PHP 执行时间的 20%，这是巨大的。

2.  如果您需要删除或更新特定键，例如在您的情况下，如果用户想要更改他的位置并且您希望尽快反映此更改，则必须重建相同的数据库查询，对其进行哈希处理, 检索您的密钥。

**我更喜欢的解决方案：**

改为创建简单、简短、有用的键。通常，使用模型中的方法名称。如果您的示例中的方法是`User::getUser($name, $location)`，请制作您的密钥：

```
$key = "User::getUser($name, $location)" 
```

您根本不需要散列，它会更清晰，更容易管理密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:49:37.507

您指的是 MD5 的[碰撞漏洞](http://en.wikipedia.org/wiki/MD5)。对于实用、简单的使用，您可以忘记这些。所以 MD5( uniqid() ) 是唯一的。见[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

对于生成像 SessionID 这样的使用中的哈希，MD5() 很好。

# c# - div onload函数和嵌入服务器代码c#

> ID：12601930
> 
> 赞同：1
> 
> 时间：2012-09-26T12:40:24.273
> 
> 标签：c#, javascript, asp.net

我试图在 .aspx 页面中调用 c# 属性，其中 myfunc 是 jquery 函数。这个函数接受我通过 c# 公共属性传递的参数。我想在 div 渲染后立即调用此函数。以前我在 ascx 控件中的 prerender 事件上完成了此操作。以下代码的确切语法是什么，从这里调用 jquery 函数是否有效？

```
 <div  class ="v" onload ="Javascript:myfunc('<%= this.articleID  %> '      
     ,'" +<%=this.UserID %>+"','" +<%=this.EncryptedUserID %>" +','" +<%# 
     this.ItemIndex  %>)"> 
```

谢谢

已编辑

好的，如果我喜欢这种方式

```
 <div  class ="v"  >
                         <script language ="javascript" >

                          JGetTotalVotes(<%= this.articleid  %>  ,<% 
              this.ThisEncryptedUserID %>,<% this.ItemIndex  %>,'aaa');
                          </script> 
```

我不想要服务器端隐藏字段解决方案，如果我使用隐藏字段（非服务器 html 标记），那么我仍然需要调用 <%%> 从服务器端获取值到隐藏字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:55:09.583

如果这不是问题，我看到您在最后一个参数之后缺少单引号。您可以使用隐藏字段并在 javascript 中调用该函数

将此添加到您的页面

```
<asp:HiddenField runat="server" ID="hdnArticleId" ClientIDMode="Static" />
<asp:HiddenField runat="server" ID="hdnUserId" ClientIDMode="Static"/>
<asp:HiddenField runat="server" ID="hdnEncryptedUserID" ClientIDMode="Static"/>
<asp:HiddenField runat="server" ID="hdnItemIndex" ClientIDMode="Static"/> 
```

在 Page_Load 事件中绑定那些隐藏字段记得添加 ClientIDMode="Static" 以设置 id，因为您设置不是由 asp.net 生成的，以便能够在 javascript 中使用它们

添加到您的 javascritp

```
function YourFunction(){
     var ArticleId = document.getElementById("hdnArticleId").value;
     var UserId= document.getElementById("hdnUserId").value;
     var EncryptedUserID= document.getElementById("hdnEncryptedUserID").value;
     var ItemIndex= document.getElementById("hdnItemIndex").value;
     // your code goes here
} 
```

并且不要忘记在页面 onload 中调用您的 javascript 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:46:51.990

Div 元素不引入外部内容，因此它们没有加载事件。

如果你想在一个 div 元素被解析后运行一些 JS：

```
<div></div>
<script> foo(); </script> 
```

# ios - 更改应用程序的名称

> ID：12601932
> 
> 赞同：3
> 
> 时间：2012-09-26T12:40:32.873
> 
> 标签：ios, xcode

如何在不更改捆绑标识符的情况下更改应用程序的名称？我尝试更改 .plist 文件中的捆绑标识符，使其保持不变，但是在尝试运行应用程序时，我在 xcode 中收到错误说明：

```
No such file or directory (/Users/myUserName/Library/Developer/Xcode/DerivedData/OLD_APPLICATION_NAME-hhknzcpmarwfwldirezkiexvenqp/Build/Products/Debug-iphoneos/NEW_APPLICATION_NAME.app/NEW_APPLICATION_NAME) 
```

这仅在设备上运行时发生。在模拟器上它工作正常。

找到了我自己的问题的答案。请参阅下面的答案，因为我不能再接受几天。

因此，在将配置文件更改为与我的应用程序名称不匹配的配置文件后，我不得不更改应用程序的名称。所以我只需要更改设备主屏幕上显示的应用程序的名称。这可以通过仅更改 .plist 文件中的捆绑显示名称来完成。无论如何，感谢您的快速回复。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T12:47:16.303

您应该更改`CFBundleDisplayName`应用程序信息 plist 文件中的 。这个值是 iOS 弹簧板在每个应用程序下使用的值。这也可以本地化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T12:46:18.043

更改用于**配置文件**`.bundle`的捆绑名称标识符。

# html - 如何使用图像精灵悬停跨度元素

> ID：12601933
> 
> 赞同：0
> 
> 时间：2012-09-26T12:40:35.587
> 
> 标签：html, css, hover, css-sprites

我想将图像精灵用于悬停动作，但我已经研究了一个小时并且无法正确处理。span 元素`video-play-q-right`将精灵作为其背景。

这是我的精灵：

![在此处输入图像描述](../Images/918aa08d029a4365af5e98426fffcae6.png)

这是div的屏幕截图：

![在此处输入图像描述](../Images/9f76440a4e43b321ab1d3309968f2cd2.png)

这是html：

```
 <div class="video-box">
         <div class="video-img">
             <a href="#" onclick="window.open('http://url.html','photoessay','scrollbars=no,resizable=yes,width=800,height=600')">
             <img src="resources-na/images/video.jpg" width="200" height="155" border="1">
             <span class="video-play-q-right">play</span></a>
        </div>
        <div class="video-text">
            <p><strong> of Water</strong>.<br /> water's properties. (05:43 min)
            <a href="#" onclick="window.open('http://url.html','photoessay','scrollbars=no,resizable=yes,width=850,height=722')">... View</a></p>
        </div>
    </div> 
```

这是CSS：

```
.video-box{
    padding-right: 20px;
    float: left;
    width: 200px;
}
.video-img {
    background-color: #EEEEEE;
    border: 1px solid #DDDDDD;
    margin-bottom: 0 !important;
    padding: 4px;
    width: 200px;
    height: 155px;
}

.video-play-q-right {
    background: url("../images/video-play-q-big.png") no-repeat scroll 0 0 transparent;
    background-position: center top;
    height: 50px;
    position: absolute;
    text-indent: -9999em;
    width: 50px;
    left: 321px;
    top: 127px;
}

a.video-play-q-right:hover span{
    background-position: center bottom;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:51:45.990

为什么`a.video-play-q-right:hover span`？

与 video-play-q-right 类没有链接。尝试将其替换为`a:hover .video-play-q-right`

* * *

`a.my-class:hover span`意思是“一个链接（`a`元素）与类 my-class 包含一个`span`”。

所以它会针对这个：

```
<a href="..." class="my-class"><span>Some text</span></a> 
```

但不是这个：

```
<a href="..."><span class="my-class">Some text</span></a> 
```

# iphone - 表视图数据将随机值传递给 xcode/iphone 中的详细视图控制器

> ID：12601944
> 
> 赞同：0
> 
> 时间：2012-09-26T12:40:52.700
> 
> 标签：iphone, objective-c, xcode

面对这样的问题，当我单击表格视图单元格上的项目以将项目数据传递到详细视图控制器页面时，它会显示另一个索引项目详细信息。无法传递准确的数据。:( 有没有人可以帮助我。

这是我在 didselectrowAtIndexpath 方法中所做的示例代码

```
NSString *name = featured.name;
    DetailViewController *detail = [[DetailViewController alloc]initWithNibName:@"DetailViewController" 
    bundle:[NSBundle mainBundle]];
    detail.dname = name;
    [self.navigationController pushViewController:detail animated:YES];
    [detail release];
    detail = nil; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:02:45.020

您必须在 didselectrowAtIndexpath 中编写此代码，例如

```
 NSString *name = [Myarray objectAtIndex:indexPath.row];
detail.dname = name;
DetailViewController *detail = [[DetailViewController alloc]initWithNibName:@"DetailViewController" 
bundle:[NSBundle mainBundle]];

[self.navigationController pushViewController:detail animated:YES];
[detail release];
detail = nil; 
```

**编辑**

```
 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
 {
  if([elementName isEqualToString:@"Record"]){
        //
        [passDics setObject:[forgot_pass stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] forKey:@"Forgot_Message"];

        [myarray addObject:passDics
 }
 } 
```

# solr - 有什么方法可以获取 Solr4.0 中索引更新所花费的时间吗？任何插件什么的

> ID：12601947
> 
> 赞同：1
> 
> 时间：2012-09-26T12:41:07.000
> 
> 标签：solr, lucene

我是新手`Solr`。我创建了一个集合并将数据发布到其中。现在我正在获取索引大小和查询处理时间。但是还有其他方法可以知道索引更新持续时间吗？

# sql-server-2008-r2 - SQL Server 2008 R2 远程远程集群

> ID：12601948
> 
> 赞同：1
> 
> 时间：2012-09-26T12:41:15.150
> 
> 标签：sql-server-2008-r2, windows-clustering

我有一个客户端询问是否可以使用地理上分开的 2 个或更多 SQL Server 2008 R2 创建一个 Active/Active 集群。例如，一台服务器位于华盛顿特区，另一台位于洛杉矶地区。

基本需求是提高对基于 ASPX 的网络服务器的访问和内容操作速度，同时保持数据同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:02:59.787

有可能的：

检查以下两个链接以获取更多信息：

[http://msdn.microsoft.com/en-us/library/ms189910.aspx](http://msdn.microsoft.com/en-us/library/ms189910.aspx)

[http://social.msdn.microsoft.com/Forums/eu/sqldisasterrecovery/thread/5f3e2199-4678-46aa-a34a-0439b79c96f5](http://social.msdn.microsoft.com/Forums/eu/sqldisasterrecovery/thread/5f3e2199-4678-46aa-a34a-0439b79c96f5)

# jsp - 为 .jsp 而不是 .xhtml 页面呈现 JSF 标记

> ID：12601950
> 
> 赞同：0
> 
> 时间：2012-09-26T12:41:17.083
> 
> 标签：jsp, jsf, facelets

我正在尝试将项目从 .jsp 逐步转移到 Facelets，但至少可以说遇到了很多麻烦。

当前的 jsf 标记在 .jsp 页面上呈现得很好。

带有简单的 .xhtml 页面

```
<!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:rich="http://richfaces.org/rich"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:p="http://primefaces.org/ui"> 

           <h:head>
                <title>This is a Test</title>    
             </h:head> 

           <h:body>
           <div>
                <H2>
                    <h:outputText value="test"/>
                </H2>
                </div>
        </h:body>
</html> 
```

尝试直接访问页面（somePage.xhtml）时会呈现标题，但**从未解析 JSF 标记**（检查页面显示 JSF 组件而不是 html）。

尝试使用虚拟 URL (somePage.cps) 时，不会呈现标题和 JSF 标记。（页面检查不显示任何内容）

我一直在阅读的是这是因为 JSF 标记没有被传递`FacesServlet`。

在我的 web.xml 我有

```
 <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.cps</url-pattern>
    </servlet-mapping> 
```

让我说我是 JSF 的新手，这个项目是传给我的，它使用 .cps 的虚拟 url 模式。

我已经尝试过这里提到的修复

[从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0)

和这里

[在 JSF2 项目中混合 JSP 和 XHTML (Facelets) - 可能吗？](https://stackoverflow.com/questions/3936110/mixing-jsp-and-xhtml-facelets-in-jsf2-project-possible)

** *******完整的WEB.XML********** **

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>Copyright 2012 University of Kentucky</display-name>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>/WEB-INF/config/jsf/faces-config.xml</param-value>
    </context-param>
    <context-param>
        <param-name>org.ajax4jsf.DEFAULT</param-name>
        <param-value>classic</param-value>
    </context-param>
    <!-- Define the basename for a resource bundle for I18N -->
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>messages</param-value>
    </context-param>
    <!-- Plugging the "Blue Sky" skin into the project -->

    <context-param>
        <param-name>org.richfaces.SKIN</param-name>
        <param-value>glassX</param-value>
    </context-param>

    <context-param>
        <param-name>org.apache.myfaces.ERROR_HANDLER</param-name>
        <param-value>edu.uky.cepis.util.global.error.JSFCustomErrorHandler</param-value>
    </context-param>

    <!-- Making the RichFaces skin spread to standard HTML controls -->
    <context-param>
        <param-name>org.richfaces.CONTROL_SKINNING</param-name>
        <param-value>enable</param-value>
    </context-param>

    <!-- 1\. Setup two parameters: -->
    <!-- b) Logging configuration file -->
    <!-- b) Spring configuration file -->
    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/classes/log4j.properties</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/config/spring/cepis-*</param-value>
    </context-param>

    <context-param>
        <param-name>contextFactory</param-name>
        <param-value>
            com.tonbeller.wcf.controller.RequestContextFactoryImpl
        </param-value>
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.cps</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <!-- Defining and mapping the RichFaces filter -->
    <filter>
        <display-name>RichFaces Filter</display-name>
        <filter-name>richfaces</filter-name>
        <filter-class>org.ajax4jsf.Filter</filter-class>
        <init-param>
            <param-name>createTempFiles</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>maxRequestSize</param-name>
            <param-value>100000000</param-value>
        </init-param>
    </filter>
    <!-- Filter for AJAX4JSF <filter> <filter-name>ajax4jsf</filter-name> <filter-class>org.ajax4jsf.Filter</filter-class> 
        </filter> -->
    <filter>
        <filter-name>hibernateViewFilter</filter-name>
        <filter-class>
            org.springframework.orm.hibernate4.support.OpenSessionInViewFilter
        </filter-class>
    </filter>

    <filter>
        <filter-name>struts</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>

    <filter>
        <filter-name>ResponseOverrideFilter</filter-name>
        <filter-class>org.displaytag.filter.ResponseOverrideFilter</filter-class>
    </filter>

    <filter>
        <filter-name>JPivotController</filter-name>
        <filter-class>com.tonbeller.wcf.controller.RequestFilter</filter-class>
        <!-- <init-param> <param-name>indexJSP</param-name> <param-value>/index.html</param-value> 
            <description> forward to this page if session is new </description> </init-param> 
            <init-param> <param-name>errorJSP</param-name> <param-value>/error.jsp</param-value> 
            <description>URI of error page</description> </init-param> <init-param> <param-name>busyJSP</param-name> 
            <param-value>/busy.jsp</param-value> <description> This page is displayed 
            if a the user clicks on a query before the previous query has finished </description> 
            </init-param> <init-param> <param-name>forceExtension</param-name> <param-value>.faces</param-value> 
            <description>replace .jsp with .faces</description> </init-param> -->
    </filter>
    <filter>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
        <init-param>
            <param-name>uploadMaxFileSize</param-name>
            <param-value>100m</param-value>
            <!-- <description>Set the size limit for uploaded files.Format: 10 - 10 
                bytes 10k - 10 KB 10m - 10 MB 1g - 1 GB</description> -->
        </init-param>
        <init-param>
            <param-name>uploadThresholdSize</param-name>
            <param-value>100k</param-value>
        </init-param>
    </filter>

    <filter>
        <filter-name>Spring character encoding filter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <!-- Richfaces 3.3.3 Firefox 11 Patch -->
    <filter>
        <filter-name>RichFacesFirefox11Filter</filter-name>
        <filter-class>edu.uky.cepis.filter.patch.RichFacesFirefox11Filter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>hibernateViewFilter</filter-name>
        <url-pattern>*.cps</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>richfaces</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
    </filter-mapping>
    <!-- <filter-mapping> <filter-name>ajax4jsf</filter-name> <servlet-name>Faces 
        Servlet</servlet-name> </filter-mapping> -->
    <filter-mapping>
        <filter-name>JPivotController</filter-name>
        <url-pattern>/jpivot.action</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>JPivotController</filter-name>
        <url-pattern>/JPivot.jsp</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>ResponseOverrideFilter</filter-name>
        <url-pattern>*.action</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>struts</filter-name>
        <url-pattern>/pages/report/*</url-pattern>
    </filter-mapping>

    <!-- Do not remove this. Needed for proper functioning of struts -->
    <filter-mapping>
        <filter-name>struts</filter-name>
        <url-pattern>/struts/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>Spring character encoding filter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- extension mapping for adding <script/>, <link/>, and other resource 
        tags to JSF-pages -->
    <filter-mapping>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
    <filter-mapping>
        <filter-name>MyFacesExtensionsFilter</filter-name>
        <url-pattern>/faces/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RichFacesFirefox11Filter</filter-name>
        <url-pattern>*.cps</url-pattern>
    </filter-mapping>

    <!-- resources initializer -->
    <listener>
        <listener-class>
            com.tonbeller.tbutils.res.ResourcesFactoryContextListener
        </listener-class>
    </listener>

    <!-- 3\. Setup three listeners -->
    <!-- a) Setup a listener to connect spring with the web context -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener> 
        <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class> 
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
    <!-- b) Setup a listener to connect spring with log4J -->
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
    <!-- c) Setup ACEGI to subscribe to http session events in the web context 
        <listener> <listener-class>org.acegisecurity.ui.session.HttpSessionEventPublisher</listener-class> 
        </listener> -->
    <listener>
        <listener-class>org.springframework.web.util.WebAppRootListener</listener-class>
    </listener>
    <!-- Spring Security Concurrent Session Listener -->
    <listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>

    <!-- CAS Authentication -->
    <!-- <servlet> <servlet-name>casproxy</servlet-name> <servlet-class>edu.yale.its.tp.cas.proxy.ProxyTicketReceptor</servlet-class> 
        </servlet> -->
    <!-- Faces Servlet -->

    <!-- Servlet for Report Module -->
    <servlet>
        <servlet-name>JspSupportServlet</servlet-name>
        <servlet-class>org.apache.struts2.views.JspSupportServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>fileServlet</servlet-name>
        <servlet-class>org.efs.openreports.dispatcher.FileDispatcher</servlet-class>
        <load-on-startup>99</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>MondrianXmlaServlet</servlet-name>
        <servlet-class>org.efs.openreports.dispatcher.XMLADispatcher</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>XFireServlet</servlet-name>
        <servlet-class>org.codehaus.xfire.spring.XFireSpringServlet</servlet-class>
    </servlet>

    <!-- jfreechart provided servlet -->
    <servlet>
        <servlet-name>DisplayChart</servlet-name>
        <servlet-class>org.jfree.chart.servlet.DisplayChart</servlet-class>
    </servlet>

    <!-- jfreechart provided servlet -->
    <servlet>
        <servlet-name>GetChart</servlet-name>
        <servlet-class>com.tonbeller.jpivot.chart.GetChart</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Print</servlet-name>
        <servlet-class>com.tonbeller.jpivot.print.PrintServlet</servlet-class>
    </servlet>

    <!-- EPSB Coldfusion access using Railo -->
    <servlet>
        <servlet-name>CFMLServlet</servlet-name>
        <servlet-class>railo.loader.servlet.CFMLServlet</servlet-class>
        <init-param>
            <param-name>configuration</param-name>
            <param-value>{web-root-directory}/WEB-INF/railo/</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>SpringServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath*:/org/springframework/batch/admin/web/resources/servlet-config.xml,classpath*:/org/springframework/batch/admin/web/resources/webapp-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- CAS Servlet Mapping -->
    <!-- <servlet-mapping> <servlet-name>casproxy</servlet-name> <url-pattern>/casProxy/*</url-pattern> 
        </servlet-mapping> -->
    <!-- Faces Servlet Mapping -->

    <servlet-mapping>
        <servlet-name>DisplayChart</servlet-name>
        <url-pattern>/DisplayChart</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Print</servlet-name>
        <url-pattern>/Print</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>GetChart</servlet-name>
        <url-pattern>/GetChart</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>fileServlet</servlet-name>
        <url-pattern>/report-images/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>fileServlet</servlet-name>
        <url-pattern>/report-files/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>XFireServlet</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MondrianXmlaServlet</servlet-name>
        <url-pattern>/xmla</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>CFMLServlet</servlet-name>
        <url-pattern>*.cfm</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>CFMLServlet</servlet-name>
        <url-pattern>*.cfml</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>CFMLServlet</servlet-name>
        <url-pattern>*.cfc</url-pattern>
    </servlet-mapping>
    <!-- Spring Batch Admin -->
    <servlet-mapping>
        <servlet-name>SpringServlet</servlet-name>
        <url-pattern>/batch/*</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>15</session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.cps</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:18:35.270

**删除**以下上下文参数（不要忘记先撤消 Stephan 提出的错误更改）。

```
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.jsp</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.FACELETS_VIEW_MAPPINGS</param-name>
    <param-value>*.xhtml</param-value>
</context-param> 
```

第一个基本上是告诉 JSF 应该使用 JSP 作为默认视图技术，因此永远不会识别/使用 Facelets。你当然不想拥有那个。第二个已经是默认值，但如果第一个设置为这种方式则无效。只需将它们都删除。JSF 2.0 已经默认使用 Facelets (XHTML)。此外，当 Facelets 用作默认视图技术时，JSP 会自动用作“后备”。另请参阅[从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)。不要只看步骤或代码示例，还要仔细阅读文字。

# c# - C# Treeview 错误尝试读取或写入受保护的内存

> ID：12601951
> 
> 赞同：2
> 
> 时间：2012-09-26T12:41:21.200
> 
> 标签：c#, treeview, runtime-error

我有一个树视图，当我按下应该向上移动节点的向上箭头时，我随机收到错误尝试读取或写入受保护的内存。Theo 以下代码是我的向上按钮单击事件

```
void pbUp_Click(object sender, PActionEventArgs e)
{
    int nIndex = 0;
    int nPrevIndex = 0;
    //Setting the node to the node being moved up.
    FavoriteTreeNode node = tvFavorites.SelectedNode as FavoriteTreeNode;
    nIndex = node.Index;
    FavoriteTreeNode prevNode = null;
    FavoriteTreeNode parentNode = null;
    try
    {
        if (node.Level > 0 && node.Index > 0 )
        {
            //Retrieving the parent node of the favorite if there is on.
            parentNode = node.Parent as FavoriteTreeNode;
            nPrevIndex = nIndex - 1;
            prevNode = parentNode.Nodes[nPrevIndex] as FavoriteTreeNode;
        }
        // the node is the first child of the parent we need to get the parents previous node to insert.
        else if (node.Level > 0 && node.Index == 0)
        {
            parentNode = node.Parent as FavoriteTreeNode;
            //Retrieving the previous node to the selected node being moved.
            nPrevIndex = parentNode.Index - 1;
            prevNode = tvFavorites.Nodes[nPrevIndex] as FavoriteTreeNode;
        }
        else
        {
            nPrevIndex = nIndex - 1;
            prevNode = tvFavorites.Nodes[nPrevIndex] as FavoriteTreeNode;
        }
        //Setting what type of node we are dealing with a folder or favorite.
        if (node.FavoriteType == FavoriteType.Folder.ToString())
        {
                //If the node index is greater than 0 then we know there are nodes above the 
            //currently selected node.
            if (nIndex > 0)
            {
                //Retrieving the previous node to the selected node being moved.
                nPrevIndex = nIndex - 1;
                prevNode = tvFavorites.Nodes[nPrevIndex] as FavoriteTreeNode;
                //Removing the current selected node
                tvFavorites.Nodes.RemoveAt(nIndex);
                //Inserting folder into the previous nodes index. The treeview automatically re-indexes the values.
                tvFavorites.Nodes.Insert(nPrevIndex, node);
            }
        }
        // We are dealing with a favorite.
        else if (node.FavoriteType == FavoriteType.Favorite.ToString())
        {
            //If the previous node is a favorite then we can just move the node up.
            if (prevNode.FavoriteType == FavoriteType.Favorite.ToString())
            {
                if (parentNode != null && node.Index > 0)
                {
                    parentNode.Nodes.RemoveAt(nIndex);
                    parentNode.Nodes.Insert(nPrevIndex, node);
                }
                //The node is under a parent and is the first child.
                else if (parentNode != null && node.Index == 0)
                {
                    parentNode.Nodes.RemoveAt(nIndex);
                    node.ParentPtid = 0;
                    tvFavorites.Nodes.Insert(parentNode.Index, node);
                }
                else
                {
                    //Removing the currently selected node.
                    tvFavorites.Nodes.RemoveAt(nIndex);
                    //Inserting folder into the previous nodes index. The treeview automatically re-indexes the values.
                    tvFavorites.Nodes.Insert(nPrevIndex, node);
                }
              }
              else
              {
                if (parentNode != null)
                {
                    //Removing node from parent node
                    parentNode.Nodes.RemoveAt(nIndex);
                    //Setting the nodes parent ptid to the folder the node is moving to ptid.
                    node.ParentPtid = prevNode.Ptid;
                    prevNode.Nodes.Add(node);
                }
                else
                {
                    //Removing the current selected node
                    tvFavorites.Nodes.RemoveAt(nIndex);
                    parentNode = prevNode;
                    //Setting the nodes parent ptid to the folder ID to indicate the favorite belongs to the folder.
                    node.ParentPtid = parentNode.Ptid;
                    //parentNode doesn't have any children so just add the favorite to the node.
                    parentNode.Nodes.Add(node);
                }
            }
        }
    }
    catch (Exception)
    {
        throw;
    }
    tvFavorites.ExpandAll();
    node.TreeView.SelectedNode = node;
    tvFavorites.Focus();        //WI#18749
} 
```

输出给了我以下信息。phoenix.client.teller.start.exe 中 0x77202c16 (ntdll.dll) 的第一次机会异常：0xC0000005：访问冲突读取位置 0x000002c4。System.Windows.Forms.dll 中出现“System.AccessViolationException”类型的第一次机会异常 System.Windows.Forms.dll 中出现“System.AccessViolationException”类型的异常，但未在用户代码中处理

附加信息：试图读取或写入受保护的内存。这通常表明其他内存已损坏。

线程“Win32 线程”(0x1cb4) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1804) 已退出，代码为 0 (0x0)。步入：跨过非用户代码“System.Environment.GetResourceStringLocal” 步入：跨过非用户代码“System.Reflection.TargetInvocationException.TargetInvocationException” mscorlib 中发生了“System.Reflection.TargetInvocationException”类型的未处理异常。 dll

附加信息：调用的目标已引发异常。

线程“Win32 线程”(0x1ca4) 已退出，代码为 0 (0x0)。线程“主线程”(0x1c84) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0xedc) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x468) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x104c) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1d88) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1d0c) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1d04) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1cc8) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1cc0) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1cac) 已退出，代码为 0 (0x0)。线程“Win32 线程” (0x1ca0) 以代码 0 (0x0) 退出。线程“Win32 线程”(0x1d10) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1d08) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1ccc) 已退出，代码为 0 (0x0)。

当我在选项调试非托管下设置时，它不会拉起堆栈跟踪

调用堆栈 ntdll.dll!_KiFastSystemCallRet@0()
ntdll.dll!_ZwWaitForSingleObject@12() + 0xc 字节
KernelBase.dll!_WaitForSingleObjectEx@12() + 0x6c 字节
kernel32.dll!_WaitForSingleObjectExImplementation@12() + 0x43 字节
msvcr100_clr0400.dll !@_EH4_CallFilterFunc@8() + 0x12 字节 user32.dll!_InternalCallWinProc@20() + 0x23 字节
user32.dll!_UserCallWinProcCheckWow@32() + 0xb3 字节
user32.dll！*DispatchClientMessage@20() + 0x4b 字节
user32.dll！*__fnDWORD@4() + 0x24 字节 ntdll.dll!_KiUserCallbackDispatcher@12() + 0x2e 字节
user32.dll!_DispatchClientMessage@20()
user32.dll!_NtUserMessageCall@28() + 0xc 字节 user32.dll!_SendMessageWorker@20() - 0x3853 字节
user32.dll!_SendMessageW@16() + 0x49 字节 [外部代码]

> Phoenix.Client.AdGbFavorite.dll!Phoenix.Client.AdGbFavorite.frmFavorites.pbUp_Click(object sender, Phoenix.Windows.Forms.PActionEventArgs e) Line 404 + 0x21 bytes C#

# javascript - 在不添加子容器的情况下将鼠标悬停在容器的 1/3 宽度上时使内容可见

> ID：12601953
> 
> 赞同：0
> 
> 时间：2012-09-26T12:41:28.063
> 
> 标签：javascript, jquery, html

我有宽度为 100% 的 div 容器。我需要根据容器中的鼠标悬停来隐藏和显示内容。但这需要在主容器左侧的 30% 和其余（70%）处发生，没有显示/隐藏效果。我们可以在不添加任何额外的子容器的情况下做出这种效果吗？

图像表示 ![一个图像](../Images/db7c124e11b940077fce5283c612ab57.png)

这个效果怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:03:23.290

[这个 Fiddle](http://jsfiddle.net/MWu4u/2/)说明了一个非常基本的解决方案；每次鼠标在 30% 内移动时它都会调用效果，因此您可能需要添加一些进一步的逻辑来防止这种情况发生。

我使用了一个 500px 宽度的容器和一个子容器 div，但仅用于说明目的；JavaScript 将管理任何宽度的单个容器。您需要为“widthModifier”变量添加任何定位、边距或填充，但如果您愿意，也可以从 JavaScript 中的容器中获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:03:14.967

丹尼尔的回答并没有解决显示和隐藏内容的问题。看看我的[解决方案](http://jsfiddle.net/E5v4d/1/)，它完全符合您的要求。我使用 CSS 特性来实现结果。

使用 Chrome 查看示例。对于其他浏览器，您只需添加它们对 css 功能的特定实现。

# asp.net-mvc - MVC4 Razor 视图中出现奇怪的空格

> ID：12601957
> 
> 赞同：11
> 
> 时间：2012-09-26T12:41:40.933
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我正在用 ASP.Net MVC4 开发一个应用程序，并且遇到了一个奇怪的空白问题。我用 Razor 开发了很多 MVC3 站点，没有这个问题。

这是我的模板 cshtml 文件：

```
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>HF - Content Management - @ViewBag.Title</title>
    <link href="@Url.Content("~/content/bootstrap/bootstrap.min.css")" rel="stylesheet" />
    @Styles.Render("~/bundles/css/hf-cms-logged-in")
</head>
    <body>

        @Html.Partial("Partials/NavBar")

        <div class="container">@RenderBody()</div>

        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script src="@Url.Content("~/scripts/bootstrap/bootstrap.min.js")"></script>
        @Scripts.Render("~/bundles/js/validation")
        <script src="@Url.Content("~/scripts/hf-cms.js")"></script>
    </body>
</html> 
```

注意 RenderBody() 调用的那一行——这里没有多余的空格。

当我调用一个动作时，渲染的主体会添加一些空格，我看不到我已经添加了这些空格，并且似乎无法摆脱。我调用一个没有逻辑的动作，它只返回以下视图：

```
@{
    ViewBag.Title = "Dashboard";
}    
<h1>Dashboard</h1> 
```

它肯定使用了正确的模板（在我的 _ViewStart.cshtml 中指定）

在谷歌浏览器中查看页面，源显示额外的空白。见下图：

![Google Chrome 开发者工具中显示的空格](../Images/4d517257496b31178e6f631cefe4f01e.png)

在 IE10 中可以看到类似的问题。这显然影响了设计。我尝试使用[Meleze.Web 去除](https://github.com/meleze/Meleze.Web)任何额外的空白，但空白仍然存在。

我对这个感到茫然，因为到目前为止它是一个相对简单的网站，还没有什么时髦的东西，所以我看不出这个空白是从哪里来的。

以前有人用 MVC4 或 Razor 看过这个吗？

编辑：我尝试删除所有样式表和脚本文件，空白仍然存在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T15:55:59.987

在为此苦苦挣扎了一段时间后，我找到了解决方案。

根 _ViewStart.cshtml 文件中一定有一个有趣的字符。我删除了 ViewStart 文件的内容并重新键入它，从而解决了问题。[这](http://our.umbraco.org/forum/core/umbraco-5-general-discussion/30489-HtmlPartial-and-@RenderBody-output-empty-string-before-html)让我想到一个奇怪的角色可能导致了这个问题。

不喜欢回答我自己的问题，但我希望这对其他人有所帮助。理论上，这不会是 MVC4 特有的问题，您可能会在 MVC3 中遇到同样的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-28T23:21:26.100

我遇到了同样的问题，史蒂夫的回答让我走上了正轨，这可能是文件中嵌入的一个不寻常的字符。

就我而言，它原来是文件开头的**重复 Unicode 字节顺序标记(0xEFBBBF)。**当我从 Git Extensions 差异视图复制并粘贴文件内容时，它似乎已经潜入。

顺便说一句，Visual Studio 有一个内置的 Hex 查看器。如果您在解决方案资源管理器中右键单击文件并单击“打开方式...”，则可以选择“二进制编辑器”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T15:04:14.933

我一直遇到同样的问题，并尝试了你提出的方法，史蒂夫。然而，这并没有解决我的问题。我发现导致问题的原因是我的子页面顶部的 h2 标签：

```
<h2>@ViewData("Title")</h2> 
```

当我删除包装标签时，一切正常：

```
@ViewData 
```

作为测试，我采用了 h2 的样式并将它们放在自己的类中，然后用跨度包装我的页面标题内容：

```
<span class="pagetitle">@ViewData("Title")</span> 
```

这工作得很好，所以我是如何纠正我的网站的问题的。虽然我不知道真正的根本原因，但这确实解决了我的问题，所以也许它会帮助其他人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-12T12:22:50.560

我刚刚遇到了类似的问题 - 在我的情况下，视图顶部的 @using 指令之一导致了问题。我在项目的几个不同视图中发现了同样的事情。

帮助我找到违规字符的一件事是将整个视图的内容粘贴到记事本中——很明显，有问题的行以某种方式编码不同（它们看起来比其他行小，即使在记事本中也是如此）。删除这些行并从头开始重写它们解决了这个问题，尽管我很遗憾我一开始是如何进入那个位置的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-10T18:40:06.220

我遇到了同样的问题，感谢这里的线索，我能够确定问题所在。

经过大量调查后，我发现页面开头有一个 Unicode 字符“零宽度不间断空格”。此字符在保存/编码为“带有 BOM 的 UTF-8”时添加到页面。我只能猜测该页面是在 Visual Studio 之外编辑的，是从其他地方复制的，或者可能是 VS 中的页面编码设置不正确。您在其他答案中说过，您可以通过查看曾经复制并粘贴到记事本中的内容来查看它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-26T12:46:37.807

我遇到了同样的问题，我将其修复如下： - 将数据库中的列（字段）数据类型从 nchar 更改为 nvarchar。这是因为 nchar 保留固定长度，因此如果您的字符串短于该长度，它将用空格完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-06T00:12:55.157

我有一个类似的问题，但一个更明显的解决方案。我在方法调用之后`Html.Partial()`包含在我的`<head>`元素中。`;`再次呈现在正文中。

```
<head>
    @await Html.PartialAsync("Test"); // The ";" is rendered in the body, remove it!
</head>
<body>
   ...
</body> 
```

# java - ArrayList 类型中的方法 add(int, R.String) 不适用于参数（int，String）

> ID：12601961
> 
> 赞同：1
> 
> 时间：2012-09-26T12:41:51.667
> 
> 标签：java, android, add

我查看了谷歌和堆栈溢出，但无法找到想要工作的答案。我正在关注“专业 android 4 应用程序开发”一书中的教程，该教程创建了一个待办事项列表。我的代码中唯一的错误是 eclipse 在我的代码中给我的错误消息，一旦我能解决这个问题，我相信它应该可以正常运行，但我已经盯着它看了一个小时，我很沮丧无法理解代码有什么问题以及为什么我在代码中收到错误消息。

它只强调了我在下面的代码中提出的一个单词 add ，单词的每一侧都有三个 * 任何帮助将不胜感激，谢谢

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Inflate the view to the main screen
    setContentView(R.layout.activity_to_do_list);

    // Get the references to the UI widgets
    ListView myListView = (ListView) findViewById(R.id.myListView);
    final EditText myEditText = (EditText) findViewById(R.id.myEditText);

    // create the array list of to do items
    final ArrayList<string> todoItems = new ArrayList<string>();

    // Create the array list of to do items
    final ArrayAdapter<string> aa;

    // Create the Array Adapter to bind the array to the list view
    aa = new ArrayAdapter<string>(this,
            android.R.layout.simple_list_item_1, todoItems);

    // Bind the array adapter to the List View
    myListView.setAdapter(aa);

    myEditText.setOnKeyListener(new View.OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
                if ((keyCode == KeyEvent.KEYCODE_DPAD_CENTER)
                        || (keyCode == KeyEvent.KEYCODE_ENTER)) {
                    todoItems.***add***(0, myEditText.getText().toString());
                    aa.notifyDataSetChanged();
                    myEditText.setText(" ");
                    return true;
                }
            return false;
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T12:43:39.767

代替

```
ArrayList<string> 
```

经过

```
ArrayList<String> 
```

# c# - 适合使用 BlockingCollection

> ID：12601966
> 
> 赞同：1
> 
> 时间：2012-09-26T12:42:17.177
> 
> 标签：c#, .net, multithreading, task-parallel-library

我即将使用像下面这样的 BlockingCollection，只是想检查它是否适合线程安全等。想知道我是否需要 CancellationTokenSource 来处理任何事情。

谢谢

```
public class MyApp
{
  private BlockingCollection<int> blockingCollection;

  public void Start()
  {
     blockingCollection= new BlockingCollection<int>();
     var task = Task.Factory.StartNew(ProcessData);
  }

  public void Add(int value)
  {
    blockingCollection.Add(value); //This is a thread that receives input
  }

  private void ProcessData()
  {
    foreach(var item in blockingCollection.GetConsumingEnumerable())
    {  
      ...
    }
  }

  public void Finish()
  {
    blockingCollection.CompleteAdding();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:54:16.513

显然，您可以在代码中使用取消令牌来支持优雅的取消模式：

```
 private readonly CancellationTokenSource cts = new CancellationTokenSource();

  public void Start()
  {
     blockingCollection= new BlockingCollection<int>();
     var task = Task.Factory.StartNew(ProcessData, cts.Token);
  }

  private void ProcessData()
  {
    foreach(var item in blockingCollection.GetConsumingEnumerable(cts.Token))
    {  
        cts.Token.ThrowIfCancellationRequested();

        // ...
    }
  }

  public void Cancel()
  {
      cts.Cancel();
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:56:59.023

是的，`BlockingCollection`它本身是线程安全的。来自 MSDN：

> IProducerConsumerCollection 表示允许线程安全地添加和删除数据的集合。BlockingCollection 用作 IProducerConsumerCollection 实例的包装器，允许从集合中删除尝试阻塞，直到可以删除数据。

好的，这并没有说明使用它的实际代码，但从我在您的代码中看到的情况来看，它使用正确。

# delphi - 是否可以在饼图上绘制 TeeChart PieSeries 标题而不是图例？

> ID：12601971
> 
> 赞同：0
> 
> 时间：2012-09-26T12:42:28.173
> 
> 标签：delphi, teechart

我有一个`DBChart`带四个`PieSeries`的。每个图表都有多个切片，并且是多色的。我希望每个系列的标题都写在它上面或下面，而不是传说。有什么简单的方法可以做到这一点吗？我正在使用 TeeChart Standard v2011.03.32815 VCL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:26:11.010

专业版包括在这里有用的注释工具。

使用标准版，您可能只有 4 个 TDBCharts，如上面评论中所述，或者您也可以在画布上手动绘制文本。IE：

```
procedure TForm1.FormCreate(Sender: TObject);
var i: Integer;
begin
  for i:=0 to 3 do
    with Chart1.AddSeries(TPieSeries) as TPieSeries do
    begin
      FillSampleValues;
    end;
end;

procedure TForm1.Chart1AfterDraw(Sender: TObject);
var i, tmpX, tmpY: Integer;
    tmpStr1, tmpStr2: string;
begin
  tmpStr1:='My Pie nº';

  for i:=0 to Chart1.SeriesCount-1 do
  begin
    tmpStr2:=tmpStr1+IntToStr(i+1);
    with (Chart1[i] as TPieSeries), Chart1.Canvas do
    begin
      tmpX:=CircleXCenter-(TextWidth(tmpStr2) div 2);
      if (i<2) then
        tmpY:=CircleRect.Top-20
      else
        tmpY:=CircleRect.Bottom+10;

      TextOut(tmpX, tmpY, tmpStr2);
    end;
  end;
end; 
```

# android - NoClassDefFoundError: android/support/v4/content/LocalBroadcastManager

> ID：12601972
> 
> 赞同：0
> 
> 时间：2012-09-26T12:42:28.780
> 
> 标签：android, xamarin.android

*   平台：MonoDroid v4.2.4
*   IDE：Visual Studio 2012
*   最低 SDK 版本：API 12

我在尝试使用 Android.Support.v4.Content 命名空间中包含的 LocalBroadcastManager 类时遇到了运行时问题。在我的 IDE 中，我明确地添加了引用，并且可以很好地确定命名空间/类的范围，并且在编写了一些代码之后，可以按预期进行编译。但是，在应用程序部署和启动时，我收到错误提示：*“NoClassDefFoundError: android/support/v4/content/LocalBroadcastManager”*

下面是提示运行时错误的代码（DSC_Discconected_From_Device是一个继承自BroadcastReceiver的类）。它在最后一行停止执行。

```
 IntentFilter filter = new IntentFilter(UsbManager.ActionUsbDeviceDetached);

        DSC_Disconnected_From_Device Receiver = new DSC_Disconnected_From_Device();

        LocalBroadcastManager.GetInstance(this).RegisterReceiver(Receiver, filter); 
```

在 SDK manager 下，安装了所有的 API 包，以及 extras 下的“Support Library”包。

它在哪里寻找类的定义？我大概已经将源 LocalBroadcastManager.java 复制到了它“可能”正在寻找的 android-sdk 框架中的路径。例如：..\android-sdk\extras\android\support\v4\src\honeycomb\android\support\v4\content\LocalBroadcastManager.java

想法？

编辑：忘了提到我的项目已经在位于我项目根目录的文件夹“libs”中引用了支持库 android-support-v4。我必须创建目录并通过 Visual Studio 添加它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T07:13:14.167

这个问题困扰了我将近六个月，没有任何解决方案对我有帮助，但今天我设法自己找到了正确的解决方案。

当您选择项目目标版本大于或等于 Android 4.0 时，Android SDK 在您的项目“libs”文件夹中包含“android-support-v4.jar”文件。此 jar 包含所有与 Android 4.0 或更高版本相关的类和方法。

Android 正在尝试查找“android-support-v4.jar”中的类定义，这意味着您尚未配置“android-support-v4.jar”文件的构建路径。为此，请按照下列步骤操作：

1.  打开您的项目属性

2.  从左侧菜单中选择“Java Build Path”

3.  选择“库”选项卡

4.  按“添加外部 Jar”

5.  ***（最重要的一步）***从您的当前项目位置选择“libs”文件夹的“android-support-v4”jar 文件（路径应该在您的项目文件夹中，而不是 android sdk）。

6.  选择“订购和导出”选项卡和“勾选”“android-support-v4.jar”复选框

就是这样，你完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T15:32:41.503

我在 android facebook 集成中遇到了这个错误。原因是我将 android-support-v4.jar 库添加到了我的项目中。Facebook sdk 已经支持库。因此，如果您使用的库中已经有支持库，请从库和 java 构建路径中删除支持库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-30T08:46:32.393

在 Android Studio 0.8.2

![安卓工作室 0.8.2](../Images/759ca86053ff4137a3bbb1602a169ead.png)

在项目结构的依赖项选项卡中按绿色“+”，然后按键盘键“1”（用于库）并选择 v4+ 库

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-14T07:50:43.747

如果您启用了 proguard，请尝试添加

```
# Local Broadcast Manager
-keep public class android.support.v4.content.LocalBroadcastManager 
```

这为我修好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T12:57:38.303

如果是 Eclipse，您需要将支持库 .jar 文件添加到 IDE 的 /libs 目录中，以便在制作 apk 时，Android 打包程序会将其包含在您的 apk 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T18:26:03.547

该问题似乎与 android-support-v4.jar 库的“属性”有关。

默认情况下，Visual Studio 高级属性中列出的“构建操作”的值为*Content*。我将值切换到*AndroidJavaLibrary*并且运行时错误消失了。

但是，BroadcastReceiver 没有收到 USB 断开连接的意图，嗯......将相应地更新这个答案。

编辑：我永远无法让 LocalBroadcastReceiver 工作，所以我不得不使用普通的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-14T10:01:15.513

只需将位于>libs 文件夹中的项目的 android-support-v4.jar 替换为 FacebookSDK>libs 文件夹中的 android-support-v4.jar

# excel - Excel 分组列检查子项是否包含数据

> ID：12601975
> 
> 赞同：0
> 
> 时间：2012-09-26T12:42:38.920
> 
> 标签：excel, vba, excel-formula

我有一个包含例如软件产品列表的电子表格，有些产品达到模块级别，而其他产品只是一个产品。我有一个分组，将每个供应商的产品或产品模块分组......

excel表旨在将供应商产品（或模块，如果它们存在）映射到某些功能。单元格中的“X”表示支持该功能。图片中的模块 A1.1 支持功能 1。 ... 产品 A2（未定义模块）也支持功能 1。

在处理分组列的“树”时出现问题......我需要一个子/函数来完成其余的映射。即...如果我同时检查单元格 D2 和 E2，我想运行一个函数，将单元格 C2 更新为 X，然后将单元格 B2 更新为 X。（X 表示所有模块都支持该函数）

所以在图形中，红色单元格是手动输入的，非红色的“X”和“O”单元格会自动添加。

我知道以这种格式询问这似乎很懒惰，但是即使得到正确的想法，我也会很感激帮助，大脑被炸了，我什至想不出如何解决这个问题...

![在此处输入图像描述](../Images/be60abdbb7843b5b579ed52eedebb517.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:47:46.587

您可以使用位于列中的 OutlineLevel 属性根据工作表大纲逻辑定位父母和孩子。

尝试：

```
'This function goes thru the outline childrens of a cell and can apply some logic based on their value
Function SubComponentsPresent() As String
    Application.Volatile

    Dim RefRange As Range
    Set RefRange = Application.Caller

    Dim Childrens As Range
    Set Childrens = OutLineChildren(RefRange)

    Dim oCell As Range
    For Each oCell In Childrens
        '-----------
        'Insert code here
        '-----------
    Next oCell

    SubComponentsPresent = tOut
End Function

'This functions returns the childrens of a cell (Considering a column outLine)
Function OutLineChildren(RefCell As Range) As Range
    Dim oCell As Range
    Dim tOut As String

    With RefCell.WorkSheet
        If .Outline.SummaryColumn = xlSummaryOnRight Then
            Set oCell = RefCell.Offset(0, -1)
            Do Until oCell.EntireColumn.OutlineLevel <= RefCell.EntireColumn.OutlineLevel
                If oCell.EntireColumn.OutlineLevel = RefCell.EntireColumn.OutlineLevel + 1 Then
                    If tOut <> "" Then tOut = tOut & ","
                    tOut = tOut & oCell.Address
                End If
                Set oCell = oCell.Offset(0, -1)
            Loop
        Else
            Set oCell = RefCell.Offset(0, 1)
            Do Until oCell.EntireColumn.OutlineLevel <= RefCell.EntireColumn.OutlineLevel
                If oCell.EntireColumn.OutlineLevel = RefCell.EntireColumn.OutlineLevel + 1 Then
                    If tOut <> "" Then tOut = tOut & ","
                    tOut = tOut & oCell.Address
                End If
                Set oCell = oCell.Offset(0, 1)
            Loop
        End If
    End With
    Set OutLineChildren = RefCell.Worksheet.Range(tOut)
End Function 
```

# iphone - 根据点击情况，在另一个表格视图控制器中点击按钮打印数据。

> ID：12601985
> 
> 赞同：1
> 
> 时间：2012-09-26T12:43:12.057
> 
> 标签：iphone, objective-c, uitableview

我有一个表格视图控制器，它有几行，每行前面都有一个按钮。一旦我单击一个按钮，与该按钮对应的数据就必须显示在另一个表视图控制器中。同时单击两个按钮时，新的表格视图控制器应该具有对应于两行的数据。

但是，我无法获得全部数据。只有最新的点击会反映在新的表格视图控制器中并打印一行。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:48:11.350

为了实现这一点，您需要：

1) 声明属性 NSMuttableArray *rowData;

2）为每行按钮使用一个单击处理程序（将下面的代码添加到第一个 TableViewController）

```
- (void) viewDidLoad {
    [super viewDidLoad];

    [myButton addTarget:self action:@selector(rowButtonHandler:)forControlEvents:UIControlEventTouchUpInside];
}

- (void) rowButtonHandler:(id)button {
    if ([rowData count])
    {
        [self performSelector:@selector(openNewTableView) withObject:nil afterDelay:0.3];
    }

    [rowData addObject:...]; // add here row data
}

- (void) openNewTableView {
    SecondTableViewController* detailViewController = [[SecondTableViewController alloc] initWithNibName:@"SecondTableViewController" bundle:nil];

    // set collected rowDatas to SecondTableViewController

    [self.navigationController pushViewController:detailViewController animated:YES];

    [rowDatas removeAllObjects];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:48:11.357

我认为您可以安排（以 300 毫秒的小延迟）调用在第一次单击按钮时显示“另一个表视图控制器”+ 在 NSMuttableArray 中添加值时单击某个按钮。当时间（300 毫秒）结束时，您将拥有 NSMuttableArray，其中包含需要在 UITableView 中显示的数据。

# android - 如何以编程方式更改 Android 中 VideoViews 的 z 顺序

> ID：12601986
> 
> 赞同：0
> 
> 时间：2012-09-26T12:43:12.710
> 
> 标签：android, android-videoview, z-order

我有一个带有 RelativeLayout 的 android 应用程序，我以编程方式向其中添加了多个 VideoView，所有这些都同时播放。VideoViews 可以通过拖动来移动，并且可以移动它们以使它们重叠。

问题是我找不到在运行时更改它们的 z 顺序的方法。.bringToFront() 将视图置于前面以接收触摸事件，但实际视频的顺序保持不变。

我尝试通过 .removeChild() 删除和重新添加 videoView，但是这会停止并重置视频。

有没有办法改变视频的 z 顺序？“hacky”方式也可以，例如删除广告重新添加视图而不停止和重置视频。

谢谢

PS这是一个流媒体视频，所以重新启动视频到相同的位置是行不通的，会有太大的延迟。

编辑：即使人们建议多个 VideoViews 不应该工作，他们确实工作得很好，甚至重叠，至少在我的 Nexus S，ICS 4.0.3

编辑 2：实际上，不是很好，第二个视频有时会闪烁，但这很好。第3和第4个视频不闪烁，有点奇怪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:58:14.140

该[文件](http://developer.android.com/reference/android/view/SurfaceView.html#setZOrderMediaOverlay%28boolean%29)说，SurfaceView 的 Z 顺序是在它们附加到窗口之前确定的，并且它们的顺序一旦附加就不会改变。由于 VideoView 也是 SurfaceView，我认为不可能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:55:31.820

VideoViews使用SurfaceView，女巫是Z-ordered windows，但你不能有多个SurfaceView z-ordered，因为每个SurfaceView都会在窗口上打一个洞。如果在同一区域添加多个视频，视频将无法正常播放。我曾经将视频从屏幕上翻译出来以保持其状态。在 google play 上寻找 EcoNews aap。

# spring - spring 3.1 设置配置文件

> ID：12601987
> 
> 赞同：0
> 
> 时间：2012-09-26T12:43:20.057
> 
> 标签：spring, profile

我想在 Spring 3.1 中开始使用配置文件，但我发现了一个问题。

在我设置的休眠 xml 文件中

```
<beans profile="test">

    <context:property-placeholder location="/WEB-INF/springtest.properties" />

</beans>

<beans profile="production">

    <context:property-placeholder location="/WEB-INF/spring.properties" />

</beans> 
```

在 web.xml 我已经设置：

```
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <init-param>
        <param-name>spring.profiles.active</param-name>
        <param-value>production</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

但是当我尝试运行应用程序时，我遇到了问题，spring 看不到`spring.properties`文件中的变量。

我应该设置其他东西吗？

**更新**

休眠文件如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" 
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            ">

    <context:property-placeholder location="/WEB-INF/spring.properties" />

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven transaction-manager="transactionManager" />
    <!-- <tx:annotation-driven/> -->

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
                 p:dataSource-ref="dataSource"
                 p:configLocation="${hibernate.config}"
                 p:packagesToScan="com.app.search">
        <property name="annotatedClasses">
            <list>
                <value>com.app.search.domain.UsersEntity</value>
                <value>com.app.search.domain.CategoryEntity</value>
                <value>com.app.search.domain.GroupEntity</value>
                <value>com.app.search.domain.PlacesEntity</value>
                <value>com.app.search.domain.ProvincesEntity</value>
                <value>com.app.search.domain.PageAreaEntity</value>
                <value>com.app.search.domain.PageConfigurationEntity</value>
                <value>com.app.search.domain.PageTemplateEntity</value>
                <value>com.app.search.domain.PageTypeEntity</value>
                <value>com.app.search.domain.PageModuleEntity</value>
                <value>com.app.search.domain.PageModuleAreaConfigurationEntity</value>
                <value>com.app.search.domain.PageModuleConfigurationEntity</value>
                <value>com.app.search.domain.PageFacetEntity</value>
                <value>com.app.search.domain.PageFacetAreaEntity</value>
                <value>com.app.search.domain.PageTemplateFacetEntity</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.connection.url">jdbc:mysql://localhost/Search</prop>
                <prop key="hibernate.connection.driver_class">com.mysql.jdbc.Driver</prop>
                <prop key="hibernate.connection.username">root</prop>
                <prop key="hibernate.connection.password"></prop>
            </props>
        </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${app.jdbc.driverClassName}" />
        <property name="url" value="${search.jdbc.url}" />
        <property name="username" value="${search.jdbc.user}" />
        <property name="password" value="${search.jdbc.password}" />
    </bean>

    <!-- Declare a transaction manager-->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" p:sessionFactory-ref="sessionFactory">
        <qualifier value="transactionManager"/>
    </bean>

    <beans profile="test">

        <context:property-placeholder location="/WEB-INF/springtest.properties" />

    </beans>

    <beans profile="production">

        <context:property-placeholder location="/WEB-INF/spring.properties" />

    </beans>

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:43:33.227

我认为原因是，由于您希望在根应用程序上下文中通过 ContextLoaderListener 加载，因此指定配置文件的方式不是通过 DispatcherServlet 的 init 参数，而是通过 ServletContext 的 init 参数，这样在您的 web.xml 文件中：

```
<context-param>
    <param-name>spring.profiles.active</param-name>
    <param-value>production</param-value>
</context-param> 
```

# video - 在加载时向 preload="none" Html 5 视频添加加载动画

> ID：12601988
> 
> 赞同：0
> 
> 时间：2012-09-26T10:05:06.097
> 
> 标签：video, html

我正在寻找一种在用户将鼠标悬停在缩略图上时向视频加载添加小动画的方法。现在，当访问者将鼠标悬停在缩略图上时，他们无法知道视频正在加载。

在我的电影中没有 preload="none" 参数并导致巨大的加载时间之前，所以现在我将所有内容设置为 Preload="none"，但现在没有信息表明那里有电影。

我的一个想法是使用微调器添加视频加载，或者只是在视频加载时加载文本，然后在视频开始时消失。

在这方面我能得到什么建议，或者可能为我指明正确的方向。

这是我的网站： http: [//motion-master-templates.com](http://motion-master-templates.com)

谢谢 ：）

# c# - 数据库名称不允许使用表值参数

> ID：12601992
> 
> 赞同：3
> 
> 时间：2012-09-26T12:43:32.990
> 
> 标签：c#, asp.net, sql, sql-server-2008, enterprise-library

调用函数时出现以下错误`Select`：

> 传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确。表值参数 3 ("@SearchTableVar")，第 0 行，第 0 列：数据类型 0xF3（用户定义的表类型）具有指定的非零长度数据库名称。数据库名称不允许与表值参数一起使用，只有模式名称和类型名称有效。

**C# 代码**

```
//DTO
public class SP_SearchEntity_Result
{
    public string ID { get; set; }
    public string NAME { get; set; }
}

//Businesslogic
public IQueryable Select(int PageIndex, int PageSize, List<KeyValuePair<string, string>> SearchBy, List<KeyValuePair<string, System.Data.SqlClient.SortOrder>> SortBy)
{
    SqlDatabase obj = (SqlDatabase)DatabaseFactory.CreateDatabase();//System.Configuration.ConfigurationManager.ConnectionStrings["MySqlServer"].ConnectionString
    return obj.ExecuteSprocAccessor<SP_SearchEntity_Result>("SP_SearchEntity", PageIndex, PageSize, SearchBy.ToDataTable(), SortBy.ToDataTable()).AsQueryable<SP_SearchEntity_Result>();
}

//Extension methods
public static DataTable ToDataTable(this List<KeyValuePair<string, string>> source)
{
    DataTable dataTable = new DataTable("Test");
    dataTable.Columns.Add("KEY",typeof(System.String));
    dataTable.Columns.Add("VALUE", typeof(System.String));

    foreach (KeyValuePair<string, string> data in source)
    {
        var dr = dataTable.NewRow();
        dr["KEY"] = data.Key;
        dr["VALUE"] = data.Value;
        dataTable.Rows.Add(dr);
    }

    return dataTable;
}

public static DataTable ToDataTable(this List<KeyValuePair<string, System.Data.SqlClient.SortOrder>> source)
{
    DataTable dataTable = new DataTable("Test");
    dataTable.Columns.Add("KEY", typeof(System.String));
    dataTable.Columns.Add("VALUE", typeof(System.String));

    foreach (KeyValuePair<string, System.Data.SqlClient.SortOrder> data in source)
    {
        var dr = dataTable.NewRow();
        dr["KEY"] = data.Key;
        dr["VALUE"] = data.Value == System.Data.SqlClient.SortOrder.Ascending ? "ASC" : "DESC";
        dataTable.Rows.Add(dr);
    }

    return dataTable;
} 
```

存储过程在结果中返回两个表

**SQL 过程定义**

```
CREATE TYPE KeyValueTableVariable AS TABLE
(
    [KEY] NVARCHAR(800),
    [VALUE] NVARCHAR(800)
)
GO
CREATE PROCEDURE SP_SearchEntity
@PageIndex INT=NULL,      
@PageSize INT=NULL,     
@SearchTableVar dbo.KeyValueTableVariable READONLY,
@SortTableVar dbo.KeyValueTableVariable READONLY 
AS
BEGIN
    /*Bla bla bla*/
    SELECT '1' as [ID], 'Nitin' as [NAME]
    SELECT '1' as [COUNT]
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T11:07:15.717

[将表值参数传递给SQL Server](http://msdn.microsoft.com/en-us/library/bb675163.aspx)有许多要求/限制。请参阅“将表值参数传递给存储过程”下的示例：

> 然后代码定义一个`SqlCommand`，将`CommandType`属性设置为`StoredProcedure`。使用方法`SqlParameter`填充并且设置为。`AddWithValue``SqlDbType``Structured`

请注意，仅使用`AddWithValue`是不够的 -`SqlDbType`必须更改为`Structured`.

我*相信*该`ExecuteSprocAccessor`方法*没有*执行此更改（或者可能，如在其他一些示例中，`TypeName`必须将其设置为表类型的名称）。我无法通过企业库源代码来追逐这一切，但由于我在解决方案中的任何地方都找不到“结构化”这个词，这就是导致我得出这个结论的原因。

所以，如果你想使用 TVP，我认为你必须放弃 Enterprise Library 并使用`SqlClient`类型自己编写数据访问代码。（由于您使用的是 TVP，因此您已经放弃了切换到不同 RDBMS 的可能性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T06:51:09.913

我发现存储过程参数的 xml 数据类型更易于使用。对于以下示例，您可以将它们转换为 XML，而不是将参数转换为 DataTables：

```
CREATE PROCEDURE SP_SearchEntity
@PageIndex INT=NULL,      
@PageSize INT=NULL,     
@SearchTableVar xml=NULL,
@SortTableVar xml=NULL
AS
BEGIN
    /*Bla bla bla*/
    SELECT '1' as [ID], 'Nitin' as [NAME]
    SELECT '1' as [COUNT]
END 
```

这是 KeyValuePair 和查询的示例，在它被序列化为 XML 之后：

```
declare @sampleXml xml = '
<ArrayOfKeyValuePairOfstringstring xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/System.Collections.Generic">
  <KeyValuePairOfstringstring>
    <key>foo</key>
    <value>bar</value>
  </KeyValuePairOfstringstring>
  <KeyValuePairOfstringstring>
    <key>hello</key>
    <value>world</value>
  </KeyValuePairOfstringstring>
</ArrayOfKeyValuePairOfstringstring>'

select
        Node.Elem.value('*:key[1]', 'nvarchar(800)') as [Key]
        ,Node.Elem.value('*:value[1]', 'nvarchar(800)') as Value
    from @sampleXml.nodes(N'/*:ArrayOfKeyValuePairOfstringstring/*:KeyValuePairOfstringstring') Node(Elem)
go 
```

和一个 XML 序列化器：

```
// from Plinqo: http://www.codesmithtools.com/product/frameworks
public static string ToXml<T>(this T item)
{
    var settings = new XmlWriterSettings();
    settings.Indent = true;
    settings.OmitXmlDeclaration = true;

    var sb = new System.Text.StringBuilder();
    using (var writer = XmlWriter.Create(sb, settings))
    {
        var serializer = new DataContractSerializer(typeof(T));
        serializer.WriteObject(writer, item);
    }

    return sb.ToString();
} 
```

* * *

**编辑：**返回多个结果集并将它们绑定到对象

我将向您展示如何做到这一点，但我不确定这是您想要做的，基于您的模拟 SQL。如果您真的只是返回返回的对象的计数，您可以在它们是 IQueryable 之后计算您的结果。

首先，您需要一种绑定对象的方法，可以通过扩展 MVC 来获得。这些模型绑定器希望您的查询返回与您的模型属性匹配的列名。

```
using System;
using System.Collections.Generic;
using System.Web.Mvc;

public partial class ModelBinder
{
    /// <summary>
    /// Binds the values of an Dictionary to a POCO model
    /// </summary>
    public virtual T BindModel<T>(IDictionary<string, object> dictionary)
    {
        DictionaryValueProvider<object> _dictionaryValueProvider = new DictionaryValueProvider<object>(dictionary, null);
        return BindModel<T>(_dictionaryValueProvider);
    }

    /// <summary>
    /// Binds the values of an IValueProvider collection to a POCO model
    /// </summary>
    public virtual T BindModel<T>(IValueProvider dictionary)
    {
        Type _modelType = typeof(T);
        var _modelConstructor = _modelType.GetConstructor(new Type[] { });
        object[] _params = new object[] { };
        string _modelName = _modelType.Name;
        ModelMetadata _modelMetaData = ModelMetadataProviders.Current.GetMetadataForType(() => _modelConstructor.Invoke(_params), _modelType);
        var _bindingContext = new ModelBindingContext() { ModelName = _modelName, ValueProvider = dictionary, ModelMetadata = _modelMetaData };
        DefaultModelBinder _binder = new DefaultModelBinder();
        ControllerContext _controllerContext = new ControllerContext();
        T _object = (T)_binder.BindModel(_controllerContext, _bindingContext);

        return _object;
    }
} 
```

模型绑定的示例约定：

```
public partial class Person 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Project Project { get; set; }
    public List<Person> Friends { get; set; }
}

public partial class Project 
{
    public int Id { get; set; }
    public string Name { get; set; }
}   

select 
    1 as [Id]
    , 'NitinJs' as [Name]
    , 5 as [Project.Id]
    , 'Model Binding' as [Project.Name]
    , 2 as [Friends[0]].Id]
    , 'John' as [Friends[0]].Name]
    , 3 as [Friends[1]].Id]
    , 'Jane' as [Friends[1]].Name] 
```

现在，您需要一个方法来读取您的数据结果并将它们绑定到模型：

```
/// <summary>
/// Reads a record from a SqlDataReader, binds it to a model, and adds the object to the results parameter
/// </summary>
/// <typeparam name="T"></typeparam>
/// <param name="reader"></param>
/// <param name="modelName"></param>
/// <param name="results"></param>
private void ReadAs<T>(SqlDataReader reader, string modelName, List<T> results, string commandText) 
{
    Dictionary<string, object> _result = new Dictionary<string, object>();
    for (int i = 0; i < reader.FieldCount; i++)
    {
        string _key = modelName + "." + reader.GetName(i);
        object _value = reader.GetValue(i);

        if (_result.Keys.Contains(_key))    // Dictionaries may not have more than one instance of a key, but a query can return the same column twice
        {                                   // Since we are returning a strong type, we ignore columns that exist more than once.
            throw new Exception("The following query is returning more than one field with the same key, " + _key + ": " + commandText); // command.CommandText
        }

        _result.Add(_key, _value);
    }

    T _object = new ModelBinder().BindModel<T>(_result);

    if (_object != null)
    {
        results.Add((T)_object);
    }        
} 
```

接下来，您需要一种与数据库建立开放连接的方法（注意：您可能希望从配置中获取 _dbConnectionString）：

```
public SqlConnection GetOpenConnection()
{
    _sqlConnection = new SqlConnection(_dbConnectionString); 
    _sqlConnection.Open();
    return _sqlConnection;
} 
```

最后，您需要连接到数据库以获取结果集：

```
/// <summary>
/// Executes a SqlCommand that expects four result sets and binds the results to the given models
/// </summary>
/// <typeparam name="T1">Type: the type of object for the first result set</typeparam>
/// <typeparam name="T2">Type: the type of object for the second result set</typeparam>
/// <returns>List of Type T: the results in a collection</returns>
public void ExecuteAs<T1, T2>(SqlCommand command, List<T1> output1, List<T2> output2)
{
    string _modelName1 = typeof(T1).Name;
    string _modelName2 = typeof(T2).Name;
    string _commandText = command.CommandText;

    using (SqlConnection connection = GetOpenConnection())
    {
        using (command)
        {
            command.Connection = connection;
            command.CommandTimeout = _defaultCommandTimeout;
            using (SqlDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())                                               // Call Read before accessing data.
                {
                    ReadAs<T1>(reader, _modelName1, output1, _commandText);
                }

                reader.NextResult();

                while (reader.Read())                                               // Call Read before accessing data.
                {
                    ReadAs<T2>(reader, _modelName2, output2, _commandText);
                }
            } // end using reader
        } // end using command
    } // end using connection
} 
```

然后你的选择方法看起来更像这样：

```
public void SelectInto<SP_SearchEntity_Result, int>(int PageIndex, int PageSize, List<KeyValuePair<string, string>> SearchBy, List<KeyValuePair<string, System.Data.SqlClient.SortOrder>> SortBy, List<<SP_SearchEntity_Result> result1, List<int> result2)
{
    SqlCommand command = new SqlCommand("SP_SearchEntity");
    command.CommandType = System.Data.CommandType.StoredProcedure;
    command.Parameters.Add("PageIndex", SqlDbType.Int).Value = PageIndex;
    command.Parameters.Add("SearchTableVar", SqlDbType.Xml).Value = SearchBy.ToXml();

    List<KeyValuePair<string, string>> SortByCastToString = // modify your ToDataTable method so you can pass a List<KeyValuePair<string, string>> for SortBy
    command.Parameters.Add("SortTableVar", SqlDbType.Xml).Value = SortByCastToString.ToXml();

    ExecuteAs<SP_SearchEntity_Result, int>(command, result1, result2); 
}

public void SomeCallingMethod()
{
    List<SP_SearchEntity_Result> _results = new List<SP_SearchEntity_Result>{};
    List<int> _counts = new List<int>{};
    // ...
    // setup your SearchBy and SortBy
    // ...

    SelectInto<SP_SearchEntity_Result, int>(1, 20, SearchBy, SortBy, _results, _counts);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T17:17:11.873

使用 Enterprise Library Data Access Application Block v6.0.1304，TVP 作为存储过程的参数对我来说工作得很好。我的 C# 代码如下所示：

```
public static DataSet SomeHelperMethod(DataTable tvp1, DataTable tvp2)
{
    DbCommand cmd = <SqlDatabase>.GetStoredProcCommand("StoredProcName");

    SqlParameter p1 = new SqlParameter("@p1", tvp1);
    p1.SqlDbType = SqlDbType.Structured;
    cmd.Parameters.Add(p1);

    SqlParameter p2= new SqlParameter("@p2", tvp2);
    p2.SqlDbType = SqlDbType.Structured;
    cmd.Parameters.Add(p2);

    return <SqlDatabase>.ExecuteDataSet(cmd);
} 
```

# iphone - 在 UINavigationController 中使用交叉溶解的自定义 segue

> ID：12601994
> 
> 赞同：0
> 
> 时间：2012-09-26T12:43:36.393
> 
> 标签：iphone, ios, uistoryboard, segue

在我的应用程序中有一个 UITabbarController，每个选项卡都有 UINavgationController 和导航控制器中的视图列表。

我想用 Modal->Cross Dissolve 更改推送的样式，但是当我这样做时，它会破坏与导航栏和标签栏的关系并且不显示任何栏。

如何解决？

# c# - 解密 RSACryptoServiceProvider.SignData() 创建的签名以获取哈希

> ID：12601998
> 
> 赞同：3
> 
> 时间：2012-09-26T12:43:40.317
> 
> 标签：c#, .net, encryption, cryptography, rsacryptoserviceprovider

我正在尝试检索使用`RSACryptoServiceProvider`类`SignData`和`SignHash`方法创建的哈希。我需要它来存储必须稍后检索的加密哈希，因为它们是哈希链的一部分。

最初我想手动加密和解密哈希，使用私钥进行加密，但库不允许这样做。

我找不到执行此操作的方法，并且我所有的搜索都返回了有关私钥加密如何是一个坏主意的答案（当不使用它进行签名时......）。

# iis-7 - 选择具有智能卡身份验证 IIS7 Server 2008 的证书

> ID：12601999
> 
> 赞同：1
> 
> 时间：2012-09-26T12:43:42.700
> 
> 标签：iis-7, windows-server-2008, smartcard

我正在尝试为我创建的网站设置智能卡身份验证。将身份验证设置为 Windows 并将 SSL 设置为必需 我可以让智能卡读卡器在他们访问网站时弹出。虽然卡上有 2 个凭据，但其中只有一个显示为选项（我需要的信息在另一个凭据上）。我问了一位同事，他说在 IIS 6 中有一种方法可以在智能卡上指定一个位置来查找证书。我已经研究这个问题大约一个星期了，但还没有找到解决这个问题的方法。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:57:31.583

IIS 实际上只知道基于证书的身份验证，而不是智能卡本身（这实际上只是基于证书的身份验证的一种形式）。将您的站点配置为使用基于证书的身份验证，例如“需要客户端证书”，并且 IIS 会将调用链接到 Windows 安全性，进而识别身份证书的来源之一是智能卡读卡器。根据您的站点要求，您可能还需要启用证书映射，它将证书转换为 Windows 帐户身份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:38:18.917

当需要（或接受）证书时，IIS 将在会话开始时在 SSL 协商中请求客户端证书。IIS 将向客户端发送它信任的证书颁发机构列表。然后客户端获取这些并查看与它信任的证书颁发机构列表匹配的内容。然后它获取常见条目列表并检查它是否具有双方信任的 CA 颁发的任何证书。通常，如果没有证书，它将根本不发送证书，并且如果需要证书，请求将失败。如果只有一个证书，IE 通常会在不询问客户端发送哪个证书的情况下发送该证书，但如果需要，它会提示输入 PIN。最后，如果双方都信任的 CA 颁发了多个证书，则会向客户端显示一个对话框，询问使用哪个证书。

在这种情况下，听起来您希望客户端发送的凭证（证书）可能是由不受一方或双方信任的证书颁发机构颁发的。