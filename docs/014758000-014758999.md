# StackOverflow 问答 14758000-14758999

# javascript - 从常规页面移动到 asp 页面到用户控件后，脚本停止工作

> ID：14758001
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:55.137
> 
> 标签：javascript, asp.net

我将一个站点从一个位置移动到另一个位置。但是，当我移动它时，我注意到我的 java 脚本中的某些项目停止工作。我一直试图找出哪里出了问题，但这是我最后的手段。这是我的小提琴网站：

[http://jsfiddle.net/robert purpose/FCZVJ/6/](http://jsfiddle.net/robertpurpose/FCZVJ/6/)

```
if ($("#Deg0").attr('checked') && $("#Res0").attr('checked')) {
    $("#TuitionPerHour").val(202.83);
}

if ($("#Deg0").attr('checked') && $("#Res1").attr('checked')) {
    $("#TuitionPerHour").val(202.83);
}
if ($("#Deg0").attr('checked') && $("#Res11").attr('checked')) {
    $("#TuitionPerHour").val(202.83);
}

if ($("#Deg0").attr('checked') && $("#Res2").attr('checked')) {
    $("#TuitionPerHour").val(parseFloat(243.39).toFixed(2));
}

if ($("#Deg0").attr('checked') && $("#Res3").attr('checked')) {
    $("#TuitionPerHour").val(parseFloat(304.24).toFixed(2));
} 
```

随意直言不讳。我们都生活和学习。我把一切都当作学习经验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:20:15.453

问题是您正在使用`$.attr('checked')`. 以前返回布尔值，但现在返回属性值 (string) `'checked'`。[HTML - 为什么布尔属性没有布尔值？](https://stackoverflow.com/questions/7089584/html-why-boolean-attributes-does-not-have-boolean-value)

所以你的支票

```
if ($("#Deg1").prop('checked')) {
    $("#TuitionPerHour").val(294.44);
} 
```

总是经过。将所有更改`$.attr`为[http://jsfiddle.net/FCZVJ/7/](http://jsfiddle.net/FCZVJ/7/)`$.prop`

**您的代码的其他问题**

*   你的 jsfiddle JS 需要在头部，所以你的函数`updateTotal`是全局的
*   存储你的 jQuery 变量（你调用`$("#Deg0")`了一百万次）
*   `eval(document.CostEst.FoodPlan[TheIndex_FoodPlan].value));`Crapola，使用 eval 将字符串转换为数字？使用`parseInt()`或`parseFloat`
*   `$("#SemesterHours").val() <= 7`由于自动强制，确实有效，但请注意，如果它说`$("#SemesterHours").val() <= $('#somethinElse').val()`您将比较字符串和`"17" > "9" === false`.
*   `parseFloat(243.39).toFixed(2)`是眼睛疼（代码气味）。你要求`parseFloat`的东西已经是浮动的。您可能这样做是因为您想对其调用 toFixed 并且不能只使用`243.39.toFixed()`. 你应该使用`Number(243.39).toFixed()`或者`(243.39).toFixed()`

# java - 删除除第一个活动之外的所有活动

> ID：14758002
> 
> 赞同：5
> 
> 时间：2013-02-07T18:08:56.833
> 
> 标签：java, android, android-activity

我想对主页按钮进行编程，因此它将删除`Activities`堆栈中的所有内容，除了一个。我在这里做到了：[如何完成堆栈上的每个活动，除了 Android 中的第一个活动](https://stackoverflow.com/questions/6298275/how-to-finish-every-activity-on-the-stack-except-the-first-in-android)

```
public boolean onOptionsItemSelected(MenuItem item) {
    int itemId = item.getItemId();
    switch (itemId) {
    case android.R.id.home:
        Intent intent = new Intent(this, AMainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        startActivity(intent);
        break;
... 
```

但这种方式不适合我，因为它会删除所有`Activities`（包括第一个）并再次启动第一个。例如 - 如果我在 中检查用户密码`onCreate()`，他会被再次询问。如何`Activities`从堆栈中删除所有内容，但不会“触及”第一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:17:35.240

是的，根据以下文档`Intent.FLAG_ACTIVITY_CLEAR_TOP`：

> 上面示例中当前运行的活动 B 实例将在其 onNewIntent() 方法中接收您在此处**启动的新意图，或者自身完成并使用新意图重新启动。如果它已声明其启动模式为“多重”（默认）并且您没有在同一意图中设置 FLAG_ACTIVITY_SINGLE_TOP，那么它将完成并重新创建；**对于所有其他启动模式，或者如果设置了 FLAG_ACTIVITY_SINGLE_TOP，则此 Intent 将被传递到当前实例的 onNewIntent()。

因此，使用附加`Intent`标志：

```
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

并且您的活动不应该被重新创建。相反，它只会通过对`onNewIntent()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:21:23.817

在 manifest.xml 中将以下属性添加到 AMainActivity 的 Activity 标记中。

```
android:launchMode="singleTop" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:13:04.953

您可以`ExcludeFromRecent = "true"`在清单中的活动声明中使用标志，您不想在堆栈中。

# postgresql - Postgres 时区偏移未按预期工作

> ID：14758003
> 
> 赞同：1
> 
> 时间：2013-02-07T18:09:00.283
> 
> 标签：postgresql

根据 Postgres 文档`at time zone`可以采用 ISO-8601 样式时间偏移或标准时区缩写。

[http://www.postgresql.org/docs/9.1/static/datatype-datetime.html#DATATYPE-TIMEZONE-TABLE](http://www.postgresql.org/docs/9.1/static/datatype-datetime.html#DATATYPE-TIMEZONE-TABLE)

IST 代表 Postgres 中的以色列标准时间，偏移量为 +02:00。示例 当格林威治 (GMT) 星期三凌晨 12:00 时，以色列 (IST) 星期三凌晨 02:00

所以下面的 2 个语句应该是等价的：

```
select cast('2012-07-02 00:00:00' as timestamp without time zone) at time zone 'IST';

select cast('2012-07-02 00:00:00' as timestamp without time zone) at time zone '+02:00'; 
```

但他们不是。两种说法都给出不同的结果。

改成`+02:00`解决`-02:00`问题。此行为与文档不一致。我错过了什么吗？我从文档（以及一般惯例）中了解到，格林威治标准时间以东的时区具有正偏移，而右侧的时区具有负偏移。那么这里发生了什么？

# jquery - jQuery点击并再次点击

> ID：14758009
> 
> 赞同：0
> 
> 时间：2013-02-07T18:09:16.347
> 
> 标签：jquery

我正在尝试这样做，以便在单击按钮时为其提供一个类，并在再次单击该类时删除该类。

有人可以帮忙吗？

```
 $("body").on("click", ".AudioShowHidePlaylist", function(event){
        $('.AudioShowHidePlaylist').addClass('active');
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:09:50.843

只需[`toggleClass`](http://api.jquery.com/toggleClass/)：

```
$("body").on("click", ".AudioShowHidePlaylist", function(event){
    $('.AudioShowHidePlaylist').toggleClass('active');
    // Or as @Felix commented below:
    $(this).toggleClass('active');
}); 
```

文件：

> 描述：根据类的存在或 switch 参数的值，从匹配元素集中的每个元素中添加或删除一个或多个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:15:21.243

```
$('#foo').toggleClass(className, addOrRemove); 
```

相当于：

```
if (addOrRemove) {
   $('#foo').addClass(className);
 }
 else {
   $('#foo').removeClass(className);
} 
```

更新：[在 http://api.jquery.com/toggleClass/ 阅读全文](http://api.jquery.com/toggleClass/)

[请点击这里阅读更多关于切换功能的信息](http://www.w3schools.com/jquery/eff_toggle.asp)

# javascript - 如何使用句柄动态调整大小？没有用户界面

> ID：14758011
> 
> 赞同：2
> 
> 时间：2013-02-07T18:09:19.800
> 
> 标签：javascript, jquery

我正在尝试创建一个用于拖放调整大小的函数，但我遇到了问题。该脚本不会立即对鼠标光标方向的变化做出反应。如果我按住按钮并向右移动光标，然后向左移动，它只会继续增加对象的大小片刻。 [演示](http://jsfiddle.net/U9vre/)

Javascript：

```
var re_dragging = false, re_om_x, re_om_y, re_o_x, re_o_y, re_n_x, re_n_y;
function resize(resize_btn){
    resize_btn.mousedown(function(e){
        e.preventDefault();
        e.stopPropagation();
        re_dragging = true;
        re_om_x = e.pageX;
        re_om_y = e.pageY;// origin mouse postion
        target_wp = $(e.target).closest('.draggable_wp').find('.draggable_el');
    });
    $(document).mousemove(function(e){
        if(re_dragging){
            target_wp.width((e.pageX - re_om_x) + target_wp.width());
        }
    });
    $(document).mouseup(function(e){
        re_dragging = false;
    });
};
var resize_btn = $('.draggable_btn_resize');
resize(resize_btn); 
```

HTML：

```
<div class="draggable_wp">
    <div class="wp_img">
        <img src=""class="draggable_el">
    </div>
    <div class="btn">
        <div class="draggable_btn_resize"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:20:43.657

`re_om_x`使用重置宽度后需要更新`re_om_x = e.pageX;`。

我添加了一个新变量`width`，因为在 中`target_wp.width((e.pageX - re_om_x) + target_wp.width());`，`target_wp.width()`会带来偏差，它总是得到一个 int。

我重写`mousemove`如下：

```
 $(document).mousemove(function (e) {
     if (re_dragging) {
         target_wp.width((e.pageX - re_om_x) + width);
         width = (e.pageX - re_om_x) + width
         re_om_x = e.pageX;

     }
 }); 
```

这是演示。[http://jsfiddle.net/U9vre/1/](http://jsfiddle.net/U9vre/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T18:23:05.877

为简单起见，请参阅 jQuery UI 函数[.resizable()](http://jqueryui.com/resizable/)。请记住，然后您需要将 jqueryui .css 和 .js 脚本添加到您的页面。然后你只需要打电话

```
$("#some_div_to_resize").resizable(); 
```

# c# - 使用 XNA 链接到 WP7 上的应用商店页面

> ID：14758012
> 
> 赞同：0
> 
> 时间：2013-02-07T18:09:23.327
> 
> 标签：c#, url, store, windows-phone, xna-4.0

XNA 游戏/应用程序是否有可能通过代码获取它自己的商店链接 url，或者我必须提交一个应用程序，等待它的商店链接可用并发布包括商店链接的更新？

基本上，我希望玩家能够将他或她的分数发布到任何设置的社交网络以及指向商店页面的链接。

-我知道的简短问题，但这次我的 Google-Fu 让我失望了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:36:55.513

要获取商店 URL，您需要获取应用 ID。这是通过调用 GetManifestAttributeValue 来完成的。请注意，实际应用 ID（产品 ID）是在应用发布时生成的，与 WMAppManifest.xml 中的临时 ID 不同。在进行测试时，这会导致先有鸡还是先有蛋的情况。

有关详细说明，请参阅此：http: [//code.msdn.microsoft.com/Generating-a-Windows-Phone-9d19f939/](http://code.msdn.microsoft.com/Generating-a-Windows-Phone-9d19f939/)

如果您只需要从应用程序中链接到商店，则使用 MarketplaceDetailTask​​ 启动到商店。将 ContentIdentifier 保留为 null，它将尝试调出当前应用的详细信息页面。如果您需要调出其他应用的详细信息页面，则需要知道应用 ID，只有在该应用发布后才能获得该 ID。

[http://msdn.microsoft.com/en-us/library/hh394017%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh394017%28v=vs.92%29.aspx)

# header - nmake Makefile cl.exe 包含文件夹

> ID：14758015
> 
> 赞同：2
> 
> 时间：2013-02-07T18:09:38.880
> 
> 标签：header, include, makefile, cl.exe

我有一个项目，我正在尝试使用`nmake`Makefile 编译它。项目设置如下：

```
MyProject\
    Makefile
    src\
        includes\
            header1.h
            header2.h
        module1\
            module1.h
            module1.c
        module2\
            module2.h
            module2.c
        some.h
        some.c 
```

1.  `module1.c`包括`header1.h`和`header2.h`。
2.  `module2.c`包括`header2.h`

现在`Makefile`我尝试先编译module1，然后再编译module2。

```
CC = cl.exe
CFLAGS = /link /DLL
build:
    $(CC) src\module1\module1.c $(CFLAGS)
    $(CC) src\module2\module2.c $(CFLAGS) 
```

现在我得到了`Cannot open include file: includes\header1.h`. 在这个网站上做了一些研究，大家建议使用`/I DIR`flag。所以在我的`Makefile`我补充说：

```
CFLAGS = /link /DLL /I src\includes 
```

但我仍然遇到同样的错误。有人可以帮我解决这个问题吗？

谢谢

# oracle - 如何在oracle中以BLOB格式存储密码并检索它？

> ID：14758016
> 
> 赞同：0
> 
> 时间：2013-02-07T18:09:43.803
> 
> 标签：oracle, jakarta-ee, encryption

我的问题陈述是我需要通过一些jsp表单从用户那里获取用户名和密码，并使用一些加密算法加密密码，然后将加密的密码以BLOB格式存储到oracle数据库中。

提前感谢任何解决方案。

# c# - 以编程方式运行 CREATE PROCEDURE 脚本

> ID：14758018
> 
> 赞同：2
> 
> 时间：2013-02-07T18:09:44.880
> 
> 标签：c#, tsql

我正在尝试开发一个将运行 CREATE PROCEDURE 脚本的小应用程序。一个简单的例子：

```
IF EXISTS (SELECT * FROM sysobjects WHERE type = 'P' AND name = 'ap_get_roles_in_system')
    BEGIN
        DROP  Procedure  [dbo].[ap_get_roles_in_system]
    END

GO

CREATE PROCEDURE [dbo].[ap_get_roles_in_system]
(
    @system_id int
)
AS
    SELECT * FROM roles

GO

GRANT EXEC ON [dbo].[ap_get_roles_in_system] TO PUBLIC

GO 
```

如果我将此文本加载到一个字符串中，并通过 ExecuteNonQuery() 运行它，则删除存储过程的第一个项目可以正常工作，但不是运行 Create，而是使用存储的参数发现语法错误程序，即：尚未声明。

简而言之，它不是尝试运行 CREATE，而是以某种方式尝试将脚本作为脚本运行，而不是 CREATE。不知道正确的措辞是什么。

如果粘贴到 Sql Management Studio 中，上面的脚本效果很好。

这是我正在执行的代码：

```
public string RunSql(string Sql)
{
    string result = string.Empty;

    _conn.Open();
    SqlCommand cmd = new SqlCommand(Sql, _conn);
    cmd.CommandType = CommandType.Text;

    try
    {
        cmd.ExecuteNonQuery();

        result = "Succeeded";
    }
    catch (SqlException ex)
    {
        result = ex.Message;
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-17T00:38:34.317

@RichardSchneider 的回答让我找到了我找到的解决方案，但我想在这么晚的时候，因为有很多观点，我应该发布解决问题的代码，理查德的回答让我知道。这是一个名为 SqlAction 的整个类。注意，我用“GO”分割了整个文本，然后将组件放入一个数组中，依次执行每个组件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.Data.SqlClient;

namespace SProcRunner
{
    public class SqlAction
    {
        public SqlAction(string connString)
        {
            SqlConnectionStringBuilder sb = new SqlConnectionStringBuilder(connString);

            _conn = new SqlConnection(sb.ToString());
        }

        private SqlConnection _conn;

        public string RunSql(string Sql)
        {
            string result = string.Empty;

            // split the sql by "GO"

            string[] commandText = Sql.Split(new string[] { String.Format("{0}GO{0}", Environment.NewLine) }, StringSplitOptions.RemoveEmptyEntries);

            _conn.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = _conn;
            cmd.CommandType = CommandType.Text;

            for (int x = 0; x < commandText.Length; x++)
            {
                if (commandText[x].Trim().Length > 0)
                {
                    cmd.CommandText = commandText[x];
                    try
                    {
                        cmd.ExecuteNonQuery();
                        result = "Command(s) completed successfully.";
                    }
                    catch (SqlException ex)
                    {
                        result = String.Format("Failed: {0}", ex.Message);
                        break;
                    }
                }
            }

            if (_conn.State != ConnectionState.Closed) _conn.Close();

            return result;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:22:03.187

从 SQL 中删除“GO”行。

# python - Django中的Psycopg缺少模块

> ID：14758024
> 
> 赞同：2
> 
> 时间：2013-02-07T18:10:04.590
> 
> 标签：python, django, pip, psycopg2, psycopg

我已经 pip 安装了 psycopg2，但是当我尝试在我的 Django 项目中运行服务器或 syncdb 时，它会引发一个错误，提示“**没有名为 _psycopg 的模块**”。

编辑：“syncdb”命令现在引发：django.core.exceptions.ImproperlyConfigured: ImportError django.contrib.admin: No module named _psycopg

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:12:06.283

确保您已启用`psycopg2`并且不在`psycopg`文件中`settings.py`：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', 
```

并不是：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:22:13.550

这是通过执行 django 的全新重新安装来解决的。显然，递归 pip 安装似乎无法解决一些依赖项。

# google-analytics - 跟踪 Google Analytics 时的技术问题

> ID：14758026
> 
> 赞同：0
> 
> 时间：2013-02-07T18:10:08.130
> 
> 标签：google-analytics

一年多来，我们一直在跟踪我们网站的访问者，与去年相比，今年的网站访问量、唯一身份访问者等都减少了一半（大约，不完全是一半）。

市场对这种下降没有真正的解释，我们想知道是否有任何技术问题我们可能不得不导致这种情况发生。去年我们有另一位开发人员在网站上工作（他不再​​和我们在一起），我们想知道跟踪代码是否放置不当。我们当前的开发人员在这段时间内回顾了代码，并说这不是问题。

关于为什么我们的分析可能如此不平衡的任何其他想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:58:09.373

发生这种情况的一些原因是：

*   一些页面被删除。
*   删除了一些代码（您说不是这种情况。）
*   您的网站存在一些特定问题（例如大量国际用户等）

# mysql - 将添加到表中的新自动增量字段中的值从 0 更改为有意义的数字

> ID：14758028
> 
> 赞同：0
> 
> 时间：2013-02-07T18:10:10.623
> 
> 标签：mysql, auto-increment

将自增字段添加到表中作为主键后，所有记录在该字段中都包含一个 0 值，因此它的预期用途没有多大用处。

新记录将获得不错的价值，但是 3000 多个条目为 0 呢？有没有办法改变这些？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:13:39.070

这取决于您如何创建列。你可以发布你的代码吗？您使用的是什么引擎：MyISAM、InnoDB 还是其他？

例如，我用一个表做了一个测试：

```
alter table test1 add column i int auto_increment primary key;
select i from test1;

+---+
| i |
+---+
| 1 |
| 2 |
| 3 |
+---+ 
```

因此，在正常情况下，您会为现有记录填充值。

# android-pay - 使用订阅时，我每个月都会收到回传吗？

> ID：14758031
> 
> 赞同：5
> 
> 时间：2013-02-07T18:10:27.270
> 
> 标签：android-pay

我正在使用 Google 电子钱包购买数字商品。

当资金被转移时，我每个月都会收到回电，还是在设置订阅时回发 URL 只会被调用一次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T00:05:53.123

恐怕此时谷歌钱包只会在订阅被取消时通知用户。

我在谷歌钱包数字商品论坛上问过同样的问题：

[https://groups.google.com/forum/?fromgroups=#!topic/in-app-payments/YFaCBDwaF9g](https://groups.google.com/forum/?fromgroups=#!topic/in-app-payments/YFaCBDwaF9g)

请参阅 Google 的 Mihai Ionescu 的第二个答案

编辑：正如下面 Qix 所建议的，我在下面引用了谷歌给出的答案：

> 1.  订阅设置后，只有在订阅取消时您才会收到回发： [https ://developers.google.com/in-app-payments/docs/subscriptions#6](https://developers.google.com/in-app-payments/docs/subscriptions#6)
>     
>     
> 2.  目前，商家可以从 Merchant Center 取消订阅或退款。我们正在努力为取消和退款添加 API 支持。

请注意，论坛条目是从 2012 年底开始的，但截至 2014 年 5 月，情况似乎没有太大变化，因为谷歌仍然只针对订阅取消回发

# android - Access-Control-Allow-Origin 不允许 Origin null（从 android 获取 XML）

> ID：14758035
> 
> 赞同：0
> 
> 时间：2013-02-07T18:10:39.950
> 
> 标签：android, jquery, xml, ajax, webview

我研究过这个问题。
由于从 localhost 读取本地文件，到处都有人收到此错误。几乎在任何地方人们都需要一个 json。

在我的情况下，我想从这个站点从 android (WebView)获取[这个xml 文件。](http://www.revotech.am/smarthome/app/xml/config.xml)那么有人可以解释什么是错的吗？我应该怎么做才能得到它？

这是我的代码：

```
$.get('http://www.revotech.am/smarthome/app/xml/config.xml', function(xmlData)
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T09:05:04.723

我假设您使用的是 Android 版本 JELLY_BEAN 或更高版本，并且 javascript 正在文件模式的上下文中运行 - 如果是，则执行以下操作。

webView.getSettings().setAllowFileAccessFromFileURLs(true);

来自 Android 文档：

> 设置是否应允许在文件方案 URL 的上下文中运行的 JavaScript 访问来自任何来源的内容。这包括从其他文件方案 URL 访问内容。请参阅 setAllowFileAccessFromFileURLs(boolean)。要启用最严格且因此最安全的策略，应禁用此设置。
> 
> API 级别 ICE_CREAM_SANDWICH_MR1 及以下的默认值为 true，API 级别 JELLY_BEAN 及以上的默认值为 false。

# json - Mongoose .populate() 仅显示 1 个文档

> ID：14758037
> 
> 赞同：0
> 
> 时间：2013-02-07T18:10:52.027
> 
> 标签：json, mongodb, mongoose

我正在尝试仅将主队名称输出到页面，以便我可以尝试了解如何更好地使用我的代码。它只将一个团队打印到页面上，并将该团队的所有详细信息打印到页面上，而我只希望它打印一个部分。

这是我的代码，我希望它将每个人的名称打印`hometeam`到页面上

```
 app.get('/home', function(req, res) {
    Match.findOne({}).populate('hometeam.name').exec(function(err, teams){
      util.log(teams);
      res.send(teams);
    });
  }); 
```

但是当我加载页面时，我得到的只是这个匹配列表中的第一条数据

```
[
  {
    "hometeam": "5106e7ef9afe3a430e000007",
    "_id": "5113b7ca71ec596125000005",
    "__v": 0,
    "key": 1360246730427
  },
  {
    "hometeam": "5113c13e0eea687b28000001",
    "_id": "5113e951354fe70330000001",
    "__v": 0,
    "key": 1360259409361
  },
  {
    "hometeam": "5113c13e0eea687b28000001",
    "_id": "5113e999354fe70330000002",
    "__v": 0,
    "key": 1360259481412
  }
] 
```

另外，如果我尝试输入，`util.log(teams.hometeam.name)`我会得到以下信息：

```
TypeError: Cannot call method 'toString' of undefined 
```

但我希望它能够在此处打印属于主队的名称。由于 hometeam 只是我的数据库中 Team 的 objectId，我在这里的 DBreference 是否遗漏了一些东西？

更新：

团队架构

```
var Team = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'name' : { type : String,
              validate : [validatePresenceOf, 'Team name is required'],
              index : { unique : true }
            }
});

module.exports.Schema = Team;
module.exports.Model = mongoose.model('Team', Team); 
```

匹配模式

```
var Team = require('../schemas/Team').Schema;

var Match = new Schema({
  'key' : {
    unique: true,
    type: Number,
    default: getId
  },
  'hometeam' : { type: Schema.ObjectId, ref: 'Team' },
  'awayteam' : { type: Schema.ObjectId, ref: 'Team' }
});

module.exports = mongoose.model('Match', Match); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:17:02.390

填充获取您尝试检索的属性的属性名称。这意味着您应该使用“hometeam”而不是“hometeam.name”。但是，您想要检索团队的名称，以便可以对其进行过滤。然后调用将变为..

```
Match.findOne({}).populate('hometeam', {name: 1}).exec(function(err, teams) 
```

现在您有一个名为“hometeam”的属性，其中包含该名称。玩得开心 ：）

**编辑**

展示如何在更多文件中拥有单个 mongoose 实例以正确注册模式。

**应用程序.js**

```
var mongoose = require('mongoose');
var Team = require('./schemas/team-schema')(mongoose);
var Match = require('./schemas/match-schema')(mongoose);
// You can only require them like this ONCE, afterwards FETCH them.
var Team = mongoose.model('Team'); // LIKE THIS 
```

**架构/匹配架构.js**

```
module.exports = function(mongoose) {
    var Match = new mongoose.Schema({
        'key' : {
            unique: true,
            type: Number,
            default: getId
        },
        'hometeam' : { type: mongoose.Schema.ObjectId, ref: 'Team' },
        'awayteam' : { type: mongoose.Schema.ObjectId, ref: 'Team' }
    });
    return mongoose.model('Match', Match);
}; 
```

**架构/团队架构.js**

```
module.exports = function(mongoose) {
    var Team = new mongoose.Schema({
        'key' : {
            unique : true,
            type : Number,
            default: getId
        },
        'name' : { type : String,
            validate : [validatePresenceOf, 'Team name is required'],
            index : { unique : true }
        }
    });
    return mongoose.model('Team', Team);
}; 
```

# php - PHP 是否忽略 /etc/group 设置？

> ID：14758038
> 
> 赞同：4
> 
> 时间：2013-02-07T18:10:55.017
> 
> 标签：php, linux, permissions, chmod, chown

首先，我很抱歉我的英语不好，我不是母语人士。

我将 PHP 与 FCGI 一起使用，因此我的每个虚拟主机都以不同的用户身份运行它们的 php 脚本。

我需要在两个虚拟主机（user1 和 user2）之间共享一个 php 类，所以我决定将 user2 添加到 /etc/group 中的 user1 组是一个好主意。我这样做了，然后我使用以下命令测试了组权限是否正常工作：

```
su user2
cat /home/user1/shared_class.php 
```

它工作正常（user2 访问 user1 类就好了）。

但是 PHP 似乎不承认同样的权限。我将以下脚本保存在 user2 虚拟主机中进行测试并从浏览器运行：

```
<?php
passthru('whoami');
passthru('cat /home/user1/shared_class.php');
?> 
```

并且返回了正确的用户名（'user2'），但没有返回 shared_class.php 的内容。如果我尝试 require_once('/home/user1/shared_class.php') 我也会收到“拒绝访问”错误。所以很明显PHP认为'user2'没有访问shared_class.php的权限。

我做的另一个测试是运行

```
su user1
chmod o+r /home/user1/shared_class.php 
```

在最后一个 chmod 之后，'user2' PHP 脚本可以很好地读取文件，所以我确定这不是文件夹限制（open_basedir 或其他一些指令），它只是 PHP 忽略了 /etc/group。

这是预期的吗？有没有办法做到这一点？

我现在使用的解决方法是

```
su user1
chown user1:user2 /home/user1/shared_class.php 
```

这样，user2 可以很好地从 php 访问文件，但我希望能够共享文件而无需手动更改 chown 设置，即使用 /etc/group 并将 user2 添加到 user1 组。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:41:26.113

我要检查的第一件事是 SELinux 设置（如果有的话），你可以通过运行来检查

```
getenforce 
```

注意：`chown user1:user2`将用户所有权`user1`和**组所有权**更改为`user2`，它不会将用户的权限堆叠在权限中。

并且：用户需要在目录上有 +x 才能遍历它:)

PHP CGI 将作为您告诉它的任何人运行，我使用的大多数 PHPCGI 服务也将允许您指定进程组。

我会建议：

1.  创建一个名为`phpcgi`
2.  使 user1 & user2 成为主要组`phpcgi`
3.  将 CGI 进程更改为运行`phpcgi`
4.  对于文件：
    1.  将所有权设置为`%USER%:phpcgi`
    2.  `chmod 0660`
5.  对于文件夹：
    1.  将所有权设置为`%USER%:phpcgi`
    2.  `chmod 0770`

然后重新启动一切并再试一次:)

# objective-c - Interface Builder 自动布局和调整大小

> ID：14758040
> 
> 赞同：0
> 
> 时间：2013-02-07T18:11:00.250
> 
> 标签：objective-c, xcode, macos, interface-builder

所以我有两个关于 Xcode 的 Interface Builder 的问题：

1.  我正在尝试构建一个界面，左侧有一个标签，右侧有一个文本字段，它们之间的间距是恒定的，但是当我水平调整窗口大小以保持间距时，我希望文本字段水平扩展。我添加了一个保持它们之间的间距相等的约束，但是当我移动窗口时，它会调整标签框而不是文本字段的大小。我尝试固定标签的宽度，但它阻止了我调整窗口大小。

2.  有没有办法同时调整多个项目的大小？就像我有 8 个垂直标签并且我想将它们全部调整为窗口空间的 8 分之一，我怎么能做到这一点而不只是盯着它呢？如果您可以突出显示所有这些并拖动一个角来调整它们的大小，那将很容易，但它不会让我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:47:58.147

For your first problem you should **uncheck AutoLayout from Utilities Panel -> File Inspector** and see what happens. Concerning the second you can create how many labels you want with your desired size directly from code as follows :

Example for 10 labels:

```
for (int i=0; i<30; i++)

{

UILabel *label = [[UILabel alloc] initWithFrame:anyFrame];

[yourView addSubView:label];
[label release]; //if not using ARC

} 
```

# embedded - 在多任务环境中喂养看门狗的策略

> ID：14758045
> 
> 赞同：20
> 
> 时间：2013-02-07T18:11:10.537
> 
> 标签：embedded, freertos

将一些嵌入式代码移至 FreeRTOS 后，我对看门狗有一个有趣的困境。看门狗定时器对于我们的应用来说是必须的。使用 FreeRTOS 对我们来说也是一个巨大的福音。当应用程序更多是单任务时，它会在其逻辑流程中的及时点向看门狗提供信息，以便我们可以确保任务及时进行逻辑进展。

但是，对于多项任务，这并不容易。一项任务可能由于某种原因被绑定，没有取得进展，但另一项任务做得很好并且取得了足够的进展，可以让看门狗开心地吃饱。

一个想法是单独启动一个单独的任务来喂养看门狗，然后使用一些其他任务定期递增的计数器，当看门狗任务滴答作响时，它将确保所有计数器看起来都在其他所有任务上都取得了进展任务，如果是这样，继续喂看门狗。

我很好奇其他人在这种情况下做了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T20:19:03.550

监视所有其他任务状态的看门狗任务是一个很好的解决方案。但不要使用计数器，而是考虑为每个任务使用状态标志。状态标志应该具有三个可能的值：UNKNOWN、ALIVE 和 ASLEEP。当周期性任务运行时，它会将标志设置为 ALIVE。阻塞异步事件的任务应在阻塞前将其标志设置为 ASLEEP，并在运行时将其设置为 ALIVE。当看门狗监视器任务运行时，如果每个任务都处于活动状态或处于睡眠状态，它应该启动看门狗。然后看门狗监控任务应该将所有的 ALIVE 标志设置为 UNKNOWN。（ASLEEP 标志应保持 ASLEEP。）具有 UNKNOWN 标志的任务必须运行并将其标志再次设置为 ALIVE 或 ASLEEP，然后监视器任务将再次启动看门狗。

有关更多详细信息，请参阅本文的“多任务处理”部分： [http ://www.embedded.com/design/debug-and-optimization/4402288/Watchdog-Timers](http://www.embedded.com/design/debug-and-optimization/4402288/Watchdog-Timers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:42:09.423

不要忘记处理任务被删除或休眠较长时间的可能情况。如果这些任务以前是通过看门狗任务签入的，那么它们还需要有一个“签出”机制。

换句话说，看门狗任务负责的任务列表应该是动态的，并且应该组织起来，使得一些野代码不能轻易地从列表中删除该任务。

我知道，说起来容易做起来难...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T21:08:53.090

这确实是看门狗定时器的一大痛点。

我的电路板在 GPIO 线上有一个 LED，所以我在 while/sleep 循环中闪烁它，（750ms 开，250ms 关），在次低优先级线程中，（最低是空闲线程，它只是进入低功率循环模式）。我在 LED-flash 线程中放了一个 wdog 提要。

这有助于完全崩溃和 CPU 循环的更高优先级线程，但如果系统死锁则无济于事。幸运的是，我的消息传递设计没有陷入僵局，（嗯，不经常，反正:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T10:19:15.217

我使用 FreeRTOS 计时器设计了解决方案：

1.  SystemSupervisor SW Timer**为 HW WD 提供数据**。FreeRTOS 故障导致重置。
2.  每个任务使用 SystemReset 功能创建“自己的”软件计时器。
3.  每个任务负责“手动”在它到期之前重新加载它的计时器。
4.  SystemReset 函数在提交 suside 之前**保存数据**

这是一些伪代码清单：

```
//---------------------------------
//
// System WD
//
void WD_init(void)
{
HW_WD_Init();
    //  Read Saved Failure data, Send to Monitor
    //  Create Monitor timer
    xTimerCreate(   "System WD",        //  Name
                    HW_WD_INTERVAL/2,   //  Reload value
                    TRUE,               //  Auto Reload
                    0,                  //  Timed ID (Data per timer)
                    SYS_WD_Feed);
}
void SYS_WD_Feed(void)
{
    HW_WD_Feed();
}

//-------------------------
//   Tasks WD
//
WD_Handler WD_Create()
{
    return xTimerCreate(   "",                 //  Name
                           100,                //  Dummy Reload value
                           FALSE,               //  Auto Reload
                           pxCurrentTCB,       //  Timed ID (Data per timer)
                           Task_WD_Reset);
}

Task_WD_Reset(pxTimer)
{
    TaskHandler_t th = pvTimerGetTimerID(pxTimer)
    // Save Task Name and Status
    //  Reset
}

Task_WD_Feed(WD_Handler, ms)
{
    xTimerChangePeriod(WD_Handler, ms / portTICK_PERIOD_MS, 100);
} 
```

# html - 列表上的 HTML5 验证

> ID：14758051
> 
> 赞同：0
> 
> 时间：2013-02-07T18:11:23.830
> 
> 标签：html, kendo-ui

如何对一组复选框进行 HTML5 要求的验证？我基本上有一个选项，例如“选择以下一项或多项”，在 ul 中有几个复选框。如果我在 ul 级别设置 required 属性，则不会发生任何事情。如果我将它设置在输入级别，它会导致必须检查每个值以进行验证。我希望它强制用户选择至少一个值。这似乎适用于 Radio 类型，但对于复选框（您可以有多个选择）则不起作用。

这是HTML：

```
 <form> 
   <!-- in this case, I set required at the ul level !-->
   <ul required="required" validationMessage="You must enter a gender">
      <li>
        <input id="male" name="mf" type="checkbox" value="Male" />
        <label  for="male">Male</label>
      </li>
      <li>
        <input id="female" name="mf"  type="checkbox" value="Female" />
        <label for="female">Female</label>
      </li>
    </ul>
   <!-- in this case, I set it at the input level -->
   <ul required="required" validationMessage="You must enter a gender2">
      <li>
        <input id="male2" name="mf2" type="checkbox" value="Male2" required />
        <label  for="male">Male2</label>
      </li>
      <li>
        <input id="female2" name="mf2" type="checkbox" value="Female2" required />
        <label for="female">Female2</label>
      </li>
    </ul>
   <input type="submit" value="submit">
  </form> 
```

我应该注意：我正在使用 Kendo 跨浏览器进行验证（如果有针对此问题的 Kendo 化解决方案）

# python - 在python中拆分一个大的制表符分隔文件

> ID：14758054
> 
> 赞同：1
> 
> 时间：2013-02-07T18:11:30.447
> 
> 标签：python, split, large-files, csv

我有一个包含大约 140 万行和 50 列的大型制表符分隔文件。在我对文件中包含的数据做任何事情之前，我想把这个大文件分成大约几千个小文件。我的文件的第一列包含位置信息，我希望每个较小的文件都是基于此信息的特定间隔。在单独的列表中，我有要拆分较大文件的每个间隔的开始和停止。这是执行此操作的代码部分，开始和停止位置包含在名为 start_L 和 stop_L 的列表中：

```
for i in range(len(id)):
   out1=((file%s.txt)%(id[i]))
   table=open('largefile.tsv',"r")
   start=int(start_L[i])
   stop=int(stop_L[i])
   table.next()
   temp_out=open(out1,"w")
   reader=csv.reader(table,delimiter="\t")
   for line in reader:
       if int(line[0]) in range(start,stop):
           for y in line:
               temp_out.write(("%s\t")%(y))
           temp_out.write("\n")
    else:
        if int(line[0]) > stop:
            break
        else:
            pass
print "temporary file..." , id[i] 
```

上面的代码实现了我想要的，但是非常慢。它可以在几分钟内处理前一百个左右的时间间隔，但随着每个时间间隔的过去，它会以指数方式变慢，因此需要几天时间才能运行。有没有更快或更有效的方法来做到这一点？我认为问题在于它必须扫描整个文件以在每次循环中找到指定间隔内的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:36:14.963

您的程序随着时间的推移变慢的原因是因为您为每个输出文件一遍又一遍地重新读取 CSV 文件。随着您查看的范围在 CSV 文件中向下移动，您需要为每个输出文件读取越来越多的数据（其中大部分您会跳过）。因此，性能呈指数下降。

您需要重新组织您的代码，以便您仅按顺序读取 CSV 一次，并在循环中挑选出感兴趣的范围（并将它们写入文件）。仅当 CSV 按范围排序（您说是）并且您的 start_L/stop_L 也相应地排序时，这才有可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-05T18:53:24.243

在大多数情况下，上面提供的解决方案对我有帮助，但由于我的输入没有 # 行，我不得不进行以下更改。

```
 table=fileinput.input('largefile.csv',mode="r")
    #
    #
    #
         if fileinput.lineno() >= stop : 
```

我的文件是 | 以大约 600k 行和大约 120MB 大小分隔；整个文件在几秒钟内就被拆分了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:59:16.817

好的，我试图保持您代码的精神。它只遍历大文件一次，它不需要通过 csv 模块解析行，因为您只是在写入期间重新加入它们。

```
id=("a","b")
start_L=(1,15)
stop_L=(16,40)

i=0
table=open('largefile.tsv',"r")
out1=(("file%s.txt")%(id[i]))
temp_out=open(out1,"w")

# start iterating through the file 
for line in table:
     stop=int(stop_L[i])

     # Split the line into a position piece, and a 
     # throw away variable based upon the 1st tab char
     position,the_rest= line.split("\t",1)

     # I'm ignoring start as you mentioned it was sorted in the file
     if int(position) >= stop :
           # Close the current file
           temp_out.close()

           # Increment index so file name is pulled from id properly
           # If the index is past the length of the id list then 
           # break otherwise open the new file for writing
           i += 1  
           if (i < len(id)):
             out1=(("file%s.txt")%(id[i]))
             temp_out=open(out1,"w")
           else:
             break 

     temp_out.write(line) 
```

我的测试文件行看起来像

```
1       1a      b       c       d       e
2       2a      b       c       d       e
3       3a      b       c       d       e 
```

根据您的具体数据，这可以简化很多，但我希望它至少能给您一个开始。

# scala - Akka Actors的简单解释

> ID：14758055
> 
> 赞同：2
> 
> 时间：2013-02-07T18:11:38.730
> 
> 标签：scala, akka, actor

以下说法是否正确，否则如何改进？

> 当一个 Akka Actor 被发送消息时，一个作业被提交给执行者。当有空闲线程时，它会调用在actor上获得锁的作业（假设它可以，否则会占用另一个作业）。`receive`然后调用actor的方法，一旦完成，作业将被丢弃，线程返回到池中。 然后重复该循环。所有与并发线程相关的复杂事情都由 Akka 处理，让程序员可以专注于解决业务问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T22:35:55.443

更准确的是：

> 当一条消息被发送给一个actor时，它被放置在这个actor的名为*mailbox*的队列中。同时，可能有成百上千的演员在他们的邮箱中有待处理的消息。Akka 使用有限数量的工作线程，选择这些参与者的子集，`receive`并按时间顺序对邮箱中的每条消息调用他们的方法。
> 
> 不止一个线程永远不会处理同一个actor。Akka 也可能决定中断对来自邮箱的消息的处理并选择不同的参与者以保持公平并避免饥饿。因为每次`receive`调用都需要一个线程，所以此方法永远不应阻塞、等待或休眠。

# iphone - 操作手势后从 UIImageView 保存图像

> ID：14758060
> 
> 赞同：1
> 
> 时间：2013-02-07T18:11:57.510
> 
> 标签：iphone, ios, uiimageview, save, gesture

在使用移动、捏合和旋转手势操作图像后，我正在尝试保存图像。

无论我尝试什么，我得到的都是真实的图像，

我在 UIView 容器和 UIIMageView 上尝试使用 UIGraphicsBeginImageContextWithOptions 没有成功。

希望有人可以帮助解决这个问题。

谢谢，

伊泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:20:15.300

你可以试试这个：

```
UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);

CGContextConcatCTM(UIGraphicsGetCurrentContext(), imageView.transform);
[imageView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

这是假设您`imageView`通过`CGAffineTransform`应用于它的方式进行了转换。

# c# - 从 C# 向 DOSBOX 发送键盘命令

> ID：14758062
> 
> 赞同：3
> 
> 时间：2013-02-07T18:12:04.617
> 
> 标签：c#, keyboard-events, dosbox

我想向 DOSBOX 发送一个键盘命令（向下箭头），然后在 C# 中执行一些处理代码，然后循环。我的目标是自动运行 DOS 程序。

我在记事本和 Windows 资源管理器上成功运行的代码在 DOSBOX 上无法运行。

这是我的（简化的）代码：

```
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, int wMsg, IntPtr wParam, IntPtr lParam);

static void Main(string[] args)
{
    Console.ReadKey();
    System.Threading.Thread.Sleep(2000); //to give me time to set focus to the other window
    SendMessage(new IntPtr(0x001301CE), 0x0100, new IntPtr(0x28), new IntPtr(0));
} 
```

我使用 WinSpy++ 获得了窗口的句柄，DOSBOX 只有一个窗口，没有子窗口，这个过程适用于记事本和资源管理器。我发送到 SendMessage 方法的其他参数是[键盘通知 keydown](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646280%28v=vs.85%29.aspx)的代码和[向下箭头键](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd375731%28v=vs.85%29.aspx)的代码。

所以我的问题是，我怎样才能修改我的代码以将按键发送到 DOSBOX，或者有什么不同的方法可以实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:56:38.647

所以我设法让它自己工作，这就是我发现的。

DOSBOX 是一个[SDL 应用程序](http://www.libsdl.org/)，因此在 OpenGL 中运行。向 OpenGL 应用程序发送消息之前已经[讨论过，](https://stackoverflow.com/questions/8544271/how-can-i-send-keyboard-input-to-a-opengl-directx-game-window)并且是使用[`SendInput()`方法](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646310(v=vs.85).aspx)完成的。这显然是`SendKeys`引擎盖下的调用，所以我不确定为什么这对我不起作用，但看起来我不是唯一一个。

[这个未维护的库](http://inputsimulator.codeplex.com/)似乎工作正常，或者可以[像这样](http://www.ownedcore.com/forums/mmo/warhammer-online/186390-sendinput-example-c.html)完成自定义实现。

上面堆栈溢出链接中讨论的另一个选项是编写 C 或 C++ 库并通过 C# 应用程序调用它。这就是我最终要做的，这是代码。

下来.h

```
extern "C" __declspec(dllexport) void PressDownKey(); 
```

下来.cpp

```
#include <Windows.h>
#include "Down.h"
extern "C" __declspec(dllexport) void PressDownKey()
{
    KEYBDINPUT KeybdInput;
    ZeroMemory(&KeybdInput, sizeof(KeybdInput));
    KeybdInput.wVk = VK_DOWN;
    KeybdInput.dwExtraInfo = GetMessageExtraInfo();
    INPUT InputStruct;
    ZeroMemory(&InputStruct, sizeof(InputStruct));
    InputStruct.ki = KeybdInput;
    InputStruct.type = 1;
    int A = SendInput(1,&InputStruct,sizeof(INPUT));
    Sleep(10);
    ZeroMemory(&KeybdInput, sizeof(KeybdInput));
    KeybdInput.wVk = VK_DOWN;
    KeybdInput.dwFlags = KEYEVENTF_KEYUP;
    KeybdInput.dwExtraInfo = GetMessageExtraInfo();
    ZeroMemory(&InputStruct, sizeof(InputStruct));
    InputStruct.ki = KeybdInput;
    InputStruct.type = 1;
    A = SendInput(1,&InputStruct,sizeof(INPUT));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:19:53.663

微软有[一篇](http://msdn.microsoft.com/en-us/magazine/cc163417.aspx)关于这个主题的文章，以及完整的实现。

编辑：评论中的每个对话 - 这是代码。

控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {

        ConsoleKeyInfo ki = Console.ReadKey();
        while (ki.KeyChar != 'Z')
        {
            Console.WriteLine(ki.KeyChar);
            ki = Console.ReadKey();
        }
    }
} 
```

Winform 应用程序：

```
SendKeys.SendWait("A");
Thread.Sleep(2000);
SendKeys.SendWait("Z"); 
```

您可以在控制台应用程序上看到输出 - 这意味着它正在接收命令。

# c#-4.0 - 基于字符串列表的匿名类型

> ID：14758064
> 
> 赞同：1
> 
> 时间：2013-02-07T18:12:07.060
> 
> 标签：c#-4.0, anonymous-types

我有一个类型，比方说

```
class MyType { string A; string B; int C; DateTime D;} 
```

我有一个字符串列表，比如说

```
List<string> columns = new List<string>(){ "A", "C", "D"}; 
```

我想在运行时根据与列中字符串的属性匹配创建一个新类型。就像我的新类型将是

```
 MyType oldType = new MyType() { 
                   A = "Hello", 
                   B = "World",
                   C = 2013,
                   D = DateTime.Now()
              }
   // it contains ACD as in columns list and corresponding values from oldType
   var newtype = new { 
                   A = "Hello" ,
                   C = 2013,
                   D = DateTime.Now()
                } 
```

除了使用 emit 创建新类型之外，我无法理解应该采取什么方法。在不使用反射或发射的情况下向我推荐一些东西。

# c# - 使 GridView 列仅包含日期，不包含时间，并且仍然正确排序

> ID：14758065
> 
> 赞同：0
> 
> 时间：2013-02-07T18:12:07.643
> 
> 标签：c#, asp.net, sql

我正在`GridView`从一个`DataTable`. 我想只显示日期时间字段的日期部分。

我用过 ：

```
CONVERT(VARCHAR(10),MyDatetime,103) AS 'DateOnly' 
```

这显示得很好，但排序“不正确”（它被视为字符串而不是日期）我想避免的简单解决方案是

```
CONVERT(VARCHAR(10),MyDatetime,102) AS 'DateOnly' 
```

即首先有年份，这将正确排序，但不太正确。

我也试过：

```
CONVERT(date,MyDatetime,103) AS 'DateOnly' and 
DATEADD(D, 0, DATEDIFF(D, 0, MyDatetime)) AS 'DateOnly' 
```

`GridView`这些在 sql server 中看起来不错，但是在日期之后的 00:00:00 时间添加时呈现。- 从好的方面来说，排序工作正常。

中的列`DataTable`可以变化，因此这些列是在运行时生成的，我不能使用任何涉及像这样编辑字段的解决方案：

```
<asp:BoundField DataField="DataFieldName" DataFormatString="{0:d}"></asp:BoundField> 
```

我觉得我快到了，但我就是找不到拼图的最后一块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:27:00.517

如果你`convert to varchar and order`，那么你其实不是`ordering by`约会而是被一个`varchar string`。

为了摆脱日期时间的时间，将日期时间转换为日期，你的排序应该没问题（如你所说）

```
CONVERT(date, MyDatetime) AS 'DateOnly' 
```

要在 gridview 上格式化日期（如 dd-MM-yyyy），请使用如下格式字符串。请注意，在这种情况下，您的数据绑定字段应该是日期类型

```
<asp:BoundField DataField="DataFieldName" DataFormatString="{0:dd-MM-yyyy}">
</asp:BoundField> 
```

***或者***您可以使用[MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)上的特定格式`sql-server`来格式化日期`CONVERT`

例如，您可以转换为 103 样式并按您的原件*订购，*`MyDatetime`如下所示

```
Select col1,col2, convert(varchar,myDateTime,103) as 'DateOnly'
From yourTable
Order by myDateTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:22:32.570

我终于像这样在 RowDataBound 上做到了：stackoverflow.com/questions/4249629/formatting-dynamic-gridview

我确信一定有更好的解决方案，但我找不到。

# mysql - 获取与特定 id 相关的总行数，并获取列中特定值的存在 - MySQL

> ID：14758071
> 
> 赞同：0
> 
> 时间：2013-02-07T18:12:26.900
> 
> 标签：mysql, select, count

我有一个包含三列的用户表-> user_id INT UNSIGNED NOT NULL AUTO_INCREMENT，用户名 VARCHAR（256），电子邮件 VARCHAR（100），国家/地区 VARCHAR（50）。

我运行这个查询 -> `SELECT COUNT(*) FROM users WHERE country = 'Brazil'`。

这让我得到了来自巴西的用户总数。但我也想了解返回的行中是否存在特定的 user_id。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:14:50.473

```
SELECT COUNT(*) AS cnt, SUM(IF(user_id=XXX, 1, 0)) AS xxx_is_present
... 
```

如果 xxx 存在于基础结果集中，则总和将为`> 0`

# android - 在 Listview 中显示来自 URL 的图像

> ID：14758072
> 
> 赞同：3
> 
> 时间：2013-02-07T18:12:26.823
> 
> 标签：android, android-listview, android-imageview, android-image

我陷入了一个问题，我希望你能给我一些关于如何改进我的代码的建议。我正在编码关于将图像从 URL 显示到列表视图中，但它没有出现。这是我的代码：

```
public class MainActivity extends ListActivity {

private String[] imgNames;
private String[] imgUrls;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);

    String[] imgNames = {"ToDo","Gmail","LinkedIn","Facebook","Google Play"};
    this.imgNames = imgNames;
    String[] imgUrls = {
            "http://ww1.prweb.com/prfiles/2010/05/11/1751474/gI_TodoforiPadAppIcon512.png.jpg",
            "http://cdn4.iosnoops.com/wp-content/uploads/2011/08/Icon-Gmail_large-250x250.png",
            "http://kelpbeds.files.wordpress.com/2012/02/lens17430451_1294953222linkedin-icon.jpg?w=450",
            "http://snapknot.com/blog/wp-content/uploads/2010/03/facebook-icon-copy.jpg",
            "https://lh3.googleusercontent.com/-ycDGy_fZVZc/AAAAAAAAAAI/AAAAAAAAAAc/Q0MmjxPCOzk/s250-c-k/photo.jpg"
    };
    this.imgUrls = imgUrls;

    ListAdapter adapter = new ListAdapter(this, imgNames, imgUrls);
    setListAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
    }
}

public class ListAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] imgUrls;
    private final String[] imgNames;

    public ListAdapter(Context context, String[] imgNames, String[] imgUrls) {
        super(context, R.layout.activity_main, imgNames);
        this.imgNames = imgNames;
        this.imgUrls = imgUrls;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(LAYOUT_INFLATER_SERVICE);
        View row = (View)inflater.inflate(R.layout.activity_main, parent, false);

        TextView name = (TextView)row.findViewById(R.id.TextView);
        new DownloadImageTask((ImageView) findViewById(R.id.ImageView)).execute(imgUrls[position]);

        name.setText(imgNames[position]);

        return row;
    }
} 
```

}

您对如何改进我的代码有任何建议吗？我尝试在没有列表视图的情况下使用此代码并且它有效，但不幸的是它不适用于列表视图。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T18:18:30.523

不要使用异步任务来执行此操作。使用经过良好测试的图像加载器库。

我推荐[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

我已经在三个备受瞩目的应用程序中使用了这个库，它为 50 万用户提供了出色的工作。

然后在您的 getView 方法中执行此操作

```
UrlImageViewHelper.setUrlDrawable((ImageView) findViewById(R.id.ImageView), imgUrls[position]); 
```

# higher-order-functions - 将许多函数应用于一个参数的高阶函数

> ID：14758077
> 
> 赞同：0
> 
> 时间：2013-02-07T18:12:53.817
> 
> 标签：higher-order-functions

我想要将函数列表应用于单个参数的高阶函数的通用名称。

从这个意义上说，它是地图的反面。 `map`接受一个函数和一个参数列表，并将该函数应用于整个列表。在 Python 中，它可能看起来像这样

```
map = lambda fn, args: [fn(arg) for arg in args] 
```

我正在考虑功能相同但具有备用参数作为列表类型的函数

```
??? = lambda fns, arg: [fn(arg) for fn in fns] 
```

我怀疑这个函数存在并且有一个通用名称。它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:23:01.267

实际上，您所描述的不是 的反义词`map`，而是`map`以另一种方式应用。考虑，例如，

```
map(lambda f: f(2), [lambda x: x + 1, lambda x: x, lambda x: x * x]) 
```

这实际上将三个函数（加 1、标识和平方）应用于参数`2`。所以你想要的只是

```
alt_map = lambda x, fns: map(lambda f: f(x), fns) 
```

这仍然是一张普通的地图。

# html - 单个包装器中的 CSS 固定+流体

> ID：14758081
> 
> 赞同：2
> 
> 时间：2013-02-07T18:13:02.947
> 
> 标签：html, css

`footer`在[**这个例子**](http://jsfiddle.net/dEDDa/2/)中，如何使第二个 div 扩展到整个宽度？

我想避免给第二个 div 一个宽度。第一个 div 的固定宽度为`80px`

**[更新](http://jsfiddle.net/dEDDa/4/)**：那么如何使黑狐狸与浅灰色狐狸具有相同的高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:16:14.070

使用`float:left`代替`display:inline-block`并将浮动仅应用于第一个 div。

[jFiddle在这里](http://jsfiddle.net/dEDDa/3/)

```
div {
  padding: 20px;
  background-color: #ccc;
}

div:first-child {
  width: 80px;
  background-color: #000;
  color: #fff;
  float:left;
} 
```

# qt - qt4 中的 QListViewItem 发生了什么？

> ID：14758082
> 
> 赞同：7
> 
> 时间：2013-02-07T18:13:03.780
> 
> 标签：qt, qt4, qlistwidget, qlistview, qt3

我没有做很多 Qt 编程，所以这听起来像是一个愚蠢的问题，但是 qt4 中的 QListViewItem 发生了什么？

我有这个我前段时间在 qt3 中编写的应用程序。我使用恰当的名称“qt3toqt4”程序将其更改为 qt4（所有这些都在 Fedora 平台上）。

在内部，它似乎将很多类从 QClass 更改为 Q3Class（可能是为了提供某种向后兼容性），然后用 qt4 编译它。我今天遇到了一些问题（与从 QProcess 读取标准输出有关，但除此之外），我决定简单地在 qt4 中重写应用程序。

现在解决问题 - 我使用 QListView，并在树状结构中添加大量 QListViewItems。像这样的东西：

![在此处输入图像描述](../Images/76676530a4a6baf1ef19a35456da0eac.png)

但这在 qt4 中似乎不再可用。而且我也找不到任何提供这种行为的例子。有没有办法在 qt4 中做到这一点？也许让它更复杂 - 我使用了我自己的 QListViewItems（派生自 QListViewItem）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:24:38.390

您在 Qt 4 中寻找的小部件是`QListWidget`及其项目类`QListWidgetItem`。它几乎对应`QListView`于 Qt 3 中的小部件，具有用于添加和删除项目的经典基于项目的界面。您可以像在 Qt 3 中进行子类化`QListWidgetItem`一样进行子类化。`QListViewItem`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:40:48.743

只是为了完成这个问题。在 qt4 中实现这种行为的是 QTreeWidget 和 QTreeWidgetItem。

# android - 如何确定设备 (Android) 可以播放的最高视频分辨率和/或比特率？

> ID：14758086
> 
> 赞同：5
> 
> 时间：2013-02-07T18:13:24.403
> 
> 标签：android, video

我正在开发一个需要播放多个 MP4 视频的应用程序。我们已将这些视频转码为多种分辨率，试图为我们的用户提供最佳的播放体验。对于流媒体，我们还为支持它的设备提供 HLS，但我们也为用户提供下载视频以进行离线播放的能力。

我的问题是：对于给定的 Android 设备，我有没有办法以编程方式确定它可以处理的最大分辨率和/或比特率？

# language-agnostic - 原子操作是如何在硬件层面实现的？

> ID：14758088
> 
> 赞同：54
> 
> 时间：2013-02-07T18:13:29.510
> 
> 标签：language-agnostic, x86, atomic, smp

我知道在汇编语言级别的指令集架构提供了比较和交换以及类似的操作。但是，我不明白芯片如何能够提供这些保证。

正如我想象的那样，指令的执行必须

1.  从内存中获取一个值
2.  比较值
3.  根据比较，可能在内存中存储另一个值

是什么阻止了另一个内核在第一个内核获取它之后但在它设置新值之前访问内存地址？内存控制器是否管理这个？

编辑：如果 x86 实现是秘密的，我很高兴听到任何处理器系列是如何实现它的。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-07T21:10:56.520

这是software.intel.com 上的[一篇文章](http://software.intel.com/en-us/articles/implementing-scalable-atomic-locks-for-multi-core-intel-em64t-and-ia32-architectures)，它对用户级别的锁几乎没有说明：

> 用户级锁涉及利用处理器的原子指令以原子方式更新内存空间。原子指令涉及在指令上使用锁定前缀并将目标操作数分配给内存地址。以下指令可以在当前 Intel 处理器上以锁定前缀原子运行：ADD、ADC、AND、BTC、BTR、BTS、CMPXCHG、CMPXCH8B、DEC、INC、NEG、NOT、OR、SBB、SUB、XOR、XADD 和XCHG. [...]在大多数指令中，必须明确使用锁定前缀，但 xchg 指令除外，如果指令涉及内存地址，则隐含锁定前缀。
> 
> 在 Intel 486 处理器时代，锁定前缀用于断言总线上的锁定，同时性能受到很大影响。从 Intel Pentium Pro 架构开始，总线锁被转换为缓存锁。如果锁驻留在不可缓存的内存中，或者如果锁超出缓存线边界分割缓存线，那么在最现代的架构中，仍然会在总线上声明锁。这两种情况都不太可能发生，因此大多数锁前缀将被转换为成本更低的缓存锁。

那么是什么阻止了另一个内核访问内存地址呢？[缓存一致性协议](http://en.wikipedia.org/wiki/Cache_coherence#Coherency_protocol)已经管理了缓存行的访问权限。因此，如果一个核心具有（临时）对高速缓存行的独占访问权限，则没有其他核心可以访问该高速缓存行。要访问该缓存行，另一个核心必须首先获得访问权限，并且获得这些权限的协议涉及当前所有者。实际上，缓存一致性协议会阻止其他内核静默访问缓存行。

如果锁定的访问没有绑定到单个缓存行，事情就会变得更加复杂。有各种令人讨厌的极端情况，例如页面边界上的锁定访问等。英特尔没有透露细节，他们可能使用各种技巧来加快锁定速度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T21:10:40.997

这方面的一个示例实现是[LL/SC](http://en.wikipedia.org/wiki/Load-link/store-conditional)，其中处理器实际上将具有用于完成原子操作的额外指令。在它的内存方面是缓存一致性。最流行的缓存一致性协议之一是[MESI 协议](http://en.wikipedia.org/wiki/MESI_protocol)。.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-07T23:59:30.370

缓存一致性协议本身不足以实现原子操作。假设您要实现原子增量。以下是涉及的步骤

1.  将缓存中的值加载到寄存器中
2.  增加加载到寄存器中的值
3.  将更新的值存储回缓存

因此，为了以原子方式实现上述 3 条指令，我们应该首先获得对包含所需值的缓存行的独占访问权。一旦我们获得了独占访问权，在“存储”操作完成之前，我们不应该放弃对该缓存行的独占访问权。这意味着执行原子指令的 CPU 同时不应响应此高速缓存行的任何高速缓存一致性协议消息。虽然魔鬼在细节上是如何实现的，但至少它给了我们一个心智模型

下面是 linus torvalds 提到的关于原子指令的内容

> 原子指令绕过存储缓冲区，或者至少它们的*行为*就像它们一样——它们可能实际上使用了存储缓冲区，但是它们在加载之前刷新它和指令管道，并等待它在之后耗尽，并在高速缓存行上锁定它们作为负载的一部分，并作为存储的一部分释放——所有这些都是为了确保缓存线不会在两者之间消失，并且在此过程中没有其他人可以看到存储缓冲区的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:33:17.667

内存控制器仅负责确保不同处理器上的内存和缓存保持一致 - 如果您在 CPU1 上写入内存，CPU2 将无法从其缓存中读取其他内容。确保他们都试图操纵相同的数据不是它的责任。有一些低级指令使用了锁定和原子操作。它们在操作系统级别用于操作小块内存以创建诸如互斥锁和信号量之类的东西，这些实际上是一两个字节的内存，需要对其执行原子的同步操作。然后应用程序在此之上构建以对更大的数据结构和资源执行操作。

# position - 将没有高度的绝对 div 垂直放置在中间，没有 javascript

> ID：14758090
> 
> 赞同：1
> 
> 时间：2013-02-07T18:13:40.943
> 
> 标签：position, vertical-alignment, absolute

我正在创建将显示在对象上方、对象下方和两侧的工具提示。上下是一件容易的事。但是我在将工具提示放在对象的一侧以使其垂直对齐时遇到了一些问题。工具提示可以包含不同数量的文本，因此它不能具有固定的高度。这就是它的样子。

HTML

```
<a class="tooltip">object<span>Tooltip text</span></a> 
```

CSS

```
.tooltip{
    border:1px solid black;
    padding:50px;
}

.tooltip span{
    width: 200px;
    position absolute;
    left: -120px;
    /* No idea what here*/
} 
```

有人可以帮我吗？

# templates - jbot 没有覆盖我的模板

> ID：14758097
> 
> 赞同：3
> 
> 时间：2013-02-07T18:14:26.803
> 
> 标签：templates, overriding, plone, theming

我要覆盖的视图由“ixds.covalent”包的“behaviors”文件夹内名为“covalent_member.py”的文件中的“ActivateForm”类定义。所以在这个包（ixds.covalent）中为我的视图放置一个自定义模板的地方是

```
ixds/covalent/behaviors/covalent_member_templates/activateform.pt 
```

（这有效）

但是后来我尝试在我的主题包中进行自定义，方法是创建一个名为

```
ixds.covalent.behaviors.covalent_member_templates.activateform.pt 
```

在我的主题的“覆盖”文件夹中，没有任何反应（当然我尝试重新启动实例，禁用并重新启用主题，重新安装多个产品，甚至运行构建）。自定义模板“activateform.pt”是否仍然存在于我的 ixds.covalent 包中，似乎没有任何区别（嗯，实际上是的：如果我删除它，我会得到一个“没有这样的文件或目录”错误. 但是问题总是一样的：主题的“覆盖”目录中的模板永远不会被获取）。

我在同一个“覆盖”文件夹中有 5 个其他覆盖模板，它们都在工作。我正在使用来自 Github 的 z3c.jbot 0.7.1（最新可用）、Plone 4.2.4（最新稳定）和最新可用的 Git 版本的 ixds.covalent。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:22:07.803

我假设您[在 Github 上使用](https://github.com/IxDS/ixds.covalent)[它`ixds.covalent`](https://github.com/IxDS/ixds.covalent)。

这里有两种不同的模板注册机制。

该类`ActivateForm`派生自`plone.directives.form.Form`，而后者又使用`five.grok`包。因此`ActivateForm`在启动时是“grokked”的，这意味着它在 Zope 中的注册是自动完成的，无需在另一个文件中单独输入。对开发者来说非常方便`ixds.covalent`。

grok 机制还允许开发人员为表单创建一个自动注册的模板。他们可以创建一个包含模块名称加上“_templates”（`covalent_member_templates`）的目录和一个匹配类名（`activateform.pt`）的文件。

但在这种情况下，开发人员并没有选择这样做。`plone.directives.form`存在使开发人员更容易创建表单，例如不需要专用模板。如您所见，没有什么可以阻止*您*`ixds.covalent`按照标准 grok 方法在包中创建该模板。

但是当然不建议以这种方式编辑第三方包。您可以在自己的包中自定义表单。但是您不能使用`z3c.jbot`，因为没有要覆盖的现有模板。您必须重写`ActivateForm`该类并自己使用 grok 模板技术。

所以，在你的 my.theme 包中确保你有`interfaces.py`：

```
from zope.interface import Interface

class IMyTheme(Interface):
    """Marker interface that defines a ZTK browser layer.
    """ 
```

在`profiles/default/browserlayer.xml`：

```
<layers>
  <layer
      name="my.theme"
      interface="my.theme.interfaces.IMyTheme"
      />
</layers> 
```

在`configure.zcml`：

```
...
<!-- Grok the package -->
<grok:grok package="."/>
... 
```

在`covalent_member.py`：

```
from five import grok
from ixds.covalent.behaviors.covalent_member import ActivateForm \
    as OriginalActivateForm
from my.theme.interfaces import IMyTheme

class ActivateForm(OriginalActivateForm):
    grok.layer(IMyTheme) 
```

在`covalent_member_templates/activateform.pt`：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="my.theme"
      metal:use-macro="context/main_template/macros/master">

    <metal:block fill-slot="main">

        <h1 class="documentFirstHeading" tal:content="view/label | nothing" />

        <p>Hey there. I'd really like you to fill out this form.</p>

        <div id="content-core">
            <metal:block use-macro="context/@@ploneform-macros/titlelessform" />
        </div>

    </metal:block>

</html> 
```

...您将看到呈现的自定义模板。

# amazon-sns - 如何将现有 SMS 列表批量添加到 Amazon SNS？

> ID：14758101
> 
> 赞同：1
> 
> 时间：2013-02-07T18:14:46.210
> 
> 标签：amazon-sns

过去，我们一直使用电子邮件 => SMS 网关接收 SMS 消息。我们现在正在寻找一种更好的方法来做到这一点。在查看 AWS SNS 时，我们可以发送 SMS 消息，但必须确认客户为订阅者。我们已经有一个列表，如果可能，希望跳过该步骤。这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:12:13.333

不，不能跳过 SMS 订阅的确认步骤。

# cakephp - 如何更正 find("id = $view")); 在 cakephp 中？

> ID：14758107
> 
> 赞同：0
> 
> 时间：2013-02-07T18:15:07.120
> 
> 标签：cakephp, find

我从[这里](http://www.marcofolio.net/webdesign/building_a_blog_with_cakephp_part_1_getting_started.html)学习 cakephp代码来自旧版本的 cake 所以一些代码需要更新我有控制器，它将数据传递给视图或布局这里是控制器：

博客控制器.php

```
<?php
class BlogController extends AppController {

  var $name = 'Blog';
  var $uses = array('Blog');
  // Used when indexing the page (http://yourdomain.com/blog/)
function index($view = null) {
    // What to do if a view is set
    if (isset($view))
    {
      //problem is here
      $this->set('article', $this->Blog->find("id = $view"));
      $this->render('article');
    }
    else
    {
      $this->set('articles', $this->Blog->find('all'));
    }
  }
}
?> 
```

问题是这条线`$this->set('article', $this->Blog->find("id = $view"));`

如果我用它替换该行将`$this->set('article', $this->Blog->find('first'))`始终向我显示第一项并且不会出错我如何更正该行以便我可以使用 id？

布局是 article.ctp 如下

```
<div id="article">
<h1><?= $article['Blog']['title'] ?></h1>
<p class="date"><?= $article['Blog']['date'] ?></p>
<p class="intro"><?= $article['Blog']['introtext'] ?></p>
<p class="main"><?= $article['Blog']['maintext'] ?></p>
</div> 
```

这是通过单击其中一项将得到的错误：

```
Notice (8): Undefined index: id = 2 [CORE\Cake\Model\Model.php, line 2666] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:33:47.453

你可能想要这个：

```
 $this->set('article', $this->Blog->find('first', array('conditions' => array('Blog.id' => $view)))); 
```

请参阅：[检索数据 - CakePHP 手册](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

# c# - 日期时间解析.Net 3.5

> ID：14758110
> 
> 赞同：0
> 
> 时间：2013-02-07T18:15:16.477
> 
> 标签：c#

我的 DB2 数据库中有一个字符串，它位于美国。我有一个列值设置为此字符串“2011-12-31 00:00:00”，它表示 2011 年、12 月和 12 月的第一天。

我在我的客户端程序中将其作为字符串检索，该程序在英国运行，并且 UI 设置为本地文化（默认）。我的客户程序也在美国和香港运行，其文化设置为当地文化，分别为美国和香港。

我正在使用以下代码将字符串解析为日期时间。我不太确定这是否会奏效，而且我找不到任何指向该方向的好链接。你能否告诉我这是否适用于各种文化，如果不是为什么？

```
string quarterStartDate = "2011-12-01 00:00:00";
DateTime quarterStart;
DateTime.TryParse(quarterStartDate, CultureInfo.InvariantCulture, DateTimeStyles.None, out quarterStart);
return quarterStart; 
```

我有一个可以按照我的要求进行的测试，但是我不太确定当 UI 将在不同的国家/地区运行时这是否会起作用。

```
 string quarterStarter = "2011-12-01 00:00:00";        
  DateTime quarterStart; 
  DateTime.TryParse(quarterStarter,CultureInfo.InvariantCulture,DateTimeStyles.None,out quarterStart);    
  Assert.IsTrue(quarterStart.Year == 2011);
  Assert.IsTrue(quarterStart.Month == 12);
  Assert.IsTrue(quarterStart.Day == 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:17:55.440

我强烈建议您提前知道格式，使用`TryParseExact`而不是`TryParse`：

```
bool success = DateTime.TryParseExact(quarterStarter, "yyyy-MM-dd HH:mm:ss",
                                      CultureInfo.InvariantCulture,
                                      DateTimeStyles.None,
                                      out quarterStart); 
```

请注意，您*应该*检查返回值`TryParseExact`以检查它是否被正确解析 - 如果您对异常没有问题，只需使用它`ParseExact`。

您现有的代码完全有可能工作得很好——毕竟，你已经提供了不变的文化——但是指定格式可以让你更清楚你真正的期望，也意味着你会检测出一个意外格式的值提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:18:19.517

您可以使用`ParseExact`拉日期，例如：

```
var s = "2011-12-01 00:00:00";
var dt = DateTime.ParseExact(s,"yyyy-MM-dd HH:mm:ss",CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:18:29.770

您可以设置不随文化变化的特定格式。

```
DateTime dt;
DateTime.TryParseExact(dateTime, 
                       "yyyy-MM-dd hh:mm tt", 
                       CultureInfo.InvariantCulture, 
                       DateTimeStyles.None, 
                       out dt); 
```

# mediaelement.js - 来自 mediaelement.js swf 的混合内容警告

> ID：14758117
> 
> 赞同：1
> 
> 时间：2013-02-07T18:15:51.780
> 
> 标签：mediaelement.js

我正在开发一个在 https 环境中运行的视频播放器，我收到来自 mediaelement.js swf、flashmediaelement.swf 的混合内容警告。

我正在使用的播放 url 是 https url ( [https://www.youtube.com/watch?v=8Q2P4LjuVA8](https://www.youtube.com/watch?v=8Q2P4LjuVA8) )，但似乎媒体元素 swf 忽略了 url 的协议并发出请求获取http版本。

这是放置在页面上的嵌入标签（注意 flashVars 中的文件参数是 https）：

```
<embed secure="true" id="me_flash_0" name="me_flash_0" play="true" loop="false" 
       quality="high" bgcolor="#000000" wmode="transparent" allowscriptaccess="always" 
       allowfullscreen="true" type="application/x-shockwave-flash" 
       pluginspage="//www.macromedia.com/go/getflashplayer" 
       src="/assets/flashmediaelement.swf"
       flashvars="id=me_flash_0&amp;isvideo=true&amp;autoplay=false&amp;preload=none&amp;width=2844&amp;startvolume=0.8&amp;timerrate=250&amp;flashstreamer=&amp;height=921&amp;file=https://www.youtube.com%2Fwatch%3Fv%3D8Q2P4LjuVA8" 
       width="2844" height="921"> 
```

作为参考，我正在运行 Chrome 并使用 2.9.5 版的 mediaelement.js。

关于为什么我在浏览器中收到混合内容警告的任何想法将不胜感激。非常感谢。

# javascript - 通过javascript动态设置文本SVG元素

> ID：14758125
> 
> 赞同：30
> 
> 时间：2013-02-07T18:16:20.813
> 
> 标签：javascript, svg

我正在通过 JavaScript 创建 SVG 元素，它工作正常，但是当我创建一个文本 SVG 元素并定义它的内容时，浏览器只是不呈现该值，尽管当我使用 firebug 检查它时该值在代码中。

代码是：

```
var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
svg.setAttribute('xlink','http://www.w3.org/1999/xlink');
svg.setAttribute('width','187');
svg.setAttribute('height','234');

var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
rect.setAttribute('width','187');
rect.setAttribute('height','234');
rect.setAttribute('fill','#fff');
rect.setAttribute('stroke','#000');
rect.setAttribute('stroke-width','2');
rect.setAttribute('rx','7');

var text = document.createElementNS('ttp://www.w3.org/2000/svg', 'text');
text.setAttribute('x', '10');
text.setAttribute('y', '20');
text.setAttribute('fill', '#000');
text.textContent = '2';

svg.appendChild(rect);
svg.appendChild(text); 

var wp = document.getElementById('wrapper'); 
wp.appendChild(svg); 
```

这是[jsfiddle 链接](http://jsfiddle.net/sAhyC/)。如果您检查 SVG，您将在那里看到文本元素的值，但浏览器不会呈现它。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T18:26:21.257

你的命名空间中缺少一个“h”

曾是

```
var text = document.createElementNS('ttp://www.w3.org/2000/svg', 'text'); 
```

应该

```
var text = document.createElementNS('http://www.w3.org/2000/svg', 'text'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-02T06:42:48.460

```
 function createText() {

  var newText = document.createElementNS(svgNS,"text");
  newText.setAttributeNS(null,"x",20);      
  newText.setAttributeNS(null,"y",100);   
  var textNode = document.createTextNode("milind morey");
  newText.appendChild(textNode);
  document.getElementById("firstGroup").appendChild(newText);
} 
```

* * *

```
 <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="300" height="300">    
       <g id="firstGroup">

    <text x="20" y="45" onclick="createText();" font-size=+13px">Click on this text to create a new text.</text>

  </g>
       </svg> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-21T13:57:37.960

我压缩了你的代码，现在它可以工作了

```
let txt='2';

wrapper.innerHTML=`
  <svg xlink="http://www.w3.org/1999/xlink" width="187" height="234">
    <rect width="187" height="234" fill="#fff" stroke="#000" 
          stroke-width="2" rx="7"></rect>
    <text x="10" y="20" fill="#000">${txt}</text>
  </svg>
`;
```

```
<div id=wrapper></div>
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-13T20:05:00.897

你犯了一个非常简单的错误：

var text = document.createElementNS('ttp://www.w3.org/2000/svg', 'text'); ^^^ 相比

var text = document.createElementNS(' [http://www.w3.org/2000/svg](http://www.w3.org/2000/svg) ', 'text'); ^^^^ 敲键盘！

# php - 使用 php 将照片上传到 Mysql 数据库

> ID：14758126
> 
> 赞同：0
> 
> 时间：2013-02-07T18:16:24.187
> 
> 标签：php, html, mysql, uploading

我目前正在为我最后一年的大学项目制作一个网站，这需要照片上传功能。目前，当用户上传照片时，照片会存储在远程服务器的文件夹中。我需要将图像输入数据库，所以我想知道是否有人对如何执行此操作以及在何处放置代码以在以下代码中将上传的内容发送到数据库有任何建议，我也需要它当每个用户上传一张图片时，它们都会显示给所有人看，而不是像现在这样，一次只显示一张图片，当页面刷新时，图片就会消失。希望一切都有意义，任何帮助将不胜感激。谢谢你。

```
<?php include_once("home_start.php"); ?>
<h1>Upload your images here:</h1>
<div id="fileselect" style="border-bottom:thin #000000 solid; border-   collapse:collapse">
    <form id="frmSimple" action="home.php" method="post" enctype="multipart/form-data">
         Select file to upload:&nbsp;
    <input type="file" id="filename" name="filename" size="10" /><br />
    <input type="submit" id="submit" name="submit" value=" Upload " />                      
    </form>
</div>
<div id="feedback">
        <?php
          // Determine whether a file was uploaded
                 if ($_FILES) {            
                // Put file properties into variables
                $name = $_FILES['filename']['name'];
                $size = $_FILES['filename']['size'];
                $tmp_name = $_FILES['filename']['tmp_name'];                
            // Determine whether file is png, jpg or other
        switch($_FILES['filename']['type']) {
        case 'image/jpeg':  $ext = "jpg";  break;
                case 'image/png':  $ext = "png";  break;
                //default:  ext = '';  break;
            }
            //validate against file type
            //     if $ext is empty string (therefore null or false) image is not a jpg     or png
    if($ext){
                // validate against file size
                if($size < 1000000){
                     // Create a safe name for the file and store in a safe location
                     $n = "$name";  // Could add .$ext to enforce file type
                     $n = ereg_replace("[^A-Za-z0-9.]","",$n);  //  Remove all except   alphanumeric characters and

                     $n = strtolower($n); // Convert to lower case (platform  independence)
                        $n = "uploaded_images/$n"; // Add folder to force safe location
                        move_uploaded_file($tmp_name, $n); // Move to the safe location and give it the safe 

                    echo "<p>Uploaded image '$name' as '$n': </p>";
                     echo "<img src='$n' />";
                }
            else echo "<p>'$name' is too big - 50KB max (50000 bytes).</p>";
            }
            else echo "<p>'$name' is an invalid file - only jpg and png accepted.</p>";
        }
            else echo "<p>No image has been uploaded.</p>";

?>
</div>
<?php include_once("home_end.php"); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:22:40.453

我强烈反对它。相反，将照片存储在一个文件夹中并从数据库中引用它们的位置（即指向它们在文件系统上的位置的字符串）。

但是，如果您倾向于将其存储在数据库中，则需要：

*   上传后获取文件内容
*   确保内容没有任何与您的 SQL 冲突的字符（简单的解决方案是以某种方式对其进行编码；也许是 base64？）
*   执行 SQL 插入

再次 - 这是一个**坏**主意。不要这样做 - 将其保存到文件系统。

此外，以下行：

```
move_uploaded_file($tmp_name, $n); 
```

无需对文件类型或文件完整性进行任何检查，就可以轻松地将 shell 上传到您的机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:32:05.927

文件上传成功后，获取上传的图片路径。

```
 $file_type='jpg';  //if you are using more than one type write a switch case
$file_size = filesize($file);
$fp = fopen($file,'r');
$content = fread($fp,$file_size);
$content = addslashes($content);   //content is a binary data of the image
fclose($fp); 
```

将图像保存在数据库中。使用您想要的任何字段编写插入查询 $file_name、$file_type、$file_size 和内容。我假设您能够成功连接到数据库。

```
mysql_query("INSERT INTO Images (id,file_name,file_type,file_size,content)
   VALUES ('bird', 'jpg',340kb,'binarydata')"); 
```

# google-app-engine - gae java.lang.IncompatibleClassChangeError 上的 struts2

> ID：14758131
> 
> 赞同：0
> 
> 时间：2013-02-07T18:16:48.827
> 
> 标签：google-app-engine, struts2

它在带有 gae 插件的 eclipse 中运行良好，但是当部署到 gae 时，出现以下异常。

我发现在球衣中也发生了类似的问题，asm3.1 对 asm4.0 有效，所以我将 datanucleus 版本更改为 1.x，并删除了 asm4.0.jar，但它仍然无法正常工作......

```
Uncaught exception from servlet
java.lang.IncompatibleClassChangeError: Implementing class

at com.google.appengine.runtime.Request.process-b07b8ce2cde74ee3(Request.java)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at org.apache.struts2.convention.PackageBasedActionConfigBuilder.findActions(PackageBasedActionConfigBuilder.java:386)
at org.apache.struts2.convention.PackageBasedActionConfigBuilder.buildActionConfigs(PackageBasedActionConfigBuilder.java:344)
at org.apache.struts2.convention.ClasspathPackageProvider.loadPackages(ClasspathPackageProvider.java:53)
at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:245)
at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437)
at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:193)
at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:662)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:14:04.947

这个问题已经在这里讨论过：[java.lang.IncompatibleClassChangeError: Implementing class deploying to app engine](https://stackoverflow.com/questions/12166382/java-lang-incompatibleclasschangeerror-implementing-class-deploying-to-app-engi)。请看看它是否有帮助。

# r - 如何用变量调用 lm？

> ID：14758142
> 
> 赞同：2
> 
> 时间：2013-02-07T18:17:14.870
> 
> 标签：r, expression, lm

给定以下功能：

```
f <- function (x, y, data) {
    linm <- lm(y ~ x, data)
    summary(linm)$r.squared
} 
```

以下调用失败：

```
d <- data.frame(a = c(1, 2), b = c(3, 4), d = c(5, 6))
f('a', 'b', d) 
```

因为`lm`显然搜索列`x`而`y`不是用它们的内容替换变量名）。我该如何纠正这个问题？

我尝试使用表达式和`substitute`，但无济于事。不幸的是，我不完全了解 R 如何处理这些对象以及在哪些上下文中评估表达式，因此我盲目地飞行。这是我尝试过的（不工作）：

```
exp <- substitute(expression(y ~ x), list(x = x, y = y))
linm <- lm(formula = exp, data = data) 
```

检查时，该`exp`对象实际上看起来很有希望；不幸的是，我无法说服`lm`吞下它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T18:21:49.110

您可以使用该`formula`功能。以下应该有效：

```
f <- function (x, y, data) {
    linm <- lm(formula(paste(y,"~",x)), data)
    summary(linm)$r.squared
} 
```

# java - 未能在 hadoop 上实例化 SLF4J

> ID：14758145
> 
> 赞同：1
> 
> 时间：2013-02-07T18:17:21.790
> 
> 标签：java, hadoop, instantiation, slf4j

我正在使用 -libjars 命令在 hadoop 上运行我的 jar，并在我的驱动程序中设置了 .run() 和 ToolRunner。（这个程序没有 map/reduce，只有 PutMerges 文件到 HDFS）。当我使用 eclipse 导出 jar 时，程序运行良好。但是我需要只用我自己的 .class 文件构建 jar 并在执行期间导入 3rd 方库。

我的命令是：

```
hadoop jar myjar.jar package.classname -libjars mypath/logback-core-1.0.1.jar,logback-classic-1.0.1.jar,jul-to-slf4j-1.6.4.jar,jcl-over-slf4j-1.6.4.jar,slf4j-api-1.6.4.jar,log4j-over-slf4j-1.6.4.jar arg1 arg2 arg3 arg4 
```

错误是：

`Failed to instantiate SLF4J LoggerFactory Reported exception: java.lang.NoClassDefFoundError: ch/qos/logback/core/joran/spi/JoranException at org.slf4j.LoggerFactory.bind(LoggerFactory.java:128) at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:108) at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:279) at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:252) at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156) at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132) at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351) at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:150) at org.apache.hadoop.util.RunJar.main(RunJar.java:143) Caused by: java.lang.ClassNotFoundException: ch.qos.logback.core.joran.spi.JoranException at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ... 9 more Exception in thread "main" java.lang.NoClassDefFoundError: ch/qos/logback/core/joran/spi/JoranException at org.slf4j.LoggerFactory.bind(LoggerFactory.java:128) at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:108) at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:279) at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:252) at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156) at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132) at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351) at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:150) at org.apache.hadoop.util.RunJar.main(RunJar.java:143) Caused by: java.lang.ClassNotFoundException: ch.qos.logback.core.joran.spi.JoranException at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) ... 9 more`

我检查了 628 03-07-12 07:33 ch/qos/logback/core/joran/spi/JoranException.class 确实存在于我的 logback.core 中。有人可以建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:31:56.140

只是为了使您的代码正常工作，您可以尝试将 jar 复制到集群上所有节点的 HADOOP_HOME/lib/ 文件夹，然后重新启动集群。

# javascript - 在 Javascript 中访问 RadiobuttonList 控件

> ID：14758146
> 
> 赞同：0
> 
> 时间：2013-02-07T18:17:22.700
> 
> 标签：javascript, asp.net

我需要访问 .js 文件中的 ASP.net 单选按钮列表控件选项。我尝试了所有以前的链接，但它不起作用。

在这里，我希望将客户端 ID 传递给 js 函数并使用它来访问与该单选按钮列表关联的值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:53:25.280

根据 Win，将 ClientIDMode 设置为 Static

那么你需要知道这只是一个元素，选项也是里面的元素

所以现在你需要遍历嵌套元素，比如：

```
var myRadioButtonList = document.getElementById("<%=RadioButtonList1.ClientID%>");

var rblName = myRadioButtonList.name;

var radioOptionElements = document.getElementsByName(rblName);

// Then loop through the array of elements :
   for (var x = 0; x < radioOptionElements.length; x ++) 
    {
        alert(radioOptionElements[x].id);
        if (radioOptionElements[x].checked) 
            {
                alert("You checked " + radioOptionElements[x].id);
            }
    } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:20:33.200

将 ClientIDMode 设置为 Static，以便从 js 文件访问时 ID 不会更改。

```
<asp:RadioButtonList runat="server" ID="RadioButtonList1" ClientIDMode="Static"/> 
```

# html - 加载通用样式表

> ID：14758147
> 
> 赞同：1
> 
> 时间：2013-02-07T18:17:22.593
> 
> 标签：html, css, hyperlink, directory

如何从 home/ 加载相同的文件？

示例：我的索引从 css/stylesheet 加载很好，但是当我将它移动到一个文件夹（比如第 2 页）时，我如何仍然从主 css/stylesheet 位置加载该样式表而不必放置整个链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:18:28.380

假设您的 CSS 目录位于您的 Web 根目录中，而不是

```
css/stylesheet.css 
```

利用

```
/css/stylesheet.css 
```

这首先`/`基本上意味着“从网络根目录开始”。这样您就不必使用完整的 URL 来引用您的样式表。

# c - 链表程序在构建下一个节点时崩溃

> ID：14758148
> 
> 赞同：0
> 
> 时间：2013-02-07T18:17:23.707
> 
> 标签：c

我正在尝试创建程序来构建链接列表，但它在创建第二个错误时给了我一个分段错误。

[root@vm c_prog]# vi link1.c

```
#include <stdio.h>
#include <stdlib.h>

struct node {

        int x;
        struct node *next;
        };

int main () {

        int d;
        struct node *root;
        struct node *current;

        root = malloc(sizeof(struct node));

        current = root;

        printf ("Location of root is %p \n", root);

d = 1;
while (d>0){

        printf ("Enter the value of X: ");
        scanf ("%d", &current->x);

        printf ("value of x is stored\n");
        printf ("Location of current is %p \n", current);
        printf ("Value of X in 1st node: %d\n", current->x);

        current = current->next;

        printf ("Enter zero to terminate the loop: ");

        scanf ("%d",&d);

        }

} 
```

```
[root@vm c_prog]# ./a.out 
Location of root is 0xc34b010 
Enter the value of X: 3
value of x is stored
Location of current is 0xc34b010 
Value of X in 1st node: 3
Enter zero to terminate the loop: 5
Enter the value of X: 5
Segmentation fault
[root@vm c_prog]# 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:19:35.533

你永远不会初始化`next`所以这条线

```
current = current->next; 
```

将当前更改为指向未初始化的内存。您还需要`node`为循环的每次迭代分配一个新的。

以下代码应该接近工作。（它可以被简化；我试图让它尽可能接近你的代码。）

```
int main () {
    int d;
    struct node *root = NULL;
    struct node *current;
    d = 1;
    while (d>0){
        printf ("Enter the value of X: ");
        scanf ("%d", &d);
        if (root == NULL) {
            root = calloc(1, sizeof(struct node));
            current = root;
            printf ("Location of root is %p \n", root);
        }
        else {
            current->next = calloc(1, sizeof(struct node));
            current = current->next;
        }
        current->x = d;

        printf ("value of x is stored\n");
        printf ("Location of current is %p \n", current);
        printf ("Value of X in last node: %d\n", current->x);

        printf ("Enter zero to terminate the loop: ");

        scanf ("%d",&d);

        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:25:34.113

除了 simonc 所说的（这是正确的）之外，您可能还应该`next`在循环中设置一些内容。

# c# - 在 C# 中将字符串转换为枚举类型？

> ID：14758153
> 
> 赞同：1
> 
> 时间：2013-02-07T18:17:45.913
> 
> 标签：c#, .net, string, enums, type-conversion

我想保留组合框的当前选定值并在以后恢复它。为了管理组合框中的值，我有一个带有描述属性的枚举类型。description 属性在运行时成为组合框字符串值（其中之一），并且与其关联的枚举常量在内部用于编程目的。我从以下 Stack Overflow 帖子中获得了这项技术：

[c#:如何使用枚举来存储字符串常量？](https://stackoverflow.com/questions/1851567/chow-to-use-enum-for-storing-string-constants)

该帖子包含此博客帖子的评论之一中的链接：

[http://weblogs.asp.net/grantbarrington/archive/2009/01/19/enumhelper-getting-a-friendly-description-from-an-enum.aspx](http://weblogs.asp.net/grantbarrington/archive/2009/01/19/enumhelper-getting-a-friendly-description-from-an-enum.aspx)

执行枚举到字符串转换魔术的 GetDescription() 方法从该帖子复制到此处，并在参数列表中添加了“this”关键字，因此我可以将其用作枚举类型的扩展方法：

```
 public static string GetDescription(this Enum en)
    {
        Type type = en.GetType();

        MemberInfo[] memInfo = type.GetMember(en.ToString());

        if (memInfo != null && memInfo.Length > 0)
        {
            object[] attrs = memInfo[0].GetCustomAttributes(typeof(DescriptionAttribute), false);

            if (attrs != null && attrs.Length > 0)
            {
                return ((DescriptionAttribute)attrs[0]).Description;
            }
        }

        // Unable to find a description attribute for the enum.  Just return the
        //  value of the ToString() method.
        return en.ToString();
    } 
```

所以我已经完全充实了等式的一侧，并且效果很好。现在我想走另一条路。我想创建一个方法，该方法采用字符串并通过遍历特定枚举类型的描述属性并返回与匹配字符串的描述属性关联的枚举值来返回正确的枚举值。一个假设的方法声明将是：

```
public static Enum GetEnumValue(string str){} 
```

然而，该声明的一个直接问题是它不返回特定的枚举类型。我不确定如何正确声明和强制转换，以便返回正确的枚举类型。是否可以为 GetDescription() 方法创建这种补充方法，如果可以，我如何制作它以便它适用于任何特定的枚举类型？如果我能做到这一点，我将有一个方便的解决方案来解决在用于持久控制设置的字符串之间进行转换然后在以后恢复它们的常见问题，所有这些都由枚举支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:21:28.063

您缺少一条信息，即要查看的 Enum 信息。

目前您只传入一个字符串，而不是 Enum 的类型。

最简单的方法是使用泛型函数

请注意，此内容是即兴的，甚至可能无法编译。

```
public static TEnum GetEnumValue<TEnum>(string str)
    where TEnum : struct //enum is not valid here, unfortunately
{
    foreach (MemberInfo memInfo in typeof(TEnum).GetMembers())
    {
        object[] attrs = memInfo.GetCustomAttributes(typeof(DescriptionAttribute), false);

        if (attrs != null && attrs.Length > 0)
        {
            if (((DescriptionAttribute)attrs[0]).Description == str)
            {
                return (TEnum)(object)Enum.Parse(typeof(TEnum),memInfo.Name);
            }
        }
    }

    // Unable to find a description attribute for the enum.
    return (TEnum)(object)Enum.Parse(typeof(TEnum),str);
} 
```

Then you can use `typeof(TEnum)` to get the type object for the requested enumeration and do your logic.

Finally you can cast back to `TEnum` before returning, saving yourself the work on the calling side.

EDIT:

Added a **rough** example, untested.

# android - android 2.1 小部件中的 ScrollView 标签是否有效？

> ID：14758157
> 
> 赞同：2
> 
> 时间：2013-02-07T18:18:01.790
> 
> 标签：android

我正在使用 android 2.1 开发应用程序。为它创建一个小部件，我创建了一个具有文本视图布局、大字体的简单小部件。我想添加可滚动视图，所以如果文本超出框，用户可以滚动。但是每当我添加标签时。小工具不起作用，有什么解决办法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/background_light"
    android:layout_margin="5sp"
    >

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            >

            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"  
                android:text="slkjflasjdlkfjaslkjflksjf  saldjfslkjdflksf lskjdflkasjdlkfjsa lkfklsa dfsakldjfksajdfkljasdklfjlaksdfkla sdlf askj fljsalfk aslkjfklsdjf lksadkfjsadkljf lksadjkf sadlkjfksa jfkljs dklfj skldjf klsadjkflsa dklfj sadkl fklsadj fklasdj kfjsa dklfjsadkljfklasdjklfsjadfjklsadj;as;fdjaljfd;klajd;klfaklsdjfkas fljldfjasdfjiojsdkljfiowejfisdklfkldjf k kljsedjr ilejicjdisfkeriejfcsdijioerfid cvisdjis kl jiowejfliwejlwjfkjdlkfjsjr i  sijflessdf;lejfdejcjwejfij nlkefi ewijtioejifeiofrjiowejflie vilejeijioejfeojvolijsljfoisdjie ff iejieifiejfswjiflisijiejeifjeilfjelis fs ijfis efjsijfilesjflsjlfe sif j"
                android:textSize="15sp"
                />

        </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:20:39.557

[从文档](http://developer.android.com/guide/topics/appwidgets/index.html)

> 如果您熟悉布局，创建 App Widget 布局很简单。但是，您必须知道 App Widget 布局基于 RemoteViews，它不支持所有类型的布局或视图小部件。
> 
> RemoteViews 对象（以及相应的 App Widget）可以支持以下布局类：
> 
> ```
> FrameLayout
> LinearLayout
> RelativeLayout
> GridLayout 
> ```
> 
> 以及以下小部件类：
> 
> ```
> AnalogClock
> Button
> Chronometer
> ImageButton
> ImageView
> ProgressBar
> TextView
> ViewFlipper
> ListView
> GridView
> StackView
> AdapterViewFlipper 
> ```
> 
> **不支持这些类的后代。**
> 
> RemoteViews 还支持 ViewStub，它是一个不可见的、大小为零的 View，可用于在运行时懒惰地膨胀布局资源。

所以不，**小部件不支持 ScrollView。**

# php - 重写我网站上的网址以使其看起来更干净

> ID：14758159
> 
> 赞同：0
> 
> 时间：2013-02-07T18:18:09.860
> 
> 标签：php, mod-rewrite

好的，所以我有一个网站，我想将此网址 mywebsite.com/news1.php 更改为 mywebsite.com/news.php?id=news1

我很确定我需要使用 .htaccess 文件中的 Mod_Rewrite 来执行此操作。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:47:01.877

重写`mywebsite.com/news1.php`为`mywebsite.com/news.php?id=news1`，我建议：

```
RewriteRule ^([a-z0-9]+).php$ news.php?id=$1 
```

请注意，我没有包括`Options`或`RewriteEngine On`- 只有重写规则。相应地编辑您自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:20:34.673

只需创建`.htaccess`文件并填写以下内容

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On

RewriteBase /

RewriteRule ^news/([0-9]+)$  /news.php?id=$1 [QSA,L,NC] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:02:08.933

我不记得如何使用 .htaccess 执行此操作，但使用 php 代码非常简单：

你的`news.php`文件：

```
<?php
$id = $_GET['id'];
if ($id){include($id.".php");}
?> 
```

# css - CSS :first-child 选择器 IE7

> ID：14758161
> 
> 赞同：3
> 
> 时间：2013-02-07T18:18:21.337
> 
> 标签：css, internet-explorer-7, css-selectors

我有一点 IE7 问题。我有以下 CSS 代码，但它在 IE7 中不起作用。但是， .row [class*="span"] 和 :first-child 如果没有组合在一起，它们都可以工作。有没有办法做类似的事情或让它以某种方式工作？

```
.row [class*="span"]:first-child {
    margin-left: 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:40:51.840

如果第一个孩子*是* `[class*="span"]`，请检查它之前是否有 HTML 注释。如果有，[IE7 会错误地认为注释是第一个子](http://reference.sitepoint.com/css/pseudoclass-firstchild)元素，因此它不会匹配您要查找的元素。

如果您无法更改标记以删除评论，您可以使用我[在此处](https://stackoverflow.com/questions/2717480/css-selector-for-first-element-with-class/8539107#8539107)描述的覆盖技术解决它：

```
.row [class*="span"] {
    margin-left: 0;
}

.row [class*="span"] ~ [class*="span"] {
    margin-left: /* Reset the left margin for other elements */;
} 
```

如果您不知道将其重置为的边距值，您可以尝试添加另一个针对 IE7 行为的选择器`* + html`：

```
.row [class*="span"]:first-child, * + html .row :first-child + [class*="span"] {
    margin-left: 0;
} 
```

`:first-child + [class*="span"]`如果该元素恰好跟在 IE7 中的第一个子节点的一个注释节点之后，则匹配该元素。

# c# - c#正则表达式，只允许数字和字母不起作用

> ID：14758175
> 
> 赞同：5
> 
> 时间：2013-02-07T18:19:23.717
> 
> 标签：c#, regex, asp.net-mvc, expression

我正在使用 ASP.NET MVC。

我需要一个只允许数字和字母的正则表达式，而不是空格或 ",.;:~^" 之类的东西。简单的数字和字母。

另一件事：2个字符不能连续重复。

所以我可以有 123123 但不能有 1123456。

我做到了：

```
Regex ER1 = new Regex(@"(.)\\1", RegexOptions.None);

Regex ER2 = new Regex(@"[A-Z0-9]", RegexOptions.IgnoreCase); 
```

我无法用一种表达方式做到这一点，而且我仍然有一些角色通过。

这是我的整个测试代码：

```
class Program
{
    static void Main(string[] args)
    {
        string input = Console.ReadLine();

        Regex ER1 = new Regex(@"(.)\\1", RegexOptions.None);

        Regex ER2 = new Regex(@"[A-Z0-9]", RegexOptions.IgnoreCase);

        if (!ER1.IsMatch(input) && ER2.IsMatch(input))
            Console.WriteLine( "Casou");
        else
            Console.WriteLine( "Não casou");

            Console.ReadLine();
    }
} 
```

我发现这些表达方式非常复杂，我很乐意在这方面得到一些帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T18:23:39.997

让我们试试这个：

```
@"^(([0-9A-Z])(?!\2))*$" 
```

解释：

```
^               start of string
 (              group #1
   ([0-9A-Z])   a digit or a letter (group #2)
   (?!\2)      not followed by what is captured by second group ([0-9A-Z])
 )*             any number of these
$               end of string 
```

该`?!`组称为[负前瞻断言](http://www.regular-expressions.info/lookaround.html)。

（*LastCoder 的*表达式是等价的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:25:25.580

像这样的东西应该工作

```
@"^(?:([A-Z0-9])(?!\1))*$" 
```

# macos - 笔尖文件的可读替代品？

> ID：14758176
> 
> 赞同：0
> 
> 时间：2013-02-07T18:19:26.670
> 
> 标签：macos, cocoa, nib

对我来说，nib 文件的基本问题是它们不是人类可读的，因此很难判断文件中是否存在无意或不需要的更改，例如意外拖动视图。

是否有任何笔尖替代品可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:28:24.733

很可能不是，因为 nib 文件代表了 UI 的正确复杂设置。这永远不可能像散文那样是人类可读的。

另一种方法是以编程方式创建您的 ViewController。然后，这就像您可以实现的那样具有人类可读性。

# c++ - 用于 C/C++ 的压缩库能够处理数组中超过 32 位的元素

> ID：14758177
> 
> 赞同：4
> 
> 时间：2013-02-07T18:19:28.653
> 
> 标签：c++, compression, zip

我有一个问题，我需要压缩大约 6 GB `std::vector()`（其中 15 亿`float`s），到目前为止我使用的是 lz4，但它只处理s 的`int`计数`char`。由于我的向量中有 60 亿个字符，因此需要 33 位来表示，并且 LZ4 的压缩无法按我的需要进行。

从我在 zlib 库中看到的内容来看，它需要 int 以及压缩数据长度的输入。

我是否需要对我的数据进行分段，或者是否有一个框架能够处理超过 32 位的`char`s，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:29:50.680

使用 zlib，并将数组作为几个块传递。zlib 使用的 DEFLATE 算法的窗口大小约为 32 KB，并且它已经对压缩后的数据进行了缓冲，因此将数据作为多个 chunk 传入不会影响压缩效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:57:35.873

看看[XZ](http://tukaani.org)，它似乎可以处理非常大的尺寸。CLI 可执行文件本身是库的瘦包装器，因此这应该符合您的要求。

OTOH，*二进制*浮点流不应该压缩得那么好......

# spring - 使用spring aop时无法从json请求中获取参数

> ID：14758178
> 
> 赞同：1
> 
> 时间：2013-02-07T18:19:28.887
> 
> 标签：spring, spring-mvc, jackson, spring-aop

我正在使用 spring AOP 来检查权限

```
@Component
@Aspect
public class PermissionManager {
   @Around(value = "@annotation(requiredPermission) && args(id,..)", argNames = "id,requiredPermission")

public Object checkCanViewFile(ProceedingJoinPoint pjp, String id, RequiredPermission permission) throws Throwable {
  ...
}
} 
```

控制器

```
@RequiredPermission(RequiredPermission.OperationType.editProject)
@RequestMapping("/searchFile")
public @ResponseBody
WebFile search(String id, String word) throws TokenExpiredException, FetchException    {

...
} 
```

它适用于 spring mvc 测试，但不能在真实环境中运行。'id'的值为null，我怀疑spring AOP在jackson objectmapper之前得到这个方法，对吗？如何解决？

# c# - 如果不在 VSTO 项目的根目录中，Outlook VSTO 中的自定义功能区会“丢失”吗？

> ID：14758181
> 
> 赞同：0
> 
> 时间：2013-02-07T18:19:33.510
> 
> 标签：c#, vsto, outlook-addin, outlook-2010

我有一个简单的 VSTO Outlook 插件。我通过这篇[文章](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/10/01/building-and-deploying-an-outlook-2010-add-in-part-1-of-2.aspx)添加了一个空功能区，它可以工作。

和文件当前驻留在我`Ribbon.cs`的`Ribbon.xml`项目的根目录中，但如果我将它们移动到子文件夹（例如`AddIn\Ribbon`），则不会出现编译错误，但是当我运行 Outlook 时，插件的功能区丢失了。玩弄它，似乎 Ribbon.xml 必须保留在我项目的根目录中才能显示功能区。

我不明白这种行为；是否有手动引用插件功能区位置的设置或其他内容？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:13:59.377

我重新审视后发现：添加新的功能区 (XML) 项后，有一个生成的函数`GetCustomUI`使用 XML 文件的路径作为文件程序集资源中的查找键。

因此，在移动文件时，您应该将调用更改为`GetResourceText`：

```
 return GetResourceText("MyAddin.Ribbon.xml"); 
```

像这样：

```
 return GetResourceText("MyAddin.Ribbons.Ribbon.xml"); 
```

您需要这个，因为 xml 文件作为项目文件中的资源链接，该文件应具有如下行：

```
 <EmbeddedResource Include="Ribbons\Ribbon.xml" /> 
```

# java - maven构建执行树

> ID：14758184
> 
> 赞同：1
> 
> 时间：2013-02-07T18:19:38.013
> 
> 标签：java, maven, maven-3

有什么方法可以显示所有插件及其目标，这些插件将针对某些命令集执行。

我知道 maven 输出此类信息，但它被其他输出阻塞，提取该信息不是很方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:23:12.430

我找到了[plan-maven-plugin](https://github.com/skuro/plan-maven-plugin)。也许你应该试一试（我肯定会，明天）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:03:14.627

这里有几个命令可以提供帮助：

```
mvn help:describe -Dcmd=test-compile 
```

将向您展示在您指定的阶段（在本例中`test-compile`）调用了哪些插件。例如：

```
anew@Wintermute:example$ mvn help:describe -Dcmd=test-compile | grep test-compile
[INFO] 'test-compile' is a phase corresponding to this plugin:
* test-compile: org.apache.maven.plugins:maven-compiler-plugin:2.3.2:testCompile 
```

也有帮助的是：

```
mvn help:effective-pom 
```

不出所料，将向您展示 maven 用来执行的有效 pom。如果你有一个父 pom 并且不确定在特定阶段到底发生了什么，这可能是一个很好的方法。这是查看插件的目标已绑定到其`<executions/>`元素中的某个阶段的最佳方式。

```
mvn help:describe -Dplugin=groupId:artifactId:version 
```

会给你一些关于插件有什么功能的提示：

```
anew@Wintermute:example$ mvn help:describe -Dplugin=org.apache.maven.plugins:maven-deploy-plugin:2.5
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building example 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-help-plugin:2.1.1:describe (default-cli) @ pivot-api ---
[INFO] org.apache.maven.plugins:maven-deploy-plugin:2.5

Name: Maven Deploy Plugin
Description: Uploads the project artifacts to the internal remote repository.
Group Id: org.apache.maven.plugins
Artifact Id: maven-deploy-plugin
Version: 2.5
Goal Prefix: deploy

This plugin has 3 goals:

deploy:deploy
  Description: Deploys an artifact to remote repository.

deploy:deploy-file
  Description: Installs the artifact in the remote repository.

deploy:help
  Description: Display help information on maven-deploy-plugin.
    Call
      mvn deploy:help -Ddetail=true -Dgoal=<goal-name>
    to display parameter details.

For more information, run 'mvn help:describe [...] -Ddetail' 
```

# iphone - iPhone Simulator 是否模拟不同设备的内存 ram 空间？

> ID：14758188
> 
> 赞同：4
> 
> 时间：2013-02-07T18:19:53.287
> 
> 标签：iphone, ios, xcode, ios-simulator

我需要在 iPhone 3gs 上测试我的应用程序，但我没有真正的设备。我的应用程序包含几个需要大量使用 CPU 的功能。如果我通过将设备硬件设置为“iPhone”在模拟器上测试应用程序，它是否也模拟了 iPhone 3GS 的真实内存空间？我可以依赖 iPhone 模拟器吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T18:22:39.370

不。模拟器不是不受限制的，并且具有您计算机的 CPU/内存。

这里有一些更有趣的区别：[iPhone 设备与 iPhone 模拟器](https://stackoverflow.com/questions/380062/iphone-device-vs-iphone-simulator)

# php - 如何使用 $_FILES["file"]["size"]？

> ID：14758191
> 
> 赞同：24
> 
> 时间：2013-02-07T18:20:12.507
> 
> 标签：php

如何查看加载的文件是否小于 5MB？我在用

```
$ _FILES ["file"] ["size"] 
```

但我不知道如何设置5mb，因为据我了解，该值必须以字节表示。那么怎么办

```
$ _FILES ["file"] ["size"] <(5mb) 
```

谢谢

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-02-07T18:57:49.453

为了保持代码清晰，我经常将单位定义为常量：

```
define('KB', 1024);
define('MB', 1048576);
define('GB', 1073741824);
define('TB', 1099511627776); 
```

然后你可以简单地做你的条件

```
if ($_FILES['file']['size'] < 5*MB) 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-02-07T18:21:03.803

5MB -> 5 * 1024 * 1024 字节

或者...如果您是存储供应商，那么它实际上是 5 * 1000 * 1000。

# sql - SQL替换路径中的字符串

> ID：14758194
> 
> 赞同：0
> 
> 时间：2013-02-07T18:20:15.693
> 
> 标签：sql

如何用空白替换“测试”之前的所有内容？“测试”前面的子文件夹数量可能会有所不同。

C:\aaa\bbb\test\ccc\ddd

我希望它是：

测试\ccc\ddd

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:29:01.773

MSSQL 中的解决方案，如果您使用的是另一个 RDMBS，我确信它们具有与 PATINDEX/SUBSTRING 等效的功能。

```
DECLARE @Path VARCHAR(8000)
        ,@Find VARCHAR(128)

SET @Path = 'C:\aaa\bbb\test\ccc\ddd'
SET @Find = 'Test\'

SELECT SUBSTRING(@Path,PATINDEX('%'+@Find+'%',@Path),LEN(@Path)) 
```

[http://sqlfiddle.com/#!3/d41d8/8576](http://sqlfiddle.com/#!3/d41d8/8576)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:22:06.083

您可以在您的 String 中获取字符串 Text 的索引，并从那里获取一个子字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:30:03.993

这个查询应该在任何 SQL 中工作——如果需要，您可以添加语法修复。例如，在 Oracle 中，它将是 SUBSTR/INSTR。

```
SELECT SUBSTR(str, start_pos) final_str
FROM
(
SELECT 'C:\aaa\bbb\test\ccc\ddd' as str 
     , INSTR('C:\aaa\bbb\test\ccc\ddd', 'test', 1) as start_pos
  FROM dual
)
/

SQL>

FINAL_STR
-------------
test\ccc\ddd 
```

# css - 在 div 中垂直居中文本

> ID：14758195
> 
> 赞同：1
> 
> 时间：2013-02-07T18:20:16.923
> 
> 标签：css, positioning, centering

我在将下面 div 中的文本垂直居中时遇到了很多麻烦。如果有人可以帮助我完成此任务，我将不胜感激。

这是我尝试过的：

```
<div class="input-label" style="vertical-align:middle;">Toys:</div> 
```

这是我当前的标记：

```
<div class="input-label" >Toys:</div> 
```

CSS

```
.input-label
{
   background-color:#7a86d0; 
   height:30px; 
   float:left; 
   width:130px; 
   text-align:right; 
   font-weight:bold; 
   padding-right:10px; 
} 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:44:49.193

尝试添加`line-height: 30px;`到您的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:29:36.450

在 div 样式中，插入一个“display: table-cell;” 在垂直对齐之前。

# javascript - 如何删除字符串中最后一个逗号字符之后的所有内容？

> ID：14758196
> 
> 赞同：4
> 
> 时间：2013-02-07T18:20:18.570
> 
> 标签：javascript, regex

使用 JavaScript，如何使用正则表达式删除字符串中最后一个逗号字符之后的所有内容？

例如，如果我输入`Vettucaud, Thiruvananthapuram, Kerala, India`，最后一个词`India`应该被删除，输出需要像`Vettucaud, Thiruvananthapuram, Kerala`

正好相反

*   [如何在java中获取最后一个逗号后的字符串？](https://stackoverflow.com/questions/9515505/how-to-get-the-string-after-last-comma-in-java)
*   [获取“，”字符之后的所有字符](https://stackoverflow.com/questions/4058923/get-all-characters-after-character)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T18:24:33.783

简单的：

```
str = str.replace(/,[^,]+$/, "") 
```

# javascript - ExtJS MVC：应该在应用程序的要求中指定控制器吗？

> ID：14758201
> 
> 赞同：2
> 
> 时间：2013-02-07T18:20:35.320
> 
> 标签：javascript, extjs, extjs4.1, extjs-mvc

如果 Ext.application 具有以下控制器：

```
Ext.Loader.setConfig({enabled:true});

Ext.application({        
    name: 'MyApp',
    appFolder: 'app',

    controllers: [
        'Ctrl1',
        'Ctrl2'
    ],

    launch: function() { ... }
}); 
```

它是否还应该包括该`controllers`部分中的控制器`requires`，即添加

```
requires: [
    'MyApp.controller.Ctrl1',
    'MyApp.controller.Ctrl2'
], 
```

在上面的类中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T00:41:33.377

最简洁的答案是不。

长答案是`controllers`,`models`和configs`views`都`stores`转换为`requires`. 具有魔力的位在[Ext.app.Controller](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-cfg-models)类中：

```
onClassExtended: function(cls, data, hooks) {
    var Controller = Ext.app.Controller,
        className, namespace, onBeforeClassCreated, requires, proto, match;

    className  = Ext.getClassName(cls);
    namespace  = Ext.Loader.getPrefix(className) ||
                 ((match = className.match(/^(.*)\.controller\./)) && match[1]);

    if (namespace && namespace !== className) {
        onBeforeClassCreated = hooks.onBeforeCreated;
        requires = [];

        hooks.onBeforeCreated = function(cls, data) {
            proto = cls.prototype;

            Controller.processDependencies(proto, requires, namespace, 'model', data.models);
            Controller.processDependencies(proto, requires, namespace, 'view', data.views);
            Controller.processDependencies(proto, requires, namespace, 'store', data.stores);
            Controller.processDependencies(proto, requires, namespace, 'controller', data.controllers);

            // this is the line to look at!!!
            Ext.require(requires, Ext.Function.pass(onBeforeClassCreated, arguments, this));
        };
    }
}, 
```

您的应用程序只是一个`Ext.app.Application`继承自的类`Ext.app.Controller`；因此`controllers`配置也转换为`requires`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:01:02.570

不，这没有必要。`app.js`这是我现在正在使用的工作示例：

```
Ext.Loader.setConfig({enabled:true});
Ext.Loader.setPath('Ext.ux', '../extjs/examples/ux');

Ext.application({
    name: 'FPPP',

    autoCreateViewport: true,

    controllers: [
        'Main',
        'List',
        'Report'
    ]

}); 
```

还有[Sencha MVC 指南](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)

# xml - Xerces dtd 验证不起作用

> ID：14758204
> 
> 赞同：0
> 
> 时间：2013-02-07T18:20:43.737
> 
> 标签：xml, dtd, xerces

我有一个要进行 XML 验证的 DTD 数据。这是外部DTD：

```
<!-- root element. must be there, must contain only one users element -->
<!ELEMENT root (users)>
<!-- users element contains user elements, one or more but can't have no elements-->
<!ELEMENT users (user)+>
<!--user element will include simple text only, no sub elements -->
<!ELEMENT user (#PCDATA)> 
```

这是 users.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<users>
    <user>some data</user>
    <user>some data</user>
    <user>some data</user>
</users>
</root> 
```

创建解析器后，这是我要验证的内容：

```
Grammar* g= parser->loadGrammar("users.dtd",Grammar::DTDGrammarType,false);
parser->setValidationScheme(XercesDOMParser::Val_Auto); 
```

现在，如果我使用**Val_Auto**任何事情都会发生。没有任何验证，我正在使用不同的文件，它没有捕获任何东西。如果我切换到**Val_Always**，它总是会因上述文件而失败，输出“没有为元素'用户'找到声明”。如果我在 xml 文件的标头中设置 DTD，如下所示： < !DOCTYPE root SYSTEM "users.dtd" > 它工作得很好。当然，我不能在现实世界中使用它，因为我需要在内存中（我从网络获取信息）。我什至可以取消整个**loadGrammar**行，不会改变结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:06:47.567

好的。似乎 DTD 与 Xerces 配合得不是很好。但是，移动 xsd（更好的格式）并使用 catch 解决了这个问题。

# xpages - Outline 中的 Onclick 事件在页面打开时执行

> ID：14758208
> 
> 赞同：1
> 
> 时间：2013-02-07T18:20:52.930
> 
> 标签：xpages

我有一个扩展库大纲控件。我在大纲中有两个 basicLeafNodes。每个节点上的 onclick 事件都应该运行一些代码。问题是当页面打开时这两个 onClick 事件都在执行，但在您实际单击节点时似乎没有执行。

知道有什么问题吗？

```
<xe:outline id="outline1">

<xe:this.treeNodes>
        <xe:basicLeafNode label="Set Value 1">
            <xe:this.onClick><![CDATA[#{javascript:getComponent("inputText1").value = "123";}]]></xe:this.onClick>
        </xe:basicLeafNode>
        <xe:basicLeafNode label="Set Value2">
            <xe:this.onClick><![CDATA[#{javascript:getComponent("inputText2").value = "456";}]]></xe:this.onClick>
        </xe:basicLeafNode>
    </xe:this.treeNodes>

</xe:outline>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:br></xp:br>Value 1:&#160;
<xp:inputText id="inputText1"></xp:inputText>
<xp:br></xp:br>Value 2:&#160;
<xp:inputText id="inputText2"></xp:inputText> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:42:20.120

basicLeafNode 的 onClick 事件仅适用于客户端 JS。您需要使用每个 basicLeafNode 的 submitValue 属性，然后将 SSJS 添加到大纲控件的 onItemClick 事件中。然后，您可以使用 context.getSubmittedValue() 检查单击了哪个节点，然后采取相应措施：

```
<xe:outline id="outline1">
    <xe:this.treeNodes>
        <xe:basicLeafNode label="Set Value 1" submitValue="1"></xe:basicLeafNode>
        <xe:basicLeafNode label="Set Value2" submitValue="2"></xe:basicLeafNode>
    </xe:this.treeNodes>
    <xe:this.onItemClick><![CDATA[#{javascript:
        if (context.getSubmittedValue() == "1") {
            getComponent("inputText1").value = "123"
        } else if (context.getSubmittedValue() == "1") {
            getComponent("inputText2").value = "456"
        }
    }]]></xe:this.onItemClick>
</xe:outline> 
```

来自 XPages Extension Library 书（第 240 页）：

> onClick 属性允许开发人员执行一段客户端 JavaScript 代码，而 submit-Value 属性允许开发人员指定一个传递回服务器的值。该值是从包含树节点的控件的 onItemClick 事件中访问的。

# java - android - 动态切换文本视图中的字符串

> ID：14758209
> 
> 赞同：1
> 
> 时间：2013-02-07T18:20:52.667
> 
> 标签：java, android, string

我正在尝试使用要从我的 strings.xml 动态检索的各种字符串来切换 textview 的 android:text。当用户按下网格上的按钮时，它将返回一个唯一标识符。我想使用此标识符将字符串动态加载到 Pronoun textView 中。

```
gridView.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
      TextView Pronoun = (TextView) findViewById(R.id.Prounoun);
      chosen = ((TextView) v).getText();
      //Inserts the identifier of what button was pressed into the local string chosen".
      Pronoun.setText("R.string.Pronoun_" + chosen);
   }
} 
```

当按下按钮'a'时，'chosen'持有字母'a'，当将其加入字符串命名格式“Pronoun_”时，产生“Pronoun_a”。目的是在这个位置调用字符串。实际上，文本实际上是“R.string.Pronoun_a”，而不是检索 Pronoun_a 的实际字符串内容。如果按下按钮'b'，我希望'Pronoun_b'的字符串内容显示在textView中。我是 Java 新手，只是想重新创建我用另一种语言学到的技术。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:21:07.640

使用它（使用您的实际包名称）：

```
String resKey = "your.apps.package:string/Pronoun_"+chosen;
int resId = getResources().getIdentifier(resKey, null, null);
Pronoun.setText(resId); 
```

另请参阅[API 文档](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)。

注意：正如 AND_DEV 已经提到的，您必须使用`ActivityName.this.getResources()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:24:40.310

代替

`Pronoun.setText("R.string.Pronoun_" + chosen);`

试试下面的线

`Pronoun.setText(ActivityName.this.getString(R.string.Pronoun_) ++ chosen);`

它将在活动上下文中工作，但在 onclick 我认为你应该使用`ActivityName.this.` 你也可以使用`context`变量，如果你已经创建了。这里的 ActivityName 是您编写您的代码的活动名称。

# javascript - Dojo.js AMD 加载程序 - 类型错误：无法将未定义转换为对象

> ID：14758214
> 
> 赞同：1
> 
> 时间：2013-02-07T18:21:08.933
> 
> 标签：javascript, dojo, firebug, amd

我寻找重复的问题，但没有找到一个确切的问题。这与[Dojo require() 和 AMD (1.7)](https://stackoverflow.com/questions/9186021/dojo-require-and-amd-1-7)有关，但我会以问题的形式提出。问题是，为什么我会收到这个错误，为什么 dijit 在 firebug 中显示“3”？

## JSP 页面

```
<script type="text/javascript" src="<%= request.getContextPath() %>/js/dojoConfig.js"></script>
<script type="text/javascript"
src="http://xxxxxxxxxxxxx.com/dojo/1.7.2/dojo/dojo.js.uncompressed.js"></script>
<script type="text/javascript" src="<%= request.getContextPath() %>/js/reviewframe.js"></script> 
```

## dojoConfig.js

```
var dojoConfig = {
// Use the Asynchronous AMD loader.
// --------------------------------
async : true,
// Use debug.
// --------------------------------
isDebug : true,
// Parse the html on load for dojo rendered elements.
// Don't Parse on Load. I'm calling it manually in my main pageLoad.
// --------------------------------
parseOnLoad : false,
}; 
```

## reviewframe.js（我的“主要”）

```
require(
[ "dojo", "dijit", "dojo/parser", "js/XYDialog.js",
"dijit/layout/ContentPane", "dojox/image/LightboxNano", "dojo/ready",
"dojo/domReady!" ],
function(dojo, dijit, parser, XYDialog) { 
```

## XYDialog.js

```
define([ "dojo", "dijit", "dijit/form/Button", "dijit/TooltipDialog",
    "dijit/form/DropDownButton", "dijit/form/FilteringSelect" ], function(
    dojo, dijit) { 
```

我在 XYDialog.js 中的上述定义上设置了一个断点。我点击继续，我在控制台中收到此错误：

## 安慰

```
focus.js line 382
TypeError: can't convert undefined to object [Break On This Error]  ...attr] = typeof singleton[attr] == "function" ? lang.hitch(singleton, attr) : sin... 
```

如果我在 focus.js 中在那一行之前设置一个 Firebug 断点，我会看到 dijit 是数字 3。为什么？我以前在其他地方看到过这种情况，我需要的 javascript 或模块最终是数字 3。

**编辑：**天哪，我关闭了 Firefox 并加载了没有萤火虫的页面。有用！然后我打开了萤火虫，清除了所有断点，它又可以工作了。嘘。

**后续问题：** 萤火虫中的断点会破坏 AMD 加载程序吗？毕竟是异步的。您的断点可能会引入时间问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:32:27.563

这里有两个问题：

1.  您正在使用文件名而不是模块 ID (XYDialog.js) 加载 AMD 模块，因此它被视为非 AMD 模块并被加载。你应该把它放在一个逻辑包中，或者在你的配置中定义路径，例如：

    文件结构：

    ```
    /js/foo/XYDialog.js
    /js/dojo/dojo.js 
    ```

    代码：

    ```
    // reviewframe.js (My 'main')

    require(
    [ "dojo", "dijit", "dojo/parser", "foo/XYDialog", 
    ```

2.  神秘代码“3”通常是指一个不正确的包路径。我相信第一个问题，结合 Firebug，可能会不一致地给你这个错误。

[请参阅http://www.sitepen.com/blog/2012/10/31/debugging-dojo-common-error-messages/#incorrect-package-path](http://www.sitepen.com/blog/2012/10/31/debugging-dojo-common-error-messages/#incorrect-package-path)下的注释（一般来说，这篇文章是我们写的一篇会有所帮助的文章您确定使用 Dojo 和 AMD 时最常见错误消息的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:26:28.417

重新启动 Firefox 并清除 Firebug 中的断点。

# list - lisp 内列表元素的两个元素组合（不重复）

> ID：14758218
> 
> 赞同：1
> 
> 时间：2013-02-07T18:21:33.100
> 
> 标签：list, lisp, common-lisp, combinations

从lisp中的任何给定列表中，我想获得该列表元素的两个元素组合，而没有重复的组合（意思是（ab）=（ba），应该删除一个）

因此，例如，如果我有一个 (abcd) 列表，

我想得到 ((ab) (ac) (ad) (bc) (bd) (cd))

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:52:34.127

```
(defun combinations (list)
  (loop for (a1 . r1) on list
        nconc (loop for a2 in r1 collect (list a1 a2))))

CL-USER 172 > (combinations '(a b c d))
((A B) (A C) (A D) (B C) (B D) (C D)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:36:03.503

假设我正确理解你，我会使用`mapcar`和朋友。

```
(defun pair-with (elem lst)
  (mapcar (lambda (a) (list elem a)) lst))

(defun unique-pairs (lst)
  (mapcon (lambda (rest) (pair-with (car rest) (cdr rest)))
          (remove-duplicates lst))) 
```

那应该让你

```
CL-USER> (unique-pairs (list 1 2 3 4 5))
((1 2) (1 3) (1 4) (1 5) (2 3) (2 4) (2 5) (3 4) (3 5) (4 5))
CL-USER> (unique-pairs (list :a :b :c :a :b :d))
((:C :A) (:C :B) (:C :D) (:A :B) (:A :D) (:B :D)) 
```

如果你不害怕`loop`，你也可以把第二个写得稍微清楚一点

```
(defun unique-pairs (lst)
  (loop for (a . rest) on (remove-duplicates lst)
        append (pair-with a rest))) 
```

反而。我有理由确定`loop`s`append`指令比同名函数更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:20:16.377

原则上，这类似于 Rainer 的 Joswig 答案，只是它不使用循环。

```
(defun combinations (list)
  (mapcon (lambda (x) (mapcar (lambda (y) (list (car x) y)) (cdr x))) list)) 
```

让我对您的示例感到困惑的一件事是`(a a)`与您对所需结果的口头描述相匹配，但在结果示例中您已将其排除在外。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T18:39:53.353

方案解决：

```
(define (lol lst)
  (let outer ((lhs lst))
    (if (null? lhs)
        '()
        (let inner ((rhs (cdr lhs)))
          (if (null? rhs)
              (outer (cdr lhs))
              (cons (list (car lhs) (car rhs)) (inner (cdr rhs)))))))) 
```

以及相同的 Common Lisp 翻译：

```
(defun lol (list)
  (labels ((outer (lhs)
             (and lhs (labels ((inner (rhs)
                                 (if rhs
                                     (cons (list (car lhs) (car rhs))
                                           (inner (cdr rhs)))
                                     (outer (cdr lhs)))))
                        (inner (cdr lhs))))))
    (outer list))) 
```

抱歉，我不是 Common Lisper，所以我希望这不会太难看。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T19:03:14.793

这是我自己的初步回答。它可能不是完全有效，但它解决了问题。

```
(remove nil (let ((res))
             (dotimes (n (length test-list) res)
                (setq res
                     (append res
                        (let ((res2) (rest-list (remove (nth n test-list) test-list)))
                         (dotimes (m (length rest-list) res2)
                            (setq res2
                                 (append res2
                                   (list (if (< (nth n test-list) (nth m rest-list))
                                         (list (nth n test-list) (nth m rest-list))
                                          nil))))))))))) 
```

如果删除第 9 行的“if 语句”，则结果也将包含重复项，结果将是

```
((a b) (a c) (a d) (a a) (b a) (b c) (b d) (b b) 
 (c a) (c b) (c d) (c c) (d a) (d b) (d c) (d d)) 
```

# prolog - 在 Prolog 中遍历一个列表

> ID：14758219
> 
> 赞同：1
> 
> 时间：2013-02-07T18:21:35.007
> 
> 标签：prolog

我有一个这样的问题：找到一个列表中的所有元素，使得除它之外的所有元素都是奇数。

例如

```
?- find([20,1,2,3,4,5,6,7,8,10], L).
L = [20, 2, 4, 6] 
```

通常在其他语言中，我会遍历列表并检查条件，但在这种情况下我不知道如何在 Prolog 中“思考”。我应该如何处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:24:41.750

考虑一对头元素访问列表：

```
find([A,B|R], [A|T]) :-
   is_odd(B),
   ... etc etc 
```

您显然需要添加基本递归情况以及必须丢弃 A 的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:16:18.387

编辑：基于 CapelliCs 建议的更好解决方案（这使用`isodd`下面的谓词）：

```
% if N0 and N2 are odd, cut, add N1 to the result and recurse
ff([N0,N1,N2|T], [N1|R]) :- isodd(N0), isodd(N2), !, ff([N1,N2|T], R).
% for any other case where the list has at least three members, cut and recurse
ff([_,N1,N2|T], R) :- !, ff([N1,N2|T], R).
% this is reached if the list has less that three members - we're done
ff(_, []).

% append and prepend '1' to the list to deal with the edges, call ff.
find(L, R) :- append(L, [1], L1), ff([1|L], R). 
```

我的旧解决方案使用额外的参数跟踪前两个值：

```
% isodd(+N)
% helper predicate that succeds for odd numbers.
isodd(N) :- mod(N, 2) =:= 1.

% find(+I, +N1, +N2, +R, -L)
% find/5 is the predicate doing the actual work.
% I is the input list, N1 and N2 are the numbers before the current one,
% R is the intermediate result list and L the result.

% we're done if the input list is empty
find([], _, _, R, R) :- !.

% check if N0 and N2 are odd to see if N1 should be appended to the list.
% if yes, do a cut, append N1 to the result and recurse.
find([N0|T], N1, N2, R, L) :-
   isodd(N0), isodd(N2), !, 
   append(R, [N1], R1), find(T, N0, N1, R1, L).

% if N0 and N2 are not odd (and thus the cut in the previous clause isn't
% reached) just continue the recursion.
find([N0|T], N1, _, R, L) :- find(T, N0, N1, R, L).

% find(+I, -L)
% this predicate is the entry point - initialize the result list and the first
% values for N1 and N2, and append 1 to the input list so we don't need an extra
% predicate for dealing with the last item.
find(I, L) :- append(I, [1], I1), find(I1, 1, 0, [], L). 
```

# c# - 阶段的适当数据结构 - 枚举？

> ID：14758221
> 
> 赞同：0
> 
> 时间：2013-02-07T18:21:45.343
> 
> 标签：c#, asp.net-mvc-3, database-design, asp.net-mvc-4

我有两个课程：抽认卡和套装。抽认卡处于七个阶段之一 - 每个阶段都应该有一个 TimeSpan 属性。目标是在特定时间跨度后显示卡片，具体取决于卡片所在的阶段。

一套也处于这七个阶段之一 - 所有卡中最低的阶段。

这两个类目前都有一个“public int Stage”属性，但我觉得这并不理想。

就类/对象定义而言，对此进行建模的适当方法是什么？我正在使用 MVC4 EF CodeFirst，以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:42:09.490

状态机：[http](http://en.wikipedia.org/wiki/State_pattern) ://en.wikipedia.org/wiki/State_pattern 。

基本上，您有一个状态环（您的所有状态都实现一个接口）。然后你让你的状态转换器类实现一个“参与者”接口，如下所示：

```
// All stages should implement this
interface IStateRing
{

}

// Everything participating in the state ring should implement this
interface IStateRingParticipant
{
    void SetStage(IStateRing stage);
} 
```

您的参与者类的唯一工作是在状态告诉它时响应状态变化，如下所示：

```
class MyStageParticipant : IStateRingParticipant
{
    // Keep track of the current state.
    IStateRing currentStage;

    // This is called by the state when it's time to change
    public void SetStage(IStateRing stage)
    {
        throw new NotImplementedException();
    }
} 
```

请注意，它会跟踪它所处的状态，然后有一个由当前状态调用的函数 SetStage。接下来我们有我们的状态：

```
// The state handles the actual functionality, and when it's good and ready
// it commands the participant to change states.
class StateA : IStateRing
{
    // Keep track of the participant.
    IStateRingParticipant participant;

    // The constructor should know what object belongs to this state.
    // that is, which object is participating.
    public StateA(IStateRingParticipant participant)
    {
        this.participant = participant;
    }

    // We do all of our processing in this state.
    // Then when it's time we simply let go of the participant and 
    // instantiate a new state.
    public void GoodAndReady()
    {
        new StateB(participant);
    }
}

class StateB : IStateRing
{
    IStateRingParticipant participant;

    public StateB(IStateRingParticipant participant)
    {
        this.participant = participant;
    }
} 
```

请注意，构造函数的一部分是它接受参与者。状态管理所有实际处理，然后当它准备好并准备好时，它会实例化下一个状态（也保持当前状态），依此类推。

使用状态模式，您将所有功能路由到状态，然后让它们确定状态何时应该更改（通过实例化状态的新实例）。

# java - java.sql.SQLRecoverableException：关闭连接

> ID：14758223
> 
> 赞同：1
> 
> 时间：2013-02-07T18:21:46.910
> 
> 标签：java, hibernate, struts2, oracle11g

我正在使用 Hibernate 3.3 和 Oracle 11g 开发 Struts 2 框架。自 5 个月以来，我的网络项目运行良好。但最近我在一些空闲时间面临 java.sql.SQLRecoverableException: Closed Connection。我将解释下面的场景。我的 hibernate.cfg.xml 配置是

```
<property name="hibernate.current_session_context_class">
        thread
    </propert
<property name="connection.url">jdbc:oracle:thin:@localhost:1521:orcl</property>
<property name="connection.username">user</property>
<property name="connection.password">user</property>
<property name="connection.driver_class">
        oracle.jdbc.OracleDriver
    </property>
<property name="myeclipse.connection.profile">Oracle</property>
<property name="hibernate.connection.autoReconnect">true</property>
<property name="dialect"> org.hibernate.dialect.Oracle10gDialect </property> 
```

而我的 HibernateSessionFactory conf 是

```
private static String CONFIG_FILE_LOCATION = "/hibernate.cfg.xml";
private static final ThreadLocal<Session> threadLocal = new ThreadLocal<Session>();
private static Configuration configuration = new Configuration();
private static org.hibernate.SessionFactory sessionFactory;
private static String configFile = CONFIG_FILE_LOCATION;
static {
    try {
        configuration.configure(configFile);
        sessionFactory = configuration.buildSessionFactory();
    } catch (Exception e) {
        System.err
                .println("%%%% Error Creating SessionFactory %%%%");
        //e.printStackTrace();
    }
}
private HibernateSessionFactory() {
}
public static Session getSession() throws HibernateException {
    Session session = (Session) threadLocal.get();

    if (session == null || !session.isOpen()) {
        if (sessionFactory == null) {
            rebuildSessionFactory();
        }
        session = (sessionFactory != null) ? sessionFactory.openSession()
                : null;
        threadLocal.set(session);
    }

    return session;
}
public static void rebuildSessionFactory() {
    try {
        configuration.configure(configFile);
        sessionFactory = configuration.buildSessionFactory();
    } catch (Exception e) {
        System.err
                .println("%%%% Error Creating SessionFactory %%%%");
        //e.printStackTrace();
    }
}
public static void closeSession() throws HibernateException {
    Session session = (Session) threadLocal.get();
    threadLocal.set(null);

    if (session != null) {
        session.close();
    }
}
public static org.hibernate.SessionFactory getSessionFactory() {
    return sessionFactory;
}
public static void setConfigFile(String configFile) {
    HibernateSessionFactory.configFile = configFile;
    sessionFactory = null;
}
public static Configuration getConfiguration() {
    return configuration;
} 
```

然后在下面的代码运行时出现错误

```
session = HibernateSessionFactory.getSession();
Query query = session.createQuery(SQL_QUERY);
try {
                // session.connection().close();
                System.out.println("CLOSED :"
                        + session.connection().isClosed());
                if (session.connection().isClosed()) {
                    System.out.println("RECONNECTING.......");
                    session.reconnect();
                }
                System.out.println("CLOSED :"
                        + session.connection().isClosed());
            } catch (Exception e1) {

                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
try {
for (Iterator it = query.iterate(); it.hasNext();) {
                    chk = true;
                    ur = (EmagEnterpriseLogin) it.next();
} catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

当上述代码片段运行时，即使能够打开会话并成功创建查询，但在迭代查询时失败。第一次来

```
Caused By:java.sql.SQLRecoverableException: Closed Connection 
```

但是在第一次尝试这个错误之前，我捕获了 session.Connection.isClosed() 是错误的。但是在第一个错误之后继续出现 SQL State=null 并且从第二次我可以得到 session.Connection.isClosed() 是真的。然后重新连接执行，但仍然重复相同的错误。我也尝试重建 sessionfactory，也失败了。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:11:27.147

最后我发现我的问题的解决方案是使用第三方连接提供程序而不是使用 Hibernate Native 连接提供程序。我使用了 c3p0 Connection provider ，这也给了我一些问题，我也解决了。c3p0 的参考链接在这里.. [Hibernate c3p0 Connection NewPooledConnection close Exception](https://stackoverflow.com/questions/14847279/hibernate-c3p0-connection-newpooledconnection-close-exception)

# android - 带有参数化 IN (...) 子句的 Sqlite UPDATE

> ID：14758228
> 
> 赞同：1
> 
> 时间：2013-02-07T18:21:50.030
> 
> 标签：android, sqlite

在我的应用程序中，我正在使用 sqlite 数据库 - 我遇到了一个奇怪的问题。

我有一个看起来像这样的表：

```
_id   field1   field2   status
---   ------   ------   ------
 1    value    value    ...
 2    value    value    ...
... 
```

在一个地方，我需要更新一些行以将它们设置为另一种状态，所以我正在尝试

```
SQLiteDatabase db = getWritableDatabase();
ContentValues cv = new ContentValues();
cv.put("status", STATUS_SENT);
Set<Integer> ids = datasource.getCompletedIds();
String idparam = TextUtils.join(",", ids);
int cnt = db.update(TABLE_ORDERS, cv, "_id in (?)", new String[] { idparam });
Log.d("db", "updated " + cnt + " rows");
db.close(); 
```

但是没有任何更新 - 并`db.update`返回 0。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T19:02:45.480

我不乐意推荐*不*使用参数，但在这种情况下，它实际上比格式化所有这些`?`标记更容易（并且使用纯整数，同样安全）：

```
db.update(TABLE_ORDERS, cv, "_id IN (" + idparam + ")", null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:29:56.327

不幸的是，您必须为 Set 中的*每个*id列出*一个*插入字符... 一种流行的解决方法是编写一个快速实用程序来根据 Set 的大小添加适当数量的 s。`?` *`?`*

# ruby-on-rails - 导入数据后，Postgresql 转储不会更正数据库

> ID：14758230
> 
> 赞同：1
> 
> 时间：2013-02-07T18:21:52.307
> 
> 标签：ruby-on-rails, postgresql, amazon-ec2

我的目标是将 .sql 转储从我的服务器导入到 project_devel 数据库中。我遇到了一个令人沮丧的问题，当我从 .sql 文件加载数据时， -d [databasename] 选项似乎被忽略了。相反（您可以在输出中看到大约 12 行），.sql 文件可能会告诉导入器导入另一个数据库。关于为什么会发生这种情况以及如何强制数据进入我用 -d 指定的数据库的任何线索？

我最终通过将我在 database.yml 中的开发数据库名称更改为 project_prod 对其进行了创可贴，因为我的目标只是在本地加载生产数据并调试一些东西。

我用来导入的命令：

```
YeastFlakes:newproject new$ psql -h /tmp -d project_devel -f prod_dump_2013-02-07_09-00.sql 
```

输出：

```
You are now connected to database "postgres" as user "new".
    SET
    SET
    SET
    psql:prod_dump_2013-02-07_09-00.sql:15: ERROR:  role "project" already exists
    ALTER ROLE
    psql:prod_dump_2013-02-07_09-00.sql:17: ERROR:  role "postgres" already exists
    ALTER ROLE
    psql:prod_dump_2013-02-07_09-00.sql:19: ERROR:  role "replication" already exists
    ALTER ROLE
    psql:prod_dump_2013-02-07_09-00.sql:31: ERROR:  database "project_prod" already exists
    REVOKE
    REVOKE
    GRANT
    GRANT
    You are now connected to database "project_prod" as user "new".
    SET
    SET
    SET
    SET
    SET
    SET
    CREATE EXTENSION
    COMMENT
    SET
    SET
    SET
    psql:prod_dump_2013-02-07_09-00.sql:85: ERROR:  relation "active_admin_comments" already exists
    ALTER TABLE
    psql:prod_dump_2013-02-07_09-00.sql:99: ERROR:  relation "active_admin_comments_id_seq" already exists 
```

输出持续一段时间......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:29:09.283

[PostgreSQL 文档](http://www.postgresql.org/docs/9.2/static/backup-dump.html)似乎采用了一种非常简单的 SQL 转储/恢复方法；

```
Dump: 

$ pg_dump dbname > outfile

Restore:

$ psql dbname < infile 
```

有什么特别的理由不使用这种方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:38:26.547

它在您的输出顶部相当清楚地表明：

```
You are now connected to database "postgres" as user "new".
...
You are now connected to database "project_prod" as user "new". 
```

如果您查看备份的前二十行左右，我认为您没有看到任何看起来像“连接”命令的东西？可能将数据库“postgresql”作为用户“new”，然后另一个数据库“project_prod”再次作为用户“new”？

哦 - 如果您不打算真正查看文件内部，那么将其作为原始 SQL 转储是没有意义的。不妨使用压缩的“自定义”格式，并为您提供使用 pg_restore 恢复单个/选定元素的选项。有关详细信息，请参阅广泛而详细的手册。

# html - IE7 底部显示的有序列表编号

> ID：14758234
> 
> 赞同：0
> 
> 时间：2013-02-07T18:22:05.517
> 
> 标签：html, css, layout, internet-explorer-7

我有一个带有有序列表的页面，它在除 IE7 之外的所有浏览器中都可以正常渲染。在 IE7 中，列表编号显示在`<li>`; 实际上该列表仅包含一个`<textarea>`.

这是代码的样子，在 IE7 中查看可以看到每个`<li>`.

```
<ol style="padding-left:25px;">
<li style="margin-bottom:10px;"><textarea name="" id="" cols="5" style="width:400px; min-height:100px;"></textarea></li>
<li style="margin-bottom:10px;"><textarea name="" id="" cols="5" style="width:400px; min-height:100px;"></textarea></li>
<li style="margin-bottom:10px;"><textarea name="" id="" cols="5" style="width:400px; min-height:100px;"></textarea></li>
<li style="margin-bottom:10px;"><textarea name="" id="" cols="5" style="width:400px; min-height:100px;"></textarea></li>
</ol> 
```

请参阅 JS Fiddle .. [http://jsfiddle.net/GFRBZ/2/](http://jsfiddle.net/GFRBZ/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:02:07.453

尝试`textarea { vertical-align:text-top; }`

# php - 在 Magento 中保存订单之前删除外国重音字符

> ID：14758236
> 
> 赞同：0
> 
> 时间：2013-02-07T18:22:10.530
> 
> 标签：php, magento

我有一个问题，我在 Magento 中的订单有时会有送货和账单地址以及带有外国口音的名称，例如 àòèù。在将订单保存到 Magento 之前，我想将它们转换为英文字母 aoeu。

我有它的 php 代码，这是一个函数

```
public function removeAccents($str)
{
    $a = array('À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'ß', 'à', 'á', 'â', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'ÿ', 'A', 'a', 'A', 'a', 'A', 'a', 'C', 'c', 'C', 'c', 'C', 'c', 'C', 'c', 'D', 'd', 'Ð', 'd', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'G', 'g', 'G', 'g', 'G', 'g', 'G', 'g', 'H', 'h', 'H', 'h', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', '?', '?', 'J', 'j', 'K', 'k', 'L', 'l', 'L', 'l', 'L', 'l', '?', '?', 'L', 'l', 'N', 'n', 'N', 'n', 'N', 'n', '?', 'O', 'o', 'O', 'o', 'O', 'o', 'Œ', 'œ', 'R', 'r', 'R', 'r', 'R', 'r', 'S', 's', 'S', 's', 'S', 's', 'Š', 'š', 'T', 't', 'T', 't', 'T', 't', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'W', 'w', 'Y', 'y', 'Ÿ', 'Z', 'z', 'Z', 'z', 'Ž', 'ž', '?', 'ƒ', 'O', 'o', 'U', 'u', 'A', 'a', 'I', 'i', 'O', 'o', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', '?', '?', '?', '?', '?', '?');
    $b = array('A', 'A', 'A', 'A', 'A', 'A', 'AE', 'C', 'E', 'E', 'E', 'E', 'I', 'I', 'I', 'I', 'D', 'N', 'O', 'O', 'O', 'O', 'O', 'O', 'U', 'U', 'U', 'U', 'Y', 's', 'a', 'a', 'a', 'a', 'a', 'a', 'ae', 'c', 'e', 'e', 'e', 'e', 'i', 'i', 'i', 'i', 'n', 'o', 'o', 'o', 'o', 'o', 'o', 'u', 'u', 'u', 'u', 'y', 'y', 'A', 'a', 'A', 'a', 'A', 'a', 'C', 'c', 'C', 'c', 'C', 'c', 'C', 'c', 'D', 'd', 'D', 'd', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'G', 'g', 'G', 'g', 'G', 'g', 'G', 'g', 'H', 'h', 'H', 'h', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'IJ', 'ij', 'J', 'j', 'K', 'k', 'L', 'l', 'L', 'l', 'L', 'l', 'L', 'l', 'l', 'l', 'N', 'n', 'N', 'n', 'N', 'n', 'n', 'O', 'o', 'O', 'o', 'O', 'o', 'OE', 'oe', 'R', 'r', 'R', 'r', 'R', 'r', 'S', 's', 'S', 's', 'S', 's', 'S', 's', 'T', 't', 'T', 't', 'T', 't', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'W', 'w', 'Y', 'y', 'Y', 'Z', 'z', 'Z', 'z', 'Z', 'z', 's', 'f', 'O', 'o', 'U', 'u', 'A', 'a', 'I', 'i', 'O', 'o', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'A', 'a', 'AE', 'ae', 'O', 'o');
    return str_replace($a, $b, $str);
} 
```

我在 OnepageController saveShippingAction 方法中使用这个函数，比如

```
$data['street'][0] = removeAccents($data['street'][0]);
$data['street'][1] = removeAccents($data['street'][1]);
$data['city'] = removeAccents($data['city']);
$data['city'] = "test";
$data['region'] = removeAccents($data['region']); 
```

在保存送货地址之前。

我的主题中已经有一个 OnepageController，但它有一个不在核心 Mage 控制器中的功能。由于我在这里修改了核心 Mage 控制器，因此仅以某种方式复制功能 saveShippingAction 似乎不起作用，并且控制转到核心 saveShippingAction 功能。

我还尝试通过添加前端属性来修改我的 config.xml，但它似乎不起作用。我不知道是否有更简单的方法来实现我想要的（比如将 etc/config.xml 中的 UTF-8 更改为 Latin-1 ISO？）。

我希望这个论坛的人能对这个问题以及如何解决它有所了解！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:18:13.247

正如评论海报所建议的那样，保留地址原始字符是有意义的。但如果你**真的**必须这样做，最好通过创建一个观察者来捕获`sales_quote_address_before_save`事件。

在观察者函数中，您可以通过调用访问地址模型

```
public function convertAddressChars(Varien_Event_Observer $observer) 
{ 
    $address = $observer->getEvent()->getObject();
    /**
    * Perform necessary manipulations, e.g.
    * $address->setData('city', removeAccents($address->getData('city'));
    */
} 
```

但同样，未能在地址数据中保留重音符号可能会导致订单无法送达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:48:48.223

这实际上是一个常见问题 - 一些运输/送货公司无法应对太多的变音符号等。

您可能想尝试的另一种方法是在前端 javascript 中整理客户地址详细信息。当我尝试这个时，我没有代码可供使用，但是它很简单。您可以通过两种方式进行 - 收听“onblur”事件并在客户填写详细信息时整理文本，或者您可以在提交每个部分以组成订单时进行。

抱歉，这只是一种方法而不是代码，如果您确实采取了这条路线，我也许可以为您挖掘一些东西...

# php - 在按钮事件监听器上设置变量的值

> ID：14758238
> 
> 赞同：0
> 
> 时间：2013-02-07T18:22:21.290
> 
> 标签：php, javascript, jquery

我希望在按钮事件侦听器上设置名为 button_name 的变量的值，并将其作为 REQUEST 参数在 URL 中发送。但是发生了什么主机变量是在页面加载时设置的，并且不采用更新变量的值。知道如何动态设置变量的值并将其作为 REQUEST 参数发送吗？

```
var button_name;

 $.Settings(
 {  
    host : 'http://my_server_Address/abc.php?filename='+button_name,
 })

 function name_setter(name)
{
button_name=name;
}

<input type='button' onclick="name_setter('click_me')" value='click_me'/> 
```

如果您认为可以通过其他方式完成，请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:34:24.273

当您调用`$.Settings`时，`host`字符串正在被评估。那时`button_name`是`undefined`。

稍后更改`button_name`变量不会有任何影响，因为字符串已经被评估。

检查`host`参数是否可以接受一个函数而不仅仅是一个字符串。

# python - TypeError：“浮动”对象没有属性“__getitem__”

> ID：14758239
> 
> 赞同：0
> 
> 时间：2013-02-07T18:22:20.960
> 
> 标签：python, sqlite

我使用以下代码在系统中进行预订，但它返回错误：

```
conn = sqlite3.connect('SADS.db')
cur = conn.cursor()
choice = raw_input("What day would you like to book seats on? F/S : ")
if choice == "F":
    bookseats = [0,1]
    print"What seats would you like to book?"
    bookseats[0] = raw_input("Choice : ")
    bookseats[1] = raw_input("What is their user ID? : ")
    cur.execute("SELECT * FROM seats WHERE Booked='N'")
    rows = cur.fetchone()
    for row in rows:
        if row == None:
            break
        elif row[1] == bookseats[0] and row[4] == "N" and row[3] == "F":
            print "Seat Number:" , row[1] ,"Is now booked!"
            cur.execute("UPDATE seats SET Booked =N AND CustID=?", (bookseats[0])) 
```

错误：

```
TypeError: 'float' object has no attribute '__getitem__' 
```

我真的很困惑错误是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:26:28.987

您正在遍历 的结果`rows = cur.fetchone()`，它只检索一行。删除该行并直接在光标上循环：

```
cur.execute("SELECT * FROM seats WHERE Booked='N'")
for row in cur: 
```

您不需要测试`row == None`任何一个，也不需要测试`Booked`列是否等于`N`。将循环简化为：

```
cur.execute("SELECT * FROM seats WHERE Booked='N' AND CustID=?", (bookseats[0],))
row = cur.fetchone()
if row is not None and row[3] == "F":
    print "Seat Number:" , row[1] ,"Is now booked!"
    cur.execute("UPDATE seats SET Booked =N AND CustID=?", (bookseats[0])) 
```

您可以只向数据库询问与您的`bookseats[0]`列匹配的行，以及第三列设置为的位置`F`。您没有向我们展示您的架构，因此很难推荐如何更新您的查询。

您的`UPDATE`查询不正确，您的意思可能是：

```
cur.execute("UPDATE seats SET Booked='Y' WHERE CustID=?", (bookseats[0],)) 
```

反而。

您的 SQL 查询和更新看起来很可疑；在不知道完整架构的情况下，看起来好像您将座位号和客户号混合在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:27:15.540

`fetchone`不返回行列表，而只返回一行，所以这是不正确的：

```
rows = cur.fetchone()
for row in rows: 
```

改为：

```
row = cur.fetchone() 
```

# javascript - AngularJS 在指令中继承范围的最佳实践

> ID：14758240
> 
> 赞同：4
> 
> 时间：2013-02-07T18:22:26.087
> 
> 标签：javascript, angularjs

从 Directives 文档中它说以这两种方式继承范围：

> @ 或 @attr - 将本地范围属性绑定到 DOM 属性的值。结果始终是字符串，因为 DOM 属性是字符串。如果未指定 attr 名称，则假定属性名称与本地名称相同。给定范围的小部件定义：{ localName:'@myAttr'}，然后小部件范围属性 localName 将反映 hello {{name}} 的插值。随着 name 属性的变化，小部件范围上的 localName 属性也会发生变化。该名称是从父范围（不是组件范围）读取的。
> 
> = 或 =attr - 在本地范围属性和通过 attr 属性值定义的 name 的父范围属性之间建立双向绑定。如果未指定 attr 名称，则假定属性名称与本地名称相同。给定范围的widget定义：{localModel:'=myAttr'}，那么widget范围属性localModel将在父范围上反映parentModel的值。对 parentModel 的任何更改都将反映在 localModel 中，而对 localModel 的任何更改都将反映在 parentModel 中。

考虑到我想传递 elementId，它只是一个 id，我可以通过 =elementId 或 @elementId 传递它。

现在这两者中的哪一个被认为是最佳实践？如果我使用`@`and 因此属性，它会从 DOM 中获取值，这比直接获取值要慢吗？

我对么？有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T20:36:47.027

*   如果指令需要更改值，请使用 = 来获得双向绑定。
*   如果您想让其他阅读您的代码的人清楚您只使用单向绑定，请使用 @。
*   如果您需要同步访问链接函数中的值，请使用 =（请参阅此处有关 @ 和 $observe 的异步行为的注释[）](https://github.com/angular/angular.js/wiki/Understanding-Directives)。

对于您的情况，@ 似乎是最好的。（不过，如何在 HTML 元素中使用指令和 elementID 的示例会很有帮助。）

我不知道哪个更慢/更快。

另请参阅[AngularJS指令范围内的'@'和'='有什么区别？](https://stackoverflow.com/questions/14050195/what-is-the-difference-between-and-in-directive-scope)

# r - 子集行 + 上下文

> ID：14758243
> 
> 赞同：1
> 
> 时间：2013-02-07T18:22:34.773
> 
> 标签：r, subset

我还没有找到一种简单的方法来在我想要选择的行周围包含一些上下文（n 相邻行）。
我或多或少地试图镜像 grep 的 -C 选项来选择 data.frame 的某些行。

前任：

```
a= data.frame(seq(1:100))  
b = c(50, 60, 61) 
```

假设我想要在 b 中索引的行周围有 2 行的上下文；所需的输出应该是具有行 48、49、50、51、52、58、59、60、61、62、63 的数据框子集

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:27:20.610

你可以做这样的事情，但可能有一种更优雅的方法来计算索引：

```
a= data.frame(seq(1:100))  
b = c(50, 60, 61)
context <- 2
indices <- as.vector(sapply(b, function(v) {return ((v-context):(v+context))}))
a[indices,] 
```

这使 ：

```
 [1] 48 49 50 51 52 58 59 60 61 62 59 60 61 62 63 
```

**编辑：**正如@flodel 指出的那样，如果索引可能重叠，您必须添加以下行：

```
indices <- sort(unique(indices)) 
```

# xml - 如何确定 xml 是否包含两个或多个具有 xsl 和 Xpath 的相同属性名称？

> ID：14758245
> 
> 赞同：2
> 
> 时间：2013-02-07T18:22:36.233
> 
> 标签：xml, xslt, xpath

我是 xsl 和路径的初学者。我想找到一种方法如何使用 xsl 和路径完成以下操作：

1.  检查是否存在具有相同值的 ID 属性（例如 001 和 001）
2.  如果有，将文本打印到 html 页面
3.  如果没有（换句话说，如果所有属性名称都是唯一的），则将另一个文本打印到 html 页面。

我的xml如下：

```
 <shop>

  <product>
    <cookie ID="001">
       <price>2</price>
    </cookie>
  </product>

  <product>
    <bread ID="002">
       <price>5</price>
    </bread>
  </product>

  <product>
    <milk ID="003">
       <price>2</price>
    </milk>
  </product>

</shop> 
```

我的想法是使用这样的东西：

```
<xsl:if test="count(distinct-values(@ID*) < count(//product)">
    <p>ID values are not unique!</p>
</xsl:if> 
```

如果不同的 ID 值比产品少，请写一个文本“ID 值不是唯一的”

这显然是行不通的。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:34:24.663

根据项目总数和不同项目总数检查条件：`count(distinct-values(//@ID)) = count(//@ID)`正如理查德指出的那样，`distinct-values`仅 XPath 2.0，您使用的是 1.0 还是 2.0？

另外要清楚一点， using`//`将从根开始并查看该条件的所有节点，因此如果您只想检查`@ID`内的节点`<shop>`，请使用`//shop/@ID`

如果您使用的是 1.0，您可能会知道由于错误明确告诉您`distinct-values`无法找到该函数，但您可以在 1.0 中使用它以防万一：

**XPath 1.0 解决方案：**

```
boolean(//shop/product[./node()/@ID = preceding-sibling::product/node()/@ID or ./node()/@ID = following-sibling::product/node()/@ID]) 
```

在第一个中，我没有意识到节点名称发生了变化，那是我的错。只需将此条件替换为您当前的条件，如下所示：

```
<xsl:if test="boolean(//shop/product[./node()/@ID = preceding-sibling::product/node()/@ID or ./node()/@ID = following-sibling::product/node()/@ID] )">
    <p>ID values are not unique!</p>
</xsl:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:33:01.763

尝试`distinct-values(//@ID)`

另外，我认为 distict-values 仅在 XPath 2.0 中可用。

# django - 具有多表继承的父类上的Django post_save信号

> ID：14758250
> 
> 赞同：6
> 
> 时间：2013-02-07T18:22:43.783
> 
> 标签：django, django-models, multi-table-inheritance

在 Django 中，如果您有使用多表继承的模型，并且您为父类上的 post_save 信号定义了接收器，那么在保存子类的实例时是否会调用该接收器函数？

[借用另一个问题](https://stackoverflow.com/questions/2604800)的例子：

```
class Animal(models.Model):
    category = models.CharField(max_length=20)

class Dog(Animal):
    color = models.CharField(max_length=10)

def echo_category(sender, **kwargs):
    print "category: '%s'" % kwargs['instance'].category

post_save.connect(echo_category, sender=Animal) 
```

如果我做：

```
>>> dog = Dog.objects.get(...)
>>> dog.category = "canine"
>>> dog.save() 
```

会`echo_category`调用接收函数吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-08T06:13:25.187

```
post_save.connect(my_handler, ParentClass)
# connect all subclasses of base content item too
for subclass in ParentClass.__subclasses__():
    post_save.connect(my_handler, subclass) 
```

祝你今天过得愉快！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:44:51.300

查看： [https](https://code.djangoproject.com/ticket/9318) ://code.djangoproject.com/ticket/9318 似乎大多数将信号传播到子类中的超级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:44:25.373

不，它不会被调用。请参阅Django 跟踪中的[#9318](https://code.djangoproject.com/ticket/9318)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-25T19:37:09.897

我设法让继承的信号接收器与`@receiver`装饰器一起工作。[查看相关的 Django 文档](https://docs.djangoproject.com/en/2.2/topics/signals/#connecting-to-signals-sent-by-specific-senders)

```
from django.db import models
from django.db.models.signals import post_save
from django.dispatch import receiver

class Animal(models.Model):
    category = models.CharField(max_length=20)

    @receiver(post_save)
    def echo_category(sender, **kwargs):
        print ("category: '%s'" % kwargs['instance'].category)

class Dog(Animal):
    color = models.CharField(max_length=10) 
```

此解决方案在**Python 3.6.8 Django 2.2中有效**

当我这样做时

```
>>> from myapp.models import Dog
>>> dog = Dog()
>>> dog.category = "canine"
>>> dog.save()
category: 'canine'
>>> 
```

没问题。一切似乎都在外壳上工作。

* * *

有点不相关，但是当我通过管理面板编辑模型时，它被调用了两次，所以我通过检查`'created'`kwarg 来过滤它们。在一个调用中它是假的，另一个是真的，所以我只是放入了一个简单的 if 块。该解决方法的[功劳归功于 Pratik Mandrekar](https://stackoverflow.com/users/514919/pratik-mandrekar)和[他的回答](https://stackoverflow.com/a/12013253/4637870)：

```
from django.db import models
from django.db.models.signals import post_save
from django.dispatch import receiver

class Animal(models.Model):
    category = models.CharField(max_length=20)

    @receiver(post_save)
    def echo_category(sender, **kwargs):
        if not kwargs.get('created'):
            print ("category: '%s'" % kwargs['instance'].category)

class Dog(Animal):
    color = models.CharField(max_length=10) 
```

# php - 插入数据库后重命名图片名称

> ID：14758252
> 
> 赞同：0
> 
> 时间：2013-02-07T18:23:03.757
> 
> 标签：php, mysql

谢谢你的帮助。

我写了一个脚本，它从外部 url 下载图片并写入服务器。我使用 mysql 数据库来调用图像目标。为此，我必须遵循以下顺序：

1.  从 url 下载图片写入我的文件夹
2.  将目标写入我的数据库
3.  用 mysql_insert_id( $link ) 取最后一个 id；
4.  重命名图片。（我不知道如何使用 rename()）

这是我的代码

```
<?php
$source_pic = $arr['thumbnail_url']; \\ comes from a API
        $destination_pic =   '/var/www/vhosts/domain.com/domain.com/Uploads/thumbnails/'.uniqid($tag_ponter).'.jpg';
        $max_width = 460;
        $max_height = 345;

        $what = getimagesize($source_pic);

        switch(strtolower($what['mime']))
        {
            case 'image/png':
                $src = imagecreatefrompng($source_pic);
                break;
            case 'image/jpeg':
                $src = imagecreatefromjpeg($source_pic);
                break;
            case 'image/gif':
                $src = imagecreatefromgif($source_pic);
                break;
            default: die();
        }

        list($width,$height)=getimagesize($source_pic);

        $x_ratio = $max_width / $width;
        $y_ratio = $max_height / $height;

        if( ($width <= $max_width) && ($height <= $max_height) ){
            $tn_width = $width;
            $tn_height = $height;
        }elseif (($x_ratio * $height) < $max_height){
            $tn_height = ceil($x_ratio * $height);
            $tn_width = $max_width;
        }else{
            $tn_width = ceil($y_ratio * $width);
            $tn_height = $max_height;
        }

        $tmp=imagecreatetruecolor($tn_width,$tn_height);
        imagecopyresampled($tmp,$src,0,0,0,0,$tn_width, $tn_height,$width,$height);

        imagejpeg($tmp,$destination_pic,100);
        imagedestroy($src);
        imagedestroy($tmp);

        $thumbnail = '/Uploads/thumbnails/'.$tag_pointer.'.jpg';

        //Write into Database
    $values[] = "(NULL,'" . $GroupID . "','" . $UserID . "','" . $Title . "', '". $Description ."', '" . $tag_pointer . "','" . $arr['url'] . "', '". $arr['provider_name'] ."', '".$Text."', '". $arr['type'] ."', '" . $thumbnail . "', '" . $arr['html'] . "', NOW(), '0', '" . getRealIP() . "','1', '0','0')";
    $insert = mysql_query("INSERT INTO contents( ContentID, CatID, UserID, Title, Description, Tag, Link, Provider, Text, Type, Thumbnail, Html, WriteTime, Comments, WriterIP, Active, TotalVotes, VoteSum ) 
                             VALUES  ".implode(',', $values)."");

    $ContentID = mysql_insert_id( $link );
 ?> 
```

如何重命名文件？这是正确的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:29:22.153

我不知道您是要重命名存储在数据库中的内容，还是要重命名文件系统上的实际文件，所以我将向您展示如何做到这两个：

**在文件系统上重命名**

您可以使用重命名功能：

```
rename("/path/OLD_FILE.png", "/path/NEW_RENAME_FILE.png"); 
```

*或者*

以下代码负责保存到文件系统：

```
imagejpeg($tmp,$destination_pic,100); 
```

注意到 $destination_pic 了吗？这是您的文件将被存储的地方，包括文件名。因此，您需要确保 $destination_pic 定义如下：

```
$destination_pic =   '/some/path/'. $YOUR_RENAMED_FILE .'.jpg'; 
```

***在数据库中重命名***

我假设*标题*是数据库中文件的名称？在这种情况下，您需要运行更新查询来更改它。

```
UPDATE your_table SET TITLE='$RENAMED_TITLE' 
```

# iphone - iphone 更新分发许可证和配置

> ID：14758256
> 
> 赞同：2
> 
> 时间：2013-02-07T18:23:18.097
> 
> 标签：iphone, certificate, key, distribution, provisioning

我有一个分发证书，下周到期……然后我今天更新了它。

我是否必须构建另一个配置文件并将其安装在使用“旧分发证书”配置的所有设备上？

或者没有什么可做的，它在更新证书后自动？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:25:04.733

是的，您必须重建，旧配置下的应用程序将过期并且无法再打开...您必须在新证书下发布新版本

# kendo-ui - 通过 Kendo 将图像控件添加到工具栏

> ID：14758260
> 
> 赞同：0
> 
> 时间：2013-02-07T18:23:45.267
> 
> 标签：kendo-ui

我想在顶部工具栏的右上角添加一些名为更新、删除和添加列的按钮状图像（单击时将处理下面的数据）。同样，这些图像会在点击时调用事件。

这是最好的方法吗？

这会通过模板完成吗？不太确定我是否理解这些。模板是否存在其他依赖项？

```
$("#grid").kendoGrid({
     columns: [{field: "patientName", title: "Patient Name"},
               {field: "MRN", title: "MRN"},
               {field: "account", title: "Account#"},
               {field: "dateOfBirth", title: "Date of Birth"}, 
               {field: "room", title: "Room"},
               {field: "bed", title: "Bed"},
               {field: "admitDate", title: "Admit Date" }],

     //toolbar: [
     //{"name": "create"}, 
     // {"name": "save"}, 
     //  {"name": "cancel"}
     // ],

     dataSource: {
       data:people
     },

     height:300,
     scrollable:true,
     pageable: true,
     pageSize: 2,
     sortable: true                
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:09:23.263

您可以使用[`toolbar.template`](http://docs.kendoui.com/api/web/grid#toolbartemplate-string)并执行以下操作：

```
$("#grid").kendoGrid({
    columns   : [
        {field: "patientName", title: "Patient Name"},
        {field: "MRN", title: "MRN"},
        {field: "account", title: "Account#"},
        {field: "dateOfBirth", title: "Date of Birth"},
        {field: "room", title: "Room"},
        {field: "bed", title: "Bed"},
        {field: "admitDate", title: "Admit Date" }
    ],
    toolbar   : [
        {"name": "create", template: "<img class='k-grid-add' src='add.png'/>"},
        {"name": "save", template: "<img class='k-grid-save-changes' src='save.png'/>"},
        {"name": "cancel", template: "<img class='k-grid-cancel-changes' src='cancel.png'/>"}
    ],
    dataSource: {
        data    : people,
        pageSize: 2
    },
    editable  : true,
    scrollable: true,
    pageable  : true,
    sortable  : true
}); 
```

这些`class`值很重要，因为这是 Kendo UI 用于将标准处理程序绑定到此图像单击事件的方法。

另外`pageSize`需要在`dataSource`.

为了使图标向右对齐，您应该定义以下样式：

```
#grid .k-toolbar {
    text-align: right;
} 
```

`#grid`你的网格在哪里`id`。

在此处查看一个运行示例：http: [//jsfiddle.net/OnaBai/Y9vhE/](http://jsfiddle.net/OnaBai/Y9vhE/)唯一的问题是，由于图像未加载，您会看到它缺少图像，但它们仍然功能齐全。

# ios - 覆盖发送事件

> ID：14758261
> 
> 赞同：2
> 
> 时间：2013-02-07T18:23:47.950
> 
> 标签：ios, gestures

我`UIApplication` `sendEvent:`用这个实现覆盖了：

```
-(void) sendEvent:(UIEvent*) event
{
    [super sendEvent:event];
    [EventsHub sendEvent:event];
} 
```

当我`touchesMoved`在平移手势中接收到相位事件时`UIView`，触摸对象中的指针在`nil`执行第 3 行（[super sendEvent:event];）之后变为。

在屏幕上执行任何其他手势（如滑动或长按）时无法重现此问题。只有当我做平移手势时。

任何想法？

# python - 为python方法中使用的每个变量设置对象属性

> ID：14758262
> 
> 赞同：-1
> 
> 时间：2013-02-07T18:24:01.857
> 
> 标签：python, reflection

如何将（几乎）对象方法中的所有局部变量设置为该对象的属性？

```
class Obj(object):
    def do_something(self):
        localstr = 'hello world'
        localnum = 1
        #TODO store vars in the object for easier inspection

x = Obj()
x.do_something()
print x.localstr, x.localnum 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:24:01.857

受[Python update object from dictionary](https://stackoverflow.com/questions/405489/python-update-object-from-dictionary)的启发，我想出了以下内容：

```
class Obj(object):
    def do_something(self):
        localstr = 'hello world'
        localnum = 1

        # store vars in the object for easier inspection
        l = locals().copy()
        del l['self']
        for key,value in l.iteritems():
            setattr(self, key, value)

x = Obj()
x.do_something()
print x.localstr, x.localnum 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T08:48:58.907

已经有一个[python 调试器](http://docs.python.org/2/library/pdb.html)可以让你检查局部变量，所以用随机实例属性污染对象是没有意义的。

此外，如果多个方法使用相同的局部变量名称，您的方法也不起作用，因为方法可能会覆盖某些实例属性，从而使对象的状态处于模棱两可的状态。

此外，您的解决方案违反了[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，因为您必须在 every 之前添加代码`return`。

另一个缺点是，在方法执行期间，您通常希望在多个位置了解局部变量的状态，而您的答案不可能做到这一点。

如果您真的想手动保存局部变量，那么这样的事情可能比您的解决方案要好得多：

```
import inspect
from collections import defaultdict

class LogLocals(object):

    NO_BREAK_POINT = object()

    def __init__(self):
        self.__locals = defaultdict(defaultdict(list))

    def register_locals(self, local_vars, method_name=None, 
                              break_point=NO_BREAK_POINT):
        if method_name is None:
            method_name = inspect.currentframe(1).f_code.co_name
        self.__locals[method_name][break_point].append(local_vars)

    def reset_locals(self, method_name=None, break_point=NO_BREAK_POINT,
                           all_=False):
        if method_name is None:
            method_name = inspect.currentframe(1).f_code.co_name
        if all_:
            del self.__locals[method_name]
        else:
            del self.__locals[method_name][point]

    def get_locals(self, method_name, break_point=NO_BREAK_POINT):
        return self.__locals[method_name][break_point] 
```

您只需从它继承并`register_locals(locals())`在要保存状态时调用。它还允许区分“断点”，最重要的是它不会污染实例。它还区分返回`list`状态而不是最后状态的不同调用。

如果您想通过属性访问某些调用的本地人，您可以简单地执行以下操作：

```
class SimpleNamespace(object):  # python3.3 already provides this
    def __init__(self, attrs):
        self.__dict__.update(attrs)

the_locals = x.get_locals('method_1')[-1]   # take only last call locals
x = SimpleNamespace(the_locals)
x.some_local_variable 
```

无论如何，我相信这并没有多大用处。你应该使用 python 调试器。

# asp.net - 如果有更早的数据，则 ASPX 文本框值不变

> ID：14758263
> 
> 赞同：0
> 
> 时间：2013-02-07T18:24:04.440
> 
> 标签：asp.net

我有一个带有 TextBox 对象的 ASPX 表单。

它在 as 后面的代码`public TextBox UI_Delegate1;`和 ASPX 形式中定义为`<ASP:TextBox id="UI_Delegate1" runat="server" />`

在`Page_Load`后面代码中的成员处，我进行了分配：

```
UI_Delegate.Text = "AnyText"; 
```

此控件的呈现 HTML 文本为：

```
<input name="UI_Delegate1" type="text" value="AnyText" id="UI_Delegate1" /> 
```

在表单中，我有一个带有此定义的按钮：

```
<button type="submit" onserverclick="SubmitChanges" runat="server">Submit Changes</button> 
```

然后我在 TextBox 中键入文本，将“AnyText”值修改为其他文本，然后单击“提交更改”按钮，但单击按钮后 SubmitChanges 成员后面的代码中 UI_Delegate1.Text 的值继续为“AnyText” ，无论我输入什么。

换句话说，似乎 ASPX 将此控件视为只读，但我没有在任何地方设置此类属性。

这种行为的可能原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:48:49.077

正如@Yuriy 所说，在 Page_Load 中进行以下更改：

```
if(!IsPostBack)
{
  UI_Delegate1.Text = "AnyText";
} 
```

# php - PHP正则表达式匹配斜线

> ID：14758265
> 
> 赞同：1
> 
> 时间：2013-02-07T18:24:12.410
> 
> 标签：php, regex

我在[regex101](http://www.regex101.com/)测试了以下正则表达式，它在那里工作。但是，当我尝试在 preg_match 中使用它时，它不再起作用了。问题是斜线：我试图逃避它，但我无法让它工作。

```
preg_match("/[<>\\\"'%;()&]/", "my\string"); 
```

我应该匹配的字符集是：

```
< > \ " ' % ; ( ) & 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:25:46.170

只需使用不同的分隔符：

```
preg_match("![<>\\\"'%;()&/]!", "my\string"); 
```

# c# - 正则表达式匹配问号

> ID：14758267
> 
> 赞同：-2
> 
> 时间：2013-02-07T18:24:17.290
> 
> 标签：c#, regex

```
"member.php?1-ricarod&amp;s=50793b6188295f764bc938b1737b0a18" class="avatarlink"><img src="images/misc/unknown.gif" class="userlist_avatar_1" alt="" border="0" 
```

我需要从中解析 ricarod。我尝试代码

`name = Regex.Match(content, @"\.php?1-(.*?)&.+"".class=""avatarlink").Groups[1].Value;`

但它不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:27:57.473

你忘了逃避`?`

```
name = Regex.Match(content, 
    @"\.php\?1-(.*?)&.+"".class=""avatarlink").Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:28:02.237

尝试在“php”之后转义问号。我不保证会解决它，但这可能是问题的一部分。

[regexlib.com](http://regexlib.com)上有一个很好的在线正则表达式测试器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:29:27.810

问号对于正则表达式有特殊意义。尝试

```
 var name = Regex.Match(content, @"\.php\?1-(.*?)&").Groups[1].Value; 
```

注意'?' 被逃脱。此外，如果您只对“ricardo”感兴趣，您也可以简化您的正则表达式。

# php - PHP脚本将新条目导出到SQL表并覆盖文件

> ID：14758270
> 
> 赞同：0
> 
> 时间：2013-02-07T18:24:29.243
> 
> 标签：php, sql, pdo, cron, cron-task

我正在尝试创建一个 cron 作业每晚运行的 php 脚本。

该数据库包含来自联系表格的条目。

这个想法是运行 php 脚本（通过 cron）并让它从当天的数据库中导出任何新条目到服务器上的 csv 文件中，每次都覆盖该文件以进行内务处理。它只需要从那天开始将条目导出到数据库。

这是我目前所拥有的：

```
<?php

// Connect and query the database for the users
$conn = new PDO("mysql:host=localhost;dbname=dbname", 'username', 'password');
$sql = "SELECT * FROM enquiries ORDER BY firstname";
$results = $conn->query($sql);

// Pick a filename and destination directory for the file
// Remember that the folder where you want to write the file has to be writable
//$filename = "/tmp/db_user_export_".time().".csv";
$filename = "/home/domain/public_html/csv/db_user_export.csv";

// Actually create the file
// The w+ parameter will wipe out and overwrite any existing file with the same name
$handle = fopen($filename, 'wb');

// Write the spreadsheet column titles / labels
fputcsv($handle, array('FirstName','Email'));

// Write all the user records to the spreadsheet
foreach($results as $row)
{
    fputcsv($handle, array($row['firstname'], $row['email']));
}

// Finish writing the file
fclose($handle);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:09:42.173

您的 sql 必须通过：

```
SELECT * FROM enquiries where DATE(DateField) = CURDATE() ORDER BY firstname 
```

# html - 将输入文本框从 HTML 表格转换为所有 div

> ID：14758277
> 
> 赞同：-2
> 
> 时间：2013-02-07T18:24:49.640
> 
> 标签：html, css

如何将我的表格样式输入文本框转换为一堆与其相似的 div？

```
<table style="border: 1px solid #000000;" cellpadding="0" cellspacing="0">
    <tr>
        <td><input style="height: 17px; border: 0; width: 150px;" type="text"></td>
        <td style="padding-right: 2px;"><a style="color: red; text-decoration: none;" href="javascript:add()">+</a></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:48:43.060

```
<div id="textinput">
  <input type="text" />
  <div onclick="add()">+</div>
</div> 
```

这是 HTML 和 CSS：http: [//jsfiddle.net/kUSBM/](http://jsfiddle.net/kUSBM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:47:23.300

```
<div style="width: 180px; height: 20px; border: 1px solid #000000;">

    <div style="float: left;"><input style="padding-left: 4px; padding-right: 3px; width: 160px; border: none;" type="text"></div>

    <div>+</div>

</div> 
```

# excel - PostgreSQL：将带有标题的结果复制/粘贴到 Excel 中，无需代码

> ID：14758279
> 
> 赞同：6
> 
> 时间：2013-02-07T18:24:52.047
> 
> 标签：excel, postgresql, copy-paste

我使用了 MS SQL Server 2008 R2 (MS SQL)，我可以在其中右键单击查询结果，将其与标题一起复制/粘贴到 Excel 以便于探索。现在使用 PG Admin (PostgreSQL)，我必须导出（文件 > 导出 > CSV），然后是一堆 Excel 步骤（文本到列）。

有没有一种简单的方法可以将带有标题的查询结果复制/粘贴到 Excel 中？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2020-02-03T08:37:59.177

对于 pgAdmin 4，有一个“使用标题复制”选项。它是查询工具菜单中复制按钮旁边的下拉菜单：

[![复制按钮旁边的下拉菜单](../Images/f3a352ac5ad050d6e9dbbaf7a6aa4a7f.png)](https://i.stack.imgur.com/8ntL2.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-27T13:01:37.247

PgAdmin 似乎将分号设为默认字段分隔符。默认情况下，Excel 似乎喜欢选项卡。

您可以尝试更改 excel 或每次只执行“文本到列”功能。

我个人会去 Preferences->Query tool->Results grid 并更改以下内容

```
Result copy quote character: "
Result copy field separator: Tab
Copy column names: True 
```

这将使它更像 sql management studio。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:40:26.647

有很多不同的方法可以在这里完成你想要的。这个问题有点令人困惑，因为您在谈论 Excel，但随后您提到了“/var/lib/postgres/myfile1.csv”，这让我认为您现在正在使用 Linux。

我正在使用带有 pgAdminIII 1.16.0 的 Ubuntu 12.04。我安装了带有 LibreOffice 3.5.4.2 的 Open Office 作为 Excel 替代品。

我不确定您为什么要在 pgAdminIII 中将信息从网格中取出，但假设只是想将数据移到电子表格中以出于某种原因进行播放，那么最简单的方法是运行您的查询并单击结果的左上角（就像电子表格选择所有内容一样）并复制。然后，您应该能够打开 LibreOffice 并粘贴信息。它将弹出与导入 CSV 文件时相同的对话框。

此外，您应该能够启动 psql，然后执行“COPY”命令。如果您收到权限错误，请尝试使用建议的“\COPY”。请参阅 PostgreSQL 文档。这是一个 wiki 页面的[链接](http://wiki.postgresql.org/wiki/COPY)。

如果我错过了您想要做的事情，请在评论部分提出问题，我会尝试相应地改进我的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T23:21:38.457

您必须将查询工具输出设置为文本而不是网格数据。这样，列名和查询结果都在同一个剪切过去的文本文件中。当你这样做时，你不再做 CSV。整个结果和字段名称在剪切和粘贴过程中以文本文件的形式出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-25T05:07:58.497

回答相当老的帖子：@Phillip Fleischer 的回答似乎是最好的方法，至少在 pgAdmin III 中是这样。但是对于 pgAdmin III 版本 1.22.2（我正在使用的那个），而不是*Preferences...*，提到的设置在*File > Options > Query tool > Results grid*下看到。

# android - 在 Geonames Android 中获取附近的城市

> ID：14758282
> 
> 赞同：2
> 
> 时间：2013-02-07T18:24:57.653
> 
> 标签：android, geonames

嗨，我正在制作一个应用程序，我应该在其中找出特定经纬度位置附近的所有城市。

现在我的半径是30公里。

我正在使用在以下位置提供的 Geoname 公共网络服务：

[http://www.geonames.org/](http://www.geonames.org/)

我目前正在使用以下网址

[http://api.geonames.org/findNearbyJSON?username=xxxx&country=US&lat=38.8951118&lng=-77.0363658&radius=100&formatted=true&featureCode=PPL&featureClass=P](http://api.geonames.org/findNearbyJSON?username=xxxx&country=US&lat=38.8951118&lng=-77.0363658&radius=100&formatted=true&featureCode=PPL&featureClass=P)

但是这个查询返回一个纬度附近的所有人口稠密的地方，而不是城市，所以我得到了社区、学校等的回应。我只需要城市。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T12:39:36.713

你的 URL 应该是这样的：

> [http://api.geonames.org/citiesJSON?username=xxxx&country=US&lat=38.8951118&lng=-77.0363658&radius=100&formatted=true&featureCode=PPL&featureClass=P](http://api.geonames.org/citiesJSON?username=xxxx&country=US&lat=38.8951118&lng=-77.0363658&radius=100&formatted=true&featureCode=PPL&featureClass=P)

检查此[链接](http://www.geonames.org/export/JSON-webservices.html#citiesJSON)以获取更多详细信息。

# python - 是否有一个 numpy/scipy 点积，只计算结果的对角线条目？

> ID：14758283
> 
> 赞同：50
> 
> 时间：2013-02-07T18:25:03.590
> 
> 标签：python, numpy, scipy, product

想象一下有 2 个 numpy 数组：

```
> A, A.shape = (n,p)
> B, B.shape = (p,p) 
```

通常 p 是一个较小的数字（p <= 200），而 n 可以任意大。

我正在执行以下操作：

```
result = np.diag(A.dot(B).dot(A.T)) 
```

正如你所看到的，我只保留了 n 个对角线条目，但是有一个中间 (nxn) 数组从中计算出来，只保留了对角线条目。

我希望有一个像 diag_dot() 这样的函数，它只计算结果的对角线条目，而不分配完整的内存。

结果将是：

```
> result = diag_dot(A.dot(B), A.T) 
```

是否有这样的预制功能，是否可以在不需要分配中间（nxn）数组的情况下有效地完成？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-07T19:22:38.687

我想我自己得到了它，但仍然会分享解决方案：

因为只得到矩阵乘法的对角线

```
> Z = N.diag(X.dot(Y)) 
```

等价于 X 的行和 Y 的列的标量积的单个和，前面的语句等价于：

```
> Z = (X * Y.T).sum(-1) 
```

对于原始变量，这意味着：

```
> result = (A.dot(B) * A).sum(-1) 
```

如果我错了，请纠正我，但应该是这样......

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-07T19:26:51.077

你几乎可以得到任何你梦寐以求的东西[`numpy.einsum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html)。在你开始掌握它之前，它基本上看起来像黑色巫术......

```
>>> a = np.arange(15).reshape(5, 3)
>>> b = np.arange(9).reshape(3, 3)

>>> np.diag(np.dot(np.dot(a, b), a.T))
array([  60,  672, 1932, 3840, 6396])
>>> np.einsum('ij,ji->i', np.dot(a, b), a.T)
array([  60,  672, 1932, 3840, 6396])
>>> np.einsum('ij,ij->i', np.dot(a, b), a)
array([  60,  672, 1932, 3840, 6396]) 
```

**编辑**你实际上可以一次完成整个事情，这太荒谬了......

```
>>> np.einsum('ij,jk,ki->i', a, b, a.T)
array([  60,  672, 1932, 3840, 6396])
>>> np.einsum('ij,jk,ik->i', a, b, a)
array([  60,  672, 1932, 3840, 6396]) 
```

**编辑**虽然你不想让它自己计算太多......也添加了OP的答案到它自己的问题以进行比较。

```
n, p = 10000, 200
a = np.random.rand(n, p)
b = np.random.rand(p, p)

In [2]: %timeit np.einsum('ij,jk,ki->i', a, b, a.T)
1 loops, best of 3: 1.3 s per loop

In [3]: %timeit np.einsum('ij,ij->i', np.dot(a, b), a)
10 loops, best of 3: 105 ms per loop

In [4]: %timeit np.diag(np.dot(np.dot(a, b), a.T))
1 loops, best of 3: 5.73 s per loop

In [5]: %timeit (a.dot(b) * a).sum(-1)
10 loops, best of 3: 115 ms per loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T20:09:20.823

避免构建大型中间数组的行人答案是：

```
result=np.empty([n,], dtype=A.dtype )
for i in xrange(n):
    result[i]=A[i,:].dot(B).dot(A[i,:]) 
```

# javascript - 这个 Javascript 函数可以用 jQuery 重写吗？

> ID：14758292
> 
> 赞同：-8
> 
> 时间：2013-02-07T18:25:26.140
> 
> 标签：javascript, jquery

我有一个与 Cold Fusion 集成的遗留 JS 函数，用于输出包含在 if 语句中的第 n 个 ID 表单字段。有时输出非常高，看起来非常多余和麻烦。我在想一个 for 循环可以解决这个问题，但不确定解决它的正确方法。下面是来自示例输出的遗留代码。任何帮助表示赞赏：

```
function checkFinalDisposition(){
if (document.getElementById("mrostatus").value == "Completed"){

    var checkfinal = document.getElementById("finaldisposition").value
    if (checkfinal == 'NEGATIVE' || checkfinal == 'NEGATIVE DILUTE'){
        var checkfinalpass = 'Yes'

        if (document.getElementById("id4735721").value != 'NEGATIVE' || document.getElementById("id4735721").value != 'NEGATIVE DILUTE'){
            var checkfinalpass = 'No'
        }
        if (document.getElementById("id4735722").value != 'NEGATIVE' || document.getElementById("id4735722").value != 'NEGATIVE DILUTE'){
            var checkfinalpass = 'No'
        }
        if (document.getElementById("id4735723").value != 'NEGATIVE' || document.getElementById("id4735723").value != 'NEGATIVE DILUTE'){
            var checkfinalpass = 'No'
        }
        if (document.getElementById("id4735724").value != 'NEGATIVE' || document.getElementById("id4735724").value != 'NEGATIVE DILUTE'){
            var checkfinalpass = 'No'
        }
        if (document.getElementById("id4735725").value != 'NEGATIVE' || document.getElementById("id4735725").value != 'NEGATIVE DILUTE'){
            var checkfinalpass = 'No'
        }
        if (document.getElementById("id4735726").value != 'NEGATIVE' || document.getElementById("id4735726").value != 'NEGATIVE DILUTE'){
            var checkfinalpass = 'No'
        }
        if (document.getElementById("id4735727").value != 'NEGATIVE' || document.getElementById("id4735727").value != 'NEGATIVE DILUTE'){
            var checkfinalpass = 'No'
        }
    }
    else{
        var checkfinalpass = 'No'
        //Multiple IF's from drug query

        if (document.getElementById("id4735721").value == checkfinal){
            var checkfinalpass = 'Yes'
        }

        if (document.getElementById("id4735722").value == checkfinal){
            var checkfinalpass = 'Yes'
        }

        if (document.getElementById("id4735723").value == checkfinal){
            var checkfinalpass = 'Yes'
        }

        if (document.getElementById("id4735724").value == checkfinal){
            var checkfinalpass = 'Yes'
        }

        if (document.getElementById("id4735725").value == checkfinal){
            var checkfinalpass = 'Yes'
        }

        if (document.getElementById("id4735726").value == checkfinal){
            var checkfinalpass = 'Yes'
        }

        if (document.getElementById("id4735727").value == checkfinal){
            var checkfinalpass = 'Yes'
        }

    }

    if (checkfinalpass != 'Yes'){
        var inputfinaldisposition = 'NEGATIVE'
        //Multiple IF's from drug query

        if (document.getElementById("id4735721").value == ""){
            document.getElementById("id4735721").value = "POSITIVE";
        }
        if ((inputfinaldisposition == 'NEGATIVE' || inputfinaldisposition == 'NEGATIVE DILUTE') && (document.getElementById("id4735721").value != 'NEGATIVE' || document.getElementById("id4735721").value != 'NEGATIVE DILUTE')){
        var inputfinaldisposition = document.getElementById("id4735721").value
        }

        if (document.getElementById("id4735722").value == ""){
            document.getElementById("id4735722").value = "POSITIVE";
        }
        if ((inputfinaldisposition == 'NEGATIVE' || inputfinaldisposition == 'NEGATIVE DILUTE') && (document.getElementById("id4735722").value != 'NEGATIVE' || document.getElementById("id4735722").value != 'NEGATIVE DILUTE')){
        var inputfinaldisposition = document.getElementById("id4735722").value
        }

        if (document.getElementById("id4735723").value == ""){
            document.getElementById("id4735723").value = "NEGATIVE";
        }
        if ((inputfinaldisposition == 'NEGATIVE' || inputfinaldisposition == 'NEGATIVE DILUTE') && (document.getElementById("id4735723").value != 'NEGATIVE' || document.getElementById("id4735723").value != 'NEGATIVE DILUTE')){
        var inputfinaldisposition = document.getElementById("id4735723").value
        }

        if (document.getElementById("id4735724").value == ""){
            document.getElementById("id4735724").value = "NEGATIVE";
        }
        if ((inputfinaldisposition == 'NEGATIVE' || inputfinaldisposition == 'NEGATIVE DILUTE') && (document.getElementById("id4735724").value != 'NEGATIVE' || document.getElementById("id4735724").value != 'NEGATIVE DILUTE')){
        var inputfinaldisposition = document.getElementById("id4735724").value
        }

        if (document.getElementById("id4735725").value == ""){
            document.getElementById("id4735725").value = "NEGATIVE";
        }
        if ((inputfinaldisposition == 'NEGATIVE' || inputfinaldisposition == 'NEGATIVE DILUTE') && (document.getElementById("id4735725").value != 'NEGATIVE' || document.getElementById("id4735725").value != 'NEGATIVE DILUTE')){
        var inputfinaldisposition = document.getElementById("id4735725").value
        }

        if (document.getElementById("id4735726").value == ""){
            document.getElementById("id4735726").value = "NEGATIVE";
        }
        if ((inputfinaldisposition == 'NEGATIVE' || inputfinaldisposition == 'NEGATIVE DILUTE') && (document.getElementById("id4735726").value != 'NEGATIVE' || document.getElementById("id4735726").value != 'NEGATIVE DILUTE')){
        var inputfinaldisposition = document.getElementById("id4735726").value
        }

        if (document.getElementById("id4735727").value == ""){
            document.getElementById("id4735727").value = "NEGATIVE";
        }
        if ((inputfinaldisposition == 'NEGATIVE' || inputfinaldisposition == 'NEGATIVE DILUTE') && (document.getElementById("id4735727").value != 'NEGATIVE' || document.getElementById("id4735727").value != 'NEGATIVE DILUTE')){
        var inputfinaldisposition = document.getElementById("id4735727").value
        }

        var answer = confirm("Please advise the Final Disposition does not match your individual results!\n\nPress \"OK\" to change Final Disposition to "+inputfinaldisposition)

        if (answer){
            document.getElementById("finaldisposition").value = inputfinaldisposition;
            return true;
        }
        else{
            return false
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:34:26.207

我会有一个你正在检查的 ids 的 js 数组，

```
idToCheck = ['id4735721', 'id4735722', ...]; 
```

然后在 for 循环中比较它们。

```
for(id in idToCheck){
      if($('#'+idToCheck[id]).val() != 'NEGATIVE' || if($('#'+idToCheck[id]).val() != 'NEGATIVE DILUTE'){
            checkfinalpass = 'No';
      }
} 
```

我没有重做您的整个代码，但希望这会为您指明正确的方向。

# android - DialogFragment 上的双主题框架与 TimePickerDialog？

> ID：14758294
> 
> 赞同：1
> 
> 时间：2013-02-07T18:25:29.057
> 
> 标签：android

我正在尝试使用 DialogFragment 创建 TimePickerDialog，如[Android 文档所示](http://developer.android.com/guide/topics/ui/controls/pickers.html#TimePickerFragment)。但是，当尝试应用全息主题时，我会在执行以下操作时获得双框效果：

```
@Override
public Dialog onCreateDialog (Bundle savedInstanceState) 
{
    // Create a new instance of TimePickerDialog and return it
    return new TimePickerDialog(getActivity(), android.R.style.Theme_Holo_Dialog, this, hourOfDay, minute, DateFormat.is24HourFormat(getActivity()));
} 
```

如何在没有此问题的情况下应用全息主题？

![在此处输入图像描述](../Images/ab27b3b00ebb668fe020bdbc5264016b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T19:11:36.587

我遇到了这个问题，我解决了。我没有使用您建议的构造函数，而是使用了 ContextThemeWrapper，如下所示：

```
ContextThemeWrapper wrapper = new ContextThemeWrapper(getActivity(), android.R.style.Theme_Holo_Dialog);
return new TimePickerDialog(wrapper, getActivity(), hour, minute,DateFormat.is24HourFormat(getActivity())) 
```

这个对我有用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T08:39:35.487

有同样的问题......类`TimePickerDialog`从`AlertDialog`. 您必须使用它们才能获得可预测的结果。试试这个代码：

```
@Override
public Dialog onCreateDialog (Bundle savedInstanceState)
{
    // Create a new instance of TimePickerDialog and return it.
    return new TimePickerDialog(getActivity(), TimePickerDialog.THEME_HOLO_DARK,
        this, hourOfDay, minute, DateFormat.is24HourFormat(getActivity()));
} 
```

或者`TimePickerDialog.THEME_DEVICE_DEFAULT_DARK`，如果您更愿意遵循用户的期望，也可以使用。

您可以使用的常量是：

*   `TimePickerDialog.THEME_DEVICE_DEFAULT_DARK`
*   `TimePickerDialog.THEME_DEVICE_DEFAULT_LIGHT`
*   `TimePickerDialog.THEME_HOLO_DARK`
*   `TimePickerDialog.THEME_HOLO_LIGHT`
*   `TimePickerDialog.THEME_TRADITIONAL`

# php - PHP 正则表达式 - 如何搜索任何内容

> ID：14758296
> 
> 赞同：-1
> 
> 时间：2013-02-07T18:25:32.007
> 
> 标签：php, string, expression, any

即我有一个字符串，其中包含任何、任何类型的符号、单词、句子：

```
<START>%6tge9ruj+_]`\Qe,3[][}~[wq]we-Oke|\;'"_p}|P{dl3=+fmwfoe-f <END> 
```

如何：

```
1) get everything between <start> and <end>

2) replace everything <start> and <end> 
```

谢谢回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:47:37.467

使用正则表达式提取标签之间的部分：

```
<?php

$text = '<START>%6tgruj+_]`\\Qe,3][}~[e-Oke|;\'"=+fmwfoe-aaa<END>aaaa<END>';
$pattern = '/<START>(.*?)<END>/';   //<-------- till the first occurence of <END>
$pattern = '/<START>(.*)<END>/';    //<-------- till the last occurence of <END>
$out = array();

preg_match($pattern, $text, $out);      var_dump($out);
?> 
```

[演示。](http://ideone.com/KWtP0w)但这真的不是正则表达式的工作，你应该考虑使用一些解析器。

# python - Python 日志记录守护进程破坏文件句柄

> ID：14758299
> 
> 赞同：0
> 
> 时间：2013-02-07T18:25:37.647
> 
> 标签：python, logging, daemon

我的脚本很好地记录到一个文件中，直到我尝试将它分叉到后台，此时文件句柄被关闭，即使我使用 filesPreserve。如何以轻量级的方式改进这一点，以便我的记录器在后台运行？

```
#!/usr/bin/env python

from socket import *     
import sys, time, logging
import daemon

context = daemon.DaemonContext()

logger = logging.getLogger('audit')
hdlr = logging.FileHandler('/mnt/audit.log')
formatter = logging.Formatter('%(asctime)s %(message)s')
hdlr.setFormatter(formatter)
logger.addHandler(hdlr)
logger.setLevel(logging.WARNING)

context.filesPreserve = [hdlr]

with context:
  HOST = ''    
  PORT = 50007    
  ADDR = (HOST,PORT)   
  BUFSIZE = 4096    #reasonably sized buffer for data

  serv = socket( AF_INET,SOCK_STREAM)
  serv.bind((ADDR))    
  serv.listen(5)    #5 is the maximum number of queued connections we'll allow

  while True:
      conn, addr = serv.accept()

  sys.stdout.write('accepted connection')

  while True: 
      data = conn.recv( 1024 )
      if not data:
          break
      else:
          logger.error ("-" * 20)
          logger.error(data)
          if "DONE" == data:
            break
  conn.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T20:33:47.163

你想要的是：

```
context.files_preserve = [hdlr.stream] 
```

由于 files_preserve 需要一个文件处理程序。

[您可以在此处](https://groups.google.com/forum/#!msg/comp.lang.python/W8CwWVeVIVA/3iqBU47nHIUJ)查看更多信息

# node.js - 用于使用 express 和 Node.JS 下载文件

> ID：14758302
> 
> 赞同：0
> 
> 时间：2013-02-07T18:25:49.643
> 
> 标签：node.js, express

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:40:54.893

这取决于您与图像一起发送的标题。

要让浏览器下载图像而不是显示它，您需要设置`"Content-Disposition: attachment"`标题。

由于您使用的是`static`中间件，因此这比在您自己的请求处理程序函数中要复杂一些。您必须在静态中间件之前注入一个中间件。

```
app.use(function(req, res, next) {
  if (req.path.split('/')[0] === "downloads")
    res.attachment(); //short for res.set('Content-Disposition', 'attachment')
  next();
});

app.use(express.static(__dirname + '/public')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T11:06:37.503

与@rdrey 的回答类似，如果`?dl`url 中有查询参数，则让浏览器下载文件。

```
app.use('/gifs/*.gif', function(req, res, next) {
  if (req.query.dl !== undefined) res.attachment();
  next();
});

app.use('/gifs', express.static(__dirname + '/gifs')); 
```

# tridion - BinaryFactory 是否适用于文件系统上的二进制文件？

> ID：14758303
> 
> 赞同：3
> 
> 时间：2013-02-07T18:25:59.713
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在尝试使用以下代码读取已发布二进制文件的二进制数据：

```
Tridion.ContentDelivery.DynamicContent.BinaryFactory factory = new BinaryFactory();
BinaryData binaryData = factory.GetBinary(uri.ToString()); 
```

这工作得很好，直到我将它部署在二进制文件存储在文件系统而不是代理数据库上的环境中。现在， BinaryData 始终为空，即使我确定该文件存在。

如果您想像这样使用 BinaryFactory，是否必须将二进制文件存储在数据库中？还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:27:02.327

我刚刚在我的 SDL Tridion 2011 SP1 HR1 环境中运行了一些测试，并且可以确认`BinaryData`当我的二进制文件位于文件系统上时它已填充（即不为空且包含值）。我使用了您的代码示例，并且刚刚添加了在我的网站页面上使用的二进制文件的有效 URI。我不确定我们的环境之间有什么不同，我唯一的想法是检查是否`BinaryMeta`已部署到您的代理数据库（尽管如果这有所不同，我会认为这是一个错误）。

我的节点的ItemTypes节点`cd_storage.xml`如下：

```
<ItemTypes defaultStorageId="defaultdb" cached="true">
    <Item typeMapping="Binary" storageId="defaultFile" cached="true"/>
</ItemTypes> 
```

所以除了二进制文件之外的所有东西都在数据库中。

我不确定您使用的是什么版本的 SDL Tridion（我不知道它是否会影响这一点），但我最近听说从 2011 SP1 开始不再支持在文件系统上存储任何元数据。

# javascript - 如何获取属性值

> ID：14758304
> 
> 赞同：0
> 
> 时间：2013-02-07T18:26:03.167
> 
> 标签：javascript, jquery, attributes

我使用设置超时每分钟运行一次 html 代码

```
<div data-id='1' class="userId">
    <span> user name-1 </span>
</div>
<div data-id='2' class="userId">
    <span>user name-2</span>
</div> 
```

我第一次可以通过使用..从所有数据 ID 中获取价值。

**javascript:**

```
var userIds = $('.userId').map(function(){     
  return $(this).data('id');
}).get(); 
```

但第二次意味着 1 分钟后它抛出未定义。

请帮我纠正我的错误..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:27:21.673

```
 //  V-- missing dot 
```

更改`$('userId')`为`$('.userId')`

**演示：http:** [//jsfiddle.net/9RDDy/](http://jsfiddle.net/9RDDy/)

> 但第二次意味着 1 分钟后它抛出未定义。

`$('.userId')`第二次调用时你删除了吗？如果在您第二次调用它时存在这些元素，它应该可以工作。

# java - 从 byte[] 到 String 的精确转换

> ID：14758307
> 
> 赞同：-2
> 
> 时间：2013-02-07T18:26:15.157
> 
> 标签：java, string, file, bytearray

数组 byte[] 包含照片的完美逐字节副本，当我尝试将 byte[] 转换为 String 并用它写入文件时，它失败了。

我需要转换为字符串以便稍后通过套接字发送。

我的每个连接的处理程序都有一个 Socket (sock)、PrintWriter (out) 和 BufferedReader (in)，然后我将 Socket 与 PrintWriter 和 BufferedReader 相关联。有了这个，我用 out.println 和 in.readLine 发送和接收字符串。

我怎样才能解决这个问题？

测试代码：

```
// getPhoto() returns byte[]
String photo = new String(getPhoto());

// Create file
DataOutputStream os = new DataOutputStream(new FileOutputStream("out1.jpg"));
// This makes imperfect copy of the photo
os.writeBytes(photo);

//This works perfectly basically it copies the image through byte[]
//os.write(getPhoto());

// Close the output stream
os.close(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T18:28:10.980

> 数组 byte[] 包含照片的完美逐字节副本，当我尝试将 byte[] 转换为 String 并用它写入文件时，它失败了。

是的。那是因为字符串用于文本，而照片不是文本。只是不要将其转换为字符串。您也不需要`DataOutputStream`:

```
OutputStream os = new FileOutputStream("out1.jpg");
try {
    os.write(getPhoto());
} finally {
    os.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:28:28.690

不要将二进制数据加载到字符串中。如果不是 tetx，就不要使用 String

# javascript - 在事件之前和之后比较 DOM/所有属性的方法？

> ID：14758308
> 
> 赞同：2
> 
> 时间：2013-02-07T18:26:20.333
> 
> 标签：javascript, dom, diff, dump

我遇到了一个问题，当我多次重复 3dtransform 时，它开始以奇怪的方式降低性能。

我想知道的是——是否有某种方法可以转储整个页面 DOM 以及之前和之后的所有属性，以便我可以运行 diff 并查看留下了什么？我知道我可以从网络检查器中复制 html，但是有没有办法转储所有元素及其所有属性？我知道这会很长，但希望一旦运行，差异会相对较短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:30:49.513

您可以在文档对象上使用 MutationObserver 来获取在给定时刻开始观察的 dom 的架构/属性/属性更改。

[https://developer.mozilla.org/en-US/docs/DOM/MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver) [http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)

# java - 基于 JTextField 过滤 JList

> ID：14758313
> 
> 赞同：8
> 
> 时间：2013-02-07T18:26:39.237
> 
> 标签：java, swing, filter, jtextfield, jlist

我的程序中有一个 JTextField 和一个 JList。JList 包含用户的联系人。我想根据 JTextField 上的文本过滤 JList。例如，如果我输入“Mike”，它只会显示包括“Mike”在内的联系人。当用户清除 JTextField 时，它将重置过滤器。

我知道我可以通过拥有两个数组来手动执行此操作。一个用于原始联系人，一个用于过滤后的联系人。当用户更改 JTextField 的值时，我会查看原始列表，更新临时列表并更新 JList。我只是想知道是否有一些内置功能可以避免体力劳动。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T19:10:00.053

做这样的事情的最好方法是有一个过滤其内容的 ListModel 实现。我不知道任何默认的过滤 ListModel 实现，但应该不难做到。这是一个快速而肮脏的解决方案，只是为了给您一个想法。您可能想为它添加更多的花里胡哨。

```
package test;

import java.util.ArrayList;

import javax.swing.AbstractListModel;
import javax.swing.ListModel;
import javax.swing.event.ListDataEvent;
import javax.swing.event.ListDataListener;

public class FilteredListModel extends AbstractListModel {
    public static interface Filter {
        boolean accept(Object element);
    }

    private final ListModel _source;
    private Filter _filter;
    private final ArrayList<Integer> _indices = new ArrayList<Integer>();

    public FilteredListModel(ListModel source) {
        if (source == null)
            throw new IllegalArgumentException("Source is null");
        _source = source;
        _source.addListDataListener(new ListDataListener() {
            public void intervalRemoved(ListDataEvent e) {
                doFilter();
            }

            public void intervalAdded(ListDataEvent e) {
                doFilter();
            }

            public void contentsChanged(ListDataEvent e) {
                doFilter();
            }
        });
    }

    public void setFilter(Filter f) {
        _filter = f;
        doFilter();
    }

    private void doFilter() {
        _indices.clear();

        Filter f = _filter;
        if (f != null) {
            int count = _source.getSize();
            for (int i = 0; i < count; i++) {
                Object element = _source.getElementAt(i);
                if (f.accept(element)) {
                    _indices.add(i);
                }
            }
            fireContentsChanged(this, 0, getSize() - 1);
        }
    }

    public int getSize() {
        return (_filter != null) ? _indices.size() : _source.getSize();
    }

    public Object getElementAt(int index) {
        return (_filter != null) ? _source.getElementAt(_indices.get(index)) : _source.getElementAt(index);
    }
} 
```

为了使用它，您需要将其设置为您的 JList，然后根据需要调用 setFilter()。这是一个例子：

```
 ListModel source = new DefaultListModel(); // use a model of your choice here;
    FilteredListModel filteredListModel = new FilteredListModel(source);
    JList list = new JList(filteredListModel);
    filteredListModel.setFilter(new FilteredListModel.Filter() {
        public boolean accept(Object element) {
            return false; // put your filtering logic here.
        }
    }); 
```

一旦调用 setFilter() 方法，屏幕上的 JList 就会相应地更改其内容。

或者，您可能希望为您的过滤器实现一个观察者/可观察模式，因此您可以重新过滤列表而无需调用方法 setFilter()。您可以稍后进行试验。对于第一次迭代，只要每次用户在 JTextField 中键入内容时调用方法 setFilter 就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:49:40.890

一个更简单的解决方案可能是使用，它确实具有过滤和排序 ( )`JTable`的内置功能。`RowSorter`单列表与列表没有太大区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T08:24:02.073

如果你对外部库没问题，我会推荐 Jide 的 QuickListFilterField/QuickTreeFilterField。只需几行代码，您就可以获得可视觉过滤的 JList/JTree、区分大小写/不区分大小写的搜索、通配符/正则表达式匹配等……非常易于使用！

# wpf - 在 WPF 文本框中绑定单位标签

> ID：14758318
> 
> 赞同：2
> 
> 时间：2013-02-07T18:27:15.150
> 
> 标签：wpf, binding, string-formatting

我正在将压力绑定到文本框。压力可能以 PSI、KPA、BARS 等为单位。我想在值旁边的文本框中显示单位。似乎没有办法将我的视图模型中的 Units 字符串属性绑定到值绑定的 StringFormat 选项。有没有办法在不重新模板化文本框的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:32:46.573

您可以使用`MultiBinding`：

```
<TextBox>
    <TextBox.Text>
        <MultiBinding StringFormat="{}{0} {1}">
            <Binding Path="Pressure" />
            <Binding Path="Unit"/>
        </MultiBinding>
    </TextBox.Text>
</TextBox> 
```

# python - 从 Python jinja2 中的类属性返回 HTML

> ID：14758323
> 
> 赞同：0
> 
> 时间：2013-02-07T18:27:25.140
> 
> 标签：python, html, jinja2

早上好，

我有一门叫**Banana**的课。

我定义了一个返回一些 HTML的 @property**剥离：**

```
@property
def peel(self):
    return "<div>Here is a peel!</div>" 
```

在我的模板中，我试图呈现这个 HTML：

```
<body>
    {{ banana.peel }}
</body> 
```

但是，它正在被解码。源最终看起来像：

```
&lt;div&gt;Here is a peel!&lt;div&gt; 
```

我已阅读有关*cgi.unescape*的信息，但似乎无法在我的 HTML 模板中导入/使用它。

我绝对是 Python 的新手，所以非常感谢任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:45:07.730

使用[`safe`过滤器](http://jinja.pocoo.org/docs/templates/#builtin-filters)：

```
{{ banana.peel | safe }} 
```

# scala - 加载 Play2 资产时无法解析的日期

> ID：14758329
> 
> 赞同：0
> 
> 时间：2013-02-07T18:28:04.510
> 
> 标签：scala, playframework-2.0

有人可以解释一下为什么我在 Play2 (scala) 中出现这些运行时错误。这发生在开始时，并且在某些 F5 之后不再出现。它出现在资产加载（css/js ...）

```
[error] application - 

! @6da5355eh - Internal server error, for request [GET /assets/js/backbone/collections/singleStample.js] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[ParseException: Unparseable date: "jeu., 07 f?vr. 2013 17:21:24 UTC"]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.2]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.2]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.2]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.text.ParseException: Unparseable date: "jeu., 07 f?vr. 2013 17:21:24 UTC"
    at java.text.DateFormat.parse(DateFormat.java:357) ~[na:1.7.0_01]
    at controllers.Assets$$anonfun$at$1$$anonfun$apply$6$$anonfun$apply$10$$anonfun$apply$11$$anonfun$apply$12.apply(Assets.scala:80) ~[play_2.9.1.jar:na]
    at controllers.Assets$$anonfun$at$1$$anonfun$apply$6$$anonfun$apply$10$$anonfun$apply$11$$anonfun$apply$12.apply(Assets.scala:80) ~[play_2.9.1.jar:na]
    at scala.Option.filterNot(Option.scala:162) ~[scala-library.jar:na]
    at controllers.Assets$$anonfun$at$1$$anonfun$apply$6$$anonfun$apply$10$$anonfun$apply$11.apply(Assets.scala:80) ~[play_2.9.1.jar:na]
    at controllers.Assets$$anonfun$at$1$$anonfun$apply$6$$anonfun$apply$10$$anonfun$apply$11.apply(Assets.scala:79) ~[play_2.9.1.jar:na]

[error] application - 

! @6da5355eg - Internal server error, for request [GET /assets/js/backbone/views/application/appView.js] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[ArrayIndexOutOfBoundsException: -1]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.2]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.2]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.2]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.lang.ArrayIndexOutOfBoundsException: -1
    at java.text.DigitList.fitsIntoLong(DigitList.java:229) ~[na:1.7.0_01]
    at java.text.DecimalFormat.parse(DecimalFormat.java:1314) ~[na:1.7.0_01]
    at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:2089) ~[na:1.7.0_01]
    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1455) ~[na:1.7.0_01]
    at java.text.DateFormat.parse(DateFormat.java:355) ~[na:1.7.0_01]
    at controllers.Assets$$anonfun$at$1$$anonfun$apply$6$$anonfun$apply$10$$anonfun$apply$11$$anonfun$apply$12.apply(Assets.scala:80) ~[play_2.9.1.jar:na] 
```

我加载资产的路线是：

```
GET     /assets/*file                               controllers.Assets.at(path="/public", file) 
```

这`controllers.Assets`是由框架提供的，我自己并没有做任何花哨的事情，比如尝试解析日期或操作数组，我只是按照文档...

请求头是：

```
GET /assets/js/backbone/collections/singleStample.js HTTP/1.1
Host: localhost:9000
Connection: keep-alive
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.2 (KHTML, like Gecko) Ubuntu/11.10 Chromium/15.0.874.106 Chrome/15.0.874.106 Safari/535.2
Accept: */*
Referer: http://localhost:9000/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: gs_u=1379104331:71067:61092:1360004387267; PLAY_SESSION=061323e1e5a413f5d193181ea78e640db8d947ee-user%3A5087de9be4b078ca9f03f224; mp_dfe43e2fceb459410656de3c4f3ae169_mixpanel=%7B%22distinct_id%22%3A%20%2213c82cf24b5df-0cdabcd37-5d772518-15f900-13c82cf24b71003%22%2C%22%24initial_referrer%22%3A%20%22%24direct%22%2C%22%24initial_referring_domain%22%3A%20%22%24direct%22%7D
If-None-Match: "a588b22a3fc3967daefa02e1843b00d296f77806"
If-Modified-Since: jeu., 07 f?vr. 2013 17:21:24 UTC 
```

我不知道为什么会有这个“？” 在`If-Modified-Since: jeu., 07 f?vr. 2013 17:21:24 UTC`. 我可以告诉你的是，我在 Ubuntu 上使用 Chromium，但这也出现在使用 Macbook 的人身上

有人可以给我一些见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:48:04.363

发现这是一个 Play 2.0.2 的错误，已在 Play 2.0.3 中解决

# c# - 使用 WiX 安装使用 .NET 创建的服务

> ID：14758335
> 
> 赞同：1
> 
> 时间：2013-02-07T18:28:15.840
> 
> 标签：c#, windows-services, wix

我正在尝试使用将与 WiX 一起安装的 VS2012 express 创建服务。这是在没有完整版 VS 中提供的模板的情况下完成的。我让我的课程派生自 ServiceBase。我假设（可能是错误的）如果程序是使用 WiX 安装的，则不需要从 ServiceInstaller 派生的类。当我运行由 WiX 创建的 MSI 时，没有标记错误，但没有显示新服务。

我在 Google 上搜索了答案，但没有找到创建服务所需的最少 C# 代码的示例。链接到一个好的教程或指出缺少 C# 或 WiX 代码的区域将不胜感激。

模板服务的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceProcess;

namespace WixInstalledServiceTeamplate
{
    class BasicService : ServiceBase
    {
        static void Main(string[] args)
        {

        }

        public BasicService()
        {
            this.AutoLog = true;
            this.ServiceName = "MY Service Template";

        }

        protected override void OnStart(string[] args)
        {
            base.OnStart(args);

            //TODO: place your start code here
        }

        protected override void OnStop()
        {
            base.OnStop();

            //TODO: clean up any variables and stop any threads
        }

    }
} 
```

蜡码：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="786F7069-9C7F-4E15-A721-6B3B4D300FD9" Name="WixEditText" Language="1033" Version="0.0.0.1" Manufacturer="3M Automated Inpsection and Measurement" UpgradeCode="31956530-98A2-4C83-B3A9-5FB6B7A7AE07">
        <Package Description="Test file in a Product" Comments="Simple test" InstallerVersion="200" Compressed="yes" />
        <Media Id="1" Cabinet="simple.cab" EmbedCab="yes" />
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder" Name="PFiles">
                <Directory Id="RELEASE" Name="Release">
                    <Component Id="WIXINSTALLEDSERVICETEAMPLATE.EXE" DiskId="1" Guid="B0AEF920-4EF0-478C-9B5A-0B13F23F7E73">
                        <File Id="WIXINSTALLEDSERVICETEAMPLATE.EXE" Name="WixInstalledServiceTeamplate.exe" Source="bin\Release\WixInstalledServiceTeamplate.exe" />
                    </Component>
                </Directory>
            </Directory>
        </Directory>
        <Feature Id="Complete" Title="Install Everything" Level="1" Display="expand" ConfigurableDirectory="TARGETDIR">
            <Component Id="MYServiceTemplate" Guid="1BD8DA93-86A6-4DC4-8CE9-B59525DDFB89" Directory="TARGETDIR">
                <ServiceInstall Name="myservicetemplate" Type="ownProcess" Start="demand" ErrorControl="normal" Account="LOCAL SYSTEM" Description="test service install with wix" DisplayName="MY Service Template" Id="serviceInstall">
                </ServiceInstall>
            </Component>
            <ComponentRef Id="WIXINSTALLEDSERVICETEAMPLATE.EXE" />
        </Feature>
        <UI />
        <UIRef Id="WixUI_Minimal" />
    </Product>
</Wix> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:35:37.097

您只需要 ServiceBase 的假设是正确的。但是，您只需要 1 个组件而不是 WiX 中的 2 个组件。ServiceInstall 不引用文件，它隐式应用于父组件的密钥文件。

如果您需要安装 EXE 和控制台应用程序和/或变得更复杂的服务（变体点）的能力。最简单的方法是将 DLL 分解为 2 个 EXE，总共 3 个组件。

# curl - 卷曲和代理

> ID：14758337
> 
> 赞同：0
> 
> 时间：2013-02-07T18:28:19.987
> 
> 标签：curl, proxy

最近写了一个简单的 curl 程序来测试代理。如果我得到 curl 的输出，我正在使用的代理是好的，我保存它并可以使用它，否则它要么宕机，要么忙，等等....

问题是，当我测试一个代理列表时，我得到了输出，但是当我只想从 OK 列表中选择一个来获取输出时，我什么也得不到，尽管我实际上使用了几乎相同的代码。这里是：

测试代码（我正在测试完全相同的代理）：

```
$url='http://google.com';
$curl_imelimit=20;
$allowed_time=19.980;

$file='190.110.86.202:8080
    77.236.209.236:8080
    213.185.231.4:8080
    189.8.32.18:80
    106.51.66.181:80
    190.110.86.22:8080';

preg_match_all('/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}:\d{1,4}/', $file, $proxies);

$options=array(
    CURLOPT_REFERER => 'http://google.com',
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_FOLLOWLOCATION => 3,
    CURLOPT_USERAGENT => null,
    CURLOPT_TIMEOUT => $curl_timelimit,
    CURLOPT_URL => $url,
    CURLOPT_PROXY => $proxy);

foreach($proxies as $pr)
    foreach($pr as $proxy){
        $ch=curl_init();
            curl_setopt_array($ch, $options);
            $output=curl_exec($ch);
            $info=curl_getinfo($ch);
            echo $output.'</br>';
        if ($info['total_time']>0 && $info['total_time']<$allowed_time){
            echo '<p style="color:green;">'.$proxy.' OK</p>';
        }
        if ($info['total_time']==0 || $info['total_time']>$allowed_time)
            echo '<p style="color:red;">'.$proxy.' NOT GOOD</p>';
        set_time_limit(30);
        curl_close($ch);             
    } 
```

所有代理都能正常工作，及时，我得到了输出。如果我想用上面列表中的一个代理重复它，使用下面的代码，我什么也得不到。一个代理的代码：

```
$proxy='190.110.86.202:8080';    
$url='http://google.com';
$curl_timelimit=20;                  

$options=array(
    CURLOPT_REFERER => 'http://google.com',
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_FOLLOWLOCATION => 3,
    CURLOPT_USERAGENT => null,
    CURLOPT_TIMEOUT => $curl_timelimit,
    CURLOPT_URL => $url,
    CURLOPT_PROXY => $proxy);    

$ch=curl_init();
    curl_setopt_array($ch, $options);
    $output=curl_exec($ch);
    $info=curl_getinfo($ch);

curl_close($ch);

    echo $output.'</br>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T08:21:29.400

您可以使用这个经过良好测试的功能

```
function get_page($url)

global $proxy;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
//curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_HEADER, 0); // return headers 0 no 1 yes
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // return page 1:yes
curl_setopt($ch, CURLOPT_TIMEOUT, 200); // http request timeout 20 seconds
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); // Follow redirects, need this if the url changes
curl_setopt($ch, CURLOPT_MAXREDIRS, 2); //if http server gives redirection responce
curl_setopt($ch, CURLOPT_USERAGENT,
    "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7");
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt"); // cookies storage / here the changes have been made
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); // false for https
curl_setopt($ch, CURLOPT_ENCODING, "gzip"); // the page encoding

$data = curl_exec($ch); // execute the http request
curl_close($ch); // close the connection
return $data; 
```

此外，有时您的服务器上的端口被阻止，这就是代理无法正常工作的原因

# php - 如何从一个数据库表中的组返回第一个值，MySQL

> ID：14758342
> 
> 赞同：2
> 
> 时间：2013-02-07T18:28:30.087
> 
> 标签：php, mysql, sql, database, greatest-n-per-group

我有一个`photos`在 MySQL 数据库中调用的表，其中包含照片文件名和其他相关信息。结构如下：

```
+----------+------------+-------------+
| photo_id | gallery_id | photo_fname |
|----------|------------|-------------|
|     1    |      1     |  DSC2001    |
|     2    |      1     |  DSC2002    |
|     3    |      1     |  DSC2003    |
|     4    |      2     |  DSC2004    |
|     5    |      2     |  DSC2005    |
|     6    |      2     |  DSC2006    |
|     7    |      3     |  DSC2007    |
|     8    |      3     |  DSC2008    |
|     9    |      3     |  DSC2009    |
+----------+------------+-------------+ 
```

我要做的是编写一个查询，返回每个画廊的第一张照片文件名，如下所示：

```
+----------+------------+-------------+
| photo_id | gallery_id | photo_fname |
|----------|------------|-------------|
|     1    |      1     |  DSC2001    |
|     4    |      2     |  DSC2004    |
|     7    |      3     |  DSC2007    |
+----------+------------+-------------+ 
```

我对此进行了研究，直到昨晚我的头痛克服了我，尽管我发现了类似的问题，但在我看来，他们似乎并不想做完全相同的事情。我尝试了子查询，我在这里尝试了其他帖子中的示例代码，但无法使其工作。要么是由于脑雾，要么只是没有找到正确的解决方案。

我只想返回如上所示的结果，仅此而已。

提前谢谢了！

**更新：** 我很抱歉，表名是照片，FWIW。

其次，我真正想要的只是文件名，而不是照片或画廊 ID，我只是为了视觉清晰而包括了这些。如果这引起了混乱，我深表歉意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:30:23.877

试试这个：

```
SELECT *
FROM YourTable
WHERE photo_id IN ( SELECT MIN(photo_id) 
                    FROM YourTable
                    GROUP BY gallery_id) 
```

## [查看演示](http://sqlfiddle.com/#!2/9f433/2)

对于您更新的问题：

```
SELECT photo_fname
FROM photos
WHERE photo_id IN ( SELECT MIN(photo_id) 
                    FROM photos
                    GROUP BY gallery_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:35:05.040

这是使用内部连接的简单方法

```
SELECT
  m.*
FROM sparkles as m
  INNER JOIN (SELECT
        photo_id,
        MIN(photo_id)
          FROM sparkles
          GROUP BY gallery_id) as l
    on l.photo_id = m.photo_id 
```

[演示](http://sqlfiddle.com/#!2/9f433/7)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-07T18:30:48.330

```
SELECT photo_id, gallery_id, photo_frame
FROM ...
GROUP BY photo_id, gallery_id 
```

默认情况下，对于字段列表中的任何非聚合字段，mysql 将返回它在数据库中遇到的第一个非分组值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-07T19:44:42.867

```
Select * from tablename group by gallery_id;       ? 
```

# python - 在 Python 中从大列表写入文本文件

> ID：14758343
> 
> 赞同：0
> 
> 时间：2013-02-07T18:28:33.100
> 
> 标签：python

当我尝试从包含 648470 个字符串值的普通列表写入文本文件时，会发生一些奇怪的事情。

```
 textFile = open('bins.txt', 'w')

    for item in bigList:
        print item # This prints fine
        textFile.write(item)

    textFile.close() 
```

文本文件的文件大小迅速增长，并且充满了各种符号，而不是预期的符号......即使我只写了 bigList 内容的一小部分，文本文件也会损坏。如果我用小得多的列表做同样的事情，那就没有问题了。列表的大小是否会导致此问题？的输出`print(bigList[:10])`是

```
['167', '14444', '118', '22110', '118', '8134', '82', '8949', '7875', '171'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:01:22.887

它对我来说绝对没问题。

在您的代码中，您忘记关闭文件，而且由于您以附加模式打开文件，我猜您的文件中有一些垃圾并且您忘记了删除。

另外，请记住，以这种方式写入不会以任何方式分隔数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:44:57.600

由于某些列表对象不是字符串，因此文件可能存在写入问题。尝试：

```
textFile = open('bins.txt', 'w')

for item in bigList:
    print item # This prints fine
    textFile.write(str(item))

textFile.close() 
```

但是我看不到您的列表，所以我不确定这是否是一个实际问题。

# ruby-on-rails - Rails：控制器在视图中转储数据

> ID：14758353
> 
> 赞同：1
> 
> 时间：2013-02-07T18:29:10.057
> 
> 标签：ruby-on-rails, haml

我有一个简单的控制器，`def index`具有以下代码：

```
@companies = Company.all

respond_to do |format|
  format.html
end 
```

但是在视图中，`companies`在显示所有错误后，我会附加这些错误：

`[#<Company id: 4, title: "Testing #1(1)", created_at: "2013-02-05 19:14:04", updated_at: "2013-02-05 19:14:04">, #<Company id: 7, title: "Testing #1 1", created_at: "2013-02-05 19:34:48", updated_at: "2013-02-05 19:34:48">]`

更新了视图代码：

```
= @companies.each do |company|
    %li
      .box
        .c
          %h2
            = link_to company.title, company 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:44:47.220

`= @companies.each do |company|`

Haml 中的等号表示“打印此表达式的结果”。您在页面上看到了一系列公司，因为您要求它。

请改用连字符。

`- @companies.each do |company|`

# mongodb - 将任意 mongoDB 查询写入 PHP 后端

> ID：14758354
> 
> 赞同：0
> 
> 时间：2013-02-07T18:29:11.193
> 
> 标签：mongodb, mongodb-php, mongodb-query

我正处于创建基于 PHP 和 MongoDB 的内部系统的启动阶段。该系统的用户是 Javascript 程序员，他们希望能够使用任意 Mongo shell 查询从前端 gui 对 Mongo 数据库进行自定义查询。当然，如果我强迫他们使用适当的 PHP 数组等编写查询，这根本不是问题，但我绝对希望避免这种情况。

我不太确定如何在不编写一些能够将查询重构为可在 MongoClient PHP 中使用的正确格式化数组的高级方法的情况下处理这样的功能。一种方法是使用 ie MongoDB::execute() 方法并在数据库服务器上运行 javascript - 我根本不喜欢这种方法。

我很想问您是否对如何在某种程度上实现所要求的功能有任何想法。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:32:40.767

您是否正在寻找这样的东西：[http](http://rockmongo.com/) ://rockmongo.com/ ？

# java - 如何检测 Windows 7 上哪个程序正在播放声音？

> ID：14758360
> 
> 赞同：7
> 
> 时间：2013-02-07T18:29:28.280
> 
> 标签：java, winapi, audio, winamp

我正在尝试编写一个小后台程序，当另一个程序播放声音时，它会停止播放 Winamp 的音乐。关于通过Java访问Winamp的部分已经解决了，现在我需要一种方法来检测哪个程序播放当前播放的声音（可能我想让一些程序在不停止我的音乐的情况下播放它们的声音）。虽然我在 Java（+ winapi）中这样做，但任何语言的一切都会有所帮助。

[编辑] 因为我刚刚对我的第一个问题投了反对票，所以这里有一些更详细的信息：我已经想出了如何使用 winapi（但我不知道）并捕获诸如音量级别之类的东西。仍然造成麻烦的是所提到的对所播放声音的来源以及哪个程序播放声音的检测。winapi 中有什么可以帮助我做到这一点吗？[/edit]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T21:27:25.940

正如 Deanna 所提到的，您可以像 Volume Mixer 应用程序（从系统托盘图标开始）一样枚举音频播放会话，并获取指示会话状态的每个会话仪表。

您可以在此答案中找到执行此操作的 C++ 应用程序：[Peak Meters for individual programs on Windows 7](https://stackoverflow.com/a/14367829/868014)。仪表是每个会话的，启用音频的应用程序中可能有一个或多个会话，但最终只要您枚举它们，您就可以确定那里是否有任何活动播放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:51:22.003

我相信 Vista+ 中的[Windows Core Audio API](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd370784(v=vs.85).aspx)允许您获取每个应用程序的 VU 级别（毕竟，混音器显示它）。这应该允许您在播放另一个应用程序时关闭一个应用程序，等等。

# javascript - 使这些工具提示在 IE 和 Opera 中得到支持

> ID：14758367
> 
> 赞同：-2
> 
> 时间：2013-02-07T18:29:53.667
> 
> 标签：javascript, jquery, css

我正在寻找帮助我使这些工具提示在 IE 和 Opera 中工作的人。它们目前由 CSS 和 jQuery 提供支持。

根据我的测试，在 IE 10 - 8 中：工具提示在悬停时显示，但它们的样式与现代/其他浏览器不同。而且，在 IE 7 - 6 中：工具提示在用户悬停在相应的链接/触发器上之前显示。然后在 Opera 中什么也没有发生。

我将非常感谢任何帮助，使其看起来相同并在尽可能多的浏览器中工作相同。无论是使用替代 CSS 还是 jQuery 或 JS，我只需要它来为我正在从事的项目工作。

这里的工具提示是：[https ://dl.dropbox.com/u/270523/CSS3Tooltips/index.html](https://dl.dropbox.com/u/270523/CSS3Tooltips/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:32:29.290

> SEC7111：HTTPS 安全性受到[http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js)
> index.html的威胁

您应该对所有资源使用 HTTPS，或者不使用任何资源，但不要混用。

* * *

编辑：我在页面上手动插入了一个`<div class="tooltip">Text goes here</div>`元素，我可以向您保证，它可以在 IE10 和 IE9 中正常工作，但不支持IE8`border-radius`及更低版本。`box-shadow`

# c# - WPF 将 RichTextBox 打印为图像

> ID：14758374
> 
> 赞同：2
> 
> 时间：2013-02-07T18:30:09.917
> 
> 标签：c#, wpf, image, printing, richtextbox

我正在制作一个应用程序，我需要在其中将 wpf Richtextbox 的内容打印到**图像**上，我的应用程序需要*极快*的性能，因此使用 WinForms RichTextBoxPrintCtrl（我自己的控件本身带有 Handle 的类）的解决方案带有覆盖，对我来说工作太慢了，有什么办法可以制作可打印的（保存为图像，或可渲染为位图）wpf Richtextobx？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:09:11.373

检查这些链接希望帮助：

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)

[http://www.codeproject.com/Articles/103184/How-to-Render-Bitmap-or-to-Print-a-Visual-in-WPF](http://www.codeproject.com/Articles/103184/How-to-Render-Bitmap-or-to-Print-a-Visual-in-WPF)

[http://www.west-wind.com/weblog/posts/2007/Sep/10/Rendering-a-WPF-Container-to-Bitmap](http://www.west-wind.com/weblog/posts/2007/Sep/10/Rendering-a-WPF-Container-to-Bitmap)

# c++ - 如何使用唯一指针向量？

> ID：14758375
> 
> 赞同：2
> 
> 时间：2013-02-07T18:30:18.707
> 
> 标签：c++, unique-ptr

我用`vector<unique_ptr<Data>>`它来存储我的数据，因为它的自动内存管理和低成本的`unique_ptr`. 我有一个功能可以尝试将新创建的数据添加到其中。数据可能真的添加或不添加。它被添加了，我不需要关心它的内存删除，因为指针向量会处理它。如果没有添加，希望新创建的数据可以自动删除。有什么简单的实现方法吗？该函数可能如下所示或其他类似形式。谢谢。

```
// Return true if really added, return flase if not.
bool add(vector<unique_ptr<Data>>& vec, Data* newData); 
```

根据戴夫的回答，非公开可复制`bool add(vector<unique_ptr<Data>>& vec, std::unique_ptr<Data>& newData)`更好吗？`unique_ptr`这里在第二个参数中使用了一个引用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T18:32:59.927

太接受`newData`了`unique_ptr`。

```
bool add(vector<unique_ptr<Data>>& vec, std::unique_ptr<Data> newData)
{
    if(blah blah blah)
    {
        vec.push_back(std::move(newData));
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T19:04:55.290

您想要实现的语义是什么。

FWIW：unique_ptr 的向量很少是一个好主意。 *如果*您希望向量具有独占所有权，则最好使用 Boost 的指针向量。

# spring - BoneCP 有时无法从 spring 属性持有者获取配置

> ID：14758378
> 
> 赞同：0
> 
> 时间：2013-02-07T18:30:42.110
> 
> 标签：spring, bonecp

我已经面临这个问题一段时间了。我的配置如下

```
<!-- Load Properties Files -->
<context:property-placeholder location="classpath:*-${environment}.properties" ignore-unresolvable="true"/>

<bean id="dataSource" class="com.jolbox.bonecp.BoneCPDataSource" destroy-method="close">
        <property name="driverClass" value="${jdbc.driverClassName}" />
        <property name="jdbcUrl" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
        <property name="idleConnectionTestPeriodInMinutes" value="${boneCP.idleConnectionTestPeriodInMinutes}"/>
        <property name="idleMaxAgeInMinutes" value="${boneCP.idleMaxAgeInMinutes}"/>
        <property name="maxConnectionsPerPartition" value="${boneCP.maxConnectionsPerPartition}"/>
        <property name="minConnectionsPerPartition" value="${boneCP.minConnectionsPerPartition}"/>
        <property name="partitionCount" value="${boneCP.partitionCount}"/>
        <property name="acquireIncrement" value="${boneCP.acquireIncrement}"/>
        <property name="statementsCacheSize" value="${boneCP.statementsCacheSize}"/>
        <property name="lazyInit" value="true"/>
        <property name="maxConnectionAgeInSeconds" value="${boneCP.maxConnectionAgeInSeconds}"/>
</bean> 
```

该项目在Tomcat 7上运行

在本地机器上，项目部署没有错误，开发服务器也一样。不幸的是，该项目不能再部署在开发服务器上（服务器配置保持不变），而本地机器仍然很好。每次我在开发服务器上部署项目时，Tomcat 都会挂在 INFO: Deploying web application archive /etc/tomcat/webapps/project.war 上。但如果我用真实值配置 BoneCP，一切都很好。

谁能告诉我它有什么问题？

* * *

原来是lazyInit问题。如果我注释掉它，服务器可以正常启动。但现在我面临着新的问题。Mybatis根本无法访问db，而本地机器100%正常。但不要抛出任何异常。但是当我停止服务器时，我发现了以下异常

```
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.jolbox.bonecp.PoolUtil.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at com.jolbox.bonecp.DefaultConnectionStrategy.getConnectionInternal(DefaultConnectionStrategy.java:94)
    at com.jolbox.bonecp.AbstractConnectionStrategy.getConnection(AbstractConnectionStrategy.java:90)
    at com.jolbox.bonecp.BoneCP.getConnection(BoneCP.java:540)
    at com.jolbox.bonecp.BoneCPDataSource.getConnection(BoneCPDataSource.java:131)
    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:80)
    at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:66) 
```

和

```
INFO: Illegal access: this web application instance has been stopped already.  Could not load org.apache.ibatis.reflection.ExceptionUtil.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:363)
    at sun.proxy.$Proxy15.selectList(Unknown Source)
    at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:195)
    at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:124)
    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:90)
    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:40)
    at sun.proxy.$Proxy45.selectByExample(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:52:54.123

Well it could be many things but its most likely

1.  properties are not being replaced with the values you think
2.  the database number of connections has been exceeded or the wrong host
3.  A combination of 1 + 2

For #1 I would a make a separate bean that needs com.jolbox.bonecp.BoneCPDataSource as a dependency and have it print out the getters of BoneCPDataSource.

For #2 I would turn on as much logging as possible (see log4j or logback or whatever your logging framework is).

# c# - 如何从方法返回动作类型

> ID：14758384
> 
> 赞同：4
> 
> 时间：2013-02-07T18:31:05.750
> 
> 标签：c#, c#-4.0

我试图弄清楚如何从方法中返回一个动作。我在网上找不到任何这样的例子。这是我尝试运行但失败的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication8
{
    class Program
    {
        static void Main(string[] args)
        {
            var testAction = test("it works");
            testAction.Invoke();    //error here
            Console.ReadLine();
        }

        static Action<string> test(string txt)
        {
            return (x) => Console.WriteLine(txt);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:33:03.667

问题是`textAction`一个`Action<string>`，这意味着您需要传递一个字符串：

```
textAction("foo"); 
```

我怀疑你想要类似的东西：

```
class Program
{
    static void Main(string[] args)
    {
        var testAction = test();
        testAction("it works");
        // or textAction.Invoke("it works");
        Console.ReadLine();
    }

    // Don't pass a string here - the Action<string> handles that for you..
    static Action<string> test()
    {
        return (x) => Console.WriteLine(x);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:33:58.283

您返回的操作接受 a`string`作为它的参数。当您使用`Invoke`它时，您需要提供该参数：

```
testAction("hello world"); 
```

当然，您的操作会忽略该参数，因此更合适的解决方法是更改​​操作以使其不接受任何参数：

```
static Action test(string txt)
{
    return () => Console.WriteLine(txt);
} 
```

现在您的程序将按预期工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T18:33:12.453

由于您拥有的是`Action<String>`您的调用，因此您需要包含您正在操作的字符串。

```
testAction.Invoke("A string"); 
```

应该管用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T18:33:22.070

你要创建的动作应该是无参数的，这样你就可以在没有参数的情况下调用它。因此，更改 的返回类型`test`，并删除`x`您声明但从未使用过的返回类型：

```
 static Action test(string txt)
    {
        return () => Console.WriteLine(txt);
    } 
```

然后调用代码将起作用：

```
 var testAction = test("it works"); // store the string in txt
        testAction.Invoke();
        Console.ReadLine(); 
```

# django - django包含url配置

> ID：14758385
> 
> 赞同：1
> 
> 时间：2013-02-07T18:31:06.817
> 
> 标签：django

我在 ROOT_URLCONF 中有以下 url 模式：

```
urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

我的问题是包含如何工作。`'polls.urls'`和有什么区别`polls.urls`。第一个工作并引入 polls.urls.py 文件。

包含实际上做了什么？我可以指向文档吗？（当我谷歌搜索包含时，我只发现模板包含）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:33:51.707

一个是字符串，另一个是对象引用。您不能引用名称未知的对象。

```
import polls.urls 
```

[“包括其他 URLconfs”](https://docs.djangoproject.com/en/dev/topics/http/urls/#including-other-urlconfs)

# ruby-on-rails - 从 aws s3 下载 rails 控制器

> ID：14758386
> 
> 赞同：0
> 
> 时间：2013-02-07T18:31:14.387
> 
> 标签：ruby-on-rails, controller, amazon-s3, download

我正在尝试为我的用户构建一种非常简单的方法，以通过我的网站从 aws 下载音频内容。这是流程：

1.  我给用户一个下载链接。例如：www.mysite.com/foobar
2.  用户点击链接。
3.  在我的 rails 控制器中，我创建了一个过期的 aws s3 url 并自动开始从该 url 下载音频内容。
4.  用户的浏览器应该询问用户是否保存文件。如果用户接受保存文件，我希望回调我的 rails 应用程序以记录用户实际下载了文件。

因此，从用户的角度来看，我希望该过程像转到我确定的 url 一样简单，并在出现提示时接受下载文件。

在后台，我想对用户隐藏 aws s3 url，并且我希望在用户接受下载后可以灵活地编写回调逻辑。

实现这一目标的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:57:43.617

解决此问题的最佳方法是创建一个生命周期非常短（10 分钟？）的 S3 URL，并将重定向返回到 S3 URL。这确实向用户公开了 S3 url，但不是漏洞。

如果您想隐藏 S3 URL，您将需要通过您的服务器代理下载，这很昂贵并且会长时间消耗工作进程。我不推荐这样做，但这是隐藏 S3 资源的唯一方法。

此外，如果触发下载与视图很重要，则需要设置 Content-Disposition 标头以触发附件下载：

```
 Content-Disposition: attachment; filename="fname.ext" 
```

# crystal-reports - 我可以使用另一个字段作为同一表中的参考点来报告一个字段的值吗？

> ID：14758388
> 
> 赞同：1
> 
> 时间：2013-02-07T18:31:23.453
> 
> 标签：crystal-reports, crystal-reports-xi

我的报告返回默认值；

“我的猫又胖又懒”

```
Field_1           Field_2 
========          ========
1                  Sleek        
2                 Athletic 
```

但是我想用'Sleek'代替'Fat'，用'Athletic'代替'Lazy'

所以最后的字符串将读取；

“我的猫既时尚又运动”

我的问题是，如果 Field_1 = 1 将 Fat 替换为“Sleek”，我可以让报告（通过公式）获取吗？

Field_1 是静态的，但 Field_2 是动态的，值将根据数据而变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:38:21.223

根据您提取数据的方式，您可以通过以下几种方式执行此操作：

在 SQL 中添加 CASE 语句：

```
CASE WHEN field_1 = 1 THEN 'sleek' ELSE field_2 END AS modified_field_2 
```

在公式字段中（示例中使用的水晶语法）：

```
if { table_name.field_1 } = 1 then 'sleek' else { table_name.field_2 } 
```

* * *

编辑：

请参阅以下链接，了解如何将表连接到自身（自连接）以“链接”两条记录以获得完整句子的示例：[http ://sqlfiddle.com/#!2/59566 /16](http://sqlfiddle.com/#!2/59566/16)

# r - 使用 with par(mfrow=c()) 在一个图中绘制多个填充轮廓图

> ID：14758391
> 
> 赞同：6
> 
> 时间：2013-02-07T18:31:38.993
> 
> 标签：r, layout, graph, plot, contour

我正在尝试构建一个由 2-3 个`filled.contour`相邻的图组成的图。所有图的色标都相同，我只想要一个 z 值键图。我很难做到这一点`par(mfrow=c(1,3))`

示例代码：

```
x <- 1:5
y <- 1:5
z <- matrix(outer(x,y,"+"),nrow=5)
filled.contour(x,y,z)
filled.contour(x,y,z,color.palette=rainbow)
z2 <- z
z2[5,5] <- Inf
filled.contour(x,y,z2,col=rainbow(200),nlevels=200) 
```

是否可以仅使用一个 z 值颜色键将 2-3 个这些图彼此相邻堆叠？我可以在 GIMP 中做到这一点，但我想知道它是否可以在 R 中实现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T18:50:35.130

不，我认为这在`filled.contour`.

尽管已经为您编写了扩展。[可以在这里](http://wiki.cbr.washington.edu/qerm/index.php/R/Contour_Plots)、[这里](http://wiki.cbr.washington.edu/qerm/index.php/File:Filled.contour3.R)和[这里](http://wiki.cbr.washington.edu/qerm/sites/qerm/images/1/16/Filled.contour3.R)找到，还有一个[图例代码在这里](http://wiki.cbr.washington.edu/qerm/sites/qerm/images/2/25/Filled.legend.R)。[如果您正在使用这些网站上提到的 fill.contour3 功能，并且使用的是更新的版本，那么您需要使用此[SO 帖子](https://stackoverflow.com/a/16813077/1299362)中提到的升级修复]。使用我制作的那些代码：

![在此处输入图像描述](../Images/8f5df43dba5b60db8d9b11adff4bf60d.png)

# ios - 为什么我会在从 UIView 渲染的图像中看到来自子视图边缘的伪影？

> ID：14758395
> 
> 赞同：2
> 
> 时间：2013-02-07T18:31:48.323
> 
> 标签：ios, core-graphics

我有一个`viewA`由子视图网格组成的视图 ( )。我正在将`viewA`的图层渲染到图像上下文并查看子视图之间的线条。这些行在屏幕截图中不存在，就在我将视图渲染到图像上下文时。

这是一个截图`viewA`： ![<code>viewA</code> 的屏幕截图](../Images/496840f157b2589da763598e4ba550f3.png)

这是从以下位置渲染的图像`viewA`： ![从 <code>viewA</code> 渲染的图像](../Images/597f4d6a5ebb678ea7326fab62d770fa.png)

我正在使用以下代码呈现`viewA`到图像上下文：

```
- (void)saveToPhotoAlbum:(id)sender
{
    CGRect frame = self.view.bounds;

    UIGraphicsBeginImageContextWithOptions(frame.size, YES, [UIScreen mainScreen].scale);

    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];
    UIImage* image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIActivityViewController* avc = [[UIActivityViewController alloc] initWithActivityItems:[NSArray arrayWithObject:image] applicationActivities:nil];

    if ([[self class] iPad]) {
        if (popoverController) {
            [popoverController release], popoverController = nil;
        }
        popoverController = [[UIPopoverController alloc] initWithContentViewController:avc];
        [popoverController presentPopoverFromRect:[sender frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } else {
        [self presentViewController:avc animated:YES completion:^{

        }];
    }
    [avc release];
} 
```

# joomla-extensions - Joomla 自定义组件从 1.5 迁移到 2.5

> ID：14758399
> 
> 赞同：1
> 
> 时间：2013-02-07T18:32:10.370
> 
> 标签：joomla-extensions

我已将我的网站从 Joomla 1.5 迁移到 Joomla 2.5。第三方开发的自定义组件在 Joomla 2.5 中无法正常工作。现在，我面临着在新版本中完成这项工作的挑战。我不知道组件中使用的功能不起作用或引发错误。

任何人都可以分享 Joomla 2.5 中已弃用或应该更新的 Joomla 1.5 组件开发功能列表吗？

例如，请参阅以下函数/变量：

```
global $mainframe; // In Joomla 1.5

$mainframe =& JFactory::getApplication(); // In Joomla 2.5 
```

我只是想让自己更清楚，我正在寻找从 1.5 到 2.5 的 joomla 自定义组件迁移。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:06:31.253

您可以在下面找到一些有用的链接，但首先是**我的经验中的一些想法：**

*   如果您的组件是最先进的 Joomla 1.5 组件，将其升级到 2.5 不会那么难（一些/大多数组件的编码不是很好）。
*   想想/搜索已经在 2.5 中工作的替代品，它可能会为您省去麻烦
*   考虑重做/重新考虑整个组件，同时牢记当前的 Web 开发标准/趋势，对 Joomla! 的更改！API。

[将 Joomla 1.5 扩展适配到 Joomla 1.6](http://docs.joomla.org/Adapting_a_Joomla_1.5_extension_to_Joomla_1.6)

[Joomla 2.5 和 Joomla Platform 11.4 中潜在的向后兼容性问题](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_2.5_and_Joomla_Platform_11.4)

[将 Joomla 1.5 组件更新为 Joomla 2.5 组件的步骤 [关闭]](https://stackoverflow.com/questions/11505574/steps-to-update-joomla-1-5-component-to-joomla-2-5-component)

# makefile - 如何让 g++ 忽略来自包含项目的警告

> ID：14758400
> 
> 赞同：1
> 
> 时间：2013-02-07T18:32:11.030
> 
> 标签：makefile, g++

我正在制作一个依赖于其他两个项目（由其他人编写）的新项目。当我开发我的代码时，我想使用 g++ 选项，`-Wall -pedantic -Werror`但是当我使用这些选项时，我会通过包含来自其他两个项目的文件来获得大量警告。

有什么办法可以忽略这两个项目的警告，但仍然看到我自己项目的警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:08:44.650

If you're compiling their source directly via a makefile, you can make optional `CPPFLAGS`which you can use for conditional compilation parameters. For example:

`CPPFLAGS=-Wall -pedantic -Werror` for your project and `CPPFLAGS=-g` for their project files (or something).

Take the following sample makefile. Assume you wrote `factorial.cpp` and `hello.cpp` and they wrote `main.cpp`:

```
CPPFLAGS+=-Wall -pedantic -Werror

all: hello

hello: main.o factorial.o hello.o
    g++ main.o factorial.o hello.o -o hello

main.o: main.cpp
    g++ -c main.cpp

factorial.o: factorial.cpp
    g++ -c $(CPPFLAGS) factorial.cpp

hello.o: hello.cpp
    g++ -c $(CPPFLAGS) hello.cpp

clean:
    rm -rf *o hello 
```

Try something like that and get back to me.

# asp.net - 在javascript中单击时如何更新视图？

> ID：14758403
> 
> 赞同：0
> 
> 时间：2013-02-07T18:32:19.587
> 
> 标签：asp.net, asp.net-mvc, jquery, asp.net-mvc-4

在我看来，我的模型有一个仅由 a 组成的属性`get`。

```
@model Contoso.MvcApplication.ViewModels.QuizCompletedViewModel

<p>@Model.Property1</p> 
```

默认情况下，此属性以值 10 开头。并且所有时间都在查看该值。我想当我在`img`标签上按 clic 时，可以更新此属性（因为值始终保持不变），如何在不刷新页面的情况下更新属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:08:35.263

步骤 1) 修改视图以使计数器可被 jquery 寻址：

```
@model Contoso.MvcApplication.ViewModels.QuizCompletedViewModel

<p id="my-counter">@Model.Property1</p> 
```

现在，你需要在服务器上增加这个值吗？

如果您不需要将此递增值发送到服务器：

步骤 2) 使用 javascript/jquery 增加客户端上的值：

```
$("#my-image").click(function () { 
    var theValue = parseInt($("#my-counter").html());
    theValue = theValue + 10;
    $("#my-counter").html(theValue);
}); 
```

如果您确实需要在服务器上增加：

步骤 2) 创建一个控制器动作来处理增量

```
public ActionResult Increment(int currentValue)
{
    // save to the database, or do whatever
    int newValue = currentValue + 10;
    DatabaseAccessLayer.Save(newValue);

    Contoso.MvcApplication.ViewModels.QuizCompletedViewModel model = new Contoso.MvcApplication.ViewModels.QuizCompletedViewModel();

    model.Property1 = newValue;

    // If no exception, return the new value
    return PartialView(model);
} 
```

步骤 3) 创建一个仅返回新值的局部视图

```
@model Contoso.MvcApplication.ViewModels.QuizCompletedViewModel

@Model.Property1 
```

步骤 4) 修改 jquery 以发布到这个新的动作，它返回新的计数，并显示它

```
$("#my-image").click(function () { 
    $.get('/MyController/Increment/' + $("#my-counter").html(), function(data) {
        $("#my-counter").html(data);
    });
}); 
```

代码未经测试，但我认为非常接近，希望这能给出正确的想法。

# javascript - javascript，更改类，但仅在满足某些条件时

> ID：14758404
> 
> 赞同：1
> 
> 时间：2013-02-07T18:32:26.707
> 
> 标签：javascript, css, class

我有一个在页面上使用 ~~120 次的课程。仅当影响该类的其他事物满足特定标准时，我才想更改*边距底部。*下面代码的问题在于它改变了与该类相关的所有内容......而不仅仅是符合标准的那些。

```
if (actualCharacters > charactersCanFitInContainer) {
  $("#Full .t16").each(function () {
    $(this).css('margin-bottom', '1.25em');
  });

  $("#Full .t8").each(function () {
    $(this).css('margin-bottom', '4.4175em');
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:47:46.123

我想帮你解决你的问题，但前提是错误的。您不应该尝试在 jQuery 中执行此操作。也许你的 CSS 有问题，最好尝试使用 CSS 解决它。

话虽如此，让我们回顾一下您的代码的一些问题：

* * *

**(1) 不要使用 $( 选择器 ).each()**

当你调用 jQuery

```
$( selector ); 
```

这个小家伙返回了一个包含所有与选择器的 css 匹配的元素的数组。

可能有 200 个元素，甚至 1000 个元素，但永远不会`.each()`调用，除非您倾向于以独特的方式显式更改每个单独的元素。

`$( selector ).each()`在匹配的选择器数组上运行一个 for 循环，如果匹配的集合太大，这会给你带来性能问题。

要更改所有匹配的元素，您只需执行以下操作：

```
$( selector ).css('margin-bottom', '1.25em'); 
```

[阅读更多关于 .each()](http://api.jquery.com/jQuery.each/)

* * *

**(2) 不要使用 Javascript（或 jQuery）来做 CSS 的工作**

从您的问题来看，您似乎遇到了间距问题。CSS 有[多种](http://www.quirksmode.org/css/textoverflow.html) [方法](http://www.quirksmode.org/css/whitespace.html)可以使用诸如,[之](http://www.quirksmode.org/css/overflow.html) 类的规则来解决此问题 ，您应该在使用脚本之前对其进行探索。`overflow``white-space``text-overflow`

* * *

**(3) 避免使用 .css()**

您应该避免使用该`$( selector ).css()`函数，因为它也会引入性能问题，尤其是在大型集合上。相反，您应该创建一个可以应用于集合并使用的类：

```
$( selector ).toggleClass( 'myclass' );
//or 
$( selector ).addClass( 'myclass' ); //and 
$( selector ).removeClass( 'myclass' ); 
```

因为这些功能更*高效*。

更进一步，不要将类应用于每组匹配元素，而是将类添加到父元素并让子元素从更新的父类继承样式。

阅读更多关于[toggleClass()](http://api.jquery.com/toggleClass/)

* * *

**(5) 遵守约定**

虽然在命名 CSS 规则时使用大写字母是完全可以的，但您可能应该避免这种做法，因为这不是标准做法。拥有标准实践的全部意义在于，每个人都可以查看您的代码并确切知道发生了什么，这使您的代码更易于调试和共享。

* * *

**(6) 不要试图用过度设计的解决方案来弥补糟糕的设计**

还要考虑到，有时，如果您唯一的解决方案是编写样式脚本，则需要更改要求。

我遇到过项目经理想要完成的工作在技术上不可行的情况。如果他们希望在有限的区域内显示大量文本，他们需要允许滚动条之类的东西，或者考虑对文本块保持标准大小限制。

回到这个项目的利益相关者那里，告诉他们他们想做的事情是不合理的，并一起做出决定以更好地设计这个小部件。

作为一名开发人员，你不应该允许不合理的要求，有些东西只需要重新设计，而不是让你想出一个乱七八糟的方法来解决糟糕的设计。

* * *

**结论**

就您的问题而言，请使用专门解决您遇到的间距问题的 CSS 规则（溢出、文本溢出等）。您可能需要更深入地研究样式以找到更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:12:09.590

万一有人偶然发现这个问题和答案，我想发布我最终做了什么——特别感谢 Qdeninja 让我直截了当。

我没有通过 javascript 更改 CSS，而是使用简单的 @media 查询来处理下面的各种字体和间距更改。响应式设计有多种不同的方法。这最适合我的要求

```
@media all and (max-width: 1500px) 
{
    body
    {
        font-size:1.1em;
    }
    #Full
    {
        width:1200px; 
        background-color:Blue;
    }
    .theTeams
    {
        width:8.925em;
        padding-left:.238em;
        padding-right:.238em; 
    }
    .t8{margin-bottom:4.75em;}
    .t4{margin-bottom:11.75em;}
    .t2{margin-bottom:26.5em;}
    .tend{margin-bottom:0em;}
    .rtR{margin-left:19em;}

@media all and (max-width: 1200px) 
{
    body
    {
        font-size:0.9em;
    }
    #Full
    {
        width:900px; 
        background-color:Orange;
    }
    .theTeams
    {
        width:7.75em;
        padding-left:.14em;
        padding-right:.14em;
        height:2.1em;   
    } 
    .t8{margin-bottom:4.95em;}
    .t4{margin-bottom:12.25em;}
    .t2{margin-bottom:27.75em;}
    .tend{margin-bottom:0em;}
    .rtL{margin-left:16em;}     
} 
```

# excel - Excel - 根据某些文本将相邻数据值复制到另一个工作表，直到工作表末尾

> ID：14758410
> 
> 赞同：2
> 
> 时间：2013-02-07T18:32:48.337
> 
> 标签：excel, vba, copy

所以我有两个excel文件。

一个从 (RESULT.xlsm) 中获取数据。

另一个将数据插入（Summary.xls）。

我想要的是突出显示名称旁边的相邻单元格值插入到相应列下的 Summary.xls 中。所以我尝试录制一个宏，但发生的只是第一条记录被插入。

由于我只允许使用两个链接，所以我将它们全部放在一张图片中：http: [//i50.tinypic.com/9veihl.png](http://i50.tinypic.com/9veihl.png)

注意：RESULT.xlsm 中有多条记录，屏幕截图仅显示一条。

我想了解如何从所有记录集中提取数据并插入到 Summary.xlsx 中

这是录制的宏代码：

```
Sub Summ()

Workbooks.Open Filename:="Summary.xlsx"
Windows.Arrange ArrangeStyle:=xlVertical
Windows("RESULT.xlsm").Activate
Cells.Find(What:="Air System Name", After:=ActiveCell, LookIn:=xlFormulas _
    , LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False).Activate
Range("B10").Select
Selection.Copy
Windows("Summary.xlsx").Activate
Range("A5").Select
ActiveSheet.Paste
Windows("RESULT.xlsm").Activate
Cells.Find(What:="Floor Area", After:=ActiveCell, LookIn:=xlFormulas, _
    LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False).Activate
Range("B14").Select
Application.CutCopyMode = False
Selection.Copy
Windows("Summary.xlsx").Activate
Range("B5").Select
ActiveSheet.Paste
Windows("RESULT.xlsm").Activate
Cells.Find(What:="Total coil load", After:=ActiveCell, LookIn:=xlFormulas _
    , LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False).Activate
Range("B27").Select
Application.CutCopyMode = False
Selection.Copy
Windows("Summary.xlsx").Activate
Range("C5").Select
ActiveSheet.Paste
Windows("RESULT.xlsm").Activate
Cells.Find(What:="Sensible coil load", After:=ActiveCell, LookIn:= _
    xlFormulas, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
    xlNext, MatchCase:=False, SearchFormat:=False).Activate
Range("B28").Select
Application.CutCopyMode = False
Selection.Copy
Windows("Summary.xlsx").Activate
Range("D5").Select
ActiveSheet.Paste
Windows("RESULT.xlsm").Activate
Cells.Find(What:="Max block L/s", After:=ActiveCell, LookIn:=xlFormulas, _
    LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False).Activate
Range("B30").Select
Application.CutCopyMode = False
Selection.Copy
Windows("Summary.xlsx").Activate
Range("E5").Select
ActiveSheet.Paste
Range("A6").Select

End Sub 
```

我还在 mediafire 上附加了 excel 文件：

[Excel 文件](http://www.mediafire.com/?emxkkg6910588su)

请帮忙。

非常感谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:01:26.773

所以我查看了很多资源并尝试按照@Tim Williams 告诉我的内容，偶然发现了这个页面（最后一部分）：[https ://sites.google.com/a/madrocketscientist.com/jerrybeaucaires-excelassistant/文本函数/列集到行](https://sites.google.com/a/madrocketscientist.com/jerrybeaucaires-excelassistant/text-functions/column-sets-to-rows)

他们的解决方案几乎接近我的问题，所以我做了一些修改，我完成了：D

注意：这是在同一个文档中，不同的工作表。

它的代码：

```
Dim LR As Long, NR As Long, Rw As Long
Dim wsData As Worksheet, wsOUT As Worksheet
Dim HdrCol As Range, Hdr As String, strRESET As String

Set wsData = Sheets("Sheet1")   'source data
Set wsOUT = Sheets("Sheet2")    'output sheet
strRESET = "    Air System Name "    'this value will cause the record row to increment

LR = wsData.Range("A" & Rows.Count).End(xlUp).Row
'end of incoming data
Set HdrCol = wsOUT.Range("1:1").Find(strRESET, _
        LookIn:=xlValues, LookAt:=xlWhole)      'find the reset category column
If HdrCol Is Nothing Then
MsgBox "The key string '" & strRESET & _
    "' could not be found on the output sheet."
Exit Sub
End If

NR = wsOUT.Cells(Rows.Count, HdrCol.Column) _
        .End(xlUp).Row      'current output end of data

Set HdrCol = Nothing

On Error Resume Next
For Rw = 1 To LR
Hdr = wsData.Range("A" & Rw).Value

If (Hdr = "    Air System Name ") Then
NR = NR + 1
End If

If Hdr <> "" Then

    Set HdrCol = wsOUT.Range("1:1").Find(Hdr, _
            LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=False)

    If Not HdrCol Is Nothing Then
        wsOUT.Cells(NR, HdrCol.Column).Value _
                = wsData.Range("B" & Rw).Value

        Set HdrCol = Nothing
    End If
End If
Next Rw 
```

唯一的小问题是空间。在我的 excel 文档中，我的报告有尾随和前导空格，这与我的 sheet2 列标题不匹配，我暂时修复了它，因为我环顾四周，找不到自动修剪所有空间的方法整个专栏。

就是这样了：）

# c# - C#为什么跟踪停止工作

> ID：14758411
> 
> 赞同：0
> 
> 时间：2013-02-07T18:32:52.100
> 
> 标签：c#, nunit, trace

我有一个包含 2 个项目的 Visual Studio 解决方案。一个用于程序，另一个用于 NUnit。我运行 NUnit 测试和跟踪工作。我可以在 nunit runner 的文本输出部分看到它。我使用 TraceSource，并将这些东西放在配置文件中

```
<system.diagnostics>
    <!-- Different Sources to turn on or off-->
    <sources>
        <source name="MainProgram" switchName="switchAll" >
            <listeners>
                <remove name="Default"/>
                <add name="file"/>
                <add name="console"/>
            </listeners>
        </source>
        <source name="MainProgram.Test" switchName="switchAll" >
            <listeners>
                <remove name="Default"/>
                <add name="test"/>
                <add name="console"/>
            </listeners>
        </source>
    </sources>

    <!-- Different Switches... Don't Touch-->
    <switches>
        <add name="switchAll" value="All"/>
        <add name="switchOff" value="Off"/>
    </switches>

    <!-- Different Listeners... Don't Touch-->
    <sharedListeners>
        <!-- Outputs to a Log File-->
        <add name ="test"
             type ="System.Diagnostics.TextWriterTraceListener"
             initializeData="C:\test.log">
        </add>
        <!-- Outputs to a Log File-->
        <add name ="file"
             type ="System.Diagnostics.TextWriterTraceListener"
             initializeData="C:\mytracelog.log">
        </add>
        <!-- Outputs to the console-->
        <add name="console"
             type ="System.Diagnostics.ConsoleTraceListener" >
        </add>
    </sharedListeners>

</system.diagnostics> 
```

它可以按需要工作。所以我还需要在另一台计算机上测试这个程序。好的，够简单的。使用此计算机上的批处理文件将整个项目 bin 文件夹 Robocopy 到我网络上的共享位置。有另一个批处理文件将共享位置上的文件夹复制到另一台计算机的桌面。

在另一台计算机上启动 NUnit，什么都没有……没有输出到文本输出……我真的需要那个输出，因为我的一个测试如果失败，我需要跟踪。两台电脑最大的区别是一台是x86 win7，另一台是x64 win7。

有任何想法吗？？？我无法弄清楚为什么跟踪不起作用。

# c# - 部署服务器服务后如何自动刷新silverlight页面

> ID：14758412
> 
> 赞同：1
> 
> 时间：2013-02-07T18:32:54.323
> 
> 标签：c#, silverlight, deployment, version, ria

首先对我糟糕的英语感到抱歉。

我有一个 Silverlight 应用程序。而且有太多的客户在使用我的应用程序。

当我部署新版本时，我看到了同样的问题。正如我们所知，很多时候用户打开任何 Silverlight 窗口并且很长时间没有任何请求。如果我在用户打开窗口后将我的项目部署到服务器，并且用户将在部署后请求 *httpWebRequest_WebException_RemoteServer* 错误发生。

我如何知道在请求和自动刷新客户端页面之前服务版本已更改。

我向 App.xaml 添加了一个计时器，并每 5 分钟向服务器请求一次。如果服务器部署 *httpWebRequest_WebException_RemoteServer* 发生错误。我发现了这个异常，然后向用户显示警告消息。但我不能相信这种方式。

解决此问题的最佳方法是什么。

比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:48:39.120

我知道自动刷新您的 Siverlight 页面的最佳方式是管理您的 xap 的程序集版本（无论如何这是一个很好的做法）：即为每个版本增加它。

如果它与服务器版本不匹配，Silverlight 将自动下载它。

您可以在 properties->Application->Assembly Information 中更改您的程序集版本

```
[assembly: AssemblyFileVersion("1.0.0.1")] 
```

# ios - 拦截电话 - iPhone（连接 CoreTelephony 的正确方法）

> ID：14758413
> 
> 赞同：3
> 
> 时间：2013-02-07T18:32:55.907
> 
> 标签：ios, objective-c, hook, jailbreak, core-telephony

我是越狱调整开发场景的新手。我正在尝试找出适当的“挂钩”方法，以便我可以拦截来电（然后运行一些代码）。

我已经转储了 CoreTelephony 框架的头文件，但是似乎没有明显的方法可以挂钩。我试过了：

```
- (void)broadcastCallStateChangesIfNeededWithFailureLogMessage:(id)arg1;
- (BOOL)setUpServerConnection; 
```

但都没有奏效。工作我的意思是 - 当 iPhone 接到电话时被调用。

关于适当的钩子方法的任何指针？谢谢 ：）

*注意：这将是使用私有 API 的越狱调整，因此不会提交到 App Store。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:51:50.530

我没有测试您的代码，但我认为您的问题可能是您需要使用 Core Telephony 通知中心来注册该事件（不是您评论中代码中的内容）。像这样的东西：

```
// register for all Core Telephony notifications
id ct = CTTelephonyCenterGetDefault();
CTTelephonyCenterAddObserver(ct,   // center
                             NULL, // observer
                             telephonyEventCallback,  // callback
                             NULL,                    // event name (or all)
                             NULL,                    // object
                             CFNotificationSuspensionBehaviorDeliverImmediately); 
```

你的回调函数是

```
static void telephonyEventCallback(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo)
{
    NSString *notifyname = (NSString*)name;
    if ([notifyname isEqualToString:@"kCTCallIdentificationChangeNotification"])
    {
        NSDictionary* info = (NSDictionary*)userInfo;
        CTCall* call = (CTCall*)[info objectForKey:@"kCTCall"];
        NSString* caller = CTCallCopyAddress(NULL, call);

        if (call.callState == CTCallStateDisconnected)
        {
            NSLog(@"Call has been disconnected");
        }
        else if (call.callState == CTCallStateConnected)
        {
            NSLog(@"Call has just been connected");
        }
        else if (call.callState == CTCallStateIncoming)
        {
            NSLog(@"Call is incoming");
        }
        else if (call.callState == CTCallStateDialing)
        {
            NSLog(@"Call is Dialing");
        }
        else
        {
            NSLog(@"None of the conditions");
        }
    }
} 
```

我[在此类似问题中](https://stackoverflow.com/a/11236454/119114)提供了另一种技术。另外，请注意我在该问题中关于未在`UIApplication`已放入后台的通知中的评论。

**更新：**请参阅下面关于`kCTCallStatus`在 iOS 6 上使用而不是`kCTCall`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-30T09:34:38.553

是否可以？

是的。

一个没有计算机工程背景或不了解手机信号塔工作原理的普通普通人会具备这样的能力吗？

不。

从技术上讲，您可以购买看起来不便宜的路由器来执行此操作，这是非法的，并且手机公司实际上可以追踪它们，因为它会干扰网络。所以除了政府机构或国际间谍，我认为你没有什么可担心的。但是，如果政府正是你所担心的，我很遗憾地告诉你，他们所做的比仅仅拦截电话还要多

# c# - 密码要求字段的正则表达式

> ID：14758414
> 
> 赞同：0
> 
> 时间：2013-02-07T18:32:58.583
> 
> 标签：c#, asp.net, regex, vb.net

我有一个用于 asp.net 中用户的密码要求更改框。我正在尝试编写一个正则表达式，其中旧密码的四个字符不应与 C# 中新密码字符串的四个字符相同。如果它们相同，则代码应返回 false。

我可以在正则表达式中执行此操作吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:45:28.837

听起来您正在尝试解决[Longest Common Substring Problem](http://en.wikipedia.org/wiki/Longest_common_substring_problem)。不，我不相信正则表达式可以轻松解决问题。

这个 Wikibooks 在[http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Longest_common_substring](http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Longest_common_substring)有一个 C# 解决方案。

这似乎是一个 Java 解决方案，应该很容易适应 C#： http: [//karussell.wordpress.com/2011/04/14/longest-common-substring-algorithm-in-java/](http://karussell.wordpress.com/2011/04/14/longest-common-substring-algorithm-in-java/)

编辑注释：评论员所说的关于存储密码的内容。您真的根本不应该存储密码：而是存储密码的加盐密码哈希。不可恢复的密码不会丢失、被盗或误入歧途。

判断系统安全性的一个很好的初步方法是查看您是否可以恢复密码（而不是创建密码）。如果您可以恢复它，他们就会以一种可能会被破坏的方式存储您的凭据。

# android - 通知 android 应用程序有关服务器中的内容更改

> ID：14758421
> 
> 赞同：0
> 
> 时间：2013-02-07T18:33:13.860
> 
> 标签：android, push-notification

在此处发布此查询之前，我已经通过用户在[此处发布的类似要求](https://stackoverflow.com/questions/4447911/android-notify-android-phone-from-server)

根据研究，我的理解是，推送通知概念可用于通知应用程序服务器中发生的任何更改，当且仅当服务器控制权在我们手中。

我制作了一个应用程序，可以显示来自移动网站的数据。有没有办法通知手机用户服务器中发生的任何更改，以便用户在他的手机中收到警报，以便他可以打开应用程序并查看有什么新添加/更改发生在网站的时候，我对服务器没有控制权？请原谅我，如果我对这个问题听起来完全愚蠢。有这样的要求，很想知道出路，如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:22:09.007

这样，您应该构建自己的网络服务，该服务将轮询其他服务以进行更改，然后通过适用于 Android 的 Google Cloud Messaging (GCM) 将警报推送到 android 设备。

但是您也可以在后台服务中使用您自己的应用程序轮询此服务。由于电池消耗和使用网络连接，这种方法非常糟糕，但这不需要第三方服务

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-03T18:13:08.083

试试 noczone.com，他们有自定义通知服务和易于使用的 PHP sdk [https://noczone.com/?page=custom_alerts_sdk](https://noczone.com/?page=custom_alerts_sdk) 我用它来让我知道每当我收到支持票或任何新注册。你需要安装他们的应用程序才能接收通知 [https://play.google.com/store/apps/details?id=com.wr.noc](https://play.google.com/store/apps/details?id=com.wr.noc)

# haskell - 如何制作 Hackage 的私人副本

> ID：14758423
> 
> 赞同：19
> 
> 时间：2013-02-07T18:33:19.817
> 
> 标签：haskell, hackage

我想将全球 Hackage 数据库快照成一个冻结的、较小的数据库，以供我公司部署。怎样才能最轻松地将 Hackage 的某些片段复制到私人服务器上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:57:14.320

这是一个以最简单的方式执行此操作的脚本：[https ://github.com/jamwt/mirror-hackage](https://github.com/jamwt/mirror-hackage)

您还可以直接从 hackage2 存储库中使用 MirrorClient：[http ://code.haskell.org/hackage-server/](http://code.haskell.org/hackage-server/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T08:19:58.670

*这不是标题中问题的两个答案，而是对我对 OP 希望实现的目标的解释的答案。*

根据您对生产圈稳定性水平的要求，您可以通过多种方式解决问题。

我将依赖项分为两部分，我可以在 haskell 平台中使用的东西（保留生产中使用的每个平台），然后只使用少量的包，不要让任何人（包括你自己）添加只是因为懒惰（作为开发人员），更多的包进入你的依赖树。这些额外的包你使用某种脚本，并通过使用 cabal fetch 从 hackage（锁定到版本）中收集。保证他们的安全。创建一个使用您的安全包的安装脚本，如果将新机器（开发人员）添加到您的团队，请使用该脚本。

yackage 很棒，但这一切都取决于你如何运送你的产品。如果您在生产中有较旧的版本，则需要为每个版本进行 yackage 设置，几年后这可能会很烦人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-21T01:27:26.497

您可以使用 Voker57 的 hackage-mirror.sh 下载[Hackage](https://gist.github.com/Voker57/562813)。你需要'curl'才能运行。如果您使用的是基于 Debian 的 Linux 发行版，则可以通过键入*apt-get install curl 来安装 curl*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-29T16:08:11.343

虽然它不是 Hackage 的一部分，但我已经编写了一个[bash 脚本](https://github.com/AleXoundOS/haskell-stack-mirror-script)，它可以下载整个 Hackage，可以使用 HTTP 服务器进一步轻松地将其设置为镜像。此外，它还下载了所有必需的东西，例如准备好与[Stack](https://www.haskellstack.org)一起使用的 GHC 编译器。

目前，一个完整的 Hackage 镜像占用约 10GiB（约 100000 个所有版本的包）和 Stack 相关的东西，如 GHC 编译器约 21GiB（约 200 个文件）。脚本的后续运行会跳过已经下载的内容，因此它只会下载新的内容。因此，这是一种非常方便的“离线直播”和在线同步的方式。

# scala - Play 2.0 Scala 出错

> ID：14758428
> 
> 赞同：0
> 
> 时间：2013-02-07T18:33:38.077
> 
> 标签：scala, heroku, playframework-2.0, deadbolt

当尝试使用 Play2 ( [zentasks](https://github.com/playframework/Play20/tree/master/samples/scala/zentasks) ) 运行一些 Scala 示例时，我收到以下错误：

```
==== Maven Central: tried

http://repo1.maven.org/maven2/org/scala-sbt/sbt_2.9.1/0.12.0/sbt_2.9.1-0.12.0.pom

::::::::::::::::::::::::::::::::::::::::::::::

::          UNRESOLVED DEPENDENCIES         ::

::::::::::::::::::::::::::::::::::::::::::::::

:: org.scala-sbt#sbt_2.9.1;0.12.0: not found

:::::::::::::::::::::::::::::::::::::::::::::: 
```

我检查了以下内容：

1.  sbt 版本 = 0.12.1
2.  斯卡拉 = 2.9.2
3.  jvm = 1.6.0_37
4.  玩 2.0.4

我的项目/build.properties 如下：

```
sbt.version=0.11.3 
```

我已将 sbt 版本更改为 0.12.1；然而，似乎 Play2（这个版本）运行它自己的 Scala 和 sbt 版本。我的项目/plugins.sbt 是：

```
// Comment to get more information during initialization
logLevel := Level.Warn

// The Typesafe repository 
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/repo1/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.0.4") 
```

我能够毫无问题地创建一个“新”项目（在 prod 中工作），但我无法运行任何示例。我还在其他一些项目（[deadbolt2](https://github.com/schaloner/deadbolt-2-scala-examples)）上进行了尝试，并且遇到了同样的问题。

# jsp - 使用 Java EE Form 身份验证登录后访问用户详细信息

> ID：14758429
> 
> 赞同：3
> 
> 时间：2013-02-07T18:33:46.450
> 
> 标签：jsp, jakarta-ee, servlets, jdbcrealm, form-authentication

我已经实现了一个 Java EE 安全领域，如果用户尝试访问受保护的资源，它将重定向到 login.jsp。

*   假设用户想要访问一个受保护的 url -`http://mywebapp/shopping_cart`映射到 ShoppingCartServlet
*   由于他们没有登录 Glassfish 将他们定向到 login.jsp
*   然后他们输入他们的用户名和密码并单击登录，信息就会发布到`http://mywebapp/j_security_check`
*   如果他们输入了正确的详细信息，他们就会被重定向到处理 url 的 servlet`http://mywebapp/shopping_cart`

现在我想从数据库中提取用户的详细信息，但是当重定向请求中没有参数时我该怎么办？

他们的用户名已发送到，`http://mywebapp/j_security_check`但 j_security_check 发出的重定向请求中没有参数`http://mywebapp/shopping_cart`。那么用户登录后使用什么方法来访问用户的详细信息呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:41:26.453

创建一个[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，用于检查用户是否已登录，而`User`会话中不存在来自数据库的关联对象。然后，只需加载该数据并进入会话。

基本上，

```
@WebFilter("/*")
public class UserFilter implements Filter {

    @EJB
    private UserService service;

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        String remoteUser = request.getRemoteUser();

        if (remoteUser != null) {
            HttpSession session = request.getSession();

            if (session.getAttribute("user") == null) {
                User user = service.find(remoteUser);
                session.setAttribute("user", user);
            }
        }

        chain.doFilter(req, res);
    }

    // ...
} 
```

# c++ - 删除 HBITMAP 对象时堆损坏

> ID：14758430
> 
> 赞同：0
> 
> 时间：2013-02-07T18:33:46.823
> 
> 标签：c++, object, mfc, heap-corruption

我编写了这段代码来在 MFC 程序（Visual Studio 2010 中的 C++）中将位图打印到我的对话框中：

```
//Loop start
{
    //...
    //some prep stuff
    //...

    HBITMAP hBmp = myObv->GetBMP();
    CBitmap bmp;
    bmp.Attach(hBmp);
    CClientDC dc(this);
    CDC bmDC;
    bmDC.CreateCompatibleDC(&dc);
    CBitmap *pOldbmp = bmDC.SelectObject(&bmp);
    BITMAP  bi;
    bmp.GetBitmap(&bi);
    dc.BitBlt(384,26,bi.bmWidth/3,bi.bmHeight,&bmDC,0,0,SRCCOPY);
    bmDC.SelectObject(pOldbmp);

} 
```

这很好用，除了当我不断运行程序并绘制更多位图时，程序非常迅速（线性地）开始咀嚼我的可用内存：

![记忆](../Images/3e9caa5069b62520caa974232e2eaedb.png)

显然，快速下降是我关闭程序。

***但是当我尝试删除一些对象以试图阻止内存泄漏时，我的程序崩溃了。***

例如：如果我这样做

```
 delete hBmp; 
```

我得到错误：

![错误](../Images/697b66c53177b69f68bf837f30f193c1.png)

或者如果我删除 pOldbmp，我会收到错误消息：

![错误](../Images/8e1428a3e5ad2f2dc2658013c574f5d3.png)

如果我在循环之外声明这些对象并继续重用它们，我会得到致命的中止错误：

![致命的](../Images/2437ee94c9cb13ed4ae4a573c5095fe9.png)

这是怎么回事？？

为什么我不能删除这些对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:36:38.910

改为使用`DeleteObject(hBmp)`。

发生这种情况是因为您在尝试`delete hBmp`使用`SelectObject()`.

# php - 向服务器发送答案，并从服务器检索相关数组以获取下一个输入选项

> ID：14758435
> 
> 赞同：1
> 
> 时间：2013-02-07T18:34:07.243
> 
> 标签：php, javascript, html, mysql, ajax

我正在尝试使以下工作：我想将下拉菜单问题的答案发送到 php 脚本，这反过来又会给我从数据库中返回一个新的选择。然后我想使用这个新选择来更改辅助下拉菜单中的可用输入选项

最终目标是通过提供初步限制（选择您的城市）将选择选项从大约 200 个（日托中心）限制到大约 15 个

供参考“gem（ente）”是直辖市

剥离了我到目前为止的 javascript/ajax 部分是这样的：

```
function loadXMLDoc(str) {
      var xmlhttp;
      if (window.XMLHttpRequest)
         {// code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
         }
      else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
          xmlhttp.onreadystatechange=function(){
                 if (xmlhttp.readyState==4 && xmlhttp.status==200)
                 {
                 document.getElementById("gemeente").innerHTML=xmlhttp.responseText;
                 }
           }
      xmlhttp.open("POST","http:www.doenwatikkan.nl/jeroen/dynamic.php",true);
      xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
      xmlhttp.send(gem);
      alert(gem)
           } 
```

php部分是这个

```
<?php
include 'dbconnection.php';
$gem=$_POST["gem"];
$gennam=mysql_query("SELECT * FROM psz WHERE Gemeente='$gem'");
echo "ik ben in dit php script geweest";
$test="willekeurige string";
?> 
```

相关的 html/php 部分如下：

```
<select name="pszplaats" id="gemeente" onchange="fdisplay();loadXMLDoc(this.value)">
    <?php while($row=mysql_fetch_array($selectgem)){?>
    <option value="<?php echo $row['Gemeente']; ?>"><?php echo $row['Gemeente'];?>
    </option>
     <?php } ?>
    </select>
    <select name="psznaam" id="test" style="display:none">
    <?php while($row=mysql_fetch_array($gennam)){?>
    <option value="<?php echo $row['NaamPSZ']; ?>"><?php echo $row['NaamPSZ'];?>
    </option>
     <?php } ?>
    </select> 
```

javascript 中的 alert(gem) 部分有效，因此如果人们选择 minucupality 选项，它会显示在屏幕上，但 php 部分中的“echo”没有显示任何内容，所以我认为 ajax 看起来不在我的 php 中正确。

谁能告诉我我犯了什么愚蠢的错误，因为我无法弄清楚。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:45:05.357

我刚刚向你在后面的 PHP 脚本发出了一个快速请求，它正在输出 echo 的内容。

```
xmlhttp.open("POST","http:www.doenwatikkan.nl/jeroen/dynamic.php",true); 
```

上面的 URL 在“http:”之后似乎缺少“//”，我想您的浏览器将向“current_url/http:www...”发出请求，这当然是行不通的。

# c# - Entity Framework Fluent，Table-Per-Type 性能替代方案

> ID：14758436
> 
> 赞同：2
> 
> 时间：2013-02-07T18:34:13.510
> 
> 标签：c#, .net, entity-framework, entity-framework-4, fluent

我目前正在开发一个 EF Fluent 项目（是的，我确实喜欢这样写），该项目在 EF 4.3 上采用模型优先的方法，采用 Table-Per-Type 架构。

正如我在过去几个月中发现的那样，Table-Per-Type 和继承并不能很好地发挥作用 ->[更多信息](http://samscode.com/index.php/2010/01/the-entity-framework-v1-and-v4-deal-breaker-tpt-inheritance/)。我正在使用具有七个派生类的单个基类，并且仅在七个派生类中返回项目并不是特别快。在执行时间方面，EF 检索包含 5 条记录的列表需要 5 到 7 秒，随后的执行大约需要 2.5 到 4 秒。可以肯定地说这是不可接受的，所以我正在寻找替代方法......

我能做的是多次访问数据库，即尝试检索每种类型的对象个体并整理成一个集合；但是，该代码充其量是笨拙的，即

```
IList<MyBaseClass> items = new List<MyBaseClass>();

dbContext.Database.SqlQuery<MyFirstDerivedClass>("SELECT * FROM MyBaseClass INNER JOIN MyFirstDerivedClass ON...").ToList().ForEach(x => items.Add(x));

... repeat for each derived class...

return items; 
```

但它有效！对数据库的第一次点击需要 2 秒，随后的查询只需 200 毫秒。

我的问题是，这不是很优雅，可维护等，等等。我一直在玩弄将 dbContext 转换为 ObjectContext 并使用类似这样的存储过程（'spGetMyDerivedItems'）运行，返回所有排序的派生结果集一分贝命中...

```
IList<MyBaseClass> items = new List<MyBaseClass>();

ObjectContext oContext = ((IObjectContextAdapter)dbContext).ObjectContext;

using (var connection = oContext.Connection as EntityConnection)
{
    EntityCommand command = connection.CreateCommand();
    command.CommandType = CommandType.StoredProcedure;
    command.CommandText = "spGetMyDerivedItems";
    connection.Open();

    using (EntityDataReader reader = command.ExecuteReader())
    {
        oContext.Translate<MyFirstDerivedClass>(reader).ToList().ForEach( x => items.Add(x));
        reader.NextResult();
        ...repeat for each derived type...          
    }
}

return items; 
```

但是，这不适用于抱怨 CommandText 无效并且我必须提供“ContainerName”的 InvalidOperationException。我在这里的猜测是，如果我使用的是 EDMX 文件，我可以设置这个设置项（并且使用 DefaultContainerName 不起作用）。但我正在采取一种流利的方法，我觉得我已经走到了死胡同。

所以...

有哪些方法可以解决 EF 和 table-per-type 的性能问题？是否可以使用 Fluent / Model First 方法通过 ObjectContext 执行存储过程？我可以执行标准 SQLClient.SqlDataReader 并转换为 ObjectContext 吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:04:44.447

好的 - 似乎 ObjectContext 可以从 System.Data.SqlClient.SqlDataReader 转换，这意味着我不需要（直接）从 dbContext 派生。这是示例代码...

```
IList<MyBaseClass> items = new List<MyBaseClass>();

ObjectContext oContext = ((IObjectContextAdapter)dbContext).ObjectContext;

using (var sqlConn = new SqlConnection(dbContext.Database.Connection.ConnectionString))
{
    SqlCommand sqlComm = new SqlCommand(){
        Connection = sqlConn,
        CommandText = "spGetMyDerivedItems",
        CommandType = CommandType.StoredProcedure
    };
    sqlConn.Open();

    using (SqlDataReader reader = command.ExecuteReader())
    {
        oContext.Translate<MyFirstDerivedClass>(reader).ToList().ForEach( x => items.Add(x));
        reader.NextResult();
        ...repeat for each derived type...          
    }
}

return items; 
```

显然，最好的答案是 EF 会接受这个，但我目前对上述内容感到满意。迁移到 EF5 听起来是个不错的举措 - 但在不同的时间尺度下，你知道的魔鬼会更好 :)

谢谢您的帮助。

# javascript - ExtJS 4.1.x - 里面有一个组合框的选择器

> ID：14758443
> 
> 赞同：4
> 
> 时间：2013-02-07T18:34:30.307
> 
> 标签：javascript, extjs4.1

我有一个自定义选择器类，里面有一些文本字段和一个组合框。应用程序中的网格使用此选择器作为列的编辑器，但问题是，每当我单击组合框时，选择器都会失去焦点并关闭。有没有办法修改选择器以便使用组合框来选择数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:53:08.723

`collapseIf`我通过使用该功能找到了解决此问题的方法。

此代码检查事件目标是否是`BoundList`（内部用于`DataView`）`ComboBox`和选择器组件的一部分：

```
collapseIf: Ext.Function.createInterceptor(Ext.form.field.Picker.prototype.collapseIf, function (e) {
        var boundList = Ext.get(e.target).up('.x-boundlist'),
            cmp;

        cmp = boundList && Ext.getCmp(boundList.id);

        if (cmp && this.picker.down('#' + cmp.pickerField.id)){
            return false;
        }
    }) 
```

# c# - 拟合优度 C# 实现

> ID：14758450
> 
> 赞同：1
> 
> 时间：2013-02-07T18:34:53.610
> 
> 标签：c#, math, statistics, probability

有谁知道一些更流行的拟合优度测试（例如，Anderson-Darling、Kolmogorov-Smirnov 等）的开源 C# 实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:41:12.750

您可能对[元数值](http://metanumerics.codeplex.com/)感兴趣。有关可用的测试，请参阅[此处的文档。](http://metanumerics.codeplex.com/wikipage?title=Tests&referringTitle=Documentation)

# batch-file - 批处理脚本读取包含路径到目录的文件，并获取最新文件，从文件中读取最后一行并打印

> ID：14758451
> 
> 赞同：0
> 
> 时间：2013-02-07T18:34:55.207
> 
> 标签：batch-file

很抱歉标题很长，我想知道是否有人可以帮助我解决这个问题。

我要做的是读取一个包含 10 个不同目录路径的文件，获取该目录中的最新文件并读取该文件的最后一行。

```
@echo off
setlocal enableextensions enabledelayedexpansion
set host=%COMPUTERNAME%
echo Host: %host%
for /f "tokens=* delims=" %%I in (C:\temp\servers.txt) do (
    SET /A vidx=!vidx! + 1
    set var!vidx!=%%I
    echo Path-to-File: %%I
    for /f "tokens=* delims=" %%X in ('dir "%%I" /OD /B')  do (
    set newest=%%X
    )
    echo %newest%
    ) 
```

这是输出：

```
Host: Windows7
Path-to-File: \\Windows7\C$\direct\log\direct
ECHO is off.
Path-to-File: \\Windows7\C$\temp
ECHO is off. 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:03:05.673

对不起，我对你的描述有些困惑。下面的批处理文件是根据我了解您的要求编写的。

```
@echo off
setlocal EnableDelayedExpansion
echo Host: %COMPUTERNAME%

rem Process the file with the paths:
for /F "delims=" %%I in (C:\temp\servers.txt) do (
   echo Path-to-File: %%I
   rem Get the newest file in this directory
   for /F "delims=" %%X in ('dir "%%I" /OD /B') do (
      set "newest=%%~X"
   )
   echo Newest-File: !newest!
   rem Read the last line from this file
   for /F "usebackq delims=" %%L in ("!newest!") do (
      set "lastLine=%%L"
   )
   echo Last-Line: !lastLine!
) 
```

我希望它有帮助...

安东尼奥

# ruby - 无法激活 actionpack-3.2.9，因为 activesupport-3.2.11 与 activesupport (= 3.2.9) 冲突 (Gem::LoadError)

> ID：14758453
> 
> 赞同：1
> 
> 时间：2013-02-07T18:35:03.247
> 
> 标签：ruby, gem, activesupport, actionpack

无法激活 actionpack-3.2.9，因为 activesupport-3.2.11 与 activesupport (= 3.2.9) 冲突 (Gem::LoadError)

这有什么关系吗？

[无法激活 feedzirra-0.1.3，因为 activesupport-3.2.3 与 activesupport (~> 3.1.1) 冲突 (Gem::LoadError)](https://stackoverflow.com/questions/10101554/unable-to-activate-feedzirra-0-1-3-because-activesupport-3-2-3-conflicts-with-a)

如果是这样，我一点也不聪明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:50:43.237

不确定您是否曾经找到过这个问题的答案，但我在尝试自己解决这个问题时发现了您的问题。我最终跑了：

```
gem install bundler 
```

其次是：

```
bundle install 
```

这更新了我的项目的 gem，我不再收到错误消息。

# c# - 伪造一个泛型方法 FakeItEasy

> ID：14758455
> 
> 赞同：5
> 
> 时间：2013-02-07T18:35:13.543
> 
> 标签：c#, fakeiteasy

您将如何伪造以下内容：

```
public interface IBlah
{
    Func<T, bool> ApplyFilter<T>(Func<T, bool> predicate) where T:IMessage;
} 
```

我想要的是假货只是简单地返回它的论点而不做任何改变。但是，我想验证该假货是否只被调用过一次。下面给出了一个用例：

```
 public class Something
  {

     public Something(IBlah blah) { _blah = blah; }

     public bool DoSomething(SomeValue m, Func<SomeValue, bool> predicate)
     {
         Func<SomeValue, bool> handler = _blah.ApplyFilter(predicate);
         return handler(m);
     }
  } 
```

即假货需要充当通过，但我还需要能够验证它已被使用。

解决这个问题的最佳方法是什么？

[请不要担心人为的例子......幕后发生了很多事情，但我已将其简化为上面的例子。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:58:53.993

这会解决你的问题吗？它将通过谓词并验证 ApplyFilter 是否被调用了一次

```
 [Fact]
    public void TestFeature()
    {
        var fake = A.Fake<IBlah>();
        A.CallTo(() => fake.ApplyFilter(A<Func<int, bool>>.Ignored)).ReturnsLazily(x =>
            {
                return x.GetArgument<Func<int, bool>>("predicate");
            });
        var something = new Something(fake);
        var result = something.DoSomething(1, x => x > 1);

        Assert.False(result);
        A.CallTo(() => fake.ApplyFilter(A<Func<int, bool>>.Ignored)).MustHaveHappened(Repeated.Exactly.Once);
    } 
```

# centos - PIL selftest.py 因 Centos 6 64 位错误而失败：Jpeg 解码器不可用

> ID：14758456
> 
> 赞同：3
> 
> 时间：2013-02-07T18:35:16.140
> 
> 标签：centos, 64-bit, python-imaging-library, centos6, python-2.4

我在尝试让 selftest.py 成功运行的服务器上遇到困难。

我正在尝试让 PIL 1.1.7 与 Python 2.4.4 一起使用（版本是否兼容？）

像这样执行安装时：

```
# python2.4 setup.py install
running install
running build
running build_py
running build_ext
--------------------------------------------------------------------
PIL 1.1.7 SETUP SUMMARY
--------------------------------------------------------------------
version       1.1.7
platform      linux2 2.4.6 (#1, Dec 21 2012, 14:54:30)
              [GCC 4.4.6 20120305 (Red Hat 4.4.6-4)]
--------------------------------------------------------------------
*** TKINTER support not available
--- JPEG support available
--- ZLIB (PNG/ZIP) support available
--- FREETYPE2 support available
*** LITTLECMS support not available
--------------------------------------------------------------------
To add a missing option, make sure you have the required
library, and set the corresponding ROOT variable in the
setup.py script.

To check the build, run the selftest.py script.
running build_scripts
running install_lib
running install_scripts
changing mode of /usr/local/bin/pilconvert.py to 755
changing mode of /usr/local/bin/pilprint.py to 755
changing mode of /usr/local/bin/pilfile.py to 755
changing mode of /usr/local/bin/pilfont.py to 755
changing mode of /usr/local/bin/pildriver.py to 755
creating /usr/local/lib/python2.4/site-packages/PIL.pth 
```

一切看起来都很方便，花花公子。Jpeg 支持可用，一切都很高兴。但是 selftest.py 是另一回事：

```
 # python2.4 /usr/local/src/Imaging-1.1.7/selftest.py
 --------------------------------------------------------------------
 PIL 1.1.7 TEST SUMMARY rc/Imaging-1.1.7]# yum install libjpeg62-devel zlib1g-devel       libfreetype6-devel liblcms1-develp
 --------------------------------------------------------------------
 Python modules loaded from ./PIL
 Binary modules loaded from ./PIL
 --------------------------------------------------------------------
 --- PIL CORE support ok
 *** TKINTER support not installed
 *** JPEG support not installed
 *** ZLIB (PNG/ZIP) support not installed
 --- FREETYPE2 support ok
 *** LITTLECMS support not installed
 --------------------------------------------------------------------
 Running selftest:
 *****************************************************************
 Failure in example:
 try:
  _info(Image.open(os.path.join(ROOT, "Images/lena.jpg")))
 except IOError, v:
  print v
 from line #24 of selftest.testimage
 Expected: ('JPEG', 'RGB', (128, 128))
 Got: decoder jpeg not available
 1 items had failures:
    1 of  57 in selftest.testimage
     ***Test Failed*** 1 failures.
     *** 1 tests of 57 failed. 
```

我得到可怕的 Jpeg 解码器不可用。

我尝试了各种各样的事情。我将设置更改为指向不起作用的 usr/lib64。我在 usr/lib 中创建了一些符号链接以指向 libjpeg.so 文件，但这也不起作用。我在我们的服务器托管地点与技术人员来来回回，他们不理解这个问题，这就像对着墙说话。我真的被困住了。我唯一没有尝试过的是画中画，但我没有尝试过，因为我不知道它是如何工作的。所以我想避免这种情况。

是否存在兼容性问题或我不太正确的设置？

感谢您的帮助。

- 更新 -

这些天再次解决这个问题，我已经测试了 Centos 5 和 6 32 位，一切都像魅力一样安装，但 64 位我仍然遇到问题。

似乎自检适用于股票 python2.6，但不适用于 python2.4。Pil 1.1.7 与 2.4.4 兼容，但我认为 64 位库存在问题。仍在寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T16:44:57.073

经过广泛的测试，这是不可能的。

我确信它可以完成，但是将其关闭所需的步骤将非常密集，以至于很难保证服务器/系统的稳定性。

问题确实出在 64 位系统上。如果将 python 2.4 编译为 32 位，则 Python-Imaginging 将与 python 2.4 一起使用。但是，即使您将 Python-2.4 编译成 32 位，也很难使用库，因为 Centos 中的所有内容都是为 64 位构建的。并且获取这些额外的库很麻烦，因为存储库不包含您需要使其工作的结构。只是，烦人。兜兜转转是不可行的，试图支持这种跛行系统的时间被浪费了。并可能使系统处于危险之中。

不，不能在 64 位机器上安装 PIL for Python 2.4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T12:39:18.560

就我而言，我们不支持 PIL 中的所有库（CentOS 6、x64）

> ```
> *** TKINTER support not available
> *** JPEG support not available
> --- ZLIB (PNG/ZIP) support available
> *** FREETYPE2 support not available
> *** LITTLECMS support not available 
> ```

所以我们使用了以下内容：

```
yum install freetype freetype-devel libpng libpng-devel libjpeg libjpeg-devel 
```

现在我们有了

> ```
> *** TKINTER support not available
> --- JPEG support available
> --- ZLIB (PNG/ZIP) support available
> --- FREETYPE2 support available
> *** LITTLECMS support not available 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T21:24:49.520

3年后，我知道，但这可以正常工作！标准构建过程不会在 中查找库`/usr/lib64`，但您无法在运行时指定库路径`setup.py build`，因此您需要在之后的单独步骤中重新构建二进制文件：

```
yum install freetype-devel libpng-devel libjpeg-turbo-devel libzip-devel lcms-devel
pip download PIL
unzip pil-1.1.7.zip
cd pil-1.1.7
./setup.py build
./setup.py build_ext -L /usr/lib64/:/usr/local/lib64 --force
./setup.py install --prefix /usr/local/python27 --force --skip-build 
```

这是在 Scientific Linux 6.7 64 位上，使用从源代码编译的 Python 2.7。

# c - 使用 Arduino 和 HTTP 填写网络表单

> ID：14758457
> 
> 赞同：0
> 
> 时间：2013-02-07T18:35:18.563
> 
> 标签：c, http, arduino, webclient

我正在尝试让 arduino 登录到我创建的网站。
在网站上有一个基本表单，其中包含两个字段，一个用于密码，一个用于用户名，它还有一个标记为登录的提交按钮。

当我使用 chrome 登录时，我使用 fiddler2 来嗅探 http 数据包，并尝试使用该 http 帖子中的信息来重新创建我自己的登录帖子。

这是我用于登录的代码部分：

```
if (client.connect(server, 80)) {

 Serial.println("connected to server");

// Make a HTTP request:               
 client.println("POST/username=slwhore&passwd=1234qwer%21&op2=login&lang=english&force_session=1&return=B%3AaHR0cDovL3JlbW90bGV0LmNvbS8%3D&message=0&loginfrom=loginmodule&cbsecuritym3=cbm_56b7d5e7_00583e07_b0b6f81b4c86d117542f5cc7b7c3416e&Submit=Login HTTP/1.1");

client.println("Host:www.remotlet.com");

client.println("Content-Type: application/x-www-form-urlencoded");

client.println("Content-Length: 229");

client.println("Connection: close");

client.println(); 
```

然后我有另一段代码接收从我知道有效的主机返回的信息。当我运行此代码时，我能够连接到服务器，但我根本没有得到任何响应。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:08:34.923

Your HTTP request is completely wrong, it will never ever be accepted by any kind of server web.

1st line: the HTTP 1st line is METHOD URI VERSION. You didn't put a space between the method and the URI, also the POST data is *not* part of the URI as it is when using GET requests. I don't know what your server uses but usually sane logins don't use GET and don't pass the login inside the URI.

2nd line: you forgot a space

4th line: you set a content length but you don't send any content apparently.

General consideration: in HTTP the line terminator is \r\n, not just \n.

I suggest you do the request with the browser, intercept the traffic with wireshark and see how it's done.

# java - Java字符串分离

> ID：14758459
> 
> 赞同：2
> 
> 时间：2013-02-07T18:35:23.820
> 
> 标签：java, string, stringbuilder, stringtokenizer

我被困在试图获得所需的输出。它实际上是我在另一个问题中面临的字符串分离问题。

```
// 输入
        String input1 = "=DIVIDE(Input!RC,Input!R[1]C)"; // B1
        String input2 = "=DIVIDE(MULTIPLY(Input!R[-1]C,Input!R[1]C),100)"; // B2
        字符串 input3 = "=Input!R[-2]C + R[-1]C"; // B3
        String input4 = "=DIVIDE(R[-2]C,Input!R[-2]C)"; // B4
        字符串输入5 = "=R[-4]C+R[-1]C"; // B5

```

现在，在这里我必须用适当的 B 值替换 RC。

input5 的示例，我将查看 R[-4]C，然后由于它的 input5，我将添加 (-4) 和 (5) 以获得 1，并将 R[-4]C 替换为 B1。

它对所有人都是一样的。

```
// 期望的输出
        // =DIVIDE(输入！B1，输入！B2)
        // =除法（乘法（输入！B1，输入！B3），100）
        // =输入！B1+计算！B2
        // =DIVIDE(calc!B2,Input!B2)
        // =calc!B1+calc!B4

```

谁能给我一些想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:42:03.853

这里有一些想法：

```
identify offset (1 for input1, 2 for input2 etc)
for each match of "R" ( "[" DIGIT+ "]" )? "C"
  if DIGIT+ != "" then <index> = offset + tonumber(DIGIT+) else <index> = offset
  replace match with B<index> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:24:18.263

这就是想法

```
static String replaceB(String s, int n) {
    Matcher m = Pattern.compile("\\W(R(\\[(.+?)\\])?C)").matcher(s);
    for (; m.find(); m.reset(s)) {
        String r = "B" + (m.group(3) == null ? n : n + Integer.parseInt(m.group(3)));
        if (!r.startsWith("!")) {
            r = "calc!" + r;
        }
        s = s.replace(m.group(1), r);
    }
    return "B" + n + s;
}

public static void main(String args[]) throws Exception {
    String input1 = "=DIVIDE(Input!RC,Input!R[1]C)"; // B1
    String input2 = "=DIVIDE(MULTIPLY(Input!R[-1]C,Input!R[1]C),100)"; // B2
    String input3 = "=Input!R[-2]C + R[-1]C"; // B3
    String input4 = "=DIVIDE(R[-2]C,Input!R[-2]C)"; // B4
    String input5 = "=R[-4]C+R[-1]C"; // B5
    System.out.println(replaceB(input1, 1));
    System.out.println(replaceB(input2, 2));
    System.out.println(replaceB(input3, 3));
    System.out.println(replaceB(input4, 4));
    System.out.println(replaceB(input5, 5));
} 
```

印刷

```
B1=DIVIDE(Input!B1,Input!B2)
B2=DIVIDE(MULTIPLY(Input!B1,Input!B3),100)
B3=Input!B1 + calc!B2
B4=DIVIDE(calc!B2,Input!B2)
B5=calc!B1+calc!B4 
```

# python-2.7 - Python 2.7.3：搜索/计数 txt 文件中的字符串，返回该字符串最后出现的完整行

> ID：14758463
> 
> 赞同：1
> 
> 时间：2013-02-07T18:35:45.823
> 
> 标签：python-2.7, full-text-search

我正在尝试创建一个 WiFi 日志扫描仪。目前我们使用 CTRL+F 和我们的关键字手动浏览日志。我只想自动化这个过程。即敲入一个.txt 文件并接收输出。

我已经掌握了代码的基本内容，可以稍后再制作，但我遇到了一个小问题。我希望扫描仪搜索文件（完成），计算该字符串的实例（完成）并输出出现次数（完成），然后输出该字符串最后出现的整行，包括行号（行号不是必需的，只是让事情更容易做一个估计，如果有多个，这是最近的问题）。

目前，我正在获取包含字符串的每一行的输出。我知道为什么会这样，我只是想不出一种方法来指定只输出最后一行。

这是我的代码：

```
import os
from Tkinter import Tk
from tkFileDialog import askopenfilename

def file_len(filename):
    #Count Number of Lines in File and Output Result
    with open(filename) as f:
        for i, l in enumerate(f):
            pass     
    print('There are ' + str(i+1) + ' lines in ' + os.path.basename(filename))

def file_scan(filename):
    #All Issues to Scan will go here

    print ("DHCP was found " + str(filename.count('No lease, failing')) + " time(s).")
    for line in filename: 
        if 'No lease, failing' in line:
            print line.strip()

    DNS= (filename.count('Host name lookup failure:res_nquery failed') + filename.count('HTTP query failed'))/2
    print ("DNS Failure was found " + str(DNS) + " time(s).")
    for line in filename: 
        if 'Host name lookup failure:res_nquery failed' or 'HTTP query failed' in line:
            print line.strip()

    print ("PSK= was found " + str(testr.count('psk=')) + " time(s).")
    for line in ln:
        if 'psk=' in line:
            print 'The length(s) of the PSK used is ' + str(line.count('*'))

Tk().withdraw()
filename=askopenfilename()
abspath = os.path.abspath(filename) #So that doesn't matter if File in Python Dir
dname = os.path.dirname(abspath)    #So that doesn't matter if File in Python Dir
os.chdir(dname)                     #So that doesn't matter if File in Python Dir
print ('Report for ' + os.path.basename(filename))
file_len(filename)
file_scan(filename) 
```

这几乎就是我的工作代码（只需要添加更多问题搜索），我有一个[在这里](http://pastebin.com/0rtrsitb)搜索字符串而不是文本文件的版本。这将输出以下内容：

```
Total Number of Lines: 38
DHCP was found 2 time(s).
dhcp
dhcp
PSK= was found 2 time(s).
The length(s) of the PSK used is 14
The length(s) of the PSK used is 8 
```

我那里只有一般的东西，修改为字符串而不是 txt 文件，但我正在扫描的字符串将是 txt 文件中的内容。

不要太担心 PSK，我想要列出所有示例，我会看看是否可以在稍后阶段将它们整理成一行。

作为旁注，其中很多都是以前的搜索混杂在一起的，所以我有一个好主意，可能有更简洁的方法可以做到这一点。这不是我目前关心的问题，但如果您对这方面有任何建议，请提供解释/链接来解释为什么您的方式更好。我对python相当陌生，所以我主要处理我目前理解的东西。:)

提前感谢您的帮助，如果您需要任何进一步的信息，请告诉我。

乔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T16:47:24.703

为了搜索和计算字符串的出现次数，我通过以下方式解决了

```
'''---------------------Function--------------------'''
#Counting the "string" occurrence in a file
def count_string_occurrence():
    string = "test"
    f = open("result_file.txt")
    contents = f.read()
    f.close()
    print "Number of '" + string + "' in file", contents.count("foo")
        #we are searching "foo" string in file "result_file.txt" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:07:41.617

我还不能对问题发表评论，但我想我可以用更多信息更具体地回答你只想要哪一行？

例如，您可以执行以下操作：

```
search_str = 'find me'
count = 0
for line in file:
    if search_str in line:
        last_line = line
        count += 1
print '{0} occurrences of this line:\n{1}'.format(count, last_line) 
```

我注意到`file_scan`你在迭代两次`file`。您当然可以将其浓缩为一次迭代:)。

# sql - EPiServer-error，Dynamic Data Store 6.2.267.1 只能与数据库版本 6204 一起使用，当前版本为 6001

> ID：14758466
> 
> 赞同：1
> 
> 时间：2013-02-07T18:35:50.990
> 
> 标签：sql, episerver

我已将数据库从 EPiServer 5 升级到 6 R2。根据 Microsoft SQL Server Management Studio 中运行的脚本，当前数据库版本为“6103”。但是，当我尝试访问该网站时，出现以下错误（“当前版本为 6001”）：以前，同一数据库的副本已在同一网站上成功运行（相同的 web.config 和其他文件相同（唯一区别是连接字符串的数据库）。

```
Dynamic Data Store 6.2.267.1 can only be used with database version 6204, current version is 6001\. Make sure both database and assemblies are upgraded correctly. 
    Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Dynamic Data Store 6.2.267.1 can only be used with database version 6204, current version is 6001\. Make sure both database and assemblies are upgraded correctly.

Source Error: 

[No relevant source lines]

Source File: c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\87acb86c\7104e381\App_global.asax.j09cuuvu.0.cs    Line: 0 

Stack Trace: 

[InvalidOperationException: Dynamic Data Store 6.2.267.1 can only be used with database version 6204, current version is 6001\. Make sure both database and assemblies are upgraded correctly.]
   EPiServer.Data.Dynamic.Providers.DbDataStoreProvider.ValidateVersion() +427
   EPiServer.Data.Dynamic.Providers.DbDataStoreProvider.get_Connection() +36
   EPiServer.Data.Dynamic.Providers.DbDataStoreProvider.CreateCommand() +16
   EPiServer.Data.Dynamic.Providers.DbDataStoreProvider.ValidateVersion() +75
   EPiServer.Data.Dynamic.Providers.DbDataStoreProvider.Initialize(String name, NameValueCollection config) +564
   EPiServer.Data.Dynamic.Providers.DataStoreProvider.CreateInstance(ProviderSettings providerSettings) +198
   EPiServer.Data.Dynamic.Providers.DataStoreProvider.CreateInstance() +145
   EPiServer.Data.Dynamic.<>c__DisplayClass1.<InternalGet>b__0() +11
   EPiServer.Data.Cache.LocalCache`2.Add(TKey key, Boolean cacheNullValues, Boolean overwriteExistingValue, Func`1 action) +140
   EPiServer.Data.Cache.ReplicatedCache`1.Add(String key, Boolean cacheNullValues, Boolean overwriteExistingValue, Func`1 action, Boolean broadcast) +28
   EPiServer.Data.Dynamic.StoreDefinition.InternalGet(String storeName) +172
   EPiServer.Data.Dynamic.EPiServerDynamicDataStoreFactory.CreateStore(String storeName, Type type, StoreDefinitionParameters parameters) +110
   EPiServer.Data.Dynamic.EPiServerDynamicDataStoreFactory.CreateStore(Type type) +35
   EPiServer.Web.InitializationModule.InitializeDynamicDataStore() +169
   EPiServer.Web.InitializationModule.<Initialize>b__1a() +5
   EPiServer.Web.InitializeEngine.Initialize() +235
   EPiServer.Web.InitializationModule.Initialize(EPiServerSection config, Settings settings, ConnectionStringSettingsCollection connectionStringSettings) +2832
   EPiServer.Web.InitializationModule.<StaticInitialization>b__4() +34
   EPiServer.Web.InitializeEngine.Initialize() +235
   EPiServer.Web.InitializationModule.StaticInitialization() +1490
   EPiServer.Web.InitializationModule.Initialize(InitializationEngine context) +47
   EPiServer.Framework.Initialization.InitializationEngine.InitializeModules() +343
   EPiServer.Framework.Initialization.InitializationEngine.Initialize(HostType hostType) +83
   EPiServer.Framework.Initialization.InitializationModule.Initialize(HostType hostType) +163
   EPiServer.Framework.Initialization.InitializationModule.FrameworkInitialization(HostType hostType) +68
   EPiServer.Global..ctor() +54
   ASP.global_asax..ctor() in c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\87acb86c\7104e381\App_global.asax.j09cuuvu.0.cs:0

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +1136
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +111
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture) +23
   System.Web.HttpRuntime.CreateNonPublicInstance(Type type, Object[] args) +60
   System.Web.HttpApplicationFactory.GetNormalApplicationInstance(HttpContext context) +227
   System.Web.HttpApplicationFactory.GetApplicationInstance(HttpContext context) +107
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +327 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:51:19.877

听起来您混合了热修复和非热修复 6 R2 环境。

您需要为给出您发布的错误消息的数据库运行 SchemaUpdate.sql 脚本。

更多信息在这里： [http ://world.episerver.com/Blogs/Shahid-Nawaz/Dates/2012/1/General-Hotfix-CMS-6-R2/](http://world.episerver.com/Blogs/Shahid-Nawaz/Dates/2012/1/General-Hotfix-CMS-6-R2/)

# scala - 为什么 Scala 的 Either.RightProjection#filter 不返回 Either？

> ID：14758467
> 
> 赞同：6
> 
> 时间：2013-02-07T18:36:02.813
> 
> 标签：scala, functional-programming

使用 Scala 2.9.1，考虑以下两个实例`Either`：

```
scala> val er: Either[String, Int] = Right(1)
er: Either[String,Int] = Right(1)

scala> val el: Either[String, Int] = Left("a")
el: Either[String,Int] = Left(a) 
```

很棒的是，通过使用`left`and`right`投影，可以使用 for-comprehensions（通过投影 Either 的有偏单子）：

```
scala> for { r <- er.right } yield r * 2
res6: Product with Either[String,Int] with Serializable = Right(2)

scala> for { r <- el.right } yield r * 2
res7: Product with Either[String,Int] with Serializable = Left(a) 
```

有人可以向我解释为什么决定不让该`filter`方法返回一个 Either 吗？我本来希望以下工作：

```
scala> for { r <- er.right if r > 2 } yield r * 2 // r is NOT greater than 2!
res8: Product with Either[String,Int] with Serializable = Left(a) 
```

相反，您会收到以下错误： :9: error: value * is not a member of Either[Nothing,Int] for { r <- er.right if r > 2 } yield r * 2

看起来底层调用`Either.RightProjection#filter`实际上返回了一个`Option`：

```
scala> er.right.filter(_ > 2)
res9: Option[Either[Nothing,Int]] = None 
```

这破坏了在 for-comprehension 中使用 if 子句，至少是我尝试使用它的方式。

有没有人解释为什么这个设计是这样的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T19:01:01.913

归结为这样一个事实，如果您有 a `Right(b)`，但您的过滤谓词失败，则您没有任何价值可放入 a `Left`。

您可能会想象一个适用于您的情况的实现，`Either[String, Int]`但默认值为`Left("")`. Scala 标准库没有为您生成值的工具，因为它不包含诸如可以确定类型的“空”值的 monoid 之类的概念。

Scalaz库确实包含一个 monoid 类型类，版本 7 还包含一个右偏析取类型[（](https://github.com/scalaz/scalaz)`\/[A, B]`与 同构`Either[A, B]`），它有一个`filter`方法 iff 左类型是一个幺半群：

```
scala> \/.right[String, Int](1).filter(_ > 2)
res1: scalaz.\/[String,Int] = -\/() 
```

但是对于一般情况，你不能这样做——如果你有一个`Either[Nothing, Int]`，你永远不能产生一个左值。

# api - 使用 RESTful API - 安全吗？

> ID：14758469
> 
> 赞同：6
> 
> 时间：2013-02-07T18:36:09.397
> 
> 标签：api, url, rest, https

我们正在与通过 RESTful API 公开其服务的服务提供商合作。

我们可以通过将用户名和密码作为 URL 参数传递来使用 API 进行身份验证。

例子：`https://example.com/api/service.json?api_user=Username&api_key=Password`

我知道这是使用 SSL。但是，由于用户名和密码是URL的一部分，这不能被第三方拦截吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T18:40:30.590

不可以，第三方只能看到目的地 (example.com)。URL 的其余部分实际上嵌入在请求中。

它有助于理解如何发出 HTTP（或 HTTPS）请求的过程。

1.  确定协议（在本例中为 HTTPS，使用端口 443）
2.  使用 DNS 获取服务器的 IP 地址
3.  建立与服务器的 TCP 连接（如果涉及 SSL，则有点复杂）
4.  在新连接上向服务器发出请求，看起来像

    `GET /api/service.json?api_user=Username&api_key=Password`

由于实际请求是加密数据流的一部分，因此监视连接的人无法提取敏感信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T22:02:09.707

以前的答案在技术上都是正确的；如果您使用 HTTPS，则 URL 和查询字符串数据将在传输之前被加密，并且可以被认为是安全的。

然而，API 要求用户名和密码作为查询字符串参数这一事实可能表明安全性方法有些松懈。

例如，许多网络服务器将默认记录请求查询字符串参数，这意味着您的纯文本凭据可能位于磁盘上的某个地方（并且许多公司将以不安全的方式存储或备份网络服务器日志）。

简而言之：将凭据作为查询字符串参数传递*本身*并不是安全风险，但通常是一种不好的做法，并且可能是更大安全问题的症状。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T19:11:24.103

> 但是，由于用户名和密码是URL的一部分，这不能被第三方拦截吗？

URL 也是在加密的情况下发送的。换句话说，保护通道的过程发生*在*URL 发送到服务器之前。

你安全了。

# python - 用 Python 编写 XFCE 面板插件？

> ID：14758470
> 
> 赞同：10
> 
> 时间：2013-02-07T18:36:12.283
> 
> 标签：python, xfce

我用谷歌搜索了一下，但找不到太多。[这](http://pyxfce.xfce.org/)似乎已经过时了，并且没有提供任何示例。这可能吗？我应该闭嘴学习C吗？

# ios - 从 NSStrings 中提取数字

> ID：14758472
> 
> 赞同：1
> 
> 时间：2013-02-07T18:36:18.187
> 
> 标签：ios, xcode

我有很多 NSString 看起来像这样：

```
@"this is the content. The content of this string may vary, as well as the length, and my include any characters, with numbers Y = 295.000000 X = 207.500000" 
```

Y = 295.000000 X = 207.500000 部分始终保持不变，但 X 和 Y 数字可能会发生变化。

我需要以某种方式获取这些数字并执行以下操作：

```
coordsFinal.x = 295.000000;
coordsFinal.y = 207.500000; 
```

其格式为：

```
coordsFinal.x = [NSString stringWithFormat: @"%@", trimmed string]; 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:59:52.670

您可以使用正则表达式来提取数字：

```
NSString *string = ...; // Your string
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"Y = (\\d+.\\d+) X = (\\d+.\\d+)" options:0 error:NULL];
NSTextCheckingResult *match = [regex firstMatchInString:string options:0 range:NSMakeRange(0, [string length])];
if (match) {
    NSRange yRange = [match rangeAtIndex:1];
    NSString *yString = [string substringWithRange:yRange];
    NSRange xRange = [match rangeAtIndex:2];
    NSString *xString = [string substringWithRange:xRange];

    NSLog(@"X = %@, Y = %@", xString, yString);
} 
```

*输出：*

```
X = 207.500000, Y = 295.000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:17:27.410

您只需要以下方法来调用要修剪的字符串

```
 [yourstring stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] 
```

# ios - 无法在 iOS 设备上显示 UTF-8 字符

> ID：14758476
> 
> 赞同：2
> 
> 时间：2013-02-07T18:36:42.770
> 
> 标签：ios, encoding, utf-8, fonts

我想在 UIButton 中显示 ⟨ UTF-8 字符（在[Unicode 字符](http://en.wikipedia.org/wiki/List_of_Unicode_characters)中又名 \u27E8 ）并且尝试了很糟糕的时间。

我尝试了以下选项，但都没有奏效，最终我的设备上出现了一个丑陋的正方形。

```
[myButton setTitle:@"⟨" forState:UIControlStateNormal];
[myButton setTitle:@"\u27E8" forState:UIControlStateNormal]; 
```

我无法通过 UIWebView 获得更大的成功：

```
[webView loadHTMLString:@"<html><head><meta charset=\"utf-8\"></head><body>Coucou ⟨ &#10216;</body></html>" baseURL:nil]; 
```

我确保我的源代码以 UTF-8 编码。

关于我应该如何尝试做到这一点的任何想法？是嵌入的字体错过了字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T15:32:23.103

我们在这里实现的解决方案是创建我们自己的字体。

我们选择了基本字体 A（具有我们想要的基本字符的字体）和 B（包括缺少的特殊字符 A），并获得了许可，允许将它们混合以创建第三种字体 C，并通过从 B 到 A 精心挑选所需的字符TypeTool[软件](http://www.fontlab.com/font-editor/typetool/)。

# ember.js - 早午餐，JSDom：对象 [jsdom NodeList]：包含 3 个项目没有方法“地图”

> ID：14758477
> 
> 赞同：2
> 
> 时间：2013-02-07T18:36:43.390
> 
> 标签：ember.js, mocha.js, jsdom, brunch

我正在尝试使用 Ember、Brunch 和 JSDom 进行无头测试。我正在使用 ember-brunch-skeleton 生成应用程序。

[https://github.com/fuseelements/ember-brunch-skeleton](https://github.com/fuseelements/ember-brunch-skeleton)

我已经安装了所有依赖项。

当我尝试运行“早午餐测试”时，出现以下错误。似乎我在这里缺少一些基本的东西，但这是我第一次使用 node.js/jsdom/mocha 等。我缺少什么？

```
 TypeError: Object [ jsdom NodeList ]: contains 3 items has no method 'map'
  at getScriptFilesPath (/usr/local/lib/node_modules/brunch/lib/commands/test.js:62:60)
  at readTestFiles (/usr/local/lib/node_modules/brunch/lib/commands/test.js:80:25)
  at fs.readFile (fs.js:176:14)
  at fs.close     (/usr/local/lib/node_modules/brunch/node_modules/rimraf/node_modules/graceful-fs/graceful-fs.js:90:5)
  at Object.oncomplete (fs.js:297:15) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:37:35.670

看起来这与 jsdom 的 0.4.0 版本不同。具体来自[变更日志](https://github.com/tmpvar/jsdom/blob/master/Changelog.md)：

> *   更改：NodeLists 不再不一致地具有数组方法。以前，活动节点列表将具有 indexOf，而静态节点列表将具有它们全部。现在，它们根本没有数组方法，按照规范是正确的。

如果您正在寻找快速修复，恢复到 jsdom 0.3.4 应该可以解决问题：

```
npm uninstall jsdom
npm install jsdom@0.3.4
brunch test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:22:42.667

I could solve this by uninstalling `brunch` and installing it again.
It seemed `npm` was using a old installed version.

Just try:

```
npm uninstall brunch -g
npm install brunch -g
npm test

brunch --version # should be 1.5.3 
```

# postgresql - 按依赖的逻辑顺序列出表

> ID：14758478
> 
> 赞同：0
> 
> 时间：2013-02-07T18:36:51.037
> 
> 标签：postgresql, metadata

好吧，我需要按逻辑顺序列出我的 postgres 数据库的所有表，以删除数据而不会出现任何外键问题。

我怎样才能找到这样的信息？

只有我需要列出表名。没有更多信息。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:26:25.980

如果您需要删除数据，那么有以下类似的问题：[删除数据级联](https://stackoverflow.com/questions/129265/cascade-delete-just-once)

如果您想删除表格，请使用`drop table x cascade`? [docs](http://www.postgresql.org/docs/9.1/static/ddl-depend.html)使用`CASCADE`postgres 将自动删除所有依赖对象 - 表，视图，...

# vb.net - 报告带有嵌入图像的 PDF 导出的查看器错误

> ID：14758479
> 
> 赞同：0
> 
> 时间：2013-02-07T18:36:53.517
> 
> 标签：vb.net, reporting, reportviewer, reportviewer2008

我有 15 个程序中的一个不会将报告导出为 PDF。如果我删除它导出的嵌入图像。看来这与嵌入的图像有关。我得到错误：

```
"Export Error":
An Error occurred during local report processing.
An error occurred during rendering of the report.
An error occurred during rendering of the report.
Non-negative number required
Parameter name: value 
```

它将导出到excel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:56:33.317

图像已损坏。我从嵌入的图像中删除了图像，并删除了使用的 jpeg。然后我嵌入了一个新图像，并将其添加到报告中......没有问题。

# mongodb - 使用 mongodb 对 gridfs 文件进行 MapReduce

> ID：14758480
> 
> 赞同：0
> 
> 时间：2013-02-07T18:36:54.520
> 
> 标签：mongodb, mapreduce, gridfs

我想将 bson 文档存储在 gridfs 中，因为它们会迅速增长超过 16MB。但我还必须对它们进行一些 mapreduce 分析。这是可能的还是我必须将文档拆分为多个文档才能做到这一点。教程和其他东西总是在谈论图片、视频等二进制数据，而不是关于 bson 文档

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:31:21.030

GridFS 仅用于存储二进制文件。这并不意味着拆分普通文档（您称之为 BSON 文档）。如果您的 BSON 文档太大，您需要重新考虑您的数据模式。如果您提供该架构，我可以使用提示和技巧更新我的答案。

# python - Django 的 classonly 方法有什么用？

> ID：14758483
> 
> 赞同：2
> 
> 时间：2013-02-07T18:37:10.553
> 
> 标签：python, django

源代码如下：

```
class classonlymethod(classmethod):
    def __get__(self, instance, owner):
        if instance is not None:
            raise AttributeError("This method is available only on the view class.")
        return super(classonlymethod, self).__get__(instance, owner) 
```

虽然我可以看到 classonlymethod 只能在类上调用，而不能在实例上调用，这与 python 的 classmethod 不同，但为什么我们需要这样的“限制”？

www 上关于 classonlymethod 的内容不多，任何外行的例子都一如既往地受到赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:47:33.860

它在基于类的视图内部使用，`as_view`以向尝试在实例上调用它的人提供描述性错误消息。

我不确定是谁首先决定它是强制性的。

# java - 我的算法有问题解决拼图板

> ID：14758485
> 
> 赞同：0
> 
> 时间：2013-02-07T18:37:13.797
> 
> 标签：java, array-algorithms, boggle

所以我对 Java 比较陌生（我目前正在我的学校学习 AP java），我正在尝试开发一种递归算法来解决 n*n 板，我觉得我非常接近，但还没有完全达到。我已经写了所有东西来遍历我的字典以查找我发送的字母是否是单词等。我的算法是让我的数组中的起始字母为 (n,p)，将这些坐标发送到另一个方法去各个方向寻找所有可能的组合。一旦找到以 (n,p) 开头的所有组合，我将递增 p 直到它到达行的末尾，然后我将递增 n 并再次从 0 开始 p。（我只浏览了一半的字母，因为前后组合都是一样的）

我遇到问题的部分是递归序列，因为一旦我越过板上的某个位置，我想标记它以确保在序列的其余部分我永远不会再越过它。它不能完全工作，我想知道是否有人可以告诉我为什么/帮助我编写更好的算法。提前致谢

```
public void AllLetters(int n, int p, int x, int y,String word, String MyLetteres[][]){
    int temp=0;
    int StartLetter =(int)(Math.pow(MyLetteres.length,2));
    while(temp<StartLetter)//runs through every letter
    {   
        if(temp==0)
            getPaths(p, n,x,y,word, MyLetteres);
        else if(temp%(MyLetteres.length-1)==temp){
            getPaths(p, n+1,x,y,word, MyLetteres);
        }
        else {
            getPaths(p+1, 0,x,y,word, MyLetteres);
        }
        if(temp==(StartLetter/2-1)){
            temp=StartLetter;
        }
        temp++;
    }

}

public void getPaths(int p, int n, int x, int y,String word, String MyLetteres[][]){
    if( x ==p-1 && y == n-1){//reach the (n,p) point
    System.out.print("");
    }else if( x >= MyLetteres.length || y >= MyLetteres.length||x < 0 || y < 0){//out of bounds
    return;
    }else {
        if(x+1<MyLetteres.length&&!MyLetteres[x+1][y].equals("0")){//up{
            word=word+""+MyLetteres[x+1][y];
            Check(word);//function that checks if it is a word
            reverse(word);//checks its a word backwards (for efficenicy)
            MyLetteres[x+1][y]="0";//marking that I've used this position
            System.out.print("1");//debugging purposes
            getPaths(n,p, x +1, y,word , MyLetteres);
        }
        if(x-1>0&&!MyLetteres[x-1][y].equals("0")){//down
            word=word+""+MyLetteres[x-1][y];
            Check(word);
            reverse(word);
            MyLetteres[x-1][y]="0";
            System.out.print("2");
            getPaths(n,p, x -1, y ,word, MyLetteres);
        }
        if(y+1<MyLetteres.length&&!MyLetteres[x][y+1].equals("0")){//right
            word=word+""+MyLetteres[x][y+1];
            Check(word);
            reverse(word);
            MyLetteres[x][y+1]="0";
            System.out.print("3");
            getPaths(n, p,x , y +1,word, MyLetteres);
        }
        if(y-1>0&&!MyLetteres[x][y-1].equals("0")){//left
            word=word+""+MyLetteres[x][y-1];
            Check(word);
            reverse(word);
            MyLetteres[x][y-1]="0";
            System.out.print("4");
            getPaths(n,p, x , y -1,word, MyLetteres);
        }
        if(x+1<MyLetteres.length&&y+1<MyLetteres.length&&!MyLetteres[x+1][y+1].equals("0")){//right, up
            word=word+""+MyLetteres[x+1][y+1];
            Check(word);
            reverse(word);
            MyLetteres[x+1][y+1]="0";
            System.out.print("5");
            getPaths(n,p, x +1, y +1,word, MyLetteres);
        }
        if(x-1>0&&y-1>0&&!MyLetteres[x-1][y-1].equals("0")){//down, left
            word=word+""+MyLetteres[x-1][y-1];
            Check(word);
            reverse(word);
            MyLetteres[x-1][y-1]="0";
            System.out.print("6");
            getPaths(n,p, x-1 , y -1,word, MyLetteres);
        }
        if(x-1>0&&y+1<MyLetteres.length&&!MyLetteres[x-1][y+1].equals("0")){//down, right
            word=word+""+MyLetteres[x-1][y+1];
            Check(word);
            reverse(word);
            MyLetteres[x-1][y+1]="0";
            System.out.print("7");
            getPaths(n,p, x+1, y-1, word,MyLetteres);
        }
        if(x+1<MyLetteres.length&&y-1>0&&!MyLetteres[x+1][y-1].equals("0")){//up, left
            word=word+""+MyLetteres[x+1][y-1];
            Check(word);
            reverse(word);
            MyLetteres[x+1][y-1]="0";
            System.out.print("8");
            getPaths(n, p,x-1 , y +1, word,MyLetteres);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:22:56.643

您将 0 写入`MyLetteres`以防止递归循环回到自身。但是一旦递归调用返回，您需要恢复该位置的原始字母。否则，搜索只能在它尝试的所有分支上查看每个位置一次。

（此外，您可以通过循环（x，y）偏移量列表来大大简化代码，而不是`if`为每个偏移量单独声明）

**编辑：**

```
int[][] offsets = { {-1, -1}, {0, -1}, {1, -1}, 
                    {-1,  0},          {1,  0}, 
                    {-1,  1}, {0,  1}, {1,  1} };

for(int[] off : offsets) {
   nx = x + off[0];
   ny = y + off[1];
   if(nx < 0 || ny < 0 || nx >= MyLetteres.length || ny >= MyLetteres[nx].length) {
      continue;
   }
   String letter = MyLetteres[nx][ny];
   if(letter.equals("0")) {
      continue;
   }
   MyLetteres[nx][ny] = "0";
   Check(word + letter);
   reverse(word + letter);
   getPaths(n,p, nx, ny, word + letter, MyLetteres);
   MyLetteres[nx][ny] = letter;
} 
```

# blueprint-css - 蓝图 CSS 最后一列无法正常工作

> ID：14758486
> 
> 赞同：1
> 
> 时间：2013-02-07T18:37:19.490
> 
> 标签：blueprint-css

我有一个 10 列的蓝图设置，并且无法让两个 div 每个 5 列宽。第二个总是跳到第一个下面，即使我在第二个 div 中有“最后一个”。

这是代码：

```
<div class="container">

<div class="span-5">
    <ul><li><p><strong>Discounts on professional development programs that protect your interests.</strong> We monitor state and national policy issues that affect our industry and take action on our members' behalf. These efforts ensure that our members have a powerful voice and strong representation on the issues that matter.</p></li></ul>
</div>

<div class="span-5 last">
<ul><li><p><strong>Marketing and promotional opportunities and management and operational resources.</strong> You get access to useful tools as well as valuable insights and expert perspectives on industry issues and trends that will help your business succeed.</p></li></ul>
</div>

</div> 
```

这是CSS的一部分：

```
 == STRUCTURE: ========================
    * Page width:            640 px
    * Number of columns:     10
    * Column width:          55 px
    * Margin width:          10 px
   ======================================

   By default, the grid is 640px wide, with 10 columns 
   spanning 55px, and a 10px margin between columns.

   If you need fewer or more columns, use this formula to calculate
   the new total width: 

   Total width = (number_of_columns * column_width) - margin_width

-------------------------------------------------------------- */

/* A container should group all your columns. */
.container {
  width: 640px;
  margin: 0 auto;
}

/* Use this class on any div.span / container to see the grid. */
.showgrid { 
  background: url(src/grid.png); 
}

/* Body margin for a sensile default look. */
body {
  margin:1.5em 0;   
}

/* Columns
-------------------------------------------------------------- */

/* Sets up basic grid floating and margin. */
div.span-1, div.span-2, div.span-3, div.span-4, div.span-5, div.span-6, div.span-7, div.span-8, div.span-9, div.span-10 {float:left;margin-right: 10px;}

/* The last column in a row needs this class. */
div.last { margin-right: 0; }

/* Use these classes to set the width of a column. */
.span-1  { width: 55px;}
.span-2  { width: 120px;}
.span-3  { width: 185px;}
.span-4  { width: 250px;}
.span-5  { width: 315px;}
.span-6  { width: 380px;}
.span-7  { width: 445px;}
.span-8  { width: 510px;}
.span-9  { width: 575px;}
.span-10, div.span-10 { width: 640px; margin: 0; } 
```

# php - jQuery序列化（）不工作

> ID：14758487
> 
> 赞同：0
> 
> 时间：2013-02-07T18:37:22.190
> 
> 标签：php, jquery, ajax, serialization, laravel

我有一个如下所示的 HTML 表单：

```
<form class="form-horizontal" id="create_user" method="POST" action="#" accept-charset="UTF-8">
    <span>Username</span><input required="true" type="text" name="username" id="username">

    <span>E-mail</span><input type="email" name="email" id="email">

    <span>Privileges</span><select id="role" name="role"><option value="1">Administrator</option><option value="2">Employee</option><option value="3">Dealer</option></select>

    <span>Password</span><input type="password" name="password" id="password">

    <span>Repeat Password</span><input type="password" name="repeat_password" id="repat_password">

    <input class="btn-primary btn" type="submit" value="Submit">

    <input class="btn-inverse btn" type="reset" value="Reset">
</form> 
```

我正在尝试使用 AJAX 将数据发送到服务器，如下所示：

```
$("form").submit(function(){

            var form_data = $(this).serialize();

            var request = $.ajax({
                url: "user/validate",
                type: "POST",
                data: form_data 
            });
            request.done(function (response, textStatus, jqXHR){
                alert(response);//Comes back blank
            })
            // callback handler that will be called on failure
            request.fail(function (jqXHR, textStatus, errorThrown){
                // log the error to the console
                console.error(
                    "The following error occured: "+
                    textStatus, errorThrown
                );
            });
        }); 
```

编辑：这是我处理 POST 数据的 Laravel 控制器：

```
class User_Controller extends Base_Controller {

    public function post_validate() {
        return Input::get('username');
    }

} 
```

但是，不会使用 发送数据`$(this).serialize()`。如果我通过执行以下操作单独传递每个元素：`$("#username").val()`，它工作正常。我确保我的所有表单输入都有名称，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:44:10.327

我认为您的页面会刷新：

```
$("form").submit(function(e){
     e.preventDefault(); //<-----try adding this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:44:11.707

我已经对其进行了测试，但我认为您的问题不在于序列化数据。

这是一个 jsFiddle：http: [//jsfiddle.net/6nd5K/](http://jsfiddle.net/6nd5K/)

您应该通过检查 serialise在进入 AJAX 方法*之前是否执行任何操作来进行测试。*

```
$('form').submit(function() {
    alert($(this).serialize());
    return false;
}); 
```

我认为您的问题在于处理数据的任何方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:15:39.993

```
$(".btn-primary").on(click, function(){

        var request = $.ajax({
            url: "/user/validate",
            type: "POST",
            data: $('form#create_user').serialize(),
            async: false

        });
        request.done(function (response, textStatus, jqXHR){
            alert(response);//Comes back blank
        })
        // callback handler that will be called on failure
        request.fail(function (jqXHR, textStatus, errorThrown){
            // log the error to the console
            console.error(
                "The following error occured: "+
                textStatus, errorThrown
            );
        });
    }); 
```

# javascript - Selenium IDE gotoIf javascript 语法

> ID：14758488
> 
> 赞同：0
> 
> 时间：2013-02-07T18:37:23.953
> 
> 标签：javascript, selenium-ide

我想使用 selenium IDE 1.10.0 **gotoIf**但我不知道如何编写一个比较 2 个变量是否相等的 if 语句。

**编辑：**我正在使用流控制插件 1.0.4，它提供了包括 gotoIf 在内的额外命令。[从http://seleniumhq.org/download/](http://seleniumhq.org/download/)上的 IDE 插件下载

```
 <tr>
    <td>store</td>
    <td>123</td>
    <td>x</td>
</tr>
<tr>
    <td>store</td>
    <td>123</td>
    <td>y</td>
</tr>
<tr>
    <td>echo</td>
    <td>javascript{storedVars.x}</td>
    <td></td>
</tr>
<tr>
    <td>gotoIf</td>
    <td>javascript{storedVars.x == storedVars.y}</td>
    <td>Yes</td>
</tr>
<tr>
    <td>label</td>
    <td></td>
    <td>No</td>
</tr>
<tr>
    <td>label</td>
    <td></td>
    <td>Yes</td>
</tr> 
```

我尝试了以下表达式：

```
javascript{storedVars.x == storedVars.y}
javascript{storedVars["x"] == storedVars["y"]}
javascript{(storedVars.x == storedVars.y);}
storedVars.x == storedVars.y
${storedVars.x == storedVars.y}
${x} == ${y}
"${x}" == "${y}"
'${x}' == '${y}'
"${x} == ${y}"

(and also)
javascript{(true == true);}
javascript{true == true} 
```

都抛出相同的错误：

```
[error] Unexpected Exception: fileName -> chrome://flowcontrol/content/extensions/goto-sel-ide.js?1358766136404, lineNumber -> 120, columnNumber -> 0 
```

有任何想法吗？谢谢，皮特

**EDIT2：**我一直无法让流量控制 IDE 插件工作。在 Michael 的建议下，我尝试使用 sideflow.js 用户扩展。

使用 sideflow.js，我尝试了以下表达式：

```
'${x}'=='${y}'
${x}==${y}
'${x}'=='123' 
```

都抛出相同的错误：

```
[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/tools.js -> file:///U:/Code/Selenium/sideflow.js?1360682689170, lineNumber -> 86, columnNumber -> 0 
```

但是以下表达式可以正常工作：

```
${x}!=${y}
${x}<${y}
${x}>${y} 
```

== 运算符似乎存在问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:26:57.480

请注意变量和文本周围的单引号。这也花了我一段时间。但是不确定是否需要使用 javascript 片段，它需要如何格式化。

```
<tr>
    <td>storeValue</td>
<td>id=id_one_off_byline</td>
<td>oneoff</td>
</tr>

<tr>
    <td>gotoIf</td>
    <td>'${oneoff}' == 'Jeff'</td>
    <td>Jeff</td>
</tr> 
```

* * *

我相信在每个商店变量请求之后都必须使用 runscript。我可能错了，但在我看来，这实际上是触发对 sideflow.js 的调用以执行其功能的原因。我从我自己试图解决我的问题的试验和错误中推断出这一点。对于整数，以下代码对我有用。使用 == 它评估为 true，并转到正确的标签。

```
 <tr>
<td>store</td>
    <td>458772</td>
    <td>x</td>
</tr>
<tr>
    <td>gotoLabel</td>
    <td>target1</td>
    <td></td>
</tr>
<tr>
    <td>runScript</td>
    <td>alert(&quot;This should not appear&quot;)</td>
    <td></td>
</tr>
<tr>
    <td>label</td>
    <td>target1</td>
    <td></td>
</tr>
<tr>
    <td>store</td>
    <td>458772</td>
<td>y</td>
</tr>
<tr>
    <td>gotoIf</td>
    <td>${y} == ${x}</td>
<td>target2</td>
</tr>
<tr>
    <td>runScript</td>
    <td>alert(&quot;This should not appear&quot;)</td>
    <td></td>
</tr>
<tr>
    <td>label</td>
    <td>target2</td>
    <td></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:47:09.647

如果您只需要比较两个变量，则使用命令 verifyExpression

存储值|id=id1|var1

存储值|id=id2|var2

验证表达式|${var1}|${var1}

如果两个变量匹配，则不会抛出错误，否则不会抛出错误。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:57:53.947

Selenium IDE 不提供对值进行操作的方法（如果有），您需要运行 WebDriver 并使用编程语言来提供该功能。但是在 IDE 中，如果值不相等，您可以使用任何`assert`变体停止测试。但是，我发现断言不能可靠地中止测试。

比较两个存储值的一种方法：

```
<tr>
    <td>storeValue</td>
    <td>id=value1</td>
    <td>val1</td>
</tr>
<tr>
    <td>storeValue</td>
    <td>id=value2</td>
    <td>val2</td>
</tr>
<tr>
    <td>assertEval</td>
    <td>storedVars['val1']</td>
    <td>${val2}</td>
</tr>
<tr>
    <td>echo</td>
    <td>Yay</td>
    <td></td>
</tr> 
```

如果值相同，`assertEval`则返回 true 并继续测试，否则返回 false 并中止测试。

如果您只想知道值是否相同，您可以使用`verifyEval`，IDE 将根据结果标记评估，测试将继续正常进行。

# c++ - 如何在 Qt 中返回 main？

> ID：14758490
> 
> 赞同：2
> 
> 时间：2013-02-07T18:37:27.230
> 
> 标签：c++, qt

我最近一直在做一个简单的游戏项目。我在 main 函数（文件 main.cpp）中编写了以下代码：

```
 ending_note = "Draw.";
    End_Page end(ending_note, a);
    end.show();
    (*a).exec();
    if(end.flag == 1)
    {
        return 1;
    } //end if 
```

其中 a 是 Qapplication 对象。End_Page 类定义如下（文件 end_page.cpp）：

```
End_Page::End_Page(string _winner, QApplication* _a, QWidget *parent):QWidget(parent){

a = _a;
this->setFixedSize(900, 675);
this->move(350, 50);
flag = 0;

//------------------- background label
background = new QLabel(this);
QMovie* movie2 = new QMovie("..\\project\\Data\\pic\\7.jpeg");
movie2->setScaledSize(QSize(this->width(), 600));
background->setMovie(movie2);
background->setGeometry(0, 0, this->width(), 600);
movie2->start();

//-------------------- set label
QString s;
label = new QLabel(s.fromStdString(_winner), this);
label->setStyleSheet("QLabel { color : rgb(200, 0, 30); qproperty-alignment: AlignCenter; }");
QFont f( "MV Boli", 32, QFont::Bold);
label->setFont(f);
label->setGeometry(0,this->height() - 400, this->width(), 160);

question = new QLabel("Do you want to play again?\n", this);
question->setStyleSheet("QLabel { color : black;}");
question->setGeometry(375, 610, 200, 30);

accept = new QPushButton("Yes", this);
accept->setGeometry(300, 630, 80, 40);
decline = new QPushButton("No", this);
decline->setGeometry(500, 630, 80, 40);

//-------------------- connect
connect(this,SIGNAL(closeSignal()), this, SLOT(closeProgram()));
connect(decline, SIGNAL(clicked()), this, SLOT(closeProgram()));
connect(accept, SIGNAL(clicked()), this, SLOT(restartProgram())); 
```

}

```
End_Page::~End_Page(){}

void End_Page::closeEvent(QCloseEvent* event){
emit closeSignal();
event->accept(); 
```

}

```
void End_Page::EndGame(){
a->exit(); 
```

}

```
void End_Page::closeProgram(){
exit(0); 
```

}

```
void End_Page::restartProgram(){
flag = 1;
a->exit(); 
```

}

我的问题是，在程序执行语句 (*a).exec(); 之后，如果用户单击标记为 Yes 的按钮，程序将执行函数 restartProgram 到最后，但之后它不会继续回到函数 main （换句话说，它卡在那里）。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:58:58.267

尝试调用`quit()`或`exit()`作为静态类成员（你不需要传递你的`QApplication`周围）：

> 对于任何使用 Qt 的 GUI 应用程序，只有一个 QApplication 对象，无论应用程序在任何给定时间是否有 0、1、2 或更多窗口。对于非 GUI Qt 应用程序，请改用 QCoreApplication，因为它不依赖于 QtGui 库。可以通过 instance() 函数访问 QApplication 对象，该函数返回与全局 qApp 指针等效的指针。

```
void End_Page::restartProgram(){
    flag = 1;
    QApplication::quit();  
} 
```

但是，您的应用程序中的主要问题是您正在发射`closeSignal()`，`closeEvent()`并且连接到它的插槽将调用`exit(0);`系统调用，我认为这是完全没有必要的，并且会“杀死”当前进程。

这是一个完整的工作示例：

```
#include <QApplication>
#include <qtimer>
#include <iostream>

/* Move this into h file and moc it! */
class Window:public QObject
{
    Q_OBJECT
public slots:
    void closeApp(){ QApplication::quit(); flag = 500; }
public:
    int flag;
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Window win;
    QTimer::singleShot(5000, &win, SLOT(closeApp()));
    a.exec();

    std::cout << "Flag: " << win.flag << std::endl;

    return 0;
} 
```

**编辑**

你为什么做这个：

```
if(end.flag == 1) // flag is set to 1 in restartProgram slot
{
    return 1; 
} //end if 
```

这将退出您的`main()`功能，并且不会重新启动程序。

# c - #define 语句，多个元素用逗号分隔

> ID：14758491
> 
> 赞同：0
> 
> 时间：2013-02-07T18:37:27.200
> 
> 标签：c, c-preprocessor

我正在看这样的东西：

```
#define foo(x)   \
    (((a > b) ?  \
      0 : 1),    \
     (c ? 2 : 3), \
     (d ? 4 : 5)) 
```

我不确定如何解释这一点。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:43:29.443

本质上`\`，就终止`#define`语句而言，它会忽略换行符，因此每次编写`foo(var)`代码时，它都会被替换为

```
((((a > b) ?  
  0 : 1),    
 (c ? 2 : 3), 
 (d ? 4 : 5)) 
```

逗号运算符并没有做很多事情，除了由逗号运算符分隔的语句组成的语句的最终“返回”值是最正确的值。

所有这些都被解释了，这并不是一个非常有效的方法，`#define`因为您使用`a`, `b`, `c`, 并且`d`在`#define`and 中仅`x`作为参数引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:41:31.977

逗号运算符评估其所有操作数并返回最后一个的值。因此, `a`, `b`,`c`和`d`将被评估，结果`f(x)`将是 4 或 5，具体取决于是否`d`为非零。

# php - 解析错误：解析错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 12 行的 C:\Programe\xampplite\xampplite\htdocs\insert.php 中需要 ']'

> ID：14758495
> 
> 赞同：-6
> 
> 时间：2013-02-07T18:37:45.063
> 
> 标签：php

我有这个错误：

> 解析错误：解析错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 12 行的 C:\Programe\xampplite\xampplite\htdocs\insert.php 中需要 ']'

在这条线上：

```
$sql="INSERT INTO tada (Nume, Prenume, Adresa, Tel, Anul, Nr.pantof) VALUES ('$_POST[Nume]','$_POST[Prenume]','$_POST[Adresa]','$_POST[Tel]','$_POST[Anul]','$_POST[Nr.pantof]')"; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:43:48.427

![xkcd](../Images/ae64e1cbe3e51cba804e9c9a5c5a2db7.png)

试试这个（假设你的代码质量很差，你仍在使用旧的`mysql`扩展）：

```
$enc = "mysql_real_escape_string";
$sql = "INSERT INTO `tada` (`Nume`, `Prenume`, `Adresa`, `Tel`, `Anul`, `Nr.pantof`)
        VALUES ('".$enc($_POST['Nume'])."', '".$enc($_POST['Prenume'])."',
        '".$enc($_POST['Adresa'])."', '".$enc($_POST['tel'])."',
        '".$enc($_POST['Anul'])."', '".$enc($_POST['Nr.pantof'])."')"; 
```

另请注意，我```在您的列名周围添加了反引号。否则 MySQL 会尝试访问一个名为的表`Nr`来找到一个名为的列`pantof`（或者可能会因为它自己的解析错误而死）。

将来，学习基本原则！Google 上有数以百万计的[PHP/MySQL 教程搜索结果](http://google.com/search?q=php+mysql+tutorial)，请使用它们！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:41:09.230

要将数组变量嵌入字符串中，您应该使用以下语法：

```
"... {$array['key']} ..." 
```

代替：

```
 "... $array['key'] ..." 
```

*您应该对除普通*变量（例如数组）之外的所有其他内容使用大括号：

```
{$a['key']} 
```

或对象：

```
{$a->var} 
```

# highcharts - highcharts & 符号

> ID：14758497
> 
> 赞同：3
> 
> 时间：2013-02-07T18:37:59.960
> 
> 标签：highcharts, html-entities, ampersand

如何在此图表的第一组条/列下正确显示 & 符号：

[http://jsfiddle.net/VxbrK/2/](http://jsfiddle.net/VxbrK/2/)

它应该是“Apples & Oranges”而不是“Apples `&amp;`Oranges”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T09:30:47.893

您可以将标签的 useHTML 设置为 true。

```
xAxis: {
                labels:{
                    useHTML:true
                }
            }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T11:15:42.630

html 实体显示严重错误：http: [//forum.highcharts.com/viewtopic.php? f=9&t=7299&p=35653](http://forum.highcharts.com/viewtopic.php?f=9&t=7299&p=35653)

根据我的经验，我发现更好的解决方法是使用 unicode 转义序列而不是实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T07:23:47.387

如果您决定使用 unicode 转义序列，请记住实体`&#233;`不会直接转换为`/u0233`（`/u00E9`十六进制值）。转换列表可以在这里找到：[http](http://en.wikipedia.org/wiki/List_of_Unicode_characters) ://en.wikipedia.org/wiki/List_of_Unicode_characters 。

# grails - Grails GORM Criteria Query Eager Fetching

> ID：14758499
> 
> 赞同：5
> 
> 时间：2013-02-07T18:38:12.443
> 
> 标签：grails, grails-orm

我在 Grails 服务类中编写了一个条件查询，我希望在其中执行一个渴望连接，并在将我的结果显示为 JSON 响应或在我的 GSP 中时避免延迟加载子对象。查询按预期执行（在我的 DataSource.groovy 中设置我的 hibernate.show_sql=true 我可以看到查询），但是当我在 GSP 中抓取关联时，我可以看到 Hibernate 正在执行后续查询，就好像它正在延迟加载协会。我不相信急切的加载确实有效。我不想在我的域类中为这些关联设置lazy:false。

这是条件查询：

```
def market = Market.withCriteria(uniqueResult:true){
    idEq(marketId)
    fetchMode 'resourceAssignments', FetchMode.JOIN
    fetchMode 'resourceAssignments.userRole', FetchMode.JOIN
    fetchMode 'resourceAssignments.userRole.role', FetchMode.JOIN
    fetchMode 'resourceAssignments.userRole.user', FetchMode.JOIN
    resourceAssignments{
        userRole{
            role{
                'in'('name', roleNames)
            }
        }
    }           
} 
```

上面的查询返回没有任何问题。但是，当我尝试在我的 GSP 中运行以下代码时，我可以看到 Hibernate 正在发出第二个查询，就好像它在懒惰地获取资源分配一样：

```
<g:each in="${market.resourceAssignments}" var="ra">
</g:each> 
```

我什至尝试使用 No-Op 拦截器覆盖 OpenSessionInViewInterceptor，方法是创建一个空的 WebRequestInterceptor 并在 resources.groovy 中设置 openSessionInViewInterceptor 以使用它。一旦我这样做了，我就会得到一个 org.hibernate.LazyInitializationException，它似乎验证了我的想法——即使我已经指定我想要急切地获取这些关联，Hibernate 或 GORM 仍在尝试执行第二个查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T21:04:48.647

它似乎是带有条件查询的 Grails 错误。这是一个有效的 HQL 查询：

```
def market = Market.executeQuery(
    'select m from Market m ' +
    'inner join fetch m.resourceAssignments as ra ' +
    'inner join fetch ra.userRole as ur ' +
    'inner join fetch ur.role as role ' +
    'inner join fetch ur.user as user ' +
    'where m.id=:marketId and role.name in (:roleNames)',
    [marketId: marketId, roleNames: roleNames], [max: 1])[0] 
```

# batch-file - 找不到批处理文件错误路径

> ID：14758501
> 
> 赞同：1
> 
> 时间：2013-02-07T18:38:17.420
> 
> 标签：batch-file

我是一个批处理文件的新手，但我正在寻找一个脚本来删除超过 30 天的 .txt 日志文件......（FWIW，我在 XP SP3 上......）

我尝试按照[此处](https://stackoverflow.com/questions/51054/batch-file-to-delete-files-older-than-n-days)找到的示例（包括`forfiles.exe`从[此处](ftp://ftp.microsoft.com/ResKit/y2kfix/x86/)下载）并最终得到以下结果：

```
forfiles -p"D:\SQL Database Back Ups\Update_FmlaManagement_Log" -s -m *.txt -d-30 -c "cmd /c del @FILE" 
```

但我得到这个错误：

```
Error path not found (3rd argument) line 545 
```

我做了很多谷歌搜索，但似乎无法弄清楚这个错误在说什么。 [有人](https://stackoverflow.com/questions/1039221/forfiles-batch-script-escaping-character)建议使用`forfiles.exe`它以`@variables`使其正常工作，但我尝试了（以及完整的 forfiles 路径），但似乎没有任何效果......

关于此错误消息告诉我的内容，至少有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:47:45.703

只是为了看看我是否可以，我拼凑了一些 sumn sumn 来删除超过 30 天的文件而不使用`forfiles`. 确保该`pushd`行设置为转到相应的目录。我`2592000`通过从 2013 年 1 月 31 日减去 01/01/2013 得到。

```
@echo off
setlocal enabledelayedexpansion

pushd "D:\SQL Database Back Ups\Update_FmlaManagement_Log"

set today=%date:~-10%
call :toEpoch %today%
set /a thirtyDaysAgo=%epoch% - 2592000

for /f "tokens=1,5*" %%I in ('dir /o:d *.txt ^| findstr "txt$"') do (
    call :toEpoch %%I
    if "%%K"=="" (set file=%%J) else (set file=%%J %%K)
    if /i %thirtyDaysAgo% GTR !epoch! del /q "!file!"
)
popd
goto :EOF

:toEpoch date
echo wscript.echo datediff("s", "01/01/1970 00:00:00", "%1")>epoch.vbs
for /f %%x in ('cscript /nologo epoch.vbs') do set epoch=%%x
del /q epoch.vbs
goto :EOF 
```

（从[Cameron Oakenleaf](https://stackoverflow.com/questions/3454112/is-there-a-way-to-get-epoch-time-using-a-dos-command-if-not-can-the-date-time)借来的 VBscript 。）

诚然，这不会像痴迷一样准确地工作。例如，如果一个日志文件最后一次修改是在 30 天前的中午，而您在上午 8:00 运行它，那么该文件可能会被删除，即使它还有 4 个小时才能达到 30 天。而且它可能不如 forfiles.exe 高效。

`*shrug*` 这是一条少有人走的路，我走过了。

**编辑：** HerbCSO 有另一个可能[更好的实现](https://stackoverflow.com/questions/324267/batch-file-to-delete-files-older-than-a-specified-date/1180746#1180746)，它使我的看起来像一个 Rube Goldberg-ian 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:27:46.040

@file 只是文件名。它不包括路径。如果您的批处理文件没有在您的路径中执行，它将看不到要删除的文件，因为您位于不同的工作目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T21:11:31.107

我不敢相信错误来自您的示例行。我的 forfiles (Win7) 为路径
之间的缺失空间引发错误。`-p`

并且错误消息的文本对于批处理命令是不正常的。
我不知道任何批处理命令可以告诉您发生错误的行，也不知道哪个参数是错误的。

因此，我相信您从完全不同的来源收到错误消息。
或者你有第二个`forfiles`命令可以做一些完全不同的事情。
或者您是否命名了您的一项测试`forfiles.bat`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T21:39:46.390

好吧，我不是很肯定，但*似乎*问题可能`forfiles.exe`来自微软的[FTP 服务器](ftp://ftp.microsoft.com/ResKit/y2kfix/x86/)。我最终[从这个人的网站](http://www.jjclements.co.uk/2008/07/31/delete-files-older-than-certain-number-of-days/)（[直接下载](http://www.jjclements.co.uk/wp-content/uploads/2008/07/forfiles_Server_2003.zip)`forfiles.exe`）下载了第二个（对于 Windows Server 2003 ）。

在替换原始 exe`C:\WINDOWS\system32`并删除我的下载文件夹中的副本后，我将语法从破折号稍微更改为正斜杠，如下所示：

```
forfiles /p "D:\SQL Database Back Ups\Update_FmlaManagement_Log" /s /m *.txt /d -30 /c "cmd /c del @FILE" 
```

这是完美的第一次尝试！

所以我猜答案是，不要`forfile.exe`从微软的 FTP 服务器下载？:P

**编辑：**

我很想知道其他人是否在上面的链接中成功使用了 Microsoft 的 .exe？否则，也许这只是我的特定设置...

# php - 将英国日期转换为 UTC

> ID：14758506
> 
> 赞同：0
> 
> 时间：2013-02-07T18:38:28.417
> 
> 标签：php, mysql

我有一个名为 pm_msg 的表，其中包含一个时间列和以下值：

```
07-02-2013 18:11:00
27-01-2013 16:02:44
28-01-2013 10:30:26
30-01-2013 13:30:06 
```

我想在运行 PDO SQL 查询时将它们转换为 Unix 时间戳。这是我到目前为止所做的，但它似乎返回了一个错误。我该怎么做呢？

```
$sql = "SELECT * from pm_msg ORDER BY (strtotime(time)) ASC;"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:40:09.180

`strtotime`在 MySQL 中不存在，你想要的`UNIX_TIMESTAMP`功能：

```
$sql = "SELECT * from pm_msg ORDER BY (UNIX_TIMESTAMP(time)) ASC;"; 
```

但是 - 您不需要将其转换为 UNIX 时间戳来对其进行排序。排序在日期上正确工作？也许您打算将其添加`UNIX_TIMESTAMP`到该`SELECT`部分？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:48:59.300

UTC 或多或少与 GMT 相同 - 不考虑 DST。

因此，在春季和秋季，您需要考虑到这一点。

但是要使用 SQL 将日期/时间转换为 unixtime，请参见[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)或[UNIXTIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:19:49.197

**如果您现在使用varchar**之类的东西，将时间列设置为**datetime**会更容易。

# javascript - Vim 为 javascript 缩进多行 var 声明

> ID：14758508
> 
> 赞同：4
> 
> 时间：2013-02-07T18:38:52.643
> 
> 标签：javascript, vim, indentation

我试图让 vim 像这样缩进我的代码

```
var foo,
    bar,
    baz; 
```

但是vim会自动缩进（用=），就像

```
var foo,
bar,
baz; 
```

有谁知道如何改变这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T10:38:21.080

添加

```
vnoremap <Tab> >gv
vnoremap <S-Tab> <gv 
```

到您的 .vimrc ，然后只需选择这些行并向后推“Tab”或“Shift+Tab”

# java - 在 apache commons 中计算 t-inverse

> ID：14758509
> 
> 赞同：5
> 
> 时间：2013-02-07T18:38:53.720
> 
> 标签：java, statistics

我需要计算一个 java 应用程序的统计数据。我正在使用 Apache Commons 库，但找不到我需要的实现。我可以在 Excel 中使用 TINV 命令、置信度 1 和样本计数 1 来获取它。例如，使用值 10、24 和 19；和 90% 的置信水平，我得到 2.9199 的 t 统计量......这是我需要在 java 中重现的数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T20:24:06.057

Excel`TINV(probability, deg_freedom)`模拟：

```
new org.apache.commons.math3.distribution.TDistribution(deg_freedom).
inverseCumulativeProbability(probability) 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:22:15.290

对于 Java，请尝试[jSci](http://jsci.sourceforge.net/)。它有一个处理 T 分布的类：http: [//jsci.sourceforge.net/api/JSci/maths/statistics/TDistribution.html#inverse(double)](http://jsci.sourceforge.net/api/JSci/maths/statistics/TDistribution.html#inverse(double))。您可能也想尝试一个[python 端口](https://github.com/rubzo/marky/blob/master/tinv.py)。

# objective-c - 在构建时重新生成 NSManagedObject 子类

> ID：14758510
> 
> 赞同：1
> 
> 时间：2013-02-07T18:38:56.813
> 
> 标签：objective-c, xcode, core-data, nsmanagedobject

我进行了一些搜索，但找不到一种简单的方法来告诉 xcode`NSManagedObject`在构建时重新生成所有子类。我这样做是为了能够从我们的 git 存储库中删除所有这些类，并且只提交模型，同时确保没有人遇到问题，因为这些类与模型不同步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:32:35.170

您可以添加一个运行脚本。

选择您的目标，然后选择“构建阶段”。从右下角的“添加构建阶段”按钮中选择“添加运行脚本”。

不编写 shell 脚本，可能调用指示 Xcode 生成文件的 AppleScript 或 Automator 脚本。我查看了 Xcode 字典（从 AppleScript 编辑器中选择带有“打开字典”的 Xcode），并且有钩子可以选择数据模型中的实体。我没有看到通过 AppleScript 生成文件的方法，但您可以让它选择相应的菜单项。

这是一个相当小的项目。一旦你开始工作，请分享你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:46:13.527

如果您使用类似 mogenerator ( [http://rentzsch.github.com/mogenerator](http://rentzsch.github.com/mogenerator) ) 来生成模型类，则可以按照上述建议将其作为脚本运行。

这样，每次触发构建时，mogenerator 脚本将首先运行，确保您的类已根据对象模型文件进行更新。

这是一篇很好的文章来指导您完成它[http://www.esenciadev.com/2011/05/mogen-and-xcode4-integration/](http://www.esenciadev.com/2011/05/mogen-and-xcode4-integration/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T09:47:40.340

我写了一个脚本来生成 NSManagedObject 子类，就像 Xcode 一样（类和类别）。

[cdgenerator](https://github.com/shirerom/cdgenerator)

这是非常容易使用。

# java - java类实例

> ID：14758515
> 
> 赞同：0
> 
> 时间：2013-02-07T18:39:18.063
> 
> 标签：java, recursion

我有一个简单的 Java 理论问题。如果我编写一个包含 main() 方法和其他一些方法的类，并在该 main 方法中调用该类的实例（比如 new Class()），我有点困惑为什么不发生递归. 假设我正在编写一个绘图程序，类中的其他方法创建一个窗口并绘制数据；在 main 方法中，我调用了类本身的一个实例，但只出现了一个窗口。太好了，这正是我想要的，但直觉表明，如果我从自身内部创建类的实例，则应该发生某种递归。是什么阻止了这一点？这是一个示例（在我看来，我想知道是什么阻止了不必要的递归）：

```
 public class example{
         method1(){create Jpane}
         method2(){paint Jpane}
         method 3(){do some computations}

         public static void main(String[] args){
            new example(); // or create Jblah(new example()); 
         }
      } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T18:41:48.897

我认为您将`main`方法（只是程序的入口点）与*构造函数*混淆了。

例如，如果你写：

```
public class Example {
    public Example() {
        new Example(); // Recursive call
    }

    public static void main(String[] args) {
        // Will call the constructor, which will call itself... but main
        // won't get called again.
        new Example(); 
    }
} 
```

然后那*会*爆炸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:41:33.887

当您实例化一个类时，该`main`方法不会自动执行。它可以简单地用作应用程序的入口点 - 然后将执行一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:43:41.257

Recursion isn't a bad thing. I suspect you are asking why there isn't an infinite recursion.

The big concept you are missing is that when you call new Example() you are allocating memory and then invoking just one method (the constructor). The `main()` is only invoked at the start of the whole program unless you explicitly call it.

--- edited to add

```
public class MyMainClass {
  public static void main(String arg[]) {
    Calculator c = new Calculator();
    int x = c.factorial(5);
  }
}

class Calculator {

  Calculator() { }

  public int factorial(int x) {
    if (x > 1) return x * factorial(x - 1);
    else return 1; // WARNING: wrong answer for negative input
  }
} 
```

Since factorial doesn't use any instance variable, it could have been declared `static` and called as `Calculator.factoral(5);` without even using `new`, but I din't do that since showing off `new` was the whole point of the example.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:42:17.157

仅仅因为你在类中有一个 main 方法并不意味着每次创建类时都会调用它。

Java 寻找 main 作为程序的入口点，并在启动时调用它。您从它们实例化的任何对象都不会调用 main，因为就 java 而言，它已经完成了创建程序入口点的工作。

# git - 提交到 github 会将我的文件降级到以前的版本

> ID：14758516
> 
> 赞同：0
> 
> 时间：2013-02-07T18:39:18.497
> 
> 标签：git, github, commit, repository

提交到 github 会将我的文件降级到以前的版本，我在我的 github 存储库中创建了第二个分支以供实验使用，并且我还有我的 master 分支。每当我尝试提交 master 时，我都会发现一切都是最新的，并且我的文件会降级到以前的版本。我只是按照这些说明[http://learn.github.com/p/branching.html](http://learn.github.com/p/branching.html)来创建第二个分支。以前有人遇到过这个问题吗？

PS：我正在不在本地的服务器上工作。我没有将第二个分支与 master 合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:09:56.947

尝试使用 git reflog 查找丢失的提交。这是来自 git ready 网站的解释：

[http://gitready.com/intermediate/2009/02/09/reflog-your-safety-net.html](http://gitready.com/intermediate/2009/02/09/reflog-your-safety-net.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:11:14.907

我删除了我创建并再次提交的分支，提交成功完成并且没有降级到以前的版本。所以我希望它像以前一样工作。

# jsp - 存储在 spring-mvc bean 中的文件

> ID：14758517
> 
> 赞同：1
> 
> 时间：2013-02-07T18:39:19.097
> 
> 标签：jsp, spring-mvc, javabeans

我需要一些帮助。

我正在使用带有注释的 spring-mvc，我为 jsp BillBean 定义了：

```
public class BillBean {

private String address;
.......
private Annex annex;
}

 public class Annex {
 private String name:
 .........
 private Doc doc;
}

 public class Doc{
 private String name;
 .........
 private byte[] file;
} 
```

我需要在 Doc 类中保存一个文件，在 jsp 中我输入以下代码：

```
<form:input  type="file" path="annex.doc.file"  /> 
```

但是在提交之后，在尝试验证 bean 以验证类时，我发现 doc = null。

我知道问题在于句柄spring bean没有初始化doc，我尝试在BillBean的构造函数中创建一个新实例，但我未能初始化classe doc。

任何人都知道告诉我我需要做什么来解决这个问题？

非常感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:56:14.990

我解决了这个问题，问题是我正在返回 doc 类的克隆实例。

Spring 在克隆实例上设置文档，这个实例永远不要使用。

谢谢你的帮助。

# jsf - externalContext.getSession(false) 返回 null

> ID：14758518
> 
> 赞同：0
> 
> 时间：2013-02-07T18:39:28.090
> 
> 标签：jsf, managed-bean

我当前的平台是 NB 7 rc 1，我有一个只有一个“托管 bean”的 JSF 2 应用程序。及时，我正在使用 Tomcat 7.0.34。

这是发生错误的代码：

```
 @ManagedBean
    @SessionScoped
    public class CopyController implements Serializable {
      private static final long serialVersionUID = 1L;
      private String pathBancoSentencas;
      private List<Arquivo> arquivosUpload;
      private HttpSession session;
      private List<String> listaPdfs;

      public List<Arquivo> getArquivosUpload() {
        return arquivosUpload;
      }
      public void setArquivosUpload(List<Arquivo> arquivosUpload) {
        this.arquivosUpload = arquivosUpload;
      }

      public CopyController() {
        arquivosUpload = new ArrayList<Arquivo>();
      }

      @PostConstruct
      public void doInit() {
          session = (HttpSession)FacesContext.getCurrentInstance().getExternalContext().getSession(false);  
    pathBancoSentencas = (String)session.getAttribute("DIRETORIO_TRABALHO");
  } 
```

处理请求后，例程调用如下视图：

```
 <p:dataTable value="#{copyController.arquivosUpload}" var="arquivo" paginator="true" paginatorPosition="bottom" 
                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
              <f:facet name="header">
                Item processado
              </f:facet>
              <h:column>
                <h:outputText value="#{arquivo.nome}" />
              </h:column>
            </p:dataTable> 
```

但是，视图不显示，并发生此错误：

```
Caused by: java.lang.NullPointerException
    at br.jus.tjmg.dspace.copy.CopyController.doInit(CopyController.java:54)
    ... 70 more 
```

有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:46:23.347

从你的`doInit()`方法，

```
getExternalContext().getSession(false); 
```

`null`如果会话当前尚未创建，则返回。但是，您明确期望`null`下一行出现非会话。

您需要通过`true`才能触发自动创建。

```
getExternalContext().getSession(true); 
```

另见[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getSession%28boolean%29)（重点是我的）：

> 如果`create`参数是`true`，则创建（如有必要）并返回与当前请求关联的会话实例。如果`create`参数是`false`返回与当前请求关联的任何现有会话实例，**或者`null`如果没有这样的会话则返回。**

* * *

**与具体问题无关**，整个`doInit()`方法是不必要的，可以替换为`@ManagedProperty`：

```
@ManagedProperty("#{DIRETORIO_TRABALHO}")
private String pathBancoSentencas; 
```

或者，如果您绝对肯定需要在 中对其进行处理`doInit()`，则更好的方法是从中获取它`ExternalContext#getSessionMap()`。

```
pathBancoSentencas = (String) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("DIRETORIO_TRABALHO"); 
```

您应该尽量*避免* `javax.servlet.*`在您的 JSF 支持 bean 中导入。

# sql-server - 通过 Linux 从 Zend2 访问 MSSQL

> ID：14758519
> 
> 赞同：0
> 
> 时间：2013-02-07T18:39:31.053
> 
> 标签：sql-server, linux, zend-framework2

我正在将目前在 ZendFramework1(ZF1) 上运行的应用程序升级到 ZendFramework2(ZF2)。我无法让数据库结果从 ZF2 连接返回。

在 ZF1 中，此测试完美运行：

```
$db = Zend_Db::factory('Pdo_Mssql', array(
    'host'     => 'ServerNameFromFreeTdsConfig',
    'charset'   => 'UTF-8',
    'username' => 'myUsername',
    'password' => 'myPassword',
    'dbname'   => 'database_name',
    'pdoType'  => 'dblib'
));

$stmt = $db->prepare("select * from Products");
$stmt->execute();
$result = $stmt->fetchAll();
$stmt->closeCursor(); 
```

但是，我一直在 ZF2 中尝试过这个，但我并没有真正取得任何进展。在我的 config\autoload\global.php 我有：

```
return array(
    'db' => array(
        'host'  => 'ServerNameFromFreeTdsConfig',
        'charset'   => 'UTF-8',
        'dbname'  => 'database_name',
        'username'  => 'myUsername',
        'password'  => 'myPassword',
        'driver'    => 'pdo',
        'pdodriver' => 'dblib',
    ),
); 
```

在 Module.php 文件中：

```
public function onBootstrap(MvcEvent $e)
{
    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);

    $config = $e->getApplication()->getServiceManager()->get('Configuration');
    $dbAdapter = new Adapter($config['db'], new SqlServer());

    GlobalAdapterFeature::setStaticAdapter($dbAdapter);
} 
```

然后在 Model\Products.php

```
class Products extends AbstractTableGateway
{
    protected $table;
    protected $featureSet;

    public function __construct($table = 'Products') {
        $this->table = $table;
        $this->featureSet = new FeatureSet();
        $this->featureSet->addFeature(new GlobalAdapterFeature());
        $this->initialize();
    }

    //Test the connection.
    public function getProducts() {   
        $result = $this->getAdapter()->query("select * from Products", Adapter::QUERY_MODE_EXECUTE);
die(var_dump($result));
    }
} 
```

看起来它正在连接，因为上面的“var_dump”返回了一个正确的 ["fieldCount":protected]=> int(7) （该表中有 7 列）。但是，它没有返回任何结果。我需要做什么才能让它在 ZF2 中工作？我是否需要使用 ZF1 Zend_Db_Adapter_Pdo_Mssql.php 文件中的代码以某种方式扩展 Zend\Db\Adapter\Adapter？还是我缺少一些简单的解决方案？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:46:03.003

我认为您不需要提及用户名和密码

```
resources.db.adapter = "sqlsrv"
resources.db.host = "localhost\SQLEXPRESS"
resources.db.dbname = "DatabaseName"
resources.db.isDefaultTableAdapter = true 
resources.db.driver_options.ReturnDatesAsStrings = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:38:15.970

我最终编写了自己的适配器，该适配器采用了我在那里工作的 Zend Framework 1 适配器。如果有人在这篇文章中寻找相同问题的解决方案并想要我转置的代码的副本，请告诉我。有很多代码，或者我会在这里发布。

# javascript - 如何处理看起来在 REST URI 中编码的 URL 的字符串

> ID：14758521
> 
> 赞同：0
> 
> 时间：2013-02-07T18:39:48.193
> 
> 标签：javascript, web-services, http, url, rest

嘿，所以我无法弄清楚如何包含看起来是 URI 编码但实际上必须在我的 RESTful URL 中逐字处理的内容。例如，假设我的服务器上有一个端点，如下所示：

```
/something/:value 
```

然后从我的客户端代码中，我想发出一个 GET 请求：

```
/something/some%20value 
```

在服务器上，我希望 ":value" 是文字字符串 "some%20value" 而不是 "some value"。如何正确编码请求 URL 以确保服务器将其视为这样？我还应该提到，并非所有请求 URI 中都会包含这些潜在的 URL 编码值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:58:44.227

其实我想我可能已经想通了。如果我只是在我的 URL 中编码百分比符号，它似乎可以工作。% 的 URL 代码是 %25。因此，例如正确的 URL 将是：

```
/something/some%2520value 
```

# typescript - TypeScript 中不安全的代码区域

> ID：14758530
> 
> 赞同：14
> 
> 时间：2013-02-07T18:40:28.860
> 
> 标签：typescript

有时很难提出有效的 TypeScript，例如，当您引用一个包含大量实体的库时，每个实体都需要声明。在这种情况下，最好告诉 TypeScript 跳过处理该库的部分代码，认为它是有效的。那么有没有办法在 TypeScript 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T20:02:08.720

没有办法关闭整个代码块的类型检查，但是如果您访问任何类型表达式的内容`any`，结果也将是，因此如果您可以通过任何类型`any`的引用访问库，您`any`'将在没有类型检查的情况下有效地工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-12-01T12:17:05.027

放在`// @ts-ignore`有错误的行上方

```
 // @ts-ignore
 null.toString() 
```

# extjs - Extjs折线图多线标签

> ID：14758541
> 
> 赞同：3
> 
> 时间：2013-02-07T18:41:03.163
> 
> 标签：extjs, charts, extjs4, linechart

我想在 X 轴的折线图中制作一个标签，显示所选类别的摘要。我想格式化它，所以在类别名称下我有值。如果我这样做，它会起作用：

```
return Ext.Date.format(v, 'M Y') + '\r' + 
(val.data.Budgeted==null?'':('$ '+Ext.util.Format.number(val.data.Budgeted, '0,000') + '\r')) +
(val.data.Actual==null?'':('$ '+Ext.util.Format.number(val.data.Actual, '0,000') + '\r')); 
```

尽管如此，正如我发现的那样，每个 \r 字符的标签都在下降。因此，如果我没有 \r 它应该显示它，但是如果有 N '\r'-s 那么标签本身将下降，因为它上面有 N 行文本。

也很高兴找到一种格式化文本的方法（对齐）

编辑：
我找到了一种方法，通过更改轴配置中的“drawVerticalLabels”函数。不过，在我看来，这是一个糟糕的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:23:15.067

我认为我必须做一些非常相似的事情。SO [here](https://stackoverflow.com/q/8595535/1062992)上有它的屏幕截图。

我最终把它当作一个 HTML 模板。我不像现在那样熟悉 ExtJS 框架，所以如果我不得不重做它，我可能会使用 xtemplate，但这对我来说很有效：

```
series: [{
    type: 'line',
    title: 'This Year',
    axis: 'left',
    smooth: false,
    xField: 'date_value',
    yField: 'the_count',

    // custom tips
    tips: {
      trackMouse: true,
      width: 127,
      height: 70,
      hideDelay: 0,
      dismissDelay: 0,
      renderer: function(record) {
        this.setTitle('<table width=115><tr><th><b>' + 
            record.get('date_value') + 
            ':</b></th><td align=right>' + 
            record.get('the_count') + 
            '</td></tr><tr><th><b>Quota:</b></th><td align=right>' + 
            record.get('the_quota') +
            '</td></tr><tr><th><b>Diff:</b></th><td align=right>' +
            (record.get('the_quota') > record.get('the_count') ? 
                '-' + (record.get('the_quota') - record.get('the_count')) :
                '+' + (record.get('the_count') - record.get('the_quota'))
            ) + '</td></tr></table>'
        );
      }
    }
}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-21T14:36:25.880

多行可以通过在轴渲染器中插入 '\n' 换行来完成，默认情况下它是居中的。

# excel - 在excel中将数据排序到列箱中

> ID：14758543
> 
> 赞同：0
> 
> 时间：2013-02-07T18:41:08.427
> 
> 标签：excel, sorting, multiple-columns

假设有这样垂直排列的数据：

```
Name      Birthday
John      6 June
Mary      12 May
Sue       1 June
Brian     10 August
Carl      24 June
Ted       18 August
Linda     31 January 
```

是否可以在 Excel（没有 VB）中将数据排序到列箱中？

```
Jan    Feb    Mar    Apr    May    Jun    Jul    Aug    Sep    Oct    Nov    Dec
Linda                       Mary   John          Brian
                                   Sue           Ted
                                   Carl 
```

（更好的办法是让它们按出生日期在每个垃圾箱中排序。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:25:33.057

FYI, this is a bit complicated, so it might be hard to maintain/explain to someone else what you did.

Result:

![enter image description here](../Images/0e5cfeee89d3131c5f0631e321f75c3e.png)

1.  In Cells D1 to O1, put in 1/1, 2/1, 3/1, etc
2.  Select those cells, right-click --> Format Cells...
3.  Choose Custom and put "mmm" (without quotes)
4.  In D2, put this formula in there: `=IFERROR(INDEX($A$2:$A$8,SMALL(IF(MONTH($B$2:$B$8)=MONTH(D$1),MATCH("~"&$A$2:$A$8,$A$2:$A$8&"",0)),ROWS($2:2))),"")`
5.  Enter that formula with CTRL+SHIFT+ENTER ([array formula](http://www.spreadsheetsmadeeasy.com/array-formulas-for-beginners/))
6.  At the bottom right of D2, there is a little black square, hover over this and your mouse will turn into a plus sign. Click this and drag down to cell D8.
7.  Cells D2:D8 will be highlighted. Click the little square again found in D8\. Drag to the right all the way till Dec

And there you have it.

I'd like to thank Aladin for the help with this formula:

[http://www.mrexcel.com/forum/excel-questions/470371-unique-list-based-criteria.html#post2322387](http://www.mrexcel.com/forum/excel-questions/470371-unique-list-based-criteria.html#post2322387)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:44:27.740

在不修改数据或使用 VBA 的情况下，我认为您将获得的最接近的是数据透视表：

![在此处输入图像描述](../Images/84944aba6d023020dc8e7f48daf09f64.png)

1.  点击您的数据
2.  插入 --> 数据透视表
3.  好的
4.  像这样拖动字段：名称--> 行标签。生日 --> 列标签。名称 --> 值
5.  右键单击列字段中的日期 --> 组...
6.  选择月份 --> 确定

多田

# php - Bandsintown Api 用 php 解析 json

> ID：14758548
> 
> 赞同：1
> 
> 时间：2013-02-07T18:41:23.930
> 
> 标签：php, json, api, parsing

我正在尝试解析来自 bandintown api 的 Json 响应，但我遇到了“可捕获的致命错误：stdClass 类的对象无法转换为字符串”。

我的代码如下：

```
<?php
        //Get the list of events from the function
        $events = GetJsonFeed("http://api.bandsintown.com/example");

        //Loop through
        foreach ($events as $event) 
        { 
            echo "<h3> $event->title </h3>"; //title
            echo "<p> $event->formatted_datetime </p>";
            echo "<p> $event->venue->latitude </p>";
            echo "<p> $event->venue->longitude </p>";
            echo "<a href='$event->facebook_rsvp_url'>RSVP</a>"; //RSVP link
            echo "</div>";

        }

    ?> 
```

json 响应是这样的：

```
[{"artists":[{.....}],

"formatted_datetime":"Saturday, March 9, 2013 at 9:00pm",

"ticket_type":null,

"ticket_status":"unavailable",

"description":null,

"venue":{"latitude":"38.7166667","region":"14","longitude":"-9.1333333"},

"ticket_url":null}] 
```

当我尝试回显纬度和经度时，我只会收到错误消息。

提前致谢！

# ios - ARC中过度保留的调试策略？

> ID：14758556
> 
> 赞同：8
> 
> 时间：2013-02-07T18:41:45.887
> 
> 标签：ios, objective-c, automatic-ref-counting, instruments

我有一些对象被传递给我的应用程序中的**许多**不同的视图和控制器。当我期望它们被释放时，它们并没有被释放。显然某处有一个错误的强指针，但它可能存在的表面积非常大——这些对象被移入和移出许多不同的数据结构。

我通常的首选解决方案是泄漏（不报告任何周期）和分配（列出该对象的 500 多个保留/释放）。有什么办法可以减少我的搜索空间吗？

*理想情况下*，应该有一个工具可以让我输入一个指针并查看对该对象的所有强引用，并且我可能会关注列表并在大约 60 秒内找到额外的引用。事实上，有这样一个工具——对象图工具——但它不适用于 iOS 软件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T17:38:51.687

您需要分配工具。要跟踪单个对象类型，请启动应用程序。您需要在每个重要事件上创建一个 heapshot（我通常在您刚刚转换到视图控制器或从视图控制器转换时创建它们）。

一旦您获得了一个应该包含您有兴趣追踪的对象的堆，那么您应该能够在堆的显示三角形下找到该对象类型。对于该类型的每个对象，您可以通过单击该对象行中的箭头来获取已发送到该对象的保留和释放的历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-16T06:35:37.090

识别是否存在保留周期的最简单方法，只需在控制器的`dealloc()`/ `deinit()`(swift) 方法中放置一个断点，并且每当您弹出控制器时，如果控制器中存在保留周期，则检查此方法是否被调用，此方法获胜不要被叫。

**迅速**

```
deinit {
    print("Memory to be released soon")
} 
```

**目标 C**

```
- (void)dealloc {

    NSlog("Memory to be released soon");

} 
```

如果您想获得有关强引用和根本原因的更多详细信息，您应该使用 Instrument 作为另一个答案。

# javascript - 在 JavaScript 创建的 ul 和 li 元素之间添加一个空格

> ID：14758559
> 
> 赞同：2
> 
> 时间：2013-02-07T18:41:52.287
> 
> 标签：javascript

现在一直在为一个问题苦苦挣扎。

我有一个行为很奇怪的列表，直到我对它进行 firebugd 并看到整个文件打印在一行中才找到问题。

像这样的东西。

```
<div class="clock-content-wrapper"><ul class="clock-digit-wrapper hour"><li class="clock-digit-one"></li><li class="clock-digit-three"></li></ul><ul class="clock-digit-wrapper minute"><li class="clock-digit-three"></li><li class="clock-digit-seven"></li></ul><ul class="clock-digit-wrapper second"><li class="clock-digit-zero"></li><li class="clock-digit-zero"></li></ul></div> 
```

元素之间没有空格。

现在我不知道这可能是一个问题，所以我开始像这样修复萤火虫中的元素。

```
<div class="clock-content-wrapper">
<ul class="clock-digit-wrapper hour">
<li class="clock-digit-one"></li>
<li class="clock-digit-three"></li>
</ul>
<ul class="clock-digit-wrapper minute">
<li class="clock-digit-three"></li>
<li class="clock-digit-seven"></li>
</ul>
<ul class="clock-digit-wrapper second">
<li class="clock-digit-zero"></li>
<li class="clock-digit-zero"></li>
</ul>
</div> 
```

请注意，如果`</ul>`我的脚本下有该元素`</li>`，那么它实际上应该可以正常工作。

有没有办法用 javascript 构造文件？我有一个 jsFiddle，您可以在其中查看用 HTML 创建的树和用 JavaScript 创建的树之间的区别。 [http://jsfiddle.net/Xk49c/](http://jsfiddle.net/Xk49c/)

我真的不想更改 css 中的任何内容。因为 html 和 js 应用程序都使用相同的 css 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:46:58.430

您的`<ul>`元素显示`inline-block`在您的小提琴中。[我`inline-block`](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)怀疑他们正在遭受.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:53:47.310

问题是，当您使用 HTML 创建元素时，您使用一个或多个空格甚至换行来缩进或分隔元素。HTML 将这些空间呈现为一个单独的空间，因此您可以看到这些元素之间的空间。

要在 JavaScript 创建的元素之间添加空格，您必须在左侧`minute`和`second`类中添加一个填充，或者在每个元素之间插入一个文本节点`UL`

```
hours = createElementWithClass('ul', 'clock-digit-wrapper hour');
clock_toolbar_wrapper_close.appendChild(hours);
clock_toolbar_wrapper_close.appendChild(document.createTextNode(' ')); // Add this

minutes = createElementWithClass('ul', 'clock-digit-wrapper minute');
clock_toolbar_wrapper_close.appendChild(minutes);
clock_toolbar_wrapper_close.appendChild(document.createTextNode(' ')); // And this 
```

# input - 如何处理太长的用户输入？

> ID：14758560
> 
> 赞同：0
> 
> 时间：2013-02-07T18:41:59.230
> 
> 标签：input, validation, user-experience

通常检查输入的密码是否至少有 # 个字符长，或者用户输入是否为空。但是，我看到一些网站测试用户输入是否异常长。

典型的 (MySQL) 数据库设计将专用 100-255 个字符用于例如名字、姓氏输入。较长的输入会导致数据丢失。处理异常输入的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:45:12.960

你的 inputText 组件应该有一个 maxLength 属性或类似的东西。

当用户达到最大输入长度时，这将阻止用户输入。

如果这不适用于您，您能否澄清所使用的背景和技术？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:19:32.783

从用户体验的角度来看，您可以简单地使用一个内场占位符来告诉用户需求的长度。大多数情况下，普通用户不会超过这个。从技术角度来看，使用一些 JS 来计算输入的字符。一旦用户达到该特定数量，就会在输入字段上方放置一个可能类似于工具提示的小警报。这将向用户表明他们已超过最大字符数并允许他们解决问题。

# assembly - 无论如何在NEON的寄存器名称中使用变量？

> ID：14758563
> 
> 赞同：0
> 
> 时间：2013-02-07T18:42:07.070
> 
> 标签：assembly, arm, neon

NEON 扩展寄存器可以看作 16 个四字或 32 个双字。在大多数编程中，要使用的特定寄存器是固定的。例如，

```
vmov.i8 d0, 0xff
vmov.i8 d1, 0xee
vmov.i8 d2, 0xdd 
```

在我的问题中，所需的双字寄存器的数量取决于函数调用中的参数。例如，如果参数是 2，我需要做

```
vmov.i8 d0, 0xff
vmov.i8 d1, 0xee 
```

如果参数是 4，我需要做

```
vmov.i8 d0, 0xff
vmov.i8 d1, 0xee
vmov.i8 d2, 0xdd
vmov.i8 d3, 0xcc 
```

无论如何选择一个名称基于变量的寄存器？即沿着这条线的东西（以下不是有效的ARM汇编代码）：

```
mov r0, #1
vmov.i8 d{r0}, 0xff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:37:18.217

不可能在指令级选择目标寄存器，因为指令本身具有硬编码的目标寄存器，并且使用现代 CPU 创建自修改代码是不可行的。有关任何指令编码，请参见[ARM ARM](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0406c/index.html)。

您当然可以通过多种方式使用*if 构造/条件执行*在高级别的情况下执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:45:42.907

你可以执行最后两条指令

```
vmov.i8 d2, 0xdd
vmov.i8 d3, 0xcc 
```

条件是参数是 4。

您还可以为参数的所有可能值编写或生成代码。

如果参数始终是常量而不是计算的东西，您也可以使用宏。

# r - 如何使用带有 ddply 或聚合的函数返回向量（如 Fivenum）？

> ID：14758566
> 
> 赞同：8
> 
> 时间：2013-02-07T18:42:09.917
> 
> 标签：r, aggregate, plyr

我想使用几列拆分我的数据框，然后`fivenum`在每个组上调用。

```
aggregate(Petal.Width ~ Species, iris, function(x) summary(fivenum(x))) 
```

返回的值是一个只有 2 列的 data.frame，第二个是一个矩阵。如何将其转换为 data.frame 的普通列？

**更新**

我想要类似下面的代码，使用更少的代码`fivenum`

```
ddply(iris, .(Species), summarise,
      Min = min(Petal.Width),
      Q1 = quantile(Petal.Width, .25),
      Med = median(Petal.Width),
      Q3 = quantile(Petal.Width, .75),
      Max = max(Petal.Width)
      ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T01:46:35.280

这是一个使用(虽然没有特别要求，但它是对or`data.table`的明显补充或替代。除了代码有点长之外，重复调用效率低下，因为对于每个调用，您都将对数据进行排序`aggregate``ddply``quantile`

```
library(data.table)
Tukeys_five <- c("Min","Q1","Med","Q3","Max") 

IRIS <- data.table(iris)
# this will create the wide data.table
lengthBySpecies <- IRIS[,as.list(fivenum(Sepal.Length)), by = Species]

# and you can rename the columns from V1, ..., V5 to something nicer

setnames(lengthBySpecies, paste0('V',1:5), Tukeys_five)

lengthBySpecies

      Species Min  Q1 Med  Q3 Max
1:     setosa 4.3 4.8 5.0 5.2 5.8
2: versicolor 4.9 5.6 5.9 6.3 7.0
3:  virginica 4.9 6.2 6.5 6.9 7.9 
```

或者，使用一次调用来`quantile`使用适当的`prob`参数。

```
IRIS[,as.list(quantile(Sepal.Length, prob = seq(0,1, by = 0.25))), by = Species]

       Species  0%   25% 50% 75% 100%
1:     setosa 4.3 4.800 5.0 5.2  5.8
2: versicolor 4.9 5.600 5.9 6.3  7.0
3:  virginica 4.9 6.225 6.5 6.9  7.9 
```

请注意，创建的列的名称在语法上无效，尽管您可以使用类似的重命名`setnames`

* * *

编辑

有趣的是，`quantile`如果您设置，将设置结果向量的名称`names = TRUE`，这将复制（减慢数字运算并消耗内存 - 它甚至会在帮助中警告您，看中了！）

因此，您可能应该使用

```
 IRIS[,as.list(quantile(Sepal.Length, prob = seq(0,1, by = 0.25), names = FALSE)), by = Species] 
```

或者，如果您想返回命名列表，而不在`R`内部复制

```
IRIS[,{quant <- as.list(quantile(Sepal.Length, prob = seq(0,1, by = 0.25), names = FALSE))
       setattr(quant, 'names', Tukeys_five)
       quant}, by = Species] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T19:38:44.273

您可以使用递归`do.call`调用`data.frame`每个矩阵元素来获取带有向量元素的 data.frame：

```
dim(do.call("data.frame",dfr))
[1] 3 7

str(do.call("data.frame",dfr))
'data.frame':   3 obs. of  7 variables:
 $ Species            : Factor w/ 3 levels "setosa","versicolor",..: 1 2 3
 $ Petal.Width.Min.   : num  0.1 1 1.4
 $ Petal.Width.1st.Qu.: num  0.2 1.2 1.8
 $ Petal.Width.Median : num  0.2 1.3 2
 $ Petal.Width.Mean   : num  0.28 1.36 2
 $ Petal.Width.3rd.Qu.: num  0.3 1.5 2.3
 $ Petal.Width.Max.   : num  0.6 1.8 2.5 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T19:22:52.883

据我所知，没有一种确切的方法可以满足您的要求，因为您使用的函数 (fivenum) 不会以可以轻松绑定到 ' 中的列的方式返回数据ddply 函数。不过，这很容易以编程方式清理。

**第 1 步**：`fivenum`使用“ddply”函数对每个“物种”值执行函数。

```
data <- ddply(iris, .(Species), summarize, value=fivenum(Petal.Width))

#       Species value
# 1      setosa   0.1
# 2      setosa   0.2
# 3      setosa   0.2
# 4      setosa   0.3
# 5      setosa   0.6
# 6  versicolor   1.0
# 7  versicolor   1.2
# 8  versicolor   1.3
# 9  versicolor   1.5
# 10 versicolor   1.8
# 11  virginica   1.4
# 12  virginica   1.8
# 13  virginica   2.0
# 14  virginica   2.3
# 15  virginica   2.5 
```

现在，'fivenum' 函数返回一个列表，所以我们最终得到每个物种的 5 行条目。这就是“fivenum”功能与我们对抗的部分。

**第 2 步**：添加标签列。我们知道 Tukey 的五个数字是什么，所以我们只是按照“fivenum”函数返回它们的顺序来调用它们。该列表将重复，直到它到达数据的末尾。

```
Tukeys_five <- c("Min","Q1","Med","Q3","Max") 
data$label <- Tukeys_five

#       Species value label
# 1      setosa   0.1   Min
# 2      setosa   0.2    Q1
# 3      setosa   0.2   Med
# 4      setosa   0.3    Q3
# 5      setosa   0.6   Max
# 6  versicolor   1.0   Min
# 7  versicolor   1.2    Q1
# 8  versicolor   1.3   Med
# 9  versicolor   1.5    Q3
# 10 versicolor   1.8   Max
# 11  virginica   1.4   Min
# 12  virginica   1.8    Q1
# 13  virginica   2.0   Med
# 14  virginica   2.3    Q3
# 15  virginica   2.5   Max 
```

**第 3 步**：标签到位后，我们可以使用“reshape2”包中的“dcast”功能快速将此数据转换为新形状。

```
library(reshape2)
dcast(data, Species ~ label)[,c("Species",Tukeys_five)]

#      Species Min  Q1 Med  Q3 Max
# 1     setosa 0.1 0.2 0.2 0.3 0.6
# 2 versicolor 1.0 1.2 1.3 1.5 1.8
# 3  virginica 1.4 1.8 2.0 2.3 2.5 
```

最后的所有垃圾都只是指定列顺序，因为“dcast”函数会自动按字母顺序排列。

希望这可以帮助。

**更新**：我决定返回，因为我意识到您还有另一种选择。您始终可以将矩阵绑定为数据框定义的一部分，因此您可以像这样解析“聚合”函数：

```
data <- aggregate(Petal.Width ~ Species, iris, function(x) summary(fivenum(x))) 
result <- data.frame(Species=data[,1],data[,2])

#      Species Min. X1st.Qu. Median Mean X3rd.Qu. Max.
# 1     setosa  0.1      0.2    0.2 0.28      0.3  0.6
# 2 versicolor  1.0      1.2    1.3 1.36      1.5  1.8
# 3  virginica  1.4      1.8    2.0 2.00      2.3  2.5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-04T22:55:54.627

这是我的解决方案：

```
ddply(iris, .(Species), summarize, value=t(fivenum(Petal.Width))) 
```

# tsql - 仅返回 TRY..CATCH 中的最后一批

> ID：14758569
> 
> 赞同：1
> 
> 时间：2013-02-07T18:42:33.057
> 
> 标签：tsql, sql-server-2008-r2, try-catch

我有一些 SQL：

```
BEGIN TRY
    DECLARE @RowsInserted int;
    SET @RowsInserted = @@ROWCOUNT;
    SELECT @RowsInserted+'test' as [SUCCESS];
END TRY

BEGIN CATCH    
    SELECT ERROR_MESSAGE() AS [ERROR]    
END CATCH 
```

令我惊讶的是，这实际上产生了两个批次（数据集）：

![在此处输入图像描述](../Images/0ce054e2c480355b71930aa6652ec47d.png)

`GO`由于工作方式，我不能用来拆分批次`TRY...CATCH`。那么这是否意味着如果发现一些错误，总会有一些虚拟结果集？

我真正想做的是扔掉 SUCCESS 批次（或其他类似的假批次）。否则，我必须浏览一些垃圾批次才能在 catch 语句中找到错误报告批次，这似乎令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:41:57.497

您需要在 catch 块中做的是*引发*错误而不是*选择*它。

```
BEGIN CATCH
    -- rethrow error
    DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE()
    DECLARE @ErrorSeverity INT = ERROR_SEVERITY()
    DECLARE @ErrorState INT = ERROR_STATE()

    RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState)
END CATCH 
```

那里有一个分离：结果集 ( `select`) 用于处理数据，而错误 ( `raiserror`) 用于传达故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:31:52.803

我不认为这是可能的——在枚举开始之前和可能知道任何记录评估都会产生错误之前，对结果集的引用会返回给客户端。

# android - Android：自适应阈值

> ID：14758572
> 
> 赞同：7
> 
> 时间：2013-02-07T18:42:42.733
> 
> 标签：android, image-processing, threshold

我正在尝试使用 Android实现[Derek Bradley的自适应阈值算法。](http://people.scs.carleton.ca/~roth/iit-publications-iti/docs/gerh-50002.pdf)但它一直在返回黑色像素。这是我的代码片段。请建议我该怎么做。提前致谢。

```
public static Bitmap GrayscaleToBin(Bitmap bm2)
{

    Bitmap bm;
    bm=bm2.copy(Config.ARGB_8888, true);
    final   int width = bm.getWidth();
    final  int height = bm.getHeight();
    int[]  pixels;
    pixels = new int[width*height];
    bm.getPixels(pixels,0,width,0,0,width,height);     
    //Bradley AdaptiveThrsholdging       
    int []intImg= new int[width*height];
    int sum=0;
    for(int i=0;i<width;++i){
        sum=0;
        for(int j=0;j<height;++j)
        {
            sum=sum+pixels[i+j*width];
            if(i==0){intImg[i+j*width]=sum;}
            else
            {
                intImg[i+j*width]= intImg[i-1+j*width]+sum;
            }
        }
    }
    int x1,x2,y1,y2=0,count=0;
    int s=width >> 3;   
    int t=15;
    for(int i=0;i<width;++i)
    {
        for(int j=0;j<height;++j)
        {
            x1=i-s/2;
            x2=i+s/2;
            y1=j-s/2;
            y2=j+s/2;
            if (x1 <0) x1 = 0;  
            if (x2>= width) x2 = width-1;  
            if (y1 <0) y1 = 0;  
            if (y2>= height) y2 = height-1;  
            count = (x2-x1) * (y2-y1);  
            sum = intImg [y2 * width + x2] -  
            intImg [y1 * width + x2] -  
            intImg [y2 * width + x1] +  
            intImg [y1 * width + x1]; 
            if((pixels[i+j*width]*count)<=(sum*(100-t)/100))
            {
                pixels[i+j*width]=0;
            }
            else
            {
                pixels[i+j*width]=255; 
            }
        }
    }
    /*---------------------------------------------------------------------------*/
    bm.setPixels(pixels,0,width,0,0,width,height);
    // Log.d("cdsfss","afterloop");
    return bm;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T09:57:19.813

经过长时间的斗争，我用下面的代码解决了这个问题。

```
public static Bitmap GrayscaleToBin(Bitmap bm2)
 {
 Bitmap bm;
 bm=bm2.copy(Config.RGB_565, true);
 final   int width = bm.getWidth();
 final  int height = bm.getHeight();

 int pixel1,pixel2,pixel3,pixel4,A,R;
 int[]  pixels;
 pixels = new int[width*height];
 bm.getPixels(pixels,0,width,0,0,width,height);
 int size=width*height;
      int s=width/8;
      int s2=s>>1;
      double t=0.15;
      double it=1.0-t;
      int []integral= new int[size];
      int []threshold=new int[size];
      int i,j,diff,x1,y1,x2,y2,ind1,ind2,ind3;
      int sum=0;
      int ind=0;
      while(ind<size)
      {
       sum+=pixels[ind] & 0xFF;
       integral[ind]=sum;
       ind+=width;
      }
   x1=0;
   for(i=1;i<width;++i)       
   {
       sum=0;
       ind=i;
       ind3=ind-s2;
       if(i>s)
       {
           x1=i-s;
       }
       diff=i-x1;
       for(j=0;j<height;++j)
       {
           sum+=pixels[ind] & 0xFF;
           integral[ind]=integral[(int)(ind-1)]+sum;
           ind+=width;
           if(i<s2)continue;
           if(j<s2)continue;
           y1=(j<s ? 0 : j-s);
           ind1=y1*width;
           ind2=j*width;

        if (((pixels[ind3]&0xFF)*(diff * (j - y1))) < ((integral[(int)(ind2 + i)] - integral[(int)(ind1 + i)] - integral[(int)(ind2 + x1)] + integral[(int)(ind1 + x1)])*it)) {
            threshold[ind3] = 0x00;
        } else {
            threshold[ind3] = 0xFFFFFF;
        }
        ind3 += width;
    }
}

y1 = 0;
for( j = 0; j < height; ++j )
{
    i = 0;
    y2 =height- 1;
    if( j <height- s2 ) 
    {
        i = width - s2;
        y2 = j + s2;
    }

    ind = j * width + i;
    if( j > s2 ) y1 = j - s2;
    ind1 = y1 * width;
    ind2 = y2 * width;
    diff = y2 - y1;
    for( ; i < width; ++i, ++ind )
    {

        x1 = ( i < s2 ? 0 : i - s2);
        x2 = i + s2;

        // check the border
        if (x2 >= width) x2 = width - 1;

        if (((pixels[ind]&0xFF)*((x2 - x1) * diff)) < ((integral[(int)(ind2 + x2)] - integral[(int)(ind1 + x2)] - integral[(int)(ind2 + x1)] + integral[(int)(ind1 + x1)])*it)) {
            threshold[ind] = 0x00;
        } else {
            threshold[ind] = 0xFFFFFF;
        }
    }
}
   /*-------------------------------
    * --------------------------------------------*/
   bm.setPixels(threshold,0,width,0,0,width,height);

   return bm;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-23T02:05:17.567

您可以使用[Catalano 框架](https://code.google.com/p/catalano-framework/)。在示例文件夹中有一个使用 Bradley for Android 的示例。

```
FastBitmap fb = new FastBitmap(bitmap);

fb.toGrayscale();

BradleyLocalThreshold bradley = new BradleyLocalThreshold();
bradley.applyInPlace(fb);

bitmap = fb.toBitmap(); 
```

# highcharts - highcharts 禁用某些标签

> ID：14758573
> 
> 赞同：0
> 
> 时间：2013-02-07T18:42:45.047
> 
> 标签：highcharts

我会喜欢禁用我图表的一些标签的可能性

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'bar'
            },
            title: {
                text: 'Historic World Population by Region'
            },
            subtitle: {
                text: 'Source: Wikipedia.org'
            },
            xAxis: {
                categories: ['Africa', 'America', 'Asia', 'Europe', 'Oceania'],
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Population (millions)',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +' millions';
                }
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -100,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: 'Year 1800',
                data: [107, 31, 635, 203, 2]
            }, {
                name: 'Year 1900',
                data: [133, 156, 947, 408, 6]
            }, {
                name: 'Year 2008',
                data: [973, 914, 4054, 732, 34]
            }, {
                name: 'Year 2009',
                data: [873, 614, 4054, 732, 34]
            }, {
                name: 'Year 2010',
                data: [573, 1500, 4054, 732, 34]
            }, {
                name: 'Year 2012',
                data: [373, 1380, 4054, 732, 34]
            }]
        });
    });

}); 
```

[http://jsfiddle.net/tkGFr/](http://jsfiddle.net/tkGFr/)

例如，此图表将显示所有标签，我希望可以只启用其中的 2 或 3 个（1800 年、1900 年和 2009 年），但始终保持其他选项（2008 年、2010 年和 2012 年）

这可能吗？

感谢您的帮助和建议：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:24:49.470

正如我所假设的，您希望在图例中启用“1800 年、1900 年和 2009 年”并在图表中显示，但其他仅在图例中？如果是，您可以使用可见参数

```
{
            name: 'Year 1800',
            visible: false,
            data: [107, 31, 635, 203, 2]
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T12:15:34.760

甚至 showInLegend: false; 可以使用；如果想隐藏在传说中。

# mercurial - Automating Hg notify config updates

> ID：14758574
> 
> 赞同：0
> 
> 时间：2013-02-07T18:42:45.583
> 
> 标签：mercurial

Hosting Mercurial on a windows box thru IIS.

I have a root directory where I put all of my repos

```
d:\repos
   - ProjectA
       - .hg
          - hgrc
   - ProjectB
       - .hg
          - hgrc
   - ProjectC
       - .hg
          - hgrc 
```

All of the repos' hgrc files setup the notify extension with:

config =d:\hg\Repositories\NotificationList.txt

That way I have a single file to manage all of the notification recipients, like the wiki describes: [https://www.mercurial-scm.org/wiki/NotifyExtension](https://www.mercurial-scm.org/wiki/NotifyExtension)

But the wiki makes mention of controlling that NotificationList.txt file thru it's own repository? How can I do that? If I create a separate repo at d:\repos\HgNotify and have the NotificationList.txt file in there, users can change, commit and push back, but when the push occurs, NotificationList.txt does not get updated on the hg server.

Is there a way to update that file somehow? Am I missing a key setup on my Hg server? Or do I need to use a post-push hook to deploy that file?

# Update 1

I added the details from Tim's answer and I kept getting HTTP 500: Server Error on the push. I finally figure out how to trace the python calls (`python -m win32traceutil`), and here is what seems to be the problem:

```
 File "C:\Python27\lib\site-packages\mercurial\util.py", line 402, in hgexecutable
 exe = findexe('hg') or os.path.basename(sys.argv[0]) AttributeError: 'module' object has no attribute 'argv' 
```

It doesn't seem to be able to find hg.exe.

# Update 2

I installed TortoiseHg and rebooted the system. Now I get: emote: added 1 changesets with 1 changes to 1 files remote: notify: sending 1 subscribers 1 changes remote: warning: changegroup.update hook exited with status 1

So that makes be think that it has found the hg.exe, but it is not doing its job, because the file does not get updated

# Update 3

Found my solution here: [https://stackoverflow.com/a/8023594/698](https://stackoverflow.com/a/8023594/698)

The command line I ended up using was:

```
 changegroup = cmd /c hg update 
```

I also added: [ui] debug=true

To my hgrc. Those two combined gave me a lot more meaningful messages. In the end I saw "Access denied". I gave Users full permission, but I am not sure why giving IUSR full permission didn't work. Something I'll have to dig into at a later time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:26:28.870

在包含通知列表的服务器存储库中，您需要添加一个更改组挂钩：

```
[hooks]
changegroup.update = hg update -C 
```

或者如果您想确保存储库始终是干净的：

```
[extensions]
purge =

[hooks]
changegroup.update = hg update -C && hg purge --all 
```

# sql - SQL Using values in row to create different columns

> ID：14758580
> 
> 赞同：0
> 
> 时间：2013-02-07T18:43:14.187
> 
> 标签：sql, select, join, multiple-columns

I have several tables in my database and want to select a couple columns from a couple tables, which is all fine. Now, there is a 3rd table, and this table has a column that has different text values in it, but the same few "text_values" for different users, for instance:

table3

```
row userid  text_value  value
1   user1   text1       value1
2   user1   text2       value2
3   user2   text1       value3
4   user3   text1       value4
... 
```

Now, I want to take INFO1 and INFO2 from Table1, INFO3 and INFO4 from Table2, but then I want to take all the values from Table3 where text_value=text1 and make this a 5th column with INFO5, and then take values from Table3 where text_value=text2 and make this a 6th column with INFO 6.

I have the following query, which WORKS fine if I ONLY want the INFO5 column:

```
SELECT Table1.INFO1, Table1.userid , Table2.INFO2,
Table1.INFO3, Table2.INFO4,
Table3.value AS INFO5
FROM Table1 LEFT OUTER JOIN Table2 ON Table1.userid = Table2.userid 
LEFT OUTER JOIN Table3 ON Table1.userid = Table3.userid 
WHERE Table3.text_value = 'text1' 
```

However, I want to have another column created using the values from the same table3 VALUE column, but when TEXT_VALUE = 'text2' (this is true for 'text3', 'text4', as there are several texts to "filter" on).

When I change the query to the following, it doesn't work:

```
SELECT Table1.INFO1, Table1.userid , Table2.INFO2,
Table1.INFO3, Table2.INFO4,
Table3.value AS INFO5 WHERE Table3.text_value = 'text1' 
Table3.value AS INFO6 WHERE Table3.text_value = 'text2' 
FROM Table1 LEFT OUTER JOIN Table2 ON Table1.userid = Table2.userid 
LEFT OUTER JOIN Table3 ON Table1.userid = Table3.userid 
```

Any guidance will be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:47:58.070

你需要一个`CASE`：

```
SELECT  Table1.INFO1, 
        Table1.userid, 
        Table2.INFO2,
        Table1.INFO3, 
        Table2.INFO4,
        CASE WHEN Table3.text_value = 'text1' THEN Table3.value END AS INFO5 
        CASE WHEN Table3.text_value = 'text2' THEN Table3.value END AS INFO6 
FROM Table1 
LEFT OUTER JOIN Table2 
    ON Table1.userid = Table2.userid 
LEFT OUTER JOIN Table3 
    ON Table1.userid = Table3.userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:47:10.817

您的 where 语句位于错误的位置。它应该在连接之后：

主要 SQL 语法应为：

```
SELECT Table1.INFO1, Table1.userid , Table2.INFO2,
Table1.INFO3, Table2.INFO4,
Table3.value AS INFO5 
Table3.value AS INFO6 
FROM Table1 LEFT OUTER JOIN Table2 ON Table1.userid = Table2.userid 
LEFT OUTER JOIN Table3 ON Table1.userid = Table3.userid 
WHERE Table3.text_value = 'text1' 
and Table3.text_value = 'text2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:20:29.463

case 语句的替代方法是使用 Pivot 功能，如果您想在表 3 中添加更多 Info# 而不进行不必要的连接，它可以让您进行扩展。

[http://sqlfiddle.com/#!3/789c8/1](http://sqlfiddle.com/#!3/789c8/1)

# angularjs - AngularJS - ForEach 访问上一个/下一个索引数组，可能吗？

> ID：14758581
> 
> 赞同：5
> 
> 时间：2013-02-07T18:43:13.893
> 
> 标签：angularjs

```
 $scope.todos = [
    {text:'learn', done:true},
    {text:'build', done:false},
    {text:'watch', done:false},
    {text:'destroy', done:false},
    {text:'rebuild', done:false}];

  $scope.remaining = function() {
    var count = 0;
    angular.forEach($scope.todos, function(todo,i) {
      todo.text = 'want2learn';
      todo.text[i+1] = todo.text;
    }); 
```

ForEach 函数是否可以访问/设置对象的上一个/下一个索引数组值，可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T19:16:08.043

是的，

```
$scope.todos[i+1].text = todo.text; 
```

不过，您需要防止索引超出数组末尾：

```
if(i < $scope.todos.length - 1) {
   $scope.todos[i+1].text = todo.text;
} 
```

# c++ - 动态提取 zip 的库

> ID：14758582
> 
> 赞同：5
> 
> 时间：2013-02-07T18:43:15.263
> 
> 标签：c++, c, zip, in-memory

我有一个相当大的 ZIP 文件，可以下载（无法更改文件）。现在的任务是在下载文件时解压缩文件，而不必等到收到*中央目录结尾。*有这样的图书馆吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:07:36.837

不久前我写了“捏”。它在 Objective-C 中，但从 zip 中解码文件的方法可能是在 C++ 中获取它的一种方法？是的，一些编码将是必要的。

[http://forrst.com/posts/Now_in_ObjC_Pinch_Retrieve_a_file_from_inside-I54](http://forrst.com/posts/Now_in_ObjC_Pinch_Retrieve_a_file_from_inside-I54) [https://github.com/epatel/pinch-objc](https://github.com/epatel/pinch-objc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:11:04.353

我不确定这样的图书馆是否存在。除非您的线路非常快[或处理器非常慢]，否则不太可能为您节省大量时间。如果所有数据都在 ram 中，解压缩几 GB 只需要几秒钟[然后将未压缩的数据写入磁盘可能需要一段时间，从磁盘加载可能会增加总时间]。

但是，假设发送端支持“范围”下载，您可能会编写一些先下载目录的东西[通过先读取固定头，然后读取目录，然后从头到尾下载文件的其余部分]。大概这就是 epatel 的答案中“捏”链接的方式。

# jquery - Adding Custom Scripts to Ember

> ID：14758584
> 
> 赞同：1
> 
> 时间：2013-02-07T18:43:16.140
> 
> 标签：jquery, ember.js

So on my app, as it is loading in a table from the rails DB side, it comes in very late, and my little $('tr:even').addClass("trAlt"); - only reads 1 tr, and doesn't apply the css class for styling. I have placed the script on didInsertElement as follows:

```
App.RecordsView = Ember.View.extend({
    templateName: 'records/index',
    contextBinding: 'App.RecordController',
    didInsertElement: function(){
         $('tr:even').addClass("trAlt")
    }
}); 
```

But the inital load is 1 tr row (the headings), and then Ember isn't firing off the even as the view changes. Most of the code is the same as from this [question.](https://stackoverflow.com/questions/14741766/getting-results-in-ember-views)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:45:55.493

考虑使用无块形式`{{each}}`并将 jQuery 代码移动到每行的 didInsertElement，如下所示：

```
App.RecordsView = Ember.View.extend({
    templateName: 'records/index',
    contextBinding: 'App.RecordController'
});

App.RecordRowView = Ember.View.extend({
    templateName: 'records/record',
    tagName: 'tr',
    didInsertElement: function(){
      $('tr:even').addClass("trAlt")
    }
});

// in records/index.hbs
{{each controller itemViewClass="App.RecordRowView"}} 
```

[http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_each](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_each)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:10:36.203

您可以观察`isLoaded`控制器内容的属性：

```
App.RecordsView = Ember.View.extend({
    templateName: 'records/index',
    contextBinding: 'App.RecordController',

    onRecordsLoaded: function () {
        $('tr:even').addClass("trAlt");
    }.observes('App.RecordController.content.isLoaded')
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:56:46.633

您可以使用纯 CSS 自动设置表格样式吗？这将适用于行，即使它们是在`didInsertElement()`调用之后添加的。

**CSS：**

```
tr:nth-of-type(even) {
  background-color:red;
} 
```

[JSBin 示例](http://jsbin.com/itepuf/1/edit)

# jquery - JQuery Working in Development, Not Production on Heroku Cedar

> ID：14758585
> 
> 赞同：0
> 
> 时间：2013-02-07T18:43:27.523
> 
> 标签：jquery, ruby-on-rails, heroku, asset-pipeline

jQuery is working for me locally in development but not in production on Heroku Cedar. I'm very new to Rails, so I'm trying to learn this the right way rather than just slapping the code into a view. I don't see any errors in the server log. I'm compiling my assets locally with:

*bundle exec rake assets:precompile*

Then pushing the whole app to Heroku. I've tried several different gem combinations, current configuration:

**Gemfile**

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'bcrypt-ruby', '3.0.1'
gem 'execjs'
gem 'jquery-rails'
gem 'will_paginate', '~> 3.0.0'
gem 'sass-rails',   '~> 3.2.3'
gem 'bootstrap-sass', '~> 2.2.2.0'
gem 'bootstrap-will_paginate', '0.0.6'
gem "friendly_id", "~> 4.0.9"
gem 'twitter'
gem 'devise'
gem 'cancan'
gem "paperclip", "~> 3.0"
gem "cocaine", "= 0.3.2" 

group :production do
  gem 'pg'
  gem 'thin'
end
group :development, :test do
  gem 'sqlite3'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end 
```

**application.js**

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:50:33.327

愚蠢的错误，我的 javascript 资产文件夹中有一个额外的引导程序副本。一旦我删除它并重新编译资产，一切都按预期工作。您的资产中不需要 jQuery 或引导文件，只需在 application.js 中包含 gem 和上面的行，不过在 jQuery 之后引导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T16:22:09.457

就我而言，我只是运行这些命令：

*   heroku 运行 gem 清理
*   rake 资产：预编译（语言环境）
*   git push heroku master 在这之后它在rails 5中对我有用

# c# - System.BadImageFormatException：无法加载文件或程序集“x_Accessor，...”此程序集由更新的运行时构建

> ID：14758588
> 
> 赞同：5
> 
> 时间：2013-02-07T18:43:32.240
> 
> 标签：c#, .net, unit-testing, accessor

```
System.BadImageFormatException: Could not load file or assembly 'x_Accessor, 
Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. 
This assembly is built by a runtime newer than the currently loaded runtime and 
cannot be loaded. 
```

我很难找到治愈这种疾病的方法...

我已经为点网测试项目创建了单元测试。使用默认的单元测试框架。

自动化工具创建了一个**访问器**——用于测试**私有方法**。

[我知道理论，私有方法应该通过它们的调用者进行测试——但是，这取决于它们的目的、内容、上下文等......所以如果可以的话，我会测试它们。]

我过去在几个项目中做过这个，效果很好。

但是在我现在尝试测试的这两个项目中，我遇到了这个问题......

注意：我使用的是 Framework 3.5 - 这可能是个问题？- 但访问者应该知道这一点！

我绝对看不到可以修改程序集的运行时的地方……我想它是访问器。

是的，我确实清理并重建了，我确实完全擦除了输出文件夹并重建，我确实删除了访问器和私有方法并重新创建它。

请帮我找到解决方法！谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T18:52:41.340

您不能引用在更高 .NET 版本（或者更准确的 CLR 版本）中编译的程序集。因此，在您的示例中，如果您有一个用于单元测试的程序集是 .NET 3.5，那么您不能引用一个是 .NET 4.0 的程序集。

我认为这个答案就是您要寻找的答案：

[如果使用私有访问器，针对 3.5 框架的 VS2010 SP1 单元测试会失败](https://stackoverflow.com/questions/5397251/vs2010-sp1-unit-tests-targeting-3-5-framework-fail-if-using-private-accessor)

# ios - 创建框架时出错

> ID：14758592
> 
> 赞同：0
> 
> 时间：2013-02-07T18:43:46.190
> 
> 标签：ios, opencv, terminal, xcode4.2

我尝试按照此[说明在 macbook pro 上安装 opencv](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation)

我在构建 OpenCV 框架时遇到问题。当我输入时， `$ python opencv/ios/build_framework.py iOS` 我遇到了这个问题：

```
CMake Error: Internal CMake error, TryCompile configure of cmake failed -- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h CMake Error at /opt/local/share/cmake-2.8/Modules/CMakeCInformation.cmake:37
Configuring incomplete, errors occurred!
error: can't exec '/Developer/usr/bin/xcodebuild' (No such file or directory) 
```

我检查了 Developer/usr/bin/xcodebuild。我有这个文件夹。但我需要在前面不输入“/”。这里有什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T21:06:25.850

你需要安装cmake

再次运行

[http://www.cmake.org/cmake/help/install.html](http://www.cmake.org/cmake/help/install.html)

# inheritance - OfType<> 方法在升级到 EF5 和 .NET 4.5 后在 OData 中不起作用

> ID：14758594
> 
> 赞同：1
> 
> 时间：2013-02-07T18:44:03.097
> 
> 标签：inheritance, wcf-data-services, entity-framework-5

我最近将 OData 服务从带有 Entity Framework 4 的 .NET 4.0 升级到了 .NET 4.5 和 Entity Framework 5。我的 edmx 映射看起来很完美，所有继承设置都与我之前的完全一样。我正在使用 TPH 继承，并且所有映射在正确的鉴别器下仍然是正确的。但是，我无法将 .OfType<>() 运算符与 OData 服务一起使用。我没有收到不支持 OfType 的错误，而是`resource could not be found`.

我正在使用详细错误，这是我得到的唯一响应。我有一个单元测试直接命中与 OfType 运算符一起正常工作的 DBContext。我最初一直在使用 ObjectContext，但我改用 DBContext 看看这是否能解决我的问题。

我很茫然，因为我没有收到任何错误。我的地图相当复杂，所以我不想尝试重新创建整个地图。

# mysql - MySQL查询返回不在数据库中的值

> ID：14758599
> 
> 赞同：0
> 
> 时间：2013-02-07T18:44:12.283
> 
> 标签：mysql

我正在开展一个项目，以帮助参加特定会议的与会者。我正在查询以获取会议中的事件以及指定的用户是否参加了此活动。为了跟踪用户是否参加活动，我们有一个连接表（Events_Users），所以我不确定如何完成我的任务。我需要能够选择事件的所有信息并将其返回，以及一个额外的列“isAttending”（数据库中不存在）指定该用户是否参加该会议。

我希望返回结果类似于：

```
| event.id | isAttending |
|     1    |      1      |
|     2    |      0      |
|     3    |      0      | 
```

这可能吗？（userId 将被传入，因此我可以检查以确定 'isAttending' 是真还是假）。

附带说明一下，我们已经尝试进行两次单独的调用（getAllEvents 和 isUserAttending）；然而，由于这些调用是异步的，我们很难获得我们想要的信息（我不知道细节）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:51:34.113

假设你有这些表

```
Events : id , other columns
Event_Users : event_id , user_id
Users : id , username 
```

这是我会给你想法的查询。如果 null 将值设置为 0，则使用 IFNULL 设置为 1。

```
SELECT
  e.id,
  IFNULL(u.username,0,1) as isAttending
from `Events` as e
  LEFT JOIN Events_Users as eu ON eu.events_id = e.id
  LEFT JOIN users as u ON u.id = eu.user_id
where u.id = 1 
```

其中 1 是您可以动态替换的特定用户 ID

# android - 如何使用 asynctask 在按钮中添加进度对话框

> ID：14758603
> 
> 赞同：0
> 
> 时间：2013-02-07T18:44:25.957
> 
> 标签：android

我试试这个[教程](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

我仍然很困惑如何使用 asynctask 在按钮注销中添加进度对话框

这是我的活动。

```
package hariff.ltis.mainmenu;

import hariff.ltis.inputhama.CInputHamaApp;
import hariff.ltis.library.DatabaseHandler;
import hariff.ltis.library.UserFunctions;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import hariff.ltis.mainmenu.R;

public class MainMenu extends Activity{
    UserFunctions userFunctions;
    Button btnLogout;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        userFunctions = new UserFunctions();
        if(userFunctions.isUserLoggedIn(getApplicationContext())){
        setContentView(R.layout.main);
        btnLogout = (Button) findViewById(R.id.btnLogout);
        btnLogout.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                userFunctions.logoutUser(getApplicationContext());
                Intent login = new Intent(getApplicationContext(), LoginActivity.class);
                login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                startActivity(login);
                // Closing dashboard screen
                finish();
            }

        });

        loadUser();

        View button3Click = findViewById(R.id.button3);
        button3Click.setOnClickListener(new View.OnClickListener(){
             public void onClick(View v) {
                 // Perform action on click
                DataHama();
             }
        });

        }else{
            // user is not logged in show login screen
            Intent login = new Intent(getApplicationContext(), LoginActivity.class);
            login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(login);
            // Closing dashboard screen
            finish();
        }

    }
    /*private void InputData(){
        Intent i = new Intent(this, SaveData.class);
        startActivity(i);
    }

    private void CheckData(){
        Intent i1 = new Intent(this, CheckData.class);
        startActivity(i1);
    }*/

    private void loadUser() {
        TextView txt = (TextView) findViewById(R.id.textUser);
        // database handler
        DatabaseHandler db = new DatabaseHandler(getApplicationContext()); 
        // Spinner Drop down elements
        SQLiteDatabase dbs = db.getReadableDatabase();

        Cursor cursor = dbs.rawQuery("SELECT * FROM login", null);
      if (cursor.moveToFirst()) {
         do {
            String emailid=cursor.getString(2); // Here you can get data from table and stored in string if it has only one string.
           txt.setText(emailid);

         } while (cursor.moveToNext());
      }
      if (cursor != null && !cursor.isClosed()) {
         cursor.close();
      }
      if(db!=null)
      {
          db.close();
      }
        // Creating adapter for spinner

    }

    private void DataHama(){
        Intent i2 = new Intent(this, CInputHamaApp.class);
        startActivity(i2);
    }

} 
```

所以当我单击按钮注销时，进度对话框显示并有时间，例如 5 秒。怎么做？

按钮注销编辑：

```
btnLogout.setOnClickListener(new View.OnClickListener() {

          public void onClick(View arg0) {
            // TODO Auto-generated method stub
          logoutUserOperation loguttask = new logoutUserOperation(MainMenu.this);
          loguttask.execute("");

           }

         }); 
```

这是 logoutUser 函数

```
/**
     * Function to logout user
     * Reset Database
     * */
    public boolean logoutUser(Context context){
        DatabaseHandler db = new DatabaseHandler(context);
        db.resetTables();
        return true;
    } 
```

编辑：这是异步任务

```
private class logoutUserOperation extends AsyncTask<String, Void, Boolean> {
        ProgressDialog progressDialog;
        Context context;
        public logoutUserOperation(Context context){
        this.context=context;
        }
              @Override
              protected void onPreExecute() {
              progressDialog = ProgressDialog.show(context, "", "Logout...");
              }
              @Override
              protected Boolean doInBackground(String... params) {
                    boolean boollogout=userFunctions.logoutUser(context);
                    return boollogout;
              }      

              @Override
              protected void onPostExecute(Boolean result) { 
                  progressDialog.dismiss();
                  if(result){
                        Intent login = new Intent(context,LoginActivity.class);
                        login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                        context.startActivity(login);
                        // Closing dashboard screen
                        context.finish();
                   }else{
                      // your code here...
                   }              
              }
        } 
```

当我尝试但显示错误时

```
The method finish() is undefined for the type Context 
```

BR

亚历克斯

编辑：这是睡眠 5 秒的代码

```
protected Boolean doInBackground(String... params) {

                  boolean boollogout=userFunctions.logoutUser(context);

                          try{
                                  Thread.sleep( 5000 );

                          } catch( Exception e ){
                                  Log.i("Logout", e.getMessage() );
                          }

                  return boollogout;

              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:18:03.500

您可以`ProgressDialog`使用以下方式显示按钮单击`AsyncTask`：

```
private class logoutUserOperation extends AsyncTask<String, Void, Boolean> {
ProgressDialog progressDialog;
Context context;
public logoutUserOperation(Context context){
this.context=context;
}
      @Override
      protected void onPreExecute() {
      progressDialog = ProgressDialog.show(context, "", "Logout...");
      }
      @Override
      protected boolean doInBackground(String... params) {
            boolean boollogout=userFunctions.logoutUser(context);
            return boollogout;
      }      

      @Override
      protected void onPostExecute(boolean result) { 
          progressDialog.dismiss();
          if(result){
                Intent login = new Intent(context, 
                                             LoginActivity.class);
                login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                context.startActivity(login);
                // Closing dashboard screen
                context.finish();
           }else{
              // your code here...
           }              
      }
} 
```

并在按钮单击时启动 AsyncTask ：

```
btnLogout.setOnClickListener(new View.OnClickListener() {

  public void onClick(View arg0) {
    // TODO Auto-generated method stub
  logoutUserOperation loguttask = new logoutUserOperation(MainMenu.this);
  loguttask.execute("");

   }

 }); 
```

# sql - 使用 SAS sql 创建宏变量

> ID：14758604
> 
> 赞同：2
> 
> 时间：2013-02-07T18:44:29.430
> 
> 标签：sql, macros, sas

我正在使用 SAS sql 创建一些宏变量以供以后使用和打印报告。

我正在按组创建一些汇总变量（平均值、最小值、最大值等）。

以下代码适用于第一组，但不会为第二组和第三组创建宏变量。

* * *

```
data scores;
  input trt  t;
cards;  
1  10
1  11
1  12
1  13
2  4
2  5
2  6
2  7
3  9
3  8
3  7
3  6
;
run;

%macro cdi;

%do i = 1 %to 3;

proc sql noprint;
  select  n(t),  nmiss(t),  mean(t),  std(t),  min(t),  max(t) 
    into  :n&i,   :miss&i,  :mean&i,   :sd&i,  :min&i,  :max&i

  from scores
  where trt = &i;
quit;

%end;

%mend cdi;
%cdi;

*****  this call shows the right values  ;
%put &n1 &miss1 &mean1 &sd1 &min1 &max1 ;

*****  this call produces error (symbolic reference not resolved)  ;
%put &n2 &miss2 &mean2 &sd2 &min2 &max2 ; 
```

* * *

我确定我错过了一些简单的东西，但我还没有看到它......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:14:58.047

您的问题是您正在创建的宏变量是宏的本地变量。如果您希望 then 在宏执行后存在，您需要`%global`在宏内部使用语句定义它们。

换句话说，将其添加到宏定义的顶部：

```
%global n1 miss1 mean1 sd1 min1 max1 
        n2 miss2 mean2 sd2 min2 max2 
        n3 miss3 mean3 sd3 min3 max3 ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:34:19.617

为什么要创建汇总值的宏变量？确实很少有使用情况，最好将其创建为表以供以后使用……而且它更快、更简单、更灵活。

```
proc sql;
create table summary as
select  trt, n(t) as n,  nmiss(t) as nmiss,  mean(t) as mean,  std(t) as std,  min(t) as min,  max(t) as max
from scores
group by trt;
quit; 
```

或者，既然你在 SAS...

```
proc means data=scores;
var t;
class trt;
types trt;
output out=summary n= nmiss= mean= std= min= max= /autoname;
run; 
```

然后根据需要在报告中使用它 - 或者将其合并回主数据集，如果这样更容易的话。数据应该是数据，宏变量不应该是数据，而是程序输入。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-07T19:25:03.903

鲍勃是对的。解决方案就像剪切和粘贴一样简单：

```
%macro cdi;

%do i = 1 %to 3;

proc sql noprint;
  select  n(t),  nmiss(t),  mean(t),  std(t),  min(t),  max(t) 
    into  :n&i,   :miss&i,  :mean&i,   :sd&i,  :min&i,  :max&i

  from scores
  where trt = &i;
quit;

%end;
*****  this call shows the right values  ;
%put &n1 &miss1 &mean1 &sd1 &min1 &max1 ;

*****  this call NO LONGER produces error (symbolic reference not resolved)  ;
%put &n2 &miss2 &mean2 &sd2 &min2 &max2 ;

%mend cdi;
%cdi; 
```

# javascript - Mongoexport 在日期范围内使用 $gt 和 $lt 约束

> ID：14758605
> 
> 赞同：16
> 
> 时间：2013-02-07T18:44:29.790
> 
> 标签：javascript, mongodb, mongoexport

我正在尝试使用以下 mongoexport 调用从我的 mongodb 获取某一天的订单：

`mongoexport --db store --collection user_data --query "{'order.created_order':{$gt:ISODate("2013-02-05T00:00:00.000Z"),$lt:ISODate("2013-02-06T00:00:00.000Z")}, 'order.status':'paid'}" --out ordersfeb6.json`

但我目前遇到以下错误：

```
Thu Feb  7 18:33:43 Assertion: 10340:Failure parsing JSON string near: 'order.cre
0x56a223 0x5712e5 0x53e0f7 0x53e21e 0x8b7739 0x524f2b 0x5258a3 0x7fa7b77bd76d 0x525975 
mongoexport(_ZN5mongo15printStackTraceERSo+0x23) [0x56a223]
mongoexport(_ZN5mongo11msgassertedEiPKc+0xc5) [0x5712e5]
mongoexport(_ZN5mongo8fromjsonEPKcPi+0x377) [0x53e0f7]
mongoexport(_ZN5mongo8fromjsonERKSs+0xe) [0x53e21e]
mongoexport(_ZN6Export3runEv+0x489) [0x8b7739]
mongoexport(_ZN5mongo4Tool4mainEiPPc+0x72b) [0x524f2b]
mongoexport(main+0x23) [0x5258a3]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7fa7b77bd76d]
mongoexport() [0x525975]
assertion: 10340 Failure parsing JSON string near: 'order.cre 
```

从这个问题[mongoexport JSON parsing error](https://stackoverflow.com/questions/8098191/mongoexport-json-parsing-error/11814950#11814950)我知道 javascript 用于评估 mongo 查询的某些部分。我想知道：$gt 和 $lt 运算符是否需要 javascript，这是我的问题吗？如果没有，我不确定我的查询有什么问题，任何建议将不胜感激。感谢您的阅读！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-08T07:18:20.790

这里的问题是您如何表示日期，它们需要作为`Date`类型和纪元格式传入。试试这个：

```
mongoexport --db store --collection user_data --query '{"order.created_order":{$gt:new Date(1360040400000),$lt:new Date(1360990800000)}, "order.status" : "paid"}' --out ordersfeb6.json 
```

如果您希望将 ISODate 转换为纪元，只需在 shell 中调用 date，如下所示：

```
> new Date(2013,01,16)*1
1360990800000 
```

然后验证：

```
> new Date(1360990800000)
ISODate("2013-02-16T05:00:00Z") 
```

**更新：**正如[imcaptor](https://stackoverflow.com/users/345691/imcaptor)的评论中所指出的，构造函数中的月份是从零开始的（0 = Jan，11 = Dec），这`Date`不是大多数人所期望的，而且很容易忘记。我在上面的示例中通过了 01 并获得了 2 月的日期，正如您在验证中的 ISODate 中看到的那样。

# jquery - 当用户单击链接时，我需要同时发生两个事件

> ID：14758607
> 
> 赞同：0
> 
> 时间：2013-02-07T18:44:35.830
> 
> 标签：jquery, events, slideshow, simultaneous

当用户单击幻灯片的缩略图（可能在页面下方）时，我希望主幻灯片图像更改并且页面滚动到顶部（实际主图像幻灯片正在发生的位置）。

下面是我单独工作的两个脚本 - 但是我需要它们同时工作。我希望有人能帮帮忙。

谢谢

```
<script type="text/javascript">       
     $(function() {
$('a.thumnbnail').bind('click',function(event){
    var $anchor = $(this);
    $('html, body').stop().animate({
        scrollTop: $($anchor.attr('href')).offset().top
    }, 1500,'easeInOutExpo');
    event.preventDefault();
});
});
</script> 
<script type="text/javascript">
$(document).ready(function() {
$('.slideShow').slideShow({
interval: 10
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:52:54.580

无需调用两个不同的`doc ready`：

```
$(function() {  //<---All in this is enough
    $('a.thumnbnail').bind('click',function(event){
       var $anchor = $(this);
       $('html, body').stop().animate({
           scrollTop: $($anchor.attr('href')).offset().top
       }, 1500,'easeInOutExpo');
       event.preventDefault();
    },function(){         // <---------------make this in callback function here
       $('.slideShow').show().slideShow({ // <----display:none initially then show here
        interval: 10
       });
    });
}); 
```

# serialization - 有没有办法保护 PyYAML？

> ID：14758613
> 
> 赞同：1
> 
> 时间：2013-02-07T18:44:55.000
> 
> 标签：serialization, thrift, avro, pyyaml

考虑到这一点：

[http://nedbatchelder.com/blog/201302/war_is_peace.html](http://nedbatchelder.com/blog/201302/war_is_peace.html)

有没有办法`.load`安全地使用方法来获取类实例而不仅仅是字典？

比如说，像 use 一样 `.safe_load`，验证 object 是否符合犹太教规定，然后 use `.load`。它会带来一些风险吗？这是可行的、安全的、实用的吗？

顺便说一句，Thrift 或 Avro 等框架是否提供有效的安全功能？这里是否有人在这些项目中工作得足够深入，可以说是否已经解决了安全问题？

# ajax - ajax成功方法未在asp.net mvc中显示数据

> ID：14758620
> 
> 赞同：0
> 
> 时间：2013-02-07T18:45:22.237
> 
> 标签：ajax, asp.net-mvc, jquery, asp.net-mvc-2

我正在开发 asp.net 应用程序。它的视图有一个像这样的按钮：

```
<input type="button" id="btnCall" title="Call" value="Call" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" /> 
```

在 document.ready 中，我有这个：

```
$("#btnCall").click(function () {
    alert("here");
    $.ajax({
        type: "POST",
        dataType: "text/json",
        url: "/account/getGenericPassword",
        success: function (data) {                   
            alert("data" + data);
            if (data == null || data == "") {
                 alert("Generic Password is empty. Please enter generic password");
            }
            else {
               //saveCallRecording();
            }
       }
   });
}); 
```

和方法是这样的：

```
[Authorize]
public JsonResult GetGenericPassword() {
     using (IUserProfileManager profilemanager = new ManagerFactory().GetUserProfileManager())            {
          UserProfile profile = profilemanager.GetProfile(CurrentUser.Id, CurrentAccount.Id);
          return Json(profile.GenericPassword == null ? "" : profile.GenericPassword, JsonRequestBehavior.AllowGet);
     }
} 
```

但未显示成功警报。请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:53:12.873

尝试像这样设置数据类型：

```
dataType: "json" 
```

[请参阅http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)上的有效数据类型选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T08:55:28.497

试试这些

type:'Post',
url:'@Url.Action("actionname","controller")',
datatype:"json",
data:{},
success:function(data){ }

# mysql - MySQL 在 TRANSACTION、COMMIT 和 ROLLBACK 上自动增加列

> ID：14758625
> 
> 赞同：17
> 
> 时间：2013-02-07T18:45:52.580
> 
> 标签：mysql, transactions, auto-increment, decrement

当使用 MySQL START TRANSACTION 并且 MySQL 决定回滚时 - 如果表具有 AUTO_INCREMENT 列 - 在回滚期间该列是否会减少？

还是应该？

我遇到了一些事务数据被正确回滚的问题——但看起来该表是自动递增的，而不是在回滚中递减。

* * *

```
# BOTH TABLES START OUT EMPTY // TABLE1 ID is **auto_increment** 

START TRANSACTION;

INSERT INTO `TABLE1` (`ID` ,`NAME`) VALUES (NULL , 'Ted');  # MySQL TABLE1 **ID** is Auto incremented to 1 

INSERT INTO `TABLE2` (`ID` ,`WRONGVALUE`) VALUES (NULL , 'some value');  # error. This TRANSACTION will not succeed 

COMMIT;  # Because of the error - this TRANSACTION is now rolled back and Ted is NOT added 
```

因为 MySQL 将自动增加第一个表上的 ID - 无论事务是成功还是失败 - 这是自己减少表的标准做法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-07T18:49:47.663

不，自动增量机制*必须*在事务范围之外工作，因为在您完成事务之前，另一个用户可能正在插入同一个表。其他用户的交易必须能够分配下一个值，才知道你的交易是否在使用你刚刚分配的值。

回复您的评论：如果我可以说得更清楚一点，事务范围的任何更改都可能被回滚。自增计数器不会回滚，因此它不服从事务的**原子性。**它也不服从**隔离**，因为即使您的事务尚未提交，另一个事务也会获得下一个值。

自动增量的工作方式意味着有时，如果您插入一些行然后回滚您的事务，您使用自动增量分配的值将永远丢失！

但这没关系。主键值必须是唯一的，但它们不需要是连续的。换句话说，它们不是行号，你不应该那样使用它们。因此，您永远不需要减少自动增量创建的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-14T22:09:49.440

披露：我对 SQL 比较陌生，所以其中一些可能是错误的。但这就是我的理解。自动增量必须在事务之外起作用，否则您可能会危及数据。假设您有 2 个用户都试图连接到您的分贝。两者都在创建帐户。创建帐户 1 时，它会递增到 1。然后创建帐户 2 并递增到 2。到目前为止，它看起来如下所示：

*   (1、账户1)
*   (2、账户2)
*   增量：2。

现在让我们假设账户 2 提交，但账户 1 失败。现在您的表格如下所示：

*   (2、账户2)
*   增量：1。

因为您减少了自动增量，所以当有人尝试注册新帐户时，您将无法获得唯一值，因为这对将是：

*   (2,账户2)
*   尝试插入 (2, NewAccount)

这将失败，因为主键 2 不是唯一的。

如果您需要修复您的表（出于开发目的），您始终可以运行以下代码：

```
ALTER TABLE `DB_NAME`.`TABLE_NAME` 
AUTO_INCREMENT = 1 (or some other number); 
```

# typescript - Ace 文本编辑器的 TypeScript 声明

> ID：14758630
> 
> 赞同：5
> 
> 时间：2013-02-07T18:46:06.767
> 
> 标签：typescript, ace-editor

我正在寻找 Ace 文本编辑器的 TypeScript 声明文件 (*.d.ts)。谷歌没有找到任何东西。有人见过他们吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T03:46:54.027

我创建了定义。[https://github.com/Diullei/ace-typescript-definition](https://github.com/Diullei/ace-typescript-definition)。当测试正确时，我将发送一个 pullrequest 到 DefinitiveTyped[并将](https://github.com/borisyankov/DefinitelyTyped)对定义的引用放在[http://www.tsdpm.com/](http://www.tsdpm.com/)

**已编辑**

我创建了定义。[https://github.com/borisyankov/DefinitelyTyped/blob/master/ace/ace.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/ace/ace.d.ts) [http://www.tsdpm.com/](http://www.tsdpm.com/)

**已编辑 01-09-2017**

*   该链接已移至[https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/ace/index.d.ts](https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/ace/index.d.ts)
*   *www.tsdpm.com*不再可用

现在使用 TypeScript 2.0+，您可以直接从 npm [https://www.npmjs.com/package/@types/ace安装它](https://www.npmjs.com/package/@types/ace)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T09:29:57.673

类型定义的主要来源是[绝对类型在 GitHub 上](https://github.com/borisyankov/DefinitelyTyped/)。

他们还没有 Ace 文本编辑器，但我有一篇关于[为 TypeScript 编写类型](http://www.stevefenton.co.uk/Content/Blog/Date/201301/Blog/Complex-TypeScript-Definitions-Made-Easy/)的文章可能会有所帮助。

如果您需要一些帮助，请将其分解并在此处询问，我们将为您提供帮助。

# python - 嵌套for循环到numpy卷积

> ID：14758631
> 
> 赞同：2
> 
> 时间：2013-02-07T18:46:11.143
> 
> 标签：python, numpy, convolution

如何提高此功能的速度？

```
def foo(mri_data, radius):

    mask = mri_data.copy()

    ny = len(mri_data[0,:])
    nx = len(mri_data[:])

    for y in xrange(0, ny):
        for x in xrange(0, nx):
            if (mri_data[x-radius:x+radius,y-radius:y+radius] != 1.0).all():
                mask[x,y] = 0.0                    
    return mask.copy() 
```

它以 numpy 数组的形式接收图像切片。遍历每个像素并测试围绕该像素的边界框。如果框中没有值等于 1，则我们通过将其设置为 0 来丢弃该像素。

有人告诉我我可以使用`numpy.convolve`，但我不确定这有什么关系。

编辑：图像值在二进制范围内，因此最小值为 0.0，最大值为 1.0。介于 ex 之间的值：0.767。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:14:47.327

可以滥用卷积的情况之一。我不会使用它，但边界否则很乏味......

```
from scipy.ndimage import convolve

not_one = (mri_data != 1.0) # are you sure you want to compare with float like that?!

conv = convolve(not_one, np.ones((2*radius, 2*radius)))
all_not_one = (conv == (2*radius)**2)

mask[all_not_one] = 0 
```

真的应该做同样的事情......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T20:10:16.157

您正在做的事情称为 a`binary_dilation`但您的代码中有一个小错误。具体来说，当 x, y 小于半径时，您会得到负索引。这些负数是使用 numpy 索引规则解释的，这不是您在此处[索引时更](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)想要的，在图像的两个边缘上给您错误的结果。

这是一些使用二进制膨胀来完成同样事情的代码，并修复了上述错误。

```
import numpy as np
from scipy.ndimage import binary_dilation

def foo(mri_data, radius):
    structure = np.ones((2*radius, 2*radius))
    # I set the origin here to match your code
    mask = binary_dilation(mri_data == 1, structure, origin=-1)
    return np.where(mask, mri_data, 0) 
```

# javascript - 主干.js 不会触发我的事件

> ID：14758635
> 
> 赞同：0
> 
> 时间：2013-02-07T18:46:38.197
> 
> 标签：javascript, backbone.js

我正在编写一个backbone.js 应用程序，但我遇到了问题。我的收藏不会触发事件，任何人都可以在下面的代码中发现问题吗？我得到了渲染反馈，初始化器反馈..但是永远不会调用 append 方法。我知道“../app”返回一个带有 tro json 项目的列表。我什至可以看到这些是在集合中创建的。为什么我的事件没有被调用？

```
window.TablesInspectorView = Backbone.View.extend({

    tagName: "div",

    initialize: function () {
        console.log('Initializing window.TablesInspectorView');        

        // setup the tables
        this.data     = new Backbone.Collection();
        this.data.url = "../app";
        this.data.fetch();

        // some event binds..
        this.data.on("change", this.render     , this);
        this.data.on("add"   , this.append_item, this);
    },
    render: function(){
        console.log("render");
        _.each(this.data.models, this.append_item);
    },
    append_item: function(item) {
        console.log("appended");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:09:38.527

According to my knowledge , the backbone fetch() is an asynchronous event and when it completes the **reset** event is triggered ,

When the models belonging to the collection (this.data) are modified , the **change** event is triggered, so im guessing you have not got that part correct.

so i would do something like this :

```
window.TablesInspectorView = Backbone.View.extend({

    tagName: "div",

    initialize: function () {
        console.log('Initializing window.TablesInspectorView');        

        // setup the tables
        this.data     = new Backbone.Collection();
        this.data.url = "../app";
        this.data.fetch();

        // some event binds..
        this.data.on("reset", this.render     , this); //change here
        this.data.on("add"   , this.append_item, this); // i dont see a this.data.add() in you code so assuming this was never called ?
    },
    render: function(){
        console.log("render");
        _.each(this.data.models, this.append_item);
    },
    append_item: function(item) {
        console.log("appended");
    }
}); 
```

# android - 使用最新的 Facebook SDK3.0 无法获取好友列表信息

> ID：14758637
> 
> 赞同：1
> 
> 时间：2013-02-07T18:46:50.397
> 
> 标签：android, facebook-graph-api

我是 android 上 facebook sdk 开发的新手，我正在做一个 Graph API 查询以从我的 facebook 个人资料中检索 FriendList 信息。

我正在使用最新的sdk。有解决方案，`SOF w.r.t old sdk`但我想使用最新的工具包来实现它。

与我很容易解析的朋友`/me/friends`返回`JSON`响应的查询。但是，当我尝试通过查询来获取生日等额外信息时，我得到了无效的响应。`name``IDs``/me/friends/?fields=birthday`

我`friends_birthday`也在`onCreateView`下面的方法中设置了权限。

这是我的代码：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.activity_main, container, false);
    LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
    authButton.setFragment(this);
    authButton.setReadPermissions(Arrays.asList("user_location", "user_birthday", "user_likes","read_friendlists","friends_birthday"));   /*setting permissions*/
    userInfoTextView = (TextView) view.findViewById(R.id.userInfoTextView);
    return view;
}

public void onResume() {
    super.onResume();
    Session session = Session.getActiveSession();
    if (session != null &&
           (session.isOpened() || session.isClosed()) ) {
        onSessionStateChange(session, session.getState(), null);
    }
    uiHelper.onResume();
}

private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    if (state.isOpened()) {
        Log.i(TAG, "Logged in...");
        userInfoTextView.setVisibility(View.VISIBLE);
        Settings.addLoggingBehavior(LoggingBehavior.REQUESTS);
        String graphpath="/me/friends?fields=name,birthday";

        Request.executeGraphPathRequestAsync(session, graphpath, new Request.Callback(){

            @Override
            public void onCompleted(Response response) {
                try {
                        userInfoTextView.setText(buildUserInfoDisplay(response));
                } catch (JSONException e) {

                    Log.d(TAG,"JSON exception");
                    e.printStackTrace();
                }

            }

        });
    }

 else if (state.isClosed()) {
        Log.i(TAG, "Logged out...");
        userInfoTextView.setVisibility(View.INVISIBLE);
    }
}

 private String buildUserInfoDisplay(Response response) throws JSONException  {

        if(response.getError()!=null)
        Log.d(TAG, "null reponse returned...");
    GraphObject go  = response.getGraphObject();
    JSONObject  jso = go.getInnerJSONObject();
        JSONArray   arr = jso.getJSONArray( "data" );
        JSONObject json_obj = arr.getJSONObject(2);   /*getting the third friend from the list*/
        String birthday   = json_obj.getString( "birthday"); 
        return birthday;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:44:14.227

并非所有朋友都有生日条目。因此，在直接阅读之前，您需要检查是否有“生日”标签可用。您可以在 Graph Explorer 中测试结果

[https://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends%3Ffields%3Dname%2Cid%2Cbirthday](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends%3Ffields%3Dname%2Cid%2Cbirthday)

# notepad++ - 如何在最后一个斜杠后全部删除？

> ID：14758641
> 
> 赞同：8
> 
> 时间：2013-02-07T18:46:59.693
> 
> 标签：notepad++

如何删除最后一个 / 之后的所有内容。我有一个带有网址的文件。

```
http://www.enworld.org/forum/member.php?1-Morrus&language=uk
http://weld.in.ua/forum/member.php/1-%D0%90%D0%B4%D0%BC%D0%B8%D0%BD?langid=5 
```

需要notepad++的解决方案

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-07T18:58:12.903

跟着这些步骤：

*   中打开您的文件`Notepad++`。
*   点击`Ctrl`+ `F`。
*   在`Find what`文本框中，添加正则表达式：`[^/]+$`
*   保持`Replace with`文本框为空（在屏幕截图中是我的鼠标光标）。
*   **请务必检查`Regular Expression`底部的单选按钮**
*   您的 Notepad++ 对话框应如下所示：

![在此处输入图像描述](../Images/7aee21b67369f7513807697d1d898088.png)

*   单击`Replace All`按钮。
*   你完成了..!! 您的最终输出将如下所示：

    [http://www.enworld.org/forum/](http://www.enworld.org/forum/)

    [http://weld.in.ua/forum/member.php/](http://weld.in.ua/forum/member.php/)

**笔记 ：**

正则表达式`[^/]+$`匹配至少一个（任何不是斜杠），后跟字符串的结尾：

# sql - SQL Server Report Builder 组合多个表

> ID：14758643
> 
> 赞同：1
> 
> 时间：2013-02-07T18:47:02.283
> 
> 标签：sql, sql-server, reporting-services, reportbuilder3.0

我有两个数据集，它们通过 ID 号相关联。我正在尝试生成一个报告，其中表一中的一行将用于表二中所有相关数据的节标题。这有点令人困惑，所以这里有一些图片。

**数据集 1**

```
ID   Company  Total Sales
1    ACME      23000
2    AJAX      43222
3    STACK     56700 
```

**数据集 2**

```
ID  ITEM   DESC   QTY
1    A     ADESC   3 
1    B     BDESC   3
1    C     CDESC   4
2    D     DDESC   2
2    E     EDESC   4
3    F     FDESC   5 
```

这就是我试图让报告看起来的样子。

```
1  ACME   23000
   A   ADESC   3
   B   BDESC   3
   C   CDESC   4
2  AJAX    43222
   D   DDESC   2
   E   EDESC   4
3  STACK   56700
   F   FDESC   5 
```

有谁知道如何在报表生成器中做这样的事情。我对报告生成器很陌生，不知道在这里寻找什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:20:31.423

我更喜欢选项 1，但我有 2 个选项可以让你越过这条线。

**选项 1 - 如果数据集来自同一数据库：**

如果您创建一个 SQL 并在所有详细信息行中包含标题会更好。您希望您的 SQL 生成以下内容：

```
ID  COMPANY  TOTAL SALES  ITEM  DESC   QTY
1    ACME     23000        A     ADESC  3 
1    ACME     23000        B     BDESC  3 
1    ACME     23000        C     CDESC  4 
2    AJAX     43222        D     DDESC  2
2    AJAX     43222        E     EDESC  4 
3    STACK    56700        F     FDESC  5 
```

**编辑 -** 示例 SQL（未优化）：

```
SELECT *
FROM   ( /*your data set 1 sql*/ ) DS1,
       ( /*your data set 2 sql*/ ) DS2
WHERE  DS1.ID = DS2.ID 
```

完成此操作后，您应该遵循 tablix 向导并按`Id`. 为了充分利用向导，我只会将`Id`数据集放入 tablix 并将数据集 2 列作为详细信息放入向导中并完成向导。

然后将列插入组并添加数据集 1 列。

**选项 2- 如果数据集位于单独的数据库中或无法修改：**

根据最后一个选项使用数据集 2，确保包含 group by `Id`。

然后插入其他 2 列并使用[`LookUp`](http://msdn.microsoft.com/en-us/library/ee210531.aspx)or[`LookUpSet`](http://msdn.microsoft.com/en-us/library/ee240819.aspx)函数从数据集 2 中提取数据。

# actionscript-3 - 使用 AIR 关闭正在运行的程序

> ID：14758645
> 
> 赞同：0
> 
> 时间：2013-02-07T18:47:10.443
> 
> 标签：actionscript-3, flash, apache-flex, air

我无法提供有关您是否可以的任何具体文档，但我猜这是有原因的。我正在寻找通过 AIR 关闭应用程序。（例如，在应用程序中按下按钮关闭 Photoshop）。

截至目前 AIR 看不到当前的系统进程？我认为！？所以我猜我不能，但如果有人找到了追索权或有任何非常有帮助的信息。不管怎样。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:02:30.847

您不能直接从 AIR 执行此操作，但可以使用[ANE](http://www.adobe.com/devnet/air/native-extensions-for-air.html)完成。但是，您可能必须自己编写 ANE - 我怀疑是否有人已经创建了您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:57:58.390

将取决于操作系统，但在 OSX/Linux 下，您可以使用**ps**之类的东西来搜索正在运行的进程并通过 NativeProcess 调用执行脚本来杀死您需要的进程？虽然我确信你可以做一些 Powershell 的东西，但我不太确定 Windows 等价物。像这样的东西与杀死脚本相结合？

```
ps aux | grep Adobe\ Photoshop 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html)

# javascript - 带有Phonegap的TabBar不适用于每个页面

> ID：14758647
> 
> 赞同：1
> 
> 时间：2013-02-07T18:47:11.660
> 
> 标签：javascript, ios, cordova

我正在使用带有 NativeControls/TabBar 插件的 PhoneGap，它适用于第一页。但是，当我按下导航到不同的页面时，插件停止生效。

在`index.html`页面上：

```
 <script>
        document.addEventListener("deviceready", function() {
            nativeControls = window.plugins.nativeControls;
            nativeControls.createTabBar();              
            console.log("TabBar initiated");
            nativeControls.createTabBarItem(
              "about",
              "About",
              "/www/img/20-gear2.png",
              {"onSelect": function() {
                window.location.href="about.html";
              }}
            );
            nativeControls.createTabBarItem(
              "guide",
              "Guide",
              "/www/img/76-baby.png",
              {"onSelect": function() {
                window.location.href="grid.html";
              }}
            );
            nativeControls.createTabBarItem(
              "ideas",
              "Ideas",
              "/www/img/27-planet.png",
              {"onSelect": function() {
                window.location.href="ideas.html";
              }}
            );
            nativeControls.showTabBar();
            nativeControls.showTabBarItems("about", "guide", "ideas");
        }, false)
    </script> 
```

按下任何按钮会将其带到相应的 HTML 页面，并选择正确的选项卡。但是，在此页面上，所有选项卡都不会继续工作 - 按下选项卡按钮只会突出显示它，但不会将视图重新定位到页面。

我尝试将相同的脚本粘贴到其他页面的标题上，但那里也没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T02:23:20.263

我之前使用的一个解决方案是通过 AJAX 加载所有内容，而不是加载额外的 .html 页面。我在下面包含了一些片段：

在 index.html 中，我有一个 DIV 指定用于接收每个页面的 HTML

```
<div id="ajaxCont"> </div> 
```

同样在 index.html 中，我声明了以下函数：

```
function loadPage(url, onleave, onenter, title) {                               

   // If onleave function specified
   if (onleave) {
      onleave();
   }

   var xmlhttp = new XMLHttpRequest();

   // Callback function when XMLHttpRequest is ready
   xmlhttp.onreadystatechange=function(){
      if(xmlhttp.readyState == 4){
         if (xmlhttp.status == 200 || xmlhttp.status == 0) {
            document.getElementById('ajaxCont').innerHTML = xmlhttp.responseText;

            // If onenter function specified
            if (onenter) {
                onenter();
            }
         }else {
            document.getElementById('ajaxCont').innerHTML = "Error loading page " + url;
         }
      }
   };

   xmlhttp.open("GET", url , true);
   xmlhttp.send();
} 
```

然后，可以像这样创建每个标签栏项目：

```
tabBar.createItem("contact", "Contact", "/www/img/734-chat.png", {
    onSelect: function() {
       loadPage("contact.html", null, null, "Contact");
    }
}); 
```

# c# - 有没有什么解决方案可以用 C# 开发黑莓应用程序，比如 Mono for Android 或 Monotouch？

> ID：14758649
> 
> 赞同：6
> 
> 时间：2013-02-07T18:47:15.233
> 
> 标签：c#, android, mono, xamarin.ios, xamarin.android

我有一个使用 Xamarin 解决方案 Mono for Android 和 MonoTouch 移植到 Android 和 iOS 的应用程序。之所以这样做，是因为通过这种方式，我可以使用相同的加密库将所有这些平台与一个 C# Web 服务连接起来，该服务可以解密接收到的数据，而无需 HTTPS。

是否有任何使用 C# 可以移植到黑莓的解决方案？移植 Android 应用程序的黑莓 10 操作系统功能是否可以解决这个问题？

顺便说一句，我没有向我提供迁移到支持 HTTPS 的 Web 服务的解决方案。提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T19:04:23.497

答案是肯定的和否定的。

是的。通常，您可以将 Android 应用程序移植到 Blackberry 10。您可以使用[提供的工具](http://developer.blackberry.com/android/tools/)来检查兼容性。

但是，不幸的是，您还不能将 Mono for Android 应用程序移植到 BB 10。因为

> 利用捆绑到其 APK 文件中的本机代码的应用程序

BB 10目前[不支持](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_software_features.html)[Mono for Android](http://docs.xamarin.com/android/guides/advanced_topics/architecture)的工作方式，这是“否”的答案。

然而，好消息是有一个很酷的[开源作品](http://burningsoda.com/software/monoberry/)可以让您在 C# 中开发本机 BB 10 应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-18T18:45:55.697

也许还没有，但是 Blackberry 10 有单声道运行时，您可以查看[http://burningsoda.com/software/monoberry/](http://burningsoda.com/software/monoberry/)

希望将来黑莓 10 可以使用 xamarin forms。

# c# - 不使用 LoadFile 将文件读入 RichTextBox

> ID：14758650
> 
> 赞同：1
> 
> 时间：2013-02-07T18:47:15.983
> 
> 标签：c#

我想在不使用 LoadFile 的情况下将文件读入 RichTextBox（我可能想显示进度）。该文件仅包含 ASCII 字符。

我正在考虑分块读取文件。

我已经完成了以下操作（正在工作）：

```
const int READ_BUFFER_SIZE = 4 * 1024;

BinaryReader reader = new BinaryReader(File.Open("file.txt", FileMode.Open));

byte[] buf = new byte[READ_BUFFER_SIZE];
do {
    int ret = reader.Read(buf, 0, READ_BUFFER_SIZE);
    if (ret <= 0) {
        break;
    }

    string text = Encoding.ASCII.GetString(buf);
    richTextBox.AppendText(text);
} while (true); 
```

我担心的是：

```
string text = Encoding.ASCII.GetString(buf); 
```

我已经看到不可能将 a 添加`byte[]`到 RichTextBox。

我的问题是：

*   是否会为每个读取的块分配一个新的字符串对象？

*   难道没有更好的方法不必为了将文本附加到 RichTextBox 而创建一个字符串对象吗？

*   或者，从文件 (StreamReader.ReadLine) 中读取行并将返回的字符串添加到 RichTextBox 是否更有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:20:31.917

> 是否会为每个读取的块分配一个新的字符串对象？

是的。

> 难道没有更好的方法不必为了将文本附加到 RichTextBox 而创建字符串对象吗？

不，AppendText 需要一个字符串

> 或者，从文件 (StreamReader.ReadLine) 中读取行并将返回的字符串添加到 RichTextBox 是否更有效？

不，那效率要低得多*。*您现在将更频繁地创建一个新的字符串对象。从垃圾收集堆的角度来看这是可以的，你不会产生更多的垃圾。但这绝对是对 RichTextBox 的谋杀，它不断需要重新分配自己的缓冲区。其中包括移动之前阅读的所有文本。你所拥有的已经很好了，你应该只使用更大的 READ_BUFFER_SIZE。

不幸的是，这里有相互矛盾的目标。您不希望缓冲区大于 39,999 字节，否则字符串最终会出现在大对象堆中并阻塞它，直到发生第 2 代垃圾回收。但是如果你大大超过这个大小，RTB 会更快乐，如果文件太大以至于你需要一个进度条，那么 RTB 会更快乐。

如果你想让它真正高效，那么你需要替换 RichTextBox.LoadFile()。底层 Windows 消息是 EM_STREAMIN，它使用回调机制在文本中流式传输。您可以在技术上替换回调以执行 RichTextBox 中的默认回调，*并*更新进度条。顺便说一句，它确实允许摆脱字符串。pinvoke 非常不友好，请使用参考源作为指导。

先走简单的路线，增加缓冲区大小。仅当您的代码比使用 File.ReadAllText() 慢得多时才考虑使用 pinvoke 路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:50:09.627

尝试这个：

```
richTextBox.AppendText(File.ReadAllText("file.txt")); 
```

或者

```
richTextBox.AppendText(File.ReadAllText("file.txt", Encoding.ASCII)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T07:48:31.447

您可以使用 StreamReader。然后您可以读取文件的每一行并在读取时显示进度。

# javascript - ASP.NET MVC，使用 document.body.appendChild 缓存

> ID：14758657
> 
> 赞同：0
> 
> 时间：2013-02-07T18:47:40.477
> 
> 标签：javascript, asp.net-mvc, caching

对于 MVC ASP.NET 应用程序，我以`_Layout.cshtml`以下方式将 javascript 文件添加到文件中 -

> ```
>  function loadJS() {
> 
>             var el = document.createElement("script");
>             el.src = "/Scripts/script.js";
>             document.body.appendChild(el);
>         }
> 
>         if (window.addEventListener)
>             window.addEventListener("load", loadJS, false);
>         else if (window.attachEvent)
>             window.attachEvent("onload", loadJS);
>         else window.onload = loadJS; 
> ```

这样做的目的是仅在 DOM 加载后加载脚本。

两个问题——

1.  会`script.js`被使用的第一页缓存`_Layout.cshtml`吗？
2.  如果`script.js` *被*缓存，这是否意味着所有以下使用的页面`_Layout.cshtml`都不必`script.js`从服务器检索？使用的页面`_Layout.cshtml`将能够使用客户端缓存版本的`script.js`?

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:03:34.093

是的，当文件被请求时，文件将被浏览器缓存。然后下次请求文件时，浏览器将首先检查其缓存并使用该缓存，而不是向服务器发出请求。

# c# - unity 构造函数参数

> ID：14758658
> 
> 赞同：7
> 
> 时间：2013-02-07T18:47:43.130
> 
> 标签：c#, unity-container

```
class Entity:IEntityName
{
    #region IEntityName Members

    public string FirstName { get; set; }
    public string LastName { get; set; }
    #endregion
}

public class Person:IPerson
{
    public IEntityName EntityName;

    public Person()
    {
    }

    public Person(IEntityName EntityName)
    {
        this.EntityName = EntityName;
    }

    public string ReverseName()
    {
        return string.Format("Your reverse name is {0} {1}",EntityName.LastName, EntityName.FirstName);
    }

    public override string ToString()
    {
        return string.Format("Name is {0} {1}", EntityName.FirstName, EntityName.LastName);
    }
}

// Main Method

private static string DisplayReverseName(string fName,string lName)
{
        IUnityContainer container = new UnityContainer();
        container.RegisterType<IPerson, Person>().RegisterType<IEntityName,Entity>();

        IEntityName entityName = container.Resolve<IEntityName>();

        entityName.FirstName = fName;
        entityName.LastName = lName;
        var p = container.Resolve<IPerson>(); 
        return p.ReverseName(); //  firstName and lastName are still null
    } 
```

如何将 firstName 和 lastName 注入 Person 构造函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T18:54:33.740

您可以使用 ParameterOverride 像：

```
var p = container.Resolve<IPerson>(new ParameterOverride("EntityName", entityName)); 
```

这告诉 unity`entityName`使用名为“EntityName”的参数将实例提供给构造函数。

您可以在此处找到一些其他信息：http: [//msdn.microsoft.com/en-us/library/ff660920 (v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff660920(v=pandp.20).aspx)

# jquery - jQuery Isotope / Masonry - 在重新布局时安排有点混乱？

> ID：14758659
> 
> 赞同：2
> 
> 时间：2013-02-07T18:47:46.027
> 
> 标签：jquery, jquery-masonry, jquery-isotope

好的，我不知道为什么会这样......当页面最初加载时：

[http://tinyurl.com/af86wv5](http://tinyurl.com/af86wv5)

单击一个项目，Galleria 就会启动，打开最大化的图像库，并且所有其他缩略图项目都围绕最大化的 Galleria div 完美地重新排列，效果很好。

但是，如果我单击导航菜单（顶部）中的一项来重新布局和过滤缩略图，然后单击其中任何一项以打开最大化的 Galleria 图像库，则缩略图项不会围绕最大化图像不再正确 - 有间隙，空白区域，不一致......为什么？

我想不通。我在做什么错/错过了什么？

另外，如何将页面滚动到下一个最大化的画廊 div/图像？如果用户单击页面底部的缩略图，则最大化的图像将在浏览器底部下方打开 - 我如何动画向下滚动到该特定图像，以便它显示在用户浏览器的顶部，而不是清晰的焦点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:50:17.247

我可以从您的 JS 中看到`$container.isotope({layoutMode:'fitRows'})`单击导航项时正在设置的内容。由于问题仅在选择过滤选项后才开始，这可能会影响网格布局。如果这有助于解决问题...

```
$container.isotope({
    filter: selector,
    layoutMode : 'fitRows',
    animationOptions: {
        duration: 750,
        easing: 'linear',
        queue: false,
    },
}); 
```

只是被这个取代了吗？（或者可能改用'masonry' layoutMode）......

```
$container.isotope({
    filter: selector
}); 
```

在您过去的第二点（滚动到打开的项目）上，我刚刚在打开项目时使用`scrollTo()`了一个`setTimeout()`函数。它很粗糙，但使浏览器能够在 Isotope 重新排列自身后找到正确的元素位置，任何“打开”或“关闭”逻辑也可以进入那里，以便在需要时执行不同的位。

如果您需要在代码中遵循更合乎逻辑的内容，那么您还可以尝试绑定`scrollTo()`到“transitionend”事件，以确保在为滚动设置动画之前完成同位素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:30:47.747

我觉得奇怪，你用`position: absolute; top: 0; left: 0;`然后用`translate3d`。也许你应该尝试`display: inline-block`不设置`position`.

# c# - 使用 LINQ 进行动态分组

> ID：14758666
> 
> 赞同：2
> 
> 时间：2013-02-07T18:48:24.497
> 
> 标签：c#, linq, dynamic, linq-group

请看下面的例子。组子句必须是动态的。您能否指导我如何实现这一目标。即行

```
{ r.Portfolio, r.DataType } 
```

必须动态构建。

不知道如何调整博客[http://jonahacquah.blogspot.com/2012/02/groupby-multiple-columns-using-dynamic.html中给出的解决方案](http://jonahacquah.blogspot.com/2012/02/groupby-multiple-columns-using-dynamic.html)

```
public class DecisionSupportData
{
    public string Portfolio { get; set; }
    public string BucketName { get; set; }
    public string DataType { get; set; }
    public string ChildPortfolio { get; set; }
}

public void PopulateData()
{
    List<DecisionSupportData> lstAllDecSupp = decisionSupportDataBindingSource.DataSource as List<DecisionSupportData>;
    List<DecisionSupportData> lstRmgAmt
        = (from r in lstAllDecSupp.AsEnumerable()
           where r.DataType == "P"
           group r by new { r.Portfolio, r.DataType } into gg
           select new DecisionSupportData
           {
               DataType = gg.Key.DataType,
               Portfolio = gg.Key.Portfolio,
           }).ToList();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:44:46.613

[如Scott Gu 的原始博客](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)所述，DynamicLinq 库似乎可以解决您的问题。只需使用带有字符串值的 GroupBy 扩展方法。

或者你可以深入他们的 ExpressionParser 类，看看它在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:44:57.880

以下内容应该适用于您的示例，但如果您的实际示例更复杂，则可能无法很好地工作/扩大规模。

```
// bools to indicate which columns you want to group by 
bool groupByPortfolio      = true;
bool groupByDataType       = true;
bool groupByBucketName     = false;
bool groupByChildPortfolio = false;

List<DecisionSupportData> lstRmgAmt
    = (from r in lstAllDecSupp.AsEnumerable()
       where r.DataType == "P"
       group r by new 
       { 
            Portfolio       = groupByPortfolio      ? r.Portfolio       : null ,
            DataType        = groupByDataType       ? r.DataType        : null , 
            BucketName      = groupByBucketName     ? r.BucketName      : null ,
            ChildPortfolio  = groupByChildPortfolio ? r.ChildPortfolio  : null 
        }
       into gg 

       select new DecisionSupportData
       {
            Portfolio       = gg.Key.Portfolio,
            DataType        = gg.Key.DataType,
            BucketName      = gg.Key.BucketName,
            ChildPortfolio  = gg.Key.ChildPortfolio  

        }
 ).ToList(); 
```

# javascript - 如何组合两个类似的 javascript 函数？

> ID：14758667
> 
> 赞同：1
> 
> 时间：2013-02-07T18:48:26.950
> 
> 标签：javascript, performance

有没有办法将以下两条指令组合成更高效的代码？

```
 $('.sandwiches').mouseleave(function () {
    $('.sandwiches').hide();
});
$('.food').mouseleave(function () {
    $('.sandwiches').hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:50:05.440

通过组合选择器：

```
$('.sandwiches,.food').mouseleave... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:50:09.813

[合并选择器](http://api.jquery.com/multiple-selector/)：

```
$('.sandwiches, .food').mouseleave(function () {
    $('.sandwiches').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:01:23.713

您可以将定义的函数附加到每个元素：

```
function hideElement(e) {
    $(this).hide();
}

$('.sandwiches,.food').mouseleave(hideElement); 
```

# codeigniter - 库中的 Codeigniter 加载模型

> ID：14758669
> 
> 赞同：14
> 
> 时间：2013-02-07T18:48:29.383
> 
> 标签：codeigniter

我正在使用 codeigniter 2.1.3

我正在尝试从库中加载模型。最初我在库中的构造中的代码如下所示

```
$this->CI=& get_instance(); $this->CI->load->database('default') 
```

然后在我的一个库方法中

当我尝试下面的行时它不起作用

```
$this->load->model('model_name') 
```

但是当我尝试这个时

```
$this->CI->load->model('model_name','',TRUE) 
```

它有效，任何人都可以在加载模型时解释 CI 的实例指的是什么以及 2 个额外的参数？提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-07T19:01:52.953

库不一定是 CodeIgniter 工作方式的一部分。

它可以是一个自制的库，用于解决您希望在 CI 应用程序中完成的任务。

这意味着如果您想使用 CI 的任何帮助程序、模型或其他库，您需要通过 CI 实例来执行此操作。这是通过这样做来实现的：

```
public function __construct()
{
    $this->CI =& get_instance();
} 
```

通过将实例分配给名为 CI 的库成员，所有与 CI 相关的帮助程序、模型和库都可以通过`$this->CI`. 通过尝试仅与`$this`您一起执行此操作，仅指的是当前库 - 而不是 CI 实例。

在您的库中正确加载您的模型`$this->CI->load->model('model_name');`就足够了。第二个参数允许您通过不同的对象名称访问您的模型。第三个参数不是加载模型所必需的，但允许您自动加载数据库驱动程序。

如果你想通过同一个成员访问你的模型：

```
$respone = $this->CI->model_name->method(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-27T16:40:12.623

我有非常简单的代码，您应该使用它来在库中加载模型

```
<?php
class Custom_lib
{
    private $_CI;
    public function __construct()
    {
        $this->_CI = & get_instance();
        $this->_CI->load->model('Dynamic_Model','dm');
    }

    function currentSession()
    {
        $session = $this->_CI->dm->fetchSingleData('id,session','session',array('is_active'=>1));
        return $session;
    }
} 
```

我希望这段代码对你有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T18:56:39.440

您可以通过第三个参数传递 TRUE（布尔值）来告诉模型加载函数自动连接，并且将使用数据库配置文件中定义的连接设置：

```
$this->load->model('Model_name', '', TRUE); 
```

您可以在以下链接的页面末尾了解更多信息。

> [http://ellislab.com/codeigniter/user-guide/general/models.html](http://ellislab.com/codeigniter/user-guide/general/models.html)

# android - 将 apk 上传到 Google Play

> ID：14758671
> 
> 赞同：1
> 
> 时间：2013-02-07T18:48:39.207
> 
> 标签：android, certificate, apk, signing

我收到此错误，有人可以帮我解决这个问题吗？我花了几个小时来创建击键和所有东西......但我仍然明白......如果有的话，谢谢。

“您上传了一个使用尚未生效的证书签名的 APK。您需要使用当前有效的证书对您的 APK 进行签名。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:55:43.027

您可以将系统时钟设置为前一天，然后尝试对其进行签名。请。请参阅我发布的链接

[使用尚未生效的证书签名的 APK](https://stackoverflow.com/questions/13191854/apk-signed-with-a-certificate-that-is-not-yet-valid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:51:14.203

您需要使用唯一签名对您的应用程序进行签名。查看开发网站：http: [//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:54:16.943

类似问题： [APK 签名的证书尚未生效](https://stackoverflow.com/questions/13191854/apk-signed-with-a-certificate-that-is-not-yet-valid)

该人员通过更正系统时钟并重新生成密钥库解决了该问题。

# javascript - 在 javascript 三元运算符中正确使用逗号

> ID：14758672
> 
> 赞同：2
> 
> 时间：2013-02-07T18:48:42.990
> 
> 标签：javascript, ternary-operator, comma-operator

我没有使用 if else 语句，而是尝试使用三元运算符，但在我的语句中某处出现语法错误。

有人可以告诉我哪里出错了吗？

声明是：

```
my_alert(status ? ('Accepted', 'alert-success') : ('Declined', 'alert-info')) 
```

*   my_alert 是一个有 2 个参数的函数。
*   状态只是评估为真或假。
*   当我将超过 1 个参数传递给上述表达式时，它不喜欢使用逗号。

在 chrome 和 firefox 中，函数运行时会显示“alert-success”或“alert-info”。它错过了第一个参数。

我已经在 stackoverflow 上查看了答案，但无论如何它告诉我我正在做的事情是正确的。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T18:53:15.830

好吧，[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)执行以下操作：

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。

这意味着，`('Accepted', 'alert-success')`评估为`'alert-success'`（正如您已经注意到的）。这里的逗号不同于分隔函数参数的逗号。您不能使用它将两个参数传递给函数。

您可以做的是将两个参数存储在一个数组中并用于[`.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)将它们传递给函数：

```
// this is not the comma operator either, this is array literal syntax.
var args = status ? ['Accepted', 'alert-success'] : ['Declined', 'alert-info'];
my_alert.apply(null, args); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T18:51:43.713

我不认为三元运算符可以用来控制这样的两个值：

如何将它们分开：

```
my_alert(($status?"Accepted":"Declined"),($status?"alert-success":"alert-info")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T18:55:36.133

或者，您可以将函数调用包装在三元语句中......

```
status ? my_alert("Accepted", "alert-success") : my_alert("Declined", "alert-info"); 
```

更新：

Robin van Baalen 提出了一个很好的建议……

```
my_alert.apply(this, status ? ["Accepted", "alert-success"] : ["Declined", "alert-info"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:53:12.613

你不能这样使用逗号。如果要传递2个参数，则需要使用2个三元语句。

```
my_alert((status ? 'Accepted' : 'Declined'), (status ? 'alert-success' : 'alert-info')); 
```

在您的情况下，逗号被读取为[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)，它计算两个操作数并返回最后一个。因此，您的三元语句相当于：

```
my_alert(status ? 'alert-success' : 'alert-info') 
```

# java - 为什么这个 Java Mail 调用在 JDK 1.5 中失败，但在 1.6 中成功？

> ID：14758677
> 
> 赞同：1
> 
> 时间：2013-02-07T18:48:56.440
> 
> 标签：java, jakarta-mail, jdk1.6, jdk1.5

当我使用 JDK 1.5 运行以下代码时，最后一行失败，但是当我使用 JDK 1.6 运行它时，它成功了。为什么是这样？

代码：

```
Session session;
session = Session.getDefaultInstance(properties,
new javax.mail.Authenticator() {
    protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
    }
});

// Create a default MimeMessage object.
MimeMessage message = new MimeMessage(session); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:00:56.193

通过就缺少激活 JAR 的评论提问得出结论。

# c# - 多行插入的 IDBCommand 参数

> ID：14758680
> 
> 赞同：2
> 
> 时间：2013-02-07T18:49:12.263
> 
> 标签：c#, postgresql, npgsql, idbconnection

我想沿着这些行创建一个多行插入语句：

```
insert into foo (
    value1,
    value2,
    value3
) values 
( "1", "2", "3"),
( "4", "5", "6"),
( "7", "8", "9"); 
```

其中要插入的行数是可变的。有没有办法使用`IDBCommand`参数化构造这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:19:17.357

像这样的东西应该可以正常工作。

```
IDbCommand cmd = new SqlCommand();
StringBuilder sb = new StringBuilder();
sb.Append("insert into foo(col, col2, col3), values");
int parms = 0;

for(int i = 0 ; i<3; i++)
{
    sb.AppendFormat("( @{0}, @{1}, @{2}),", parms, parms + 1, parms + 2);
    cmd.Parameters.Add(new SqlParameter((parms++).ToString(), ""));
    cmd.Parameters.Add(new SqlParameter((parms++).ToString(), ""));
    cmd.Parameters.Add(new SqlParameter((parms++).ToString(), ""));
}
sb.Append(";");
cmd.Parameters;
cmd.CommandText = sb.ToString().Replace(",;", ";"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:06:00.673

据我所知，没有办法`IDbCommand`一次向 a 提供可变数量的参数。您可以创建`IDbCommand`一次并为每组参数值重复使用它：

```
using (IDbCommand command = myConn.CreateCommand())
{
    command.CommandText = "insert into foo (value1, value2, value3) values (@v1, @v2, @v3)";
    IDbDataParameter param1 = command.CreateParameter() { ParameterName = "@v1" };
    // param2, param3
    foreach (string[] row in records)
    {
        param1.Value = row[0];
        // param2, param3
        command.ExecuteNonQuery();
    }
} 
```

特别是在事务中，如果您关心性能，这应该很快。有关事务中一个大的连接插入与多个 s 的性能的讨论，请参阅[此线程。](http://www.postgresql.org/message-id/23702.1127596541@sss.pgh.pa.us)`ExecuteNonQuery`

# php - 使用 PHP 在 Amazon S3 存储上的私有和安全文件

> ID：14758682
> 
> 赞同：0
> 
> 时间：2013-02-07T18:49:22.490
> 
> 标签：php, amazon-web-services, amazon-s3

我只是想问一下是否有人可以给我一个提示，让我在 S3 上获取只有登录用户才能访问的私有和安全文件，或者当业务逻辑希望它们可以访问时。这是场景...

> 一个用于输入账单详细信息的 PHP Web 应用程序，它会即时生成 PDF 发票并将其上传到 S3 存储桶。（它实际上并不总是生成和上传 - 仅当用户想要打印或下载它时 - 代码生成一个 pdf - 将其上传到 S3 并相应地取回 url 或文件）

现在，任何拥有 S3 存储桶上文件的 URL 的人都可以访问该文件。我想以这样一种方式限制文件访问，即使没有登录的人只能在回答一个秘密问题等之后才能获得文件。

生成一个在短时间内有效的签名 url 是这里唯一的答案，还是我也在寻找其他可能性？另外，我们可以直接从 S3 生成签名的 url，还是需要通过 cloudfront 生成？

请建议我进一步研究的方向......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T05:23:37.953

这篇文章 https://css-tricks.com/snippets/php/generate-expiring-amazon-s3-link/ 可以帮助你。不要忘记查看评论。

***** 编辑**

## 生成即将过期的 Amazon S3 链接

您不必公开 Amazon S3 上的文件（默认情况下它们不是公开的）。但是您可以生成特殊密钥以允许访问私有文件。这些密钥通过 URL 传递，并且可以过期。

```
<?php

    如果（！function_exists（'el_crypto_hmacSHA1'））{
        函数 el_crypto_hmacSHA1($key, $data, $blocksize = 64) {
                if (strlen($key) > $blocksize) $key = pack('H*', sha1($key));
                $key = str_pad($key, $blocksize, chr(0x00));
                $ipad = str_repeat(chr(0x36), $blocksize);
                $opad = str_repeat(chr(0x5c), $blocksize);
                $hmac = pack('H*', sha1(
                ($key ^ $opad) 。包（'H *'，sha1（
                    ($key ^ $ipad) 。$数据
                ))
            ));
                返回 base64_encode($hmac);
        }
    }

    if(!function_exists('el_s3_getTemporaryLink')){

        函数 el_s3_getTemporaryLink($accessKey, $secretKey, $bucket, $path, $expires = 5) {
            //计算过期时间
            $expires = time() + intval(floatval($expires) * 60);
            // 修复路径；编码和消毒
            $path = str_replace('%2F', '/', rawurlencode($path = ltrim($path, '/')));
            // 签名路径以bucket开头
            $signpath = '/'。$bucket .'/'。$路径;
            // 要签名的 S3 友好字符串
            $signsz = implode("\n", $pieces = array('GET', null, null, $expires, $signpath));
            // 计算哈希
            $signature = el_crypto_hmacSHA1($secretKey, $signsz);
            // 粘贴 URL ...
            $url = sprintf('http://%s.s3.amazonaws.com/%s', $bucket, $path);
            // ... 到查询字符串 ...
            $qs = http_build_query($pieces = array(
                'AWSAccessKeyId' => $accessKey,
                '过期' => $过期，
                '签名' => $签名，
            ));
            // ... 并返回 URL！
            返回 $url.'?'.$qs;
        }
    }
```

# 用法

```
<?php

    echo el_s3_getTemporaryLink('your-access-key', 'your-secret-key', 'bucket-name', '/path/to/file.mov');
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:08:20.883

This might help? [Amazon CloudFront Private Content](http://aws.amazon.com/about-aws/whats-new/2012/09/27/amazon-cloudfront-announces-private-content-support-in-AWS-Console/)

I would assume you will need to setup a [VPC](http://docs.aws.amazon.com/AmazonVPC/latest/GettingStartedGuide/ExerciseOverview.html) to ensure your user's credentials are verified and valid to keep the content "private".

# php - PHP开关和类属性问题

> ID：14758683
> 
> 赞同：1
> 
> 时间：2013-02-07T18:49:26.350
> 
> 标签：php

我正在尝试设置属性并将其用于另一个功能。

我有

```
while($texts->employees()){
      $employee = $employees->get();

      switch($employee->getInfoType()){

        case 'email':
            $this->buildemail($employee);
          break;
        case 'Name':
            $this->buildName($employee);
          break;
        case 'Numbers':
            $this->buildNumbers($employee);
          break;
     }

function buildEmail($employee){
    $this->email=$employee->getEmail();  //get the email.
}

function buildName($employee){
    $this->Name=$this->getName(); //get the name
    $this->employeeInfo=$this->email.$this->name;   //combine the email and numbers.

    //$this->email is '' becasue it's only defined in buildEmail(). 
}

function buildNumbers($employee){
     $this->numbers=$this->getNumbers();
} 
```

我似乎无法进入`$this->email`buildName 方法，因为`this->email`在方法中定义`buildemail`。我需要使用 switch，因为每种方法都有很多代码。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:51:48.257

你为什么不调用`$employee->getEmail()`你的`buildName`方法而不是依赖它`$email`呢？

还：

```
 case 'Name':
        $this->buildName($employee);
    case 'Numbers':
        $this->buildNumbers($employee);
      break; 
```

`buildName`如果返回“名称” ，`buildNumbers`它们都会运行。`$employee->getInfoType()`你在`break;`两者之间缺少一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:06:33.223

你不能这样做：

```
function buildName($employee){
    $this->Name=$this->getName(); //get the name

    if(null == $this->email)
        $this->buildEmail($employee);

    $this->employeeInfo= $this->email.$this->name;   //combine the email and numbers.

    //$this->email is '' becasue it's only defined in buildEmail(). 
} 
```

我假设每个员工都必须有一封电子邮件，对吗？

# trigger.io - trigger.io 中的lungojs

> ID：14758684
> 
> 赞同：0
> 
> 时间：2013-02-07T18:49:32.460
> 
> 标签：trigger.io, lungojs

您好我正在寻找使用 Trigger.io 来创建移动应用程序，但使用 Lungojs 作为 GUI 部分。我找不到使用这两个没有任何问题的参考。想听听一些有经验的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:36:58.620

我对Lungo也很感兴趣，所以认为最好的方法是尝试一下。

我从[https://github.com/TapQuo/Lungo.js/tree/master/example获取了 Lungo JS 示例应用程序](https://github.com/TapQuo/Lungo.js/tree/master/example)

将其放入`/src`默认 Trigger.io 项目的文件夹中，并为 Android 构建它，没有任何问题。在 Android 4.1 设备上进行了测试，效果很好。:)

内置厨房水槽应用程序可在此处获得：[https ://dl.dropbox.com/u/579708/android/lungojs/lungojskitchensink21.apk](https://dl.dropbox.com/u/579708/android/lungojs/lungojskitchensink21.apk)

# php - 使用 html 表单和 php 发送 html 电子邮件？

> ID：14758694
> 
> 赞同：2
> 
> 时间：2013-02-07T18:49:55.810
> 
> 标签：php, html, email

嗨，我正在尝试创建自己的简单邮件列表，这样我就可以通过在表单中​​输入电子邮件并点击发送来将 html 电子邮件发送到多个电子邮件地址。

我只想发送一封电子邮件，我不想将信息存储在数据库中，但我无法让它工作。请有人告诉我我哪里出错了。

所以这是我的表格：

```
Send Email:
<form class="" method="post" action="SEND_EMAIL.php">

                <div class="row email">
                    <input type="email" id="email" name="email" placeholder="Email"  />
                </div>

                <input type="submit" value="Next >"  />

            </form> 
```

然后继承人我的发送电子邮件代码，但我是否正确地认为 html 表单可以对 send_email.php 执行操作并发送电子邮件？

```
<p>Email Was Sent Mark!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<?php

/**
 * ShuttleCMS - A basic CMS coded in PHP.

 * 
 * @author Dan <dan@danbriant.com>
 * @version 0.0.1
 * @package ShuttleCMS
 */
define('IN_SCRIPT', true);
// Start a session
session_start();

//Generate a RANDOM MD5 Hash for a password
$random_code=md5(uniqid(rand()));

/
<?php

 $subjectconfirm = "email.com - Registration";
 $headersconfirm = "To: $email\r\n"; 
 $headersconfirm .= "From: email.com <registrations@email.com>\r\n";                                                                                                                                                                                                            
 $headersconfirm .= "Content-type: text/html\r\n"; 

  $sep = sha1(date('r', time()));
 $bodyconfirm =<<<EOF

BLAH BLAH BLHA
EOF;

 // Finally, send the email
 mail('registrations@email.com', $subjectconfirm, $bodyconfirm, $headersconfirm);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:16:25.140

您是否为发送电子邮件配置了系统或 php？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-15T07:58:19.047

试试这个代码，你的电子邮件表单中有不必要的东西。例如，您不需要`md5`电子邮件表单，因为您没有需要加密的密码，`session_start`也没有必要，因为不需要记住它，因此不需要存储 SQL。

```
<p>Email Was Sent Mark!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<?php

define('IN_SCRIPT', true);

<?php

 $subjectconfirm = "email.com - Registration";
 $to = "To: $email\r\n"; 
 $h .= "From: email.com <registrations@email.com>\r\n";                                                                                                                                                                                                            
 $headersconfirm .= "Content-type: text/html\r\n"; 

  $sep = sha1(date('r', time()));
 $bodyconfirm =<<<EOF

BLAH BLAH BLHA
EOF;

 // Finally, send the email
 mail('registrations@email.com', $to, $subjectconfirm, $bodyconfirm, $h, $headersconfirm);

?> 
```

# css - 宽度不扩大？

> ID：14758695
> 
> 赞同：1
> 
> 时间：2013-02-07T18:50:00.480
> 
> 标签：css, html, css-position, line-breaks

我正在做一个地图项目，由于某种原因，我的工具提示的文本宽度将继续扩大到我想要的宽度，直到我在我的文本中添加一个空格。如果我添加一个空格，它会中断到下一行；发生了什么事，我该如何解决？我想要一行文本而不指定宽度，以便它可以自动设置宽度，我该如何解决这个问题？

在下面的示例中，查看段落标记中的文本“棒球场”。如果它读取“BaseballFields”，它将保持在一行。但是一旦我添加空间，它就会换行。

```
<div style="width: 750px; height: 1221px; border: 0; padding: 0; margin-top: 10px; display: block; position:relative; background: url('http://www.thefirstacademy.org/filerequest/9701.jpg') no-repeat left top;">
    <style type="text/css">
        .triangle {
            position:absolute;
            bottom:-5px;
            left:40%;
            height:0;
            width:0;
            border-left:5px solid transparent;
            border-right:5px solid transparent;
            border-top:5px solid white;
        }
        .tooltip {
            color:#ef4c4c;
            background:#ffffff;
            padding:17 10;
            display:block;
            position:absolute;
            border-radius:5px;
            font:.8em 'MuseoSans-500','Museo Sans';
            top:-40px;
            box-shadow:0px 3px 3px #000;
            border:1px solid #000;
        }
    </style>

    <div class="marker" style="position:absolute;cursor:pointer;left:450px;top:75px;" id="baseball">
        <img src="http://www.thefirstacademy.org/filerequest/9702.png" alt="Location Marker" />
        <div class="tooltip" >
            <div class="triangle"></div>
            <p style="padding:0;margin:0;line-height:0;display:block;">Baseball Fields</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T04:46:33.053

提个醒：除了浏览器兼容性目的之外`white-space: nowrap;`，包含它可能会有所帮助`display: inline-block;`

# shopify - Shopify 如果在集合中，则显示此

> ID：14758698
> 
> 赞同：3
> 
> 时间：2013-02-07T18:50:06.773
> 
> 标签：shopify

我正在尝试编写一个简单的 if 语句，但总是与 shopify 的系统斗争。

本质上我希望它这样做：

**{% if collection.product == 'discontinued' %} 本产品已停产。{％ 万一 ％}**

如果它在此集合中，则显示此文本/html。否则它不会显示任何东西。这将在 product.liquid 模板中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T15:46:07.013

这就是最终的工作：

```
{% for c in product.collections %}
{% if c.handle == "discontinued" %}
This product is Discontinued 
{% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T11:38:29.823

我想这对任何人都有帮助，我在 shopify 网站的侧边栏中使用过。当前的收藏页面将通过以下代码进行检查。

```
<div class="row-fluid not-animated" data-animate="fadeInUp">
<div class="title">By Collections</div>
<form class="coll">
{% assign col_tags = collection.title %}

{% for collection in collections %}

<input type="radio" value="{{ collection.url }}" name="collections"  {% if col_tags contains collection.title %} checked {% endif %} >{{ collection.title | escape }} <br/>

 {% endfor %}
 </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:31:19.980

如果我了解液体集合在 Shopify 中的工作原理，您将需要迭代所有产品。

如果您直接使用集合，则需要执行类似的操作：

```
{% for product in collection.product %}
  {% if product.tags contains 'discontinued' %}
    This product has been discontinued :(
  {% endif %}
{% endfor %} 
```

如果您只使用单一产品，您可能只使用内部`if`液体标签部分。

参考：

*   [收集.液体](http://wiki.shopify.com/Collection.liquid)
*   [产品.液体](http://wiki.shopify.com/Product.liquid)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T22:37:18.040

您确实可以将已停产的产品添加到称为已停产的集合中。

渲染产品时，您可以按照 csaunders 的建议进行操作，只需遍历已停产集合中的所有产品，并检查当前产品的 id 是否与该集合中的任何产品匹配。如果是这样，做你必须做的。无需使用标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-20T05:00:52.110

您可以使用 map on 为产品创建一个集合数组`product.collections`。这将使用您指定的属性创建一个新数组，即每个集合的句柄。

然后，您可以检查这个新数组是否`contains`是您要使用的句柄。

```
{% assign productCollections = product.collections | map: "handle" %}
{% if productCollections contains 'your-collection-handle' %} 
  {% comment %} DoSomething {% endcomment %} 
{% endif %} 
```

所以对于你的例子：

```
{% assign productCollections = product.collections | map: "handle" %}
{% if productCollections contains 'discontinued' %} 
  This product is Discontinued
{% endif %} 
```

如果您的案例不同，您可以映射其他字段，例如标题。

# ssis - 从 SSIS 包中提取映射列

> ID：14758701
> 
> 赞同：1
> 
> 时间：2013-02-07T18:50:13.337
> 
> 标签：ssis, mapping

我正在使用 .NET 从 SSIS 包中提取元数据。

有没有办法从 OLEDB 源（没有用于语句的变量）和它的目的地中提取映射信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:53:16.857

是的，尽管您必须深入了解[IDTSPipeline100](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.pipeline.wrapper.mainpipe%28v=sql.110%29.aspx)和相关接口的杂草才能这样做：

```
using System;
using Microsoft.SqlServer.Dts.Runtime;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;

namespace CSharpConsoleApp
{
    class PackageDemo
    {
        public void CountColumns(string packagePath, string dataFlowName)
        {
            Application app = new Application();
            Package package = app.LoadPackage(packagePath, null);

            TaskHost th = package.Executables[dataFlowName] as TaskHost;
            MainPipe mp = th.InnerObject as MainPipe;
            foreach (IDTSComponentMetaData100 md in mp.ComponentMetaDataCollection)
            {
                foreach (IDTSOutput100 output in md.OutputCollection)
                {
                    Console.WriteLine("Component {0} output {1} has {2} columns", 
                        md.Name, output.Name, output.OutputColumnCollection.Count);
                    foreach (IDTSOutputColumn100 column in output.OutputColumnCollection)
                    {
                        Console.WriteLine("\tcolumn {0} ({1}) is of type {2}", 
                            column.ID, column.Name, column.DataType);
                    }
                }
            }
        }
    }
} 
```

请注意，您需要引用`Microsoft.SqlServer.ManagedDTS`、`Microsoft.SqlServer.DtsPipelineWrap`和`Microsoft.SqlServer.DtsRuntimeWrap`DLL 才能编译此代码。

# python - python 2.7 string.join() 与 unicode

> ID：14758705
> 
> 赞同：13
> 
> 时间：2013-02-07T18:50:26.880
> 
> 标签：python, unicode

我有一堆包含 unicode 数据（在编码中）的字节字符串（在 python 2.7 中`str`，不是）。`unicode``utf-8`

我正在尝试加入他们（通过`"".join(utf8_strings)`或`u"".join(utf8_strings)`），这会抛出

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xec in position 0: ordinal not in range(128)` 
```

有没有办法使用`.join()`非 ascii 字符串的方法？当然我可以在 for 循环中连接它们，但这并不划算。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T18:54:00.227

使用连接字节字符串`''.join()`就可以了；您看到的错误*只会*在您混合`unicode`和`str`对象时出现：

```
>>> utf8 = [u'\u0123'.encode('utf8'), u'\u0234'.encode('utf8')]
>>> ''.join(utf8)
'\xc4\xa3\xc8\xb4'
>>> u''.join(utf8)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc4 in position 0: ordinal not in range(128)
>>> ''.join(utf8 + [u'unicode object'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc4 in position 0: ordinal not in range(128) 
```

`u''`当使用 Unicode 值作为连接符并分别将 Unicode 字符串添加到要连接的字符串列表时，会引发上述异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:54:30.537

`"".join(...)`如果每个参数都是 a `str`（无论编码是什么），它将起作用。

您看到的问题可能与联接无关，而是与您提供给它的数据有关。发布更多代码，以便我们了解真正的问题所在。

# ios - UIAlertView 中的 UITextField：清除按钮在 iOS 6.1 中未垂直居中

> ID：14758706
> 
> 赞同：2
> 
> 时间：2013-02-07T18:50:29.670
> 
> 标签：ios, ios5, ios6

我使用以下代码显示带有文本字段的 UIAlertView：

```
UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Rename", nil];
alertView.alertViewStyle = UIAlertViewStylePlainTextInput;

UITextField* textField = [alertView textFieldAtIndex:0];
textField.clearButtonMode = UITextFieldViewModeWhileEditing;

[alertView show]; 
```

结果在 iOS 5.1 上如下所示：

![在此处输入图像描述](../Images/6990f13bdf7ab37e4ac851fd7ab39357.png)

在 iOS 6.1 上：

![在此处输入图像描述](../Images/75faf11ad4387588f5464c22b7f31ab7.png)

如您所见，清除按钮比 iOS 6.1 上的按钮要高一些。知道如何正确居中按钮吗？添加 `textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;`也无济于事。

（显然，这是 iOS 6.1 中的一个错误，但也许有人知道解决方法。此外，警报视图中文本字段的高度在不同的操作系统版本中似乎也不同，但这是另一个问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:24:45.283

这看起来像是来自 Apple 的错误，但您始终可以在 textField 中添加自己的清除按钮，执行以下操作：

首先创建一个 UITextField 属性：

```
@property (nonatomic, strong) UITextField *textField; 
```

然后将其分配给alertView的textField

```
UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Rename", nil];
alertView.alertViewStyle = UIAlertViewStylePlainTextInput;

self.textField = [alertView textFieldAtIndex:0];
self.textField.delegate = self;

//Create a custom clear button
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 19, 19)];
[button setImage:[UIImage imageNamed:@"clearButton.png"] forState:UIControlStateNormal];
[button addTarget:self action:@selector(clearText) forControlEvents:UIControlEventAllTouchEvents];

[self.textField setRightView:button];
self.textField.rightViewMode = UITextFieldViewModeAlways; 
```

然后在 clearText 方法中，

```
- (void)clearText {
    [self.textField setText:@""];
} 
```

我试过了，它有效

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T08:44:41.110

另一种方法是重写`UITextField`clearButtonRectForBounds [:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instm/UITextField/clearButtonRectForBounds%3a)。

# c# - 如何在 FormsAuthentication cookie 中存储附加数据？

> ID：14758708
> 
> 赞同：9
> 
> 时间：2013-02-07T18:51:00.547
> 
> 标签：c#, asp.net-mvc-4, cookies, forms-authentication

我正在从 url 中检索租户名称。我宁愿只做一次，将它存储在 cookie 中，当我在新页面请求中需要它时从那里检索它。

我正在使用下面的代码来“创建”一个 cookie。我希望该界面可以让我存储其他信息，但事实并非如此。有没有办法做到这一点，还是我走错了路？

```
 public void SignIn(string userName, bool createPersistentCookie)
    {
        if (String.IsNullOrEmpty(userName))
            throw new ArgumentException("Value cannot be null or empty.", "userName");

        FormsAuthentication.SetAuthCookie(userName, createPersistentCookie);
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T19:10:26.083

codeplex 和 Nuget 上的 FormsAuthenticationExtensions 项目正是这样做的。 [https://archive.codeplex.com/?p=formsauthext](https://archive.codeplex.com/?p=formsauthext)

**用法 - 设置值**

```
using FormsAuthenticationExtensions;
using System.Collections.Specialized;

var ticketData = new NameValueCollection
{
    { "name", user.FullName },
    { "emailAddress", user.EmailAddress }
};
new FormsAuthentication().SetAuthCookie(user.UserId, true, ticketData); 
```

**用法 - 检索值**

```
using FormsAuthenticationExtensions;
using System.Web.Security;

var ticketData = ((FormsIdentity) HttpContext.Current.User.Identity).Ticket.GetStructuredUserData();
var name = ticketData["name"];
var emailAddress = ticketData["emailAddress"]; 
```

基本上，您可以在 FormsAuthentication cookie 中附加一个名称/值字典来存储一些常用值。我们利用这个商店存储一小部分用户信息，例如 companyId 等。

此外，这里没有发生“黑魔法”，它只是将[UserData](https://docs.microsoft.com/en-us/dotnet/api/system.web.security.formsauthenticationticket.userdata?view=netframework-4.8)属性的设置/检索封装在 FormsAuthentication Ticket 内

至于考虑，请务必阅读项目页面底部的注释，因为它描述了为什么只应将其用于少量长寿命数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T18:59:27.147

就个人而言，我不会尝试更改 Auth Cookie。相反，创建一个新的 cookie：

```
var myCookie = new HttpCookie("myCookie");//instantiate an new cookie and give it a name
myCookie.Values.Add("TenantName", "myTenantName");//populate it with key, value pairs
Response.Cookies.Add(myCookie);//add it to the client 
```

然后你可以像这样读取写入cookie的值

```
var cookie = Request.Cookies["myCookie"];
var tenantName = cookie.Values["TenantName"].ToString();
//tenantName = "myTenantName" 
```

# c++ - 用c++编写电源模块的代码，收到几个错误

> ID：14758709
> 
> 赞同：0
> 
> 时间：2013-02-07T18:51:05.527
> 
> 标签：c++

我正在编写在 c++ 中不使用 pow() 的代码，但是我遇到了很多我无法弄清楚的错误：

```
double power (double X, unsigned int N)
{
    double value;
    unsigned int i = 1;
    for (i = 1, i <= N, i++)
    {
        result = result * X;
    }

    if (finite(result))
    {
        return result;
    }
    else
    {
        return INFINITY;
    }
} 
```

错误：

```
In function 'double power(double, unsigned int)':
Line 5: warning: right-hand operand of comma has no effect
Line 5: error: expected ';' before ')' token
Line 10: error: expected primary-expression before 'if'
Line 10: error: expected ';' before 'if'
Line 10: error: expected primary-expression before 'if'
Line 10: error: expected ')' before 'if' 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:52:25.683

应该是`for (i = 1; i <= N; i++)`。

在 C++ 中，分号用于分隔 for 循环的不同部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:53:15.930

1.  `for (i = 1, i <= N, i++)`=>`for (i = 1; i <= N; i++)`
2.  获得一本好的 C 书

# shell - 如何将带有 $$ 的值传递给 shell 脚本

> ID：14758714
> 
> 赞同：0
> 
> 时间：2013-02-07T18:51:25.940
> 
> 标签：shell, parameters

例如`ksh myshell.sh parm1, $$param2.`

我想将第二个参数分配给我的 shell 脚本中的一个变量

例如`var1=$2`

然后将其用作`$var1`,

即当我在我的shell 脚本中使用它时， **var1**应该具有价值。`$$param2``$var1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:16:10.730

这听起来很对。您只需要确保正确引用调用，以便在调用脚本之前`my shell.sh`外壳不会扩展。`$$`

```
ksh myshell.sh parm1 '$$param2' 
```

或者

```
ksh myshell.sh parm1 $\$param2 
```

请注意，您不需要转义两个美元符号，但如果您愿意，也可以。仅逃脱第一个是*不够*`$param2`的，因为仍然会被扩展。

# java - 不同国家的时间

> ID：14758721
> 
> 赞同：0
> 
> 时间：2013-02-07T18:51:47.127
> 
> 标签：java, datetime

我用 Java 制作了一个带有服务器和客户端的游戏。客户端计算玩家等级的进度。在此期间，它会在上次更新时从服务器获取。然后看看时差是多少。然后水平+=时间差。但是客户端可以将自己的时间设置为 2 我们的时间，并且比级别 += 2 晚。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:54:42.170

最好的解决方法是所有时间都以 UTC 进行通信和存储。（通常是一个长值：从 1.1\. 1970 开始的秒数或毫秒数，也称为 Unix 时间）。

在 Java 上，你得到了这个时间

```
long utcMillis = System.currentTimeMillis(); 
```

存储并传达该价值。计算差异。

为避免在游戏中作弊，您可以随时使用服务器时间。

# regex - 在 ant replaceregexp 任务中输出替换摘要

> ID：14758723
> 
> 赞同：2
> 
> 时间：2013-02-07T18:51:52.187
> 
> 标签：regex, ant, replace, summary

蚂蚁任务中是否有类似简单蚂蚁任务的`summary="true"`等价物？ `replaceregexp``replace`

这是我的用例。我正在用 replaceregexp 任务替换 ant 替换任务，如下所示：

```
<replace dir="${dir}" summary="true" value="" token="Some Text">
    <include name="**/*.jsp" />
</replace> 
```

变成这样：

```
<replaceregexp byline="true">
    <regexp pattern="Some\s*Text"/>
    <substitution expression=""/>
 <fileset dir="${dir}" includes="**/*.jsp"/>
</replaceregexp> 
```

但是，我找不到让我的 ant build 输出已进行替换的数量的方法。没有`summary`属性`replaceregexp`，文档也没有提供任何现成的建议。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:05:46.543

从阅读 ReplaceRegexp 任务的来源来看，没有这样的功能。
ant184 => src/main/org/apache/tools/ant/taskdefs/optional/ReplaceRegExp.java，第 351 行：

```
protected void doReplace(File f, int options) throws IOException {
        File temp = FILE_UTILS.createTempFile("replace", ".txt", null, true, true);

        Reader r = null;
        Writer w = null;
        BufferedWriter bw = null;

        try {
            if (encoding == null) {
                r = new FileReader(f);
                w = new FileWriter(temp);
            } else {
                r = new InputStreamReader(new FileInputStream(f), encoding);
                w = new OutputStreamWriter(new FileOutputStream(temp),
                                           encoding);
            }

            BufferedReader br = new BufferedReader(r);
            bw = new BufferedWriter(w);

            boolean changes = false;

            log("Replacing pattern '" + regex.getPattern(getProject())
                + "' with '" + subs.getExpression(getProject())
                + "' in '" + f.getPath() + "'" + (byline ? " by line" : "")
                + (flags.length() > 0 ? " with flags: '" + flags + "'" : "")
                + ".", Project.MSG_VERBOSE); 
```

表示使用 loglevel verbose 来记录替换：
`ant -verbose -f yourfile.xml`
或
`ant -v -f yourfile.xml`

获取[ant 源分发文件](http://ant.apache.org/srcdownload.cgi)并简单地扩展任务 doReplace() 方法以获得所需的输出，例如替换计数器，由新任务属性“summary”控制 false|true
您可以填写[增强报告](http://issues.apache.org/bugzilla/enter_bug.cgi?product=Ant&bug_severity=enhancement)并提交一个补丁，使其在下一个 ant 版本中可供其他用户使用，更多详细信息请[点击此处](http://ant.apache.org/bugs.html)。

# force.com - 没有帐户的联系人不会显示 force.com 网站中的查找值

> ID：14758724
> 
> 赞同：-1
> 
> 时间：2013-02-07T18:51:53.870
> 
> 标签：force.com, sites

我在要联系的自定义对象上创建了一个查找字段，它用于视觉力页面。我也使用了自定义查找页面。

在 salesforce org 中，它工作正常并显示查找值。但是，当我在站点中使用此页面时，对于那些没有帐户的联系人，不会显示查找值。

如果联系人有帐户，则显示。我已经向网站用户授予了权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:34:27.617

没有帐户的联系人是私人联系人，只能由记录所有者查看。

解决方法是创建一个特殊的账户记录，我通常称之为“孤儿院”。然后将这些孤立联系人与该帐户相关联。

# http - HTTP POST：需要内容长度标头？

> ID：14758729
> 
> 赞同：43
> 
> 时间：2013-02-07T18:52:20.143
> 
> 标签：http, post, content-length, http-content-length

我目前正在尝试优化多个应用程序之间基于 http 的数据传输。我们当前的方法，首先下载然后创建后请求，显然会增加额外的 IO/内存负载和延迟，我想规避这些。

所有人的核心问题：

是否需要在 HTTP POST 请求中发送“Content-Length”标头？IIRC，HTTP 2616 声明它是可选的，但我不确定应用程序在这一点上的实际行为。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-07T19:44:27.527

取决于您所说的可选。如果您的意思是您可以随时省略标题，那么不，它不是可选的。HTTP 规范对何时使用该标头有非常具体的规则。如果您不知道长度，可以使用不同的方式发送数据。例如分块编码。

[4.4 消息长度](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.4)

# bash - 多个 \r 的 Bash Shell 扩展问题

> ID：14758731
> 
> 赞同：0
> 
> 时间：2013-02-07T18:52:22.893
> 
> 标签：bash, shell, vim, quoting

我正在尝试使用 vim 批量修复一些 .scc 文件，并且需要将替换字符串传递给它。

我正在尝试`vim -E`通过这条线`":s/\r/\r/g"`

我尝试将单个字符作为变量嵌入引号中，但把`\r`它搞砸了。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:19:24.887

猜测你真正想做的事情，因为这听起来不像是一次性的改变。以下将删除所有`\r`s。

* * *

**注意** 它会进行就地编辑 - 无需重定向等。

* * *

```
 perl -i.bak -p -e 's/\r+//g' filename(s)... 
```

如果你想用一个`\r`做替换它

```
 perl -i.bak -p -e 's/\r+/\r/g' filename(s)... 
```

Perl 会保留备份，但你也应该这样做。

它没有使用`vim`，但也许你不应该想要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:31:15.107

在 Vim 中，您必须`\n`在搜索部分和`\r`替换部分中使用。但是用`\n`听起来`\r`很像对我什么都不做。

无论如何，仅仅为了替代而启动 Vim 可能有点过分了。你可以使用`sed`：

```
$ sed -i.orig 's/foo/bar/' foo.txt 
```

阅读`$ man sed`以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:45:35.527

知道了。':s/\\r/\\r/g'

我只需要正确的报价水平。我之前提到的问题是，我们得到的文件可能包含在 Mac 上制作的 PC 双换行符，而 PC 无法正确读取它们。

因此，出于某种原因，使用 sed 到 s/\r/\r\n/g 并没有真正起作用，也许我可以进行更多探索。但我认为将这些传递给 vim 会有所帮助。我必须使用 vim 将 :set format=dos 发送到文件。

谢谢大家。

# android - Android布局错误：“资源ID 不是 STYLE 类型（而不是 attr）”

> ID：14758734
> 
> 赞同：27
> 
> 时间：2013-02-07T18:52:25.563
> 
> 标签：android, android-layout, layout, resources, android-resources

我看到一个我以前从未见过的错误，它阻止了我的一些布局文件在 Eclipse 中呈现。它们在运行时渲染得很好。

图形布局编辑器（和我的错误日志）中显示的错误是：“Resouce id 0x1010081 不是 STYLE 类型（而是 attr）”

我在我的 R 文件中搜索了资源 id 0x1010081，但我找不到它，所以我猜想也许我与内置的 Android attr 有冲突。我还验证了我下面的所有样式属性都指向实际样式而不是 attr。任何帮助表示赞赏。

这是我的完整布局代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bkg_light"
    android:padding="@dimen/padding_med" >

    <RelativeLayout
        android:id="@+id/relativeLayout_activity"
        android:layout_width="fill_parent"
        android:layout_height="@dimen/button_height"
        android:background="@drawable/xml_button"
        android:padding="@dimen/padding_med" >

        <TextView            
            style="@style/text_large_bold_white"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="@string/activity" />

        <TextView
            android:id="@+id/textView_activity"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginRight="@dimen/margin_med"
            android:layout_toLeftOf="@+id/textView_arrow_right_start_date" 
            android:text="@string/none_selected"/>

        <TextView
            android:id="@+id/textView_arrow_right_start_date"
            style="@style/arrow_right"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true" />
    </RelativeLayout>

    <!-- kv Duration -->

    <RelativeLayout
        android:id="@+id/relativeLayout_duration"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/relativeLayout_activity"
        android:layout_marginTop="@dimen/margin_large"
        android:background="@drawable/xml_button">

        <TextView
            android:id="@+id/textView_duration"
            style="@style/text_large_bold_white"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="@string/duration_lc" 
            android:paddingLeft="@dimen/padding_med"/>

        <Spinner
            android:id="@+id/spinner_duration"
            android:layout_width="wrap_content"
            android:layout_height="@dimen/button_height"
            android:layout_alignParentRight="true"
            android:entries="@array/array_durations"
            android:prompt="@string/duration_lc"
            android:spinnerMode="dropdown" 
            android:clickable="false"/>
    </RelativeLayout>

</RelativeLayout> 
```

这是我的styles.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="arrow_right">
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/text_xxlarge</item>
        <item name="android:text">@string/arrow_right</item>
    </style>

    <style name="button_blue">
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/white</item>
        <item name="android:background">@drawable/selector_button_blue</item>
        <item name="android:padding">@dimen/padding_med</item>
    </style>

    <style name="button_blue_small">
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/white</item>
        <item name="android:background">@drawable/selector_button_blue_small</item>
        <item name="android:padding">@dimen/padding_med</item>
    </style>

    <style name="button_dark">
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/white</item>
        <item name="android:background">@drawable/selector_button_dark</item>
        <item name="android:padding">@dimen/padding_med</item>
    </style>

    <style name="button_light">
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/black</item>
        <item name="android:background">@drawable/selector_button_light</item>
        <item name="android:padding">@dimen/padding_med</item>
    </style>

    <style name="button_light_small">
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/black</item>
        <item name="android:textSize">@dimen/text_small</item>
        <item name="android:background">@drawable/selector_button_light</item>
        <item name="android:padding">@dimen/padding_small</item>
    </style>  

    <style name="text_small_gray_light">
        <item name="android:textSize">@dimen/text_small</item>
        <item name="android:textColor">@color/gray_light</item>
    </style>

    <style name="text_med_bold_gray_light">
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/text_med</item>
        <item name="android:textColor">@color/gray_light</item>
    </style>    

    <style name="text_large_bold_white">
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/text_large</item>
    </style>

    <style name="text_large_bold_black">
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/text_large</item>
        <item name="android:textColor">@color/black</item>
    </style>

    <style name="text_large_bold_gray_dark">
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/text_large</item>
        <item name="android:textColor">@color/gray_dark</item>
    </style>

    <style name="text_large_bold_gray_light">
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/text_large</item>
        <item name="android:textColor">@color/gray_light</item>
    </style>

    <style name="text_large_bold_white">
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/text_large</item>
        <item name="android:textColor">@color/white</item>
    </style>

    <style name="text_large_white">
        <item name="android:textSize">@dimen/text_large</item>
        <item name="android:textColor">@color/white</item>
    </style>
</resources> 
```

这是我的自定义 theme.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Theme.P90X" parent="@style/Theme.Sherlock">
        <item name="android:textColor">#ffffffff</item>
    </style>
</resources> 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-05-16T13:16:18.750

我也有这个问题，显示相同的资源ID。当我更改为时它消失`android:spinnerMode`了，`"dialog"`所以我怀疑这不是您的代码的问题。

有问题的 id 指的是 android 属性`spinnerStyle`。请参阅[R.attr的文档](http://developer.android.com/reference/android/R.attr.html)

我找到了一种解决方法，即替换

`android:spinnerMode="dropdown"`

和

`android:spinnerStyle="@android:style/Widget.Spinner.DropDown"`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T19:01:25.393

您是否尝试过将每个样式属性更改为如下内容：

```
style="?attr/text_large_bold_white" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-24T16:01:07.350

正如 JulianSymes 所说，问题是

```
android:spinnerMode="dropdown" 
```

他的解决方案（替换为`android:spinnerStyle="@android:style/Widget.Spinner.DropDown"`）在我的手机上运行，​​但不在我的平板电脑上

我的解决方案更简单：删除该行。

`spinnerMode="dropdown"`是默认的，因此它是不必要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T19:04:30.800

删除所有`style`元素，然后一个接一个地添加它们，并始终检查它是否仍然呈现。因此，您至少可以找出该怪谁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T10:16:04.353

由于谷歌为此错误指向此页面，并且为了后代......

就我而言，一时兴起，我**关闭并重新打开了 Eclipse**，然后错误消失了，Eclipse 渲染预览没有问题。

尽管我坚信这可能并非所有人的情况。

如果你觉得你做的*一切都是正确的*，我猜，重新启动 Eclipse 不会有什么坏处。

# c# - 使用 OLEDB 连接文件时计算机恶意软件攻击

> ID：14758741
> 
> 赞同：0
> 
> 时间：2013-02-07T18:53:06.750
> 
> 标签：c#, oledb, malware

我想知道在尝试使用 OlEDB 连接文件并且该文件包含恶意软件时，是否可以激活该恶意软件。

即使答案是“是”或“否”，您能否解释一下为什么和/或如何发生这种情况？

[我在本文](http://www.cisco.com/web/about/security/intelligence/virus-worm-diffs.html)中阅读了下面的句子，但我不确定在尝试与 OLEDB 连接时，在我的情况下，此连接不会激活隐藏在 xls 文件下的 exe 的入口点：

*几乎所有病毒都附加到可执行文件中，这意味着病毒可能存在于系统中，但在用户运行或打开恶意主机文件或程序之前不会活跃或无法传播。当宿主代码被执行时，病毒代码也被执行。*

请注意，我在 c# 中使用带有 System.Data.Oledb 的 OLEDB 和一个像这样的连接字符串：

提供者=Microsoft.ACE.OLEDB.12.0；数据源=c:\myFolder\myExcel2007file.xlsx；扩展属性="Excel 12.0 Xml;HDR=YES";

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:57:27.410

> 你能解释一下为什么和/或如何发生这种情况吗？

为此，您必须了解恶意软件的工作原理。就像任何常规程序一样，它必须被*执行*才能造成损害。您可以将受感染的 .exe 重命名为 .jpg 并在照片查看器中打开它，什么都不会发生。

您的数据源也是如此。如果你只是显示它的内容，什么都不会发生。当然，除非恶意软件针对的是显示系统，该系统经常用于释放恶意软件：例如已知的 PDF、照片或其他文档查看器中的缓冲区溢出，其中特制文件将可执行代码泄漏到托管程序的堆栈中，因此它可以运行其“安装程序”或通过运行一次来​​造成损坏。

# python - 有效的 JSON，但“无法解码任何 JSON 对象”

> ID：14758744
> 
> 赞同：1
> 
> 时间：2013-02-07T18:53:15.750
> 
> 标签：python, json

我在“没有 BOM 的 utf-8”编码文件中有这个非常短的 JSON 代码：

```
{ "paths": ["A:\\path\\to\\dir"],
  "anotherPath": "os.path.join(os.path.dirname( __file__ ), '..')"
} 
```

我用不同的在线 JSON 验证器确保了它的有效性。但是使用以下 Python 代码...

```
jsonfile = "working\\path\\to\\myProgram.conf"
with open(jsonfile) as conf:
    confContent = json.load(conf)
# doStuff... 
```

...我收到此错误：

```
No JSON object could be decoded 
```

我知道路径是正确的，因为我在不同的地方成功读取了它的内容。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:57:50.350

问题是您实际上没有没有 BOM 的编码为 UTF-8 的文件。

您可以使用该字符串编码的方式生成一个文件，如下所示：

```
u='''{ "paths": ["A:\\path\\to\\dir"],
  "anotherPath": "os.path.join(os.path.dirname( __file__ ), '..')"
}'''
s=u.encode('utf-8')
with open('test.json', 'wb') as f:
    f.write(s) 
```

（是否`'b'`有必要取决于您使用的是 Python 2 还是 3，以及您使用的是 Windows 还是 Unix。但如果没有必要，它是无害的。）

现在，如果您针对该文件运行代码，它就可以工作。

但是您可以将`test.json`文件与您的`working\\path\\to\\myProgram.conf`文件进行比较，看看有什么区别。（大多数非 Windows 系统都带有命令行工具，例如`hexdump`; 在 Windows 上，您可能需要花点心思才能发现差异。）

# c# - 在多个 IQueryable 上并行运行相同的 linq 查询？

> ID：14758752
> 
> 赞同：4
> 
> 时间：2013-02-07T18:53:25.883
> 
> 标签：c#, linq, parallel-extensions

**情况：**我有一个`List<IQueryable<MyDataStructure>>`. 我想对它们中的每一个并行运行一个 linq 查询，然后加入结果。

**问题：**如何创建一个可以作为参数传递的 linq 查询？

**示例代码：**

这是一些简化的代码。首先，我收集了`IQueryable<string>`：

```
 public List<IQueryable<string>> GetQueries()
    {
        var set1 = (new List<string> { "hello", "hey" }).AsQueryable();
        var set2 = (new List<string> { "cat", "dog", "house" }).AsQueryable();
        var set3 = (new List<string> { "cat", "dog", "house" }).AsQueryable();
        var set4 = (new List<string> { "hello", "hey" }).AsQueryable();

        var sets = new List<IQueryable<string>> { set1, set2, set3, set4 };

        return sets;
    } 
```

我想找到所有以字母“h”开头的单词。只需一个`IQueryable<string>`，这很容易：

```
query.Where(x => x.StartsWith("h")).ToList() 
```

但我想对所有`IQueryable<string>`对象并行运行相同的查询，然后合并结果。这是一种方法：

```
 var result = new ConcurrentBag<string>();
        Parallel.ForEach(queries, query =>
        {
            var partOfResult = query.Where(x => x.StartsWith("h")).ToList();

            foreach (var word in partOfResult)
            {
                result.Add(word);
            }
        });

        Console.WriteLine(result.Count); 
```

但我希望这是一个更通用的解决方案。这样我就可以单独定义 linq 操作并将其作为参数传递给方法。像这样的东西：

```
 var query = Where(x => x.FirstName.StartsWith("d") && x.IsRemoved == false)
            .Select(x => x.FirstName)
            .OrderBy(x => x.FirstName);

        var queries = GetQueries();

        var result = Run(queries, query); 
```

但我不知道如何做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T19:00:38.547

首先-鉴于您当前的实现，没有理由使用`IQueryable<T>`-您可以只使用`IEnumerable<T>`.

然后，您可以编写一个采用 an`IEnumerable<IEnumerable<T>>`和 a的方法`Func<IEnumerable<T>, IEnumerable<U>>`来构建结果：

```
IEnumerable<IEnumerable<U>> QueryMultiple<T,U>(IEnumerable<IEnumerable<T>> inputs, Func<IEnumerable<T>,IEnumerable<U>> mapping)
{
     return inputs.AsParallel().Select(i => mapping(i));
} 
```

然后，您可以将其用作：

```
void Run()
{
    IEnumerable<IEnumerable<YourType>> inputs = GetYourObjects();

    Func<IEnumerable<YourType>, IEnumerable<YourType>> query = i => 
       i.Where(x => x.FirstName.StartsWith("d") && x.IsRemoved == false)
        .Select(x => x.FirstName)
        .OrderBy(x => x.FirstName);

    var results = QueryMultiple(inputs, query);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T19:05:47.613

因此，您想要的第一件事是获取一系列查询，执行所有查询，然后获得扁平化的结果列表。这很简单：

```
public static IEnumerable<T> Foo<T>(IEnumerable<IQueryable<T>> queries)
{
    return queries.AsParallel()
            .Select(query => query.ToList())
            .SelectMany(results => results);
} 
```

对于每个查询，我们执行它（调用`ToList`它）并且它是并行完成的，这要归功于`AsParallel`，然后结果通过`SelectMany`.

您想要做的另一件事是向查询序列中的每个查询添加许多查询操作。这不需要并行化（由于延迟执行，对 , 等的调用`Where`几乎`OrderBy`不需要时间）并且可以通过以下方式完成`Select`：

```
var queries = GetQueries().Select(query =>
    query.Where(x => x.FirstName.StartsWith("d")
        && !x.IsRemoved)
    .Select(x => x.FirstName)
    .OrderBy(x => x.FirstName));

var results = Foo(queries); 
```

就个人而言，我并不认为有必要将这两种方法结合起来。您可以制作一种同时兼顾两者的方法，但它们实际上是相当独立的概念，因此我认为没有必要。但是，如果您确实希望将它们组合在一起，那么它是：

```
public static IEnumerable<TResult> Bar<TSource, TResult>(
    IEnumerable<IQueryable<TSource>> queries,
    Func<IQueryable<TSource>, IQueryable<TResult>> selector)
{

    return queries.Select(selector)
        .AsParallel()
        .Select(query => query.ToList())
        .SelectMany(results => results);
} 
```

如果需要，请随意制作`Foo`或扩展方法。`Bar`此外，如果您*要*使用它们，最好将它们重命名为更好的名称。

# javascript - document.write 的跨站点脚本问题

> ID：14758753
> 
> 赞同：3
> 
> 时间：2013-02-07T18:53:31.460
> 
> 标签：javascript, xss

我正在使用一些旧代码，据报道这些旧代码容易受到跨站点脚本的攻击。代码行是

```
document.write("<input type=hidden name=field1 value='" + getCookieValue('fieldval') + "' />"); 
```

该报告还给出了以下示例，说明如何将恶意代码注入页面。通过将 cookie 值更新为

```
fieldval='><img src=x onerror=alert(1)> 
```

任何人都可以提供有关如何修复此漏洞的见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:27:11.900

您将需要验证来自 getCookieValue 的数据。如果您需要一个数字，请确保返回的值是数字。还要确保该字段中不存在任何转义字符（例如，超出您的 javascript 的引号）。对此的修复如下所示：

```
function is_valid(value) {
     // Do some check here depending on what you're expecting.
     // I also recommend escaping any quotes (i.e. " becomes \")
     // Ideally, you'd just whitelist what is acceptable input (A-Z0-9 or whatever,
     // and return false from this function if something else is present in 
     // value!)
}

var cookie_value = getCookieValue('fieldval');

if(is_valid(cookie_value)) {
    document.write('<input type="hidden name="field1" value="' + cookie_value + '" />');
} 
```

长话短说，在你 document.write 之前清理数据，否则你最终会得到一个反射的 XSS。

正如上面评论中提到的，源自用户自己的 cookie（他们自己修改的东西）的 XSS 并不是特别令人担忧。但是，任何导致这种情况的编码实践都可能存在于其他地方。我建议您查看您的来源，并确保**所有**来自用户的输入都被视为不受信任并进行了适当的清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:59:25.967

您的代码包含两个错误：

1.  您在未正确编码的情况下将不受信任的数据插入到输出中（这为反射 XSS 攻击打开了大门）
2.  您用于`document.write`将纯 HTML 插入 DOM（这为 DOM XSS 攻击打开了大门）

在重新发明轮子之前，您应该查看 OWASP 备忘单以纠正错误：

1.  [OWASP XSS 预防检查表 - 规则 2](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#RULE_.232_-_Attribute_Escape_Before_Inserting_Untrusted_Data_into_HTML_Common_Attributes)
2.  [基于 OWASP DOM 的 XSS 预防备忘单 - 规则 2](https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet#RULE_.232_-_JavaScript_Escape_Before_Inserting_Untrusted_Data_into_HTML_Attribute_Subcontext_within_the_Execution_Context)

As you can see, your problem is not fixed by only escaping the quotes. Whitelisting your untrusted data is always the preferred way and a valid advice. For further reading about XSS in general the links contain many references.

# ios - 具有多个原型单元格的 TableView

> ID：14758756
> 
> 赞同：15
> 
> 时间：2013-02-07T18:53:39.453
> 
> 标签：ios, objective-c, uitableview, uistoryboard

我有一个关于具有 3 种不同类型原型单元格的表格视图的简单问题。前两个只出现一次，而第三个出现 4 次。现在我感到困惑的是如何在我的 cellforRowatindexpath 中指定哪个单元格原型用于哪一行。所以，我想要第 0 行，使用原型 1，第 1 行，使用原型 2，第 3、4、5 和 6 行使用原型 3。最好的方法是什么？我是否给每个原型一个标识符，然后使用 dequeueReusableCellWithIdentifier:CellIdentifier ？你能提供一些示例代码吗？

编辑：

还是行不通。这是我目前拥有的代码。（我只有一个用于 switch 语句的案例，因为我只想测试并查看是否在第一行中生成了单元格，但当前表格视图为空白）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     switch(indexPath.row)
{          
 case 0: {static NSString *CellIdentifier = @"ACell";
                   UITableViewCell *cell = [tableView
                                           dequeueReusableCellWithIdentifier:@"ACell"];
  if(cell==nil) {
    cell=[[UITableViewCell alloc]
          initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"ACell"];

                        }
  return cell;
  break;
    }
  }
} 
```

Acell 是我创建的单元原型的标识符。一世

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T19:00:57.663

如果您使用三个原型，则使用三个标识符。因为只有一个标识符会导致问题。你会得到错误的结果。所以这样的代码。

```
if(indexPath.row==0){
 // Create first cell
}

if(indexPath.row==1){
 // Create second cell
}

else{
 // Create all others
} 
```

您也可以在此处使用开关盒以获得最佳性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-08T17:31:44.753

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    if (cell.tag == 0) 
   {
    return array1.count;
   }
   else(cell.tag == 1)
   {
    return array2.count;
   }    
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *cellIdentifier;

 NSString *membershipType = [membershipTypeArray objectAtIndex:indexPath.row];

 if ([membershipType isEqualToString:@"silver"]||[membershipType isEqualToString:@"gold"])
 {
     cellIdentifier = @"cell";
 }
 else if ([membershipType isEqualToString:@"platinum"])
 {
     cellIdentifier = @"premiumCustomCell";
     cell.customCellImageView.image = [cellImageArray objectAtIndex:indexPath.row];
 }

 cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

 if (!cell) {
     cell = [[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
 }
 cell.selectionStyle = UITableViewCellSelectionStyleNone;
 cell.headingLabel.text = [titleArray objectAtIndex:indexPath.row]; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T12:17:04.073

在这里，我编写了如下代码：

```
#pragma mark == Tableview Datasource

  - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
  return 2;
 }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
NSInteger nRows = 0;
switch (section) {
    case 0:
        nRows = shipData.count;
        break;
    case 1:
        nRows = dataArray1.count;
        break;
    default:
        break;
}
return nRows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
NSString *cellIdentifier = @"cellIdentifier1";
NSString *cellIdentifier1 = @"cellIdentifier2";
SingleShippingDetailsCell *cell;
switch (indexPath.section) {
    case 0:
        cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
        //Load data in this prototype cell
        break;
    case 1:
        cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier1];
        //Load data in this prototype cell
        break;
    default:
        break;
}
return cell;
 } 
```

# node.js - Mongoose - 在模型保存时创建参考

> ID：14758761
> 
> 赞同：11
> 
> 时间：2013-02-07T18:54:01.523
> 
> 标签：node.js, mongoose

在猫鼬中，是否可以在保存引用的文档时创建引用的文档？我已经尝试了以下方法，但它似乎对我不起作用。

```
var Model1Schema = new Schema({ 
  foo: String,
  child: { ref: 'Model2', type: ObjectId }
});

var Model2Schema = new Schema({ 
  foo: String
});

mongoose.model('Model1', Model1Schema);
mongoose.model('Model2', Model2Schema);

var m = new (mongoose.model('Model1'));

m.set({
  foo: 'abc',
  child: {
    bar: 'cba'
  }
}).save(); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-07T19:03:49.273

Mongoose 验证不允许创建子项，因为它是一个引用，因此您可以做的第二好的事情是创建自己的函数来创建一个带有已保存的更正子项的实例。类似的东西，我想..

```
var Model1Schema = new mongoose.Schema({ 
    foo: String,
    child: { ref: 'Model2', type: mongoose.Schema.ObjectId }
});

var Model2Schema = new mongoose.Schema({ 
    foo: String
});

var Model1 = mongoose.model('Model1', Model1Schema);
var Model2 = mongoose.model('Model2', Model2Schema);

function CreateModel1WithStuff(data, cb) {
    if (data.child) { // Save child model first
        data.child = Model2(data.child);
        data.child.save(function(err) {
            cb(err, err ? null : Model1(data));
        });
    } else { // Proceed without dealing with child
        cb(null, Model1(data));
    }
}

CreateModel1WithStuff({
    foo: 'abc',
    child: {
      bar: 'cba'
    }
}, function(err, doc) {
    doc.save();
}); 
```

# vbscript - 使用 VBScript 检查服务器是否安装了所有关键更新——由 WSUS 管理

> ID：14758763
> 
> 赞同：0
> 
> 时间：2013-02-07T18:54:23.270
> 
> 标签：vbscript, windows-update

我正在开发一个在服务器上部署和执行的脚本（所以就好像我在本地而不是远程运行它）。

我需要检查是否安装了所有关键更新。每台服务器都有一个 WSUS 服务器来管理其更新。有没有办法让我用 VBScript 做到这一点。

我在看这篇文章， [Windows Update Check with vbscript](https://stackoverflow.com/questions/3179914/windows-update-check-with-vbscript)

但我不知道它是否对我有帮助，因为我不太熟悉 Windows 更新的工作原理，但我只需要关键更新。

如果我按照我链接的帖子中选择的答案的方法，将

`CreateObject("Microsoft.Update.Session")`

如果 WSUS 正在管理更新，是否可以工作？我用什么来只获取 WSUS 认为关键的更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:50:14.620

该`Microsoft.Update.Session`对象将查询主机指向的任何更新服务器，无论是 Microsoft 的服务器还是本地 WSUS。它仅报告适用于主机的已批准更新。

# c++ - 链表类的复制构造函数

> ID：14758764
> 
> 赞同：0
> 
> 时间：2013-02-07T18:54:25.757
> 
> 标签：c++, linked-list

我有一个链表类 List。我必须为它创建一个复制构造函数。我实际上遇到了语法问题。这是我的代码：

```
template <class T>
List<T>::List(const List<T>& otherList)
{
} 
```

otherList 是 List 类型的另一项。事实上，我认为它是一个指向列表的指针。我为类 List 定义了一个 getHead() 函数，它工作正常。我认为执行以下操作就可以了：

```
Node* temp = otherList->getHead(); 
```

node 是组成 List 的指针。这是一个单独的类节点。但执行上述操作会出现错误：

```
base operand of -> has non-pointer type const List<int> 
```

所以我尝试使用“。” 而不是上面表达式中的“->”。收到以下错误：

```
passing const List<int> as this argument of ListItem<T>* List<T>::getHead() [with T = int] discards qualifiers [-fpermissive] 
```

我的 getHead 函数：

```
template <class T>
node<T>* List<T>::getHead()
{
return head;
} 
```

请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:00:21.610

首先，`otherList`它不是一个指针，它是一个“引用`const List<T>`”。我们知道它是一个引用，因为`&`它的类型。如果它是一个指针，它`*`的类型就会有 a。引用的行为就像您刚刚拥有对象本身一样。所以使用`.`访问其成员函数`getHead`是正确的。

现在的问题是你有一个`const`引用，但你正在调用一个非`const`成员函数。就编译器而言，您的`getHead`函数可能会修改`List`，因此不应在`const List`. 您需要声明`getHead`为 being `const`。无论您在哪里声明 ，都在开始函数之前`getHead`粘贴 a ：`const``{`

```
template <typename T>
const Node<T>* List<T>::getHead() const {
  // ...
} 
```

这假设它`getHead`实际上并没有修改列表（它不应该）。如果是这样，那么您不能将其`const`设为成员函数，也不能从复制构造函数中调用它，因为`otherList`is `const`。但是，您的复制构造函数不应该修改它正在复制的对象，所以您`otherList` *应该*是`const`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:00:38.947

我觉得`getHead()`应该声明一个 const 函数……试试看，让我们知道它是否有效。

# javascript - 如何在 javascript 中创建一个未初始化的对象？

> ID：14758765
> 
> 赞同：2
> 
> 时间：2013-02-07T18:54:29.090
> 
> 标签：javascript, object, initialization

我正在开发一个使用 javascript 更改 iframe 中的页面的向导。我想为向导的每一页创建一个对象，并引用下一页和上一页。

**编辑：下面发布的代码不起作用。actionOne.nextAction 执行后等于 {}。**

```
var actionOne = {};
var actionTwo = {};

actionOne = {
    url: 'actionOneUrl.htm',
    prevAction: null,
    nextAction: actionTwo,
    doDisplay: function(){
        $('.label').html('Action One');
    }
}

actionTwo = {
    url: 'actionTwoUrl.htm',
    prevAction: actionOne,
    nextAction: null,
    doDisplay: function(){
        $('.label').html('Action Two');
    }
} 
```

问题是我无法弄清楚如何正确设置下一个和上一个引用。可能有一个相对简单的解决方案，但我不确定要搜索什么。我可以在创建所有页面后设置引用，但这样做感觉很笨拙。有没有办法在创建对象时做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:12:22.730

对于您想要做的事情，您将需要在 JavaScript 中使用面向对象的方法。这将允许您分配对对象的新*实例*的引用。例如这有效：

[http://jsfiddle.net/Gq7vQ/](http://jsfiddle.net/Gq7vQ/)

```
function Action(url, name){
    this.url = url;
    this.prevAction = null;
    this.nextAction = null;
    this.name = name;
}

Action.prototype.doDisplay = function(){
    $(".label").html(this.name);
}

var actionOne = new Action('actionOneUrl.html', 'Action One');
var actionTwo = new Action('actionTwoUrl.html', 'Action Two');

actionOne.nextAction = actionTwo;
actionTwo.prevAction = actionOne;

console.log(actionOne.nextAction); 
```

* * *

编辑：所以 OP 要求一个实现，在新添加的操作之间自动设置这些链接。所以这是一个双向链表实现：

[http://jsfiddle.net/wXC9B/1/](http://jsfiddle.net/wXC9B/1/)

```
function ActionList(){
    this.head = null;
    this.tail = null;
}

ActionList.prototype.doDisplay = function(index){
    var node = this.getNode(index);

    console.log(node.name);
}

ActionList.prototype.getNode = function(index){
    var current = this.head,
        c = 0;

    while(c < index && current !== null){
        current = current.nextAction;
        c++;
    }

    return current;
}

ActionList.prototype.add = function(url, name){
    var node = {
        url: url,
        name: name,
        nextAction: null,
        prevAction: null
    };

    if(this.head === null){
        this.head = node;
        this.tail = node;
    }
    else{
        this.tail.nextAction = node;
        node.prevAction = this.tail;

        //move tail to new node
        this.tail = node;
    }
}

var actionList = new ActionList();

//Each add automatically sets up links between the two
actionList.add('actionOneUrl.html', 'Action One');
actionList.add('actionTwoUrl.html', 'Action Two');

console.log(actionList.getNode(1));

actionList.doDisplay(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:04:16.917

这是一个非常简化的示例，但类似以下结构的内容将避免手动引用您的下一个/上一个操作的需要……让应用程序逻辑根据用户的输入查找要执行的操作。

UnderscoreJS 的`where`函数[http://underscorejs.org/#where](http://underscorejs.org/#where)在这里很有用

```
var dataFromServer = [
  {id:"1", name: "First Page", nextId:"2"},
  {id:"2", name: "Second Page", nextId:"3", prevId: "1"},
  .....];

var actions = [];

var Action = function(data) {
    this.doNextURL = function() {
        //find action with id= data.nextId;
        var actionToDo = _.where(actions, {id: data.nextId})[0];
        window.location.href = actionToDo.url; //or something... a callback parameter, or returning the action rather than doing the 'ui logic' here would be better real world
    }
}

for(var i = 0; i < dataFromServer.length; i+=1){
  actions.push(new Action(dataFromServer[i]));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T19:14:29.087

当你这样做

```
actionTwo = {
    // ...
} 
```

you are assigning a new value to `actionTwo`. It does not refer to the object anymore you assigned in `var actionTwo = {};` and hence does not refer to the object you used in

```
actionOne = {
    // ...
    nextAction: actionTwo,
    // ...
} 
```

The easiest way would be to just initialise both objects and then assign them to the correct properties later on:

```
var actionOne = {
    url: 'actionOneUrl.htm',
    prevAction: null,
    nextAction: null,
    doDisplay: function(){
        $('.label').html('Action One');
    }
};

var actionTwo = {
    url: 'actionTwoUrl.htm',
    prevAction: null,
    nextAction: null,
    doDisplay: function(){
        $('.label').html('Action Two');
    }
};

actionOne.nextAction = actionTwo;
actionTwo.prevAction = actionOne; 
```

If you want to do this for multiple actions, you should consider using constructor functions, so as [joeltine shows in his answer](https://stackoverflow.com/a/14759073/218196).

* * *

To learn more about objects, have a look at [MDN - Working with Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T19:15:22.387

Try this: don't create NEW objects for actionOne, actionTwo, instead leave your code as is - but assign to object properties of the already existing objects (which the first two lines create).

```
var actionOne, actionTwo;

actionOne = {
    url: 'actionOneUrl.htm',
    doDisplay: function(){
        $('.label').html('Action One');
    }
};

actionTwo = {
    url: 'actionTwoUrl.htm',
    doDisplay: function(){
        $('.label').html('Action Two');
    }
};

actionOne.prevAction = null;  //could also be set above
actionOne.nextAction = actionTwo;

actionTwo.prevAction = actionOne;
actionTwo.nextAction = null;  //could also be set above 
```

**Your question was a very good one** - don't let anyone tell otherwise :) It is NOT obvious, even with quite a bit of JS background, that the object properties point to the objects the variables pointed to at the time the (literal) object creation statement was executed, rather than to the variable itself (in which case your example would have worked).

And please ignore the MVC pattern thing, even if it was even upvoted. Nothing wrong with MVC (sometimes), but this is a much, much MUCH more basic Javascript question, those pattern things come into play on a whole different (higher) level than your little interesting issue.

Some background: Deep inside the bowels of the Javascript execution engine variables that have an object as value are pointers (C/C++ background knowledge is good for understanding Javascript, because JS engines are written in it). So, when you assign the value of such a variable to an object property it will not point to the variable, but instead it will receive the pointer the variable has at value at the time. This means if the variable gets a new object assigned, pointing to another place in memory, the object property keeps pointing to the old object. If it pointed to the variable instead it would there find a pointer to the new object. As you can see, answering your question leads us deep inside how Javascript engines actually work on a very low level :)

All the other answers sure also solve your immediate issue, but I believe knowing this bit of background is much more fertile, in the end. Instead of trying to just give an answer that works it's sometimes worth investigating what's really going on... :)

Primitive types are stored in the variable directly, variables for objects are actually pointers. new String("foo") is an object (String), "foo" is a primitive type (string).

**The exact same issue is important to keep in mind when calling functions in Javascript!** It is call by value always, technically - but when the variable is a pointer to an object the value IS the pointer, which one must consider when assigning to variables the function gets as parameter.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T19:31:15.817

When you use the `{}` object literal to define an object you are creating a new object instance with the Object constructor.

The following creates two new object instances from the Object constructor:

```
var actionOne = {}; // object instance 1
var actionTwo = {}; // object instance 2 
```

This next part creates **another new object instance** (the third object instance) from the Object constructor and adds several properties. `actionOne.nextAction` points to the object instance of `actionTwo` (which doesn't have any of its own properties).

```
actionOne = {
    url: 'actionOneUrl.htm',
    prevAction: null,
    nextAction: actionTwo,
    doDisplay: function(){
        $('.label').html('Action One');
   }
} // object instance 3 
```

So now when you declare `actionTwo = {....}` it **creates a fourth object instance** with a bunch of new properties. `actionOne.prevAction` still points to the second object instance you created (but are are no longer referencing with the the global variable actionTwo).

The key to remember is that the object literal `{}` creates new object instances with the Object constructor and the properties you create reference the object instance at the time they are declared.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T20:39:35.553

Everyone seems to really be overcomplicating this.

```
function Wizard(o) {
    return { url:o.url, doDisplay:function() { $('.label').html(o.html); } };
}
var wizards = [{url: 'actionOneUrl.html', html:'Action One'},
               {url: 'actionTwoUrl.html', html:'Action Two'}].map(Wizard);
    // wizards now contains an array of all your wizard objects
wizards.reduce(function(p,c) { c.prevAction = p; return p.nextAction = c;  });
    // prevAction and nextAction now point to the right places 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-07T19:15:32.133

No you can't, but you can keep the empty objects and just fill them:

```
var actionOne = {};
var actionTwo = {};

actionOne.url = 'actionOneUrl.htm';
actionOne.prevAction = null;
actionOne.nextAction = actionTwo;
... 
```

But that's rather ugly. I would recommend filling in the links between them by using a function like this:

```
function chain() {
    var i, prev, curr;
    for(i = 0; i < arguments.length; i++) {
        curr = arguments[i];
        if(prev) {
            prev.nextAction = curr;
            curr.prevAction = prev;
        }
        else {
            curr.prevAction = null;
        }
        prev = curr;
   }
   if(curr) curr.nextAction = null;
}

var actionOne, actionTwo;

actionOne = {
    url: 'actionOneUrl.htm',
    doDisplay: function(){
        $('.label').html('Action One');
    }
}

actionTwo = {
    url: 'actionTwoUrl.htm',
    doDisplay: function(){
        $('.label').html('Action Two');
    }
}

chain(actionOne, actionTwo); 
```

# mysql - ERD 表设计

> ID：14758777
> 
> 赞同：0
> 
> 时间：2013-02-07T18:55:14.457
> 
> 标签：mysql, database-design, erd

我正在开发一个网站，需要为该网站创建一个 ERD。我以前从未创建过一个，但一旦我找出必要的表，就会使用 MySQL 来设计它。我所要求的只是有关该网站可能需要哪些表格的想法。这是网站图片的链接：

![威斯康](../Images/ef67e1305176e80e4549b29237635b72.png)！

显然需要有一个用户表。我已经创建了所有相关信息。我是否需要创建登录、注册、主页、精英登录、照片、活动、时事通讯和联系我们表格？照片链接会将用户带到一个页面，其中每个事件都有文件夹，如果单击该文件夹，则会打开另一个页面，其中包含实际照片，但您需要成为注册用户才能查看这些照片。登录超链接将成为用户表吗？注册链接是指向另一个表还是会添加到用户表中？活动页面只是一个超链接列表，可将您带到包含活动日期和描述的新页面，这需要它自己的表格吗？最后，时事通讯和联系我们页面是否也需要单独的表格？

就像我说的那样，我不是在寻找任何人来帮助创建 dERD，而只是让我知道是否需要所有这些表。从那里我可以建立 ERD 并创建适当的关系等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:54:58.697

看完这个之后，我意识到我已经过分了，在考虑 ERD 之前，我需要在网站设计上做更多的工作。客户只批准了“主页”页面的模型，其他页面还有待进一步讨论。没有什么是一成不变的。因此，创建 ERD 还为时过早。从现在到需要查看数据库的许多事情都可以改变。请原谅这个话题，因为我对我的第一个项目过于兴奋。我需要专注于敏捷开发过程并放慢速度。专注于各个步骤，让事情由此发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:02:43.313

您可能会从学习 MVC 模型、视图、控制器系统中受益。

视图（在 web 应用程序中）可以很好地映射到您显示的 HTML 页面。

模型很好地映射到系统中的“名词”——这些是数据库中的东西；用户、照片、时事通讯是这里的例子。

控制器映射到系统中的“动词”——注册、订阅、上传、保存、登录都是控制器可能提供的操作。

在大多数框架中，只有模型层存在于数据库中。

我建议您以更全面的方式考虑您的问题，而不是深入研究一堆不相关的想法。ERD 真的只映射到你需要持久的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:10:50.353

我建议您首先绘制大多数用户界面的纸质原型，至少在高层次上。然后对这些原型进行可用性测试，以确保您的界面设计对您以外的其他人有意义。（Soren Lausen 的《用户界面设计》是一本很好的书。）

然后，一旦你对接口的工作方式有了一个不错的了解，就可以考虑使这些接口工作所需的模型。显然，带有用户名和密码的登录表单将需要一个具有和（或实际上是）属性的`User`实体。确定所有这些模型可能需要一些我觉得您可能还没有的技能，但是如果您将界面绘制出来，那么这项任务对您来说会比您只是想坐在那里思考要容易得多和清晰得多它。你的第一次通过可能是错误的，但没关系。从可以单独使用的程序的最小子集开始，将其构建到完全可以工作的程度，然后从那里扩展。`username``password``encrypted_password`

祝你好运！

# visual-studio - 保留以前的“查找所有参考”结果

> ID：14758782
> 
> 赞同：20
> 
> 时间：2013-02-07T18:55:33.063
> 
> 标签：visual-studio, visual-studio-2012

我想知道，在进行下一次搜索时，是否有任何方法不清除以前的查找所有参考结果？

如果我“查找所有引用”一次，结果将出现在“查找符号结果窗口”中。我正在使用一个大型解决方案，如果我执行“解决结果”，可能需要几分钟才能解决结果。当我执行下一个“查找所有参考”时，之前的结果就会消失。有什么办法可以保留它们 - 只是折叠 - 并在下面添加新结果等等......无论如何，有一个“清除所有”功能来清除窗口......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-10-18T21:01:56.183

在新的[Visual Studio "15" Preview 5 版本](https://blogs.msdn.microsoft.com/visualstudio/2016/10/05/announcing-visual-studio-15-preview-5)中，我们修改后的 Find All References 窗口支持这一点。按下 Find All References 窗口工具栏中的挂锁图标/按钮（工具提示“Lock Results”），Visual Studio 将锁定该窗口中的结果，因此您进行的下一个 Find All References 调用将为结果。如果您愿意，可以将新工具窗口与之前的结果集并排放置。我们将在以后的版本中改进此按钮的标签。

# c# - “序列不包含匹配元素”，而不仅仅是 null

> ID：14758786
> 
> 赞同：0
> 
> 时间：2013-02-07T18:55:48.460
> 
> 标签：c#, linq

`myCollection`不包含带有的元素`Id == 10`：

```
var myVar1 = myCollection.Where(q => q.Id == 10); 
```

在上述情况下，`myVar1`仅代表空集合。

但是为什么在下面的例子中我得到一个***序列不包含匹配元素***异常而不是仅仅`null`在`myVar2`？

```
var myVar2 = myCollection.First(q => q.Id == 10); 
```

如何正确解释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T18:57:35.947

如果您想要第一个匹配项，请使用，如果没有，请使用[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb358452.aspx)null。

```
var myVar2 = myCollection.FirstOrDefault(q => q.Id == 10); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T18:57:48.853

因为`First()`期望返回一个且只有一个结果。它并不意味着处理一个或没有结果。

你需要`FirstOrDefault()`那个。

# unix - 将文件名合并到一个文本文件中

> ID：14758787
> 
> 赞同：0
> 
> 时间：2013-02-07T18:55:52.517
> 
> 标签：unix, merge

我有 8 个文件需要合并到一个文本文件中，每个文件名都在单独的行上。

输出应如下所示：

```
file.txt:

output1/transcripts.gtf
output2/transcripts.gtf
output3/transcripts.gtf 
```

等等...

我已经阅读了其他一些建议，我知道这应该很容易解决。我已经尝试过`dir`，`awk`但只得到了将所有文件放在一行中的结果。我正在使用 unix。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:59:58.653

这个怎么样？

```
 ls -1 output*/*.gtf > file.txt 
```

或者如果您的子目录的嵌套更深，并且您想要所有名称以“.gtf”结尾的文件：

```
 find . -type f -name "*.gtf" -print | cut -b 3- > file.txt 
```

# mysql - 使用 AVG 对 mysql 查询的排名结果

> ID：14758789
> 
> 赞同：0
> 
> 时间：2013-02-07T18:55:55.170
> 
> 标签：mysql

我有一个查询在 MySQL 中对结果进行排名：

```
SET @rank := 0;
SELECT Name, Score, @rank := @rank + 1 
FROM Results 
ORDER BY Score 
```

在我尝试将排名基于平均分数之前，这很好用：

```
SET @rank := 0;
SELECT Name, AVG(Score) as AvScore, @rank := @rank + 1 
FROM Results 
ORDER BY AvScore 
```

如果我运行它，由于 AVG，我只会得到一条记录。但是，如果我在 Name 上添加一个 GROUP BY 以便我可以列出每个人的平均值，这会影响正确的排名。

我知道答案可能正盯着我看，但我不太明白。如何根据平均结果为每个名称输出排名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:57:53.887

您需要使用子查询：

```
SET @rank := 0;

SELECT a.name, 
       a.avscore, 
       @rank := @rank + 1 
FROM   (SELECT name, 
               Avg(score) AS AvScore 
        FROM   results 
        GROUP  BY name) a
ORDER  BY a.avscore 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:02:54.183

您必须先订购，然后从派生表中选择排名：

```
SELECT Name, AvScore, @rank := @rank + 1
FROM (
    SELECT Name, AVG(AvScore) AS AvScore FROM Results 
    GROUP BY Name ORDER BY AVG(AvScore)
) t1, (SELECT @rank = 0) t2; 
```

# meteor - 车把：如何访问数组？

> ID：14758793
> 
> 赞同：4
> 
> 时间：2013-02-07T18:56:18.690
> 
> 标签：meteor, handlebars.js

我有以下简化文件：

```
{
    channel:'Channelname',
    users: [
        {userId:1},
        {userId:2},
        {userId:3}
    ]
} 
```

我怎样才能`{{#each}}`像这样在循环中访问 userId：

```
{{#each channels}}
    {{channel}}
    {{#each channels.users}}
        {{userId}} //or {{channels.users.userId}} ?
    {{/each}}
{{/each}} 
```

第一个`{{#each}}`循环按预期打印我的频道名，但第二个`{{#each}}`循环不打印任何内容。

问候，西德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:05:14.107

采用

```
{{#each channels}}
    {{channel}}
    {{#each users}}
        {{userId}}
    {{/each}}
{{/each}} 
```

当进入每个循环时，把手将直接使用数组中的键名。

# sql - 如何在 Oracle 中存储 ascii 字符并在网页中正确显示？

> ID：14758794
> 
> 赞同：1
> 
> 时间：2013-02-07T18:56:20.047
> 
> 标签：sql, database, oracle, web-applications, ascii

我们对数据库中的一些文本进行数据驱动，例如产品名称等。最近我们的营销团队要求我们显示带有特殊字符的产品名称，例如注册商标符号®、ascii 代码 174。

我的问题是，我们如何才能最好地将这个字符存储在我们的数据中，以便它以 HTML 和非 HTML 格式正确显示？起初，我们尝试了这样的事情：

```
update products_table set display_name = 'FooCorp' || chr(174) || ' Awesome Product' where product_id = 1; 
```

当我在 TOAD 中查询该产品时，注册商标符号正确显示，但是当我们尝试在我们的 web 应用程序中查询和显示该文本时，Firefox 和 IE 都不知道如何显示它。两者都显示“带 ? 的钻石” 符号代替。

接下来，我们这样做了：

```
update products_table set display_name = 'FooCorp&#174 Awesome Product' where product_id = 1; 
```

...这让我们的 webapp 很开心，但当然，任何试图显示产品列表的非 HTML（例如：生成报告的 SQL 查询）现在都会在名称中显示 HTML 字符。

有人对我们如何同时满足 HTML 和非 HTML 世界有任何想法吗？理想情况下，我们希望避免使用重复文本的单独列，但如果这真的是唯一的方法，我们可以走这条路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:09:51.290

好吧， chr(174) 在 Oracle 中可能意味着 smth，但是当涉及到 Web 浏览器时，它们可能具有 diff char。设置等...我不确定，但也许您只是将该字符硬编码到您的查询中：

```
 SELECT 'FooCorp® Awesome Product' FROM dual; 
```

# html - PIE.htc hack 在电子邮件中有效吗？

> ID：14758796
> 
> 赞同：0
> 
> 时间：2013-02-07T18:56:27.350
> 
> 标签：html, css, email, css3pie

我的任务是创建一个坚如磐石的电子邮件框架，为 Apple Mail 和 Sparrow 等客户端推动现代 Web 开发和设计模式，但优雅地降低 Yahoo!、Gmail、Hotmail 等。

包括[PIE.htc hack](http://css3pie.com/)是否适用于较旧的电子邮件客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:05:04.800

不，它不起作用，因为 .htc 文件需要由托管页面的 Web 服务器提供。虽然电子邮件包含 HTML，但不是网页。

# java - 如何在 JSP 的类似许多下拉框中自动选择所有不同的选项

> ID：14758797
> 
> 赞同：-1
> 
> 时间：2013-02-07T18:56:32.213
> 
> 标签：java, javascript, html, jsp, select

[请看这个图像视图，我到底想要做什么......](https://docs.google.com/file/d/0B0Btk6AnUQzdTDAwaWRyZmROWDg/edit?usp=sharing)

```
<%
for(;IteratorOfList.hasNext();)
{
String optionValue = IteratorOfList.next();
%>

<select id='1'>
<option value="Aunt">Aunt</option>
<option value="Brother">Brother</option>
<option value="Brother in law">Brother in law</option>
<option value="Cousin">Cousin</option>
<option value="Doughter">Doughter</option>
</select>
<%}%> 
```

在上面的代码中，假设 for 循环运行了 3 次，因此我们得到了三个选择框，所以我的问题是如何在我从数据库中获取的所有这三个选择框中选择选项，并且所有三个值都绑定在请求对象中只是为了在这些选择中选择三个不同的值....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:19:15.513

我完全不明白你的问题..但我尽力了..

您想用字符串列表填充下拉列表。

我`Jquery`用来做这个。一旦你有了字符串数组，`javascript`你就可以遍历数组并`<option>`使用数组值创建元素并将其附加到`select`框中。

```
 $.each(relationsList, function(val, text) {
      $('#relationsDropDown').append( $('<option></option>').val(val).html(text) );
  }); 
```

根据更新的问题..我进行了更改，这是[**JSFIDDLE**](http://jsfiddle.net/7ZEbX/4/)

# rest - 如何使用用户密钥和秘密生成 oauth 令牌

> ID：14758799
> 
> 赞同：0
> 
> 时间：2013-02-07T18:56:39.723
> 
> 标签：rest, oauth

我正在尝试从 REST API 获取数据，他们还没有完全实现 OAuth。一旦您已经拥有访问令牌，他们只会使用 OAuth 使用的签名方法。我已获得消费者密钥和秘密以及用户密钥和秘密。现在我不确定如何使用用户密钥和秘密生成 oauth 令牌。

你能建议怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:15:59.730

如果您查看[OAuth.net 站点](http://oauth.net/code/)，他们有一个代码部分，其中为您指出了用于实现 OAuth 的各种语言的多个框架。大多数（如果不是全部）框架都有示例，您可以按照这些示例来了解如何使用其框架设置 OAuth 调用。

# .net - 如何最好地处理应该按顺序运行的文本替换？

> ID：14758809
> 
> 赞同：2
> 
> 时间：2013-02-07T18:57:03.217
> 
> 标签：.net, sorting, collections, dictionary, tuples

通常，当我们有一个模板文件和一些要运行的文本替换时，我们创建一个`Dictionary<string,string>`看起来像这样的：

```
Dictionary<string,string> substitutions = new Dictionary<string, string>
{
    {"{firstname}", customer.FirstName },
    {"{lastname}", customer.LastName },
    {"{address}", "your address" },
    {"{siteurl}", _siteUrl },
};

if (customer.Address != null)
{
    substitutions["{address}"] = customer.GetAddress();
} 
```

等等。然后我们可以做类似的事情：

```
email.Body = substitutions.Aggregate(template,
    (current, sub) => current.Replace(sub.Key, sub.Value)); 
```

获取替换的模板。

我今天遇到了一种情况，我需要确保换人以特定的顺序进行。

现在我可以确保它们`Dictionary`以正确的顺序放入，并希望它们枚举的任意顺序保持该顺序 - 我从未见过 a`Dictionary`以其他顺序枚举，但 an 的顺序`ICollection`不是保证。

所以让我感到震惊的是，做这样的事情会很有用（在哪里`i++`被用作“任何价值”的占位符：

```
SomeCollection<string,string,int> substitutions
    = new SomeCollection<string, string, int>
{
    {"{firstname}", customer.FirstName, i++ },
    {"{lastname}", customer.LastName, i++ },
    {"{address}", "your address", i++ },
    {"{siteurl}", _siteUrl, Int32.MaxValue }, // this should happen last
};

if (customer.Address != null)
{
    substitutions["{address}"] = customer.GetAddress();
} 
```

我可以通过`IComparer`某种方式对`int`价值进行排序。

但后来我试图弄清楚如何制作这样一个集合，并且在尝试编写由 a 支持的东西失败之后`Dictionary<string, Tuple<int, string>>`，我决定我的代码的优雅不值得它给我带来的压力（考虑到最后期限等） on) 并且我可以在通话`.Replace("{siteurl}", _siteUrl)`结束时添加`Aggregate`

但让我烦恼的是，我已经放弃了本来可以很优雅的东西。我遇到的问题（除了试图让 a`Dictionary<string, Tuple<int, string>>`成为一个实现`ICollection<KeyValuePair<string,string>>`并弄清楚如何实现这些`GetEnumerator`方法，同时尽量不强调截止日期）是我想要以下内容：

*   使用上面的对象初始化器语法简单地声明它的能力。
*   通过键获取和设置成员的能力（因此支持 a `Dictionary<string, Tuple<int, string>>`）。
*   有一个`foreach`循环按顺序拉出东西的能力`int`。
*   `int`如果我不关心该项目的排序位置，则无需指定添加（或初始化）项目的能力。
*   使用相对简洁的方法执行替换的能力，例如`Aggregate`上面的调用（可能传入`IComparer`我没有写到的内容）。

我被困住的是`GetEnumerator`实现和我没有记住[索引器重载](http://msdn.microsoft.com/en-gb/library/2549tw02.aspx)并不困难。

你将如何实现这样的要求。我是在正确的轨道上还是我忽略了一些更优雅的东西？我应该坚持 a`Dictionary<string,string>`并想出一些方法在开头或结尾插入新项目 - 或者如果我不关心那个项目，就在中间插入？

我只是没有得到什么漂亮、优雅的解决方案？您将如何满足这种需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:35:52.377

似乎您可以只使用 LINQ 按替换顺序排序，然后枚举。例如，如果你有你的`Dictionary<string, Tuple<string, int>>`，它看起来像：

```
Dictionary<string, Tuple<string, int>> subs = new Dictionary<string, Tuple<string, int>>
{
    {"{firstname}", Tuple.Create(customer.FirstName, i++) },
    {"{lastname}", Tuple.Create(customer.LastName, i++) },
};

// Now order by substitution order
var ordered =
   from kvp in subs
   orderby kvp.Value.Item2
   select kvp;
foreach (var kvp in ordered)
{
    // apply substitution
} 
```

顺便说一句，`Dictionary<TKey, TValue>`不保证枚举将按照添加的顺序返回项目。我似乎记得在某个时候指望订单而被烧毁，但它可能是其他一些集合类。在任何情况下，指望无证行为只是要求出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:12:53.807

[为什么 .Net 字典中的条目要另外排序？](https://stackoverflow.com/questions/154307/why-are-entries-in-addition-order-in-a-net-dictionary)

这个问题可能会对您有所帮助 - 在当前版本的 .NET 中迭代字典的键将按顺序返回键，但由于合同不保证这一点，它可能会在未来的 .NET 版本中发生变化。如果这让您担心，请继续阅读。如果没有，只需遍历字典。

在我看来，最简单的解决方案是坚持你的`Dictionary<string, string>`方法并维护一个单独的`List<string> substitutionOrder`. 遍历此列表，并使用这些值索引到您的字典中。

```
email.Body = substitutionOrder.Aggregate(template,
    (current, sub) => current.Replace(substitutions[sub].Key, substitutions[sub].Value)); 
```

# tfs - tfs api 中的 IsBranch 始终为 false

> ID：14758810
> 
> 赞同：2
> 
> 时间：2013-02-07T18:57:12.230
> 
> 标签：tfs

我正在使用 tfs api，并且需要检查提供的路径是否是 tfs 分支

我会保留完整的代码，但它归结为

```
m_VersionControlServer.GetItem(source).IsBranch 
```

无论出于何种原因，这总是返回 false。我是错过了什么还是只是坏了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:13:29.093

您需要调用`GetItem()`具有[`GetItemsOptions`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.getitemsoptions.aspx)参数的重载之一并传入`GetItemsOptions.IncludeBranchInfo`.

例如：

```
var isBranch = 
    m_VersionControlServer.GetItem(
         path: source
         version: VersionSpec.Latest,
         deletedState: DeletedState.NonDeleted,
         options: GetItemsOptions.IncludeBranchInfo).IsBranch; 
```

# javascript - Kendoui 模板错误

> ID：14758814
> 
> 赞同：0
> 
> 时间：2013-02-07T18:57:27.940
> 
> 标签：javascript, kendo-ui

得到一个未捕获的错误：无效的模板：来自这个 kendoui 模板。我在这里想念什么？

```
<script type="text/x-kendo-template" id="listviewProxiesTemplate">
   <div data-mrn=${Mrn}><label>${DisplayText}<input name="account" type="radio"  #if(# ${IsActive} # =='true'){# checked="checked" #}# /></label></div>
</script> 
```

我想将单选按钮设置为检查 Json 对象 IsActive 属性是否为真......

谢谢！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:20:32.547

看起来我正在逃避 IsActive 属性，我不需要。这个更新的模板对我有用。

```
<script type="text/x-kendo-template" id="listviewProxiesTemplate">
   <div data-mrn=${Mrn}><label>${DisplayText}<input name="account" type="radio"  #if(IsActive){# checked="checked" #}# /></label></div>
</script> 
```

# c# - 如何在泛型类 c# 中使用 where 运算符？

> ID：14758815
> 
> 赞同：6
> 
> 时间：2013-02-07T18:57:33.617
> 
> 标签：c#, generics, operator-keyword, generic-constraints

嗨，我想上课：

```
class Matrix <T>
    where T : // I don't know what to write here
{
    T[][] elements;
} 
```

我希望 T 可以被 + 和 * 运算符相加和相乘

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:45:42.227

我强烈建议您查看 Messrs Skeet 和 Gravell 的“MiscUtil”库：

[http://www.yoda.arachsys.com/csharp/miscutil/](http://www.yoda.arachsys.com/csharp/miscutil/)

其中包含一个令人难以置信的“通用数学运算符”实现，它应该与您创建通用矩阵数学类的尝试很好地对齐。它实际上让我（有点）想起了 python 以及它如何处理直接引用运算符函数。

（除了@jon-skeet：这有没有机会进入 Nuget？）

他们的测试中的一些示例用法：

```
double sumOperator = 0;
for (int i = 0; i < COUNT; i++)
{
    sumOperator = Operator.Add(sumOperator, rand.NextDouble());
}

int sumOperator = 0;
for (int i = 0; i < COUNT; i++)
{
    sumOperator = Operator.Add(sumOperator, rand.Next(MAXVALUE));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:54:23.833

这是不可能的，因为不受约束的泛型类型被假定为 type `Object`，它没有定义算术运算符。因此，您似乎需要指定一个接口。

但是，原始类型（Int32、Double 等）将算术运算有效地定义为静态方法（实际上编译器对其进行了特殊处理并生成内联代码）并且 C# 中的接口无法定义静态方法（尽管 CLR 的设计实际上允许）。因此，没有用 C# 编写满足支持算术运算要求的接口；即使可以编写，原始类型也不会继承它，所以它仍然无法工作。

最终结果是无法在 C# 中做你想做的事。

如果你尝试它，你会得到一个类似的错误

```
Operator '+' cannot be applied to operands of type 'T' and 'T' 
```

如果您对此消息进行网络搜索，您会发现关于可能的解决方法的各种讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T19:32:53.203

可能这种方式会对某人有所帮助。您可以通过在 fabric-library 类中放置 add、multiplicate 函数来改进这一点。

**更新** 可能会将来自 JerKimball 帖子的操作员放入辅导员

```
class Matrix <T>
{
    T[][] elements;

    public Matrix(Func<T, T, T> add, Func<T,T,T> multiplicate)
    {
        this.Add = add;
        this.Mult = multiplicate;
    }

    public Matrix<T> operator +(Matrix<T> p1, Matrix<T> p2)
    {
        // correct this
        var t = Add(p1.elements[0][0], p2.elements[0][0]);
        return this;
    }

    public Matrix<T> operator *(Matrix<T> p1, Matrix<T> p2)
    {
        // correct this
        var t = Mult(p1.elements[0][0], p2.elements[0][0]);
        return this;
    }

    private Func<T, T, T> Add { get; set; }

    private Func<T, T, T> Mult { get; set; }
}

static void Main(string[] args)
{
    var m1 = new Matrix<int>((x,y) => x + y, (x,y) => x * y);
    var m2 = new Matrix<int>((x, y) => x + y, (x, y) => x * y);
} 
```

**更新 2**

只需提供对这样的属性的访问：

```
 public T[][] Elements { get; set; } 
```

你可以这样做：

```
m1.Elements[0][0] = 10;
var m3 = new Matrix<int?>((x, y) => x + y, (x, y) => x * y);
m3.Elements[0][0] = null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T19:10:05.913

由于我不知道任何内置解决方案，请查看：

```
public abstract class BaseClass
{
    public static BaseClass operator +(BaseClass p1, BaseClass p2)
    {
        return p1 + p2;
    }

    public static BaseClass operator *(BaseClass p1, BaseClass p2)
    {
        return p1 * p2;
    }
}

public class ChildClass : BaseClass
{
}

public class Matrix <T> where T : BaseClass
{
    T[][] elements;
} 
```

希望这可以帮助。

**但是**`int`，不支持其他类型，例如。

# kernel - 我可以在软件级别针对 HDCP 做些什么吗？

> ID：14758816
> 
> 赞同：2
> 
> 时间：2013-02-07T18:57:35.770
> 
> 标签：kernel, hdmi, dvi, hdcp

我将我的安卓平板电脑（mini-HMDI）连接到我的显示器（DVI），我得到：

*   奇怪的颜色
*   未对齐的图像
*   错误信息

[http://postimage.org/image/5tdvmb5pz/](http://postimage.org/image/5tdvmb5pz/)

我在当地电子商店的一台带 hdmi 端口的新花式电视上测试了这款平板电脑，效果很好。我还通过 dvi 用台式电脑测试了显示器，效果很好。

所以我怀疑（在阅读后）高带宽数字内容保护是有罪的。所以我的显示器（1920x1080、DVI、VGA）可能不支持 HDCP。而且由于平板电脑认识到这一点，它会故意发送质量差的图像（当然没有加密，但很烦人）。

请注意，我不想播放任何受保护/加密/受版权保护的内容，只是浏览网页、阅读电子邮件等。

是否可以在软件（Linux 内核）中完成任何操作，以便平板电脑可以与该显示器一起使用？

（我在一些论坛/博客文章中读到 HDCP 纯粹是硬件驱动的，软件堆栈甚至都无法意识到这一点。这是真的吗？我有没有办法耦合这些其他兼容的设备？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:31:35.210

如果它是 HDCP，我原以为你不会得到任何图像，因为它是一个加密通道 - 没有加密提要的解密 = 没有可用的图像，而不仅仅是一个不太完美的图像。

使用 HDCP，提要在到达电视/监视器之前应该保持加密状态。我不希望找到一个软件解决方案 - 软件可以指示需要 HDCP，但如果没有 root 访问权限，没有其他软件可以覆盖另一部分，说不加密输出。我希望输出通常是未加密的，并且只有在软件需要时才加密 - 例如，我的桌面通过 HDMI 正常输出到 DVI 上就好了，但不会使用捆绑软件播放蓝光，因为这需要 HDCP .

无论如何，HDCP 解密单元并不常见 - 购买便宜的 Android 笔记本电脑几乎肯定会便宜得多，它安静且足以用于一些基本的网上冲浪、电子邮件等。

# python - 计算前 1000 个阶乘的累积和？

> ID：14758821
> 
> 赞同：1
> 
> 时间：2013-02-07T18:57:39.860
> 
> 标签：python, function, sum

我之前也问过类似的问题，但这有点不同。以下是我的锻炼。我得到的答案与我使用 python 的内置函数得到的答案不符。请指教我做错了什么，我相信内置函数的答案必须是正确的。

我的锻炼：

```
def fact_cum(n):
    f = 1
    for x in range(1, n +1):
        f *= x
    print f

fact_cum(1000) 
```

* * *

Python的内置函数：

```
import math
def cumFact(): 
    x = sum(math.factorial(f) for f in range(1000))
    print x

cumFact() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:02:07.147

您的阶乘函数永远不会返回任何内容。将其更改`print`为`return`：

```
def fact(n):
    f = 1

    for x in range(1, n +1):
        f *= x

    return f 
```

现在你可以总结一下：

```
sum(fact(n) for n in range(1, 1000 + 1)) 
```

由于您使用的是 Python 2，因此请使用`xrange`而不是`range`. `range`在内存中创建一个列表，而`xrange`只是创建一个迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:24:27.443

首先，每个人都指出了一个主要问题：您实际上并没有对阶乘求和，甚至没有返回可以传递给的值，`sum`您只是打印出阶乘。

但即使你解决了这个问题，你实际上也不会计算`sum(math.factorial(i) for i in range(1000))`，而是`sum(math.factorial(i) for i in range(1, 1001))`。如果你想要前者，你需要从 0! 开始，而不是 1!。

正如 mgilson 指出的那样，您不需要对每个阶乘重新开始。进行累积阶乘的全部意义在于您可以同步累积阶乘和总和，因此您只需要生成每个阶乘一次：

```
import itertools

def factorials():
    fact = 1
    for i in itertools.count(1):
        yield fact
        fact *= i

def cum_factorials():
    cum = 0
    for fact in factorials():
        cum += fact
        yield cum

def cum_factorial(n):
    cf = cum_factorials()
    consume(cf, 1000)
    return next(cf) 
```

（这需要来自[recipes](http://docs.python.org/2/library/itertools.html)`consume`的函数，或者从…导入的函数，或者应该很明显如何自己编写它。）[`itertools`](http://docs.python.org/2/library/itertools.html)[`more-itertools`](http://packages.python.org/more-itertools/api.html)

* * *

显然，您不需要通过生成无限的累积阶乘列表并选择第 n 个来做到这一点，但这会阻止 Haskell 程序员嘲笑您选择的语言，这不是真正重要的吗？

更严重的是，想象一下你将如何在纸上做到这一点。首先，你要写下一个阶乘列表：

```
1
1 * 1 = 1
1 * 2 = 2
2 * 3 = 6
6 * 4 = 24
... 
```

然后，您将在旁边写另一列，总结到目前为止的阶乘。

```
1             1
1 * 1 = 1     1 + 1 = 2
1 * 2 = 2     2 + 2 = 4
2 * 3 = 6     4 + 6 = 10
6 * 4 = 24    10 + 24 = 34
24 * 5 = 120  34 + 120 = 154
...           ... 
```

那么，你如何在 Python 中做同样的事情呢？

好吧，一种选择是将算法重组为可以按顺序编写的内容，如下所示：

```
def cum_fact(n):
    cumulative_sum = 1
    latest_factorial = 1
    for i in range(1, n):
        latest_factorial *= i
        cumulative_sum += latest_factorial
    return cumulative_sum 
```

但这实际上比你在纸上做的更难理解，也更容易出错。

另一种方法是弄清楚如何让 Python 完成你在纸上所做的事情：取一个无限序列`(1, 2, 3, 4, …)`，对那个序列迭代地应用一个简单的变换`*=`来得到一个新的序列`(1, 1, 2, 6, 24, …)`，然后对那个序列迭代地应用另一个简单的变换`+=`来得到一个新的序列`(1, 2, 4, 10, 34, …)`. 然后，您只需要该序列中的第 1001 个值，所以……扔掉前 1000 个并取下一个。

`itertools.count(1)`给你第一个序列`(1, 2, 3, …)`。你可以这样写：

```
def count(n):
    while True:
        yield n
        n += 1 
```

那是一个生成器函数。我不认为我可以在一段中解释整个概念，但这是基本思想：它不是返回一个值，而是产生一个值序列。每次点击`yield`，调用者都会得到一个值。每次你要求下一个值时，它都会从它剩下的地方拾起，直到下一个`yield`。如果您在交互式解释器中使用这个想法一段时间，也许它会立即到位 - 但是，更好的是，您可能想在谷歌上搜索教程。

接下来，虽然您可以使用折叠函数应用每个转换，但这可能有点太高级了，无法考虑，所以我使用另外两个生成器函数明确地写出来。

最后，它`consume`本身有点不同——它不是一个生成器，而是一个接受和修改迭代器的函数，如下所示：

```
def consume(iter, n):
    for i in range(n):
        next(iter) 
```

所以，如果有`[1, 2, 3, 4, 5, 6, …]`，而你`consume`是前 3 个元素，你会得到`[4, 5, 6, …]`.

# php - Mysql 使用 If 语句移动到下一列

> ID：14758823
> 
> 赞同：1
> 
> 时间：2013-02-07T18:57:42.433
> 
> 标签：php, mysql, phpmyadmin

我想更新一个 MySQL 表。使用更新功能。

我的专栏是：

```
time_started, time_in_1, time_in_2, time_in_3. 
```

我想要的是 where `time_started`is not null 然后移动到下一列，但如果`time_in_1`也不为 null 移动到下一列，依此类推。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:38:00.137

首先让我说这似乎是一个非常奇怪（而且不是很可扩展）的表结构。所需的 SQL 并不是很漂亮，我会说将它扩展到几列之外不会让任何人高兴:)

也就是说，这应该做你想做的；

```
SET @value := '2001-01-01';

UPDATE myTable SET
  time_in_3 =    IF(time_started IS NOT NULL AND
                    time_in_1    IS NOT NULL AND
                    time_in_2    IS NOT NULL AND
                    time_in_3    IS NULL, @value, time_in_3),
  time_in_2    = IF(time_started IS NOT NULL AND
                    time_in_1    IS NOT NULL AND
                    time_in_2    IS NULL, @value, time_in_2),
  time_in_1    = IF(time_started IS NOT NULL AND
                    time_in_1    IS NULL, @value, time_in_1),
  time_started = IF(time_started IS NULL, @value, time_started)
WHERE id=1; 
```

[一个展示它的 SQLfiddle](http://sqlfiddle.com/#!2/b149c/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:59:58.153

```
UPDATE table 
  SET time_started = IFNULL(time_started, newValue, time_started), 
       time_1 = IFNULL(time_1, newValue, time_1),
       time_2 = IFNULL(time_2, newValue, time_2); 
```

这会将每列设置为 newValue if `NULL`，否则保留其原始值。

# javascript - 使用 SVG 作为渲染器的 GUI 库？

> ID：14758832
> 
> 赞同：9
> 
> 时间：2013-02-07T18:58:10.373
> 
> 标签：javascript, user-interface, svg

我最近不得不使用 SVG（基于 Dojo）实现一些小部件，例如 Button、Checkbox、Toggle-Button，我现在面临更多小部件：组合框、列表等等。结果给我留下了深刻的印象，尤其是在所有浏览器中工作的小部件的精度。与使用 jQuery 和朋友完成的经典 GUI 实现相比，这对我来说是一个巨大的差异......

那时周围什么都没有，我很好奇为什么还没有人触及这个话题。使用 SVG 作为渲染器是错误的方式还是只是太早了？

但是，我当然有兴趣从现有项目中受益或做出贡献，但是有没有正在进行的项目？

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T19:22:51.260

终于有人做了正确的一步： http: [//www.dotuscomus.com/pergola/index.html](http://www.dotuscomus.com/pergola/index.html)

# vb.net - “一维数组”类型错误的值

> ID：14758836
> 
> 赞同：1
> 
> 时间：2013-02-07T18:58:22.263
> 
> 标签：vb.net, visual-studio-2010, wcf, object

我正在创建一个 WCF 服务，服务中的一项是一个名为 County 的枚举类，其中包含该州的县列表。另一个项目是一个名为 Person 的 Object 类，它使用此 Enum 的数组（出于业务原因，需要一个数组，而不仅仅是一个县。）这不是我正在使用的此服务中唯一的数组，但其他数组涉及其他对象，而不是枚举，并且工作得很好。

我收到以下错误：

`Value of type '1-dimensional array of type LAService.County' cannot be converted to '1-dimensional array of type LAService.County?' because 'LAService.County' is not derived from 'County?'`.

有什么`'?'`用？由于使用了错误的类型，我之前曾发生过此错误，但问号是新事物。我如何克服这个错误？

我的代码：

```
Public Enum County
   Acadia
   Allen
   Ascension
   ...and on and on...
End Enum

<DataContract>
Public Class Person
   <DataMember()>
   Public ServiceCounty() As Nullable(Of County)
   ...and on and on...
End Class

Public Function FillPerson(ds as DataSet) As Person
   Dim sPerson as Person
   Dim iCounty as Integer = ds.Tables(0).Rows(0)("COUNTY")
   Dim eCounty As String = eval.GetCounty(iCounty)     'This evaluates the county number to a county name string
   Dim sCounty As String = DirectCast([Enum].Parse(GetType(County), eCounty), County)
   Dim counties(0) As County
   counties(0) = sCounty
   sPerson = New Person With{.ServiceCounty = counties}
   Return sPerson
End Function 
```

`sPerson = New Person With{.ServiceCounty = counties}`在我构建代码之前，Visual Studios在单词 ' '的 ' ' 行显示上述错误`counties`。同样，我使用的所有其他数组都是以相同的方式创建的，但使用对象而不是枚举。我已经尝试将我的更改`Dim sCounty as String`为，`Dim sCounty As County`但我得到了同样的错误。我也试图摆脱这`DirectCast`条线，只是使用`Dim sCounty As County = County.Acadia`并仍然得到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:17:33.260

是的`?`简写`Nullable(Of T)`。例如，`Dim x As Nullable(Of Integer)`与 的含义相同`Dim x As Integer?`。因此，您可以通过更改此行来修复它：

```
Dim counties(0) As County 
```

对此：

```
Dim counties(0) As Nullable(Of County) 
```

或者，更简洁地说，这个：

```
Dim counties(0) As County? 
```

# javascript - jQuery幻灯片图像转换

> ID：14758838
> 
> 赞同：4
> 
> 时间：2013-02-07T18:58:35.787
> 
> 标签：javascript, jquery, jquery-animate, slideshow

我的 jQuery 幻灯片有问题，我似乎无法弄清楚。在图像转换过程中，幻灯片会闪烁白色，而不是很好地淡入下一张图片。我相信这与以下代码行有关：

```
$('#slideshow img:first').fadeOut(1000).next().fadeIn(1000).end().appendTo('#slideshow'); 
```

单击上一个和下一个按钮会导致相同的问题。

[这是](http://jsfiddle.net/nyXUt/)幻灯片的 jsFiddle。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:26:40.983

我已经重构了您的代码并将其发布在这里：

**[http://jsfiddle.net/salman/nyXUt/44/](http://jsfiddle.net/salman/nyXUt/44/)**

主要变化如下：

**白色闪光解决方法**：您正在使用淡出和淡入。当两个动画一起启动时，两个图像在某一点变得 50% 透明，并且幻灯片显示为白色（或背景颜色）。我使用了另一种方法。使用 z-index，我将“隐藏”图像放在“显示”图像前面，然后淡出“隐藏”图像：

```
#slideshow .current {
    display: block;
    z-index: 1;
}
#slideshow .animate {
    display: block;
    z-index: 2;
} 
```

```
nextItem.addClass("current");
prevItem.removeClass("current").addClass("animate").fadeOut(animDuration, function () {
    $(this).removeClass("animate").css("display", "");
}); 
```

**setInterval vs setTimeout**：我使用 setTimeout 而不是 setInterval，它可以更好地控制时间。当用户使用 prev/next 按钮打断自动转换时，会重新安排自动转换。

**动画时间**：我添加了回调和[`.stop()`](http://api.jquery.com/stop/)动画以防止动画重叠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:23:24.407

您必须在开始淡出当前图像之前显示下一张图像，您还必须同时执行此操作，只需将`fadeIn(1000)`.next() 图像替换为`show()`，就像这样[http://jsfiddle.net/nyXUt /6/](http://jsfiddle.net/nyXUt/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T19:10:00.290

可能最小化`fadeOut()`, 和`fadeIn()`时间或`fadeOut(slow)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T15:09:46.260

当您单击下一个或上一个时，您应该停止间隔和上一个动画，即：

```
clearInterval(run);
$('#slideshow img').stop(); 
```

当下一张图像的淡入完成后，您重新启动间隔，即：

```
$('#slideshow img:last').fadeIn(1000, function() { run=setInterval("switchSlide()", speed);}) 
```

*编辑：* 如果您在一秒钟内单击开关按钮 10 次。大约 20 个动画将同时运行。

*编辑：* 如果您在图像切换（自动或其他方式）时单击下一个或上一个并且淡化已经在进行中，淡化将在整个效果的时间跨度内从几乎淡化到完全淡化（所以 1 秒） . 在这个时候，图像将大部分是白色的。

最好更快地设置手动切换的淡出（比如 300 毫秒甚至更少）。这也将改善用户体验。

*编辑：* 这是[小提琴](http://jsfiddle.net/pCCgc/8/)

这是代码：

```
var speed = 4000;
run = setTimeout("switchSlide()", speed);
$(document).ready(function() {

    $('#caption').html($('#slideshow img:last').attr('title'));

    $('#previous').click(switchBack);
    $('#next').click(switchSlide);

});

function switchSlide() {
    clearInterval(run);
    $('#slideshow img').stop(true,true);
    var jq=$('#slideshow img');
    jq.first().css({'opacity':0}).appendTo('#slideshow').animate({'opacity':1}, 1000, function() { 
        run = setTimeout("switchSlide()", speed); } );
    $('#caption').html(jq.last().attr('title'));
}

function switchBack() {
    clearInterval(run);
    $('#slideshow img').stop(true,true);
    var jq=$('#slideshow img');
    jq.last().animate({'opacity':0},1000, function() { 
        $(this).prependTo('#slideshow').css({'opacity':1}); run = setTimeout("switchSlide()", speed);});
    $('#caption').html(jq.get(1).title);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T17:17:51.533

问题是你在淡入的同时淡出。使用标准的缓动函数，中间有一个点，两个图像几乎不可见，并且在图像所在的位置留下一个空白。

为了解决这个问题，我改变了图像的顺序，以便可见图像位于堆栈顶部。现在我们可以将新图像放在当前可见图像的顶部并淡入。一旦新图像完全可见，我们就隐藏以前的图像。这使得过渡更加顺畅。

```
$('#slideshow img:first').appendTo('#slideshow');
$('#slideshow img:last').fadeIn(1000, 'swing', function() {
    $('#slideshow img:last').prev().hide();
}); 
```

这是一个jsfiddle：http: [//jsfiddle.net/nyXUt/52/](http://jsfiddle.net/nyXUt/52/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-16T11:03:14.097

您可以尝试使用（仅）适用于 jQuery 动画的延迟功能。

```
$('#slideshow img:first').fadeOut(1000).next().delay(1000).fadeIn(1000).end().appendTo('#slideshow'); 
```

但是，如果您使用此处其他评论者所述的提供的回调，这是最好的方法。

# routes - Angular.js 中的条件默认路由

> ID：14758839
> 
> 赞同：3
> 
> 时间：2013-02-07T18:58:39.420
> 
> 标签：routes, angularjs

如果 $rootScope.isAdmin==true，如何使 Angular.js 默认转到 /route1，但如果 isAdmin 为 false 或不存在 - 转到 /route2？

isAdmin 在登录控制器中设置：

```
.controller(
  'LoginController',
['$scope', '$rootScope', '$http', 'authService',
  ($scope, $rootScope, $http, authService) ->
    $scope.submit = ->
      try
        $http.post("/users/sign_in",
          user:
            email: @username
            password: @password
            remember_me: if @remember_me then 1 else 0
        ).success (response) ->
          $rootScope.isAdmin = response[0].is_admin
          authService.loginConfirmed()
      catch ex
        alert ex
]) 
```

# excel - 限制 Excel 用户窗体中的文本框条目

> ID：14758843
> 
> 赞同：1
> 
> 时间：2013-02-07T18:58:44.460
> 
> 标签：excel, vba

我正在 Excel VBA 中为简单的数据输入（即调查）构建一个用户窗体。调查采用基本的“非常不同意”到“非常同意”格式。每个受访者每个问题有 8 个选项（“1”-“5”表示一致性排名，“99”表示不适用，“88”表示受访者选择不回答）。为了提高数据输入过程的速度和准确性，我需要我的用户窗体只允许文本框中的那些整数。

我搞砸了 KeyPress，但在输入两位数时遇到了一些麻烦。这是我所拥有的：

```
Private Sub textbox1_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
Select Case KeyAscii
    Case Asc("1") To Asc ("5")
    Case Asc("88")
    Case Asc("99")
    Case Else
        KeyAscii = 0
End Select
End Sub 
```

这没问题，只是它并不完美，因为它还允许无效条目，例如“11”-“15”、“81”-“85”等等。我花了整整两个星期在互联网上寻找一些东西，但没有找到任何东西。当然，有一种简单的方法可以按照我的要求验证这些文本框，但我似乎无法弄清楚。任何帮助将不胜感激。

如果有人需要更多代码，请告诉我。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:28:42.787

如果是我，我会使用组合框，其选项仅限于您的列表。对于演示，在表单上放置几个组合框并将其添加到其代码中：

```
Private Sub UserForm_Activate()
Dim ctl As MSForms.Control
Dim cbo As MSForms.ComboBox
Dim i As Long

For Each ctl In Me.Controls
    If TypeOf ctl Is MSForms.ComboBox Then
        Set cbo = ctl
        With cbo
            .MatchRequired = True
            .Style = fmStyleDropDownList
            .AddItem "Select One"

            For i = 1 To 5
                .AddItem i
            Next i
            If Left(.Name,8)="cboType2" then
                For i = 6 To 10
                    .AddItem i
                Next i
             End If
            .AddItem 88
            If Left(.Name,8)="cboType1" then                
                 .AddItem 99
             End If

            .ListIndex = 0
        End With
    End If
Next ctl
End Sub 
```

编辑：在评论中的每个对话上方添加了“选择一个”行。

编辑 2：添加示例代码以区分两种类型`ComboBoxes`- cboType1 和 cboType2。使用这两个前缀之一命名您的组合框，代码将正确填充它们。请注意，还有其他方法可以做到这一点，例如，使用 ComboBox 的`Tag`属性。关键是能够在代码中区分它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:19:13.087

他们离开现场后只需检查值

```
Private Sub textbox1_Exit(ByVal Cancel As MSForms.ReturnBoolean)
    Dim sValue As String
    Dim bInvalid As Boolean
    bInvalid = True
    sValue = Trim(Me.textbox1.Text)
    If sValue = "1" Or sValue = "2" Or sValue = "3" Or sValue = "4" Or sValue = "5" Or sValue = "99" Or sValue = "88" Then
        bInvalid = False
    End If
    If bInvalid Then
        MsgBox "Please enter a valid value"
    End If
End Sub 
```

根据您最近的评论，这是一个使用提交按钮进行验证的解决方案（commandbutton1）。在 click 方法中，它循环遍历控件并检查它是否是文本框，如果是，则传递要验证的文本框。如果验证失败，它会将焦点设置回控件，您可能希望添加一个消息框，以便用户知道它失败了。

```
Private Sub CommandButton1_Click()
Dim cntrol As Control
'loop through all the controls
For Each cntrol In Me.Controls
    'check to see if it is a textbox
    If TypeOf cntrol Is MSForms.TextBox Then
        Dim tBox As MSForms.TextBox
        Set tBox = cntrol
        'we have a textbox so validate the entry
        If validateTextBox(tBox) Then
            'did not validate so set focus on the control
            'HERE IS WHERE YOU MAY WISH TO PROVIDE A MESSAGE TO THE USER
            cntrol.SetFocus
            'release the object
            Set tBox = Nothing
            'exit as we do not need to process further
            Exit Sub
        End If
        Set tBox = Nothing
    End If
Next
End Sub

'validate a textbox's value and return true or false
Private Function validateTextBox(tb As MSForms.TextBox) As Boolean
    Dim sValue As String
    Dim bInvalid As Boolean
    bInvalid = True
    sValue = Trim(tb.Text)
    If sValue = "1" Or sValue = "2" Or sValue = "3" Or sValue = "4" Or sValue = "5" Or sValue = "99" Or sValue = "88" Then
        bInvalid = False
    End If
    'return the results
    validateTextBox = bInvalid
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-25T10:31:36.910

我的代码作为[Doug Glancys](https://stackoverflow.com/users/293078/doug-glancy)建议的扩展。该解决方案使用每个文本框的标记属性。

```
''
' Validate all textboxes in the userform
'
Private Sub Validate()
    Dim cntrol As Control
    Dim msgText As String

    'loop through all the controls
    For Each cntrol In Me.Controls
        'check to see if it is a textbox
        If TypeOf cntrol Is MSForms.TextBox Then
            Dim tBox As MSForms.TextBox
            Set tBox = cntrol
            'we have a textbox so validate the entry
            If validateTextBox(tBox, msgText) Then
                ' did not validate so set focus on the control
                ' select control
                selectControl cntrol
                MsgBox msgText, vbCritical + vbOKOnly, "Invalid Data"
                'release the object
                Set tBox = Nothing
                'exit as we do not need to process further
                Exit Sub
            End If
            Set tBox = Nothing
        End If
    Next
End Sub

''
' validate a textbox's value and return true or false
'
' tb is a textbox control
' msgText is a return variable holding the message text
'
Private Function validateTextBox(tb As MSForms.TextBox, Optional ByRef msgText As Variant) As Boolean

    ' constants for tag-information
    Const TAG_VALIDATE_OPEN = "[validate:"
    Const TAG_VALIDATE_CLOSE = "]"
    Const TAG_VALIDATE_DATA_OPEN = "{"
    Const TAG_VALIDATE_DATA_CLOSE = "}"

    ' variables
    Dim sValue As String
    Dim isValid As Boolean
    Dim pos1 As Long
    Dim pos2 As Long
    Dim vSpec As String
    Dim VSpecData() As String
    Dim VSpecDataDefined As Boolean
    VSpecDataDefined = False

    isValid = False
    sValue = Trim(tb.text)

    '
    ' analyse tag-string and get specifications.
    ' Syntax for tag is [validate:command{data1,data2,data3}]
    '
    pos1 = InStr(1, LCase(tb.Tag), LCase(TAG_VALIDATE_OPEN))
    If pos1 > 0 Then
        pos2 = InStr(pos1 + Len(TAG_VALIDATE_OPEN), tb.Tag, TAG_VALIDATE_CLOSE)
        vSpec = Mid(tb.Tag, pos1 + Len(TAG_VALIDATE_OPEN), pos2 - (pos1 + Len(TAG_VALIDATE_OPEN)))

        pos1 = InStr(1, vSpec, TAG_VALIDATE_DATA_OPEN)
        If pos1 > 0 Then
            pos2 = InStr(pos1, vSpec, TAG_VALIDATE_DATA_CLOSE)
            VSpecDataDefined = True
            VSpecData = Split(Mid(vSpec, pos1 + Len(TAG_VALIDATE_DATA_OPEN), pos2 - (pos1 + Len(TAG_VALIDATE_DATA_OPEN))), ",")
            vSpec = Left(vSpec, pos1 - 1)
        End If
    End If

    '
    ' Handle validation as specified
    '
    Select Case vSpec
        Case "numeric"
            If VSpecDataDefined Then
                On Error Resume Next
                Dim d As Double
                Dim dLower As Double
                Dim dUpper As Double

                d = CDbl(sValue)
                If Err.number <> 0 Then
                    isValid = False
                Else
                    msgText = "Zahl"
                    isValid = True
                    ' lower bound
                    If UBound(VSpecData) >= 0 Then
                        Select Case VSpecData(0)
                            Case "", "inf", "-inf"
                            Case Else
                                dLower = CDbl(VSpecData(0))
                                msgText = msgText & vbcrlf & "     >= " & dLower
                                isValid = isValid And d >= dLower
                        End Select
                    End If
                    ' upper bound
                    If UBound(VSpecData) >= 1 Then
                        Select Case VSpecData(0)
                            Case "", "inf", "-inf"
                            Case Else
                                dUpper = CDbl(VSpecData(1))
                                msgText = msgText & vbcrlf & "     <= " & dUpper
                                isValid = isValid And d <= dUpper
                        End Select
                    End If
                End If
            Else
                msgText = "Zahl"
                isValid = IsNumeric(sValue)
            End If

        Case Else
            isValid = True
    End Select

    '
    ' return :  true if invalid
    '           false if valid
    '
    validateTextBox = Not isValid

End Function

''
' common function to select a textbox and set focus to it
' even if it sits on a page of a multipage control
'
Private Sub selectControl(ByRef t As Control)
    On Error Resume Next
    With t
        .SelStart = 0
        .SelLength = Len(.text)
        .SetFocus
        Dim p
        Err.Clear
        Set p = t.Parent
        If Err.number <> 0 Then Set p = Nothing
        Do While Not p Is Nothing
            Err.Clear
            If typename(p) = "Page" Then
                p.Parent.value = p.index
            End If
            Err.Clear
            Set p = p.Parent
            If Err.number <> 0 Then Set p = Nothing
        Loop
    End With
    On Error GoTo 0
End Sub 
```

# c++ - 这可以通过静态类型来完成吗？

> ID：14758851
> 
> 赞同：0
> 
> 时间：2013-02-07T18:59:23.323
> 
> 标签：c++, c++11, static-typing, dynamic-typing

此方法尝试`std::vector<?>`根据键 ( ) 选择 ( `std::string`)，其中`?`是`int`或`float`：

```
template<typename L>
inline void EnsembleClustering::Graph::forNodesWithAttribute(std::string attrKey, L handle) {
    // get nodemap for attrKey

    auto nodeMap; // ?

    auto findIdPair = this->attrKey2IdPair.find(attrKey);
    if (findIdPair != this->attrKey2IdPair.end()) {
        std::pair<index, index> idPair = findIdPair->second;
        index typeId = idPair.first;
        index mapId = idPair.second;

        // nodemaps are in a vector, one for each node attribute type int, float, NodeAttribute
        switch (typeId) {
        case 0:
            nodeMap = this->nodeMapsInt[mapId];
            break;
        case 1:
            nodeMap = this->nodeMapsFloat[mapId];
            break;
        }

        // iterate over nodes and call handler with attribute
        this->forNodes([&](node u) {
            auto attr = nodeMap[u];
            handle(u, attr);
        });
    } else {
        throw std::runtime_error("node attribute not found");
    }

} 
```

该类的相关成员是：

```
std::map<std::string, std::pair<index, index>> attrKey2IdPair;  // attribute key -> (attribute type index, attribute map index)

// storage
std::vector<std::vector<int> > nodeMapsInt;         // has type id 0
std::vector<std::vector<float> > nodeMapsFloat;     // has type id 1 
```

这将无法编译，因为`auto nodeMap`(= `std::vector<?>`) 未初始化。但是为了初始化它，我必须在编译时知道它的类型。

也许我正在尝试的事情不能用静态类型来完成。有没有 C++ 方法来完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:43:45.843

如果您的变体数量有限（即只有 float 的向量和 int 的向量），您可以使用[`boost::variant`](http://www.boost.org/libs/variant/)它来存储它。

定义变体类型，并定义访问者结构：

```
#include "boost/variant.hpp"

//Define type
typedef boost::variant<std::vector<int>, std::vector<float>> VectorType;

struct VectorTypeVisitor : public boost::static_visitor<void>
    {
        node& m_u;

        VectorTypeVisitor(node& u) : m_u(u) { } //Pass node to visitor in constructor

        void operator()(const std::vector<int>& nodeMap) const
        {
            auto attr = nodeMap[m_u];
            handle(m_u, attr);
        }

        void operator()(const std::vector<float>& nodeMap) const
        {
            auto attr = nodeMap[m_u];
            handle(m_u, attr); //What to do if visitor applied to float
        }
    } 
```

您的代码可能如下所示：

```
template<typename L>
inline void EnsembleClustering::Graph::forNodesWithAttribute(std::string attrKey, L handle) {
    // get nodemap for attrKey

    VectorType nodeMap;

    auto findIdPair = this->attrKey2IdPair.find(attrKey);
    if (findIdPair != this->attrKey2IdPair.end()) {
        std::pair<index, index> idPair = findIdPair->second;
        index typeId = idPair.first;
        index mapId = idPair.second;

        // nodemaps are in a vector, one for each node attribute type int, float, NodeAttribute
        switch (typeId) {
        case 0:
            nodeMap = this->nodeMapsInt[mapId];
            break;
        case 1:
            nodeMap = this->nodeMapsFloat[mapId];
            break;
        }

        // iterate over nodes and call handler with attribute
        this->forNodes([&](node u) {
            boost::apply_visitor(VectorTypeVisitor(u), nodeMap);
        });
    } else {
        throw std::runtime_error("node attribute not found");
    }
} 
```

但是，传递 typeId 之类的变量来识别变量类型仍然不好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:12:05.930

这些是模板的事实与它无关。 `std::vector<std::vector<int> >`并且 `std::vector<std::vector<float> >`是两个完全不相关的类，并且行为如此。如果你真的需要这样的东西，你必须定义一个抽象基类和两个派生类，每个派生类都包装相应的 `std::vector`. 但我看不出你将如何使用它，甚至无法定义适当的抽象基类，因为向量中包含的类型渗透到了接口中。您几乎在每次通话中使用的类型也必须不同。

# ruby - Ruby 文档 "::" 与 "#"

> ID：14758853
> 
> 赞同：2
> 
> 时间：2013-02-07T18:59:28.733
> 
> 标签：ruby

我是红宝石的新手。

有人可以向我解释 Ruby 文档中为类列出的方法之前的字符之间有什么区别吗？

这是一个示例：对于 String 类，之前的字符`::`和`::new`与`::try_convert`之前的`#`方法（例如`#chomp`等）相比。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T19:01:02.343

它指定方法的“级别”。`::`对于类级别的方法，`#`对于实例级别的方法。

例如，当你看到 时，你知道你必须直接在一个类`String::new`上调用它`String`

```
s = String.new # silly example, because nobody does that. 
```

但是当你看到时`String#gsub`，你就会明白你需要一个*实例*来`String`调用这个方法。

```
String.gsub # uh-oh, won't work

s = "I like coffee"
s.gsub('coffee', 'tea') # => "I like tea" 
```

# iphone - UICollectionViewController 多线程图片加载

> ID：14758854
> 
> 赞同：0
> 
> 时间：2013-02-07T18:59:34.137
> 
> 标签：iphone, objective-c

我无法在我的视图控制器之间异步加载图像。我有一个 tableView 控制器，当您单击一行时，它会打开一个集合视图控制器。当集合视图打开时，它会挂起一段时间，因为图像是从 Internet 下载的。

我将以下代码放在collectionView:cellForItemAtIndexPath:中，但这会导致同步加载，并使程序滞后。

```
-(UICollectionViewCell *) collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath{

  static NSString *CellIdentifier = @"CollectionCell";
  CollectionCell *cell = [cv dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
  NSData *imageData = [NSData dataWithContentsOfURL:[self.theImage objectAtIndex:indexPath.row]];
  cell.itemImage.image = [UIImage imageWithData:imageData];

  return cell;
} 
```

我的问题是，我**在哪里**以及**如何**实现代码，以便集合视图在图像下载时加载空单元格（然后在下载后出现）？

我尝试使用大中央调度，但我无法弄清楚。如果有人可以帮助我指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:59:59.457

对于那种延迟加载，我总是使用：

[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

当我想在表/集合视图等中异步加载图像时，这解决了我的大部分问题。

它支持缓存已经下载的图像，只是省去了很多麻烦。

# asp.net - 从 SQL Server 的多个表中搜索和检索单词？

> ID：14758856
> 
> 赞同：1
> 
> 时间：2013-02-07T18:59:37.263
> 
> 标签：asp.net, sql, sql-server, vb.net, tsql

用户将搜索关键字传递到一个或多个数据库，并在多个表中查找每个单词并计算找到单词的行数。

所以我所做的是在这里..我在每个单词中循环从单词数组和密码这个单词到每个表并检索行数。现在我在表中搜索多个关键字和 590 时出现超时错误。因为循环关键字和多次调用表。看我的代码。

**VB.NET 代码**

```
 For Each keyword As String In keywords
    For Each lstOfSelectedTable As String In lstOfSelectedTables
        Dim words As List(Of String) = lstOfSelectedTable.Split("."c).ToList()
            If words.Count > 1 Then
               dbName = words(0)
               schema = words(1)
               tableName = words(2)
               If strKeywords.Length > 0 Then
                  dtExcel = FillData(keyword, schema, tableName, serverName, dbName)
                  If dtExcel.Rows.Count > 0 Then
                     If CType(dtExcel.Rows(0).Item(3), Integer) > 0 Then
                        ds.Tables.Add(dtExcel)
                     End If
                  End If

               End If
        End If
 Next 
```

下一个

**存储过程**

```
ALTER PROCEDURE [dbo].[sp_FindStringInTable] @stringToFind VARCHAR(100), @schema sysname, @table sysname, @dbname varchar(100)
AS 

DECLARE @sqlCommand NVARCHAR(Max) 
DECLARE @where NVARCHAR(Max)
DECLARE @columnName sysname 
DECLARE @cursor VARCHAR(8000) 

BEGIN TRY 
   SET @sqlCommand = 'SELECT '''+ @stringToFind +''' as ''Keyword'','''+@dbname +''' As ''Database'', '''+ @table +''' as ''Table'',count(*) as Count FROM [' + @dbname + '].[' + @schema + '].[' + @table + '] WHERE' 
   SET @where = '' 

   SET @cursor = 'DECLARE col_cursor CURSOR FOR SELECT COLUMN_NAME 
   FROM ' + @dbname + '.INFORMATION_SCHEMA.COLUMNS 
   WHERE TABLE_SCHEMA = ''' + @schema + ''' 
   AND TABLE_NAME = ''' + @table + ''' 
   AND DATA_TYPE IN (''char'',''nchar'',''ntext'',''nvarchar'',''text'',''varchar'')' 

  PRINT @cursor
   EXEC (@cursor) 

   OPEN col_cursor    
   FETCH NEXT FROM col_cursor INTO @columnName    

   WHILE @@FETCH_STATUS = 0    
   BEGIN    
       IF @where <> '' 
           SET @where = @where + ' OR'

       SET @where = @where + ' [' + @columnName + '] LIKE ''%' + @stringToFind + '%''' 
       FETCH NEXT FROM col_cursor INTO @columnName 
       PRINT @columnName   
   END    

   CLOSE col_cursor    
   DEALLOCATE col_cursor  

   SET @sqlCommand = @sqlCommand + @where 
   PRINT @sqlCommand 
    IF @where <> '' 
        EXEC (@sqlCommand)  
    ELSE
        RETURN 

END TRY 
BEGIN CATCH 
 SELECT 
        ERROR_NUMBER() AS ErrorNumber
        ,ERROR_MESSAGE() AS ErrorMessage;
   PRINT 'There was an error. Check to make sure object exists.' 
   IF CURSOR_STATUS('variable', 'col_cursor') <> -3 
   BEGIN 
       CLOSE col_cursor    
       DEALLOCATE col_cursor  
   END 
END CATCH 
```

我就是这样过去的。

```
 exec sp_FindStringInTable 'Application','dbo','BAK_tbl_Timeline_032112','Sui_WIP'  
 exec sp_FindStringInTable 'Application','dbo','tbl_SampleList','Sui_WIP' 
 exec sp_FindStringInTable 'Insurance','dbo','BAK_tbl_Timeline_032112','Sui_WIP'  
 exec sp_FindStringInTable 'Insurance','dbo','tbl_SampleList','Sui_WIP' 
 exec sp_FindStringInTable 'Reduced','dbo','BAK_tbl_Timeline_032112','Sui_WIP'  
 exec sp_FindStringInTable 'Reduced','dbo','tbl_SampleList','Sui_WIP' 
```

持续约 600 桌。现在我想优化存储过程。

```
exec sp_FindStringInTable 'Application;Insurance;Reduced','dbo','BAK_tbl_Timeline_032112','Sui_WIP'
exec sp_FindStringInTable 'Application;Insurance;Reduced','Person','Person','AdventureWorks' 
```

请帮助我更改此 sp 并有效运行。

**注意：用户可以通过选择多个数据库（或）服务器中的所有数据库和选择多个表（或）数据库上的所有表来传递多个单词。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:03:46.460

此查询搜索所有 db 的子字符串，其中包含带有文本字段的表。试试这个脚本，它可能会有所帮助。

```
DECLARE @phrase NVARCHAR(100)
SELECT @phrase = 'str'

DECLARE 
      @db_name SYSNAME
    , @output NVARCHAR(200)

DECLARE db CURSOR READ_ONLY FAST_FORWARD LOCAL FOR 
    SELECT d.name
    FROM sys.databases d
    WHERE d.state_desc = 'ONLINE'
        AND d.name NOT IN ('tempdb', 'model', 'msdb', 'master')
    ORDER BY d.name

OPEN db

FETCH NEXT FROM db INTO @db_name

WHILE @@FETCH_STATUS = 0 BEGIN

    SELECT @output = CONVERT(NVARCHAR(15), GETDATE(), 114) + ': Find in ' + QUOTENAME(@db_name) + ':'
    RAISERROR(@output, 0, 1) WITH NOWAIT

    DECLARE @tsql NVARCHAR(MAX) = '
    USE [' + @db_name + ']; 
    DECLARE @sql NVARCHAR(MAX)
    SELECT @sql = ''USE [' + @db_name + '];'' + (
        SELECT 
            CHAR(13) + 
                ''IF EXISTS(SELECT 1 FROM '' + 
                QUOTENAME(s.name) + ''.'' + QUOTENAME(o.name) + 
                '' WHERE'' + b.cols + '') PRINT ''''['' + 
                s.name + ''].['' + o.name + '']'''';'' 
        FROM sys.objects o
        JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
        JOIN (
            SELECT DISTINCT p.[object_id] 
            FROM sys.partitions p
            WHERE p.[rows] > 0
        ) p ON p.[object_id] = o.[object_id]
        OUTER APPLY (
            SELECT cols = STUFF((
                SELECT ''OR CHARINDEX(''''' + @phrase + ''''', '' + QUOTENAME(c.name) + '') > 0 '' 
                FROM sys.columns c
                JOIN sys.types t ON c.user_type_id = t.user_type_id
                WHERE t.name IN (''char'', ''nchar'', ''ntext'', ''nvarchar'', ''text'', ''varchar'')
                    AND c.[object_id] = o.[object_id]
                ORDER BY c.column_id
                FOR XML PATH(''''), TYPE, ROOT).value(''root[1]'', ''NVARCHAR(MAX)''), 1, 2, '''')
        ) b
        WHERE o.[type] = ''U''
            AND b.cols IS NOT NULL
        FOR XML PATH(''''), TYPE, ROOT).value(''root[1]'', ''NVARCHAR(MAX)'') 

        EXEC sys.sp_executesql @sql
    '

    EXEC sys.sp_executesql @tsql
    PRINT REPLICATE('-', 100) + CHAR(13)

    FETCH NEXT FROM db INTO @db_name

END

CLOSE db
DEALLOCATE db 
```

或者试试这个 -

```
DECLARE @char NVARCHAR(50)
SELECT @char = 'str'

DECLARE @sql NVARCHAR(MAX)
SELECT @sql = (
    SELECT CHAR(13) + 
        'IF EXISTS(SELECT 1 FROM ' + 
            QUOTENAME(s.name) + '.' + QUOTENAME(o.name) + 
            ' WHERE' + b.cols + ')  
        SELECT table_name = ''[' + s.name + '].[' + o.name + ']'' ' + c.cols +' FROM ' + 
            QUOTENAME(s.name) + '.' + QUOTENAME(o.name) + 
            ' WHERE' + b.cols + ';' 
    FROM sys.objects o
    JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
    JOIN (
        SELECT DISTINCT p.[object_id] 
        FROM sys.partitions p
        WHERE p.[rows] > 0
    ) p ON p.[object_id] = o.[object_id]
    OUTER APPLY (
        SELECT cols = STUFF((
            SELECT 'OR CHARINDEX(''' + @char + ''', ' + QUOTENAME(c.name) + ') > 0 ' 
            FROM sys.columns c
            JOIN sys.types t ON c.user_type_id = t.user_type_id
            WHERE t.name IN ('char', 'nchar', 'ntext', 'nvarchar', 'text', 'varchar')
                AND c.[object_id] = o.[object_id]
            ORDER BY c.column_id
            FOR XML PATH(''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)'), 1, 2, '')
    ) b
    OUTER APPLY (
        SELECT cols = (
            SELECT ', ' + QUOTENAME(c.name) + ' ' 
            FROM sys.columns c
            JOIN sys.types t ON c.user_type_id = t.user_type_id
            WHERE t.name IN ('char', 'nchar', 'ntext', 'nvarchar', 'text', 'varchar')
                AND c.[object_id] = o.[object_id]
            ORDER BY c.column_id
            FOR XML PATH(''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)')
    ) c
    WHERE o.[type] = 'U'
        AND b.cols IS NOT NULL
    FOR XML PATH(''), TYPE, ROOT).value('root[1]', 'NVARCHAR(MAX)') 

    EXEC sys.sp_executesql @sql 
```

# java - 如何用 Java 中的工厂替换静态计数变量？

> ID：14758857
> 
> 赞同：0
> 
> 时间：2013-02-07T18:59:37.597
> 
> 标签：java, oop, factory

我有 0..n 个对象，每个对象都需要一个唯一标识符，它们是通过这种方式创建的：

```
public class Squirrel {

    private static numSquirrels = 0;

    private String id = null;

    public Squirrel() {
        this(String.valueOf(numSquirrels++);
    }

    public Squirrel(String id) {
        this.id = id;
    }
} 
```

这在几个方面是一个问题，但我会给出一个：

> 在进行单元测试时，numSquirrels 变量会在测试之间延续，即使我可能正在使用不同的松鼠种群。这意味着当我想重新开始时，他们的 ID 会继续增加。

*   现在是使用 SquirrelFactory 的正确时间吗（孩子们喜欢的那种）？
*   我应该使用依赖注入将工厂传递给 Squirrel 对象，还是应该将 Squirrel 类包含在与外部世界有接口的 Squirrel Factory 中？
*   如果我希望用户能够设置 ID（或至少建议 ID），如何确保唯一性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:05:42.553

我认为这个实现会很好，但如果你正在处理并发，你可能应该使用 AtomicInteger。

您的单元测试问题可以通过结合使用模拟并将其包装在另一个类中进行模拟来解决。请参阅这篇文章 [How to mock a static variable in java using JMock](https://stackoverflow.com/questions/1393029/how-to-mock-a-static-variable-in-java-using-jmock)

或者，一个简单的解决方案是为静态变量公开一个设置器，在测试用例结束时，您可以将其设置回 0，或者任何“重置”对您意味着什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:03:01.580

引入一个称为`SquirellPopluation`Squirrel 工厂的类，将静态计数器移动到它，并使其成为实例变量。

如果您希望工厂的用户能够设置自己的 id，那么请使用 set 而不仅仅是计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:05:53.937

您可以为该类设置一个静态“重置”方法。将其称为测试拆卸（或设置）的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T19:13:10.687

松鼠班可能不知道工厂。我建议以下实现：

```
public interface Squirrel // interface, not class
{
    public String getID ();

    // other methods here
}

public class SquirrelFactory
{
    private int nextSquirrelID = 0;

    public Squirrel createSquirrel ()
    {
        return new SquirrelImpl (String.valueOf (nextSquirrelID++));
    }

    private static class SquirrelImpl implements Squirrel
    {
        private final String id;

        // other fields here

        public SquirrelImpl (String id)
        {
            this.id = id;
        }

        @Overrides
        public String getID ()
        {
            return id;
        }

        // other methods here
    }
} 
```

然后使用`createSquirrel`a`SquirrelFactory`而不是构造函数的方法。并为每个单元测试创​​建新的类实例`SquirrelFactory`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T19:25:02.567

只是与最后一个问题相关的特定案例：

> 如果我希望用户能够设置 ID（或至少建议 ID），如何确保唯一性？

如果您想这样做，您必须跟踪所有实例。您可以使用`BitSet`例如。如果你这样做，你冷提供一种解构器：

```
/**
 * Eat the squirrel.<br>
 * You can not do anything anymore with the squirrel after it has been eaten,
 * but it can be reborn.
 */
public void eat() { //at least, sounds friendlier than kill, shoot, or whatever
  instances.clear(id);
} 
```

小心，因为这不是像 c++ 那样真正的解构器。您不能（轻松）销毁该对象。它仍然可以使用。那么你应该在内部处理这个问题。

提示：如果你使用多线程代码，live 开始变得复杂。但显然从静态id来看，你没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T20:29:45.280

我认为要满足您的所有要求，您将需要一个 SquirrelFactory 类来获取新的 Id 并确保它们都是唯一的。您可能希望将 SquirrelFactory 设为 Singleton。

SquirrelFactory 的职责是：

*   跟踪正在使用的 id
*   根据计数器创建具有新 ID 的松鼠（并确保它是唯一的）
*   创建具有给定 ID 的松鼠（用于从文件加载时），如果 id 已在使用中，则创建一个新的，如上
*   将新松鼠的 ID 添加到正在使用的 ID 列表中。
*   对于测试，您可能需要一种方法来重置计数器和 ID 列表
*   （可选）有办法在移除松鼠时从列表中移除 id

# ruby-on-rails - Rails：可以根据 IP 地址（或范围？）限制路由

> ID：14758858
> 
> 赞同：3
> 
> 时间：2013-02-07T18:59:38.627
> 
> 标签：ruby-on-rails, routing, routes, sidekiq

我知道这通常发生在控制器中，但我想知道是否可以`config/routes.rb`根据特定 IP（或 IP 范围）限制路由？有点像白名单。

例如，我想将此路由限制为仅在我们的子网上的 IP：

```
#config/routes.rb
require 'sidekiq/web'

MyApp::Application.routes.draw do
  resources :users
  ...
  mount Sidekiq::Web, at: "/sidekiq"      # <== restrict this based on IP address
  ...
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T19:27:25.557

根据[Rails Docs](http://guides.rubyonrails.org/routing.html#advanced-constraints)中的示例，您可以执行以下操作：

```
#config/routes.rb
require 'sidekiq/web'

MyApp::Application.routes.draw do
  resources :users
  ...
  mount Sidekiq::Web, at: "/sidekiq", :constraint => Whitelist.new
  ...
end

class Whitelist
  def initialize
    @ips = Whitelist.retrieve_ips
  end

  def matches?(request)
    @ips.include?(request.remote_ip)
  end

  def retrieve_ips
    # get and return your whitelist of ips
  end
end 
```

[Yehuda Katz 的这篇文章](http://www.railsdispatch.com/posts/rails-3-makes-life-better)更详细地介绍了约束以及如何使用它们。

# c# - Linq：有没有办法在对象列表中搜索匹配条件的值？

> ID：14758859
> 
> 赞同：3
> 
> 时间：2013-02-07T18:59:52.433
> 
> 标签：c#, linq

我有 3 种类型的对象，TypeA、TypeB、TypeC。TypeA 有一个 TypeB 列表，TypeB 有一个 TypeC 列表，TypeC 有一些我想跟踪的变量

```
Class TypeA
{
  List<TypeB> MyListOfTypeB;
  //...
}

Class TypeB
{
  List<TypeC> MyListOfTypeC;
  //...
}

Class TypeC
{
  int SomeInteger;
  //...
} 
```

给定 a `List<TypeA> MyListOfTypeA`，我想查找所有满足特定条件的 TypeC 对象，例如 SomeInteger > 100。除了嵌套 for/foreach 循环之外，Linq 的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:07:29.717

我认为这样的东西就是你要找的东西：

```
var result = MyListOfTypeA.SelectMany(b => b.MyListOfTypeB.SelectMany(c => c.MyListOfTypeC.Select(x => x.SomeInteger > 100))).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T19:02:01.797

```
var MyListOfTypeA = new List<TypeA>();
// ...
var cItems = 
    from a in MyListOfTypeA
    from b in a.MyListOfTypeB
    from c in a.MyListOfTypeC
    where c.SomeInteger > 100
    select c; 
```

以上等价于调用`SelectMany`LINQ 函数，但在我看来，它明显更简洁，更易于阅读。

使用 LINQ 函数（正如 Dmitry 已经建议的那样，尽管有一些修改）：

```
var cItems = 
    MyListOfTypeA.SelectMany( a => a.MyListOfTypeB )
                 .SelectMany( b => b.MyListOfTypeC )
                 .Where( c => c.SomeValue > 200 ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T19:04:22.720

您可以使用 Linq 通过以下方式执行此操作：

```
 var myListOfTypeA = new List<TypeA>();

    // fill your list here

    var typeCs = from typeA in myListOfTypeA
                 from typeB in typeA.MyListOfTypeB
                 from typeC in typeB.MyListOfTypeC
                 where typeC.SomeInteger > 100
                 select typeC; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T19:20:56.277

您需要浏览所有子列表，这`from`可以为您做些什么。

```
var ta = new TypeA();

var allTypeCsThatSatisfyMyCondition = 
    from tb in ta.MyListOfTypeB                     // This will iterate to each item in the list
    from tc in tb.MyListOfTypeC                     // This will iterate to each item in the *sublist*
    where tc.SomeInteger > 100          // Condition could be anything; filter the results
    select tc;                                      // When you select, you tell your iterator to yield return that value to the caller.

return allTypeCsThatSatisfyMyCondition.ToList();    // To list will force the LINQ to execute and iterate over all items in the lists, and add then to a list, effectively converting the returned items to a list. 
```

# c# - 如何在水晶报表c#中创建多个报表？

> ID：14758866
> 
> 赞同：0
> 
> 时间：2013-02-07T19:00:16.210
> 
> 标签：c#, crystal-reports

我有一个存储员工工资单记录的表。

**tbl_Slip**
SlipNo*
EmpID
Month-Year
FacultyID
Additions

它链接到另一个存储员工信息的表。

**tbl_EmpInfo**
EmpID
EmpName
等...

我想为 tbl_EmpInfo 中的每个员工生成工资单。我想在一页显示一个单据报告。（子报告是否允许这样做）
我想在报告中显示的字段来自两个表。我想不出一种方法来完成这项任务。如果有人可以请向我解释一下。我真的很努力，因为我是水晶报告的新手。还请提供可以帮助我的链接。我有[http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-without-database.htm](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-without-database.htm) 之一。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:37:30.953

使用 2 个数据表（EMP、EMPSalary）创建 xsd 并添加一对多关系参考水晶报表上的这些表。我认为您不需要子报告。根据 EmpID 创建组部分并添加作为您的参考链接的代码。并限制每页的详细信息部分

# asp.net - 样式化 RadMenu

> ID：14758868
> 
> 赞同：2
> 
> 时间：2013-02-07T19:00:18.073
> 
> 标签：asp.net, telerik, radmenu

我希望能够用菜单完成几件事，但很难弄清楚....

使字体加粗 使字体变大 使边框颜色为红色 将项目一直对齐到右侧（而不是左侧）

有人可以告诉我如何做到这一点吗？

下面，是我的标记..

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage0.master.cs"
    Inherits="MasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <link href="App_Themes/style0.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/jquery.core.js"></script>
    <script type="text/javascript" src="js/jquery.superfish.js"></script>
    <script type="text/javascript" src="js/jquery.jcarousel.pack.js"></script>
    <script type="text/javascript" src="js/jquery.easing.js"></script>
    <script type="text/javascript" src="js/jquery.scripts.js"></script>
    <title>Network Performance Portal</title>
    <link rel="stylesheet" href="style000.css" type="text/css" media="screen" />
    <style type="text/css">
        div.RadMenu2
        {
            float: right;
        }
    </style>
</head>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript1.5"></script>
<asp:contentplaceholder id="head" runat="server">
    </asp:contentplaceholder>
<body>
    <header>
        <div id="wrap">
            <div class="top_corner">
            </div>
            <div id="main_container">
                <div id="header">
                    <div id="logo">
                        <a href="http://wmsatsea.com/">
                            <img src="images/wmslogo.png" alt="" title="" border="0" /></a></div>
                </div>
                <form id="form1" runat="server">
                <telerik:RadScriptManager ID="RadScriptManager1" runat="server">
                </telerik:RadScriptManager>
                <div>
                    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                        <telerik:RadMenu ID="RadMenu2" runat="server" Width="85%" Font-Bold="true" Font-Size="Large"
                            BorderColor="Red">
                            <Items>
                                <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Reports">
                                    <Items>
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Satellite Availability"
                                            NavigateUrl="SatReport_Container.aspx" />
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Call Attempts"
                                            NavigateUrl="CA_Container.aspx" />
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Minutes of Usage"
                                            NavigateUrl="MinUsage_Container.aspx" />
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Dropped Call %"
                                            NavigateUrl="Container.aspx" />
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Call Success Rate %"
                                            NavigateUrl="Success_Container.aspx" />
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="CrewzFone Sales"
                                            NavigateUrl="Crewzfone_Sales.aspx" />
                                    </Items>
                                </telerik:RadMenuItem>
                                <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Contact Us" NavigateUrl="http://wmsatsea.com/default.aspx">
                                </telerik:RadMenuItem>
                                <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="WMS Website" NavigateUrl="http://wmsatsea.com/">
                                </telerik:RadMenuItem>
                                <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Revenue">
                                    <Items>
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Revenue" NavigateUrl="~/Revenue/ManageSubscriptions.aspx" />
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="SMS Count" NavigateUrl="MobileSMS_Container.aspx" />
                                        <telerik:RadMenuItem runat="server" ExpandMode="ClientSide" Text="Carrier Activity"
                                            NavigateUrl="MoActivity_Container.aspx" />
                                    </Items>
                                </telerik:RadMenuItem>
                            </Items>
                        </telerik:RadMenu>
                    </asp:ContentPlaceHolder>
                </div>
                <asp:ContentPlaceHolder ID="MainContent" runat="server">
                </asp:ContentPlaceHolder>
                <br />
                <br />
                <br />
                <br />
                </form>
                <div class="clear">
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
    </header>
    <footer>
        <div id="footWrap">
            <div id="footPanel">
                <div id="footNav">
                    <ul>
                        <li></li>
                        <li><a href="#">Home</a></li>
                        <li>
                            <div class="blank">
                                |</div>
                        </li>
                        <li><a href="#">Online Support</a></li>
                        <li>
                            <div class="blank">
                                |</div>
                        </li>
                        <li><a href="#">Solutions</a></li>
                        <li>
                            <div class="blank">
                                |</div>
                        </li>
                        <li><a href="#">Site Map</a></li>
                        <li>
                            <div class="blank">
                                |</div>
                        </li>
                        <li><a href="#">Report Requests</a></li>
                        <li>
                            <div class="blank">
                                |</div>
                        </li>
                        <li><a href="#">Projects</a></li>
                        <li>
                            <div class="blank">
                                |</div>
                        </li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div id="copyright">
                    <p>
                        © Copyright WMS. All Rights Reserved.</p>
                </div>
                <p>
                    Designed By: Software Development Team</p>
            </div>
        </div>
    </footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T16:13:46.877

## [！重要的](https://stackoverflow.com/q/9245353/662581)

这是您知道如何使用 RadMenu 做您想做的最*重要的事情。*

第二个是将**`EnableEmbeddedSkins`**属性设置为false。

* * *

**一些链接：**

*   [用于 ASP.NET AJAX 文档的 RadControls](http://www.telerik.com/help/aspnet-ajax/menu-appearance-item-css-class.html)
*   [将 CSS 与 RADMENU 一起使用](http://www.telerik.com/community/forums/aspnet-ajax/menu/using-css-with-radmenu.aspx)

* * *

为了快速查看，您可以使用以下标签更改 RadMenu 上的文本

*   `.RadMenu .rmItem .rmExpandDown`- 只有“标题”菜单。
*   `.RadMenu .rmText`- 所有文本菜单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:03:46.517

你需要覆盖telerik的css。使用 viewsource 和 firebug 的组合来最有效地做到这一点。此外，与 radmenu 的 css 类层次结构的这个很棒的链接在过去帮助了我。

[http://www.telerik.com/help/aspnet-ajax/menu-appearance-css-file.html](http://www.telerik.com/help/aspnet-ajax/menu-appearance-css-file.html)

# c++ - 访问嵌套类（表现得像朋友，但不是）

> ID：14758881
> 
> 赞同：1
> 
> 时间：2013-02-07T19:01:05.087
> 
> 标签：c++, class, instance, parent-child

没有长时间的延迟，这里的代码我不知道它为什么会这样做：

```
#include <iostream>

class A {
private:
  void print() { std::cout << "A.print() called" << std::endl; };
public:
  template<typename Foo>
  class B; //NOTE: no friend!
public:
  A();
  B<double>*  bd;
  B<int>*     bi;
}; 

template<typename Foo>
class A::B{
  A* callback;
public:
  B(A* a):callback(a){};
  void print() { callback->print(); }; // Why is this working ???
};

A::A():bd(new B<double>(this)),bi(new B<int>(this)){}

int main(int argc, char **argv)
{
  A a;
//   a.print(); // error: ‘void A::print()’ is private
  a.bd->print();
  a.bi->print();

  A::B<char> c(&a);
  c.print();

  A::B<double> d = *a.bd;
  d.print();

  return 0;
} 
```

好吧，它创建了这个输出：

```
A.print() called
A.print() called
A.print() called
A.print() called 
```

**但为什么？**

## 背景

当我遇到一个与 s 相关的问题时，我最初开始了我的兔子洞之旅`friend`。因此，我阅读[了朋友声明而不是转发声明（以及](https://stackoverflow.com/questions/14114956/friend-declaration-not-forward-declaring)[此处](https://stackoverflow.com/questions/9890756/how-come-forward-declaration-is-not-needed-for-friend-class-concept/9890827#9890827)和[此处](https://stackoverflow.com/questions/656948/a-class-key-must-be-declared-when-declaring-a-friend/657113#657113)提到的答案）。因此，在尝试设置一个简单的示例（您在上面看到的结果）时，我发现我实际上似乎根本不需要`friend`。

## 问题

所以这是一个底线问题：**为什么一个实例`A::B`可以访问`A`的私有函数`A::print()`？**（尽管我确实意识到我可能会误解[我的孩子](https://stackoverflow.com/a/437507/1984137)是什么——*孩子*而不是*基础*与*派生*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:09:21.647

因为嵌套类是封闭类的成员

标准 11.7.1 美元

“嵌套类是一个成员，因此具有与任何其他成员相同的访问权限。封闭类的成员对嵌套类的成员没有特殊的访问权限；应遵守通常的访问规则”

并且通常的访问规则指定：

“一个类的成员还可以访问该类可以访问的所有名称......”

标准中已经给出了具体的例子：

```
class E {
    int x;
    class B { };

    class I {
        B b; // OK: E::I can access E::B
        int y;
        void f(E* p, int i) {
            p->x = i; // OK: E::I can access E::x
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:06:55.077

嵌套类（或内部类）可以访问它所嵌套的类的私有内容。它在某种意义上已经是那个班级的朋友了。这类似于任何`A`对象可以访问任何其他`A`对象的私有信息的方式。

您`friend`用于在您想要访问其私有的类之外定义的类。这是一个简单的例子：

```
struct B;

class A
{
  int x;
  friend struct B;
};

struct B
{
  void someFunc() {
    A a;
    a.x = 5;
  }
};

int main(int argc, const char* argv[])
{
  B b;
  b.someFunc();
  return 0;
} 
```

不交`B`朋友`A`，就无法`A`访​​问会员`x`。

# html - 将 XML/HTML 中的 < 替换为 " (RegEx)

> ID：14758882
> 
> 赞同：0
> 
> 时间：2013-02-07T19:01:19.777
> 
> 标签：html, xml, regex, replace, epub

我有一个 XML/HTML (epub) 文档，其中包含内容`< >`而不是`" "`引用。是否有可能只替换内容`< >`并`<tags>`用一些正则表达式保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:12:39.210

[您不应该使用 Regex 来解析 XML](https://stackoverflow.com/a/1732454/1945651)

您的问题并不完全清楚，但听起来您的 XML 有一些文本值，`<`其中`>`包含您想要更改为引号的文本值。使用 XSLT 可以很容易地做到这一点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | *">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:value-of select="translate(., '&lt;&gt;', '&quot;&quot;')"/>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<root>
  <item>And he said &lt;hello!&gt;.</item>
  <item>&lt;hello!&gt;, he said</item>
  <section>
    <content>&lt;What's up&gt;</content>
  </section>
</root> 
```

它产生：

```
<root>
  <item>And he said "hello!".</item>
  <item>"hello!", he said</item>
  <section>
    <content>"What's up"</content>
  </section>
</root> 
```

您的文档中的文本可能包含您不想转换为引号`<`的 s 和s 是否存在风险？`>`

# windows - GLUT glutCloseFunc 回调未被调用

> ID：14758889
> 
> 赞同：1
> 
> 时间：2013-02-07T19:01:55.127
> 
> 标签：windows, opengl, glut

我在大学使用 GLUT 进行 CUDA 项目，一切进展顺利。

我已经用一些回调设置了 GLUT，如下所示：

```
glutKeyboardFunc( on_key );
glutDisplayFunc( on_draw );
glutMouseFunc(on_mouse);
glutMotionFunc( on_motion );
glutIdleFunc( on_idle );
glutCloseFunc( on_exit );
glutReshapeFunc( on_reshape ); 
```

唯一的问题是 on_exit 从未被调用，但其他所有函数都被调用，并且我设置的函数之间没有区别。

我知道我的退出代码工作正常，因为我在 ESC 键按下时从 on_key 调用它。

有谁知道为什么这可能不起作用？我是否需要设置一些标志或其他一些标志来指示其行为？

# c# - 在 Grid 或任何其他控件中显示数据，例如 Pivot

> ID：14758890
> 
> 赞同：0
> 
> 时间：2013-02-07T19:01:55.280
> 
> 标签：c#, asp.net, sql, sql-server-2008, gridview

我想显示像枢轴网格这样的数据。我现在正在显示如下数据。请看下图或点击链接。 [http://screencast.com/t/CWeGy0vi](http://screencast.com/t/CWeGy0vi) ![在此处输入图像描述](../Images/c4bdc4cfd942af06ff3377e17e5d03a4.png)

但我想要以下数据： [http ://screencast.com/t/ZTb2wk4cdmB](http://screencast.com/t/ZTb2wk4cdmB) ![在此处输入图像描述](../Images/659190de8bef371046df2d9137a43af6.png)

任何建议如何实现这一目标。初始点。我应该使用中继器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:32:00.087

如果没有看到您的表结构等，很难给出准确的答案。但我可以建议您如何在 SQL 中执行此操作。你以前有一些用 sql server 标记的问题，所以我猜。

您可以同时使用 an`UNPIVOT`和 a来执行此操作`PIVOT`：

```
;with unpiv as
(
  select activity, 
      work, 
      Location+'_'+col as col, 
      value
    from
    (
      select activity,
        work,
        cast(AssignedTasks as varchar(50)) AssignedTasks,
        cast(CompletedTasks as varchar(50)) AchievedTasks,
        Location
      from yourtable
    ) src
    unpivot
    (
      value
      for col in (AssignedTasks, AchievedTasks)
    ) unpiv
),
piv as
(
  select Activity,
    work,
    London_AssignedTasks, 
    London_AchievedTasks,
    Geneva_AssignedTasks, 
    Geneva_AchievedTasks,
    row_number() over(partition by activity order by activity, work) rn
  from unpiv
  pivot
  (
    max(value)
    for col in (London_AssignedTasks, London_AchievedTasks,
                Geneva_AssignedTasks, Geneva_AchievedTasks)
  ) piv
)
select case when rn = 1 then activity else '' end activity,
  work,
  London_AssignedTasks, 
  London_AchievedTasks,
  Geneva_AssignedTasks, 
  Geneva_AchievedTasks
from piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/8e685/32)。

结果是：

```
|   ACTIVITY |   WORK | LONDON_ASSIGNEDTASKS | LONDON_ACHIEVEDTASKS | GENEVA_ASSIGNEDTASKS | GENEVA_ACHIEVEDTASKS |
-------------------------------------------------------------------------------------------------------------------
| Activity 1 | Task 1 |                   10 |                    8 |                    1 |                    1 |
|            | Task 2 |                   15 |                   15 |                  100 |                   25 |
| Activity 2 | Task 1 |                    5 |                    5 |                    0 |                    0 |
|            | Task 2 |                    0 |                    0 |                    2 |                    2 |
| Activity 3 | Task 1 |                   10 |                   10 |                   50 |                   40 | 
```

编辑#1，如果你有一个未知的或动态的数字，`Locations`那么你可以使用动态 SQL 来返回结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(Location+'_'+t.tasks) 
                    from yourtable
                    cross apply
                    (
                      select 'AssignedTasks' tasks
                      union all
                      select 'AchievedTasks'
                    ) t
                    group by location, tasks
                    order by location
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = ';with unpiv as
              (
                select activity, 
                    work, 
                    Location+''_''+col as col, 
                    value
                  from
                  (
                    select activity,
                      work,
                      cast(AssignedTasks as varchar(50)) AssignedTasks,
                      cast(CompletedTasks as varchar(50)) AchievedTasks,
                      Location
                    from yourtable
                  ) src
                  unpivot
                  (
                    value
                    for col in (AssignedTasks, AchievedTasks)
                  ) unpiv
              ),
              piv as
              (
                select Activity,
                  work,
                  row_number() over(partition by activity order by activity, work) rn,
                  '+@cols+'
                from unpiv
                pivot
                (
                  max(value)
                  for col in ('+@cols+')
                ) piv
              )
              select case when rn = 1 then activity else '''' end activity,
                work,
                '+@cols+'
              from piv'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/8e685/46)

# c# - 仅从没有完整路径的文件夹中获取文件的名称 asp.net

> ID：14758892
> 
> 赞同：2
> 
> 时间：2013-02-07T19:01:59.253
> 
> 标签：c#, asp.net, path

嗨，我只想从没有完整路径的文件夹中获取文件的名称。到目前为止，这是我的代码（asp.net）

```
 string[] files = Directory.GetFiles(Server.MapPath("~/Files/"));      

    List<string> filenames = new List<string>();
    for (int i = 0; i < files.Length; i++)
    {
        filenames.Add(files[i]);             
    }
    GridView1.DataSource = filenames;
    GridView1.DataBind(); 
```

我将如何在 asp.net 中完成此操作再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:07:05.770

试试这个

```
string[] files = 
Directory.GetFiles(Server.MapPath("~/Files/")).Select(fi => Path.GetFileName(fi); 
```

还要添加对此的引用

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:06:08.747

尝试[DirectoryInfo.GetFiles](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles.aspx)。

[这将返回一个FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)数组，它将为您提供您想要的以及更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T19:16:14.330

尝试使用

文件名.Add(Path.GetFileName(files[i]));

# c# - C# 输出中的连接和占位之间有区别还是偏好问题？

> ID：14758893
> 
> 赞同：1
> 
> 时间：2013-02-07T19:02:00.550
> 
> 标签：c#, concatenation, string-concatenation, console.writeline

刚开始第一次使用 C#，在浏览教程时，我没有发现用于输出的串联（`console.writeline("Hello" + user)`用户是字符串变量）和占位符（`console.writeline("Hello {0}" , user`用户是字符串变量）方法之间的区别. 是否有区别，或者仅仅是您发现哪种方式更容易

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:08:13.403

它并不是真正特定于 C#，许多语言都支持这两种样式。后一种形式通常被认为“更安全”，但我无法引用任何具体原因。如果项目需要出现在 1 个以上的位置，或者要将格式字符串保存为常量，这将很有用。查看此线程以获取更多信息：[何时使用 String.Format 与字符串连接更好？](https://stackoverflow.com/questions/296978/when-is-it-better-to-use-string-format-vs-string-concatenation).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:42:17.977

使用字符串格式化程序，而不是字符串连接，几乎完全是关于可读性。他们实际*做*的事情，甚至他们的表现，都非常接近。

对于这样一个简单的情况，两者看起来都不错，但是当您有一个复杂的字符串，其中包含许多混合在格式字符串中的值时，最终看起来会更好：

这是一个更好的例子：

```
string output = "Hello " + username + ".  I have spent " + executionTime + " seconds trying to figure out that the answer to life is: " + output; 
```

对比

```
string output = string.Format("Hello {0}.  I have spent {1} seconds trying to figure out that the answer to life is: {2}"
    , username, executionTime, output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:29:27.550

正如马特所说，占位被认为是比简单连接更安全的方法，但我不确定是否出于这个原因（我需要对此进行探索）。但是，有一点可以肯定，就性能而言，Place Holding 的操作成本比 Concatenation 高。查看 Jon Skeet 的这篇[博客文章“格式化字符串”](http://msmvps.com/blogs/jon_skeet/archive/2008/10/06/formatting-strings.asp)。

尽管只有在您使用占位符数千次左右时，性能才会受到显着影响。

# php - 警告：array_values() 期望参数 1 是数组，给定 null

> ID：14758900
> 
> 赞同：0
> 
> 时间：2013-02-07T19:02:11.877
> 
> 标签：php, mysql, arrays

我的 PHP 中有 3 个数组，$console、$model 和 $game。

顺便说一下，这里是代码：

```
<?PHP
    $console = array();
    $model = array();
    $game = array();

    $gameQuery = "SELECT * FROM consoleGame";
    $gameResult = mysql_query($gameQuery) or die(mysql_error());

    while ($row = mysql_fetch_assoc($gameResult)) {
        if(!is_array($game[$row['modelId']])) {
            $game[$row['modelId']] = array();
        }

         $game[$row['modelId']][$row['gameId']] = array(
                                        'Game Name' => $row['gameName'],
                                        'Game ID' => $row['gameId']);
    }

    $modelQuery = "SELECT * FROM consoleModel";
    $modelResult = mysql_query($modelQuery) or die(mysql_error());

    while ($row = mysql_fetch_assoc($modelResult)) {
        if (!is_array($model[$row['consoleId']])) {
            $model[$row['consoleId']] = array();
        }

        $model[$row['consoleId']][$row['modelId']] = array(
                                        'Model Name' => $row['modelName'],
                                        'Model ID' => array_values($game[$row['modelId']])); //This is the warning by the way.
    }

    $consoleQuery = "SELECT * FROM consoleConsole";
    $consoleResult = mysql_query($consoleQuery) or die(mysql_error());

    while ($row = mysql_fetch_assoc($consoleResult)) {
        if (!is_array($console[$row['consoleId']])) {
            $console[$row['consoleId']] = array();
        }

        $console[$row['consoleId']] = array(
                                        'Console Name' => $row['consoleName'],
                                        'Console ID' => array_values($model[$row['consoleId']]));
    }

    $console = array_values($console);
    echo json_encode($console);
?> 
```

正如您在代码中看到的那样，我已将 array_values 添加到 $console 和 $model 中，没有任何问题。那时我很幸运。当我将 array_values 添加到 $game 时，它​​会创建一个警告。对此有什么可能的解决方法？

**我声明的**附加信息**`$console`，`$model`并`$game`作为`array()`. 我不知道为什么上面没有显示`$gameQuery`。**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:07:45.050

首先将您的 $game 声明为一个数组，然后再使用它，例如 $game = array() 然后请告诉我们您要将 array_value 添加到 $game 的位置

其次，您可以使用 is_array($game) 在将其添加到 array_values 之前使用它是否为数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:11:32.777

您似乎没有`$console`在 firat 地方将您的定义为数组。`$console = array()`在开头附近的某个地方添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:39:53.367

您正在使用三个不同的查询从数据库中获取结果，尽管您“检查”是否存在 $game 数组中“modelId”的键，但可能不存在特定模型的游戏；

此行保证如果该 modelId 尚不存在，则将密钥添加到**$game数组**

```
if(!is_array($game[$row['modelId']])) {
    $game[$row['modelId']] = array();
} 
```

但是，在第二个循环中，由于`SELECT * FROM consoleModel`您加载*所有*模型的结果，可能有些数据库中没有游戏，因此 $game 数组中不会有该 modelId 的键。

例如：

控制台游戏

```
gameName | gameId | modelId
GameA    | 1      | 1
GameB    | 2      | 1 
```

控制台模型

```
modelName| modelId
ModelA   | 1
ModelB   | 2 
```

ModelA 将有 2 场比赛，但 ModelB 没有。

`$modelResult`您也可以通过在循环中添加它来解决此问题

```
if (!is_array($model[$row['consoleId']])) {
    $game[$row['modelId']] = array();
} 
```

## 一些想法

您收集数据的方式并没有真正使用数据库的“力量”。数据库旨在检索数据*和相关数据*（因此称为“关系数据库”）

例如，要收集所有控制台模型，包括该模型的游戏（如果有），请使用此；

```
SELECT
   consoleModel.modelId,
   consoleModel.modelName,
   consoleGame.gameId,
   consoleGame.gameName
FROM
    consoleModel
    -- Using 'LEFT' join so that consoleModels without games will also be returned
    LEFT JOIN consoleGame
      ON consoleGame.modelId = consoleModel.modelId 
```

哪个会返回；

```
modelId | modelName | gameId | gameName
1       | ModelA    | 1      | GameA
1       | ModelA    | 1      | GameA
2       | ModelB    | NULL   | NULL 
```

尽管这会复制 ModelName 行，但它可能会使您的事情变得更容易，因为您不必运行 3 个单独的循环。

模式优化选项将是可能的（例如循环遍历 PHP 中的所有控制台模型并收集循环内的相关游戏），我将把它留给你去尝试和学习**

# mysql - 如何将日期添加到mysql错误日志

> ID：14758904
> 
> 赞同：3
> 
> 时间：2013-02-07T19:02:28.803
> 
> 标签：mysql, my.cnf

Mysql 错误日志旁边只有一个数字和创建时间，我需要对其进行格式化，以便它还包括日期，

我该怎么做？

```
130207  2:25:29 [Note] Plugin 'FEDERATED' is disabled.
130207  2:25:29 InnoDB: The InnoDB memory heap is disabled
130207  2:25:29 InnoDB: Mutexes and rw_locks use InnoDB's own implementation
130207  2:25:29 InnoDB: Compressed tables use zlib 1.2.3
130207  2:25:29 InnoDB: Using Linux native AIO
130207  2:25:30 InnoDB: Initializing buffer pool, size = 3.0G
130207  2:25:30 InnoDB: Completed initialization of buffer pool
130207  2:25:30 InnoDB: highest supported file format is Barracuda.
130207  2:25:30  InnoDB: Waiting for the background threads to start 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T19:05:00.677

130207 不是 2013 年 2 月 7 日吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T00:58:24.307

@mimipc 是正确的，前 6 个字符确实是 YYMMDD。

从 MySQL 5.6.9 开始引入了一个[更改：](http://dev.mysql.com/doc/relnotes/mysql/5.6/en/news-5-6-9.html)

> **mysqld**现在以 ISO (YYYY-MM-DD hh:mm:ss) 格式将日期写入错误日志。它还包括日期后的进程 ID。

我不希望这会被向后移植到以前的版本中...但是有一个附加到[错误 #56240的补丁，如果您](http://bugs.mysql.com/bug.php?id=56240)*真的*有动力，您可能可以在早期版本上使用它...但是，MySQL 5.6 现在正式[通用MySQL 5.6.10 的可用性状态](http://www.oracle.com/us/corporate/press/1904335)。

# jquery - JQuery在li中的嵌套标签上捕获点击事件

> ID：14758906
> 
> 赞同：0
> 
> 时间：2013-02-07T19:02:30.383
> 
> 标签：jquery, onclick

我在 UL 内的嵌套标签上捕获 JQuery onclick 事件时遇到问题

```
<ul class="paginate">
<li>>1</li>
<li>
<a href="http://www.xxx.co.uk/xxx/" onclick="ajaxPage('2',true,'left'); return false;">2</a> 
```

如果用户单击 a 标签，我尝试了多种方法来捕获，但似乎没有任何效果；

```
$('.paginate li').click(function(){ 
    alert('Caught page');
});

$('ul.paginate li').click(function(){ 
    alert('Caught page');
});

$('.paginate li a').click(function(){ 
    alert('Caught page');
}); 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:17:55.903

清理 html 后对我有用：

[http://jsfiddle.net/4s6rv/](http://jsfiddle.net/4s6rv/)

```
<ul class="paginate">
<li>1</li>
<li>
<a href="http://www.xxx.co.uk/xxx/" onclick="ajaxPage('2',true,'left'); return false;">2</a>
</li>
</ul>

$('.paginate li a').click(function(){ 
    alert('Caught page');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:07:32.017

```
$(document).ready(function() 
{
    $('ul.paginate li').click(function(e) { 
       alert('Caught page');
    });
} 
```

# sql - 规范化一个非常大的表

> ID：14758912
> 
> 赞同：10
> 
> 时间：2013-02-07T19:03:00.910
> 
> 标签：sql, sql-server, sql-server-2008, normalization, database-normalization

我面临以下问题。我有一张非常大的桌子。这张桌子是以前参与该项目的人的遗产。该表位于 MS SQL Server 中。

该表具有以下属性：

1.  它有大约 300 列。它们都有“文本”类型，但其中一些最终应该代表其他类型（例如，整数或日期时间）。因此，在使用之前必须将这些文本值转换为适当的类型
2.  该表有超过 100 百万行。表的空间很快就会达到 1 TB
3.  该表没有任何索引
4.  该表没有任何已实现的分区机制。

正如您可能猜到的那样，不可能对该表运行任何合理的查询。现在人们只在表中插入新记录，但没有人使用它。所以我需要重组它。我计划创建一个新结构并用旧表中的数据重新填充新结构。显然，我将实现分区，但这不是唯一要做的事情。

该表最重要的特性之一是那些纯文本字段（即它们不必转换为另一种类型）通常具有频繁重复的值。因此，给定列中值的实际变化范围是 5-30 个不同的值。这引发了进行规范化的想法：对于每个这样的文本列，我将创建一个附加表，其中包含可能出现在该列中的所有不同值的列表，然后我将在这个附加表中创建一个（tinyint）主键和然后将在原始表中使用适当的外键，而不是将这些文本值保留在原始表中。然后我会在这个外键列上放一个索引。以这种方式处理的列数约为 100。

它提出了以下问题：

1.  这种规范化真的会提高对这 100 个领域中的一些领域施加条件的速度吗？如果我们忘记保留这些列所需的大小，是否会由于使用 tinyint-columns 替换初始文本列而提高性能？如果我不进行任何规范化并简单地在这些初始文本列上放置一个索引，那么性能是否与计划的 tinyint-column 上的索引相同？
2.  如果我进行所描述的规范化，那么构建一个显示文本值的视图将需要将我的主表与大约 100 个附加表连接起来。一个积极的时刻是我将为“主键”=“外键”对进行这些连接。但是仍然应该加入相当多的表。这里有一个问题：对这个视图进行的查询的性能与对初始非规范化表的查询的性能相比是否会更差？SQL Server 优化器是否真的能够以允许利用规范化优势的方式优化查询？

抱歉这么长的文字。

感谢您的每一条评论！

PS 我创建了一个关于加入 100 个表的相关问题； [加入 100 个表](https://stackoverflow.com/questions/14780307/joining-100-tables)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T19:21:11.713

除了针对数据运行的查询速度之外，您还会发现规范化数据的其他好处......例如大小和可维护性，仅此一项就应该证明规范化它是合理的......

但是，它也可能会提高查询速度；目前单行包含 300 个文本列是巨大的，并且几乎可以肯定超过了[存储行数据页的 8,060 字节限制](http://msdn.microsoft.com/en-us/library/ms189051.aspx)......而是存储在`ROW_OVERFLOW_DATA`或`LOB_DATA`分配单元中。

通过规范化减少每一行的大小，例如用`TINYINT`外键替换冗余文本数据，以及将不依赖于这个大表主键的列删除到另一个表中，数据应该不再溢出，并且您' 还可以在每页存储更多行。

至于通过执行`JOIN`获取规范化数据而增加的开销......如果您正确索引表，这不应该增加大量开销。但是，如果它确实增加了不可接受的开销，那么您可以根据需要选择性地对数据进行反规范化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T19:18:09.477

这是否值得努力取决于价值观的持续时间。如果值是州缩写（2 个字符）或国家代码（3 个字符），则生成的表将比现有表更大。请记住，您需要包含引用表的主键。这通常是一个整数并占用四个字节。

这样做还有其他充分的理由。拥有具有有效值列表的引用表可以保持数据库的一致性。参考表既可用于验证输入，也可用于报告目的。可以包括附加信息，例如“长名称”或类似的东西。

此外，SQL Server 会将 varchar 列溢出到其他页面上。它不会溢出其他类型。您只有 300 列，但最终您的记录数据可能会接近单页数据的 8k 限制。

而且，如果您决定继续，我建议您在列中查找“主题”。可能存在可以组合在一起的多组列。. . 详细的停止代码和停止类别、简短的企业名称和完整的企业名称。您正在走上对数据建模的道路（一件好事）。但是要谨慎对待在非常低的级别（管理 100 个参考表）而不是识别一组合理的实体和关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T19:16:39.757

1) 系统当前必须对非常大量的数据进行全表扫描，从而导致性能问题。优化的许多方面可以提高这种性能。将列转换为正确的数据类型不仅可以通过减小每条记录的大小来显着提高性能，而且可以使数据正确。如果查询列，您当前正在查看与字段中的文本进行比较的文本。仅使用索引可以改善这一点，但更改为查找将允许从足够小的表中查找 ID 值以保存在内存中，然后使用它来仅扫描整数值，这是一个更快的过程。2）如果数据被规范化为第三范式等，然后您可以看到以数据完整性为名的性能受到影响的实例。如果引擎在不首先投影数据的情况下无法计算出如何限制行，这将是一个最大的问题。但是，如果确实发生了这种情况，则执行计划可以识别出这种情况，并且可以修改查询以降低发生这种情况的可能性。

还有一点需要注意的是，听起来如果数据库结构合理，它可能能够缓存在内存中，因为数据量会大大减少。如果是这样，那么性能将大大提高。

提高性能的快速方法可能是添加索引。但是，这将进一步增加整体数据库大小，并且不能解决存储重复数据的问题和可能的数据完整性问题。

还可以进行一些其他更改 - 如果并非总是需要大量数据，则可以将其分离到相关表中，并仅根据需要进行查找。不用于查找其他表的字段特别适用于此，因为连接可以在一个小得多的表上，同时保留一个相当简单的结构，当您确定您实际的数据时只查找附加数据需要。这显然不是一个正确规范化的结构，但可能是提高性能的一种快速而肮脏的方式（在添加索引之后）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T19:29:46.257

1.  在您的头脑中和纸上构建一个规范化的数据库结构
2.  构建数据库（带索引）
3.  解构那个巨石。事情看起来不会那么糟糕。我猜会重复很多（我的意思是很多）数据
4.  创建 SQL 插入语句以将数据插入数据库
5.  首先用猎枪去找那些制造那个噩梦的人。玩得开心。

# c# - 获取所有进程及其对应的应用程序域

> ID：14758915
> 
> 赞同：1
> 
> 时间：2013-02-07T19:03:08.880
> 
> 标签：c#, visual-studio-2010, process, appdomain

运行程序时是否可以获得正在运行的进程列表及其相应的应用程序域？我知道*mscoree.dll*允许我使用**ICorRuntimeHost.EnumDomains**方法检索**当前**进程的所有应用程序域。有没有办法在**不**使用**外部 API**和纯 C# 代码的情况下获取这些信息？我了解 mdbg 有一些功能可能会有所帮助，但我不确定如何使用此调试器。我真的在寻找仅使用 C# 的解决方案。

 ******谢谢

编辑：目标是在 html 页面上显示每个进程及其相应的应用程序域。理想情况下，会有一个函数遍历所有正在运行的进程并检索此信息。

检索当前进程的所有应用程序域的代码：

```
 private static List<AppDomainInf> GetAppDomains()
    {
        IList<AppDomain> mAppDomainsList = new List<AppDomain>();
        List<AppDomainInf> mAppDomainInfos = new List<AppDomainInf>();

        IntPtr menumHandle = IntPtr.Zero;
        ICorRuntimeHost host = new CorRuntimeHost();

        try
        {
            host.EnumDomains(out menumHandle);
            object mTempDomain = null;

            //add all the current app domains running
            while (true)
            {
                host.NextDomain(menumHandle, out mTempDomain);
                if (mTempDomain == null) break;
                AppDomain tempDomain = mTempDomain as AppDomain;
                mAppDomainsList.Add((tempDomain));
            }

            //retrieve every app domains detailed information
            foreach (var appDomain in mAppDomainsList)
            {
                AppDomainInf domainInf = new AppDomainInf();

                domainInf.Assemblies = GetAppDomainAssemblies(appDomain);
                domainInf.AppDomainName = appDomain.FriendlyName;

                mAppDomainInfos.Add(domainInf);
            }

            return mAppDomainInfos;
        }
        catch (Exception)
        {
            throw; //rethrow
        }
        finally
        {
            host.CloseEnum(menumHandle);
            Marshal.ReleaseComObject(host);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:28:23.763

使用位于 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\MdbgCore.dll 内的 MdbgCore.dll：

```
CorPublish cp = new CorPublish();
foreach (CorPublishProcess process in cp.EnumProcesses())
            {
                    foreach (CorPublishAppDomain appDomain in process.EnumAppDomains())
                    {

                    }
                } 
```******

# cordova - 使用phonegap，存储数据的好方法是什么？

> ID：14758916
> 
> 赞同：0
> 
> 时间：2013-02-07T19:03:09.050
> 
> 标签：cordova

我正在使用phonegap 2.2.0。
我从我的服务器以 JSON 格式将数据下载到应用程序。

数据存储在 mySQL 数据库中，我在服务器上使用 PHP 连接到数据库。

每条数据记录由大约 10 个不同的字段组成，主要是较短的字符串，有些可能较长。即，我有一个可能包含 256 个字符的描述字段。

我想从数据库中检索大约一千条记录。只是一个估计，但可能不会更多。

处理这些数据的好方法是什么？它是否足够小，可以保存在我的 phonegap 应用程序的内存中？如果没有，坚持什么是首选：

*   本地存储
*   还是文件API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:11:07.990

在我的例子中，我还创建了一个从远程数据库检索数据的 PhoneGap 应用程序。如果 WiFi 连接断开，应用程序会检索本地保存在设备上的数据。当最后一个 WiFi 连接可用时，文件保存为 filename.json（json 格式）。还使用了 localStorage 对象，因此应用程序的每个页面都可以访问数据，而无需再次重新读取同一文件以提高应用程序的性能。

# c# - C# 通过登录从 Web 下载文件

> ID：14758917
> 
> 赞同：4
> 
> 时间：2013-02-07T19:03:14.587
> 
> 标签：c#, http

我已经可以使用此代码通过重定向（我正在保存 cookie）登录到网页

```
 CookieCollection cookies = new CookieCollection();
        HttpWebRequest cookieRequest = (HttpWebRequest)WebRequest.Create("https://www.loginpage.com/"); 
        cookieRequest.CookieContainer = new CookieContainer();
        cookieRequest.CookieContainer.Add(cookies);
        HttpWebResponse cookieResponse = (HttpWebResponse)cookieRequest.GetResponse();
        cookies = cookieResponse.Cookies;

        string postData = "name=********&password=*********&submit=submit";
        HttpWebRequest loginRequest = (HttpWebRequest)WebRequest.Create("https://www.loginpage.com/");
        loginRequest.CookieContainer = new CookieContainer();
        loginRequest.CookieContainer.Add(cookies);
        loginRequest.Method = WebRequestMethods.Http.Post;
        loginRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
        loginRequest.AllowWriteStreamBuffering = true;
        loginRequest.ProtocolVersion = HttpVersion.Version11;
        loginRequest.AllowAutoRedirect = true;
        loginRequest.ContentType = "application/x-www-form-urlencoded";

        byte[] byteArray = Encoding.ASCII.GetBytes(postData);
        loginRequest.ContentLength = byteArray.Length;
        Stream newStream = loginRequest.GetRequestStream(); //open connection
        newStream.Write(byteArray, 0, byteArray.Length); // Send the data.
        newStream.Close(); 
```

这工作正常，但我需要从那里下载 .xls 文件，它位于此处（例如）

```
https://www.loginpage.com/export_excel.php?export_type=list 
```

为此我尝试了这段代码

```
 HttpWebRequest wr = (HttpWebRequest)HttpWebRequest.Create("https://www.loginpage.com/export_excel.php?export_type=list");
        HttpWebResponse ws = (HttpWebResponse)wr.GetResponse();
        Stream str = ws.GetResponseStream();
        byte[] inBuf = new byte[100000];
        int bytesReadTotal = 0;
        string path = @"d:\test.xlsx";
        FileStream fstr = new FileStream(path, FileMode.Create, FileAccess.Write);
        while (true)
        {
            int n = str.Read(inBuf, 0, 100000);
            if ((n == 0) || (n == -1))
            {
                break;
            }

            fstr.Write(inBuf, 0, n);

            bytesReadTotal += n;
        }
        str.Close();
        fstr.Close(); 
```

但它不工作，现在我坚持这个

```
 string dLink = "https://www.loginpage.com/export_excel.php?export_type=list";
        HttpWebRequest fileRequest = (HttpWebRequest)HttpWebRequest.Create(dLink);
        fileRequest.CookieContainer = new CookieContainer();
        fileRequest.CookieContainer.Add(cookies);
        fileRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
        HttpWebResponse fileResponse = (HttpWebResponse)fileRequest.GetResponse();

        for (int i = 0; i < fileResponse.Headers.Count; ++i)
        richTextBox1.Text += "\nHeader Name: " + fileResponse.Headers.Keys[i] + ", Value :" + fileResponse.Headers[i]; 
```

当然不是下载文件。我现在正在尝试获取标题以了解我从网络上得到了什么？我已经用我的脚本从 rghost 或 filehippo 等文件共享页面下载了一些文件，但是这个文件不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T19:38:48.217

这应该做的工作！

```
 CookieContainer cookieJar = new CookieContainer();
        CookieAwareWebClient http = new CookieAwareWebClient(cookieJar);

        string postData = "name=********&password=*********&submit=submit";
        string response = http.UploadString("https://www.loginpage.com/", postData);

        // validate your login! 

        http.DownloadFile("https://www.loginpage.com/export_excel.php?export_type=list", "my_excel.xls"); 
```

我用过`CookieAwareWebClient`

```
public class CookieAwareWebClient : WebClient
{
    public CookieContainer CookieContainer { get; set; }
    public Uri Uri { get; set; }

    public CookieAwareWebClient()
        : this(new CookieContainer())
    {
    }

    public CookieAwareWebClient(CookieContainer cookies)
    {
        this.CookieContainer = cookies;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = this.CookieContainer;
        }
        HttpWebRequest httpRequest = (HttpWebRequest)request;
        httpRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
        return httpRequest;
    }

    protected override WebResponse GetWebResponse(WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        String setCookieHeader = response.Headers[HttpResponseHeader.SetCookie];

        if (setCookieHeader != null)
        {
            //do something if needed to parse out the cookie.
            if (setCookieHeader != null)
            {
                Cookie cookie = new Cookie(); //create cookie
                this.CookieContainer.Add(cookie);
            }
        }
        return response;
    }
} 
```

* * *

[来源和信用：`CookieAwareWebClient`](http://rockycode.com/blog/creating-cookie-aware-webclient/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T07:49:40.980

如果客户帐户已经是该站点的有效用户，您只需要在下载之前使用默认凭据，就像这样..

```
WebClient Client=new WebClient();
Client.UseDefaultCredentials=true;
Client.DownloadFile(url, destination); 
```

# php - Submitteremail doesn't seem to work PHP FormEmail

> ID：14758920
> 
> 赞同：1
> 
> 时间：2013-02-07T19:03:26.027
> 
> 标签：php, email, formmail

I am trying to figure out what is wrong with the PHP code that it is not sending copies to the form submitter. I have the following in my php file;

```
$submitter = $_POST['submitteremail'];
if ($submitter == '') $submitter = 'info@info.com';
if (strstr($submitter, "\n") || strlen($submitter) > 50) die("Begone, foul spammer."); 
```

And then I have this `<input type="hidden" name="submitteremail" value="yes">` in the html for the form. And this for the email text box

```
<p><label>Email: <span class="style34">___</span></label> <input name="Email" type="text" id="submitteremail" size="51"/></p> 
```

From everything I know, which admittedly isn't a lot, this should work. I only have a very basic knowledge of PHP, so please go easy on me in your replies.

Thank you from the bottom of my heart for any help any of you can provide.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:07:58.043

`submitteremail`当您应该使用名称时，您通过字段的 ID 进行引用`Email`

虽然我仍然不能保证你的电子邮件会被发送，因为你没有包含那部分代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:08:07.060

name 是填充 $_POST 数组的字段，所以

```
name="Email" 
```

应该

```
name="submitteremail" 
```

或者

```
$submitter = $_POST['submitteremail']; 
```

应该

```
$submitter = $_POST['Email']; 
```

# php - PHP foreach 循环混乱？

> ID：14758921
> 
> 赞同：1
> 
> 时间：2013-02-07T19:03:26.837
> 
> 标签：php, loops, foreach

所以一个简单的例子是

```
$ar = array("some text","more text","yet more text");

foreach($ar as $value){

echo $value."<br>";

} 
```

我得到结果

```
some text
more text
yet more text 
```

所以我的问题是，当我们在 foreach 循环“$ar as $value”中执行此操作时，我知道 $ar 是数组，但是第二个 $value 是简单变量还是另一个数组呢？因为我们也可以通过以下方式做到这一点

```
foreach($ar as $value){

echo $value[0]."<br>";

} 
```

这会导致

```
s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:04:52.687

在 PHP 中，字符串是字节数组。引用位置`0`是`$value`指`0`字符串 ( `s`in `some test`) 中的位置 ( )

您的实际数组如下所示：

```
大批
(
    [0] => 一些文字
    [1] => 更多文字
    [2] => 还有更多文字
)
```

如果要访问数组的索引位置，可以执行以下操作：

```
foreach($ar as $key=>$val) {
    echo "$key - $val";
} 
```

这将输出：

```
0 - 一些文字
1 - 更多文字
2 - 还有更多文字
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:05:23.697

`$value`是数组中的一个值，而不是数组本身，除非您有嵌套数组 ( `array(array('a','b'),array('b','c'))`)。但是，下标字符串仍然是可能的，这就是您获得字符串第一个字符的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T19:05:37.103

问题是`$value[0]`访问字符串的第一个字符。

字符串在内部表示为数组。所以访问字符串的索引 0 就像访问第一个字符一样。

这就是它打印“s”的原因，因为您的字符串“some text”以 s 开头

你可以看到你的例子如下

```
array(
    [0] => array(
        [0] => 's',
        [1] => 'o',
        [2] => 'm',
        [3] => 'e',
        //...
    ),
    [1] => array(
        [0] => 'm',
        [1] => 'o',
        [2] => 'r',
        [3] => 'e',
        //...
    ),
    //...
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T19:07:02.527

你应该得到

```
 s m y 
```

在不同的行上。

顺便说一句，`br`标签是旧帽子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T19:09:35.310

String access and modification by character is possible in PHP. What you need to know, and probably didn't know is that while strings are expresses as string, sometimes they can be considered as arrays: let's look at this example:

```
$text = "The quick brown fox..."; 
```

Now, if you were to echo `$text[0]` you would get the first letter in the string which in this case happens to be `T`, or if you wanted to modify it, doing `$text[0] = "A";` then you will be changing the letter `"T"` to `"A"`

Here is a good tutorial from the [PHP Manual](http://www.php.net/manual/en/language.types.string.php#language.types.string.substr), It shows you how strings can be accessed/modified by treating them as an array.

```
<?php
// Get the first character of a string
$str = 'This is a test.';
$first = $str[0];

// Get the third character of a string
$third = $str[2];

// Get the last character of a string.
$str = 'This is still a test.';
$last = $str[strlen($str)-1]; 

// Modify the last character of a string
$str = 'Look at the sea';
$str[strlen($str)-1] = 'e';

?> 
```

BTW: If you had only wanted to display, the first value inside your array, you could use something like

```
<?php
$ar = array("some text","more text","yet more text");

for ($i=1; $i<=1; $i++)
  {
  echo $ar[0];
  }

?> 
```

# google-app-engine - 最具成本效益的 GAE 应用程序设置？

> ID：14758929
> 
> 赞同：0
> 
> 时间：2013-02-07T19:03:57.967
> 
> 标签：google-app-engine, python-2.7, memcached, google-cloud-datastore

我得到的一个 GAE python webapp 将其成本平均分为 1) 前端实例和 2) 数据读取。我能想到的降低数据读取成本的方法是使用 memcache 存储更多项目。但我不知道如何降低前端实例的成本。我正在使用F1设置，我怎么知道其他设置是增加还是减少成本？如果我启用 PageSpeed 服务会怎样？ ![在此处输入图像描述](../Images/2599419e681b3bb3fa6166a0656fac8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:20:51.220

关于 PageSpeed 服务费用：

> 目前，该服务免费提供给有限的网站管理员。

[在这里](https://developers.google.com/speed/docs/pss/faq#howmuchdoesitcost)查看更多信息。但另一方面，文档中有一篇文章（[启用 PageSpeed 优化服务](https://developers.google.com/appengine/docs/adminconsole/performancesettings#pagespeed)）说：

> 使用 PageSpeed 需要支付少量费用（除了常规带宽费用外，每 GB 带宽 0.39 美元）...

关于降低前端实例成本，您可以拥有较少数量的空闲实例，因为这样可以降低成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T06:25:14.067

绝对要广泛使用 Memcache，并注意保持缓存与 Datastore 同步。

稍微增加 Pending Latency 会使 AppEngine 暂时推迟生成额外的服务器实例。如果您的站点吞吐量处于中低水平，则对性能的影响应该可以忽略不计。另一方面，节省的成本也可能微不足道。试一试不会有什么坏处。

# css - 包含小于子级的 div

> ID：14758932
> 
> 赞同：12
> 
> 时间：2013-02-07T19:04:19.067
> 
> 标签：css

鉴于以下

```
#container {
    border:solid 3px red;
}

#left {
    float: left;
    background-color: lightblue;
    height: 300px;
}

#right {
    float: left;
    background-color: coral;
    height: 300px;
}
```

```
<div id='container'>
    <div id='left'>Left content</div>
    <div id='right'>Right content</div>
</div>
```

（见：http: [//jsfiddle.net/ericjohannsen/JCPEH/1/](http://jsfiddle.net/ericjohannsen/JCPEH/1/)）

为什么`container`显然没有任何区域（也就是说，它的高度为零，加上边框）？`div`我天真地期望它和它所包含的孩子一样高。

设置这个的正确方法是什么，以便`div`包含两个孩子和孩子一样高？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T19:07:06.283

你需要清除你的浮动。您可以通过 clearfix 类执行此操作：

```
.clearfix:before,
.clearfix:after {
    content: " "; 
    display: table; 
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}

#container {
    border:solid 3px red;
}

#left {
    float: left;
    background-color: lightblue;
    height: 300px;
}

#right {
    float: left;
    background-color: coral;
    height: 300px;
}
```

```
<div id='container' class="clearfix">
    <div id='left'>Left content</div>
    <div id='right'>Right content</div>
</div>
```

或清算要素：

```
.clear {
  clear:both;
}

#container {
    border:solid 3px red;
}

#left {
    float: left;
    background-color: lightblue;
    height: 300px;
}

#right {
    float: left;
    background-color: coral;
    height: 300px;
}
```

```
<div id='container'>
    <div id='left'>Left content</div>
    <div id='right'>Right content</div>
    <div class="clear"><!-- --></div>
</div>
```

更新小提琴：http: [//jsfiddle.net/JCPEH/5/](http://jsfiddle.net/JCPEH/5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T19:06:33.160

这是因为`floats`它们在被清除之前不是布局的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T19:07:00.620

像`float`其他一些“命令”（如位置相对/绝对/修复）从正常渲染流中删除元素。
结果之一是，它不再影响其父元素的渲染方式。

[你可以在这里开悟](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T19:07:01.697

在关闭大 div 之前添加一个`<div id="clear"></div>`并在 css 中添加 #clear{clear:both;}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T19:09:33.703

将容器的位置设置为绝对位置，这样可以解决问题。[http://jsbin.com/ifojug/1/](http://jsbin.com/ifojug/1/) jsfiddle 由于某种原因无法在我的浏览器上运行

# mysqli - MySQL布尔类型返回布尔查询？

> ID：14758938
> 
> 赞同：0
> 
> 时间：2013-02-07T19:04:26.243
> 
> 标签：mysqli, boolean

我正在尝试查看是否可以测试特定于 SQL 数据库中布尔值的特定结果。

```
if($result = $mysqli->query("SELECT * FROM `work_orders` WHERE `is_open` = '1' ")) 
{
    show_workorder($result);
} 
```

然后我想执行：

```
#TRUE allows this to show
if($result = True){
    echo "<p> No current work orders are open. Good Work !</p>\n";
    return;
} 
```

如果我在 work_orders.is_open 更改数据库，则布尔值为 0，表示其“未打开”.. 上面 TRUE 的 if 语句仍然显示...

我确信我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:12:32.153

似乎我已经解决了我自己的问题：

if 语句应该只测试是否返回的行。

```
if($result->num_rows == 0) 
```

这将允许它显示是否没有返回任何内容。如果返回结果，那么它将继续前进。

# ruby-on-rails - Rails 引擎：引擎视图或局部视图作为可重用的小部件

> ID：14758939
> 
> 赞同：1
> 
> 时间：2013-02-07T19:04:28.913
> 
> 标签：ruby-on-rails, rails-engines, rails-cells

我们的团队开始使用大量引擎，我们希望这些引擎在用户登录主应用程序或主机应用程序时显示“小部件”。我们已经在某种程度上使用了[公共活动gem。](https://github.com/pokonski/public_activity)

本质上，我们需要让宿主应用程序循环遍历每个安装的引擎，然后如果引擎有“小部件”，宿主应用程序应该渲染它们。理想情况下，引擎应该告诉应用程序如何渲染视图。

我发现[Cells](https://github.com/apotonick/cells) gem 很有前途，但它需要主机应用程序确切地知道要渲染哪些单元格。（我认为解决这个问题的一种快速方法是让引擎告诉应用程序路径。）

我应该研究什么 MVC、Rails 等模式？

# .htaccess - 编写 Htaccess

> ID：14758941
> 
> 赞同：0
> 
> 时间：2013-02-07T19:04:30.167
> 
> 标签：.htaccess

我对 htaccess 重写很感兴趣。今天遇到一个问题。。

我希望我的网址 **www.try.com/formal-shoes.php?catId=2**显示为**www.try.com/second**

第二个**www.try.com/formal-shoes.php?catId=1**显示为**www.try.com/first**像这样。请帮我这样做。应该是什么规则...

正如我所写的一样

```
<IfModule mod_rewrite.c>
RewriteRule formal-shoes.php?catId=2 second/$1 [R=301,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:55:37.610

你看错了！您的重写规则应如下所示：

```
RewriteEngine on

RewriteRule ^/second$ index.php?catId=2 [QSA,L]
RewriteRule ^/first$ index.php?catId=1 [QSA,L] 
```

注意：我们正在将预期的 url 重写为实际的 url。还有，`RewriteEngine on`必须的！

PS。它的菜鸟不是 nube :)

# c++ - 从字符串列表列表的映射中获取字符串

> ID：14758947
> 
> 赞同：1
> 
> 时间：2013-02-07T19:04:44.620
> 
> 标签：c++, string, list, map

有一个关于如何在 C++ 中简化一些代码的问题。

所以我们在我的 CS 课程中得到了这个实验室，我们必须根据输入文件生成一个大句子，将读取的行存储在字符串列表列表的映射中（哇！）。我们必须使用递归函数来搜索它。

所以映射键是一个字符串。第一个列表是行的集合，第二个列表是从文件中解析的字符串的集合。

```
map<string, list<list<string> > > 
```

我需要深入到字符串列表以将其重构为一个字符串。我已经设置了一些迭代器来解决它，但是当它到达我的迭代器声明时，我得到了“分段错误 11”。

“语法”是已经给定输入并通过引用传递的映射。

“不完整”是一个字符串，等于传递给函数的键。

代码片段：

```
string found = "";
map<string, list<list<string> > >::iterator section = grammar.find(incomplete);
list<list<string> > listItem = section->second;
list<list<string> >::iterator lIt = listItem.begin();
srand(time(NULL));
++lIt;
advance (lIt, rand() % listItem.size());
list<string> stringItem = *lIt;
while (stringItem.empty() == false){
    found = found + " " + stringItem.front();
    stringItem.pop_front();
} 
```

解释 rand() 的需要：我们的第一个列表有多个列表，我们随机选择一个来生成句子。我正确使用了吗？

它停在这里。我敢肯定有一种更简单的方法可以进入该列表，但我似乎无法弄清楚，我猜如果“分段错误 11”，我会消耗大量内存来声明所有这些"被抛出。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:15:17.940

可能还有更多问题，但这里有两个明显的问题：

1.  你不检查是否`grammar.find(incomplete);`真的找到了一个元素。如果搜索失败，它会返回`grammar.end()`，而你的其余部分可能会爆炸。

2.  您尝试查找随机元素的方式存在问题：

`list<list<string> >::iterator lIt = listItem.begin();`

`*lIt`现在是第一个列表`listItem`。

`++lIt;`

`*lIt`现在是 中的第二个列表`listItem`。

`advance (lIt, rand() % listItem.size());`

这可能会尝试将迭代器推进得太远。如果您的列表大小是`n`您最多可以前进的`n-2`步骤，否则您会超出终点。但`rand() % n`可以`n-1`。

# php - 在文档中查找所有相似的属性，并根据值更改输出

> ID：14758948
> 
> 赞同：0
> 
> 时间：2013-02-07T19:04:51.290
> 
> 标签：php, javascript, xml, xml-parsing, simplexml

我一直在处理这个列表，它将提供来自 xml 文件的信息。我正在使用的标记如下：

```
<?php
    $xml_file = '/path';
    $xml = simplexml_load_file($xml_file);

    foreach($xml->Continent as $continent) {
       echo "<div class='continent'>".$continent['Name']."<span class='status'>".$continent['Status']."</span>";
         foreach($continent->Country as $country) {
           echo "<div class='country'>".$country['Name']."<span class='status'>".$country['Status']."</span>";
              foreach($country->City as $city) {
                 echo "<div class='city'>".$city['Name']."<span class='status'>".$city['Status']."</span></div>";
              }
              echo "</div>"; // close Country div
         }
         echo "</div>"; // close Continent div
    }

?> 
```

我想要完成的是改变“状态”。不管元素是什么，“状态”只有两个值，并且总是“红色”或“蓝色”。我要做的是遍历整个文档，找到“状态”属性，查看值是否为“红色”，然后显示一个图标或一些文本，但如果它是蓝色的，则不显示任何内容。我遇到过不同的例子，但没有一个能表现出这种普遍性。大多数示例用于定位特定节点，然后显示它的属性。如果可能的话，我还试图避免必须在每个循环中创建此规则，而是将其应用于整个文档（如果这似乎是最好的方法。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:20:51.383

使用 css 选择器而不是 javascript。这将使您的代码更轻松、更简单！

例如：

```
<?php
    $xml_file = '/path';
    $xml = simplexml_load_file($xml_file);

    foreach($xml->Continent as $continent) {
       echo "<div class='continent'>".$continent['Name']."<span class='status ". cssForStatus($continent['Status'])."'></span>";
         foreach($continent->Country as $country) {
           echo "<div class='country'>".$country['Name']."<span class='status ". cssForStatus($country['Status'])."'></span>";
              foreach($country->City as $city) {
                 echo "<div class='city'>".$city['Name']."<span class='status ". cssForStatus($city['Status'])."'></span></div>";
              }
              echo "</div>"; // close Country div
         }
         echo "</div>"; // close Continent div
    }

    function cssForStatus($status='')
    {
      switch ($status) {
        case 'red':
          $css = "red";
          break;

        default:
          $css = "blue";
          break;
      }
      return $css;
    } 
```

而你的CSS可以是：

```
span.status {
    height: 10px;
    width: 10px;
}

span.status.red {
    background-color: "red";
}

span.status.blue {
    background-color: "blue";
} 
```

我们正在使用多个 css 类的概念

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:34:05.920

只需稍微更改您的代码以将状态添加为您的 div 类。

例子：

```
echo "<div class='continent status-{$continent['Status']}'>{$continent['Name']}</div>"; 
```

这将输出（如果是名为欧洲的红色大陆）

```
<div class='continent status-red'>Europe</div> 
```

然后将此 CSS 添加到您的 html 中：

```
.status-red {
    background-color: red;
}

.status-blue {
    background-color: blue;
} 
```

或者沿着这些思路

# android - 使用不同的 urls/环境从命令行构建 android 项目

> ID：14758953
> 
> 赞同：5
> 
> 时间：2013-02-07T19:05:00.550
> 
> 标签：android, maven, build

我想从命令行构建 android 项目。通常，我为两个环境（商家和生产）构建项目，我想从命令行自动为商家和生产 URL 执行此操作，而无需我每次都在项目中手动指定。例如，说，为生产环境构建一个项目，或者说，通过在命令本身中指定环境来为商家环境构建一个项目。可以做到吗？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:04:41.483

您可以使用 Maven、Ant 和 Gradle 构建您的项目。他们都会做你想做的事。
我使用 Maven，因此我将专注于 Maven 配置。如果您不了解 Maven 的工作原理，这可能是一项复杂的任务。

## 配置 Maven

此处描述的第一个先决条件：
[https ://code.google.com/p/maven-android-plugin/wiki/GettingStarted](https://code.google.com/p/maven-android-plugin/wiki/GettingStarted)

配置您的项目以使用 android maven 插件构建：
[https ://code.google.com/p/maven-android-plugin/](https://code.google.com/p/maven-android-plugin/)

Eclipse 的示例配置：
[https ://code.google.com/p/maven-android-plugin/wiki/QuickStartForEclipseProject](https://code.google.com/p/maven-android-plugin/wiki/QuickStartForEclipseProject)

您还可以使用以下命令生成示例项目：

```
mvn archetype:generate \
  -DarchetypeArtifactId=android-quickstart \
  -DarchetypeGroupId=de.akquinet.android.archetypes \
  -DarchetypeVersion=1.0.8 \
  -DgroupId=com.myproject \
  -DartifactId=my-android-application 
```

## 创建个人资料

第二步是为生产创建构建配置文件。

**重要提示：**以下配置文件片段基础工作 pom.xml 使用`mvn archetype:generate`上面的命令命令生成。

下面列出的配置文件替换了 res/values/strings.xml 文件中的字符串

形式：

```
<string name="hello">Whatever text</string> 
```

到：

```
 <string name="hello">productionURL</string> 
```

配置文件（将其包含在上面的 pom.xml 中`</project>`）：

```
<profiles>
    <profile>
        <id>production</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>com.google.code.maven-replacer-plugin</groupId>
                    <artifactId>replacer</artifactId>
                    <version>1.5.2</version>
                    <executions>
                        <execution>
                            <phase>process-sources</phase>
                            <goals>
                                <goal>replace</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <file>${project.basedir}/res/values/strings.xml</file>
                        <regex>true</regex>
                        <replacements>
                            <replacement>
                                <token><![CDATA[(<string name="hello">)(.+)(</string>)]]></token>
                                <value><![CDATA[$1productionURL$3]]></value>
                            </replacement>         
                        </replacements>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <inherited>true</inherited>
                    <configuration>
                        <sign>
                            <debug>true</debug>
                        </sign>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

它使用[https://code.google.com/p/maven-replacer-plugin/](https://code.google.com/p/maven-replacer-plugin/)替换字符串。

对于商家只需复制粘贴上面列出的内容，`<profile>`更改`<id>production</id>`为更新 url。`<id>merchant</id>``<value>`

## 建造

```
mvn install -Pproduction 
```

或者

```
mvn install -Pmerchant 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T07:58:51.213

使用 Ant，您可以通过复制模板资源文件或模板 java 文件来定制您的项目，这些文件将在运行标准 android Ant 文件的发布目标之前生成。

生成的文件应该被版本控制忽略。

这是一个示例 ANT 目标，在使用 ant 版本构建应用程序之前应该调用它。它生成一个java文件和一个资源文件：

```
<target name="updateMyConfiguration"">
    <copy file="./MyTemplateConfiguration.java"
        tofile="./src/com/mycompany/android/myapp/MyCodeConfiguration.java"
        overwrite="true">
    </copy>
    <replace file="./src/com/mycompany/android/myapp/MyCodeConfiguration.java">
        <replacefilter token="token_my_boolean"
            value="${code.configuration.my_boolean}" />
        <replacefilter token="token_my_integer"
            value="${code.configuration.my_integer}" />
        <replacefilter token="token_my_string"
            value="${code.configuration.my_string}" />
    </replace>
    <copy file="./MyTemplateRes.xml"
        tofile="./res/values/MyResConfiguration.xml"
        overwrite="true">
    </copy>
    <replace file="./res/values/MyResConfiguration.xml">
        <replacefilter token="token_my_string"
            value="${res.configuration.my_string}" />
        <replacefilter token="token_my_integer"
            value="${res_configuration.my_integer}" />
    </replace>
</target> 
```

```
 package com.mycompany.android.myapp;

public final class MyCodeConfiguration
{
    static final boolean my_boolean = token_my_boolean;
    static final String my_string = "token_my_string";
    static final int my_integer = token_my_integer;
} 
```

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <add-resource type="string" name="my_string"/>
    <string name="my_string">token_my_string</string>
    <add-resource type="integer" name="my_integer"/>
    <integer name="my_integer">token_my_integer</integer>
</resources> 
```

然后你只需要这样运行 Ant：

```
ant updateMyConfiguration -Dres.configuration.string=MyCustomBuildString -Dcode.configuration.my_integer=1234 
```

# java - Android 中的 PushPlugin 源问题 - 尝试 PhoneGap 推送通知

> ID：14758956
> 
> 赞同：0
> 
> 时间：2013-02-07T19:05:11.020
> 
> 标签：java, android, eclipse, cordova

我正在尝试将*PushPlugin*插件 ( [http://goo.gl/xn8z4](http://goo.gl/xn8z4) ) 插入到我的 Android PhoneGap 应用程序中。

我在这里卡住了[http://goo.gl/b03fs](http://goo.gl/b03fs)。我有 80-93% 的信心认为我的 Java 源代码在正确的位置。

Java 正在尝试导入`org.apache.cordova.example.R`但似乎找不到它。我怀疑一旦它开始导入它，我就是金子。

我正在使用 Cordova 2.2 jar/classes。

这是我看到包导入失败的地方：http: [//goo.gl/U3VlI](http://goo.gl/U3VlI)

这是代码试图与无法加载[http://goo.gl/LJbLb的包中的对象对话的地方](http://goo.gl/LJbLb)

感觉这是一个简单的解决方案，但是今天下午我的头骨似乎过厚了。

谢谢参观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:18:48.740

男孩，我多么希望我早点尝试过：解决这个问题的方法是将 Cordova(PhoneGap) 库更新到 v 2.3。

我的头上和附近的墙上有一个血淋淋的地方，我希望这篇文章可以帮助其他人避开。

# javascript - 使用 .Each 在日期匹配时显示 Div

> ID：14758958
> 
> 赞同：2
> 
> 时间：2013-02-07T19:05:18.443
> 
> 标签：javascript, jquery

我有一个职位发布列表，并希望在日期等于今天的日期时显示一个显示“新”的 div。

为了创建它，我创建了一个 javascript 代码，它将在每组外部 div 的循环上执行，但是我无法正确运行 .each 函数。

**这是 JSFiddle 的链接：http: [//jsfiddle.net/jeremyccrane/2p9f7/](http://jsfiddle.net/jeremyccrane/2p9f7/)**

这是 HTML 代码：

```
<div class="outer">
    <div class="job-date">07-Feb-13</div>
    <div class="new" style="display:none;">NEW</div>
    <div class="value"></div>
</div>
<div class="outer">
    <div class="job-date">12-Feb-13</div>
    <div class="new" style="display:none;">NEW</div>
    <div class="value"></div>
</div> 
```

这是Javascript代码：

```
$( ".outer" ).each(function(i) {
        var jd = $(".job-date").text();
        j = jd.substr(0,2);
        var today = new Date();
        var dd = ( '0' + (today.getDate()) ).slice( -2 )
        $('.value').html(dd + "/" + j);    
        if(dd === j) {
            $('.new').show();
        } else {
            $('.new').show();   
        }
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:14:43.027

不太确定您认为问题是什么，但我可以看到几个问题。主要是，当你这样做时：

```
$('.new').show(); 
```

你在类 new 的所有匹配元素上调用 show() ，而不仅仅是你所在的外部“下面”的元素。试试这个：

```
$('.new', this).show(); 
```

您正在设置新的以显示日期比较的任何方式。我在下面更新了你的小提琴：

```
$( ".outer" ).each(function(i) {
    var jd = $(".job-date", this).text();
    j = jd.substr(0,2);
    var today = new Date();
    var dd = ( '0' + (today.getDate()) ).slice( -2 )
    $('.value', this).html(dd + "/" + j);    
    if(dd === j) {
        $('.new', this).show();
    } else {
       // $('.new', this).show();   
       // do something different here
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:13:15.857

你在这里有两个问题。首先，无论日期是否匹配，您都会触发 show() ：

```
 if(dd === j) {
        $('.new').show();
    } else {
        $('.new').show();   // <-- shouldn't show in this case
    } 
```

第二个问题是，当您只想显示特定的 div 时，您使用“new”类显示所有内容。您需要为每个“新”div 提供唯一的 ID，然后修复您的代码以仅显示具有该特定 ID 的 div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T19:26:03.723

此代码似乎可以执行您想要的操作：

```
$(".outer").each(function(i) {
    var jd = $(this).find(".job-date").text();
    var j = jd.substr(0,2);
    var today = new Date();
    var dd = ('0' + (today.getDate())).slice(-2);
    $(this).find('.value').html(dd + "/" + j);    
    if(dd == j) {
        $(this).find('.new').show();
    } else {
        $(this).find('.new').hide();   
    }
    return false;
}); 
```

[http://jsfiddle.net/Dk4dQ/](http://jsfiddle.net/Dk4dQ/)

你的主要问题是你错过了所有的`$(this).find()`电话。您正在遍历容器。使用`$(this).find()`将为您提供这些容器中的控件。普通`$()`调用将在文档中找到所有匹配的元素，这不是您想要的。

在`this`这种情况下，指的是容器。将它包装在 jQuery 函数中让我们可以使用 jQuery find 方法来获取它的孩子。

此外，正如其他人所提到的，`show()`无论成功还是失败，你都在 div 中，这又不是你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T19:33:56.700

您不需要复杂的迭代器函数。所有你需要的是：

```
$(".outer .job-date" ).filter(function() {
   return (Date.parse($(this).text()) / 86400000 | 0) == (new Date() / 86400000 | 0);
}).next().show(); 
```

*   `filter`对于你正在做的事情来说，这似乎是一个更好的选择`each`。首先，我们只想要日期等于今天的元素集。
*   为此，我们可以获取日期并摆脱时间部分。日期以自纪元以​​来的毫秒数表示。通过除以一天中的毫秒数（86400000 或 60*60*24*1000），然后截断任何小数部分（javascript 习惯用法：），`|0`我们正在比较自纪元以来的完整天数。
*   现在使用一组包含今天日期的元素，`next()`将每个匹配的元素推进到下一个兄弟元素（带有 class 的隐藏 div `new`），并`show()`显示它。

# ios - 在 Objective-C 中何时以及何时不使用 __block？

> ID：14758960
> 
> 赞同：10
> 
> 时间：2013-02-07T19:05:28.153
> 
> 标签：ios, objective-c, objective-c-blocks

使用block的时候，为什么有些变量需要__block，而其他变量，比如函数参数，你不需要呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-07T19:13:45.490

这个问题的措辞确实是错误的。这不是“我什么时候需要 __block？”，而是“__block 做什么？”。一旦你了解了它的作用，你就可以知道什么时候需要它。

通常，当一个块捕获一个变量时（捕获发生在一个块引用自身外部的变量时），它会创建该变量的副本（注意，在对象的情况下，它会创建*指针*的副本而不是对象本身），并且如果它是一个对象，则保留它。

这意味着在正常行为下，您不能使用块来更改块外的值。此代码无效，例如：

```
int x = 5;
void(^block)() = ^{ x = 10; }; 
```

__block 限定符做了两个改变：最重要的是，它告诉编译器该块应该直接捕获它，而不是复制。这意味着您可以更新块外变量的值。不太重要，但仍然非常相关，当不使用 ARC 时，它告诉编译器不要保留捕获的对象。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-07T19:13:18.963

代码块可以访问在块被声明的范围内的任何变量。但是，在块范围之外声明的任何变量/对象在块内都是不可变的。你可以阅读它，但不能改变它。在对象的声明中设置 __block 标志允许在块的范围内对其进行更改。

编辑：这是一个例子：

```
NSString *myString = @"hello";
dispatch_sync(dispatch_get_main_queue(), ^{
    myString = @"hello world";
}); 
```

这不起作用，您将收到一条错误消息。

```
__block NSString *myString = @"hello";
dispatch_sync(dispatch_get_main_queue(), ^{
    myString = @"hello world";
}); 
```

问题解决了！

# html - 在 div 中居中文本

> ID：14758967
> 
> 赞同：0
> 
> 时间：2013-02-07T19:05:47.150
> 
> 标签：html, css

如何在 div 中将加号 + 居中。看起来它仍然是 8 像素和 5 从底部。我不知道我做错了什么：

```
 <div style="background: #ffffff; width: 180px; height: 20px; border: 1px solid #808080;">

            <div style="float: left;"><input style="padding-left: 4px; padding-right: 3px; height: 15px; width: 160px; border: none;" type="text"></div>

            <div style="display:table-cell; vertical-align:middle;font-size: 11pt; color: #779297;">+</div>

        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:16:49.517

您可以添加`line-height: (value)px`+ div，以解决顶部/底部对齐，以及`text-align: center;`解决右/左位置。

# c++ - 更改/添加 stl bitset<>::reference::operator=(int) 的行为

> ID：14758973
> 
> 赞同：1
> 
> 时间：2013-02-07T19:06:09.453
> 
> 标签：c++, stl

在将整数类型的变量分配给特定位时，我需要一个行为略有不同的位集。如果分配的整数小于 1，则该位应设置为零，否则应设置为 1。

作为一个简单的解决方案，我复制了 STL 位集，用 altbitset 替换了类名，调整了命名空间并包含保护，并`reference& operator=(bool __x)`在嵌套`reference`类中添加了以下函数：

```
template <typename T> 
reference& operator=(T i) {
    if (i<1) return operator=(false);
    return operator=(true);
} 
```

它按预期工作。

**问题是**是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:33:29.663

您不应该仅仅为了添加新功能而复制库。不仅如此，这个新函数非常不直观，甚至可能只是*阅读*代码的错误来源，更不用说编写代码了。

前：

```
bv[n] = -1; // I know a Boolean conversion on -1 will take place
assert(bv[n]); // of course, since -1 as a Boolean is true 
```

后：

```
bv[n] = -1; // I guess an integer < 1 means false?
assert(bv[n]); // Who changed my bitvector semantics?! 
```

*只需将其写出来，以便在您的*域中有意义：

```
bv[n] = (i < 1); 
```

请记住：最简单并不总是意味着最少的字符，而是意味着最清晰易读。

* * *

如果你*确实*想扩展现有类型的功能，你应该使用自由函数：

```
template <typename BitSet, typename Integer>
auto assign_bit_integer(BitSet& bits, const std::size_t bit, const Integer integer) ->
    typename std::enable_if<std::is_integral<Integer>::value,
                            typename BitSet::reference>::type
{
    return bits[bit] = (integer < 1);
} 
```

给予：

```
std::bitset<8> bits;

assign_bit_integer(bits, 0, 5);
// ERROR: assign_bit_integer(bits, 0, 5.5); 
```

但是对于这样一个没有明确“明显”名称的小函数来简洁地描述它的作用（`assign_bit_true_if_less_than_one_otherwise_false`至少可以说是冗长的），只需写出代码即可；无论如何，它说的是同样的事情。

# javascript - 如何安全地将内容从非安全页面发送到安全 URL？

> ID：14758974
> 
> 赞同：1
> 
> 时间：2013-02-07T19:06:16.213
> 
> 标签：javascript, https, security

我有一个旨在嵌入任何网页的 JavaScript 片段。此代码段将表单加载到它所嵌入的页面中。代码段然后将表单数据发送到安全 URL。这是问题所在，代码段加载表单的页面可能不安全，但我需要将表单数据安全地传输到安全的外部 URL。如果可能的话，我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:10:29.803

如果表单的 ACTION 属性将其定向到 HTTPS 目标，则内容将被加密并安全地传输到目标，而不管表单 HTML 本身最初是如何传输的：当用户提交表单时，浏览器会启动新的连接并发出针对目的地而不是当前浏览器位置的 POST 请求（我假设您的表单的 METHOD 是 POST，而不是 GET）。在这种情况下，该 POST 通过 HTTPS 进行，因为目标是“https://...”。

这并没有说明 XSS 的固有安全风险或可能嵌入在不安全页面上的东西，或者当 HTML 通过 JavaScript 通过 HTTP 传输时对表单的 MITM 攻击......你必须决定这些考虑是否对您的项目是值得的。也许您的 JavaScript 可以在其中嵌入带有表单的 IFRAME（对 IFRAME 的 SRC 使用 HTTPS）而不是 FORM 本身；这就是 Facebook 和其他人为防止在不安全页面上运行的其他脚本访问表单及其数据所做的事情 - 浏览器将根据其同源策略阻止来自其他脚本的此类尝试（每个流行的现代浏览器都可以依靠这样做），并且当 IFRAME 请求时，表单通过 HTTPS 传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:38:13.193

当您提交表单时，操作 URL 很重要，因此如果您的表单使用URL，无论表单本身是否托管在页面或页面`https://`上，它都会向该 URL 发出 POST 请求。`http://``https://`

但是，您还应该通过`https://`. 请参阅[WASP TLS 备忘单的第一条规则](https://www.owasp.org/index.php/Transport_Layer_Protection_Cheat_Sheet#Rule_-_Use_TLS_for_All_Login_Pages_and_All_Authenticated_Pages)（此原则不仅适用于登录页面，还适用于任何类似的表单）。

问题是，如果不通过`https://`用户可以看到验证的地址提供表单页面，用户就不能相信 MITM 攻击者没有更改此表单。例如，这样的攻击者可以`action`透明地替换属性以重定向到另一个站点，或者注入一些 JavaScript 来记录输入到该表单中的每个键，以收集敏感数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:09:18.937

HTTP 页面上加载的 JavaScript 将被正在修改您的流量的攻击者替换。修改后的 JavaScript 可以简单地将数据发布到某个地方的公众。因此，不可能安全地将数据从 HTTP 页面传输到 HTTPS 页面。除非您对我缺少的“安全”有其他定义？

# solr - Solr 1 vs Solr 4 Dismax Handler 的不同分数

> ID：14758983
> 
> 赞同：0
> 
> 时间：2013-02-07T19:06:39.240
> 
> 标签：solr, lucene, dismax

我已使用[此方法](https://stackoverflow.com/questions/6649583/upgrade-solr-1-4-index-to-solr-3-3)将我的 Solr 1.4 索引迁移到 Solr 4.0 ，并且我尽可能保持我的 solrconfig.xml 和 schema.xml 不变，同时仍然可以正常工作。

我正在使用 DisjunctionMaxQuery ( `dismax`/ `solr.DisMaxRequestHandler`) requestHandler 并比较 Solr 1.4 和 Solr 4 之间的搜索结果。在 URL 中使用**?debugQuery=on**，我可以看到`parsedQuery`Solr 版本之间的部分几乎相同，但生成的分数是不同的。（`explain`部分不同，但计算冗长且晦涩。**）**

示例查询：q=foo
示例响应：
**Solr 1.4：**

```
title: "foo (32-bit)"
score: 3.8850176 
```

**索尔 4.0：**

```
title: "foo (32-bit)"
score: 2.1525226 
```

尽管具有相同的请求处理程序和相同的索引，但什么会导致分数出现这种显着差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:21:22.977

如果解释部分不同，那么它使用不同的计算来计算分数，因此它们会有所不同。无论如何，分数都是相当随意的，基本上只用于在查询的一个结果集中进行比较，换句话说，将一个查询的分数与另一个查询的分数进行比较是没有意义的。这可能适用于不同版本的 solr，尤其是在计算方式不同的情况下。

# php - 包含外部代码时 CodeIgniter 隐藏非 CI 全局变量的问题

> ID：14758985
> 
> 赞同：0
> 
> 时间：2013-02-07T19:06:51.960
> 
> 标签：php, codeigniter, scope, global-variables, codeigniter-2

我正在尝试将 CI 引入遗留应用程序，但想使用一些已经存在于 CI 外部的全局变量。我一直在将它们加载到 /CI/config/config.php 并在视图中使用它来获取它们：

$this->config->item('myvar');

这很好用。但是，如果我在名为 sidebar.php 的模型中包含我的侧边栏，它想要访问存储在 globals.php 中的全局变量，它们会出现未定义的情况。请注意，sidebar.php 使用 include 语句从 globals.php 访问全局变量。此外，全局变量在 globals.php 中定义如下： $myvar = "bla";

globals.php 和 sidebar.php 在 CI 之外。这两个文件不需要执行功能。

有谁知道允许 CI 及其包含的文件访问其外部的全局变量的技巧？我不想过多地更改遗留代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:58:16.057

Codeigniter 提供了一个有用的辅助函数来解决这些情况。get_instance() 函数将返回单例对象，以便您可以访问它的许多精彩功能。以下是您如何执行此操作的示例。

```
$ci =& get_instance();
$ci->config->item('varname'); 
```

这是[文档](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)。您可以**在您的库中使用 CodeIgniter 资源的标题下找到参考资料**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T00:41:49.660

事实证明，我在旧代码无法访问的地方找到了 globals.php 文件的 include_once 语句。遗留代码已经有一个 include_once 语句，但它被忽略了 b/c 它已经包含在其他地方。

如果我打开 testfile.php，我假设它在 CI 中的行为与此类似：

**测试文件.php：**

```
include_once("globals.php");

function testf(){
  include("sidebar.php");
}

testf(); 
```

**边栏.php**

```
include_once("globals.php");

echo $myvar; //fails 
```

# asp.net-mvc - 我不知道如何在视图剃刀上使用表单操作

> ID：14758990
> 
> 赞同：0
> 
> 时间：2013-02-07T19:07:02.243
> 
> 标签：asp.net-mvc, razor

我正在尝试在我的表单提交按钮上保存 salesforce 中的值。我不知道如何在带有验证的视图剃须刀中使用表单操作方法....

这是我的salesforce代码，我需要在表单的提交按钮上实现它，以便它在salesforce中输入：

```
<form action="https://www.salesforce.com/servlet/..." method="POST" >
<input type=hidden name="oid" value="111">
<input type=hidden name="retURL" value = "http://test" /> 
```

这是我的视图页面：

```
@model nd.Models.PopupDemoModel 
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()){
    @Html.ValidationSummary(true)
    <fieldset>   
    <div class="editor-label grid_2">
        @Html.LabelFor(model => model.first_name )
    </div>
    <div class="editor-field grid_3">
        @Html.TextBoxFor(model => model.first_name , new { @class = "demo-field-longer" })
    </div>
    <div class="grid_3 error long" style="margin-left:250px">
    @Html.ValidationMessageFor(model => model.first_name )
    </div>
    <div class="clear"></div>
    <div class="editor-label grid_2">
        @Html.LabelFor(model => model.email )
    </div>
    <div class="editor-field grid_3">
        @Html.TextBoxFor(model => model.email , new { @class = "demo-field-longer" })
    </div>
    <div class="grid_3 error long" style="margin-left:250px">
    @Html.ValidationMessageFor(model => model.email )
    </div>
    <div class="clear"></div>
    <div class="editor-label grid_2">
        @Html.LabelFor(model => model.phone )
    </div>
    <div class="editor-field grid_3">
        @Html.TextBoxFor(model => model.phone , new {@class="demo-field-longer"})
    </div>
    <div class="grid_3 error long" style="margin-left:250px">
    @Html.ValidationMessageFor(model => model.phone )
    </div>
    <div class="clear"></div>
    <div class="editor-label grid_2">
        @Html.LabelFor(model => model.company )
    </div>
    <div class="editor-field grid_3">
        @Html.TextBoxFor(model => model.company , new { @class = "demo-field-longer" })
    </div>
    <div class="grid_3 error long" style="margin-left:250px">
    @Html.ValidationMessageFor(model => model.company)
    </div>
    <div class="clear"></div>

    <div class="clear"></div>
    <div class="grid_2 sub-spacer">&nbsp;</div>
    <div class="editor-field grid_2 submit">
        <input type="submit" value="Submit" id="demo-submit-button"/><br />
        @ViewData["DemoMessage"]
    </div>
    </fieldset>
} 
```

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:11:07.943

您可以按以下方式执行此操作：

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Post, new { id = "cssClassorId" }))  {

 } 
```

# asp.net-mvc-4 - 无法读取未定义的属性“聊天”

> ID：14758995
> 
> 赞同：1
> 
> 时间：2013-02-07T19:07:13.420
> 
> 标签：asp.net-mvc-4, signalr

我已经尝试了常见问题解答中的所有内容，它帮助我避免了我遇到的所有问题，除了

> （未捕获的类型错误：无法读取未定义的属性“聊天”）

这是我的代码：

```
[[

<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.signalR-1.0.0-rc2.min.js" type="text/javascript"></script>
 <script src="~/signalr/hubs" type="text/javascript"></script> 

<script type="text/javascript">
    $(function () {

        // Proxy created on the fly          
        var chat = $.connection.chat;

        // Declare a function on the chat hub so the server can invoke it          
        chat.client.addMessage = function (message) {
            $('#messages').append('<li>' + message + '</li>');
        };

        // Start the connection
        $.connection.hub.start().done(function() {
            $("#broadcast").click(function () {
                // Call the chat method on the server
                chat.server.send($('#msg').val());
            });
        });
    });
]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:12:02.890

只是为了提供帮助，当您定义“聊天”时，您是否在 .js 中使用了 [[ , ]] 方括号？

# html - 固定元素出现在没有 z 分数的元素后面。

> ID：14758996
> 
> 赞同：1
> 
> 时间：2013-02-07T19:07:18.040
> 
> 标签：html, css, position, absolute

我有“固定”定位元素（顶部导航栏）。当我滚动时，页面上的一些元素仍会出现在导航栏的“前面”。这些元素都不是绝对定位的，也没有 z-score。我还将导航栏的 z 分数设置为 900。

有任何想法吗？我在 Chrome 中。

# java - Java Swing - 带有自定义图形的滚动窗格

> ID：14758997
> 
> 赞同：1
> 
> 时间：2013-02-07T19:07:26.727
> 
> 标签：java, swing, graphics, awt

我目前有下面的代码。

```
public class cRunningView extends JInternalFrame {

    static final int xOffset = 30, yOffset = 30;
  public cRunningView() {
    // Get name;
    super("RUNNING", true, // resizable
            false, // closable
            true, // maximizable
            true);// iconifiable

    System.out.println("##" + "p.getName()");
    // ...Then set the window size or call pack...
    setSize(500, 200);

    // Set the window's location.
    setLocation(xOffset * 0, yOffset * 0);

    JScrollPane scrollPane = new JScrollPane();

}

} 
```

我的目标是在屏幕的一半上有一个带有多个按钮和一个框/矩形的 JInternalFrame。

在这个框中，我希望能够绘制图形，例如从 x,y 到 x,y 绘制椭圆。

我试过看例子，但让我自己比开始时更困惑。我所有的代码都在工作，例如显示主 GUI 窗口和我的内部框架打开，但我似乎无法找到一个好的 tutuirol/起点来在 JScrollPane 中做图形。

请注意我不必使用 JScrollPane 我只是认为我会是一个好主意，因为它会给图形一个边框。

在任何人抱怨这个问题之前，我认为它是有效的并且我不希望将代码放在盘子上给我，我宁愿知道并理解我在做什么，这样我就可以提高我的知识并能够帮助他人！

我是否必须制作另一个课程并做 JScrollPane myPane = JScrollPane(graphicsClass)

然后用paint（）做所有事情，或者有没有办法创建一个图形并在没有另一个类的情况下做到这一点？

如果我做 ：

```
JScrollPane scrollPane = new JScrollPane();
    Graphics temp = scrollPane.getGraphics();
    temp.setColor(new Color(1, 22, 33));
    temp.fillOval(60, 0, 120, 60);
    scrollPane.paint(temp); 
```

它抛出错误。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:24:31.493

您不在滚动窗格中执行图形。另外，不要使用 getGraphics() 方法进行自定义绘画。

自定义绘制是通过覆盖 JPanel 或 JComponent 的 paintComponent() 方法来完成的。然后，如果需要，您可以将面板添加到滚动窗格并将滚动窗格添加到框架中。不要忘记设置面板的首选大小，以便滚动工作。

从阅读[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)的 Swing 教程开始。