# StackOverflow 问答 14749000-14749999

# android - 如何在 Android 中为图像添加框架

> ID：14749001
> 
> 赞同：2
> 
> 时间：2013-02-07T10:36:15.563
> 
> 标签：android, border, frame, image-editing

我是 Android 应用程序开发的新手，我想创建一个应用程序，我可以在其中为图库中的图像或从相机拍摄的新照片添加边框或框架，我搜索了一些博客，但没有得到答案.

谁能告诉我有关如何执行该应用程序的想法或任何概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:45:50.223

从相机或图库（大量文档）获取位图后，您应该使用透明位图添加叠加层。

这些链接应该可以帮助您（stackoverflow）：

*   [Android：如何覆盖位图/绘制位图？](https://stackoverflow.com/questions/1540272/android-how-to-overlay-a-bitmap-draw-over-a-bitmap)
*   [在 Android 中为图像添加框架或边框](https://stackoverflow.com/questions/14930634/add-frames-or-borders-to-images-in-android)
*   [Android中的叠加图像](https://stackoverflow.com/questions/6818133/overlay-images-in-android)

此外，处理位图时的一些有用信息：

[http://android.nakatome.net/2010/04/bitmap-basics.html](http://android.nakatome.net/2010/04/bitmap-basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:51:20.127

你可以通过使用下面的代码来实现这一点..我认为它可以帮助你

```
<FrameLayout
    android:id="@+id/image_layoutf"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/bbb"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#00000000"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/border_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/backgroundimage1" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/bbb2"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_gravity="bottom"
        android:background="@android:color/black"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/border_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/frame1" />
    </LinearLayout>
</FrameLayout> 
```

# c# - Windows 8 应用程序挂钩

> ID：14749002
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:36:20.557
> 
> 标签：c#, hook, windows-store-apps

是否有使用 WebView 的机制并轻松获取 JavaScript 挂钩以回调 C# 事件（如在 iOS 上）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:08:59.913

在 C# 应用程序中，您可以通过以下方式执行的操作非常有限`WebView`：

*   您可以通过调用Javascript来引发[`ScriptNotify`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.scriptnotify)事件并将值传递给应用程序。`window.external.notify`
*   要以相反的方向进行通信，您可以[`InvokeScript`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.webview.invokescript.aspx)从您的应用程序代码中调用。

如果这还不足以满足您的需求，您应该考虑使用 HTML 和 Javascript 开发 Windows 应用商店应用程序。在这种情况下，您不需要使用`WebView`- 您的应用页面是 HTML，而您的应用代码是 Javascript。您可以使用任何 WinRT API 并使用可以用 C# 编写的第三方 WinRT 组件。

# macos - 如何从 Mac OS X 命令行调用浏览器（用于 Behat BDD 测试）？

> ID：14749010
> 
> 赞同：2
> 
> 时间：2013-02-07T10:36:39.177
> 
> 标签：macos, shell, behat

在 Behat 测试中，您有一个上下文来“显示测试场景中步骤的最后响应”。这会启动一个带有最后响应的静态 html 的浏览器窗口。但是在 mac os 上运行它会返回错误：

`sh: x-www-browser: command not found`

知道如何将此命令设置到特定的浏览器（例如 chrome）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:45:30.277

因此，在我的 Mac 上的终端（OSX 10.5.8）中，我输入：

```
 open -a Firefox 
```

和 Firefox 打开。

当我输入：

```
open -a opera 
```

歌剧打开。这是你要找的吗？

如果您希望默认浏览器为您打开网页，您可以键入：

```
open http://foobar.com 
```

[参考更通用的解决方案。](http://osxdaily.com/2011/07/18/open-url-default-web-browser-command-line/)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:34:19.893

尝试使用 osascript 命令行工具来控制浏览器的 AppleScript。`man osascript`

更多信息：[https ://stackoverflow.com/a/7276138](https://stackoverflow.com/a/7276138)

# object - 对象在 UML 中提供接口

> ID：14749012
> 
> 赞同：2
> 
> 时间：2013-02-07T10:36:49.167
> 
> 标签：object, interface, modeling, uml

我有三个对象：`object1`, `objectA`, `objectB`。

并且还有一个**界面**

我如何建模如下：

an`object1`提供从到的**接口**`objectA``objectB`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:33:34.997

如果我正确理解您的问题，那就是您想创建一个 UML 图，其中一个类实现接口（生产者）而另一个类使用它（消费者），那么我会说您几乎没有选择：

1）显式表示接口，用实现关系表示接口的实现，用依赖关系表示用法：

![在此处输入图像描述](../Images/b708f5d0e1eb34e4d424316990a21466.png)

2) 使用棒棒糖符号表示暴露的接口，使用依赖关系表示用法。

![在此处输入图像描述](../Images/a7ae56329fd4ef460562438261abe838.png)

3) 使用球窝表示法 (UML 2.0)

![在此处输入图像描述](../Images/ffdad97642c1113f90af34f8f0ed8eaa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T23:22:03.977

你想要什么有两种直接的解释。您有一个接口（“Interface1”）充当由 ClassA 和 ClassB 实现的共享接口，或者您希望接口成为 ClassA 和 ClassB 交互的方式。我不确定你的意思。

无论如何，第一个选项，接口由两者实现的建模如下： ![在此处输入图像描述](../Images/2098eaf091936234663841bf2c3199bf.png)

第二个选项，接口用于允许交互的建模如下： ![交互界面](../Images/b9b9ffa66eb5e2bb99746a9bcaffb1a5.png)

# c# - 如何在 c# 中将训练数据输入 libSVM？

> ID：14749019
> 
> 赞同：0
> 
> 时间：2013-02-07T10:37:03.237
> 
> 标签：c#, svm, libsvm

我目前正在研究 libsvm，我想在数据集上制作一个 svm 分类器，让我解释一下：

例如我有一个这样的数据文件

好 0.1 2.5 10 11 1.24 。

坏 10 11.3 23.2 7.4 4.2。

非常好 10 11 33.2 2.4 3 。

... ... ETC。

-- 当好、坏、非常好是类标签，其他是每个属性的值。

然后我想像这样对来自用户的输入进行分类：

0.2 11 3.2 11.2 6.4

我想知道如何使用 libsvm 对该输入进行分类，如何轻松对其进行编码，或者如何使用 lib 中的类，

我目前正在研究 libsvm 的 c# 版本，如果有人能解释我如何清楚地使用它，即使在 java 中，我也可以理解并将其转换为 ac# 版本。

提示：我不希望如何将数据输入到库中，我想使用 libsvm 编写自己的代码。

谢谢。

# javascript - 默认哈希值

> ID：14749020
> 
> 赞同：1
> 
> 时间：2013-02-07T10:37:04.410
> 
> 标签：javascript, hashmap

我想与具有默认值的`params`成员进行哈希：`defaults`

```
var defaults = { item1: "def1", item2: "def2" };
var params = { item2: "param2", item3: "param3" };
var result = // some clever code here...
console.log(result); // { item1: "def1", item2: "param2", item3: "param3" }; 
```

我能想到的最聪明的代码是迭代`defaults`成员并将它们添加到`params`那里，如果它们在那里丢失。我想知道是否有一些本机解决方案而不是编写自己的代码？原型设计似乎很有希望，但它只适用于功能对象，我不想要这里。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T22:26:26.393

如果有人仍然感兴趣：将近两年后，我猜问题中提到的聪明代码将是

```
__proto__: Object.create(defaults) 
```

请参阅示例：

```
var defaults = { item1: "def1", item2: "def2" };
var params = { item2: "param2", item3: "param3",
  __proto__: Object.create(defaults) };

for(var i in params) console.log(i,params[i]);
// item2 param2
// item3 param3
// item1 def1 
```

请记住，`__proto__`不[推荐使用](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)，但与`setPrototypeOf()`链接建议的方法不同，它得到了很好的支持。让我们看看未来会怎样。

# javascript - JavaScript中的IF条件

> ID：14749021
> 
> 赞同：0
> 
> 时间：2013-02-07T10:37:07.870
> 
> 标签：javascript

```
 <script language="JavaScript" src="http://j.maxmind.com/app/geoip.js"></script>
    <script language="JavaScript">
    $code=document.write(geoip_country_code()); 
```

为印度的`$code`ip 地址生成 IN 值。我想在`$code`美国时隐藏一些值。所以我写代码如下..

```
if($code=='US')
    {
    </script>
    <table width="200" border="0">
      <tr>
        <td>1</td>
        <td>2</td>
      </tr>
      <tr>
        <td>3</td>
        <td>4</td>
      </tr>
    </table>

  <script type="text/javascript">
    }
    else
    {
    </script>

      <table width="200" border="0">
      <tr>
        <td>A</td>
        <td>B</td>
      </tr>
      <tr>
        <td>C</td>
        <td>D</td>
      </tr>
    </table>

     <script type="text/javascript">
        }
        </script> 
```

我在 javascript 中使用了 if 条件，但无法正常工作...是否可以像上面那样在 javascript 中使用 if 条件？

**谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:41:10.220

尝试这个

```
if($code=='US')
{

var t = "<table width=\"200\" border=\"0\"><tr>"+
    "<td>1</td>"+
    "<td>2</td>"+
  "</tr>"+
  "<tr>"+
    "<td>3</td>"+
    "<td>4</td>"+
  "</tr>"+
"</table>";

document.write(t);

}
else
{

var t = "<table width=\"200\" border=\"0\"><tr>"+
    "<td>A</td>"+
    "<td>B</td>"+
  "</tr>"+
  "<tr>"+
    "<td>C</td>"+
    "<td>D</td>"+
  "</tr>"+
"</table>";

document.write(t);

}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:41:13.267

尝试这个：

js：

```
$code=document.write(geoip_country_code());

if($code=='US') {
    document.getElementById("table1").style.display = 'block';
} else {
    document.getElementById("table2").style.display = 'block';
} 
```

html:

```
<table width="200" border="0" id="table1">
  <tr>
    <td>1</td>
    <td>2</td>
  </tr>
  <tr>
    <td>3</td>
    <td>4</td>
  </tr>
</table>

<table width="200" border="0" id="table2">
  <tr>
    <td>A</td>
    <td>B</td>
  </tr>
  <tr>
    <td>C</td>
    <td>D</td>
  </tr>
</table> 
```

CSS：

```
#table1,
#table2 { display: none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:41:27.013

我认为问题在于您正在尝试结束脚本标签并在 if 的情况下在正文中重新启动它们。

相反，您应该使用 css 并且最好是 JQuery 来切换表的可见性。

就像是

```
if($code == 'US')
  $("#mytable").show();
else
  $("#myothertable").hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:41:35.513

您将 JS 与 PHP 混淆了。JS 无法隐藏代码，因为你操作的代码已经作为源代码传入浏览器并被解析。如果您想隐藏代码，请在浏览器上之前在 PHP 中执行此操作。

您可以做的最好的事情是使用`display:none`您想要隐藏的元素在 JS 中将其从显示中（而不是从代码中）隐藏起来。

# css - css hiding link mouseovers

> ID：14749025
> 
> 赞同：0
> 
> 时间：2013-02-07T10:37:20.587
> 
> 标签：css

I have a navigation menu where I hide three of the ten links, however the mouseover effect still displays when I mouseover the spot where the links were. How do I get rid of this?

```
<!--example link-->
<a HREF="#"><span CLASS="store_link">Store Links</span></a>

//mouseover effects for all links
.header_nav a:hover {
    padding: 8px 8px;
    border-top: 4px solid #CC0078;
    border-bottom: 4px solid #CC0078;
}

//hiding the three links
.header_nav a span.search_link,
.header_nav a span.cat_link,
.header_nav a span.store_link {
    display: none;
}

//my attempt at hiding mouseover effects which does not work
.header_nav a:hover span.icon-search,
.header_nav a:hover span.cat_link,
.header_nav a:hover span.store_link {
    border-top: none;
    border-bottom: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:40:54.853

It seems you are hiding the content of the `a` tag and not the `a` tag itself:

```
.header_nav a span.search_link {display:none} 
```

You would need to hide the entire tag otherwise this would still appear visible in the DOM, possibly with a class:

```
<a HREF="#" class="hidden"><span CLASS="store_link">Store Links</span></a>

// CSS  
.header_nav a.hidden {display:none} 
```

# google-maps - 将 Click 事件绑定到 GMap 标记

> ID：14749028
> 
> 赞同：0
> 
> 时间：2013-02-07T10:37:26.527
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, mouseclick-event

我想将 Clickevent 绑定到 GMap 的标记，这些标记在页面加载时已经存在。所以我不想创建新的标记，我只想将点击事件绑定到现有的标记。

地图和标记已经放置，现在我想做一些 jQuery 的东西，当用户点击地图的标记时。

我只找到了如何创建新标记等的解决方案。我正在使用 API v3。

# python - 在 Windows 上添加到 vtkImageViewer 时 vtkActor2D 不可见

> ID：14749029
> 
> 赞同：2
> 
> 时间：2013-02-07T10:37:27.307
> 
> 标签：python, vtk

我正在使用 vtkImageViewer 类来可视化 3D 体积中的不同平面。然后我喜欢叠加一条垂直线和一条水平线来标记当前鼠标位置。我使用以下代码将 vtkActor2D 添加到查看器：

```
 imageViewer = vtk.vtkImageViewer()        
    ...
    line = vtk.vtkLineSource()
    line.SetResolution(20)
    mapper = vtk.vtkPolyDataMapper2D()
    mapper.SetInputConnection(line.GetOutputPort())
    actor = vtk.vtkActor2D()
    actor.SetMapper(mapper)
    imageViewer.GetRenderer().AddActor2D(actor)
    ...
    line.SetPoint1(x,0.0,0.0)
    line.SetPoint2(x,y,0.0)
    actor.GetProperty().SetColor(color)
    actor.GetProperty().SetOpacity(0.75)
    ...
    imageViewer.Render() 
```

在 Mac OS X 上它按预期工作，但是当我在我的 Windows 机器上尝试时，这条线根本不显示。

更新：如果我更改为 vtkActor，而不是在 imageViewer 后面渲染演员，我如何将 vtkActor 带到前台？

```
 imageViewer = vtk.vtkImageViewer()        
    ...
    line = vtk.vtkLineSource()
    line.SetResolution(20)
    mapper = vtk.vtkPolyDataMapper()
    mapper.SetInputConnection(line.GetOutputPort())
    actor = vtk.vtkActor()
    actor.SetMapper(mapper)
    imageViewer.GetRenderer().AddActor(actor)
    ...
    line.SetPoint1(x,0.0,0.0)
    line.SetPoint2(x,y,0.0)
    actor.GetProperty().SetColor(color)
    actor.GetProperty().SetOpacity(0.75)
    ...
    imageViewer.Render() 
```

# powershell - Powershell 中的 C# 组件 - 使用类中定义的枚举参数调用构造函数

> ID：14749031
> 
> 赞同：0
> 
> 时间：2013-02-07T10:37:31.673
> 
> 标签：powershell

似乎我遇到的问题尚未在任何主题中涉及，或者至少我还没有找到任何主题。

我正在尝试使用 C# 程序集，其中构造函数需要一个枚举器类型参数，该参数也在类中定义。

```
 namespace Utils.Translate
{
    /// <summary>
    /// Converts ASCII to EBCDIC or vice-versa
    /// </summary>
    public class AsciiEbcdic
    {
       /// <summary>
       /// The enumerator CharSet2Use determines which target character set to use.
       /// </summary>
       public enum CharSet2Use 
       {
          A2E = 0,          //ASCII to EBCDIC
          E2A               // EBCDIC to ASCII
       };

       // Constructor
       public AsciiEbcdic( CharSet2Use whichSet )
       {
       }
    }
} 
```

加载程序集没问题：

```
[System.Reflection.Assembly]::LoadFile( "EbcdicAscii.dll" ) 
```

但是，当我尝试实例化它时，

```
$nameSpace = "Utils.Translate.EbcdicAscii"

$var = New-Object $nameSpace( [Utils.Translate.EbcdicAscii+Char2Set2Use]::A2E ) 
```

我得到错误：

```
Unable to find type [Utils.Translate.EbcdicAscii+Char2Set2Use]: make sure that the assembly containing this type is loaded. 
```

我还尝试了以下方法：

```
$var = New-Object $nameSpace -ArgumentList [Utils.Translate.EbcdicAscii+Char2Set2Use]::A2E 
```

我得到错误：

```
New-Object : Cannot find type [Utils.Translate.EbcdicAscii]: make sure the assembly containing this type is loaded. 
```

还尝试将参数传递为 A2E, 'A2E', 0, '0' 无济于事。

有没有办法通过在类中定义的枚举器数据类型来实例化这个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:35:08.430

您的代码中有一些错字（类名和枚举类型名）： 之后`add-Type`：

你写：

```
$nameSpace = "Utils.Translate.EbcdicAscii"
$var = New-Object $nameSpace( [Utils.Translate.EbcdicAscii+Char2Set2Use]::A2E ) 
```

但就是这样：

```
$nameSpace = "Utils.Translate.AsciiEbcdic"
$var = New-Object $nameSpace( [Utils.Translate.AsciiEbcdic+CharSet2Use]::A2E ) 
```

或者

```
$var = New-Object $nameSpace -ArgumentList A2E 

$var
Utils.Translate.AsciiEbcdic 
```

# arrays - 将日期数组保存到数据库 drupal

> ID：14749033
> 
> 赞同：0
> 
> 时间：2013-02-07T10:37:37.740
> 
> 标签：arrays, date, drupal

如何将日期数组保存到数据库？

belove 代码为日期创建了一个表单

```
$form['date_time'] = array(
    '#title' => t('Date'),
    '#type' => 'date',
    '#description' => t('Please enter the date.'),

); 
```

然后用户选择月、日、年。

我怎样才能转换它，以便我可以将它保存到数据库？

```
function repman_form_submit($form, &$form_state){

drupal_set_message($form_state['values']['date_time']); 
```

我只是使用 drupal_set_message 来查看输出。我得到了数组。

**更新：**

用这个完成

```
 'date_month'=> $form_state['values']['date_time']['month'],
    'date_day' => $form_state['values']['date_time']['day'],
    'date_year'=> $form_state['values']['date_time']['year'], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:40:03.830

您想将日期转换为 ATOM 或 unix 时间戳：

```
// Dates are stored in ATOM format. 1969-12-31T19:33:33-05:00
$value = date(DATE_ATOM, mktime(0, 0, 0, $m, $d, $y));

// Convert to unix time
$value = date('U', mktime(0, 0, 0, $m, $d, $y)); 
```

我相信 sql datetime 使用 ATOM，但如果您只想将其存储为整数值，也可以将其存储为 unix 时间戳。

# java - 如何获得比特率，采样率和否。android中音频文件的通道数

> ID：14749038
> 
> 赞同：8
> 
> 时间：2013-02-07T10:37:58.207
> 
> 标签：java, android, audio, media-player, android-mediaplayer

对于以下查询，我需要您的帮助：

查询：有没有办法获取音频文件的以下信息。音频文件的采样率、通道、比特率。

对于提取比特率，可以使用“MediaMetadataRetriever”API (METADATA_KEY_BITRATE)。

请建议是否可以使用任何 android API 来完成。

在API下面找到了这个，但它的用途实际上是不同的。 [http://developer.android.com/reference/android/medi/AudioTrack.html](http://developer.android.com/reference/android/medi/AudioTrack.html)

我想以编程方式使用 Android API 提取这些：采样率、量化、输入音频文件的通道。

请帮助解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-11T09:47:48.403

在播放过程中（在METADATE_UPDATE事件到达 onInfo 回调之后）通过调用音频流轨道`MediaPlayer.getTrackInfo()`获取[MediaFormat对象。](http://developer.android.com/reference/android/media/MediaFormat.html)`getFormat`然后`MediaFormat`你可以得到：

[BIT_RATE](http://developer.android.com/reference/android/media/MediaFormat.html#KEY_BIT_RATE)

[CHANNEL_COUNT 个](http://developer.android.com/reference/android/media/MediaFormat.html#KEY_CHANNEL_COUNT)

[采样率](http://developer.android.com/reference/android/media/MediaFormat.html#KEY_SAMPLE_RATE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T02:56:44.277

这可以`MeiaExtractor`像这样使用：

```
MediaExtractor mex = new MediaExtractor();
    try {
        mex.setDataSource(path);// the adresss location of the sound on sdcard.
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    MediaFormat mf = mex.getTrackFormat(0);

    int bitRate = mf.getInteger(MediaFormat.KEY_BIT_RATE);
    int sampleRate = mf.getInteger(MediaFormat.KEY_SAMPLE_RATE);
    int channelCount = mf.getInteger(MediaFormat.KEY_CHANNEL_COUNT); 
```

# c# - 抓取值和符号之间的文本 .NET

> ID：14749041
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:38:08.473
> 
> 标签：c#, regex, vb.net

我在数据库（Sql Server）中有一个列，其中包含如下值：

```
{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22 Negative} 
```

`\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22`文本格式（大小，字体...）在哪里。
我对此不感兴趣。

我只想提取 text / string `Negative`，但同一列可能还包含：

```
{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22 Slightly Cloudy} 
```

换句话说，我只想抓取和之间的`fs22`文本`}`

预期结果：`Slightly Cloudy`或`Negative`

如何在 C# 或 VB.NET 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:39:53.120

您可以使用正则表达式：

```
(?<=\\fs22 )[^}]+(?=}) 
```

这将匹配匹配中不包含所述分隔符的任何内容`\fs22`（`}`这是使用环视断言实现的）。在 C# 中，这看起来像

```
var value = Regex.Match(s, @"(?<=\\fs22 )[^}]+(?=})").Value; 
```

或在 VB 中：

```
Dim value = Regex.Match(s, "(?<=\\fs22 )[^}]+(?=})").Value 
```

快速 PowerShell 测试：

```
PS> '{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22 Negative}',
>> '{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22 Slightly Cloudy}' |
>> %{ [Regex]::Match($_, '(?<=\\fs22 )[^}]+(?=})') }
>>

Groups   : {Negative}
Success  : True
Captures : {Negative}
Index    : 69
Length   : 8
Value    : Negative

Groups   : {Slightly Cloudy}
Success  : True
Captures : {Slightly Cloudy}
Index    : 69
Length   : 15
Value    : Slightly Cloudy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:55:48.103

使用 SubString 有什么问题？

```
string s = @"{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22 Negative}";
int i = s.LastIndexOf(@"\fs22 ");
string x = s.Substring(i + 6, s.Length - i - 6 - 1);
// 6 = length of string "\fs22 "
// 1 = minus the } at the end 
```

我认为 SubString 在性能方面也可能更好。我认为正则表达式不是处理简单字符串操作的最有效方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:41:31.697

您可以使用以下正则表达式

```
(?<=fs22\s*)[^}]+(?=}$) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:55:16.303

[解决方案]
'使用正则表达式

```
Private Function _CompareTextWithString(ByVal regexp As String, ByVal _theTextWhereToSearch As String) As String

    Dim EXPreg As System.Text.RegularExpressions.Regex

    '1º - The Regular Expression
    Dim expresaoREGULAR As String = regexp
    ' EX: "(?<=fs22\s*)[^}]+(?=}$)"

    '2º - Associate the expression to a Variavel Regex
    EXPreg = New System.Text.RegularExpressions.Regex(expresaoREGULAR, RegexOptions.IgnoreCase)
    '3º
    ' Check if matches with
    Dim check As Match = EXPreg.Match(_theTextWhereToSearch)

    If (check.Success) Then

        Return check.Value ' Matches
    Else
        Return False ' No Matches
    End If

End Function
'Usage
Private Sub _btExecRegex_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles _btExecRegex.Click
    _txtResult.Text = _CompareTextWithString("(?<=fs22\s*)[^}]+(?=}$)", _
                                                "{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22 Negative}")
End Sub

'With Substring
Private Function _returnValueFromStr(ByVal _str As String, ByVal _strFilterLastIndexOf As String, ByVal _lastCharOrChars As Integer) As String
    'Last ocourence of the filter
    Dim i As Integer = _str.LastIndexOf(_strFilterLastIndexOf)
    'size of Filter
    Dim f As Integer = _strFilterLastIndexOf.Length

    'Return the value from _str wich is filtered 
    'with _strFilterLastIndexOf and at the end -1 (or -2 ...) the char i don't need

    Return _str.Substring(i + f, _str.Length - i - f - _lastCharOrChars)

End Function
'Usage
Private Sub _btExecutar_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles _btExecutarSubStr.Click
    _txtResult.Text = _returnValueFromStr("{\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}}\f0\fs22 Negative}", _
                                             "\fs22 ", 1)
End Sub 
```

# asp.net - 在 DynamicData 中使用 customPages

> ID：14749042
> 
> 赞同：1
> 
> 时间：2013-02-07T10:38:10.370
> 
> 标签：asp.net, dynamic-data

我正在做一个带有动态数据的 asp.net 项目。

我使用超链接导航到我创建的新页面，该页面不在动态数据文件夹中。这工作正常，但为了保持一切整洁，我试图通过在自定义页面中添加一个 aspx 页面来做同样的事情，所以在 Bill 文件夹中我有详细信息，编辑，插入，列表我现在有“UpdateBillPrices”

虽然当我导航到这个时，我收到“找不到页面错误”，这是因为它在动态数据文件夹中运行吗？

顺便说一句，路径没有错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:37:07.467

如果要为名为 Foo 的数据库表和 POCO 构建自定义列表页面，则将名为 List.aspx 的页面添加到文件夹 DynamicData/CustomPages/Foo/ 。

# ruby - 如何在 irb 中使用 RSpec 期望

> ID：14749047
> 
> 赞同：11
> 
> 时间：2013-02-07T10:38:17.977
> 
> 标签：ruby, rspec, irb, rspec-expectations

我想`[1,2,3].should include(1)`在irb中使用。我试过：

```
~$ irb
1.9.3p362 :001 > require 'rspec/expectations'
 => true 
1.9.3p362 :002 > include RSpec::Matchers
 => Object 
1.9.3p362 :003 > [1,2,3].should include(1)
TypeError: wrong argument type Fixnum (expected Module)
    from (irb):3:in `include'
    from (irb):3
    from /home/andrey/.rvm/rubies/ruby-1.9.3-p362/bin/irb:16:in `<main>' 
```

但它不起作用，虽然[它是一个有效的案例](https://github.com/rspec/rspec-expectations#collection-membership)。我该如何使用`[1,2,3].should include(1)`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T13:43:54.953

你很接近，但`include`在顶层调用你将调用`Module#include`. 要解决它，您需要删除原始的 include 方法，以便`include`调用 RSpec。

首先让我们弄清楚系统`include`来自哪里：

```
> method :include
=> #<Method: main.include> 
```

行。看起来它是在`main`. 这是 Ruby 顶级对象。因此，让我们重命名并删除原始包含：

```
> class << self; alias_method :inc, :include; remove_method :include; end 
```

现在我们可以开始谈正事了：

```
> require 'rspec'
> inc RSpec::Matchers
> [1,2,3].should include(1)
=> true 
```

# cordova - Sencha Cmd 无法从 sencha.cfg 中找到“app.dir”配置属性

> ID：14749050
> 
> 赞同：6
> 
> 时间：2013-02-07T10:38:31.110
> 
> 标签：cordova, extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我已经使用 Sencha touch 2.1.0 构建了一个 sencha touch 应用程序，现在我正在尝试使用此处提供的说明构建它：http: [//cclerville.blogspot.in/2013/01/sencha-touch-21-phonegap-220- android_3.html](http://cclerville.blogspot.in/2013/01/sencha-touch-21-phonegap-220-android_3.html)

但是构建失败并显示此错误消息，有人可以帮助我吗？

```
$ sencha app build package && build/myshop/android/cordova/build
Sencha Cmd v3.0.2.288
[ERR]       Please ensure this command was executed from a valid application directory
[ERR]       Unable to locate 'app.dir' config property from sencha.cfg 
```

我的 sencha Cmd 目录中的 sencha.cfg 有以下条目：

```
framework.name=touch
framework.version=2.1.0.447
framework.classpath=${framework.dir}/src
# This is the minimum required Sencha Cmd version:
framework.cmd.minver=3.0.0.141
# This is the current version of the Sencha Cmd at the time of this SDK release:
framework.cmd.version=3.0.0.250 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:28:19.080

等待答案很久了，所以这对我来说似乎是不兼容的问题，因为我已经使用 sencha-touch 2.1.0 生成了应用程序，并且它在 /touch/cmd/sencha.cfg 有 sencha.cfg 而不是 /.sencha/app/ 2.1.1 应用程序中的 sencha.cfg 及其内容与 2.1.1 文件完全不同，没有任何引用 ${app.dir}，因此 Sencha Cmd 无法使用它。知道如何构建 2.1.0 应用程序吗？我知道的一种方法是获取旧版本的 sencha Cmd。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:33:52.880

与第一个错误状态一样，确保您位于应用程序文件夹中。如果是，请检查 sencha.cfg 文件中的类路径是否正确。因此，从您的应用程序文件夹的根目录中，打开 sencha.cfg：

`vim .sencha/app/sencha.cfg`

这是我的类路径的样子：`app.classpath=${app.dir}/app.js,${app.dir}/app`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T07:14:50.847

我有同样的问题，但出现错误是因为我没有从 sencha ExtJS 库目录调用此命令，而是从另一个我想创建应用程序的目录调用。因此，如果有人遇到同样的问题，请从库文件夹中调用此命令。例如，我将 ext4.2 放置在以下位置：`C:\wamp\www\Ext4.2` 在 Windows 操作系统中，`C:\wamp\www\Ext4.2>sencha generate app myapp myapp`将为我创建`myapp`。

# javascript - 如何提取与光标位置相关的标签

> ID：14749052
> 
> 赞同：1
> 
> 时间：2013-02-07T10:38:38.977
> 
> 标签：javascript

如何提取与光标位置关联的标签。在下面的 HTML 示例中，当我的光标位于“关联”时，我想获取有关将所有标签添加到文本“关联”的信息。

```
<html>
<body>
How <b>to <font color="#FF000">extract<i> the tags associated with </i>Cursor </b>location</font>
</body>
</html> 
```

在这里我想得到“b，字体，我”

是否有可能获得这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:16:37.107

我不太确定你在问什么，但我假设你在谈论常规光标而不是插入符号。

你可以这样做：

```
var lastElementEntered = null;

document.onmouseover = function(e) {
    e = e || window.event;
    lastElementEntered = e.target || e.srcElement;
};

document.onmouseout = function() {
    lastElementEntered = null;
}

function getCursorElementPath() {
    var tagNames = [];
    if (lastElementEntered) {
        var node = lastElementEntered;
        while (node && node != document.body) {
            tagNames.unshift(node.nodeName);
            node = node.parentNode;
        }
    }
    return tagNames;
}

alert( getCursorElementPath() ); 
```

# mysql - mysql的基本连接

> ID：14749053
> 
> 赞同：1
> 
> 时间：2013-02-07T10:38:40.020
> 
> 标签：mysql, sql, join

我很难理解 mySQL 上的连接，并且找不到任何类似的示例可以使用。

假设我有两个表：`users`和`users_info`.

在用户中，我有`id`,`email`和`password`字段，而在`users_info`我有他们的所有信息，如`name`, `surname`,`street`等。

所以，如果我得到这样的用户：

```
SELECT * FROM users WHERE id = 43 
```

他们的信息是这样的：

```
SELECT * FROM users_info WHERE id = 43 
```

我基本上会得到 2 个结果和 2 个表格。

我现在明白我需要使用 join 以便它们都在一起，但我就是想不通。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:39:57.833

看起来这两个表`users`都`user_info`通过列相互关联，`id`因此您需要使用此列连接它们，如下所示：

```
SELECT 
  u.id,
  u.email,
  u.password,
  i.name, 
  i.surname, 
  i.street
FROM users           AS u
INNER JOIN user_info AS i ON u.id = i.id; 
```

这只会选择字段`id, email, ... etc`。**但是**，如果要从两个表中选择所有列，请使用`SELECT *`：

```
SELECT *
FROM users           AS u
INNER JOIN user_info AS i ON u.id = i.id; 
```

如果要输入`id`并获取特定用户的所有这些数据，`WHERE`请在查询末尾添加一个子句：

```
SELECT *
FROM users           AS u
INNER JOIN user_info AS i ON u.id = i.id
WHERE u.id = 43; 
```

* * *

有关`JOIN`请参阅以下内容的更多信息：

*   [**^(从维基百科)**](http://en.wikipedia.org/wiki/Join_%28SQL%29)[**加入（SQL）**](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

*   [**SQL 连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

*   [**SQL 连接的另一种可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:43:07.343

你也可以这样做：

```
SELECT users.*, users_info.*
FROM users, users_info
WHERE users.id = users_info.id AND users.id = 43; 
```

这意味着：“从 users 表中获取所有列，从 users_info 表中获取用户的 id 列和 users_info 的 id 列相互对应的行”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:43:32.753

这是一个例子

```
SELECT * FROM users u
INNER JOIN users_info i
ON u.id=i.id 
```

这意味着，您正在加入 users 表和 users_info 表

例如

用户

```
id     name
----   -------
 1      abc
 2      xyz 
```

用户信息

```
id     email 
---    ------
 1      abc@aaa.com
 2      xyz@aaa.com 
```

查询将返回

```
id    name   email
---   -----  -------
 1     abc    abc@aaa.com
 2     xyz    xyz@aaa.com 
```

[这是一个很好的教程](http://phpweby.com/tutorials/mysql/32)

# sql - MS SQL 唯一键 - 错误或功能？

> ID：14749055
> 
> 赞同：3
> 
> 时间：2013-02-07T10:38:44.953
> 
> 标签：sql, sql-server, sql-server-2008

我在 MS SQL 中有一个表，其中有一`TERMINAL varchar(50)`列，并且上面有一个唯一键。当我尝试插入记录 'HOST1' 然后是 'HOST1 ' 时，我得到一个英国密钥违规异常。为什么 MS sql 处理这两个字符串，因为它们是相同的？

谢谢Z

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:41:42.217

我相信 MS SQL 会在末尾为 VARCHAR 去除空格。

# oracle - ORACLE中多列的总和

> ID：14749059
> 
> 赞同：7
> 
> 时间：2013-02-07T10:38:58.700
> 
> 标签：oracle, select, where-clause

我有一个有 97 列的表，我想对 96 列求和。

```
select sum(col1+col2+col3+.....+col96) 
from tableA where meter_id=x; 
```

我不想给所有 96 个列名，最好的方法是什么？问候， RR

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T10:44:26.360

没有办法避免写入每个列名。您所能做的就是诅咒愚蠢的数据建模师并忙于剪切粘贴。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T20:05:51.533

在有大量列的情况下，我会考虑使用数据字典表来帮助创建查询，方法是使用如下查询：

```
Select column_name || '+' as column_name_list
From user_tab_columns
Where table_name = 'TABLEA'
Order by column_id 
```

它不会改变世界，但会简化编写一个查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:11:41.057

您可以创建一个[虚拟列](http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php)，将 96 列相加，例如：

```
alter table TABLEA add (MY_TOTAL_COL NUMBER GENERATED ALWAYS AS (col1+col2+col3...) VIRTUAL); 
```

然后你的查询可以简单地做`sum(my_total_col)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-12T12:32:32.037

您最好对各列求和，然后将结果放入 Excel 中进行总和。否则这个查询应该做你需要的：

```
SELECT SUM(TOTAL_SUM) FROM (
  SELECT SUM(column1) AS TOTAL_SUM FROM your_table
  UNION
  SELECT SUM(column2) AS TOTAL_SUM FROM your_table
  UNION
  SELECT SUM(column3) AS TOTAL_SUM FROM your_table
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-06T11:40:21.300

有可能：

使用[SQL 过程可以返回表吗？](https://stackoverflow.com/questions/13673502/can-an-sql-procedure-return-a-table) 以及 Mike Meyers 的回答，您可以使用动态 sql 编写存储过程

```
 sumcolumns(columnfilter,tablename,whereclause) 
```

并使用它

```
select * 
  from table(sumcolumns('column_name <> ''col97''','tableA','meter_id=x')) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-06T09:45:03.817

```
SELECT A.consol_key, 
       A.amt_lcy, 
       B.amt_lcy, 
       C.amt_lcy 
FROM   categ A, 
       spec B, 
       stmt C; 

SELECT Sum(total_sum) 
FROM   (SELECT Sum(amt_lcy) AS TOTAL_SUM 
        FROM   categ 
        UNION 
        SELECT Sum(amt_lcy) AS TOTAL_SUM 
        FROM   spec 
        UNION 
        SELECT Sum(amt_lcy) AS TOTAL_SUM 
        FROM   stmt) 
WHERE  table_id NOT IN (SELECT table_id 
                        FROM   categ 
                        WHERE  txn_code = 'COR' 
                               AND system_id <> 'AA'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-06T14:38:12.437

尝试按照下面的示例使用 UNPIVOT（仍然需要指定列列表，正如其他人所指出的那样）：

```
with tableA as /* prototype tableA just for example */
(
select 1 meter_id, 101 col1, 10 col2, 20 col3, 30 col4, NULL col5, 101 col11, 10 col12, 20 col13, 30 col14, NULL col15, 101 col21, 10 col22, 20 col23, 30 col24, NULL col25  from dual union
select 2, 102, 40, NULL, 50, NULL, 102, 40, NULL, 50, NULL, 102, 40, NULL, 50, NULL  from dual union
select 3, 103, 60, 70, 80, 90, 103, 60, 70, 80, 90, 103, 60, 70, 80, 90  from dual union
select 4, 104, 100, NULL, NULL, NULL, 104, 100, NULL, NULL, NULL, 104, 100, NULL, NULL, NULL  from dual
)
, unpivoted_tableA as /* UNPIVOT tableA columns into rows */
(
select *
from tableA
unpivot include nulls 
(
col_value for col_ in 
 (COL1,COL2,COL3,COL4,COL5,COL11,COL12,COL13,COL14,COL15,COL21,COL22,COL23,COL24,COL25)
)
)
/* main query - Sum of all columns that were unpivoted to rows */
select meter_id, sum(col_value) 
from unpivoted_tableA
group by meter_id
; 
```

# doctrine-orm - 避免两个模块中实体之间的循环依赖

> ID：14749062
> 
> 赞同：1
> 
> 时间：2013-02-07T10:39:08.113
> 
> 标签：doctrine-orm, zend-framework2

我目前想知道如果我有相互引用的理论 2 实体，那么**让 ZF2 模块**从一个项目复制到另一个项目的好方法是什么。

我目前的情况是这样的：我有一个实体`User`，我希望能够访问该用户说的所有语言。

当然，`Language`它不是模块的一个组件`Authentication`，因为我可能还想将它用于其他目的。

```
namespace Authentication\Entity;

class User {
    public function getSpokenLanguages();
} 
```

和：

```
namespace Application\Entity;

class Language {
    public function getUsersWhoSpeakThisLanguage();
} 
```

问题是，我希望我的`Authentication`模块完全独立于项目特定的模块`Application`。

`Application`有没有一种好方法可以将这些关系排除在我的实体之外，或者可能从模块中注入它们？也许`UserService`（在`Application`模块中）给我`Language[]`特定的语言`User`是个好主意？我可以这样称呼它：

```
$userService->getUsersLanguages($user); 
```

我认为，尤其是注入可能是 ZF2 解决方案，但我不知道如何从另一个模块扩展类似的 Doctrine2 实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:27:42.373

我认为您谈论的更多是语义问题，而不是 ZF2 特有的问题。阅读您的问题，我认为您的语言更像是一个托管层，您可以轻松地使用工厂和 DI 来促进它 - 幸运的是 ZF2 拥有所有正确的工具。考虑这样的事情作为解决方案的潜在草案：

创建一个**LanguageAbstractFactory**：

```
namespace Your\Namespace;

use Zend\ServiceManager\AbstractFactoryInterface,
    Zend\ServiceManager\ServiceLocatorInterface;

class LanguageAbstractFactory implements AbstractFactoryInterface
{
    /**
     * Determine if we can create a service with name
     *
     * @param ServiceLocatorInterface $serviceLocator
     * @param                         $name
     * @param                         $requestedName
     * @return bool
     */
    public function canCreateServiceWithName( ServiceLocatorInterface $serviceLocator, $name, $requestedName )
    {
        return stristr( $requestedName, 'Namespace\Language' ) !== false;
    }

    public function createServiceWithName(ServiceLocatorInterface $locator, $name, $requestedName)
    {
        $filter = new $requestedName();
        $filter->setServiceLocator( $locator );
        return $filter;
    }

} 
```

然后，在同一个命名空间中创建您的语言，作为实现**ServiceLocatorAwareInterface**的 Language 的子类（以便您以后可以访问数据库等）。上面工厂中的代码注入了服务定位器（这就是您调整它以注入其他优点以满足您的语言架构的地方）：

```
namespace Your\Namespace;

use Zend\ServiceManager\ServiceLocatorAwareInterface,
    Zend\ServiceManager\ServiceLocatorInterface;

class Language implements ServiceLocatorAwareInterface
{

    protected $serviceLocator;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
    }

    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }

    // ... other things your factory knows, that this class may not go here
} 
```

**语言实现**可能如下所示：

```
namespace Your\Namespace\Language;

class English extends \Your\Namespace\Language
{

    public function getUsersWhoSpeakThisLanguage()
    {
        $sm = $this->getServiceManager();
        // get your entities or w/e using the SM
    }
} 
```

通过在 getServiceConfig 中调整模块的 Module.php 来连接工厂：

公共函数getServiceConfig（）{返回数组（

```
 'abstract_factories' => array(
            // this one generates all of the mass email filters
            'Your\Namespace\LanguageAbstractFactory',
        ),

    );
} 
```

这使您能够使用服务管理器非常轻松地获得服务感知语言。例如，来自服务感知类：

```
$sm->getServiceManager()->get( '\Your\Namespace\Language\English' ); 
```

由于配置，并且工厂可以满足请求，您的工厂将以非常便携的方式使用您构建到其中的任何逻辑自动配置英语实例。

这是工厂的入门知识 - 如果您装配了一个接口类，该服务可以用来与您的用户类对话，您可以将控制权从用户反转到语言服务。让您的用户实现包含语言服务可以使用的类的 LanguageAware（例如）应该是几步之遥。

希望这可以帮助。给这只猫剥皮的方法大概有 15 种；这种方法是我用来解决类似问题的一种方法，例如“过滤”数据。一个过滤器，可以过滤信息，信息可以通过过滤器过滤。

祝你好运！

# visual-studio-lightswitch - Lightswitch (VB 2012) 下订单后如何更新零件数量字段？

> ID：14749065
> 
> 赞同：0
> 
> 时间：2013-02-07T10:39:13.083
> 
> 标签：visual-studio-lightswitch

我真的是构建 Lightswitch 应用程序的初学者。我正在使用 VB 编程语言。我在设置数量控制时遇到问题......我设法弄清楚了验证并找到了一个更新按钮的工作示例并更改了代码以使其适合我的需要。代码是：

```
 Private Sub DeductInventory_Execute()
        ' Write your code here.
        For Each orddetail As OrderDetail In Me.OrderDetails
            Dim currentproduct = Me.DataWorkspace.ApplicationData.Parts.Where(Function(o) o.Id = orddetail.Part.Id).FirstOrDefault()
            If currentproduct IsNot Nothing Then
                currentproduct.Quantity = (currentproduct.Quantity - orddetail.Quantity)
            Else
                Throw New Exception("Not enough quantity")
            End If
        Next
        Me.Save()
    End Sub 
```

哪个有效。但我的问题是我不知道如何在订单保存时自动触发该按钮。尝试将代码放在主保存按钮中，但它不起作用...

最好的解决方案是，如果我可以将代码放入“ CreateNewSalesOrder_Saved() ”事件，但是当我把它放在那里时，它就不起作用了......

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:47:32.397

你快到了。代码应该进入*CreateNewSalesOrder*的**Saving**方法，而不是它的**Saved**方法。

如果这不能为您解决问题，您需要告诉我们更多关于“它不起作用”的信息。

# sublimetext2 - 如何在 Sublime Text 2 中为 php 标签修改配色方案

> ID：14749066
> 
> 赞同：4
> 
> 时间：2013-02-07T10:39:14.620
> 
> 标签：sublimetext2, color-scheme

在 sublime text 中的某些主题中，某些标签（如 script 或 php）中区域的背景颜色与其余代码的颜色不同。例如像 iPlastic 或 twilight 主题中的那样。

例如：http: [//imageshack.us/photo/my-images/541/screenshot20130207at342.png/](http://imageshack.us/photo/my-images/541/screenshot20130207at342.png/)

我希望在默认没有这个的 Tomorrow 配色方案中达到同样的效果。我知道我必须编辑 .tmTheme 文件，但我不确定我应该输入的代码。

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:00:56.407

您应该在文件中添加类似这样的`.tmTheme`内容：

```
<dict>
    <key>name</key>
    <string>Embedded source</string>
    <key>scope</key>
    <string>text source</string>
    <key>settings</key>
    <dict>
        <key>background</key>
        <string>#FCFCFC</string>
    </dict>
</dict> 
```

当然，您可以设置您喜欢的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T02:46:40.213

使用 Sublime 打开`.tmTheme`要编辑的文件，首先用不同的名称（但扩展名相同）保存它。然后寻找这个：

```
<string>text source</string> 
```

这仅存在于*某些*文件中`.tmTheme`！在`iPlastic.tmTheme`您提到的文件文件中，您将在此条目中找到它：

```
 <dict>
        <key>name</key>
        <string>Embedded source</string>
        <key>scope</key>
        <string>text source</string>
        <key>settings</key>
        <dict>
            <key>background</key>
            <string>#FAFAFAFC</string>
            <key>foreground</key>
            <string>#000000</string>
        </dict>
    </dict> 
```

如果`.tmTheme`文件是用 JSON 而不是这种笨拙的 XML 编写的，则条目将如下所示：

```
{
    "name": "Embedded source",
    "scope": "text source",
    "settings": {
        "background": "#FAFAFAFC",
        "foreground": "#000000"
    }
}, 
```

在这种情况下，背景值几乎是白色的（所有三个通道中都是 0xFA），但有点透明（0xFC 不透明度）。结果取决于`background`您在文件开头找到的值，在这种情况下是`#EEEEEEEB`（注意没有`name`and `scope`）：

```
 <dict>
        <key>settings</key>
        <dict>
            <key>background</key>
            <string>#EEEEEEEB</string> 
```

据我所知，这里忽略了 0xEB 不透明度，因为默认背景是`#EE`. `#FA`具有 0xFC 的不透明度被合成`#EE`为`#F9`（这是有道理的）。

现在，如果您想将作用域的背景**强制为某个值，则必须在存在时****更改**其条目，如果不存在则**添加**它。`text source`**`<dict>`**

 ****另一方面，如果您想让`text source`范围的背景与其余所有内容**相同**，您只需**删除**它的`<dict>`条目即可。

请记住，一个 3 字节的值 like`#AABBCC`是 100% 不透明的，即它的不透明度为 0xFF，即它相当于 4 字节的值`#AABBCCFF`。

Keep also in mind that you may put the modified `.tmTheme` file underneath, e.g., the `PHP` subdirectory of `Packages`, instead of the `Color Scheme - Default` subdirectory. This is particularly useful for PHP, where the default background is the one *outside* of `<?php...?>`, while the one inside is the one of the `text source` scope (this is an artifact of the trick used in order to inherit the settings for the HTML file type). Unless your PHP files contain lots of HTML (or whatever you have outside `<?php...?>`), you might want to put underneath `PHP` a theme with a background value for `text source` equal to the default background value for other file types, and a different default background value just for PHP files.****

# google-chrome - 为所有浏览器（IE、Chrome、Firefox）的所有浏览器扩展创建单个安装程序

> ID：14749067
> 
> 赞同：3
> 
> 时间：2013-02-07T10:39:15.793
> 
> 标签：google-chrome, firefox, installation

我已经为 Chrome（.crx 文件）、Mozilla Firefox（.xpi 文件）、Internet Explorer（.exe 文件）创建了扩展工具栏。我现在只需要为所有三个一起创建单个安装程序（EXE 或 MSI）。

请不要建议 CrossRider；我不知道如何将它用于已经创建的第三方扩展。我不想将代码再次写入 CrossRider。如果你知道如何使用我已经写好的代码，那没关系；否则建议别的东西。

您还可以告诉我如何使用 NSIS/ Inno Setup/ [Advanced Installer](http://www.advancedinstaller.com)为浏览器扩展创建安装程序包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T10:24:25.953

我们如何使用 Inno Setup 来做到这一点。

```
;Create Directory for Mozilla and Chrome

[Dirs]
Name: "{pf}\[Directory Name]"
Name: "{reg:HKLM\Software\Google\Chrome\Extensions,Path|{pf}\[Directory Name]}"
Name: "{reg:HKLM\Software\Mozilla\Firefox\Extensions,Path|{pf}\[Directory Name]}"

;Add Files

[Files]
Source: "Sample.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "sample@sample.com.xpi"; DestDir: "{pf}\[Directory Name]"; Flags: ignoreversion
Source: "phogkfodcfpcnalkmlcjmlnhgjacapcf\sample_chrome.crx"; DestDir: "{pf}\[Directory Name]"; Flags: ignoreversion

;Create Registry

[Registry]
Root: "HKLM"; Subkey: "Software\Google\Chrome\Extensions\mefpokegaaknljjamcdfhnimiiogmogk"; ValueType: string; ValueName: "Path"; ValueData: "{pf}\[Directory Name]\sample_chrome.crx"; Flags: uninsdeletekey
Root: "HKLM"; Subkey: "Software\Google\Chrome\Extensions\mefpokegaaknljjamcdfhnimiiogmogk"; ValueType: string; ValueName: "Version"; ValueData: "1.4"; Flags: uninsdeletekey
Root: "HKLM"; Subkey: "Software\Mozilla\Firefox\Extensions"; ValueType: string; ValueName: "sample@sample.com"; ValueData: "{pf}\[Directory Name]\sample@sample.com.xpi"; Flags: uninsdeletekey

;Run Exe file

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:13:13.890

从我可以看到你基本上需要： - 检测安装的浏览器 - 在所需路径中安装扩展文件 - 创建注册表项

[解决方案建议：要检测浏览器，您可以从Search page](http://www.advancedinstaller.com/user-guide/search.html)创建注册表搜索。搜索名称实际上是一个公共属性，因此您可以使用它来设置文件和注册表项的安装条件，方法是从[组织页面](http://www.advancedinstaller.com/user-guide/organization.html)设置它们的对应组件的条件。

安装文件很容易，只需转到[文件和文件夹页面](http://www.advancedinstaller.com/user-guide/files-folders.html)并将它们添加到所需的目标文件夹中。在此之后按 F8，您将被带到文件组件并设置安装条件。

最后一部分是设置注册表项。转到[注册表页面](http://www.advancedinstaller.com/user-guide/registry.html)并像在 regedit 中一样创建它们。与文件相同，在为扩展创建条目后，使用 F8 转到其组件并设置与文件相同的安装条件。

当软件包从控制面板中删除时，卸载会自动处理，即软件包创建的文件和注册表项将被删除。

关于 IE，您可以[将您的 EXE 称为自定义操作](http://www.advancedinstaller.com/user-guide/qa-launch-batch-file.html)。您将需要两个自定义操作，即在安装时执行的操作，在安装结束时注册扩展。第二个自定义操作将在开始时在卸载时执行，因此它会在包删除 EXE 之前取消注册扩展。

# android - 如何从资源文件中获取数组的计数？

> ID：14749073
> 
> 赞同：3
> 
> 时间：2013-02-07T10:39:31.423
> 
> 标签：android, resources, count

我在这样的资源中有多个数组：

```
<resources>
<string-array name="myArray1"> 
    <item>String1</item> 
    <item>String2</item> 
    <item>String3</item> 
</string-array> 

<string-array name="myArray2"> 
    <item>String1</item> 
    <item>String2</item> 
    <item>String3</item> 
</string-array> 

<string-array name="myArray3"> 
    <item>String1</item> 
    <item>String2</item> 
    <item>String3</item> 
</string-array> 
</resources> 
```

现在如何动态获取这些数组的计数？目前我有 3 个数组。

我可以像这样得到特定的数组项

```
String[] resourceString =getResources().getStringArray(R.array.myArray); 
```

但是如何获得计数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T10:41:52.450

```
int length =getResources().getStringArray(R.array.myArray).length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:43:06.403

XML 文件不适用于计算其中的数组。**它用于以静态**方式存储不属于您的代码的信息。

**通过这种方式，您可以动态**更改菜单、列表。

您可以做的不是创建多个数组，而是存储它**多维**。[关联](https://stackoverflow.com/questions/8974165/android-using-multi-dimensional-string-array-for-list)

现在您可以像**user1969053**建议的那样计算数组

# matlab - 在 Matlab 和 Gnuplot 中平滑拟合数据

> ID：14749075
> 
> 赞同：0
> 
> 时间：2013-02-07T10:39:35.410
> 
> 标签：matlab, matplotlib, gnuplot, smoothing

我想找到一种更好的方法来拟合我的数据。现在，这是我能做的最好的，见图。

![在此处输入图像描述](../Images/fbdb7e6c9b10ba02ead35721321fbcf0.png)

它是使用 Gnuplot 和`smooth`绘图时完成的。但是，正如您在图中看到的那样，“csplines”似乎是最精确的技术，但这还不够。图的前半部分很好，但后半部分一点也不好。真正的数据，只有 'x=[1,2,4,8]' 中的 4 个点，在'第 1 行'中标记。使用 Gnuplot 有更好的方法吗？

Matlab（甚至其他工具）呢？如何轻松创建连接几个点的平滑曲线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:57:57.890

为什么不看看 scipy 插值文档：

[http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html)

那里有很多方案可以帮助您使用 matplotib 绘制平滑数据。

高温高压

# django - 日期和时间合并到日期时间字段

> ID：14749077
> 
> 赞同：4
> 
> 时间：2013-02-07T10:39:45.310
> 
> 标签：django

```
views.py 

def KEBReading1(request):

q2=KEBReading.objects.all().order_by('datetime_reading')[:30]

form = KEBReading_form()
monthform=MonthForm()
if request.method == "POST":
    if request.POST.get('KEBsubmit'):
        form = KEBReading_form(request.POST)
        if form.is_valid():
            try:
                prevdate=KEBReading.objects.latest("datetime_reading")    

                print "teena"             

                date=form.cleaned_data["Date"]
                print date
                time=form.cleaned_data["Time"]
                print time
                kr_truepower_reading = form.cleaned_data["truepower_reading"]
                kr_apparentpower_reading = form.cleaned_data["apparentpower_reading"]

                truepower_consumed1=kr_truepower_reading-prevdate.truepower_reading
                powerfactor1=((kr_truepower_reading-prevdate.truepower_reading)/(kr_apparentpower_reading-prevdate.apparentpower_reading))     
                form1=form.save(commit=False)
                form1.datetime_reading__date=date

                form1.datetime_reading___time=time
                print type(date)

                form1.truepower_consumed=truepower_consumed1
                form1.powerfactor=powerfactor1

                print form1.powerfactor

                form1.save() 
```

如何将检索到的日期字段和时间字段值合并到日期时间字段中以将其存储到数据库中。我有一个名为 datetime_reading 的文件。在我的页面中，我分别输入日期和时间字段。如何将日期和时间字段合并到单个日期时间字段中以将其存储在 DB 的 datetime_reading 列中

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T10:41:24.563

要合并日期和时间，您需要使用[`datetime.combine`](http://docs.python.org/2/library/datetime.html#datetime.datetime.combine)

```
datetime.combine(date, time) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:06:04.467

用这个

```
 form1.datetime_reading = datetime.combine(date, time) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:03:55.440

尝试在您的时间使用第一个 strftime，如下所示：

```
utime = strftime.time("......") 
```

然后：

```
datetime.datetime.combine(date, utime) 
```

# javascript - Javascript：关闭字符串中打开的 HTML 标记

> ID：14749078
> 
> 赞同：9
> 
> 时间：2013-02-07T10:39:48.450
> 
> 标签：javascript

我有一个包含 HTML 代码的 javascript 字符串。我显示它，并根据字数附加了一个阅读更多/更少的切换器。问题是，当我缩小 HTML 代码时，它可能有开放标签，假设

```
<p>A computer is a general purpose device that can be <b>programmed</b> to carry out a finite set of arithmetic or logical operations</p> 
```

当收缩成为

```
<p>A computer is a general purpose device that can be <b>programmed...more</p> 
```

由于未封闭的粗体标签，以下数据变为粗体。

我想要一个 javascript 解决方案来关闭字符串中未关闭的标签。任何形式的帮助都将受到高度赞赏。谢谢大家。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-17T21:48:51.047

使用此代码

```
function fixHtml(html){
  var div = document.createElement('div');
  div.innerHTML=html
  return (div.innerHTML);
} 
```

使用

```
var fixed = fixHtml("<b>some text") 
```

将返回

```
 <b>some text</b> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:44:17.450

“...更多”甚至不应该出现在段落中。尝试在段落之外单独添加它。

您可能希望将所有内容包装在 a 中`div`，然后将其缩小。

```
<div class="shrinkable">

    <p>A computer is a general purpose device that can be <b>programmed</b> to carry out a finite set of arithmetic or logical operations</p>
    <span class="see-more">...more</span>

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:08:17.733

我遇到了同样的问题并使用了以下解决方案。我根据您的示例对其进行了调整。

```
var divContent = document.createElement('div'); 
```

从要缩小的 div 中获取 html

```
var get_html = $('.shrinkable').html(); 
```

使用 innerHTML，这会处理 html 中的所有打开标签

```
divContent.innerHTML = get_html; 
```

替换html并添加see

```
$('.shrinkable').html(divContent.innerHTML).append('<span class="see-more">...more</span>'); 
```

# android - numberpicker 小部件和 holoeverywhere 缺少主题

> ID：14749083
> 
> 赞同：0
> 
> 时间：2013-02-07T10:40:08.903
> 
> 标签：android, themes, android-holo-everywhere

我正试图让[Simons](http://web-agent.appspot.com/github.com/SimonVT/android-timepicker) Number Picker 与[Holoeverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)一起工作。但是 holoeverwhere 需要我设置`android:theme="@style/Holo.Theme"`，而数字选择器需要`android:theme="@style/SampleTheme.Light"`. 我对样式和主题还不是很熟悉，我有什么选择？现在数字选择器显示不正确：

![holoeverywhere 和 numberpicker](../Images/1af9e85855dba59dd427fbd830e2171c.png)

PS。我需要向后补偿。直到 2.2 并且希望保留全息主题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:44:05.710

HoloEverywhere 中有一个内置的 NumberPicker。

您可以使用演示应用程序对其进行测试。

```
org.holoeverywhere.widget.NumberPicker 
```

这是源代码的链接：

*[https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/library/src/org/holoeverywhere/widget/NumberPicker.java](https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/library/src/org/holoeverywhere/widget/NumberPicker.java)*

移至：[https ://github.com/Prototik/HoloEverywhere/blob/master/library/src/org/holoeverywhere/widget/NumberPicker.java](https://github.com/Prototik/HoloEverywhere/blob/master/library/src/org/holoeverywhere/widget/NumberPicker.java)

也许有一种方法可以在黑暗主题上使用 Simons 小部件，应该是可能的。

# java - xerces 停止获取 xhtml1-transitional DTD

> ID：14749084
> 
> 赞同：0
> 
> 时间：2013-02-07T10:40:11.587
> 
> 标签：java, xml, dtd

我想在线对 XML 文档执行 XPath 查询。我已经设置了 InputStreams 来检索内容并附加一个`<?xml ...?>`标头，该标头声明`charset`HTTP 请求字段中存在的编码。虽然它有效，但它非常缓慢。

```
 //bis is the BufferedInputStream with the content part of the HTTP reply
docBuilder = docBuilderFactory.newDocumentBuilder(); // throws exception.
Document doc = docBuilder.parse
    (new PrependInputStream(bis,
                "<?xml version='1.0' encoding='"+charset+"' ?>\r\n")); 
```

（请允许我这次不要放我的全部资料：我正在为学生准备作业）。

一些 strace 分析显示该程序在联系 w3.org 时停止：

```
 send(8, "GET /TR/xhtml1/DTD/xhtml1-transitional.dtd HTTP/1.1\r\nUser-Agent: Java/1.6.0_17\r\nHost: www.w3.org\r\nAccept: 
      text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\r\nConnection: keep-alive\r\n\r\n", 186, 0)
 recv(8, ... 
```

因为我不太担心 HTML 内容是否有效（格式正确就足够了），所以我尝试`docBuilderFactory.setValidating(false)` 了，但这似乎并不能阻止在线检索 DTD。

~~尝试`docBuilderFactory.setSchema()`使用手动检索的相同 dtd 文件手动设置模式会导致“org.xml.sax.SAXParseException：根元素之前的文档中的标记必须格式正确。~~ ”（这不是一个好主意）

我在哪里使事情过于复杂？

（据我从堆栈跟踪中可以看出，XML 后端似乎是 com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema ——如果这有任何用处的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:15:16.530

HTML dtd 很大，使用包含。你是对的，它们需要永远。使用[XML 目录](http://en.wikipedia.org/wiki/XML_Catalog)。可以在本地存储 dtds 并通过它们的系统 ID 映射它们。

如果你使用一个工具，比如 maven，你会发现足够多的指针。

正如@sylvainulg 所链接的答案所暗示的那样，拦截实体的优势是您收到了正确的字符。

# winforms - Winforms 应用程序中的 Xilium.CefGlue 无法与 ogg 一起正常工作

> ID：14749087
> 
> 赞同：1
> 
> 时间：2013-02-07T10:40:25.753
> 
> 标签：winforms, chromium, ogg

我正在尝试将 Xilium.CefGlue 浏览器集成到现有项目中，但我似乎无法让它与 ogg 一起使用。我正在使用最新版本的 Xilium.CefGlue(xilium-xilium.cefglue-3caa551bd830) 和 Cef 二进制文件 (cef_binary_3.1384.1045)。在 Xilium.CefGlue 解决方案中运行项目时，一切正常。

为了确保问题不是由我的其他项目引起的，我启动了一个新的 Winforms 项目，添加了对 Xilium.CefGlue.dll、Xilium.CefGlue.Demo.dll 和 Xilium.CefGlue.WindowsForms.dll 的引用。我在我的 Program.cs 文件中使用与示例中 CefGlue.Client 项目中使用的相同代码，并在我的表单中创建一个新的 CefBrowser 并将其直接添加到我的控件中。我还将所需的ceflib 文件放在正确的位置。

现在，当运行应用程序并加载网页时，一切似乎都挂起，除非我在 Program.cs 的 CefSettings 中将 SingleProcess 更改为 true。但是，当加载另一个包含 html5 视频 (ogg) 的页面时，该页面不会被渲染。我确实注意到交互存在，因为我可以通过单击页面中心的按钮来开始播放视频。我可以听到视频播放，但页面只是保持空白。

在 CefGlue.Client 中加载相同的页面确实可以正常工作。现在，当我在示例项目 CefGlue.client 中将设置 SingleProcess 更改为 true 时，会发生同样的事情，所以我想它一定与此有关。

有人对出了什么问题有任何想法吗？

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:09:40.340

[只需禁用 Visual Studio 托管进程，调试http://msdn.microsoft.com/en-us/library/ms185330(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms185330(v=vs.80).aspx)不会有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:56:40.283

Sébastien Frippiat 在其他地方找到了答案：

> 似乎在使用 Visual Studio 进行调试时使用 SingleProcess=false 不起作用（应该与使用名为 project_exe.vshost.exe 的可执行文件而不是 project_exe.exe 的 Visual Studio 相关）。

所以我将我的 CefSettings 更改为：

```
var settings = new CefSettings
        {
            BrowserSubprocessPath = @"C:\CefGlueBrowser\CefGlueBrowser\bin\x86\Debug\CefGlueBrowser.exe",
            SingleProcess = false,
            MultiThreadedMessageLoop = true,
            LogSeverity = CefLogSeverity.Default,
            LogFile = "CefGlue.log",
        }; 
```

这似乎可以修复它以进行调试。

# r - R中的Orthoplan（部分因子设计）

> ID：14749089
> 
> 赞同：5
> 
> 时间：2013-02-07T10:40:34.053
> 
> 标签：r, statistics

我正在尝试在 R 中为联合分析实验（如 SPSS Orthoplan）创建因子设计。

在过去的 Stackoverflow 问题中搜索，我找到了这个先前的答案：

[如何在 R 中创建部分因子设计？](https://stackoverflow.com/questions/5044876/how-to-create-a-fractional-factorial-design-in-r)

这确实是一个有用的答案，但仅在您有数字级别的因素的情况下。

不幸的是，这不是我的情况，因为我想使用的因子是名义变量，即它们的水平不是数字类型而是因子类型：例如，我必须处理一个指示产品颜色的因子，它可以是绿色、黄色或红色的。

我已尝试修改建议的代码，以回答[如何在 R 中创建部分因子设计？](https://stackoverflow.com/questions/5044876/how-to-create-a-fractional-factorial-design-in-r) 以这种方式：

```
f.design <- gen.factorial(levels.design,factors="all") 
```

但结果既不平衡，也不正交。此外，您必须在 optFederov 函数中定义确切的试验次数。在那个答案中，建议的试验次数是：

```
nTrials=sum(levels.design) 
```

但为了在具有标称因子的设计中获得平衡的解决方案，我希望它至少应该是：

```
nTrials=prod(unique(levels.design)) 
```

无论如何，有一个包可以处理这样的问题，它是`FrF2`Ulrike Groemping 教授的包，但它只处理二分变量，我不知道如何使用它来解决我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T00:00:44.693

在自己研究了一段时间后，我可以在这里分享我的发现：

是的，您可以在 R 中构建正交设计，其方式与在 SPSS Orthoplan 中发生的方式类似。

只需将变量定义`nlevels`为包含变量级别的向量。

然后你必须打电话：

`library(DoE.base)`

`fract.design <- oa.design(nlevels=levels.design)`

该函数将查找正交设计库（确切地说是 Kuhfeld W., 2009, Orthogonal arrays）

如果没有合适的可用正交设计，该函数将只返回完整的因子设计（因此，您在 R 中别无选择，只能调用 optFederov 函数，如上面我的问题中所述）。

例如尝试：

`oa.design(nlevels=c(2,2,3))`

`oa.design(nlevels=c(2,2,4))`

第一个没有解决方案（所以你会得到完整的阶乘），但第二个确实有一个解决方案，一个 8 卡，正交和平衡设计。

# r - R 逐个元素求和，得到向量

> ID：14749091
> 
> 赞同：3
> 
> 时间：2013-02-07T10:40:40.277
> 
> 标签：r, vector, sum

首先很抱歉这个问题。我想这是超级基本的，但我找不到正确的搜索词。对于向量 a 可以说：

```
 a<-c(1,1,3,2,1) 
```

我想得到一个向量 b ，它是逐个元素求和时的结果

```
 >b
    1 2 5 7 8 
```

它会是这样的：

```
 x<-2
    b<-as.vector(a[1])
    while(x<=length(a)) {
      c<-a[x]+b[x-1]
      b=c(b,c)
      x=x+1
    }
    rm(x,c) 
```

但是没有内置功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:41:24.657

您正在寻找`cumsum`：

```
a = c(1,1,3,2,1)

R> cumsum(a)
[1] 1 2 5 7 8 
```

# java - 如果键是文件对象，Java如何比较键？

> ID：14749092
> 
> 赞同：1
> 
> 时间：2013-02-07T10:40:43.157
> 
> 标签：java, algorithm, api

假设我有一个 HashMap，它将实际的文件对象存储为键，值是它的最后修改日期。

```
HashMap<File, Long> hashMap = new HashMap<File, Long>(); 
```

如果文件（test.log）存在于我的HashMap中（我已经添加了），但文件（test.log）后来被修改或更改；当我发出替换时，它会找到现有的匹配对象，还是会改变文件的状态，这将改变对象的性质。因此，我将间接添加一个新的键值对。

```
hashMap.replace(file, newModifiedTime); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:44:06.390

来自[javadoc equal 的描述](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#equals%28java.lang.Object%29)

> 测试此抽象路径名是否与给定对象相等。当且仅当参数不为 null 并且是表示与此抽象路径名相同的文件或目录的抽象路径名时，才返回 true。两个抽象路径名是否相等取决于底层系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:44:02.817

`File`'s `.equals()`/`.hashCode()`测试文件的名称，因此您的密钥是“安全的”。

[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#equals%28java.lang.Object%29)是这么说的。

注意：如果您使用 JDK 7 或更高版本，请帮自己一个忙：丢弃`File`，使用`Files`/ `Path`。

注意2：请注意，如果你在目录中`/foo`，`new File("bar")`和`new File("/foo/bar")`不**一样**。如果要确保文件名“完整”，请使用`.getCanonicalFile()`.

但同样，请帮自己一个忙并使用`Files`. 它好几个数量级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:44:09.943

存储的有一个 Key 是文件的 Hashing。这实际上并不意味着整个对象被散列。只有 Path 用于生成 File 对象的散列。

将对象作为键存储到哈希表时。它将在内部调用`.hashCode()`

[http://docs.oracle.com/javase/6/docs/api/java/io/File.html#hashCode()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#hashCode())

从文档。

> 计算此抽象路径名的哈希码。因为抽象路径名的相等性本质上是系统相关的，所以它们的哈希码的计算也是如此。在 UNIX 系统上，抽象路径名的哈希码等于其路径名字符串的哈希码和十进制值 1234321 的异或。在 Microsoft Windows 系统上，哈希码等于其路径名字符串转换为小写和十进制值 1234321。在小写路径名字符串时不考虑区域设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:44:15.733

`HashMap`使用`hashCode()`其键的方法。`File.hashCode()`根据[文档](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#hashCode%28%29)，这样做：

> 计算此抽象路径名的哈希码。因为抽象路径名的相等性本质上是系统相关的，所以它们的哈希码的计算也是如此。在 UNIX 系统上，抽象路径名的哈希码等于其路径名字符串的哈希码和十进制值 1234321 的异或。在 Microsoft Windows 系统上，哈希码等于其路径名字符串转换为小写和十进制值 1234321。在小写路径名字符串时不考虑区域设置。

简而言之，哈希是根据路径名计算的，而不是文件内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:46:30.717

`HashMap`用作键的类实例的用途`hashCode()`和方法，即在您的情况下。在 File 的情况下，它通过将功能委托给具体的文件系统包装器来比较抽象路径。`equals()``File`

如果您想更改此行为，您可能应该使用`TreeMap`并实现您自己的自定义比较器来比较文件内容、最后修改日期等。

# php - 我被困在mysql中的一个查询上

> ID：14749107
> 
> 赞同：8
> 
> 时间：2013-02-07T10:41:26.390
> 
> 标签：php, mysql

我被困在mysql中的一个查询上。

我想从表中获取最新评论

*   评论应该是博客上的最新评论
*   博客应该是最新的 3 个博客。
*   仅在状态为已启用时显示评论和博客

记录应该是这样
![在此处输入图像描述](../Images/4dedf79be8aba7c0a78e9e2f75503325.png) ![在此处输入图像描述](../Images/aab67daa890c32fc179ba5ef6bc3ca2f.png) ![在此处输入图像描述](../Images/949f44fcbf45e2685c2a456086b5da54.png) 的表结构表表**博客**

* * *

```

blog_id int - 主要（自动递增）
blog_title -varchar
blog_desc -varchar
blog_image -varchar
blog_tags -varchar
tot_comments -int
blog_creater -varchar
blog_create_date -datetime
blog_status -enum（'启用'，'禁用'）

```

表**blog_comment的表结构**

* * *

```
comment_id -int（自动递增）  
fk_blog_id -int  
注释 -varchar  
comment_by -varchar  
电子邮件-varchar  
评论日期-日期时间  
comment_status -enum（'启用'，'禁用'）

```

下面是我写的查询，但我得到的结果是错误的。

```
SELECT b.blog_title,b.blog_image, bc.*
FROM blog_comments  bc, blog b
WHERE bc.comment_status='Enable'
AND b.blog_status='Enable'
AND b.blog_id=bc.fk_blog_id
GROUP BY bc.fk_blog_id    
ORDER BY bc.comment_date DESC 
LIMIT 0,3 
```

**输出**

* * *

![在此处输入图像描述](../Images/71010c247237f1da13fe5be04b5d8b17.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:47:34.933

```
SELECT b.blog_title,b.blog_image, bc.*
FROM blog b
left join (
Select * from 
blog_comments bc
WHERE bc.comment_status='Enable'
GROUP BY bc.fk_blog_id    
having max(bc.comment_date) =  bc.comment_date
) bcc on b.blog_id=bcc.fk_blog_id
where
b.blog_status='Enable'
ORDER BY b.blog_create_date desc
LIMIT 0,3 
```

试试这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:50:34.263

试试这个：

```
SELECT * FROM blog_comments  bc, blog b
WHERE `bc.comment_status`='Enable'
AND `b.blog_status`='Enable'
AND `b.blog_id`=bc.fk_blog_id
ORDER BY `bc.comment_date` DESC LIMIT 1; 
```

尝试一个更简单的：

```
SELECT * FROM `blog_comment` WHERE 'blog_status'='Enable' AND 'blog_id'='$blogidherefromtitle' ORDER BY 'comment_date' DESC LIMIT1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:09:04.780

为此，简单的解决方案将为您的结果执行 2 次查询。第一次查询获取博文结果

```
$db_blog="select blog_id,blog_title from blog where blog_ststus='Enable'";
$que=mysql_query($db_blog); 
while($row=mysql_fetch_object($que))
{
    echo $row->blog_title;
    $db_comment="select comment from blog_comments where fk_blog_id=".$row->blog_id." and comment_status='Enable' order by comment_date desc";
    $quec=mysql_query($db_comment);
    while($comment=mysql_fetch_object($quec))
    {
         echo $comment->comment;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:46:01.363

尝试

```
SELECT b.blog_title,b.blog_image, bc.*
FROM blog_comments AS bc, blog AS b
WHERE bc.comment_status='Enable'
AND b.blog_status='Enable'
AND b.blog_id=bc.fk_blog_id
GROUP BY bc.fk_blog_id    
ORDER BY bc.comment_date DESC 
LIMIT 0,3; 
```

（我不是 100% 确定）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:50:20.663

```
SELECT b.blog_title,b.blog_image, bc.*
FROM blog_comments  bc JOIN blog b ON bc.fk_blog_id = b.blog_id
WHERE bc.comment_status='Enable'
AND b.blog_status='Enable'
GROUP BY bc.fk_blog_id    
ORDER BY bc.comment_date DESC 
LIMIT 0,3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T10:59:27.297

试试这个查询

```
SELECT 
  bc.* 
FROM
  blog AS b 
  INNER JOIN (SELECT id , MAX(id) AS MaxID FROM blog) AS bl ON bl.id = b.id 
  LEFT JOIN blog_comment AS bc ON bc.fk_blog_id = b.id 
ORDER BY bc.comment_id DESC 
LIMIT 3 
```

编辑：

```
SELECT 
  bc.* 
FROM
  blog AS b 
  INNER JOIN (SELECT id , MAX(id) AS MaxID FROM blog GROUP BY id) AS bl ON bl.id = b.id 
  INNER JOIN (SELECT MAX(id) , fk_blog_id FROM blog_comment  GROUP BY id) AS bc ON bc.fk_blog_id = b.id 
ORDER BY bc.comment_id DESC 
LIMIT 3 
```

这是针对每个博客的 3 个最新博客和最新单个评论

这里使用内部连接将获取最新的博客。而不是加入评论并使用日期或 ID 对它们进行排序，并根据您的要求对其进行限制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T11:04:14.150

```
select b.blog_title, b.blog_image, bc.*
from blog b join
(select bc.*
 from bc join (select fk_blog_id, max(comment_date) latest_date
               from blog_comment
               where comment_status = 'Enable'
               group by fk_blog_id) latest
 on bc.fk_blog_id = latest.fk_blog_id and bc.comment_date = latest_date) c
on b.blog_id = c.fk_blog_id
where b.blog_status = 'Enable'
order by c.comment_date desc
limit 0, 3 
```

`c`子查询使用链接问题中的技术为每个博客查找具有最新评论的行。然后将其与`blog`表连接以获取适当的博客数据。

# ssis - 如何在 sql server 作业步骤中覆盖 dtsx 连接设置

> ID：14749118
> 
> 赞同：0
> 
> 时间：2013-02-07T10:41:46.250
> 
> 标签：ssis, sql-server-2008-r2

我在 Visual Studio 中开发的 dtsx 包中有一个 Web 服务任务。它有一个超时设置为 30 秒的 httpconnection。该软件包作为一个步骤包含在 sql server (2008 r2) 代理作业中。部署包时，我将其设置为存储在 SQL Server 中。

我希望能够仅更改 sql 作业步骤中的 Timeout 设置，但我不确定如何执行此操作，或者即使有可能。目前我正在更改 VS 中的设置，然后每次都重新部署包。

任何人都可以帮助我如何做到这一点？这应该设置在作业步骤的哪个选项卡上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:35:49.870

需要注意的一件事是，HTTP 连接管理器上有 timeout 属性，但它用于控制与 Web 服务的实际连接。如果有意义的话，它不*控制调用特定方法的实际时间。*

我有一个 2005 年的软件包，它使用了一个用于清理地址的 Web 服务。该网络服务在内部托管，因此 HTTP 连接与 LAN 速度一样，没有问题。该服务本身可以很快标准化一个地址。当我需要批量清理几十万时，这需要相当多的时间。从 2008 R2 开始，XML 任务有一个内置的不可更改的默认超时，即 6 分钟。如果您需要它是 3601 秒或永不超时，这不是那么方便。我在查找文档时遇到了麻烦，但您可以通过启动一个休眠 6 分钟以上的服务来验证行为。

我们的解决方案是使用脚本任务来处理实际的服务调用，以便我们可以覆盖`Timeout`服务调用的属性。

```
Public Sub Main()
    Dim url As String
    Dim inboundFile As String
    Dim success As Boolean
    Dim timeoutMs As Integer
    ' 1 hour = 60min * 60 sec * 1000 milliseconds
    timeoutMs = 60 * 60 * 1000

    inboundFile = CStr(Dts.Variables("NetworkShareInput").Value)
    url = CStr(Dts.Variables("WebService").Value)

    Try
        Dim svc As New AddressCleanerService(url)
        ' Explicitly provide a timeout for the web service connection
        svc.Timeout = timeoutMs
        svc.Credentials = System.Net.CredentialCache.DefaultCredentials
        success = svc.CleanBulkAddresses(inboundFile)
    Catch ex As Exception
        Dts.Events.FireError(0, "Address cleaning", "Something failed in the address component stuff", String.Empty, 0)
        Dts.Events.FireError(0, "Address cleaning", ex.ToString(), String.Empty, 0)
    End Try

    If (success) Then
        Dts.TaskResult = ScriptResults.Success
    Else
        Dts.TaskResult = ScriptResults.Failure
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:05:07.780

一种方法是使用表达式并从 sql 代理作业传递超时值。以下是高级步骤：

在 SSIS 包中创建一个变量来保存超时值。在 HTTP 连接的属性窗口中，单击表达式 eclipse 按钮​​。在属性表达式编辑器中展开属性下拉列表。选择超时。并使用您之前创建的超时变量。类似于：@[User::Timeout]

在 SQL Agent 中，使用命令行作为作业类型，并使用 DTEXEC 执行 SSIS 包。

在 DTEXEC 命令中，您可以将值传递给变量。下面是一个逗号示例： dtexec /f C:\SSIS\Package.dtsx /set \package.variables[Timeout].Value;45

因此，当您想要更改超时值时，只需在 SQL 代理作业中更改它，而不是重新部署包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:14:22.257

首先，如果您仍然可以控制源代码，我会向您指出包配置。然后您可以在 XML 文件或数据表中编辑这些设置。

假设您不这样做，您可以使用作业步骤的“设置值”选项卡将一些值推送到包中。困难的部分是让属性路径正确。同样，使用 Visual Studio 和包配置功能，您应该能够找到正确的名称。

试试这个属性路径：`\Package.Connections[myHttpConnection].Properties[Timeout].Value`

# ios - 地址簿 peoplePickerNavigationController

> ID：14749131
> 
> 赞同：0
> 
> 时间：2013-02-07T10:42:27.900
> 
> 标签：ios, objective-c, addressbook

我无法在中声明`@synthesize mCallnumber`。`Callmethod`如果我声明它正在抛出错误，并且当我尝试在标题中声明它时，它也会抛出错误并且应用程序被终止。请帮助，因为我对这个 Objective-C 非常陌生。

```
 -(IBAction)gotohomepage:(id)sender
{
[self dismissViewControllerAnimated:YES completion:nil];
}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person

{
mContactNumber.text=@"";
mEmailId.text=@"";
mFirstName.text=@"";
mLastName.text=@"";

mFirstName.text=(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
mLastName.text=(NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

ABMultiValueRef phoneIdIndex=ABRecordCopyValue(person,kABPersonPhoneProperty);
CFIndex thePhoneIndex=ABMultiValueGetCount(phoneIdIndex);
if (thePhoneIndex!=0) {
    mPhoneNumber=(NSString *)ABMultiValueCopyValueAtIndex(phoneIdIndex, 0);
    mContactNumber.text=mPhoneNumber;
}

ABMultiValueRef emailIdIndex=ABRecordCopyValue(person, kABPersonEmailProperty);
CFIndex theEmailIndex=ABMultiValueGetCount(emailIdIndex);
if (theEmailIndex!=0) {
    mEmailIdIndex=(NSString *)ABMultiValueCopyValueAtIndex(emailIdIndex, 0);
    mEmailId.text=mEmailIdIndex;
}    
[self dismissModalViewControllerAnimated:YES];
mCall.hidden=NO;
mEmail.hidden=NO;
mSMS.hidden=NO;
return NO;
}

 - (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker
{
[self dismissModalViewControllerAnimated:YES];
}

  - (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController   *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier
 {
 return YES;
 }

-(IBAction)callmethod
 {

contactsViewController *actionHandleView=[[contactsViewController alloc]initWithNibName:@"contactsViewController" bundle:nil];
actionHandleView.mCallNumber=mPhoneNumber;
[self.navigationController pushViewController:actionHandleView animated:YES];
[actionHandleView release];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:30:49.900

试试这个，看看它是否有效。

```
@property(nonatomic,retain) NSString *mCallNumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:48:44.990

您很可能只需要添加一行内容：

```
@property (retain) NSString * mCallNumber; 
```

到您的“ `contactsViewController`”.h 文件。

顺便说一句，Objective C 的最佳实践是将类名的第一个字符大写，并将所有变量的第一个字符保持小写。所以不用“ `contactsViewController`”，叫它“ `ContactsViewController`”。

# wordpress - 仅在图库中显示图像/附件？

> ID：14749133
> 
> 赞同：0
> 
> 时间：2013-02-07T10:42:33.117
> 
> 标签：wordpress

当我创建一个页面、添加一个图库并在前端浏览此图库时，它将浏览与该页面关联的所有附件，而不仅仅是该图库中的图像。有没有办法过滤所有其他附件并只显示某个画廊中的图像？因此，例如，当我删除画廊并在同一页面上添加新画廊时 > 只显示新画廊？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:11:23.467

这可能不是最优雅的方式，但我发现它非常有用。

将帖子 ID 传递给下面的函数将从该帖子的 post_content 加载图库。因此，您将创建一个图库并将其插入到您的帖子内容中，然后在模板中运行此功能，并将返回该图库中的附件数组，您可以随意使用这些附件，即幻灯片等。

```
function wp_load_gallery($post_id) {
  $post = get_post( $post_id );
  $regx = '/' . get_shortcode_regex() . '/';
  preg_match( $regx, $post->post_content, $matches );
  $ids = shortcode_parse_atts( $matches[3] );

  $gallery = array( );
  foreach( explode( ',', $ids['ids'] ) as $id ) {
    if($id) {
      $gallery[] = get_post( $id );
    }
  } 

  return $gallery;
} 
```

请注意，短代码不是从内容中删除的，因此当您显示内容时，您应该通过 strip_shortcodes 函数运行它，即：

```
echo strip_shortcodes( get_the_content() ); 
```

这使您可以随时根据需要更新图库。

编辑：

要简单地显示所有图像：

```
$gallery = wp_load_gallery($YOUR_POST_ID);
foreach($gallery as $image) {
  echo wp_get_attachment_image($image->ID);
} 
```

# javascript - 如果资源存在而没有控制台错误，如何检查 JavaScript？

> ID：14749135
> 
> 赞同：2
> 
> 时间：2013-02-07T10:42:40.420
> 
> 标签：javascript, ajax

我想检查资源是否存在而没有控制台错误。

我试过了：

```
jQuery.ajax({
    type : 'HEAD',
    url : myUrl,
    success : function(){},
    error : function(jqXHR, textStatus, errorThrown) {
        // business logic
    }
}).complete(function() {
    // business logic
}); 
```

它完美地工作，但在控制台中跟踪错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:39:07.803

通过代码写入控制台的 Ajax 错误

```
xhr.send( ( s.hasContent && s.data ) || null ); 
```

jquery-1.8.3 中的 8434 行

所以你可以覆盖这个代码：

```
$(function () {

var xhr = null;

if (window.XMLHttpRequest) {
    xhr = window.XMLHttpRequest;
}
else if (window.ActiveXObject('Microsoft.XMLHTTP')) {
    xhr = window.ActiveXObject('Microsoft.XMLHTTP');
}

var send = xhr.prototype.send;
xhr.prototype.send = function (data) {
    try {
        //uncomment this line to write the error to console
        //send.call(this, data);

        //you can write custom error to console
        console.log('your error message');
    }
    catch (e) {
    }
};
}); 
```

# c# - asp.net 按钮 onclick 发布到另一个页面

> ID：14749136
> 
> 赞同：0
> 
> 时间：2013-02-07T10:42:40.100
> 
> 标签：c#, asp.net, post, postback

我在.Net 中有一个页面，当前在单击按钮时会处理一些信息。它发回，更新一些信息，然后将用户重定向。

我现在想要做的是同一个按钮，当它被点击时，信息会被更新，但它不是重定向而是发布到另一个站点。原因是这个其他站点需要从我提交的表单中读取一堆数据。

所以，我知道 PostBackUrl 属性，但这将停止处理我需要完成的数据。

那么有没有另一种方法让我能够以某种方式将两个回发结合起来，然后变成另一个站点的 POST 呢？

或者让我能够以某种方式进行我需要的更新，然后进行 POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:39:18.760

建议的解决方案都很有效，但唯一真正做到了我需要的解决方案是这个：

[链接到 SO 答案](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get/2802848#2802848)

上面的其他答案不起作用的原因是我正在发布到支付网关，无论出于何种原因，他们的系统认为除了我链接到的解决方案之外，所有解决方案中的各种缺失字段都存在问题。不知道为什么，我无法访问他们的系统以了解他们实际在做什么。

无论如何，感谢所有答案，但如果您遇到类似问题，请查看链接的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:46:45.863

如果 PostBack 不是绝对需要的，您实际上可以在请求查询本身中发送它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:51:47.993

您可以`POST`从代码隐藏中进行操作，您可以在此答案中找到详细信息[Redirect to another page using Post method from Code behind](https://stackoverflow.com/questions/2258864/redirect-to-another-page-using-post-method-from-code-behind)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:59:41.410

如果我的问题是正确的，我认为您将需要从 Request.Form 获取所有表单数据并向另一个站点发出 HttpWebRequest：

```
string url = "http://anothersite.com/";

// create post data
StringBuilder postDataBuilder = new StringBuilder();
foreach (var key in this.Request.Form.AllKeys)
{
    postDataBuilder.AppendFormat("{0}={1}&", this.Request.Form[key]);
}

string postData = postDataBuilder.ToString();

// create the web request for the POST
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
webRequest.Method = "POST";
webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.ContentLength = postData.Length;

// add the post data
using (StreamWriter requestStream = new StreamWriter(webRequest.GetRequestStream()))
{
    requestStream.Write(postData);
} 
```

希望这可以帮助！

# msbuild - Visual Studio 2010 构建后事件完全被忽略

> ID：14749137
> 
> 赞同：3
> 
> 时间：2013-02-07T10:42:57.323
> 
> 标签：msbuild, visual-studio-2012, post-build-event

我在 stackoverflow 上寻找任何与我的问题类似但没有结果的东西。

```
It seems that my VS started to completely ignore post-build events. 
Post-build events are not triggered in any project or solution I open
or create using my VS 2010\. 
```

我不知道为什么以及从何时开始，但以前（几周前）它运行良好。而且我自己没有更改项目配置或 VS 安装。虽然有几个 Windows 更新，但由于我不知道它从什么时候开始不起作用，所以我无法指定它们。我希望触发构建后事件，但它永远不会触发，无论它多么简单。项目配置很好，因为它适用于我的队友（在他们的机器上）。

试图弄清楚发生了什么，我做了：

*   创建测试项目
*   禁用所有插件（CodeMaid、VSAssistX 等）
*   创建了简单地回显某些内容的预构建、预链接和构建后事件（当然，在项目属性中启用了它们（在构建中使用 -> 是））。

结果是我看到了关于预构建和预链接构建事件的回声和 VS 消息，但没有关于构建后事件（顺便说一句，我正在使用 Qt 插件）：

```
 1>------ Rebuild All started: Project: Test, Configuration: Debug Win32 ------
    1>Build started 2013-02-07 11:03:54.
    1>_PrepareForClean:
    1>  Deleting file "Debug\Test.lastbuildstate".
    1>InitializeBuildStatus:
    1>  Creating "Debug\Test.unsuccessfulbuild" because "AlwaysCreate" was specified.
    1>**PreBuildEvent:**
    1>  prebuild
    1>CustomBuild:
    1>  Moc'ing Test.hpp...
    1>  Uic'ing Test.ui...
    1>  Rcc'ing Test.qrc...
    1>RCC : warning : No resources in 'C:\Projects\BuildEvents\Test\Test\Test.qrc'.
    1>  
    1>ClCompile:
    1>  moc_Test.cpp
    1>  main.cpp
    1>  Test.cpp
    1>  Generating Code...
    1>  qrc_Test.cpp
    1>**PreLinkEvent:**
    1>  prelink
    1>qtmaind.lib(qtmain_win.obj) : warning LNK4099: PDB 'vc100.pdb' was not found with 'qtmaind.lib(qtmain_win.obj)' or at 'C:\Projects\BuildEvents\Test\vc100.pdb'; linking object as if no debug info
    1>  Test.vcxproj -> C:\Projects\BuildEvents\Test\Test.exe
    1>FinalizeBuildStatus:
    1>  Deleting file "Debug\Test.unsuccessfulbuild".
    1>  Touching "Debug\Test.lastbuildstate".
    1>
    1>Build succeeded.
    1>
    1>Time Elapsed 00:00:02.80
    ========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ========== 
```

我怀疑问题出在 Visual Studio 本身，但也许您有更好的想法可能导致该问题以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:38:34.020

最后，我刚刚创建了每次构建后手动运行的脚本。这是一个愚蠢的解决方案，因为当我的任何队友进行一些需要在构建后进行更改的更改时，我也需要更改我的脚本。

# android - Phonegap推送通知android，需要意见

> ID：14749138
> 
> 赞同：0
> 
> 时间：2013-02-07T10:43:04.273
> 
> 标签：android, cordova, notifications

我目前正在使用 phonegap + jquery mobile 开发 android 应用程序。我需要在我的应用程序中添加通知栏。目前，我正在使用[Notification phonegap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)来处理通知。但是当应用程序关闭时它没有发送通知。即使应用程序关闭，是否有任何解决方案可以让我的用户收到通知？我可以使用[Google Cloud Messanging](http://www.adobe.com/devnet/phonegap/articles/android-push-notifications-with-phonegap.html)来解决它吗？

谢谢你，对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T11:10:42.403

您可以使用推送通知。以下插件同时处理 Android 和 iPhone 通知：

[https://github.com/phonegap-build/PushPlugin](https://github.com/phonegap-build/PushPlugin)

**每当收到推送消息并包含消息**属性时，都会显示通知。

# ios - 如何根据尺寸选择正确的图像

> ID：14749142
> 
> 赞同：0
> 
> 时间：2013-02-07T10:43:08.343
> 
> 标签：ios, objective-c, collections, compare, uicollectionview

我有一个包含不同大小的单元格的集合视图。这些单元格应填充下载的图像。单元格中的图像看起来不错，我想确保图像足够大（就单元格的宽度 x 高度而言）。

我这样做的过程看起来有点难看，我想问是否有更聪明的方法？

基本上我会做以下事情：

*   单元格的大小存储在一个数组中，例如**ArrayCellSizes 和 CGSize**。
*   我从网上获取图像并将其存储在字典中，例如**DictWithImages**。
*   现在我用 for 循环遍历**DictWithImages**，**提取高度**并将其与**当前单元格的高度****进行比较**，我**从 ArrayCellSizes**获得。*图像的宽度在 99% 的情况下大于单元格的宽度，无需检查。*
******   如果我发现一个高度**更大的图像，****它将被选择**用于当前单元格**并删除 DictWithImages 的条目**，以确保不会第二次选择该图像。*****

 *****这对我来说看起来有点难看。它也有理论上的问题，有时无法为单元格找到完美的图像，然后我必须为单元格设置一个宽度较小的图像。

**编辑：**看起来**NSFetchedResultsController**可能是一个答案。必须深入研究它。

干杯——杰里克*****

# python - 如何改变'\x??' 在python中使用unicode？

> ID：14749145
> 
> 赞同：0
> 
> 时间：2013-02-07T10:43:14.447
> 
> 标签：python, encoding

我有一个字符串：

```
\xe2\x80\x8e\xd7\x93\xd7\x9c\xd7\x99\xd7\xaa\xe2\x80\x8e 
```

想用 python 把它改成 unicode

我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:44:26.683

那*已经是*UTF-8 数据了；python 正在向您展示字符串文字形式。

```
>>> print '\xe2\x80\x8e\xd7\x93\xd7\x9c\xd7\x99\xd7\xaa\xe2\x80\x8e'.decode('utf8')
‎דלית‎ 
```

上面的行将 UTF-8 数据解码为`unicode`带有`.decode('utf8') and prints that; the`print `statement inspects the encoding used by my terminal and re-encodes the`unicode` 对象的对象，以便我的终端可以正确显示它。

你可能想阅读 Python 和 Unicode：

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

# sphinx - 在哪里可以找到用于在 MAMP 上配置 Sphinx 的 mysql 包含文件

> ID：14749148
> 
> 赞同：1
> 
> 时间：2013-02-07T10:43:16.880
> 
> 标签：sphinx

我尝试配置使用`/.configure` 得到以下错误谁能告诉我如何解决这个问题？我无法在 MAMP/Library 中找到 mysql 文件和包含文件夹

任何帮助..

```
configuring Sphinx
------------------

checking for CFLAGS needed for pthreads... none
checking for LIBS needed for pthreads... -lpthread
checking for pthreads... found
checking whether to compile with MySQL support... yes
checking for mysql_config... not found
checking MySQL include files... configure: error: missing include files.

******************************************************************************
ERROR: cannot find MySQL include files.

Check that you do have MySQL include files installed.
The package name is typically 'mysql-devel'.

If include files are installed on your system, but you are still getting
this message, you should do one of the following:

1) either specify includes location explicitly, using --with-mysql-includes;
2) or specify MySQL installation root location explicitly, using --with-mysql;
3) or make sure that the path to 'mysql_config' program is listed in
   your PATH environment variable.

To disable MySQL support, use --without-mysql option.
****************************************************************************** 
```

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-21T04:34:34.243

MAMP 缺少一些 mysql 的库并包含 sphinx 需要的文件。您必须通过将所需文件复制到`MAMP/Library/`目录来升级您的 MAMP。

1.  转到您的`MAMP/Library`目录并创建 mysql 目录：
2.  转到[http://downloads.mysql.com/archives.php](http://downloads.mysql.com/archives.php)并下载相应的。你可以去 phpMyAdmin 检查你的 MAMP 的 mysql 版本。
3.  `include/`解压它并将and复制`lib/`到`MAMP/Library/mysql`您刚刚创建的文件中。
4.  在终端中，假设您的 MAMP 位于`/Applications/`，那么您的配置应如下所示：

    $ ./configure --prefix=/usr/local/sphinx --with-mysql-includes=/Applications/MAMP/Library/mysql/include --with-mysql-libs=/Applications/MAMP/Library/mysql/lib

我希望这有帮助。您可以查看我关于此问题的[博客](http://quyennt.com/sphinx-open-source-fulltext-search-engine/)，或者如果您遇到任何其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T06:53:11.560

我遇到了同样的错误，我安装了一个适合我的服务器的 mysql-devel，它是 mysql-devel.x86_64

```
 # yum install mysql-devel.x86_64 
```

然后我在没有 mysql 的情况下运行 ./configure 以同时禁用 mysql 支持

```
 # ./configure --without-mysql 
```

它对我有用。我能够在消息的末尾得到这个

```
 generating configuration files
 ------------------------------

configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating libstemmer_c/Makefile
config.status: creating doc/Makefile
config.status: creating sphinx.conf.dist
config.status: creating sphinx-min.conf.dist
config.status: creating config/config.h
config.status: executing depfiles commands

 configuration done
 ------------------

You can now run 'make install' to build and install Sphinx binaries.
On a multi-core machine, try 'make -j4 install' to speed up the build.

Updates, articles, help forum, and commercial support, consulting, training,
and development services are available at http://sphinxsearch.com/

Thank you for choosing Sphinx! 
```

希望它有所帮助。

# ios - 需要帮助理解这部分 Obj-c 代表

> ID：14749150
> 
> 赞同：1
> 
> 时间：2013-02-07T10:43:21.347
> 
> 标签：ios, objective-c, delegates

在[Apple Docs](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)中说：

> **通过委托属性定位对象委托**的存在还有其他编程用途。例如，使用委托，同一程序中的两个协调控制器很容易找到彼此并进行通信。例如，控制整个应用程序的对象可以使用类似于以下的代码找到应用程序检查器窗口的控制器（假设它是当前键窗口）：
> 
> id winController = [[NSApp keyWindow] 委托]; 您的代码可以通过执行类似于以下的操作来找到应用程序控制器对象（根据定义，全局应用程序实例的委托）：
> 
> id appController = [NSApp 委托];

我不清楚这一点，请任何人详细解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:55:48.410

我认为这意味着委托对象可以用作代码不同部分之间的通信接口，并且可以很容易地从需要的地方访问它们。

在上面的示例中，winController 和 appController 具有不同的功能。他们不知道彼此的内部运作。委托接口为他们提供了一种通信方式。此外，访问 delegates 也很容易。

# jquery - ASP.Net 母版页和子页都需要引用 jQuery 库

> ID：14749152
> 
> 赞同：2
> 
> 时间：2013-02-07T10:43:20.557
> 
> 标签：jquery, asp.net, master-pages

也许有人可以帮助我理解 jQuery 与 ASP.Net 交互的方式？

在我的站点母版页中，我包含了对 jQuery 库的引用以及其他引用，如下所示：

```
 <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>    <script src="/js/ui/jquery-ui-1.7.2.custom.min.js" type="text/javascript"></script>    <script  src="/js/jquery.autocomplete.js" type="text/javascript"></script>    <script src="/js/liquidmetal.js" type="text/javascript"></script>    <script src="/js/jquery.flexselect.js" type="text/javascript"></script> 
```

我假设通过这样做，jQuery 库现在对于所有其他使用站点母版作为母版页的 ASP.Net 页面来说将是“全局的”。

在一个特定的子页面中，我使用了其他 jQuery 插件，例如：

为我的数据库应用程序实现搜索功能。

在我的搜索页面中，我包含了一个 $document.ready 函数来实现各种 UI 元素的单击和更改处理程序。然而，这些并没有按预期运行，因此使用 Firebug 尝试了解子页面中出了什么问题，结果发现引发了以下异常：

ReferenceError：未定义 jQuery [中断此错误]

$(文档).ready(函数(){

当我在所有其他对插件等的引用之前包含对 jQuery 库的引用时，我的页面开始按预期运行，Firebug 报告没有问题。

有人可以向我解释一下为什么您需要在我的站点母版和使用它的页面中引用 jQuery 库吗？

我是 jQuery 和 ASP.Net 的相对新手。

母版页代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<title>Untitled Page</title>
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
<link rel="stylesheet" href="/css/ui-lightness/jquery-ui-1.7.2.custom.css" type="text/css" />    
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen, projection" />  
<link rel="stylesheet" href="/css/print.css" type="text/css" media="print" />
<link rel="stylesheet" href="/css/jquery.tooltip.css" type="text/css" />
<link rel="stylesheet" href="/css/menubar.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="/css/tipsy.css" type="text/css" media="screen, projection" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:46:45.897

应该发生的是，未加载 jquery 的内容页面是与其他内容页面不同的文件夹中的页面，也就是说，您的问题是对包含 jquery 文件的文件夹的引用。为了避免这种问题，可以将 jquery 引用放在网络上的存储库而不是本地文件系统（服务器）中。您应该像这样放置参考：

```
<head id="Head1" runat="server">
    <title>Some page</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" language="javascript" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js" language="javascript" type="text/javascript"></script>
    <link href="~/Scripts/css/smoothness/jquery-ui-1.10.0.custom.min.css" rel="stylesheet"
        type="text/css" runat="server" />

    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

请注意引用 jQueryUI 样式表的 runat = "server" 标记。此属性允许 asp.net 处理标记并将相对路径放置到您的样式表，无论您的内容页面是什么级别的嵌套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:53:07.103

这不应该发生在imo ...

Javascript全部在客户端执行，您的母版页和子页在服务器端组装（不执行Javascript或任何东西），只有当您查看页面时，服务器才会将所有主/子部分放在一起并将完成的HTML发送到浏览器，只有这样浏览器才会开始执行 Javascript。所以它绝对不应该放在子页面和母版页面中......

从没有任何额外信息的错误来看，我唯一能想到的是您可能将 Jquery 不是放在头部而是放在母版页的底部（因此，当从上到下读取 HTML 时，浏览器首先会遇到调用没有加载脚本的jQuery（在子页面代码中），因为那是最后的waaaay。）

当将代码也放在您的子页面中时，它在您的 HTML 中足够高，以便在调用 JQuery 时可用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:49:46.640

确保您在母版页中的内容占位符之前引用了 jquery 库。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.js"></script>

<asp:ContentPlaceHolder ID="head" runat="server">

</asp:ContentPlaceHolder> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T19:12:11.453

Vicente 是正确的，使用波浪号前缀表示路径是相对于路由的

但如果它仍然给出错误，请使用 google cdn 方法与您的本地副本作为备份，例如：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
if (typeof jQuery == 'undefined')
{
    document.write(unescape("%3Cscript src='~/js/jquery-1.3.2.min.js' type='text/javascript'%3E%3C/script%3E"));
   }
  </script> 
```

# c# - 在 Amazon RDS 中托管的 SQL Server 中自动创建数据库

> ID：14749153
> 
> 赞同：2
> 
> 时间：2013-02-07T10:43:24.763
> 
> 标签：c#, sql-server, amazon-rds

我一直在对托管在 Amazon RDS 中的 SQL Server 进行一些研究。我计划拥有一个需要多租户解决方案的应用程序 - 每个客户一个数据库，一个用于登录的核心数据库等。

所以我在玩 RDS/SQL Server，但是我需要克服一些问题。首先如何自动创建数据库？I RDS 我不能只从 bak 文件中恢复，我想从模板创建数据库模式。有没有人有这方面的经验，如果有，你能给我一些建议吗？

谢谢，

克苏多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T02:03:24.700

Generate Scripts 是一个很好的起点，但如果您真的想自动创建数据库，您需要将从 SQL Server 的 Generate Script 输出的脚本转换为模板。

这样做的一个好方法是创建一个 .NET 应用程序，或者甚至只是一个存储过程，一旦您将其制成模板，它将在脚本上执行查找和替换。

1.  使用您想要的所有对象创建您的模板客户数据库，然后编写数据库（所有数据库对象）的脚本。
2.  在 C# 或 SQL 中，通过在每个对象名称中包含一个变量来构建动态查询：

    ```
     CREATE DATABASE CustomerDB_1 ...

     "CREATE DATABASE CustomerDB_{0}" //Formatted String in C#
     'CREATE DATABASE CustomerDB_' + @vchCustomerID //Dynamic SQL 
    ```

    如果每个对象名称中都有客户 ID，并且每个数据库都有唯一的客户 ID，那么您可以在将变量替换为适当的值后简单地运行查询，一切就绪。

# python - 如何在 Python 中检查查询是否已插入数据

> ID：14749157
> 
> 赞同：1
> 
> 时间：2013-02-07T10:43:38.400
> 
> 标签：python, django

我正在使用原始 sql 查询将数据插入数据库。插入工作正常，现在我想对这个插入查询执行一些检查，例如，如果查询插入了数据，或者假设我没有插入查询，比如

```
cursor.execute("some insert query" ) 
```

现在我想知道是否 `cursor.execute`已插入该行，然后显示一些文本，如**成功，如果由于某种****原因**无法插入，则显示文本，如**错误**，如果该行已插入，则显示，**行已存在**。

但我不知道如何对`cursor.execute`.

**编辑**

```
for i in range(numrows):
                row = cursor.fetchone()
                if row[6]==1:
                        arr["user_id"]=row[0]
                        arr["email"]=row[1]
                        arr["style_quiz_score"]=row[2]
                        arr["style_quiz_answer"]=row[3]
                        arr["date_joined"]=row[4]
                        arr["is_active"]=row[5]
                        arr['firstname'] = row[7]

                        arr["username"]=re.sub(r'[^a-zA-Z0-9]', '_', arr["email"])
                elif row[6]==2:
                        arr['lastname'] = row[7]
        cursor1.execute("insert into auth_user(id,username,first_name,last_name,email,password,is_staff,is_active,is_superuser,date_joined,last_login)  values(%s,%s,%s,%s,%s,'NULL',0,%s,0,%s,0)",[arr["user_id"],arr["username"],arr['firstname'],arr['lastname'],arr["email"],arr["is_active"],arr["date_joined"]]) 
```

当我 `cursor1.execute`在forloop外部执行时，它会插入最后一个条目，但是如果我在forloop内部执行它，则会出错并且不会插入任何内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:53:14.410

`transaction.commit_unless_managed()`假设您使用的是 Django （您在问题中没有具体说明它，但您使用的是 django 标签），您需要在`from django.db import transaction`使用`cursor.execute`.

您可以在调用时检查异常`commit_unless_managed`以查看插入是否顺利：

```
from django.db import connection, transaction, DatabaseError, IntegrityError

cursor = connection.cursor()
cursor.execute("some insert query" )

try:
    transaction.commit_unless_managed()
except DatabaseError, IntegrityError:
    print 'error'
else:
    print 'success' 
```

# wireshark - 使用wireshark监控TCP/IP地址和/或端口上的数据传输

> ID：14749161
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:43:52.913
> 
> 标签：wireshark, packet-sniffers, tcp-ip

我用一个客户端和一个服务器制作了一个 C# 程序，它们之间可以很好地通信。服务器接收信息并毫无问题地存储在 MySQL 数据库中。但是我想使用wireshark来监控信息的安全/加密程度，并且找不到使用wireshark的通信。我的程序使用套接字连接服务器和客户端，在我的测试中，服务器和客户端在地址 127.0.0.1 或本地 IP 机器（类似于 192.168.13.191）上运行，服务器使用端口 3608 侦听/连接，客户端使用更高的随机数端口，我在wireshark上使用的所有过滤器都没有返回任何内容。到目前为止，我尝试过：

*   ip.addr == 127.0.0.1（仅显示来源或目的地为 127.0.0.1 的包）
*   ip.addr == 192.168.13.191（同上）
*   tcp.port == 3608（仅显示源或目标是此端口的包）
*   tcp.port == client_port（同上）
*   tcp 包含 01:00:00:3B （仅包含我发送的几个字节的包）

我的想法是找到至少一条从客户端到服务器的消息，并使用wireshark的“Follow TCP stream”选项，但是所有这些过滤器在单独使用时都会返回黑屏。我不知道为什么，因为当我在 windows 命令上运行 netstat -a 时，我可以看到程序已建立连接，并且还在端口 3608 上侦听新连接。任何人都知道发生了什么或我应该使用什么过滤器采用？操作系统以某种方式将流量从端口 3608“重定向”到另一个端口？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:45:58.743

Wireshark 不接收环回数据包。您必须在另一台机器上安装客户端或服务器，然后重试。

编辑：在做了一些阅读之后，我发现这确实与 Wireshark 没有任何关系，而是与 WinPcap 的工作方式有关。无论如何，在另一台机器上运行客户端或服务器将解决问题。

# php - 识别请求是由浏览器或其他程序发送的

> ID：14749162
> 
> 赞同：1
> 
> 时间：2013-02-07T10:28:36.603
> 
> 标签：php, web

我们通过网络路由器将我们的用户重定向到我们有广告的页面。但问题是，当我们通过网络路由器将用户重定向到该页面时，他们在端口 80 上的所有请求都会被重定向，这意味着我们会从所有程序（如信使和...

我们只想确定有人在观看广告，并且请求不是从任何其他程序发送的。

到目前为止，我们已经测试了一些方法，比如验证码、获取用户代理、使用 javascript 和 ajax，但这些方法并没有解决问题。

对于验证码，我们不能每个广告使用一个验证码，这是不合逻辑的。

无法使用用户代理，因为我们无法获得正确的用户代理列表，另一个问题是某些程序（如信使）发送 IE 用户代理标头。

javascript 的相同之处在于某些程序会自动运行 javascript，尤其是那些通过 .Net 编写的程序。

# ios - iOS - 处理大型且不断增长的 UIViewController 类

> ID：14749167
> 
> 赞同：3
> 
> 时间：2013-02-07T10:44:07.977
> 
> 标签：ios, oop, model-view-controller, uiviewcontroller

我有一个 UIViewController，随着时间的推移，它添加了很多委托事件，这使得控制器类变得非常大。UIViewController 类包含相当多的视图管理方法，这些方法从事件委托方法中调用，以管理控制器正在管理的 UIView。

我现在正在向该类添加更多 UIActionSheet 委托事件。我的控制器类越来越大，我想我应该打破 UIActionSheet 委托事件并将它们放在单独的委托类中。然后，这个单独的委托类必须回调到视图控制器类中，以使视图控制器使用视图控制器中的视图管理方法相应地调整视图。（视图控制器访问视图所代表的单独模型对象）。

我可以看到采用这种突破方法的利弊。向控制器添加越来越多的委托事件感觉是错误的，但是为不同类别的事件创建单独的类，然后需要回调到控制器中，这似乎也引入了不必要的复杂性和混淆层。大型控制器类“简单明了”但感觉不对，而使用许多不同的委托类会更复杂和复杂，但会产生更小的类。

任何人都可以提供一些关于这个话题的智慧之言，或许可以为我指出一些关于这个问题的特定于 iOS 的阅读？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:04:53.540

我对这个问题的处理方法是：

1.  让它起作用
2.  让它更锋利
3.  回到 1。（如果您在某个领域有经验，或者 1 和 2 都在同一个回合）

因此，如果代码有效，应用程序看起来不错，但您发现某些类中有 100 个方法，因此请尝试不同的设计模式（如果您还没有）并使用这些切割器的想法将代码分离到不同的类、委托、封装它们，如果必要等

```
http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html 
```

以防万一链接到 Cocoa 设计模式建议，我不时研究`Pro objective c design patterns for ios`. 可能不是最好的书，但它基于 ios 上下文中的“四人帮”设计模式书。

希望这至少在某种程度上有所帮助，

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:53:31.760

最后，我创建了很多额外的类来处理特定的 UIActionSheet 实例。我创建了一个基类，然后为主控制器中的每个 UIActionSheet 要求对其进行子类化。

最终结果看起来很整洁，并且不会增加太多复杂性。

# internet-explorer - XSL 中的条件注释不起作用

> ID：14749173
> 
> 赞同：0
> 
> 时间：2013-02-07T10:44:17.827
> 
> 标签：internet-explorer, xslt, conditional-comments

我在 XSL 中添加了一个条件注释，例如

```
 <xsl:comment>          
    <![CDATA[
       [if IE]>
         <script type="text/javascript">
             registerDisplay = firstChild.currentStyle.display;
         </script>
       <![endif]            
     ]]>
 </xsl:comment> 
```

我在 IE 中没有看到我的 html 源代码。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:00:05.063

如果您对 xsl:comment 不走运，我认为您也可以使用

```
<xsl:text disable-output-escaping="yes"><![CDATA[<!--[if IE]>
     <script type="text/javascript">
         registerDisplay = firstChild.currentStyle.display;
     </script>
   <![endif]-->]]>
</xsl:text> 
```

# html - 页脚布局和垂直分隔线

> ID：14749175
> 
> 赞同：1
> 
> 时间：2013-02-07T10:44:22.893
> 
> 标签：html, css

只想问几个关于这个例子的问题：

![在此处输入图像描述](../Images/1983982c3726ab7e217fb1b2163b48ba.png)

如今，执行此 3 列布局的最佳方法是什么？当然有表格，现在有 div 等。实现这一点的**最新**最好方法是什么？如果完全由我决定，我会有一个容器 div，其中包含 3 个其他容器。设置为`width: 33%;`和`display: inline;`

另外，如何获得这些垂直分隔线？同样，据我所知，您在表格中使用它并且只显示某些边框，您可以通过这些边框获得垂直规则效果。

但是，如今获得这种效果的最佳方法是什么？在您的工具箱中拥有 html5 和 css3 ..

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:02:24.390

试试这个

**HTML**

```
<div class="outer">
<div class="wrap">
<div class="sub">Lorem Ipsum</div>
<div class="sub">Lorem Ipsum </div>
<div class="sub">Lorem Ipsum </div>
</div>
</div> 
```

**CSS**

```
.outer {
    background: #734e91;
    padding: 12px;
}
.wrap {
    margin: 0 auto;
}
.sub {
    padding: 12px;
    width: 32%;
    height: 150px;
    background: #734e91;
    display: table-cell;
    border-right: solid #a175c4 1px;  
}
.sub:last-child {
    border: 0px;
} 
```

[**演示更新**](http://jsfiddle.net/BjbH2/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T11:16:16.267

**jsFiddle 演示：http: [//jsfiddle.net/yDXLp/3/](http://jsfiddle.net/yDXLp/3/)**

```
<style>
    footer {
        background-color: #eee;
        margin: 10px auto;

    }
    footer h2 {
        font-size: 1.5em;
        font-weight: bold;
    }
    footer > div,
    footer > .divider {
        display: inline-block;
        vertical-align: middle;   
    }
    footer > div {
        padding: 1%;
        text-align: center;
        width:30%;
    }

    footer > .divider {
        font-style: normal;
        height: 240px;
        border: 1px solid #888;
        -webkit-box-shadow: 1px 2px 1px #ccc;
        box-shadow: 1px 2px 1px #ccc;
    }
</style>

<footer>
    <div>
        <h2>Our Client</h2>
        <p>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum </p>
        <button>Read more</button>
    </div>
    <i class="divider"></i>

    <div>
        <h2>Pay Rates</h2>
        <p>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum  </p>
        <button>Read more</button>
    </div>
    <i class="divider"></i>
    <div>
        <h2>About US</h2>
        <p>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum </p>
        <button>Read more</button>
    </div>
</footer> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T11:09:58.143

我建议使用`box-sizing: border-box;`（标准 css 框模型的替代方法）。

**做什么`box-sizing: border-box;`？**如果您定义一个 div 的宽度（例如 33%）并添加边框和填充，它会更长地影响您的 div 的计算。它仍然是父级的 33%，具有 (33% - (borders + paddings))。

标准盒模型将它们添加到计算的 33%（在我们的例子中为 33% + 边框 + 填充）。

**HTML 标记：**

```
<div class="footer">
    <div class="footer-item item1"></div>
    <div class="footer-item item2"></div>
    <div class="footer-item item3"></div>
</div> 
```

**CSS：**

```
.footer {
    box-sizing: border-box; /* will need vendor prefixes for webkit and mozilla */
}

.footer-item {
    width: 33%;
    float: left;
}

.footer-item + .footer-item {
    border-left: 1px solid black;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T10:49:04.563

查看 Twitter Bootstrap（[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)），Gumby 框架（[http://gumbyframework.com/](http://gumbyframework.com/)）

这些框架可以为您提供现成的水平条功能。否则使用边框。将除右边之外的所有边框设置为颜色透明

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T10:52:39.780

做列的 css3 方式是使用[“column-*”系列属性](http://www.w3schools.com/cssref/css3_pr_columns.asp)

现在所有主要浏览器都支持它们，它们应该没有问题。

我个人在我的[主页](http://asm32.hopto.org)中使用这些样式，它们提供了非常灵活（可能有一些小缺点）的布局格式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T10:54:09.473

最好的方法取决于你想要达到的目标。列应如何调整窗口大小等。

如果我在做类似图片中的事情，我可能会使用固定宽度，这样我就可以控制文本的线宽。

通过使用 inline-block，您可以在较小的屏幕（如手机）上实现折叠并放在彼此下方的列

首先尝试找出所需的行为。

**编辑：**哎呀，我误读了水平和垂直;-)我认为其他答案足以解释他的意思。

如果我错了，请纠正我，但我认为 css3 列属性适用于同一文本正文的多个列。

# google-chrome - Chrome 开发者工具不提供源链接？

> ID：14749176
> 
> 赞同：1
> 
> 时间：2013-02-07T10:44:23.283
> 
> 标签：google-chrome, google-chrome-devtools

今天正在调试一个特别讨厌的错误，并在 Chrome 开发者工具中遇到了这个问题：

![在此处输入图像描述](../Images/ab9e664cb827278fe976c5322f961337.png)

如您所见，我添加了一个`console.log()`，通常可以让您单击右侧并带您到源....但是在这种情况下没有源链接。

执行“cmd+alt+F”搜索（即全局搜索）也一无所获。

之前有人遇到过这个问题/知道如何获取正确的源文件吗？

# javascript - 如何将多个外部侦听器注册到 d3 中的同一选择？

> ID：14749182
> 
> 赞同：16
> 
> 时间：2013-02-07T10:44:46.120
> 
> 标签：javascript, event-handling, d3.js

我正在 d3 中编写一个项目，其中我有一个包含两个外部 javascript 文件的 html 页面，比如**script_1.js**和**script_2.js**。
我需要从 script_1.js 注册一个事件侦听器，从 script_2.js 注册另一个事件侦听器，用于选择元素上的更改事件。目前我的 html 中有这一行：

```
<select id="timebasis" class="selector" onchange="selectIndexSp(this),selectIndexBt(this)"> 
```

其中**selectIndexSp(object)**和**selectIndexBt(object)**分别在 script_1.js 和 script_2.js 中定义。我根本不喜欢这种方法，我想知道如何在 d3 而不是在 html 文件中执行相同的任务，我知道这不是一个好习惯。

提前致谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-07T14:37:54.703

您可以将命名空间添加到事件名称，例如：

```
d3.select("#timebasis")
    .on("change.sp", listenersp)
    .on("change.bt", listenerbt); 
```

见：[https ://github.com/mbostock/d3/wiki/Selections#wiki-on](https://github.com/mbostock/d3/wiki/Selections#wiki-on)

> 如果已在选定元素上为相同类型注册了事件侦听器，则在添加新侦听器之前删除现有侦听器。要为同一事件类型注册多个侦听器，该类型后面可以跟一个可选的命名空间，例如“click.foo”和“click.bar”。要删除侦听器，请将 null 作为侦听器传递。

这些函数被传递当前的 datum`d`和 index `i`，`this`上下文作为当前的 DOM 元素。看起来您的两个函数期望 DOM 元素作为参数？在这种情况下，它看起来像：

```
d3.select("#timebasis")
    .on("change.sp", function() { selectIndexSp(this); })
    .on("change.bt", function() { selectIndexBt(this); }); 
```

# android - 使用 Object AnimatorAndorid 进行对角线平移

> ID：14749187
> 
> 赞同：2
> 
> 时间：2013-02-07T10:45:01.380
> 
> 标签：android, android-animation, android-view, android-ui, objectanimator

我正在尝试使用 Android 中的对象动画器进行对角线平移。以下代码在 Y 轴上进行平移。

```
ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(button, "translationY", -value); 
```

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:52:48.577

您可以使用[`AnimatorSet`](https://developer.android.com/reference/android/animation/AnimatorSet.html)with two `ObjectAnimators`，一个执行 Y 转换（如您问题中的示例所示），一个非常相似的执行 X 转换。确保使用 的`playTogether(..)`方法，`AnimatorSet`您可以同时为 X 和 Y 设置动画！

# android - CSVReader 和安卓

> ID：14749189
> 
> 赞同：2
> 
> 时间：2013-02-07T10:45:05.240
> 
> 标签：android, csv, file-io

我想从 csv 文件中读取数据并将其存储到数据库中。这就是我保存 csv 文件的方式（这可以正常工作 - 只是为了显示我计划使用 CSVreader 读取的文件的存储位置和方式）：

```
synchronized public void readFromUrl(String url, String outputFile, Context context) throws FileNotFoundException {
        URL downloadLink = null;
        try {
            downloadLink = new URL(url);
        } catch (MalformedURLException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }
        BufferedReader in = null;

        try {
                        in = new BufferedReader(
                                new InputStreamReader(downloadLink.openStream(), "UTF8"));
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        FileOutputStream fstream = context.openFileOutput(outputFile,Context.MODE_PRIVATE);

        Writer out = new OutputStreamWriter(fstream);

        Log.d(TAG, "BufferedReader "+in); 
        String inputLine = null;
        try {
            while ((inputLine = in.readLine()) != null){
                out.write(inputLine+"\n");
                //logger.debug("DOWNLOADED: "+inputLine);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            fstream.close();
            out.close();
            in.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

到目前为止，我用于读取 csv 文件的代码：

```
public void readInCSVFile(String filename, Context context) throws IOException {
        IDbHelper dbHelper = new DbHelper(); ; 
        CSVReader products = null;

        products = new CSVReader(new InputStreamReader(context.getAssets().open(filename))); 
```

我得到一个 NoClassDefFoundError 异常。

我的 android 项目的引用库中有 opencsv.jar。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:00:15.843

您的项目在 Eclipse IDE 中吗？如果是，请查看是否在“项目属性-> Java 构建路径-> 库”中设置了 lib（opencsv.jar） ，*并*在选项卡中检查了它：“订购和导出”。在“订购和导出”下，将库移到列表顶部。然后清理并重建。

PS：如果这没有帮助，请提供错误的完整堆栈跟踪。

# c# - 从其他线程访问文本框

> ID：14749192
> 
> 赞同：0
> 
> 时间：2013-02-07T10:45:19.210
> 
> 标签：c#, textbox

我正在使用以下代码从另一个线程将文本写入文本框

```
delegate void SetTextCallback(string text);
private void SetText1(string text)
    {
        if (this.textBox7.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText1);
            this.Invoke(d, new object[] { text});
        }
        else
        {
            this.textBox7.Text = text;
        }
} 
```

现在我必须将文本写入多个文本框（例如 textBox8、9、10）。我希望同样的功能**SetText1**工作。那么有没有办法让我在这个函数中创建 textBox7 变量并使用我打算从另一个线程编写的文本框。

否则，如果我遵循我目前的方法，那么如果我想写入十个文本框，我将需要十个**SetText 函数**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T10:56:23.083

你可以只用一个函数来做——你甚至不需要委托

```
 private void SetText(TextBox txt, string text)
    {
        if (txt.InvokeRequired)
        {
           Invoke((MethodInvoker)(() => txt.Text = text));
        }
        else
        {
            txt.Text = text;
        }
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T10:50:38.783

```
delegate void SetTextCallback(TextBox textBox, string text);
private void SetText(TextBox textBox, string text)
{
    if (textBox.InvokeRequired)
    {
        SetTextCallback d = new SetTextCallback(SetText);
        this.Invoke(d, new object[] {textBox, text});
    }
    else
    {
        textBox.Text = text;
    }
} 
```

# javascript - 如何使用javascript在某个div中显示第n个div？

> ID：14749195
> 
> 赞同：0
> 
> 时间：2013-02-07T10:45:31.380
> 
> 标签：javascript, jquery, html

我在一个页面上有多个 div，并且在某个 div 中有更多的子 div 漂浮在页面上。我希望能够使用 javascript 查看窗口的宽度，然后划分我设置的 div 宽度以计算出要显示的数量。

我找到了两段代码。一个测量窗口宽度，另一个用于分割 div 并隐藏其余部分。

```
$('div').slice(4).hide();

var width = $(window).width();
$(window).resize(function(){
   if($(this).width() != width){
      width = $(this).width();
       console.log(width);
       alert(width);
   }
}); 
```

我的问题是如何只选择我指定的 div 中的 div。我试过这个，但没有奏效。甚至不知道我是否朝着正确的方向前进

```
$("#mainContent2").append(('div').slice(4).hide()); 
```

javascrpt 是解决这个问题的正确方法还是 css 能够做我所追求的？

非常感谢

编辑：HTML

```
<div id='mainContent>
<p></p>
<div>
<div id='mainContent2'>
<div><img></img><p></p></div>
<div><img></img><p></p></div>
<div><img></img><p></p></div>
<div><img></img><p></p></div>
<div><img></img><p></p></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:18:19.000

如果您有要显示的 div 的数量，那么您可以使用此代码。

```
 $(#mainconetent2 > div).slice(4).hide()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:53:20.227

我不确定我是否正确理解了您的问题，但 JQuery 提供了用于选择特定元素的子元素的[子选择器。](http://api.jquery.com/child-selector/)然后你可以访问它的参数并且可以设置你想要的任何东西。

# php - php内存占用高

> ID：14749196
> 
> 赞同：0
> 
> 时间：2013-02-07T10:45:37.287
> 
> 标签：php, performance, memory-leaks, zend-framework2, composer-php

我们有一个旧的 facebook 应用程序，运行流畅，用原生 php 编写。

本月我们决定在 zend-framework 2 中重写它。昨天，在切换到新应用程序后，它使我们的服务器崩溃，并出现大量内存不足的错误。所以我们回到旧的应用程序。

我安装了 xdebug 来分析应用程序。使用 memory_get_peak_usage() 函数我注意到内存使用率很高。

在旧应用程序中，静态页面仅使用 1 mb 内存。但是新的大约在同一页面上使用 7-8 mb。

这是 webgrind 的前两行：

```
 Function                                     Invocation Count    Total Self Cost    Total Inclusive Cost
   Composer\Autoload\ClassLoader->loadClass     224                 23.31       47.20
   Composer\Autoload\ClassLoader->findFile      224                 9.57        10.23 
```

还尝试了 tha apache 的 ab 工具

```
 ab -n 50 -c 5 -C PHPSESSID=SESSIONID http://myhost.com 
```

结果是：

```
 Percentage of the requests served within a certain time (ms)
   50%    368
   66%    506
   75%    601
   80%    666
   90%   1073
   95%   1812
   98%   2278
   99%   2278
   100%   2278 (longest request) 
```

所有这些结果都来自生产服务器而不是本地主机。

单页 7-8 mb 正常吗？如果没有，我该如何减少它？我应该在 zf2 还是作曲家中寻找它？

如果您需要，我可以提供代码示例。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:53:19.617

当您将解决方案从本机迁移到 Zend 时，您必须了解 Zend 的工作方式。

Zend 由许多类组成，当您使用对象而不是原生/轻结构时，使用的内存会增加。

要提高内存使用率，请检查您的代码并执行以下操作：

*   在函数中包装一些代码，它可以帮助垃圾收集器从内存中删除未使用的对象。
*   在打印它们之前不要将大量对象列表存储在数组中，只是动态打印。
*   限制循环中对象的创建（调用“new”）。

跳这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:02:51.043

我花了一天时间来解决问题。试过xdebug，xhprof。代码没有问题。

我们切换回 2.0.0 并解决了问题。我不知道新版本有什么问题，现在坚持使用 2.0.0。

总体内存使用量约为 4mb，没有崩溃。

作曲家.json：

```
"zendframework/zendframework": "2.0.0", 
```

# fiddler - 提琴手 api 我的 C# 应用程序的使用

> ID：14749198
> 
> 赞同：1
> 
> 时间：2013-02-07T10:45:38.337
> 
> 标签：fiddler

我想使用 Fiddler API 来监视网页请求的所有 URL，然后使用它们的偏移量来计算加载特定网页所需的时间。

谁能帮助我如何开始？

# c - 在 Oracle 上对空（字符串）元素进行 XML 验证失败

> ID：14749208
> 
> 赞同：1
> 
> 时间：2013-02-07T10:46:17.973
> 
> 标签：c, oracle, xsd-validation

在 Oracle 上验证我的 XML 文档失败（通过 oraxsd c 库），但在其他工具中成功。

Oracle 验证错误：

LSX-00009：类型“#simple”的数据丢失
LSX-00213：粒子“序列”仅出现 0 次，最小值为 1

对于以下 XSD：

```
<xs:element name="AGREE" minOccurs="0">
    <xs:simpleType>
        <xs:restriction base="type7434"/>
    </xs:simpleType>
</xs:element>

<xs:simpleType name="type7434">
    <xs:annotation>
        <xs:documentation>AGREE</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
        <xs:maxLength value="70"/>
    </xs:restriction>
</xs:simpleType> 
```

并遵循 XML：

```
<AGREE/> 
```

相同的结果： `<AGREE></AGREE>`

在这种情况下，Oracle 验证是否错误？如果是这样，解决方法是什么？

我对 XSD 几乎没有控制权，对 XML 有一些控制权以及对验证过程本身的完全访问权限。

Oracle 版本：Oracle9i Enterprise Edition Release 9.2.0.8.0 - 64bit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:42:40.237

对于它的价值，它对我来说似乎是一个错误。我想知道验证器是否在唯一标签和空元素之间做出了一些古怪的区分：它是否也拒绝`<AGREE></AGREE>`？如果添加`<xs:minLength value="0"/>`到 type7434 的声明，它会改变行为吗？

# spring - 将数据传递到服务层的最佳实践

> ID：14749209
> 
> 赞同：4
> 
> 时间：2013-02-07T10:46:19.723
> 
> 标签：spring, design-patterns, spring-mvc

我正在按照 MVC 模式在春季开发一个 Web 应用程序，并且想知道什么被认为是制作可靠服务层的“最佳实践”。这个问题的原因是以下示例情况：

加载了用于编辑用户信息的页面。提交此表单后，我在特定的 Command 类中的控制器方法中收集其所有数据，该类仅包含后续操作（更新用户）所需的数据。

我现在可以想到几种情况来将此信息传递给我的服务层：

*   传递命令本身：userService.save(command);
*   传递模型类，在控制器中获取：userService.save(user);
*   同时传递模型类和命令： userService.save(user, command);
*   单独传递所有参数：userService.save(command.getName(), ...)

在我看来，传递命令类本身看起来是最优雅的解决方案，因为我可以首先使用框架自动验证所有值，然后将它们传递给我的服务。我在这里担心的是，当我从另一个类（而不是通过我的表单/控制器）调用该方法时，我可以用无效数据填充这个命令对象，从而导致服务层中可能出现错误。

你会推荐什么，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:30:45.867

看到你的我有以下想法传递命令本身： userService.save(command);

> 这可能不是一个好主意，因为您的 Service 层不必要地依赖于 Command 对象

```
Passing a model class, fetched in the controller: userService.save(user); 
```

> 我会为此投票。服务层只有它真正应该知道的

```
Passing both a model class and the command: userService.save(user, command); 
```

> 否。与第一个选项相同

```
Passing all of the parameters individually: userService.save(command.getName(), ...) 
```

> 嗯……不确定……将来可能是维护开销。

```
I think if you want to do the validation, Use validation util classes to do the validation 
    which can be used for both Service and UI layer. Here a lot validation can be centralized. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:35:53.670

使用您的 Command 对象的任何选项都会引起麻烦。它打破了松散耦合。现在您的服务层与服务层紧密耦合。请不要这样做。

（编辑：在下面的回答中，当我说表示层的模型时，我指的是视图模型，而服务层是域模型）发送模型对象看起来是一个不错的选择。但是，这取决于模型是如何创建的。有时，表示层需要不同的模型结构，而服务层需要适度/完全不同的结构。

如果两个层有不同的需求，那么您需要创建 2 个模型结构。这样，当表示层发生变化时，服务层的模型结构就不必改变。这很重要，因为服务可能有多个消费者，并且可能无法在表示层更改时更改。

如果它们没有不同的结构，我仍然会从服务层的角度创建它们，因为服务是这里真正的可重用组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:30:32.433

在他的 MVC 书中，Dino Esposito 建议创建一个接受和返回视图模型的“工人”类。控制器使用视图模型调用工作人员，然后工作人员根据需要进行委托。我没有在实践中使用它，但理论上它似乎是一个不错的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T22:00:11.767

在多层系统中处理命令时要遵循的一个很好的模式是拥有一个 CommandBus 服务，该服务将您的命令路由到它们的特定处理程序。这样，您就可以将控制器与服务分离（同时将其与通用路由系统耦合）。

`commandBus.handle(command);`

您必须在配置命令总线处理程序时做额外的工作，但从长远来看，当您能够重用该路由信息时，它会有所回报：

`commandBus.register(commandType, handlerService);`

然后您可以移动`commandBus`服务中命令的验证（即使这将意味着对 commandBus 的一些关注）

`commandBus.registerValidator(commandType, validatorsCollection);`

# c# - 大型数据集的高效 LINQ 查询

> ID：14749214
> 
> 赞同：1
> 
> 时间：2013-02-07T10:46:25.893
> 
> 标签：c#, performance, linq

我有一个在具有 5,00,000 多条记录的数据表上运行的 LINQ 查询。此查询仅返回一行，但运行几乎需要 30 秒。这是我的查询

```
 var callDetailsForNodes = from records in dtRowForNode.Select().Select(dr =>
    new
    {
        caller1 = StringComparer.CurrentCultureIgnoreCase.Compare(dr["F1"], dr["F2"]) < 0 ? dr["F1"] : dr["F2"],
        caller2 = StringComparer.CurrentCultureIgnoreCase.Compare(dr["F1"], dr["F2"]) < 0 ? dr["F2"] : dr["F1"],
        time = dr["F3"],
        filters = dr.Field<string>("F9")
    }).Where(dr => (dtMin <= Convert.ToDateTime(dr.time)) && (dtMax >= Convert.ToDateTime(dr.time)) && (lstCallType.Contains(dr.filters))
             && (dtMinTime <= Convert.ToDateTime(dr.time).TimeOfDay) && (dtMaxTime >= Convert.ToDateTime(dr.time).TimeOfDay))
    .GroupBy(drg => new { drg.caller1, drg.caller2 })
    .Select(drg => new { drg.Key.caller1, drg.Key.caller2, count = drg.Count() }).AsEnumerable()
                                  where (records.caller1.ToString() == VerSelected || records.caller2.ToString() == VerSelected)
                                  select records; 
```

我再次运行查询以重新排列数据从上面的查询中获取

```
 var callDetailsForNodes_ReArrange = from records in callDetailsForNodes.Select(r => new
        {
            caller1 = r.caller1.ToString() == VerSelected ? r.caller1 : r.caller2,
            caller2 = r.caller1.ToString() != VerSelected ? r.caller1 : r.caller2,
            count = r.count
        })
        select records; 
```

然后我只是将此集合绑定到gridview。有没有什么有效的方法来查询这么大的数据集

**编辑**

我尝试逐步调试程序，发现这两个查询实际上运行得很快，并且在我将此查询的结果集添加到 ObservableCollection 以将其绑定到 gridview 的步骤中花费了时间。这是代码

```
foreach (var callDetailsForNode_ReArrange in callDetailsForNodes_ReArrange)
        {

                _CallForNodes.Add(new CallForNodeData
                {
                    Caller1 = callDetailsForNode_ReArrange.caller1.ToString(),
                    Caller2 = callDetailsForNode_ReArrange.caller2.ToString(),
                    Count = callDetailsForNode_ReArrange.count
                });

        } 
```

这里 callDetailsForNodes_ReArrange 的结果集计数 = 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:55:09.337

我已经稍微整理了您的查询（尽管这不会对性能产生很大影响，并且可能存在拼写错误，因为我手头没有 VS）。从您的编辑看来，您对 LINQ 中的延迟执行感到有些困惑。`callDetailsForNodes`不代表您的结果 - 它是一个查询，一旦执行就会提供您的结果。

如果您必须在过程中进行所有这些查询，我建议您`ToList`在第一次选择之后添加一个并单独运行它。然后添加`ToList`到`Where`子句中。调用`ToList`将强制执行您的查询，您将看到延迟在哪里。

最后一点 - 您应该将记录直接传递给`ObservableCollection`构造函数，而不是调用`Add`每个项目。调用`Add`将（我认为）导致集合引发更改通知，这对于小列表来说没什么大不了的，但对于较大的列表会减慢速度。

```
var callDetailsForNodes = dtRowForNode.AsEnumerable()
                              .Select(dr => new {
                                                    caller1 = StringComparer.CurrentCultureIgnoreCase.Compare(dr["F1"], dr["F2"]) < 0 ? dr["F1"] : dr["F2"],
                                                    caller2 = StringComparer.CurrentCultureIgnoreCase.Compare(dr["F1"], dr["F2"]) < 0 ? dr["F2"] : dr["F1"],
                                                    time = Convert.ToDateTime(dr["F3"]),
                                                    filters = dr.Field<string>("F9")})
                              .Where(dr => (dtMin <= dr.time) 
                                        && (dtMax >= dr.time) 
                                        && (lstCallType.Contains(dr.filters))
                                        && (dtMinTime <= dr.time.TimeOfDay) 
                                        && (dtMaxTime >= dr.time.TimeOfDay)
                                        && caller1 == VerSelected || caller2 == VerSelected))
                              .GroupBy(drg => new { drg.caller1, drg.caller2 })
                              .Select(drg => new { drg.Key.caller1, drg.Key.caller2, count = drg.Count()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:50:40.263

有帮助的一件事是将调用之前的 dtMin、dtMax 和 dtMinTime 转换为数据单位 (dr.time)。然后，您可以摆脱在每条记录上多次发生的 Convert.ToDateTime 。

# plone - 如何获取 Dexterity 内容类型的图像并在批处理列表视图中显示？

> ID：14749216
> 
> 赞同：3
> 
> 时间：2013-02-07T10:46:30.240
> 
> 标签：plone, dexterity

我需要创建一个包含基于敏捷的内容类型（Plone 4.2）的文件夹的批处理列表视图，该视图也显示了它们的图像。我找到了两种获取对象图像的方法。

方法一：

在模板中（批次内）

```
 ...
         <div tal:define="item_object item/getObject;">
              <img tal:condition="exists:item_object/@@images/image1"
                   tal:replace="structure item_object/@@images/image1/mini" />
         </div> 
```

方法二：

在视图类中

```
def get_item_image(self, item):
    itemobj = item.getObject()
    scales = getMultiAdapter((itemobj, self.request), name='images')
    scale = scales.scale('image1', scale='mini')
    imageTag = None
    if scale is not None:
       imageTag = scale.tag()
    return imageTag 
```

并在模板中

```
 ...
         <div tal:define="item_image python:view.get_item_image(item)">
              <img tal:condition="item_image"
                   tal:replace="structure item_image" />
         </div> 
```

谁能告诉我哪种方式最好（如果有的话）不唤醒物体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:55:48.433

我认为电流`plone.app.imaging`无论如何都需要唤醒对象以访问其图像比例（毕竟它们存储在对象内部）。所以生成对象的免唤醒列表并不是很容易。

好消息是 Dexterity 内容类型比 Archetypes 内容类型更轻量级，并且通过`folder.contentItems()`在模板中迭代来进行原始列表应该不会那么昂贵。事实上，它甚至可能比通过目录查询更快。所以不要担心唤醒对象，只需使用`plone.app.imaging`方法：

[https://github.com/plone/plone.app.imaging](https://github.com/plone/plone.app.imaging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:55:22.623

您实际上必须唤醒对象并从模式对象中获取字段。

```
<tal:def tal:define="item_object python:item.getObject()">
    <tal:if tal:condition="python:hasattr(item_object, 'Schema')">
        <tal:d2 tal:define="image python:item_object.Schema().getField('image');
                        image python:image and image.getAccessor(item_object)();"
            tal:condition="image">
            <img id="image-rubrique" alt="" tal:attributes="src string:${item_object/absolute_url}/image_mini" />
        </tal:d2>
    </tal:if>
</tal:def> 
```

# json - 使用 HTML5 File API 从本地选择的 JSON 对象访问数据

> ID：14749224
> 
> 赞同：0
> 
> 时间：2013-02-07T10:46:40.110
> 
> 标签：json, fileapi

我正在尝试访问使用 HTML 5 API 在本地选择的 JSON 对象。到目前为止，我的代码是：

**HTML**

```
<input type="file" id="files" name="files[]" /> 
```

**Javascript**

```
JsonObj = null

function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
    f = files[0];
    var reader = new FileReader();

    // Closure to capture the file information.
    reader.onload = (function (theFile) {
        return function (e) {
            // Render thumbnail.
            JsonObj = e.target.result
            console.log(JsonObj);
            var parsedJSON = JSON.parse(JsonObj);
            var x = parsedJSON['frames']['chaingun.png']['spriteSourceSize']['x'];
            console.log(x);

        };
    })(f);

    // Read in JSON as a data URL.
    reader.readAsDataURL(f);
}

document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

**在这里小提琴：http:** [//jsfiddle.net/jamiefearon/8kUYj/11/](http://jsfiddle.net/jamiefearon/8kUYj/11/)

因此，用户选择了一个 Json 文件，然后由`JsonObj`. 为了测试我已经评估了我打印到控制台的 Json 对象： parsedJSON['frames']['chaingun.png']['spriteSourceSize']

我在控制台的 Chrome 中收到以下错误：

```
fiddle.jshell.net:33Uncaught SyntaxError: Unexpected token ILLEGAL
(anonymous function)fiddle.jshell.net:33 
```

作为参考，我正在使用的 Json 文件是：

```
JSONExample = {
    "frames": {
        "chaingun.png": {
            "frame": {
                "x": 1766,
                "y": 202,
                "w": 42,
                "h": 34
            },
            "rotated": false,
            "trimmed": true,
            "spriteSourceSize": {
                "x": 38,
                "y": 32,
                "w": 42,
                "h": 34
            },
            "sourceSize": {
                "w": 128,
                "h": 128
            }
        }        
    }
}; 
```

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:04:56.433

JSON解析有效，真的吗？e.target.result 是一个 BLOB - JSON.parse 如何解析这个？？？更不用说您的 JSON 文件不是真正的 JSON :)

使用`readAsText(f, 'UTF-8')`代替`readAsDataURL`，并制作输入（真实）JSON（删除前导`JSONExample =`和尾随`;`）。

我想我改变了小提琴......我不习惯在随机网页上为每个人写访问权限:)

编辑：好的，也许我没有更新文件 - 不知道我是否可以。只需进行我提到的更改，您的示例“almost-JSON”中没有“cinempa.png”键，所以也修复它。

# python - 当“属性”应用于实例变量“self.x”时，“超出最大递归深度”

> ID：14749225
> 
> 赞同：5
> 
> 时间：2013-02-07T10:46:45.610
> 
> 标签：python

我正在阅读property()，我知道属性访问是通过property() 中指定的方法进行的。但是当执行以下代码时，我得到了“RuntimeError：超出了最大递归深度”。

```
class Property(object):

    def __init__(self):
        self.x = "Raj"

    def gettx(self):
        print "getting x"
        return self.x

    def settx(self, val):
        print "Setting x"
        self.x = val

    def dellx(self):
        print "deleting"
        return self.x

    x = property(gettx, settx, dellx, "I'm object property")

p = Property()
print "p.x", p.x
p.x = "R"
print "p.x:", p.x 
```

是不是不能以这种方式申请财产。因为当 'self.x' 更改为 self._x 和 self.__x 时，它运行良好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T10:51:12.053

该错误是由于以下无限递归循环造成的：您已`x`使用`gettx`、`settx`和`deltx`访问方法定义了一个属性，但访问方法本身尝试访问该属性`x`（即调用自己）。

您应该按照以下几行编写代码：

```
class Property(object):

    def __init__(self):
        self.__x = "Raj"  # Class private

    def gettx(self):
        print "getting x"
        return self.__x

    def settx(self, val):
        print "Setting x"
        self.__x = val

    def dellx(self):
        print "deleting"
        return self.__x

    x = property(gettx, settx, dellx, "I'm object property") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T19:27:32.823

根据[python 文档](https://docs.python.org/2/library/functions.html#property)：

> 如果 c 是 C 的一个实例，cx 将调用 getter，cx = value 将调用 setter，del cx 将调用 deleter。

因此，您的代码行`self.x = "Raj"`本质上调用了 method `settx(self, val)`。在该方法中，该行`self.x = val`再次调用该`settx(self, val)`方法，该方法又再次调用`settx(self, val)`. 因此，我们有一个无限循环。

因此，设置属性值的正确方法是`self._x = value`.

正确代码：

```
class Property(object):
    def __init__(self):
        self._x = 'Raj'

    def gettx(self):
        print "getting x"
        return self._x

    def settx(self, val):
        print "Setting x"
        self._x = val #stores the value in _x. writing self.x = val would cause an infinite loop

    def dellx(self):
        print "deleting"
        del self._x    

    x = property(gettx, settx, dellx, "I'm object property")

p = Property()
print "p.x", p.x
p.x = "R"
print "p.x:", p.x 
```

输出：

```
p.x getting x
Raj
Setting x
p.x: getting x
R 
```

# java - 两个 hashCode 是否相等是否重要，即使这两个对象不是来自同一类型？

> ID：14749229
> 
> 赞同：1
> 
> 时间：2013-02-07T10:46:49.303
> 
> 标签：java, unique, equals, hashcode

假设我有两种类型`A`，并且`B`都有一个唯一的`id`字段，这就是我通常如何实现 equals() 和 hashCode() 方法：

```
@Override
public boolean equals(Object obj) {
    return obj instanceof ThisType && obj.hashCode() == hashCode();
}

@Override
public int hashCode() {
    return Arrays.hashCode(new Object[] { id });
} 
```

在这种情况下，鉴于`A`两者`B`都有一个 1-arg 构造函数来设置各自的`id`字段，

```
new A(1).equals(new A(1)) // prints true as expected,
new A(1).equals(new A(2)) // prints false as expected,
new A(1).equals(new B(1)) // prints false as expected. 
```

但是也，

```
new A(1).hashCode() == new B(1).hashCode() // prints true. 
```

我想知道两个 hashCodes 是否相等是否重要，即使这两个对象不是来自同一类型？hashCode() 可以在 equals() 之外的其他地方使用吗？如果是，目的是什么？

* * *

我考虑实现以下两种方法：

```
@Override
public boolean equals(Object obj) {
    return obj != null && obj.hashCode() == hashCode();
}

@Override
public int hashCode() {
    return Arrays.hashCode(new Object[] { getClass(), id });
} 
```

将类添加到 hashCode 生成将解决这个*潜在的问题*。你怎么看？有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:49:29.617

对于不同类的对象，相同`hashCode()`无关紧要。唯一的`hashCode()`说对象可能是相同的。如果 eg`HashSet`遇到相同的`hashCode()`，它将测试与 的相等性`equals()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:52:37.170

规则很简单：

*   `A.equals(B)`暗示`B.hashcode() == A.hashcode()`
*   `B.hashcode() != A.hashcode()`暗示`!A.equals(B)`

两者之间应该没有其他关系。如果你使用`hashcode()`inside `equals()`，你应该有一个警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:50:38.623

Hashcode 绝对**不会**用在`equals`; 它由基于称为*哈希表*的数据结构的集合使用。从正确性的角度来看，两个哈希码彼此相等总是可以的；这被称为*哈希冲突*，在一般情况下是不可避免的，唯一的后果是性能较弱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:51:30.700

两个不同的对象（即使是相同类型的对象）具有相同的哈希码并没有错，但是您的第二个变体`equals()`对我来说看起来很奇怪。只有当您可以保证您的对象只会与相同类型的对象进行比较时，它才会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:52:13.263

```
Could hashCode() be used somewhere else than in equals()? 
```

支持此方法是为了哈希表的好处，例如`java.util.Hashtable.`从[javadoc提供的哈希表](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)

还

hashCode 的一般合约是：

*   每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。
*   如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。
*   不要求如果两个对象根据`equals(java.lang.Object)`方法不相等，则对两个对象中的每一个调用 hashCode 方法必须产生不同的整数结果。但是，程序员应该意识到，**为不相等的对象生成不同的整数结果可能会提高哈希表的性能**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T10:54:42.970

并不是说，当 A 扩展 B 或 B 扩展 A 时，您的 equals 方法是错误的，因为：

```
a.equals(b) != b.equals(a) 
```

如果 a 和 b 恰好具有相同的哈希码。

# c++ - 如果编译器内联通过函数指针调用的函数会发生什么

> ID：14749230
> 
> 赞同：15
> 
> 时间：2013-02-07T10:46:50.023
> 
> 标签：c++, c, compiler-construction

假设我的程序和代码中的某个地方有一个函数，该函数是通过函数指针调用的。如果编译器碰巧内联该函数会发生什么，或者编译器会意识到有一个函数指针分配给该函数并因此避免内联它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T10:50:26.967

当使用指向函数的指针时，编译器将为函数生成一个外联体。仍然可以在其他调用站点内联该函数。

请注意，标记的功能`inline`必须在引用它的所有 TU 中都有可用的定义，并且这些定义必须相同。这意味着在某些调用站点内联该函数并使其在其他站点保持外联是完全安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T10:48:49.403

好吧，它肯定会奏效。我不知道内联如何防止这种情况。您只是有一些直接调用该函数的代码，并且它可能在那里内联，并且您有一些通过函数指针调用它的代码，就像一个常规函数一样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T10:49:18.047

没有理由使用函数指针来防止内联。内联是根据具体情况进行的，并且可以与通常的函数体一起存在。所以一个函数可以在一个地方内联，在另一个地方调用。

因此，编译器将内联它可以并且仍然为您的函数指针生成一个可调用函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T11:17:42.510

编译器不仅内联“函数的其他调用”，而且如果它对实际使用的函数有足够的了解，它甚至可以通过函数指针内联调用，如下所示：

```
typedef void (*funcptr)();

void somefunc()
{
   ... do stuff here ... 
}

void indirection(funcptr *f)
{
   f();
}

void call_with_ptr()
{
    funcptr f = somefunc();
    for(int i = 0; i < 100; i++)
    {
       indirection(f);
    }
} 
```

我有与此类似的代码，它内联了间接调用，并使对 somefunc() 的调用成为直接调用，而不使用函数指针。

但是当然，这假设编译器可以确定从代码中调用了哪个函数——这在这种情况下很明显，但如果涉及运行时决策，它可能不会这样做。

# php - App_access_token 总是返回 False

> ID：14749235
> 
> 赞同：0
> 
> 时间：2013-02-07T10:47:26.863
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-access-token

根据[Facebook 文档](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)，使用`App_access_token`很简单：

```
$appid = 'xxx';
$secret = 'yyyyyyyyy';
$facebook = new Facebook(array(
  'appId'  => $appid,
  'secret' => $secret,
  'cookie' => true,
));

$session = $facebook->getUser()>0;
if($session){
  $access_token = 'access_token='.$facebook->getAccessToken();
  $app_access_token = file_get_contents("https://graph.facebook.com/oauth/access_token?client_id=$appid&client_secret=$secret&grant_type=client_credentials");
} 
```

我的问题是这`$access_token`很好**，但** `$app_access_token` **总是返回 false**，我做错了什么？

-编辑-

如果我在浏览器中打开`app_access_token`URL，我可以看到访问令牌！file_get_contents 似乎失败了...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:53:47.050

我 file_get_contents 不工作试试这个：

启用 php ini 设置`allow_url_fopen`，然后重新启动服务器。

这是工作代码：

```
<?php

$facebook_appid         = "facebook_appid";                                 // Facebook appplication id
$facebook_secret        = "facebook_secret";                // Facebook secret id
$redirect_uri           = "https://192.168.75.44/facebook_login/fb_login.php";   // return url to our application after facebook login ## should be SAME as in facebook application
//$cancel_url             = "";                                             // redirect url if user denies the facebook login ## should be SAME as in facebook application
$scope                  = "user_photos,email,user_birthday,user_online_presence,offline_access"; // User permission for facebook

$code                   = $_REQUEST["code"]?$_REQUEST["code"]:"";

if(empty($code)) {  
    $_SESSION['state']  = time(); // CSRF protection
    $dialog_url         = "https://www.facebook.com/dialog/oauth?client_id=". $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri) . "&state=". $_SESSION['state'] . "&scope=".$scope;
    header("location:".$dialog_url);
}

if($_SESSION['state'] && ($_SESSION['state'] == $_REQUEST['state'])) {
    $token_url          = "https://graph.facebook.com/oauth/access_token?". "client_id=" . $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri). "&client_secret=" . $facebook_secret . "&code=" . $code;
    $response           = @file_get_contents($token_url);

    $params             = null;
    parse_str($response, $params);

    echo $params['access_token'];
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:26:29.410

可能会`file_get_contents`造成问题，可能是由于某些 php 配置设置。（此处讨论：[file_get_contents 返回空字符串](https://stackoverflow.com/questions/4172860/file-get-contents-returns-empty-string)）

我会建议你改用 cURL，类似的东西 -

```
function get_content($URL){
      $ch = curl_init();
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($ch, CURLOPT_URL, $URL);
      $data = curl_exec($ch);
      curl_close($ch);
      return $data;
  }

echo get_content('http://example.com'); 
```

如果问题仍然存在，请重新检查url中的`app_id`和的值。`secret`

# javascript - 选中/取消选中除一个复选框之外的所有复选框。？

> ID：14749236
> 
> 赞同：0
> 
> 时间：2013-02-07T10:47:28.587
> 
> 标签：javascript, select, checkbox

目前我正在使用它来检查/取消选中我表单中的所有复选框。

```
<script type="text/javascript">
checked=false;
function checkedAll (frm1) {
    var aa= document.getElementById('frm1');
     if (checked == false)
          {
           checked = true
          }
        else
          {
          checked = false
          }
    for (var i =0; i < aa.elements.length -2; i++) 
    {
     aa.elements[i].checked = checked;
    }
      }
</script> 
```

这很好用，但我不想受到影响，但我在此表单中有一个复选框。

它有一个 id `id='ignore'`无论如何上面的代码可以用来工作，但忽略这个复选框？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:50:04.643

```
for (var i =0; i < aa.elements.length -2; i++) 
    {
        if(aa.elements[i].id !== 'ignore'){
             aa.elements[i].checked = checked;
         }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:02:59.940

摆脱 if 循环也......
完整的代码 -

```
<script type="text/javascript">

var checked = false;

function checkedAll (frm1) {
    var chkBoxs = document.getElementById('frm1').getElementsByTagName('input');

    checked = !checked;

    for (var i =0; i < chkBoxs.length -2; i++) {
        if (chkBoxs[i].id == 'ignore') {
            continue;
        }
        chkBxs[i].checked = checked;
    }
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:51:04.987

```
for (var i =0; i < aa.elements.length -2; i++) 
{
if (aa.elements[i].getAttribute('id') != 'ignore')
 aa.elements[i].checked = checked;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:51:58.787

```
for (var i =0; i < aa.elements.length -2; i++) 
{
if (aa.elements[i].getAttribute('id') == 'ignore') 
continue;
 aa.elements[i].checked = checked;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:54:35.923

```
<script type="text/javascript">
checked=false;
function checkedAll (frm1) {
    var aa= document.getElementById('frm1');
     if (checked == false)
          {
           checked = true
          }
        else
          {
          checked = false
          }
     for (var i =0; i < aa.elements.length -2; i++) 
       {
         if (aa.elements[i].getAttribute('id') == 'ignore') 
             aa.elements[i].checked = false;
         else
             aa.elements[i].checked = checked;
     }
      }
</script> 
```

# r - 来自宽 data.frames 的汇总数据表

> ID：14749237
> 
> 赞同：1
> 
> 时间：2013-02-07T10:47:31.313
> 
> 标签：r, dataframe, plyr, summary

我正在尝试`data.frames`从 Wide中找到创建汇总表的惰性/简单方法`data.frames`。假设以下 data.frame，但有更多列，因此指定列名需要很长时间：

```
set.seed(2)
x <- data.frame(Rep = rep(1:3, 4), Temp = c(rep(10,6), rep(20,6)), 
pH = rep(c(rep(8.1, 3), rep(7.6, 3)), 2),
Var1 = rnorm(12, 5,2), Var2 = c(rnorm(6,4,1), rnorm(6,3,5)),
Var3 = rt(12, 20))
x[1:3] <- as.data.frame(apply(x[1:3], 2, function(x) as.factor(x))) 
```

现在我可以计算汇总统计`plyr`：

```
(mu <- ddply(x, .(Temp, pH), numcolwise(mean)))
(std <- ddply(x, .(Temp, pH), numcolwise(sd)))
(n  <- ddply(x, .(Temp, pH), numcolwise(length))) 
```

但我无法弄清楚如何同时应用所有这些功能：

```
ddply(x, .(Temp, pH), numcolwise(mean, sd, length)) 
```

我当然可以合并各种汇总 data.tables，但这不会是一种“懒惰/简单”的方式。我正在寻找可以在许多情况下应用的通用内容。像这样的东西，除了应该可以用单个函数生成：

```
xx <- merge(mu, std, by = c("Temp", "pH"), sotr = F)
colnames(xx) <- gsub("x", "mean", colnames(xx))
colnames(xx) <- gsub("y", "sd", colnames(xx))
xx <- merge(xx, n, by = c("Temp", "pH"), sotr = F)
colnames(xx)[(ncol(xx)-2):ncol(xx)] <-
paste0(colnames(xx)[(ncol(xx)-2):ncol(xx)], ".length")
xx <- xx[c("Temp", "pH", grep("Var1", colnames(xx), value = T),
grep("Var2", colnames(xx), value = T),
grep("Var3", colnames(xx), value = T))]
xx

  Temp  pH Var1.mean  Var1.sd Var1.length Var2.mean  Var2.sd Var2.length Var3.mean  Var3.sd Var3.length
1   10 7.6  4.281195 1.352194           3  3.534447 1.652884           3 0.1529616 1.076276           3
2   10 8.1  5.583853 2.491672           3  4.116622 1.478286           3 1.1611944 1.081301           3
3   20 7.6  5.840411 1.120549           3  6.907273 8.628021           3 0.1301949 1.764201           3
4   20 8.1  6.635154 2.232262           3  8.893188 4.208087           3 0.5509202 1.187431           3 
```

目前可以在**R**中执行此操作吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:55:56.543

`reshape2`使用and的一种方法`plyr`。但是你得到的结果是行而不是列中的变量：

```
library(reshape2)
library(plyr)
md <- melt(x[,-1], id.vars=c("Temp","pH"))
ddply(md, c("Temp", "pH", "variable"), summarize, mean=mean(value), sd=sd(value)) 
```

这使 ：

```
 Temp  pH variable      mean       sd
1    10 7.6     Var1 4.2811952 1.352194
2    10 7.6     Var2 3.5344474 1.652884
3    10 7.6     Var3 0.1529616 1.076276
4    10 8.1     Var1 5.5838533 2.491672
5    10 8.1     Var2 4.1166215 1.478286
6    10 8.1     Var3 1.1611944 1.081301
7    20 7.6     Var1 5.8404110 1.120549
8    20 7.6     Var2 6.9072734 8.628021
9    20 7.6     Var3 0.1301949 1.764201
10   20 8.1     Var1 6.6351538 2.232262
11   20 8.1     Var2 8.8931884 4.208087
12   20 8.1     Var3 0.5509202 1.187431 
```

如果您希望结果采用宽格式，您可以使用`reshape`：

```
md <- melt(x[,-1], id.vars=c("Temp","pH"))
result <- ddply(md, c("Temp", "pH", "variable"), summarize, mean=mean(value), sd=sd(value))
reshape(result, idvar=c("Temp","pH"), timevar="variable",direction="wide")

   Temp  pH mean.Var1  sd.Var1 mean.Var2  sd.Var2 mean.Var3  sd.Var3
1    10 7.6  4.281195 1.352194  3.534447 1.652884 0.1529616 1.076276
4    10 8.1  5.583853 2.491672  4.116622 1.478286 1.1611944 1.081301
7    20 7.6  5.840411 1.120549  6.907273 8.628021 0.1301949 1.764201
10   20 8.1  6.635154 2.232262  8.893188 4.208087 0.5509202 1.187431 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:13:41.583

Base R`aggregate`实际上可以处理这个问题，但是以一种奇怪的方式：

```
(temp <- aggregate(. ~ Temp + pH, x, function(y) cbind(mean(y), sd(y), length(y))))
#   Temp  pH Rep.1 Rep.2 Rep.3   Var1.1   Var1.2   Var1.3   Var2.1   Var2.2   Var2.3
# 1   10 7.6     2     1     3 4.281195 1.352194 3.000000 3.534447 1.652884 3.000000
# 2   20 7.6     2     1     3 5.840411 1.120549 3.000000 6.907273 8.628021 3.000000
# 3   10 8.1     2     1     3 5.583853 2.491672 3.000000 4.116622 1.478286 3.000000
# 4   20 8.1     2     1     3 6.635154 2.232262 3.000000 8.893188 4.208087 3.000000
#      Var3.1    Var3.2    Var3.3
# 1 0.1529616 1.0762763 3.0000000
# 2 0.1301949 1.7642008 3.0000000
# 3 1.1611944 1.0813007 3.0000000
# 4 0.5509202 1.1874306 3.0000000
str(temp)
# 'data.frame':  4 obs. of  6 variables:
#  $ Temp: Factor w/ 2 levels "10","20": 1 2 1 2
#  $ pH  : Factor w/ 2 levels "7.6","8.1": 1 1 2 2
#  $ Rep : num [1:4, 1:3] 2 2 2 2 1 1 1 1 3 3 ...
#  $ Var1: num [1:4, 1:3] 4.28 5.84 5.58 6.64 1.35 ...
#  $ Var2: num [1:4, 1:3] 3.53 6.91 4.12 8.89 1.65 ...
#  $ Var3: num [1:4, 1:3] 0.153 0.13 1.161 0.551 1.076 ... 
```

请注意，当我们查看输出的结构时，我们发现“Rep”、“Var1”等实际上是矩阵。因此，您可以提取它们和`cbind`它们。但是，这有点乏味。

前段时间我不得不做类似的事情，最后我只写了一个`aggregate`看起来像这样的基本包装器。

```
aggregate2 <- function(data, aggs, ids, funs = NULL, ...) {
  if (identical(aggs, "."))
    aggs <- setdiff(names(data), ids)
  if (identical(ids, "."))
    ids <- setdiff(names(data), aggs)
  if (is.null(funs))
    stop("Aggregation function missing")
  myformula <- as.formula(
    paste(sprintf("cbind(%s)", paste(aggs, collapse = ", ")),
          " ~ ", paste(ids, collapse = " + ")))
  temp <- aggregate(
    formula = eval(myformula), data = data,
    FUN = function(x) sapply(seq_along(funs), 
                             function(z) eval(call(funs[z], quote(x)))), ...)
  temp1 <- do.call(cbind, lapply(temp[-c(1:length(ids))], as.data.frame))
  names(temp1) <- paste(rep(aggs, each = length(funs)), funs, sep = ".")
  cbind(temp[1:length(ids)], temp1)
} 
```

这是您如何将其应用于示例数据的方法。

```
(temp2 <- aggregate2(x, ".", c("Temp", "pH"), c("mean", "sd", "length")))
#   Temp  pH Rep.mean Rep.sd Rep.length Var1.mean  Var1.sd Var1.length Var2.mean
# 1   10 7.6        2      1          3  4.281195 1.352194           3  3.534447
# 2   20 7.6        2      1          3  5.840411 1.120549           3  6.907273
# 3   10 8.1        2      1          3  5.583853 2.491672           3  4.116622
# 4   20 8.1        2      1          3  6.635154 2.232262           3  8.893188
#    Var2.sd Var2.length Var3.mean  Var3.sd Var3.length
# 1 1.652884           3 0.1529616 1.076276           3
# 2 8.628021           3 0.1301949 1.764201           3
# 3 1.478286           3 1.1611944 1.081301           3
# 4 4.208087           3 0.5509202 1.187431           3 
```

而且，结构是我们所期望的。

```
str(temp2)
# 'data.frame':  4 obs. of  14 variables:
#  $ Temp       : Factor w/ 2 levels "10","20": 1 2 1 2
#  $ pH         : Factor w/ 2 levels "7.6","8.1": 1 1 2 2
#  $ Rep.mean   : num  2 2 2 2
#  $ Rep.sd     : num  1 1 1 1
#  $ Rep.length : num  3 3 3 3
#  $ Var1.mean  : num  4.28 5.84 5.58 6.64
#  $ Var1.sd    : num  1.35 1.12 2.49 2.23
#  $ Var1.length: num  3 3 3 3
#  $ Var2.mean  : num  3.53 6.91 4.12 8.89
#  $ Var2.sd    : num  1.65 8.63 1.48 4.21
#  $ Var2.length: num  3 3 3 3
#  $ Var3.mean  : num  0.153 0.13 1.161 0.551
#  $ Var3.sd    : num  1.08 1.76 1.08 1.19
#  $ Var3.length: num  3 3 3 3 
```

如果您不想使用该函数，这是专门处理 的输出的部分`aggregate`，适用于我们在此答案开头创建的“temp”对象：

```
temp1 <- do.call(cbind, lapply(temp[-c(1:2)], as.data.frame))
funs <- c("mean", "sd", "length")
names(temp1) <- paste(rep(setdiff(names(temp), c("pH", "Temp")), 
                          each = length(funs)), funs, sep = ".")
cbind(temp[1:2], temp1) 
```

* * *

### 更新：更简单的解决方案

[事实证明](https://stackoverflow.com/a/14759569/1270695)，您实际上可以这样做：

```
do.call(data.frame, 
        aggregate(. ~ Temp + pH, x, function(y) cbind(mean(y), sd(y), length(y)))) 
```

这里的缺点是名称的描述性不如`aggregate2`我共享的函数，但这可以通过非常简单的调用来解决`names`。

# c# - 如何在按钮单击时使用单独的 PostBacks 运行两个不同的事件

> ID：14749241
> 
> 赞同：0
> 
> 时间：2013-02-07T10:47:35.130
> 
> 标签：c#, asp.net, .net

我有带有代码的按钮：

```
protected void Button1_Click(object sender, EventArgs e) {
    Label1.Text = "Searching for services";
    UpdatePanel1.Update();
    } 
```

但此外，当我找到我的服务时，我需要显示一些东西，所以我添加了另一个事件：

```
 Button1.Click += (s, k) => {
        discovery.FindAlreadyRegisteredServices();
        discovery.discoveryClient.FindCompleted += FoundEvent;
        auto[1].WaitOne();
        UpdatePanel1.Update();
    }; 
```

这很慢（并由 AutoResetEvent 控制）

```
protected void FoundEvent(object sender, FindCompletedEventArgs e) {
    Label1.Text = "Found " + ((discovery.endpoints.Count > 0) ? discovery.endpoints[0].Address.ToString() : "nothing");
    auto[1].Set();
} 
```

问题是我`Button1.Click += (s, k) =>`根本没有任何意义，因为它在之后执行，`Button1_Click`直到`PostBack`所有绑定事件都完成？

我知道我可以通过使用在客户端上使用我想要的一切`UpdateProgress`，`javascript`但我在这里想要的是客户端发送 2 个事件并等待 2 个答案，制作 2 个 PostBacks。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:55:16.890

```
protected void Button1_Click(object sender, EventArgs e) {
    Label1.Text = "Searching for services";
    //change postback hooks
    Button1.Click -= Button1_Click;
    Button1.Click += AnotherEventPB;
    ScriptManager.RegisterStarupScript(this, GetType(), postback, "__doPostBack();", true);
    UpdatePanel1.Update();
}

protected void AnotherEventPB(object sender, EventArgs e)
{
        //reset postback hooks
        Button1.Click -= AnotherEventPB; 
        Button1.Click += Button1_Click;
        discovery.FindAlreadyRegisteredServices();
        discovery.discoveryClient.FindCompleted += FoundEvent;
        auto[1].WaitOne();
        UpdatePanel1.Update();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:51:13.150

> 我知道我可以通过使用 UpdateProgress 和 javascript 在客户端上使用我想要的一切，但我想要的是客户端发送 2 个事件并等待 2 个答案，进行 2 个 PostBacks。

为什么？这似乎是一个任意约束，使原本微不足道的任务变得不必要地复杂。

# c# - 带有 WPF WebBrowser 控件的本地网页中的 VLC ActiveX

> ID：14749242
> 
> 赞同：4
> 
> 时间：2013-02-07T10:47:52.027
> 
> 标签：c#, .net, browser, activex, vlc

因此，我尝试在**WPF WebBrowser 控件** 下运行**VLC ActiveX v.2** ，并在本地加载它。

 **并且 VLC ActiveX 不工作......

**C＃**

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{ 
  var file = System.IO.Path.Combine(System.AppDomain.CurrentDomain.BaseDirectory, "index.html");

 using (StreamReader sr = new StreamReader(file))
 {
     String url = sr.ReadToEnd();
     wb.NavigateToString(url);
  }
} 
```

**HTML**

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <title></title>
</head>
<body>
    <object width="720" height="408" id='vlc1_IE' events="True" codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab" classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921">
        <embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org" version="VideoLAN.VLCPlugin.2"
            width="720" height="408"
            id="vlc1">
        </embed>
        <param name="src" value="http://content.bitsontherun.com/videos/bkaovAYt-52qL9xLP.mp4" />
        <param name="ShowDisplay" value="True" />
        <param name="AutoPlay" value="False" />
    </object>
</body>
</html> 
```

***请注意，如果我远程加载它，它工作正常！***

我也尝试像嵌入式资源一样使用 index.html。

所以我用过

```
Stream docStream = Assembly.GetExecutingAssembly().GetManifestResourceStream("WpfApplication12.index.html");
wb.NavigateToStream(docStream); 
```

有可能吗？WPF WebBrowser 控件是否非常受限于使用 ActiveX 执行本地网页？

有什么线索吗？

PS 我已经尝试对 WInForm WebBrowser 控件做同样的事情 - 不高兴......

PS#2 我已经尝试过这个项目[http://www.codeproject.com/Articles/3919/Using-the-WebBrowser-control-simplified](http://www.codeproject.com/Articles/3919/Using-the-WebBrowser-control-simplified)并且与 VLC ActiveX 相同的 HTML 在那里工作正常。但它是用 C++ 完成的，我根本不知道...... :(

PS #3 我刚刚尝试过 MS Media Player 和 VLC ActiveX，MS Media Player 工作正常！

```
 <embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org" version="VideoLAN.VLCPlugin.2"
            width="720" height="408"
            id="vlc1">
        </embed>

    <object classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"
        <param name="URL" value="example.wmv" >
        </object> 
```

![在此处输入图像描述](../Images/2ca533ec43e7198732a1677c192c8080.png)

PS#4 我也尝试使用[这个](http://msdn.microsoft.com/en-us/library/ms537508%28VS.85%29.aspx)例子动态创建 VLC ActiveX 控件，但一点也不快乐......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:03:40.607

关于这条评论：

> 请注意，如果我远程加载它，它工作正常！

您是否使用 Internet Explorer 进行此测试？如果是这样，你有任何插件吗？

我问这个问题是因为 WebBrowser 控件（至少在 WinForms 中）不**支持**插件/附加组件。仅仅因为某些东西在您的成熟浏览器中工作并不一定意味着它可以在 WebBrowser 中工作。如果您为此 VLC 集成使用 ActiveX 插件，这可能在 WebBrowser 控件中不起作用。

**编辑回应评论**

当您尝试此代码时（请注意，我已稍微更改了您的第二行）：

```
Stream docStream = Assembly.GetExecutingAssembly().GetManifestResourceStream("WpfApplication12.index.html");
wb.NavigateToStream(docStream); 
```

...您是说它根本不加载 HTML**吗**？或者它是否加载，但您的视频 (VLC) 控件不起作用？**

# .htaccess - 没有url重写的Htaccess重定向

> ID：14749245
> 
> 赞同：1
> 
> 时间：2013-02-07T10:48:00.623
> 
> 标签：.htaccess, url-rewriting

我手上有一个小问题。

我正在设置一个包含 3 种语言的域，example.com 用于主域，en.(...) 用于英语，de.(...) 用于德国。通常我只使用 ln -S 将 httpdocs 从子域重定向到主域，因为所有语言都执行相同的代码，差异与 php 和 mysql 匹配。

我的新主机不提供任何 ssh 连接，因此我必须对此使用不同的方法。

有人告诉我它可以通过 .htaccess 完成，但我已经尝试了很多东西，但只能重定向，更改 url，这是不可能的，它必须保持不变，内容是的，将来自另一个域. 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:53:41.753

此代码应类似于您要搜索的代码：

**www.domain.en .htaccess**

```
RewriteBase /
RewriteRule ^(.*)$ http://www.domain.com/en/$1 [L,R=301] 
```

**www.domain.de .htaccess**

```
RewriteBase /
RewriteRule ^(.*)$ http://www.domain.com/de/$1 [L,R=301] 
```

您将适当地调整`http://www.domain.com/lang/$1`零件以满足您的需求。

* * *

**编辑**

根据您的评论，这是子域重定向的代码：

**domain.com .htaccess**

```
RewriteCond %{HTTP_HOST} ^en\.domain\.com [NC]
RewriteRule (.*) http://domain.com/en/$1 [QSA,L]

RewriteCond %{HTTP_HOST} ^de\.domain\.com [NC]
RewriteRule (.*) http://domain.com/de/$1 [QSA,L] 
```

# ruby - 无法在 Sinatra 中加载我的自定义模块

> ID：14749246
> 
> 赞同：0
> 
> 时间：2013-02-07T10:48:10.403
> 
> 标签：ruby, module, sinatra

我正在尝试在 Sinatra 中加载我的自定义模块，但是在加载应用程序时我得到了

```
'include' : Wrong argument type String (expected Module) 
```

所以在我的 app.rb 我有

```
require './config/config.rb'
include 'MyConfig' 
```

我的模块看起来像这样

```
module MyConfig
def config
 environment = ENV["RACK_ENV"] || "development" 
 YAML.load_file("/config/config.yml")[environment]
end
end 
```

我正在尝试使用 config.yml 文件来加载一些变量（即电子邮件凭据）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:52:20.047

包括不像要求。包含必须是另一个类或模块主体的一部分。

做这个：

```
require './config/config.rb'

class App
    include MyConfig

    # more code here
end 
```

Include 基本上用作当前范围内的类或模块的内联扩展。它允许您将功能从外部代码混合到对象中，而无需扩展该外部代码。

# android - Android 服务中的 onDestroy

> ID：14749251
> 
> 赞同：0
> 
> 时间：2013-02-07T10:48:32.727
> 
> 标签：android, android-service

我有一个长期运行的服务，它响应多个`BroadcastReceivers`（在代码中创建，而不是清单）。大多数时候服务运行良好，但有时它会以某种方式停止（`BroadcastReceivers`停止工作） - 我猜系统会以某种方式暂停它（当我查看设备上正在运行的进程时，我可以清楚地看到服务仍在“运行”）。

我不知道暂停服务的正确原因，但我想知道在这些情况下`onDestroy()`是否调用了该方法，或者是否有机会以某种方式处理这个问题。

我认为`onDestroy()`没有被调用，因为该服务在 Running processes 选项卡中仍然可见。我还让服务返回`START_STICKY`标志，因此系统应该在它因内存原因被杀死时重新启动它。此外，如果它以某种方式“暂停”，是否可以创建一个`WakeLock`不发生这种情况？

我知道最好的解决方案是将所有内容放入清单并创建一个从他们的方法`BroadcastReceivers`调用的一次性服务。`onReceive()`但是我选择了长时间运行服务的方式，因为初始化阶段非常密集，最好只初始化一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:06:32.140

**onDestroy()**只会在服务因资源不足而被终止或您明确停止服务时被调用。

当您的手机空闲时（通常在屏幕关闭时），该服务可以“暂停”，因为 CPU 停止。要使服务始终运行，您应该使用**PowerManager.PARTIAL_WAKE_LOCK** - 但要明智地使用它，因为它不会停止 CPU 并因此耗尽电池。你永远不应该让你的应用程序一直运行。只需做您需要持有*WakeLock*然后释放它的事情。

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

[http://developer.android.com/reference/android/os/PowerManager.WakeLock.html](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)

您可以使用 AlarmManager 定期“唤醒”您的应用程序并执行某些操作。

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

# wordpress - 简单的非营利主题的 WORDPRESS 麻烦

> ID：14749262
> 
> 赞同：0
> 
> 时间：2013-02-07T10:48:57.843
> 
> 标签：wordpress, template-engine

我基于这个免费的 Wordpress 主题创建了一个 Web 应用程序：

[http://vandelaydesign.com/blog/wp-themes/simple-non-profit/](http://vandelaydesign.com/blog/wp-themes/simple-non-profit/)

在 localhost 环境中一切正常，但是当我在远程（PHP + MySQL + 电子邮件活动）上上传站点时，管理面板发生了变化，并且只显示了整个管理菜单的一部分。

例如，管理面板没有显示主题自定义页面和幻灯片自定义页面，而是在本地环境中，我拥有它。

你能帮助我吗？？？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:23:42.163

可能是实时服务器正在运行不同版本的 PHP，或者具有使其与本地环境不同的配置设置。

但是，我的猜测是您在传输数据库时没有正确修改数据库，这就是您的问题的原因（我建议这与主题无关）。

将 Wordpress 数据库从本地开发环境迁移到现场可能会非常痛苦，因为 Wordpress（以及许多插件/主题开发人员）使用序列化数组来存储数据。因此，如果您在数据库上进行查找和替换以将旧网址替换为新网址，您将禁用很多东西，例如配置设置和小部件（特别是文本小部件，但最终需要重新创建大量内容）。

下载此文件；

[http://interconnectit.com/124/search-and-replace-for-wordpress-databases/](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)

并将其上传到服务器并直接在浏览器中访问。运行快速表单并在您的数据库 url 上执行序列化的数组友好查找和替换。任务完成。

删除实时服务器上的数据库并再次复制数据库的本地版本，但这一次使用上面线程中的说明将本地 url 路径的所有实例更改为实时域 url。

# javascript - Onblur 防止提交表单时提交

> ID：14749263
> 
> 赞同：4
> 
> 时间：2013-02-07T10:48:58.653
> 
> 标签：javascript, html, validation

我有正在调用`onblur`各个输入字段的验证功能。同时我用一个说`validateall()`函数调用相同的验证函数，并且`validateall()`正在被调用`onsubmit`。现在的问题是，如果发生了一些错误，我已经纠正了它并提交了当时`onblur`正在调用的表单，这阻止了调用`onsubmit`事件。这个问题我只在 Firefox 中遇到。

javascript:

```
function validateFormOnSubmit(theForm) 
{
vUsername(theForm.userName,document.getElementById('UError'));//this will return true or false depends on error occurrence. 
} 
```

html:

```
<form name="form" onsubmit="return validateFormOnSubmit(this);">
<input type="text" id="userName" onblur="vUsername(this,UError);"> 
```

//UError 是 div id，我将在其中打印错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:35:30.673

对 onBlur 使用 delay() 函数或 setTimeOut() 函数。

这个链接也可以帮助你.. [jQuery 验证 onblur](https://stackoverflow.com/questions/4622232/jquery-validation-onblur)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:31:03.520

将 setTimeout 函数添加到您的 onBlur 事件。要移交您的参数，您必须使用匿名函数：

```
<input type="text" id="userName" onblur="setTimeout(function(){ vUsername(this,UError) }, 200);"> 
```

现在您的提交事件应该比 onBlur 更快:-)

# ios - 触发 UIButton 操作时如何传递自定义对象？

> ID：14749273
> 
> 赞同：0
> 
> 时间：2013-02-07T10:49:30.137
> 
> 标签：ios, objective-c, cocoa-touch

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我在以下方法上有一个选择器，我需要传递另一个参数：

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    NSLog(@"viewForAnnotation");

    MKAnnotationView *annotationView = nil;

    // if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    if ([annotation isKindOfClass:[ShopAnnotation class]])
    {
        // try to dequeue an existing pin view first
        static NSString *ReusableAnnotationIdentifier = @"reusableShopAnnotationIdentifier";

        MKPinAnnotationView *pinView = (MKPinAnnotationView *)[theMapView dequeueReusableAnnotationViewWithIdentifier:ReusableAnnotationIdentifier];

        if (!pinView)
        {
            // if an existing pin view was not available, create one
            MKPinAnnotationView *customPinView = [[MKPinAnnotationView alloc]
                                                  initWithAnnotation:annotation reuseIdentifier:ReusableAnnotationIdentifier];

            customPinView.pinColor = MKPinAnnotationColorPurple;
            customPinView.animatesDrop = YES;
            customPinView.canShowCallout = YES;

            // add a detail disclosure button to the callout which will open a new view controller page
            UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
            [rightButton addTarget:self
                            action:@selector(showDetails:)
                  forControlEvents:UIControlEventTouchUpInside];

            customPinView.rightCalloutAccessoryView = rightButton;

            return customPinView;
        }
        else
        {
            pinView.annotation = annotation;
        }

        annotationView = pinView;
    }

    return annotationView;
} 
```

我需要将一个对象传递给`showDetails:`：

```
 // add a detail disclosure button to the callout which will open a new view controller page
        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        [rightButton addTarget:self
                        action:@selector(showDetails:)
              forControlEvents:UIControlEventTouchUpInside]; 
```

这是如何`showDetails`实现的：

```
- (void) showDetails:(id)sender
{
    NSLog(@"Show Details");
    DetailViewController* mvc = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPhone" bundle:nil];

    mvc.delegate = self;

    [self presentModalViewController:mvc animated:YES];
} 
```

这是`ShopAnnotation`界面：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>
#import <CoreData/CoreData.h>

@interface ShopAnnotation : NSObject <MKAnnotation>

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, readonly, strong) NSString *title;
@property (nonatomic, readonly, strong) NSString *subtitle;
@property (nonatomic, readonly, strong) NSManagedObject* shop;

-(id)initWithCoordinate:(CLLocationCoordinate2D) c
                  title:(NSString *) t
               subtitle:(NSString *) st
                   shop:(NSManagedObject*) shop;

@end 
```

如何添加另一个参数`showDetails`以及如何传递它？

`showDetails`将会：

```
- (void) showDetails:(id)sender shop:(NSManagedObject*)shop 
```

而且，这是什么`(id)sender`？这是我可以用来传递 this 的注释`NSManagedObject`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:53:47.310

看看你是如何`sender`在你的“”方法中传递一个“”参数的`showDetails:`？

为什么不将“ `UIButton`”子类化（例如将其命名为“ `VansFannelButton`”）并给新对象的“ `@interface`”一个额外的 ivar，它可以作为您的有效负载。

然后你可以这样做：

```
- (void) showDetails: (VansFannelButton*) sender
{
    if (sender)
    {
         // do something with the managed object payload
         NSManagedObject * mObject = [sender payload];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:59:22.793

用于`Associated Objects`_ `passing` `more` `argument`_`buttons's` `object`

请参阅[关联对象](http://www.cocoanetics.com/2012/06/associated-objects/)链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:12:22.023

您可以尝试添加属性

```
int ID; 
```

到您的 ShopAnnotation 类中，当您填充 ShopAnnotation 类时，您可以轻松设置自己的唯一 ID。然后在

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
     if (!pinView)
    {
        // if an existing pin view was not available, create one
        MKPinAnnotationView *customPinView = [[MKPinAnnotationView alloc]
                                              initWithAnnotation:annotation reuseIdentifier:ReusableAnnotationIdentifier];

        customPinView.pinColor = MKPinAnnotationColorPurple;
        customPinView.animatesDrop = YES;
        customPinView.canShowCallout = YES;

        // add a detail disclosure button to the callout which will open a new view controller page
        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        [rightButton addTarget:self
                        action:@selector(showDetails:)
              forControlEvents:UIControlEventTouchUpInside];
        //Set tag of the button same as ID
        rightButton.tag=((ShopAnnotation*)annotation).ID;

        customPinView.rightCalloutAccessoryView = rightButton;

        return customPinView;
    }
} 
```

在您的 showDetails 操作中，您可以执行以下操作

```
- (void) showDetails:(id)sender
{
     UIButton *btn=(UIButton*)sender;
     ShopAnnotation *selectedAnnotation=nil;
     for(ShopAnnotation *a in arrAnnotations){
         if(a.ID == btn.tag){
             selectedAnnotation=a; break;
         }
     }

   // Use your ShopAnnotation for you further processing.
 } 
```

我希望这有帮助..

谢谢。

# actionscript-3 - AS3.0 if/else if 速度控制的评估行为

> ID：14749274
> 
> 赞同：0
> 
> 时间：2013-02-07T10:49:36.673
> 
> 标签：actionscript-3, flash, if-statement, conditional, velocity

抱歉，如果这对其他人来说很明显，但我无法理解 ActionScript 3.0 中的某些内容（顺便说一句，巨大的 n00b）

我有这个控制速度的代码：

```
public function keyDownHandler(event:KeyboardEvent):void
    {
        if (event.keyCode == Keyboard.LEFT)
        {
            vx = -5;
        }
        else if (event.keyCode == Keyboard.RIGHT)
        {
            vx = 5;
        }

        else if (event.keyCode == Keyboard.UP)
        {
            vy = -5 
        }
        else if (event.keyCode == Keyboard.DOWN)
        {
            vy = 5;
        }
    } 
```

运行时，如果我同时按住 LEFT 和 UP，Sprite 会沿对角线移动，但是最后两个条件（Keyboard.UP 和 Keyboard.DOWN）是 elseif 的事实应该完全阻止它们被评估，不是吗？

有没有人能够阐明这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:54:37.997

当您同时按下两个按钮时，闪光灯会为每个按钮触发两个独立的事件。如果您想跳过这种情况，您可以为每个按钮制作状态标志（leftPressed、rightPressed 等），在按键处理程序中更改状态并根据每个按钮的当前状态调用检查动作方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:55:11.747

如果您不想对角线移动，请先将速度分量设置为零，如下所示：

```
public function keyDownHandler(event:KeyboardEvent):void
{
    vx = vy = 0; ////

    if (event.keyCode == Keyboard.LEFT)
    {
        vx = -5;
    }
    else if (event.keyCode == Keyboard.RIGHT)
    {
        vx = 5;
    }

    else if (event.keyCode == Keyboard.UP)
    {
        vy = -5 
    }
    else if (event.keyCode == Keyboard.DOWN)
    {
        vy = 5;
    }
} 
```

# nhibernate - NHibernate：有什么方法可以为每个子对象生成一个从 1 开始的序列号？

> ID：14749275
> 
> 赞同：2
> 
> 时间：2013-02-07T10:49:44.327
> 
> 标签：nhibernate, indexing, mapping, one-to-many

**我的课程：**

```
 public class Parent
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual IList<Child> Children { get; set; }
        /* other properties */
    }

    public class Child
    {
        public virtual int Id { get; set; }
        public virtual Parent Mother { get; set; }
        public virtual int ItemNumber { get; set; }
        public virtual string Remarks { get; set; }
        /* other properties */
    } 
```

**我的数据库：**

```
PARENTS(ID, NAME, ...) -> PRIMARY KEY = ID
CHILDREN (C_ID, MOTHER_ID, ITEM_NO, REMARKS ....) -> PRIMARY KEY = c_ID 
```

**NHibernate 映射：**

```
 <class name="Parent" table="PARENTS">
        <id name="Id"  column="ID">
          <generator class="increment" />
        </id>
        <property name="Name" column="NAME"/>
        <list name="Children" cascade="all" inverse="true">
        <key column="MOTHER_ID" not-null="true" />
           <list-index base="1" column="ITEM_NO"/>
          <one-to-many class="Child" />
        </list>
 </class>

  <class name="Child" table="CHILDREN">
        <id name="Id"  column="C_ID">
          <generator class="increment" />
        </id>
        <many-to-one name="Mother" class="Parent" column="MOTHER_ID" />
        <property name="ItemNumber" column="ITEM_NO"/> 
        <property name="Remarks" column="REMARKS"/>
 </class> 
```

**我的代码：**

```
Parent p = new Parent();
//set parent properties here
Child c = new Child();
//set child properties here

p.Children.add(c);
c.Mother = p;

//Save parent 
```

**问题：**

上面的代码将父项以及所有子项保存在相应的表中。但是，所有子项在 ITEM_NO 字段中的默认值为零。是否有任何映射可以帮助我自动为给定父母的每个孩子从 1 开始为 ITEM_NO 分配一个递增的值？即 ITEM_NO 的序列应该从 1 重复到每个父级的子级数。

注意：我需要 Child 是一个独立的实体，所以我应该能够在不需要通过父母的情况下查询它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:04:44.567

如果我正确理解您的问题，您必须在您的数据库中创建一个序列（[参见它的描述](http://msdn.microsoft.com/en-us/library/ff878091.aspx)），一个简单的示例将是（可能因数据库而异）：

```
CREATE SEQUENCE item_no_seq START WITH 1 INCREMENT BY 1 
```

然后稍微改变你的映射：

```
<id name="ItemNumber" type="integer" column="ITEM_NO">
  <generator class="sequence">
    <param name="sequence">item_no_seq</param>
  </generator>
</id> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:57:21.790

我认为问题在于列表元素中的 insert="true"，因为这告诉 NHibernate 设置外键是孩子的责任。而且孩子不知道列表映射。

# android - 在 API 级别 7 的通知中包装长文本

> ID：14749278
> 
> 赞同：1
> 
> 时间：2013-02-07T10:49:48.373
> 
> 标签：android, notifications, android-2.1-eclair

在我的应用程序中，我有一项服务可以执行与网络相关的活动并在发生错误时显示通知。错误文本可能相当长 - 以提供足够的详细信息。在较新版本的 API 中，我可以`BigTextStyle`用来显示长文本，但是根据客户的要求，该应用程序必须在 API 7 及更高版本（Android 2.1 及更高版本）上运行。我在 API 7 上完成了所有其他工作，所以这是剩下的最后一件事了。

所以问题是：如何在 API 7 的通知中显示长消息文本？

# jquery - 属性未定义

> ID：14749281
> 
> 赞同：0
> 
> 时间：2013-02-07T10:50:00.417
> 
> 标签：jquery, knockout.js

我试图理解淘汰赛的语法并遇到问题。

我的 ko 视图模型示例

```
var Market = function (e) {
    var self = this;
    self.MarketId = ko.observable(e ? e.MarketId : '');
    self.Description = ko.observable(e ? e.Description : '');
};

var MarketAddViewModel = function () {
    var self = this;
    var url = "/api/market";

    self.newMarket = ko.observable(new Market());

    // Save market
    saveMarket = function (item) {
        $.ajax({
            type: 'POST',
            url: url,
            data: ko.toJS(item),
            success: function (data) {
                // SUCCESS
            },
            error: function (err) {
                var err = JSON.parse(err.responseText);
                var errors = "";
                for (var key in err) {
                    if (err.hasOwnProperty(key)) {
                        errors += key.replace("employee.", "") + " : " + err[key];
                    }
                }

                alert('error');
                //$("<div></div>").html(errors).dialog({ modal: true, title: JSON.parse(err.responseText).Message, buttons: { "Ok": function () { $(this).dialog("close"); } } }).show();
            },
            complete: function () {
                // complete
            }
        });
    };
}; 
```

要绑定它，我使用此代码

```
 $(document).ready(function () {
            ko.applyBindings(new MarketAddViewModel());
        }); 
```

然后是 HTML 元素

```
<input data-bind="value: Description" type="text" class="required input-xxlarge" name="description" id="description" /> 
```

但是当加载此页面时，我收到“未定义描述”

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:53:38.903

我认为它需要

```
<input data-bind="value: newMarket().Description" type="text" class="required input-xxlarge" name="description" id="description" /> 
```

（注意），因为它是实例`newMarket().`的属性。`MarketAddViewModel`括号将提取可观察值，以便可以提取其“描述”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:55:43.697

您可以使用 with 绑定，它将子元素的上下文更改为 newMarket 上下文

```
<div data-bind="with: newMarket">
    <input data-bind="value: Description" type="text" class="required input-xxlarge" name="description" id="description" />
</div> 
```

编辑：我也可以借此机会为我的配置库上的约定做一些 PR 上面的语法看起来像

```
<div data-name="newMarket">
    <input data-name="Description" type="text" class="required input-xxlarge" name="description" id="description" />
</div> 
```

[https://github.com/AndersMalmgren/Knockout.BindingConventions](https://github.com/AndersMalmgren/Knockout.BindingConventions)

# java - 如果错误，请在发布前使用 Javascript 更改文本框的颜色

> ID：14749289
> 
> 赞同：1
> 
> 时间：2013-02-07T10:50:21.347
> 
> 标签：java, javascript, css, jsp, struts

我想在发布之前在 javascript 中进行一些验证，所以基本上我想：

1.  更改文本框值
2.  使用附加到文本框的 Onchange 来触发 Javascript 脚本。
3.  该脚本将检查冒号是否在值中的正确位置。
4.  如果不是这种情况，请将文本框的背景颜色更改为红色。
5.  这一切都是在struts表单和动作的二次验证之前完成的。

第一个问题是我似乎无法将文本框值传递给脚本，这是否在 struts 下被阻止？第二个问题是错误时更改文本框的背景颜色。

```
<html:text property="date1_1" maxlength="8" value="<%=WeekOne.get(1)%>" size="15" onchange="validateBox(this.value)"/>
<script type="text/javascript">
        function validateBox(textBox)
        {
            alert("here");
            var p = textBox.value();
            alert(p);               
        }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:14:41.650

要解决您的问题，您需要修复代码中的一些错误。我将向您展示如何解决以尝试实现您通过数字编写的内容。

1.  要更改文本框值，您需要传递文本框元素本身而不是值。
2.  你已经在使用它了
3.  在脚本中针对文本框值进行一些检查（值不是函数）
4.  为此，您应该使用文本框的背景颜色 CSS 属性
5.  假设第二个验证在服务器上，检查是通过 javascript 在客户端上完成的

例如

```
<html:text property="floor" styleClass="input" size="30" tabindex="12" onchange="validateBox(this)"/>
<script type="text/javascript">
  var textBoxBackgroundColor;
  function validateBox(textBox) {
    var p = textBox.value;

    if (textBoxBackgroundColor == null)
      textBoxBackgroundColor = textBox.style.backgroundColor;
    //validate
    if (p < 0)
     textBox.style.backgroundColor = '#000000';
    else
      textBox.style.backgroundColor = textBoxBackgroundColor;
  }
</script> 
```

将检查文本框地板是否为正。

# centos - tomcat上下文资源不工作

> ID：14749291
> 
> 赞同：1
> 
> 时间：2013-02-07T10:50:28.717
> 
> 标签：centos, tomcat6, centos6

我有一个在 CentOS 6 机器上运行的 tomcat6 服务器，到目前为止一切都很好。在我的一个 webapps 中，我需要使用上下文参数来访问位于文件系统中的外部文件夹，我像这样配置了我的 server.xml（`<Host>`仅标签的相关部分）：

```
<Context path="/userimages" docBase="/home/someuser/faces/32x32" debug="0" reloadable="true" crossContext="true"/> 
```

当我启动服务器时，我收到此错误：

```
java.lang.IllegalArgumentException: Document base /home/someuser/faces/32x32 does not exist or is not a readable directory 
```

我读了一些关于文件夹权限的东西，所以我将“32x32”和“webapps”文件夹都设置为 777，但它仍然无法正常工作......知道如何解决这个问题吗？

PS在windows操作系统上运行完美

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T07:52:19.947

My suggestion is to put your data into **/usr/share/tomcat6/conf/context.xml** which is a symlink to **/etc/tomcat6/context.xml** on CentOS 6\. At least tomcat6 does read the contents of that file when it restarts, and I had some luck getting resource data loaded from there. It would seem that this file is new in tomcat6.

I used strace to check which files it was visiting and it does run stat() on the various files like **/var/lib/tomcat6/webapps/*/META-INF/context.xml** but nowhere does it actually open() those files, so I'm pretty sure it does not read the contents. Maybe some bug? Maybe imaginary future feature?

I managed to get Plandora (uses context to supply MySQL database connection details) running on CentOS 6 with these packages (from yum):

```
apache-tomcat-apis-0.1-1.el6.noarch
java-1.6.0-openjdk-1.6.0.0-1.61.1.11.11.el6_4.i686
mysql-connector-java-5.1.17-6.el6.noarch
tomcat6-6.0.24-52.el6_4.noarch
tomcat6-servlet-2.5-api-6.0.24-52.el6_4.noarch
tomcat6-el-2.1-api-6.0.24-52.el6_4.noarch
tomcat6-admin-webapps-6.0.24-52.el6_4.noarch
tomcat6-jsp-2.1-api-6.0.24-52.el6_4.noarch
tomcat6-lib-6.0.24-52.el6_4.noarch
tomcat6-webapps-6.0.24-52.el6_4.noarch 
```

Just in case anyone else is trying to get Plandora to work on CentOS 6, you also need to make sure you symlink:

```
 ln -s /usr/share/java/mysql-connector-java.jar /usr/share/tomcat6/lib/ 
```

# mysql - Zend MySQL：Where 子句中的未知列 - 使用 GROUP_CONCAT() 时

> ID：14749292
> 
> 赞同：0
> 
> 时间：2013-02-07T10:50:29.630
> 
> 标签：mysql, sql, zend-framework, magento

在 Magento 中，我使用 Zend DDL 创建一个查询，将 group_concat() 表值放入一个名为“网站”的字段中。

查询工作正常，直到添加了 where 子句。

```
SELECT
  `main_table`.*,
  GROUP_CONCAT(website.website_id) AS `websites`
FROM
  `megamenu_entity` AS `main_table`
   LEFT JOIN `megamenu_website` AS `website`
   ON main_table.entity_id = website.megamenu_id
WHERE
  (websites = '1')
GROUP BY `main_table`.`entity_id` 
```

这给出了错误：

> SQLSTATE [42S22]：找不到列：1054 'where 子句'中的未知列'网站'

为什么是这样？谁能帮我解决这个问题？理想情况下在 Zend DDL 中。这就是我目前正在做的事情。

```
$collection->getSelect()->joinLeft(
  array('website' => $collection->getTable('megamenu/megamenu_website')),
  "main_table.entity_id = website.megamenu_id",
  array('websites' => new Zend_Db_Expr('GROUP_CONCAT(website.website_id)'))
)->group('main_table.entity_id'); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:56:57.290

您的`WHERE`子句将无法识别列别名。列别名可用于`GROUP BY`,`ORDER BY`和`HAVING`子句。

更新了您的查询以使用原始列名，例如：

```
SELECT
  `main_table`.*,
  GROUP_CONCAT(website.website_id) AS `websites`
FROM
  `megamenu_entity` AS `main_table`
   LEFT JOIN `megamenu_website` AS `website`
   ON main_table.entity_id = website.megamenu_id
WHERE
  (website.website_id = '1')
GROUP BY `main_table`.`entity_id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:57:30.853

请尝试以下代码

```
SELECT * FROM 
(                     
SELECT
`main_table`.*,
GROUP_CONCAT(website.website_id) AS `websites`
FROM
`megamenu_entity` AS `main_table`
LEFT JOIN `megamenu_website` AS `website`
ON main_table.entity_id = website.megamenu_id ) E
WHERE
(E.websites = '1')
GROUP BY `main_table`.`entity_id` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T05:24:55.950

试试这个查询..

```
SELECT
  `main_table`.*,
  GROUP_CONCAT(website.website_id) AS `websites`
FROM
  `megamenu_entity` AS `main_table`
   LEFT JOIN `megamenu_website` AS `website`
   ON main_table.entity_id = website.megamenu_id
WHERE
  ((GROUP_CONCAT(website.website_id)) = '1')
GROUP BY `main_table`.`entity_id` 
```

您的查询不起作用，因为**where在****group**之前执行。

# android - 用于插入联系人的广播接收器

> ID：14749300
> 
> 赞同：5
> 
> 时间：2013-02-07T10:50:41.193
> 
> 标签：android, broadcastreceiver, android-contacts

我正在尝试在内置联系人电话簿中成功保存 android 中的联系人后启动应用程序。所以我想知道，是否有任何广播接收器用于更新电话簿并在电话簿中添加新联系人。

或以任何其他方式在电话簿中查找添加或更新事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:04:14.823

您必须实现一个 Android 服务并向联系人列表注册一个观察者，您可以参考这个问题来接收电话簿[联系人更改](https://stackoverflow.com/questions/1401280/how-to-listen-for-changes-in-contact-database "联系方式变更")上的更改事件。之后，您可以开始您的应用程序。您可以使用广播接收器进行引导，使您的服务在设备重启时运行。

# sql - SQL 规范化现有（多对多）数据

> ID：14749302
> 
> 赞同：3
> 
> 时间：2013-02-07T10:50:42.387
> 
> 标签：sql, sqlite, ms-access, many-to-many, normalization

**摘要：**
详见下文。为了便于阅读，我将`[unanswered`] 多对多问题复制到顶部：

```
 Given the "Input" table, what is the SQL to generate the 3rd "Output"
    table (Person_plays_Instrument)? 
```

**电流输入（1 个表）：**

```
OriginalTable:
PersonId PersonName Instrument_1 Instrument_2 Instrument_3 MailingAddress HomePhone
--------|----------|------------|------------|------------|--------------|------------
1        Bob        Violin       Viola        Trumpet      someplace      111-111-1111
2        Suzie      Cello        Flute        <null>       otherplace     222-222-2222
3        Jim        Violin       <null>       <null>       thirdplace     333-333-3333 
```

**所需输出（3 个表）：**

```
Person:
Id Name   MailingAddress HomePhone
--|------|--------------|------------
1  Bob    someplace      111-111-1111
2  Suzie  otherplace     222-222-2222
3  Jim    thirdplace     333-333-3333

Instrument:
Id Name
--|-------
1  Violin
2  Cello
3  Viola
4  Flute
5  Trumpet

Person_plays_Instrument:
PersonId InstrumentId
--------|------------
1        1
1        3
1        5
2        2
2        4
3        1 
```

* * *

**细节：**

我有一个单一的平面 SQL 表，它最初是一个电子表格。我想让它正常化。我将把它分成每个表的 1 个问题。

问题 1 和 2 已得到解答，但我将保留它们以防其他人发现它们有帮助。

**问题：**

*问题 #1* : `[answered`]
如何生成 Person 表？

*答案 #1*：
[这篇](https://stackoverflow.com/questions/276737/normalizing-an-existing-ms-access-database/276953#276953)精彩的帖子让我了解了 2/3。对于一对多表，我已经准备好了。这是代码：

```
[add autonumber field to OriginalTable, name it PersonId]
[create empty Person table with Id, Name, MailingAddress, HomePhone fields]

INSERT INTO Person (Id, Name, MailingAddress, HomePhone)
  SELECT o.PersonID, o.PersonName, o.MailingAddress, o.HomePhone
  FROM OriginalTable as o
  WHERE o.PersonName Is Not Null; 
```

* * *

*问题 #2*：`[attempted`]（*@Branko 在已接受答案中的更好版本*）
如何生成仪器表？

*答案 #2*：
同样，一对多。起初，多列让我难过。
解决方案分为两部分：

*   我只需要对每列重复一次 INSERT 命令。
*   使用[这篇](https://stackoverflow.com/a/232951/1421642)文章和 IN 运算符，我可以每次检查以确认我还没有插入该值。

这是代码：

```
[create empty Instrument table with Id[autonumber], Name fields]

INSERT INTO Instrument (Name)
  SELECT Distinct o.Instrument_1
  FROM OriginalTable as o
  WHERE o.Instrument_1 Is Not Null
  AND o.Instrument_1 Not In (SELECT Name from Instrument);

INSERT INTO Instrument (Name)
  SELECT Distinct o.Instrument_2
  FROM OriginalTable as o
  WHERE o.Instrument_2 Is Not Null
  AND o.Instrument_2 Not In (SELECT Name from Instrument);

INSERT INTO Instrument (Name)
  SELECT Distinct o.Instrument_3
  FROM OriginalTable as o
  WHERE o.Instrument_3 Is Not Null
  AND o.Instrument_3 Not In (SELECT Name from Instrument); 
```

* * *

*问题 #3* : `[unanswered`]
如何生成 Person_plays_Instrument 表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:40:24.797

假设有`OriginalTable.PersonID`，您没有向我们展示，但您自己的答案#1 暗示了它，**答案#3**可以简单地表示为：

```
INSERT INTO Person_plays_Instrument (PersonId, InstrumentId)
SELECT PersonID, Instrument.Id
FROM
    OriginalTable
    JOIN Instrument
        ON OriginalTable.Instrument_1 = Instrument.Name
        OR OriginalTable.Instrument_2 = Instrument.Name
        OR OriginalTable.Instrument_3 = Instrument.Name; 
```

顺便说一句，有一种更简洁的方式来表达**答案#2**：

```
INSERT INTO Instrument (Name)
    SELECT *
    FROM (
        SELECT o.Instrument_1 I
        FROM OriginalTable as o
        UNION
        SELECT o.Instrument_2
        FROM OriginalTable as o
        UNION
        SELECT o.Instrument_3
        FROM OriginalTable as o
    ) Q
    WHERE I IS NOT NULL; 
```

这是一个用于 MS SQL Server的完整的[SQL Fiddle 示例。](http://sqlfiddle.com/#!6/26516/13)其他 DBMS 的行为应该类似。顺便说一句，您应该适当地标记您的问题以指示您的 DBMS。

# spring - dijit.form.filteringselect 的 Spring.addElementDecoration 在 IE 中失败

> ID：14749303
> 
> 赞同：1
> 
> 时间：2013-02-07T10:50:43.710
> 
> 标签：spring, dojo, spring-roo

我正在使用 Spring Roo 创建一个页面，该页面进行 ajax 调用并使用来自 Ajax 调用的搜索表单填充页面的一部分。这一切都是通过使用标准 Roo 标记和 Javascript 库来完成的。Ajax 返回的表单很简单，只有一个选择列表。

```
<jsp:root xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:fn="http://java.sun.com/jsp/jstl/functions"
xmlns:field="urn:jsptagdir:/WEB-INF/tags/form/fields"
xmlns:form="urn:jsptagdir:/WEB-INF/tags/form"
xmlns:springform="http://www.springframework.org/tags/form" 
xmlns:jsp="http://java.sun.com/JSP/Page"
xmlns:spring="http://www.springframework.org/tags" version="2.0">
<div>
    <jsp:directive.page contentType="text/html;charset=UTF-8" />
    <jsp:output omit-xml-declaration="yes" />
    <form:search
        id="fc_domain_profile_combination"
        modelAttribute="combination" path="/profiles/search/combinations"
        z="e2lXrqKKD2CS7Zjefas2ZXPW4xYNM=">
        <field:select field="searchProcessingCenter" renderempty="true" disabled="true"
                id="c_profile_combofilter_processingcenter"
                items="${proccenters}" path="/profiles"
                itemLabel="name" itemValue="id"/>
    </form:search>
    <input type="hidden" id="blockSubmitHd" value="false" />
</div> 
```

此代码在 Firefox 和 Google Chrome 中运行良好，但在 IE 中失败并出现“未知错误”。问题发生在 Roo 中包含的 Ajax 方法中：

```
function callXhrGet(contentId, ajaxUrl){
  var _targetNode = dojo.byId(contentId);
  var xhrArgs = {
      url: ajaxUrl,
      preventCache: true,
      handleAs:"text",
      load: function(data) {
        dojo.html.set(_targetNode,data,{parseContent:true});
        dojo.forEach(dojo.query("script", _targetNode),function(node){
            dojo.eval(node.innerHTML);
        });
        dojo.parser.parse(_targetNode);
      },
      error: function(error) {
          _targetNode.innerHTML = "An unexpected error occurred: " + error;
      }
  };
  dojo.xhrGet(xhrArgs); 
```

}

尝试处理以下`dojo.eval(node.innerHTML);`行时失败：

```
Spring.addDecoration(new Spring.ElementDecoration({elementId : '_searchProcessingCenter_id', widgetType: 'dijit.form.FilteringSelect', widgetAttrs : {hasDownArrow : true, required : false, invalidMessage: 'Please enter valid Role Type' }})); 
```

有趣的是，当列表为空时它工作正常，其他`dijit.form.tags`工作也很好。任何建议和反馈如何解决这个问题？

# ruby-on-rails - 以编程方式获取给定命名空间中所有控制器的列表

> ID：14749305
> 
> 赞同：0
> 
> 时间：2013-02-07T10:50:51.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我们的 Rails 3.2 应用程序有管理面板。管理面板分为模块。例如有`Admin::Searching`. 我想重构一些重复和硬编码的部分。例如：

```
<ul class='searching_nav'>
<% %w(tests fuzzy stats terms hits).each do |tab| %>
  <li class="<%= css_nav(tab) %>"><%= link_to tab.humanize, [:admin, :searching, tab] %></li>
<% end %>
</ul> 
```

它正在搜索导航部分，添加另一个控制器后，您必须手动更改它。 **我想要的是，获取所有控制器的列表`Admin::Searching`**（此命名空间中的控制器是 的子类`Admin::AdminController`）。我相信可以从 Rails api 以优雅的方式做到这一点。然后可以将其推广到所有模块选项卡。

我曾尝试检查 Admin::AdminController.subclasses，但该数组中的类是延迟加载的，因此`Terms`例如在服务器重启后，只有一个元素`[Admin::Searching::TermsController]`，并且在访问其他模块后还有其他控制器。我可以遍历它们并根据`controller_path`结果，只过滤`admin/search`控制器。也许有可能从路线结束？我的意思是，我可以从 Rails.application.routes.routes 获取给定命名空间中的所有控制器吗？

我不想进入文件系统。我知道我可以使用它来扫描 admin/searching 目录，`Dir`但它效率低下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:10:27.160

我有一个很好的答案来描述它的使用，`Module#constants`但`Module#const_get`后来我通读了你问题的后半部分，并意识到这种技术可能不会因为同样的原因不起作用`Admin::AdminController.subclasses`——那是因为 Rails 延迟加载控制器类根据需要。

在您的情况下，我可能最终会进行目录扫描。你认为它效率低下，但是 Rails 和许多 Ruby gem 在进行动态加载和其他东西时最终都会进入文件系统。

现在，您想在加载*之前找到**所有*（相关的）控制器。再加上在生产中控制器的数量不会改变的洞察力。

 *我想说的是，继续进行`Dir`扫描，但是在初始化程序（下的文件`config/initializers`）中进行扫描，因此它只会在您的应用程序启动时执行一次。

所以，可以想象，

```
# config/initializers/admin.rb
module Admin
  CONTROLLERS = begin
    # Do a directory scan of app/controllers/admin looking for relevant files
  end
end 
```*

# api - API 安全/授权

> ID：14749306
> 
> 赞同：0
> 
> 时间：2013-02-07T10:50:52.290
> 
> 标签：api, node.js, oauth, express, oauth-2.0

我需要关于如何最好地处理以下场景以及实施它的最佳实践的建议。

我们公司希望彻底改造其旧的 IT 系统，并创建新的网站应用程序和可能的移动应用程序，供其员工和承包商与之互动。

所以我正在考虑创建一个 api，可以从中创建网站应用程序和移动应用程序......

[https://api.company.com/v1](https://api.company.com/v1)

我需要的建议与 api 的安全/授权有关。我目前对如何实现这一点的想法是，员工/承包商将通过公司的网站应用程序/移动应用程序与 api 交互，然后与 api 通信并设置适当的访问权限

WebsiteApp.company.com ->>> api.company.com/v1 移动应用程序
->>> api.company.com/v1

首先的想法是在 api 端为每个用户设置一个用户名和密码，让网站应用程序和移动应用程序都使用它。然而，问题是承包商和可能的一些员工不能完全信任，并且可以在未经公司许可的情况下将用户名和密码传递给第三方。所以我的问题实际上是我应该考虑哪些其他安全/授权/身份验证策略来克服这种情况。在一个完美的世界中，每个用户都必须授权他/她想要从...访问 api 的每个设备/移动应用程序/网站应用程序。

OAuth 2.0 能做到这一点吗？但不确定它是否能适应特定的用户/设备/网站场景？

考虑使用的技术是：-

API

Node.js with (Express js? or Restify?) , MongoDb

消费者应用

网站应用（Angular Js、Backbone 等）
移动应用（PhoneGap、Jquery Mobile 等）

非常感谢

乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:01:53.370

似乎您主要担心的是您不能信任您正在访问的人，如果是这种情况，您可能不应该首先尝试授予他们访问权限。如果这些应用程序将用于您担心其他人看到承包商/员工是否泄露他们的密码的任何机密信息或知识产权，那么您必须考虑承包商/员工只是拿走信息并将其泄露。

在这种情况下，您的用户名/密码应该足以进行身份​​验证，但是您还应该考虑对谁可以访问什么的权限非常严格。如果您担心信息泄露，则应在需要知道的基础上显示所有内容。如果承包商不需要特定信息，请确保不会将其提供给他的帐户。

您还可以考虑跟踪访问帐户的位置 (IP)。也许当从新位置访问帐户时，员工/承包商会完成一些任务来验证该帐户；这可以是任何东西，从输入验证码（类似于双因素身份验证）到拨打帮助热线并获得授权的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:32:22.180

这可能有点晚了，但是因为我正在经历相同的过程（[使用 oAuth 和资源所有者密码凭证授予时的正确流程是什么</a>）](https://stackoverflow.com/questions/15806822)

 [我们还没有弄清楚核心实现你想要做什么听起来类似于我们试图为我们的服务做的事情。

据我了解，这取决于应用程序以及它们是否受信任以及您打算如何处理 API 向前发展。如果应用程序受信任，您可能会使用基于 SSL 的 HTTP-Basic，这是一个可行的解决方案。](https://stackoverflow.com/questions/15806822) 

[对我们来说，我们将通过 API 创建一套受信任的官方应用程序（Web、Mobile 等），然后将其打开，因此我们决定经历 oAuth2 的痛苦，对于我们的应用程序，我们将在其中使用](https://stackoverflow.com/questions/15806822)****[Resource Owners Passwords Credentials 授予类型](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-22#section-4.3)**，您可以在其中将用户用户名和密码交换为令牌，客户端将使用该令牌与您的 API 进行交互，并具有隐式定义的信任。**

 **当我们为 3rd 方消费开放 API 时，这个模型将不起作用，我们将经历所有主要网站所做的过程，并获得用户对 3rd 方应用程序可以对其数据做什么的明确许可。**

# android - 302 使用 Dropbox 短超链接在 Android 中从 http 重定向到 https

> ID：14749307
> 
> 赞同：2
> 
> 时间：2013-02-07T10:51:04.207
> 
> 标签：android, redirect, hyperlink, dropbox, short

我有一个应用程序，它在正常情况下从云存储加载和播放音乐没有问题，除了**Dropbox**短链接。这些链接使用 302 标头重定向到 https 链接：-

> 302 Found 该资源在 [https://www.dropbox.com/s/jhzh3woy3qxblck/05%20-%20Cinema.ogg](https://www.dropbox.com/s/jhzh3woy3qxblck/05%20-%20Cinema.ogg)找到；你应该被自动重定向。

此代码的结构是双重静态方法，首先 [按时间顺序] 查找重定向，然后将数据获取到文件。

**我试图让它工作，因为第二个链接目前让我从 Dropbox 下载了很多不相关的 HTML，而不是所需的文件本身！**

```
/**
 * Return an Audio File from a URL String
 * throws IOException
 * 
 * @param url the URL which provides the target
 * @return File - audio file
 */
public static File getAudioFile(String urlString, File f) {
    String newUrl = null;
    try {
        newUrl = getRedirect(urlString);
    } catch (ClientProtocolException e) {
        Log.e(TAG, "ClientProtocolException Error getting Redirect ", e);
    } catch (IOException e) {
        Log.e(TAG, "IOException Error getting Redirect", e);
    }
    if (newUrl != null) {
        urlString = newUrl;
    }
    else {
        Log.i(TAG, "IOException Error getting Redirect because its null");
    }

    try {
        URL url = new URL(urlString);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setInstanceFollowRedirects(true);
        conn.setReadTimeout(40 * 1000);
        conn.setConnectTimeout(45 * 1000);
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Connection", "close");
        conn.setDoInput(true);
        conn.setDefaultUseCaches(true);
        // Starts the input from the URL
        conn.connect();
        InputStream is = conn.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);
        BufferedOutputStream bof = new BufferedOutputStream(new FileOutputStream(f));

        // write the inputStream to the FileOutputStream
        byte [] bytes = new byte [409600];
        int block;
        while((block = bis.read(bytes, 0, bytes.length)) > 0) {
            bof.write(bytes, 0, block);
            Log.d(TAG, "Write a block of " + block);
        }

        bof.flush();
        bof.close();
        bis.close();
        is.close();
        conn.disconnect();
    } catch (Exception e) {
        Log.e(TAG, "Error getting Audio File", e);
    }
    return f;
}
/**
 * Get the new url from a http redirect 
 * throws IOException
 * 
 * @param url the URL which provides the target
 * @return url - the single url redirect
 */
public static String getRedirect(String urlString) throws ClientProtocolException, IOException {
    HttpParams httpParameters = new BasicHttpParams();
    HttpClientParams.setRedirecting(httpParameters, false);

    HttpClient httpClient = new DefaultHttpClient(httpParameters);      
    HttpGet httpget = new HttpGet(urlString);
    HttpContext context = new BasicHttpContext();

    HttpResponse response = httpClient.execute(httpget, context);

    // If we didn't get a '302 Found' we aren't being redirected.
    if (response.getStatusLine().getStatusCode() != HttpStatus.SC_MOVED_TEMPORARILY)
        throw new IOException(response.getStatusLine().toString());

    Header loc[] = response.getHeaders("Location");
    return loc.length > 0 ? loc[loc.length -1].getValue() : null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T11:37:50.080

我遇到了同样的问题。我发现我可以从*urlConnection.getHeaderField("Location");* 请参考下面的代码。

```
{
    url = new URL(urlString);
    urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.connect();
    String ResponseCode = urlConnection.getResponseCode();
    String ContentType = urlConnection.getContentType();
    if ( result.ResponseCode == HttpURLConnection.HTTP_MOVED_TEMP || result.ResponseCode == HttpURLConnection.HTTP_MOVED_PERM )
    {
       String Location = urlConnection.getHeaderField("Location");
    }
} 
```

问候，杰克

# android - 在我的 MainActivity 中运行几个 asynctask

> ID：14749309
> 
> 赞同：0
> 
> 时间：2013-02-07T10:51:06.760
> 
> 标签：android, bitmap, android-asynctask

我按照这个 Google 说明在我的 MainActivity 中显示 5 个大位图，以避免内存泄漏并且不冻结 UI 线程。

[http://developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

所以，我`Asynctask`在方法中为我的 5 个大位图中的每一个开始一个`onCreate`...

我没有冻结 UI 线程（很好），因为我每个线程都在一个线程中运行我的长进程，但是“我的问题”是这 5 个大位图是同一个图形（面）的一部分，并且当应用程序启动时用户可以看到不同层是如何在不同时间加载的。

在加载图像之前，我一直在闪屏中考虑过，但我想知道这是否是最好的方法（因为可能需要不到 1 秒的闪屏）还是有更好的方法，例如 notify加载最后一张图像时的 UI 线程，然后显示所有图像……或者尝试同时加载所有图像`Asynctask`？

提前致谢，

保拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:02:03.410

最后，我在同一个 Asynctask 中加载了 5 个大位图。我已将它们加载到 doInBackground 方法中，并在我的 ASynctask 的 onPostExecute 中一次显示所有它们。

我正在考虑 Siddharth Lele 的答案，我想要类似的东西，但我知道你得到了相同的结果，从另一个 Asynctask 的 onPostExecute 调用一个 Asynctask 并等待最后一个 Asynctask 显示在 doInBackground 方法中执行它的 ImageViews只有一个 Asynctask 并等待这个 Asynctask 的 postExecute 直到所有位图都被加载，我认为它更有效，因为你没有更多你需要的线程......

让我知道这种方法是否还有其他考虑因素。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:59:18.860

在最近的 Android 版本中，AsyncTask 执行器线程池前面有一个出队。它一次只允许一个任务运行。这意味着您的任务按顺序发生，这通常是您所期望的。但是，在这种情况下，这意味着您*不会*同时加载所有 5 张图像。看一下：

```
executeOnExecutor(Executor exec, Params... params) 
```

...这使您可以绕过出队。这将使您获得并发性。

AsyncTasks 的网络连接对我来说似乎很可疑。如果其中一个失败了怎么办？一个更好的解决这个问题的方法可能是一个多线程的绑定服务，当所有 5 个图像都被下载后，它会进行回调。

# javascript - jQuery 可拖放与 data() 一起返回 NaN

> ID：14749314
> 
> 赞同：0
> 
> 时间：2013-02-07T10:51:20.437
> 
> 标签：javascript, jquery

我一直在玩这段代码，一切似乎都很好。当我将其中一个黄色框拖到红色容器上时，变量`price`会随着值递增，`data-price`然后在黄色框离开红色容器时减去。

当我再次将它们拖回红色容器并导致 NaN 时，问题就出现了。`$(".draggable[data-item='" + value + "']").data('price');`似乎是未定义的。

感谢您在正确方向上的任何帮助。

```
$(function() {
  var price = 0, math = '', items = [];
  function calcPrice(math) {
      console.log(items);
      $.each( items, function( key, value ) {
        if(math == 'add')
          price += $(".draggable[data-item='" + value + "']").data('price');
        if(math == 'remove')
          price -= $(".draggable[data-item='" + value + "']").data('price');
      });
    $("#droppable").text(price);
  }
  $(".draggable").draggable({ containment: "#container", scroll: false });
  $("#droppable").droppable({
    drop: function(e, u) {
      items.push(u.draggable.data('item'));
      calcPrice('add');
    },
    out: function(e, u) {
      calcPrice('remove');
      items.splice($.inArray(u.draggable.data('item', items),1));
    }
  });
}); 
```

```
 <div id="container">
    <div id="droppable"></div>
    <div class="draggable" data-item="1" data-price="541">541</div>
    <div class="draggable" data-item="2" data-price="542">542</div>
  </div> 
```

jsbin：http: [//jsbin.com/exilos/1/edit](http://jsbin.com/exilos/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:48:06.813

您的代码中的问题行是
`items.splice($.inArray(u.draggable.data('item', items),1));`
我已将其更改为
`items.splice($.inArray(u.draggable.data('item'), items));`
NaN 问题不再存在..您必须检查价格的计算..
[请参阅此链接](http://jsbin.com/exilos/4/edit)

# clang++ - QtCreator下的clang++不能用c++11

> ID：14749315
> 
> 赞同：4
> 
> 时间：2013-02-07T10:51:22.060
> 
> 标签：clang++

操作系统：OS X 10.8.1 QtCreator：2.6.2

命令行很好，但 QtCreator 无法编译代码。

```
#include <functional>
#include <iostream>
#include <memory>
#include <string>
#include <vector>

int main(int argc, const char * argv[])
{
    std::vector<std::string> strs{"yahoo", "haha"};
    for(auto const &data : strs){
        std::cout<<data<<std::endl;
    }

    std::vector<std::string> strs2 = std::move(strs);

    std::unique_ptr<int> A(new int(3));
    std::cout<<*A<<std::endl;

    return 0;
} 
```

命令行 ：

```
clang++ -stdlib=libc++ -std=c++11 main.cpp -o test 
```

QtCreator 的编译器设置 [http://www.flickr.com/photos/92283971@N04/8453188038/in/photostream](http://www.flickr.com/photos/92283971@N04/8453188038/in/photostream)

Qt .pro 文件

```
TEMPLATE = app
CONFIG += console
CONFIG -= app_bundle
CONFIG -= qt

SOURCES += main.cpp

QMAKE_CXXFLAGS += -std=c++11 
QMAKE_CXXFLAGS += -stdlib=libc++ 
```

错误信息：

> clang：错误：-stdlib=libc++ 的无效部署目标（需要 OS X 10.7 或更高版本） make: *** [main.o] 错误 1

但我的操作系统号是 10.8.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T01:17:44.217

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T22:48:44.077

这似乎对我有用。

配置 += c++11

它正确地将 -std=c++11 放在命令行中，我没有收到任何编译器或链接器错误。

使用 Qt 5.2。

# android - 以编程方式停止 Android(DDMS) Profiler

> ID：14749316
> 
> 赞同：3
> 
> 时间：2013-02-07T10:51:27.567
> 
> 标签：android, profiler, ddms

有人知道我是否可以以编程方式从 ddms 停止探查器吗？我有一个更长的过程，并希望在此过程完成后停止配置文件，而不是手动停止。有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T14:24:08.143

如果我正确理解了这个问题，您可以简单地将以下方法放入您的应用程序代码中：

```
android.os.Debug.startMethodTracing("name_of_trace");
//here you put what you want to profile
android.os.Debug.stopMethodTracing(); 
```

所有痕迹都存储在`/sdcard`您可以简单地使用`adb pull`命令下载它们：

```
adb pull /sdcard/name_of_trace.trace 
```

之后，您可以使用命令监视器查看结果（如果您使用旧版本的 Android 工具，则应使用`traceview`命令。但是，对于较新版本，此命令也可以使用）：

```
monitor name_of_trace.trace 
```

# ios - 支持iOS上的多个SDK开发和设备上的调试

> ID：14749318
> 
> 赞同：0
> 
> 时间：2013-02-07T10:51:35.667
> 
> 标签：ios, ios6, ipod-touch, provisioning-profile, ios-provisioning

我是 ios 开发的新手，我对 sdk 有一些疑问。我还不是付费开发者，我免费注册。然后，我下载并安装了带有 iOS 6.1 sdk 的 xcode 4.6。我开发了一些基本的应用程序来了解开发过程。

如果我不是付费开发者，我无法在设备上调试应用程序，是这样吗？

我有 ios 5.1.1 的 ipod touch 4th gen，如何在此设备上调试应用程序？我尝试了不同的东西，但我没有。

我更改了应用程序中的架构设置，删除了应用程序要求，更改了目标 sdk，并设置了用于开发的设备。但我没有解决问题。当我构建并运行应用程序时，我收到此错误：

> 身份“iPhone Developer”与您的钥匙串中的任何有效、未过期的证书/私钥对都不匹配

我没有配置文件。我想添加配置文件，但出现此错误：

> 团队中的项目太少。

如何解决这些问题并在我的 iPod 上调试应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:00:01.290

简短的回答：你是对的。

如果您没有 iDP，则无法为您的设备构建应用程序。注册付费 iDP 后，您可以使用 Apple 的文档逐步生成认证和配置文件。如果你真的想在设备上调试，你可以越狱并安装一个同步补丁，这将跳过签名验证并在没有 iDP 的情况下运行你的代码。但是当你想提交到 AppStore 时，你当然需要一个付费帐户。

# c# - 如何使用 TPL/TAP 实现等效？

> ID：14749320
> 
> 赞同：0
> 
> 时间：2013-02-07T10:51:40.063
> 
> 标签：c#, task-parallel-library, parallel-extensions

下面我有一个使用 Azure 服务总线队列的相当简单的 .NET 控制台应用程序。

正如您将看到的，我正在使用 Task.Factory 启动 25 个接收器任务，然后调用我的 APM 样式的 BeginMessageReceive 方法。然后，在 EndMessageReceive 结束时，我再次调用 BeginMessageReceive 以保持循环继续进行。

我的问题是我如何才能实现同样的事情，但使用递归任务并可能利用 C# 5.0 async/await 从 APM 样式的 BeginMessageReceive/EndMessageReceive 切换到 TPL/TAP 方法？

```
using System;
using System.Configuration;
using System.Threading.Tasks;
using Microsoft.ServiceBus.Messaging;

namespace ServiceBusConsumer
{
    class Program
    {
        private static QueueClient _queueClient;

        private static void Main(string[] args)
        {    
            var connectionString = ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"];
            _queueClient = QueueClient.CreateFromConnectionString(connectionString, "MyQueue");

            for (var i = 0; i < 25; i++ )
            {
                Task.Factory.StartNew(BeginMessageReceive);
            }

            Console.WriteLine("Waiting for messages...");
            Console.ReadKey();

            _queueClient.Close();

        } //end private static void Main(string[] args)

        private static void BeginMessageReceive()
        {
            _queueClient.BeginReceive(TimeSpan.FromMinutes(5), EndMessageReceive, null);
        }

        private static void EndMessageReceive(IAsyncResult iar)
        {
            var message = _queueClient.EndReceive(iar);
            try
            {
                if (message != null)
                {
                    var msg = message.GetBody<string>();
                    Console.WriteLine("Message: " + msg);

                    if (_queueClient.Mode == ReceiveMode.PeekLock)
                    {
                        // Mark brokered message as completed at which point it's removed from the queue.
                        message.Complete();
                    }
                }
            }
            catch (Exception ex)
            {
                if (_queueClient.Mode == ReceiveMode.PeekLock)
                {
                    // unlock the message and make it available 
                    message.Abandon();
                }

                Console.WriteLine("Exception was thrown: " + ex.GetBaseException().Message);
            }
            finally
            {
                if (message != null)
                {
                    message.Dispose();
                }
            }
            BeginMessageReceive();
        }

    }
} 
```

如果 MessageReceive 超时过期，用于递归调用自身的新修改代码：

```
private static async Task MessageReceiveAsync()
{
    while (true)
    {
        using (var message = await _queueClient.ReceiveAsync(TimeSpan.FromMinutes(5)))try
        {
            if (message != null)
            {               
                try
                {

                    var msg = message.GetBody<string>();
                    Console.WriteLine("Message: " + msg);

                    if (_queueClient.Mode == ReceiveMode.PeekLock)
                    {
                        // Mark brokered message as completed at which point it's removed from the queue.
                        await message.CompleteAsync();
                    }
                }
                catch (Exception ex)
                {
                    message.AbandonAsync();
                    Console.WriteLine("Exception was thrown: " + ex.GetBaseException().Message);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:56:25.973

看起来 Azure 客户端库仍未使用 TAP API 进行更新。不知道那里有什么阻碍...

无论如何，您可以使用创建自己的[APM->TAP 包装器](http://msdn.microsoft.com/en-us/library/hh873178.aspx)，`TaskFactory.FromAsync`如下所示：

```
public static class MyAzureExtensions
{
  public static Task<BrokeredMessage> ReceiveAsync(this QueueClient @this,
      TimeSpan serverWaitTime)
  {
    return Task<BrokeredMessage>.Factory.FromAsync(
        @this.BeginReceive, @this.EndReceive, serverWaitTime, null);
  }

  public static Task CompleteAsync(this BrokeredMessage @this)
  {
    return Task.Factory.FromAsync(@this.BeginComplete, @this.EndComplete, null);
  }
} 
```

将 Azure 调用封装到 TAP-ready API 后，就可以这样使用它们：

```
private static void Main(string[] args)
{    
  var connectionString = ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"];
  _queueClient = QueueClient.CreateFromConnectionString(connectionString, "MyQueue");

  for (var i = 0; i < 25; i++ )
    MyMessageReceiveAsync();

  Console.WriteLine("Waiting for messages...");
  Console.ReadKey();

  _queueClient.Close();
}

private static async Task MyMessageReceiveAsync()
{
  while (true)
  {
    using (var message = await _queueClient.ReceiveAsync(TimeSpan.FromMinutes(5)))
    {
      try
      {
        var msg = message.GetBody<string>();
        Console.WriteLine("Message: " + msg);

        if (_queueClient.Mode == ReceiveMode.PeekLock)
        {
          // Mark brokered message as completed at which point it's removed from the queue.
          await message.CompleteAsync();
        }
      }
      catch (Exception ex)
      {
        if (_queueClient.Mode == ReceiveMode.PeekLock)
        {
          // unlock the message and make it available 
          message.Abandon();
        }

        Console.WriteLine("Exception was thrown: " + ex.GetBaseException().Message);
      }
    }
  }
} 
```

像这样使用的一个好处`async`是您不会不必要地占用线程池线程。原来用了25个线程来监听；我的示例不会使用任何线程来收听。在我的示例中，线程池线程唯一被绑定的时间是消息被放弃时（在错误处理分支中）。

*与*原始代码有一个主要的语义差异：如果 的`QueueClient`“接收”引发异常，则在原始代码中它将使进程崩溃；在我的示例中，该异常将被忽略。

# android - Mustache.js 在 Android 移动设备中渲染较小的模板时抛出错误

> ID：14749325
> 
> 赞同：0
> 
> 时间：2013-02-07T10:51:52.093
> 
> 标签：android, mustache

这是我要渲染的模板。

```
<div>
    <div class="button">
        <a href="#/account" class="fill-div">View Balance</a>
    </div>
    <div class="button">
        <a href="#/transactions" class="fill-div">View Transaction History</a>
    </div>
</div> 
```

这没有任何 json 组件。我要渲染的 Mustache 代码非常简单。

```
function getTemplate(name) {
    $.get("../templates/" + name, function (template) {
      try {
        html = Mustache.render(template, true);
        $('#place_holder').html(html);
      }catch(ex){
        alert(ex);
      }
    });
} 
```

此代码在浏览器中运行良好。但是，当我使用 phonegap 打包它并尝试在 Android 移动设备中运行它时，我收到如下错误。

![在此处输入图像描述](../Images/dda1c1a488d65d255ac44a0f44625ccc.png)

有什么可能出错的提示吗？如果您需要，很高兴提供更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:55:56.287

问题在于 jQuery 获取请求。

$.get 在模拟器和移动设备中返回一个 object[document]。因此将“文本”添加到 $.get 并解决了问题。

```
 $.get("../templates/" + name, function (template) {
        html = Mustache.render(template, true);
        $('#place_holder').html(html);
    }, "text"); 
```

# python - 如何检查是否设置了可选功能参数

> ID：14749328
> 
> 赞同：104
> 
> 时间：2013-02-07T10:52:05.710
> 
> 标签：python, function, optional-parameters

Python中是否有一种简单的方法来检查可选参数的值是否来自其默认值，或者是因为用户在函数调用中明确设置了它？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-07T10:54:58.347

并不真地。标准方法是使用用户不希望通过的默认值，例如一个`object`实例：

```
DEFAULT = object()
def foo(param=DEFAULT):
    if param is DEFAULT:
        ... 
```

通常，您可以将`None`其用作默认值，如果它作为用户想要传递的值没有意义。

另一种方法是使用`kwargs`：

```
def foo(**kwargs):
    if 'param' in kwargs:
        param = kwargs['param']
    else:
        ... 
```

然而，这过于冗长并且使您的函数更难使用，因为它的文档不会自动包含`param`参数。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2019-08-23T15:03:07.510

很多答案都包含完整信息的一小部分，所以我想将它们与我最喜欢的模式结合在一起。

## 默认值是一种`mutable`类型

如果默认值是一个可变对象，那么您很幸运：您可以利用 Python 的默认参数在定义函数时计算一次这一事实（在最后一节答案的末尾有更多关于此的内容）

这意味着您可以轻松地比较默认的可变值，`is`以查看它是作为参数传递还是默认保留，如以下示例中的函数或方法：

```
def f(value={}):
    if value is f.__defaults__[0]:
        print('default')
    else:
        print('passed in the call') 
```

和

```
class A:
    def f(self, value={}):
        if value is self.f.__defaults__[0]:
            print('default')
        else:
            print('passed in the call') 
```

## 不可变的默认参数

现在，如果您的默认值预期为一个值（请记住，即使是字符串也是不可变的！），它会有点不那么优雅，`immutable`因为您不能按原样利用这个技巧，但是您仍然可以做一些事情，仍然利用 mutable类型; 基本上，您在函数签名中放置了一个*可变*的“假”默认值，并在函数体中放置了所需的“真实”默认值。

```
def f(value={}):
    """
    my function
    :param value: value for my function; default is 1
    """
    if value is f.__defaults__[0]:
        print('default')
        value = 1
    else:
        print('passed in the call')
    # whatever I want to do with the value
    print(value) 
```

如果你真正的默认值是，感觉特别有趣`None`，但`None`它是不可变的，所以......你仍然需要明确地使用一个可变的作为函数默认参数，并在代码中切换到无。

### 使用`Default`不可变默认值的类

或者，类似于@cz 建议，如果 python 文档还不够 :-) ，您可以在两者之间添加一个对象以使 API 更明确（无需阅读文档）；used_proxy_ Default 类实例是可变的，并且将包含您要使用的真实默认值。

```
class Default:
    def __repr__(self):
        return "Default Value: {} ({})".format(self.value, type(self.value))

    def __init__(self, value):
        self.value = value

def f(default=Default(1)):
    if default is f.__defaults__[0]:
        print('default')
        print(default)
        default = default.value
    else:
        print('passed in the call')
    print("argument is: {}".format(default)) 
```

现在：

```
>>> f()
default
Default Value: 1 (<class 'int'>)
argument is: 1

>>> f(2)
passed in the call
argument is: 2 
```

以上也适用于`Default(None)`.

## 其他图案

显然，上面的模式看起来比它们应该的更丑，因为所有`print`这些只是为了展示它们是如何工作的。否则，我发现它们足够简洁和可重复。

您可以编写一个装饰器以`__call__`更简化的方式添加@dmg 建议的模式，但这仍然需要在函数定义本身中使用奇怪的技巧 - 您需要拆分`value`并且`value_default`如果您的代码需要区分它们，所以我没有看到太多优势，我不会写这个例子:-)

## 可变类型作为 Python 中的默认值

关于[#1 python gotcha 的更多信息！](https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments)，滥用上面为你自己的乐趣。*您可以通过执行以下操作查看由于定义时的评估*而发生的情况：

```
def testme(default=[]):
    print(id(default)) 
```

您可以`testme()`根据需要运行任意多次，您将始终看到对相同默认实例的引用（因此基本上您的默认值是不可变的 :-)）。

请记住，在 Python 中只有 3 种可变[的内置类型](https://docs.python.org/3/library/stdtypes.html)：`set`, `list`, `dict`; 其他一切——甚至是字符串！- 是不可变的。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-07T11:23:29.883

下面的函数装饰器，`explicit_checker`为所有显式给出的参数创建一组参数名称。它将结果作为额外参数 ( `explicit_params`) 添加到函数中。只需`'a' in explicit_params`检查参数`a`是否明确给出。

```
def explicit_checker(f):
    varnames = f.func_code.co_varnames
    def wrapper(*a, **kw):
        kw['explicit_params'] = set(list(varnames[:len(a)]) + kw.keys())
        return f(*a, **kw)
    return wrapper

@explicit_checker
def my_function(a, b=0, c=1, explicit_params=None):
    print a, b, c, explicit_params
    if 'b' in explicit_params:
        pass # Do whatever you want

my_function(1)
my_function(1, 0)
my_function(1, c=1) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-15T21:54:08.187

我有时会使用普遍唯一的字符串（如 UUID）。

```
import uuid
DEFAULT = uuid.uuid4()
def foo(arg=DEFAULT):
  if arg is DEFAULT:
    # it was not passed in
  else:
    # it was passed in 
```

这样，如果用户尝试过，甚至都无法猜测默认值，因此我可以非常确信，当我看到 的值时`arg`，它没有被传入。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-12-08T11:20:05.253

我见过这种模式几次（例如 library `unittest`, `py-flags`, `jinja`）：

```
class Default:
    def __repr__( self ):
        return "DEFAULT"

DEFAULT = Default() 
```

...或等效的单线...：

```
DEFAULT = type( 'Default', (), { '__repr__': lambda x: 'DEFAULT' } )() 
```

与 不同`DEFAULT = object()`的是，这有助于类型检查并在发生错误时提供信息——通常在错误消息中使用字符串表示 ( `"DEFAULT"`) 或类名 ( )。`"Default"`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-09-30T11:16:14.517

@Ellioh 的答案在 python 2 中有效。在 python 3 中，以下代码应该有效：

```
import inspect
from functools import wraps

def explicit_checker(f):
    varnames = inspect.getfullargspec(f)[0]
    @wraps(f)
    def wrapper(*a, **kw):
        kw['explicit_params'] = set(list(varnames[:len(a)]) + list(kw.keys()))
        return f(*a, **kw)
    return wrapper

@explicit_checker
def my_function(a, b=0, c=1, explicit_params=None):
    print(a, b, c, explicit_params)
    if 'b' in explicit_params:
        pass # Do whatever you want 
```

此方法可以保持参数名称和默认值（而不是 **kwargs）具有更好的可读性。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-02-07T10:56:42.287

我同意波动率的评论。但是您可以通过以下方式进行检查：

```
def function(arg1,...,**optional):
    if 'optional_arg' in optional:
        # user has set 'optional_arg'
    else:
        # user has not set 'optional_arg'
        optional['optional_arg'] = optional_arg_default_value # set default 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-03-31T16:08:04.913

您可以从`foo.__defaults__`和`foo.__kwdefaults__`

看一个简单的例子

```
def foo(a, b, c=123, d=456, *, e=789, f=100):
    print(foo.__defaults__)
    # (123, 456) 
    print(foo.__kwdefaults__)
    # {'e': 789, 'f': 100}
    print(a, b, c, d, e, f)

#and these variables are also accessible out of function body
print(foo.__defaults__)    
# (123, 456)  
print(foo.__kwdefaults__)  
# {'e': 789, 'f': 100}

foo.__kwdefaults__['e'] = 100500

foo(1, 2) 
#(123, 456)
#{'f': 100, 'e': 100500}
#1 2 123 456 100500 100 
```

然后通过使用运算符`=`，`is`您可以比较它们

在某些情况下，下面的代码就足够了

例如，您需要避免更改默认值，然后您可以检查是否相等，如果是则复制

```
 def update_and_show(data=Example):
        if data is Example:
            data = copy.deepcopy(data)
        update_inplace(data) #some operation
        print(data) 
```

* * *

`getcallargs`此外，使用from非常方便，`inspect`因为它返回将调用函数的真实参数。您将一个函数以及 args 和 kwargs 传递给它（`inspect.getcallargs(func, /, *args, **kwds)`），它将返回用于调用的真实方法的参数，同时考虑到默认值和其他内容。看看下面的例子。

```
from inspect import getcallargs

# we have a function with such signature
def show_params(first, second, third=3):
    pass

# if you wanted to invoke it with such params (you could get them from a decorator as example)
args = [1, 2, 5]
kwargs = {}
print(getcallargs(show_params, *args, **kwargs))
#{'first': 1, 'second': 2, 'third': 5}

# here we didn't specify value for d
args = [1, 2, 3, 4]
kwargs = {}

# ----------------------------------------------------------
# but d has default value =7
def show_params1(first, *second, d = 7):
    pass

print(getcallargs(show_params1, *args, **kwargs))
# it will consider b to be equal to default value 7 as it is in real method invocation
# {'first': 1, 'second': (2, 3, 4), 'd': 7}

# ----------------------------------------------------------
args = [1]
kwargs = {"d": 4}

def show_params2(first, d=3):
    pass

print(getcallargs(show_params2, *args, **kwargs))
#{'first': 1, 'd': 4} 
```

[https://docs.python.org/3/library/inspect.html](https://docs.python.org/3/library/inspect.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-31T13:52:53.523

这是 stefano 答案的变体，但我发现更具可读性：

```
not_specified = {}

def foo(x=not_specified):
    if x is not_specified:
            print("not specified")
    else:
            print("specified") 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-07T11:14:36.673

一个有点奇怪的方法是：

```
class CheckerFunction(object):
    def __init__(self, function, **defaults):
        self.function = function
        self.defaults = defaults

    def __call__(self, **kwargs):
        for key in self.defaults:
            if(key in kwargs):
                if(kwargs[key] == self.defaults[key]):
                    print 'passed default'
                else:
                    print 'passed different'
            else:
                print 'not passed'
                kwargs[key] = self.defaults[key]

        return self.function(**kwargs)

def f(a):
    print a

check_f = CheckerFunction(f, a='z')
check_f(a='z')
check_f(a='b')
check_f() 
```

哪个输出：

```
passed default
z
passed different
b
not passed
z 
```

现在，正如我所提到的，这很奇怪，但它确实有效。然而，这是非常难以理解的，并且与[ecatmur](https://stackoverflow.com/users/567292/ecatmur)的[建议](https://stackoverflow.com/questions/14749328/python-how-to-check-whether-optional-function-parameter-is-set/14749388#14749388)类似，不会自动记录。

# java - 如何解决 java.lang.NoSuchMethodError: org.odata4j.consumer.ODataConsumers.create(Ljava/lang/String;)Lorg/odata4j/consumer/ODataConsumer;

> ID：14749332
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:52:20.620
> 
> 标签：java, jakarta-ee, merge, odata4j

我在我的 web 项目中使用 odata4j 库来合并实体，但是我在 web 项目中遇到了这个错误，但是如果我在独立应用程序中尝试，那么它可以完美运行有人能告诉我我在这里做错了什么吗

```
String URL = "https://api.sqlazureservices.com/APService.svc/";
ODataConsumer oDataConsumers = ODataConsumers.create(URL);
OEntity entity = oDataConsumers.getEntity(tableName, id).execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:13:35.037

Odata4j 当前不处理来自函数调用的响应。

在这里查看[回复](https://stackoverflow.com/questions/9031812/odata4j-consumer-function-call)。

# android - 在某些设备上使用 AutoresizeTextView 自定义视图中不需要的填充

> ID：14749339
> 
> 赞同：2
> 
> 时间：2013-02-07T10:52:43.337
> 
> 标签：android, measurement

我在这里解决了我以前的问题：

[无法以编程方式使用 setGravity 垂直设置重力。这是一个Android错误或功能吗？](https://stackoverflow.com/questions/8821039/can-not-set-gravity-with-setgravity-vertically-programatically-is-this-an-andro)

基本上我有一个自定义按钮，里面有一个 AutoResizeTextView。我想为按钮设置动画并将文本视图垂直居中。我通过测量和使用 layout 和 onLayout 方法解决了这个问题。它在大多数设备上都能正常工作。

但在某些设备上，AutoResizeTextView 内的文本上方有一个额外的填充，无论如何我都无法删除。表现不佳的设备是 Kindle Fire 和三星 Galaxy Tab2 7。Nook Color、摩托罗拉 Xoom 和我的摩托罗拉 Defy (CyanogenMod 10) 上的布局还可以。

我创建了一个示例项目来演示该问题。它包括 3 个类和一个布局文件：

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<herrbert74.artvsample.MyButton
    android:id="@+id/textView1"
    android:layout_width="240dp"
    android:layout_height="60dp"
    android:background="@android:color/black"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginBottom="46dp"
    android:layout_marginRight="54dp"
    android:text="Button" />

</RelativeLayout> 
```

修改 AutoResizeTextView.java：

```
package herrbert74.artvsample;

import android.content.Context;
import android.graphics.Canvas;
import android.text.Layout.Alignment;
import android.text.StaticLayout;
import android.text.TextPaint;
import android.util.AttributeSet;
import android.util.TypedValue;
import android.widget.TextView;

/**
* Text view that auto adjusts text size to fit within the view. If the text
* size equals the minimum text size and still does not fit, append with an
* ellipsis.
* 
* @author Chase Colburn
* @since Apr 4, 2011
*/
public class AutoResizeTextView extends TextView {

// Minimum text size for this text view
public static final float MIN_TEXT_SIZE = 10;

// Interface for resize notifications
public interface OnTextResizeListener {
    public void onTextResize(TextView textView, float oldSize, float newSize);
}

// Off screen canvas for text size rendering
private static final Canvas sTextResizeCanvas = new Canvas();

// Our ellipse string
private static final String mEllipsis = "...";

// Registered resize listener
private OnTextResizeListener mTextResizeListener;

// Flag for text and/or size changes to force a resize
private boolean mNeedsResize = false;

// Text size that is set from code. This acts as a starting point for
// resizing
private float mTextSize;

// Temporary upper bounds on the starting text size
private float mMaxTextSize = 0;

// Lower bounds for text size
private float mMinTextSize = MIN_TEXT_SIZE;

// Text view line spacing multiplier
private float mSpacingMult = 1.0f;

// Text view additional line spacing
private float mSpacingAdd = 0.0f;

// Add ellipsis to text that overflows at the smallest text size
private boolean mAddEllipsis = true;

// Default constructor override
public AutoResizeTextView(Context context) {
    this(context, null);
}

// Default constructor when inflating from XML file
public AutoResizeTextView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

// Default constructor override
public AutoResizeTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mTextSize = getTextSize();
}

/**
 * When text changes, set the force resize flag to true and reset the text
 * size.
 */
@Override
protected void onTextChanged(final CharSequence text, final int start,
        final int before, final int after) {
    mNeedsResize = true;
    // Since this view may be reused, it is good to reset the text size
    resetTextSize();
}

/**
 * If the text view size changed, set the force resize flag to true
 */
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    if (w != oldw || h != oldh) {
        mNeedsResize = true;
    }
}

/**
 * Register listener to receive resize notifications
 * 
 * @param listener
 */
public void setOnResizeListener(OnTextResizeListener listener) {
    mTextResizeListener = listener;
}

/**
 * Override the set text size to update our internal reference values
 */
@Override
public void setTextSize(float size) {
    super.setTextSize(size);
    mTextSize = getTextSize();

}

/**
 * Override the set text size to update our internal reference values
 */
@Override
public void setTextSize(int unit, float size) {
    super.setTextSize(unit, size);
    mTextSize = getTextSize();

}

/**
 * Override the set line spacing to update our internal reference values
 */
@Override
public void setLineSpacing(float add, float mult) {
    super.setLineSpacing(add, mult);
    mSpacingMult = mult;
    mSpacingAdd = add;
}

/**
 * Set the upper text size limit and invalidate the view
 * 
 * @param maxTextSize
 */
public void setMaxTextSize(float maxTextSize) {
    mMaxTextSize = maxTextSize;
    requestLayout();
    invalidate();
}

/**
 * Return upper text size limit
 * 
 * @return
 */
public float getMaxTextSize() {
    return mMaxTextSize;
}

/**
 * Set the lower text size limit and invalidate the view
 * 
 * @param minTextSize
 */
public void setMinTextSize(float minTextSize) {
    mMinTextSize = minTextSize;
    requestLayout();
    invalidate();
}

/**
 * Return lower text size limit
 * 
 * @return
 */
public float getMinTextSize() {
    return mMinTextSize;
}

/**
 * Set flag to add ellipsis to text that overflows at the smallest text size
 * 
 * @param addEllipsis
 */
public void setAddEllipsis(boolean addEllipsis) {
    mAddEllipsis = addEllipsis;
}

/**
 * Return flag to add ellipsis to text that overflows at the smallest text
 * size
 * 
 * @return
 */
public boolean getAddEllipsis() {
    return mAddEllipsis;
}

/**
 * Reset the text to the original size
 */
public void resetTextSize() {
    //ZBertalan:changed to mMaxTextSize
    super.setTextSize(TypedValue.COMPLEX_UNIT_PX, mMaxTextSize);
    //ZBertalan:swapped them
    //mMaxTextSize = mTextSize;
    mTextSize = mMaxTextSize;
}

/**
 * Resize text after measuring ZBertalan: I commented this out because I
 * need to resize the text in onMeasure, to layout the textview based on
 * it's size
 */
/*
 * @Override protected void onLayout(boolean changed, int left, int top, int
 * right, int bottom) { if(changed || mNeedsResize) { int widthLimit =
 * (right - left) - getCompoundPaddingLeft() - getCompoundPaddingRight();
 * int heightLimit = (bottom - top) - getCompoundPaddingBottom() -
 * getCompoundPaddingTop(); //og.d("AnswerView", "inside ARTV.onLayout() " +
 * ); resizeText(widthLimit, heightLimit); } super.onLayout(changed, left,
 * top, right, bottom); }
 */

/**
 * @author zsbertalan Moved some code here to resize the textview here and
 *         position it based on it's new size
 */
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    int newWidth = MeasureSpec.getSize(widthMeasureSpec);
    int newHeight = MeasureSpec.getSize(heightMeasureSpec);

    resizeText(newWidth, newHeight);

    TextPaint p = getPaint();
    newHeight = getTextHeight(getText(), p, newWidth, getTextSize());

    this.setMeasuredDimension(newWidth, newHeight);
}

/**
 * Resize the text size with default width and height
 */
public void resizeText() {
    int heightLimit = getHeight() - getPaddingBottom() - getPaddingTop();
    int widthLimit = getWidth() - getPaddingLeft() - getPaddingRight();
    resizeText(widthLimit, heightLimit);
}

/**
 * Resize the text size with specified width and height
 * 
 * @param width
 * @param height
 */
public void resizeText(int width, int height) {
    CharSequence text = getText();
    // Do not resize if the view does not have dimensions or there is no
    // text
    if (text == null || text.length() == 0 || height <= 0 || width <= 0
            || mTextSize == 0) {
        return;
    }

    // Get the text view's paint object
    TextPaint textPaint = getPaint();

    // Store the current text size
    float oldTextSize = textPaint.getTextSize();
    // If there is a max text size set, use the lesser of that and the
    // default text size
    //ZBertalan: Bollocks. I changed to use mMaxTextSize all the time
    //float targetTextSize = mMaxTextSize > 0 ? Math.min(mTextSize, mMaxTextSize) : mTextSize;
    float targetTextSize = mMaxTextSize;

    // Get the required text height
    int textHeight = getTextHeight(text, textPaint, width, targetTextSize);

    // Until we either fit within our text view or we had reached our min
    // text size, incrementally try smaller sizes
    while (textHeight > height && targetTextSize > mMinTextSize) {
        targetTextSize = Math.max(targetTextSize - 2, mMinTextSize);
        textHeight = getTextHeight(text, textPaint, width, targetTextSize);
    }

    // If we had reached our minimum text size and still don't fit, append
    // an ellipsis
    if (mAddEllipsis && targetTextSize == mMinTextSize
            && textHeight > height) {
        // Draw using a static layout
        TextPaint paint = new TextPaint(textPaint);
        StaticLayout layout = new StaticLayout(text, paint, width,
                Alignment.ALIGN_NORMAL, mSpacingMult, mSpacingAdd, false);
        layout.draw(sTextResizeCanvas);
        int lastLine = layout.getLineForVertical(height) - 1;
        int start = layout.getLineStart(lastLine);
        int end = layout.getLineEnd(lastLine);
        float lineWidth = layout.getLineWidth(lastLine);
        float ellipseWidth = paint.measureText(mEllipsis);

        // Trim characters off until we have enough room to draw the
        // ellipsis
        while (width < lineWidth + ellipseWidth) {
            lineWidth = textPaint.measureText(text.subSequence(start,
                    --end + 1).toString());
        }
        setText(text.subSequence(0, end) + mEllipsis);

    }

    // Some devices try to auto adjust line spacing, so force default line
    // spacing
    // and invalidate the layout as a side effect
    // textPaint.setTextSize(targetTextSize);
    setTextSize(TypedValue.COMPLEX_UNIT_PX, targetTextSize);
    setLineSpacing(mSpacingAdd, mSpacingMult);

    // Notify the listener if registered
    if (mTextResizeListener != null) {
        mTextResizeListener.onTextResize(this, oldTextSize, targetTextSize);
    }

    // Reset force resize flag
    mNeedsResize = false;
}

// Set the text size of the text paint object and use a static layout to
// render text off screen before measuring
private int getTextHeight(CharSequence source, TextPaint originalPaint, int width,
        float textSize) {
    TextPaint paint = new TextPaint(originalPaint);
    // Update the text paint object
    paint.setTextSize(textSize);
    // Draw using a static layout
    StaticLayout layout = new StaticLayout(source, paint, width,
            Alignment.ALIGN_NORMAL, mSpacingMult, mSpacingAdd, true);
    layout.draw(sTextResizeCanvas);
    return layout.getHeight();
}

} 
```

MyButton.java：包herrbert74.artvsample；

```
import android.content.Context;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.view.WindowManager;
import android.widget.LinearLayout;

public class MyButton extends LinearLayout {
private AutoResizeTextView tv;
Context ctx;

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    AutoResizeTextView tv = (AutoResizeTextView) getChildAt(0);
    int padding = getHeight() / 8;
    int left = padding;
    int top = (getHeight() - tv.getMeasuredHeight()) / 2;
    int right = padding + tv.getMeasuredWidth();
    int bottom = getHeight() / 2 + tv.getMeasuredHeight() / 2;
    tv.layout(left, top, right, bottom);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    int w = MeasureSpec.getSize(widthMeasureSpec);
    int h = MeasureSpec.getSize(heightMeasureSpec);

    if (w == 0) {
        WindowManager wm = (WindowManager) ctx
                .getSystemService(Context.WINDOW_SERVICE);
        DisplayMetrics metrics = new DisplayMetrics();
        wm.getDefaultDisplay().getMetrics(metrics);
        w = metrics.widthPixels;
        h = metrics.heightPixels;
    }
    tv.measure(MeasureSpec.makeMeasureSpec(w - 40, MeasureSpec.AT_MOST),
            MeasureSpec.makeMeasureSpec(h - 20, MeasureSpec.AT_MOST));
    setMeasuredDimension(MeasureSpec.getSize(widthMeasureSpec),
            MeasureSpec.getSize(heightMeasureSpec));
}

public MyButton(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
    tv = new AutoResizeTextView(context);
    tv.setMaxTextSize(54);
    tv.setTextColor(context.getResources().getColor(android.R.color.white));
    tv.setClickable(true);
    tv.setBackgroundResource(android.R.color.darker_gray);
    addView(tv);
}

public MyButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs);
    ctx = context;
}

protected MyButton(Context context) {
    super(context, null);

}

public void setText(String text) {
    tv.setText(text);
}

public String getText() {
    return tv.getText().toString();
}

public void setTextSize(float f) {
    tv.setTextSize(f);
}
} 
```

MainActivity.java：包herrbert74.artvsample；

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
int x;
MyButton tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    x = -1;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final String[] texts = { "normal text", "a bit longer text", "even longer text by a word", "Long. Longest text ever. Long. Long." };
    tv = (MyButton) findViewById(R.id.textView1);
    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (x < texts.length - 1)
                x++;
            else
                x = 0;
            tv.setText(texts[x]);
            Log.d("AnswerView", "Text: " + texts[x]);
        }

    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

在示例项目中，有一个用于更改文本的按钮。起初没有文字，然后文字越来越长。您可以在图片上看到差异。

按钮背景为黑色，textview 背景为灰色。

以下是带有正确按钮的 Defy 文本视图：

![无文字反抗](../Images/6bd589655d24891ffb0a8be1edf9599b.png) ![第一个文本](../Images/c0d0e37c993d7c968909d263354fd4e9.png) ![第二个文本](../Images/c14b8b8a0a3ffe69c11bb4e6667b68f9.png) ![第三个文本](../Images/0d95f15df561573393b4921bbd740d57.png) ![第四篇](../Images/d5cf5512bca20cc2cd9af1b04ee70f24.png)

请注意，在 Kindle 上，textview 已经声明了一些没有文字的地方！Kindle Fire 布局错误：

![在此处输入图像描述](../Images/dfd68a0c79610646860724bd339ea9f5.png) ![第一个文本](../Images/4f6f164a1af391ea37bbe7c309e37f72.png) ![第二个文本](../Images/03c741806e0fe2526f4fa2dc32254158.png) ![第三个文本](../Images/2fd711a73f812be45d96065a58ca9038.png) ![第四篇](../Images/5828b2f38a4e0b86fb833326e6a9e0d8.png)

在 myButton 构造函数中，我尝试了以下无济于事：

```
tv.setPadding(0, 0, 0, 0);
tv.setLineSpacing(0f, 1f);
tv.setCompoundDrawablePadding(0);
tv.setCompoundDrawablesWithIntrinsicBounds(null, null, null, null);
tv.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0); 
```

# java - 配置Netbeans编译运行不同的jvm

> ID：14749341
> 
> 赞同：0
> 
> 时间：2013-02-07T10:52:46.697
> 
> 标签：java, netbeans, jvm

有谁知道如何配置 Netbeans 以使用 64 位 Java 平台编译项目并使用 32 位 Java 平台运行它？两个jvm是相同的版本。

# javascript - 在站点加载时立即显示弹出窗口

> ID：14749343
> 
> 赞同：0
> 
> 时间：2013-02-07T10:53:06.057
> 
> 标签：javascript, jquery

我有一个显示广告的广告弹出窗口。但是，我被推荐使用[Create a one-time popup using jQuery](http://www.veign.com/blog/2008/05/22/create-a-one-time-popup-using-jquery/)中的代码。弹出窗口工作正常，并且在设置 cookie 时也被禁用。但是这个弹出窗口不会立即出现在我的网站首页加载中。当我导航到另一个页面后，它会出现。我只是希望它在第一个站点加载时打开。

这是我的代码：

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage"%>
<%@ Register Assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI" TagPrefix="asp" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Untitled Page</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="ROBOTS" content="ALL,INDEX,FOLLOW"/>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="js/slide.js" type="text/javascript"></script>
<script src="js/jquery.cookie.js" type="text/javascript"></script>
<script src="js/thickbox.js" type="text/javascript"></script>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
<script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" type="text/javascript"></script>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&;lang=en"></script>
</head>
<body onload="init()">
<div id="loading" style="position:absolute; width:100%; text-align:center; top:300px;"><img src="images/loading.gif" alt=""/></div>
<script type="text/javascript">
    var ld = (document.all);
    var ns4 = document.layers;
    var ns6 = document.getElementById && !document.all;
    var ie4 = document.all;
    if (ns4)
        ld = document.loading;
    else if (ns6)
        ld = document.getElementById("loading").style;
    else if (ie4)
        ld = document.all.loading.style;
    function init() {
        if (ns4) { ld.visibility = "hidden"; }
        else if (ns6 || ie4) ld.display = "none";
    }
</script>
<script type="text/javascript">
$(document).ready(function(){
   if ($.cookie('20080521') != '1') {
    tb_show("<strong>Seminar on Total Investment!</strong>", "#TB_inline?height=190&width=275&inlineId=mypopup","");
    $.cookie('20080521', '1', { expires: 20 }); }
   });
</script>
<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div id="mypopup" style="display:none"><p id="msg">Seminar on Total Investment By Mr.Samir Shah. Contact: 9727152508</p></div> 
```

# cocoa-touch - 核心情节集图例情节符号不同然后情节

> ID：14749347
> 
> 赞同：0
> 
> 时间：2013-02-07T10:53:09.930
> 
> 标签：cocoa-touch, core-plot

嘿核心情节朋友，

我有两个带有情节点的地块。他们可以有或没有情节符号。
问题是：如果我的情节中的最后一点有一个隐藏的情节符号，我的传说的情节点也会被隐藏。这就是为什么我正在寻找任何解决方案来解决这个问题。

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:40:47.307

我发现，我必须定义`CPTPlotSymbol`and it 样式两次。一旦进入我图例的方法（对我来说，这是我加载图形、绘图和所有样式的 init 方法）。那就是传说中的设置。第二次在我的`symbolForScatterPlot:recordIndex:`方法中为我的情节中的每个情节点。

# c# - SRSS 2008 R2 的 C# 报告渲染器 - 缺少参数

> ID：14749348
> 
> 赞同：3
> 
> 时间：2013-02-07T10:53:10.383
> 
> 标签：c#, ssrs-2008

我正在使用 C# 呈现来自 SRSS 2008 R2 的报告 该报告具有参数，并且很长一段时间以来我在呈现输出时都没有问题。然而今天它决定它不去工作！

这是错误

`ReportServerException: This report requires a default or user-defined value for the report parameter 'CustomFieldId'. To run or subscribe to this report, you must provide a parameter value. (rsReportParameterValueNotSet): Stack: at Microsoft.Reporting.WebForms.ServerReportSoapProxy.OnSoapException(SoapException e)`

这是代码：

```
ReportViewer rv = new ReportViewer();
rv.ShowCredentialPrompts = true;
rv.ProcessingMode = ProcessingMode.Remote;
rv.ServerReport.ReportServerUrl = new Uri(ReportsClient.ReportServerUrl);
rv.ServerReport.ReportPath = string.Format("/Reports/{0}", item.Name);
rv.ServerReport.SetParameters(thisLoopParams.ToArray());
rv.ServerReport.Timeout = -1;
rv.ServerReport.Refresh();

// render the report
string mimeType = string.Empty;
string extention = string.Empty;
string encoding = string.Empty;
string[] streamIds;
Microsoft.Reporting.WebForms.Warning[] warnings = null;

byte[] result = rv.ServerReport.Render(outputFormat, deviceInfo, out mimeType, out encoding, out extention, out streamIds, out warnings); 
```

如果我检查`thisLoopParams`，我可以清楚地看到“CustomFieldId”`ReportParameter`并且它肯定有一个值，但错误仍然出现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:12:58.663

找到了。我看了看，`ReportParameterInfoCollection paramInfo = rv.ServerReport.GetParameters();`发现一些参数是“无效的”。我知道为什么，但我有点被“未提供”的原始错误所抛弃。我猜这是因为我自豪的有效值我们只是打折了

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T22:20:25.653

当我传递“XYZ”字段的值时，我面临同样的问题，但它说

> 此报告需要报告参数的默认值或用户定义的值

当我看到“XYZ”的值时，当我删除这个空间时，它在开始时有额外的空间，它出人意料地开始工作。我不知道原因，但它有效。希望它可以帮助你。

# function - 复杂度函数

> ID：14749349
> 
> 赞同：0
> 
> 时间：2013-02-07T10:53:13.957
> 
> 标签：function, complexity-theory, asymptotic-complexity

你能帮我确定以下函数是否复杂：

f(n)=5n^3+1800nlogn+18

顺序为 O(n^2), O(n^4), OMEGA(n^3),OMEGA(n^5),TETA(n^3),TETA(n^5)

我认为是 O(n^4)，TETA(n^3) 对吗？我得到了这个解决方案，因为我计算了各种命令中的极限 n-> inf f (n) / g (n)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:58:33.233

它实际上是`O(n^3)`：n^3 是您功能中的最高功率。

（和`nlogn`< `n^2`< `n^3`，并且`18`是一个常数）

# java - 同步两个并行工作的类

> ID：14749351
> 
> 赞同：1
> 
> 时间：2013-02-07T10:53:15.247
> 
> 标签：java, serial-port, synchronize

您好，我正在创建一个读取和写入串行端口的程序。在程序开始时，我调用类 ReadSerialPort 、 WriteSerialPort 和 JWakeup 。

我的问题是：当我从 JWakeup 向串口写东西时，我想等到串口响应。

```
public class MainClass{

public static void main(String args[]){

    new ReadSerialPort().OpenSerialPort();
    new WriteSerialPort().OpenSerialPort();

    new JWakeup().setVisible(true);
}}

public class JWakeUp extends JFrame implements ActionListener{

public JWakeUp() {
    super("JWakeUp");

    //Other Code

    new WriteSerialPort().writeDataToSerialPort("WritenString");

    //In this part I want to know when the class ReadSerialPort() 
    // will read the "readenString"

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:14:58.547

您可以在这些类之外创建信号量`Semaphore semaphore = new Semaphore(0);`并将其传递给这些类。完成 ReadSerialPort 使用后`semaphore.release()`，在 JWakeUp 中等待 ReadSerialPort 使用`semaphore.acquire()`

# .net - DataBind多个CheckBoxes创建一个位掩码？

> ID：14749354
> 
> 赞同：0
> 
> 时间：2013-02-07T10:53:23.690
> 
> 标签：.net, winforms, data-binding

我在一个表单上有一组四个复选框。

对于我的大多数其他控件，我使用遵循`myControl.DataBindings.Add("ControlBindingPropertyName", DataSource, "DataSourcePropertyName")`似乎工作正常的格式的命令对它们的数据进行数据绑定。

不过，对于我的 CheckBoxes，我想创建一个基于选中/未选中的位掩码。

显然，我可以通过在每个框的事件上创建单独的事件处理程序`CheckedChanged`并在那里设置一个值来天真地做到这一点，但我想知道是否有任何方法可以合并 DataBinding，也许将每个 CheckBox 绑定到表单上的一个属性，然后绑定该属性返回到我的数据集。

# wpf - 是否可以在 asp.net 网站中使用 WPF 组件？

> ID：14749355
> 
> 赞同：0
> 
> 时间：2013-02-07T10:53:26.510
> 
> 标签：wpf

我想知道是否可以将 WPF 中的组件用于 asp.net Web 应用程序。asp.net 中是否有任何替代 3D 组件的方法，例如 viewport3D（来自 wpf）？如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:10:52.040

您唯一真正的赌注是使用 Silverlight。话虽如此，我认为您要实现的目标将需要单独的 HTML 实现和大量重复的工作。

最简洁的答案是不。WPF 是与 HTML 不同的表示框架，无法将 XAML 转换为具有可靠结果的 HTML。

# c# - 如何使用 XmlSerializer 序列化/反序列化 null List<>

> ID：14749356
> 
> 赞同：3
> 
> 时间：2013-02-07T10:53:26.570
> 
> 标签：c#, serialization, xml-serialization

如果列表不为空，我可以序列化列表。

但是如果这个列表为空，我会得到一个关于反序列化的空列表。

当列表在序列化时为空时，我必须做什么才能在反序列化时获得空值？

到目前为止，这是我的尝试：

```
 [System.Xml.Serialization.XmlArray("WorksButIsNoList", IsNullable = true)]
    public MyClass[] WorksButIsNoList { get; set; }

    [System.Xml.Serialization.XmlArray("ThrowsException", IsNullable = true)]
    public List<MyClass> ThrowsException { get; set; }

    [System.Xml.Serialization.XmlElement("IsntNull", IsNullable = true)]
    public List<MyClass> IsntNull { get; set; }

    [System.Xml.Serialization.XmlElement("ThrowsException2", IsNullable = true)]
    public List<int> ThrowsException2 { get; set; }

    [System.Xml.Serialization.XmlElement("IsntNull2", IsNullable = true)]
    public List<int?> IsntNull2 { get; set; } 
```

# javascript - window.location 是一个对象吗？

> ID：14749364
> 
> 赞同：0
> 
> 时间：2013-02-07T10:53:52.813
> 
> 标签：javascript

```
window.location = null; // But it redirects to http://example.com/null 
```

是否可以删除window.location？

我正在编写一个代理，我想确保请求 url 中的脚本不会重定向到他们的页面。

```
window.location = 'http://actual-urlexample.com'; 
```

我的想法是用我们的对象替换*window.location*以便我们可以控制我的代理服务器的上述代码。我只想知道一件事：*window.location*是否是一个对象。*当我们为window.location*赋值时，事件（新的 url 正在加载）是如何发生的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:58:57.030

至少有两种明显的方法可以找出答案：

*   您浏览器的 JavaScript 控制台：

    ```
    >>> typeof window.location
    "object" 
    ```

*   你最喜欢的[文档](https://developer.mozilla.org/en-US/docs/DOM/window.location)：

    > 返回一个[`Location`object](https://developer.mozilla.org/en-US/docs/DOM/window.location#Location_object)，其中包含有关文档 URL 的信息并提供更改该 URL 的方法。您还可以分配给此属性以加载另一个 URL。

[没有冒犯，但如果您甚至需要询问它是否是对象，我希望您看到您覆盖了内置对象；-P]

**编辑：**稍微澄清一下——我想从技术上讲`location`，它实际上是包含对象的对象的*属性*。`window``Location`

# javascript - Dreamweaver 显示 javascript 的红色标签

> ID：14749366
> 
> 赞同：0
> 
> 时间：2013-02-07T10:53:55.953
> 
> 标签：javascript, html, local-storage

有谁知道这段代码有什么问题？它在 Dreamweaver 中显示红色标签

```
$('#left_bar .cart-info').append('<div>'+localStorage["myid"] = document.getElementById("myid").value =parseInt(localStorage["myid"] || "0", 10) + 1;+'<input id="myid" type="text" name="itemquantity[]" value="1"/></div>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:58:42.753

尝试 ：

```
$('#left_bar .cart-info').append('<div>' + (localStorage["myid"] = document.getElementById("myid").value = parseInt(localStorage["myid"] || "0", 10) + 1) + '<input id="myid" type="text" name="itemquantity[]" value="1"/></div>'); 
```

你有一个放错位置的分号，应该用括号括住你的矫揉造作以区分`+`语义（加法与连接）。

# php - 如何在水平方向上垂直显示 2 个 php 数组图像

> ID：14749368
> 
> 赞同：1
> 
> 时间：2013-02-07T10:54:01.070
> 
> 标签：php, html

我正在尝试从 php 中的一个流行类别中提取图像。图像获取正确，但我无法控制 html 中的图像。

我想要如下图：

[图像1](http://s12.postimage.org/bpyeo49kp/need_this_block.jpg?noCache=1360233957)

但是得到这个图像块：

[图像2](http://s7.postimage.org/kur70jyyf/getting_this_block.jpg?noCache=1360234096)

我正在尝试将此图像以表格格式放在 html 页面中：

```
<table width=200>
 <tr>
  <td width=200><img src="http://www.mywebsite.com/images/[var.images;block=td;comm]" width=100 /></td>
 </tr>
</table> 
```

谁能帮我吗？对不起英语不好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:03:03.543

您可以使用 css 来完成这项工作。它会给你更多的灵活性。

```
<div id="maincontainer" style="width:400px;">
 // run your foreach loop here
<img src='pathtoimage' style='width:200px; float:left;' />
// for each loop ends here
</div> 
```

这为您提供了很大的灵活性。考虑到 img 是一个块元素，它在其包含的 div(maincontainer) 的最大宽度达到后自动下降到底线。

# php - 获取表单中多个选择字段的数据

> ID：14749371
> 
> 赞同：0
> 
> 时间：2013-02-07T10:54:07.747
> 
> 标签：php, jquery, forms

我有一个带有 2 个字段的表单，这些字段具有基于 jquery 令牌的输入，它们可以有单个或多个值，从两个输入字段（包含多个值）捕获数据的方法是什么，我应该能够区分基于在输入字段 id 上。我打算在 php 脚本中处理这些数据，所以是否可以直接在 ($_POST) 中获取输入

```
<div>
<h2>Include</h2>
    <input type="text" id="include" name="include" />

<h2>Must Have</h2>

    <input type="text" id="must_have" name="must_have" />

    <input type="button" value="Submit" />
</div> 
```

当你点击提交按钮时，jquery 脚本来查看数据。（它目前只向我显示包含字段的数据（例如：- k1，k2，k3））但它没有向我显示 must_have 字段。

```
$(document).ready(function() {
    $("input[type=button]").click(function () {
        alert("Would submit: " + $(this).siblings("input[type=text]").val());
    });
}); 
```

我是 jquery 的新手，所以我不知道如何处理这个。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:02:18.533

尝试使用 each 来迭代输入文本元素。

```
$(document).ready(function() {
    $("input[type=button]").click(function () {
        $(this).siblings("input[type=text]").each(function(i,elt){alert("Would submit: " + elt.val());});
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:00:08.333

尝试这个：

```
$(document).ready(function() {
$("input[type=button]").click(function () {
var input1 = $("#include").val();
 var input2 = $("#must_have").val();
    alert("Would submit: " + input1 + "&" + input2);
});
}); 
```

# visual-studio-2012 - 带有 C++/CLI 的 System::Threading 命名空间中缺少 ReaderWriterLockSlim

> ID：14749376
> 
> 赞同：1
> 
> 时间：2013-02-07T10:54:28.117
> 
> 标签：visual-studio-2012, c++-cli, readerwriterlockslim

我最近安装了 Visual Studio 2012 并尝试重新编译一个现有项目，该项目是一个混合模式 C++ 应用程序，带有一点 C++/cli 用于访问应用程序所需的 .net 程序集。

C++/CLI 实现的一部分使用 ReaderWriterLockSlim 类来保护从多个线程访问字典。

这一切都可以编译并与 VS2010 一起正常工作。然而，在升级到 VS0212 和 .Net 4.5 后，该项目现在无法编译，因为它在 System::Threading 命名空间中找不到 ReaderWriterLockSlim。

我相当确定安装很好，因为我可以创建一个新的 C# 项目并使用 ReaderWriterLockSlim 没有任何问题。

下面显示的新 C++ 项目也失败了。我在此处或 google 上都找不到对 C++/CLI 用户故意删除的此类的任何引用。有没有其他人有过类似的经历。

```
#include "stdafx.h"
using namespace System::Threading;

int _tmain(int argc, _TCHAR* argv[])
{
    ReaderWriterLockSlim^ rwlock = gcnew ReaderWriterLockSlim();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:10:03.213

当您遇到此类问题时，请务必注意该课程的[MSDN Library 文章](https://docs.microsoft.com/en-us/dotnet/api/system.threading.readerwriterlockslim?view=netframework-4.6)。在文章的顶部，它向您展示了使用该类所需的参考程序集：

> 程序集：System.Core（在 System.Core.dll 中）

C++/CLI 项目模板中默认不包含它。使用 Project + Properties、Common Properties、Framework 和 References 修复该问题。查看“参考”列表。单击 Add New Reference 按钮并从 Assemblies + Framework 列表中勾选 System.Core。

# javascript - 通过悬停另一个元素使元素可见（没有：hover-property）

> ID：14749378
> 
> 赞同：1
> 
> 时间：2013-02-07T10:54:33.457
> 
> 标签：javascript, jquery, css, hover, jquery-hover

好的，问题来了：

我有这三个 DIV：

```
<div id="gestaltung_cd"></div>
<div id="gestaltung_illu"></div>
<div id="gestaltung_klassisch"></div> 
```

…而这三个 DIV——它们是不可见的（显示：无；）——在页面上完全不同的位置：

```
<div id="mainhexa1"></div>
<div id="mainhexa2"></div>
<div id="mainhexa3"></div> 
```

我想做的是：如果我悬停“gestaltung_cd”，我想让“mainhexa1”可见，如果我悬停“gestaltung_illu”，我想让“mainhexa2”可见等等……</p>

如您所见，三个不可见的 DIV 不是前三个 DIV 的子元素......所以在这种情况下“：悬停”是不可能的。有没有一种简单的方法可以在 JQuery 中做到这一点？

谢谢，乔臣

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T10:58:52.500

您可以使用兄弟选择器。只要 div 共享同一个父级，您仍然可以通过悬停影响它们

[演示](http://jsfiddle.net/8LFWR/)

重要密码：

```
#gestaltung_cd:hover ~ #mainhexa1,
#gestaltung_illu:hover ~ #mainhexa2,
#gestaltung_klassisch:hover ~ #mainhexa3 {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:57:48.077

使用 jQuerys 悬停功能，如下所示：

```
$('#gestaltung_cd').hover(function() {
    $('#mainhexa1').toggle();
}); 
```

（如果您不想在模糊时隐藏 div，则将 toggle() 更改为 show()）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:57:19.110

使用 jQuery 的[悬停](http://api.jquery.com/hover/)功能：

```
var divs = {
   cd:        'mainhexa1',
   illu:      'mainhexa2',
   klassisch: 'mainhexa3'
};
$('[id^=gestaltung]').hover(function(){ // selects all elements whose id starts with gestaltung
   $('#'+divs[this.id.slice('gestaltung_'.length)]).toggle();
}); 
```

请注意，在 opener 和 opening 元素之间建立某种关系可能更容易，例如类或其他属性（如 nnnnnn 的答案）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:01:33.157

如果您将每个 div 块包装在一个容器中，您可以通过索引匹配它们，这将使代码无论有多少 div 都可以工作。像这样的东西：

```
<div class="gesaltung-container">
    <div id="gestaltung_cd">gestaltung_cd</div>
    <div id="gestaltung_illu">gestaltung_illu</div>
    <div id="gestaltung_klassisch">gestaltung_klassisch</div>
</div>
<div class="mainhexa-container">
    <div id="mainhexa1">mainhexa1</div>
    <div id="mainhexa2">mainhexa2</div>
    <div id="mainhexa3">mainhexa3</div>
</div> 
```

```
$('.gesaltung-container div').hover(
    function () {
        $('.mainhexa-container div').eq($(this).index()).show();
    },
    function () {
        $('.mainhexa-container div').eq($(this).index()).hide();
    }
); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/4tAZS/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:57:58.213

这是如何执行第一个示例的示例，您只需对具有相关 ID 的其他两个执行相同操作即可。

```
$("#gestaltung_cd").hover(
function () {
    $("#mainhexa1").show();
},
function () {
    $("#mainhexa1").hide();
}
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T10:58:05.520

```
$("#gestaltung_cd").hover(function({
    $("#mainhexa1").css({ "visibility": "visible" });
}, function() {
    //Your hover out function
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T10:58:42.027

我建议您在前三个 div 中添加一个属性，指定悬停时显示哪个 div：

```
<div id="gestaltung_cd" data-maindiv="mainhexa1"></div>
<div id="gestaltung_illu" data-maindiv="mainhexa2"></div>
<div id="gestaltung_klassisch" data-maindiv="mainhexa3"></div> 
```

这样，您只需使用以下方法即可处理悬停时的显示/隐藏[`.hover()`](http://api.jquery.com/hover/)：

```
$("div[data-maindiv]").hover(function() {
    $("#" + $(this).attr("data-maindiv") ).show();
},
function() {
    $("#" + $(this).attr("data-maindiv") ).hide();
}); 
```

演示：http: [//jsfiddle.net/GFFMR/](http://jsfiddle.net/GFMQR/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-07T11:02:16.823

只是为了记录...

您可以只使用 CSS 和 HTML（不使用 javascript）来实现您想要的效果，但您必须将元素放置在彼此跟随并`+`在 CSS 中使用选择器。就像是 ：

HTML

```
<div id="gestaltung_cd"></div>
<div id="mainhexa1"></div>
<div id="gestaltung_illu"></div>
<div id="mainhexa2"></div>
<div id="gestaltung_klassisch"></div>
<div id="mainhexa3"></div> 
```

CSS

```
div#gestaltung_cd:hover + div#mainhexa1 {
   display:block;
}
div#gestaltung_illu:hover + div#mainhexa2 {
   display:block;
}
div#gestaltung_klassisch:hover + div#mainhexa3 {
   display:block;
} 
```

您可以查看演示[http://tinkerbin.com/KP17XUgq](http://tinkerbin.com/KP17XUgq)

# python - 多个 raw_input 和搜索

> ID：14749379
> 
> 赞同：0
> 
> 时间：2013-02-07T10:54:33.540
> 
> 标签：python, python-2.7

因为*编程*是我最喜欢的爱好之一，所以我在 python 中开始了一个小项目。

我正在尝试为日常生活制作营养计算器，请参见下面的代码：

```
# Name: nutri.py 
# Author: pyn

my_dict = {'chicken':(40, 50, 10),
        'pork':(50, 30, 20)
         }

foods = raw_input("Enter your food: ")

#explode / split the user input

foods_list = foods.split(',')

#returns a list separated by comma

print foods_list 
```

我想做的事：

1.  获取用户输入并将其存储在变量中
2.  根据用户输入搜索字典，如果存在键/食物，则返回相关值
3.  将这些值以不同的营养块相加并返回，例如：您吃了 x 蛋白质、y 碳水化合物和 z 脂肪等。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:10:13.660

```
my_dict = {'chicken':(40, 50, 10),
        'beef':(50, 30, 20)
         }

foods = raw_input("Enter your food: ")

#explode / split the user input

foods_list = foods.split(',')

#returns a list separated by comma

#print foods_list

nuts = [0, 0, 0]

for food in foods_list :
    if food.strip() in my_dict: 
        i = 0
        for value in  my_dict[food.strip()]:
            nuts[i] += value        
            i += 1  
print nuts  

scripts$ python nutrition.py
Enter your food: chicken, pork, beef
[90, 80, 30]

some improvements ;) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:14:31.617

这段代码将完成您尝试做的所有必要的事情：

```
my_dict = {'chicken':(40, 50, 10),
        'pork':(50, 30, 20)
         }

foods = raw_input("Enter your food: ")

#explode / split the user input

foods_list = foods.split(',')

#returns a list separated by comma

t=[0,0,0]

print foods_list

for i in foods_list:
    if i.strip() in my_dict:
        v=my_dict.get(i.strip())
        t[0]=t[0]+v[0]
        t[1]=t[1]+v[1]
        t[2]=t[2]+v[2]

print t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:41:42.483

这是我的解决方案，它检查食物是否在字典中，如果没有，会说明。

```
my_dict = {'chicken':(40, 50, 10),
        'pork':(50, 30, 20)
         }

foods = raw_input("Enter your food: ")

foods_list = foods.split(',')

empty_list = []
for food in foods_list:
    if food in my_dict:
        empty_list.append(list(my_dict[food]))
    else:
        print '%s has no nutritional information and will not be included in the calculation' % food

values = [sum(x) for x in zip(*empty_list)]

print 'Total protein = %d, Total Carbs = %d, Total Fat = %d' % (values[0],values[1],values[2]) 
```

这输出：

```
Enter your food: chicken,pork,pizza
pizza has no nutritional information and will not be included in the calculation
Total protein = 90, Total Carbs = 80, Total Fat = 30 
```

# java - 我可以强制码头*不*包含用于单元测试的 Content-Length 标头吗？

> ID：14749386
> 
> 赞同：1
> 
> 时间：2013-02-07T10:54:48.497
> 
> 标签：java, http, junit, jetty, embedded-jetty

我在一些 JUnit 测试中使用了一个简单的嵌入式 Jetty 实例。

我想强制 Jetty 返回一个没有 Content-Length 标头的 HTTP 响应（正如我们在野外的某些请求上看到的那样）。

我目前实现`handle(...)`的`AbstractHandler`主要方式是捕获请求，然后，根据 URL 中的参数，Jetty 返回各种可能的响应，无论好坏。

`response.setHeader("Content-Length", null);`没用，它仍然根据我的正文数据返回有效的内容长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:09:03.097

创建一个[javax.servlet.Filter ，将](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)[HttpServletResponse](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponseWrapper.html)与您的实现包装起来，以防止设置`Content-Length`标头。

请务必在您的 HttpServletResponseWrapper 中实现以下方法。

*   [添加标头（字符串，字符串）](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponseWrapper.html#addHeader%28java.lang.String,%20java.lang.String%29)
*   [addIntHeader（字符串，整数）](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponseWrapper.html#addIntHeader%28java.lang.String,%20int%29)
*   [设置标头（字符串，字符串）](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponseWrapper.html#setHeader%28java.lang.String,%20java.lang.String%29)
*   [setIntHeader（字符串，整数）](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponseWrapper.html#setIntHeader%28java.lang.String,%20int%29)

每一个都可以是一段简单的代码，类似于...

```
@Override
public void addHeader(String name, String val)
{
    if ( "Content-Length".equalsIgnoreCase(name) ) 
    {
        // Ignore content-length from servlets
        return;
    }
    super.addHeader(name,val);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:01:17.670

如果您将一些字节或字符写入响应，然后刷新，然后将一些其他字节或字符写入响应，它将不得不使用分块传输类型并且无法设置内容长度，因为它被迫在不知道实际写入的长度的情况下发送字节。

# java - 如何在 Java 正则表达式中转义括号？

> ID：14749390
> 
> 赞同：0
> 
> 时间：2013-02-07T10:55:02.120
> 
> 标签：java, regex

我有一个这样的字符串：

> [1359873374000,281197568],[1360044062000,1206052864],[1360068648000,991623168]

如何像`[1359873374000,281197568]`使用正则表达式一样提取每个项目？

我已经编写了这段代码，但它不起作用：

```
String[] parts = mainstr.split("\\[[0-9],[0-9]\\]"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:57:02.817

你的正则表达式匹配`[1,2]`。您必须添加一个乘数：

```
"\\[[0-9]+,[0-9]+\\]" 
```

编辑：我认为`split()`不会做你想做的事。看看[Matcher 类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)。

Matcher 类的解决方案：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

String sourceString = "[1359873374000,281197568],[1360044062000,1206052864],[1360068648000,991623168]";

Pattern pattern = Pattern.compile("\\[[0-9]+,[0-9]+\\]");
Matcher matcher = pattern.matcher(sourceString);

while (matcher.find()) {
  System.out.print("Start index: " + matcher.start());
  System.out.print(" End index: " + matcher.end() + " ");
  System.out.println(matcher.group());
} 
```

这将为您提供每次出现的数字对。如果您想单独使用这些数字，您可以像这样捕获它们：`"\\[([0-9]+),([0-9]+)\\]"`. 不过，您将不得不扩展该示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:59:47.833

你应该**把**它分开

```
(?<=\\]),(?=\\[) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:03:13.880

`[0-9]`完全匹配一位数字。如果要匹配数字序列，请使用`[0-9]*`. 如果要匹配非空数字序列，请使用`[0-9]+`. 在您的情况下，您可能需要执行`"\\[[0-9]+,[0-9]+\\]"`, or，这是相同的，`"\\[\\d+,\\d+\\]"`因为`\d`在 Java 正则表达式中表示“数字”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:03:41.390

这并不完美，因为它丢失了一些括号，但至少数字是完整的并且正确分组：

```
String[] parts = mainstr.split("\\D,\\D"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T11:00:27.653

您可能想要拆分 '],['，而不是您正在搜索的整个模式。尝试这个：

```
String[] parts = mainstr.split("\\\\],\\\\["); // Never sure when to use double or quadruple slashes. 
```

之后，您可能需要更换支架。

# jsf - 警告：此页面调用 XML 命名空间 http://richfaces.org/rich 声明，前缀为rich，但该命名空间不存在标记库

> ID：14749391
> 
> 赞同：2
> 
> 时间：2013-02-07T10:55:03.000
> 
> 标签：jsf, richfaces

我的 Facelet 中有以下代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:form>
        <h:panelGrid columns="1">
            <rich:paint2D id="painter" width="300" height="120"
                data="#{paintData}" format="png" paint="#{paintBean.paint}" >
            </rich:paint2D>
            <h:panelGroup> 
                <h:outputText value="Change text color " />
                <rich:colorPicker colorMode="hex" value="#{paintData.color}">
                    <a4j:support event="onchange" reRender="painter"/>
                </rich:colorPicker>
            </h:panelGroup>
        </h:panelGrid>
    </h:form>
</html> 
```

我的`/lib`文件夹中有以下罐子：

1.  richfaces-api-3.3.3.Final.jar
2.  richfaces-ui-3.3.3.Final.jar
3.  richfaces-impl-3.3.3.Final.jar

在 UI 中，我收到以下消息：

> 警告：此页面调用 XML 命名空间[http://richfaces.org/rich](http://richfaces.org/rich)声明，前缀为rich，但该命名空间不存在标记库。

在控制台中，我得到了以下异常：

```
SEVERE: Error configuring application listener of class com.sun.faces.config.ConfigureListener
java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:33:10.680

```
java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener 
```

运行时类路径中缺少 JSF 实现本身。您似乎已经明确配置了

```
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener> 
```

在您`web.xml`没有安装[Mojarra](http://javaserverfaces.java.net)的情况下。

下载并安装 Mojarra。旧版本由文件组成，`jsf-api.jar`而`jsf-impl.jar`新版本（自 2.0.9/2.1.6 起）由单个`javax.faces.jar`文件组成。请注意，RichFaces 3.x 实现默认不兼容 JSF 2.x。您需要有一个 JSF 2.x 兼容的构建`richfaces-impl-jsf2-3.3.3.Final.jar`。另请参阅[有关该主题的 JBoss Wiki](https://community.jboss.org/wiki/RichFaces333AndJSF20)。

# c# - 在命令行中运行 C# 类

> ID：14749392
> 
> 赞同：0
> 
> 时间：2013-02-07T10:55:08.957
> 
> 标签：c#, encryption

我有一个加密/解密字符串的 C# 类。

有没有可能在命令行中运行它？

例如：

> 密码学加密“helo 世界”>> file.txt

我在 C# 方面不是很有经验，所以也许解决方案很简单，我没有意识到

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:00:43.393

这基本上是一个“控制台”应用程序；创建一个项目（或编辑您现有的项目），以便输出类型为“控制台应用程序”。然后添加一个`Main`入口点：

```
public static void Main(string[] args) {
   // TODO: your code here
} 
```

包含按顺序排列的`args`参数；`"encrypt"`, `"hello world"`. 通常通过/将您的输出写入*标准输出*- 或者如果您需要二进制输出，- 它会自动使用管道，例如. 对于额外的功劳，将返回类型更改为以返回exe的*错误级别。*`Console.Out``Console.Write``Console.WriteLine``Console.OpenStandardOutput()``>>``Main``int`

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T11:16:37.333

创建一个控制台应用程序并检查命令行参数

例如：

```
static void Main(string[] args){
    if (args.Length == 2)
    {
        if (args[0] == "encrypt")
        {
            Console.WriteLine(encrypt(args[1]));
        } else if(args[0] == "decrypt"){
            Console.WriteLine(decrypt(args[1]));
        }
    }
} 
```*

# apache - apache 是否在.htaccess 中缓存重写规则？

> ID：14749396
> 
> 赞同：3
> 
> 时间：2013-02-07T10:55:31.707
> 
> 标签：apache, mod-rewrite

参考这个：[Apache 缓存 .htaccess 规则吗？即使在我删除文件后重定向仍然存在](https://stackoverflow.com/questions/14241564/does-apache-cache-htaccess-rules-redirections-exist-even-after-i-delete-the-fi)

我打算在那里添加评论，但或出于某种原因我不能。

我有着同样的问题。当我在我的 .htaccess 中更改重写规则时，旧的规则仍然适用 - 奇怪的是，对于放置规则时已经存在的一个文件，但不是后来添加的任何文件。

当我删除 .htaccess 文件时，一切都会重置（即根据全局设置禁用索引）。当我再次添加相同的 .htaccess 文件时，它没有正确应用。索引已恢复，但重写规则仍然错误。

我还注意到一些奇怪的重写规则似乎是我**没有添加**的，例如我的文件“colors_none.css”被重定向到“colors_note.css”。

我在**托管环境**中，无法访问 httpd-conf 或重新启动 apache。

有没有办法刷新这些设置？

浏览器缓存不是问题。当我从不同的机器、不同的浏览器调用我的页面时，也会发生同样的错误行为，而这些浏览器之前没有调用过这个页面。

# currency - 钱是如何处理/存储在网络应用程序中的

> ID：14749398
> 
> 赞同：3
> 
> 时间：2013-02-07T10:55:42.967
> 
> 标签：currency, banking

如果一个应用程序要以形式接受货币存款以换取可用于服务的信用，那么资金是如何存储、存入和提取的。

IE。在 adwords 中，您将 10 美元存入您的帐户，然后您显示 10 美元的信用。但这 10 美元纯粹代表你的钱，它只是数据库中的一个值。

实际的后端系统喜欢处理这个问题？IE。实际持有的资金在哪里，网络应用程序如何控制实际资金，在提款等情况下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T13:07:56.700

世界上几乎所有的钱都是“纯粹代表你的钱，它只是数据库中的一个值”！货币的下一部分是纸币，它在某种意义上是真实的，因为它是有形的，但如果支持纸币的政府破产，它随时可能变得一文不值。之后是黄金等实物，但这是非常不切实际的。

所以基本上我要说的是处理金钱的网络应用程序只是在数据库中有值！正确编写的代码会非常小心地测试和验证处理“金钱”的代码，当然还会使用像 hoang 这样的数据库事务，以避免在系统中重复金钱或损失金钱。

我希望这个答案能让你对现代世界的金钱处理方式不太满意：P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:09:05.147

从评论中，您的意思是您对网络应用程序如何与银行进行交易（银行拥有“真钱”，而不仅仅是数据库数字）感兴趣。

发生的情况是，每个 Web 应用程序都可以通过 API 与特定的银行机构（例如本地银行、PayPal 等）进行通信。然后，网络应用程序可以使用它来订购要发送的资金，并在资金进入时收到通知。具体细节因银行机构而异。

例如，您可以在此处找到有关 OFX（开放金融交易所）的更多信息： [http ://wiki.gnucash.org/wiki/OFX_Direct_Connect_Bank_Settings](http://wiki.gnucash.org/wiki/OFX_Direct_Connect_Bank_Settings)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T08:52:19.247

来自[Stackoverflow 赏金系统](https://meta.stackexchange.com/questions/16065/how-does-the-bounty-system-work)

*您必须至少有 75 声望才能开始赏金，并且声望至少与赏金金额一样高。*

*赏金奖励将在赏金开始时从您的声望中扣除，而不是在授予时*

> 在肤浅的交易平台上用金钱代替声誉

您必须至少有**75 美元**才能开始购买，并且至少与要价一样多。

交易开始时会从您的账户中扣除要价金额，而不是在授予交易时

让我们围绕我们的表面交易平台添加一些流程

*   您的帐户已映射到您的 VISA 信用卡，费用将自动处理。
*   交易完成后，货物将被发送到您的收货地址，您可以在一周内发货。

这是网络应用程序如何处理金钱的简单表示:)。它们仍然是映射到一些实际工作流程和规则并与您的银行集成的数字/交易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:46:56.863

它归结为一个可以信任的安全令牌，我可以开出一张金额的支票并将其发送给你，你去银行并获得兑现/支付一张支票可以“写”（我使用这个术语松散，因为它也可以是条形码或加密代码）以任何方式（子弹壳已被使用并受到尊重）所以它实际上只是一个承诺“我承诺支付持票人”

# php - 使用 Ajax 刷新 php 页面中的所有 div

> ID：14749399
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:55:46.430
> 
> 标签：php, html, refresh

我有一个包含 9 个不同 div 的 php 页面，这些 div 在每次从 mysql 数据库重新加载页面后都会更新。我想在不刷新整个页面的情况下自动完成。可能吗？我知道这可以通过 Ajax 完成，但我不明白我是如何做到的。任何人都可以让我知道这方面的好教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:09:12.797

使用 jQuery 有一个简单而有效的方法：

概述：在您将 ajax 调用定向到的脚本上，让它查询数据库并在 div 标签中回显您要替换的更新的 HTML，然后就像在匿名函数中用返回的 html 替换 div html 一样简单函数里面成功参数：

Javascript 文件中的 Ajax 调用

```
//wrap up your data in a GET style string seperated by ampersands (&)
var dataString = foo=1234&bar=12345

$.ajax({
  type: "POST",
  url: ajax.php,
  data: dataString,
  success: function(html) {
    $("#refresh_div").html(html);
},
  dataType: dataType
}); 
```

然后在您的“ajax.php”中，您可以通过 $_POST 超全局变量访问刚刚发送到 PHP 脚本的变量

```
$foo = $_POST['foo'];
$bar = $_POST['bar']

$mysqli= new mysqli($params);
$stmt = $mysqli->prepare("SELECT * FROM myTable WHERE id=?");
$stmt->bind_param('i',$foo);
$stmt->execute();
$stmt->bind_result($result);
$stmt->fetch();
$stmt->close();

echo $result 
```

所有回显的文本/html 都将作为 html var 传递回 ajax 成功参数，然后您可以用 jquery 替换 div 内容。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:04:40.307

如果我正确理解你的问题

```
window.setInterval(function(){
  // call your function here
  // make tha ajax call here to update the divs
  // this function will run every 5 secs and will make the AJAX call
  // write the function here to update the divs
}, 5000); 
```

参见下文

[使用 PHP 的 jQuery Ajax POST 示例](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)

[更新 Ajax 请求的整个页面](https://stackoverflow.com/questions/5941933/update-whole-page-on-ajax-request)

[带有 id 的 div 上的 Ajax 更新](https://stackoverflow.com/questions/11815596/ajax-update-on-div-with-a-id)

如果您不想不断更新页面，只需进行更新 div 的 AJAX 调用。

# sql - Android SQLite 和类中的对象

> ID：14749403
> 
> 赞同：0
> 
> 时间：2013-02-07T10:55:58.767
> 
> 标签：sql, sqlite, orm, relational-database

这个问题已经被问过了，但我找不到类似的问题。

我必须上课：

```
public class Categorie {

// Attributs
private int identifiant;
private String libelle;

...
} 
```

和

```
public class Restaurant {

// Attributs
private int identifiant;
private String nom;
private String description;
private List<Categorie> lesCategories;

...
} 
```

但是对于**SQLite**，我不知道你如何使用 " `lesCategories`"..

我用法语阅读[了本教程：](http://www.ace-art.fr/wordpress/2011/10/08/tutoriel-android-partie-16-base-de-donnees/)

在 SQLite 中，该对象`type`不存在.. 只有`String, Integer, Real, Blob.`

**更明确地说：我的光标有问题，它在这里 --> “????”：**
因为，它不是 String 或 Int，而是对象..

`public Restaurant ConvertCursorToObject(Cursor c) { Restaurant restaurant= new Restaurant ( c.getInt(EnseigneOpenHelper.NUM_RES_ID), c.getString(EnseigneOpenHelper.NUM_RES_NOM), c.getString(EnseigneOpenHelper.NUM_RES_DESCRIPtion), ????
); return restaurant; }`

/** * 转换 Restaurant 中的光标 */

`public Restaurant ConvertCursorToOneObject(Cursor c) { c.moveToFirst(); Restaurant restaurant = ConvertCursorToObject(c); c.close(); return restaurant ; }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:16:04.223

我假设您（不是）要问的问题是：如何将这两个类中包含的信息保存到关系数据库中。

您不能将对象保存在 SQL 数据库中（除非作为 BLOB），而且无论如何，这不是您应该在这里做的。您需要**标准化**您的数据。

您在这里需要的是三个表：

1.  第一个表，称为`Categorie`;
2.  第二个表称为`Restaurant`;
3.  第三张桌子叫做`RestaurantCategorie`;

第三个表将仅包含两个字段：`categorie_id`和`restaurant_id`。每行将列出餐厅和类别的有效组合。该表将包含对应于属性的值`lesCategories`。

以下是相关 SQL 的示例：

```
CREATE TABLE Categorie
( categorie_id  INTEGER PRIMARY KEY
, libelle       TEXT    NOT NULL
);

CREATE TABLE Restaurant
( restaurant_id INTEGER PRIMARY KEY
, nom           TEXT    NOT NULL
, description   TEXT
);

CREATE TABLE RestaurantCategorie
( restaurant_id INTEGER NOT NULL    REFERENCES Restaurant
, categorie_id  INTEGER NOT NULL    REFERENCES Categorie
, PRIMARY KEY (restaurant_id, categorie_id)
); 
```

如果您想了解原因，您应该阅读关系数据库设计、数据建模的主题，尤其是：[数据库规范化](http://fr.wikipedia.org/wiki/Forme_normale_%28bases_de_donn%C3%A9es_relationnelles%29)（最值得注意[的是示例](http://fr.wikipedia.org/wiki/Forme_normale_%28bases_de_donn%C3%A9es_relationnelles%29#Exemple_de_normalisation)）。

你在 StackOverflow 上找不到这个的原因可能是因为这是使用 SQL 数据库时非常基本的东西。

# objective-c - UIScrollView：错误的滚动位置

> ID：14749404
> 
> 赞同：0
> 
> 时间：2013-02-07T10:56:08.213
> 
> 标签：objective-c, uiscrollview

我通过单击一些 UIButton 来更改 UIView 的内容。（按钮和 UIView 包含在同一个 UIScrollView 中）

例如：

案例 1：我添加内容并提高 View 和 ScrollView 的高度。

案例 2：我删除内容并降低 View 和 ScrollView 的高度。

在这两种情况下，我都设置了滚动位置：

```
[newsScrollView setContentOffset:CGPointMake(0,240) animated:YES]; 
```

在案例 1 中，它运行良好，并且 ScrollView 显示了正确的内容，但在案例 2 中，它在 ScrollView 的底部滚动。

有人知道错误在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:54:02.967

看起来错误是基于 iOS 版本的。

它适用于：

*   模拟器 6.0
*   装有 iOS 6.0.1 的 iPhone 4 gs

并失败：

*   模拟器 5.1
*   模拟器 5.0
*   iPhone 3 宽度 5.1.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:35:10.220

你的滚动视图正在做你告诉它做的事情。您需要确保`contentSize`正确设置 UIScrollView 以反映其中的内容量，如果您要删除和添加内容，这可能会有所不同。

如果您将偏移量设置为 (0, 240)，并且它正在滚动到底部，这可能是因为您的偏移量`contentSize`小于 240。

# c# - 当页面已经绑定到另一个类时，如何在 PhoneApplicationPage.Resources 上绑定 DataTemplate？

> ID：14749406
> 
> 赞同：0
> 
> 时间：2013-02-07T10:56:09.237
> 
> 标签：c#, xaml, data-binding, windows-phone-8

我已经根据反馈编辑了问题以包含更多信息。

在我的 SettingsPage.xaml 我有

```
 <toolkit:ListPicker x:Name="lpkCountry" 
ItemTemplate="{Binding Source={StaticResource lpkItemTemplate}}" 
FullModeItemTemplate="{Binding Source={StaticResource lpkFullItemTemplate}}" 
Header="your country" CacheMode="BitmapCache" 
HorizontalAlignment="Left" VerticalAlignment="Top" Width="280" Height="82" /> 
```

我正在尝试将 ListPicker DataTemplate 绑定到放置在 App.xaml 页面中的以下 XAML

```
<Application.Resources>
    <DataTemplate x:Name="lpkItemTemplate">
        <TextBlock Text="{Binding Country}" />
    </DataTemplate>
    <DataTemplate x:Name="lpkFullItemTemplate">
        <TextBlock Margin="16 0 0 0" Text="{Binding Country}" />
    </DataTemplate>
 </Application.Resources> 
```

SettingsPage.xaml.cs 将 Country 定义为公共静态字符串数组：

```
namespace myspace
{
    public partial class SettingsPage : PhoneApplicationPage
    {
        public static String[] Country = {
                            "Afghanistan",
                            "Åland Islands",
                            "Albania",
                            "Algeria",
                            "American Samoa",
                            "Andorra",
                            "Angola"}
                            ......; 
```

同样在 SettingsPage.xaml.cs 上，我已将 datacontext 定义为另一个对象。

```
 public SettingsPage()
    {
        InitializeComponent();
         this.lpkCountry.SelectionChanged += new  SelectionChangedEventHandler(lpkCountry_SelectionChanged);
        this.lpkCountry.ItemsSource = Country;
        settings = new AppSettings();
        this.DataContext = settings;
    } 
```

但是在运行时，当我转到 SettingsPage 时，我会遇到很多此类错误

System.Windows.Data 错误：BindingExpression 路径错误：在“阿富汗”“System.String”上找不到“Country”属性（HashCode=-2039466552）。BindingExpression: Path='Country' DataItem='Afghanistan' (HashCode=-2039466552); 目标元素是'System.Windows.Controls.TextBlock'（名称=''）；目标属性是“文本”（类型“System.String”）..

我知道目标元素和目标属性之间存在冲突，那么如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:52:08.913

一个明显的错误是`RelativeSource={RelativeSource Self}`。这意味着您尝试绑定到同一个对象，例如 TextBox 或 ListPicker。在这种情况下，运行时是绝对正确的：`'lpkItemTemplate' property not found on 'Microsoft.Phone.Controls.ListPicker'`

`Source={StaticResource lpkItemTemplate}`如果您在 App.xaml 中的某处定义数据模板，我想类似的东西会有所帮助`<Application.Resources>`。

**编辑：**添加更多代码后。您的项目源是一个字符串数组，因此在数据模板中您应该使用以下绑定：

```
<TextBox Text={Binding} /> 
```

# random - 使用随机数删除文件的随机行。Fortran90

> ID：14749407
> 
> 赞同：1
> 
> 时间：2013-02-07T10:56:16.600
> 
> 标签：random, fortran90, delete-row

我一直在努力解决一个问题，所以如果有人可以提供任何建议或示例，我将不胜感激。使用 Fortran90。

**计划目的：**

以我选择的数量从文件中删除随机行。我能想到的最好方法是使用随机数来对应行号。

**它目前的作用：**

每次生成新的随机数并将它们输出到单独的文件中。

**问题：**

(1) 它不会生成可能对应于行号的整数。(2) 我不知道如何使用这些数字从文件中删除行。

```
program random1
implicit none
integer :: i, seed, removed
real :: r
open (unit=10,file='random.dat')
removed=5

call init_random_seed() 
do i=1,removed
call random_number(r)
write(10,*) r
end Do

end program random1

subroutine init_random_seed()
        integer :: i,n,clock
        integer, dimension(:),allocatable :: seed

        call random_seed(size=n)
        allocate(seed(n))

        call system_clock(count=clock)

        seed=clock+37*(/(i-1,i=1,n)/)
        call random_seed(put=seed)

        deallocate(seed)
end subroutine 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:18:58.083

这是答案的一些片段。首先是一些声明

```
integer :: num_lines ! number of lines in file
integer :: ix        ! loop index variable
real :: fraction     ! what fraction of lines are to be deleted
logical, dimension(:), allocatable :: lines_index
real, dimension(:), allocatable :: rands 
```

现在一些可执行文件

```
read(*,*) num_lines  ! or figure it out some other way
read(*,*) fraction   ! likewise 

allocate(rands(num_lines)) ! no error checking
call random_number(rands)
allocate(lines_index(num_lines), source=rands<fraction)      ! no error checking 
```

现在哪里`lines_index(ix)`是假的，您可以删除`ix`文件的行。至于实际从文件中删除行，我建议您逐行读取文件，并且只将那些不被删除的行写到另一个文件中。像这样的东西可能会起作用

```
do ix = 1, num_lines
    read(infile,*) aline
    if(lines_index(ix)) write(outfile,*) aline
end do 
```

请注意，我采用的方法并不能保证 20%（或任何您设置`fraction`的）行将被删除，只能保证最有可能被删除的行数。如果您想保证`n`将删除行，请执行以下操作

```
integer :: num_lines ! number of lines in file
integer :: ix, jx    ! loop index variables
integer :: n         ! number of lines to delete
integer, dimension(:), allocatable :: lines_index    ! line numbers for deletion
real :: rand

read(*,*) n

allocate(del_ix(n))         

do ix = 1,n
    call random_number(rand)
    lines_index(ix) = 1.0+num_lines*rand   ! lines_index(ix) will be between 1 and num_lines
end do 
```

这种方法不能保证同一行不会被多次选择删除，您必须编写一些代码来处理这种情况。然后继续：

```
do ix = 1, num_lines
    read(infile,*) aline
    if(any(lines_index==ix)) then
        ! do not write the line
    else
        write(outfile,*) aline
    end if
end do 
```

# joomla - JCE 在 Joomla 1.5 上缺少工具栏

> ID：14749409
> 
> 赞同：1
> 
> 时间：2013-02-07T10:56:23.160
> 
> 标签：joomla, toolbar, joomla-content-editor

我不知道发生了什么，但是 JCE 的工具栏是隐藏的。如何再次启用/显示它？

这是一个屏幕截图：

![在此处输入图像描述](../Images/7f2377a3eebe3b5280b2f8f991ea96b3.png)

我下载了 JCE 插件，安装了它，启用了，但我仍然看不到编辑器的工具栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:14:47.970

如果启用 JCE 并将其选为默认编辑器，则转到站点 > 用户管理器并编辑您登录的用户。选择 JCE 作为该用户的编辑器。出于安全原因，实际上建议使用“无编辑器”作为全局设置中的默认选项，并在用户级别将其覆盖到 JCE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:29:34.297

要启用它，请转到插件检查是否启用了 JCE 插件，如果没有，请启用它并检查。

如果仍然没有显示编辑器，则转到全局配置-> 默认选择 JCE

# time - 如何找到http请求的最后一个字节到达Web服务器的时间

> ID：14749414
> 
> 赞同：0
> 
> 时间：2013-02-07T10:56:30.853
> 
> 标签：time, byte, navigation-timing-api

我想找到使用 Java 到达 Web 服务器的 Http 请求的最后一个（最后一个）字节的时间。我已经使用带有一些预定义属性的导航计时 API 使用 JavaScript 进行了尝试。

但我希望它使用 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T02:51:57.283

你为什么不尝试使用 Java 中的套接字来获取你的对象。并逐字节读取输入流。通过这种方式，您可以捕捉到最后一个字节的粗略时间。

# python - 使用变量进行切片时如何使用单冒号？

> ID：14749415
> 
> 赞同：3
> 
> 时间：2013-02-07T10:56:32.257
> 
> 标签：python, slice

我想使用一个变量来存储切片表达式。这是我尝试的：

```
 if variable is not None:
        var = variable
    elif self.__filter is not None:
        var = self.__filter
    else:
        # this doesn't work, : alone understandably gives a syntax error
        var = ':' 
```

然后在这里使用 var：

```
return stuff[var] 
```

我想这样做是为了在我的代码中获得更好的结构。另一种方法是根据大小写返回此表达式：

```
return stuff[variable]
return stuff[self.__filter]
return stuff[:] 
```

引发异常：`ValueError: invalid literal for int() with base 10`

有没有办法将冒号分配给 var 以便它可以在切片表达式中使用（转义或类似的东西），还是我必须使用它`var = slice(0, self.getNumberOfVariables())`？

PS：我在问之前搜索过，但没有找到类似的东西。对不起，如果我错过了重复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T11:29:46.153

不能直接使用冒号。它是操作的文字符号；Python 通常不允许直接使用这种标点符号，而是需要使用函数（参见算术运算符和`operator`模块中的相应函数）。

要使用的函数是内置函数`slice`，它返回切片的显式表示。用于`slice(None)`包含所有内容。

一个例子：

```
>>> s = slice(None)
>>> x = range(10)
>>> x[s]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-04T09:40:53.000

这是一篇旧帖子，但它只是作为谷歌的最高结果弹出，所以我想我会回答它以帮助其他人。

切片中的冒号`:`只是 . 之间的分隔符`[start:stop:step]`。通常没有明确写出的是,或`None`之一保留其默认值。`start``stop``step`

这在示例中更容易看到：

```
# Slice with all parameters specified
# start:1, stop:4, step:1    
seq[1:4:1]

# Slice with default step value (default=1)
# start:1, stop:4, step:1
# All the following are equivalent    
seq[1:4:None]
seq[1:4:]
seq[1:4]

# Slice with default stop value (default = len(seq))
# start:1, stop:len(seq), step:1
# All the following are equivalent    
seq[1:None:1]
seq[1::1]

# Slice with default step and stop value
# start:1, stop:len(seq), step:1
# All the following are equivalent    
seq[1:None:None]
seq[1::]
seq[1:]

# Slice with default start value
# start:1, stop:4, step:1
# All the following are equivalent    
seq[None:4:1]
seq[:4:1]

# Slice with all default values
# start:1, stop:len(seq), step:1
# All the following are equivalent    
seq[None:None:None]
seq[::]
seq[:] 
```

所以要回答你的问题，`:`在切片变量中使用是没有意义的，因为你要求使用分隔符。虽然这很令人困惑，因为您不必`None`在直接创建切片时显式声明，所以这使得它`:`看起来像一个运算符。

TLDR；使用`slice`类型时，必须显式声明`None`. 所以`seq[slice(None, None, None)]`等价于`seq[::]`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T11:15:24.353

表达式`stuff[var]`不变地固定了某事的可能性，可以使用单个变量来表达。您必须考虑如何解释事物。首先解析代码。此时得到固定使用哪种语法。 `start:stop:step`是一个表达式，编译器接受为一个切片。这种情况的一个特例是`:`。其他可能性是标量、列表和切片对象。单个对象。

在 getter 中使用 var，我只能将 var 设置为列表、标量或切片对象。当试图将冒号语法的东西分配给 var 时，我只得到一个字符串文字，而字符串文字不会被 getter/setter 方法解析。您根本无法通过为变量分配一些值来更改语法。

# map - 使用 Cocos2d-x + Marmalade 制作类似 Candy Crush 的地图

> ID：14749416
> 
> 赞同：11
> 
> 时间：2013-02-07T10:56:32.497
> 
> 标签：map, cocos2d-x, marmalade, candy

我使用 Cocos2d-x 和 Marmalade 开发了一个 2D 游戏。

我想知道什么是“更好的解决方案”，考虑到性能、内存等，在玩游戏之前创建一个场景，我可以向用户展示一个类似于 Candy Crush Game 中使用的地图，然后：

*   动物园
*   可滚动的
*   预定义坐标等处的可点击按钮（级别）
*   角色在按钮之间移动（级别）

提前谢谢了

塞尔吉奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T10:33:23.647

看看椰子。他们`MissionSelect`在教程中有。的用法`ScrollView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T10:53:27.873

您可以使用**CCLayerPanZoom**作为父级并添加菜单项、字符等作为子级。

检查此链接：[CCLayerPanZoom 演示视频](http://www.youtube.com/watch?v=c6rkugd-5nU)

并且，您可以从这里下载源文件[CCLayerPanZoom Cpp 文件](http://www.cocos2d-x.org/attachments/1305/CCLayerPanZoom.cpp)和[CCLayerPanZoom 头文件](http://www.cocos2d-x.org/attachments/1306/CCLayerPanZoom.h)。

# django - 如何使用 Django 测试客户端指定 IP 地址？

> ID：14749418
> 
> 赞同：18
> 
> 时间：2013-02-07T10:56:34.253
> 
> 标签：django

我正在使用 Django 测试客户端测试 API。API 使用地理阻塞，所以在我的测试中我需要指定一个 IP 地址以确保它正常工作。我怎样才能做到这一点？

我在我的测试中提出这样的请求：

```
from django.test.client import Client as HttpClient
.
.
.
client = HttpClient()
response = client.get(uri + query_string) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-07T11:05:02.340

该[`Client.get()`](https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.Client.get)方法有一个`extra`关键字 arguments 参数，可用于指定标头。

```
c.get(/my-url/, REMOTE_ADDR="127.0.0.1") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-07T11:02:57.663

在构造函数中传递 REMOTE_ADDR。

```
client = HttpClient(REMOTE_ADDR='127.0.0.1') 
```

或者

```
client.get('/path/', {'param':'foo'}, **{'HTTP_USER_AGENT':'firefox-22', 'REMOTE_ADDR':'127.0.0.1'}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-23T10:27:50.930

您还可以为所有未来的请求设置它：

```
client.defaults['REMOTE_ADDR'] = '1.2.3.4' 
```

还有子类化：

```
class DecoratedApiClient(Client):
    def set_ip_addr(self, ip_addr):
        self.defaults['REMOTE_ADDR'] = ip_addr

client = DecoratedApiClient()
client.set_ip_addr('1.2.3.4') 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-07T11:08:32.280

像这样简单：

```
client_address = request.META.get('HTTP_X_FORWARDED_FOR') or request.META.get('REMOTE_ADDR') 
```

# matlab - 为非参数图像查找多个椭圆

> ID：14749424
> 
> 赞同：3
> 
> 时间：2013-02-07T10:56:46.170
> 
> 标签：matlab, image-processing, ellipse

![](../Images/4fc7c16a1ddf96737ca939be9a90dcdd.png)

如图所示，我需要在黑色显示的数据中找到多个椭圆（红色，手动制作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:06:36.877

这是计算机视觉问题，我建议你使用openCV并玩一下图像。Canny 会为您找到优势。或者你可以用 som 分水岭算法填充整个图像，这样就会有不同的区域，小的可能是椭圆。

# smb - 如何使用 JCIFS 将文件从 SMB 共享复制到不在域中的本地驱动器

> ID：14749434
> 
> 赞同：4
> 
> 时间：2013-02-07T10:57:03.160
> 
> 标签：smb, jcifs

我正在尝试使用 JCIFS 将一些远程文件复制到 Java 中的本地驱动器。远程计算机位于域内。本地计算机*不在*域中。

以下代码有效，但速度*很*慢（700Kb 需要 2 分钟...而且我有很多 Mb...）：

```
SmbFile remoteFile = new SmbFile("smb://...")
OutputStream os = new FileOutputStream("/path/to/local/file");
InputStream is = remoteFile.getInputStream();
int ch;
while ((ch = is.read()) != -1) {
    os.write(ch);
}
os.close();
is.close(); 
```

我想我可以使用 SmbFile.copyTo()，但我不知道如何访问本地文件。如果我编写以下内容，则会出现连接错误：

```
localfile = new SmbFile("file:///path/to/localfile") 
```

这个问题与[如何在 Java 中使用 jcifs 将文件从 smb 共享复制到本地驱动器有关？](https://stackoverflow.com/questions/13359164/how-to-copy-file-from-smb-share-to-local-drive-using-jcifs-in-java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-11T06:46:50.807

您只需要制作更大的缓冲区：

```
SmbFile remoteFile = new SmbFile("smb://...")
try(OutputStream os = new FileOutputStream("/path/to/local/file")){
try(InputStream is = remoteFile.getInputStream())
{
    int bufferSize = 5096;

    byte[] b = new byte[bufferSize];
    int noOfBytes = 0;
    while ((noOfBytes = is.read(b)) != -1) {
        os.write(b, 0, noOfBytes);
    }
}} 
```

这里我使用提到的代码对文件 23 Mb 进行了一些测试。

bufferSize = 1024 经过时间：10.9587606066 秒

bufferSize = 4096 经过时间：5.6239662951 秒

bufferSize = 5096 经过时间：5.0798761245 秒

bufferSize = 5096 经过时间：4.879439883 秒

bufferSize = 10240 经过时间：4.0192989201 秒

bufferSize = 50240 经过时间：3.8876541543 秒

bufferSize = 100240 经过时间：3.742167582 秒

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T21:26:15.187

*除非*使用有效的**smb** URL ，否则无法构造 SmbFile 对象。[请参阅http://jcifs.samba.org/src/docs/api/](http://jcifs.samba.org/src/docs/api/)上的构造函数摘要，以及顶部有关 SmbFile URL 的讨论。

> SmbFile URL 具有以下语法：smb://[[[domain;]username[:password]@]server[:port]/[[share/[dir/]file]]][?[param=value[param2 =值2[...]]]

所以，如果你真的想避免使用输入流并使用 copyTo()，你必须在你的本地机器上有一个 SMB 共享，你可以将 jCIFS 指向。

如果您的本地计算机是 Windows 计算机，则您可能可以访问一些默认共享，例如 C$。

因此，您可以执行以下操作：

```
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("domain", "username", "password") //or whatever authentication works on your local machine.
SmbFile myFile = new SmbFile("smb://localhost/C\$/path/to/localfile", auth) 
```

然后你可以使用`remoteFile.copyTo(myFile)`.

如果您不在 Windows 主机上，则必须安装 Samba 并设置 Samba 共享以连接到您的本地计算机上……再次，如果您绝对一心要避免使用 inputStreams。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-05T17:39:07.430

作为@maxmimko 答案的替代方案，您还可以使用 Apache Commons IO 库，并用于`IOUtils`为您处理复制：

```
NtlmPasswordAuthentication creds = new NtlmPasswordAuthentication("domain", "user", "password");
SmbFile remoteFile = new SmbFile("smb://REMOTEHOST/SHARE/path/to/file", creds);
try (
    InputStream is = remoteFile.getInputStream();
    OutputStream os = new FileOutputStream("/path/to/local/file");
) {
    long bytesCopied = IOUtils.copyLarge(is, os);
} catch (IOException e) {
    // handle exception here; log it?
}
// streams are automatically closed by try-with-resources block 
```

还有`IOUtils.copyLarge(InputStream is, OutputStream os, byte[] buffer)`，如果你想控制缓冲区大小，但我发现使用的默认值`IOUtils`是相对较好的。

# objective-c - 目标 C - 图像尺寸更大

> ID：14749436
> 
> 赞同：1
> 
> 时间：2013-02-07T10:57:08.080
> 
> 标签：objective-c, image, png, jpeg

我正在从 Java 迁移到 Objective C，用于 Mac 应用程序。这是一个屏幕共享应用程序。

经过分析，我发现使用 Objective C 创建的图像的大小大于使用 Java 创建的图像。我打算将 JPEG 用于桌面和其他图像窗口，将 8 位 PNG 用于浏览器/资源管理器窗口。对于这两种格式，Java 更好（即图像尺寸更小）。

例如：当我创建一个压缩系数为 0.6 的 JPEG 图像时，使用 Java 创建的图像大小为 103KB。同样的图像，当使用 Objective C 创建时，它是 201KB。

有没有办法优化图像大小，使使用 Objective C 创建的图像与使用 Java 创建的图像相同或更小？

使用的目标 C 代码

```
NSSize imageSize = [image size]; [image lockFocus]; NSRect imageRect =
NSMakeRect(0, 0, imageSize.width, imageSize.height); NSBitmapImageRep*
myBitmapImageRep = [[NSBitmapImageRep alloc]
initWithFocusedViewRect:imageRect]; [image unlockFocus]; NSDictionary*
options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithDouble:imageCompression], NSImageCompressionFactor,
                                 [NSNumber numberWithBool:NO], NSImageProgressive,
                                 nil]; NSData* imageData = [myBitmapImageRep representationUsingType:fileType
properties:options]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:45:35.353

您确定两个环境之间的压缩因子（又名质量因子）比例相同吗？例如，使用`UIImageJPEGRepresentation`(iOS API) 的`compressionQuality`参数`0.75`给出的品质因数为`93`.

如果我是你，我会首先检查两个图像的质量因子是否相同，例如使用 ImageMagick：

```
identify -format "%Q" myimage.jpg 
```

如果两个图像的质量因素相同，您需要检查哪些 JPEG 编码选项不同 - ImageMagick 再次`identify`是您的朋友。

# jenkins - 我在 jenkins 中创建了一个后期构建插件，但 config.jelly 中关于文本框的条目没有反映在我的插件 UI 中

> ID：14749442
> 
> 赞同：1
> 
> 时间：2013-02-07T10:57:27.060
> 
> 标签：jenkins, jenkins-plugins

我在 jenkins 中创建了一个后期构建插件，但 config.jelly 中有关文本框的条目没有反映在我的插件 UI 中。但是当将此插件的代码更改为构建任务插件时，文本字段现在显示在 UI 上，事实上现在我可以在运行时验证文本框中的条目。任何想法为什么会发生这种情况..请指导

# android - 使用简单框架解析法语文本不起作用

> ID：14749449
> 
> 赞同：0
> 
> 时间：2013-02-07T10:57:38.207
> 
> 标签：android, character-encoding, xml-parsing, xml-serialization, simple-framework

我正在使用 simpleFramework 来解析我的 android 应用程序中的 xml 文件。我的问题是解析法语文本，比如让我们说这个标签

```
<TagName>écrite</TagName> 
```

解析时我将收到的结果类似于“écrite” 这是 simpleFramework xml 中的编码（法语）问题。如何避免这种情况并让我的文字“écrite”

xml 标头具有 utf8 ：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:22:03.997

我之前在使用 SAX 解析器时遇到过这个问题。使用 Java 读取文件时，`InputStream`您需要在代码中指定流的编码 - 也许通过读取文件的第一行，如您所示。这是分配编码的代码；

```
SAXParserFactory saxParserFactory = SAXParserFactory.newInstance();     
final SAXParser saxParser = saxParserFactory.newSAXParser();
// Note the encoding on the reader...
final Reader reader = new InputStreamReader(<your file stream>, "UTF-8");       
final InputSource inputSource = new InputSource(reader);        
inputSource.setEncoding("UTF-8");
saxParser.parse(inputSource, <some handler>); 
```

希望有帮助。如果没有，请返回您阅读 XML 文件的方式。

# postgresql - postgresql中的移动平均线

> ID：14749450
> 
> 赞同：30
> 
> 时间：2013-02-07T10:57:37.857
> 
> 标签：postgresql, math, average, postgresql-9.1, moving-average

我的 Postgresql 9.1 数据库中有下表：

```
select * from ro;
date       |  shop_id | amount 
-----------+----------+--------
2013-02-07 |     1001 |      3
2013-01-31 |     1001 |      2
2013-01-24 |     1001 |      1
2013-01-17 |     1001 |      5
2013-02-10 |     1001 |     10
2013-02-03 |     1001 |      4
2012-12-27 |     1001 |      6
2012-12-20 |     1001 |      8
2012-12-13 |     1001 |      4
2012-12-06 |     1001 |      3
2012-10-29 |     1001 |      3 
```

我试图获得一个移动平均线，比较过去 3 个星期四的数据，不包括当前的星期四。这是我的查询：

```
select date, shop_id, amount, extract(dow from date),
avg(amount) OVER (PARTITION BY extract(dow from date) ORDER BY date DESC
                      ROWS BETWEEN 0 PRECEDING AND 2 FOLLOWING)                          
from ro
where extract(dow from date) = 4 
```

这是给出的结果

```
date       |  shop_id | amount | date_part |        avg         
-----------+----------+--------+-----------+--------------------
2013-02-07 |     1001 |      3 |         4 | 2.0000000000000000
2013-01-31 |     1001 |      2 |         4 | 2.6666666666666667
2013-01-24 |     1001 |      1 |         4 | 4.0000000000000000
2013-01-17 |     1001 |      5 |         4 | 6.3333333333333333
2012-12-27 |     1001 |      6 |         4 | 6.0000000000000000
2012-12-20 |     1001 |      8 |         4 | 5.0000000000000000
2012-12-13 |     1001 |      4 |         4 | 3.5000000000000000
2012-12-06 |     1001 |      3 |         4 | 3.0000000000000000 
```

我预计

```
date       |  shop_id | amount | date_part |        avg         
-----------+----------+--------+-----------+--------------------
2013-02-07 |     1001 |      3 |         4 | 2.6666666666666667
2013-01-31 |     1001 |      2 |         4 | 4.0000000000000000
2013-01-24 |     1001 |      1 |         4 | 6.3333333333333333
2013-01-17 |     1001 |      5 |         4 | 6.0000000000000000
2012-12-27 |     1001 |      6 |         4 | 5.0000000000000000
2012-12-20 |     1001 |      8 |         4 |
2012-12-13 |     1001 |      4 |         4 |
2012-12-06 |     1001 |      3 |         4 | 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T12:02:08.763

[SQL小提琴](http://sqlfiddle.com/#!1/18891/15)

```
select
    "date",
    shop_id,
    amount,
    extract(dow from date),
    case when
        row_number() over (order by date) > 3
        then
            avg(amount) OVER (
                ORDER BY date DESC
                ROWS BETWEEN 1 following AND 3 FOLLOWING
            )
        else null end
from (
    select *
    from ro
    where extract(dow from date) = 4
) s 
```

OP的查询有什么问题是框架规范：

```
ROWS BETWEEN 0 PRECEDING AND 2 FOLLOWING 
```

除此之外，我的查询通过在应用昂贵的窗口函数之前过滤星期四来避免不必要的计算。

如果有必要按 shop_id 进行分区，那么显然在`partition by shop_id`这两个函数中添加 ，`avg`并且`row_number`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-07-17T11:32:21.257

我认为更好的答案可能是：

```
SELECT date, shop_id, amount, 
    extract(dow from date) AS dow,
    CASE WHEN count(amount) OVER w = 3 
        THEN avg(amount) OVER w END AS average_amt             
FROM ro
WHERE extract(dow from date) = 4 
WINDOW w AS (ORDER BY date DESC ROWS BETWEEN 1 FOLLOWING AND 3 FOLLOWING) 
```

我认为使用同一个窗口来检查窗口中的行数*并*取平均值会更干净。（这也节省了两个窗口聚合，如原始答案所示。）

关于在较早的答案中声称“我的查询通过在应用昂贵的窗口函数之前过滤星期四来避免不需要的计算”，这也适用于 OP 建议的查询和我的查询，如附加`EXPLAIN`到任一显示。

# javacard - 如何在不抛出异常的情况下设置 SW

> ID：14749451
> 
> 赞同：1
> 
> 时间：2013-02-07T10:57:38.543
> 
> 标签：javacard

我正在使用 javaCard 2.2.1 并尝试编写一些代码来在我的实现中实现全局平台的一部分我需要发送一个 apdu 及其数据和 SW 设置为空间值如何在不使用的情况下设置 SW`IsoException.throwIt()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:53:35.477

大多数人使用以下方式，

```
apdu.setOutgoingAndSend(ISO7816.OFFSET_CDATA, length);
ISOException.throwIt(ISO7816.XXX...); 
```

请注意，在代码的第二条语句中，某些 JCVM/JCRE 不允许抛出 SW1SW2 的任意值。它们允许标准 SW1，如`6Fxx`, `90xx`. 您可以将 SW2 编码为保持 SW1 标准的任何值。

# iphone - 使 UITextView 的行不可编辑并将光标移动到其下一行

> ID：14749454
> 
> 赞同：3
> 
> 时间：2013-02-07T10:57:50.607
> 
> 标签：iphone, objective-c, xcode, uitextview

我一直面临一个问题，我希望 UITextView 的行以及它们占据的行数不可编辑。单击文本字段时，它应该从下一行开始编辑，例如，如果前两行预先填充了一些文本，我希望光标在第三行，而 UItextView 的前两行不可编辑。

我一直在尝试各种解决方案，但最有可能的是

[如何为不可编辑的 UITextView 设置光标位置？](https://stackoverflow.com/questions/14020385/how-to-set-cursor-position-for-non-editable-uitextview)

但是很无奈！！它没有帮助..任何进一步的帮助将不胜感激..

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:42:36.243

这是我找到的解决方案，

```
- (BOOL)textView:(UITextView *)txtView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

    //Check for back space character with @""
    if ([text isEqualToString:@""])
    {
        //Check for the final character in the text view if its a new line character
        if ([txtView.text hasSuffix:@"\n"]) {
            NSLog(@"Yes I have it");
            return NO;
        }
    }
    return YES;
} 
```

希望这可以帮助。

# ruby-on-rails - facebook应用程序中rails路由的https vs http问题

> ID：14749455
> 
> 赞同：0
> 
> 时间：2013-02-07T10:57:53.400
> 
> 标签：ruby-on-rails, ruby, facebook, url, routes

我有一个在 ruby​​ on rails 上开发并部署在乘客 + apache 服务器上的 facebook 应用程序。

现在，当我转到添加了应用程序的 facebook 页面并单击该应用程序时，它会加载到浏览器中，因为为我启用了安全浏览。如果我禁用 facebook 安全浏览，它会重定向到不同的 url 并给出错误。

我想知道处理禁用安全浏览的用户的解决方案是什么，以及在应用程序中要进行哪些更改

（只是示例网址）

```
https://www.facebook.com/pages/mypage/359678449?sk=app_25735749 
```

和

```
https://www.facebook.com/pages/mypage/359678449?sk=app_25735749 
```

击中不同的铁路路线。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:08:32.470

添加到 apache.conf 文件的以下代码修复了该问题，

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://apps.mydomain.com/$1 [R,L] 
```

# python - 在 Python 中窗口“失焦”时读取 HID 输入

> ID：14749458
> 
> 赞同：4
> 
> 时间：2013-02-07T10:58:02.630
> 
> 标签：python, windows, barcode-scanner, hid

几天来我一直在为一个问题苦苦挣扎，但我无法让它工作。我刚刚开始使用 python，现在我已经面临我将在这个项目中面临的最大问题。

情况如下：我必须制作一个扫描条形码的程序。将此信息传达给在线服务并打印 PDF。这一切都很好，但我也想在窗口“失焦”时扫描条形码。所以我想让人们在最小化窗口的同时使用条形码扫描仪进行扫描。

我正在运行 Windows 8，并且正在使用 python 3.3。条形码扫描仪是一种 HID 设备，它以键盘的形式出现。我已经尝试将此项目转换为 python 3.3，但它不起作用。--> [http://learn.adafruit.com/barcode-scanner/overview](http://learn.adafruit.com/barcode-scanner/overview)我最终遇到了各种各样的错误，我仍然不完全理解。

今天我尝试使用 pywinusb，但是这个模块似乎在查找任何 HID 设备方面存在问题，因为它也找不到我的键盘和鼠标。

也许这是一个复杂的问题，但希望有人对此有经验并知道如何使其发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:54:36.170

如果条形码扫描仪将自己呈现为键盘，那么您想要的基本上不是在后台运行的按键记录器吗？搜索它，[这](http://www.daniweb.com/software-development/python/threads/229564/python-keylogger)是“python keylogger”的第一个谷歌搜索结果之一——根据消息来源，它需要[pyWin32](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20218/)和[pyHook](http://www.lfd.uci.edu/~gohlke/pythonlibs/)。我删除了日志记录以将代码示例减少到最低限度，只需将处理代码放入`OnKeyboardEvent`. 我对此进行了测试，它适用于我在 Windows 7 上安装的 Python 2.7，但这些模块应该与 Python 3.3 兼容。

```
import pythoncom, pyHook, sys, logging

def OnKeyboardEvent(event):
    print "Key: ", chr(event.Ascii)
    logging.log(10,chr(event.Ascii))
    return True

hm = pyHook.HookManager()
hm.KeyDown = OnKeyboardEvent
hm.HookKeyboard()
pythoncom.PumpMessages() 
```

# javascript - 所有浏览器的统一选择框样式？

> ID：14749460
> 
> 赞同：2
> 
> 时间：2013-02-07T10:58:11.507
> 
> 标签：javascript, html, css, cross-browser

我正在开发一个包含带有多个选择框的表单的 Web 应用程序。在 Firefox 中，选择框始终看起来像文本输入和多选框，它们模仿用于后者的 CSS 样式，如下图所示：

![在 Firefox 中选择框样式](../Images/6531be6828f48b62f4bf21409d155781.png)

不幸的是，在 Chrome 和 Safari 中，选择框有自己的非常丑陋的设计，与其他输入字段不一致，从而破坏了设计：

![在 Chrome 和 Safari 中选择框样式](../Images/23f1574940b630a98be1db9ce121dc6d.png)

有没有办法（使用 CSS 和/或 JS）使用 Firefox 样式使选择框在所有浏览器中看起来都一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:42:50.450

啊，现在我自己找到了这个工作的 CSS/JS 包：[Formalize.me](http://formalize.me/)

它似乎比 UniformJS 更积极地维护。我想我会先用这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-03T18:01:33.673

至少我知道如何在 Firefox 和 Chrome 之间同步 SELECT 样式。Edge 将很快基于 Chromium，因此它将与 Chrome/Chromium 样式同步。

使用这个 CSS：

```
/* FIREFOX FIX OF UGLY SELECT BOXES */
@supports (-moz-appearance:none) {

  SELECT
  {
  -moz-appearance:none !important;
  background: transparent url('data:image/gif;base64,R0lGODlhBgAGAKEDAFVVVX9/f9TU1CgmNyH5BAEKAAMALAAAAAAGAAYAAAIODA4hCDKWxlhNvmCnGwUAOw==') right center no-repeat !important;
  background-position: calc(100% - 5px) center !important;
  }

} 
```

# c++ - 获取模板基类的类型

> ID：14749461
> 
> 赞同：1
> 
> 时间：2013-02-07T10:58:21.350
> 
> 标签：c++, templates, inheritance

下一个代码可以正常工作（这是我的其他问题的过度简化版本，类型更长，更深，模板更多）：

```
template<class C>
struct Base
{};

template<class C>
struct Derived : public Base<C>
{
   Derived() : Base<C>()
   {}
}; 
```

但是，如果不“写入”其基类的完整类型，我怎么能调用基类构造函数呢？例如，我尝试了类似的东西：

```
template<class C>
struct Base
{
   typedef Base base_type;
};

template<class C>
struct Derived : public Base<C>
{
   Derived() : base_type() {}
};

int main()
{
   Derived<void> b;
} 
```

但是无法识别“base_type”。gcc 抛出的消息是：

```
test3.cpp: In constructor 'Derived<C>::Derived()':
  test3.cpp:100:17: error: class 'Derived<C>' does not have any field
  named 'base_type' 
```

为了解决它，我必须`Base<C>::base_type`在构造函数中编写，但这会使`base_type`自身的存在变得无关紧要。

难道是我的省写运动不可能吗？

而且，为什么`base_type`在构造函数中找不到，但是这很好用？

```
int main()
{
   Derived<void>::base_type b;
} 
```

**编辑：**随着[@Jack Aidley](https://stackoverflow.com/users/1502345/jack-aidley)的评论，我发现使用简单别名获取基类类型的最佳形式是：

```
template<typename C> struct Base {};

template<typename C, typename Base>
struct Derived_impl : public Base
{
    Derived_impl() : Base()
    {}
};

template<typename C>
using Derived = Derived_impl<C, Base<C> >;

int main()
{
   Derived<void> b;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:36:40.863

根据标准

> 在查找模板定义中使用的名称声明时，通常的查找规则（3.4.1、3.4.2）用于非依赖名称。依赖于模板参数的名称查找被推迟到知道实际的模板参数（14.6.2）。

这意味着，您必须告诉编译器，`base_type`在`Base`类中，这取决于`C`. 例如，您可以使用：

```
template<class C>
struct Derived : public Base<C>
{
    using typename Base<C>::base_type;

    Derived() : base_type() {}
}; 
```

或这个

```
template<class C>
struct Derived : public Base<C>
{
    Derived() : Derived<C>::base_type() {} 

    // or, as you already told, Base<C>::base_type()
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:48:38.903

你总是可以这样做：

```
template<class C>
struct Base
{
};

template<class C>
struct Derived : public Base<C>
{
   typedef Base<C> base_type;  // define here

   Derived() : base_type() {}
}; 
```

`Derived`如果您将在...中引用基本类型是有道理的

# objective-c - 无法在模拟器中检测到 iPhone Retina 4 英寸屏幕尺寸

> ID：14749463
> 
> 赞同：1
> 
> 时间：2013-02-07T10:58:32.723
> 
> 标签：objective-c, ios6, uiscreen

我想让我的 iOS 应用程序支持 iPhone 5。所以我为 iPhone 5 大小创建了一个单独的 xib 集。然后我通过检查屏幕高度来加载每个 xib。

这是 AppDelegate.m 中的初始屏幕加载代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    UIViewController *viewController1;
    if ([UIScreen mainScreen].bounds.size.height==480) {
        viewController1 = [[SplashScreen alloc] initWithNibName:@"SplashScreen" bundle:nil];
    }

    if ([UIScreen mainScreen].bounds.size.height==568) {
        viewController1 = [[SplashScreen alloc] initWithNibName:@"SplashScreen5" bundle:nil];
    }

    self.window.rootViewController = viewController1;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

但是当我将模拟器更改为 Retina 4 英寸时，我的代码没有得到模拟器大小。它总是执行 480`if`条件。

但我这样创建的其他应用程序运行正常。
这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:10:49.153

我现在遇到了完全相同的问题（当然是在最糟糕的时刻......）。它确实正常工作了几个星期，但出于未知原因，模拟器突然将 4 英寸模拟设备视为 3.5 英寸屏幕。清洁，重置，重启：同样的情况......

编辑：好的，问题解决了。这是因为缺少 -568@2x 格式的默认图像。我知道这是使系统正常工作的一个条件，但 xcode 显然决定摆脱我选择的那个。那好吧...

# php - 优化 MySQL 计数查询，提供完整信息

> ID：14749466
> 
> 赞同：2
> 
> 时间：2013-02-07T10:58:35.313
> 
> 标签：php, mysql, apache, query-optimization

我的这个查询运行了 3 分钟以上。我希望优化以在几秒钟内运行：

```
SELECT Count(DISTINCT l.licitatii_id) c 
FROM   licitatii_ue l 
       INNER JOIN domenii_licitatii dl 
               ON l.licitatii_id = dl.licitatii_id 
                  AND dl.tip_licitatie = '2' 
       INNER JOIN domenii d 
               ON dl.domenii_id = d.domenii_id 
                  AND d.tip_domeniu = '1' 
                  AND d.status = 1 
WHERE  l.status = 1 
       AND l.data_limita >= '1357768800' 
```

解释显示：

```
*** row 1 ***
          table:  d
           type:  ref
  possible_keys:  PRIMARY,key_status_tip_domeniu,ind_v1
            key:  key_status_tip_domeniu
        key_len:  9
            ref:  const,const
           rows:  39
          Extra:  Using where; Using index
*** row 2 ***
          table:  dl
           type:  ref
  possible_keys:  PRIMARY,licitatii_id,licitatii_id_2
            key:  PRIMARY
        key_len:  5
            ref:  web1db1.d.domenii_id,const
           rows:  1882
          Extra:  Using index
*** row 3 ***
          table:  l
           type:  eq_ref
  possible_keys:  PRIMARY,data_limita
            key:  PRIMARY
        key_len:  4
            ref:  web1db1.dl.licitatii_id
           rows:  1
          Extra:  Using where 
```

架构：

**合法性**

```
 PRIMARY KEY (`licitatii_id`),
  UNIQUE KEY `nr_ue` (`nr_ue`),
  KEY `nume` (`nume`),
  KEY `tip_licitatie` (`tip_licitatie`),
  KEY `surse_ue_id` (`surse_ue_id`),
  KEY `data_publicarii` (`data_publicarii`),
  KEY `tara_id` (`tara_id`),
  KEY `creat` (`creat`),
  KEY `data_limita` (`data_limita`),
  FULLTEXT KEY `nume_fulltext` (`nume`,`descriere`)
) ENGINE=MyISAM

/*Index Information*/
---------------------

Table         Non_unique  Key_name         Seq_in_index  Column_name      Collation  Cardinality  Sub_part  Packed  Null    Index_type  Comment  
------------  ----------  ---------------  ------------  ---------------  ---------  -----------  --------  ------  ------  ----------  ---------
licitatii_ue           0  PRIMARY                     1  licitatii_id     A               136456    (NULL)  (NULL)          BTREE                
licitatii_ue           0  nr_ue                       1  nr_ue            A               (NULL)    (NULL)  (NULL)  YES     BTREE                
licitatii_ue           1  nume                        1  nume             A                68228    (NULL)  (NULL)          BTREE                
licitatii_ue           1  tip_licitatie               1  tip_licitatie    A                   13    (NULL)  (NULL)  YES     BTREE                
licitatii_ue           1  surse_ue_id                 1  surse_ue_id      A                    1    (NULL)  (NULL)          BTREE                
licitatii_ue           1  data_publicarii             1  data_publicarii  A               136456    (NULL)  (NULL)  YES     BTREE                
licitatii_ue           1  tara_id                     1  tara_id          A                   41    (NULL)  (NULL)  YES     BTREE                
licitatii_ue           1  creat                       1  creat            A               136456    (NULL)  (NULL)  YES     BTREE                
licitatii_ue           1  data_limita                 1  data_limita      A                  770    (NULL)  (NULL)  YES     BTREE                
licitatii_ue           1  nume_fulltext               1  nume             (NULL)               1    (NULL)  (NULL)          FULLTEXT             
licitatii_ue           1  nume_fulltext               2  descriere        (NULL)               1    (NULL)  (NULL)  YES     FULLTEXT 
```

**domenii_licitatii**

```
 PRIMARY KEY (`domenii_id`,`tip_licitatie`,`licitatii_id`),
  KEY `licitatii_id` (`licitatii_id`,`tip_licitatie`),
  KEY `licitatii_id_2` (`licitatii_id`)
) ENGINE=InnoDB 

/*Index Information*/
---------------------

Table              Non_unique  Key_name        Seq_in_index  Column_name    Collation  Cardinality  Sub_part  Packed  Null    Index_type  Comment  
-----------------  ----------  --------------  ------------  -------------  ---------  -----------  --------  ------  ------  ----------  ---------
domenii_licitatii           0  PRIMARY                    1  domenii_id     A                   20    (NULL)  (NULL)          BTREE                
domenii_licitatii           0  PRIMARY                    2  tip_licitatie  A                  228    (NULL)  (NULL)          BTREE                
domenii_licitatii           0  PRIMARY                    3  licitatii_id   A               430634    (NULL)  (NULL)          BTREE                
domenii_licitatii           1  licitatii_id               1  licitatii_id   A               430634    (NULL)  (NULL)          BTREE                
domenii_licitatii           1  licitatii_id               2  tip_licitatie  A               430634    (NULL)  (NULL)          BTREE                
domenii_licitatii           1  licitatii_id_2             1  licitatii_id   A               430634    (NULL)  (NULL)          BTREE 
```

**多梅尼**

```
 PRIMARY KEY (`domenii_id`),
  KEY `key_status_tip_domeniu` (`status`,`tip_domeniu`),
  KEY `ind_v1` (`domenii_id`,`tip_domeniu`,`status`),
  KEY `parent_id` (`parent_id`)
) ENGINE=InnoDB 

/*Index Information*/
---------------------

Table    Non_unique  Key_name                Seq_in_index  Column_name  Collation  Cardinality  Sub_part  Packed  Null    Index_type  Comment  
-------  ----------  ----------------------  ------------  -----------  ---------  -----------  --------  ------  ------  ----------  ---------
domenii           0  PRIMARY                            1  domenii_id   A                   79    (NULL)  (NULL)          BTREE                
domenii           1  key_status_tip_domeniu             1  status       A                    4    (NULL)  (NULL)  YES     BTREE                
domenii           1  key_status_tip_domeniu             2  tip_domeniu  A                   11    (NULL)  (NULL)          BTREE                
domenii           1  ind_v1                             1  domenii_id   A                   79    (NULL)  (NULL)          BTREE                
domenii           1  ind_v1                             2  tip_domeniu  A                   79    (NULL)  (NULL)          BTREE                
domenii           1  ind_v1                             3  status       A                   79    (NULL)  (NULL)  YES     BTREE                
domenii           1  parent_id                          1  parent_id    A                   79    (NULL)  (NULL)          BTREE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:37:22.953

您确实需要表上的复合索引。

```
table             index
licitatii         ( status, data_limita, licitatii_id )
domenii_licitatii ( licitatii_id, tip_licitatie )
domenii           ( domenii_id, tip_domeniu, status ) 
```

您应该拥有有助于优化联接和 where 条件的复合键。此外，正如我所包含的，查询引擎可以直接从索引中找到连接的值，而不是返回到实际数据的页面。如果索引中只有一列，则查询将转到原始数据进行连接。看看它对你有什么作用。

好的，是的，其他两个索引和您添加的第三个索引 - 没有帮助。然后我会尝试反转查询......不完全了解数据，但看起来它们是某种类型的查找类别元素。尝试

```
select STRAIGHT_JOIN
      Count(DISTINCT dl.licitatii_id) c
   from
      domenii d
         join domenii_licitatii dl
            on d.domenii_id = dl.domenii_id
           AND dl.tip_licitatie = '2'
            JOIN licitatii_ue L
               on dl.licitatii_id = L.licitatii_id
              AND L.status = 1
              AND L.Data_Limita >= '1357768800'
   where
          d.tip_domeniu = '1'
      and d.status = 1 
```

**由 Pentium10 添加**

解释显示以下内容：

```
+---+--------+----+--------+---------------------------------------+------------------------+---+----------------------------+------+--------------------------+
| 1 | SIMPLE | d  | ref    | PRIMARY,key_status_tip_domeniu,ind_v1 | key_status_tip_domeniu | 9 | const,const                |   39 | Using where; Using index |
| 1 | SIMPLE | dl | ref    | PRIMARY,licitatii_id,licitatii_id_2   | PRIMARY                | 5 | web1db1.d.domenii_id,const | 1882 | Using index              |
| 1 | SIMPLE | L  | eq_ref | PRIMARY,data_limita,i1                | PRIMARY                | 4 | web1db1.dl.licitatii_id    |    1 | Using where              |
+---+--------+----+--------+---------------------------------------+------------------------+---+----------------------------+------+--------------------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:54:45.830

在这里，我`WHERE`将末尾的子句移动到开头的子查询中，因此它不必过滤最后由`INNER JOIN`s 创建的更多行，它已经及时正确过滤了第一个`INNER JOIN`. 这会运行 2 个查询，但应该更快。

```
SELECT Count(DISTINCT l.licitatii_id) c 
FROM   (SELECT DISTINCT licitatii_id 
        FROM   licitatii_ue l 
        WHERE  l.status = 1 
        AND    l.data_limita >= '1357768800' 
        ) l 
       INNER JOIN domenii_licitatii dl 
               ON l.licitatii_id = dl.licitatii_id 
                  AND dl.tip_licitatie = '2' 
       INNER JOIN domenii d 
               ON dl.domenii_id = d.domenii_id 
                  AND d.tip_domeniu = '1' 
                  AND d.status = 1 
```

# magento - Magento - 单击父类别会返回 403 错误

> ID：14749469
> 
> 赞同：3
> 
> 时间：2013-02-07T10:58:42.307
> 
> 标签：magento

我的 Magento 1.5.0.1 安装有问题。

单击子类别可以正常工作，并将我发送到正确的 URL 并显示产品。但是，当我单击父类别时，我收到 403 禁止错误。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:52:16.127

类别链接会出现 403 的原因有几个。

我的第一个猜测是 Web 根目录中有一个与类别同名的目录，并且您禁用了 URL 后缀。

例如，在禁用 URL 后缀时，为顶级类别提供“媒体”的 URL 键通常会导致 403。

另一种可能性是，如果您使用的是 Apache 并启用了 mod_security，并且类别名称包含 mod_security 不喜欢的工作（例如，选择、插入和删除）。

# c# - 如何动态使用 eval()

> ID：14749471
> 
> 赞同：0
> 
> 时间：2013-02-07T10:58:47.767
> 
> 标签：c#, asp.net

```
for(i=0;i<10;i++)
{
    <%# Eval(i.ToString()).ToString()%>
} 
```

如果我不知道列名，如何使用 eval。（意味着如果数据表列是动态创建的）

1.  我正在创建一个`DataTable`
2.  列`dt.Column.Add()`名将来自数据库
3.  所以我不知道所有列名是什么。
4.  现在我如何在 asp.net 页面中打印它。因为它 Eval 需要一些字符串常量；`<%# Eval("Column name").ToString()%>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:18:32.270

GridView 会更适合于此，它会自动从数据源生成列。

但是，您可以遍历 的`Columns`属性`DataTable`并从每一列获取`ColumnName`属性，但是您不能`foreach`在数据绑定标记 ( `<%# %>`) 内使用循环。

以下是在代码隐藏中获取列名的方法：

```
DataTable dt = new DataTable();

//populate data table

foreach (DataColumn col in dt.Columns)
{
    string columnName = col.ColumnName;
} 
```

您可以在转发器的项目模板中循环使用它，但是因为您没有使用`<%# %>`丢失的数据绑定块 ( )，`Container.DataItem`这使得渲染当前项目中的数据非常困难，如果不是不可能的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:10:03.797

问题是...您确实知道即将到来的列名。您在第 2 步中说 dt.Column.Add() 字符串参数将来自数据库。所以这意味着一个单独的过程，您首先访问数据库并获取列名列表。

然后，您将遍历此列表并填充您的 Eval 函数（您添加的 FOR 语句实际上将遍历您的数据库列名列表，这些列名可能位于数组或列表或它们自己的数据表对象中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:40:19.980

对于你的问题

**在 * *ASP.NET* ***

```
<asp:Repeater ID="rptrTester" OnItemDataBound="rptrTester_ItemDataBound" runat="server">
    <ItemTemplate>
        <asp:Repeater ID="rptrTesterInner" runat="server">
            <ItemTemplate>
                <%# Eval("COL_NAME")%>
            </ItemTemplate>
        </asp:Repeater>
    </ItemTemplate>
</asp:Repeater> 
```

**在 C# 背后的代码中**

```
System.Data.DataTable dt = null;
    private void GetData()
    {
        System.Data.DataTable dtMain = // MyDAta Table;
        dt = new System.Data.DataTable();
        dt.Columns.Add("COL_NAME");
        System.Data.DataRow dr = null;
        for (int i = 0; i < dtMain.Columns.Count; i++)
        {
            dr = dt.NewRow();
            dr[0] = dtMain.Columns[0].ColumnName;
            dt.Rows.Add(dr);
        }
        rptrTester.DataSource = dtMain;
        rptrTester.DataBind();
    }
    protected void rptrTester_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        Repeater rptrTesterInner = (Repeater)e.Item.FindControl("rptrTesterInner");
        rptrTesterInner.DataSource = dt;
        rptrTesterInner.DataBind();
    } 
```

# javascript - 未定义，你是怎么工作的？

> ID：14749474
> 
> 赞同：0
> 
> 时间：2013-02-07T10:58:50.537
> 
> 标签：javascript, undefined, referenceerror

只是一个简单的问题:)

如果我有 ：

```
var user = {'name': 'Fred'}; 
```

所以

```
console.log(user.name); // Fred
console.log(user.age); // undefined 
```

但

```
console.log(test); // ReferenceError: test is not defined 
```

我不明白为什么，因为对我来说它是一样的

```
console.log(window.test); // undefined 
```

在我的项目中，我尝试检查是否存在全局变量但我有一个referenceError ...我真的不明白为什么followinf代码不起作用...

```
if (TestGlobal) // ReferenceError: TestGlobal is not defined
   console.log(' allo 1 ');

if (typeof(TestGlobal ) !== 'undefined') // Ok
   console.log(' allo 1 '); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:45:48.460

......和一个简单的答案：

*   `undefined`只要基值不是未定义的，属性引用总是评估它们的值或如果键不存在的值（然后会抛出 TypeError）。
*   如果变量之前未定义，则抛出 ReferenceErrors，除非它们与 [`typeof`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)一起使用（它们只是评估为`"undefined"`）。

# javascript - 在链接中提取 ?= 之后的字符

> ID：14749476
> 
> 赞同：0
> 
> 时间：2013-02-07T10:58:52.173
> 
> 标签：javascript, jquery, ajax

谁能看到我在这里出错的地方，我试图在链接中获取 ?p= 之后的最后一个字符并放入一个变量，但我使用的代码返回 /。

我的代码是：

```
 $("#dvPartial").on('click', '.dvPagerCities a', function (event) {
        alert('click detected');
        var city = ($('input#hdnCountry').val());
        alert(city);
        var link = $('a').attr('href');
        //var getEqualPosition = link.indexOf('?p='); //Get the position of '='
        var getEqualPosition = link.indexOf('='); //Get the position of '='
        var number = link.substring(getEqualPosition + 1); //Split the string and get the number. 
```

我的链接是

```
<a href="/Weather/Index/Australia?p=2">»</a> 
```

我认为正在发生的事情是它拿起了 1st = 。

我的理论是这样的。

1）检测点击事件

2）获取导致事件的链接

3）提取p的值，

p 可以是 1 个数字、2 个数字或 3 个数字。

任何帮助将不胜感激，因为似乎我一解决一个问题就会出现另一个问题。

谢谢

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:04:58.737

假设这`p`是 URL 中的唯一参数，您可以简单地用`=`符号分割：

```
$("#dvPartial").on('click', '.dvPagerCities a', function (event) {
    var city = $('input#hdnCountry').val();
    var number = $(this).attr('href').split('=')[1];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:20:29.340

问题是这部分：

```
var link = $('a').attr('href'); 
```

这不会**选择**被点击的链接，除非您碰巧点击了页面 HTML 中的第一个链接。这样做是选择**所有** `<a>`元素，然后返回`href`第一个元素的属性。

在您的事件处理程序中，您想用来`this`引用被点击的链接：

```
var link = $(this).attr('href');
// or simply
var link = this.href; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:08:46.527

试试这个：

`link.split('?p=')[1]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:14:29.163

试试这个：http: [//jsfiddle.net/7atyG/1/](http://jsfiddle.net/7atyG/1/)

```
$(document).on('click', '.dvPagerCities a', function (ev) {
   ev.preventDefault();
   var link = $(this).attr('href');
   var Linkval = link.substr(link.indexOf('=') + 1);
   alert(Linkval);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T11:20:27.550

```
String s = "Jecy penny ? like sears";

String[] arr = s.split("\\?");  

在 ? 之前添加 \\，如 ? 有特殊意义

字符串 res = arr[0];

```

' 的转义字符可能是你错了吗？'

检查此链接[删除特定字符后的所有字符](https://stackoverflow.com/questions/12000524/remove-all-characters-after-a-particular-character)

# php - 在 PHP 中将数组从一个页面传递到另一个页面

> ID：14749477
> 
> 赞同：0
> 
> 时间：2013-02-07T10:58:53.060
> 
> 标签：php, mysql, sql, arrays, session

我有一个注册表单（用于事件），其中输入的字段数不同。这取决于事件。不同的活动限制了不同数量的会员注册。所以，在我的`events`表中，我有一排`members`存储成员的数量。

所以，最后我的注册表是这样的：

```
if ($row['members']>1){
    echo "Hello ".$sess_name.", you can add ".($row['members']-1)." more members to register for ".$row['name']."<br>";
    echo "On successful registration of the event, all the team members will receive an email on their registered email ids<br>";
    $mem=array();?>
    <form action="" method="post">
    <?php for ($i=1;$i<$row['members'];$i++){
        echo '<label>Insert ID of Member '.$i.' :</label>';
        echo '<input type="text" id="id" size="20" name="'.$mem[].'"><br>';
    }
    echo '<button type="submit" id="submit" value="Register" name="register1">Register</button>';?>
    </form> 
```

我将`ID`输入的内容存储在一个数组（`$mem`）中，但我不知道如何将它（`$mem`）传递到另一个页面以将其存储在 MySQL 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:03:33.750

添加隐藏的输入字段

```
<form action="" method="post">
<?php for ($i=1;$i<$row['members'];$i++){
    echo '<label>ID of Member '.$i.' :</label>';
    echo '<input type="text" id="email" size="20" name="'.$mem[].'"><br>';
    echo '<input type="hidden" id="userID" name="userID[]" value='.$i.'>';
}
echo '<button type="submit" id="submit" value="Register" name="register1">Register</button>';?>
</form> 
```

# android - 用给定的两点找到半径和圆心

> ID：14749481
> 
> 赞同：0
> 
> 时间：2013-02-07T10:59:12.060
> 
> 标签：android, math, geometry, angle

如果我在圆上有两个点，是否可以找到半径和圆心？

![在此处输入图像描述](../Images/51e95f5ededffbdc6c2ad4204cc15724.png)

实际上，我想将圆圈放置在图片中的位置。我只有一个包含圆圈的矩形。我希望这些圆圈以圆形方式从矩形的左中心到右中心放置。如果需要更多解释，请告诉我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T11:08:51.747

不，定义一个圆需要三个点。给定任意两点，通过这两个点的圆有无穷多个。

例如：

![在此处输入图像描述](../Images/6bcce8a14d13afd3d2ea76c0efa983d4.png)

# c# - 检查列表中有多少个字符串实例

> ID：14749482
> 
> 赞同：0
> 
> 时间：2013-02-07T10:59:16.617
> 
> 标签：c#, math

好吧，我询问了检查是否可以在列表中找到某些关键字，如果它们都在那里，那么问题是正确的。在这里找到：[检查字符串是否包含列表中的所有输入](https://stackoverflow.com/questions/14728294/check-if-the-string-contains-all-inputs-on-the-list)

我还想知道列表中有多少个单词，然后将其除以百分比，这样用户就知道他们回答每个问题的准确程度。

```
 public String KeyWords_Found()
        {
            int Return_Value = 0;
            foreach (String s in KeyWords)
            {
                if (textBox1.Text.Contains(s))
                {
                    Return_Value++;
                }
            }
            int Holder = Return_Value / KeyWords.Count;
            int Fixed = Holder * 100;
            return  Fixed + "%";
        } 
```

所以我想要它做的代码是检查列表中列出的所有关键字实例`KeyWords`。然后通过除以关键字总数并乘以 100 得到百分比。但它说这两个值都是 0，我不能除以 0。我不确定为什么它们会为零。使困惑！帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:12:06.990

您应该在计算中使用浮点数学而不是整数数学。

```
int i=100;
int a=51;

(i/a)==0  //true, integer division sucks for calculating percentages

((double)i/a)==0 //false, actually equals ~1.96 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:05:26.947

您应该首先检查是否`KeyWords`为空

```
public String KeyWords_Found()
{
    if (KeyWords.Count == 0)
        return "0%";
    // rest of the code
} 
```

**或者**，您可以使用 Linq 而不是编写自己的方法：

```
int nOfOccurences = KeyWords.Where(k => textBox1.Text.Contains(k)).Count(); 
```

确保你能做到`using System.Linq;`这一点。

不过，您仍然需要自己检查`KeyWords.Count == 0`和计算百分比。

# android - android - 尝试向整数列表添加值时崩溃

> ID：14749483
> 
> 赞同：0
> 
> 时间：2013-02-07T10:59:17.763
> 
> 标签：android, list, expandablelistview

在包含 的 Layout 中，`ExpandableListView`我需要保持`View`. 它必须在所有组折叠时可见。所以我做了以下事情：

```
 //class field
  private List<Integer> groupState = null;

 getExpandableListView().setOnGroupExpandListener(
            new OnGroupExpandListener() {

                @Override
                public void onGroupExpand(int arg0) {

                    p.setVisibility(View.GONE);
                    groupState.add(arg0);

                }

            });
    getExpandableListView().setOnGroupCollapseListener(
            new OnGroupCollapseListener() {

                @Override
                public void onGroupCollapse(int groupPosition) {
                    groupState.remove(groupPosition);
                    if (groupState.isEmpty()) {
                        p.setVisibility(View.VISIBLE);
                    }

                }
            }); 
```

无论单击哪个组，它都会在我尝试添加整数的行上以 NullPointerException 崩溃。我究竟做错了什么？

![在此处输入图像描述](../Images/3b1baf5b1cf9236f170d280770fa9941.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:10:28.320

如果这是完整的代码，则缺少 List groupState 的正确初始化。在某个地方你应该有这样的东西：

```
groupState = new List<Integer(); 
```

或者你改变你的第二行：

```
private List<Integer> groupState = null; 
```

至

```
private List<Integer> groupState = new List<Integer(); 
```

# c++ - 为双向链表创建类的新实例

> ID：14749488
> 
> 赞同：0
> 
> 时间：2013-02-07T10:59:25.970
> 
> 标签：c++, class, linked-list

我已经获得了用于创建双向链表的起始代码。我遇到的问题是实现一个在“头部”插入一个新创建的节点的函数。

链表中的一个节点是以下结构：

```
template <class T>
struct ListItem
{
    T value;
    ListItem<T> *next;
    ListItem<T> *prev;

    ListItem(T theVal)
    {
        this->value = theVal;
        this->next = NULL;
        this->prev = NULL;
    }
}; 
```

头部插入代码如下：

```
void List<T>::insertAtHead(T item)
{
     ListItem<int> a(item);     //create a node with the specified value

                   if(head==NULL)
                   {
                                 head=&a;   //When the list is empty, set the head
                                            //to the address of the node
                   }

                   else
                   {

                         //when the list is not empty, do the following.
                        head->prev=&a;
                        a.next=head;
                        head=&a;
                   }
} 
```

现在的问题是，当我应该在插入项目时创建一个具有不同内存地址的新类对象时。我在上面所做的更新了相同的内存位置。我需要知道如何创建一个新的类对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:04:05.373

您所做的事情是错误的，并且具有潜在危险（使用指向局部变量的指针）。您需要使用以下[`new`](http://en.cppreference.com/w/cpp/language/new)表达式分配一个新节点：

```
ListItem<int>* a = new ListItem<int>(item); 
```

当然，完成列表后，您必须记住使用`delete`.

# mysql - MySQL触发器：检查变量是否存在时出错

> ID：14749491
> 
> 赞同：1
> 
> 时间：2013-02-07T10:59:30.683
> 
> 标签：mysql, triggers

我有一个触发器，它引用了一个来自删除查询的全局变量，该查询设置了触发器：

```
DELIMITER ;;

CREATE TRIGGER test_trigger BEFORE DELETE ON test_table FOR EACH ROW 
BEGIN

    IF (SELECT @userID IS NULL) 
    THEN @userID := 0
    END IF;

END
;;

DELIMITER ; 
```

出于某种原因，我收到 SQL 错误：

```
SQL Error (1064): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@userID := 0 
```

我不明白，这是一个非常基本的IF语句，为什么它不起作用？

**更新：**我很困惑，我试过这个

```
IF TRUE
THEN TRUE
END IF; 
```

它仍然抛出一个错误......认真吗？

**更新 2：已解决**这确实有效，但是很奇怪

```
IF (SELECT @userID IS NULL) 
THEN SET userID = 0;
END IF; 
```

显然您需要在 IF 语句中使用分号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:12:17.500

```
CREATE TRIGGER test_trigger BEFORE DELETE ON test_table FOR EACH ROW 
BEGIN
  IF (SELECT @userID IS NULL) 
  THEN 
    SET @userID = 0;
END IF;
END; 
```

# javascript - 如何在 GWT 离线应用程序中包含外部 Javascript

> ID：14749492
> 
> 赞同：3
> 
> 时间：2013-02-07T10:59:36.390
> 
> 标签：javascript, gwt, browser-cache, html5-appcache

我有一个 GWT（好吧，GXT）应用程序，它使用外部 JavaScript 库向我的应用程序添加功能。我的应用程序也必须离线工作，这就是我的问题。

我知道将文件添加到公用文件夹将使我的 GWT 应用程序可以访问它们，但这在离线使用的情况下不起作用。GWT 编译我的应用程序以使其可以离线使用而不会出现问题，但它不包含外部 JavaScript 库。

因此，每当我在应用程序中工作并到达需要所述库的点时，浏览器将尝试 GET 请求，因为该库尚未加载并且不会可靠地保留在浏览器的缓存中。

有没有办法将库添加到我的应用程序中，以便与我的 GWT 应用程序一起缓存？该库由几个文件夹、JS 文件、图像、CSS 等组成。我唯一的想法是动态创建一个 Appcache Manifest，将所有文件转储到浏览器缓存中。在这种情况下，我害怕破坏 GWT 离线功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:16:07.960

是的，您可以在编译时生成清单。只需使用扩展 com.google.gwt.core.ext.linker.AbstractLinker 的链接器。

例如，请参阅 [此示例清单链接器](https://code.google.com/p/gwt2go/source/browse/trunk/gwt2go/src/com/gwt2go/dev/linker/ManifestLinker.java?spec=svn34&r=34) 或查看[编写 GWT 链接器](http://jectbd.com/?p=29) 或查看[此 stackoverflow 线程](https://stackoverflow.com/questions/3318240/html5-offline-gwt-app)

我这样做是为了包含谷歌字体并生成一个清单，该清单仅包含该特定语言排列的文件。

# google-maps - 使用 sencha touch 集成谷歌地图方向

> ID：14749495
> 
> 赞同：2
> 
> 时间：2013-02-07T10:59:43.517
> 
> 标签：google-maps, sencha-touch-2

我是sencha touch的新手。我已经使用 sencha 触摸集成了谷歌地图，并在用户当前位置上显示标记。现在，我想在地图上显示从源地址到目标地址的方向。

像这样的示例， [https://maps.google.com/maps?saddr=21.220901,72.829056&daddr=20.915907,7​​2.871628](https://maps.google.com/maps?saddr=21.220901,72.829056&daddr=20.915907,72.871628)

我只想显示带有方向路径的地图视图。如何使用 sencha toch 在 goole 地图上显示两个地方之间的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:40:52.757

这是代码，

```
function directionMap(src,dest){
   // alert('calling');

    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();

    var map = new google.maps.Map(document.getElementById('map'), {
    zoom:10,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    directionsDisplay.setMap(map);
    var request = {
   // origin: '21.220901,72.829056',
   // destination: '20.915907,72.871628',

        origin: src,
        destination: dest,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
    }
    });
    } 
```

只需使用源和目标调用 directionMap 函数，它就会在地图上绘制路径。

# date - 黑莓日期格式？

> ID：14749496
> 
> 赞同：0
> 
> 时间：2013-02-07T10:59:44.593
> 
> 标签：date, blackberry

我收到来自网络服务的日期响应编码：1367726400000。

如何以 dd-mm-yy 格式制作它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:38:09.847

试试这个代码 -

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");
System.out.println("Now: " + sdf.format(new Date(1367726400000 ))); 
```

# android - 如何获取当前在android中活动的wifiNetwork的端口号

> ID：14749497
> 
> 赞同：2
> 
> 时间：2013-02-07T10:59:45.573
> 
> 标签：android, port, ip-address, wifimanager, wifi

我有一个要求，我需要提供当前连接的 Wifi 网络的 IP 地址和端口号。

我正在`IP address`使用`WifiInfo`具有`getIpAddress()`方法的类。

但我无法获得端口号..请提供适当的解决方案../

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:53:27.190

WLAN端口号？

您使用 WifiManager 做得对。没有 WLAN 端口，这就是您无法获取端口号的原因。

# asp.net - 可以在 ASP.NET 项目的 Web.config 中使用 Properties.Settings 吗？

> ID：14749503
> 
> 赞同：0
> 
> 时间：2013-02-07T11:00:04.790
> 
> 标签：asp.net

是否可以通过asp.net 项目中`Web.config`的设置在文件中设置一些值？`Properties.Settings.Default...`

编辑：我知道如何创建设置。但我的问题是：我可以直接在 webConfig 的 XML 中使用它们吗？例如，我定义了一个名为数据库的设置，然后我在 web.config 的连接字符串中使用了这个变量

# android - Android UserManager：检查用户是否是所有者（管理员）

> ID：14749504
> 
> 赞同：11
> 
> 时间：2013-02-07T11:00:05.673
> 
> 标签：android, android-4.2-jelly-bean

我正在为具有多用户功能的平板电脑开发一个具有最新 android 版本（4.2.1 API-Level 17）的应用程序。

我想将某些功能（如对应用偏好的访问）限制为平板电脑的所有者（即可以添加和删除其他用户帐户的用户）

有什么办法可以找出当前用户是否是所有者？

我通读了 UserManager 和 UserHandle API 文档，但找不到允许我检查它的函数。

我错过了什么还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T10:25:36.760

类似但没有反射：

```
static boolean isAdminUser(Context context)
{
    UserHandle uh = Process.myUserHandle();
    UserManager um = (UserManager) context.getSystemService(Context.USER_SERVICE);
    if(null != um)
    {
        long userSerialNumber = um.getSerialNumberForUser(uh);
        Log.d(TAG, "userSerialNumber = " + userSerialNumber);
        return 0 == userSerialNumber;
    }
    else
        return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-22T11:20:13.770

您可以在 Kotlin 中创建一个扩展属性以使其更简单：

```
val UserManager.isCurrentUserDeviceOwner: Boolean
    get() = if (SDK_INT >= 23) isSystemUser
    else if (SDK_INT >= 17) getSerialNumberForUser(Process.myUserHandle()) == 0L
    else true 
```

然后，使用它很简单，如下所示：

```
val userManager = context.getSystemService(Context.USER_SERVICE) as UserManager
if (userManager.isCurrentUserDeviceOwner) TODO() else TODO() 
```

您可以通过使用全局系统服务定义来进一步减少样板文件，这些定义使`userManager`您的 Kotlin 代码中的任何位置都可以使用其他 Android 系统服务，代码包含在我制作的这个库中：[https ://github.com/LouisCAD/Splitties/tree/master/系统服务](https://github.com/LouisCAD/Splitties/tree/master/systemservices)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T11:36:31.340

在进一步研究之后，我发现多用户 api 还没有功能，它真的不能用于任何事情。虽然有一个 hack 用于检查用户是否是使用反射的所有者：

```
public boolean isCurrentUserOwner(Context context)
{
    try
    {
        Method getUserHandle = UserManager.class.getMethod("getUserHandle");
        int userHandle = (Integer) getUserHandle.invoke(context.getSystemService(Context.USER_SERVICE));
        return userHandle == 0;
    }
    catch (Exception ex)
    {
        return false;
    }
} 
```

这适用于我的 Nexus 7 和 Android 4.2.1 的 Nexus 10 它非常脏。所以我不建议使用它，除非你正在制作一个特定于设备和版本的应用程序

# java - Java：在mysql中插入重音字符

> ID：14749506
> 
> 赞同：3
> 
> 时间：2013-02-07T11:00:08.283
> 
> 标签：java, sql, prepared-statement, non-ascii-characters

如果我有来自 java 的这个查询：

```
String query="insert into user (..., name, ...) values (..., 'à', ...)";
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection con = DriverManager.getConnection("jdbc:mysql://localhost/Spinning?user=root");
PreparedStatement prest = con.prepareStatement(query);
prest.executeUpdate(); 
```

在数据库中，我会有一个奇怪的字符：里面有一个问号的钻石。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:16:22.663

将您的连接网址更改为以下内容：

```
jdbc:mysql://localhost/Spinning?user=root&useUnicode=true&characterEncoding=utf8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:15:11.290

1.  验证您在 MySQL DB 中使用的字符集。您可以尝试使用 " `SHOW CREATE TABLE xxxx`" 打印使用 charset 的表 DDL。
2.  验证您在 JDBC 驱动程序中使用的字符集。如果使用 MySQL `ConnectorJ,`，您可以在 JDBC url 中设置字符集。

# android - 如何确定前台应用程序是否是启动器？

> ID：14749508
> 
> 赞同：1
> 
> 时间：2013-02-07T11:00:10.410
> 
> 标签：android, launcher

我知道如何检索有关前台应用程序的信息：

```
public ActivityManager.RunningTaskInfo getForegroundTask()
{
    ActivityManager am = (ActivityManager) mContext.getSystemService( Activity.ACTIVITY_SERVICE );
    return am.getRunningTasks(1).get(0);
}

public String getForegroundTaskPackageName()
{
    return getForegroundTask().topActivity.getPackageName();
} 
```

我的问题是，我怎样才能确定前台应用程序是启动器？我不能依赖包名，因为它可以是任何东西，比如“com.android.launcher”或“com.htc.launcher”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:13:33.723

您可以尝试结合您的代码片段来确定前台进程的包名称，并调用以`PackageManager`获取有关 HOME 活动的信息，如此[处](https://stackoverflow.com/questions/10344824/how-can-i-get-the-package-name-of-the-current-launcher-in-android-2-3-and-above)所述，并比较结果。

# qt - Qt4和Qt5的外观区别

> ID：14749514
> 
> 赞同：1
> 
> 时间：2013-02-07T11:00:33.517
> 
> 标签：qt, qt4, qt5

我使用 Ubuntu 12.10 64 位。我从 Ubuntu 存储库安装了 Qt4。版本是 Qt 4.8.3 和 Qt Creator 2.5.2

我还从 qt-project.org 下载了 Qt5，它的版本号是 Qt 5.0.1 和 Qt Creator 2.6.2

当我编译并运行同一个项目时，它们的外观略有不同。这是什么原因？是因为 Ubuntu 还是 Qt5？

[![Qt4和Qt5外观区别](../Images/102723b2a8bf71c639d66f8dfc9791a7.png)](https://i.stack.imgur.com/Syrvt.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T11:40:44.063

Qt5 对 GUI 代码进行了一些重大更改，如果您发现差异，很可能是因为这些，而不是其他任何东西。

> 新的图形架构。Qt 5 在 OpenGL 之上使用 Scenegraph 为 Qt Quick 引入了一种新的图形架构。OpenGL (ES) 2.0 是强制要求的。新架构使基于 OpenGL 的内容（例如着色器效果）与基于 Qt Quick 的应用程序集成变得更加容易。基于 QWidget 的堆栈继续像在 Qt 4.x（基于 QPainter）中一样工作，但支持的后端仅限于 SW 光栅化、像素图和图像、用于 GL 表面的 OpenGL 后端和用于 PDF 的后端生成和打印。不再支持 X11 和 CoreGraphics。

来自[Dobbs 博士 Qt5 测试版](http://www.drdobbs.com/mobile/qt-5-beta-a-developers-tour/240006976)。

# node.js - 在 MongooseJS / NodeJS 中调用不存在的属性

> ID：14749520
> 
> 赞同：2
> 
> 时间：2013-02-07T11:00:46.377
> 
> 标签：node.js, mongoose

如果我在猫鼬中有一个看起来像这样的模式（一个例子）：

```
Meta = new Schema
  type_id:Number,
  datahash: String,
  data: Schema.Types.Mixed 
```

这一切都很好。我可以查询**Meta.datahash**并取回值等。但是如果我查询**Meta.OtherProp**，那么我会得到一个错误，因为模型中不存在该属性。

在 PHP 中，您有可以处理此问题的魔术方法（getter/setter）。

有没有办法在猫鼬（或 NodeJS）中做到这一点。非常欢迎示例:)

BR/太阳

编辑：可以说数据是这样的对象：

```
{
  56:'somevalue',
  77:'Othervalue'
} 
```

现在 - 有什么方法可以直接查询到这个

**元数据56**

然后返回“somevalue”？

还有没有办法避免我查询的js错误

**元数据90**

因为财产不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:02:14.260

我没用过猫鼬。但这里有一些模式可用于在同步和异步情况下设置默认值。

```
var  DATA={ 56:'somevalue',  77:'Othervalue' };

// SYNC: from JS object
function getPropOrDefault(prop){
  var val = DATA[String(prop)];
  var ret = (val !== undefined ? DATA[String(prop)] : 'default');
  return ret;
};

// ASYNC: from mongoose
function getFromMongoose(key,fn){
//or something. idk how u query mongoose
  process.nextTick(function(){
    var val = DATA[String(key)];
    if(val === undefined) { fn(new Error('no_property')) }
    else{ fn(null, val) };
  });
};

function getMongoosePropOrDefault(prop, callback){
  getFromMongoose(prop, function(err, result){
    if(err){ 
      callback(err, 'default');
    } else {
      callback(null, result);
    };
  });
};

(function main(){
  console.log('DATA[77]: '+getPropOrDefault(77) );
  console.log('DATA[99]: '+getPropOrDefault(99) );
  getMongoosePropOrDefault(77, function(err, result){
    console.log('mongoose.data.77: '+result);
  });
  getMongoosePropOrDefault(99, function(err, result){
    console.log('mongoose.data.99: '+result);
  });
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:46:32.050

感谢您的回复。

事实证明，如果我只是为 Meta.data 设置一个默认值，那么我可以使用方括号 [] 而不是点表示法来查询数据中不存在的属性：

```
Meta.data[88] 
```

这解决了我的问题，这实际上与 js 相关，而不是 node 或 mongoose。当然，这在查询子属性时不起作用，例如：

```
Meta.data[88].something 
```

除非 88 确实存在。但同样 - 那只是 javascript ......

# javascript - Microsoft JScript 运行时错误：在 IE 中拒绝访问 Dropbox.js

> ID：14749522
> 
> 赞同：0
> 
> 时间：2013-02-07T11:00:54.387
> 
> 标签：javascript, internet-explorer

```
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.9.0/dropbox.min.js"></script> 
```

您好我正在使用上述文件来访问保管箱功能。它包含所有 Dropbox 功能。我将这个包含到我的应用程序中，并使用以下代码使用 writefile 函数将文件上传到保管箱。
这在 chrome 和 Mozilla 浏览器中运行良好，但在 IE 中出现错误。
**错误是：“Microsoft JScript 运行时错误：访问被拒绝”。**
请任何人帮助我如何解决 IE 错误并告诉我此错误仅针对 IE 浏览器的原因？

```
 var UploadToDropbox = new Dropbox.Client({ key: consumerKey, secret: consumerSecret, token: accessToken, tokenSecret: accessTokenSecret, dropbox: true });
            UploadToDropbox.authenticate(function (error, UploadToDropbox) {
                if (error) {
                    alert('Something wrong here.');
                }
                else {
                    UploadToDropbox.writeFile("HelloWorld.txt", "Hello, world!\n", function (error, stat) {
                        if (error) {
                            return showError(error);  // Something went wrong.
                        }
                        alert("File saved to your dropbox successfully. ");
                    });

                }
            }); 
```

嗨，谢谢您回复我的问题，我尝试过这样但仍然出现同样的错误。

好的，现在我应该怎么做才能解决这个错误。

我也试过这个

```
<script type="text/javascript">
        // Hack to make dropbox.js works in IE8, IE9.
        if (!window.btoa) window.btoa = base64.encode; 
        if (!window.atob) window.atob = base64.decode;
    </script> 
```

但同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:05:28.110

打开IE->工具-->Internet选项

在安全选项卡->选择区域为 Internet-->单击自定义级别按钮--->在杂项下的跨域访问数据源中选中“启用”。

似乎 IE 不能很好地处理触发 DOM 控件的 javascript 事件。因此，如果存在此类事件操作，请尝试删除它们。

通常意味着您正在尝试更新当前安全设置下不允许的属性或访问内容。

有时，它也会由于使用不推荐使用的方法而发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:37:11.363

你的问题中的黑客是没有必要的。dropbox.js 打包了它自己的`atob`/实现`btoa`，它在 IE <= 9 上使用。您可以通过访问IE 开发人员工具控制台中的`Dropbox.Util.atob`和进行尝试。`Dropbox.Util.atob`

base64 代码：[https ://github.com/dropbox/dropbox-js/blob/master/src/base64.coffee](https://github.com/dropbox/dropbox-js/blob/master/src/base64.coffee)

首先，请运行 checkbox.js 示例代码来检查您的 IE 设置。如果示例有效（您可以登录、添加任务、将它们标记为已完成并删除它们），那么您的 IE 设置正常，问题出在其他地方。

checkbox.js：[https ://dl-web.dropbox.com/spa/pjlfdak1tmznswp/checkbox.js/public/index.html](https://dl-web.dropbox.com/spa/pjlfdak1tmznswp/checkbox.js/public/index.html)

其次，确保您使用`https://`. Dropbox API 服务器使用 https，而 IE <= 9 不允许从 http 页面到 https 服务器的跨域请求。

第三，您不应该在`authorize`调用中需要 token 和 tokenSecret 参数。

如果您仍然收到 JScript 运行时错误，您能否指出导致它的代码行？另外，考虑在 dropbox.js GitHub 页面上打开一个问题。这将获得更快的响应。

# c# - 在调度程序上删除数据

> ID：14749527
> 
> 赞同：0
> 
> 时间：2013-02-07T11:01:16.373
> 
> 标签：c#, .net, devexpress

我将 Devexpress XtraSchedulercontrol 与拖放操作一起使用。我使用列表作为数据源，如果我想创建一个新的约会，可以从 Gridcontrol 拖放约会。到目前为止，一切都很好。

如果有人取消约会，我该如何检查权限？我知道 AppointmentDrop 事件并处理它，以便删除的约会不在我的 DataSource 中。但是 schedulercontrol 显示约会。我可以

```
Storage.RefreshData() 
```

但没有办法。我只是不想显示约会。关键是没有人应该能够在周日或节假日等创建约会。如果我不将约会加载到 DataSource 中，就无法理解为什么会显示约会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:24:56.623

我得到了正确的解决方案。

```
private void Scheduler_AppointmentDrop(object sender, AppointmentDragEventArgs e)
{
   if (isAllowed)
   {
      MyDataSource.Add(e.EditedAppointment);
   }
}

private void Scheduler_DragDrop(object sender, DragEventArgs e)
{
   SchedulerStorage.RefreshData();
} 
```

# django - Django rest 框架 - 过滤多对多字段

> ID：14749530
> 
> 赞同：5
> 
> 时间：2013-02-07T11:01:25.757
> 
> 标签：django, django-rest-framework

假设我有一个像这样的模型：

```
class Car(models.Model):
    images = models.ManyToManyField(Image)

class Image(models.Model):
    path = models.CharField()
    type = models.CharField() 
```

我想公开两个 API 视图：

*   汽车清单
*   汽车细节

在列表视图中，我只想显示 type="thumbnail" 的图像。在详细信息视图中，我想显示 type="image" 的图像。

这或多或少应该是列表的样子：

```
[{
    "id": 1,
    "images": [1, 2],
},
{
    "id": 2,
    "images": [3, 4],
}] 
```

和细节视图：

```
{
    "id": 1,
    "images": [5],
} 
```

请注意，根据视图显示不同的图像 ID。

到目前为止，我的序列化程序如下所示：

```
class CarSerializer(serializers.ModelSerializer):
    images = serializers.ManyPrimaryKeyRelatedField()

    class Meta:
        model = Car 
```

列表 api 视图：

```
class CarList(generics.ListAPIView):
    model = Car
    serializer_class = CarSerializer 
```

详细api视图：

```
class CarDetails(generics.RetrieveAPIView):
    model = Car
    serializer_class = CarSerializer 
```

这当然会为我提供列表中的所有图像以及详细信息，并迫使客户进行额外的调用以获取应显示的图像类型。

有什么通用的方法吗？我看过 django-filter 示例，但似乎只能过滤列出了哪些对象，而不是列出了列出的对象中的哪些相关对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-13T17:54:12.887

我不知道你是否还在寻找这个答案，但也许它可以帮助别人。

首先创建一个像这样的过滤器类：

```
class CarFilter(django_filters.FilterSet):
    having_image = django_filters.Filter(name="images", lookup_type='in')

    class Meta:
        model = Car 
```

然后将过滤器添加到您的视图中：

```
class CarList(generics.ListAPIView):
    model = Car
    serializer_class = CarSerializer
    filter_class = CarFilter 
```

就这样。将“？have_image = 1”添加到您的查询字符串中，Django 过滤器应该可以为您解决问题。

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T09:53:57.790

我发现了另一个 Stackoverflow 问题，它有一个可以在这里使用的解决方案：

[如何将过滤器应用于 Django REST 框架中的嵌套资源？](https://stackoverflow.com/questions/16821684/how-can-i-apply-a-filter-to-a-nested-resource-in-django-rest-framework?rq=1)

（请参阅问题本身的“解决方案”标题下）

# richfaces - Richfaces 4.x 的静态资源

> ID：14749531
> 
> 赞同：0
> 
> 时间：2013-02-07T11:01:27.490
> 
> 标签：richfaces

我正在将我的带有 Richfaces 的 Web 应用程序从 3.3.3 版本迁移到 4.1，但我在静态资源（主要是图像和 CSS）方面遇到了一些问题。我知道 JSF2 有一种机制来提供此类资源（将它们全部放在名为“resources”的文件夹下）。对此我有两个问题：

1.  是否可以将此文件夹更改为另一个文件夹？
2.  CSS中的相对路径会发生什么？我有许多与“背景图像”属性相关联的图像，但 Richfaces 4.1 无法正确解析它们。例如，我以这种方式加载分配在 /resources/css 中的 CSS：

    < h:outputStylesheet library="css" name="wdCalendar/calendar.css"/>

calendar.css 包含此类：

```
.cic {
   background-repeat: no-repeat;
   display: inline-block;
   background-image: url(images/calendar/combined.gif);
} 
```

Richfaces 将 url 解析为

```
http://nameApp/servletApp/javax.faces.resource/wdCalendar/images/calendar/combined.gif 
```

但我想应该是

```
http://nameApp/servletApp/resources/css/wdCalendar/images/calendar/combined.gif 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:47:17.553

1.  是的，您可以更改它，`src/main/webapp`文件夹（假设这是您项目中的样子）将`/your-app`在服务器上，您可以从那里使用绝对路径
2.  那是因为 h:outputStylesheet 将资源放在一种“抽象”文件夹中（我不知道具体情况，但它看起来就是这样）并让它由 servlet 处理，看看样式表链接的输出方式。有几种方法可以解决这个问题

    *   使用绝对路径

    `/your-app/resources/css/wdCalendar/images/calendar/combined.gif`

    *   或离开“抽象”文件夹的相对路径

    `../resources/css/wdCalendar/images/calendar/combined.gif`

    *   或使用 servlet 可以处理的相对路径

    `images/calendar/combined.gif.jsf?ln=css/wdCalendar` （注意 .jsf 是 web.xml 中定义的默认 servlet 映射，它在您的应用程序中可能看起来不同；它应该看起来与您的样式表链接看起来相同）。`ln`此外，只要将它放在一起，它是正确的路径，路径的哪一部分在（它可以是空的）中并不重要。

# c# - 代码优先模型外键属性 SocialDetails 为空，即使 ID 在数据库中匹配

> ID：14749533
> 
> 赞同：1
> 
> 时间：2013-02-07T11:01:29.007
> 
> 标签：c#, entity-framework, orm, visual-studio-2012, dbcontext

我正在尝试调试 DBContext 查询，生成的 SQL 如下所示

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
[Extent1].[SocialDetails_Id] AS [SocialDetails_Id]
FROM [dbo].[Items] AS [Extent1]
WHERE [Extent1].[Id] = @p__linq__0 
```

但是，即使我检查了数据库中的 ID，外键属性 SocialDetails 也是空的

```
 public class Item
    {
        public int Id { get; set; }
 public string Name { get; set; }

          [Required]
        public User User { get; set; }

          [Required]
        public SocialDetails SocialDetails { get; set; }
etc 
```

找出为什么 SocialDetails 始终为空的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:17:04.513

您可能禁用了延迟加载。

正如马特惠顿所建议的，尝试做这样的事情：

```
var items = from x in dbContext.Items.Include("SocialDetails")
            where x.Id = id
            select x; 
```

其中 dbContext 是您的上下文，并且您有一个名为 Items 的 DbSet

另请参阅此链接（MSDN）：

[加载相关对象](http://msdn.microsoft.com/en-us/library/vstudio/bb896272%28v=vs.100%29.aspx)

# c# - “方法...ClassInitialize 的签名错误...”是什么意思？

> ID：14749537
> 
> 赞同：23
> 
> 时间：2013-02-07T11:01:39.987
> 
> 标签：c#, unit-testing, visual-studio-2012, runtime-error

在我的 Visual Studio 2012 解决方案中，我有一个用于单元测试 C++/CLI 代码的 C# 项目，例如

```
...
using System.IO;
using Stuff;

namespace MyCLIClassTest
{
    [TestClass]
    public class MyCLIClassTest
    {
        public MyCLIClassTest() {}

        [ClassInitialize]
        public static void Setup(TestContext testContext) 
        {
        }

        [TestMethod]
        public void LibraryAccessTest()
        {
            ...
        }
    }
} 
```

现在，C# 测试全部失败，并显示类似“Method MyCLIClassTest.MyCLIClassTest.ClassInitialize 的签名错误。该方法必须是静态的、公共的、不返回值并且应该采用 TestContext 类型的单个参数。”

删除 ClassInitializer 后，我得到“无法为类 MyCLIClassTest.MyCLIClassTest 设置 TestContext 属性。错误：System.ArgumentException：'Microsoft.VisualStudio.TestPlatform.MSTestFramework.TestContextImplementation'类型的对象无法转换为'Microsoft.VisualStudio.TestTools'类型.UnitTesting.TestContext'..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-07T12:32:26.153

我使用了较旧的单元测试框架版本的 DLL。发生这种情况是因为该项目最近迁移到 VS2012。

因此，在测试项目下的解决方案资源管理器中，您可以找到“参考”。右键单击它并选择“添加参考...”以打开参考管理器。搜索“unittest”并检查版本号为 10.1.0.0 的 Microsoft.VisualStudio.QualityTools.UnitTestFramework。取消选中此程序集的所有其他版本。单击确定关闭管理器。

[![在此处输入图像描述](../Images/509c1a200efc5db8678763e0d0be7725.png)](https://i.stack.imgur.com/RJZHd.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-19T01:29:21.770

从重复问题复制的替代答案：[为什么 ClassInitialize 修饰的方法使我的所有测试都失败？](https://stackoverflow.com/questions/11297646/why-is-a-classinitialize-decorated-method-making-all-my-tests-fail)

装饰方法应该是静态的`[ClassInitialize]`，并且只接受一个 TestContext 类型的参数：

```
[ClassInitialize]
public static void SetupAuth(TestContext context)
{
    var x = 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-24T11:25:45.747

我遇到了完全相同的问题，并且按照 TobiMcNamobi 的建议删除/添加引用并没有为我解决，但是删除引用，右键单击项目并选择“添加 > 单元测试...”，从而重新生成引用工作。不确定与手动操作相比有什么区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-03T03:35:17.940

> 安装程序有错误的签名。参数 1 的类型应为 Microsoft.VisualStudio.TestTools.UnitTesting.TestContext。

我正在运行一个负载测试项目，并且拥有两个 v10.0.0.0 版本的 DLL：

```
Microsoft.VisualStudio.QualityTools.LoadTestFramework.dll
Microsoft.VisualStudio.QualityTools.WebTestFramework.dll 
```

将版本 LoadTestFramework 更改为版本 10.1 并没有修复它。

我必须转到我的单元测试项目并删除 MSTest.Adapter 引用：

```
Microsoft.VisualStudio.TestPlatform.TestFramework.dll
Microsoft.VisualStudio.TestPlatform.Extensions.dll 
```

然后在Unit Test Project中添加对v10.1的引用

```
Microsoft.VisualStudio.QualityTools.LoadTestFramework.dll 
```

# objective-c - 哪种方法更好/更清洁？

> ID：14749538
> 
> 赞同：1
> 
> 时间：2013-02-07T11:01:45.747
> 
> 标签：objective-c, uitableview

循环播放时

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {} 
```

方法即时将数据设置到我的自定义单元格（图像和文本）。我想知道实现这一目标的最佳方法是什么。

我可以使用 2 个不同的数组（图像数组和文本数组）并执行以下操作：

```
cell.image setImage: //get image from imageArray with indexPath.row
cell.text.text = [textArray objectAtIndex:indexPath.row]; 
```

或使用这样的多维数组：

```
cell.image setImage: [imageArray objectAtIndex:indexPath.row] objectAtIndex:0;
cell.text.text = [textArray objectAtIndex:indexPath.row] objectAtIndex:1;

// or use of dictionary with keys 
```

哪种方法更快或更易读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:30:20.773

我个人认为以下是最干净的解决方案：

*   为数组中的项目创建模型。
*   创建一个 UITableViewCell 子类以在单元格中显示模型。子类将具有接受模型并在模型更改时重绘自身的属性。

假设我们有一个新闻应用程序。该数组充满了我们为其创建模型 NewsItem 的项目。模型标题可能如下所示：

**新闻项目.h**

```
@interface FSNewsItem : NSObject <NSCoding>

@property (nonatomic, copy, readonly)   NSString *title;
@property (nonatomic, copy, readonly)   NSURL    *URL;
@property (nonatomic, copy, readonly)   NSString *time;
@property (nonatomic, copy, readonly)   NSString *points;
@property (nonatomic, copy, readonly)   NSString *author;

// initialiser
+ (FSNewsItem *)newsItemWithTitleNode:(HTMLNode *)node 
                          subTextNode:(HTMLNode *)subNode;

@end 
```

现在对于单元格，我们创建一个 NewsItemCell。NewsItemCell 的代码可能如下所示：

**NewsItemCell.h**

```
@interface FSNewsItemCell : UITableViewCell

@property (nonatomic, strong) FSNewsItem *newsItem;

@end 
```

**NewsItemCell.m**

```
@interface FSNewsCell ()

@property (nonatomic, strong) UILabel *titleLabel;
@property (nonatomic, strong) UILabel *detailLabel;

@end

@implementation FSNewsItemCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self)
    {
        self.titleLabel                       = [[UILabel alloc] init];
        [self addSubview:_titleLabel];

        self.detailLabel                      = [[UILabel alloc] init];
        [self addSubview:_detailLabel];
    }
    return self;
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    const CGRect bounds = self.bounds;
    CGFloat width = bounds.size.width - (FS_FLOAT_PADDING * 2) - 15.0f;
    _titleLabel.frame = CGRectMake(FS_FLOAT_PADDING, FS_FLOAT_CELL_PADDING_VERTICAL, width, 20.0f);

    CGFloat y = _titleLabel.frame.size.height + (FS_FLOAT_CELL_PADDING_VERTICAL * 2);
    _detailLabel.frame = CGRectMake(FS_FLOAT_PADDING, y, width, 15.0f);
}

#pragma mark - Private

- (void)setNewsItem:(FSNewsItem *)newsItem
{
    if (_newsItem == newsItem)
    {
        return;
    }

    _newsItem = newsItem;

    self.titleLabel.text = newsItem.title;

    if (_newsItem.points && _newsItem.time)
    {
        self.detailLabel.text = [NSString stringWithFormat:@"%@ | %@", _newsItem.points, newsItem.time];
    }
    else
    {
        self.detailLabel.text = newsItem.time;
    }

    [self setNeedsLayout];
} 
```

最后，当我们想在单元格中显示新闻项目时，我们的代码如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    FSNewsItemCell *cell = (FSNewsItemCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[FSNewsItemCell alloc] initWithStyle:UITableViewCellStylePlain reuseIdentifier:CellIdentifier];
    }

    cell.newsItem = [_items objectAtIndex:indexPath.row];

    return cell;
} 
```

在我看来，这是最干净的解决方案，也是我大部分时间采用的方法。我喜欢保持我的视图控制器很小。我也喜欢我的视图控制器不必知道我的（自定义）表格视图单元格具有哪些控件这一事实。根据提供的数据，表格视图单元完全负责如何绘制自身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:15:09.263

一个想法是创建一个自定义类：

```
@interface CellInfo : NSObject
@property (....) UIImage *image;
@property (....) NSString *text;
@end 
```

然后：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
...
    CellInfo *info = [self.cellInfoArray objectAtIndex:indexPath.row];
    cell.image = info.image;
    cell.text = info.text;
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:11:34.400

我会添加一个简单的数据类并将类实例放在`NSArray`. 或者使用 a `NSArray`of`NSDictionary`对象，以便可以按名称而不是位置来寻址项目。

示例类代码（这些天课程非常简单）：

```
@interface DisplayItems : NSObject
@property (nonatomic, strong) NSString *text;
@property (nonatomic, strong) UIImage *image;
@end

@implementation DisplayItems
@end 
```

# c# - 使用uri在c sharp windows phone 8中的图像控件中显示图像

> ID：14749539
> 
> 赞同：0
> 
> 时间：2013-02-07T11:01:48.647
> 
> 标签：c#, windows-phone-8

我有像[http://images.test.com/profiles/profile_28044497_75sq_1359604729.jpg](http://images.test.com/profiles/profile_28044497_75sq_1359604729.jpg)这样的图像链接“现在我想在 windows phone 8 的 c 锐利图像控件中添加这个图像。我已经包括使用 System.Windows.Media 但我无法获取 Bitmapimage 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:28:42.490

您需要添加以下`using`语句：

```
using System.Windows.Media.Imaging; 
```

然后

```
image.Source = new BitmapImage(new Uri("http://images.test.com/profiles/profile_28044497_75sq_1359604729.jpg", UriKind.Absolute)); 
```

# asp.net - ASP .Net MVC 3 Razor Entity Framework 中的下拉框

> ID：14749540
> 
> 赞同：0
> 
> 时间：2013-02-07T11:01:51.870
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, drop-down-menu

我是 ASP .NET 的新手，尤其是 ASP .Net MVC3 Razor...

我在 MVC3 Razor 中为客户和高管创建了视图。

我所做的是第一次创建了名为 Clients.cs 的模型

```
namespace MVCInetClient.Model

{
    [Table(&quot;tbl_Customer&quot;)]
    public class Clients
    {
      [Required,Key,DatabaseGenerated(DatabaseGeneratedOption.None)]
      [Display(Name = &quot;Client ID&quot;)]
      public int ClientId { get; set; }
      [Required]
      [Display(Name = &quot;Client Name&quot;)]
      public string ClientName { get; set; }
      [Required]
      [Display(Name = &quot;Executive Name&quot;)]
      public string ExecutiveName { get; set; }
     [Required]
      [Display(Name = &quot;Contact Name&quot;)]
      public string ContactPerson { get; set; }
      [Display(Name = &quot;Address&quot;)]
      public string Add1 { get; set; }
      [Display(Name = &quot; &quot;)]
      public string Add2 { get; set; }
      [Display(Name = &quot; &quot;)]
      public string Add3 { get; set; }
      [Display(Name = &quot;Pincode&quot;)]
      public string Pin { get; set; }
      [Display(Name = &quot;State&quot;)]
      public string State { get; set; }
      [Display(Name = &quot;Country&quot;)]
      public string Country { get; set; }
      [Display(Name = &quot;Phone&quot;)]
      public string Phone { get; set; }
      [Required]
      [StringLength(10)]
      [RegularExpression(&quot;\\d+&quot;)]
      [Display(Name = &quot;Mobile&quot;)]
       public string Mobile { get; set; }
      [Display(Name = &quot;Fax&quot;)]
      public string Fax { get; set; }
      [Display(Name = &quot;Email&quot;)]
      public string Email { get; set; }
      [Display(Name = &quot;Website&quot;)]
      public string Web { get; set; }
   }

     public class ClientsDbContext : DbContext
     {
        public DbSet&lt;Clients&gt; Clients { get; set; }
         public DbSet&lt;Executives&gt; Executives{ get; set; }
     }
  } 
```

之后，我使用脚手架选项创建了名为 ClientsController 的控制器，

```
Template : Controller With Read/Write actions and Views, using Entity Framework
Model Class : Clients (MVCInetClient.Models)
Data Context Class : ClientsDbContext (MVCInetClient.Models) 
```

它自动创建视图创建、编辑、索引、删除，并且工作正常。

同样，我为名为 Executives.cs 的模型做了

```
namespace MVCInetClient.Models
{
    [Table(&quot;tbl_Executive&quot;)]
    public class Executives
    {
        [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
        [Display(Name = &quot;Executive ID&quot;)]
        public int ExecutiveId { get; set; }
        [Required]
        [Display(Name = &quot;Executive Name&quot;)]
        public string ExecutiveName { get; set; }
        [Display(Name = &quot;Address&quot;)]
       public string Add1 { get; set; }
       [Display(Name = &quot; &quot;)]
        public string Add2 { get; set; }
        [Display(Name = &quot; &quot;)]
        public string Add3 { get; set; }
        [Display(Name = &quot;Pincode&quot;)]
        public string Pin { get; set; }
        [Display(Name = &quot;State&quot;)]
        public string State { get; set; }
       [Display(Name = &quot;Country&quot;)]
       public string Country { get; set; }
       [Display(Name = &quot;Phone&quot;)]
       public string Phone { get; set; }
       [Required]
       [StringLength(10)]
       [RegularExpression(&quot;\\d+&quot;)]
       [Display(Name = &quot;Mobile&quot;)]
       public string Mobile { get; set; }
       [Display(Name = &quot;Email&quot;)]
       public string Email { get; set; }

     }

     public class ExecutivesDbContext : DbContext
     {
        public DbSet&lt;Executives&gt; Executives { get; set; }
     }
 } 
```

这在所有视图中也工作正常（创建、编辑、删除）

我需要的是，我需要客户视图中的主管姓名下拉列表，而不是编辑器字段。

我看了一些教程，但我很困惑...请帮我解决它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:48:35.060

似乎您正在将 EF Code First 与 MVC 一起使用。

最简单的答案是您需要一个高管列表，将模型中的列表传递回您的视图，创建一个选择列表，然后呈现一个下拉列表。

```
public ActionResult Execx()
{
    Model Model = new Model();
    Model.execList = dbcontext.Executives;

    return View(Model);
} 
```

在您看来：

```
@Html.DropDownListFor(model => model.execId, new SelectList(Model.execList, "ExecutiveId", "ExecutiveName ")) 
```

这是未经测试的代码。我把这些碎片拼在一起给你这个想法。

# javascript - Raphael JS 变换缩放 - 圆角矩形

> ID：14749541
> 
> 赞同：1
> 
> 时间：2013-02-07T11:01:55.857
> 
> 标签：javascript, raphael

我有一个圆角矩形元素，但是每当我尝试使用变换对其进行缩放时，它就会从页面中消失 - 但我不明白为什么（如果我删除角半径变量它可以正常工作 - 所以它是一个标准矩形）

```
var shape=paper.rect(200, 300, 150, 100, '5');
var newelement=shape.clone();
newelement.transform("s0.8"); 
```

任何人都可以帮忙吗？或者这是图书馆的一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:45:38.577

发现问题 - 我的 '5' 应该只是 5（不是字符串！）

# c# - 插入 mdb 时出现语法错误

> ID：14749549
> 
> 赞同：0
> 
> 时间：2013-02-07T11:02:28.173
> 
> 标签：c#, sql, visual-studio-2010, ms-access, ms-access-2007

我在 c# 中为 mdb 文件编写了一个字符串`INSERT`，但在代码中捕获了错误“插入语句中的语法错误”。
我直接在其中测试字符串`Microsoft Access 2007`并插入查询，没有错误。

```
string qu = "INSERT INTO Reports ( docid, biopsy, normal, section, subsection, title, items, [text] ) VALUES (21, False, False, 'Recommendation', 'a', 'Injection', 'a', 'a');";
OleDbCommand cmd = new OleDbCommand();
OleDbDataAdapter da = new OleDbDataAdapter();
DataSet ds = new DataSet();
OleDbConnection con = Model.getDataConnection();

cmd.Connection = con;
cmd.CommandText = qu;
con.Open();
try
{
    cmd.ExecuteNonQuery();
}
catch (Exception ex)
{
    System.Windows.Forms.MessageBox.Show("data error!\n" + ex.Message);
    return false;
} 
```

* * *

在不幸的编辑之前显示正确括号的原始字符串。

```
string qu = "INSERT INTO Reports ( docid, biopsy, normal, [section], subsection, title, items, [text] ) VALUES (21, False, False, 'Recommendation', '', 'Injection', '', '');"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:49:18.150

*报告*、*部分*和*文本*都是[保留字](http://allenbrowne.com/AppIssueBadWord.html)。在 SQL 语句中将它们括在括号中。

```
INSERT INTO [Reports] (
    docid, biopsy, normal, [section], subsection, title, items, [text])
VALUES (
    21, False, False, 'Recommendation', 'a', 'Injection', 'a', 'a'); 
```

# ruby-on-rails - 为什么谷歌地图为rails gem创建零经度的位置？

> ID：14749553
> 
> 赞同：0
> 
> 时间：2013-02-07T11:02:45.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

我有这样的问题。我正在使用 google_maps_for_rails gem，它无法正确找到位置。我运行文档中的所有说明。

这是我的application.erb：

```
<%= yield :scripts%> 
```

我的模型：

```
attr_accessible :address, :latitude, :longtitude

acts_as_gmappable

def gmaps4rails_address 
  self.address
end 
```

但是当我创建位置时，我得到的对象是零经度。这是日志：

```
 INSERT INTO "locations" ("address", "created_at", "latitude", "longtitude", "name", 
"updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "Lviv"], ["created_at", Thu, 07 
Feb 2013 10:56:45 UTC +00:00], ["latitude", 49.839683], ["longtitude", nil], ["name",
 nil], ["updated_at", Thu, 07 Feb 2013 10:56:45 UTC +00:00]] 
```

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:16:47.137

查看您的代码：

```
attr_accessible :address, :latitude, :longtitude 
```

错字：`longtitude`

请注意，您可以[根据我的文档](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Model-Customization)个性化字段：

```
acts_as_gmappable :lat => "latitude", :lng => "longtitude" 
```

# performance - 什么最适合记录

> ID：14749554
> 
> 赞同：0
> 
> 时间：2013-02-07T11:02:46.337
> 
> 标签：performance, logging, umbraco

由于 Umbraco v6 决定默认实现对文本文件的日志记录，所以我想问一下你们使用哪种日志记录。

您是登录到生产网站上的文本文件，还是登录到数据库表？或者您是否实施任何其他类型的日志记录？

这对性能有何影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:47:21.450

我建议你使用 NLog。

有一次我调查了关于日志记录的最佳框架的问题，并在 NLog 上停止了。我已经在不同的项目中使用过它，它总是显示出很好的效果。

使用 NLog，您可以将日志发送到不同的目标：文件、数据库、事件日志、控制台、电子邮件、nlogviewer[等等](https://github.com/nlog/nlog/wiki/Targets)。

您可以在配置文件上设置所有配置。这是非常酷和有用的。您可以轻松设置写入日志的方式和位置。

您还可以使用 Wrapper Targets（请参阅文档中的数据）。在我看来，最有用的目标是 AsyncWrapper（提供目标写入的异步、缓冲执行）。它会给你很好的表现。

还有很多其他很酷的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:59:47.217

我在生产环境中同时使用两种类型的日志记录文件和数据库，因为我需要审核日志，因此需要将所有内容实际保存并保存。

我使用 nLog。 [http://nlog-project.org/](http://nlog-project.org/)

它健壮、快速、良好，从去年开始就一直在生产环境中使用它。它很好，可以让您在各个级别进行日志记录。

# unit-testing - NSubstitute VerifyAll 等效

> ID：14749557
> 
> 赞同：5
> 
> 时间：2013-02-07T11:02:50.637
> 
> 标签：unit-testing, mocking, moq, nsubstitute

NSubstitute 是否有相当于 MOQ 的`VerifyAll`调用？我想验证我希望在所有替代品中收到的所有调用实际上都被调用了，理想情况下是在一个`TearDown`方法中。我目前正在测试中单独验证每个收到的呼叫，这并不理想。对于初学者来说，任何在替代上设置但实际上并没有被调用的调用如果没有被单独明确地验证，就会漏网。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T12:03:18.370

您所描述的是严格模拟的行为。根据定义，严格的模拟只允许您明确配置和期望的东西。这会创建非常脆弱的测试，随着代码的更改，往往会经常中断，因此不鼓励使用 if strict mocks，并且新框架（例如 NSubstitute 或 FakeItEasy）根本不支持。

我建议为您需要验证的每种方法简单地创建两个测试：一个测试验证某个方法**是否被**调用，然后另一个测试在同一场景下验证其他方法**没有**被调用。因此，如果您的逻辑发生变化，并且在应该调用/不调用其中一种方法时，您只会破坏一个测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T11:19:25.970

NSubstitute 用于 AAA 风格的测试，而不是用于记录/重放。因此，它不支持它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-26T20:23:28.003

我知道这已经很老了，我不确定我属于松散与严格的哪一方，但对于 NSubstitute，您可以通过以下方式实现这一点（xUnit 风格）：

```
Assert.Empty(_logger.ReceivedCalls()); 
```

它向您显示特定模拟的所有已接电话，因此您只需确保此数字为 0。这可能是比以前更新的功能，但要确保它存在！:)

# spring - 如何使用spring 3，netbeans在原子提要中添加链接

> ID：14749564
> 
> 赞同：0
> 
> 时间：2013-02-07T11:03:09.193
> 
> 标签：spring, feed, netbeans-7, atom-feed

使用 spring3.2 和 netbeans 7.2

**警告代码：**

```
@Override
    protected List<Entry> buildFeedEntries(Map<String, Object> model,
            HttpServletRequest request, HttpServletResponse response) throws Exception {

        @SuppressWarnings("unchecked")
        List<Feed_vo> contentList = (List<Feed_vo>) model.get("feedContent");
        List<Entry> entries = new ArrayList<Entry>(contentList.size());

        for (Feed_vo content : contentList) {
            Entry entry = new Entry();
            String date = String.format("%1$tY-%1$tm-%1$td", content.getCreatedDate());
            entry.setId(String.format("tag:featuriz.com,%s:%d", date, content.getId()));
            entry.setTitle(String.format("%s | on %s by %s",content.getTitle(), date, content.getAuthor()));
            entry = setLink(content, entry);
            entry.setUpdated(content.getCreatedDate());

            Content summary = new Content();
            summary.setValue(content.getSummary());
            entry.setSummary(summary);

            entries.add(entry);
        }

        return entries;

    }

    private Entry setLink(Feed_vo vo, Entry entry) {
        ArrayList l = new ArrayList();
        Link link = new Link();
        link.setType("text/html");
        link.setHref(vo.getUrl());
        l.add(link);
        entry.setAlternateLinks(l);
        return entry;
    } 
```

**此代码有效，但 Netbeans 警告：**

```
/home/sudhakar/**/CustomAtomViewer.java:72: warning: [unchecked] unchecked call to add(E) as a member of the raw type java.util.ArrayList
        l.add(link);
1 warning 
```

如何解决此警告。

还告诉我 atom 和 rss feed 的正确格式。

（输出应该是什么样子。即输出源）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:30:23.957

此代码解决的警告：

```
List<Link> v = new ArrayList<Link>();
        Link link = new Link();
        link.setType("text/html");
        link.setHref(vo.getUrl());
        v.add(link);
        entry.setAlternateLinks(v); 
```

# c++ - Qt 和 C/C++ 之间的 IPC

> ID：14749567
> 
> 赞同：4
> 
> 时间：2013-02-07T11:03:17.010
> 
> 标签：c++, qt, ipc

我需要在两个进程之间发送/接收数据。其中之一将使用 Qt（4 或 5）。该进程将一直运行（如后台进程）。

另一个进程将被启动，然后它应该能够发送`argv`到第一个进程并`answer`从中接收一些。

第二个进程必须尽快启动，因此使用 QtCore 是最后的资源。这意味着我需要它尽可能小和快，所以我需要使用没有任何外部库的普通 C/C++。

有什么想法可以做到吗？

如果这不可能，我将不得不在第二个过程中使用 QtCore。您知道 QtCore 与普通 C/C++ 相比会慢多少吗？（就启动时间而言）。

问候

编辑：

我不能使用 QBus，因为它必须与 Mac/Linux/Windows 兼容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:35:34.777

如果它需要完全跨平台兼容，你最好的选择可能是命名套接字/命名管道，它应该在每个平台上都可以工作。[应该带您了解](http://doc.qt.io/qt-5/ipc.html#tcp-ip)套接字设置所需的信息。在纯 C++ 应用程序中仍然需要一些网络处理代码，但它的开销应该比 Qt-Core 和 Qt-Network 少得多。

你也可以用共享内存来做，但为了简单起见，我更喜欢套接字方法。

# python - 使用 python faliure 在文件中搜索字符串

> ID：14749568
> 
> 赞同：0
> 
> 时间：2013-02-07T11:03:30.093
> 
> 标签：python, string, file, python-3.x

我正在使用此代码在特定文件中搜索电子邮件并将它们写入另一个文件。我使用了“in”运算符来确保电子邮件不重复。但是此代码不会在该 `for line in f:`行之后执行。谁能指出我在这里犯的错误？

```
tempPath = input("Please Enter the Path of the File\n")
temp_file = open(tempPath, "r")
fileContent = temp_file.read()
temp_file.close()

pattern_normal = re.compile("[-a-zA-Z0-9._]+@[-a-zA-Z0-9_]+.[a-zA-Z0-9_.]+")

pattern_normal_list = pattern_normal.findall(str(fileContent))

with open('emails_file.txt', 'a+') as f:            
    for item in pattern_normal_list:            
        for line in f:
            if line in item:
                print("duplicate")
            else:
                print("%s" %item)
                f.write("%s" %item)
                f.write('\n') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:08:43.887

## 新解决方案：

```
tempPath = input("Please Enter the Path of the File\n")
temp_file = open(tempPath, "r")
fileContent = temp_file.read()
temp_file.close()

pattern_normal = re.compile("[-a-zA-Z0-9._]+@[-a-zA-Z0-9_]+.[a-zA-Z0-9_.]+")

addresses = list(set(pattern_normal.findall(str(fileContent))))
with open('new_emails.txt', 'a+') as f:
    f.write('\n'.join(addresses)) 
```

* * *

我认为你的逻辑*是*错误的，这有效：

```
addresses = ['test@wham.com', 'heffa@wham.com']

with open('emails_file.txt', 'a+') as f:
    fdata = f.read()
    for mail in addresses:
        if not mail in fdata:
            f.write(mail + '\n') 
```

没有过多阅读您的代码，看起来您正在逐行循环，检查您还循环通过的地址是否存在于该行中，如果您没有将您的电子邮件附加到它？但是在 100 行的 99% 中，地址不会在行中，因此您会得到不需要的添加。

我的代码片段的输出：

```
[Torxed@faparch ~]$ cat emails_file.txt 
test@wham.com
Torxed@whoever.com
[Torxed@faparch ~]$ python test.py 
[Torxed@faparch ~]$ cat emails_file.txt 
test@wham.com
Torxed@whoever.com
heffa@wham.com
[Torxed@faparch ~]$ 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-07T11:13:29.133

```
for line in f: 
```

你不应该先调用 f.readlines() 吗？

```
lines = f.readlines()
for line in lines: 
```

检查这个。

# php - Gearman 在 php 示例中抛出 GEARMAN_COULD_NOT_CONNECT

> ID：14749576
> 
> 赞同：3
> 
> 时间：2013-02-07T11:03:49.240
> 
> 标签：php, gearman

我在我的服务器上安装了 gearmand 1.1.5，并在启动服务器后尝试了安装提供的示例。它们工作得非常正确（回声示例工作，反向没有按预期工作，但没有给出任何错误）。

然后我使用 pecl 安装了 php 包装器。该版本是最后一个稳定版本（1.1.1）。显然我在 php.ini 中添加了扩展，我的 php --info|grep gearman 输出是：

```
gearman
gearman support => enabled
libgearman version => 1.1.5
PWD => /root/gearman-1.1.1/examples
OLDPWD => /root/gearman-1.1.1
_SERVER["PWD"] => /root/gearman-1.1.1/examples
_SERVER["OLDPWD"] => /root/gearman-1.1.1 
```

然后我尝试了pecl包中的echo示例，worker正确启动：

```
[~/gearman-1.1.1/examples]# php reverse_worker.php 
Starting
Waiting for job... 
```

相反，客户端给了我以下错误：

```
[~/gearman-1.1.1/examples]# php reverse_client.php 
Starting
Sending job
PHP Warning:  GearmanClient::do(): send_packet(GEARMAN_COULD_NOT_CONNECT) Failed to send server-options packet -> libgearman/connection.cc:430 in /root/gearman-1.1.1/examples/reverse_client.php on line 26
PHP Stack trace:
PHP   1\. {main}() /root/gearman-1.1.1/examples/reverse_client.php:0
PHP   2\. GearmanClient->do() /root/gearman-1.1.1/examples/reverse_client.php:26

Warning: GearmanClient::do(): send_packet(GEARMAN_COULD_NOT_CONNECT) Failed to send server-options packet -> libgearman/connection.cc:430 in /root/gearman-1.1.1/examples/reverse_client.php on line 26

Call Stack:
    0.0001     228408   1\. {main}() /root/gearman-1.1.1/examples/reverse_client.php:0
    0.0003     229552   2\. GearmanClient->do() /root/gearman-1.1.1/examples/reverse_client.php:26

RET: 26 
```

在 gearman 守护进程的日志中，这个 php 测试没有任何活动迹象，而它记录了我之前尝试过的所有示例。

我该如何解决这个错误？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T02:39:26.900

你应该总是使用`addServer("127.0.0.1", 4730)`, not `addServer()`，尽管 php 文档说了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T11:46:02.303

如果您使用过类似的东西

> $client->addServers('127.0.0.1', 4730);

或者

> $client->addServers();

仍然没有用然后使用这样的东西

> ***$client->addServers('127.0.0.1:4730');***

PS - 我使用了 localhost IP，这可以替换为实际的主机 IP。

# youtube - YouTube API v3 标准提要

> ID：14749577
> 
> 赞同：0
> 
> 时间：2013-02-07T11:03:51.487
> 
> 标签：youtube, youtube-api

您可以使用 API v3 查询 YouTube 标准提要吗？它们将来会被弃用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:15:58.467

YouTube API V3.0 中还没有标准提要，但我们正在为 V3.0 开发一种新机制。

# php - 得到不包括周末的剩余天数

> ID：14749579
> 
> 赞同：2
> 
> 时间：2013-02-07T11:03:55.207
> 
> 标签：php, mysql

我只想知道如何获得不包括周末的剩余天数。我尝试减去两个日期，但我似乎无法找到任何消除周末的解决方案。这是我的代码：

```
 $date_registered = date('Y-m-d');
            $date_planned = $_POST['start_date'];
            $dueDate = $date_registered;
            $numDays = 3;
            $counter = 1;
            while ($counter <= $numDays) {

               $dueDate = date("Y-m-d", strtotime(date("Y-m-d", strtotime($dueDate)) . " +1 day"));
               $dayOfTheWeek = date("l",strtotime($dueDate));

            if ($dayOfTheWeek == "Saturday" || $dayOfTheWeek == "Sunday") {
                   continue;
               }else {
                  $counter++;
               }

            }
            echo $date_registered.'<br>';
            echo $date_planned.'<br>';
            //echo $dueDate;
            $remaining_days = strtotime($date_registered) - strtotime($date_planned);
            echo $remaining_days/86400; 
```

我不知道如何排除周末。我希望你能帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:08:06.790

试试这个

```
$date = date('Y-m-d'); 
$total_days_left = (strtotime($end_date) - strtotime($current_date)) / (60 * 60 * 24);
while (strtotime($date) <= strtotime($end_date)) {
  $timestamp = strtotime($date);  
  $day = date('D', $timestamp); 

  if($day=='Sat' || $day=='Sun') {
    $count++ ; 
  }
  $date = date ("Y-m-d", strtotime("+1 day", strtotime($date)));
} 
```

如果您遇到任何问题，请告诉我。计数将提供这两天之间的周末天数。从中您可以轻松计算剩余天数。

```
$total_day_left_excluding_weekends = $total_days_left - $count; 
```

请参阅[**`date`**](http://php.net/manual/en/function.date.php)官方[**`strtotime`**](http://php.net/manual/en/function.strtotime.php)PHP 网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:12:56.147

```
$time = $sTime = START_TIMESTAMP;
$eTime = END_TIMESTAMP;
$count = 0;

while(date('w', $time) != 0) {
    $time += 86400;
}

while($time < $eTime) {
    $count++;
    $time += 7 * 86400;
} 
```

# jquery - 如何从 jquery 调用（asmx）http web 服务？

> ID：14749582
> 
> 赞同：1
> 
> 时间：2013-02-07T11:04:03.220
> 
> 标签：jquery, ajax, webservice-client

我正在尝试从 jQuery 函数调用**服务器**上的 asmx 服务，如下所示：

```
$('.myButton').click(function() {

                        $.ajax({
                                type: "POST",
                                url: "/http://myserver/service.asmx/GetProgramCategories",
                                cache: false,
                                contentType: "application/x-www-form-urlencoded",
                                data: "{}",
                                dataType: "json",
                                success: handleHtml,
                                error: ajaxFailed
                            });
                            });

    function handleHtml(data, status) 
    {
        for (var count in data.d) 
        {
        alert(data.d[count].Author);
        alert(data.d[count].BookName);
        }
    }

    function ajaxFailed(xmlRequest) 
    {
          alert(xmlRequest.status + ' \n\r ' + 
              xmlRequest.statusText + '\n\r' + 
              xmlRequest.responseText);
    } 
```

我已经调试过了，但它给了我**错误 500 Internal Server Error**

和服务器描述符如下：

HTTP POST

以下是一个示例 HTTP POST 请求和响应。显示的占位符需要替换为实际值。

```
POST /service.asmx/GetProgramCategories HTTP/1.1
Host: myhost
Content-Type: application/x-www-form-urlencoded
Content-Length: length

username=string&password=string

HTTP/1.1 200 OK 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:31:46.927

嘿，我终于得到了答案

这是代码：

```
function sendRequest(url,callback,postData) {
    var req = createXMLHTTPObject();
    if (!req) return;
    var method = (postData) ? "POST" : "GET";
    req.open(method,url,true);
    req.setRequestHeader('User-Agent','XMLHTTP/1.0');
    if (postData)
        req.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    req.onreadystatechange = function () {
        if (req.readyState != 4) return;
        if (req.status != 200 && req.status != 304) {
//          alert('HTTP error ' + req.status);
            return;
        }
        callback(req);
    }
    if (req.readyState == 4) return;
    req.send(postData);
} 
```

# javascript - 如何在不触发父元素 onclick 的情况下触发元素的 onclick？

> ID：14749584
> 
> 赞同：1
> 
> 时间：2013-02-07T11:04:05.930
> 
> 标签：javascript, css

我有一个多层下拉导航栏，悬停时会打开一个子类别菜单。将鼠标悬停在这些子类别上时，将显示进一步的子类别列表。

任何类别、子类别和子子类别都应该是可点击的链接，当点击这些链接时，将显示所需详细级别的搜索结果。ie food >>> mexican >>>tacos，可以点击三个中的任何一个，在搜索中获得所需的深度。

问题是，当我单击子类别时，因为它们嵌套在父 div 中，所以我也在单击父元素。

所以如果我有：

```
<ul>
<li onclick="queryfunction()">Category</li>
    <ul>
    <li onclick="queryfunction()">Sub-Category</li>
        <ul>
        <li onclick="queryfunction()">Sub-subCategory</li>
        </ul>
   </ul>
</ul> 
```

单击底部类别会触发所有 3 个 onclick 事件。

我怎样才能只触发我想要的一个事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:07:45.633

这通常被称为“事件冒泡”
您可以使用您可以在[此处](http://www.quirksmode.org/js/events_order.html)`event.stopPropagation()`
阅读主题 或近乎重复的[如何在复选框单击时停止事件冒泡](https://stackoverflow.com/questions/1164213/how-to-stop-event-bubbling-on-checkbox-click)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:13:46.940

您可以通过`type`变量传递变量，也可以为每个级别的类别`category,sub-category or sub-subcategory`提供变量，它也将帮助您完成这些功能。喜欢`this``class`

```
<ul>
<li class="category" onclick="queryfunction(this)">Category</li>
    <ul>
    <li class="sub-category" onclick="queryfunction(this)">Sub-Category</li>
        <ul>
        <li class="sub-subcategory" onclick="queryfunction(this)">Sub-subCategory</li>
        </ul>
   </ul>
</ul> 
```

因为在该函数中使用`event.stopPropagation()`pass a将解决您的问题。`event`

# excel - 根据日期宏下载excel文件名

> ID：14749586
> 
> 赞同：0
> 
> 时间：2013-02-07T11:04:08.410
> 
> 标签：excel, vba

我正在尝试编写一个将数据下载到文件中的宏，其中文件名包含昨天的日期。

“文本；[http:](http://www.mydomainname.co.uk/price_spiders_competitors_prices_gb/GBPS) //www.mydomainname.co.uk/price_spiders_competitors_prices_gb/GBPS AEG”＆格式（今天（） - 1，“yyyy-mm-dd”）＆“higher_than.csv”_，目的地：=范围（ "$A$1"))

这不起作用

“文本；[http:](http://www.mydomainname.co.uk/price_spiders_competitors_prices_gb/GBPS) //www.mydomainname.co.uk/price_spiders_competitors_prices_gb/GBPS AEG 2013-02-06 Higher_than.csv”_，目的地：=范围（“$A$1”））

这行！

任何想法，我都觉得破折号引起了问题，但它似乎也不喜欢我的 Today -1！

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:15:51.170

尝试使用函数 'Now()' 而不是 'Today()' 来获取当前日期和时间。

据我所知，excel在VBA中没有'today()'函数。您可以在公式中使用“today()”，但不能在 VBA 中使用。

# c++ - 什么时候在 `std::move()` 函数中调用移动构造函数？

> ID：14749587
> 
> 赞同：13
> 
> 时间：2013-02-07T11:04:09.530
> 
> 标签：c++, c++11, move-semantics, rvalue-reference

函数`std::move()`定义为

```
template<typename T>
typename std::remove_reference<T>::type&& move(T && t)
{ 
    return static_cast<typename std::remove_reference<T>::type&&>( t ); 
} 
```

我可以想象在四个地方调用移动构造函数：

1.  传递参数时。
2.  进行演员表时。
3.  返回结果时。
4.  不在`std::move()`函数本身，但可能在返回的引用最终到达的地方。

我会赌第 4 号，但我不是 100% 确定，所以请解释你的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T11:44:10.607

没有移动施工正在进行。`std::move()`接受一个引用并返回一个引用。`std::move()`基本上只是一个演员表。

您的猜测 4\. 是正确的（假设您实际上最终调用了移动构造函数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T11:36:15.567

std::move 只是一个类型转换，它告诉编译器该类型是一个右值。

# sql - postgres：使用 join 过滤掉一些结果

> ID：14749595
> 
> 赞同：1
> 
> 时间：2013-02-07T11:04:34.660
> 
> 标签：sql, postgresql

我正在尝试构建 SQL 查询（我正在运行 postgres），它会过滤掉一些帖子：

可以说，我有用户模型（id、名称等...）、黑名单模型（带有 id、user_id、blacklisted_user_id）和帖子模型（id、author_id、标题等）。

假设用户 A(id=5) 阻止了用户 B(id=10)。

用户 A 和 B 都不应看到他们的帖子。我正在尝试看起来某事的查询。像这样：

```
SELECT posts.* FROM "posts" 
LEFT JOIN blacklists b ON (b.user_id = posts.author_id OR 
                           b.blacklisted_user_id = posts.author_id)
WHERE (b.user_id = 5 AND b.blacklisted_user_id = posts.author_id) OR
      (b.user_id = posts.author_id AND b.blacklisted_user_id = 5) 
```

但是，结果与我需要的完全相反：我只收到来自黑名单用户的帖子。

当我使用`b.user_id != 5`时，我得到空的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:05:41.443

您正在重复 blacklisted_user_id=posts.author_id 这是不必要的。

然后，您可能想要与黑名单不匹配的帖子。就像是：

```
SELECT posts.* FROM posts 
LEFT JOIN blacklists b ON (b.user_id = posts.author_id OR 
                           b.blacklisted_user_id = posts.author_id)
WHERE posts.author_id = 5 AND b.user_id IS NULL 
```

那是你想要的那种东西吗？

# jquery - jQuery图像宽度和高度不适用于IE

> ID：14749597
> 
> 赞同：-1
> 
> 时间：2013-02-07T11:04:38.053
> 
> 标签：jquery, asp.net, explorer, document-ready

```
<script type="text/javascript">
     $(document).ready(function () {

         $("#aspnetForm img").load(function () {
             $(this).width(64);
             $(this).height(64);
         });
     });
</script>

 <asp:TemplateField>
                <ItemTemplate>
                <img alt="" runat="server" class="pic" style="cursor:pointer" src='<%# StripHTML(Eval("cat_img").ToString()) %>'  />
                </ItemTemplate>
                </asp:TemplateField> 
```

它适用于 Chrome，但不适用于 IE。请帮我。我的图像是`<p> <img src=....>`数据库中的 html 标签。我清除了 striphtml 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:06:09.157

`ready`事件使用时尚未加载图像，`$(window).load()`而是`ready`仅加载 DOM 结构，但不加载真实图像。就像你有`img`标签但还没有文件

* * *

好的，您的问题完全不同，您正在寻找这个，我的错误您只想迭代一些图像并使它们成为 64x64 应该可以工作

```
$(document).ready(function () {
    $("#aspnetForm img").each(function () {
         $(this).width(64).height(64);
    });
}); 
```

或者

```
$(document).ready(function () {
    $("#aspnetForm img").each(function () {
        $(this).css({width:64+'px',height:64+'px'});
    });
}); 
```

如果要获取每个图像的宽度，则应等待 img 加载

```
 $(window).load(function () {
     var width, height;
     $("#aspnetForm img").each(function () {
         width = $(this).width();
         height = $(this).height();
         //store the current img width or height or do whatever
     });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:27:16.730

试试这个：

```
$(document).ready(function () {
    $("#form img").css({"height":"64px","width":"64px"});
}); 
```

小提琴：http: [//jsfiddle.net/devWaleed/6eas3/4/](http://jsfiddle.net/devWaleed/6eas3/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:27:27.420

不要使用`.load()`，它已被弃用。

试试这个，应该适用于所有浏览器：

```
$(document).ready(function() {
    $('#aspnetForm img').css('width', '64px')
                        .css('height', '64px');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:40:06.127

试试这个：

参考：[http ://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

```
$(document).ready(function() {
    $("#aspnetForm img").load(function() {
        alert($(this).height());
        alert($(this).width());
    });
}); 
```

这是另一种方法：**[DEMO](http://jsfiddle.net/hS8ev/)**

```
function imageSize(img){
   var theImage = new Image();
   theImage.src = img.attr('src');
   var imgwidth = $(img).width();
   var imgheight = $(img).height();

   alert(imgwidth);
   alert(imgheight);
}

$('img').each(function(){
    var imgsrc = jQuery(this);
    imageSize(imgsrc);
}); 
```

# javascript - Javascript 时区转换在 Internet Explorer 中显示 NaN

> ID：14749600
> 
> 赞同：1
> 
> 时间：2013-02-07T11:04:42.450
> 
> 标签：javascript, internet-explorer

我正在使用以下 javascript 将 UTC 时间转换为用户本地时区...

```
(function() {
  (function($) {
    return $.fn.localtime = function() {
      var fmtDate, fmtZero;
      fmtZero = function(str) {
        return ('0' + str).slice(-2);
      };
      fmtDate = function(d) {
        var hour, meridiem;
        hour = d.getHours();
        if (hour < 12) {
          meridiem = "AM";
        } else {
          meridiem = "PM";
        }
        if (hour === 0) { hour = 12; }
        if (hour > 12) { hour = hour - 12; }
        return hour + ":" + fmtZero(d.getMinutes()) + " " + meridiem + " " 
      };
      return this.each(function() {
        var tagText;
        tagText = $(this).html();
        $(this).html(fmtDate(new Date(tagText)));
        return $(this).attr("title", tagText);
      });
    };
  })(jQuery);
    }).call(this); 
```

除了 Internet Explorer 之外，这一切在每个浏览器中都可以正常工作，而不是转换它只显示“NaN”的时间

谁能明白为什么会这样？

# liferay - 运行设置liferay门户的方法

> ID：14749609
> 
> 赞同：0
> 
> 时间：2013-02-07T11:04:59.210
> 
> 标签：liferay, installation, portal, custom-fields, expando

我有一个钩子，可以将组织和一些自定义字段变量（Expando 变量）自动添加到 liferay 门户。在 Liferay 设置期间或第一次启动 liferay 门户时，如何运行该钩子或钩子中的方法？有没有人有任何链接或代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:50:54.303

为了重申您的要求，您需要在 Liferay 服务器启动时执行一些自定义操作，因此据我了解，您需要[启动自定义操作挂钩](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/performing-a-custom-acti-4 "开发指南：使用钩子执行自定义操作")。

这不过是一个简单的钩子，您可以在其中覆盖一些属性，`portal.properties`并在该属性中提供一个自定义操作类，如`MyCustomStartupAction`or`MyCustomGlobalAction`并实现它。

在用户指南中，这里列出了您可以配置的一些属性：[启动事件](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/startup-events "Liferay 用户指南：启动事件")

这个[SO Answer](https://stackoverflow.com/a/10356947/468763 "StackOverflow 答案：覆盖 Liferay 启动事件")提供了有关创建具有此类属性的钩子的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:45:21.620

当您将该 Hook（war 文件）部署到您的服务器并重新启动它时，在 (bin) 日志中，您可以看到一条日志语句，说明您的特定 Hook 可以使用。这意味着您的 Hook 已成功部署到您的 Liferay 门户中。

要运行 Hook 或调用 Hook 中的特定方法，您需要调用编写 Hook 的流程。

例如，如果您编写了一个钩子`logout.events.post=`并且想要调用它，那么您需要从您的门户中注销。

在您的情况下，您已经编写了一个用于注册的 Hook。因此，您需要进行注册。请记住，您的 Hook 方法应该具有扩展`Action`类。

# c++ - 如何将静态库（SOIL）链接到 Visual Studio 2010 中的项目？

> ID：14749613
> 
> 赞同：4
> 
> 时间：2013-02-07T11:05:14.717
> 
> 标签：c++, visual-studio-2010, opengl, static-libraries, soil

我需要在我的项目中使用 SOIL lib。

我在我的源文件目录中包含了 SOIL.h 和 libSOIL.a（将其重命名为 libSOIL.lib）。

我已将头文件作为现有项目添加到标题中，并将头文件包含在另一个我需要的头文件中。

我也试过：项目属性>链接器>输入>附加依赖项，然后在下拉菜单中单击“<编辑..>”并键入libSOIL.lib。

但我收到这些错误：

**看下面（更新的错误）**

我应该怎么办？

**编辑＃1：**

这就是我正在做的事情：

```
#include "gl/glut.h"  
#include "SOIL.h" 
```

我的源目录中有两个文件。

没有从 SOIL 编写的任何代码，构建成功。

使用此代码：

```
/* load an image file directly as a new OpenGL texture */
GLuint grass_texture = SOIL_load_OGL_texture
(
    "original.bmp",
    SOIL_LOAD_AUTO,
    SOIL_CREATE_NEW_ID,
    SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
);
/* check for an error during the load process */
if( 0 == grass_texture )
{
    printf( "SOIL loading error: '%s'\n", SOIL_last_result() );
} 
```

我收到此错误：

> 错误 1 ​​错误 LNK2019：函数 _stbi_zlib_decode_noheader_buffer working_dir\libSOIL.lib(stb_image_aug.o) ProjectName 中引用的未解析的外部符号 __alloca
> 
> 错误 2 错误 LNK2019：未解析的外部符号 _sqrtf 在函数 _RGBE_to_RGBdivA2 working_dir\libSOIL.lib(image_helper.o) ProjectName 中引用
> 
> 错误 3 error LNK1120: 2 unresolved externals working_dir\Debug\ProjectName.exe ProjectName

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-17T18:40:34.310

我遇到了同样的问题。我的解决方案是转到项目/VCX 文件夹并自己编译解决方案，然后将生成的 .lib 文件复制到我的项目中。编译解决方案时，请确保选择正确的平台（X86/X64）。还要确保您的项目可以找到包含 .lib 文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:48:56.160

尝试在 SOIL.h 之前先包含您的 OpenGL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T19:12:43.020

在这些库使用之前

> # 包括 windows.h

因为您正在使用 Windows。您的问题将得到解决。

# java - 在 java 中加载 freemarker 模板时出现 FileNotFoundException

> ID：14749623
> 
> 赞同：14
> 
> 时间：2013-02-07T11:05:46.330
> 
> 标签：java, eclipse, freemarker, filenotfoundexception

在加载 freemarker 模板时，我得到一个文件未找到异常，即使该模板实际上存在于路径中。

更新：这是作为网络服务运行的。它将根据搜索查询向客户端返回一个 xml。当我从另一个 java 程序（从静态主程序）调用模板时，模板加载成功。但是当客户端请求 xml 时，会发生 FileNotFoundException。

操作系统：Windows 7 文件绝对路径：C:/Users/Jay/workspace/WebService/templates/

这是我的代码：

```
private String templatizeQuestion(QuestionResponse qr) throws Exception
{
    SimpleHash context = new SimpleHash();
    Configuration config = new Configuration();

    StringWriter out = new StringWriter();

    Template _template = null;

    if(condition1)
    {           
        _template = config.getTemplate("/templates/fibplain.xml");
    } 
    else if(condition2)
    {
        _template = config.getTemplate("/templates/mcq.xml");
    }
    context.put("questionResponse", qr);
    _template.process(context, out);

    return out.toString();
 } 
```

完整的错误堆栈：

```
 java.io.FileNotFoundException: Template /templates/fibplain.xml not found.
at freemarker.template.Configuration.getTemplate(Configuration.java:495)
at freemarker.template.Configuration.getTemplate(Configuration.java:458)
at com.hm.newAge.services.Curriculum.templatizeQuestion(Curriculum.java:251)
at com.hm.newAge.services.Curriculum.processQuestion(Curriculum.java:228)
at com.hm.newAge.services.Curriculum.processQuestionList(Curriculum.java:210)
at com.hm.newAge.services.Curriculum.getTest(Curriculum.java:122)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-07T21:53:49.440

FreeMarker 模板路径由一个`TemplateLoader`对象解析，您应该在对象中指定该`Configuration`对象。您指定为模板路径的路径由 解释`TemplateLoader`，并且通常相对于某种基目录（即使它以 开头`/`），因此也称为模板根目录。在您的示例中，您没有指定 any `TemplateLoader`，因此您使用的是 default `TemplateLoader`，它仅用于向后兼容，几乎没用（而且也很危险）。所以，做这样的事情：

```
config.setDirectoryForTemplateLoading(new File(
    "C:/Users/Jay/workspace/WebService/templates")); 
```

接着：

```
config.getTemplate("fibplain.xml"); 
```

请注意，`/template`前缀现在不存在，因为模板路径是相对于`C:/Users/Jay/workspace/WebService/templates`. （这也意味着模板不能使用`../`-s 退出它，这对安全性很重要。）

除了从真实目录加载外，您还可以`SerlvetContext`从“类路径”、“类路径”等加载模板。这完全取决于`TemplateLoader`您选择的内容。

另见： http: [//freemarker.org/docs/pgui_config_templateloading.html](http://freemarker.org/docs/pgui_config_templateloading.html)

更新：如果你得到`FileNotFoundException`而不是`TemplateNotFoundException`，是时候将 FreeMarker 升级到至少 2.3.22。它还提供了更好的错误消息，例如，如果您犯了使用默认值的典型错误`TemplateLoader`，它会在错误消息中告诉您正确的信息。减少浪费的开发人员时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-26T14:33:41.853

你可以这样解决这个问题。

```
public class HelloWorldFreeMarkerStyle {
    public static void main(String[] args) {

         Configuration configuration = new Configuration();

         configuration.setClassForTemplateLoading(HelloWorldFreeMarkerStyle.class, "/");

        FileTemplateLoader templateLoader = new FileTemplateLoader(new File("resources"));
        configuration.setTemplateLoader(templateLoader);

        Template helloTemp= configuration.getTemplate("hello.ftl");
        StringWriter writer = new StringWriter();
        Map<String,Object> helloMap = new HashMap<String,Object>();
        helloMap.put("name","gokhan");

        helloTemp.process(helloMap,writer);

        System.out.println(writer);

    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-09T11:18:09.660

实际上，您应该为要放置模板的目录指定绝对路径（而不是相对路径），请参阅 FreeMaker。[配置](https://freemarker.apache.org/docs/api/freemarker/template/Configuration.html)：

```
setDirectoryForTemplateLoading(java.io.File dir)
Sets the file system directory from which to load templates.    
Note that FreeMarker can load templates from non-file-system sources too. See setTemplateLoader(TemplateLoader) from more details. 
```

例如，这是从 src/test/resources/freemarker 获取模板的方法：

```
private String final PATH = "src/test/resources/freemarker"
// getting singleton of Configuration
configuration.setDirectoryForTemplateLoading(new File(PATH))
// surrounded by try/catch 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:16:10.873

Java VM 无法`/templates/fibplain.xml`在指定位置找到您的文件。这是`an absolute path` 并且您很可能会与 混淆`relative path`。为了得到更正，请正确使用完整（即绝对）路径，如`/home/jaykumar/templates/fibplan.xml($TEMPLATE_HOME/fibplan.xml)`. 其他可能性是，如果您确实有 /templates/ 这样的位置，您可能没有在该位置放置 fibplain.xml。对我来说，只有这两个是最合理的原因。我认为它是 linux 发行版之一，因为分隔符是`/`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-15T21:34:27.617

这项工作就像一个魅力，

```
package tech.service.common;

import freemarker.cache.FileTemplateLoader;
import freemarker.cache.TemplateLoader;
import freemarker.template.Configuration;
import freemarker.template.Template;
import freemarker.template.TemplateException;
import freemarker.template.Version;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.stereotype.Service;
import org.springframework.ui.freemarker.FreeMarkerTemplateUtils;
import javax.mail.MessagingException;
import javax.mail.internet.MimeMessage;
import java.io.File;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.HashMap;
import java.util.Map;

@Service
public class MailingService {

    @Autowired
    private JavaMailSender sender;

    public MailResponseDto sendEmail(String mailTo,String Subject) {
        MailResponseDto response = new MailResponseDto();
        MimeMessage message = sender.createMimeMessage();
        Configuration config = new Configuration(new Version(2, 3, 0));

        try {
            // set mediaType
            MimeMessageHelper helper = new MimeMessageHelper(message, MimeMessageHelper.MULTIPART_MODE_MIXED_RELATED,
                    StandardCharsets.UTF_8.name());
            TemplateLoader templateLoader = new FileTemplateLoader(new File("src/main/resources/template"));
            config.setTemplateLoader(templateLoader);
            // add attachment
            helper.addAttachment("logo.png", new File("src/main/resources/static/images/spring.png"));
            Template t = config.getTemplate("email_template_password.ftl");
            Map<String, Object> model = new HashMap<>();
            model.put("Name", "ELAMMARI Soufiane");
            model.put("location", "Casablanca,Morocco");
            String html = FreeMarkerTemplateUtils.processTemplateIntoString(t, model);

            helper.setTo("example@gmail.com");
            helper.setText(html, true);
            helper.setSubject(Subject);
            sender.send(message);

            response.setMessage("mail send to : " + mailTo);
            response.setStatus(Boolean.TRUE);

        } catch (MessagingException | IOException | TemplateException e) {
            response.setMessage("Mail Sending failure : "+e.getMessage());
            response.setStatus(Boolean.FALSE);
        }

        return response;
    }
} 
```

# java - SAX：针对 XSD 验证的 XML - 如何获取不正确的属性名称

> ID：14749627
> 
> 赞同：2
> 
> 时间：2013-02-07T11:06:00.827
> 
> 标签：java, xml, validation, xsd, sax

我正在使用 SAX 针对 XSD 验证 XML 并对其进行解析。为了处理验证问题，我使用自定义 ErrorHandler。

问题是，如果验证出错，我能得到的唯一反馈是 linenumber/columnnumber（在 SAXParseException 中），它指定了标签的开头 + 标签名的位置。

如果违反 xsd 限制，有什么方法可以获取特定属性的名称？

# html - 为什么样式表在评论中？

> ID：14749629
> 
> 赞同：3
> 
> 时间：2013-02-07T11:06:02.457
> 
> 标签：html, css

```
<style type="text/css">
<!--
.style1 {
    color: #666666;
    font-weight: bold;
}
.style8 {font-size: 12px; color: #333333; }
.style9 {
    font-size: 12px;
    font-weight: bold;
    color: #FFFFFF;
}
.style12 {font-size: 12px; font-weight: bold; color: #666666; }
.style13 {font-size: 12px; font-weight: bold; color: #0066FF; }
.style14 {
    color: #0043A8;
    font-size: 16px;
}
.style15 {color: #FFFFFF}
.style16 {color: #990000}
.style18 {color: #990000; font-size: 12px; }
.style20 {font-size: 12px; font-weight: bold; color: #575757; }
-->
</style> 
```

上面的样式表包含在`<!-- -->`html 注释标记中。为什么？我无法得到有效的解释；有些教程会这样做，而有些则不会（比如[http://www.w3schools.com/css/css_howto.asp](http://www.w3schools.com/css/css_howto.asp)我认为这是非常有效的参考）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:12:33.693

这不是评论...这是一种从旧浏览器解析器（主要是 IE6-）隐藏此类文本块的方法

这与在标签上使用[CDATA](http://en.wikipedia.org/wiki/CDATA)技术相同......以**保护对非常奇怪的引擎（主要是 IE）的数据解析错误**:)`<script>`

 **虽然**正确的方法**是使用：

# 风格

```
<style type="text/css">
/*<![CDATA[*/
    body { color: yellow; }     
/*]]>*/
</style> 
```

# 对于脚本

```
<script type="text/javascript">
//<![CDATA[
    $(function() { ... });
//]]>
</script> 
```

`CDATA`在这两种情况下使用都是**正确且安全的方式**，*注释*方式只是完成相同最终结果的技巧。

* * *

现在，关于您在指出 W3Schools 时**我认为是非常有效的参考，请看一下：**

> [http://w3fools.com/](http://w3fools.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:12:44.163

这是一种过时的方法，可以向比引入`<style>`或`<script>`标记的标准更早的浏览器隐藏内容。

这种习惯不再有效，实际上会导致比它解决的问题更多的问题。

除非您正在为生活在 1990 年代的人们开发一个网站（就像 w3schools 的编辑一样）......不要这样做！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:09:13.107

这样做是为了避免在一些不了解`<style>`标记的（旧）浏览器中显示脚本内容。看到[这个](http://lachy.id.au/log/2005/05/script-comments)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T11:11:20.653

对于不支持 CSS/style 标记的旧浏览器来说，这是一个 hack……见[http://www.w3.org/TR/html4/present/styles.html#h-14.5](http://www.w3.org/TR/html4/present/styles.html#h-14.5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T11:09:56.883

很少有浏览器将`non-HTML`代码视为纯文本。此注释用于引导该浏览器，即代码已注释，因此不会`browsers`将其显示为 html 输出。**

# visual-studio-2010 - 在 Visual Studio 2010 中将文本编辑器设置为只读？

> ID：14749630
> 
> 赞同：1
> 
> 时间：2013-02-07T11:06:02.790
> 
> 标签：visual-studio-2010

我在 Notepad++ 中遇到了“设置只读”选项（它将文本设置为只读），所以我想知道 Visual Studio 2010 是否有这个选项。我的 Notepad++ 截图如下。我是新手，所以如果这是愚蠢的问题，请原谅我......！

我的记事本++截图

我没有足够的屏幕截图声望点，所以这里是链接

[http://www.flickr.com/photos/93046100@N08/8453289064/in/photostream](http://www.flickr.com/photos/93046100@N08/8453289064/in/photostream)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:39:03.210

Visual Studio 没有这样的功能。

要达到类似的效果，您有两种选择：

1）在操作系统级别的各个文件上设置“只读”标志（转到文件位置 -> 文件属性 -> 只读复选框）。这种方法的缺点是您必须单独标记每个文件。

2) 将您的项目添加到任何 SVN 并锁定整个项目或任何文件/文件。这种方法的好处是：可以同时处理多个文件，只有锁定文件的人才能解锁它们

# etl - 将 Talend ETL 作业公开为 Web 服务

> ID：14749634
> 
> 赞同：5
> 
> 时间：2013-02-07T11:06:22.610
> 
> 标签：etl, talend, data-integration

我目前正在评估 Talend ETL（Talend Open Studio for Data Integration）。

我想知道如何/是否可以将 ETL 作业公开为 Web 服务。

我知道我可以将作业导出为 Web 服务并通过特定的 URL 调用它们，但是我的目标是能够使用 IN / OUT 参数公开特定的 WSDL。

一个示例用例是：

1) 在 Talend ETL 中调用 WS 并将 XML 与数据一起传递

2) Talend ETL 从 XML 中提取数据，并将它们作为变量插入到要针对 DB 执行的查询中。

3) Talend ETL 将结果集从 DB 转换为 XML 数据并响应回 WS 客户端。

最后，我还想知道是否可以将相同的场景公开为 REST 服务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T12:05:25.907

对于这种用途，您必须使用 Talend ESB。
Talend 网站上有一个很好的教程，用于在 mysql 数据库中通过查询公开 REST 服务：
[如何创建 REST 服务](http://www.talendforge.org/tutorials/tutorial.php?language=English&idTuto=104)

更多关于 Talend ESB 的教程可以在[这里](http://www.talendforge.org/tutorials/menu.php)找到。

# android - Android 2.3 webview文件上传问题

> ID：14749637
> 
> 赞同：1
> 
> 时间：2013-02-07T11:06:32.760
> 
> 标签：android, file-upload, webview

我正在使用 webview 运行我的网络应用程序，在我的应用程序中，我允许用户将图像上传到我的服务器，在 android > 3 上一切正常，在 Android 2.3.3 浏览器上它也可以按预期工作，但在webview 该文件未填充，并且我的服务器正在获取一个空对象。只有当我从相机拍照时才会发生这种情况（即常规画廊工作正常）。我注意到 Uri 与 file:/// 和 content:/// 不同

附件是我的代码：HTML（我的简单测试页面）：

```
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
<form id="fuForm" name="fuForm" action="/questions/upload" method="POST" enctype="multipart/form-data">

    <label for="fileToUpload">Select a File to Upload</label><br />
    <input type="file" name="fileToUpload" id="fileToUpload"/>
    <input type="submit"/>
</form>
</body>
</html> 
```

主要活动代码：

```
 webView = (WebView) findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setBuiltInZoomControls(true);
    webView.getSettings().setSavePassword(false);
    webView.getSettings().setSaveFormData(false);
    webView.setWebViewClient(new MyWebViewClient());
    webView.setWebChromeClient(new MyWebChromeViewClient());  
    webView.loadUrl(url);

    private class MyWebViewClient extends WebViewClient {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        }

        private class MyWebChromeViewClient extends WebChromeClient {
            //@Override
            public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType )  {      
                 File imageStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "MyApp");
                // Create the storage directory if it does not exist
                if (! imageStorageDir.exists()){
                    imageStorageDir.mkdirs();                  
                }
                File file = new File(imageStorageDir + File.separator + "IMG_" + String.valueOf(System.currentTimeMillis()) + ".jpg");  
                imageUri = Uri.fromFile(file); 

                final List<Intent> cameraIntents = new ArrayList<Intent>();
                final Intent captureIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                final PackageManager packageManager = getPackageManager();
                final List<ResolveInfo> listCam = packageManager.queryIntentActivities(captureIntent, 0);
                for(ResolveInfo res : listCam) {
                    final String packageName = res.activityInfo.packageName;
                    final Intent intent = new Intent(captureIntent);
                    intent.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
                    intent.setPackage(packageName);
                    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
                    cameraIntents.add(intent);
                }

                uploadMessage = uploadMsg; 
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
                intent.addCategory(Intent.CATEGORY_OPENABLE);  
                intent.setType("image/*"); 
                Intent chooserIntent = Intent.createChooser(intent,"Image Chooser");
                chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, cameraIntents.toArray(new Parcelable[]{}));
                activity.startActivityForResult(chooserIntent,  FILECHOOSER_RESULTCODE); 
            }

   // For Android < 3.0
        @SuppressWarnings("unused")
        public void openFileChooser(ValueCallback<Uri> uploadMsg) {
            openFileChooser(uploadMsg, "");
        }

    }

   @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        // super.onActivityResult(requestCode, resultCode, intent);
        if (resultCode == RESULT_OK && requestCode == FILECHOOSER_RESULTCODE) {
            if (null == uploadMessage)
                return;
            final boolean isCamera;
            if (intent == null) {
                isCamera = true;
            } else {
                final String action = intent.getAction();
                if (action == null) {
                    isCamera = false;
                } else {
                    isCamera = action
                            .equals(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                }
            }
            Uri result;
            if (isCamera) {
                result = imageUri;
            } else {
                result = intent == null ? null : intent.getData();
            }
            uploadMessage.onReceiveValue(result);
        } else {
            uploadMessage.onReceiveValue(null);
        }
        uploadMessage = null;
    } 
```

任何帮助将不胜感激...

乔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T14:29:37.897

我遇到了同样的问题，但经过长时间的研究，我自己找到了解决方案。

在 Android 2.3.3 上，webview 不支持带有文件协议 (file:///) 的 Uri。在调用uploadMessage.onReceiveValue之前，我们需要将图片的Uri转换为内容协议Uri(content:///)。下面代码中的变量imageFilePath是摄像头采集到的图片文件的绝对路径。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    // super.onActivityResult(requestCode, resultCode, intent);
    if (resultCode == RESULT_OK && requestCode == FILECHOOSER_RESULTCODE) {
        if (null == uploadMessage)
            return;
        final boolean isCamera;
        if (intent == null) {
            isCamera = true;
        } else {
            final String action = intent.getAction();
            if (action == null) {
                isCamera = false;
            } else {
                isCamera = action.equals(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            }
        }
        Uri result;
        if (isCamera) {
            **String mediaUri =MediaStore.Images.Media.insertImage(getContentResolver(),imageFilePath,"","");
            result = Uri.parse(mediaUri);**
        } else {
            result = intent == null ? null : intent.getData();
        }
        uploadMessage.onReceiveValue(result);
    } else {
        uploadMessage.onReceiveValue(null);
    }
    uploadMessage = null;
} 
```

# c++ - 位域大小不符合预期，为什么？

> ID：14749639
> 
> 赞同：0
> 
> 时间：2013-02-07T11:06:37.600
> 
> 标签：c++, visual-c++, bit-fields

为什么这个位域的大小为 4？
有什么办法可以让它的大小为 2（显然在下面的代码中打算这样做），或者这不可能干净地做到吗？

```
struct S
{
    unsigned short x : 15;
    bool a : 1;
};

int main() { return sizeof(S); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:23:08.450

使用标准 C++ 是不可能的，但可以为您的结构使用编译器特定的编译指示或属性。

在 VC++ 中，它是`#pragma pack`

同样要获得 2 的大小，您必须这样做：

```
#pragma pack(1)
struct s{
  unsigned short s1: 15;
  unsigned short b1: 1;
}; 
```

* * *

使用`#pragma pack`您的代码如下：

```
struct S
{
    unsigned short x : 15;
    bool a : 1;
}; 
```

一个假设的内存布局是：

```
----------------------
+ 1 | 2 | 3 | 4 | 5 | ..
+   x   | a |
+--------------------- 
```

因此它占用3个字节

改变你`bool a`得到`unsigned short a`这个：

```
-------------------------
+ 1 | 2 | 3 | 4 | 5| ..
+   x |a|
------------------------- 
```

其中仅占用 2 个字节。

编译器决定，由于第二个 short 只占用 1 位，因此可以将结构压缩为 2 个字节。但是，如果使用了另一种类型的结构成员（例如`bool`在您的实现中`S`），编译器认为，由于类型不同，它实际上不能将 1 位压缩到其中`unsigned short`（因为它跨越了类型边界 - 不幸的是实现定义）。因此你得到`3`字节`sizeof()`而不是 2。

# context-free-grammar - 是否正确使用了泵引理？

> ID：14749643
> 
> 赞同：1
> 
> 时间：2013-02-07T11:07:22.310
> 
> 标签：context-free-grammar, pumping-lemma

我试图通过 Pumping Lemma 证明以下语言不规则。但我不确定我是否做得正确。

{L = a ^(2 ^n) | n>= 0 }

到目前为止，我所做的如下：

s = a ^(2 ^p)

x = 一个^(2^我)

y = a ^(2 ^j)

z = a ^(2 ^(p-ij))

因此 xy ² z = a ^(2 ^(p+j))

这意味着 a ^(2 ^(p+j)) > a ^(2 ^p) ，使语言不规则

我做得对吗？还是我有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:42:35.280

不完全是，你得出了正确的结论，但推理有点不对劲。[Pumping 引理](http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages "抽引理")指出，对于每种常规语言，都`L`存在一个整数，其中每个长度大于或等于的`p >= 1`字符串都可以写成满足以下条件：`s``p``s = xyz`

1.  `y`非空
2.  xy ≤ p 的长度
3.  xy ^i z 是`L`所有 i ≥ 0的语言

您的第一步是正确的，s = a ^(2 ^p)确实比 p 长。然而，抽水引理指出 s 可以被划分为`s = xyz`满足上述条件。换句话说，*存在*s as 的除法`s = xyz`，但是除了知道它应该满足上述三个属性之外，您无法选择该除法是什么。

在您的情况下`L`，语言仅由 a 组成，其中 a 的数量是 2 的幂。现在采用 s = a ^(2 ^p)，我们知道下一个最长的字符串`L`是 (a ^(2 ^p) ) ²。从那里，如果前两个条件成立，可以看出第三个条件肯定不能成立`i = 2`，因为 a ^(2 ^p) < xy ² z < (a ^(2 ^p) ) ²。（在简单的英语中，xy ² z 的长度介于 2 的幂之间，所以它不是`L`像普通语言那样的语言）

# scala - 为什么'0.3 * 3'的结果在scala语言中是0.89999999999999？

> ID：14749647
> 
> 赞同：-4
> 
> 时间：2013-02-07T11:07:34.667
> 
> 标签：scala, floating-point, floating-accuracy

为什么Scala中乘法0.3和3的结果是0.89999999999999？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T11:13:41.683

浮点计算是相当复杂的主题。

这与浮点数的二进制表示有关，它不能保证每个可能的数字（显然）都有精确的表示，这可能导致操作错误，是的，这些错误可以传播。

这是有关该主题的链接，虽然它不是最简单的东西，但如果您想了解该主题，它可以为您提供一个很好的视角。

[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

底线问题是，对于给定的浮点数，一个有理数，该数字的二进制表示可能需要比给定语言中可用的精度更高的精度。

例如，如果您使用 24 位来存储双精度数，但浮点值的二进制表示需要 25 位才能准确表示，则会出现舍入误差。

编辑：

正如 Péter Török 在评论中指出的那样，大多数已知的编程语言对常见的数据类型使用相同的表示，`float`-> 32 位，`double`-> 64 位，因此无论语言如何，通常都可以考虑数据类型来计算精度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T11:11:55.070

不仅在 Scala 中如此，在任何使用 IEEE 浮点数标准的语言/平台中都是如此。

红宝石中的示例：

```
0.1.9.2p320 :001 > 0.3 * 3
 => 0.8999999999999999 
```

或 Python：

```
>>> 0.3 * 3
0.8999999999999999 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T11:16:02.560

这几乎与 Scala 无关！

原因与计算机如何表示浮点数有关。计算机使用二进制表示，而不是十进制表示，因此诸如 0.3 之类的数字不能精确表示，而是使用可以简洁地以 2 为基数表示的近似值。结果是对这些数字执行的操作可能会稍微超出您期望的答案。有关更多详细信息，请参阅[浮点数](http://en.wikipedia.org/wiki/Floating_point)。

如有必要，您可以通过实现类之`Fraction`类的东西来解决这个问题，该类使用自己的算法来精确地执行这些计算。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T13:42:27.923

如果需要精确值，请使用 BigDecimal。

`BigDecimal(3)*0.3`会给你0.9

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T11:17:30.137

这是常用浮点值表示的副作用。

我经常遇到这个问题并制作一个简单的函数，将数字“四舍五入”到最接近的大于期望精度的值。它在 C 中为：

```
int64_t __pow10_arr[18] = { 1l, 10l, 100l, 1000l, 10000l, 100000l,
                            1000000l, 10000000, 100000000l, 1000000000l, 10000000000l, 100000000000l,
                            1000000000000l, 10000000000000l, 100000000000000l, 1000000000000000l, 10000000000000000l, 100000000000000000l };

double roundToNfractions ( double val, uint8_t n )
{
  val *= __pow10_arr[n];
  val += 0.5;
  val = (uint64_t) val;
  val /= __pow10_arr[n];
  return val;
} 
```

效率不是很高，但可以解决问题，因为您可以安全地编写 `printf("%.2d", val);`，并且您总是会得到类似的结果，`3.00`而不是`2.99`;

# android - apk 应该使用与之前版本相同的证书签名

> ID：14749649
> 
> 赞同：2
> 
> 时间：2013-02-07T11:07:43.913
> 
> 标签：android

我正在我不再有权访问的计算机上开发（我有密钥库文件的备份）。我使用 Eclipse 并在其中为我的 1.0 版本创建了我的密钥库。现在我想发布第二个版本并在我的新计算机上使用备份密钥库。我在 Eclipse 中使用备份密钥库签署了我的 apk，并尝试在 google play 中发布更新版本，但收到此错误：

```
"The apk should be signed by the same certificate as the previous version". 
```

任何人都可以在这方面帮助我。

**注意**：我在清单文件中增加了第二版的版本名称和版本代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:10:05.497

看看这个链接：

[在市场上上传 apk 时，apk 必须使用与以前版本相同的证书进行签名](https://stackoverflow.com/questions/12084566/the-apk-must-be-signed-with-the-same-certificates-as-the-previous-version-while)

同样的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:10:41.120

尝试运行

```
jarsigner -verify -verbose -certs android_app 
```

在以前的和新的应用程序上检查`CERT.RSA`每个应用程序的文件名，以确保您使用的是正确的密钥库。

还要检查[https://stackoverflow.com/a/4843282/1434631](https://stackoverflow.com/a/4843282/1434631)

# html - 可接受的负边距？

> ID：14749650
> 
> 赞同：0
> 
> 时间：2013-02-07T11:07:45.237
> 
> 标签：html, css

我已经使用 Skeleton 样板创建了一个网站，以便它具有响应性并且可供移动用户使用，除了联系页面之外的所有页面都有一个**全宽背景图像**，但**没有设置为背景图像它是一个 img 标签**，我已经给出了**内容覆盖它一个负边距**。

原因如下：

1.  我需要它是全宽和内容；骨架样板具有左右边距，因此我无法在内容上设置背景图像。
2.  我还需要包含 div 的图像始终是图像的全高，但图像高度不是设置大小，它响应浏览器宽度并保持其纵横比。
3.  该图像包含在另一个具有透明平铺背景的 div 中，该背景用对角扫描线覆盖图像，这是设计所必需的，我还不想使用 CSS3 多个背景图像，因为我想支持一些较旧的浏览器.
4.  我希望图像比需要的大（我现在意识到它有点太大了），这样即使在更大分辨率的显示器上它也是可以接受的质量。

现在**我宁愿不使用负边距**，我知道它们是有效代码，但我在过去遇到过宽度问题，想知道**没有它们是否有其他方法可以达到相同的结果？**

我尝试在 img 背景元素上使用绝对定位，而 Firefox 出于某种未知原因在文档开头添加了一大块空白空间，将整个页面向下推可能 200 像素。

该网站是 www.f3racing.co.uk

# python - 更改python列表中所有重复项的值

> ID：14749652
> 
> 赞同：-1
> 
> 时间：2013-02-07T11:08:02.900
> 
> 标签：python, algorithm, data-structures

我在 python 中有一个列表，比如

```
[{key1: valuea1, key2:valueb1}, {key1: valuea2, key2: valueb2}, ....{key1: valueaN, key2: valuebN}] 
```

例如，将 valuea 出现多次的所有 valueb 乘以 -1 的有效方法是什么。

例如：

```
[{key1: 5, key2:8}, {key1: 2, key2: 4}, {key1: 5, key2: 4}] 
```

变成：

```
[{key1: 5, key2:-8}, {key1: 2, key2: 4}, {key1: 5, key2: -4}] 
```

寻找内置于 python/ 更好算法的东西，而不仅仅是循环遍历列表两次。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:22:55.657

由于您正在寻找一次性算法，因此可能是这样的：

```
def invert_dupes(lst):
    pos = {}
    for n, e in enumerate(lst):
        k = e['key1']
        if k in pos:
            if pos[k] >= 0:
                lst[pos[k]]['key2'] *= -1
                pos[k] = -1
            e['key2'] *= -1
        else:
            pos[k] = n
    return lst 
```

对于每个“关键”值，我们会记住它第一次出现的位置，如果再次出现，则反转该位置和所有后续位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:19:06.087

这应该可以解决问题，尽管它确实通过列表两次。首先，列出所有 key1。然后对于列表中的每个字典，检查其 key1 值是否出现多次。如果是这样，请将 key2 的值​​乘以 -1。

```
myList = [{"key1": 5, "key2":-8}, {"key1": 2, "key2": 4}, {"key1": 5, "key2": -4}]
valueAs = [x["key1"] for x in myList]

for x in myList:
    if valueAs.count(x["key1"]) > 1:
        x["key2"] *= -1 
```

您可以通过用户 a`Counter`而不是列表的`count()`. 这样每个值的出现次数只计算一次。

```
from collections import Counter
valueAs = Counter([x["key1"] for x in myList])

for x in myList:
    if valueAs[x["key1"]] > 1:
        x["key2"] *= -1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T11:29:29.340

```
from collections import Counter
valueAs = Counter([x["key1"] for x in myList])

for x in myList:
    if valueAs[x["key1"]] > 1:
        x["key2"] *= -1 
```

# ios - 使用 Sencha Touch 2 和 Cordova 在 iOS 上的方向不起作用

> ID：14749653
> 
> 赞同：0
> 
> 时间：2013-02-07T11:08:04.800
> 
> 标签：ios, sencha-touch-2, cordova-2.0.0

我使用 Sencha Touch 2 框架编写了一个简单的应用程序，它除了在页面之间导航之外几乎没有什么作用。该应用程序现在使用 Cordova 模板移植到 iOS。

但是，由于某种原因，方向更改似乎不起作用。

我不希望捕捉事件 - 只允许旋转的默认行为以适应新的视图大小。

有什么我应该寻找的或我需要提供的任何其他信息吗？

谢谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:47:23.393

界面方向有两个单独的区域，一个用于 iPhone，另一个用于 iPad。确保您已单击 iPad 的所有四个选项。

# nginx - 使用 nginx 反向代理在生产环境中设置 Tornado Web 服务

> ID：14749655
> 
> 赞同：10
> 
> 时间：2013-02-07T11:08:11.403
> 
> 标签：nginx, tornado

在过去的几个月里，我一直在 Tornado 中开发一个 Web 服务，在我的测试环境中运行我使用的服务：

```
python index.py 
```

index.py 是我的 tornado 应用程序处理程序，它侦听端口 8001。然后我使用`http://localhost:8001`. 我现在正在将我的测试环境部署到应该反映生产的暂存环境。如何在生产中运行龙卷风？我猜我需要为应用程序创建某种守护进程，但我不知道从哪里开始！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-07T13:42:20.150

您可以使用一些工具。

一、[主管](http://supervisord.org/)

Supervisord 是一个“流程控制系统”，您可以配置您的流程并让 Supervisor 管理它们，如果它们失败，它将重新启动它们，使管理它们更容易并让它们在后台运行

这是一个示例主管配置文件

```
[program:myprogram] 
process_name=MYPROGRAM%(process_num)s
directory=/var/www/apps/myapp 
command=/var/www/apps/myapp/virtualenv/bin/python index.py --PORT=%(process_num)s
startsecs=2
user=youruser
stdout_logfile=/var/log/myapp/out-%(process_num)s.log
stderr_logfile=/var/log/myapp/err-%(process_num)s.log
numprocs=4
numprocs_start=14000 
```

使用该配置，Supervisor 将`numprocs`在端口 14001-14004 ( `numprocs_start`) 上启动 4 ( ) 个 index.py 实例。我们通过`--PORT=%(process_num)s`让每个进程在不同的端口上启动。您应该改变`numprocs`并`numprocs_start`适应您的环境/设备。通常我们运行 2xCPU 内核进程（因此四核处理器将有 8 个进程），但这可能会根据您的进程所做的事情以及代码中的阻塞程度而有很大差异。

接下来，配置 NGINX 以将请求转发到您的站点

```
 upstream myappbackend {
            server 127.0.0.1:14001  max_fails=3     fail_timeout=1s;
            server 127.0.0.1:14002  max_fails=3     fail_timeout=1s;
            server 127.0.0.1:14003  max_fails=3     fail_timeout=1s;
            server 127.0.0.1:14004  max_fails=3     fail_timeout=1s;
    }

    server {
            listen                                          4.5.6.7:80;
            server_name                                     example.com;

            access_log      /var/log/nginx/myapp.log  main;

            location / {
                    proxy_set_header                Host            $host;
                    proxy_set_header                X-Real-Ip       $remote_addr;
                    proxy_pass                      http://myappbackend/;
            }
    } 
```

该配置应根据您的应用程序及其工作方式进行修改，这是一个非常小的配置，几乎肯定需要扩展，但这应该足以让您开始

# google-maps - 谷歌地图在搜索地址时显示不同的位置

> ID：14749656
> 
> 赞同：0
> 
> 时间：2013-02-07T11:08:15.103
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我构建了拼车应用程序，在该应用程序中我使用了谷歌地图来搜索乘车。每件事都运行良好，期待当我在谷歌地图中搜索地址时会发生一件奇怪的事情，官方网站在一些不同的位置显示标记例如：-

假设我正在搜索：“Manhattan Associates India Dev Center, EPIP Zone, Bangalore, Karnataka, India”

官方网站在正确的位置显示标记，但在我的网站中，它在不同的位置显示标记，我使用 console.log 检查路由请求的响应，其中起始地址为“EPIP Zone, Bangalore, Karnataka, India ” 。我不知道为什么没有完整的地址。请帮我解决这个奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:41:55.943

[谷歌地图](https://maps.google.com/maps?q=+Manhattan+Associates+India+Dev+Center,+EPIP+Zone,+Bangalore,+Karnataka,+India&hl=en&sll=32.824552,-117.108978&sspn=0.691256,0.883026&hq=Manhattan+Associates+India+Dev+Center,&hnear=EPIP+Zone,+Bangalore,+Bengaluru+Urban,+Karnataka,+India&t=m&z=14)显示该查询的 2 个结果（并提供 8 个额外的匹配项......）

该位置位于[Places 数据库](http://www.geocodezip.com/v3_GoogleEx_places-searchboxC.html?q=Manhattan%20Associates%20India%20Dev%20Center,%20EPIP%20Zone,%20Bangalore,%20Karnataka,%20India)中。

但由于没有“地址”，地理编码器无法找到它。您可以使用 Places 结果中的地理坐标。

# java - 使用自定义休眠类型时出现 ehcache 错误？

> ID：14749661
> 
> 赞同：1
> 
> 时间：2013-02-07T11:08:26.973
> 
> 标签：java, hibernate, types, ehcache

我遇到了我目前分析的 hibernate 3.6.2-final 和 ehcache 2.6.2 的错误。

我最近开始使用自定义类型来处理在数据库中存储为“OUI”/“NON”的值作为 java 中的布尔值。

我正在使用 org.hibernate.type.YesNoType 的改编版本。这部分有效。

当我打开 ehcache 时，我在缓存命中时遇到以下错误：尝试在正在处理的对象上设置字符串值，但由于属性是布尔值而失败...

在我的日志中，我有：类中的 IllegalArgumentException：fr.senat.base_senateurs.libsen.hbm.Dpt，属性的设置方法：evetempub 预期类型：java.lang.Boolean，实际值：java.lang.String

两个有趣的例外是：

```
org.hibernate.PropertyAccessException: IllegalArgumentException occurred while calling setter of fr.senat.base_senateurs.libsen.hbm.Dpt.evetempub
org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:128)
org.hibernate.tuple.entity.AbstractEntityTuplizer.setPropertyValues(AbstractEntityTuplizer.java:583)
org.hibernate.tuple.entity.PojoEntityTuplizer.setPropertyValues(PojoEntityTuplizer.java:229)
org.hibernate.persister.entity.AbstractEntityPersister.setPropertyValues(AbstractEntityPersister.java:3847)
org.hibernate.cache.entry.CacheEntry.assemble(CacheEntry.java:137)
org.hibernate.cache.entry.CacheEntry.assemble(CacheEntry.java:104)
org.hibernate.event.def.DefaultLoadEventListener.assembleCacheEntry(DefaultLoadEventListener.java:651)
org.hibernate.event.def.DefaultLoadEventListener.loadFromSecondLevelCache(DefaultLoadEventListener.java:605)
org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:459)
org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:147)
org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
org.hibernate.impl.SessionImpl.immediateLoad(SessionImpl.java:1026)
org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:176)
org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
fr.senat.base_senateurs.libsen.hbm.Dpt_$$_javassist_77.getDptlib(Dpt_$$_javassist_77.java)
sun.reflect.GeneratedMethodAccessor106.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:179)
org.apache.el.parser.AstValue.getValue(AstValue.java:183)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
org.apache.webbeans.el.WrappedValueExpression.getValue(WrappedValueExpression.java:68)
org.apache.myfaces.view.facelets.el.ContextAwareTagValueExpression.getValue(ContextAwareTagValueExpression.java:96)
javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:249)
javax.faces.component.UIOutput.getValue(UIOutput.java:67)
org.apache.myfaces.shared.renderkit.RendererUtils.getValue(RendererUtils.java:491)
org.apache.myfaces.shared.renderkit.RendererUtils.getStringValue(RendererUtils.java:334)
org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.renderOutput(HtmlTextRendererBase.java:92)
org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.encodeEnd(HtmlTextRendererBase.java:79)
javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:663)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:543)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
org.primefaces.component.datatable.DataTableRenderer.encodeRegularCell(DataTableRenderer.java:743)
org.primefaces.component.datatable.DataTableRenderer.encodeRow(DataTableRenderer.java:695)
org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:603)
org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:220)
org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:192)
org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:74)
javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:663)
javax.faces.component.UIData.encodeEnd(UIData.java:1699)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:543)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1981)
org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:285)
javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:116)
org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:126)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
fr.senat.faces.filters.HibernateNoSessionRequestFilter.doFilter(HibernateNoSessionRequestFilter.java:44) 
```

和

```
java.lang.IllegalArgumentException: java.lang.ClassCastException@4194c10f
sun.reflect.GeneratedMethodAccessor129.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:66)
org.hibernate.tuple.entity.AbstractEntityTuplizer.setPropertyValues(AbstractEntityTuplizer.java:583)
org.hibernate.tuple.entity.PojoEntityTuplizer.setPropertyValues(PojoEntityTuplizer.java:229)
org.hibernate.persister.entity.AbstractEntityPersister.setPropertyValues(AbstractEntityPersister.java:3847)
org.hibernate.cache.entry.CacheEntry.assemble(CacheEntry.java:137)
org.hibernate.cache.entry.CacheEntry.assemble(CacheEntry.java:104)
org.hibernate.event.def.DefaultLoadEventListener.assembleCacheEntry(DefaultLoadEventListener.java:651)
org.hibernate.event.def.DefaultLoadEventListener.loadFromSecondLevelCache(DefaultLoadEventListener.java:605)
org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:459)
org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:147)
org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
org.hibernate.impl.SessionImpl.immediateLoad(SessionImpl.java:1026)
org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:176)
org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
fr.senat.base_senateurs.libsen.hbm.Dpt_$$_javassist_77.getDptlib(Dpt_$$_javassist_77.java)
sun.reflect.GeneratedMethodAccessor106.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:179)
org.apache.el.parser.AstValue.getValue(AstValue.java:183)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
org.apache.webbeans.el.WrappedValueExpression.getValue(WrappedValueExpression.java:68)
org.apache.myfaces.view.facelets.el.ContextAwareTagValueExpression.getValue(ContextAwareTagValueExpression.java:96)
javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:249)
javax.faces.component.UIOutput.getValue(UIOutput.java:67)
org.apache.myfaces.shared.renderkit.RendererUtils.getValue(RendererUtils.java:491)
org.apache.myfaces.shared.renderkit.RendererUtils.getStringValue(RendererUtils.java:334)
org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.renderOutput(HtmlTextRendererBase.java:92)
org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.encodeEnd(HtmlTextRendererBase.java:79)
javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:663)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:543)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
org.primefaces.component.datatable.DataTableRenderer.encodeRegularCell(DataTableRenderer.java:743)
org.primefaces.component.datatable.DataTableRenderer.encodeRow(DataTableRenderer.java:695)
org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:603)
org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:220)
org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:192)
org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:74)
javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:663)
javax.faces.component.UIData.encodeEnd(UIData.java:1699)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:543)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:539)
org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1981)
org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:285)
javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:116)
org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:126)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
fr.senat.faces.filters.HibernateNoSessionRequestFilter.doFilter(HibernateNoSessionRequestFilter.java:44) 
```

你有什么想法（除了停止使用二级缓存:-)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:01:57.807

好吧，事实上，我的自定义类型很好的假设并不是那么正确。我知道这有点像 hibernate YesNo 类型的复制粘贴，所以我有信心......但事实并非如此。

问题是它的组装和拆卸方法不连贯。

在反汇编中，值（此处为布尔值）通过以下代码段转换为字符串：

```
@Override
public Serializable disassemble(Object value) {
    return (value == null) ? null : value.toString();
} 
```

但在汇编中，字符串被以下代码片段“按原样”保留：

```
@Override
public Object assemble(Serializable cached, Object owner) {
    return (cached == null) ? null : cached;
} 
```

一个正确的实现是：

```
@Override
public Object assemble(Serializable cached, Object owner) {
    if(cached == null) {
        return null;
    }
    if(cached.equals("true")) {
        return true;
    }
    return false;
} 
```

由于直到在缓存中执行了一些序列化后才使用组装/反汇编方法对，因此直到利用二级缓存的应用程序使用它时才检测到错误。

在从数据库加载“常规”对象时，AstractEntityPersister#hydrate 由 loadFromResultSet（org.hibernate.loader.Loader 的第 1527 行）调用，水合物通过在类型上调用 nullSafeGet 来执行自定义类型对话

在缓存命中时，缓存条目由 org.hibernate.cache.entry.StructuredCacheEntry#destructure “拆分”，然后由 assembleCacheEntry 组装。在某些时候，它会调用自定义类型的“assemble”方法。

请注意，为了提高效率，我会尽量避免字符串比较，但你明白了...... :-)

# c++ - Microsoft Visual Studio ~ C/C++ 运行时库 ~ 静态/动态链接

> ID：14749662
> 
> 赞同：48
> 
> 时间：2013-02-07T11:08:32.507
> 
> 标签：c++, visual-studio, microsoft-runtime-library

我是 Microsoft Visual Studio 用户。我的问题是关于“C/C++ 运行时库”。

我使用包含以下代码的“.cpp”源文件“main.cpp”创建了一个“空项目”：

```
#include <iostream>

int main(void)
{
    std::cout << "Hello World" << std::endl;
    return 0;
} 
```

“iostream 是一个头文件，用于 C++ 编程语言中的输入/输出。它是 C++ 标准库的一部分。”

1.  “C/C++ 运行时库”和“C/C++ 标准库”之间有区别吗？

2.  我如何知道“C/C++ 运行时库”库是静态链接还是动态链接到项目？

3.  我怎么知道这个库在文件系统中的位置？

4.  如果“C/C++ 运行时库”动态链接到项目，我怎么知道使用了哪个“.dll”以及使用的“.dll”在文件系统中的位置？

5.  假设我将“C/C++ 运行时库”静态链接到项目，我能否确定从源代码生成的可执行文件可以在所有 Windows 平台（XP/Vista/Seven/...，32 位/64少量）？

6.  将“C/C++ 运行时库”动态链接到项目有哪些优点/缺点？

7.  “C/C++ 运行时库”应该是静态链接还是动态链接到项目？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-07T13:33:33.930

术语“C/C++ 运行时库”没有任何意义，它大致是 IDE 中项目设置的名称。项目 + 属性、C/C++、代码生成、运行时库设置。您可以在 /MD 和 /MT 之间进行选择。

使用默认设置 /MD，您的程序将使用运行时库的 DLL 版本。在您的机器上，它们被 Visual Studio 安装程序复制到 c:\windows\system32 和/或 c:\windows\syswow64 中。并且您在 VS 安装目录的 vc/redist 子目录中获得了它们的副本，供您在为程序创建安装程序时使用。其中三个版本，x86 用于 32 位 Intel 处理器，x64 用于 64 位 Intel 处理器和 arm 用于 ARM 处理器。根据您在项目中选择的平台选择正确的平台。

相关的 DLL 名称是：

*   msvcr110.dll：C 运行时库（memcpy 等）
*   msvcp110.dll：C++ 标准库（std::string 等）
*   vccorlib110.dll ：Windows 应用商店应用程序的运行时库
*   vcomp110.dll ：OpenMP 的运行时库（参见#pragma omp）
*   atl110.dll ：ATL 项目的运行时库
*   mfc110*.dll：MFC 项目的运行时和本地化库
*   vcamp110.dll：AMP 项目的运行时库

在您的机器上，您还获得了这些 DLL 的调试版本，由 VS 安装程序复制到 Windows 目录。它们具有相同的名称，并附加了字母“d”。仅对调试代码有用，您不能重新分发它们。相应的运行时库设置是 /MDd。

大多数 C++ 项目只需要 msvcr110.dll 和 msvcp110.dll，您会知道何时选择使用其他库，因为它们有特定的项目模板和设置。

将所有这些 DLL 安装在用户计算机上的一种简单方法是使用预构建的安装程序。您可以[从此处](http://www.microsoft.com/en-us/download/details.aspx?id=30679)下载它（注意：仅在今天有效，当服务包或更新可用时，这可能会改变）。或者您可以简单地将它们复制到与您的主 EXE 相同的目录中。

您可以通过将运行时库设置更改为 /MT 来避免依赖这些 DLL。在这种情况下，运行时支持代码将链接到您的程序中，您只需部署一个 EXE。当您这样做时，它当然会变得更大，有时会变得更大，尤其是当您使用 MFC 时。

如果您创建 DLL 和 EXE，则使用 /MT 是有风险的。您最终会在程序中获得多个 CRT 副本。这对于早期版本的 VS 尤其是一个问题，其中每个 CRT 都会获得自己的堆，而 VS2012 则不然。但是，例如，当您有多个“errno”变量时，您仍然会遇到难看的运行时问题。强烈建议使用 /MD 以避免此类损失。

您的程序将在 Windows Vista、7 和 8 上运行。对 XP 的支持正在减弱，您需要 VS Update 1 并将项目中的工具集设置从“v110”更改为“v110_xp”以创建仍可在 XP 上运行的程序. 当您这样做时，某些功能会丢失，与语言环境和线程本地存储相关联，需要进行测试。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-07T11:59:04.213

这里什么都没有......如果你发现错误，请插话。

**1、“C/C++运行时库”和“C/C++标准库”有区别吗？**

是和不是。有时人们使用运行时库来表示一切，而完全忽略标准库（对于 Microsoft 工具）。但是，从技术上讲，运行时库是在运行时加载的，因此它包括 .lib（导入库）和 .dll 对。有关详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/vstudio/abx4dbyh (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/abx4dbyh(v=vs.100).aspx)

从技术上讲，libc* 是标准库，*crt 是运行时库。

**2.如何知道“C/C++运行时库”库是静态链接还是动态链接到项目？**

如果您使用的是 IDE（VS2010，其他类似），则在项目属性中：

```
-  configuration properties
        - c/c++
               - code generation
                      [Runtime Library] 
```

**3\. 我怎么知道这个库在文件系统中的位置？**

lib 文件位于 sdk 的 lib 目录中（如果您安装了更高版本的 windows sdk）或 Visual C++ 目录。

**4\. 如果“C/C++ Runtime Library”动态链接到项目，我怎么知道使用了哪个“.dll”以及使用的“.dll”在文件系统中的位置？**

您可以使用depends 工具找出使用了哪些。 [http://www.dependencywalker.com/](http://www.dependencywalker.com/)

DLL 位于 Windows 目录中的某个位置。他们移动它们，现在它在时髦的地方，有清单和东西来跟踪版本。我不会太担心这个。如果您不得不担心这一点，则可能有问题。详情： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa375365 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375365(v=vs.85).aspx) [http://en.wikipedia.org/wiki/Side-by-side_assembly](http://en.wikipedia.org/wiki/Side-by-side_assembly)

如果这是一个问题，您可以将可再发行包与您的安装程序捆绑在一起：[Visual Studio Redistributable 和 Visual Studio SP1 之间的区别](https://stackoverflow.com/questions/5655962/difference-between-visual-studio-redistributable-and-visual-studio-sp1)

**5\. 假设我将“C/C++ 运行时库”静态链接到项目中，我能否确定从源代码生成的可执行文件可以在所有 Windows 平台（XP/Vista/Seven/...，32 位/64 位）？**

是的，如果您静态链接，那么就无法找到 dll 而言，您会更安全。但是，这会使您的可执行文件更大。在行为方面还有其他后果......很难列举，但不同之处在于库位于 dll 中而不是编译到您的 exe 中。

**6、将“C/C++运行时库”动态链接到项目有哪些优点/缺点？**

为什么要使用 dll：

a - 大小。较小的 exe 大小，因为所有库内容都在 dll 中，这些内容应该已经安装在用户系统上，尽管有时并非如此。

b - 如果运行时存在错误，Microsoft 可以将新版本推送给用户。你不必处理它。如果您静态链接，则必须将新的 exe 推送给用户。

为什么不使用dll：

a - 处理 dll 的许多问题。如果您忘记捆绑 redist，可能会出现许多问题。

b - 加载和卸载更多 dll 会导致启动和退出时间变慢。

可能还有其他我没有想到的原因...

**7\. “C/C++ 运行时库”应该是静态链接还是动态链接到项目？**

这真的取决于。我个人更喜欢静态链接。我讨厌四处寻找合适的 redist/dll/etc。

# java - 使用 log4j 在没有日期和时间的控制台中打印错误

> ID：14749666
> 
> 赞同：1
> 
> 时间：2013-02-07T11:08:43.190
> 
> 标签：java, logging, log4j

是否可以使用 log4j 在控制台中打印错误消息，而不包括日期、时间和严重性详细信息。

日志 4j.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
  <param name="threshold" value="ERROR" />
        <layout class="org.apache.log4j.PatternLayout">
              <param name="ConversionPattern" value="%d{yyyyMMdd HH:mm:ss,SSS} - %p | %m%n" />
        </layout>        
  </appender>

<logger name="package" >
    <level value="ERROR" />
    <appender-ref ref="CONSOLE" />
</logger>

  <root>
        <priority value="ERROR" />
        <appender-ref ref="CONSOLE" />
  </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:47:07.033

[您可以在Pattern Layout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)中检查调整 log4j 输出的各种方法。您可以尝试使用以下模式布局仅打印必须记录到控制台的消息

```
 <param name="ConversionPattern" value="%m%n" /> 
```

# iphone - 如何将旋转图像保存在 iPhone 相册中？

> ID：14749671
> 
> 赞同：2
> 
> 时间：2013-02-07T11:08:56.367
> 
> 标签：iphone, objective-c, ipad, cocoa-touch, imagefilter

当我单击视图并且图像旋转成功但旋转的图像未保存在 iphone 相册中时，我可以旋转图像。

当我单击保存按钮时，上一张图片正在保存在相册中，请任何人帮助我

```
- (void) touchesBegan:(NSSet *)_touches withEvent:(UIEvent *)_event
  {
   UITouch* touch = [_touches anyObject];
   CGPoint location = [touch locationInView:m_block];
   m_locationBegan = location;
   }

  - (void) touchesMoved:(NSSet *)_touches withEvent:(UIEvent *)_event
   {
    UITouch* touch = [_touches anyObject];
    CGPoint location = [touch locationInView:m_block];
    [self updateRotation:location];  
   }

- (void) touchesEnded:(NSSet *)_touches withEvent:(UIEvent *)_event
    {
   UITouch *touch=[_touches anyObject];
   CGPoint location = [touch locationInView:m_block];
   m_currentAngle = [self updateRotation:location];    
 }
 - (float) updateRotation:(CGPoint)_location
   {
     float fromAngle = atan2(m_locationBegan.y-m_block.center.y, m_locationBegan.x-m_block.center.x);
    float toAngle = atan2(_location.y-m_block.center.y, _location.x-m_block.center.x);
     float newAngle = wrapd(m_currentAngle + (toAngle - fromAngle), 0, 2*3.14);

     CGAffineTransform cgaRotate = CGAffineTransformMakeRotation(newAngle);
     m_block.transform = cgaRotate;
     int oneInFifty = (newAngle*50)/(2*3.14);
     m_label.text = [NSString stringWithFormat:@"Angle: %f 1in50: %i", newAngle, oneInFifty];
      return newAngle;
    }
  - (IBAction)saveImageToAlbum
     {
   [self.library saveImage:m_block.image toAlbum:@"My" withCompletionBlock:^(NSError *error) {
      if (error!=nil) {
        NSLog(@"Big error: %@", [error description]);
    }
  }];

UIImage *image = m_block.image;
NSUserDefaults * user= [NSUserDefaults standardUserDefaults] ;
[user setObject:UIImagePNGRepresentation(image) forKey:@"foo"];
[user synchronize];
[self dismissViewControllerAnimated:YES completion:nil];

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:05:55.720

我认为您正在使用自定义 UIView 或 UIImageView。

您可以通过以下代码保存任何视图的当前外观：

```
+ (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
} 
```

我从中得到：[如何在不损失视网膜显示质量的情况下将 UIView 捕获到 UIImage](https://stackoverflow.com/questions/4334233/how-to-capture-uiview-to-uiimage-without-loss-of-quality-on-retina-display)

这对我来说效果很好。

祝一切顺利...

# java - java中的相互链接列表

> ID：14749672
> 
> 赞同：0
> 
> 时间：2013-02-07T11:08:57.963
> 
> 标签：java, linked-list

在“平面”链表结构中，每个对象通过单个指针链接到下一个对象。

我正在寻找的是一种拥有一组节点的方法，并让它们以链表的方式相互连接。

```
class Person{
    public Person next;
    private String name;

    //Contructor method et. cetera. 
}

class List{
  private Person personlist, lastperson;
  private int counter;

  List(){
    Person lh = new Person("LISTHEADER");
    personListe = lh;
    sistePerson = lh;
  }
  //insert getters and setters ++.
} 
```

在其他情况下，也很自然地包含指向前一个对象的指针。但是如果列表中的所有节点都需要相互连接怎么办？

假设我有三个人对象；A、B、C 和我想制作一个包含每个人的朋友的列表。假设A是B和C的朋友。B是A和C的朋友。C是A和A的朋友。

如果我试图用第一个提到的链表结构来实现这一点，那么一个人对象似乎只有一个指向下一个对象的指针是不够的，因为 B -> A -> C 意味着 A 的下一个指针是指向 C，因此 C -> A-> B 现在是不可能的。

有没有办法制作一个类似于链表的数据结构，而不是让每个对象指向下一个对象，每个对象都可以持有多个指向其他节点的指针，并且仍然是“列表”本身中的一个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:49:37.283

您正在寻找的是图形结构。您可以尝试将哈希作为人名，将值作为他所有朋友的链接列表。

```
Example:
hash(A) contains B->C 
hash(B) contains C->A
hash(C) contains A->B 
```

您可以检查 java 中的邻接列表实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:19:13.667

像这样使用树

```
public class Friends<Person> {
    private Friend<Person> self;

    public Friends(Person friendData) {
        self= new Friend<Person>();
        root.data = friendData;
        root.children = new ArrayList<Friend<Person>>();
    }

    public static class Friend<Person> {
        private Person info;
        private Friend<Person> parent;
        private List<Friend<Person>> children;
    }
} 
```

# mysql - 如何从命令行执行mysql语句

> ID：14749674
> 
> 赞同：1
> 
> 时间：2013-02-07T11:09:03.637
> 
> 标签：mysql

我需要从命令行运行以下命令。我如何在 ubuntu 上做到这一点？它在 shell 中工作，但需要为厨师接收执行。

```
grant all privileges on *.* to 'root'@'%' identified by 'password'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:20:56.520

尝试关注

> *echo "将.*上的所有权限授予由 'password' 标识的 'root'@'%';" | mysql -u 根目录 -p

高温高压

# mysql - MYSQL QUERY SYNTAX：左连接正确排除匹配项

> ID：14749677
> 
> 赞同：1
> 
> 时间：2013-02-07T11:09:10.303
> 
> 标签：mysql, syntax

我正在尝试正确执行 MYSQL 查询，但它没有做我想要的。

有人员表、任务表和与任务相关联的人员表。这是一个允许用户将人员分配给任务的页面。表具有用户 ID 字段，因为不同的用户正在处理不同的人员和/或任务组。对于每个任务，我想填充一个用户可以分配给任务的人员列表，其中排除任何已分配的人员。

表格如下： 人

```
id|person|userid 
```

任务

```
id|task|userid 
```

任务人

```
id|personid|taskid 
```

我正在使用的查询是：

```
SELECT p.*,p.id as pid 
FROM `people` p 
LEFT JOIN `taskperson` tp 
on p.id = tp.personid 
WHERE p.person LIKE '%$str%' AND p.userid = '1'AND tp.personid NOT IN
(SELECT tp.personid FROM `taskperson` tp WHERE userid = '1' AND tp.taskid = '33' ) 
GROUP BY p.id 
```

如果您删除 NOT IN 子句，它将为您提供人员列表，但不排除已分配的人员。

如果包含 NOT IN 子句，当表中没有行时，相关用户的 taskperson，即没有人被分配给任务，它不会显示任何人，即返回零行。在这种情况下，它应该显示所有人。

任何人都可以看到我需要改变这个吗？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:23:49.213

我认为你需要`IS NULL`.

```
SELECT p.*,p.id as pid 
FROM `people` p 
LEFT JOIN `taskperson` tp 
on p.id = tp.personid 
WHERE p.person LIKE '%$str%' AND p.userid = '1' AND tp.personid  IS NULL
GROUP BY p.id 
```

从您删除 NOT IN 子句来看，这将排除已分配的人员。`WHERE tp.personid IS NULL`将仅显示那些没有来自`LEFT JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:48:58.933

我不确定，但也许这就是你所追求的......

```
SELECT DISTINCT p.*
  FROM people p 
  LEFT 
  JOIN taskperson tp 
    ON tp.personid = p.id
   AND taskid = 33 
 WHERE p.person LIKE '%$str%' 
   AND p.userid = 1
   AND tp.personid IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:42:10.343

我认为这里的问题在于，`AND tp.personid NOT IN (....)`如果 tp.personid 为 NULL，则此条件始终为 FALSE。所以你根本不需要 LEFT JOIN。

```
SELECT p.*,p.id as pid 
FROM `people` p 
WHERE p.person LIKE '%$str%' AND p.userid = '1'AND p.id NOT IN
(SELECT tp.personid FROM `taskperson` tp WHERE userid = '1' AND tp.taskid = '33' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:53:10.503

根据你的问题我推测...

> 创建表人（ID INTEGER，PERSON VARCHAR（20），USERID INTEGER）；创建表任务（ID 整数，任务 VARCHAR（20），用户 ID 整数）；CREATE TABLE TASKPERSON(ID INTEGER,PERSONID INTEGER,TASKID INTEGER);
> 
> 插入人的价值观（1，“拉胡尔”，1）；插入任务值（1，NULL，1）；插入任务人员值（1,1，NULL）；
> 
> 插入人的价值观（1，“RAUNAK”，1）；插入任务值（1，“R”，1）；插入任务人员值（1,1,33）；
> 
> 插入人的价值观（2，“PARTH”，2）；插入任务值（2，“P”，2）；插入任务人员值（2,2,22）；
> 
> 插入人的价值观（3，“KANISK”，3）；插入任务值（3，“K”，3）；插入任务人员值（3,3,33）；
> 
> 插入人的价值观（4，“HEENA”，4）；插入任务值（4，NULL，4）；插入任务人员值（4,4，NULL）；

当不包括“NOT IN”时，您将检索未分配的人员列表。

```
SELECT P.*,P.ID FROM PEOPLE P LEFT JOIN TASKPERSON TP ON P.ID=TP.PERSONID
WHERE P.USERID=1 AND TP.PERSONID IN(SELECT TP.PERSONID FROM TASKPERSON TP WHERE TP.PERSONID=1 AND TP.TASKID=33)
GROUP BY P.ID 
```

# solr - 带有空白字符和通配符的 Solr 精确搜索

> ID：14749688
> 
> 赞同：0
> 
> 时间：2013-02-07T11:09:52.247
> 
> 标签：solr, wildcard

我遇到了 solr 搜索的问题。我想搜索一个包含空白字符和最后一个通配符的字符串。我发现的唯一方法是将字符串放在引号中。但如果我喜欢这样，我不能把通配符放在最后。

那么有什么方法可以搜索“foo bar”* 吗？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:27:47.840

你可以尝试逃离空白`field:foo\ bar*`

[通配符查询](http://lucidworks.lucidimagination.com/display/lweug/Wildcard+Queries)：-
请注意，引用的短语中不支持通配符。它们将被视为空白。

# java - Spring mvc 空数组作为默认值

> ID：14749691
> 
> 赞同：7
> 
> 时间：2013-02-07T11:10:04.600
> 
> 标签：java, spring, model-view-controller, controller

我有一个弹簧控制器方法，它接收一些可选数组作为参数。它们不是必需的，但我希望它们不为空，而当它们不在控制器方法接收的参数中时只是空数组。我知道，我可以检查它们是否为空，然后分配为新对象，但这会生成大量样板代码。另外，当我尝试做这样的事情时：

```
@RequestMapping(headers = "Accept=application/json", method = RequestMethod.GET, value = "/socialUsers/saveFilter", produces = "application/json")
public @ResponseBody
void saveFilterToDataBase(@RequestParam(required = false, value = "gender", defaultValue = "{}") Gender[] genders)

.... 
```

当我没有在 url 中提供参数时，我收到第 400 个错误，这很奇怪，因为必填字段为 false。

有什么想法吗，伙计们？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T15:18:53.877

找到了解决方案。默认的空数组值只是“”。但问题是即使该参数不是必需的，它也会引发第 400 个错误。奇怪的。正在努力。

# c# - c#发布后没有相关的app.config

> ID：14749693
> 
> 赞同：2
> 
> 时间：2013-02-07T11:10:04.853
> 
> 标签：c#, configuration, app-config

有人可以告诉我如何处理 app.config 吗？当我在 app.Properties 中创建一些值时，它会自行创建。我将代码文件设置为“CopyAlways”。但是，当我在调试或发布模式下编译应用程序，手动编辑配置（使用记事本）并启动应用程序时，它的行为就像配置文件没有变化一样。我尝试更改 app.config、appname.exe.config 甚至 appname.vschost.exe.config。

对我来说更有趣的是，我可以构建一个应用程序，然后将没有任何配置文件的源文件（appname.exe 和 dll 文件）复制到任何新文件夹，然后启动一个应用程序。它连接到服务器，尽管事实上没有配置，IP 存储在哪里。

我只发现有关在运行时通过代码更改 app.config 的问题。但这不是我想要的。我有数据配置，变化不大。和 .settings 用户设置（数据网格中记录的颜色等）。

我坚持，每次应用程序启动时都会读取该配置。我真的必须创建自己的配置文件，该文件将与 exe 位于同一文件夹中，并且每次应用程序启动时都会读取？

我在 msdn 上找到的唯一支持是如何创建 app.config。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-08T07:04:15.217

您不应将**App.config**的属性更改为“始终复制”。

构建应用程序时，编译器会在输出目录中创建**YourAppName.exe.config文件，其中包含与****App.config**文件完全相同的值。

如果您稍后更改**YourAppName.exe.config**中的值，这将在您启动应用程序时可见，而无需重新构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:21:10.087

您不需要复制您的 app.config 或将其设置为“CopyAlways”。

当您构建 Visual Studio 时，它会自动将其重命名为 applicationName.exe.config

因此，如果您的应用程序是： MyApplication.exe 您应该在 bin 中找到文件 MyApplication.exe.config

您将 app.config 与存储在 UserProfile 目录中的文件 user.config 中的应用程序设置混淆了。

[应用程序设置概述](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)

[应用程序设置架构](http://msdn.microsoft.com/en-us/library/8eyb2ct1.aspx)

它们旨在用于将用户偏好存储为背景颜色、可视化偏好等

相反，如果您想要一个易于更改的配置值，您应该使用 app.config 中的 appSettings 节点

```
 <appSettings>
    <add key="ServerIp" value="0.0.0.0"/>
</appSettings> 
```

并从您的代码中访问它：

```
ConfigurationManager.AppSettings["ServerIp"] 
```

[ConfigurationManager.AppSettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:25:55.073

UserScope 中的应用程序设置存储在[Application.LocalUserAppDataPath](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.localuserappdatapath.aspx)下（通常这是`C:\Documents and Settings\username\Local Settings\Application Data\`基本路径 + 以下架构`\CompanyName\ProductName\ProductVersion`）。因此，当您运行应用程序时，user.config 将存储在此文件夹中，并用于进一步启动您的应用程序。

如果在上述路径中找不到 user.config，则应用程序的 app.config 仅包含默认值。

如果您的应用程序有 .config 文件，请打开您的资源管理器并检查 Application.LocalUserAppDataPath 的路径。如果是这样，请将其删除或更改此文件中的设置。

# mysql - MySQL 例程编程、多表和字符串操作

> ID：14749695
> 
> 赞同：0
> 
> 时间：2013-02-07T11:10:10.747
> 
> 标签：mysql, procedure

好的，这是我遇到的一个问题.. 它很难解释，但我会尽力做到最好！

我有一个包含 2 个表的数据库：

1个班级表

```
classname | points                     | max | min
_____________________________________________________
Land      | tree,bush,house            | 1   | 0.2
Sea       | fish,water                 | 1   | 0.3
Air       | bird,plane,moon,sun,clouds | 1   | 0.5 
```

2数据表：

```
ID | classname | points
___________________________
5  | Land      |
6  | Land      |
9  | Land      |
11 | Sea       |
15 | Sea       |
20 | Air       |
1  | Land      | 
```

如果点列的行中点为空白，则类表中包含数据表的所有可能的类名，则应按照以下结果进行编辑...

* * *

现在结果应该是：

数据表：

```
ID | classname | points
_________________________________________________________
5  | Land      | [["tree",A],["bush",B],["house",C]]
6  | Land      | [["tree",D],["bush",E],["house",F]]
9  | Land      | [["tree",G],["bush",H],["house",I]]
11 | Sea       | [["fish",F],["water",G]]
15 | Sea       | [["fish",H],["water",I]]
20 | Air       | [["bird",J],["plane",K],["moon",L],["sun",M],["clouds",N]]
1  | Land      | [["tree",O],["bush",P],["house",Q]] 
```

点列中来自 AQ 的字母应该是类表的最小值和最大值之间的随机十进制数字

如果有人可以帮助我解决这个问题，将非常感激，如果需要任何进一步的信息，请询问！

我是初学者：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:44:58.310

我不太确定，但首先看表格告诉我关系可能是错误的。但是，这取决于您的需求。我无法理解整个问题，但尝试将类表 ID 存储在数据表中。

# linq - 使用 Linq 对 Sitecore 项目/子项目进行排序

> ID：14749698
> 
> 赞同：0
> 
> 时间：2013-02-07T11:10:14.077
> 
> 标签：linq, sorting, sitecore

如何使用 Linq 使用以下方法对 Sitecore 子项列表进行排序，并将“sortedlist”转换/转换回`Sitecore.Data.Items.Item[]`：

```
...
Sitecore.Data.Items.Item[] subitems = current.SelectItems(query);
var sortedList = (from entry in subitems orderby entry.Fields["Title"].Value ascending select entry);  
... 
```

注意：我没有成功尝试在查询中对其进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:01:26.813

您不需要项目中的 .Field 。只需使用**["Title"]**直接使用该值，例如：

```
Sitecore.Data.Items.Item[] subitems = current.SelectItems(query);
Sitecore.Data.Items.Item[] sorted = subitems.OrderBy(i => i["Title"]).ToArray(); 
```

# angularjs - Angular.js：在 ng-repeat 中使用 ng-model 进行下拉菜单

> ID：14749699
> 
> 赞同：7
> 
> 时间：2013-02-07T11:10:20.300
> 
> 标签：angularjs, ng-repeat

我很难理解如何在 ng-repeat 中使用 ng-model。在这种情况下，CargoItems 是一个包含 LoadPoint 的对象列表。LoadPoint 具有 Id 和 Text 属性。

我想显示文本，绑定到下拉列表中的当前选择，但我也想跟踪当然选择了哪个 Id。所以我不确定如何使用选择绑定更新这两个属性，或者通过显式使用标签，或者使用我还没有真正弄清楚的 ng-options。

所以两个问题：

1) 如何将选择列表中的文本和值正确绑定到 CargoItem.LoadPoint 上的 Id 和 Text 属性？我感觉我的 ng-model 可能是错误的？

2）我如何使用 ng-options 来默认选择的值？我想出这是写我自己的选项标签，但如果可能的话，我想使用 ng-options 。

```
<div ng-repeat="cargoItem in cargo.CargoItems">
    <span>Selected Load Point: {{cargo.LoadPoint.Text}}</span> 
    <select ng-model="cargoItem.LoadPoint" ng-options="loadPoint.Id as loadPoint.Text for loadPoint in LoadPoints"></select>
</div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T11:39:34.637

1.  绑定到整个对象引用，而不是使用“Id”属性 ( `loadPoint.Id`)。为此，只需更改`ng-options`并删除该`loadPoint.Id as`部分：

    ```
    <select ng-model="cargoItem.LoadPoint" ng-options="loadPoint.Text for loadPoint in LoadPoints"></select> 
    ```

2.  如果您使用上述方法并正确引用 LoadPoints 对象，Angular 会自动为您执行此操作。下面是一个关于如何使用直接 LoadPoints 对象引用的示例：

    ```
    $scope.LoadPoints = [{ Id: '1', Text: 'loadPointA' },{ Id: '2', Text: 'loadPointB' }];        
    $scope.cargo = {
        CargoItems: [{
            LoadPoint: $scope.LoadPoints[0]
        }, {
            LoadPoint: $scope.LoadPoints[1]
        }]
    }; 
    ```

    使用这种方法，`cargoItem.LoadPoint`（ngModel）将始终持有对整个 LoadPoints 对象（即`{ Id: '1', Text: 'loadPointA' }`）的引用，而不仅仅是它的 Id（即`'1'`）。

**jsFiddle**：http: [//jsfiddle.net/bmleite/baRb5/](http://jsfiddle.net/bmleite/baRb5/)

# mysql - 按日期分组时如何检索所有 id 的最新记录

> ID：14749701
> 
> 赞同：1
> 
> 时间：2013-02-07T11:10:22.267
> 
> 标签：mysql

我需要一个 mysql 查询，当按日期分组时，它将获取我每个 id 的最新记录，即使该记录与日期没有关联。我不确定 mysql 是否可以做到这一点，但我感谢您提供的任何帮助。

例如，假设我有下表：

```
user_id | total | timestamp
----------------------------
   1    |   -15 | jan 1
   2    |    -5 | jan 1
   3    |   -10 | jan 1
   1    |    -4 | jan 2
   3    |   -16 | jan 3 
```

我希望它返回下表：

```
user_id | total | timestamp
----------------------------
   1    |   -15 | jan 1
   2    |    -5 | jan 1
   3    |   -10 | jan 1
   1    |    -4 | jan 2
   2    |    -5 | jan 2
   3    |   -10 | jan 2
   1    |    -4 | jan 3
   2    |    -5 | jan 3
   3    |   -16 | jan 3 
```

如果您需要进一步说明，请告诉我。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:31:22.580

[SQLFiddle 演示](http://sqlfiddle.com/#!2/e2177/10)

```
select user_id,

(select total 
        from t 
      where user_id=t2.user_id 
            and t.timestamp <= t2.timestamp 
 order by t.timestamp DESC LIMIT 1) as total,

timestamp
from
(
select user_id,timestamp
from
(select distinct user_id from t) t0
cross join
(select distinct timestamp from t) t1
) t2

order by timestamp,user_id 
```

# javascript - 无拉伸显示的 SVG 图像

> ID：14749702
> 
> 赞同：0
> 
> 时间：2013-02-07T11:10:24.283
> 
> 标签：javascript, image, html, svg

我目前正在通过 SVG 图像元素管理 HTML5 中的图像，

我设法将图像拉伸到元素的宽度和长度的大小，使用 preserveAspectRatio="none"

但是我找不到相反的方法，我想以某种方式显示图像，以便 SVG 仅在图像 originalSize（宽度/高度）大于 SVG 图像时显示图像的一部分宽度和高度，

假设我有一个 700x500 的图像，并将其放置在 200x200 的 SVG 图像上，如果我将 preserveAspectRatio 设置为“none”，那么图像将缩小并变为 200x200，但我想要的是让图像显示在200x200 的容器并且不会缩小，而是图像只会显示在其 200x200 的部分中，因此不会显示其余部分，因为容器不足以显示所有内容，

任何想法？

# php - 如何为 Internet Explorer 8 处理 nth-child

> ID：14749711
> 
> 赞同：0
> 
> 时间：2013-02-07T11:11:08.327
> 
> 标签：php, css, internet-explorer, css-selectors

我有一个 php 脚本，它调用一系列显示如下的图像：

![](../Images/b69b31fdd2aa13e0719abdadd8be98f2.png)

这是调用它们的 php 代码：

```
<?php

$query = "SELECT
parent_business_id,
image_url,
alt_tag,
description,
thumb_url,
business
FROM
images
ORDER BY
RAND()
LIMIT
6
";

$result = mysql_query($query, $dbc)
or die (mysql_error($dbc));

while($row = mysql_fetch_array($result)) {

$parent = $row["parent_business_id"];
$image = $row["image_url"];
$alt = $row["alt_tag"];
$description = $row["description"];
$thumb = $row["thumb_url"];
$business = $row["business"];

$mainthumb = "./images/270x270/$image.jpg";

echo

"<div class='gallery_image_container'>

<a href='business-profile.php?business_id=$parent' class='gallery_darken'><img src='$mainthumb' alt='$alt' title='$description' /></a>

</div>";

}

?> 
```

目前我正在使用 css3 的 nth-child 为中心图像添加边距：

```
div.gallery_image_container:nth-child(3n+2){
margin-left:10px;
margin-right:10px;
} 
```

我遇到的问题是这在支持 css3 但 ie 7 和 ie 8 的浏览器中效果很好，我需要一个解决方案。我在想也许我可以通过在 php.ini 中添加类来做到这一点。如果是这样，我将使用哪个功能。php 中是否有类似 nth-child 的选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:34:04.777

正如 Andy 在评论中提到的，您可以找出必须向哪些元素添加 PHP 类。你所需要的只是一个模除法。

纯 CSS 解决方案需要您改进 HTML。它显然是一个图像列表，因此： 使用一个列表。生成的 HTML 应如下所示：

```
<ul class="gallery_container">
    <li>
        <a href='business-profile.php?business_id=$parent' class='gallery_darken'><img src='$mainthumb' alt='$alt' title='$description' /></a>
    </li>
    <li>
        <a href='business-profile.php?business_id=$parent' class='gallery_darken'><img src='$mainthumb' alt='$alt' title='$description' /></a>
    </li>
    <li>
        <a href='business-profile.php?business_id=$parent' class='gallery_darken'><img src='$mainthumb' alt='$alt' title='$description' /></a>
    </li>
    […]
</ul> 
```

现在在 CSS 中删除您的 :nth-child 规则，改为添加以下两条规则：

```
.gallery_container {
    margin: 0 0 0 -20px;
    padding: 0;
    list-style: none;
}
.gallery_container > li {
    margin: 0 0 0 20px;
    padding: 0;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:42:02.747

如果你想使用`nth-child`IE8 不支持的 CSS 选择器，我的建议是使用[Selectivizr](http://selectivizr.com/)。

Selectivizr 是一个 Javascript 库，它将一系列 CSS 选择器反向移植到旧版本的 IE 中，以便您的标准 CSS 代码可以在所有浏览器中保持不变。

另一种替代方案是一个名为[ie7.js](http://ie7-js.googlecode.com/svn/test/index.html)（及其更高版本的 ie8.js 和 ie9.js）的旧脚本，它也执行相同的操作，并修复了 IE 中的许多其他错误和怪癖。但我更喜欢 Selectivizr，因为它更有针对性（即它的功能不如 ie7.js），而且它的代码更新得多，这两者都应该意味着它的性能更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T11:22:39.060

你可以试试

```
$(identifier:nth-child(3n+2)').addClass('styleClassName'); 
```

使用 jQuery

# php - 将数据插入不同的表格

> ID：14749714
> 
> 赞同：0
> 
> 时间：2013-02-07T11:11:18.780
> 
> 标签：php, mysql, database, insert, phpmyadmin

我正在尝试使用 php 将数据插入到不同的表格中，但不能让它工作。

这是我的数据库结构：1

```
Table: event
Structure:  FromDate | ToDate | locationID 
```

这是我的数据库结构：2

```
Table: jointable
Structure:  EventID | locationID 
```

我想做更具体的事情，我有“Fromdate”和“todate”和“locationid”的输入。我想将fromdate和todate输入table1，并将locaionid输入table2

这是我的sql查询：

```
mysql_query("INSERT INTO event (FromDate, ToDate, locationID)

VALUES ('$_POST[startdate]','$_POST[enddate]','$_POST[locationID)"); 
```

知道如何“整理” locationID 以将其输入到我的可连接件上吗？

对不起，我的英语不好，我希望你明白我想要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:16:16.610

试试这个：

```
mysql_query("INSERT INTO `events` VALUES('".$_POST["startdate"]."','".$_POST["enddate"]."','".$_POST["locationID"]."')"); 
```

调用另一个查询以插入其他表：

```
mysql_query("INSERT INTO `jointable` VALUES('','".$_POST["locationID"]."')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:21:52.147

编写 2 个不同的查询

像这样的东西：

```
$startDate = $_POST[start_date];
$endDate = $_POST[to_date]
$locationId = $_POST[location_id];
mysql_query("INSERT INTO event VALUES ('$startDate','$endDate','$locationId");

mysql_query("INSERT INTO jointable VALUES ('','$locationId')"); 
```

**注意：mysql_* 函数正在贬值。避免，**

# c# - 如何在 C#.net 页面中包含的 JavaScript 块中正确嵌入 C# 代码？

> ID：14749716
> 
> 赞同：0
> 
> 时间：2013-02-07T11:11:21.150
> 
> 标签：c#, javascript, asp.net, google-maps

我基本上合并了我的谷歌地图网络应用程序的两个功能。但我需要后端可以访问的坐标，所以我做了一个`Data Table`，然后将它传递给 javascript。

但是当我合并代码时，我遇到了一些语法问题（很可能）。

**更新：**我得到的错误是`Operator '+' cannot be applied to operands of type 'string' and 'method group'`

**更新 #2：** Page_Load 代码见下文（如果从该代码触发，则创建数据表和执行主代码）

**更新 #3：**添加了主页的代码。现在我得到错误：`Microsoft JScript runtime error: The value of the property 'initialize' is null or undefined, not a Function object`

在 Line`var myLatLng = new google.maps.LatLng(" tblPoints.Rows[i][0].ToString @", " + tblPoints.Rows[i][1].ToString + @");`我收到一些与 @" & "的打开/关闭有关的奇怪错误；

任何答案/建议都是可观的..谢谢..

主页代码（调用 JS 函数的地方）：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>maps integ</title>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
        </div>
        <div id="map_canvas" style="width: 100%; height: 100%;"></div>
        <script type="text/javascript">
            window.onload = function (e) {
                initialize();
            }
        </script>
    </form>
</body>
</html> 
```

`Page_Load`主页中的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DataTable dt = new DataTable();
            dt.Columns.Add(new DataColumn("Latitude"));
            dt.Columns.Add(new DataColumn("Longitude"));
            dt.Columns.Add(new DataColumn("Info"));

            DataRow row = dt.NewRow();
            row["Latitude"] = 28.483109;
            row["Longitude"] = 77.107756;
            row["Info"] = "INFO #1";
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483243;
            row["Longitude"] = 77.107624;
            row["Info"] = "INFO #1";
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483293;
            row["Longitude"] = 77.107579;
            row["Info"] = "INFO #1";
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483359;
            row["Longitude"] = 77.107536;
            row["Info"] = "INFO #1";
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483559;
            row["Longitude"] = 77.107273;
            row["Info"] = "INFO #1";
            dt.Rows.Add(row);

            //row = dt.NewRow();
            //row["Latitude"] = 28.4804;
            //row["Longitude"] = 77.1251;
            //dt.Rows.Add(row);

            js.Text = GPSLib.PlotGPSPoints(dt);
        }
    } 
```

类文件的代码：

```
public static class GPSLib
{
    public static String PlotGPSPoints(DataTable tblPoints)
    {
        try
        {
            String Locations = "";
            String sJScript = "";
            int i = 0;

            foreach (DataRow r in tblPoints.Rows)
            {
                // bypass empty rows 
                if (r["latitude"].ToString().Trim().Length == 0)
                    continue;

                string Latitude = r["latitude"].ToString();
                string Longitude = r["longitude"].ToString();

                // create a line of JavaScript for marker on map for this record 
                Locations += Environment.NewLine + @"
                path.push(new google.maps.LatLng(" + Latitude + ", " + Longitude + @"));

                var marker" + i.ToString() + @" = new google.maps.Marker({
                    position: new google.maps.LatLng(" + Latitude + ", " + Longitude + @"),
                    title: '#' + path.getLength(),
                    map: map
                });";

                i++;

            }

            // construct the final script
            // var cmloc = new google.maps.LatLng(33.779005, -118.178985);

            // map.panTo(curmarker.position); //zooming on current marker's posn.
            // map.panTo(myOptions.getPosition());
            sJScript = @"<script type='text/javascript'>

            var poly;
            var map;

            function initialize() {
                var cmloc = new google.maps.LatLng(28.483243, 77.107624);
                var myOptions = {
                    zoom: 19,
                    center: cmloc,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

                var polyOptions = {
                    strokeColor: 'blue',
                    strokeOpacity: 0.5,
                    strokeWeight: 3
                }
                poly = new google.maps.Polyline(polyOptions);
                poly.setMap(map);

                var path = poly.getPath();

               " + Locations + @"

                    }

            final initPoints(){
         //  var map;
            var infowindow;

            var mapOptions = {
                zoom: 19,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: centr
             };

            map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
            infowindow = new google.maps.InfoWindow();
            drop();

            }

        function drop() {
            for (var i = 0; i < "+ tblPoints.Rows.Count + @"; i++) {
        var myLatLng = new google.maps.LatLng("+ tblPoints.Rows[i][0].ToString+ @", "+ tblPoints.Rows[i][1].ToString + @");
        var mark = new google.maps.Marker({
            position: myLatLng,
            map: map,
        });
    iWindow(mark, "+ tblPoints.Rows[i][2].ToString +@");
   }
}

function iWindow(marker, title) {
    google.maps.event.addListener(marker, 'click', function () {

        infowindow.setContent(title);
        infowindow.open(map, marker);
    });
}
                </script>";
            return sJScript;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:15:22.920

为什么不使用 String.Format 而不是这些串联。它看起来更好，更容易维护并且很可能会解决您的问题？

**更新 1**：您确定以下代码不能完成这项工作吗？

**更新 2**：现在开始创建 drop 函数

**更新 3**：好的，这是我的下一个更新 :)

我建议您使用 this.Page.ClientScript.RegisterStartupScript 而不是文字来将脚本添加到页面。我在 GPSLib 中也做了一些修复。所以这是 Page_Load()

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataTable dt = new DataTable();
        dt.Columns.Add(new DataColumn("Latitude"));
        dt.Columns.Add(new DataColumn("Longitude"));
        dt.Columns.Add(new DataColumn("Info"));

        DataRow row = dt.NewRow();
        row["Latitude"] = 28.483109;
        row["Longitude"] = 77.107756;
        row["Info"] = "INFO #1";
        dt.Rows.Add(row);

        row = dt.NewRow();
        row["Latitude"] = 28.483243;
        row["Longitude"] = 77.107624;
        row["Info"] = "INFO #1";
        dt.Rows.Add(row);

        row = dt.NewRow();
        row["Latitude"] = 28.483293;
        row["Longitude"] = 77.107579;
        row["Info"] = "INFO #1";
        dt.Rows.Add(row);

        row = dt.NewRow();
        row["Latitude"] = 28.483359;
        row["Longitude"] = 77.107536;
        row["Info"] = "INFO #1";
        dt.Rows.Add(row);

        row = dt.NewRow();
        row["Latitude"] = 28.483559;
        row["Longitude"] = 77.107273;
        row["Info"] = "INFO #1";
        dt.Rows.Add(row);

        //row = dt.NewRow();
        //row["Latitude"] = 28.4804;
        //row["Longitude"] = 77.1251;
        //dt.Rows.Add(row);

        var script = GPSLib.PlotGPSPoints(dt);

        this.Page.ClientScript.RegisterStartupScript(
            this.GetType(),
            "focus",
            script, false);
    }
} 
```

这是GPSLib

```
public static class GPSLib
{
    public static String PlotGPSPoints(DataTable tblPoints)
    {
        try
        {
            StringBuilder locations = new StringBuilder();
            StringBuilder drop = new StringBuilder();

            //function drop() {{
            //    for (var i = 0; i < {1}; i++) {{
            //    var myLatLng = new google.maps.LatLng({2}, {3});
            //    var mark = new google.maps.Marker({{
            //        position: myLatLng,
            //        map: map,
            //    }});
            //    iWindow(mark, {4});
            //    }}
            //}}

            drop.AppendFormat(@"function drop() {{{0}", Environment.NewLine);
            int i = 0;
            foreach (DataRow r in tblPoints.Rows)
            {
                // bypass empty rows 
                if (r["latitude"].ToString().Trim().Length == 0)
                    continue;

                string latitude = r["latitude"].ToString();
                string longitude = r["longitude"].ToString();
                string info = r["info"].ToString();

                // create a line of JavaScript for marker on map for this record 
                locations.AppendFormat(@"{0}path.push(new google.maps.LatLng({1}, {2}));

        var marker{3} = new google.maps.Marker({{
            position: new google.maps.LatLng({1}, {2}),
            title: '#' + path.getLength(),
            map: map
        }});", Environment.NewLine, latitude, longitude, i);

                drop.AppendFormat(@"var myLatLng{0} = new google.maps.LatLng({1}, {2});
        var mark{0} = new google.maps.Marker({{
        position: myLatLng{0},
        map: map,
        }});
        iWindow(mark{0}, '{3}');", i, latitude, longitude, info);

                i++;

            }

            drop.Append("}");

            // construct the final script
            // var cmloc = new google.maps.LatLng(33.779005, -118.178985);

            // map.panTo(curmarker.position); //zooming on current marker's posn.
            // map.panTo(myOptions.getPosition());
            string sJScript = string.Format(@"<script type='text/javascript'>

    var poly;
    var map;

    function initialize() {{
        var cmloc = new google.maps.LatLng(28.483243, 77.107624);
        var myOptions = {{
            zoom: 19,
            center: cmloc,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }};

        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

        var polyOptions = {{
            strokeColor: 'blue',
            strokeOpacity: 0.5,
            strokeWeight: 3
        }}
        poly = new google.maps.Polyline(polyOptions);
        poly.setMap(map);

        var path = poly.getPath();

        {0}

    }}

    function initPoints(){{
        //  var map;
        var infowindow;

        var mapOptions = {{
            zoom: 19,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: centr
            }};

        map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);
        infowindow = new google.maps.InfoWindow();
        drop();
    }}

    {1}

    function iWindow(marker, title) {{
        google.maps.event.addListener(marker, 'click', function () {{

            infowindow.setContent(title);
            infowindow.open(map, marker);
        }});
    }}
    </script>", locations, drop);
            return sJScript;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

这是我的 aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1.Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
        </div>
        <script type="text/javascript">
            window.onload = function (e) {
                initialize();
            }
        </script>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:26:52.507

你忘了一些'+'，正确的行是

```
var myLatLng = new google.maps.LatLng(" + tblPoints.Rows[i][0].ToString + @", " +
                   tblPoints.Rows[i][1].ToString + @"); 
```

* * *

## 编辑：

您在 ToString 之后也忘记了`()`，更正：

```
var myLatLng = new google.maps.LatLng(" + tblPoints.Rows[i][0].ToString() + @", "
                 + tblPoints.Rows[i][1].ToString() + @"); 
```

# android - 即使删除所有项目后，Android ListView 也不会清除

> ID：14749718
> 
> 赞同：0
> 
> 时间：2013-02-07T11:11:26.160
> 
> 标签：android, android-listview

**更新**：我每次都能在我的 Galaxy S2 上复制这个问题（有和没有调试模式），但从来没有在模拟器上！

我在 a 上使用上下文菜单`ListView`（它使用 的自定义实现`CursorAdapter`）让用户选择“*全部删除*”选项。选择此选项后，列表中显示的所有项目都应该从数据库中永久删除，然后调用`changeCursor(..)`适配器以强制更新列表。

然而，正在发生的事情是，即使在从数据库中删除记录并调用`changeCursor(..)`之后，这些项目也是可见的。只有项目分隔符消失。只有在我触摸列表中的某个位置后，这些项目才会被清除。

当用户激活上下文菜单时：http: [//i.stack.imgur.com/ivFvJ.png](https://i.stack.imgur.com/ivFvJ.png)

从数据库中删除并调用后：http `changeCursor(..)`: [//i.stack.imgur.com/CX6BM.png](https://i.stack.imgur.com/CX6BM.png)

我在使用 ListView 时遇到另一个问题（[Android ListView 项目在滚动时重叠](https://stackoverflow.com/questions/14745599/android-listview-items-overlap-while-scrolling)），并且我使用的是相同的 ListView，所以问题可能相关吗？数据库更新后是否有一些步骤可以强制`ListView`重绘？还是由于我实施解决方案的方式错误而没有自动发生？提前致谢！

这是`ListView`

```
<ListView
        android:id="@+id/all_reminders_list"
        android:paddingLeft="4dp"
        android:paddingRight="4dp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:layout_alignParentLeft="true"
        android:clickable="true"
        android:dividerHeight="1.0sp"
        android:animateLayoutChanges="true"> 
```

这`newView(..)`是我的自定义方法`CursorAdapter`

```
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(parent.getContext());
    View view = inflater.inflate(R.layout.view_list_item, parent, false);
    return view;
} 
```

我的`bindView(..)`方法`CursorAdapter`

```
public void bindView(View view, Context context, Cursor cursor) {

        TextView whatTextView = (TextView) view.findViewById(R.id.item_what_text);
        whatTextView.setText(cursor.getString(1));
        TextView whenTextView = (TextView) view.findViewById(R.id.item_when_text);

        if(cursor.getInt(9) != 0) // DONE_FLAG = 1 (completed)
        {
            //Arrow visibility
            ImageView arrow = (ImageView)view.findViewById(R.id.list_item_arrow);
            arrow.setVisibility(View.INVISIBLE);

            //Text color
            whatTextView.setTextColor(Color.LTGRAY);
            whenTextView.setTextColor(Color.LTGRAY);

            //WHEN text
            whenTextView.setText(TimeCalculationHelper.getCompletedTimeString(cursor.getLong(2)));
        }
        else // DONE_FLAG = 0
        {
            //Arrow visibility
            ImageView arrow = (ImageView)view.findViewById(R.id.list_item_arrow);
            arrow.setVisibility(View.VISIBLE);

            //Text color
            whatTextView.setTextColor(Color.BLACK);
            whenTextView.setTextColor(Color.BLACK);

            //WHEN text
            whenTextView.setText(TimeCalculationHelper.getTimeRemainingString(cursor.getLong(2)));

        }
} 
```

这是我的`onContextItemSelected(..)`方法，`Activity`其中包含`ListView`

```
public boolean onContextItemSelected(MenuItem item)
    {
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        ListView allRemindersList = (ListView)findViewById(R.id.all_reminders_list);

        switch (item.getItemId()) {
        case R.id.delete_item:
            //Delete the selected reminder from the database
            databaseHelper.deleteRowByID(info.id);

            //Refresh the main activity list
            ((ActiveRemindersAdapter) allRemindersList.getAdapter()).changeCursor(databaseHelper.getAllRemindersForList());
            return true;

        case R.id.delete_done:
            //Delete all reminders with DONE_FLAG = 1
            databaseHelper.deleteDoneReminders();

            //Refresh the main activity list
            ((ActiveRemindersAdapter) allRemindersList.getAdapter()).changeCursor(databaseHelper.getAllRemindersForList());
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:19:34.580

在光标更改后调用适配器上的**notifyDataSetChanged()以重新加载视图。**如果运行 pre-honeycomb 设备，最好使用[SupportLibrary中的](http://developer.android.com/tools/extras/support-library.html)[CursorAdapter](http://developer.android.com/reference/android/support/v4/widget/CursorAdapter.html)。

刚看了下代码。最好使用**swapCursor()**自动注册新的内容观察者并为您调用**notifyDataSetChanged()**。

来自 CursorAdapter 源代码。

```
/**
 * Change the underlying cursor to a new cursor. If there is an existing cursor it will be
 * closed.
 * 
 * @param cursor The new cursor to be used
 */
public void changeCursor(Cursor cursor) {
    Cursor old = swapCursor(cursor);
    if (old != null) {
        old.close();
    }
}

/**
 * Swap in a new Cursor, returning the old Cursor.  Unlike
 * {@link #changeCursor(Cursor)}, the returned old Cursor is <em>not</em>
 * closed.
 *
 * @param newCursor The new cursor to be used.
 * @return Returns the previously set Cursor, or null if there wasa not one.
 * If the given new Cursor is the same instance is the previously set
 * Cursor, null is also returned.
 */
public Cursor swapCursor(Cursor newCursor) {
    if (newCursor == mCursor) {
        return null;
    }
    Cursor oldCursor = mCursor;
    if (oldCursor != null) {
        if (mChangeObserver != null) oldCursor.unregisterContentObserver(mChangeObserver);
        if (mDataSetObserver != null) oldCursor.unregisterDataSetObserver(mDataSetObserver);
    }
    mCursor = newCursor;
    if (newCursor != null) {
        if (mChangeObserver != null) newCursor.registerContentObserver(mChangeObserver);
        if (mDataSetObserver != null) newCursor.registerDataSetObserver(mDataSetObserver);
        mRowIDColumn = newCursor.getColumnIndexOrThrow("_id");
        mDataValid = true;
        // notify the observers about the new cursor
        notifyDataSetChanged();
    } else {
        mRowIDColumn = -1;
        mDataValid = false;
        // notify the observers about the lack of a data set
        notifyDataSetInvalidated();
    }
    return oldCursor;
} 
```

# javascript - Brightcove 视频播放器，检测加载的视频

> ID：14749724
> 
> 赞同：0
> 
> 时间：2013-02-07T11:11:50.360
> 
> 标签：javascript, brightcove

我想知道如何检测视频播放器何时加载。基本上我想隐藏包含 videoPlayer 的选择器并在播放器加载时显示它......

这个我试过了。。

```
$(playerIDDiv).append('<div id="playerH" style="display:none"><object id="homesPlayer" class="BrightcoveExperience"><param name="bgcolor" value="#000" /><param name="width" value="480" /><param name="height" value="333" /><param name="playerID" value="'+playerID+'" /><param name="playerKey" value="'+playerKey+'" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="wmode" value="opaque" /><param name="templateLoadHandler" value="myTemplateLoaded"><param name="includeAPI" value="true" /></object></div>');
        brightcove.createExperiences();

     function myTemplateLoaded(experienceID) {

    player = brightcove.api.getExperience(experienceID);

    modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
    modExp = player.getModule(brightcove.api.modules.APIModules.EXPERIENCE);
    modCon = player.getModule(brightcove.api.modules.APIModules.CONTENT);

    modExp.addEventListener(brightcove.api.events.ExperienceEvent.TEMPLATE_READY, onTemplateReady);
}

function onTemplateReady(evt) {
  $('#playerH').show('slow');
} 
```

它根本不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:43:33.820

我注意到的第一件事是您没有调用 brightcove 脚本：

```
<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script> 
```

或者

```
<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/APIModules_all.js"> 
```

尝试添加它。您可以在[此处](http://support.brightcove.com/en/video-cloud/docs/using-javascript-flash-only-player-api#enable-api)查看文档以获取更多帮助。另外，我认为您需要检查视频云中的播放器，以确保您的网络设置已选中“启用 ActionScript/JavaScript API”。

# php - 用于不同 RSS 文件的 XML 解析器

> ID：14749730
> 
> 赞同：0
> 
> 时间：2013-02-07T11:12:22.950
> 
> 标签：php, xml, rss

为了解析 XML 文件，我使用 Simple XML。但是对于每个 XML 文件，我都编写了不同的函数，因为一些 XML 有不同的标签。

但是流行的服务如何解析 xml？例如 RSS 阅读器等。它们只是解析和切片额外的图像和视频，并在额外的块中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:21:46.950

RSS 阅读器只阅读 RSS 提要。RSS feed 是具有一定标准的 XML 文档，因此要解析 RSS feed，只需要解析一定数量的标准。有关更多信息，请参阅：[RSS - 维基百科](http://en.wikipedia.org/wiki/RSS)

请记住，RSS 提要是 XML 文档，但并非每个 XML 文档都是 RSS 提要。

阅读您的请求，您似乎拥有各种具有自己结构的不同 XML 文档，要解析这些文档，您实际上没有任何其他选择，只能为每个文档构建自定义解析逻辑。

# ember.js - 如何防止模型被 ember-data 提交？

> ID：14749733
> 
> 赞同：2
> 
> 时间：2013-02-07T11:12:31.717
> 
> 标签：ember.js, ember-data

我正在使用 ember-data 的最新版本，并且我有一个典型的情况，其中大多数模型需要由 ember-data 管理，因此当我在商店上进行提交时，它们会与后端同步。在一种特殊情况下，我有一个仅在客户端使用的模型（但我将其创建为 DS.Model，因为它与正在运行的应用程序中的其他 ember-data 模型有关系）。

我可以在模型本身上标记什么以确保它永远不会看起来“脏”或“新”

我在创建对象时尝试做这样的事情，但由于某些奇怪的原因仍在跟踪它

```
App.Foo.createRecord({name: 'foo', loaded: true, new: false, dirty: false}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:47:06.343

您可以将模型添加到它自己的事务中。

```
transaction = this.get('store').transaction();
myObject = transaction.createRecord(App.Foo, {name: 'foo', loaded: true, new: false, dirty: false});
transaction.commit();
// or alternatively: myObject.transaction.commit() 
```

正常的 store.commit() 不会影响此事务中的对象。

Ember 实际上在后台创建了一个默认事务，这是当您调用裸 this.get('store').commit(); 时提交的内容；

您还可以通过以下方式将现有记录添加到事务中：

```
foo = App.Foo.find(1);
transaction = this.get('store').transaction();
transaction.add(foo);
foo.set('name', 'bar');
transaction.commit(); 
```

如果您不想提交事务并且也不想保留您在其中所做的更改，您可以调用：

```
transaction.rollback(); 
```

# android - 实现 facebook like 按钮

> ID：14749739
> 
> 赞同：0
> 
> 时间：2013-02-07T11:12:45.163
> 
> 标签：android, facebook, facebook-graph-api, android-listview, facebook-like

我创建了一个 android 应用程序来显示来自`facebook`. 我想要做的是实现`like`按钮。我拥有所有必要的数据（Facebook 令牌、用户 ID、应用 ID 等）和我需要的用户许可。

圈号**1**是评论的内容
圈号**2**是用户的名称
圈号**3**是我要实现的点赞按钮
圈号**4**是评论发送的时间

![在此处输入图像描述](../Images/c4abfc67b915627ff8162cbcfbfbc8ef.png)

我使用此链接获取评论： [https ://graph.facebook.com/568609876496765/comments](https://graph.facebook.com/568609876496765/comments)

它返回一个`JSON`我用短语表达的对象并获取数据并将其显示在`List View`.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:23:02.350

与网页不同，您不能将 Facebook **Like**按钮添加到 Android 应用程序。但是，您可以通过对 Facebook API 使用“POST”或“DELETE”查询将该功能添加到喜欢帖子（在您的情况下为评论）：

这是我在应用程序中*切换*评论的点赞状态的完整功能示例：

**注意：此代码适用于较旧的 v2.x SDK。因此，您需要调整一些特定于最新 v3.x SDK 的内容**

在您将用于发布/删除 Like 的 onClickListener 上，运行以下代码：

```
try {
    String query = "SELECT user_likes FROM comment WHERE post_id= \'"
            + THE_COMMENT_ID + "\'";
    Bundle params = new Bundle();
    params.putString("method", "fql.query");
    params.putString("query", query);
    String fqlResponse = Utility.mFacebook.request(params);

    JSONArray JALikes = new JSONArray(fqlResponse);

    for (int j = 0; j < JALikes.length(); j++) {
        JSONObject JOTemp = JALikes.getJSONObject(j);

        if (JOTemp.has("user_likes"))   {
            String userLikeStatus = JOTemp.getString("user_likes");
            if (userLikeStatus.equals("true"))  {

                try {
                    Bundle parameters = new Bundle();
                    Utility.mFacebook.request(arrayComments.get(position).getCommentID() + "/likes", parameters, "DELETE");

                    // CHANGE THE TEXT OF THE WIDGET TO SHOW THE TOGGLED STATE
                }
                catch(Exception e)  {
                    e.printStackTrace();
                }
            } else if (userLikeStatus.equals("false")) {
                try {
                    Bundle parameters = new Bundle();
                    Utility.mFacebook.request(arrayComments.get(position).getCommentID() + "/likes", parameters, "POST");

                    // CHANGE THE TEXT OF THE WIDGET TO SHOW THE TOGGLED STATE
                }
                catch(Exception e)  {
                    e.printStackTrace();
                }

            }
        }
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

在代码的第一部分（**在 之前`for loop`**），如果登录用户喜欢评论，我会检查当前状态。根据结果​​（**在 中`for loop`**），我要么删除赞，要么发布赞。

虽然它是一个较旧的 SDK，但代码仍然有效，并且只需进行一些修改（如果需要）就可以正常工作。

# scala - scala - 调度示例不起作用

> ID：14749743
> 
> 赞同：3
> 
> 时间：2013-02-07T11:13:01.203
> 
> 标签：scala, scala-dispatch

我正在关注[调度](http://dispatch.databinder.net/Dispatch.html)文档中的第一个示例-

```
 val svc = url("http://api.hostip.info/country.php")
    val country = Http(svc OK as.String)
    for (c <- country)
      println(c) 
```

我没有打印任何输出。当我将其更改为以下以进行阻塞调用时，我会得到输出。

```
val res = country()
println(res) 
```

需要帮助。

完整程序-

```
import dispatch._
object DispatchTest {

  def main(args: Array[String]) {
    val svc = url("http://api.hostip.info/country.php")
    val country = Http(svc OK as.String)
    for (c <- country)
      println(c)
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:40:30.800

嗯，这里不确定，但也许问题是你的主线程完成得太快了，后台线程（其中 Dispatch 异步工作）没有时间采取行动？

要检查这一点，您可以尝试插入延迟：

```
for (c <- country) // Here we spawn a background thread!
  println(c)

Thread.sleep(500) // So let's wait half a second for it to work 
```

当然，在实际程序中，您永远不需要这样做。

延迟的另一种选择只是`readLine()`在 main 的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:27:19.447

它在这里工作：

```
scala> import dispatch._
import dispatch._

scala> val svc = url("http://api.hostip.info/country.php")
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
svc: com.ning.http.client.RequestBuilder = com.ning.http.client.RequestBuilder@2f823290

scala> val country = Http(svc OK as.String)
country: dispatch.Promise[String] = Promise(-incomplete-)

scala> for (c <- country)
     |   println(c)

scala> BR 
```

注意`BR`出现在提示之后的那个。

您确定该国家/地区没有印在某处，但您没有注意到是因为它与其他输出混淆了吗？

# php - PHP多图按钮提交表单

> ID：14749744
> 
> 赞同：1
> 
> 时间：2013-02-07T11:13:02.730
> 
> 标签：php, html, submit, imagebutton

我一直在创建一个网站，我的用户可以在其中对已上传的图像进行评分。目前我使用单选按钮和提交按钮来获取用户评分并将其保存在系统中。我想更改此设置，以便代码使用图像点击来获得用户评分。到目前为止，我有以下代码，但它仅适用于一个图像按钮。有什么方法可以改变它以获得取决于点击了什么图像的结果。

代码：

**HTML**

```
<form>
<input
        type="image"
        name="flag_submit"
        src="img/Flag.png"
        onmouseover="this.src='img/Flag_Click.png'"
        onmouseout="this.src='img/Flag.png'"
        height="30"
        width="30"
        />
</form> 
```

**PHP**

```
if (isset($_POST['flag_submit_x']))
{
    //Do process of rating.
} 
```

有什么方法可以创建多个图像按钮并在 PHP 代码中检测按下了哪个图像按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:19:57.500

1.  将名称更改为数组`name="flag_submit[1]"`。为每个图像分配一个不同的值，你就知道了。

2.  在 php 端将其作为数组读取：`if (isset($_POST['flag_submit'][1]))`.

或者更好的是，遍历 if`$_POST['flag_submit']`并找到所有值：

```
foreach ( $_POST['flag_submit'] as $value )  {
    echo $value . ' has been clicked.';
} 
```

* * *

```
<form method="post">
<input type="image" name="rateButton[1]" src="img/Rate1.png" height="40" width="40" value="1"/> T
<input type="image" name="rateButton[2]" src="img/Rate1.png" height="40" width="40" value="1"/> T
<input type="image" name="rateButton[3]" src="img/Rate1.png" height="40" width="40" value="1"/> T
<input type="image" name="rateButton[4]" src="img/Rate1.png" height="40" width="40" value="1"/> T
</form>
<pre>
<?php
    if ( isset( $_POST['rateButton'] ) ) {
        foreach ( $_POST['rateButton'] as $key => $value ) {
            echo 'Image number '.$key.' was clicked.';
        }
    }
?> 
```

在您的情况下，您不关心它发送什么值，您只需要关心用于提交表单的密钥，因为始终只有一个密钥集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:25:47.903

这是一个可能有帮助的技巧：

我创建了一个表单的 HTML 页面：

代码

```
<html><body><form method="post" action="show_post.php">
<input type="image" name="stamp[1134118800]" src="redstar.gif" value="red">
<input type="image" name="stamp[1134140400]" src="greenstar.gif" value="green">
</form></body></html> 
```

表单提交到的脚本 show_post.php 内容如下：

代码

```
<?php
print '<html><body><pre>';

print_r ($_POST);

print '</pre></body></html>';
?> 
```

当我点击第一张图片时，我得到：

```
Array
(
    [stamp] => Array
        (
            [1134118800] => 21
        )

) 
```

当我点击第二张图片时，我得到：

```
Array
(
    [stamp] => Array
        (
            [1134140400] => 15
        )

) 
```

这适用于 Opera、IE 和 Mozilla。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-15T13:08:39.587

第一个代码对我来说很好，将名称更改为数组名称 =“flag_submit[1]”。为每个图像分配一个不同的值，你就知道了。

在 php 端将其作为数组读取：

```
if (isset($_POST['flag_submit'][1])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:22:19.603

您可以有多个具有相同名称但值不同的 <button type="submit"> 元素可以包含图像，只会发送已单击的元素的值。

有关详细信息，请参阅规范：[http ://www.w3.org/html/wg/drafts/html/master/forms.html#the-button-element](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-button-element)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T11:58:29.347

这可能会帮助你

```
<?php
if($_POST['button'])
{
    echo "you have pressed button ".$_POST['button'];
}
?>
<style>
    input.overridecss {
    background-color: transparent;
    border: 0px;
    background-position: center;
    background-repeat: no-repeat;
    background-image: url(http://i49.tinypic.com/rm2w0i.png);
}
</style>
<form method="POST">
    <input type="submit" name="button" value="1" class="overridecss"/>
    <input type="submit" name="button" value="2" class="overridecss"/>
    <input type="submit" name="button" value="3" class="overridecss"/>
    <input type="submit" name="button" value="4" class="overridecss"/>
    <input type="submit" name="button" value="5" class="overridecss"/>
</form> 
```

# c# - 在 c#+XML 中插入没有 XmlDomument.Load() 的 xml 节点

> ID：14749750
> 
> 赞同：0
> 
> 时间：2013-02-07T11:13:19.930
> 
> 标签：c#, xml

有一个带有节点的 log.xml 文件

```
<AppXmlLogWritter>
  <LogData>
    <LogID>5678201302071614556349583069537201151138</LogID>
    <LogDateTime>20130207161455</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>BaburaoLogFlag</LogFlag>
    <LogApplication>BaburaoLogApplication</LogApplication>
    <LogModule>BaburaoLogModule</LogModule>
    <LogLocation>BaburaoLogLocation</LogLocation>
    <LogText>BaburaoLogText</LogText>
  </LogData>
  <LogData>
    <LogID>5678201302071614556349583069537201151138</LogID>
    <LogDateTime>20130207161455</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>BaburaoLogFlag</LogFlag>
    <LogApplication>BaburaoLogApplication</LogApplication>
    <LogModule>BaburaoLogModule</LogModule>
    <LogLocation>BaburaoLogLocation</LogLocation>
    <LogText>BaburaoLogText</LogText>
  </LogData>
</AppXmlLogWritter> 
```

我想通过替换 XML 文件中的根节点来添加一些新节点`<AppXmlLogWritter>`。不覆盖旧节点。但是我的代码用我的新节点替换旧节点我想用新节点保留那个旧节点

```
Mutex objMutex = new Mutex(false, @"Global\MySharedLog");
            XmlDocument xmlDoc = new XmlDocument();
            string currentDateTime = DateTime.Now.ToString("yyyyMMddHHmmss");
            XmlElement newelement = xmlDoc.CreateElement("LogData");
            XmlElement xmlLogID = xmlDoc.CreateElement("LogID");
            XmlElement xmlLogDateTime = xmlDoc.CreateElement("LogDateTime");
            XmlElement xmlLogType = xmlDoc.CreateElement("LogType");
            XmlElement xmlLogFlag = xmlDoc.CreateElement("LogFlag");
            XmlElement xmlLogApplication = xmlDoc.CreateElement("LogApplication");
            XmlElement xmlLogModule = xmlDoc.CreateElement("LogModule");
            XmlElement xmlLogLocation = xmlDoc.CreateElement("LogLocation");
            XmlElement xmlLogText = xmlDoc.CreateElement("LogText");
            XmlElement xmlLogStackTrace = xmlDoc.CreateElement("LogStackTrace");

            int randomNumber = random.Next(9999);
            xmlLogID.InnerText = _logIDPrefix + currentDateTime + DateTime.UtcNow.Ticks + randomNumber;
            xmlLogDateTime.InnerText = currentDateTime;
            xmlLogType.InnerText = ((LogTypes)Convert.ToInt32(logType)).ToString();
            xmlLogFlag.InnerText = logFlag;
            xmlLogApplication.InnerText = _logApplication;
            xmlLogModule.InnerText = logModule;
            xmlLogLocation.InnerText = logLocation;
            xmlLogText.InnerText = logText;
            xmlLogStackTrace.InnerText = logStackTrace;

            newelement.AppendChild(xmlLogID);
            newelement.AppendChild(xmlLogDateTime);
            newelement.AppendChild(xmlLogType);
            newelement.AppendChild(xmlLogFlag);
            newelement.AppendChild(xmlLogApplication);
            newelement.AppendChild(xmlLogModule);
            newelement.AppendChild(xmlLogLocation);
            newelement.AppendChild(xmlLogText);

            try
            {
                objMutex.WaitOne();
                if (!File.Exists(_logFilePath))
                {
                    File.WriteAllText(_logFilePath, "<?xml version='1.0' encoding='utf-16' standalone='yes'?>\n<AppXmlLogWritter>\n</AppXmlLogWritter>");
                }
                string fileContains = string.Empty;
                foreach (string line in File.ReadLines(_logFilePath))
                {
                    if (line.Contains("<AppXmlLogWritter>"))
                    {
                        fileContains = line.Replace("<AppXmlLogWritter>", "<AppXmlLogWritter>" + newelement.OuterXml.ToString());
                        break;
                    }
                }
                //xmlDoc.PreserveWhitespace = true;                
                xmlDoc.LoadXml(fileContains);
                // //xmlDoc.Load(_logFilePath);
                XmlElement ele = xmlDoc.DocumentElement;

                xmlDoc.DocumentElement.AppendChild(newelement);
                xmlDoc.Save(_logFilePath);
            }
            finally
            {
                objMutex.ReleaseMutex();
            } 
```

即旧节点和新节点都保存到文件而不替换旧节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:45:17.493

我已经解决了这个问题，现在变得比 XmlDocument 代码的加载方法快得多，我只是替换了正确工作的 try 块，并保持原样的代码

```
 string rootEndTag = "</AppXmlLogWritter>";
            int rootEndTagLength = Encoding.UTF8.GetBytes(rootEndTag).Length;
            try
            {
                objMutex.WaitOne();
                if (!File.Exists(_logFilePath))
                {
                    File.WriteAllText(_logFilePath, "<?xml version='1.0' encoding='utf-8' standalone='yes'?><AppXmlLogWritter></AppXmlLogWritter>");
                }

                var fileStream = File.Open(_logFilePath, FileMode.Open);
                fileStream.Position = fileStream.Length - rootEndTagLength;

                var objStreamWriter = new StreamWriter(fileStream);
                objStreamWriter.WriteLine(newelement.OuterXml);
                objStreamWriter.Write(rootEndTag);
                objStreamWriter.Close();
                fileStream.Close();
            } 
```

# iphone - 正在播放歌曲时，如何在 AVAudioPlayer 中制作像 UIProgressView 这样的渐进式 UISlider？

> ID：14749759
> 
> 赞同：0
> 
> 时间：2013-02-07T11:13:48.140
> 
> 标签：iphone, ios6, avaudioplayer, uislider

实际上，我在 AVAudioPlayer 中播放歌曲时，Slider 会随着歌曲的运行而进行。如果我向前或向后寻找它，我也会从当前歌曲正在播放的位置开始。但问题是在将滑块搜索到特定位置后，它没有前进并停在那里，但歌曲仍在从该位置运行。

下面的代码：

> 块引用

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self     selector:@selector(updateMyProgressOfCurrentPlayingSong:) userInfo:nil repeats:YES];

-(void)updateMyProgressOfCurrentPlayingSong:(NSTimer *)theTimer{
//For Current Song Playing Slider
float progr = [mediaPlayer currentTime]/[mediaPlayer duration];
self.audioCurrentPlayingSlider.value = progr;
}

//For Slider Value change
-(IBAction)audioCurrentSongPlayingSlider:(id)sender {
 [myTimer invalidate];
 myTimer = nil;
 [self.audioCurrentPlayingSlider setMinimumValue:0.0];
 [self.audioCurrentPlayingSlider setMaximumValue:[mediaPlayer duration]];
 [mediaPlayer setCurrentTime:[self.audioCurrentPlayingSlider value]];      
 [myTimer methodForSelector:@selector(updateMyProgressOfCurrentPlayingSong:)];

} 
```

> 块引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:31:55.720

请参阅以下可能对您有所帮助的链接，1）[如何将 UISlider 添加到 AVPlayer](https://stackoverflow.com/questions/11732620/how-to-add-uislider-to-avplayer) 2）[UISlider 以控制 AVAudioPlayer](https://stackoverflow.com/questions/2654849/uislider-to-control-avaudioplayer) 3 [）在应用程序中创建 UISlider 进度条和计时器（如 iPod 播放器）](https://stackoverflow.com/questions/13387469/create-a-uislider-progress-bar-and-timer-like-ipod-player-within-app) 4）[http://www.mobisoftinfotech.com/博客/iphone/集成-音乐播放器-in-iphone/](http://www.mobisoftinfotech.com/blog/iphone/integrate-music-player-in-iphone/)

# tfs - 工作区版本表包含未知的架构版本

> ID：14749768
> 
> 赞同：27
> 
> 时间：2013-02-07T11:14:10.277
> 
> 标签：tfs, visual-studio-2012

刚刚启动 Visual Studio 2012 并使用 Team Foundation Server 2012 Express 打开了我的源代码控制解决方案，遇到了这个问题，有什么想法吗？无法获取最新信息，无法签入，一切似乎都已签出:(基本上我的工作区现在无法使用。

> TF400018: 本地工作区 MY-PC 的本地版本表；无法打开我的用户。工作区版本表包含未知的架构版本。

我在网上只能找到[一篇帖子](http://social.msdn.microsoft.com/Forums/en/tfsgeneral/thread/d7752aca-21ec-4290-b9ad-f86b2585d6ea)，答案很模糊。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T19:00:39.700

我有同样的问题，我只是把它修复在我的身上。
如果您不介意重新映射所有项目，可以尝试以下操作：

*   单击“工作区”中的框。
*   单击“工作区”。
*   删除您当前使用的工作区配置文件
*   重新连接到 TFS 打开“源代码管理”

**请注意，您可能会丢失所有 TFS 映射，您可能需要从 TFS 重新映射所有项目。备份尚未签入的更改。**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-04-16T11:41:29.330

cycle6 是正确的，但不清楚如果您执行一些额外的步骤，您是否会丢失待处理的签到列表。

1.  单击标有“工作区”的框。
2.  单击“工作区”。
3.  删除损坏的工作区配置文件，接受警告。
4.  重新连接到 TFS 并打开“Source Control Explorer”
5.  创建新工作区
6.  一个一个地把你的项目映射**到和以前一样的文件夹**
7.  您将看到一个冲突列表，其中您已经在文件夹中有匹配的可写文件。
8.  为您之前签出的每个文件选择“保留本地副本”，并为您没有最新版本的团队其他成员更改的任何文件选择“获取服务器版本”。这可能需要一段时间，具体取决于列表的长度，但值得比较您不确定的任何文件的版本。

您将留下您的解决方案和标记为已签出的所有待处理项目，并保留您的工作。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-19T18:03:23.427

我做了以下步骤，它解决了这个问题：

1.  删除了名为的隐藏文件夹`$tfs`，然后
2.  在 Visual Studio 中，解决方案资源管理器： `Right click on the solution node > the Source Control > Get Specific version > latest version`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-10-04T11:07:49.537

如果您已经打开了多个 Visual Studio 实例。

1.  全部关闭。[在某些情况下，您需要从 Windows 注销并重新登录或重新启动]

2.  `$tf`用任何其他名称重命名文件夹（例如。 `$tft`）

3.  启动 Visual Studio，查看您的问题是否已解决。:)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-05-24T08:57:56.650

有时，当您的磁盘空间不足时会发生这种情况。尝试查看您是否有非常小的空间，例如。< 10 MB。

如果是这样，请尝试清理您的 Windows Temp 文件夹。看看能不能解决这个问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-14T06:34:11.470

有一个简单的解决方法。将本地映射删除到源文件夹所在的文件夹（高级 -> 删除映射，或者只是重命名或删除映射文件夹。之后，您将能够连接到 tfs。再次下载项目。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-23T10:09:36.303

这在一定程度上是一种误导性信息。发生的事情是工作区的内部数据结构已损坏。最终作为代码（在`tf`命令、Visual Studio 等中）加载那些无法从相关文件加载的数据结构，这成为有关架构版本问题的错误。

在我遇到的情况下，这是因为托管工作空间的机器在对各种工作空间*进行*操作（签出、签入、添加待处理的更改）时磁盘空间不足——实际上是一堆工作空间正在由 TFS 2017 构建代理和多个活动构建使用）。这损坏了隐藏子目录下文件中保存的数据部分`$tf`（它始终是TFS 2017 构建代理上[的本地工作区](https://docs.microsoft.com/en-us/azure/devops/repos/tfvc/decide-between-using-local-server-workspace?view=tfs-2017)），因为源代码控制无法重写/扩展这些文件。

此处的其他答案讨论了部分保留一些文件，基于对*未*损坏的内容的更具体知识（例如，如果没有创建任何未决更改，则保留存储未决更改的内部文件），但基本思想是需要将所有东西重置为*某种*`$tf`理智的状态。

 *就我而言，我有多种潜在原因的缺点，并且对哪些部分`$tf`已损坏没有一致的了解，但相反我有一些优点：

*   它是一个 TFS 构建，被安排从构建代理的`s`（源）目录构建到它的`a`（工件暂存）和`b`（二进制）目录中，工作区中没有大量的非源控制对象和其他文件（这是`s`目录），这将最终成为待处理的添加。
*   没有任何值得保留的未决更改（对实际源文件）。我可以承受丢失有关源文件的所有信息，以及实际上所有当前本地存储的有关工作空间的信息，并且只需使用一个全新且大部分未填充的工作空间再次运行构建。我什至不需要恢复整个工作区的源文件和目录，因为任何 TFS（“vNext”）构建中的第一个任务是“获取源”任务，它使用（各种）`tf vc scorch`、、`tf vc undo`和`tf vc get`检查正确的源版本。

很简单，在 Developer PowerShell 中（Visual Studio 安装在构建机器上）：

1.  `Remove-Item -Recurse -Force 'X:\Agents\07\_work\1138\s'`
2.  `tf vc get 'X:\Agents\07\_work\1138\s'`

（请注意，`tf`在 TFS 构建机器上总是可以通过某种方式获取命令。每个构建代理`tf.exe`在其 VSTS“OM”子目录中都有一个本地帮助程序副本及其辅助 DLL。）

我可能已经省略了这`tf vc get`一步，但是过去在“获取源”方面遇到了麻烦，我不相信它能够稳健地应对任意手动外部更改，例如`s`当构建未配置为彻底删除整个目录时没有目录目录本身（[它可以是](https://docs.microsoft.com/en-us/azure/devops/pipelines/repos/tfvc?view=tfs-2017)但不在这里）。出于同样的原因，微软自己的“代理维护”（另一种清理方式）非常狡猾，最终导致 TFS 服务器上的工作区泄漏（我向微软提出了一个错误）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-21T09:51:04.987

**对于 eclipse 中的相同问题**：找到文件夹 $tf 并将其删除。您将在工作区目录中找到 $tf 文件夹。如果没有，则搜索 $tf 文件夹。找到后，将其删除。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-10-10T06:17:50.287

[![在此处输入图像描述](../Images/3fa9f582b3bb64ee1787b1b35c211927.png)](https://i.stack.imgur.com/VD5bm.jpg)如果您已经打开了多个 Visual Studio 的 tfs 实例。

1.) 打开文件 -> 源代码管理 -> 管理工作区 2.) 删除所有 tf​​s 映射 3.) 然后选择文件夹映射

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-24T15:08:50.027

对我有用的是，删除本地文件夹，重新启动机器，然后再次映射项目。您刚刚将它们暂时保存在其他地方的任何未决更改。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-20T00:28:37.987

或者，您可以将当前工作区备份到其他位置，重新创建工作区，然后将更改后的文件复制回。VS 应该检测到最新的文件并自动检出这些文件，从而允许您检入从备份中复制回来的较新版本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-02T04:29:34.130

在我的情况下，其他答案都没有帮助 - 问题发生在没有 Visual Studio 的机器上，无论我如何尝试摆脱它从未工作过的坏工作区数据。在使用 procmon 之后，我发现了另一个可能是此错误来源的关键文件夹：（`C:\Users\All Users\Microsoft Team Foundation Local Workspaces\`它也可能位于`C:\ProgramData`（在我的系统上，'All Users' 是该文件夹的符号链接，但不确定这是否是典型的.) 在这个文件夹中，有一些名为 guids 的子文件夹，其中包含一些其他文件夹，每个工作区都有一个。在我的情况下，这些文件夹中的一些数据是旧的，有些是损坏的。一旦我删除了坏的工作区文件夹，我所有的问题都消失了。您可能还想删除本文评论中标识的缓存文件[夹](https://stackoverflow.com/questions/25429753/repair-local-visual-studio-tfs-workspace-mapping)，但这对我没有帮助（不过似乎也没有受伤。）*

# android - jquery mobile form submit在尝试阻止提交时重置表单

> ID：14749771
> 
> 赞同：0
> 
> 时间：2013-02-07T11:14:13.730
> 
> 标签：android, jquery, forms, cordova, jquery-mobile

所以我有一个表单，如果某些字段是无效的，它不会提交表单，它会吐出一个`alert()`告诉他们修复它。我面临的问题是它重置了表单并且用户添加的所有数据都消失了。由于我的表单太大，我将向您展示我的 jQuery 函数：

```
$('#microForm').live('submit', function(){
                if ($('#barcode').val() != '') {
                    insertForm();
                } else {
                    alert('Insert Barcode');
                    return false;
                }
}); 
```

`<form id="microForm">`

我正在一个带有phonegap的android应用程序上尝试这个 - 将表单插入到本地数据库表（即sqlite）。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:55:55.280

这应该可行，看看我为你做的一个例子：http: [//jsfiddle.net/Gajotres/bGdM6/](http://jsfiddle.net/Gajotres/bGdM6/)

您应该使用**on**而不是**live**：

```
$('#microForm').on('submit', function(event){
    if ($('#barcode').val() != '') {
        alert('Submit');
    } else {         
        alert('Insert Barcode');
        return false;
    }
}); 
```

**在直播**和**直播**之间切换，看看它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:08:08.320

我对@Gajotres jsFiddle 做了一个小的调整：

*   [http://jsfiddle.net/bGdM6/1/](http://jsfiddle.net/bGdM6/1/)

您可以检查提交按钮单击/点击事件，而不是在表单上使用提交，如果您需要的所有值都在那里，则提交表单

JS：

```
$('#submit-btn').on('click', function(event) {
    if ($('#barcode').val() != '') {
        alert('Submit');
        $('#microForm').submit(); // <-- submit the form
    } else {
        alert('Insert Barcode');
        event.preventDefault();
        return false;
    }
}); 
```

HTML

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">
        <form id="microForm">
            <input type="text" value="" id="barcode"/>
            <input type="submit" id="submit-btn" value="Submit"/>
        </form>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div> 
```

# ios - 如何识别选定的静态 UITableViewCell

> ID：14749772
> 
> 赞同：1
> 
> 时间：2013-02-07T11:14:26.800
> 
> 标签：ios, cocoa-touch, uitableview

我已经想到了在该方法中使用的几种`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`方法：

*   创建插座并将单元格链接到它们，然后通过比较参考来检查选择了哪一个
*   在每个单元格上设置并检查唯一的重用标识符属性
*   使用 indexPath，因为您知道哪个单元格在哪个索引处，因为无论如何它们都是静态定义的

最好的方法是什么？或者也许还有另一种更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:04:15.760

绝对 indexpath 是最好的方法，因为 tableview 的许多代表都在 indexpath 上工作。您可以通过跟踪 indexpath 轻松获取行。我想您也可以使用名为“已选择”的单元格的属性来检查是否选择了单元格状态。希望这可以帮助。还可以在 tableviews 上使用苹果文档。

# c# - Windows 服务未运行。错误 1053

> ID：14749782
> 
> 赞同：1
> 
> 时间：2013-02-07T11:14:53.833
> 
> 标签：c#, service

我正在尝试运行我的 Windows 服务，但它给出了错误 1053：“超时” 如果启动方法在 30 秒内无法响应，则应该弹出错误 1053，但在这种情况下，甚至没有达到 OnStart 方法。我尝试调试它，但它没有帮助，因为我什至没有达到实际代码，并且在此之前弹出错误消息。在这种情况下有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-05T06:03:01.667

当我尝试在远程桌面上安装服务并出错时，我遇到了类似的问题

> 错误 1053：服务没有及时响应启动或控制请求

我能够通过安装目标 dotnet 框架来解决这个问题
（有时远程服务器在较低的框架上，我们使用最新的框架构建服务）。

所以我的发现是，在这些情况下，您需要检查几件事：

*   安装正确的依赖项
*   所有 dll 都带有目标框架
*   servivce.cs 中存在的主要静态方法

# javascript - 使用 jQuery 隐藏和显示 datalist 表的更多行

> ID：14749788
> 
> 赞同：4
> 
> 时间：2013-02-07T11:15:18.190
> 
> 标签：javascript, jquery, asp.net, html-table, datalist

我有一个 asp 数据列表，设置如下：

```
<asp:DataList ID="dlListItems" ClientIDMode="Static" Width="100%" runat="server" RepeatColumns="2" ItemStyle-BorderColor="#E8E6E7" ItemStyle-BorderStyle="Solid" ItemStyle-BorderWidth="1px"
        RepeatDirection="Horizontal" RepeatLayout="Table"> 
```

在数据列表中，每个节点都包含一个带有“divList”类的 div

我需要能够实现一些东西，所以不是所有节点都显示在加载和一个按钮来加载更多。不需要发生服务器端操作，只需显示隐藏行的能力。

我设法通过隐藏然后一次显示 10 个 div 来使其工作。虽然这很好用，但仍会显示数据列表中的表行，因此您会在数据列表底部看到很大的空白行。

```
 $(function () {
    $(".divList").slice(0, 10).show(); 
    $("#load").click(function (e) { 
        e.preventDefault();
        $(".divList:hidden").slice(0, 10).fadeIn(1500);          
    });
}); 
```

希望有人可能对我如何在表格行而不是 div 上实现这一点提出一些建议，以防止数据列表中的空白间距。请记住（据我所知）我不能将任何 id 的类分配给 datalist 生成的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:30:00.320

你应该试试这个

```
$(function(){
    var trs =  $("#dlListItems tr");
    trs.hide();
    trs.slice(0, 10).show(); 
    $("#load").click(function (e) { 
        e.preventDefault();
        $("#dlListItems tr:hidden").slice(0, 10).fadeIn(1500);          
    });
}); 
```

首先隐藏 dlListItems 中的所有 Table 行，然后获取要显示的 trs ，因为您不想显示那些具有隐藏 div 的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:38:51.033

试试这个

```
$(function () {
  $(".divList").parent().parent().hide();
  $(".divList").parent().parent().slice(0, 5).show();
  $("#load").click(function (e) {
     e.preventDefault();
     $(".divList:hidden").parent().parent().slice(0, 5).fadeIn(1500);
  });
}); 
```

作为`dlListItems`动态控件的 ID，它可以在客户端动态更改（取决于控件的嵌套）。所以我想这将是一个更好的方法。

# python - 动态选择函数

> ID：14749801
> 
> 赞同：1
> 
> 时间：2013-02-07T11:15:53.320
> 
> 标签：python

我有一些如下所示的代码：

```
if command == 'a':
    do_a(a, b, c)
elif command == 'b':
    do_b(a, b, c)
elif command == 'c':
    do_c(a, b, c) 
```

我怎样才能用更优雅的东西代替这种类型的东西？也许，类似于 do_[command](a, b, c) 的东西，被调用的函数取决于命令？

甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:24:43.850

您可以将命令存储在 dict 中并在需要时进行查找：

```
In [15]: commands = {'mul': lambda x,y: x*y,
                     'add': lambda x,y: x+y}

In [16]: commands['mul'](3,4)
Out[16]: 12

In [17]: commands['add'](3,4)
Out[17]: 7

In [18]: command = 'add'; vars = (4,5)
In [19]: commands[command](*vars)
Out[19]: 9 
```

您应该检查 a 是否`command`确实在`commands`：

```
if command in commands:
    commands[command]()
else:
    # handle error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:21:20.887

您可以使用“反射”执行类似的操作，通过字符串名称调用函数，如下所述：

[Python：从字符串名称调用函数](https://stackoverflow.com/questions/7936572/python-call-a-function-from-string-name)

**但**

如果您对传递的内容没有绝对控制权，那将不会更优雅，可读性会降低，并且更容易搞砸`command`.

你的版本很好：

> 显式优于隐式。
> 
> 简单胜于复杂。

如果您真的想避免使用`elif`'s，我会采用`dict`评论中建议的函数方法。

远离 eval 这样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-20T20:51:06.637

```
def do(fname):
    return {'a':do_a, 'b':do_b, 'c':do_c}.get(fname)

def do_a(x,y,z): return x + y + z
def do_b(x,y,z): pass
def do_c(x,y,z): pass 
```

用法：

```
do('a')(1,2,3)
6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:39:14.983

我正在等待其他人提供更好的解决方案，但是：

```
def dispatch(cmd, *args):
   globals()['do_' + cmd](*args)

def do_a(a, b, c): 
```

用法：

```
dispatch('a', 1, 2, 3) 
```

显然不健壮，但`dispatch`可以确保该功能存在。

可能一个不错的方法是使用装饰器。

```
@command()
def do_a(a,b,c):
    ...

@command("do_x")
def myfunc(a, b, c):
   ... 
```

您的装饰器可以维护调度查找表等。

这取决于您是否担心可能需要使用现有功能或担心名称冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T11:48:48.500

这可能会对您有所帮助，这里的源可以是任何以函数名称结尾的通用模块路径，例如 module.funcname

所以一个示例调用看起来像 convertStringToFunction(module.funcname)

```
def import_module(name):
    mod = __import__(name)
    components = name.split('.')
    for comp in components[1:]:
        mod = getattr(mod, comp)
return mod

def convertStringToFunction(source):
    tempArr = source.rsplit('.',1)
    mod = import_module(tempArr[0])
    func = getattr(mod, tempArr[1])
    return func 
```

# c++ - 未定义的向量引用 g ++链接器错误

> ID：14749811
> 
> 赞同：0
> 
> 时间：2013-02-07T11:16:21.193
> 
> 标签：c++, linux, linker, g++, undefined

我已经编译了我的源文件 mycpp.c 的依赖文件，并按照它们使用的顺序链接了这些文件。所有依赖文件都在同一个文件夹中。

```
 **//Compilation**
     $ g++  -c -w -Wno-deprecated String.c Vector.c DPStream.c CJ_Base.c mycpp.c
     **//Linking**
     $ g++ -g -o myexe String.o Vector.o DPStream.o CJ_Base.o mycpp.o
Vector.h
#include <iostream.h>
#include <fstream.h>
#include <iomanip.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

#include "String.h"
#include "Storage.h"

template <class Object>
class Vector : public Storage{

        public:
                // ctors & dtor
                Vector ();
                Vector (int);
                ~Vector();

                // overloaded operators
                Object& operator[] (int nSubscript);
                void operator<<(Object &);
                void operator<<(char *);

                // access methods
                int  Count(){return _iCurrElem;};
                int  Print(ofstream &);
                void Flush();
                Resize(int);

                int  IsType() {return VectorType;};

        private:
                long _iCurrElem;
                Object *moj;
                long _iUpperBound;

                void _reserve(int);
};
#endif

Vector.c
---------
#include"Vector.h"

template <class Object>
Vector<Object>::Vector ()
{
   moj = new Object[3];
}

template <class Object>
Vector<Object>::Vector (int e)
{
moj = new Object[e];
}

template <class Object>
Vector<Object>::~Vector ()
{
  delete[] moj;
} 

template <class Object>
Vector<Object>::operator<<(Object &)
{
//stmt
}

template <class Object>
Vector<Object>::operator<<(char* ch)
{
//stmt
}

template <class Object>
Vector<Object>::Print(ofstream &foutput)
{
//stmt
} 
```

在 mycpp.h 的以下顺序中包含头文件

```
#include <iostream.h>
#include <fstream.h>
#include <iomanip.h>
#include <cstdio>
#include <cstdlib>
#include <cmath>
#include "String.h"
#include "Vector.h"
#include "DPStream.h"
#include "CJ_Base.h" 
```

但是 g++ 编译器仍然抛出错误 *粘贴在链接错误下方*

```
 DPStream.o: In function `DPStream::operator<<(Vector<String>&)':
    DPStream.c:(.text+0x396): undefined reference to `Vector<String>::Print(std::basic_ofstream<char, std::char_traits<char> >&)'
    mycpp.o: In function `mycpp::ProcessFile()':
    mycpp.o:(.text+0x24e): undefined reference to `Vector<String>::operator<<(String&)'
    mycpp.o:(.text+0x2e5): undefined reference to `Vector<String>::operator<<(char*)'
    mycpp.o:(.text+0x310): undefined reference to `Vector<String>::Flush()'
    mycpp.o:(.text+0x32b): undefined reference to `Vector<String>::operator<<(String&)'
    mycpp.o:(.text+0x346): undefined reference to `Vector<String>::operator<<(String&
    mycpp.o: In function `mycpp::~mycpp()':
    mycpp.o:(.text+0x24e): undefined reference to `Vector<String>::operator<<(String&)' 
```

你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:24:48.057

您没有向我们展示`Vector`定义的位置和方式，而只是猜测：您正在编译一个`Vector.c`. 如果这个文件包含模板的实现，那么你做错了；当模板被实例化时，模板的实现必须是可见的。您可以将它放在头文件中，也可以包含头文件中的源代码，但您不编译源代码。

此外，*大多数*编译器认为 a`.c`是 C 源代码，而不是 C++。您几乎可以肯定要将源的名称更改为`.cpp`或`.cc`。当您使用它时，我也会更改纯 C++ 标头的名称。虽然无处不在，但对 C 头文件和纯 C++ 头文件使用相同的命名约定可能会造成混淆。

最后，`<name.h>`C 标准头文件的形式不标准；如果它们存在（它们通常不存在），它们应该引用旧的、预标准版本的库。（从您的错误消息来看，显然不是这种情况。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:23:34.597

您所有的错误都与模板函数有关。

请记住，在定义模板时，您必须**将定义放在 header**中，而不是放在`.cpp`文件中。其他模块需要定义来执行它们自己的模板实例化。

所以一个快速的解决方法是`#include "Vector.c"`在`Vector.h`.

或者将整个模板实现放在`.h`文件中。

* * *

（也请`.cpp`不要`.c`用于 C++ 源文件；`hpp`用于 C++ 头文件也很好）

# sql - 在sql server中如何用逗号分隔列值

> ID：14749813
> 
> 赞同：1
> 
> 时间：2013-02-07T11:16:24.587
> 
> 标签：sql, sql-server

我的查询是：

```
select 
gp.GroupName+ '' As GroupName,  
us.UnitsName+'' As Unitname,
sp.Sensorname+',' As sensorName
from Grouping as gp
inner join Units as us
on gp.UnitsID = us.UnitsID
inner join Sensors as sp
on gp.SensorID = sp.SensorID 
```

输出是

```
GroupName   Unitname    sensorName

G1         Electricity  S1,

G1        Electricity   S3,

G2          Gas       test, 
```

但输出应该看起来像

```
G1         Electricity  S1,S3

G2          Gas       test 
```

如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:20:54.163

```
WITH CTE
AS
(
    select
      gp.GroupName  As GroupName,
      us.UnitsName  As Unitname,
      sp.Sensorname As sensorName
    from Grouping as gp
    inner join Units as us  on gp.UnitsID = us.UnitsID
    inner join Sensors as sp on gp.SensorID = sp.SensorID
)
SELECT 
  c1.Groupname,
  c1.Unitname,
  STUFF((
    SELECT ', ' + c2.sensorName
    FROM CTE c2
    WHERE c2.GroupName = c1.GroupName
      AND c2.Unitname = c1.Unitname
    FOR XML PATH (''))
  ,1,2,'') AS Sensors
FROM CTE  c1
GROUP BY c1.GroupName,
         c1.Unitname; 
```

# php - 没有错误，并且数据库中没有更改

> ID：14749814
> 
> 赞同：0
> 
> 时间：2013-02-07T11:16:27.853
> 
> 标签：php

我需要将选中复选框的 classid 设置为 PAID，将未选中复选框设置为 UNPAID。阻止数据库更改的问题可能是什么？我检查了 html 页面中的一些复选框。当我按保存页面重置并且当我检查数据库（PhpMyAdmin）时没有任何更改。

这是我的代码：

```
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  ?> <input type="hidden" name="id1[]" value="<?php echo $row['classid']; ?>" /><?php
 echo "<td>"  . $row['class_date'] .  "</td>";
    echo "<td>"  . $row['class_time'] .  "</td>";
   echo "<td>"  . $row['sal_teach'] .  "</td>";
   echo "<td align=center>"  . $row['status_teach'] .  "</td>"; ?>
   <!--echo "<td><a href='getpaid2.php?id={$row['classid']}'>Get Paid</a></td>";-->
  <td align="center"><input name="ONOFF[<?php echo $row['classid']; ?>]" type="checkbox" /></td>
<?php
  echo "</tr>";
  }
echo "<tr><td colspan=5><input type='submit' name='submit1' value='Save'/></td></tr>";
  echo "</table></div>";

    if(isset($_POST['submit1'])){

  foreach($_POST['id1'] as $id1)
 { 
  $status1 = 'UNPAID';
    if (isset($_POST['ONOFF'][$id1]))
    {
        $status1 = 'PAID';
    }

  $sql1="UPDATE class SET status_teach='$status1' WHERE classid=$id1";  

$myconn=mysql_connect('localhost','root','') or die("Couldn't Connect to the Server");
mysql_select_db('bddschool', $myconn) or die ("message");
  mysql_query($sql1,$mycon);
 } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:20:15.987

应该 ：

```
if (isset($_POST['ONOFF'][$id1])) {
    $status1 = 'PAID';
} else {
    $status1 = 'UNPAID';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:21:20.463

您的复选框缺少值。它总是空的。

```
<input name="ONOFF[<?php echo $row['classid']; ?>]" type="checkbox" value="1" /> 
```

# java - Android MediaPlayer 播放歌曲两次

> ID：14749816
> 
> 赞同：0
> 
> 时间：2013-02-07T11:16:33.590
> 
> 标签：java, android, media-player

我正在制作一个简单的启动画面，以便在加载应用程序时显示一个小徽标并播放一些叮当声。

我已经这样设置了：

```
 splashSong = MediaPlayer.create(MainActivity.this, R.raw.splash);
    splashSong.start();
    Thread splashThread = new Thread(){
        public void run(){
            try{
                sleep(6000);
            }
            }catch (InterruptedException e){

            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }finally{
                Intent openMenu = new Intent("com.mmm.MAINMENU");
                startActivity(openMenu);
            }
        }

    };
    splashThread.start(); 
```

但是播放次数有问题。当它加载启动类时，叮当声会播放两次。我已经改变了一系列的事情，比如准备歌曲和设置数据源。然而，这并不成功，屏幕仍然播放这首歌两次。

有人对它为什么会这样做有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:24:35.437

```
Add 
splashSong.setLooping(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:35:57.980

感谢[我先生](https://stackoverflow.com/users/951448/mr-me)的帮助。这与应用程序方向有关。删除了，一切正常！

# json - 在 Groovy 中使用 JSONBuilder 排除空值

> ID：14749817
> 
> 赞同：5
> 
> 时间：2013-02-07T11:16:35.970
> 
> 标签：json, groovy, null, jsonbuilder

是否可以使用默认的 JsonBuilder 库在 Groovy 中创建 JSON 值以排除对象的所有空值？例如 Jackson 在 Java 中通过注释类以排除空值。

一个例子是：

```
{
   "userId": "25",
   "givenName": "John",
   "familyName": null,
   "created": 1360080426303
} 
```

应打印为：

```
{
   "userId": "25",
   "givenName": "John",
   "created": 1360080426303
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T15:10:13.470

不确定它是否适合您，因为我的方法适用于`Map`with`List`属性：

```
def map = [a:"a",b:"b",c:null,d:["a1","b1","c1",null,[d1:"d1",d2:null]]]

def denull(obj) {
  if(obj instanceof Map) {
    obj.collectEntries {k, v ->
      if(v) [(k): denull(v)] else [:]
    }
  } else if(obj instanceof List) {
    obj.collect { denull(it) }.findAll { it != null }
  } else {
    obj
  }
}

println map
println denull(map) 
```

产量：

```
[a:a, b:b, c:null, d:[a1, b1, c1, null, [d1:d1, d2:null]]]
[a:a, b:b, d:[a1, b1, c1, [d1:d1]]] 
```

过滤掉`null`值后，您可以将其呈现`Map`为 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-02T14:40:12.950

我使用 Groovy 元类来解决这个问题，但不确定它是否适用于所有情况。

我创建了一个 Class 来保存所需的元素，但忽略了可能具有 null（或空）值的可选元素。

```
private class User {
    def id
    def username
} 
```

然后，我将数据添加到这个类。我的用例相当复杂，所以这是一个简化版本，只是为了展示我所做的一个例子：

```
User a = new User(id: 1, username: 'john')
User b = new User(id: 2, username: 'bob')
def usersList = [a,b]

usersList.each { u ->
    if (u.id == 1)
        u.metaClass.hobbies = ['fishing','skating']
}
def jsonBuilder = new JsonBuilder([users: usersList])
println jsonBuilder.toPrettyString() 
```

结果：

```
{
"users": [
    {
        "id": 1,
        "username": "john",
        "hobbies": [
            "fishing",
            "skating"
        ]
    },
    {
        "id": 2,
        "username": "bob"
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-24T14:03:34.673

如果你不需要使用 JSONBuilder，你可以使用 com.fasterxml.jackson：

制作对象：

```
private static final ObjectMapper JSON_MAPPER = new ObjectMapper().with {
    setSerializationInclusion(JsonInclude.Include.NON_NULL)
    setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY)
    setVisibility(PropertyAccessor.GETTER, JsonAutoDetect.Visibility.NONE)
    setVisibility(PropertyAccessor.IS_GETTER, JsonAutoDetect.Visibility.NONE)
} 
```

并显示您的地图列表（地图可以包含任何对象）：

```
println(JSON_MAPPER.writeValueAsString(listOfMaps)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-06T20:16:21.013

如果您使用 Groovy >2.5.0，则可以使用`JsonGenerator`. 下面的示例取自截至 2018 年 7 月[的 Groovy 文档](http://groovy-lang.org/json.html#_customizing_output)。

```
class Person {
    String name
    String title
    int age
    String password
    Date dob
    URL favoriteUrl
}

Person person = new Person(name: 'John', title: null, age: 21, password: 'secret',
                            dob: Date.parse('yyyy-MM-dd', '1984-12-15'),
                            favoriteUrl: new URL('http://groovy-lang.org/'))

def generator = new JsonGenerator.Options()
    .excludeNulls()
    .dateFormat('yyyy@MM')
    .excludeFieldsByName('age', 'password')
    .excludeFieldsByType(URL)
    .build()

assert generator.toJson(person) == '{"dob":"1984@12","name":"John"}' 
```

# java - 使用 Java 获取 MySQL 输出的列数

> ID：14749822
> 
> 赞同：1
> 
> 时间：2013-02-07T11:16:49.997
> 
> 标签：java, mysql, jdbc, connectivity

我想知道如何在 MySQL 中获取结果输出的列数。

我在这个网站上搜索了同样的问题，但我有点不同。

我想获取结果输出的列数而不是表的列数。

我想知道通过查询时结果输出中有多少列。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:20:39.650

使用[ResultSetMetaData#g​​etColumnCount()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html#getColumnCount%28%29)方法获取java中的计数

```
ResultSetMetaData rsmd = rs.getMetaData();
int numberOfColumns = rsmd.getColumnCount(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:21:30.583

```
ResultSetMetaData metadata = resultSet.getMetaData();
int columnCount = metadata.getColumnCount(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T17:44:03.760

您不需要`ResultSetMetaData`变量，只需尝试以下代码：

```
int columCount = rs.getMetaData().getColumnCount(); 
```

是`rs`一个`Resulset`。

# sql - SSIS如何根据另一个用户变量的值动态选择用户变量

> ID：14749825
> 
> 赞同：2
> 
> 时间：2013-02-07T11:16:53.547
> 
> 标签：sql, sql-server, ssis, oracle10g

我有一个`ForEach`用于在源连接中导入所有可用表的循环。我为此使用以下用户变量：

*   `OracleTables``System.Object`用于保存来自 oracle DB 的所有表的类型
*   `TableName`用于枚举`OracleTables`类型`String`
*   一组`Boolean`变量（例如`Enable_TABLENAME`）每个表一个来保存该表是否要导入。

现在，我想配置循环`DataFlow`内的任务`ForEach`以运行 iff 对应的表变量 if 的值`true`。基本上，我想要类似的东西：

`!@[User::Enable_@[User::TableName]]`对于任务的`Disable`属性。`DataFlow`

也就是说，我想获取`Boolean`变量持有的当前表的表`TableName`变量。

我怎样才能做到这一点？或者，有没有更好的方法来做到这一点？任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:49:25.823

您可以使用 ForEach Item Ennumerator（您可以在编辑器本身中定义您的 Items）或 NodeList Ennumerator（并将您的值保存在 XML 文件中）或 ADO.Net Ennumerator（您的值来自 SQL 表）。

# php - 如何引用一个类的这个属性？

> ID：14749826
> 
> 赞同：0
> 
> 时间：2013-02-07T11:16:54.040
> 
> 标签：php

我有以下课程：

```
stdClass Object
(
   [@attributes] => Array
   (
      [bla] => 1122
    )
   [element] => Array
   (
      [bla] => 1122
    )
) 
```

我想引用类的@attributes 部分。为“元素”做这件事很容易......那就是：

```
$class->element['bla'] 
```

但对于属性一来说，情况并非如此。以下不起作用：

```
$class->@attributes['bla']
$class->"@attributes"['bla']
$class->(@attributes)['bla'] 
```

我怎么称呼那个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:23:18.483

做

```
echo $class->{'@attributes'}['bla'];
//or
$name = '@attributes';
echo $class->$name['bla']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:21:59.993

你可以这样做：

```
$varname = '@attributes';
print_r($object->$varname); 
```

# iphone - 如何在没有用户交互的情况下在 iOS 中捕获图片？

> ID：14749831
> 
> 赞同：0
> 
> 时间：2013-02-07T11:17:32.507
> 
> 标签：iphone, ios, objective-c, avfoundation

我正在为 iPhone 开发一个移动追踪应用程序。我想在没有用户交互的情况下捕获用户的图片。我在 Google 上搜索过，但发现两个链接不符合我的要求。我发现我们可以通过使用 AVCam 和 AVFoundation 来做到这一点。是否有与此相关的示例代码？你有示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:25:25.377

`-takePicture`应该做的伎俩。您必须`UI`为相机控件提供自定义，否则（对我而言）它不起作用。查看 Xcode 中的开发人员文档并搜索 takePicture。方法描述有你需要的一切。

**以下为您提供简单的逻辑：**

```
- (IBAction) showCameraUI
{
    UIImagePickerController *picker;
    // create and display picker

   self.imagePicker = imagePicker;
   [NSTimer scheduledTimerWithTimeInterval:4.0
                             target:self
                           selector: @selector(targetMethod)
                           userInfo:nil
                            repeats:YES];
}

- (void)targetMethod
{
    [self.picker takePicture];
    // ...
} 
```

**其他选项是**

我找到...

```
AVCaptureVideoDataOutputSampleBufferDelegate 
```

自动拍照。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer   
   fromConnection:(AVCaptureConnection *)connection 
```

[检查官方文档](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutputSampleBufferDelegate_Protocol/Reference/Reference.html)以及[此链接与代码源。](http://www.devsrealm.com/objective-c/direct-access-to-the-camera/)

**这很简单，谢谢你:)**

# perl - awk：从一组行中打印三行

> ID：14749838
> 
> 赞同：2
> 
> 时间：2013-02-07T11:17:42.417
> 
> 标签：perl, awk

我有一个包含多组行的文本文件，因此我只需要每组的前三行。

文件：

```
test1|pass
test1|pass
test1|pass
test1|pass
test1|pass
test2|fail
test2|fail
test2|fail
test2|fail
test3|pass
test3|pass
test3|pass
test3|pass 
```

预期输出：

```
test1|pass
test1|pass
test1|pass
test2|fail
test2|fail
test2|fail
test3|pass
test3|pass
test3|pass 
```

到目前为止我已经尝试过：

```
BEGIN {
        FS = "|"
}
        $1==x {
        if (NR % 5 <= 3) {
                print $0
        }
        next
}
{
        x=$1
        print $0
}

END {
        printf "\n"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T11:23:26.220

你可以像这样相当简洁地做到这一点：

```
awk -F'|' '++a[$1] <= 3' infile 
```

输出：

```
test1|pass
test1|pass
test1|pass
test2|fail
test2|fail
test2|fail
test3|pass
test3|pass
test3|pass 
```

*解释*

`a`是一个关联数组。我们使用每行的第一个元素 ( `$1`) 作为键`a`并递增其值。然后将该值与该值进行比较`3`，如果比较为真，则执行默认块 ( `{print $0}`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:24:06.187

```
BEGIN {
        FS = "|"
}
        $1==x && count <= 3 {
        print;
        count++;
        }
        next
}
{
        x=$1;
        print;
        count=1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:49:55.253

使用 awk 的其他方式

```
awk '{a[$1]+=1}END{ for (b in a) {for(i=1; i<=3; i++) print b} }'  temp.txt | sort 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:35:59.480

如果您的数据像您在问题中显示的那样按升序排列，那么您可以使用此 perl 代码。

```
#!/usr/perl/bin -w

use strict;
use Data::Dumper;

my $file_name = "file.txt";
my $new_file = "new_file.txt";
open(FH, "<".$file) or die "Could not open $file";
open (NFH, ">$new_file") or die "Could not open $new_file";

my @content = <FH>;

my $old_line = "";
my $count = 0;
foreach my $line (@content) {

    if( ($old_line ne $line) || ($count < 3) ) {
        print NFH $line;
    }

    print NFH "$first $second $third";
}

close NFH;
close FH; 
```

**或者**

如果您的数据不按顺序排列，那么您可以使用以下 Perl 代码：

```
#!/usr/perl/bin -w
use strict;
use Data::Dumper;

my $file_name = "file.txt";
my $new_file = "new_file.txt";
open(FH, "<".$file) or die "Could not open $file";
open (NFH, ">$new_file") or die "Could not open $new_file";

my @content = <FH>;

my %hash = map($_ => 1) @content;
my $count = 0;
foreach my $key (keys(%hash)) {
    while($count < 3) {
    print NFH $key;
    $count++;
    }
}

close NFH;
close FH; 
```

# iphone - 如何在 webview 中显示图像？

> ID：14749839
> 
> 赞同：0
> 
> 时间：2013-02-07T11:17:47.923
> 
> 标签：iphone, image, uiwebview, base64, xcode4.5

我正在尝试在 UIWebView 中显示图像。但我不知道为什么我的图像未在 UIWebVeiw 中显示。这是我的代码。

```
-(void)pInterest
{
UIImage *myImage;
myImage=imgView.image;
WebViewController *webViewController = [[WebViewController alloc] initWithNibName:@"WebViewController" bundle:nil];
webViewController.mypimage = myImage;
[[[[UIApplication sharedApplication] keyWindow] rootViewController] presentModalViewController:webViewController animated:YES];
} 
```

现在将图像传递给 WebViewController 我的 WebViewController 代码是，

```
- (void)viewDidLoad
{
NSData* data = UIImageJPEGRepresentation(mypimage, 1.0f);
[Base64 initialize];
NSString *strEncoded = [Base64 encode:data];
 NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
[htmlString appendFormat:@"<html> <body>"];
[htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
[htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
[htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
[htmlString appendFormat:@"</body> </html>"];
[mywebview setBackgroundColor:[UIColor clearColor]];
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[mywebview loadHTMLString:htmlString baseURL:baseURL];
[mywebview setOpaque:NO];
} 
```

当我尝试使用此代码时，它显示以下结果。

![在此处输入图像描述](../Images/7e5a1a3a6facb01cb5617bea8781f6e3.png)

任何帮助都会得到帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:46:59.327

试试这个...

```
 - (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  [imagePicker dismissModalViewControllerAnimated:YES];

   image= [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    savedImagePath = [[documentsDirectory stringByAppendingPathComponent:@"savedImage.png"] mutableCopy];
    NSLog(@"savedImagePath..%@",savedImagePath);

    // imageView is my image from camera
    imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:YES];

}

    - (NSString*) generatePinterestHTML {

     NSString *description = @"Post your description here";

    NSString *stringUrl = [NSString stringWithFormat:@"%@",savedImagePath];
    NSLog(@"stringUrl:%@", stringUrl);
//    
   NSURL *urlToUpload = [[NSURL alloc]initFileURLWithPath:stringUrl];

   sUrl = [NSString stringWithFormat:@"%@",urlToUpload];

 // sUrl = [NSString stringWithFormat:@"http://4.bp.blogspot.com/-w4oTZjlpgwo/T5_pi-KJPuI/AAAAAAAAAoM/rKm3E0XCbgY/s1600/red_rose_flower3.jpg"];
    NSLog(@"URL:%@", sUrl);
    NSString *protectedUrl = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,(__bridge CFStringRef)sUrl, NULL, (CFStringRef)@"!'\"();:@&=+$,/?%#[]% ",CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
    NSLog(@"Protected URL:%@", protectedUrl);
    NSString *imageUrl = [NSString stringWithFormat:@"\"%@\"", sUrl];
    NSString *buttonUrl = [NSString stringWithFormat:@"\"http://pinterest.com/pin/create/button/?url=www.flor.com&media=%@&description=%@\"", protectedUrl, description];

    NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
    [htmlString appendFormat:@"<html> <body>"];
    [htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
    [htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
    [htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
    [htmlString appendFormat:@"</body> </html>"];
    return htmlString;
}

- (void) postToPinterest {
    NSString *htmlString = [self generatePinterestHTML];
    NSLog(@"Generated HTML String:%@", htmlString);
    webViewPinterest.backgroundColor = [UIColor clearColor];
    webViewPinterest.opaque = NO;
    if ([webViewPinterest isHidden]) {
        [webViewPinterest setHidden:NO];
    }
    [webViewPinterest loadHTMLString:htmlString baseURL:nil];
    //[webViewPinterest loadHTMLString:@"<img src=images.png>" baseURL:nil];
} 
```

如果您想上传本地图片，请先将您的 imagePath 转换为 url，然后尝试此操作，但在我放置评论的地方编写转换 url 的代码，然后传递该 url......希望它对你有所帮助...... ...

# css - 如何为 Facebook 私人消息等对话设置样式

> ID：14749842
> 
> 赞同：1
> 
> 时间：2013-02-07T11:18:02.667
> 
> 标签：css

我正在网站上的用户之间建立私人对话。我喜欢 Facebook 私人消息 UI，并计划以类似方式实现它。

我很难实现这一点，因为它使用不同的 css 位置来正确对齐屏幕上的元素。这是我总结的问题。

![在此处输入图像描述](../Images/3ac6637017ae9d9bb0908d406d23a432.png)

1.  宽度应该是放置它的可用宽度的 100%。那主要是自动的。
2.  高度应该从当前点到页面末尾。如果我使用`position: fixed`我会以某种方式丢失点 (1) 的自动宽度并且需要手动设置它。
3.  这是最棘手的。如何将写入消息定位在底部，但如何让消息在其容器内具有自动高度，基于其容器高度并写入消息存在？

# php - 使用 PHP 在服务器上获得自己的空间

> ID：14749843
> 
> 赞同：-3
> 
> 时间：2013-02-07T11:18:06.737
> 
> 标签：php, apache, webserver

我在私人服务器 FTP 上有自己的空间。

这是：

**/home/poker/my_space**

我有我的网站：

**/home/poker/my_space/my_site**

我也有文件夹图片：

**/home/poker/my_space/图像**

如果我登录，那么我在太空中的服务器上：

**/家/扑克/**

这里我有两个目录：my_space 和 images

那么我怎样才能用 PHP 函数获得这个地方呢？

```
$my_place = ??? dir? $_SERVER ?? __FILE__ ??

echo $my_place; 
```

$my_place 应该返回**/home/poker/**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:21:01.823

这取决于您在网络服务器中设置为文档根目录的内容。例如找到documentroot`echo $_SERVER['DOCUMENT_ROOT'];`

使用它，例如 `include("$_SERVER['DOCUMENT_ROOT']/../something.php");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:24:08.963

您可以尝试使用它来获取您的主机帐户的根文件夹。

```
$my_place = $_SERVER['DOCUMENT_ROOT'];
echo $my_place; 
```

请看一下这个 - [http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)了解更多信息。

# arm - 如何访问 PWM 背光驱动？

> ID：14749844
> 
> 赞同：4
> 
> 时间：2013-02-07T11:18:11.073
> 
> 标签：arm, embedded-linux

我正在使用 iMX6Q SD 板。而且我必须访问背光驱动程序来控制背光对比度。如何从用户空间或内核空间访问？（背光PWM驱动路径为`drivers/video/backlight/pwm_bl.c`）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T19:30:26.477

sysfs 是 misc 驱动程序的接口。

# php - FILTER_VALIDATE_URL 不接受包含日语文本的 URL

> ID：14749847
> 
> 赞同：0
> 
> 时间：2013-02-07T11:18:18.780
> 
> 标签：php, codeigniter, url, url-validation

我`FILTER_VALIDATE_URL`用于检查用户给定的 URL 是否有效。不幸的是， `FILTER_VALIDATE_URL`当用户输入包含 URL 的日语文本时，该函数返回 false。但我想允许包含日文字符的 URL。怎么可能？有没有允许它的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:22:05.167

如果我没记错的话，`FILTER_VALIDATE_URL`它本身不能修改为使用日文字符，您将需要创建自己的实现。

该函数的来源可以在这里查看[http://lxr.php.net/xref/PHP_5_4/ext/filter/logical_filters.c#php_filter_validate_url](http://lxr.php.net/xref/PHP_5_4/ext/filter/logical_filters.c#php_filter_validate_url)。

注意认为它是 C 代码（因为它是 PHP 核心的一部分）而不是 PHP。

# windows - WIX：引用源文件但不将其安装到目标计算机

> ID：14749850
> 
> 赞同：2
> 
> 时间：2013-02-07T11:18:20.043
> 
> 标签：windows, installation, wix, scheduled-tasks

我正在使用 Wix 编译安装程序，并且正在尝试使其安装计划任务。我创建了一个 XML 文件，其中包含我的计划任务的详细信息（称为 BackupComplete.xml - 在计划任务中使用导出功能）。现在我想在 CustomAction 中引用它，以便在安装结束时添加计划任务。

现在我有一点：

```
<CustomAction Id="CreateScheduledTask" Return="check" Directory="Scripts" ExeCommand="[SystemFolder]schtasks.exe /Create /XML BackupComplete.xml" /> 
```

但是如何引用我的 BackupComplete.xml 文件？我不希望将 BackupComplete.xml 安装到目标计算机，它应该只包含在源 .cab 文件中，以便我的 CustomAction 可以读取它。

我可以像这样添加我的计划任务 XML 文件：

```
<File Id="taskxml" Source="src\BackupComplete.xml" /> 
```

在组件内部，但这会在目标计算机上安装 BackupComplete.xml，这是我想要避免的......

这是我的整个 WIX XML： http: [//pastebin.com/wFWd1zVc](http://pastebin.com/wFWd1zVc)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:00:48.133

在类似的情况下经常使用以下方法：

*   将您的临时文件添加到`Binary`表中。[`<Binary>`](http://wix.sourceforge.net/manual-wix3/wix_xsd_binary.htm)为此使用元素
*   在**延迟**的自定义操作中：
    *   提取文件
    *   执行必要的操作
    *   删除文件

# android - Android：设置应用程序，带有与 SDK 8 (Android 2.2) 兼容的 ActionBar、Tabs、Fragments、Swipe

> ID：14749853
> 
> 赞同：0
> 
> 时间：2013-02-07T11:18:44.217
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我正在计划一个 Android 应用程序，它应该利用更高版本的 SDK 带来的许多 UI 功能，包括。ActionBar、ActionBar.Tabs、Swipe 导航和 Fragments 的使用（包括替换、添加、FragmentTransaction 等）。该应用程序应支持 SDK 8 (2.2) 及更高版本。

我对如何设置感到“有点”不知所措：我能否将所有这些功能与官方的 Android 兼容性库一起使用？还是我必须使用 ActionBarSherlock？与官方比较相比，ABS 会给我带来优势/更容易实施吗？图书馆？

我可以将 Eclipse/ADT 导航模板与这两个库一起使用吗？我可以将它们一起使用还是必须使用其中之一？

很多问题，我知道:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:37:53.467

> 我可以通过官方的 Android 兼容性库使用所有这些功能吗？

不。

> 还是我必须使用 ActionBarSherlock？

是的。

> 与官方比较相比，ABS 会给我带来优势/更容易实施吗？图书馆？

它将为您提供向后兼容的操作栏。Android 支持库没有。

> 我可以将 Eclipse/ADT 导航模板与这两个库一起使用吗？

你想做什么，就可以做什么。您将需要替换这些模板生成的一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:32:53.453

我认为使用 ActionBarSherlock 是最好的。看看这个[链接](https://stackoverflow.com/questions/10104625/comparing-the-android-action-bar-compat-pager-and-tabs-sample-to-actionbarsherl)

# c# - 使用值类型传递时编译器未调用适当的泛型重载

> ID：14749854
> 
> 赞同：9
> 
> 时间：2013-02-07T11:18:45.120
> 
> 标签：c#, generics, type-inference, overloading, value-type

我有这样的公共职能：

```
public static T Get<T>(this Mango m, T defaultValue = default(T)) where T : class
{
    //do something; return something;
}

public static T? Get<T>(this Mango m, T? defaultValue = default(T?)) where T : struct
{
    //do something; return something;
} 
```

基本上我想单独处理引用类型和可为空的类型。它编译；直到我要求值类型。对于引用类型，它会编译。

```
mango.Get<string>(); // compiles..
mango.Get(""); // compiles..

mango.Get<int>(); // The type 'int' must be a reference type in order to use it as 
                  // parameter 'T' in the generic type or method Get<T>(Mango, T)
//also            // The call is ambiguous between the following methods or properties: 
                  // Get<int>(Mango, int) and Get<int>(Mango, int?) 
```

**这里有什么真正的歧义？什么时候，`T`它`int`不能适当地调用结构重载吗？**还：

```
mango.Get<int>(0);  // The type 'int' must be a reference type in order to use it as 
                    // parameter 'T' in the generic type or method Get<T>(Mango, T) 
```

**为什么编译器只检测引用类型重载？**我尝试了两个单独的重载：

```
public static T Get<T>(this Mango m) where T : class
{
    return default(T);
}

public static T? Get<T>(this Mango m) where T : struct
{
    return default(T);
}

public static T Get<T>(this Mango m, T def) where T : class
{
    return default(T);
}

public static T? Get<T>(this Mango m, T? def) where T : struct
{
    return default(T);
} 
```

问题仍然存在。**显然，前两种方法在这里不能编译，因为重载不仅仅基于约束。**

我尝试通过删除受`class`约束的重载并仅保留受约束的重载`struct`，如下所示：

```
public static T? Get<T>(this Mango m, T? defaultValue = default(T?)) where T : struct
{
    //do something; return something;
}

mango.Get<int>(); // voila compiles!
mango.Get<int>(0); // no problem at all..
// but now I can't have mango.Get<string>() for instance :( 
```

**我只剩下重命名这两个函数了吗？**我觉得有一个统一的名字是合适的，这样调用者就不必担心实现细节，而只需调用`Get`任何类型。

**更新：**如果我必须避免使用可选参数，Marc 的解决方案将不起作用。

```
mango.Get<int>(); // still wouldnt work!! 
```

**但还有更多的魔力:(:(**

```
public static bool IsIt<T>(this T? obj) where T : struct
{
    return who knows;
}

public static bool IsIt<T>(this T obj) where T : class
{
    return perhaps;
} 
```

无论如何，我期望相同的编译器错误（根据我）来惹恼我。但是这次不行。

```
Guid? g = null;
g.IsIt(); //just fine, and calls the struct constrained overload
"abcd".IsIt(); //just fine, and calls the class constrained overload 
```

**因此，如果像 Marc 所说的那样，如果重载解决方案在约束检查之前出现，那么这次我不应该得到同样的错误吗？但不是。为什么会这样？？**这到底是怎么回事？：X

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:23:12.460

在重载决议 IIRC**之后**进行约束检查；重载决议似乎更喜欢第一个版本。但是，您可以强制它使用另一个：

```
mango.Get<int>((int?)0); 
```

甚至：

```
mango.Get((int?)0); 
```

就个人而言，我可能只是更改名称以避免歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:31:30.460

有趣的是，编译器将检查在方法签名中使用的泛型类型中指定的约束，但不会检查签名本身中的约束。

因此，如果一个方法接受两个参数，一个是 type`T where T : struct`和 a `Nullable<T>[]`，编译器将不会考虑任何`T`不是结构的方法。在评估重载时不考虑方法的指定`struct`约束，但约束到结构`T`的事实是。`Nullable<T>``T`

我真的发现在重载评估中完全无法考虑约束是很奇怪的，因为可以为参数指定一个默认的空值`Nullable<T>[]`，并假装该参数不存在。但是，vb.net 编译器和 C# 编译器在它们认为模棱两可的内容和接受的内容方面似乎有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:36:18.073

让我试着回答自己。

正如马克所说，**约束检查是在重载决议之后完成的**，并且在

```
public static T Get<T>(this Mango m, T defaultValue = default(T)) where T : class
{
    //do something; return something;
} 
```

和

```
public static T? Get<T>(this Mango m, T? defaultValue = default(T?)) where T : struct
{
    //do something; return something;
} 
```

重载决议更喜欢`class`版本。但这只是当编译器在两个相似的重载之间进行选择时（**没有可选参数，在这种情况下两个重载都变得相同，忽略约束**）。现在，当应用约束时，调用失败，`Get<int>`因为`int`is not `class`。

当提供默认参数时，情况会发生一些变化。如果我打电话

```
mango.Get(0); 
```

编译器有足够的能力调用正确的重载，但现在哪个重载接受`int`或`T where T: struct`？没有一个。在给定的示例中，第二个参数应该是`T?`and not `T`。**编译器不会通过对每个参数类型应用所有可用的强制转换来自动解决重载问题。这不是一个错误，但那少了一个功能，仅此而已**。如果我这样做：

```
int? i = 0;
mango.Get(i); 
```

它起作用了，调用了正确的重载。这也是第二个示例中发生的情况。它之所以有效，是因为我提供了正确的参数。

当我打电话时：

```
Guid? g = null;
g.IsIt(); 
```

`obj`已知是`g`，因此`T`等于`Guid`。但如果我打电话

```
Guid g = Guid.NewGuid();
g.IsIt(); 
```

这不起作用，因为`g`is now`Guid`和 not`Guid?`并且编译器不会自动进行转换，而是必须明确告诉编译器。

**我对编译器不会自动进行强制转换这一事实感到满意，因为对于每种可能的类型来说计算量太大了，但 C# 中似乎存在的一个缺陷是约束检查不涉及重载这一事实解析度。**即使我提供了类似的类型，`mango.Get<int>()`或者`mango.Get<int>(0)`重载决议不会更喜欢`struct`版本并使用`default(int?)`for argument `defaultValue`。在我看来很奇怪。

# git - 在 git 中查找以后对文件的更改

> ID：14749865
> 
> 赞同：1
> 
> 时间：2013-02-07T11:19:21.797
> 
> 标签：git

`git checkout`我用after检查了存储库的特定修订`git clone`（git告诉我我有一个分离的头，如果这很重要的话）。现在，这个修订没有完全编译。看起来一些重构只是部分完成，我需要看看以后做了什么改变。

我试过了

```
git diff origin/master -- path/to/file 
```

但这将我的文件视为全新的。我得到一个差异：

```
diff --git a/drivers/usb/core/driver.c b/drivers/usb/core/driver.c
new file mode 100644
index 0000000..19e1244
--- /dev/null
+++ b/drivers/usb/core/driver.c
(complete contents of the file follows) 
```

这对我一点帮助都没有。我也尝试过`git log`没有成功的变体。

理想情况下，我希望在以后查看对文件所做的所有更改（与我在工作副本中的更改相比）。一旦我找到了有趣的，我想看看在特定修订中所做的所有更改。

注意：在我的情况下，仅签出以后的修订版或分支是行不通的。该项目为不同的设备使用不同的分支，并且我已经获得了我正在使用的设备的最新提交。在重构完成的地方有更新的提交，但它们没有我需要的所有设备特定的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:27:47.360

您缺少一个 <commit>：

```
$ git diff -h
usage: git diff [<options>] [<commit> [<commit>]] [--] [<path>...] 
```

因此，如果您提供当前提交（HEAD）和将来的提交，它将显示影响分离头和远程头之间指定文件的所有差异。IE：

```
git checkout HEAD~10
git diff HEAD origin/master -- path/to/file 
```

将我从我在 master 上的当前位置移回 10 个提交，创建一个分离的头，然后显示在当前提交和原始提交之间影响该文件的所有更改。当然`git diff HEAD~10 HEAD -- path/to/file`，从 HEAD == master 的通常情况下无论如何都会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:11:52.013

如“ [Git: How can I reconcile detached HEAD with `master/origin`?](https://stackoverflow.com/questions/5772192/git-how-can-i-reconcile-detached-head-with-master-origin) ”中，您可以先`temp`在分离的 HEAD 所在的位置创建一个分支，然后：

```
git diff origin/master temp -- /path/to/file 
```

# c# - 如何在多个帐户Outlook c#中按路径获取文件夹

> ID：14749868
> 
> 赞同：0
> 
> 时间：2013-02-07T11:19:27.267
> 
> 标签：c#, winforms, visual-studio-2010, outlook

我在 Outlook 中添加了 2 个帐户，两个单独的 pst 文件。您将通过下图获得清晰的想法：

![在此处输入图像描述](../Images/c025bf9af4afd3ff755cc2c361f6e953.png)

首先，我提示用户从 Outlook 中选择要阅读的文件夹，附上图片以便更好地理解：

![在此处输入图像描述](../Images/1b9b078b24a40de8ebf3f08763572d7c.png)

最后，我在列表中有文件夹路径，与图像中的相同。

现在我只想从这些特定路径读取电子邮件并向它们发送回复或删除它们，那么我该怎么做？我如何根据路径读取文件夹 n 这样我就可以获取与之关联的帐户，这样我也可以使用该帐户发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:10:20.877

使用以下代码遍历所有文件夹，然后将路径与列表中的路径匹配。

代码：

```
 OutLook.Application oApp = new OutLook.Application();
        OutLook.NameSpace oNS = (OutLook.NameSpace)oApp.GetNamespace("MAPI");
        oNS.Logon(Missing.Value, Missing.Value, false, true);

        foreach (OutLook.MAPIFolder folder in oNS.Folders)
        {
            string folderName = folder.Name;

            GetFolders(folder);

        }

   public void GetFolders(MAPIFolder folder)
    {
        if (folder.Folders.Count == 0)
        {
            string path = folder.FullFolderPath;

            if (foldersTocheck.Contains(path))
            { 
                //GET EMAILS.....
                foreach (OutLook.MailItem item in folder.Items)
                {
                    Console.WriteLine(item.SenderEmailAddress + " " + item.Subject + "\n" + item.Body);

                }
            }
        }
        else
        {
            foreach (MAPIFolder subFolder in folder.Folders)
            {
                GetFolders(subFolder);
            }
        }
    } 
```

# sql - T-SQL 获取两个日期之间的工作日数

> ID：14749877
> 
> 赞同：4
> 
> 时间：2013-02-07T11:20:04.330
> 
> 标签：sql, sql-server, tsql

我想计算两个给定日期之间的工作日数。例如，如果我想计算 2013-01-10 和 2013-01-15 之间的工作日，结果必须是 3 个工作日（我不考虑该间隔的最后一天，我减去星期六和星期日）。我有以下代码适用于大多数情况，除了我的示例中的那个。

```
 SELECT (DATEDIFF(day, '2013-01-10', '2013-01-15')) 
    - (CASE WHEN DATENAME(weekday, '2013-01-10') = 'Sunday' THEN 1 ELSE 0 END)
    - (CASE WHEN DATENAME(weekday, DATEADD(day, -1, '2013-01-15')) = 'Saturday' THEN 1 ELSE 0 END) 
```

我怎样才能做到这一点？我必须经历所有的日子并检查它们吗？或者有没有简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T12:23:33.647

请，请，请使用日历表。SQL Server 对国定假日、公司活动、自然灾害等一无所知。日历表相当容易构建，占用的空间非常小，如果引用足够多，它就会在内存中。

以下示例创建了一个包含 30 年日期（2000 -> 2029）的日历表，但磁盘上只需要 200 KB（如果使用页面压缩，则需要 136 KB）。这几乎可以保证小于在运行时处理某些 CTE 或其他集合所需的内存授予。

```
CREATE TABLE dbo.Calendar
(
  dt DATE PRIMARY KEY, -- use SMALLDATETIME if < SQL Server 2008
  IsWorkDay BIT
);

DECLARE @s DATE, @e DATE;
SELECT @s = '2000-01-01' , @e = '2029-12-31';

INSERT dbo.Calendar(dt, IsWorkDay)
  SELECT DATEADD(DAY, n-1, '2000-01-01'), 1 
  FROM
  (
    SELECT TOP (DATEDIFF(DAY, @s, @e)+1) ROW_NUMBER() 
      OVER (ORDER BY s1.[object_id])
      FROM sys.all_objects AS s1
      CROSS JOIN sys.all_objects AS s2
  ) AS x(n);

SET DATEFIRST 1;

-- weekends
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE DATEPART(WEEKDAY, dt) IN (6,7);

-- Christmas
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE MONTH(dt) = 12
  AND DAY(dt) = 25
  AND IsWorkDay = 1;

-- continue with other holidays, known company events, etc. 
```

现在，您要编写的查询非常简单：

```
SELECT COUNT(*) FROM dbo.Calendar
  WHERE dt >= '20130110'
    AND dt <  '20130115'
    AND IsWorkDay = 1; 
```

有关日历表的更多信息：

[http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)

有关没有循环的生成集的更多信息：

[http://www.sqlperformance.com/tag/date-ranges](http://www.sqlperformance.com/tag/date-ranges)

还要注意一些小事情，比如依赖`DATENAME`. 我见过几个应用程序中断，因为一些用户有不同的语言设置，如果你依赖`WEEKDAY`确保你`DATEFIRST`正确设置你的设置......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:26:23.960

对于这样的事情，我倾向于维护一个日历表，其中还包括银行假期等。

我为此使用的脚本如下（请注意，我没有写它@我忘记了我在哪里找到它）

```
SET DATEFIRST 1
SET NOCOUNT ON
GO

--Create ISO week Function (thanks BOL)
CREATE FUNCTION ISOweek ( @DATE DATETIME )
RETURNS INT
AS 
    BEGIN
        DECLARE @ISOweek INT
        SET @ISOweek = DATEPART(wk, @DATE) + 1 - DATEPART(wk, CAST(DATEPART(yy, @DATE) AS CHAR(4)) + '0104')
        --Special cases: Jan 1-3 may belong to the previous year
        IF ( @ISOweek = 0 ) 
            SET @ISOweek = dbo.ISOweek(CAST(DATEPART(yy, @DATE) - 1 AS CHAR(4)) + '12' + CAST(24 + DATEPART(DAY, @DATE) AS CHAR(2))) + 1
        --Special case: Dec 29-31 may belong to the next year
        IF ( ( DATEPART(mm, @DATE) = 12 )
             AND ( ( DATEPART(dd, @DATE) - DATEPART(dw, @DATE) ) >= 28 )
           ) 
            SET @ISOweek = 1
        RETURN(@ISOweek)
    END
GO
--END ISOweek

--CREATE Easter algorithm function 
--Thanks to Rockmoose (http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=45689)
CREATE FUNCTION fnDLA_GetEasterdate ( @year INT )
RETURNS CHAR(8)
AS 
    BEGIN
    -- Easter date algorithm of Delambre
        DECLARE @A INT ,
            @B INT ,
            @C INT ,
            @D INT ,
            @E INT ,
            @F INT ,
            @G INT ,
            @H INT ,
            @I INT ,
            @K INT ,
            @L INT ,
            @M INT ,
            @O INT ,
            @R INT              

        SET @A = @YEAR % 19
        SET @B = @YEAR / 100
        SET @C = @YEAR % 100
        SET @D = @B / 4
        SET @E = @B % 4
        SET @F = ( @B + 8 ) / 25
        SET @G = ( @B - @F + 1 ) / 3
        SET @H = ( 19 * @A + @B - @D - @G + 15 ) % 30
        SET @I = @C / 4
        SET @K = @C % 4
        SET @L = ( 32 + 2 * @E + 2 * @I - @H - @K ) % 7
        SET @M = ( @A + 11 * @H + 22 * @L ) / 451
        SET @O = 22 + @H + @L - 7 * @M

        IF @O > 31 
            BEGIN
                SET @R = @O - 31 + 400 + @YEAR * 10000
            END
        ELSE 
            BEGIN
                SET @R = @O + 300 + @YEAR * 10000
            END 

        RETURN @R
    END
GO
--END fnDLA_GetEasterdate

--Create the table
CREATE TABLE MyDateTable
    (
      FullDate DATETIME NOT NULL
                        CONSTRAINT PK_FullDate PRIMARY KEY CLUSTERED ,
      Period INT ,
      ISOWeek INT ,
      WorkingDay VARCHAR(1) CONSTRAINT DF_MyDateTable_WorkDay DEFAULT 'Y'
    )
GO
--End table create

--Populate table with required dates
DECLARE @DateFrom DATETIME ,
    @DateTo DATETIME ,
    @Period INT
SET @DateFrom = CONVERT(DATETIME, '20000101')
 --yyyymmdd (1st Jan 2000) amend as required
SET @DateTo = CONVERT(DATETIME, '20991231')
 --yyyymmdd (31st Dec 2099) amend as required
WHILE @DateFrom <= @DateTo 
    BEGIN
        SET @Period = CONVERT(INT, LEFT(CONVERT(VARCHAR(10), @DateFrom, 112), 6))
        INSERT  MyDateTable
                ( FullDate ,
                  Period ,
                  ISOWeek
                )
                SELECT  @DateFrom ,
                        @Period ,
                        dbo.ISOweek(@DateFrom)
        SET @DateFrom = DATEADD(dd, +1, @DateFrom)
    END
GO
--End population

/* Start of WorkingDays UPDATE */
UPDATE  MyDateTable
SET     WorkingDay = 'B' --B = Bank Holiday
--------------------------------EASTER---------------------------------------------
WHERE   FullDate = DATEADD(dd, -2, CONVERT(DATETIME, dbo.fnDLA_GetEasterdate(DATEPART(yy, FullDate)))) --Good Friday
        OR FullDate = DATEADD(dd, +1, CONVERT(DATETIME, dbo.fnDLA_GetEasterdate(DATEPART(yy, FullDate))))
 --Easter Monday
GO

UPDATE  MyDateTable
SET     WorkingDay = 'B'
--------------------------------NEW YEAR-------------------------------------------
WHERE   FullDate IN ( SELECT    MIN(FullDate)
                      FROM      MyDateTable
                      WHERE     DATEPART(mm, FullDate) = 1
                                AND DATEPART(dw, FullDate) NOT IN ( 6, 7 )
                      GROUP BY  DATEPART(yy, FullDate) )
---------------------MAY BANK HOLIDAYS(Always Monday)------------------------------
        OR FullDate IN ( SELECT MIN(FullDate)
                         FROM   MyDateTable
                         WHERE  DATEPART(mm, FullDate) = 5
                                AND DATEPART(dw, FullDate) = 1
                         GROUP BY DATEPART(yy, FullDate) )
        OR FullDate IN ( SELECT MAX(FullDate)
                         FROM   MyDateTable
                         WHERE  DATEPART(mm, FullDate) = 5
                                AND DATEPART(dw, FullDate) = 1
                         GROUP BY DATEPART(yy, FullDate) )
--------------------AUGUST BANK HOLIDAY(Always Monday)------------------------------
        OR FullDate IN ( SELECT MAX(FullDate)
                         FROM   MyDateTable
                         WHERE  DATEPART(mm, FullDate) = 8
                                AND DATEPART(dw, FullDate) = 1
                         GROUP BY DATEPART(yy, FullDate) )
--------------------XMAS(Move to next working day if on Sat/Sun)--------------------
        OR FullDate IN ( SELECT CASE WHEN DATEPART(dw, FullDate) IN ( 6, 7 ) THEN DATEADD(dd, +2, FullDate)
                                     ELSE FullDate
                                END
                         FROM   MyDateTable
                         WHERE  DATEPART(mm, FullDate) = 12
                                AND DATEPART(dd, FullDate) IN ( 25, 26 ) )
GO

---------------------------------------WEEKENDS--------------------------------------
UPDATE  MyDateTable
SET     WorkingDay = 'N'
WHERE   DATEPART(dw, FullDate) IN ( 6, 7 )
GO
/* End of WorkingDays UPDATE */

--SELECT * FROM MyDateTable ORDER BY 1
DROP FUNCTION fnDLA_GetEasterdate
DROP FUNCTION ISOweek
--DROP TABLE MyDateTable

SET NOCOUNT OFF 
```

创建表后，查找工作日数很容易：

```
SELECT  COUNT(FullDate) AS WorkingDays
FROM    dbo.tbl_WorkingDays
WHERE   WorkingDay = 'Y'
        AND FullDate >= CONVERT(DATETIME, '10/01/2013', 103)
        AND FullDate <  CONVERT(DATETIME, '15/01/2013', 103) 
```

请注意，此脚本包括英国银行假期，我不确定您在哪个地区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T16:38:19.590

这是一个计算工作日的简单函数，不包括周六和周日（当不需要计算假期时）：

```
CREATE FUNCTION dbo.udf_GetBusinessDays (

@START_DATE DATE,
@END_DATE DATE

)
RETURNS INT
WITH EXECUTE AS CALLER
AS

BEGIN

 DECLARE @NUMBER_OF_DAYS INT = 0;
 DECLARE @DAY_COUNTER INT = 0;
 DECLARE @BUSINESS_DAYS INT = 0;
 DECLARE @CURRENT_DATE DATE;
 DECLARE @DAYNAME NVARCHAR(9)

 SET @NUMBER_OF_DAYS = DATEDIFF(DAY, @START_DATE, @END_DATE);

 WHILE @DAY_COUNTER <= @NUMBER_OF_DAYS
 BEGIN

    SET @CURRENT_DATE = DATEADD(DAY, @DAY_COUNTER, @START_DATE)
    SET @DAYNAME = DATENAME(WEEKDAY, @CURRENT_DATE)
    SET @DAY_COUNTER += 1

    IF @DAYNAME = N'Saturday' OR @DAYNAME = N'Sunday'
    BEGIN
        CONTINUE
    END
    ELSE
    BEGIN
        SET @BUSINESS_DAYS += 1
    END
 END

 RETURN @BUSINESS_DAYS
END
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:39:07.577

这是我通常使用的方法（不使用日历表时）：

```
DECLARE @T TABLE (Date1 DATE, Date2 DATE);
INSERT @T VALUES ('20130110', '20130115'), ('20120101', '20130101'), ('20120611', '20120701');

SELECT  Date1, Date2, WorkingDays
FROM    @T t
        CROSS APPLY
        (   SELECT  [WorkingDays] = COUNT(*)
            FROM    Master..spt_values s
            WHERE   s.Number BETWEEN 1 AND DATEDIFF(DAY, t.date1, t.Date2)
            AND     s.[Type] = 'P'
            AND     DATENAME(WEEKDAY, DATEADD(DAY, s.number, t.Date1)) NOT IN ('Saturday', 'Sunday')
        ) wd 
```

如果像我一样，你有一张带假期的桌子，你也可以添加这个：

```
SELECT  Date1, Date2, WorkingDays
FROM    @T t
        CROSS APPLY
        (   SELECT  [WorkingDays] = COUNT(*)
            FROM    Master..spt_values s
            WHERE   s.Number BETWEEN 1 AND DATEDIFF(DAY, t.date1, t.Date2)
            AND     s.[Type] = 'P'
            AND     DATENAME(WEEKDAY, DATEADD(DAY, s.number, t.Date1)) NOT IN ('Saturday', 'Sunday')
            AND     NOT EXISTS
                    (   SELECT  1
                        FROM    HolidayTable ht
                        WHERE   ht.Date = DATEADD(DAY, s.number, t.Date1)
                    )
        ) wd 
```

仅当您的日期在 2047 天之内时，上述方法才有效，如果您可能要计算更大的日期范围，则可以使用以下方法：

```
SELECT  Date1, Date2, WorkingDays
FROM    @T t
        CROSS APPLY
        (   SELECT  [WorkingDays] = COUNT(*)
            FROM    (   SELECT  [Number] = ROW_NUMBER() OVER(ORDER BY s.number)
                        FROM    Master..spt_values s
                                CROSS JOIN Master..spt_values s2
                    ) s
            WHERE   s.Number BETWEEN 1 AND DATEDIFF(DAY, t.date1, t.Date2)
            AND     DATENAME(WEEKDAY, DATEADD(DAY, s.number, t.Date1)) NOT IN ('Saturday', 'Sunday')
        ) wd 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T12:33:25.953

我在 SQL SERVER 2008 (MS SQL) 中编写了我的代码。这对我来说可以。我希望它会帮助你。

```
 DECLARE  @COUNTS int,                       
     @STARTDATE  date,
     @ENDDATE date
      SET @STARTDATE ='01/21/2013' /*Start date in mm/dd/yyy */
      SET @ENDDATE ='01/26/2013' /*End date in mm/dd/yyy */
     SET @COUNTS=0
      WHILE (@STARTDATE<=@ENDDATE)

       BEGIN
    /*Check for holidays*/
   IF  ( DATENAME(weekday,@STARTDATE)<>'Saturday' and  DATENAME(weekday,@STARTDATE)<>'Sunday')                                

    BEGIN 

    SET @COUNTS=@COUNTS+1
    END
    SET @STARTDATE=DATEADD(day,1,@STARTDATE)
    END
    /* Display the no of working days */
    SELECT @COUNTS 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-07T11:47:19.703

通过结合@Aaron Bertrand 的答案和@HeavenCore 的复活节计算并添加我自己的一些代码，此代码创建了一个从 2000 年到 2049 年的日历，其中包括英国（英格兰）银行假期。根据 Aaron 的回答，用法和注意事项：

```
DECLARE @s DATE, @e DATE;
SELECT @s = '2000-01-01' , @e = '2049-12-31';

    -- Insert statements for procedure here
CREATE TABLE dbo.Calendar
(
  dt DATE PRIMARY KEY, -- use SMALLDATETIME if < SQL Server 2008
  IsWorkDay BIT
);

INSERT dbo.Calendar(dt, IsWorkDay)
  SELECT DATEADD(DAY, n-1, '2000-01-01'), 1 
  FROM
  (
    SELECT TOP (DATEDIFF(DAY, @s, @e)+1) ROW_NUMBER() 
      OVER (ORDER BY s1.[object_id])
      FROM sys.all_objects AS s1
      CROSS JOIN sys.all_objects AS s2
  ) AS x(n);

SET DATEFIRST 1;

-- weekends
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE DATEPART(WEEKDAY, dt) IN (6,7);

-- Christmas
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE IsWorkDay = 1 and MONTH(dt) = 12 and 
  (DAY(dt) in (25,26) or
  (DAY(dt) in (27, 28) and DATEPART(WEEKDAY, dt) IN (1,2)) );

-- New Year
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE IsWorkDay = 1 and MONTH(dt) = 1 AND 
  ( DAY(dt) = 1 or (DAY(dt) IN (2,3) AND DATEPART(WEEKDAY, dt)=1 ));

-- Easter
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE   dt = DATEADD(dd, -2, CONVERT(DATETIME, dbo.fnDLA_GetEasterdate(DATEPART(yy, dt)))) --Good Friday
        OR dt = DATEADD(dd, +1, CONVERT(DATETIME, dbo.fnDLA_GetEasterdate(DATEPART(yy, dt))))  --Easter Monday

-- May Day (first Monday in May)
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE MONTH(dt) = 5 AND DATEPART(WEEKDAY, dt)=1 and DAY(DT)<8;

-- Spring Bank Holiday (last Monday in May apart from 2022 when moved to include Platinum Jubilee bank holiday)
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE 
  (YEAR(dt)=2022 and MONTH(dt) = 6 AND DAY(dt) IN (2,3)) OR 
  (YEAR(dt)<>2022 and MONTH(dt) = 5 AND DATEPART(WEEKDAY, dt)=1 and DAY(DT)>24);

-- Summer Bank Holiday (last Monday in August)
UPDATE dbo.Calendar SET IsWorkDay = 0 
  WHERE MONTH(dt) = 8 AND DATEPART(WEEKDAY, dt)=1 and DAY(DT)>24; 
```

# wpf - 使用 binding-WPF 设置数据网格列号

> ID：14749879
> 
> 赞同：3
> 
> 时间：2013-02-07T11:20:10.483
> 
> 标签：wpf, list, datagrid

我有一个 DataGrid，他的列之一应该获取 Grid 中行的序列号，DataGrid 绑定到以下列表：

```
public IList<xx> ListXX= new List<xx>(); 
```

xx 类包含几个绑定到其余列的变量。

如何将列表中的列号绑定到 DataGrid 中的列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:07:02.587

我这样解决了这个问题：

我创建了一个转换器来索引列表：

```
public class IndexConverter : IMultiValueConverter
{
    public object Convert(
        object[] values, Type targetType,
        object parameter, System.Globalization.CultureInfo culture)
    {
        var xx= values[0] as xx;
        var listxx= values[1] as List<xx>;
        if (xx== null)
            return null;
        return (listxx.FindIndex(x => x == xx) + 1).ToString();
    }

    public object[] ConvertBack(
        object value, Type[] targetTypes,
        object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在 DataGrid 中，我使用 MultiBinding 绑定列：

```
 <DataGridTextColumn Header="#" IsReadOnly="True">
     <DataGridTextColumn.Binding>
           <MultiBinding Converter="{StaticResource indexConverter}">
                <Binding />
                 <Binding RelativeSource=
                     "{RelativeSource AncestorType={x:Type DataGrid}}"
                     Path="ItemsSource"></Binding>
            </MultiBinding>
     </DataGridTextColumn.Binding>
  </DataGridTextColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:58:06.137

如果您知道您的`ListXX`项目订单，则可以执行以下操作：

```
 <DataGrid>
            <DataGridTextColumn Header="#" IsReadOnly="True" Binding="{Binding LisXX[0]}"></DataGridTextColumn>
            <DataGridTextColumn Header="#" IsReadOnly="True" Binding="{Binding LisXX[5]}"></DataGridTextColumn>
            <DataGridTextColumn Header="#" IsReadOnly="True" Binding="{Binding LisXX[1]}"></DataGridTextColumn>
        </DataGrid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T07:00:13.640

由于您提供的信息有限。我假设您正在尝试将列表绑定到您的 WPF 网格。您可以使用它，如下所示。

```
this.dataGrid1.ItemsSource = list; 
```

另一件事是确保在您的 XAML AutoGenerateColumn 中设置为 true。

如果这不起作用。发布更多信息，例如您的 XML 的外观以及您如何尝试将其绑定到代码中。

# internet-explorer-9 - Mongoose Web 服务器和 IE9 浏览器

> ID：14749880
> 
> 赞同：0
> 
> 时间：2013-02-07T11:20:13.137
> 
> 标签：internet-explorer-9, mongoose-web-server

我正在使用 mongoose（3.1 版）网络服务器，我的客户端由一个 html 页面组成，该页面又包含 *.js 和 *.css 文件。我的网页在 Mozilla Firefox 和 Google chrome 中运行良好。但是在 IE9 上它无法打开。第一次它没有在 IE 中启动，而是在网页第二次启动时关闭浏览器并重新打开它（不清除缓存）。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T01:10:26.390

Mongoose 3.1 已经很老了。您的问题可能涉及该版本中的保持活动逻辑。升级到较新的版本，然后重试。您也可以在保持活动选项上尝试不同的设置。（有关该选项的详细信息，请参阅文档）。

# batch-file - 批处理命令脚本，带前导零的无效数字？

> ID：14749882
> 
> 赞同：0
> 
> 时间：2013-02-07T11:20:16.053
> 
> 标签：batch-file, batch-processing

我正在尝试通过批量使用循环来生成一个脚本以在多个视频卡输入上运行 ffmpeg。到目前为止，我有：

除了尝试执行以下操作外，这很好用：

`set /a cam=%%c`当`c="08"`或`c="09"`。我得到：

> 无效号码。数字常量可以是十进制 (17)、十六进制 (0x11) 或八进制 (021)。

是什么赋予了？这是代码：

```
@echo off
setlocal enabledelayedexpansion

for %%c in (01 02 03 04 05 06 07 08 09 10 11) do (
  set /a cam=%%c
  if !cam! leq 8 (
    echo foobar_sd%%c
  ) else (
    echo barfoo_hd%%c
  )
  pause
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:24:03.220

带有前导零的数字被解释为八进制（如 0x 表示十六进制），因此 08 和 09 是错误的八进制值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:38:08.577

parkydr 提供了有关您收到错误原因的正确诊断 - 前缀为的数字`0`被解释为八进制。

有一个简单的解决方案 - 将右侧更改为`08`并在比较的两侧添加一个非数字字符以强制进行字符串比较而不是数字比较。这些值作为字符串正确排序，因为它们都被零填充以具有相同的长度。我喜欢使用引号，但几乎任何字符都可以。

```
if "!cam!" leq "08" ... 
```

***编辑***

上面的解决方案并没有直接解决`SET /A`when `%%c`is`08`或`09`. 我上面的解决方案假定该`/A`选项已被删除。

该`cam`变量可以完全消除：

```
if "%%c" leq "08" ... 
```

更好的是，不需要额外的非数字字符，因为 IF`08`视为无效的八进制表示法并默认为字符串比较。

```
if %%c leq 08 ... 
```

有关更多信息，请参阅[CMD.EXE 如何解析数字的规则](http://www.dostips.com/forum/viewtopic.php?f=3&t=3758)。有一个部分专门介绍 IF 语句。

# wso2 - wso2 新代理类型

> ID：14749884
> 
> 赞同：0
> 
> 时间：2013-02-07T11:20:19.480
> 
> 标签：wso2, extend, complex-event-processing, broker, wso2cep

我通过扩展 BrokerType 和 BrokerTypeFactory 实现了一个新的代理。我想将此新代理部署到 WSO2 CEP。我创建了一个 broker.xml 并将其放在 repository/conf 目录中

```
<brokerTypes xmlns="wso2.org/carbon/broker">    
  <brokerType name="jmsQbroker"  class="org.wso2.carbon.broker.core.internal.broker.jms.generic.GenericJMSQueueBr‌​okerType" />   </brokerTypes> 
```

但是，当我浏览到 web 控制台中的代理列表页面时，这会导致 NullPointer 异常（在第 149 行的 BrokerManagerAdminServer 中），并且没有显示任何代理。你能帮我理解如何在不影响现有代理的情况下部署我的新代理吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:02:23.173

将外部代理部署到 CEP 的早期版本时存在一些问题，此问题已修复（从 CEP 2.1.0 开始）。

[您可以在http://suhothayan.blogspot.com/2013/02/writing-custom-broker-for-wso2-cep.html](http://suhothayan.blogspot.com/2013/02/writing-custom-broker-for-wso2-cep.html)找到编写定制代理的指南

您将能够从以下网址下载 CEP 2.1.0 RC：[https ://svn.wso2.org/repos/wso2/people/suho/packs/cep/wso2cep-2.1.0-RC1.zip](https://svn.wso2.org/repos/wso2/people/suho/packs/cep/wso2cep-2.1.0-RC1.zip)

# led - 打开android LED灯“enabletorch”X时间？

> ID：14749893
> 
> 赞同：0
> 
> 时间：2013-02-07T11:20:52.367
> 
> 标签：led, flashlight

我有下面的代码，每次单击按钮时我的手机 LED 都会闪烁，但我还需要 LED 在 3 秒后自动关闭。不知道怎么弄，请帮忙。

input type="button" onclick="ipwajax('enabletorch')" value="打开LED"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:26:25.823

假设`ipwajax('enabletorch')`启用 LED 并`ipwajax('disabletorch')`禁用它，你会想要类似的东西

```
<script language="JavaScript">

  function enableTorch(milliSeconds) {
    ipwajax('enabletorch');
    window.setTimeout("ipwajax('disabletorch');",milliSeconds);
  }

</script>

<input type="button" onclick="enableTorch(3000);" value="Turn on LED"> 
```

# python - Python多处理内存使用

> ID：14749897
> 
> 赞同：18
> 
> 时间：2013-02-07T11:21:03.600
> 
> 标签：python, linux, memory-management, multiprocessing

我写了一个程序，可以总结如下：

```
def loadHugeData():
    #load it
    return data

def processHugeData(data, res_queue):
    for item in data:
        #process it
        res_queue.put(result)
    res_queue.put("END")

def writeOutput(outFile, res_queue):
    with open(outFile, 'w') as f
        res=res_queue.get()
        while res!='END':
            f.write(res)
            res=res_queue.get()

res_queue = multiprocessing.Queue()

if __name__ == '__main__':
    data=loadHugeData()
    p = multiprocessing.Process(target=writeOutput, args=(outFile, res_queue))
    p.start()
    processHugeData(data, res_queue)
    p.join() 
```

真正的代码（尤其是`writeOutput()`）要复杂得多。`writeOutput()`仅使用它作为参数的这些值（意味着它不引用`data`）

基本上它将一个巨大的数据集加载到内存中并对其进行处理。输出的写入被委托给一个子进程（它实际上写入多个文件，这需要很多时间）。因此，每次处理一个数据项时，它都会通过 res_queue 发送到子进程，然后再根据需要将结果写入文件。

子进程不需要以`loadHugeData()`任何方式访问、读取或修改加载的数据。子进程只需要使用主进程发送给它的东西`res_queue`。这让我想到了我的问题和疑问。

在我看来，子进程获得了自己的庞大数据集的副本（使用 检查内存使用情况时`top`）。这是真的？如果是这样，那么我该如何避免 id （本质上使用双内存）？

我正在使用 Python 2.6，程序在 linux 上运行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-07T11:31:54.627

该`multiprocessing`模块有效地基于`fork`创建当前进程副本的系统调用。由于您在`fork`（或创建`multiprocessing.Process`）之前加载大量数据，因此子进程会继承数据的副本。

However, if the operating system you are running on implements COW (copy-on-write), there will only actually be one copy of the data in physical memory unless you modify the data in either the parent or child process (both parent and child will *share* the same physical memory pages, albeit in different virtual address spaces); and even then, additional memory will only be allocated for the changes (in `pagesize` increments).

You can avoid this situation by calling `multiprocessing.Process` before you load your huge data. Then the additional memory allocations will not be reflected in the child process when you load the data in the parent.

Edit: reflecting @Janne Karila's comment in the answer, as it is so relevant: "Note also that every Python object contains a reference count that is modified whenever the object is accessed. So, just reading a data structure can cause COW to copy."

# ios - 以给定图像的形状创建一个 UIButton

> ID：14749907
> 
> 赞同：4
> 
> 时间：2013-02-07T11:21:43.350
> 
> 标签：ios, ios5, uibutton, uiimage

我怎样才能创建一个给定图像形状的 UIButton。

我可以创建接近它的东西，但图像似乎不适合按钮。我的要求是下面给出的图像。即；半圆

我用来创建按钮的代码如下所示。

我应该对以下图像进行哪些更改才能获得此按钮。ps-add subview 在另一个类中完成..

```
btnStartGame  =[UIButton buttonWithType:UIButtonTypeCustom];
[btnStartGame setFrame:CGRectMake(60, 200, 200, 200)];

btnStartGame.titleLabel.font=[UIFont fontWithName:@"Helvetica-Bold" size:30];
[btnStartGame setImage:
[UIImage imageNamed:@"Draw button.png"]  forState:UIControlStateNormal];

btnStartGame.titleLabel.textColor=[UIColor redColor];
btnStartGame.clipsToBounds = YES;
btnStartGame.layer.cornerRadius = 50;//half of the width
btnStartGame.layer.borderColor=[UIColor redColor].CGColor;
btnStartGame.layer.borderWidth=2.0f;

btnStartGame.tag=20;
btnStartGame.highlighted=NO; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:43:00.220

这里有一个非常棒的教程，带有可下载的源代码：

[http://iphonedevelopment.blogspot.co.uk/2010/03/irregularly-shape-uibuttons.html](http://iphonedevelopment.blogspot.co.uk/2010/03/irregularly-shaped-uibuttons.html)

本质上你需要在 UIImage 上创建一个类别，它检查你触摸的点是否是透明图像。这意味着您可以使用它来检查不规则形状的命中测试。

然后你继承 UIButton 并覆盖 hitTest:withEvent:

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-04T10:56:31.127

尽管由另一个答案链接的 Jeff Lamarche 的解决方案工作正常，但它使用了大量内存，和/或做了很多工作：

*   如果您`NSData`在初始化程序中创建一次，您最终会在每个按钮的生命周期内持有相对较大的内存块
*   如果你让它瞬态，就像它在答案中所做的那样，那么你最终会在每次点击测试按钮时转换整个图像 - 处理数千个像素并在获取单个字节后丢弃结果！

[事实证明，通过遵循此答案](https://stackoverflow.com/a/3763313/335858)中概述的方法，您可以在内存使用和 CPU 消耗方面更有效地执行此操作。

子类`UIButton`，并像这样覆盖它的`pointInside:withEvent:`方法：

```
-(BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    if (![super pointInside:point withEvent:event]) {
        return NO;
    }
    unsigned char pixel[1] = { 0 };
    CGContextRef context = CGBitmapContextCreate(pixel, 1, 1, 8, 1, NULL, (CGBitmapInfo)kCGImageAlphaOnly);
    UIGraphicsPushContext(context);
    UIImage *image = [self backgroundImageForState:UIControlStateNormal] ;
    [image drawAtPoint:CGPointMake(-point.x, -point.y)];
    UIGraphicsPopContext();
    CGContextRelease(context);
    return pixel[0] != 0;
} 
```

上面的代码从按钮的背景图像中获取 alpha。如果您的按钮使用另一个图像，请更改`image`上面初始化变量的行。

# java - 如何从不同的数据源/格式创建对象

> ID：14749909
> 
> 赞同：0
> 
> 时间：2013-02-07T11:21:48.873
> 
> 标签：java, design-patterns, gson, ormlite

我正在处理需要从不同数据源/格式创建对象的项目。我想知道组织源代码以使其变得容易的最佳方法是什么。

假设我有 User 类，我希望能够从数据库和 JSON 中的数据创建对象。它的目的是让我的应用程序的用户在线和离线浏览数据。我正在使用 GSON 和 ORMLite。此外，JSON 和数据库中的字段可能不同，但“主要”字段是相同的。创建包含来自 JSON 和数据库的所有属性/字段的类是个好主意吗？类似于下面的类：

```
@DatabaseTable(tableName = "user", daoClass = UserDaoImpl.class)
public class User {

    public static final String ID_FIELD_NAME = "id";
    public static final String USER_LOGIN_FIELD_NAME = "login";
    public static final String USER_EMAIL_FIELD_NAME = "email";
    public static final String SERIALIZED_COUNTRY_FIELD_NAME = "user_county";

    // DB & JSON
    @DatabaseField(generatedId = true, columnName = ID_FIELD_NAME)
    int id;

    // DB & JSON
    @DatabaseField(columnName = USER_LOGIN_FIELD_NAME)
    String login;

    //DB & JSON
    @DatabaseField(columnName = USER_EMAIL_FIELD_NAME)
    String email;

    //Only JSON
    @SerializedName(SERIALIZED_COUNTRY_FIELD_NAME)
    String country;

    public Track() {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:50:46.673

考虑[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，您可以使用它将具体用户类的创建抽象为数据源的功能。

使 User 成为一个接口，并为每种类型的数据源提供一个特定于数据源的 User 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:39:12.243

> 创建包含来自 JSON 和数据库的所有属性/字段的类是个好主意吗？

我认为简短的回答是肯定的。您一定可以使用相同的对象来表示数据库中的数据并通过 JSON。

当您需要更改数据库中的数据表示但又不想更改 JSON API 时，您会遇到问题，反之亦然。然后，您将需要 2 个单独的类和它们之间的映射函数。

但是，如果您可以上一堂课，那是最好的方法。

# c# - 如何访问特定行的中继器中的标签控件

> ID：14749915
> 
> 赞同：0
> 
> 时间：2013-02-07T11:22:03.673
> 
> 标签：c#

我必须在转发器中设置标签可见性真或假。我必须在链接按钮的 onclick 事件上访问该标签。标签和链接按钮都在转发器中。因此，当我单击隐藏链接按钮时，我必须隐藏标签，而当单击显示时，我必须显示。但是我没有获得该特定标签的控制权。仅特定行的链接按钮的 onclick 事件应更改。

```
 protected void lnkshow_onclick(object sender, EventArgs e)
    {
        LinkButton lnkshow = (LinkButton)sender;
        //RepeaterItemCollection rc = rList.Items;
        int intSOid=Convert.ToInt32(lnkshow.CommandArgument);

    // update flag into database as hide or show
    string flag = ARIData.updateIntoInvoiceItemsTable(intSOid);
    if (flag == "Y")
    {
        lnkshow.Text = "Show";
    }
    else
    {
        lnkshow.Text = "Hide";
    }
    RepeaterItemCollection rc = rList.Items;

    Label lbreakdown = default(Label);
    foreach (RepeaterItem Item in rc)
    {
        lbreakdown = (Label)Item.FindControl("lBreakdown");
        if (flag == "Y")
        {
            lbreakdown.Visible = false;
        }
        else
        {
            lbreakdown.Visible = true;
        }

    }

} 
```

此代码更改整行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:29:53.990

您可以将`NamingContainer`的`LinkButton`转换为`RepeaterItem`，然后您就拥有`FindControl`了标签所需的一切：

```
LinkButton lnkshow = (LinkButton)sender;
int intSOid = Convert.ToInt32(lnkshow.CommandArgument);
string flag = ARIData.updateIntoInvoiceItemsTable(intSOid);

RepeaterItem item = (RepeaterItem) lnkshow;
Label lbreakdown = (Label) item.FindControl("lbreakdown");
lbreakdown.Visible = flag != "Y" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:32:01.670

您最好使用中继器的 Item Command 事件。然后您可以使用以下代码从中继器项中获取控件：

```
int intSOid=Convert.ToInt32(lnkshow.CommandArgument);
// update flag into database as hide or show
string flag = ARIData.updateIntoInvoiceItemsTable(intSOid);

RepeaterItem item = (RepeaterItem)((Control)e.CommandSource).NamingContainer;
LinkButton lnkshow = (LinkButton)item.FindControl("lnkshow");
Label lbreakdown = (Label)item.FindControl("lBreakdown");

lnkshow.Text =  flag == "Y" ? "Show" : "Hide";
lbreakdown.Visible = flag != "Y"; 
```

# macos - cakephp 在 mac 中使用命令行烘焙

> ID：14749917
> 
> 赞同：0
> 
> 时间：2013-02-07T11:22:11.973
> 
> 标签：macos, cakephp, command-line, mamp

我已经在 mac 中为 cakephp 设置了路径变量以使用命令行烘焙。一切正常，除了模型是在默认位置而不是刚刚创建的特定项目中创建的。那就是当我编写`cake bake`和选择`M[model]`时，模型被创建但在默认文件夹中，即

```
/Applications/MAMP/htdocs/cakephp/app/Model/ 
```

代替

```
/Applications/MAMP/htdocs/testApp/Model/ 
```

我还尝试通过更改目录路径（即基本 cd 命令）我在哪里出错了？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:15:42.540

如果您为项目使用不同的 cakephp 核心，则必须在使用 cakephp 控制台时设置工作应用程序路径。这可以通过 -app 参数来完成。

例子：

```
cake -app /Applications/MAMP/htdocs/testApp/app bake 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:18:02.110

在基于 unix 的环境中，我更喜欢使用相对于项目根目录的别名，而不是将其映射到全局的特定蛋糕库。

将其转储到您各自的 shell 配置“.profile/.bashrc/.zshrc”中

```
# Alias functions
alias cake='app/Console/cake'
alias cakelogs='tail -f app/tmp/logs/*' 
```

当你在你的项目根目录

```
cake {cmd} 
```

应该按预期工作。

# c - C float 操作在 i386 和 arm 上的结果不同，但为什么呢？

> ID：14749929
> 
> 赞同：4
> 
> 时间：2013-02-07T11:23:08.073
> 
> 标签：c, floating-point, arm

我在 C 中实现了一个使用浮点数的算法。当我在 i386 上编译和运行时，我得到的结果与我在 armel 上编译和运行时得到的结果不同。特别是 int-by-float 的除法，会产生不同的浮点数。

我从我的算法中提取了一些代码来演示这个问题：

```
#include <stdio.h>
void main(void)
{
    float x = 4.80000019;
    float y = 4.80000019;
    int a = 38000;
    int b = 10000;
    int result = (a/x)+(b/y);
    printf("%.8f, %.8f\n", x, y); // same on i386 and armel
    printf("%f, %f\n", a/x, b/y); // slightly different on each
    printf("%d\n", result);       // prints 9999 on i386, and 10000 on armel
} 
```

谁能解释为什么这两个平台会产生不同的结果？

亚历克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T15:08:02.877

查找“超精度”。要在现代 x86 上抑制它，请使用`-msse2 -mfpmath=sse`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T11:35:05.313

现在无法针对 arm 测试它，但即使在 i386 和 amd64 上它也有不同的结果——在同一个 CPU 上，但使用 -m32 标志编译。这是因为内部 FPU 结构 - i387 使用 80 位浮点寄存器来执行操作，然后将结果收缩回 32 位浮点数（如果需要）。在 amd64 指令集中，使用了 SSE，它没有那么精确的寄存器（但仍然是_at_least_ 32 位）。我想 ARM 也至少有 32 位，但不能保证高于此的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T11:45:26.687

C 标准没有规定应该实现多少东西，并允许实现特定的行为。浮点运算就是这样一个领域，其中不同的实现和不同的结果是完全可以的。您要么忍受它，要么构建解决方法。

# java - Android NullPointerException 与静态对象

> ID：14749932
> 
> 赞同：-2
> 
> 时间：2013-02-07T11:23:10.977
> 
> 标签：java, android, static, nullpointerexception

为了在我的应用程序中存储运行时数据，我有一个包含两个静态变量的类：

```
public class App {
  public static ClementineConnection mClementineConnection = null;
  public static Clementine mClementine = null;
} 
```

这些在`onCreate`第一个活动的方法中初始化。这个活动除了根据状态（应用程序连接到服务器）启动其他活动之外什么都不做。

如果应用程序处于空闲状态或在后台运行并带有通知，则在访问其中一个静态变量时，有时会在其他 onCreate 方法中发生 NullPointerException。他们以某种方式收集垃圾。该应用程序有一个在后台运行的带有线程的服务，所以我认为必须一直有一个引用。

你知道我怎样才能防止那些静态变量被垃圾收集吗？当应用程序连接到服务器时，信息必须可用。创建新实例（例如`Clementine.getInstance()`）不是一种选择。

如果您想查看代码：[https ://code.google.com/p/clementine-remote-android/source/browse/](https://code.google.com/p/clementine-remote-android/source/browse/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:30:28.743

我认为您需要做的是使用[Android Application Class](http://developer.android.com/reference/android/app/Application.html)。

在那里，您可以将数据共享和保存到您的所有活动，并在那里初始化变量。你可以让你的 App Class 扩展它。

```
public class App extends Application {
    public static ClementineConnection mClementineConnection = null;
    public static Clementine mClementine = null; 
```

在每个活动中：

```
App app = ((App)this.getApplication()); 
```

此外，您必须在清单中声明它；

```
<application android:name="de.qspool.clementineremote.App" ...></application> 
```

查看有关该主题的答案：

*   [使用 Android Application 类来持久化数据](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data)

*   [对全局变量使用 Application 类](https://stackoverflow.com/questions/1984648/use-application-class-for-global-variables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:21:34.323

使用**静态**变量存储应用程序的某些生命周期状态是**不可靠的**。即使您使用服务，应用程序也可以在内存压力的情况下随时终止。在最新的 Android 版本上，当用户在打开的应用程序列表中滑动应用程序时，它甚至会被杀死。

当一个应用程序被杀死时，Linux 进程被杀死，这意味着所有的活动、服务都被杀死。当然，这意味着静态变量会丢失。

我与这类事情进行了很多斗争，并发现让应用程序状态始终保持活动状态的一种可靠的好方法是使用[**SharedPreferences**](http://developer.android.com/reference/android/content/SharedPreferences.html)而不是静态变量来存储应用程序的状态变量。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-07T12:18:34.677

您应该通过始终扩展应用程序类将静态数据保存在应用程序中：

```
public class App extends Application {
    public static ClementineConnection mClementineConnection;
    public static Clementine mClementine;
} 
```

它会在您的应用程序启动时自动实例化，因此只需将其变量保存在您的第一个活动的 oncreate 中，如下所示 -

```
App.mClementineConnection = data; 
```

和`It wont make any null pointer exception till your application is closed`。

谢谢，喜欢我的朋友。

# c++ - 代理服务器丢包

> ID：14749933
> 
> 赞同：1
> 
> 时间：2013-02-07T11:23:12.227
> 
> 标签：c++, sockets, proxy, network-programming

所以我一直在写一个代理服务器（按照Beej的网络编程指南），现在我偶然发现了一个问题似乎我无法解决..让我发疯..

问题是当它将数据包转发到 webclient 时，由于“对等方重置连接”，它会丢弃一些数据包。

这是完整的代码。

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <sys/wait.h>
#include <signal.h>
#include <string>
#include <unistd.h>

using namespace std;

string replace_string(string str, const string from, const string to) {
    size_t start_pos = str.find(from);
    if(start_pos == string::npos)
        return str;
    str.replace(start_pos, from.length(), to);
    return str;
}

void sigchld_handler(int s)
{
    while(waitpid(-1, NULL, WNOHANG) > 0);
}
class Server
{
private:
    string PORT;
    int MAXDATASIZE;
public:
    Server()
    {
        PORT = "3490";
        MAXDATASIZE = 4096;

    }

    // get sockaddr, IPv4 or IPv6:
    void *get_in_addr(struct sockaddr *sa)
    {
        if (sa->sa_family == AF_INET) {
            return &(((struct sockaddr_in*)sa)->sin_addr);
        }

        return &(((struct sockaddr_in6*)sa)->sin6_addr);
    }

    int start_server()
    {

        // first, load up address structs with getaddrinfo():
        int socketfd, new_socketfd;
        struct addrinfo hints, *servinfo, *p;
        struct sockaddr_storage their_addr;
        socklen_t their_addr_size, addr_size;
        struct sigaction sa;

        char s[INET6_ADDRSTRLEN];

        int rv;
        int yes = 1;
        int BACKLOG = 10;
        int numbytes;
        unsigned char buf[MAXDATASIZE];

        memset(&hints, 0, sizeof hints); // Make sure it is cleared
        hints.ai_family = AF_UNSPEC;     // use IPv4 or IPv6, whichever
        hints.ai_socktype = SOCK_STREAM; // TCP socket
        hints.ai_flags = AI_PASSIVE;     // fill in my IP for me

        if ((rv = getaddrinfo(NULL, PORT.c_str(), &hints, &servinfo)) != 0) {
            cerr << "getaddrinfo: " << gai_strerror(rv) << endl;
            return -1;
        }

        // make a socket, bind it asap
        for(p = servinfo; p != NULL; p = p->ai_next)
        {
            if ((socketfd = socket(p->ai_family, p->ai_socktype,
                                   p->ai_protocol)) == -1) {
                //perror("server: socket");
                cerr << "ERROR: Server: socket" << endl;
                continue;
            }

            if (setsockopt(socketfd, SOL_SOCKET, SO_REUSEADDR, &yes,
                           sizeof(int)) == -1) {
                //perror("setsockopt");
                cerr << "ERROR: setsockopt" << endl;
                exit(1);
            }

            if (bind(socketfd, p->ai_addr, p->ai_addrlen) == -1) {
                close(socketfd);
                //perror("server: bind");
                cerr << "ERROR: server: bind" << endl;
                continue;
            }
            break;  
        }
        //If the binding failed
        if ( p == NULL)
        {
            cerr << "Server: failed to bind" << endl;
            return -1;
        }

        //Free space, we do not need it anymore.
        freeaddrinfo(servinfo);

        //Listen to the socket (port)
        if ( listen(socketfd, BACKLOG) == -1)
        {
            cerr << "ERROR: listen" << endl;
        }

        // killing zombie processs (all dead processes)
        sa.sa_handler = sigchld_handler; 
        sigemptyset(&sa.sa_mask);
        sa.sa_flags = SA_RESTART;
        if (sigaction(SIGCHLD, &sa, NULL) == -1) {
            perror("sigaction");
            exit(1);
        }

        cout << "Server: waiting for connections ...\n"<<endl;

        //Main loop 
        for(;;)
        {  
            their_addr_size = sizeof their_addr;          
            //Create a new socket when we got a connection
            if ((new_socketfd = accept(socketfd, (struct sockaddr *)&their_addr, &their_addr_size))== -1) {
                continue;
            }

            //Converts IP address to 127.0.0.1 (or IPv6 format..) format instead of binary 
            inet_ntop(their_addr.ss_family,get_in_addr((struct sockaddr *)&their_addr), s, sizeof s);

            if ((numbytes = recv(new_socketfd, buf, MAXDATASIZE-1, 0)) == -1) {
                cerr << "ERROR: Failed to receive from user-agent" << endl;
                exit(1);
            }
            else
            {
                /*Parse the header and change some things.*/

                string buffer_str(reinterpret_cast<char*>(buf), MAXDATASIZE);   // Convert to unsigned char array to make it easier to handle                              
                buffer_str = replace_string(buffer_str, "Proxy-Connection: keep-alive","Connection: close"); // Make it connection Close instead of Keep-Alive
                buffer_str = replace_string(buffer_str, "Connection: keep-alive","Connection: close"); // Make it connection Close instead of Keep-Alive
                // removes host from GET, and saves it
                int first = buffer_str.find_first_of("/");                      
                int last =  buffer_str.find_first_of("/", first+2);
                int size_of_buf=buffer_str.size();
                unsigned char host_request[MAXDATASIZE];
                for (int a=0;a<=size_of_buf;a++)
                    host_request[a]=buffer_str[a];
                host_request[size_of_buf]='\0';
                string host_name = "";
                for(int i=first+2;i<last;++i) 
                    host_name += buffer_str[i];
                buffer_str.erase(4, buffer_str.find_first_of("/", first+2)-4);

                /*Set up the socket for the proxy-host */

                int host_sockfd, host_numbytes;  
                unsigned char host_buf[MAXDATASIZE];
                struct addrinfo host_hints, *host_servinfo, *host_p;
                int host_rv;
                char host_s[INET6_ADDRSTRLEN];

                memset(&host_hints, 0, sizeof(host_hints));
                host_hints.ai_family = AF_UNSPEC;
                host_hints.ai_socktype = SOCK_STREAM;

                if ((rv = getaddrinfo(host_name.c_str(), "80", &host_hints, &host_servinfo)) != 0) {
                    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
                    return 1;
                }

                // loop through all the results and connect to the first we can
                for(host_p = host_servinfo; host_p != NULL; host_p = host_p->ai_next) {
                    if ((host_sockfd = socket(host_p->ai_family, host_p->ai_socktype,
                                              host_p->ai_protocol)) == -1) {
                        perror("client: socket");
                        continue;
                    }

                    if (connect(host_sockfd, host_p->ai_addr, host_p->ai_addrlen) == -1) {
                        close(host_sockfd);
                        perror("client: connect");
                        continue;
                    }

                    break;
                }

                if (host_p == NULL) {
                    fprintf(stderr, "client: failed to connect\n");
                    return 2;
                }

                inet_ntop(host_p->ai_family, get_in_addr((struct sockaddr *)host_p->ai_addr),s, sizeof s); //Converts the IP address from binary to IPv4/6-format
                //printf("client: connecting to %s\n", s);

                freeaddrinfo(host_servinfo); // all done with this structure

                /*Send the GET request to the server*/
                send_message(host_sockfd, host_request, sizeof(host_request), "Webserver");
                if (!fork())
                {
                    memset(&host_buf, 0, MAXDATASIZE);
                    while (recv(host_sockfd, &host_buf, MAXDATASIZE, 0) > 0 ) {
                        close(socketfd);

                        send_message(new_socketfd, (unsigned char *)host_buf, MAXDATASIZE, "Browser");
                        memset(&host_buf, 0, MAXDATASIZE);
                    }

                }

                close(host_sockfd);
            }

            //cout << "server: got connection from " << s << endl;

            close(new_socketfd);  // parent doesn't need this

        }

        return 1;
    }
    int send_message(int &socket,unsigned char msg[], int length, string too)
    {
        usleep(10);
        if (send(socket, msg, length, 0) == -1)
        {
            cerr << "ERROR: sending to " << too << endl;
            cerr << "We will lose a packet due to" << endl;
            perror("send");
            cerr << "-------------------MEDDELANDE-------------------\n\n" << msg << endl << 
                "--------------------------------------------------\n\n";
            return -1;
        }
        return 1;
    }
};

int main()
{
    Server srv;
    srv.start_server();
} 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:28:20.107

代码看起来不太像我记得的 Beejs 指南。C++ 不是我的强项，但对我来说，您似乎没有跟踪从套接字写入或读取的数据量。难怪数据丢失。

你的 while 中有一个 close() （为什么？）和你的 send_message 等中有一个 sleep() 。每当你发现自己在做一个 sleep() 来让事情工作一点点，它通常是一个错误。

编辑：为了更具建设性，我建议您从 Beejs 指南中复制 sendall() 。跟踪 recv() 为您提供了多少数据并使用 sendall 发送。

为了可能提高速度，请跟踪接收和发送的数据量并缓冲一些，这样您就不会阻塞等待发送缓冲区可用。

EDIT2：还要向子进程添加一个出口。现在它运行到父代码中，当它完成接收和发送循环时。看起来你的意思是让它留在里面，`if(!fork())`但目前它没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:06:28.823

在一些人的帮助下，我已经解决了这个问题！

我必须更改的第一件事是在 recv() 中进行`sizeof`交换`strlen`。

其次，我没有存储recv接收到的数据的大小，所以当我将接收到的数据从网络服务器转发到网络浏览器时，我说数据包包含`MAXDATASIZE`. 解决此问题的方法是存储接收到的数据，然后将该大小作为参数提供给`send()`

最后我不得不将每个未签名的字符更改为字符。

感谢所有帮助我解决此问题的人！特别是图维拉！

# windows - 从浮出控件导航到另一个超级按钮设置链接

> ID：14749949
> 
> 赞同：0
> 
> 时间：2013-02-07T11:24:05.597
> 
> 标签：windows, winjs

我在魅力中创建了一个设置页面，现在在设置页面中我保留了一个超链接，单击该超链接我需要导航到魅力列表中的新弹出链接。就像我在 Charms 中有 2 个链接， - 设置和帮助。

从设置我必须从超链接导航到帮助，

我努力了 ：

WinJS.UI.SettingsFlyout.showSettings("helpDiv", "pages/help/help.html");

这不导航。

是否可以在 Charms - Settings 中从一个浮出控件导航到另一个浮出控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:44:22.410

嗨，您是否在 help.html 中有一个匹配的 commandid，标题在 settings.html 页面（假设您在此处有帮助链接）下面的代码应该在 settings.html

`WinJS.Application.onsettings = function (e) { e.detail.applicationcommands = { "helpDiv": { title: "Help", href: "pages/help/help.html" } }; WinJS.UI.SettingsFlyout.populateSettings(e); };`

下面的代码应该在 help.html

```
<div data-win-control="WinJS.UI.SettingsFlyout" aria-label="Help settings flyout" 
         data-win-options="{settingsCommandId:'Help',width:'wide'}">
........ 
```

# css - 转换成 是否有任何在线转换器可以将使用 标签编写的 html 代码转换为？ 问问题 问问题 2013-02-07T11:24:06.923 2924 次 This question shows research effort; it is useful and clear -3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 是否有任何在线转换器可以将使用

标签编写的 html 代码转换为？ 您可以尝试使用它来获取您的主机帐户的根文件夹。 $my_place = $_SERVER['DOCUMENT_ROOT']; echo $my_place; 请看一下这个 - http://php.net/manual/en/reserved.variables.server.php了解更多信息。 csshtml 4 3 回答 3 This answer is useful 2 可能是的。 你应该使用它吗？不。 如果您有使用元素的非表格数据table，则应针对特定情况div将其更改为/CSS 。 任何通用转换器很可能会产生比你坚持使用 table 元素更糟糕的代码。 感谢您希望转换您的非表格数据表元素，但如果您希望正确执行此操作，请学习如何自己编写 CSS 代码。 于 2013-02-07T11:26:58.713 回答 This answer is useful 0 可能不是... 我认为不可能只将 TABLEs 转换为 DIVs，它们是两个完全不同的东西......你需要样式至少让 divs 看起来有点像表格，即使那样它也可能永远不会是完全匹配没有手动造型... 于 2013-02-07T11:28:10.383 回答 This answer is useful -1 表格和 div 是两种不同的野兽。表格包含表格数据，DIV 是通用容器。所以答案是否定的。 请参阅 div和Table的文档 于 2013-02-07T11:26:13.437 回答 Related 2 java - Jersey 的路径匹配“沙盒”或空字符串 2 javascript - Javascript，onbeforeunload 事件在 IE 中提交表单时起作用 1 python - django - 表单 - 出现空白（灰色）页面 1 c# - 处理 webbrowser 控件的新窗口事件 2 java - 插入语句处的 java.sql.SQLSyntaxError 3 c# - 如何在 c# 注释中添加 xaml 代码？ 1 c# - 来自多个线程的 C# 数据表添加方法？ 1 media-queries - 断点和“字体大小”参数 2 javascript - 有没有办法在 wp_editor 函数中应用字符限制？ 2 jmeter - JMeter 中的 CSV 数据配置 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14749951
> 
> 赞同：-3
> 
> 时间：
> 
> 标签：css, html

是否有任何在线转换器可以将使用 <table> 标签编写的 html 代码转换为 <div> ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:26:58.713

可能是的。

你应该使用它吗？不。

如果您有使用元素的非表格数据`table`，则应针对**特定情况**`div`将其更改为/CSS 。

 **任何通用转换器很可能会产生比你坚持使用 table 元素更糟糕的代码。

感谢您希望转换您的非表格数据表元素，但如果您希望正确执行此操作，请学习如何自己编写 CSS 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:28:10.383

可能不是...

我认为不可能只将 TABLEs 转换为 DIVs，它们是两个完全不同的东西......你需要样式至少让 divs 看起来有点像表格，即使那样它也可能永远不会是完全匹配没有手动造型...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T11:26:13.437

表格和 div 是两种不同的野兽。表格包含表格数据，DIV 是通用容器。所以答案是否定的。

请参阅 [div](https://developer.mozilla.org/en-US/docs/HTML/Element/div)和[Table的文档](https://developer.mozilla.org/en-US/docs/HTML/Element/table)**

# ios - 为什么 GCDAsyncSocket 在读取超时后总是断开连接？

> ID：14749954
> 
> 赞同：5
> 
> 时间：2013-02-07T11:24:14.287
> 
> 标签：ios, objective-c, tcp, cocoaasyncsocket

我在处理读取超时的代码中查看了 GCDAsyncSocket.m。如果我不延长超时，似乎套接字已关闭，并且套接字活动保持没有选项。我不能使用无限超时（timeout = -1），因为我仍然需要知道它何时超时，但也不希望它断开连接。我不确定这背后有什么原因。有人知道吗？

```
- (void)doReadTimeoutWithExtension:(NSTimeInterval)timeoutExtension
{
    if (currentRead)
    {
        if (timeoutExtension > 0.0)
        {
            currentRead->timeout += timeoutExtension;

            // Reschedule the timer
            dispatch_time_t tt = dispatch_time(DISPATCH_TIME_NOW, (timeoutExtension * NSEC_PER_SEC));
            dispatch_source_set_timer(readTimer, tt, DISPATCH_TIME_FOREVER, 0);

            // Unpause reads, and continue
            flags &= ~kReadsPaused;
            [self doReadData];
        }
        else
        {
            LogVerbose(@"ReadTimeout");

            [self closeWithError:[self readTimeoutError]];
        }
    }
} 
```

[仅供参考，在https://github.com/robbiehanson/CocoaAsyncSocket/pull/126](https://github.com/robbiehanson/CocoaAsyncSocket/pull/126)有一个拉取请求，它添加了此保持活动功能，但尚未拉取。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T18:53:35.663

我是 AsyncSocket 的原作者，我可以告诉你我为什么这样做：协议处理超时的方法太多了。所以我实现了一个“硬”超时并将“软”超时留给应用程序作者。

进行“软”超时的常用方法是使用`NSTimer`or `dispatch_after`。设置其中之一，当计时器触发时，做你需要做的任何事情。`readData`同时，在实际调用中使用无限超时。请注意，无限超时实际上并不是无限的。在没有成功读取的情况下，操作系统仍然会在 10 分钟后超时。如果你真的想永远保持连接，你可以设置一个套接字选项。

# r - 在 reshape2 中使用 timevar 投射数据帧，与 reshape 基函数一样？

> ID：14749958
> 
> 赞同：5
> 
> 时间：2013-02-07T11:24:19.743
> 
> 标签：r, reshape2

假设我有以下数据框：

```
d <- data.frame(id=c(1,1,1,2,2,3,3,3), time=c(1,2,3,1,2,1,2,3), var=runif(8))

 d
  id time       var
1  1    1 0.3733586
2  1    2 0.5743769
3  1    3 0.8253280
4  2    1 0.8136957
5  2    2 0.8726963
6  3    1 0.1105549
7  3    2 0.9527002
8  3    3 0.5690021 
```

使用基本`reshape`函数，我可以通过指定 a `ìdvar`（标识属于同一单元的行）和 a `timevar`（标识同一单元的不同观察值）将其转换为“宽”格式：

```
reshape(d, idvar="id", timevar="time", direction="wide")

  id     var.1     var.2     var.3
1  1 0.3733586 0.5743769 0.8253280
4  2 0.8136957 0.8726963        NA
6  3 0.1105549 0.9527002 0.5690021 
```

我试过用 的`dcast`功能来做`reshape2`，但没有找到方法。你知道这是否可能吗？

**编辑：** Ananda Mahto 的评论和回答完全正确，真正的问题是在原始数据框有几`var`列时对其进行转换。我的例子不合适，对不起。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T11:26:26.330

以下不起作用吗？

```
dcast(d, id ~ time)
# Using var as value column: use value.var to override.
#   id         1          2         3
# 1  1 0.2869739 0.59591690 0.8989719
# 2  2 0.4533770 0.14741778        NA
# 3  3 0.1286770 0.02465634 0.7363114

## OR, to get rid of the message:
## dcast(d, id ~ time, value.var = "var") 
```

* * *

不过，我*怀疑*您在问一些不同的问题（如我的评论中所述）。特别是，如果您从以下内容开始：

```
set.seed(1)
d <- data.frame(id = c(1,1,1,2,2,3,3,3), 
                time = c(1,2,3,1,2,1,2,3), 
                var1 = runif(8),
                var2 = runif(8)) 
```

使用 base R's `reshape`，它只是一行：

```
reshape(d, direction = "wide", idvar = "id", timevar = "time")
#   id    var1.1    var2.1    var1.2     var2.2    var1.3    var2.3
# 1  1 0.2655087 0.6291140 0.3721239 0.06178627 0.5728534 0.2059746
# 4  2 0.9082078 0.1765568 0.2016819 0.68702285        NA        NA
# 6  3 0.8983897 0.3841037 0.9446753 0.76984142 0.6607978 0.4976992 
```

`dcast`让我们从“reshape2”中尝试相同的操作。以下是我们可能会采取的方法：

```
library(reshape2)
dcast(d, id ~ time)
# Using var2 as value column: use value.var to override.
#   id         1          2         3
# 1  1 0.6291140 0.06178627 0.2059746
# 2  2 0.1765568 0.68702285        NA
# 3  3 0.3841037 0.76984142 0.4976992 
```

但这不起作用，因为`dcast`需要一个`value.var`. 所以，我们需要`melt`再次获取数据。

```
d2 <- melt(d, id.vars = c("id", "time"))
head(d2)
#   id time variable     value
# 1  1    1     var1 0.2655087
# 2  1    2     var1 0.3721239
# 3  1    3     var1 0.5728534
# 4  2    1     var1 0.9082078
# 5  2    2     var1 0.2016819
# 6  3    1     var1 0.8983897 
```

现在，我们可以`dcast`很容易地使用了。

```
dcast(d2, id ~ variable + time)
#   id    var1_1    var1_2    var1_3    var2_1     var2_2    var2_3
# 1  1 0.2655087 0.3721239 0.5728534 0.6291140 0.06178627 0.2059746
# 2  2 0.9082078 0.2016819        NA 0.1765568 0.68702285        NA
# 3  3 0.8983897 0.9446753 0.6607978 0.3841037 0.76984142 0.4976992 
```

# java - 具有特定数字的浮点精度

> ID：14749960
> 
> 赞同：0
> 
> 时间：2013-02-07T11:24:27.703
> 
> 标签：java, floating-point, floating-accuracy

以下值给了我错误的精度。只有特定的数字才能观察到。这可能是一个浮动表示问题，但想知道具体原因。

```
String m = "154572.49"; //"154,572.49";
Float f = Float.parseFloat(m);
System.out.println(f); 
```

它正在打印的输出`154572.48`不是`154572.49`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:27:24.603

如果您希望十进制数字与您在 Java 中输入的完全相同，请使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)而不是 float。

浮点数对于小数来说本质上是不准确的，因为许多以十进制结尾的数字（例如 0.1）是二进制中的重复数字，并且浮点数以二进制表示形式存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:30:43.470

你必须阅读这个[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

> 将无限多个实数压缩为有限位数需要近似表示。尽管整数有无限多，但在大多数程序中，整数计算的结果可以存储在 32 位中。相反，给定任何固定位数，大多数实数计算将产生无法使用那么多位精确表示的量。因此，浮点计算的结果必须经常四舍五入以适应其有限表示。这种舍入误差是浮点计算的特征。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:30:59.193

Float 提供以 2 为基数的十进制数表示。当您解析时，它正在解析几乎永远不会准确的十进制数的二进制表示。你可能会从它的二进制表示中得到 .4856（好吧，我没有进行计算，它只是让你知道的猜测）。

# java - Java unicode 字节解析

> ID：14749966
> 
> 赞同：4
> 
> 时间：2013-02-07T11:25:00.727
> 
> 标签：java, string, unicode, encoding

我只是在从文件中读取一些数据作为字节流的过程中，我刚刚遇到了一些我不确定如何最好地处理的 unicode 字符串。

每个字符使用两个字节，只有第一个似乎包含实际数据，因此例如字符串 'trust' 在文件中存储为：

```
0x74 0x00(t) 0x72 0x00(r) ...and so on 
```

通常我只会使用正则表达式来替换零，因此删除空格。但是，文件中单词之间的空格是使用 实现的`0x00 0x00`，所以尝试做一个简单的 String 'replaceAll' 有点搞砸了。

我尝试过使用字符串编码集，例如“ISO-8859-1”和“UTF-8/16”，但每次我都得到空白。

我确实创建了一个简单的正则表达式来删除双零十六进制值，即：

```
new String(bytes).replaceAll("[\\00]{2,},""); 
```

但这显然只适用于双零，我真的很想用任何东西替换单零，并用实际的 ASCII/Unicode 空格字符替换双零。

我可以发誓其中一个 Java 字符串格式设置可以处理这种事情，但我可能错了。那么我应该努力创建一个正则表达式来去除零，还是Java实际上提供了这样做的机制？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T11:27:44.697

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T11:32:19.990

> I'm just in the process of reading some data from a file as a stream of bytes, and I've just encountered some unicode strings that I'm not sure how best to handle.

Convert them to strings using the appropriate charset, in this case UTF-16LE (little-endian UTF-16, with the low-order byte first followed by the high-order byte)

```
String str = new String(bytes, "UTF-16LE"); 
```

# mysql - vs 2012 express 中的 MySQL 连接器

> ID：14749967
> 
> 赞同：0
> 
> 时间：2013-02-07T11:25:02.990
> 
> 标签：mysql, visual-studio-2012, connector

有什么解决方法吗？Express 不支持扩展，我应该怎么做才能使用连接器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T02:18:57.153

```
Imports MySql.Data.MySqlClient
Public Class Form1
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        'Project| Add Reference|C:\Program Files (x86)\MySQL\Connector NET 6.6.5\Assemblies\v4.0\MySql.Data.dll

    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Me.Tag = "Server=MY-PC;Database=myDB;User Id=" & TextBoxUID.Text & ";Password=" & TextBoxPWD.Text & ";Connection Timeout=20"
        Try
            Dim connection As New MySqlConnection(Me.Tag.ToString)
            connection.Open()
            connection.Close()
            MsgBox("Connection is okay.")
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub
End Class 
```

# c - 使用复合文字来初始化 malloc 的缓冲区，

> ID：14749968
> 
> 赞同：0
> 
> 时间：2013-02-07T11:25:17.250
> 
> 标签：c, struct, initialization, malloc

有没有更简单的写法：

```
rver_t *buf = malloc(sizeof(rver_t));
rver_t tmp = (rver_t) {.op=OP_RVER, .protocol_version=1};
memcpy(buf, tmp, sizeof(rver_t)); 
```

用结构初始化 malloc 的缓冲区？

注意： typedef 发生在标题中：

```
#define OP_RVER 1
typedef struct rver_s {
    uint32_t op;
    uint32_t protocol_version;
} rver_t; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:29:26.393

您可以键入：

```
buf -> op = OP_EVER;
buf -> protocol_version = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T10:12:15.667

老问题，但这里是随便路人的答案。

功能重写

```
rver_t *buf = memcpy(malloc(sizeof(rver_t)), &(rver_t) {.op=OP_RVER, .protocol_version=1}, sizeof(rver_t)); 
```

或编写一个隐藏组合的宏

```
#define RVERALOC(a, b) memcpy(malloc(sizeof(rver_t)), &(rver_t){.op=(a), .protocol_version=(b)}, sizeof(rver_t));

rver_t *buf = RVERALOC(OP_RVER, 1); 
```

这个想法是要记住`memcpy()`返回其第一个参数的事实（如`memmove()`，`strcpy()`等等）。当然，必须意识到分配错误将导致未定义的行为，因为未检查`NULL`as 第一个参数。`memcpy()`在大多数具有内存保护的主机上，它会因分段错误而崩溃，这通常是可接受的行为。

# logging - Liferay 日志记录级别

> ID：14749976
> 
> 赞同：6
> 
> 时间：2013-02-07T11:26:17.943
> 
> 标签：logging, log4j, liferay, liferay-6

有没有办法设置 Liferay 的**全局**日志级别？我知道它是服务器管理中的控制台，但我想将全局级别设置为包级别。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:39:05.823

由于可以配置 log4j 的方式，任何全局设置都可以被包级别设置覆盖。

您可以删除任何配置单个包（如果有的话）。然后设置`rootLogger`将生效。

```
log4j.rootLogger=INFO, stdout 
```

**更新**

要覆盖 Liferay 的默认日志设置，您可以创建一个[portal-log4j-ext.xml](http://www.liferay.com/community/wiki/-/wiki/Main/Configuring+Logs#section-Configuring+Logs-Creating+a+custom+configuration+file%3a+portal-log4j-ext.xml)。只需为包定义一个记录器，就可以了`com.liferay`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:41:56.643

通过解压缩 $server/applications/liferay-portal/WEB-INF/lib 中的 portal-impl.jar 并用我的要求替换 META-INF/portal-log4j.xml 的内容来修复它。

# excel - 在同一活动工作表中复制/粘贴单元格时出现运行时错误 1004

> ID：14749981
> 
> 赞同：1
> 
> 时间：2013-02-07T11:26:28.637
> 
> 标签：excel, vba, runtime

编写下面的代码来检查两个单元格是否相同。第 20 列中的单元格是一个从另一个工作表返回评论的 vlookup。我想检查第 16 列中的单元格是否已经有这些评论，如果没有，我希望宏将值从 20 中的单元格粘贴到 16 中的单元格中。我基本上这样做是因为我想要评论在 16 中只是纯文本，但它需要动态（通过另一个宏）更新，因为注释与它们位于工作表上的数据透视表相关。

编辑：我正在使用 Excel 2007，以防万一。

在下面的代码中，当宏尝试复制第 20 列中的单元格时，就会出现问题。此代码具体为：

```
ActiveSheet.Range(Cells(rowstest, 20)).Copy 
```

这是完整的代码：

```
Sub MgrCmntsTest()
    Application.ScreenUpdating = False
    Dim rowstest As Integer
    rowstest = 1
    Dim comments As String
    Dim commentsForm As String
    With ActiveSheet.Range("a1:u500")
        Do
        comments = Cells(rowstest, 20).Value
        commentsForm = Cells(rowstest, 16).Value
        If comments = commentsForm Then
            rowstest = rowstest + 1
        Else
            ActiveSheet.Range(Cells(rowstest, 20)).Copy
            ActiveSheet.Range(Cells(rowstest, 16)).Select
            ActiveSheet.PasteSpecial Type:=xlPasteValues
            rowstest = rowstest + 1
        End If
        Loop While rowstest < 501
    End With
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:07:05.447

实际上你可以将代码减少到

```
Range("p1:P500").Value = Range("T1:T500").Value 
```

*（因为如果它们的值不同，则需要复制它们，如果它们相同，仍然可以复制这些值）*

# magento - Magento /catalog/product/view.phtml 缓存问题

> ID：14749982
> 
> 赞同：1
> 
> 时间：2013-02-07T11:26:32.577
> 
> 标签：magento, caching, php

我遇到了 Magento 网站的问题。我已经设置了一个新主题，并且正在尝试编辑产品页面/模板。我正在编辑这个文件；

```
/catalog/product/view.phtml 
```

我已经启用了模板提示，所以我知道我肯定在编辑正确的文件。但是，我所做的更改并没有传递到网站的前端，所以我假设这里存在某种缓存问题？

任何帮助都会很棒。提前致谢！

编辑：缓存被禁用，被刷新并从 var/cache 中删除文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:13:44.793

您是否启用了系统 > 工具 > 编译？今天早些时候我有一个类似的问题，通过重新运行编译过程得到了解决。还要确保您在“系统”>“设计”中正确设置了相关主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:53:44.477

您是否考虑过您正在编辑的部分可能位于条件语句中（即：if/else）？如果您举例说明您要添加的代码以及它在哪里可能有助于确定这是否有问题。

# javascript - 使用 JavaScript 将子节点添加到内联 SVG。在IE9上不可能？

> ID：14749983
> 
> 赞同：2
> 
> 时间：2013-02-07T11:26:36.987
> 
> 标签：javascript, dom, svg, internet-explorer-9

我只想使用 accion() javaScript 函数在 html 上的 SVG 中添加一个新的文本节点：

```
<!DOCTYPE> 
<html>
<body>
<head>
<script type="text/javascript"> 
    function accion(){
        var SVGDocument = document.getElementById("idSVG");
        var text2 = SVGDocument.createTextNode("text");
        SVGDocument.appendChild(text2);
}       
</script>
</head>

<input type="button" onclick="accion()" value="GO!!"/>

<svg id="idSVG">
   <text id="texto" x="50" y="35" font-size="14">PRUEBA</text>
</svg>

</body>
</html> 
```

但是`SVGDocument.createTextNode("text");`返回一个错误：`Object does not support this property or method`. 我认为问题是我无法正确引用 idSVG 元素。我用的是IE9。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T13:51:30.633

下面的例子对我有用。

请注意，如果您不设置 y 坐标默认 0，则 0 可能在 svg 边界框之外。

```
<!DOCTYPE> 
<html>
<body>
<head>
<script type="text/javascript"> 
    function accion(){
        var svg = document.getElementById("idSVG");
        var text2 = document.createElementNS("http://www.w3.org/2000/svg", "text");
        text2.setAttribute("y", "100");
        var textContent = document.createTextNode("this is the text content");
        text2.appendChild(textContent);
        svg.appendChild(text2);
}       
</script>
</head>

<input type="button" onclick="accion()" value="GO!!"/>

<svg id="idSVG">
   <text id="texto" x="50" y="35" font-size="14">PRUEBA</text>
</svg>

</body>
</html> 
```

# r - 具有预定义统计数据的多个箱线图，使用 r 中的点阵图

> ID：14749984
> 
> 赞同：1
> 
> 时间：2013-02-07T11:26:43.083
> 
> 标签：r, ggplot2, lattice, boxplot

我有一个看起来像这样的数据集

```
 VegType    87MIN   87MAX   87Q25   87Q50   87Q75   96MIN   96MAX   96Q25   96Q50     96Q75 00MIN   00MAX   00Q25   00Q50   00Q75
 1          0.02    0.32    0.11    0.12    0.13    0.02    0.26    0.08    0.09    0.10    0.02    0.28    0.10    0.11    0.12
 2          0.02    0.45    0.12    0.13    0.13    0.02    0.20    0.09    0.10    0.11    0.02    0.26    0.11    0.12    0.12
 3          0.02    0.29    0.13    0.14    0.14    0.02    0.27    0.11    0.11    0.12    0.02    0.26    0.12    0.13    0.13
 4          0.02    0.41    0.13    0.13    0.14    0.02    0.58    0.10    0.11    0.12    0.02    0.34    0.12    0.13    0.13
 5          0.02    0.42    0.12    0.13    0.14    0.02    0.46    0.10    0.11    0.11    0.02    0.28    0.12    0.12    0.13
 6          0.02    0.32    0.13    0.14    0.14    0.02    0.52    0.12    0.12    0.13    0.02    0.29    0.13    0.14    0.14
 7          0.02    0.55    0.12    0.13    0.14    0.02    0.24    0.10    0.11    0.11    0.02    0.37    0.12    0.12    0.13
 8          0.02    0.55    0.12    0.13    0.14    0.02    0.19    0.10    0.11    0.12    0.02    0.22    0.11    0.12    0.13 
```

实际上，我有 26 个变量和 5 年（列名中的 87,96 和 00 是年）。在一个理想的世界中，我希望有一个带有 26 个图的点阵图，每个变量一个，每个图包含 5 个框，即每年一个。我知道这是不可能的，因为 lattice 不接受预定义的统计信息。使用预定义的统计数据在 R 中是否有一种相当痛苦的方法来做到这一点？我已经使用`bxp`简单的箱线图在一个图中绘制了一年的所有变量，例如

```
Yr01 = read.csv('dat.csv',header=T)
dat01=t(Yr01[,c("01Min","01Q25","01Mean","01Q75","01Max")])
bxp(list(stats=dat01, n=rep(26, ncol(dat01))),ylim=c(0.07,0.2)) 
```

但我不知道如何从那里得到我需要的东西。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:44:28.050

这可以做到，至少使用`ggplot2`，但您必须对`reshape`您的数据进行相当多的操作。你**真的**必须有一个分位数真正有意义的数据！！你的分位数都搞砸了！例如，`Var1`有`01Max = 0.26`和`01Q75 = .67`！！

首先，我将重新创建一个有效数据：

```
n  <- c("01Min", "01Max", "01Med", "01Q25", "01Q75", "02Min", 
                            "02Max", "02Med", "02Q25", "02Q75")
v1 <- c(0.03,  0.76,  0.41,  0.13,  0.67,  0.10,  0.43,  0.27,  0.2,   0.33)
v2 <- c(0.03,  0.28,  0.14,  0.08,  0.20,  0.02,  0.77,  0.13,  0.06, 0.44)

df <- data.frame(v1=v1, v2=v2)
df <- as.data.frame(t(df))
names(df) <- n
df <- cbind(var=c("v1","v2"), df)
> df

#    var 01Min 01Max 01Med 01Q25 01Q75 02Min 02Max 02Med 02Q25 02Q75
# v1  v1  0.03  0.76  0.41  0.13  0.67  0.10  0.43  0.27  0.20  0.33
# v2  v2  0.03  0.28  0.14  0.08  0.20  0.02  0.77  0.13  0.06  0.44 
```

接下来，我们将重塑数据：

```
require(reshape2)
df.m <- melt(df, id="var")
# look for a bunch of numbers from the start of the string and capture it
# in the first variable: () captures the pattern. And replace it with the 
# captured pattern with the variable "\\1"
df.m$year <- gsub("^([0-9]+)(.*$)", "\\1", df.m$variable)

# the same but instead refer to the captured pattern in the second 
# paranthesis using "\\2"
df.m$quan <- gsub("^([0-9]+)(.*)$", "\\2", df.m$variable)
df.f <- dcast(df.m, var+year ~ quan, value.var="value") 
```

要获得这种格式：

```
> df.f

#   var year  Max  Med  Min  Q25  Q75
# 1  v1   01 0.76 0.41 0.03 0.13 0.67
# 2  v1   02 0.43 0.27 0.10 0.20 0.33
# 3  v2   01 0.28 0.14 0.03 0.08 0.20
# 4  v2   02 0.77 0.13 0.02 0.06 0.44 
```

现在，我们可以通过使用相应参数直接将分位数值提供给相应的参数来绘制，`column names`如下所示：

```
require(ggplot2)
require(scales)
p <- ggplot(df.f, aes(x=var, ymin=`Min`, lower=`Q25`, middle=`Med`, 
                           upper=`Q75`, ymax=`Max`)) 
p <- p + geom_boxplot(aes(fill=year), stat="identity") 
p 
```

![ggplot1](../Images/dc07db83f4ce5f9e691957cb20ab503b.png)

```
# if you want facetting:
p + facet_wrap( ~ var, scales="free") 
```

![ggplot2](../Images/4e69889cdd7e91e4ce595f60b51dc651.png)

* * *

您现在可以使用带有此代码的 a 来完成在单独的绘图中`years`为每个绘图绘制所有内容的任务，如下所示：`var``lapply``subsetting`

```
lapply(levels(df.f$var), function(x) {
    p <- ggplot(df.f[df.f$var == x, ], 
            aes(x=var, ymin=`Min`, lower=`Q25`, 
                middle=`Med`, upper=`Q75`, ymax=`Max`))
    p <- p + geom_boxplot(aes(fill=year), stat="identity")
    p
    ggsave(paste0(x, ".pdf"), last_plot())
}) 
```

**编辑：**您的数据在某些方面与您之前提供的数据不同。因此，这是您的新数据的代码版本：

```
# change var to VegType everywhere
require(reshape2)
df.m <- melt(df, id="VegType")

df.m$year <- gsub("^X([0-9]+)(.*$)", "\\1", df.m$variable) # pattern has a X
df.m$quan <- gsub("^X([0-9]+)(.*)$", "\\2", df.m$variable) # pattern has a X
df.f <- dcast(df.m, VegType+year ~ quan, value.var="value")
df.f$VegType <- factor(df.f$VegType) # convert integer to factor

require(ggplot2)
require(scales)
p <- ggplot(df.f, aes(x=VegType, ymin=`MIN`, lower=`Q25`, middle=`Q50`, 
                           upper=`Q75`, ymax=`MAX`)) 
p <- p + geom_boxplot(aes(fill=year), stat="identity") 
p 
```

您可以使用与以前相同的代码来刻面/编写单独的图。

# javascript - 单击保存按钮进行验证的java脚本

> ID：14749985
> 
> 赞同：0
> 
> 时间：2013-02-07T11:26:44.393
> 
> 标签：javascript

我有一个 .aspx 文件，我在其中应用了 Javascript 以单击保存按钮进行验证，但现在我必须在其他文件中使用此 Javascript 代码并检查验证我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:34:21.610

```
<script type="text/javascript">
   /*
     your validation code.
   */
</script> 
```

将此脚本添加到其他页面的头部，

```
<script type="text/javascript" src="validation.js"></script> 
```

# r - R中的dpareto函数

> ID：14749986
> 
> 赞同：1
> 
> 时间：2013-02-07T11:26:44.517
> 
> 标签：r, statistics

我想知道是否有人有用 R 编写的 dpareto 功能？

我无法使用 R 中的内置函数，因为我无法安装库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:43:10.173

从 R 包中删除函数相对容易，例如，从：

[http://cran.r-project.org/web/packages/VGAM/VGAM.pdf](http://cran.r-project.org/web/packages/VGAM/VGAM.pdf)

```
dpareto <- function(x, location, shape, log = FALSE) {
    if (!is.logical(log.arg <- log) || length(log) != 1)
        stop("bad input for argument 'log'")
    rm(log)

    L = max(length(x), length(location), length(shape)) 
    x = rep(x, length.out = L);
    location = rep(location, length.out = L);
    shape = rep(shape, length.out = L)

    logdensity = rep(log(0), length.out = L)
    xok = (x > location)
    logdensity[xok] = log(shape[xok]) + shape[xok] * log(location[xok]) -
            (shape[xok]+1) * log(x[xok])
    if (log.arg) logdensity else exp(logdensity)
}

alpha <- 3; k <- exp(1); x <- seq(2.8, 8, len = 300)
## Not run: 
plot(x, dpareto(x, location = alpha, shape = k), type = "l",
        main = "Pareto density split into 10 equal areas") 
```

# xmpp - 向非联系人发送谷歌群聊邀请

> ID：14749987
> 
> 赞同：0
> 
> 时间：2013-02-07T11:26:51.377
> 
> 标签：xmpp, strophe, google-talk, punjab

我的要求是我需要向不在我的联系人列表中的人发送谷歌群聊邀请。从我的应用程序中，我可以在 groupchat.google.com 上创建房间。我可以邀请我的联系人列表中的人到聊天室，但我无法邀请不在我的联系人列表中的谷歌用户到聊天室。

```
RECV: '<message to="mymail@gmail.com/88403C03" from="somemail@gmail.com" id="3331"
type="error"><x jid="private-chat-cc1e6f03-6f2b-44ca-8295-
fac4757f2899@groupchat.google.com" reason="This is testing invite" 
xmlns="jabber:x:conference"/><error code="503" type="cancel"><service-unavailable 
xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error>
</message>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:33:15.723

出于隐私原因，Google Talk 不会将消息发送给不在您的联系人列表中的用户。这意味着它仅适用于您联系人列表中的订阅用户。

# android - 移动应用后端

> ID：14749989
> 
> 赞同：1
> 
> 时间：2013-02-07T11:26:53.843
> 
> 标签：android, ios, backend

我是一名网络开发人员，但最近我被要求构建一个移动应用程序的后端。所以基本上应用程序内部只有一个表单，用户填写表单并点击提交，数据将被发送到安全服务器。该应用程序将由某人制作，我只需要从应用程序中获取数据并将其存储在数据库中。

现在我有几个问题，例如：

1.  我需要注册苹果开发者账号还是安卓等其他账号？

2.  是否有任何指南或教程如何从应用程序获取数据并进行处理。

此外，一旦应用程序由开发人员制作，如何下载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:40:19.843

您可以查看 Parse： http: [//parse.com](http://parse.com)。可以为您节省一些工作吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:15:18.250

采用您最喜欢的服务器端编程语言。（例如 php、ruby....）

*   您可以创建一个 url，应用程序可以在其中发出发布请求。
*   告诉应用程序开发人员他应该在 post 请求中以 json 格式发送数据。他可以在有人填写后发送表单数据。让他为每个表单数据添加一个唯一的 id，以确保您不保存重复的数据。
*   当你得到 json 解析它并推送到数据库。

可选的：

*   实施身份验证
*   实施加密

您不需要为此拥有开发人员帐户（创建 Web 服务），但分别是应用程序开发人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:38:14.140

首先，我想明确一点，Web 开发人员的后端流程一无所有。所有事情都应该由移动开发人员管理。Web 开发人员只需要获取请求并执行操作并根据请求返回响应。

不管进程是在后台运行还是在四地运行，只需管理响应时间。意思是如果用户在这样的特定时间没有得到响应，那么尝试管理它并向用户返回适当的响应。

如果您不知道如何制作网络服务，那么[www.w3school.com](http://www.w3schools.com/)和其他一些链接或示例也会对您有所帮助。

从基本概念开始，然后切换到下一步。

[关于Android + PHP](http://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and-android-client-using-http-and-json/)的好例子：Web 服务

祝你好运 ！！

# php - MYSQL IN 语句语法不起作用

> ID：14749991
> 
> 赞同：0
> 
> 时间：2013-02-07T11:26:59.870
> 
> 标签：php, mysql, select

我正在尝试根据数组中包含的标识符从 MYSQL 数据库中获取记录。要获取标识符，我的代码如下：

```
$query="SELECT agent_id FROM agent_coverage WHERE primary_area LIKE '$search_term%'";
$result=mysqli_query($dbc, $query) or die("Could not obtain primary area coverage2");
while($r=mysqli_fetch_array($result))
{
    $agent_primary[]=$r['agent_id'];
} 
```

`print_r`用于访问数组详细信息时，这似乎工作正常。

我的下一个声明是失败的声明如下：

```
if(!empty($agent_primary))
{
    $ids=join(",", $agent_primary);
    $query5="SELECT * FROM detail_db WHERE user_id IN($ids)";
    $result5=mysqli_query($dbc, $query5) or die("Could not do SELECT");

    while($row=mysqli_fetch_array($result5))
    {
    //do stuff with results here.
    }
} 
```

这只是触发`die()`声明。我试过使用`implode`而不是`join`没有成功。

编辑：
`die($dbc->error)`在失败的查询显示错误为：`unknown column '' in where clause`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:00:15.580

尝试：

```
$agent_primary[]="'".$dbc->real_escape_string($r['agent_id'])."'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:33:04.700

```
$query="SELECT agent_id FROM agent_coverage WHERE primary_area LIKE '$search_term%'";
$result=mysqli_query($dbc, $query) or die("Could not obtain primary area coverage2");

$agent_primary=array();    

while($r=mysqli_fetch_array($result))
{
  array_push($agent_primary,$r['agent_id']);
} 
```

然后

```
if(!empty($agent_primary))
{
$ids=$agent_primary;
$query5="SELECT * FROM detail_db WHERE user_id IN($ids)";
$result5=mysqli_query($dbc, $query5) or die("Could not do SELECT");

while($row=mysqli_fetch_array($result5))
{
//do stuff with results here.
}
} 
```

用这个。我想它会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:46:13.547

使用 implode 创建一个字符串并在其周围附加括号。

获取数组中 id 的值，然后将其内爆。请参见下面的示例 - 这有效。

```
 $arr = array(1,297,298);
    $new = '(';
    $new .= implode(',',$arr);
    $new .= ')';
    $query = "Select * from wp_posts where ID IN $new"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:48:31.933

编辑：两个查询都可以与 JOIN 语句结合使用

```
$query = "
    SELECT
        dd.user_id,
        dd.foo
    FROM
        tmp_agent_coverage as ac
    LEFT JOIN
        tmp_detail_db as dd
    ON
        ac.agent_id=dd.user_id
    WHERE
        ac.primary_area LIKE '$search_term%'
";
$result=mysqli_query($dbc, $query) or mysqliError($dbc, "Could not obtain primary area coverage2");
while($r=mysqli_fetch_array($result))
{
    echo $r['user_id'], ' ', $r['foo'], "\n";
} 
```

* * *

edit2：独立的例子

```
<?php
$dbc = new mysqli('localhost', 'localonly', 'localonly', 'test');
if ($dbc->connect_error) {
    var_dump($mysqli->connect_errno, $mysqli->connect_error);
    die;
}
setup($dbc);
$search_term = 'xy';

$query = "
    SELECT
        dd.user_id,
        dd.foo
    FROM
        tmp_agent_coverage as ac
    LEFT JOIN
        tmp_detail_db as dd
    ON
        ac.agent_id=dd.user_id
    WHERE
        ac.primary_area LIKE '$search_term%'
";
$result=mysqli_query($dbc, $query) or mysqliError($dbc, "Could not obtain primary area coverage2");
while($r=mysqli_fetch_array($result))
{
    echo $r['user_id'], ' ', $r['foo'], "\n";
}

define('DEVELOPMENT_DEBUG_MESSAGES', 1);
function mysqliError($dbc, $description) {
    if ( !defined('DEVELOPMENT_DEBUG_MESSAGES') || !DEVELOPMENT_DEBUG_MESSAGES ) {
        echo '<div class="error">', htmlspecialchars($description), '</div>';
    }
    else {
        echo '<fieldset class="error"><legend>', htmlspecialchars($description), '</legend>',
            htmlspecialchars($dbc->error), '</div>';
    }
}

function setup($dbc) {
    $q = array(
        'CREATE TEMPORARY TABLE tmp_agent_coverage (
            agent_id int auto_increment,
            primary_area varchar(32),
            primary key(agent_id),
            key(primary_area)
        )',
        "INSERT INTO tmp_agent_coverage (primary_area) VALUES ('xy1'),('dfg'),('xy2'),('abc'),('xy3')",
        'CREATE TEMPORARY TABLE tmp_detail_db (
            user_id int auto_increment,
            foo varchar(32),
            primary key(user_id)
        )',
        "INSERT INTO tmp_detail_db (foo) VALUES ('fooxy1'),('foodfg'),('fooxy2'),('fooabc'),('fooxy3')"
    );
    foreach($q as $query) {
        $dbc->query($query) or die(__LINE__ .' '.$query. ' '. $dbc->error);
    }
} 
```

印刷

```
1 fooxy1
3 fooxy2
5 fooxy3 
```

* * *

原始答案：
`mysqli::query`返回 false 表示执行查询时发生错误。这可能是语法错误或特权或...或... $dbc 对象
的`error`and属性应该包含有关错误的更详细信息。`errno`但是您不应该向任意用户显示完整的错误消息。
因此，出于调试目的，定义一个函数，如

```
define('DEVELOPMENT_DEBUG_MESSAGES', 1);
function mysqliError($dbc, $description) {
    if ( !defined('DEVELOPMENT_DEBUG_MESSAGES') || !DEVELOPMENT_DEBUG_MESSAGES ) {
        echo '<div class="error">', htmlspecialchars($description), '</div>';
    }
    else {
        echo '<fieldset class="error"><legend>', htmlspecialchars($description), '</legend>',
            htmlspecialchars($dbc->error), '</div>';
    }
} 
```

然后在你的代码中使用这个函数，比如

```
<?php
define('DEVELOPMENT_DEBUG_MESSAGES', 1);
[...]
$query="SELECT agent_id FROM agent_coverage WHERE primary_area LIKE '$search_term%'";
$result=mysqli_query($dbc, $query) or mysqliError($dbc, "Could not obtain primary area coverage2"); 
```

`define(...)`完成调试后删除该行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T11:50:48.270

你可以这样做

```
if(!empty($agent_primary))
{
    $ids=implode($agent_primary,",");
    $query5="SELECT * FROM detail_db WHERE user_id IN ($ids)";
    $result5=mysqli_query($dbc, $query5) or die("Could not do SELECT");

    while($row=mysqli_fetch_array($result5))
    {
    //do stuff with results here.
    }
} 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T12:48:50.710

试试这个

```
 $ids=join("','", $agent_primary);
 $query5="SELECT * FROM detail_db WHERE user_id IN('$ids')"; 
```

我在我的本地主机上试过了，效果很好！

# asp.net - JSON结果中的MVC4 Html格式字符串

> ID：14749992
> 
> 赞同：1
> 
> 时间：2013-02-07T11:27:04.177
> 
> 标签：asp.net, json, asp.net-mvc-4

大家好，我已经编写了一个示例代码来检查具有给定名称的用户，如果可用，我想显示带有`Red`颜色的文本，说明正在使用用户名，为此我写了如下但文本没有显示

```
[OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
    public JsonResult IsUserNameAvailable(string UserName)
    {
        var usrAvailable = db.tblUsers.Where(p => p.UserName == UserName).Select(img => img.UserName).FirstOrDefault();

        if (usrAvailable == null)
        {
            return Json("Username is available", JsonRequestBehavior.AllowGet);
        }
        return Json("<span style='color:Red;> Username in use</span>", JsonRequestBehavior.AllowGet);

    } 
```

有人能帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:33:41.457

```
"<span style='color:Red;> Username in use</span>" 
```

`style`报价未关闭

和

`return Json()`可以代替`return Content()`

# iphone - SDImageCache - imageFromMemoryCache 返回 nil

> ID：14749995
> 
> 赞同：1
> 
> 时间：2013-02-07T11:27:15.313
> 
> 标签：iphone, ios, xcode, sdwebimage

我正在使用最新版本的 SDWebImage (SDImageCache)，并通过代码保存图像

```
[[SDImageCache sharedImageCache] storeImage:image forKey:@"1"]; 
```

并且我确定图像已成功保存，因为我检查了我的应用程序文件夹，其中存在图像。

我正在使用

```
UIImage *image = [[SDImageCache sharedImageCache] imageFromMemoryCacheForKey:@"1"]; 
```

读出我的图像，但图像对象返回 nil。问题可能是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:59:52.310

当您使用：

```
- (void)storeImage:(UIImage *)image forKey:(NSString *)key 
```

图像也保存在磁盘缓存中。

实现类似于：

```
- (void)storeImage:(UIImage *)image forKey:(NSString *)key
{
    [self storeImage:image imageData:nil forKey:key toDisk:YES];
} 
```

因此，如果您需要从磁盘中检索图像，则可以使用以下方法：

```
- (void)queryDiskCacheForKey:(NSString *)key done:(void (^)(UIImage *image, SDImageCacheType cacheType))doneBlock; 
```

默认磁盘缓存类型为`SDImageCacheTypeNone`，因此如果您需要指定缓存类型，请使用`SDImageCacheType`枚举。

```
enum SDImageCacheType
{
    /**
* The image wasn't available the SDWebImage caches, but was downloaded from the web.
*/
    SDImageCacheTypeNone = 0,
    /**
* The image was obtained from the disk cache.
*/
    SDImageCacheTypeDisk,
    /**
* The image was obtained from the disk cache.
*/
    SDImageCacheTypeMemory
}; 
```

希望，它会帮助你。

# c# - c#导入的过程

> ID：14749999
> 
> 赞同：0
> 
> 时间：2013-02-07T11:27:20.743
> 
> 标签：c#, .net, fileloadexception

我得到了这个例外，

> System.IO.FileLoadException：无法加载由“GeometryUtils.dll”导入的过程

在尝试打电话时`Activator.CreateInstanceFrom(geomUtilsAssemblyPath, "GeometryUtils.IsmRegionFactory");`

我可以看到**GeometryUtils.dll**使用进程资源管理器及其依赖项加载。Dependency Walker 和 Reflector 也没有报告任何问题。

仅供参考，GeometryUtils 是使用 .NET 4.0 构建的，调用过程是使用 .NET 2.0 构建的。所以我已经指定，

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
</startup> 
```

在可执行的配置文件中。

任何想法，可能会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:30:19.417

2.0 进程不能支持 4.0 类库。