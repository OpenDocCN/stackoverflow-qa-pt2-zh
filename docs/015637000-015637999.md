# StackOverflow 问答 15637000-15637999

# c# - 重命名目录（错误找不到路径的一部分。）

> ID：15637005
> 
> 赞同：0
> 
> 时间：2013-03-26T12:23:13.533
> 
> 标签：c#

```
string sourceDir = @"E:\Images\3\2\1";
string destDir = @"E:\Images\33\22\11";
Directory.Move(sourceDir, destinationDir); 
```

我必须重命名使用 Directory.Move() 的目录，但给了我错误：

```
Could not find a part of the path. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:31:05.870

您需要确保将文件夹移动到 aleady 的位置存在。为了方便起见，您可以执行以下操作。

基本上，您需要确保将文件移动到的路径存在。

```
string sourceDir = @"E:\Images\3\2\1";
string destName = "1";
string destDir = @"E:\Images\33\22\";

Directory.CreateDirectory(destDir); // Create the location path
Directory.Move(sourceDir, Path.Combine(destDir + destName)); 
```

**编辑：**添加了基本的错误处理。

这是一个带有基本错误处理的示例，以确保源目录和目标目录都存在。

```
string sourceDir = @"E:\Images\3\2\1";
string destName = "1";
string destDir = @"E:\Images\33\22\";

if (!Directory.Exists(sourceDir))
{
    Console.WriteLine("Source Directory does not exist.");
    Console.Read();
    //return; // Handle issue where Source Dir does not exist.
}

if (!Directory.Exists(destDir))
{
    Console.WriteLine("Destination Directory does exist. Created.");
    Directory.CreateDirectory(destDir);
}

if (Directory.Exists(Path.Combine(destDir + destName)))
{
    Console.WriteLine("Target Destination already exist.");
    Console.Read();
    return;
}

Directory.Move(sourceDir, Path.Combine(destDir + destName));
Console.Read(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:25:05.857

您要移动到的文件夹在您移动之前应该存在。

调用`Directory.Create([path to target folder]`) 之前`Directory.Move`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T12:27:11.563

似乎在`string destDir = @"E:\Images\33\22\11";`Images\33\22\ 中不存在。您不能使用 来创建新的子目录`Directory.Move`，因此`E:\Images\33\22\`必须已经存在。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx)。

# python - 多处理 python-server 创建了太多临时目录

> ID：15637010
> 
> 赞同：4
> 
> 时间：2013-03-26T12:23:43.603
> 
> 标签：python, multiprocessing

我正在尝试在 python3.3 中实现一个服务器，该服务器预加载了一个单独的线程来对传入连接进行所有处理。

```
from multiprocessing import Process, Pipe, Queue
from multiprocessing.reduction import reduce_socket
import time
import socketserver,socket

def process(q):
    while 1:
        fn,args = q.get()
        conn = fn(*args)

        while conn.recv(1, socket.MSG_PEEK):
            buf = conn.recv(100)
            if not buf: break
            conn.send(b"Got it: ")
            conn.send(buf)

        conn.close()

class MyHandler(socketserver.BaseRequestHandler):
    def handle(self):
        print("Opening connection")
        print("Processing")
        self.server.q.put(reduce_socket(self.request))
        while self.request.recv(1, socket.MSG_PEEK):
            time.sleep(1)
        print("Closing connection")

class MyServer(socketserver.ForkingTCPServer):
    p = Process
    q = Queue()
    parent_conn,child_conn = Pipe()
    def __init__(self,server_address,handler):
        socketserver.ForkingTCPServer.__init__(self,server_address, handler)
        self.p = Process(target=process,args=(self.q,))
        self.p.start()
    def __del__(self):
        self.p.join()

server_address = ('',9999)
myserver = MyServer(server_address,MyHandler)
myserver.serve_forever() 
```

我可以使用以下脚本测试它是否有效：

```
from multiprocessing.reduction import reduce_socket
import time
import socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(('localhost', 9999))

time.sleep(1)
print("reduce_socket(s)")
fn,args = reduce_socket(s)
time.sleep(1)
print("rebuild_socket(s)")
conn = fn(*args)
time.sleep(1)
print("using_socket(s)")

conn.send("poks")
print conn.recv(255)
conn.send("poks")
print conn.recv(255)
conn.send("")
print conn.recv(255)
conn.close() 
```

不幸的是，似乎有什么问题，因为在运行测试 n 次后，我的 tmp 文件夹中充满了子文件夹：

```
$ ls /tmp/pymp*|wc -l
32000 
```

这些临时文件由`socket_reduce()`. 有趣的`rebuild/reduce_socket()`是，客户端也创建了临时文件，但是一旦函数退出，它们就会被删除。我当前的 tmp 文件系统中的最大文件夹数量是 32000，这会导致问题。我可以手动或在服务器的某个地方删除 /tmp/pymp* 文件，但我想也应该有正确的方法来执行此操作。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:47:58.233

好吧，有点修好了。来自 。`./lib/python3.3/multiprocessing/util.py:`

```
$ grep "def get_temp_dir" -B5 /usr/local/lib/python3.3/multiprocessing/util.py

#
# Function returning a temp directory which will be removed on exit
#

def get_temp_dir(): 
```

在进程退出之前，临时目录似乎应该可用。由于我的`process()`和`main()`两者都永远运行，临时文件不会被删除。要修复它，我可以创建另一个进程，将 reduce_socket 交给`process()`：

```
def process(q):
    while 1:
        fn,args = q.get()
        conn = fn(*args)

        while conn.recv(1, socket.MSG_PEEK):
            buf = conn.recv(100)
            if not buf: break
            conn.send(b"Got it: ")
            conn.send(buf)

        conn.close()
        q.put("ok")

class MyHandler(socketserver.BaseRequestHandler):
    def socket_to_process(self,q):
        q.put(reduce_socket(self.request))
        q.get()
    def handle(self):
        p = Process(target=self.socket_to_process,args=(self.server.q,))
        p.start()
        p.join() 
```

这样临时文件是在子进程中创建的，一旦`process()`完成输入，该子进程就会退出。我不认为这是一种优雅的方式，但它确实有效。如果有人知道更好，请让stackoverflow知道。

# javascript - 为什么 servlet 会抛出这个 Servlet.service() 异常？

> ID：15637012
> 
> 赞同：0
> 
> 时间：2013-03-26T12:23:49.057
> 
> 标签：javascript, servlets, netbeans, javabeans

我正在使用 Netbeans。运行从会话 bean 调用方法的 servlet 时出现以下异常。

```
ApplicationDispatcher[/TheLibrarySystem-war] PWC1231: Servlet.service() for servlet       ListReservations threw exception
java.lang.NullPointerException
    at org.apache.jsp.ListReservations_jsp._jspService(ListReservations_jsp.java from   :68)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:389)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:427)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:873)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:723)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:558)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:456)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:382)
    at servlet.TheLibrarySystemServlet.processRequest(TheLibrarySystemServlet.java:86)
    at servlet.TheLibrarySystemServlet.doGet(TheLibrarySystemServlet.java:185)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:427)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:315)
    at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:287)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:218)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:94)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:98)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:222)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
    at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1093)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:166)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
    at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1093)
    at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.invokeAdapter(DefaultProcessorTask.java:666)
    at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.doProcess(DefaultProcessorTask.java:597)
    at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:872)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)
    at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:264)
    at com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run(SSLWorkerThread.java:106)
PWC1412: WebModule[/TheLibrarySystem-war] ServletContext.log():TheLibrarySystemServlet: Exception in TheLibrarySystemServlet.processRequest() 
```

会话 bean 中的方法肯​​定工作正常，并将正确的值返回给 servlet 端。

代码在以下位置崩溃： dispatcher.forward(request, response);

google了一下，好像不是代码问题，不知道是什么原因造成的以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:51:00.870

通常，当存在类路径错误时会出现此异常。请检查您的构建路径。它不应包含`jsp-api*.jar`. 如果存在请删除。

# c# - 将图像（字节数组）添加到数据库时出现 DbUpdateException（插入语句与外键约束冲突）

> ID：15637013
> 
> 赞同：1
> 
> 时间：2013-03-26T12:23:49.267
> 
> 标签：c#, database, entity-framework-5

当我尝试通过我的应用程序将照片上传到 SQL 数据库时`db.SaveChanges()`，我会抛出 DbUpdateException 。`UploadReferencePhoto ActionResult`我首先将代码与每个类型的表继承一起使用。与场景相关的模型如下：

用户资料：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    // ...
} 
```

租户：

```
[Table("Tenant")]
public class Tenant : UserProfile
{
    public Tenant()
    {
        this.ReferencePhotos = new List<ReferencePhoto>();
    }

    public virtual ICollection<ReferencePhoto> ReferencePhotos { get; set; }
} 
```

图片：

```
[Table("Image")]
public class Image
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ImageId { get; set; }
} 
```

参考图片：

```
[Table("ReferencePhoto")]
public class ReferencePhoto : Image
{
    // 1:many with Tenant
    public int UserId { get; set; }
    [ForeignKey("UserId")]
    public virtual Tenant Tenant { get; set; }
} 
```

所以`Tenant`延伸`UserProfile`和`ReferencePhoto`延伸`Image`。当我单击上传时，会引发上述异常。内部异常如下：

> “INSERT 语句与 FOREIGN KEY 约束 \"FK_dbo.ReferencePhoto_dbo.Tenant_UserId\" 冲突。冲突发生在数据库 \"C:\USERS\HOME\DESKTOP\LETLORD\LETLORD\APP_DATA\LETLORD.MDF\"，表 \ "dbo.Tenant\"，列 'UserId'。\r\n语句已终止。"}

有人可以告诉我内部异常到底在说什么以及如何解决它吗？如果需要更多代码/信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:40:07.500

试试看这里：

[INSERT 语句与 FOREIGN KEY 约束冲突](https://stackoverflow.com/questions/2965837/insert-statement-conflicted-with-the-foreign-key-constraint)

“FK 的工作方式是它不能在该列中具有不在引用表的主键列中的值。”

如果您使用 FK 将记录添加到表中，则需要确保包含主键的记录也在那里。

# android - 如何从另一个活动文件访问活动文件中的变量？

> ID：15637015
> 
> 赞同：0
> 
> 时间：2013-03-26T12:23:59.610
> 
> 标签：android, android-activity

我的代码中有两个活动文件，第一个活动文件加载布局搜索，第二个文件加载布局列表。我在布局搜索中有一个文本框并输入一些文本。我想在我的第二个活动文件中使用此文本，但我无法访问它，因为它在布局搜索中。我怎样才能做到这一点？这里是第一个活动文件，这里有一个名为**searchedText**的 EditText 项，我想在第二个活动文件中使用它。

```
public class SearchActivity extends Activity{

public EditText searchedText;
public RadioGroup radioGroup;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

}

public void onStart(){
    super.onStart();
    searchedText = (EditText) findViewById(R.id.searchText);
    Button searchinSearchButton = (Button)findViewById(R.id.searchInSearch);
    radioGroup = (RadioGroup) findViewById(R.id.radioGroup1);

    searchinSearchButton.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
            String searched=searchedText.getText().toString();
            Intent myIntent = new Intent(v.getContext(),   
                            SearchListActivity.class);
            startActivityForResult(myIntent, 1);

        } 

    });
} 
```

}

这是第二个活动文件：

```
public class SearchListActivity extends Activity{

public DatabaseAdapter db;
public ArrayList<String> myList;
public ListView listview;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);

    db = new DatabaseAdapter(this);
    myList = new ArrayList<String>();

    getContacts();

    // Example of retrieving tweets of the user "mashable" and adding them to   
myList

    /*
    ArrayList<Tweet> tweets= new ArrayList<Tweet>();
    tweets.addAll(Twitter.getTimeline("mashable", 10));
    for(Tweet t: tweets){
        myList.add(t.username +  ": " + t.message + " Tweet id: "+ t.id);
    }
    */
    printList();

}

public void printList(){

    listview = (ListView)findViewById(R.id.contactcListView);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, myList);

    listview.setAdapter(adapter);
}
public void getContacts() {

    db.open();
    Cursor c = db.getContactbyName("y");
    if (c.moveToFirst()) {
        do {
            DisplayContact(c);

        } while (c.moveToNext());
    }
    db.close();
}

public void DisplayContact(Cursor c) {

    String entry = "";
    // if you add another attribute to your table, you need to change 3 into x
    for (int i=1; i<5;i++){
        entry += c.getString(i) + "\n";
    }
    myList.add(entry);
}

} 
```

在第二个活动文件中，您可以看到 getContacts() 方法。在那里，我通过 Cursor c = db.getContactbyName("y"); 搜索 但我想搜索输入 texbox 的任何用户，而不是“y”，它位于名为**searchedText**的第一个活动文件中。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:30:47.193

`Intent`当您开始第二个活动时，将文本作为额外内容发送。

```
searchinSearchButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){
        String searched=searchedText.getText().toString();
        Intent myIntent = new Intent(v.getContext(),   
                        SearchListActivity.class);
        myIntent.putExtra("SEARCH_STRING",searched);
        startActivityForResult(myIntent, 1);

    } 

}); 
```

并在你`onCreate`得到额外的。你可以使用`Intent.getStringExtra(String name)` 换句话说：

```
 mySearched = getIntent().getStringExtra("SEARCH_STRING"); 
```

只需确保在使用之前查看是否有任何内容为空。

# java - 在 Heroku 上上传文件

> ID：15637018
> 
> 赞同：2
> 
> 时间：2013-03-26T12:24:13.523
> 
> 标签：java, file-upload, heroku

我有一个 Java Servlet/JSP 应用程序，它需要用户上传存档文件（.rar 或 .zip）。然后提取此存档文件，并解析提取的文件。解析文件后，将其中的数据添加到数据库中，然后再次删除文件。

在我的本地机器上，这非常有效，因为您只需使用操作系统提供的文件系统。但是现在我想在 Heroku 上运行这个应用程序，我不确定如何上传文件。

由于这些文件是用户特定的，而不是永久的，我最初的想法是我可以只使用 Heroku 提供的临时文件系统，我不需要使用 S3。

目前，我的应用程序仅在 1 个 web dyno 上运行，并且没有 worker dyno，但未来可能会扩展到多个 web dyno，具体取决于将要使用它的用户数量。

我可以将临时文件系统用于我的特定用例吗？它是否可以正常扩展？

我目前正在使用 ServletFileUpload 编写，并且正在写入 java.io.File；我可以将 java.io.File 的路径更改为临时文件系统中的路径吗？这种路径的一个例子是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:19:16.053

我想您可以在特定情况下使用临时文件系统，因为它只是用于解析文件的临时用途。

您可以使用该`/tmp`目录，但请记住，该文件将在请求完成后被销毁。

这在这篇文章中讨论了[https://stackoverflow.com/a/12416923/476782](https://stackoverflow.com/a/12416923/476782)

# google-sheets - Google 电子表格中的数组->标量函数

> ID：15637022
> 
> 赞同：0
> 
> 时间：2013-03-26T12:24:29.097
> 
> 标签：google-sheets, google-drive-api

我正在使用这个：

```
=googlefinance("ukx","close","01/01/2012") 
```

但令人沮丧的是，它返回了一个 2x2 数组，该数组具有我在位置 2,2 处所需的值。我试图只返回那个值（一个标量），但我不知道我需要什么函数来获取它。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:47:44.233

该`INDEX`函数（请参阅[参考资料](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs)）似乎可以解决问题：

```
=INDEX(googlefinance("ukx","close", "01/01/2012"); 2; 2) 
```

返回 5696.7（参见[示例](https://docs.google.com/spreadsheet/ccc?key=0AmR0r1Y14zgydG03QS1Dd0dLRDA3SWgtLXp6TzV3d3c#gid=0)）。

# navigation - sencha touch 上的后退按钮不起作用

> ID：15637023
> 
> 赞同：4
> 
> 时间：2013-03-26T12:24:34.070
> 
> 标签：navigation, sencha-touch, sencha-touch-2, push

我正在像这样从我的导航视图（xtype：'mainPanel'）推送一个视图。它是标签栏的一个元素。在第二个视图`back`中，导航栏中显示一个按钮，但它不起作用。任何想法？

```
itemtap: function(list, index, target, record) {

                                list.up('mainPanel').push({
                                    xtype: 'newview',
                                    title: 'New',
                                    data: record.data
                                });

} 
```

主.js

```
Ext.define('Proj.view.Main', {
extend: 'Ext.tab.Panel',
xtype: 'main',
requires: [
    'Ext.TitleBar','Proj.view.phone.Mainpanel','Proj.view.phone.Home',''
],
config: {
    tabBar: {
        docked: 'bottom',
        layout: {
            pack: 'center'
        }

    },

    items: [

        {
            xtype: 'homePanel'
        },
        {
            xtype: 'mainpanel'
        },

    ]
} 
```

});

主面板.js

```
Ext.define('Proj.view.phone.MainPanel', {
    extend: 'Ext.navigation.View',
    xtype: 'mainpanel',
    requires : [
        '],
    initialize:function(){

        this.getNavigationBar().add(stuff);

Ext.getCmp('categoryList').setData(jsonObject.info);

    },
    config: {
        title : 'Shop',
        iconCls: 'favorites',
        styleHtmlContent: true,
        scrollable: true,

            items: [

                        {
                            xtype: 'list',
                            fullscreen: true,
                            itemTpl: '{name}',
                            autoLoad: true,
                            id:'categoryList',
                            store: {
                                fields :['active', 'created','description']

                            },
                            listeners: {
                                itemtap: function(list, index, target, record) {

                                    list.up('mainpanel').push({
                                        xtype: 'newview',
                                        title: 'newview',
                                        data: record.data
                                    });

                                }
                            }
                        }
            ]
    }, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:15:48.060

尝试使用以下代码覆盖后退按钮事件::

```
extend:'Ext.navigation.View',
xtype:'myNavigation',
config:{
    ……
},
onBackButtonTap:function(){
    this.callParent(arguments); 
    alert('back button pressed');
} 
```

看看这是否有效。如果是这样，那么您将知道您正在处理错误的返回事件，并且推送不起作用。如果它没有抛出警报，那么监听器就没有工作。尝试使用控制器方法以编程方式调用 back 事件，看看是否可行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:56:44.287

我以前遇到过这个问题。在所有视图中创建一个初始化函数。在其中添加此代码。

```
this.callParent(arguments); 
```

# ios - Xcode 4.2 + iOS6 = Interface Builder 错误

> ID：15637035
> 
> 赞同：0
> 
> 时间：2013-03-26T12:25:02.747
> 
> 标签：ios, xcode, ios6, interface-builder, xcode4.2

我正在尝试将新的 iOS6 SDK 与旧版本的 Xcode 4.2 一起使用。我真的需要这样。
我已按照以下说明操作：[https ://stackoverflow.com/a/9621226/987480](https://stackoverflow.com/a/9621226/987480)

一切似乎都很好，但是当我尝试编译时，我收到关于 Interface Builder 的错误

![在此处输入图像描述](../Images/a88643ea5c2e9eb2b7bc3c4344e8745d.png)

在 Base SDK 中，我有最新的 iOS（iOS 6.1）。有没有人有同样的问题？任何解决方法，或让旧的 Xcode+iOS6 SDK 工作的不同方式？

非常感谢。

已编辑：此外，每次遇到崩溃错误时，我都无法编辑任何 xib 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:15:02.587

再次安装xcode，它对我有用

# c - 此行有多个标记错误

> ID：15637039
> 
> 赞同：-2
> 
> 时间：2013-03-26T12:25:07.123
> 
> 标签：c, header

*此行有多个标记 - 先前定义的“类型”在这里 - 重新定义参数“类型”*

> ```
> int parseLine(char* line, int* day, float* amount,char* type, char* type); 
> ```

这就是我在 Eclipse 的头 C 文件中遇到的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:26:41.033

该错误告诉您您定义`char* type`了两次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:27:14.673

您使用了`type`两次变量名。

用一些不同的名称替换行

```
int parseLine(char* line, int* day, float* amount,char* type, char* type2); 
```

# javascript - 将大部分 CSS 和 JS 嵌入到无链接中

> ID：15637042
> 
> 赞同：0
> 
> 时间：2013-03-26T12:25:14.650
> 
> 标签：javascript, html, css

所以......只是为了让你没有理由称我为白痴，这就是我需要这个的原因：我目前正在开发一个使用 jruby 的离线项目。因此，为了即时生成报告，（我的上级）决定使用 JavaFX 的 WebView 组件——HTML、CSS 和 JS。

但这里有一个问题：不使用文件系统。所有内容都从数据库中提取并动态生成。也没有互联网。因此，要加载到 WebView 中的所有内容都将放在一个文件中，无论多么庞大。

我有一个 HTML 页面和两个大文件——一个 js，一个 css。当我为 css 和js使用`<link>`标签时 - 一切正常。`<script src="...">`无论是在浏览器中，还是我人为地将页面加载到 WebView 中。但是如果我应该将文件复制粘贴到相应的`<style>`和`<script>`标签中（因为它可能会在程序中处理），一半的事情不起作用。有没有一种特殊的方法可以做到这一点？

这是我正在使用的 html、css 和 JS（html 中填充了示例数据，因此可以查看是否一切正常）：

[html 文件](http://www.2shared.com/document/krZvSBM6/index.html)[css 文件](http://www.2shared.com/document/vts4CdV2/total.html)[javascript 文件](http://www.2shared.com/document/dxqZ9Y9U/total.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:32:44.993

您可以尝试合并它们。[在此处](http://www.electrictoolbox.com/combine-minify-javascript-php/)阅读有关此内容的更多信息。

# mysql - 绕过错误代码：1442。无法更新调用此存储函数/触发器的语句所使用的表

> ID：15637049
> 
> 赞同：1
> 
> 时间：2013-03-26T12:25:23.813
> 
> 标签：mysql, delimiter

我希望执行以下操作，

```
drop database ABC;
create database ABC;
use ABC;

create table head (
head_id int primary key auto_increment,
head_name varchar(55)
);

create table table1 (
t1_id int primary key,
t1_name varchar(55),
foreign key (t1_id) references head(head_id)
);

insert into head(head_name) values ('table1');
insert into table1(t1_id,t1_name) select max(head_id),'HI' from head;

select * from head;
select * from table1; 
```

但我希望使用触发器，因为我必须这样做很长一段时间，所以我编写了以下代码，但由于提到的错误它不起作用。

```
drop database ABC;
create database ABC;
use ABC;

create table head (
head_id int primary key auto_increment,
head_name varchar(55)
);

create table table1 (
t1_id int primary key,
t1_name varchar(55),
foreign key (t1_id) references head(head_id)
);

delimiter $$
CREATE
    TRIGGER `t1` BEFORE INSERT
    ON `table1`
    FOR EACH ROW BEGIN
        insert into head (head_name) values ('table1');
    END
$$
delimiter ;

insert into table1(t1_id,t1_name) select max(head_id),'HI' from head;

select * from head;
select * from table1; 
```

上面的触发器给了我错误，

```
Error Code: 1442\. Can't update table 'head' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

任何帮助！

# templates - 在 Ember 中处理来自动态附加元素的回调

> ID：15637050
> 
> 赞同：0
> 
> 时间：2013-03-26T12:25:37.267
> 
> 标签：templates, view, callback, ember.js

我正在使用带有 ember 的[X-editable](http://vitalets.github.com/x-editable/)库。单击按钮时，它会动态创建视图。在这种情况下，从这个角度来看，处理回调的正确方法是什么。我应该在我的视图上创建回调函数并使用钩子将它们连接到动态创建的视图`didInsertElement`吗？视图元素未在模板中声明，因此我无法使用操作将其连接起来。

这是我目前所拥有的一个例子。它工作正常，但我想知道是否有更好的方法：

```
App.NewsItemView = Ember.View.extend({
  templateName: 'cms/news_item',
  tagName: 'li',

  onDateSave: function(e, params) {
      self.get('content').set('date', params['newValue']);
  },

  didInsertElement: function() {

    var elementID = this.get('elementId');

    var editDate = $("#" + elementID + " .edit-date");

    editDate.editable({
      autotext: 'never',
      display: false,
      send: 'never'
    });

    var self = this;

    editDate.on('save', function(e, params) {
      self.onDateSave(e, params);
    });
  }
}); 
```

# c# - 如何使用 GDI+ 仅转换特定颜色的像素？

> ID：15637052
> 
> 赞同：4
> 
> 时间：2013-03-26T12:25:46.230
> 
> 标签：c#, .net, gdi+

假设我有一张由黑白 RGB 像素组成的图像，具有不同的透明度。然后我想使用 GDI+ 来保持所有像素的透明度级别，并将黑色像素转换为红色，而白色像素不受影响。

我认为颜色图看起来像：

```
 |0 0 0 0 0|
 |0 0 0 0 0|
 |0 0 0 0 0|
 |0 0 0 1 0|
 |1 0 0 0 1| 
```

但是，如果不依次循环遍历每个像素并测试其颜色，我可以将该映射仅应用于黑色像素吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T23:44:20.887

**回答你的主要问题：**没有办法使用矩阵来替换*特定的颜色*，因为矩阵只是**没有****条件的*****变换***。

 ****解决您的问题：**由于您使用的组合（黑白），**可以**使用矩阵！请看下面的详细答案...

**一个很好的参考：** [颜色变换和颜色矩阵](http://www.c-sharpcorner.com/UploadFile/mahesh/Transformations0512192005050129AM/Transformations05.aspx)。

* * *

您的矩阵猜测非常接近，但是，您并没有*保持*所有 RGBA 值不变。看看这里：

```
 R   G   B   A   W
 ___________________
| 1 | 0 | 0 | 0 | 0 |
| 0 | 1 | 0 | 0 | 0 |
| 0 | 0 | 1 | 0 | 0 |
| 0 | 0 | 0 | 1 | 0 |
| 1 | 0 | 0 | 0 | 1 |
 ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ 
```

通过对角线`1`，您**可以**保持当前的 RGBA 值。通过指定一个`1`on `[4][0]`，您还说您希望***该*值达到最大值**！

在您使用黑白的特定情况下，*仅替换黑色*将起作用，因为白色的 RGB 值已经达到最大值（255、255、255）。

因此，通过上述矩阵，您基本上是在说：*将所有 RGB 保持在当前值，**但**我也希望 Red**始终**为 255！*

* * *

使用序列（R、G、B、A）并应用上述规则的详细示例：最大红色 = 255，其他一切都相同。

*   找到 (0, 0, 0, 128) = 结果 (255, 0, 0, 128)；
*   找到 (0, 0, 0, 192) = 结果 (255, 0, 0, 192)；
*   找到 (255, 255, 255, 128) = 结果 (255, 255, 255, 128)；
*   找到 (255, 255, 255, 255) = 结果 (255, 255, 255, 255)；
*   等等

如您所见，Red 组件**始终**设置为最大值，其余部分保持不变。

* * *

示例图片：

![样本颜色转换](../Images/ac28050658928dca28a6e271a4d15a44.png)

左侧包含指定了 alpha 值的原始颜色，而右侧包含应用了上述转换的相同图像。左侧的圆圈按以下方式组织：

```
 R    G    B    A   |   R    G    B    A
               ______________________|_______________________
circle[0,0] = | (255,   0,   0,   0) | (255,   0,   0,  64) | = circle[0,1]
      [1,0] = | (  0,   0,   0,   0) | (  0,   0,   0,  64) | =       [1,1]
      [2,0] = | (255, 255, 255,   0) | (255, 255, 255,  64) | =       [2,1]
      [3,0] = | (255,   0,   0, 128) | (255,   0,   0, 255) | =       [3,1]
      [4,0] = | (  0,   0,   0, 128) | (  0,   0,   0, 255) | =       [4,1]
      [5,0] = | (255, 255, 255, 128) | (255, 255, 255, 255) | =       [5,1]
               ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ 
```

* * *

生成示例图像的 C# 代码：

```
using (Bitmap myBitmap = new Bitmap(102, 302))
{
    Graphics g = Graphics.FromImage(myBitmap);
    g.Clear(Color.Transparent);
    g.FillEllipse(new SolidBrush(Color.FromArgb(0, Color.Red)), new Rectangle(1, 1, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(0, Color.Black)), new Rectangle(1, 51, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(0, Color.White)), new Rectangle(1, 101, 50, 50));

    g.FillEllipse(new SolidBrush(Color.FromArgb(64, Color.Red)), new Rectangle(51, 1, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(64, Color.Black)), new Rectangle(51, 51, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(64, Color.White)), new Rectangle(51, 101, 50, 50));

    g.FillEllipse(new SolidBrush(Color.FromArgb(128, Color.Red)), new Rectangle(1, 151, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(128, Color.Black)), new Rectangle(1, 201, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(128, Color.White)), new Rectangle(1, 251, 50, 50));

    g.FillEllipse(new SolidBrush(Color.FromArgb(255, Color.Red)), new Rectangle(51, 151, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(255, Color.Black)), new Rectangle(51, 201, 50, 50));
    g.FillEllipse(new SolidBrush(Color.FromArgb(255, Color.White)), new Rectangle(51, 251, 50, 50));
    g.DrawRectangle(Pens.Black, 0, 0, myBitmap.Width - 1, myBitmap.Height - 1);

    e.Graphics.DrawImage(myBitmap, 0, 0);

    ColorMatrix colorMatrix = new ColorMatrix(
        new Single[][]
        {
            new [] { 1f, 0, 0, 0, 0 },
            new [] { 0f, 1, 0, 0, 0 },
            new [] { 0f, 0, 1, 0, 0 },
            new [] { 0f, 0, 0, 1, 0 },
            new [] { 1f, 0, 0, 0, 1 }
        });

    using (ImageAttributes imageAttr = new ImageAttributes())
    {
        imageAttr.SetColorMatrix(colorMatrix);

        Rectangle rect = new Rectangle(150, 0, myBitmap.Width, myBitmap.Height);
        e.Graphics.DrawImage(myBitmap, rect, 0, 0, myBitmap.Width, myBitmap.Height, GraphicsUnit.Pixel, imageAttr);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T10:10:41.950

黑色用 0 表示，白色用 1 表示

**要使您的数学仅**使用黑色像素，您应该执行以下操作：

1.  反转图像的颜色（不丢失透明度）。
2.  将白色（原始的黑色）转换为 Aqua（红色的反色）。
3.  将颜色反转回原来的颜色。

您在第 2 步中的颜色图将如下所示：

```
|0 0 0 0 0|
|0 1 0 0 0|
|0 0 1 0 0|
|0 0 0 1 0|
|0 0 0 0 1| 
```

* * *

现在的结果应该如下：

1.  黑色是红色。
2.  白色仍然是白色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T12:29:53.913

除了描述的其他技术之外，[颜色重映射表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533877%28v=vs.85%29.aspx)还可用于转换图像中特定的单个颜色（一个简短列表）。重映射表是传递给 Graphics 对象的 DrawImage 方法的 ImageAttributes 对象的一部分。从 MSDN 文档：

> 当 GDI+ 绘制图像时，图像的每个像素都会与旧颜色数组进行比较。如果像素的颜色与旧颜色匹配，则其颜色将更改为相应的新颜色。颜色仅在渲染时更改 - 图像本身的颜色值（存储在 Image 或 Bitmap 对象中）不会更改。**

# c++ - 设置整数的位数

> ID：15637055
> 
> 赞同：4
> 
> 时间：2013-03-26T12:26:01.073
> 
> 标签：c++, integer, int, iomanip

C++ 中有没有办法让编译器采用一定数量的数字，即使它们的第一个数字是 0。例如：

我有一个项目编号，即 00001，当我从文件中导入编号时，它显示 1。我希望它导入所有五位数字并显示为 00001。

我真的没有要显示的代码，因为我什至不知道要为此使用什么函数，而且我拥有的代码正在像宣传的那样工作，这不是我想要的。我可以将数字设为字符串，但我更愿意将其保留为整数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T12:29:35.803

用途[`std::setfill`](http://www.cplusplus.com/reference/iomanip/setfill/)及[`std::setw`](http://www.cplusplus.com/reference/iomanip/setw/)功能：

```
#include <iostream>
#include <iomanip>

int main()
{
    std::cout << std::setfill('0') << std::setw(5) << 1;
} 
```

输出：

```
00001 
```

请参阅相关问题：
[使用 cout << 运算符时，如何用前导零填充 int？](https://stackoverflow.com/q/1714515/1168156)
[使用 C++ 输出运算符打印前导零（等效于 printf）？](https://stackoverflow.com/q/530614/1168156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:57:55.320

物品编号之类的东西通常用作标识符；它们看起来像数字的事实令人分心。将它们存储为字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T12:33:35.740

基本上，没有。本机数据类型不包含任何格式信息。您需要自己跟踪格式。只有在需要输出数字时才需要格式化。

一种更容易的方法是为格式化数字创建一个类，在其中将数字与格式结合起来。

# c# - 擦除字符串中的字符

> ID：15637056
> 
> 赞同：1
> 
> 时间：2013-03-26T12:26:01.097
> 
> 标签：c#, string

我正在运行一个类，其工作是解析 html 文档以获取一些信息。

在我的一种情况下，我最终得到了这个字符串：

```
"\r\n                            First Name:" 
```

我想格式化字符串，以便我只有“名字：”，所以我这样做了：

```
string firstName = node.InnerText;

firstName = firstName.Replace(" ", "");
firstName = firstName.Replace("\\r", "");
firstName = firstName.Replace("\\n", "");
firstName.Trim(); 
```

但我最终得到了和以前一样的字符串。我对 mvc-app 比较陌生，我认为这可以完成这项工作，但事实并非如此。我怎样才能实现我的目标？

谢谢！

*** 编辑 ***

我已经修改了我的代码，以向您展示我到目前为止所做的事情，因为我想通知大家第一行有效，但其余的不行。我最终得到了这个字符串：

```
"\r\nFirst Name:" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:26:51.890

您**需要将结果分配回**firstName，因为字符串是不可变的，`string.Replace`因此**不会更改原始字符串**，而是会返回一个新字符串。

```
firstName = firstName.Replace(" ", "");
firstName = firstName.Replace("\r", "");
firstName = firstName.Replace("\n", ""); 
```

顺便说一句，您可以使用**[string.Trim](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)**：

```
string firstName = "\r\n                            First Name:";
firstName = firstName.Trim(); 
```

因为`String.Trim`将删除所有空格，包括字符串的开头`\r`和`\n`结尾

**编辑：**

您需要使用单反斜杠`\r`而不是双反斜杠`\\r`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T12:31:04.110

您可以使用[`String.TrimStart`](http://msdn.microsoft.com/en-us/library/system.string.trimstart.aspx)：

```
string firstName = "\r\n                            First Name:".TrimStart(); 
```

[**演示**](http://ideone.com/ZjeAEd)

[`String.TrimStart`](http://msdn.microsoft.com/en-us/library/system.string.trimstart.aspx)有效，因为`Environment.NewLine`属于删除[的空白字符](http://msdn.microsoft.com/en-us/library/system.char.iswhitespace.aspx)`TrimStart`。它返回一个新字符串（字符串是不可变的），因此您需要使用返回值并将其分配给您的变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T12:28:05.423

[`Trim()`](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)将从字符串的开头和结尾删除空格。

```
string firstName = node.InnerText.Trim(); 
```

我在 .NET 4.5 下对其进行了测试`Trim()`并删除了`\r\n`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T12:30:10.550

尝试这个：

```
firstName = firstName.Trim(); 
```

# javascript - 使用 jquery 调用 Finance.yahoo api

> ID：15637057
> 
> 赞同：1
> 
> 时间：2013-03-26T12:26:01.970
> 
> 标签：javascript, jquery, cordova, jquery-mobile, rhomobile

我想发送http请求以获取finance.yahoo股票数据，其网址如下： http: [//finance.yahoo.com/d/quotes.csv?](http://finance.yahoo.com/d/quotes.csv?s=GAIL.NS+BPCL.NS+%5ENSEI&f=snl1hgp) s=GAIL.NS+BPCL.NS+%5ENSEI&f=snl1hgp返回一个csv文件。我想读取响应数据并使用 Javascript 或 JQuery mobile 将其填充到列表视图中。我提到的链接都没有帮助我。

我尝试使用以下代码：

```
$.ajax({
    type: "GET",
    url: "http://finance.yahoo.com/d/quotes.csv",
    data: "s=GAIL.NS+BPCL.NS+%5ENSEI&f=snl1hgp",
    dataType: "text/csv",
    success: function(data) {
        alert(JSON.stringify('data is :' + data));
    }
}); 
```

我收到空白数据作为警报。任何示例代码或有用的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:32:16.247

我认为问题是请求是跨域的。这里还有另一个问题：

[跨域获取 CSV 文件](https://stackoverflow.com/questions/13755038/cross-domain-get-csv-file)

这里还有另一个答案：[Yahoo JSONP Ajax Request Wrapped in callback function](https://stackoverflow.com/questions/6567119/yahoo-jsonp-ajax-request-wrapped-in-callback-function)

和一个工作示例：[Displaying ajax results from yahoo Finance using underscore.js](https://stackoverflow.com/questions/14575323/displaying-ajax-results-from-yahoo-finance-using-underscore-js)

这是一个有效的 jsfiddle，它向 d.yimg.com 发出 jsonp 请求以获取数据 [http://jsfiddle.net/gp6zL/](http://jsfiddle.net/gp6zL/)

```
 YAHOO.Finance.SymbolSuggest.ssCallback = function (data) {
        alert(JSON.stringify(data));
    };
    var query;
    query = 'Google';
    if (query.length > 0) {

        $.ajax({
            type: "GET",
            url: "http://d.yimg.com/autoc.finance.yahoo.com/autoc",
            data: {
                query: query
            },
            dataType: "jsonp",
            jsonp: "callback",
            jsonpCallback: "YAHOO.Finance.SymbolSuggest.ssCallback",
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:39:39.180

我尝试将 jQuery 排除在外。只要您将“finance.yahoo.com”[列入白名单，以下代码就可以工作。](http://docs.phonegap.com/en/2.5.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

```
var request = new XMLHttpRequest();
request.open("GET", "http://finance.yahoo.com/d/quotes.csv?s=GAIL.NS+BPCL.NS+%5ENSEI&f=snl1hgp", true);
request.onreadystatechange = function() {//Call a function when the state changes.
    if (request.readyState == 4) {
        if (request.status == 200 || request.status == 0) {
            console.log(request.responseText);
        }
    }
}
request.send(); 
```

# javascript - 如何使用 jquery-i18n-properties 和 JavaScript 动态更改语言？

> ID：15637059
> 
> 赞同：3
> 
> 时间：2013-03-26T12:26:01.953
> 
> 标签：javascript, jquery, html, internationalization

我正在使用 jquery-i18n-properties 插件向我的网站提供 i18n。我已经更改了我的 HTML 并执行以下操作以加载所需的 .properties：

```
jQuery.i18n.properties({
    name: 'Messages', 
    path: 'bundle/', 
    mode: 'both',
    language: lang, 
    callback: function() {
        $("#msg_welcome").text(jQuery.i18n.prop('msg_welcome'));
        ...
    }
}); 
```

一切正常。我现在要做的是允许用户按下按钮更改语言。有没有办法只使用 javascript 或这个插件而不重新加载页面？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T12:40:30.307

是的，这很容易。事实上，在 jQuery.i18n.properties 网站 ( [http://codingwithcoffee.com/files/trunk/index.html](http://codingwithcoffee.com/files/trunk/index.html) ) 上有一个例子。

诀窍是，用新语言简单地重新初始化插件。将您当前的代码抽象到另一个函数中，该函数接受 lang 作为参数。使用一些默认语言进行初始化，一旦用户更改了当前语言，就将其传递给该函数。

```
function changeLang(lang) {
    jQuery.i18n.properties({
        name: 'Messages', 
        path: 'bundle/', 
        mode: 'both',
        language: lang, 
        callback: function() {
            $("#msg_welcome").text(jQuery.i18n.prop('msg_welcome'));
            ...
        }
    });
}

// somewhere else in your code
// change to english
changeLang('en_EN');
// change to other
changeLang('pt_PT'); 
```

# android - 在 AndroidManifest 中更改项目包名称

> ID：15637075
> 
> 赞同：0
> 
> 时间：2013-03-26T12:26:55.220
> 
> 标签：android, mobile, cordova

我有一个成功运行的项目。它是一个使用phonegap 的混合Web 应用程序，我使用了Phonegap 核心功能，并且我为某些功能创建了自己的插件。我刚刚更改了我的第一个活动类的包结构，在 Android Manifest XML 文件中也是如此。我正在使用命令提示符来更新项目并使用 ant 调试来制作 apk 文件。

APK 已成功创建，但是当我将其安装在设备上并打开项目时，某些功能无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:33:43.333

确保您在所有其他包中也更改了包名称，提示：查看您是否错过了在应用程序中缺少功能的任何文件中更改包名称。

# php - 从 PHP 使用 VB.NET Web 服务

> ID：15637076
> 
> 赞同：0
> 
> 时间：2013-03-26T12:26:58.610
> 
> 标签：php, .net, vb.net, web-services, soap

我对 PHP 比较陌生，对 VB.NET / Web 服务 / SOAP / XML 完全陌生，我无法让我的 PHP 与 VB.NET Web 服务通信。

这是我的 PHP 脚本：

```
<?php
    $client = new SoapClient("http://10.0.0.2/wsteste/Service1.asmx?wsdl");
    $param = array("usuario" => "name", "senha" => "test");
    $response = $client->__soapCall("HelloWorld", $param);  
    print_r($response);
?> 
```

这是 VB.NET asmx。

```
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel

' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
' <System.Web.Script.Services.ScriptService()> _
<System.Web.Services.WebService(Namespace:="http://tempuri.org/")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class Service1
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function HelloWorld(ByVal usuario As String, ByVal senha As String) As String
        Return usuario & " - " & senha
    End Function

End Class 
```

这是浏览器上打印的内容：

`stdClass Object ( [HelloWorldResult] => - )`

它应该返回`name - test`，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:40:38.317

我认为 PHP SOAP 客户端正在传递没有名称的参数。所以 usuario 和 senha 对 HelloWorld 方法没有任何意义。

我会尝试类似的东西

```
$client->HelloWorld(array("usuario"=>"name", "senha"=>"test")); 
```

不过已经测试过了。

编辑

从这个问题[Call asp.net web service from PHP with multiple parameters](https://stackoverflow.com/questions/9711502/call-asp-net-web-service-from-php-with-multiple-parameters)

像这样传递你的参数

```
$params->usuario = 'name';
$params->senha = 'test';
$client->HelloWorld($params); 
```

# mysql - 复合主键和 Auto_Increment

> ID：15637080
> 
> 赞同：4
> 
> 时间：2013-03-26T12:27:17.373
> 
> 标签：mysql, key, composite

我正在尝试使用其中一个自动递增来执行复合键，但是当我尝试输入新行时，它只是继续顺序。

这是发生的情况的示例：

```
Item_1 | Item_2
1     |   1    
1     |   2
2     |   3
2     |   4
2     |   5 
```

这是我想要的示例：

```
Item_1 | Item_2
1     |   1    
1     |   2
2     |   1
2     |   2
2     |   3 
```

我以这种方式创建表：

```
CREATE TABLE IF NOT EXISTS `usuarios` (
  `cod_user` int(11) NOT NULL AUTO_INCREMENT,
  `cod_user_emp` int(11) NOT NULL,
  PRIMARY KEY (`cod_user`,`cod_user_emp`),
  UNIQUE KEY `user` (`user`),
  KEY `cod_user` (`cod_user`)
  ); 
```

### 编辑

我解决了进行服务器端 php 验证的问题。

```
$result = $db->query("SELECT * FROM usuarios WHERE cod_user_emp=\"$emp\" ORDER BY cod_user DESC LIMIT 1");
while($row=$result->fetch_array()){
   $cod2 = $row['cod_user']+1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:34:21.317

删除该`AUTO_INCREMENT`列，

```
CREATE TABLE IF NOT EXISTS `usuarios` 
(
  `cod_user` int(11) NOT NULL,
  `cod_user_emp` int(11) NOT NULL,
  PRIMARY KEY (`cod_user`,`cod_user_emp`) -- <<== this is enough
); 
```

并且可以为`Stored Procedure`每个.`Item_2``Item_1`

```
DELIMITER $$
CREATE PROCEDURE InsertRecord(IN ItemA INT)
BEGIN
    SET @max_id =  (
                    SELECT COALESCE(MAX(Item_2), 0) + 1
                    FROM TableName
                    WHERE   Item_1 = ItemA
                    );
    INSERT INTO tableName(Item_1, Item_2)
    VALUES(ItemA, @max_id)
END $$
DELIMITER ; 
```

并这样称呼它，

```
CALL InsertRecord(2); 
```

# google-drive-api - 我无法从 https://developers.google.com/drive/quickstart-cs 编译源代码

> ID：15637084
> 
> 赞同：0
> 
> 时间：2013-03-26T12:27:23.107
> 
> 标签：google-drive-api

我无法从[https://developers.google.com/drive/quickstart-cs编译源代码](https://developers.google.com/drive/quickstart-cs)

> 1>d:\work\CSharp\ConsoleApplication1\Program.cs(22,27,22,49): 错误 CS1502: 'Google.Apis.Drive.v2.DriveService.DriveService(Google.Apis. Services.BaseClientService.Initializer)' 有一些无效参数
> 
> 1>d:\work\CSharp\ConsoleApplication1\Program.cs(22,44,22,48)：错误 CS1503：参数 1：无法从 'Google.Apis.Authentication.OAuth2.OAuth2Authenticator' 转换为 'Google.Apis. Services.BaseClientService.Initializer'

这两个错误用`var service = new DriveService(auth);`字符串引用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:43:17.880

最近发布的 .NET 客户端库 v1.3 beta 引入了一些向后不兼容的更改（[http://google-api-dotnet-client.blogspot.com/2013/03/announcing-release-of-130-beta.html](http://google-api-dotnet-client.blogspot.com/2013/03/announcing-release-of-130-beta.html)） ，[快速入门指南](https://developers.google.com/drive/quickstart-cs)刚刚更新以反映更改。

要解决此问题，您必须替换此行：

```
var service = new DriveService(auth); 
```

使用以下代码：

```
var service = new DriveService(new BaseClientService.Initializer()
{
    Authenticator = auth
}); 
```

您还需要添加`using Google.Apis.Services;`到您的进口清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:34:08.500

我有同样的问题 - [https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)也需要更新；）

# android - 使用 asynctask 时 QR 阅读器崩溃

> ID：15637088
> 
> 赞同：0
> 
> 时间：2013-03-26T12:27:35.287
> 
> 标签：android, android-asynctask, zxing

当我尝试扫描二维码时，我的应用程序正在关闭。我之前没有使用 asynctask，它工作正常，我想我对 asynctask 的工作方式有问题，任何建议都会受到欢迎。下面是我的日志

```
03-26 12:19:16.797: E/AndroidRuntime(1104): FATAL EXCEPTION: Thread-101
03-26 12:19:16.797: E/AndroidRuntime(1104): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.zxing.client.android.SCAN pkg=com.google.zxing.client.android (has extras) }
03-26 12:19:16.797: E/AndroidRuntime(1104):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)
03-26 12:19:16.797: E/AndroidRuntime(1104):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
03-26 12:19:16.797: E/AndroidRuntime(1104):     at android.app.Activity.startActivityForResult(Activity.java:3370)
03-26 12:19:16.797: E/AndroidRuntime(1104):     at android.app.Activity.startActivityForResult(Activity.java:3331)
03-26 12:19:16.797: E/AndroidRuntime(1104):     at com.example.restaurantapp.MainActivity$InitTask$1.run(MainActivity.java:68)
03-26 12:19:16.797: E/AndroidRuntime(1104):     at java.lang.Thread.run(Thread.java:856) 
```

这是我的主要活动

```
public class MainActivity extends Activity {
    Button btnScan;
    TextView result1;
    ImageView imgScan;
    InitTask scan;
    //@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //btnScan=(Button)findViewById(R.id.button1);
        imgScan=(ImageView)findViewById(R.id.imageButton1);

        imgScan.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    scan=new InitTask();
                    scan.execute();
                }

            });

    }
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                result1=(TextView)findViewById(R.id.textView1);
              String values = intent.getStringExtra("SCAN_RESULT");
              //String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
              result1.setText(values);
              Toast.makeText(MainActivity.this,
                        "Scan Result:" + values, Toast.LENGTH_LONG)
                        .show();
           } else if (resultCode == RESULT_CANCELED) {
                 Toast.makeText(MainActivity.this, "you cancelled scanning", Toast.LENGTH_LONG).show();
           }
        }
     }

    private class InitTask extends AsyncTask<Void,Void,Void>{

        protected Void doInBackground(Void...unused){

          new Thread(new Runnable() {
                 @Override
                 public void run() {

                     Intent intent = new Intent(
                             "com.google.zxing.client.android.SCAN");
                     intent.setPackage("com.google.zxing.client.android");
                     intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
                     startActivityForResult(intent, 0);
                 }
                }).start();
            return null;
        }
    }
} 
```

请帮忙，知道是什么原因造成的吗？谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:58:15.393

您根本不需要任何后台线程。既不是异步任务也不是线程。线程用于可能阻塞 UI 线程的长时间运行的操作，例如使用数据库或 http 请求运行查询。

在您的情况下，您正在为结果启动一个新活动，因此即使您的日志给您“此应用程序可能在其主线程上做了太多工作”，那么您开始的下一个活动更有可能在 Main 上做某事UI 线程，而不是您的主要活动。即使您确信应用异步任务，您也可能在错误的活动中执行此操作。这是因为在启动新 Intent 后，当前活动将进入 onPause() 并且主 UI 线程现在将用于扫描活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:32:42.683

```
protected Void doInBackground(Void...unused){

          new Thread(new Runnable() {
                 @Override
                 public void run() {

                     Intent intent = new Intent(
                             "com.google.zxing.client.android.SCAN");
                     intent.setPackage("com.google.zxing.client.android");
                     intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
                     startActivityForResult(intent, 0);
                 }
                }).start();
             return null; 
```

删除可运行线程 `doInBackground`（本身就是线程）

```
 protected Void doInBackground(Void...unused){

                         Intent intent = new Intent(
                                 "com.google.zxing.client.android.SCAN");
                         intent.setPackage("com.google.zxing.client.android");
                         intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
                         startActivityForResult(intent, 0);

                 return null; 
```

这是我第一眼看到的尝试实现它，看看它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:34:43.187

2件事需要做

1.  在 AndroidManifest.xml 文件中定义活动

    ```
    <activity
            android:name="com.google.zxing.client.android.CaptureActivity"
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="landscape"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="com.google.zxing.client.android.SCAN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
    </activity> 
    ```

2.  您必须在应用程序中包含 zxing lib，或者您必须在设备中安装 zxing 条码应用程序

作为 lib，您还需要将项目创建为 lib，然后在项目中包含 lib

**注意：最重要的是永远不要在 inBackground() 方法中执行任何具有 UI 实现的进程。这仅适用于后台进程，不适用于 UI 进程。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T12:36:11.293

在 MainFest

```
 <activity
        android:name="com.google.zxing.client.android.CaptureActivity"
        >
        <intent-filter>
            <action android:name="com.google.zxing.client.android.SCAN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

尝试这个

# c# - 项目集合构建错误记录器

> ID：15637092
> 
> 赞同：3
> 
> 时间：2013-03-26T12:27:53.867
> 
> 标签：c#, logging, build

我想知道如何`BuildResult`在运行时构建 C# 项目后得到错误。

目前我有这个：

```
string projectFileName = @"C:\Users\Inspire\Documents\Mono Projects\Library\Library\Library.csproj";
FileLogger fileLogger = new FileLogger();
fileLogger.Parameters = @"logfile=" + @"C:\Users\Inspire\Documents\Mono Projects\Library\Library\log.text";

ProjectCollection projectCollection = new ProjectCollection();
projectCollection.RegisterLogger(fileLogger);

Dictionary<string, string> GlobalProperty = new Dictionary<string, string>();       
GlobalProperty.Add("Configuration", "Debug");       
GlobalProperty.Add("Platform", "x86");

BuildRequestData buildRequest = new BuildRequestData(projectFileName, GlobalProperty, null, new string[] { "Build" }, null);
BuildResult buildResult = BuildManager.DefaultBuildManager.Build(new BuildParameters(projectCollection), buildRequest);
projectCollection.UnregisterAllLoggers();
Console.WriteLine(buildResult.OverallResult.ToString());

                    /* TODO: handle errors */ 
```

我想知道错误，以便在构建后处理它们（这里是注释部分“处理错误”），`FileLogger`如您所见，我添加了一个文件，但该文件始终为空（有或没有错误）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-24T17:37:10.470

这个有点晚了，但是对于其他尝试这样做的人，我遇到了同样的问题。出于某种原因，当您向 ProjectCollection 注册记录器时，它不会通过构造函数传递到 BuildParamters 对象中 - 经过检查，new BuildParameters(pc).loggers 为空。感觉就像是 hack，但我只是手动在 BuildParameter 对象上设置记录器集合，如下所示：

```
FileLogger fl = new FileLogger() { Parameters = @"logfile=somepath" };

Dictionary<string, string> GlobalProperty = new Dictionary<string, string>();
GlobalProperty.Add("Configuration", "Debug");
GlobalProperty.Add("Platform", "x86");

BuildRequestData BuildRequest = new BuildRequestData(slnPath, GlobalProperty, null, new string[] { "Build" }, null);

BuildParameters bp = new BuildParameters();
bp.Loggers = new List<Microsoft.Build.Framework.ILogger> { fl }.AsEnumerable();

BuildResult buildResult = BuildManager.DefaultBuildManager.Build(bp, BuildRequest); 
```

如果您使用此方法，请确保不要调用 pc.RegisterLogger，否则您将收到有关多个进程尝试访问日志文件的错误。

# javascript - 如何将字符串转换为 DOM 元素

> ID：15637094
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:28:04.580
> 
> 标签：javascript, string, dom

这可能已经被问过并回答过，或者在有人可以正确回答之前问题已经关闭。以防万一有人在这里搜索它是答案：

[https://developer.mozilla.org/en-US/docs/DOM/DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)

```
var parser = new DOMParser();
var doc = parser.parseFromString(stringContainingXMLSource, "application/xml");
// returns a Document, but not a SVGDocument nor a HTMLDocument

parser = new DOMParser();
doc = parser.parseFromString(stringContainingXMLSource, "image/svg+xml");
// returns a SVGDocument, which also is a Document.

parser = new DOMParser();
doc = parser.parseFromString(stringContainingHTMLSource, "text/html");
// returns a HTMLDocument, which also is a Document.

/*
 * DOMParser HTML extension
 * 2012-09-04
 *
 * By Eli Grey, http://eligrey.com
 * Public domain.
 * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
 */

/*! @source https://gist.github.com/1129031 */
/*global document, DOMParser*/

(function(DOMParser) {
    "use strict";

    var
      DOMParser_proto = DOMParser.prototype
    , real_parseFromString = DOMParser_proto.parseFromString
    ;

    // Firefox/Opera/IE throw errors on unsupported types
    try {
        // WebKit returns null on unsupported types
        if ((new DOMParser).parseFromString("", "text/html")) {
            // text/html parsing is natively supported
            return;
        }
    } catch (ex) {}

    DOMParser_proto.parseFromString = function(markup, type) {
        if (/^\s*text\/html\s*(?:;|$)/i.test(type)) {
            var
              doc = document.implementation.createHTMLDocument("")
            ;

            doc.body.innerHTML = markup;
            return doc;
        } else {
            return real_parseFromString.apply(this, arguments);
        }
    };
}(DOMParser)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:34:44.930

[https://developer.mozilla.org/en-US/docs/DOM/DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)

```
var parser = new DOMParser();
var doc = parser.parseFromString(stringContainingXMLSource, "application/xml");
// returns a Document, but not a SVGDocument nor a HTMLDocument

parser = new DOMParser();
doc = parser.parseFromString(stringContainingXMLSource, "image/svg+xml");
// returns a SVGDocument, which also is a Document.

parser = new DOMParser();
doc = parser.parseFromString(stringContainingHTMLSource, "text/html");
// returns a HTMLDocument, which also is a Document. 
```

一些浏览器不支持 text/html 所以这里是来自 MDN 站点的额外代码来添加对 text/html 的支持

```
/*
 * DOMParser HTML extension
 * 2012-09-04
 *
 * By Eli Grey, http://eligrey.com
 * Public domain.
 * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
 */

/*! @source https://gist.github.com/1129031 */
/*global document, DOMParser*/

(function(DOMParser) {
    "use strict";

    var
      DOMParser_proto = DOMParser.prototype
    , real_parseFromString = DOMParser_proto.parseFromString
    ;

    // Firefox/Opera/IE throw errors on unsupported types
    try {
        // WebKit returns null on unsupported types
        if ((new DOMParser).parseFromString("", "text/html")) {
            // text/html parsing is natively supported
            return;
        }
    } catch (ex) {}

    DOMParser_proto.parseFromString = function(markup, type) {
        if (/^\s*text\/html\s*(?:;|$)/i.test(type)) {
            var
              doc = document.implementation.createHTMLDocument("")
            ;

            doc.body.innerHTML = markup;
            return doc;
        } else {
            return real_parseFromString.apply(this, arguments);
        }
    };
}(DOMParser)); 
```

**IE8及以下**

IE8及以下的一些浏览器没有DOMParser，可以通过以下方式将字符串解析为HTML：

```
var div=document.createElement("div");
div.innerHTML=HTMLString;
var anchors=div.getElementsByTagName("a"); 
```

# c++ - 如何在 Linux 中检测 unicode 文件名

> ID：15637097
> 
> 赞同：2
> 
> 时间：2013-03-26T12:28:06.450
> 
> 标签：c++, unicode

我有一个用 C++ 编写的 Windows 应用程序。在此，我们使用 wcstombs() 函数检查文件名是否为 unicode。如果转换失败，我们假设它是 unicode 文件名。同样，当我在 Linux 中尝试相同时，转换不会失败。我知道在 Windows 中，默认字符集是 LATIN，而 Linux 的默认字符集是 UTF8。根据文件名是否为 unicode，我们有不同的编码集。由于我无法在 Linux 中弄清楚，我无法使我的应用程序可移植到 Unicode 字符。有没有其他解决方法或者我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:33:38.797

utf-8 有一个很好的属性，即所有 ascii 字符都表示为 ascii，所有非 ascii 字符表示为[两个或多个字节的序列 >=128](http://en.wikipedia.org/wiki/UTF-8#Description)。所以你只需要检查 ascii 就是无符号字节的数值大小。if >=128，则非ascii，以utf-8为基本编码表示“unicode”（即使在latin-1范围内，注意latin-1是unicode的真子集，构成前256码点）。

* * *

但是，请注意，虽然在 Windows 中文件名是一个*字符序列*，但在 *nix 中它是一个*字节序列*。

因此，理想情况下，您应该真正忽略这些字节可能编码的内容。

可能很难与天真的用户的观点相协调，尽管

# php - 使用 AJAX 将变量传递给 PHP 并再次使用 AJAX 检索这些变量

> ID：15637101
> 
> 赞同：17
> 
> 时间：2013-03-26T12:28:35.180
> 
> 标签：php, jquery, ajax

我想将值传递给 PHP 脚本，所以我使用 AJAX 来传递这些值，并且在同一个函数中，我使用另一个 AJAX 来检索这些值。

问题是第二个 AJAX 没有从 PHP 文件中检索任何值。为什么是这样？如何存储传递给 PHP 脚本的变量，以便第二个 AJAX 可以检索它？

我的代码如下：

AJAX 代码：

```
$(document).ready(function() {    
    $("#raaagh").click(function(){    
        $.ajax({
            url: 'ajax.php', //This is the current doc
            type: "POST",
            data: ({name: 145}),
            success: function(data){
                console.log(data);
            }
        });  
        $.ajax({
            url:'ajax.php',
            data:"",
            dataType:'json',
            success:function(data1){
                var y1=data1;
                console.log(data1);
            }
        });
    });
}); 
```

PHP代码：

```
<?php
$userAnswer = $_POST['name'];    
echo json_encode($userAnswer);    
?> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-26T12:30:48.660

用于数据`dataType:"json"`_`json`

```
$.ajax({
     url: 'ajax.php', //This is the current doc
     type: "POST",
     dataType:'json', // add json datatype to get json
     data: ({name: 145}),
     success: function(data){
         console.log(data);
     }
}); 
```

阅读文档[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

也在**PHP中**

```
<?php
  $userAnswer = $_POST['name']; 
  $sql="SELECT * FROM <tablename> where color='".$userAnswer."'" ;
  $result=mysql_query($sql);
  $row=mysql_fetch_array($result);
  // for first row only and suppose table having data
  echo json_encode($row);  // pass array in json_encode  
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:00:21.300

```
$(document).ready(function() {
    $("#raaagh").click(function() {
        $.ajax({
            url: 'ajax.php', //This is the current doc
            type: "POST",
            data: ({name: 145}),
            success: function(data) {
                console.log(data);
                $.ajax({
                    url:'ajax.php',
                    data: data,
                    dataType:'json',
                    success:function(data1) {
                        var y1=data1;
                        console.log(data1);
                    }
                });
            }
        });
    });
}); 
```

像这样使用，首先进行 ajax 调用以获取数据，然后您的 php 函数将返回您将在数据中获取的结果并将该数据传递给新的 ajax 调用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:32:03.717

无需使用第二个 ajax 函数，您可以在函数内成功返回它，这里的另一个问题是您不知道第一个 ajax 调用何时完成，那么，即使您使用 SESSION 您也可能无法在第二个 AJAX 内得到它称呼。

所以，我建议使用一个 AJAX 调用并成功获得价值。

示例：在第一个 ajax 调用中

```
 $.ajax({
        url: 'ajax.php', //This is the current doc
        type: "POST",
        data: ({name: 145}),
        success: function(data){
            console.log(data);
            alert(data);
            //or if the data is JSON
            var jdata = jQuery.parseJSON(data);
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T18:48:15.597

在您的 PhP 文件中，将有一个名为的变量`$_REQUEST`，它包含一个数组，其中包含使用 AJAX 从 Javascript 发送到 PhP 的所有数据。

试试这个：`var_dump($_REQUEST);`并检查您是否收到了这些值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-12T04:38:03.303

你必须用单引号传递值

```
$(document).ready(function() {    
    $("#raaagh").click(function(){    
        $.ajax({
            url: 'ajax.php', //This is the current doc
            type: "POST",
            data: ({name: '145'}), //variables should be pass like this
            success: function(data){
                console.log(data);
                           }
        });  
        $.ajax({
    url:'ajax.php',
    data:"",
    dataType:'json',
    success:function(data1){
            var y1=data1;
            console.log(data1);
            }
        });

    });
}); 
```

试试看它可能会工作.......

# mercurial - 如何在 Mercurial 存储库中找到具有多个父项的所有提交？

> ID：15637103
> 
> 赞同：2
> 
> 时间：2013-03-26T12:28:43.457
> 
> 标签：mercurial

我正在研究开源项目中的合并。

对于 repo 中的每个合并，我需要找到基础（最近的共同祖先）、两个贡献者以及生成的合并提交。

我已经知道如何获取最近的共同祖先（`hg debugancestor rev1 rev2`或`hg log -r 'ancestor(rev1, rev2)'`）和贡献者，但是我在识别合并操作导致的提交时遇到问题。

如何在 Mercurial 存储库中找到具有多个父级的所有提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:41:05.460

使用`merge()`revset 或`-m`命令 tail 来`hg log`

```
hg log -r 'merge()' 
```

或者

```
hg log -m 
```

# c# - 如何使用 c# 比较两个列表，如果我在两个列表中找到相同的项目 [No Duplication] 添加日志

> ID：15637106
> 
> 赞同：3
> 
> 时间：2013-03-26T12:29:03.497
> 
> 标签：c#, asp.net, list

我想比较两个列表，比如说 A 和 B。我不知道比较它们的正确方法！

我使用了 foreach 循环 [嵌套]，这会导致重复 [正在考虑排列/组合，这不是必需的。]

例如。

```
 foreach( A a in A_list)
   {
   foreach( B b in B_list)
     {
      if(a==b)
      {
       addlog(a);
      }
     }
   } 
```

请指导我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:32:58.610

您可以根据自己的需要使用`Intersect`或方法。`Except`例如：

```
var commonValues = A.Intersect(B);  
var aMembersNotInB = A.Except(B); 
var bMembersNotInA = B.Except(A); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T12:33:46.257

```
var commonElements = A.Intersect(B); 
foreach(var element in commonElements)
{
     //your processing.
} 
```

如果要定义自己的相等条件，可能需要实现[IEquatable 。](http://msdn.microsoft.com/en-us/library/ms131187.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T12:34:07.513

你可以使用[`Enumerable.Intersect`](http://msdn.microsoft.com/en-us/library/bb460136.aspx)方法。

> 通过使用默认相等比较器比较值来生成两个序列的集合交集。

```
var newlist = A_list.Intersect(B_list); 
foreach(var i in newlist)
{
  // do your work
} 
```

这是一个[`DEMO`](http://ideone.com/9KhvRE).

# javascript - 以安全的方式将 JS 数据保存到数据库中

> ID：15637109
> 
> 赞同：3
> 
> 时间：2013-03-26T12:29:09.687
> 
> 标签：javascript, security, client

我将把这篇文章分成几段，以便更容易地引用特定的内容。

1.  我在 html 中制作了一个简单的按钮，每次按下按钮时都会加上一个 1 的数字。这个函数是用 Javascript 编写的。这个数字必须每 20 秒输入一次数据库。

2.  由于 Javascript 在客户端运行，每个访问者都可以更改当前按下按钮的次数，然后该“假”数字将在 20 秒后发送到数据库。

3.  用户不应更改此号码，因为这被视为作弊。

4.  我可以使用其他语言来完成此操作，例如 java、flash 等，但我需要使其与在客户端运行的 Javascript/Jquery 一起工作。这样做的原因是，如果每次按下按钮时都向服务器发送请求，服务器会花费太多时间。

我希望你理解所有 4 个步骤，如果没有，请告诉我我将深化哪一步。

问题：如何在用户无法在其计算机上更改该号码的情况下，以一种安全的方式处理从客户端到数据库的号码？如果我不能，还有其他建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:33:59.600

首先，您的计数器应该在您的服务器上。不要让客户端告诉您按钮被按下了多少次 - 自己将其存储在服务器上（没有人可以到达的地方）。

这意味着每次用户单击按钮时您都必须通知服务器。此外，您需要确保每次“点击”都是有效的。您可以通过为每个按钮单击附加一个唯一键来做到这一点。一旦用户单击按钮，该密钥将被发送到服务器并进行验证。如果有效，服务器将在下次单击按钮时返回要发送的新密钥。

* * *

您应该知道，编写一个简短的 jQuery 脚本来操作对 DOM 元素的点击非常容易。一个简单的命令

```
setInterval(function(){
  $('button').trigger('click');
},500); 
```

每 500 毫秒（0.5 秒）触发一次按钮上的点击事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:35:51.890

在 JavaScript 中运行的代码实际上无法防止“作弊”。您最好的选择可能是数据隐藏：

```
var myobj = (function() {
    var i = 0;

    return {
        function setI(newvalue) {
            // do checks here
            if (true) {
                i = newvalue;
            }
        },
        function sendI() {
            // send value of i
        }
    }
}());

myobj.setI(123);
myobj.sendI();
myobj.i // undefined 
```

不过，将防止数据篡改的逻辑移动到服务器会更好。

# c# - 如何解除对 JPG 文件的锁定

> ID：15637112
> 
> 赞同：0
> 
> 时间：2013-03-26T12:29:22.340
> 
> 标签：c#, jpeg

我正在使用 Microsoft.Office.Interop.MailItem 从电子邮件中删除附件，将它们保存到磁盘，打印出来，然后从磁盘中删除它们。我在删除 JPG 附件时遇到问题，文件似乎有锁，

这是我保存每个附件的代码，

```
foreach (Attachment attachment in outLookMessage.Attachments)
{
    var fileNameOnDisk = FileNameOnDisk(printFileFolder, attachment.FileName);

    attachment.SaveAsFile(fileNameOnDisk);
} 
```

我不确定为什么 JPG 文件会被锁定。有什么办法可以释放这个日志以便我可以删除文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:35:46.620

我会`attachment.Dispose()`在删除它们之前尝试使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:45:27.300

最可能的原因是该文件已经存在（并且被保留）或者您没有执行该操作的权限。第一个几乎肯定是这样的

如果文件存在，*为什么*要覆盖它？这可能不是您想要做的。最好在编写之前检查文件是否存在以及它是否被锁定，并在需要时更改名称。 [这个问题的第二个答案](https://stackoverflow.com/questions/1304/how-to-check-for-file-lock-in-c)有一些代码用于找出文件是否被锁定（更具体地说，不仅仅是 IOException）。

关于克里斯对问题的评论（好主意，克里斯），如果文件存在，被锁定并且长度为 0，那么在 FileNameOnDisk 中很可能是你自己的错。如果您要返回路径（最好），请关闭您打开的内容，或者使用共享读/写打开它并返回文件流并在完成后关闭它（不是最好的）。

# windows - ShowWindow 和 ShowWindowAsync 有什么区别？

> ID：15637124
> 
> 赞同：6
> 
> 时间：2013-03-26T12:29:44.437
> 
> 标签：windows, winapi

我想知道这两种 Windows API 方法有什么区别？

什么情况下需要调用ShowWindowAsync？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:47:17.937

ShowWindow() 设置调用线程创建的窗口的可见性状态，当调用线程没有创建窗口时使用 ShowWindowAsync()。

从不同线程更改窗口的可见性状态时，您需要在*多线程应用程序中使用*[ShowWindowAsync() 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633549%28v=vs.85%29.aspx)

# ruby-on-rails-3 - Rails 3 和 update_attributes

> ID：15637125
> 
> 赞同：0
> 
> 时间：2013-03-26T12:29:45.210
> 
> 标签：ruby-on-rails-3, activerecord

我正在将应用程序从 Rails 2.2.2 移动到 Rails 3。我有一个用于更新用户信息的表单，该表单在 Rails 2 中功能齐全，但在 Rails 3 中中断

提交表单时，会调用一个创建用户对象的方法，然后尝试像这样进行更新：

```
if @user.update_attributes params[:user] ## line 126 
```

然后控制器抛出这个异常：

```
undefined method `update_attributes' for #<ActiveRecord::Relation:0xacfc178>

in: app/controllers/admin_controller.rb:126:in `save_user' 
```

所以看起来 Rails 3 中的 ActiveRecord 正在返回不同类型的对象？一个不继承 update_attributes 的？我该如何解决？

这是有问题的完整控制器方法：

```
def save_user
@needs_password_gen = "YES"
@user = B2bUser.where("id = ?",params[:id])

@needsAPICredentials = false

##### Make sure thay gave us an email address
if !params[:user][:email] || !validEmailAddress(params[:user][:email].to_s)
  flash[:warning] = "Valid email address is required."
  redirect_to :controller => "admin/edit_user/#{@user.id}" and return
end

@user.first.update_attributes params[:user] 
```

结尾

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:23:22.593

看起来您的 @user 对象可能是一个数组。您可能正在使用 :where 进行查询并且忘记将其从数组中弹出。尝试这个：

```
@user.first.update_attributes params[:user] 
```

# r - 如何在 data.table 中引用以数字开头的列名

> ID：15637132
> 
> 赞同：9
> 
> 时间：2013-03-26T12:30:11.347
> 
> 标签：r, data.table

如果中的列名采用`data.table`的形式`number + character`，例如：`4PCS`等`5Y`，那么如何将其引用为`j`in`x[i,j]`以便将其解释为未加引号的列名。

我认为这将解决我原来的问题。我想在“data.table”中添加几列，格式为`number + character`。

```
M <- data.table('4PCS'=1:4,'5Y'=4:1,X5Y=2:5)
> M[,4PCS+5Y]
Error: unexpected symbol in "M[,4PCS" 
```

新列应该是 和 的`4PSC`总和`5Y`。

有没有办法以`data.table`不引用的形式引用它们？如果这些列是`data.table`用引用的“逻辑”引用的`data.frame`：

```
> M[,'5Y',with=FALSE]
     5Y
[1,]  4
[2,]  3
[3,]  2
[4,]  1 
```

那么此类参考的功能将受到限制。添加不起作用，因为它不起作用`data.frame`：

```
> M[,'4PCS'+'5Y',with=FALSE]  
Error in "4PCS" + "5Y" : non-numeric argument to binary operator 
```

该`data.table`功能将允许对列进行操作。我想在新`data.table`逻辑中找到一个解决方案，因此我可以使用它通过*列名引用*来转换列的能力。

问题是：
如何*引用*以数字开头的列名，以便 data.table 逻辑理解它是列名。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T12:35:00.910

我想，这就是你要找的，不确定。*不同于*. `data.table`_ _ 请查看[**快速介绍**](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.pdf)，然后查看[**常见问题解答**](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-faq.pdf)（如果需要，还可以查看参考手册）。*`data.frame`[](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.pdf)**[](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-faq.pdf)***

 *****```
require(data.table)
dt <- data.table("4PCS" = 1:3, y=3:1)
#    4PCS y
# 1:    1 3
# 2:    2 2
# 3:    3 1

# access column 4PCS
dt[, "4PCS"]

# returns a data.table
#    4PCS
# 1:    1
# 2:    2
# 3:    3

# to access multiple columns by name
dt[, c("4PCS", "y")] 
```

或者，如果您需要访问该列而*不是*生成一个`data.table`，而是一个向量，那么您可以使用以下`$`符号进行访问：

```
dt$`4PCS` # notice the ` because the variable begins with a number
# [1] 1 2 3

# alternatively, as mnel mentioned under comments:
dt[, `4PCS`] 
# [1] 1 2 3 
```

或者，如果您知道列号，您可以使用`[[.]]`如下方式访问：

```
dt[[1]] # 4PCS is the first column here
# [1] 1 2 3 
```

* * *

**编辑：**

谢谢@joran。我想你正在寻找这个：

```
dt[, `4PCS` + y]
# [1] 4 4 4 
```

从根本上说，问题在于这`4CPS`不是 R 中的有效变量名（尝试`4CPS <- 1`，您将得到相同的“意外符号”错误）。所以要引用它，我们必须使用反引号（比较``4CPS` <- 1`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-18T14:14:34.643

您还可以在要调用的变量名称之前放置一个“X”，以使 R 将其识别为名称，而不是将数字和字符串评估为不同的（因此语法错误）

所以例如当调用 4PCS 时使用 X4PCS

如在

我的数据 <- X4PCS*****

# angularjs - 角度中的不安全链接

> ID：15637133
> 
> 赞同：25
> 
> 时间：2013-03-26T12:30:12.680
> 
> 标签：angularjs

在 AngularJS 中，在以下场景中，Firefox 会将`unsafe:`按以下方式生成的 url 放在前面。然后它会显示一个错误页面，上面写着“地址不被理解”。这是我本地 PC 上的文件请求。

关联：

```
<li ng-repeat="fruit in fruits">
    <a href="{{ fruit.link }}">{{ fruit.title }}</a>
</li> 
```

大批：

```
$scope.fruits = [
    {   "title"     :   "Orange",
        "link"      :   "fruits_orange.html"  }
]; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-26T12:56:23.103

您会看到此提交的副作用： [https](https://github.com/angular/angular.js/commit/9532234bf1c408af9a6fd2c4743fdb585b920531) ://github.com/angular/angular.js/commit/9532234bf1c408af9a6fd2c4743fdb585b920531 ，旨在解决一些安全隐患。

此提交为 url 引入了一个非向后兼容的更改`file://`（随后在[https://github.com/angular/angular.js/commit/7b236b29aa3a6f6dfe722815e0a2667d9b7f0899中放宽了](https://github.com/angular/angular.js/commit/7b236b29aa3a6f6dfe722815e0a2667d9b7f0899)

我假设您使用的是 1.0.5 或 1.1.3 AngularJS 版本之一。如果是这样，您可以通过如下配置重新启用对`file://`URL 的支持`$compileProvider`：

```
angular.module('myModule', [], function ($compileProvider) {

  $compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file):/);

}); 
```

或者在 Angular 1.2.8 及更高版本中：

```
angular.module('myModule', [], function ($compileProvider) {

  $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file):/);

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-08T00:03:59.667

将白名单添加到您的控制器。

对于 Angular.js 1.2：

```
app.config(['$compileProvider', function($compileProvider) {
    $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|file|tel):/);
}]); 
```

对于 Angular 1.1.x 和 1.0.x，使用`urlSanitizationWhitelist`. 请参阅[参考资料](http://blog.berylliumwork.com/2013/09/avoid-angularjs-from-adding-unsafe-tag.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-02T12:36:47.173

```
 angular.module('somemodule').config(['$compileProvider' , function ($compileProvider)
    {
          $compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto):/);
    }]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-31T22:24:19.473

我正在使用`angular 1.4.0`并且以下格式有效：

```
ng-href="http://{{baseURLHref}}{{baseURLPort}}/routingPathName" 
```

添加`http://`开头`ng-href`有助于摆脱`unsafe`附加的`ng-Sanitize`

*   如果您在`https`，那么硬编码所有内容应该不是问题。
*   但是，如果您的系统必须在两种环境下工作，您可能需要使用来自的协议检测`location.protocol`

我正在设置变量`$rootScope`（它们有助于解决从我的站点消耗 css 的代理服务器的问题）

```
angular.module('myApp').run(function ($route, $rootScope, $location) {
    $rootScope.baseURLHref = '';
    $rootScope.baseURLPort = '';
    if($location.host() != 'localhost'){
      $rootScope.baseURLHref = $location.host();
      $rootScope.baseURLPort = ':' + $location.port();
    }
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-06T07:55:53.607

```
<a href="{{applicant.resume}}" download> download resume</a>

var app = angular.module("myApp", []);

    app.config(['$compileProvider', function($compileProvider) {
         $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|local|data|chrome-extension):/);
        $compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|local|data|chrome-extension):/);

        }]); 
```

# cocos2d-iphone - 我可以通过滑动手势或拖动来切换场景吗？

> ID：15637134
> 
> 赞同：1
> 
> 时间：2013-03-26T12:30:13.750
> 
> 标签：cocos2d-iphone

我可以通过滑动手势或拖动来切换场景吗？在我的游戏中，有三个主要场景，每个场景都有几个图层，其中有一些ui元素，这些元素有一些点击手势。这是我第一次在stackoverflow上提问，所以这是图片的链接： [在此处输入链接描述](http://cc.cocimg.com/bbs/attachment/Fid_18/18_211485_db69684c5ee17e0.jpg)

我已经知道一些切换场景的方法，例如“replaceScene”，或者通过一些过渡方式，例如“CCTransitionMoveInT”，那么滑动场景是否可行？如果不是，为什么？如果是，是否有可能导致我的游戏应用程序崩溃的内存增加？感谢男士们的宝贵时间。

# excel - 将范围从多个工作表复制到单个工作表

> ID：15637135
> 
> 赞同：1
> 
> 时间：2013-03-26T12:30:17.463
> 
> 标签：excel, vba

有人可以帮助使用 vba 代码将多个工作表（52 周）中的范围复制到同一工作簿中的摘要表中。每个工作表中的范围都相同。我希望将数据复制并粘贴到摘要工作表的 52 列中，从第 1 周到第 52 周。

我在网上找到了这段代码：

```
Sub SummurizeSheets()
    Dim ws As Worksheet
    Application.ScreenUpdating = False
    Sheets("Summary").Activate
    For Each ws In Worksheets
        If ws.Name <> "Summary" Then
            ws.Range("F46:O47").Copy
            Worksheets("Summary").Cells(Rows.Count, 1).End(xlUp).Offset(1, 0).PasteSpecial (xlPasteValues)
        End If
    Next ws
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:43:32.260

试试下面的代码。同时设置 **Application.ScreenUpdating = True**。

```
Sub SummurizeSheets()
    Dim ws As Worksheet
    Dim j As Integer, col As Integer

    Application.ScreenUpdating = False

    Sheets("Summary").Activate

    For Each ws In Worksheets
        If ws.Name <> "Summary" Then
            ws.Range("k3:k373").Copy

            col = Worksheets("Summary").Range("IV1").End(xlToLeft).Column + 1
            Worksheets("Summary").Cells(1, col).PasteSpecial xlPasteValues
            Application.CutCopyMode = False

        End If

    Next ws
    Columns(1).Delete
    Range("A1").Activate
    Application.ScreenUpdating = True
End Sub 
```

# javascript - Javascript按钮onclick函数未定义

> ID：15637138
> 
> 赞同：2
> 
> 时间：2013-03-26T12:30:30.307
> 
> 标签：javascript, jquery, html, function, cordova

我目前正在使用PhoneGap，由于某种原因，当我单击一个按钮时，该功能未定义。iv 尝试将它放在 deviceReady 函数以及文档就绪函数中，但似乎都没有任何区别。

我看不出问题出在哪里，如果有人可以提供帮助，那就太好了。

**我的 HTML：**

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.3.0.min.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.theme-1.3.0.min.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <script type="text/javascript" src="cordova-2.5.0.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/libary.js"></script>
        <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.3.0.min.js"></script>
      <title>Libary</title>
    </head>
    <body>
      <div id="capture" class="wrapper" data-role="page">
        <div data-role="header">
          <h1>Libary</h1>
        </div>
        <div data-role="content" class="app">
          <a href="#" data-role="button" onclick="retrievePicture();">Retrieve Photo</a>
          <p id="pictureStatus"></p>
          <div id="imagelocation">
            <img id="capturedImage"></img>
          </div>
        </div>
      </div>
    </body>
</html> 
```

**我的 JavaScript/jQuery：**

```
document.addEventListener("deviceready", onDeviceReady, false);
var platform;

function onDeviceReady() {
    //Find out what platform the device is running
    platform = device.platform;

    //Camera Section
    function retrievePicture() {
          // Take a picture using device camera and retrieve image
          //navigator.camera.getPicture(onCaptureSuccess, onCaptureFail, {Camera.sourceType = Camera.PictureSourceType.PHOTOLIBRARY});
            $('#pictureStatus').text("hello");
    }

    function onCaptureSuccess(imageData) {
        $('#capturedImage').css("display", "block");
        var imageLocation = imageData;
        $('#capturedImage').attr("src", imageLocation);
        $('#pictureStatus').text(imageLocation);
    }

    function onCaptureFail(message) {
        $('#pictureStatus').text(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:32:14.027

请不要在这样的函数中定义函数。`retrievePicture()`从函数内部删除你的`onDeviceReady()`，它应该可以正常工作。

正如@Robin van Baalen 所提到的，这可能是一本有趣且相关的读物——[你需要了解的关于 Javascript 作用域的知识](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)。

此外，[Functions 和 function scope](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)。

# linux - 在缓存中保存文件并将其修改时间修改为过去是否安全？

> ID：15637149
> 
> 赞同：0
> 
> 时间：2013-03-26T12:30:48.597
> 
> 标签：linux, caching, filemtime

想象一下Linux机器上某些进程的基于文件的缓存。

*   仅当源数据发生更改时，我们才进行该过程（消耗资源）。
*   每次查询结果时，我们都会检查基础数据是否已更改。
*   如果数据发生变化，我们会处理数据并保存缓存。
*   通过查询文件修改时间（源数据和缓存文件）来检查更改和缓存新鲜度（如果在上次更改之后创建）。

棘手的部分：这个过程需要一些时间——在我们处理数据时，数据可能会发生变化。将缓存的修改时间更改为其创建查询时间是否安全？

它是这样的：

1.  源数据在 20:00:01 更改。
2.  查询出现在 20:00:05 - 我们正在重新创建缓存。
3.  20:04:15 结束。
4.  保存缓存。
5.  将缓存文件的修改时间更改为 20:00:05（以表明 20:00:05 之后的每次更改都不算在内）。

安全吗？对于备份、部署、源代码控制......这种解决方案在哪些情况下可能会产生问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:34:31.597

不。安全的解决方案是将具有临时名称的文件写入同一目录，然后在将所有数据写入其中*后重命名。*

1.  这样，您将永远不会有不完整/截断的文件
2.  如果出现错误，原始数据仍将完好无损
3.  对于错误处理，您只需要删除临时文件

它还解决了备份、源代码控制的所有问题：您可以让他们忽略临时文件。

# linq - 使用 Linq 获得最大值？

> ID：15637152
> 
> 赞同：-2
> 
> 时间：2013-03-26T12:31:00.160
> 
> 标签：linq

嗨，我是 linq 的新手，我正在尝试找到整数可以容纳的最大尺寸。

```
Dim Max As Integer = Convert.Int32((From a In mytable Order By a.Item("myValue") Select a.Item("Integer"))).MaxValue 
```

它似乎不起作用？我问了一个朋友，他说要使用 linq，但我以前从未使用过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:34:00.020

您在这里有一个完整的 VB 示例：http: [//msdn.microsoft.com/en-us/vstudio/bb737922#maxsimp](http://msdn.microsoft.com/en-us/vstudio/bb737922#maxsimp)

# map - OSM：如何为给定区域下载一层？（水，湖泊）

> ID：15637154
> 
> 赞同：1
> 
> 时间：2013-03-26T12:31:03.807
> 
> 标签：map, gis, openstreetmap, qgis

我在做一个GIS地图，一切准备就绪，但我还需要河流和湖泊。

**1\. 在哪里可以找到 OSM 上所有层的列表？**

**2\. 如何/在哪里下载给定区域的一层？**（水、湖泊/国家）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:16:02.117

[OSM 的主要数据格式](http://wiki.openstreetmap.org/wiki/OSM_XML)没有等效于“层”的 GIS 概念。相反，一切都在一起，“标签”用于识别不同的特征。

您可以[从 Geofabrik 下载按国家/地区的 OSM 下载](http://download.geofabrik.de/)。

那么你可能会考虑：

*   使用[osmosis](http://wiki.openstreetmap.org/wiki/Osmosis)过滤 XML 数据，例如过滤具有标签的对象`water=*`
*   或者，获取 OSM 数据转储并使用[osm2pgsql](http://wiki.openstreetmap.org/wiki/Osm2pgsql)将数据转换为我认为涉及图层的 postGIS 数据库。

# spring - 自定义 HTTP 错误 404 - 基于注释的设置 Spring 3.2

> ID：15637157
> 
> 赞同：2
> 
> 时间：2013-03-26T12:31:06.667
> 
> 标签：spring, spring-mvc, http-status-code-404, http-error

是否可以使用 Spring 3.2.1 实现基于注释的自定义 HTTP 404 错误页面？我在各种论坛中寻找方法，但找不到任何明确的答案。

我也尝试使用 web.xml 进行配置，但是当我访问未映射的 URL 时它不起作用。请问有什么帮助吗？

日志输出

```
 7259 [DEBUG] org.springframework.web.servlet.DispatcherServlet  - DispatcherServlet with name 'spring-test' processing GET request for [/spring-test/ss]
  7261 [DEBUG] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  - Looking up handler method for path /ss
  7262 [DEBUG] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  - Did not find handler method for [/ss]
  7262 [WARN ] org.springframework.web.servlet.PageNotFound  - No mapping found for HTTP request with URI [/spring-test/ss] in DispatcherServlet with name 'spring-test'
  7262 [DEBUG] org.springframework.web.servlet.DispatcherServlet  - Successfully completed request 
```

web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="rest" version="3.0" metadata-complete="true">

    <!-- The definition of the Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>main.java.net.bornil.config</param-value>
    </context-param>   

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
        </init-param>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>main.java.net.bornil.config</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <welcome-file-list>
        <welcome-file />
    </welcome-file-list>

    <error-page>
        <error-code>404</error-code>
        <location>/errors/404</location>
    </error-page>
</web-app> 
```

控制器

```
@Controller
@RequestMapping(value = "/errors")
public class CommonExceptionHandler {

    private static Logger log = Logger.getLogger(CommonExceptionHandler.class.getName());

    @RequestMapping(method = RequestMethod.GET, value = "/{code}")
    public ModelAndView handleException(@PathVariable int code) {

        if (log.isDebugEnabled()) {
            log.debug("ERROR CODE IS: " + code);
        }

        return new ModelAndView("errors/404");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T09:45:17.317

我遇到过同样的问题。我有一个简单的 web 应用程序，单页，在 Spring 论坛上花了一个上午后（太好了，你不能在那里搜索“404”，因为它只有 3 个字符长），谷歌这是我找到的最好的解决方案。假设你有 a`index.jsp`和 a `404.jsp`，我`@Configuration`的 ' 有：

```
@Override
public void addViewControllers(ViewControllerRegistry registry) {
    registry.addViewController("/").setViewName("index");
    registry.addViewController("/*").setViewName("404");
} 
```

# php - 试图将表单信息发送到数据库 PHP / MYSQL

> ID：15637160
> 
> 赞同：1
> 
> 时间：2013-03-26T12:31:39.770
> 
> 标签：php, mysql, sql, database

嗨，我不明白为什么这段代码没有将 html 文本字段中的数据插入到我的实际数据库中。我正在尝试仅使用 First_Name 对其进行采样。

无论如何HTML代码如下：

```
<form action="Proform.php" name="Myform" method="post">

        <input type ="hidden" value="1" name="check_submit" />
        Please Enter First Name: <input type ="text" name="First_Name" /> <br />
        Please Enter Second Name: <input type ="text" name="Second_Name" /><br />
        Please Enter Email Address: <input type ="text" name="Email_Address" /><br />
        Please Enter A Password: <input type="password" name="Password" /><br />
        <input type ="submit" name"Submit" /><br />

    </form> 
```

php和MYSQL如下：

```
 <?php

    $dbname='ecig';
    $dbhost='localhost';
    $dbpass='password';
    $dbuser='eciguser';

    $dbhandle = mysql_connect($dbhost, $dbuser, $dbpass)
      or die("Unable to connect to MySQL");
    echo "Connected to MySQL<br>";

    $selected = mysql_select_db("ecig",$dbhandle)
      or die("Could not select examples");

    $res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]')");

    if (array_key_exists ('check_submit', $_POST )) 

    echo "Your Name is : {$_POST['First_Name']}<br />";
    echo "Your Second Name is : {$_POST['Second_Name']}<br />";
    echo "Your Email Address is : {$_POST['Email_Address']}<br />";
    echo "Your Password Is : {$_POST['Password']}<br />";

    ?> 
```

它一定与这行代码有关，但我无法发现它.. 你们中的任何人都发现出了什么问题吗？

```
$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]')"); 
```

任何帮助将非常感激。谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:38:42.480

尝试这个：

将此添加到 php 代码中：

```
$firstname             =    $_POST['First_Name'];
$secondname        =    $_POST['Second_Name']; 
```

然后将查询更改为：

```
 $res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('".$firstname."', '".$lastname."')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:34:32.973

您告诉查询您将提供 first_name 和 last_name，但您只提供 first_name：

```
$res = mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]')"); 
```

尝试：

```
$res = mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]', '$_POST[Lirst_Name]')"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:35:15.280

您的插入查询不正确。您必须提供与列相同数量的值。

```
$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]')"); 
```

应该：

```
$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]', '$_POST[Last_Name]')"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:36:01.940

你只传入一个值

$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]')");

，并且在您的插入语句中，您将插入 2 个值，名字和名字。

尝试这个：

`$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]', '$_POST[Second_Name]')");`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T12:41:44.153

```
$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]')"); 
```

我可以看到这个查询有一些问题。首先你说你只想从名字开始，所以你只需要插入名字列：

```
Persons (First_Name  ) VALUES
                    ^ 
```

然后，看，你想确保你得到你的变量来填充字符串。你想使用：

```
('{$_POST['First_Name']}')
  ^       ^          ^ ^ 
```

还要考虑错误测试，因为这很可能是 MySQL 语法错误。你可以加

```
if (!$res) {
    die('Invalid query: ' . mysql_error());
} 
```

**注意：**不要使用 MySQL_*，因为它自 PHP 5.5 起已被弃用。使用 MySQLi_* 或 PDO。此外，您应该使用准备好的语句和 SQL 转义。您可以进行注射。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T12:34:27.693

```
$res=mysql_query("INSERT INTO Persons (First_Name, Second_Name) VALUES ('$_POST[First_Name]', '$_POST[Second_Name]')"); 
```

# c++ - 使用向量数组在 C++ 中创建扫雷

> ID：15637172
> 
> 赞同：0
> 
> 时间：2013-03-26T12:32:23.793
> 
> 标签：c++, arrays, vector, matrix, minesweeper

所以基本上我正在尝试为 uni 创建电脑游戏扫雷。我让它与数组一起工作，但现在我发现我必须使用向量而不是我完全无能为力。如果有人可以帮助我，那就太好了。基本上，我想使用向量来创建一个矩阵，该矩阵在每一轮比赛结束后都会变得更大。将有三轮，第一轮从 9x9 矩阵开始，然后是 12x12，然后是 24x24。其中一个阵列将完全由 X 组成，第二个阵列将随机生成地雷隐藏在其中，以及与地雷接触的任何必要数字。任何帮助都将不胜感激，如果发送的任何代码中都有小指针来帮助我理解，那就太棒了:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:51:49.497

为什么不使用向量的向量，例如`vector<vector<int>>`？我不确定这是否有性能问题。但这只是一个简单的游戏，所以谁在乎呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:14:45.073

使用向量非常容易。

```
vector<vector<char> > map ( size, vector<char> ( size ) ); 
```

这将创建一个大小为 x 大小的 char 的 2d 向量。如何使用它完全取决于游戏代码的结构。

# z3 - z3py 安装

> ID：15637173
> 
> 赞同：0
> 
> 时间：2013-03-26T12:32:24.373
> 
> 标签：z3, smt, constraint-programming

我无法让 z3 与 Python 一起工作。我正在运行 Windows 7 64 位。我已经下载了 64 位 Python 3.3.0 和 64 位 z3 4.3.0。我已经更新了我的 PATH 和 PYTHONPATH 以包含 z3 \bin 目录。但是，当我尝试在 python 中使用 z3 时，出现以下错误：

> > > from z3 import * Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 ImportError 中：'z3' 中的坏幻数：b'\x03\xf3\r\n'

有谁知道出了什么问题以及如何解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:48:07.780

Z3 v4.3.0 不支持 Python 3.3。我们必须使用 Python 2.7（或 2.6）。下一个正式版本将支持 Python 3.x。同时，您可以使用`unstable`(working-in-progress) 分支。有关更多信息，请参阅以下相关问题：

*   [在 Python 3.3 中使用 Z3Py](https://stackoverflow.com/questions/15598669/using-z3py-with-python-3-3)

# java - 忽略字符串的特殊字符和 html 代码并将单词存储到表格的一列中

> ID：15637174
> 
> 赞同：-3
> 
> 时间：2013-03-26T12:32:25.030
> 
> 标签：java, string, stringtokenizer

我有一个代码，

```
import java.util.*;
import java.util.Scanner;
import java.util.StringTokenizer;
class CountWords{
    public static void main(String[] args) 
    {
        Scanner input=new Scanner(System.in);
        System.out.print("Enter string: ");
        String st=input.nextLine();
        int count=0;
        StringTokenizer stk=new StringTokenizer(st," ");
        while(stk.hasMoreTokens()){
            String token=stk.nextToken();
            count++;
        }
        System.out.println("Number of words are: "+count);
    }
} 
```

我有一个要求，将输入作为字符串给出，例如 **“This Is the!@* text to did() madam#$ split in *to* words”。**

## o/p:-

```
Number of words are: 10 
```

和

我必须数一数。通过忽略字符串的特殊字符并将字符串存储到表列中，并将单词的反向存储在另一个表列中，例如（忽略字符串中的特殊字符）

```
sno    words     reverse
----   ------   --------
1       This      sihT
2       Is         sI
3       the       eht  
4       text      text 
```

所以.... on 如果字符串中有回文，则将这些单词保存在单独的表中，例如

```
word   palindrome
----   ---------
did     did
madam   madam 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:43:31.203

```
public static void main(String[] args) {
    String str = "This is the!@* text to be in words.";
    str = str.replaceAll("[^a-zA-Z0-9 ]+", "");
    System.out.println(str);
    int len = str.split("\\s+").length;
    System.out.println(len);
} 
```

我假设特殊字符不是字母和数字。

输出：

```
This is the text to be in words
8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:42:30.800

处理凌乱的 HTML 很麻烦。使用 HTML 清理器实用程序，例如[HtmlCleaner](http://htmlcleaner.sourceforge.net/)为您完成这项工作。

# joomla - 将 joomla 站点 1.7 升级到 joomla 2.5

> ID：15637175
> 
> 赞同：1
> 
> 时间：2013-03-26T12:32:27.637
> 
> 标签：joomla, joomla2.5, joomla1.7

**如何将 joomla 网站的版本从 1.7 升级到 joomla 2.5**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:37:15.907

您可以通过扩展管理器升级您的网站。从 Joomla 1.6 开始，它在扩展管理器中具有内置更新功能。有关更多详细信息，请参阅本教程：

[从 Joomla 1.7 升级到 Joomla 2.5](http://docs.joomla.org/Upgrading_from_Joomla_1.7_to_Joomla_2.5)

# c# - 实例化一个给定通用抽象类型的类

> ID：15637177
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:32:38.527
> 
> 标签：c#, generics

使用这个模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace ConsoleApplication1
{
    #region Abstracts definitions
    abstract class AnAbstract
    {
        public string Name { get { return this.GetType().Name; } }
        public bool IsNumeric { get { return this is ANumericAbstract; } }
        public /*abstract*/ string Description = default(string);
    }
    abstract class ANumericAbstract : AnAbstract
    {
        public /*abstract*/ double Min = double.MinValue;
        public /*abstract*/ double Max = double.MaxValue;
    }
    abstract class ANonNumericAbstract : AnAbstract
    {
        public List<Object> objects = new List<Object>();
    }
    #endregion Abstracts definitions
    #region Concrete definitions
    class NumericImpl : ANumericAbstract
    {
        new public const string Description = "A numeric implementation";
        new public const double Min = 0;
        new public const double Max = 1000;
        public NumericImpl()
        {
        }
    }
    abstract class AnotherImpl : ANonNumericAbstract
    {
        public AnotherImpl()
        {
            objects.Add("one");
            objects.Add("two");
            objects.Add("three");
        }
    }
    class SideA : AnotherImpl
    {
        new public const string Description = "Disc side A";
    }
    class SideB : AnotherImpl
    {
        new public const string Description = "Disc side B";
    }
    #endregion Concrete definitions
    partial class Parameter
    {
        public string Name { get; set; }
        public string Description { get; set; }
        public bool IsNumeric { get; private set; }
        public double Min { get; private set; }
        public double Max { get; private set; }
        public List<Object> Values { get; private set; }
        private Parameter()
        {
            Values = new List<Object>();
        }
    }
} 
```

有了这个，我假装定义了一个类的层次结构，我可以为其拥有一些抽象属性（`Name`, `Description`, `IsNumeric`），并且在层次结构的末尾应该有一些强制定义这些属性的类；在这种情况下，`ANumericAbstract`它们应该具有额外的特定属性，例如`Min`和`Max`。

**现在问题来了。**

我正在尝试创建实例，`Parameter`这些实例采用泛型`AnAbstract`并从中读取一些值来填充`Parameter`属性，*à la*

```
Parameter<ANumericAbstract> ParamNum = new Parameter<NumericImpl>(); 
```

构造`Parameter`函数将接受传递的类型并“填空”。换句话说，我正在尝试类似的东西：

```
using System;
namespace ConsoleApplication1 {
    partial class Parameter 
    {
        public static Parameter NewParameter<T>() where T : AnAbstract
        {
            Parameter Parameter = new Parameter();

            // THESE DON'T WORK:
            this.Name = T.Name;
            this.Description = T.Description;
            this.IsNumeric = T.IsNumeric;
            if (this.IsNumeric) 
            {
               this.Min = (T as ANumericAbstract).Min;
               this.Max = (T as ANumericAbstract).Max; 
            }
            else 
            {
              foreach(Object val in (T as ANonNumericAbstract).Values)
              {
                this.Values.Add(val);
              }
            }

            return Parameter;
        }
    }

    class Program
    {
        private AnAbstract Number = new NumericImpl();
        static void Main(string[] args)
        {
        }

        // THESE DON'T WORK:
        private static Parameter<ANumericAbstract> ParameterNum = 
                       Parameter.NewParameter<NumericImpl>();
        private static Parameter<ANonNumericAbstract> ParameterA = 
                       Parameter.NewParameter<SideA>();
        private static Parameter<ANonNumericAbstract> ParameterB = 
                       Parameter.NewParameter<SideB>();
    }
} 
```

显然语法是无效的，但我不确定我是否朝着正确的方向前进。是否有一些我没有正确使用的泛型语法？我应该完成它并使用`Get`ters 和`Set`ters *à la* Java 吗？`:-)`此时，只需执行

```
Parameter par = new Parameter { Name = NumericImpl.Name, /* ... */ }; 
```

可能看起来更明智...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:45:33.337

首先，您不应该`New`在属性上使用关键字。考虑[虚拟](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.80%29.aspx)关键字：

```
abstract class AnAbstract
{
    public virtual string Name { get { return this.GetType().Name; } }
    public virtual string Description { get { return String.Empty; } }
}
abstract class ANumericAbstract : AnAbstract
{
    public virtual double Min = double.MinValue;
}

class NumericImpl : ANumericAbstract
{
    public override string Description { get { return "A numeric implementation"; } } 
    public override double Min { get { return 0; } }
} 
```

1）您可以在参数构造函数中放置您类型的实例并具有参数实例。

```
partial class Parameter 
{ 
    public Parameter(AnAbstract inputObject) 
    { 
        this.Name = inputObject.Name; 
        // etc
    } 
}

private static Parameter ParameterNum = new Parameter(new NumericImpl()); 
```

2）第二种方式是使用反射来创建一个带有初始参数的对象实例。

```
 partial class Parameter<T> where T : AnAbstract
    {
        public static Parameter<T> NewParameter<T>() where T : AnAbstract
        {
            Parameter<T> parameter = new Parameter<T>();
            AnAbstract instance = (AnAbstract)Activator.CreateInstance(typeof(T));

            parameter.Name = instance.Name;
            // etc
            return parameter;
        }
    }

    private static Parameter<NumericImpl> ParameterNum = 
        Parameter<NumericImpl>.NewParameter(); 
```

3）使参数类静态并通过静态构造函数创建。

```
static partial  class Parameter<T> where T : AnAbstract
{
    public static string Name { get; set; }
    //etc
}

static partial class Parameter<T> where T : AnAbstract
{ 
    static Parameter ()
    {
        AnAbstract instance = (AnAbstract)Activator.CreateInstance(typeof(T));
        Parameter<T>.Name = instance.Name;
        //etc
    }
} 
```

在最后一个示例中，您可以像这样使用此类：

```
String someName = Parameter<NumericImpl>.Name; 
```

# spring - 找不到记录器的附加程序

> ID：15637178
> 
> 赞同：1
> 
> 时间：2013-03-26T12:32:41.547
> 
> 标签：spring, spring-mvc

我正在 spring mvc 中尝试一些示例。我有三个类 Student.java 和 StudentController.java，如下所示

学生.java

```
package mvc1;
public class Student {
   private Integer age;
   private String name;
   private Integer id;

   public void setAge(Integer age) {
      this.age = age;
   }
   public Integer getAge() {
      return age;
   }

   public void setName(String name) {
      this.name = name;
   }
   public String getName() {
      return name;
   }

   public void setId(Integer id) {
      this.id = id;
   }
   public Integer getId() {
      return id;
   }
} 
```

StudentController.java

```
package mvc1;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.ui.ModelMap;

@Controller
@RequestMapping("login.do")
public class StudentController {

   @RequestMapping(value = "/student", method = RequestMethod.GET)
   public ModelAndView student() {
      return new ModelAndView("student", "command", new Student());
   }

   @RequestMapping(value = "/addStudent", method = RequestMethod.POST)
   public String addStudent(@ModelAttribute("SpringWeb")Student student, 
   ModelMap model) {
      model.addAttribute("name", student.getName());
      model.addAttribute("age", student.getAge());
      model.addAttribute("id", student.getId());

     return "result";
   }
} 
```

我有一个 servlet xml 文件作为 HelloWeb-Servlet.xml 如下

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="   http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd">

   <context:component-scan base-package="Servee" />

   <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
      <property name="prefix" value="/WEB-INF/jsp/" />
      <property name="suffix" value=".jsp" />
   </bean>

</beans> 
```

和 web.xml 文件如下...

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/DispatcherServlet.xml</param-value>
</context-param>

   <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-  
       class>
    </listener>

 <servlet>
    <servlet-name>HelloWeb</servlet-name>
    <servlet-class>
       org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>2</load-on-startup>

</servlet>

<servlet-mapping>
    <servlet-name>HelloWeb</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

并且student.jsp和result.jsp文件存放在mvc11包中

学生.jsp

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
 <h2>Student Information</h2>
<form:form method="POST" action="/Spring/mvc1/addStudent">
   <table>
    <tr>
        <td><form:label path="name">Name</form:label></td>
        <td><form:input path="name" /></td>
    </tr>
    <tr>
        <td><form:label path="age">Age</form:label></td>
        <td><form:input path="age" /></td>
    </tr>
    <tr>
        <td><form:label path="id">id</form:label></td>
        <td><form:input path="id" /></td>
    </tr>
    <tr>
       <td colspan="2">
            <input type="submit" value="Submit"/>
        </td>
    </tr>
</table>  
</form:form>
</body>
</html> 
```

结果.jsp

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
 <h2>Submitted Student Information</h2>
   <table>
    <tr>
        <td>Name</td>
        <td>${name}</td>
    </tr>
    <tr>
        <td>Age</td>
        <td>${age}</td>
     </tr>
    <tr>
        <td>ID</td>
        <td>${id}</td>
    </tr>
</table>  
</body>
</html> 
```

运行 spring 程序时，我收到如下警告消息

```
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

错误消息为

```
The requested resource (/Spring/mvc11/student.jsp) is not available. 
```

HelloWeb-Servlet.xml 存储在 WEB-INF 下。我参考了很多资源但无法修复它。有人可以帮我解决它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:40:38.817

看起来有多个问题

1.  该软件包`mvc1`未添加到`component-scan`. 解决方案：将以下行添加到`HelloWeb-Servlet.xml`

2.  `@RequestMapping("login.do")`注释`StudentController`没有任何意义，删除它

3.  您有 url 的映射`/student`，但正在尝试访问`/Spring/mvc11/student.jsp`，请更改 RequestMapping 或请求的 url

# json - 如何使用prototype.js解析json数据并遍历它？

> ID：15637181
> 
> 赞同：4
> 
> 时间：2013-03-26T12:32:49.233
> 
> 标签：json, prototypejs

我有类似的json数组

```
var data = '[{ "name": "Violet", "occupation": "character" },{ "name": "orange", "occupation": "color" }]' 
```

如何解析数据并使用prototype.js对其进行迭代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:40:16.370

有一个函数叫`evalJSON()`

```
var data = '[{ "name": "Violet", "occupation": "character" },{ "name": "orange", "occupation": "color" }]';
data = data.evalJSON();
//for more security:
data = data.evalJSON(true); //sanitizes data before processing it 
```

然后只需使用`for`遍历数组：

```
for (var i=0;i<data.length;i++)
{ 
    //do whatever you like with data[i];
} 
```

或者使用prototypeJS`.each()`函数：

```
data.each(function(el){
    //do whatever you like with el
}); 
```

# python - 正则表达式匹配下划线

> ID：15637184
> 
> 赞同：0
> 
> 时间：2013-03-26T12:32:57.533
> 
> 标签：python, regex

我正在使用 Python 的 re 包（是的，我知道正则表达式更通用，但谁知道，可能还有其他包）来读取一些数据，其中包括带有变量名的不等式，然后是 +、-、>、< 或=。（这是一个不等式系统。）我需要过滤掉变量名。

到目前为止，我使用

```
var_pattern = re.compile(r'[a-z|A-Z]+\d*\.?') 
```

这有点“hacky”，因为它不是太笼统。我不介意，但遇到了一个奇怪名字的问题，如下所示。

我的下一个目标是

```
var_pattern = re.compile(r'[a-z|A-Z]+[a-zA-Z0-9_.]*') 
```

它应该在至少一个首字母之后匹配除了 +、-、>、< 和 = 之外的所有内容。这适用于变量名称，如“x23”或“C2000001”。但不是'x_w_3_dummy_1'。我原以为它可能仍然是因为下划线，但它似乎与变量'x_b_1_0_0'一起工作得很好。

有没有人知道可能导致什么，更重要的是，如何解决它？

顺便说一句，我也尝试过

```
var_pattern = re.compile(r'[a-z|A-Z]+[^+^-^>^<^=]*') 
```

但也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:35:51.977

您的模式应该适用于您的示例，但稍微更正您的模式以实际符合您的意图：

```
r'[a-zA-Z][a-zA-Z0-9_]*' 
```

这匹配*1 个*首字母（小写或大写），后跟 0 个或多个字母、数字和下划线。您的版本有一个多余的`+`, 并包含`|`在第一个字符和`.`名称的其余部分允许的内容中。

显示此内容的演示与您的所有示例匹配：

```
>>> import re
>>> names = ('x23', 'C2000001', 'x_w_3_dummy_1', 'x_b_1_0_0')
>>> var_pattern = re.compile(r'[a-zA-Z][a-zA-Z0-9_]*')
>>> for name in names:
...     print var_pattern.search(name).group()
... 
x23
C2000001
x_w_3_dummy_1
x_b_1_0_0 
```

该模式不匹配任何可能跟在变量名后面的`+`、`-`、`>`或字符：`<``=`

```
>>> var_pattern.findall('x23<10\nC2000001=24\nx_w_3_dummy_1+15\nx_b_1_0_0-5')
['x23', 'C2000001', 'x_w_3_dummy_1', 'x_b_1_0_0'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:37:27.630

应该：

```
[a-zA-Z_][a-zA-Z0-9_.]* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:35:43.360

除了为什么您的原始表达不适用于您的下划线之外，您的问题已经得到解答。如果你有图案

```
r'[a-zA-Z][a-zA-Z0-9_.]*' 
```

然后因为点它实际上相当于

```
r'[a-zA-Z].*' 
```

因此与您的想法相反，这确实与您的“x_w_3_dummy_1”*和*“x_b_1_0_0”相匹配。问题在于，由于点，它也会匹配您随后的分隔符，例如您的 +、-、>、< 和 = 以及它之后的任何内容。

# mysql - mysql_insert_id 总是返回 0

> ID：15637188
> 
> 赞同：-3
> 
> 时间：2013-03-26T12:33:04.703
> 
> 标签：mysql, frapi

```
 $userName = $this->getParam('userName', self::TYPE_STRING); 

  $db = Frapi_Database::getInstance();
  $sql = "INSERT INTO user (userName)
            values ('".$userName."')";

  $stmt = $db->prepare($sql);        

  $stmt->execute();

  $this->data['userId'] = mysql_insert_id(); 
```

在 userId 中总是得到 0。

我试图搜索这个，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:35:06.043

你读过文档吗？

> 上一个查询成功时为 AUTO_INCREMENT 列生成的 ID，**如果上一个查询没有生成 AUTO_INCREMENT 值**，则为 0，如果没有建立 MySQL 连接，则为 FALSE。

此外，这些调用已被弃用。

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

[在此处](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)阅读有关选择新 API 的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:44:12.387

thanks for your help guyz.
this worked for me.
$this->data['userId'] = $db->lastInsertId();

# javascript - JS：如何检测光标是否在文本字段中

> ID：15637192
> 
> 赞同：9
> 
> 时间：2013-03-26T12:33:21.377
> 
> 标签：javascript, html, shortcut

我想使用一些字母（键）作为 javascript 中某些操作的快捷方式。我想检查光标是否集中在任何文本字段、表单输入等上，以便在用户在表单或文本字段中输入内容时取消快捷操作。

例如，我希望在用户按下“A”时执行 alert()。但是如果用户在像'A website'这样的文本区域中输入一些文本，那么他将按下'A'，这一次不应该执行alert()。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-04T13:38:30.877

```
$(document).keydown( function( e ) { 
  if( e.target.nodeName == "INPUT" || e.target.nodeName == "TEXTAREA" ) return;
  if( e.target.isContentEditable ) return;

  // Do stuff 
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-04T18:44:54.083

```
window.onkeydown = function(e){
  if ( e.target.nodeName == 'INPUT' ) return;

  handle_shortcut();
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T12:38:13.990

jQuery

```
$(window).bind('keydown',function(e){
    if(e.target.nodeName.toLowerCase() === 'input'){
        return;
    }
    alert('a');
}); 
```

或者纯js

```
window.onkeydown = function(e){
    if(e.target.nodeName.toLowerCase() === 'input'){
        return;
    }
    alert('a');
}; 
```

除此之外，您可以做的是定义一个非警报元素类型的数组，so`input`等`textarea`，然后检查这些元素当前都不是目标。

演示：http: [//jsfiddle.net/7F3JH/](http://jsfiddle.net/7F3JH/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:36:16.683

您可以根据当前页面上的焦点元素绑定和取消绑定快捷方式事件。

JavaScript

```
window.onload = initWindow();

function initWindow () {
    attachShortcutHandler();

    var inputs = document.getElementsByTagName('input');
    for (var i = 0, max = inputs.length; i < max; i++) {
        inputs[i].onfocus = removeShortcutHandler;
        intputs[i].onblur = attachShortcutHandler;
    }
}

function removeShortcutHandler () {
    window.onkeypress = null;
}

function attachShortcutHandler() {
    window.onkeypress = function () {
        //your code here
    }
} 
```

jQuery

```
$(function () {
    initShortcutHandler();

    $('input, [any other element you want]')
        .on('focus', function () {
            $('body').off('keypress');
        })
        .on('blur', function () {
            initShortcutHandler();
        });
});

function initShortcutHandler() {
    $('body').on('keypress', function () {
       //do your stuff
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T12:39:28.147

您需要将标志设为全局。并在任何文本框具有焦点时将其设置为 false。

> 变量标志=真；
> 
> $('input:type="text").focus(function(txt) { flag= false; });
> 
> * * *
> 
> if(flag) //快捷键有效...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T12:45:49.177

最好使用 JQuery 中定义的 focusOut 方法。根据我的理解，你可以做这样的事情

```
$("input").focusout(function() {
  if($(this).val() == "A"{
   alert("your message");
   return false;
  }else{
    //do other processing here.
  }
}); 
```

希望这可以帮助 ：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T12:36:15.940

jQuery[鼠标悬停（）](http://api.jquery.com/mouseover/)

```
 $('element').mouseover(function() {
      alert('over');
 }); 
```

# jquery - 用于原型继承 jQuery 插件的 Script# Wrapper

> ID：15637204
> 
> 赞同：0
> 
> 时间：2013-03-26T12:34:09.793
> 
> 标签：jquery, script#

我想为现有的 jQuery 插件创建一个 Script# 包装器。jQuery 插件实现了可在[此链接上找到的“使用 DOM-To-Object 桥接模式的原型继承”](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)

```
// myObject - an object representing a concept that you want 
// to model (e.g. a car)
var myObject = {
  init: function( options, elem ) {
    // Mix in the passed-in options with the default options
    this.options = $.extend( {}, this.options, options );

    // Save the element reference, both as a jQuery
    // reference and a normal reference
    this.elem  = elem;
    this.$elem = $(elem);

    // Build the DOM's initial structure
    this._build();

    // return this so that we can chain and use the bridge with less code.
    return this;
  },
  options: {
    name: "No name"
  },
  _build: function(){
    //this.$elem.html('<h1>'+this.options.name+'</h1>');
  },
  myMethod: function( msg ){
    // You have direct access to the associated and cached
    // jQuery element
    // this.$elem.append('<p>'+msg+'</p>');
  }
};

// Object.create support test, and fallback for browsers without it
if ( typeof Object.create !== 'function' ) {
    Object.create = function (o) {
        function F() {}
        F.prototype = o;
        return new F();
    };
}

// Create a plugin based on a defined object
$.plugin = function( name, object ) {
  $.fn[name] = function( options ) {
    return this.each(function() {
      if ( ! $.data( this, name ) ) {
        $.data( this, name, Object.create(object).init( 
        options, this ) );
      }
    });
  };
};

// Usage:
// With myObject, we could now essentially do this:
// $.plugin('myobj', myObject);
// and at this point we could do the following
// $('#elem').myobj({name: "John"});
// var inst = $('#elem').data('myobj');
// inst.myMethod('I am a method'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:55:47.570

script# github 存储库中的代码说明了为 jQuery 插件构建导入库。

尤其是：

*   jQuery 和 jQuery UI 导入库：[https](https://github.com/nikhilk/scriptsharp/tree/cc/src/Libraries/jQuery) ://github.com/nikhilk/scriptsharp/tree/cc/src/Libraries/jQuery ...您的模式看起来有点类似于 jQuery UI 小部件。

*   各种 jQuery 插件的示例，例如 Lightbox 和 Isotope：[https ://github.com/nikhilk/scriptsharp/tree/cc/samples/Photos](https://github.com/nikhilk/scriptsharp/tree/cc/samples/Photos)

希望这些可以作为入门指南...

# c# - 链接 C#（C-sharp）和 C 语言

> ID：15637215
> 
> 赞同：0
> 
> 时间：2013-03-26T12:34:36.900
> 
> 标签：c#, c

我怎样才能链接`C#`和`C`？我有一个游戏实现`C`，我想与一个用`C#`.

是否可以将`C#`代码转换为`DLL`然后在其中打开它`C`？还是有另一种方法可以链接两种语言？

据我了解，从`C#`to的对话`C`是非常困难和昂贵的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:38:10.940

我的建议是丢弃 C 代码并从头开始 C# 代码。

您可能在 C 中使用的所有库，它们的等效或几乎等效（甚至更好）都可以在 C# 中使用。

`C`无法直接转换成的代码量`C#`非常多，最终会浪费大量时间来使代码正常工作，如果您首先在 C# 中从头开始，您可能已经以更好的方式完成了地方。

C 是一门很棒的语言，但对我来说对程序员的友好程度远不如 C# :)

# oracle-apex - IE 和 Chrome 中不显示快捷方式图标

> ID：15637217
> 
> 赞同：1
> 
> 时间：2013-03-26T12:34:39.633
> 
> 标签：oracle-apex

我想在我的 Oracle Apex 应用程序中显示一个快捷方式图标。我正在使用工作区图像，因此我将图像上传到 Apex 工作区并更改了页面模板标题中的快捷方式图标行：

```
<link rel="shortcut icon" href="#WORKSPACE_IMAGES#NED_NGdW.ico" type="image/x-icon"> 
```

图像在 Firefox 中正确显示。

页面源码显示：

```
<link rel="shortcut icon" href="wwv_flow_file_mgr.get_file?p_security_group_id=6528703319516854&p_fname=NED_NGdW.ico" type="image/x-icon"> 
```

但是在 IE9 和 Chrome 中，我仍然看到旧的标准图标。清除浏览器缓存并不能解决这个问题。

使用#WORKSPACE_IMAGES# 和快捷方式图标有问题吗？

使用 Apex 4.02

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:49:00.577

找到答案：页面模板包含对图标的引用：

```
 <link rel="icon" href="#WORKSPACE_IMAGES#my_image.ico" type="image/x-icon">
 <link rel="shortcut icon" href="#WORKSPACE_IMAGES#my_image.ico" type="image/x-icon"> 
```

改变了他们两个。

# git - 用于大型模块化代码库的 SCM

> ID：15637222
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:34:49.210
> 
> 标签：git, svn, version-control, mercurial, git-submodules

我需要一些帮助来为我的代码库设计 SCM。代码库相当复杂，所以首先，我将尝试描述它。

代码库由许多不同产品的代码组成，`Product1`为了`Product2`简单起见（实际上还有更多）。每个`Product`都有多个`Projects`与之关联的`Core Application`软件，例如，和支持软件，例如`iOS`和`Android`应用程序（这因产品而异）。每个`Project`都需要使用它的通用代码`Product`（即`Core`，`iOS`和`Android`应用程序都需要共享一些通用代码）。此外，`Products`需要彼此共享内部库。

实际上，您最终会得到这样的结构：

```
Library1
Library2
Product1
├── Common
├── Core Application
├── iOS
└── Android
Product2
├── Common
├── Core Application
├── iOS
└── Android 
```

绝对需要以下功能：

1.  能够检查项目的最小代码集 - 例如，如果我想构建`Product1's` `Android`应用程序，我只想检查`Library1`, `Library2`, `Product1/Common`, `Product1/Android`. 代码库非常庞大，检查所有内容将花费大量时间
2.  将共享库、公共代码和项目代码的状态恢复到特定修订版 - 例如，我需要像 2 个月前一样构建以测试错误，`Product2's` `Core Application`我需要`Library1`,`Library2`和全部恢复到相同的修订版`Product2/Common``Product2/Core Application`
3.  在保留历史记录的同时将文件移动到不同的共享文件夹 - 不可能一开始就将 a 的所有正确代码`Product`放入`Common`文件夹中。随着时间的推移不断变化的需求和新产品的需求，这意味着曾经存在的代码`Product2/Core Application`需要迁移到`Product2/Common`，甚至可能`Library2`。

目前，我们使用的系统是一个巨大的 SVN 存储库，其中包含所有`Products`,`Projects`和`Libraries`. 在 SVN 中可以进行选择性代码签出，因此我们可以选择仅签出特定文件夹。因为它都是一个存储库，所以一切都很好地恢复到相同的修订版。当我们分支或标记时，我们分支/标记整个存储库！

我想要的是适当地模块化代码库，例如，`Library1`存在于它自己的存储库中，并且简单地包含在其他存储库中。这实际上是不可能的`svn::externals`，因为它违反了要求 2。

我想使用某种形式的 DVCS，原因如下：

1.  性能 - SVN 在提交大的变更集时很慢
2.  分支/合并 - 尝试合并大型 SVN 分支是一场噩梦，我们不惜一切代价避免它。我知道使用 DVCS 会容易得多
3.  对模块的适当支持。我知道 Git 有子模块，而 Mercurial 有子仓库，这似乎符合我的设计目标，但看起来你必须在更改修订时手动更新子仓库。我希望它在 1 个简单的步骤中完成。
4.  更清晰的存储库结构。使用 subrepos，每个项目都将是自己的存储库，具有清晰的结构和清晰的依赖项集

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:02:43.207

Mercurial 最近发生了一些变化，旨在使子存储库更容易和更有效地使用。我没有密切关注它们——你可能想看看最近的[hg-crew](http://mercurial.selenic.com/wiki/CrewRepository)提交历史，看看里面是否有任何东西可能会影响你的决定。

我广泛使用了 Git 和 Mercurial，但肯定对 Mercurial 有更深入的了解，并且更喜欢使用它。我已经将项目从 ClearCase、SVN 和 Git 迁移到 Mercurial，并且在所有情况下，过渡都非常顺利 - 重要的是有几个人可以为您的团队设置工作流程并设置有代表性的测试存储库和先试试。

该[`hg convert`扩展](http://mercurial.selenic.com/wiki/ConvertExtension)可以将存储库从各种来源转换为 Mercurial 存储库，并且可以使用文件映射仅转换部分存储库、重命名文件/目录等。我确信 Git 上有类似的东西，但我从来不需要使用它。

# jquery - 在动态添加的行中用jquery计算并构建一列

> ID：15637224
> 
> 赞同：3
> 
> 时间：2013-03-26T12:35:05.220
> 
> 标签：jquery, input, row, field, calc

我有一个（HTML）表单，其中包含按需动态添加的字段。如果你在一个字段中输入一些东西，你会得到一行。

最后，它计算一个总数。

## HTML

```
<form id="myForm">Factor:
    <input type="text" name="factor" value="6" />
    <fieldset id="cloneset">
        <input type="text" name="qty[1]" />
        <input type="text" name="product[1]" onkeyup="if (this.value.length > 2 && treated[this.name] != 1){ addOne(); treated[this.name] = '1'; }"
        />
        <input class="cost" type="text" name="amount[1]" onkeyup="calculateSum();" />
    </fieldset>
    <input id="total" type="text" name="total">
</form> 
```

## jQuery

```
treated = new Object();
inputNumber = 1;

function addOne() {
    inputNumber++;
    $('#cloneset').append('<div><input type="text" name="qty[' + inputNumber + ']" /> <input type="text" name="product[' + inputNumber + ']" onkeyup="if (this.value.length > 2 && treated[this.name] != 1){ addOne(); treated[this.name] = \'1\'; }" /> <input class="cost" type="text" name="amount[' + inputNumber + ']" onkeyup="calculateSum();" /></div>');
}

function calculateSum() {

    var sum = 0;
    //iterate through each textboxes and add the values
    $(".cost").each(function () {
        //add only if the value is number
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });
    //.toFixed() method will roundoff the final sum to 2 decimal places
    $("#total").val(sum.toFixed(2));
} 
```

我[在小提琴中有一个工作演示](http://jsfiddle.net/zarquon42/CfgB3/)

现在我想输入 - 比方说 - 小时，乘以（固定）速率。

寻找最佳实践来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:15:11.233

## HTML

```
<form id="myForm">Rate:
<input type="text" name="factor" value="6" id="rate" class="rate" />
<table id="cloneset">
    <tr>
        <td>
            <input type="text" name="qty[1]" onkeyup="calculateRow();" class="qty" />
        </td>
        <td>
            <input type="text" name="product[1]" onkeyup="if (this.value.length > 2 && treated[this.name] != 1){ addOne(); treated[this.name] = '1'; }" />
        </td>
        <td>
            <input class="cost" type="text" name="amount[1]" onkeyup="calculateSum();" />
        </td>
    </tr>
</table>
<input id="total" type="text" name="total"> 
```

## jQuery

```
treated = new Object();
inputNumber = 1;

function addOne() {
    inputNumber++;
    $('#cloneset').append('<tr><td><input type="text" name="qty[' + inputNumber + ']" onkeyup="calculateRow();" class="qty" /></td><td><input type="text" name="product[' + inputNumber + ']" onkeyup="if (this.value.length > 2 && treated[this.name] != 1){ addOne(); treated[this.name] = \'1\'; }" /></td><td><input class="cost" type="text" name="amount[' + inputNumber + ']" onkeyup="calculateSum();" /></td></tr>');
}

function calculateSum() {

    var sum = 0;
    //iterate through each textboxes and add the values
    $(".cost").each(function () {
        //add only if the value is number
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });
    //.toFixed() method will roundoff the final sum to 2 decimal places
    $("#total").val(sum.toFixed(2));
}

function calculateRow() {

    $('.qty, .rate').change(function () {
        var cost = 0;
        var $row = $(this).closest("tr");
        var qty = parseFloat($row.find('.qty').val());
        var rate = parseFloat($("#rate").val())
        cost = qty * rate;
        //        alert($("#rate").val());

        if (isNaN(cost)) {
            $row.find('.cost').val("Nix is");
        } else {
            $row.find('.cost').val(cost);
        }
        calculateSum();
    })
} 
```

[小提琴中的](http://jsfiddle.net/zarquon42/CfgB3/)工作解决方案

这可能是一种可怕的编程风格。欢迎提出改进建议。

# ruby - ruby 1.9.3 通过套接字对独角兽的简单 GET 请求

> ID：15637226
> 
> 赞同：2
> 
> 时间：2013-03-25T08:40:41.890
> 
> 标签：ruby, sockets

现在我尝试使用此代码连接到独角兽创建的套接字

```
require 'socket'

def foo
  socket = UNIXSocket.new("path_to_socket/tmp/unicorn.sock")

  data = "GET /time HTTP/1.1\n" 
  data << "Connection: Close\n" 
  data << "User-Agent: Mozilla/5.0\n" 
  data << "Accept: */*\n" 
  data << "Content-Type: application/x-www-form-urlencoded\n" 
  data << "\n\r\n\r"

  socket.puts(data)

  while(line = socket.gets) do
    puts line
  end 
end

foo 
```

但总是收到“HTTP/1.1 400 Bad Request”

拜托，任何人都可以说我做错了什么吗？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T02:55:14.680

使用网络/http...

```
require "net/http"
require "socket"

sock = Net::BufferedIO.new(UNIXSocket.new("path_to_socket/tmp/unicorn.sock"))
request = Net::HTTP::Get.new("/time")
request.exec(sock, "1.1", "/time")

begin
  response = Net::HTTPResponse.read_new(sock)
end while response.kind_of?(Net::HTTPContinue)
response.reading_body(sock, request.response_body_permitted?) { }

response.body
response.code 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T12:50:13.340

这很有帮助，但请注意 Net::HTTP#exec 方法被标记*为仅供内部使用*。可能是因为它不进行资源管理等。

以下工作调整了建议的策略以覆盖 Net::HTTP#connect （连接到套接字）。我喜欢使用[HTTParty gem](https://github.com/jnunemaker/httparty)来处理我的 HTTP 请求。所以这里的策略使用了 HTTParty 的自定义 ConnectionAdaptor。现在我可以更改包含类的 ::default_params= 调用，以控制我们使用的是 Unix 还是 TCP/HTTP 套接字。

```
###########################################################
#  net/socket_http.rb
###########################################################

module Net
  #  Overrides the connect method to simply connect to a unix domain socket.
  class SocketHttp < HTTP
    attr_reader :socket_path

    #  URI should be a relative URI giving the path on the HTTP server.
    #  socket_path is the filesystem path to the socket the server is listening to.
    def initialize(uri, socket_path)
      @socket_path = socket_path
      super(uri)
    end

    #  Create the socket object.
    def connect
      @socket = Net::BufferedIO.new UNIXSocket.new socket_path
      on_connect
    end

    #  Override to prevent errors concatenating relative URI objects.
    def addr_port
      File.basename(socket_path)
    end
  end
end

###########################################################
#  sock_party.rb, a ConnectionAdapter class
###########################################################
require "net/http"
require "socket"

class SockParty < HTTParty::ConnectionAdapter
  #  Override the base class connection method.
  #  Only difference is that we'll create a Net::SocketHttp rather than a Net::HTTP.
  #  Relies on :socket_path in the
  def connection
    http = Net::SocketHttp.new(uri, options[:socket_path])

    if options[:timeout] && (options[:timeout].is_a?(Integer) || options[:timeout].is_a?(Float))
      http.open_timeout = options[:timeout]
      http.read_timeout = options[:timeout]
    end

    if options[:debug_output]
      http.set_debug_output(options[:debug_output])
    end

    if options[:ciphers]
      http.ciphers = options[:ciphers]
    end

    return http
  end
end

###########################################################
#  class MockSockParty, a really *nix-y HTTParty
###########################################################
class MockSockParty
  include HTTParty
  self.default_options = {connection_adapter: SockParty, socket_path: '/tmp/thin.sock'}

  def party_hard
    self.class.get('/client').body
  end
end

###########################################################
#  sock_party_spec.rb
###########################################################

require 'spec_helper'

describe SockParty do
  it "should party until its socks fall off." do
    puts MockSockParty.new.party_hard
  end
end 
```

# c++ - 用 unsigned long 替换 size_t 的缺点是什么

> ID：15637228
> 
> 赞同：8
> 
> 时间：2013-03-26T12:35:12.480
> 
> 标签：c++, integer

我正在开发的库需要在 32 位和 64 位机器上使用；我有很多编译器警告，因为在 64 位机器上`unsigned int != size_t`。

用'unsigned long'替换所有`unsigned int`s和s有什么缺点吗？`size_t`我很欣赏它看起来不是很优雅，但是，在这种情况下，内存不是太大的问题......我想知道这种`replace all`操作是否有可能产生任何错误/不需要的行为等（你能举例）？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T12:53:24.700

什么警告？我能想到的最明显的一个是“缩小转换”，也就是说您分配`size_t`给`unsigned int`，并收到信息可能丢失的警告。

`size_t`替换`unsigned long`为的主要缺点`unsigned long`是不能保证足够大以包含 的所有可能值`size_t`，并且在 Windows 64 上它不够大。所以你可能会发现你仍然有警告。

正确的解决方法是，如果将 a 分配`size_t`给变量（或数据成员），则应确保该变量具有足够大的类型以包含`size_t`. 这就是警告的全部内容。所以你不应该切换到`unsigned long`，你应该把那些变量切换到`size_t`.

相反，如果您有一个变量不需要大到足以容纳任何大小，只要足够大`unsigned int`，那么首先不要使用`size_t`它。

两种类型 (`size_t`和`unsigned int`) 都有有效的用途，因此任何不加选择地将它们的所有使用替换为其他类型的方法*一定*是错误的 :-) 实际上，对于*大多数*可以的程序，您可以使用`size_t`or和替换所有内容。例外情况是代码依赖于使用与 或其他大小相同的无符号类型，这样较大的类型会破坏代码。`uintmax_t`*`int`*

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T12:40:19.937

`int`该标准对和等类型的大小几乎没有保证`long`。`size_t`保证足够大以容纳任何对象，并且所有`std`容器都在`size_t`.

例如，平台完全有可能定义`long`为小于`size_t`，或者具有`long`服从编译选项的大小。为了安全起见，最好坚持`size_t`。

另一个需要考虑的标准是它`size_t`带有一个含义——“这个东西是用来存储大小或索引的”。它使代码更加自我记录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T12:39:05.047

如果您`size_t`在*应该*获得 a`size_t`并将其替换为 的地方使用`unsigned long`，您将引入新的警告。

例子：

```
size_t count = some_vector.size(); 
```

替换`size_t`为`unsigned long`, 和 （在它们不同的程度上）你将引入一个新的警告（因为`some_vector.size()`返回 a `size_t`- 实际上是 a`std:::vector<something>::size_type`但实际上它应该评估为相同）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-03T04:26:16.020

当 long 为 8 个字节时，假设它是 unsigned long 可能是一个问题。然后 (unsigned int) -1 != (unsigned long) -1，下面的代码可能有断言失败。

```
unsigned int i = string::npos;
assert(i == string::npos); 
```*

# entity-framework - SQL Server 数据工具和 Edmx

> ID：15637229
> 
> 赞同：1
> 
> 时间：2013-03-26T12:35:12.653
> 
> 标签：entity-framework, azure, sql-server-data-tools

所以我们正在使用微软发布的新 SSDT，非常酷的东西。我们将一个包含所有模式的数据库项目保持在版本控制之下，并使用一个离线数据库进行开发，稍后我们可以在 SQL Azure 数据库上进行部署。我们在开发中使用 EF，所以我的问题是 edmx 适合哪里，我们应该从离线数据库还是直接从在线 SQL Azure 更新 edmx 文件，这方面的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:03:31.110

我会说在你的情况下“生产数据库是事实”，所以我会从 SQL Azure 更新。真的没有正确的答案。

顺便说一句，在 SSDT 的早期测试版中，可以从 EDMX 引用 SSDT 项目，因此您的源代码变成了事实（在我看来，这更可取）并且 EDMX 知道它总是与“真相”。不幸的是，他们放弃了这个功能，并且没有任何回归的迹象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:21:16.083

要使 EF 正常工作，EDMX 文件必须与您要连接的数据库同步。在不知道您遵循的开发过程的情况下很难回答您的问题，但我想您在生产中使用 Sql Azure 并针对本地数据库进行开发。因此，Edmx 文件的一份副本将用于生产服务器。在开发环境中，您拥有 edmx 文件的“活动”副本，当本地数据库更改时，该副本会根据需要进行更改。当您准备好发货时，您可以将应用程序（包括 edmx 文件）部署到使用 Sql Azure 的生产环境中。如果在您的开发环境中，

# facebook - 如何为网站集成创建应用程序：Javascript API

> ID：15637235
> 
> 赞同：1
> 
> 时间：2013-03-26T12:35:26.500
> 
> 标签：facebook, web, facebook-like, facebook-javascript-sdk

我对如何在我的网站上实现 javascript api 有点困惑。首先，我需要从 facebook 创建一个应用程序，但有什么设置需要我多加注意吗？

最终，我只想要一个点赞按钮——但我在页面上有一些元素会关注点赞统计信息，并且想订阅 Edge.create 等方法。

我创建了一个“网站应用程序”，但遇到了一些问题：首先，除非用户登录，否则我的点赞按钮根本不会出现。第二个是我只想让它说“ Greg 喜欢 biscuitcleaver.com”（就像用户喜欢 facebook 页面时它会读到的一样 - 但是，当我单击“喜欢”按钮时，它会显示“Greg 喜欢 biscuitcleaver.com 上的页面”

最终，最终在 Facebook 上的链接应该只是重定向回我使用“赞”按钮注册的网址。（哦，顺便说一句，点赞按钮中的 url - 是否必须在我的应用程序某处 @developers.facebook.com/apps 注册）？

谢谢！-格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:49:45.947

您可以查看 FB [Javascript SD](https://developers.facebook.com/docs/reference/javascript/) K 及其[登录](https://developers.facebook.com/docs/howtos/login/getting-started/#sample)用例以获取示例和所有配置详细信息。请注意，众所周知，FB 会改变其 SDK 的行为，所以今天的真实情况可能不会在短时间内发生。

# php - Pear 和 PHPUnit 完全无法工作

> ID：15637236
> 
> 赞同：0
> 
> 时间：2013-03-26T12:35:38.823
> 
> 标签：php, phpunit, pear

我正在 Laravel 开发一个项目，我需要 pear 和 phpunit 一起工作，这样我才能正确地为我的应用程序进行测试。

我已经安装了梨，但它似乎根本不想下载并让 PHPUnit 工作。以下是我正在运行的一些命令，它们会给我带来错误：

```
Macintosh-2:~ mdunbavan$ pear install pear.phpunit.de/PHPUnit
Did not download optional dependencies: phpunit/PHP_Invoker, use --alldeps to download automatically
phpunit/PHPUnit requires PEAR Installer (version >= 1.9.4), installed version is 1.9.2
phpunit/PHPUnit can optionally use package "phpunit/PHP_Invoker" (version >= 1.1.0, version <= 1.1.99)
downloading Yaml-2.2.0.tgz ...
Starting to download Yaml-2.2.0.tgz (39,955 bytes)
...........done: 39,955 bytes
install ok: channel://pear.symfony.com/Yaml-2.2.0 
```

因此，我四处寻找并尝试查看是否可以更新梨以使其正常工作，这就是向我吐出的：

```
Macintosh-2:~ mdunbavan$ pear install PEAR
pear/PEAR is already installed and is the same as the released version 1.9.4
install failed 
```

现在显然这一定意味着我有 2 个版本的梨，但我真的很想知道如何解决这个问题，更糟糕的是我需要尝试找到我认为位于 MAMP 文件夹中的默认 PHP。MAMP 是我用来做本地网站的工具。

我为我的 Mac 打开了 php.ini 文件，并更改了要在 MAMP 文件夹中使用的 php 的默认位置。

请有人在这里帮我一把，因为我已经尝试了几天来解决这个问题，我什至进入了磁盘实用程序并重置了我所有的文件夹权限，因为这是必需的。

谢谢，马克

# arduino - 永久更改 char 变量

> ID：15637242
> 
> 赞同：1
> 
> 时间：2013-03-26T12:35:51.373
> 
> 标签：arduino

我正在为一个项目编写一些代码，其中我有一个与 Arduino 接口的 GSM 模块，以在触发传感器时传达某些通知并通过 SMS 接收命令。一种这样的命令是通过 SMS 设置“呼出”号码。IE 如果我向 GSM 模块发送“设置”一词，则接收消息的号码将成为触发传感器时 GSM 模块将呼叫的新号码。

我必须在代码中初始化一个默认电话号码：

```
char ph_number[]="+35387914xxxx"; 
```

然后在我的程序中，我有一些代码来检查包含“设置”命令的任何短信，如果是，请将 ph_number = 设置为发件人号码。

然后我需要永久保存该新号码以成为默认呼叫号码，即使 Arduino 已重置，直到收到新的设置命令。有没有办法做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:37:39.597

您可以将其存储在 FLASH 或 EEPROM 中的特殊位置，并在启动时从那里读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:22:59.180

[您可以使用Arduino EEPROM 库](http://arduino.cc/en/Reference/EEPROM)读取/写入EEPROM 。这允许您一次访问内存中的一个点，示例草图是：

```
#include <EEPROM.h>

int a = 0;
int value;

void setup()
{
  a = EEPROM.read(0); //reads from point 0 in the memory (the first point)
}

void loop()
{
   value = analogRead(A0);
   if(value != a){
       a = value;
       EEPROM.write(0, a);
   }
} 
```

保存字符时，它们在保存之前首先转换为十进制等值，之后必须再次转换出来。同样重要的是要记住，内存中的每个点只能存储 1 个字节的数据，最大值为 255，并且 EEPROM 的读/写次数有限 - 工厂指定的最大值为 100000，但它可能会更高。

# jquery - 条件匹配后仅运行一次 jQuery 事件

> ID：15637249
> 
> 赞同：4
> 
> 时间：2013-03-26T12:36:03.893
> 
> 标签：jquery, html

我正在制作在线产品网站，我正在触发一个滚动事件，开始时只会显示 12 个元素，但是当第 8 个元素滚动到顶部时，滚动事件应该只运行一次，但每次向下滚动时它都会运行，请帮忙. 这是我的代码：

```
var navigation_offset_top = $('.prods-list li:nth-child(4)').offset().top;  
    $(window).on("scroll",function(){
        var scroll_top = $(window).scrollTop(); // current vertical position from the top
        // if scrolled more than the navigation, change its position to fixed to stick to top, otherwise change it back to relative
        if (scroll_top > sticky_navigation_offset_top) 
        { 
            console.log("Hi");
        }       
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:39:47.473

当滚动到正确的点时，使用`on()`and和取消绑定事件处理程序：`off()`

```
var navigation_offset_top = $('.prods-list li:nth-child(4)').offset().top;  

$(window).on("scroll", doScroll);

function doScroll() {
    var scroll_top = $(window).scrollTop();
    if (scroll_top > sticky_navigation_offset_top) { 
        console.log("Hi");
        $(window).off('scroll', doScroll);
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T12:37:10.813

调用[`unbind()`](http://api.jquery.com/unbind/)以解除事件与对象的绑定。

```
$(window).on("scroll",function(){
    var scroll_top = $(window).scrollTop(); // current vertical position from the top
    // if scrolled more than the navigation, change its position to fixed to stick to top, otherwise change it back to relative
    if (scroll_top > sticky_navigation_offset_top) 
    { 
        console.log("Hi");
    }       
    $(this).unbind("scroll");
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T12:41:06.323

我认为您需要的是**.one**方法

```
$(window).one("scroll",function(){
    var scroll_top = $(window).scrollTop(); // current vertical position from the top
    // if scrolled more than the navigation, change its position to fixed to stick to top, otherwise change it back to relative
    if (scroll_top > sticky_navigation_offset_top) 
    { 
        console.log("Hi");
    }       
}); 
```

您可以在这里了解更多信息：http: [//api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:37:40.707

您可以在完成后取消绑定事件。

喜欢 `$(this).unbind("scroll);`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-29T00:08:20.800

```
var thisHash = window.location.hash;
jQuery(document).ready(function() {

    if(window.location.hash) {
      jQuery.fancybox(thisHash, {
        padding: 20
        // more API options
      });
    }

}); 
```

这更好，因为您不需要按钮来触发fancybox。使用之前的代码，我无法在fancybox 中插入表单，因为每次我在表单内部单击时，它都会重新启动fancybox。

# javascript - jQuery中的实时验证？

> ID：15637260
> 
> 赞同：0
> 
> 时间：2013-03-26T12:36:51.253
> 
> 标签：javascript, jquery, livevalidation

在我的 HTML 页面中，我使用[Live Validation 库](http://livevalidation.com/)

然而，我的问题是当我输入正确的值时，库显示“不匹配！” 当我清除所有输入时，它会正确验证。这是我的代码示例：

```
<script type="text/javascript" src="resources/jquery/livevalidation.js"></script>

<p>
        <label for="password">Password</label>
        <form:password id="password" path="password" tabindex="4" />
    </p>
    <p>
        <label for="password">Confirm Password</label>
        <form:password id="conformPassword" path="conformPassword" tabindex="5" />
    </p>
-----
    <script>
     $(document).ready(function(){
         ValidCaptcha();
     });
</script>
<script type="text/javascript">

    function ValidCaptcha() {
        var password1 = new LiveValidation('conformPassword');
        password1.add( Validate.Confirmation, { match: 'password' } );
    }
</script> 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:08:09.353

我根据您的代码制作了这个示例……顺便说一句，它正在工作：

```
 <html>
    <head>

    <script type="text/javascript" src="http://livevalidation.com/javascripts/src/1.3/livevalidation_standalone.compressed.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript">
        function ValidCaptcha() {
            var password1 = new LiveValidation('conformPassword');
            password1.add( Validate.Confirmation, { match: 'password' } );
        }
        $(document).ready(function() {
          ValidCaptcha();

        });
    </script>
    </head>
    <body >
        <p>
            <label for="password">Password</label>
            <input type="password" id="password"  tabindex="4" />
        </p>
        <p>
            <label for="password">Confirm Password</label>
            <input type="password" id="conformPassword" tabindex="5" />

        </p>
    -----

    </body>

    </html> 
```

在我的本地主机上测试；我切换了javascript的顺序。

萨卢多斯 ;)

# java - XSL 不使用 Wicket XsltTransformerBehavior 显示值

> ID：15637264
> 
> 赞同：0
> 
> 时间：2013-03-26T12:37:06.367
> 
> 标签：java, xml, xslt, wicket

我编写了一个 Wicket 应用程序，它应该使用 XSL 查看基本的 XML。当我在 w3schools 教程中解析代码时，一切正常。当我使用 Wickets XsltTransformerBehavior 时，我只看到基本的表结构，但看不到值。

XML:

```
<ecgreport timestamp="2000-01-01 00:00:00">
<patient>
    <id>1</id>
    <name>xyz</name>
    <sex>male</sex>
    <birthdate>1900-01-01 12:00:00</birthdate>
</patient>
</ecgreport> 
```

XSL：

```
<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>
  <h3>CDA Report <xsl:value-of select="ecgreport/@timestamp"/></h3>
    <table border="1">
      <tr bgcolor="#9acdff">
        <th>title</th>
        <th><xsl:text>value</xsl:text></th>
      </tr>
      <tr>
        <td>name</td>
        <td><xsl:value-of select="ecgreport/patient/name"/></td>
      </tr>
      <tr>
        <td>sex</td>
        <td><xsl:value-of select="ecgreport/patient/id"/></td>
      </tr>
      <tr>
        <td>birthdate</td>
        <td><xsl:value-of select="ecgreport/patient/birthdate"/></td>
      </tr>
    </table>
  </body>
  </html>
</xsl:template> 
```

W3School 报告以下内容（这是我想要的）： ![w3school 成绩](../Images/caa2e6cc800052f51f52077bfa5bd306.png)

检票口给我留下了： ![检票结果](../Images/723bb1ab66bf8690b011e9d10480c26a.png)

检票口代码片段。“数据”来自 ResultSet，System.out 显示上面发布的 xml：

```
XsltTransformerBehavior xslb = new XsltTransformerBehavior("ecg1.xsl");
xsl = new Label("last_cda",rs.getString("data"));
xsl.setEscapeModelStrings(false);
xsl.add(xslb);
add(xsl); 
```

我在 Chrome、Firefox、IE10 上尝试过——我猜它们现在都支持 XSL。我想我在转换步骤中丢失了数据。我需要一个 DOM 对象作为输入吗？还是我犯了另一个菜鸟错误？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T15:06:11.117

问题在于您的 XSL。查看 XsltTransformerBehavior 类的帮助页面：

[http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/markup/transformer/XsltTransformerBehavior.html](http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/markup/transformer/XsltTransformerBehavior.html)

它说：

> 容器标签将是用于转换的 xml 数据的根元素，以确保 xml 数据格式正确（单个根元素）。此外，属性 xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd 被添加到根元素以允许 XSL 处理器处理 wicket 名称空间。

在您的情况下，我不知道 ID last_cda 的容器标签是什么（您需要检查您的标记 HTML 文件）。假设它是一个div。所以你需要在你的 XSL 的 XPaths 中指定它，它应该看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>
  <h3>CDA Report <xsl:value-of select="div/ecgreport/@timestamp"/></h3>
    <table border="1">
      <tr bgcolor="#9acdff">
        <th>title</th>
        <th><xsl:text>value</xsl:text></th>
      </tr>
      <tr>
        <td>name</td>
        <td><xsl:value-of select="div/ecgreport/patient/name"/></td>
      </tr>
      <tr>
        <td>sex</td>
        <td><xsl:value-of select="div/ecgreport/patient/id"/></td>
      </tr>
      <tr>
        <td>birthdate</td>
        <td><xsl:value-of select="div/ecgreport/patient/birthdate"/></td>
      </tr>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

# linux - 用变量创建变量名

> ID：15637265
> 
> 赞同：1
> 
> 时间：2013-03-26T12:37:08.050
> 
> 标签：linux, bash

我有这样的事情：

```
$CORSAIR_TYPE="good"
$CASE="CORSAIR"
...
$local temp_type=${CASE}_TYPE
echo ${!temp_type} 
```

这给了我变量的值`CORSAIR_TYPE`，它是“好”的。有没有办法在不创建`temp_type`变量的情况下做到这一点？我会用什么代替`echo ${!temp_type}`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:33:15.470

对于其他偶然发现这篇文章的人，这是我发现的一种方法：

```
echo $(eval echo $`echo ${CASE}_TYPE`) 
```

# java - 使用 AES 加密的令牌不会改变

> ID：15637267
> 
> 赞同：0
> 
> 时间：2013-03-26T12:37:11.973
> 
> 标签：java, encryption, aes

我需要为每次运行 AES（在 JAVA 中）生成不同的令牌，因为我所做的是`System.currentTimeMillis()`在 java 中使用当前系统时间附加要加密的字符串，并使用管道字符“|”分隔它们。但是面临的问题是每次运行的加密字符串都是相同的，并且在解密时我得到了正确的字符串。为什么会这样？

加密代码：

```
import java.security.Key;

import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Base64;

public class AESEncryptor {
    private static final String ALGO = "AES";
    private final static byte[] keyValue =new byte[] { 'T', 'h', 'e', 'B', 'e', 's', 't','S', 'e', 'c', 'r','e', 't', 'K', 'e', 'y' };

    public static String encrypt(String Data) throws Exception {
            Key key = generateKey();
            Cipher c = Cipher.getInstance(ALGO);
            c.init(Cipher.ENCRYPT_MODE, key);
            byte[] encVal = c.doFinal(Data.getBytes());
            byte[] encryptedValue = Base64.encodeBase64(encVal);
            String encryptedPass = new String (encryptedValue);
            return encryptedPass;
        }

    public static String decrypt(String encryptedData) throws Exception {
        Key key = generateKey();
        Cipher c = Cipher.getInstance(ALGO);
        c.init(Cipher.DECRYPT_MODE, key);
        Base64.decodeBase64(encryptedData);
        byte[] decordedValue =  Base64.decodeBase64(encryptedData);
        byte[] decValue = c.doFinal(decordedValue);
        String decryptedValue = new String(decValue);
        return decryptedValue;
    }

    private static Key generateKey() throws Exception {
        Key key = new SecretKeySpec(keyValue, ALGO);
        return key;
    }

}

1st run :
argument passed to encrypt : somepassword|1364311519852
encrypted string : 5pQ1kIC+8d81AD7zbLOZA==(encrypted string)
decrypted string : somepassword|1364311519852

2nd run : 
argument passed to encrypt : somepassword|1364311695048
encrypted string : 5pQ1kIC+8d81AD7zbLOZA==(same encrypted string as before)
decrypted string : somepassword|1364311695048 
```

有人可以帮助为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:31:29.403

虽然我仍然不相信你可以解密你的输出（我相信@user93353 提供的输出）。ECB 模式并不理想，您可能应该切换到 CBC。

```
private static final String ALGO = "AES/CBC/PKCS7Padding"; 
```

添加一个随机生成的 IV，将其添加到您的密文中，即使您一遍又一遍地加密相同的文本，您的密文将完全看起来像随机数据。

由于您提到了令牌一词，这表明您正在使用密文来保证真实性，这不是 aes 自己提供的。我认为您应该认真研究经过[身份验证的加密](http://en.wikipedia.org/wiki/Authenticated_encryption)，特别是 encrypt(aes-cbc)-then-mac(hmac)，您可以在其中将密文的 mac 和 iv 附加到密文的末尾。

# delphi - 在 Delphi 项目中，Esent 在 Windows 8 中崩溃

> ID：15637269
> 
> 赞同：0
> 
> 时间：2013-03-26T12:37:19.583
> 
> 标签：delphi, windows-8, esent, edb

我已经在我的项目中广泛使用 ESENT，我真的很喜欢它的简单和快速。也很稳定！！

但我对 Windows 8 有一个大问题！！！每当我调用 JetSetSystemParameter 以外的东西时，无论我如何链接到 esent.dll（动态或静态），dll 都会崩溃，将我的应用程序拖下悬崖。

不幸的是，我仍然无法让它运行。我的代码在 Windows 7 或更早版本上运行没有问题。但是在 Windows 8 中，当我尝试创建实例（浮点无效操作）时，esent.dll 崩溃。

我尝试了所有可能的调用约定。这绝对不是问题。我尝试了更多并发现了这种奇怪的情况： 1\. 我使用 VS 2012 创建了一个演示应用程序，并且 JetCreateInstance 工作得很好。2.在Delphi XE3中完全相同的代码会发送esent.dll崩溃。3.我使用VS 2012创建了一个DLL，导出了在上述演示应用程序中完美运行的方法，认为这是一个Delphi错误。4\. 然后我将 DLL 加载到一个演示 Delphi 项目中（尝试使用 6、XE2 和 XE3）。调用方法和 BOOM。同样的崩溃。

现在我的假设是微软不会允许？！？与 esent.dll 一起正常工作的任何其他开发人员环境。**这可能吗？？？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:42:25.073

该错误是浮点无效操作，使问题听起来好像与浮点控制字有关。

默认情况下，Delphi 不屏蔽浮点异常。因此，当代码要求浮点单元执行导致错误的操作时，FPU 会发出信号，然后将其转换为异常。

但大多数其他 Windows 开发环境在 FPU 上掩盖了这些异常。此类代码是在执行环境屏蔽了 FPU 异常的假设下编写的。但是如果你从 Delphi 调用一个 DLL，执行环境将有未屏蔽的 FPU 异常，打破了这个假设。我怀疑如果你屏蔽 FPU 异常，那么你的问题就会消失。

要测试这是否是问题所在，您可以简单地将其添加到您的代码中，并在其生命周期的早期执行：

```
Set8087CW($027F); 
```

这将屏蔽所有异常并将 FPU 控制字设置为默认的 Windows 设置。

从长远来看，您可能希望在每次调用此 DLL 之前屏蔽异常，然后在对 DLL 的调用返回时恢复 FPU 控制字。

使用 Delphi 提供的库，这是一个稍微危险的游戏，因为`Set8087CW`它使用全局变量而不是线程安全的`Default8087CW`。如果您想了解有关该问题的更多信息，请参阅[QC#107411](http://qc.embarcadero.com/wc/qcmain.aspx?d=107411)。

# ios - 无法停止 NSLinguisticTagger 块

> ID：15637272
> 
> 赞同：0
> 
> 时间：2013-03-26T12:37:34.057
> 
> 标签：ios, objective-c-blocks

我正在使用 NSLinguisticTagger 对象和他的方法 enumerateTagsInRange:scheme:options:usingBlock。

问题是，当我使用长字符串时，没有换行符，我无法停止该块。

这是我启动字符串和 NSLinguisticTagger 的代码：

```
NSLinguisticTagger *tagger = [[NSLinguisticTagger alloc] initWithTagSchemes:@[NSLinguisticTagSchemeTokenType]
                                                                    options:NSLinguisticTaggerOmitOther | NSLinguisticTaggerOmitPunctuation | NSLinguisticTaggerOmitWhitespace];

[tagger setString:@"Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda."];

[tagger enumerateTagsInRange:NSMakeRange(0, [tagger.string length])
                      scheme:NSLinguisticTagSchemeTokenType
                     options:NSLinguisticTaggerOmitOther | NSLinguisticTaggerOmitPunctuation | NSLinguisticTaggerOmitWhitespace
                  usingBlock:^(NSString *tag, NSRange tokenRange, NSRange sentenceRange, BOOL *stop){

                       NSString *word = [tagger.string substringWithRange:tokenRange];

                       if ([word compare:@"lamet" options:NSCaseInsensitiveSearch] == NSOrderedSame) {
                            *stop = YES;
                       }
                  }
]; 
```

我所期望的是，在我设置 *stop = YES 之后，块停止他的循环。但这并没有发生。块跳转到另一个句子，但没有停止。如果字符串在句子末尾有换行符 (\n)，则块会按我的预期停止（使用相同的代码）。但是当字符串有换行符时，该块会导致内存泄漏。

任何人都知道发生了什么，我可以尝试阻止我的工作吗？

string enumerateSubstringsInRange:options:usingBlock: 的方法在我的实际解决方案中没有解决我的问题......我想使用 NSLinguisticTagger...

* * *

我就这个问题联系了 Apple 开发者技术支持，他们让我将此注册为错误。所以我做了一个错误报告，我正在等待答案。任何消息我都会编辑这篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T18:22:24.307

我在 iOS 7.1 中按照相同的步骤操作，问题不再出现。

当我将其作为错误报告给 Apple 时，他们回答说可能已在 iOS7 中解决。但直到现在我才有时间再次测试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:53:06.460

奇怪的！

我能够复制您的问题。如果将 stop 设置为 YES，看起来 enumerateTagsInRange 仍然会枚举所有剩余句子的第一个单词！

解决该问题的一种方法是将调用 enumerateTagsInRange 更改为：

```
[tagger enumerateTagsInRange:NSMakeRange(0, [tagger.string length])
                      scheme:NSLinguisticTagSchemeTokenType
                     options:NSLinguisticTaggerOmitOther | NSLinguisticTaggerOmitPunctuation | NSLinguisticTaggerOmitWhitespace
                  usingBlock:^(NSString *tag, NSRange tokenRange, NSRange sentenceRange, BOOL *stop){

    if (*stop == NO) { // Only deal with the word if stop if not set to YES
        NSString *word = [tagger.string substringWithRange:tokenRange];

        if ([word compare:@"lamet" options:NSCaseInsensitiveSearch] == NSOrderedSame) {
            *stop = YES;
        }
    }
}]; 
```

请参阅添加的 if 语句。

# playframework-2.1 - 如何在 Play 2.1 中指定不同的配置文件进行测试

> ID：15637279
> 
> 赞同：13
> 
> 时间：2013-03-26T12:37:53.750
> 
> 标签：playframework-2.1

我想为多个测试环境（生产、登台、开发）定义不同的数据库连接。在阅读了帖子“[我如何为 sbt 测试指定带有 sbt 0.12.2 的配置文件？](https://stackoverflow.com/questions/15399161/how-do-i-specify-a-config-file-with-sbt-0-12-2-for-sbt-test) ”之后，似乎可以在早期版本的 Play 中使用以下 SBT 设置：

```
val main = play.Project(appName, appVersion, appDependencies).settings(
    javaOptions in Test += "-Dconfig.file=conf/test.conf"
) 
```

但是，如果我在 Build.scala 中使用此设置，则会收到以下错误：

```
not found: value javaOptions 
```

所以我的问题是，如何为不同的测试环境定义不同的连接？

* * *

**编辑：** 一种可能的解决方法是在测试期间覆盖默认设置。这可以通过环境变量来完成。

```
object Config {
  var defaultConfig = Map(
    "db.default.user" -> "user",
    "db.default.pass" -> "************"
  )

  def additionalConfiguration(): Map[String, _] = sys.env.getOrElse("PLAY_TEST_SCOPE", "") match {
    case "development" => {
      defaultConfig += "db.default.url" -> "jdbc:mysql://host:3306/development"
      defaultConfig
    }
    case "staging" => {
      defaultConfig += "db.default.url" -> "jdbc:mysql://host:3306/staging"
      defaultConfig
    }
    case "production" => {
      defaultConfig += "db.default.url" -> "jdbc:mysql://host:3306/production"
      defaultConfig
    }
    case _ => {
      throw new Exception("Environment variable `PLAY_TEST_SCOPE` isn't defined")
    }
  }
} 
```

然后使用此配置运行一个假应用程序。

```
FakeApplication(additionalConfiguration = Config.additionalConfiguration()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-09T05:54:14.450

我们可以混合上述解决方案，将配置文件作为参数传递给 sbt。
这对于将测试集成到 CI 管道中很有用

首先，在**Build.scala**文件中

```
val testOptions = "-Dconfig.file=conf/" + Option(System.getProperty("test.config")).getOrElse("application") + ".conf"

val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
    javaOptions in Test += testOptions
) 
```

然后，在命令行中用**integ.conf运行测试**

```
sbt -Dtest.config=integ test 
```

使用默认的**application.conf**

```
sbt test 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T13:47:50.843

`javaOptions`包含在[Keys 对象](http://www.scala-sbt.org/release/api/index.html#sbt.Keys%24)中。

确保在`Build.scala`文件中使用正确的导入：

```
import Keys._ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-08T19:53:55.780

Play 2.5.x 更新

不再需要显式导入 import Keys._，并且配置资源位置的 vm 参数已更改。

```
javaOptions in Test += "-Dconfig.resource=<conf_name>.conf" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-26T12:52:04.303

您可以使用替代配置文件从控制台运行您的应用程序，无论如何您需要使用`-Dconfig.file`完整路径，因为存在一些问题......我无法通过其他选项实现。对于 unix env 中的示例：

```
play -Dconfig.file=/home/akkie/play/some-project/conf/local_akkie_dev.conf "~run 9123" 
```

当然，为了更容易启动，您可以创建 bash 脚本来调用此行。

**编辑：**请注意，您不需要在每个附加配置文件中编写整个配置，因为您可以在开始时***包含***主配置，然后仅覆盖所需的属性：

```
include "application.conf"

key.to.override=blah 
```

看看[官方文档](http://www.playframework.com/documentation/2.1.x/ProductionConfiguration)

# spring - 当我们使用createRelationshipBetween时，如何在Spring数据neo4j中为关系添加属性

> ID：15637280
> 
> 赞同：0
> 
> 时间：2013-03-26T12:37:55.143
> 
> 标签：spring, neo4j, spring-data-neo4j

例如，我想在用户 A 和用户 B 之间建立关系，他们有名为 MakeFriend 的关系实体，我使用下面的代码，但我也想在关系实体中设置一些属性值，如角色 = 10....... ..

```
userRepository.createRelationshipBetween(startUser, endUser, MakeFriend.class, RelTypes.FRIEND.name());

@RelationshipEntity
public class MakeFriend {
    @GraphId
    private Long id;
    private String role;
    @StartNode
    private UserEntity startUser;
    @EndNode
    private UserEntity endUser

@NodeEntity
public class UserEntity implements Serializable {

    private static final long serialVersionUID = 1L;
    public static final String FRIEND = "FRIEND";
    public static final String JOYNED = "JOYNED";
    @GraphId
    private Long id;
    @Indexed(unique = true)
    private Long userId;
    private String email; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:49:04.693

You could could add the following to your UserEntity class:

```
@RelatedToVia(type = RelTypes.FRIEND, direction = Direction.BOTH)
private MakeFriend friend;

friend.setRole("yourRole"); 
```

Another way to do it, when you're using the advanced mapping mode, is using one of the [NodeBacked.relateTo()](http://static.springsource.org/spring-data/data-neo4j/docs/current/api/org/springframework/data/neo4j/aspects/core/NodeBacked.html) methods. Then add the property to the returned Relationship.

And a third way, it to use the [Neo4jTemplate.createRelationshipBetween()](http://docs.spring.io/spring-data/neo4j/docs/3.3.0.M1/api/org/springframework/data/neo4j/support/Neo4jTemplate.html#createRelationshipBetween-org.neo4j.graphdb.Node-org.neo4j.graphdb.Node-java.lang.String-java.util.Map-) method and provide your properties (e.g. role) as the final argument.

# php - 如何将布尔参数传递给php函数？

> ID：15637290
> 
> 赞同：0
> 
> 时间：2013-03-26T12:38:27.670
> 
> 标签：php, mysql, boolean

当我试图获得“已售出”和“特色”的价值时，我什么也得不到。我究竟做错了什么？

```
function list_products($sold = false, $featured = false) {
    global $link;
    $result = mysqli_query($link, "SELECT * FROM products product JOIN images image ON product.id = image.product_id WHERE product.main_image = image.id AND product.sold = $sold AND product.featured = $featured") or die(mysqli_error($link));
}

list_products(false, true); 
```

编辑：如果我尝试回显 $sold 或 $featured，它们是空白的。应该显示 1 或 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:43:16.703

将布尔值转换为 PHP 中的字符串以进行 mysql 查询不是一个好主意 - true 将变为 '1' 而 false 将变为 ''。使用类似的东西`($boolVar ? 1 : 0)`。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-08T09:13:30.870

在您的情况下，您可以在调用函数时为参数提供数值（无论如何，您都希望在查询中将它们用作数字）。

尝试：

```
function list_products($sold = 0, $featured = 0) {
    global $link;
    $result = mysqli_query($link, "SELECT * FROM products product JOIN images image ON product.id = image.product_id WHERE product.main_image = image.id AND product.sold = $sold AND product.featured = $featured") or die(mysqli_error($link));
}

list_products(0, 1); 
```

# mysql - 如何将 mysql_data_seek 与 PDO 一起使用？

> ID：15637291
> 
> 赞同：9
> 
> 时间：2013-03-26T12:38:39.163
> 
> 标签：mysql, pdo

我想将 mysql_data_seek 与谷歌搜索中的 PDO 一起使用，我发现它应该如下所示：

```
$row0 = $result->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_ABS, 0); 
```

但是它不起作用，我做错了什么？这是我的代码：

```
$query = "SELECT name,age FROM users";
$q = $db->prepare($query);
$q->execute();

$q->setFetchMode(PDO::FETCH_ASSOC);
$arrayData = $q->fetchAll();

foreach ($arrayData as $row){

    echo $row['name'] ." ";
    echo $row['age'] ."<br>";
}

$result = $q->fetch(PDO::FETCH_OBJ,PDO::FETCH_ORI_ABS,4);
var_dump($result); 
```

我只想从上次运行查询中获取对象形式的第 5 行。我不想再次运行这个查询（正如一些人告诉我的那样）我只想要来自 sql 缓冲区的结果。

var_dump 结果是：bool(false)

有任何想法吗？

编辑：

感谢您的回答，对不起，但也许我也没有解释自己。我喜欢 JSON 的技巧，但关键是第 5 行是示例。我只想使用 PDO 缓冲区中的查询结果，就像我在常规 mysql 中使用 mysql_data_seek 所做的一样（更改光标）。可能吗？我喜欢所有的技巧，但这不是我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T12:34:08.810

PDO 'cursor' 默认是 **PDO::CURSOR_FWDONLY**这意味着游标不能像 mysql_data_seek 发生的那样回到零，以允许游标回到零，必须定义使用'scrollable cursor'

例子：

```
$db->prepare($query, array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL)); 
```

在像这样使用它之前：

```
$row0 = $result->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_ABS, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:38:11.347

```
$result = $arrayData[4]; 
```

是你所需要的全部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:05:33.470

你可以这样做：

```
$c = 1;
$saved=null; 
while($row = $q->fetch()){
    if($c==4){
        $saved = clone $row;
    };
    $c++;
    somethingelse;
} 
```

然后 $saved 将包含第 4 个元素作为对象，几乎没有额外的开销计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:53:24.407

如果你想要第 5 行的结果，你可以这样做：

```
$result = json_decode(json_encode($arrayData[4]), FALSE);
var_dump($result); 
```

或类似的东西：

```
$object = new stdClass();
foreach ($array as $key => $value)
{
    $object->$key = $value;
} 
```

只是好奇！为什么需要对象形式？

编辑（这将给出第 5 行的对象形式）：

```
$index = 0;
$fifthRow = new stdClass();
while($row = $q->fetch())
{
   if($index++==4)
        $fifthRow = json_decode(json_encode($row), FALSE);
} 
```

# c# - 如何从列表时间中获取最接近的项目

> ID：15637293
> 
> 赞同：1
> 
> 时间：2013-03-26T12:38:41.257
> 
> 标签：c#, .net, collections

我有一个属性类列表，其中包含开始时间和结束时间作为属性，例如： `List<PropSchedules>`

```
PropSchedules   
{  
 DateTime StartTime,  
 DateTime EndTime  
} 
```

值是这样的：

```
Starttime   EndTime
07:00       09:00
11:00       14:00
15:00       20:00 
```

现在我有时间，我想知道哪一个是最低的更大的开始时间。

就像我有时间说，10:00 那么第二个项目是最低的。

所以，任何人都有一些捷径可以得到相同的东西，或者我必须循环并检查每一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:42:50.747

尝试：

```
your_list.Where(x => x.Starttime > XXXX).Min(. . .) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:45:32.827

如果我理解这个问题，像这样的事情？

```
List<PropSchedules> propSchedules = // ...
DateTime Time = // ...

var closest = propSchedules
    .Where(e => e.StartTime > Time)
    .Select(e => e.StartTime)
    .Min(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T12:47:52.220

如果您要插入和删除很多值，则可以使用 [SortedList](http://msdn.microsoft.com/en-us/library/ms132319%28VS.85%29.aspx)或[SortedDictonary](http://msdn.microsoft.com/en-us/library/f7fta44c%28VS.85%29.aspx)来确保事情井井有条。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:46:16.753

考虑一个类 PropSchedules

```
class PropSchedules
{
    public DateTime StartTime;
    public DateTime EndTime;
} 
```

和 PropSchedules 列表

```
List<PropSchedules> listSchedules; 
```

和一个名为 start 的参考日期：

```
DateTime start = DateTime.Now; // for example 
```

然后你可以找到下一个 PropSchedules ：

```
PropSchedules next = listSchedules.Where(s => s.StartTime > start).OrderBy(s => s.StartTime).FirstOrDefault(); 
```

如果没有更低的值，next 可以为 null

# c# - Visual Studio：库输出路径灵活性

> ID：15637304
> 
> 赞同：1
> 
> 时间：2013-03-26T12:39:20.717
> 
> 标签：c#, visual-studio-2010, visual-studio, debugging

好的，这就是问题所在。我有2个项目。一个是主项目（可执行），另一个是库。

*   MyNameSpace.Libraries.TheHolyMefLibrary
*   MyNameSpace.TheProduct

这两个项目的默认输出路径是`bin\Debug\`，所以当我编译主应用程序时，在调试文件夹中我可以找到可执行文件以及库。

现在，我想要以下输出：

*   bin\Debug\MyExecutable.exe
*   bin\Debug\plugins\TheHolyMefLibrary.dll

但是当我将库的输出路径更改为 时`bin\Debug\plugins\`，编译器仍然会创建以下输出

*   bin\Debug\MyExecutable.exe
*   bin\Debug\TheHolyMefLibrary.dll

我如何确保，无论哪个项目链接到库，它始终位于主程序集的输出路径的子文件夹中，即使在设置解决方案中也是如此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:46:37.453

为了解决这个问题，我认为最好的方法是创建一个`Post-build script`将链接程序集 DLL 移动到插件文件夹的位置。当您右键单击应用程序项目文件并选择`Properties`然后转到`Build Events`选项卡时，您可以找到构建后脚本编辑器。要创建构建脚本，您可以使用`CMD`命令，例如`MOVE`您的案例中的命令或`XCOPY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:55:37.867

将引用程序集的“复制本地”属性设置为 False，以停止将其复制到主项目的 bin 文件夹。

# vb6 - 如何在 vb 6.0 中限制文本框中的字符数量

> ID：15637305
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:39:23.250
> 
> 标签：vb6, textbox

我正在使用 vb 6.0 做一个注册系统。我想让用户输入手机号码。所以我希望手机号码仅限于 8 位数字。如果数字超过 8 位，当用户单击保存按钮时，会弹出一个消息框要求用户重新检查数据，直到数据正确插入后才会保存。我这样做的编码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:41:00.203

不要让您的用户输入超过允许的字符数，然后告诉他们他们不能这样做。TextBox 控件具有您可以从名为**MaxLength**的设计器访问的属性。将该属性设置为 8 以将使用限制为最多 8 个字符。更好的是使用 MaskedEditBox 并使用**Mask**属性输入一个限制和格式化用户输入的掩码。要添加 MaskEditBox，您需要打开 Components 窗口并将**Microsoft Masked Edit Control 6.0**添加到您的工具箱中。然后，您可以将控件添加到表单中。

# .htaccess - 将非 SEF url 重写为 SEF 等效项

> ID：15637307
> 
> 赞同：0
> 
> 时间：2013-03-26T12:39:28.083
> 
> 标签：.htaccess, mod-rewrite, joomla

我已经在网上和论坛中搜索了这些问题。我有一个 Joomla 2.5 站点，启用了 SEF，但 Google 仍在获取非 SEF 网址。

我尝试了许多重写器，因为我认为您不能在使用重写器时处理带有查询的 URL。

示例 url 我试图重定向：hxxp://www.topdogsecurity.co.uk/staff/index.php?option=com_content&view=article&id=33&Itemid=216

以最简单的形式，我希望将所有包含查询的 url 推送到 SEF url，例如 hxxp://www.topdogsecurity.co.uk/detection-services/

理想情况下，我希望能够重定向到确切的文章，但目前只获得一些重写 URL 的重定向会很好。对不起，我不擅长 htaccess，我看到的例子比什么都更令人困惑

对于 .htaccess 的命令结构，我很感激任何帮助（我不能保持原样）

ķ

最近的测试：

RewriteCond %{QUERY_STRING} (?:^|&)option=com_content(?:&|$) RewriteRule (.*) [http://www.topdogsecurity.co.uk/detection-services/](http://www.topdogsecurity.co.uk/detection-services/) [R=301]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:24:19.067

您知道即使启用了 SEF，Joomla 也可以使用非 SEF URL？因此，非 SEF URL 始终有效，并将指向正确的文章。

另一种方法是不同的：如果 SEF 被禁用，SEF URL 不起作用并导致 404 错误。但这不是你的问题。

就您而言，您根本不需要任何特殊规则。一切都应该正常工作。

# sparql - Allegrograph 中的 pathLength 和 match 函数

> ID：15637309
> 
> 赞同：1
> 
> 时间：2013-03-26T12:39:33.087
> 
> 标签：sparql, allegrograph

我正在玩弄属性路径，我正在使用 AllegroGraph Server Edition 4.9。我创建了一个 sparql 查询，

```
select ?y ?x (count(?x) as ?degree) 
where{ 
      {
        ?x $path ?y.
        filter(match($path,foaf:knows))
        filter(pathLength($path) <= 3)
      } 
      UNION 
      {
        ?y $path ?x.
        filter(match($path,foaf:knows))
        filter(pathLength($path) <= 3)
      } 
    } group by ?y ?x. 
```

我希望看到与 foaf:knows 属性的最大 3 度相关性。但它给了我 match 和 pathLength 函数不被识别。我认为这是一个寓言问题。或者也许我的查询是错误的。有人在 allegrograph 上尝试过 pathLengh 和 match 函数吗？

谢谢

恰达什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:47:57.070

Sparql 1.1 不包括 match 和 pathLength 函数。[这](http://www.w3.org/TR/2013/REC-sparql11-query-20130321/#propertypaths)是属性路径的参考。所以这是我的坏事。希望在进一步的 sparql 版本中看到这些功能。

# regex - 如何从 Perl 中多行变量的 RegEx 操作中获取值数组？

> ID：15637314
> 
> 赞同：0
> 
> 时间：2013-03-26T12:39:57.570
> 
> 标签：regex, arrays, perl, variables, multiline

经过几天阅读 StackExchange 帖子和无休止的反复试验后，我决定请求全世界的帮助。

我存储了以下*多行*字符串`$received_data`，我只需要打印每行的传输速度值。

这是我的代码片段：

```
my $received_data1 = 'Transfer Speed=81.9252432155658
2013/03/25 19:51:43,915|INFO|### STATUS: OK
2013/03/25 19:51:43,915|INFO|### DATA: Transfer Speed= 83.924363456758
2013/03/25 19:51:45,927|INFO|Checking FTP upload status...
2013/03/25 19:51:45,927|INFO|### INFO: Collect Throughput.
2013/03/25 19:51:45,927|INFO|Checking FTP upload status...
2013/03/25 19:51:45,927|INFO|### DATA: Transfer Speed=67.83685237005002';

my $regex =  qr/Transfer Speed=([0-9]{1,}[.][0-9]{1,}[^\n])/m;

if($received_data1 =~ $regex){
    #$received_data1 =~ s/$received_dat/$regex/gm;
    print $1;
}else{
    print "nothingFound";
} 
```

从`print $1`，我只能获得第一个传输速度，即*81.9252432155658*，而不能获得其他传输速度。我传递了修饰符`/gm`，让 Perl 知道输入字符串是多行的，并在找到第一个匹配项后继续搜索。正则表达式在`$regex`这个网站上工作得很好：http: [//www.solmetra.com/scripts/regex/index.php](http://www.solmetra.com/scripts/regex/index.php)我得到了一个匹配值的数组。

获取数组就足够了，因为我可以循环遍历数组并将值打印到文件或控制台上。

我将不胜感激任何帮助。

PS：我已经阅读了大多数其他 Stack Exchange 帖子，但它们没有帮助。我希望我没有重复任何问题。如果有符合我要求的问题，我会很感激这个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:44:29.677

您需要`g`匹配操作上的修饰符。您可以在标量上下文中重复调用它

```
while ($received_data1 =~ /$regex/g) {
   print "$1\n";
} 
```

或在列表上下文中调用一次

```
for ($received_data1 =~ /$regex/g) {
   print "$_\n";
} 
```

笔记：

*   速度前面有一个空格，但您的模式没有考虑到它。

*   `/m`对你没用，因为你既不使用`^`也不使用`$`。

*   我不知道你为什么`[^\n]`在你的模式中使用。它切断了速度的最后一位数字，这可能不是您打算做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:07:05.283

另一种方法

```
my @matches = $received_data1 =~ m/Transfer Speed=\s*(\d+\.\d+)/g;

if (@matches) {
    foreach my $m (@matches) {
        print "$m\n";
    }
} else {
    print "nothingFound";
} 
```

# c# - SqlFunctions 和 EntityFunctions 有什么区别？

> ID：15637317
> 
> 赞同：19
> 
> 时间：2013-03-26T12:40:03.620
> 
> 标签：c#, entity-framework

有什么不同 ？是否都用于在获取数据并将它们存储在内存中之前在 sql 端执行功能？

**PS：**
两者都用于linq to entites。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T12:50:10.563

正如文档所述[EntityFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)

> 提供在 LINQ to Entities 查询中公开概念模型规范函数的公共语言运行时 (CLR) 方法。有关规范函数的信息，请参阅规范函数（实体 SQL）。

其中[规范函数](http://msdn.microsoft.com/en-us/library/bb738626.aspx)

> 所有数据提供者都支持，并且可以被所有查询技术使用。提供者不能扩展规范函数。这些规范函数将被转换为提供者的相应数据源功能。这允许跨数据源以通用形式表示的函数调用。

而[SQLFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.aspx)

> 提供在 LINQ to Entities 查询中调用数据库中的函数的公共语言运行时 (CLR) 方法。

因此，尽管这两组函数都被转换为原生 SQL，但 SQLFunctions 是特定于 SQL Server 的，而 EntityFunctions 不是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T12:52:35.253

当我读到它时。CLR 将 EntityFunctions 函数转换为所有数据提供者都支持的“**规范函数”。**

但是 SqlFunctions 让**SQL Server**来完成这项工作，它们只为 SQL Server 指定。

[了解更多信息](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T12:58:18.797

`SqlFunctions`是 EF4 中引入的静态类，在程序集中`System.Data.Entity`。它包含一长串方法`Cos, DateAdd, DateDiff, DatePart, GetDate, Exp, Sign`，例如映射到 SQL Server 函数的方法。这些静态函数可以在 LINQ to Entities 查询中调用。

![在此处输入图像描述](../Images/921b88dea1eb6fb308fbd4a6d386665d.png)

EF4 还引入了静态`EntityFunctions`类。此类公开了可在 LINQ to Entities 查询中使用的概念模型规范函数。这些函数映射到 System.Data.Metadata.Edm 命名空间中的函数，并且它们仅在概念模型中可用。

![在此处输入图像描述](../Images/423b05f6b9f839b69bad3e760a2ef559.png)

欲了解更多信息，请单击[此处](http://www.scip.be/index.php?Page=ArticlesNET34)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-24T15:22:22.773

万一有人遇到这个旧帖子，`System.Data.Entity.EntityFunctions`现在已过时并替换为`System.Data.Entity.DbFunctions`.

# java - Java Web 服务创建大量 Tomcat 会话

> ID：15637325
> 
> 赞同：0
> 
> 时间：2013-03-26T12:40:24.617
> 
> 标签：java, web-services, session, tomcat, java-web-start

我在 Linux 上的 Tomcat 中运行 Java Web 服务。JWS 将继续为每个呼叫创建新会话。一旦用户完成 WebService 调用，我想删除/终止会话。这个事情谁有经验？我无法减少超时，因为 WebService 是更大应用程序的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:52:24.620

要么将 WS 移动到它自己的 Web 应用程序（可能一开始就应该这样做）并将其单独设置，安装一个 HTTP 过滤器拦截对 WS 的调用并在发送来自 WS 的响应后关闭会话，或者让 WS 自己关闭会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:22:25.687

因此，作为一种解决方法，我在 JWS 中创建了一个方法，并在从方法返回数据之前调用它。有点粗糙，但它的工作...

```
 private void dropWSSession(){
MessageContext messageContext = MessageContext.getCurrentContext();
HttpServlet servlet = (HttpServlet)messageContext.getProperty(HTTPConstants.MC_HTTP_SERVLET);
ServletContext servletContext = (ServletContext)servlet.getServletContext();
HttpSession session =((HttpServletRequest)messageContext.getProperty(HTTPConstants.MC_HTTP_SERVLETREQUEST)).getSession();
session.invalidate(); 
```

}

# javascript - 为什么 addClass 和 removeClass 会破坏我的 jQuery？

> ID：15637326
> 
> 赞同：0
> 
> 时间：2013-03-26T12:40:26.947
> 
> 标签：javascript, jquery, addclass, removeclass

```
$('.selected').removeClass('selected');
$(this).addClass('selected'); 
```

在添加上面的 2 行代码之前，整个函数都工作了。现在，当我单击时，只有这两行有效，其余代码无效。如果我删除这两行，代码将再次起作用。删除一个类并添加一个类可能会破坏这个函数的其余部分吗？我在这里做错了什么？

```
$(document).ready(function(){
    var subject;
    $('.subject').mouseenter(function(){
        if ( $(this).hasClass(subject) ) {
            return 0;
        }
        else {
            $(this).find('.info, img').fadeTo('fast', 1);
        }
    });
    $('.subject').mouseleave(function(){
        if ( $(this).hasClass(subject) ) {
            return 0;
        }
        else {
            $(this).find('.info').fadeTo('fast', 0);
            $(this).find('img').fadeTo('fast', 0.8);
        }
    });

    // BELOW IS WHERE THE PROBLEM IS

    $('[class$=-link]').click(function(){
        $('.selected').removeClass('selected'); // Why do these lines break the 
        $(this).addClass('selected');           // rest of this function?
        $('.' + subject).find('.info').fadeTo('fast', 0);
        $('.' + subject).find('img').fadeTo('fast', 0.8);
        subject = $(this).attr('class').replace("-link","");
        $('.'+ subject ).find('.info, img').fadeTo('fast', 1);
    });
}); 
```

[http://jsfiddle.net/n4SUX/2/](http://jsfiddle.net/n4SUX/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:15:03.570

据我所知，你想要这样的东西（避免需要更改 HTML）：

```
$('[class$=-link]').click(function(){
    $('.selected').removeClass('selected');
    $('.' + subject).find('.info').fadeTo('fast', 0).end().find('img').fadeTo('fast', 0.8);
    subject = $(this).attr('class').replace("-link","");//execute this line while "selected" class is not present
    $('.'+ subject).find('.info, img').fadeTo('fast', 1);
    $(this).addClass('selected');//add after everything else is complete
}); 
```

# ruby - 从具有命名空间节点的 ruby 类生成 xml

> ID：15637328
> 
> 赞同：2
> 
> 时间：2013-03-26T12:40:33.123
> 
> 标签：ruby, xml, object, mapping

我有一个这样的红宝石课程：

```
class MyResponse
    attr_accessor :results
    def initialize(results = nil)
        @results = results
    end
end 
```

有了这段代码，

```
resp = MyResponse.new 'Response text'
qname = XSD::QName.new('http://www.w3schools.com/furniture', :MyResponse)
xml = XSD::Mapping.obj2xml(resp, qname)
puts xml 
```

我设法从那个类生成这个 xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<n1:MyResponse xmlns:n1="http://www.w3schools.com/furniture">
  <results>Response text</results>
</n1:MyResponse> 
```

但我希望`<results>`节点也有命名空间前缀，如`<n1:results>`

我试图解决这个问题很长时间。请帮帮我。

编辑：我只需要所有节点都有命名空间前缀。我对任何其他方式或图书馆持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:01:44.283

[我喜欢用ROXML](https://github.com/Empact/roxml)读写 XML 。不幸的是，文档并不完整，尽管可以直接从[代码文档](https://github.com/Empact/roxml/blob/master/lib/roxml.rb)中检索到许多信息。我没有成功给出一个完全符合您要求的示例（xmlns 节点只是 xmlns 而不是 xmlns:n1）但也许您可以完成它：

```
require 'roxml'

class Response
    include ROXML

    xml_name 'MyResponse'

    xml_namespace :n1

    xml_accessor :xmlns, from: :attr
    xml_accessor :results, from: "n1:results"

    def initialize
        @xmlns = "http://www.w3schools.com/furniture"
    end

end

response = Response.new
response.results = "Response text"
puts '<?xml version="1.0" encoding="utf-8" ?>'
puts response.to_xml
# <?xml version="1.0" encoding="utf-8" ?>
# <n1:MyResponse xmlns="http://www.w3schools.com/furniture">
#   <n1:results>Response text</n1:results>
# </n1:MyResponse> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:29:37.663

从语义上讲，您不需要为每个节点加上命名空间前缀，以使它们都属于同一个命名空间。

出于所有目的，此 XML 等同于您的需求：

```
<?xml version="1.0" encoding="utf-8" ?>
<MyResponse xmlns="http://www.w3schools.com/furniture">
  <results>Response text</results>
</MyResponse> 
```

考虑到这一点，您可以使用`Builder`将`Response`XML 包装到其中（假设它实现了该`to_xml`方法 - 所有`ActiveModel`类都这样做）：

```
b = ::Builder::XmlMarkup.new
xml = b.MyResponse :xmlns => 'http://www.w3schools.com/furniture' do
  b << resp.to_xml
end 
```

# forms - Symfony2 ObjectChoiceList 选择了正确的选项

> ID：15637335
> 
> 赞同：1
> 
> 时间：2013-03-26T12:40:57.463
> 
> 标签：forms, api, symfony

我正在使用 REST API（没有 Doctrine 实体）的 Symfony2 应用程序。

我有一个表单类型：（$this->regionService 是一项从 API 检索所有可用区域的服务）

```
$regionChoiceList = new ObjectChoiceList($this->regionService->getAll(), 'name', array(), null, 'id');

$builder->add('region', 'choice', array(
                'error_bubbling' => true,
                'required' => false,
                'choice_list' => $regionChoiceList
            )) 
```

创建新实体一切正常。当我尝试使用这种类型编辑对象时，我没有选择正确的选项。序列化对象是正确的，留下一个从 JSON 响应序列化的对象示例：

```
Object:
  "name" = "blahblah"
  "etc..."
  "region"(Region Object): 
    "name" = "name region"
    "id"   = identifier region 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:44:25.773

您可以将 RegionService 返回的列表中的 Region 替换为 Object 实体中包含的 Region。

似乎实例必须相同才能使 symfony 选择 corret 选项。

# python - numpy.unique 保留顺序

> ID：15637336
> 
> 赞同：59
> 
> 时间：2013-03-26T12:41:00.153
> 
> 标签：python, numpy

```
['b','b','b','a','a','c','c'] 
```

numpy.unique 给出

```
['a','b','c'] 
```

我怎样才能保留原始订单

```
['b','a','c'] 
```

* * *

很好的答案。奖金问题。为什么这些方法都不适用于这个数据集？[http://www.uploadmb.com/dw.php?id=1364341573](http://www.uploadmb.com/dw.php?id=1364341573)这是问题[numpy sort wierd behavior](https://stackoverflow.com/questions/15649097/numpy-sort-wierd-behavior?lq=1)

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-26T12:50:33.547

`unique()`很慢，O(Nlog(N))，但你可以通过以下代码来做到这一点：

```
import numpy as np
a = np.array(['b','a','b','b','d','a','a','c','c'])
_, idx = np.unique(a, return_index=True)
print(a[np.sort(idx)]) 
```

输出：

```
['b' 'a' 'd' 'c'] 
```

`Pandas.unique()`对于大数组 O(N) 来说要快得多：

```
import pandas as pd

a = np.random.randint(0, 1000, 10000)
%timeit np.unique(a)
%timeit pd.unique(a)

1000 loops, best of 3: 644 us per loop
10000 loops, best of 3: 144 us per loop 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-26T12:49:35.853

使用 的`return_index`功能`np.unique`。这将返回元素首次出现在输入中的索引。然后`argsort`是那些指数。

```
>>> u, ind = np.unique(['b','b','b','a','a','c','c'], return_index=True)
>>> u[np.argsort(ind)]
array(['b', 'a', 'c'], 
      dtype='|S1') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-26T12:44:43.173

```
a = ['b','b','b','a','a','c','c']
[a[i] for i in sorted(np.unique(a, return_index=True)[1])] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-26T12:54:47.070

如果您尝试删除已排序的可迭代对象的重复项，则可以使用`itertools.groupby`函数：

```
>>> from itertools import groupby
>>> a = ['b','b','b','a','a','c','c']
>>> [x[0] for x in groupby(a)]
['b', 'a', 'c'] 
```

这更像是 unix 'uniq' 命令，因为它假定列表已经排序。当你在未排序的列表上尝试它时，你会得到这样的东西：

```
>>> b = ['b','b','b','a','a','c','c','a','a']
>>> [x[0] for x in groupby(b)]
['b', 'a', 'c', 'a'] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-16T17:52:12.257

> ```
> #List we need to remove duplicates from while preserving order
> 
> x = ['key1', 'key3', 'key3', 'key2'] 
> 
> thisdict = dict.fromkeys(x) #dictionary keys are unique and order is preserved
> 
> print(list(thisdict)) #convert back to list
> 
> output: ['key1', 'key3', 'key2'] 
> ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-10T13:40:45.160

如果你想删除重复的条目，比如 Unix tool `uniq`，这是一个解决方案：

```
def uniq(seq):
  """
  Like Unix tool uniq. Removes repeated entries.
  :param seq: numpy.array
  :return: seq
  """
  diffs = np.ones_like(seq)
  diffs[1:] = seq[1:] - seq[:-1]
  idx = diffs.nonzero()
  return seq[idx] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-17T16:21:14.510

使用 OrderedDict（比列表理解更快）

```
from collections import OrderedDict  
a = ['b','a','b','a','a','c','c']
list(OrderedDict.fromkeys(a)) 
```

# excel - Excel - 将列字母转换为数字等效vbs

> ID：15637337
> 
> 赞同：1
> 
> 时间：2013-03-26T12:41:02.610
> 
> 标签：excel, vbscript

我正在编写一个 vbs 脚本来从 Excel 电子表格中提取一些数据。目前使用的功能：

```
objSheet.Cells(rowNum, colNum).Value 
```

要获取单元格值，这允许我对列号进行数学运算，例如添加三个以跨三列移动。但在某些情况下，我想指定通过字母获取哪些列：

```
objSheet.Cells(4, E).Value 
```

因此，我需要编写一个 vbs 函数来将列字母转换为数字 E => 5。需要能够处理超过 26 列宽的电子表格。

我已经在互联网上看到了很多功能，所以做相反的事情，但没有找到很多以这种方式进行转换的功能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:50:37.840

此代码将在没有 Excel 的情况下运行：

```
Function ColNum(strCol As String) As Integer
    Dim i As Integer, col As Integer

    For i = Len(strCol) To 1 Step -1
        col = col + (Asc(Mid(strCol, i, 1)) - 64) * (26 ^ (i - 1))
    Next
    ColNum = col
End Function 
```

或者，在 Excel 中，您可以简单地使用：

```
Function ColNum(strCol As String) As Integer
    ColNum = Range(strCol & "1").Column
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T16:54:36.153

没有 vba：

要将列号转换为字母，请输入以下公式：

```
=LEFT(ADDRESS(1,3,4)) (returns the column letter for the cell C1=C) 
```

但这仍然不能令人满意，因为如果您在列 C 之前插入一列，则数字 3 不会更改为 4，所以这里有一个修复：

```
=LEFT(ADDRESS(1,COLUMN(C1),4)) 
```

希望这可以帮助。

例如，当您需要创建指定单元格范围的字符串时，这尤其有用。

# php - PHP - memcached 将键/值从一台服务器复制到另一台服务器

> ID：15637340
> 
> 赞同：0
> 
> 时间：2013-03-26T12:41:10.457
> 
> 标签：php, memcached

我很好奇 PHP 中是否有可能使用 Memcached 模块将键/值从一个 memcached 服务器直接复制到另一个服务器？是否允许同时连接到 2 个不同的服务器？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:50:19.390

以下将允许您连接到两个不同的 Memcached 服务器并在两者上设置相同的数据：

```
//Server A
$memcacheA = new Memcache;
$memcacheA->connect(216.239.51.99, 11211) or die ("Could not connect");

//Server B
$memcacheB = new Memcache;
$memcacheB->connect(115.239.51.98, 11211) or die ("Could not connect");

//Getting data from your database.
$myVal = $customObj->getSomethingFromDB();

//If data not stored on Server A
if($memcacheA->get('var_key') === false){
    //Store it on Server A
    $memcacheA->set('var_key', $myVar, MEMCACHE_COMPRESSED, 50);
}

//If data not stored on Server B
if($memcacheB->get('var_key') === false){
    //Store it on Server B
    $memcacheB->set('var_key', $myVar, MEMCACHE_COMPRESSED, 50);
} 
```

根据您的用例，这可能是也可能不是一个好的解决方案。取决于您的情况以及您要达到的目标。

# java - 如何创建 30 个字符的许可证密钥？

> ID：15637341
> 
> 赞同：2
> 
> 时间：2013-03-26T12:41:16.397
> 
> 标签：java, algorithm, licensing

我公司创建和销售的商业软件目前使用 Base-64 编码的 RSA 加密许可证密钥。结果大约有 90 个字符长。使用起来笨重且笨拙，并且容易出现用户错误。有些用户不太了解复制和粘贴，并尝试手动键入密钥。

我想用一种创建较小密钥的方法替换当前算法，例如我看到其他一些程序使用的 30 个字符的密钥。此外，我注意到许多软件供应商使用仅使用数字和大写字符的密钥，这使得它们使用起来更加方便。

我可以使用什么算法来生成嵌入用户名、产品 ID 和版本号的安全密钥，其中生成的许可证密钥不超过 30 个字符并且仅使用数字和大写字符？

（如果重要的话，我们正在使用 Java 进行编码。）

所以......这是一个开始：

```
public String createLicenseKey(String customerName, String productId, String versionNumber) {
    // what goes here?
    return licenseKey;
}

String key = createLicenseKey("Max Headroom", "ABCD", "4");
// key should now be in format AAAAAA-AAAAAA-AAAAAA-AAAAAA-AAAAAA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:14:44.790

我按照 fcm 的回答中提到的链接进行操作，这让我想到了一种可能性。您需要在 Java 类路径中使用 Google 的 Guava 库：

```
import com.google.common.hash.HashCode;
import com.google.common.hash.HashFunction;
import com.google.common.hash.Hashing;

public class ScratchSpace {

    public static void main(String[] args) {
        String userName = "Max Headroom";
        String productKey = "ABCD";
        String versionNumber = "4";

        final String licenseKey = createLicenseKey(userName, productKey, versionNumber);
        System.out.println("licenseKey = " + licenseKey);

    }

    public static String createLicenseKey(String userName, String productKey, String versionNumber) {
        final String s = userName + "|" + productKey + "|" + versionNumber;
        final HashFunction hashFunction = Hashing.sha1();
        final HashCode hashCode = hashFunction.hashString(s);
        final String upper = hashCode.toString().toUpperCase();
        return group(upper);
    }

    private static String group(String s) {
        String result = "";
        for (int i=0; i < s.length(); i++) {
            if (i%6==0 && i > 0) {
                result += '-';
            }
            result += s.charAt(i);
        }
        return result;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:57:21.293

对于如此具体的事情，您可能必须生成自己的算法，以只有您的软件会“理解”的方式将所需信息包含到哈希中。

获取信息（用户名、ID、版本），为其添加秘密盐，以增加额外的安全层。

到目前为止，您对代码的想法是正确的，但是在特定键方面并没有太多的固定。

查看类似的问题，例如[this](https://stackoverflow.com/questions/11845157/how-to-create-serials-key-to-protect-an-application?rq=1)和[this](https://stackoverflow.com/questions/599837/how-to-generate-and-validate-a-software-license-key?rq=1)，以获取有关该主题的更多信息。

# java - 自定义我的单元格渲染器以更改一个单元格的颜色？

> ID：15637342
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:41:16.967
> 
> 标签：java, swing, colors, jtable, tablecellrenderer

注意：这段代码不是我的，我是从另一个站点获取的，我只是想修改它。

但是，我有一个带有大量细节的 JTable，我想要它，以便当我更改特定单元格以使第一个单元格更改颜色时。当前，此代码仅在我单击该行时突出显示该行，但我想要它，以便如果我将其中一个值更改为另一个数字，例如将名称单元格更改为红色。我已经尝试了一些事情（if 语句），但似乎无法正常工作。任何帮助都会很棒。

```
import javax.swing.*;
import javax.swing.table.*;
import java.awt.*;

public class CustomCellRenderer{
   JTable table;
   TableColumn tcol;
   public static void main(String[] args) {
   new CustomCellRenderer();
   }

  public CustomCellRenderer(){
   JFrame frame = new JFrame("Creating a Custom Cell Reanderer!");
   JPanel panel = new JPanel();
   String data[][] = {{"Vinod","Computer","3"},
    {"Rahul","History","2"},
    {"Manoj","Biology","4"},
    {"Sanjay","PSD","5"}};
   String col [] = {"Name","Course","Year"};
   DefaultTableModel model = new DefaultTableModel(data,col);
   table = new JTable(model);
   tcol = table.getColumnModel().getColumn(0);
   tcol.setCellRenderer(new CustomTableCellRenderer());
   tcol = table.getColumnModel().getColumn(1);
   tcol.setCellRenderer(new CustomTableCellRenderer());
   tcol = table.getColumnModel().getColumn(2);
   tcol.setCellRenderer(new CustomTableCellRenderer());
   JTableHeader header = table.getTableHeader();
   header.setBackground(Color.yellow);
   JScrollPane pane = new JScrollPane(table);
   panel.add(pane);
   frame.add(panel);
   frame.setSize(500,150);
   frame.setUndecorated(true);
   frame.getRootPane().setWindowDecorationStyle(JRootPane.PLAIN_DIALOG);
   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   frame.setVisible(true);
   }

  public class CustomTableCellRenderer extends DefaultTableCellRenderer{
   public Component getTableCellRendererComponent (JTable table, 
 Object obj, boolean isSelected, boolean hasFocus, int row, int column) {
   Component cell = super.getTableCellRendererComponent(
    table, obj, isSelected, hasFocus, row, column);
   if (isSelected) {
   cell.setBackground(Color.green);
   } 
   else {
   if (row % 2 == 0) {
   cell.setBackground(Color.lightGray);
   }
   else {
   cell.setBackground(Color.lightGray);
   }
   }
   return cell;
   }
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:59:19.810

如果您知道要突出显示的行号，只需在 getTableCellRendererComponent 方法的末尾添加

```
if (row==theRowNumberToHighlight && column=0) {
  cell.setForeground(Color.red);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:22:05.900

假设您的表模型扩展 AbstractTableModel，扩展 TableModelListener。使用以下 tableChanged 方法确定何时调用渲染器：

```
public void tableChanged(TableModelEvent e)  
{  
    if (e.getColumn() == columnYouAreChecking && e.getFirstRow() == rowYouAreChecking && e.getLastRow() == rowYouAreChecking)
    {
        // Change cell color here.
    }  
} 
```

每次表中的数据更改时，都会调用此代码。

# javascript - 如何防止 CSS 或 jQuery 中的单词和标点符号之间的换行符

> ID：15637345
> 
> 赞同：7
> 
> 时间：2013-03-26T12:41:39.313
> 
> 标签：javascript, jquery, html, css, wordpress

我有一段文字。我的问题是，当标点符号位于单词的末尾时，有时会被换行到下一行。像这样：

```
This is the text
, This is a new line 
```

我可以用 CSS 或 jQuery 解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:54:39.253

如果您没有在单词和标点符号之间放置空格，并且无论如何都已包装，则可以使用`white-space: nowrap;` [css 指令](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)。否则，如果您需要在单词和标点符号之间留一个空格，例如在 a 之前`?`，请使用不间断空格代码。`alt + 0160`如果您使用的是 Windows，则可以通过在键盘上键入来获得它。有关更多键盘方法，请阅读[此](http://en.wikipedia.org/wiki/Non-breaking_space#Keyboard_entry_methods)。

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:51:22.617

假设您的问题是由于逗号之前的一些空格符号而引起的，比如`... text , This ...`应该是什么时候`... text, This ....`

至少这是我能看到的唯一原因。如果你看一下[这个](http://jsfiddle.net/SxYbJ/1/)小提琴，你会发现第三个文本`<p>`从来没有像你提到的那样包装。（您可能需要为您的浏览器选择不同的宽度。上面的示例适用于 Chrome，但对于 Firefox，宽度略有不同）

因此，只需确保文本和逗号之间没有空格。

# javascript - 在 Angular js 中嵌套 ng-views

> ID：15637350
> 
> 赞同：45
> 
> 时间：2013-03-26T12:41:49.587
> 
> 标签：javascript, angularjs

我有两个不同的角度应用程序。在集成到单个应用程序期间，我必须

嵌套 ng 视图。

对于示例（index.html）是

```
<!doctype html>
<html lang="en" ng-app="myApp">
<head>
<meta charset="utf-8">
<title>My AngularJS App</title>
<link rel="stylesheet" href="css/app.css"/>
</head>
<body>
<ul class="menu">
<li><a href="#/view1">view1</a></li>
<li><a href="#/view2">view2</a></li>
</ul>

<div ng-view></div>

<div>Angular seed app: v<span app-version></span></div>

<script src="lib/angular/angular.js"></script>
<script src="js/app.js"></script>
<script src="js/services.js"></script>
<script src="js/controllers.js"></script>
<script src="js/filters.js"></script>
<script src="js/directives.js"></script>
</body>
</html> 
```

我的应用视图之一是（view2.html）

```
<div class="ng-view"></div>
<p>This is the partial for view 1.</p>
{{ 'Current version is v%VERSION%.' | interpolate }} 
```

现在，此应用程序内部再次具有不同的视图。

我试过了，但页面没有加载。是否有可能嵌套 ng-views？

如果不可能，能否解释

提前致谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T12:48:37.993

Updated answer:

UI Router (which now sits here: [https://angular-ui.github.io/ui-router/site/#/api/ui.router](https://angular-ui.github.io/ui-router/site/#/api/ui.router)) is generally regarded as the best solution for complex routing in AngularJS.

* * *

Original answer:

Nesting views isn't natively possible, as of now, in AngularJS. In my last app, I used a solution derived from here: [http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)

Allowing me to effectively nest views (and skipping the limited ng-view altogether)

After doing so, this other (simpler, better, I believe) solution appeared:

[http://angular-ui.github.com/](http://angular-ui.github.com/) (scroll down to "Route Checking")

Check it out!

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-26T13:40:14.127

我建议你看看 AngularUI 团队的[ui-router](https://github.com/angular-ui/ui-router)项目。该项目包含一个基于状态的新路由器，它也可以对 URL 做出反应，但可以更好地处理应用程序状态。

这包括使用多个和/或嵌套视图。

前段时间我有一个类似的问题，所以也许它的答案也会对你有所帮助：[如何在 AngularJS 中设置嵌套视图？](https://stackoverflow.com/questions/15460279/how-do-i-setup-nested-views-in-angularjs)

此外，您可以期望 ui-router 在未来版本中集成到 AngularJS 中，因此这很可能是未来路由的工作方式。因此，如果您已经拥有今天的下一个解决方法，则无需坚持其他解决方法 :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-20T11:49:15.200

看看这个：

*   [https://github.com/angular-ui/ui-router](https://github.com/angular-ui/ui-router)

*   [http://angular-ui.github.io/ui-router/sample/#/](http://angular-ui.github.io/ui-router/sample/#/)

看起来像您正在寻找的东西

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-15T10:12:03.487

有许多用于嵌套视图和路由的第三方库。[这里已经提到了ui-router](https://github.com/angular-ui/ui-router)，我也建议看看这个：

[http://angular-route-segment.com](http://angular-route-segment.com)

它具有您所要求的嵌套视图功能，并且比 ui-router 更易于使用。在您的示例中：

**索引.html**：

```
<div app-view-segment="0"></div> 
```

**视图1.html**：

```
<p>This is the partial for view 1.</p>
<div app-view-segment="1"></div> 
```

**deep-view.html**：

```
<p>This is the partial for view inside view1.</p> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-02T19:31:43.897

如果您不想求助于另一个库来解决您的问题（并不是说这有什么问题），您还应该考虑使用指令以及 ng-switch 和 ng-show。

这种方法在这里作为答案给出：

[部分的角度复杂嵌套](https://stackoverflow.com/questions/12863663/angularjs-complex-nesting-of-partials-and-templates)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-02T19:52:55.707

我真诚地怀疑这是惯用的 Angular（并且上面提到可能存在跨浏览器问题），但是我的`ng-include`解决方案是让我的其他视图嵌套在类似的东西中的“全部”视图中`all.html`：

```
 <div class="all" ng-include src="'views/foo.html'" ng-controller="FooCtrl">
    </div>

    <div class="all" ng-include src="'views/bar.html'" ng-controller="BarCtrl">
    </div>

    <div class="all" ng-include src="'views/baz.html'" ng-controller="BazCtrl">
    </div> 
```

这对我有用，但感觉它违背了框架的纹理。我将亲自尝试类似 Eamon 在下一次传球时链接到的内容。

# javascript - 为什么 addEventListener 函数无法获取全局变量？

> ID：15637352
> 
> 赞同：1
> 
> 时间：2013-03-26T12:41:57.853
> 
> 标签：javascript, xml, html, popcornjs

我创建了一个调用 popcorn.js 来显示字幕的事件监听器函数。我还在事件侦听器之外创建与 popcorn.js 无关的函数并声明全局变量数组。我想在事件监听器中打印数组结果（c.innerHTML = subtitleArray[0][2];），但它显示空字符串，即使它已经存储在数组中。请帮忙！

```
<html>
    <head>
        <title>HTML5 included Javascript....</title>
        <meta name="description" content="Test" charset="utf-8"></meta>
        <script src="popcorn.js"></script>
        <script type="text/javascript">

                var subtitleArray = new Array(); //stored all values from XML caption file
                var firstLine;
                var c = document.getElementById('container');

                function loadXMLDoc(dname)
                {
                    if (window.XMLHttpRequest)
                    {
                    xhttp=new XMLHttpRequest();
                    }
                    else
                    {
                    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xhttp.open("GET",dname,false);
                    xhttp.send();

                    return xhttp.responseXML;
                }

                function getCaption()
                {

                    var tempArray = new Array();

                    captionsDoc = loadXMLDoc("captions.xml");
                    x=captionsDoc.getElementsByTagName('text');

                    for(var i=0;i<x.length;i++)
                    {
                        var tempArray = new Array();
                        tempArray[0] = x[i].getAttribute('start'); // get start time
                        tempArray[1] = x[i].getAttribute('dur'); // get duration time
                        tempArray[2] = x[i].childNodes[0].nodeValue; // get text

                        subtitleArray[i] = tempArray; //put all 3 values in array

                    }           

                    //c.innerHTML = subtitleArray[0][2];
                    firstLine = subtitleArray[0][2];

                } 

                document.addEventListener("DOMContentLoaded", function () {

                    var popcorn = Popcorn("#video");
                    c.innerHTML = subtitleArray[0][2];

                    popcorn.subtitle({
                        start: 0,
                        end: 3,
                        text: "Hello World", // "Hello World" replace to subtitleArray[0][2]
                        target: "text"
                    }).subtitle({
                        start: 3,
                        end: 6,
                        text: "This is second line",
                        target: "text"
                    });

                    popcorn.play();
                }, false);

            window.onload = getCaption;

        </script>
    </head>
    <body>

        <div>
            <video id="video" width="320" height="240" controls="true" preload="none">
                <source src="caption.mp4" type="video/mp4" />
                <source src="caption.webm" type="video/webm" />
                <source src="caption.ogg" type="video/ogg" />
            </video> 
        </div>
        <div id="text" style="width:980px;height:50px;"></div>
        <div id="container"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:58:21.320

尝试类似的东西

```
var subtitleArray = new Array(); // stored all values from XML caption file
var firstLine;

function loadXMLDoc(dname, callback) {
    var xhttp;
    if (window.XMLHttpRequest) {
        xhttp = new XMLHttpRequest();
    } else {
        xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET", dname, false);
    xhttp.send();

    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            callback(xhttp.responseXML);
        }
    }
}

function getCaption() {

    var tempArray = new Array();
    var c = document.getElementById('container');

    loadXMLDoc("captions.xml", function(captionsDoc) {
                var x = captionsDoc.getElementsByTagName('text');
                for (var i = 0; i < x.length; i++) {
                    var tempArray = new Array();
                    tempArray[0] = x[i].getAttribute('start');
                    tempArray[1] = x[i].getAttribute('dur');
                    tempArray[2] = x[i].childNodes[0].nodeValue;
                    subtitleArray[i] = tempArray;

                }

                firstLine = subtitleArray[0][2];
                c.innerHTML = firstLine;
            });
}

document.addEventListener("DOMContentLoaded", function() {
            var popcorn = Popcorn("#video");
            popcorn.subtitle({
                        start : 0,
                        end : 3,
                        text : "Hello World", // "Hello World" replace to
                        // subtitleArray[0][2]
                        target : "text"
                    }).subtitle({
                        start : 3,
                        end : 6,
                        text : "This is second line",
                        target : "text"
                    });

            popcorn.play();
        }, false);

window.onload = getCaption; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:58:38.173

您遇到的问题是您在不同时间运行两个相互依赖的不同事物，并且您的全局变量存在范围问题。

DOMContentLoaded 在 onload 事件之前运行，因此您在尝试在发出请求之前使用返回值之后进行 Ajax 调用。

将它们结合起来，使它们同时运行。

# javascript - 如何在 Jquery 或 Phonegap 跨平台中获取 IP 地址

> ID：15637353
> 
> 赞同：0
> 
> 时间：2013-03-26T12:41:58.610
> 
> 标签：javascript, jquery, cordova

如何在 Jquery 或 Phonegap 中获取 IP 地址？

我正在为 Android、Iphone 和 windows 开发跨平台应用程序。

我需要找到请求的 IP 地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:44:05.340

这很简单！;)

```
 $.getJSON("http://jsonip.appspot.com",
    function(data){
       alert( "Your ip: " + data.ip);
  }); 
```

如果您不想使用`http://jsonip.appspot.com`并且可以在服务器上运行 php，只需将[http://jsonip.appspot.com](http://jsonip.appspot.com)替换为`http://domain/ip.php`，其中`ip.php`类似于：

**ip.php**

```
<?php
   echo json_encode(array("ip"=>$_SERVER['REMOTE_ADDR']));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T20:09:24.453

我也需要设备ip。原来有一个电话间隙插件可以从操作系统返回设备的 IP 地址。

有关源代码，请参阅[https://build.phonegap.com/plugins/679](https://build.phonegap.com/plugins/679)和[https://github.com/salbahra/NetworkInterfacePlugin/](https://github.com/salbahra/NetworkInterfacePlugin/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:43:43.433

尝试这个

```
<html>
<head>
<script type="text/javascript" language="javascript">
  function myIP() {
    if (window.XMLHttpRequest) 
   xmlhttp = new XMLHttpRequest();
    else 
   xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

    xmlhttp.open("GET","http://jsonip.appspot.com/?asp.net",false);
    xmlhttp.send();

    hostipInfo = xmlhttp.responseText;
    obj = JSON.parse(hostipInfo);
    document.getElementById("IP").value=obj.ip;
    document.getElementById("ADDRESS").value=obj.address;
}
</script>
</head>
<body onload="myIP()">
IP :<input type="text" id="IP" name="IP" />
ADDRESS :<input type="text" id="ADDRESS" name="ADDRESS" />

</body>
</html> 
```

# ios - 如何在“更多”视图中切换到标签栏项目？

> ID：15637357
> 
> 赞同：0
> 
> 时间：2013-03-26T12:42:06.510
> 
> 标签：ios, objective-c, uitabbar

我正在为 Iphone/Ipad 编写目标 c 中的应用程序。我在标签栏的“更多”中有一些项目。我想切换到其中一种观点。我该怎么做？通常我会使用 selectedIndex，但它在“更多”选项卡上不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:16:59.640

要从更多屏幕中选择视图控制器，您应该首先选择更多视图控制器，因为它在之前的答案中显示：

```
[tabBarController setSelectedViewController: [tabBarController moreNavigationController]] 
```

然后执行 pushViewController 方法以获得更多视图控制器

```
[[tabBarController moreNavigationController] pushViewController:neededViewController animated:NO] 
```

或者使用更好的方法：

```
[tabBarController setSelectedViewController: neededViewController ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:48:49.950

```
[myTabBarController setSelectedViewController: viewControllerThatYouNeed]; 
```

**Edit:**

Try to use selectedViewController property of UITabBarController. From Apple Docs:

> Blockquote In iOS 3.0 and later, you can use this property to select any of the view controllers in the viewControllers property. This includes view controllers that are managed by the More navigation controller and whose tab bar items are not visible in the tab bar.

# spring - 如何从文件中只读取一行（其头部）？

> ID：15637362
> 
> 赞同：1
> 
> 时间：2013-03-26T12:42:28.693
> 
> 标签：spring, spring-batch

我想得到一个文件的头。如何从文件中只读取一行（其头部）？（春季批次）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:44:29.703

我想你使用 [FlatFileItemReader](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/FlatFileItemReader.html)。

在这种情况下，可以将[setLinesToSkip(1)](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/FlatFileItemReader.html#setLinesToSkip%28int%29)设置为跳过标头并使用[setSkippedLinesCallback](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/FlatFileItemReader.html#setSkippedLinesCallback%28org.springframework.batch.item.file.LineCallbackHandler%29)获取其值。如果您想忽略其他行 -总是`null`在[LineMapper](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/FlatFileItemReader.html#setLineMapper%28org.springframework.batch.item.file.LineMapper%29)中返回。

但如果你真的只需要一行 - 为它实现你的[Tasklet](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/step/tasklet/Tasklet.html)或[ItemReader](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/ItemReader.html)。

# ruby - 验证来自已生成块的响应

> ID：15637366
> 
> 赞同：1
> 
> 时间：2013-03-26T12:42:43.123
> 
> 标签：ruby, rspec

假设我正在测试以下类：

```
class Processor
  def initialize(tree)
    @tree = tree
  end

  def process(entity)
    @tree.each_branch do |branch|
      branch.inject({}) do |result, fruit|
        result[fruit.name] = fruit.type == entity.type
      end
    end
  end
end 
```

我想注入一个存根树，在我的规范中我会：

```
describe Processor do
  let(:tree) { double("tree") }
  let(:apple) { Fruit.new("apple") }
  let(:processor) { Processor.new(tree) }

  let(:fruit1) { Fruit.new("orange") }
  let(:fruit2) { Fruit.new("apple") }

  it "should process a fruit"
    tree.stub(:each_branch).and_yield([fruit1, fruit2])
    Processor.process(apple)
  end
end 
```

我希望在块中创建以下哈希。如何验证它是否正确创建并返回给块的调用者？

```
{ "orange" => false, "apple" => true } 
```

编辑：我省略了 Fruit 类的细节，它应该是无关紧要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:47:58.267

如果您不得不尝试在测试方法的中间某处捕获结果，这通常是您需要重构的好兆头。

这是一个示例：向分支添加一个方法，然后测试分支类（假设它是您控制的类）。

```
class Branch
  def unique_fruits
    inject({}) do |result, fruit|
      result[fruit.name] = fruit.type == entity.type
    end
  end
end

class Processor
  # snip ...
  def process(entity)
    @tree.each_branch do |branch|
      branch.unique_fruits
    end
  end
end 
```

这更容易测试，因为注入返回哈希。您可以为分支类编写单元测试并隔离该方法。然后在`Processor#process`方法中，您将注入块替换为对`branch.unique_fruits`.

如果您无法控制分支，只需将块提取到`Processor`类上的另一个方法：

```
class Processor
  # snip...

  def process(entity)
    @tree.each_branch do |branch|
      unique_fruits_on_branch(branch)
    end
  end

  def unique_fruits_on_branch(branch)
    branch.inject({}) do |result, fruit|
      result[fruit.name] = fruit.type == entity.type
    end
  end
end 
```

但是，您可能会看到它看起来不太好 -`Processor`该类在不同的抽象级别上工作。但这两者都更容易进行单元测试。

# jsf - 格式化 JSF 转换值

> ID：15637371
> 
> 赞同：2
> 
> 时间：2013-03-26T12:43:09.840
> 
> 标签：jsf, converter

今天我注意到**ocpsoft**有一个很好的[时间库](http://ocpsoft.org/prettytime/)，适合在**JSF 2**中用作转换器。这样做的优点是您可以直接在视图中显示的日期中使用转换器，并将其转换为一个字符串，告诉用户类似`6 hours ago`or的内容`17 hours from now`。我认为我最好将两者结合起来，JSF 转换日期和这个日期以显示类似`26-03-2013 17:00 (4 hours from now)`. 我可以使用以下代码实现类似的功能：

```
<h:outputText value="#{task._StartDate}" style="padding:2px;">
    <f:convertDateTime pattern="dd-MM-yyyy HH:mm" timeZone="GMT+1" />
</h:outputText>
<h:outputText value="#{task._StartDate}">
    <f:converter converterId="org.ocpsoft.PrettyTimeConverter" />
</h:outputText> 
```

当我想将第二个值放入括号时，我的问题就出现了。`PrettyTimeConverter`只接受一个日期作为一个值，我不能直接在那里写括号。JSF 也不接受以下内容：

```
<h:outputFormat value="({0})">
    <f:param value="#{task._StartDate}">
        <f:converter converterId="org.ocpsoft.PrettyTimeConverter" />
    </f:param>
</h:outputFormat> 
```

有了这个我有以下错误：

```
<f:converter> Parent not an instance of ValueHolder: 
javax.faces.component.UIParameter@1492636 
```

关于如何避免使用特定`h:outputText`标签编写两个括号的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:56:20.217

您可以将这些括号直接放在模板文本中，而无需另一个`<h:outputText>`s。

```
<h:outputText value="#{task._StartDate}" style="padding:2px;">
    <f:convertDateTime pattern="dd-MM-yyyy HH:mm" timeZone="GMT+1" />
</h:outputText>
(<h:outputText value="#{task._StartDate}">
    <f:converter converterId="org.ocpsoft.PrettyTimeConverter" />
</h:outputText>) 
```

### 也可以看看：

*   [是否建议对所有内容都使用 h:outputText ？](https://stackoverflow.com/questions/5539894/is-it-suggested-to-use-houtputtext-for-everything/5540859#5540859)

# lotus-notes - 用于多个日历条目的 Lotus notes 按钮脚本

> ID：15637373
> 
> 赞同：1
> 
> 时间：2013-03-26T12:43:14.327
> 
> 标签：lotus-notes, lotus-domino, lotus, lotusscript, lotus-formula

这是我的脚本。我想在这个脚本中有 2 个日期和时间，所以当有人点击按钮时，收件人日历中应该有两个条目

我真的很感激在这个问题上的任何帮助。

```
Sub Click(Source As Button)

    Dim s As New NotesSession
    Dim db As NotesDatabase
    Dim doc As NotesDocument
    Dim subject As String
    Dim maildoc As NotesDocument
    Dim rtitem As NotesRichTextItem
    Set db = s.CurrentDatabase
    Set doc = New NotesDocument(s.CurrentDatabase)
    Set maildoc = New NotesDocument(s.CurrentDatabase)
    Set ritem = New NotesRichTextItem(maildoc, "Body")

'Modify Subject, Location, Start Day and Time, End Day and Time before sending!!
'#########################################################################

    doc.subject = "test"
    doc.location = "bangalore"
    Set startdatetime = New NotesDateTime("03/26/2013 04:00:00 PM")
    Set enddatetime = New NotesDateTime("03/24/2008 05:00:00 PM")

'#########################################################################

    doc.From = s.UserName
    doc.Form = "Appointment"
    doc.AppointmentType = "0"
    doc.Chair = s.UserName
    doc.StartDateTime = startdatetime.LSLocalTime
    doc.EndDateTime = enddatetime.LSLocalTime
    doc.CalendarDateTime = startdatetime.LSLocalTime
    doc.TimeRange = Timevalue(doc.startdatetime(0)) & "-" & Timevalue(doc.enddatetime(0))
    doc.ExcludefromView = "D"

    Call doc.ReplaceItemValue("_ViewIcon", 160)
    Call doc.AppendItemValue("$BusyName", s.UserName)
    Call doc.AppendItemValue("$BusyPriority", "1")
    Call doc.AppendItemValue("$PublicAccess", "1")
    Call doc.save(True,True)

    Print "An entry for this event was successfully added to your calendar and an e-mail confirmation was sent."
    Msgbox "Calendar successfully updated and e-mail confirmation sent.", 64, "Success"

'Send e-mail confirmation

    maildoc.Form = "Memo"

'Modify Subject and Send to
'############################################################################

    maildoc.Subject = "test to send multiple emails"
    Dim recip(2) As Variant
    recip(0) = ""
    recip(1) = ""

    maildoc.sendto = recip

'############################################################################

    Call maildoc.Send(False)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T06:02:01.980

IBM 将已发布的 Lotus Notes C&S Schema 文档移至[此处](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/cs_schema_toc)。上面找到的另一个链接是未更新的先前版本。

除了添加 ORGRepeat 值“1”之外，要使条目重复，您需要有 3 个平行的值列表：StartDateTime、EndDateTime 和 RepeatInstanceDates。最初，StartDateTime 和 RepeatInstanceDates 项将包含相同的值，因此您可以在创建它后简单地设置该值。

CalendarDateTime 项还需要具有与上述列表相同数量的值，以便条目将显示在日历上的正确日期/时间。

与您的脚本有关的一个潜在问题是它将使用用户时区作为时间。因此，如果任何用户在另一个时区并且他们点击它，条目将被放置在错误的时间。您可以通过将 3 个字符的时区标识符放在值的末尾来解决此问题（例如“03/26/2013 04:00:00 PM EDT”）

您可能还想查看我在[此处](http://www.experts-exchange.com/Software/Server_Software/Email_Servers/Lotus_Domino/Q_24298949.html)找到的按钮脚本，以了解如何执行此操作的另一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:39:46.907

[IBM在此处](http://www-12.lotus.com/ldd/doc/uafiles.nsf/docs/wpnotescsschema/%24file/csschema.pdf)发布了 Lotus Notes 日历约会的模式。如果您想创建两天的重复约会，但在每天的同一时间，然后从第 12 页开始。有很多选项，但我认为您可能希望设置 Repeats="1 ", RepeatUnit="C" 并将 RepeatCustom = 设置为包含两个日期的数组。

# paypal - 我可以更改贝宝上的标签文本吗？我使用贝宝标准

> ID：15637376
> 
> 赞同：0
> 
> 时间：2013-03-26T12:43:28.410
> 
> 标签：paypal, paypal-sandbox

我想更改贝宝标签文本，如下图所示。有什么方法可以更改贝宝标签文本。![在此处输入图像描述](../Images/17ac91e44c2dd6865cfd44ecda9acafb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:53:58.860

添加您的自定义标题徽标和标签文本（需要 PayPal Premier 帐户）

1) [http://www.visser.com.au/blog/adding-your-business-logo-to-paypal-checkout](http://www.visser.com.au/blog/adding-your-business-logo-to-paypal-checkout)

2) [http://help.yahoo.com/l/us/yahoo/smallbusiness/store/order/paypal/paypal-08.html](http://help.yahoo.com/l/us/yahoo/smallbusiness/store/order/paypal/paypal-08.html)

3)[当我的卖家从我的网站销售一些产品时，将我的标志放在 Paypal 页面上](https://stackoverflow.com/questions/11044599/put-my-logo-on-paypal-page-when-my-sellers-sells-some-product-from-my-website)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:36:15.100

无法在 PayPal 的分页页面上更改此文本。您必须使用其他服务，例如 Website Payments Pro，并让买家留在您的页面上，并在您的网站上显示商品/价格的细分。Pro 将允许您完全控制结帐流程。

# asp.net - umbraco 会员创建用户并选择个人资料数据

> ID：15637383
> 
> 赞同：0
> 
> 时间：2013-03-26T12:43:42.993
> 
> 标签：asp.net, umbraco, profile, membership

我创建了一个类来处理使用自定义字段创建会员用户。

我是根据这个解决方案完成的：

*   [如何分配配置文件值？](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)
*   [将 ASP .NET 成员资格和配置文件与 MVC 一起使用，如何创建用户并将其设置为 HttpContext.Current.User？](https://stackoverflow.com/questions/2547290/using-asp-net-membership-and-profile-with-mvc-how-can-i-create-a-user-and-set)

    ```
    namespace CCL
    {
    public static MemberProfile CurrentUser
    {
    get
        {
    if (Membership.GetUser() != null)
        return ProfileBase.Create(Membership.GetUser().UserName) as MemberProfile;
    else
        return null;
    }
        }
    } 
    ```

现在我正在尝试使用创建用户并获取配置文件数据：

```
if (Membership.GetUserNameByEmail(email) == null)
{
MembershipUser member = Membership.CreateUser(username, password, email);

Roles.AddUserToRole(username, "WebsiteUsers");

CCL.MemberProfile currentProfile = CCL.MemberProfile.CurrentUser;

bool exists = currentProfile != null;
Response.Write(exists.ToString());
} 
```

但*currentProfile*正在返回**null**。

所以我无法将表单中的值分配给我的成员自定义属性，这些属性由类中设置的属性处理:(

我不明白如何使它工作:(

有没有人有一些想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:58:39.217

**建议一：**

确保 ProfileBase.Create 返回可以转换为“MemberProfile”的内容，否则如果不能转换，则只会返回 NULL。

**建议二：**

确保您正在运行的上下文具有登录用户，因此您对 Membership.GetUser() 的调用可以找到当前用户对象。

**其他想法：**

ProfileBase.Create 方法假定您传入的用户名是经过身份验证的用户，我不确定当用户未经过身份验证时它的行为..也许它返回 NULL？

# php - cURL 登录网站

> ID：15637387
> 
> 赞同：0
> 
> 时间：2013-03-26T12:43:49.793
> 
> 标签：php, curl, login

这是我的问题：

我正在尝试获取首先需要登录的网站的内容。我想通过 cURL 解决这个问题。首先，我连接到登录页面，而不是需要登录的页面。我在我的 cookie 文件中得到了一些 Cookie，但是当我尝试查看之前需要登录的页面的内容时，我只会被重定向到（获取）登录页面的内容。
似乎解析我的登录 cookie 或任何失败，所以网站不记得我登录了。

到目前为止，这是我的 php 代码：

```
<?php
$loginUrl = 'https://www.****./login.html';

$loginFields = array('j_username'=>'***', 'j_password'=>'**'); //login form field names and values
$remotePageUrl = 'https://www.***/myPage/index.html'; //url of the page I want the content  

$login = getUrl($loginUrl, 'post', $loginFields); //login to the site

echo $remotePage = getUrl($remotePageUrl); //get the remote page

function getUrl($url, $method='', $vars='') {
    $ch = curl_init();

if ($method == 'post') {
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $vars);
}
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_COOKIESESSION, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'C:\\xampp\htdocs\***\cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'C:\\xampp\htdocs\****\cookies.txt');

 $buffer = curl_exec($ch);

 if (curl_error($ch)) echo curl_error($ch);

curl_close($ch);

return $buffer;
}

?> 
```

有任何想法吗？现在在网上搜索了几个小时，还没有找到解决方案。
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:02:36.390

我没有找到任何解决方案。尽管如此，我还是手动完成了所有工作，不再需要程序，无论如何感谢您的评论:)

# default - 带有拦截器的 CDI bean 是否应该具有默认构造函数？

> ID：15637391
> 
> 赞同：3
> 
> 时间：2013-03-26T12:44:10.650
> 
> 标签：default, cdi, interceptor, constructor-injection

我有一个 CDI bean，并且在这个 bean 的一个方法中添加了一个拦截器。如果这个 bean 没有默认构造函数（我使用构造函数注入）。在运行时，我得到了异常

```
java.lang.Class.newInstance0(Class.java:357)
java.lang.Class.newInstance(Class.java:325)
org.apache.webbeans.proxy.javassist.JavassistFactory.createProxy(JavassistFactory.java:79)
org.apache.webbeans.proxy.ProxyFactory.createProxy(ProxyFactory.java:241)
org.apache.webbeans.proxy.ProxyFactory.createDependentScopedBeanProxy(ProxyFactory.java:412)
org.apache.webbeans.component.AbstractInjectionTargetBean.createDefaultInstance(AbstractInjectionTargetBean.java:140)
org.apache.webbeans.component.AbstractInjectionTargetBean.createInstance(AbstractInjectionTargetBean.java:116)
org.apache.webbeans.component.AbstractOwbBean.createNewInstance(AbstractOwbBean.java:233)
org.apache.webbeans.portable.creation.AbstractProducer.produce(AbstractProducer.java:77)
org.apache.webbeans.component.InjectionTargetWrapper.produce(InjectionTargetWrapper.java:136) 
```

如果我在这个bean中添加一个默认构造函数，或者删除拦截器，就可以了。其实我可以使用字段注入来处理这个问题。

但我想知道：如果我添加一个默认构造函数，这意味着这个 bean 有两个构造函数——一个是非参数的，另一个是`@Inject`ed 参数。在这种情况下（使用拦截器），容器会创建两次实例吗？

**编辑：**我使用 Tomee1.5，WebShpere8.5 与 Tomee1.5 相同，GlassFish3.1.2 似乎没有这个问题。

**编辑：**我在 Tomee 用户论坛中找到了一个答案，即 CDI 容器将为您的 bean 调用 @Inject 带注释的 ct，但将使用默认 ct 来创建代理。所以，我认为这意味着如果你想使用构造函数注入，你还需要一个默认构造函数来进行代理。

**编辑：**

1.  根据[http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#d0e1443](http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#d0e1443) ，除非bean具有默认范围@Dependent，否则容器必须通过间接所有注入的bean引用一个代理对象。

2.  根据 //openejb.979440.n4.nabble.com/RequestScoped-CDI-constructor-td4661541.html CDI 容器将为您的 bean 调用 @Inject 带注释的构造函数，但将使用默认构造函数来创建代理。因此，所有 'NormalScoped' (@RequestScoped @SessionScoped @ApplicationScoped @ConversationScoped) bean 都需要默认构造函数，因为它们总是会被代理。

3.  如果一个bean使用了interceptor，根据报错信息，OpenWebBean使用Proxy来处理interceptor，所以被拦截的类必须有default构造。但是 Weld 使用拦截器和装饰器的子类。[https://issues.jboss.org/browse/WELD-437?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://issues.jboss.org/browse/WELD-437?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel) 子类化解决方案优于代理，因为它避免了处理许多问题例如：在代理实例上没有无参数构造函数和字段访问的拦截类。所以，如果我使用 Tomee 和 Websphere，它需要一个默认 ct，但 GlassFish 不需要。

    谢谢brandizzi，这是我的第一个问题。谢谢您的帮助。似乎我无法回答我自己的问题并发布两个以上没有 10 个声誉的链接，所以我在这里进行了编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T07:42:08.550

如[CDI 规范](http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html)中所述，具有绑定拦截器的 CDI bean 必须是可代理的，如不可代理的[bean 类型](http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#unproxyable)中所定义的那样，此外还指出，可代理的 bean 是具有不带参数的非私有构造函数的类。

# javascript - 将新对象注入 DOM 后如何使用 jQuery？

> ID：15637394
> 
> 赞同：0
> 
> 时间：2013-03-26T12:44:27.467
> 
> 标签：javascript, jquery, dom

我正在制作一个句子生成器。到目前为止，它可以获取单词列表。然后它从 sentence.yourdictionary.com 获取数据来取一个句子。我使用 . 显示来自 sentence.yourdictionary.com 的第一句话`$("ul.example>li").first()`。然后将其放入段落 `<p id="sents">`中。

因此，如果您输入*yo*和*nose*这两个词，您的输出将是

```
<p id="sents"><li id="yo"><strong>Yo</strong> ' money
back a hund'd times, de preacher says!</li><li id="nose">I will no longer be caught with a
bleeding <strong>nose</strong>, heart palpatations, week long benders or hurting myself in any major way.</li></p> 
```

当您将鼠标悬停在新列表项上时，我希望调用一个函数。

```
$(document).ready( function() {
    $("li").hover( function () {
        $(this).append("<span>Testing</span>");
        var id = $(this).attr("id");
        console.log(id);
    }, function () {
        $(this).find("span:last").remove();
    });
}); 
```

在将新列表项注入 DOM 后，这不起作用。*我尝试为mousemove*添加一个事件监听器，但是当你将鼠标悬停在它上面时，“test”这个词会出现很多次！注入新列表项后如何实现？

如果您想澄清一下，这是一个 jfiddle：http: [//jsfiddle.net/varhawk5/cNKyx/1/](http://jsfiddle.net/varhawk5/cNKyx/1/)

太感谢了。对不起，我只是在学习 javascript！

**编辑**

为了解决这个问题，我使用了 .on() 函数作为评论建议。虽然没有“悬停”事件，所以我认为这是唯一的方法。

```
$("body").on("mouseenter", "li#topWord", function() {
        var word = $(this).data("word");
        var sents = sentences[word]
        $(this).html("<div class='restOfSents' data-word='" + word +"'></div>");
        for(var i=1; i<sentences[word].length; i++) {
            $(".restOfSents").append($(sentences[word][i]));
        }
    console.log(sents);
});

$("body").on("mouseleave", "li", function() {
    // Remove the new div
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:50:48.233

您应该使用[`.on()`](http://api.jquery.com/on/)而不是`.hover()`：

```
$('li').on('mouseenter', function() { ... }) 
```

此外，您不应该为此使用 ID。改为使用[`data-*`](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)属性。否则，当用户两次输入相同的单词时，您的代码将中断（因为 ID 是唯一的）。

```
var id = $(this).attr('data-example'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:55:02.007

你是对的！这样做的原因是 $(document).ready() 仅在页面加载时被调用。您可以在添加每个新元素时手动为每个新元素添加新事件挂钩，或者利用 jQuery 的“on”功能自动检测符合您条件的新 dom 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:48:20.910

```
$(document).ready( function() {
$(document).on('hover','li', function () {
    $(this).append("<span>Testing</span>");
    var id = $(this).attr("id");
    console.log(id);
}, function () {
    $(this).find("span:last").remove();
});
}); 
```

# php - Jquery - 打开一个包含当前页面内容的新窗口

> ID：15637397
> 
> 赞同：0
> 
> 时间：2013-03-26T12:44:35.607
> 
> 标签：php, jquery

我正在尝试创建一个“打印”按钮来打开一个新窗口并在其中显示一个 PHP 变量。

下面的代码在 PHP 脚本中循环的次数与票数一样多，但是我似乎无法在窗口打开时显示正确的数字（打印链接中显示的数字是正确的 - 但是当新的窗口打开它是不正确的）。

```
<script type='text/javascript'>
jQuery(function($) {
$('a.new-window').click(function(){

var recipe =  window.open('','PrintWindow','width=600,height=600');
var html = '<html><head><title>Print Your Ticket</title></head><body><div id="myprintticket">' + $('<div />').append($('#ticket').clone()).html() + '</div></body></html>';
recipe.document.open();
recipe.document.write(html);
recipe.document.close();

return false;

});
});
</script>

<a href="" class="new-window">Print <?php echo $EM_Booking->get_spaces() ?></a> 

<div style="display:none;">
<div id="ticket"><?php echo $EM_Booking->get_spaces() ?>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:56:19.627

为什么不尝试这样的事情：

```
<a href="#" class="new-window">Print <?php echo $EM_Booking->get_spaces() ?>
    <div class="ticket" style="display:none">
        <?php echo $EM_Booking->get_spaces() ?>
    </div>
</a> 

<script>
jQuery(function ($) {

    $('a.new-window').click(function () {
        var btn = $(this),
            ticket = btn.find('.ticket').html(),            
            recipe =  window.open('','PrintWindow','width=600,height=600'),
            html = '<html><head><title>Print Your Ticket</title></head><body><div id="myprintticket">' + ticket + '</div></body></html>';
        recipe.document.open();
        recipe.document.write(html);
        recipe.document.close();
        return false;
    });

});
</script> 
```

但是更好的解决方案是给一个按钮一个唯一的 ID，然后单击从传递该 ID 的服务器打开一个现有的（php 生成的）页面，例如`/getBooking.php?id=123`，该页面将输出所需的任何内容。

# java - 进度对话框位置监听器

> ID：15637400
> 
> 赞同：0
> 
> 时间：2013-03-26T12:44:44.903
> 
> 标签：java, android, progressdialog

在我的程序中，我有一个与 GPS 一起使用的位置列表器来获取用户当前的纬度/经度点。

我想在 GPS 获得坐标的同时实现一个进度对话框。

目前我在 onCreate() 方法中调用progressDialog，然后当我的位置对象不再为空时，我就会取消progressdialog。

可悲的是，目前对话框根本没有显示。

这是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

        locationListener = new GPSLocationListener();

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);

 ***** Call a new progress dialog object when the locationManager is gaining lat/long*****
 d = ProgressDialog.show(this, "GPS Posistion", "Gaining GPS posistion...", false,   true);

}

  private class GPSLocationListener implements LocationListener 
    {
        @Override
        public void onLocationChanged(Location location) {
            if (location != null) {

                ***** Once lat/long is found, dismiss the progress dialog*****
                d.dismiss();

                Double latToPass = location.getLatitude();
                Double longToPass = location.getLongitude();

                locationManager.removeUpdates(locationListener);
                locationManager = null;

                Intent changesStart = new Intent("com.example.flybaseapp.PassLatLong");
                changesStart.putExtra("passedLat", latToPass);
                changesStart.putExtra("passedLong", longToPass);
                startActivity(changesStart);

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:49:25.167

使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

```
 Double latToPass;
    Double longToPass;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

new AsyncAction().execute(null, null, null);

}

    private class AsyncAction extends AsyncTask<String, Void, String> {
            public boolean status = false;
            private ProgressDialog pd;

            @Override
            protected String doInBackground(String... arg0) {
                // TODO Auto-generated method stub
                try {
                    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

            locationListener = new GPSLocationListener();

            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);

                    status = true;

                } catch (Exception e) {
                    // TODO: handle exception
                }

                return null;
            }

            @Override
            protected void onPostExecute(String result) {

                pd.dismiss();

            Intent changesStart = new Intent("com.example.flybaseapp.PassLatLong");
                    changesStart.putExtra("passedLat", latToPass);
                    changesStart.putExtra("passedLong", longToPass);
                    startActivity(changesStart);

                }
            }

            protected void onPreExecute() {
                // TODO Auto-generated method stub
                super.onPreExecute();
                pd = new ProgressDialog(MainActivity.this);
                pd.setMessage("loading...");
                pd.setIndeterminate(true);
                pd.setCancelable(false);
                pd.show();
            }

        }

      private class GPSLocationListener implements LocationListener 
        {
            @Override
            public void onLocationChanged(Location location) {
                if (location != null) {

                    latToPass = location.getLatitude();
                    longToPass = location.getLongitude();

                    locationManager.removeUpdates(locationListener);
                    //locationManager = null;

                }
            } 
```

# java - Excel 到脚本 - 数组、ArrayList、Hashmap？

> ID：15637401
> 
> 赞同：0
> 
> 时间：2013-03-26T12:44:48.247
> 
> 标签：java, excel, hashmap

我有以下格式的excel

```
 customers  users
  customer1  user1
  customer1  user2
  customer2  user3
  customer3  user4
  customer3  user5 
```

我将上面的内容解析成一个字符串数组。我需要它在这样的字符串中

```
script.bat -c customer1 -u user1 user2
script.bat -c customer2 -u user3
script.bat -c customer3 -u user4 user5 
```

本质上，我想检查所有“客户 1”并将与“客户 1”关联的任何用户添加到字符串中。该字符串很容易，但是要让它们到达那里，我不确定是否最好使用 Hashmap 或类似的东西，以便我可以轻松地比较和查找值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:01:11.493

使用 a`Map`将您的独特客户与您的用户一起编译，然后遍历地图并格式化您`String`的 s。

使用您的输入作为的示例`String[]`：

```
public static void main(String[] args) {
    final String[] strings = {"customer1  user1",
        "customer1  user2",
        "customer2  user3",
        "customer3  user4",
        "customer3  user5"};

    final Map<String, Set<String>> concatentatingMap = new HashMap<String, Set<String>>() {
        @Override
        public Set<String> get(Object key) {
            Set<String> strings = super.get(key);
            if (strings == null) {
                strings = new LinkedHashSet<>();
                put((String) key, strings);
            }
            return strings;
        }
    };

    for (final String s : strings) {
        final String[] split = s.split("\\s++");
        concatentatingMap.get(split[0]).add(split[1]);
    }
    final MessageFormat messageFormat = new MessageFormat("script.bat -c {0} -u {1}");
    for (final Entry<String, Set<String>> entry : concatentatingMap.entrySet()) {
        final String customer = entry.getKey();
        final StringBuilder usersBuilder = new StringBuilder();
        final Iterator<String> iter = entry.getValue().iterator();
        while (iter.hasNext()) {
            usersBuilder.append(iter.next());
            if (iter.hasNext()) {
                usersBuilder.append(" ");
            }
        }
        System.out.println(messageFormat.format(new Object[]{customer, usersBuilder.toString()}));
    }
} 
```

输出：

```
script.bat -c customer3 -u user4 user5
script.bat -c customer2 -u user3
script.bat -c customer1 -u user1 user2 
```

# git - 当您在项目中单独工作时，git log 不显示分支

> ID：15637404
> 
> 赞同：1
> 
> 时间：2013-03-26T12:44:59.923
> 
> 标签：git, git-branch, branching-and-merging

我发现在使用其中一个或与其他开发人员合作时`gitk`，我只能看到分支和正确的项目拓扑。`sourcetree``git log`

但是当我独自工作并使用创建分支时`git checkout -b branchName`，我在任何这些可视化表示工具中都看不到任何分支。
看起来我只在 master 工作，没有代表任何分支。

我究竟做错了什么？当我创建它们或将它们与其他分支或主分支合并时，我希望看到我的分支出现。

我是否误解了 git 的工作原理？

进一步说明：

![在此处输入图像描述](../Images/dd6aaf106583b5a96c75cf0a50598461.png)

我希望看到这样的东西，其中代表了我的所有分支：

![在此处输入图像描述](../Images/18aca85f29daf5fb6dc32afccff8927c.png)

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:28:57.293

[`gitk`](http://git-scm.com/book/en/Git-Basics-Viewing-the-Commit-History) 采用与 . 相同的参数[`git log`](http://git-scm.com/docs/git-log)。

因此，如果您想查看所有（本地）分支，您至少应该使用：

```
gitk --branches. 
```

我也喜欢看到远程分支：

```
gitk --branches --all 
```

OP prussian [-blue](https://stackoverflow.com/users/1175555/prussian-blue) [没有看到的是](https://stackoverflow.com/questions/15637404/git-log-not-showing-branches-when-you-work-alone-in-the-project/15638269#comment22189451_15638269)：

> 我想要的是看到第二个屏幕截图，而不是第一个屏幕截图。我希望看到`testinscroll` **与 平行**的`master`，正如从项目的第一次提交中`testingscroll`分支出来的那样。`master`

我怀疑（并回答）的是：

> 您不会看到这一点，因为从`testingscroll`to的合并`master`是一个**快进**合并，如“[为什么 git 默认使用快进合并？](https://stackoverflow.com/questions/2850369/why-does-git-use-fast-forward-merging-by-default/2850413#2850413) ”中所述：`master`HEAD 刚刚被移至`testingscroll`，使两个分支相同。

什么会保留这两个分支，让它们分开直到合并，将是：

```
git merge --no-ff testingscroll 
```

# javascript - 胖箭重复？

> ID：15637407
> 
> 赞同：0
> 
> 时间：2013-03-26T12:45:07.503
> 
> 标签：javascript, coffeescript, arrow-functions

当我写咖啡脚本时，我倾向于这样做（伪代码）：

```
$link.click (e) =>
  this._clicked(e) 
```

真的没有办法在 CoffeeScript 中进行透明绑定吗？我希望能够做到：

```
$link.click =this._clicked 
```

或其他东西，它将我的 this._clicked 方法直接绑定到事件，并保留它的 this 指针

有任何想法吗？

**更新**

_clicked 将被定义为：

```
_clicked: (e) ->
  # some code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:46:57.433

咖啡脚本没什么特别的。做就是了

```
$link.click @_clicked 
```

然后定义`_clicked`为

```
_clicked: (e) =>
  # some code 
```

它将`this._clicked`作为 的 click 事件的处理程序传递`link`。

您可以像这样将任何函数作为回调传递。关键是不执行函数（没有（）在`@_clicked`）。JS 中的函数是一个普通变量，可以作为参数传递给其他函数。

和

```
$link.click -> 
```

您只是将函数`.click`直接传递给而不将其存储到变量中。

为了保持`this`你要么[用一个胖箭头](http://coffeescript.org/#fat-arrow)[定义`@_clicked`](http://coffeescript.org/#fat-arrow)，要么你使用[JavaScripts`bind`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，它返回一个`this`绑定到某个值的函数。

CoffeeScript 没有向 JavaScript 添加任何额外的功能。Fat 箭头只是执行类似于`bind`链接中的函数的绑定（如果它用于类的方法定义），或者只是在`var _this = this`函数内部定义函数时执行技巧。

# ios - Dropbox - 应用文件夹已删除 - 出现 NSURLErrorRequestBodyStreamExhausted 错误 - iOS

> ID：15637418
> 
> 赞同：2
> 
> 时间：2013-03-26T12:45:36.593
> 
> 标签：ios, dropbox

我正在使用 Core API 将 Dropbox 与 iOS 应用程序集成。我能够验证帐户，并成功上传文件。

但是说在身份验证后，用户从 Dropbox 帐户中删除应用程序文件夹，或者通过 Dropbox 设置卸载应用程序。

之后，如果我尝试上传文件，则整个文件都会被上传（进度从 0 到 1），然后我收到一个错误代码，错误代码`-1021`对应于`NSURLErrorRequestBodyStreamExhausted`，并且根据[https://](https://www.dropbox.com/developers/core/api)`401`中的标准 API 错误也没有错误代码[www.dropbox.com/developers/core/api](https://www.dropbox.com/developers/core/api)。
问题是这发生在装有 iOS 6 的设备上，即使该帐户本身也没有取消链接。我有一台装有 iOS 5 的设备，它得到一个错误代码`401`（但在整个文件上传之后也是如此），这是核心 api 文档中解释的身份验证错误（错误代码 401）。该帐户会自行取消关联。

**更新：**此错误已在最新的 dropbox core api Build 中得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T23:29:51.633

当您的应用启动时，以下代码将立即请求用户的 Dropbox 帐户信息（如果他们当前已关联）。如果用户删除了应用程序文件夹，或从 Dropbox.com 撤消了对您应用程序的访问权限，那么当您的应用程序启动时，该用户将立即取消链接。我认为这是一个很好的做法，无论 SDK 在上传文件时是否存在无法返回 401 的错误。

**`didFinishLaunchingWithOptions`将此添加到您初始化 Dropbox的应用委托方法中**

```
DBSession* dbSession = [[[DBSession alloc] initWithAppKey:DROPBOX_KEY appSecret:DROPBOX_SECRET root:kDBRootAppFolder] autorelease];
[DBSession setSharedSession:dbSession];
if ([[DBSession sharedSession] isLinked]) {
    DBRestClient* dbRestClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
    [dbRestClient setDelegate:self];
    [dbRestClient loadAccountInfo];
} 
```

**然后将以下方法添加到您的应用委托**

```
- (void)restClient:(DBRestClient*)client loadAccountInfoFailedWithError:(NSError*)error {
    if (error.code == 401) {
        [[DBSession sharedSession] unlinkAll];
    }
} 
```

# python - Unicode编码/解码

> ID：15637419
> 
> 赞同：3
> 
> 时间：2013-03-26T12:45:38.833
> 
> 标签：python, unicode, encoding, utf-8

我有一个看起来像这样的字符串。

```
st = '/M\xe4rzen' 
```

我想将其转换为 unicode。我怎样才能做到这一点？我试过了：

```
st.decode('utf-8')
unicode(t, 'utf-8') 
```

原始文件是 utf-8 编码的，但我似乎无法获得字符串的 unicode 表示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T12:47:25.460

您的数据不是 UTF8 编码的；更有可能是使用 Latin-1 编码：

```
>>> print st.decode('latin1')
/Märzen 
```

调用`.decode()`就够了，不需要*也*调用`unicode()`。

# jquery - 同一页面登录的 JQuery 问题

> ID：15637423
> 
> 赞同：0
> 
> 时间：2013-03-26T12:45:56.967
> 
> 标签：jquery, asp.net, internet-explorer-9

好的，**IE 9**和**JQuery**中的奇怪行为。

我有以下 WebConfig 设置：

```
 <authentication mode="Forms" >
    <forms loginUrl="Default.aspx"
      name=".ASPXFORMSAUTH"  />
    </authentication> 
```

基本上，我使用一个页面来登录并展示我网站的主要信息。页面加载，然后检查用户是否登录。如果没有，则调用的面板`pnlNotLoggedIn`可见，相应`pnlLoggedIn`的不可见。

我的问题如下：

第一次，`Default.aspx`页面加载了相应的 JQuery 资源，但是由于我的页面的性质，再次加载了页面，但是这次使用了 URL 重定向，这会再次加载相应的 Jquery 文件。

Visual Studio 引发错误

> $ 未定义。

但是，这在 Firefox 或 chrome 中不会发生，所以我认为**IE9**肯定有问题。

屏幕截图显示了网络流量，我只是试图解释。

**我的问题是，我怎样才能防止这种情况发生。验证用户身份后，我可以在 Page_Load 方法中加载 .js 文件吗？**

# php - Css/PHP 调整图像宽度然后修剪顶部和底部以适合

> ID：15637427
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:46:01.527
> 
> 标签：php, css

我在数据库中有动态加载的图像，这些图像的大小都不同，但我想以独特的方式调整它们。

[请看这个例子。](http://www.mycityvenue.co.uk/image.jpg)

我希望图像适合宽度，然后在顶部和底部绊倒其余部分，然后最重要的是，使整个事物具有响应性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:15:04.947

我可以告诉您您需要什么，但没有看到现有代码，我无法帮助您生成实际的解决方案。

本质上，当生成每个图像时，您应该首先将其包装在一个 div 中。

然后，根据图像的大小以及在桌面上您想要的任何宽度可以容纳多少，假设是 1140 像素。给刚刚生成的 div 类的图像框，然后将该框设置为您想要的大小。假设您想要 4 个宽度方向的框，边距为 3.8%。

现在只需计算所有宽度即可找到框的宽度...您将在 4 个框之间有 3 个边距间隙，因此 3.8% * 3 = 11.4% 然后... 100% - 11.4% = 88.6%

这意味着我们有 88.6% 的宽度可以在 4 个盒子之间分割... 88.6% / 4 = 22.15%

所以，我们给盒子的宽度是 22.15%，margin-right 是 3.8%

您必须在每 4 个盒子上动态生成一个类，或者使用类似`:nth-child()`的东西告诉每 4 个盒子有`margin-right: 0;`

当然，这些盒子将是 float: left 等以实现响应功能，并且所有盒子都必须在一个容器中。

我们将使用媒体查询使盒子只有 2 个盒子宽或只有 1 个长的盒子列。

至于修剪图像本身，一旦制作了盒子并设置了尺寸（以 px 为单位的高度），只需`overflow: hidden;`在 image-box 容器上定义以隐藏剩余的内容。

# json - 如何在 JSON 中转义双引号

> ID：15637429
> 
> 赞同：411
> 
> 时间：2013-03-26T12:46:14.850
> 
> 标签：json

我试图显示双引号，但它显示了一个反斜杠：

```
"maingame": {
    "day1": {
        "text1": "Tag 1",
        "text2": "Heute startet unsere Rundreise \\\"Example text\\\". Jeden Tag wird ein neues Reiseziel angesteuert bis wir.</strong> "
    }
} 
```

在 html 中呈现时，它显示为`\"Example text\"`. 正确的方法是什么？

* * *

## 回答 #1

> 赞同：575
> 
> 时间：2013-03-26T12:49:19.573

Try this:

```
"maingame": {
  "day1": {
    "text1": "Tag 1",
     "text2": "Heute startet unsere Rundreise \" Example text\". Jeden Tag wird ein neues Reiseziel angesteuert bis wir.</strong> "
  }
} 
```

(just one backslash (`\`) in front of quotes).

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2016-08-12T16:54:12.967

何时何地使用`\\\"`。好吧，如果你和我一样，当我发现这个帖子后意识到自己在做什么时，你会觉得自己和我一样傻。

如果您正在制作 .json 文本文件/流并从那里导入数据，那么双引号前只有一个反斜杠的主流答案：`\"`就是您要查找的答案。

但是，如果您像我一样，并且试图让 w3schools.com“Tryit 编辑器”在 JSON.parse(text) 的输出中使用双引号，那么您要查找的就是三重引号反斜杠双引号`\\\"`。这是因为您在 HTML`<script>`块中构建文本字符串，并且第一个双反斜杠将单个反斜杠插入到字符串变量中，然后下面的反斜杠双引号将双引号插入到字符串中，以便生成的脚本字符串包含`\"`from标准答案和 JSON 解析器会将其解析为双引号。

```
<script>
  var text="{";
  text += '"quip":"\\\"If nobody is listening, then you\'re likely talking to the wrong audience.\\\""';
  text += "}";
  var obj=JSON.parse(text);
</script> 
```

+1：因为它是一个 JavaScript 文本字符串，所以双反斜杠双引号`\\"`也可以；因为双引号不需要在单引号字符串中转义，例如`'\"'`并`'"'`导致相同的 JS 字符串。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-02-22T15:47:47.143

它显示了反斜杠，因为您也在转义反斜杠。

除了双引号之外，如果您想在 JSON 引用字符串中包含一个反斜杠，您还必须转义反斜杠。但是，如果您打算在转义序列中使用反斜杠，显然您不应该转义它。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-06-14T11:49:48.210

如果您想在 JSON 中转义双引号，请使用 \\ 转义它。

例如，如果您想创建以下 javascript 对象的 json

```
{time: '7 "o" clock'} 
```

那么你必须按以下方式写

```
'{"time":"7 \\"o\\" clock"}' 
```

如果我们使用解析它`JSON.parse()`

```
JSON.parse('{"time":"7 \\"o\\" clock"}') 
```

结果将是

```
{time: "7 "o" clock"} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-11-20T16:40:23.667

请注意，这通常发生在内容被“双重编码”时，这意味着编码算法被意外调用了两次。

第一次调用将编码“text2”值：

**来自：** Heute startet unsere Rundreise “示例文本”。Jeden Tag wird ein neues Reiseziel angesteuert bis wir。

**TO：** Heute startet unsere Rundreise \"示例文本\"。Jeden Tag wird ein neues Reiseziel angesteuert bis wir。

然后第二个编码再次转换它，转义已经转义的字符：

**来自：** Heute startet unsere Rundreise \"示例文本\"。Jeden Tag wird ein neues Reiseziel angesteuert bis wir。

**TO:** Heute startet unsere Rundreise \\\"示例文本\\\"。Jeden Tag wird ein neues Reiseziel angesteuert bis wir。

因此，如果您负责这里服务器的实现，请检查以确保没有两个步骤尝试对相同的内容进行编码。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-05-26T15:24:26.297

为了避免导致 JSON 数据出现问题的反斜杠，我使用了这个函数。

```
//escape backslash to avoid errors
var escapeJSON = function(str) {
    return str.replace(/\\/g,'\\');
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-01T21:49:11.647

对于那些想使用开发人员 powershell 的人。以下是要添加到您的 settings.json 的行：

```
"terminal.integrated.automationShell.windows": "C:\\Windows\\SysWOW64\\WindowsPowerShell\\v1.0\\powershell.exe",
"terminal.integrated.shellArgs.windows": [
    "-noe",
    "-c",
    " &{Import-Module 'C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\Common7\\Tools\\Microsoft.VisualStudio.DevShell.dll'; Enter-VsDevShell b7c50c8d} ",
    ], 
```

# php - 创建复选框

> ID：15637431
> 
> 赞同：2
> 
> 时间：2013-03-26T12:46:20.897
> 
> 标签：php, javascript, html, wordpress, widget

我正在尝试在*Wordpress*中为我的一个小部件创建一个复选框选项，以便在选中它时显示/显示一些内容。

问题是选中复选框时它不会显示内容。

```
 <p>
        <input type="checkbox" id="tcheckbox" class="checkbox" name="<?php echo $this->get_field_name('checkbox'); ?>" value="1" <?php checked( '1', $checkbox ); ?>/>
        <label for="<?php echo $this->get_field_id('checkbox');?>"><?php _e('My Checkbox.'); ?></label>

        <div id="tcheckboxdiv" style="display:none">
            <p>T One:</p>
            <p><input type="text" class="widefat" name="one" placeholder="1" readonly></p>
            <p>T Two:</p>
            <p><input type="text" class="widefat" name="two" placeholder="2" readonly></p>
        </div>
    </p>            

    <script type="text/javascript">
    jQuery(window).load(function() {
        jQuery("#tcheckbox").change(function() {
            jQuery("#tcheckboxdiv").fadeToggle("slow");
        });
    });
    </script> 
```

由于我对 javaScript 和 PHP 还很陌生，我想知道上面是否有任何冲突的脚本，因为它在这里似乎工作得很好：http: [//jsfiddle.net/GhZDP/](http://jsfiddle.net/GhZDP/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:59:09.140

这个问题很难重现，因为它实际上在您提供的 Fiddle 中工作。

在您的情况下，我会做的是检查代码是否通过`alert()`在`jQuery(window).load()`

之后，尝试不同的方法来监听`DOM ready`：

```
jQuery(function () {
    // Code here
});

jQuery(document).ready(function() {
    // Code here
}); 
```

这并不是您的解决方案的真正答案，而是帮助您调试此问题的支持。不过，它太大（并且变得难以阅读）无法在评论中发布。

您也可以尝试这样的委托事件侦听器（这需要您将“widgetForm”ID 添加到您的`<form>`标签中）：

```
jQuery(function () {
    jQuery("#widgetForm").on("change", "#logocheckbox", function () {
        // Your code goes here; e.g. $("#logocheckboxdiv").fadeToggle("slow");
    });
}); 
```

但同样，我只是猜测并帮助您调试，因为我无法真正重现您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:56:01.317

`$`由于 WP 在 noConflict 模式下运行，因此您的 jQuery 对象将无法在 WordPress 上运行。您应该将 jQuery 称为 as `jQuery`，而不是 as `$`。

```
<script type="text/javascript">
jQuery(window).load(function() {
    jQuery('#logocheckbox').change(function() {
        jQuery("#logocheckboxdiv").fadeToggle("slow");
    });
});
</script> 
```

另外，[请不要发布重复的问题](https://wordpress.stackexchange.com/questions/92398/creating-a-checkbox)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:18:41.473

尽管 jsFiddle 运行良好，但上面的脚本无法正常工作，因为它没有在*Wordpress*的源代码中正确输出。

*Wordpress*管理页面也使用 javaScript，这会导致编码冲突。

# wix - 运行时如何将 WiX Bundle ExePackage 带到前台

> ID：15637433
> 
> 赞同：2
> 
> 时间：2013-03-26T12:46:32.187
> 
> 标签：wix, bundle

我正在创建一个 WiX Bundle，以在客户端计算机上引导一些必需的先决条件。我通过它们的 exe 安装程序部署这些必备程序。除了 exe 安装程序 UI 在 Bundle UI 后面运行之外，一切似乎都运行良好。对于其中一些安装程序，这没有问题，因为它们不需要交互，但对于其中一些，我希望用户与该产品的安装程序进行交互，在其中设置选项等。用户可以在后台单击安装程序 UI提出来，但对于以前没有这样做过的人来说，这有点令人困惑。

我正在使用 WiX 3.7，并且有问题的引导式 exe 安装程序适用于 PostgreSQL 和 PostGIS。

所以我的问题是如何让 exe 包的目标在前台运行......或者相反，如何让 WiX Bundle UI 在 ExePackage 运行时进入后台或隐藏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:54:10.050

挑战在于，Windows 做了大量工作来对抗可执行文件接管 z-order。这是为了防止那些恼人的应用程序试图在你的脸上启动东西。

Burn 确实确保引导程序应用程序 hwnd 始终获得正确的 z 顺序（因此它不会像许多其他引导程序那样最终在任务栏中闪烁）。最重要的是，Window 安装程序允许外部 UI 处理程序（如 Burn）提供窗口句柄，以确保任何呈现的 MSI UI 最终位于该窗口的顶部。不幸的是，`::CreateProcess()`没有提供这样的机制所以看当前的行为。

您可以尝试编写自定义 BA 代码与 Windows 进行战斗以查找然后将新启动的可执行文件的窗口置于最前沿（我认为这是可能的，因为您的 BA 将拥有最高的 z-order 并且可以放弃它） .

就个人而言，我可能会尝试将配置包含在 BA 中并静默运行其他 pacakges。

# php - 日期存储在单独的字符串中，如何将其更改为数组 CAKEPHP 中的一个字符串

> ID：15637436
> 
> 赞同：1
> 
> 时间：2013-03-26T12:46:49.323
> 
> 标签：php, arrays, cakephp, date, cakephp-2.0

这是我的第一个 CakePhp 项目，我对日期有疑问..

我的数据库作为出生日期（dob）的一个字段，因此当用户登录时，日期数组的存储就像`[dob] => 1992-04-24`但是当他们更改日期时，它会变成`[dob] => Array ( [month] => 04 [day] => 24 [year] => 1992 )`

我认为这与我的编辑字段或模型有关，但我无法弄清楚。所以这里是模型：

```
<?php

App::uses('AppModel', 'Model');
App::uses('AuthComponent', 'Controller/Component');

/**
 * User Model
 *
 * @property Group $Group
 */
class User extends AppModel {

    public $validationDomain = 'validation';

    public $belongsTo = array('Group');
    public $actsAs = array('Acl' => array('type' => 'requester'));

    public function parentNode() {
        if (!$this->id && empty($this->data)) {
            return null;
        }
        if (isset($this->data['User']['group_id'])) {
            $groupId = $this->data['User']['group_id'];
        } else {
            $groupId = $this->field('group_id');
        }
        if (!$groupId) {
            return null;
        } else {
            return array('Group' => array('id' => $groupId));
        }
    }

    /**
     * Validation rules
     *
     * @var array
     */
    public $validate = array(
        'username' => array(
            'notempty' => array(
                'rule' => array('notempty'),
            ),
        ),
        'password' => array(
            'notempty' => array(
                'rule' => array('notempty'),
            ),
        ),
        'name' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Your name is required'
            )
        ),
        'dob' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'please enter your date of birth'
             )
        ),
            'group_id' => array(
        'numeric' => array(
            'rule' => array('numeric'),
        )
    ),
    );

    public function bindNode($user) {
        return array('model' => 'Group', 'foreign_key' => $user['User']['group_id']);
    }

    public function beforeSave($options = array()) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        return true;
    }

} 
```

这是编辑字段：

```
<div class="edit user form">
<?php
echo $this->Form->create('User', array('action' => 'useredit'));
echo $this->Form->input('id', array('type' => 'hidden'));
echo $this->Form->input('username', array('label' => __('Username', true), 'value' => $this->Session->read('Auth.User.username')));
echo $this->Form->input('password', array('label' => __('Password', true), 'value' => ''));
echo $this->Form->input('name', array('label' => __('Name', true), 'value' => $this->Session->read('Auth.User.name')));
echo $this->Form->input('dob', array ('label' => __('Date Of Birth', true) 
                                        , 'value' => $this->Session->read('Auth.User.dob')
                                        , 'dateFormat' => 'YMD'
                                        , 'minYear' => date('Y') - 90
                                        , 'maxYear' => date('Y') - 0));
echo $this->Form->end(__('Submit'));
?>
</div> 
```

以防万一您想要调试器报告，它是：

```
array(
    'User' => array(
        'password' => '*****',
        'id' => '2',
        'username' => 'iwanjones',
        'name' => 'Iwan',
        'dob' => array(
            'year' => '2013',
            'month' => '03',
            'day' => '26'
        ),
    )
) 
```

我希望调试器将数组保存为

```
array(
    'User' => array(
        'password' => '*****',
        'id' => '2',
        'username' => 'iwanjones',
        'name' => 'Iwan',
        'dob' => '2013/03/26'
        ),
    )
) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:59:44.023

> “好吧，我希望将日期作为一个字符串存储在数组中，而不是按日期、月份和年份分隔”

没有问题。它按照 CakePHP 有意地存储它，但会正确地保存在单个日期字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:05:57.260

好的，根据您的评论，您需要在 User 模型中添加一个 beforeSave 方法，将日期重新转换为单个字符串：

```
function beforeSave($options = array()) {
    // Convert the dob back to a single string
    if (!empty($this->data[$this->alias]['dob'])) {
        $this->data[$this->alias]['dob'] = implode('-',
            $this->data[$this->alias]['dob']['year'],
            $this->data[$this->alias]['dob']['month'],
            $this->data[$this->alias]['dob']['day']
        );
    }

    return true;
} 
```

# xpages - 将名称选择器链接到重复控件内的文本字段

> ID：15637440
> 
> 赞同：0
> 
> 时间：2013-03-26T12:46:57.587
> 
> 标签：xpages

我有一个多值字段，其中包含 Xpage 上的值数组。同一 Xpage 上的重复控件为数组中的每个值创建一个文本字段。

文本字段位于其自己的自定义控件（称为“namesField”）中，如下所示：

```
<xp:inputText
    value="#{compositeData.dataSource[compositeData.fieldName]}"
    style="width:300px">
</xp:inputText> 
```

自定义控件有两个自定义属性：“dataSource”和“fieldName”（均为字符串）。

在 Xpage 上，我将“namesField”自定义控件放在这样的重复控件中（reqDoc.RoutingStages 是来自多值字段的值数组）：

```
<xp:repeat
value="#{reqDoc.RoutingStages}" var="stage"
indexVar="stageIndex" id="ApproversRepeat">
<tr>
    <td>
        <!-- field label -->
        <xp:text escape="true"
            id="ApprovalStage"
            value="#{reqDoc.RoutingStages[stageIndex]}">
        </xp:text>
    </td>
    <td>
        <xc:namesField dataSource="#{reqDoc}"
            fieldName="ApproverName_#{stageIndex}">
        </xc:namesField>
    </td>
</tr>
</xp:repeat> 
```

这绝对很棒！为数组中的每个值创建一个输入字段，并将每个文本字段中的值成功保存到后端文档。例如，如果数组包含 4 个值，我会得到四个文本字段。这正是我想要的，但是我想将用户名存储在文本字段中，并且我希望使用每个字段的名称选择器输入它们。

怀着热情，我在“namesField”自定义控件中添加了一个名称选择器。绊脚石是向 inputText 字段添加一个 id，以便名称选择器可以绑定到它。我已经尝试在“namesField”自定义控件中计算 id，但显然这是不允许的（如果我将 id="#{compositeData.fieldName}" 放在文本字段中，则会导致错误“属性 id 的值不能运行时绑定”）。

我尝试了许多不同的方法来尝试计算文本字段的 ID。我尝试过的最新东西是这个

```
<xe:namePicker id="approverPicker"
    dialogTitle="Select an approver" for="${javascript:'#{javascript:reqDoc[\'ApproverName_\' + stageIndex.toString()]}'}">
.........
.........
</xe:namePicker> 
```

这不起作用！

那么，有谁知道我如何告诉 namePicker 它与哪个字段相关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:45:36.663

名称选择器是在您的自定义控件外部还是内部`namesField`？因为如果它在自定义控件内，那么您只需要设置`id`输入文本。就像如果输入文本字段是，`<xp:inputText id="inputText4" .....></xp:inputText>`那么名称选择器可以是`<xe:namePicker id="namePicker1" for="inputText4" .....></xe:namePicker>`.

# matlab - 计算积分图像

> ID：15637443
> 
> 赞同：1
> 
> 时间：2013-03-26T12:47:15.493
> 
> 标签：matlab, image-processing

我需要计算积分图像，但我不确定如何通过矢量化和计算求和表来实现这一点。这在 MATLAB 中怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:13:20.890

最简单的方法是使用两个调用`cumsum`并转置原始图像：

```
integral_image = cumsum(cumsum(image')'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-19T19:04:19.880

matlab 版本用零填充（第一行和第一列）

```
integralImage = cumsum(cumsum(im, 2), 1);
integralImage = padarray(integralImage,[1 1],'pre'); 
```

# java - 测试匿名类实例中的方法是否被调用

> ID：15637444
> 
> 赞同：1
> 
> 时间：2013-03-26T12:47:17.200
> 
> 标签：java, unit-testing, mocking, anonymous-class

**简介：**考虑以下简化的单元测试：

```
@Test
public void testClosingStreamFunc() throws Exception {
    boolean closeCalled = false;
    InputStream stream = new InputStream() {
        @Override
        public int read() throws IOException {
            return -1;
        }

        @Override
        public void close() throws IOException {
            closeCalled = true;
            super.close();
        }
    };
    MyClassUnderTest.closingStreamFunc(stream);
    assertTrue(closeCalled);
} 
```

显然它不起作用，抱怨`closed`不存在`final`。

**问题：**`close()`在 Java 单元测试的上下文中，验证被测函数确实调用了某些方法（如此处）的最佳或最惯用的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:00:10.490

我认为你应该看看[mockito](https://code.google.com/p/mockito/)，它是一个做这种测试的框架。

例如，您可以检查调用次数： http: [//docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#4](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#4)

```
import java.io.IOException;
import java.io.InputStream;

import org.junit.Test;

import static org.mockito.Mockito.*;

public class TestInputStream {

    @Test
    public void testClosingStreamFunc() throws Exception {
        InputStream stream = mock(InputStream.class);
        MyClassUnderTest.closingStreamFunc(stream);
        verify(stream).close();
    }

    private static class MyClassUnderTest {
        public static void closingStreamFunc(InputStream stream) throws IOException {
            stream.close();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:58:20.487

使用带有实例变量的常规类怎么样：

```
class MyInputStream {
    boolean closeCalled = false;

    @Override
    public int read() throws IOException {
        return -1;
    }

    @Override
    public void close() throws IOException {
        closeCalled = true;
        super.close();
    }

    boolean getCloseCalled() {
        return closeCalled;
    }
};
MyInputStream stream = new MyInputStream(); 
```

如果您不想创建自己的类，请考虑使用任何模拟框架，例如使用 Jmokit：

```
@Test
public void shouldCallClose(final InputStream inputStream) throws Exception {
    new Expectations(){{
        inputStream.close();
    }};

    MyClassUnderTest.closingStreamFunc(inputStream);
} 
```

# data-structures - 为什么堆比二叉树更能代表优先级队列？

> ID：15637446
> 
> 赞同：7
> 
> 时间：2013-03-26T12:47:18.293
> 
> 标签：data-structures, collections, implementation, priority-queue, binary-heap

在（最大）堆中，很容易及时找到最大的项目`O(1)`，但要真正删除它，您需要`O(log(n))`.

因此，如果从堆中插入和删除都是`O(log(n))`，那么在表示优先级队列方面，堆相对于二叉树的优势是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-27T00:34:52.357

1.  堆使用更少的内存。它们可以实现为数组，因此存储指针没有开销。（二叉树可以实现为数组，但可能有许多空的“间隙”，这可能比将它们实现为带有指针的节点浪费更多的空间）。

2.  堆保证具有 log(n) 的高度，因为它们不需要保证可以通过中序遍历按排序顺序检索元素，只需保证节点的值支配其子节点的值。这允许他们将“打包”结构作为一个数组。二叉树（除非它是平衡二叉树）通常会以高度大于 log(n) 的分支结束，因此即使操作具有相同的大 O 复杂度，实际上堆会稍微快一些。

3.  由于堆可以实现为数组，因此您可以获得巨大的优势，即访问可能仍在缓存中的连续内存，而不是访问内存分散在各处的指针指向的节点。

4.  堆比二叉树（尤其是平衡二叉树）更容易实现

一个缺点是使用堆你不能进行二分查找，但是对于优先级队列你不需要这个能力。

# java - 从 java 中杀死 linux 进程在 Runnable JAR 中不起作用

> ID：15637451
> 
> 赞同：0
> 
> 时间：2013-03-26T12:47:34.997
> 
> 标签：java, linux, process, terminal

在我的程序中，我启动了一个 gnome 终端并在其中执行一个程序。当该程序完成运行模拟时，我终止该进程并再次重新启动它。杀死它很重要，因为否则即使在模拟停止之后也不会释放所有资源（这使得 HeapSpaceError 更有可能）。

启动该过程的方法如下所示：

```
private void startNeSSiAndWait(int i) {

    System.out.println("OS is " + os);
    // if some unix system - we assume there is a gnome-terminal
    if(os.contains("nix") || os.contains("nux") || os.contains("aix")){

        String[] cmds = {"gnome-terminal", "-x" ,"bash", "-c", "cd '" + nessiPath + "'; export JAVA_HOME="+javaHome +"; ./nessi2.sh"};
        try {
            nessiProcess = Runtime.getRuntime().exec(cmds); // nessiProcess is an instance of Process

            Thread.sleep(5000); // wait till programm is ready
        } catch (IOException ex) {
            System.err.println("Error in executing proces..");
            ex.printStackTrace();

        }catch(InterruptedException ex){
            System.err.println("Error in sleeping..");
            ex.printStackTrace();
        }

    }else if(os.contains("win")){
       ...
    }

} 
```

杀死进程的方法是这样的：

```
private void killNeSSiAndWait(){

    nessiProcess.destroy();
    try {
        Thread.sleep(5000);
    } catch (InterruptedException ex) {
        System.err.println("Error in sleeping..");
        ex.printStackTrace();
    }
    System.out.println("destroyed");
} 
```

只要我从 NetBeans 启动，这些方法就可以正常工作。但是，一旦我将它导出为 Runnable JAR，终止进程就不起作用了。

我在带有 Java 6 的 Ubuntu 12.10 32Bit 机器上运行它。

它不能作为 Runnable JAR 工作的原因可能是什么？

**编辑**：
没有错误作为输出。终端只是继续执行 nessi2.sh 并忽略`nessiProcess.destroy()`.

NeSSi2 是一款由 DAI-Laboratories 开发的模拟器，有关详细信息，请参见[此处](http://www.nessi2.de/)。我们只使用后端。nessi-backend 唯一可见的输出是通过终端。
我知道 nessi 仍在运行，因为：

*   终端仍在运行 - 当没有更多进程在其中运行时，它会自行终止
*   模拟重新启动而不重新启动 nessi（但这**不是**我想要的）

由于我们只使用后端并且您只会在终端中看到一些文本，因此我认为没有理由发布屏幕截图。如果还有人喜欢看，我可以发截图。

我们正在使用 NeSSi2 进行一些网络模拟。为此，我的程序首先启动后端，然后开始模拟并等待模拟完成。模拟完成后，程序会杀死 NeSSi2，重新启动它并开始另一个模拟。此过程循环运行多次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T16:29:18.710

正如 RotN 爵士所猜测的那样，问题出在用户权限上。我仍然不知道为什么，但他的评论解决了我的问题。
感谢那。

# html - doesn't work in Firefox

> ID：15637457
> 
> 赞同：0
> 
> 时间：2013-03-26T12:48:04.420
> 
> 标签：html, css

Opening a plain html with the `<hr>` tag works perfect with Firefox. Howerver i did create my own CSS and the `<hr>` line won't show up. So i am demolishing the `<hr>` tag with my CSS but i don't know where. In Chrome and IE it will work without a problem.

**CSS code**

```
hr
{ 
    padding: 0px;
    margin: 0px;
} 
```

* * *

Got it! I had to use `<br><br><hr>`. It did work without a problem in every browser without the `<br><br>` except Firefox. The `<hr>` was vanished when not using the `<br><br>` in Firefox. Thanks for al the help people!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:52:15.500

对此进行测试：http: [//jsfiddle.net/jvzMK/4/](http://jsfiddle.net/jvzMK/4/)

```
*{font-family:Arial}
html,body { height: 100%; margin: 0px; padding: 0px; }

hr {
    border-style: inset; /* This is already default styling */
    border-width: 10px;
    border-color: red;
} 
```

`<hr>`更简单的方法是通过制作自己的“假货”来`<div>`使用`border-bottom`; [http://jsfiddle.net/jvzMK/8/](http://jsfiddle.net/jvzMK/8/)

# java - overflow actionbar menu android

> ID：15637461
> 
> 赞同：0
> 
> 时间：2013-03-26T12:48:14.800
> 
> 标签：java, android

i imported the library from here, inorder to use it as actionbar:

[https://github.com/johannilsson/android-actionbar](https://github.com/johannilsson/android-actionbar)

however i didnt find how can i implement a overflow menu item?

for example, in actionbarsherlock this code to implement the overflow menu item is:

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/root_menu"
    android:icon="@drawable/ic_menu_moreoverflow_normal_holo_light"
    android:showAsAction="always"
    android:title="More">
    <menu>
        <item
            android:id="@+id/menu_settings"
            android:icon="@drawable/ic_menu_settings_holo_light"
            android:showAsAction="never"
            android:title="Settings" />
        <item
            android:id="@+id/menu_about"
            android:icon="@drawable/ic_menu_info_details"
            android:showAsAction="never"
            android:title="About"/>
   </menu>
</item>
</menu> 
```

can someone help me with it? maybe the developer of this code can help me?

thanks alot

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:54:36.237

同样的方式你可以实现系统操作栏菜单。无需使用任何库或其他只需将此代码用于您的菜单，它将为您工作并生成您的菜单使用 oncreateoptionmenu/onprepareoptionmenu 例如使用此代码

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/root_menu"
    android:icon="@drawable/ic_menu_moreoverflow_normal_holo_light"
    android:showAsAction="always"
    android:title="More">
    <menu>
        <item
            android:id="@+id/menu_settings"
            android:icon="@drawable/ic_menu_settings_holo_light"
            android:showAsAction="never"
            android:title="Settings" />
        <item
            android:id="@+id/menu_about"
            android:icon="@drawable/ic_menu_info_details"
            android:showAsAction="never"
            android:title="About"/>
   </menu>
</item>
</menu> 
```

现在使用 oncreateoptionmenu/onprepareoptionmenu 在您的活动/片段活动中扩展此菜单

这是操作菜单的使用

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main_menu, menu);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){
    case R.id.menu_settings:
        Toast.makeText(context,"Setting menu selected",Toast.SHORT_LENGTH).show();
        break;      
    case R.id.menu_about:
        Toast.makeText(context,"About menu selected",Toast.SHORT_LENGTH).show();
        break;
    }
    return super.onOptionsItemSelected(item);
} 
```

# c# - list item to database

> ID：15637462
> 
> 赞同：4
> 
> 时间：2013-03-26T12:48:15.883
> 
> 标签：c#, .net, database, list, generic-list

i have a list

```
List<SalesDetail>  SalesList = new List<SalesDetail>();
SalesDetail detail = new SalesDetail(); 
```

where "SalesDetail" is a class. i have a button (add) and my code on click event of add button is SalesList.Add(details); where details is object of class SalesDetail which contains public variables with {set; and get;}

but when i try to retrieve each item of the list then i only get the last item. my code retrieving each item is

```
foreach(SalesDetail sd in SalesList)
{

    messageBox.show(SalesList);

} 
```

in my class SalesDetail i have following code

```
Public string Brand{get; set;}
Public string Product{get; set;} 
```

i want to retrieve each item from list and save it to database i would like to know where i have made mistake while retrieving the data.. please help Regards bunzitop

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:49:52.653

`SalesList`是类型。您应该`sd`在循环中使用（这是变化的值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:49:06.557

You need to use the `sd` object which refers to the current item in `SalesList`

Try:

```
foreach(SalesDetail sd in SalesList)
{

    messageBox.show(sd.Brand);
    messageBox.show(sd.Product);

} 
```

From chat:

```
List<SalesDetail> SalesList = new List<SalesDetail>();

public void button1_click() {

    SalesDetail detail = new SalesDetail();
    detail.Brand = textBox1.Text
    detail.Product= textBox2.Text` 
    SalesList.Add(detail);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:19:53.963

首先，您的类定义是错误的，因为您省略了`Brand`和`Product`属性的类型，并且`public`可见性修饰符应该是小写的。

为了使用`ToString()`，您需要覆盖类中的方法：

```
public class SalesDetail
{
    public string Brand {get; set;}
    public string Product {get; set;}

    public override string ToString()
    {
        return string.Format("Brand: {0}, Product {1}", Brand, Product);
    }
} 
```

然后您可以使用 Linq 到[`Aggregate`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)列表并显示它的内容。

```
var items = SalesList.Select(s => s.ToString()).Aggregate((s, s1) => s + Environment.NewLine + s1);
MessageBox.Show(items); 
```

# perl - perl SOAP::Lite proxy authentification

> ID：15637465
> 
> 赞同：1
> 
> 时间：2013-03-26T12:48:25.320
> 
> 标签：perl, soap, wsdl

I am trying to consume some SOAP Web Service from perl with SOAP::Lite. my script looks like :

```
use SOAP::Lite;
my $url1 = http://myUsername:myPassword@myProxyServer:port;
my $url2 = https: //myUsername:myPassword@server.wsdl;

print SOAP::Lite
    -> proxy($url1)
    -> service($url2)
    ->myMethod("foo", "bar"); 
```

and i get this error :

> Server description `https://myUsername:myPassword@server.wsdl` can't be loaded: 500 Can't connect to `http://myUsername:myPassword@myProxyServer:port`

. The $url1 and $url2 urls are correct and the myMethod method exist in wsdl file.

Any help will be apreciated.

Regards

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:57:34.163

`SOAP::Lite`据我所知，不能使用 WSDL。

如果您想使用`SOAP::Lite`，您需要自己阅读 WSDL，并找出正确的值用于`$url2`

或者你可以看看构建一个基于 的客户端`XML::Compile`，它可以处理 WSDL 并允许你调用基于它的服务。

# actionscript-3 - dispatchEvent from class to timeline

> ID：15637475
> 
> 赞同：0
> 
> 时间：2013-03-26T12:49:00.597
> 
> 标签：actionscript-3, flash

I know is not the best practice, but for this example i must continue with this scheme:

In my timeline i have this:

```
 addEventListener(KeyboardEvent.KEY_DOWN,handler);
function handler(event:KeyboardEvent){
   if(event.charCode == 13){
       trace('enter pressed');
   }
} 
```

Just a very simple enter key listener. In a class sometimes an action is triggered and I need to simulate the enter key press from the class in the timeline:

```
case 'enter':
{
  trace('it works!');
  dispatchEvent(new KeyBoardEvent(KeyBoardEvent.ENTER));    
  return;
} 
```

I know the case is triggered bucause i see the trace msg. But my handler function is not triggered. How can i solve this? In a few words, the only thing i need is to execute a function located in my timeline from an external class.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:04:06.380

您需要 dispatchEvent 到添加侦听器的对象。
例如，如果您的：
`addEventListener(KeyboardEvent.KEY_DOWN,handler);`
在主时间轴中，您应该
`MovieClip(root).dispatchEvent(new KeyBoardEvent(KeyBoardEvent.KEY_DOWN));`
在从另一个 MovieClip 调度或添加到根的对象时编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:15:01.947

您的问题是您有设计缺陷，而不是代码问题。你有你想要发生的“事情”。有时，您希望它发生，因为按下了一个键。有时，您出于其他原因希望它发生。

当你这样看时，现在很明显这是业务逻辑，*而不是*视图应该决定的事情领域。“某事”也可能不是 View 的责任。你还没有说它是什么，所以根据你的问题没有办法真正知道。让我们假设它是正确的视图责任。

现在，如果您`something()`向您的视图添加一个方法，那么在您的问题中负责生成“假”事件的一方现在可以调用该方法以响应您需要的任何条件。该方也可能*扮演*一个有意义的角色，它可以观看 KEY_DOWN 事件的舞台，或者它可能不会。通过简化 View 上的 API，您可以让父 View 或单独的 Controller 处理此问题，而不会影响 View 中的逻辑。

另一种可能的解决方案更高级一些，那就是创建一个新的`EventDispatcher`，您提供给您希望能够通信的所有实例。在这个模型中，你的 View 会监听那个 EventDispatcher 上的 DO_SOMETHING 事件，然后做一些事情。此 DO_SOMETHING 将作为键盘事件、您要处理的其他条件或任何可能导致“某事”的未来要求的结果而被调度。

# javascript - Javascript MVC Url 路由组件，两边路由

> ID：15637482
> 
> 赞同：0
> 
> 时间：2013-03-26T12:49:20.257
> 
> 标签：javascript, backbone.js, url-routing, javascriptmvc

我正在制作自己的小型 jsmvc 库，现在我想要一个用于我的小型框架的简单路由库，我只是将开源库连接在一起以使其根据我的需要工作，

现在我想要一个简单的 url 路由组件在我的框架中，它可以映射 url，如

`"customUrl/:param1"` 到 `"module/controller/action/param1/value1"`路径格式

而且我还想从路由器创建网址，`"roter.createUrl(module/controller/action,{params1:value1});"`以使我的规则易于维护，

你能建议我一些功能相似的好的库或源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:52:57.397

好的，最终使用 crossroads js，并将路线作为一些自定义功能

```
addRule:function(pattern, path) {
    var self = this;
    this.router.addRoute(pattern, function() {
        var res = self.resolvePathFormat(path);
        self.dispatch(res.module, res.controller, res.action, res.params);
    });
}, 
```

# php - 如何将.sql表文件导入mysql表

> ID：15637485
> 
> 赞同：0
> 
> 时间：2013-03-26T12:49:32.777
> 
> 标签：php, mysql

我使用从本地主机导出 .sql 文件本地 PC

```
$sql = "SELECT * INTO OUTFILE '$backup_file' FIELDS TERMINATED BY ',' LINES TERMINATED BY ';' FROM $table_name"; 
```

之后，我将此 .sql 文件上传到远程服务器。现在我需要将此 .sql 文件导入到同一个名为 $table_name 的远程 Mysql 表中。由于从远程服务器到远程 mysql 服务器的相对路径问题，我在使用 LOAD DATA INFILE 命令时遇到问题。任何人都可以帮助我创建导入此 .sql 文件的 PHP 脚本，该文件由“FIELDS TERMINATED BY ',' LINES TERMINATED BY ';' 到名为 $table_name 的 Mysql 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:57:17.593

使用“mysqldump”导出数据库（[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)），然后使用mysql语法在另一端导入它：

```
mysql -u <username> -p <database> < data.sql 
```

将 SQL 数据库从“data.sql”导入名为“”的数据库。“data.sql”是mysqldump命令写入的文件。

亚历克斯

# mysql - 数据库，仍然不确定定义关系

> ID：15637486
> 
> 赞同：0
> 
> 时间：2013-03-26T12:49:33.110
> 
> 标签：mysql

首先，我已经阅读[了这个](https://stackoverflow.com/questions/2814469/still-confused-about-identifying-vs-non-identifying-relationships)、[这个](https://stackoverflow.com/questions/1216805/trouble-deciding-on-identifying-or-non-identifying-relationship)和[这个](https://stackoverflow.com/questions/762937/whats-the-difference-between-identifying-and-non-identifying-relationships)关于此事的话题。我*想*我理解它，但我仍然不确定我是否以正确的方式做这件事，因为我几乎只能识别关系。我基本上想知道我是否朝着正确的方向前进。

我正在创建一个数据库，用户可以在其中创建个人资料（带有免费和付费版本）并发布新闻项目。其他用户可以回复这些项目，并且反应可以获得评级。这是网站功能的一小部分，但它是让我担心的部分。我写下了以下内容（每一行代表两个表之间的链接）：

```
用户：
一个用户可以定义一次附加信息 [识别，1:1]
一个用户可以有一种性偏好 [识别，1:1]
一个用户可以有一个支付状态 [识别，1:1]

一个用户可以定义五个问题 [Identifying, 1:n]
一个用户可以定义三个附加信息行 [Identifying, 1:n]
一个用户可以定义三个兴趣 [Identifying, 1:n]

消息：
一个用户可以发布多个新闻项目 [Identifying, 1:n]
一条新闻可以收到多条评论 [Identifying, 1:n]
每条评论都有一位作者（用户）[识别，1:1]
每条评论都可以获得一个评分[识别，1：1]
每个评分一次只能由一个用户放置 [识别，1:1]

支付：
一项促销既可以适用于所有用户，也可以适用于一位特定用户 [非识别性，1:n]

```

几乎所有上述关系都是确定的，这让我质疑我是否理解这件事。

除此之外，我使用了一个表 ( `status`)，其中包含（以及其他）用户的付款状态和另一个表 ( `promotions`)，其中包含可能的促销活动。我不清楚我是否应该将`promotions`表格链接到`status`or`user`表格。

有人可以帮我解决疑惑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:17:49.940

我不知道我是否准确回答了您的问题，特别是考虑到您的识别和非识别关系。

根据您的说法，*Status*表和*Promotion*表是我所说的引用表，它们可以链接到*User*表（使用实体关联模型）1-n 关系，这意味着*User*表中有一个前键引用状态 id 和另一个引用促销 id（这意味着您不想要任何历史）- 可能是关于促销的 0-n

表*news*通过同一个关系王与User表侧的n基数链接到*User*（这意味着News表中的外键引用用户ID，Comment表同上，带有外键的New表在评论表中引用新闻 ID

关于 Rating 表，不用想太多，我会说它来自 User 和 Comment 的关联，具有 nn 关系。结果：一个带有 user_id 和 comment_id 外键的表...评论的评级是对评级表进行操作的结果，但为了更快，您可以在评级表上触发一个说每次添加评级时一个评论你计算的新评分你可以在评论表中推送一个字段

# php - 包括 PHP 变量作为超链接项

> ID：15637488
> 
> 赞同：-3
> 
> 时间：2013-03-26T12:49:33.773
> 
> 标签：php, hyperlink

我在创建超链接时遇到问题，其中链接中有两个 php 变量：

```
 <a href="http://www.mydomain.com/wp-content/uploads/file_uploads/'.$userID.'/'.$Thefile">'.pathinfo($Thefile, PATHINFO_FILENAME) .'</a></td>'; 
```

它显示一个错误。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:52:37.887

你没有给我太多继续......但试试这个：

```
<?php
  echo '<a href="http://www.mydomain.com/wp-content/uploads/file_uploads/'.$userID.'/'.$Thefile.'">'.pathinfo($Thefile, PATHINFO_FILENAME) .'</a></td>';
?> 
```

之后你失踪`.'`了`$Thefile`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:52:59.713

这些报价可能会变得棘手

```
<?php
echo "<a href=\"http://www.mydomain.com/wp-content/uploads/file_uploads/".$userID."/".$Thefile."\">".pathinfo($Thefile, PATHINFO_FILENAME)."</a>";
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:20:31.167

我知道人们会因为没有使用正确的 html 引号而生我的气，但这个答案是最漂亮的

```
$pathInfo = pathinfo($Thefile, PATHINFO_FILENAME);
echo "<a href='http://www.mydomain.com/wp-content/uploads/file_uploads/$userID/$Thefile'>$pathInfo</a>"; 
```

# c# - 如何在 ASP.NET MVC 4 中使用 Autofac 注入 HttpContextBase

> ID：15637491
> 
> 赞同：21
> 
> 时间：2013-03-26T12:49:42.977
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, autofac

我正在使用`ASP.MVC 4`和`Autofac`。

我在我的`global.asax.cs`文件中注册了以下内容：

```
ContainerBuilder builder = new ContainerBuilder();

builder.Register(c => c.Resolve<HttpContextBase>().Request)
     .As<HttpRequestBase>()
     .InstancePerHttpRequest();
builder.Register(c => c.Resolve<HttpContextBase>().Response)
     .As<HttpResponseBase>()
     .InstancePerHttpRequest();
builder.Register(c => c.Resolve<HttpContextBase>().Server)
     .As<HttpServerUtilityBase>()
     .InstancePerHttpRequest();
builder.Register(c => c.Resolve<HttpContextBase>().Session)
     .As<HttpSessionStateBase>()
     .InstancePerHttpRequest();

builder.RegisterControllers(Assembly.GetExecutingAssembly());

builder.RegisterType<WebWorkContext>().As<IWorkContext>().InstancePerHttpRequest(); 
```

在我的家庭控制器中，我有这个（仅用于测试目的）：

```
private readonly HttpContextBase httpContext;

public HomeController(HttpContextBase httpContext)
{
     this.httpContext = httpContext;
} 
```

我在 ASP.NET MVC 3 项目中使用了完全相同的代码，它运行良好。现在在这个项目中我遇到了错误。不知道为什么？我得到的错误是：

**在“MyProject.Web.Controllers.HomeController”类型上使用“Autofac.Core.Activators.Reflection.DefaultConstructorFinder”找到的任何构造函数都不能使用可用的服务和参数调用：无法解析参数“System.Web.HttpContextBase httpContext”构造函数'Void .ctor（System.Web.HttpContextBase）'。在 Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable `1 parameters) at Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 参数) 在 Autofac.Core.Resolving.InstanceLookup.Execute() 在 Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration 注册, IEnumerable `1 parameters) at Autofac.Core.Resolving.InstanceLookup.ResolveComponent(IComponentRegistration registration, IEnumerable`1 个参数）在 Autofac.Core.Registration.ExternalRegistrySource.<**

我不太确定为什么这不起作用？我需要在 ASP.NET 4 中做不同的事情吗？

我有一个单独的项目，我也想在其中注入`HttpContextBase`，但我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-26T14:17:37.547

感谢`nemesv`.

我最终更换了：

```
builder.Register(c => c.Resolve<HttpContextBase>().Request)
     .As<HttpRequestBase>()
     .InstancePerHttpRequest();
builder.Register(c => c.Resolve<HttpContextBase>().Response)
     .As<HttpResponseBase>()
     .InstancePerHttpRequest();
builder.Register(c => c.Resolve<HttpContextBase>().Server)
     .As<HttpServerUtilityBase>()
     .InstancePerHttpRequest();
builder.Register(c => c.Resolve<HttpContextBase>().Session)
     .As<HttpSessionStateBase>()
     .InstancePerHttpRequest(); 
```

...只需：

```
builder.RegisterModule(new AutofacWebTypesModule()); 
```

现在可以了。不知道有什么区别，但模块中的代码看起来和我上面的完全一样。

# git - 如何在 Git 存储库中找到具有多个父级的所有提交？

> ID：15637494
> 
> 赞同：1
> 
> 时间：2013-03-26T12:49:49.053
> 
> 标签：git

我正在研究开源项目中的合并。

对于 repo 中的每个合并，我需要找到基础（最近的共同祖先）、两个贡献者以及生成的合并提交。

我已经知道如何获取最近的共同祖先 ( `git merge-base rev1 rev2`) 和贡献者 ( `git log --pretty=%P -n 1 <commit>`)，但是在识别合并操作导致的提交时遇到问题。

如何在 Git 存储库中找到具有多个父级的所有提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:22:36.083

这应该足够了（对于本地提交）

```
 git rev-list --merges 
```

[`git rev-list`手册页](http://git-scm.com/docs/git-rev-list)提到：

```
--merges 
```

> **仅打印合并提交**。这与`--min-parents=2`.

这意味着 rev-list 有一些有趣的过滤器：

```
--min-parents=<number>
--max-parents=<number> 
```

> 仅显示至少（或最多）有那么多提交的提交。
> 尤其是：
> 
> *   `--max-parents=1`与 相同`--no-merges`，
> *   `--min-parents=2`是一样的`--merges`。
> *   `--max-parents=0`给出所有**根提交**和
> *   `--min-parents=3`所有**章鱼合并**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:24:27.083

尝试：

```
git log --merges 
```

使用适当`--pretty`的解析输出。

# titanium-mobile - 在 scrollablebiew 中添加更多地图视图会使我的应用程序崩溃

> ID：15637496
> 
> 赞同：0
> 
> 时间：2013-03-26T12:49:56.090
> 
> 标签：titanium-mobile

**有人知道为什么当我在 scrollabeview 中添加 3 个地图视图时应用程序崩溃？我该怎么做……这是一个好的设计吗？那是因为可滚动视图谈论所有地图视图并从内存中获取所以它是崩溃的......谁能给我这样做的方法？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:01:32.387

似乎您正在使用地图 api v1。仅供参考，直到 v1，一个 MapActivity 可以包含一个且只有一个 MapView。很可能您的 logcat 也抱怨相同。现在在[map api v2](https://developers.google.com/maps/documentation/android/)中，您可以在 Activity 中嵌入多个[MapFragments](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment)。

# ui-automation - TreeWalker 看不到 AutomationElement，但 UIA Verify 可以

> ID：15637497
> 
> 赞同：2
> 
> 时间：2013-03-26T12:49:56.477
> 
> 标签：ui-automation

我正在使用 UI 自动化框架，并且正在尝试使用 TreeWalker 解析我的 UI。（我也尝试过[这里](https://stackoverflow.com/questions/9282275/automationelement-shows-up-using-inspect-exe-but-does-show-not-up-when-using-uia)建议的解决方案，但没有太大帮助。）

我有一个窗格，其中包含一个子窗格和几个子按钮。他们都处于同一水平，所以我想我们可以称他们为兄弟姐妹。当我使用 TreeWalker 解析元素时，我只能“看到”窗格 - 而不是按钮 - 我实际上在之后。

令我烦恼的是，当我使用 UIA 验证并选择其中一个按钮时，它设法构建和绘制层次结构。然后，如果我通过上下文菜单选择“转到兄弟”，我可以轻松地在子窗格和其他子按钮之间跳转。

我已经尝试了 TreeWalker 的所有不同版本，例如 Control 和 Raw，但我最终得到了相同的结果 - 没有 - 它只看到子窗格。

有人可以给我一个关于 UIA 验证如何能够建立其层次结构并仍然显示（并设法在之间导航）所有组件的高级概述吗？为什么我不能在代码中复制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-03T05:50:11.057

我的猜测是您使用的是内置的托管 UIA 包装器。是这样吗？托管版本使用具有已知限制/问题的 UIA v2。UIA 验证直接通过 COM 使用 UIA v3。

要验证是否是这种情况，您可以尝试使用[UISpy](https://stackoverflow.com/questions/1848721/where-do-i-get-ui-spy)而不是 UIA 验证。它也使用旧的托管包装器，因此如果它与您的代码有相同的问题 - 这将是一种确认。

[您可能希望使用UIAComWrapper](https://github.com/JakeGinnivan/UIAComWrapper/)而不是内置包装器，它提供相同的 API，但在底层使用 COM/UIA v3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T08:22:07.557

我不确定是什么问题，我没有你的应用程序，所以我可以测试它，但你是否尝试使用 AutomationElement.FindAll 函数？如果要检索元素的所有子元素，可以使用如下代码：

```
collection = parent.FindAll(TreeScope.Children, Condition.TrueCondition); 
```

这将返回控制子级。您还可以尝试使用此[工具](http://automationspy.com)测试您的应用程序，看看它是否找到了按钮。此工具是使用 .NET Framework 4.0 制作的。祝你好运！

# r - geom_text 中的解析表达式：字符、数字和特殊字符

> ID：15637498
> 
> 赞同：3
> 
> 时间：2013-03-26T12:49:57.183
> 
> 标签：r, ggplot2

**我的问题**

我想`ggplot()`用一个表达式来注释 a 的每个方面，该表达式是统计测试产生的值的组合。我无法在`geom_text()`.

一个类似的问题在[这里](https://stackoverflow.com/questions/4408414/cannot-concatenate-more-than-3-elements-in-an-expression-for-ggplot2s-geom-text)被部分覆盖。不幸的是，我无法应用该特定示例。

**我的目标**

解析表达式结合数字、字符和特殊字符。在这种情况下，以下示例的lab2。

**例子**

```
p <- ggplot(mtcars, aes(mpg, wt)) + geom_point()

custom_label <- data.frame(cyl = c(4,6,8),
                           wt = c(5,5,5),
                           lab = c('X^2','X^2','X^2'),
                           lab2 = c('X^2: 18.5342, p =3e-04',
                                   'X^2: 4.7512, p =0.1909',
                                   'X^2: 15.3266, p =0.0016'))
p + facet_grid(. ~ cyl) +
  geom_text(data = custom_label, aes(x=30, y=wt, label = lab2), size = 3, parse = T) 
```

这适用于使用 custom_label$lab，但使用 lab2 失败。

我很感激这方面的任何帮助。如果我清楚地提出我的问题，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:11:28.977

实际上我会争辩说你没有得到一个真实的`chi-squared`，而是得到了一个`X^2`。这可能没问题，因为卡方变量的样本估计值通常被标记为 X^2，但是如果你想`chi`你需要使用`chi` （或者`Chi`对于看起来很像“X”的大写希腊语）。您需要使用双引号并构造为`plotmath`带有适当`~`和`*`分隔符的表达式：

```
 lab2 = c("chi^2*':'~18.5*', p =3e-04'",
                               "chi^2*':'~4.7*', p =0.1909'",
                               "chi^2*':'~15.3*', p =0.0016'") 
```

运行 plotmath 的示例和演示：

```
?plotmath
demo(plotmath) 
```

# websocket - Cometd vs ActiveMQ 用于实时 Web 应用程序的服务器端推送

> ID：15637501
> 
> 赞同：4
> 
> 时间：2013-03-26T12:50:13.607
> 
> 标签：websocket, activemq, comet, server-push, cometd

我们需要为实时 Web 应用程序开发服务器端推送基础设施。为此，我一直在考虑使用 Cometd，因为它支持长轮询以及基于 Web 套接字的实现。

但是，我最近遇到了[http://activemq.apache.org/ajax.html](http://activemq.apache.org/ajax.html)和[http://activemq.apache.org/websockets.html](http://activemq.apache.org/websockets.html)之类的链接，这些链接甚至说 ActiveMQ 使用长轮询（彗星）提供对服务器端推送的支持技术）以及网络套接字。我的理解是，对此的 ActiveMQ 实现不符合 Bayeux 协议。

对于服务器端推送解决方案，ActiveMQ 与 Cometd 相比有什么优势/好处吗？其中之一是否提供了任何其他功能？这些哪个更受欢迎和稳定？

谢谢，迪帕克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:47:54.487

我会说选择 ActiveMQ 的主要原因是当您首先构建基于消息传递的后端技术时。然后，您可以通过将消息推送到浏览器来轻松启动和运行。

不过，我真的不认为 ActiveMQ 真的打算成为后端和前端之间的胶水技术，所以让它适应一般情况可能是一种奇怪的鸟（虽然，我必须承认，我没有尝试过）。

# git - 致命：'origin' 似乎不是 git 存储库

> ID：15637507
> 
> 赞同：117
> 
> 时间：2013-03-26T12:50:26.833
> 
> 标签：git, github, push, git-push

我的`moodle`Github 帐户上有一个`forked`来自官方存储库的存储库。

然后我将它克隆到我的本地机器上。它工作得很好。我创建了几个分支（在`master`分支下）。我做了几次提交，效果很好。

我不知道当我这样做时我是如何得到以下错误的：`git push origin master`

```
fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

如何在不影响我在 Github 上的存储库的情况下解决错误？

我在用着`Ubuntu 12.10`

我`.git/config`做完之后的内容`cat $(git rev-parse --show-toplevel)/.git/config`给出了：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[branch "master"]
[branch "MOODLE_23_STABLE"]
[branch "MOODLE_24_STABLE"]
[remote "upstream"]
    url = git://git.moodle.org/moodle.git
    fetch = +refs/heads/*:refs/remotes/upstream/* 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-03-26T13:13:04.097

`$HOME/.gitconfig`是你的 git**全局**配置。[配置文件](http://git-scm.com/docs/git-config)分为
三个[级别](https://stackoverflow.com/a/1063646/6309)。

```
 cat $(git rev-parse --show-toplevel)/.git/config 
```

（由[bereal](https://stackoverflow.com/users/770830/bereal)[提到](https://stackoverflow.com/questions/15637507/fatal-origin-does-not-appear-to-be-a-git-repository/15637954#comment22186180_15637507)）是您的*本地*配置，是您克隆的仓库的本地配置。

 *你也可以在你的仓库中输入：

```
git remote -v 
```

并查看其中是否列出了任何名为“origin”的遥控器。

如果没有，如果缺少该远程（在克隆存储库时默认创建），您可以再次添加它：

```
git remote add origin url/to/your/fork 
```

* * *

OP提到：

> 做`git remote -v`给：

```
upstream git://git.moodle.org/moodle.git (fetch) 
upstream git://git.moodle.org/moodle.git (push) 
```

所以`origin`缺少 ' '：对*你的*fork 的引用。
请参阅“[和](https://stackoverflow.com/a/9257901/6309)[在 github](https://stackoverflow.com/a/9257901/6309)[之间有什么区别`origin``upstream`](https://stackoverflow.com/a/9257901/6309)”

![在此处输入图像描述](../Images/3c502c72e3359837ba58cbc6aad92c31.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-11-11T14:21:44.707

当我在 GitHub 上重命名我的存储库时，我遇到了同样的问题。我试图推动我得到错误

```
fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我不得不使用更改 URL

```
git remote set-url origin ssh://git@github.com/username/newRepoName.git 
```

在此之后，所有命令开始正常工作。您可以使用检查更改

```
git remote -v 
```

就我而言，在成功更改后，它在 URL 中显示了正确的重命名仓库

```
[aniket@alok Android]$ git remote -v
origin  ssh://git@github.com/aniket91/TicTacToe.git (fetch)
origin  ssh://git@github.com/aniket91/TicTacToe.git (push) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-03-21T11:46:28.903

您尝试从中提取的另一个分支可能不同步；所以在添加和删除远程尝试之前（如果你试图从主人那里拉）

```
git pull origin master 
```

对我来说，这个简单的调用解决了这些错误消息：

*   致命：“master”似乎不是 git 存储库
*   致命：无法从远程存储库中读取。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-03-17T13:20:06.333

尝试先创建远程源，可能因为您更改远程仓库的名称而丢失

git 远程添加源 URL_TO_YOUR_REPO

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-02T09:10:30.793

我有同样的问题并通过检查解决了

```
git remote -v

git init the repo URL

git remote add origin the repo URL

git push -f origin master 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-15T16:30:59.660

这不能回答您的问题，但由于不同的原因，我遇到了类似的错误消息。为了收集信息，请允许我发帖。

我在网络驱动器上有一个 git repo。我们称这个网络驱动器为 RAID。我在我的本地机器 (LOCAL) 和我的数字处理集群 (CRUNCHER) 上克隆了这个 repo。为方便起见，我在本地计算机上的 CRUNCHER 上安装了我帐户的用户目录。因此，我可以在 CRUNCHER 上操作文件，而无需在 SSH 终端中进行操作。

今天，我正在通过本地机器修改 CRUNCHER 上的 repo 中的文件。在某个时候，我决定提交文件，所以做了一个提交。添加修改后的文件并进行提交按我的预期工作，但是当我打电话时，`git push`我收到了一条类似于问题中发布的错误消息。

原因是，我`push`从本地的 CRUNCHER 的 repo 中调用。因此，配置文件中的所有路径都是错误的。

当我意识到我的错时，我通过终端登录到 CRUNCHER 并能够推送提交。

如果我的解释无法理解，或者您觉得我的帖子是多余的，请随时发表评论。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-16T16:13:17.190

将远程源设置为路径**fs**而不是**.git/config中的****ssh**时，我在**git pull origin branchname**上遇到了同样的错误：

 ******```
fatal: '/path/to/repo.git' does not appear to be a git repository 
fatal: The remote end hung up unexpectedly 
```

就像这样（这只适用于同一**台 git**服务器上有权访问 git 的用户）：

```
url = file:///path/to/repo.git/ 
```

像这样修复它（这适用于所有有权访问**git 用户**（ssh authorizes_keys 或密码）的用户）：

```
url = git@domain.com:path/to/repo.git 
```

我将它作为目录路径的原因是因为**git**文件位于同一台服务器上。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-21T05:58:41.027

**100% 有效。**

首先确保项目根目录中没有隐藏的 git 文件夹，如果有则将其删除。然后打开命令外壳并执行以下命令：

```
git init -b main

git add .   //This is very important and it adds the files in the local repository and stages them for commit.

git commit -m "First commit"

git remote add origin  <REMOTE_URL>  //REMOTE_URL: the repository address in github.com 

git remote -v  //Verifies the new remote URL

git push origin main 
```

就是这样。[您还可以在GitHub 文档](https://docs.github.com/en/github/importing-your-projects-to-github/importing-source-code-to-github/adding-an-existing-project-to-github-using-the-command-line)中阅读有关此内容的更多信息*******

# oracle - 使用 Informatica 将数据加载到 Oracle XE 10 g 时出现数据库驱动程序错误

> ID：15637513
> 
> 赞同：1
> 
> 时间：2013-03-26T12:50:35.233
> 
> 标签：oracle, driver, informatica-powercenter, informatica

我正在尝试在 Oracle XE 10g 数据库中加载。当我运行 Informatica PowerCenter 工作流时，我收到以下错误：

```
CMN_1022    Database driver error...
CMN_1022 [Database driver event...
    Error occurred loading library [pmora8.dll]. 
    System error encountered is 193\. 
    Error text is 
        %1 is not a valid Win32 application.
    .] 
```

任何想法可能导致此错误？我的环境如下：

*   视窗服务器 2008 R2
*   Informatica PowerCenter 9.5
*   甲骨文 XE 10 G

Powercenter 存储库位于 SQL Server 2012 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:38:31.427

好吧，在您的 informatica 运行时环境可以被视为已准备好运行作业之前，需要设置一些变量...

1.  PM_HOME - 必须指向安装 informatica 的目录
2.  LIBRARY_HOME 或 LD_LIBRARY_PATH - 根据您是在 windows 世界还是 unix（分别），这个变量应该包括来自 informatica 的库文件。通常这应该包括 $PM_HOME/bin
3.  PATH - 这必须包括来自informtica 的可执行文件以及您可能正在访问的任何其他子系统。

当您第一次安装 informatica 软件时，这些变量可能没有在 windows/unix 中设置/创建，请不要犹豫重新创建它们。但是，如果它们已经存在（例如 PATH 已经存在），请确保附加（而不是替换）新值。

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:27:51.203

从错误消息看来，您已经安装了 32 位 Oracle 客户端和 64 位 PowerCenter。

64 位 PowerCenter 仅适用于 64 位 oracle 客户端。请安装 64 位 Oracle 客户端，重新启动 PowerCenter 服务并检查会话是否成功。

关于此线程中的讨论的一些评论：

*   确保将 %oracle_home%/bin 作为第一个条目添加到 PATH 变量中。Informatica 建议这样做。
*   更改 PATH 变量后，需要重新启动 Informatica 服务才能使其生效。
*   pmora8.dll 将在 %INFA_HOME%/server/bin 中可用
*   PM_HOME 适用于 PowerCenter 7.x 或更早版本。从 8.x 开始，它是 INFA_HOME

# javascript - 文本区域随文本增长

> ID：15637517
> 
> 赞同：1
> 
> 时间：2013-03-26T12:50:52.150
> 
> 标签：javascript, html, css

我正在为一个商业应用程序做一个小评论功能。每条评论都是一个跨度，如果你点击它，它会变成一个文本区域

问题是我希望 textarea 占用与其中的文本相同的空间（例如不编辑时的跨度）

我找到了让行随文本增长的解决方案（jQuery Autosize 等），但是是否有任何解决方案可以让宽度和高度随文本增长？

**编辑：**在其编辑模式下，标记看起来像这样（使用敲除，所以这是动态呈现的 HTML 的样子，实际的 KO html 是不同的）

```
<li>
    <span style="display: none">This is a comment</span>
    <textarea>This is a comment</textarea>
    <span class="username">UserOne</span>
    <span class="timestamp">Mars 26 '13</span>
</li> 
```

**edit2：**所以这是唯一的解决方案：将 cols 设置为 textarea 中最长的行，并将 text-area 的最大宽度设置为 parent-width 减去总兄弟宽度？没有使用 CSS 或 jQuery 的开箱即用解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T13:58:12.610

```
<style>
div[contenteditable]{
    border: 1px solid black;
    overflow: none;
}
</style>

<div contenteditable>Type me</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-26T19:44:48.427

您必须在 keyup 和 keydown 上动态调整 textarea 的高度。将高度分配给 auto 以便 scrollHeight 反映所需的高度，然后将高度重新分配给它。查看以下代码：

```
 var computedElement = window.getComputedStyle($(element)[0]),
        paddingTop = parseInt(computedElement.paddingTop),
        paddingBottom = parseInt(computedElement.paddingBottom),
        borderBottom = parseInt(computedElement.borderBottom),
        borderTop = parseInt(computedElement.borderTop),
        lineHeight = parseInt(computedElement.lineHeight),
        outerHeight = paddingBottom + paddingTop + borderTop + borderBottom;

        var resize = function() {
          //height:auto resets the height to row=1 to get the scrollHeight without white space
          $(element).css('height', 'auto');
          $(element).height($(element)[0].scrollHeight - outerHeight);
        }

        //first resize to set the existing text
        $timeout(function(){
          if($(element).val().length) {
            resize();
          }
        });

        //resize on keyup and keydown 
        $(element).on('keydown keyup', function() {
          $timeout(function(){
            resize();
          });
        }); 
```

# javascript - Node.js 和幻象问题

> ID：15637521
> 
> 赞同：0
> 
> 时间：2013-03-26T12:51:08.497
> 
> 标签：javascript, node.js, web-scraping, phantomjs

我正在使用 Node.js 和可用的节点幻象模块。但我似乎被困在一个基本的水平，无法让这段基本的代码工作：

```
var phantom = require('phantom');
phantom.create(function(ph) {
  return ph.createPage(function(page) {
    return page.open("http://www.google.com", function(status) {
      console.log("opened google? ", status);
      return page.evaluate((function() {
        return document.title;
      }), function(result) {
        console.log('Page title is ' + result);
        return ph.exit();
      });
    });
  });
}); 
```

我真的不明白为什么控制台消息没有出现？我猜这恰好在某个幻影范围内，但是我可以将消息解析到节点上吗？还是问题完全不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:58:23.100

从自述文件：

首先，确保安装了 PhantomJS。该模块期望 phantomjs 二进制文件位于 PATH 某处。换句话说，输入这个：

```
$ phantomjs 
```

如果这样可行，那么 phantomjs-node 也可以。它仅在 PhantomJS 1.3 上进行过测试，几乎可以肯定不适用于任何较旧的版本。

如果这不起作用（我所期望的）安装 phantomjs：[http ://phantomjs.org/download.html](http://phantomjs.org/download.html)

# java - Android AES 文件加密有时会失败

> ID：15637522
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:51:09.830
> 
> 标签：java, android, encryption, aes, padding

我一直在尝试使用 AES 加密 android 中的一些 XML 文件，使用 FTP 将它们发送到服务器，然后使用 java 在 Linux 终端中对它们进行解密。

我尝试使用 AES、DES、Triple DES 和其他加密方法进行加密，但是通过 FTP 将文件发送到服务器后，其中一些（约 25%）无法解密，总是相同的。我还尝试在 android 模拟器中解密接收到的文件，但它也不起作用

还尝试下载 spongycastle 罐子并使用它们而不是 BouncyCastle 库，我在某个地方读到过时的 android java，但它也不起作用。

我还尝试在加密文件之前删除每个 \r\n 。

我现在使用的库是：

[编码解码AES.java](https://code.google.com/p/oobd/source/browse/trunk/clients/skds/base_src/org/oobd/crypt/AES/EncodeDecodeAES.java)

我现在得到的错误是“javax.crypto.IllegalBlockSizeException：解密时最后一个块不完整”

我目前用于加密/解密的代码是：

```
String fileNotEncrypted=Environment.getExternalStorageDirectory() + "unencrypted.xml";
RandomAccessFile fileNotEncryptedRa = new RandomAccessFile(fileNotEncrypted, "r");
byte[] textNotEncryptedByte = new byte[(int)fileNotEncryptedRa.length()];
fileNotEncryptedRa.read(textNotEncryptedByte);

Security.insertProviderAt(new org.spongycastle.jce.provider.BouncyCastleProvider(), 1);
byte[] textEncryptedByte = EncodeDecodeAES.encryptBytes("1234567890123456", textNotEncryptedByte);      

String fileEncrypted=Environment.getExternalStorageDirectory() + "encrypted.xml";
FileOutputStream fos = new FileOutputStream(fileEncrypted);
fos.write(textEncryptedByte);
fos.close(); 
```

这是我用来解密我通过 FTP 收到的文件的代码

```
Security.insertProviderAt(new org.spongycastle.jce.provider.BouncyCastleProvider(), 1);

//encryptedFile is a String I get from main(String[] args), so I can use the code in a script easily
RandomAccessFile fileEncrypted = new RandomAccessFile(encryptedFile, "r");
byte[] textEncryptedByte = new byte[(int)fileEncrypted.length()];
fileEncrypted.read(textEncryptedByte);

byte[] textDecryptedByte = EncodeDecodeAES.decryptBytes("Dephi20101234567", textEncryptedByte);

//decriptedFile is another String got from main(String[] args)
FileOutputStream fos = new FileOutputStream(decryptedFile);
fos.write(textDecryptedByte);
fos.close(); 
```

解决方案：

该问题是由于尝试通过 FTP 发送密文引起的。我要做的就是将密文编码为base64，然后将base64写入一个文件，然后通过FTP发送该文件。

对于 Base64 编码，我使用的是在这里找到的开源库： [Base64Coder](http://www.source-code.biz/base64coder/java/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:09:48.827

在解密在 Linux 上加密的文件（反之亦然）时，我遇到了关于 Base64 类 android 的非常类似的问题。Linux 只是在使用`\n`（或者`\r`只是，不记得了）而不是`\r\n`在进行中。这导致文件具有不同的长度并且解密失败。上面，您说所有内容都已`\r\n`删除，但我猜您没有检查`\n`. 尝试检查这两种情况应该是一致的。

最后，[http](http://examples.oreilly.com/9781565924024/files/oreilly/jonathan/util/Base64.java) ://examples.oreilly.com/9781565924024/files/oreilly/jonathan/util/Base64.java 是我在 android 和 Linux 上都使用的 Base64 类，以确保一致性。

# javascript - 在 WebSharper 中的整数类型之间转换

> ID：15637523
> 
> 赞同：4
> 
> 时间：2013-03-26T12:51:10.000
> 
> 标签：javascript, f#, inline, websharper

似乎 WebSharper 在整数类型之间转换（例如`int32`to `uint64`）有一些困难。我明白了：

> 错误：无法转换方法调用：ToUInt64(..) [Microsoft.FSharp.Core.Operators]

同样的情况也发生在`int32`-> `uint32`、`int16`->`int32`和许多其他人身上（只有`byte`<->`int32`似乎在工作）。

所以，问题是：我该如何解决这个问题？我有一个整数`i`（这是`int32`因为我无法得到其他任何东西），现在我想`i`从`Uint8Array`. `Uint8Array.Get`想要一个`uint64`。如何将我的转换`i`为`uint64`？

我打算使用`[<Inline>]`作弊，但这也不起作用，因为即使我尝试返回或将任何整数不同形式作为参数传递，我也会收到此错误`int32`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:59:15.283

从您的评论看来，您走在正确的轨道上。WebSharper 目前没有实现任何二进制处理 .NET API，所以自己实现它是正确的。使用数字类型来保证编译时的完整性，同时记住它们都`Number`在 JavaScript 中表示也是一个好主意。如果您缺少标准库中的转换代理，您可以添加这些或使用`Inline`定义，我相信这应该有效：

```
[<AutoOpen>]
module Conversions =

    [<Inline "$0">]
    let inline int64 x = int64 x

    [<Inline "$0">]
    let inline int32 x = int32 x

    [<Inline "$0">]
    let inline uint32 x = uint32 x

    [<Inline "$0">]
    let inline uint64 x = uint64 x 
```

当然，上述实现不会像这些运算符在 F#/.NET 中那样进行截断。

# dotnetnuke - 如何根据用户角色自定义 DotNetNuke“请更新您的个人资料”页面？

> ID：15637525
> 
> 赞同：2
> 
> 时间：2013-03-26T12:51:17.730
> 
> 标签：dotnetnuke, dotnetnuke-5

我正在管理一个由 2 种不同类型的用户使用的 DNN 网站。每种类型都要求用户输入不同的个人信息。

目前，当新用户登录时，他们会被要求输入其他信息，这只是一组标准的 DNN 配置文件定义字段。我的问题是如何让它根据用户的角色显示不同的字段？

我更喜欢不需要我修改任何 DNN 源代码以免影响未来升级的解决方案。该站点当前使用 DNN 版本 5.06。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:11:01.100

我假设您要自定义登录模块。根据您的要求，您需要创建自己的模块，如果是第一次登录，您可以设置标志强制用户根据角色更新配置文件并更新标志，因此接下来无需强制用户。

或者

如果可以满足您的要求，您可以尝试任何构建的模块。

# c# - 有什么方法可以创建用户界面，可以显示按钮，例如最小化时 windows 媒体播放器的显示方式？

> ID：15637530
> 
> 赞同：4
> 
> 时间：2013-03-26T12:51:33.187
> 
> 标签：c#, wpf

有什么方法可以在 C#.NET 中创建 Windows 应用程序，它可以显示按钮，例如 Windows Media Player/Lync 在最小化和鼠标悬停时如何显示它？

![在此处输入图像描述](../Images/ce36e30794400d5e7dad7012a7b0d76f.png)

我只是好奇那会怎么样！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T12:53:29.530

请参阅[ThumbButtonInfo](http://msdn.microsoft.com/en-us/library/system.windows.shell.thumbbuttoninfo.aspx)类。

```
 <ThumbButtonInfo x:Name="btnUpdate"
                         ImageSource="{StaticResource IconUpdate}"
                         Description="Find updates for the application"
                         IsBackgroundVisible="True">
        </ThumbButtonInfo>
        <ThumbButtonInfo x:Name="btnClient"
                         ImageSource="{StaticResource IconClient}"
                         Description="Search Clients"
                         IsBackgroundVisible="True">
        </ThumbButtonInfo>
        <ThumbButtonInfo x:Name="btnInvoice"
                         ImageSource="{StaticResource IconInvoice}"
                         Description="Search Invoices"
                         IsBackgroundVisible="True">
        </ThumbButtonInfo> 
```

# mysql - MySQL 表上的并发 READ 和 WRITE

> ID：15637532
> 
> 赞同：5
> 
> 时间：2013-03-26T12:51:49.537
> 
> 标签：mysql, sql

如果一个表经常从前端写入，并且同一个表也必须经常搜索。两者都对性能至关重要。

**例如，可搜索的 POST 表在其“内容**”列上有全文索引？如果很少有用户在写帖子，它会转到同一个表，然后其他用户将同时在表上搜索关键字。

```
Will UPDATE/INSERT operation lock SELECT queries in above case ? 
```

数据库 - MySQL

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T13:07:42.950

这取决于表的存储引擎

# [InnoDB](https://dba.stackexchange.com/tags/innodb/info)

InnoDB 支持[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)和[4 个事务隔离级别](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)

*   [未提交读](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_read-uncommitted)
*   [已提交读](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_read-committed)
*   [可重复阅读](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_repeatable-read)（默认）
*   [可序列化](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_serializable)

这允许插入、更新、删除和选择在 99.999% 的时间内和谐地生活

# [MyISAM](https://dba.stackexchange.com/tags/myisam/info)

这是一个完全不同的竞争环境。默认情况下，每个 INSERT、UPDATE 和 DELETE 都会锁定整个表。[INSERT 可以通过将concurrent_insert](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_concurrent_insert)设置为 2 来禁用表锁定。（有关更多信息，请参阅[**并发插入**](http://dev.mysql.com/doc/refman/5.5/en/concurrent-inserts.html)）。否则，UPDATE 和 DELETE 仍然会在执行全表锁时造成严重破坏。

# css - 根据分辨率的响应式设计/缩放模块

> ID：15637534
> 
> 赞同：0
> 
> 时间：2013-03-26T12:51:51.757
> 
> 标签：css, joomla

我将以下模块添加到 joomla“左右图像幻灯片”中，这可以在[http://www.gopiplus.com/extensions/2011/07/left-right-image-slideshow-joomla-module/#comments](http://www.gopiplus.com/extensions/2011/07/left-right-image-slideshow-joomla-module/#comments) 中找到模块可用的自定义设置如下：

宽度 (px): | ***_* __****| <----文本框高度（px）：|*****_ *_* _** | <----文本框***

 ***这很好用，唯一的问题是，如果我在另一台具有不同屏幕分辨率的计算机上打开它，图像视图太大或太小。在做了一些研究之后，我发现我需要使用“%”而不是 px，但在这种情况下，正如您在图片中看到的那样，文本框仅适用于 px。在这种情况下，如何更改我的图像视图以在分辨率更改时进行调整？

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:06:52.560

在文件中硬编码为*px*`/modules/mod_left_right_image_slideshow/tmpl/left-right-image-slideshow-gallery.js`。最好的解决方案可能是联系模块的开发人员并建议他支持您的愿望。或者只是使用大量可用幻灯片模块中的不同模块：[http](http://extensions.joomla.org/extensions/photos-a-images/slideshow) ://extensions.joomla.org/extensions/photos-a-images/slideshow 。***

# emacs - 在 emacs 中使用自动完成时如何保留大小写？

> ID：15637536
> 
> 赞同：7
> 
> 时间：2013-03-26T12:51:53.650
> 
> 标签：emacs, autocomplete, capitalization

在 emacs 中使用[自动完成扩展](http://cx4a.org/software/auto-complete/)时如何保留大小写？

所以这`example`不能完成为`Example`or `EXAMPLE`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T14:07:38.770

我找到了我正在寻找的设置：

h(setq ac-ignore-case nil)

# mysql - WP查询随机选择帖子按数字顺序显示

> ID：15637541
> 
> 赞同：0
> 
> 时间：2013-03-26T12:52:14.510
> 
> 标签：mysql, wordpress

我正在使用 query_posts 从使用 orderby=rand 的自定义帖子类型返回 6 个随机帖子。

这工作正常。然而。查询返回帖子后，我需要按数字顺序对它们进行排序。

我正在使用的当前代码如下所示：

```
<?php query_posts('post_type=my_post_type&orderby=rand&showposts=6'); ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

Do stuff

<?php endwhile; else: ?>
<?php endif; ?> 
```

所以我需要随机选择 6 个帖子，然后将它们按数字顺序排序。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:56:35.367

为您提供一些元代码，实际上要使其正常工作将需要您进行一些挖掘，但这有望走上正确的轨道。

这里的一般想法是，您只需要从 query_posts 获取 id，然后重新排序它们，允许您根据需要输出它们。

```
<?php 
    query_posts('post_type=my_post_type&orderby=rand&showposts=6'); 

    // Create your result array
    $postArray = array();

    if ( have_posts() ) : while ( have_posts() ) : the_post(); 

        $postArray[] = /*POST ID GOES HERE*/

    endwhile; else:
    endif;

    // Now sort it
    sort($postArray,SORT_NUMERIC);

    // Now iterate over $postArray outputting post id $postArray[0] -> $postArray[n]

?> 
```

另一种选择可能是填充 $postArray ，`$postArray[/*POST ID*/] = /* OUTPUT */;`然后只迭代 $postArray ，因为如果使用数字键，PHP 可能*应该自动对其进行排序。*

# php - 如何将模型文件调用到控制器中并在 opencart 中查看？

> ID：15637544
> 
> 赞同：1
> 
> 时间：2013-03-26T12:52:22.133
> 
> 标签：php, opencart

我是开放式购物车框架工作的新人。我正在创建带有文件上传和直接结帐按钮的自定义页面（就像购物车页面一样。）在这个页面中，我已经创建了`(tpl files)`基于联系表单的视图和控制器。这是我的控制器：

```
<?php 
class ControllerInformationRequest extends Controller {
    private $error = array(); 

    public function index() {
        $this->language->load('information/request');

        $this->document->setTitle($this->language->get('heading_title'));  
        $this->load->model('account/request');

        if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validate()) {

            $this->redirect($this->url->link('information/request/success'));
        }

        $this->data['breadcrumbs'] = array();

        $this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('text_home'),
            'href'      => $this->url->link('common/home'),         
            'separator' => false
        );

        $this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('heading_title'),
            'href'      => $this->url->link('information/request'),
            'separator' => $this->language->get('text_separator')
        );  

        $this->data['heading_title'] = $this->language->get('heading_title');

        $this->data['text_location'] = $this->language->get('text_location');
        $this->data['text_contact'] = $this->language->get('text_contact');
        $this->data['text_address'] = $this->language->get('text_address');
        $this->data['text_telephone'] = $this->language->get('text_telephone');
        $this->data['text_fax'] = $this->language->get('text_fax');
        $this->data['entry_name'] = $this->language->get('entry_name');
        $this->data['entry_email'] = $this->language->get('entry_email');
        $this->data['entry_enquiry'] = $this->language->get('entry_enquiry');
        $this->data['entry_captcha'] = $this->language->get('entry_captcha');
        $this->data['entry_phone']  = $this->language->get('entry_phone');

        if (isset($this->error['name'])) {
            $this->data['error_name'] = $this->error['name'];
        } else {
            $this->data['error_name'] = '';
        }
        if (isset($this->error['telephone'])) { 
            $this->data['error_telephone'] = $this->error['telephone'];   
        } else {      
             $this->data['error_telephone'] = '';       
        } 
        if (isset($this->error['email'])) {
            $this->data['error_email'] = $this->error['email'];
        } else {
            $this->data['error_email'] = '';
        }
        if (isset($this->error['enquiry'])) {
            $this->data['error_enquiry'] = $this->error['enquiry'];
        } else {
            $this->data['error_enquiry'] = '';
        }       

        if (isset($this->error['captcha'])) {
            $this->data['error_captcha'] = $this->error['captcha'];
        } else {
            $this->data['error_captcha'] = '';
        }   

        $this->data['button_continue'] = $this->language->get('button_continue');

        $this->data['action'] = $this->url->link('information/request');
        $this->data['store'] = $this->config->get('config_name');
        $this->data['address'] = nl2br($this->config->get('config_address'));
        $this->data['telephone'] = $this->config->get('config_telephone');
        $this->data['fax'] = $this->config->get('config_fax');

        if (isset($this->request->post['name'])) {
            $this->data['name'] = $this->request->post['name'];
        } else {
            $this->data['name'] = $this->customer->getFirstName();
        }

        if (isset($this->request->post['email'])) {
            $this->data['email'] = $this->request->post['email'];
        } else {
            $this->data['email'] = $this->customer->getEmail();
        }

        if (isset($this->request->post['telephone'])) {
            $this->data['telephone'] = $this->request->post['telephone'];
        } else {
            //$this->data['phone'] = $this->customer->getPhone();
            $this->data['telephone'] = $this->customer->getTelephone();
        }
        if (isset($this->request->post['enquiry'])) {
            $this->data['enquiry'] = $this->request->post['enquiry'];
        } else {
            $this->data['enquiry'] = '';
        }

        if (isset($this->request->post['captcha'])) {
            $this->data['captcha'] = $this->request->post['captcha'];
        } else {
            $this->data['captcha'] = '';
        }       

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/information/request.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/information/request.tpl';
        } else {
            $this->template = 'default/template/information/request.tpl';
        }
        $this->load->model('account/request');
        $this->children = array(
            'common/column_left',
            'common/column_right',
            'common/content_top',
            'common/content_bottom',
            'common/footer',
            'common/header'
        );

        $this->response->setOutput($this->render());        
    }

    public function success() {
        $this->language->load('information/request');

        $this->document->setTitle($this->language->get('heading_title')); 

        $this->data['breadcrumbs'] = array();

        $this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('text_home'),
            'href'      => $this->url->link('common/home'),
            'separator' => false
        );

        $this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('heading_title'),
            'href'      => $this->url->link('information/request'),
            'separator' => $this->language->get('text_separator')
        );  

        $this->data['heading_title'] = $this->language->get('heading_title');

        $this->data['text_message'] = $this->language->get('text_message');

        $this->data['button_continue'] = $this->language->get('button_continue');

        $this->data['continue'] = $this->url->link('common/home');

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/common/success.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/common/success.tpl';
        } else {
            $this->template = 'default/template/common/success.tpl';
        }

        $this->children = array(
            'common/column_left',
            'common/column_right',
            'common/content_top',
            'common/content_bottom',
            'common/footer',
            'common/header'
        );

        $this->response->setOutput($this->render()); 
    }

    private function validate() {
        if ((utf8_strlen($this->request->post['name']) < 3) || (utf8_strlen($this->request->post['name']) > 32)) {
            $this->error['name'] = $this->language->get('error_name');
        }

        if (!preg_match('/^[^\@]+@.*\.[a-z]{2,6}$/i', $this->request->post['email'])) {
            $this->error['email'] = $this->language->get('error_email');
        }

        if ((utf8_strlen($this->request->post['enquiry']) < 10) || (utf8_strlen($this->request->post['enquiry']) > 3000)) {
            $this->error['enquiry'] = $this->language->get('error_enquiry');
        }

        if (empty($this->session->data['captcha']) || ($this->session->data['captcha'] != $this->request->post['captcha'])) {
            $this->error['captcha'] = $this->language->get('error_captcha');
        }

        if (!$this->error) {
            return true;
        } else {
            return false;
        }     
    }

    public function captcha() {
        $this->load->library('captcha');

        $captcha = new Captcha();

        $this->session->data['captcha'] = $captcha->getCode();

        $captcha->showImage();
    }   
}
?> 
```

在视图`.tpl`文件中包含姓名、电子邮件地址、电话、消息和验证码图像。我只是想将该数据存储到数据库中，我已经在特定位置创建了模型文件，如何调用模型文件（`$this->load->model('account/request');`）...它不`t working and its can`存储数据库还有。怎么可能？请为此提供解决方案....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:36:46.383

要从控制器加载模型，请使用此语法；

例如加载 opencart 文件夹 /catalog/model/catalog/category

```
$this->load->model('catalog/category'); 
```

然后您可以愉快地从该模型中调用方法，如下所示；

```
$categories = $this->model_catalog_category->getCategories(0); 
```

# javascript - 数据列表无法正确排序

> ID：15637545
> 
> 赞同：1
> 
> 时间：2013-03-26T12:52:22.650
> 
> 标签：javascript

我想对这条记录进行排序，我的输入数组是 a1

```
var a1 = ["ap1","ap10","ap11","ap2","ap3","ap4","ap5","ap6","ap7","ap8","ap9"]; 
```

输出应该是这样的：

```
["ap1","ap2","ap3","ap4","ap5","ap6","ap7","ap8","ap9","ap10","ap11"]; 
```

这是代码，

```
 var a1 = ["ap1","ap10","ap11","ap2","ap3","ap4","ap5","ap6","ap7","ap8","ap9"];

    var a2 = a1.sort(function(a,b){
    var charPart = [a.substring(0,1), b.substring(0,1)],
    numPart = [a.substring(1)*1, b.substring(1)*1];

    if(charPart[0] < charPart[1]) return -1;
        else if(charPart[0] > charPart[1]) return 1;
        else{ //(charPart[0] == charPart[1]){
            if(numPart[0] < numPart[1]) return -1;
            else if(numPart[0] > numPart[1]) return 1;
            return 0;
        }
    });

    alert(a2.toString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:56:31.323

```
var charPart = [a.substring(0,1), b.substring(0,1)],
numPart = [a.substring(1)*1, b.substring(1)*1]; 
```

您似乎忘记了字符串的*char 部分是***2 个**字符长 :-) 对于更通用的解决方案，您可能会使用类似`apN`

 **```
var charPart = [a.match(/^\D*/)[0], b.match(/^\D*/)[0]],
    numPart = [+a.replace(/^\D*/, ''), +b.replace(/^\D*/, '')]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:01:03.613

```
var a1 = ["ap1","ap10","ap11","ap2","ap3","ap4","ap5","ap6","ap7","ap8","ap9","ap9", "ap9"];

var a2 = a1.sort(function (a, b) {
    return parseInt(a.replace("ap", ""), 10) - parseInt(b.replace("ap", ""), 10);
});

alert(a2); 
```

[http://jsfiddle.net/dQD9F/](http://jsfiddle.net/dQD9F/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:02:08.230

试试这个：

```
var a2 = a1.sort(function(a, b) {
   if (a == b) {
      return 0;
   }

   var charParts = [a.replace(/[0-9]/g, ''), b.replace(/[0-9]/g, '')],
       numParts = [parseInt(a.replace(/[^0-9]/g, ''), 10), parseInt(b.replace(/[^0-9]/g, ''), 10)];

   if (charParts[0] != charParts[1]) {
       return charParts[0] > charParts[1] ? 1 : -1;
   }

   return numParts[0] > numParts[1] ? 1 : -1;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:02:25.760

除了 Bergis Answer 之外，`if` `else`Number 部分也不需要构造。您可以改为简单地返回差异

```
 var a2 = a1.sort(function (a, b) {
        var charPart = [a.match(/^\D*/)[0], b.match(/^\D*/)[0]],
            numPart = [+a.replace(/^\D*/, ''), +b.replace(/^\D*/, '')];
        if (charPart[0] < charPart[1]) return -1;
        if (charPart[0] > charPart[1]) return 1;
        return numPart[0] - numPart[1]
    }); 
```

## 更新：

```
var a1 = ["a3p1", "a4p2", "ap8a1", "a8p10", "a4p10", "ap8a4", "a8p11", "a9p2", "ap3", "ap4", "ap5", "ap6", "ap7", "ap8", "ap9"];
var a2 = a1.sort(function (a, b) {
    var _a = a.split(/(\d+)/);
    var _b = b.split(/(\d+)/);
    var len = Math.min(_a.length, _b.length);
    for (var i = 0; i < len - 1; i++) {
        var c = +_a[i],
            d = +_b[i];
        if (c===c) _a[i] = c;
        if (d===d) _b[i] = d;
        if (_a[i] !== _b[i]) {
            return _a[i] > _b[i] ? 1 : -1;
        }
    }
    return (_a.length - _b.length);
});
console.log(a2); //["a3p1", "a4p2", "a4p10", "a8p10", "a8p11", "a9p2", "ap3", "ap4", "ap5", "ap6", "ap7", "ap8", "ap8a1", "ap8a4", "ap9"] 
```

这是一个关于[JSBin](http://jsbin.com/ejeqin/1/edit)的示例： *这对数组进行排序，考虑到所有数字部分***

# c# - 在按钮单击事件中中止长时间运行的线程

> ID：15637548
> 
> 赞同：1
> 
> 时间：2013-03-26T12:52:33.097
> 
> 标签：c#, wpf, multithreading

在我的 WPF 应用程序中，我有一个使用 BlueBeam Q Server 将文件转换为 PDF 的长期运行过程。当该过程发生时，它不应该冻结，因此编写了以下代码来解决这个问题：

```
private void btn_convert_Click(object sender, RoutedEventArgs e)
{
        thread = new Thread(new ThreadStart(WorkerMethod));
        thread.SetApartmentState(ApartmentState.STA);
        thread.IsBackground = true;
        thread.Name = "PDF";
        thread.Start();
}

WorkerMethod()
{
//code to connect to Q server and conversion goes here
} 
```

现在，当流程开始时，用户可以看到一个取消按钮。当用户按下取消时，我想中止启动的线程。我写的代码如下：

```
private void btn_cancel_Click(object sender, RoutedEventArgs e)
    {
        if (thread.Name == "PDF")
            thread.Abort(); 
    } 
```

但是线程不会中止并继续该过程。请给我您宝贵的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:55:48.927

你应该尽可能避免`Abort`。搜索如何优雅地取消线程 - 当线程代码调用您无法影响的其他代码时无法完成，例如第三方库方法或类似的东西。

例如，如果您的线程方法执行以下操作：

```
WorkerMethod()
{
    CallFunctionInExternalDLL();
} 
```

它不能被正确中止。

要“取消”这样的线程，最好向线程指示它应该取消（`bool`例如使用标志）并让线程回滚其结果（例如，删除创建的 PDF 或类似的东西）。然后，您的应用程序可以继续，就好像线程从未启动过一样。

例如，您的代码可能如下所示：

```
WorkerMethod()
{
    CallFunctionInExternalDLL();
    if (m_threadAborted)
        RollBackWhatFunctionDid();
} 
```

如果您的线程如下所示：

```
WorkerMethod()
{
    while (true)
    {
        CallFunctionInExternalDLL();
    }
} 
```

你可以这样做：

```
WorkerMethod()
{
    while (!m_threadAborted)
    {
        CallFunctionInExternalDLL();
    }

    if (m_threadAborted)
        RollBackStuff();
} 
```

在这些示例中，`m_threadAborted`是这样`bool`声明的标志：

```
private volatile bool m_threadAborted = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:04:32.147

您可以使用此处所述的 CancellationTokenSource：http:
[//msdn.microsoft.com/en-us/library/dd997364.aspx ?cs-save-lang=1&cs-lang=csharp#code-snippet-1](http://msdn.microsoft.com/en-us/library/dd997364.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

```
static void CancelWithThreadPoolMiniSnippet()
{

//Thread 1: The Requestor 
// Create the token source.
CancellationTokenSource cts = new CancellationTokenSource();

// Pass the token to the cancelable operation.
ThreadPool.QueueUserWorkItem(new WaitCallback(DoSomeWork), cts.Token);

// Request cancellation by setting a flag on the token.
    cts.Cancel();
}

//Thread 2:The Listener 
static void DoSomeWork(object obj)
{
    CancellationToken token = (CancellationToken)obj;
    for (int i = 0; i < 100000; i++)
    {
        // Simulating work.
        Thread.SpinWait(5000000);

        if (token.IsCancellationRequested)
        {
            // Perform cleanup if necessary. 
            //... 
            // Terminate the operation. 
            break;
        }
    }
} 
```

这篇文章描述了其他可能的方法：
[关于在 .NET 中干净地终止线程的问题](https://stackoverflow.com/questions/3632149/question-about-terminating-a-thread-cleanly-in-net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:55:41.557

您可以使用 Backgroundworker 而不是 Thread，如果您的代码包含一个循环，您将能够取消它（您必须在每个循环中测试一个布尔属性）

```
// define the backgroundWorker
this.backgroundWorker.DoWork += new DoWorkEventHandler(this.BackgroundWorker_DoWork);
this.backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(this.BackgroundWorker_RunWorkerCompleted);
this.backgroundWorker.WorkerSupportsCancellation = true;

// execute process
this.backgroundWorker.RunWorkerAsync();

// cancel process
this.backgroundWorker.CancelAsync(); 
```

并在您的 BackgroundWorker_DoWork 代码中：

```
// in a loop
if (this.backgroundWorker.CancellationPending == false)
{
...
} 
```

# mysql - 优化 MySQL 搜索查询

> ID：15637550
> 
> 赞同：14
> 
> 时间：2013-03-26T12:52:36.263
> 
> 标签：mysql, query-optimization

需要你的帮助来优化一个 mysql 查询。让我们以简单的表格为例。

```
CREATE TABLE `Modules` (
 `ID` int(11) NOT NULL AUTO_INCREMENT,
 `moduleName` varchar(100) NOT NULL,
 `menuName` varchar(255) NOT NULL,
PRIMARY KEY (`ID`),
KEY `moduleName` (`moduleName`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

让我们用一些数据填充它：

```
INSERT INTO  `Modules` (`moduleName` ,`menuName`)
VALUES 
    ('abc1',  'name1'), 
    ('abc',  'name2'), 
    ('ddf',  'name3'), 
    ('ccc',  'name4'), 
    ('fer',  'name5'); 
```

还有一些示例字符串。顺其自然`abc_def`；

传统上，我们试图找到所有包含搜索字符串的行。

相反，我的任务是查找`moduleName`输入字符串中包含的所有行。现在我有以下查询以获得所需的结果：

```
SELECT `moduleName` ,`menuName` 
FROM `Modules` 
WHERE 'abc_def' LIKE(CONCAT(`moduleName`,'%')) 
```

这将返回

```
moduleName   | menuName 
---------------------------
abc          | name2 
```

问题是，这个查询没有使用索引。

有没有办法强迫它使用一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T22:17:26.140

您似乎误解了什么是索引以及它如何帮助加快查询速度。

让我们看看你的`moduleName`索引是多少。它基本上是一个从 moduleName 到 ID 的映射的排序列表。你在选择什么？

```
SELECT moduleName, menuName 
FROM Modules
WHERE 'abc_def' LIKE CONCAT(moduleName,'%'); 
```

也就是说，您希望每行有两个字段与 moduleName 字段的某种映射值有某种关系。索引如何帮助您？没有完全匹配，也没有办法利用我们对 moduleNames 进行排序的事实。

您需要从索引中利用的是检查条件中的完全匹配：

```
SELECT moduleName, menuName 
FROM Modules
WHERE moduleName = LEFT('abc_def', LENGTH(moduleName)); 
```

现在我们确实有一个完全匹配，但是由于条件的右侧部分也取决于 moduleName，因此将为每一行检查该条件。由于在他的情况下 MySQL 无法预测将匹配多少行，但它可以预测它将需要随机磁盘访问来获取每个匹配行的 menuNames，因此 MySQL 不会使用索引。

所以你基本上有两种方法：

1.  如果您知道该条件显着缩小了匹配行的数量，那么您可以强制索引
2.  另一种选择是将索引扩展到覆盖复合索引`(moduleName, menuName)`，然后将直接从索引中获取所有查询结果（即从内存中）。

方法 #2（请参阅[SQLfiddle](http://sqlfiddle.com/#!2/0cf5d/1)）将通过简单的查询为您提供索引命中，并且应该在更大的表上提供更好的性能。在小桌子上，我（*即 lserni - 见评论*）认为这不值得付出努力。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T12:59:40.433

你实际上是在现场做一个正则表达式，所以没有键可以工作。但是，在您的示例中，您可以提高效率，因为每个匹配的模块名称必须小于或等于“abc_def”，因此您可以添加：

```
and moduleName <= 'abc_def' 
```

我能想到的唯一其他选择是：

```
where modleName in ('a','ab','abc','abc_','abc_d','abc_de','abc_def') 
```

不漂亮。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T12:58:06.717

尝试为您的问题添加[索引提示。](http://dev.mysql.com/doc/refman/5.0/en/index-hints.html)

```
SELECT `moduleName` ,`menuName` 
FROM `Modules` USE INDEX (col1_index,col2_index) 
WHERE 'abc_def' LIKE(CONCAT(`moduleName`,'%')) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-04T10:22:24.577

因为，您的数据库引擎是“InnoDB” **，默认情况下，InnoDB 中的所有用户数据都存储在包含 B 树索引的页面中**

```
B-tree are good for following lookups:
● Exact full value (= xxx)
● Range of values (BETWEEN xx AND yy)
● Column prefix (LIKE 'xx%')
● Leftmost prefix 
```

所以，对于你的查询，与其使用索引什么的去优化，不如考虑**加快查询速度**。

**您可以通过创建覆盖索引**来加快查询速度。

覆盖索引指的是这种情况`all fields selected in a query are covered by an index`，在这种情况下是 InnoDB（不是 MyISAM ）`will never read the data in the table, but only use the data in the index`，。`significantly speeding up the select`请注意，在 InnoDB 中，主键包含在所有二级索引中，因此在某种程度上，所有二级索引都是复合索引。这意味着如果您在 InnoDB 上运行以下查询：

```
SELECT `moduleName` ,`menuName` 
FROM `Modules1` 
WHERE 'abc_def' LIKE(CONCAT(`moduleName`,'%'))

MySQL will always use a covering index and will not access the actual table

To believe, go to **Explain**

What does Explain statement mean? 
```

`table:`指示输出受到影响的表。

`type:`向我们展示正在使用哪种类型的连接。从最好到最差的类型是：system、const、eq_ref、ref、range、index、all

`possible_keys:`指示 MySQL 可以选择哪些索引来查找此表中的行

`key:`表示 MySQL 实际决定使用的键（索引）。如果 MySQL 决定使用 possible_keys 索引之一来查找行，则该索引被列为键值。

`key_len:`这是使用的密钥的长度。越短越好。

`ref:`使用哪一列（或常数）

`rows:`MySQL 认为它必须检查以执行查询的行数。

`extra Extra info:`在这里看到的不好的是“使用临时”和“使用文件排序”

**我有 1,990 行。**

**我的实验：**

**我会推荐 Isern 的 where 子句解决方案**

```
 case 1) no indexes
explain select `moduleName` ,`menuName`  FROM `Modules1` WHERE moduleName = SUBSTRING('abc_def', 1, LENGTH(moduleName));
+----+-------------+----------+------+---------------+------+---------+------+------+-------------+
| id | select_type | table    | type | possible_keys | key  | key_len | ref  | rows | Extra       |
+----+-------------+----------+------+---------------+------+---------+------+------+-------------+
|  1 | SIMPLE      | Modules | ALL  | NULL          | NULL | NULL    | NULL | 2156 | Using where |
+----+-------------+----------+------+---------------+------+---------+------+------+-------------+
1 row in set (0.00 sec) 
```

**创建覆盖索引的方法**

```
case 2) ALTER TABLE `test`.`Modules1` ADD index `mod_name` (`moduleName`)

explain select `moduleName` ,`menuName`  FROM `Modules1` WHERE moduleName = SUBSTRING('abc_def', 1, LENGTH(moduleName));
+----+-------------+----------+------+---------------+------+---------+------+------+-------------+
| id | select_type | table    | type | possible_keys | key  | key_len | ref  | rows | Extra       |
+----+-------------+----------+------+---------------+------+---------+------+------+-------------+
|  1 | SIMPLE      | Modules | ALL  | NULL          | NULL | NULL    | NULL | 2156 | Using where |
+----+-------------+----------+------+---------------+------+---------+------+------+-------------+ 
```

**在这里，它显示正在使用的索引。见栏目：key、Extra**

```
case 3) ALTER TABLE  `test`.`Modules1` DROP INDEX  `mod_name` ,
ADD INDEX  `mod_name` (  `moduleName` ,  `menuName` )

  explain select `moduleName` ,`menuName`  FROM `Modules1` WHERE moduleName = SUBSTRING('abc_def', 1, LENGTH(moduleName));
+----+-------------+----------+-------+---------------+----------+---------+------+------+--------------------------+
| id | select_type | table    | type  | possible_keys | key      | key_len | ref  | rows | Extra                    |
+----+-------------+----------+-------+---------------+----------+---------+------+------+--------------------------+
|  1 | SIMPLE      | Modules | index | NULL          | mod_name | 1069    | NULL | 2066 | Using where; Using index |
+----+-------------+----------+-------+---------------+----------+---------+------+------+--------------------------+
1 row in set (0.00 sec)

case 4) ALTER TABLE  `test`.`Modules1` DROP INDEX  `mod_name` ,
ADD INDEX  `mod_name` (  `ID` ,  `moduleName` ,  `menuName` )

  explain select `moduleName` ,`menuName`  FROM `Modules1` WHERE moduleName = SUBSTRING('abc_def', 1, LENGTH(moduleName));
+----+-------------+----------+-------+---------------+----------+---------+------+------+--------------------------+
| id | select_type | table    | type  | possible_keys | key      | key_len | ref  | rows | Extra                    |
+----+-------------+----------+-------+---------------+----------+---------+------+------+--------------------------+
|  1 | SIMPLE      | Modules | index | NULL          | mod_name | 1073    | NULL | 2061 | Using where; Using index |
+----+-------------+----------+-------+---------------+----------+---------+------+------+--------------------------+
1 row in set (0.00 sec) 
```

编辑：

```
use where moduleName regexp "^(a|ab|abc|abc_|abc_d|abc_de|abc_def)$";
in place  of substring() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-01T03:11:59.780

我的回答可能更复杂

```
alter table Modules add column name_index int
alter table Modules add index name_integer_index(name_index); 
```

当您插入模块表时，您会计算 moduleName 的 int 值，例如`select ascii('a')`

运行查询时，您只需要运行

```
SELECT `moduleName`, `menuName`
FROM   `Modules`
WHERE  name_index >
  (select ascii('a')) and name_index < (select ascii('abc_def')) 
```

它将使用 name_integr_index

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-04T02:08:05.027

将索引键添加到 moduleName 检查[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html) B-Tree Index Characteristics 了解更多信息

不知道你为什么使用 LIKE，最好避免它。我的建议是让所有行将其保存在 JSON 中，然后对其执行 AJAX 搜索。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-29T15:26:30.007

我不确定这真的是一个很好的查询，但它使用了索引：

```
SELECT `moduleName` ,`menuName`
FROM `Modules` WHERE LEFT('abc_def', 7) = `moduleName`
UNION ALL
SELECT `moduleName` ,`menuName`
FROM `Modules` WHERE LEFT('abc_def', 6) = `moduleName`
UNION ALL
SELECT `moduleName` ,`menuName`
FROM `Modules` WHERE LEFT('abc_def', 5) = `moduleName`
UNION ALL
SELECT `moduleName` ,`menuName`
FROM `Modules` WHERE LEFT('abc_def', 4) = `moduleName`
UNION ALL
SELECT `moduleName` ,`menuName`
FROM `Modules` WHERE LEFT('abc_def', 3) = `moduleName`
UNION ALL
SELECT `moduleName` ,`menuName`
FROM `Modules` WHERE LEFT('abc_def', 2) = `moduleName`
UNION ALL
SELECT `moduleName` ,`menuName`
FROM `Modules` WHERE LEFT('abc_def', 1) = `moduleName` 
```

**一般解决方案**

这是一个通用的解决方案，使用动态查询：

```
SET @search='abc_def';

SELECT
  CONCAT(
    'SELECT `moduleName` ,`menuName` FROM `Modules` WHERE ',
    GROUP_CONCAT(
      CONCAT(
        'moduleName=\'',
        LEFT(@search, ln),
        '\'') SEPARATOR ' OR ')
    )
FROM
  (SELECT DISTINCT LENGTH(moduleName) ln
   FROM Modules
   WHERE LENGTH(moduleName)<=LENGTH(@search)) s
INTO @sql; 
```

这将使用具有条件的 SQL 查询创建一个字符串，`WHERE moduleName='abc' OR moduleName='abc_' OR ...`并且由于索引，它应该能够快速创建字符串（如果没有，可以使用数字从 1 到允许的最大值的临时索引表来改进它您的字符串的长度，给出的小提琴示例）。然后你可以执行查询：

```
PREPARE stmt FROM @sql;
EXECUTE stmt; 
```

请[在此处](http://sqlfiddle.com/#!2/584f66/1)查看小提琴。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-02T13:50:01.243

类似于 fthiella 的建议，但更灵活（因为它可以轻松应对更长的字符串）：-

```
SELECT DISTINCT `moduleName` ,`menuName`
FROM `Modules`
CROSS JOIN (SELECT a.i + b.i * 10 + c.i * 100 + 1 AS anInt FROM integers a, integers b, integers c) Sub1
WHERE LEFT('abc_def', Sub1.anInt) = `moduleName` 
```

这（如键入）可处理长达 1000 个字符的字符串，但比 fthiellas 解决方案慢。可以很容易地减少长达 100 个字符的字符串，此时它似乎比 fthiellas 解决方案快一点。

在其中检查长度确实会加快速度：-

```
SELECT SQL_NO_CACHE  DISTINCT `moduleName` ,`menuName`
FROM `Modules`
INNER JOIN (SELECT a.i + b.i * 10 + c.i * 100 + 1 AS anInt FROM integers a, integers b, integers c ) Sub1
ON Sub1.anInt <= LENGTH('abc_def') AND Sub1.anInt <= LENGTH(`moduleName`)
WHERE LEFT('abc_def', Sub1.anInt) = `moduleName` 
```

或稍作修改以从子选择中恢复可能的子字符串：-

```
SELECT SQL_NO_CACHE  DISTINCT `moduleName` ,`menuName`
FROM `Modules`
CROSS JOIN (SELECT DISTINCT LEFT('abc_def', a.i + b.i * 10 + c.i * 100 + 1) AS aStart FROM integers a, integers b, integers c WHERE( a.i + b.i * 10 + c.i * 100 + 1) <= LENGTH('abc_def')) Sub1
WHERE aStart = `moduleName` 
```

请注意，这些解决方案取决于具有单列和值为 0 到 9 的行的整数表。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-03T23:28:01.247

like 查询不使用索引...但是您也可以定义一个全文索引来搜索这样的字符串。但是innodb引擎不支持它，只有myisam支持它。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-04-04T11:44:44.683

**（答案的前一部分已删除 - 请参阅 newtover 的答案，该答案相同，但更好）**。

newtover 的方法 #2（**请参阅[SQLfiddle](http://sqlfiddle.com/#!2/60928/1)**）将通过简单的查询为您提供索引命中，并且应该在较长的表上提供更好的性能：

```
SELECT `moduleName`, `menuName` 
FROM `Modules` 
WHERE moduleName = LEFT('abc_def', LENGTH(moduleName)); 
```

**如果您需要来自很多列的数据**（而不是仅`menuName`），即如果`Modules`更大和更长，则可以通过移动`moduleName`到仅包含 a `ID`、 the`moduleName`及其长度的查找表来为您提供更好的服务（以保存一个函数调用） .

实际需要的额外空间很小，如果`moduleName`基数低，即，你有几个`moduleName`s 沿着很多 s 重复`menuName`，你实际上可能最终**节省了相当多的空间**。

新架构将是：

```
moduleName_id    integer, keys to Lookup.id
...all the fields in Modules except moduleName...

Lookup table
   id            primary key
   moduleName    varchar
   moduleLength  integer 
```

和查询：

```
SELECT `Lookup`.`moduleName`,`menuName` 
FROM `Modules` INNER JOIN `Lookup`
    ON (`Modules`.`moduleName_id` = Lookup.id)
WHERE `Lookup`.`moduleName` = LEFT('abc_def',
         `Lookup`.`moduleLength`); 
```

此[SQLfiddle](http://sqlfiddle.com/#!2/60928/1)从您的架构开始并对其进行修改以实现上述目的。速度和存储空间的改进很大程度上取决于您在表中放入的数据。我故意让自己处于最佳状态（Modules 中有很多短字段，平均`menuName`每个 100 s `moduleName`）并且能够节省大约 30% 的存储空间；搜索性能只有大约 3 倍的速度，并且可能受到 I/O 缓存的影响，因此除非有人进行更彻底的测试，否则我会将其保留为“可以节省可观的空间和时间”。

另一方面，在小型、简单的表格和相同数量的菜单和模块（即 1:1）上，将有轻微的存储损失，而没有明显的速度增益。然而，在这种情况下，所涉及的空间和时间将非常小，因此尽管增加了复杂性，但上述更“规范化”的形式可能仍然是可行的方法。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-03-26T12:58:39.753

> 将@SEARCHING_TEXT 声明为 VARCHAR(500)
> 
> SET @SEARCHING_TEXT = 'ab'
> 
> SELECT 'moduleName' ,'menuName' FROM [MODULES] WHERE FREETEXT (MODULENAME, @SEARCHING_TEXT );

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-04T15:27:59.233

我们可以用`instead`SUBSTRING('abc_def', 1, LENGTH(moduleName)) 的 2 个函数的一个函数本身来实现

```
where locate(moduleName, 'abc_def'); 
```

# scala - Weka、SimpleKMeans 无法处理字符串属性

> ID：15637553
> 
> 赞同：5
> 
> 时间：2013-03-26T12:52:38.590
> 
> 标签：scala, cluster-analysis, weka

我在 Scala 中使用 Weka（尽管语法几乎与**Java**相同）。我正在尝试使用 SimpleKMeans 聚类器评估我的数据，但聚类器不接受字符串数据。我不想聚集在字符串数据上；我只想用它来标记点。

这是我正在使用的数据：

```
@relation Locations
@attribute ID string
@attribute Latitude numeric
@attribute Longitude numeric
@data
'Carnegie Mellon University', 40.443064, -79.944163
'Stanford University', 37.427539, -122.170169
'Massachusetts Institute of Technology', 42.358866, -71.093823
'University of California Berkeley', 37.872166, -122.259444
'University of Washington', 47.65601, -122.30934
'University of Illinois Urbana Champaign', 40.091022, -88.229992
'University of Southern California', 34.019372, -118.28611
'University of California San Diego', 32.881494, -117.243079 
```

如您所见，它本质上是 x 和 y 坐标平面上的点的集合。任何模式的价值都可以忽略不计；这只是与 Weka 合作的一个练习。

这是给我带来麻烦的代码：

```
val instance = new Instances(new StringReader(wekaHeader + wekaData))

val simpleKMeans = new SimpleKMeans()
simpleKMeans.buildClusterer(instance)

val eval = new ClusterEvaluation()
eval.setClusterer(simpleKMeans)
eval.evaluateClusterer(new Instances(instance))

Logger.info(eval.clusterResultsToString) 
```

我收到以下错误`simpleKMeans.buildClusterer(instance)`：

*[UnsupportedAttributeTypeException：weka.clusterers.SimpleKMeans：无法处理字符串属性！]*

**如何让 Weka 在进行集群时保留 ID？**

* * *

以下是我为解决此问题而采取的其他几个步骤：

我使用 Weka Explorer 并将这些数据加载为 CSV：

```
ID, Latitude, Longitude
'Carnegie Mellon University', 40.443064, -79.944163
'Stanford University', 37.427539, -122.170169
'Massachusetts Institute of Technology', 42.358866, -71.093823
'University of California Berkeley', 37.872166, -122.259444
'University of Washington', 47.65601, -122.30934
'University of Illinois Urbana Champaign', 40.091022, -88.229992
'University of Southern California', 34.019372, -118.28611
'University of California San Diego', 32.881494, -117.243079 
```

这就是我希望它在 Weka Explorer 中做的事情。Weka 对点进行聚类并保留 ID 列以识别每个点。我会在我的代码中执行此操作，但我试图在不生成其他文件的情况下执行此操作。正如您从[Weka Java API](http://weka.sourceforge.net/doc.stable/weka/core/Instances.html#Instances%28java.io.Reader%29)中看到的那样，仅`Instances`将 a 解释`java.io.Reader`为 ARFF。

我还尝试了以下代码：

```
val instance = new Instances(new StringReader(wekaHeader + wekaData))
instance.deleteAttributeAt(0)

val simpleKMeans = new SimpleKMeans()
simpleKMeans.buildClusterer(instance)

val eval = new ClusterEvaluation()
eval.setClusterer(simpleKMeans)
eval.evaluateClusterer(new Instances(instance))

Logger.info(eval.clusterResultsToString) 
```

这适用于我的代码，并显示结果。这证明 Weka 正常工作，但由于我删除了 ID 属性，我无法真正将聚集点映射回原始值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T01:03:10.270

我正在回答我自己的问题，在此过程中，我想解决两个问题：

*   为什么 CSV 可以处理字符串值
*   如何从集群评估中获取集群信息

* * *

正如**Sentry**在评论中指出的那样，当从 CSV 加载时，ID 实际上会转换为*名义属性。*

如果数据必须采用某种`ARFF`格式（例如在我的示例中，`Instances`对象是从 a 创建的`StringReader`），则`StringToNominal`可以应用过滤器：

```
 val instances = new Instances(new StringReader(wekaHeader + wekaData))

  val filter = new StringToNominal()
  filter.setAttributeRange("first")
  filter.setInputFormat(instances)

  val filteredInstance = Filter.useFilter(instances, filter)

  val simpleKMeans = new SimpleKMeans()
  simpleKMeans.buildClusterer(instance)
  ... 
```

这允许在聚类中使用*“字符串”*值，尽管它实际上只是被视为*名义*值。它不会影响聚类（如果 ID 是唯一的），但它不会像我希望的那样有助于评估，这将我带到下一个问题。

* * *

我希望能够得到一张漂亮的集群和数据地图，比如`cluster: Int -> Array[(ID, latitude, longitude)]`or `ID -> cluster: Int`。但是，聚类结果并不那么方便。根据我这几天的经验，有两种方法可用于查找每个数据点的集群。

要获取集群分配，请`simpleKMeans.getAssignments`返回一个整数数组，该数组是每个数据元素的集群分配。整数数组与原始数据项的顺序相同，并且必须手动关联回原始数据项。这可以在 Scala 中轻松完成，方法是使用`zip`原始数据项列表上的方法，然后使用其他方法，如`groupBy`或`map`以您喜欢的格式获取集合。请记住，仅此方法根本不使用 ID 属性**，**并且可以从数据点中**完全**省略 ID 属性。

但是，您也可以使用`simpleKMeans.getClusterCentroids`或获取聚类中心`eval.clusterResultsToString()`。这个我用的不多，但在我看来确实可以从这里的集群中心恢复ID属性。据我所知，这是唯一可以从集群评估中使用或恢复 ID 数据的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-18T17:28:18.150

我在具有几百万行的 CSV 文件的其中一行中有字符串值时遇到了同样的错误。以下是我如何确定哪一行具有字符串值。

异常“无法处理字符串属性！” 没有提供有关行号的任何线索。因此：

*   我将 CSV 文件导入 Weka Explorer GUI 并创建了一个 *.arff 文件。
*   然后在开头的 *.arrf 文件中手动将类型从字符串更改为数字，如下所示。
*   之后，我尝试使用 *.arff 文件构建集群。
*   **作为异常的一部分，我得到了确切的行号**
*   我从 *.arff 文件中删除了该行并再次加载。它没有任何问题。

转换后的字符串 --> *.arff 文件中的数字

```
@attribute total numeric
@attribute avgDailyMB numeric
@attribute mccMncCount numeric
@attribute operatorCount numeric
@attribute authSuccessRate numeric
@attribute totalMonthlyRequets numeric
@attribute tokenCount numeric
@attribute osVersionCount numeric
@attribute totalAuthUserIds numeric
@attribute makeCount numeric
@attribute modelCount numeric
@attribute maxDailyRequests numeric
@attribute avgDailyRequests numeric 
```

错误报告了确切的行号

```
java.io.IOException: number expected, read Token[value.total], line 1750464
    at weka.core.converters.ArffLoader$ArffReader.errorMessage(ArffLoader.java:354)
    at weka.core.converters.ArffLoader$ArffReader.getInstanceFull(ArffLoader.java:728)
    at weka.core.converters.ArffLoader$ArffReader.getInstance(ArffLoader.java:545)
    at weka.core.converters.ArffLoader$ArffReader.readInstance(ArffLoader.java:514)
    at weka.core.converters.ArffLoader$ArffReader.readInstance(ArffLoader.java:500)
    at weka.core.Instances.<init>(Instances.java:138)
    at com.lokendra.dissertation.ModelingUtils.kMeans(ModelingUtils.java:50)
    at com.lokendra.dissertation.ModelingUtils.main(ModelingUtils.java:28) 
```

# c++ - 不存在合适的构造函数来将“test *”转换为“test”，构造函数，

> ID：15637556
> 
> 赞同：18
> 
> 时间：2013-03-26T12:52:48.043
> 
> 标签：c++, object, pointers, constructor, instance

我是新手`c++`，我在构造函数和类方面遇到了困难。所以，这是我的头文件：

```
#pragma once
#include <string>
using namespace std;
class test
{

    private:
    string name;
    int number;

public:

    test();
    test(string i,int b);
}; 
```

这是cpp文件：

```
#include "test.h"
#include <string>
using namespace std;

test::test(){}

test::test(string i,int b){
    this->name=i;
    this->number=b;
} 
```

现在，当我尝试打电话时

```
test t=new test("rrr",8); 
```

我得到：

```
1   IntelliSense: no suitable constructor exists to convert from "test *" to "test" 
```

那么，`*`名称中包含类的情况是什么（例如，没有 .cpp 文件的类没有 asterix，所有其他类都有）？我做错了什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-26T12:54:54.410

我想你来自 Java/C# 背景。 `t`这里不是引用类型，而是值类型。 `new`返回一个指向对象的指针。因此，您需要以下任何一项：

```
test t = test("rrr", 8);
test t("rrr", 8);
test *t = new test("rrr", 8); 
```

如果您还不熟悉指针，那么绝对不要使用最后一个！但是理解指针的语义是相当关键的。我建议您阅读教科书中的相关章节...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T12:59:46.487

> 那么，名称中带有“*”的类是怎么回事（例如，没有 .cpp 文件的类没有 asterix，所有其他类都有）？？？

你肯定需要了解指针。`test *`并且`test`是 C++ 中两种完全不同的类型。这是具有这些类型的两个变量：

```
test t;
test* p; 
```

在这里，`t`有 type`test`和`p`as type `test*`。我们描述`test*`为“指针`test`”。

您通常可以将指针视为对象的内存地址。所以在 中`p`，由于它是一个指针，我们可以存储 的内存地址`t`，即 a `test`。要获取对象的地址，我们使用一元运算`&`符，如下所示：

```
test t;
test* p = &t; 
```

请注意，这`t` *是*一个`test`对象。你不用说`new test()`。这就是 C++ 与您可能使用过的其他语言（如 C# 和 Java）的不同之处。在上面的 C++ 代码中，`t`是一个`test`对象。

但是，您*可以*使用 来创建对象`new test()`，那么有什么区别呢？

`test t;`创建一个`test`具有自动存储持续时间的对象。这意味着它在其作用域结束时被销毁（通常函数在其中声明）。

`new test()`创建`test`具有动态存储持续时间的对象。这意味着您必须手动销毁该对象，否则您将发生内存泄漏。这个表达式返回一个指针，所以你可以用它初始化一个指针对象：

```
test* p = new test(); 
```

所以现在让我们看看你的问题：

```
test t=new test("rrr",8); 
```

我们现在知道`new test("rrr", 8)`返回一个指向`test`(a `test*`) 的指针。但是，您正试图将其分配给一个`test`对象。你根本无法做到这一点。其中一个是地址，另一个是`test`. 因此编译器说“不存在合适的构造函数来从 转换`test *`为`test`。” 现在有道理了，不是吗？

相反，您应该更喜欢使用自动存储持续时间。仅`new`在您确实需要时使用。所以就这样做：

```
test t("rrr", 8); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:54:29.550

```
test t=new test("rrr",8); 
```

一定是

```
//  v
test* t=new test("rrr",8); 
```

* * *

> 那么，名称中带有“*”的类是怎么回事

`*`用于指示指针，不在类名中。但这是一个很大的话题，所以你应该对此进行一些研究。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:57:51.827

```
T* t = new T;
//     ^^^ 
```

当在这个对象构造中使用 new 时，它表示创建了一个指针。正在做的是动态分配内存，我敢肯定你不是故意的。相反，典型的堆栈分配对象构造是这样完成的：

```
T t; 
```

即使您打算创建一个指针并分配内存，您也做错了。`*`使用您的代码中缺少的符号创建一个指针。其次，当您使用完您创建的内存时，您必须记住`delete`/`delete[]`您的代码。`delete[]`用于动态分配的数组。所以这就是它会如何寻找你的指针：

```
delete t; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T12:58:39.533

`*`不是名称的一部分，它是一个修饰符，表示该对象是一个指针。指针是一个变量，它保存指向内存中某个位置的地址，其中存储了实际对象。一些基础知识：

```
int i = 5;
int * pI = &i; 
```

`int * pI`意味着，您要声明一个指针以放置在保存 int 的内存中。`&i`意味着，您要检索指向变量的指针。所以现在 pI 将地址保存在内存中，存储 i 的地方。现在您可以*取消引用*指针 - 获取指针的值：

```
int j = *pI; 
```

现在您告诉编译器，它应该转到 pI 指向的地址并检索其内容（因为 pI 是指向 int 的指针，编译器会假设那里有一个 int）。

现在，回到你的例子。`new`运算符为对象动态分配内存，因此：

```
new test("rrr", 8); 
```

导致为测试类分配内存，使用参数“rrr”和 8 调用其构造函数并返回指向已分配内存的指针。这就是为什么您不能将其分配给`test`变量的原因：在这种情况下，new 运算符返回一个`test *`.

试试这个代码：

```
test * t = new test("rrr", 8); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T12:55:02.850

您没有定义`t`为指针：

```
test* t=new test("rrr",8); 
```

要不就

```
test t = test("rrr",8); 
```

# masstransit - 要“暂停”订阅处理，我应该处置 ServiceBus 还是取消订阅？

> ID：15637558
> 
> 赞同：2
> 
> 时间：2013-03-26T12:52:54.777
> 
> 标签：masstransit

我正在尝试想出一个好方法来“暂停”使用 Mass Transit ServiceBus 处理消息。基本上我需要让我的 Windows 服务运行，但暂时停止处理消息。

我只能想到两种方法来做到这一点，使用订阅令牌，或者处置服务总线。

有没有首选的方法，或者我走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:24:32.893

假设您有一些其他代码需要继续运行，那么将其拆分为单独的服务是否值得？

通过消息传递提供控制的较长方式或可能是对第一种方式的补充是使用“控制”总线，即另一个端点，配置有可以创建/处置用于消息传递基础设施的整个容器的服务。

另一种方法是在其“货架”配置中使用[Topshelf](http://nuget.org/packages/topshelf) - 在 Topshelf 3 之前，您可以从外部控制哪个货架正在运行。将整个消息处理域放置在您想要独立于服务和服务的其余部分控制的架子上——在它自己的架子上。

缺点是：

*   调试服务（以交互方式）要困难得多。
*   它将需要重新打包服务（.exe 不再是您的，只有服务是）。

# wpf - WPF 数据网格：我想调整适用于编辑模式的样式

> ID：15637560
> 
> 赞同：1
> 
> 时间：2013-03-26T12:52:58.153
> 
> 标签：wpf, datagridcell

我的 WPF 应用程序有一个`DataGrid`，`DataGridTextColumn`用户可以在其中输入信息。`DataGridCell`然后，当出现一些验证错误或其他情况时，我被要求更改 a 的前景色或背景色。我采用了比保守的 MVVP 设计所需的更加程序化的方法，并用 C# 编写了一些代码，例如。

```
cell.Background = Brushes.Pink;
cell.Foreground = Brushes.Red; 
```

它工作得很好，但我最大的问题是，虽然这种着色发生在用户输入字符的时候，但它实际上被一种似乎适用于编辑模式下的单元格的样式隐藏了。如果我的理解是正确的，它既不是`IsSelected`风格也不是风格。`IsFocused`也许就是这样`EditingElementStyle`。

我的问题是如何更改在编辑单元格时适用的样式颜色（如果是暂时的）？我试过`DataGridCell.SetCurrentValue()`了，但可用的信息很少......

PS我知道有一些严格的方法，比如使用`IDataErrorInfo`. 由于某些原因，它不适用于我的应用程序，所以我必须以另一种方式解决问题。在此处输入代码

# javascript - 如果不是用户在js中的物理点击，如何在加载url时允许弹出窗口

> ID：15637566
> 
> 赞同：0
> 
> 时间：2013-03-26T12:53:08.340
> 
> 标签：javascript, javascript-events

我想在站点加载时允许弹出窗口，并且如果事件的根本原因不是用户的物理点击，那么它就会被阻止。任何帮助

我的代码：

```
$("#buttonBtn").on('click',function(){
    openpopup('temp'+id)
});

$("#buttonBtn").trigger('click'); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:06:24.783

这样，如果您明确单击，则会出现弹出窗口。如果用户通过键盘来到这个按钮并按 Enter 或其他东西，我想这不会被触发。

```
$("#buttonBtn").click(function(e){

    e.preventDefault();
    // some job you will do if clicked, for example, open popup

}); 
```

[这里的好例子](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:10:14.320

您通常可以使用`window.open`. 但是，大多数浏览器都有内置的弹出窗口阻止程序，用户会在弹出窗口中收到通知，并询问他是否真的想显示它。

MDN 有一篇关于`window.open`. 它还提供了有关弹出窗口阻止程序的一些信息：

> 如何判断我的窗口何时被弹出窗口阻止程序阻止？
> 
> 使用 Mozilla/Firefox 和 Internet Explorer 6 SP2 的内置弹出窗口阻止程序，您必须检查 window.open() 的返回值：如果不允许打开窗口，它将为 null。但是，对于大多数其他弹出窗口阻止程序，没有可靠的方法。

来源：[https ://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

# visual-studio-2010 - WCF 测试客户端服务操作未更新

> ID：15637568
> 
> 赞同：0
> 
> 时间：2013-03-26T12:53:12.920
> 
> 标签：visual-studio-2010, wcf, operations

我是 WCF 的新手。我正在创建一个新的 WCF 服务。我最初进行了 1 次手术。但过了一段时间，我决定再添加两个。2 个新操作不会出现在 Microsoft WCF 测试客户端中。如何解决我的问题？

![图片在这里](../Images/b6ee1cdb2d7608f1abea6fecea5b8d5d.png)

更新：我注释掉了我的第一个操作和第二个操作。第三个操作在 WCF 测试客户端中得到更新。

![图片在这里](../Images/f74b45feeb35345e72c4eededbb4402f.png)

@珍

```
 namespace MyService
    {
        // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
        [ServiceContract]
        public interface IService1
        {
            [OperationContract]
            List<User> FindUser(string userName, string password);
            List<Service> GetServiceList();
            List<Message> GetMessageList(string userName);
        }
    }

namespace MyService
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    public class Service1 : IService1
    {
        public List<Service> GetServiceList()
        {
            DataClasses1DataContext context = new DataClasses1DataContext();
            var res = from r in context.Services select r;
            return res.ToList();
        }

        public List<User> FindUser(string userName, string password)
        {
            DataClasses1DataContext context = new DataClasses1DataContext();
            var res = from r in context.Users where r.UserName == userName && r.Password == password select r;
            return res.ToList();
        }

        public List<Message> GetMessageList(string userName)
        {
            DataClasses1DataContext context = new DataClasses1DataContext();
            var res = from r in context.Messages where r.ReceiverID == userName select r;
            return res.ToList();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:32:28.553

您需要在您的界面中的**每个**`OperationContractAttribute`方法之前添加。

# javascript - 如何动态禁用radioButton组

> ID：15637572
> 
> 赞同：4
> 
> 时间：2013-03-26T12:53:27.043
> 
> 标签：javascript, radio-button

我在我的 radioGroup 中创建一个元素，如下所示：

```
var selectorLay1 = document.createElement('input');
        var selectorLay1Atributes = {
            'type': 'radio',
            'class': "selectorLay1",
            'id': "radioLay1",
            'name': "layouts",
            'onchange': "mv.createLayout(1,1)"}; 
```

我有这样的不同元素。但它们都有相同的名称：`'layouts'`. 如何找到所有这些元素并动态禁用它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T12:57:34.533

尝试这个：

```
var radios = document.getElementsByName('layouts');
for (var i = 0, r=radios, l=r.length; i < l;  i++){
    r[i].disabled = true;
} 
```

阅读[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)了解`getElementsByName`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T12:55:39.103

我建议：

```
var inputs = document.getElementsByName('layouts');
for (var i = 0, len = inputs.length; i<len; i++){
    inputs[i].disabled = true;
} 
```

[简单的演示](http://jsfiddle.net/davidThomas/rHfus/)。

`name`这将使用of选择相关元素`layouts`，然后在`for {...}`循环中遍历这些元素并设置`disabled`属性。

使用简单的函数方法：

```
function disableByName(elName){
    var els = document.getElementsByName(elName);
    if (els !== null){
        for (var i = 0, len = els.length; i<len; i++){
            els[i].disabled = true;
        }
    }
}

var button = document.getElementById('radioDisable');

button.addEventListener('click',function(e){
    e.preventDefault();
    disableByName('layouts');
}, false); 
```

[简单的演示](http://jsfiddle.net/davidThomas/rHfus/1/)。

或者，如果您愿意，可以扩展 Object 原型以允许您直接禁用`document.getElementsByName()`选择器返回的那些元素：

```
Object.prototype.disable = function(){
    var that = this;
    for (var i = 0, len = that.length; i<len; i++){
        that[i].disabled = true;
    }
    return that;
};

document.getElementsByName('layouts').disable(); 
```

[简单的演示](http://jsfiddle.net/davidThomas/rHfus/3/)。

# c - 这个逻辑的输出是什么？

> ID：15637578
> 
> 赞同：-6
> 
> 时间：2013-03-26T12:53:41.360
> 
> 标签：c

我有下面的代码。但是，我认为4是答案。我对吗？

```
int a, i;

if (execute)
{
  int count = 0;
  for (i=0; i<5; i++)
  {
    if(pcnt[i]) count ++;
  }
  a = (count > 0)
}
else
{
  a= 0;
} 
```

对于 IF 情况，a 是 a=1 还是 a=4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:55:45.643

将`a`是`1`或`0`

`1`: 如果`execute != 0`和`count >0`

`0`： 否则

**笔记：**

`count >0`当且仅当`pcnt[0]!=0`或`pcnt[1]!=0`或`pcnt[2]!=0`或`pcnt[3]!=0`或`pcnt[4]!=0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:56:56.063

首先，由于缺少分号，这不会编译。如果未正确声明变量也可能会遇到困难，但为了回答，我将假设它们已经正确声明。

现在，看看`a`分配给什么。我看到`a = (count > 0)`和`a = 0`。Well`(count > 0)`永远只会是 0 或 1（在 C 中布尔表达式将解析为 1 表示真，0 表示假）。所以基本上，你有`a = 0 or 1`和`a = 0`。这简化为`a`0 或 1。

# actionscript-3 - CacheAsBitmap 和过滤器

> ID：15637587
> 
> 赞同：2
> 
> 时间：2013-03-26T12:54:36.817
> 
> 标签：actionscript-3, flash

为什么使用过滤器时 cacheAsBitmap 会自动设置为 true？

我有一个每帧都被绘制到舞台上的影片剪辑，因为它有一个播放时间线并且它每隔一段时间就会旋转一次，所以我希望将 cacheAsBitmap 设置为 false。但是movieclip 有一个dropshadow-filter，它把cacheAsBitmap 设置为true，这不是说缓存每一帧都会损失很多性能吗？

从正在绘制的影片剪辑中删除阴影过滤器并将其应用于其所有子级是否是一种解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:16:21.623

从文档：

> 每当您将过滤器应用于影片剪辑时（当其过滤器数组不为空时），cacheAsBitmap 属性就会自动设置为 true。如果影片剪辑应用了过滤器，则即使将该属性设置为 false，该影片剪辑的 cacheAsBitmap 也会报告为 true。如果清除影片剪辑的所有过滤器，cacheAsBitmap 设置将更改为上次设置的值。

我相信这是因为 Flash Player 必须使用位图版本的 MovieClip 来应用效果 - 大多数滤镜都是在像素级别完成的。然后将其缓存，以便进一步的转换（如`x/y`）更有效。`cacheAsBitmap`因此，无论设置为真还是假，实际上并没有真正的区别。

使用过滤器 + 时间线动画通常是个坏主意。但是，一个很好的优化是在显示列表的更深处，在没有动画的对象上应用过滤器。更好的是，如果可能，请尝试使用带有光栅化效果的位图，这样您的效果就不会在运行时计算。

不要忘记使用 Scout 来查看玩家对您的对象所做的确切操作！

# jquery - 如何从html中提取td

> ID：15637599
> 
> 赞同：0
> 
> 时间：2013-03-26T12:55:07.227
> 
> 标签：jquery, ajax

我有一个变量，它有一些 html 数据。我想`td`从那个html中提取一个。

如果我给出`alert(returnData)`以下输出。

```
<tr class='addedrow'>
    <td id="abc">DOM-001
        <input id="bill_details_1_narration" name="bill_details[1][narration]" type="hidden" />
    </td>
    <td>DOMSTAL O CAPSULES</td>
    <td>
        <select id="item_details_batch_number" name="item_details[batch_number]">
            <option value="47">BATCH-830</option>
        </select>
    </td>
    <td>
        <input id="bill_details_quantity" name="bill_details[quantity]" size="2" type="text" value="2.0" />
    </td>
    <td>
        <input id="item_details_cost_price" name="item_details[cost_price]" size="2" type="text" value="23391.0" />
    </td>
</tr> 
```

在这里，我想从中提取`1`值`bill_details_1_narration`。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:02:26.323

您可以像这样将值从一个元素转移到另一个元素：

```
$(function(){
    $('#id_Expeditor').html($('#id_Receiver').html());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:00:37.490

如果`returnData`是应该工作的 HTML 节点：

```
var bill_details = $(`#bill_details_1_narration`,returnData).val(); 
```

但是既然你提醒它我是字符串，为什么会这样呢？你如何返回这些数据？

**更新：**

```
var valArray = [],
billDet = $('input[name$="[narration]"]', returnData);

billDet.each(function () {
    valArray.push($(this).val())
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:01:58.923

问题的标题是指，`td`但据我了解，我相信您想`1`从`name`属性中检索，因为`1`不会出现在您的标记中的其他任何地方：

如果要从以下位置检索值：

```
bill_details[1][narration] 
```

首先我建议使用`data-attributeName`

然后，您可以使用此代码`1`从属性中提取。

```
var obj = $("#bill_details_1_narration");
var attr = obj.attr("name");
var sub = attr.substring(attr.indexOf('[') +1, attr.indexOf("]"));

alert(sub); 
```

[http://jsfiddle.net/t8uFC/](http://jsfiddle.net/t8uFC/)

# ajax - 使用 Ajax 从两个节点显示 Json

> ID：15637600
> 
> 赞同：0
> 
> 时间：2013-03-26T12:55:10.937
> 
> 标签：ajax, json

我很难显示来自 json 的数据。标题显示正常，但***item.volumeInfo.industryIdentifiers.type***返回未定义。

```
$.ajax({
url: 'https://www.googleapis.com/books/v1/volumes?q=:isbn=0-13-727827-6',
dataType: 'json',
success: function (data) {
    $.each(data.items, function (index, item) {
        $(".tab1").append("<div>" + item.volumeInfo.title + "</div><div>" + item.volumeInfo.industryIdentifiers.type + "</div>");
    });
}
}); 
```

小提琴在这里：http: [//jsfiddle.net/HFs8U/1/](http://jsfiddle.net/HFs8U/1/)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:01:14.210

您需要将 [0] 放在 .type 之前，因为 volumeInfo 可以有两个行业标识符。当然，这只会显示第一个，因此如果存在多个，您可能需要找到一种更合适的方式来显示两者。

```
$.ajax({
    url: 'https://www.googleapis.com/books/v1/volumes?q=:isbn=0-13-727827-6',
    dataType: 'json',
    success: function (data) {
        $.each(data.items, function (index, item) {
            $(".tab1").append("<div>" + item.volumeInfo.title + "</div><div>" + item.volumeInfo.industryIdentifiers[0].type + "</div>");
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:48:20.100

解决方案不是很困难。david99world 建议在每个项目中再做一次 $.each 循环并指向一个小提琴。我稍作修改并提出：

```
$.ajax({
url: 'https://www.googleapis.com/books/v1/volumes?q=:isbn=0-13-727827-6',
dataType: 'json',
success: function (data) {
    $.each(data.items, function (i, item) {
        $(".tab1").append("<div>" + item.volumeInfo.title + "</div>");
        $.each(item.volumeInfo.industryIdentifiers, function (i2, type) {
            $(".tab1").append("<div>" + type.type + "</div>");
        });
    });
}
}); 
```

[http://jsfiddle.net/8SnaL/](http://jsfiddle.net/8SnaL/)

希望它可能对其他人有用。

# javascript - 在requirejs中返回骨干集合的标准方法

> ID：15637601
> 
> 赞同：3
> 
> 时间：2013-03-26T12:55:14.173
> 
> 标签：javascript, backbone.js, requirejs

我在不同的文章中看到了关于如何从 RequireJS 定义中返回 Backbone 集合（或视图）的不同示例。例如：

```
define(['models/person'], function( person ) {
    var personCollection = Backbone.Collection.extend({
        model: person,
        url: "api/person"

    });
    // do this?
    return new personCollection();
    // or this?
    //return personCollection;
}); 
```

这两种方法都有内存优势吗？是否有标准的设计模式规定应该使用哪个？

同样的问题也适用于视图，因为我已经看到它们也以两种方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:00:03.070

我会做第二种方式，因为那样你会收到对“蓝图”的引用，而不是对象本身。在大多数情况下，应该希望自己初始化对象创建。

此外，即使您只想创建单个集合实例，我也建议您使用这样的工厂方法：

```
define(['models/person'], function( person ) {
    var personCollection = Backbone.Collection.extend({...}),
        singleCollection,
        export = {
          getInstance = function (options) {
            if (!singleCollection) {
              singleCollection = new personCollection(options);
            }
            return singleCollection;
          }
        }

    return export;
}); 
```

然后你可以这样称呼它：

```
require('models/person', function (person) {
  var personCollection = person.getInstance(options);
} 
```

# ckeditor - 如何在 CKEditor 4 的撤消/重做堆栈中正确集成元素修改？

> ID：15637604
> 
> 赞同：0
> 
> 时间：2013-03-26T12:55:34.183
> 
> 标签：ckeditor

我正在尝试为 CKEditor 实现我自己的图像插件替换。我从[http://docs.ckeditor.com/#!/guide/plugin_sdk_sample_1的教程中引导了一个实现](http://docs.ckeditor.com/#!/guide/plugin_sdk_sample_1)

现在，唯一可编辑的属性是`src`

在下面的代码中，`$.imagebrowser.openPopup(callback)`一旦用户做出选择，就会打开一个弹出窗口，调用回调，并使用图像的新 src 属性。

这对于插入和编辑都很好，但是在撤消/重做集成中存在故障。通过双击对 src 属性所做的修改在发生其他修改（如键入文本）之前是不可撤消的。然后对src属性的修改，好像是在undo/redo栈中适当的集成了，我可以undo和redo了。

知道我做错了什么吗？

```
CKEDITOR.plugins.add( 'customimage', {

    // Register the icons. They must match command names.
    icons: 'customimage',

    // The plugin initialization logic goes inside this method.
    init: function( editor) {
        editor.on( 'doubleclick', function( event ) {
            if(event.data.element.getName() == "img") {
                $.imagebrowser.openPopup(function(src) {
                    event.data.element.setAttribute("src", src);
                });
            }
        });

        editor.addCommand( 'insertCustomimage', {
            allowedContent: ['img[!src,alt]{width,height,float,margin}'],
            // Define the function that will be fired when the command is executed.
            exec: function() {
                $.imagebrowser.openPopup(function(src) {
                    editor.insertHtml('<img src="' + src + '" style="width: 400px; height: auto; float: left; margin: 10px 10px;">');
                });
            }
        });

        // Create the toolbar button that executes the above command.
        editor.ui.addButton( 'Customimage', {
            label: 'Image',
            command: 'insertCustomimage',
            toolbar: 'insert'
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:53:22.000

我不确定这是您要寻找的，但您可以制作快照：

```
editor.fire( 'saveSnapshot' ); 
```

这将为撤消/重做堆栈添加一个状态。此命令应在此行之前添加：

```
event.data.element.setAttribute("src", src); 
```

editor.insertHtml() 函数将 this 包含在函数中。但是，如果您正在编辑标签，则需要手动执行此操作

# php - 警告：preg_match()：第 336 行 C:\xampp\htdocs\whois\classes\engine.php 中的分隔符不能是字母数字或反斜杠

> ID：15637611
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:55:46.350
> 
> 标签：php, preg-match, delimiter

```
function processAvailable($used_limit)
{
    // determine matching type
    if (strpos($this->CORE->CONFIG->NAMESERVERS[$this->server][($used_limit ? "limit_keyword" : "keyword")], "!!!") === 0)
    {
        $opposite = true;
        $keyword = substr($this->CORE->CONFIG->NAMESERVERS[$this->server][($used_limit ? "limit_keyword" : "keyword")], 3);
    }
    else
    {
        $opposite = false;
        $keyword = $this->CORE->CONFIG->NAMESERVERS[$this->server][($used_limit ? "limit_keyword" : "keyword")];
    }

    // determine if available
    if (preg_match($keyword, $this->whoisData))
        $this->available = !$opposite;
    else
        $this->available = $opposite;
} 
```

第 336 行是`preg_match`当我将分隔符放在`limit_keyword`参数顶部的位置，因为`/limit_keyword/`我收到以下错误；

中的空正则表达式`C:\xampp\htdocs\whois\classes\engine.php on line 336`

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:57:10.220

的值`$keyword`不是有效的正则表达式。另外，我认为无论如何在这种情况下这都是矫枉过正。您可能应该使用[`stristr()`](http://www.php.net/manual/en/function.stristr.php)：

```
if (stristr($this->whoisData, $keyword)) // <-- notice the reversed needle and haystack 
```

# java - 如何在组合框中显示我的 JSON 数据？

> ID：15637627
> 
> 赞同：0
> 
> 时间：2013-03-26T12:56:38.973
> 
> 标签：java, json, jcombobox

我已经阅读了我的 JSONData，现在我想将“名称”键显示到组合框中。但是我得到了我的字符串数组的空指针异常。在我尝试将 JSON 对象直接发送到 defaultComboBoxModel 之前。但它必须是字符串数组，所以当我转换它时，一切都变成了空值。为什么我的数组为空？

我的代码：

```
import java.util.ArrayList;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;

public class Planner {

    private String startingLocation;
    private String destination;
    private static Planner planner = null;
    private int id;
    private JSONArray array;
    ArrayList myList = new ArrayList();

    public static Planner getPlanner(){

        if (planner == null ){

            planner = new Planner();

        }

        return planner;

    }

    public void setStartingLocation(String from) {

        this.startingLocation = from;       

    }

    public void setDestination(String dest) {

        this.destination = dest;

    }

    public String getStartingLocation() {

        return startingLocation;

    }

    public String getDestination() {

        return destination;

    }

    public void setID(int id) {

        this.id = id;

    }

    public void setLocationName (JSONArray array){

        this.array = (JSONArray) array;

    }

    public String[] getLocationName(){

        System.out.println(this.array.size());

      for (int i=0; i<this.array.size(); i++){

           myList = (ArrayList) this.array.get(i);
           myList.add(i, array);

       }

       System.out.println(myList);

    return  (String[]) myList.toArray();

    }

}

public void parseJsonData() throws ParseException {

        JSONParser parser = new JSONParser();
        Object obj = parser.parse(jsonData);
        JSONObject topObject = (JSONObject) obj;
        JSONObject locationList = (JSONObject) topObject.get("LocationList");
        JSONArray array = (JSONArray) locationList.get("StopLocation");
        Iterator<JSONObject> iterator = array.iterator();
        String name = null;

        while (iterator.hasNext()) {

            JSONObject jsonObj = (JSONObject) iterator.next();
            Planner.getPlanner().setLocationName(array);

        }

    }

final DefaultComboBoxModel model = new DefaultComboBoxModel(Planner.getPlanner().getLocationName());
        comboBox = new JComboBox(model); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:08:07.920

我不会评论代码风格或设计缺陷，但这里有一些看起来像错误的行：

```
for (int i=0; i<this.array.size(); i++){
       myList = (ArrayList) this.array.get(i);
       myList.add(i, array);
} 
```

`myList`是一个`ArrayList`，虽然我不知道`array`它`JSONArray`实际上包含什么，但如果它包含字符串或`JSONObject`实例，则转换`array.get(i)`为`ArrayList`可能会导致`ClassCastException`. 如果`array`包含其他`JSONArray`s，它可能不会发生。

下一行也很奇怪。假设`array.get(i)`实际返回一个列表，您将该列表添加到该列表中`myList`，然后将该数组添加到该列表中，这将导致循环引用（`array`包含包含`array`等的列表）。

接下来，您将`myList`在每次迭代中进行替换，这可能不是您想要的。

假设`array`包含`JSONArray`istances、`JSONArray`extends `ArrayList`（因此没有`ClassCastException`）并且内部数组包含字符串，您可以将方法更改为如下所示：

```
public String[] getLocationName(){

    System.out.println(this.array.size());

    List<String> resultList = new LinkedList<String>();        

    for (int i=0; i<this.array.size(); i++){
       //cast the inner array to a list of Strings (assuming it only contains Strings)
       List<String> innerList = (ArrayList) this.array.get(i);

       //add the inner list to the result list
       resultList.addAll( innerList );

    }

    System.out.println(resultList );

    return  resultList.toArray(new String[resultList.size()]);
} 
```

通过这种方式，您可以将字符串列表（即`JSONArray`包含`JSONArray`s 且包含`String`s）转换为平面字符串列表并将其作为数组返回。

# silverlight - Windows 8 多点触控图像控制

> ID：15637646
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:57:29.447
> 
> 标签：silverlight, xaml, windows-8

我在 win8 应用中有一张图片。(c#, xaml) 我需要使用多点触控来缩放和旋转图像。有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:59:21.343

是的，看看

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465387.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465387.aspx)

阅读 MSDN 中的文档。他们很好。

# logging - Symfony2 - 教义日志

> ID：15637647
> 
> 赞同：6
> 
> 时间：2013-03-26T12:57:31.780
> 
> 标签：logging, symfony, doctrine-orm

我希望看到调用的所有教义查询。

我知道开发栏，但它没有显示通过 Ajax 处理的查询。

如何查看所有已触发的学说查询？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T16:08:11.753

为了扩展您的答案，尤其是在开发方面，我更喜欢拆分每个日志通道，以便我可以轻松地将每个通道传输到自己的输出。

在 config_dev.yml 中，添加：

```
monolog:
   handlers:
   [...]
      doctrine:
            action_level: debug
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%_doctrine.log
            channels: doctrine 
```

然后

```
tail -f app/logs/dev_doctrine.log 
```

将为您提供每笔交易发生时的干净整洁的流。我也为事件、请求和安全添加了一个，但这自然是个人喜好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T12:57:31.780

```
$ tail -f app/logs/dev.log | grep "doctrine.DEBUG" 
```

# javascript - 如何使用 node.js 按类名解析链接？

> ID：15637649
> 
> 赞同：0
> 
> 时间：2013-03-26T12:57:34.290
> 
> 标签：javascript, jquery, node.js

此服务器获取 google 第一个站点的所有链接：

```
var     http = require('http');
var qs = require('querystring');
var request = require("request");
var cheerio = require('cheerio');

http.createServer().listen(1337, "127.0.0.1");

function parsehl(body, callback){
    $ = cheerio.load(body);
    var result = '';

    links = $('a'); //jquery get all hyperlinks       ???????

    $(links).each(function(i, link){
        var hyperlink = '\n'+ $(link).attr('href');
        result = result + hyperlink  ;
    });

    callback(result);}

    request({uri: 'http://www.google.com/search?q=rio&start=00'  }, function (error, response, body) {
        console.log('url requested ') ;
        if (!error){
            parsehl(body,  function(result){
                console.log(result);
            });
        }
        else
        {   
            console.log(error);
        }
    }); 
```

此服务器通过标签名称**a**获取链接。我们需要的链接具有类名**l** （看起来像 nr 1 但有点像 l）。我们如何通过类名获取这里的链接？我们可能只需要一行放置问号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:06:15.970

你有没有尝试过：

```
links = $('a.l'); 
```

?

# c# - WPF DataGrid RowValidation 问题

> ID：15637653
> 
> 赞同：0
> 
> 时间：2013-03-26T12:57:44.227
> 
> 标签：c#, wpf, validation, row

我有数据网格，它具有启用虚拟化的行验证。我导入了 48 列和 500 行的大文件。它在开始时对每个可见行（虚拟化）进行验证。因此，如果用户可以看到 10 行（它有滚动条），那么在导入数据时它只会验证 10 行，这很好。

我的问题是：当我更新数据网格的任何单元格时，它会再次对 10 行进行行验证。我希望数据网格仅验证更新的行，而不是所有可见的行。因此，我当前的验证会导致性能问题。

这是 Xaml：

```
 <wpfc4:RhinoDataGrid.RowValidationRules>
                    <wpfc4:CourseValidationRule  ValidationStep="RawProposedValue"/>
                </wpfc4:RhinoDataGrid.RowValidationRules> 
```

代码是：

```
 public class CourseValidationRule : ValidationRule
{
    public override ValidationResult Validate(object value,
        System.Globalization.CultureInfo cultureInfo)
    {
        ValidationResult vResult = ValidationResult.ValidResult;
        DataRowView drView = (value as BindingGroup).Items[0] as DataRowView;
        RhinoDataGrid rGrid = VisualTreeHelpers.FindVisualChild<RhinoDataGrid>(Application.Current.MainWindow);
        for (int i = 0; i < drView.Row.ItemArray.Count(); i++)
        {
            string strVal = drView.Row.ItemArray[i].ToString();
            if (strVal.Length > 10)
            {
                vResult = new ValidationResult(false,
                "error.");
                break;
            }
        }
        return vResult;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:23:46.273

尝试使用`ValidationStep`is`UpdatedValue`而不是`RawProposedValue`

```
<wpfc4:RhinoDataGrid.RowValidationRules>
    <wpfc4:CourseValidationRule  ValidationStep="UpdatedValue"/>
</wpfc4:RhinoDataGrid.RowValidationRules> 
```

# php - 设置 Zend Soap 客户端内容类型

> ID：15637661
> 
> 赞同：2
> 
> 时间：2013-03-26T12:58:04.610
> 
> 标签：php, zend-framework, soap, soap-client

使用 Zend SOAP 客户端进行呼叫时，我似乎收到以下错误。

“无法处理消息，因为内容类型 'application/soap+xml; charset=utf-8; action="http://tempuri.org/ISendAPI/GetExchangeRateList"' 不是预期的类型 'text/xml; charset= utf-8'。”

有什么办法可以设置内容类型，在文档中找不到任何东西

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:43:12.617

您是否尝试过将 Soap 客户端版本更改为例如 1.1？

`$this->_soapClient->setSoapVersion(SOAP_1_1);`

似乎有点错误： http: [//framework.zend.com/issues/browse/ZF-5286](http://framework.zend.com/issues/browse/ZF-5286)

# google-maps-sdk-ios - 为 iOS SDK 的 Google Maps 设置最大缩放级别 kGMSMaxZoomLevel

> ID：15637665
> 
> 赞同：3
> 
> 时间：2013-03-26T12:58:11.797
> 
> 标签：google-maps-sdk-ios

我正在尝试 iOS Google Maps SDK 并注意到在 GMSCameraPosition.h 头文件中有对 kGMSMaxZoomLevel 的引用来设置允许的最大缩放级别。我希望能够设置它，但是当在实现中#defining 一个值时，XCode 指出这样做时有重复的符号，所以不会编译。有人可以指出我使用这个新 SDK 设置最小和最大缩放级别的正确方向吗？非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-31T06:53:21.297

我知道这是一篇旧帖子，但为了完整起见，我发布了这个。

最新版本的谷歌地图 SDK 功能`-setMinZoom:maxZoom:`应该可以满足您的目的。

参考[链接在这里](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_map_view#ada28a79f9041805492062cc8da7b23f2)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:54:38.363

是 SDK 支持的`kGMSMaxZoomLevel`最大值，即在创建`GMSCameraPosition`. 您无法更改其值，以使地图停止在不同的缩放级别。

您也许可以尝试听`[mapView:didChangeCameraPosition:]`，然后如果相机位置比您想要的放大得更多，请再次将其移回。我还没有尝试过，所以我不确定它是否会起作用。它可能会有点卡顿 - 即用户将放大一点超过最大值，您将其设置回来，然后用户将再次放大一点，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-11T16:07:42.540

```
func mapView(_ mapView: GMSMapView, didChange position: GMSCameraPosition) {

    if position.zoom < 10 {

        let latitude = mapView.camera.target.latitude
        let longitude = mapView.camera.target.longitude

        let mapCamera = GMSCameraPosition.camera(withLatitude: latitude, longitude: longitude, zoom: 10)
        mapView.camera = mapCamera

    }
} 
```

# c - return 语句后的序列点？

> ID：15637678
> 
> 赞同：3
> 
> 时间：2013-03-26T12:58:43.627
> 
> 标签：c, return, language-lawyer, sequence-points

[在我对一个问题的](https://stackoverflow.com/questions/15617638/returning-a-variable-while-using-a-post-increment-in-c/15618319#15618319)回答中，我解释了在与`return`语句在同一行的全局变量上使用后缀 ++ 时发生的情况。

C11 的资料性附录 C 指出在 a 之后有一个序列点，`return`并参考规范性章节 6.8.6.4，其中没有关于序列点的文本。

在 C 标准中，我可以在哪里找到说明语句后有序列点的规范性文本`return`？

（作为特例，我只在 7.1.4/3 找到了说明库函数的规范文本。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:04:23.537

C 2011 (draft n1570) 6.8 4：“以下每一项都是完整的表达式：…… **return**语句中的（可选）表达式。在完整表达式的求值和要求值的下一个完整表达式的求值之间存在一个序列点。”</p>

所以从技术上讲，序列点不是在**返回之后，而是在****返回**中表达式的评估和下一个表达式之间。考虑这段代码，`a`最初为 0 时调用：

```
int a = 0;

int Foo(void) { return a++; }

void Bar(void)
{
    int b = Foo() + a;
    …
} 
```

在`Foo() + a`中，是否先评估`Foo()`或`a`未指定。**我们将根据两个潜在规则（返回**后的序列点与**返回**表达式和下一个完整表达式之间的序列点）来考虑这两个顺序。如果实现`a`首先执行，那么它必须执行：

```
a
Sequence point
Foo()
+ 
```

然后会出现其他一些完整的表达式，因此，根据任一规则，都会有一个序列点，就我们而言，无论哪种方式，这段代码都是相同的。结果是`b`设置为0。

如果实现首先执行，那么根据“**返回**`Foo()`后的序列点”规则，实现必须执行以下操作：

 **```
Sequence point
Foo()
Sequence point
a
+ 
```

此代码将具有定义的行为：`a`由 中的副作用递增`Foo`，并且在访问之前完成`a`，然后`+`执行。结果是设置为1。虽然使用“**返回**`a`后的序列点”规则，结果可能是0或1，但它只是未指定使用两个顺序中的哪一个；行为并非完全未定义。

 **但是，如果实现首先执行并使用“**返回**`Foo()`表达式和下一个完整表达式之间的序列点”的标准 C 规则，那么我们有：

 **```
Sequence point
Foo()
???
a
???
+
??? 
```

这 ”？？？” 标记可能需要的序列点的位置——**返回**之后和下一个完整表达式之前的任何地方。在这种情况下， 的值`a`可能在 中被访问`a`和修改`Foo()`，并且没有中间序列点。那是未定义的行为。

因此，规则“一个**return表达式之后和下一个完整表达式之前的序列点”与“一个****return**之后的序列点”是不同的；在此示例中，第一个具有未定义的行为，而第二个则没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T13:14:24.010

我不认为你会找到你要找的东西。`no text regarding sequence points can be found`确实如此，它仅在第 6.8 p4 节中有所暗示。

第 1.9 节（脚注 11）中的 C++ 标准（ISO/IEC 14882:2003）声明了返回后的序列点在 C 标准中的任何地方都*没有*明确写入的事实：

> 11) 函数返回处的序列点在 ISO C 中没有明确指定，可以认为与完整表达式处的序列点是多余的，但额外的清晰性在 C++ 中很重要。在 C++ 中，被调用的函数可以通过多种方式终止其执行，例如抛出异常。******

# html - Html 字符集和对特殊（国家）字符的支持

> ID：15637679
> 
> 赞同：0
> 
> 时间：2013-03-26T12:58:46.423
> 
> 标签：html, web, character-encoding

我有一个 HTML5 的网站。大部分内容都是捷克语，其中有一些特殊符号，如“ř，č，š”等......

我在互联网上搜索推荐的字符集，得到了以下答案：UTF-8、ISO 8859-2 和 Windows-1250。

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO 8859-2" /> 
```

我尝试了 UTF-8，它根本不起作用，然后用 ISO 8859-2 解决了。我在我的电脑上用最新版本的 Chrome、Firefox、IE 和 Opera 测试了我的网站。一切正常，但是当我在[http://browsershots.org/](http://browsershots.org/)测试我的网站时，这些字符没有正确显示（在我用于测试的相同浏览器中！）。

这怎么可能？如何确保所有字符在所有 Web 浏览器中正确显示。使用 HTML5 是否有可能导致这些问题（因为并非所有浏览器都完全支持它，但我没有使用任何高级功能）？

感谢您提供任何提示和故障排除提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:02:36.433

如果您使用 HTML5，请尝试以下简短的 charset 声明：

```
<meta charset="UTF-8"> 
```

另外检查你的 html 文件编码。您可以在 Notepad++ 中执行此操作，菜单编码 -> UTF-8 编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:05:05.707

重要的是数据的实际编码与声明的编码一致。从描述看来，实际编码是ISO-8859-2，所以你应该声明它。请注意，编码的名称没有空格，只有连字符。（我想知道你是否将它与空格一起使用——我希望浏览器会忽略该标签。）以下是最简单的声明：

```
<meta charset=ISO-8859-2> 
```

我不相信 browsershots.org 能把这样的事情做对。在实际浏览器上进行测试更有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:05:38.133

UTF-8 是国际上最受支持的字符集。如果显示不正确，您应该确保您的文件以 UTF-8 格式保存。甚至记事本在其保存对话框中也有一个“UTF-8”选项。

# java - Terracotta 工具包缺少类阻止 EHCache 启动

> ID：15637680
> 
> 赞同：1
> 
> 时间：2013-03-26T12:58:52.457
> 
> 标签：java, ehcache, terracotta

我是 EHCache 的新手，并尝试将其用作我们的缓存服务器。我写了代码试图开始：

```
public class CacheMap {
    private static CacheManager cacheManager=new CacheManager("ehcache.xml");
    private static Cache cache=cacheManager.getCache("firstCache");
} 
```

在类路径中，我包含了 terracotta-toolkit-1.6-5.2.0.jar、terracotta-toolkit-1.6-runtime-5.0.0、slf4j-api-1.6.6、slf4j-jdk14-1.6.6、ehcache-2.7。 0 和 ehcache-ee-2.7.0

我的根目录中有 ehcache.xml。

但是，我的代码的第一行出现以下错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: net.sf.ehcache.CacheException: Could not create ClusteredInstanceFactory due to missing class. Please verify that terracotta-toolkit is in your classpath.
    at net.sf.ehcache.terracotta.TerracottaClusteredInstanceHelper.newClusteredInstanceFactory(TerracottaClusteredInstanceHelper.java:187)
    at net.sf.ehcache.terracotta.TerracottaClient.createNewClusteredInstanceFactory(TerracottaClient.java:169)
    at net.sf.ehcache.terracotta.TerracottaClient.createClusteredInstanceFactory(TerracottaClient.java:126)
    at net.sf.ehcache.CacheManager.doInit(CacheManager.java:442)
    at net.sf.ehcache.CacheManager.init(CacheManager.java:392)
    at net.sf.ehcache.CacheManager.<init>(CacheManager.java:291)
    at CacheMap.<clinit>(CacheMap.java:7) 
```

任何想法如何让兵马俑工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:04:21.317

我想你已经混合了所需的陶罐。如果您使用 maven，这里是 terracotta ver 的依赖项。3.6.5（与JDK5兼容的最后一个版本）：

```
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-core-ee</artifactId>
    <version>2.5.6</version>
</dependency>
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-terracotta-ee</artifactId>
    <version>2.5.6</version>
</dependency>
<dependency>
    <groupId>org.terracotta</groupId>
    <artifactId>terracotta-toolkit-1.5-runtime-ee</artifactId>
    <version>4.5.0</version>
</dependency> 
```

另外不要忘记指向 terracotta 的 maven 存储库以下载所需的 jar：

```
<repository>
    <id>terracotta-repository</id>
    <url>http://www.terracotta.org/download/reflector/releases</url>
    <releases>
        <enabled>true</enabled>
    </releases>
</repository> 
```

如果您不使用 maven，那么您的类路径中应该有以下 jar：

*   ehcache-core-ee-2.5.6.jar
*   ehcache-terracotta-ee-2.5.6.jar
*   terracotta-toolkit-1.5-runtime-ee-4.5.0.jar

# javascript - 为什么这个简单的 Knockout.js 示例不起作用？

> ID：15637683
> 
> 赞同：1
> 
> 时间：2013-03-26T12:59:04.060
> 
> 标签：javascript, jquery, jquery-mobile, knockout.js

我正在玩 Knockout.js 并创建了这个简单的示例：http: [//jsfiddle.net/JcTxT/30/](http://jsfiddle.net/JcTxT/30/)

```
<div id="term_grp" data-role="fieldcontain"><a>Semester:</a>

<fieldset id="term_fields" data-role="controlgroup" data-type="horizontal">
    <input type="radio" name="term" id="ss" value="ss" data-bind="checked: term" />
    <label for="ss">Sommersemester</label>
    <input type="radio" name="term" id="ws" value="ws" data-bind="checked: term" />
    <label for="ws">Wintersemester</label>
</fieldset>
Term is <span data-bind="text: pommes"></span> 
```

```
var aResult = {
    term: ko.observable("ss"),
    pommes: "TEST"
};

$(document).on('pagebeforeshow', '#mainPage', function () {
    ko.applyBindings(aResult);
}); 
```

我希望选中其中一个单选按钮（值为“ss”的单选按钮，但事实并非如此。有谁知道，为什么？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:09:55.193

如果您使用它，它可以工作： `$(function () { ko.applyBindings(aResult); });` 并关闭 jquery mobile。

我试过你的jsfiddle。

如果您需要 jquery mobile，此链接有效： http: [//www.codesizzle.com/jquery-mobile-radio-with-knockout-js/](http://www.codesizzle.com/jquery-mobile-radio-with-knockout-js/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:29:25.610

好的，需要做什么？

添加另一个事件处理程序并将其添加到绑定中：

```
var aResult = {
    term: ko.observable("ws"),
    pommes: "TEST2"
};

ko.bindingHandlers.mobileradio = {
    init: function (element, valueAccessor) {},
    update: function (element, valueAccessor) {
        var value = valueAccessor();
        var valueUnwrapped = ko.utils.unwrapObservable(value);
        if (valueUnwrapped == $(element).val()) {
            $(element).prop("checked", "true").checkboxradio("refresh");
        } else {
            $(element).removeProp("checked").checkboxradio("refresh");
        }
    }
};

$(function () {
    ko.applyBindings(aResult);
}); 
```

工作小提琴：http: [//jsfiddle.net/JcTxT/35/](http://jsfiddle.net/JcTxT/35/)

# facebook-insights - 网页上的 Facebook 点赞按钮数与 Facebook 洞察数不对应

> ID：15637686
> 
> 赞同：0
> 
> 时间：2013-03-26T12:59:08.197
> 
> 标签：facebook-insights

我有一个问题，网页上的点赞按钮数量比 Facebook Insights 中报告的我域上同一页面的数量要高得多。

例如，当我查看一篇已发布两天的文章时，网站上的按钮报告了 18 个赞。如果我在 Facebook 洞察中为那篇文章选择相同的时间跨度，它会报告 4 个喜欢和 2 个分享。

数字怎么会相差这么多？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T10:20:44.240

我有同样的问题，只是谷歌搜索并找到了这篇文章： http: [//faso.com/fineartviews/21028/facebook-like-button-count-inaccuracies](http://faso.com/fineartviews/21028/facebook-like-button-count-inaccuracies)。它非常详细地解释了为什么以及如何。

# elasticsearch - Elasticsearch 术语方面未显示负面术语

> ID：15637687
> 
> 赞同：2
> 
> 时间：2013-03-26T12:59:09.250
> 
> 标签：elasticsearch, faceted-search, facet

我正在使用弹性搜索词方面，我的字段包含一些负值，但方面忽略了负号

以下是方面查询

**[http://myserver.com:9200/index/type/_search](http://myserver.com:9200/index/type/_search)**

获取/发布正文

```
{
  "facets" : {
    "school.id" : {
      "terms" : {
        "field" : "school.id",
        "size" : 10
      }
    }
  }
} 
```

回复

```
{
    "took": 281,
    "timed_out": false,
    "_shards": {
        "total": 5,
        "successful": 5,
        "failed": 0
    },
    "facets": {
        "school.id": {
            "_type": "terms",
            "missing": 302,
            "total": 4390,
            "other": 0,
            "terms": [
                {
                    "term": "1113515007867355135",
                    "count": 4390
                }
            ]
        }
    }
} 
```

id 的实际值为**-1113515007867355135**，我做错了什么还是需要传递任何内容以包含负号（词干问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:29:23.147

负号是 Lucene（和 ElasticSearch）中的一个特殊字符。

在索引和搜索时，您需要对其进行[转义](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Escaping%20Special%20Characters)。

尝试在索引中`\`的字符之前添加一个`-`，这也应该在构面中显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:01:33.850

[从Elasticsearch Google Group](https://groups.google.com/forum/#!topic/elasticsearch/FeObbeT1eok)得到答案。需要更新字段的映射

可能的解决方案：

更新映射和使用

**“索引”：“分析”，“分析器”：“关键字”**

或者

**“索引”：“未分析”**

# php - 每当数据库更改时自动执行 PHP 脚本

> ID：15637692
> 
> 赞同：0
> 
> 时间：2013-03-26T12:59:25.537
> 
> 标签：php, android, database, wcf, push-notification

**精华**

我的数据库（SQL Server）中有一个表和一个与 DB 通信以影响它的 WCF 服务。我的服务器上还有一个 PHP 脚本。现在，每当我的表添加、修改或删除了一些数据时，我希望我的 PHP 脚本能够自动执行。

**其应用**

我正在开发一个几乎完成的移动应用程序。现在我需要实现一个推送通知功能。即，每当数据库发生更改时，我都必须运行配置为向用户推送通知的服务器端脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:04:46.663

推送服务应该在将数据添加到数据库的层中实现。数据库仅用于存储信息而不用于执行代码。因此，为了创建推送通知，您需要一个接口来接收更新，将其发送到数据库并将其推送给用户。

看到您的问题，我当然不希望您允许您的应用程序直接将信息添加到数据库中，而无需验证传入信息的某些层。这是直接的安全风险。

模型的解决方案是：

应用程序 -> 发送信息 -> 网站 -> 分析 PHP/其他代码语言的请求 -> 插入数据库 -> 向客户端推送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:01:59.170

您没有说您使用的是什么 RDBMS，但无论它是什么，您都需要阅读有关“触发器”的文档。这应该给你所有你需要知道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:05:04.540

大多数情况下，这是使用 cron（或其他调度程序）以特定时间间隔（例如每分钟）检查数据库以查找新工作然后处理它来完成的。

然而，这种设计只能让你到目前为止，下一阶段将是使用消息队列（如 gearman、ZeroMQ 等）。

您可能可以使用触发器使某些东西起作用，但通常不应将数据库视为队列。

# c - 在 Linux 中使用原始套接字发送原始数据（PSH-ACK）

> ID：15637695
> 
> 赞同：-2
> 
> 时间：2013-03-26T12:59:33.953
> 
> 标签：c, linux, raw-sockets

我编写了一些程序，它假装建立连接，然后发送一个数据包；通过在 linux 中使用 raw-sockets 和 C 语言。

幸运的是，我已经实现了该程序，因为连接已建立。我现在遇到的问题是我不能花这么多时间来猜测必须如何填充 psh-ack（数据包），通过从服务器接收 ACK，并且还可以在 netcat 的输出缓冲区中看到数据...

所以，拜托，任何人都可以帮助格式化数据包吗？我花了很多时间，给你一个完整的流量日志很容易。

提前致谢。希望尽早提出建议... ;)。

PS：如果不清楚，我假装实现我自己的用户空间 tcp 堆栈只是为了加快 tcp 网络的进程，只是为了在非阻塞程序执行中嵌入一个网络进程，以及一个快速的网络进程结果集。

你们中的一些人可能知道，linux 机器会自动向发送了 SYN_ACK 的服务器发送一个应答，但 RST 连接，并且无法通过实现 TCP 堆栈来建立连接。所以，我应该说，我正在使用名为“TCP/UDP 黑洞 DoS 预防”的 grsec 保护，它可以防止 Linux 内核向“不连贯”的网络流量发送不希望的响应。

就这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:50:32.917

```
ip.len = tcp_data_sz + tcphdr_sz + iphdr_sz

tcp.id = id + 1
tcp.seq = same as ACK of three way handshake
tcp.ack_seq = same as ACK of three way handshake

pseudo_hdr.len = tcp_data_sz + tcphdr_sz

tcp.check = (size: psehdr + tcphdr + tcpdata) (pad with 00's until size % 2 = 0). 
```

这个链接很有用：[http](http://www.arcesio.net/checksum/checksumTCP.html) ://www.arcesio.net/checksum/checksumTCP.html （西班牙语大部分和英语编辑）。

感谢所有 4 观看。

Linuxios：感谢您的精彩评论，现在我以自己的方式找到了解决方案。（我的方法比普通的 linux 接口快:)。

# jquery - 在输入字段中切换只读属性

> ID：15637697
> 
> 赞同：6
> 
> 时间：2013-03-26T12:59:39.283
> 
> 标签：jquery, button, uitextfield, toggle, readonly

我创建了一个表格。这是**[小提琴](http://jsfiddle.net/Nedzj/1/)**

默认情况下，所有字段都处于只读状态。我需要在这里做的是

1.  使用单击`Edit button`和编辑按钮（名称和值）时激活要编辑的文本字段应变为`SAVE button`.

2.  编辑完成后，用户应该点击`Save button`它，它应该再次执行第一步，这意味着将按钮更改回原始状态`Edit`，即文本字段为`readonly`

最好寻找 jquery 解决方案。

预先感谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T13:10:01.570

获取具有名称的所有元素`Edit`并附加一个单击处理程序。该变量`prev`是前一个输入元素并且`ro`是那个元素的只读属性状态（真/假）。

然后我们将只读状态设置为`! ro`（不是 ro），这只是意味着“将其设置为与当前状态相反的状态（如果您愿意，可以使用切换功能）”，并聚焦`prev`输入。

最后一行以当前单击的按钮为目标`this`，并根据`ro`变量的状态使用三元运算符更改其文本。

```
$('[name="Edit"]').on('click', function() {
    var prev = $(this).prev('input'),
        ro   = prev.prop('readonly');
    prev.prop('readonly', !ro).focus();
    $(this).val(ro ? 'Save' : 'Edit');
}); 
```

[**小提琴**](http://jsfiddle.net/Nedzj/6/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T13:10:53.783

最简单的：

```
// binds a click-handler to inputs whose `name` attribute is equal to 'Edit':
$('input[name="Edit"]').click(function(){
    // when the input is clicked, it looks to the previous input element
    // that has a `required` attribute, and sets its `readonly` property,
    // the `r` is the current readonly state (true or false)
    $(this).prev('input[required]').prop('readonly',function(i,r){
        // returns the value as the opposite  of what it currently is
        // if readonly is false, then it returns true (and vice-versa)
        return !r;
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Nedzj/5/)。

并提供更改的文本`button`：

```
$('input[name="Edit"]').click(function(){
    $(this)
    .val(function(i,v){
        return v === 'Edit' ? 'Finished' : 'Edit';
    })
    .prev('input[required]')
    .prop('readonly',function(i,r){
        return !r;
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Nedzj/7/)。

# jquery - 如何使用 html5 或 jQuery 在鼠标悬停时绘制混合的矩形和圆形形状

> ID：15637698
> 
> 赞同：1
> 
> 时间：2013-03-26T12:59:40.037
> 
> 标签：jquery, html, canvas, drawing, mouseover

我正在尝试在我的 Web 应用程序中制作一种绘画编辑器。为此，我正在研究 wPaint ( [https://github.com/websanova/wPaint](https://github.com/websanova/wPaint) )，它是一个 jQuery 插件。有了这个，我可以在鼠标悬停上绘制形状，创建矩形、线条和圆形。

虽然这是一个很棒的插件，但我不能像这样绘制混合的矩形和圆形：

![在此处输入图像描述](../Images/a666ddda9f163eac4a3770a3ee6a9f26.png)

是否有任何 jQuery 插件或 HTML5 Canvas 库可以像这样在鼠标悬停时绘制图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:34:16.000

我正在做一个项目，您可以使用鼠标绘制您给定的形状（和任何其他形状）。然后，您可以使用 HTML5 和 Canvas 将结果导出为 Javascript 代码。

我的项目在 [http://canvimation.github.com/](http://canvimation.github.com/)

我的项目的源代码位于[https://github.com/canvimation/canvimation.github.com](https://github.com/canvimation/canvimation.github.com)

使用网格获得所需的直角。

![构建形状](../Images/6e91028a0dd41b9c3d4918e90a51a11c.png) ![建成](../Images/99c13d4f37e593d9bee0aa14006c5f50.png)

构建形状和完成的形状

导出的代码

```
<!DOCTYPE HTML>
<html>
   <head>
      <style>
         #canvasarea
         {
            border:black 1px solid;
         }
      </style>
      <!--[IF LT IE 9]><script type="text/javascript" src = "excanvas.js" ></script><![endif]-->
      <script type="text/javascript">
         function setcanvas()
         {
            var canvas = document.getElementById("canvasarea");
            if (canvas.getContext)
            {
               var ctx = canvas.getContext("2d");
               drawcanvas(ctx);
            }
            else
            {
               alert("Canvas NOT supported");
            }
         }

         function drawcanvas(ctx)
         {

               //Shape0;
               ctx.shadowColor ="rgba(0,0,0,0)";
               ctx.strokeStyle ="rgba(0,0,0,1)";
               ctx.lineWidth = 1;
               ctx.lineCap = "butt";
               ctx.lineJoin = "miter";
               ctx.beginPath();
               ctx.moveTo(177,118);
               ctx.bezierCurveTo(237,176,296,177,357,118);
               ctx.bezierCurveTo(357,148,357,208,357,238);
               ctx.bezierCurveTo(312,238,222,238,177,238);
               ctx.bezierCurveTo(177,208,177,148,177,118);
               ctx.closePath();
               ctx.stroke();
               ctx.shadowOffsetX = 15;
               ctx.shadowOffsetY = 15;
               ctx.shadowBlur = 0;
               ctx.shadowColor = "rgba(0,0,0,0)";
               ctx.fillStyle = "rgba(255,255,255,0)";
               ctx.fill();
         }
      </script>
   </head>
   <body onload="setcanvas()">
      <canvas id="canvasarea" width="1000" height="500"></canvas>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:43:10.920

> 是否有任何 HTML5 Canvas 库可以像这样在鼠标悬停时绘制图像？

尝试以下两种中的任何一种：

[http://processingjs.org/](http://processingjs.org/)

[http://paperjs.org/](http://paperjs.org/)

# javascript - 如何更新比率值

> ID：15637700
> 
> 赞同：1
> 
> 时间：2013-03-26T12:59:44.297
> 
> 标签：javascript, jquery, raty

我正在使用[jquery raty 插件](http://wbotelhos.com/raty/)，有一个[单击事件](http://wbotelhos.com/raty/#click)用于发送评级数据，然后从数据库返回新评级，但我无法弄清楚如何更新返回的评级，我的代码：

```
 $('.starrating').raty({
            number:10,
            score: function() {
                  return $(this).attr('data-rating');
                 },
            click: function(score, evt) {
                var contentid = $(this).attr('id');
                $.post('/main/rating.php',{score:score, contentid:contentid },
                        function(data){
                            //alert(data+' Score = '+score);
                            $(this).data('rating',2);
                });
            }
            }); 
```

我尝试了以下但没有成功；

```
$(this).data('rating',2); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:56:54.847

`$(this).raty({ score: 2 });`根据比率文档尝试

PS如果您还需要设置数据属性，您可以试试这个：`$(this).raty({ score: 2 }).attr('data-rating', 2);`

PPS 小`click`事件更新，用于正确处理多个元素

```
$('.starrating').raty({
    number:10,
    score: function() {
        return $(this).attr('data-rating');
    },
    click: function(score, evt) {
        var target = $(this),
            contentid = target.attr('id');

        $.post('/main/rating.php',{score:score, contentid:contentid },
            function(data){
                target
                    .raty({
                        score: data.score
                    })
                    .attr('data-rating', data.score);
            });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T15:38:51.437

根据您对重置参数的评论，我在下面添加了一些想法。

```
 //SET RATY DEFAULTS  
        $.fn.raty.defaults.path = 'img';
        $.fn.raty.defaults.cancel = true;
        //etc 
```

在您的成功函数中，使用新数据重置评级。只有指定的选项将被覆盖。

```
$(this).raty('set', { option: value }); 
```

例如，更新分数

```
$(this).raty('set', { score: 2 }); 
```

如果您遇到问题，请`this`尝试以下代码（基于此答案[Passing variables through to AJAX](https://stackoverflow.com/questions/5042122/passing-variables-through-to-ajax)）

```
$.fn.raty.defaults.click= function(score, evt) 
{   
    var target = $(this),
    contentid = target.attr('id');
    postvalue(score,target, contentid);
}

function postvalue (score,target, contentid)
{
    $.post('/main/rating.php',{score:score, contentid:contentid },
    function(data)
    {
         target.raty({score: data.score}).attr('data-rating', data.score);
    });
} 
```

**注意：**此代码均未经过测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T12:44:34.193

对此有一些麻烦，这对我有用：

```
$('.rating').raty('score', score); 
```

# ruby-on-rails - 预编译缩小版和未缩小版的 javascript

> ID：15637703
> 
> 赞同：2
> 
> 时间：2013-03-26T12:59:48.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, minify

我想在 Ruby on Rails 生产环境中提供我的 javascript 资产的缩小版和非缩小版。

理想情况下，缓存破坏者摘要仍然存在，因此文件如下所示：

*   应用程序-067137a1719812a24eb8a2fd9d1c1ee2.js
*   应用程序-067137a1719812a24eb8a2fd9d1c1ee2.min.js

.min 的位置并不重要。

我在环境/production.rb 中的配置使用了 ufligier：

```
config.assets.js_compressor = :uglifier 
```

# android - 将android phonegap应用程序连接到模拟器中的localhost

> ID：15637704
> 
> 赞同：3
> 
> 时间：2013-03-26T12:59:50.690
> 
> 标签：android, connection, localhost

希望你们能帮助我。我对phonegap比较陌生。在这个问题上，我已经为此绞尽脑汁了一个星期+。我在 C# 中有一个 dbase wcf rest 服务，并构建了一个 android 客户端来调用该服务。当我在 wp7 中测试这个应用程序时，一切似乎都运行良好，即以 json 格式调用这个服务。但是当我将此应用程序迁移到 eclipse android 环境并配置相关设置时，即使我将 url:http//:localhost:1067/Service1 更改为 http//:10.0.2.2:1067/Service1，该应用程序也不会成功运行。我仍在使用已修改为以下内容的演示应用程序

**索引.html**

```
<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=320 user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title>PhoneGap WP7</title>
    <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    <script type="text/javascript" charset="utf-8" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="console.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="init.js"></script>

</head>
<body>
  <div>
    <h1 id="welcomeMsg">Welcome</h1>
    <p><a href="#" onclick="login(); return false;">log in</a></p>
    <p><a href="#" onclick="getAjax(); return false;">Get Ajax</a></p>
    <p><a href="#" onclick="postAjax(); return false;">Post Ajax</a></p>
    <p><a href="#" onclick="getSingle(); return false;">Get Single Item</a></p>
    <p><a href="#" onclick="deleteSingle(); return false;">Delete</a></p>
    <p><a href="#" onclick="updateSingle(); return false;">Update</a></p>
    <p><a href="#" onclick="identify(); return false;">Identify</a></p>
    <p><a href="#" onclick="logViaForm(); return false;">Log via Form</a></p>
    <p><a href="#" onclick="logout(); return false;">log out</a></p>

    <p id="errorMessage" class="err"></p>
    <p id="loginCall"></p>
    <p id="ajaxCall"></p>
    <p id="postAjaxCall"></p>
    <p id="getSingleCall"></p>
    <p id="deleteSingleCall"></p>
    <p id="updateSingleCall"></p>
    <p id="identifyCall"></p>
    <p id="logViaFormCall"></p>
    <p id="logoutCall"></p>
    <input type="text" id="myTest" value="1" name="myTest" />
    </div>
   </body>
</html> 
```

和 init.js

```
$(document).ready(function () {
    document.addEventListener("deviceready", onDeviceReady, false);
    jQuery.support.cors = true; //Cross-Origin Resource Sharing
});

// phonegap is initialised
function onDeviceReady() {
    $("#welcomeMsg").append("...Ready");
}

function showAlert(msg) {
    navigator.notification.alert(
                    msg, // message
                    alertDismissed, // callback
                    'Alert', // title
                    'Done'  // buttonName
                    );
}

function showError(error, otherInfo) {
    var element = document.getElementById('errorMessage');
    element.innerHTML = "Errors: " + error.Message + "<br>" + (otherInfo ? otherInfo : "");
}

function getAjax() {
    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/Service1/',
        type: 'GET',
        //headers:
        beforeSend: function (xhr) {
            //xhr.overrideMimeType('text/plain; charset=x-user-defined');
        },
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: '{ "Idi":5, "Type": "mike" }'
    })
    .done(function (data) {
        var element = document.getElementById('ajaxCall');
        element.innerHTML = JSON.stringify(data, null, "\t");
    })
     .fail(function (xhr, status, error) {
         showError(error);
     })
     .always(function () { showAlert("complete"); });
 }

function postAjax(parameters) {
    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/Service1/',
        type: 'POST',
        //headers:
        //beforeSend: function (xhr) {
        //},
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: '{ "Id":5, "StringValue": "jerry 22" }'
    })
    .done(function (data) {
        var element = document.getElementById('postAjaxCall');
        element.innerHTML = JSON.stringify(data, null, "\t");
    })
     .fail(function (xhr, status, error) { showError(error); })
     .always(function () { showAlert("complete"); });
}

function login() {
    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/login/',
        type: 'POST',
        //headers:
        //beforeSend: function (xhr) {
        //},
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: '{ "Username":"test", "Password": "test" }'
    })
    .done(function (data) {
        var element = document.getElementById('loginCall');
        element.innerHTML = "Login Succesfull ? " + data;
    })
    .fail(function (xhr, status, error) { showError(error); })
    .always(function () { showAlert("complete"); });
}

function logout() {
    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/login/logout',
        type: 'POST',
        //headers:
        //beforeSend: function (xhr) {
        //},
        dataType: 'json',
        contentType: 'application/json; charset=utf-8'
    })
    .done(function (data) {
        var element = document.getElementById('logoutCall');
        element.innerHTML = "Login Out Succesfull ? " + data;
    })
    .fail(function (xhr, status, error) { showError(error); })
    .always(function () { showAlert("complete"); });
}

function getSingle() {
    var longcentre = "3.355";
    var latcentre = "6.602";
    var locname = "hotel";
    var searchrad = "10";

    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/Service1/?lat1='+latcentre+'&long1='+longcentre+'&srad='+searchrad+'&lname='+locname+'',
        //   url: 'http://10.0.2.2/estatewcf/Service1/?lat1=6.602&long1=3.355&srad=2.5&lname=bank',
        type: 'GET',
        //headers:
        beforeSend: function (xhr) {
            //xhr.overrideMimeType('text/plain; charset=x-user-defined');
        },
        dataType: 'json',
        contentType: 'application/json; charset=utf-8'
    })
    .done(function (data) {
        var element = document.getElementById('getSingleCall');
        element.innerHTML = JSON.stringify(data, null, "\t");
    })
    .fail(function (xhr, status, error) { showError(error); })
    .always(function () { showAlert("complete"); });
}

function deleteSingle(parameters) {

    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/Service1/88',
        type: 'DELETE',
        //headers:
        beforeSend: function (xhr) {
            //xhr.overrideMimeType('text/plain; charset=x-user-defined');
        },
        dataType: 'json',
        contentType: 'application/json; charset=utf-8'
    })
    .done(function (data) {
        var element = document.getElementById('deleteSingleCall');
        element.innerHTML = JSON.stringify(data, null, "\t");
    })
     .fail(function (xhr, status, error) { showError(error); })
     .always(function () { showAlert("complete"); });
}

function updateSingle(parameters) {
    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/Service1/99',
        type: 'PUT',
        //headers:
        beforeSend: function (xhr) {
            //xhr.overrideMimeType('text/plain; charset=x-user-defined');
        },
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: '{ "Id":99, "StringValue": "JERRY 22 " }'
    })
    .done(function (data) {
        var element = document.getElementById('updateSingleCall');
        element.innerHTML = JSON.stringify(data, null, "\t");
    })
    .fail(function (xhr, status, error) { showError(error); })
    .always(function () { showAlert("complete"); });
}

function identify(parameters) {
    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/login/identify',
        type: 'GET',
        dataType: 'json',
        contentType: 'application/json; charset=utf-8'
    })
     .done(function (data) {
         var element = document.getElementById('identifyCall');
         element.innerHTML = JSON.stringify(data, null, "\t");
     })
      .fail(function (xhr, status, error) { showError(error); })
      .always(function () { showAlert("complete"); });
}

function postAjax1(parameters) {

    var id = "2";
    var mysearchradius = "ope";

    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/Service1/',
        type: 'POST',
        //headers:
        //beforeSend: function (xhr) {
        //},
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: '{ "IDn":"' + id + '","type1":"' + mysearchradius + '" }'
    })
    .done(function (data) {
        var element = document.getElementById('postAjaxCall');
        element.innerHTML = JSON.stringify(data, null, "\t");
    })
     .fail(function (xhr, status, error) { showError(error); })
     .always(function () { showAlert("complete"); });
}

function logViaForm() {
    var jqxhr = $.ajax({
        url: 'http://10.0.2.2/estatewcf/login.aspx',
        type: 'GET',
        dataType: 'html'
    })
                .done(function (data) {
                    var eventVal = $(data).find('#__EVENTVALIDATION').attr('value');
                    var viewState = $(data).find('#__VIEWSTATE').attr('value');
                    //build post data
                    var postData = { __VIEWSTATE: viewState, __EVENTVALIDATION: eventVal, UserName: "test1", Password: "test2", LoginButton: "Log In" };

                    var jqxhr1 = $.ajax({
                        url: 'http://10.0.2.2/estatewcf/login.aspx',
                        type: 'POST',
                        dataType: 'html',
                        contentType: 'application/x-www-form-urlencoded; charset=utf-8',
                        data: postData
                    })
                    .done(function (data, status, jqxhr1) {
                        //this works but we will get an error dues to the redirect to the home.aspx
                        //TODO: need to handle that
                        var element = document.getElementById('logViaFormCall');
                        element.innerHTML = "Login Succesfull ! " + jqxhr1.status;
                    })
                     .fail(function (xhr, status, error) {
                         showError(error, "TODO: Works but need to handle redirect!!");

                         //but it really works!
                         var element = document.getElementById('logViaFormCall');
                         element.innerHTML = "Login Succesfull ! Verify that Authenticated AJAX calls work!";
                     })
                     .always(function () { showAlert("complete login"); });
                })
                .fail(function (xhr, status, error) { showError(error); })
                .always(function () { showAlert("complete"); });
} 
```

科尔多瓦.xml

```
<cordova>
    <!--  
    access elements control the Android whitelist.  
    Domains are assumed blocked unless set otherwise
     -->

    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->

    <!-- <access origin="https://maps.googleapis.com/maps/api/js?key=AIzaSyDD353fOPh-KBUQ-2ekPCg75uxXRn0D9Tk&sensor=false" /> allow any secure requests to example.com -->
    <!-- <access origin="https://10.0.2.2*" subdomains="true" /> such as above, but including subdomains, such as www -->
    <!-- <access origin="*."/> Allow all domains, suggested development use only -->

    <log level="DEBUG"/>
    <preference name="classicRender" value="true" />
</cordova 
```

正如我之前所说，我已经在 vs2010 服务器和 iis7 本地测试了 wcf 服务，它似乎运行良好，但我无法让它在 android 中运行。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:54:08.580

我发现除了取消注释已注释的白名单部分（即转换）之外，此代码并没有错：

```
<!-- <access origin="https://10.0.2.2*" subdomains="true" /> such as above, but including subdomains, such as www --> to

<access origin="https://10.0.2.2*" subdomains="true" /> 
```

这解决了它。

# magento - Magento：升级脚本在核心安装完成之前运行

> ID：15637708
> 
> 赞同：0
> 
> 时间：2013-03-26T13:00:06.890
> 
> 标签：magento, deployment, automation, installation, magento-1.7

我正在致力于自动化 Magento（1.7.0.2 社区）商店的部署。为此，我有一个包含完整代码库的 Git 存储库，包括所有已安装的模块。

`install.php`我在部署时针对空数据库运行基于命令行的安装程序 ( )。但显然，模块的 SQL 更新脚本在安装程序完全完成之前正在运行，这会导致问题：

有一个（自定义）脚本可以创建一个新的（adminhtml）用户角色，而且这个角色似乎是在 Magento 自己的`Administrators`角色之前创建的。这还不错，但是最初的管理员用户是作为我们*自定义*角色的一部分创建的——而不是管理员！`parent_id = 1`（我怀疑安装程序只是在创建用户时使用类似的东西，`1`通常是管理员组，但在这种情况下，它是我们的自定义组。）

所以，我的问题是：如何在安装程序运行时不执行升级脚本（并让它在第一页加载时运行），或者告诉安装程序仅*在*初始用户和角色设置完成了吗？还是您看到完全不同的解决方案？

万一这很有用：这就是我们的升级脚本的基本功能：

```
<?php
$roleData = array(
        'role_name'   => 'My_Shiny_Role',
        'role_type'   => 'G',
);
$role = Mage::getModel('admin/role')->setData($roleData)->save();

$resources[0] = '__root__';
Mage::getModel("admin/rules")
    ->setRoleId($role->getId())
    ->setResources($resources)
    ->saveRel(); 
```

（它没有封装在一个类中，只是简单的 PHP。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:10:55.890

可能有一种“Magento 方式”可以禁用数据库更新功能的执行，但您可以通过以下方式在 SQL 中执行此操作：

```
UPDATE
core_resource
SET 
version = CONCAT('9.', version),
data_version = CONCAT('9.', data_version); 
```

然后重新启用它：

```
UPDATE
core_resource
SET 
version = SUBSTR(version, 3),
data_version = SUBSTR(data_version, 3); 
```

# sharepoint-2010 - 为什么我不能在没有本地 URL 的情况下创建 Sharepoint 项目？

> ID：15637709
> 
> 赞同：0
> 
> 时间：2013-03-26T13:00:09.843
> 
> 标签：sharepoint-2010

我正在尝试在 Sharepoint 2010 模板中创建 EventReceiver 项目，但 VS 总是要求我传递 Sharepoint 站点的有效本地 URL。如果没有 Sharepoint 站点，则不会创建项目。为什么？

如果我想创建项目并在没有本地测试的情况下直接在生产中使用它，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:10:57.107

这是 VS 开发对 sharepoint 的要求——您需要本地安装 sharepoint 基础服务器。它是免费下载的。

但是，如果您的问题更像是“为什么要这样做”，我不知道；）。您仍然可以部署沙盒服务器。

# c# - 从表中查找值并用数据填充的正确方法

> ID：15637711
> 
> 赞同：6
> 
> 时间：2013-03-26T13:00:13.307
> 
> 标签：c#, excel, data-structures, vlookup

我目前的项目基本上是将 Excel 电子表格转换为 Windows 应用程序。我使用表格和 vlookups 遇到了工作表的一部分。假设表格看起来像这样（完全像这样，只有每个季度都在底部添加了一行）：

![在此处输入图像描述](../Images/4cae67a3d2bac1fb024ac7ef5759b997.png)

我想模仿 C# 中的 vlookups，我可以想到几种不同的方法，但是我正在寻找“最好”的方法是什么。“最好”，我的意思是最容易编码和最可维护，我不是指速度，如果它在 10 秒内工作就足够了。这发生在将区域名称和 Yr/Qrt 作为字符串传入的方法中。使用这些，我应该使用哪些数据结构来存储表数据，以及如何用最少的代码来完成它？

**编辑**

我现在已经收到了我将从中提取这些数据的实际 excel 文件。任何有关如何仅使用 C# 获取“yearQtr”字段和 HRTC 字段的建议将不胜感激

**编辑**

刚刚发现他们运行这个应用程序的机器不会有excel。因此，上面显示的文件在读入应用程序之前必须更改为另一种格式（这将通过手动将 excel 中的文件保存为 csv 或 xml 或任何格式来处理。所以我想我的问题是如何获取上述数据来自 csv 或 xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:13:08.510

你可以这样做：

```
public class MyClass
{
    public List<string> columns;
} 
```

然后在表单中，您可以像这样进行查找：

```
List<MyClass> myValues;

public List<MyClass> LookUp(string value, int columnIndex)
{
    return this.myValues.Where(
                     input => input.columns[columnIndex] == value
                              ).ToList();     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:51:12.510

我目前正在使用此架构解决方案来满足我的数据需求。每次需要时，我都会创建一个新表（就像我在问题中所说，速度无关紧要）。该表仅适用于每个表的特定区域。如您所知，我还没有弄清楚 Excel 数据提取部分。

```
class Table
    {
        Dictionary<String, double> _regionTimeValues;
        String _region;

        public Table(String region)
        {
            _regionTimeValues = new Dictionary<string, double>();
            _region = region;
            suckInValues();
        }

        private void suckInValues()
        {
            //Go find the File, get the appropriate Values
            //for each value found
        }

        internal double locateRelevantValue(string yearQuarter)
        {
            double locatedValue = 0.0;
            _regionTimeValues.TryGetValue(yearQuarter,out locatedValue);
            return locatedValue;

        }
    } 
```

# google-chrome - 在谷歌浏览器中单击文本输入时显示虚拟键盘（Windows 7 使用触摸显示器）

> ID：15637712
> 
> 赞同：4
> 
> 时间：2013-03-26T13:00:14.550
> 
> 标签：google-chrome, google-chrome-extension

我尝试过的每个浏览器都具有以下功能：当您单击文本输入字段时，虚拟键盘符号会显示在文本输入字段下方（在 Windows 7 中使用触摸屏时）。除 chrome 外的所有浏览器。任何人都知道为什么并有可能的解决方案？（下图来自 Internet Explorer）

我想使用仅适用于 chrome 的触摸手势测试原型，这就是为什么我想单独使用该浏览器和该浏览器的原因。=) ![在此处输入图像描述](../Images/bcea2b324457f7dcf155ebd87ad99340.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-17T10:51:44.003

Chrome 的最佳扩展是[Google 输入工具](https://chrome.google.com/webstore/detail/google-input-tools/mclkkofklkfljcocdinagocijmpgbhab)（由 google 制作）

* * *

![在此处输入图像描述](../Images/261fe3c65e9142bea55a1e66b8022df5.png)

* * *

![在此处输入图像描述](../Images/2cb550c73aaf6f414d4264e8275c4126.png)

* * *

![在此处输入图像描述](../Images/d5b194367752750b15f4f0a4d6e205ae.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:17:23.090

[使用此程序热虚拟键盘http://www.youtube.com/watch?v=vcYEFk6_5GQ](http://www.youtube.com/watch?v=vcYEFk6_5GQ)找到了我对问题的首选解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T08:06:33.627

我目前在 kiosk 模式下使用[这个 Chrome 扩展程序](https://chrome.google.com/webstore/detail/chrome-virtual-keyboard/pflmllfnnabikmfkkaddkoolinlfninn?hl=en)在聚焦输入时显示虚拟键盘。这是我发现的“不那么糟糕”。我也在使用[这个](https://chrome.google.com/webstore/detail/chrometouch/ncegfehgjifmmpnjaihnjpbpddjjebme)来启用触摸手势。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-03T12:11:57.733

有没有人在 iframe 中使用虚拟键盘？我测试的任何东西都不适用于 16.04。即使禁用了 chrome 网络安全

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T21:51:20.047

谷歌浏览器有一个扩展：

[https://chrome.google.com/webstore/detail/tippopper-extension/colobklhibekgdbeplpjchcgpagefagn](https://chrome.google.com/webstore/detail/tippopper-extension/colobklhibekgdbeplpjchcgpagefagn)

# arrays - 为什么 %s 被视为字符。为什么字符串作为指针的这种异常行为

> ID：15637714
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:00:21.633
> 
> 标签：arrays, pointers

```
int main()
{

 char *arr="hello";
 clrscr();
 printf("%s",arr);
 arr="";

  printf("and %s",arr+2);
 getch();

 return 0;
}! 
```

此代码的输出：-

你好，nd %s

在这里查看：-
[http://ideone.com/TJzUvp](http://ideone.com/TJzUvp)

// 为什么指针字符串会出现这种异常行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:04:04.087

您正在调用未定义的行为。

`arr+2`在设置之后引用`arr=""`是拾取任意一块内存（在这种情况下，一块你的字符串文字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:08:04.107

当你运行程序时，内存的布局使得常量字符串`and %s`紧跟在常量空字符串之后。内存看起来像这样：

```
.  .  .  \0  a  n  d  ' '  %  s \0  .  .  . 
```

当您将空字符串分配给 时`a`，您将`a`指向该`\0`字符。然后你计算a+2，结果指向`n`字符。

因此，当您将 a+2 解释为以 NUL 结尾的字符串时，您会得到`nd %s`.

当然，这是未定义的行为。许多编译器对常量进行布局，以便它们按照您使用它们的顺序排列：这里的空字符串位于`and %s`. 但是没有什么能强迫编译器这样做，如果它以不同的方式布置内存，你会得到不同的结果。该程序甚至可能崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:11:58.487

您没有创建指向字符串的指针> ..您在内存空间中创建了一个用于全局变量和常量的块..并使用指针指向该块..您无法更改该值，因为它是CONSTANT 内存空间的一部分...您正在做的是将指针重新分配到另一个内存位置并期望幸运地指向所需的位置..它不会总是发生

# html - HTML/CSS 结构以提供未来的设计更改和皮肤

> ID：15637715
> 
> 赞同：0
> 
> 时间：2013-03-26T13:00:24.343
> 
> 标签：html, css, user-controls, scaffolding, boilerplate

我当前的项目需要构建一个组件框架，这些组件将来会在独立品牌的网站上重复使用。这些组件被汇总到 ASP.NET 用户控件 ( `*.ascx`) 中。同一个组件将出现在多个品牌网站上，它们之间的唯一区别是内容和 CSS。我需要以这样一种方式构建 HTML，以便仅通过 CSS 为设计调整提供尽可能多的未来灵活性。这是一个例子。

假设我正在创建一个基本的标注组件来宣传某些东西。这对于语义和简单的 HTML 来说已经足够了：

```
<div class="callout">
  <h3>Headline</h3>
  <p>lorem ipsum...</p>
  <a href="#">Read more</a
</div> 
```

但是，根据未来的设计变化，那里可能没有足够的 HTML 元素来编写 CSS 来匹配设计。也许我需要为未来的 CSS 皮肤过于冗长和超载，像这样：

```
<div class="callout-outer">
  <div class="callout-inner">
    <div class="callout-top">
      <h3>Headline</h3>
    </div>
    <div class="callout-body">
      <p>lorem ipsum...</p>
    </div>
    <div class="callout-bottom">
      <a href="#">Read more</a>
    </div>
  </div>
</div> 
```

神圣的 divitis 蝙蝠侠！但实际上……第二个结构将为设计更改提供大量的未来 CSS 蒙皮灵活性，但在语义上它是垃圾。

我的问题：

*   是否有任何样板框架已经具有这样的结构（我认为 Twitter Bootstrap 不会提供这么多的灵活性）
*   这完全是一个可怕的想法吗？（主观的，我知道）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:08:26.043

这不是一个糟糕的主意 - 这是一个好主意，很多人最终得到的 HTML 看起来像这样：

我最初的想法是设计您的网站以使用[JQueryUI](http://jqueryui.com/)样式，这迫使您考虑您给出的第二个示例，因为需要动画或结构化以支持基于 CSS 文件的重新换肤的概念。

但是，我会仔细考虑 DIV 的命名约定，外部和内部实际上是非常明智的 :)

*   JQuery UI 网站还为设计人员提供了一种很好的方式来改变网站的外观和感觉，而无需自己制作 CSS（并且之后仍然可以使其工作）。

# sql - MSSQL 和 TSQL 有什么区别？

> ID：15637718
> 
> 赞同：25
> 
> 时间：2013-03-26T13:00:34.317
> 
> 标签：sql, sql-server, tsql, ms-access

MSSQL 和 T-SQL 经常作为可互换的同义词在 Web 上四处流传。

我知道 T-SQL 是许多 Microsoft 产品中使用的一种 SQL。MS-SQL 实际上是 Microsoft 拥有的 SQL 的另一种风格，还是只是 Microsoft 营销部门用来指代其服务器数据库解决方案的总称？

作为一个附带问题，MS Access 使用什么风格的 SQL（如果有的话）？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-26T13:04:46.777

`MS SQL`只是（完整）产品名​​称的简短版本`Microsoft SQL Server`。（类似于“MS Office”、“MS Windows”或“MS Access”）。

T-SQL 是*产品* `Microsoft SQL Server`使用的 SQL 方言 - 是“Transact-SQL”的缩写（感谢 Aaron 提醒我！）

我不会调用 Microsoft Access 使用 SQL 的方言。它是一种*类似于*SQL的查询语言

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T13:10:45.907

MS SQL 代表 (Microsoft SQL)。这是微软的产品，他们发布了 MS SQL 2005、2008 和最近发布的 2012。

T-SQL 代表事务 SQL。这是在sql数据库中编写表达式的语法。您可以在 MS SQL Server 数据库中编写 T-SQL 语句

[参考链接](http://www.microsoft.com/en-in/sqlserver/default.aspx)

# mysql - mysql选择表，其中行数取决于两列中的动态值

> ID：15637720
> 
> 赞同：3
> 
> 时间：2013-03-26T13:00:38.270
> 
> 标签：mysql

我有一个 MySQL 表：

```
id | style  | minsize_id | maxsize_id
-------------------------------------
1  | Jacket | 1          |  3
2  | Pant   | 2          |  4
3  | Hoody  | 0          |  3 
```

我想为minsize_id 和 maxsize_id 之间**的每个尺寸 id 显示一个额外的行（尺寸可以是 0 到 9 之间的任何整数），以及一个新列“size_id”，如下所示：**

```
id | style  | size_id
----------------------
1  | Jacket | 1
1  | Jacket | 2
1  | Jacket | 3
2  | Pant   | 2
2  | Pant   | 3
2  | Pant   | 4
3  | Hoody  | 0
3  | Hoody  | 1
3  | Hoody  | 2
3  | Hoody  | 3 
```

如何仅使用 MySQL 以这种方式显示表？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:06:14.293

实现此目的的一种方法是将此表连接到包含 10 行的派生表中，每个行都有一个。例如

```
SELECT

    yt.id,
    yt.style,
    sizes.size_id

FROM yourTable AS yt

INNER JOIN (
    SELECT 0 AS size_id
    UNION ALL
    SELECT 1 AS size_id
    UNION ALL
    SELECT 2 AS size_id
    UNION ALL
    SELECT 3 AS size_id
    UNION ALL
    SELECT 4 AS size_id
    UNION ALL
    SELECT 5 AS size_id
    UNION ALL
    SELECT 6 AS size_id
    UNION ALL
    SELECT 7 AS size_id
    UNION ALL
    SELECT 8 AS size_id
    UNION ALL
    SELECT 9 AS size_id
) AS sizes
ON sizes.size_id BETWEEN yt.minsize_id AND yt.maxsize_id 
```

但是，如果您有一个带有主键“size_id”的表“sizes”，那么您可以只 INNER JOIN 而不是这个派生表。显然用您想要的任何表名/别名替换`yourTable`和别名。`yt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:33:46.993

这是一种方法：

```
SELECT id, style, size_id
FROM origTable ot
JOIN 
(SELECT @rownum := @rownum + 1 AS size_id
 FROM origTable ot1
 CROSS JOIN origTable ot2,
 (SELECT @rownum := -1) r) s
ON ot.minsize_id <= s.size_id AND ot.maxsize_id >= s.size_id
ORDER BY id, style, size_id 
```

乍一看可能有点乱，但我会试着解释一下：

MySQL 没有`row_number`SQL Server 那样的功能，因此我使用[此处描述](https://stackoverflow.com/questions/1895110/row-number-in-mysql?rq=1#answer-1895127)的技术在子查询中人为地创建它。要创建大量行号，其中需要有很多行，因此您可以选择一个已经有很多行的不同表，或者像我所做的那样，只做一个`CROSS JOIN`原始表 -`CROSS JOIN`通常会结束有很多行。我知道有点黑客攻击，如果`origTable`变大可能会降低性能！

我们需要行号从零开始，并且子查询选择的内容预先增加 1，因此初始化`@rownum`to `-1`。

请参阅[SQL Fiddle 演示](http://sqlfiddle.com/#!2/a54494/4)。

# sql-server - 使用从 sql 函数获取的值时的 ORDER BY

> ID：15637725
> 
> 赞同：2
> 
> 时间：2013-03-26T13:00:57.897
> 
> 标签：sql-server, tsql, stored-procedures

我有这个用于创建过程的 SQL：

```
create procedure [dbo].[spGetProduct](@col_sort varchar(100), @dir_sort varchar(4), @filters nvarchar(max)) as
begin
declare @temp table (
        row_num int,
        product_id int,
        product_name nvarchar(255),
        produnit_name nvarchar(50)
    )

insert into @temp
    EXEC('select * from (select (ROW_NUMBER() OVER (ORDER BY '+@col_sort+' '+@dir_sort+')) row_num, product_id, product_name, dbo.fnGetUnitName(ing_produnit) produnit_name
     from dbo.Products
     where '+@filters+') as tmp)

select * from @temp
end 
```

信息：

`dir_sort`可以是`asc`或`desc`并且`col_sort`是包含列名之一的字符串。

在这种情况下，过滤器是无关紧要的。

什么时候`col_sort`有值`product_id`或者`product_name`它工作正常，但是当我用它调用它时`produnit_name`会抛出错误。

在这种情况下，如何按该列对数据进行排序？

编辑：

错误是：

> 列名“produnit_name”无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:08:58.150

那是因为`produnit_name`是派生列。虽然您可以在 ORDER BY 子句中使用派生列，但不能将其与`ROW_NUMBER OVER`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:09:23.437

您不能`OVER()`在同一范围内引用子句中的别名，因为别名是在评估子句*之后*定义的。`OVER()`这与您不能`GROUP BY alias`或不能说的原因相同`WHERE alias = 1`——在这些情况下，别名也尚未定义。

如果您不能使用连接而不是函数来派生单元名称，那么您将不得不再次嵌套，例如

```
insert into @temp
EXEC('select * from (select (ROW_NUMBER() OVER 
  (ORDER BY '+@col_sort+' '+@dir_sort+')) row_num, * FROM 
    (SELECT product_id, product_name, 
      dbo.fnGetUnitName(ing_produnit) produnit_name
      from dbo.Products
      where '+@filters+') AS x) as tmp'); 
```

# c - GPU 上的完全通用代码

> ID：15637726
> 
> 赞同：2
> 
> 时间：2013-03-26T13:00:58.927
> 
> 标签：c, programming-languages, opencl, gpgpu, computation-theory

一位客户找我做一个项目，该项目将涉及尝试使用 OpenCL 在 GPU 上运行完整的程序。

我对 CUDA 和低级机器架构有相当的了解。据我了解，GPU 代码没有调用堆栈，也没有指针，也没有任何非结构化的控制流机制，如 goto、异常或函数指针。对我来说，就语义而言，它类似于基本的 FORTRAN 方言。我知道从另一个 GPU 内核调用的 GPU 内核会像宏扩展一样内联，没有 CALL/RET 机制

据我了解，没有堆栈就不可能拥有词法范围的语言，OpenCL 编译的方言是 C 的一个非常平坦的子集，类似的 CUDA，虽然允许模板和东西，但只给了我们一个非常小的 C++ 子集

客户希望从 Javascript 转换为 C 到 LLVM，然后再转换为 OpenCL 字节码，或者以某种方式让完整的程序在 GPU 上运行，即使它们运行缓慢且没有并行性

我是否正确地说服客户他希望实现的目标在技术上是不可能实现的，并且没有真正的用处？

# c# - 如何创建特定的 XML 输出

> ID：15637727
> 
> 赞同：0
> 
> 时间：2013-03-26T13:01:01.977
> 
> 标签：c#, .net, xml

我正在使用`XmlWriter`该类来创建 XML 文档。

除了根元素之外，我能够根据需要生成文档。

我似乎无法创建具有所需属性的根元素，由于需要命名空间和前缀，这证明很麻烦。

我想要做的是产生如下输出：

```
<prx:rootname xmlns:prx="url1" xmlns:xsi="url2" xsi:schemaLocation="url3"> 
```

以上是所需的实际根元素的精简示例，例如，实际的 URL 非常冗长。

仅供参考，所有其他子元素都使用与根元素相同的前缀。

我可以使用这个类还是必须使用另一种方法来生成所需的 XML 输出？

# java - Spring 3项目JSP中登录用户的识别

> ID：15637729
> 
> 赞同：0
> 
> 时间：2013-03-26T13:01:08.943
> 
> 标签：java, spring, spring-security

我通过 Spring security 保护了项目。我需要确定刚刚访问 JSP 的用户是否已经登录。我已经阅读了一些文章、帖子和文档，并尝试使用以下代码实现它：

```
<sec:authorize ifAnyGranted="ROLE_ANONYMOUS">
            USER NOT LOGGED IN
    <td><a href="<c:url value="/login"/>">Login</a></td>
</sec:authorize>
<sec:authorize ifNotGranted="ROLE_ANONYMOUS">       
            USER LOGGED IN
    <td><a href="<c:url value="/j_spring_security_logout"/>">Logout</a></td>
</sec:authorize> 
```

尽管如此，我总是得到“用户登录”，我不知道为什么..这是我的安全上下文

```
<beans xmlns:security="http://www.springframework.org/schema/security"
   xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
             http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
             http://www.springframework.org/schema/security
             http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http pattern="/resources/**" security="none"/>
<security:http pattern="/login*" security="none" auto-config="true"/>
<security:http pattern="/denied" security="none"/>

<security:http auto-config="true" access-denied-page="/denied" servlet-api-provision="false">
    <security:intercept-url pattern="/login*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <security:intercept-url pattern="/edit/**" access="ROLE_EDIT"/>
    <security:intercept-url pattern="/admin/**" access="ROLE_ADMIN"/>
    <security:intercept-url pattern="/**" access="ROLE_USER"/>
    <security:form-login login-page="/login"  authentication-failure-url="/denied"
                         default-target-url="/"/>
    <security:logout  logout-success-url="/login" />
</security:http>

<security:authentication-manager>
    <security:authentication-provider>
        <security:user-service>
            <security:user name="adam" password="adampassword" authorities="ROLE_USER"/>
            <security:user name="jane" password="janepassword" authorities="ROLE_USER, ROLE_ADMIN"/>
            <security:user name="sue" password="suepassword" authorities="ROLE_USER, ROLE_EDIT"/>
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager>

</beans> 
```

我会很感激任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:14:58.020

如果任何人都可以访问页面，如您在安全上下文中设置的那样，您可以有条件地显示如下内容：

```
<sec:authorize var="loggedIn" access="isAuthenticated()"/> 
```

然后使用相当标准的jstl可以：

```
<c:choose>
  <c:when test="${loggedIn}">
    <td><a href="<c:url value="/j_spring_security_logout"/>">Logout</a></td> 
```

一点谷歌搜索告诉我[ifnotgranted 已被弃用](https://stackoverflow.com/questions/10953194/equivalent-to-the-deprecated-secauthorize-ifnotgranted-attribute)

# c++ - 您可以在 C++ 中前向声明命名空间别名吗？

> ID：15637739
> 
> 赞同：2
> 
> 时间：2013-03-26T13:01:39.027
> 
> 标签：c++, namespaces

我想在共享标头中设置一些通用别名，这样各个标头就不必单独声明。但我不想在此共享标头中包含目标命名空间的标头，只声明别名。这可能吗？

例如，我想要`namespace GE = Graphics::Engine;`不包括任何图形引擎标题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T13:03:55.360

如果您事先声明命名空间，则可以：

```
namespace Graphics {
    namespace Engine {}
}
namespace GE = Graphics::Engine; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T13:04:24.383

由于命名空间在声明后是开放的，所以只需...预先声明它们：

```
namespace Graphics{ namespace Engine{} }
namespace GE = Graphics::Engine; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T13:21:15.927

我建议反对它。它可以完成并且很简单，但是您实际上正在做的是强制您对标题的所有用户选择别名。

假设您使用这种技术构建了一个组件，而通用电气购买了该软件，突然之间他们得到了命名空间的任意冲突。您正在无缘无故地制造冲突。选择一个易于使用且尽可能独特的命名空间方案，然后遵循它。`GE::type`添加快捷方式只会使代码复杂化（和之间有什么区别`Graphics::Engine::type`？）

# amazon-web-services - AWS Autoscaling 没有克隆正确的实例

> ID：15637742
> 
> 赞同：1
> 
> 时间：2013-03-26T13:01:54.717
> 
> 标签：amazon-web-services, amazon-ec2, autoscaling, amazon-elb

我在 AWS 中有一个实例，我在其上设置了我的整个环境（我将其称为我的就绪实例）并且运行良好。然后，我创建了一个带有自动缩放策略的负载均衡器 (ELB)。

当我使用自动扩展策略（最少 2 个实例）创建负载均衡器时，出现了 2 个实例。然而，这些实例是空的。对于启动配置，我指定了我的就绪实例 AMI。这不应该告诉自动缩放策略要克隆哪个实例吗？在这种情况下，我的就绪实例不应该被克隆到它们中并且它们应该具有相同的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:22:56.473

实例不是基于正在运行的实例的克隆创建的，而只是存储在 AMI 中的磁盘映像。在这种情况下，您可能需要从正在运行的实例创建一个新的 AMI，并将该 AMI 用作您的自动扩展组的基础。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T09:14:27.827

曾几何时，即使我是我生命中的这个阶段。基本上它只会启动您在配置中指定的 AMI。如果您的 AMI 有旧代码，那么它将从过时的代码启动并为您的客户端提供服务。解决这个问题，您可以自动化代码管理过程，您所要做的就是使用用户数据脚本启动新的 ami，该脚本将在启动期间执行某些操作。使用用户数据脚本，您可以自动执行此过程。自动缩放配置也有接受用户脚本数据的规定。

# python - [gae] 重定向仅在第二次后成功

> ID：15637749
> 
> 赞同：0
> 
> 时间：2013-03-26T13:02:09.963
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在 GAE 上构建一个简单的 wiki，我想在将内容放入数据存储区时向处理程序添加一个正常的重定向。但它不起作用，直到我提交两次它重定向到内容页面而不是编辑页面本身。

```
Here is my handler code:
class BlogHandler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

    def render_str(self, template, **params):
        params['user'] = self.user
        t = jinja_env.get_template(template)
        return t.render(params)

    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

class WikiFront(BlogHandler):
    def get(self, url):
        #pages = WikiData.all()
        pages = db.GqlQuery("SELECT * FROM WikiData")
        found = False
        content = ""
        for page in pages:
            if page.url == url:
                found = True
                content = page.content
        if not found:
            self.redirect("/_edit" + url )
        else:
            self.render('wiki.html', content=content, url=url)

class EditPage(BlogHandler):

    def get(self,url):
        if self.user:
            self.render("wiki_edit.html")
        else:
            self.redirect("/login")

    def post(self,url):

        content = self.request.get('content')
        if  content:
            w = WikiData(parent = wiki_key(), content = content, url= url)
            w.put()
            self.redirect('/wiki' +  url )

    else:
        error = "Give us content plz"
        self.render("wiki_edit.html", content=content, error=error)

   # mapping stuff
   app = webapp2.WSGIApplication([
                           ('wiki' + PAGE_RE, WikiFront),
                           ('/_edit' + PAGE_RE, EditPage),
                           ],
                          debug=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:35:48.250

如果重定向是在此处的 Post 方法之后发生的，请在每次重定向之后添加一个 return 语句，因为它很可能会尝试在未完成重定向的情况下完成对该方法的评估。

# android - 果冻豆android的自定义通知布局

> ID：15637756
> 
> 赞同：1
> 
> 时间：2013-03-26T13:02:42.753
> 
> 标签：android, notifications, android-4.2-jelly-bean

我有一个自定义通知布局。其中我有一些按钮。我想将此播放图标更改为按下一次时暂停。如果再次按下，则将暂停更改为播放图标。实际上我想开发一个音乐应用程序。音乐控制按钮将在通知栏中，例如播放、暂停、下一个等。仅此而已

我已经完成了所有这些，除了“按下一次时将播放按钮更改为暂停。如果再次按下则将暂停更改为播放。” 按下通知栏后如何更改按钮图像。

任何人请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:12:27.327

我只是用更改的图像播放更新我的通知，以使用相同的通知 ID 暂停，然后它对我来说很好......

我只是跟着....

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating)

谢谢..

# c - 搜索完整的哈希表

> ID：15637757
> 
> 赞同：0
> 
> 时间：2013-03-26T13:02:45.280
> 
> 标签：c, search, hash

考虑以下代码片段：

```
#include<stdio.h>
#include<conio.h>
#define TABLESIZE 100

sturct record{
       int k;
       int r;
       }table[TABLESIZE];

int tcount=0;

int search_and_insert(int key,int rec){
    int i;
    i=h(key);
    while(table[i].k!=key && table[i].k!=NULL)
                                              i=rh(i);

    if(table[i].key==NULL){
                           table[i].k=key;
                           table[i].r=rec;
                           tcount++;
                           }
    return i;
    }

int h(int key){

    return key%1000;

    } 

int rh(int hkey){

    int k;
    if(hkey==99)
    return 0;
    return ((hkey+1)%1000);

    } 
```

如果表`while`已满，则循环可能是无限循环，为了解决这个问题，我可以引入如下`if`语句：

```
 if(tcount<TABLESIZE){
    while(table[i].k!=key && table[i].k!=NULL)
                                              i=rh(i);/*Rehash*/

    if(table[i].key==NULL){
                           table[i].k=key;
                           table[i].r=rec;
                           tcount++;
                         }
} 
```

但在我看来，这会引发另一个问题，即当表已满或搜索将提供错误结果时，我将无法搜索表中已存在的记录。

这个问题能解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:12:56.827

由于您正在执行简单的线性探测，因此您可以通过将当前哈希值与原始哈希值进行比较来轻松检查您是否围绕哈希表转了一圈。

```
int h0 = hash(key);
int h = h0;

do {
    if (found_in_bucket(key, h))
        return value_in_bucket(h);
    h = rehash(h);
} while (h != h0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:10:15.727

此类问题的典型解决方案是链接，即让您的哈希键指向链接结构：

```
struct h_value
{
  int rec;
  struct h_value *next;
}; 
```

插入时，如果您查找位置并且 rec 不是您要插入的内容，则查看所有 next 指针，如果您在列表中找不到它，则创建一个新的 h_value 并将其添加到末尾。在最坏的情况下，您将拥有一个单链表，但在典型情况下，您将在所有存储桶中平均分配您的值。

如果您提前知道您的值，您可能想要研究完美的散列，例如[gperf](http://www.gnu.org/software/gperf/)。

# ajax - django：从 ajax 调用视图调用浏览器的另存为

> ID：15637758
> 
> 赞同：0
> 
> 时间：2013-03-26T13:02:50.797
> 
> 标签：ajax, django, http

在我的 django 应用程序中，我既要渲染模板又要调用浏览器的另存为。我已经使用 ajax 实现了这一点——我有一个呈现模板的视图。在该模板中有一些 javascript，它使用 ajax 调用另一个视图。该视图返回应触发另存为的响应。但是当从 ajax 调用的视图返回时，它不会。如果我通过将 ajax 调用生成的 URL 剪切并粘贴到浏览器的地址栏中来调用相同的视图，则会调用另存为，但从 ajax 调用时则不会。我已经使用 pdb 从 python 端验证了视图已被调用并且正在返回正确的响应。我已经从浏览器端验证它收到了响应。

这是我返回的响应（从浏览器的调试窗口剪切和粘贴）：

```
HTTP/1.1 200 OK
Date: Tue, 26 Mar 2013 13:07:47 GMT
Server: Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/1.0.0f DAV/2 mod_wsgi/3.3 Python/2.6.7
Vary: Cookie
Content-Disposition: Attachment; filename=SF69.xml
Keep-Alive: timeout=5, max=98
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/xml 
```

知道为什么会发生这种情况吗？为什么从 ajax 与“正常”方式返回时，这种行为会有所不同？

# .net - 有没有办法使用 .NET 创建具有 OJPEG (TIFFTAG_COMPRESSION = 6) 压缩的多页 TIFF 文件？

> ID：15637760
> 
> 赞同：1
> 
> 时间：2013-03-26T13:02:53.187
> 
> 标签：.net, image-processing, tiff, libtiff.net

我需要从具有相同压缩方案的单页 tiff 中创建具有 OJPEG（旧式 JPEG）压缩的多页 TIFF 文件。我知道这种类型的压缩不再广泛使用，但我的客户处理 Microsoft Office Document Imaging (MODI) 应用程序，他们不能使用其他软件。[这篇文章http://support.microsoft.com/kb/885938](http://support.microsoft.com/kb/885938)中描述了一个已知错误- MODI 可以与 LZW 压缩的 tiff 一起使用，但这些文件太大。我尝试使用 LIbTiff.NET 库，但看起来它只支持解压缩，不支持压缩。你们有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:39:52.513

**20 多年来**（自 1992 年 6 月 3 日起），强烈反对使用 OJPEG 。这是有原因的：OJPEG 规范在很多方面都具有误导性，几乎每个压缩器都错误地执行了规范。

您可能想要更改您的要求。如果绝对没有其他方法，那么您可以尝试实现一些将给定文件粘合在一起的代码。

这应该不是**很难**（您需要将图像复制到一个文件中并相应地更新目录链）。无论如何，这可能是非常令人沮丧的体验，特别是如果您应该处理的文件来自不同的压缩器。

# html - 使用 CSS 从表格制作网格画廊

> ID：15637762
> 
> 赞同：0
> 
> 时间：2013-03-26T13:02:54.527
> 
> 标签：html, css, jsp, css-tables

我有一个用于添加一堆图像的数据表，其中 liveScroll 设置为 true。这将在 html 中创建一个表，并且每一行都有其类“ui-datatable-odd”或“ui-datatable-even”。我正在尝试使用 CSS 将表格显示为网格画廊，每行有两个图像。下面是我的 primeFaces 代码：

```
<h:form>
<p:dataTable id="campaignDataGrid" var="campaignImage" value="#{allCampaignImages}"
    scrollRows="9" scrollHeight="500" scrollable="true" liveScroll="true">

    <!-- <p:column>
        Description: <h:outputText value="#{campaignImage.description}" /><br />
        Location: <h:outputText value="#{campaignImage.location}" />
    </p:column> -->

    <p:column>
        <div class="cell">
            <p:graphicImage value="#{campaignImage.url}" />
        </div>
    </p:column>

</p:dataTable> 
```

我只是将它用于CSS：

```
.ui-datatable-odd {
    position: relative;
    display: block;
    left: 360px;
    bottom: 316px;
} 
```

这是生成的 HTML 代码：

```
<div id="j_idt40:campaignDataGrid" class="ui-datatable ui-widget ui-datatable-scrollable"><div class="ui-widget-header ui-datatable-scrollable-header"><div class="ui-datatable-scrollable-header-box"><table role="grid"><thead><tr role="row"><th id="j_idt40:campaignDataGrid:j_idt42" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th></tr></thead></table></div></div><div class="ui-datatable-scrollable-body" style="height:500px;"><table role="grid"><tbody id="j_idt40:campaignDataGrid_data" class="ui-datatable-data ui-widget-content"><tr data-ri="0" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:0:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/188" alt="" />
                    </div></div></td></tr><tr data-ri="1" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:1:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/182" alt="" />
                    </div></div></td></tr><tr data-ri="2" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:2:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/178" alt="" />
                    </div></div></td></tr><tr data-ri="3" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:3:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/173" alt="" />
                    </div></div></td></tr><tr data-ri="4" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:4:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/168" alt="" />
                    </div></div></td></tr><tr data-ri="5" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:5:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/163" alt="" />
                    </div></div></td></tr><tr data-ri="6" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:6:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/158" alt="" />
                    </div></div></td></tr><tr data-ri="7" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:7:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/153" alt="" />
                    </div></div></td></tr><tr data-ri="8" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">
                    <div class="cell"><img id="j_idt40:campaignDataGrid:8:j_idt44" src="http://localhost:8080/creatial/proxy/image/content/148" alt="" />
                    </div></div></td></tr></tbody></table></div><div class="ui-widget-header ui-datatable-scrollable-footer"><div class="ui-datatable-scrollable-header-box"><table role="grid"><tfoot></tfoot></table></div></div><input type="hidden" id="j_idt40:campaignDataGrid_scrollState" name="j_idt40:campaignDataGrid_scrollState" autocomplete="off" value="0,0" /></div><script id="j_idt40:campaignDataGrid_s" type="text/javascript">PrimeFaces.cw('DataTable','widget_j_idt40_campaignDataGrid',{id:'j_idt40:campaignDataGrid',scrollable:true,liveScroll:true,scrollStep:9,scrollLimit:38});</script><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="6974751656016471616:-1737664871390977073" autocomplete="off" /> 
```

这就是它的样子： ![在此处输入图像描述](../Images/5b2965617440c22140b2b3d01ba8b7e0.png)

因此，如您所见，问题在于当我定位奇数行时，即使其内容已被移动，这些行仍然存在。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:56:56.020

我玩弄了你的 HTML / CSS 并想出了这个：http: [//jsfiddle.net/dPKBR/](http://jsfiddle.net/dPKBR/)

我浮动了奇数和偶数 TR 并做了一个明确的：都在偶数 TR 上：

```
.ui-datatable-odd {
    width:100px;
    background:orange;
    float:left;
    position: relative;
    display: block;

}

.ui-datatable-even{
    clear:both;
    width:100px;
    background:lime;
    float:left;
    position: relative;
    display: block;
} 
```

它应该让你更接近解决你的问题。

# c++ - 网络 snmp 构建问题

> ID：15637765
> 
> 赞同：0
> 
> 时间：2013-03-26T13:02:56.143
> 
> 标签：c++, net-snmp

我正在尝试在 Windows 上构建一些相当旧的 SNMP 代码，因为我需要进行一些更改。它在 UNIX 上编译得很好。我已经安装了 net-snmp 5.6.1.1（根据这里的最新版本：http: [//sourceforge.net/projects/net-snmp/files/net-snmp/5.7.2/](http://sourceforge.net/projects/net-snmp/files/net-snmp/5.7.2/)）。但是，由于源引用了未导出到 netsnmp.dll 的 init_usm() 函数，因此出现链接错误。我想这以前有效。

有谁知道这个功能是否已从 SNMP 库中删除，如果有，是否存在替代方案？

# python - 特定时间范围的 grep 日志文件

> ID：15637766
> 
> 赞同：1
> 
> 时间：2013-03-26T13:03:02.537
> 
> 标签：python, bash, awk, grep

我需要从具有以下格式的日志文件中过滤消息：

```
2013-03-22T11:43:21.817078+01:00  INFO    log msg 1...
...
2013-03-22T11:44:32.817114+01:00  WARNING log msg 2...
...
2013-03-22T11:45:45.817777+01:00  INFO    log msg 3...
...
2013-03-22T11:46:59.547325+01:00  INFO    log msg 4...
... 
```

（其中的`...`意思是“更多消息”）

必须根据时间范围进行过滤。这是 bash 脚本的一部分，此时在代码中时间范围存储为`$start_time`和`$end_time`。例如：

```
start_time = "2013-03-22T11:45:20"
end_time   = "2013-03-22T11:45:50" 
```

请注意，或的***确切***值可能永远不会出现在日志文件中；*但是在时间范围内*会有几条消息是我正在寻找的。`$start_time``$end_time may` *`[$start_time, $end_time]`*

 *现在，我几乎确信我需要一个 Python 脚本来进行过滤，但我宁愿使用 grep（或 awk 或任何其他工具），因为它应该运行得更快（日志文件很大）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:10:36.553

根据您问题中的日志内容，我认为 awk oneliner 可能会有所帮助：

```
awk -F'.' -vs="$start_time" -ve="$end_time" '$1>s && $1<e' logfile 
```

注意：这是过滤内容，不包括开始和结束时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:07:28.837

```
$ start_time="2013-03-22T11:45:20"

$ end_time="2013-03-22T11:45:50"

$ awk -F'.' '$1>s&&$1<e' s=$start_time e=$end_time file
2013-03-22T11:45:45.817777+01:00  INFO    log msg 3... 
```*

# asp.net - 从下拉列表中选择后在gridview中显示数据

> ID：15637767
> 
> 赞同：0
> 
> 时间：2013-03-26T13:03:09.563
> 
> 标签：asp.net, sql-server, gridview

![在此处输入图像描述](../Images/9e35507464b23fa2e660b396ab8a5a0f.png)嗨，我只想在从下拉列表中选择值后在我的 gridview 中显示数据，并且在我按下搜索按钮时选择我的下拉列表后，可以在 gridview 中看到数据。我的 gridview 与我的数据库连接我该怎么做我的代码是这样的：

页面：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" 
        GridLines="None">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                ReadOnly="True" SortExpression="ID" />
            <asp:BoundField DataField="Portal" HeaderText="Portal" 
                SortExpression="Portal" />
            <asp:BoundField DataField="TID" HeaderText="TID" SortExpression="TID" />
            <asp:BoundField DataField="PNR" HeaderText="PNR" SortExpression="PNR" />
            <asp:BoundField DataField="TicketNumber" HeaderText="TicketNumber" 
                SortExpression="TicketNumber" />
            <asp:BoundField DataField="ESACCode" HeaderText="ESACCode" 
                SortExpression="ESACCode" />
            <asp:BoundField DataField="WaiverCode" HeaderText="WaiverCode" 
                SortExpression="WaiverCode" />
            <asp:BoundField DataField="Remarks" HeaderText="Remarks" 
                SortExpression="Remarks" />
            <asp:BoundField DataField="UnusedTicketAmount" HeaderText="UnusedTicketAmount" 
                SortExpression="UnusedTicketAmount" />
            <asp:BoundField DataField="ddlUnusedAmount" HeaderText="ddlUnusedAmount" 
                SortExpression="ddlUnusedAmount" />
            <asp:BoundField DataField="AirlinePenality" HeaderText="AirlinePenality" 
                SortExpression="AirlinePenality" />
            <asp:BoundField DataField="ddlAirlinePenality" HeaderText="ddlAirlinePenality" 
                SortExpression="ddlAirlinePenality" />
            <asp:BoundField DataField="NetRefundProcess" HeaderText="NetRefundProcess" 
                SortExpression="NetRefundProcess" />
            <asp:BoundField DataField="ddlNetRefundProcess" 
                HeaderText="ddlNetRefundProcess" SortExpression="ddlNetRefundProcess" />
            <asp:BoundField DataField="RefundableCommission" 
                HeaderText="RefundableCommission" SortExpression="RefundableCommission" />
            <asp:BoundField DataField="ddlRefundableCommission" 
                HeaderText="ddlRefundableCommission" SortExpression="ddlRefundableCommission" />
            <asp:BoundField DataField="CouponRefunded" HeaderText="CouponRefunded" 
                SortExpression="CouponRefunded" />
            <asp:BoundField DataField="RefundType" HeaderText="RefundType" 
                SortExpression="RefundType" />
            <asp:BoundField DataField="DateTime" HeaderText="DateTime" 
                SortExpression="DateTime" />
        </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:BartConnectionString %>" 
        SelectCommand="SELECT * FROM [Test]"></asp:SqlDataSource> 
```

aspx.cs 页面上的代码

```
public void GridViewBind()
{
    SqlCommand cmd = new SqlCommand("select * from Test where ID=" +     DropDownList1.SelectedValue + "", con);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataSet ds = new DataSet();
    da.Fill(ds, "Test");
    GridView1.DataSource = ds.Tables["Test"];
    GridView1.DataBind();
}
protected void btnSearch_Click(object sender, EventArgs e)
{
    this.GridViewBind();
} 
```

从我的下拉列表中选择值后错误：列名“TRAVELONG”无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:12:23.120

ID 是字符串吗？如果是这样，您需要 ID 字段的内引号：

```
 SqlCommand cmd = new SqlCommand("select * from Test where ID='" +     DropDownList1.SelectedValue + "'", con); 
```

否则，它可能会将所选值视为列...

# python - PYQT：如何捕获 python 解释器的输出并将其显示在 QEditText 中？

> ID：15637768
> 
> 赞同：2
> 
> 时间：2013-03-26T13:03:12.350
> 
> 标签：python, qt, pyqt, pyqt4, pyside

参考[这里](https://stackoverflow.com/questions/8356336/how-to-capture-output-of-pythons-interpreter-and-show-in-a-text-widget)的帖子。有人可以详细解释一下如何将打印语句的输出附加到 PYQT 中的 QEditext ... 我尝试了上面给出的代码，但它不完整，我得到了：

```
TypeError: connect() slot argument should be a callable or a signal, not 'QTextEdit' 
```

**在第一个文件中我写道：**

```
from PyQt4 import QtCore

class EmittingStream(QtCore.QObject):
    textWritten = QtCore.pyqtSignal(str)

    def write(self, text):
        self.textWritten.emit(str(text)) 
```

**在一个单独的文件中，我导入了第一个文件，它是这样的：**

```
from PyQt4 import QtGui, QtCore

import os, sys

class Window(QtGui.QWidget):   
    def __init__(self):
        QtGui.QWidget.__init__(self)

        self.et=QtGui.QTextEdit()

        layout = QtGui.QVBoxLayout(self)            
        layout.addWidget(self.et)

        sys.stdout = EmittingStream(textWritten=self.et)        

    def __del__(self):
        # Restore sys.stdout
        sys.stdout = sys.__stdout__

    def normalOutputWritten(self, text):
        """Append text to the QTextEdit."""
        # Maybe QTextEdit.append() works as well, but this is how I do it:
        cursor = self.et.textCursor()
        cursor.movePosition(QtGui.QTextCursor.End)
        cursor.insertText(text)
        self.et.setTextCursor(cursor)
        self.et.ensureCursorVisible()

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

我知道我的代码**不完整**......我应该添加什么信号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:11:46.403

看看这是否适合你：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyStream(QtCore.QObject):
    message = QtCore.pyqtSignal(str)
    def __init__(self, parent=None):
        super(MyStream, self).__init__(parent)

    def write(self, message):
        self.message.emit(str(message))

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonPrint = QtGui.QPushButton(self)
        self.pushButtonPrint.setText("Click Me!")
        self.pushButtonPrint.clicked.connect(self.on_pushButtonPrint_clicked)

        self.textEdit = QtGui.QTextEdit(self)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.pushButtonPrint)
        self.layoutVertical.addWidget(self.textEdit)

    @QtCore.pyqtSlot()
    def on_pushButtonPrint_clicked(self):
        print "Button Clicked!"

    @QtCore.pyqtSlot(str)
    def on_myStream_message(self, message):
        self.textEdit.moveCursor(QtGui.QTextCursor.End)
        self.textEdit.insertPlainText(message)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    myStream = MyStream()
    myStream.message.connect(main.on_myStream_message)

    sys.stdout = myStream        
    sys.exit(app.exec_()) 
```

# php - php ajax 调用相同的 php 脚本响应 null

> ID：15637769
> 
> 赞同：4
> 
> 时间：2013-03-26T13:03:14.013
> 
> 标签：php, jquery, ajax

我正在开发一个单页脚本，即 category.php 用于类别管理。

1.  这个脚本有一个输入按钮来调用 AJAX 调用。

> ```
> <input type="button" id="btn" /> 
> ```

1.  Jquery代码绑定点击事件并调用ajax。我想要json响应。

    ```
    $(document).ready(function(e) {
    $('#btn').click(function(e) {
            id=1;
            jQuery.ajax({
            type: 'post',
            url: 'category.php',
            success: function(data) {
                if(data.rstatus==1){
                alert(data.text);   
            }else
            alert(data);
        },
            data:{'id':id}

        }); 
        }); 
    }); 
    ```

2.  一个用于处理 AJAX 调用的 php 代码。

    ```
    if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) &&
      strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
        $jsonResponse=array('rstatus'=>1,'id'=>$_POST['id']);
        header("Content-type: application/json");   
        json_encode($jsonResponse);
        die(); 
     } 
    ```

问题：

此 ajax 调用无法在回调函数中产生正确的响应，并导致 firebug 控制台出错。类型错误：数据为空

在 FIREBUG 中的标头如下：

> `Response Headers`

```
> Cache-Control no-cache, must-revalidate Connection    Keep-Alive
> Content-Length    0 Content-Type  application/json Date   Tue, 26 Mar 2013
> 12:45:52 GMT Expires  Mon, 26 Jul 1997 05:00:00 GMT
> Keep-Alive    timeout=5, max=98 Last-Modified Tue, 26 Mar 2013
> 12:45:52GMT Pragma    no-cache Server Apache/2.4.3 (Win32) OpenSSL/1.0.1c
> PHP/5.4.7 X-Powered-By    PHP/5.4.7 
```

> `Request Headers`

```
> > Accept  */* Accept-Encoding gzip, deflate
>     > Accept-Language en-US,en;q=0.5 Content-Length   4
>     > Content-Type    application/x-www-form-urlencoded; charset=UTF-8
>     > Cookie  __gads=ID=39701a3d85dce702:T=1350383638:S=ALNI_MY_rHGVQ-qNxH4UGmbY_G-IuVcDkA;
>     > __utma=141011373.593047819.1350426838.1364292528.1364295112.314;PHPSESSID=1s73cho6ildjt80jtudt8nq0f5 Host   abc.com Referer http://www.abc.com/category.php
>     > User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101
>     > Firefox/19.0 X-Requested-With   XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T13:05:21.600

看起来您的响应内容是空的。你忘了一个`echo`.

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    $jsonResponse=array('rstatus'=>1,'id'=>$_POST['id']);
    header("Content-type: application/json"); 
    echo json_encode($jsonResponse); 
    die(); 
} 
```

如果你想响应一个json，你必须把它放在响应内容中。在 PHP 中，你只需要`echo`在响应内容中放入一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:29:02.457

不要使用 HTTP_X_REQUESTED_WITH - 在 jQuery 中几乎不工作尝试发送额外的 var，比如

数据：{'id':id, 'request':'xmlhttprequest'}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:07:05.297

这不起作用仅仅是因为`$_SERVER`不包含该信息。所有请求标头都没有真正存储在那里。看看`getallheaders`（[http://php.net/manual/en/function.getallheaders.php](http://php.net/manual/en/function.getallheaders.php)）

编辑：哦，你还需要回应回复。$_SERVER 可能包含您在这种情况下需要的信息，但它不可靠且不便携。我仍然建议您使用 getallheaders

# c# - 避免堆栈溢出异常

> ID：15637770
> 
> 赞同：1
> 
> 时间：2013-03-26T13:03:21.613
> 
> 标签：c#, asp.net, linq-to-entities, stack-overflow, infinite-loop

我在这部分代码中遇到了堆栈溢出异常，这显然是因为 Customer 对象调用了 CustomerBackgroundLevel 对象的列表，每个对象都创建一个新的客户对象。我正在尝试解决这个问题，任何帮助将不胜感激..

客户构造函数 -

```
public CustomerVO(Customer item)
    {
        CustomerID = item.CustomerID;
        CustomerName = item.CustomerName;
        ECNNumber = item.ECNNumber;

        CustomerBackgroundLevels = item.CustomerBackgroundLevels.Select(c => new CustomerBackgroundLevelVO(c)).ToList();
    } 
```

客户背景级别构造器 -

```
 public CustomerBackgroundLevelVO(CustomerBackgroundLevel item)
    {
        CustomerBackgroundLevelID = item.CustomerBackgroundLevelID;
        CustomerID = item.CustomerID;
        BackgroundLevelID = item.BackgroundLevelID;
        StartDate = item.StartDate;
        EndDate = item.EndDate;
        Customer = new CustomerVO(item.Customer);
        BackgroundLevel = new BackgroundLevelVO(item.BackgroundLevel);
    } 
```

客户获取方法 -

```
 public CustomerVO GetByID(int id)
    {
        var item = repository.AsQueryable().Where(x => x.CustomerID == id).FirstOrDefault();
        if (item == null)
            return null;

        return new CustomerVO(item);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:11:05.417

是的，正如您所说，在这样的循环中创建新对象不会导致任何好处。

与其在构造函​​数中创建所有这些包装器对象，不如按需包装它们？也就是说，当您执行一些需要 CustomerVO 对象的代码时，在该函数中创建 CustomerVO 对象，然后在函数结束时让它超出范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:08:14.317

你可以像这样解决你的循环：

```
public CustomerVO(Customer item)
{
    CustomerID = item.CustomerID;
    CustomerName = item.CustomerName;
    ECNNumber = item.ECNNumber;

    **CustomerBackgroundLevels = item.CustomerBackgroundLevels.Select(c => new CustomerBackgroundLevelVO(c,this)).ToList();
}

**public CustomerBackgroundLevelVO(CustomerBackgroundLevel item, CustomerVO vocustomer)
{
    CustomerBackgroundLevelID = item.CustomerBackgroundLevelID;
    CustomerID = item.CustomerID;
    BackgroundLevelID = item.BackgroundLevelID;
    StartDate = item.StartDate;
    EndDate = item.EndDate;
    **Customer = vocustomer;
    BackgroundLevel = new BackgroundLevelVO(item.BackgroundLevel);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:11:48.717

那是复制构造函数吗？如果是这样，您需要创建一个自定义构造函数来复制项目，而不是在新建对象并复制它的两种情况下都使用它。

```
return new CustomerVO(item); 
```

以上是不必要的，问题线是：

```
Customer = new CustomerVO(item.Customer); 
```

将上面的行更改为：

```
Customer = item.Customer; 
```

除非你有参考问题，这意味着你需要设计一个新的构造函数。

如果 item.Customer 对象不是 CustomerVO 对象，那么您需要将当前 CustomerVO 对象的引用传递给 CustomerBackgroundLevelVO 的构造函数。

# c# - 在另一个脚本中发送枚举值？

> ID：15637772
> 
> 赞同：0
> 
> 时间：2013-03-26T13:03:34.703
> 
> 标签：c#, enums, unity3d, sendmessage

我想在另一个脚本（在 C# 和 Unity3d 中）的函数中传递一个枚举值，如果我直接通过公共变量传递它们，我会得到一个“不一致的可访问性”错误（字段类型 'xx' 比字段'xx'），我没有找到如何解决这个问题。（下面的尝试#1）

所以我试图通过 SendMessage 函数传递一个列表（只能发送 1 个对象），但它现在说

> *“错误 CS0246：找不到类型或命名空间名称`List`1'。您是否缺少 using 指令或程序集引用？”*

你知道怎么做吗？

这是我的尝试：

```
private AState currentAState;//attempt #1 //with all my var "public" : same thing
//...
modelGOscript.currentA = currentAState;//#1
//...
modelGO.SendMessage ("animToPlay", new List<AState>(currentAState, newAState) );//#2 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:06:49.013

问题是您`AState`的定义为`private`and`modelGOscript`的属性可能定义为`public`,`protected`或`internal`。尝试给予`AState`限制较少的[访问修饰符](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:23:36.950

不一致的可访问性通常是指所涉及的类级别。

确保您使用的类、枚举等在可访问性方面正确排列。

```
public class XScript
public enum AState 
```

# c++ - 指针还是变量？

> ID：15637773
> 
> 赞同：-1
> 
> 时间：2013-03-26T13:03:42.817
> 
> 标签：c++, pointers, struct, base-class

最近在学习MFC，下面的代码让我很困惑：

```
 class CRect : public tagRECT
{
public:

// Constructors

// uninitialized rectangle
CRect();
// from left, top, right, and bottom
CRect(int l, int t, int r, int b);
// copy constructor
CRect(const RECT& srcRect);
// from a pointer to another rect
CRect(LPCRECT lpSrcRect);
// from a point and size
CRect(POINT point, SIZE size);
// from two points
CRect(POINT topLeft, POINT bottomR
... 
```

CRect 的基类是一个结构体！我以前从没学过这个。如果我打电话

> CWnd::GetClientRect(LPRECT lpRect);

我可以使用**rect**或**&rect** (CRect rect) 作为参数。太棒了！

我想知道一些关于 struct base 类的规则。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:05:31.087

在 C++ 中，类和结构是相同的，除了它们在继承和成员访问级别方面的默认行为。

C++ 类默认继承 = 私有成员变量和函数的默认访问级别 = 私有

C++ struct Default Inheritance = public 成员变量和函数的默认访问级别 = public

简而言之，是的，类可以从 C++ 中的结构继承。

# eclipse - 如何从 Eclipse 项目生成 Scaladocs

> ID：15637775
> 
> 赞同：3
> 
> 时间：2013-03-26T13:03:54.067
> 
> 标签：eclipse, scala, sbt, documentation-generation, scaladoc

我想从我的 Eclipse 项目开始生成 scaladocs。我不使用 SBT，但如果需要，我愿意将我的 eclipse 项目导入到 sbt。

如何从 Eclipse Scala 项目生成 Scaladocs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:51:13.477

据我所知，在不使用 SBT 或 Maven 的情况下，Eclipse 的 Scala 插件不支持直接方法。

作为一种解决方法，您可以转到*Run* -> *External Tools* -> *External Tools Configurations...*并将[scaladoc](http://www.scala-lang.org/docu/files/tools/scaladoc.html)工具设置为*Program*。这样，您将拥有生成 Scaladocs 的一键式解决方案。

# python - Python：新列表对现有列表中的重复元素进行分组

> ID：15637784
> 
> 赞同：2
> 
> 时间：2013-03-26T13:04:23.737
> 
> 标签：python, list, grouping

我有一份表格清单：

```
>>> my_list = ['BLA1', 'BLA2', 'BLA3', 'ELE1', 'ELE2', 'ELE3', 'PRI1', 'PRI2', 'NEA1', 'NEA2', 'MAU1', 'MAU2', 'MAU3'] 
```

我想创建一个新列表，将重复的元素分组到我的新列表中的列表中，所以最后我将拥有：

```
>>> new_list = [['BLA1', 'BLA2', 'BLA3'], ['ELE1', 'ELE2', 'ELE3'], ['PRI1', 'PRI2'], ['NEA1', 'NEA2'], ['MAU1', 'MAU2', 'MAU3']] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T13:06:56.473

使用[`itertools.groupby`](http://docs.python.org/3/library/itertools.html#itertools.groupby)：

```
import itertools

[list(group) for key, group in itertools.groupby(my_list, key=lambda v: v[:3])] 
```

这里需要该`key`参数来提取您想要分组的值的*一部分*；前 3 个字符。

结果：

```
>>> my_list = ['BLA1', 'BLA2', 'BLA3', 'ELE1', 'ELE2', 'ELE3', 'PRI1', 'PRI2', 'NEA1', 'NEA2', 'MAU1', 'MAU2', 'MAU3']
>>> [list(group) for key, group in itertools.groupby(my_list, key=lambda v: v[:3])]
[['BLA1', 'BLA2', 'BLA3'], ['ELE1', 'ELE2', 'ELE3'], ['PRI1', 'PRI2'], ['NEA1', 'NEA2'], ['MAU1', 'MAU2', 'MAU3']] 
```

`groupby`会将相等的连续键组合成 1 组。如果您有不相交的组（相同的值，但中间有其他值），它将为这些组创建单独的组：

```
>>> my_list = ['a1', 'a2', 'b1', 'b2', 'a3', 'a4']
>>> [list(group) for key, group in itertools.groupby(my_list)]
[['a1', 'a2'], ['b1', 'b2'], ['a3', 'a4']] 
```

如果这不是你想要的，你必须先排序`my_list`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:06:05.543

确保已分类并使用

```
itertools.groupy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:23:00.160

作为 groupby 的替代方案，您可以使用[`collections.Counter`](http://docs.python.org/2/library/collections.html#counter-objects)：

```
In [40]: from collections import Counter

In [41]: [ [k]*v for (k,v) in Counter(my_list).iteritems() ]
Out[41]: 
[['PRI', 'PRI'],
 ['NEA', 'NEA'],
 ['BLA', 'BLA', 'BLA'],
 ['MAU', 'MAU', 'MAU'],
 ['ELE', 'ELE', 'ELE']] 
```

与 groupby 不同，如果元素全部混乱，这将无需对列表进行排序。

# javascript - 多个条件未在 javascript 中触发

> ID：15637787
> 
> 赞同：0
> 
> 时间：2013-03-26T13:04:28.427
> 
> 标签：javascript

我正在编写javascript函数来检查aspx页面中的下拉值是否具有值“已完成”或“已取消”。如果是，则检查日期和时间是否不为空。但该功能永远不会触发。代码如下。

```
function EnableValidator() {
    var drp = document.getElementById('<%=drpcallstatus.ClientID %>');
    var txt = drp.options[drp.selectedIndex].text;
    var dt = document.getElementById('<%=txtcompletedate.ClientID %>');
    var ct = document.getElementById('<%=txtcomptime.ClientID %>');

    if ((txt == "Completed" | txt=="Cancelled") && (dt===null | ct===null))  {

            alert("Please Enter the Completed Date and Time");

            return false;

    } 
```

从 asp.net 按钮调用该函数

```
 <asp:Button ID="btnsubmit" runat="server" Text="Submit"  OnClientClick="return EnableValidator()"  onclick="btnsubmit_Click" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:07:18.957

这里的问题是您没有为您的`OR`.

```
if ((txt == "Completed" || txt=="Cancelled") && (dt===null || ct===null))  {
  ...
} 
```

对条件表达式中`||`的运算符使用双竖线字符。`OR`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:07:39.710

尝试 ：

```
if ((txt == "Completed" || txt=="Cancelled") && (dt===null || ct===null))  {
            alert("Please Enter the Completed Date and Time");
            return false;
} 
```

你必须使用`||`它才能工作。

# samsung-smart-tv - 在 Convergence 应用程序上上传视频

> ID：15637794
> 
> 赞同：0
> 
> 时间：2013-03-26T13:04:52.383
> 
> 标签：samsung-smart-tv

***大家好，我尝试开发一个可以像本指南一样控制智能电视的网络应用程序[http://samsungdforum.com/Guide/tut00024/index.html](http://samsungdforum.com/Guide/tut00024/index.html)我工作正常但现在我想从计算机上传视频然后它可以显示教程上显示的类似智能电视的图像有任何关于修改代码的想法或示例或建议，我可以做这可以帮助我我想修改融合教程的代码，而不是 sens 消息或将视频客户端应用程序发送到 smart电视应用***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:23:08.580

本教程介绍了发送文件。[你可以在这里](http://samsungdforum.com/Guide/ref00003/convergence_app_clienttotvappcomm.html#file-upload-methods)找到 API 参考。

发送视频文件并不是一件明智的事情，因为可以使用 Convergence API 发送的文件有 3MB 的限制。此 API 设计用于在电视和外部客户端之间发送消息，而不是文件。如果您想启动视频播放，请将视频 URL 从 Web 应用程序发送到电视，让电视自行下载视频。

# installshield-le - installshield 2012 LE 和 windows 服务，适用于 windows 2008 r2 64 位 VS.NEt 2012

> ID：15637807
> 
> 赞同：1
> 
> 时间：2013-03-26T13:05:39.983
> 
> 标签：installshield-le

我有由 VS.Net 2012 开发的 Windows 服务、Windows 7 32 位和 installshield 2012 LE 进行设置。在开发机器上一切顺利，安装完成，服务工作正常。在安装过程中将其上传到服务器（windows server 2008 R2 SP1 64bit）时，由于错误1001，安装停止并回滚。

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:12:37.320

你处境艰难。错误 1001 来自 InstallerClass，它使用了一种非常脆弱的技术。错误 1001 有许多不同的可能来源，从未处理的异常到月相的感觉。但是 InstallShield LE 并不真正支持以任何其他方式安装服务。

我能提供的最佳建议是使用 Windows Installer 支持来安装服务。但为了做到这一点，您将不得不使用不同的安装创建器。如果您想坚持使用 InstallShield，专业版有一个视图，您可以在其中配置 Windows Installer 对服务的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:20:03.590

您可以使用 Windows Installer XML (WiX) 创建安装 Windows 服务的合并模块，然后在 InstallShield LE 项目中使用该合并模块。看：

[使用 Windows Installer XML 增强 InstallShield - Windows 服务](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T16:37:48.403

Installshield LE 2012 不支持 64 位。

Installshield LE 有一个新的测试版，应该添加这个功能：http: [//blogs.msdn.com/b/visualstudio/archive/2013/08/15/what-s-new-in-visual-studio -2013-and-installshield-limited-edition.aspx](http://blogs.msdn.com/b/visualstudio/archive/2013/08/15/what-s-new-in-visual-studio-2013-and-installshield-limited-edition.aspx)

它现在也应该支持正确的 Windows Installer 来安装服务，即使在 LE 中（通过“3 配置目标系统”-> 服务“）。但是我还不能让那个位工作 - 也许有一些我错过了魔法设置。

您可以尝试使用此版本 - 如果您有幸通过适当的 Windows 安装程序服务使其正常工作，请告诉我！

# wpf - MVVM Light 多数据上下文

> ID：15637809
> 
> 赞同：0
> 
> 时间：2013-03-26T13:05:48.573
> 
> 标签：wpf, xaml, mvvm, mvvm-light

我是 MVMM Light 工具包的新手（注意，我在 .NET 3.5 上使用 Light）。到目前为止，我真的开始喜欢这种模式，除了两个挑战。

*   我想在我的应用程序中为某些类型的页面提供可重用的 XAML 模板。想想电影票亭。主要内容在中心，但几乎总是屏幕上某处的一个按钮，用于取消或返回。我希望有可重复使用的网格，当我创建一个新页面时，我基本上会导入该网格布局，而不必担心常见的位，可以只专注于我的部分。做一些研究，我觉得`<ContentPresenter>`可能是去这里的方式，但它对我来说仍然很陌生。

*   假设我在第一个挑战中取得成功，我认为这些常见项目（例如`Cancel`按钮）的数据上下文将位于该页面的 ViewModel 之外的其他位置，以避免大量重复代码。那是采用单个控件并从 XAML 引用不同视图模型的最佳方法吗？就像是...

    `<Button ... DataContext={Binding CommonStuffVM, Source={StaticResource Locator}} />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:49:30.477

您可以使用`Templates`或`DataTemplates`创建一个可重用的模板来定义对象的外观。

例如，

```
<DataTemplate DataType="{x:Type local:MovieTicket}">
    <!-- Write the XAML for your Movie Ticket -->
</DataTemplate> 
```

你可以给你`DataTemplate`的 an以在or`x:Key`中专门引用它，或者将其省略，以便在 WPF 尝试绘制对象时使用它`ItemTemplate``ContentTemplate``MovieTicket`

```
<ItemsControl ItemsSource="{Binding MovieTickets}" />

<ContentControl Content="{Binding SelectedMovieTicket}" /> 
```

对于您的第二个问题，我认为这对于单个控件来说是个坏主意，尽管它是程序完整部分的常见做法。

使用 MVVM 时，您`ViewModels`是您的应用程序，而不是您的 UI。

如果您的窗口应该显示一个`Movies`供用户编辑的列表，并允许用户保存或取消他们的更改，那么您的 ViewModel 应该包含一个`ObservableCollection<Movie>`和包含一个`ICommand SaveCommand`和`ICommand CancelCommand`

你真的希望你的视图只反映你的视图模型，而不是让它们从整个视图模型层次结构中提取他们需要的数据。

根据您的问题，您可能对我的一篇关于[使用 MVVM 导航](http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/)的博客文章感兴趣，该文章使用的代码与您所询问的非常相似。它展示了如何使用隐式更改 UI `DataTemplates`，并包含一个完整的代码示例，您可以下载并查看以更好地了解 MVVM 架构。

# visual-studio - 单击 .sql 文件后缺少“连接”选项

> ID：15637811
> 
> 赞同：1
> 
> 时间：2013-03-26T13:05:52.103
> 
> 标签：visual-studio, sql-server-2012

我安装了 SQL Server 2012，但在文件上下文菜单中不再看到`Connection`,`Execute SQL`和其他选项。`.sql`此外，.sql 文件具有 .txt 文件等图标。我在这里想念什么？

截屏：![http://s21.postimg.org/47nzhdok7/sqlserver.jpg](../Images/9f415294a8bbe876b4caf47a508eec33.png)

截图中的解决方案来自本书：[Pro SQL Server 2012 BI Solutions](http://www.apress.com/downloadable/download/sample/sample_id/1289/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:43:54.190

双击`.SQL`文件并打开它。然后右键单击源将为您提供`Connection`和`Execute SQL`选项。

这与您在问题中提供的解决方案相同： ![在此处输入图像描述](../Images/8704eb5c2a33b205e4e479537cab26a2.png)

如果您错过了菜单`Transact-SQL Editor`下的`Data`选项，您可能错过了 SQL 文件关联。

按照建议执行此操作[`here`](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/27ef7c94-4410-4925-ab22-3fec475b1885)：

1.  在资源管理器窗口中加载**ISO**或**DVD VS2010**安装程序
2.  转到**WCU**文件夹
3.  转到**DAC**文件夹
4.  安装这些 MSI

    *   DACFramework_enu.msi
    *   DACProjectSystemSetup_enu.msi
    *   TSqlLanguageService_enu.msi

我认为另一种选择是安装[`SQL Server Data Tools`](http://msdn.microsoft.com/en-us/jj650014).

# excel - 决定它是否可以在 Excel 中打开的文件类型是什么？

> ID：15637813
> 
> 赞同：0
> 
> 时间：2013-03-26T13:06:00.250
> 
> 标签：excel, file, compatibility, dbf

例如，我可以在 Excel 中打开一个 .xls 文件或一个 .csv 文件，它会自动知道它是一个有效的文件类型，并且所有内容都与单元格相关联。

但是，这同样适用于作为数据库文件的 .DBF 文件。尽管它与 Excel 没有直接关系，但它仍然是一种“兼容”的文件类型，可以在 Excel 中干净地打开。

将其与在 Excel 中打开它不起作用或产生乱码的任意 .DAT 文件进行对比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:16:55.857

这是 Excel 的一个实现细节。它可能会考虑文件类型，它可能会查看文件的前几个字节，它可能取决于月相。这种行为随着时间的推移而改变，但从未被记录在案。

# doctrine-orm - 更新关联

> ID：15637816
> 
> 赞同：2
> 
> 时间：2013-03-26T13:06:11.890
> 
> 标签：doctrine-orm

我有两个具有多对多关系的实体（场景和步骤）。我需要保存场景中步骤的顺序，因此我添加了第三个实体，名为 ScenarioToStep，并带有 displayOrder 属性。

```
class ScenarioToStep
{
/**
 * @ORM\Id
 *
 * @ORM\ManyToOne(targetEntity="Hakisa\Bundle\GettingStartedBundle\Entity\Scenario", inversedBy="scenarioToStep")
 * @ORM\JoinColumn(name="scenario_id", referencedColumnName="id")
 *
 * @var Hakisa\Bundle\GettingStartedBundle\Entity\Scenario
 */
private $scenario;

/**
 * @ORM\Id
 *
 * @ORM\ManyToOne(targetEntity="Hakisa\Bundle\GettingStartedBundle\Entity\Step", inversedBy="stepToScenario")
 * @ORM\JoinColumn(name="step_id", referencedColumnName="id")
 *
 * @var Hakisa\Bundle\GettingStartedBundle\Entity\Step
 */
private $step;

/**
 * Order of the step in the scenario
 *
 * @ORM\Id
 *
 * @ORM\Column(type="integer")
 *
 * @var integer
 */
private $displayOrder; 
```

3 个属性构成主键，因此我可以在一个场景中多次执行步骤

我有一个 UI，我可以在其中通过拖放添加步骤、删除步骤或排序步骤。此 UI 向 PHP 发送一个数组，其中索引是位置，值是步骤的 id。

```
array(
    0 => 1,
    1 => 2,
    2 => 3,
    3 => 1,
    4 => 4
) 
```

我想更新我的场景实体以匹配这个新的排序。我首先尝试了类似的东西：

```
$scenario->getScenarioToStep()->clear();
foreach ($tabIds as $pos => $stepId) {
    $sts = new ScenarioToStep();
    $sts->setScenario($scenario)->setStep($step)->setOrder($pos);
    $scenario->getScenarioToStep()->add($sts);
} 
```

但我最终会出现重复的键错误

如果我做类似的事情，但不是实例化一个新场景，而是向实体管理器询问参考（代理），那么关联表总是空的

感谢任何对我应该如何执行保存有想法的人

# sql - 选择列包含来自子查询的任何结果的行

> ID：15637822
> 
> 赞同：1
> 
> 时间：2013-03-26T13:06:25.940
> 
> 标签：sql, sql-server-2008, tsql

如果有一个包含使用分隔符的连接数据列的表，即 11111_22222_33333（我知道这是不好的做法，但这是我必须使用的数据）

我需要编写一个查询，返回包含特定值 22222 的所有行，其中特定值是子查询的结果。

所以，我正在做的事情如下......

```
SELECT * FROM myTable WHERE myColumn IN (SELECT [Name] FROM subTable) 
```

这运行但不返回任何结果，因为它专门匹配 1111_2222_3333 到 2222。所以我需要的是一种使用 LIKE 或类似的方法

```
SELECT * FROM myTable WHERE myColumn LIKE (SELECT [NAME] FROM subTable) 
```

给出错误

```
Msg 512, Level 16, State 1, Line 1
Subquery returned more than 1 value. This is not permitted when the subquery follows 
=, !=, <, <=       , >, >= or when the subquery is used as an expression. 
```

请问这将如何实现？我正在使用Sql Server 2008 R2 开发，但是解决方案还需要兼容Server 2005

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:09:01.930

您的子查询返回多个值，并且 LIKE 不适用于子查询，您需要使用的是 EXISTS 这里试试这个

```
SELECT * FROM myTable a 
WHERE EXISTS  (SELECT 1 FROM subTable b
               WHERE a.myColumn LIKE '%' + b.[NAME] + '%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:10:08.423

```
SELECT 
    t1.* 
FROM myTable t1
join (
    SELECT distinct [Name] FROM subTable
) x
on t1.myColumn like '%' + x.[name] + '%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:10:50.603

您可以使用`JOIN`with`LIKE`子句来获得结果：

```
select *
from mytable t
inner join subtable s
   on t.mycolumn like '%'+s.name+'%' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9f6eb/1)

# grails - grails neo4j 配置不添加节点

> ID：15637823
> 
> 赞同：0
> 
> 时间：2013-03-26T13:06:29.623
> 
> 标签：grails, neo4j

我使用此处的说明创建了应用程序：

[http://blog.armbruster-it.de/2009/10/example-neo4j-with-grails/](http://blog.armbruster-it.de/2009/10/example-neo4j-with-grails/)

然后我添加到`DataSource.groovy`这个：

```
grails {
   neo4j {
      type = "embedded"
      location = "/usr/local/Cellar/neo4j/"
      params = []
   }
} 
```

我的 graph.db 所在的位置`/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db`

什么应该进入这个位置。我正在添加新的 ndo，但是当我运行时

```
start n=node(*) return n; 
```

在外壳中没有新数据。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:07:56.993

我相信你的位置应该指向

```
/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db 
```

因为那是您的 neo4j 数据库所在的位置

# python - AppEngine MapReduce 中的 processing_rate 是什么意思？

> ID：15637824
> 
> 赞同：0
> 
> 时间：2013-03-26T13:06:32.110
> 
> 标签：python, google-app-engine, mapreduce

以下来自源代码中的文档：mapreduce\handlers.py(570)： processing_rate：每秒总共要处理多少个项目。

这是否会限制在一秒钟内提供给所有映射器的输入元素的总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:32:31.610

它应该是。 [https://developers.google.com/appengine/docs/python/dataprocessing/overview?hl=zh-tw](https://developers.google.com/appengine/docs/python/dataprocessing/overview?hl=zh-tw)

> 处理速率限制以减慢您的映射器功能并腾出工作空间，帮助您避免超出资源配额

# python - 谁和谁在 django 模型上

> ID：15637826
> 
> 赞同：1
> 
> 时间：2013-03-26T13:06:34.263
> 
> 标签：python, django, django-models, django-views

我试图弄清楚人们将如何写评论以及如何存储它是为谁写的和谁写的。我想看看为一个人 UserProfile.Comments 写的评论...

任何人都可以帮助我吗？

*模型.PY*

 *```
class UserProfile(models.Model):
    comments =  models.ForeignKey("Comments", null=True, blank=True)

class Comments(models.Model):
    comment = models.CharField(max_length=500, null=False, blank=False)
    who_wrote = models.ForeignKey(User) 
```* 

*VIEW.PY（我在这里卡住了）*

```
def writecomment(request, username):
    if request.method == 'POST': 
        form = CommentForm(request.POST) 
        if form.is_valid():
            form.save(commit=False)
            form.user = request.user
            form.user_id = get_object_or_404(User, username=username).id
            #frm = form.save()

            usr = get_object_or_404(UserProfile, user = request.user)
            usr.Comments = form #append??
            usr.save()

   else:
        form = CommentForm(request.POST) 

    return render_to_response("writecomment.html", {"form": form}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:14:02.600

我相信您的模型可以稍微不同地创建以使这项任务更容易。只是有些事情要考虑。

1.  每个用户可以有多个评论吗？`UserProfile`有一个字段叫做`comments`建议它可能是。这可能更好地建模为多对多字段。

2.  应该`UserProfile`链接到用户吗？

3.  似乎`Comments`可能需要支持 2 个用户，一个来自用户和一个到用户。

* * *

```
class UserProfile(models.Model):
     user = models.OneToOneField(User) # each user can have exactly 1 profile
     comments = models.ManyToManyField(Comment) # each user can have mutilple comments

class Comment(models.Model):
    text = models.CharField(max_length=500, null=False, blank=False)
    to = # shoudl this be foreign key or many to many?
    # can a comment reference multiple users or just one user or no user? 
```

通过上述更改，向用户或用户获取评论变得更加容易

# spss - SPSS中的差异分析

> ID：15637827
> 
> 赞同：0
> 
> 时间：2013-03-26T13:06:35.703
> 
> 标签：spss

我试图比较 1993 年 EITC 制度改革前后的“单亲妈妈一胎”和“单亲妈妈一胎以上”两组的均值。

通过SPSS中的程序T检验，我可以得到改革前后的组间差异。但是我如何得到差异的差异（我仍然想要标准错误）？

我为 STATA 和 R 找到了这些方法（[http://thetarzan.wordpress.com/2011/06/20/differences-in-differences-estimation-in-r-and-stata/](http://thetarzan.wordpress.com/2011/06/20/differences-in-differences-estimation-in-r-and-stata/)），但我似乎不能在 SPSS 中计算出来。

希望有人能够提供帮助。

一切顺利，安妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T09:45:41.950

一般线性模型，我将其视为“ANOVA”模型。

所以使用SPSS的Analyze菜单中的相关模块。

在 T 检验之后，您需要检查每个组的 sigma 相等性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T17:36:18.263

这可以通过 GENLIN 程序来完成。这是我生成的一些随机数据以显示如何：

```
data list list /after oneChild value.
begin data.
0   1   12
0   1   12
0   1   11
0   1   13
0   1   11
1   1   10
1   1   9
1   1   8
1   1   9
1   1   7
0   0   16
0   0   16
0   0   18
0   0   15
0   0   17
1   0   6
1   0   6
1   0   5
1   0   5
1   0   4
end data.
dataset name exampleData WINDOW=front.
EXECUTE.

value labels after 0 'before' 1 'after'.
value labels oneChild 0 '>1 child' 1 '1 child'. 
```

组的平均值（按顺序，在截断为整数之前）分别为 17、6、12 和 9。所以我们的 GENLIN 程序应该生成值 -11（>1 个孩子组中的前后差异）、-5（1 个孩子 - >1 个孩子的差异）和 8（前后差异的孩子差异） ）。

为了绘制数据，您可以看到我们的预期：

```
* Chart Builder.
GGRAPH
  /GRAPHDATASET NAME="graphdataset" VARIABLES=after value oneChild MISSING=LISTWISE REPORTMISSING=NO    
  /GRAPHSPEC SOURCE=INLINE.
BEGIN GPL
  SOURCE: s=userSource(id("graphdataset"))
  DATA: after=col(source(s), name("after"), unit.category())
  DATA: value=col(source(s), name("value"))
  DATA: oneChild=col(source(s), name("oneChild"), unit.category())
  GUIDE: axis(dim(2), label("value"))
  GUIDE: legend(aesthetic(aesthetic.color.interior), label(""))
  SCALE: linear(dim(2), include(0))
  ELEMENT: line(position(smooth.linear(after*value)), color.interior(oneChild))
  ELEMENT: point.dodge.symmetric(position(after*value), color.interior(oneChild))
END GPL. 
```

现在，对于 GENLIN：

```
* Generalized Linear Models.
GENLIN value BY after oneChild (ORDER=DESCENDING)
  /MODEL after oneChild after*oneChild INTERCEPT=YES
 DISTRIBUTION=NORMAL LINK=IDENTITY
  /CRITERIA SCALE=MLE COVB=MODEL PCONVERGE=1E-006(ABSOLUTE) SINGULAR=1E-012 ANALYSISTYPE=3(WALD) 
    CILEVEL=95 CITYPE=WALD LIKELIHOOD=FULL
  /MISSING CLASSMISSING=EXCLUDE
  /PRINT CPS DESCRIPTIVES MODELINFO FIT SUMMARY SOLUTION. 
```

结果表显示了我们所期望的。

*   > 1 个儿童组在之后与之前相比降低了 12.3 - 10.1。这个 95% CI 包含 11 的“真实”值

*   >1 个孩子和 1 个孩子的前差是 5.7 - 3.5，包含 5 的真实值

*   差异之差为 9.6 - 6.4，包含 (17-6) - (12-9) = 8 的实际值

标准。错误、p 值和其他假设检验值也都会报告。希望有帮助。

编辑：这可以通过自己计算交互项并进行简单的线性回归来用不太“复杂”的语法来完成：

```
compute interaction = after*onechild.
execute.

REGRESSION
  /MISSING LISTWISE
  /STATISTICS COEFF OUTS CI(95) R ANOVA
  /CRITERIA=PIN(.05) POUT(.10)
  /NOORIGIN 
  /DEPENDENT value
  /METHOD=ENTER after oneChild interaction. 
```

请注意，生成的标准误差和置信区间实际上与以前的方法不同。我对 SPSS 的 GENLIN 和 REGRESSION 程序知之甚少，无法告诉你为什么会这样。在这个人为的示例中，您从数据中得出的结论将大致相同。在现实生活中，数据不可能这么干净，所以我不知道哪种方法“更好”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T13:11:44.430

关于上面的第一个答案：

```
* Note that GENLIN uses maximum likelihood estimation (MLE) whereas REGRESSION
* uses ordinary least squares (OLS).  Therefore, GENLIN reports z- and Chi-square tests
* where REGRESSION reports t- and F-tests.  Rather than using GENLIN, use UNIANOVA
* to get the same results as REGRESSION, but without the need to compute your own
* product term.

UNIANOVA value BY after oneChild
  /PLOT=PROFILE(after*oneChild) 
  /PLOT=PROFILE(oneChild*after) 
  /PRINT PARAMETER
  /EMMEANS=TABLES(after*oneChild) COMPARE(after)
  /EMMEANS=TABLES(after*oneChild) COMPARE(oneChild)
  /DESIGN=after oneChild after*oneChild. 
```

HTH。

# nginx - 在 Nginx 中，worker_rlimit_nofile 是针对整个进程还是针对每个工作进程？

> ID：15637840
> 
> 赞同：1
> 
> 时间：2013-03-26T13:07:05.360
> 
> 标签：nginx

worker_rlimit_nofile 的描述如下：

> 指定此进程可以打开的最大文件描述符的值。

“这个进程”是指整个进程还是每个工作进程？

这让我很困惑。

**参考**： [http ://wiki.nginx.org/CoreModule](http://wiki.nginx.org/CoreModule)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-13T12:42:19.253

该指令`worker_rlimit_nofile`是为每个工作进程单独设置的。

*来自[nginx.com 的](https://www.nginx.com/resources/wiki/start/topics/examples/full/)*完整示例配置*：*

 *```
...
worker_processes 5;
worker_rlimit_nofile 8192;
events {
  worker_connections 4096;
}
... 
```*

# ms-access - 循环遍历数组并将数组发布到表

> ID：15637850
> 
> 赞同：0
> 
> 时间：2013-03-26T13:07:44.037
> 
> 标签：ms-access, vba

我是一个老 Foxpro 程序员，我曾经使用数组来发布变量字段。

我想要做的是我设计的新表中有 15 个日期字段。
在我的查询中，我有一个活动日期的个人记录。

我想将每个日期的 15 个不同日期编译为`Client_id`一个包含 15 个日期的记录，但我似乎无法将表数据作为数组引用。
我尝试了几种不同的方法来定义数组，但似乎没有任何效果。

这是我的代码。在我的表中，我有 15 个名为`Mail_date1`, `Mail_date2`,`Mail_date3`等的日期字段。
我首先尝试将它定义为一个数组，但不喜欢它；当我尝试引用结果表中的日期字段时，我的代码总是失败`rs2!mdate2 = memdate(intcounter)`

1.  如何将我的结果表输出字段作为数组引用？

2.  我是否必须放置一大堆 if 语句来加载我的结果？
    似乎很浪费......应该能够将它们作为数组加载。

我是一个新的 Access 2007 VBA 程序员。

```
Dim db As DAO.Database
Set db = CurrentDb
Dim rs1 As DAO.Recordset
Dim rs2 As DAO.Recordset

Dim FinTotal, intcounter As Integer
Dim FinMPU, FinVersion As String
Dim mail_date(1 To 15) As Date
Dim memdate(1 To 15) As Date
Dim mdate2 As String

Set rs1 = db.OpenRecordset( _
            "SELECT NewFile.MPU_ID,   " & _
            "       NewFile.MAIL_DATE," & _
            "       NewFile.TOTAL,    " & _ 
            "       Freight.Version   " &_
            "FROM Freight " & _
            "  LEFT JOIN NewFile ON Freight.[MPU ID] = NewFile.MPU_ID " & _
            "ORDER BY NewFile.MPU_ID, NewFile.MAIL_DATE")

Set rs2 = db.OpenRecordset("Final")

DoCmd.RunSQL "DELETE Final.* FROM Final;"

intcounter = 1
memdate(intcounter) = rs1!mail_date
FinMPU = rs1!mpu_ID
FinTotal = rs1!total
FinVersion = rs1!Version
rs1.MoveNext

On Error GoTo Error_MayCauseAnError

Do While Not rs1.EOF
    Do While Not rs1.EOF _
             And memdate(intcounter) <> rs1!mail_date _
             And FinMPU = rs1!mpu_ID
        intcounter = intcounter + 1
        memdate(intcounter) = rs1!mail_date
        FinTotal = FinTotal + rs1!total
        FinVersion = rs1!Version
        FinMPU = rs1!mpu_ID
        rs1.MoveNext
    Loop

    If FinMPU <> rs1!mpu_ID Then
        rs2.AddNew
        mdate2 = "mail_date" & CStr(intcounter)
        rs2!mdate2 = memdate(intcounter)
        rs2!total = FinTotal
        rs2!mpu_ID = FinMPU
        rs2!Version = FinVersion
        rs2.Update

        FinTotal = rs1!total
        FinVersion = rs1!Version
        FinMPU = rs1!mpu_ID
        intcounter = 1
        memdate(intcounter) = rs1!mail_date
    End If
    rs1.MoveNext
Loop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:00:04.417

首先，如果您期望并回答，您真的应该花更多时间正确格式化您的解释和代码......

现在，对于一些评论和问题的可能答案：

*   您应该`DELETE FROM Final`在记录集中打开该表之前。

*   您应该明确您正在打开的记录集的类型：

    ```
    ' Open as Read-only '
    Set rs1 = db.OpenRecordSet("...", dbOpenSnapshot)
    ' Open as Read/Write '
    Set rs1 = db.OpenRecordSet("...", dbOpenDynaset) 
    ```

*   您应该 `Dim memdate(1 To 15) As Variant`而不是`Date`因为`Date`数据类型 cannot be ，并且由于您从 LEFT JOIN 中提取数据，因此如果表中没有相应的数据`Null`，则返回的值可能是。`Null``Freight``Newfile`

*   那`On Error GoTo Error_MayCauseAnError`可能不应该在那里。
    仅用于`On Error Goto`捕获您根本无法处理的错误。
    在这里使用它只会隐藏代码中的错误。使用一些适当的检查语句，您甚至不需要`On Error Goto`...

*   看起来您的第一个内部循环正在尝试跳过一些记录。
    但是，当该循环中断时，可能是因为它达到了 EOF，而您永远不会在循环后面的代码中测试它。

*   你永远不会测试你是否`intcounter`超过了 15 个分配的日期。
    您绝对确定您的记录永远不会超过 15 条吗？

*   你没有说你得到了哪个错误信息。这可能有助于确定手头的问题类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T12:02:35.453

代替

```
mdate2 = "mail_date" & CStr(intcounter)
rs2!mdate2 = memdate(intcounter) 
```

利用

```
rs2.Fields("mail_date" & intcounter).Value = memdate(intcounter) 
```

DAO的`!`语法实际上只是较长`rs.Fields("name")`形式的简写。

# generics - 类型参数支持加法的通用接口

> ID：15637854
> 
> 赞同：4
> 
> 时间：2013-03-26T13:07:58.527
> 
> 标签：generics, f#

我在 F# 中试图创建一个类型参数必须支持添加的通用接口，所以我最终得到了这样的结果：

```
type IMyInterface<'b when 'b : (static member (+) : 'b * 'b -> 'b)> =
    abstract member myFunction : 'b -> 'b 
```

不幸的是，这段代码给了我以下错误：

> 此代码不够通用。当 ^D : 比较和 ^D : (静态成员 ( + ) : ^D * ^D -> ^D) 时的类型变量 ^D 无法泛化，因为它会超出其范围。

我发现[这个问题](https://stackoverflow.com/questions/5904740/f-explicit-member-constraints-the-type-variable-t-could-not-be-generalized-be)与同一问题有关，但我不确定我是否理解**为什么**必须将函数标记为`inline`.

另外，由于您不能创建一个抽象成员`inline`，是否存在我可以在我的具体示例中使用的另一种解决方案？还是我必须找到另一种方法来实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T13:56:40.820

首先，我想我不完全明白为什么你需要声明接口的类型参数支持加法-我想加法会在实现中使用`MyFunction`，在这种情况下，接口的调用者不需要知道关于它。如果要公开添加，可以简单地将其添加为单独的方法：

```
type IMyInterface<'T> =
  abstract Add : 'T * 'T -> 'T
  abstract MyFunction : 'T -> 'T 
```

`inline`我认为静态成员约束在函数或静态成员之外的其他地方效果不佳`inline`（但我可能错了）。如果您需要在泛型类型中使用数字操作，您可以使用*捕获*实现（在`inline`方法中）并将它们存储在接口中的技巧。[在我的博客](http://tomasp.net/blog/fsharp-generic-numeric.aspx)末尾有一个关于 F# 中的通用数学的示例。

诀窍是使用您需要的数字操作定义一个接口，并将其作为附加参数传递给构造函数：

```
type IAddition<'T> =
  abstract Add : 'T * 'T -> 'T

type MyType<'T>(a:'T, b:'T, add:IAddition<'T>) =
  member x.Sum = add.Add(a, b) 
```

到目前为止，这是以标准 .NET 方式使用接口 - 接口表示数字操作，我们通过接口调用它们。现在，诀窍是添加只接受两个参数并要求作为静态约束的`inline`方法。然后该方法可以实现接口并将其作为最后一个参数传递给：`Create``+``MyType`

```
 static member inline Create(a:^N, b:^N) =
    let ops = 
      { new IAddition< ^N > with
          member x.Add(a, b) = a + b }
    MyType< ^N >(a, b, ops) 
```

现在您可以编写`MyType<_>.Create(1, 2)`并且`+`整数的操作将被自动捕获并存储在一个接口中（这在您的其余代码中更容易使用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:56:27.447

[MSDN 上的静态解析类型参数](http://msdn.microsoft.com/en-us/library/dd548046.aspx)可能会阐明对`inline`. 底线是你不能把约束放在界面上，它也不是需要它的地方。（你真的想要一个接口“泄漏”相当于实现细节的东西吗？记住，这个约束只存在于编译时。）函数可能是`inline`，所以这是可行的：

```
type IMyInterface<'b> =
    abstract member myFunction : 'b -> 'b

// (^b : (static member (+) ...) constraint is inferred
let inline makeMyInterface() =
  { new IMyInterface<_> with
      member x.myFunction b = b + b } 
```

# java - 正则表达式中的可选前瞻

> ID：15637855
> 
> 赞同：1
> 
> 时间：2013-03-26T13:07:59.103
> 
> 标签：java, regex

我有一个这样的字符串：

```
REFORMAT FIELDS=(F1:%[VER#,SAH#]%,%SAH#%,F2:%KMSTAND%) 
```

我正在尝试使用以下正则表达式来获取“F1：”之后直到“F2”的所有字符：

```
(F1|F2):(.*?)(?:(?=,F)) 
```

它匹配第一部分，但它也应该得到第二部分。所以前瞻功能只能是可选的。怎么了？

**编辑：** 我的代码：

```
Matcher fields = Pattern.compile("(F1|F2):(.*?)(?:(?=,F))").matcher(line);
while (fields.find()) {
    //do something with fields.group(2)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:26:34.937

> 所以前瞻功能只能是可选的。怎么了？

可选的前瞻将毫无用处。在您的情况下，您*希望*在匹配 F2 后向前看 - 只有您不会寻找`,F`，而是寻找字符串结尾。

将您的模式更改为

```
(F1|F2):(.*?)(?=,F|\)) // "(F1|F2):(.*?)(?=,F|\\))" with double-escaped brace
// maybe:
(F\d):(.*?)(?=,F\d|\)) 
```

或者

```
(F1|F2):(.*?)(?:$|(?=,F)) 
```

如果你想包括右括号

# php - 简单的 html 表单发布到两个不同的位置

> ID：15637857
> 
> 赞同：1
> 
> 时间：2013-03-26T13:08:07.203
> 
> 标签：php, html, forms, post

我希望能够将表格中的信息发布到两个位置。该表单当前发布到一个位置。

```
<form name="input" action="display.php" method="post">
    search: <input type="text" name="item">
    title: <input type="text" name="title">
    Distance:
    <select type="text" name="distance">
        <option value="5">5 miles</option>
        <option value="10">10 miles</option>
        <option value="15">15 miles</option>
    </select>
</form> 
```

我试过了

```
<form name="input" action="display.php", "info.php" method="post"> 
```

希望它会发布到 display.php 和 info.php 但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:17:46.597

你为什么不用`ajax`这个。它将帮助您向 2 个不同的页面发送 2 个请求。

```
$.ajax({
           type: "POST",
           url : "form.php",
           data: {'field1':field1,'field2':field2},
           success: function(msg){
                 // get response here  
               }
           });

$.ajax({
           type: "POST",
           url : "display.php",
           data: {'field1':field1,'field2':field2},
           success: function(msg){
                 // get response here  
               }
           }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:17:45.237

你最好的选择是使用史努比，因为它不会使用 cURL。（你可能有也可能没有，这个类不需要它）。该课程可以在以下位置下载：http: [//sourceforge.net/projects/snoopy/](http://sourceforge.net/projects/snoopy/) 您需要做的就是包含该课程并将此代码用于多个帖子：

```
 $snoopy = new Snoopy;

     $submit_url = "url1.php";

     $submit_vars["foo"] = "bar";
     $submit_vars["key"] = "value";
     $submit_vars["input-name"] = "input-value";
     //making sense on what these are?

     $snoopy->submit($submit_url,$submit_vars);
     //additionaly you can print the results with:
     //print $snoopy->results;

     //then move to the next submit url
     //but, remember!  You must instantiate a new class

     $snoopy2 = new Snoopy;

 $submit_url = "url2.php";

 $submit_vars["foo"] = "bar";
 $submit_vars["key"] = "value";
 $submit_vars["input-name"] = "input-value";

 $snoopy2->submit($submit_url,$submit_vars); 
```

# java - Android上MapView中的空网格

> ID：15637863
> 
> 赞同：0
> 
> 时间：2013-03-26T13:08:21.847
> 
> 标签：java, android, google-maps-android-api-2

我正在尝试让我的 MapView 在 android 上运行。但我得到一个空网格。

我遵循异常并收到错误消息：“java.io.IOException：服务器返回：3”。

我多次删除了我的 debug.keystore，重新创建了它。我每次都使用 api 控制台创建新的 api 密钥。

这就是我声明我的 MapView 的方式：

```
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="match_parent"
    android:layout_height="184dp"
    android:layout_x="0dp"
    android:layout_y="0dp"
    android:apiKey="my api key"
    android:clickable="true" >
</com.google.android.maps.MapView> 
```

我还在我的 android 清单文件中添加了几个权限：

```
<uses-sdk
    android:minSdkVersion="17"
    android:targetSdkVersion="17" />

<permission android:name="com.example.conti_lab6.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<uses-permission android:name="com.example.conti_lab6.permission.ACCESS_COARSE_LOCATION"></uses-permission>
<uses-permission android:name="com.example.conti_lab6.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="com.example.conti_lab6.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-feature android:glEsVersion="0x00020000" android:required="true"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<!-- The following two permissions are not required to use
     Google Maps Android API v2, but are recommended. -->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">

    <activity
        android:name="com.example.conti_lab6.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <uses-library android:name="com.google.android.maps" /> 
</application> 
```

我对此没有想法。我在本地运行模拟器，它应该在我的 .android 文件中使用 debug.keystore。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:34:56.397

所以在 Api V2 的情况下

你需要一些小改动

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:map="http://schemas.android.com/apk/res-auto"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

你必须添加`google play library`, 和 `The error which you are getting is generally occured when you are running your app Using v1 api key`

对于密钥生成，您可以使用带有包名称的 SHA1 证书。

有关更多信息，请查看此[链接](https://developers.google.com/maps/documentation/android/)

# localhost - 未注册。服务器返回“不允许的方法”（405）

> ID：15637868
> 
> 赞同：0
> 
> 时间：2013-03-26T13:08:42.457
> 
> 标签：localhost, ubuntu-12.04, asterisk, registration

我已经在 Ubuntu 12.04 上成功配置了 Asterisk Asterisk 10.12.1，并且所有需要的软件包都已成功安装。然后我在 sip.conf 文件中添加了一个帐户并在 SFlphone 中添加了该帐户，但它没有注册并给出以下错误：

未注册。服务器返回“方法不允许”（405）。

```
 [3001]
  type=friend
  context=default
  secret=3001
  host=dynamic
  nat=no
  canreinvite=no
  mailbox=1000@default 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-13T12:53:32.107

我遇到了类似的问题并像这样解决了它：

**有什么问题**？

*Asterisk SIP 和 SFL 电话正在尝试使用相同的端口号 5060*

*含义：如果***SFLpone 拥有端口号**，您的 sip 呼叫是否会循环回 SFL 电话而不是转到星号服务器，否则它将根本无法工作（*因为您告诉 SFLpone 在另一个应用程序正在使用时使用端口 5060它*）。

**解决方案**：

**1** . *停止星号和**SFLphone*** 通过运行以下命令确保这一点：**sudo fuser -n udp 5060**，如果有任何应用程序在此端口上运行，您将看到它的进程 ID 并杀死它（**sudo kill -9 pid**）。

**2** . 启动**Asterisk**（*现在 asterisk 将安全地将端口 5060 用于其 SIP 模块*）

**3** . 启动您的**SFLphone**。

**4** . 在您的**SFLphone 上**转到*帐户*，然后单击您正在使用的帐户的*编辑*。然后转到*Advanced*选项卡，将*本地端口号*从*5060*（默认）更改为其他任何值（例如*5062*）。

**5** . 现在关闭窗口并尝试**注册**

*如果您看到另一个错误，请告诉我*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:01:13.600

如何调试星号 sip 协议：

1）通过ssh连接

2) 输入：

```
asterisk -r
sip set debug on
core set verbose 10 
```

检查日志。

# mysql - MySQL 中 COALESCE 中的 SELECT

> ID：15637878
> 
> 赞同：8
> 
> 时间：2013-03-26T13:09:35.990
> 
> 标签：mysql, sql

我正在尝试在 MySQL 中执行以下操作：

```
UPDATE
    x
SET
    y = COALESCE(SELECT z FROM table WHERE a = b AND c = d AND e = f LIMIT 1,
                 SELECT z FROM table WHERE a = b AND c = d LIMIT 1,
                 SELECT z FROM table WHERE a = b LIMIT 1); 
```

这对我来说听起来很有效。我正在尝试使用**最合适的值**更新列。如果我能找到符合 3 个条件的记录 -> 那就是我需要的。否则一个适合 2 个标准，否则一个记录只匹配一个标准。

我可以在 3 个更新查询中做到这一点，但我不明白为什么这不起作用。根据[手册](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：

`COALESCE returns the first non-NULL value in the list, or NULL if there are no non-NULL values.`

这**正是**我需要的。但它给出了以下错误：

`Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT'`

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T13:14:23.520

您的问题可能是子选择返回的 z 值超过 1 个。你只能得到一个。

你可以试试：

```
update x
set y = (select z from t where a = b
         order by (case when a = b and c = d and e = f then 1
                        when a = b and c = d then 2
                        else 3
                   end)
         limit 1
        ); 
```

但是，您的特定语法错误是您需要在选择周围加上括号。所以这是语法正确的版本：

```
UPDATE
    x
SET
    y = COALESCE((SELECT z FROM table WHERE a = b AND c = d AND e = f LIMIT 1),
                 (SELECT z FROM table WHERE a = b AND c = d LIMIT 1),
                 (SELECT z FROM table WHERE a = b LIMIT 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:15:40.007

没有更多细节很难给出建议，但这样的事情可能会奏效

```
UPDATE
    x
SET y = COALESCE(
    ( SELECT z FROM table WHERE a = b AND c = d AND e = f LIMIT 1),
    ( SELECT z FROM table WHERE a = b AND c = d LIMIT 1 ),
    ( SELECT z FROM table WHERE a = b LIMIT 1 )
); 
```

确保每个子查询最多只返回 1 行。

# node.js - 在 Jade 模板中连接部分路径

> ID：15637879
> 
> 赞同：1
> 
> 时间：2013-03-26T13:09:36.653
> 
> 标签：node.js, express, pug

我在 Express 项目中有一个 Jade 模板，看起来像这样（为简洁起见）：

```
!!! 5
head
    ...
body
    include path/to/partial 
```

我想弄清楚的是动态生成部分的路径，以便我可以轻松地根据服务器变量换出部分。由于`path/to/partial`不是字符串，有没有办法提供连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:47:37.043

Jade 无法做到这一点，它是静态的（并且按照 TJ 的设计）。

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::UsersController#create 中的错误

> ID：15637884
> 
> 赞同：0
> 
> 时间：2013-03-26T13:09:55.103
> 
> 标签：ruby-on-rails

在将日志记录概念应用于我的图书目录显示时，当用户注册时，我会遇到这种错误。

```
 Can't mass-assign protected attributes: password_confirmation, password 
```

我在 app/model/user.rb 中的代码如下：

```
 class User < ActiveRecord::Base
     attr_accessible :name, :password_digest
     validates :name, :presence => true, :uniqueness => true
     has_secure_password 
   end 
```

我在 app/contollers/user_controller.rb 中创建方法的代码

```
 def create
     @user = User.new(params[:user])

       respond_to do |format|
       if @user.save
       format.html { redirect_to users_url, :notice => 'User #{@user.name} was   successfully                  created.' }
    format.json { render :json => @user, :status => :created, :location => @user }
      else
    format.html { render :action => "new" }
    format.json { render :json => @user.errors, :status => :unprocessable_entity }
    end
    end
    end 
```

请提供任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:11:35.350

如果您想以您的方式分配这些值，您需要将它们添加到`attr_accessible`您的模型中：

```
attr_accessible :name, :password_digest, :password, :password_confirmation 
```

我怀疑您可能不想同时分配这两个，因此您可能希望首先从该哈希中删除它们（在控制器中）：

```
user = params[:user]
user.delete(:password_confirmation)
@user = User.new(user) 
```

`User`如果您只有几个值要保留但有很多值要忽略，您也可以创建一个新的哈希值，其中只包含要用于创建新值的值。

（您也可以创建一个新的“空”`User`并分配您想要的值 - 如果这对您的情况更有意义。）

# php - 不知道如何将现有的图像上传功能添加到新表单

> ID：15637889
> 
> 赞同：1
> 
> 时间：2013-03-26T13:10:02.607
> 
> 标签：php, html, forms, function, variables

我是一个相当新手的网站管理员，正在努力为我的用户设置分类广告。（我基本上是在重建一个写得不好的分类广告）

我买了一个便宜的分类广告程序，所以我有一些东西可以学习 PHP，我已经走了很长一段路，但我距离理解如何将所有内容与现有的图像上传功能联系在一起还有很长的路要走，如果任何人都不会介意帮助我，我将不胜感激。

请允许我解释一下；

在这个分类广告的早期，访问者必须添加他们的列表（这是一个婊子）然后访问者必须去寻找他们可以上传他们的图像的地方。不用说，这不是削减它。

快进到现在；现在我在一个页面上有一个带有多个文本输入（即文本、选择、文本区域和一个复选框）的表单，并且在这个表单上我有 4 个图像上传按钮，如下所示。

```
<form id="generalform" class="container" method="POST"  action="addlistingprocess.php" autocomplete="on" enctype="multipart/form-data" >

        <div class='field'>
        <label for='TypeID'>I'm Selling A:</label>
        <select name='TypeID'>
        <option value='42'>Motorcycle</option>
        <option value='43'>New or Used Part</option>
        </select>
        </div>

        <div class="field">
        <label for="Year">* Year:</label>
        <input type="number" class="input" name="Year" maxlength="5" min="1963" max="2013" value="2013">
        </div>

        <div class="field">
        <label for="fatherID">* Make:</label>
        <select name='fatherID'>
        <option>-- Select Manufacturer --</option>
        <option value='10'>Honda</option>
        <option value='35'>Husqvarna</option>
        <option value='36'>Kawasaki</option>
        <option value='37'>KTM</option>
        <option value='38'>Suzuki</option>
        <option value='39'>Yamaha</option>
        <option value='40'>Other</option>
        <option value='46'>It's Vintage or Evo</option>
        </select>
        </div>

        <div class="field">
        <label for="Model">* Model:</label>
        <input type="text" class="input" name="Model" maxlength="20" value="<?php if(isset($_POST['Model'])) echo $_POST['Model']; ?>" placeholder="(i.e. CRF450F, KX 450F...)">
        </div>

        <div class="field">
        <label for="Description">* Details About It:</label><br>
        <textarea name="Description" rows="10" cols="60"><?php if(isset($_POST['Description'])) echo $_POST['Description']; ?></textarea>
        </div>

        <div class="field">
        <label for="Vin">VIN:</label>
        <input type="text" class="input" name="VIN" maxlength="30" value="<?php if(isset($_POST['VIN'])) echo $_POST['VIN']; ?>" placeholder="Optional">
        </div>

        <div class="field">
        <label for="Price">* Asking Price ($):</label>
        <input type="number" class="input" name="Price" maxlength="10" min="0" value="<?php if(isset($_POST['Price'])) echo $_POST['Price']; ?>">
        </div>
        <!--
        <h4>Upload Up To 4 Images</h4>

        <div class="field">
        <label for="Image">Image 1</label>
        <input type="file" class="fileuploadinput" name="Image1">
        <label for="Image">Image 2</label>
        <input type="file" class="fileuploadinput" name="Image2">
        <label for="Image">Image 3</label>
        <input type="file" class="fileuploadinput" name="Image3">
        <label for="Image">Image 4</label>
        <input type="file" class="fileuploadinput" name="Image4">
        </div>
                -->
        <br>
        <hr style="width:60%">
        <br>

        <h3>Where It's Located:</h3>
        <div class="field">
        <label for="Address">Address:</label>
        <input type="text" class="input" id="Address" name="Address" maxlength="40" placeholder="Optional" />
        <p class="hint">40 Characters Maximum</p>   
        </div>

        <div class="field">
        <label for="City">* City:</label>
        <input type="text" class="input" id="City" name="City" maxlength="20" />
        <p class="hint">20 Characters Maximum</p>   
        </div>

        <div class="field">
        <label for="State">* State / Province:</label>
        <input type="text" class="input" id="State" name="State" maxlength="20" />
        <p class="hint">20 Characters Maximum</p>   
        </div>

        <div class="field">
        <label for="ZIP">* ZIP:</label>
        <input type="text" class="input" id="ZIP" name="ZIP" maxlength="20" />
        <p class="hint">20 Characters Maximum</p>   
        </div>

        <div class="field">
        <label for="Country">* Country:</label>
        <select name="Country">
<option selected="selected" value="United States">United States</option>
<option value="Canada">Canada</option>
<option value="UK">UK</option>
<option value="Zimbabwe">Zimbabwe</option>
</select>
</div>      
        <input type="checkbox" name="Inform" value="1" checked/> Keep Me Dialed In With Site Updates & Specials<br><br>

        <input type="submit" name="submit" id="submit" class="button" value="Submit My Ad"/>
        </form> 
```

现在这是踢球者，（很抱歉创建这么长的帖子）

这个分类已经有一个现有的图像上传功能，我想保留它，因为它可以处理调整大小和显示图像，例如可以在这里看到： [http ://classifieds.your-adrenaline-fix.com/detail.php?fatherID =10&TypeID=42&ListingID=7](http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=10&TypeID=42&ListingID=7)

我想将此功能与上面的表格联系起来，但是，该程序需要很多参数，我已经尝试了数周来理解这些参数，但仍然没有。（但是我已经从代码中清除了 sh^$ 以便理解它）

我将使用所有适用的文件作为代码关闭此线程，如果有人可以帮助我，我将不胜感激，我提前感谢大家。

这是images.php。（这是访问者在创建广告后必须导航到的地方，但它也是访问者可以添加或删除与其列表相关的照片的地方，所以我需要保留这个）

```
<?php
    include('header.php');  

    if(!$superUser){
        if(!$login){            
            echo "<h2>Please Login to Manage Photos</h2>";
            include('z-login-form.php');
            include('no-ad-footer.php');
            die();
            }
        }

    if($_POST['POrder'] != "") {    
        if (($_FILES['file']['type'] != 'image/jpeg') && ($_FILES['file']['type'] != 'image/jpg') && ($_FILES['file']['type'] != 'image/pjpeg')) {
            echo "<script>alert('Images Must be in jpg format and under 2 Mb');\n";
            echo sprintf("window.location='images.php?TypeID=%s&ListingID=%s'", $_POST['TypeID'], $_POST['ListingID']);
            echo "</script>";
            include('no-ad-footer.php');
            die();
        }

        chdir('admin/photos'); 
        require_once('upload.php');
        chdir('../../');

    if ($up->ValidateUpload()) { 
            $node = new sqlNode();
            $node->table = "photos";
            $node->push("int","POrder",$_POST['POrder']);
            $node->push("text","Location",$new_name);
            $node->push("int","TypeID",$_POST['TypeID']);
            $node->push("int","ListingID",$_POST['ListingID']);

            if(($result = $mysql->insert($node)) === false)
                die('Unable to push POrder, Location, TypeID and ListingID into table photos line 38');         
        } else {
            echo "<font color='red'>Unable to upload image</font>";
            }
    }   

    if(($_REQUEST['TypeID'] != "") && ($_REQUEST['ListingID'] != "")) {     
        if(!$superUser){
            echo "<a href='memberindex.php'>Return to My Listings</a>";
        }       

        $sql = sprintf("SELECT * FROM `types` WHERE ID = %s", intval($_REQUEST['TypeID']));
        $result = $mysql->exSql($sql) or die('Unable to Retrieve Type ID from table types');
        if(mysql_num_rows($result)<1){
            die('Less Than One Result Returned from table types. Line51 images.php');
        }

        if(!$superUser){
            $sql = sprintf("SELECT * FROM `tt_%s` WHERE MemberID = %s AND ID = %s", abs(intval($_REQUEST['TypeID'])), intval($_SESSION['memberID']), intval($_REQUEST['ListingID']));
            $result = $mysql->exSql($sql) or die('Unable to select data from table tt__');
            if(mysql_num_rows($result)<1){
                die("<script>window.location='logout.php';</script>");
            }
        }

        $node = new sqlNode();
        $node->table = "photos";
        $node->select = "*";
        $node->where = "WHERE TypeID = ".intval($_REQUEST['TypeID'])." AND ListingID = ".intval($_REQUEST['ListingID']);
        $node->orderby = "ORDER BY `POrder` ASC";

        if(($result = $mysql->select($node)) === false )
            die('Unable to Retrieve data from table photos');

        $num_of_photos = mysql_num_rows($result);

        echo "<h2>Upload or Delete Photos</h2>";

        $showform = true;

        if($showform) {     
            echo "<form action='images.php' enctype='multipart/form-data' method='POST'>";
            echo "<input type='hidden' name='TypeID' value='".$_REQUEST['TypeID']."'>";
            echo "<input type='hidden' name='ListingID' value='".$_REQUEST['ListingID']."'>";
            echo "<input type='hidden' name='Upload' value='true'>";
            echo "<input type='hidden' name='POrder' value='".($num_of_photos+1)."'>";

            echo "<table border=0>";
            echo "<tr>";
            echo "<td>Image 1</td><td><input type='file' name='file' accept='image/*' id='file'></td>"; 
            echo "</tr>";
            echo "<tr>";
            echo "<td>&nbsp;</td><td><input type='submit' value='Upload File(s)'></td>";
            echo "</tr>";
            echo "</table>";
            echo "</form>";
        } else {
            echo "<font color='red'>Max Number of Photos Reached</font>";
        }

        if($num_of_photos >=1) {
        //Print photo table
        echo "<br>";
        echo "<center><strong>$num_of_photos Photo(s) Associated With This Listing</strong></center>";      
        echo "<table class='subHeader' align='center'>";
        echo "<tr>";
        echo "<td>Photo</td><td>Order&nbsp;|&nbsp;</td><td>Action</td>";
        echo "</tr>";

        //For each photo
        while($photo = mysql_fetch_assoc($result)){
            echo "<tr>";
            echo "<td valign=top align=center>";
            echo "<a target='_blank' href='admin/photos/uploads/".$photo['Location']."' title='Click To View Full Size Photo'><img src='admin/photos/uploads/small_thumbs/tn_".$photo['Location']."' border=0></a>";
            echo "</td>";
            echo "<td>".$photo['POrder']."</td>";
            echo "<td>";
            echo "<a href='deleteimage.php?TypeID=".$photo['TypeID']."&ListingID=".$photo['ListingID']."&PhotoID=".$photo['ID']."'>Delete</a>";
            echo "</td>";
            echo "</tr>";
        }

        echo "</table>";
    }
    }
            echo "</td>";
            echo "</tr>";
            echo "</table>";  

    include('no-ad-footer.php');

?> 
```

**这是upload.php**

```
<?php
require_once("UploadFile.class.php");   
$up = new UploadImage($file, 2097152, 3000, 3000,'file',"uploads", $rename_file=true);

if(true) {                                         
    $new_name = $up->CopyFile();
    $imagefolder='.';
    $thumbsfolder='.';
    echo "Creating thumbnail image...<br>";

    function createthumb($name,$filename,$new_w,$new_h) {
        $system=explode(".",$name);
        if (preg_match("/jpg|jpeg/",$system[1])){$src_img=imagecreatefromjpeg($name);}
        if (preg_match("/png/",$system[1])){$src_img=imagecreatefrompng($name);}
        $old_x=imageSX($src_img);
        $old_y=imageSY($src_img);
        if ($old_x > $old_y) {
            $thumb_w=$new_w;
            $thumb_h=$old_y*($new_h/$old_x);
        }
        if ($old_x < $old_y) {
            $thumb_w=$old_x*($new_w/$old_y);
            $thumb_h=$new_h;
        }
        if ($old_x == $old_y){
            $thumb_w=$new_w;
            $thumb_h=$new_h;
        }
        $dst_img=ImageCreateTrueColor($thumb_w,$thumb_h);
        imagecopyresampled($dst_img,$src_img,0,0,0,0,$thumb_w,$thumb_h,$old_x,$old_y); 
        if (preg_match("/png/",$system[1])){
            imagepng($dst_img,$filename); 
        } else {
            imagejpeg($dst_img,$filename); 
        }

        imagedestroy($dst_img); 
        if(!imagedestroy($src_img)){
            $return = @unlink($filename);
            $return2 = @unlink($name);
            // Return FALSE if not found
            var_dump($return);
            var_dump($return2);
?>
            <script>alert("Unable to resize photos. Please check file/folder permission in admin/photos.");window.location ="index.php";</script>
<?php
        }

    }
    createthumb("uploads/" . $new_name,"uploads/thumbs/tn_" . $new_name,350,350);
    createthumb("uploads/" . $new_name,"uploads/small_thumbs/tn_" . $new_name,150,150);

    function ditchtn($arr,$thumbname){
        foreach ($arr as $item) {
            if (!preg_match("/^".$thumbname."/",$item)){$tmparr[]=$item;}
        }
        return $tmparr;
    }

    function directory($dir,$filters){
        $handle=opendir($dir);
        $files=array();
        if ($filters == "all"){while(($file = readdir($handle))!==false){$files[] = $file;}}
        if ($filters != "all"){
            $filters=explode(",",$filters);
            while (($file = readdir($handle))!==false){
                for ($f=0;$f<sizeof($filters);$f++):
                    $system=explode(".",$file);
                    if ($system[1] == $filters[$f]){$files[] = $file;}
                endfor;
            }
        }
        closedir($handle);
        return $files;
    }
}
?> 
```

**这是UpLoadFileclass.php**

```
<?php 
function  RandomFile($pass_len=12) {                   
            $allchar = "abcdefghijklmnopqrstuvwxyz" ; 
            $str = "" ; 
            mt_srand (( double) microtime() * 1000000 ); 
              for ($i=0; $i<$pass_len; $i++) 
                  $str .= substr( $allchar, mt_rand (0,25), 1 ) ; 
                  return $str ;
                  }    

      class UploadImage {         
                   var $image; 
                   var $imagesize; 
                   var $max_file_size; 
                   var $max_file_height; 
                   var $max_file_width; 
                   var $allowed; 
                   var $rename_file; 
                   var $path; 

       function UploadImage($image, $max_file_size, $max_file_height, $max_file_width, $field_name, $path, $rename_file=true) {                     
             $this->image=$image; 
             $this->max_file_size=$max_file_size; 
             $this->max_file_height=$max_file_height; 
             $this->max_file_width=$max_file_width; 
             $this->allowed = array( ".jpg"=>"2", ".jpeg"=>"2"); 
             $this->field_name = $field_name; 
             $this->path = $path; 
             $this->rename_file = $rename_file; 
        } 

        function ValidateUpload() {            
             if ($this->max_file_size <  filesize($this->image)) {                   
                  print("<span style=\"color:red;\">ERROR: Your File: ".$_FILES[$this->field_name]["name"]." is ".filesize($this->image)." KB, The max file size allowed is ".$this->max_file_size."</span>"); 
                    return false;                  
             }              
                $this->imagesize=getimagesize($this->image); 

                if ($this->max_file_width < $this->imagesize[0]) { 
                    print("<span style=\"color:red;\">ERROR:<br />Your File: ".$_FILES[$this->field_name]["name"]." is ".$this->imagesize[0]." pixels wide, the max file width allowed is ".$this->max_file_width."</span>");                     
                    return false;                        
                } 

                 if ($this->max_file_height < $this->imagesize[1]) {                        
                     print("<span style=\"color:red;\">ERROR:<br />Your File: ".$_FILES[$this->field_name]["name"]." is ".$this->imagesize[1]." pixels high, the max file height allowed is ".$this->max_file_height."<span>");                      
                      return false;                        
                }               
                return true; 
        } 

        function PrintForm($max_file_size) {           
              global $PHP_SELF;     
              print("<form action=\"$PHP_SELF\" method=\"POST\" enctype=\"multipart/form-data\"></br>\n"); 
              print("<input type=file name=$this->field_name><br>\n");     
              print("<input type=hidden name=max_file_size value=".$max_file_size."><br>\n"); 
              print("<input type=submit name=submit><br>\n"); 
              print("</form>");                       
            }

        function CopyFile() {
            if($this->rename_file) {
            global $name, $ext;     

      switch($_FILES[$this->field_name]["type"]) { 

       case 'image/gif'; 
       $ext="gif"; 
       break; 

        case 'image/jpeg'; 
       $ext="jpg"; 
       break; 

        case 'image/pjpeg'; 
       $ext="jpg"; 
       break; 

        case 'image/png'; 
       $ext="png"; 
       break; 

        case 'application/x-shockwave-flash'; 
       $ext="swf"; 
       break; 

       case 'image/psd'; 
       $ext="psd"; 
       break; 

       case 'image/bmp'; 
       $ext="bmp"; 
       break; 
     } 

     $name=RandomFile();

         if(!copy($_FILES[$this->field_name]["tmp_name"],$this->path."/".$name.".".$ext)){
               print("<strong>There has been an error while uploading Filename:".$_FILES[$this->field_name]["name"] ."</strong>");                  
           } else {                
               print("Filename: ".$_FILES[$this->field_name]["name"] ." has been uploaded"); 
               //return  new file name
               return $name.".".$ext;                
           } 
           } else { 
           if(!file_exists($this->path."/".$_FILES[$this->field_name]["name"])) {                
                     if(!copy($_FILES[$this->field_name]["tmp_name"],$this->path."/". $_FILES[$this->field_name]["name"])) {
                        print("There has been an error uploading".$_FILES[$this->field_name]["name"]."please try again");                  
                        } else {
                            print("Filename:".$_FILES[$this->field_name]["name"]." has been uploaded");                
                   } 
                   } else { 
                   print("ERROR: A file by this name already exists"); 
                  } 
                 } 
                } 
               } 

?> 
```

再一次，如果有人能帮助我理解这一切，我将不胜感激，我再次感谢大家（提前）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:20:57.767

您是否尝试将包含添加到您的表单所在的页面？

```
include_once("upload.php");
include_once("UpLoadFileclass.php"); 
```

# javascript - IE 媒体查询 javascript 'response' 不起作用

> ID：15637891
> 
> 赞同：1
> 
> 时间：2013-03-26T13:10:09.047
> 
> 标签：javascript, html, css, internet-explorer

我正在构建一个移动优先的网站，但我被困在菜单上。
在 Firefox、Chrome、Safari 和 Opera 中一切正常；正如你[在这里](http://jsfiddle.net/BtbHn/1/)看到的。

但是，当然，浏览器流产的可悲借口，Internet Explorer，不支持媒体查询。所以我开始四处浏览，找到了解决**Idiot** **E** xperience媒体查询问题的 javascript 解决方案。*（看看我在那里做了什么？）* [响应 - 由 scottjehl](https://github.com/scottjehl/Respond)

因此，我迅速实现了脚本并抓起蛋糕开始庆祝战胜浏览器世界的阴囊渗出的胜利。但是很可惜，脚本什么也没做，我又陷入了微软引发的抑郁症。

我将脚本实现到我的标题中，如下所示：

```
 <!--[if (lt IE 9) & (!IEMobile)]>
    <script type="text/javascript" src="js/respond.min.js"></script>
 <![endif]--> 
```

我在关闭我的媒体查询之前添加了评论。

```
/*/mediaquery*/ 
```

有人知道这里可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:40:10.470

解决了。与我的 DOCTYPE 有关。不支持旧版本的 IE。

这段代码修复了它：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]--> 
```

# codeigniter - 如何删除 CI 活动记录中的重音符号？

> ID：15637897
> 
> 赞同：0
> 
> 时间：2013-03-26T13:10:27.500
> 
> 标签：codeigniter, activerecord

我在 CodeIgniter 的活动记录中遇到了一些问题，因为它会自动添加重音符号。例如我需要使用这个`ORDER BY FIELD(`站点`.`ID `, 120, 27, 119)`，所以我像`$this->db->order_by('FIELD(`站点`.`ID那样做`, '.implode(', ', $sites).' )');`，但是得到

```
ORDER BY FIELD(`sites`.`ID`, `120`, `27`, `119`) 
```

我也尝试添加撇号，但没有任何改变。有什么方法可以做我的查询或者我需要将它重写为一个简单的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:17:56.983

> $this->db->where() 接受可选的第三个参数。如果您将其设置为 FALSE，CodeIgniter 将不会尝试使用反引号保护您的字段或表名。

[活动记录文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# android - android:actionBarItemBackground 与 ActionMode 不同

> ID：15637898
> 
> 赞同：2
> 
> 时间：2013-03-26T13:10:31.257
> 
> 标签：android, android-actionbar

`android:actionBarItemBackground`您可以使用该属性更改操作栏上菜单项的背景。

但是，这会导致 ActionMode 中菜单项的背景具有相同的颜色。有没有办法为普通 ActionBar 和 ActionMode 的菜单项设置不同的背景？

```
<item name="android:actionBarItemBackground">@drawable/selectable_background_mytheme</item> 
```

`selectable_background_mytheme`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
        android:exitFadeDuration="@android:integer/config_mediumAnimTime" >
    <item android:state_pressed="false" android:state_focused="true" android:drawable="@color/red" />
    <item android:state_pressed="true" android:drawable="@color/blue" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T13:36:35.393

您应该使用`android:actionLayout`，请参见此处：[带有 actionLayout 的 Android 操作栏菜单项无法正常工作](https://stackoverflow.com/questions/14908578/android-action-bar-menu-item-with-actionlayout-not-working-properly)

其他一些注意事项：

您的文件`"selectable_background_mytheme"`应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetBottom="0dp"
    android:insetLeft="-5dp"
    android:insetRight="-5dp"
    android:insetTop="-5dp" >

    <shape>
        <solid android:color="@color/stacked_green" />

        <stroke
            android:width="3dp"
            android:color="@color/accent_green" />
    </shape>
</inset> 
```

即不是选择器

或者，您可以使用可绘制的位图。

# android - 与 JNI 共享库：如何维护全局变量？

> ID：15637906
> 
> 赞同：0
> 
> 时间：2013-03-26T13:10:42.163
> 
> 标签：android, c, java-native-interface, shared-libraries, shared-memory

我编写了一个共享库，可以通过我的 linux 系统和来自 java 的 JNI 调用访问它。

该库应该有一个全局环形缓冲区，它必须在 JNI 方法和其他本机方法中可用。

我认为这不会是一个问题，因为当我从不同的程序访问 SL 时，全局变量总是应该的。

但是现在，在我的 JNI 方法中，全局变量似乎没有被初始化（它们应该是程序流强制的）。

这是我的例子：

```
ringbuf_t ringbuffer;

void internalMethod() {
    // this method is first called from system-program
    ringbuffer = ringbuf_new(5000);
}

JNIEXPORT jint JNICALL Java_example_read(JNIEnv *env, jobject This) {
    // this method is later called via JNI
    if (!ringbuffer) {
        LOGI("uhhh, why is that buffer not set?!");
    }
} 
```

我必须做些什么才能使 ringbuffer 变量真正成为全局变量，以便每个实例/对共享库的调用都访问该变量的同一个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:23:09.343

从评论看来，您似乎想在一个进程中分配内存并在另一个进程中使用它。

为此，查看共享内存可能是个好主意：“man shmget”应该是一个好的开始。

请注意，这与 JNI 没有特别关系，而是来自操作系统的限制。

编辑：我建议你：

1.  阅读共享内存-您应该了解其工作原理的概念。
2.  首先尝试在 2 个简单的应用程序之间共享内存
3.  然后才在您的 JNI 应用程序中实现

# twitter-bootstrap - 带有下拉图标-chevron 的 Bootstrap Accordion 导航

> ID：15637911
> 
> 赞同：4
> 
> 时间：2013-03-26T13:10:51.493
> 
> 标签：twitter-bootstrap, navigation, accordion

我有一个 bootstrap nav-tabs nav-stacked 列表，它需要使用手风琴来折叠所有列表，除了最近点击的列表，或者有活动的孩子。

我有这个工作，但似乎无法弄清楚如何让雪佛龙改变方向，除非点击。

我以前只设置了这个来做折叠，而不是手风琴折叠......所以需要一些 javascript 建议来让它完全正常工作。

jsfiddle： http: [//jsfiddle.net/utcwebdev/NBcmh/17/](http://jsfiddle.net/utcwebdev/NBcmh/17/) （使用正常的引导标记，加上自定义的引导表css主题）

这是标记：

```
<ul id="sidenav01" class="accordion nav nav-department nav-tabs nav-stacked">
    <li>
        <a href="department-mathematics.php"><i class="icon-home"></i> Mathematics</a> 
    </li>
    <li>
        <a href="#li02" data-toggle='collapse' data-target='#subnav01', data-parent='#sidenav01' class="accordion-toggle collapsed"><i class="icon-chevron-up pull-right"></i>Programs </a>
          <ul id="subnav01" class="nav nav-list collapse">
            <li><a href="#1"><i class="icon-home"></i> Programs Home</a></li>
            <li><a href="#2">Undergraduate Program</a></li>
            <li><a href="#3">Graduate Program</a></li>
            <li><a href="#4">Undergraduate Program</a></li>
            <li><a href="#5">Math Plaza</a></li>
            <li><a href="#6">UTeaChattanoga</a></li>
            <li><a href="#7">Placement Criteria</a></li>
            <li><a href="#8">Step Ahead Math</a></li>
          </ul>
    </li>
    <li>
        <a href="#page">A Single Math Page</a> 
    </li>
    <li>
        <a href="#li03" data-toggle='collapse' data-target='#subnav02', data-parent='#sidenav01' class="accordion-toggle collapsed"><i class="icon-chevron-up pull-right"></i>Student Resources</a>
          <ul id="subnav02" class="nav nav-list collapse">
            <li><a href="#pimu">Pi Mu Epsilon</a></li>
            <li><a href="#schol">Scholarships and Awards</a></li>
            <li><a href="#links">Math Links</a></li>
            <li><a href="#advise">Advisement</a></li>
          </ul>
    </li>
    <li>
        <a href="directory.php"><i class="icon-group"></i> Staff Profiles</a> 
    </li>
</ul> 
```

这是javascript：

```
$(document).on('click', '.accordion-toggle', function(event) {
    event.stopPropagation();
    var $this = $(this);

    var parent = $this.data('parent');
    var actives = parent && $(parent).find('.collapse.in');

    // From bootstrap itself
    if (actives && actives.length) {
        hasData = actives.data('collapse');
        //if (hasData && hasData.transitioning) return;
        actives.collapse('hide');
    }

    var target = $this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, ''); //strip for ie7

    $(target).collapse('toggle');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:28:58.857

似乎手风琴的引导折叠插件没有完全实现。它仅为单击的元素切换折叠的 css 类。

```
 $(document).on('click.collapse.data-api', '[data-toggle=collapse]', function (e) {
    var $this = $(this), href
      , target = $this.attr('data-target')
        || e.preventDefault()
        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7
      , option = $(target).data('collapse') ? 'toggle' : $this.data()

    // this line
    $this[$(target).hasClass('in') ? 'addClass' : 'removeClass']('collapsed')

    $(target).collapse(option)
  }) 
```

**UPD** 要解决此问题，您只需找到所有切换按钮并对它们执行相同操作：

```
$(document).on('click.collapse.data-api', '.accordion-toggle', function(event) {
    var $this = $(this),
        parent = $this.data('parent'),
        $parent = parent && $(parent);

    if ($parent) {
        $parent.find('[data-toggle=collapse][data-parent=' + parent + ']').not($this).addClass('collapsed');
    }
}); 
```

并且不要忘记添加`accordion-group`类。

[http://jsfiddle.net/NBcmh/29/](http://jsfiddle.net/NBcmh/29/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T12:21:28.927

如果您使用的是 Font Awesome 3.2.1，那么在 css 中，使用以下命令调用更改：
`.collapsed .icon-chevron:before {content: "\f078";} .icon-chevron:before {content: "\f077";}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:07:13.263

谢谢你。这是一个不需要更改 HTML 标记的修复程序。在 var target 之前添加以下 js：

```
 $(parent).find('.accordion-toggle').not($(event.target)).addClass('collapsed'); 
```

归功于该项目的开发人员。

[http://jsfiddle.net/utcwebdev/NBcmh/24/](http://jsfiddle.net/utcwebdev/NBcmh/24/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T17:24:06.657

我被困在一个类似的问题上，但是我设法找到了手风琴箭头切换的解决方案，但我不知道如何保持活动箭头始终打开，同时能够折叠其他箭头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T17:05:27.747

是否可以为手风琴添加另一个级别？

```
<li>
    <a href="#li02" data-toggle='collapse' data-target='#subnav01', data-parent='#sidenav01' class="accordion-toggle collapsed">
        <i class="icon-chevron-up pull-right"></i>Page 2 </a>
      <ul id="subnav01" class="nav nav-list collapse">
        <li><a href="#1">Page 2.1</a></li>
        <li><a href="#" data-toggle='collapse' data-target='#subnav01.1', data-parent='#sidenav01.1' class="accordion-toggle collapsed">
            <i class="icon-chevron-up pull-right"></i>Page 2.2</a>
            <ul id="subnav01.1" class="nav nav-list collapse">
                <li><a href="#1">Sub-level 1</a></li>
                <li><a href="#2">Sub-level 2</a></li>
            </ul>
        </li>
        <li><a href="#6">Page 2.3</a></li>
      </ul>
</li> 
```

我添加了这部分 html，但没有显示出来。

[http://jsfiddle.net/labanino/G3PqR/12/](http://jsfiddle.net/labanino/G3PqR/12/)

# c# - 几秒钟后网站开始工作

> ID：15637916
> 
> 赞同：0
> 
> 时间：2013-03-26T13:11:02.290
> 
> 标签：c#, asp.net, web

我在网站和网络应用程序方面相当陌生。我创建了一个可以在 localhost IIS 上正常工作的网站，但是当我将它放在服务器上时它无法正常工作。我必须等待一段时间才能开始工作。当我在下拉列表中选择项目时，我也会收到以下错误：（它位于窗口的左下角）

网页错误详情

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET4.0C; .NET4.0E; InfoPath.3; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET CLR 1.1.4322; MS-RTC LM 8)
Timestamp: Tue, 26 Mar 2013 13:07:37 UTC
Message: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed.
Line: 869
Char: 13
Code: 0 
```

我将跟踪设置为 true，它现在可以工作了。但这似乎不是一个好的解决方案，因为当我在 Dropbox 中选择项目时仍然看到该错误。你对此有什么好的建议吗？我应该从配置文件或其他地方添加或删除一些东西吗？以下是我的 web.cinfig

```
 <?xml version="1.0"?>   
    <configuration>
     <system.web>
       <customErrors mode="Off"/>
       <compilation targetFramework="4.0" debug="true"/>
       <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"    
                  viewStateEncryptionMode="Always"/>
       <trace
       enabled="true"/>
     </system.web>
    </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:38:02.183

[Sys.WebForms.PageRequestManagerParserErrorException - 它是什么以及如何避免它，](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)

如果您使用过 Microsoft ASP.NET AJAX UpdatePanel 控件，则很有可能遇到“Sys.WebForms.PageRequestManagerParserErrorException”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:05:33.263

我实际上不确定是什么引发了这个错误。在我的网络表单中使用更新面板。rhis 是我的网络表单的一部分。

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs"
        Inherits="Default" %>

      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
       <html xmlns="http://www.w3.org/1999/xhtml">
      <head id="Head1" runat="server">
     <title>DTC</title>
    </head>
 <body bgcolor="#333333">
 <h1 align="center" style="font-family: Arial; color: #FFFF99; height: 40px; font- 
   weight: bold;
    font-size: 50px; min-width: 900px;" title="Header">
    DTC Viewer</h1>
    <form id="form1" runat="server" style="margin: 50px 100px 50px 100px; min-width: 700px;
    background-color: #C0C0C0; font-family: Arial, Helvetica, sans-serif;">
    <div align="center" style="width: 100%">
    <asp:UpdatePanel ID="CheckboxUpdatePanel" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <table id="MainTable" runat="server" style="margin-left: 100px;">
                <tr>
                    <td>
                        <asp:UpdatePanel ID="BrandUpdatePanel" runat="server" UpdateMode="Conditional">
                            <ContentTemplate>
                                <table>
                                    <tr>
                                        <td style="padding-bottom: 5px;">
                                            <asp:Label ID="BrandLabel" runat="server" Text="Brand :" Font-Names="Arial" Font-Size="Medium"
                                                ForeColor="#333333" CssClass="MyLabel" Width="8em" 
                                                style="margin-right: 1em;text-align: right;"></asp:Label>
                                        </td>
                                        <td style="padding-bottom: 5px;">
                                            <asp:TextBox ID="Brand" runat="server" Height="15px" Width="176px" Text="VTC" BackColor="#FFFFCC"
                                                CssClass="MyDropBox" AutoPostBack="True" ForeColor="#666666" ReadOnly="True"></asp:TextBox>
                                                <asp:Label ID="StarLabel1" runat="server" Font-Names="Arial" Font-Size="Medium"
                                                ForeColor="#333333" Width="1em" 
                                                style="text-align: left;" Text="*"></asp:Label>
                                        </td>

                                        <td style="padding-bottom: 5px;">
                                            <asp:RequiredFieldValidator ID="BrandValidator" runat="server" ErrorMessage="Basic Search: Brand is required"
                                                ControlToValidate="Brand" InitialValue="" ForeColor="Red" Width="15em" CssClass="ErrorMessage"
                                                Font-Size="Small"></asp:RequiredFieldValidator>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <asp:Label ID="ModelLabel" runat="server" Text="Model :" Font-Names="Arial" Font-Size="Medium"
                                                ForeColor="#333333" CssClass="MyLabel" Width="8em" 
                                                style="margin-right: 1em;text-align: right;"></asp:Label>
                                        </td>
                                        <td>
                                            <asp:TextBox ID="Model" runat="server" Height="15px" Width="176px" Text="FH(4)" BackColor="#FFFFCC"
                                                CssClass="MyDropBox" AutoPostBack="True" ForeColor="#666666" ReadOnly="True"></asp:TextBox>
                                                 <asp:Label ID="StarLabel2" runat="server" Font-Names="Arial" Font-Size="Medium"
                                                ForeColor="#333333" Width="1em" 
                                                style="text-align: left;" Text="*"></asp:Label>
                                        </td>
                                        <td>
                                            <asp:RequiredFieldValidator ID="ModelValidator" runat="server" ErrorMessage="Basic Search: Model is required"
                                                ControlToValidate="Model" InitialValue="" ForeColor="Red" Width="15em" CssClass="ErrorMessage"
                                                Font-Size="Small"></asp:RequiredFieldValidator>
                                        </td>
                                    </tr>
                                </table>
                            </ContentTemplate>
                        </asp:UpdatePanel>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
                            <ContentTemplate>
                                <table>
                                    <tr>
                                        <td>
                                            <asp:Label ID="KTXLabel" runat="server" Text="  Emission level :" 
                                                Font-Names="Arial" Font-Size="Medium"
                                                ForeColor="#333333" CssClass="MyLabel" Width="8em" 
                                                style="margin-right: 1em;text-align: right; margin-left: 0px;"></asp:Label>
                                        </td>
                                        <td>
                                            <asp:DropDownList ID="KTX" runat="server" BackColor="#FFFFCC" ForeColor="#666666"
                                                Height="21px" Style="margin-left: 0px" Width="182px" OnSelectedIndexChanged="KTX_SelectedIndexChanged"
                                                CssClass="MyDropBox" DataTextField="text" DataValueField="value" AutoPostBack="True">
                                            </asp:DropDownList>
                                             <asp:Label ID="Label1" runat="server" Font-Names="Arial" Font-Size="Medium"
                                                ForeColor="#333333" Width="1em" 
                                                style="text-align: left;" Text="*"></asp:Label>
                                        </td>
                                        <td>
                     .........
                     ..........

         </ContentTemplate>
    </asp:UpdatePanel>
    <div style="width: 123px; margin-left: 7px; z-index: inherit;">
        <asp:Button ID="getURLButton" runat="server" Height="32px" OnClick="getURLButton_Click"
            Text="Submit" Width="134px" BackColor="#DD5800" BorderColor="Gray" Font-Bold="True"
            Class="MyButton" Font-Size="Large" ForeColor="#4E4E4E" />
    </div>
    <br />
</div>
</form> 
```

# javascript - IP 地址和同源策略

> ID：15637917
> 
> 赞同：0
> 
> 时间：2013-03-26T13:11:05.050
> 
> 标签：javascript, xml, same-origin-policy

我想知道同源策略角色是否也适用于 IP 地址。在我的具体情况下，我需要使用 JavaScript (jquery .ajax()) 获取一些 xml 数据。

服务器 192.168.1.160

客户 192.168.27.67

如果适用同源策略角色，获取 XML 数据的最佳方法是什么？请考虑源数据是 XML，而不是可以轻松包装在 JSONP 中的 JSON。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:44:20.993

在无法使用 JSONP 的情况下，我在 asp.net Web 服务 (asmx) 中使用的一种替代方法是设置一个服务器端页面，作为您运行 jQuery 代码的服务器/IP 上的代理页面。这可以在任何服务器端语言中实现。

当在您的 jQuery ajax 方法中请求代理页面时，代理页面将需要执行 HTTP 发布或访问备用/外部 ip 上的页面。这会将 XML 返回到代理页面，这样您就可以在本地使用它。

* ***请注意**，这*假定*远程页面只是将 XML 作为字符串返回。您可能需要添加访问请求参数（用户名、密码），并且代理页面可能还需要解析返回的 XML 以从页面中去除任何其他输出）。

# shell - 检查上次修改文件的脚本

> ID：15637919
> 
> 赞同：1
> 
> 时间：2013-03-26T13:11:07.280
> 
> 标签：shell

如果文件被修改，外壳脚本会收到邮件

如果文件已被修改，我正在编写脚本以获取邮件

```
recip="mungsesagar@gmail.com"

file="/root/sagar/ldapadd.sh"

#stat $file

last_modified=$(stat --printf=%y $file | cut -d. -f1)

#echo $last_modified

mail -s "File ldapadd.sh has changed" $recip 
```

现在我在运行此脚本时收到邮件，但我想比较两个变量，以便只有在文件修改或内容更改时才能收到邮件。如何将输出存储在变量中以进行比较

提前致谢

萨加尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:41:05.550

我会这样做：

```
recip="you@example.com"
file="/root/sagar/ldapadd.sh"
ref="/var/tmp/mytimestamp.dummy"

if [ "$file" -nt "$ref" ]; then
    mail -s "File ldapadd.sh has changed" $recip
fi

touch -r "$file" "$ref" # update our dummy file to match 
```

这个想法是通过将感兴趣的文件复制到另一个文件（使用`touch`）来存储感兴趣的文件的最后看到的时间戳。然后我们总是知道上次是什么时间，并且可以根据需要将其与文件和电子邮件上的当前时间戳进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:40:17.940

我会使用 find 查看最后修改的文件

```
#!/bin/bash 
file=timestamp.txt
if [ ! -f timestamp.txt ];
   then
      stat -f %Sm -t %Y%m%d%H%M%S $file > timestamp.txt
   else 
      timestamp=$(stat -f %Sm -t %Y%m%d%H%M%S $file) 
      filetime=$(cat filetime.txt)
      if [ "$filetime" = "$timestamp" ];
         then
            #Do nothing
         else
            echo "$file has been modified" >> /tmp/email.txt
            mail -s "File has changed" "email@domain.com" < /tmp/email.txt
      fi
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:46:25.487

如果我正确理解您的问题，可以通过将“ls -ltr 文件名”的输出存储在 temp1 文件中并将其与 ls -ltr 输出进行比较来更改逻辑

# java - 如何使用 BufferedImage 变形/修改图像

> ID：15637920
> 
> 赞同：1
> 
> 时间：2013-03-26T13:11:07.463
> 
> 标签：java, bufferedimage

我不知道如何使用 BufferedImage 像这样变形图像。有人能帮我吗 ？我绝对绝望。感谢所有提示。对不起我的英语不好。

![在此处输入图像描述](../Images/ddd78ce7bf07a81342d2974487423e02.png)

```
 |
                |
               \ /  
                V 
```

![在此处输入图像描述](../Images/2ed862b52b4a692e854c266527703f9f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:58:26.470

这不是一项简单的任务，您必须制定一个算法来计算新 BufferedImage 中的每个像素，其中将采用最后一个 BufferedImage 中的像素。

您可以为此使用 getARGB 和 setARGB。还要确保您发现新图像中的一个像素不指向旧图像中的像素的可能性。

这不是一个快速的过程，所以如果您有可能保存它并重用它而不是每次都重新改变它，那么这将为您节省大量的 CPU 工作。

# java - 使用 Atomikos 在 Tomcat 服务器中正确设置 JTA 事务管理器

> ID：15637921
> 
> 赞同：4
> 
> 时间：2013-03-26T13:11:13.643
> 
> 标签：java, spring, apache-camel, spring-transactions

如何`JTATransactionManager`为全局事务设置容器管理的数据源和嵌入式 Active MQ 资源？

我正在使用 Tomcat 6 并在其中安装了 Atomikos 以支持 JTA。我将 Hibernate 用于 ORM。这是我的配置：

```
<bean id="AtomikosTransactionManager"  
      class="com.atomikos.icatch.jta.UserTransactionManager"  
    init-method="init" destroy-method="close"> 
   <!--  when close is called, should we force  
         transactions to terminate or not?  --> 
   <property name="forceShutdown" value="false" /> 
</bean> 

<bean id="AtomikosUserTransaction"  
   class="com.atomikos.icatch.jta.UserTransactionImp">      
   <property name="transactionTimeout" value="300" /> 
</bean>

<jee:jndi-lookup expected-type="javax.sql.DataSource" id="dataSource" jndi-name="jdbc/EDITSOLUTIONS"/>

<bean id="sessionFactory" class="org.springframework.orm.hibernate.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="mappingResources"/>
    <list>
        <value>../../src/editsolutions.hibernate.cfg.xml</value>
    </list>
    <property name="hibernateProperties">
        <value>
            hibernate.dialect=${hibernate.dialect}
        </value>
    </property>
</bean>

<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="connectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <property name="brokerURL" value="failover://tcp://localhost:61616"/>
        </bean>
    </property>
</bean>

<bean id="jmsConnectionFactory"class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="failover://tcp://localhost:61616"/>
</bean>

<bean name="txManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager" ref="AtomikosTransactionManager" /> 
    <property name="userTransaction" ref="AtomikosUserTransaction" />
</bean> 
```

Spring 文档说 JTA 事务管理器不需要被告知资源。这就是我所做的。

### 我有以下悬而未决的问题：

1.  我不确定是否`Atomikos`正确集成？
2.  可以从中获取数据源`<jee:jndi-lookup>`吗？
3.  Hiberante 配置是否正确`JTATransactionManager`？
4.  由于它嵌入在不受容器管理的 JVM 中，JTATransactionManager 是否能够识别 ActimeMQ ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:21:08.090

试试这个非常有用的链接： http: **[//www.atomikos.com/Documentation/SpringIntegration](http://www.atomikos.com/Documentation/SpringIntegration)**

请记住以这种方式配置数据源：

```
<bean id="dataSourceA" class="com.atomikos.jdbc.AtomikosDataSourceBean"  init-method="init" destroy-method="close">
    <qualifier value="jmsRecoveryDatabaseSchema"/> 
    <property name="uniqueResourceName"><value>XADS1</value></property> 
    <property name="xaDataSourceClassName"> 
        <value>oracle.jdbc.xa.client.OracleXADataSource</value> 
    </property> 
    <property name="xaProperties"> 
        <props> 
            <prop key="URL">${jdbc.url}</prop> 
            <prop key="user">${jdbc.username}</prop> 
           <prop key="password">${jdbc.password}</prop> 
        </props> 
    </property> 
    <property name="poolSize"><value>1</value></property>
    <property name="testQuery" value="SELECT 1 FROM DUAL"/>
</bean> 
```

我希望它有帮助！

# javascript - 如何删除标记然后将标记添加到我的地图？

> ID：15637922
> 
> 赞同：1
> 
> 时间：2013-03-26T13:11:21.047
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试清除函数调用上所有标记的地图并加载新标记。

在堆栈上，我找到了这段代码，我在单击按钮时执行了该代码。它没有清除我的标记：

```
//clear markers
        google.maps.Map.prototype.clearMarkers = function() {
            for(var i=0; i < this.markers.length; i++){
                this.markers[i].setMap(null);
            }
            this.markers = new Array();
        }; 
```

清除标记后如何加载新标记？

我的谷歌地图是这样设置的：

```
 var locations = [['21st Amendment Brewery', 37.7824175, -122.3925921] ,['Allagash Brewing Company', 43.702697, -70.317975] ,['Anchor Brewing Company', 37.763487, -122.401367] ,['Anheuser-Busch', 38.5986606, -90.208751] ,['Ayinger Brewery', , ] ,['Bass Brewery', 52.8045853, -1.6281372] ,['Bear Republic Brewery', 38.6040452, -122.8599961] ,['Boston Beer Company', 42.314449, -71.103365] ,['Boulevard Brewing Company', 39.0821348, -94.5966532] ,['Brasserie des Franches-Montagnes', 47.2542808, 7.0025782] ,['Breckenridge Brewery', 39.723597, -105.000614] ,['Brewery Ommegang', 42.6818046, -74.9254739] ,['Brooklyn Brewery', 40.721535, -73.95745] ,['Brouwerij Artois', 50.8870692, 4.7025108] ,['Brouwerij Huyghe', 50.99832, 3.79404] ,['Buffalo Bills Brewery', 37.6738157, -122.0813029] ,['Butternuts Beer and Ale', 42.6290648, -75.1854868] ,['Caldera Brewing', 42.184409, -122.663147] ,['Cervecera Cuauhtmoc-Moctezuma', 25.6375417, -100.2946801] ,['Clipper City Brewing Company', 39.230827, -76.6751309] ,['Coors Brewing Company', 39.759876, -105.219026] ,['Cricket Hill Brewing Company', 40.872566, -74.296359] ,['D.G. Yuengling and Son', 40.6999592, -76.1747169] ,['Dogfish Head Craft Brewery', 38.770622, -75.310893] ,['DuClaw Brewing Company', 39.496656, -76.329843] ,['Erie Brewing Company', 42.111185, -80.112978] ,['Evolution Craft Brewing Company', 38.4622609, -75.5741469] ,['Firestone Walker Brewing Company', 35.595325, -120.693728] ,['Flying Dog Brewery', 39.361926, -77.424677] ,['Fordham Brewing Company', 39.1540034, -75.4883626] ,['Founders Brewing Company', 42.958468, -85.673516] ,['Fulton Brewing Company', 44.9849423, -93.2790206] ,['Goose Island Beer Company', 41.887107, -87.6720969] ,['Gordon Biersch Brewing', 37.354139, -121.89286] ,['Grand Canyon Brewing Company', 35.249954, -112.1891462] ,['Great Divide Brewing Company', 39.753646, -104.9884698] ,['Green Flash Brewing Company', 32.905722, -117.176517] ,['Grupo Modelo S.A. de C.V.', 19.422447, -99.209758] ,['Guinness', 53.34309, -6.290799] ,['Harpoon Brewery', 43.512997, -72.401527] ,['Heavy Seas', 39.230827, -76.6751309] ,['Heineken International', , ] ,['Hoppin Frog Brewery', 41.0245928, -81.4677107] ,['Jacob Leinenkugel Brewing Company', 44.943321, -91.3953049] ,['Lagunitas Brewing Company', 38.272435, -122.662346] ,['Magic Hat Brewing Company', 44.428405, -73.213148] ,['Maui Brewing Company', 20.972149, -156.677334] ,['Mendocino Brewing Company', 38.9734335, -123.1162429] ,['MillerCoors Brewing Company', 43.044464, -87.962562] ,['Narragansett Brewing Company', 41.8190249, -71.4097368] ,['New Belgium Brewing', 40.593415, -105.066874] ,['North Coast Brewing Company', 39.446471, -123.806238] ,['Old Dominion Brewing Company', 39.1540034, -75.4883626] ,['Oskar Blues Brewery', 40.139056, -105.121887] ,['Pabst Brewing Company', 29.4497864, -98.5386319] ,['Port Brewing Company', 33.141417, -117.150076] ,['Port City Brewing Company', 38.8081958, -77.1014693] ,['RJ Rockers Brewing Company', 34.948639, -81.935726] ,['Rock Art Brewery', 44.557791, -72.608085] ,['Rogue Ales', 44.620173, -124.0520565] ,['Schneider Weisse', 48.91755, 11.87451] ,['Scottish & Newcastle Breweries', 55.954155, -3.202774] ,['Shipyard Brewing', 43.6618784, -70.2489402] ,['Sierra Nevada Brewing Company', 39.7246028, -121.8157154] ,['Sixpoint Craft Ales', 40.6739317, -74.0119473] ,['Sleeman Breweries Ltd.', 43.4870365, -80.2067709] ,['Smuttynose Brewing Co.', 43.032502, -70.7947688] ,['Southern Tier Brewing Company', 42.088931, -79.350342] ,['Spaten-Franziskaner-Bräu', 48.14501, 11.55419] ,['Staatliches Hofbräuhaus (Hofbräu München)', 48.1373073, 11.580357] ,['Stone Brewing Company', 33.115682, -117.119552] ,['Stoudts Brewery', 40.2422441, -76.0540026] ,['Sudwerk', , ] ,['Surly Brewing Company', 45.04285, -93.324557] ,['The Bronx Brewery', 40.80828, -73.930669] ,['The Duck-Rabbit Craft Brewery', 35.600267, -77.597058] ,['The Lost Abbey', 33.141417, -117.150076] ,['The Saint Louis Brewery', 38.632968, -90.209769] ,['Tröegs Brewing Company', 40.304, -76.643519] ,['Unibroue', 45.466125, -73.290924] ,['Union Craft Brewing Company', 39.331938, -76.641971] ,['Victory Brewing Company', 40.0061038, -75.6941546] ,['Wells and Young&#39;s Brewing Company', 52.132011, -0.481523] ,['Weyerbacher Brewing Company', 40.673181, -75.224926] ,['Widmer Brothers Brewing', 45.540795, -122.675594] ,['Yards Brewing Company', 39.962616, -75.136253]  

        ];

    var map = new google.maps.Map(document.getElementById('map_canvas'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

        var bounds = new google.maps.LatLngBounds();
    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {
        var position = new google.maps.LatLng(locations[i][1], locations[i][2]);  
      marker = new google.maps.Marker({
        position: position,
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));

      bounds.extend(position);

    } //end for loop

    map.fitBounds(bounds); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:23:26.647

为了能够再次删除标记，您需要将它们保存在某个地方 - 这样您就可以在想要再次删除它们时循环它们。数组是一种方便的方法。

```
//create a (possibly global) array to store the markers
var markers = [];

...
//create the markers

for(...) {
     marker = new google.maps.Marker(...);
     markers.push(marker);
}

....
//destroy the markers

for (var i = markers.length-1; i >= 0; i--) {
     markers[i].setMap(null);
     delete markers[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:23:17.787

```
for (var i = 0; i < markers.length; i++)
{
markers[i].setMap(null);
}
markers.length = 0; 
```

首先删除所有标记，如上面的片段。然后你可以再次使用

```
 marker = new google.maps.Marker({
    position: position,
    map: map
  }); 
```

创建新的标记

# php - 将 mySQL AS 结果分配给变量

> ID：15637923
> 
> 赞同：0
> 
> 时间：2013-03-26T13:11:22.400
> 
> 标签：php, mysql

我试图将`AS`mySQL 语句中的变量分配给变量，以便处理结果。但是我无法将 分配给这些变量。

mySQL`SELECT`语句如下

```
$sql = "SELECT min(ups) AS minups, max(ups) AS maxups, min(downs) AS mindowns, max(downs) AS maxdowns, min(score) AS minscore, max(score) AS maxscore, min(comments) AS mincomments, max(comments) AS maxcomments, min(totalVotes) AS mintotalvotes, max(totalVotes) AS maxtotalvotes FROM reddit WHERE movie = ':movie'";
    $stmt = $conn->prepare( $sql );
    $stmt->bindValue( ":movie", $redditMovies->reddit, PDO::PARAM_INT );
    $stmt->execute();
    $row = $stmt->fetch(); 
```

我正在尝试将它们分配给这些变量

```
$minups = $row ['minups'];
$maxups = $row ['maxups'];
$rups = (int)($maxups - $minups);
print_r($rups);
$mindowns = $row ['mindowns'];
$maxdowns = $row ['maxdowns'];
$rdowns = (int)($maxdowns - $mindowns);
$minscore = $row ['minscore'];
$maxscore = $row ['maxscore'];
$rscore = (int)($maxscore - $minscore);
$mincomments = $row ['mincomments'];
$maxcomments = $row ['maxcomments'];
$rcomments = (int)($maxcomments - $mincomments);
$mintotalvotes = $row ['mintotalvotes'];
$maxtotalvotes = $row ['maxtotalvotes'];
$rtotalvotes = (int)($maxtotalvotes - $mintotalvotes); 
```

我需要改变什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:15:55.313

尝试删除查询中的括号，例如，

```
movie = ':movie' to movie = :movie 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:24:22.713

使用此代码。use**`extract($row)`**用于直接为**$row**数组中**的键分配值**

 **```
 $stmt = $conn->prepare("SELECT min(ups) AS minups, max(ups) AS maxups, min(downs) AS mindowns, max(downs) AS maxdowns, min(score) AS minscore, max(score) AS maxscore, min(comments) AS mincomments, max(comments) AS maxcomments, min(totalVotes) AS mintotalvotes, max(totalVotes) AS maxtotalvotes FROM reddit WHERE movie = ':movie'");
    $stmt->bindValue( ":movie", $redditMovies->reddit, PDO::PARAM_INT );
    $stmt->execute();
    $row = $stmt->fetch();

    extract($row);
    echo $minups;  // it prints the minups value from the result set $row.

    $rups = (int)($maxups - $minups);
    $rdowns = (int)($maxdowns - $mindowns);
    $rscore = (int)($maxscore - $minscore);
    $rcomments = (int)($maxcomments - $mincomments);
    $rtotalvotes = (int)($maxtotalvotes - $mintotalvotes); 
```

这个提取（$行）；用于分配键的值

例子：

```
$row['maxups']=5;
$row['minups']=2;
extract($row);   
echo $maxups."-".$minups; 
```

输出：5-2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:18:21.977

尝试这个

```
echo '<pre>';
 print_r($row); 
```

如果数组中没有值，请检查查询是否有任何错误**

# haskell - wxHaskell 程序在 Windows XP 上启动很慢

> ID：15637925
> 
> 赞同：2
> 
> 时间：2013-03-26T13:11:29.250
> 
> 标签：haskell, wxhaskell

我写了一个 wxHaskell 程序，它在 Mac 上表现得非常好。但是经过很多麻烦并在 Windows XP 上安装了 wxHaskell，我的程序需要几分钟才能启动。目前，wx 库是共享的（DLL）。有谁知道是什么问题？

```
MinGW 20120426

wxWidget: 2.9.4

Haskell Platform 2012.4.0.0 
```

# php - Nginx 从 php 关闭 keep-alive 连接

> ID：15637933
> 
> 赞同：3
> 
> 时间：2013-03-26T13:11:57.047
> 
> 标签：php, nginx, http-headers, connection, keep-alive

**大家好**

我在使用 nginx 服务器时遇到问题。我已经为 nginx 配置了保持活动连接。

keepalive_timeout 65;

并通过持久连接连接到服务器，我在同一连接中向服务器发送了许多请求。

我想从 php 关闭持久连接。php exit and die 命令关闭响应，而不是连接。并且客户端可以在同一连接中重新发送到服务器请求。

简单地说，我想从 php 关闭持久连接

我使用这个命令，

标头（'连接：关闭'）；

但不受影响，连接仍然存在

如何从php关闭http连接

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-01T01:03:29.143

我花了很长时间才找到答案。

在 PHP 中，您需要调用：

```
fastcgi_finish_request(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:17:12.230

从这个[servfault 答案](https://serverfault.com/a/480181/65727)看来，您可以通过在 nginx fastcgi 处理程序中允许此标头来尝试它。

```
fastcgi_pass_header Connection-close; 
```

# c# - 不从 Control 继承的 C# 自定义单击事件

> ID：15637934
> 
> 赞同：0
> 
> 时间：2013-03-26T13:11:59.100
> 
> 标签：c#

我可以实现一个自定义点击事件，当用户点击我的对象时引发。

我的对象没有继承任何类，但它具有 Location Width Height 属性。

问题是：我不知道创建 MyObj 时如何订阅点击事件的代码。

```
public delegate void CusEventHandler(object sender, CusEventArgs e);
public class MyObject
{
    private Point location;
    private int width;
    private int height;
    public event CusEventHandler Click;
    public MyObject(Point loc, int w, int h)
    {
        this.location = loc;
        this.width= w;
        this.height= h;
    }
    protected virtual void OnClick(CusEventArgs e)
    {
        if (Click != null)
        {
            Click(this, e);
        }
    }
}
public partial class Form1 : Form
{
    public MyObject myObj;
    public Form1()
    {
        InitializeComponent();
        myObj = new (new Point(5,5),100,100);
        myObj.Click+= new CusEventHandler(myObj_click);
    }
    private void myObj_click(object sender,CusEventArgs e)
    {
        //Some logic
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:16:14.633

您重新开始从 Control 继承您的类，因此命中测试已经为您完成。另见[这篇文章。](https://stackoverflow.com/questions/11172866/winforms-customcontrol-hit-test)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:14:28.327

如果你不能复制可点击控件中使用的逻辑，`System.Windows.Controls.Button`那么你就不能这样做。您必须从提供 - 事件的控件继承`Click`。这就是为什么存在继承，并且大多数控件都允许您从它们继承。

此外，如果您的控件确实继承自基类，`System.Windows.Controls.Control`您也不能在 Windows 中使用它。

见[这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.aspx)。

# ruby-on-rails - Mongoid::Paranoia 删除关联

> ID：15637940
> 
> 赞同：1
> 
> 时间：2013-03-26T13:12:18.163
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, mongoid

user.rb 模型

```
class User
  include Mongoid::Document
  include Mongoid::Paranoia
  has_many :posts, dependent: :destroy, :autosave => true
end 
```

post.rb 模型

```
class Post
  include Mongoid::Document
  belongs_to :user
  field :title
end 
```

如果我在控制台中运行下一个命令：

```
irb(main):020:0> u = User.first
=> #object here
irb(main):021:0> u.delete
=> true
irb(main):022:0> u.posts
=> nil 
```

如果我尝试调用**用户帖子**，我可以看到所有**用户帖子**都已被删除。**只有**当用户从我的数据库中永久销毁时，我才想删除所有用户帖子`u.destroy`。

**如果我删除一个对象，我如何将所有相关对象保留在我的数据库中，`Mongoid::Paranoia` `u.delete`因为这个对象可以在以后恢复`u.restore`**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:00:05.710

您可以覆盖由提供的[`remove`方法](https://github.com/mongoid/mongoid/blob/v3.1.2/lib/mongoid/paranoia.rb#L60)，以便省略调用：`User``Mongoid::Paranoia``cascade!`

```
 def remove(options = {})
    # don't cascade the remove call
    # cascade!
    time = self.deleted_at = Time.now
    paranoid_collection.find(atomic_selector).
      update({ "$set" => { paranoid_field => time }})
    @destroyed = true
    IdentityMap.remove(self)
    Threaded.clear_options!
    true
  end
  alias :delete :remove 
```

现在`u.delete`将保留所有相关帖子，`u.delete!`并将其永久删除。

# node.js - node.js - socket.io 解析请求的 url

> ID：15637941
> 
> 赞同：7
> 
> 时间：2013-03-26T13:12:18.550
> 
> 标签：node.js, url, request

我想解析一个请求的 url。当我使用 Socket.IO 时，我有一个可以解析的请求对象。如何从 URL 中获取路径？

例如：

```
http://localhost:4000/foo 
```

我需要从 URL 中提取“foo”。

我试过了 ：

```
io.sockets.on('connection', function (socket){
    console.log(socket.handshake.address.address);
    console.log(socket.handshake.url);
} 
```

但是他们不打印“foo”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T21:41:51.267

顺便说一句——如果您向 socketio 连接提供参数而不是路径元素，那么您的方法*是正确的。*[当使用https://github.com/pkyeck/socket.IO-objc](https://github.com/pkyeck/socket.IO-objc)和 nodejs socketio 将参数添加到我的套接字连接 时，它解决了我的问题。

例如：

```
[socketIO connectToHost:@"localhost" onPort:8888 withParams:[NSDictionary dictionaryWithObject:@"52523f26f5b23538f000001c" forKey:@"player"]]; 
```

构造 URL 如下：

```
http://localhost:8888/socket.io/1/?t=16807&player=52523f26f5b23538f000001c 
```

这些参数可以在服务器上的 socket.handshake.query 中访问

```
socketio.listen(server).on('connection', function(socket) {
console.log('socket info = ', socket.handshake.query.player); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-20T19:58:20.670

我正在访问这样的网址：

```
io.on('connection', function(conn){
    console.log(conn.handshake.headers.referer);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:16:23.017

使用 URL api。[http://nodejs.org/docs/latest/api/url.html](http://nodejs.org/docs/latest/api/url.html)

```
u = url.parse(url)
console.log(u.path) 
```

# asp.net - 在 asp.net 4.0 中一次路由所有 aspx 页面

> ID：15637942
> 
> 赞同：0
> 
> 时间：2013-03-26T13:12:21.190
> 
> 标签：asp.net, c#-4.0

我正在尝试编写一行代码，以便在我的 webform 应用程序中路由所有 .aspx 文件。目前，我必须为每个页面创建单独的代码行来处理。有没有办法在单个代码中实现这一目标？这是我对每一页所做的。

```
System.Web.Routing.RouteTable.Routes.MapPageRoute("dealerinforoute", "DealerInfo", "~/DealerInfo.aspx");
    System.Web.Routing.RouteTable.Routes.MapPageRoute("defaultroute", "Home", "~/Default.aspx");
    System.Web.Routing.RouteTable.Routes.MapPageRoute("orderroute", "Order", "~/Order.aspx");
    System.Web.Routing.RouteTable.Routes.MapPageRoute("addplanroute", "AddPlan", "~/AddPlan.aspx");
    System.Web.Routing.RouteTable.Routes.MapPageRoute("dealerTagroute", "DealerTag", "~/DealerTag.aspx");
    System.Web.Routing.RouteTable.Routes.MapPageRoute("proofroute", "Proof", "~/Proof.aspx"); 
```

我想知道我是否可以做类似的事情

```
System.Web.Routing.RouteTable.Routes.MapPageRoute("routeaspxfiles", "/{pg}", "~/*.aspx"); 
```

即使我尝试使用上面的代码，它也会出错。请告知是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:36:12.687

在 Application_Start 方法中向 global.asax 文件添加路由规则的最佳方法

```
void Application_Start(object sender, EventArgs e)
 {
 // Code that runs on application startup
 RouteTable.Routes.MapPageRoute("StoreRoute",
  "BookStore/{Name}",
 "~/Webpages/BookStore/ViewBookDemo.aspx");
 } 
```

# php - 提交表单时整数的输入语法无效

> ID：15637944
> 
> 赞同：0
> 
> 时间：2013-03-26T13:12:23.533
> 
> 标签：php, sql, forms, postgresql

我正在尝试将数据从简单表单发送到 PostgreSQL 数据库，但我的服务器日志显示错误`Query failed: ERROR: invalid input syntax for integer`有问题的代码部分是：

形式：

```
<form action="insert.php" method="post">
[removed]
Total Pages: <input type="number" name="totalPages" id="totalpages"><br><br>
<input type="submit"> </form> 
```

错误消息中指示的 insert.php 中的行：

```
pg_query("INSERT INTO books(coverurl, title, author, genre, totalpg)
VALUES('".$_POST['coverURL']."','".$_POST['title']."','".$_POST['author']."','".$_POST['genre']."','".$_POST['totalpages']."')"); 
```

在网上环顾四周，我找到了提到不正确使用`'`和`"`符号的解决方案，但这只会导致其他语法错误。

编辑：没有提到`totalpg`在我的数据库中是一个 smallint

**解决方案：感谢 JoDev 的帮助，更改`'".$_POST['totalpages']."'`为`".intval($_POST['totalPages'])."`，现在可以完美运行。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:17:45.240

也许可以确定 POST 值，并删除引号：

```
pg_query("INSERT INTO books(coverurl, title, author, genre, totalpg)
VALUES('".$_POST['coverURL']."','".$_POST['title']."','".$_POST['author']."','".$_POST['genre']."',".intval($_POST['totalPages']).")"); 
```

**[编辑]**
你在 HTML 表单和 PHP 之间犯了一个错误。您的值的正确大小写是：**P**是属性`$_POST['totalPages']`的maj。****`name`****

 **您的表格是：

```
Total Pages: <input type="number" name="totalPages" id="totalpages"> 
```

这个名字很好**totalPages** ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:17:44.690

如果您的字段是整数，请考虑`(int)`在将值附加到查询之前使用 int 强制转换。但是请注意，在将所有其他变量附加到查询之前，[必须对其进行转义，因为其中一个变量可能包含使查询无效的字符串。](http://php.net/pg_escape_string)

例如，如果`$_POST['title']`将包含值：`Why Hackers Don't Want You To Escape Strings`，则查询将变为：

```
INSERT INTO books(coverurl, title, author, genre, totalpg)
VALUES('http://example.com/','Why Hackers Don't Want You To Escape Strings','J. Doe','Educational','400'); 
```

...这是无效的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:16:05.603

看起来您正在尝试在数字字段中添加文本。

你有没有试过这个：

```
pg_query("INSERT INTO books(coverurl, title, author, genre, totalpg)
VALUES('".$_POST['coverURL']."','".$_POST['title']."','".$_POST['author']."','".$_POST['genre']."',".$_POST['totalpages'].")"); 
```**

# xcode - 如何将模态转场（以编程方式）设置为推送转场

> ID：15637945
> 
> 赞同：3
> 
> 时间：2013-03-26T13:12:34.920
> 
> 标签：xcode, ios6, uinavigationcontroller, xcode4.5, pushviewcontroller

我的故事板中有一个导航控制器，但出于一个原因，我必须以编程方式制作一个 segue，但我如何以编程方式制作推送 segue？

到目前为止，这是我的代码：

```
- (IBAction)nextviewButton:(id)sender {
    HolesViewController *Holes = [self.storyboard instantiateViewControllerWithIdentifier:@"HolesViewController"];
    Holes.nameString = self.NameField.text;

    [self presentViewController:Holes animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T02:13:55.247

或者，我实际上更喜欢在我的故事板中定义一个 segue，但不是源自按钮，而是源自视图控制器本身，例如：

![创建转场](../Images/782faad7247d67580468c56ca18a73e9.png)

然后，给那个 segue 一个“storyboard id”，说“Details”，然后你可以通过以下方式以编程方式调用那个 segue：

```
[self performSegueWithIdentifier:@"Details" sender: ...]; // you can specify either the button or `self` for the `sender 
```

我喜欢这样，因为这样，故事板继续在视觉上代表应用程序的流程（而不是可能有没有转场的场景漂浮在那里）。您可以对推送和模态 segue 使用完全相同的结构（并且呈现下一个视图控制器的视图控制器并不关心情节提要使用哪个）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T13:32:58.803

```
[self.navigationController pushViewController:Holes animated:YES]; 
```

知道了

# amazon-web-services - 如何在 CloudFormation 脚本中获取当前日期？

> ID：15637947
> 
> 赞同：17
> 
> 时间：2013-03-26T13:12:42.257
> 
> 标签：amazon-web-services, amazon-cloudformation

我在我的 cfn 脚本中使用标签来标记我的资源：

```
"Tags" : [ { "Key" : "Owner",       "Value" : "my name" },
           { "Key" : "Name",        "Value" : "instance name" } 
           { "Key" : "DateCreated", "Value" : <something goes here> } 
         ], 
```

我想根据上面的示例创建一个带有当前日期的标签。可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-03-28T14:37:46.620

您可以使用“自定义资源”来生成时间戳（或任何其他值）。

[自定义资源](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources.html)是 CloudFormation 中的一项新功能（大约在 2014 年推出），允许您基本上调用 lambda 函数来“创建”、“更新”或“删除” CloudFormation 不提供语言支持的资源（甚至可以是外部资源AWS）。

我经常使用自定义资源来计算一些值以用于堆栈的其他部分，例如创建“变量”来保存`!Join`我需要经常使用并希望计算一次的计算值（例如 using 和类似函数） .

您可以轻松地使用自定义资源来生成时间戳。这是一些与我在生产中实际使用的代码非常接近的示例代码：

## 创建“资源”实现

```
Resources:
  ValueFunc:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        ZipFile: >
          var r = require('cfn-response');
          exports.handler = function(ev, ctx) {
            ev.ResourceProperties.Time = new Date().toISOString();
            r.send(ev, ctx, r.SUCCESS, ev.ResourceProperties);
          }; 
      Handler: index.handler
      Runtime: nodejs6.10
      Timeout: 30
      Role: !GetAtt ValueFunctionExecutionRole.Arn

  ValueFunctionExecutionRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal: { Service: [ lambda.amazonaws.com ] }
            Action: sts:AssumeRole
      Policies:
        - PolicyName: 
            Fn::Sub: "value-custom-res-${AWS::StackName}-${AWS::Region}"
          PolicyDocument:
            Version: 2012-10-17
            Statement:
              - Effect: Allow
                Action:
                  - logs:CreateLogGroup
                  - logs:CreateLogStream
                  - logs:PutLogEvents
                Resource: "arn:aws:logs:*:*:*"
              - Effect: Allow
                Action: cloudformation:DescribeStacks
                Resource: "arn:aws:cloudformation:*:*:*" 
```

然后，无论您想在哪里生成时间戳，都可以执行以下操作（从[此处](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-as-scheduledaction.html)获取的计划操作示例）：

## 创建一个计算其创建时间的自定义资源

```
GetTimeThisTime:
  Type: Custom::Value
  Properties:
    ServiceToken: !GetAtt ValueFunc.Arn 
```

## `Time`使用属性读取创建的时间戳

```
ScheduledActionUp: 
  Type: AWS::AutoScaling::ScheduledAction
  Properties:
    AutoScalingGroupName: !Ref WebServerGroup
    DesiredCapacity: 2
    StartTime: !GetAtt GetTimeThisTime.Time
    Recurrence: "0 7 * * *" 
```

您可以在堆栈创建的不同时间生成多个时间戳，只需创建一个新的“自定义值”，该值取决于您要为其创建时间的逻辑实体。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-26T23:57:30.217

@Guy 的建议是正确的，您可以从堆栈属性访问堆栈的创建时间戳。

如果您仍需要将标签指定为参数，则可以通过以下方式进行。[目前，JSON 语法支持的功能](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html)非常有限。因此，动态修改模板的可能性非常小。我看到引入此标签的唯一方法是向模板本身添加另一个参数。根据您初始化堆栈的方式，您可以编写要动态指定的参数的脚本或在 Web 控制台中提供它。

例如，如果您的模板中有这个：

```
 "Parameters" : {
    "CreationDate" : {
      "Description" : "Date",
      "Type" : "String",
      "Default" : "2013-03-20 21:15:00",
      "AllowedPattern" : "^\\d{4}(-\\d{2}){2} (\\d{2}:){2}\\d{2}$",
      "ConstraintDescription" : "Date and time of creation"
    }
  }, 
```

您可以稍后在标签中使用 Ref 关键字来引用它，如下所示：

```
 "Tags" : [ { "Key" : "Owner",       "Value" : "my name" },
            { "Key" : "Name",        "Value" : "instance name" },
            { "Key" : "DateCreated", "Value" : { "Ref" : "CreationDate" } } 
          ], 
```

如果您从 AWS 控制台创建堆栈，自动分配当前时间并非易事，但如果您使用 CLI 工具，您可以像这样调用 cfn-create-stack：

```
 cfn-create-stack MyStack --template-file My.template --parameters "CreationDate=$(date +'%F %T')" 
```

希望这可以帮助！

# asp.net - 代理类不调用 Web 服务

> ID：15637951
> 
> 赞同：0
> 
> 时间：2013-03-26T13:12:59.783
> 
> 标签：asp.net, visual-studio-2010, web-services, vb.net-2010

我正在尝试调用未在其网站上发布 wsdl 的 Web 服务。该服务的开发人员给了我 wsdl 文件以从中生成代理类。

我已经使用 VS2010 svcutil.exe 命令成功生成了文件。我将文件包含在我正在处理的项目中，但是，在调用 web 服务时，没有请求发出，正如我用来检查传出请求和响应的 fiddler2 所证明的那样。

在下面的文件中，我将从数据库中获取数据，但出于测试原因，我只是通过静态信息发送。

```
Imports System.Data
    Imports System.ServiceModel
    Imports System.Web.UI.Page
    Imports System.Math 
    Imports MusicShop.Album.Song
    Public Class webservicetest
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim Song As New request
        Try
            Song.songname() = "TameMeHome"
            Song.trackNumber() = Convert.ToInt32("1")
            Song.requestNumber() = Convert.ToInt32("5689")
            Song.language() = "english"
            Song.albumtitle() = "GetMeThere"
            Song.totalAlbums() = Convert.ToDecimal("35")

            Dim songresponse As New responce

            Label1.Text = songresponse.errorMessage()
            Label2.Text = songresponse.requestDateTime()
            Label3.Text = songresponse.requestNumber()
            Label4.Text = songresponse.status()
        Finally
        End Try
    End Sub

    End Class 
```

==app.config 文件的一部分==

```
 <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_Songinformation" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="Transport">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="urlWherewebserviceIsDeployed"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Songinformation"
                contract="Songdata" name="BasicHttpBinding_Songdata" />
        </client>
    </system.serviceModel> 
```

==代理类文件的一部分==

```
Option Strict Off
Option Explicit On

Imports System.Runtime.Serialization
<Assembly: System.Runtime.Serialization.ContractNamespaceAttribute("URLForDataContract", ClrNamespace:="New MusicShop.Album.Song")> 

Namespace New MusicShop.Album.Song

    <System.Diagnostics.DebuggerStepThroughAttribute(), _
     System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0"), _
     System.Runtime.Serialization.DataContractAttribute(Name:="Request", [Namespace]:="URLforDataContract")> _
    Partial Public Class Request
        Inherits Object
        Implements System.Runtime.Serialization.IExtensibleDataObject

        Private extensionDataField As System.Runtime.Serialization.ExtensionDataObject

        Private albumtitle As String

        Private songname = As String

        Private trackNumber As Integer

        Private language As String

        Private requestNumber As UInteger

        Private totalAlbums As Integer

        Public Property ExtensionData() As System.Runtime.Serialization.ExtensionDataObject Implements System.Runtime.Serialization.IExtensibleDataObject.ExtensionData
            Get
                Return Me.extensionDataField
            End Get
            Set(ByVal value As System.Runtime.Serialization.ExtensionDataObject)
                Me.extensionDataField = Value
            End Set
        End Property

        <System.Runtime.Serialization.DataMemberAttribute(IsRequired:=True)> _
        Public Property albumtitle() As String
            Get
                Return Me.albumtitle
            End Get
            Set(ByVal value As String)
                Me.albumtitlebox = Value
            End Set
        End Property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:15:19.833

你从来没有打电话给服务。您所做的只是创建一个空响应，然后从中获取（空）数据。

# log4j - log4j 第一行未正确对齐

> ID：15637959
> 
> 赞同：0
> 
> 时间：2013-03-26T13:13:25.323
> 
> 标签：log4j

我面临一些关于日志消息的问题。当我生成日志报告时，第一行没有以正确的对齐方式显示，但日志消息的其余部分按正确的顺序显示。我检查了日志模式，但没有找到任何关于该问题的线索。

有人可以建议我如何解决这个问题吗？

**输出：**

```
INFO|------------------------------- Start Control Information --------------------------    
  INFO|***********                                                                           
  INFO|**********************                                                        
  INFO|*****  ************************                                           
  INFO|Doc***** Version :  6.7.0004.0217  Win64.SQLServer                                
  INFO|------------------------------ End Control Information -----------------------------
  INFO|                                                                                              
  INFO|******************                                                              
  INFO|*************** :                                                                   
  INFO|Version identifiers :                                                                     
  INFO|***********

here , first line(INFO|------------------------------- Start Control Information -------------------------- 
```

只有第一行没有正确对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:42:14.693

记录器消息是根据 log4j.properties 的模式布局生成的。如果您想对记录器消息进行 alignmnet，您可以使用如下模式布局。

```
 log4j.rootLogger=DEBUG, CA
    log4j.appender.CA=org.apache.log4j.ConsoleAppender
    log4j.appender.CA.layout=org.apache.log4j.PatternLayout
    log4j.appender.CA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

# matplotlib - matplotlib：图例标题的对齐方式

> ID：15637961
> 
> 赞同：28
> 
> 时间：2013-03-26T13:13:40.363
> 
> 标签：matplotlib

在 matplotlib 中，如何调整*图例标题*的对齐方式？它始终居中，但我需要它与图例框对齐。我试图更改标题的文本艺术家的对齐方式，但没有效果。有关详细信息，请参见以下示例：

```
from pylab import *

x = linspace(0, 1)
plot(x, x, label="1")
plot(x, x**2, label="2")
plot(x, x**3, label="3")
plot(x, sqrt(x), label="square root")

l = legend(title="Title", loc="best")
l.get_title().set_ha("left")               # <== does not work

show() 
```

问题归结为什么以及谁控制标题对齐的锚点？将对齐方式更改为“右”或“中心”会产生明显的效果。第二个观察：对于长标题字符串，锚点移动到图例框的左边框......

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-06-19T00:04:17.043

您可以对齐完整的图例框设置`leg._legend_box.align`。这将对齐图例框内的所有内容，但效果是希望将标题放在框的两侧而不是中心。

*   **左对齐**

    ```
    leg = plt.legend(title="Title")
    leg._legend_box.align = "left" 
    ```

    [![在此处输入图像描述](../Images/c3464a4126fb4121ef2fd18466ef5d01.png)](https://i.stack.imgur.com/CZESp.png)

*   **右对齐**

    ```
    leg = plt.legend(title="Title")
    leg._legend_box.align = "right" 
    ```

    [![在此处输入图像描述](../Images/f8eaa2be90861185b7b0095948bc0ce4.png)](https://i.stack.imgur.com/dymmZ.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T13:49:38.050

我认为您需要使用该方法置换`Text`对象。和`set_position((x, y))`的单位是像素，因此您必须尝试哪些值看起来正确，或者使用. 我不确定哪种组合可能最有用。`x``y``Transform``Transforms`

所以简而言之，这样的事情可能会起作用：

```
l.get_title().set_position((-10, 0)) # -10 is a guess 
```

# tcl - 如何检查 expect_out(buffer) 中的某个字符串，如果找到则打印 expect_out(buffer)？

> ID：15637964
> 
> 赞同：0
> 
> 时间：2013-03-26T13:13:47.350
> 
> 标签：tcl, expect

我想检查我的`expect_out(buffer)`包含是否`%`作为任何行上的第一个字符，如果找到它，然后打印 wole expect out contants。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:59:20.723

[regexp](http://www.tcl.tk/man/tcl8.6/TclCmd/regexp.htm)的 -lineanchor 选项使 ^ 匹配行的开头，而不仅仅是字符串的开头。

```
if {[regexp -lineanchor -- {^%} $buffer]} {
    puts -nonewline $buffer
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:28:19.837

我对expect不太熟悉。但如果它只是一个普通的 tcl 字符串，例如：

```
%line1
^line2
&line3 
```

然后你可以这样做：

```
set buffer "%line1\n^line2\n&line3"
foreach line [split $buffer "\n"] {
    if {[string index $line 0] == "%"} {
        puts $buffer; # prints the entire buffer, puts $line prints this line only
        break
    }
} 
```

# c# - 无法删除该对象，因为它在实体框架 5 的 ObjectStateManager 中找不到

> ID：15637965
> 
> 赞同：23
> 
> 时间：2013-03-26T13:13:55.190
> 
> 标签：c#, entity-framework-5

我正在尝试使用 EntityFramework 5 删除对象，但出现此错误。 *无法删除该对象，因为它在 ObjectStateManager 中找不到*
我正在使用EF5 中不存在的`Remove()`方法。`DeleteObject()`谁能帮助我错过什么？

这不适用于删除

```
localDb.Customers.Remove(new Customer() { CustomerId = id });
                localDb.SaveChanges(); 
```

我尝试从 msdn 将状态更改为已删除的另一件事。但是这里它给出了一个错误，说所有的字段都应该存在。是否有必要获取完整的记录然后删除？

```
var customer = new Customer(){ CustomerId = id };
                localDb.Customers.Attach(customer);

                localDb.Entry(customer).State = EntityState.Deleted;
                localDb.SaveChanges(); 
```

有什么输入吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-26T13:25:37.320

您可以从数据库中获取该行，然后将其删除，但这会导致 2 次往返数据库。

如果您想一次性完成，您的第二个版本`Attach`将起作用 - 只要实体尚未加载到上下文中。

您遇到的错误是由在任何数据库写入之前运行的 EF 验证引起的。

您可以像这样暂时关闭它：

```
bool oldValidateOnSaveEnabled = localDb.Configuration.ValidateOnSaveEnabled;

try
{
  localDb.Configuration.ValidateOnSaveEnabled = false;

  var customer = new Customer { CustomerId = id };

  localDb.Customers.Attach(customer);
  localDb.Entry(customer).State = EntityState.Deleted;
  localDb.SaveChanges();
}
finally
{
  localDb.Configuration.ValidateOnSaveEnabled = oldValidateOnSaveEnabled;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-02T17:56:09.427

如果您从数据库中检索对象，则它已经附加到上下文中，因此您可以通过以下方式删除：

```
db.myTable.Remove(model); 
```

**但是，**
如果您刚刚从编辑或删除视图中收到模型，或者自己生成它以避免两次访问数据库，那么 EF 不知道它并且您在上面的行中遇到错误（..在 ObjectStateManager 中找不到..）所以您**将其状态设置为“已删除”以通过以下方式通知 EF**：

```
//generate it yourself if not posted from edit/delete view
//var model = new Model { Id = 123 };

//set to delete
db.Entry(model).State = EntityState.Deleted;
db.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T13:25:32.423

你能做到这一点吗？

```
var customer = localDb.Customers.Single(o => o.CustomerId == id);
localDb.Customers.Remove(customer);
localDb.SaveChanges(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-24T08:56:24.463

```
public T Delete<T>(T obj) where T : class
        {
            T existing = context.Set<T>().Find(GetKeys(obj, context));

            if (existing != null)
            {
                context.Set<T>().Remove(existing);
                context.SaveChanges();
                return existing;
            }
            return null;
        }

private object[] GetKeys<T>(T entity, DbContext context) where T : class
        {
            ObjectContext objectContext = ((IObjectContextAdapter)context).ObjectContext;
            ObjectSet<T> set = objectContext.CreateObjectSet<T>();
            var keyNames = set.EntitySet.ElementType
                                                        .KeyMembers
                                                        .Select(k => k.Name).ToArray();
            Type type = typeof(T);

            object[] keys = new object[keyNames.Length];
            for (int i = 0; i < keyNames.Length; i++)
            {
                keys[i] = type.GetProperty(keyNames[i]).GetValue(entity, null);
            }
            return keys;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-09T12:48:57.390

我知道这个问题已经很老了，但以上都没有对我有用，因为我一次从多个类/服务中删除寄存器，并且它们中的每一个都在实例化它自己的数据库连接上下文。

我为解决它所做的是将第一个创建的上下文发送到要访问数据库的其余类/服务。

例如，我`serviceA`打算删除它的一些寄存器并调用`serviceB`并对`serviceC`它们的寄存器做同样的事情。

然后我会删除我的寄存器`serviceA`并将在`serviceA`to`serviceB`和`serviceC`.

# javascript - Javascript识别文件上传完成

> ID：15637966
> 
> 赞同：0
> 
> 时间：2013-03-26T13:14:01.410
> 
> 标签：javascript, file-upload

我需要一个非常简单的javascript，当所有文件都上传后打印“文件上传完成”。如果文件的上传仍未完成，则打印“UPLOADING”。

我试过这个：

（首先，如果 javascript 非常糟糕，我深表歉意。我不知道如何编写 javascript 但我真的很想学习这门语言，只是不是现在，因为我还有其他更重要的事情要做。下面的代码是拼凑而成的从我在网上找到的各种代码一起，所以请更正您发现的所有错误并发布您可以建议的提示以更好和/或简化代码。我实际上发现 javascript 编码与 PHP 非常相似，除了使用的函数不同，我非常缺乏这方面的知识。）

**JAVASCRIPT**

```
<script>
function checkStatus() {
    var uFiles = document.getElementById("uploadInput").files
    var pFiles = uFiles.length
    var allFiles = new Array()
    for (a = 0; a < pFiles; a += 1) {
        allFiles[a] = uFiles[a].size;
    }
    for (b = 0; b < pFiles; b += 1) {
        if (totalvalue === 'undefined') {
            var totalvalue = allFiles[b];
        } else {
            var totalvalue = totalvalue + allFiles[b];
        }
        if (b == pFiles) {
            var status = 1;
        }
    }
    if (status != 1) {
        var funccomp = "INCOMPLETE"
    } else {
        var funccomp = "COMPLETE"
    }
    document.getElementById("filestatus").innerHTML = pFiles;
}
</script> 
```

**HTML**

```
 <form enctype="multipart/form-data" action="sample.php" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="5242880">
    <input id="uploadInput" name="uploadedfile[]" type="file" multiple onchange="checkStatus()"><div id="filestatus"></div>
    <input class="browse_submit" type="submit" value="BROWSE">
    </form> 
```

上面的代码非常错误。我希望你能告诉我该怎么做。感谢您的意见和建议。

# c++ - cond_broadcast 和调度顺序

> ID：15637973
> 
> 赞同：1
> 
> 时间：2013-03-26T13:14:16.117
> 
> 标签：c++, pthreads, mutex

我正在编写一个生产者/消费者程序。我有 3 个消费者从一个队列中读取数据，一个生产者在队列中写入数据。当生产者在队列中写入内容时，它使用 phtread_cond_broadcast 广播它。然后消费者醒来，但我在我的程序中找到了一个模式。其中一个消费者总是在其他消费者之前醒来，然后清除队列。我的问题是广播每次都以相同的顺序唤醒所有线程是否正常？

制片人：

```
pthread_mutex_lock(&mutex1);
if(/* write something */)
phtread_cond_broadcast(&cond1)
pthread_mutex_unlock(&mutex1); 
```

消费者 ：

```
pthread_mutex_lock(&mutex1);
while(/* queue vide */)
phtread_cond_wait(&cond1);
pthread_mutex_unlock(&mutex1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:53:22.060

根据手册页`If more than one thread is blocked on a condition variable, the scheduling policy determines the order in which threads are unblocked.`

因此，听起来如果一堆因素（调度策略、库版本等）相同，那么顺序也会相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:29:02.207

如果生产者写东西时只有一个消费者可能有工作要做，你应该考虑`pthread_cond_signal()`改用。这样你只会唤醒一个（根据文档，它可能不止一个），而不是所有的消费者。把他们全部叫醒会导致“雷声从众”现象，每个人都争先恐后地抢同样的工作项目，然后他们中的大多数人什么也没做就又睡着了。

# javascript - 在 EaselJS 中调整矩形的大小

> ID：15637982
> 
> 赞同：0
> 
> 时间：2013-03-26T13:14:55.967
> 
> 标签：javascript, html, html5-canvas, easeljs

我似乎完全迷失在 EaslJS 中。当我的函数被调用时，我不知道如何调整矩形的大小。

场景是这样的：我的玩家被击中，生命值降低，因此生命值条变小。

这是我创建健康栏的方式：

```
this.statusBar = new createjs.Shape()
this.statusBar.graphics
    .beginFill("red")
    .drawRect(0, 0, this.width, this.height);
this.statusBar.x = this.x+500;
this.statusBar.y = this.y;
this.statusBar.width = this.width;
this.statusBar.height = this.height; 
```

这就是我试图调整它的地方：

```
this.decreaseHealth = function(amount) {
    percentageLeft = (player.health/player.fullPlayerHealth)*100;
    console.log(this.fullBarWidth*(percentageLeft/100));
    this.statusBar.width = this.fullBarWidth*(percentageLeft/100);
} 
```

我`stage.update();`在我的循环中，所以它正在更新您可能期望的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:11:39.060

在easelJS 中，Shape 对象实际上是一个用于进行自定义绘图的控制器。

如果要更改内容，则必须重新绘制 Shape 的内容。

您将在 statusBar 控制器中绘制健康矩形，如下所示：

```
 // get a reference to the html canvas element
    var canvas=document.getElementById("canvas");

    // create a new Stage
    var stage=new createjs.Stage(canvas);

    // create a new Shape
    // the shape object is actually a controller for doing custom drawings
    var shape=new createjs.Shape();

    // add the shape controller to the stage
    stage.addChild(shape);

    // draw a rectangle using the shape controller
    shape.graphics.clear().beginFill("#F00").drawRect(30,20,150,25);

    // display all updated drawings
    stage.update(); 
```

然后当你想改变一个球员的健康时，你会像这样重绘你的健康矩形：

```
 // redraw the health rectangle using the shape controller
    shape.graphics.clear().beginFill("#F00").drawRect(30,20,75,25);

    // display all updated drawings
    stage.update(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T23:59:11.883

MarkE 的回答是正确的，但值得注意的是，虽然 EasleJS 不支持“宽度”或“高度”属性，但您可以设置 scaleX/scaleY。要调整形状的大小，您可以将其绘制为 100%，然后在 0 和 1 之间进行缩放。

干杯。

# ruby-on-rails - 潜在无限类型的多态关联

> ID：15637983
> 
> 赞同：2
> 
> 时间：2013-03-26T13:14:56.290
> 
> 标签：ruby-on-rails, activerecord, abstract, polymorphic-associations, single-table-inheritance

好的，这就是我的情况。我是一名 PHP 开发人员，最近转为 Rails 开发人员。在 PHP 代码中，使用抽象类作为“基”类是一种非常常见的模式。在迁移到我当前的 Rails 应用程序时，我做了很多“预先计划”，脑子里有 PHP 的想法，现在让我有点头疼。

我有许多不同类型的发票。在 PHP 中，我将创建一个抽象类，并拥有扩展该类的不同类型的发票。我会通过在抽象类中保留重复的代码来干掉事情，生活是美好的。在 Rails 中，事情的工作方式有点不同。

我似乎找不到完全符合我先入为主的模式。STI 很好，但我讨厌所有 Null 字段的想法，因为每张发票都有许多不同的字段。我已经接近使用模块来干燥我的代码的多态关联。然而，在我看来，多态关联的使用方式与我想要的方式不同。例如，在 railscast 中有三个不同的类，每个类都需要使用注释。它不完全一样。

所以这是我的问题：我已经知道如何使用模块来干燥我的代码，但是如何使用多态关联为我的代码提供与 php 中的“基”类类似的模块化？仅供参考，我不能使用 STI，因为最终可以生成多少不同类型的发票没有限制。现在是 1，但一个月后可能是 20。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:19:14.477

您可以使用另一个选项：多表继承。设置起来有点复杂，但它会给您一些 STI 中不存在的优势，以及多态关联中不存在的一些优势。检查[这篇文章](http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/)以了解如何使这项工作。

# python - 可靠地识别正在运行的 shell

> ID：15637988
> 
> 赞同：0
> 
> 时间：2013-03-26T13:15:06.300
> 
> 标签：python, shell, popen

我有一个 Python 程序，它需要执行一个不同的进程（我用`subprocess.Popen`它）。我需要这个执行来表现得好像用户在 shell 命令提示符下键入了以下内容：

```
$ source path/to/some_file
$ ./some_program 
```

我希望我会使用`shell=True`某种形式的命令链接来首先运行`source`然后执行程序。但是，我面临以下问题：

启动我的 Python 程序的 shell 可以是`bash`, `sh`, `tcsh`（或者其他类型的`csh`）。我需要`some_file`根据正在运行的 shell 来寻找不同的来源。有没有办法确定这一点？无论是在 Python 中还是通过在里面运行一些东西`Popen(..., shell=True)`，两者都可以。

我正在考虑编写某种“shell polyglot”来从不同的 shell 中获得不同的输出，但是我的 shell 技能（尤其是在 csh 中）不能胜任这样的任务。我有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:25:08.370

使用哪个 shell`subprocess.Popen()`不是由用于启动 Python 的父 shell 决定的。相反，Python 使用的 shell 始终`/bin/sh`是默认的，如果需要，您可以通过在`Popen()`.

但实际上，可以为一种特定类型的 shell 编写任何给定的 shell 脚本。假设它是`bash`. 然后，您可以通过编写这样的 shell 脚本来简单地忽略 Python 端的这些细节：

```
#!/usr/bin/env bash
source path/to/some_file
exec ./some_program 
```

你去：一个完整​​的启动器脚本，它在开始时切换到 bash，获取必要的位，然后启动你的程序。任何合理的 shell 都应该能够运行它，所以现在您不必担心 Python 调用了哪个 shell……此外，您还有一种更可重复的方式来在 Python 之外启动您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:23:54.767

..生成外壳然后与之通信呢？

我的意思是，像这样：

```
proc = subprocess.Popen(['/bin/bash'], stdin=PIPE, stdout=PIPE)
proc.communicate("source path/to/some_file\n"
                 "./some_program\n") 
```

由于您想在特定的 shell 中执行两个命令，我认为这将是您拥有的最佳解决方案。

否则，您可能会发现您的 shell 接受诸如“初始化脚本”和“初始命令”之类的参数；在这种情况下，如果你只需要使用那个特定的 shell，你应该使用它们；例如，bash 接受`--init-file file`并且`-c command`可以完成这项工作（`--init-file`将被加载而不是 bashrc）。

# objective-c - App 更新 UIView 耗时过长

> ID：15637989
> 
> 赞同：0
> 
> 时间：2013-03-26T13:15:06.410
> 
> 标签：objective-c, user-interface, asynchronous

简而言之，我有一个应用程序，旨在显示存储在手机本地的一堆数据，在 CoreData 中。

我从 CoreData 中提取数据，然后将大约 70 个子视图添加到主 UIView。这会导致应用程序冻结（不响应），直到将所有子视图添加到主视图。

我想找到一种方法来异步添加所有子视图，以便应用程序不会冻结。

我尝试使用`performSelectorOnMainThread`，但它需要相同的时间。

我能做些什么？

谢谢。

[编辑] 每次按下按钮时，视图都必须更新自身，因此每次按下按钮时，它都会在数据库中搜索并更新视图，这意味着删除之前添加的所有子视图，并在主视图中添加大约 70 个子视图。

这有点像代码的样子：

```
currentEventsArray = I GET THE EVENTS FROM COREDATA
for(int i = 0; i < [currentEventsArray count]; i++){
    //I DO SEVERAL OPERATIONS WITH THE DATA AND THEN FINALLY...
    [self.view addsubview:aEventView];
 } 
```

currentEventsArray 可以有 50 到 80 个事件，而不是等到它完成所有事件，我可以独立添加子视图而不是同时添加吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:20:11.517

我建议使用后台线程来读取数据并创建视图，然后将视图添加到主线程的主视图中。像这样的东西：

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0),  ^{
    currentEventsArray = /*I GET THE EVENTS FROM COREDATA*/;
    NSMutableArray *newViews = [[NSMutableArray alloc] init];
    for(int i = 0; i < [currentEventsArray count]; i++){
        //I DO SEVERAL OPERATIONS WITH THE DATA AND THEN FINALLY...
        [newViews addObject: aEventView];
    }
    dispatch_async( dispatch_get_main_queue(), ^{
        // add or replace your subviews to the main view.
    }
}); 
```

当您需要刷新数据时，请执行此操作。请记住，您可能不希望这种情况一次发生多个。您可以通过在控制器中放置一个标志来确保在控制器已经运行时不执行初始 dispatch_async 来做到这一点，或者您可以使用私有调度队列而不是全局后台队列来排队另一次尝试。

如果您选择使用自己的后台队列，那么您需要在调用类（控制器）中创建一个实例变量，并且当您加载它时，您需要创建一个新队列：

```
_updateQueue = dispatch_queue_create( "UpdateQueue", DISPATCH_QUEUE_SERIAL); 
```

并使用它代替：

```
dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0) 
```

以上。

# javascript - 带有 jQ uery 的 Youtube iframe 播放器 JS API - 播放器对象没有方法“getPlayerState”

> ID：15637991
> 
> 赞同：0
> 
> 时间：2013-03-26T13:15:07.757
> 
> 标签：javascript, jquery, api, scope, youtube-javascript-api

我有以下代码，假设每当有鼠标悬停事件时暂停 Slidedeck 的自动滚动。对于 mouseout 事件，除非 Slidedeck 中的 youtobe 视频当前正在播放或缓冲，否则自动滚动应该恢复工作。如果没有 Youtube 视频的条件，我可以正常工作。我认为对象播放器的范围存在问题，但无法解决，如何解决此问题。

我在鼠标悬停时在控制台中遇到的错误是：

> 未捕获的类型错误：对象 #<T> 没有方法“getPlayerState”

欢迎任何建议。

这是 YT 播放器 iframe JS API 函数参考的链接： [https ://developers.google.com/youtube/iframe_api_reference#Functions](https://developers.google.com/youtube/iframe_api_reference#Functions)

这是我的代码：

```
// remap jQuery to $
jQuery(function ($) {

/* trigger when page is ready */
$(document).ready(function (){

// Control for the video in Slidedeck
// Find slidedeck
$( "dl.slidedeck" )
    // On mouseenter stop the Slidedeck autoplay
    .mouseenter( function() {
        $( this ).slidedeck().pauseAutoPlay = true;
    })
    // On mouseleave start the Slidedeck autoplay again
    .mouseleave( function() {
        // But only if the YT player isn't actually playing or buffering
        if ( player && ( player.getPlayerState() == 1 || player.getPlayerState() == 3 )) {
            // If that's so, leave the function
            return;
        } else {
            // Turn on autoplay
            $( this ).slidedeck().pauseAutoPlay = false;
        }
    });

});
}); // end of remap for $ to jQuery

// Youtube player API
var player;
/*
 * The API will call this function when the page has finished downloading the JavaScript
 * for the player API, which enables you to then use the API on your page. Thus,
 * this function might create the player objects that you want to display when
 * the page loads.
 */
function onYouTubeIframeAPIReady() {
/*
 * Constructing a YT.Player object.
 * All methods and properties of the player will be found there later.
 */
player = new YT.Player( "myYTPlayer", {
    events: {
        /*
         * Here we attach callback for the onStateChange event.
         * That is called everytime a state of the player is changed.
         */
        "onStateChange": onPlayerStateChange
    }
});
return;
}

/*
 * Implementation of the onStateChange event.
 * Only parameter is an event object, its data property holds a value of a new player state.
 * Values: -1 (unstarted), 0 (ended), 1 (playing), 2 (paused), 3 (buffering), 5 (video cued)
 */
function onPlayerStateChange( event ) {
// integer indicating new state of the player
var newState = event.data,
    // store the slideck element for later calls, so we don't have to query the DOM again
    $slidedeck = jQuery( "dl.slidedeck" );

// Video loading or buffering?
if ( newState == 1 || newState == 3 ) {
    // Then pause the slidedeck autoplay.
    $slidedeck.slidedeck().pauseAutoPlay = true;
// Video has just ended?
} else if ( newState == 0 ) {
    // Then resume the Slidedeck autoplay.
    $slidedeck.slidedeck().pauseAutoPlay = false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:32:15.307

好的，我解决了，值得阅读 Youtube 手册。问题在于嵌入视频的 iframe 元素的 id 的 HTML 定义。创建播放器对象时，有第一个参数“myYTPlayer” - 这必须是 iframe 的 id

```
<iframe id="myYTPlayer" width="729" height="410" src="http://www.youtube.com/embed/xxxxxxxxxxx?wmode=opaque&version=3&enablejsapi=1&origin=http://example.com" frameborder="0"></iframe> 
```

# c# - 在 WCF 消息检查中，如何在消息对象中查找输入参数的值？

> ID：15637994
> 
> 赞同：2
> 
> 时间：2013-03-26T13:15:27.993
> 
> 标签：c#, asp.net, wcf, extensibility

在 WCF 消息检查中，如何在消息对象中查找输入参数的值？

我正在使用 MessageInspector 并具有以下类：

```
public class MyMessageInspector : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        // TODO: how to find the value of the siteName parameter if exists?

        Console.WriteLine("Incoming request: {0}", request);
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {

    }
} 
```

如何提取我的 web 方法的 siteName 输入参数的值？我所有的 webmethods 都有 siteName 输入参数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T20:36:02.880

消息和参数之间的转换由消息格式化程序完成。您可以这样做，但是一旦您读取消息以获取参数的值，则该消息已被*使用*，因此您需要在将其传递给 WCF 之前重新创建它（这就是为什么在消息检查器中，请求被传递通过参考，所以如果你确实需要使用它，你可以更换它）。

正如@burning_LEGION 所提到的，参数检查器可能是您场景的最佳选择。在检查器本身上，它没有参数名称，但您可以从操作描述中获取它们，您的行为中有这些名称，您将使用它来添加参数检查器。下面的代码显示了如何完成它的一种方法。

```
public class StackOverflow_15637994
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        string Echo(string text);
        [OperationContract]
        int Execute(string op, int x, int y);
        [OperationContract]
        bool InOutAndRefParameters(int x, ref int y, out int z);
    }
    public class Service : ITest
    {
        public string Echo(string text)
        {
            return text;
        }

        public int Execute(string op, int x, int y)
        {
            return x + y;
        }

        public bool InOutAndRefParameters(int x, ref int y, out int z)
        {
            z = y;
            y = x;
            return true;
        }
    }
    public class MyInspector : IParameterInspector
    {
        string[] inputParameterNames;
        string[] outputParameterNames;
        public MyInspector(string[] inputParameterNames, string[] outputParameterNames)
        {
            this.inputParameterNames = inputParameterNames;
            this.outputParameterNames = outputParameterNames;
        }

        public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState)
        {
            Console.WriteLine("Operation: {0}", operationName);
            Console.WriteLine("  Result: {0}", returnValue);
            for (int i = 0; i < outputs.Length; i++)
            {
                Console.WriteLine("  [out] {0}: {1}", this.outputParameterNames[i], outputs[i]);
            }
        }

        public object BeforeCall(string operationName, object[] inputs)
        {
            Console.WriteLine("Operation: {0}", operationName);
            for (int i = 0; i < inputs.Length; i++)
            {
                Console.WriteLine("  {0}: {1}", this.inputParameterNames[i], inputs[i]);
            }

            return null;
        }
    }
    public class MyBehavior : IEndpointBehavior
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            foreach (var operation in endpoint.Contract.Operations)
            {
                string[] inputParamNames = operation.Messages[0].Body.Parts
                    .OrderBy(mpd => mpd.Index)
                    .Select(mpd => mpd.Name)
                    .ToArray();
                string[] outputParamNames = null;
                if (operation.Messages.Count > 1)
                {
                    outputParamNames = operation.Messages[1].Body.Parts
                        .OrderBy(mpd => mpd.Index)
                        .Select(mpd => mpd.Name)
                        .ToArray();
                }

                MyInspector inspector = new MyInspector(inputParamNames, outputParamNames);
                endpointDispatcher.DispatchRuntime.Operations[operation.Name].ParameterInspectors.Add(inspector);
            }
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        ServiceEndpoint endpoint = host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "");
        endpoint.Behaviors.Add(new MyBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();

        proxy.Echo("Hello");
        proxy.Execute("foo", 2, 5);
        int z;
        int y = 2;
        proxy.InOutAndRefParameters(3, ref y, out z);

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T13:21:41.867

您可以反序列化`Message`和使用任何字段，但使用[IParameterInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.aspx?ppud=4)更好

# c# - 获取光标下的单词我的错误是什么？

> ID：15637995
> 
> 赞同：0
> 
> 时间：2013-03-26T13:15:37.700
> 
> 标签：c#, textbox, mouseevent, mouseover, getchar

我的错误是什么？我想在网站上对 textbox2 说一句话。对不起，因为我的英语不好。:)

```
private void txtHoverWord_MouseMove(object sender, MouseEventArgs e){
    if (!(sender is TextBox)) return;
    var targetTextBox = sender as TextBox;
    if (targetTextBox.TextLength < 1) return;

    var currentTextIndex = textBox2.GetCharIndexFromPosition(e.Location);
    var wordRegex = new Regex(@"(\w+)");
    var words = wordRegex.Matches(textBox2.Text);
    if (words.Count < 1) return;

    var currentWord = string.Empty;
    for (var i = words.Count - 1; i >= 0; i--)
    {
        if (words[i].Index <= currentTextIndex)
        {
            currentWord = words[i].Value;
            break;
        }
    }

    if (currentWord == string.Empty) return;
    toolTip1.SetToolTip(textBox2, currentWord);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:26:50.687

我相信您可能无意中指定`textBox2`而不是`targetTextBox`在您的代码中指定。

尝试将其修改为以下内容：

```
private void txtHoverWord_MouseMove(object sender, MouseEventArgs e)
{
    if (!(sender is TextBox)) return;
    var targetTextBox = sender as TextBox;
    if (targetTextBox.TextLength < 1) return;

    var currentTextIndex = targetTextBox.GetCharIndexFromPosition(e.Location);
    var wordRegex = new Regex(@"(\w+)");
    var words = wordRegex.Matches(targetTextBox.Text);
    if (words.Count < 1) return;

    var currentWord = string.Empty;
    for (var i = words.Count - 1; i >= 0; i--)
    {
        if (words[i].Index <= currentTextIndex)
        {
            currentWord = words[i].Value;
            break;
        }
    }

    if (currentWord == string.Empty) return;
    tooltip1.SetToolTip(targetTextBox, currentWord);
} 
```

请注意，我更改`textBox2`为`targetTextBox`它出现在您的代码中的任何位置。

# facebook - Drupal 使用 FBOauth - 如何让 Facebook 注册会员不被自动阻止

> ID：15637997
> 
> 赞同：1
> 
> 时间：2013-03-26T13:15:43.883
> 
> 标签：facebook, drupal, content-management-system, drupal-7, fbconnect

在 Drupal v 7.21 上，使用 FBOauth 7.x-1.6。

当成员通过 FBOAuth 模块使用 Facebook 连接在我的客户网站上注册时，他们的状态会自动设置为“已阻止”。有没有一种很好的方法来验证与 Facebook 连接的用户，这样他们就不会默认被阻止？还是必须手动将它们更改为活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T20:54:22.333

在 admin/config/people/accounts 中设置“谁可以注册帐户？” 给游客。

在 drupal 中，新用户默认需要管理员批准。

# c# - ASP.NET MVC 双语应用程序资源文件与单独的页面

> ID：15637999
> 
> 赞同：0
> 
> 时间：2013-03-26T13:15:46.557
> 
> 标签：c#, asp.net-mvc, resources, multilingual

我正在创建一个双语 ASP.NET MVC 应用程序。据我所知，有两种方法可以使它成为双语：

第一种选择是使用资源文件。如果我使用它的资源，我现在需要大约 20 个字段。如果应用程序增长（这可能会发生，当然:)）我将需要越来越多的领域。但我相信这个解决方案是非常灵活的解决方案。

第二种选择是创建单独的视图文件（例如：Index.aspx、Index.en.aspx..）。如果有超过一种或两种语言，它可能会变得混乱（我会有很多文件）。否则，我不必担心翻译是否正确。

我的问题是哪种选择更有用（或有更多优势）？您认为使用一种或另一种选择的优点和缺点是什么？另外，如果我决定使用单独的页面，我应该在哪里/如何定义要加载哪一个页面？也许有更好的选择来制作双语应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:21:02.697

我建议使用资源。我将它们用于多语言网络应用程序，没有任何问题。

您需要做的就是设置`CurrentCulture`并`CurrentUICulture`打开当前`Thread`文件，框架将为您选择一个合适的文件。

此外，如果您使用数据注释属性 - 那里也支持资源文件。

您可能会发现用流行的字符串创建一个“通用”文件很有用，例如，OK、Cancel、Save、Yes、No、Today...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:22:10.623

使用资源不仅可以减少工作量，还可以确保您的 UI 跨语言保持一致（如果这是您想要的）。您需要做的就是确保每种语言拥有相同的资源，并且一切就绪，无需复制视图。

特别是对于大型项目和非 POC 项目，您可以期待大量的维护工作，做双重工作对我来说毫无意义——资源文件解决了这个问题。