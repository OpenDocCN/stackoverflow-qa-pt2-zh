# StackOverflow 问答 15600000-15600999

# c# - SQLite中为String分配了多少空间？

> ID：15600000
> 
> 赞同：2
> 
> 时间：2013-03-24T15:02:22.130
> 
> 标签：c#, .net, sqlite, windows-8, microsoft-metro

```
class anyClass
{
    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }

    [MaxLength(100)]
    public string field { get; set; }
 } 
```

在**SQLite**中，
对于*字段*长度为 25 个字符的对象，它会占用 25 个字符的空间还是总是为字段的MaxLength*获取***空间**？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:09:26.423

与大多数其他具有 VARCHAR 类型的数据库一样，SQLite 将仅存储输入到列中的实际字符。

另请注意，SQLite 没有列长度，您可以在列中输入任何支持长度的字符串。*

# session - 独立 EJB 客户端本地无状态会话 bean 查找

> ID：15600013
> 
> 赞同：2
> 
> 时间：2013-03-24T15:02:58.007
> 
> 标签：session, ejb, javabeans

根据我的引用，@Local 会话 bean 可以在部署 bean 的同一个 JVM 下访问（客户端和服务器在同一个 JVM 上运行）。

我已经实现了一个简单的无状态本地会话 bean 并部署在我的 GlassFish 服务器中（也在 JBoss 服务器中尝试过）。

我的独立客户端查找会话 bean，但无法访问此本地会话。我确实对可以访问的@Remote 进行了同样的尝试。

至此，服务器和客户端都在相同/单个 JVM（在我的机器上）中运行。

是否可以从独立客户端应用程序访问本地会话 bean？有没有具体的访问方式？

我的代码是：

无状态本地会话 bean

```
@Stateless
public class TicketBookingImpl implements TicketBookingLocal {    
   public String doBooking(String name) {
      return "Ticket Booked for " + name;
   }
} 
```

查找代码

```
public static void main(String[] args) {
    try {
        Properties props = new Properties();
        props.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.SerialInitContextFactory");
        props.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
        props.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");    
        props.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
        props.setProperty("org.omg.CORBA.ORBInitialPort", "3700");
        final Context context = new InitialContext(props);
        System.out.println("Doing lookup");
        TicketBooking ticketBooking = (TicketBooking) context.lookup("java:global/ejb-work-1/TicketBookingImpl"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:18:15.800

不幸的是，您只能在同一个部署单元（通常是 ear）中使用本地接口。

您必须在两种情况下使用远程接口：

*   客户端不在同一个部署单元中
*   在集群环境中

查看此链接以获取有关本地/远程接口使用的更详细建议：[EJB 中的本地与远程接口 (EJB3)](http://blog.sheidaei.com/2012/07/local-vs-remote-interfaces-in-ejb-ejb3.html)

# python - pyqt 断开插槽。新风格

> ID：15600014
> 
> 赞同：7
> 
> 时间：2013-03-24T15:02:59.023
> 
> 标签：python, pyqt, signals, disconnect, slot

我为此分配了一个插槽。

```
...
self.query = QtGui.QLineEdit(self)            
self.query.textChanged.connect(lambda: self.makeThread(self.googleSearch()))
self.query.returnPressed.connect(lambda: self.launchNavigator(1))
... 
```

但我怎样才能断开连接？我试过这个，但它不起作用......

```
self.query.textChanged.disconnect(lambda: self.makeThread(self.googleSearch()))
self.query.returnPressed.disconnect(lambda: self.launchNavigator(1)) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-24T15:40:28.017

lambda 表达式返回*不同*的函数（或多或少是偶然的；））会做同样的事情。因此，您将信号连接到的内容与您尝试断开连接时使用的第二个 lambda 不同；看这个例子：

```
>>> f = lambda x: x
>>> g = lambda x: x
>>> f is g
False 
```

您可以不使用`self.query.textChanged.disconnect()`任何参数，这将断开*所有*插槽的信号（如果您只有一个连接，这可能没问题），或者您必须在某处存储对 lambda 的引用：

```
self.func1 = lambda: self.makeThread(self.googleSearch())
self.query.textChanged.connect(self.func1)
...
self.query.textChanged.disconnect(self.func1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-26T11:35:31.603

有一种使用原始连接返回的 QConnection 对象断开信号的优雅方法。所以：

```
self.conn1 = self.query.textChanged.connect(lambda: self.makeThread(self.googleSearch()))
self.conn2 = self.query.returnPressed.connect(lambda: self.launchNavigator(1)) 
```

然后随后：

```
self.disconnect(self.conn1)
self.disconnect(self.conn2) 
```

这个特性在 PyQt 5.13.1 之前没有实现，尽管它在 Qt 中已经存在了很长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T06:33:32.047

我想在@rainer 的关于绑定方法的答案中添加一个警告/扩展。请记住，将方法绑定到实例（例如，通过编写`self.slotname`）实际上每次都会创建一个新的闭包（如在[这个](https://stackoverflow.com/q/41900639/2988730)问题中）。

因此，您会遇到同样的问题

```
def test_slot(self):
    self.makeThread(self.googleSearch())

...

    self.query.textChanged.connect(self.test_slot)

...

    self.query.textChanged.disconnect(self.test_slot) 
```

就像您`lambda`在问题中对原件所做的那样。正如@rainer 建议的那样，解决方案是将*闭包存储在一个属性中。* 这是必要的，因为每次编写代码时都会生成一个`self.test_slot`大致相当于的新对象。只要您准确地进行簿记，以下内容就可以正常工作：`lambda: type(self).test_slot(self)``self.test_slot`

```
 self.func = self.test_slot
    self.query.textChanged.connect(self.func)

...

    self.query.textChanged.disconnect(self.func) 
```

# ios - iOS 自定义邮箱

> ID：15600016
> 
> 赞同：0
> 
> 时间：2013-03-24T15:02:59.353
> 
> 标签：ios

我正在寻找一种在我的应用程序中自定义电子邮件功能的方法，而无需使用标准的 iOS 内置 MessageUI.framework。原因是：

1）我不希望收件人地址被反映以避免垃圾邮件。

2）此外，我们是一家非常小的公司，并且正在使用共享服务器。虽然我们有自己的电子邮件地址，但如果我们可以隐藏我们的电子邮件地址，我们可以使用 gmail 地址（具有更好的交付可靠性）而不失去专业性。

3) 我不希望主题和收件人地址可编辑

等等

有办法吗？

提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:19:50.140

好的解决方案是在 PHP 中创建一个接受`emails`和`message`作为参数的 API，并仅处理从服务器端发送电子邮件。如果您想定制电子邮件，创建一个仅由用户输入消息的 UI，然后可以调用 API，这是唯一的好方法。

# wpf - 默认情况下，鼠标单击是否会将键盘焦点带到可聚焦控件？

> ID：15600017
> 
> 赞同：10
> 
> 时间：2013-03-24T15:03:00.047
> 
> 标签：wpf, focus

这个问题看起来很奇怪，但根据我的所有经验，我已经习惯于通过鼠标单击将键盘焦点设置为可聚焦元素；`Focusable = true`但是，带有属性的 UserControl`IsTabStop = true`让我感到惊讶，因为它通过 Tab 获得键盘焦点，但对鼠标点击却一无所知。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-11T14:55:03.453

处理 UserControl 上的单击事件并将此代码添加到事件处理程序：

```
private void UserControl_OnMouseUp(object sender, MouseButtonEventArgs e)
{
   Keyboard.Focus(sender as UserControl);
} 
```

# clipboard - System.Windows.Forms.Clipboard bug 是否会损坏 MS Office 应用程序？

> ID：15600019
> 
> 赞同：1
> 
> 时间：2013-03-24T15:03:01.853
> 
> 标签：clipboard

我在 System.Windows.Forms.Clipboard 中发现了一个错误，当从 Win 7 x64 上运行的 Forms 程序调用 Clipboard.Clear() 时，该错误会破坏 MS Office 应用程序（如 Outlook、Access 和 Excel）。这是一个非常严重的错误，导致 MS Office 程序损坏其数据库（例如 Outlook.pst）并停止运行，并向用户显示“已停止”消息。

我可以提供一个示例程序，该程序将始终产生此错误。我还有一个简单的解决方法：不要调用 System.Windows.Forms.Clipboard。*; 参考演示核心并替换对 System.Windows.Clipboard 的调用。*反而。

MS 通过 COM 接口通过非托管代码实现 System.Windows.Forms.Clipboard 类。他们的 Office 应用程序显然访问相同的 COM 对象，这就是损坏发生的方式。

# c# - 在 MVC 网页中显示计数器

> ID：15600021
> 
> 赞同：1
> 
> 时间：2013-03-24T15:03:09.047
> 
> 标签：c#, asp.net-mvc

我正在尝试在基于 MVC 的网页中显示计数器。

在家庭控制器中，我有这个简单的测试代码：

```
int counter = 0;
    public ActionResult Index()
    {
        counter++;

            ViewBag.Message = counter;

        return View();
    } 
```

Index.cshtml 我有这个：

```
<h2>@ViewBag.Message</h2>
<p>
    @Html.ActionLink("Refresh", "Index", "Home")
<br />
    @Html.ActionLink("About", "About", "Home")
</p> 
```

重点是在 viewbag 消息中显示计数器的每次迭代。我对此很陌生，希望有任何帮助。我正在尝试使用 RedirectToAction 来做到这一点，但我不知道怎么做。

它只显示 1，因此它确实在循环中执行过一次，但之后不再执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T15:12:27.853

尝试声明你的计数器变量`static`

有关更多详细信息，请查看[此](http://msdn.microsoft.com/en-us/library/ms973875.aspx#methodscope_topic3)和[此](http://msdn.microsoft.com/en-us/library/aa691162%28v=vs.71%29.aspx)

# amazon-web-services - 使用 chef 为使用 OpsWorks 管理的 AWS 实例配置 sftp 访问

> ID：15600026
> 
> 赞同：1
> 
> 时间：2013-03-24T15:03:29.673
> 
> 标签：amazon-web-services, sftp, chef-infra

大家好 :) 我是 ruby​​、chef、knife 和 OpsWorks（AWS 的云部署服务）的新手。

我想构建一个配置，其中所有实例都提供对其本地文件系统某些部分的 sftp 访问；我不知道如何和厨师一起做。

我发现的只是[这个 gist](https://gist.github.com/bradmontgomery/3954511)，它是关于设置 sftp 服务的错​​误。

此致

编辑：如果您知道任何其他允许访问文件系统的厨师食谱，请发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:15:40.510

我们在 AWS 中使用 SFTP 和 chroot。

解决方案是：

1) 使用配方：[https](https://gist.github.com/werdan/5255517) ://gist.github.com/werdan/5255517 - 是的，我知道稍后会作为社区食谱完成

Gist 有解释如何使用这个配方的评论

2) 使用 SSH 食谱[https://github.com/gchef/ssh-cookbook](https://github.com/gchef/ssh-cookbook) 3) 为这样的节点使用角色（或通过包装食谱设置属性）：

```
name "has_sftp_users"
description "Server has chroot-ed user account to access files via SFTP"

run_list "recipe[ssh::chroot]"

override_attributes "ssh" => {"password_authentication" => "yes"} 
```

# java - 在我的插件 java 文件中使用 hudson 系统变量

> ID：15600032
> 
> 赞同：0
> 
> 时间：2013-03-24T15:03:52.147
> 
> 标签：java, hudson, hudson-plugins

我正在寻找一种可以在 Hudson 中使用环境变量的方法。在哈德森，我正在为特定作业创建参数化构建，其中布尔参数说“布尔”。因此，在通过“立即构建”调用构建后，我得到一个复选框“布尔”

我想在我的插件代码中使用这个值。这个“布尔”被创建为一个环境变量，我想检索它的值。

build.getEnvVars() 给了我所有的变量，但我只想使用“Bool”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:26:04.070

尝试这个：

```
for (Entry e : build.getEnvVars().entrySet()) {
  if ("Bool".equals( e.getKey.toString() )) {
    // Do stuff with the Bool variable. To get the value of Bool variable do:
    // e.getValue().toString();
  }
} 
```

# jquery - Firefox 中“ajaxform 不是函数”错误的原因

> ID：15600038
> 
> 赞同：1
> 
> 时间：2013-03-24T15:04:46.040
> 
> 标签：jquery, firefox, ajaxform

我正在使用 JQuery 表单 / ajax.form 将图像上传到我的服务器和数据库 - 我在 Firefox 19.0.2 中有效地使用它一直没有运气，但它在 Opera、Chrome 和 Safari 中运行良好。任何想法为什么我可能会在 Firefox 上收到错误？请帮忙

这是显示问题的代码（目标：'#preview'）：

```
 <script type="text/javascript" >
                $(document).ready(function() { 
                $('#photoimg').live('change', function()
                { 
                $("#preview").html('');
                $("#current").hide();
                $("#preview").html('<img src="ajax-loader.gif" alt="Uploading file...."/>');
                $("#imageform").ajaxForm({
                target: '#preview'
                }).submit();
                });
                }); 
                </script>
                <form id="imageform" method="post" enctype="multipart/form-data" action='update-user-profile.php'>

                Upload image from your computer: <input type="file" name="photoimg" id="photoimg" /><br><br/>

                </form>
                <div id='preview'></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:34:38.277

该主题已在[github](https://github.com/malsup/form/issues/304)上作为 bug 提交，目前无法立即解决（浏览器 bug？）。

# php - PHP 斐波那契数列

> ID：15600041
> 
> 赞同：8
> 
> 时间：2013-03-24T15:05:07.817
> 
> 标签：php, for-loop

这个 php 方法假设使用 for 循环将斐波那契数列打印到指定值。我不确定为什么它不起作用？

```
<?php
function fib ($n) { // a function called fib, declaire variable n (the sequence number)
    for ($n=0;$n<30;$n++) {
        if ($n < 3) { return $n; } // if n is smaller than 3 return n (1 or 2)
        else { return fib ($n - 1) + fib ($n - 2); } 
    /* if the number is 3 or above do 2 sums (n-1) and (n-2)
    and then add the 2 sums together (n-1)+(n-2)
    Example Fibonacci number 4
    (4-1)+(4-2) = 5
    3 + 2 = 5
    */
}
print $n;
?> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-11-28T13:57:59.463

实际上有一种方法可以通过使用舍入来计算斐波那契数而无需迭代：

[http://en.wikipedia.org/wiki/Fibonacci_number#Computation_by_rounding](http://en.wikipedia.org/wiki/Fibonacci_number#Computation_by_rounding)

```
function getFib($n)
{
    return round(pow((sqrt(5)+1)/2, $n) / sqrt(5));
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-09T20:38:57.030

斐波那契的简单函数

```
function fibonacci($n,$first = 0,$second = 1)
{
    $fib = [$first,$second];
    for($i=1;$i<$n;$i++)
    {
        $fib[] = $fib[$i]+$fib[$i-1];
    }
    return $fib;
}
echo "<pre>";
print_r(fibonacci(50)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-17T06:34:59.820

在此示例中，我使用了 for 循环并将长度限制为 10：

```
$x = 0;    
$y = 1; 

for($i=0;$i<=10;$i++)    
{    
    $z = $x + $y;    
    echo $z."<br />";         
    $x=$y;       
    $y=$z;     
} 
```

**输出：**
1
2
3
5
8
13
21
34
55
89
144

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-24T15:09:21.563

您对语言工作原理的基本理解似乎是错误的。您正在定义一个函数，但从不调用它。您正在提供一个参数，然后您会立即覆盖该参数。

尝试这个：

```
$fib = [1,0];
for($i=0; $i<30; $i++) {
    $next = array_sum($fib);
    array_shift($fib);
    array_push($fib,$next);
    echo $next.", ";
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-13T06:29:50.333

我知道我迟到了 1 年，但这是我的贡献。有两种可能的解决方案：

```
function fib1($n)
{
    return $n < 3 ? 1 : fib1($n - 1) + fib1($n - 2);
}
function fib2($n, $c = 2, $n2 = 0, $n1 = 1)
{
    return $c < $n ? fib2($n, $c + 1, $n1, $n1 + $n2) : $n1 + $n2;
} 
```

第一个更优雅，计算结果的方式与数学定义的方式相同。问题是对于大 $n 来说非常昂贵。

第二个要快得多，但您必须确保用户只设置第一个参数。

执行时间处理时间：

> $n = 20, fib1 = 0.092s, fib2 = 0.001s
> 
> $n = 30, fib1 = 12.2827s, fib2 = 0.001s
> 
> $n = 40, fib1 = >500s fib2 = 0.001s

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-23T07:21:45.440

你有 2 个解决方案

> 使用 for 循环

```
function fib($n) {
    $fib_array = [0, 1];
    for ($i = 2; $i < $n; $i++) {
        $fib_array[$i] = $fib_array[$i - 1] + $fib_array[$i - 2];
    }
    return $fib_array;
}

print_r(fib(6)); 
```

> 递归函数

```
function rec_fib($x) {
    if ($n < 2) {
        return $n;
    }
    return fib($n - 1) + fib($n - 2);
}

print_r(rec_fib(6)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-24T15:09:37.383

`$n`当您让`$n`成为循环计数器时，您将覆盖作为函数参数获得的。

摆脱 -`for`语句，只留下它的主体。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-02T05:23:45.380

```
function fib($m){
    $j=0;$k=1;
    for($i=0;$i<=$m;$i++){
          $l=$k;
          $k=$j+$k;
          $j=$l;
      }
   return $k;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-13T14:39:53.773

```
 function fibonacci( $n ) {
if (( $n == 0 ) || ( $n == 1 )) {
     return $n;
}
return fibonacci( $n-2 ) + fibonacci( $n-1 );} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-18T13:39:54.210

这是我使用的方法：

```
function fibonacci_series($n) {
  $f1 = -1;
  $f2 = 1;

  for ($i = 1; $i <= $n; $i++) {
    $f = $f1 + $f2;
    $f1 = $f2;
    $f2 = $f;
    echo "$f<br />"; 
  }
 }

echo fibonacci_series(5); 
```

有关说明，请访问[此处](http://www.phponwebsites.com/2015/06/php-fibonacci-series-of-given-number.html)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-21T13:27:52.017

一种更具可读性的非递归方法：

```
function fibonacciSequence($max = 13) {
    if($max < 1)
        return [];

    $sequence = [];

    $older = 0;
    $newer = 1;

    do {
        $number = $newer + $older;
        $sequence[] =  $number;

        $older = $newer;
        $newer = $number;
    } while($number < $max);

    return $sequence;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-01-18T20:43:12.927

斐波那契系列看起来像：

0 , 1 , 1 , 2 , 3 , 5 , 8 , 13 , 21 , 34 ,

```
function fabnacaiiSeries($num){
    $first=0;$second=1;
    for($i=0;$i<$num;$i++){
        if($i<=1){
            $next=$i;
        }  else  {
            $next=$first+$second;
            $first=$second;
            $second=$next;
        }

        echo  $next." , ";
    }   
}

fabnacaiiSeries(10); 
```

[查看更多详情](http://solvemyquest.com/print-fibonacci-series-in-php/)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-07-01T10:57:10.510

```
function getFib($n, $nN, $ct = 0, $max = 100)
 {
     $ct++;
     echo "$nN \n";
     ($ct < $max) ? getFib($nN, $n+$nN, $ct) : die();

 }

 echo 0;
 getFib(0, 1); 
```

递归 Fib

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-02-06T13:33:04.287

这是低效的 fib ($n - 1) + fib ($n - 2)；这是我有递归和没有递归的解决方案。我没有使用 $fib[1..N] = [] 之类的累积字典，但我计算步长总和并将其传递给下一次迭代或递归调用。

```
// with recursion 
function fib($n, $a = 0, $b = 1) {
    if ($n < 1) {
        return $a;
    }        

    return fib($n - 1, $b, $a + $b);
}

// with simple loop
function fib($N) {
    $a = 0;
    $b = 1;
    for ($i = 0; $i < $N; $i++) {
        $t = $a + $b;
        $a = $b;
        $b = $t;
    }
    return $a;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-03-24T02:42:38.413

这个是我能做到的又快又简单

```
function fibonacci($n, $rec = 0) {
    echo "$n\t";
    fibonacci($n + $rec, $n);
}
echo fibonacci(1); 
```

包括`header('Content-Type: text/plain');`以查看 \t 选项卡。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-19T18:28:16.897

```
$count = 0;
$x = 0;
$y = 1;

echo $x."<br />";
echo $y."<br />";

while($count < 10) {
    $z = $x + $y;
    echo $z."<br />";
    $x = $y;
    $y = $z;
    $count ++;
} 
```

参考：[http ://blog.innovsystems.com/php/fibonacci-series-program-php](http://blog.innovsystems.com/php/fibonacci-series-program-php)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-11-12T18:11:48.140

解决方案：用于斐波那契数列的 PHP 代码

```
$prev = 0;
$curr = 1;
$fib = 0;
for($i=0;$i<=20;$i++){
    echo $fib . ",";               
    $prev = $curr;
    $curr = $fib;
    $fib = $prev + $curr; 
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-04-05T17:46:02.100

我最近遇到了这个问题，发现了你的问题。您已经完成了一半，然后我将您的代码修改为工作版本。

```
<?php

function fib ($n) { // a function called fib, declaire variable n (the sequence number)
    if($n==0) return 0;
    if ($n < 3) { return 1; } // if n is smaller than 3 return n (1 or 2)
    else { return fib ($n - 1) + fib ($n - 2); }
    /* if the number is 3 or above do 2 sums (n-1) and (n-2)
    and then add the 2 sums together (n-1)+(n-2)
    Example Fibonacci number 4
    (4-1)+(4-2) = 5
    3 + 2 = 5
    */

}

        echo fib(50); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-03-24T15:36:56.800

如果你想递归地做

```
function fib($n, $first, $second) {
    if( $n > 0 ) {
         $sum = $first + $second;
         $first = $second;
         $second = $sum;
         print $sum;
         fib($n-1, $first, $second);
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-01-05T07:23:44.870

```
 class fibonacci
   {

   public $x = 0;
   public $y = 1;

   public function fibonacci() {
    for ($i = 0; $i <= 10; $i++) {
     $z = $this->x + $this->y;
     echo $z;
     echo "<br>";
     $this->x = $this->y;
     $this->y = $z;
    }

   }

   }

  $objfib = new fibonacci();
///Output
1
2
3
5
8
13
21
34
55
89
144 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-02-03T09:32:06.880

```
$first=0;
$second=1;
$nex=0;
$num=10;
for($c=0;$c<$num;$c++)
{
    if($c<=1)
    {
       $next=$c; 
    }
    else
    {
    $next=$first+$second;
    $first=$second;
    $second=$next;    
    }
    echo $next;
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-12-17T10:35:20.433

```
// Use this
 function printFibonacci($n)
 {

  $first = 0;
  $second = 1;

  echo "Fibonacci Series n => ";

  echo $first.' '.$second.' ';

  for($counter = 2; $counter < $n; $counter++){

    $third = $first + $second;

    echo $third.' ';

    $first = $second;
    $second = $third;

    }
}

/* Function call to print Fibonacci series upto 10 numbers. */

printFibonacci(10); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-03-02T03:12:28.917

```
 <?php
    $b=1; $limit=500;
    for($a=$b++;$a<$limit;$b+=$a=$b-$a)    
    {    
       echo"$a<br>"; 
      }   
   ?> 
```

*编辑：让我们开始吧`$b=1; $a=$b+$a`，`$b=1 =>`一开始我们可以说`$a=$b++;`我们现在设置了一个限制，`$a<$limit;`最难的部分`$b+=$a=$b-$a`意味着 让我们一起操作这段代码，玩得开心`$b=$b+$a;``$a=$b-$a;`

第 1 步：a--->1....b--->2 // b =1 a=1=> b=b+a=1+1=2

第 2 步：a--->1....b--->3 // b 为 2 a=ba=2-1=1 => b=b+a=2+1=3

第 3 步：a--->2....b--->5// b 为 3 a=ba=3-1=2 =>b=b+a=3+2=5

> 输出：1 1 2 3 5 8 13 21 34 55 89 144 233 377

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-10-21T22:08:46.333

```
<?php
    function generateFibonacci($n, $previous = 0, $current = 1) {
        echo $previous == 0 ? $previous.'<br />'.$current.'<br />' : $current . '<br />';

        return $n == 1 ? null : generateFibonacci($n - 1, $current, $previous + $current);
    }

    generateFibonacci(20);
?> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-10-28T12:05:04.800

```
<?php

function fibonacciSequence($pos){

    $fibarray = array(0, 1);

   for ( $i=2; $i<=$pos; ++$i ) {
       $fibarray[$i] = $fibarray[$i-1] + $fibarray[$i-2];
   }

   return $fibarray;
}

echo "<pre>";
print_r(fibonacciSequence(5));
echo "<pre>"; 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-05-17T10:44:52.540

前几天在一次采访中，我被要求写一个斐波那契函数。我考虑过递归，但当时我认为它效率低下。

我最终像这样写了我的：

```
function fib ($num) {
    $count = 0;
    $current = 0;
    $one_back = 0;
    $two_back = 0;

    while ($count <= $num) {    
        $current = $one_back + $two_back;
        $two_back = $two_back ? $one_back : 1;
        $one_back = $current;
        $count++;
    }

    return $current;
} 
```

他们只想要最终的答案，尽管很明显它可以很容易地修改为将每次迭代推送到一个数组上。

后来，我针对递归版本测试了我的……我的更快。

如果 $num > 1476 它返回 INF，所以我假设这是你达到 php 的最大整数值的地方。

为了好玩，将 1476 传递给递归斐波那契函数，然后看着你的电脑融化 :-)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-07-06T09:59:50.783

[这个页面](http://www.sitesbay.com/php-program/php-fibonacci-series-program-in-php)做得很好。您可以检查它以获取参考。谢谢！

```
<?php

function printFibonacci($n)
{

  $first = 0;
  $second = 1;

  echo "Fibonacci Series \n";

  echo $first.' '.$second.' ';

  for($i = 2; $i < $n; $i++){

    $third = $first + $second;

    echo $third.' ';

    $first = $second;
    $second = $third;

  }
}

/* Function call to print Fibonacci series upto 6 numbers. */

printFibonacci(6);

?> 
```

或者

```
<?php

define('NUM',11);
$a = 0;
$b = 1;

echo "$a $b "; // 0 1

for($i=1   ; $i<= NUM-2 ;  $a=$b, $b=$c, $i++ ) 
{
  echo $c = $a+$b;
  echo " ";
}

?> 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-06-23T20:47:25.240

通过递归很容易得到斐波那契

```
function printFibo($prev, $next) {
   if($prev > 10000000000000) return;
   $num = $prev + $next;

   echo "$num<br>";
   printFibo($next, $num); 
}

printFibo(0, 1); 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-07-27T10:21:53.127

斐波那契数列看起来像： 1 , 2 , 3 , 5 , 8 , 13 , 21 , 34 , 55 , 89 ,144 表示如果将前两个值相加并且输出显示是下一个值。

1+2 = 3 3+5 = 8 Like this 如何在 PHP 中实现这种类型的输出

```
<?php
$num1 = 0 ; 
$num2 = 1 ; 

for ($i=0; $i<=10 ; $i++) { 
    # Foboniici
    $result = $num1 + $num2 ; 
    $num1 = $num2 ; 
    $num2 = $result ; 
    echo $result ; 
}
?> 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-07-31T16:35:21.573

```
<?php
$num = array(0, 1);

for ($i=0; $i<=10; $i++) 
{
   $new_num = $num[$i-1] + $num[$i-2];
   array_push($num, $new_num);
}

echo implode(', ',$num);
?> 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-09-14T00:03:33.127

**尝试这个：**

```
 function fibonacci($length)
    {
        $result = [];

        function start($index, $a = 0, $b = 1)
        {
            if ($index === 0) {
                return $a;
            }

            if ($index === 1) {
                return $b;
            }

            return start( $index- 1, $b, $a + $b);
        }

        for ($i = 0; $i <= $length; $i++) {
            $result[$i] = start($i);
        }

        return $result;
    }

var_dump(fibonacci(20)); 
```

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2013-03-24T15:24:08.607

尝试这个。优化功能

```
function fib($n, $all=0){
f[0] = 1;
f[1] = 1;
for($i = 2; $i<= $n; $i++) f[$i] = f[$i-1]+f[$i-2];
if($all) return $f;
return $f[$n];
}

print fib(5);
var_dump(fib(5, 1)); 
```

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2018-07-14T00:33:11.253

```
 <?php
echo"Ashutosh Verma Branch_IT_9889313834";
echo"<br />";
echo "Fibonacci Series Up to 10th term is:-"."<br />";
$fibonacci=0;
$a=0;
$b=1;
echo $a.",";
echo $b.",";
while($fibonacci<20)
{
$c=$a+$b;
echo $c.",";
$a=$b;
$b=$c;
$fibonacci=$fibonacci + 1;
}
?>
------------------------------------------OUTPUT-------------------------------------
Ashutosh Verma Branch_IT_9889313834
Fibonacci Series Up to 10th term is:-
0,1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,1597,2584,4181,6765,10946, 
```

* * *

## 回答 #34

> 赞同：-2
> 
> 时间：2017-11-23T09:57:23.757

我的是获取 fibonacii 系列的简单方法，请查看：

```
function fibo() {
    $a = 0;
    $b = 1;

    echo $a;
    for ($i=0; $i < 10; $i++) { 
        echo ' '.$b.' ';
        $sum = $a + $b;
        $a = $b;
        $b = $sum;
    }
} 
```

# jquery - AJAX 返回的数据 - 如何用 jQuery 处理它们

> ID：15600043
> 
> 赞同：0
> 
> 时间：2013-03-24T15:05:13.290
> 
> 标签：jquery, ajax, dom

所以当 jQuery 发出`$.ajax`请求时，返回的数据可以`success`通过作为参数传递给`$.ajax`. 正如[API 文档](http://api.jquery.com/jQuery.ajax/)报告的那样，如果`processData`属性设置为`true`，则数据将作为字符串返回，否则作为 DOM 对象返回（对吗？）。

因此，我需要将数据视为简单的 HTML。`=`假设我必须在返回数据中的每个标记前添加一系列s `h1`，然后用这些数据填充页面，就好像它们是纯字符串一样（为了使用 jQuery`.html()`方法）。

正确的方法是什么？

我发现`.parseHTML()`jQuery 函数可以用于将返回的数据字符串解析为 HTML DOM。但是我该如何治疗呢？

抱歉，您在此问题中*尝试过*的内容有所不足。

### 编辑

有人提出了一个更清楚的例子。我有一个`.html`文件，其中包含一些我想通过 AJAX 检索并用于填充我的主页内容的内容。这个文件的结构是简单的 HTML，没有`head`/`body`标签，只有几个`p`s 和几个`h1`s。通过 CSS，我已经使`h1`标签看起来与`p`s 完全一样（这是有意的）。现在我想改变这个：

```
<h1>I'm a simple header</h1> 
```

变成纯文本：

```
===================
I'm a simple header
=================== 
```

一种 Unix 终端风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:08:10.730

**编辑**以下内容对我来说非常有用

**文件1.html**

```
<script type="text/javascript">
$(document).ready(function(){
$.ajax({  
    url: 'http://voicing-up.com/test.html',  
        success: function(data) {  
                alert(data);
            alert($(data).html());
        }  
    });
});
</script> 
```

**测试.html**

```
<p>This is some data</p>
<h2>This is h2</h2 
```

在上面的代码中，data 将返回 DOM 元素，然后您可以从那里使用 jQuery 的`.html()`函数来获取元素的 innerHTML。

# android - 尝试实现 WebviewClient 但失败

> ID：15600047
> 
> 赞同：3
> 
> 时间：2013-03-24T15:05:30.897
> 
> 标签：android, android-webview

我在这里看到了几篇关于实现**WebviewClient**的文章，以便 webview 中的转换保留在 webview 中，而不是转到浏览器。

当我尝试运行我的应用程序时，webview 会加载，但它仍然不能纠正页面转换问题。是否有可能我需要用“ **On Create ”替换“** **shouldoveride** ”？

 **这是我的代码：

```
public class WebViewActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView wv = (WebView) findViewById(R.id.webview1);

    WebSettings webSettings = wv.getSettings();
    webSettings.setBuiltInZoomControls(true);

    wv.loadUrl("http://www.yahoo.com");
}

private class Callback extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        return(true);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:16:47.530

您没有将您的分配`WebViewClient`给您的 WebView。做这个：

```
wv.setWebViewClient(new Callback()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:14:31.240

如果您只想在默认浏览器中显示所有页面`WebView`而不是在默认浏览器中打开，您只需要指定一个`WebViewClient`. 甚至不需要创建扩展的自定义类`WebViewClient`

```
wv.setWebViewClient(new WebViewClient()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-26T16:57:32.237

或者简单地添加`WebChromeClient()`：

```
WebView wv = (WebView) findViewById(R.id.webview1);
wv.setWebChromeClient(new WebChromeClient()); 
```

使用`WebChromeClient`允许您处理 Javascript 对话框！**

# regex - 正则表达式：两个字母重复两次的单词（例如 ABpoiuyAB、xnvXYlsdjsdXYmsd）

> ID：15600053
> 
> 赞同：6
> 
> 时间：2013-03-24T15:05:54.660
> 
> 标签：regex

我今天有两个正则表达式任务要做——我做了一个正确的，另一个失败了。第一项任务是在很长很长的文本中找到所有以“F”开头并以元音结尾的单词：

```
(\bf)\w*([euioay]\b) 
```

它工作得很好。

第二个对于语言学学生来说太难了;-)我必须找到所有重复至少两次双字母序列的单词，例如：

*   tatarak 是 TATArak，“TA”两次；
*   brzozowski 是 brZOZOwski，“ZO”两次；
*   loremipsrecdks 是 loREmipsREcdks，“RE”两次；

请问我可以帮忙吗？提前致谢 ;-）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T15:10:29.313

让我们来看看：

`(\w{2})`匹配两个字母（或数字/下划线，但让我们忽略它）并在组号 1 中捕获它们。然后`\1`匹配该组匹配的任何内容。所以

```
\b\w*(\w{2})\w*\1 
```

是你要找的（你不需要`{2,}`，因为如果三个字母重复，两个字母也会重复。不检查两个以上会使正则表达式更有效率。你可以在`\1`反向引用成功后停止匹配）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:15:07.110

这种模式应该可以解决问题

```
\b\w*?(\w{2})\w*?\1\w*?\b 
```

*   `\b`是一个词边界
*   `\w*?`一些字母（懒惰地）
*   `(w{2})`正好两个字母，匹配并捕获
*   `\w*?`和上面一样
*   `\1`我们两封信捕获组的内容
*   `\w*?`和上面一样
*   `\b`另一个词边界

java中的快速测试：

```
public static void main(String[] args) {
   final Pattern pattern = Pattern.compile("\\b\\w*?(\\w{2})\\w*?\\1\\w*?\\b");
   final String string = "tatarak brzozowski loremipsrecdks a word that does not match";
   final Matcher matcher = pattern.matcher(string);
   while(matcher.find()) {
       System.out.println("Found group " + matcher.group(1) + " in word " + matcher.group());
   }
} 
```

输出

```
Found group ta in word tatarak
Found group zo in word brzozowski
Found group re in word loremipsrecdks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:09:09.860

试试看：`\b\w*?(\w{2})\w*?\1\w*\b`

# c++ - 为什么移位超过允许的位仍然有效？

> ID：15600055
> 
> 赞同：4
> 
> 时间：2013-03-24T15:06:21.243
> 
> 标签：c++, binary, bit-manipulation, bitwise-operators, bit-shift

我有一个`int8_t`，我想看看如果我将它向左移动超过 8 位会发生什么。所以这就是我所做的：

```
int8_t x = 1;

std::cout << (x << 10); 
```

由于某种原因，这将返回 1024，就好像该类型包含足够的位来表示该数字一样。我认为，当您移动超过给定位时，您将在所有位中得到 0（或导致未定义行为的有符号上溢/下溢）。另外，我运行了这段代码来给我最大数量`int8_t`：

```
std::numeric_limits<int8_t>::max(); // 127 
```

这种类型的最大数量是 127，但将其向左移动可以使其甚至高于其无符号类型！这怎么可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T15:08:02.323

to 的参数`<<`被隐式扩展为`int`，结果`x << 10`也是`int`。

# c - Bison/Yacc 中的 For 循环语义

> ID：15600056
> 
> 赞同：2
> 
> 时间：2013-03-24T15:06:21.577
> 
> 标签：c, for-loop, semantics, bison, yacc

我正在尝试使用 flex 和 bison 编写自己的脚本语言。我有一个基本的解析器，我想添加一个与 C 语言 for 语句非常相似的 for 语句。我不清楚如何编写与 for 语句关联的操作

假设我对“for”语句有以下产生式：

```
forStatement: FOR '(' expr ';' expr ';' expr ')' statements END; {} 
```

我不清楚在与此制作相关的动作中要做什么。

直觉上我明白我应该做一些事情，在与前一个语句相关的动作中，例如：

```
evaluate($3);
while(evaluate($5)) { execute($9); evaluate($7); }
evaluate($7); 
```

其中评估和执行是两个 C 函数。

所以我有两个问题（假设为与语法产生相关的动作编写 C 代码）：

1.  “评估”的任务是什么。我的意思是，考虑到表达式的值在循环的每一步都可能发生变化，我如何在每个循环中评估表达式？
2.  “执行”的任务是什么。我的意思是，考虑到每个语句在循环的每一步都有不同的结果，我如何评估 for 循环中的语句。

三个表达式 'expr' 的值在运行时会发生变化，对于 for 主体内的语句也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T06:58:50.163

查看您的两个问题，您似乎错过了需要执行引擎（一种软件 CPU）。该引擎需要记住变量的状态，返回循环的“地址”，......（取决于选择的实现方法）。

所以解析只是第一步。考虑为每个语句和表达式创建一个数据结构，并让这些由该引擎执行。

看看[基于堆栈的系统](http://en.wikipedia.org/wiki/Stack_machine)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:13:11.600

这是一个常见问题解答，不仅在 SO 中，而且在 Bison 中。请阅读文档：[http ://www.gnu.org/software/bison/manual/html_node/Implementing-Gotos_002fLoops.html](http://www.gnu.org/software/bison/manual/html_node/Implementing-Gotos_002fLoops.html)

# php - 在 WHERE SQL 语句中使用 PHP FOR 循环

> ID：15600059
> 
> 赞同：0
> 
> 时间：2013-03-24T15:06:31.490
> 
> 标签：php, sql, loops, for-loop

我想在我的 SQL 查询的 WHERE 位中列出 for 语句的所有结果 ($photosToPromote[$i])。

目前 for 语句输出结果的文本列表，如果在前一页上只选择了一张照片，则 SQL 会选择 $photosToPromote 中的一张。如果选择了多张照片，则 FOR 语句将它们全部列出，但 SQL 不会找到它们并显示图像。

在将其放入 SQL 之前，我是否需要使用 mysql_real_escape_string？我该怎么做呢？

```
$photosToPromote = $_POST['promotePhoto'];
if(empty($photosToPromote)) 
{
echo("<p class=\"error\">You didn't select any photos so go back and start again!");
} 
else
{
$N = count($photosToPromote);

echo("You selected $N photos(s): ");
for($i=0; $i < $N; $i++)
{
    echo($photosToPromote[$i] . " ");
}
}

$queryUserPhotos = mysql_query("SELECT photoID FROM photos WHERE photoid='$photosToPromote[$i]' AND (auth = '5' OR auth = '2' OR auth = '4') ORDER BY auth DESC") or die("Something went wrong...please try this again later!");

while($resultUserPhotos = mysql_fetch_array($queryUserPhotos)){

<img src=\"/$imgpath/$resultUserPhotos[photoID].jpg\" alt=\"Your Photo\"/>

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:17:44.843

你可以试试这个：

```
$c = '';
foreach ($photosToPromote as $p) {
    $c .= " photoid=$p OR ";
}
$c .= '1=2';//false condition to close $c by a condition never true
$q = "SELECT photoID FROM photos WHERE ( $c ) AND (auth = '5' OR auth = '2' OR auth = '4') ORDER BY auth DESC";
$queryUserPhotos = mysql_query($q) or die("Something went wrong...please try this again later!"); 
```

# c# - 将列添加到填充的数据集

> ID：15600060
> 
> 赞同：0
> 
> 时间：2013-03-24T15:06:34.607
> 
> 标签：c#

我正在尝试向包含我的 sql 表数据的数据集添加一列。我基本上想在加载数据后添加一列，以跟踪数据库中已经存在哪些值以及数据网格中哪些值是新的。然后我就可以知道将哪些行添加到数据库中。我将不胜感激任何帮助。

这是我的代码，我只是想在这一点上显示该列，稍后我会担心用这个新列更新行。

```
 sqlcom.CommandText = @"INSERT INTO members (firstname, lastname) VALUES ('" + textBox1.Text +"', '"+ textBox2.Text +"')";
        sqlcom.ExecuteNonQuery();

        SqlDataAdapter sqladapt = new SqlDataAdapter("SELECT * FROM members", thisConnect);
        DataSet ds = new DataSet();
        sqladapt.Fill(ds, "members");

        //add column to dataset?
        ds.Tables["members"].Columns.Add("inDb");

        dataGridView1.DataSource = ds;
        dataGridView1.DataMember = "members";

        thisConnect.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:18:29.743

尝试这个，

`ds.Tables["members"].Columns.Add(new DataColumn("inDb", typeof(Boolean)));`

另一种选择是在您的选择语句中返回此字段，

`select *, cast(1 as bit) as InDb from member`,

它为从表返回的所有值设置为 true。

您还应该考虑 SQL 参数以避免任何 SQL 注入，例如，假设我`-','-');truncate table members;`在第一个文本框中输入，这将删除成员表中的所有行，并且没有选项来检索数据

```
sqlcom.CommandText = @"INSERT INTO members (firstname, lastname) 
                       VALUES (@first,@last)";
sqlcom.Parameters.AddWithValue("@first",textBox1.Text);
sqlcom.Parameters.AddWithValue("@last",textBox2.Text); 
```

# ios - 如何在 Master-Detail 应用程序中添加多个 Detail View Controller

> ID：15600061
> 
> 赞同：4
> 
> 时间：2013-03-24T15:06:52.827
> 
> 标签：ios, objective-c, master-detail, ipad

我正在尝试构建一个 iPad Master-Detail 应用程序。主视图只是一个`TableViewController`. 我想为用户在主视图中点击的每个不同单元格更改完整的详细信息视图。其中一个 Detail 视图控制器必须允许用户输入数据，另一个必须允许用户查看某些内容等。那么如何将更多 DetailViewControllers 添加到 Master-Detail 应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:25:19.130

为此，您应该使用替换转场。使用替换 segue 直接从主控制器（而不是单元格）连接任意数量的视图控制器，并为它们提供所有标识符。在 didSelectRowAtIndexPath: 中，实现所需的任何逻辑，将索引路径与要转场的控制器相关联，然后调用 performSegueWithIdentifier:sender: 来启动转场。如果您需要将任何数据传递给下一个控制器，您可以在 prepareForSegue 中完成。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-24T16:10:11.187

苹果的“MultipleDetailViews”示例应用程序可能会有所帮助。这是链接[http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html)。另外我相信stackoverflow中还有其他类似的问题。

# php - 将 XML 文件中的数据插入表中

> ID：15600064
> 
> 赞同：0
> 
> 时间：2013-03-24T15:07:04.150
> 
> 标签：php, mysql, xml, database

我试图从网络上的 XML 文件中获取数据到我的数据库中，以便我可以使用它。

我已经生成了以下代码，但是自从我完成编码以来已经有很长时间了，我迷失了我收到的错误消息。

错误是“'字段列表'中的未知列'10074'”。

10074 是 XML 文件中第一项的产品 ID。

任何指针都会非常有用，因为它正在让我头疼！

我的代码如下：

```
 <?php
   $Products = simplexml_load_file('http://atsdistribution.co.uk/feeds/xml_all_products.aspx');

$con = mysql_connect(Details);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("catflaps_products", $con);

foreach($Products->Product as $Product)
{
$ProductID = $Product->ProductID;
$Name = $Product->Name;
$DropshipPrice = $Product->DropshipPrice;
$SRP = $Product->SRP;
$Brand = $Product->Brand;
$Xline = $Product->Xline;
$InStock = $Product->InStock;
$Stock = $Product->Stock;
$Barcode = $Product->Barcode;
$Weight = $Product->Weight;
$CategoryID = $Product->CategoryID;
$Category = $Product->Category;
$SmallImage = $Product->SmallImage;
$LargeImage = $Product->LargeImage;
$Description = $Product->Description;

mysql_query("INSERT INTO test(ProductID, Name, DropshipPrice, SRP, Brand, Xline, InStock, Stock, Barcode, Weight, CategoryID, Category, SmallImage, LargeImage, Description)
VALUES(`$ProductID`, `$Name` , `$DropshipPrice`, `$SRP`, `$Brand`, `$Xline`, `$InStock`, `$Stock`, `$Barcode`, `$Weight`, `$CategoryID`, `$Category`, `$SmallImage`, `$LargeImage`, `$Description`)")
        or die(mysql_error());

}

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:15:38.420

1.  您不应在 VALUES 部分中使用反引号。它只是引用 mysql 标识符（如表、列名）。我认为如果您删除它，您的问题将得到解决
2.  当您在 VALUES 部分引用字符串值时，您应该使用引号（常规的 ' 或 "）（但请参见下文，有更好的方法）
3.  如果您选择 #2，那么您需要在您的情况下使用 mysql_real_escape_string 从 XML 中正确转义您的值。事实上，如果您不这样做，这就是对安全性的破坏（请参阅 SQL 注入）。但是，即使您说这是一次性使用的临时脚本等，当您的 xml 数据中有单引号或双引号时，您可能最终会遇到另一个错误
4.  最好的方法是使用 PDO 准备语句，然后您不必费心用引号引用某些数据类型或不这样做 - 您将某些参数与其数据类型绑定。请记住，今天不推荐使用 mysql_* 函数。

所以这段代码就像一个魅力：

```
<?php
$Products = simplexml_load_file('xml_all_products.xml');
$config = array('db' => array(
    'dbname' => 'test',
    'host'   => 'localhost:4040',
    'username' => 'xx',
    'password' => 'xxx'
));
$db = new PDO('mysql:dbname='.$config['db']['dbname'].';host='.$config['db']['host'],$config['db']['username'],$config['db']['password']);

foreach($Products->Product as $Product)
{
    $ProductID = $Product->ProductID;
    $Name = $Product->Name;
    $DropshipPrice = $Product->DropshipPrice;
    $SRP = $Product->SRP;
    $Brand = $Product->Brand;
    $Xline = $Product->Xline;
    $InStock = $Product->InStock;
    $Stock = $Product->Stock;
    $Barcode = $Product->Barcode;
    $Weight = $Product->Weight;
    $CategoryID = $Product->CategoryID;
    $Category = $Product->Category;
    $SmallImage = $Product->SmallImage;
    $LargeImage = $Product->LargeImage;
    $Description = $Product->Description;

    $ProductsRS = $db->prepare("INSERT INTO test(ProductID, Name, DropshipPrice, SRP, Brand, Xline, InStock, Stock, Barcode, Weight, CategoryID, Category, SmallImage, LargeImage, Description)
                        VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

    $ProductsRS->execute(array($ProductID, $Name, $DropshipPrice, $SRP, $Brand, $Xline, $InStock, $Stock, $Barcode, $Weight, $CategoryID, $Category, $SmallImage, $LargeImage, $Description));
} 
```

# c# - 如何防止两个相似的字符在字符串中的任何位置一起出现

> ID：15600067
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:07:18.097
> 
> 标签：c#, string

我想防止两个类似的字符，例如“@”出现在我的字符串中的任何地方。我怎么能做到这一点。这是我的字符串：

```
 static string email = " example@gmail.com"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:20:19.663

如果是 Moo-Juice 的回答，您可以在 CounOf 扩展方法中使用 Linq：

```
public static class Extensions
{
    public static int CountOf(this string data, Char c)
    {
        return string.IsNullOrEmpty(data) ? 0 : data.Count(chk => chk == c);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:14:03.793

如果我理解正确，您不希望字符串中*的*特定字符出现多次。您可以编写一个扩展方法来返回特定字符的计数：

```
public static class Extensions
{
    public static int CountOf(this string data, Char c)
    {
        int count = 0;
        foreach(Char chk in data)
        {
            if(chk == c)
               ++count;
        }
        return count;
    }
} 
```

用法：

```
string email = "example@gmail.com";
string email2 = "example@gmail@gmail.com";
int c1 = email.CountOf('@'); // = 1
int c2 = email2.CountOf('@'); // = 2 
```

我真正怀疑您需要的是电子邮件验证：

[正则表达式电子邮件验证](https://stackoverflow.com/questions/5342375/c-sharp-regex-email-validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:08:43.043

尝试这样的事情：

```
if(!email.Contains("@"))
{
    // add the character
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T15:15:01.020

你可以使用正则表达式...

```
if (Regex.Match(email, "@.*@")) {
    // Show error message
} 
```

# sql - 管理图像（上传、描述和订购） - webmatrix/razor

> ID：15600069
> 
> 赞同：0
> 
> 时间：2013-03-24T15:07:18.820
> 
> 标签：sql, image, razor, webmatrix

我正在创建一个网站，用户将在其中上传他们房屋的照片。我猜测实现这一目标的最佳方法是拥有一个数据库表，当用户上传他们的照片时，它会将目的地和 href 保存在数据库中，对吗？

如果用户想要改变照片的显示顺序怎么办，实现这一点的最佳方法是什么，是否有它的 API 或一些预先编写的代码？

谢谢，加文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:09:28.680

您可以在数据库中有一个表，该表将存储每个用户的首选图像顺序。它将包含用户 ID、图像 ID 和订单列。或者，如果图像与用户记录相关联，您可以简单地将订单列添加到用户表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:23:13.450

当然，实现这一目标的最佳方法是数据库。使用数据库，您可以构建一个非常好的后端，用户可以在其中管理他们的个人资料。有一些预先编写的 asp.net 项目可以让您实现类似这样的简单事情，例如[dot-net nuke](http://www.dotnetnuke.com/)。

# c# - 如何将 MS-Access 选择查询的结果保存在 C#.net 中的变量中？

> ID：15600073
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:07:31.600
> 
> 标签：c#, ms-access

我的问题很简单，但我不知道该怎么做我的查询是：

```
" SELECT * FROM Table1 Where ID =" + textBox1.Text; 
```

我想将结果保存在变量中查询表有 5 列，这意味着我想要 5 个变量来保存结果，但我不知道该怎么做数据库在 ms-Access 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:14:43.473

首先你需要知道，如何在 C#中创建一个[OleDbConnection 。](http://csharp.net-informations.com/data-providers/csharp-oledb-connection.htm)

你不需要创建变量！您可以直接将所有行或选定的行分配给 ASP.NET 和 winforms 中可用的许多数据控件之一。

DataControls 自动在页面或表单上以表格布局显示您的 db.table 数据。您还可以控制这个自动创建的布局的外观。

您可以从数据库中获取数据并创建如下数据集：

```
string query = "SELECT * from Table1 WHERE ID=?";

OleDbConnection odc = new OleDbConnection(strConn);
odc.Open();
OleDbDataAdapter dAdapter = new OleDbDataAdapter();
OleDbCommand cmd = new OleDbCommand(query,odc);

cmd.Parameters.Add("?", OleDbType.BSTR, 5).Value ="asdf";
dAdapter.SelectCommand = cmd;

ds = new DataSet();
dAdapter.Fill(ds);

dataGridView1.DataSource = ds.Tables[0]; 
```

现在在上面的代码中，`strConn`是访问数据库文件的连接字符串。每种存储都需要一种独特的连接字符串。[你可以在这里](http://connectionstrings.com/)找到适合你的那一款。

一旦你清楚了。您需要了解[ASP.NET DataControls](http://www.asp.net/web-forms/overview/aspnet-data-controls)和 winforms [dataGridView](https://stackoverflow.com/questions/367559/good-datagridview-tutorial)等。

# jquery - 检查空输入字段的代码问题

> ID：15600075
> 
> 赞同：0
> 
> 时间：2013-03-24T15:07:52.747
> 
> 标签：jquery, jquery-mobile

我发现本教程创建了一个电子邮件表单来发送电子邮件，但是 java 脚本代码中似乎有一个错误，可以在下面找到：

```
$('#sendfeedback').on("click", function() {
var url = 'api/send.php';
var error = 0;
var $contactpage = $(this).closest('.ui-page');
var $contactform = $(this).closest('.contact-form');
$('.required', $contactform).each(function (i) {
    if ($(this).val() === '') {
        error++;
    } 
}); // each
if (error > 0) {
        alert('Please fill in all the mandatory fields. Mandatory fields are marked with an asterisk *.'); } 
else {//some code} 
```

单击可以正常工作，但是即使填充了字段，也会显示错误，我该如何阻止这种情况发生？请注意，当我删除这部分代码时，它会起作用。下面是 HTML 代码：

```
<div class="contact-thankyou" style="display: none;">
                Thank you.  Your message has been sent.  We will get back to you as soon as we can.
            </div>
            <div class="contact-form">
                <p class="mandatory">All fields are Manadatory</p>
                <div data-role="fieldcontain">
                    <label for="senderName">Your Name:</label>
                    <input type="text" name="senderName" id="senderName" class="required">
                </div>
                <div data-role="fieldcontain">
                    <label for="senderEmail">Your Email Address:</label>
                    <input type="email" name="senderEmail" id="senderEmail" class="required">
                </div>
                <div data-role="fieldcontain">
                    <label for="subjectCategories">Subject</label>
                        <select name="subjectCategories" id="subjectCategories" data-native-menu="false" class="required">
                            <option value="" data-placeholder="true">Select...</option>
                            <option value="Registration">Register as an Artist</option>
                            <option value="Feature">Want your music featured?</option>
                            <option value="Advertising">Advertise your company</option>
                            <option value="App Issues">App Issues</option>
                            <option value="General Feedback">General Feedback</option>
                        </select>
                </div>
                <div data-role="fieldcontain">
                    <label for="message">Your Message:</label>
                    <textarea name="message" id="message" placeholder="Please type your message" class="required" cols="80" rows="10" maxlength="10000"></textarea>
                    </div>
                <div class="send"><a href="javascript:;" data-role="button" data-iconpos="right" id="sendfeedback">Send Feedback</a></div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:11:38.290

在您的代码中，您希望使用 class 验证四个字段`required`。在`#subjectCategories`选择菜单上，该类`required`被添加了两次，一个用于`<select>`弹出菜单，另一个添加到调用 select menu的`<span>`下方。没有价值，它导致了错误。`<a>``#subjectCategories``span`

我通过在触发验证后添加以下代码进行了简单的修复，以`required`从`span`.

```
$('#sendfeedback').on("click", function () {
 $($.mobile.activePage).find('span').removeClass('required');
 //....
 //the rest of your code
 //...
}); 
```

# ios - 使用 NSNotificationCenter 在 VC 之间发送数据

> ID：15600079
> 
> 赞同：4
> 
> 时间：2013-03-24T15:08:13.660
> 
> 标签：ios, objective-c, uiviewcontroller, nsnotificationcenter, nsnotification

我需要使用. `NSMutableDictionary`_ 我已经尝试了以下代码，但它不起作用。我实际上传递给但没有调用该方法。有什么建议吗？谢谢！`ViewControllerA``ViewControllerB``NSNotificationCenter``ViewControllerB``-receiveData`

**视图控制器A.m**

```
- (IBAction)nextView:(id)sender {
    [[NSNotificationCenter defaultCenter]
     postNotificationName:@"PassData"
     object:nil
     userInfo:myMutableDictionary];
    UIViewController *viewController =
    [[UIStoryboard storyboardWithName:@"MainStoryboard"
                               bundle:NULL] instantiateViewControllerWithIdentifier:@"viewcontrollerb"];
    [self presentViewController:viewController animated:YES completion:nil];
} 
```

**视图控制器B.m**

```
- (void)receiveData:(NSNotification *)notification {
    NSLog(@"Data received: %@", [notification userInfo]);
}

- (void)viewWillAppear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(receiveData:)
     name:@"PassData"
     object:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:25:37.593

您对`NSNotificationCenter`方法的调用很好。有几点需要考虑：

1.  `ViewControllerB`实例在被调用之前不会注册通知`-viewWillAppear:`，所以如果你还没有显示你的实例`ViewControllerB`（通常，如果它在 VC 层次结构中比 A 更远），你就不能得到通知调用。注册通知`-initWithNibName:bundle:`更有可能是您想要的。

2.  一个推论是：`ViewControllerB`当您发送通知时，您的实例必须存在才能被接收。如果您`ViewControllerB`从`MainStoryboard`in加载`-nextView:`，则它尚未注册通知。

# android - 使用 SMTP 注销 GMail 帐户

> ID：15600081
> 
> 赞同：0
> 
> 时间：2013-03-24T15:08:18.810
> 
> 标签：android, smtp, jakarta-mail, logout

我正在使用 SMTP 发送邮件。发送邮件效果很好。但是，我想在按钮单击时使用注销，以便我可以注销我的帐户。如何注销帐户？有退出的方法吗？

这是我使用的一些代码：

```
 public void Mail(String user, String pass) {
    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");

    Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(FROM_MAILID,PASSWORD);
        }
        });
    try {
        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress(FROM_MAILID));
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(TO_MAILID));
        message.setSubject("Testing Subject");     
        Multipart multipart = new MimeMultipart();     
        MimeBodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/wallpaper.jpg"));
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName("image.png");
        messageBodyPart.setDisposition(MimeBodyPart.ATTACHMENT);
        messageBodyPart.setHeader("Content-ID","<vogue>");
        multipart.addBodyPart(messageBodyPart);
        message.setContent(multipart);
        Transport.send(message);

        Log.d("sent","mail sent...");
    }catch(AuthenticationFailedException afe){
        Log.d("wrong","wrong passwrd....");
    }catch(AddressException ae){

    }catch (MessagingException e) {
        throw new RuntimeException(e);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:17:38.333

在最后一个 catch 语句之后添加一个带有 session.close(): 的 finally 块：

```
} finally {
    session.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:48:46.133

首先，您犯了一堆[常见的 JavaMail 错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)；清理它们。

无需“注销”，因为您只是“登录”了发送消息所需的时间。当 Transport.send 完成时，连接关闭并且您已注销。

# objective-c - LinkedIn 和 Google+ UIActivity 视图控制器按钮？

> ID：15600082
> 
> 赞同：1
> 
> 时间：2013-03-24T15:08:24.533
> 
> 标签：objective-c, xcode, google-plus, linkedin, uiactivityviewcontroller

我知道 UIActivity 视图控制器有一个 Facebook 和 Twitter 按钮，但我在徘徊是否有通过 UIActivityViewController 共享到 Google+ 或 LinkedIn 的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:17:13.900

在 Apple 提供的类型中，没有每种可用的类型，但您可以创建自己的类型。您可以创建一个`UIActivity`类并将其传递给`UIActivityViewController`以处理向您希望与之交互的每个服务发送数据：

```
DataItemProvider *dataToShare = [[DataItemProvider alloc] initWithPlaceholderItem:FileTypeToShare];

GooglePlusActivityType *googleActivity = [[GooglePlusActivityType alloc] init];
LinkdInActivityType *linkdinActivity = [[LinkdInActivityType alloc] init];

NSArray *activityTypes = @[googleActivity, linkdinActivity];
NSArray *activityItems = @[dataToShare];

UIActivityViewController *activityController = [[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:activityTypes];

[activityController setCompletionHandler:^(NSString *activityType, BOOL completed) {
    //Put in your completion handle code here.
}];

[self presentViewController:activityController animated:YES completion:nil]; 
```

然后为两者实现类`GooglePlusActivityType`并`LinkdInActivityType`处理将数据加载到两个站点。

# android - 需要有关在 android 服务中处理多个线程的建议

> ID：15600089
> 
> 赞同：0
> 
> 时间：2013-03-24T15:09:17.090
> 
> 标签：android, multithreading, android-service, android-mediaplayer

我一直在尝试实现一个`android service`可以将音频流下载到文件中然后可以同时播放该文件的方法。

这样我也可以实现缓冲。

我正在使用多个线程。所以第一次尝试了我的手`ExecutorService`。

代码[在 github 上](https://github.com/rahulsaini8/android)，有很多注释可以解释。

它会在一段时间内完美地下载和播放流，但几分钟后（比如 1 或 2 分钟后）它会停止**而不会抛出任何异常，甚至不会在日志中打印任何内容**。

**代码说明：**

要关注的主要类是 ServiceExecutor，它是一个 android 服务。

1.  它首先启动一个 AsyncTask 来启动整个过程。其中：
2.  设置将下载文件的临时文件。
3.  启动一个线程以在后台获取流的持续时间。此持续时间在缓冲时很有用。请注意，此线程不会播放流。
4.  启动第二个线程，将流下载到临时文件中。
5.  启动第三个线程来播放文件中的流。
6.  这第三个线程将在其 MediaPlayer 的 onPrepared() 函数内部也将启动第四个线程来处理流的缓冲。

通过缓冲我的意思是递归检查文件是否有足够的数据来连续播放流。在每次通话中，它都会检查临时文件的剩余流是否少于 2 秒，并且文件仍在下载，然后暂停媒体播放器 5 秒。它维护一个变量“pausedAtMilliSec”，它记录流暂停的位置，以便如果播放器也突然停止，它可以从那里恢复。

正如你现在所看到的，我在线程方面不是很好。在我看来，问题在于多线程处理（似乎，但不确定）。

因此，请随时发表**任何**评论或建议。我不会难过，我会很开心。

请检查一次代码。

我知道[PocketJourney 的](http://www.infidian.com/2009/12/27/android-streaming-mediaplayer-tutorial-updated-to-v1-5-cupcake/)代码。但也想试试我的。

*谢谢你*

# java - Java Generic instanceof 不使用继承

> ID：15600095
> 
> 赞同：2
> 
> 时间：2013-03-24T15:09:30.487
> 
> 标签：java, generics, instanceof

**我正在尝试做的事情：**

动态地使用 Java 继承进行类型检查。我有两个类：1)`com.example.Event`和 2)`com.example.TransactionEvent`扩展`com.example.Event`. 我有一个函数`Class<?> type`返回要检查的类型。

**代码：**

```
public class Event{}

public class TransactionEvent extends Event{}

public interface Listener
{
    public Class<?> type();
}

public void checkType(Event obj, Listener listener)
{
    System.out.println(obj.getClass().toString());
    System.out.println(listener.type().toString());

    if (obj.getClass().isInstance(listener.type()))
         System.out.println("yay!");
} 
```

**输出：**

```
class com.example.TransactionEvent
class com.example.Event

(no Yay) 
```

不是`TransactionEvent`instanceof `Event`，因为它继承自它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:11:30.587

应该：

```
if (listener.type ().isInstance (obj)) 
```

或者，实际上是相同的：

```
if (listener.type ().isAssignableFrom (obj.getClass ())) 
```

# c# - 如何在 WPF ListBox 中排序？

> ID：15600099
> 
> 赞同：9
> 
> 时间：2013-03-24T15:09:47.550
> 
> 标签：c#, .net, wpf, sorting, event-handling

C# 4.0 WPF 应用程序（参见下面的代码）在启动时显示：

![<code>ListBox</code>中的初始顺序](../Images/9508a704363734e221e26b11618b722a.png)

使用单击事件处理程序 单击**排序**按钮后的 abd ：`btnSort_Click()`

![排序后的列表框](../Images/fde7db09ad8f72e333863b6abc2ddabe.png)

如何按aaa，bbb，ccc的顺序排序？

C#代码：

```
public MainWindow()
{
  InitializeComponent();

  listBox1.Items.Add("ccc");
  listBox1.Items.Add("aaa");
  listBox1.Items.Add("bbb");
}
private void btnSort_Click(object sender, RoutedEventArgs e)
{
  listBox1.Items.SortDescriptions.Add(
  new System.ComponentModel.SortDescription("Content",
       System.ComponentModel.ListSortDirection.Ascending));
}
private void listBox1_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
  listBox1.Items.RemoveAt
     (listBox1.Items.IndexOf(listBox1.SelectedItem));
} 
```

XAML：

```
<Window x:Class="WpfApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ListBox Height="100" HorizontalAlignment="Left" Margin="8,43,0,0" Name="listBox1" VerticalAlignment="Top" Width="120" MouseDoubleClick="listBox1_MouseDoubleClick" />
        <Button Content="Sort" Height="23" HorizontalAlignment="Left" Margin="140,94,0,0" Name="btnSort" VerticalAlignment="Top" Width="75" Click="btnSort_Click" />
    </Grid>
</Window> 
```

**更新：**
好吧，我只是按照文章[“排序 WPF 列表框项”](http://www.c-sharpcorner.com/resources/855/sorting-a-wpf-listbox-items.aspx)

那么，我按属性“内容”排序的顺序是什么，该属性“内容”在哪里，我想知道（试图将其更改为任意“fff”而不是“内容”得到相同，如第二张截图，结果？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-24T15:16:55.083

由于您正在对字符串列表进行排序，因此不要指定属性名称（SortDescription 的第一个参数）：

```
listBox1.Items.SortDescriptions.Add(
            new System.ComponentModel.SortDescription("",
            System.ComponentModel.ListSortDirection.Ascending)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-25T19:49:25.977

```
YOULISTBOX.Items.SortDescriptions.Clear(); 
YOULISTBOX.Items.SortDescriptions.Add( new System.ComponentModel.SortDescription("NAME", System.ComponentModel.ListSortDirection.Ascending)); 
```

确保每次更新

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-26T12:01:58.883

对 wpf 组合框或列表框进行排序很容易 - 但请记住包含 Imports `System.ComponentModel`。

要按字母顺序排序，只需

```
MylistBox.Items.SortDescriptions.Add(
    New SortDescription("", ListSortDirection.Ascending)) 
```

或者

```
MyComboBox.Items.SortDescriptions.Add(
    New SortDescription("", ListSortDirection.Ascending)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-04T12:07:30.143

附加信息：

您排序的项目可能是 any `DependencyProperty`。因此，假设您有一个绑定到ListBox 控件`ObservableCollection`的自定义类。`ItemsSource`自定义类可以具有任意数量的依赖属性，您可以使用这些属性进行排序。您只需将依赖属性的名称（作为 a `string`）放入新`SortDescription`参数中。

向控件添加多个`SortDescription`s 将进行多变量排序。

依赖属性可以表示任何类型的变量，而不仅仅是字符串。我有一个例子，我首先按 a 排序`bool`，然后按a 排序`int`，最后按`DateTime`.

# java - JTextPane 格式化

> ID：15600100
> 
> 赞同：0
> 
> 时间：2013-03-24T15:09:50.480
> 
> 标签：java, swing, styles, jtextpane

我有一个 JTextPane，我想在其中添加行，并根据它们的内容让它们具有不同的格式。

目前我有这个

```
StyleContext context = new StyleContext();
StyledDocument document = new DefaultStyledDocument(context);

Style styleBold = context.getStyle(StyleContext.DEFAULT_STYLE);
StyleConstants.setBold(styleBold, true);
StyleConstants.setFontSize(styleBold, 18);

Style styleNorm = context.getStyle(StyleContext.DEFAULT_STYLE);
StyleConstants.setFontSize(styleNorm, 15);

for (int i = 0; i < temp.size(); i++) {
    String tmp = temp.get(i);
    if (tmp.substring(0, 2).equals(COMMENT_PREFIX)) {
        String addThis = " - " + tmp.substring(2);

        try {
            document.insertString(document.getLength(), addThis,
                    styleNorm);
        } //CATCH
    } else if (tmp.substring(0, 2).equals(VERSION_PREFIX)) {
        Date d = new Date(System.currentTimeMillis());
        String addThis = "Version: " + tmp.substring(2) + " - "
                + d.toString();
        try {
            document.insertString(document.getLength(), addThis,
                    styleBold);
        } //CATCH
    }
    try {
        document.insertString(document.getLength(), "\n", styleNorm);
    } //CATCH
} 
```

我取出了 catch 语句以减少代码大小。

但是，这会将我的整个文本格式化为`styleNorm`. 这是因为它是最后一次调用`Style`并且它们互相覆盖吗？如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T16:01:07.533

也可以[在这里](https://stackoverflow.com/a/7624923/230513)看到，[`TextComponentDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html#eg)展示了如何应用一些`StyleConstants`，包括字体大小、样式、对齐方式和颜色。样式可以[直接](https://stackoverflow.com/a/8534162/230513)`Document`应用于`initAttributes()`_ `StyledEditorKit`_

附录：下面的示例使用`SimpleAttributeSet`. 请注意，这`highAlert`会改变颜色，但**保留**从`boldBlue`.

![图片](../Images/47305d57c8f71537e2bd8ab108b1560d.png)

```
import java.awt.Color;
import java.awt.EventQueue;
import java.util.Date;
import javax.swing.JFrame;
import javax.swing.JTextPane;
import javax.swing.text.BadLocationException;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

/**
 * @see https://stackoverflow.com/a/15600689/230513
 */
public class Test {

    private void display() throws BadLocationException {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        String s = new Date().toString();
        JTextPane jtp = new JTextPane();
        StyledDocument doc = (StyledDocument) jtp.getDocument();

        SimpleAttributeSet normal = new SimpleAttributeSet();
        StyleConstants.setFontFamily(normal, "SansSerif");
        StyleConstants.setFontSize(normal, 16);

        SimpleAttributeSet boldBlue = new SimpleAttributeSet(normal);
        StyleConstants.setBold(boldBlue, true);
        StyleConstants.setForeground(boldBlue, Color.blue);

        SimpleAttributeSet highAlert = new SimpleAttributeSet(boldBlue);
        StyleConstants.setFontSize(highAlert, 18);
        StyleConstants.setItalic(highAlert, true);
        StyleConstants.setForeground(highAlert, Color.red);

        doc.insertString(doc.getLength(), s + "\n", normal);
        doc.insertString(doc.getLength(), s + "\n", boldBlue);
        doc.insertString(doc.getLength(), s + "\n", highAlert);
        f.add(jtp);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new Test().display();
                } catch (BadLocationException ex) {
                    ex.printStackTrace(System.err);
                }
            }
        });
    }
} 
```

# java - 休眠 - 无法连接到数据库

> ID：15600101
> 
> 赞同：2
> 
> 时间：2013-03-24T15:09:54.477
> 
> 标签：java, hibernate

我尝试使用 mysql，所以包括 mysql.jdbc，这些是我的休眠设置。

```
<?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
    <hibernate-configuration>
      <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/TekirMobile</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">fenderpass</property>
        <property name="hibernate.show_sql">true</property>
        <property name="hibernate.current_session_context_class">thread</property>
        <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
      </session-factory>
    </hibernate-configuration> 
```

但是当我尝试连接数据库时，我得到了这个错误：

```
Unable to connect: Cannot establish a connection jdbc:mysql://localhost:3306/mydbname using apache.org.derby.jdbc.ClientDriver(Unable to find a suitable driver) 
```

我什至不使用 derby 为什么会出现此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:02:25.777

您没有在任何地方指定连接驱动程序。它告诉您它正在尝试使用`apache.org.derby.jdbc.ClientDriver`.

通过以下方式指定 MySQL 驱动程序：

```
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property> 
```

# c++ - Boost互斥锁：自旋锁还是内核互斥锁？

> ID：15600102
> 
> 赞同：0
> 
> 时间：2013-03-24T15:09:55.170
> 
> 标签：c++, boost

C++ Boost 库的互斥类在下面是如何工作的？它是保留在用户空间中的自旋锁，还是内核分配的锁？

# google-webfonts - Google Webfont Loader + FontAwesome 问题

> ID：15600108
> 
> 赞同：1
> 
> 时间：2013-03-24T15:10:30.647
> 
> 标签：google-webfonts, font-awesome, webfont-loader

在将异步模式下的 Google Webfont Loader (GWL) 与 Font Awesome 字体组合时，我遇到了一个非常奇怪的行为。

如果我使用 GWL 加载几个自定义字体，Font Awesome 字体会加载 2 次。这是我用于 GWL 的代码：

```
<script type="text/javascript">
    WebFontConfig = {
        custom: { families: ['proxima-nova', 'museo-slab'], urls: ['evacss/font-families.css'] }
    };
    (function () {
        var wf = document.createElement('script');
        wf.src = 'evajs/webfont.js';
        wf.type = 'text/javascript';
        wf.async = 'true';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(wf, s);
    })();
</script> 
```

在 evacss/font-families.css 我有上面两种字体（proxima-nova 和 museo-slab）的字体系列定义

然后在此之前我有经典

```
<link rel="stylesheet" type="text/css" href="evacss/font-awesome.css"> 
```

使用自己的字体系列定义加载字体很棒

但结果是这样的： ![点击观看](../Images/b7bfb54ec1097872e1af69b99ec1374c.png)

如果我删除 GWL 脚本并只保留我的 Font Awesome Css，那么结果就是预期的结果，它只需要一次加载 Font Awesome。

![点击观看](../Images/14396aa03391aaec4c957e5dad0685af.png)

此版本的 GWL 也会发生相同的行为

```
<script src="http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script>
<script>
    WebFont.load({
        custom: { families: ['proxima-nova', 'museo-slab'], urls: ['evacss/font-families.min.css'] }
    });
</script> 
```

我真的不明白为什么 webfont.js 会触发我的 Font Awesome 的双重下载（以更通用的方式用于外部字体系列，我在 GWL 中没有以任何方式引用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:02:38.087

This bug come from firebug, try with chrome or listen your connection without firebug.

# visual-studio-2010 - 从 VS 2010 转换为 VS 2012 的项目中缺少 vcxproj.filters 文件

> ID：15600113
> 
> 赞同：5
> 
> 时间：2013-03-24T15:11:01.393
> 
> 标签：visual-studio-2010, visual-studio-2012

我正在将我的解决方案移至 TFS 环境。在 VS 2010 中创建并迁移到 VS 2012 的几 (8) 个“旧”C++ 项目缺少 vcxproj.filters 文件。这些项目看起来很开心并且满足于没有 .filters 的生活，但是当我尝试从 Visual Studio 中（而不是来自外部源代码控制工具）将它们添加到 TFS 2012 以便在项目文件中具有源代码控制绑定时，由于缺少过滤器文件，我收到错误。

有没有人遇到过类似的问题？任何解决方案？

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T16:10:30.880

好的。所以有一个非常简单的解决方案：只需添加一个文件过滤器（项目 -> 添加 -> 添加新过滤器）。这会导致 VS 为您创建过滤器文件...

显然，只有在您的项目中没有任何过滤器（文件夹）时才会发生这种情况。

# c++ - 排序数组时奇怪的算法性能（已编辑）

> ID：15600114
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:11:04.063
> 
> 标签：c++, arrays, algorithm, sorting

嗨，我正在测试几种排序算法在对 2500 到 25000 大小之间的数组进行排序时的性能。我比较的两种排序是 Gnome 排序和快速排序，从我所读到的这些快速排序应该是快得多，但 Gnome 排序在每种情况下都击败了它。

快速排序的代码是：

```
void myQuickSort(Record sRecord[], int firstElement, int lastElement, bool (*funPoint)   (int,int))
{
int i = firstElement;
int j = lastElement;
int temp;
char tmpname[NAMESIZE];

int pivot = sRecord[(firstElement + lastElement) / 2].score;

bool (*myPoint)(int,int) = funPoint;

while (i <= j)
{
    while (sRecord[i].score < pivot)
    {
        i++;
    }
    while (sRecord[j].score > pivot)
    {
        j--;
    }

    if(compareResult(sRecord[j].score,sRecord[i].score) == false)
    {
        temp = sRecord[i].score;
        strcpy(tmpname,sRecord[i].name);

        sRecord[i].score = sRecord[j].score;
        strcpy(sRecord[i].name,sRecord[j].name);

        sRecord[j].score = temp;
        strcpy(sRecord[j].name, tmpname);

        i++;
        j--;
    }

    if(firstElement < j)
    {
        myQuickSort(sRecord, firstElement, j, compareResult);
    }
    if(i < lastElement)
    {
        myQuickSort(sRecord, i, lastElement , compareResult);
    }
}
} 
```

GnomeSort 如下：

```
void myGnomeSort(Record sRecord[], int size, bool (*funPoint)(int,int))
{
     int pos = size, temp;
     char tmpname[NAMESIZE];

     bool (*myPoint)(int,int) = funPoint;

     while(pos > 0)

     {

         if (pos == size || myPoint(sRecord[pos].score, sRecord[pos-1].score) == false)

             pos--;

         else
         {
             temp = sRecord[pos].score;
             strcpy(tmpname,sRecord[pos].name);

             sRecord[pos].score = sRecord[pos-1].score;
             strcpy(sRecord[pos].name,sRecord[pos-1].name);

             sRecord[pos-1].score = temp;
             strcpy(sRecord[pos-1].name, tmpname);

             pos--;

          }
     }  
} 
```

谁能解释一下为什么在使用快速排序时会出现如此急剧的增长（元素有 2.5k 并且几乎长了 5 倍）。

感谢帮助

编辑：用于测试的代码是

```
Record smallRecord[25000];
populateArray(smallRecord, 25000);

int startTime = GetTickCount();

for(int times = 0; times < NUMOFTIMES; times++)
{
    populateArray(smallRecord, 25000);
    myGnomeSort(smallRecord, 25000, compareResult);
    cout << times << endl;
}

int endTime = GetTickCount();
float timeMS = ((float) (endTime - startTime)) / 1000;

cout << "Time taken: " << timeMS << endl; 
```

填充数组函数只是用随机数填充数组

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T20:33:37.237

实际上，快速排序的复杂度为**O(N^2)**，平均为**O(N * logN)**，而不是在最坏的情况下。所以不鼓励使用快速排序，因为总会存在这样的数据，它可以工作**O(N^2)**

# iphone - SpriteKit - 使用 AppDelegate - 未声明的标识符

> ID：15600115
> 
> 赞同：0
> 
> 时间：2013-03-24T15:11:08.497
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone, appdelegate

我正在用 cocos2d 编写游戏（来自 Pablo Ruiz 的书）。现在我必须创建暂停屏幕，并且根据本书，我必须在 AppDelegate.m（和 .h 文件）中创建新函数：

```
+(AppDelegate *) get {

return (AppDelegate *) [[UIApplication sharedApplication] delegate];
} 
```

我收到错误：需要一个类型；预期表达；消息发送表达式开头缺少“[”；使用未声明的标识符“AppDelegate”。

在另一个名为 GameScene.m 的文件中，我创建了这些函数：

```
-(void)resume
{
if(![AppDelegate get].paused)
{
    return;
}
[AppDelegate get].paused = NO;
[self onEnter];
}

-(void)onExit
{
if(![AppDelegate get].paused)
{
    [AppDelegate get].paused = YES;
    [super onExit];
}
}

-(void)onEnter
{
if(![AppDelegate get].paused)
{
    [super onEnter];
}
} 
```

而且我遇到了另一组错误：使用未声明的标识符“AppDelegate”，四次。

有人可以解释我如何摆脱这些错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:28:26.620

Make sure you have added the following to your GameScene.h:

```
@class AppDelegate; 
```

This will let the compiler know that the class `AppDelegate` exists. And in your GameScene.m:

```
#import "AppDelegate.h" 
```

This lets you access AppDelegate members and methods.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:31:44.137

Cocos2d 2.0？然后使用 AppController。

```
#import "AppDelegate.h"

AppController *app = (AppController*)[UIApplication sharedApplication].delegate; 
```

# c++ - 确定文件是否可以在 C++ 中创建/不是只读的

> ID：15600121
> 
> 赞同：2
> 
> 时间：2013-03-24T15:11:32.043
> 
> 标签：c++, c, file-io

如何检查是否可以创建文件或可以向其中写入数据？这是我的代码，但我认为，如果文件是可写的，它就无法处理......有人可以告诉我，怎么做吗？

```
bool joinFiles(const char * outFile) {
try {
    ofstream arrayData(outFile);
    //do something
    // ...
    //

    // write data
    arrayData << "blahblah" << endl;   

} catch (const char *ex) {
    return false;
}
return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:16:51.417

> 如何检查是否可以创建文件或可以向其中写入数据？

默认情况下，流不会抛出异常（它们可以配置为通过 抛出异常[`std::basic_ios::exceptions()`](http://en.cppreference.com/w/cpp/io/basic_ios/exceptions)）因此检查文件是否已打开，使用[`std::ofstream::is_open()`](http://en.cppreference.com/w/cpp/io/basic_ofstream/is_open)：

```
ofstream arrayData(outFile);
if (arrayData.is_open())
{
    // File is writeable, but may not have existed
    // prior to the construction of 'arrayData'.

    // Check success of output operation also.
    if (arrayData << "blahblah" << endl)
    {
        // File was opened and was written to.
        return true;
    }
}
// File was not opened or the write to it failed.
return false; 
```

# c# - 在 C# windows 应用程序中控制用户权限

> ID：15600123
> 
> 赞同：1
> 
> 时间：2013-03-24T15:11:36.840
> 
> 标签：c#, sql, windows, permissions

我已经用 C# 和 SQL 2008 设计了 ​​Windows 应用程序。现在，我想控制该用户可以访问哪个部分及其权限。

所以，我想知道在sql中设计表并为每个用户设置权限更好还是有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:21:29.647

一般来说，我所看到的内容大致如下：

有一张`tblUser`这样的桌子：

```
tblUser
    UserId
    UserName
    etc... 
```

角色表：

```
tblRole
    RoleId
    Name 
```

和一个链接器表：

```
tblUserRole
    UserId
    RoleId 
```

在您的应用程序中，您将检查当前用户是否在`tblUserRole`表中具有相应的角色。如果是这样，则允许当前用户使用该功能，否则显示错误消息，禁止用户输入等...

例如`MS SQL`，您可以有以下类型`Stored Procedure`：

**添加用户**

```
CREATE PROCEDURE spAddUser
    @UserName AS nvarchar(256)
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

INSERT INTO tblUser
    (UserName)
    VALUES(@UserName)

SELECT SCOPE_IDENTITY( ) AS 'Id'
END
GO 
```

**添加用户角色**

```
CREATE PROCEDURE spAddUserRole
@UserId AS int,
@RoleId As int
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

INSERT INTO tblUserRole
    (UserId, RoleId)
    VALUES(@UserId, @RoleId)
END
GO 
```

**用户是否有角色**

```
CREATE PROCEDURE spDoesUserHaveRole
@UserId AS int,
@RoleId As int,
@HasRole AS bit OUTPUT
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

SELECT @HasRole = COUNT(UserId) > 0 FROM tblUserRole
    WHERE UserId = @UserId AND
          RoleId = @RoleId
END
GO 
```

# php - htaccess & php 检查授权

> ID：15600124
> 
> 赞同：0
> 
> 时间：2013-03-24T15:11:37.600
> 
> 标签：php, .htaccess

我有一个

```
http://example.com/DL/ 
```

任何人都可以免费访问的目录，现在我想拒绝未经授权的用户访问，所以我用代码编写了非常简单的 index.php

```
<?php
include('config.php');
session_start();
$result = (mysql_query("SELECT * FROM accounts WHERE hash='".$_SESSION['hash']."' ");
$row = mysql_fetch_array(result);
if($row['access']) {
    return true;
} else {
    header("location: /login.php");
}
?> 
```

问题：有没有办法设置 .htaccess 来检查 index.php 是否在每次用户请求时返回 true

```
http://example.com/DL/* 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:28:42.770

You can use mod_rewrite to make all requests be routed to index.php.
See [this example](https://stackoverflow.com/questions/8161334/redirection-everything-to-index-php/8161350#8161350).

This way you can utilize the [Front Controller Pattern](http://phpmaster.com/front-controller-pattern-1/)
Which basically means that index.php will be your router into the other parts of your code. This allows for the access control that you are looking for but also lets you have a good structure of the rest of your code.

Another recommendation is to only expose index.php in your web root and have the rest of your code outside of the publicly visible folder. This way you will also prevent someone from fetching all your code base when you forget to configure apache properly.

# c# - 使用 log(base 10) 函数的 Visual Studio 2012 C# Form 应用程序

> ID：15600128
> 
> 赞同：-3
> 
> 时间：2013-03-24T15:12:06.547
> 
> 标签：c#, forms

我正在 Visual Studio 2012 C# Form 应用程序中编写程序。单击按钮后，我想在其中使用 log(base 10) 进行计算。我看到了一个代码，我在我的程序中写了它，但它给了我一个错误。我哪里错了？

```
 public static decimal Log10(
        decimal value 
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:13:59.923

您需要实际实现该功能，而不仅仅是声明它：

```
public static decimal Log10(decimal value)
{
    return Math.Log10((double)value);
} 
```

好吧，正如您所见，.NET 框架中已经内置了这样的功能：[`Math.Log10`](http://msdn.microsoft.com/en-us/library/system.math.log10.aspx). 因此，您可能不需要重新发明轮子，只需使用它即可。

# android - Gridview 使用 asynctask 填充问题

> ID：15600129
> 
> 赞同：2
> 
> 时间：2013-03-24T15:12:10.490
> 
> 标签：android, gridview, android-asynctask

我正在尝试用缩略图填充我的 Gridview，但我在解码 asynctask 中的图像时遇到问题。当我启动应用程序时，图像被 1 个 1 加载并且图像无法正确显示（一旦我滚动它会显示顶部图像并稍后加载原始图像）。这是我的代码：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private List<String> mList;
    private int mheight;
    private int mwidth;
    private InputStream is;

    public ImageAdapter(Context context, List<String> list, int height, int width) {
        mContext = context;
        mList = list;
        mheight = height;
        mwidth = width;
    }

    @Override
    public int getCount() {
        return mList.size();
    }

    @Override
    public Object getItem(int position) {
        return mList.get(position).toString();
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(mContext);
        } else {
            imageView = (ImageView) convertView;
        }

        InputStream is;
        try {
            is = mContext.getAssets().open(mList.get(position));
            Loadimage task = new Loadimage(imageView , mheight , mwidth);
            task.execute(is);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return imageView ;

    }

    public class Loadimage extends AsyncTask<InputStream, Void, Bitmap>{
        private final WeakReference<ImageView> imageViewReference;

        private InputStream is = null;
        private int width;

        public Loadimage(ImageView imageView, int mheight, int mwidth) {
             imageViewReference = new WeakReference<ImageView>(imageView);
             this.width=mwidth;

            // TODO Auto-generated constructor stub
        }

        @Override
        protected Bitmap doInBackground(InputStream... params) {
            is = params[0];

            if (is !=null) {

                Bitmap bitmap  = BitmapFactory.decodeStream(is);
                Bitmap nBitmap =Bitmap.createScaledBitmap(bitmap,width/3 , width/3, false);
                return nBitmap;     
            }
            return null; 
          }
         @Override
         protected void onPostExecute(Bitmap bitmap) {
            if (imageViewReference != null && bitmap != null) {
                final ImageView imageView = imageViewReference.get();
                if (imageView != null) {
                    imageView.setImageBitmap(bitmap);
                    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:51:45.433

我强烈推荐[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。它有你所需要的：一个可以加载缩略图的网格视图。它还具有内存和磁盘缓存功能，以及线程池大小的日志记录和功能。试试看; 它对我来说非常有效，它应该满足您的需求。

# javascript - 司产NaN

> ID：15600132
> 
> 赞同：3
> 
> 时间：2013-03-24T15:12:14.750
> 
> 标签：javascript, jquery, division

我正在尝试将变量`number`除以`100`并得到`NaN`。我是 jQuery 新手，谁能帮我理解我做错了什么？

```
$.each(data.products, function (i, data) {

    var div_data = "<p>" + data.title + "<br/>" + data.description + "</p>";

    div_data += '<img src="' + data.imageUrl + '" title="Loading..." alt="Loading...">';
    div_data += '<p><a href="' + data.url + '">Buy</a></p>';

    $(div_data).appendTo("#testjson");

    number = '<div class="number">' + data.price + '</div>';
    $('#myElement').text((number / 100));

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:17:05.700

首先，您要设置`number`一个字符串：

```
number = '<div class="number">'+ data.price + '</div>'; 
```

然后你将该字符串除以`100`

在 JavaScript 中，结果[`NaN`](http://es5.github.com/#x4.3.23)是`Not a Number`. 这是[在规范](http://es5.github.com/#x11.5.2)中指定的。

一种可能的解决方案是将数字本身除以 100，而不是 HTML 字符串，例如：

```
var number = data.price/100;
$('#myElement').text(number); 
```

这不会将嵌套的 div 附加到您的`#myElement`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:30:43.830

你可以这样做

```
 number = '<div class="number">' + (data.price/100) + '</div>';
    $('#myElement').text((number )); 
```

这就是您在 .text() 中所做的

```
('<div class="number">' + (data.price/100) + '</div>')/100 
```

# jquery - Jquery 验证输入到八个整数和两个小数

> ID：15600133
> 
> 赞同：0
> 
> 时间：2013-03-24T15:12:16.240
> 
> 标签：jquery, regex, validation

我已经尝试过这段代码，但我想我的正则表达式有错误，因为它总是`true`.

除了正则表达式，我还有一个问题，`keypress`因为我在添加新字符之前测试值，我不想使用，`keyup`因为我不知道最后一个字符是在哪里添加的（用户不会总是输入char 在输入字段的末尾）。

我会很感激一个好的解决方案，谢谢。

```
$('.myInputField').keypress(function(){
    var val = $(this).val();
    var regexTest = /^[0-9]{0,8}[.][0-9]{0,2}|[0-9]{0,8}$/;
    var ok = regexTest.test(val);
    if(ok)
        return true;
    else
        return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:16:15.853

我想你可能想要这样的正则表达式：

```
/^\d{0,8}(\.\d{0,2})?$/ 
```

您正在使用`.`而不是`\.`，但`.`会匹配*任何*字符。

`?`近端允许您拥有或不拥有“.12” 。

`\d`是一种限制数字的捷径。

请考虑不要`keypress`为此使用- `keyup`（更好）或`change`（最好）将是其他要考虑的选择。

如果您需要“非常敏感”的反馈（不能只使用`change`），请考虑这样做（请使用比我在示例中使用的简单 CSS 更好的方法）：

```
$('.myInputField').keyup(function(e){
  var val = $(this).val();
  var regexTest = /^\d{0,8}(\.\d{1,2})?$/;
  var ok = regexTest.test(val);
  if(ok) {
      $(this).css('background-color', 'green');
  } else {
      $(this).css('background-color', 'red');
  }
}); 
```

[JS 小提琴示例](http://jsfiddle.net/GgmJp/)

注意：我还更改了代码，因此如果您`.`在输入中输入 a，我们希望您在小数点*后至少放置一位数字*。如果您真的不想要此编辑，`\d{1,2}`请将`\d{0,2}`

# javascript - Three.js Tube Geometry 基于自定义几何

> ID：15600137
> 
> 赞同：0
> 
> 时间：2013-03-24T15:12:37.337
> 
> 标签：javascript, jsp, 3d, three.js, webgl

我有一组线作为向量，例如：

```
line1: [10,10,9,10,10]
line2: [10,9,8,10,10]
line3: [10,10,10,10,10] 
```

其中的每个值代表在管中不同高度的管（公称直径 10）直径的测量值，每条线代表不同旋转时的直径。那是：

*   line1 是管子在 0 度处的直径，
*   line2 是管子在 15 度处的直径，
*   line3 是管子在 65 度处的直径

线的数量及其旋转可能会有所不同，但我想使用 Three.js 将这些线可视化为 3D 中的管（嗯，部分测量的管）。

我是否最好尝试使用尽可能多的线来创建自定义几何图形，或者我可以使用 TubeGeometry 将我的线附加到上面？是否可以根据这些线创建管，并在线之间外推值？

我试图实现的最终结果是一个可以放大和缩小的 3D 网格。

欢迎任何想法或建议！

# php - 从 Twitter XML 计算天数

> ID：15600139
> 
> 赞同：0
> 
> 时间：2013-03-24T15:12:59.077
> 
> 标签：php, xml, date, twitter, date-math

我正在使用 Twitter API 将我最近的推文从 XML 文件中获取到我的网站中。我的页面上已经显示了推文，但我无法显示自显示推文以来已经过去了多少天。

我已经尝试过一些解决方案在这里回答了同样的问题，但它对我不起作用。XML 文件中的日期和时间如下所示：

```
<statuses type="array">
   <status>
      <created_at>Sat Mar 23 18:43:16 +0000 2013</created_at>
   </status>
</statuses> 
```

我正在检索这样的数据：

```
<?php
$xmldata = 'https://api.twitter.com/1/statuses/user_timeline.xml?screen_name=AblazeDigital';
$open = fopen($xmldata, 'r');
$content = stream_get_contents($open);
fclose($open);
$xml = new SimpleXMLElement($content);
?>
<?php 
    echo $xml->status[0]->created_at;
?> 
```

如何使用 php 创建一个函数，读取以下日期“2013 年 3 月 23 日星期六 18:43:16 +0000 2013”​​并告诉今天已经过去了多少天？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:19:53.500

使用[`strtotime()`](http://php.net/manual/en/function.strtotime.php)它并将其与当前时间戳进行比较。

```
$date = $xml->status[0]->created_at;
$difference = time() - strtotime($date);
$days = $difference/24/3600;
echo $days . " days"; // outputs something like "0.857615740741 days" 
```

见[演示](http://codepad.viper-7.com/pjZi7h)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:20:38.193

```
$now = new DateTime();
$postdate = DateTime::createFromFormat("D M d H:i:s P Y", "Sat Mar 23 18:43:16 +0000 2013");
$interval = $now->diff($postdate);
echo $interval->format('%d days'); 
```

[看到它在行动](http://codepad.viper-7.com/w59osN)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T15:21:43.187

```
$time = strtotime($xml->status[0]->created_at);
$days = (time() - $time) / 86400 //86400 = seconds of one day 
```

[strtotime](http://www.php.net/manual/function.strtotime.php)将任何日期字符串转换为 unixtime，因此如果您从当前时间中减去它，您将获得自推文以来的秒数。要将其转换为天，只需将其除以 86400。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T15:21:47.660

```
$now = new DateTime('NOW');
$pageTime = new DateTime('Sat Mar 23 18:43:16 +0000 2013');

$sub = $now->diff($pageTime);
$days = $sub->format('%d');

if ($days < 1) {
    echo 'Less than a day has passed';
}
elseif ($days == 1) {
    echo $days.' day has passed';
}
else {
    echo $days.' days have passed';
} 
```

# c# - Reflection.Emit：AssemblyBuilder.SetEntryPoint 不设置入口点

> ID：15600142
> 
> 赞同：2
> 
> 时间：2013-03-24T15:13:19.167
> 
> 标签：c#, reflection.emit, entry-point

我正在用 C# 编写一种连接语言，目前它是解释型的，但我想进行下一步：编译。为此，我尝试编写一个简单的“Hello, World！”。使用 System.Reflection.Emit 编程发射器。该代码在没有任何 Emit 异常的情况下工作，但是当我运行生成的“test.exe”文件时，它会抛出异常

```
Unhandled Exception: System.MissingMethodException: Entry point not found in assembly 'IL_Test, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'. 
```

我曾尝试在谷歌上搜索答案，但无济于事。也许这里有人可以帮助我？（请）我写的代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
using System.Reflection.Emit;
using System.IO;
using System.Diagnostics;

namespace ILCompileTest
{
    class Program
    {
        static void Main(string[] args)
        {
            const string ASSEMBLY_NAME = "IL_Test";

            AssemblyBuilder assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(
                new AssemblyName(ASSEMBLY_NAME), AssemblyBuilderAccess.Save);
            ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule(
                ASSEMBLY_NAME);
            TypeBuilder typeBuilder = moduleBuilder.DefineType("Program", 
                TypeAttributes.Class | TypeAttributes.Public);
            MethodBuilder methodBuilder = typeBuilder.DefineMethod(
                "Main", MethodAttributes.Public | MethodAttributes.Static,
                typeof(void), new Type[] { typeof(string[]) });
            ILGenerator gen = methodBuilder.GetILGenerator();

            gen.Emit(OpCodes.Ldstr, "Hello, World!");
            gen.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine", new Type[] { typeof(string) }));
            gen.Emit(OpCodes.Ldc_I4_1);
            gen.Emit(OpCodes.Call, typeof(Console).GetMethod("ReadKey", new Type[] { typeof(bool) }));

            assemblyBuilder.SetEntryPoint(methodBuilder, PEFileKinds.ConsoleApplication);
            File.Delete("test.exe");
            assemblyBuilder.Save("test.exe");

            Process.Start("test.exe");
        }
    }
} 
```

所以，问题是：**如何将入口点设置为我定义的 Main 方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:14:54.597

您缺少对 typeBuilder.CreateType() 的调用，DefineDynamicModule 必须将 exe 名称作为第二个参数传递。完整的工作样本：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
using System.Reflection.Emit;
using System.IO;
using System.Diagnostics;

namespace ILCompileTest
{
    class Program
    {
        static void Main(string[] args)
        {
            const string ASSEMBLY_NAME = "IL_Test";

            AssemblyBuilder assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(
                new AssemblyName(ASSEMBLY_NAME), AssemblyBuilderAccess.Save);
            ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule(
                ASSEMBLY_NAME, "test.exe");
            TypeBuilder typeBuilder = moduleBuilder.DefineType("Program", 
                TypeAttributes.Class | TypeAttributes.Public);
            MethodBuilder methodBuilder = typeBuilder.DefineMethod(
                "Main", MethodAttributes.HideBySig|MethodAttributes.Public | MethodAttributes.Static,
                typeof(void), new Type[] { typeof(string[]) });
            ILGenerator gen = methodBuilder.GetILGenerator();

            gen.Emit(OpCodes.Ldstr, "Hello, World!");
            gen.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine", new Type[] { typeof(string) }));
            gen.Emit(OpCodes.Ldc_I4_1);
            gen.Emit(OpCodes.Call, typeof(Console).GetMethod("ReadKey", new Type[] { typeof(bool) }));
            typeBuilder.CreateType();
            assemblyBuilder.SetEntryPoint(methodBuilder, PEFileKinds.ConsoleApplication);
            File.Delete("test.exe");
            assemblyBuilder.Save("test.exe");

            Process.Start("test.exe");
        }
    }
} 
```

# python - 可以在共享托管 Web 服务器上使用 websockets 吗？

> ID：15600152
> 
> 赞同：8
> 
> 时间：2013-03-24T15:14:22.717
> 
> 标签：python, ruby, websocket, tornado, long-polling

我使用 PHP、JS、HTML、CSS。如果这是最好的选择，我愿意学习 ruby​​ 或 python。

我的下一个项目将涉及从服务器向用户提供实时数据，反之亦然。我在我的共享服务器上拥有 shell 访问权限，但我不确定是否可以访问端口。是否可以在共享主机帐户上使用 websockets 或任何其他有效的服务器-客户端连接，如果可以，我需要做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T16:11:37.030

为了获得最佳性能和完全控制您的设置，您需要“自己的”服务器。
今天有大量的虚拟服务器提供商，这意味着您可以完全控制您的 IP，但物理服务器仍然在许多客户端之间共享，这意味着更便宜的价格和更大的灵活性。

我建议使用[Amazon EC2](https://aws.amazon.com/free/)的免费套餐计划，您可以随时在免费期后辞职。他们有许多地理位置可供选择。

欧洲另一家让我满意的供应商是[Tilaa](http://www.tilaa.com/)

[您可能可以在虚拟主机讨论论坛](http://www.webhostingtalk.com/forumdisplay.php?f=104)上找到更多适合您需求的替代方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:48:12.790

直到几周前，websockets 部署需要在不同端口上运行的独立服务器，或者像 varnish/haproxy 这样的服务器端代理来监听端口 80 并重定向正常的 http 流量。最新的 nginx 版本添加了对 websockets 的内置支持，但除非您的托管服务提供商使用它，否则您就不走运了。（请注意，我对这个 nginx 功能没有个人经验）

就我个人而言，我发现对于大多数应用程序，websockets 可以替换为[服务器发送的事件](https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events)——一个非常轻量级的协议，它基本上是另一个在服务器端保持打开状态的 http 连接，并发送带有由双换行符分隔的消息的明文流。

[大多数体面的浏览器都支持它，但由于这不包括 Internet Explorer，所以这里](https://github.com/remy/polyfills/blob/master/EventSource.js)和[这里](https://github.com/Yaffle/EventSource)都有可用的 polyfill

这涵盖了连接的一侧，通常使用长轮询实现的一侧。另一个方向可以用 XHR 以通常的方式覆盖。最终结果与 websockets IMO 非常相似，但客户端->服务器消息的延迟更高。

# sql-server - Microsoft SQL Server 从选择查询插入

> ID：15600154
> 
> 赞同：20
> 
> 时间：2013-03-24T15:14:36.457
> 
> 标签：sql-server, sql-server-2008, select, insert

我正在尝试做的事情：阅读日志并将必要的数据插入到 3 个不同的表中，这些表可以相互获取信息。

`LOG_ITEM201303`在游戏日志数据库中找到。
`Mail_Item_Table`, `Mail_List_Table`,`Mail_Message_Table`在游戏数据库中找到。

邮件表通过索引连接。

`CHAR_KEY`, `NAME`,`ITEMNUM`是我需要用于查询的值。

我从日志中获取数据的查询：

```
SELECT CHAR_KEY, NAME, ITEMNUM
FROM LOG_ITEM201303
where 
(   
    ITEMNUM = 14317
OR  ITEMNUM = 14318
OR  ITEMNUM = 15478
OR  ITEMNUM = 15479
OR  ITEMNUM = 14301
OR  ITEMNUM = 14302
OR  ITEMNUM = 15476
OR  ITEMNUM = 15477
OR  ITEMNUM = 15018
OR  ITEMNUM = 15019
OR  ITEMNUM = 15020
OR  ITEMNUM = 15021
OR  ITEMNUM = 15022
OR  ITEMNUM = 15023
OR  ITEMNUM = 15024
OR  ITEMNUM = 15025
OR  ITEMNUM = 14437
OR  ITEMNUM = 14438
OR  ITEMNUM = 15656
OR  ITEMNUM = 15657
OR  ITEMNUM = 15658
OR  ITEMNUM = 15659
OR  ITEMNUM = 15660
OR  ITEMNUM = 15661
OR  ITEMNUM = 15662
OR  ITEMNUM = 15663
) AND (KIND = 133) AND (Convert(varchar, OCCUR_TIME,111) < '2013/03/22') 
```

上面的日志查询示例结果（总实际结果在600+）：

```
 CHAR_KEY        NAME            ITEMNUM
 -----------+----------------+-----------
 28257      |   clarkailey   |   14438
 894367     |   Wolf         |   15023
 2869858    |   HOPEINME     |   14437 
```

现在我需要自动将每一行插入到这个查询中：

```
 CHAR_KEY        NAME            ITEMNUM
 -----------+----------------+-----------
 2869858    |   HOPEINME     |   14437 
```

（此查询显示了上面插入的第三个示例数据的示例......
而不是对每个条目进行此查询有没有办法更快地完成？）

```
INSERT INTO Mail_Item_Table
(ItemNumber, ItemInfo, ReceiveDate)
VALUES
(14437,       --this is the ITEMNUM
    (SELECT CONVERT(BINARY(16), REVERSE(CONVERT(BINARY(16), 14437)))), NULL)

INSERT INTO Mail_Message_Table
(Message)
VALUES
('Automated Message from the ADMIN.')

INSERT INTO Mail_List_Table
(ReceiverCharKey, MailListIndex, MailItemIndex, MailMessageIndex, Sender, Receiver, SendDate)
VALUES 
(2869858,       --this is the CHAR_KEY
(SELECT TOP 1   MailListIndex+1 as last_entry
 FROM           Mail_List_Table
 WHERE          sender = 'SENDER'
 ORDER BY       MailListIndex DESC),
(SELECT TOP 1   MailItemIndex AS last_entry
 FROM           Mail_Item_Table
 ORDER BY       MailItemIndex DESC),
(SELECT TOP 1   MailMessageIndex AS last_entry
 FROM           Mail_Message_Table
 ORDER BY       MailMessageIndex DESC),
 'SENDER', 
 'HOPEINME', --this is the NAME
 getdate()) 
```

我的问题：

如何自动化这一切，即查询将读取所有日志并逐行插入数据。非常感谢。

* * *

我可以为此使用@variables 吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-24T18:04:42.733

您可以使用以下语法进行插入

```
INSERT INTO dbo.Destination (Col1, Col2, Col3)
SELECT Col1, Col2, Col3
FROM dbo.Source 
```

如果您有具有相同列的表或具有与目标相同列的结果集，则不必在 INSERT 中指定列。

```
INSERT INTO dbo.Destination
SELECT *
FROM dbo.Source 
```

这两个都基于您已经创建的目标表。这些**不**一样`SELECT * INTO dbo.Destination FROM dbo.Source`

# ruby-on-rails - 如何在 Rails 中设置电子邮件正文

> ID：15600156
> 
> 赞同：0
> 
> 时间：2013-03-24T15:14:38.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用下面的代码`class UserMailer < ActionMailer::Base`发送电子邮件：

```
mail :to => "email@address", :subject => "Subject" 
```

如何添加消息正文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:38:01.940

您必须对电子邮件正文使用相同操作的邮件程序视图。如果您的邮件操作是，`send_mail`那么您的默认邮件正文必须是`view/users/send_mail.html.erb` 有关详细信息，请参见以下链接， [http ://guides.rubyonrails.org/action_mailer_basics.html#create-a-mailer-view](http://guides.rubyonrails.org/action_mailer_basics.html#create-a-mailer-view)

# android - Android 运行时错误

> ID：15600161
> 
> 赞同：0
> 
> 时间：2013-03-24T15:15:02.100
> 
> 标签：android, android-gridview

我想知道是否有人可以帮助我，我正在编写一个android程序，每当我运行模拟器时，都会出现这些错误：

```
03-24 15:06:17.464: E/AndroidRuntime(792): FATAL EXCEPTION: main
03-24 15:06:17.464: E/AndroidRuntime(792): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.gridviewexample/com.example.gridviewexample.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.example.gridviewexample.MainActivity" on path: /data/app/com.example.gridviewexample-2.apk
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.os.Looper.loop(Looper.java:137)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-24 15:06:17.464: E/AndroidRuntime(792):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 15:06:17.464: E/AndroidRuntime(792):  at java.lang.reflect.Method.invoke(Method.java:511)
03-24 15:06:17.464: E/AndroidRuntime(792):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-24 15:06:17.464: E/AndroidRuntime(792):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-24 15:06:17.464: E/AndroidRuntime(792):  at dalvik.system.NativeStart.main(Native Method)
03-24 15:06:17.464: E/AndroidRuntime(792): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.gridviewexample.MainActivity" on path: /data/app/com.example.gridviewexample-2.apk
03-24 15:06:17.464: E/AndroidRuntime(792):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
03-24 15:06:17.464: E/AndroidRuntime(792):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-24 15:06:17.464: E/AndroidRuntime(792):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-24 15:06:17.464: E/AndroidRuntime(792):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-24 15:06:17.464: E/AndroidRuntime(792):  ... 11 more 
```

我正在尝试编写网格视图代码，如果有人能提供帮助，我将不胜感激，非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:34:04.117

确保您`com.example.gridviewexample.MainActivity`在[AndroidManifest.xml](http://developer.android.com/guide/topics/manifest/manifest-intro.html)中声明了您的活动。

此外，请确保您`MainActivity`在文件顶部设置了正确的包名称（例如*`package com.example.gridviewexample`*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:33:22.413

系统在您的 com.example.gridviewexample 包中找不到**MainActivity.class 。**

看看你那里有没有这样的课程。

Project -> Clean 也可以提供帮助（前提是您使用的是 Eclipse）。

# excel - 来自不同工作表的单元格值拾取

> ID：15600166
> 
> 赞同：0
> 
> 时间：2013-03-24T15:15:24.343
> 
> 标签：excel

我在工作簿中有 5 张工作表，即`Sheet1`, `Sheet2`, `Sheet3`.... 在每张工作表中维护一些数据。在第一张纸中`Consolidation`，我需要将`B3`每张纸的单元格值显示在每个单元格中

表格中的`Consolidation`表格如下

```
SheetNo|    Name    | value (Value of B3 Cell of respective sheet )
       |            |
1      | Party 1    | Value of Sheet1!B3
2      | Party 2    | Value of Sheet2!B3
3      | Party 3    | Value of Sheet3!B3
4      | Party 4    | Value of Sheet4!B3
:
:
N      | Party N    | Value of Sheetn!B3
:
:
:
Z      | Party Z    | Value of SheetZ!B3 
```

我希望这很可能通过一些单元函数来完成，而不是使用 VBA 脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:29:13.067

转到您的合并表：

```
a1: 1, a2: 2, a3: 3 etc
a2: ="Party "&a1
a3: =INDIRECT("Sheet"&a1&"!b3")
auto fill rest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:27:37.550

To refer to a cell by name, you can use the `INDIRECT()` function, as in:

```
=INDIRECT("'"&$B1&"'!$B$3") 
```

Here, `B1` is the cell containing the name of your sheet. The expression inside the parentheses will evaluate to, for example, `'Party 1'!$B$3`. `INDIRECT()` will expand that to the actual value of cell `B3` in sheet `Party 1`.

The extra single-quotes are required to deal with the spaces in your sheet names.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:26:29.490

除非我遗漏了一些东西，否则你不是已经用你的例子回答了吗？

`=SheetName!Address`将返回`Address`on的值`SheetName`

如果你想让它更动态一点，这样你就不必手动填写工作表名称，你可以做这样的事情。

`=INDIRECT("Sheet" & Row() & "!$B$3")`

但是它只会做数字表名称。（除非 N 和 Z 只是数字，否则没有问题）

刚看了看，你有下一个表号，所以`Column A`你可以替换`Row()``$A$1`

# android - 从 OnClick 中的另一个类调用方法

> ID：15600167
> 
> 赞同：0
> 
> 时间：2013-03-24T15:15:26.340
> 
> 标签：android

我有一个类，其中包含：

```
 @Override
public void onClick(View createView) {
    switch (createView.getId()) {
    case R.id.save_button:
        Appointments add = new Appointments();
        add.addAppointment(TITLE);
        add.addAppointment(TIME);           
        break;
    }
} 
```

我希望能够调用另一个类中的 addAppointment 方法：

```
 public void addAppointment(String string) {
  // Insert a new record into the Appointment data source.
  // You would do something similar for delete and update.
  SQLiteDatabase db = events.getWritableDatabase();
  ContentValues values = new ContentValues();
  values.put(TITLE, string);
  values.put(TIME, string);
  db.insertOrThrow(TABLE_NAME, null, values);
 } 
```

我已经尝试过这种方式，但是当我单击 onclick 时，程序崩溃了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:24:19.380

```
 @Override
public void onClick(View createView) {
    switch (createView.getId()) {
    case R.id.save_button:
        Appointments add = new Appointments();
        add.addAppointment(TITLE, TIME);  //Send both together
        break;
    }
}
I want to be able to call the addAppointment method which is in another class:

 public void addAppointment(String title, String time) {  // Change method header to accept both Strings here
  // Insert a new record into the Appointment data source.
  // You would do something similar for delete and update.
  SQLiteDatabase db = events.getWritableDatabase();
  ContentValues values = new ContentValues();
  values.put("title", title);   // second param is what you passed in for first param of method
  values.put("time", time);    // second param here is whatever you passed in for second param of method
  db.insertOrThrow(TABLE_NAME, null, values);
 } 
```

我不知道 TITLE 和 TIME 是什么，因为我没有看到它们在任何地方声明或初始化，但`vaules.put()`应该在里面，`(key, value)`所以你可以对 the 进行`key`描述`value`，`value`显然就是这样。通常所有的大写字母都代表一个`constant`需要考虑的东西以跟上标准

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:20:32.320

用两个参数编写方法 1st.calling 方法一个接一个地用一个参数不会给你两个值。

```
 add.addAppointment(TITLE,TIME); 
```

# php - 如何限制某个 IP 地址每 X 小时观看视频的次数？

> ID：15600169
> 
> 赞同：0
> 
> 时间：2013-03-24T15:15:47.133
> 
> 标签：php, apache, video, centos

我有一个视频网站，我只想让人们每天观看一定数量的视频。

做这个的最好方式是什么？

我目前基本上是在 .php 脚本中执行此操作：

**viewvideo.php（视频 html）**

```
<?
$_SESSION['video'] = 'myvid.mp4';
$_SESSION['hash'] = md5($randomhash); //not a hash of filename etc. just random

?> then in the html :  <video src='video.php?hash=<?=$_SESSION['hash'];?>'> 
```

**video.php（如果允许，则提供视频文件**

```
<?php
if (canThisIpViewVideo()) {
      // can view the video ok

if ($_SESSION['hash'] == $_GET['hash']) {
      // next couple of lines get the video filename (from session), add one to list of ips (so canThisIpViewVideo has data to read from), then readfile's the .mp4 vid
$videofile = $_SESSION['video'];
mysql_query("insert into viewed (ip,date) values('$ip',NOW())"); // i do sanatize input
session_destroy(); // so can only be viewed once per hash
readfile("videos/$videofile");
die();
} 
```

如果 !canThisIpViewVideo() 对于我服务器的短片（14 秒）视频，这可以正常工作，但对于正常大小的视频，它会加载很奇怪（视频播放器要么不会播放，而是等待时间（20-40 秒）然后播放，如果在任何时候（在它开始播放之前）用户再次点击播放，它将再次请求它（更多来自视频播放器的错误）

.htaccess 中是否有任何方法可以将请求（对一大堆 (100) 视频）限制为每天一定数量？

大多数限制每天浏览量的大型网站是如何做到这一点的？readfile 似乎对我不起作用。如果我将 readfile 替换为 header("Location: $fullvideourl"); 它可以 100% 正常工作。

（另外，我可能会用一段 memcached 代码替换 mysql 请求，因为它会更容易工作（旧数据自动过期（超过 1 天））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:27:12.640

Limiting to IP address is bad idea. For example, in Latvia high school has one IP. behind that ip is about 10000 users. The same is with large companies, that have one public IP. But if You want do that, then just log IP address, when users open video. And before showing video, check how many times from that IP already watched video. If limit is reached, then show that to user. And in DB you can count only views.
`mysql_query("UPDATE views SET count = count + 1 WHERE date = '$today' AND ip = '$IP'")` if this query returns 0, then you must insert row for that ip for today.

Edit: See this: [Limit user access to user identified by IP address only 5 times a day](https://stackoverflow.com/questions/8448107/limit-user-access-to-user-identified-by-ip-address-only-5-times-a-day)

# java - 文本字段在 JOptionPane.showInputDialog 中显示两次。为什么？

> ID：15600180
> 
> 赞同：0
> 
> 时间：2013-03-24T15:17:04.850
> 
> 标签：java, swing, jframe, jtextfield, joptionpane

所以，我正在创建一个简单的对话框来获取用户输入，但文本字段显示了两次。这是一个SSCCE。

```
public static void main(String[] args) {
    JTextField fileName = new JTextField();
    Object[] message = {"File name", fileName};
    String option = JOptionPane.showInputDialog(null, message, "Add New", JOptionPane.OK_CANCEL_OPTION);
    System.out.println(fileName.getText());
} 
```

![在此处输入图像描述](../Images/6bf0026c505691176cfd68a9406f60ea.png)

这里的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:19:35.920

这样做是因为您`JTextField`也在`message[]`.

`Object[] message = {"File name", fileName};//sending filename as message`

因此，`JTextField`显示的第一个是 inputDialog 中固有的一个，另一个是您自己`JTextField`作为消息发送的。

我猜你想发送`fileName`消息的内容。在这种情况下，您的代码应该是这样的：

```
public static void main(String[] args) {
    JTextField fileName = new JTextField();
    Object[] message = {"File name", fileName.getText()};//send text of filename
    String option = JOptionPane.showInputDialog(null, message, "Add New", JOptionPane.OK_CANCEL_OPTION);
    System.out.println(fileName.getText());
} 
```

**更新**
如果您只想接受输入，则无需将对象`filename`作为消息发送。您应该简单地进行如下操作：

```
public static void main(String[] args) {
        //JTextField fileName = new JTextField();
        Object[] message = {"File name"};
        String option = JOptionPane.showInputDialog(null, message, "Add New", JOptionPane.OK_CANCEL_OPTION);
        if (option == null)
        System.out.println("Cancell is clicked..");
        else
        System.out.println(option+ " is entered by user");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:23:44.993

输入对话框默认包含文本字段，因此您无需添加另一个。试试这种方式

```
String name = JOptionPane.showInputDialog(null, "File name",
        "Add New", JOptionPane.OK_CANCEL_OPTION);
System.out.println(name); 
```

# node.js - 打开指向“localhost:4000”的链接

> ID：15600182
> 
> 赞同：0
> 
> 时间：2013-03-24T15:17:07.070
> 
> 标签：node.js, url, localhost

我在本地启动了一个简单的 node.js 服务器。它给出了一个 index.html。我想要 index.html 上的链接到 localhost:4000 以在新窗口中打开同一页面。但是只有当我点击刷新时，浏览器才能在新窗口中读取协议。如何与地址 "localhost:4000" 建立链接？

服务器：

```
//make url 
  socket.emit('url', 'click here'); 
```

索引.html：

```
socket.on('url', function (data) {
   $('#conversation').append('<a target="_blank" href="localhost:4000/">'+data +'</a>');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:26:53.727

Try specifying the protocol (`http`):

```
$('#conversation').append('<a target="_blank" href="http://localhost:4000/">'+data +'</a>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:26:52.810

Have you tried to change it to `http://localhost:4000/`? This will make sure that it uses the correct [application protocol](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol).

# php - 如何在 symfony2 的所有树枝模板中添加相同的内容

> ID：15600184
> 
> 赞同：2
> 
> 时间：2013-03-24T15:17:29.070
> 
> 标签：php, symfony, twig, symfony-2.1

我在我的网站的主模板中有一个垂直菜单，我在所有网站页面中放置了相同的内容，所有其他模板都扩展了主模板。我的问题是；我们如何在所有页面的菜单中显示相同的内容，而不在所有其他控制器中传递相同的对象来显示扩展主页面的网页，例如：

我的主 layout.html.twig 中有一个垂直菜单，其中显示 3 个对象：object1、object2 和 object3。

在我的控制器中调用渲染函数时，我是否必须始终将 object1、object2 和 object3 传递给扩展主模板的模板？

难道没有更简单优雅的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:29:05.393

I think you need to separate this menu from layout. Make an action in controller for this menu, action will manage displaying your menu and objects in this menu. Then render this action in layout template.

```
{% render "AcmeMenuBundle:Front:showMenu" %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:16:00.130

如果您的问题是关于构建菜单，那么我认为最优雅的方法是使用 KnpMenuBundle - [https://github.com/KnpLabs/KnpMenuBundle/blob/master/Resources/doc/index.md](https://github.com/KnpLabs/KnpMenuBundle/blob/master/Resources/doc/index.md)。

但是，如果您的问题是关于向所有树枝模板添加内容，那么我看到了相同的答案 - [从 Symfony2 的树枝模板中获取数据？](https://stackoverflow.com/questions/8512180/fetch-data-from-inside-a-twig-template-in-symfony2).

# java - Play 框架依赖注入

> ID：15600186
> 
> 赞同：3
> 
> 时间：2013-03-24T15:17:38.967
> 
> 标签：java, dependency-injection, playframework, guice, playframework-2.1

我一直在谷歌上寻找一些关于如何在 Play Framework 2.1 中使用 Guice/Spring DI 的有用信息

我想要做的是在一些 DAO 中注入几个服务，反之亦然。

只需要对此进行一些澄清-使用 play 2.1，您是否必须在 DI 的路由文件中使用 @ 注释？

我在这里查看了本指南 - [https://github.com/playframework/Play20/blob/master/documentation/manual/javaGuide/main/inject/JavaInjection.md](https://github.com/playframework/Play20/blob/master/documentation/manual/javaGuide/main/inject/JavaInjection.md)

并应用以下步骤在应用程序中创建一个全局类并在 Build.scala 中添加 GUICE 依赖项，但在调用注入对象时继续获取空指针异常。

有没有人能够使用 Guice 让 DI 在 Play 2.1 中工作？我在互联网上看到过一些例子，但它们似乎都在控制器中使用了 DI。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-11T04:03:34.203

我注意到您正在使用 Java。这是我如何让它工作以注入控制器。

首先，我创建了以下 4 个类：

我的控制器：

```
package controllers;

import play.mvc.*;
import javax.inject.Inject;

public class MyController extends Controller {

@Inject
private MyInterface myInterface;
    public Result someActionMethodThatUsesMyInterface(){
        return ok(myInterface.foo());
    }
} 
```

我的界面：

```
package models;

public interface MyInterface {
    String foo();
} 
```

MyImplementation2Inject：

```
package models;

public class MyImplementation2Inject implements MyInterface {
    public String foo() { 
        return "Hi mom!";
    }
} 
```

我的组件模块：

```
package modules;

import com.google.inject.AbstractModule;
import models.MyInterface;
import models.MyImplementation2Inject;

public class ComponentModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(MyInterface.class).
                to(MyImplementation2Inject.class);
    }
} 
```

现在，我花了很长时间才弄清楚的最后一部分是注册模块。您可以通过将以下行添加到`application.conf`位于`conf`目录中的文件末尾来执行此操作：

```
play.modules.enabled += "modules.MyComponentModule" 
```

我希望这对你有帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:37:04.647

我使用蛋糕模式和我自己的全局覆盖版本`getControllerInstance`

[https://github.com/benjaminparker/play-inject](https://github.com/benjaminparker/play-inject)

干杯

本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-15T08:50:26.747

对不起，这是一个迟到的回应，但这是我们的例子

[https://github.com/typesafehub/play-guice](https://github.com/typesafehub/play-guice)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T13:45:25.597

您是否尝试过使用与 Guice 不同的 DI 方法？我们还尝试使用 Guice 或 Spring 实现一个项目，但最终将我们的依赖项注册到实现 trait 的对象中，例如：

```
trait Registry {
   def userDao: UserDao
...

}

object Registry {
  var current: Registry = _
}

object Environnment {
 object Dev extends Registry {
  val userDao = ...
//implement your environment for develpment here
}
 object Test extends Registry {
  val userDao = ...
//implement your ennviroment for tests here e.g. with mock objects
}
} 
```

另一个可能适合您的好方法是蛋糕图案（只需 google 即可）。

# asp.net - 如果从 3 个下拉菜单中选择了一个，则使下拉菜单停用

> ID：15600194
> 
> 赞同：0
> 
> 时间：2013-03-24T15:18:23.207
> 
> 标签：asp.net, sharepoint-2010

我有 3 个下拉列表，如果一个人从第一个下拉列表中选择其他两个应该被禁用。如何使用 c# 在 asp.net 中制作它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:27:58.060

You could use the ajax control toolkit and use the [cascading dropdown control](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:51:47.710

单击 Visual Studio 属性中的小闪电，然后双击 selectedindexchanged 以使事件显示在代码中。还要在属性中启用自动回发。在 selectedindexchanged 事件中，查找 selecteditem 值并将控件设置为 enabled = false。您可能希望从已禁用的第二个开始并在 selectedindexchanged 上启用它们。另外，在其他值之前在 ddl 中添加一个值，这样您就可以确保他们实际上从 ddl 中选择了一个值而不是标题。（如果不是 ddl1.selectedindex = 0 那么 ddl2.enabled = true）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:24:45.117

您可以在 DropDownList 的 SelectedIndexChanged 事件中执行此操作。并启用 AutoPostBack

# python - Python将long int作为二进制值写入文件

> ID：15600196
> 
> 赞同：1
> 
> 时间：2013-03-24T15:18:26.993
> 
> 标签：python, file-io, type-conversion, primes, binary-data

我一直在尝试使用 long int (m39 prime) 并将其存储为二进制文件。当我尝试将 bin 值写入文件时，它被写入为字符串。

```
>>> m39 = bin(2**13466917-1)
>>> open('m39', 'wb').write(m39) 
madsc13ntist@jaberwock:~/Desktop$ xxd m39 | head
0000000: 3062 3131 3131 3131 3131 3131 3131 3131  0b11111111111111
0000010: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111
0000020: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111
0000030: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111
0000040: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111
0000050: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111
0000060: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111
0000070: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111
0000080: 3131 3131 3131 3131 3131 3131 3131 3131  1111111111111111 
```

我很确定对此有一个非常简单的答案，但我还没有成功地将 m39 转换为字节数组或用于写入的缓冲区。我应该使用io还是memoryview等？

非常感谢任何人都可以提供的任何帮助。:)

我正在使用 Python 2.7.3，如果可能的话，我更喜欢使用内置模块。

编辑：我正在尝试将值存储为二进制文件，这将在磁盘/内存上占用更少的空间。我知道 bin 类型是 python 中的字符串，但我正在尝试编写`\x11\x11\x11\x11 not \x31\x31\x31\x31`. 我的意图不是打印值的字符串表示，而是有效地存储它以供以后使用/操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:26:38.223

您应该根据数据的结构使用[struct](http://docs.python.org/2/library/struct.html)模块或[数组](http://docs.python.org/2/library/array.html)（即，对于同质值的数组，数组会更简单/更快）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:10:13.407

Python`pickle`模块非常高效。该表示仅比可以存储的原始二进制值长 8 个字节。这适用于 Python 2.X 或 3.X：

```
import pickle
m39 = 2**13466917-1
with open('m39.dat','wb') as f:
    pickle.dump(m39,f,pickle.HIGHEST_PROTOCOL) 
```

生成的十六进制转储（1,683,373 字节）：

```
 80 03 8B A5 AF 19 00 FF FF FF ... FF FF FF 1F 2E 
```

回读：

```
import pickle
with open('m39.dat','rb') as f:
   m39 = pickle.load(f) 
```

Python 3 也有关于整数的`to_bytes`和`from_bytes`方法，但需要更多的工作，因为必须计算整数的字节长度。

```
import math
m39 = 2**13466917-1
s = m39.to_bytes(math.ceil(m39.bit_length()/8),'little')
with open('m39.dat','wb') as f:
    f.write(s) 
```

生成的十六进制转储（1,683,365 字节）：

```
 FF FF FF FF FF FF FF FF FF FF ... FF FF FF FF 1F 
```

回读：

```
with open('m39.dat','rb') as f:
    data = f.read()
m39 = int.from_bytes(data,'little') 
```

显然那里有一个模式，只存储素数的指数会更有效。

# c++ - 如何使用模板模板参数为没有通用接口的 STL 容器实现通用方法

> ID：15600198
> 
> 赞同：3
> 
> 时间：2013-03-24T15:18:29.663
> 
> 标签：c++, templates, stl, c++11

**问题陈述**（出于**教育**目的）：
- 实现方法 printContainer，它适用于 STL容器`vector`、`stack`和. `queue``deque`

我做了一个解决方案，但由于代码量过多，我不喜欢它。
**我为解决该问题所做的工作：**
*1\. 设计了通用函数，该函数期望来自容器的统一接口进行操作：获取最后一个元素的值并从容器中删除该元素*

```
template <typename T>
void printContainer(T container)
{
    cout << " * * * * * * * * * * " << endl;
    cout << " operator printContainer(T container). Stack, queue, priority queue" 
         << endl;
    cout << typeid(container).name() << endl;

    while (!container.empty())
    {
            cout << top(container) << "    ";
            pop(container);
    }
    cout << endl;
    cout << " * * * * * * * * * * * " << endl;
} 
```

*对于每个容器，我实现了允许提供统一接口的功能* **（我想重构以下代码片段）：**

```
template <typename T>
typename vector<T>::value_type top(const vector<T>& v)
{
    return v.back();
}
template <typename T, typename Base>
typename stack<T, Base>::value_type top(const stack<T, Base>& s)
{
    return s.top();
}

template <typename T, typename Base>
typename queue<T, Base>::value_type top(const queue<T, Base>& q)
{
    return q.front();
}

template <typename T, typename Base>
typename priority_queue<T, Base>::value_type top(const priority_queue<T, 
                                                              Base>& pq)
{
    return pq.top();
}

template <typename T>
void pop(vector<T>& v)
{
    return v.pop_back();
}

template <typename T, typename Base>
void pop(stack<T, Base>& s)
{
    return s.pop();
}

template <typename T, typename Base>
void pop(queue<T, Base>& q)
{
    return q.pop();
}

template <typename T, typename Base>
void pop(priority_queue<T,Base>& pq)
{
    return pq.pop();
} 
```

**我不想用这样的东西代替它：**

```
template <typename T, typename Base, template<typename T, class Base, 
class ALL = std::allocator<T>> class container>
typename container<T,Base>::value_type top(container<T,Base>& c)
{
    if (typeid(container).name == typeid(vector<T,Base>))
        return c.back();
    if (typeid(container).name == typeid(queue<T,Base>))
        return c.front();
    else
        return c.top();
}

template <typename T, typename Base, template<typename T, class Base, 
class ALL = std::allocator<T>> class container>
typename container<T,Base>::value_type pop(container<T,Base>& c)
{
    if (typeid(container).name == typeid(vector<T,Base>))
        c.pop_back();
    else
        return c.pop();
} 
```

但它不起作用，我收到如下错误：

```
Error   1   error C2784: 'container<T,Base>::value_type top(container<T,Base> &)' : could not deduce template argument for 'container<T,Base> &' from 'std::stack<_Ty>' 
```

**问题：**
我应该在模板模板参数中进行邻接以排除错误，也许有一些我忽略或存在逻辑错误。
无论如何，欢迎任何有用的信息。
**提前致谢！**

**更新：**

// 这就是我试图调用函数的方式

```
int arr[] = {1,2,3,4,5,6,7,8,9,0};
    stack<int> s(deque<int>(arr, arr + sizeof(arr) / sizeof(arr[0])));;
    queue<int> q(deque<int>(arr, arr + sizeof(arr) / sizeof(arr[0])));
    priority_queue<int> pq(arr, arr + sizeof(arr) / sizeof(arr[0]));
    printContainer(s);
    printContainer(q);
    printContainer(pq); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:29:54.180

这个解决方案：

```
template <typename T, typename Base, template<typename T, class Base, 
class ALL = std::allocator<T>> class container>
typename container<T,Base>::value_type top(container<T,Base>& c)
{
    if (typeid(container).name == typeid(vector<T,Base>))
        return c.back();
    if (typeid(container).name == typeid(queue<T,Base>))
        return c.front();
    else
        return c.top();
} 
```

不起作用，因为`if()`实现了*运行时*选择，这意味着所有分支的代码都必须编译，即使只有其中一个评估为`true`，并且`top()`并非所有容器都提供函数（例如`vector`）。

考虑这个更简单的例子来解释：

```
struct X { void foo() { } };
struct Y { void bar() { } };

template<bool b, typename T>
void f(T t)
{
    if (b)
    {
        t.foo();
    }
    else
    {
        t.bar();
    }
}

int main()
{
    X x;
    f<true>(x); // ERROR! bar() is not a member function of X 

    Y y;
    f<false>(y); // ERROR! foo() is not a member function of Y
} 
```

在这里，我将一个在编译时已知的布尔模板参数传递给 function `f()`。`true`如果输入是类型，我将通过`X`，因此支持一个名为`foo()`;的成员函数。`false`如果输入的类型是 ，我将通过`Y`，因此支持名为 的成员函数`bar()`。

即使选择适用于编译时已知的布尔值，语句本身也会在运行时执行。编译器首先必须编译整个函数，包括语句的`false`分支。`if`

您正在寻找的是某种[`static if`结构](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer)，不幸的是，它在 C++ 中不可用。

这里的传统解决方案是基于重载的，实际上看起来就像您最初提供的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T20:00:49.967

我会反其道而行之。我会编写一个使用迭代器的通用函数：

```
template <class Iter>
void show_contents(Iter first, Iter last) {
    // whatever
} 
```

然后是一个接受容器的通用函数：

```
template <class Container>
void show_container(const Container& c) {
    show_contents(c.begin(), c.end());
} 
```

然后破解 a`queue`或 a的容器`stack`：

```
template <class C>
struct hack : public C {
    hack(const C& cc) : C(cc) { }
    typename C::Container::const_iterator begin() const {
        return this->c.begin();
    }

    typename C::Container::const_iterator end() const {
        return this->c.end();
    }
}; 
```

然后定义特化来创建这些对象并显示它们的内容：

```
template <class T>
void show_container(const stack<T>& s) {
    hack<stack<T>> hack(s);
    show_contents(hack.begin(), hack.end());
}

template <class T>
void show_container(const queue<T>& q) {
    hack<stack<T>> hack(q);
    show_contents(hack.begin(), hack.end());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T22:41:59.907

虽然安迪的回答已经是一个很好的答案，但我想对您的实施添加一项改进。您可以对其进行改进以支持更多容器专业化，因为您的重载不允许 STL 容器必须为非默认的所有模板参数。例如，查看您的代码：

```
template <typename T>
typename vector<T>::value_type top(const vector<T>& v)
{
    return v.back();
} 
```

现在将其与 的定义进行比较[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)。类模板有*两个*参数，即`std::vector<T,Allocator=std::allocator<T>>`. 您重载仅接受`std::vector`第二个参数为 s 的那些 s `std::allocator<T>`。

虽然您可以手动向代码中添加更多参数，但还有一个更好的选择：可变参数模板。您可以将以下代码用于所有`std::vector`s 的真正通用版本：

```
template <typename... Ts>
typename vector<Ts...>::value_type top(const vector<Ts...>& v)
{
    return v.back();
} 
```

当然，您可以对所有其他容器使用相同的技术，而不必担心它们具有的模板参数的确切数量。有些容器甚至有多达[五个模板参数](http://en.cppreference.com/w/cpp/container/unordered_map)，所以如果你不使用可变参数模板，这可能会很烦人。

一个警告：一些较旧的编译器可能不喜欢可变参数版本，您必须手动迭代所有参数。

# java - Android 小部件 - 两行？

> ID：15600200
> 
> 赞同：0
> 
> 时间：2013-03-24T15:18:41.340
> 
> 标签：java, android, widget, android-2.2-froyo

我正在尝试制作一个简单的小部件，我需要将它分成两行。显然我不能为此使用桌子，所以我有点不知道该怎么做。

这是我的代码

```
 <FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="65dp"
    android:layout_gravity="top" >

</FrameLayout>

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="65dp"
    android:layout_gravity="bottom"
    android:layout_weight="1" >

</FrameLayout> 
```

这就是我想要做的

[http://i.imgur.com/v6Shukd.jpg](http://i.imgur.com/v6Shukd.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:38:55.357

我建议使用 a`Relativelayout`来实现这一点，因为从您的图像中我可以看到您想在其他布局上叠加一些东西，在这种情况下，您需要 a `FrameLayout`or`RelativeLayout`并且`LinearLayout`不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:22:21.077

为什么不使用一个`LinearLayout`？

```
<LinearLayout
android:orientation="vertical"
[...]
>

<LinearLayout
android:id="@+id/myFirstRow"
[...]
>
<myUiElements />
</LinearLayout>

<LinearLayout
android:id="@+id/mySecondRow"
[...]
>
<myUiElements />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:42:42.083

您是否正在使用您`<FrameLayout>`的容器来动态添加片段或其他内容？

**如果是**，则使用 a`<RelativeLayout>`将两者包裹起来`<FrameLayout>`并使用`android:layout_below=""`将一个对齐到另一个下方。

**否则**，只需使用[Ahmad 的](https://stackoverflow.com/users/1333975/ahmad)示例。

# design-patterns - “现实生活”中的战略模式

> ID：15600202
> 
> 赞同：1
> 
> 时间：2013-03-24T15:18:43.613
> 
> 标签：design-patterns, strategy-pattern

我正在尝试将战略模式的维基百科示例转换为现实生活中的问题，但我不确定我的场景是否需要这种模式。

假设我们有一个从多个客户端获取更新的服务，并且需要进行一些处理并将这些更新向前移动，这取决于它们的大小。我希望使服务尽可能简单，并对未来的更新格式（来自其他客户端）开放。

我想我可以让更新自己决定如何通过使用这种模式来处理和推进，并让服务尽可能简单。像这样的东西：

```
public class Service {
    void processUpdate(Update myUpdate) {

        myUpdate.process();
        myUpdate.moveForward();
    }
} 
```

我错了吗 ？我如何（在哪里......）为每个更新分配策略？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T19:58:16.283

对设计模式做得不好的最简单的方法是学习一个模式，然后去寻找放置它的地方。我在第一次学习的时候这样做了几次，结果非常令人沮丧。

策略模式是针对特定形式问题的解决方案。那个问题是“我需要做的事情基本相同，但中间有一些变化”。所以现在，记住如何做一个策略模式，当你看到一个暗示它的问题时，使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T15:40:34.780

*   什么是策略？战略是旨在实现特定目标的行动计划；
*   “定义一系列算法，封装每个算法，并使它们可互换。策略让算法独立于使用它的客户而变化。” （四人组）；
*   指定一组类，每个类代表一个潜在的行为。在这些类之间切换会改变应用程序的行为。（战略）；
*   可以在运行时（使用多态性）或设计时选择此行为；
*   捕获接口中的抽象，将实现细节隐藏在派生类中；

![在此处输入图像描述](../Images/6d10699bb184ce95e56f70209aa8f177.png)

*   策略的替代方法是通过使用条件逻辑来更改应用程序行为。（坏的）;
*   使用此模式可以更轻松地添加或删除特定行为，而无需重新编码和重新测试应用程序的全部或部分；

*   良好的用途：

    *   当我们有一组相似的算法并且它需要在应用程序的不同部分在它们之间进行切换时。使用策略模式可以避免ifs并简化维护；
    *   当我们想向超类添加不一定对每个子类都有意义的新方法时。我们不是以传统方式使用接口，而是添加新方法，而是使用作为新功能接口的子类的实例变量。这被称为组合：类不是通过继承来继承能力，而是由具有正确能力的对象组成；

# java - actionPerformed 方法中的线程休眠

> ID：15600203
> 
> 赞同：3
> 
> 时间：2013-03-24T15:18:45.520
> 
> 标签：java, swing, event-dispatch-thread, thread-sleep

首先，我想说我知道这种方法是错误的，所以我问这个问题纯粹是出于好奇。假设我有一个像这样的摇摆应用程序：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ThreadSleeping {
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    JButton button = new JButton("Load");
    JLabel label = new JLabel();

    public ThreadSleeping() {
        panel.add(button);

        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                label.setIcon(new ImageIcon(
                        "C:/Users/Public/Pictures/Sample Pictures/Tulips.jpg"));
                System.out.println("Tulips painted");
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                label.setIcon(new ImageIcon(
                        "C:/Users/Public/Pictures/Sample Pictures/Koala.jpg"));
                System.out.println("Koala painted");

            }
        });

        frame.add(panel, BorderLayout.NORTH);
        frame.add(label, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setSize(1024, 768);
        // frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ThreadSleeping();
            }
        });
    }
} 
```

基本上，当我单击一个`Load`按钮时，我希望该`Tulips.jpg`图像显示，然后 GUI 冻结 2 秒，然后我希望该`Koala.jpg`图像显示。但是会发生什么：我单击按钮，GUI 冻结 2 秒并`Koala.jpg`显示。`Tulips.jpg`在此之前没有。但让我感到困惑的是，当我把那些`System.out.println("Tulips painted");`和`System.out.println("Koala painted");`. 所以当我点击按钮时，它会打印“郁金香画”，2秒后“考拉画”。有人可以告诉我这里发生了什么吗？问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:24:39.093

1.  在这种情况下有效，[因为您以编程方式冻结了 ouf Swing GUI，但是没有另一个更新，没有](https://stackoverflow.com/a/7442529/714968) 另一个 JComponent

2.  如果有一些其他更新到 Swing GUI，Thread.sleep(int) freeze Event Dispatch Thread，则不起作用，

3.  `JComponents XxxModels`默认情况下，对never的所有更新都将在`JComponents view`

4.  [例如，直到睡眠结束，您将丢失所有更新到 GUI](https://stackoverflow.com/questions/7943584/update-jlabel-every-x-seconds-from-arraylistlist-java/7944388#7944388)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:16:08.297

我打算在评论中提出的观点：

> 如果你睡了 edt，那么由此产生的错误行为基本上是不可预测的。

*从某种意义上说，您*无法**预测*会发生什么。我们能做的，就是猜测...*

 *技术原因是大多数 ui 更新不会立即发生，而是按计划进行的：我们无法真正知道在我们身后等待的是什么。请记住：它只有一条车道，当在 actionPerformed 中时，是我们坐在其中。

出于教育原因，下面的代码是原始代码，需要取消/注释几行以演示不同的场景。

*   [0] 在睡眠之前/之后重置图标：正如您已经注意到的那样，即使获取了*属性*，第一个也不会显示。技术原因：视觉更新发生`label.repaint()`在 EDT 上安排的后续处理（如其 api 文档所述）
*   [1] 浏览 api 文档，我们注意到另一种方法：`paintImmediately(...)`它被记录为完全按照它的名字所说的做，并且允许 - 正如我们在 EDT 上一样 - 被允许被调用。看起来成功了，黄色图标出现了。
*   [2] 但请稍等：标签位于边界线的中心，无论如何都会填充该区域，与它是否具有图标无关。让我们试着把它放到一个需要重新布局的区域中，就像 fi 到南方一样。返回方块 [0]，黄色图标未显示。
*   [3] 调查来源`setIcon(..)`显示布局是......再次安排。我们在方格 [1] 中了解到，如果布局是一对`invalidate()`/ ，我们可以强制事情立即发生`validate()`。宾果游戏，即使在南方也是黄色图标。
*   [4] 安排图标属性设置的讨厌的子类（注意：虽然这里是人为的，但它的契约中没有任何东西阻碍子类这样做！）。由于属性甚至没有设置，黄色没有显示，回到正方形 [0]

在一天结束时（但在 EDT 睡觉之前:-)，根本没有办法*可靠地预测睡眠**期间*的视觉结果。视觉效果只是冰的一角......

```
/**
 * Unpredictable behaviour when sleeping the EDT.
 * http://stackoverflow.com/q/15600203/203657
 * 
 * [0] run as-is: property set but yellow not showing
 * [1] uncomment paintImmediately: yellow showing in center
 * [2] add label to south: yellow not showing
 * [3] force immediate in-/validation: yellow showing in south
 * [4] subclass label with invoked property setting: 
 *       property not set, yellow not showing
 * 
 */
public class ThreadSleeping {
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    JButton button = new JButton("Load");
    JLabel label = new JLabel() {
// [4] subclass implemented to schedule the property setting         
//        @Override
//        public void setIcon(final Icon icon) {
//            SwingUtilities.invokeLater(new Runnable() {
//                public void run() {
//                    superSetIcon(icon);
//                    
//                }
//            });
//        }
//        
//        protected void superSetIcon(Icon icon) {
//            super.setIcon(icon);
//        }
//        
    };

    public ThreadSleeping() {
        panel.add(button);

        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                Icon firstIcon = new FixedIcon(Color.YELLOW, 100, 100);
                Icon secondIcon = new FixedIcon(Color.RED, 500, 500);
                label.setIcon(firstIcon);
                // check if the property is already set
                System.out.println(label.getIcon());
                // following lines try to force the output before going to sleep
                // [3] paintImmediately + force immediate re-layout 
                //  label.invalidate();
                //  label.getParent().validate();
                // {1] paintImmediately (fine for center, no effect for south)
                // ((JComponent) label.getParent()).paintImmediately(0, 0, 5000, 5000);
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                label.setIcon(secondIcon);

            }
        });

        frame.add(panel, BorderLayout.NORTH);
        // un/comment one of the following, placing the
        // label either in CENTER (= sized to fill)
        frame.add(label, BorderLayout.CENTER);
        // [2] or in SOUTH (= sized to pref)
        // frame.add(label, BorderLayout.SOUTH);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setSize(1024, 768);
        frame.setVisible(true);
    }

    /**
     * Simple fixed size Icon filling its area.
     */
    public static class FixedIcon implements Icon {

        private Color background;
        private int width;
        private int height;

        public FixedIcon(Color background, int width, int height) {
            this.background = background;
            this.width = width;
            this.height = height;
        }
        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            g.setColor(background);
            g.fillRect(0, 0, width, height);
        }

        @Override
        public int getIconWidth() {
            return width;
        }

        @Override
        public int getIconHeight() {
            return height;
        }
        @Override
        public String toString() {
            return "[" + background + " w/h " + width + "/" + height + "]";
        }

    }
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ThreadSleeping();
            }
        });
    }
} 
```*

# php - phpmyadmin 运行存储过程

> ID：15600207
> 
> 赞同：0
> 
> 时间：2013-03-24T15:19:02.050
> 
> 标签：php, sql, procedure

嘿，我正在 phpMyAdmin 中编写一个存储过程。我创建了一个来搜索数据库：

```
SELECT * FROM cars WHERE name LIKE CONCAT ('%', search ,'%'); 
```

这里的问题是：当我运行它时，它只返回 1 行，但是当我输入搜索字符串时它应该至少返回 3。我也用点（'%'.search.'%'）尝试了这部分`('%', search ,'%');`，但这给了我一个 SQL 语法错误。这里有什么问题？我在 phpMyAdmin 中运行此过程。

# c# - 如何使用 (i) 选择类或变量的实例

> ID：15600210
> 
> 赞同：0
> 
> 时间：2013-03-24T15:19:10.347
> 
> 标签：c#

我正在制作一个二十一点游戏，我正在实现多个玩家的使用。我似乎无法弄清楚如何正确命名我的 playerCards 类实例以及每个玩家所需的各种变量，以便在 for 循环迭代期间正确选择它们。

```
 Hand playerCards1 = new Hand(cards);
    Hand playerCards2 = new Hand(cards);
    Hand playerCards3 = new Hand(cards);
    Hand playerCards4 = new Hand(cards); 
```

我曾尝试使用 playerCards[i] 和 playerCards(i)，但它说它们在这种情况下不存在。

如何标记我的 playerCards 和变量，以便 (i) 被识别为 1-4？

这是我的代码。

```
using System;
using System.Collections.Generic;
using System.Text;

namespace BlackJackGameX
{
    public class MainClass
    {
        public static void Main (string[] args)
        {
            // Creates a new instance of the Deck Class, giving us access to a shuffled deck of cards.
            Deck cards = new Deck();

            // Create 5 new instances of the Hand Class, one for each player, one for the dealer. Will use List to store cards from the Deck,
            //and use Print function to displayer those cards.
            Hand playerCards0 = new Hand(cards);
            Hand playerCards1 = new Hand(cards);
            Hand playerCards2 = new Hand(cards);
            Hand playerCards3 = new Hand(cards);

            Hand dealerCards = new Hand(cards);

            // Creates the player's bank, defaults to 1000.
            int iBank0 = 1000;
            int iBank1 = 1000;
            int iBank2 = 1000;
            int iBank3 = 1000;

            // Stores the player's bet amount.
            int iBet0 = 0;
            int iBet1 = 0;
            int iBet2 = 0;
            int iBet3 = 0;

            int iNumOfPlayers = 0;

            // Creates a bool that will be used to stay in or out of the Hit or Stick loop.
            bool bStick = false;

            // Creates a string to store the user's input.
            string sUserInput;

            // Writes a line to the console welcoming the player.
            Console.WriteLine("Welcome to Black Jack\n\nPress Enter To Start!");

            //Causes a pause in the console untill Enter is hit.
            Console.ReadLine ();

            Console.WriteLine ("Select between 1-4 players?");
            sUserInput = Console.ReadLine();
            iNumOfPlayers = int.Parse (sUserInput);

            // This while loop willly repeated loop the entire BlackJack game untill the player exits.
            while (true) 
            {
                for (int i = 0; i <iNumOfPlayers; i++)
                {
                    bStick = false;

                    // Uses a function from the Deck Class to count how many cards are left in the Deck called "cards".
                    cards.DeckTotal ();

                    // Checks to see if there is less than 21 cards left in the Deck "cards". If there is a new Deck is created.
                    if (cards.iDeckTotal < 21) 
                    {
                        cards = new Deck ();
                        Console.WriteLine ("New Deck!\n");
                        Console.ReadLine ();
                    }

                    // Emptys both the player's and the dealer's Hand Lists of Cards.
                    playerCards[i].PlayerHand.Clear ();
                    dealerCards.DealerHand.Clear ();

                    //Clears the console screen of information, displays the user's current amount in the bank
                    Console.Clear ();
                    Console.WriteLine ("New Round!");
                    Console.WriteLine ("\nYou have " + iBank[i] + " in the Bank.");
                    Console.WriteLine ("\nPlace your Bet, Or Enter Exit to Quit.\n");
                    sUserInput = Console.ReadLine ();

                    if (sUserInput == "Exit" && iNumOfPlayers == 1) 
                    {
                        Environment.Exit (0);
                    }

                    if (sUserInput == "Exit")
                    {
                        iNumOfPlayers = iNumOfPlayers - 1;
                        i--;
                        continue;
                    }

                    iBet[i] = int.Parse (sUserInput);
                    iBank[i] = (iBank[i] - iBet[i]);

                    Console.Clear ();

                    cards.PlayerHit (playerCards[i]);
                    cards.PlayerHit (playerCards[i]);

                    playerCards[i].PlayerTotal ();

                    playerCards[i].PrintPlayerHand ();

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:27:27.093

You can make an array of Hand objects:

```
Hand[] playerCards = new Hand[4]; // or however many players you have.
for (int i = 0; i < playerCards.length; i++) {
   playerCards[i] = new Hand(cards);
   // all of your initialization, bank, bet amount, etc.
} 
```

Then you can reference each player within your for loop as playerCards[i]. You probably want to ask for the number of players at the beginning, and then use that to set the size of the playerCards array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:26:35.677

考虑创建一个具有 Hand、Bank、Bet 等属性的 Player 类，然后使用任何数据结构（Array？）来存储 Players。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T15:26:38.990

我猜你应该为玩家手牌使用数组变量：

```
Hand[] playerCards = new Hand[4];

for ( int i = 0; i < 4 ; i++ )
 playerCards[i] = new Hand(cards); 
```

# c++ - 用 C++ 实现复杂的数据结构

> ID：15600218
> 
> 赞同：3
> 
> 时间：2013-03-24T15:19:32.437
> 
> 标签：c++

当您必须在 C++ 中实现复杂的数据结构时，您采用什么解决方案？我的意思是不同类型的对象应该被其他对象引用，同时引用其他对象。它与可用的标准库容器确实不同。

您是否尝试使您的代码非常 C++ 并使用通用编程（容器样式模板）？恕我直言，它似乎难以实现且不方便，并且可能使代码更难理解或使用。此外，您是否实现了任何类型的迭代器？

或者，另一方面，您最终会得到“C 风格的代码”？我的意思是，在每个类中，您都实现了一些指针作为引用其他对象的成员变量，以构建合适的数据结构。

根据您的经验，这两种方法的优缺点是什么？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:30:55.097

在 C++ 中编写复杂的数据结构时，我遵循了一些准则：

1.  避免原始指针；使用智能指针。
2.  尽早弄清楚你的数据结构是循环的还是非循环的。如果您的数据结构中有循环，您将无法在任何地方使用 share_ptr 而不会造成泄漏。在您的循环结构中的某个时刻，您想用一个weak_ptr 打破循环，以便可以释放对象。
3.  如果我的对象持有其他对象，并且我希望它成为一个容器，我会在*需要时实现适当的迭代器，而不是前一秒*。当我想在我的容器上使用其中一种 STL 算法时，我通常需要迭代器支持。当然，我可以实现与 STL（在命名或语义方面）不匹配的迭代器供我自己使用，但随后我在我的代码中添加了另一种方法来做事。我尽量避免这种情况。
4.  如果我的班级打算容纳不同的类型，那么我会使用模板来表达这一点。在 C 中有很多方法可以做到这一点（使用 memcpy 等），但是虽然您最终得到的代码对于 C 编码人员来说更容易理解，但您将失去 C++ 的大部分好处（类型安全、赋值运算符等） ）。

# svg - Raphael - 旋转整个集合而不是每个对象

> ID：15600219
> 
> 赞同：2
> 
> 时间：2013-03-24T15:19:32.700
> 
> 标签：svg, rotation, raphael

大家好，我正在尝试使用 Element.animate() 使用 Set 一次旋转几个对象，但它会旋转每个元素而不是整个集合，我需要整个集合

请帮帮我，我对 raphael 很陌生，只有几个小时的阅读文档和尝试功能

```
 var archtype = Raphael("canvas", 600, 600);

            archtype.customAttributes.arc = function (xloc, yloc, value, total, R) {
                var alpha = 360 / total * value,
                a = (90 - alpha) * Math.PI / 180,
                x = xloc + R * Math.cos(a),
                y = yloc - R * Math.sin(a),
                path;
                if (total == value) {
                    path = [["M", xloc, yloc - R],["A", R, R, 0, 1, 1, xloc - 0.01, yloc - R]];
                } else {
                    path = [["M", xloc, yloc - R],["A", R, R, 0, +(alpha > 180), 1, x, y]];
                }
                return {
                    path: path
                };
            };

            var circleSet=archtype.set();

            var arc_red0 = archtype.path().attr({
               "stroke": "#f00",
               "stroke-width": 30,
               arc: [300, 300, 30, 360, 250]
            });
            circleSet.push(arc_red0);

            var arc_red1 = archtype.path().attr({
               "stroke": "#f00",
               "stroke-width": 30,
               arc: [300, 300, 20, 360, 250],
               "transform": "r50,300,300"
            });
            circleSet.push(arc_red1);

            var arc_red2 = archtype.path().attr({
               "stroke": "#f00",
               "stroke-width": 30,
               arc: [300, 300, 80, 360, 250],
               "transform": "r90,300,300"
            });
            circleSet.push(arc_red2);

            var arc_red3 = archtype.path().attr({
               "stroke": "#f00",
               "stroke-width": 30,
               arc: [300, 300, 60, 360, 250],
               "transform": "r190,300,300"
            });
            circleSet.push(arc_red3);

            var arc_red4 = archtype.path().attr({
               "stroke": "#f00",
               "stroke-width": 30,
               arc: [300, 300, 70, 360, 250],
               "transform": "r270,300,300"
            });
            circleSet.push(arc_red4);

            var $angle=0;

            (function (){
                circleSet.animate({transform:"r"+$angle+",300,300"},200);
                $angle++;

                init = false;
                setTimeout(arguments.callee, 60);
            })(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:07:27.253

选项 1：使用 Raphael 的`sets`功能 -- 将所有元素添加到集合中，然后告诉 Raphael 旋转集合。有关更多信息，请参阅[http://raphaeljs.com/reference.html#Paper.set](http://raphaeljs.com/reference.html#Paper.set)。

这实际上不会旋转整个 Raphael 元素，但如果图像的所有元素都是集合的一部分，它看起来就像是在这样做。

选项 2：使用标准 CSS 来旋转元素或其 HTML 容器。这实际上可能是最简单的选择，但它的缺点是它无法在旧浏览器（尤其是旧版本的 IE）中运行。对此有一些变通方法（例如[CSS Sandpaper](http://www.useragentman.com/blog/2010/03/09/cross-browser-css-transforms-even-in-ie/#more-896)），但如果您已经在使用 Raphael 来帮助 IE 兼容性，您可能也不想使用其他脚本。

# php - Mysql 使用 NOT IN 给出空结果。也许是因为 NULL 值？

> ID：15600222
> 
> 赞同：0
> 
> 时间：2013-03-24T15:19:36.337
> 
> 标签：php, mysql, null, phpmyadmin, notin

您好我有以下查询：

```
SELECT *
FROM `workshopmails`
WHERE `workshopmails_mail` NOT
IN (

SELECT workshopklanten_email
FROM `workshopklanten`
)
GROUP BY workshopmails_mail
ORDER BY `workshopmails`.`workshopmails_datum` DESC 
```

但是，尽管我知道这应该会产生很多结果，但它会传达以下信息：

```
MySQL returned an empty result set (0 rows). 
```

我用较旧的数据库进行了尝试，现在使用较新的数据得到了 100 多个结果，它不再起作用我唯一能想到的是因为其中有一些 NULL 值，而旧数据库中没有

有谁知道一个解决方案，所以我可以提取电子邮件？

谢谢马蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:29:28.907

感谢马丁·史密斯

```
NOT IN (SELECT workshopklanten_email FROM workshopklanten WHERE workshopklanten_email IS NOT NULL) 
```

将是一种方式。

[SQL NOT IN 不工作](https://stackoverflow.com/questions/5231712/sql-not-in-not-working/5231731#5231731)

# java - GUI - 运行时出现 Java 错误

> ID：15600224
> 
> 赞同：-5
> 
> 时间：2013-03-24T15:19:39.390
> 
> 标签：java, swing, user-interface, nullpointerexception, variable-initialization

我正在创建通讯簿，所有代码都已完成，但我不断收到错误消息！这是错误：

```
Exception in thread "main" java.lang.NullPointerException
at java.awt.Container.addImpl(Unknown Source)
at java.awt.Container.add(Unknown Source)
at javax.swing.JFrame.addImpl(Unknown Source)
at java.awt.Container.add(Unknown Source)
at MyAddressBook.<init>(MyAddressBook.java:40)
at MyAddressBook.main(MyAddressBook.java:31) 
```

当我运行地址簿时，出现错误并且有一个空框架，框架没有读取内容，请运行代码，你会看到我在说什么。请建议我如何解决这个问题？

我的代码：

```
import javax.swing.*; import javax.swing.event.DocumentEvent; import javax.swing.event.DocumentListener; import javax.swing.event.ListSelectionEvent; import java.awt.event.*;  import java.awt.*; import java.io.*; public class AddressBook {

private JLabel lblFirstname,lblSurname, lblMiddlename,  lblPhone,
lblEmail,lblAddressOne, lblAddressTwo, lblCity, lblPostCode, lblPicture;
private JTextField txtFirstName, txtSurname, txtAddressOne, txtPhone,
txtMiddlename, txtAddressTwo, txtEmail, txtCity, txtPostCode;
private JButton btSave, btExit, btDelete;
private JList<String> list;
private DefaultListModel<String> listModel;
private JPanel panel;
PrintWriter out;

public static void main(String[] args) throws Exception{
    new AddressBook();
}

public AddressBook() throws Exception{
    JFrame frame = new JFrame("My Address Book");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(900,400);
    frame.setVisible(true);
    out = new PrintWriter (new BufferedWriter (new FileWriter("outfile.txt",true)));
    frame.add(panel); 
    frame.setVisible(true);
}
public void MyPanel() {
    panel = new JPanel();
    panel.setLayout(null);
    panel.setBackground(Color.cyan);

}
public void Fields () {
    lblFirstname = new JLabel("First name");
    lblFirstname.setBounds(135, 50, 150, 20);
    Font styleOne = new Font("Arial", Font.BOLD, 13);
    lblFirstname.setFont(styleOne);
    panel.add(lblFirstname);
    txtFirstName = new JTextField();
    txtFirstName.setBounds(210, 50, 150, 20);
    panel.add(txtFirstName);

    lblSurname = new JLabel ("Surname");
    lblSurname.setBounds(385,50,150,20);
    Font styleTwo = new Font ("Arial",Font.BOLD,13);
    lblSurname.setFont(styleTwo);
    panel.add(lblSurname);
    txtSurname = new JTextField();
    txtSurname.setBounds(450,50,150,20);
    panel.add(txtSurname);

    lblMiddlename = new JLabel ("Middle Name");
    lblMiddlename.setBounds(620,50,150,20);
    Font styleThree = new Font ("Arial", Font.BOLD,13);
    lblMiddlename.setFont(styleThree);
    panel.add(lblMiddlename);
    txtMiddlename = new JTextField();
    txtMiddlename.setBounds(710,50,150,20);
    panel.add(txtMiddlename);

    lblPhone = new JLabel("Phone");
    lblPhone.setBounds(160,100,100,20);
    Font styleFour = new Font ("Arial", Font.BOLD,13);
    lblPhone.setFont(styleFour);
    panel.add(lblPhone);
    txtPhone = new JTextField();
    txtPhone.setBounds(210,100,150,20);
    panel.add(txtPhone);

    lblEmail = new JLabel("Email");
    lblEmail.setBounds(410,100,100,20);
    Font styleFive = new Font ("Arial", Font.BOLD,13);
    lblEmail.setFont(styleFive);
    panel.add(lblEmail);
    txtEmail = new JTextField();
    txtEmail.setBounds(450,100,150,20);
    panel.add(txtEmail);

    lblAddressOne = new JLabel("Address 1");
    lblAddressOne.setBounds(145,150,100,20);
    Font styleSix = new Font ("Arial", Font.BOLD,13);
    lblAddressOne.setFont(styleSix);
    panel.add(lblAddressOne);
    txtAddressOne = new JTextField();
    txtAddressOne.setBounds(210,150,150,20);
    panel.add(txtAddressOne);

    lblAddressTwo = new JLabel("Address 2");
    lblAddressTwo.setBounds(145,200,100,20);
    Font styleSeven = new Font ("Arial", Font.BOLD,13);
    lblAddressTwo.setFont(styleSeven);
    panel.add(lblAddressTwo);
    txtAddressTwo = new JTextField();
    txtAddressTwo.setBounds(210,200,150,20);
    panel.add(txtAddressTwo);

    lblCity = new JLabel("City");
    lblCity.setBounds(180,250,100,20);
    Font styleEight = new Font ("Arial", Font.BOLD,13);
    lblCity.setFont(styleEight);
    panel.add(lblCity);
    txtCity = new JTextField();
    txtCity.setBounds(210,250,150,20);
    panel.add(txtCity);

    lblPostCode = new JLabel("Post Code");
    lblPostCode.setBounds(380,250,100,20);
    Font styleNine = new Font ("Arial", Font.BOLD,13);
    lblPostCode.setFont(styleNine);
    panel.add(lblPostCode);
    txtPostCode = new JTextField();
    txtPostCode.setBounds(450,250,150,20);
    panel.add(txtPostCode);
}
public void Image() {
    ImageIcon image = new ImageIcon("icon.png");
    lblPicture = new JLabel(image);
    lblPicture.setBounds(600,90, 330, 270);
    panel.add(lblPicture);
}
public void Buttons() {
    btSave = new JButton ("Save");
    btSave.setBounds(380,325,100,20);
    panel.add(btSave);
    btSave.addActionListener(new SaveListener(btDelete));

    btDelete = new JButton ("Delete");
    btDelete.setBounds(260,325,100,20);
    panel.add(btDelete);
    btDelete.addActionListener(new DeleteListener());

    btExit = new JButton ("Exit");
    btExit.setBounds(500,325,100,20);
    panel.add(btExit);
    btExit.addActionListener(new Action());
}
public void List() {
    listModel = new DefaultListModel<String>();
    listModel.addElement("Daniel Walker");
    listModel.addElement("John Smith");
    listModel.addElement("Bob Jones");

    //JList
    list = new JList<String>(listModel);
    list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    list.setSelectedIndex(0);
    list.setVisibleRowCount(5);
    list.setBounds(0,10,125,350);
    panel.add(list);

}

static class Action implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        JFrame option = new JFrame();
        int n = JOptionPane.showConfirmDialog(option, 
                "Are you sure you want to exit?", 
                "Exit?", 
                JOptionPane.YES_NO_OPTION);
        if(n == JOptionPane.YES_OPTION){
            System.exit(0);
        }
    }

}

class SaveListener implements ActionListener, DocumentListener {
    private boolean alreadyEnabled = false;
    private JButton button;

    public SaveListener(JButton button) {
        this.button = button;
    }

    //Required by ActionListener.
    public void actionPerformed(ActionEvent e) {

        String name = txtFirstName.getText();

        //User didn't type in a unique name...
        if (name.equals("") || alreadyInList(name)) {
            Toolkit.getDefaultToolkit().beep();
            txtFirstName.requestFocusInWindow();
            txtFirstName.selectAll();
            return;
        }

        int index = list.getSelectedIndex(); //get selected index
        if (index == -1) { //no selection, so insert at beginning
            index = 0;
        } else {           //add after the selected item
            index++;
        }

        listModel.insertElementAt(txtFirstName.getText() +" "+ txtSurname.getText(), index);
        //print to file
        out.println(txtFirstName.getText());
        out.println(txtSurname.getText());
        out.println(txtMiddlename.getText());
        out.println(txtPhone.getText());
        out.println(txtAddressOne.getText());
        out.println(txtAddressTwo.getText());
        out.println(txtEmail.getText());
        out.println(txtCity.getText());
        out.println(txtPostCode.getText());
        out.close();

        //Reset the text field.
        txtFirstName.requestFocusInWindow();
        txtSurname.requestFocusInWindow();
        txtMiddlename.requestFocusInWindow();
        txtPhone.requestFocusInWindow();
        txtAddressOne.requestFocusInWindow();
        txtAddressTwo.requestFocusInWindow();
        txtEmail.requestFocusInWindow();
        txtCity.requestFocusInWindow();
        txtPostCode.requestFocusInWindow();
        txtFirstName.setText("");
        txtSurname.setText("");
        txtMiddlename.setText("");
        txtPhone.setText("");
        txtAddressOne.setText("");
        txtAddressTwo.setText("");
        txtEmail.setText("");
        txtCity.setText("");
        txtPostCode.setText("");
        //Select the new item and make it visible.
        list.setSelectedIndex(index);
        list.ensureIndexIsVisible(index);
    }

    protected boolean alreadyInList(String name) {
        return listModel.contains(name);
    }

    //Required by DocumentListener.
    public void insertUpdate(DocumentEvent e) {
        enableButton();
    }

    //Required by DocumentListener.
    public void removeUpdate(DocumentEvent e) {
        handleEmptyTextField(e);
    }

    //Required by DocumentListener.
    public void changedUpdate(DocumentEvent e) {
        if (!handleEmptyTextField(e)) {
            enableButton();
        }
    }

    private void enableButton() {
        if (!alreadyEnabled) {
            button.setEnabled(true);
        }
    }

    private boolean handleEmptyTextField(DocumentEvent e) {
        if (e.getDocument().getLength() <= 0) {
            button.setEnabled(false);
            alreadyEnabled = false;
            return true;
        }
        return false;
    }
}

public void valueChanged(ListSelectionEvent e) {
    if (e.getValueIsAdjusting() == false) {
        if (list.getSelectedIndex() == -1) {
            btDelete.setEnabled(false);

        } else {
            btDelete.setEnabled(true);
        }
    }

}
class DeleteListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {

        int index = list.getSelectedIndex();
        listModel.remove(index);
        int size = listModel.getSize();
        if (size == 0) { 
            btDelete.setEnabled(false);
        } else { 
            if (index == listModel.getSize()) {
                index--;
            }
            list.setSelectedIndex(index);
            list.ensureIndexIsVisible(index);
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:24:07.523

在这里，您将获得 NPE。您没有初始化面板。我想你忘了调用`MyPanel`方法。

```
frame.add(panel); 
```

解决这个NPE。

```
MyPanel();  //Call this method in constructor before this line.
frame.add(panel); 
```

# c# - 我怎样才能以下一种形式获得我的 SQL 数据库的最近保存的 ID

> ID：15600227
> 
> 赞同：-3
> 
> 时间：2013-03-24T15:19:53.200
> 
> 标签：c#, sql

当我试图从我的数据库中检索最后一个值时，它会返回第一个值。通过使用以下查询。

```
SELECT [Id] from dbo.Tb_Patient; 
```

我想得到最后一个值。我应该使用什么查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:22:50.920

尝试这个

```
SELECT Top(1) [Id] from dbo.Tb_Patient order by Id desc; 
```

或者，如果`Id`是 Auto Incremented 列，那么您也可以使用`MAX`函数来查找最大值。

```
SELECT MAX([Id]) from dbo.Tb_Patient 
```

# php - 在 PHP 中合并关联数组

> ID：15600230
> 
> 赞同：2
> 
> 时间：2013-03-24T15:20:03.173
> 
> 标签：php

我有一个存储在 cookie 中的序列化数组，在我的应用程序的某个时刻，我需要将此数组与另一个具有相同设计的数组合并，因此：

阵列 1：

```
$arr1 = array(
            "user_id" => 1,
            "item_id" => 2,
            "quant" => 3
        ); 
```

我将其设置在一个 cookie 中：

```
serialize($arr1); 
```

阵列 2：

```
$arr2 = array(
            "user_id" => 5,
            "item_id" => 5,
            "quant" => 6
        ); 
```

我尝试合并两个数组：首先我反序列化 cookie 中的第一个数组值，然后与第二个数组合并

```
$un_arr1 = unserialize($cookie_val);
$final = array_merge($arr2, $un_arr1); 
```

不过，这仅返回第一个数组中的值。

我想要达到的目标：

```
Array
(
    [0] => Array
        (
            [user_id] => 1
            [item_id] => 2
            [quant] => 3
        )

    [1] => Array
        (
            [user_id] => 4
            [item_id] => 5
            [quant] => 6
        )
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T15:24:14.443

`$final = array($array1, $array2);`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-24T15:24:01.977

您正在寻找[`array_merge_recursive`](http://www.php.net/manual/en/function.array-merge-recursive.php)而不是`array_merge`.

```
<?php

$A = array('a' => 1, 'b' => 2, 'c' => 3);
$B = array('c' => 4, 'd'=> 5);

$result = array_merge_recursive($A, $B);

print_r($result); 
```

[看到它在行动](http://ideone.com/Oewrb)。

# java - 如何找到“B”+最多 6 个标志

> ID：15600231
> 
> 赞同：0
> 
> 时间：2013-03-24T15:20:03.470
> 
> 标签：java, regex

我需要验证模式是否有字母“B”，并且在它之后最多六个符号（字母和数字）。例如：我们有`abcdB1234B123456`. 找到的答案应该是：`B1234`和`B123456`。

我做了这个模式：

```
[^B]{1,6} 
```

但它不精确..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:26:45.240

What about this pattern:

```
public static void main(String[] args) {
    final Pattern pattern = Pattern.compile("B[aAc-zC-Z0-9]{0,6}");
    final String string = " abcdB1234B123456";
    final Matcher matcher = pattern.matcher(string);
    while (matcher.find()) {
        System.out.println(matcher.group());
    }
} 
```

Output:

```
B1234
B123456 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:27:05.337

Try this code :

```
String data = "abcdB1234B123456";
Pattern pattern = Pattern.compile("B[aAc-zC-Z\\d]{0,6}");

Matcher matcher = pattern.matcher(data);
while (matcher.find()) {
    // Indicates match is found. Do further processing
    System.out.println(matcher.group());
} 
```

# ios - 我可以检查 iPhone 的特定类型吗？

> ID：15600232
> 
> 赞同：-2
> 
> 时间：2013-03-24T15:20:04.827
> 
> 标签：ios, objective-c

我知道这听起来像是一个奇怪的问题，但我不想落在这个问题上。我已经读过，如果我使用没有记录的东西，我可能会被 Apple 拒绝，要获得我使用的 iphone 类型：

```
//get iphone kind
-(NSString*) machineName
{
    struct utsname systemInfo;
    uname(&systemInfo);

    return [NSString stringWithCString:systemInfo.machine
                              encoding:NSUTF8StringEncoding];
} 
```

我可以用这个吗？`[UIDevice device]`不能这样做，有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:20:02.357

为什么你说这没有记录？在 Xcode Organizer 的 Documentation 选项卡的搜索字段中键入“uname”，您将看到`uname`.

有许多 C 函数通过“手册页”进行了完整记录。在 iOS 应用程序中使用这些都是完全安全的。

我使用您在 App Store 的几个应用程序中发布的代码。这不是问题。

# jquery - 总是需要内联选择字段元素-Jquery Mobile

> ID：15600233
> 
> 赞同：0
> 
> 时间：2013-03-24T15:20:06.580
> 
> 标签：jquery, jquery-ui, jquery-mobile, mobile

我想要使​​用 JQuery mobile 为移动设备设计的表单中的选择字段元素。我正在使用一个标签，然后是三个选择项。现在，我有两个要求：

1）选择字段元素应始终与标签一起出现在一行中。
2）在重新调整浏览器窗口大小时，即改变浏览器的宽度，字段元素应始终保持内联。

我在 CSS 中使用了屏幕和设备宽度属性。我还尝试修改由 JQuery 提供的移动 UI CSS。但这没有帮助。帮助。这很紧急 ：（

使用的链接：http: [//jquerymobile.com/demos/1.2.1/docs/forms/selects/](http://jquerymobile.com/demos/1.2.1/docs/forms/selects/)
部分：水平分组的选择输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:21:07.713

您需要更改默认的 css 行为。更改控制组 div 使其始终为内联块并更改字段集以使没有元素换行。

```
div.ui-controlgroup-label{display:inline-block;} 
fieldset.ui-controlgroup-horizontal{white-space:nowrap;} 
```

例如，参见[http://jsfiddle.net/vZcBM/ 。](http://jsfiddle.net/vZcBM/)

或者，您可以设置字段集的最小宽度。

```
fieldset.ui-controlgroup-horizontal{min-width: 400px;} 
```

# django - 使用自定义登录时如何在注册后手动验证用户身份？

> ID：15600244
> 
> 赞同：0
> 
> 时间：2013-03-24T15:21:06.427
> 
> 标签：django, django-authentication, django-1.5

也许 Django 1.5 最有趣的特性是`custom user`终于告别了过时的用户名。

文档中有一个很好的几乎[开箱即用的示例](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#a-full-example)来创建一个用户，您只需要电子邮件地址而不是用户名。

然而，有一个小警告。由于某种原因，在成功注册后，我无法自动登录用户，因为它可以按照[此处的 Django 1.4 中的描述工作](https://stackoverflow.com/questions/3222549/how-to-automatically-login-a-user-after-registration-in-django)

换句话说，这对我不起作用：

```
user = authenticate(username=form.cleaned_data['email'], password=form.cleaned_data['password2'])
login(request, user) 
```

奇怪的是，我什至没有在调试控制台中收到任何错误消息，也没有收到任何警告。

根据[开箱即用的示例](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#a-full-example)，虽然没有定义自定义后端。只有一个 CustomUser 和 CustomUsermanager。因此我不明白为什么我不能手动登录用户。

顺便说一句，我还在设置中设置了以下内容：

```
AUTHENTICATION_BACKENDS = ('django.contrib.auth.backends.ModelBackend',) 
```

这里有任何 Django 1.5 专家吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:18:26.340

我只是自己运行了这个例子，它确实有效。

您是否在运行*syncdb*之前设置了**AUTH_USER_MODEL**？

 *如果没有，请擦除您的数据库并再次运行该命令。根据链接的示例，如果一切配置正确，它应该在创建超级用户时询问您的出生日期。

顺便说一句，*ModelBackend*是默认的**AUTHENTICATION_BACKENDS**，您不必设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:49:56.923

我终于找到了解决方案。在内部 django 类中调试后。解决方案简单得令人尴尬。

```
user = authenticate(username=form.cleaned_data['email'], password=form.cleaned_data['password2'])
login(request, user) 
```

我的错误是错误的命名空间`login(request, user)`

确保您正在使用

```
from django.contrib.auth import login 
```

而不是错误的：

```
from django.contrib.auth.views import login 
```

在我的设置中，其他一切都是正确的。*

# wordpress - 自定义分类法未显示

> ID：15600261
> 
> 赞同：0
> 
> 时间：2013-03-24T15:22:21.357
> 
> 标签：wordpress

我有一个名为 Products 的自定义帖子类型，每个产品都有一个自定义类别，即商业、住宅或零售。访问以下 URL 时：`http://176.67.171.11/airvent/product/aquaguard/`您可以在左侧看到类别列表。单击，您将获得所有常规博客帖子的存档页面，而不是该类别的自定义帖子类型帖子。我添加了archive-product.php，但它似乎没有把它拉进去？

我错过了什么？

提前致谢。

**我的代码：（**来自[pastebin](http://pastebin.com/cjRRbM11)）

```
register_taxonomy( 'product_range_cat', 
    array('product'), 
    array('hierarchical' => true,                  
        'labels' => array(
            'name' => __( 'Product Categories', 'bonestheme' ), 
            'singular_name' => __( 'Product Category', 'bonestheme' ), 
            'search_items' =>  __( 'Search Product Categories', 'bonestheme' ), 
            'all_items' => __( 'All Product Categories', 'bonestheme' ), 
            'parent_item' => __( 'Parent Product Category', 'bonestheme' ), 
            'parent_item_colon' => __( 'Parent Product Category:', 'bonestheme' ),
            'edit_item' => __( 'Edit Product Category', 'bonestheme' ), 
            'update_item' => __( 'Update Product Category', 'bonestheme' ), 
            'add_new_item' => __( 'Add New Product Category', 'bonestheme' ), 
            'new_item_name' => __( 'New Product Category Name', 'bonestheme' ) 
        ),
        'show_ui' => true,
        'query_var' => true,
        'rewrite' => array( 'slug' => 'product-category' ),
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:31:23.933

解决了这个问题，这是我发现的一个片段，它从 loop.php 中排除了产品类别类型：

`<?php query_posts($query_string . '&cat=-4'); //Custom query to exclude category/ies ?>`

我仍然无法弄清楚为什么它不会调用archive-product.php？

谢谢你的帮助。

# javascript - 无法在弹出窗口中将 Latlong 放置在地图中心

> ID：15600274
> 
> 赞同：0
> 
> 时间：2013-03-24T15:23:47.817
> 
> 标签：javascript, google-maps, google-maps-api-3

我尝试了很多将 latlong 放置在弹出窗口的地图中心，但仍然无法将其放置在中心。这是我的代码，latlong 来自数据库动态。

```
<script>
   var amsterdam = new google.maps.LatLng("<?php echo $lats; ?>","<?php echo $lons;?>");

function initialize()
{
var mapProp = {
  center:amsterdam,
  zoom:8,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
var myCity = new google.maps.Circle({
  center:amsterdam,
  radius:<?php echo $rad;?>,
  strokeColor:"#0000FF",
  strokeOpacity:0.8,
  strokeWeight:2,
  fillColor:"#0000FF",
  fillOpacity:0.4
  });
var marker=new google.maps.Marker({
  position:amsterdam,
  animation:google.maps.Animation.BOUNCE
  });

marker.setMap(map);
myCity.setMap(map);
//google.maps.event.trigger(map, 'resize');
  } google.maps.event.addDomListener(window, 'load', initialize);

</script>
<div id="googleMap" style="width:100%;height:340px;margin-left: 4px;margin-top: 15px;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:27:02.077

You shouldn't wrap the coordinates with `"` because they will be treated as strings. Try without the double inverted commas. If all fail, use `parseFloat()` on the echoed latitude and longitude.

# java - 如何将一个字符串与数组列表中的另一个字符串匹配并打印匹配？

> ID：15600277
> 
> 赞同：-2
> 
> 时间：2013-03-24T15:23:54.870
> 
> 标签：java, arrays

好的，这是我的问题。我试图让用户通过“姓氏、电子邮件和邮政编码”在我的联系人列表中搜索匹配的联系人它将打印出匹配的字符串/联系人。但是，它不会打印出任何内容。我是否使用了错误的功能来匹配联系人？我的匹配函数位于 ContactList.java 下面的 searchEmail 方法下。

MainActions.java

```
 case 3:
        // read in last name here
        String userStringLastName;
        System.out.println("Enter the last name to search for: ");
        userStringLastName = reader.next();
        list.searchLastName(userStringLastName);
        break; 
```

联系人列表.java

```
/**
 * 
 * @param userStringLastName
 */
public void searchLastName(String userStringLastName) {
    // search last name

    for (int i = 0; i < contacts.size(); i++) {
        Contact c = contacts.get(i);
        boolean b = userStringLastName.matches(c.getLastName());
        if (b == true) {
            System.out.println(c.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:26:42.680

就像是

```
userStringLastName.toLowerCase().contains(c.getLastName().toLowerCase()); 
```

应该管用

# python - 在列表中赋值

> ID：15600280
> 
> 赞同：0
> 
> 时间：2013-03-24T15:24:05.477
> 
> 标签：python, list, limit

```
while True:
    p = []
    q = []
    H = []
    E = []
    for m in range(n):
        p = (i-d[m-2][1])/d[m-2][0]
        q.append(p)
    print q

    r = q[0]
    if r  < g[1][0]:
        r == g[1][0]
    elif r > g[1][1]:
        r == g[1][1]
    print r 
```

对于上面编码的问题，我想用更简单的方式解释一下。

```
i = [3,5]

r = [5,6]

if i[0] < r[0]:
    i[0] == r[0]
    print i 
```

但是，我无法进入`[5,5]`这个例子，为什么？输出仍然`[3,5]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:27:03.170

Change

```
i[0] == r[0]
r == g[1][0]
r == g[1][1] 
```

to (respectively)

```
i[0] = r[0]
r = g[1][0]
r = g[1][1] 
```

`==` is a logical comparison (it tests whether the two values are equal and returns `False` or `True`). `=` is the assignment operator.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:25:52.733

以下几行是比较而不是赋值：

```
 r == g[1][0]
    r == g[1][1]
    i[0] == r[0] 
```

我怀疑你打算写

```
 r = g[1][0]
    r = g[1][1]
    i[0] = r[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:11:06.233

```
i[0] == r[0] --> i[0] = r[0]
r == g[1][0] --> r = g[1][0]
r == g[1][1] --> r = g[1][1] 
```

# qt - QToolButton - html 文本

> ID：15600281
> 
> 赞同：0
> 
> 时间：2013-03-24T15:24:06.293
> 
> 标签：qt

是否可以像 in 一样使用 HTML 格式化`QToolButton`文本`QLabel`？`toolbutton.SetText("Text <b>Test</b>")`不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:01:44.743

我认为如果没有子类`QToolButton`化和覆盖，这是不可能的`paintEvent`，但如果你只想设置按钮中的文本样式，你可以像这样使用[Qt 样式表](http://qt-project.org/doc/qt-5.0/qtwidgets/stylesheet.html)：

```
toolButton->setStyleSheet("font-weight: bold"); 
```

# python-2.7 - 收到“没有名为 oauth2 的模块”的错误

> ID：15600284
> 
> 赞同：1
> 
> 时间：2013-03-24T15:24:11.827
> 
> 标签：python-2.7, oauth-2.0

我正在尝试运行一个 python 工具来验证我对linkedin的身份，以便我下载我的linkedin网络，以便我能够在 Gephi 中对其进行分析。我在这里获得了这样一个文件：

[来自github的linkedin-1-oauth.py](https://gist.github.com/ThomasCabrol/4232700)

我克隆了那个和他在要点中的另外两个文件。我只是通过`git clone [url here]`对所有 3 个文件执行此操作从我的终端执行此操作。我把我的 api 和密钥放在相应的地方。

我做了一个`pip install oauth2`并按照这里的建议进行了更新`httplib2`：

[pip 安装 oauth2 并更新 httplib2](https://stackoverflow.com/questions/7781233/python-why-is-installing-oauth2-so-hard)

我也是从命令行执行此操作的，该命令行将文件下载并安装在与我从 gist 下载链接文件的位置相同的目录中，都在我的用户文件夹中。

尝试`pip install oauth2`并收到以下错误消息时：

```
Downloading/unpacking oauth2
  Running setup.py egg_info for package oauth2

Requirement already satisfied (use --upgrade to upgrade): httplib2 in /usr/lib/python2.7/dist-packages (from oauth2)
Installing collected packages: oauth2
  Running setup.py install for oauth2
    error: could not create '/usr/local/lib/python2.7/dist-packages/oauth2': Permission denied
    Complete output from command /usr/bin/python -c "import setuptools;__file__='/home/steven/build/oauth2/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-e2RkcV-record/install-record.txt:
    running install

running build

running build_py

running install_lib

creating /usr/local/lib/python2.7/dist-packages/oauth2

error: could not create '/usr/local/lib/python2.7/dist-packages/oauth2': Permission denied

----------------------------------------
Command /usr/bin/python -c "import setuptools;__file__='/home/steven/build/oauth2/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-e2RkcV-record/install-record.txt failed with error code 1
Storing complete log in /home/steven/.pip/pip.log 
```

然后我尝试`easy_install oauth2`并收到以下错误消息：

```
error: can't create or remove files in install directory

The following error occurred while trying to add or remove files in the
installation directory:

    [Errno 13] Permission denied: '/usr/local/lib/python2.7/dist-packages/test-easy-install-4349.pth'

The installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

    /usr/local/lib/python2.7/dist-packages/

Perhaps your account does not have write access to this directory?  If the
installation directory is a system-owned directory, you may need to sign in
as the administrator or "root" account.  If you do not have administrative
access to this machine, you may wish to choose a different installation
directory, preferably one that is listed in your PYTHONPATH environment
variable.

For information on other options, you may wish to consult the
documentation at:

  http://packages.python.org/distribute/easy_install.html

Please make the appropriate changes for your system and try again. 
```

所以然后我尝试做`sudo apt-get install oauth2`，但找不到

我正在运行 Ubuntu 12.04 LTS，我在今天早上做任何其他事情之前完成了所有的 sudo 更新和升级。我正在运行 python 2.7

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:34:56.480

我可以通过去这里解决问题：

[蟒蛇oauth2](https://launchpad.net/ubuntu/+source/python-oauth2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T16:27:47.617

windows上安装python oauth2库的步骤

1.  下载[http://python-distribute.org/distribute_setup.py](http://python-distribute.org/distribute_setup.py)并复制安装 python 的位置
2.  运行“pythondistribute_setup.py”
3.  下载 Oauth2 并将其解压缩到一个目录。导航到此目录。
4.  运行“python setup.py install”安装ouath2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-16T08:55:04.963

如果你有 python 2.7.10 或更高版本，这里是更简单的方法。使用 'pip' 安装 python 模块。在我的情况下，在 Windows 上说下面的伎俩。C:\Python27\Scripts\pip 安装 ouath2

# mysql - 仅当其他表上不存在时才插入表中

> ID：15600287
> 
> 赞同：3
> 
> 时间：2013-03-24T15:24:16.077
> 
> 标签：mysql, sql

我正在尝试做以下事情：我有两个表：ReportImage (imageId, reportId, counter) 和 userReportedImages (imageId, userId)

我希望每个用户只能报告一次图像 - 这意味着首先我想检查'userReportedImages'中是否有一行带有值（imageId，userId），如果这样做什么都不做，否则创建一行带有值（imageId、reportId、counter）的“ReportImage”，如果这样的行已经存在（其他用户报告了该图像），那么我想提高计数器。

到目前为止，在检查相同的用户报告之前，我有以下声明：

```
INSERT INTO ReportImage VALUES (imageId,reportId,1) ON DUPLICATE KEY UPDATE counter = counter+1 
```

这个声明工作正常。

我试图更改此语句以首先检查另一张表上是否存在该行，但我没有设法做到这一点，您能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:40:00.920

首先，您需要`UNIQUE`在 table 上定义约束或复合列主键`ReportImage`，

```
ALTER TABLE ReportImage ADD CONTRAINT tb_uq UNIQUE(ImageID, ReportID) 
```

试试这个，

```
INSERT INTO ReportImage(ImageID, ReportID, Counter)
SELECT  'imageID HERE' AS ImageID,
        'userID HERE' AS ReportID,
        1 AS Counter
FROM    userReportedImages a
        LEFT JOIN ReportImage b
            ON  a.imageId = b.imageId AND
                a.userId = b.ReportID AND
                a.imageID = 'imageID HERE' AND
                a.userID = 'userID HERE'
WHERE   b.imageId IS NULL OR 
        b.ReportID IS NULL
ON DUPLICATE KEY UPDATE counter = VALUES(counter) + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:51:55.973

你可以尝试使用`NOT EXISTS`

```
insert into table2(`name`)
select * from (select 'name1' as name) tmp
where not exists(
  select ('x') from table1 where name = 'test1'
  ); 
```

[SQL小提琴](http://sqlfiddle.com/#!2/474e5/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:29:53.820

插入触发器应该是您的解决方案： [link](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

# database - 删除并刷新 DBgrid 中您保持相同位置的记录

> ID：15600289
> 
> 赞同：0
> 
> 时间：2013-03-24T15:24:19.670
> 
> 标签：database, delphi, delphi-xe2, record, dbgrid

我有一个使用 dbgo 的小型数据库，我有一个显示我的记录的 DBgrid，我需要知道如何删除记录并刷新索引箭头保持在同一位置或至少转到下一个位置的数据库？但目前我的索引箭头每次刷新时都会从开头跳起！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:27:20.913

Just keep and reset Recno

```
var
I:Integer;
.......

I := Ads.Recno;
Ads.Delete;
Ads.Recno := I; 
```

an example implementation for usage with DBNavigator could be

```
Procedure DeleteAndKeepRecno(Ads: TCustomAdoDataset);
var
  rn: Integer;
begin
  rn := Ads.RecNo;
  Ads.Delete;
  Ads.RecNo := rn;
end;

procedure TForm4.DBNavigator1Click(Sender: TObject; Button: TNavigateBtn);
begin
  if Button = nbDelete then
  begin
    DeleteAndKeepRecno (TCustomAdoDataset(TDBNavigator(Sender).DataSource.DataSet));
    Abort;
  end;
end; 
```

# r - R从列表中提取数据框，列名中没有前缀

> ID：15600291
> 
> 赞同：9
> 
> 时间：2013-03-24T15:24:39.140
> 
> 标签：r, list, dataframe, columnname

我在列表中放置了一个数据框。然后，当尝试将其提取回来时-我得到了所有以该数据框的列表键为前缀的列名，有没有办法完全按照最初传递的方式提取数据框？

```
cols<-c("column1", "Column2", "Column3")
df1<-data.frame(matrix(ncol = 3, nrow = 1))
colnames(df1)<-cols
df1

result<-list()
result['df1']<-list(df1)

newdf1<-as.data.frame(result['df1'])
newdf1 
```

得到结果（列名以 df1 为前缀）：

```
> cols<-c("column1", "Column2", "Column3")
> df1<-data.frame(matrix(ncol = 3, nrow = 1))
> colnames(df1)<-cols
> df1
  column1 Column2 Column3
1      NA      NA      NA
> 
> result<-list()
> result['df1']<-list(df1)
> 
> newdf1<-as.data.frame(result['df1'])
> newdf1
  df1.column1 df1.Column2 df1.Column3
1          NA          NA          NA 
```

当然，我可以手动删除前缀，但可能有一种正确的方法可以做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T15:26:32.143

`[[`使用而不是提取`[`：

```
> newdf1 <- as.data.frame(result[['df1']])
> newdf1
  column1 Column2 Column3
1      NA      NA      NA 
```

不同之处在于`[`提取包含所请求组件的列表。`[[`直接提取请求的组件（即，它检索列表中该组件的内容，而不是包含该组件的列表）。

但是既然`df1`已经*是*一个数据框，为什么不这样做：

```
newdf1 <- result[['df1']] 
```

? 你不需要这个`as.data.frame()`部分。

# c# - 如何绕过或检测 html 标签输入以防止运行时错误？

> ID：15600293
> 
> 赞同：0
> 
> 时间：2013-03-24T15:24:55.747
> 
> 标签：c#, asp.net, html

我正在使用评论部分页面，它允许用户输入消息，我想知道如何绕过和捕获数据，即使用户输入了没有任何错误的 html 元素......谢谢。

# c++ - 运行时计数器退出代码 139，但 gdb 使其通过

> ID：15600296
> 
> 赞同：23
> 
> 时间：2013-03-24T15:25:18.200
> 
> 标签：c++, gdb, segmentation-fault, undefined-behavior

我的问题听起来很具体，但我怀疑它仍然可能是 C++ 调试问题。

我正在使用 omnet++ 来模拟无线网络。omn​​et++ 本身是一个 c++ 程序。

我在运行程序时遇到了一个奇怪的现象（在 Ubuntu 12.04 中使用 omnet++ 4.2.2 修改了 inet 框架）：当我触摸代码的某个部分时，程序以退出代码 139 退出（人们说这意味着内存碎片），当我尝试调试，gdb 不会报告模拟先前退出的“有问题”代码有任何错误，实际上，调试会通过这部分代码并输出预期结果。

gdb 版本信息：GNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2.1) 7.4-2012.04

谁能告诉我为什么运行失败但调试没有？

非常感谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-24T16:00:36.667

> 退出代码 139（人们说这意味着内存碎片）

不，这意味着您的程序因信号而死`11`（`SIGSEGV`在 Linux 和大多数其他 UNIX 上），也称为`segmentation fault`.

> 谁能告诉我为什么运行失败但调试没有？

您的程序表现出未定义的行为，并且可以做*任何事情*（包括有时看起来可以正常工作）。

你的*第一步*应该是在 Valgrind 下运行这个程序，并修复它报告的所有错误。

如果执行上述操作后，程序仍然崩溃，那么你应该让它转储核心（`ulimit -c unlimited; ./a.out`），然后用 GDB 分析核心转储`gdb ./a.out core`：然后使用`where`命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-02T15:36:07.660

此错误也是由空指针引用引起的。如果您使用的是未初始化的指针，则会导致此错误。

要检查指针是否已初始化，您可以尝试类似

```
Class *pointer = new Class();
if(pointer!=nullptr){
    pointer->myFunction();
} 
```

# c - 自动工具中用于包含在 C 源文件中的非目标文件目标

> ID：15600300
> 
> 赞同：0
> 
> 时间：2013-03-24T15:25:27.543
> 
> 标签：c, makefile, autotools

在编译常规 C 源文件*之前*，我如何告诉它从某些输入文件（此处）`lib/Makefile.am`中生成非目标并告诉它这样做？`.o``.txt`

 *背景：我有一堆文本文件 ( `.txt`) 作为输入以及其他 C 源文件。我想处理它们`xxd`以生成一个 C 数组初始值设定项列表，该列表包含在其中一个 C 源文件中。因此，文本文件处理应该在编译`.c`文件之前进行。

在 C 文件中，我将包含处理后的`.inc`文件：

```
#include "data.inc" 
```

我做到了这一点：

```
SUFFIXES = .txt
.txt.$(OBJEXT):
    $(XXD) -i $< @top_builddir@/include/$*.inc 
```

问题是 makefile 假定生成的文件不是我需要`.o`的规则（`.txt`--> ）。`.o`我需要告诉它这`.inc`是最终形式，并且它存在于`top_builddir`. 这样做的首选方法是什么？*

# php - RESTful API 错误最佳实践

> ID：15600307
> 
> 赞同：9
> 
> 时间：2013-03-24T15:26:27.480
> 
> 标签：php, api, rest, laravel, laravel-4

在 RESTful API 中返回 HTTP 状态码的最佳实践是什么？我将 Laravel 4 用于我的 PHP 框架。

如果出现错误，我应该使用

```
return Response::json('User Exists', 401); 
```

或者

**包括标志`success`**

```
return Response::json([
    'success' => false,
    'data' => 'User Exists'],
    401
); 
```

或者

**用200代替4xx，靠`success`判断是否有错误**

```
return Response::json([
    'success' => false,
    'data' => 'User Exists'],
    200
); 
```

而在成功且不需要返回任何数据的情况下，你还返回任何东西吗？

**PHP API 代码**

```
public function getCheckUniqueEmail() {
    // Check if Email already exist in table 'users'
    $uniqueEmail = checkIfEmailExists();

    // Return JSON Response
    if($uniqueEmail) {
        // Validation fail (user exists)
        return Response::json('User Exists', 401);
    } else {
        // Validation success
        // - Return anything?
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T15:47:54.847

当您查看[可用的 HTTP 状态代码列表时](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)，您会在某些时候意识到它们有很多，但单独使用它们本身并不能真正解释错误。

所以要回答你的问题，有两个部分。一个是：您的 API 如何传达错误的原因并添加 API 的用户（在大多数情况下是另一位开发人员）可以阅读和采取行动的有用信息。您应该添加尽可能多的信息，包括机器可读和人类可读的。

另一部分：HTTP 状态码如何帮助区分某些错误（和成功）状态？

后一部分实际上比一件可能的事情更难。在某些明显的情况下，使用 404 来表示“未找到”。500 表示服务器端的任何错误。

我不会使用状态 401，除非我真的希望在存在 HTTP 身份验证凭据的情况下允许操作成功。401通常会在浏览器中触发一个对话框，这是不好的。

如果资源是唯一的并且已经存在，则状态“409 冲突”似乎是合适的。如果创建用户成功，状态“201 Created”听起来也是个好主意。

请注意，还有更多的状态代码，其中一些与 HTTP 协议的扩展有关（如 DAV），一些完全不标准化（如 Twitter API 中的状态“420 增强你的冷静”）。查看[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)以了解到目前为止已使用的内容，并决定是否要使用适合您的错误情况的内容。

根据我的经验，简单地选择一个状态码并使用它很容易，但很难始终如一地按照现有标准这样做。

但是，我不会仅仅因为其他人可能会抱怨就停在这里。:) 正确地做 RESTful 接口本身就是一项艰巨的任务，但是存在的接口越多，积累的经验就越多。

*编辑：*

关于版本控制：将版本标记放入 URL 被认为是不好的做法，如下所示：`example.com/api/v1/stuff`它会起作用，但效果不好。

但第一件事是：您的客户如何指定他想要获得哪种表示，即他如何决定获得 JSON 或 XML？答：`Accept`带头。他可以发送`Accept: application/json`JSON 和`Accept: application/xml`XML。他甚至可能接受多种类型，然后由服务器决定返回什么。

除非服务器被设计为使用一种以上的资源表示（JSON 或 XML，客户端选择）来回答，否则客户端确实没有太多选择。`Content-type: application/json`但是让客户端至少发送“application/json”作为他唯一的选择，然后返回一个标头作为响应，这仍然是一件好事。这样，双方就可以清楚地了解他们希望对方看到的内容是什么样的。

现在是版本。如果您将版本放入 URL，您可以有效地创建不同的资源（v1 和 v2），但实际上您只有一个资源 (= URL) 具有不同的访问方法。当请求的参数和/或响应中的表示与当前版本不兼容时，必须创建新版本的 API。

因此，当您创建使用 JSON 的 API 时，您无需处理通用 JSON。你处理一个具体的 JSON 结构，它对你的 API 来说是独一无二的。您可以并且可能应该`Content-type`在服务器发送的消息中指出这一点。“供应商”扩展就是为了这个：`Content-type: application/vnd.IAMVENDOR.MYAPI+json`将告诉世界基本数据结构是 ap​​plication/json，但真正告诉您期望哪种结构的是您的公司和您的 API。这正是 API 请求的版本适合的地方：`application/vnd.IAMVENDOR.MYAPI-v1+json`.

因此，不是将版本放在 URL 中，而是希望客户端发送一个`Accept: application/vnd.IAMVENDOR.MYAPI-v1+json`标头，并且您也响应`Content-type: application/vnd.IAMVENDOR.MYAPI-v1+json`。对于第一个版本，这确实没有任何改变，但是让我们看看当第 2 版开始发挥作用时事情会如何发展。

URL 方法将创建一组完全不相关的新资源。客户会想知道是否`example.com/api/v2/stuff`与`example.com/api/v1/stuff`. 客户端可能已经使用 v1 API 创建了一些资源，并且他存储了这些东西的 URL。他应该如何将所有这些资源升级到 v2？资源真的没有改变，它们是一样的，唯一改变的是它们在 v2 中看起来不同。

是的，服务器可能会通过向 v2 URL 发送重定向来通知客户端。但是重定向并不表示客户端也必须升级 API 的客户端部分。

在版本中使用接受标头时，所有版本的资源 URL 都是相同的。客户端决定使用版本 1 或 2 请求资源，服务器可能非常友好并且仍然使用版本 1 响应来响应版本 1 请求，但所有版本 2 请求都使用新的和闪亮的版本 2 响应。

如果服务器无法响应版本 1 请求，他可以通过发送 HTTP 状态“406 Not Acceptable”告诉客户端（请求的资源只能根据请求中发送的 Accept 头生成不可接受的内容。）

客户端可以发送包含两个版本的接受标头，这使服务器能够以他最喜欢的一个响应，即智能客户端可能实现版本 1 和 2，现在将两者都作为接受标头发送，并等待服务器升级从版本 1 到 2。服务器会在每个响应中告诉它是版本 1 还是版本 2，客户端可以相应地采取行动——他不需要知道服务器版本升级的确切日期。

总结一下：对于一个非常基本的 API，可能是内部的，使用有限，即使有一个版本也可能是矫枉过正。但你永远不知道这是否会在一年后成为现实。在 API 中包含版本号始终是一个非常好的主意。最好的地方是你的 API 将要使用的 mime 类型。检查单个现有版本应该是微不足道的，但您可以选择稍后透明升级，而不会混淆现有客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:27:50.240

我不会对所有事情都使用 200 状态。那只会令人困惑。

Jquery 允许您以不同的方式处理不同的响应代码，已经有内置的方法可以利用它们在您的应用程序中使用它们，当您的应用程序增长时，您也可以提供该 API 供其他人使用。

编辑：另外我强烈推荐观看这个关于 Laravel 和 API 开发的演讲：

[http://kuzemchak.net/blog/entry/laracon-slides-and-video](http://kuzemchak.net/blog/entry/laracon-slides-and-video)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T15:05:12.187

有一些 HTTP 状态代码列表`Illuminate\Http\Response`扩展至`Symfony\Component\HttpFoundation\Response`. 你可以在课堂上使用它。

例如：

```
use Illuminate\Http\Response as LaravelResponse;
...
return Response::json('User Exists', LaravelResponse::HTTP_CONFLICT); 
```

它更具可读性。

# php - HipHop not resolving JSON defined constants

> ID：15600318
> 
> 赞同：1
> 
> 时间：2013-03-24T15:27:00.173
> 
> 标签：php, json, hiphop

I'm doing an application that uses json. For testeability purposes I made a JsonWrapper:

```
<?php
    class JsonWrapper {
    private $json_errors;

    public function __construct() {
        $this->json_errors = array(
            JSON_ERROR_DEPTH => ' - Maximum stack depth exceeded',
            JSON_ERROR_STATE_MISMATCH => ' - Underflow or the modes mismatch',
            JSON_ERROR_CTRL_CHAR => ' - Unexpected control character found',
            JSON_ERROR_SYNTAX => ' - Syntax error, malformed JSON',
            JSON_ERROR_UTF8 => ' - Malformed UTF-8 characters, possibly incorrectly encoded'
        );
    }

    public function decode($json, $toAssoc = false) {
        $result = json_decode($json, $toAssoc);

        $errorIndex = json_last_error();
        if (isset($this->json_errors[$errorIndex])) {
            throw new RuntimeException('JSON Error: ' . $this->json_errors[$errorIndex]);
        }

        return $result;
    }
} 
```

As you see, I map all the json error constants with my own error message.

# The problem:

1.  If I don't use HipHop this works fine.
2.  If I use HipHop I get this error:

`Use of undefined constant JSON_ERROR_DEPTH - assumed 'JSON_ERROR_DEPTH'`

I tried to modify the code commenting all the initialization of `$json_errors`, and test if the error was because the associative array is forbidden in HipHop, but it wasn't that. It kept failing after I put a json constant anywhere on my code.

I also did a test if all the php constants were failing. I test with the 'XML_ERROR_PARTIAL_CHAR' constant, and It didn't fail!

I really don't know what is happening in here and why HipHop hates JSON so much :(

**Edit**

The main question is:
Why hiphop doesn't understand JSON_ERROR_DEPTH but resolves with no much effort XML_ERROR_PARTIAL_CHAR, if both are defined the same way with the define php function?

**json.php: line 170**

```
/**
 * The maximum stack depth has been exceeded.
 * Available since PHP 5.3.0.
 * @link http://php.net/manual/en/json.constants.php
 */
define ('JSON_ERROR_DEPTH', 1); 
```

**xml.php: line 559**

```
define ('XML_ERROR_PARTIAL_CHAR', 6); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:49:14.770

`HipHop`没有定义与 PHP 相同的所有常量。我的意思是，hiphop 就像是对 PHP 的重新实现，其中一些东西丢失了，而另一些则发生了变化。

例如，像`PDO::PARAM_INT`HipHop 中的 PDO 常量是按旧方式定义的，即`PDO_PARAM_INT`.

另外，如果我没记错的话，hiphop 的实现`urlencode`就像 php 的`raw_urlencode`（即`%20`像`raw_urlencode`在 PHP 中那样编码空格，而不是将它们编码`+`为 PHP 的`urlencode`）。

此外，HipHop 并没有完全实现 PHP 5.2，因为对命名空间有一些支持（在 PHP 5.3 中出现），但它们有问题，不建议使用。

简而言之，您可能需要*修补*代码中的某些内容。例如，您可以在引导代码中添加如下内容：

```
<?php
if (!is_defined('JSON_ERROR_NONE')) define('JSON_ERROR_NONE', 0);
// same thing with other JSON_* constants 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:46:11.940

好的。现在我知道为什么它没有解决。问题是 HipHop 支持的 PHP 版本！

如果您访问[HipHop 维基百科](http://www.hiphop-for-php.com/wiki/Main_Page)，您会看到：
`HipHop currently supports PHP version 5.2 and will be updated to support 5.3.`

由于所有 JSON 常量在 PHP 5.2 中都不可用，因此没有得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:56:11.210

我可能是错的，但我认为你不能这样做，你的例子在 PHP 5.4 中不能“编译” `error_reporting(E_ALL);`，它会发出通知，这意味着 PHP 认为你忘记了数组中键的引号。

您需要使用 const 在类级别声明常量

```
class MyClass{
   const MY_CONST = "my value";
} 
```

然后这样称呼它

```
echo MyClass::MY_CONST ; 
```

# c - Sending multiple messages over a TCP port

> ID：15600319
> 
> 赞同：2
> 
> 时间：2013-03-24T15:27:01.100
> 
> 标签：c, sockets, unix, tcp

I have a program that creates a socket (server and client program) and sends a message via a TCP port using that socket. My question is, how can I exchange multiple messages? Every time I send a message the port gets closed and I need to use another port to send another message.

For example, I have to send 2 numbers from the client to the server and the server needs to reply back the total sum of the numbers I send. How would I achieve sending undefined number or even 2 numbers over the SAME port?

Here are the codes (pretty much standard stuff):

Server:

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/socket.h>
#include <netinet/in.h>

char* Itoa(int value, char* str, int radix) 
{
    static char dig[] =
      "0123456789"
      "abcdefghijklmnopqrstuvwxyz";
    int n = 0, neg = 0;
    unsigned int v;
    char* p, *q;
    char c;
    if (radix == 10 && value < 0) {
      value = -value;
      neg = 1;
    }
    v = value;
    do {
      str[n++] = dig[v%radix];
      v /= radix;
    } while (v);
    if (neg)
      str[n++] = '-';
    str[n] = '\0';
    for (p = str, q = p + (n-1); p < q; ++p, --q)
      c = *p, *p = *q, *q = c;
    return str;
}

void error (const char *msg)
{
    perror (msg);
    exit (1);
}
int main (int argc, char *argv[])
{
    if (argc < 2)
    {
        fprintf (stderr, "ERROR, no port provided\n");
        exit (1);
    }
    //nova varijabla za sumiranje primljenih brojeva
    int suma=0;

    int sockfd, newsockfd, portno,i;
    socklen_t clilen;
    char buffer[256];
    struct sockaddr_in serv_addr, cli_addr;
    int n;
    for (i=0;i<2;i++)
    {
        sockfd = socket (AF_INET, SOCK_STREAM, 0);
        if (sockfd < 0) error ("ERROR opening socket");
        memset ((char *) &serv_addr, 0, sizeof (serv_addr));
        portno = atoi (argv[1]);
        portno+=i;
        serv_addr.sin_family = AF_INET;
        serv_addr.sin_addr.s_addr = INADDR_ANY;
        serv_addr.sin_port = htons (portno);
        if (bind (sockfd, (struct sockaddr *) &serv_addr, sizeof (serv_addr)) < 0) error ("ERROR on binding");
        //test za ispis otvorenog porta
        printf("Uspjesno otvoren localhost na portu %d\n", portno); 
        listen (sockfd, 5);
        clilen = sizeof (cli_addr);
        newsockfd = accept (sockfd, (struct sockaddr *) &cli_addr, &clilen);
        if (newsockfd < 0) error ("ERROR on accept");
        memset (buffer, 0, 256);
        n = read (newsockfd, buffer, 255);
        if (n < 0) error ("ERROR reading from socket");
        printf ("%d. proslan broj: %s\n", i+1, buffer);
//print
        suma=suma+atoi(buffer);
//radi!!        printf("suma je %d\n", suma);
//od klijenta: n = write (sockfd, buffer, strlen (buffer));
//char *  itoa ( int value, char * str, int base );
        Itoa(suma, buffer, 10);
        n = write (newsockfd, buffer, strlen(buffer));
        if (n < 0) error ("ERROR writing to socket");
        close (newsockfd);
        close (sockfd);
    }
    return 0;
} 
```

Client:

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
void    error (const char *msg)
{
    perror (msg);
    exit (1);
}
int
main (int argc, char *argv[])
{
    if (argc < 3)
    {
        fprintf (stderr, "usage %s hostname port\n", argv[0]);
        exit (1);
    }
    int sockfd, portno, n,i;
    struct sockaddr_in serv_addr;
    struct hostent *server;
    char buffer[256];
    for (i=0;i<2;i++)
    {
        portno = atoi (argv[2]);
        sockfd = socket (AF_INET, SOCK_STREAM, 0);
        if (sockfd < 0)
        error ("Ne mogu otvoriti socket!");
        server = gethostbyname (argv[1]);
        if (server == NULL)
        {
            fprintf (stderr, "Greska, ne postoji!\n");
            exit (1);
        }
        memset ((char *) &serv_addr, 0, sizeof (serv_addr));
        serv_addr.sin_family = AF_INET;
        bcopy ((char *) server->h_addr,
        (char *) &serv_addr.sin_addr.s_addr,
        server->h_length);
        portno+=i;
        serv_addr.sin_port = htons (portno);
        if (connect (sockfd, (struct sockaddr *) &serv_addr, sizeof (serv_addr)) < 0)
        error ("ERROR connecting");
        printf ("%d. broj za slanje: ", i+1);
        memset (buffer, 0, 256);
        fgets (buffer, 255, stdin);
        n = write (sockfd, buffer, strlen (buffer));
        if (n < 0)
        error ("ERROR writing to socket");
        memset (buffer, 0, 256);
        n = read (sockfd, buffer, 255);
        if (n < 0)
        error ("ERROR reading from socket");
        if (i==1) printf ("Suma iznosi: %s\n", buffer);
        close (sockfd);
    }
    return 0;
} 
```

So, for example, I run the code and get this for the server side:

```
j@PC ~/Desktop/Mreze/Lab1/rijeseno $ ./server2 5000
Uspjesno otvoren localhost na portu 5000
1\. proslan broj: 45

Uspjesno otvoren localhost na portu 5001
2\. proslan broj: 56

j@PC ~/Desktop/Mreze/Lab1/rijeseno $ 
```

And on the client side:

```
j@PC ~/Desktop/Mreze/Lab1/rijeseno $ ./client2 localhost 5000
1\. broj za slanje: 45
2\. broj za slanje: 56
Suma iznosi: 101 
```

I've tried putting a while loop so it loops the part with sending but without success. Please explain to me where should I even put it so it works. Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:04:47.473

这里有一个问题：

```
n = read (newsockfd, buffer, 255); 
```

您所做的是执行一次读取，并且数据可能不完全可用。事实是，你需要读取数据，只要你完整接收到数据，或者检测到EOF条件（`-1`返回值）。

通常，您需要为接收部分编写更可靠的代码，因为流协议不能保证您的消息边界以任何形式保持。

这是一个（非常不理想，但很简单）读取数据的代码：

```
int readLine(int fd, char data[])
{
   size_t len = 0;
   while (len < maxlen)
   {
      char c;
      int ret = read(fd, &c, 1);
      if (ret < 0)
      {
          data[len] = 0;
          return len; // EOF reached
      }
      if (c == '\n')
      {
          data[len] = 0;
          return len; // EOF reached
      }
      data[len++] = c;
   }
} 
```

以及用法示例：

```
char buffer[256];
int num1, num2;

readLine(newsockfd, buffer);
num1 = atoi(buffer);
readLine(newsockfd, buffer);
num2 = atoi(buffer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:37:50.307

首先将您的 connection() 函数放在 for 循环之前和 close() 之后。只是为了一个想法

```
connect (sockfd, (struct sockaddr *) &serv_addr, sizeof (serv_addr)
for (i=0;i<n;i++){
 // do you introspection with server
 // actually send number to server 
}
// Code to read result: SUM from server
close (sockfd); 
```

# c++ - to read the directory location written in file and to create new files in that directory in c++

> ID：15600322
> 
> 赞同：0
> 
> 时间：2013-03-24T15:27:03.313
> 
> 标签：c++, debugging, file-io, runtime-error, codeblocks

here is the code for creating the directory it is switch case so i have placed it inside a block.

```
{
int  index = 0 ;

char  path[60];

system ( " cls " ) ;

ofstream  ofile ;

cout < < " \ n Enter path  to  store  bills 

< <( ! Without  spaces  after  symbols  like  slashes  and  colons

< <e.g.  \" c : \\ billing  folder \\ \" : ";

fflush ( stdin ) ;

cin.getline ( path , 60 ) ;

mkdir ( path ) ;

ofile.open ( " Path.dat " , ios :: trunc | ios :: out | ios :: binary ) ;

ofile.write ( path , strlen ( path ) );

ofile.close ( ) ;

goto here1 ;

} 
```

and here is the code to create a file in the directory created above,the file name have to be the current date and time for which i have used ctime header.

```
void billingWindow ( )
{
system ( "cls " ) ;

char path [ 60 ] ;

char folder [ 30 ];

struct tm *timeInfo;

time_t now;

time(&now);

timeInfo=localtime(&now);

strftime(folder,30,"%d_%m_%y %H=%M",timeInfo);

folder [ 14 ] = ' \0 ' ;

string foldName ( folder , 14 ) ;

int index = 0 ;

ifstream readFile ( " Path.dat ", ios :: in ) ;

readFile.seekg ( 0 , ios :: end ) ;

int length = readFile.tellg ( ) ;

readFile.seekg ( 0 , ios :: beg ) ;

while ( index <= (length-1) )

 {

  readFile.read ( &path [ index ] , sizeof ( char ) ) ;

  index++ ;
 }

path [ index ] = '\0';

char *newPath = new char [ index ] ; 

strcpy ( newPath , path ) ; //copied into 'newPath' because value of 'path' was showing garbage at it's tail while debugging and watching 

index = 0 ;

strcat ( newPath, foldName.c_str ( ) ) ; //appended newPath with the current date and time stored in 'foldName'

char alpha[ 80 ] ;

strcpy ( alpha ,newPath ) ; //copied in the newPath in alpha because i was not sure of dynamically alloted character pointer's behaviour to create file

delete [ ] newPath;

ofstream writeBill ( alpha , ios :: out ) ;

if ( ! writeBill )
{

    cout < < " Error Occured "< < endl ;
} 
```

creation of directory is successful and the code to create directory also created the file containing path properly. whenever i run the debugger in my IDE(codeBlocks) the code works fine but while running the code to test it or running the executable made by IDE program just crash when i select the option to the billingWindow

is there any fatal error in the code,please help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:36:52.697

这是错误的

```
char *newPath = new char[index]; 
```

你应该有

```
char *newPath = new char[index + foldName.size() + 1]; 
```

因为对于 C 风格的字符串，您总是必须分配足够的内存来保存所有字符。

因为这很困难，所以您应该始终使用 C++ 字符串。例如

```
std::string newPath = path;
newPath += foldName; 
```

这是正确的，更短的，更容易编写和更容易理解的。

# inversion-of-control - Constructor Injection to access service

> ID：15600334
> 
> 赞同：0
> 
> 时间：2013-03-24T15:28:22.637
> 
> 标签：inversion-of-control, factory-pattern, mvvmcross

Is there a better way to consume a service in mvvmcross by constructor injection? For example, I have my object in a plugin implementation

```
public class MyObject : IMyObject
{
   public MyObject (int id) 
   {
      _id = id;
   }
} 
```

and want to consume it somewhere the portable core (in the buisness layer) like this :

```
public void ConsumeTheService()
{
    int i = 50;
    var myObject = this.GetService<IMyObject>(i);
} 
```

Actually, I only use a setter to get my id back in the implementation.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:42:45.470

我不确定我是否理解您的示例-不确定`intValue`在`GetService`

不管：

*   MvvmCross v3 包括构造函数注入 - 请参阅[http://slodge.blogspot.co.uk/2013/03/v3-new-viewmodel-lifecycle.html上的一些详细信息](http://slodge.blogspot.co.uk/2013/03/v3-new-viewmodel-lifecycle.html)

*   其他人也在 vNext 中实现了构造函数注入 - 例如[https://github.com/gshackles/CrossBar/](https://github.com/gshackles/CrossBar/)和[http://slodge.blogspot.co.uk/2013/02/a-second-take-on-constructor-injection .html](http://slodge.blogspot.co.uk/2013/02/a-second-take-on-constructor-injection.html)

*   MvvmCross 中的 IoC 是完全可替换的 - 因此如果您愿意，您可以使用其他 IoC 机制（但这确实需要您提供一些代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:19:34.727

在您更新之后......如果您询问如何获得：

```
 var myObject = this.GetService<IMyObject>(50); 
```

并为此返回一个初始化为的对象`new MyObject(50)`

那么我建议您实现一个接口

```
public interface IMyObjectFactory
{
    IMyObject CreateMyObject(int i);
} 
```

有一个实现：

```
public class MyObjectFactory : IMyObjectFactory
{
    public IMyObject CreateMyObject(int i)
    {
        return new MyObject(i);
    }
} 
```

然后你可以`IMyObjectFactory`用 IoC注册它

# php - 像“&”，“？”这样的无效字符 使用 ajax

> ID：15600340
> 
> 赞同：1
> 
> 时间：2013-03-24T15:29:06.190
> 
> 标签：php, jquery, ajax, post, get

好的，伙计们，我有这个：

```
<textarea class="boxCommento1" placeholder="Scrivi un commento.."></textarea>
<input style="width:100%;" type="button" value="Inserisci" onclick="functionThatObtainTextFromTextarea();"/> 
```

当我单击输入按钮时，我会从 textarea 中获取文本，然后我将使用 PHP 和 AJAX 将其插入我的数据库中，但是如果我写这样的内容就会出现问题：“你昨天做了什么？？？” 或像这样的字符“&”当我使用 php 获取文本时，“？” 并且“&”当然不会被识别，因为使用 GET 和 POST “？” 和“&”用于php url变量......有什么建议吗？？？

PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:32:02.483

[`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)在 AJAX Javascript 中使用。

当您在 PHP 中使用`$_GET`or获取变量时`$_REQUEST`，它会[自动被解码](http://php.net/manual/en/function.urldecode.php)，因此您无需执行任何其他操作。

```
//Javascript
var inserisciValue = encodeURIComponent(theInsertisciValue); 
```

# x86 - 如何知道中断是硬件中断还是cpu异常

> ID：15600345
> 
> 赞同：5
> 
> 时间：2013-03-24T15:29:20.987
> 
> 标签：x86, interrupt-handling, irq

我一直在研究 x86 上的中断以及内核如何使用中断处理程序处理各种中断。但有一件事让我感到困惑。

我知道中断可能是硬件产生的，例如磁盘和定时器中断，或者它们可能是 CPU 异常，例如页面错误、除以零异常等。让我感到困惑的是，一些 int 代码用于处理两者（INT 08 - 特别是 0F）。例如，Ralf Brown 的列表说 INT 09h 中断兼作`KEYBOARD DATA READY`硬件中断和`COPROCESSOR SEGMENT OVERRUN`异常。

所以我的问题是，给定这样的中断，中断处理程序如何知道要处理哪个中断？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:00:12.063

x86 通常不提供区分硬件和软件中断的方法。异常处理程序必须查询外部硬件或其他方式来消除这两种情况的歧义。

为了避免混乱，系统可以通过在相应的中断描述符表条目中设置特权级别来防止重载相同的向量。用户模式 ​​(CPL=3) INT 指令不能在特权向量上生成软件异常。

对于少数异常，处理器会在异常堆栈帧上压入一个额外的错误代码字。错误代码字段有一个位“EXT”来指示异常是否由外部中断引起。在 IA 手册第 3 卷中，第 6.13 节指出：

> EXT 外部事件（位 0）— 置位时，表示在程序外部事件（例如中断或较早的异常）的传递过程中发生异常。

但是，只有少数异常推送了错误代码字段，并且所有这些都是向量 32 以下的处理器异常。

- 编辑 -

还有一点：不要被“陷阱门”和“中断门”所迷惑。中断可以通过陷阱门，而 INT 可以通过中断门。唯一的区别是进入处理函数时对中断启用状态的处理。

# c - 使用 getchar() 时的额外循环和 getchar() 的实际行为

> ID：15600349
> 
> 赞同：1
> 
> 时间：2013-03-24T15:29:44.177
> 
> 标签：c, loops

当我想弄清楚 getchar() 实际做了什么时，这个小片段`loop`确实让我感到困惑。

```
int i;
int c;
for (i = 0; i < 100; i++) {
    c = getchar();
    printf("%d\n", c);    
    printf("i is %d\n", i);
} 
```

输入输出为：

```
input: 1
output:
49
i is 0
10
i is 1

input: 12
output:
49
i is 2
50
i is 3
10
i is 4 
```

正如我之前所假设的，如果我输入 1 个字符，getchar() 应该将其提取出来，putchar() 会打印它，然后程序进入下一个循环并等待我的下一个输入。但结果似乎表明代码没有按我的预期工作：

1.  输出数字是什么意思？
2.  总是有一个额外的循环打印`10`，这是什么`10`意思？如果这意味着`EOF`，为什么在循环内替换后`c = getchar();`，`c = (getchar() != EOF);`代码总是打印出`1`哪个，正如我所料，应该`0`在最后一个循环中打印一个？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:33:59.070

> ### 问题
> 
> 输出数字是什么意思？

输出数字是指根据您的*字符集*的字符值，通常基于[ASCII](http://www.manpagez.com/man/7/ascii/)（一些大型机也使用[EDCDIC](http://en.wikipedia.org/wiki/EBCDIC)）。

> ### C11 (n1570)，第 5.2.1 节字符集
> 
> 应定义两组字符及其相关的整理顺序：写入源文件的字符集（源字符集）和在执行环境中解释的字符集（执行字符集）。每个集合进一步分为一个基本字符集，其内容由本子条款给出，以及一组零个或多个特定于语言环境的成员（它们不是基本字符集的成员），称为扩展字符。组合集也称为扩展字符集。执行字符集成员的值是实现定义的。

因此，通过这种字符编码，49 是字符`'1'`，50 是字符`'2'`。

> ### 问题
> 
> 总是有一个额外的循环打印 10，这个 10 是什么意思？

对于 ASCII 字符集，10 是*换行符* `'\n'`。

当您`'1'`在键盘上键入字符时，标准输入流`stdin`实际上将接收两个字符 :`'1'`和`'\n'`，因为您正在按下`<Enter>`以验证您的输入。

因此，您应该在完成`getchar`调用后清理标准输入流。实现它的一种可能方法是消耗每个字符，直到到达换行符或`EOF`：

```
#include <stdio.h>

int c;

while ((c = getchar()) != '\n' && c != EOF)
  ; 
```

在 BSD 上，也有该功能`fpurge`，并且在 Solaris 和 GNU/Linux`__fpurge`上可用。

> ### 问题
> 
> 如果这意味着`EOF`，为什么在循环内替换后`c = getchar();`，`c = (getchar() != EOF);`代码总是打印出`1`哪个，正如我所料，应该`0`在最后一个循环中打印一个？

的值`EOF`不能是 10，因为`EOF`必须有一个负值。

> ### C11 (n1570), § 7.21.1 简介
> 
> `EOF`，它扩展为一个整数常量表达式，具有类型`int`和负值 [...]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:36:01.310

> 输出数字是什么意思？

字符的字符代码`getchar()`返回，因为您得到一个并且您正在使用说明符打印它`%d`。在这种情况下，您的字符编码似乎是 ASCII 或 UTF-8，因此`1`代表 49、50`2`等。

> 2：[...太长无法引用...]

10 是换行符 ( `'\n'`) 的 ASCII 和 Unicode 字符代码。由于您按 Enter （`getchar()`等待它！），您**将获得**Enter 发送到终端的字符。

# objective-c - 用于检查 NSArray 计数的 STAssertEquals - 干净的方式

> ID：15600353
> 
> 赞同：4
> 
> 时间：2013-03-24T15:30:05.493
> 
> 标签：objective-c, ocunit

使用 STAssertEquals 为 NSArray 检查 NSArray 项目计数的正确方法是什么。

预计以下工作：

```
...
STAssertEquals(1, [myArray count], @"One item should be in array"); 
```

此代码在运行测试时会产生“类型不匹配”运行时错误。

相反，我必须对 NSUInteger 进行显式转换：

```
STAssertEquals((NSUInteger)1, [myArray count], @"One item should be in array"); 
```

这行得通 - 但由于明确的演员表，看起来有点难看。

我还想避免使用 STAssertTrue，因为 STAssertEquals 看起来更合适（我们比较两个值）并显示实际值和预期值。

在 Objective-C 中检查它的正确方法是什么？

**更新 1**

感谢建议使用 1u 作为无符号整数文字的答案

```
STAssertEquals(1u, [myArray count], @"One item should be in array"); 
```

但是正如@Aaron 提到的那样，它仍然很难看——我想直接使用“1”——现在考虑使用 myArray.count == 1 。原因是1u看起来不是很干净。1对我来说就是1。你从来没有用数学写过 1u :-) 还有其他建议吗？

**更新 2**

正如@H2CO3 提到的 1u 甚至不能总是工作，并且正如一些线程中所建议的那样，我们可以对期望值使用更多的声明性定义，这将解决铸造问题：

```
NSUInteger expectedItemsCount = 1;
STAssertEquals(expectedItemsCount, [myArray count], @"One item should be in array"); 
```

我更喜欢它而不是 1u 解决方案，因为它看起来更干净。但是这种方法的缺点是我们有额外的行并且代码不是很紧凑。所以看起来我们必须在两种方法之间做出选择：`(NSUInteger)1`和`NSUInteger expectedItemsCount = 1;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:40:59.033

C的类型系统...

`1`是`int`，所以它已签名。`NSArray.count`所以`NSUInteger`它是未签名的。使整数文字无符号：

```
STAssertEquals(myArray.count, 1u, @"+1 item needed"); 
```

**编辑：**更好的是，以上将在 64 位上失败（它可以在`1ull`那里工作），所以如果你只使用类似的东西怎么办

```
const NSUInteger expectedLength = 1;
STAssertEquals(myArray.count, expectedLength, @"+1 item needed"); 
```

[（我偷这个的线程......）](http://www.cocoabuilder.com/archive/cocoa/307490-stassertequals-and-type-checking.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:40:44.580

您可以使用`STAssertEquals(1U, myArray.count, @"One item should be in array");`使 1 无符号。也许这仍然很丑陋。打字少了一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:19:30.723

1U 是正确的。但是，如果您想避免这种丑陋（并进入一个更好的断言世界），请使用 OCHamcrest：

```
assertThat(myArray, hasCountOf(1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T16:41:56.610

我这样做的方法是将它们作为对象进行比较，这将在 32 位和 64 位上工作，防止需要任何强制转换或不必要的变量声明，并维护一个包含失败值的漂亮失败消息：

```
STAssertEqualObjects(@(5), @(datas.count), @"unexpected array count"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T18:58:37.737

如果您的项目很大，或者您希望此代码具有较长的生命周期，请考虑为此类添加特定的断言。定义一个特例宏

```
 STArrayCount(myArray,1) 
```

可以扩展到类似的东西

```
 STAssertTrue(myArray.count==1u,@"Expected %u but array count is %u",myArray.count,1); 
```

编写自定义断言使您的单元测试在几年后重新访问时更加清晰，并且还为额外的测试提供了一个钩子。假设今天 myArray 是一个 NSArray，但后来它变成了 BigFancyObject 的一个实例，可以做一些其他的事情。BigFancyObjects 使您的大部分代码更加简洁并隐藏了实现细节，这一切都很棒。但是您想确保 BigFancyObject 是有效的，因为某些东西不断使它们无效。因此，您可以将 STArrayCount 重新定义为

```
 STAssertTrue(myArray.isValid && myArray.count==...) 
```

现在您的单元测试也检查对象的有效性。

# magento - 产品集合：排除某个类别的产品

> ID：15600354
> 
> 赞同：1
> 
> 时间：2013-03-24T15:30:16.963
> 
> 标签：magento, magento-1.7

*$parent_category* 有 N 个子类别。除了属于 *$excluded_child_category* 的产品之外，我如何从 *$parent_category* 获取所有产品？

这是我检索父类别的方法：

```
$collection = Mage::getModel( 'catalog/category' )->load( $parent_category_id )->getProductCollection(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:40:34.240

你应该尝试这样的事情

```
Mage::getModel( 'catalog/category' )->load( $parent_category_id )->getProductCollection()->addFieldToFilter('entity_id', array('nin' => array('your category id'))); 
```

# c# - 在 C# 中，如何正确实现命令设计模式？

> ID：15600358
> 
> 赞同：8
> 
> 时间：2013-03-24T15:30:52.577
> 
> 标签：c#, design-patterns, command-pattern

我目前正在研究设计模式，目前正在研究命令模式。

这是我当前的代码：

```
// this is the receiver
class Calculator : IReceiver
{
    int x;
    int y;

    CommandOptions command;

    public Calculator(int x, int y)
    {
        this.x = x;
        this.y = y;
    }

    public void SetAction(CommandOptions command)
    {
        this.command = command;
    }

    public int GetResult()
    {
        int result = 0;

        switch(this.command)
        {
            case CommandOptions.ADD:
                result = this.x + this.y;
                break;

            case CommandOptions.SUBTRACT:
                result = this.x - this.y;
                break;

            case CommandOptions.MULTIPLY:
                result = this.x * this.y;
                break;
        }

        return result;
    }
}

// command
abstract class Command
{
    protected IReceiver receiver;

    public Command(IReceiver receiver)
    {
        this.receiver = receiver;
    }

    public abstract int Execute();
}

class AddCommand : Command
{
    public AddCommand(IReceiver receiver) : base(receiver)
    {
    }

    public override int Execute()
    {
        reciever.SetAction(CommandOptions.ADD);
        return receiver.GetResult();
    }
}

enum CommandOptions
{
    ADD,
    SUBTRACT,
    MULTIPLY
}

interface IReceiver
{
    void SetAction(CommandOptions command);
    int GetResult();
}

class Program
{
    static void Main(string[] args)
    {
        IReceiver receiver = new Calculator(500, 25);

        //#Issue:The SetAction() method of the receiver is accessible.
        //receiver.SetAction(CommandOptions.ADD);
        receiver.SetAction(CommandOptions.MULTIPLY);
        Command command = null;

        Console.Write("Enter option 1-3: ");

        int commandOption = int.Parse(Console.ReadLine());

        switch(commandOption)
        {
            case 1:
                command = new AddCommand(receiver);
                break;

            case 2:
                command = new SubtractCommand(receiver);
                break;

            case 3:
                command = new MultiplyCommand(receiver);
                break;

            default:
                command = new AddCommand(receiver);
                break;
        }

        Console.WriteLine(command.Execute());
        Console.ReadKey();
    }
} 
```

请注意，在我的主要方法中，我可以访问`SetAction`能够设置使用哪个命令的接收器的方法。

我的问题是：我的实现是否违反了命令模式的目的，我的实现是否错误，因为我能够在我的客户端代码中访问它？如果是这样，我该如何改进这个实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T15:52:35.380

我拍了一张文本编辑的照片（即没有运行它，期待语法错误:)）你的代码。这是我将如何为您的问题建模。

几点——

1）让命令执行操作。在您的情况下，您有命令类，但您的计算器拥有计算逻辑。而是将命令动作封装在命令类本身中

2）我已经放置了一个工厂来将命令选项映射到命令，并通过删除`break`s 保存了几行，因为我可以返回命令。

3) IReceiver 现在保存传递给 Command 的值。在这种情况下，由于我们的运算符都是二进制的，所以我只使用了 X 和 Y。对于其他情况，可以是数组或任何其他复杂类型。

4）枚举不是必需的，除非你绝对想要它。

**编辑** 重新查看时，我认为更好的解决方案是不使用命令注册接收器，而是在调用命令时传递参数。

```
//this is the receiver
class Calculator : IReceiver
{
    int y;
    int x;

    public Calculator(int x, int y)
    {
        this.x = x;
        this.y = y;
    }

    public int Calculate(int commandOption)
    {
        Command command = new CommandFactory().GetCommand(commandOption);
        return command.Execute(x , y);
    }

}

//command
interface ICommand
{    
    int Execute(int x, int y);
}

class AddCommand : Command
{
    public override int Execute(int x, int y)
    {
        return x + y;
    }
}

class MultiplyCommand : Command
{
    public override int Execute(int x, int y)
    {
        return x * y;
    }
}

class SubtractCommand : Command
{
    public override int Execute(int x, int y)
    {
        return x - y;
    }
}

interface IReceiver
{
    int X {get; set;}
    int Y {get; set;}
    int Calculate(int commandOption);
}

public class CommandFactory
{
    public GetCommand(int commandOption)
    {
        switch(commandOption)
        {
            case 1:
                return new AddCommand();
            case 2:
                return new SubtractCommand();
            case 3:
                return new MultiplyCommand();
            default:
                return new AddCommand();
        }       
    }
}

class Program
{
    static void Main(string[] args)
    {
        IReceiver receiver = new Calculator(500, 25);
        //#Issue:The SetAction() method of the receiver is accessible.
        //receiver.SetAction(CommandOptions.ADD);

        //Receiver no longer exposes SetAction
        //receiver.SetAction(CommandOptions.MULTIPLY);
        Console.Write("Enter option 1-3: ");
        int commandOption = int.Parse(Console.ReadLine());

        Console.WriteLine(receiver.Calculate(commandOption));
        Console.ReadKey();
    }
} 
```

# core-data - 如何在应用程序文档文件夹中保存用户选择的图像（Zbar 扫描仪）

> ID：15600361
> 
> 赞同：1
> 
> 时间：2013-03-24T15:31:19.797
> 
> 标签：core-data, uiimageview, nsfilemanager, xcode4.6, nsdocumentdirectory

所以我有 2 个视图，其中一个是 UITableVew，用户可以通过添加它们来填充单元格。第二个视图是他们添加时的信息（姓名、日期、公司和扫描条形码的位置。）。好吧，当他们扫描该图像时，他们可以看到他们扫描的图像（使用 Zbar 条形码扫描仪完成）。所以主要问题是如何在用户添加的每个不同单元格中准确保存不同的图像？

代码：

兹巴：

```
 - (IBAction)cameraButtonTapped:(id)sender
    {
    // Check for camera
    if ([UIImagePickerController               isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] == YES) {
        // Create image picker controller
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

        // Set source to the camera
        imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

        // Delegate is self
        imagePicker.delegate = self;

        // Show image picker
        [self presentModalViewController:imagePicker animated:YES];
    }

    }

    - (void) imagePickerController: (UIImagePickerController*)reader
    didFinishPickingMediaWithInfo: (NSDictionary*) info
    {
    // ADD: get the decode results
    id<NSFastEnumeration> results =
    [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
        // EXAMPLE: just grab the first barcode
        break;

    // EXAMPLE: do something useful with the barcode data
    resultText.text = symbol.data;

    // EXAMPLE: do something useful with the barcode image
    resultImage.image =
    [info objectForKey: UIImagePickerControllerOriginalImage];

    // ADD: dismiss the controller (NB dismiss from the *reader*!)

    [reader dismissModalViewControllerAnimated:YES];

    }

    -(UIView*)CommomOverlay{
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,480)];

    UIImageView *TopBar = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,58)];
    [TopBar setImage:[UIImage imageNamed:@""]];
    [view addSubview:TopBar];

    UILabel *Toplabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 9, 300, 30)];
    [Toplabel setFont:[UIFont fontWithName:@"Heiti TC light" size:22]];
    [Toplabel setTextAlignment:UITextAlignmentCenter];
    [Toplabel setBackgroundColor:[UIColor clearColor]];
    [Toplabel setTextColor:[UIColor lightGrayColor]];
    [Toplabel setNumberOfLines:1];
    [Toplabel setText:@"Turn your device sideways to scan"];
    [TopBar addSubview:Toplabel];

    UIImageView *FrameImg = [[UIImageView alloc] initWithFrame:CGRectMake(40,50,240,370)];
    [FrameImg setImage:[UIImage imageNamed:@"scanImage.png"]];
    [view addSubview:FrameImg];
    return view;
}

- (IBAction) scanButtonTapped
{
    // ADD: present a barcode reader that scans from the camera feed
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    reader.supportedOrientationsMask = ZBarOrientationMaskAll;

    ZBarImageScanner *scanner = reader.scanner;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance
    [scanner setSymbology: ZBAR_I25
                   config: ZBAR_CFG_ENABLE
                       to: 0];

    // present and release the controller
    reader.cameraOverlayView = [self CommomOverlay];

    [self presentModalViewController: reader
                            animated: YES];

} 
```

我确实考虑过使用核心数据，但我在任何地方都找不到教程。然后我想将它保存在应用程序文档文件夹中，我认为这对我来说是最好的方式。我是新手，所以描述性代码会有所帮助:)

更新：

```
- (IBAction)save:(id)sender {
    NSManagedObjectContext *context = [self managedObjectContext];

    UIImage *image = resultImage.image;
    NSData *imageData = UIImagePNGRepresentation(image); //convert image into .png format.
    NSFileManager *fileManager = [NSFileManager defaultManager];//create instance of NSFileManager
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //create an array and store result of our search for the documents directory in it
    NSString *documentsDirectory = [paths objectAtIndex:0]; //create NSString object, that holds our exact path to the documents directory
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"/%@KYRO Receipts Images/Barcode.png", resultImage]]; //add our image to the path
    [fileManager createFileAtPath:fullPath contents:imageData attributes:nil]; //finally save the path (image)
    NSLog(@"image saved");

    if (self.device) {
        // Update existing device
        [self.device setValue:self.nameOfItem.text forKey:@"name"];
        [self.device setValue:self.dateOfPurchase.text forKey:@"date"];
        [self.device setValue:self.companyOfItem.text forKey:@"company"];

    } else {
       // 
        NSManagedObject *newDevice = [NSEntityDescription insertNewObjectForEntityForName:@"Receipt" inManagedObjectContext:context];
        [newDevice setValue:self.nameOfItem.text forKey:@"name"];
        [newDevice setValue:self.dateOfPurchase.text forKey:@"date"];
        [newDevice setValue:self.companyOfItem.text forKey:@"company"];

    }

    NSError *error = nil;
    // Save the object to persistent store
    if (![context save:&error]) {
        NSLog(@"Can't Save! %@ %@", error, [error localizedDescription]);
    }
    [WTStatusBar setStatusText:@"Saving data..." animated:YES];
    [self performSelector:@selector(setTextStatusProgress3) withObject:nil afterDelay:0.1];

        [self.navigationController popViewControllerAnimated:YES];
    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:28:00.863

如果您已经在使用 Core Data，那么根据图像的大小，您可以将它们转换为 NSData 并将它们直接保存在 Core Data 中（如果它们很小），或者您可以将它们保存在文档目录中并保存Core Data 中的文件名。

由于完整的 Core Data 教程超出了这里的范围，我只会以唯一的名称将图像保存到文档目录中。请注意，下面的一些代码改编自“ [iOS 编程：大书呆子牧场指南](http://www.bignerdranch.com/book/ios_programming_the_big_nerd_ranch_guide_rd_edition_)”。

```
// Method to save your image file. Returns the file name for you to save in Core Data or elsewhere.
- (NSString *)saveImage:(UIImage *)image {
    // Generate a unique key to name the image file
    CFUUIDRef newUniqueID = CFUUIDCreate(kCFAllocatorDefault);
    CFStringRef newUniqueIDString = CFUUIDCreateString(kCFAllocatorDefault, newUniqueID);
    NSString *imgkey = (__bridge NSString *)newUniqueIDString;

    // Get a path for the image file in the documents directory
    NSString *imagePath = [self imagePathForKey:imgkey];

    // Convert the UIImage into NSData and save it to the documents directory
    NSData *imageData = UIImageJPEGRepresentation(img, 0.5);
    [imageData writeToFile:imagePath atomically:YES];

    // Clean up
    CFRelease(newUniqueIDString);
    CFRelease(newUniqueID);

    return imgkey;
}

// Method to provide the image path for saving/retrieving the image
- (NSString *)imagePathForKey:(NSString *)key {
    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [documentDirectories objectAtIndex:0];

    return [documentDirectory stringByAppendingPathComponent:key];
} 
```

以下方法检索图像：

```
- (UIImage *)imageForKey:(NSString *)imgkey {
    result = [UIImage imageWithContentsOfFile:[self imagePathForKey:imgkey thumbnail:FALSE]];
    if (!result) {
        // File not found - add code here as needed (to return default image or whatever)
    }
    return result;
} 
```

请注意，如果您计划同时在表格中显示多个图像，则必须小心确保它们很小，否则您可能会遇到内存问题。在这种情况下，您可能希望将它们转换为表格视图的缩略图形式，然后仅在详细视图中显示全尺寸图像（如何生成缩略图将是一个单独的问题）。

# actionscript-3 - 在动作脚本中调整弹出窗口或浏览器大小后绘制时清除旧精灵

> ID：15600362
> 
> 赞同：0
> 
> 时间：2013-03-24T15:31:20.983
> 
> 标签：actionscript-3

目前，我有绘制条形图。如果更改组件的宽度，我的图表将重绘。我在重绘时对 bar 使用了 invalidateProperties() 和 invalidateDisplayList()，它使用新栏重绘是正确的。

但是，当调整弹出窗口或浏览器的大小时，我的图表将在新栏（使用新宽度重绘时）和旧栏之间被覆盖。

也许是因为，调整弹出窗口或浏览器的大小时，旧栏不清楚。我仍然使用 (chart as Sprite).graphics.clear()，但是这段代码没有执行。

各位，老精灵有多清晰？

# jwplayer - JW 播放器在 Wordpress 上自动暂停

> ID：15600363
> 
> 赞同：0
> 
> 时间：2013-03-24T15:31:30.567
> 
> 标签：jwplayer

我有一个带有 jwplayer 的 wordpress 网站，但我想知道如何在 30 分钟后自动暂停它。

请帮我解决这个问题

请简要说明我可以在哪里放置代码以使其正常工作

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:34:05.283

“30 分钟后”有两种解释方式。如果您想在日历时间 30 分钟后执行此操作：

```
setTimeout(function(){
    jwplayer().pause();
},30*60*1000); 
```

如果您想在视频的 30 分钟大关时执行此操作：

```
jwplayer().onTime(function(event){
    if(event.position >  30*60) {
        jwplayer().pause();
    }
}); 
```

# php - 捷克语编码问题

> ID：15600371
> 
> 赞同：0
> 
> 时间：2013-03-24T15:32:20.957
> 
> 标签：php, mysql

我最近制作了一个脚本，它只是简单地将东西添加到数据库中。但是，插入的文本是捷克语。到目前为止，我从来没有做过任何不期望英语输入的东西，所以我对编码有点陌生。

捷克语有这些特殊字符：ěščřžýáíéúů。我会说它们都可以工作，除了： ř, ú, ů, č 刚刚转换为：�?。我将如何解决这个问题？

我目前正在做`htmlentities($text, ENT_QUOTES,'UTF-8')`，然后用`html_entity_decode($text)`.

数据库正在使用`utf8_czech_ci`编码。

谢谢您的帮助！

编辑：如果我取出整个 htmlentities 部分，我会得到相同的结果，但使用：`?`而不是一些字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:58:59.217

整个问题是，表仍然使用与数据库不同的编码。另一个解决方法是使用：SET NAMES 'utf8' 来提醒 MySQL 我正在使用 UTF-8，以防万一它忘记了。

# delphi - 在 TDictionary 中使用“类别”？

> ID：15600373
> 
> 赞同：4
> 
> 时间：2013-03-24T15:32:30.693
> 
> 标签：delphi

想法很简单——用类名制作 TDictionary 到 TComponent 来使用

```
for enum in vm.ClassNameToComponent do
 TLuaClassTemplate<enum.Value>.RegisterClass(vm.LS, PrintGlobal, container, vm); 
```

用枚举代替

```
TLuaClassTemplate<TButton>.RegisterClass(vm.LS, PrintGlobal, container, vm);
TLuaClassTemplate<TPanel>.RegisterClass(vm.LS, PrintGlobal, container, vm);
TLuaClassTemplate<TEdit>.RegisterClass(vm.LS, PrintGlobal, container, vm);
... 
```

并使用从 xml 中获取的类名来处理基于泛型的类。
但是有问题：

```
TClassNameToComponentDict = TDictionary<string, TComponent>;
...
ClassNameToComponent: TClassNameToComponentDict;
...
  ClassNameToComponent := TClassNameToComponentDict.Create;
  ClassNameToComponent.Add('TButton', TButton);
  ClassNameToComponent.Add('TPanel', TPanel);
  ClassNameToComponent.Add('TEdit', TEdit);
... 
```

错误“不兼容的类型 'TComponent' 和 'class of TButton'”。
如何使用 TButton 等“类”作为通用值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:34:09.083

您使用的类型

```
TDictionary<string, TComponent> 
```

表示从字符串到类**实例**的映射。但是你想要一个从字符串到**类**的映射。所以你需要：

```
TDictionary<string, TComponentClass> 
```

在哪里

```
TComponentClass = class of TComponent 
```

请注意，您不需要声明`TComponentClass`，因为它已经在`Classes`单元中声明。

# ruby-on-rails - 验证前的 Rails 抛出错误

> ID：15600381
> 
> 赞同：0
> 
> 时间：2013-03-24T15:33:39.887
> 
> 标签：ruby-on-rails, validation

我正在尝试在 Rails 中实现一个私人消息系统，这是我的表：

```
create_table :messages do |t|
  t.integer    :sender_id,          :null => false
  t.integer    :recipient_id,       :null => false
  t.text       :content
  t.boolean    :read,               :null => false, :default => false

  t.timestamps
end 
```

这是我的`message`模型：

```
 attr_accessible :recipient_id, :sender_id, :content

  belongs_to :user

  validates_presence_of :recipient_id, :sender_id, :content

  before_validation :recipient

  def recipient
    self.recipient_id = User.find_by_email(self.recipient_id.to_s).id
  end 
```

和我的表格：

```
<%= form_for @message, :url => {:action => 'index'}, :as => :message do |message| %>
  <%= message.text_field :recipient_id, :placeholder => "to" %>

  <%= message.text_area :content, :placeholder => "i am saying..."%>

  <%= message.submit "Send" %>
<% end %> 
```

和控制器：

```
def create
  @message = Message.new(params[:message])
  @message.sender_id = current_user

  if @message.save
      set_flash "Message sent"
      render 'index'
  else
      set_flash "Message Failed"
      render 'index'
  end 
```

结尾

这个想法是*用户 1*在文本字段中输入*user2*电子邮件，`recipient_id`然后之前的验证将触发并根据他的电子邮件检索*用户 2*`user table` id，但是当我尝试它时，我收到此错误：

```
undefined method `to_i' for #<User:0x00000004344780> 
```

问题是什么？

**编辑：**

这是引发错误的行：

```
@message.sender_id = current_user 
```

如果我改变`current_user`它`current_user.id`thorws这个错误：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

在这条线上：

```
 self.recipient_id = User.find_by_email(self.recipient_id.to_s).id 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:58:09.717

在 create 方法中试试这个，

```
@message.sender_id = current_user.id 
```

而不是这个`@message.sender_id = current_user`。

我认为您正在`sender_id`使用该`current_user`对象进行设置，因为它需要一个`id`整数。

**编辑：**

对于新的错误，该`User.find_by_email`方法找不到记录，所以它正在返回`nil`.

你的代码也有问题，

```
self.recipient_id = User.find_by_email(self.recipient_id.to_s).id 
```

您正在设置`self.recipient_id`和搜索`self.recipient_id`。`self.recipient_id`似乎是`nil`除非`self.recipient_id`设置在其他地方。

如果数据库中有与 匹配的收件人，则`self.recipient_id`此代码不会执行任何操作。它将设置`self.recipient_id`为`self.recipient_id`。

# c++ - 多方面模板类专业化

> ID：15600383
> 
> 赞同：0
> 
> 时间：2013-03-24T15:33:49.553
> 
> 标签：c++, templates, template-specialization, aop

**语境**

我目前正在用 C++ 编写一些面向方面的代码。我有以下类层次结构：

```
class Base                   { virtual void doSmth() {/* generic stuff */ } };
class DerivedA : public Base { virtual void doSmth() {/* specific DerivedA stuff */} };
class DerivedB : public Base { virtual void doSmth() {/* specific DerivedB stuff */} }; 
```

我已经定义了一些方面类来为上述类添加一些特性：

```
template <class I>
class Aspect1 : public I
{
  void doSmth() { I::doSmth(); doSmthMore(); }
  void doSmthMore() { /* do something specific to Aspect1 */ }
};

template <class I>
class Aspect2 : public I
{
  void doSmth() { I::doSmth(); doSmthMore(); }
  void doSmthMore() { /* do something specific to Aspect2 */ }
}; 
```

在特定情况下（`Aspect1`超过`DerivedA`和`DerivedB`）我有以下专业`Aspect1`：

```
template <>
class Aspect1< DerivedA > : public DerivedA
{
  void doSmth() { I::doSmth(); doSmthMore(); doSmthMoreA(); }
  void doSmthMore()  { /* do something specific to Aspect1 */ }
  void doSmthMoreA() { /* do something specific to Aspect1 for DerivedA*/ }
};
// Idem for Aspect1//DerivedB 
```

* * *

**我的问题**

我怎么能确定`Aspect1`for 的特化，比如说`DerivedA`，即使我用`Aspect2<DerivedA>`模板参数输入它也会被编译？

即在配置文件中：

```
typedef Aspect2<Aspect1<DerivedA> > > ClassToBeUsed; // This is OK

typedef Aspect1<Aspect2<DerivedA> > > ClassToBeUsed; // This is not (Aspect1 specialization for DerivedA is not compiled) 
```

一种可能性是从 DerivedA 派生的任何类都使用特化 Aspect1 。有没有办法做到这一点（也许使用一些`boost::is_base_of`和`boost::enable_if`）？

我认为我可以`typedef DerivedA AspectBase;`在`DerivedA`正文中使用一些，但我看不到如何`Aspect1`在模板类参数中通过 typedef 专门化模板类。

感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:41:18.693

您不能，唯一可以确定的方法是是否`Aspect1<DerivedA>`使用了该类型。如果使用，则编译，否则不编译。

# python - 为什么 run() 方法被调用两次来运行测试用例？

> ID：15600388
> 
> 赞同：0
> 
> 时间：2013-03-24T15:34:28.903
> 
> 标签：python, unit-testing, tdd

考虑以下来自 Kent Beck 的书[Test Driven Development](https://rads.stackoverflow.com/amzn/click/com/0321146530) *Chapter 18*中的 Python 代码，他在其中构建了一个用于单元测试的框架。

```
class TestCaseTest(TestCase):
    def testRunning(self):
       test= WasRun("testMethod")
       assert(not test.wasRun)
       test.run() // Here run() is called once
       assert(test.wasRun)
  TestCaseTest("testRunning").run()//Here run() is called again 
```

基类的实现`TestCase`如下所示：

```
TestCase
 def __init__(self, name):
    self.name= name
def  run(self):
    method = getattr(self, self.name)
    method() 
```

1.  为什么`run()`在上面的代码片段中调用了两次方法？
2.  谁在调用该方法`testRunning()`，何时调用？这里只定义了方法，但似乎没有人调用这个方法。

PS：我来自 Java 背景，对 Python 语法本身不太熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:47:25.897

我无法访问您正在谈论的书，因此我将关闭您发布的代码片段。

看起来正在调用两个不同对象上的 run() 方法——一个是 TestCaseTest 类，一个是 WasRun 类（或任何名为 WasRun 的函数返回）。

至于谁在调用 testRunning()，在 TestCaseTest 对象上调用了 .run()，这可能是来自超类 TestCase 的方法。在 TestCase 中查找 run() 并查看 self.testRunning() 是否在那里被调用。

# iphone - UINavigationController Push Segue - 奇怪的动画

> ID：15600389
> 
> 赞同：0
> 
> 时间：2013-03-24T15:34:32.087
> 
> 标签：iphone, objective-c, xcode, uinavigationcontroller, storyboard

我有一个在 Storyboards 中创建的 UINavigationController，并与每个视图控制器的推送序列连接。但是，当我单击“下一步”（激活 push segue）时，前进的动画很奇怪。（参见：[https](https://www.youtube.com/watch?v=0cFo9sUtBeM) ://www.youtube.com/watch?v=0cFo9sUtBeM ）。返回（在 UITabBarController 中选择 UINavController 的根控制器）具有正确的动画。任何想法为什么会这样？

**编辑**：视频中的方框是我添加的，以保护客户身份。详细的动画问题是幻灯片动画，它似乎来自右上角（或“下一步”按钮的左上角）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:37:09.523

似乎在第二个视图控制器上为导航栏设置不同的提示会导致这种奇怪的动画效果。删除提示后，动画现在按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:37:17.927

它看起来像一个导航控制器推送*和*一个模态转换。如果我不得不下注，我猜你有一个模式转换连接到情节提要中的按钮，并且在按钮的操作方法中编写了代码`pushViewController:animated:`- `self.navigationController`（无论是那个还是其他方式，都连接了一个推在故事板中）。

如果是这种情况，请首先注释掉任何按钮操作代码（您在代码中设置的任何目标/选择器，或您在情节提要中为该按钮设置的任何 IBAction）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T04:06:41.123

我最近在使用带有嵌入式导航控制器的主细节故事板时也遇到了这个问题。当我将详细信息屏幕视图的背景从默认更改为不同颜色时，该问题已得到解决。我发现只要不是默认颜色，哪种颜色没有任何区别。我希望这对某人有所帮助。

# jquery - gmaps.js - 如何使用选择过滤标记？

> ID：15600390
> 
> 赞同：0
> 
> 时间：2013-03-24T15:34:33.603
> 
> 标签：jquery, google-maps, google-fusion-tables, gmaps.js

我可以使用 Google Maps JS 过滤没有 gmaps.js 的标记。但是，下面的代码不能与 gmaps.js 一起使用。错误声明：*changeMap 不是函数*。我的业余JS水平无法弄清楚。有任何想法吗？

我当前使用 gmaps.js 的 JS 不正确

```
$(document).ready(function(){
var layer;
var tableid = 2796050;
var map = new GMaps({
el: '#map_canvas',
lat: 33.68906,
lng: -78.886694,
zoom: 11
});
infoWindow = new google.maps.InfoWindow({});
map.loadFromFusionTables({
query: {
select: '\'Location\'',
from: '1LNKdPBYZOlszyjQqzUhoqsQXVdkyQ7pP2o2ft9o'
},
suppressInfoWindows: false,
events: {
click: function(point){
infoWindow.setPosition(point.latLng);
}
}
});
// problem area
function changeMap() {
var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
if(!searchString) {
layer.setQuery("SELECT 'Latitude' FROM " + tableid);
return;
}
layer.setQuery("SELECT 'Latitude' FROM " + tableid + " WHERE 'Category' = '" + searchString + "'");
}
}); 
```

HTML

```
<!-- HTML -->
<form>
<label>Category </label>
<select id="search-string" onchange="changeMap(this.value);">
<option value="">All Places</option>
<option value="Attractions">Attractions</option>
<option value="Dining">Dining</option>
<option value="Shopping">Shopping</option>
<option value="Services">Services</option>
</select>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:55:31.130

为此，您需要在`<script>`HTML 位之前添加块。

由于无论如何您都在使用 jQuery，因此请考虑编写事件而不是`changeMap`函数。首先，`onchange`从 中删除属性`select`。并改变这个：

```
function changeMap() {
    var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
    if(!searchString) {
        layer.setQuery("SELECT 'Latitude' FROM " + tableid);
        return;
    }
    layer.setQuery("SELECT 'Latitude' FROM " + tableid + " WHERE 'Category' = '" + searchString + "'");
} 
```

...对此：

```
$('#search-string').change( function() {
    var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
    if(!searchString) {
        layer.setQuery("SELECT 'Latitude' FROM " + tableid);
        return;
    }
    layer.setQuery("SELECT 'Latitude' FROM " + tableid + " WHERE 'Category' = '" + searchString + "'");
}) 
```

更多信息：[http ://api.jquery.com/change/](http://api.jquery.com/change/)

# c# - 单个页面上的多个 Google 地图

> ID：15600392
> 
> 赞同：0
> 
> 时间：2013-03-24T15:34:38.933
> 
> 标签：c#, javascript, asp.net, google-maps

我想将 Google Maps API 的多个地图添加到我的 C# ASP.NET 应用程序的页面中。但是，使用我当前的代码，只显示最后一张地图。应该包含地图的所有其他 div 都是空的。正如您在我的代码中看到的那样，地图已经有了唯一的名称（不是很好，但它是唯一的）。有人可以解释我做错了什么吗？这将不胜感激。

初始化谷歌：

```
protected void loadGoogle()
{
    var googleScript = "function loadScript() {" +
        "var script = document.createElement(\"script\");" +
        "script.type = \"text/javascript\";" +
        "script.src = \"http://maps.google.com/maps/api/js?sensor=false& callback=initialize\"; " +
        "document.body.appendChild(script);" +
        "}" +
        "window.onload = loadScript;";
    ClientScript.RegisterStartupScript(typeof(Page), "CreateGoogleMapScript", googleScript, true);
} 
```

创建地图（多次调用）：

```
protected void createMap(String mapId, String address)
{
    var script = "function initialize() {" +
        "var geocoder = new google.maps.Geocoder();" +
        "var latlng = new google.maps.LatLng(-34.397, 150.644);" +
        "var mapOptions" + mapId + " = {" +
        "zoom: 16," +
        "center: latlng," +
        "mapTypeId: google.maps.MapTypeId.ROADMAP" +
        "};" +
        " var map" + mapId + " = new google.maps.Map(document.getElementById(" + mapId + "), mapOptions" + mapId + ");" +

        "var address = \"" + address + "\";" +
        "geocoder.geocode( { 'address': address}, function(results, status) {" +
        "if (status == google.maps.GeocoderStatus.OK) {" +
        "map" + mapId + ".setCenter(results[0].geometry.location);" +
        "var marker = new google.maps.Marker({" +
        "map: map" + mapId + "," +
        "position: results[0].geometry.location" +
        "});" +
        "} else {" +
        "alert(\"Geocode was not successful for the following reason: \" + status); " +
        "}" +
        "});" +
        "}";
    ClientScript.RegisterClientScriptBlock(typeof(Page), "CreateMapScript"+mapId, script, true);
} 
```

调用者：

While 循环，其中`literal.Text`添加了一个新的 div，然后是`createMap(mapId, address);`

更新：

我的新代码：

```
 var script = "function initialize() { var geocoder = new google.maps.Geocoder();";                  

            for (int i = 0; i < maps.Count; i++)
            {
                String currentId = maps[i] as String;
                String currentLocation = locations[i] as String;

                script += " " + 
                    "var latlng = new google.maps.LatLng(" + 500 + "," + 400 + ");" +
                    "var myOptions = {" +
                        "zoom: 16," +
                        "center: latlng," +
                        "mapTypeId: google.maps.MapTypeId.ROADMAP" +
                    "};" +                    
                    "var map = new google.maps.Map(document.getElementById(\"" + currentId + "\"), myOptions);" +

                    "var address = \"" + currentLocation + "\";" +
                        "geocoder.geocode( { 'address': address}, function(results, status) {" +
                          "if (status == google.maps.GeocoderStatus.OK) {" +
                            "map.setCenter(results[0].geometry.location);" +
                            "var marker = new google.maps.Marker({" +
                                "map: map," +
                                "position: results[0].geometry.location" +
                            "});" +
                          "} else {" +
                                "alert(\"Geocode was not successful for the following reason: \" + status); " +
                            "}" +
                         "});";
            }
            script += "};"; 
```

现在所有地图都绘制好了，但只有最后一张地图的位置正确。其他的基于 latlng 变量。为什么地理编码器不能多次使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:01:38.993

也许只是最后一个`initialize`功能在浏览器中触发？尝试只使用 1 个初始化函数来初始化所有地图。

# android - 更改共享首选项后更新 UI 时应用程序崩溃

> ID：15600394
> 
> 赞同：1
> 
> 时间：2013-03-24T15:34:47.543
> 
> 标签：android, sharedpreferences, ui-thread

在我的 Activity 的 onCreate 方法中，我注册了一个 onSharedPreferenceChangeListener。活动本身实现 OnSharedPreferenceChangeListener。

更新首选项时，将调用以下方法。

```
@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
    if(key.equals(Configuration.PREF_TIMETABLE_UPDATING)){
        resetView();
    }

}

public void resetView(){
    this.container.removeAllViews();
} 
```

更新某个属性后，此代码会从容器视图中删除所有视图。它适用于我的 Android 4 设备，但在我的 Android 2.2.1 设备上应用程序崩溃：

```
03-24 16:09:00.054: E/AndroidRuntime(1712): FATAL EXCEPTION: AsyncTask #5
03-24 16:09:00.054: E/AndroidRuntime(1712): java.lang.RuntimeException: An error occured while executing doInBackground()
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.lang.Thread.run(Thread.java:1102)
03-24 16:09:00.054: E/AndroidRuntime(1712): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.ViewRoot.checkThread(ViewRoot.java:2824)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.ViewRoot.requestLayout(ViewRoot.java:598)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.View.requestLayout(View.java:8126)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.View.requestLayout(View.java:8126)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.View.requestLayout(View.java:8126)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.View.requestLayout(View.java:8126)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.widget.ScrollView.requestLayout(ScrollView.java:1200)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.View.requestLayout(View.java:8126)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.view.ViewGroup.removeAllViews(ViewGroup.java:2263)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at com.example.TimetableActivity.resetView(TimetableActivity.java:430)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at com.example.TimetableActivity.onSharedPreferenceChanged(TimetableActivity.java:557)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2869)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at com.example.MyHelper.setTimetableUpdate(MyHelper.java:145)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at com.example.webservice.task.LessonFetcherTask.doInBackground(LessonFetcherTask.java:33)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at com.example.webservice.task.LessonFetcherTask.doInBackground(LessonFetcherTask.java:1)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-24 16:09:00.054: E/AndroidRuntime(1712):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-24 16:09:00.054: E/AndroidRuntime(1712):     ... 4 more 
```

如何确保 OnSharedPreferenceChangeListener 调用的方法在 UI 线程上运行？任何有关如何解决此问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:42:18.880

问题是您不知何故进入了一个新线程：

```
Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

确保 UI 命令在 UI 线程上的一种方法是使用 UI 处理程序。（这并不像听起来那么难。）只需放在`removeViews()`Runnable 中并`post()`在任何视图上使用。像这样：

创建一个可运行的：

```
Runnable runnable = new Runnable() {
    @Override
    public void run() {
        resetView();
    }
}; 
```

将其发布到 UI 线程：

```
if(key.equals(Configuration.PREF_TIMETABLE_UPDATING)){
    container.post(runnable);
} 
```

# c# - JSON数据html参数

> ID：15600396
> 
> 赞同：1
> 
> 时间：2013-03-24T15:35:00.153
> 
> 标签：c#, asp.net-mvc, json

为什么 JSON 不适用于 html 文本 (var text_html = ' `<p></p><t></t>`'; ) 但这将是正确的 (var text_html = 'example';)

不工作

```
var text_html = JSON.parse('<p></p><t></t>'); 
```

问题：

```
 function Save() {
        var text_html = '<p></p><t></t>'; 
        $.ajax({
            url: '@Url.Action("DodajTematSave", "StronaGlowna")',
            dataType: "json",
            data: {
                My_Text: text_html
            },
            type: "POST",
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {
                    alert('success');
                }

            }
        });
    }
</script>

public JsonResult DodajTematSave(string My_Text)
        {

            return Json(new { Success = true});
        } 
```

这也行不通

```
var dom_string = '<div>xxx<div>yyy</div></div>';
    var text_html = dom_string.innerText(); 
```

这也行不通

```
<script type="text/javascript">

    function Save() {
        var Temat_controll = $('#Temat').val();

        var Streszczenie_controll = $.parseJSON('<p></p><t></t>'); 

        var PelnyOpis_controll = $('#PelnyOpis').text();

         $.ajaxSetup({
             contentType: "application/json; charset=utf-8",
             dataType: "json"
         });

        $.ajax({
            url: '@Url.Action("DodajTematSave", "StronaGlowna")',
            dataType: "json",
            data: {
                Temat: Temat_controll,
                Streszczenie: Streszczenie_controll,
                PelnyOpis: PelnyOpis_controll
            },
            type: "POST",
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {
                    alert('success');
                }

            }
        });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:56:43.350

尝试这个：

```
var Streszczenie_controll = $.parseJSON('<p></p><t></t>'); 
```

并使用 ajaxSetup 来指示 JQuery 如何处理数据类型

```
 $.ajaxSetup({
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T19:15:01.540

对于对此有问题的人，我可以展示另一种解决此问题的方法，但非常难看[，请单击此处](https://stackoverflow.com/questions/15602665/replace-all-tags/15602705?noredirect=1#15602705)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T15:36:39.470

因为这些是 JSON 中的转义字符。如果您希望它通过 JSON 传递，则必须以某种方式解析 html 以使其对 JSON 友好。

# android - 想从android的INBOX中删除特定号码的消息

> ID：15600397
> 
> 赞同：2
> 
> 时间：2013-03-24T15:35:05.807
> 
> 标签：android, sms, android-service

我想删除特定手机号码中的消息。在安卓手机中。为此，我使用以下代码..

此代码中的问题是它正在删除手机中的所有对话。所以请帮我解决这个问题。提前谢谢...

```
public class MainActivity extends Activity 
```

{

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
//  String specificPhoneNumber = "+91" ;

    super.onCreate(savedInstanceState);
    long V;
    MainActivity thr = new MainActivity();
    V =thr.getThreadId(thr);
    Uri thread = Uri.parse("content://sms/inbox/8767564523" + V);

        getContentResolver().delete(thread, null, null);

}

private long getThreadId(Context context)
    {
        long threadId = 0;

        String SMS_READ_COLUMN = "read";
        String WHERE_CONDITION = SMS_READ_COLUMN + " = 0";
        String SORT_ORDER = "date DESC";
        int count = 0;
        Uri uri1 = Uri.parse("content://sms/inbox/");
        Cursor cursor = context.getContentResolver().query(uri1,new String[] { "_id", "thread_id", "address", "person", "date", "body" },WHERE_CONDITION,null,SORT_ORDER);

        if (cursor != null) {
                try {
                    count = cursor.getCount();
                    if (count > 0) {
                        cursor.moveToFirst();
                        threadId = cursor.getLong(1);                              
                    }
                } finally {
                        cursor.close();
                }
        }

        return threadId;
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:10:48.490

哦...知道了..它正在 100% 工作，

```
public void onReceive(Context context, Intent intent) {
            //Bundle bundle = intent.getExtras();

           // if(null == bundle)
             //       return;
          //  SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);       
            try {
                // Java reflection to gain access to TelephonyManager's
                // ITelephony getter
                tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
                Log.v("1","BYE BYE BYE" );
                Class c = Class.forName(tm.getClass().getName());
                Method m = c.getDeclaredMethod("getITelephony");
                m.setAccessible(true);
               // com.android.internal.telephony.ITelephony 
                telephonyService = (ITelephony) m.invoke(tm);  
                Bundle b = intent.getExtras();
                incommingNumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
                Toast.makeText(context, incommingNumber, Toast.LENGTH_LONG).show();
                Log.v("2","BYE BYE BYE" );
                for(int i=0;i<1;i++)
                {
                if ( incommingNumber.equals(BINO[i]) )
                {

                }
                else{
                    Toast.makeText(context,incommingNumber, Toast.LENGTH_LONG).show();
                     telephonyService = (ITelephony) m.invoke(tm);
                    //telephonyService.silenceRinger();
                    telephonyService.endCall();
                    Log.v("3","BYE BYE BYE" );

                //telephonyService.answerRingingCall();

                }
                }

            } catch (Exception e) {
                e.printStackTrace();

            }
        }
     };//BroadcastReceiver
    /**
     * Broadcast receiver to detect the outgoing calls.
     */
    public class OutgoingReceiver extends BroadcastReceiver 
    {
        public OutgoingReceiver() {
        }

        @Override
        public void onReceive(Context context, Intent intent) 
        {
            String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
       //     setResultData(null);
           int c = (number).indexOf("YOUR NO...");
           Toast.makeText(context, String.valueOf(c), Toast.LENGTH_LONG).show();
           for(int i =0;i<2;i++)
           {

           if ((number).indexOf(BONO[i])!= -1)//||number.contentEquals("+917204302689")||number.contentEquals("07204302689"))
            {
                setResultData(null);
                Toast.makeText(context, "This call is not allowed!", Toast.LENGTH_LONG).show();
            }
           }
        }

    }

    public class MessageReceiver extends BroadcastReceiver
    {
        public void onReceive(Context context, Intent intent) 
         {
             Bundle bundle = intent.getExtras();
             //Bundle bundle = intent.getExtras();

                if ( bundle != null )
                {
                   // do you manipulation on String then if you can abort.

                }
                Object messages[] = (Object[]) bundle.get("pdus");
                SmsMessage smsMessage[] = new SmsMessage[messages.length];

                for (int n = 0; n <messages.length; n++) 
                {
                smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
                }
                for(int i=0;i<1;i++)
                {
                if(MINO[i].equalsIgnoreCase(smsMessage[0].getOriginatingAddress()))
                {
                    //abortBroadcast();
                    String Body=smsMessage[0].getMessageBody();
                    if (Body.startsWith("START"))
                    {
                        Toast toast4 = Toast.makeText(context,"There is START ", Toast.LENGTH_LONG);toast4.show(); 
                        abortBroadcast();
                    }
                }
                else
                {

                    abortBroadcast();   
                }
                }
                // show first message
                Toast toast1 = Toast.makeText(context,"Received SMS: " + smsMessage[0].getOriginatingAddress()+ "\nBody: "+smsMessage[0].getMessageBody(), Toast.LENGTH_LONG);
                toast1.show(); 

         }
         };//BroadcastReceiver

    String incommingNumber;
    private Context ctx;
    private TelephonyManager tm;
    //private CallStateListener callStateListener;
    ITelephony telephonyService;
    private OutgoingReceiver outgoingReceiver;
    private IncomingReceiver incomingReceiver;
    private  MessageReceiver  messageReceiver;

    public CallHelper(Context ctx) 
    {
        this.ctx = ctx;

        //callStateListener = new CallStateListener();
        outgoingReceiver  = new OutgoingReceiver();
        incomingReceiver  = new IncomingReceiver();
        messageReceiver  = new MessageReceiver();
    }

    /**
     * Start calls detection.
     */
    public void start() {
        //tm = (TelephonyManager) ctx.getSystemService(Context.TELEPHONY_SERVICE);
        //tm.listen(callStateListener, PhoneStateListener.LISTEN_CALL_STATE);

        IntentFilter intentFilter = new IntentFilter(Intent.ACTION_NEW_OUTGOING_CALL);
        ctx.registerReceiver(outgoingReceiver, intentFilter);

         IntentFilter filter= new IntentFilter("android.intent.action.PHONE_STATE");
         ctx.registerReceiver(incomingReceiver, filter);

         IntentFilter filter1= new IntentFilter("android.provider.Telephony.SMS_RECEIVED");
         ctx.registerReceiver(messageReceiver, filter1);
    }

    /**
     * Stop calls detection.
     */
    public void stop() 
    {
        //tm.listen(callStateListener, PhoneStateListener.LISTEN_NONE);
        ctx.unregisterReceiver(outgoingReceiver);
        ctx.unregisterReceiver(incomingReceiver);
        ctx.unregisterReceiver(messageReceiver);
    }

} 
```

# windows - 使用 Chef Solo 配置 Windows EC2 实例并引导它

> ID：15600399
> 
> 赞同：4
> 
> 时间：2013-03-24T15:35:13.560
> 
> 标签：windows, amazon-ec2, provisioning, chef-infra, chef-solo

我正在尝试为几个 .NET 应用程序自动化我们的 CI 流程，在一个完美的世界中，我想为每个应用程序启动一个 Windows EC2 实例，引导实例以安装 Chef Solo，然后执行 Chef 配方以安装一些依赖项和打包软件本身。

但是-我是新手，即使可行，也不知道从哪里开始:)

我相当精通 AWS 的命令行工具，因此可以启动 AMI 好，但除此之外，我非常卡住。我想避免构建一个预先安装了 chef 的自定义 AMI，因为这会带走很多优势。

我认为这本质上是我需要做的——但（不出所料）专注于 Linux：

[http://www.opinionatedprogrammer.com/2011/06/chef-solo-tutorial-managing-a-single-server-with-chef/](http://www.opinionatedprogrammer.com/2011/06/chef-solo-tutorial-managing-a-single-server-with-chef/)

有没有人有链接到以前做过这个或类似的人？还是实现我想做的更好的方法？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:37:58.523

好的，这要求您在 AMI 上预安装 Chef：

[http://scottwb.com/blog/2012/12/13/provision-and-bootstrap-windows-ec2-instances-with-chef/](http://scottwb.com/blog/2012/12/13/provision-and-bootstrap-windows-ec2-instances-with-chef/)

但这是*将*Puppet 安装到 Windows AMI 的一种策略，可以很容易地为 Chef 修改：

[http://dansrandombits.blogspot.com/2012/06/bootstrapping-custom-windows-ec2.html](http://dansrandombits.blogspot.com/2012/06/bootstrapping-custom-windows-ec2.html)

我不能说我已经这样做了，但是自从它们发布以来，我都在我的书签栏中，并且一直计划在某个时候至少在我们的开发环境中试一试。似乎只要为 Chef 提供可靠的静默安装，您就可以完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T02:01:55.687

我意识到这篇文章有点老了，但对于那些仍然可能遇到这个的人。我正在使用 Chef-Solo 配置服务器。本质上，我将实例的用户数据配置为下载和安装 Chef，下载食谱/食谱，然后启动 Chef-Solo。

这是我为演示这些步骤而制作的博客文章：http: [//thesysadminswatercooler.blogspot.com/2015/11/aws-bootstrap-windows-ec2-instance-with.html](http://thesysadminswatercooler.blogspot.com/2015/11/aws-bootstrap-windows-ec2-instance-with.html)

# c - 指针和值

> ID：15600400
> 
> 赞同：0
> 
> 时间：2013-03-24T15:35:24.347
> 
> 标签：c, pointers

我编写了以下代码，它正确打印了根值，但不是 ret 值。这里可能会打印一个内存地址（1707388）。我相信现在可以修改 ret，结果将在 main.js 中看到。任何帮助表示赞赏。

```
#include <stdlib.h>

struct node{
int value;
    int order;
    struct node *left;
    struct node *right;
};

typedef struct node node_t;

node_t array[10];

void createTree(node_t *p, int order){
    p->value = rand()%10;
    p->order = order;
    printf("%i", p->value);
    printf(" ");
    printf("%i\n", p->order);
    if (!order){
        p->left = NULL;
        p->right = NULL;
        return; 
    }
    order--;
    createTree(&p->left, order);
    createTree(&p->right, order);
}

void traverse(node_t *current, node_t *ret, int size){
    printf("%i\n", current->value); 
    if (current->value > size){
        ret = current;
        traverse(&current->left, &ret, size);
        traverse(&current->right, &ret, size); 
    } 
    return;
}

int main(void){
    node_t *root = &array[0];
    node_t *ret;
    srand(time(NULL));
    createTree(root, 4);
    int i = 3;
    printf("%s", "root-value: ");
    printf("%i\n", root->value);
    traverse(root, ret, i);
    printf("%s", "root-value: ");
    printf("%i\n", root->value);
    printf("%i\n", ret->value);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:38:02.210

这个：

```
void createTree(node_t *p, int order) 
```

应该

```
void createTree(node_t **p, int order) 
```

否则，您将修改*本地* `node_t`指针，而不是函数外部的指针。你的树也没有正确建造。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T15:38:47.810

您`ret`按价值传递给

```
void traverse(node_t *current, node_t *ret, int size){ 
```

当函数更改`ret`时，更改不会传播回调用者。

这意味着`ret`in`main()`保持未初始化，并且代码的行为未定义。

要解决此问题，请进行`traverse`return`ret`或将其作为`node_t**`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T15:51:23.253

代码几乎没有问题。

首先，您没有为节点正确分配内存。在您的代码中，您传递了错误的指针类型，此外，指向未初始化区域的指针。

在这里，如何以不同的方式使用它：

```
 node_t *createTree(int order)
 {
     node_t *result = malloc(sizeof(*result));
     result->value = rand() % 10;
     result->order = order;
     if (order)
     {
         result->left = createTree(order - 1);
         result->right = createTree(order - 1);
     }
     else
     {
         result->left = result->right = 0;
     }
     return result;
 } 
```

然后，您的遍历功能需要一些块来限制再次失败的搜索：

```
node_t *traverse(node_t *current, int size)
{
    node_t *ret = NULL;

    if (current->value > size)
    {
        // assuming current node fit - stops the search
        ret = current;
    } 

    if (!ret && current->left)
    {
        // try left node
        ret = traverse(current->left, size);
    }
    if (!ret && current->right)
    {
        // try right node
        ret = traverse(current->right, size); 
    }
    return ret;
} 
```

如果你需要（通常你会这样做），这里有一个`destroyTree`：

```
void destroyTree(node_t *node)
{
    if (!node) return; // we treat NULL as a valid pointer for simplicity

    destroyTree(node->left);
    destroyTree(node->right);
    free(node);
} 
```

这是一个使用示例：

```
node_t *root, *found;

root = createTree(4);
found = traverse(root, 3);
if (found)
{
   printf("Found!");
}
destroyTree(root); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T16:03:31.130

在`traverse(node_t *current, node_t *ret, int size)`，`ret`是一个堆栈变量。换句话说，您**通过 value传递指针，而不是****通过 reference**传递它。

你目前所做的基本上是一样的：

```
int f(int i) {
   ...
   i = <any value>;
   ...
} 
```

在这种情况下，您只修改了值的副本。

在您的程序中，您还修改了指针的副本。在函数之外，指针保持不变。

如果你想修改它，你需要传递一个指向它的指针：

```
void traverse(node_t *current, node_t **ret, int size){
    ...
    *ret = current;
    ...
    return;
} 
```

对于`createTree()`.

# port - 点对点：Windows 机器上的端口

> ID：15600401
> 
> 赞同：0
> 
> 时间：2013-03-24T15:35:26.653
> 
> 标签：port, p2p

我正在我的机器上构建一个对等网络，其中节点将监听不同的端口。

我知道在 Windows 机器上 1024 以上的端口可用，但究竟有多少 1024 以上的端口可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:17:12.907

端口号由短数据类型表示，所以它应该是![在此处输入图像描述](../Images/cb915a71077cd13b657accdb7229c3af.png)

所以端口最多可达 65535。

# javascript - 纯 Javascript：onClick 切换行/图像：Firefox/Chrome - 有效：IE - 无效

> ID：15600404
> 
> 赞同：0
> 
> 时间：2013-03-24T15:35:38.377
> 
> 标签：javascript, image, internet-explorer, google-chrome, firefox

从 Zeb Rawnsley 那里得到了一些很大的帮助（你太棒了！）解决了我当前的问题。

使用一些代码允许通过图像后面的可折叠链接隐藏从属行。这在 Firefox 和 Chrome 中运行良好，但图像在 IE 中的第一次迭代后不会交替（IE 8 特别是我公司的标准）。

感兴趣的部分在这里（我认为）：

`var closedImgHTML = "<img name=\"togglepicture\" src=\"http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_closed_folder.png\" border=\"0\" height=\"50\">";`

`var openImgHTML = "<img name=\"togglepicture\" src=\"http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_open_folder.png\" border=\"0\" height=\"50\">";`

可能在这里（但我不这么认为）：

```
lnk.innerHTML =(lnk.innerHTML == openImgHTML)?closedImgHTML:openImgHTML; 
```

此 CodePen 适用于工作版本（Firefox/Chrome）：

[http://codepen.io/anon/pen/yjLvh](http://codepen.io/anon/pen/yjLvh)

这是工作版本的 HTML：

```
<html>
<head>
<style type="text/css">
table { empty-cells: show; }
cell {font-family:'Calibri';font-size:11.0pt;color: #000000;}
TD{font-family: Calibri; font-size: 10.5pt;}
TH{font-family: Calibri; font-size: 10.5pt; }
</style>

</head>
<body>
<SCRIPT type=text/javascript> 
var tbl;
var toggleimage=new Array("http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_open_folder.png","http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_closed_folder.png")

  var closedImgHTML = "<img name=\"togglepicture\" src=\"http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_closed_folder.png\" border=\"0\" height=\"50\">";

  var openImgHTML = "<img name=\"togglepicture\" src=\"http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_open_folder.png\" border=\"0\" height=\"50\">";

function trim(str){
 return str.replace(/^\s*|\s*$/g,"");
}

function getParent(el, pTagName) {
 if (el == null) return null;
 else if (el.nodeType == 1 && el.tagName.toLowerCase() == pTagName.toLowerCase()) // Gecko bug, supposed to be uppercase
  return el;
 else
  return getParent(el.parentNode, pTagName);
}

function toggleSection(lnk){

 var td = lnk.parentNode;
 var table = getParent(td,'TABLE');
 var len = table.rows.length;
 var tr = getParent(td, 'tr');
 var rowIndex = tr.rowIndex;
 var rowHead=table.rows[rowIndex].cells[1].innerHTML;

lnk.innerHTML =(lnk.innerHTML == openImgHTML)?closedImgHTML:openImgHTML;

 vStyle =(tbl.rows[rowIndex+1].style.display=='none')?'':'none';

 for(var i = rowIndex+1; i < len;i++){
  if (table.rows[i].cells[1].innerHTML==rowHead){
    table.rows[i].style.display= vStyle;
    table.rows[i].cells[1].style.visibility="hidden";
  }
 }
}

function toggleRows(){
    tables =document.getElementsByTagName("table");
    for(i =0; i<tables.length;i++){
      if(tables[i].className.indexOf("expandable") != -1)
        tbl =tables[i];
    }
    if(typeof tbl=='undefined'){
     alert("Could not find a table of expandable class");
     return;
    }

//assume the first row is headings and the first column is empty
 var len = tbl.rows.length;
var link ='<a href="#" onclick="toggleSection(this);return false;" style="text-decoration: none">'+closedImgHTML+'</a>';

 var rowHead = tbl.rows[1].cells[1].innerHTML;

 for (j=1; j<len;j++){
  //check the value in each row of column 2
  var m = tbl.rows[j].cells[1].innerHTML;

if(m!=rowHead || j==1){
   rowHead=m;
   tbl.rows[j].cells[0].innerHTML = link;
//   tbl.rows[j].cells[0].style.textAlign="center";
   tbl.rows[j].style.background = "#FFFFFF";
  }
else
   tbl.rows[j].style.display = "none";
}

}
var oldEvt = window.onload;

var preload_image_1=new Image()
var preload_image_2=new Image()
preload_image_1.src=toggleimage[0]
preload_image_2.src=toggleimage[1]
var i_image=0

function testloading() {
    isloaded=true
}

function toggle() {
    if (isloaded) {
        document.togglepicture.src=toggleimage[i_image]
    }
    i_image++
    if (i_image>1) {i_image=0}
}

window.onload = function() { if (oldEvt) oldEvt(); toggleRows(); testloading();}

</SCRIPT>

<TABLE class=expandable width="400px" border="1"  cellspacing="0" frame="box" rules="all" >
  <THEAD>
  <TR>
    <TH  bgColor="#E6E4D4">&nbsp;</TH>
    <TH bgColor="#E6E4D4" align="left">Manager</TH>
    <TH bgColor="#E6E4D4" align="left">Sales Rep</TH>
    <TH bgColor="#E6E4D4" align="left">Amount </TH></TR>
</THEAD>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD>Sarah Jones</TD>
    <TD><i>Georgia District Reps</i></TD>
    <TD>500000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>Sarah Jones</TD>
    <TD>Rex Smtih</TD>
    <TD>350000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>Sarah Jones</TD>
    <TD>Alex Anderson</TD>
    <TD>150000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>William Hobby</TD>
    <TD><i>Texas District Reps</i></TD>
    <TD>630000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>William Hobby</TD>
    <TD>Bill Smith</TD>
    <TD>410000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>William Hobby</TD>
    <TD>Simon Wilkes</TD>
    <TD>220000</TD></TR>
</TBODY></font></TABLE>
<br>
<br>
<a href="javascript:toggle()"></a>

</body>
</html> 
```

没有图像的先前代码集（使用文本打开/关闭）在所有浏览器中都可以正常工作。

不确定 IE 中是否存在图像语法问题或其他问题。它肯定专注于图像，因为它在没有图像的情况下也能正常工作。

这是在 IE（和其他）中工作的版本（基于文本）的 CodePen。

[http://codepen.io/anon/pen/morpF](http://codepen.io/anon/pen/morpF)

这是“ALL”浏览器版本的 HTML”

```
<html>
<head>
<style type="text/css">
table { empty-cells: show; }
cell {font-family:'Calibri';font-size:11.0pt;color: #000000;}
TD{font-family: Calibri; font-size: 10.5pt;}
TH{font-family: Calibri; font-size: 10.5pt; }
</style>

</head>
<body>
<SCRIPT type=text/javascript> 
var tbl;

function trim(str){
 return str.replace(/^\s*|\s*$/g,"");
}

function getParent(el, pTagName) {
 if (el == null) return null;
 else if (el.nodeType == 1 && el.tagName.toLowerCase() == pTagName.toLowerCase()) // Gecko bug, supposed to be uppercase
  return el;
 else
  return getParent(el.parentNode, pTagName);
}

function toggleSection(lnk){

 var td = lnk.parentNode;
 var table = getParent(td,'TABLE');
 var len = table.rows.length;
 var tr = getParent(td, 'tr');
 var rowIndex = tr.rowIndex;
 var rowHead=table.rows[rowIndex].cells[1].innerHTML;

 lnk.innerHTML =(lnk.innerHTML == "+")?"--":"+";

 vStyle =(tbl.rows[rowIndex+1].style.display=='none')?'':'none';

 for(var i = rowIndex+1; i < len;i++){
  if (table.rows[i].cells[1].innerHTML==rowHead){
    table.rows[i].style.display= vStyle;
    table.rows[i].cells[1].style.visibility="hidden";
  }
 }
}

function toggleRows(){
    tables =document.getElementsByTagName("table");
    for(i =0; i<tables.length;i++){
      if(tables[i].className.indexOf("expandable") != -1)
        tbl =tables[i];
    }
    if(typeof tbl=='undefined'){
     alert("Could not find a table of expandable class");
     return;
    }

//assume the first row is headings and the first column is empty
 var len = tbl.rows.length;
 var link ='<a href="#" onclick="toggleSection(this);return false;" style="text-decoration: none">+</a>';

 var rowHead = tbl.rows[1].cells[1].innerHTML;

 for (j=1; j<len;j++){
  //check the value in each row of column 2
  var m = tbl.rows[j].cells[1].innerHTML;

if(m!=rowHead || j==1){
   rowHead=m;
   tbl.rows[j].cells[0].innerHTML = link;
//   tbl.rows[j].cells[0].style.textAlign="center";
   tbl.rows[j].style.background = "#FFFFFF";
  }
else
   tbl.rows[j].style.display = "none";
}

}
var oldEvt = window.onload;
window.onload = function() { if (oldEvt) oldEvt(); toggleRows();}
</SCRIPT>

<TABLE class=expandable width="400px" border="1"  cellspacing="0" frame="box" rules="all" >
  <THEAD>
  <TR>
    <TH width="10%"  bgColor="#E6E4D4">&nbsp;</TH>
    <TH bgColor="#E6E4D4" align="left">Manager</TH>
    <TH bgColor="#E6E4D4" align="left">Sales Rep</TH>
    <TH bgColor="#E6E4D4" align="left">Amount </TH></TR></THEAD>
  <TBODY>
  <TR class="cell">
    <TD>&nbsp;</TD>
    <TD>Sarah Jones</TD>
    <TD>&nbsp</TD>
    <TD>500000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>Sarah Jones</TD>
    <TD>Rex Smtih</TD>
    <TD>350000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>Sarah Jones</TD>
    <TD>Alex Anderson</TD>
    <TD>150000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>William Jones</TD>
    <TD>&nbsp;</TD>
    <TD>620000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>William Jones</TD>
    <TD>Bill Smith</TD>
    <TD>410000</TD></TR>
  <TR>
    <TD>&nbsp;</TD>
    <TD>William Jones</TD>
    <TD>Simon Wilkes</TD>
    <TD>220000</TD></TR>
</TBODY></font></TABLE></body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:02:25.557

不同的浏览器对 DOM 进行不同的序列化。在 IE10 中运行你的代码给了我这个：

```
foo.innerHTML = "<img name=\"togglepicture\" src=\"http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_open_folder.png\" border=\"0\" height=\"50\">";

foo.innerHTML; // <img name="togglepicture" height="50" src="http://www.iconlooker.com/user-content/uploads/wall/thumb/misc._icons_open_folder.png" border="0"> 
```

IE 重新排列了属性，因此您不再拥有相同的字符串。

不要在链接元素中获取 HTML，而是获取图像本身并查看其`src`属性。

# unix - 无法识别的令牌

> ID：15600407
> 
> 赞同：1
> 
> 时间：2013-03-24T15:35:44.547
> 
> 标签：unix, token, cat

这个命令有什么作用？

```
< cit cat - cot > cit 
```

我必须做什么才能使命令起作用？我只知道猫，谁能告诉我cit和cot是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:45:23.500

如果你不知道命令做什么，你怎么能问`What do I have to do to make the command work`。你究竟想做什么？

* * *

**演示：**

两者都不是命令，它们是文件`cit`。`cot`

```
$ cat cit
This is cit

$ cat cot
This is cot 
```

命令：

```
$ < cit cat - cot
This is cit
This is cot 
```

只是一种奇怪的做法：

```
$ cat cit cot 
This is cit
This is cot 
```

The`>`是一个重定向运算符，用于重定向`cat`into的输出，`cit`但是当您写入正在读取的文件时，这会产生意想不到的结果：

```
$ cat cit
This is cot 
```

看到原来的内容`cit`丢失了，只`cot`写了的内容。`cot`不受影响：

```
$ cat cot
This is cot 
```

如果这是所需的行为，您应该查看复制命令`cp`：

```
$ cp cot cit 
```

如果所需的行为是连接，`cit`那么`cot`您需要使用临时文件来避免[破坏](http://en.wikipedia.org/wiki/Clobbering)：

```
$ cat cit cot > tmp
$ mv tmp cit 
```

您也可以使用逻辑和运算符来执行此操作`&&`：

```
$ cat cit cot > tmp && mv tmp cit 
```

# android - Eclipse 无法解析cordova 2.1.0 文件的导入

> ID：15600409
> 
> 赞同：1
> 
> 时间：2013-03-24T15:35:48.670
> 
> 标签：android, eclipse, cordova, phonegap-plugins

我想在我的 Cordova 2.1.0 应用程序中使用 Android [InAppBilling](https://github.com/poiuytrez/AndroidInAppBilling)插件。

**来源：** [https ://github.com/poiuytrez/AndroidInAppBilling](https://github.com/poiuytrez/AndroidInAppBilling)

我正在遵循所有说明步骤，但 Eclipse 显示错误：

```
for CordovaAbstractBillingObserver.java:
The import org.apache.cordova.api.CallbackContext;  cannot be resolved

for InAppBillingPlugin.java
The import org.apache.cordova.api.CallbackContext;  cannot be resolved
The import org.apache.cordova.api.CordovaPlugin;  cannot be resolved 
```

如何解决这些错误？

它真的很奇怪的错误，因为我已经添加了cordova jar 文件作为库，并且错误没有修复。请问有人知道是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:58:37.940

您必须确保您的 cordova.jar 库已正确包含在您的构建路径中（项目 --> 构建路径 --> 配置构建路径。在库选项卡下，单击添加 Jar 或添加外部 JAR 并提供 cordova.jar 文件）。

我还建议**至少升级到 Cordova 2.3**（为 Cordova 2.3 制作的插件）。

# rvm - 如何下载最新的jruby

> ID：15600418
> 
> 赞同：0
> 
> 时间：2013-03-24T15:36:50.580
> 
> 标签：rvm, jruby

以下命令下载1.7.2，但我需要拉取最新版本。我该怎么做？

```
rvm install jruby
http://jruby.org.s3.amazonaws.com/downloads/1.7.2/jruby-bin-1.7.2.tar.gz - #configure
jruby-1.7.2 - #download 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:07:24.510

您需要更新 RVM：

```
rvm get head
rvm install jruby 
```

# php - Cookie 与 MySQL 保存

> ID：15600421
> 
> 赞同：1
> 
> 时间：2013-03-24T15:37:05.507
> 
> 标签：php, mysql, cookies

我想这更多只是个人喜好问题，但我真的很关心性能。我正在做一个小项目，人们可以做的一件事就是回复活动。现在我知道人们选择的选项（参加或不参加）必须存储在数据库中，但为了使网站看起来更好一点，我还希望允许某人参加的按钮在他们单击时切换为不参加。

在这一点上，我正在考虑三个选项，要么查询数据库，要么确定此人是否正在参加，然后显示相应的按钮。-或者- 我可以将信息保存在 cookie 中，然后祈祷用户不要删除信息。-或者- 我可以将信息保存在 cookie 中，如果 cookie 存在则显示 cookie 中的任何内容，如果不存在则查询数据库。选项 3 对我来说似乎是最好的。

我总是会检查主要网站并查看他们使用的一些技术。他们倾向于将 cookie 数量保持在 20 以下。选项 3 有什么不好的地方，还是我应该采用的方式。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:45:15.607

如果您使用 cookie，您可以预期会有其他人使用相同的机器、相同的用户帐户、相同的浏览器、相同的设置。也可能有人使用不同的浏览器。也可以有两个人共享两台计算机。

如果用户登录你可以使用会话，当然是cookie，但是你可以识别用户，所以他知道“不是我”。

关于性能：如果您设置了 cookie，则通过 http 标头和响应获取它然后发送它也需要时间。但最好的想法是对此进行基准测试。由于访问 db 的时间很短，并且出于我之前所说的原因，我会使用 db.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:44:56.740

如果没有关于人们如何访问该网站的详细信息，无论他们是否登录，很难说，但我会同意你的第三个选项 - 如果我什么都没有，首先查询 cookie，查询数据库 - 它的工作原理是只要没有两个人使用相同的计算机会话。

另一个可能有效（或不取决于您的网络应用程序）的选项是拥有个性化链接。如果人们从带有类似于此 http://example.com/[eventid]/[uniquecode] 的 url 的电子邮件链接访问您的网站，这可以很好地工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:42:52.943

将其存储在数据库中。如果用户在第二台机器上登录并更改了状态，当他们回到第一台机器时会显示错误的状态。

# javascript - Javascript 在 javascript 变量上应用 xsl

> ID：15600428
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:37:47.927
> 
> 标签：javascript, xslt

我想将 xsl（在同一 js 路径中）应用于 javascript 变量（包含有效的 xml 值）并将结果分配给另一个变量。在 chrome 上工作应该没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:36:39.850

基本上 Mozilla、Opera、Safari、Chrome 支持相同的方法：

```
var doc = new DOMParser().parseFromString(yourVarWithXml, 'application/xml');

var proc = new XSLTProcessor();
var req = new XMLHttpRequest();
req.open('GET', 'sheet.xsl', false);
req.send();
proc.importStylesheet(req.responseXML);

var transformationResult = proc.transformToDocument(doc); 
```

这将为您提供作为 DOM 文档的转换结果，具体取决于您可能希望转换为当前 HTML 文档的片段的需要，例如

```
var fragment = proc.transformToFragment(doc, document); 
```

这样你就可以做

```
document.body.appendChild(fragment); 
```

# delphi - Delphi：允许水平/垂直滚动条显示标准弹出菜单？

> ID：15600429
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:37:48.317
> 
> 标签：delphi

我用的是德尔福7。我使用自定义[备忘录控件](http://econtrol.ru)，TSyntaxMemo 组件。

我看到许多应用程序（记事本、Notepad++、uTorrent、...）使用标准的滚动条弹出菜单：

*   滚动到这里
*   向上
*   下
*   向上翻页
*   向下翻页
*   向上滑动
*   向下滚动

（这是垂直条的列表）。如何在“我的”备忘录中使用此类菜单作为滚动条？没有手工制作这些菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:46:03.383

您根本不需要做任何事情来使该菜单显示在 Windows`EDIT`控件中。这是由控件实现的标准系统菜单。它出现在`TMemo`添加到普通 VCL 表单应用程序中，因为它是控件`TMemo`多行变体的简单包装器。`EDIT`

![在此处输入图像描述](../Images/c45f42a2a33298a0f0e50830a0cdaf53.png)

这是我的 .dfm 文件中所需的全部内容：

```
object Form1: TForm1
  object Memo1: TMemo
    Align = alClient
    ScrollBars = ssVertical
  end
end 
```

这是系统提供的功能。如果您的控件没有那样做，那么我可以想到以下原因：

1.  您的控件不是 Windows`EDIT`控件。
2.  您的控件是一个`EDIT`控件，但它没有使用导致此菜单的默认消息处理程序。

如果第 1 项是原因，那么您无法让系统显示菜单。如果你的控件不是一个`EDIT`控件，你几乎不能指望它会神奇地表现得像一个控件。在第 2 项的情况下，您需要确定控件如何停止导致菜单由控件的默认消息处理程序处理的消息。

# html - LocalStorage 在 PhoneGap 上不起作用

> ID：15600432
> 
> 赞同：5
> 
> 时间：2013-03-24T15:37:57.680
> 
> 标签：html, cordova, local-storage, w3c

我创建了一个 LocalStorage 的示例。当我使用 Chrome 网络浏览器时，它工作正常。但是当我在 iPhone 模拟器上测试时，它没有。请帮忙。这是我设置本地存储值的代码：

```
function onclick(){
    window.localStorage.setItem("data","Nguyen Minh Binh");
} 
```

===========

```
 <!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
            <script src="cordova-2.5.0.js"></script>

            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" />
            <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
            <script src="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.js"></script>
            <script src="js/index.js" type="text/javascript"    ></script>
    </head> 

    <body> 
        <a data-role="button" href="DemoWOrklightJQM/index.html"  data-prefetch onclick="onclick()">Click me</a>
    </body>
</html> 
```

这是我尝试获取保存数据的代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
            <title>DemoSimpleControls</title>
            <meta name="viewport"
                content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
                <link rel="shortcut icon" href="images/favicon.png">
                    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
                        <link href="jqueryMobile/jquery.mobile-1.3.0.css" rel="stylesheet">
                            <link rel="stylesheet" href="css/DemoSimpleControls.css">
                                <script>
                                    window.$ = window.jQuery = WLJQ;
                                    </script>
                                <script src="jqueryMobile/jquery.mobile-1.3.0.js"></script>
                                <script src="../js/jquery-1.9.1.min.js"></script>
                                <script>
                                    $(document).ready(function(){
                                                      $("#mysavedData").html("XYZ");
                                                      $("#mysavedData").html(window.localStorage.getItem("data"));
                                                      });

                                </script>
                                </head>

    <body id="content" >
        <div data-role="page" id="page">
            <div data-role="header" >
                <a data-rel="back" href="#" >Back</a>
                <h1>My page</h1>

            </div>
            <div data-role="content" style="padding: 15px" data-theme="e">
                <div id="mysavedData">My data</div>

                        <a href="#" onclick="getData(); return false;" data-role="button" id="button" data-theme="a" data-icon="home" data-iconpos="left" data-corners="true">Button</a>
            </div>

        </div>
    </body>
</html> 
```

编辑：在 Whizkid747 的建议下，我将脚本源更改如下，但它仍然不起作用。

```
 <!DOCTYPE HTML>
    <html>
        <head>
            <meta charset="UTF-8">
                <title>DemoSimpleControls</title>
                <meta name="

viewport"
                content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
                <link rel="shortcut icon" href="images/favicon.png">
                    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
                        <link href="jqueryMobile/jquery.mobile-1.3.0.css" rel="stylesheet">
                            <link rel="stylesheet" href="css/DemoSimpleControls.css">

                                <script src="jqueryMobile/jquery.mobile-1.3.0.js"></script>
                                <script src="../js/jquery-1.9.1.min.js"></script>
                                < script  type="text/javascript" charset="utf-8" src="../cordova-2.5.0.js"></script>
                                <script type="text/javascript" charset="utf-8">
                                    function onLoad(){
                                        document.addEventListener("deviceready", deviceready, false);
                                    }
                                    function deviceready(){
                                        $("#mysavedData").html("XYZ");
                                        $("#mysavedData").html(window.localStorage.getItem("data"));
                                    }

                                </script>
                                </head>

    <body id="content" onLoad="onLoad();" >
        <div data-role="page" id="page">
            <div data-role="header" >
                <a data-rel="back" href="#" >Back</a>
                <h1>My page</h1>

            </div>
            <div data-role="content" style="padding: 15px" data-theme="e">
                <div id="mysavedData">My data</div>

                        <a href="#" onclick="getData(); return false;" data-role="button" id="button" data-theme="a" data-icon="home" data-iconpos="left" data-corners="true">Button</a>
            </div>

        </div>
    </body>
</html> 
```

EDIT2：尝试在 OnDeviceReady 设置 localStorage 然后在下一行获取它，但仍然不起作用。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Contact Example</title>
        <script src="js/jquery-1.9.1.min.js">
            </script>
        <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
        <script src="https://raw.github.com/phonegap/phonegap/2.5.0rc1/lib/android/cordova-2.5.0rc1.js"></script>
        <script type="text/javascript" charset="utf-8">

            // Wait for PhoneGap to load
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // PhoneGap is ready
            //
            function onDeviceReady() {
                window.localStorage.setItem("key", "minhbinh");
                var keyname = window.localStorage.key(i);
                // keyname is now equal to "key"
                var value = window.localStorage.getItem("key");
                // value is now equal to "value"
                window.localStorage.removeItem("key");
                window.localStorage.clear();
                // localStorage is now empty
                $("p#p1").text(value);
            }

            </script>
    </head>
    <body>
        <h1>Example</h1>
        <p id="p1">localStorage</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T15:42:20.197

将 document.ready 中的代码移动到[PhoneGap 的 onDeviceReady 事件](http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#deviceready)。onDeviceReady 是您需要开始执行自定义代码的时候。

**编辑：** **尝试下面的代码，在本地添加cordova.js，而不是从github* *

```
<!DOCTYPE html>
<html>
    <head>
        <title>Contact Example</title>
        <script src="js/jquery-1.9.1.min.js">
            </script>
        <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
        <script src="cordova-2.5.0rc1.js"></script>

    </head>
    <body>
        <h1>Example</h1>
        <p id="p1">localStorage</p>
        <script type="text/javascript">

            // Wait for PhoneGap to load

            document.addEventListener("deviceready", onDeviceReady, false);

            // PhoneGap is ready

            function onDeviceReady() {
                window.localStorage.setItem("key", "minhbinh");
                var keyname = window.localStorage.key(i);
                // keyname is now equal to "key"
                var value = window.localStorage.getItem("key");
                // value is now equal to "value"
                //window.localStorage.removeItem("key");
                //window.localStorage.clear();
                // localStorage is now empty
                $("p#p1").text(value);
            }

         </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:14:30.630

在 iOS 6 上运行 Cordova 2.1（在 2.2 中修复）时出现问题：第一次运行应用程序时初始化本地存储不起作用。

请检查此解决方案： [http ://www.x-services.nl/cordova-localstorage-cleared-after-first-app-launch-ios6/369](http://www.x-services.nl/cordova-localstorage-cleared-after-first-app-launch-ios6/369)

# z3 - Z3中AC符号的简化：bvadd vs bvxor/bvor/etc

> ID：15600436
> 
> 赞同：2
> 
> 时间：2013-03-24T15:38:03.767
> 
> 标签：z3

我想知道为什么 Z3 能够通过在某些情况下应用结合性和交换性 (AC) 公理来证明一些微不足道的等式，而在其他情况下则不行。例如，

```
(simplify (= (bvadd x (bvadd y z)) (bvadd z (bvadd y x)))) 
```

[减少到 true](http://rise4fun.com/Z3/gtXZ)，但是

```
(simplify (= (bvxor x (bvxor y z)) (bvxor z (bvxor y x)))) 
```

[没有](http://rise4fun.com/Z3/6gwj)（Z3 只是扁平化了 bvxor 应用程序）。

我查看了源代码（src/ast/bv_decl_plugin.cpp），bvadd 和 bvxor 都被声明为 AC 符号。它与应用于每个符号的重写规则有关吗？特别是，mk_bv_add (src/ast/rewriter/bv_rewriter.cpp) 调用 mk_add_core (src/ast/simplifier/poly_simplifier_plugin.cpp) 将 bvadd 项处理为单项式的总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:30:37.030

是的，它与应用于符号的重写规则有关。Z3 有两个表达式简化器：`src/ast/rewriter`和`src/ast/simplifier`. 这`src/ast/simplifier`是遗留的，它没有在新代码中使用。`simplify`SMT-LIB 前端中的命令基于`src/ast/rewriter`. `mk_bv_add`实际上是使用`mk_add_core`in `src/ast/rewriter/poly_rewriter.h`。

更改代码以强制 Z3 将`bvxor`您问题中的表达式简化为`true`. 我们只需要在`src/ast/rewriter/bv_rewriter.h`. 新行只是对`bvxor`参数进行排序。这对任何 AC 操作员来说都是正确的重写。

```
br_status bv_rewriter::mk_bv_xor(unsigned num, expr * const * args, expr_ref & result) {
    SASSERT(num > 0);
    ...
    default:
        // NEW LINE
        std::sort(new_args.begin(), new_args.end(), ast_to_lt());
        //
        result = m_util.mk_bv_xor(new_args.size(), new_args.c_ptr());
        return BR_DONE;
    }
} 
```

话虽如此，Z3 重写器不应该应用所有可能的简化和/或产生规范的范式。他们的主要目标是生成可能更易于求解的公式。规则基于需求增长（例如，Z3 在示例 X 中太慢，性能问题可以通过应用新的预处理规则“修复”），或基于用户请求。因此，如果您认为这是一个有用的功能，我们可以添加一个选项，对每个 AC 运算符的参数进行排序。

**编辑**

*更正*：我们还必须修改以下语句

```
if (!merged && !flattened && (num_coeffs == 0 || (num_coeffs == 1 && !v1.is_zero() && v1 != (rational::power_of_two(sz) - numeral(1))))
    return BR_FAILED; 
```

`mk_bv_xor`当现有的重写规则都不适用时，此语句会中断 的执行。我们还必须对其进行修改。[我在这里](http://z3.codeplex.com/SourceControl/changeset/a71bb549c616)实现了这些修改。我们可以使用新选项来激活它们`:bv-sort-ac`。默认情况下*不*启用此选项。新选项在`unstable`(work-in-progress) 分支中可用。当设置为 true 时，它​​将对位向量 AC 运算符进行排序。请注意，该`unstable`分支使用了新的参数设置框架，该框架将在下一个正式版本中提供。 [以下](http://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)是有关如何构建`unstable`分支的说明。这些修改也将在本周的[夜间版本](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html)中提供。

以下是一些使用新选项的示例：

```
(declare-const a (_ BitVec 8))
(declare-const b (_ BitVec 8))
(declare-const c (_ BitVec 8))
(declare-const d (_ BitVec 8))

(simplify (= (bvxor a b c) (bvxor b a c)))
(simplify (= (bvxor a b c) (bvxor b a c)) :bv-sort-ac true)
(simplify (= (bvxor a (bvxor b c)) (bvxor b a c)) :bv-sort-ac true)

(simplify (= (bvor a b c) (bvor b a c)))
(simplify (= (bvor a b c) (bvor b a c)) :bv-sort-ac true)
(simplify (= (bvor a (bvor b c)) (bvor b a c)) :bv-sort-ac true)

(simplify (= (bvand a b c) (bvand b a c)))
(simplify (= (bvand a b c) (bvand b a c)) :bv-sort-ac true)
(simplify (= (bvand a (bvand b c)) (bvand b a c)) :bv-sort-ac true)

; In the new parameter setting framework, each module has its own parameters.
; The bv-sort-ac is a parameter of the "rewriter" framework.
(set-option :rewriter.bv-sort-ac true)

; Now, Z3 will rewrite the following formula to true even when we do not provide
; the option :bv-sort-ac true
(simplify (= (bvand a b c) (bvand b a c)))

; It will also simplify the following assertion.
(assert (= (bvand a b c) (bvand b a c)))

(check-sat) 
```

**结束编辑**

# jquery - jQuery Validate 插件，如果另一个字段为空，则一个字段必须为空

> ID：15600437
> 
> 赞同：0
> 
> 时间：2013-03-24T15:38:05.397
> 
> 标签：jquery, jquery-validate

我有一个包含多个地址字段的表单。如果前一个字段已填写，我只想允许在一个字段中输入。我正在使用 jquery validate，并希望继续这样做。这个想法是，虽然这些字段实际上都不是必需的，除了第一个，你不能在其余部分留下空白。因此，如果字段 3 为空白，则字段 4 中不能有数据。一种方法可能是仅在将数据输入前一个字段时启用字段，但不确定如何在此上下文中执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:07:57.463

你的解释有些不清楚。我从来没有听说过有人故意让字段保持空白......要么他们是，`required`要么他们是`optional`。

这是一个两部分的答案：

1) 展示如何使用`depends`选项以及`:filled`自`:blank`定义选择器。因此，规则的应用可能取决于另一个字段是填写还是留空。

2) 展示了如何编写自定义规则，如果该字段不为空，则会给出错误。

最后的 jsFiddle 结合了这两者。

* * *

[您可以使用`depends`函数](http://docs.jquery.com/Plugins/Validation/validate#toptions)使`required`规则依赖于另一个字段。

在此示例中，所有字段最初都是“可选的”。然而，每一个都依赖于前一个。如果`field #1`已填充，则`field #2`变为`required`等。 [您还可以使用`:blank`自定义选择器代替`:filled`来检查相反的](http://docs.jquery.com/Plugins/Validation#Custom_selectors)。

您可以更改此设置以适应几乎任何情况。

**演示：http: [//jsfiddle.net/Rvhmd/](http://jsfiddle.net/Rvhmd/)**

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            field2: {
                required: {
                    depends: function (element) {
                        return $("#field1").is(":filled");
                    }
                }
            },
            field3: {
                required: {
                    depends: function (element) {
                        return $("#field2").is(":filled");
                    }
                }
            },
            field4: {
                required: {
                    depends: function (element) {
                        return $("#field3").is(":filled");
                    }
                }
            }
        }
    });

}); 
```

**HTML**：

```
<form id="myform">
    <input type="text" name="field1" id="field1" />
    <input type="text" name="field2" id="field2" />
    <input type="text" name="field3" id="field3" />
    <input type="text" name="field4" id="field4" />
    <input type="submit" />
</form> 
```

* * *

为了向 OP 提供他所要求的内容，这里有一个自定义方法/规则`empty`，如果该字段不为空，则会给出错误。

```
$(document).ready(function () {

    $.validator.addMethod('empty', function(value, element) {
        return (value === '');
    }, "This field must remain empty!");

    $('#myform').validate({ // initialize the plugin
        rules: {
            field: {
                empty: true  // error if field is not empty
            }
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/4C2U3/](http://jsfiddle.net/4C2U3/)**

* * *

**您可以将此自定义`empty`规则与`depends`上面的选项结合使用，以实现您想要的任何内容。**

```
 rules: {
            field: {
                empty: {
                    depends: function (element) {
                        return $("#other_field").is(":blank");
                    }
                }
            }
        } 
```

这是最接近我认为 OP 想要的：

**[http://jsfiddle.net/qCJ8T/](http://jsfiddle.net/qCJ8T/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:45:33.470

跟进我上面的评论。

使用基本的 jquery 选择器，您可以使用[.prev()](http://api.jquery.com/prev/)遍历函数选择“上一个”元素。

在伪代码术语中，您可以执行类似的操作

```
if ( anAddressTextBox.prev().val() != '' ) { // ps: again, this is pseudo-code
  // allow current text object
} 
```

您可能还想查看[.closest()](http://api.jquery.com/closest/)和[.siblings()](http://api.jquery.com/siblings/)

使用匹配的类名验证上述部分，以确保始终处于字段的地址范围内。（即：不检查不是地址文本框的另一个随机字段）

添加一些您的 html/js/jquery 代码，以便 SO 社区能够提供更好的解决方案 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T21:56:48.430

根据您在上述答案中的要求，通过使用 maxlength = 0 验证，我们能够拥有一个有效但必需的空字段。它来自 jquery 验证支持论坛：

```
rules: {
    "fieldName" : {maxlength:0}
} 
```

当然，您需要修改其余部分，但这是我们让字段仅在其为空白时才有效的一种简单方法（又名 maxlength = 0）

# c# - 如何在 AutoFac 中使用属性注入？

> ID：15600440
> 
> 赞同：28
> 
> 时间：2013-03-24T15:38:33.957
> 
> 标签：c#, asp.net, inversion-of-control, log4net, autofac

在控制台应用程序中，我正在使用 Log4Net，在 Main 方法中我正在获取记录器对象。现在，我想通过让所有类从具有 ILog 属性并且应该由属性注入而不是构造函数注入设置的 BaseClass 继承来使这个日志对象在我的所有类中可用。

我正在使用 AutoFac IoC 容器，如何将我的日志对象注入到每个类的 Log 属性中？

实现这一目标的最佳/最简单方法是什么？

有没有办法自动解析类型？

下面是我的测试应用程序：

```
namespace ConsoleApplication1
{
    class Program
    {
        static ILog Log;
        static IContainer Container;

        static void Main(string[] args)
        {                
           InitializeLogger();

           InitializeAutoFac();

            // the below works but could it be done automatically (without specifying the name of each class)?
           Product.Log = Container.Resolve<ILog>();

           // tried below but didn't inject ILog object into the Product
           Container.Resolve<Product>();

           RunTest();

            Console.ReadLine();
        }

        private static void RunTest()
        {
            var product = new Product();
            product.Do();
        }

        private static void InitializeAutoFac()
        {
            var builder = new ContainerBuilder();

            builder.Register(c => Log).As<ILog>();

            builder.RegisterType<Product>().PropertiesAutowired();

            Container = builder.Build();            
        }

        private static void InitializeLogger()
        {
            log4net.Config.XmlConfigurator.Configure();

            Log = LogManager.GetLogger("LoggerName");
        }
    }

    public class Product
    {
        public static ILog Log { get; set; }

        public void Do()
        {
            // this throws exception because Log is not set   
            Log.Debug("some Debug");  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-08T07:18:09.393

在我看来，Ninject[创建](http://ninject.codeplex.com/wikipage?title=Injection%20Patterns)的解决方案比Autofac 中的[属性注入要好得多。](https://code.google.com/p/autofac/wiki/PropertyInjection)因此，我创建了一个自定义属性，它是一个 postsharp 方面，它自动注入我的类：

```
[AutofacResolve]
public IStorageManager StorageManager { get; set; } 
```

我的方面：

```
[Serializable]
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class AutofacResolveAttribute : LocationInterceptionAspect
{
    public override void OnGetValue(LocationInterceptionArgs args)
    {
        args.ProceedGetValue();

        if (!args.Location.LocationType.IsInterface) return;

        if ( args.Value != null )
        {
           args.Value = DependencyResolver.Current.GetService(args.Location.LocationType);
           args.ProceedSetValue();
        }
    }
} 
```

我知道这个问题的答案已经给出，但我认为这是解决 Autofac 中自动属性注入的一种非常巧妙的方法。也许它将来对某人有用。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-24T15:43:24.453

使用[属性注入](http://autofac.readthedocs.org/en/latest/register/prop-method-injection.html)：

```
builder.Register(c => LogManager.GetLogger("LoggerName"))
       .As<ILog>();

builder.RegisterType<CustomClass>()
       .PropertiesAutowired(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-11-08T04:48:58.620

属性注入适用于**Properties**而不是**Fields**。在您的课程中，Log 是一个字段而不是一个属性，因此它永远不会被 Autofac 解析。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-22T07:15:54.913

使用[属性注入](https://autofaccn.readthedocs.io/en/latest/register/prop-method-injection.html#property-injection) （除了@cuongle 答案）。

## 选项1：

```
builder.Register(c => LogManager.GetLogger("LoggerName")).As<ILog>();

builder.RegisterType<Product>()
        .WithProperty("Log", LogManager.GetLogger("LoggerName")); 
```

## 选项 2：

或者你可以`SetLog`在类中添加一个方法`Product`：

```
public class Product
{
    public static ILog Log { get; set; }
    public SetLog(Log log)
    {
        this.Log = log;
    }
} 
```

这样您就不必调用`LogManager.GetLogger("LoggerName")`两次，而是使用构建器的上下文来解析`Log`.

```
builder.Register(c => LogManager.GetLogger("LoggerName")).As<ILog>();

builder.Register(c => 
    var product = new Product();
    product.SetLog(c.Resolve<Log>());
    return product;
); 
```

## 选项 3：

使用[OnActvated](https://autofaccn.readthedocs.io/en/latest/lifetime/events.html#onactivated)：

> 一旦组件完全构建，就会引发 OnActivated 事件。在这里，您可以执行依赖于完全构建的组件的应用程序级任务 - 这些应该很少见。

```
builder.RegisterType<Product>()
    .OnActivated((IActivatedEventArgs<Log> e) =>
    {
        var product = e.Context.Resolve<Parent>();
        e.Instance.SetParent(product);
    }); 
```

* * *

这些选项提供了更多控制，您不必担心@steven 评论：

> 然而，PropertiesAutowired 的可怕之处在于它会进行隐式属性注入，这意味着将跳过任何无法解析的依赖项。这很容易错过配置错误，并可能导致应用程序在运行时失败

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-18T14:04:13.553

我不想使用 postsharp，所以我做了一个快速的解决方案，但它不会自动注入。我是 Autofac 的新手，应该可以在此解决方案的基础上进行构建。

```
[Serializable]
[AttributeUsage(AttributeTargets.Property)]
public class AutofacResolveAttribute : Attribute
{
}

public class AutofactResolver
{
    /// <summary>
    /// Injecting objects into properties marked with "AutofacResolve"
    /// </summary>
    /// <param name="obj">Source object</param>
    public static void InjectProperties(object obj)
    {
        var propertiesToInject = obj.GetType().GetProperties()
             .Where(x => x.CustomAttributes.Any(y => y.AttributeType.Name == nameof(AutofacResolveAttribute))).ToList();

        foreach (var property in propertiesToInject)
        {
            var objectToInject = Autofact.SharedContainer.Resolve(property.PropertyType);
            property.SetValue(obj, objectToInject, null);
        }
    }
} 
```

将其与此调用一起使用：

```
AutofactResolver.InjectProperties(sourceObject); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-09T13:14:53.200

有一个接口[IPropertySelector](https://autofac.org/apidoc/html/254C76EF.htm)可以实现并通过实现传递`.PropertiesAutowired(new MyPropertySelector())`。这将允许您实现您想要的任何逻辑。

# php - 为什么 PHP 的 preg_match 在字符串和 string_literals 上的工作方式不同，用于将数据提取到命名数组中？

> ID：15600441
> 
> 赞同：3
> 
> 时间：2013-03-24T15:38:41.960
> 
> 标签：php, regex, xpath

我正在尝试从 html 电子邮件的正文中提取 6 个字段**Sender**、**Customer ID等：**

```
$string = '... some other html text ... <p>
   <strong>Sender:</strong>&nbsp;Holly Schöne<br>
   <strong>Customer ID:</strong>&nbsp;3853XXXX<br>
   <strong>Email:</strong>&nbsp;email@test.net<br>
   <strong>Transaction ID:</strong>&nbsp;836248467<br>
   <strong>Reference:</strong>&nbsp;product<br>
   <strong>Explanation:</strong>&nbsp;Holly Schöne #gfh65f4h65sg1h65sd1hf61ht3d51ht41g#
</p>... some more html text ...'; 
```

...我这样提取：

```
$message = imap_fetchbody($inbox, $email_number, $section);
// determine $encoding and $charset
$decodedMessage = decodeMessage($message, $encoding, $charset); 
```

使用这个函数：（其他编码的情况被忽略了，因为那里什么都没做）

```
function decodeMessage($message, $encoding, $charset) {
    switch ($encoding) {
        case 3: // BASE64
            $message = base64_decode($message);
            break;
        case 4: // QUOTED-PRINTABLE
            $message = quoted_printable_decode($message);
            break;
        default:
            break;
    }
    if ($charset != NULL) {
        $message = mb_convert_encoding($message , 'utf-8' , $charset);
        //$message = mb_convert_encoding($message , 'iso-8859-1' , $charset);
    }
    return $message;
} 
```

这一切都像一个魅力。问题从这里开始：

```
$regex = '/\<p\>[\w\W. ]*?\<strong\>Sender\:\<\/strong\>&nbsp;(?<sender>[\w\W ]+?)\<br\>.*?\<strong\>Customer ID\:\<\/strong\>&nbsp;(?<customerId>[\w\W ]+?)\<br\>.*?\<strong\>Email\:\<\/strong\>&nbsp;(?<email>[\w\W ]+?)\<br\>.*?\<strong\>Transaction ID\:\<\/strong\>&nbsp;(?<transactionId>[\w\W ]+?)\<br\>.*?\<strong\>Reference\:\<\/strong\>&nbsp;(?<reference>[\w\W ]+?)\<br\>.*?\<strong\>Explanation\:\<\/strong\>&nbsp;(?<explanation>[\w\W ]+?)\<\/p\>/is';
$result = preg_match($regex, $decodedMessage, $matches); 
```

如果我将该正则表达式应用于上面的字符串，我会得到我想要的 - 一个像这样的数组：

```
print_r($matches) = Array (
    [0] => <p>
       <strong>Sender:</strong>&nbsp;Holly SchÃ¶ne<br>
       <strong>Customer ID:</strong>&nbsp;3853XXXX<br>
       <strong>Email:</strong>&nbsp;email@test.net<br>
       <strong>Transaction ID:</strong>&nbsp;836248467<br>
       <strong>Reference:</strong>&nbsp;product<br>
       <strong>Explanation:</strong>&nbsp;Holly SchÃ¶ne #gfh65f4h65sg1h65sd1hf61ht3d51ht41g#
    </p>
    [sender] => Holly SchÃ¶ne
    [1] => Holly SchÃ¶ne
    [customerId] => 3853XXXX
    [2] => 3853XXXX
    [email] => email@test.net
    [3] => email@test.net
    [transactionId] => 836248467
    [4] => 836248467
    [reference] => product
    [5] => product
    [explanation] => Holly SchÃ¶ne #gfh65f4h65sg1h65sd1hf61ht3d51ht41g#
    [6] => Holly SchÃ¶ne #gfh65f4h65sg1h65sd1hf61ht3d51ht41g#
) 
```

...但是，如果我对 $decodedMessage 做同样的事情，我会得到：

```
preg_last_error() -> PREG_NO_ERROR
$result -> [empty string]
$matches -> array() 
```

我尝试了一切并环顾四周，但我无法找出问题所在。我的猜测是它与电子邮件正文的编码或字符集有关。任何帮助将不胜感激。

* * *

好吧，您问了-我认为这个问题已经很长了...这是vardump-我只更改了一些个人详细信息

...啊该死的...还有我的问题

**我让自己被 Waterfox 的源代码查看器愚弄了**

它显示`<br />`为`<br>`并`<tbody>`在每个表中添加了一个，因此我基于正则表达式的源代码不是电子邮件实际拥有的源代码 - 我现在觉得很愚蠢 - 下面是实际的 HTML 源代码

```
<html>
<table width="750" cellpadding="0" cellspacing="0">
    <tr>
        <td style="background-repeat:no-repeat;" background="http://i1.mbsvr.net/images/bg_mailframe.gif" width="100%" align="center">
            <table width="95%" align="center">
                <tr>
                    <td align="left" style="padding:10px 0 0 10px;">
                        <a href="http://www.moneybookers.com/app/?l=EN" target="_blank" style="color:FD932C;font-weight:normal;" onfocus="this.blur()">
                            <img src="http://i1.mbsvr.net/images/skrill/mb-logo-the-future.png" border="0" />
                        </a>
                    </td>
                </tr>
            </table>
            <table width="740">
                <tr><td style="padding:0px 40px 0px 0px" align="center">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td valign="top" align="middle">
            <table cellspacing="0" cellpadding="0" width="100%" border="0">
                <tr>
                    <td>
                        <hr style="!important; font-family: verdana, arial, sans-serif; border: 0; width: 100%; height: 2px; border-top: 1px solid #9AA6CD; overflow: hidden;" />
                    </td>
                </tr>
                <tr> 
                    <td style="!important; font-family: verdana, arial, sans-serif; margin: 0; padding: 0px 0px 10px 0px; color: #EF8116; font-weight: bold; font-size: 18px;" nowrap width="50%">
                        You have received EUR 0.05
                    </td>
                </tr>
                <tr>
                    <td style="!important; font-family: verdana, arial, sans-serif;  font-size: 11px;   color: #656565;">
                        <br/> 
                        Dear Mmmmmmm Bbbbbbb,<br />
                        <br/>
                        Holly Schöne has sent you EUR 0.05 via Skrill (Moneybookers). The full details of the transaction are:<br />
                        <p>
                            <strong>Sender:</strong> Holly Schöne<br />
                            <strong>Customer ID:</strong> 3853XXXX<br />
                            <strong>Email:</strong> email@test.net<br />
                            <strong>Transaction ID:</strong> 836151721<br />
                            <strong>Reference:</strong> TPBwishes<br />
                            <strong>Explanation:</strong> Holly Schoene
#gsg4sda65g4r65e4g8s4g56asd54e#
                        </p>
                        Your money is waiting for you in your Skrill (Moneybookers) account - <a href="https://www.moneybookers.com">https://www.moneybookers.com</a>.<br />
                        <br />
                        <b>IMPORTANT:</b> If you are using Skrill (Moneybookers) commercially, we <b>STRONGLY</b> advise that you check in your Skrill (Moneybookers) account history that the money is there.<br />
                        <br />
                        Have you increased your withdrawal and receiving limits? Just log into your Skrill (Moneybookers) account and click <b>View Limits</b> in the "My Account" section.<br />
                        <br />
                        Kind regards,<br />
                        Skrill (Moneybookers)<br />
                    </td>
                </tr>
                <tr>
                    <td>
                        <hr style="!important; font-family: verdana, arial, sans-serif; border: 0; margin: 8px 0px 0px 0px; padding: 6px 0px 0px 0px; width: 100%; height: 2px; border-top: 1px solid #9AA6CD; overflow: hidden;" />
                    </td>
                </tr>
            </table>
            <table cellspacing=0 cellpadding=0 width="100%" border=0> 
    <tr>
        <td style="font-family: verdana, arial, sans-serif; font-size: 12px;    color: #656565;"><b>Skrill (Moneybookers) Security Reminders</b></td>
    </tr>
       <tr>          

<td class=smooth valign="top" style="font-family: verdana, arial, sans-serif; font-size: 11px;  color: #656565;"><p> <br>              <strong>Protect Your Password</strong><br>Skrill (Moneybookers) and its representatives will NEVER ask you to reveal your password. There are NO EXCEPTIONS to this policy. If anyone asks for your password by phone or by email, or on any website other than moneybookers.com, refuse and immediately report this to <a href="mailto:security@moneybookers.com" style="color: #862165; text-decoration: none; outline: none !important; font-weight: bold;">security@moneybookers.com</a>.<br><br><strong>Access your account ONLY using the login link on the Moneybookers homepage</strong><br>Please be advised that Skrill (Moneybookers) and its representatives will NEVER send you an email asking you to provide your login details within a form provided or to click on a hyperlink to access your account! Immediately report any incident to <a href="mailto:security@moneybookers.com"              style="color: #862165; text-decoration: none; outline: none !important; font-weight: bold;">security@moneybookers.com</a>.<br><br><strong>Case Sensitive Login</strong><br>Please remember your password is case-sensitive, at least 8 characters long and contains at least one number or non-alphabetic character such as '-'. <br>              <br>            </p></td>                </tr>      </table>
        </td>
    </tr>
</table>                </td></tr>
                <tr>
                    <td style="padding:0px 54px 0px 0px" class="separator"><hr style="border: 0; margin: 8px 0px 0px 0px; padding: 6px 0px 0px 0px; width: 100%; height: 2px; border-top: 1px solid #9AA6CD; overflow: hidden;"/></td>
                </tr>
            </table>
            <table align="left" width="740">
                <tr>
                    <td width="10"> </td>
                    <td style="font-family: verdana, arial, sans-serif; font-size: 11px;    color: #656565;" valign="top" width="100%" align="center">
                    Moneybookers Ltd., London, Registered in England and Wales no 4260907.<br>
Registered office: Welken House, 10-11 Charterhouse Square, London, EC1M 6EH, United Kingdom.<br>
Authorised by the Financial Services Authority (FSA) under the Electronic Money Regulations 2011 for the issuing of electronic money.
                    </td>
                </tr>
            </table>
        </td>
    <tr>
        <td valign="top">
            <img src="http://i1.mbsvr.net/images/bg_mailframe_bottom.gif" border="0" />
        </td>
    </tr>
</table>
</html> 
```

因此，连同 Tomalak 的回答，我现在得到了两个可行的解决方案：

我现在工作的正则表达式考虑了正确的封闭`<br />`标签，现在还解析了值：

```
$regex = '/<td .*?>.*?You have received(?<value>.+?\d+\.\d\d).*?<\/td>.*?<p>.*?<strong>Sender:<\/strong>(?<sender>.+?)<br*.?\/?>.*?<strong>Customer ID:<\/strong>(?<customerId>.+?)<br*.?\/?>.*?<strong>Email:<\/strong>(?<email>.+?)<br*.?\/?>.*?<strong>Transaction ID:<\/strong>(?<transactionId>.+?)<br*.?\/?>.*?<strong>Reference:<\/strong>(?<reference>.+?)<br*.?\/?>.*?<strong>Explanation:<\/strong>(?<explanation>.+?)<\/p>/is'; 
```

以及以下 Tomalak 解决方案的调整后 xpath：

```
$path = "p/strong[contains(., '$info')]/following-sibling::text()[1]"; 
```

开头没有斜线意味着：在 DOM 树中的任何位置找到 xpath 并且它只匹配我想要的位置

感谢所有试图提供帮助的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:30:07.593

只是为了它，这里有一个完全避免正则表达式的实现。

```
$doc = new DOMDocument();
$doc->loadHTML($decodedMessage);
$xpath = new DOMXPath($doc);

$info = array(
  'sender'         => get_info($xpath, 'Sender:'),
  'customer_id'    => get_info($xpath, 'Customer ID:'),
  'email'          => get_info($xpath, 'Email:'),
  'transaction_id' => get_info($xpath, 'Transaction ID:'),
  'reference'      => get_info($xpath, 'Reference:'),
  'explanation'    => get_info($xpath, 'Explanation:')
);

function get_info($xpath_object, $info) 
{
    $result = null;
    $path   = "//strong[contains(., '$info')]/following-sibling::text()[1]";
    $nodes  = $xpath_object->query($path);

    foreach ($nodes as $node)
    {
        $result = $node->textContent;
        break;
    }

    return $result;
} 
```

# python - 如何 Python 列表迭代？

> ID：15600448
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:39:20.120
> 
> 标签：python, openerp

下面的代码在我的文本框中仅显示了 Estates[0].id。需要在我的字段中加载所有值。如何做这样的事情。如何迭代并将它们添加到字段值。？

```
def on_change_company(self, cr, uid, ids, company_id, context=None):
    if not company_id:
        return {'value': {
            'bpl_estate_id': False
        }}
    company = self.pool.get('bpl.company.n.registration').browse(cr, uid, company_id, context=context)
    estates = company.estates
    if estates:
        return {
                'value': {
                          'bpl_estate_id': estates[0].id
                          }
                }
    else:
        return {
                'value': {
                          'bpl_estate_id': 0
                          }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:51:43.007

在你的字典里，你只是`estates[0].id`在你的字典里。如果您想要 id 列表，请使用列表推导。

```
if estates:
    return {'value': {'bpl_estate_id': [e.id for e in estates] } }
# rest of code 
```

# android - Android：布局从顶部向上移动约20dp区域隐藏在状态栏后面

> ID：15600450
> 
> 赞同：1
> 
> 时间：2013-03-24T15:39:40.617
> 
> 标签：android, android-layout, hide, statusbar

我正在使用这个[链接](http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/)！用于裁剪图像并在以某种方式获取裁剪图像后，整个布局向上移动约 20dp 并隐藏在状态栏后面（这是随机行为，即有时会发生）我尝试了很多方法来解决这个问题，但无法找到解决方案，主要是因为我不知道是什么导致了问题。

这是一个特定于设备的问题，在galaxy s 和htc hope 中偶尔会出现，但在三星Ace 上经常出现。我在 samsung note 和 htc 希望 HD 上测试了应用程序，它在这些设备中运行良好，没有这样的问题。

还有一件事我应该在这里提到：当布局隐藏在状态栏下时，如果我通过单击文本字段来弹出键盘，布局将恢复正常，即隐藏区域再次可见。

我无法附加图像，但发现了类似的问题[Android - 状态栏有时会隐藏部分视图](https://stackoverflow.com/questions/13689199/android-status-bar-hides-part-of-view-sometimes)，这正是我的布局的行为。

**注意：最近我发现相机活动导致布局向上移动。要在三星 Galaxy Ace 中验证此启动相机，只需按回并注意主屏幕图标中的布局移动。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:10:31.653

我已经通过在相机活动中使用裁剪方法解决了这个问题，检查这个[Set Camera Size - Parameters vs Intent?](https://stackoverflow.com/questions/15438085/set-camera-size-parameters-vs-intent) 该帖子的最后一个答案帮助我解决了这个问题。

# google-closure-compiler - 闭包编译器混合变量名

> ID：15600451
> 
> 赞同：0
> 
> 时间：2013-03-24T15:39:41.017
> 
> 标签：google-closure-compiler, google-closure

我有一个问题，闭包编译器重命名一个全局变量，例如 x.sa.xa，但是在所有引用该全局变量的函数中，编译器将它重命名为 H.sa.xa 之类的其他东西

当我查看 HTML 页面时，我得到一个 JavaScript TypeError: H.sa.xa is undefined。

```
// Top-level namespace for all the code
var nam = nam || {};

(function($, nam) {

 goog.provide('nam.jsConfig');

 nam.jsConfig.cookies = {"RECENT_ITEMS": "recentitems"};

})($, nam);

(function($, nam) {
 goog.provide('nam.util.cookie');
 nam.util.cookie.readMyCookie = function () {
  var ritems_cookie = nam.util.cookie.JSONCookie.get(nam.jsConfig.cookies['RECENT_ITEMS']);
 };
})($, nam);

Closure Compiled Code:
x.sa = {};
x.sa.xa = {RECENT_ITEMS:"recentitems"};

H.a = {};
H.a.cookie = {};
H.a.Tm = function() {
  var a = H.a.cookie.ja.get(H.sa.xa.RECENT_ITEMS);
}; 
```

由于某种原因，闭包编译器引用**H** .sa.xa.RECENT_ITEMS 而不是**x** .sa.xa.RECENT_ITEMS

编译器这样做的任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:52:29.843

让我猜猜你在做什么：在高级模式下独立编译每个文件。如果是这样，这不是高级模式的工作方式。在高级模式下，如果要在编译作业之间共享变量和属性，则需要导出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:23:03.123

我可以解释您的问题的唯一方法是正在发生两件事之一：

1.  Closure Compiler 的混淆和最小化代码存在问题，或者
2.  您看到的错误来自于在 Closure Compiler 编译的代码之外运行的 JavaScript，该代码直接引用了已编译的变量。

如果是前者，您应该隔离导致变量错位的情况[并将其作为错误提交给 Google](https://code.google.com/p/closure-compiler/wiki/FAQ#How_do_I_submit_a_bug_report?)。我们所有使用 Closure Compiler 的人都会非常感激它。

相反，如果我怀疑是后者，那么您很可能不会*导出*您希望在编译代码之外使用的全局变量。最简单的方法是调用`goog.exportSymbol()`函数以使全局变量在闭包编译器组装的代码之外可用。例如，如果您希望`sandwich.meat.Ham`从非编译代码以编译模式访问属性，您可以执行以下操作：

```
goog.exportSymbol('sandwich.meat.Ham', sandwich.meat.Ham); 
```

然后你可能有一些代码存在于你的编译代码之外，这些代码引用了导出的变量：

```
function() {
    var meat = new sandwich.meat.Ham();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:00:51.217

您提供的代码示例中存在更重要的问题。对于一个

```
goog.provide('nam.util.cookie'); 
```

变成了

```
H.a = {};
H.a.cookie = {}; 
```

然而后来这段代码：

```
nam.util.cookie.readMyCookie = function () {... 
```

变成了

```
H.a.Tm = function() {... 
```

人们期望它应该在哪里

```
H.a.cookie.Tm = function() {... 
```

此外，您`nam`将未编译代码的两半用作基本命名空间并将其分别变成单独的命名空间`x`和`H`命名空间，这一事实也表明更多的东西在起作用。一些建议：

*   如果您希望使用[模块](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)模式，请将提供/要求语句放在模块之外
*   不要使用诸如此类的东西手动创建名称空间，`var nam = nam || {}`因为提供已经为您执行此操作
*   正如其他人所提到的，两个文件都包含`nam.jsConfig`并且`nam.util.cookie`应该包含在单个编译中
*   确保您`goog.require('nam.jsConfig')`在文件中带有`nam.util.cookie.readMyCookie`, 以确保满足依赖项要求

FWIW，我们在具有数百个文件的广泛应用程序中使用闭包，其中包含这样的相互依赖关系。我高度怀疑问题不在于工具，而在于它们的使用方式。

# ios - 如何获得经过验证的 SSL 证书以进行本地开发？

> ID：15600452
> 
> 赞同：0
> 
> 时间：2013-03-24T15:39:57.140
> 
> 标签：ios, ruby-on-rails, ssl

我有一个使用 SSL 的 Ruby on Rails 应用程序。我使用`thin start --ssl`. 每次我启动服务器并访问应用程序时，都会收到一条警告说 SSL 证书未经过验证。只要我留在 Rails 中，这不是问题。但是，我的应用程序也有一个 API，我正在为它开发一个 iPhone 客户端应用程序。当我从 iphone 应用程序向本地 Rails 服务器发出请求时，我收到以下错误：

> 2013-03-24 12:30:09.680 OAuth2Test[44541:c07] 错误：错误域=NSURLErrorDomain 代码=-1202“此服务器的证书无效。您可能正在连接到伪装成“oauth. lvh.me”，这可能会使您的机密信息面临风险。” UserInfo=0x8832730 {NSErrorFailingURLStringKey= [https://oauth.lvh.me:3000/oauth/authorize?client_id=23b8921e8db833a33ac7a058b93183a1496f56a6eea4f6c597291106f80a37d0&redirect_uri=https%3A%2F%2Fcatapultcentral.com%2FiOSClientCallback&response_type=code](https://oauth.lvh.me:3000/oauth/authorize?client_id=23b8921e8db833a33ac7a058b93183a1496f56a6eea4f6c597291106f80a37d0&redirect_uri=https%3A%2F%2Fcatapultcentral.com%2FiOSClientCallback&response_type=code) , NSLocalizedRecoverySuggestion=Would you like to connect to the server无论如何？，NSErrorFailingURLKey=[https://oauth.lvh.me:3000/oauth/authorize?client_id=23b8921e8db833a33ac7a058b93183a1496f56a6eea4f6c597291106f80a37d0&redirect_uri=https%3A%2F%2Fcatapultcentral.com%2FiOSClientInvalidCallback&response_type=](https://oauth.lvh.me:3000/oauth/authorize?client_id=23b8921e8db833a33ac7a058b93183a1496f56a6eea4f6c597291106f80a37d0&redirect_uri=https%3A%2F%2Fcatapultcentral.com%2FiOSClientCallback&response_type=code)该服务器为该服务器，NS无效。您可能正在连接到伪装成“oauth.lvh.me”的服务器，这可能会使您的机密信息面临风险。NSUnderlyingError=0x8944cd0 "此服务器的证书无效。您可能正在连接到冒充“oauth.lvh.me”，这可能会使您的机密信息面临风险。", NSURLErrorFailingURLPeerTrustErrorKey=}

在我看来，这个错误的关键部分是：`"The certificate for this server is invalid. You might be connecting to a server that is pretending to be “oauth.lvh.me” which could put your confidential information at risk."`. 顺便说一句，我在 iPhone Simulator 中测试了我的 iPhone 应用程序。

所以，如果我是正确的，这个问题有三个解决方案：

1.  将我的 API 部署到登台服务器并针对它开发 iPhone 应用程序。目前，所有与 API 相关的代码都没有部署，我宁愿在它处于稳定状态之前不部署它。所以这不是一个选择。
2.  以某种方式开发 iPhone 应用程序，使其不验证 SSL 证书。我不喜欢这种方法，我什至不知道该怎么做......
3.  获取本地**验证**的SSL 证书（伪造验证状态或其他东西）。我不知道该怎么做，但这似乎是最好的选择。

我尝试按照有关如何生成自我认证的 SSL 证书[的教程](http://www.akadia.com/services/ssh_test_certificate.html)`thin start --ssl --ssl-verify --ssl-key-file server.key --ssl-cert-file server.crt`进行操作，然后使用它运行 Rails 服务器，但这没有用（创建的 SSL 证书仍未验证）。

那么我该如何解决我的问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:26:39.603

您应该创建一个根 CA 并使用它来创建您的 SSL 证书，然后将该根 CA 添加到您的 iPhone。

# google-chrome - 在新标签中打开链接而不加载它

> ID：15600454
> 
> 赞同：1
> 
> 时间：2013-03-24T15:40:04.470
> 
> 标签：google-chrome, google-chrome-extension

是否可以在 Google Chrome 的新标签页中打开链接而不加载它们？相反，它会等待您手动转到选项卡以开始加载？（我想与 Firefox 的理念相同。Firefox 在您打开它时执行此操作并从您离开的地方开始，仅加载第一个选项卡/最后一个加载的选项卡）

请让我知道是否有办法在 Google Chrome 中做到这一点，无论是通过编辑选项还是使用您知道的扩展程序，这都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:07:01.377

是的，这应该是可能的，但它很丑，你仍然需要加载一些东西。

基本上，您需要一个包含 JavaScript 的基本页面来检测页面是否具有焦点。您可以使用此处的代码示例来确定： [有没有办法检测浏览器窗口当前是否处于非活动状态？](https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active)

页面获得焦点后，您可以重定向到实际页面。这很乱。不要这样做，除非你有一个很好的理由。您的用户会因此而讨厌您。

# r - 调整 font.lab 以在 plotmath 表达式中加粗？

> ID：15600456
> 
> 赞同：7
> 
> 时间：2013-03-24T15:40:17.250
> 
> 标签：r, plotmath

使用以下代码，xlab 将是粗体，但 ylab 不是。请你帮助我好吗

```
pdf()
par(font.axis=2, font.lab=2, cex.lab=1.2, cex.axis=1.2, cex.sub=1.2,
    mfrow=c(2,2), mar = c(5,6,3,1) + 0.1)
hist(ADAM, axes=F, main="", ylim=c(0,1000000), xlab="",
     ylab= expression(paste("number(",x10^6,")",sep="")))
axis(1,at=seq(0,1,0.2), labels=seq(0,1,0.2))
axis(2, at=seq(0,1000000,500000), labels=seq(0,1, by=0.5), las=2)
dev.off() 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T15:45:46.317

`font.lab=2`如果您使用 function ，则不会影响轴标签`expression()`。你应该使用`bold()`里面的函数`expression()`来获得粗体。

```
hist (ADAM, axes=F, main="", ylim=c(0,1000000), 
    xlab="", ylab= expression(bold(paste("number(",x10^6,")",sep="")))) 
```

# java - 如何使用 GZIP 优化我的 Web 服务消息的大小？

> ID：15600457
> 
> 赞同：1
> 
> 时间：2013-03-24T15:40:25.433
> 
> 标签：java, web-services, compression, jax-ws, gzip

这是否在代码级别完成，也许是通过 JAX-WS 处理程序？还是通过应用服务器上的一些配置完成的？

我已经阅读了一些关于 Web 压缩的一般信息，似乎就在消息即将发送到线路时，应用了压缩。客户端应该能够接受 GZIP MIME 类型，以便他们能够解压缩消息。

我想知道谁应该应用该压缩以及它是如何完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:49:59.793

它可以通过代码来完成，也可以通过配置服务器来动态完成。服务器配置的完成方式因服务器而异。对于 Apache，使用的工具是[mod_deflate](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)。使用 JBoss 时的说明在[这里](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/gzip.html)。

要在代码中执行此操作，您需要：

*   使用 gzip 压缩数据
*   将标头设置为*压缩*响应`content-length`的字节长度
**   在响应中包含以下标头：

    ```
    Content-encoding: gzip 
    ```

    *   请求应包含标头：

    ```
    Accept-encoding: gzip 
    ```* 

 *更多信息可以在[维基百科](http://en.wikipedia.org/wiki/HTTP_compression)中找到。*

# objective-c - 获取应用程序版本是崩溃

> ID：15600459
> 
> 赞同：-2
> 
> 时间：2013-03-24T15:40:42.673
> 
> 标签：objective-c

我有这段代码来获取应用程序版本并将其保存到`nsdictionary`：

```
 NSString *Version=[NSString stringWithFormat:@"%@",[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"]];

    NSLog(@"VERSION%@",Version); //prints the right thing
    NSMutableDictionary *dic;
    [dic setValue:Version forKey:@"version"]; //crash 
    [dic setValue:Errors forKey:@"errors"]; //work 
```

我在崩溃时遇到的错误是：

```
setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key version 
```

你能帮我找出这个错误吗？

非常感谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:12:33.233

你需要打电话`setObject:forKey:`，不是`setValue:forKey:`。

```
NSString *Version=[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"];

NSLog(@"VERSION = %@", Version); //prints the right thing
NSMutableDictionary *dic = [[NSMutableDictionary alloc] init];
[dic setObject:Version forKey:@"version"]; //crash 
[dic setObject:Errors forKey:@"errors"]; //work 
```

仅在您真正打算使用键值编码时使用`setValue:forKey:`和。`valueForKey:`否则使用正确的`setObject:forKey:`and `objectForKey:`。

`stringWithFormat:`另外，除非您确实有要格式化的字符串，否则不要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:42:28.180

我不得不分配字典：

```
NSMutableDictionary *dic=[[NSMutableDictionary alloc]init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:42:59.293

您没有`alloc`+ `init`-ed 字典`dict`。

```
NSMutableDictionary *dic=[[NSMutableDictionary alloc] init]; 
```

那是必须的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T15:44:16.517

您不创建字典。因为它（可能）是一个局部变量，所以让它未初始化会导致它持有一个未指定的值。在您的情况下，它指向一个不是`NSMutableDictionary`. 实际上实例化一个，它将起作用：

```
NSMutableDictionary *dic = [NSMutableDictionary new]; 
```

# java - 如何使用序列化发送自定义对象？

> ID：15600460
> 
> 赞同：0
> 
> 时间：2013-03-24T15:40:44.060
> 
> 标签：java, sockets, serializable

我是 Java 新手。我需要通过套接字发送文件内容以及一个双数。我的想法是将这两个字段包装成一个自定义对象。由于对象文件不可序列化，如何发送/接收这个自定义对象？提前致谢。PS：发送方会根据“双”号的值来决定是否需要发送文件。例如：

```
class MyObject{
    double number;
    File file;
} 
```

发送时，逻辑是这样的：

```
MyObject my = new MyObject();

if(my.number > 0){
    my.file = open_file(aaa.jpg);
}else{
    //Not opening any file
}

send(my); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T16:42:38.913

`Socket`这是一个通过s向自身发送数据的快速示例应用程序。

```
public class App {

    private static final AtomicInteger port = new AtomicInteger(-1);
    private static final AtomicBoolean read = new AtomicBoolean(true);

    private static final class SocketReader implements Runnable {

        @Override
        public void run() {
            try {
                final ServerSocket serverSocket = new ServerSocket(0);
                System.out.println("Connected on " + serverSocket);
                synchronized (port) {
                    port.set(serverSocket.getLocalPort());
                    port.notifyAll();
                }
                while (read.get()) {
                    try (final Socket socket = serverSocket.accept()) {
                        final DataInputStream dis = new DataInputStream(socket.getInputStream());
                        System.out.println(dis.readDouble());                        
                        byte[] buffer = new byte[1024];
                        int numRead;
                        while ((numRead = dis.read(buffer)) != -1) {
                            System.out.print(new String(buffer, 0, numRead, "UTF-8"));
                        }
                    }

                }
            } catch (Exception ex) {
                throw new RuntimeException(ex);
            }

        }
    }

    private static final class SocketWriter implements Runnable {

        private final double d;
        private final File file;

        public SocketWriter(double d, File file) {
            this.d = d;
            this.file = file;
        }

        @Override
        public void run() {
            try {
                while (port.get() < 1) {
                    synchronized (port) {
                        port.wait();
                    }
                }
                try (final Socket clientSocket = new Socket("localhost", port.get());
                        final DataOutputStream dos = new DataOutputStream(clientSocket.getOutputStream())) {
                    System.out.println(clientSocket);
                    dos.writeDouble(d);
                    try (final FileInputStream fis = new FileInputStream(file)) {
                        byte[] buffer = new byte[1024];
                        int bytesRead;
                        while ((bytesRead = fis.read(buffer)) != -1) {
                            dos.write(buffer, 0, bytesRead);
                        }
                    }
                    dos.flush();
                }
            } catch (Exception ex) {
                throw new RuntimeException(ex);
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {
        final double d = 2.35;
        final File f = new File(new File(System.getProperty("user.home"), "Downloads"), "readme.txt");
        final ExecutorService executorService = Executors.newSingleThreadExecutor();
        final Future<?> future = executorService.submit(new SocketReader());
        new SocketWriter(d, f).run();
        read.set(false);
        executorService.shutdownNow();
        try {
            future.get();
        } catch (ExecutionException ex) {
            throw new RuntimeException(ex);
        }
    }
} 
```

首先我们发送`double`序列化文件，然后它在我的下载目录中发送一个随机文件的内容。

`Thread`同时，另一个将所有这些都回显到控制台。

# linux - 使用 mailx 和 bash 脚本解析邮件正文

> ID：15600463
> 
> 赞同：6
> 
> 时间：2013-03-24T15:40:45.360
> 
> 标签：linux, bash, unix, mailx

我正在尝试使用电子邮件自动化我的某些工作。是否有任何方法可以使用 mailx 和 bash 来提取邮件正文？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-16T04:50:34.363

`formail``procmail`正如另一个答案中所述，从包装中可以很好地完成工作，但这里是我认为是该问题的直接答案的摘要：

```
$ sudo apt-get install procmail

$ cat test.eml | formail -x To
 test@mydomain.com

$ cat test.eml | formail -x Subject
 hello

$ cat test.eml | formail -x Content
 multipart/alternative; boundary="f403043eea78e8658a0554677278" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:41:41.180

如果这是通过类似 sendmail 的 MTA 发送到本地用户帐户的邮件，那么您可以使用**procmail**在发送电子邮件时对其进行解析。

在我使用的系统上，sendmail 会检查`~/.forward`文件，所以我在 ~username/.forward

```
# pipe incoming mail to procmail
# ref: http://www.panix.com/~elflord/unix/procmail.html
# ref: http://porkmail.org/era/procmail/mini-faq.html#forward
"|IFS=' ' && p=/usr/local/bin/procmail && test -x $p && exec $p -f- || exit 75 #username" 
```

然后，`~username/.procmailrc`包含：

```
# procmail tutorial: http://tldp.org/LDP/LG/issue14/procmail.html

PATH=/usr/local/bin:/bin:/usr/bin
MAILDIR=$HOME/Mail
DEFAULT=$HOME/Mail/inbox
LOGFILE=$HOME/procmail.`date +%Y-%m`.log
SHELL=/usr/bin/ksh

MY_XLOOP='X-Loop: username@hostname.subdomain.example.com'
MY_RECIPIENT='mailing.list@example.com'

#############################################################################
# if the email comes from the client with a specific Subject,
# send a copy of the message to the processing script, and 
# carry on with the next recipe

:0c
* ^From:.*@clientdomain\.invalid
* ^Subject:.*Account.*(Request|Access|Approval)
| $HOME/bin/process_account_request_email.pl | \
  mailx -s "Account request results" $MY_RECIPIENT

#############################################################################
# forward all mail to mailing list
:0
* ! ^$MY_XLOOP
{
    # add a header
    # 'f' = filter: pass message to program and continue processing results 
    # 'h' = pass message headers to program
    # 'w' = wait for program to return
    :0fhw
    | formail -A "$MY_XLOOP"

    # then forward the message
    # 'c' = send a copy to recipient and continue processing
    :0c
    ! $MY_RECIPIENT
}

# if we get here, then the message has an X-Loop header.
# let it fall into $DEFAULT 
```

# django - 对 neo4j 父类的查询不返回任何内容

> ID：15600464
> 
> 赞同：2
> 
> 时间：2013-03-24T15:40:46.737
> 
> 标签：django, neo4j, neo4django

我已经定义了的父类`Person`和子类`Father`如下：

```
class Person(models.NodeModel):

    first_name = models.StringProperty()
    middle_name = models.StringProperty()
    last_name = models.StringProperty()

class Father (Person)

    Profession = models.StringProperty() 
```

创建多个`Father`s 后，我可以轻松地通过`Father.objects.all()`. 但是，通过运行代码，`Person.objects.all()`什么也找不到（即`[]`）！

据我所知，最后一个查询也应该返回对象！有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:00:03.107

你在用neo4django吗？

如果是这样，我相信这已[在 GitHub 上](https://github.com/scholrly/neo4django)的 master 中修复。您可以使用 pip- 从 GitHub 安装`pip install -e git+https://github.com/scholrly/neo4django/#egg=neo4django`。如果它仍然不起作用，请考虑提出问题，我会看看我能做些什么。

# javascript - 将 HTML 单选按钮值传递给 javascript 变量

> ID：15600465
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:40:47.237
> 
> 标签：javascript, html

我想知道是否有人可以帮助我，我被困在需要编写这样的小代码的地方。

```
Question : did you like the training?

<input type="radio" name="q4" value="Yes">Yes
<input type="radio" name="q4" value="No">No 
```

无论检查什么，我都想将它传递给一个 javascript 变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:42:39.687

您可以使用 Jquery 尝试此操作。

```
$('input[name="q4"]:checked').val(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T15:50:19.923

我认为你可以这样做：

```
var ch = document.getElementsByName('q4');

for (var i = ch.length; i--;) {
    ch[i].onchange = function() {
        alert(this.value);
    }
} 
```

[http://jsfiddle.net/EUerP/](http://jsfiddle.net/EUErP/)

因此，您订阅更改事件并可以以某种方式使用选定的值。

或者，您可以使用[querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector) ( [querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll) ) 方法。这是一个如何获取检查元素值的示例：

```
var checked = document.querySelector('[name="q4"]:checked'); 
```

[http://jsfiddle.net/EUerP/2/](http://jsfiddle.net/EUErP/2/)

# bash - 简单 bash 重定向上的“没有这样的文件或目录”

> ID：15600469
> 
> 赞同：9
> 
> 时间：2013-03-24T15:41:31.720
> 
> 标签：bash, io-redirection

这是我的一些代码：

```
gzip -c $path > /var/www/wiki/backup/$now/$file.gz 
```

我正在`$path`压缩（目录的路径）的内容，然后将压缩文件发送到`/var/www/wiki/backup/$now/$file.gz`. `$now`包含目录名称，`$file`是我要写入压缩文件的名称。

但是，在运行程序时，我收到此错误：

```
backup.sh: line 20: /var/www/wiki/backup/Sunday/extensions.gz: No such file or directory
                                         ^$now    ^$file 
```

（第 20 行是上面给出的行）

为什么程序会中断？我知道`Sunday/extensions.gz`不存在（虽然星期天存在），这就是为什么我要你写信给它！

完整程序代码：

```
#!/bin/bash

现在=$(日期 +"%A")
mkdir -p /var/www/wiki/backups/$now

数据库=（bmshared brickimedia_meta brickimedia_en brickimedia_customs）
位置=("/var/www/wiki/skins" "/var/www/wiki/images" "/var/www/wiki/")

对于 ${databases[*]} 中的数据库
做
#command 带密码和 shoodle
：
完毕

${locations[*]} 中的路径
做
#echo "" > var/www/wiki/backup/$now/$file.gz
文件=`回显 $path | 剪切-d/-f5`
回声$路径
gzip -c $path > /var/www/wiki/backup/$now/$file.gz
完毕

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:04:47.577

创建的目录是**备份**，gzip是**备份**。

```
mkdir -p /var/www/wiki/backups/$now

gzip -c $path > /var/www/wiki/backup/$now/$file.gz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:26:27.223

您的位置之一是“/var/www/wiki/”。然后你有

```
file=`echo $path | cut -d/ -f5`
gzip -c $path > /var/www/wiki/backup/$now/$file.gz 
```

由于`$file`包含空字符串，您正在尝试写入`/var/www/wiki/backup/Sunday/.gz`. 这是一个问题，但不是您报告的错误。

当我尝试 gzip 目录时，我收到此错误

```
$ gzip -c ./subdir/ > subdir.gz
gzip: ./subdir/ is a directory -- ignored 
```

这是一个问题，但不是您报告的错误。

@suspectus 解决了您报告的问题。

# clojure - 如何摆脱 Compojure 应用程序中的全局数据

> ID：15600470
> 
> 赞同：5
> 
> 时间：2013-03-24T15:41:33.520
> 
> 标签：clojure, compojure

在[http://mindbat.com/2013/03/clojurewest-2013-day-one-notes/](http://mindbat.com/2013/03/clojurewest-2013-day-one-notes/)上有一条说明：

*   在顶层定义 refs 和 atom 基本上是通过单例实现的全局可变状态，请避免
*   建议使用构造函数*返回*您要使用的状态变量，然后将该状态传递给每个函数

我认为这是一个很好的建议，但我不完全确定如何在 Ring/Compojure 应用程序中实现这一点。谁能举一个具体的例子来说明这将如何工作？

我特别感兴趣如何以这种方式组合`defroutes`,`init`并`app`一起摆脱该范围内的全局变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T01:10:11.987

我从 Stuart 的演讲中了解到是这样的：

```
(ns state.core)

(defn create-user-module [] (atom []))

(defn add-user [module user]
  (swap! module conj user))

(defn get-users [module]
  @module) 
```

现在，您的“核心”中没有全局状态，因为操纵状态的函数希望将其作为参数获取。这些允许轻松测试，因为您可以为每个测试创建一个“用户模块”的新实例。此外，这个模块的客户端不应该关心他们在 create-user-module 函数中得到了什么，他们应该只是传递它而不检查它，这样你就可以随时更改用户模块的实现。Stuart 还谈到了为这些模块创建协议，如果您将有多个实现。

试图回答您的问题，环形适配器只是 1 个参数的函数，而 compojure 只是一个路由库，因此您可以使用以下闭包创建一个 Web 应用程序：

```
(ns state.web
  (:use compojure.core)
  (:require [state.core :as core]))

(defn web-module [user-module]
  (routes
   (GET "/all" [] (core/get-users user-module)))) 
```

现在您可以调用 web 模块来创建一个 webapp，并将所需的依赖项作为参数传递。当然，您仍然需要有人使用正确的用户模块创建 Web 应用程序，因此您只需要一个将所有内容连接在一起的“主”函数：

```
(ns state.main
  (:require state.core
            state.web)
  (:use ring.adapter.jetty))

(defn start []
  (let [user-module (state.core/create-user-module)
        web-module (state.web/web-module user-module)]
    (run-jetty web-module {:port 3000 :join? false})))

(defn stop [app]
    (.stop app)) 
```

`start`将从您的 app`main`方法中调用。这只是意味着您需要切换到 lein-run 插件。

现在，鉴于您正在询问`init`（来自我假设的 lein ring 插件），我猜您计划将您的 webapp 部署在容器中。由于 lein ring 插件必须在 java servlet fw 约束内工作，并且处理程序最终编译为 java servlet，因此您可以做的最好的事情可能是：

```
(ns state.web
  (:use compojure.core)
  (:require [state.core :as core]))

(def module-deps (atom {})

(defn init-app [] (swap! module-deps conj [:user-module (core/create-user-module)]))

(defroutes web-module []
   (GET "/all" [] (core/get-users (:user-module @module-deps)))) 
```

这仍然意味着您的核心命名空间很容易测试，但您仍然在 web 命名空间中有全局状态，但我认为这是“正确”封装的，如果您必须使用 java 容器，可能就足够了。

这只是为什么库比框架“更好”的另一个论点:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T04:22:45.130

在很多情况下您需要全局状态，因此您无法避免它，您可以做的是正确**管理**它，我想这就是两点所说的：

不是一个好方法：

```
(ns data)
(def users (atom []))

(ns pages)
(defn home []
    (do-something data/@users)

(defn save []
    (let [u @users]
       (swap! data/users ....) 
```

好办法：

```
(ns data)
(def- users (atom []))
(defn get-users [] @users)
(defn update-user [user] (swap! @users ...))

(ns pages)
; use the functions exposed by data ns to interact with data rather then poking the atom directly. 
```

基本上所有对任何类型状态的访问都应该从应用程序的其他部分抽象出来。您所有的业务逻辑函数都应该将状态作为参数并返回新状态，而不是自己选择状态并直接更新它。

# c# - 如何在使用 DllImpot 属性时更改托管代码中的函数名称？

> ID：15600475
> 
> 赞同：1
> 
> 时间：2013-03-24T15:41:57.620
> 
> 标签：c#, .net, vb.net

我想调用这样的外部函数。

```
[DllImport("user32.dll")]
static extern IntPtr WindowFromPoint(POINT Point); 
```

但是我想将函数名称从更改`WindowFromPoint`为`MyFunc`. 所以在我的托管代码中，我可以做到：

```
MyFunc(new POINT()); 
```

因为这不是唯一的功能，而且有超过 100 个功能，所以我正在寻找一种简单的单行解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:46:40.000

```
[DllImport("user32.dll", CharSet = CharSet.Unicode, EntryPoint = "WindowFromPoint")]
static extern IntPtr MyFunc(POINT Point); 
```

我相信这会奏效。

或者，如果出于某种原因，您需要保留名称，您可以尝试以下操作：

```
[MethodImplAttribute(MethodImplOptions.AggressiveInlining)] 
public static IntPtr MyFunc(POINT Point)
{
    return WindowFromPoint(Point);
} 
```

# smartgwt - 智能 gwt 中的 ListGrid 显示空白行

> ID：15600491
> 
> 赞同：0
> 
> 时间：2013-03-24T15:43:21.823
> 
> 标签：smartgwt

我正在尝试在智能 gwt 中向 ListGrid 添加行。正在添加行，但未显示值

```
public class SearchResultsView extends HLayout {
public SearchResultsView(EmployeeServiceAsync empServiceAsync) {
    final ListGrid employeeGrid = new ListGrid();
    employeeGrid.setWidth(500);
    employeeGrid.setHeight(224);
    employeeGrid.setShowAllRecords(true);

    ListGridField empIDField = new ListGridField("empID", "Employee Id");
    ListGridField empNameField = new ListGridField("empName",
            "Employee Name");

    employeeGrid.setFields(empIDField, empNameField);
                                // Employee[EmployeeData.getRecords().size()]);

    empServiceAsync.getRecords(new AsyncCallback<List<Employee>>() {

        @Override
        public void onSuccess(List<Employee> result) {
            System.out.println(result);
            /*
            Employee[] employee = result.toArray(new Employee[result.size()]);

            employeeGrid.setData(employee);*/
            EmployeeListGrid employeeListGrid[]=new EmployeeListGrid[result.size()];
            int counter=0;
            for (Employee employee : result) {
                employeeListGrid[counter]=new EmployeeListGrid(employee.getEmpID(), employee.getEmpName());
                System.out.println(employeeListGrid[counter].getEmpID()+">>"+employeeListGrid[counter].getEmpName());
                counter++;
            }
            employeeGrid.setData(employeeListGrid);

        }

        @Override
        public void onFailure(Throwable caught) {
            // TODO Auto-generated method stub

        }
    });

    this.addChild(employeeGrid);

} 
```

}

说明>> 为了填充网格，我正在对服务器进行 rpc 调用，服务器返回一个列表。我迭代列表并创建一个 EmployeeListGrid 类型的对象数组（因为 EmployeeListGrid 扩展 ListGridRecord ）。然后用创建的数组喂给employeegrid。

> 我在这里错过了什么吗，为什么网格显示空行？

请注意，我已经调试并确保正确填充了“employeeListGrid”，但未呈现内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:00:48.240

注意事项：字段名称区分大小写，因此请检查数据和字段名称之间的大小写是否不匹配，例如“parentId”与“parentID” [http://forums.smartclient.com/showthread.php?t=8159#网格](http://forums.smartclient.com/showthread.php?t=8159#aGrid)

```
class SearchResultsView extends HLayout {
    public SearchResultsView() {
        final ListGrid employeeGrid = new ListGrid();
        employeeGrid.setWidth(500);
        employeeGrid.setHeight(224);
        employeeGrid.setShowAllRecords(true);

        ListGridField empIDField = new ListGridField("empID", "Employee Id");
        ListGridField empNameField = new ListGridField("empName", "Employee Name");

        employeeGrid.setFields(empIDField, empNameField);

        // using a timer to simulate async callback, grid will populate after 2.5 seconds
        // place code inside run() method in onSuccess()
        Timer timer = new Timer() {
            @Override
            public void run() {
                RecordList recordList = employeeGrid.getRecordList();

                List<Employee> employeeList = getEmployeeList();
                for (Employee employee : employeeList) {
                    recordList.add(new EmployeeRecord(employee.empID, employee.empName));
                }
            }
        };

        timer.schedule(2500);

        this.addChild(employeeGrid);
    }

    private List<Employee> getEmployeeList() {
        List<Employee> employeeList = new ArrayList<Employee>();
        employeeList.add(new Employee("1", "AAA"));
        employeeList.add(new Employee("2", "BBB"));
        employeeList.add(new Employee("3", "CCC"));
        employeeList.add(new Employee("4", "DDD"));

        return employeeList;
    }
}

class Employee {
    String empID;
    String empName;

    Employee(String empID, String empName) {
        this.empID = empID;
        this.empName = empName;
    }
}

class EmployeeRecord extends ListGridRecord {

    EmployeeRecord(String empID, String empName) {
        setAttribute("empID", empID);
        setAttribute("empName", empName);
    }
} 
```

它可以使用 ListGrid.setData() ，如下所示。

```
List<Employee> employeeList = getEmployeeList();

if (employeeList != null && employeeList.size() > 0) {
    EmployeeRecord[] employeeRecords = new EmployeeRecord[employeeList.size()];
    for (int i = 0; i < employeeList.size(); i++) {
        employeeRecords[i] = new EmployeeRecord(employeeList.get(i).empID, employeeList.get(i).empName);
    }

    employeeGrid.setData(employeeRecords);
} 
```

EmployeeRecord (EmployeeListGrid) 类可能不是必需的，除非有足够的理由这样做。我用它来减少你的代码和我的代码之间的差异。

必须使用适当的访问修饰符，即使我没有最小化代码。

# xml - 混合内容中的结束父标签

> ID：15600492
> 
> 赞同：0
> 
> 时间：2013-03-24T15:43:22.433
> 
> 标签：xml, xslt

我正在尝试在 XSL 中弄清楚如何结束元素 <bold> 它是元素的父级

**编辑**此外，元素 <paragraph> 和 <bold> 的内容获得 <style name ="bold">。不包括 <link> 元素的内容。<style> 将包裹在 <paragraph> 和 <bold> 的内容中。元素 <paragraph> 的内容也可以有一个或多个 <bold> 和 <link>

**输入 XML**

```
<paragraph>
     This is some text that  has no style
 </paragraph> 

 <paragraph>
     This is some text that is  <bold>correct way</bold> <link>need    
     to be linked </link> to a document
 </paragraph>

 <paragraph>
     This is some text that is  <bold>incorrect <link>need
     to be linked </link> way </bold> to a document
 </paragraph> 
```

**输出 Xml**应该是

```
<paragraph>
     This is some text that  has no style
 </paragraph> 

 <paragraph>
     <style name="bold">This is some text that is  <bold>correct way</bold></style>
     <link>need to be linked </link>
     <style name="bold"> to a document</style>
 </paragraph>

 <paragraph>
     <style name="bold">This is some text that is  <bold>incorrect</bold></style> 
     <link>need to be linked </link>
     <style name="bold"><bold> way </bold> to a document</style>
 </paragraph> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:59:04.907

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="bold[link]"><xsl:apply-templates/></xsl:template>

 <xsl:template match="bold[link]/text()">
  <bold><xsl:value-of select="."/></bold>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档**（提供的片段包装到单个顶部元素中）时：

```
<t>
 <paragraph>
     This is some text that is  <bold>correct way</bold> <link>need
     to be linked </link> to a document
 </paragraph>

 <paragraph>
     This is some text that is  <bold>incorrect <link>need
     to be linked </link> way </bold> to a document
 </paragraph>
</t> 
```

**产生想要的正确结果：**

```
<t>
   <paragraph>
     This is some text that is  <bold>correct way</bold>
      <link>need
     to be linked </link> to a document
 </paragraph>
   <paragraph>
     This is some text that is  <bold>incorrect </bold>
      <link>need
     to be linked </link>
      <bold> way </bold> to a document
 </paragraph>
</t> 
```

* * *

**OP 更新了问题 - 这是实现初始 + 新要求的稍作修改的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="paragraph[bold]">
  <paragraph>
    <style name="bold"><xsl:apply-templates/></style>
  </paragraph>
 </xsl:template>

 <xsl:template match="bold[link]"><xsl:apply-templates/></xsl:template>

 <xsl:template match="bold[link]/text()">
  <bold><xsl:value-of select="."/></bold>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下文档时：**

```
<t>
<paragraph>
     This is some text that  has no style
 </paragraph>

 <paragraph>
     This is some text that is  <bold>correct way</bold> <link>need
     to be linked </link> to a document
 </paragraph>

 <paragraph>
     This is some text that is  <bold>incorrect <link>need
     to be linked </link> way </bold> to a document
 </paragraph>
 </t> 
```

**产生了想要的正确结果**：

```
<t>
   <paragraph>
     This is some text that  has no style
 </paragraph>
   <paragraph>
      <style name="bold">
     This is some text that is  <bold>correct way</bold>
         <link>need
     to be linked </link> to a document
 </style>
   </paragraph>
   <paragraph>
      <style name="bold">
     This is some text that is  <bold>incorrect </bold>
         <link>need
     to be linked </link>
         <bold> way </bold> to a document
 </style>
   </paragraph>
</t> 
```

# java - Android 上的文档数据类

> ID：15600494
> 
> 赞同：0
> 
> 时间：2013-03-24T15:43:34.697
> 
> 标签：java, android, data-structures

我需要创建一个包含多个具有相似内容的页面的 Android 应用程序。它们将是动态生成的，类似于 Notepad++ 中的多个文本文档。如果我要在 MFC 中对此进行编程，我将使用从 CDocument 派生的类的多个实例来存储数据，并使用从 CMDIView 派生的类的多个实例来显示它。

我似乎在 Android API 中找不到类似于 CDocument 的类。Activity 类似乎适用于一次处理一个文档的应用程序，而 ContentProvider 类似乎旨在为其他应用程序提供服务。

对于同时处理多个文档的应用程序，将文档数据保存在 Android 平台上的最佳类别是什么？每个文档都有自己的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:15:23.937

您可以使用具有正确布局的 Activity。当您想要添加另一个文档时，请保留对当前`ContentView`Activity 的引用（例如在 V1 中）并从您的布局中扩充另一个实例并将其设置为您的 Activity 的新 ContentView 并保留引用它（例如在 V2 中）。当您想从第一个文档获取数据时，您可以从 V1 获取它，当您想从第二个文档获取数据时，从 V2 获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:45:03.770

**贮存**

好吧，Android 中的文档概念并不是开箱即用的。取而代之的是，android 为您提供`desk space`除了您的应用程序之外没有人可以访问的私有存储，*除非设备已植根，那么任何人都可以看到它*来做任何您想做的事情。

要访问此存储文件夹，只需调用[Environment.getDataDirectory()](http://developer.android.com/reference/android/os/Environment.html#getDataDirectory%28%29)

如果您要存储简单的数据类型（int、float、String ....）：

*   您可以将[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)用于开箱即用的功能。
*   或者您可以编写自己的 xml/json 解析器并存储在上述目录中。

如果您正在寻找基于通用存储（对象或字节）的存储，您将不得不在`File`对象之上编写自己的包装器。

**意见**

似乎您正在寻找某种动态生成的（主/详细信息）MVC，它可以在 android 中以多种方式实现。在我的头顶上，您可以使用：

*   带有列表视图的活动和画布的另一个活动，[请看这里](http://www.vogella.com/articles/AndroidListView/article.html)
*   带有片段的基于 ActionBar 的应用程序。[这里](http://www.vogella.com/articles/AndroidActionBar/article.html)
*   基于 ViewFlipper 的应用程序[在这里](http://www.techrepublic.com/blog/app-builder/a-dog-limps-into-a-saloon-a-tutorial-on-androids-viewflipper-widget/634)

希望有帮助

# python - 未生成 Hadoop 流映射器字节偏移

> ID：15600495
> 
> 赞同：2
> 
> 时间：2013-03-24T15:43:38.997
> 
> 标签：python, hadoop, mapreduce, hadoop-streaming, mapper

我正在运行一个流式 Hadoop 作业，并且字节偏移量没有作为映射器的输出（键）生成，就像我期望的那样。命令：

```
$HADOOP_INSTALL/bin/hadoop \
jar $HADOOP_INSTALL/contrib/streaming/hadoop-streaming-$HADOOP_VERSION.jar \
-D stream.map.input.ignoreKey=false \
-inputformat org.apache.hadoop.mapred.TextInputFormat \
-file ./mapper.py \
-file ./reducer.py \
-mapper ./mapper.py \
-reducer ./reducer.py \
-input $INPUT_DIR \
-output $OUTPUT_DIR \
-cmdenv REGEX=$REGEX 
```

我的理解是TextInputFormat是默认的，所以我也尝试了上面没有-inputformat选项的命令。我也尝试过删除 -D，但有人告诉我这是在使用流式 API 时将字节偏移作为键所必需的。

对于它的价值，我只是在为一个学生项目试验 Hadoop。目前，映射器是 HDFS 中文件的一个非常简单的 python grep，将每一行与提供的正则表达式匹配：

```
pattern = re.compile(os.environ['REGEX'])
for line in sys.stdin:
   match = pattern.search(line)
   if (match):
      sys.stdout.write(line) 
```

但现在，唯一输出（到 reducer）的是匹配行。我期待制表符或空格分隔的键/值对，其中 key=byte_offset 和 value=regex_line_match。

*谁能告诉我或建议为什么会这样？*

*另外，我也有兴趣回答这两个（相关）问题：*

1.  映射器是否可以手动确定它正在处理的每一行数据相对于数据所属文件的字节偏移量？
2.  映射器是否可以确定它正在处理的数据所属的文件中的总字节数？

如果对这两个问题中的任何一个都是肯定的，那么如何？（python，或一般的流媒体）。

**编辑：**
如果我使用`-inputformat org.apache.hadoop.mapred.lib.NLineInputFormat`，那么字节偏移量将作为映射器输出的键产生。但是这项工作需要**很**长时间才能完成（而且我的输入文件中只有大约 50 行文本！）。

# c# - 我可以在 C# 的消息框中获取用户的输入吗？

> ID：15600497
> 
> 赞同：-5
> 
> 时间：2013-03-24T15:44:00.107
> 
> 标签：c#

我需要向输入您想查看的 id 记录的用户提出问题。用户应输入 id。那我怎么能在 C# 中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:48:55.193

你需要使用vb输入框。添加对 Microsoft.VisualBasic 的引用，InputBox 在 Microsoft.VisualBasic.Interaction 命名空间中

添加执行以下操作：

```
 string input = Microsoft.VisualBasic.Interaction.InputBox("Prompt", "Title", "Default", 0, 0); 
```

# c++ - 如何正确传递参数？

> ID：15600499
> 
> 赞同：113
> 
> 时间：2013-03-24T15:44:06.813
> 
> 标签：c++, c++11

我是 C++ 初学者，但不是编程初学者。我正在尝试学习 C++(c++11)，但对我来说最重要的事情有点不清楚：传递参数。

我考虑了这些简单的例子：

*   具有所有成员原始类型的类：
    `CreditCard(std::string number, int expMonth, int expYear,int pin):number(number), expMonth(expMonth), expYear(expYear), pin(pin)`

*   具有基本类型 + 1 个复杂类型作为成员的类：
    `Account(std::string number, float amount, CreditCard creditCard) : number(number), amount(amount), creditCard(creditCard)`

*   一个类，其成员为基本类型 + 1 个复杂类型的集合： `Client(std::string firstName, std::string lastName, std::vector<Account> accounts):firstName(firstName), lastName(lastName), accounts(accounts)`

当我创建一个帐户时，我会这样做：

```
 CreditCard cc("12345",2,2015,1001);
    Account acc("asdasd",345, cc); 
```

显然，在这种情况下信用卡将被复制两次。如果我将该构造函数重写为

```
Account(std::string number, float amount, CreditCard& creditCard) 
    : number(number)
    , amount(amount)
    , creditCard(creditCard) 
```

会有一份。如果我将其重写为

```
Account(std::string number, float amount, CreditCard&& creditCard) 
    : number(number)
    , amount(amount)
    , creditCard(std::forward<CreditCard>(creditCard)) 
```

将有2个动作，没有副本。

我认为有时您可能想要复制一些参数，有时您不想在创建该对象时复制。
我来自 C#，习惯于引用，这对我来说有点奇怪，我认为每个参数应该有 2 个重载，但我知道我错了。
是否有任何关于如何在 C++ 中发送参数的最佳实践，因为我真的发现它，比方说，不是微不足道的。您将如何处理我上面介绍的示例？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-03-24T15:55:02.887

**首先最重要的问题：**

> 有没有关于如何在 C++ 中发送参数的最佳实践，因为我真的找到了，比如说，不是微不足道的

如果您的函数需要**修改**被传递的原始对象，以便在调用返回后，对该对象的修改将对调用者可见，那么您应该通过**左值引用**传递：

```
void foo(my_class& obj)
{
    // Modify obj here...
} 
```

如果你的函数**不需要修改原始对象，也不需要创建它的副本**（换句话说，它只需要观察它的状态），那么你应该通过**左值引用传递给`const`**：

```
void foo(my_class const& obj)
{
    // Observe obj here
} 
```

这将允许您使用左值（左值是具有稳定标识的对象）和右值（右值是，例如*temporaries*或您将作为调用结果移动的对象）调用该函数`std::move()`。

也有人可能会争辩说，**对于基本类型或复制速度很快的类型**，例如`int`,`bool`或`char`，如果函数只需要观察值，则不需要通过引用**传递，并且应该优先考虑通过值传递**。如果不需要*引用语义*，那是正确的，但是如果函数想要在某处存储指向同一个输入对象的指针，那么将来通过该指针读取将看到已在其他部分执行的值修改。代码？在这种情况下，通过引用传递是正确的解决方案。

如果您的函数**不需要修改原始对象，但需要存储该对象的副本**（*可能返回输入转换的结果而不更改输入*），那么您可以考虑**按值取**：

```
void foo(my_class obj) // One copy or one move here, but not working on
                       // the original object...
{
    // Working on obj...

    // Possibly move from obj if the result has to be stored somewhere...
} 
```

调用上述函数在传递左值时总是会产生一份副本，而在传递右值时会产生一份移动。如果您的函数需要将此对象存储在某处，您可以从它执行额外的*移动*（例如，在这种情况下，`foo()`成员[函数需要将值存储在数据成员中](https://stackoverflow.com/questions/14197526/should-all-most-setter-functions-in-c11-be-written-as-function-templates-accep)）。

**如果移动对于 类型 的对象来说**很昂贵**`my_class`，那么您可以考虑重载`foo()`并为左值提供一个版本（接受对 的左值引用`const`）和为右值提供一个版本（接受右值引用）：**

 **```
// Overload for lvalues
void foo(my_class const& obj) // No copy, no move (just reference binding)
{
    my_class copyOfObj = obj; // Copy!
    // Working on copyOfObj...
}

// Overload for rvalues
void foo(my_class&& obj) // No copy, no move (just reference binding)
{
    my_class copyOfObj = std::move(obj); // Move! 
                                         // Notice, that invoking std::move() is 
                                         // necessary here, because obj is an
                                         // *lvalue*, even though its type is 
                                         // "rvalue reference to my_class".
    // Working on copyOfObj...
} 
```

上面的函数非常相似，事实上，你可以用它做一个函数：`foo()`可以成为一个函数*模板*，你可以使用**完美的转发**来确定传递的对象的移动或副本是否将在内部生成：

```
template<typename C>
void foo(C&& obj) // No copy, no move (just reference binding)
//       ^^^
//       Beware, this is not always an rvalue reference! This will "magically"
//       resolve into my_class& if an lvalue is passed, and my_class&& if an
//       rvalue is passed
{
    my_class copyOfObj = std::forward<C>(obj); // Copy if lvalue, move if rvalue
    // Working on copyOfObj...
} 
```

[您可能想通过观看Scott Meyers 的演讲](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)来了解有关此设计的更多信息（请注意，他使用的“*通用参考*”一词是非标准的）。

要记住的一件事是，这`std::forward`通常会导致右值的*移动*，所以即使它看起来相对无害，多次转发同一个对象可能是麻烦的根源——例如，从同一个对象移动两次！所以注意不要把它放在一个循环中，也不要在函数调用中多次转发同一个参数：

```
template<typename C>
void foo(C&& obj)
{
    bar(std::forward<C>(obj), std::forward<C>(obj)); // Dangerous!
} 
```

另请注意，除非您有充分的理由，否则您通常不会求助于基于模板的解决方案，因为它会使您的代码更难阅读。**通常，您应该专注于清晰和简单**。

以上只是简单的指导方针，但大多数时候它们会为您指明良好的设计决策。

* * *

**关于您的帖子的其余部分：**

> 如果我将其重写为 [...] 将有 2 个动作并且没有副本。

这是不正确的。首先，右值引用不能绑定到左值，因此只有在将类型的右值传递`CreditCard`给构造函数时才会编译。例如：

```
// Here you are passing a temporary (OK! temporaries are rvalues)
Account acc("asdasd",345, CreditCard("12345",2,2015,1001));

CreditCard cc("12345",2,2015,1001);
// Here you are passing the result of std::move (OK! that's also an rvalue)
Account acc("asdasd",345, std::move(cc)); 
```

但是，如果您尝试这样做，它将不起作用：

```
CreditCard cc("12345",2,2015,1001);
Account acc("asdasd",345, cc); // ERROR! cc is an lvalue 
```

因为`cc`是左值，右值引用不能绑定到左值。此外，**将引用绑定到对象时，不会执行任何移动**：它只是一个引用绑定。因此，只会有*一个*动作。

* * *

因此，根据本答案第一部分提供的指导方针，如果您关心`CreditCard`按值获取时生成的移动次数，您可以定义两个构造函数重载，一个采用对`const`( `CreditCard const&`) 的左值引用，一个采用一个右值引用 ( `CreditCard&&`)。

重载解析将在传递左值时选择前者（在这种情况下，将执行一次复制），在传递右值时选择后者（在这种情况下，将执行一次移动）。

```
Account(std::string number, float amount, CreditCard const& creditCard) 
: number(number), amount(amount), creditCard(creditCard) // copy here
{ }

Account(std::string number, float amount, CreditCard&& creditCard) 
: number(number), amount(amount), creditCard(std::move(creditCard)) // move here
{ } 
```

* * *

`std::forward<>`当您想要实现*完美转发*时，通常会看到您的使用。在这种情况下，您的构造函数实际上是一个构造函数*模板*，并且看起来或多或少如下

```
template<typename C>
Account(std::string number, float amount, C&& creditCard) 
: number(number), amount(amount), creditCard(std::forward<C>(creditCard)) { } 
```

从某种意义上说，这将我之前展示的两个重载组合到一个函数中：`C`将推断为`CreditCard&`以防万一您传递左值，并且由于引用折叠规则，它将导致该函数被实例化：

```
Account(std::string number, float amount, CreditCard& creditCard) : 
number(num), amount(amount), creditCard(std::forward<CreditCard&>(creditCard)) 
{ } 
```

如您所愿，这将导致 的*复制构造。*`creditCard`另一方面，当传递一个右值时，将推`C`导出为`CreditCard`，并且将实例化此函数：

```
Account(std::string number, float amount, CreditCard&& creditCard) : 
number(num), amount(amount), creditCard(std::forward<CreditCard>(creditCard)) 
{ } 
```

这将导致 的*移动构造*，`creditCard`这是您想要的（因为传递的值是一个右值，这意味着我们有权从它移动）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-24T16:04:16.693

首先，让我更正一些细节。当您说以下内容时：

> 将有2个动作，没有副本。

那是错误的。绑定到右值引用不是一个动作。只有一个动作。

此外，因为`CreditCard`不是模板参数，`std::forward<CreditCard>(creditCard)`只是一种冗长的说法`std::move(creditCard)`。

现在...

如果你的类型有“便宜”的动作，你可能只想让你的生活变得轻松，并以价值和“`std::move`顺”来对待一切。

```
Account(std::string number, float amount, CreditCard creditCard)
: number(std::move(number),
  amount(amount),
  creditCard(std::move(creditCard)) {} 
```

当这种方法只能产生一个时，它会产生两个动作，但如果这些动作很便宜，它们可能是可以接受的。

当我们讨论这个“便宜的移动”问题时，我应该提醒你，`std::string`它通常是通过所谓的小字符串优化来实现的，所以它的移动可能不如复制一些指针那么便宜。像往常一样优化问题，是否重要是问你的分析器，而不是我。

如果你不想招致那些额外的动作怎么办？也许它们被证明太贵了，或者更糟糕的是，也许这些类型实际上无法移动，并且您可能会产生额外的副本。

如果只有一个有问题的参数，您可以提供两个重载， with`T const&`和`T&&`。这将一直绑定引用，直到发生复制或移动的实际成员初始化。

但是，如果您有多个参数，则会导致重载数量呈指数级增长。

这是一个可以通过完美转发来解决的问题。这意味着您改为编写模板，并使用`std::forward`将参数的值类别作为成员携带到它们的最终目的地。

```
template <typename TString, typename TCreditCard>
Account(TString&& number, float amount, TCreditCard&& creditCard)
: number(std::forward<TString>(number),
  amount(amount),
  creditCard(std::forward<TCreditCard>(creditCard)) {} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-24T15:54:33.750

首先，`std::string`是一个相当庞大的类类型，就像`std::vector`. 这当然不是原始的。

如果您将任何大型可移动类型按值放入构造函数中，我会将`std::move`它们放入成员中：

```
CreditCard(std::string number, float amount, CreditCard creditCard)
  : number(std::move(number)), amount(amount), creditCard(std::move(creditCard))
{ } 
```

这正是我建议实现构造函数的方式。它导致成员`number`和`creditCard`被移动构造，而不是复制构造。当您使用此构造函数时，将有一个副本（或移动，如果是临时的），因为对象被传递到构造函数，然后在初始化成员时移动一个。

现在让我们考虑这个构造函数：

```
Account(std::string number, float amount, CreditCard& creditCard)
  : number(number), amount(amount), creditCard(creditCard) 
```

你是对的，这将涉及 的一个副本`creditCard`，因为它首先通过引用传递给构造函数。但是现在你不能将`const`对象传递给构造函数（因为引用是 non- `const`）并且你不能传递临时对象。例如，您不能这样做：

```
Account account("something", 10.0f, CreditCard("12345",2,2015,1001)); 
```

现在让我们考虑：

```
Account(std::string number, float amount, CreditCard&& creditCard)
  : number(number), amount(amount), creditCard(std::forward<CreditCard>(creditCard)) 
```

在这里，您展示了对右值引用和`std::forward`. `std::forward`只有当您转发的对象被声明`T&&`为某种*推导类型* 时，您才应该真正使用它`T`。这里`CreditCard`没有推导出来（我假设），因此`std::forward`错误使用了。查找[通用参考](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T15:57:25.537

> 对我来说最重要的事情有点不清楚：传递参数。

*   如果要修改函数/方法内部传递的变量
    *   你通过引用传递它
    *   您将其作为指针传递 (*)
*   如果要读取函数/方法内部传递的值/变量
    *   你通过 const 引用传递它
*   如果要修改函数/方法内部传递的值
    *   您*通常*通过复制对象来传递它（**）

(*)*指针可能指的是动态分配的内存，因此在可能的情况下，您应该更喜欢引用而不是指针，即使引用最终通常实现为指针。*

(**) *“通常”是指通过复制构造函数（如果您传递与参数相同类型的对象）或通过普通构造函数（如果您传递类的兼容类型）。例如，当您将对象传递为时`myMethod(std::string)`，如果将 an 传递给它，则将使用复制构造函数`std::string`，因此您必须确保存在一个。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T15:57:35.757

对于一般情况，我使用了一个非常简单的规则：对 POD (int, bool, double,...) 使用 copy，对其他所有内容使用 const & ...

想要复制与否，不是由方法签名来回答，而是更多地取决于你对参数所做的事情。

```
struct A {
  A(const std::string& aValue, const std::string& another) 
    : copiedValue(aValue), justARef(another) {}
  std::string copiedValue;
  const std::string& justARef; 
}; 
```

指针精度：我几乎从未使用过它们。唯一优于 & 的是它们可以为空或重新分配。**

# javascript - Node.js youtube 视频拦截以解决 youtube API

> ID：15600504
> 
> 赞同：1
> 
> 时间：2013-03-24T15:44:45.110
> 
> 标签：javascript, jquery, node.js, youtube

我是 Node.js、Socket.IO 和 Express.js 的新手，我正在尝试找出解决以下问题的最佳方法：

我开发了一个简单的网站（使用上述工具），它嵌入了一些 YouTube 视频，并允许用户在网站上观看它们（相当简单，对吧？）。问题是，如果这些视频在 YouTube 上被上传者删除，或者在您所在的国家/地区不可用，则 YouTube API 的 JSON 元数据中不会返回任何内容来让开发人员知道这一点。YouTube 仅显示带有白噪声的视频，并且：

> 错误：该视频在您所在的国家/地区不可用

为了避免这种情况，我正在考虑截取一些流媒体视频并确保它有内容。有人可以提出更好的方法吗？或者给我一些关于如何去做的想法？

# bash - 如何获取有关集群的信息？

> ID：15600506
> 
> 赞同：0
> 
> 时间：2013-03-24T15:44:51.227
> 
> 标签：bash, cluster-computing, pbs

我正在使用 Infiniband/Gigabit 集群并使用 PBS 提交作业。登录到新集群时，如何使用 bash 获取有关节点数量和可以在那里使用的 cpus/节点的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T10:05:53.827

可以通过执行获取有关可用队列的一些信息

```
qstat -Q 
```

要获取有关您执行的特殊队列*queuename的其他信息*

```
qstat -Qf queuename 
```

# android - 重新安装正在运行的android应用程序自己的APK，然后重新启动应用程序？

> ID：15600507
> 
> 赞同：2
> 
> 时间：2013-03-24T15:44:51.760
> 
> 标签：android, download, apk, application-restart, reinstall

在一个正在运行的 Android 应用程序中，我想请求同一个应用程序 (1) 从我的私人 Web 服务器重新下载，(2) 重新安装，然后 (3) 重新安装后重新启动。

我知道如何执行第 1 步和第 2 步，但我还没有弄清楚如何执行第 3 步。

下载后，我像这样执行第 2 步（**this.apkpath**之前已设置为我 sdcard 上下载的 APK 的完整路径名）：

```
try {
  Intent intent = new Intent(Intent.ACTION_VIEW);
  intent.setDataAndType(Uri.fromFile(new File(this.apkpath)),
                        "application/vnd.android.package-archive");
  this.activity.startActivity(intent);
}
catch (Throwable t) {
  // handle exceptions
} 
```

此代码成功后，我的屏幕上会弹出一个安装确认对话框，并在此确认后重新安装。但是，安装后，控制权返回到我的桌面管理器，我必须手动重新启动我新重新安装的应用程序。

在重新安装后，我可以通过编程方式强制应用程序自动重新启动吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:14:36.340

我想出了如何在重新安装后重新启动应用程序。如果它对其他人有帮助，这就是我的做法（注意在**startActivity之前添加的“** **addFlags** ”方法调用）：

 **```
try {
  Intent intent = new Intent(Intent.ACTION_VIEW);
  intent.setDataAndType(Uri.fromFile(new File(this.apkpath)),
                       "application/vnd.android.package-archive");
  // Add this line ...
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  this.activity.startActivity(intent);
}
catch (Throwable t) {
  // handle exceptions
} 
```

当我运行它时，我会在安装对话框之后看到一个打开的请求对话框。然后我可以单击“打开”，该应用程序确实会重新启动。这足以满足我的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:07:08.987

幸运的是，这在 Android 3.1 及更高版本上是不可能的；[您不能简单地在安装时启动应用程序](https://stackoverflow.com/a/2127179/154306)。具体来说，Mark Murphy 详细阐述：

> 应用程序必须首先由用户通过某种活动来调用。或者，您将需要`Intent`通过清单连接到一些相关的广播，这样您就可以在其中一个事件发生时获得控制，并以这种方式启动您的服务。或者，您将需要要求用户重新启动，以便您的`BOOT_COMPLETED` `Intent`过滤器可以控制。

换句话说，您可以连接`BOOT_COMPLETED`并启动您的应用程序，但这显然需要重新启动。

我建议回到绘图板并重新考虑您要在这里完成的工作。如果你真的打算采用这种特定的方法，那么有[这个糟糕的解决方法](https://stackoverflow.com/a/8532582/154306)，但我敦促你不要走那条路。

另一种方法可能是通过`AlarmManager`. 我不确定重新安装应用程序时是否删除了事件。

（我写“幸运”，因为这种行为会招致恶意软件的恶意使用，而且也不符合用户的意图。）**

# jboss - JBoss6 MDB 部署失败，但在 JBoss4.0.4 中部署良好

> ID：15600508
> 
> 赞同：0
> 
> 时间：2013-03-24T15:44:54.123
> 
> 标签：jboss, hornetq, message-driven-bean, jboss-mdb

我正在尝试将我在 JBoss-4.0.4.GA 环境中的 jar 部署到 JBoss-6.0.0.Final 环境中。我遇到了一个我不确定的问题。启动 JBoss 时出现此错误：

```
17:45:27,719 INFO  [EjbDeployer] installing bean: ejb/#MyMessageBean,uid33175643
17:45:27,719 INFO  [EjbDeployer]   with dependencies:
17:45:27,719 INFO  [EjbDeployer]   and supplies:
17:45:27,738 INFO  [EjbDeployer]        jndi:null
17:45:27,796 INFO  [EjbModule] Deploying MyMessageBean
17:45:27,918 ERROR [AbstractKernelController] Error installing to Create: name=jboss.j2ee:jndiName=local/MyMessageBean@16788767,service=EJB state=Configured mode=Manual requiredState=Create: java.lang.UnsupportedOperationException: Message driven beans are not bound into remote jndi 
```

我们正在使用 ejb 2.1。

我想我的部署描述符中有一些东西是 JBoss 4.0.4 可以容忍的，而 JBoss 6 则不能那么容忍。

META-INF/ejb-jar.xml

```
<message-driven>
    <description></description>
    <display-name>My Message Bean</display-name>
    <ejb-name>MyMessageBean</ejb-name>
    <ejb-class>com.myplace.MyMessageBean</ejb-class>
    <transaction-type>Container</transaction-type>
    <acknowledge-mode>Auto-acknowledge</acknowledge-mode>
    <message-driven-destination>
        <destination-type>javax.jms.Topic</destination-type>
        <subscription-durability>NonDurable</subscription-durability>
    </message-driven-destination>
</message-driven> 
```

和 META-INF/jboss.xml：

```
<enterprise-beans>
    <message-driven>
        <ejb-name>MyMessageBean</ejb-name>
        <destination-jndi-name>topic/MyTopic</destination-jndi-name>
        <configuration-name>My Message Driven Bean Container Configuration</configuration-name>
    </message-driven>
</enterprise-beans> 
```

我的部署描述符是由 xdoclet 生成的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:35:57.243

这个解决方案很奇怪——我从容器定义中删除了 MetricsInterceptor。报告的错误似乎与修复无关，但正是它造成了不同。希望这对其他人有帮助。

# facebook - 来自服务器端代码的 Facebook 帖子 - 如何获得工作访问令牌？

> ID：15600510
> 
> 赞同：2
> 
> 时间：2013-03-24T15:44:58.107
> 
> 标签：facebook, facebook-access-token

在花费数小时搜索和阅读许多帖子和 Facebook 文档后，我无法从我的服务器应用程序成功发布到 Facebook。希望有人可以提供帮助。

场景：从我在云中运行的工作线程中，当有人在我的基于 Web 的应用程序中执行和操作时，我想发布到我公司的 Facebook 应用程序。“现在有一个新的“空白”可用......“。

要从服务器端代码获取访问令牌，我使用了以下任何方法，并且确实得到了似乎是访问令牌的内容：

> [https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=) &client_secret=&scope=publish_stream,manage_pages,offline_access
> 
> [https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=) &client_secret=&scope=publish_stream,manage_pages

当我尝试使用访问令牌发布时，我得到 403 Forbidden Access。

然后我使用了[Facebook Graph API Explorer](https://developers.facebook.com/tools/explorer)。选择我的 Facebook 应用程序，单击“获取访问令牌”，系统提示我授予权限“publish_stream、manage_pages、offline_access”。获得了更长的访问令牌，暂时将其放入我的代码中并且它可以工作。我可以从我的服务器端代码发布到我的公司应用程序。

是的，我知道“离线访问”已被弃用。奇怪的是它仍然在 Graph API Explorer 中可用。

由于这是我公司的 Facebook 网站，我想以编程方式发布到它，而不提示用户授予权限。Twitter 支持这种情况。

任何指针？现在很吃亏。使用 c#。谢谢！

# javascript - 在 iPad 上处理 mouseenter 和 mouseleave

> ID：15600511
> 
> 赞同：4
> 
> 时间：2013-03-24T15:45:04.467
> 
> 标签：javascript, jquery, html

我有一个典型的下拉菜单，默认情况下是隐藏的，但通过以下 jQuery 魔术

```
<ul class="navNew">
    <li  class="test">
        <a href="#">OPTION</a>
        <ul>
            <li>Suboption -- Hidden</li>
        </ul>
    </li>
</ul>

$(".navNew li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
    $(this).toggleClass('hover');                                  
}); 
```

因此，使用 mouseenter 和 mouseleave，将“悬停”类添加到菜单中以使其可见或将其关闭以使其再次不可见。

这一切都像魅力一样，问题出在iPad上。单击将充当 mouseenter，但再次单击按钮不会充当 mouseleave，因此菜单永远不会再次关闭。是否可以修改此代码，以便单击也可以打开和关闭此菜单？

我创建了一个 jsFiddle 来解释我的菜单在做什么：http: [//jsfiddle.net/qgrt5/](http://jsfiddle.net/qgrt5/)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-24T16:04:48.357

工作示例：http: [//jsfiddle.net/qgrt5/](http://jsfiddle.net/qgrt5/)

**编辑**：下面的代码现在将检查用户是否来自 iPad，如果是，它将使用该`click`功能而不是`mouseenter`

```
var isiPad = navigator.userAgent.match(/iPad/i) != null;

if (isiPad) {
    $(".navNew li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
        $(this).toggleClass('hover');                                       
    });
}
else {
  $(".navNew li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
        $(this).toggleClass('hover');                                       
   });
} 
```

# css - 具有内部跨度/ div 的 DIV 水平自动边距

> ID：15600512
> 
> 赞同：0
> 
> 时间：2013-03-24T15:45:07.587
> 
> 标签：css, html

我正在尝试做的事情如此简单，但我的大脑今天拒绝运作！

```
<div id="outer">
    <div class="inner">TEXT 1</div>
    <div class="inner">TEXT 2</div>
    <div class="inner">TEXT 3</div>
</div> 
```

视觉上应该是这样的：

```
|---------------------------------------------------|
|    TEXT 1          TEXT 2            TEXT 3       |
|---------------------------------------------------| 
```

其中 .outer 是 100% 宽度，每个文本元素在其中等距分布。附言。如果这更容易，我可以将跨度用于内部元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:49:01.030

只需应用这个 CSS

```
#outer{
   width:100%;
   display:inline-block;
   border:1px solid #CCC;
}
.inner{
    float:left;
    width:29%;
    text-align:Center;
    border:1px solid green;
} 
```

看到这个[小提琴](http://jsfiddle.net/g7zfm/1/)

另外，请注意，单个内部 div 的宽度之和必须小于外部的总宽度，那么只有它们才会出现浮动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:49:34.580

```
#outer {
    display: inline-block;
    width: 100%;
}
.inner {
    float: left;
    width: 30%;
    margin: 5px;
    background-color: red;
} 
```

有些属性显然是要在[这把小提琴](http://jsfiddle.net/u9MQ9/)上标明的。

# sql - SQL INNER JOIN 表语法

> ID：15600513
> 
> 赞同：0
> 
> 时间：2013-03-24T15:45:10.110
> 
> 标签：sql, database, inner-join

我正在尝试在我有一个类 id 的地方进行 sql 查询，并且使用这个类 id 我需要获取用户 id，然后在另一个表上使用用户 id 来获取用户信息，例如名字，和姓氏。

这是我的表的样子：

![表名：类](../Images/ba0cb792c984a8d8ecc954f5651c591a.png) **表名：**类列表

![表名：学生](../Images/7b9acfba7e6ff9df3642d24b66135489.png) **表名：**学生

class.UID 和 student.UID 之间的关系设置正确。

这是我迄今为止尝试过但不起作用的方法（我是 PHP 和 SQL 的新手）：

```
$result = mysqli_query($con, "SELECT * FROM student INNER JOIN classlist ON student.UID=classlist.UID WHERE classlist.ClassID='$classID'"); 
```

此查询的正确 sql 语法是什么？

**附加说明** ClassID 源自名为 class 的表，而 UID 源自名为 student 的表，两者都有其关系设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:48:23.103

**工作小提琴**：

[http://sqlfiddle.com/#!2/6308d/2](http://sqlfiddle.com/#!2/6308d/2)

您的表格名称错误（根据您的帖子）

```
$result = mysqli_query($con, "SELECT * FROM student INNER JOIN class ON student.UID=class.UID AND class.ClassID='$classID'"); 
```

另外，我改为`Where`因为`And`它是一个加入条件

# mysql - ruby 1.9.3 db：迁移问题

> ID：15600519
> 
> 赞同：1
> 
> 时间：2013-03-24T15:45:24.720
> 
> 标签：mysql, ruby-on-rails-3, rake

所以我正在尝试迁移我创建的数据库，但我不断收到这一系列错误。不知道该怎么办！谢谢

```
Camerons-MacBook-Air:depot Cameron$ rake db:migrate
rake aborted!
dlopen(/Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib
Referenced from: /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
Reason: image not found - /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `require'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `<top (required)>'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
/Users/Cameron/depot/config/application.rb:7:in `<top (required)>'
/Users/Cameron/depot/Rakefile:5:in `require'
/Users/Cameron/depot/Rakefile:5:in `<top (required)>'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `eval'
/Users/Cameron/.rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T13:19:58.610

我做了一些研究和这行代码

`sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib`

为我工作。

您可以在原始来源的此链接中找到更多信息：[mysql2 library not loaded](http://blog.tejasparikh.com/2013/04/how-to-fix-library-not-loaded.html)

# google-maps - Google Maps API - 具有重复纬度和经度的标记

> ID：15600523
> 
> 赞同：0
> 
> 时间：2013-03-24T15:45:39.603
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, latitude-longitude

我有一个显示多达 30 个标记的地图，这些标记都是在用户查询时从商店数据库表中加载的。该表中存储了数千个。

**问题：**

数据库中的某些经纬度是重复的，这是必需的。当这些被绘制在地图上时，它们相互重叠。导致用户看不到所有标记，用户需要单击这些标记以显示更多信息等。

**问题：** 是否可以在地图上显示那些隐藏的标记？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:03:07.313

我遇到了同样的问题，并且没有选择[聚类](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html "聚类")，因为标记具有完全相同的纬度和经度。我也尝试过[spiderfier](https://github.com/jawj/OverlappingMarkerSpiderfier "蜘蛛侠")库，但我不太喜欢它，因为用户一眼看不到有多少标记在一个点上。

在将标记添加到地图的函数中，我遍历了标记数组并比较了标记的位置。如果他们有相同的纬度和经度，我会添加一点偏移量。几乎就像[这个](https://gis.stackexchange.com/questions/15436/google-markers-at-same-address-not-showing-all-markers "将偏移量添加到相似的标记位置")线程的第一个答案中的解决方案。现在标记不在同一位置，但仍然重叠。所以我添加了一个“鼠标悬停”事件来提高标记的 z-index。见[这里](http://biostall.com/bring-google-map-marker-to-front-on-hover)。

希望这可以帮助！快乐编码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:51:50.867

如果标记具有相同的坐标，那么它们将被放置在相同的位置。这是一种正常的行为，这就是它的工作原理。

您的问题的解决方案应该是不显示隐藏的标记，而是接收与地图中已经出现的图标具有相同坐标的图标，编辑地图中的当前标记并向其添加新的数据要设置的标记。

这样，当前标记将代表两家商店。

# javascript - 使用底层客户端 JSON 数据连接、构建和操作 JQuery UI

> ID：15600525
> 
> 赞同：0
> 
> 时间：2013-03-24T15:45:54.967
> 
> 标签：javascript, jquery, ajax, json

我正在使用一个静态 JSON 文件，该文件用于填充基于 JQuery 的可排序列表。

例如：

```
[
     { "id": 0, "movie_name": "Manhattan", "location":"NY" },
     { "id": 1, "movie_name": "A Wonderful Life" }
] 
```

该网页遍历 JSON 数组并构建一个可排序的电影名称字段列表以及每个允许用户输入评论的附加文本框。还允许用户重新排序最终将保留在服务器端的列表。每个项目可能有其他项目中没有出现的字段，例如，第一个项目中的“位置”，但第二个项目中没有。'id' 字段存在于每个项目中，表示电影的唯一标识符，但不显示。

完成后，我希望用户能够将列表提交回服务器，并将详细信息添加或重新排序为 JSON，类似于：

```
[
     { "id": 1, "movie_name": "A Wonderful Life", "review":"user entered data" }
     { "id": 0, "movie_name": "Manhattan", "location":"NY", "review":"user entered data" },
] 
```

我不确定维护和构建发送回服务器的 JSON 数组的最佳方式。

我的主要问题是，当 UI 组件被操作和提交时，如何将它们连接回底层 JSON 对象？

最好在字段更改时更新底层 JSON 数据（如果是，如何？），还是在用户提交数据后重建 JSON 数据（后一种方法不一定对所有未显示的字段都可见）。

希望这是有道理的。:)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:38:27.307

JSON 是一种数据格式，而不是数据。在您的示例中，您应该在页面加载中通过 id 将这些 json 解析为一些类似哈希的对象。然后在每次 ui 更新时更新该对象。最近提交 - 将该对象转换回类似数组的结构，然后仅将其转换为 JSON。现在您将在服务器上拥有它。

# neo4j - 多个 neo4j 实例配置

> ID：15600529
> 
> 赞同：0
> 
> 时间：2013-03-24T15:46:45.877
> 
> 标签：neo4j, spring-data-neo4j

我想知道在使用 Spring Data 时如何设置两个不同的 neo4j 服务器实例，例如一个用于测试，另一个用于生产目的。我的生产服务器实例在默认端口 (7474) 上运行，我的测试服务器实例在端口 7475 上运行。如何定义我的节点/关系实体应该存储在哪里（在这种情况下，无论是在测试环境还是生产环境中）？我无法在文档中找到它。到目前为止，这是我的 beans 文件，所有东西都开箱即用（当我只使用一个 neo4j 服务器实例时）：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:context="http://www.springframework.org/schema/context"
          xmlns:mongo="http://www.springframework.org/schema/data/mongo"
          xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
          xsi:schemaLocation=
          "http://www.springframework.org/schema/context
          http://www.springframework.org/schema/context/spring-context-3.0.xsd
          http://www.springframework.org/schema/data/mongo
          http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
          http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/data/neo4j
          http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd">

    <!-- Neo4j -->
    <neo4j:config storeDirectory="data/graph.db"/>
    <neo4j:repositories base-package="repositories.neo4j"/>

    <!-- some more stuff --> 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:30:26.987

如果您使用的是 maven，还请考虑使用 maven 配置文件。这是spring和maven配置文件之间的一个很好的比较：[maven配置文件还是spring配置文件？](https://stackoverflow.com/questions/11869064/maven-profiles-or-spring-profiles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:35:34.953

您可以从[Spring 环境抽象](http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/)或[Spring 配置文件](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)中受益。它们都允许依赖于环境的配置。

# c# - 如何使用 ADO.Net C# 将 null 插入 sql 数据库

> ID：15600535
> 
> 赞同：7
> 
> 时间：2013-03-24T15:47:41.663
> 
> 标签：c#, asp.net, ado.net

我有一个 DropDownList，它显示基于来自另一个 ddl 的 SetID 的子集集合，有时它为空。我如何将空值插入数据库？我尝试使用此代码但不起作用：

```
CmdUpdate.Parameters.Add("@SubsetID",SqlDbType.Int);
if (ddlSubset.Items.Count!=0)
{
  CmdUpdate.Parameters["@SubsetID"].Value=ddlSubset.SelectedValue;
}
esle
{
  CmdUpdate.Parameters["@SubsetID"].Value=null;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-24T15:48:49.777

使用[`System.DBNull`](http://msdn.microsoft.com/pl-pl/library/system.dbnull.aspx)类：

```
CmdUpdate.Parameters["@SubsetID"].Value = DBNull.Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:49:32.907

使用 DBNull：

```
CmdUpdate.Parameters["@SubsetID"].Value = DBNull.Value; 
```

# php - 使用 PHP 每 n 分钟获取一次数据

> ID：15600540
> 
> 赞同：0
> 
> 时间：2013-03-24T15:48:03.963
> 
> 标签：php

如何每 5 分钟获取指定 URL 的共享数量？

这是我从 twitter 获取共享数量的代码：

```
function twittershares($url) {

 $s = file_get_contents("http://urls.api.twitter.com/1/urls/count.json".
 "?callback=?&url=".urlencode($url));

 preg_match("#(\"count\"):([0-9]*)#",$s,$ar);

 return isset($ar[2]) ? $ar[2] : 0;
 }

 echo twittershares("http://abc1234.com"); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:50:29.953

您将要设置一个[cron 作业](http://en.wikipedia.org/wiki/Cron)以每 x 分钟运行一次 - 无论您想要什么 - 并且该 cron 作业将调用您的脚本，该脚本将在该时间间隔运行您想要的代码。

这是我开始学习时使用的教程：[Tutorial on setting up cron job](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)

最后一次编辑，这是您的 cron 作业的 URL 可能的样子：

```
wget -N http://yoursite.com/yourscript.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:56:17.070

好吧，您有两个选项使用纯 php 1.Cron 作业，例如 ppl 已经编写的或 2.更奇特的东西，[编写一个小型 php 守护程序](http://stuporglue.org/writing-a-daemon-with-php/)，以防您需要同时向多个 url 发出请求。

# java - 如何将剪贴板中的数据粘贴到textarea

> ID：15600541
> 
> 赞同：1
> 
> 时间：2013-03-24T15:48:06.417
> 
> 标签：java, swing

当我使用 getTransferData(DataFlavor.stringFlavor) 从剪贴板粘贴一些文本时，例如：

```
Transferable t = Toolkit.getDefaultToolkit().getSystemClipboard().getContents(null);
    String text=null;
    if (t != null && t.isDataFlavorSupported(DataFlavor.stringFlavor)) {
         text= (String) t.getTransferData(DataFlavor.stringFlavor);
    } 
```

我得到异常 javax.swing.text.BadLocationException: Invalid location。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:50:59.363

[从 API](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/BadLocationException.html)：

> 尝试引用不存在的位置。

因此，您必须仔细检查 GUI 代码。

但这似乎是 Swing 部分中的错误，而不是因为`getTransferData(DataFlavor.stringFlavor)`它本身

# android - 在自定义 Iguana UI 工具集方面需要帮助：

> ID：15600549
> 
> 赞同：2
> 
> 时间：2013-03-24T15:48:47.497
> 
> 标签：android, charts, infragistics, iguana-ui

我目前正在开发一个需要显示图表的应用程序，我选择了 IguanaUI 工具集来显示应用程序中的图表：

[http://www.infragistics.com/products/android/](http://www.infragistics.com/products/android/)

现在我在自定义图表时遇到了一些问题，这里是当前结果的屏幕截图 a 设法实现：

![在此处输入图像描述](../Images/1f908e9f5a356d0bb76d6a9227291b7a.png)

**我的问题是：**

1.  **橙色：** 如果您看到 Y 轴标签被“切断”并且不显示全长。我想展示完整的标签。（包括从底部由于某种原因被截掉的0）

2.  **绿色：**我想从图表背景中移除黑条并设置我自己的背景图像。

设置`android:background`为 XML 布局文件中的图表对象，将背景设置为整个对象（包括轴）并且不删除黑条。

我希望图像仅应用于列区域（没有轴）。

**更新：** 我发现你可以申请：

```
dataChart.setGridDisplayType(GridDisplayType.NONE); 
```

到`DataChart`对象，但这`Axis`也删除了内部网格，而不仅仅是内部网格。

**UPDATE2：**这是我`ChartFragment`创建图表的：

```
public class ChartFragment extends Fragment 
{
private Tab tab;

private static final String TAG = ChartFragment.class.getSimpleName();
LinearLayout fragmetLayout, llParameterContainer;
private DataChart dataChart;
private List<String> categories;
private List<Float> column1;
private List<Float> column2;
private List<List<Float>> columnList;
TextView tabName;

public ChartFragment(Tab tab)
{
    this.tab = tab;
}

 /** (non-Javadoc)
 * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
 */
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    if (container == null) {
        // We have different layouts, and in one of them this
        // fragment's containing frame doesn't exist.  The fragment
        // may still be created from its saved state, but there is
        // no reason to try to create its view hierarchy because it
        // won't be displayed.  Note this is not needed -- we could
        // just run the code below, where we would create and return
        // the view hierarchy; it would just never be used.
        return null;
    }

    fragmetLayout = (LinearLayout)inflater.inflate(R.layout.chart_fragment_layout, container, false);
    createData();
    createChart();
    createUI();

    return fragmetLayout;
}

/*
private void createData() {

    categories=new ArrayList<String>();
    column1=new ArrayList<Float>();
    column2=new ArrayList<Float>();
    columnList = new ArrayList<List<Float>>();

    Random random=new Random();
    float value1=25.0f;
    float value2=25.0f;

    for(int i=0; i<20; ++i) {
        value1+=2.0*(random.nextFloat()-0.5f);
        value2+=2.0*(random.nextFloat()-0.5f);

        categories.add(Integer.toString(i));
        column1.add(value1);
        column2.add(value2);
    }       
}
*/

private void createData() 
{            
    categories=new ArrayList<String>();
    column1=new ArrayList<Float>();
    column2=new ArrayList<Float>();
    columnList = new ArrayList<List<Float>>();

    for (int i=0; i < tab.getChart().getChartMeasuresList().size(); i++)
    {
        //categories.add(Integer.toString(i)); //the x axis.
        Measure tempMeasure = tab.getChart().getChartMeasuresList().get(i);
        final int measureDataSize = tempMeasure.getMeasureData().size();
        Log.d(TAG, "current tempMeasure: " + tempMeasure.getMeasureData().toString() + " with: "+ measureDataSize + " measure data items." );
        for (int j=0; j < measureDataSize; j++)
        {
            if (i == 0)
            {
                categories.add(tempMeasure.getMeasureData().get(j).getLabel());
            }
            column1.add(Float.valueOf(tempMeasure.getMeasureData().get(j).getValue())); //column data
            Log.d(TAG, "add value " + tempMeasure.getMeasureData().get(j).getValue() + " at label/category: "+ tempMeasure.getMeasureData().get(j).getLabel());
            //column2.add(value2); //column2 data
        }
        columnList.add(column1);
        column1=new ArrayList<Float>();
    }       
}

private void updateData() {
    /*
    Random random=new Random();
    float value1=25.0f;
    float value2=25.0f;

    for(int i=0; i<categories.size(); ++i) {
        value1+=2.0*(random.nextFloat()-0.5f);
        value2+=2.0*(random.nextFloat()-0.5f);

        column1.set(i, value1);
        column2.set(i, value2);
    }
    */
}

private void createChart() {
    dataChart=(DataChart) fragmetLayout.findViewById(R.id.dataChart);   // get the empty chart view from the activity layout
    dataChart.setHorizontalZoomEnabled(true);           // allow horizontal zooming
    dataChart.setVerticalZoomEnabled(false);            // don't allow vertical zooming
    dataChart.setGridDisplayType(GridDisplayType.BACK);
    dataChart.setBackgroundColor(getResources().getColor(R.color.light_gray));

    // set up an x axis
    CategoryXAxis categoryAxis=new CategoryXAxis(); 
    categoryAxis.setVisibility(View.VISIBLE);
    categoryAxis.setDataSource(categories);             // tell the axis about the data table
    Brush brush = categoryAxis.getLabelBrush();
    categoryAxis.setLabelTextSize(20);
    brush.setColor(Color.BLACK); 
    categoryAxis.setGap(1.0f);
    categoryAxis.setLabelBrush(brush);
    categoryAxis.setLabelFormatter(new CategoryAxis.LabelFormatter() {
        public String format(CategoryAxis axis, Object item) {
            return (String)item;                        // return the axis item as a string
        }
    });
    //categoryAxis.setBrushes(Color.BLACK);
    dataChart.scales().add(categoryAxis);               // all axes must be added to the chart's scales collection

    // set up a y axis

    NumericYAxis valueAxis=new NumericYAxis();
    valueAxis.setLabelTextSize(15);
    valueAxis.labelAreaRect.set(30, 30, 30, 30);
    valueAxis.setVisibility(View.VISIBLE);

    Brush brush2 = valueAxis.getLabelBrush();
    brush2.setColor(Color.BLACK); 
    valueAxis.setLabelBrush(brush2);
    valueAxis.setMinimumValue(-10.0f);
   // valueAxis.setMaximumValue(110.0f);
    //valueAxis.setMinimumValue(0.0f);                  // the random data look much nicer with a fixed axis range
    //valueAxis.setMaximumValue(50.0f);                 // the random data look much nicer with a fixed axis range
    valueAxis.setLabelFormatter(new NumericAxis.LabelFormatter() {
        public String format(NumericAxis axis, float item, int precision) {
            if(precision!=numberFormat.getMinimumFractionDigits()) {
                numberFormat.setMinimumFractionDigits(precision);   // set the formatting precision
                numberFormat.setMaximumFractionDigits(precision);   // set the formatting precision
            }

            return numberFormat.format(item);                       // return item as a string
        }

        final NumberFormat numberFormat=NumberFormat.getInstance(); // numeric formatter for axis values
    });
    dataChart.scales().add(valueAxis);                  // all axes must be added to the chart's scales collection

    for (int i=0; i < columnList.size(); i++)
    {
        ValueCategorySeries series=new ColumnSeries();  
        series.setCategoryAxis(categoryAxis);           // tell the series its x axis
        series.setValueAxis(valueAxis);                 // tell the series its y axis
        series.setValueMember("");                      // tell the series the data rows are the values
        Log.d(TAG, "setting serias_"+i+": "+columnList.get(i).toString());
        series.setDataSource(columnList.get(i));                    // tell the series the data table
        dataChart.series().add(series);                 // add the series to the chart
    }
    /*
    {
        ValueCategorySeries series=new ColumnSeries();  
        series.setCategoryAxis(categoryAxis);           // tell the series its x axis
        series.setValueAxis(valueAxis);                 // tell the series its y axis
        series.setValueMember("");                      // tell the series the data rows are the values
        series.setDataSource(column1);                  // tell the series the data table
        dataChart.series().add(series);                 // add the series to the chart
    }

    {
        ValueCategorySeries series=new ColumnSeries();  
        series.setCategoryAxis(categoryAxis);           // tell the series its x axis
        series.setValueAxis(valueAxis);                 // tell the series its y axis
        series.setValueMember("");                      // tell the series the data rows are the values
        series.setDataSource(column2);                  // tell the series the data table
        dataChart.series().add(series);                 // add the series to the chart
    }
    */
}

private void createUI() {
    Button updateButton=(Button) fragmetLayout.findViewById(R.id.updateButton);

    updateButton.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            updateData();

            for(Series series: dataChart.series()) {
                series.notifyDataReset();
            }
        }
    });

    Button overlapButton=(Button) fragmetLayout.findViewById(R.id.overlapButton);

    overlapButton.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            CategoryXAxis categoryAxis=(CategoryXAxis)dataChart.scales().get(0);

            categoryAxis.setOverlap(2.0f*new Random().nextFloat()-1.0f);
        }
    });

    Button gapButton=(Button) fragmetLayout.findViewById(R.id.gapButton);

    gapButton.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            CategoryXAxis categoryAxis=(CategoryXAxis)dataChart.scales().get(0);

            categoryAxis.setGap(new Random().nextFloat());
        }
    });
}
} 
```

有没有人有这个工具的经验？我整天都在查看他们的文档以了解如何执行这些任务，但到目前为止还没有结果。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T19:04:28.630

在当前发布的 IguanaUI 版本中，删除网格的最佳选择是调用 setMinorBrush()、setMajorBrush() 和 setStripBrush()，并使用 null 或透明的纯色画笔。

至于垂直轴标签被剪裁，您可以增加轴的大小以处理标签左侧或右侧被剪裁的情况。目前没有办法解决垂直轴顶部和底部的剪裁。

# android - ActionBar 应用程序图标作为主页

> ID：15600555
> 
> 赞同：1
> 
> 时间：2013-03-24T15:49:02.013
> 
> 标签：android, android-actionbar, icons

我希望左上角的应用程序图标在按下时返回，我正在使用

```
setDisplayHomeAsUpEnabled(true); 
```

图标旁边的箭头出现了，但是按下它实际上并没有做任何事情，为什么？这是我的创建：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    android.app.ActionBar ab = getActionBar();
    ab.setTitle("Aritmetik");
    ab.setDisplayHomeAsUpEnabled(true);
    setListAdapter(new ArrayAdapter<String>(Aritmetik.this, android.R.layout.simple_list_item_1, classes));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:04:29.150

你必须覆盖`onOptionsItemSelected()`.

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, HomeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

（来自[http://developer.android.com/guide/topics/ui/actionbar.html#Home](http://developer.android.com/guide/topics/ui/actionbar.html#Home)）

# python - 文件语句中的警告

> ID：15600561
> 
> 赞同：-1
> 
> 时间：2013-03-24T15:49:50.750
> 
> 标签：python, warnings

我收到警告：`Assignment to reserved built-in symbol: file` 在这个命令上：

```
file=open(fileName,'r') 
```

有什么具体原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T15:51:28.457

[`file`](http://docs.python.org/2/library/functions.html#file)是 Python 中内置的全局名称。它警告你不要重新定义它。

# javascript - 使用 JSON 存储和输出单选按钮

> ID：15600564
> 
> 赞同：0
> 
> 时间：2013-03-24T15:50:12.390
> 
> 标签：javascript, ajax, json

我有一个用户登录的页面，他们可以看到他们必须完成的静态任务列表，我为每个任务添加了一个单选按钮，如下所示：

```
<div data-role="collapsible-set">
    <div data-role="collapsible">
        <h3>12 Months</h3>
        <div id="task_1" data-role="fieldcontain">
            <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                <legend></legend>
                <input id="radio3" name="" value="" type="radio">
                <label for="radio3">Begin Research</label>
            </fieldset>
        </div> 
```

对所有任务重复相同的代码。使用 AJAX，我如何获取每个单选按钮的值并将其保存到数据库中，以便他们重新登录时可以看到他们单击的单选按钮？

# java - GridBagLayout 修复由权重 x/y 设置的空间

> ID：15600565
> 
> 赞同：0
> 
> 时间：2013-03-24T15:50:13.220
> 
> 标签：java, swing, layout-manager, gridbaglayout

我有一个具有以下 3 个 JPanel 布局的框架。

```
----------------------------
|   |                      |
| l |                      |
| e |  //toppanel          |
| f |                      |   
| t |----------------------|
| p |                      |
| n |  //bottompanel       |
| l |                      |
|   |                      |
---------------------------- 
```

我通过使用实现了这一点`GridBagLayout`

这是该布局的代码

```
public class UITests extends JFrame{
    public UITests(){
        setLayout(new GridBagLayout());

        //the three main panels
        JPanel leftPanel = new JPanel();
        JPanel topPanel = new JPanel();
        JPanel bottomPanel = new JPanel();

        leftPanel.setBackground(Color.YELLOW);
        topPanel.setBackground(Color.GREEN);
        bottomPanel.setBackground(Color.PINK);

        //position the three main panels
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridheight = 2;
        gbc.gridwidth = 1;
        gbc.fill = gbc.BOTH;
        gbc.weightx = .2;
        gbc.weighty = 1;
        getContentPane().add(leftPanel, gbc);

        gbc = new GridBagConstraints();
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.gridheight = 1;
        gbc.gridwidth = 1;
        gbc.fill = gbc.BOTH;
        gbc.weightx = .8;
        gbc.weighty = .5;
        getContentPane().add(topPanel, gbc);

        gbc = new GridBagConstraints();
        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.gridheight = 1;
        gbc.gridwidth = 1;
        gbc.fill = gbc.BOTH;
        gbc.weightx = .8;
        gbc.weighty = .5;
        getContentPane().add(bottomPanel, gbc);

        setSize(600,600);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public static void main(String[] args){
        new UITests();
    }
} 
```

问题是，当我`JTable`在顶部面板中添加 a 时，底部面板的高度会缩小，就像它的一些高度被顶部面板占用一样。这是顶部面板中表格的代码，在设置三个主面板的背景后添加。

```
Object[][] contents = {{"haha","hehe", "hihi", "hoho", "huhu"},
        {"haha","hehe", "hihi", "hoho", "huhu"},
        {"haha","hehe", "hihi", "hoho", "huhu"},
        {"haha","hehe", "hihi", "hoho", "huhu"}};
Object[] heads = {"Haha Head", "Hehe Head", "Hihi Head", "Hoho Head", "Huhu Head"};
JTable table = new JTable(contents, heads);
JScrollPane scrollTable = new JScrollPane(table);

//add components to topPanel
GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.gridheight = 1;
gbc.gridwidth = 1;
gbc.weightx = 1;
gbc.weighty = 1;
gbc.fill = gbc.BOTH;
topPanel.setLayout(new GridBagLayout());
topPanel.add(scrollTable, gbc); 
```

框架现在看起来像

```
----------------------------
|   |                      |
| l |                      |
| e |  //toppanel          |
| f |  //new table created |   
| t |                      |
| p |                      |
| n |                      |
| l |----------------------|
|   |  //bottompanel       |
---------------------------- 
```

那么，如何使“weightx”或“weighty”创建的空间固定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:20:12.407

`weightx/weighty`用于分配额外的空间。所以实际上容器会询问孩子他们喜欢的大小，如果它小于可用的，额外的像素会根据权重分配。

`JScrollPane`因此，您可以定义保存的首选大小`JTable`

# java - PHP API 中的语法错误

> ID：15600568
> 
> 赞同：1
> 
> 时间：2013-03-24T15:50:29.003
> 
> 标签：java, php, android, mysql, json

我正在开发一个 android 应用程序，我需要一个 PHP API 才能让我的应用程序与 SQL 数据库通信。

我在解析 JSON 时出错`getJarrayFromString();`

然后我尝试记录实际错误，如下所示：

```
03-24 15:41:12.175: E/JustDealsUtils(480): Error parsing to json on getJarrayFromString(); org.json.JSONException: Value Database of type java.lang.String cannot be converted to JSONArray
03-24 15:41:12.175: E/log_tag(480): Failed data was:
03-24 15:41:12.175: E/log_tag(480): Database query failed You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'bCode` LIKE '%%' AND `bTitle` LIKE '%%' AND `bModule` LIKE '%%'' at line 1 
```

现在上面的日志很好地阐明了错误在于我的`books.php`API，如下所示：

```
<?php
    include("MysqlConnection.php");
    header('Content-Type: application/json');
    $from = $_POST["from"];
    $nr = $_POST["nr"];
    // those variables are for search
    $title = $_POST["title"];
    $code = $_POST["code"];
    $price = $_POST["price"];
    $module = $_POST["module"];
    $order = $_POST["order"];
    $by = $_POST["by"];

    $sql = "SET CHARACTER SET utf8";
    $db->query($sql);

    if(isset($from) && isset($nr)){
        // we need to know how many rows are in total for this query
<PROBLEM IS HERE---> $sql = "SELECT * FROM `books` WHERE `bSpecialOffer`='false' AND `bCode` LIKE '%$code%' AND `bTitle` LIKE '%$title%' AND `bModule` LIKE '%$module%'";
        $query = $db->query($sql);

        $rows = array();
        $rows[] = array("numRows"=>$db->numRows($query));

        // if those 2 var are set then we order the query after them
        if(isset($order) && isset($by)){
            $sql .= " ORDER BY `$order` $by LIMIT $from, $nr";
        }else{
            $sql .= "LIMIT $from, $nr";
        }

        $query = $db->query($sql);

        if($db->numRows($query)!=0){
            while($row = mysql_fetch_assoc($query)) {
                $rows[] =  $row;
            }
            echo json_encode($rows);
        }
    }

    $db->closeConnection();
?> 
```

我很困惑我的陈述在 PHP 中是如何错误的，正如上面在 Log Cat 中提到的那样！

有没有另一种写法：

```
$sql = "SELECT * FROM `books` WHERE `bSpecialOffer`='false' AND `bCode` LIKE '%$code%' AND `bTitle` LIKE '%$title%' AND `bModule` LIKE '%$module%'"; 
```

您的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:54:44.320

sql 查询到目前为止是正确的，但是您传递的值是空的。

的价值

```
 $code = $_POST["code"];
    $price = $_POST["price"];
    $module = $_POST["module"]; 
```

是空的。尝试确保已设置该值。

有时双引号对此负责。然后尝试用单引号替换它们

```
 $code = $_POST['code'];
    $price = $_POST['price'];
    $module = $_POST['module']; 
```

# javascript - 提示框未关闭

> ID：15600570
> 
> 赞同：0
> 
> 时间：2013-03-24T15:50:46.377
> 
> 标签：javascript

请帮助这个 div 警报框...它不会在点击事件时关闭

```
<script type="text/javascript">
    $(document).ready(function(){   
    $('.nof-close').click(function(){
            $('.afp-p-now').fadeOut();
            $('.afp-p-now').css('display','none');

        }); 

    }); 
    </script>

<div class="flash-messages container afp-p-now">
        <div class="flash flash-notice">Welcome to website...You are currently viewing me  
        <span class="mini-icon mini-icon-remove-close nof-close close"></span>
        </div>
        </div> 
```

任何想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:17:35.053

那是因为没有什么可以点击的，span没有内容。尝试这个：

```
<script type="text/javascript">
$(document).ready(function(){   
    $('.nof-close').click(function(){
        $('.afp-p-now').fadeOut();        
    });    
});
</script>
<div class="flash-messages container afp-p-now">
     <div class="flash flash-notice">Welcome to website...You are currently viewing me  
         <span class="mini-icon mini-icon-remove-close nof-close close">[Click here to close]</span>
     </div>
</div> 
```

您还可以将跨度更改为按钮 ( `<button class="mini-icon mini-icon-remove-close nof-close close">Close</button>`)。

# clojure - clojure - 解析 let 中的符号

> ID：15600573
> 
> 赞同：5
> 
> 时间：2013-03-24T15:50:56.960
> 
> 标签：clojure, lisp

如何编写函数来解析词法环境中的符号？

```
(let [foo some-var]
  (let [sym 'foo]
    (resolve-sym sym))) 
```

我想得到 'foo 绑定到的 var。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T05:12:04.043

我不完全确定为什么我想要这样的东西，但看起来它肯定可以做到。来自[http://clojuredocs.org/circumspec/circumspec.should/local-bindings](http://clojuredocs.org/circumspec/circumspec.should/local-bindings)

```
(defmacro local-bindings
  "Produces a map of the names of local bindings to their values.
   For now, strip out gensymed locals. TODO: use 1.2 feature."
  []
  (let [symbols (remove #(.contains (str %) "_")
                        (map key @clojure.lang.Compiler/LOCAL_ENV))]
    (zipmap (map (fn [sym] `(quote ~sym)) symbols) symbols)))

(let [foo 1 bar 2]
  (local-bindings))
=> {foo 1, bar 2} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:47:08.793

这里比你想要的更多、更少和偏斜：

```
(define (make-let-core name value body)
  `(CORE LET ,name ,value ,body))

(define (env-extend env a-name its-denotation)
  (lambda (name)
    (if (equal? name a-name)
        its-denotation
        (if env (env name) 'unknown))))

(define (env-base)
  (lambda (name)
    (if (member name '(let resolve-sym #| ... |#))
        'syntactic-keyword
        'unknown)))

(define (expand exp env)
  (cond ((literal? exp) ...)
        ((symbol?  exp) ...)
        ((list? exp)
         (let ((operator (car exp))
               (operands (cdr exp)))
           (cond ((symbol? operator)
                  (case (env operator)
                    ((syntactic-keyword)
                     (case operator
                       ((let)
                        (let ((bound-name  (caar  operands))
                              (bound-value (cadar operands))
                              (body (cdr operands)))
                          (make-let-core bound-name
                                         (expand bound-value env)
                                         (expand body
                                                 (env-extend bound-name
                                                             'variable)))))
                       ((resolve-sym)
                        (let ((name (car operands)))
                          ;; right here
                          ...))
                       (...)))
                    ((variable) ;; function call
                     ...)

                    ((unknown)  ;; syntax error
                     ...)))

                 ((list? operator) ;; function call
                  ...)

                 (else ;; syntax error
                  ...))))
        (else ;; syntax error
         ...))) 
```

# matlab - matlab有评论约定吗？

> ID：15600587
> 
> 赞同：0
> 
> 时间：2013-03-24T15:52:00.690
> 
> 标签：matlab, comments

我尝试搜索 Google 以获得 Matlab 代码的注释约定。我发现了一些准则，例如“您应该清楚地写出评论并易于阅读”。但是，没有这样的文件解释了多少个空格，多少个 % 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:55:17.547

这个“MATLAB 编程风格指南”有一个关于评论的部分：[http](http://www.datatool.com/downloads/matlab_style_guidelines.pdf) ://www.datatool.com/downloads/matlab_style_guidelines.pdf我认为这是你能找到的最好的。

# php - 将过滤器行为添加到 json_encode()

> ID：15600589
> 
> 赞同：2
> 
> 时间：2013-03-24T15:52:15.147
> 
> 标签：php

我有一个数组，我为我正在构建的 API 编码为 JSON，该数组来自数据库，并包含一些我在 JSON 响应中不想要的数据。所以我当然可以做的只是遍历数组，修改它，然后将修改后的数组传递给`json_encode()`. `json_encode`但是当 json_encode() 本身迭代它时，我认为如果我能以某种方式告诉它在生成 JSON 时过滤掉某些键，我可以提高性能甚至可读性。

似乎`json_encode`无法做到这一点，但也许还有其他东西我可以用来编码为 json 呢？我看到 json_encode() 有一个可以改变行为的选项参数，但你似乎不能添加你自己的？

例如，我记得我曾经浏览过一个 json 解析器类，它有一个名为类似的方法`parseKey($key, $val)`，如果你想添加一个过滤器，你可以重写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:21:05.187

你可以这样做：

```
$data = array("foo"=>1, "bar"=>2, "baz"=>3);
$rmk = array("foo");
$json = json_encode(array_diff_key($data, array_flip($rmk))); 
```

这将过滤掉带有 in 键的值`$rmk`。但是，当谈到提高可读性时，我不确定。

# java - GWT 突然停止执行

> ID：15600590
> 
> 赞同：1
> 
> 时间：2013-03-24T15:52:15.667
> 
> 标签：java, http, gwt

我对 GWT 有一个不寻常的问题。我在浏览器上编译项目后打开 .html 文件来运行它。它运行良好，直到出现以下代码行：

```
public static ClickHandler addBoardButtonHandler(final String name) {
    return new ClickHandler(){

        @Override
        public void onClick(ClickEvent event) {
            Window.alert("We will retrieve them!"); //this line runs
            String boardSTickets = getBoardSTickets(name); // this too
            Window.alert("We got tickets!"); // the code is never executing this line
            String boardSSwimlanes = getBoardSSwimlanes(name);
            Window.alert("We got swimlanes!");
            KanbanizerClient.showSingleBoard(boardSTickets, boardSSwimlanes);
        }

    };
} 
```

此方法由其他方法调用：

```
private static Button addBoardButton(String name) {
    Button button = new Button(name);
    button.addClickHandler(HandlerManager.addBoardButtonHandler(name));
    return button;
} 
```

这也运行正常。这是 getBoardSTickets() 方法：

```
protected static String getBoardSTickets(String name) {
    final List<String> ticketsJSON = new LinkedList<String>();  
    try {
            Request request = Builder.createBuilder(RequestBuilder.GET, "http://localhost:8080/Kanbanizer/boards/" + name + "/tickets").sendRequest(null, new RequestCallback(){

                @Override
                public void onResponseReceived(Request request,
                        Response response) {
                    if(response.getStatusCode() == 200){
                        ticketsJSON.add(response.getText());
                    }

                }

                @Override
                public void onError(Request request, Throwable exception) {
                    // TODO Auto-generated method stub

                }

            });
        } catch (RequestException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    return ticketsJSON.get(0);
} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:12:06.403

**要了解 GWT 上下文中的 ajax - 请阅读[https://developers.google.com/web-toolkit/doc/latest/tutorial/clientserver中的“进行异步调用”部分](https://developers.google.com/web-toolkit/doc/latest/tutorial/clientserver)**

您将 getBoardSTickets() 编程为在执行异步请求调用后返回字符串的方法是有缺陷的。不要尝试在 getBoardSTickets() 中返回异步调用的结果。

`return ticketsJSON.get(0);`之后立即被调用`sendRequest()`。由于 RequestCallback() 没有完成处理，它会抛出异常，因为 ticketJSON 将有零条目。

尝试从外部传递回调

```
protected static String getBoardSTickets(String name,  RequestCallback callback){
      //Code for making request
} 
```

您的调用代码应更改为

```
getBoardSTickets(name, new RequestCallback(){
  //onSuccess and onFailure handling.
} ) 
```

相同的逻辑适用于所有调用**server 的异步调用**的方法。您不应该编程以从该方法返回请求响应的值。

# asp.net - 将 WCF 暴露给其他应用程序，例如 UBS

> ID：15600597
> 
> 赞同：0
> 
> 时间：2013-03-24T15:52:51.233
> 
> 标签：asp.net, .net, wcf

我是 WCF 的新手，不知道将 WCF 公开给由其他技术（不是 .net）构建的其他外部应用程序我需要创建 wcf 服务并将其公开给 UBS 应用程序。这个 ubs 应用程序将调用 wcf 服务，以便它可以将文件（excel）发送到我的 wcf 服务。

在我遇到或搜索过的大多数教程中，wcf 服务是在 .net 应用程序中创建的。我想知道，我怎样才能将我的 wcf 暴露给公共/其他应用程序/UBS 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:27:45.453

这不是 WCF，但是您尝试过[http://www.asp.net/web-api](http://www.asp.net/web-api)吗？您可以将数据公开为 JSON 或 XML，这些数据可由 .NET 以外的应用程序使用

# redirect - 如何在 SF2 控制器中创建操作后重定向

> ID：15600598
> 
> 赞同：1
> 
> 时间：2013-03-24T15:52:54.617
> 
> 标签：redirect, symfony, routing, routes

这是无法正常工作的操作，实体已创建但我总是渲染 AileronsFrontendBundle:Default:observation.html.twig

如代码所示，这个 createAction 应该渲染我的主模板，但模板渲染不是很好。

```
 /**
 * Creates a new Observation entity.
 *
 * @Route("/observation/new", name="observation_create")
 * @Method("POST")
 * @Template("AileronsFrontendBundle:Default:observation.html.twig")
 */
public function createAction(Request $request) {
    $entity = new Observation();
    $form = $this->createForm(new ObservationType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $entity->getObservator()->setIp($request->getClientIp());
        $em = $this->getDoctrine()->getManager();
        $em->persist($entity);
        $em->flush();

        $msg = array(
            'type'=>'success',
            'title'=>'Merci !',
            'text'=>'Votre observation à bien été enregistré, merci pour votre participation !',
        );
        $this->redirect($this->generateUrl('home', array('msg'=>$msg)));
    }

    return array(
        'entity' => $entity,
        'form' => $form->createView(),
    ); 
```

Insted 重定向我试过这个：

```
$this->render('AileronsFrontendBundle:Default:index.html.twig', array('msg'=>$msg)); 
```

它也不起作用。

这是我的索引操作

```
/**
 * @Route("/", name="home")
 * @Template()
 */
public function indexAction() {
    return array();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:59:43.010

您需要*返回*重定向。

```
return $this->redirect($this->generateUrl('home', array('msg'=>$msg))); 
```

一个动作总是需要*返回*一个响应对象。返回渲染的 Twig 文件的示例：

```
return $this->render('AcmeTestBundle:Test:test.html.twig', array()); 
```

# java - 使用 itext 生成 pdf 的打开对话问题

> ID：15600600
> 
> 赞同：0
> 
> 时间：2013-03-24T15:53:19.980
> 
> 标签：java, spring, https, itext

我正在使用 iText 在我的 java 应用程序中生成。我可以在网页中打开 pdf，但是使用 https 设置打开的对话不起作用。首先它要求保存，然后显示打开对话，而没有 https 页面直接在浏览器中打开而没有任何对话。我正在使用spring和itext。
我想在网络浏览器中打开 pdf 而无需使用 https 进行任何对话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T20:05:04.213

这可能根本不是 Java 问题，而是浏览器问题。因此，例如，知道您正在使用哪个浏览器进行测试会在这里产生巨大的差异。

话虽如此，[这里](https://stackoverflow.com/questions/1038707/cant-display-pdf-from-https-in-ie-8-on-64-bit-vista)接受的答案可能正是您在使用 https 时要让 pdf 直接显示的内容。

# objective-c - 为什么布尔值不必指向一个对象

> ID：15600602
> 
> 赞同：3
> 
> 时间：2013-03-24T15:53:31.980
> 
> 标签：objective-c

为 NSString 实现 getter 或 setter 时，它显示为

```
-(NSString *)nameOfSomething 
```

但是，当您获取或设置布尔值时，您不会使用星号来指向某些东西

```
-(BOOL)nameOfSomething 
```

我想知道为什么你必须这样做？不应该仍然需要星号来指向吗？布尔值不需要一个是否有某种原因？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:01:15.680

在尝试编写 iOS 之前学习 C 是个好主意，因为您将使用 Objective-C，而 Objective-C 是 C。纯数据类型和指针之间存在差异。星号与指针有关。（Objective-C 的“对象”类型都是指针，但 C 有其他类型。）

这里讨论了 iOS 编程所需的 C 语言最重要的方面：

[http://www.aeth.com/iOSBook/ch01.html](http://www.apeth.com/iOSBook/ch01.html)

正如该章所解释的， BOOL 就像一个 NSInteger - 它只是一个数字，而不是一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:56:10.390

它是一种原始类型，就像 int 一样。理论上，它可以是一个对象，但它是一个非常简单的概念，几乎没有用。

考虑这个类比。（左边是原始类型，右边是类）

```
int  : Integer    (Integer from java)
BOOL :  ---
 --- : NSString 
```

等等。

如果您真的需要一个对象，请制作一个包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:55:12.403

`BOOL`只是`signed char`，你不要拿它的地址/参考。

**您直接分配给它。**

如果你看到它的定义是：

```
typedef signed char     BOOL; 
// BOOL is explicitly signed so @encode(BOOL) == "c" rather than "C" 
// even if -funsigned-char is used.

#if __has_feature(objc_bool)
#define YES             __objc_yes
#define NO              __objc_no
#else
#define YES             ((BOOL)1)
#define NO              ((BOOL)0)
#endif 
```

你用`%d`not来查看它的价值`%@`。

# php - 如何将文本字符串作为 PHP Exec 命令传递

> ID：15600603
> 
> 赞同：1
> 
> 时间：2013-03-24T15:53:33.713
> 
> 标签：php, string, text, arguments, exec

我正在尝试使用 PHP Exec 命令行将文本字符串作为变量传递，但没有传递整个文本。

文字是这样的：

```
$title_page = 'Channel | This is the channels title'; 
```

那么 exec 行是：

```
exec("$path_to_php $emailer $article_sub_security_var $article_id > /dev/null &"); 
```

我像这样检索它们：

```
$article_sub_security_var = $_SERVER['argv'][1];
$article_id = $_SERVER['argv'][2];
$page_title = $_SERVER['argv'][3]; 
```

除了 $page_title 之外，命令行都可以正常工作。它只返回字符串的一部分，而不是全部。

任何通过它的建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:45:21.297

> 除了 $page_title 之外，命令行都可以正常工作。它只返回字符串的一部分，而不是全部。

我猜你的问题是`|`你的页面标题中的（管道），之前尝试使用[escapeshellcmd](http://php.net/manual/en/function.escapeshellcmd.php)`$title_page`。

# php - php图片上传

> ID：15600606
> 
> 赞同：-2
> 
> 时间：2013-03-24T15:53:47.933
> 
> 标签：php, file-upload

[我正在关注链接](http://www.computersneaker.com/php-file-upload-script/)，但收到此错误

```
Warning: copy(upload/83459755231.jpg) [function.copy]: failed to open stream: No such file or directory in K:\PHP WAMP\wamp\www\testimgupload\testimgupload\upload_file_script.php on line 36 
```

那条线是

```
 copy($_FILES['fileField']['tmp_name'],'upload/'.$newFileName); 
```

它有什么问题？

我的脚本是

```
<?php //=============Configuring Server and Database=======
$host = 'localhost';
$user = 'root';
$password = '';

$database = 'DBNAME';

$conn = mysql_connect($host,$user,$password) or die('Server Information is not Correct');
mysql_select_db($database,$conn) or die('Database Information is not correct');

//===============End Server Configuration============

if(isset($_POST['btnAdd']))
{
    $myFile = $_FILES['fileField']['name']; // Storing name into variable

    //====If you want to change the name of the File====
    $anyNum = rand(20,500789000); //Will generate a random number between 20and 500789000

    $newFileName = $anyNum.$myFile;//===New string is concatenated====
    //===Following Function will check if the File already exists========

    if (file_exists("upload/".$newFileName))
    {
        echo $newFileName." already exists. ";
    }

    //======If file already exists in your Folder, It will return zero and Will not take any action===
    //======Otherwise File will be stored in your given directory and Will store its name in Database===
    else
    {

        $query = "insert into tblfileupload(file_name) values ('$newFileName')";

        $res = mysql_query($query);

        copy($_FILES['fileField']['tmp_name'],'upload/'.$newFileName);
        //===Copy File Into your given Directory,copy(Source,Destination)

        if($res>0)
        {
            //====$res will be greater than 0 only when File is uploaded Successfully====:)
            echo 'You have Successfulluy Uploaded File';
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:01:16.990

`$_FILES['fileField']['tmp_name']`只包含文件名，而不是文件路径（类似于`/tmp/RandomFileName`or `C:\Users\xxx\AppData\Local\Temp\RandomFileName`。使用[move_uploaded_file](http://php.net/manual/function.move-uploaded-file.php)而不是 copy 将文件移动到您想要的目的地。

# javascript - sort() 在 Mozilla & Opera 中无法正常工作

> ID：15600608
> 
> 赞同：0
> 
> 时间：2013-03-24T15:53:57.013
> 
> 标签：javascript, arrays, sorting

我需要对一个数组进行排序，但它只能在 Chrome 中正常工作。在 Mozilla 规范中我找到了这个文本，但仍然无法解决这个问题：

> “这个数组的元素是排序的。排序不一定是稳定的（也就是说，比较相等的元素不一定保持原来的顺序）。如果 comparefn 不是未定义的，它应该是一个接受两个参数 x 和如果 x < y，则返回负值，如果 x = y，则返回零，如果 x > y，则返回正值。"

这个链接[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort) 可能会帮助你和我

这是我的代码

```
arr.sort(sortTrip); 

function sortTrip(a, b) {   

    if (a.to != b.from) return 1;
    if (a.to == b.from) return -1;

} 
```

这是`arr`：

```
var arr = [
    {
        "from": "Moscow",
        "to": "Rome",
        "transport": "NSB Regiontog Train",
        "seat": "25"
    },
    {
        "from": "Oslo",
        "to": "Paris",
        "transport": "NSB Regiontog Train",
        "seat": "25"
    },
    {
        "from": "Helsinki",
        "to": "Tokio",
        "transport": "NSB Regiontog Train",
        "seat": "25"
    },
    {
        "from": "Tokio",
        "to": "Moscow",
        "transport": "NSB Regiontog Train",
        "seat": "25"
    },
    {
        "from": "Paris",
        "to": "New-York",
        "transport": "NSB Regiontog Train",
        "seat": "25"
    },
    {
        "from": "Rome",
        "to": "Oslo",
        "transport": "NSB Regiontog Train",
        "seat": "25"
    }
] 
```

结果必须是

*   赫尔辛基 - 东京
*   东京 - 莫斯科
*   莫斯科 - 罗马
*   罗马 - 奥斯陆
*   奥斯陆 - 巴黎
*   巴黎 - 纽约

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:59:28.710

> 另请参阅[JavaScript 中的排序：每个比较函数都应该有一个“return 0”语句吗？](https://stackoverflow.com/q/20883421/1048572)

* * *

```
if (a.to != b.from) return 1;
if (a.to == b.from) return -1; 
```

这不是一个一致的比较函数（例如，违反了自反性`compare(x, x) == 0`）。你期望它做什么？

引用[ES5.1 规范`sort`](http://es5.github.com/#x15.4.4.11)：

> 如果`comparefn`is [...] 不是此数组元素的一致比较函数，则排序的行为是实现定义的。
> 
> 如果集合中的所有值、和（可能相同的值）都满足以下所有要求，则函数是`comparefn`一组值的一致比较函数：手段（任一标志）；和手段。`S``a``b``c``S``a <CF b``comparefn(a,b) < 0``a =CF b``comparefn(a,b) = 0``a >CF b``comparefn(a,b) > 0`
> 
> 当给定一对特定的值并作为它的两个参数时，调用`comparefn(a,b)`总是返回相同的值。此外，is Number，而不是。请注意，这意味着 , 和 中的一个对于给定的 和 将是正确的。`v``a``b``Type(v)``v``NaN``a <CF b``a =CF b``a >CF b``a``b`
> 
> *   调用`comparefn(a,b)`不会修改 this 对象。
> *   `a =CF a`（反身性）
> *   如果`a =CF b`, 那么`b =CF a`(对称)
> *   如果`a =CF b`和`b =CF c`，那么`a =CF c`( 的传递性`=CF`)
> *   如果`a <CF b`和`b <CF c`，那么`a <CF c`( 的传递性`<CF`)
> *   如果`a >CF b`和`b >CF c`，那么`a >CF c`( 的传递性`>CF`)
> 
> 注意：上述条件是必要和充分的，以确保`comparefn`将集合划分`S`为等价类并且这些等价类是完全有序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:58:58.470

我的另一个答案解释了为什么您的排序工作不稳定。这将解决您的实际问题:-)

您不能将 a`sort`用于此类问题，您希望从（无序的）边集构建节点列表。*仅当您可以在没有额外数据的情况下比较*两个元素时，才能对数组进行排序。假设您只有两个连接`Tokio - Moscow`并且`Rome - Oslo`，您不知道它们中的哪个先出现（没有联系您的计划，但您还没有）。相反，在比较数字时，您可以轻松且始终知道 5 大于 3（通过计算差异）。

相反，我们需要做这样[或](https://stackoverflow.com/a/12048098/1048572)这样[的](https://stackoverflow.com/a/14252219/1048572)事情- 构建一个结构，我们可以轻松地通过名称访问一个站，并在循环它们时直接插入连接，这样最后我们就有一个按站的连接列表：

```
var map = {};
for (var i=0; i<arr.length; i++) {
    var con = arr[i];
    map[con.from] = con;
} 
```

这样我们现在就可以将您的路线构建为某种链表：

```
for (var from in map) {
    var connTo = map[from].to;
    if (connTo in map)
        map[from].next = map[connTo];
} 
```

并通过从地图中删除所有目的地来找到起点站：

```
for (var from in map)
    for (var next = map[from]; next; next = next.next)
         delete map[next.to];
for (from in map) // there's only one key left
    var start = from; // "Helsinki" 
```

让我们将路线构建为车站名称数组：

```
var route = [start],
    conn = map[start];
while (conn) {
    route.push(conn.to)
    conn = conn.next;
    // maybe delete conn.next as we don't need it any more
}
// route:
// ["Helsinki", "Tokio", "Moscow", "Rome", "Oslo", "Paris", "New-York"] 
```

或您想要的结果，连接列表：

```
var arr = [];
for (var conn = map[start]; conn; conn = conn.next)
    arr.push(conn); 
```

* * *

有了这个计划，我们现在甚至可以构造一个比较函数来对原始数组进行排序：

```
arr.sort(function(a, b) {
    // compare the positions of the departure stations in the route
    return route.indexOf(a.from) - route.indexOf(b.from);
}); 
```

# database - 如何最好地为这种情况设计数据库结构？

> ID：15600610
> 
> 赞同：1
> 
> 时间：2013-03-24T15:54:23.103
> 
> 标签：database, database-design, data-structures, relational-database, entity-relationship

我正在为我的大学申请设计一个数据库。报告**实体**如下：

![在此处输入图像描述](../Images/9b345153e70ad3608fe7ff1c4353f977.png)

每个`report`人都有一个`students`, `courses`和学生的列表`rating`。

问题是随着时间的推移，课程和学生人数可能会发生变化。数据库结构应该灵活且易于适应这些变化。对于这种情况，如何最好地在关系数据库中定义这些实体和设计表之间的关系？

我对这件事有一些想法。也许这个模型最能描述关系并解决问题的问题：![在此处输入图像描述](../Images/cfb824406ff170635c637e832393edcb.png)

还是这种关系是`REPORT to STUDENT`多余的和多余的？一份关系是否足够一份报告？例如仅`REPORT to COURSE`没有 `REPORT to STUDENT`：![在此处输入图像描述](../Images/0881c45ea6d045d7b156fb22ec037767.png) 哪个选择更好，为什么？这种结构还有其他缺点吗？

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:40:44.480

不要在学生表或课程表中包含指向“报告”表的链接。我建议您使用以下结构：

```
STUDENT
id
forename
surname
dob  
... other fields

LECTURER
id
forename
surname
honorific (Mr/Dr/Professor, etc)
department id
... other fields

COURSE
id
name
duration
credits

SEMESTER
id
course id
lecturer id

RATINGS
semester id
student id
mark 
```

通过这种方式，您可以参加由多位讲师在不同日期教授的课程（例如经济学概论）。学生注册特定学期并获得该学期的分数。如果您希望学生在给定课程/学期中获得多个分数，则将日期字段添加到评分表中。

您的报告通常会查询评级表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:39:20.407

> "the report is a set of ratings?" Yes

OK, that clears things a little bit. I'm still unceratin as to what exactly are you trying to model, but I'll give it a stab:

![enter image description here](../Images/9dd5229f89a5b7c3ffc0dc35772f45e0.png)

The RATING PK¹ ensures no student can rate the same course more than once. A report is simply a set of ratings.

This structure does *not* ensure that all ratings in the report are related to the same course, nor it enforces the course attendance in any way².

* * *

*¹ Specifically, the fact that `REPORT_ID` is **outside** the PK, so one rating cannot be part of multiple reports. If you want the opposite, you cannot just include that field in the PK since that would allow for different `VALUE`s - you'll need a proper junction table instead.*

*² You might want to forbid a rating of a course by a student that did not attend the course. Let me know how you intend to represent the course attendance and I might have some ideas how to connect that to ratings and reports...*

# java - 如何通过Java中的方法动态设置对象变量

> ID：15600611
> 
> 赞同：1
> 
> 时间：2013-03-24T15:54:26.530
> 
> 标签：java

我正在尝试运行一个接收字符串并使用字符串作为对象变量创建对象的方法：

```
public void createObj(String objName){
    Obj objName = new Obj();
} 
```

这甚至可能吗？如果是这样，我该如何完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:55:54.710

您不能使用表达式来命名 Java 中的变量。我认为，您可以获得的最接近的方法是填充[`Map<String, Obj>`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)可用于`Obj`按名称查找实例的 a。

```
public void createObj(String objName, Map<String, Obj> symbolTable){
    symbolTable.put(objName, new Obj());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:56:00.733

不，它不可能。声明所有具有不同名称的局部变量。

定义一个类及其成员，然后编译为字节码，因此它们不能在运行时动态修改。

```
public void createObj(String objName){
    Obj objectName = new Obj();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:56:26.580

简而言之，不，这是做不到的。您不能在运行时创建命名局部变量。

如果要将名称与对象相关联，可以使用[`Map<String,Object>`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T16:26:02.130

不，你不能这样做，原因很简单。您不能有 2 个同名的局部变量，因为编译器无法区分。

# c# - 允许用户在 C# asp.net 应用程序中编辑文本

> ID：15600617
> 
> 赞同：0
> 
> 时间：2013-03-24T15:55:08.767
> 
> 标签：c#, asp.net, html, user-input

我想允许用户在我的 C# asp.net 应用程序中编辑文本。例如，用户应该能够编辑主页上的消息（“欢迎来到我的网站......”）。问题在于此类文本的标记。我确实知道如何允许用户编辑文本，但如果可以添加诸如白线、标题和段落之类的内容，那就太好了。重要的是，用户不会被 HTML 代码所困扰。他们应该只需要输入一些文本并按下保存按钮。

我的问题是：我怎样才能做到这一点？有没有好的 text-to-html 插件（我没有找到），还是有更好的方法来做到这一点？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:05:46.147

你可以使用 [CKEditor](http://www.CKEditor.com)

我见过的完美编辑器。

# c# - 当我在使用 C# 的一个项目中使用多个项目作为多个目录的替代方案时，是否会降低性能？

> ID：15600622
> 
> 赞同：1
> 
> 时间：2013-03-24T15:55:16.500
> 
> 标签：c#

我以前有 5 个项目，每个项目在我的 C# 应用程序中有 5-10 个目录。现在我已将其更改为 10 个项目，每个项目可以有 2-3 个目录。

在我的 Web 应用程序中，我现在引用了这十个项目，而不是之前的 2-3 个项目。

如果我以这种方式继续开发并且随着应用程序变大而添加更多项目，是否会有任何性能损失。我想知道的是卸载时间、内存使用情况（我引用的每个 DLL 都存储在项目本身中）以及我的代码必须从一个项目中的对象移动到另一个项目的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T16:21:11.470

如果您引用所有这些项目，加载程序集的抖动只会受到轻微的惩罚。

但我认为你问错了问题。你不应该根据你有多少类或目录将你的代码分成不同的程序集。如果是这样，一个项目将是最佳的。

您应该关注可以内部化的内容。如果您有这十个程序集，您的程序的哪些部分可以对程序的其余部分隐藏。是否可能存在一个依赖树，其中您的某些项目不必引用其他项目？

那应该是您的电话，而不是有多少文本文件放在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:27:54.763

是的，但在运行时并不明显。

Visual Studio 加载多个项目的速度会变慢。对于 5-10 个项目，您可能不会注意到，但对于 30-40 个，您会开始注意到。

编译（通常）会更慢。这是因为需要将项目依赖项复制到依赖它们的项目的输出文件夹中。如果您有更多项目，则需要复制更多输出文件。您可以通过将每个项目的输出文件夹设置到同一个位置来缓解这种情况，但对于 Web 应用程序项目来说，这更加困难，而且无论如何这都是一种痛苦。

在运行时，在解析程序集时，所有这些额外的磁盘访问都会带来性能损失。

但是，在实际执行代码时，对性能的影响可以忽略不计（如果有的话）。在一个程序集中调用代码并不比在另一个程序集中调用代码更昂贵（一旦它被加载并 JITed，并假设它不会被内联）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T15:59:59.397

性能差异可以忽略不计（启动时间可能会慢几毫秒）。如果您的应用程序架构在多个项目中更好，那就去吧。

# extjs - 无法从叠加层内的表单面板获取文本字段值

> ID：15600624
> 
> 赞同：1
> 
> 时间：2013-03-24T15:55:17.910
> 
> 标签：extjs, sencha-touch, sencha-touch-2

嗨，当按下按钮时，我正在尝试将字段集放在叠加层中。但是，当我尝试按如下方式检索值时

```
"var values = Ext.getCmp('reviewscontainer').getValues();" 
```

我收到一个错误：“未捕获的 TypeError：无法调用未定义的方法 'getValues'”。如何引用这些值以从叠加层中检索它们？如果它不在叠加层中，它确实有效。

```
Ext.define('FirstApp.view.ReviewsContainer',{
extend:'Ext.NavigationView',
xtype:'reviewscontainer',
config:{

    title:'Reviews',
    iconCls:'compose',
    items:[
        {
            xtype:'reviews'

        },
        {
          xtype: 'button',
                    align: 'right',
                    ui: 'confirm',
                    text:'Leave Review',
            docked: 'bottom',
            centered: 'true',

              handler: function() {
                if (!this.overlay) {
                    this.overlay = Ext.Viewport.add({
                        xtype: 'formpanel',    
                        modal: true,
                        hideOnMaskTap: true,
                        showAnimation: {
                            type: 'popIn',
                            duration: 250,
                            easing: 'ease-out'
                        },
                        hideAnimation: {
                            type: 'popOut',
                            duration: 250,
                            easing: 'ease-out'
                        },
                        centered: true,
                        width: Ext.os.deviceType == 'Phone' ? 260 : 400,
                        height: Ext.os.deviceType == 'Phone' ? 220 : 400,
                        styleHtmlContent: true,

                        items: [
                            {
                                docked: 'top',
                                xtype: 'toolbar',
                                title: 'Overlay Title'
                            },

            {
                xtype:'fieldset',
                title: 'Reviews',
             items: [
                    {
                        xtype:'textfield',
                        name: 'name',
                        label:'Name',
                        placeHolder: 'name'
                    },
                    {
                        xtype:'textfield',
                        name:'business',
                        label:'Place'
                    },
                      {
                        xtype:'textfield',
                        name:'rating',
                        label:'Rating'
                    },
                    {
                        xtype:'textareafield',
                        name:'review',
                        label:'Review'
                    }
                ]
            },
            {
            items:[
                {
                    xtype:'button',
                    text: 'Submit',
                    ui:'confirm',
                    handler: function(){
                      var values = Ext.getCmp('reviewscontainer').getValues();
                      // prints the values filled in the form 
                      // text fields of name, email and message.     
                      console.log(values.name+","+values.place+","+values.rating);                          

                      Ext.Ajax.request({
                        url: 'http://insert.php',
                        params : values,
                        success: function(response){
                            var text = response.responseText;
                             Ext.getCmp('reviewscontainer').reset();
                            Ext.Msg.alert('Success', "Review successfully created.",    this.overlay.hide()); 
                        }
                       });
                    }
                }
            ]
        }
                        ],
                        scrollable: false
                    });
                }

                this.overlay.show();
            }
        }

    ]
}
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:19:17.603

这是因为您没有为表单面板指定任何 id：

```
Ext.getCmp('reviewscontainer') 
```

用于检索带有`id: reviewscontainer`not的项目`xtype:'reviewscontainer'`。

所以你只需要添加`id: reviewscontainer`到你的表单面板就可以了。

# php - Twig 模板中的“开始于”

> ID：15600626
> 
> 赞同：39
> 
> 时间：2013-03-24T15:55:19.743
> 
> 标签：php, regex, twig, comparison

我有一个树枝模板，我想测试一个项目是否以某个值开头

```
{% if item.ContentTypeId == '0x0120' %}
    <td><a href='?parentId={{ item.Id }}'>{{ item.BaseName }}</a><br /></td>
{% else %}
    <td><a href='?{{ item.UrlPrefix }}'>{{ item.LinkFilename }}</a></td>
{% endif %} 
```

0x0120 可能看起来像这样或更复杂，例如 0x0120D52000D430D2B0D8DD6F4BBB16123680E4F787006540​​36413B65C740B168E780DA0FB4BX。我唯一想做的就是确保它以 0x0120 开头。

理想的解决方案是使用正则表达式来解决这个问题，但我不知道 Twig 是否支持这个？

谢谢

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2014-05-15T14:27:03.450

您现在可以直接在 Twig 中执行此操作：

```
{% if 'World' starts with 'F' %}
{% endif %} 
```

还支持“以”结尾：

```
{% if 'Hello' ends with 'n' %}
{% endif %} 
```

* * *

**其他方便的关键字也存在：**

复杂的字符串比较：

```
{% if phone matches '{^[\\d\\.]+$}' %} {% endif %} 
```

（注：双反斜杠被twig转换为一个反斜杠）

字符串包含：

```
{{ 'cd' in 'abcde' }}
{{ 1 in [1, 2, 3] }} 
```

在此处查看更多信息：http: [//twig.sensiolabs.org/doc/templates.html#comparisons](http://twig.sensiolabs.org/doc/templates.html#comparisons)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-11-12T01:01:53.823

Yes, Twig supports regular expressions in comparisons: [http://twig.sensiolabs.org/doc/templates.html#comparisons](http://twig.sensiolabs.org/doc/templates.html#comparisons)

In your case it would be:

```
{% if item.ContentTypeId matches '/^0x0120.*/' %}
  ...
{% else %}
  ...
{% endif %} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-24T16:47:55.697

您可以只使用[`slice`](http://twig.sensiolabs.org/doc/filters/slice.html)过滤器。只需这样做：

```
{% if item.ContentTypeId[:6] == '0x0120' %}
{% endif %} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T16:37:56.777

您始终可以制作自己的过滤器来执行必要的比较。

根据[文档](http://twig.sensiolabs.org/doc/advanced.html#filters)：

> 当由 Twig 调用时，PHP 可调用函数接收过滤器的左侧（管道 | 之前）作为第一个参数，并将传递给过滤器的额外参数（在括号 () 内）作为额外参数接收。

所以这里是一个修改过的例子。

> 创建过滤器就像将名称与 PHP 可调用对象关联一样简单：

```
// an anonymous function
$filter = new Twig_SimpleFilter('compareBeginning', function ($longString, $startsWith) {
    /* do your work here */
}); 
```

> 然后，将过滤器添加到您的 Twig 环境中：

```
$twig = new Twig_Environment($loader);
$twig->addFilter($filter); 
```

> 以下是如何在模板中使用它：

```
{% if item.ContentTypeId | compareBeginning('0x0120') == true %}
{# not sure of the precedence of | and == above, may need parentheses #} 
```

我不是 PHP 人，所以我不知道 PHP 是如何进行正则表达式的，但上面的匿名函数旨在返回 true，如果`$longString`以`$startsWith`. 我相信你会发现实现起来很简单。

# c# - 后台工作者 cpu 使用率

> ID：15600628
> 
> 赞同：1
> 
> 时间：2013-03-24T15:55:26.313
> 
> 标签：c#, multithreading, backgroundworker, cpu, cpu-usage

我在我的 c# 应用程序 backgroundworker 和 dowork 无限循环中有，但 backgroundworker 的 cpu 使用率非常大（50%）。如何限制backgroundworker的cpu使用？

代码：

```
private void ScanWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;

        while (!worker.CancellationPending)
        {
            Process[] Procesy = Process.GetProcesses();

            foreach (Process Proces in Procesy)
            {

                List<BlaclistedProcess> blacklist = (from p in CurrentBlacklist.Processes
                                                     where p.ProcessName == Proces.ProcessName
                                                     select p).ToList<BlaclistedProcess>();

                if (blacklist.Count == 1)
                {
                    Proces.Kill();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:01:32.400

在循环中，您可以让后台线程等待一定的时间，例如

```
System.Threading.Thread.Sleep(100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:04:47.177

使用计时器并定期检查这些进程会更容易，无需在另一个线程中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:05:05.123

根据您的代码，您有几个选择。

就我个人而言，我会使用`Timer`class 而不是 a`BackgroundWorker`因为没有必要像现在这样每隔几毫秒进行一次检查。

避免使用的另一种替代方法`Thread.Sleep()`是使用`Thread`该类，这样您就可以将其优先级设置为最低或低于正常值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T16:25:45.983

使用计时器：

```
 var timer = new System.Threading.Timer(CheckProcesses);
    timer.Change(TimeSpan.FromSeconds(0), TimeSpan.FromSeconds(1));
    //...
    timer.Dispose();

private void CheckProcesses(object state)
{
    Process[] Procesy = Process.GetProcesses();

    foreach (Process Proces in Procesy)
    {

        List<BlaclistedProcess> blacklist = (from p in CurrentBlacklist.Processes
                                             where p.ProcessName == Proces.ProcessName
                                             select p).ToList<BlaclistedProcess>();

        if (blacklist.Count == 1)
        {
            Proces.Kill();
        }
    }
} 
```

使用计时器，您可以更好地控制执行任务的频率。当计时器没有运行时，没有线程在使用——所以它更具可扩展性。您必须将`Thread.Sleep()`线程用于“等待”——这可能会影响后台工作人员响应取消的速度并使您的 UI 看起来冻结。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-24T16:01:05.403

将 Thread.Sleep(...) 添加到`while`循环结束。这样在检查进程之间会有一些小的停顿，cpu 使用率会显着下降。

# java - 类定义中何时需要“公共”？

> ID：15600630
> 
> 赞同：1
> 
> 时间：2013-03-24T15:55:32.510
> 
> 标签：java

这个问题与需要将**类**本身（而不是它们的方法或数据）声明为公共的位置有关。

目前我是一个 Java 菜鸟，只用最基本的东西自学。我熟悉其他几种语言，但在 Java 中我只编写了非常基本的程序，比如一个主类（一个文件）中的所有内容。

所以今天我决定尝试一些新的东西，并将类放在单独的文件中。令我惊讶的是，当我将一个类放在一个单独的文件中时，主程序可以访问这个类，即使它没有标记为“public”。

为了一个明确的例子，假设我在一个文件夹中**只有**两个文件。文件“mainprog.java”包含以下内容：

```
class mainprog {
    public static void main(String[] args) {
        hello myHello = new hello();
        myHello.sayHello();
    }
} 
```

文件“hello.java”包含以下内容：

```
class hello {
    void sayHello() {
    System.out.println("Hello world");
    }
} 
```

“你好”中没有任何东西被指定为公共的，但这编译和运行得很好

```
javac mainprog.java
java mainprog 
```

所以我只是想知道类定义在哪里真正需要“公共”？

**编辑以添加新信息** 如下面的答案所建议的那样，我尝试向每个文件添加“包”语句，以便从不同的包中制作它们。正如预期的那样，除非我将“hello”类和它的方法“sayHello()”都公开，否则对“hello”类的访问被拒绝。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:57:40.913

这两个类都是**包私有的**。它们都驻留在同一个文件夹中，因此两个类可以互相看到。

如果一个类驻留在包之外，或者另一个包中的另一个类需要访问这些类，则它将不可用。

[这是 Oracle 对方法/类/字段的可见性的参考。](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:59:13.840

包定义

> Java 包是一种将 Java 类组织到命名空间中的机制，类似于 Modula 的模块。Java 包可以存储在称为 JAR 文件的压缩文件中，从而允许类作为一个组而不是一次下载一个更快。程序员通常还使用包来组织属于同一类别或提供类似功能的类。
> 
> 包为其包含的类型提供唯一的命名空间。同一个包中的类可以访问彼此的包访问成员。

**使用公共课。**

当您想从另一个包中创建此类对象时。

假设您在 Demo 包中有一个类。

```
Demo package.
  Demo.java 
```

两个类都在不同的包中。

```
Demo1 package
   Demo1.java 
```

现在你想在 Demo1.java 中创建一个 Demo.java 类的对象，它们位于不同的包中，那么你需要定义 Demo 类 public。

阅读此[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T16:20:15.350

默认情况下，同一包[或文件夹]下的所有类都具有访问修饰符“受保护”。因此，您可以毫无困难地访问课程。请参阅“继承”概念，您将对访问修饰符有更好的了解。干杯！！

# php - wordpress：只显示今天或未来的帖子

> ID：15600632
> 
> 赞同：4
> 
> 时间：2013-03-24T15:55:40.307
> 
> 标签：php, wordpress

我正在运行此查询以打印出我的帖子。它可以工作，但我想添加一个参数，告诉系统只显示今天或将来发布的帖子！

这是查询：

```
$today = getdate();
$year=$today["year"];
$month=$today["mon"];
$day=$today["mday"];

query_posts( $query_string.'order=ASC' .
             '&post.status=future,publish' .
             '&year='.$year .
             '&monthnum='.$month
); 
```

我试图做类似的事情，`&post.date = <= $today`但没有奏效。

拜托，谁能告诉我怎么做？

我的想法是告诉查询仅显示发布日期为今天或“小于”今天的帖子。这就是为什么`" <= "`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T14:13:39.123

大家有没有发现以后的帖子只有管理员或作者才能看到？我想向非成员列出所有未来的帖子标题，当我查询“未来”时，查询将始终返回 0 个帖子，除非我以管理员身份登录。

对返回的 0 结果数组进行 var 转储后，我发现各种未设置的设置，其中一个 suppress_filters 引起了我的注意，因此将其设置为 1（真）我得到了我想要的结果。

所以任何有这个问题的人我都找到了解决方案，它只是查询 'suppress_filters' => '1' 中的 1 个额外设置

所以例如

```
$args = array (
    'post_status'           => 'future',
    'suppress_filters'      => '1'
    );
$query = new WP_Query($args); 
```

通过谷歌搜索几个小时后，我找不到这个简单的解决方案。但是希望它可以帮助其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T00:51:39.163

```
$future_args = array(
    'post_status' => 'future'
    // possibly further query arguments
);

$today = getdate();
$today_args = array(
    'year' => $today['year'],
    'monthnum' => $today['mon'],
    'day' => $today['mday'] 
    // possibly further query arguments
);

$future_query = new WP_Query( $future_args );
$today_query = new WP_Query( $today_args );

while ( $today_query->have_posts() ) :
    $today_query->the_post();
    // echo something
endwhile;
wp_reset_postdata();

while ( $future_query->have_posts() ) :
    $future_query->the_post();
    // echo something
endwhile;
wp_reset_postdata(); 
```

那应该这样做。

请参阅有关[WP_Query 类的 codex 文章以](https://codex.wordpress.org/Class_Reference/WP_Query)供参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-10T20:33:10.047

这种方法对我有用，使用 date_query 参数（自 WP 3.7 起可用）。

```
$args = array(
    'post_status' => 'publish,future',
    'date_query' => array(
        array(
            'after' => date('Y-m-d'),
            'inclusive' => true,
        )
    ),
);

$query = new WP_Query($args); 
```

它查询从当天（当前时间之前或之后）到未来的所有帖子。

# javascript - 如何在android的单独.js文件中调用java脚本函数？

> ID：15600633
> 
> 赞同：2
> 
> 时间：2013-03-24T15:55:43.473
> 
> 标签：javascript, android

我是 webview 的新手。问题是如何从 Android 中的外部 .js 文件调用函数？我尝试了示例基本功能。

我在资产文件夹`printMyName()`中的*scripting.js文件中有一个简单的函数。*我正在尝试这样的事情：

```
myWebView.loadUrl("file:///android_asset/js/script.js");
myWebView.loadUrl("javascript:printMyName();"); 
```

**输出：**该函数正在 web 视图中显示。

# css - 禁用primefaces数据表的选择样式

> ID：15600634
> 
> 赞同：2
> 
> 时间：2013-03-24T15:55:49.490
> 
> 标签：css, jsf-2, primefaces, datatable, selection

我使用primefaces的复选框数据表，并且我想禁用数据表的选择样式（更改所选行的颜色），因为我在每一行中都有一些未正确显示的链接

我怎样才能做到这一点，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:30:26.310

选定的行获得 css 类“ ***ui-state-highlight*** ”。您可以在自己的 css 文件中覆盖此类以实现您的结果。Firebug 可以在这里提供很大的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T15:35:23.167

在我的数据表中，我改变了这个：

```
rowStyleClass="myownclass" 
```

通过这种方式，您可以覆盖数据表的默认类。

# java - multipart/form-data 用于访问 jsp 的字符

> ID：15600653
> 
> 赞同：0
> 
> 时间：2013-03-24T15:56:46.053
> 
> 标签：java, html, jsp, file-upload, multipartform-data

任何朋友都可以告诉我如何在 from attribute 中使用带有 multipart/form-data 的数据字符。我知道当表单具有文件上传控件但我不会同时使用字符和文件上传控件时使用 multipart/form-data 。当我使用 multipar 时，我无法传输我的角色。
我如何同时使用？？？
在 HTML 页面中 -

```
<form enctype="multipart/form-data" method=post action='upload.jsp'>
<select name="year"><option>Year 1</option><option>Year 2</option></select>
Browes Your .xml File<input type='file' name='fname' accept='text/xml'>
<input type='submit' value='Upload'/> 
```

jsp页面——

```
<%@page import="com.oreilly.servlet.MultipartRequest" %>
<%
  MultipartRequest mpr=new MultipartRequest(request,"C://upload");
  request.getParameter("year");                   // Return Null Here
%> 
```

我如何在这里获得年份的参数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:11:22.240

一旦你有了 multipart/form-data 的 enctype，请求就变成了 multipart，并且表单数据将无法通过隐式请求 jsp 对象访问。

使用您设置的 MultipartRequest：

```
mpr.getParameter( "year" ); 
```

# java - 调试码头应用程序

> ID：15600663
> 
> 赞同：0
> 
> 时间：2013-03-24T15:58:01.857
> 
> 标签：java, jetty, atmosphere

我正在使用在码头服务器上运行并将 websockets 带到任何浏览器的大气框架 ( [https://github.com/Atmosphere/atmosphere )。](https://github.com/Atmosphere/atmosphere)

**我遇到**的问题是，由于某些奇怪的原因，向所有连接的客户端广播的消息仅到达与码头服务器在同一平台上运行的 Web 客户端。**（本地主机：8080）**

 **其他客户端仅在服务器停止时（一次全部）收到他们的消息。（IP服务器：8080）

**我不确定这是否是码头 8/atmopshere/我的网络的问题。** 我正在使用带有 run-jetty-run 插件的 eclipse。

所以我的**问题**是：有没有办法调试这个系统/定位问题的实际位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:58:54.543

您可以从命令提示符发出以下命令。mvnDebug jetty:run-exploded antrun:run 然后你会知道你的码头正在监听哪个端口，然后从那里运行->调试配置，你可以调试你的服务器。在调试配置中，您可以在此处找到远程 Java 应用程序选项，为新的远程 Java 应用程序创建一个新的调试配置，您还可以在这里再次定义您的新服务器**mvnDebug jetty:run-exploded** 现在您应该看到您的新端口。**

# jquery - jquery jtable自定义点击事件

> ID：15600665
> 
> 赞同：6
> 
> 时间：2013-03-24T15:58:39.510
> 
> 标签：jquery, jquery-jtable

我已经实现了jquery的jtable。我想对行单击执行一些操作，还想放置单独的图像，还想在该图像上添加我自己的单击事件。

我还想将该行的 id 传递给该自定义事件。

如何将其添加到 jquery 表中？

我尝试了一些东西。

```
LoadGrid = (function () {
            //Prepare jtable plugin
            $('#GridTableContainer').jtable({
                title: 'Assets',
                paging: true,
                pageSize: 10,
                sorting: true,
                defaultSorting: 'ModelName ASC',
                actions: {
                    listAction: '/Adminsec/ManageAssets.aspx/List',
                    createAction: '/Adminsec/ManageAssets.aspx/CreateOrUpdate',
                    updateAction: '/Adminsec/ManageAssets.aspx/CreateOrUpdate',
                    deleteAction: '/Adminsec/ManageAssets.aspx/Deletes'
                },
                updateRecord: (function() { alert("my custom action.");
                }),
....... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T18:45:48.110

终于完成了。

```
CustomAction: {
    title: '',
    width: '1%',
    sorting: false,
    create: false,
    edit: false,
    list: true,
    display: function (data) {
        if (data.record) {
            return '<button title="Edit Record" class="jtable-command-button jtable-edit-command-button" onclick="alert(' + data.record.TicketId + '); return false;"><span>Edit Record</span></button>';
        }
    }
} 
```

谢谢。

# database - 运行不同站点的多个数据库 - 相同的数据库结构 - 如何全部更新？

> ID：15600666
> 
> 赞同：1
> 
> 时间：2013-03-24T15:58:48.247
> 
> 标签：database, cakephp, synchronization, multiple-sites

有多个、不断增加的站点在单个服务器阵列上运行单个 CMS（内置于 CakePHP）实例。CMS 具有固定的数据库结构，但可能需要定期更新 - 新字段、更改字段名称、新表等。

我想不出一个好的方法来 1) 让网站拥有自己的数据库（看起来很理想），但是两个，总是基于相同的、定期更新的数据库结构。

到目前为止，我想保留一个“模板”数据库，只更新它，然后编写一个脚本来比较和更新 - 但即便如此，我怎么知道一个字段是否更改，或者它是否是一个新字段，以及以前的字段已删除...等等等等。我敢肯定我什至没有想到这会导致的所有问题。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:48:57.823

你可以使用像[https://github.com/CakeDC/migrations](https://github.com/CakeDC/migrations)这样的迁移工具。迁移背后的基本思想是为您的数据库模式提供一种版本控制，每个迁移都代表一个“提交”，描述应该应用于数据库模式的更改（如添加表、重命名字段等）。

# unix - 括号使用不当

> ID：15600670
> 
> 赞同：0
> 
> 时间：2013-03-24T15:59:09.577
> 
> 标签：unix, parentheses, pwd

我已经坚持了几个小时：

```
cd /dir1
(cd $HOME); pwd; 
```

为什么`pwd`还是说`/dir1`没有去我的主目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T23:32:55.603

括号开始一个子shell：shell调用`fork`，括号内的命令在子进程中执行。父进程等待子进程退出，然后恢复执行。所以发生的事情是：

*   的执行`cd /dir1`：shell 执行`chdir("/dir1")`。
*   括号的执行：shell调用`fork`，然后父进程等待子进程退出。
*   执行`cd $HOME`：子shell执行`chdir("/home/jurgen")`。
*   子shell 已用完命令，因此退出。
*   子外壳已退出，因此`wait`父外壳中的调用返回。
*   执行`pwd`：shell 打印其当前目录，即`/dir1`.

# java - 在java中的hibernate框架中获取当前会话的困难

> ID：15600682
> 
> 赞同：0
> 
> 时间：2013-03-24T16:00:19.903
> 
> 标签：java, hibernate

我在使用以下语句获取当前会话时遇到问题-

> 会话会话=HibernateUtil.getSessionFactory().getCurrentSession();

我的 HibernateUtil 类具有以下代码-

```
public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {
        try {

            sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
        } catch (Throwable ex) {

            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    } 
```

而我的 hibernate.cfg.xml 文件如下——

```
 <?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE
 hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration
 DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
 <hibernate-configuration>   <session-factory>
     <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
     <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
     <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:anu</property>
     <property name="hibernate.connection.username">admin</property>
     <property name="hibernate.connection.password">abc</property>
     <property name="hibernate.show_sql">true</property>
     <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
     <property name="hibernate.current_session_context_class">thread</property>

     <mapping resource="hbm/Userinfo.hbm.xml"/>
     <mapping/>   </session-factory> </hibernate-configuration> 
```

# c - 在 C 中调试 fopen

> ID：15600684
> 
> 赞同：1
> 
> 时间：2013-03-24T16:00:44.783
> 
> 标签：c, debugging, fopen

我是 C 新手，并尝试使用 fopen 命令读取文件，如下所示：

```
 FILE *f = fopen (argv[1], "rb" );

         if(!f)
        {
            printf("ERROR! Unable to open file \n");
            fclose(f);
            return 1;
        } 
```

我试图读取的文件是“somefile.dat”

当我运行它时，我在控制台中得到以下信息

```
 ERROR! Unable to open file 
```

所以 f 为空，但我该如何调试呢？我的意思是我从哪里开始寻找问题？

谢谢

* * *

更新：

我尝试了下面的各种建议，发现问题是它找不到文件。

我使用 XCode 运行程序，而 XCode 在与放置文件的位置不同的目录中运行可执行文件，因此无法找到文件。我给了它一条艰难的道路，它奏效了。

现在的问题是如何为 XCode 提供正确的文件路径？XCode 在哪里运行可执行文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:04:15.047

这是您应该做的调试：

*   添加`printf`以查看里面的内容`argv[1]`
*   确保打印的值与预期的文件名匹配；如有必要，更改命令行以查找绝对路径，即`~myuser/somefile.dat`或`c:\myproject\somefile.dat`而不是`somefile.dat`
*   检查当前目录中是否存在具有该名称的文件
*   检查运行程序的用户（通常是您的用户）是否具有读取文件的访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:04:02.710

*   首先，硬编码你的文件名。如果问题消失了，那么问题出在您使用 argv 上。

*   其次，确保文件存在。尝试在您的资源管理器中打开它。也许它以某种方式被锁定。

*   Thirs，使用[perror](http://www.cplusplus.com/reference/cstdio/perror/)来获得更具描述性的错误。

希望你能找到这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T16:05:07.713

我可以想到以下可能的原因

1) 路径不正确

2) 文件 somefile.dat 的权限不正确，因此 fopen 失败

您可以使用 errno 来检查产生了什么问题。

[http://www.cplusplus.com/reference/cstdio/fopen/](http://www.cplusplus.com/reference/cstdio/fopen/)

[http://www.cplusplus.com/reference/cerrno/errno/](http://www.cplusplus.com/reference/cerrno/errno/)

# jquery - 获取插入符号位置的当前单词

> ID：15600686
> 
> 赞同：7
> 
> 时间：2013-03-24T16:01:03.207
> 
> 标签：jquery, string, textarea, word, getcaretpos

如何通过当前插入符号位置在 textarrea 中获取单词？

我尝试过这样的事情，但是这只会将单词的第一个字母返回到插入符号位置的字符。例如：

如果光标在*fo*和*o*之间，它会返回`fo`而不是`foo`预期的那样。

fo `|`o bar 不等于 bar foo。=>`Fo`期望`Foo`

foo bar 不等于`|`bar foo。=>`equ`期望 `equal`.

这是我到目前为止所做的：

```
function getCaretPosition(ctrl) {
    var start, end;
    if (ctrl.setSelectionRange) {
        start = ctrl.selectionStart;
        end = ctrl.selectionEnd;
    } else if (document.selection && document.selection.createRange) {
        var range = document.selection.createRange();
        start = 0 - range.duplicate().moveStart('character', -100000);
        end = start + range.text.length;
    }
    return {
        start: start,
        end: end
    }
}

$("textarea").keyup(function () {
    var caret = getCaretPosition(this);

    var result = /\S+$/.exec(this.value.slice(0, caret.end));
    var lastWord = result ? result[0] : null;
    alert(lastWord);
}); 
```

[http://fiddle.jshell.net/gANLv/](http://fiddle.jshell.net/gANLv/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T16:26:28.210

尝试将代码中的这一行更改为：

```
 var result = /\S+$/.exec(this.value.slice(0, this.value.indexOf(' ',caret.end))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-18T17:38:17.787

偶然发现这个寻找香草JS答案并最终写了一个。这是一个相对安全的实用功能，适用于所有现代浏览器（您可以传入任何节点或在没有任何参数的情况下调用它以默认为`document.activeElement`）。

请注意，此方法可以返回未定义、零或 N 长度的空白字符串：

*   给定这样的选择`" "`，将返回 2 长度的空白字符串
*   如果没有选择且页面上没有插入符号（即 textarea 未聚焦）`undefined`，将返回
*   给定一个不在单词开头/结尾/单词内的文本区域内的插入符号，将返回零长度字符串
*   给定文本区域内位于单词开头/结尾/内的插入符号，将返回该单词（包括标点符号和特殊字符）

```
// returns the current window selection if present, else the current node selection if start and end
// are not equal, otherwise returns the word that has the caret positioned at the start/end/within it
function getCurrentSelection (node = document.activeElement) {
  if (window.getSelection().toString().length > 0) {
    return window.getSelection().toString()
  }

  if (node && node.selectionStart !== node.selectionEnd) {
    return node.value.slice(node.selectionStart, node.selectionEnd)
  }

  if (node && node.selectionStart >= 0) {
    const boundaries = {
      start: node.selectionStart,
      end: node.selectionStart
    }
    const range = document.createRange()
    range.selectNode(node)
    const text = range.cloneContents().textContent
    if (text) {
      let i = 0
      while (i < 1) {
        const start = boundaries.start
        const end = boundaries.end
        const prevChar = text.charAt(start - 1)
        const currentChar = text.charAt(end)

        if (!prevChar.match(/\s/g) && prevChar.length > 0) {
          boundaries.start--
        }

        if (!currentChar.match(/\s/g) && currentChar.length > 0) {
          boundaries.end++
        }

        // if we haven't moved either boundary, we have our word
        if (start === boundaries.start && end === boundaries.end) {
          console.log('found!')
          i = 1
        }
      }
      return text.slice(boundaries.start, boundaries.end)
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-07T09:29:21.847

```
val = input.value.split(" ");
last_word = val.length > 0 ? val[val.length-1] : val[0];
console.log(last_word); 
```

# php - php：删除双方括号及其之间的所有内容

> ID：15600700
> 
> 赞同：1
> 
> 时间：2013-03-24T16:01:56.740
> 
> 标签：php, preg-replace, square-bracket

从变量中，我想删除双方括号 [[ ]] 以及介于两者之间的所有内容，然后将其替换为**插入的 img**

我有以下列结果：

```
<p>hey</p><p>[[{"type":"media","view_mode":"media_large","fid":"67","attributes":{"alt":"","class":"media-image","height":"125","typeof":"foaf:Image","width":"125"}}]]</p> 
```

替换后变量应该变成：

```
<p>heey</p><p><b>img inserted<b></p> 
```

我试过使用 preg_replace 但这对我来说似乎太先进了..

谁能给我一些关于如何实现这一目标的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:04:54.183

尝试这个：

```
<?PHP
    $subject = '<p>hey</p><p>[[{\"type\":\"media\",\"view_mode\":\"media_large\",\"fid\":\"67\",\"attributes\":{\"alt\":\"\",\"class\":\"media-image\",\"height\":\"125\",\"typeof\":\"foaf:Image\",\"width\":\"125\"}}]]</p>';
    $pattern = '/\[\[[^[]*]]/';
    $replace = '<b>img inserted</b>';
    $result = preg_replace($pattern, $replace, $subject);
    echo '<p>Result: '.htmlspecialchars($result).'</p>';
?> 
```

为了您的解释： /.../ 分隔正则表达式。[[ 必须转义，因为 [ 是一个特殊字符，因此`\[\[`. 之后，我们通过使用得到任何不是 [ 的字符`[^[]`。这会根据需要经常重复：`[^[]*`. 之后，我们有两个括号：`\]\]`

此外，如果方括号内有 [. 从你的格式来看，情况并非如此。否则，您将不得不使用更复杂的语法，如果那些额外的 [ 被转义 ([)，则很可能使用反向引用。如果可能出现未转义的括号，则无法使用正则表达式解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T16:07:37.727

```
$string = '<p>hey</p><p>[[{"type":"media","view_mode":"media_large","fid":"67","attributes":{"alt":"","class":"media-image","height":"125","typeof":"foaf:Image","width":"125"}}]]</p>';
$new_string = preg_replace('/\[\[.*?\]\]/', '<b>img inserted</b>', $string);

echo $new_string; 
```

# java - 2Darray 到 1darray 与 for 循环

> ID：15600702
> 
> 赞同：0
> 
> 时间：2013-03-24T16:02:13.827
> 
> 标签：java, for-loop, multidimensional-array

我知道这是一个非常基本的问题，但我只是编程新手，我想我正在努力解决一个非常简单的问题......但我们开始吧：p

在我的应用程序中，我有一个这样的数组数组，用于存储从 mysql 数据库中检索到的数据。

```
data_array[][]

0001 | data1 | data2 | data3 | data4 | data5
0002 | data1 | data2 | data3 | data4 | data5
...
... and so on. 
```

现在在我的应用程序中，我需要为每一行检索第一个列，以以下内容结尾：

```
array { 0001, 0002} 
```

我知道做“迭代”我可以检索所有数据：

```
public String[] itarray{
int cols = 5;
String[] xFINAL;
for (int i=0 ; i < data_array; i++) {
    for (int j=0; j < cols; j++){
        xFINAL = data_array[i];
        System.out.println("1" + data_array[i][0]);

    }

System.out.println(" ");
} return xFINAL;} 
```

但是我怎样才能得到每一行的第一列呢？我尝试过类似的东西：

```
int j=0;
for (int i = 0; i < data_array ; i++){
 xFINAL[j] = data_array [i][0];
j++;
} 
```

但它给了我一个空指针。请问我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:12:20.577

```
String[] xFINAL = new String[data_array.length];   

int k =0;
for (int i=0 ; i < data_array; i++) {
    array[k++] = data_array[i][0];

} 
```

# python - NameError：未定义全局名称“HTTPError”

> ID：15600707
> 
> 赞同：18
> 
> 时间：2013-03-24T16:02:38.283
> 
> 标签：python, exception, global-variables

我在 try 子句中有一个命令，我知道它会引发异常。我试图在“except”子句中捕获它，但 except 子句似乎无法识别异常的存在。未处理的异常（即未包含在 try 子句中）在交互式窗口中如下所示：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "C:\Users\Andy\software\Turkeys\actions.py", line 234, in annotate
    annotation=annotator.ncbo_annotate(thing)
  File "C:\Users\Andy\software\Turkeys\annotator.py", line 49, in ncbo_annotate
    fh = urllib2.urlopen(submitUrl, postData)
  File "C:\32Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\32Python27\lib\urllib2.py", line 406, in open
    response = meth(req, response)
  File "C:\32Python27\lib\urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\32Python27\lib\urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "C:\32Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\32Python27\lib\urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 500: Internal Server Error 
```

当我将命令放在该列表中第一个文件“actions.py”中的 try/except 构造中时，如下所示：

```
try:
    annotation=annotator.ncbo_annotate(thing)
except HTTPError: 
    ...do some things with this 
```

我希望上面的子句会在我运行 ncbo_annotate 函数时捕获“HTTPError: HTTP Error 500: Internal Server Error”，但是当我运行上面的函数时，我收到一个错误，说全局名称“HTTPError”是没有定义的：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "C:\Users\Andy\software\Turkeys\actions.py", line 235, in annotate
    except HTTPError:
NameError: global name 'HTTPError' is not defined 
```

那么有什么关系呢？我认为 python 会引发异常，直到它在 try 子句中找到处理程序或将其吐出未处理。为什么我的代码不知道 HTTPError 是什么，或者我如何告诉它它是什么以便它可以处理它？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-07-28T08:28:39.237

在 Python 3 中是：

```
from urllib.error import HTTPError 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-24T16:04:52.010

您可能只需要`HTTPError`在使用之前导入该类。尝试在您的 actions.py 文件的顶部插入：

```
from urllib2 import HTTPError 
```

然后您应该能够按原样使用您的代码。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-24T16:06:09.210

您需要检查 urllib2.HTTPError：

```
except urllib2.HTTPError: 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-04T17:15:51.603

@Emily 的解决方案很好，但是还有另一种方法可以在不导入该类的情况下解决这个问题。

你只需要给出你想捕获的异常类的全名空间：

```
except urllib2.HTTPError: 
```

这样`import`，您的代码中需要更少的子句，并且之后您更容易判断哪个模块引发了异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-17T15:55:59.793

在 Python 3 中，您必须这样做：

```
from urllib.request import urlopen, HTTPError
try:
    html = urlopen('http://www.test.com')
except HTTPError as e:
    print(e)
else:
    print('its ok') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-10T21:55:54.490

如果你像我一样很累很困惑，你的错误可能是：

```
except HttpError:
    #something 
```

它应该是：

```
except HTTPError:
    #something 
```

所以**HTTP**应该是大写的。

# paypal - Paypal 发件箱企业帐户邮政编码不是美国

> ID：15600708
> 
> 赞同：3
> 
> 时间：2013-03-24T16:02:43.347
> 
> 标签：paypal

我试图在贝宝开发者页面注册一个意大利商业账户。我想输入一个意大利邮政编码来测试功能，但我不能。我可以创建一个仅限美国人的企业帐户来进行我的测试吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:16:07.187

您可以通过 www.paypal.com 创建一个帐户并使用该帐户登录[https://developer.paypal.com/](https://developer.paypal.com/)

# python - 如何使用 mlabwrap 调用带有来自 python 的单元格参数的 matlab 函数？

> ID：15600710
> 
> 赞同：4
> 
> 时间：2013-03-24T16:02:48.250
> 
> 标签：python, matlab, mlabwrap

好吧，我为自己正确安装了 mlabwrap 而感到自豪，但现在我无法让它与 matlab 单元一起使用。在 python 中，列表类似于单元格，所以我想我会输入一个列表，mlabwrap 会将其转换为一个单元格。不幸的是，它似乎不是那样工作的。

例如，我有一个 matlab m 文件：

```
function list_test(x)
display(x); 
```

在python中，如果我输入

```
mlab.list_test([[1,2],[3,4]]) 
```

我得到：

```
x =

1     2
3     4 
```

因此，mlabwrap 似乎将我的两个嵌套列表转换为 2x2 矩阵，这不是我想要的。

当我尝试

```
mlab.list_test([[1,2],[3,4,5]]) 
```

然后我得到：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/Ben/.virtualenvs/test/lib/python2.7/site-packages/mlabwrap.py", line 607, in mlab_command
    return self._do(name, *args, **update({'nout':nout}, kwargs))
  File "/Users/Ben/.virtualenvs/test/lib/python2.7/site-packages/mlabwrap.py", line 534, in _do
    mlabraw.put(self._session,  argnames[-1], arg)
TypeError: a float is required 
```

显然没有骰子。

如果必须的话，我想我可以编写一些 python 代码将列表转换为几个一维数组，使用 mlabwrap 将一维数组输入 matlab 并编写一些 matlab 代码将这些一维数组转换为单元格。但这很混乱，我想知道是否有更简单的方法。mlabwrap 可以以某种方式为我做这件事吗？

这是我的设置的详细信息。操作系统：Mountain Lion (OS X 10.8)，Python：2.7，Matlab：2010b，mlabwrap：1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T17:31:42.967

不幸的是，mlabwrap 对元胞数组的支持有限。将元胞数组传递到 matlab 时，以及从 matlab 接收元胞数组时。

这是您直接问题的答案：

```
>>> from mlabwrap import mlab as matlab

>>> a = [[1, 2], [3, 4]]
>>> cell = matlab.mat2cell(array(a), [1, 1], [2])
>>> matlab.display(cell)

PROXY_VAL2__ = 

    [1x2 double]
    [1x2 double] 
```

请注意，这实际上仅适用于常规大小的列表。即 [[1,2],[3,4]] 有效，但 [[1,2],[3,4,5]] 无效。这是因为 mlabwrap 不能很好地处理 dtype=object 数组，而是需要 dtype=float 数组。

让我们切换到 matlab 进行快速比较：

```
>> display(cell)

cell = 

    [1x2 double]    [1x2 double] 
```

看起来不错！但是，当我们切换回 python 并尝试实际访问我们创建的元胞数组时：

```
>>> cell[0][0]

error: Unable to get matrix from MATLAB(TM) workspace

>>> cell[0, 0]

error: Unsupported index type: <type 'tuple'>

>>> type(cell)
mlabwrap.MlabObjectProxy 
```

不幸的是，mlabwrap 并不真正允许访问存储在 MlabObjectProxy 对象中的数据。有几种方法可以尝试解决这个问题。您可以在 matlab 中编写`cell_insert` 和函数。`cell_pop`这些应该使您能够将 python 变量放入现有的元胞数组中，并从元胞数组中获取 python 可读的变量。或者，您可以将元胞数组写入 matlab 中的 .mat 文件，然后使用`scipy.io.loadmat()`

老实说，除非您出于某种原因绝对需要元胞数组，否则我会尽量避免通过 mlabwrap 使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-21T18:58:32.947

如果有人在多年后阅读，实际上对元胞数组和字符数组有基本支持，您只需键入以下内容：

```
mlab._dont_proxy["cell"] = True 
```

在使用返回单元格或字符数组的 matlab 命令之前。这在[https://github.com/aweinstein/mlabwrap](https://github.com/aweinstein/mlabwrap)和[https://github.com/cpbotha/mlabwrap-purepy上进行了测试](https://github.com/cpbotha/mlabwrap-purepy)

# ios - 结果正确时加载另一个视图控制器

> ID：15600711
> 
> 赞同：0
> 
> 时间：2013-03-24T16:02:49.773
> 
> 标签：ios, objective-c

所以我有将数据提交到 PHP 脚本的代码。这个想法是代码将数据插入数据库。如果成功发生，则返回的字符串将为“SUCCESSFUL”，否则为“Failed”。现在我想当成功返回值时，它会加载另一个视图，说谢谢（标签）。我怎样才能做到这一点？

代码：

```
(IBAction)saveDataAction:(id)sender {
    NSString *lEventTitle = [NSString stringWithFormat:@"var=%@",eventTitle.text];
    NSString *lEventDesc = [NSString stringWithFormat:@"var=%@",eventDescription.text];
   NSString *lEventCity = [NSString stringWithFormat:@"var=%@",eventCity.text];

    // Create your request string with parameter name as defined in PHP file
    NSString *myRequestString = [NSString stringWithFormat:@"title=%@&description=%@&city=%@",lEventTitle ,lEventDesc,lEventCity];

    myRequestString  = [myRequestString stringByReplacingOccurrencesOfString:@"var=" withString:@""];
    NSLog(@"%@",myRequestString);
    // Create Data from request
    NSData *myRequestData = [NSData dataWithBytes: [myRequestString UTF8String] length: [myRequestString length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: @"http://www.xsysdevelopment.com/ios/form.php"]];
    // set Request Type
    [request setHTTPMethod: @"POST"];
    // Set content-type
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    // Set Request Body
    [request setHTTPBody: myRequestData];
    // Now send a request and get Response
    NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil];
    // Log Response
    NSString *response = [[NSString alloc] initWithBytes:[returnData bytes] length:[returnData length] encoding:NSUTF8StringEncoding];
    NSLog(@"%@",response);

    if ([response rangeOfString:@"SUCCESSFUL"].location == NSNotFound)
    {
        //here??
    }

} 
```

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:00:10.940

如果您使用的是基于导航的应用程序，请使用以下

```
if ([response rangeOfString:@"SUCCESSFUL"].location != NSNotFound)
{
    SuccessViewController *objSVC = [[SuccessViewController alloc] initWithNibName:@"SuccessViewController" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:objSVC animated:YES];
}
else
{
    FailViewController *objFVC = [[FailViewController alloc] initWithNibName:@"FailViewController" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:objFVC animated:YES];        
} 
```

否则替换

```
[self.navigationController pushViewController:objFVC animated:YES]; 
```

和

```
[self presentModalViewController:objFVC animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:10:23.530

```
if ([response rangeOfString:@"SUCCESSFUL"].location != NSNotFound)
{
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Thank you" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:@"OK", nil];
     [alert show];
     [alert release];
} 
```

现在将提示警报，您可以像这样处理委托方法。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex==1) //OK button pressed
    {
        //handle your another view here
         SampleViewController *sampleView = [[[SampleViewController alloc] init] autorelease];
         [self presentModalViewController:sampleView animated:YES];
    }
} 
```

确保`UIAlertViewDelegate`在您的 .h 文件中实现。

更多关于呈现视图的参考资料。

1.  [查看 iOS 控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)
2.  [模态视图控制器示例](http://timneill.net/2010/09/modal-view-controller-example-part-1/)

# java - 适用于 Android 的 Windows Azure SDK - 如何从序列化中排除 DTO 的属性？

> ID：15600717
> 
> 赞同：3
> 
> 时间：2013-03-24T16:03:33.240
> 
> 标签：java, android, azure, azure-mobile-services

我正在尝试使用 Azure 移动服务来保存我的 Android 应用程序中的数据。我现在遇到的问题是我有一个数据传输对象，其中有几个字段对应于 Azure 数据库表中的列。而且我有一个字段，我不想保留。我正在尝试使用@Expose 注释，但它似乎不起作用，我从 Azure 收到一个异常，说 SubCategories 的数据类型无效。什么是我做错了吗？

```
package com.mycorp.myapp.model;
import java.util.*;
import com.google.gson.annotations.*;

public class Category {

    public Category(){
        SubCategories = new ArrayList<Category>();
    }

    public int Id;

    public String Name;

    public int ParentId;

    @Expose(serialize = false, deserialize = false)
    List<Category> SubCategories;
} 
```

下面的代码返回一个 MobileServiceException ({"code":400,"error":"Error: The value of property 'SubCategories' is of type 'object' which is not a supported type."})

```
Category category = new Category();     
category.Name = "new";
category.ParentId = 1;      
mClient.getTable(Category.class).insert(category, new TableOperationCallback<Category>() {          
        @Override
        public void onCompleted(Category entity, Exception exception, ServiceFilterResponse response) {
            if(exception!=null)
            {
                Log.e("Service error", exception.getMessage());
            }               
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:42:23.473

事实证明，如果您使用所描述的默认 Gson 构造函数，则会忽略 @Expose 注释[此处](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)所述的默认 Gson 构造函数，则会忽略 @Expose 注释。

我能够通过删除 Expose 并使字段瞬态来解决我的问题：

```
package com.mycorp.myapp.model;
import java.util.*;
import com.google.gson.annotations.*;

public class Category {

    public Category(){
        SubCategories = new ArrayList<Category>();
    }

    public int Id;

    public String Name;

    public int ParentId;

    //@Expose(serialize = false, deserialize = false)
    transient List<Category> SubCategories;
} 
```

# c# - WIFI上的C# webclient

> ID：15600721
> 
> 赞同：0
> 
> 时间：2013-03-24T16:03:44.897
> 
> 标签：c#

我实现了一个简单的 Webclient 来将文件上传到 Web 服务器。这是我的代码的相关部分：

```
 private bool fileUploadValid = new bool();
    string fileLocation = "D:/testvideo.avi";
    WebClient client = new WebClient();

    public MainWindow()
    {
        InitializeComponent();

        client.UploadFileCompleted += new UploadFileCompletedEventHandler(UploadFileCallback);

        // Specify a progress notification handler.
        client.UploadProgressChanged += new UploadProgressChangedEventHandler(UploadProgressCallback);
        client.Headers.Add("Content-Type", "binary/octet-stream");

        UploadFileInBackground("http://xxx/videolibrary/fileUpload.php", fileLocation);
    }

    public void UploadFileInBackground(string address, string fileName)
    {

        Uri uri = new Uri(address);
        client.UploadFileAsync(uri, "POST", fileLocation);

        Console.WriteLine("File upload started.");
       // fileUploadValid = false;

    } 
```

当我尝试通过 wifi 上传文件时，速度非常慢（尽管我的 wifi 信号强度非常好）。上传大约每 5 秒停止一次，然后通常会继续，但有时不会。停止上传是我最大的问题，因为它不会抛出任何错误（没有超时或其他任何错误）。当我将笔记本电脑连接到以太网电缆时，没有问题，上传很快就完成了。有人可以帮帮我吗？

我还在我的大学尝试了相同的代码，它似乎工作正常。那里有一个 WPA 网络，我在 WEP 签名的网络上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:51:51.903

您或您的邻居是否拥有以下任何设备：[微波炉、智能手机、另一个 Wifi AP、蓝牙无线电、DECT 无绳电话、汽车、Zigbee 或任何其他 2.4GHz 无线电源](http://en.wikipedia.org/wiki/Electromagnetic_interference_at_2.4_GHz)？听起来您的网络中存在间歇性丢弃的数据包。请记住，有多个元素可以在网络中丢球。在住宅环境中，我个人发现 Wifi PHY 层的性能非常非常差（但对大多数人来说已经足够了，因为 TCP 堆栈倾向于很好地处理丢弃的数据包）。

办公室往往没有家里那么多的 2.4GHz 信号源。

尝试断开邻居的电器。一个小型 EMP 设备就足够了^。或者，您可以尝试使用锡箔墙纸保护您的房子免受邻居电磁辐射的影响，构建所谓的[法拉第笼](http://en.wikipedia.org/wiki/Faraday_cage)。记得包括一[顶锡纸帽子](http://en.wikipedia.org/wiki/Tin_foil_hat)*。这将减少大脑中干扰传输的电磁辐射。

还可以尝试将您的 WIFI 设备与电源隔离。使用电涌保护器连接它们，这有助于减少来自洗衣机和电视等设备的干扰（或者在我的情况下，曾经是一对[HomePlugs](http://en.wikipedia.org/wiki/HomePlug)），这些设备可能会导致线路噪声产生无线电噪声。

最后，如果它们都在该频率上工作，您可以尝试将 WIFI 频道切换到 5GHz。它的意思是更清楚。然而，最终随着越来越多的人使用 2.4GHz 无线电范围，WIFI 会变得更糟。

^此 SO 用户不容忍使用电子/核战争武器来减少家庭 wifi 上的丢包。

*NB 锡箔帽是为了幽默，因为我知道在你的房子里建造一个法拉第笼对你的邻居来说会是什么样子。

# css - 如何使 LESS hat 库 mixin 全球可用

> ID：15600722
> 
> 赞同：2
> 
> 时间：2013-03-24T16:03:51.893
> 
> 标签：css, less

有什么方法可以告诉 LESS 编译器为它编译的所有内容包含[LESS hat 库](http://lesshat.com/)（也就是说，无需`@import`在我想要使用的每个文件中专门编写指令）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:20:45.737

有一个名为[assemble-less](https://github.com/assemble/assemble-less)的 Grunt.js 插件，用于将 LESS 编译为 CSS 来满足您的需求。我刚刚用有关无汇编插件的信息回答[了另一个问题（虽然不是重复的），因为它也适合他们的情况。](https://stackoverflow.com/questions/15597839/grunt-replace-all-less-files-into-css-files)大声笑我真的不是想发送关于无汇编的垃圾邮件，我只是不知道另一个插件可以做到这一点。

如果你还没有使用过 Grunt.js，那真是太棒了。在你弄清楚之前不要放弃，你会爱上自己的 ;-)

# php - 存储会话并回显后，没有任何显示

> ID：15600723
> 
> 赞同：0
> 
> 时间：2013-03-24T16:03:56.570
> 
> 标签：php, session, pdo

我有一个向 MySQL 数据库插入一些东西的表单。

用户名。密码。ID。

我将用户名存储到会话中，然后更改标题 (.php?recovery=success)。之后，我想测试我的会话是否有效（供以后使用，所以我可以转到数据库中该用户名的列来获取我们插入的 ID，如果我只是回显 $ID，它将生成一个新 ID .

```
else if (isset($_GET['recovery']) && $_GET['recovery'] == 'success') 
{
echo $_SESSION['user'];

    /* 

    ***REMOVED FOR TESTING***

    $fetch = $connect->query("SELECT * FROM users WHERE username = ':username' LIMIT 1");
    $fetch->bindValue(':username', $_SESSION['user']);
    $fetch->execute();

    while($row = $fetch->fetch( PDO::FETCH_ASSOC )) {
        echo $row['recover_id'];
    }
    */
} 
```

问题：

我填写了表格，提交时我需要恢复.php?recovery=success，然后在回显会话数据时，没有输出？

我需要打开一个新会话的文件 session.inc.php。

这是整个代码：

[http://pastebin.com/ba77rDi3](http://pastebin.com/ba77rDi3)

我究竟做错了什么？

我是 PHP 新手，尤其是 PDO。谢谢！

额外的：

会话.inc.php

```
<?php
session_start();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:13:10.547

看起来您的代码正在将信息存储到 Session 中，然后通过对标头的调用进行重定向（请参见代码段）。

```
 // Let's store these into a session now.
                $_SESSION['user'] = $username;
                $_SESSION['pass'] = $password;

                //Now let's refresh the page, to a different header.
                header('Location: recover.php?recovery=success'); 
```

只是要小心；我建议明确调用

[session_write_close()](http://php.net/manual/en/function.session-write-close.php)

在重定向之前，确保在执行离开当前页面之前正确保存会话数据......就像这样：

```
 // Let's store these into a session now.
                    $_SESSION['user'] = $username;
                    $_SESSION['pass'] = $password;

                    session_write_close();                       

                    //Now let's refresh the page, to a different header.
                    header('Location: recover.php?recovery=success'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:54:01.577

问题是：

我将代码放在检查是否未设置恢复的**语句**中

```
if (!isset($_GET['recovery'])) { 
```

在代码顶部，如果您没有在 pastebin 中看到。

我将代码放在该语句之外，它起作用了。

# android - 无法用 RelativeLayout 安排

> ID：15600741
> 
> 赞同：0
> 
> 时间：2013-03-24T16:05:10.897
> 
> 标签：android, android-relativelayout

我想像这样安排：image-text-checkbox

但我无法实现。android:layout_toRightOf , android:layout_alignParentRight="true" .etc 没用！也许是因为膨胀，我不知道！

![在此处输入图像描述][1]

代码：

```
RelativeLayout v = (RelativeLayout) mInflater.inflate(R.layout.result_checkbox, null);
           final TextView titleui = (TextView) v.findViewById(R.id.titleui);
               titleui.setText(mytext);
....

          tableView.addViewItem(v2);
         ViewItem v2 = new ViewItem(v);     
        tableView.addViewItem(v2); 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:duplicateParentState="true" 
    android:paddingLeft="10dip"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:minHeight="40dip">

      <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView android:text="Versão" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:id="@+id/titleui"
        android:gravity="center_vertical"
        android:layout_centerVertical="true" />

    <CheckBox
 android:id="@+id/cbox"
 android:layout_width="match_parent"
 android:layout_height="wrap_content" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:15:30.667

使用相对布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
android:duplicateParentState="true" 
android:paddingLeft="10dip"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:minHeight="40dip">

  <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/ic_launcher" />

<TextView android:text="Versão....." 
    android:paddingLeft="20dp"
    android:layout_toRightOf="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:id="@+id/titleui" />

<CheckBox
 android:id="@+id/cbox"
 android:paddingLeft="20dp"
 android:layout_toRightOf="@+id/titleui"
 android:layout_width="match_parent"
 android:layout_height="wrap_content" />
</RelativeLayout> 
```

使用线性布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
android:duplicateParentState="true" 
android:paddingLeft="10dip"
android:orientation="horizontal"//set orientation hoorizontal as child views appear next to each other
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:minHeight="40dip">

  <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/ic_launcher" />

<TextView android:text="Versão....." 
    android:paddingLeft="20dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:id="@+id/titleui" />

<CheckBox
  android:id="@+id/cbox"
  android:paddingLeft="20dp"
  android:layout_width="match_parent"
  android:layout_height="wrap_content" />
 </LinearLayout> 
```

ImageVIew---- TextView ----- CheckBox

![在此处输入图像描述](../Images/5dfea29ce5064bf0bedb6c4069fcf13d.png)

# java - 模拟 flickr api 以获得更好的单元测试

> ID：15600743
> 
> 赞同：0
> 
> 时间：2013-03-24T16:05:21.427
> 
> 标签：java, json, rest, flickr

我正在创建一个使用 Flickr 的 API 的应用程序。我想知道是否可以模拟 Flickr 的 API，以便我可以离线运行我的测试。我正在用 java 开发应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:08:16.793

您应该只为松散耦合和更好的可测试性编写一个用于 flickr API 访问的适配器。

# jquery - 表单外使用的提交按钮

> ID：15600744
> 
> 赞同：2
> 
> 时间：2013-03-24T16:05:22.073
> 
> 标签：jquery, html, css, forms, html-table

我可以在表单外使用提交按钮，并且仍然在单击提交按钮时处理表单操作吗？下面是代码。我是编程新手。请帮我。

```
<body>
<input type="submit" name="submit" value="submit" />
<form action="" method="get" name="myform">
  <table width="200" border="1" cellspacing="10">
    <tr>
      <td>Name</td>
      <td><label for="name"></label>
      <input type="text" name="name" id="name" /></td>
    </tr>
    <tr>
      <td>email</td>
      <td><label for="email"></label>
      <input type="text" name="email" id="email" /></td>
    </tr>
    <tr>
      <td>Group</td>
      <td><input type="checkbox" name="IT" id="IT" />
        IT 
          <input type="checkbox" name="ECE" id="ECE" />
        <label for="ECE"></label>
        ECE
        <input type="checkbox" name="Mech" id="Mech" />
        <label for="Mech"></label>
        Mech</td>
    </tr>
    <tr>
      <td>Hobbies</td>
      <td><label for="hobbies"></label>
      <input type="text" name="hobbies" id="hobbies" /></td>
    </tr>
  </table>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:07:44.103

您可以使用 HTML5、纯 JavaScript 或 jQuery 来实现：

**使用 JavaScript：**

```
<form action="" method="get" id="theForm">
// Form here
</form>

<input type="submit" onclick="document.forms[0].submit();" /> 
```

**使用 jQuery：**

```
<form action="" method="get" id="theForm">
// Form here
</form>

<input type="submit" id="submitTheForm" />

$('#submitTheForm').click(function(){
    $('#theForm').submit();
}); 
```

**使用 CSS（如果您出于审美原因只希望在表单之外使用它）：**

一个更好的选择可能是将您的提交留在表单内，并使用 CSS 将其放置在其他位置（如果这是您希望它在表单之外的原因）。

**使用 HTML5：**

最后，您应该考虑使用 HTML5 的[表单属性](http://www.w3schools.com/html/html5_form_attributes.asp)。请注意，所有主流浏览器（Chrome、Firefox、IE10）都支持它们，但旧版本的 IE（IE9、IE8 等）不支持。这也应该有效：

```
<form id="something" method="post"> 
<input type="text"/> 
</form> 

<input type="submit" form="something"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T16:10:26.627

是的，您可以使用 jQuery 做到这一点

```
<a href="#" id="submit-form">Submit</a>
<form id="someid">

</form> 
```

jQuery：

```
$("#submit-form").click(function(){
$("#someid").trigger("submit");
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T16:09:37.693

使用 jQuery ：

```
<form action="" method="get" name="myform" id="myform">
...
</form>

<input type="button" id="submitform" value="click me to submit the form" />

$('#submitform').click(function(){
    $('#myform').submit();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T16:08:47.353

您必须使用一些 javascript 来实现这一点。这是一个例子

```
<input type="button" onclick="document.forms['myform'].submit()" value="Submit" /> 
```

# android - 在android中将数据从sqlite填充到listview的最佳方法是什么

> ID：15600747
> 
> 赞同：0
> 
> 时间：2013-03-24T16:05:34.027
> 
> 标签：android, android-listview, simplecursoradapter

我是 android 编程新手，希望你能帮助我一开始我有一些问题，我想从 Sqlite 数据库中填充数据，但我不知道最好的方法是什么..我的数据库有时有很多的数据，我想要一种优化的方式来从中获取数据。我搜索了很多，发现 SimpleCursorAdapter 对我的目的有好处，但我找不到任何让它工作的方法。这是我的代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_read_book);
    ListView Peot_list = (ListView) findViewById(R.id.list_poet_name);
    String SDcardPath = Environment.getExternalStorageDirectory().getPath();
    String DbPath = SDcardPath + "/Tosca/" + "persian_poem.db";

    try {
        db = SQLiteDatabase.openDatabase(DbPath,null,SQLiteDatabase.CREATE_IF_NECESSARY);

        // here you do something with your database ...
        getData();

    db.close();

    }
    catch (SQLiteException e) {

    }

}

private void getData() {
    TextView txtMsg;

    txtMsg=(TextView) findViewById(R.id.txtmsg);
        try {

        // obtain a list  from DB
            String TABLE_NAME = "classicpoems__poet_contents";
            String COLUMN_ID = "poet_id";
            String COLUMN_NAME = "poet_name";
            String COLUMN_CENTURY = "century_start";
            String [] columns ={COLUMN_ID,COLUMN_NAME,COLUMN_CENTURY};

        Cursor c = db.query(TABLE_NAME, columns,null, null, null, null, COLUMN_ID);
        int theTotal = c.getCount();
        Toast.makeText(this, "Total: " + theTotal, 1).show();

        int idCol = c.getColumnIndex(COLUMN_ID);
        int nameCol = c.getColumnIndex(COLUMN_NAME);
        int centuryCol = c.getColumnIndex(COLUMN_CENTURY);

        while (c.moveToNext()) {
        columns[0] = Integer.toString((c.getInt(idCol)));
        columns[1] = c.getString(nameCol);
        columns[2] = c.getString(centuryCol);

        txtMsg.append( columns[0] + " " + columns[1] + " "
        + columns[2] + "\n" );
        }
        } catch (Exception e) {
        Toast.makeText(this, e.getMessage(), 1).show();
        }

} 
```

现在我可以从数据库中读取我想要的内容，它们显示在 txtMsg 中，但我想将它们显示到列表视图中。我根本无法定义 SimpleCursorAdapter 并且总是出现错误或空列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:10:10.037

后：

```
Cursor c = db.query(TABLE_NAME, columns,null, null, null, null, COLUMN_ID); 
```

只需使用此 Cursor 创建一个 CursorAdapter，如[SimpleCursorAdapter](https://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)，然后将 Adapter 传递给您的 ListView。就像是：

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_2, c, 
            new String[] {COLUMN_NAME,COLUMN_CENTURY}, new int[] {android.R.id.text1, android.R.id.text2}, 0);
ListView list = (ListView) findViewById(R.id.list);
list.setAdapter(adapter); 
```

（你真的不需要下面的任何其他代码`Cursor c = db.query(...);`。）

* * *

每行的外观取决于您在适配器中使用的布局，在本例中为`android.R.layout.simple_list_item_2`. 如果您想自定义信息的显示方式，请编写您自己的布局。

# java - JDBC 领域身份验证不应该与单个表一起使用吗？

> ID：15600748
> 
> 赞同：0
> 
> 时间：2013-03-24T16:05:41.710
> 
> 标签：java, security, jakarta-ee, glassfish, jdbcrealm

我正在尝试在 Glassfish 3.1 中设置一个非常基本的 JDBC 领域身份验证。该应用程序由一个具有一种业务方法的 EJB 和一个远程客户端应用程序（不是 Web 应用程序）组成。我想我在这里遗漏了一些基本的东西。

我遵循了 Java EE 6 教程，并完成了所有步骤。我没有收到任何错误，但它从不接受正确的用户名和密码。我最好的猜测是用于身份验证的表的结构可能存在问题，因为我正在尝试使用单个表来存储用户和组。（比我知识渊博的人在另一篇文章中提到这是可能的，官方教程也使用单个表。我的所有用户都将在一个组中（'users'），所以我不想创建一个第二张表。我想让应用程序尽可能简单。）

我有一个带有一个表（'ACCOUNTS'）的数据库（'auth'），它有 3 个字段：'NAME' 是主键，'PASSWORD' 和 'GROUPS'。我对桌子没有任何限制。

我添加了一个用户：

```
INSERT INTO ACCOUNTS (NAME, PASSWORD, GROUPS) VALUES ('Bob', 'bob', 'users'); 
```

我的 glassfish-application.xml 具有指定的角色映射和领域：

```
<glassfish-application>
  <security-role-mapping>
    <role-name>users</role-name>
    <group-name>users</group-name>
  </security-role-mapping>
  <realm>jdbcRealm</realm>
</glassfish-application> 
```

领域设置：[（Glassfish截图）](http://snag.gy/Lfwm6.jpg)

```
Realm Name: jdbcRealm
JAAS Context: jdbcRealm
User Table: auth.ACCOUNTS
User Name Column: name
Password Column: password
Group Table: auth.ACCOUNTS
Group Name Column: groups 
```

豆子：

```
@Stateless
@DeclareRoles("users") 
public class ProtectedBean implements ProtectedBeanRemote {
    private static final Logger logger = Logger.getLogger(ProtectedBean.class.getName());

    @Override
    @RolesAllowed("users")
    public void doProtectedStuff() {
        logger.log(Level.INFO, "Protected method accessed.");
    }

} 
```

还将创建 JDBC 连接池和资源。

当我从远程客户端调用 bean 时，会出现登录提示。我输入名称和密码，然后我得到一个 SecurityException：

```
javax.security.auth.login.LoginException: Security Exception
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:870)
    ...
Caused by: java.lang.SecurityException
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:871) 
```

在此之后，登录窗口再次出现，就像名称/密码错误时一样。当我使用`file`领域时，它可以完美运行，但不适用于 jdbc 领域。

表应该不同吗？（我应该使用多个表吗？）还是我做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:08:46.283

组名的值应该是大写的

# node.js - cookie 和 cookieSession 的区别？

> ID：15600751
> 
> 赞同：3
> 
> 时间：2013-03-24T16:05:58.953
> 
> 标签：node.js, express, connect

express`cookieSession`和in 和有什么不一样？`cookie`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:07:46.357

[`cookieParser`中间件](http://www.senchalabs.org/connect/cookieParser.html)解析 HTTP标`Cookie:`头以填充`req.cookies`（`req.signedCookies`如果您给它一个秘密）。

[`cookieSession`中间件](http://www.senchalabs.org/connect/cookieSession.html)添加了基于 cookie 的会话状态。使用 cookie
取决于中间件。`cookieParser`

没有`cookie`中间件，尽管有一个[`cookie`包](https://npmjs.org/package/cookie)公开了一个创建或解析 cookie 字符串的实用程序函数。中间件使用`cookieParser`此包来读取和写入 HTTP 标头。

# android - TabLayout 中的 NullPointerException

> ID：15600752
> 
> 赞同：1
> 
> 时间：2013-03-24T16:06:06.173
> 
> 标签：android, android-tabhost

安卓 2.3.3

我有一个 tablayout，我正在尝试为 tabhost 中的 3 个选项卡添加三个活动。这是代码..

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="62dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

类文件:::

```
public class Class_Home_Page extends Activity {

    TabHost tbHost_Home_Page;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_home_page);

        tbHost_Home_Page = (TabHost) findViewById(R.id.tabhost);

        TabSpec contacts = tbHost_Home_Page.newTabSpec("Contacts");
        contacts.setIndicator("Contacts", getResources().getDrawable(R.drawable.contacts));
        Intent contactsIntent = new Intent(this, Class_Contacts.class);
        contacts.setContent(contactsIntent);

        TabSpec add_contact = tbHost_Home_Page.newTabSpec("Add Contact");
        contacts.setIndicator("Add Contact", getResources().getDrawable(R.drawable.addcontact));
        Intent addContactIntent = new Intent(this, Class_Add_Contact.class);
        contacts.setContent(addContactIntent);

        TabSpec delete_contact = tbHost_Home_Page.newTabSpec("Delete Contact");
        contacts.setIndicator("Delete Contact", getResources().getDrawable(R.drawable.deletecontact));
        Intent deleteContactIntent = new Intent(this, Class_Delete_Contact.class);
        contacts.setContent(deleteContactIntent);

        tbHost_Home_Page.addTab(contacts); // Line with Exception
        tbHost_Home_Page.addTab(add_contact);
        tbHost_Home_Page.addTab(delete_contact);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_home_page, menu);
        return true;
    }

} 
```

这是我得到的例外:::

```
03-24 21:27:13.030: E/AndroidRuntime(402): FATAL EXCEPTION: main
03-24 21:27:13.030: E/AndroidRuntime(402): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mobilevoiceapps.speeddial/com.mobilevoiceapps.speeddial.Class_Home_Page}: java.lang.NullPointerException
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.os.Looper.loop(Looper.java:123)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-24 21:27:13.030: E/AndroidRuntime(402):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 21:27:13.030: E/AndroidRuntime(402):  at java.lang.reflect.Method.invoke(Method.java:507)
03-24 21:27:13.030: E/AndroidRuntime(402):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-24 21:27:13.030: E/AndroidRuntime(402):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-24 21:27:13.030: E/AndroidRuntime(402):  at dalvik.system.NativeStart.main(Native Method)
03-24 21:27:13.030: E/AndroidRuntime(402): Caused by: java.lang.NullPointerException
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.widget.TabHost.addTab(TabHost.java:212)
03-24 21:27:13.030: E/AndroidRuntime(402):  at com.mobilevoiceapps.speeddial.Class_Home_Page.onCreate(Class_Home_Page.java:37)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-24 21:27:13.030: E/AndroidRuntime(402):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-24 21:27:13.030: E/AndroidRuntime(402):  ... 11 more 
```

可能是什么问题呢？

按照建议更改了代码..我仍然收到错误...

```
public class Class_Home_Page extends Activity {

    TabHost tbHost_Home_Page;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_home_page);

        tbHost_Home_Page = (TabHost) findViewById(R.id.tabhost);

        TabSpec contacts = tbHost_Home_Page.newTabSpec("Contacts");
        contacts.setIndicator("Contacts", getResources().getDrawable(R.drawable.contacts));
        Intent contactsIntent = new Intent(this, Class_Contacts.class);
        contacts.setContent(contactsIntent);

        TabSpec add_contact = tbHost_Home_Page.newTabSpec("Add Contact");
        add_contact.setIndicator("Add Contact", getResources().getDrawable(R.drawable.addcontact));
        Intent addContactIntent = new Intent(this, Class_Add_Contact.class);
        add_contact.setContent(addContactIntent);

        TabSpec delete_contact = tbHost_Home_Page.newTabSpec("Delete Contact");
        delete_contact.setIndicator("Delete Contact", getResources().getDrawable(R.drawable.deletecontact));
        Intent deleteContactIntent = new Intent(this, Class_Delete_Contact.class);
        delete_contact.setContent(deleteContactIntent);

        tbHost_Home_Page.addTab(contacts);
        tbHost_Home_Page.addTab(add_contact);
        tbHost_Home_Page.addTab(delete_contact);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_home_page, menu);
        return true;
    }

} 
```

这是错误..在同一行

```
03-24 21:49:01.330: E/AndroidRuntime(499): FATAL EXCEPTION: main
03-24 21:49:01.330: E/AndroidRuntime(499): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mobilevoiceapps.speeddial/com.mobilevoiceapps.speeddial.Class_Home_Page}: java.lang.NullPointerException
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.os.Looper.loop(Looper.java:123)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-24 21:49:01.330: E/AndroidRuntime(499):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 21:49:01.330: E/AndroidRuntime(499):  at java.lang.reflect.Method.invoke(Method.java:507)
03-24 21:49:01.330: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-24 21:49:01.330: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-24 21:49:01.330: E/AndroidRuntime(499):  at dalvik.system.NativeStart.main(Native Method)
03-24 21:49:01.330: E/AndroidRuntime(499): Caused by: java.lang.NullPointerException
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.widget.TabHost.addTab(TabHost.java:212)
03-24 21:49:01.330: E/AndroidRuntime(499):  at com.mobilevoiceapps.speeddial.Class_Home_Page.onCreate(Class_Home_Page.java:37)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-24 21:49:01.330: E/AndroidRuntime(499):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-24 21:49:01.330: E/AndroidRuntime(499):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:11:56.700

你忘记设置`setContent`and `setIndicator`for `add_contact`and `delete_contact`。将您的代码更改为：

```
 TabSpec add_contact = tbHost_Home_Page.newTabSpec("Add Contact");
 // use add_contact instead of contacts
 add_contact.setIndicator("Add Contact", 
                      getResources().getDrawable(R.drawable.addcontact));
 Intent addContactIntent = new Intent(this, Class_Contacts.class);
 // use add_contact instead of contacts
 add_contact.setContent(addContactIntent);

 TabSpec delete_contact = tbHost_Home_Page.newTabSpec("Delete Contact");
  // use delete_contact instead of contacts
 delete_contact.setIndicator("Delete Contact", 
                    getResources().getDrawable(R.drawable.deletecontact));
 Intent deleteContactIntent = new Intent(this, Class_Contacts.class);
 // use delete_contact instead of contacts
 delete_contact.setContent(deleteContactIntent); 
```

# sql - db2 数据库中的存储过程列表

> ID：15600755
> 
> 赞同：2
> 
> 时间：2013-03-24T16:06:19.620
> 
> 标签：sql, stored-procedures, db2

我想在某个数据库中创建存储过程的列表。我试过了

```
db2 "display procedure MyDb.*" 
```

但我得到错误

```
DB21034E  The command was processed as an SQL statement because it was not a 
valid Command Line Processor command.  During SQL processing it returned:
SQL0104N  An unexpected token "procedure" was found following "display ".  
Expected tokens may include:  "JOIN <joined_table>".  SQLSTATE=42601 
```

在另一个论坛中，我读到我必须查询表格`syscat.procedures`

但如果我打电话

db2“从 syscat.procedures 中选择 *”

我得到了很多我无法真正理解的数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-06T02:55:07.600

减少细节......这只会显示程序名称：

`SELECT procname FROM syscat.procedures WHERE procschema = 'MYSCHEMA'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:46:47.607

不要直接查询 syscat.procedures 表，而是尝试使用[SQLProcedures()](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.apdv.cli.doc/doc/r0000640.htm)存储过程。您可以使用许多输入参数来自定义结果。

# android - 无法在 Android 中启动 AVD 模拟器

> ID：15600756
> 
> 赞同：-1
> 
> 时间：2013-03-24T16:06:36.083
> 
> 标签：android, android-emulator, avd

我尝试在 Eclipse 中创建不同的模拟器，每次都遇到此错误。我没有运行两个 Eclipse 实例......

```
[2013-03-24 16:02:40 - ddmlib] An established connection was aborted by the software in your host machine
    java.io.IOException: An established connection was aborted by the software in your host machine
        at sun.nio.ch.SocketDispatcher.write0(Native Method)
        at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:51)
        at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:89)
        at sun.nio.ch.IOUtil.write(IOUtil.java:60)
        at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:450)
        at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
        at com.android.ddmlib.Client.sendAndConsume(Client.java:605)
        at com.android.ddmlib.HandleHeap.sendREAQ(HandleHeap.java:348)
        at com.android.ddmlib.Client.requestAllocationStatus(Client.java:451)
        at com.android.ddmlib.DeviceMonitor.createClient(DeviceMonitor.java:837)
        at com.android.ddmlib.DeviceMonitor.openClient(DeviceMonitor.java:805)
        at com.android.ddmlib.DeviceMonitor.processIncomingJdwpData(DeviceMonitor.java:765)
        at com.android.ddmlib.DeviceMonitor.deviceClientMonitorLoop(DeviceMonitor.java:652)
        at com.android.ddmlib.DeviceMonitor.access$100(DeviceMonitor.java:44)
        at com.android.ddmlib.DeviceMonitor$3.run(DeviceMonitor.java:580) 
```

我尝试过的事情：

*   [已建立的连接被主机中的软件中止](https://stackoverflow.com/questions/5618664/an-established-connection-was-aborted-by-the-software-in-your-host-machine?rq=)

*   重启 PC 和 Eclipse

在我通过 Eclipse 更新 ADT 和 SDK 之前，它曾经可以工作。我可以连接到我的设备并从那里运行我的应用程序......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:12:55.360

您需要重新连接 ADB。这可以从“Devices Perspective”菜单中完成（右侧的最后一个按钮，上三角有一个“Reset ADB”选项）。

您还可以使用以下命令从命令行重置 ADB：

```
abd kill-server 
```

然后

```
and start-server 
```

# r - 使用 grep 确定字符串的频率

> ID：15600760
> 
> 赞同：5
> 
> 时间：2013-03-24T16:07:24.230
> 
> 标签：r, frequency

如果我有一个向量

```
x <- c("ajjss","acdjfkj","auyjyjjksjj") 
```

并做：

```
y <- x[grep("jj",x)]
table(y) 
```

我得到：

```
y
      ajjss auyjyjjksjj 
          1           1 
```

然而，第二个字符串“auyjyjjksjj”应该计算子字符串“jj”两次。如何将其从真/假计算更改为实际计算“jj”的频率？

此外，如果对于每个字符串，可以计算出子字符串的频率除以字符串的长度，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T16:19:25.367

我使用 gregexpr() 解决了这个问题

```
x <- c("ajjss","acdjfkj","auyjyjjksjj")
freq <- sapply(gregexpr("jj",x),function(x)if(x[[1]]!=-1) length(x) else 0)
df<-data.frame(x,freq)

df
#            x freq
#1       ajjss    1
#2     acdjfkj    0
#3 auyjyjjksjj    2 
```

对于问题的最后一部分，计算*频率*/*字符串长度*......

```
df$rate <- df$freq / nchar(as.character(df$x)) 
```

必须将 df$x 转换回字符串，因为 data.frame(x,freq) 会自动将字符串转换为因子，除非您指定 stringsAsFactors=F。

```
df
#            x freq      rate
#1       ajjss    1 0.2000000
#2     acdjfkj    0 0.0000000
#3 auyjyjjksjj    2 0.1818182 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T16:17:48.640

你使用了错误的工具。Try `gregexpr`，它将为您提供找到搜索字符串的位置（如果未找到，则为 -1）：

```
> gregexpr("jj", x, fixed = TRUE)
[[1]]
[1] 2
attr(,"match.length")
[1] 2
attr(,"useBytes")
[1] TRUE

[[2]]
[1] -1
attr(,"match.length")
[1] -1
attr(,"useBytes")
[1] TRUE

[[3]]
[1]  6 10
attr(,"match.length")
[1] 2 2
attr(,"useBytes")
[1] TRUE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T16:39:05.650

您可以使用 qdap（尽管不在基本安装 R 中）：

```
x <- c("ajjss","acdjfkj","auyjyjjksjj")
library(qdap)
termco(x, seq_along(x), "jj")

## > termco(x, seq_along(x), "jj")
##   x word.count         jj
## 1 1          1 1(100.00%)
## 2 2          1          0
## 3 3          1 2(200.00%) 
```

请注意，与字数相比，输出具有频率和频率（输出实际上是一个列表，但打印出漂亮的输出）。要访问频率：

```
termco(x, seq_along(x), "jj")$raw

## > termco(x, seq_along(x), "jj")$raw
##   x word.count jj
## 1 1          1  1
## 2 2          1  0
## 3 3          1  2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T17:37:18.637

这个简单的`base r`单行代码先使用 strsplit，然后使用 grepl，并且相当健壮，但如果必须将匹配计数`jjjjjj`为 3 个`jj`. 使这成为可能的模式匹配来自[@JoshOBriens 出色的问答](https://stackoverflow.com/q/15575221/1478381)：

```
sum( grepl( "jj" , unlist(strsplit( x , "(?<=.)(?=jj)" , perl = TRUE) ) ) )

# Examples....
f<- function(x){
    sum( grepl( "jj" , unlist(strsplit( x , "(?<=.)(?=jj)" , perl = TRUE) ) ) )
    }   

  #3 matches here
  xOP <- c("ajjss","acdjfkj","auyjyjjksjj")
  f(xOP)
  # [1] 3

  #4 here
  x1 <- c("ajjss","acdjfkj", "jj" , "auyjyjjksjj")
  f(x1)
  # [1] 4

  #8 here
  x2 <- c("jjbjj" , "ajjss","acdjfkj", "jj" , "auyjyjjksjj" , "jjbjj")
  f(x2)
  # [1] 8

  #Doesn't work yet with multiple jjjj matches. We want this to also be 8
  x3 <- c("jjjj" , "ajjss","acdjfkj", "jj" , "auyjyjjksjj" , "jjbjj")
  f(x3)
  # [1] 7 
```

# regex - 删除来自 Shrepoint 列表的无效字符

> ID：15600761
> 
> 赞同：2
> 
> 时间：2013-03-24T16:07:33.907
> 
> 标签：regex, vba, sharepoint, character

我通过在 MS Excel 中插入一个表来链接一个 Sharepoint 列表。该表中的某些单元格值包含我在 VBA 调试器中看到的无效字符，或者如果我将单元格值复制到 Notepad++，用问号可视化。我曾尝试使用如下正则表达式，但没有成功。对此问题的任何见解将不胜感激。
亲切的问候

```
Function SpecialReplace(ByVal Txt As String) As String
    Dim Rg As Object     
    Set Rg = CreateObject("vbscript.RegExp")
    With Rg
        .Pattern = "[0-9a-zA-Z]"
        .Global = True
        SpecialReplace = "A" & .Replace(Txt, "")
    End With
    Set Rg = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:49:18.410

解决方案相当简单：

```
.Pattern = "[^0-9a-zA-Z]" 
```

GL与VBA之争！

# php - 如何在 Wordpress 中查询多个单词标签

> ID：15600762
> 
> 赞同：0
> 
> 时间：2013-03-24T16:07:35.197
> 
> 标签：php, wordpress, tags

我正在开发的一个站点（运行 WordPress 3.4.2）有一个带有标签列表的侧边栏。

当点击标签链接时，用户会被带到 tag.php，其中包含一个自定义查询以显示与相关标签相关的所有帖子。

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
query_posts(array( 'post_type' => array('blog','news'),          'tag'=>single_tag_title('', false), 'posts_per_page' => -1, 'caller_get_posts' => 1, 'paged'    => $paged)); 
```

接下来是一个循环，输出每个帖子的摘要。单击单个词标签（例如“windows”）时一切正常，但单击多词标签（例如“操作系统”）时，查询找不到任何帖子。

我了解 WordPress 标签被设计为单个单词，并且我知道我可以通过将所有多单词标签连字符来解决这个问题。

但是，为了便于阅读，我更愿意继续使用非连字符的多词标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:06:21.820

非常感谢您的帮助 David - 最后来自 Wordpress 版主 @alchymyth 的提示让我找到了这个更简单的解决方案：

我正在使用 single_tag_title 并且需要使用标签 slug。这是小步骤的修复（tag.php 中的所有更改）：

1.  为当前标签设置一个变量：

    ```
    $current_tag = single_tag_title("", false); 
    ```

2.  在 query_posts 更改中：

    ```
    'tag'=>single_tag_title('', false) 
    ```

    至...

    ```
    'tag_slug__and'=>array($current_tag) 
    ```

...所以完整的代码是：

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$current_tag = single_tag_title("", false);

query_posts(array( 'post_type' => array('blog', 'news'), 'tag_slug__and'=>array($current_tag), 'posts_per_page' => -1, 'caller_get_posts' => 1, 'paged' => $paged)); 
```

这是论坛帖子： [http ://wordpress.org/support/topic/query_posts-does-not-return-results-for-multiple-word-tags?replies=3#post-4018519](http://wordpress.org/support/topic/query_posts-does-not-return-results-for-multiple-word-tags?replies=3#post-4018519)

再次感谢。

# cocoa-touch - 在 UITableView 上显示图像的最佳实践

> ID：15600768
> 
> 赞同：-2
> 
> 时间：2013-03-24T16:07:56.450
> 
> 标签：cocoa-touch, core-data

我正在制作一个应用程序并面临以下问题：

我正在与将 JSON 解析为核心数据的服务器同步，我有一些实体：照片、人物和报纸。我还有 2 个 UITableViews，我分别在其中显示人员的详细信息和新闻。图像存储在名为 Photo 的单独实体中。我正在寻找这种方法的最佳实践。我认为 NSFetchedResultsController 可以提供帮助，但我可能需要为各自的视图覆盖它们。如果我使用照片 ID 并在 UITableCellView 中查找图像是否有意义。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:32:41.940

您应该考虑使用像 AFNetworking 这样的框架，它向 UIImageView 添加一个类别，让它从给定的 URL 异步加载图像。一旦图像被异步加载，你也可以将它缓存到 Core Data。如果您想要更简单的方法，我真的建议您使用 Sensible TableView 框架。该框架将处理从远程获取数据、在表格视图（包括图像）上显示数据以及所有核心数据同步的所有事情。HTH。

# css - HTML/CSS 文本从 div 顶部对齐

> ID：15600772
> 
> 赞同：1
> 
> 时间：2013-03-24T16:08:06.027
> 
> 标签：css, html, text, alignment

我的文本从 div 顶部对齐有问题。

这是HTML：

```
<div id="services">

        <div class="langelis">
            <div class="icon">
                <img src="images/knyg.jpg" alt="knyga" />
            </div>

            <div class="txt">
                    <h1>Lorem Ipsum</h1>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s..</p>
            </div>
        </div>
        <div class="clear"></div>
    </div> 
```

这是CSS：

```
#content #main #services {
    width: 1010px;
    height: auto;
    min-height: 320px;
    margin: 50px auto;
}

#content #main #services .langelis {
    width: 510px;
    height: auto;
    min-height: 140px;
    position: relative;
    border: 1px #000 solid; 
}

#content #main #services .langelis .icon {
    width: 65px;
    min-height: 140px;
    height: auto;
    float: left;
    border: 1px #000 solid;
}

#content #main #services .langelis .txt {
    width: 440px;
    height: auto;
    float: left;
    border: 1px #000 solid;
} 
```

如何制作文字

*Lorem Ipsum Lorem Ipsum 只是印刷和排版行业的虚拟文本。自 1500 年代以来，Lorem Ipsum 一直是业界标准的虚拟文本。*

从 .txt div 的中心对齐？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-15T03:34:51.460

首先你需要修复你的css选择器。
你不能用这种方式写所有这些id。

```
#content #main #services 
```

只需选择 1 个元素和他的孩子。
例如，如果您对此进行测试，它将与您一起使用：

```
#services .langelis .txt {
width: 440px;
height: auto;
float: left;
border: 1px #000 solid;
text-align:center; 
```

}

如果你想要它垂直对齐**.txt** div 的中心，你可以这样做：

```
#services {
    width: 1010px;
    height: auto;
    min-height: 320px;
    margin: 50px auto;

}

#content #main #services .langelis {
    width: 510px;
    height: auto;
    min-height: 140px;
    position: relative;
    border: 1px #000 solid; 
}

#content #main #services .langelis .icon {
    width: 65px;
    min-height: 140px;
    height: auto;
    float: left;
    border: 1px #000 solid;
}

 #services .txt {
    width: 440px;
    height: 500px;
    border: 1px #000 solid;
    display:table;
    text-align:center;
}
.sub{
    display:table-cell;
    vertical-align:middle;
    text-align:center;
}
```

```
<div id="services">

        <div class="langelis">
            <div class="icon">
                <img src="images/knyg.jpg" alt="knyga" />
            </div>

            <div class="txt">
            <div class="sub">
                    <h1>Lorem Ipsum</h1>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s..</p>
            </div>
            </div>
        </div>
        <div class="clear"></div>
    </div>
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T16:12:26.577

对于垂直对齐，请参见这个简单的示例：[http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

# javascript - 二维数组对角线检查“X”

> ID：15600775
> 
> 赞同：0
> 
> 时间：2013-03-24T16:08:13.280
> 
> 标签：javascript, for-loop

我尝试创建一个二维数组并在对角线上放置四个“X”，并创建了一个双循环来检测和计算 X 的数量，但不是只显示一个“玩家 1 获胜”，而是显示其中的 10 个。

```
var creatematrix = function (nbRang, nbColumn) {
    var result = Array(nbRang);
    for (var i=0; i<nbRang; i++) {
        result[i] = Array(nbColumn);
    }
    return result;
};

var m = creatematrix(6, 7);

m[4][1] = "X";
m[3][2] = "X";
m[2][3] = "X";
m[1][4] = "X";

var sumX = 0;
for(var k = 5; k >= 0  ; k--){
    for(var i = 0 ; i<= 6; i++){
        if(m[k][i]== "X" ){
            sumX += 1;
        }
        else if(sumX == 4){
            alert("player 1 won");      
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:12:17.213

我认为问题是如何使代码只显示一次警报-您应该设置一个用户拥有一个标志以及游戏结束时的标志，然后最后使用警报。

现在警报在循环中，因此每次循环时都会触发它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:11:03.523

您的总循环执行 42 次 (6x7)。显然，在第 32 次迭代中，`sumX`达到值 4。因此，在这之后的所有 10 次，都`alert`被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:11:31.493

一旦检测到获胜者，您就不会停止循环。

您可以尝试以下选项之一：

1.  在两个循环检查中添加一个条件，`for`看看你是否已经有了`sumX == 4`

2.  `return`从警报后的功能

# java - Java - 使用哪种数据库/技术来处理大量频繁更改的键值对？

> ID：15600780
> 
> 赞同：1
> 
> 时间：2013-03-24T16:09:07.570
> 
> 标签：java, database, caching, synchronization, key-value

我正在开发一个 Java 应用程序，它处理大量（~ 1.000.000）的键值对。键的大小是固定的，而值的大小从 20 字节到 ~1 kbyte 不等。所以在最坏的情况下，我得到了大约 1 GB 的数据。
键值对由多个线程（约 3-5 个线程）同时读取和写入。在大多数情况下，读取和写入操作只影响单个键值对。
在键值对之上放置一个关系数据模型，用于选择所需的键。目前我将[H2](http://www.h2database.com/html/main.html)用于关系数据，但我不清楚使用哪种技术来存储键值对。

1.  我应该使用哪个数据库来存储键值对？
    *   [伯克利数据库](http://www.oracle.com/technetwork/products/berkeleydb/overview/index-093405.html)适合我的情况吗？
2.  此外，更重要的是，我应该在哪个级别实现同步？

    *   数据库层对我来说似乎很明智，但我应该如何处理应用程序中的连接管理？
    *   我的第一个方法
        *   为每个读/写操作使用一个连接池和一个单独的连接。
            虽然这很容易实现，但在我看来，连接池的同步成为了瓶颈。
    *   我的第二个解决方案
        *   对所有读取操作使用单个连接，对所有写入操作使用另一个连接，但我不确定该连接是否允许并发访问以及是否以可扩展的方式对它们进行序列化。
3.  由于 JTables 定期查询键值对，因此访问时间很关键。我应该信任数据库的缓存系统还是在应用层实现/使用另一个缓存，例如 EHCache？

**编辑：**
该应用程序应该在较旧的 PC 上运行，因此我无法将整个数据放入内存中。
将键值对存储在现有的 H2 数据库中是可能的，但将它们放入专门用于键值对及其同步以获得更好性能的数据库不是更有意义吗？
我也不关心 ACID 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:22:30.487

1) NoSQL 数据库似乎适合您的要求：仅通过键访问值。Berkeley 是一个有序的键值对存储。您需要订购钥匙吗？如果没有，请检查其他解决方案：Mongo、couchbase。

2）在数据库级别同步将是最明智的选择。所以我会选择你的第一种方法。您的第二种方法肯定会引起争用，并且对开发人员来说更难管理。

3）如果必须缓存。您是否有经常访问的记录？EHCache 很好，你也可以使用其他系统比如 memcache。您需要根据您选择的数据库来决定缓存层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:28:26.130

数以百万计的记录或 1GB 的数据量对于当今的数据库来说并不是巨大的数量。您可以使用“传统” DBRMS（PostgreSQL、MySQL、Oracle ......）或采用“热门”技术（H2、MongoDB ......）。Oracle Berkeley 可以将数据存储在内存中，因此读写速度非常快。进行索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:20:01.103

如果您还没有，请查看 MongoDB。它不是事务性的，但它主要驻留在内存中，如果不需要 ACIDity 的所有方面，它看起来可以简化您的堆栈。

# java - ActionBar 空指针异常

> ID：15600783
> 
> 赞同：0
> 
> 时间：2013-03-24T16:09:30.557
> 
> 标签：java, android

我想在我的应用程序中使用 ActionBarSherlock。当我打电话时，`getSupportActionBar()`我得到一个`NullPointerException`；我已经将 ActionBarSherlock 库导入到我的项目中。

这是我的Java类：

```
public class ProfileActivity extends SherlockActivity  {

    @Override
            public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
                com.actionbarsherlock.view.MenuInflater inflater = this.getSupportMenuInflater();
                inflater.inflate(R.menu.mainmenu, menu);
                return true;
            }

        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);

                getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

                setContentView(R.layout.profile_page);

                getSupportActionBar().setTitle("Example!");  //nullpointerException

              }
        }

} 
```

还有我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sal"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CAMERA"/>

    <permission
        android:name="com.vogella.android.locationapi.maps.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
     Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <uses-permission android:name="com.example.sal.permission.MAPS_RECEIVE"/>
        <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:name=".FriendPickerApplication">

        <activity
            android:name="com.example.sal.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

              </activity>

         <!--  Entry for RegisterActivity.class -->
        <activity android:name=".RegisterActivity"
                  android:label="Register New Account"></activity>
        <meta-data android:value="@string/app_id" android:name="com.facebook.sdk.ApplicationId"/>
        <activity android:label="@string/app_name" android:name="com.facebook.LoginActivity"></activity>
        <activity android:name=".ProfileActivity" android:label="Profile page"></activity>

        <meta-data
              android:name="com.google.android.maps.v2.API_KEY"
              android:value="AIzaSyDTVRXMTmfe3jZyAlt-87kRgqM8y4TzIto"/>

        <activity android:name="SaleMapActivity"></activity>
        <activity android:name="GroupMapActivity"></activity>
        <activity android:name="DeliverMapActivity"></activity>
        <activity android:name="PickFriendsActivity"></activity>
        <activity android:name="TabMainActivity"></activity>
        <activity android:name="itemSaleActivity"></activity>
        <activity android:name="FreindsActivity"></activity>
        <activity android:name="ExitActivity"></activity>
        <activity android:name="OneTimeDetailesScreen"></activity>

    </application>

</manifest> 
```

谢谢。

这是我的风格：

```
<style name="AppTheme" parent="Theme.Sherlock.Light">
        <item name="android:windowActionBar">true</item>
    </style> 
```

这里是logcat：

```
03-24 16:20:24.325: E/AndroidRuntime(1927): Caused by: java.lang.NullPointerException
03-24 16:20:24.325: E/AndroidRuntime(1927):     at com.example.sal.ProfileActivity.onCreate(ProfileActivity.java:349)
03-24 16:20:24.325: E/AndroidRuntime(1927):     at android.app.Activity.performCreate(Activity.java:5104)
03-24 16:20:24.325: E/AndroidRuntime(1927):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-24 16:20:24.325: E/AndroidRuntime(1927):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-24 16:20:24.325: E/AndroidRuntime(1927):     ... 23 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:47:50.110

我现在无法解释您为什么要获得 NPE，但请尝试以下操作：

而不是使用

```
getSupportActionBar().setTitle("Example!");  //nullpointerException 
```

就用这个

```
 setTitle("Example!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:14:14.833

您的应用程序主题是否扩展了 ABS 主题？

例如，当您指定：

```
android:theme="@style/AppTheme" 
```

你的风格应该是：

```
<style name="AppTheme" parent="Theme.Sherlock.Light">
    ...
</style> 
```

另请参阅[Jake Wharton 本人的这个答案](https://stackoverflow.com/a/7300887/154306)。

# ms-access - MS Access ODBC 连接

> ID：15600787
> 
> 赞同：0
> 
> 时间：2013-03-24T16:09:49.783
> 
> 标签：ms-access, web-applications, jdbc, odbc, driver

我正在使用 MS Access 作为 Web 应用程序的后端。
由于我使用的是 64 位操作系统，因此我已经更新了`sysWOW64`ODBC（数据源）中的路径......但我仍然收到错误消息：

```
org.apache.jasper.JasperException: javax.servlet.ServletException: 
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified 
```

我使用的代码是：

```
String database="G:\\databs.mdb";
String url="jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=" + database+";DriverID=22;READONLY=true"; 

Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con=DriverManager.getConnection(url,"","");
Statement stmt=con.createStatement(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:17:34.453

问题不是机器是 64 位，而是你的 JVM 是 64 位。如果是，请使用 64 位管理员，如果不是，请使用 32 位管理员（您知道它们都在哪里）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:37:11.640

您的问题表明您已经了解该`sysWOW64`子系统，因此请记住，在 64 位 Windows 机器上，有两个“ODBC 管理员”应用程序...

`C:\Windows\System32\odbcad32.exe`对于 64 位应用程序，以及

`C:\Windows\SysWOW64\odbcad32.exe`对于 32 位世界

...（是的，命名似乎有点落后），在 64 位机器上，您可以看到的`Control Panel > Administrative Tools`是 64 位机器。

您在其中一个中创建的系统 DSN 在另一个中不可见。在为特定应用程序配置 DSN 时，您必须“注意自己的比特性”。:)

# facebook - 将尺寸传递到新闻源中的 Flash

> ID：15600788
> 
> 赞同：1
> 
> 时间：2013-03-24T16:10:02.577
> 
> 标签：facebook, flash, feed

我正在使用新闻源游戏在新闻源中显示交互式 Flash 内容。

直到上周，新闻源和时间线都支持 398x398 像素。

时间线已更新，新的新闻源即将推出，这意味着我们需要支持大小和维度的变体。目前，这些尺寸尚未得到证实。

2个问题：

1.  您可以在使用 og 标签写入闪存时将其大小传递给自身吗？我尝试在 url 末尾附加字符串 ?size=x ，但闪存已被沙盒化，无法读取。存在 flashvars 变量，但我们似乎无法访问它们

2.  或者，是否可以通过将标签中的 Flash 电影参数设置为 100% 并处理 Flash 电影中的布局逻辑来使用流体布局？

    "og:video:scale" content="exactfit" "og:video:height" content="100%" "og:video:width" content="100%"

然后让闪光灯在负载时查询其宽度/高度。

有谁知道我们如何让它工作，以便我们可以加载正确的布局，无论是在新闻源或时间轴中查看 Flash 吗？

谢谢， 多姆

# mysql - MySQL查询缓慢

> ID：15600790
> 
> 赞同：1
> 
> 时间：2013-03-24T16:10:07.327
> 
> 标签：mysql, performance

我有一个运行非常缓慢的查询。

运行大约需要 7 秒。

但是，如果我从查询中删除“和时间戳 > 20130201”，则运行时间只需不到 400 毫秒。

我想也许时间戳字段没有被索引，但它是，所以我想知道为什么将这样的日期添加到查询会导致它变慢？

如果可以的话，我宁愿不删除查询的那部分，但我不明白为什么它应该在那里慢得多。

询问：

```
select p1_score,p2_score,p3_score,p4_score from game where  (p1_user_id='$uid' or p2_user_id='$uid' or p3_user_id='$uid' or p4_user_id='$uid') and turn=0 and timestamp > 20130201 
```

解释：

```
1   SIMPLE  game    range   p1_user_id,p2_user_id,p3_user_id,p4_user_id,turn,timestamp  timestamp   4   NULL    51486   Using where 
```

创建 SQL：

```
CREATE TABLE `game` (
  `id` bigint(10) NOT NULL AUTO_INCREMENT,
  `p1_user_id` varchar(100) NOT NULL DEFAULT '',
  `p2_user_id` varchar(100) NOT NULL DEFAULT '',
  `p3_user_id` varchar(100) NOT NULL DEFAULT '',
  `p4_user_id` varchar(100) NOT NULL DEFAULT '',
  `player_one_name` varchar(100) DEFAULT NULL,
  `player_two_name` varchar(100) DEFAULT NULL,
  `player_three_name` varchar(100) DEFAULT NULL,
  `player_four_name` varchar(100) DEFAULT NULL,
  `player_one_email` varchar(100) DEFAULT NULL,
  `player_two_email` varchar(100) DEFAULT NULL,
  `player_three_email` varchar(100) DEFAULT NULL,
  `player_four_email` varchar(100) DEFAULT NULL,
  `p1_score` bigint(10) DEFAULT '0',
  `p2_score` bigint(10) DEFAULT '0',
  `p3_score` bigint(10) DEFAULT '0',
  `p4_score` bigint(10) DEFAULT '0',
  `game_name` varchar(255) DEFAULT NULL,
  `players` smallint(1) DEFAULT NULL,
  `turn` varchar(10) DEFAULT NULL,
  `turn_num` smallint(10) DEFAULT '0',
  `layout` longtext,
  `verify` varchar(40) DEFAULT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `message` longtext,
  `tourn` smallint(5) NOT NULL DEFAULT '0',
  `round` smallint(4) NOT NULL DEFAULT '0',
  `tourn_id` varchar(20) NOT NULL DEFAULT '',
  `move_history` longtext NOT NULL,
  `next_turn` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `tourn` (`tourn`),
  KEY `by_player_one_email` (`player_one_email`(10)),
  KEY `by_player_two_email` (`player_two_email`(10)),
  KEY `by_player_three_email` (`player_three_email`(10)),
  KEY `by_player_four_email` (`player_four_email`(10)),
  KEY `p1_user_id` (`p1_user_id`),
  KEY `p2_user_id` (`p2_user_id`),
  KEY `p3_user_id` (`p3_user_id`),
  KEY `p4_user_id` (`p4_user_id`),
  KEY `turn` (`turn`),
  KEY `verify` (`verify`),
  KEY `next_turn` (`next_turn`),
  KEY `timestamp` (`timestamp`),
  KEY `round` (`round`),

) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:32:54.617

如果没有时间戳条件的查询运行得很快，那么理论上，将其作为子查询应该运行得同样快。假设性能差异是由查询优化器中的错误引起的，这应该具有相同的性能：

```
SELECT * FROM (query without timestamp condition) t WHERE timestamp > 20130201 
```

这当然只是猜测。如果不知道表、查询和查询的解释计划，就不可能对问题给出明确的答案。

**更新：**现在我们有了表描述和解释计划，我们看到查询正在使用`timestamp`列上定义的索引。显然这个索引不是这个查询的好选择，因为查询最终检查了超过 51000 行。您可以使用索引提示[告诉 MySQL 不同的索引可能会更好。](http://dev.mysql.com/doc/refman/5.5/en/index-hints.html)

例如，这应该使用用户 id 上的索引，它应该像查询一样执行，没有限制`timestamp`：

```
SELECT ... from game USE INDEX (p1_user_id,p2_user_id,p3_user_id,p4_user_id)
WHERE ... 
```

或者，您可以要求 MySQL 忽略 上的索引`timestamp`，因此它应该使用其他一些希望更合适的索引：

```
SELECT ... from game IGNORE INDEX (timestamp) WHERE ... 
```

该查询可能会受益于创建多列索引。

# ios - 如何根据情节提要中的状态对不同的开始屏幕进行建模？

> ID：15600806
> 
> 赞同：0
> 
> 时间：2013-03-24T16:11:39.773
> 
> 标签：ios, uistoryboardsegue

当我的应用程序启动时，它需要根据状态变量显示 3 个不同的屏幕之一，因此将相应地有 3 个视图控制器。

我不确定如何使用情节提要对这种情况进行建模，因为只有一个视图控制器可以作为情节提要中的初始 VC。

可能我可以将初始 VC 设为导航控制器，它会酌情推送其他 3 个 VC 之一，但是我的应用程序中没有导航栏，也不需要导航控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:40:20.863

从您想成为窗口的根视图控制器的任何控制器，您可以使用 presentViewController:animated:completion: 从其 viewDidAppear 方法（可能是 viewWillAppear？）呈现这 3 个控制器之一（动画设置为 NO）。然后，这三个中的一个将是用户首先看到的。

# macos - 上传已编译的应用程序

> ID：15600807
> 
> 赞同：1
> 
> 时间：2013-03-24T16:11:40.727
> 
> 标签：macos, upload, compilation, ftp

当我编译一个应用程序时，我将它视为 Mac 上的单个“可执行文件”。如果我将其移至 Windows 计算机，我会将其视为包含文件的文件夹。如果我从论坛的附件按钮浏览它，我会将其视为`.app.zip`文件。

最后一个文件，如果在我的 Mac 上下载，可以**直接执行，无需解压缩**。

我需要将文件通过 FTP 传输到服务器，但如果是 FTP，我会上传一个文件夹，就像我在 Windows 上看到它时一样。现在要上传它我正在做一件完全疯狂的事情：上传到论坛，在 Windows 上下载 .app.zip 文件，上传到 FTP。

我怎样才能直接从Mac上传文件而不做所有这些疯狂的事情，**保持“下载后运行”功能**？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:55:18.257

我从未听说过能够`.app.zip`直接运行文件。您必须打开它两次；第一次解压，然后换成原来的`.app`“文件”（其实是一个目录），然后像往常一样打开这个文件。

我`.app`通过各种方式尝试压缩文件，发现没有先解压缩就无法使文件可执行。

在我看来，分发应用程序的最佳方式是压缩它们。用户发现解压缩东西很容易（他们只需要双击它们）。您可以在查找器中执行此操作（右键单击 -> 压缩）或在终端中执行此操作：

```
zip -r MyApp.app.zip MyApp.app 
```

要分发不需要资源的最小应用程序，您可以右键单击该应用程序，转到“显示包内容”，转到“内容 -> MacOS”，然后复制您在其中找到的可执行文件。这是你的应用程序的核心，如果不使用任何资源或其他花哨的东西，可以直接运行。这不是一个好的用户体验，因为它使终端窗口保持打开状态，但是如果您不顾一切地将您的应用程序作为单个解压缩文件分发，那么这就是要走的路。

您可能还对这篇文章感兴趣： http: [//daringfireball.net/2009/09/how_should_mac_apps_be_distributed](http://daringfireball.net/2009/09/how_should_mac_apps_be_distributed)

# ruby-on-rails - rails 3.2中的序列化属性解决方案？

> ID：15600810
> 
> 赞同：1
> 
> 时间：2013-03-24T16:11:56.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我从 3.o 升级到 ruby​​ Rails 3.2 我使用了这个序列化属性解决方案：

> [https://github.com/emmapersky/serialized_attributes](https://github.com/emmapersky/serialized_attributes)

代码如下：

```
serialized_attr :body_data, :entry_data, :class_name => :hash,
              :accessors => BODY_ATTRS 
```

保存模型仍然对我有用。但是读回模型不起作用。属性回来了 nil

rails 3.2有不同的解决方案吗？谢谢

---- 编辑：好的，我发现了一些东西。在升级后的新条目中，数据库中的哈希如下所示：

```
---
- !ruby/object:Hash
time: "22" 
```

在升级之前它看起来像这样：

```
---
- time: "22" 
```

旧条目有效。它能够从数据库中“读取”它们，那么那串红宝石是从哪里来的呢？我怎样才能摆脱它？

# c++ - C++中的运算符重载“<<”

> ID：15600813
> 
> 赞同：0
> 
> 时间：2013-03-24T16:12:15.747
> 
> 标签：c++, overloading, operator-keyword

我尝试在 C++ 中重载运算符，但我遇到了一些困难。这是我在课堂上的内容：

```
ostream & operator <<(ostream & s)
 {
  s << w();
 return s;

}
 string w()
{
stringstream ss;
string str;
for (int i=n-1; i>=0; i--)
{
    if (i==n-1)
    {
        ss<<tablica[i] << "x^" << i;
    }
    else
    {
        if (tablica[i]<eps && tablica[i]>-eps) ss <<"+" << +tablica[i]<< "x^" << i;
        else if (tablica[i]<eps)ss << tablica[i]<< "x^" << i;
        if(tablica[i]>eps) ss <<"+" << +tablica[i]<< "x^" << i;
    }

}
ss >> str;
return str;

} 
```

我正在尝试这样使用：

```
cout << p << endl; 
```

错误：`no match for 'operator<<' in 'std::cout << p` 这是我的整个程序代码：[http ://codepad.org/xBijPMCp](http://codepad.org/xBijPMCp)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:14:28.200

`ostream & operator <<(ostream & s)`应该在与特定类的关系中实现（使其有用），所以签名应该是

```
friend ostream & operator <<(ostream & s, const class_name &c); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:27:26.083

以两种方式之一调用重载运算符。要么作为成员函数， where`x op y;`被视为，要么作为`x.op(y);`全局函数， where`x op y;`成为`op(x,y);`.

请注意，当运算符是成员函数时，左操作数必须是您重载运算符的那个。在插入流: 的情况下`x << y;`，左操作数是流对象，因此要将运算符重载为成员函数，您必须作为流类的成员进行重载。

由于修改流类几乎是禁止的，因此您唯一真正的选择是将重载实现为全局函数。然而，在这种情况下，函数必须接受*两个*参数（一个用于左操作数，一个用于右操作数）。

因此，插入运算符几乎总是需要如下签名：

```
std::ostream &operator<<(std::ostream &os, T const &t) 
```

（`T`您要插入的任何类型在哪里）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T17:30:11.190

运算符重载是当对应的运算符用于一个或多个变量时，告诉编译器如何执行特定操作的能力。

例如，编译器对减法运算符的行为不同，`-`具体取决于运算符的使用方式。

*   当它放在诸如 -48 之类的数值的左侧时，编译器会认为该数字为负值。
*   当在两个整数值（例如 80-712）之间使用时，编译器会应用减法运算。
*   当在整数和双精度数之间使用时，例如 558-9.27，编译器从右数中减去左数；该操作产生一个双精度数。
*   当`-`符号翻倍放在变量的一侧时，如`--Variable`or `Variable--`，变量的值需要递减；换言之，应从中减去值 1。

所有这些操作都有效，因为减法运算符`-`已在各种类中重新配置以适当地执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T16:34:15.560

您首先需要考虑您的总体设计。我认为您想重载`<<`以使用变量的类型`tablica`。是`operator<<()`二元运算符：声明必须采用以下形式：（ `<<(Type t1, Type t2).`您是否希望它成为成员，这将“退化”为仅一个参数，因为第一个左侧将是一种`this`）。在您的情况下，例如：

```
ostream & operator <<(ostream & s, const tablica_type &c); 
```

您的 tablica 是一个全局变量，并且 n 也是，通常不是一个好主意。您可能想要定义一个包含 tablica 和 n 的类，并为这个类覆盖 <<()。

# android - 获取默认联系人应用包名android

> ID：15600818
> 
> 赞同：1
> 
> 时间：2013-03-24T16:12:40.013
> 
> 标签：android, android-intent

我需要获取设备的默认联系人应用程序，我知道创建意图并获取可以打开它的应用程序的技巧，但是联系人的正确意图是什么？

# arrays - 在 asm x64 中获取数组值

> ID：15600819
> 
> 赞同：0
> 
> 时间：2013-03-24T16:12:40.333
> 
> 标签：arrays, assembly, 64-bit, x86-64

我对与 C 混合使用的 asm 代码有问题，但在具有适当参数的 asm 代码中使用时却没有。

```
;; array - RDI, x- RSI, y- RDX
getValue:   
   mov r13, rsi
   sal r13, $3
   mov r14, rdx
   sal r14, $2
   mov r15, [rdi+r13]
   mov rax, [r15+r14]

   ret 
```

从技术上讲，我想保持 rdi、rsi 和 rdx 寄存器不变，因此我使用其他寄存器。

我使用的是 x64 机器，因此我的指针有 8 个字节。从技术上讲，这段代码应该这样做：

```
int getValue(int** array, int x, int y) {
    return array[x][y];
} 
```

它以某种方式在我的 C 代码中工作，但在 asm 中以这种方式使用时不起作用：

```
mov rdi, [rdi]    ;; get first pointer - first row
mov r9,  $4       ;; we want second element from the row
mov rax, [rdi+r9] ;; get the element (4 bytes vs 8 bytes???)
mov rdi, FMT      ;; prepare printf format "%d", 10, 0
mov rsi, rax      ;; we want to print the element we just fetched
mov eax, $0       ;; say we have no non-integer argument
call printf       ;; always gives 0, no matter what's in the matrix 
```

有人可以看到这个并帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:27:45.733

这意味着元素是双字，因此不应该加载 qword`sal r14, $2`之前的最后一行。`ret`此外，x86 有很好的缩放寻址模式，所以你可以这样做：

```
mov rax, [rdi + rsi * 8]  ; load pointer to column
mov eax, [rax + rdx * 4]  ; note this loads a dword
ret 
```

这意味着您有一个指向*columns*的指针数组，这是不寻常的。你可以这样做，但这是故意的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:24:11.097

这是一个标准的整数矩阵。

```
int** array;
sizeof(int*) == 8
sizeof(int) == 4 
```

我的看法是，当我一开始有那个数组时，我有一个指向没有“空白”的内存空间的指针，它一个一个地保存所有指针（按索引），所以我说“让我们去数组的第 rsi 个元素”，这就是我移动 rsi-th * 8 个字节的原因。所以现在我得到了同样的情况，但是指针应该指向一个整数空间，所以是 4 字节的项目。这就是为什么我在那里移动了 4 个字节。

我的想法错了吗？

# java - 在单独的线程中调用方法会导致 NullPointerException

> ID：15600823
> 
> 赞同：0
> 
> 时间：2013-03-24T16:13:09.133
> 
> 标签：java, jpa, ejb

我有一个方法 loadDatabase()。该方法本身非常有效。

当我创建一个单独的线程并调用方法 loadDatabase() 时，我得到如下所示的错误。在主线程上它工作正常。

有任何想法吗？注意：值 causecode、eventid 和 description 不为空，因为我已将它们打印到屏幕上。

**错误**

```
15:59:58,693 INFO  [stdout] (Thread-64) Importing EcentCauseSheet
15:59:58,694 INFO  [stdout] (Thread-64) Cause Code is 0
15:59:58,694 INFO  [stdout] (Thread-64) Event Id  4097
15:59:58,695 INFO  [stdout] (Thread-64) Description is RRC CONN SETUP-SUCCESS
15:59:58,703 ERROR [stderr] (Thread-64) Exception in thread "Thread-64" java.lang.NullPointerException
15:59:58,704 ERROR [stderr] (Thread-64)     at com.testapp.service.EntryConfig.loadDatabase(EntryConfig.java:131)
15:59:58,704 ERROR [stderr] (Thread-64)     at com.testapp.service.EntryConfig.HelloWorld(EntryConfig.java:48)
15:59:58,704 ERROR [stderr] (Thread-64)     at com.testapp.service.EntryConfig.run(EntryConfig.java:39) 
```

**类的 Java 代码**

```
@Stateful
@LocalBean
public class EntryConfig extends Thread implements TableDao {

    @Inject
    private EntityManager em;
//....... 
```

**线程的Java代码**

```
@Override
       public void run()
       {
        HelloWorld();

       } 
```

公共无效HelloWorld（）{

```
 try {
        loadDatabase();         

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

**loadDatabase() 的 Java 代码**

```
public void loadDatabase()
    {
        InputStream inp = null;
        System.out.println("Eureka Kind of .....");
        try {   
            inp = new FileInputStream("/home/ubuntu/Downloads/test.xls");  

        } catch (Exception ex) {
        } finally {
            try {
                wb = WorkbookFactory.create(inp);
            } catch (InvalidFormatException e) {

                e.printStackTrace();
            } catch (IOException e) {

                e.printStackTrace();
            }

            Sheet eventCauseTableSheet = wb.getSheetAt(1);

            for (int i = 1; i <= eventCauseTableSheet.getLastRowNum(); i++) {
                System.out.println("Importing EcentCauseSheet");

                row = eventCauseTableSheet.getRow(i);                                       
                int causeCode = (int)(row.getCell(0).getNumericCellValue());                                         
                int eventId = (int)(row.getCell(1).getNumericCellValue());                      
                String description = row.getCell(2).toString();

                System.out.println("Cause Code is " + causeCode);
                System.out.println("Event Id  " + eventId);             
                System.out.println("Description is " + description);

                EventCauseTable eventCauseTable = new EventCauseTable(causeCode,eventId,description);               
                em.persist(eventCauseTable);
                System.out.println("Persisted EventCauseSheet row" + (i+1));

            }

//............ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:24:14.230

在有状态 EJB 中扩展线程通常不是一个好主意，因为它可能随时被容器[钝化。](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html#gipln)您还可以考虑集群和 SFSB 复制——您的 EJB 可能被序列化到另一台机器上，而 Thread 并不真正适用于此（它不是[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)）。

如果在 em.persists(...) 处抛出 NullPointerException，则您缺少“em”引用。最有可能的是，您尝试将 EntityManager @Inject 注入到不受容器管理的 EntryConfig 实例中。如果您想在容器之外重用此类，则需要手动设置 EntityManager（第一部分仍然适用 - 您可能应该重新设计整个组件）。

# html - 如何使 2 个 div 浮动，左 div 具有固定的右边距？

> ID：15600828
> 
> 赞同：1
> 
> 时间：2013-03-24T16:13:41.267
> 
> 标签：html, css, layout

我实际上不知道如何命名我的问题。但我会解释我需要做什么。

HTML 很简单：

```
<div id="left_div"></div>
<div id="right_div"></div> 
```

我需要`left_div`在左边，宽度为 100%，但右边距固定为 320 像素。`right_div`具有固定宽度 300px 并且必须在旁边`left_div`。

我知道我可以很容易地做到这一点，当我这样做时：

```
<div id="right_div" style="float:right;width:300px"></div>
<div id="left_div" style="margin-right:320px;"></div> 
```

但问题是我需要 HTML 就像我之前提到的那样。`DIVs`事情的顺序。如果有人想知道为什么，那是因为我正在开发响应式网站，当视口太窄时，我需要在`right_div`下面`left_div`。我不能用上面提到的简单解决方案来做到这一点。

我希望我的问题是有道理的，我感谢任何答案或有用的提示。

哦，我忘了提到我需要这是纯 HTML+CSS，没有 JS。而且我不需要支持IE7及以下。

**更新：** `left_div`必须是 width:auto 并且右边距必须是固定的（例如 300px）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:23:22.217

[如果你希望你的布局是响应式的，你应该在这个列表](http://speckyboy.com/2011/11/17/15-responsive-css-frameworks-worth-considering/)中使用像[Columnal](http://www.columnal.com/)、[1140](http://cssgrid.net/)或更多的 CSS 框架。

这些框架中的大多数都支持[网格系统](http://www.thegridsystem.org/)，这是构建布局的最佳方式，您不必再担心浮动和像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:34:07.583

我认为仅使用纯 HTML + CSS 几乎不可能实现您想要的。

可能对你有用的是我做的这样的事情：http: [//jsfiddle.net/fmZAm/](http://jsfiddle.net/fmZAm/)

HTML：

```
<div class="main">
  <div class="left"></div>
  <div class="right">
    <div class="fixed_content"></div>
  </div>
</div> 
```

CSS：

```
div.main
{ 
  min-height: 500px;  /* force some height */
  min-width: 300px;   /* min width to show content */
  text-align: center; /* center content when in vertical responsive mode */
  font-size: 0px;     /* remove blank space from 'inline-block' display */
}
div.main > div  /* left and right divs */
{  
  width: 100%;           /* force both to have as max width as possible */
  min-height: inherit;   /* same min height as parent */
  min-width: inherit;    /* same min width as parent to show content */
  display: inline-block; 
}
div.left
{  
  max-width: 58%;     /* 100% width from max of 58% parent width */
  background-color: lightgreen;
}
div.right
{ 
  max-width: 42%;     /* 100% width from max of 42% parent width */
  text-align: right;  /* put child 'inline-block' divs to the right */
  background-color: dodgerblue;
}
div.right > div.fixed_content
{ 
  width: 300px;        /* set the 300px right div you want */
  min-height: inherit; /* same min  height as parent */
  background: orange; 
  display: inline-block; 
} 
```

由于两个 div（左和右）都将具有 % 宽度，因此两者都将根据当前的最大宽度调整大小，但您将在右 div 内拥有固定宽度的 div。因此，当您的右 div 调整为 300px 宽度（其子 div 的固定值）时，它将低于左 div。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T09:40:28.630

我有同样的问题，我使用 position:absolute 解决了它。

## HTML

```
<div class="container">
  <div id="left_div"></div>
  <div id="right_div"></div>
</div> 
```

## CSS

```
.container {
  position:relative;
}

#left_div {
  float: left;
  width: auto;
  margin-right: 320px;
}

#right_div {
  position:absolute;
  top:0;
  right:0;
  width: 300px;
} 
```

# java - Java if语句比较2个值

> ID：15600830
> 
> 赞同：1
> 
> 时间：2013-03-24T16:13:45.110
> 
> 标签：java, string

我有一个我无法理解的小问题，我正在构建一个 Web 服务器来处理 java EG 中的调用 go to use /SendCommand.html 然后 Java 将处理请求，我有一个使用 post 构建的登录系统，但由于某种原因，我的登录检查不起作用，

```
private boolean checkLogin(String user, String pass){
    for(int i = 0; i < users.users.length; i++ ){
        String test = SHA1.toSHA1(pass);
        if(users.users[i][0] == user && users.users[i][1] == test ){
            return true;
        }
    }
    return false;
} 
```

我正在打破 if 语句以提供以下信息当我调试这个时，我得到，

```
Name            | Type            | Value
users             Users             #163
  users           String[]          #165(length=1)
    [0]           String[]          #167
      [0]         String            "Admin"
      [1]         String            "d033e22ae348aeb5660fc2140aec35850c4da997"
user              String            "Admin"
pass              String            "admin"
test              String            "d033e22ae348aeb5660fc2140aec35850c4da997" 
```

如您所见`users.users[0][0] == user`，`users.users[0][1] == test`为什么它从该方法返回 false？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:15:07.383

不要`==`用来比较字符串。改为使用[`s1.equals(s2)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)。前者比较参考，这几乎总是不是你想要的。另一方面，后者比较字符序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:15:01.773

用于[`.equals()`](https://stackoverflow.com/questions/767372/java-string-equals-versus)比较字符串，而不是`==`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:15:11.570

```
if(users.users[i][0].equals(user) && users.users[i][1].equals(test)) 
```

始终将 String 与 .equals() 进行比较

# c# - 使用 C#.NET 将 ListBox 的 SelectedValue 解析为 int

> ID：15600831
> 
> 赞同：1
> 
> 时间：2013-03-24T16:13:52.160
> 
> 标签：c#, .net, dictionary, casting, listbox

我有一个使用字典作为数据源的列表框。

当我想将列表框的 selectedvalue 解析为 int 变量时，它给了我一个强制转换异常。

字典~

```
Dictionary<int, string> AssetDictionary = new Dictionary<int, string>(); 
```

列表框（lstAsset）数据源~

```
lstAsset.DisplayMember = "Value";
//lstAssetType.ValueMember = "Key";   //This should be lstAsset as corrected in the next line
lstAsset.ValueMember = "Key";
lstAsset.DataSource = new BindingSource(AssetDictionary, null); 
```

发生异常的那一行~

```
int ush = (int)lstAsset.SelectedValue; //Specified cast is not valid. 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:15:16.233

提供价值成员以正确控制。

```
lstAsset.ValueMember = "Key"; 
```

并使用

```
int ush = Convert.ToInt32(lstAsset.SelectedValue.ToString()); 
```

# java - 更新文本文件方法

> ID：15600839
> 
> 赞同：0
> 
> 时间：2013-03-24T16:14:53.110
> 
> 标签：java, swing, jtable

我有一个可以编辑然后保存（更新）到文本文件的 jtable。用户选择一行（包含书籍记录）并请求借阅该书籍，我使用此方法更新，但现在更新时，旧数据没有删除。

```
user_AllBooks uAllBooks = new user_AllBooks();
    @Override
public void actionPerformed(ActionEvent event) {
    if (event.getSource() == borrowButton) {
        borrowInitialize(bTable.getSelectedRow());
}

    public void borrowInitialize(int row) {
    if (uAllBooks.getValueAt(row, 3).equals("Yes")) {
        JOptionPane.showMessageDialog(null, "This Book Was Borrowed");
    } else {
        uAllBooks.setValueAt("Yes", row, 3);
        uAllBooks.fireTableRowsUpdated(row, row);
        uAllBooks.updateFiles(uAllBooks.bData);
    }
}
...
}

public class user_AllBooks extends AbstractTableModel {
...

public void updateFiles(ArrayList<BookInformation> data) {
    PrintWriter Bpw = null;
    try {
        Bpw = new PrintWriter(new FileWriter("AllBookRecords.txt" , true));
        for (BookInformation bookinfo : data) {
            String line = bookinfo.getBookID()
                    + "     " + bookinfo.getBookName()
                    + "     " + bookinfo.getBookDate()
                    + "     " + bookinfo.getBorrowStatus();
            Bpw.println(line);
        }

        Bpw.close();
    } catch (FileNotFoundException e1) {
    } catch (IOException ioe) {
    }
}
...
} 
```

我的 BookInformation 类：

```
public class BookInformation {

private String BookName;
private String BookDate;
private String BookID;
private String BorrowStatus;

public String getBookName() {
    return BookName;
}

public void setBookName(String book_name) {
    this.BookName = book_name;
}

public String getBookDate() {
    return BookDate;
}

public void setBookDate(String book_date) {
    this.BookDate = book_date;
}

public String getBookID() {
    return BookID;
}

public void setBookID(String Book_id) {
    this.BookID = Book_id;
}

@Override
public String toString() {
    return BookID + "     " + BookName + "     "
            + BookDate + "     " + BorrowStatus + "\n";
}

public String getBorrowStatus() {
    return BorrowStatus;
}

public void setBorrowStatus(String borrowStat) {
    BorrowStatus = borrowStat;
}
} 
```

谢谢。 ![在此处输入图像描述](../Images/9c7676f62a379c0820257de6cc782b6d.png) ![在此处输入图像描述](../Images/699ee4f3ef474766e6249c66ea989be5.png) ![在此处输入图像描述](../Images/96ab7d4d908b91775ab1f605920bfe62.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:30:41.297

更改此行

```
Bpw = new PrintWriter(new FileWriter("AllBookRecords.txt" , true)); 
```

至

```
Bpw = new PrintWriter(new FileWriter("AllBookRecords.txt" , false)); 
```

第二个参数（布尔值）改变它是否应该附加文本文件（添加到它的末尾）或只是重写所有内容。

资料来源：[FileWriter 的 Javadoc 构造函数摘要](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)：

```
FileWriter(String fileName, boolean append) 
    Constructs a FileWriter object given a file name with a boolean
    indicating whether or not to append the data written. 
```

# java - 用 Java 编写通用枚举集小部件 - 语法不正确

> ID：15600843
> 
> 赞同：0
> 
> 时间：2013-03-24T16:15:07.243
> 
> 标签：java, android, generics, enumset

我正在尝试编写一个通用小部件，它采用（任何）枚举集并弹出一个简单的表单以允许打开和关闭各个枚举。下面是该类的最小版本（实际上设置为在 android 上运行），但 eclipse 抱怨“AbstractCollection 类型中的方法 add(Capture#-7 of ?) 不适用于 arguments(T)”。

前几行我调用了 remove （具有完全相同的签名），没有任何问题。尝试先将枚举变成一个集合也无济于事。

我需要什么神奇的语法来解决这个问题？

我很可能也没有使用最好的类定义；）我使用的是 Android Developer Tools v21.1.0-569685，但问题也出现在 Eclipse 本身（Indigo）上

```
package com.test.ui;

import java.util.EnumSet;

import android.util.Log;
import android.view.View;
import android.view.LayoutInflater;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.CheckBox;

public class EnumSetSelector<T extends Enum<?>> implements OnClickListener{

  Class<T> enumclass;
  EnumSet<?> theset; // EnumSet<T> theset; fails
  boolean haschanged;

  public EnumSetSelector(Class<T> eclass) {
    enumclass = eclass;
  }

  public ViewGroup prepareSet(EnumSet<?> esvals, ViewGroup vg, LayoutInflater li) {
    theset = esvals;
    T[] allvals = enumclass.getEnumConstants();
    Log.d("XXXXXXZ","here are " + allvals.length);
    ViewGroup grp = (ViewGroup)li.inflate(R.layout.ui_enum_selector,vg,false);
    for (T av:allvals) {
      Log.d("XXXXXXZ"," - " + av);
      CheckBox cb = (CheckBox)li.inflate(R.layout.ui_enum_selector_entry,vg,false);
      cb.setText(String.valueOf(av));
      cb.setChecked(theset.contains(av));
      cb.setTag(av);
      grp.addView(cb);
      esvals.remove(av);
    }
    vg.addView(grp);
    return grp;
  }

  @Override
  public void onClick(View v) {
    final T thisenum = (T)v.getTag();
    final boolean oldval = theset.contains(thisenum);
    final CheckBox cb = (CheckBox)v;
    if (cb.isChecked() != oldval) {
      if (cb.isChecked()) {
        cb.setChecked(false);
        theset.remove(thisenum);
      } else {
        cb.setChecked(true);
        theset.add(thisenum);
        theset.add(EnumSet.of(thisenum));
      }
      Log.d("XXXXXXZ", "" + String.valueOf(v.getTag()) + " now "
        + (theset.contains(thisenum)));
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:55:21.220

呼应 JB Nizet 的评论，您应该将您的课程声明为：

```
EnumSetSelector<T extends Enum<T>> 
```

换句话说，使用[`Enum`](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html)与[`EnumSet`](http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html)声明相同的递归边界。

然后确保输入`theset`and `esvals`as`EnumSet<T>`而不是`EnumSet<?>`.

# android - 构造函数 ArrayAdapter (LayoutNext, int, String[]) 未定义

> ID：15600845
> 
> 赞同：1
> 
> 时间：2013-03-24T16:15:10.447
> 
> 标签：android

我尝试将项目从 android.support.v4.app.Fragment 类实现到 Spinner。我总是得到编译器错误

> 构造函数 ArrayAdapter(LayoutNext, int, String[]) 未定义

我怎样才能解决这个问题？这是代码：

```
 public class LayoutNext extends Fragment 
                            implements OnClickListener,OnItemSelectedListener{

    TimePicker timepicker;
    private Spinner spinner_next;
    public ArrayAdapter<String> adapter;

    public static Fragment newInstance(Context context) {
        LayoutNext f = new LayoutNext();    

        return f;
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        ViewGroup root = (ViewGroup) inflater.inflate(R.layout.layout_next, null);  

        timepicker = (TimePicker) root.findViewById(R.id.timePicker1);
        timepicker.setIs24HourView(true);
        timepicker.setCurrentHour(0);
        timepicker.setCurrentMinute(0);

        String[] items_next = { "Next", "From to"};
        spinner_next = (Spinner) root.findViewById(R.id.sp_next);
        spinner_next.setOnItemSelectedListener(this);

 // Here I get the error
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                this,
                android.R.layout.simple_spinner_item, 
                items_next);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner_next.setAdapter(adapter);

        return root;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T16:16:07.353

与活动不同，片段不是上下文的子类，因此您不能`this`在需要上下文的地方使用。只需使用即可`getActivity()`。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(
        getActivity(),
        android.R.layout.simple_spinner_item, 
        items_next); 
```

# python - 表的 %s 的 Python Mysql 问题

> ID：15600848
> 
> 赞同：1
> 
> 时间：2013-03-24T16:15:28.120
> 
> 标签：python, mysql

**问题**

为什么`%s`转义序列在我的带有 MySQL 包的 Python 脚本中不起作用？

**背景和代码**

我对以下行有疑问：

```
cursor.execute("""INSERT INTO `%s` (Date, Counter_in, Counter_out, Interface_name) VALUES (CURRENT_TIMESTAMP, %s, %s, %s)""", (Equipment, In_Octets, Out_Octets, interface)) 
```

我收到以下错误消息：

```
Traceback (most recent call last):
  File "SNMP_Query.py", line 41, in <module>
    cursor.execute("""INSERT INTO `%s` (Date, Counter_in, Counter_out, Interface_name) VALUES (CURRENT_TIMESTAMP, %s, %s, %s)""", (Equipment, In_Octets, Out_Octets, interface))
  File "/usr/lib/pymodules/python2.6/MySQLdb/cursors.py", line 166, in execute
    self.errorhandler(self, exc, value)
  File "/usr/lib/pymodules/python2.6/MySQLdb/connections.py", line 35, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.ProgrammingError: (1146, "Table 'Sipartech.'itx6-f10-1'' doesn't exist") 
```

我已经仔细检查了这张桌子`itx6-f10-1`，它确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:23:20.873

我在您的插入查询中注意到的一个错误是您编写`Date`的列名没有 ( **`** ) 符号，其中 date 是[MySQL 日期类型：](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)关键字。因此，在您的查询中：-

```
cursor.execute("""INSERT INTO `%s` (Date, Counter_in, 
                                    ^ 
```

应该

```
cursor.execute("""INSERT INTO `%s` (`Date`, `Counter_in`,                    
                                     ^ added (`) 
```

其次，我不明白为什么 MySQL:1146 错误？当数据库文件丢失时会发生这种情况。
正如我所注意到`%s`的那样，您可以从`Equipment`代码中的 Python 变量中找到数据库名称。

但是为什么你会得到：

```
 'Sipartech.'itx6-f10-1''
             ^          ^  extra ' 
```

当然这不能是数据库名称，可能是 mysql error:1146 的原因，你应该得到：

```
 'Sipartech.itx6-f10-1' 
```

检查代码并查询。

此外，如果您对 有疑问`%s`，则可以使用`string.formate()`function 而不是`%s`. 喜欢：

```
 """  
      INSERT INTO {0} ( `Date`, 
                        `Counter_in`, 
                        `Counter_out`, 
                        `Interface_name`) 
       VALUES (CURRENT_TIMESTAMP, {1}, {2}, {3})
       """.formate(Equipment, In_Octets, Out_Octets, interface)) 
```

另外，请记住，如果**不是**`In_Octets, Out_Octets, interface`整数，则将查询字符串中 的每个大括号括起来。**`'``{}`**

# html - 显示引导程序自定义模式

> ID：15600852
> 
> 赞同：0
> 
> 时间：2013-03-24T16:15:43.773
> 
> 标签：html, twitter-bootstrap

**问题描述**

我有两种看法。第一个包含一个链接，单击该链接时应显示第二个视图，这是我的自定义模式。这两个文件都在同一个名为 school 的文件夹中。

**代码**

firstView.html

```
<html>
  <head>Click the link</head> 
  <body>
    <div>
    <a  data-toggle="modal" href="secondView.html" data-target="#secondView" >Additional Details</a>
   </div>
  </body> 
</html> 
```

secondView.html

```
<!-- Modal -->
<div id="secondView" class="modal hide fade" tabindex="-1" role="dialog" aria-    labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel">Modal header</h3>
 </div>
   <div class="modal-body">
      <p>One fine body…&lt;/p>
   </div>
  <div class="modal-footer">
     <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
     <button class="btn btn-primary">Save changes</button>  
  </div> 
```

```
 </div> 
```

**手头的问题**

问题是当我点击我的链接时，它没有显示任何内容。我检查了控制台，它没有显示任何错误。所以，我认为这与我连接这两个视图的方式有关，可能与 href 标签有关。

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:19:00.107

来自[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)：

*如果提供了远程 url，内容将通过 jQuery 的 load 方法加载并注入到 .modal-body 中。*

所以你会做

**firstView.html**

```
<html>
  <head>Click the link</head> 
  <body>
    <div>
    <a data-toggle="modal" href="secondView.html" data-target="#myModal" >Additional Details</a>
   </div>

  <!-- Modal -->
  <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-             labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
      <!-- Here be modal content -->
    </div>
    <div class="modal-footer">
     <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
     <button class="btn btn-primary">Save changes</button>  
    </div>  
  </div>
  </body> 
</html> 
```

**secondView.html**

```
<p>One fine body…&lt;/p> 
```

# php - 如何将 JS/CSS 文件包含到 Slim 框架的模板中？

> ID：15600861
> 
> 赞同：3
> 
> 时间：2013-03-24T16:16:59.497
> 
> 标签：php, frameworks, xampp, slim

我正在使用 Slim 框架开发一个简单的 Web 应用程序。我遇到了一个可能很简单的问题。我想在我的模板中包含静态文件（CSS 和 Javascript）。

我的项目文件夹结构如下：

```
index.php //<=== where all the routing happens.
/flot
      layout.css
      jquery.js
      ....
/templates
      first_template.php 
```

我的 first_template.php 标头包含：

```
<link href="../flot/layout.css" rel="stylesheet" type="text/css">
<script language="javascript" type="text/javascript" src="../flot/jquery.js"></script> 
```

当我调用项目根 url

```
http://localhost/xampp/ProjectX/ 
```

（我正在使用 XAMPP）模板出现了，但是 css 和 javascript 的东西不起作用。Google Chrome 控制台显示：

```
GET http://localhost/xampp/ProjectX/flot/layout.css 404 (Not Found)
GET http://localhost/xampp/ProjectX/flot/jquery.js 404 (Not Found) 
```

有什么建议么？我花了将近一个小时在谷歌上搜索，但 Slim 框架的整体文档仍然很薄:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:45:29.260

我假设您在项目根目录 (index.php) 上显示您的模板，因此您应该`../`从样式表和 JS 相关路径中删除：

```
<link href="flot/layout.css" rel="stylesheet" type="text/css">
<script language="javascript" type="text/javascript" src="flot/jquery.js"></script> 
```

# internationalization - 将两个 .po 翻译文件一旧一新合并替换的最佳方法/工具是什么？

> ID：15600863
> 
> 赞同：0
> 
> 时间：2013-03-24T16:17:15.313
> 
> 标签：internationalization, translation, globalization, po, django-i18n

我想将两个 .po 文件合并在一起并生成新的 .po 文件。我假设许多人会提供不同的翻译，需要合并为一个。

首先，我想用其他 .po 文件中的新翻译替换 .po 文件中的所有旧翻译，并生成新的合并文件以用于批处理或 GUI。怎么做？

其次，我想合并两个 .po 文件，并在 GUI 中手动决定如果发生冲突，哪种翻译是最好的，只需在空翻译上添加所有新翻译。怎么做？

请提供一些解决方案，因为问题微不足道，但我花了很多时间寻找合适的工具，但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:39:55.180

您可以使用翻译工具包[pomerge](http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/pomerge.html)

# php - 从两个表中删除

> ID：15600866
> 
> 赞同：-1
> 
> 时间：2013-03-24T16:17:25.487
> 
> 标签：php, mysql

我正在尝试使用删除按钮从数据库中删除一系列行，但数据被拆分为两个表，并由一个公共字段连接。我创建了以下内容，但删除工作不正常。

```
$watchlist_id = $_GET['id'];

    // Delete Watchlist
    if ($submit == 'Delete Watchlist') {
        require_once("db_connect.php");

        $deleteWatchlist_bad_message = '';

        if ($db_server) {
            $purge_watchlist_query = "DELETE FROM watchlist_films WHERE watchlist_id = '$watchlist_id'";
            mysql_query($purge_watchlist_query) or die("Delete failed. " . mysql_error() . "<br />" . $purge_watchlist_query);
            $delete_watchlist_query = "DELETE FROM watchlists WHERE watchlist_id = '$watchlist_id'";
            mysql_query($delete_watchlist_query) or die("Delete failed. " . mysql_error() . "<br />" . $delete_watchlist_query);
        } else {
            $deleteWatchlist_bad_message = '<div class="alert alert-error">Error: could not connect to the database.</div>';
        }

        require_once("db_close.php");?>
        <script type="text/javascript">
            window.location = "profile.php"
        </script><?php
    } 
```

基本上，我希望它删除 watchlist_films 表 ( `$purge_watchlist_query`) 中监视列表中的所有电影，然后从监视列表表 () 中删除监视列表本身`$delete_watchlist_query`，然后将用户重定向回他们的个人资料页面。

抱歉不够清楚 - 当我说“删除无法正常工作”时，单击删除按钮时实际发生的情况是我被成功重定向回 profile.php，但是我试图删除的监视列表是仍在显示，当我单击它时，它包含的电影也仍然存在。我没有收到任何错误或任何被吐回给我的东西，只是没有删除记录。希望这可以澄清！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:42:04.840

好的，所以我已经找到了问题所在。

基本上，我的原始元素是提交给`watchlist.php`，而不是`watchlist.php?id=$watchlist_id`. 一旦我修改了它，删除就很好了。

# php - 使用 strpos 时使用 2 根或更多针

> ID：15600867
> 
> 赞同：0
> 
> 时间：2013-03-24T16:17:25.893
> 
> 标签：php, strpos

我在标签上运行 strpos`<a>`以查看它是否包含两个 url 之一。

目前我正在使用这个波纹管 - 我将如何设置它来检查 - tumblr.com 或 google.com 是否存在？

```
function find_excluded_url ($url) {

    $find = "tumblr.com"; // OR GOOGLE.COM ....

    $pos = strpos($url, $find);

    if ($pos === false) {
        return false;
    } else {
        return true;
    }
}

// SET URL
   $url = "<a href='http://tumblr.com/my_post' rel='nofollow'>This site</a>";

// CALL FUNC
$run_url = find_excluded_url($url);

if ($run_url == true) {
    echo "URL - " . $url . "<br>";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T16:23:31.963

您不能在 strpos 中使用两根针。但是你可以做的是使用它两次，用一个或：

```
function find_excluded_url ($url) {
  return (strpos($url, "tumblr.com")!==false) || (strpos($url, "google.com")!==false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:22:42.370

对于更复杂的搜索，您可能需要查看正则表达式。这会起作用：

```
$subject = 'blablabgoogle
  balblabtumblrasd
  blaasdgoogleadsad';

$pattern = '@(?:google\.com|tumblr\.com)@i';

$result = preg_match($pattern, $subject, $subpattern, PREG_OFFSET_CAPTURE);

if($result) echo 'Position: ' . $subpattern[0][1]; 
```

其性能（如果性能对您来说是个问题）取决于您有多少搜索查询以及您的干草堆有多大。正则表达式的开销相对较大，但是它们只需要遍历文本一次。如果您使用`strpos`两次，那么长字符串会变得昂贵。如果性能确实是一个问题，您还可以编写自己的 strpos，每个字符都对应一个字符。然而，我怀疑这是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:25:02.390

```
function find_excluded_url ($url, $searchURL) {
    $pos = strpos($url, $searchURL);
    if ($pos === false) {
        return false;
    } else {
        return true;
    }
}

// SET URL
   $url = "<a href='http://tumblr.com/my_post' rel='nofollow'>This site</a>";

// CALL FUNC
$run_url = find_excluded_url($url, 'google.com');
if ($run_url == true)
    echo "URL - " . $url . "<br>";

$run_url = find_excluded_url($url, 'tumblr.com');
if ($run_url == true)
    echo "URL - " . $url . "<br>"; 
```

# java - 使用杰克逊解码和编码一个 json 编码的坐标数组

> ID：15600868
> 
> 赞同：0
> 
> 时间：2013-03-24T16:17:30.630
> 
> 标签：java, json, jackson, geospatial

我在java中构建了一个服务器，它接受一个json编码的坐标数组，表示为一个包含纬度和经度的数组。

所以看起来像这样

```
[["48.72028","21.25768"],["48.71669000000001","21.253410000000002"]] 
```

现在我需要将它解码成一个坐标数组。坐标是 com.vividsolutions.jts.geom.Coordinate。

该数组表示一条折线，该折线转换为多边形。折线有数百个点长。我还需要将 json 编码的多边形发送回客户端

到目前为止，我一直在使用谷歌 gson，但速度很慢。json解码和编码比多边形转换花费更多时间。

经过一番谷歌搜索后，我觉得杰克逊应该是最快的。

但由于我是一名 php 开发人员，其中 json 解码和编码只是一行，这是我第一次编写 java，我不知道如何使用它。

你如何解码 Coordinate[] 数组中的 json，然后将类似的数组再次编码为 json？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:41:53.253

您只需要 Coordinate 类上的 2 个简单注释：

```
@JsonFormat(shape = Shape.ARRAY)
@JsonPropertyOrder({"x", "y"})
public static class Coordinate {
    public double x;
    public double y;

    public Coordinate() {}

    public Coordinate(double x, double y) {
        this.x = x;
        this.y = y;
    }
}

public void test() throws IOException {
    List<Coordinate> p = new ArrayList<Coordinate>();
    p.add(new Coordinate(1, 2));
    p.add(new Coordinate(3, 4));
    ObjectMapper mapper = new ObjectMapper();
    String writeValueAsString = mapper.writeValueAsString(p);
    System.out.println(writeValueAsString);

    CollectionType collectionType = mapper.getTypeFactory().constructCollectionType(ArrayList.class, Coordinate.class);
    List<Coordinate> readValue = mapper.readValue(writeValueAsString, collectionType);
    assertEquals(readValue.size(), 2);
    assertEquals(readValue.get(0).x, 1, 0.0);
    assertEquals(readValue.get(0).y, 2, 0.0);
    assertEquals(readValue.get(1).x, 3, 0.0);
    assertEquals(readValue.get(1).y, 4, 0.0);
} 
```

不涉及中间过程，杰克逊为您完成所有工作。@JsonFormat 注释告诉 Jackson 你期望的是一个数组而不是一个对象，@JsonPropertyOrder 确保属性总是以正确的顺序解码。这还有一个额外的好处，您甚至可以使用相同的格式对数据进行编码！

如果您无权访问 Coordinate 类来添加这些注释，只需使用 Jackson 的混合功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:57:04.030

如果我很好地理解了您的问题，那就是数组数组。我不确定我的方法是否适合您（抱歉，我这里没有测试环境）。但是，它可以正常工作，具有对象数组：

```
ObjectMapper mapper = new ObjectMapper();

  JavaType type = mapper.getTypeFactory().constructCollectionType(ArrayList.class, ArrayList.class) ;

  List<List> results;

  try {
        results = (List<List>)mapper.readValue(jsonData, type);

        Coordinate[] coordinates = new Coordinate[results.size()];

    for (int i = 0; i < list.size(); i++) {
       coordinates[i] = new Coordinate(Double.parseDouble((String)results.get(i).get(0)),Double.parseDouble((String)results.get(i).get(1)));
     }
  } catch (JsonParseException e) {
  } catch (JsonMappingException e) {
  } catch (IOException e) {
  } 
```

我希望这有帮助

# php - 是否可以将图像从我的服务器上的特定目录复制到 Facebook？

> ID：15600871
> 
> 赞同：0
> 
> 时间：2013-03-24T16:17:54.720
> 
> 标签：php, facebook-graph-api

我想知道是否可以创建一个 PHP 脚本来将图像从我的服务器上的文件夹复制到 Facebook。我只设法将一张图片从 php 脚本上传到我想要的相册。我现在想将图像文件复制到所需的相册中。

有没有文献可以指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:16:17.313

是的，您可以发送请求 Facebook API 以上传本地存储的照片。当然是在您的专辑中（之前创建的）。

```
$facebook->setFileUploadSupport(true);
$args = array('message' => 'Photo Caption');
$args['image'] = '@' . realpath($FILE_PATH);

$data = $facebook->api('/me/photos', 'post', $args);
print_r($data); 
```

# file - 为 File::Stat 模拟或存根 mtime

> ID：15600884
> 
> 赞同：1
> 
> 时间：2013-03-24T16:19:11.260
> 
> 标签：file, rspec, mocking, net-http, if-modified-since

我的对象`GET`sa 文件通过 HTTP。

它这样做，使用`If-Modified-Since`标题。如果自标头中的时间以来文件尚未修改，则将返回 Not Modified 响应，并且不应获取和写入文件。像这样：

```
class YouTube
  #...
  def parse
    uri = URI("http://i.ytimg.com/vi/#{@id}/0.jpg")
    req = Net::HTTP::Get.new(uri.request_uri)
    if File.exists? thumbname
      stat = File.stat thumbname
      req['If-Modified-Since'] = stat.mtime.rfc2822
    end

    res = Net::HTTP.start(uri.hostname, uri.port) {|http|
      http.request(req)
    }

    File.open(thumbname, 'wb') do |f|
      f.write res.body
    end if res.is_a?(Net::HTTPSuccess)
  end
  #...
end 
```

我想测试这两种情况（在这两种情况下，磁盘上都存在一个文件）。为此，我需要存根其中的任何`Net::HTTP`内容，或者我需要存根 File.stat 以返回一个`mtime`我确信在线资源将返回一个新的或未修改的自。

我应该存根（甚至模拟）`Net::HTTP`吗？如果是这样，是什么？

或者我应该存根`mtime`返回一个遥远的过去或未来的日期，以强制或禁止未修改的标题？

* * *

编辑：深入研究此事，我了解到*i.ytimg.com*域不支持这些标头。所以我需要通过从 YouTube API 检查 JSON 来解决这个问题。但是，“测试 if-modified-since-headers 时模拟什么以及如何模拟”的问题仍然存在。

以下是我得出的域不支持这一点的结论：

```
$curl -I --header 'If-Modified-Since: Sun, 24 Mar 2013 17:33:29 +0100' -L http://i.ytimg.com/vi/D80QdsFWdcQ/0.jpg
HTTP/1.1 200 OK
Content-Type: image/jpeg
Date: Sun, 24 Mar 2013 16:31:10 GMT
Expires: Sun, 24 Mar 2013 22:31:10 GMT
X-Content-Type-Options: nosniff
Server: sffe
Content-Length: 13343
X-XSS-Protection: 1; mode=block
Cache-Control: public, max-age=21600
Age: 822 
```

那里没有“最后修改”。用另一个调用来说明 exaple.com，它确实支持 if-modified-since 标头。

```
$curl -I --header 'If-Modified-Since: Sun, 24 Mar 2013 17:33:29 +0100' -L example.com
HTTP/1.0 302 Found
Location: http://www.iana.org/domains/example/
Server: BigIP
Connection: Keep-Alive
Content-Length: 0

HTTP/1.1 302 FOUND
Date: Sun, 24 Mar 2013 16:47:47 GMT
Server: Apache/2.2.3 (CentOS)
Location: http://www.iana.org/domains/example
Connection: close
Content-Type: text/html; charset=utf-8

HTTP/1.1 304 NOT MODIFIED
Date: Sun, 24 Mar 2013 16:47:47 GMT
Server: Apache/2.2.3 (CentOS)
Connection: close 
```

# java - 流量控制，实现替换方法列表

> ID：15600886
> 
> 赞同：2
> 
> 时间：2013-03-24T16:19:23.767
> 
> 标签：java, iterator, nullpointerexception

直接来自 [http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html]

```
public static <E> void replace(List<E> list, E val, E newVal) {
    for (ListIterator<E> it = list.listIterator(); it.hasNext(); )
        if (val == null ? it.next() == null : val.equals(it.next()))
            it.set(newVal); } 
```

> 这个例子中唯一的小技巧是 val 和 it.next 之间的相等性测试。您需要对 null 的 val 值进行特殊处理，以防止出现 NullPointerException。

我想知道为什么我们需要对 null 的 val 值进行特殊处理以防止出现 NullPointerException。我可能理解我们必须保护代码以防止 NullPointerException 但是那行代码

```
if (val == null ? it.next() == null : val.equals(it.next())) 
```

与集合迭代无关，而是仅在parameters方法中指定了val参数。

提前感谢您对上述内容的任何澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:24:00.170

该测试封装了两个不同的定位`val`规则`list`：

1.  如果`val`是`null`，则列表元素必须是`null`匹配的（回想一下列表可以包含`null`值）
2.  如果`val`不是`null`，则`val`必须等于（使用`.equals()`）列表元素才能匹配

`NullPointerException`如果您尝试评估`val.equals(list.next())`when `val`is ，则会出现`null`。

该方法可以这样写：

```
public static <E> void replace(List<E> list, E val, E newVal) {
    if (val == null) {
        for (ListIterator<E> it = list.listIterator(); it.hasNext(); )
            if (it.next() == null)
                it.set(newVal);
    } else {
        for (ListIterator<E> it = list.listIterator(); it.hasNext(); )
            if (val.equals(it.next()))
                it.set(newVal);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:24:34.837

您对这里发生的事情的阅读是绝对正确的：他们所说的“特殊情况”与对参数进行空值检查有关，而不是与列表的迭代有关。

实际上，您可以将`if`语句移到循环*之外*以获得更高效但可读性更低的解决方案：

```
if (val != null) {
    for (ListIterator<E> it = list.listIterator(); it.hasNext(); )
        if (val.equals(it.next()))
            it.set(newVal);
} else {
    for (ListIterator<E> it = list.listIterator(); it.hasNext(); )
        if (it.next() == null)
            it.set(newVal);
} 
```

# c# - Awesomium javascript错误：SECURITY_ERR：DOM异常18

> ID：15600890
> 
> 赞同：0
> 
> 时间：2013-03-24T16:19:48.680
> 
> 标签：c#, javascript, awesomium

我正在将这个 javascript 执行到 Awesomium WebControl

```
 function getImage(img) {
                        var canvas = document.createElement(\"canvas\");
                        canvas.width = img.width;
                        canvas.height = img.height;
                        var ctx = canvas.getContext(\"2d\");
                        ctx.drawImage(img, 0,0);
                        try{
                              var imgData=ctx.getImageData(10,10,50,50);
                              alert(imgData);
                        }catch(err){" +
                              alert(err);" +
                        }
                  } 
```

现在这段代码给出了这个警报：

> 错误：SECURITY_ERR：DOM 异常 18

现在这是一个相当常见的 javascript 代码。有人告诉我，如果我可以设置正确的标志，那么它可以被关闭。所以代码应该是这样的：

```
WebCore.Initialize(new WebConfig { AdditionalOptions = new[] { "--allow-file-access-from-files" } }); 
```

这个“--allow-file-access-from-files”标志适用于 Chrome。现在有没有人知道这件事。建议或代码示例将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T13:33:40.980

看起来这些设置已移至**WebSessionProvider**： [http ://answers.awesomium.com/questions/819/disablesameoriginpolicy.html](http://answers.awesomium.com/questions/819/disablesameoriginpolicy.html)

注意：**FileAccessFromFileURL**和**UniversalAccessFromFileURL**

例子：

```
<Window.Resources>
    <controls:WebSessionProvider x:Key="mySession" DataPath=".\Cache">
       <core:WebPreferences 
            FileAccessFromFileURL="True"
            UniversalAccessFromFileURL="True"
            SmoothScrolling="True" 
            DefaultEncoding="iso-8859-7" />
     </controls:WebSessionProvider>
</Window.Resources>

<awe:WebControl Name="webControl"
                    WebSession="{Binding Source={StaticResource mySession}}" 
                    Source="file:///k:/something/index.html"
                    DocumentReady="webControl_DocumentReady"
                    ></awe:WebControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T20:02:51.467

我正在使用版本[1.6.6](http://awesomium.com/downloads/awesomium_v1.6.6_sdk_win.exe)。使用此代码：

```
 WebCoreConfig config = new WebCoreConfig();
        config.DisableSameOriginPolicy = true;
        WebCore.Initialize(config, true); 
```

# java - 在 Linux 上将 jpg 从一个文件夹复制到另一个文件夹

> ID：15600891
> 
> 赞同：0
> 
> 时间：2013-03-24T16:19:50.070
> 
> 标签：java, linux, copy, jpeg

我正在使用来自 apache 的 commonsIO lib 的 Files.copy(sourceFile,destFile)，以便将 jpg 从一个文件夹复制到 Linux 机器上的另一个文件夹。

实际上我正在为文件夹中的所有图片做这件事：

```
File folder = new File(sourcePath);
File[] folderContent = folder.listFiles();      
File tmp = null;
File sourceFile = null;
File destFile = null;

//copy all pics to other folder :
for(int i=0;i<folderContent.length;i++){
    if(folderContent[i].getName().endsWith("jpg")){
        sourceFile = new File(sourcePath);
        destFile = new File(destPath);
        //copy to main dir:
        Files.copy(sourceFile,destFile);
    }
} 
```

但是我在新文件夹中得到的只是空文件（具有正确的名称）。当我用一个文件进行简单测试时，就像这样： **Files.copy(sourceFile,destFile);** 然后文件复制成功。

有人有线索吗 ？？（这是一个 java-Linux 已知问题吗？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:32:28.400

这不是 Linux 问题。

首先，您使用源文件夹作为源文件，而不是文件本身。

此外，您可能使用目标文件夹作为复制目标。

假设 destPath 是目标文件夹：

```
for(File file : folderContent){
    if(file.getName().endsWith("jpg")){  
        Files.copy(file, new File(destPath, file.getName()));
    }
} 
```

# oracle - 如何在 oracle 11g 中使用时间窗口创建调度程序作业

> ID：15600893
> 
> 赞同：2
> 
> 时间：2013-03-24T16:20:01.323
> 
> 标签：oracle, oracle11g, scheduler

如何为存储过程创建调度程序作业，它将每秒运行一次，但仅从周一到周五和 10 到 20 时钟运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:15:20.413

与其每秒重新启动一项工作，不如拥有一个每秒轮询一次相关表的永久后台任务更有意义。使用`DBMS_LOCK.SLEEP(1)`来实现必要的等待。（默认情况下不授予对 DBMS_LOCK 的访问权限，因此您需要 DBA 向您的用户授予执行权限。）

# android - 在 Ubuntu 12.04 - 32 位的 DDMS 中未检测到设备

> ID：15600896
> 
> 赞同：0
> 
> 时间：2013-03-24T16:20:12.620
> 
> 标签：android, adb, android-debug

我正在使用 Ubuntu 12.04 32 位。我有一部运行 GB 2.3.5 的 Micromax Ninja A87 Android 手机。我的问题是手机没有被检测到。当我在 Windows 7 电脑上尝试时，它确实被检测到了。

这是我遵循的所有步骤，但仍然没有运气。

```
$ lsusb
Output: Bus 002 Device 006: ID 1c9e:9e08 OMEGA TECHNOLOGY 
```

我创建了`51-android.rules`文件并将其作为内容：

```
SUBSYSTEM=="usb", ATTR{idVendor}=="1c9e", MODE="0666", GROUP="plugdev"
SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666", GROUP="plugdev" 
```

或者我也尝试了这个链接 - [http://forum.xda-developers.com/showthread.php?t=1475740](http://forum.xda-developers.com/showthread.php?t=1475740)

在 51-android.rules 上完成 chmod a+r

重新启动 udev ，也重新启动了我的电脑。done kill-server & start-server 但是当我做“adb devices”时——它没有检测到我的手机。

这里有一些更多信息： 1）USB调试在手机中启用。2）每当我将手机连接到电脑时，它都会在电脑中显示一个弹出窗口（“usbmodem 大容量存储已连接”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T03:42:46.120

在检查windows中的vendorId和productId时（windows系统总是检测到手机），它显示1c9e：9e18。但如前所述，在 ubuntu 中它显示 1c9e:9e08。所以尝试在ubuntu中切换到相同的vendorId/productId，即1c9e:9e18。因此在 /etc/usb_modeswitch.d/1c9e:9e08 中创建了一条规则，并将以下内容放入文件中。代码：

```
DefaultVendor=0x1c9e
DefaultProduct=0x9e08

TargetVendor=0x1c9e
TargetProduct=0x9e18

SierraMode=1
NoDriverLoading=1 
```

将以下代码添加到文件 /lib/udev/rules.d/40-usb_modeswitch.rules

```
ATTR{idVendor}="1c9e", ATTR{idProduct}="9e08", RUN+="usb_modeswitch '%b/%k'" 
```

一旦完成运行：

```
sudo usb_modeswitch -v 0x1c9e -p 0x9e08 -S -R -W 
```

现在 adb 将识别手机。

如需进一步参考，您可以通过以下链接： http: [//forum.xda-developers.com/showthread.php?t=1968465](http://forum.xda-developers.com/showthread.php?t=1968465)

# php - PHP 浮点数使用的最佳实践

> ID：15600898
> 
> 赞同：6
> 
> 时间：2013-03-24T16:20:17.713
> 
> 标签：php

我已阅读有关在 PHP 中使用浮点类型的[浮点指南。](http://floating-point-gui.de/languages/php/)答案是使用 BC Math 扩展。使用字符串可以将浮点数表示为精确类型并防止浮点数和整数问题。

同时，我在 Github 和这个网站上没有找到任何使用 BC 数学扩展的好例子。什么是强制 PHP 使用字符串的干净方法，如何评估它们？

特别是使用 MySQL DECIMAL 数据类型的 BC 数学扩展的最佳方法是什么？

我使用 PHP 5.4.10 进行的示例测试，正确答案是：0.2999999999996

```
<?php
bcscale(13);

$a = '0.3';
$b = '0.0000000000004';

echo $a-$b; // 0.3
echo '<br />';
echo bcsub($a, $b); // 0.2999999999996
echo '<hr />';

$a = "0.3";
$b = "0.0000000000004";

echo $a-$b; // 0.3
echo '<br />';
echo bcsub($a, $b); // 0.2999999999996
echo '<hr />';

$a = 0.3;
$b = 0.0000000000004;

echo $a-$b; // 0.3
echo '<br />';
echo bcsub($a, $b); // 0.3000000000000
echo '<hr />';

$a = '0.3';
$b = '0.0000000000004' + 0;

echo $a-$b; // 0.3
echo '<br />';
echo bcsub($a, $b); // 0.3000000000000
echo '<hr />';

$a = (string) 0.3;
$b = (string) 0.0000000000004;

echo $a-$b; // 0.3
echo '<br />';
echo bcsub($a, $b); // 0.3000000000000
echo '<hr />';

$a = strval(0.3);
$b = strval(0.0000000000004);

echo $a-$b; // 0.3
echo '<br />';
echo bcsub($a, $b); // 0.3000000000000
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:47:35.860

最好的方法不是使用 BC Math，而是开始使用 GMP。看看[benchmark](http://phpseclib.sourceforge.net/math/intro.html)。GMP 比 BC Math 快 30 倍。

我使用 DECIMAL(12, 0) AND DECIMAL(27,0) 并且 php start 很糟糕 apr。在 10^19 或更大。演示：

```
//PHP Version 5.3.10,  FreeBSD 8.2-RELEASE amd64

$a = pow(10, 18);
var_dump($a, $a > ($a - 1), ($a - 1) > $a, ($a - 1) == $a, ($a - 1) === $a);
// int(1000000000000000000)
// bool(true)
// bool(false)
// bool(false)
// bool(false)

$a = pow(10, 19);
var_dump($a, $a > ($a - 1), ($a - 1) > $a, ($a - 1) == $a, ($a - 1) === $a);

// double(1.0E+19)
// bool(false)
// bool(false)
// bool(true)
// bool(true) 
```

我做了`Decimal`课，[这里是简单的实现](http://pastebin.com/Meysnim8)。稍后您可以使用本机 php 数学运算或 BC 数学或任何您想要的实现相同的接口。是的，函数调用和对象创建会有开销，但我们编写的代码其他开发人员可以阅读，不是吗？

[来自PHP Secure Communications](http://phpseclib.sourceforge.net/math/intro.html)的PS Guys有他们自己的实现 - Math_BigInteger，它涵盖了所有潜在需求，但对我的任务来说太重了。

**更新：**由于 PHP 5.6 GMP 实现了[内部运算符重载](https://wiki.php.net/rfc/operator_overloading_gmp)，因此 gmp 资源可以用作常规数字（大部分）。

# wix - 使用 WiX 安装 .NET Framework 4.0.2

> ID：15600900
> 
> 赞同：2
> 
> 时间：2013-03-24T16:20:33.787
> 
> 标签：wix, windows-installer, bootstrapper

我正在使用 WiX v3.7 在那里我创建了自己的引导程序。现在，我可以在未安装时安装 .NET Framework 4。

```
<util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4FullVersion" />
<util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4x64FullVersion" Win64="yes" />

<PackageGroup Id="Netfx4Full">
  <ExePackage Id="Netfx4Full" Cache="no" Compressed="yes" PerMachine="yes" Permanent="yes" Vital="yes"
              SourceFile="..\..\Lib\DotNetFX40\dotNetFx40_Full_x86_x64.exe"
              DownloadUrl="http://go.microsoft.com/fwlink/?LinkId=164193"
              DetectCondition="Netfx4FullVersion AND (NOT VersionNT64 OR Netfx4x64FullVersion)" />
</PackageGroup> 
```

现在，我的应用程序需要 .NET Framework 4.0.2。如果它不适用于 WiX，我该如何测试和安装它？我可以通过哪种方式进行测试？- 我需要做什么才能安装它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:13:33.767

4.0.2 更新看起来只是另一个可执行文件。在您的 Netfx4Full 之后链接它。您需要为新的 4.0.2 可执行文件提供所有检测和 URL 逻辑

# android - 为 Android 应用程序创建 Web 服务

> ID：15600906
> 
> 赞同：12
> 
> 时间：2013-03-24T16:21:13.360
> 
> 标签：android, xml, web-services

我一直在阅读有关`Web Services`Android 使用的一些信息`SOAP`，`REST`但我从未创建过网络服务，所以我对此有很多疑问。

我正在开发一个 Android 应用程序，用户可以在其中回答一些问题，并为每个用户生成一个 XML 文件并将其保存在设备中。

**这是我的查询：**

> 1.  我想做的是将这些 XML 文件从设备发送到 Web 服务，有时还可以将所有文件检索到任何设备。
>     
>     
> 2.  我需要将这些文件转换为字节还是只发送 XML？
>     
>     
> 3.  这些操作是否可以通过 Web 服务实现，或者您会使用 Java 套接字吗？如果您更喜欢 Web 服务，您会使用什么：REST、SOAP。

我将不胜感激一些指向教程和建议的链接。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T16:51:48.707

使用 SQL Server 管理桌面上的数据并在 Visual Studio 上的 .NET 中创建 Web 服务。

然后连接到应用程序中的**Web 服务**，并使用 Web 服务从数据库中设置/获取数据。您可以使用**XML**或**JSON**在手机和服务器之间传输数据。

不需要为此使用 Java Socket API。

*可能有用的链接：*

**如何在 .NET 中创建 Web 服务（不包括在 Android 中的实现）：** [http ://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx](http://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx)

**如何将您的服务与 Android 连接：**

[http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

[http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html](http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html)

**注意：** 我从未从事过 RESTful 服务。我的工作一直在 SOAP 上，因此它仍然是我的偏好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T16:57:28.840

您对如何构建您的应用程序的最终选择将基于您未包含在问题中的各种因素：您的经验，项目中其他开发人员的经验，等等上。

不过，我会这么说。REST 深入 Android 的核心。如果您决定使用 REST，并且可能使用 JSON 而不是 XML（几乎可以肯定，没有理由使用字节数组），您会发现 Android 的架构支持您。SOAP 之类的，你就靠你自己了。

# c++ - 在类中使用指向结构的指针

> ID：15600912
> 
> 赞同：1
> 
> 时间：2013-03-24T16:22:08.620
> 
> 标签：c++

我正在使用 C++ 中的外部 C 库 (libsvm)。我使用在我的类头文件中插入头文件

```
extern "C"{
#include "svm.h"
} 
```

该库包含一个名为 svm_model 的结构。它还包含一个给定一些输入参数的函数，它为 struct svm_model 分配（malloc）空间并返回指向它的指针。功能是

```
svm_model *svm_train(input_parameters) 
```

在我的代码中（在 C++ 中），我在我的类中创建了一个变量，它是一个 struct svm_model 指针。在我的头文件中，我做

```
class myClass
{
public:
  int do_something();
private:
  struct svm_model *m_data;
} 
```

在“do_something()”中，我通过以下方式成功调用了 svm_train：

```
struct svm_model *test = svm_train(input_parameters); 
```

但是每当我想将结果写入 m_data 时，我都会得到一个 segmentation_fault。这发生在

```
m_data = svm_train(input_parameters); 
```

但如果我这样做也会发生

```
struct svm_model *test = svm_train(input_parameters);
m_data = test; 
```

事实上，我注意到即使我这样做了

```
printf("hello: %p\n", m_data); 
```

它也会崩溃。因此，我怀疑在类中使用指向结构（已在其他地方定义）的指针肯定存在问题，尽管我在任何地方都没有找到任何提示。我尝试在我的类构造函数中将它初始化为 NULL，但没有改变任何东西。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:25:47.533

如果它简单地崩溃

```
 printf ("hello: %p\n", (void*)m_data); 
```

那么问题可能出在其他地方和之前。看起来当您调用该`printf`函数时`this`无效（也许`NULL`？）或者您的内存堆处于非常糟糕的状态。

在 Linux 上，我建议`g++ -Wall -g`使用最近的编译器（GCC 4.8 刚刚发布）进行编译。改进代码直到没有给出警告。然后使用[valgrind](http://valgrind.org/)`gdb`对其进行更多调试。

您可能还想`libsvm`用调试信息和所有警告编译您的（或者简单地，使用该包的调试变体）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:34:59.090

文件 svm.h 已经有

```
extern "C" { 
```

宣言。所以而不是：

```
extern "C"{
#include "svm.h"
} 
```

只需这样做：

```
#include "svm.h" 
```

也没有必要一次又一次地重复结构关键字。所以而不是：

```
struct svm_model *m_data; 
```

做：

```
svm_model *m_data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:39:26.383

好吧，刚刚发现了问题，而且确实在其他地方，而不是报道的。发生的事情是我创建了一个 myClass 的 STL 向量，并且正在访问该向量的第一个元素上的方法，即使我没有明确创建它，即：

```
std::vector<myClass> dummy;
dummy[0].do_something(); 
```

鉴于一切都在正确编译，我认为这部分代码不会出现问题。

感谢你的帮助。

# javascript - iframe 中的视口元标记

> ID：15600914
> 
> 赞同：5
> 
> 时间：2013-03-24T16:22:14.523
> 
> 标签：javascript, css, ipad, iframe, viewport

我有一个带有视口元标记的 html 页面。我正在 iPad 上查看该页面，它以正确的视口显示。如果我打开另一个没有视口标记的页面，其中包含指向我的页面的 iFrame，则视口标记无效。

这是正确的行为吗？有没有办法让视口标签在 iframe 中工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:43:51.817

由于安全问题，iframe 内容不能“泄漏”到父页面上，元标记必须在原始页面代码中。

# android - 导入没有 android manifest 文件的 android 项目

> ID：15600915
> 
> 赞同：0
> 
> 时间：2013-03-24T16:22:15.830
> 
> 标签：android, import

我目前正忙于为我的主要项目设计自定义视图。我浏览了 developer.android.com 提供的自定义视图教程。我下载了相关的可共享项目，因为当源代码在您面前时，它很容易处理和理解应用程序的机制。令我惊讶的是，该项目只包含两个文件夹，src 和 res，并且没有 android-manifest 文件。我尝试了正常的导入方法，从现有代码导入并从现有的 android 代码创建新项目，任何方法都没有运气。这里是[项目的链接。](http://developer.android.com/shareables/training/CustomView.zip)

有人可以向我解释如何让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:24:40.813

> 有人可以向我解释如何让它工作吗？

创建一个空的 Android 项目。从 ZIP 文件中复制`res/`和复制。`src/`修改清单以指向您从 ZIP 文件复制的活动类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:26:44.363

创建一个新的空 android 项目。将所有资源和源文件复制到您的项目文件夹。

[http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)。

转到 AndroidManifest.xml 相应地定义活动和权限。

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="package name"
  android:versionCode="1"
  android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="packagename.MainActivity"//your mainactivity
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
       <activity
        android:name="packagename.SecondActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="packagename.SecondActivity" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

# java - 参数中带有冒号的方法的 Java 方法

> ID：15600917
> 
> 赞同：0
> 
> 时间：2013-03-24T16:22:31.803
> 
> 标签：java

我得到了一个抽象类 Location 的 UML 图。该类有一个变量字符串名称。它有方法 addEmployee(employee : Employee): boolean。

Employee 类与 Location 类相关联。Employee 类具有变量 String name 和 String address 以及方法 getName():String 和 getAddress(): String

我不确定如何制作 addEmployee 方法，我不明白它的参数employee：Employee，冒号是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T16:24:41.107

冒号后面的部分描述了参数或方法的预期类型。因此，在您的示例中，UML 方法

```
addEmployee(employee : Employee): boolean 
```

将转换为 Java 方法

```
boolean addEmployee(Employee employee) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:24:21.313

您可以将冒号解读为 - `the preceding returns a result of the following type`,

So:`getName() : String` 表示 getName() 返回 String 类型的结果

所以最简单的就是`getName()`

它可能看起来像

```
public String getName(){

  /* FILL_IN_CODE_HERE */

} 
```

# ios - 如何通过 ics 仅同步更改的事件？

> ID：15600919
> 
> 赞同：0
> 
> 时间：2013-03-24T16:22:45.057
> 
> 标签：ios, synchronization, icalendar

我一直在尝试将我的 iPhone 与远程服务器同步，并在其中动态生成 ics 文件。我已将其添加为我的 iPhone / iPad 上的订阅日历，但是当我尝试通过基于 If-Modified-Since 标头（我在 http 请求中获得）的 ics 文件仅发送更新的事件时，事件没变就全军覆没。我错过了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:12:11.093

用于通知的 http 标头使用不是 icalendar / imip / itip RFC 的一部分。

icalendar 要求更新的事件保持相同的 uid 但更新`sequence`属性。但是，您需要在日历中保留未更改的事件。

# joomla - joomla 2.5 通过文章 ID 获取 seo 链接

> ID：15600920
> 
> 赞同：2
> 
> 时间：2013-03-24T16:22:45.627
> 
> 标签：joomla, hyperlink, seo, article

假设我有以下文章中的 id (#__content)

3,4,5，我想知道我的模板中这些 ID 的 SEO URL。

伪代码：

```
 $db = JFactory::getDbo();
  $query = $db->getQuery(true);
  $db->setQuery($query);

 $query
        ->select(array('a.seolink'))
        ->from('#__content AS a')
        ->where("a.id = '3'" ); 
```

任何人都知道可以完成这项工作的查询或功能吗？

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:31:06.797

如果你有文章 slug ( `"id:alias"`) 和 category slug ( `"catid:catalias"`)，那么你可以这样做

```
$link = JRoute::_(ContentHelperRoute::getArticleRoute($slug, $catslug)); 
```

从`#__content`你可以得到`id`,`alias`和`catid`，所以你也只需要得到类别别名（因为我认为没有它就行不通，但你可以试试）

Offtopic：任何有兴趣为 Joomla 添加标签同义词的人，[请发表您的意见](https://meta.stackexchange.com/questions/173293/tag-synonyms-for-joomla)

# python - 是否有任何允许解析 .po 文件（消息，包括上下文注释）的 Python 包？

> ID：15600928
> 
> 赞同：3
> 
> 时间：2013-03-24T16:23:23.997
> 
> 标签：python, internationalization, translation, globalization

我需要合并/更新/删除 .po 文件消息并需要一些 Python 包，它允许我完全解析 .po 文件，包括：消息、复数、位置、上下文和注释。

我想做一个简单的工具来检查文件之间的差异。我也可以使用一些已经完成的 GUI，但不确定是否有这样的工具会添加新的翻译或删除未使用的翻译。

我正在搜索一些文章，但没有找到如何去做。请推荐一些完全解析 .po 的 Python 包（可能是其他语言）或工具来完成如此重要的任务以保持良好的翻译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-15T15:59:33.617

polib[包](https://pypi.python.org/pypi/polib)非常好。它解析文件并提供几种访问数据的方法，包括一个迭代器来循环遍历 msgid、msgstr 对以执行您需要的任何操作。这是[快速入门文档](http://polib.readthedocs.org/en/latest/quickstart.html)。

如果 .po 不可用，它还可以解析 .mo，特别处理过时的消息字符串，仅迭代已翻译的字符串，以及其他不错的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:02:46.680

您不需要花哨的工具来读取`.po`文件；它们是纯文本文件，基本上包含消息/翻译对：

```
#: buttons.c:425
msgid "Extra"
msgstr "Thêm"

#: buttons.c:433
msgid "Help"
msgstr "Trợ giúp" 
```

对于比较它们的简单工具，我建议使用`diff -u`.

有一个带有`.mo`扩展名的二进制格式。您可以使用`msgunfmt`gettext-tools 包中的程序将它们转换回纯文本。

从文件中提取 id/translation 对`.po`并不困难：

```
In [1]: po = '''#: buttons.c:425
   ...: msgid "Extra"
   ...: msgstr "Thêm"
   ...: 
   ...: #: buttons.c:433
   ...: msgid "Help"
   ...: msgstr "Trợ giúp"
   ...: 
   ...: '''

In [2]: import re

In [3]: re.findall('^msgid \"(.*)\"', po, re.MULTILINE)
Out[3]: ['Extra', 'Help']

In [4]: re.findall('^msgstr \"(.*)\"', po, re.MULTILINE)
Out[4]: ['Th\xc3\xaam', 'Tr\xe1\xbb\xa3 gi\xc3\xbap']

In [5]: zip(re.findall('^msgid \"(.*)\"[^\"]*', po, re.MULTILINE), re.findall('^msgstr \"(.*)\"[^\"]*', po, re.MULTILINE))
Out[5]: [('Extra', 'Th\xc3\xaam'), ('Help', 'Tr\xe1\xbb\xa3 gi\xc3\xbap')] 
```

我正在使用`^`and`re.MULTILINE`来防止注释掉的消息出现在这里。作为健全性检查，确保包含消息 ID 和消息字符串的列表长度相等。

**编辑：**你有一个关于随机排序和使用的有效观点`diff`。但是您可以使用上面的代码为旧文件和新`.po`文件创建 (message-id, translation) 元组列表。如果您按消息 ID 对这些列表进行排序，您可以使用它[`difflib.unified_diff`](http://docs.python.org/2/library/difflib.html#difflib.unified_diff)来打印差异。

例如：

```
In [1]: import re, itertools, difflib

#I've used cpaste to input two pieces of a .po file, the latter with some changes

In [4]: orig_po
Out[4]: '#: mixedgauge.c:64\nmsgid "Passed"\nmsgstr "\xc4\x90\xe1\xbb\x97"\n\n#: mixedgauge.c:67\nmsgid "Completed"\nmsgstr "Ho\xc3\xa0n to\xc3\xa0n"\n\n#: mixedgauge.c:70\nmsgid "Checked"\nmsgstr "\xc4\x90\xc3\xa3 ki\xe1\xbb\x83m tra"\n\n#: mixedgauge.c:73\nmsgid "Done"\nmsgstr "Ho\xc3\xa0n t\xe1\xba\xa5t"\n\n#: mixedgauge.c:76\nmsgid "Skipped"\nmsgstr "B\xe1\xbb\x8b b\xe1\xbb\x8f qua"\n\n#: mixedgauge.c:79\nmsgid "In Progress"\nmsgstr "\xc4\x90ang ch\xe1\xba\xa1y"\n\n#: mixedgauge.c:85\nmsgid "N/A"\nmsgstr "Kh\xc3\xb4ng c\xc3\xb3"\n\n#: mixedgauge.c:193\nmsgid "Overall Progress"\nmsgstr "To\xc3\xa0n ti\xe1\xba\xbfn h\xc3\xa0nh"\n'

In [5]: changed_po
Out[5]: '#: mixedgauge.c:64\nmsgid "Passed"\nmsgstr "\xc4\x90\xe1\xbb\x97"\n\n#: mixedgauge.c:193\nmsgid "Overall Progres"\nmsgstr "To\xc3\xa0n ti\xe1\xba\xbfn h\xc3\xa0nh"\n\n#: mixedgauge.c:67\nmsgid "Completed"\nmsgstr "Ho\xc3\xa0na to\xc3\xa0n"\n\n#: mixedgauge.c:76\nmsgid "Skipped"\nmsgstr "B\xe1\xbb\x8b b\xe1\xbb\x8f qua"\n\n#: mixedgauge.c:79\nmsgid "In Progress"\nmsgstr "\xc4\x90ang ch\xe1\xba\xa1y"\n\n#: mixedgauge.c:85\nmsgid "N/A"\nmsgstr "Kh\xc3\xb4ng c\xc3\xb3e"\n\n#: mixedgauge.c:70\nmsgid "Checked"\nmsgstr "\xc4\x90\xc3\xa3 ki\xe1\xbb\x83m tra"\n\n#: mixedgauge.c:73\nmsgid "Done"\nmsgstr "Ho\xc3\xa0n t\xe1\xba\xa5t"\n'

# Making a list of tuples

In [6]: orig_list = zip(re.findall('^(msgid \".*\")', orig_po, re.MULTILINE), re.findall('^(msgstr \".*\")', orig_po, re.MULTILINE))

In [7]: changed_list = zip(re.findall('^(msgid \".*\")', changed_po, re.MULTILINE), re.findall('^(msgstr \".*\")', changed_po, re.MULTILINE))

# Sort them by the message-id

In [8]: orig_list.sort(key=lambda t: t[0])

In [9]: changed_list.sort(key=lambda t: t[0])

# Now flatten the list

In [10]: orig_string_list = [i for i in itertools.chain(*orig_list)]

In [11]: changed_string_list = [i for i in itertools.chain(*changed_list)]

In [12]: orig_list[0:3]
Out[12]: [('msgid "Checked"', 'msgstr "\xc4\x90\xc3\xa3 ki\xe1\xbb\x83m tra"'), ('msgid "Completed"', 'msgstr "Ho\xc3\xa0n to\xc3\xa0n"'), ('msgid "Done"', 'msgstr "Ho\xc3\xa0n t\xe1\xba\xa5t"')]

In [13]: orig_string_list[0:6]
Out[13]: ['msgid "Checked"', 'msgstr "\xc4\x90\xc3\xa3 ki\xe1\xbb\x83m tra"', 'msgid "Completed"', 'msgstr "Ho\xc3\xa0n to\xc3\xa0n"', 'msgid "Done"', 'msgstr "Ho\xc3\xa0n t\xe1\xba\xa5t"']

# print the diff

In [14]: for l in difflib.unified_diff(orig_string_list, changed_string_list, fromfile='original', tofile='changed'):
   ....:     print l
   ....:     
--- original

+++ changed

@@ -1,14 +1,14 @@

 msgid "Checked"
 msgstr "Đã kiểm tra"
 msgid "Completed"
-msgstr "Hoàn toàn"
+msgstr "Hoàna toàn"
 msgid "Done"
 msgstr "Hoàn tất"
 msgid "In Progress"
 msgstr "Đang chạy"
 msgid "N/A"
-msgstr "Không có"
-msgid "Overall Progress"
+msgstr "Không cóe"
+msgid "Overall Progres"
 msgstr "Toàn tiến hành"
 msgid "Passed"
 msgstr "Đỗ" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T18:45:26.547

试试[babel](http://babel.edgewall.org/)模块。它包括一个`.po`解析器`babel.messages.catalog`和`babel.messages.pofile`其他东西。

# python - 一个大数的N个连续数字的Python总和

> ID：15600935
> 
> 赞同：0
> 
> 时间：2013-03-24T16:23:51.347
> 
> 标签：python, algorithm, numbers, sum, largenumber

我需要`n`在一个大数范围内获得最大的连续数字总和。

例如，范围可以是`5^150000`，在这个范围内我想找出 50,000 个连续数字的最大和。

我使用两个循环的方法似乎永远不会终止。我将不胜感激任何意见。

编码：

```
count = 0
tempsum = 0
summ = 0                 # variables init
oldlist = ''
newlist = ''
num = str(3**2209) # for example

for digit in num: # go over all the digits in the number
    while count < 12 and len(num) >= 12 : # check in 12-digits blocks while possible
        oldlist += num[count] # update old list with new digit
        tempsum += int(num[count]) # add current digit to sum
        count += 1

    if tempsum > summ: # check if new sum is larger than old one
        summ = tempsum # update sum
        newlist = oldlist # update the sequence list
    oldlist = ''
    count = 0
    tempsum = 0
    num = num[1:] # slice the 'first' digit of the number

print(newlist, summ) # print sequence and desired sum 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:33:52.133

你不需要两个循环。

首先，让我们将所有数字放在一个列表中：

```
>>> a = list(map(int, str(5**150000))) 
```

然后计算前 50000 位数字的总和：

```
>>> maximum = current = sum(a[:50000])
>>> current
225318 
```

现在，让我们遍历列表，从总和中删除最低位，并在每次迭代期间将下一个 50000 位添加到前面：

```
>>> for i in range(0, len(a)-50000):
...     current = current - a[i] + a[i+50000] 
```

检查新的总和是否大于前一个，如果是，则将其设为新的“临时最大值”：

```
...     if current > maximum: maximum = current
... 
```

一旦循环退出，`maximum`包含最大值：

```
>>> maximum
225621 
```

让我们把它全部放到一个函数中，这样就不会出现复制错误：

```
def maxdigitsum(number, digits):
    l = list(map(int, str(number)))
    maximum = current = sum(l[:digits])
    for i in range(0, len(l)-digits):
        current = current - l[i] + l[i+digits]
        if current > maximum: maximum = current
    return maximum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:33:47.400

```
#!/usr/bin/python
def maxSumOfNConsecutiveDigits(number,numberConsecutiveDigits):
    digits = [int(i) for i in str(number)]
    consecutiveSum = sum(digits[:numberConsecutiveDigits])
    largestSum = consecutiveSum
    for i in xrange(numberConsecutiveDigits,len(digits)):
        consecutiveSum += (digits[i]- digits[i - numberConsecutiveDigits])
        largestSum = max(largestSum, consecutiveSum)
    return largestSum
print maxSumOfNConsecutiveDigits(5**150000,50000) 
```

# objective-c - 编码 NSMutableArray

> ID：15600942
> 
> 赞同：1
> 
> 时间：2013-03-24T16:24:26.250
> 
> 标签：objective-c, cocoa, nsmutablearray, nscoding

编辑：好的，我决定将数组保存在 userDefaults 中......应该很容易，对吧？节省：

```
NSUserDefaults *userDefs = [NSUserDefaults standardUserDefaults];
    [userDefs setObject:videoArray forKey:@"dataArray"];
    [userDefs synchronize]; 
```

加载：

```
 NSUserDefaults *userDefs = [NSUserDefaults standardUserDefaults];
    videoArray = [[NSUserDefaults standardUserDefaults] mutableArrayValueForKey:@"dataArray"];

    [tableview reloadData];
    NSLog(@"%@",videoArray); 
```

数组中对象的类：

```
@interface DEVideoModel : NSObject

@property (copy) NSString *name;
@property (copy) NSImage *thumbnail;
@property (copy) NSDictionary *qualities;
@property (readwrite) float videoSize;
@property (readwrite) float progress;
@property (copy) NSString *filePath;
@property (copy) NSDate *datum;

@end

@synthesize name,filePath,videoSize,qualities,thumbnail,datum,progress;
-(id)init {
    self = [super init];
    if(self) {
        qualities = [[NSDictionary alloc]init];
        thumbnail = [[NSImage alloc]init];
    }
    return self;
}

@end 
```

当我加载它时，我的 videoArray 是（null）？！我不明白。顺便说一下，videoArray 是一个 NSMutableArray 而不是 NSArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:43:53.823

在您的代码中，您将 NSData 写入 NSCoder，因此您需要读取 NSData，然后将其转换为 Array。

```
NSURL *appSupportDir = [[NSFileManager defaultManager] URLForDirectory:NSApplicationSupportDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:YES error:&error];
NSString *path = [NSString stringWithFormat:@"%@/DEConvert.dat",[appSupportDir path]];
NSLog(@"%@",appSupportDir);
NSData *data = [NSData dataWithContentsOfFile:path];
NSMutableArray *arr = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

在 NSUserDefault 中存储对象

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:arr];
[[NSUserDefaults standardUserDefaults] setObject:data forKey:@"your key"]; 
```

取消归档同样简单：

```
NSData *NewData = [[NSUserDefaults standardUserDefaults] objectForKey:@"your key"];
NSArray *arr = [NSKeyedUnarchiver unarchiveObjectWithData:NewData]; 
```

# regex - 如何获取包含汉字的行数？

> ID：15600945
> 
> 赞同：0
> 
> 时间：2013-03-24T16:24:39.130
> 
> 标签：regex, bash, unicode, grep, cjk

我有一个非常大的纯文本文件，包含各种语言，例如英语、日语、中文……我想获取包含汉字的行数。

我认为这可以使用 grep 和 wc -l 来完成，但是我该如何实际完成这项工作呢？

```
cat filename | grep -P "[\x{4e00}-\x{9fcc}]" | wc -l 
```

此命令不起作用，并显示以下错误消息：

.grep: \x{...} 序列中的字符值太大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:40:33.443

如果不介意使用 Python，可以借助`unicodedata`模块观察文件中使用了哪些字符。使用 nāgarī 输入和 Python 3 的示例：

```
>>> import unicodedata
>>> word = "ब्र॑ह्मन्"
>>> len(word)
9
>>> for char in word:
...     unicodedata.name(char)
... 
'DEVANAGARI LETTER BA'
'DEVANAGARI SIGN VIRAMA'
'DEVANAGARI LETTER RA'
'DEVANAGARI STRESS SIGN UDATTA'
'DEVANAGARI LETTER HA'
'DEVANAGARI SIGN VIRAMA'
'DEVANAGARI LETTER MA'
'DEVANAGARI LETTER NA'
'DEVANAGARI SIGN VIRAMA' 
```

当然，您首先需要查找每个脚本中使用的字形的 unicode 名称。可以在[此处](http://www.unicode.org/Public/UNIDATA/UnicodeData.txt)找到 unicode 字符表。每种语言的一些特定表格在同一网站上提供。

一旦你定义了你想要捕捉的字符范围，剩下的就很简单了：

```
all_chars = ['ब', '्', 'र', '॑', 'ह', '्','म', 'न', '्']

i = 0
with open('thefile') as f:
    for line in f.readline():
        i += 1
        for char in all_chars:
            if char in line:
                print("char %s found in line %s" % (char, i))
                continue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:42:00.473

由于您指定了该`-P`选项，因此您可能正在使用 GNU grep。错误消息似乎来自与 Perl 兼容的正则表达式库 PCRE。所以~~要么你的 PCRE 版本不够兼容 Perl，要么~~GNU grep 不使用 PCRE 的 Unicode 特性。

我只是尝试直接运行 Perl：

```
perl -ne 'print if /[\x{4e00}-\x{9fcc}]/' filename | wc -l 
```

**编辑：**我今天可以在 Linux 系统上对此进行测试，我发现它可能是由[grep 中的这个错误](http://savannah.gnu.org/patch/?3934)引起的（PCRE_UTF8 未针对 UTF-8 语言环境设置），该错误已在[此提交](http://git.savannah.gnu.org/gitweb/?p=grep.git;a=commitdiff;h=67436786c110bbb565f0c1b96f1ca1d4586e1c8d;hp=c1996dd3c98a81cf700ba11e1521ca3d964aeabe)中修复。目前还没有正式版本的修复，但它应该包含在下一个版本（2.15）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-13T22:09:00.733

> 我有一个非常大的纯文本文件，包含各种语言，例如英语、日语、中文……我想获取包含汉字的行数。
> 
> 我认为这可以使用 grep 和 wc -l 来完成，但是我该如何实际完成这项工作呢？
> 
> ```
> cat filename | grep -P "[\x{4e00}-\x{9fcc}]" | wc -l 
> ```
> 
> 该命令不起作用。

Grep 本身不支持 Unicode 字符范围。只需使用完全支持 Unicode 和 UTF-8/16/32 编码输入的 grep 变体，例如[ugrep](https://github.com/Genivia/ugrep)：

```
cat filename | ugrep "[\x{4e00}-\x{9fcc}]" | wc -l 
```

# javascript - 这是什么类型的滑块？

> ID：15600953
> 
> 赞同：-3
> 
> 时间：2013-03-24T16:25:03.787
> 
> 标签：javascript, jquery, html, slider

简单的问题，这是什么类型的滑块：[http ://www.templatemonster.com/demo/41373.html](http://www.templatemonster.com/demo/41373.htm)

是否有任何模仿相同效果的 jQuery 插件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:34:53.757

谷歌搜索“CSS 菜单”我[用 Jquery 找到了这个图像菜单](http://www.alohatechsupport.net/examples/image-menu-2.html)，[这里是教程](http://www.alohatechsupport.net/webdesignmaui/maui-web-site-design/create_image_menu_with_jquery.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:35:58.657

这是一个手风琴水平滑块。如果你谷歌它，你会发现很多。这是一些看起来像您的 Flash 模板中的随机结果：[http ://www.scriptocean.com/accordion.html](http://www.scriptocean.com/accordion.html)

# java - 如何使用 Apache Commons FTPClient 进行远程目录列表？

> ID：15600954
> 
> 赞同：1
> 
> 时间：2013-03-24T16:25:04.743
> 
> 标签：java, ftp, ftp-client, apache-commons-net, suse

我正在使用方法 listFiles(dirname) 在该实例上创建一个 FTPClient & 实例。

```
FTPClient ftpClient = new FTPClient();
ftpClient.connect("my-server-ip-address");
ftpClient.setConnectTimeout(20000);
ftpClient.enterLocalPassiveMode();
ftpClient.login("myUser", "myPswd");
ftpClient.setKeepAlive(true);
final FTPFile[] listedFiles = ftpClient.listFiles(dirname); 
```

此 listFile() 操作引发异常“java.io.IOException：无法确定系统类型 - 响应：500 SYST 未实现”

但是，当我在使用 FTPClientConfig 调用 ftpClient 对象上的连接之前将 SYST 类型设置为 UNIX 时，如下所示

```
FTPClientConfig conf = new FTPClientConfig(FTPClientConfig.SYST_UNIX);
ftpClient.configure(conf); 
```

然后抛出 SocketTimeoutException

```
java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method) [rt.jar:1.7.0_10]
at java.net.SocketInputStream.read(SocketInputStream.java:150) [rt.jar:1.7.0_10] 
```

FTP 服务器在 SUSE Linux Enterprise Server 10 (x86_64) 上运行。

是否需要进行更多配置才能成功列出 FTP 服务器中的文件。

我在这里先向您的帮助表示感谢。

# java - java面板布局dock

> ID：15600956
> 
> 赞同：1
> 
> 时间：2013-03-24T16:25:16.990
> 
> 标签：java, swing, layout, gridbaglayout, dock

我在 java 面板中的“dock”有问题。我有类似的用户界面

![在此处输入图像描述](../Images/785e585063857953b47d5d565bb9f2a9.png)

该面板有一个滑动条、一个按钮和一个滚动视图，即上面的 while 区域，带有 GirdBagLayout，（我也尝试过 BorderLayout，但也不起作用）。它下面是另一个面板，两个面板都放置在带有 GridBagLayout 的父面板中。

当我单击“更多”按钮时，我想将面板的高度扩展到 3*原始高度，以让滚动视图垂直显示更多内容。当然，我希望滑动条和按钮仍在面板底部。我在面板上调用 resize 但我得到了这个：

![在此处输入图像描述](../Images/18d2e9fcd79f16b84903ed1b64c17445.png)

它显示滚动视图比以前长但被剪切，并且栏和按钮保持在同一位置。我的问题是如何将滑动条和按钮始终放在面板底部并正确显示滚动视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:42:56.850

好吧，回答我自己的问题：

必须再次设置布局并调用 revalidate() 和 repaint()。

# javascript - 变换对象数组

> ID：15600958
> 
> 赞同：1
> 
> 时间：2013-03-24T16:25:41.220
> 
> 标签：javascript

我有一个结构为：

```
[ 
  {"vid":"aaa", "san":12}, 
  {"vid":"aaa", "san":18}, 
  {"vid":"aaa", "san":2}, 
  {"vid":"bbb", "san":33}, 
  {"vid":"bbb", "san":44}, 
  {"vid":"aaa", "san":100}
] 
```

该对象被传递给称为`SerializeData(inData)`变量`inData`的函数：

```
function SerializeResults( inData ) {
    $.each( inData, function( i, val ) { ... })
} 
```

我想迭代所有对象`inData`并对其进行转换，因此结果将是这样的：

```
[ 
  { "vid":"aaa","san":[12,18,2,100] }, 
  { "vid":"bbb","san":[33,44] } 
] 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:41:30.397

你去：http: [//jsfiddle.net/hezgb/](http://jsfiddle.net/hezgb/)

```
 var data = [ {"vid":"aaa", "san":12}, {"vid":"aaa", "san":18}, {"vid":"aaa", "san":2}, {"vid":"bbb", "san":33}, {"vid":"bbb", "san":44}, {"vid":"aaa", "san":100}];

function SerializeResults( inData ) {

    var map = {};
    $.each( inData, function( i, val ) {
         if(!map[val.vid]){
             var o = {};
             o.san = [];
             map[val.vid] = o;
         }
        else{
            var o = map[val.vid];
        }

        o.san.push(val.san);
    });
    var main = [];
    $.each( map, function( key, val ) {
        main.push({vid:key,san:val.san});  
    });

    return main;
}

console.log(SerializeResults(data)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:49:49.797

这对你有什么作用？

[http://jsfiddle.net/T7bZd/4/](http://jsfiddle.net/T7bZd/4/)

```
 $.each( inData, function( i, val ) 
{
   if(typeof out[val.vid]==="undefined")
       out[val.vid] = new Array();
   out[val.vid].push(val.san);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:47:39.477

尝试这个。

```
function SerializeResults( inData ) {
    var a = {};

    $.each(inData, function( i, val ) {
        var id = val['vid'];

        if (a[id]) {
            a[id]['san'].push(val['san']);
        } else {
            a[id] = {vid:id, san:[val['san']]};
        }
    });

    var aa = [];

    $.each(a, function(i, val) {
        aa.push(val);
    });

    return aa;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T16:56:11.850

我正在添加另一个答案作为对您询问“我该怎么做？”的惩罚形式。;-)

```
var _ = require('underscore')
var json = '[ {"vid":"aaa", "san":12}, {"vid":"aaa", "san":18}, {"vid":"aaa", "san":2}, {"vid":"bbb", "san":33}, {"vid":"bbb", "san":44}, {"vid":"aaa", "san":100}]'

var grouped = _.groupBy(JSON.parse(json), function(z) {
  return z.vid
})

var result = _.pairs(grouped).map(function(item) {
  return { vid: item[0], san: _.pluck(item[1], 'san') }
}) 
```

# objective-c - 从控制器更新视图（目标 c）

> ID：15600962
> 
> 赞同：0
> 
> 时间：2013-03-24T16:25:56.550
> 
> 标签：objective-c, uiview, uiviewcontroller, uistoryboard

我有这样的情况：

![两个视图控制器和一个视图](../Images/e1ba77f22bed4f69289784a3f1b9522b.png)

如果我单击左脚按钮，我希望我在第二个控制器中的视图显示左脚图像，如果我单击右键，视图应该显示右脚图像。

在第一个控制器中，我写了这个来选择右或左：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    RSViewController *vc = [segue destinationViewController];

    if ([[segue identifier] isEqualToString:@"Left-Foot"])
        [vc setLeft:YES];
    else
        [vc setLeft:NO];
} 
```

在第二个控制器中，我有一个设置布尔值的方法

```
- (void)setLeft:(BOOL)left
{
    if (left) {
        _left = left;
        NSLog(@"LEFT UPDATED IN RSVIEWCONTROLLER");
    }else {
        _left = left;
        NSLog(@"RIGHT UPDATED IN RSVIEWCONTROLLER");
    }
} 
```

在同一个控制器中，我使用我的一个 init 在 vi​​ewdidload 中创建视图：

```
- (void)viewDidLoad
{
    NSLog(@"meeeea");
    [super viewDidLoad];
    CGRect rect = CGRectMake(0, 0, 100, 100);
    self.animatedCircleView = [[RSAnimatedCircleView alloc] initWithFrameFoot:rect foot:YES];
    NSLog(@"Viewdidnoload");
} 
```

在我看来（图中的蓝色小矩形）：

```
- (void)setup:(BOOL)left
{
 self.leftFoot = left;
}

- (void)setLeftFoot:(BOOL)leftFoot
{
    _leftFoot = leftFoot;
}

- (void)awakeFromNib
{
    [self setup:_leftFoot];
}

- (id)initWithFrameFoot:(CGRect)frame foot:(BOOL)left
{
    self = [super initWithFrame:frame];
    [self setup:left];
    self.leftFoot = left;

    if (self.leftFoot)
        NSLog(@"Left == TRUE");

    return self;

}

- (RSFootView *)footView
{
    CGRect rect = CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height);
    if (self.leftFoot) {
        NSLog(@"Now left is yes");

    }else {
        NSLog(@"left is no");
    }

    _footView = [[RSFootView alloc] initWithFrame:rect withLeftFoot:self.leftFoot];
    [_footView setBackgroundColor:[UIColor clearColor]];

    return _footView;
}

- (void)drawRect:(CGRect)rect
{
    if (self.leftFoot)
        NSLog(@"left ada");
    else
        NSLog(@"right masd");

    CGFloat x = self.bounds.size.height;
    CGFloat y = self.bounds.size.width;
    CGFloat radius = x/2 - 15;
    CGPoint center = CGPointMake(x/2, y/2);
    CGFloat startAngle = DEGREES_TO_RADIANS(START_ANGLE);
    CGFloat endAngle = DEGREES_TO_RADIANS(END_ANGLE);

    // Drawing the sector
    UIBezierPath *sector = [UIBezierPath bezierPathWithArcCenter:center
                                                          radius:radius
                                                      startAngle:startAngle
                                                        endAngle:endAngle
                                                       clockwise:YES];

    sector.lineWidth = 4;

    [[UIColor grayColor] setStroke];
    [sector stroke];
    [self setBackgroundColor:[UIColor clearColor]];
    [sector addClip];

    [self addSubview:self.footView];

} 
```

在“drawRect”方法中，左脚的值总是假的。我不知道为什么会这样......有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:24:36.880

在下一行中，您每次都将视图设置为“左”。

```
 self.animatedCircleView = [[RSAnimatedCircleView alloc] 
          initWithFrameFoot:rect foot:YES]; 
```

这是一个典型的错误，当您没有为变量和方法提供易于理解和直观的名称时，这种错误很可能会发生。如果您不改正，预计此类错误会经常发生。

我会给你的观点一个枚举属性，明确说明它是什么脚：

```
typedef enum {LeftFoot, RightFoot} FootType; 
@property (strong, nonatomic) FootType footType; 
```

此外，您应该修改您的方法名称。我将完全取消该`initWithFrameFoot`方法，只需在您的覆盖中设置一个默认脚`initWithFrame`。（将其保留为 0 相当于`LeftFoot`。）`@synthesize`您也不需要 setter 或 getter。删除它们。

如果您想要一个专用的初始化程序，请确保传递的变量实际上前面是正确的单词。

```
-(id) initWithFrame:(CGRect)rect andFootType:(FootType)footType {
    self = [super initWithFrame:rect]; 
    if (self) {
         _footType = footType;  
    }
    return self;
} 
```

使用后`@synthesize`您可以将正确的脚放入`prepareForSegue:`

```
footViewController.footType = rightFoot; 
```

# c++ - c++ 为什么会出现这个错误“basic_string::substr”并打破循环

> ID：15600964
> 
> 赞同：2
> 
> 时间：2013-03-24T16:25:59.237
> 
> 标签：c++, function, vector, substr

我正在尝试获取单词的最后一个字母，以比较这些字母行是否在向量中。所以我想先检查最后 2 个，然后是最后 3 个和最后 4 个字母。一旦它找到一个，它就应该分解，并返回 false。否则它应该检查剩下的所有东西，并在没有任何证据的情况下返回，真的。

这是我的功能：

```
bool isIt(wstring word, vector <wstring> vec) {

int ct = 2;
while (ct < 5) {
    word = word.substr(word.length() - ct, word.length()-1);
    //wcout << word << endl;
    if (find(vec.begin(), vec.end(), word) != vec.end()) {
        //wcout << "false" << endl;
        ct = 5; return false;

    } else {ct++; wcout << ct << endl; continue; }
}  return true;} 
```

该函数通过以下方式调用：

```
if( word >3){ isIt(word, vec); } 
```

当第一次检查失败时，我收到此错误消息：

> 在抛出 'std::out_of_range' what(): basic_string::substr 的实例后调用终止

我不明白，为什么它不继续，一旦它在其他部分。我希望我的描述足够好。BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:47:21.177

错误在这里，您可以在其中修改`word`.

```
 word = word.substr(word.length() - ct, word.length()-1); 
```

如果`word`正在`"ABCD"`进入此函数，则第一次通过循环计算为：

```
 word = std::string("ABCD").substr( 2, 3 ); 
```

第二次通过你的循环它评估为：

```
 word = std::string("CD").substr( size_t(-1), 1 ); 
```

# c++ - 如何在 Windows C++ 中关闭麦克风

> ID：15600967
> 
> 赞同：-2
> 
> 时间：2013-03-24T16:26:16.977
> 
> 标签：c++, windows, visual-studio, winapi

我想制作关闭麦克风的代码（它会产生白噪声），我如何通过 vc++（不是 .NET）来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:36:39.090

您可以使用以下代码段，它应该适合您...

```
void setVolume(DWORD volume) {
HMIXER mixer;

if (mixerOpen(&mixer, 0, 0, 0, 0) != MMSYSERR_NOERROR) {
    MessageBoxW(NULL, L"Error: mixerOpen()", NULL, MB_ICONHAND);
    return;
}

// Get the line info
MIXERCAPS mixcaps;
MIXERLINE mixerLine;
mixerGetDevCaps(0, &mixcaps, sizeof(MIXERCAPS));
mixerLine.cbStruct = sizeof(MIXERLINE);
mixerLine.dwComponentType = MIXERLINE_COMPONENTTYPE_DST_WAVEIN;
mixerLine.dwSource = 0;
mixerLine.dwDestination = 0;

if (mixerGetLineInfo(reinterpret_cast<HMIXEROBJ>(mixer), &mixerLine, MIXER_GETLINEINFOF_SOURCE)
    != MMSYSERR_NOERROR) {
        MessageBoxW(NULL, L"Error: mixerGetLineInfo()", NULL, MB_ICONHAND);
        return;
}

// Get control for mixerline
MIXERCONTROL mixerCtrl;
MIXERLINECONTROLS mixerLineCtrl;

mixerLineCtrl.cbStruct = sizeof(MIXERLINECONTROLS);
mixerLineCtrl.dwLineID = mixerLine.dwLineID;
mixerLineCtrl.dwControlType = MIXERCONTROL_CONTROLTYPE_VOLUME;
mixerLineCtrl.cControls = 1;
mixerLineCtrl.pamxctrl = &mixerCtrl;
mixerLineCtrl.cbmxctrl = sizeof(MIXERCONTROL);
mixerLineCtrl.cControls = 5;

if (mixerGetLineControls(reinterpret_cast<HMIXEROBJ>(mixer), &mixerLineCtrl, MIXER_GETLINECONTROLSF_ONEBYTYPE)
    != MMSYSERR_NOERROR) {
        MessageBoxW(NULL, L"Error: mixerGetLineControls()", NULL, MB_ICONHAND);
        return;
}

// Volume..
MIXERCONTROLDETAILS mixerCtrlDetails;
MIXERCONTROLDETAILS_UNSIGNED mixerCtrlDetailsUnsigned;

mixerCtrlDetailsUnsigned.dwValue = volume;
mixerCtrlDetails.dwControlID = mixerCtrl.dwControlID;
mixerCtrlDetails.cbStruct = sizeof(MIXERCONTROLDETAILS);
mixerCtrlDetails.cMultipleItems = 0;
mixerCtrlDetails.paDetails = &mixerCtrlDetailsUnsigned;
mixerCtrlDetails.cbDetails = sizeof(MIXERCONTROLDETAILS_UNSIGNED);
mixerCtrlDetails.cChannels = 1;

if (mixerSetControlDetails(reinterpret_cast<HMIXEROBJ>(mixer), &mixerCtrlDetails, MIXER_OBJECTF_HMIXER | MIXER_GETCONTROLDETAILSF_VALUE)
    != MMSYSERR_NOERROR) {
        MessageBoxW(NULL, L"Error: mixerSetControlDetails()", NULL, MB_ICONHAND);
        return;
}

mixerClose(mixer);
} 
```

在 vista 和 7 中，API 发生了变化，请查看[http://blogs.msdn.com/b/larryosterman/archive/2007/03/06/how-do-i-change-the-master-volume-in -windows-vista.aspx](http://blogs.msdn.com/b/larryosterman/archive/2007/03/06/how-do-i-change-the-master-volume-in-windows-vista.aspx)

# ruby-on-rails - Rails 2.2.2 到 Rails 3 - 可排序

> ID：15600968
> 
> 赞同：0
> 
> 时间：2013-03-24T16:26:21.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在将一个旧的 Rails 2.2.2 项目迁移到 Rails 3，并且我一直在修复一些问题 - 最新的如下。

```
undefined method `sortable' 
```

显然 Rails 2.2.2 有一个名为“可排序”的方法或关键字？那是 Rails 2.2.2 框架的一部分吗？

Rails 3 中是否存在相同的功能？

如何将其更改为在 Rails 3 中工作？

谢谢

```
<tr>
            <th style="padding-left:20px;"><%= sortable "name", "Name" %></th>
            <th><%= sortable "company", "Company" %></th>
            <th>Email</th>
            <th><%= sortable "created_at", "Created On" %></th>
        </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:49:04.477

我认为您正在使用handles_sortable_columns gem，[这里是](https://github.com/dadooda/handles_sortable_columns)如何为Rails 3 设置这个gem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:32:08.117

我认为，这个来自 Ryan Bates 的视频课程[http://railscasts.com/episodes/228-sortable-table-columns](http://railscasts.com/episodes/228-sortable-table-columns)可以为您提供帮助。

# ios - IOS 应用程序不使用 Flash CS6 发布 - 卡在 00:05

> ID：15600974
> 
> 赞同：1
> 
> 时间：2013-03-24T16:26:42.390
> 
> 标签：ios, actionscript-3, air, flash-cs6

我正在尝试发布一个没有代码的正方形。我已经安装了 flash pro CS6 的更新，我正在使用 AIR for IOS 3.4

每次我尝试发布它都会卡在 00:05

我有时也会收到一条错误消息，“请确保设备上有足够的空间”

这是一个全新的ipad...

我还在配置文件中注册了 ipad。

# xcode - UIButton setHidden 现在不起作用？

> ID：15600976
> 
> 赞同：0
> 
> 时间：2013-03-24T16:27:00.047
> 
> 标签：xcode, ios6, uibutton

我在一个方法中设置了 10 个左右的按钮，如下所示：

```
@implementation MyViewController
UIButton *originalButton;

etc...

- (void)setupButtons
{
    originalButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [originalButton addTarget:self action:@selector(originalButtonWasPressed:) forControlEvents:UIControlEventTouchUpInside];
    originalButton.frame = CGRectMake(20.0, 30.0, 100.0, 39.0);
    UIImage *buttonImage = [[UIImage imageNamed:@"originalreg.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(18, 18, 18, 18)];
    UIImage *buttonImageHighlight = [[UIImage imageNamed:@"originalregblue.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(18, 18, 18, 18)];
    [originalButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [originalButton setBackgroundImage:buttonImageHighlight forState:UIControlStateHighlighted];
    [self.view addSubview:originalButton];

    etc…
} 
```

为了提高效率，我决定将通用代码提取到另一种方法中：

```
- (void)setupButton:(UIButton *)myButton withSelector:(SEL)selector withX:(CGFloat)x withY:(CGFloat)y withRegImage:(NSString *)regImage withHighlightImage:(NSString *)highlightImage
{
    myButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [myButton addTarget:self action:selector forControlEvents:UIControlEventTouchUpInside];
    myButton.frame = CGRectMake(x, y, 100.0, 39.0);
    UIImage *buttonImage = [[UIImage imageNamed:regImage] resizableImageWithCapInsets:UIEdgeInsetsMake(18, 18, 18, 18)];
    UIImage *buttonImageHighlight = [[UIImage imageNamed:highlightImage] resizableImageWithCapInsets:UIEdgeInsetsMake(18, 18, 18, 18)];
    [myButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [myButton setBackgroundImage:buttonImageHighlight forState:UIControlStateHighlighted];
    [self.view addSubview:myButton];
} 
```

…并这样称呼它：

```
- (void)setupButtons
{
    [self setupButton:originalButton withSelector:@selector(originalButtonWasPressed:) withX:20.0 withY:30.0 withRegImage:@"originalreg.png" withHighlightImage:@"originalregblue.png"];

    etc...
} 
```

**这**一切都有效，除了我的一个按钮用于隐藏所有其他按钮。在原始设置中，按下“隐藏按钮”按钮会导致其他按钮被隐藏。现在，它们仍然在屏幕上。这是代码：

```
[self setupButton:hideButtonsButton withSelector:@selector(hideButtonsButtonWasPressed:) withX:20.0 withY:530.0 withRegImage:@"hidebuttonsreg.png" withHighlightImage:@"hidebuttonsregblue.png"];

- (void)hideButtonsButtonWasPressed:(id)sender
{
    // hide the buttons
    originalButton.hidden = YES;
    originalButton.enabled = NO;

    etc…
} 
```

我已经确认正在调用此方法并且`setHidden/setEnabled`正在执行调用。

任何指点都感激不尽！托尼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:35:45.093

这是因为您的方法一直使用单个实例。查看初始化的第一行

```
myButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

将此行替换为

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

每次都会返回新的按钮实例。

您已经声明了如下所示的按钮实例，对。

```
IBOutlet UIButton *btn1, *btn2, *btn3; 
```

现在像以前一样使用您的方法创建一个新按钮，只需将该按钮分配给受尊重的按钮对象

```
btn1 = [self setupButton:originalButton withSelector:@selector(originalButtonWasPressed:) withX:20.0 withY:30.0 withRegImage:@"originalreg.png" withHighlightImage:@"originalregblue.png"];

btn2 = [self setupButton:originalButton withSelector:@selector(duplicateButtonWasPressed:) withX:20.0 withY:30.0 withRegImage:@"duplicatereg.png" withHighlightImage:@"originalregblue.png"];

btn3 = [self setupButton:originalButton withSelector:@selector(olderButtonWasPressed:) withX:20.0 withY:30.0 withRegImage:@"olderreg.png" withHighlightImage:@"originalregblue.png"]; 
```

# android - 如何在 SQLite 中获取最后插入的行 guid？

> ID：15600979
> 
> 赞同：0
> 
> 时间：2013-03-24T16:27:05.990
> 
> 标签：android, sqlite, insert

对于我的 SQLite 数据库表，我使用 guid character varying(100) 作为主键。我找到了在插入操作后返回 rowID 的方法。但我没有使用 _id 字段，只使用 guid。在这种情况下，插入将返回什么以及我将如何获得最后插入的 guid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:34:33.230

即使您在表中定义了另一种类型的主键，SQLiteDatabase也会[`insert()`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)返回。`integer primary key`只需使用结果`insert()`来获取您的`guid`：

```
SELECT guid FROM Foo WHERE rowid = x; 
```

# jakarta-ee - el-api-1.0.jar - 未加载 jar - 违规类：javax/el/Expression.class

> ID：15600981
> 
> 赞同：4
> 
> 时间：2013-03-24T16:27:23.497
> 
> 标签：jakarta-ee, maven, tomcat7, resteasy

我正在尝试使用 RestEasy 运行一个简单的宁静服务。以下是我的设置。

Tomcat7 Eclipse & Maven I Maven 安装并复制 war 文件到 webapps 文件夹。

部署 war 文件时，catalina.out 文件会显示这一点，并且未部署应用程序。

```
 Mar 24, 2013 9:44:38 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/usr/share/tomcat7/webapps/buzzcore-1.0/WEB-INF/lib/el-api-1.0.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/el/Expression.class
Mar 24, 2013 9:44:40 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/buzzcore-1.0]] 
```

我不确定是什么导致了问题。以下是我的 pom.xml 和 web.xml。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>buzzcore</groupId>
    <artifactId>buzzcore</artifactId>
    <packaging>war</packaging>
    <version>1.0</version>  
    <name>buzzcore</name>    

    <repositories>

        <repository>
         <id>org.jboss.resteasy</id>
         <url>http://repository.jboss.org/maven2/</url>
        </repository>

        <repository>
            <id>eap</id>
            <url>http://maven.repository.redhat.com/techpreview/all</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>eap</id>
            <url>http://maven.repository.redhat.com/techpreview/all</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.jboss.spec</groupId>
            <artifactId>jboss-javaee-6.0</artifactId>
            <version>3.0.0.Final-redhat-1</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>

        <dependency>
             <groupId>org.jboss.resteasy</groupId>
             <artifactId>resteasy-jaxrs</artifactId>
             <version>2.3.5.Final</version>
        </dependency>

        <dependency>
             <groupId>org.jboss.resteasy</groupId>
             <artifactId>resteasy-jaxb-provider</artifactId>
             <version>2.3.5.Final</version>
        </dependency>

        <dependency>
              <groupId>org.jboss.resteasy</groupId>
              <artifactId>resteasy-jettison-provider</artifactId>
              <version>2.3.5.Final</version>
        </dependency>

    </dependencies>
    <profiles>
        <profile>
            <!-- When built in OpenShift the 'openshift' profile will be used when 
                invoking mvn. -->
            <!-- Use this profile for any OpenShift specific customization your app 
                will need. -->
            <!-- By default that is to put the resulting archive into the 'webapps' 
                folder. -->
            <!-- http://maven.apache.org/guides/mini/guide-building-for-different-environments.html -->
            <id>openshift</id>
            <build>
                <finalName>buzzcore</finalName>
                <plugins>
                    <plugin>
                        <artifactId>maven-war-plugin</artifactId>
                        <version>2.1.1</version>
                        <configuration>
                            <outputDirectory>webapps</outputDirectory>
                            <warName>ROOT</warName>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         metadata-complete="false">

</web-app> 
```

这是一个 OpenShift 应用程序，因此是 openshift 条目。我已将 lib 从 RestEasy 复制到 src\main\webapp\WEB-INF\lib。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-02T09:03:44.707

我在处理一个使用 Java 1.6 设置的项目时遇到了这个问题。当我将 java 版本更改为 1.8 并在 tomcat 中部署时，我遇到了同样的问题。我没有花太多时间在上面。但是恢复到 1.6 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-25T03:36:23.190

尝试将以下内容添加到您的 pom 文件并再次打包：

```
 <dependency>
            <groupId>javax.el</groupId>
            <artifactId>el-api</artifactId>
            <scope>provided</scope>
            <version>1.0</version>
        </dependency> 
```

# java - 在 Java 中的 ArrayList 中查找最常见/最常见的元素

> ID：15600982
> 
> 赞同：0
> 
> 时间：2013-03-24T16:27:23.757
> 
> 标签：java, arrays, arraylist, frequency

我有一个包含 5 个元素的数组列表，每个元素都是一个枚举。我想构建一个方法，该方法返回另一个数组列表，其中包含列表中最常见的元素。

**示例 1：**

```
[Activities.WALKING, Activities.WALKING, Activities.WALKING, Activities.JOGGING, Activities.STANDING] 
```

方法将返回：`[Activities.WALKING]`

**示例 2：**

```
[Activities.WALKING, Activities.WALKING, Activities.JOGGING, Activities.JOGGING, Activities.STANDING] 
```

方法将返回：`[Activities.WALKING, Activities.JOGGING]`

**我尝试了什么：**

我的想法是为每个活动声明一个计数，但这意味着如果我想添加另一个活动，我必须修改代码为该活动添加另一个计数。

另一个想法是声明 a`HashMap<Activities, Integer>`并迭代数组以将每个活动及其出现插入其中。但是，我将如何提取出现次数最多的活动？

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:32:45.880

实现此类操作的最常见方法是使用 a 进行计数`Map`：定义 a `Map<MyEnum,Integer>`，它为枚举的每个元素存储零。然后遍历您的列表，并为您在列表中找到的每个元素增加计数器。同时，保持当前`max`计数。最后，遍历计数器映射条目，并将其计数与 的值匹配的所有条目的键添加到输出列表中`max`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T15:32:16.080

[在统计中，这称为“模式”](https://en.wikipedia.org/wiki/Mode_(statistics))（在您的特定情况下，[也使用“多模式”](https://en.wikipedia.org/wiki/Multimodal_distribution)，因为您想要最常出现的所有值，而不仅仅是一个）。一个普通的 Java 8 解决方案如下所示：

```
Map<Activities, Long> counts =
Stream.of(WALKING, WALKING, JOGGING, JOGGING, STANDING)
      .collect(Collectors.groupingBy(s -> s, Collectors.counting()));

long max = Collections.max(counts.values());
List<Activities> result = counts
      .entrySet()
      .stream()
      .filter(e -> e.getValue().longValue() == max)
      .map(Entry::getKey)
      .collect(Collectors.toList()); 
```

产生：

```
[WALKING, JOGGING] 
```

[jOOλ](https://github.com/jOOQ/jOOL)是一个支持[`modeAll()`](http://www.jooq.org/products/jOO%CE%BB/javadoc/latest/org/jooq/lambda/Collectable.html#mode--)流的库。以下程序：

```
System.out.println(
    Seq.of(WALKING, WALKING, JOGGING, JOGGING, STANDING)
       .modeAll()
       .toList()
); 
```

产量：

```
[WALKING, JOGGING] 
```

（免责声明：我为 jOOλ 背后的公司工作）

# ruby-on-rails - Rails：使用 to_xls gem 将任意数组导出到 Excel

> ID：15600987
> 
> 赞同：4
> 
> 时间：2013-03-24T16:27:35.127
> 
> 标签：ruby-on-rails, export-to-excel

我想以以下方式将数据从 Rails 导出到 Excel：

*   支持特殊字符（é、ô、ü 等）
*   适用于所有版本的 Excel 2007+
*   允许我在导出前添加计算列

我正在考虑使用[to_xls](https://github.com/splendeo/to_xls) gem，但无法让它在任意数组（仅限 Active Record 对象）上工作。

文档说 gem 只是稍微面向导出 Active Record 集，并且它旨在将数组转换为 Excel，因此它必须是可能的。

我认为问题在于它要求数组中的每个对象都响应 .attributes。我尝试了将虚拟属性添加到导出所基于的 Active Record 模型的方法，但似乎在调用 .attributes 时这并没有出现。

我怎么能得到这个工作？（或者您能提出实现这些目标的替代方法吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:55:58.647

这应该适用于任意数组和 ActiveRecord 对象。显然， to_xls gem 支持通过 :columns 和 :headers 参数进行所有自定义。

```
require 'bundler/setup'
require 'to_xls'

class Person
  attr_reader :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name  = last_name
  end

  def name
    "#{first_name} #{last_name}"
  end
end

array = [Person.new("Andrzej", "Krzywda"), Person.new("Derek", "Hill")]

File.open("output.xls", "w") do |f|
  f.write(
    array.to_xls(
      :columns => [:first_name, :last_name, :name],
      :headers => ["First name", "Last name", "name"]
    )
  )
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:34:35.273

你试过[axlsx](https://github.com/randym/axlsx)吗？根据[示例部分](https://github.com/randym/axlsx#examples)，它应该与通用数组一起使用。

# drupal - Drupal - 如何在字段集合项字段中使用计算字段

> ID：15600993
> 
> 赞同：0
> 
> 时间：2013-03-24T16:28:23.080
> 
> 标签：drupal, drupal-computed-field

我有自定义内容类型 type_a

在该自定义类型中，我有几个标题 Title Body Group1 (field_group1) (Field Collection Item Can have multiple values)

以下是 Group1 (Field Collection Item) 内的字段的详细信息 Group Item 1 (field_item1) 可以有一个值 Group Item 2 (field_item2) (Computed field) 可以有一个值

我想在“组项 2”中复制同一字段集合项的“组项 1”字段的值

下面是我在计算代码中使用的： $entity_field[0]['value'] = $entity->field_item1[LANGUAGE_NONE][0]['value'];

但它不起作用。我收到错误通知：未定义索引：eval() 中的值（/homepages/13/d160804/htdocs/test/sites/all/modules/computed_field/computed_field.module(466) 的第 1 行：eval()'d代码）。

请帮助如何做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:33:56.020

`$entity->field_item1[LANGUAGE_NONE][0]['value']`包含字段集合项的实体 id（其中包含要复制的字段）。

您要么需要加载两个字段集合项并设置它们各自的字段。例如，

```
$source_fc = field_collection_item_load($entity->field_item1[LANGUAGE_NONE][0]['value']);
$dest_fc = field_collection_item_load($entity->field_item2[LANGUAGE_NONE][0]['value']);

// now set values of $dest_fc with values from $source_fc 
```

或者做一些类似于这种方法的克隆：http: [//drupal.org/node/1233256#comment-5167316](http://drupal.org/node/1233256#comment-5167316)

# c# - 如何在 C# 中捕获 TCP 数据包

> ID：15600995
> 
> 赞同：5
> 
> 时间：2013-03-24T16:28:30.720
> 
> 标签：c#, .net, networking

我正在尝试读取从客户端发送到服务器的数据包。但是，我收到一条错误消息：

> 无法加载 DLL 'wpcap'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”

有人可以指出我如何解决这个错误吗？

我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using SharpPcap;
using SharpPcap.AirPcap;
using PacketDotNet;

namespace ConsoleApplication2MB
{
    class Program
    {
        static void Main(string[] args)
        {
            //Extract the device list
            CaptureDeviceList devices = CaptureDeviceList.Instance;
            if (devices.Count < 1)
            {
                Console.WriteLine("No devices were found on this machine");
                return;
            }
            Console.WriteLine("\nThe following devices are available on this machine:");
            Console.WriteLine("----------------------------------------------------\n");

            Console.WriteLine("Available AirPcap devices:");
            for (var i = 0; i < devices.Count; i++)
            {
                Console.WriteLine("[{0}] - {1}", i, devices[i].ToString());
            }

            Console.WriteLine();
            Console.Write("Please choose a device to capture: ");
            var devIndex = int.Parse(Console.ReadLine());

            var device = devices[devIndex];
            device.Open(DeviceMode.Promiscuous);

            string filter = "ip and tcp";
            device.Filter = filter;

            device.OnPacketArrival += new PacketArrivalEventHandler(device_OnPacketArrival);

            device.StartCapture();

            //Console.Write("Please press enter to exit...");
            //Console.ReadLine();
        }

        private static void device_OnPacketArrival(object sender, CaptureEventArgs e)
        {
            var time = e.Packet.Timeval.Date;
            var len = e.Packet.Data.Length;
            Console.WriteLine("{0}:{1}:{2},{3} Len={4}",
                    time.Hour, time.Minute, time.Second, time.Millisecond, len);
            Console.WriteLine(e.Packet.ToString());

            var packet = PacketDotNet.Packet.ParsePacket(e.Packet.LinkLayerType, e.Packet.Data);

            var tcpPacket = PacketDotNet.TcpPacket.GetEncapsulated(packet);
            if (tcpPacket != null)
            {
                var ipPacket = (PacketDotNet.IpPacket)tcpPacket.ParentPacket;
                System.Net.IPAddress srcIp = ipPacket.SourceAddress;
                System.Net.IPAddress dstIp = ipPacket.DestinationAddress;
                int srcPort = tcpPacket.SourcePort;
                int dstPort = tcpPacket.DestinationPort;

                Console.WriteLine("{0}:{1}:{2},{3} Len={4} {5}:{6} -> {7}:{8}",
                        time.Hour, time.Minute, time.Second, time.Millisecond, len,
                        srcIp, srcPort, dstIp, dstPort);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-11T21:41:05.533

转到： http: [//www.winpcap.org/install/default.htm](http://www.winpcap.org/install/default.htm)

下载并安装：Windows 安装程序

重新运行您的应用程序。

不再：“无法加载 DLL 'wpcap'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:15:45.053

对不起我的不好 您应该安装 PCap 驱动程序，例如：winPCap。我在win8机器上安装了WinPcap_4_1_3.exe，它可以工作。

我都试过了

```
var devices = CaptureDeviceList.Instance; 
```

和

```
var devices = SharpPcap.WinPcap.WinPcapDeviceList.Instance; 
```

反而

```
CaptureDeviceList devices = CaptureDeviceList.Instance; 
```