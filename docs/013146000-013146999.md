# StackOverflow 问答 13146000-13146999

# uiwebview - UIWebView 中文本选择开始或结束的通知？

> ID：13146000
> 
> 赞同：6
> 
> 时间：2012-10-30T19:06:51.943
> 
> 标签：uiwebview, selection

我正在寻找一种方法来观察 UIWebView 中文本选择已经开始或结束的通知。一旦图钉和蓝色选择覆盖出现，它会自动更新 Javascript 选择和范围对象，但是当您点击选择并结束时，似乎没有一种干净的方式来获得通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T21:49:12.537

您可以简单地锁定 javascript`touchend`事件（或`touchesEnded`在 Obj-C 中）并检查`window.getSelection()`. 还有 javascript 事件`selectionchange`。

我使用的另一种方法是通过遍历子视图来检查 UIWebView 选择的状态：

```
- (bool) selectionInWebView:(UIWebView*)webView {
    UIScrollView *scrollView = webView.scrollView; //assumes IO(6)? and scrollView is exposed. Loop subviews otherwise.
    UIView *browserView;

    for(int i = 0; scrollView.subviews.count; i++){
        if([NSStringFromClass([scrollView.subviews[i] class]) isEqualToString:@"UIWebBrowserView"]){
            browserView = scrollView.subviews[i]; break;
        }
    }

    if(browserView == nil) return false;

    for(int i = 0; browserView.subviews.count; i++){
        if([NSStringFromClass([browserView.subviews[i] class]) isEqualToString:@"UIWebSelectionView"]){
            //UIView *selectionView = browserView.subviews[i];
            return true; //selection view exists, a selection is in progress
        }
    }

    return false;
} 
```

但是您最好的选择是在触发触摸结束事件或触发选择更改事件时检查选择的状态。

# grails - 使用 Intellij 在 Groovy/Grails 应用程序中添加模块依赖

> ID：13146001
> 
> 赞同：0
> 
> 时间：2012-10-30T19:06:59.660
> 
> 标签：grails, module, intellij-idea, dependency-management

环境：Intellij 11.1。

我有一个 groovy 模块，比如说**MyGroovyModule**和一个 grails 应用程序**MyGrailsApp**。

我需要的是从我的 grails 应用程序中添加对 groovy 模块的依赖关系。

脚步：

1.  右键单击 grails 应用程序
2.  打开模块设置
3.  在 Dependancies 选项卡上，添加一个模块 Dependancy 并选择 MyGroovyModule

grails 应用程序编译良好，但是当我尝试启动应用程序或创建 .war 文件时，它失败并出现错误：

`unable to resolve class`...

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:05:49.573

在 IntelliJ 中添加依赖项就是这样做的。它不会将依赖项添加到您的 Grails 应用程序中。您实际上只是添加到类路径中。您需要做的是通过 Grails 添加依赖项，这可能意味着以下之一：

*   构建 JAR 并将其放入 Grails 应用程序的 lib 文件夹中
*   使您的模块成为 Grails 插件并通过 BuildConfig.groovy 将其添加为依赖项
*   将您的模块推送到本地 maven/ivy 存储库，然后使用 BuildConfig.groovy 添加依赖项
*   将您的模块推送到位于服务器上的公共/私有 maven 存储库，然后使用 BuildConfig.groovy 添加依赖项
*   让 Groovy 模块成为 grails 应用程序的一部分（将所有代码添加到 src 或 utils 文件夹）

# javascript - JS1015：未终止的字符串常量。

> ID：13146003
> 
> 赞同：1
> 
> 时间：2012-10-30T19:07:07.887
> 
> 标签：javascript, special-characters

获取 JS1015: IE 中未终止的字符串常量错误和未捕获的 SyntaxError: Unexpected token ILLEGAL in Chrome with the following js code in case character 。</p>

```
var smsDataList = ${requestScope.smsDataList}; 
```

`${requestScope.smsDataList}`包含 . 所在的 json 字符串。

任何支持所有类型字符的解决方案？请注意，此错误仅在 . 的情况下出现，而不是因为任何未闭合的引号。

# git - 我所有的 git 命令什么都不做

> ID：13146004
> 
> 赞同：2
> 
> 时间：2012-10-30T19:07:09.353
> 
> 标签：git

我正在尝试在 Mac OS X 上设置 git。我运行了安装，一切似乎都很好，但现在它的行为非常奇怪。键入任何以 开头的命令只会`git`在我的 shell 中显示一个空行；按`Enter`第二次然后只给我一个新的命令提示符。这就是我的意思：

```
wireless-224-128:~ $ git init

wireless-224-128:~ $ git config --global user.name "My Name"

wireless-224-128:~ $ git config --global user.email "my_email@gmail.com"

wireless-224-128:~ $ cd first_git/
wireless-224-128:first_git $ git init

wireless-224-128:first_git $ 
```

所有这些空行都是程序只是坐在那里什么都不做的地方（至少，我什么都看不到）。如我所说，再按`Enter`一次会让我回到提示。

这里发生了什么？顺便说一句，在我安装 git osx 钥匙串后，这种行为似乎发生了变化——好吧，我在设置之前运行的唯一 git 命令是配置我的用户名和电子邮件的调用，但它们似乎有效。我不确定钥匙串是否以某种方式弄乱了我的系统。有任何想法吗？

**更新：**

我有点前进和后退。我试图删除并重新安装 git。现在看来我有一个工作版本的 git，如果我运行`/usr/local/git/bin/git --version`它会正确响应。但是，如果我输入`git --version`，它会告诉我`-bash: /usr/bin/git: No such file or directory`。但是，查看 /usr/bin/git，我确实有一个名为 的文件`git`，以及其他几个以 git 开头的文件。我勒个去？

**进一步更新：**

我能够让它工作（至少，据我所知）。我所做的在下面的答案中有详细说明，对于经验丰富的 unix 专业人士来说，这可能是值得抱怨的。感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:17:07.687

也许你已经安装了 git-credential-osxkeychainin，而 git 实际上是别名：

检查 git 的安装位置`which git`

确保它`git-credential-osxkeychain`安装在 /usr/local/bin - 应该安装 git 的同一个地方。如果它安装在 /usr/local/git/bin - 你可以将它添加到你的 PATH 并且一切都应该工作。

其他一些故障排除提示：

尝试`"git" init`使用引号，如果它有效，那么你有一个别名正在调用其他东西并且没有返回。看看你的 ~/.profile，寻找类似的东西：

`alias git="git credential-osxkeychain"`- 很可能你有什么。

您可以删除别名来修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:17:34.970

您应该通过在终端中输入来检查 git 是否已安装

```
which git 
```

它应该（如果已正确安装）显示如下内容：

```
➜  wwwArt git:(development) ✗ which git
/usr/bin/git 
```

如果这确实显示了类似的内容，则安装了 git，您现在必须检查您是否拥有最新版本

```
➜  wwwArt git:(development) ✗ git --version
git version 1.8.0 (Apple Git-33) 
```

现在，如果您无法执行或您有旧版本，那么我建议您使用系统上的安装路径删除 git 安装（从哪个 git 中找到，或使用聚光灯搜索）

```
rm -rf /path/to/git
rm /etc/paths.d/git
rm /etc/manpaths.d/git 
```

并在 git-scm 上安装我们朋友的新副本

[http://git-scm.com/download/mac](http://git-scm.com/download/mac)（见编辑）

我希望这能帮助你让 git 正常工作——这是你职业生涯中伟大事业的开始。

编辑：

正如@Michael homebrew 所建议的那样，它是一个包管理器，它允许您使用 brews cellar（它存储应用程序的地方）非常轻松地安装/卸载，这是一个更好的前端，并且不会因安装错误而损害您的系统，因为您可以 brew 卸载，您可以找到下面的链接

[http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:40:00.123

好吧，我不确定到底发生了什么，但我想我可能不小心覆盖了一个文件或以其他方式损坏了我的安装。最终修复它的是运行`uninstall.h`包中包含的脚本，删除所有与 git 相关的二进制文件`/usr/bin`，重新安装包，*然后*退出并重新启动终端。如果不执行最后一步，终端将继续在 /usr/bin 中查找文件，即使在重新安装后也是如此。

感谢您的所有帮助。事实证明，我认为它只是归结为简单的用户错误/与 unix 相关的愚蠢。:)

# python - Python 不想导入 App 类（tkinter）

> ID：13146009
> 
> 赞同：2
> 
> 时间：2012-10-30T19:07:28.903
> 
> 标签：python, class, tkinter, attributeerror

我正在开发一个小程序，可以用作化学计算器或类似的东西，但在此过程中我遇到了一些麻烦......

在主文件中，我试图从文件 grafika.py 中导入类 Aplikacija，但无论我多么努力，它似乎都不起作用 - 我得到 AttributeError: 'module' object has no attribute 'Aplikacija' .

这可能是初学者的问题，但我已经盯着屏幕看了几个小时，我不知道可能出了什么问题。如果您能帮助我，我将不胜感激:)

PS：请不要介意变量的名称，因为我的母语不是英语...

主文件的（缩短的）代码：

```
import grafika
from Tkinter import *

root = Tk()
root.title('ChemHelp v0.1')
root.minsize(360, 240)
#root.iconbitmap('mojaikona.ico')

p = grafika.Aplikacija(root)

root.mainloop() 
```

这是整个 grafika.py 文件（它很长......）

```
from Tkinter import *
import webbrowser

class Aplikacija():

    def __init__(self, master):

        #meni
        self.meni = Menu(master)
        master.config(menu=self.meni)
        self.meni.add_command(label="Periodni sistem", command=self.ps_okno)

        self.help_meni = Menu(self.meni)
        self.meni.add_cascade(label="Pomoč", menu=self.help_meni)
        self.help_meni.add_command(label="PDF", command=self.open_pdf)
        self.help_meni.add_command(label="Spletna dokumentacija", command=self.open_web)

        self.meni.add_command(label="O programu", command=self.open_about)
        self.meni.add_command(label="Zahvale", command=self.open_thanks)
        self.meni.add_command(label="Zapri", command=quit)

        #glavno okno
        body = Frame(root, width=360, height=240)
        body.pack()

        #izracun molske mase
        self.okno_masa = LabelFrame(body, text="Molska masa", padx=5, pady=5)
        self.okno_masa.grid(padx=10, pady=10)
        self.prompt1 = Label(self.okno_masa, text="Formula spojine: ")
        self.prompt1.grid(row=0, sticky=W)
        self.formula1 = Entry(self.okno_masa)
        self.formula1.grid(row=0, column=1)
        self.send1 = Button(self.okno_masa, text="Pošlji", command=lambda: self.gfx_molska_masa(self.okno_masa))
        self.send1.grid(row=1, columnspan=2)

        #izracun mnozine
        self.okno_mn = LabelFrame(body, text="Množina", padx=5, pady=5)
        self.okno_mn.grid(padx=10, pady=10)
        self.prompt2 = Label(self.okno_mn, text="Formula spojine: ")
        self.prompt2.grid(row=4, sticky=W)
        self.formula2 = Entry(self.okno_mn)
        self.formula2.grid(row=4, column=1)
        self.prompt3 = Label(self.okno_mn, text="Masa spojine: ")
        self.prompt3.grid(row=5, sticky=W)
        self.masa = Entry(self.okno_mn)
        self.masa.grid(row=5, column=1)
        self.send2 = Button(self.okno_mn, text="Pošlji", command=lambda: self.gfx_mnozina(self.okno_mn))
        self.send2.grid(row=6, columnspan=2)

    #funkcije
    def ps_okno(self):
        self.ps = Toplevel()
        self.ps.title("Periodni sistem")
        self.ps.minsize(480, 180)
        self.tekst = Label(self.ps, text="Tukaj bo periodni...")
        self.tekst.grid()
        self.zapri = Button(self.ps, text="Zapri", command=self.ps.destroy)
        self.zapri.grid()
        print("Okno odprto :P")

    def open_pdf(self):
        print("PDF odprt ;)")

    def open_web(self):
        self.url = 'http://test.org'
        webbrowser.open_new(self.url)
        print("Splet prečekiran :D")

    def open_about(self):
        self.o = Toplevel()
        self.o.title("O programu")
        self.o.minsize(300, 300)
        self.about = LabelFrame(self.o, text="O programu", padx=5, pady=5)
        self.about.grid(padx=10, pady=10)
        self.slika = PhotoImage(file="about_slika.gif")
        self.photo = Label(self.about, image=self.slika)
        self.photo.slika=self.slika
        self.photo.grid(row=0, columnspan=2)
        self.avtor = Label(self.about, text="Avtor: ")
        self.avtor.grid(row=1, sticky=W)
        self.avtor2 = Label(self.about, text="Jane Doe")
        self.avtor2.grid(row=1, column=1)
        self.verzija = Label(self.about, text="Verzija programa: ")
        self.verzija.grid(row=2, sticky=W)
        self.verzija2 = Label(self.about, text="1.0")
        self.verzija2.grid(row=2, column=1)
        self.jezik = Label(self.about, text="Pisano v programskem jeziku Python. © 2013")
        self.jezik.grid(row=3, columnspan=2)
        self.zapri = Button(self.about, text="Zapri", command=self.o.destroy)
        self.zapri.grid(row=4, columnspan=2)
        print("Kdo bo to sploh bral? :O")

    def open_thanks(self):
        self.h = Toplevel()
        self.h.title("Zahvale")
        self.h.minsize(200, 200)
        self.zahvale = LabelFrame(self.h, text="Zahvale", width=100, padx=5, pady=5)
        self.zahvale.grid(padx=10, pady=10)
        self.z_vsebina = Label(self.zahvale, text="Rada bi se zahvalila bla bla... in tle pol ful teksta al neki...")
        self.z_vsebina.grid()
        self.mentor = LabelFrame(self.h, text="Mentor", width=100, padx=5, pady=5)
        self.mentor.grid(padx=10, pady=10)
        self.m_vsebina = Label(self.mentor, text="John Does, prof.")
        self.m_vsebina.grid()
        self.viri = LabelFrame(self.h, text="Viri", width=100, padx=5, pady=5)
        self.viri.grid(padx=10, pady=10)
        self.v_vsebina = Label(self.viri, text="http://test.org \nhttp://www.test.com")
        self.v_vsebina.grid()
        self.zapri = Button(self.h, text="Zapri", command=self.h.destroy)
        self.zapri.grid()
        print("Tale stvar je lame -.-")

    def gfx_molska_masa(self, frame):
        self.rezultat = Entry(frame)
        self.rezultat.config(width="9")
        self.rezultat.grid(row=3)
        self.molska_masa = "187"
        self.rezultat.insert(0, self.molska_masa)
        self.enota = Label(frame, text="g/mol")
        self.enota.grid(row=3, column=1, sticky=W)
        print("Molska masa je")

    def gfx_mnozina(self, frame):
        self.rezultat = Entry(frame)
        self.rezultat.config(width="8")
        self.rezultat.grid(row=7)
        self.mnozina = "1.0"
        self.rezultat.insert(0, self.mnozina)
        self.enota = Label(frame, text="mol")
        self.enota.grid(row=7, column=1, sticky=W)
        print("Mnozina je") 
```

当我从 grafika.py 文件中的主文件运行代码时，它工作正常，没有错误或任何东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:13:11.640

如果您已经导入了一次文件，则另一个导入不会重新加载它 - 模块被缓存。您需要获取`reload(grafika)`最新的更改。

# jquery - 如何使用参数提交给控制器？

> ID：13146012
> 
> 赞同：1
> 
> 时间：2012-10-30T19:07:39.660
> 
> 标签：jquery, asp.net-mvc-3, post, form-submit

我正在尝试使用参数将下拉列表更改自动提交到我的控制器。POST 确实发生了，但我只收到此错误

> 参数字典包含“shopping.WebUI”中方法“System.Web.Mvc.ViewResult Index(System.String, System.String, Int32)”的不可为空类型“System.Int32”的参数“类别”的空条目.Controllers.HomeController'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

我有一个 JQuery 脚本

```
$(".autoSubmit select").change(function () {
    $(this).closest('form').submit();
}); 
```

我的视图上的表格

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post))
{
    @Html.Action("ShipToCountry", "Filters", new { Model.SelectedCountry })
} 
```

但需要发布到此操作

```
[HttpPost]
public ViewResult Index(string country, string currency, int category)
{
    var viewModel = new MainViewModel
    {
        SelectedCountry = country,
        SelectedCurrency = currency,
        Categories = category }
    };
    return View(viewModel);
} 
```

国家、货币、类别参数都不是或可以是可选的。

我需要在 View 上进行哪些更改才能将这些参数传递给 Action？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:12:00.813

该错误表明您`category`的视图参数`Index`为 NULL。您要么必须更改 HTML 和 javascript，以便`category`参数在发布之前获取值，要么您可以更改 POST 方法以使其成为`category`可选，如下所示：

```
[HttpPost]
public ViewResult Index(string country, string currency, int? category)
{
    var viewModel = new MainViewModel
    {
        SelectedCountry = country,
        SelectedCurrency = currency,
        Categories = category }
    };
    return View(viewModel);
} 
```

* * *

编辑：

由于您不能使参数成为可选参数，因此您必须在 HTML 中确保在执行 POST 之前，所有`<input>`和`<select>`元素都已正确填充（如果它们还没有，则正确命名）。

在您的情况下，问题出在类别参数上。假设自动提交的 select 也是类别的下拉列表，您需要确保输出的 HTML 与此类似：

```
<select name="category">
    <option value="1">Category 1</option>
    <option value="2">Category 2</option>
    <option value="3">Category 3</option>
</select> 
```

这里的关键是选择**必须**具有名称`category`（或者您应该重命名方法中的参数`category`以`Index`匹配此选择的名称）并且选项**必须**具有整数值。

* * *

编辑2：

要添加货币和​​类别，您需要将`<input name="currency">`和`<input name="category">`字段添加到`<form>`您所在国家/地区的相同位置。请注意，它不需要`<input>`具体，也可以`<select>`，但字段`name`必须与`Index`方法中的参数名称相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:12:41.577

要么包含一些名称为“类别”的输入，要么使类别参数为空，例如`public ViewResult Index(string country, string currency, int? category)`

如果您的下拉列表是上述“类别”输入，请确保在发布表单之前它具有实际值。

# joomla2.5 - 不同文章中调整内容的模块/组件

> ID：13146017
> 
> 赞同：1
> 
> 时间：2012-10-30T19:08:07.663
> 
> 标签：joomla2.5, joomla-extensions, joomla-module

我维护我的体育俱乐部的网站。我最近切换到 joomla 并尝试现在设置页面。虽然我对 joomla 和扩展开发还很陌生，但我有 php/MYSQL 方面的经验，并且已经开发了一些小模块。

我想做的是为俱乐部的每支球队提供一个页面/文章。这些页面看起来都差不多。他们保存着球员、比分等的更多信息（也许稍后还有某种新闻箱，球队教练可以在那里发布信息）。所有信息都在每个团队的几个数据库表中。到目前为止，我创建了一些模块，它们以我想要的方式显示内容，并且它适用于一个团队。我安装模块，将其连接到团队页面并在模块后端输入数据库表的名称。但是我必须为每个团队都这样做，所以我得到了 20 个相同类型的模块，它们只是在数据库名称参数和显示它们的页面上有所不同。每次更新每个模块都会很痛苦。

是否可以从文章中获取变量（？）的数据库表名？我在这个问题上的研究并不成功。开发一个组件会更好，但这会导致同样的问题，对吗？我是否需要创建一个插件来保存每个团队的所有信息，然后每个团队页面上的模块都相同，但从插件中获取数据库表名？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:39:03.810

听起来您需要一个 CCK，这样您就可以定义什么是团队页面，然后在适当的字段中输入内容以进行显示。在不了解具体细节的情况下，您可能可以结合使用 K2 和 K2 BNR 内容模块来做您想做的事情。这会将模块的数量减少到每个模块的单个实例，该实例加载与您正在查看的团队页面相关的内容。无需自定义代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T17:40:49.047

我最终开发了一个组件，当我建立一个新团队时，我为菜单项选择了这个组件。然后我可以在后端选择数据库中的一个团队。团队的模块显示在该组件中，并从组件参数中获取团队信息。

# scala - 在 Scala 中从控制台读取密码

> ID：13146019
> 
> 赞同：13
> 
> 时间：2012-10-30T19:08:08.650
> 
> 标签：scala, input

在 Scala 程序中，我需要从标准输入中读取密码字符串（禁用回显）。我试过：

```
java.io.Console.readPassword 
```

但由于某种原因，我无法`java.io.Console`从 Scala (?) 调用对象中的任何方法。

从 Scala 的标准输入中读取字符串（禁用回显）的“标准”方式是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T19:21:02.827

我假设您想从控制台提示符读取密码，因此您需要从(不是单例)创建一个`Console`实例。`System``Console`

```
scala> val standardIn = System.console()
standardIn: java.io.Console = java.io.Console@69d1964d

scala> val password = standardIn.readPassword() 
```

请注意， no​​是必需的，因为 Scala 的类型推断以及默认情况下已经在范围内`import`的事实。`System`

有关更多信息，请参阅[javadoc 。](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)`java.io.Console`

*编辑*：在编译的 Scala 程序中：

```
object ReadPassword {
  def main(args: Array[String]) {
    val standardIn = System.console()
    println("standardIn object: " + standardIn)

    print("Password> ")
    val pw = standardIn.readPassword()

    print("Password: ")
    pw.foreach(print) // For demonstration purposes
    println()
  }
} 
```

编译/运行：

```
$ scalac ReadPassword.scala
$ scala ReadPassword
standardIn object: java.io.Console@311671b2
Password> 
Password: hello world 
```

# intellij-idea - IntelliJ，无法运行 catalina.sh

> ID：13146024
> 
> 赞同：1
> 
> 时间：2012-10-30T19:08:32.240
> 
> 标签：intellij-idea, osx-mountain-lion, catalina

我在 Mac 上运行，10.8.2。

从今天早上开始，我无法在调试器模式下启动我的 tomcat 6.0.18。

```
"Error running MediaPlanner: Cannot run program "/Volumes/work/apache-tomcat-6.0.18/bin/catalina.sh" (in directory "/Volumes/work/apache-tomcat-6.0.18/bin"): error=1, Operation not permitted 
```

我已确保我对该文件和 tomcat 目录中的所有文件（递归）具有权限。我已确保文件不在苹果隔离列表（看门人）中。我试过切换到tomcat 7.x。我已经安装了 java 1.6.0_37-b06-434.jdk，因为我使用的是 6 的旧版本。这已经稳定了大约一年。

我最近运行了苹果通过更新推出的 java 更新（不确定是否重要）。

今天早上 IntelliJ 推出了 11.1.4 的更新。我安装它没有错误。

我可以使用终端手动运行`catalina.sh`。我已经失去了一天的工作试图让它发挥作用。我已经搜索了这个网站和其他人尝试了我找到的一切。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:09:38.597

问题是我保存所有这些文件的磁盘映像本身被标记为隔离区。

该文件已存在多年。所以虽然我无法解释为什么它突然被标记为隔离区（以及其中的所有文件），但这就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-11T00:34:29.397

更改权限：

```
chmod -R 777 apache-tomcat-8.5.8 
```

（我使用的是 macOS Sierra 10.12.1，Apache Tomcat 8.5.8。一般情况下，其他版本的 Mac OS 或 Apache Tomcat 都是一样的。）

# ruby-on-rails - Ruby `require` 在 rails lib 中找不到我的文件

> ID：13146025
> 
> 赞同：2
> 
> 时间：2012-10-30T19:08:35.183
> 
> 标签：ruby-on-rails, ruby, load, require

我正在尝试从我的 rails 'lib' 目录加载文件，但出现错误：

```
LoadError: cannot load such file -- lib/ss.rb 
```

这很奇怪，因为在控制台中：

```
File::exist? 'lib/ss.rb' # => true
load 'lib/ss.rb' # => true
require 'lib/ss.rb' # => LoadError 
```

更重要的是，该文件应该在启动时自动加载，因为在我的 application.rb 文件中，我取消了对以下行的注释：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

谁能给我见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:14:33.883

你不应该包括 lib 和 .rb

```
require "ssl" 
```

# php - 谷歌没有索引 Joomla 网站的其他语言页面？

> ID：13146029
> 
> 赞同：2
> 
> 时间：2012-10-30T19:08:44.340
> 
> 标签：php, joomla, multilingual

我们在 Joomla (worldhotels.com) 中建立了一个网站，它有多种语言。

我们还没有加入外语元数据，但在 /de 页面上有例如德语文本。

我们实施了一个站点地图（几周后索引了大约 1/3 iof 页面）。

/en URL 似乎已在 google.com 和 google.co.uk 中编入索引，但德语页面 /de 并未被 google.de 编入索引。我通过从 /en 页面获取一些英文文本并将它们输入到 google.co.uk 以及从德语页面获取一些德文文本并将其输入到 Google.de 来检查这一点。

英语被索引。德语不行。

作为记录，没有“无索引”命令。

有谁知道从哪里开始寻找解决这个问题？它是 Joomla 的东西还是其他东西？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:11:24.987

您的默认语言是英语。因此，当 googlebot 到达您的主页时（假设 index.html），它只会找到英文页面。在 index.html 之后，google 会跟踪 index.html 中的所有链接，并继续一一抓取您的页面。在抓取过程中，如果谷歌没有到达类似的链接 `worldhotels.com/de`，它永远不会知道“de”文件夹及其内容页面。如果您的更改语言机制是基于 javascript 的，谷歌永远不会知道“de”文件夹。谷歌不遵循 javascript 来寻找新的 URL。所以尝试使用锚标签`<a href="worldhotels.com/de" ...>`在你的 index.html 中引入新语言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:31:04.780

更详细：

以伦敦皇家花园酒店的页面为例：worldhotels.com/en/hotels-in-great-britain/hotels-in-london/royal-garden-hotel

如果您将此 URL 放入 Google.co.uk，它就会被编入索引。

如果您使用此页面的德语版本：worldhotels.com/de/hotels-in-great-britain/hotels-in-london/royal-garden-hotel

它也被谷歌索引。

但是，现在从每一页中获取一些文本：

对于 EN：皇家花园酒店提供 394 间客房和 17 间豪华套房，可欣赏肯辛顿花园或商业街的美景

如果您将此文本输入 Google.co.uk，就会出现酒店页面。

对于 DE：Es bietet auf 10 Etagen 396 Luxuszimmer, viele von ihnen mit Verbindungstür。Sie sind im klassischen, unaufdringlichen

如果您将此文本放入 Google.de，则不会出现任何内容

很奇怪！！！

SEO BROWSER – 这是搜索引擎看到页面的方式

然后，如果您将德国 URL (http://www.worldhotels.com/de/hotels-in-great-britain/hotels-in-london/royal-garden-hotel) 放入 www.seo-browser。 com

注意：点击高级并在提示时创建一个帐户（免费）

如果您查看页面的第一部分（在右侧列），您将看到：

Lang: en（如果看不到，请按CTRL F）

为什么你认为搜索引擎会在 DE 页面上看到 Language 和 EN？

再往下一点你会看到：

» HTTP/1.1 301 从[http://www.worldhotels.com/de/hotels-in-great-britain/hotels-in-london/royal-garden-hotel](http://www.worldhotels.com/de/hotels-in-great-britain/hotels-in-london/royal-garden-hotel)永久移动到[http://www.worldhotels.com/ zh/英国酒店/伦敦酒店/皇家花园酒店](http://www.worldhotels.com/en/hotels-in-great-britain/hotels-in-london/royal-garden-hotel)

现在有趣的是 URL 没有重定向到 EN，那么为什么搜索引擎会看到该命令？这肯定会引起蜘蛛的一些混乱吗？

谢谢！

# apache-flex - 无法更改另一个组件的状态

> ID：13146030
> 
> 赞同：0
> 
> 时间：2012-10-30T19:08:45.127
> 
> 标签：apache-flex

我有以下功能用于更改 FYPadminSideV3 组件中的状态。但是，似乎甚至无法向 FYPadminSideV3 组件发送事件并从 FYPadminSideV3 组件调用 .currentState 函数。有谁知道原因吗？？

```
 protected function logoutButton_clickHandler(event:MouseEvent):void{

            //set currentState="Login"; in main
            var logout:Event = new Event("logout", true, true);
            var mainComp:FYPadminSideV3 =new FYPadminSideV3();
            logoutButton.dispatchEvent(logout);

            mainComp.currentState="LOGIN";
            //set state = Out; in there
            this.currentState="Out";

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:56:34.447

看起来您从未在任何地方将 mainComp 添加到 displayList 中。IE。myApp.addChild(mainComp)。因此，尽管您更改了它的状态，但在将其添加到某处之前，您无法看到它。

# asp.net-mvc - 身份验证后重定向到请求的页面

> ID：13146032
> 
> 赞同：11
> 
> 时间：2012-10-30T19:08:51.647
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authentication, forms-authentication

我正在开发一个 mvc .net 应用程序，并且正在使用表单身份验证。我想在用户通过身份验证后将用户重定向到他请求的页面。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-30T19:26:59.247

如果您创建一个 ASP.NET MVC 3 或 4 Internet 应用程序项目，它将有一个完整的示例说明如何在身份验证时使用返回 url。

当您将 AuthorizeAttribute 添加到控制器以强制身份验证时，它会将用户重定向到您的 Login 方法，并自动附加 returnUrl 参数。从那里，您需要在显示登录表单时对其进行跟踪：

```
public ActionResult Login(string returnUrl)
{
     ViewBag.ReturnUrl = returnUrl;
     return View();
} 
```

然后将其添加到您的登录表单的路由集合中：

```
@*//ReSharper disable RedundantAnonymousTypePropertyName*@
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) {
@*//ReSharper restore RedundantAnonymousTypePropertyName*@

} 
```

一旦用户提交登录，假设他们正确验证，您只需重定向到 returnUrl：

```
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
     return RedirectToLocal(returnUrl);
} 
```

最困难的部分是通过 GET/POST 序列跟踪 ReturnUrl。

如果您想了解 AuthorizeAttribute 是如何工作的，[这篇 StackOverflow](https://stackoverflow.com/questions/379506/forms-authentication-asp-net-mvc-absolute-returnurl)帖子显示了使用原始请求设置 returnUrl。

您还需要确保您验证 returnUrl 确实是一个本地 url，否则您将容易受到开放重定向攻击。RedirectToLocal() 是 MVC 4 Internet Application 模板中的一个辅助方法，它执行此验证：

```
private ActionResult RedirectToLocal(string returnUrl)
{
     if (Url.IsLocalUrl(returnUrl))
     {
          return Redirect(returnUrl);
     }
     else
     {
          return RedirectToAction("Index", "Home");
     }
} 
```

# sql - 预言机查询

> ID：13146033
> 
> 赞同：0
> 
> 时间：2012-10-30T19:09:02.240
> 
> 标签：sql, oracle11g

假设我正在使用这样的[模型](http://www.eclipse.org/birt/phoenix/db/dbschema/ClassicModelsDBSchema.jpg)

我如何才能找到最后一个订购给定产品的客户？
![在此处输入图像描述](../Images/7c0014281818997ec7fa45b567fd5c0a.png)

我走到这一步

```
 SELECT customerNumber
FROM ORDERS
WHERE orderNumber = (SELECT  TOP 1 OrderNumber FROM orderDetails WHERE productCode = 1
ORDER BY orderDate DESCENDING) 
```

现在我被困住了。不确定应该是什么子查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:19:36.837

您应该想到的方式是，仅检索 customerNumber 和 productCode 就足够了，因为与这些相关的详细信息可以通过简单的连接来检索（或者如果您的前端是这样工作的，甚至可以通过您的前端代码中的另一个查询来检索） ）。

您可以按 orderDate 降序对订单列表进行排序，然后抓取第一个。

那么你得到：

```
select customerNumber
from (
  select o.customerNumber, rownum as r
  from Orders o, OrderDetails od
  where o.orderNumber = od.orderNumber
  and od.productCode = <given_product_code>
  order by o.orderDate desc
)
where r = 1; 
```

如果您在 Orders.orderDate 上创建“降序”索引，即：

```
create index orders_orderDate_desc on Orders(orderDate desc); 
```

那么查询甚至会非常快，因为 Oracle 将使用索引而不是再次排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:19:47.663

需要更多信息，连接数取决于您要显示的数据。如果您只想说出客户名称和订单 dat，您可以这样实现（根据需要添加变量）。

```
 SELECT MAX(o.orderDate) AS lastOrder, c.customerName
        FROM Orders O, Customers C
        WHERE o.CustomerNumber = c.CustomerNumber
        ORDER BY lastOrder 
```

# android - 缩放安卓键盘

> ID：13146034
> 
> 赞同：2
> 
> 时间：2012-10-30T19:09:02.737
> 
> 标签：android, keyboard, imageview, android-canvas, zooming

所以我有一个学校项目，我正在制作一个用作计算机键盘的 Android 应用程序。我知道如何将应用程序连接到计算机，但我很难为键盘开发缩放功能（因此键盘上的键看起来更大，因此视力不佳的人可以更容易地看到键盘）。如果您能帮助我决定使用什么视图（例如 imageview 或 canvas）以及如何将这个想法实现到应用程序中（按钮或键的图像）。我知道这听起来令人困惑，但请提出问题，我会尽力澄清。

**应用程序需要做什么：**

*   放大屏幕上的键盘*   检测按下了哪个键（例如按钮按下或触摸位置的坐标）

谢谢你的时间，我希望你能帮助我：D

实际上，在stackoverflow上的其他帖子的帮助下，我自己解决了这个问题：D您可以在这里查看： [http](http://www.youtube.com/watch?v=j4wNh71RsR0) ://www.youtube.com/watch?v= j4wNh71RsR0 跳到喜欢中途的实际位置应用程序是

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-06-30T17:47:24.670

I'm just tying up loose ends here. So I finished this project a while back and I just wanted to link people, if they may be so inclined, to my project on GitHub: [https://github.com/chrislegolife/KeyboardZoom](https://github.com/chrislegolife/KeyboardZoom). Use the code however you want, but don't expect it to live up to proper coding techniques as I was just beginning to learn socket programming when I built this.

# html - 在 Html.erb 中更改 Ruby 变量的值

> ID：13146035
> 
> 赞同：2
> 
> 时间：2012-10-30T19:09:05.343
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我的控制器中有以下代码：

```
class TestController < ApplicationController

@@a = 1

def index
    @temp = connection.execute("select test_id from mastertest limit #{@@a}, 5;")
end 
```

我的 View(Html.erb) 文件中有以下代码：

```
<button type="submit" value="Next" form="submit_form">NEXT</button>
<form id="submit_form">
<% @@a = @@a + 1 %>
    <table>
      <% @temp.each do |row| %>
        <tr><td><%= row[0] %></td></tr>
      <% end %>
    </table>
</form> 
```

所以基本上我试图在单击 Next 按钮时更改类变量 @@a 的值。但它不会改变@@aa 的值。有人可以帮我怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:35:05.337

您是否尝试过使用辅助方法？

```
module ApplicationHelper
  @@a = 1
  def increment_a
     @@a = @@a + 1
  end
end 
```

在您看来，只需致电；

```
<% increment_a %> 
```

并不是说@@ 变量是一个类变量，并且它在该类的所有实例之间共享。因此，在 ApplicationHelper 类的某个地方定义该类，然后它将被共享并可以在控制器和视图中访问。

在所有情况下，我都强烈反对以这种方式使用类变量，并建议您找到另一种在视图/控制器之间共享数据/变量的方式。也许使用另一个支持类或将值存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:31:50.400

如果您想在提交表单时更改 Rails 变量，您应该将执行此操作的代码放入处理表单的操作中。

正如您所写的，我相信在呈现包含表单的模板时会设置变量。

我还隐约记得 Rails 应用程序中的类变量有一些特殊的考虑。您应该对此进行调查并确保您使用的技术不会导致任何意外结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:32:42.463

好的，我设法解决了这个问题：

Ruby 有一个叫做全局变量的东西，可以这样声明：

```
$a = 1 
```

在任何地方使用 $a 都会在控制器和视图中保留其价值。

# wpf - 绑定到使用 ContentPresenter 和 DataTemplates 显示的 ViewModel？

> ID：13146038
> 
> 赞同：1
> 
> 时间：2012-10-30T19:09:11.220
> 
> 标签：wpf, mvvm, navigation

我目前`ItemsControl`在我的应用程序顶部使用一个包含几个按钮的按钮，这些按钮绑定到 ViewModelBases 列表。这些虚拟机是我的应用程序的页面。单击时，他们将当前页面设置为适当的页面。内容演示者显示当前视图模型，`DataTemplate`并将其转换为正确的视图。

如何在这些视图中使用数据绑定？由于视图是由 ViewModel 创建的，这是否意味着我不能在视图中创建该视图模型的新实例？它如何找到要绑定的正确实例？或者，它是自动绑定的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:34:14.547

WPF ItemsControls 自动将它们在屏幕上呈现的每个 Item 的 DataContext 设置为基础集合中的相应 Item。这意味着，如果您将 IEnumerable 设置为 ItemsControl（或任何其他 ItemsControl 派生类，例如 ListBox）的 ItemsSource，它将在屏幕上呈现每个项目（使用任何可用的 DataTemplates）并自动分配为每个 ViewModelBase 项生成的视觉元素。

# c++ - C++ DLL 调试

> ID：13146039
> 
> 赞同：3
> 
> 时间：2012-10-30T19:09:11.473
> 
> 标签：c++, debugging, visual-studio-2008, dll

我有一个用 C++ 编写的 DLL。它包装了一个静态库。我用 ctypes 从 python 调用它。到目前为止，一切都很好。我需要调试 DLL 中的一些调用。我可以在静态库中设置断点，但不能在 DLL 中设置断点。我通过使用 Debug 菜单中的 Attach to Process 来做到这一点。代码看起来像这样：

```
extern "C"
{
    __declspec(dllexport) 
    void foo()
    {
    int i = 0; // Can't hit breakpoint here
    }
} 
```

我正在生成调试信息。pdb 就在 DLL 旁边。我正在加载 DLLI，我认为我正在加载。我错过了什么？

**编辑** 我重新创建了项目。问题消失了。也许不同之处在于我从托管 C 项目转到了 MFC DLL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:27:49.537

当您使用 MS Visual Studio 附加到正在运行的进程时，请确保您已为“托管代码”和“本机代码”设置了选项。这将确保 MS Visual Studio 调试器支持任何类型的代码（本机或托管代码）中的断点。否则，MS Visual Studio 将使用其“自动”设置，这将导致它仅遵循在其“类型”项目中看到的断点（例如：MFC 项目是本机代码（未管理），因此通常不会调试托管代码部分，而 .Net 项目是托管代码，不会因为“非托管”本机代码中的断点而停下来。）

您可以在附加时设置此选项，方法是选择“选择...”按钮，并将单选按钮从“自动”切换到“调试这些代码类型”。在“调试这些代码类型”下，选中“托管”和“本机”旁边的框。如果您使用 MS Visual Studio 识别的其他类型（如用于 SQL Server 代码的 T-SQL 等），则可以选择更多选项。

# mysql - MySQL 如果我更改它所在的列，索引会发生什么？

> ID：13146042
> 
> 赞同：4
> 
> 时间：2012-10-30T19:09:28.293
> 
> 标签：mysql, foreign-keys, innodb, indexing, alter-table

我正在将我的 AUTO_INCREMENT PRIMARY KEY ID 列从 INT 更新为 BIGINT。我将 MySQL 5.0.82 版与 InnoDB 表一起使用。它们看起来像：

```
FactTable
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| ID    | int(11)     | NO   | PRI | NULL    | auto_increment |
| Path  | varchar(64) | NO   |     | NULL    |                |
+-------+-------------+------+-----+---------+----------------+

AttemptTable
+---------+----------+------+-----+---------+----------------+
| Field   | Type     | Null | Key | Default | Extra          |
+---------+----------+------+-----+---------+----------------+
| ID      | int(11)  | NO   | PRI | NULL    | auto_increment |
| TriedOn | datetime | NO   |     | NULL    |                |
| FactID  | int(11)  | NO   | MUL | NULL    |                |
+---------+----------+------+-----+---------+----------------+ 
```

AttemptTable 有`KEY FK1 (FactID)`和`CONSTRAINT FK1 FOREIGN KEY (FactID) REFERENCES FactTable (ID)`. 所以我的更新过程是：

```
ALTER TABLE AttemptTable DROP FOREIGN KEY FK1,
MODIFY ID BIGINT(20) NOT NULL AUTO_INCREMENT,
MODIFY FactID BIGINT(20) NOT NULL;

ALTER TABLE FactTable MODIFY ID BIGINT(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE AttemptTable ADD CONSTRAINT FK1 FOREIGN KEY (FactID)
REFERENCES FactTable (ID); 
```

现在，我注意到在进行这些修改时，删除约束后密钥 FK1 仍然存在，并且我认为在重新创建约束后它仍然适用。但我的问题是，MySQL 是否更新此密钥以适用于 BIGINT，还是只保留 INT 功能？

我查看了 ALTER TABLE 的 MySQL 参考指南，我发现如果列的大小减小到小于索引的长度，那么索引将被缩短，但我找不到任何指示会发生什么的任何信息如果基础列的大小增加，则为索引。（我想知道我是否也应该删除并重新创建索引，或者 MySQL 是否会做我希望的事情。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:31:40.640

基本上，当您更改列的数据类型时，它会重建索引。

实际上，它会重建该表中的*所有*索引。

MySQL 中的某些类型的`ALTER TABLE`语句会导致*表重组*：

1.  锁定桌子。
2.  使用新的列定义创建一个新的空表。
3.  将旧表中的所有数据逐行复制到新表中。这自然会填充新表中的索引，就像您插入新数据一样。
4.  交换桌子上的名字。
5.  删除原始表。
6.  解锁桌子。

当您更改 InnoDB 表中的主键列时尤其如此，因为每个 InnoDB 表都存储为其主键的*聚集索引。*

因此，如果您更改列的数据类型，这将应用于新表，并且它会在将行从原始表复制到新表时填充索引。

# c++ - 有什么办法可以用模板制作容器模板吗？

> ID：13146043
> 
> 赞同：1
> 
> 时间：2012-10-30T19:09:30.227
> 
> 标签：c++, templates

```
template <class ContainerType, class elementType>
void SerializeContainer (    ContainerType< elementType > container )
{
}

//call like this 
std::vector<int>  vector;
SerializeContainer(vector); 
```

下面不会编译..有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:12:55.370

`value_type`使用容器的成员来提取元素类型更容易：

```
 template <typename T>
  void SerializeContainer (const T& container)
  {
      typedef typename T::value_type ElementType;
      ..........
  } 
```

* * *

您的代码不起作用的原因是因为语法`ContainerType<ElementType>`仅在`ContainerType`真正模板时才有效。C++ 为此支持模板模板参数：

```
template <template <typename> class ContainerType, typename ElementType>
void serializeContainer(const ContainerType<ElementType>& container) {
} 
```

但即使这样也*不会* 匹配标准 C++ 容器，因为有一些隐藏的默认参数。明确写入时：

```
std::vector<int, 
            std::allocate<int> >   vector; 
```

因此，您需要使 ContainerType 参数接受 2 个参数：

```
template <typename <typename, typename> C, typename E, typename A>
void serializeContainer(const C<E, A>& container) {
} 
```

但是这将不匹配`set::set`，因为它具有不同数量的模板参数：

```
std::set<int, 
         std::less<int>, 
         std::allocator<int> >  set; 
```

There simply isn't a one-size-fit-all solution (before C++11) if you want the ElementType spelled explicitly when matching. It's better to stick with the traits provided by the container.

# jquery - jQuery heightStyle 选项不起作用

> ID：13146044
> 
> 赞同：0
> 
> 时间：2012-10-30T19:09:37.990
> 
> 标签：jquery, jquery-ui-tabs

[如文档](http://api.jqueryui.com/tabs/#option-heightStyle)所述，我想将标签的 heightStyle 设置为“自动”，但它似乎不起作用。

[http://jsfiddle.net/Ndyy8/9/](http://jsfiddle.net/Ndyy8/9/)

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">one</a></li>
        <li><a href="#tabs-2">two</a></li>
        <li><a href="#tabs-3">three</a></li>
    </ul>
    <div id="tabs-1">
        <p>one</p>
        <p>one</p>
        <p>one</p>
        <p>one</p>
    </div>
    <div id="tabs-2">
        <p>two</p>
    </div>
    <div id="tabs-3">
        <p>three</p>
    </div>
</div>​ 
```

此外，我稍后试图通过调用在我的代码中获取活动选项卡`$('#tabs').tabs('option', 'active');`。但是，这将返回外部选项卡容器`<div id="tab"></div>`而不是活动的内部选项卡 div。

我基本上只是遵循文档示例而没有尝试做任何复杂的事情，最新的 jQuery ui 更新是否发生了一些事情，破坏了这样的一些基本功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:04:54.760

您使用了错误版本的 JQuery 和 JQuery-UI。

如果您将小提琴切换到`JQuery 1.8.2`并包括：

```
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script> 
```

在 HTML 部分，然后它工作正常。

文档[示例](http://api.jqueryui.com/tabs/#entry-examples)涵盖了这一点。

新[小提琴](http://jsfiddle.net/Kpqbq/)显示了这一点。

# jquery - jQuery隐藏对象

> ID：13146045
> 
> 赞同：-1
> 
> 时间：2012-10-30T19:09:51.673
> 
> 标签：jquery

好的，我已经编辑了这个问题，以便您理解。我在段落中有 10 张图片和它们各自的名称。所以，你有 10 张图片和 10 个段落。由于图像不同，当然名称也不同，所以我不能使用类。所以，我对一个图像使用了一个 ID，并对其名称使用了另一个 ID。

用户将单击一个图像，它将隐藏及其各自的名称。当用户单击另一个图像时，它将再次隐藏及其各自的名称，直到所有内容都被隐藏。我可以为一个图像及其各自的名称使用一个类，但用户有权仅单击图像而不是名称。就像一个隐藏的对象游戏！

我会给你一个下面一张图片的例子：

```
$(document).ready(function() {
    $('#image1').click(function() {
        $(this).hide('slow');
        $('#name').hide('slow');
    });

    if ($('#image1').is(':hidden')) {
        alert('Hello');
    }
});​ 
```

请记住，我更改了示例以便您理解。如您所见，如果用户单击图像，则其各自的名称也将被隐藏。两者都是隐藏的。然后，我验证图像是否隐藏，将显示一个警告框。图像及其名称确实隐藏了，但没有显示警报框......我必须验证图像是否隐藏，以便显示警报框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:22:50.693

如果我正确理解您的问题，您的代码应该是这样的。

所以，如果我明白了，你可以做类似的事情，假设你为你想要检查的所有图像添加一个类（比如说 myimgclass）：

如果我正确理解您的问题，您的代码应该是这样的。

所以，如果我明白了，你可以做类似的事情，假设你为你想要检查的所有图像添加一个类（比如说 myimgclass）：

```
$(document).ready(function() {
    $('.myimgclass').click(function() {
        //hide >>name here<<

        $(this).hide('slow', function() {
            var check = true;
            $('.myimgclass').each(function() {                
                //we check if image is visible, if so we stop here
                if($(this).is(':visible')) {
                    check = false;
                    return;
                }
            });
            if(check) alert('Hello');
        });
    });

});​ 
```

见[http://jsfiddle.net/s7FXR/](http://jsfiddle.net/s7FXR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:13:24.800

I think this is what you want:

```
$(document).ready (function() {
    $('#image1').click(function() {
        $(this).hide('slow');
        $('#image2').hide('slow');

        $('#div').load(page.html');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:18:28.257

此代码将相同的处理程序绑定到 click 事件，该事件会隐藏两个图像并加载页面：

```
$(document).ready(function() {
    $('#image1, #image2').click(function() {
        $('#image1, #image2').hide();
        $('#div').load('page.html');        
    });
});​ 
```

如评论中所述，您可以设计一种选择所有相关图像的方法。例如将它们包装在一个 div 中或添加一个类来识别它们。

看看[this](http://jsfiddle.net/HZ9hN/1/)和[this](http://jsfiddle.net/HZ9hN/2/) fiddle 以获取有关如何执行此操作的示例。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:23:58.440

如果您在单击时被隐藏，并且单击将始终隐藏两者，则您可能将其作为脚本：

```
$(document).ready (function() {
    $('#image1, #image2').click(function() {
      $('#image1, #image2').hide();

      $('#div').load('page.html', function() {
        alert('Load was performed.');
      });        
    });
});​ 
```

您确定从“page.html”返回正确的内容吗？

# postgresql - 要作为列插入表中的栅格记录的像素值

> ID：13146046
> 
> 赞同：1
> 
> 时间：2012-10-30T19:09:54.510
> 
> 标签：postgresql, pivot, postgis, crosstab, raster

我有一个包含以下列的表格：

```
(ID, row_num, col_num, pix_centroid, pix_val1). 
```

我有1000多条记录。我正在使用以下方法插入我的数据：

```
insert into pixelbased (row_num, col_num, pix_centroid, pix_val)
select
    (ST_PixelAsPolygons(rast, 1)).x as X,
    (ST_PixelAsPolygons(rast, 1)).y as Y,
    (ST_Centroid((ST_PixelAsPolygons(rast, 1)).geom)) as geom,
    (ST_PixelAsPolygons(rast, 1)).val as pix_val1
from mytable 
where rid=1` 
```

现在我正在尝试将所有其他记录作为列插入，_pix_val1_ 列对我来说很重要。所有其他列将保持不变。换句话说，我希望决赛桌有这些列：

```
(ID, row_num, col_num, pix_centroid, pix_val1, pix_val2, pix_val3, ....) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T02:20:48.650

如果可能的话，我想将这些数据作为位图存储在一个字节中。以下是如何获取一系列字节值并将其转换为字节茶：

```
WITH bytes(b) AS (SELECT x % 256 FROM generate_series(1,53000) x)
SELECT ('\x'||string_agg(lpad(to_hex(b),2,'0'),''))::bytea FROM bytes; 
```

`substr`您可以使用该函数访问字节数组的字段或范围。这个 bytea 被组织为线性像素阵列，但您可能会发现将其组织成更传统的位图格式更有用。此外，如果您的像素超过一个字节，您可能需要处理大端与小端。您可以在 SQL 中做到这一点，但在像 PL/Perl 这样的过程语言中可能要容易得多。

* * *

如果做不到这一点，多维数组将是一个有点合理的选择。

使用`generate_series`语句代替您的`pix_val`字段以方便测试，此查询使用两个聚合传递生成一个二维整数数组：

```
SELECT ('{'||string_agg(subarray, ',')||'}')::integer[] AS arr
FROM (
   SELECT array_agg(x order by x)::text 
   FROM generate_series(1,53000) x
   GROUP BY width_bucket(x, 1, 53001, 100)
) a(subarray); 
```

`array_agg`由于无法聚合数组，因此必须使用二维数组的字符串文字形式。在我看来，这在 PostgreSQL 中是一个真正的缺点。一般来说，它的多维数组很难使用，并且与大多数应用程序和语言实现数组的方式不一致。

您可以通过索引从数组中获取字段。例子：

```
regress=> SELECT ('{'||string_agg(subarray, ',')||'}')::integer[] AS arr INTO test FROM (SELECT array_agg(x order by x)::text from generate_series(1,53000) x GROUP BY width_bucket(x, 1, 53001, 100)) a(subarray);

regress=> \d test

      Table "public.test"
 Column |   Type    | Modifiers 
--------+-----------+-----------
 arr   | integer[] | 
```

`test`包含具有两个维度的单个数组：

```
regress=> \x
regress=> select array_dims(test.arr), array_ndims(test.arr), array_length(test.arr,1), array_length(test.arr,2) FROM test;
-[ RECORD 1 ]+---------------
array_dims   | [1:100][1:530]
array_ndims  | 2
array_length | 100
array_length | 530 
```

我可以获取具有两级索引的元素：

```
regress=> SELECT test.arr[4][4] FROM test;
 arr  
------
 1594
(1 row) 
```

或带有切片的“列”：

```
regress=> SELECT test.arr[4:4][1:530] FROM test; 
```

奇怪的是，这仍然是一个二维数组，顶维只有一个元素深。如果需要，`unnest`您可以将其（低效）展平。`array_agg`

如您所见，PostgreSQL 中的二维数组有些奇怪，但您正在尝试做的事情也是如此。

# java - Java - Mac OS X 10.8 下的 JavaPlot - 我能以某种方式避免安装 gnuplot 吗？

> ID：13146048
> 
> 赞同：0
> 
> 时间：2012-10-30T19:09:55.093
> 
> 标签：java, gnuplot, portability, javaplot

如果您不了解 JavaPlot，它是一个 Java 库，它将 Java 与提供一组类的流行 gnuplot “连接”。当它运行时，它会在您的系统中搜索 gnuplot 二进制文件。无论如何，几个月前我经历了在 Mac OS 下安装 gnuplot 的糟糕经历，现在我所有的数据都消失了，所以 gnuplot 不再在我的系统上。

为了避免再次安装它，并为了提高我的 Java 应用程序的可移植性，有没有办法将原始的下载时的 gnuplot 文件夹嵌入到我的 Java 项目中，并告诉 JavaPlot 在那个文件夹中查找二进制文件?

你知道，即使没有安装 gnuplot，它也会让我的应用程序在各种操作系统上运行。

先感谢您，

安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:35:28.783

据我所知，`JavaPlot`它是一个基于管道的 gnuplot 接口。如果这是真的，那么您就无法真正绕过`gnuplot`安装 Java 可以找到它的地方。也就是说，我在 OS-X 上从来没有遇到过任何问题`gnuplot`——而且我已经从源代码构建了很多次......

# php - 初始化类变量的更好方法

> ID：13146049
> 
> 赞同：4
> 
> 时间：2012-10-30T19:09:57.180
> 
> 标签：php, class, initialization

我已经搜索了一段时间，但我找不到答案，这两种在 PHP 中初始化变量类的方法有什么区别？:(如果有的话)

```
class MyClass
{
    private $myVariable='something';

    public function __construct()
    {

    }
}

class MyClass
{
    private $myVariable;

    public function __construct()
    {
        $this->myVariable='something';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:15:19.307

*   如果要在类中使用默认值初始化变量*，*请选择方法 1。
*   如果要使用*外部*值初始化变量，请通过构造函数传递变量并选择方法 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:29:08.540

**看到这个场景**：

```
class Parent {
    protected $property1; // Not set
    protected $property2 = '2'; // Set to 2
    public function __construct(){
        $this->property1 = '1'; // Set to 1
    }
} // class Parent;

class Child extends Parent {
    public function __construct(){
        // Child CHOOSES to call parent constructor
        parent::__construct(); // optional call (what if skipped)
        // but if he does not, ->property1 remains unset!
    }
} // class Child; 
```

这是两个调用之间的区别。parent::__construct() 对于从父类继承的子类是可选的。所以：

*   如果您有需要预设的**标量**（如`is_scalar()`）**属性，请在****类定义**中进行，以确保它们也存在于子类中。
*   如果您**的属性依赖于参数或者是可选**的，请将它们放在**构造函数**中。

*这完全取决于您如何设计代码的功能。*

**这里没有对错，只有适合你的。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:13:42.810

如果您不选择在构造函数中初始化变量，则只能使用常量值。这里有一个小例子：

```
define('MY_CONSTANT', 'value');

class MyClass
{ 
    // these will work
    private $myVariable = 'constant value';
    private $constant = MY_CONSTANT;
    private $array = Array('value1', 'value2');

    // the following won't work
    private $myOtherVariable = new stdClass();
    private $number = 1 + 2;
    private $static_method = self::someStaticMethod();

    public function __construct($param1 = '')
    {
        $this->myVariable = $param1;

        // in here you're not limited
        $this->myOtherVariable = new stdClass();
        $this->number = 1 + 2;
        $this->static_method = self::someStaticMethod();
    }
} 
```

查看此手册页以查看允许将哪些值直接分配给属性：[http ://php.net/manual/en/language.oop5.properties.php](http://php.net/manual/en/language.oop5.properties.php)

可能还有更多不同...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T19:19:53.743

我喜欢这样做有点像促进延迟加载的第二种方法。声明成员变量时我将设置的简单值。

```
class WidgetCategory
{
    /** @var array */
    private $items;

    /**
     *
     * @return array
     */
    public function getItems()
    {
        if (is_null($this->items)) {
            $this->items = array();
            /* build item array */
        }
        return $this->items;
    }
} 
```

# java - 如何实现具有两个不同功能的 servlet/applet 组合？

> ID：13146051
> 
> 赞同：2
> 
> 时间：2012-10-30T19:09:59.227
> 
> 标签：java, web-applications, servlets, spring-mvc, applet

我的任务是创建一个由两个页面组成的 Java Web 应用程序，一个“绘图”页面和一个“评估”页面。我将在 Eclipse 中进行开发。

“绘图”页面将促进以下过程：

*   从表单中获取用户输入
*   使用 Servlet，在后台构建模型
*   将模型发送到客户端的 Applet（可能通过 JSON）以进行可视化呈现

“评估”页面将：

*   使用 Servlet 从类似的表单中获取用户输入以构建类似的对象（相同的类）
*   通过 Servlet 上的算法运行模型，并在屏幕上显示结果。

页面可以是相对独立的。

我的问题是，我究竟应该如何实施这种组合？

我熟悉 Servlet 开发和 Spring MVC/Webflow 框架，但绝不是专家。但是，我猜 Spring 对于这个简单的应用程序来说可能是多余的，而且我从未实现过具有多个主要功能的 Servlet。

我是否应该在 doGet/doPost 方法中创建一个仅具有条件逻辑的 HttpServlet，并根据请求的 URL 执行操作？

我应该制作两个单独的 Servlet 吗？

如果是这样，我会在 Eclipse 中创建两个单独的项目，还是只创建一个在 web.xml 中注册两个 Servlet 的项目？我应该做一些完全不同的事情吗？

我不是在寻找代码，只是想对如何处理这种类型的应用程序有更深入的了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:50:37.463

我将提供与 Dmitri 的观点相反的观点。我认为人们知道如何编写普通的 servlet 非常棒，但是在为企业编写代码时，我认为使用 Spring MCV 会更好。主要原因是：

*   你已经有使用 Spring MVC 的经验，所以没有学习曲线
*   尽管需求看起来很简单，但我的经验是，像这样的 Web 项目会迅速超出其初始规范，此时您会希望自己使用 Spring MVC
*   您将不得不编写和维护通常由 Spring MVC 处理的 servlet 中的功能 - 我喜欢这样的说法：它们已经解决了您甚至还没有想到的问题。
*   您编写的每一行代码都有可能出现错误，通过减少您编写的代码量，您可以降低出现错误的风险
*   Spring MVC 的设计方式使您可以尽可能少地使用您喜欢/需要的功能。使用注解，您可以使用少量的代码/xml 行来启动和运行一个简单的应用程序
*   使用 Spring MVC 进行测试更容易
*   Spring MVC 遵循其他程序员已经知道的约定。如果你离开你的工作，那么有人可以很快接手。OTOH，如果您编写一个简单的 servlet，您可以通过多种不同的方式来实现，这可能会使其他人更难维护
*   使用现代硬件/操作系统，将 Spring MVC 添加到您的项目中的额外内存/开销可以忽略不计 - 我们不再使用 128KB 内存运行我们的服务器，但有些人仍然有我们这样做的心态。如果有疑问对其进行基准测试，请不要及早优化！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:31:50.290

Spring（或任何其他 MVC）框架对此肯定是矫枉过正，servlet 就可以了。

确保你所有的实际逻辑都在一个单独的类中，你的所有 servlet 应该做的就是应用任何需要做的处理来读取用户输入，并在你的服务类上调用适当的方法。基本上将特定于 Web 的部分保持在最小限度。

无论是两个单独的 servlet 还是一个打开请求路径的 servlet 都无关紧要。我会使用两个独立的，因为将请求映射到方法几乎就是 servlet 的设计目的。

在 Eclipse 中不需要单独的项目，只需在 web.xml 中定义 servlet（或者在 Servlet 3.0 上使用注释）。

听起来你在正确的轨道上。

# javascript - spring mvc 3 + jquery + AJAX + $.get - 值未从控制器返回到回调方法

> ID：13146052
> 
> 赞同：3
> 
> 时间：2012-10-30T19:10:03.427
> 
> 标签：javascript, ajax, spring, jquery, spring-mvc

我是 AJAX 新手，目前正在学习将它与 Spring MVC 一起使用。我也面临同样的问题。

在着手处理我正在处理的实际实时需求之前，我正在测试整个 AJAX+Spring MVC+jquery 组合，并使用一些非常基本的东西来让我的理解正确。

我在页面上有一个搜索框+“提交”按钮。我在使用 $.get 提交时向 Spring 控制器发送硬编码文本。然后我将该控制器的另一个文本发送回回调函数，并尝试使用“警报”框在回调函数中显示返回的文本。这似乎不起作用。

我看到正在调用回调函数（因为正在触发回调函数中的“警报”）所以我有点假设控制权正在转移到控制器并返回到回调方法，但我无法找出为什么从控制器返回的文本没有显示在回调方法的警报框中。不确定我在这里缺少什么来捕获回调方法中的返回值。

非常感谢您对此的回应和帮助。

谢谢。

文本框和提交按钮的 HTML：

```
 <div class = "searchcontactform">
      <form id = "searchcontactform" name="searchcontactform" method="GET">
        <input type = 'text' size='25' name = "searchlastname" id = "searchlastname" value='Enter Last Name to Search'/>
        <input type = "submit" value="Find">
      </form>
   </div> 
```

在提交上述表单时触发的 JavaScript：

```
 <script type="text/javascript" src="${pageContext.request.contextPath}/resources/scripts/jquery.min.js"></script>
    <script type="text/javascript">

    $(document).ready(function( ) {
    $('#searchcontactform').submit(function(){

         $.get("ContactList-JPA/search", {textsent : 'Hello Controller'},callback);

         function callback(textreceived){
               alert('In Callback. Text Received is: '+textreceived);
         };
    });
    }); 
```

控制器：

```
 @RequestMapping(value = "/search", method = RequestMethod.GET)
        public @ResponseBody String searchcontact(@RequestParam(value="textsent") String textsent){
        return textsent;
        } 
```

POM.xml 中的 Jackson 依赖项：

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.7.1</version>
    </dependency> 
```

在 servlet-context.xml 和 root-context.xml 中驱动的注解：

```
 <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:41:27.297

首先，放在`return false`提交事件处理程序的末尾

```
$('#searchcontactform').submit(function(){

         $.get("ContactList-JPA/search", 
         {
             textsent : 'Hello Controller'
         },
         function(textreceived){
               alert('In Callback. Text Received is: '+textreceived);
         });
         return false;
    }); 
```

如果这不起作用尝试使用谷歌浏览器，你可以调试你的 javascript 应用程序，在回调和`$.get`行中放置一个断点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:51:33.867

我认为问题在于您返回类型 String 并且出于某种原因 Spring/Jackson 在转换为响应时不喜欢。要解决此问题，您应该执行以下操作：

```
@RequestMapping(value = "/search", method = RequestMethod.GET)
public @ResponseBody List<String> searchcontact(@RequestParam(value="textsent") String textsent){
    return Arrays.asList( new String[] { textsent } );
} 
```

这并不理想，而且很烦人。我还没有真正研究过为什么会发生这种情况，因为当时的解决方法对我来说很好。

更新：抱歉，我在这里错了，您根本不会假设返回将是 JSON，因此更改控制器不会产生任何影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:18:39.017

尝试将返回的数据作为参数传递给回调：

```
$(document).ready(function( ) {
    $('#searchcontactform').submit(function(){

        $.get("ContactList-JPA/search", {textsent : 'Hello Controller'},
           function(data){
              callback(data);
        });

        function callback(textreceived){
           alert('In Callback. Text Received is: '+textreceived);
        };
    });
}); 
```

您还可以将回调函数设置为匿名函数来整理。

```
$(document).ready(function( ) {
    $('#searchcontactform').submit(function(){

        $.get("ContactList-JPA/search", {textsent : 'Hello Controller'},
           function(data){
              alert('In Callback. Text Received is: '+data);
        });
    });
}); 
```

# gwt - IntellijIDEA 中的 GWT SuperDevMode

> ID：13146054
> 
> 赞同：0
> 
> 时间：2012-10-30T19:10:08.727
> 
> 标签：gwt, intellij-idea

有谁知道让 GWT 的 SuperDevMode 在 IntellijIDEA 中运行所需的步骤？我已经安装了预发行版 Leda v122.639。我在 IDEA 的运行配置中选择了“使用超级开发模式”。我从未看到预期的“代码服务器已准备好”消息。

这是 IDEA 的输出：

```
workDir:/Users/xxx/Library/Caches/IntelliJIdea12/gwt/xxx.6b734cae/xxx.e1dbb7c8/superDevMode/work
deleting: /Users/xxx/Library/Caches/IntelliJIdea12/gwt/xxx.6b734cae/xxx.e1dbb7c8/superDevMode/work/com.xxx.xxx.xxx/compile-1
binding: user.agent=safari
binding: compiler.useSourceMaps=true
binding: locale=en
Compiling module com.xxx.xxx.xxx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:07:43.057

从命令行运行构建后，IntellijIDEA 编译器因内存不足而停止运行。我在 build.xml 编译期间增加了给 java 的内存，它开始工作。

# ruby - ruby 在 Windows shell 中注入击键

> ID：13146056
> 
> 赞同：4
> 
> 时间：2012-10-30T19:10:15.093
> 
> 标签：ruby, windows, shell

在 ruby​​ 中有没有办法可以在 shell 中注入一个击键来让程序运行？我需要通过在 shell 中运行一个程序

```
sh " #{another program}" 
```

程序末尾有一个“按任意键继续”。我怎样才能让它继续前进？

ruby 中是否有类似的东西，比如 java

[http://alvinalexander.com/java/java-robot-class-example-mouse-keystroke](http://alvinalexander.com/java/java-robot-class-example-mouse-keystroke)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:46:30.557

我认为你最好的选择是使用 Autoit，它可以像这样通过 COM 接口进行控制

```
require 'win32ole'
ai = WIN32OLE.new("AutoItX3.Control")
ai.WinWaitActive("Untitled - Notepad")
1.upto(10) do |i|
  ai.Send "#{i}{ENTER}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:35:47.127

您可以使用[Open3.popen2](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen2)启动进程并获取 stdout 和 stdin 的句柄，然后您应该能够通过执行“按键” `stdin.puts "Y"`。

# debian - Redmine 2.1.2（从 2.0.4 迁移）：迁移正常，但登录后崩溃

> ID：13146059
> 
> 赞同：2
> 
> 时间：2012-10-30T19:10:34.950
> 
> 标签：debian, redmine

我刚刚按照他们的迁移教程从 Redmine 2.0.4 迁移到 Redmine 2.1.2（在 Debian 上，带有Passenger）。它似乎工作正常。但是当我在浏览器中启动它时，我有 redmine 的身份验证门户，当我使用我的任何帐户登录时它会崩溃。我检查了我的数据库，所有帐户信息仍然存在。当我检查我的 redmine 日志时，生产，这就是我得到的：

```
Connecting to database specified by database.yml 
OpenIdAuthentication.store is nil. Using in-memory store.
[...]
NoMethodError (undefined method 'session_lifetime?' for #<Class:0x7[...]
app/controllers/application_controller.rb:61 in 'session_expired?'
app/controllers/application_controller.rb:50:in 'session_expiration' 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:55:23.433

我终于解决了我的问题：在迁移过程中，我用旧的替换了 settings.yml，这是一个错误。我用原来的替换了它，它工作正常

# json - 从 JSON Webservice 自动更新 Excel 2010 中的单元格

> ID：13146060
> 
> 赞同：0
> 
> 时间：2012-10-30T19:10:36.137
> 
> 标签：json, web-services, excel, excel-2010

我正在寻找一种解决方案，通过 JSON Web 服务自动更新我的 Excel 表中的单元格。我找到了一种通过 XML 执行此操作的方法，但不幸的是无法通过 JSON 执行此操作。

我要使用的网络服务是：[https ://mtgox.com/api/1/BTCUSD/ticker](https://mtgox.com/api/1/BTCUSD/ticker)

我想在我的表中使用 return.avg.value 的值。

我什至想过使用 RegEx 来获取价值，但我也找不到这样做的方法。

我真的希望在不使用许多不同的 Excel 插件和插件的情况下解决我的问题，因此我的表格仍然是可移植的。

感谢您的帮助，

弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:48:38.243

```
Sub TestJson()
    Dim json As String
    Dim sc As Object, o

    json = WebResponse("https://mtgox.com/api/1/BTCUSD/ticker")

    Set sc = CreateObject("ScriptControl")
    sc.Language = "JScript"

    o = sc.Eval("eval(" & json & ")['return'].avg.value")

    Debug.Print o

End Sub

Public Function WebResponse(sURL As String) As String
    Dim XmlHttpRequest As Object
    Set XmlHttpRequest = CreateObject("Msxml2.ServerXMLHTTP.4.0")
    XmlHttpRequest.Open "GET", sURL, False
    XmlHttpRequest.send
    WebResponse = XmlHttpRequest.responseText
End Function 
```

# python-3.x - 简单的 Python Webserver 来保存文件

> ID：13146064
> 
> 赞同：16
> 
> 时间：2012-10-30T19:10:45.543
> 
> 标签：python-3.x, webserver

我正在尝试制作一个简单的 python 网络服务器来将`Post`编辑的文本保存到一个名为的文件`store.json`中，该文件与 python 脚本位于同一文件夹中。这是我的一半代码，有人可以告诉我其余的应该是什么吗？

```
import string,cgi,time
from os import curdir, sep
from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
#import pri

class StoreHandler(BaseHTTPRequestHandler):
def do_GET(self):
    try:
        if self.path == "/store.json":
            f = open(curdir + sep + "store.json") #self.path has /test.html
            self.send_response(200)
            self.send_header('Content-type','text/json')
            self.end_headers()
            self.wfile.write(f.read())
            f.close()
            return
        return
    except IOError:
        self.send_error(404,'File Not Found: %s' % self.path)
def do_POST(self):
    //if the url is 'store.json' then
    //what do I do here?

def main():
    try:
        server = HTTPServer(('', 80), StoreHandler)
        print 'started...'
        server.serve_forever()
    except KeyboardInterrupt:
        print '^C received, shutting down server'
        server.socket.close()
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-30T19:41:48.983

这是一般的想法：

```
from os import curdir
from os.path import join as pjoin

from http.server import BaseHTTPRequestHandler, HTTPServer

class StoreHandler(BaseHTTPRequestHandler):
    store_path = pjoin(curdir, 'store.json')

    def do_GET(self):
        if self.path == '/store.json':
            with open(self.store_path) as fh:
                self.send_response(200)
                self.send_header('Content-type', 'text/json')
                self.end_headers()
                self.wfile.write(fh.read().encode())

    def do_POST(self):
        if self.path == '/store.json':
            length = self.headers['content-length']
            data = self.rfile.read(int(length))

            with open(self.store_path, 'w') as fh:
                fh.write(data.decode())

            self.send_response(200)

server = HTTPServer(('', 8080), StoreHandler)
server.serve_forever() 
```

```
$ curl -X POST --data "one two three four" localhost:8080/store.json
$ curl -X GET localhost:8080/store.json    
one two three four% 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-30T19:33:06.317

Important thing is that you will have to build `cgi.FieldStorage` properly from the raw posted data e.g.

```
form = cgi.FieldStorage(
            fp=self.rfile,
            headers=self.headers,
            environ={'REQUEST_METHOD':'POST',
                     'CONTENT_TYPE':self.headers['Content-Type'],
                     }) 
```

after that it is easy to dump file, here is a simple handler which shows a form on `do_GET` to upload any file user chooses and saves that file to /tmp in `do_POST` when form is POSTed

```
from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler

import cgi

class StoreHandler(BaseHTTPRequestHandler):
    def do_POST(self):

        form = cgi.FieldStorage(
            fp=self.rfile,
            headers=self.headers,
            environ={'REQUEST_METHOD':'POST',
                     'CONTENT_TYPE':self.headers['Content-Type'],
                     })
        filename = form['file'].filename
        data = form['file'].file.read()
        open("/tmp/%s"%filename, "wb").write(data)

        self.respond("uploaded %s, thanks"%filename)

    def do_GET(self):
        response = """
        <html><body>
        <form enctype="multipart/form-data" method="post">
        <p>File: <input type="file" name="file"></p>
        <p><input type="submit" value="Upload"></p>
        </form>
        </body></html>
        """        

        self.respond(response)

    def respond(self, response, status=200):
        self.send_response(status)
        self.send_header("Content-type", "text/html")
        self.send_header("Content-length", len(response))
        self.end_headers()
        self.wfile.write(response) 
```

Also note that `self.respond` is not a standard method I just added it for quickly returning some response.

# c++ - C++ sizeof 不适用于模板

> ID：13146070
> 
> 赞同：2
> 
> 时间：2012-10-30T19:11:36.137
> 
> 标签：c++, templates

> **可能重复：**
> [C2070 - 非法 sizeof 操作数](https://stackoverflow.com/questions/12485025/c2070-illegal-sizeof-operand)

为什么下面代码的模板版本不编译，而当（未使用的）模板被删除时，相同的代码将编译？

* * *

不编译：

```
template <typename T>
class Foo {
public:
    static double const vals[];
    int run ();
};

template <typename T>
double const Foo<T>::vals[] = { 1, 2,3 };

template <typename T>
inline
int Foo<T>::run () {
    return sizeof(vals); // error C2070: 'const double []': illegal sizeof operand
} 
```

* * *

编译：

```
class Foo {
public:
    static double const vals[];
    int run ();
};

double const Foo::vals[] = { 1, 2,3 };

inline
int Foo::run () {
    return sizeof(vals);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:18:00.503

Because Visual Studio is broken. See: [http://connect.microsoft.com/VisualStudio/feedback/details/759407/can-not-get-size-of-static-array-defined-in-class-template](http://connect.microsoft.com/VisualStudio/feedback/details/759407/can-not-get-size-of-static-array-defined-in-class-template)

A possible (untested) workaround would be to use something like this:

```
private:
template<typename T, int size>
int get_array_length(T(&)[size]){return size;} 
```

And then use:

```
int Foo::run() {
    return get_array_length(vals) * sizeof(double);
} 
```

# android - 异步任务完成后如何更改活动？

> ID：13146075
> 
> 赞同：1
> 
> 时间：2012-10-30T19:12:00.757
> 
> 标签：android

问题已解决，感谢您的帮助。

本质上，我的 onCreate() 类在按钮上设置了 OnClick 侦听器。单击它后，将创建并执行一个异步任务。

此异步任务从服务器获取响应，然后将信息发送到 onPostExecute()。

从这里开始，如果信息有效与否，我想庆祝结果并相应地切换活动。

截至目前，我已尝试从 onPostExecute() 执行此操作，但它不起作用。不知何故，我必须回到我的主线程并在那里做。我该怎么做呢？这是代码：

```
 public class Class1 extends Activity {

JSONObject jObj = null;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myLayout);

    Button submit = (Button) findViewById(R.id.submitButton);
    submit.setOnClickListener(new View.OnClickListener(){

        public void onClick(View arg0){

            (new CallAPI(restfulCall)).execute();
        }
    });        
}

public class CallAPI extends AsyncTask<Void,Void,String>
{
    private String restfulCall = "";

    public CallAPI(String command)
    {
        restfulCall = command;  
    }

    protected String doInBackground(Void... urls)
    {
        return API.getData(restfulCall);
    }

    protected void onPostExecute(String result) {
        try {
            jObj = new JSONObject(result);
        } catch (JSONException e1) {
            e1.printStackTrace();
        }

            try {
                if(jObj.get("status").toString().equals("success"))
                {
                    Toast.makeText(getBaseContext(),"Registration Succesful",Toast.LENGTH_LONG).show();
                    Intent intent = new Intent(Class1.this,Success.class);
                    Class1.this.startActivity(intent);

                }
                else
                {
                    Toast.makeText(getBaseContext(),jObj.get("error").toString(),Toast.LENGTH_LONG).show(); 
                    Intent intent = new Intent(Class1.this,Error.class);
                    Class1.this.startActivity(intent);          
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:25:02.620

用于`equals`比较字符串而不是`==`as ：

```
if(jObj.get("status").toString().equals("success") 
```

代替

```
if(jObj.get("status").toString() == "success") 
```

# apache - DryadOpt（并行分支和绑定库） - 可用性

> ID：13146078
> 
> 赞同：0
> 
> 时间：2012-10-30T19:12:33.513
> 
> 标签：apache, hadoop, breadth-first-search, hama

我正在尝试实现并行分支和绑定 BFS。我有兴趣使用在 Dryad LinQ 之上运行的 DryadOpt。有没有人获得 DryadOpt。我知道我们可以获得 DryadLinQ 的学术版本，它也存在于 Azure 上，但有什么方法可以获得 DryadOpt。apache hama 可以处理并行分支和绑定 BFS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:32:11.967

虽然这在 Hama 中是可能的，但使用 BSP 实现这一点效率不高（您可以分支，但边界需要全局同步）。Hama 将在未来有结构来实现这一点。

但是要知道，我建议您`BranchReduce`在 YARN by cloudera 上使用。

[https://github.com/cloudera/branchreduce](https://github.com/cloudera/branchreduce)

（未测试是否有效，也许只是给他们写一封邮件）

# apache-tika - Tika--从复合文档中提取不同的项目

> ID：13146080
> 
> 赞同：1
> 
> 时间：2012-10-30T19:12:42.733
> 
> 标签：apache-tika

**问题：** 假设带有附件的电子邮件消息（假设是 JPEG 附件）。如何解析（不使用 Tika 外观类）电子邮件并返回不同的部分——a）电子邮件文本内容和 b）电子邮件附件？

**配置：** Tika 1.2 Java 1.7

**详细信息：** 我已经能够正确解析基本电子邮件格式的电子邮件。但是，在解析之后，我需要知道 a) 电子邮件的文本内容和 b) 电子邮件任何附件的内容。我会将这些项目存储在我的数据库中，本质上是带有子附件的父电子邮件。

我无法弄清楚的是如何“取回”不同的部分并知道父电子邮件具有附件并能够单独存储引用到邮件的那些附件。我相信，这本质上类似于提取 ZipFile 内容。

**代码示例：**

```
 private Message processDocument(String fullfilepath) {
     try {
         File filename = new File(fullfilepath) ;
         return this.processDocument(filename) ;
     } catch (NullPointerException npe) {
        Message error = new Message(false) ;
         error.appendErrorMessage("The file name was null.") ;
         return error ;
     } 
 }

private Message processDocument(File filename) {
    InputStream stream = null;
    try {
       stream = new FileInputStream(filename) ;
    } catch (FileNotFoundException fnfe) {
        // TODO Auto-generated catch block
        fnfe.printStackTrace();
        System.out.println("FileNotFoundException") ;
        return diag ;
    }

int writelimit = -1 ; 
ContentHandler texthandler = new BodyContentHandler(writelimit); 
this.safehandlerbodytext = new SafeContentHandler(texthandler);
this.meta = new Metadata() ;
ParseContext context = new ParseContext() ;

AutoDetectParser autodetectparser = new AutoDetectParser() ;

try {

    autodetectparser.parse(
        stream,
        texthandler,
        meta,
        context) ;

    this.documenttype = meta.get("Content-Type") ;

    diag.setSuccessful(true);

} catch (IOException ioe) {
    // if the document stream could not be read
    System.out.println("TikaTextExtractorHelper IOException " + ioe.getMessage()) ;
    //FIXME -- add real handling

} catch (SAXException se) {
    // if the SAX events could not be processed
    System.out.println("TikaTextExtractorHelper SAXException " + se.getMessage()) ;
  //FIXME -- add real handling

} catch (TikaException te) {
    // if the document could not be parsed
    System.out.println("TikaTextExtractorHelper TikaException " + te.getMessage()) ;
    System.out.println("Exception Filename = " + filename.getName()) ;
  //FIXME -- add real handling

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:17:52.157

当 Tika 遇到嵌入文档时，它会转到 ParseContext 以查看您是否提供了递归解析器。如果您有，它将使用它来处理任何嵌入式资源。如果没有，它会跳过。

因此，您可能想要做的是：

```
public static class HandleEmbeddedParser extends AbstractParser {
   public List<File> found = new ArrayList<File>();
   Set<MediaType> getSupportedTypes(ParseContext context) {
       // Return what you want to handle
       HashSet<MediaType> types = new HashSet<MediaType>();
       types.put(MediaType.application("pdf"));
       types.put(MediaType.application("zip"));
       return types;
   }
   void parse(
        InputStream stream, ContentHandler handler,
        Metadata metadata, ParseContext context
   ) throws IOException {
       // Do something with the child documents
       // eg save to disk
       File f = File.createTempFile("tika","tmp");
       found.add(f);

       FileOutputStream fout = new FileOutputStream(f);
       IOUtils.copy(stream,fout);
       fout.close();
   }
}

ParseContext context = new ParseContext();
context.set(Parser.class, new HandleEmbeddedParser();
parser.parse(....); 
```

# php - 我在全局数组上设置的字段不存在

> ID：13146086
> 
> 赞同：3
> 
> 时间：2012-10-30T19:13:13.863
> 
> 标签：php

在我的 PHP 网页上，我有一个全局数组：

```
$test = array(); 
```

然后我调用这个函数：

```
function f () 
{
    global $test;

    init( $test );
    $test['foo'] // Error: undefined index "foo"
} 
```

反过来调用这个函数：

```
function init ( $test )
{
    $test['foo'] = 'bar';
    $test['foo'] // evaluates to'bar'
} 
```

如您所见，我收到一个错误。我添加到内部数组中的“foo”字段`init()`没有保留。为什么会这样？我以为我正在改变 global `$test`inside `init()`，但似乎我没有这样做。这是怎么回事，我怎样才能在里面设置一个`init()`持续存在的“foo”字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:18:10.300

您是按值传递`$test`，`init`而不是按引用传递。内部是一个局部变量`$test`，`init`恰好包含 global 的值`$test`。

您要么需要通过引用传递数组，通过更改`init`函数签名：

```
function init ( &$test )
{
    $test['foo'] = 'bar';
    $test['foo'] // evaluates to'bar'
} 
```

`global $test`中使用`init`。

```
function init ()
{
    global $test;

    $test['foo'] = 'bar';
    $test['foo'] // evaluates to'bar'
} 
```

或者`init`返回数组（这意味着你需要做`$test = init( $test );`）：

```
function init ( $test )
{
    $test['foo'] = 'bar';
    $test['foo'] // evaluates to'bar'

    return $test;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:17:07.403

数组不会自动通过引用传递。所以 init $test 是数组的副本。

您要么需要[通过引用传递它，](http://php.net/manual/en/language.references.pass.php)例如。

```
function init (&$test) { 
```

或者更好的方法是从 init 返回它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T19:17:27.537

如果要修改它，则必须通过引用传递变量：

```
function init ( &$test )
{
    $test['foo'] = 'bar';
    $test['foo'] // evaluates to'bar'
} 
```

# iphone - Xcode 从一个视图移动到另一个视图

> ID：13146088
> 
> 赞同：0
> 
> 时间：2012-10-30T19:13:16.180
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我在 Xcode 中编码，但在视图之间移动时遇到问题（xib 到 xib） 我的 xib 文件都有一个个人 .h 和 .m 文件。

这是我的代码：

在这种情况下，从第一个视图转到测验视图的代码：

```
-(IBAction)switchviewMainToQuiz:(id)sender {

    ViewControllerQuiz *quizView = [[ViewControllerQuiz alloc] initWithNibName:nil bundle:nil];

    [self presentModalViewController:quizView animated:YES];

} 
```

从一个视图返回到我的第一个视图的代码：

```
-(IBAction)switchviewQuizToMain:(id)sender {
    [self dismissModalViewControllerAnimated:YES];

} 
```

问题是第二个代码只是返回，有时会在应用程序中出现错误或失败。因此，当我转到其他视图然后想要返回时，它经常会卡住。那么有人有其他代码来切换视图，或者可能有其他解决方案吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:00:26.457

我不会在 IBAction 中创建新的 viewController。对我来说，我会这样做：

1 使用 viewController 创建属性：

```
@property(nonatomic, strong) UIViewController *quizView ; 
```

2 合成：

```
@synthesize quizView = _quizView; 
```

3 创建方法：

```
- (UIViewController *) quizView {
    if (_quizView == nil) {
        _quizView = [[ViewControllerQuiz alloc] initWithNibName:nil bundle:nil];
    }
    return _quizView;
} 
```

4 在您的 IBAction 中：

```
-(IBAction)switchviewMainToQuiz:(id)sender {
    [self presentModalViewController:self.quizView animated:YES];
} 
```

# javascript - 脚本未在 IE 8 中加载

> ID：13146094
> 
> 赞同：0
> 
> 时间：2012-10-30T19:13:45.737
> 
> 标签：javascript, internet-explorer

我的以下内容在 Chrome/Safari/Firefox 中加载良好，但无法在 IE 8 中启动。知道有什么问题吗？

```
function loadScript() {

var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&' +
    'callback=initialize';
document.body.appendChild(script);
}

window.onload = loadScript; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T18:04:43.497

```
function loadScript() {

var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&' +
    'callback="initialize"'; // added quotes around "initialize"
document.body.appendChild(script);
}

window.onload = loadScript; 
```

# ruby-on-rails - Mongoid 填写引用的 id

> ID：13146095
> 
> 赞同：2
> 
> 时间：2012-10-30T19:13:50.887
> 
> 标签：ruby-on-rails, ruby, autocomplete, mongoid

我正在为我的 rails 应用程序构建一个自动完成功能。输入表单在 keypress 上进行 ajax 调用，然后在 rails 中调用此搜索方法

```
def search
    search = Regexp.new(params[:name])
    @users = User.where(:name=>search)

    render :json => @users
  end 
```

一切正常......但是，用户有一堆字段是其他集合的外键。

例如，这些字段之一是用于 rolify。`role_ids`看起来像`"role_ids" : [ObjectId("508eee5afa0d00b818000001"), ObjectId("508eee92fa0d00b818000002")]`which 每个映射到类似的东西`administrator`或`moderator`

我想要做的是用角色集合中的实际文档替换这些 id。我知道我可以手动填写它，但我希望 Mongoid 可以通过某种方式自动填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:22:26.467

我自己没有使用过 Mongoid，但是使用 ActiveRecord 你会这样做：

```
render :json => @users, :include => [:roles] 
```

这当然需要您的`User`模型具有`roles`关联集。

希望这也与 Mongoid 相关。

# ios - alertView:didDismissWithButtonIndex: 消息发送到解除分配的实例

> ID：13146101
> 
> 赞同：0
> 
> 时间：2012-10-30T19:14:12.297
> 
> 标签：ios, uialertview, ios4

这个问题只发生在 iOS4.3 上。我正在使用 ARC，我的 Base SDK 是 iOS6。

在`-viewDidAppear`我的视图控制器中，我检查这是否是应用程序第一次启动，如果是，则创建并显示一个 UIAlertView。我将该 UIAlertView 分配给`strong`视图控制器上的一个属性，并将 self 设置为 UIAlertView 委托。

```
self.uiAlertView = [[UIAlertView alloc] initWithTitle:@"Welcome!"
                                              message:messageString 
                                             delegate:self
                                    cancelButtonTitle:@"OK"
                                    otherButtonTitles:@"View Tutorial Videos", @"Email Support", nil]; 
```

当我点击其中一个按钮时，应用程序崩溃并抱怨`-alertView:didDismissWithButtonIndex:`发送到已释放的实例。委托是显示 UIAlertView 的视图控制器。

在应用程序的所有后续启动中，当 UIAlertView 未显示时，没有问题。视图控制器绝对没有被释放。

如果我显示 UIAlertView 但将委托设置为 nil，则没有问题，应用程序继续工作，很明显，视图控制器没有被释放，因为我可以继续使用它。

怎么了？这只会导致 iOS4.3 出现问题。

编辑：根据评论中的建议，我在不同的地方添加了更多日志消息。

我发现视图控制器正在被释放，但前提是该视图控制器显示 UIAlertView。究竟是什么会导致视图控制器因为它将自己设置为 UIAlertView 的委托然后显示它而被解除分配？

我的应用程序委托有`strong`对视图控制器的引用，所以我绝对没有理由看到视图控制器被释放。

* * *

编辑2：我发现在启动期间我的主视图控制器被实例化了两次。第一个是创建 UIAlertView 的那个，那个正在被释放。第二个是我之后能够与之交互的那个，它让我认为视图控制器仍然存在并且可以操作。

但是，我无法弄清楚我的视图控制器在哪里或为什么会被创建两次。我没有任何用于视图控制器的 alloc/init 语句。它只存在于 MainWindow_iPhone.xib 中。

第一次在我的视图控制器上调用viewDidLoad，上面的堆栈帧是[UIViewController view]。在我的视图控制器的第二个实例上第二次调用 viewDidLoad 时，上面的堆栈框架是 [UINib instantiateWithOwner:options:]

* * *

编辑3：我已经“解决”了这个问题，但我不明白为什么会发生这种情况。也许你可以帮助我理解。

在我的 MainWindow_iPhone.xib 中，我创建了根视图控制器并将其分配给我的应用程序委托上的 IBOutlet。相反，我从 xib 中删除了视图控制器，并在`-application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`...中的代码中创建了它，问题就消失了。

为什么在 xib 中视图控制器会被创建两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T19:46:51.870

我以前有这个问题。alertView:didDismissWithButtonIndex: 在 alertView: clickedButtonAtIndex: 之后调用。您很可能通过执行 [self.navigationController popViewControllerAnimated:YES] 之类的操作来取消分配 alertView:clickedButtonAtIndex 中的视图控制器。

UIAlertView 委托分配非弱引用。当委托被释放时，它不会自动设置为 nil。这就是您的代码崩溃的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T01:39:48.330

我修复了这个问题，评论这个方法（或删除它）。

```
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSLog(@"se apreto cancel");
} 
```

正如 James Wang 所说，在 clickedButtonAtIndex 之后调用了 didDismissWithButtonIndex，所以我对其进行了评论以避免崩溃。

# ios - iOS 中的 NSDateFormatter

> ID：13146104
> 
> 赞同：1
> 
> 时间：2012-10-30T19:14:25.557
> 
> 标签：ios, nsstring, twitter, nsdate, nsdateformatter

我正在使用 Twitter API 来下载推文的数量，因为我在我的 iOS 应用程序中需要它们。我正在使用[此功能](https://api.twitter.com/1/statuses/user_timeline.xml?screen_name=user_name)来执行此操作。问题是我需要知道写推文的日期、月份和年份。

回来的日期是这样的：

```
Thu Oct 25 10:34:58 +0000 2012 
```

但我需要这样格式的日期：

```
25/10/2012 10:34 
```

所以，我想将第一种格式转换为第二种格式。我试过用 NSDate 和 NSDateFormatter 来做，用第一个 NSString 获得一个 NSDate，然后在第二个 NSString 中转换这个 NSDate，但我没有得到它。

```
 NSArray *dateArray = [tweets valueForKey:@"created_at"];
    NSString *dateString = [dateArray objectAtIndex:0];   // Thu Oct 25 10:34:58 +0000 2012

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];

    NSDate *date = [dateFormatter dateFromString:dateString];
    NSLog(@"%@", date);

    [dateFormatter setDateFormat:@"dd/MM/yyyy"];

    NSString *realDateStr = [dateFormatter stringFromDate:date];
    NSLog(@"%@", realDateStr); 
```

两个 NSLog 各自返回 null。

有谁能够帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T11:59:05.507

试试这个简单的方法：

```
NSString* string=@"26-01-2014";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-mm-yyyy"];
NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
[dateFormatter setTimeZone:gmt];

NSDate *date = [dateFormatter dateFromString:string];
NSLog(@"Date = %@",date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:24:37.280

尝试设置最初的日期格式来解析你得到的日期字符串，如下所示：

```
NSString *dateString = @"Thu Oct 25 10:34:58 +0000 2012";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE MMM dd hh:mm:ss Z yyyy"];

NSDate *date = [dateFormatter dateFromString:dateString];
NSLog(@"%@", date);

[dateFormatter setDateFormat:@"dd/MM/yyyy hh:mm"];

NSString *realDateStr = [dateFormatter stringFromDate:date];
NSLog(@"%@", realDateStr); 
```

# unix - Unix 差异文件

> ID：13146106
> 
> 赞同：0
> 
> 时间：2012-10-30T19:14:29.673
> 
> 标签：unix, encoding, character-encoding, diff

我在将 diff 的输出写入文件时遇到了一些麻烦。我有一个新旧版本的 .strings 文件，我希望能够将这两个文件之间的差异写入 .strings.diff 文件。

这是我现在的位置：

```
diff -u -a -B $PROJECT_DIR/new/Localizable.strings $PROJECT_DIR/old/Localizable.strings >> $PROJECT_DIR/diff/Localizable.strings.diff
fgrep + $PROJECT_DIR/diff/Localizable.strings.diff > $PROJECT_DIR/diff/Localizable.txt 
```

diff 命令的结果写入 Localizable.strings.diff 没有任何问题，但 Localizable.strings.diff 似乎是一个二进制文件。有没有办法将差异输出到 UTF-8 编码文件？

请注意，我试图在我的第二个命令中使用 fgrep 来*获取*添加内容。如果有更简单的方法可以做到这一点，请告诉我。

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:40:48.267

首先，您可能需要识别 Localizable.strings 文件的编码。例如，这可以通过[How to find encoding of a file in Unix via script(s)](https://stackoverflow.com/questions/805418/how-to-find-encoding-of-a-file-in-unix-via-scripts)描述的方式完成。

然后可能您需要`iconv`使用类似以下命令的工具将 Localizable.strings 文件转换为 UTF-8：

```
iconv -fx -t UTF-8 $PROJECT_DIR/new/Localizable.strings >Localizable.strings.new.utf8
iconv -fx -t UTF-8 $PROJECT_DIR/old/Localizable.strings >Localizable.strings.old.utf8

```

`x`iconv 识别的形式的实际编码在哪里。您可以使用`iconv --list`它来显示它知道的所有编码。

然后，您可能需要 diff 而不必使用`-a`.

```
diff -u -B Localizable.strings.old.utf8 Localizable.strings.new.utf8 >Localizable.strings.diff.utf8

```

# build - 错误 2 系统找不到 Sublime Text 2 中指定的文件，Windows 8

> ID：13146111
> 
> 赞同：4
> 
> 时间：2012-10-30T19:14:37.360
> 
> 标签：build, compiler-errors, sublimetext2

刚刚安装了 Sublime Text 2，尝试构建 hello world 程序，得到这个消息：

```
[Error 2] The system cannot find the file specified
[cmd:  [u'g++', u'', u'-o', u'/']]
[dir:  C:\Windows\system32]
[path: C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\]
[Finished] 
```

我需要做什么才能在 ST2 中正确编译程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T01:53:45.060

解决了。Sublime Text 2 需要 g++、bash 等才能编译。这些文件 (?) 需要按照此页面上的说明安装在您的计算机中：

[http://www.claremontmckenna.edu/pages/faculty/alee/g++/g++.html](http://www.claremontmckenna.edu/pages/faculty/alee/g++/g++.html)

确保在构建和运行之前将正在处理的文件保存在驱动器上的任何位置。

# asp.net - JSON 不返回与人相关的作业（Visual Studio 2012，MVC）

> ID：13146113
> 
> 赞同：0
> 
> 时间：2012-10-30T19:14:41.180
> 
> 标签：asp.net, asp.net-web-api

嗨，我正在尝试与一个人以及与此人相关的技能返回 JSON。

我有班人

```
public class Person
{
    [Key]
    public int personID { get; set; }
    public string firstName { get; set; }
    public string lastName { get; set; }
    public int age { get; set; }
    public string role { get; set; }
    public virtual ICollection<Skill> Skills { get; set; }

} 
```

还有一个职业技能

```
public class Skill
{
    [Key]
    public int skillID { get; set; }
    public int personID { get; set; }
    public string title { get; set; }
    public virtual Person Person { get; set; }
} 
```

数据库上下文

```
 public class ConsultantContext : DbContext
{
    public DbSet<Person> Persons { get; set; }
    public DbSet<Skill> Skill { get; set; }

} 
```

我用一些数据填充了upp。

公共类PersonInit：DropCreateDatabaseIfModelChanges {受保护的覆盖无效种子（ConsultantContext上下文）{

```
 var skills = new List<Skill>
        {

            new Skill { skillID = 1, personID = 1, title = "Javascript" },
            new Skill { skillID = 2, personID = 1, title = "jQuery" },
            new Skill { skillID = 3, personID = 1, title = "ASP.NET" }
        };
        skills.ForEach(s => context.Skills.Add(s));
        context.SaveChanges();

        var persons = new List<Person>
        {

            new Person { personID = 1, firstName = "Name1",   lastName = "Lastname1", age = 30, role = "Programmer" },
            new Person { personID = 2, firstName = "Name2",   lastName = "Lastname2", age = 30, role = "Designer" },
            new Person { personID = 3, firstName = "Name3",   lastName = "Lastname3", age = 30, role = "Manager" }
        };
        persons.ForEach(s => context.Persons.Add(s));
        context.SaveChanges();

    }

} 
```

我有一个名为 Person 的控制器

```
 public class PersonController : ApiController
{
    private ConsultantContext db = new ConsultantContext();

    // GET api/Person
    public IEnumerable<Person> GetPeople()
    {
        return db.Persons.AsEnumerable();
    }

    // GET api/Person/5
    public Person GetPerson(int id)
    {
        Person person = db.Persons.Find(id);
        if (person == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return person;
    }

    // PUT api/Person/5
    public HttpResponseMessage PutPerson(int id, Person person)
    {
        if (ModelState.IsValid && id == person.personID)
        {
            db.Entry(person).State = EntityState.Modified;

            try
            {
                db.SaveChanges();
            }
            catch (DbUpdateConcurrencyException)
            {
                return Request.CreateResponse(HttpStatusCode.NotFound);
            }

            return Request.CreateResponse(HttpStatusCode.OK);
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    }

    // POST api/Person
    public HttpResponseMessage PostPerson(Person person)
    {
        if (ModelState.IsValid)
        {
            db.Persons.Add(person);
            db.SaveChanges();

            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, person);
            response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = person.personID }));
            return response;
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    }

    // DELETE api/Person/5
    public HttpResponseMessage DeletePerson(int id)
    {
        Person person = db.Persons.Find(id);
        if (person == null)
        {
            return Request.CreateResponse(HttpStatusCode.NotFound);
        }

        db.Persons.Remove(person);

        try
        {
            db.SaveChanges();
        }
        catch (DbUpdateConcurrencyException)
        {
            return Request.CreateResponse(HttpStatusCode.NotFound);
        }

        return Request.CreateResponse(HttpStatusCode.OK, person);
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
} 
```

所以现在解决问题，当我在提琴手中使用 http:/localhost/api/Person 时，它会返回 JSON：

它返回一个空的 []。

有人可以帮我找回带有 personID、姓名、姓氏、角色和技能 [属于此人] 的 JSON。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:23:42.030

尝试这个

```
 public IEnumerable<Person> GetPeople()
    {
        var skills = db.Skill;
        var people = db.Persons;
        people.ForEach(person => person.Skills = skills.FindAll(skill => skill.personID == person.personID));

        return people;
    } 
```

# title - 关于 title/alt 属性

> ID：13146115
> 
> 赞同：10
> 
> 时间：2012-10-30T19:14:51.507
> 
> 标签：title, html, alt

我了解`title`和`alt`属性的用途，但我只是不了解它们的最佳用途，或者我是否可以多次使用相同`title`/`alt`多次。

例如，拿一个关于狗的网站：

据我了解，所有`img`标签都需要一个`alt`属性：

```
<img src="Husky.png" alt="Husky" />
<img src="Rottweiler.png" alt="Rottweiler" /> 
```

**`alt`对同一主题的多张图片使用相同的属性是一种好习惯吗？**

```
<img src="Husky2.png" alt="Husky" />
<img src="Husky3.png" alt="Husky" />
<img src="Husky4.png" alt="Husky" /> 
```

**在每个标签中使用`title`/属性是一种好习惯吗？`alt`如果多次使用相同的属性呢？**

例子：

```
<ol title="This Dog">
  <li title="This Dog"> Dogs </li>
  <li title="This Dog"> Dogs </li>
  <li title="This Dog"> Dogs </li>
  <li title="This Dog"> Dogs </li>
  <li title="This Dog"> Dogs </li>
</ol>

<div id="body">
  <p title="This Dog"> </p> 
  <p title="This Dog"> </p> 
  <p title="This Dog"> </p> 
  <p title="This Dog"> </p> 
</div> 
```

我的理解是，该`title`属性充当将鼠标悬停在文本上时出现的工具提示。这种事情必须在较新的浏览器中完成，但在旧的浏览器中`alt`也`title`曾经做过同样的事情。这些属性还可以作为搜索引擎识别您网站的一种方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T21:47:40.010

> 我的理解是，标题标签在较新的浏览器中充当工具提示/悬停在事物的信息类型上，而 alt 标签用于在旧浏览器中执行相同的操作。

不，`title`and`alt`属性具有不同的含义/目的（不是旧方法与新方法）。

* * *

## 标题

该[`title`属性](https://www.w3.org/TR/2016/REC-html51-20161101/dom.html#the-title-attribute)是一个[全局属性](https://www.w3.org/TR/2016/REC-html51-20161101/dom.html#sec-global-attributes)，这意味着您可以在*所有*元素上使用它。通常（请注意，某些元素（例如`abbr`元素）具有特殊含义）它被定义为：

> 该`title`属性表示元素的咨询信息 […]

您应该阅读属性的定义，它解释了应该（不）如何使用它。

## alt

该`alt`属性只能用于[`area`](https://www.w3.org/TR/2016/REC-html51-20161101/semantics-embedded-content.html#the-area-element), [`input`](https://www.w3.org/TR/2016/REC-html51-20161101/sec-forms.html#the-input-element)（用于图像按钮）和[`img`element](https://www.w3.org/TR/2016/REC-html51-20161101/semantics-embedded-content.html#the-img-element)。对于`img`，它具有以下[含义](https://www.w3.org/TR/2016/REC-html51-20161101/semantics-embedded-content.html#element-attrdef-img-alt)：

> 该`alt`属性的值是`img`元素的后备内容，并为无法处理图像或禁用图像加载的用户和用户代理提供等效内容。

您应该（不）如何使用此属性有[很多规则。](https://www.w3.org/TR/2016/REC-html51-20161101/semantics-embedded-content.html#alt-text)

* * *

因此，该`alt`属性是图像的**替代品**：*您*看到图像*或*阅读替代文本。该`alt`值不应*作为*图像的附加值给出/呈现。

该`title`属性提供了*附加*信息，这些信息将提供给两者（查看图像的用户*和*阅读替代文本的用户）。但是，您不应该将`title`属性用作获取重要信息的唯一手段，因为……</p>

*   ... 典型的演示通常“隐藏”在工具提示后面（用户不一定知道工具提示存在，因为他们不会将鼠标悬停在所有元素上）
*   …键盘或触摸屏用户通常根本看不到工具提示，因为他们无法悬停
*   …屏幕阅读器通常不读取/宣布`title`值（在默认设置中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-06T07:45:07.983

**ALT：** Alt 文本意味着那些选择在浏览器中禁用图像的人和那些根本无法“看到”图像的用户代理的替代信息源。它应该描述图像是关于什么的，并让那些有兴趣看到它的访问者。没有 alt 文本，图像将显示为空图标：没有 alt

在 Internet Explorer 中，当您将鼠标悬停在图像上时，Alt 文本也会弹出。另外，谷歌官方确认它在试图理解图像的含义时主要关注替代文本。

带有 alt 但图像未显示的图像。

```
<img src="a.png" alt="Ann Smarty"> 
```

![在此处输入图像描述](../Images/3cfd2d1b04f026260fd4f1b048e252a5.png)

另一个没有 alt 和图像的图像未显示。

```
<img src="a.png"> 
```

![在此处输入图像描述](../Images/db5b0fbb03536e0f199dc45fa1221986.png)

**标题：** 图片标题（元素名称不言自明）应该提供附加信息并遵循常规标题的规则：它应该是相关的、简短的、吸引人的和简洁的（标题“提供有关它所针对的元素的咨询信息已设置“）。在 FireFox 和 Opera 中，当您将鼠标悬停在图像上时它会弹出：带有标题和显示图像的图像。

```
<img src="a.png" title="Optimize Images For Search Engines, Social Media"> 
```

![在此处输入图像描述](../Images/9e3492ab938f1a753f8cd1525b4ca8b3.png)

阅读更多：[http ://www.searchenginejournal.com/image-alt-text-vs-image-title-whats-the-difference/](http://www.searchenginejournal.com/image-alt-text-vs-image-title-whats-the-difference/)

# ios - 如何为 iPhone 5 显示器加载 xib

> ID：13146117
> 
> 赞同：3
> 
> 时间：2012-10-30T19:15:03.817
> 
> 标签：ios, tabs, xib

我有一个使用 IB 创建的应用程序，带有一个标签栏和几个标签，其中一个标签视图的背景图像无法自动调整大小（拉伸）。该视图有十几个隐藏在背景后面的按钮，并且按钮的位置必须根据背景进行更改。

我正在考虑复制 XIB 文件并编辑 XIB 以选择 568 像素背景图像并相应地重新定位页面下方的按钮。然后在运行时我想添加代码以在 iPhone 5 上选择 568 像素（iPhone x/5 选择不是问题）”。

最后一件事，我想使用相同的视图控制器和连接（如果可能的话），因为所有代码都是通用的。有可能这样做吗？如何创建 XIB 并使其在选项卡选择时可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:33:02.897

You can check the height of the screen, and programmatically choose which xib you want to use:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    MyFirstViewController *vc1 = nil;
    MySecondViewController *vc2 = nil;

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        CGSize screenSize = [[UIScreen mainScreen] bounds].size;
        if(screenSize.height == 568) {
            vc1 = [[MyFirstViewController alloc] initWithNibName:@"LargeFirstViewController" bundle:nil];
            vc2 = [[MySecondViewController alloc] initWithNibName:@"LargeSecondViewController" bundle:nil];
        }
        if(screenSize.height == 480) {
            vc1 = [[MyFirstViewController alloc] initWithNibName:@"SmallFirstViewController" bundle:nil];
            vc2 = [[MySecondViewController alloc] initWithNibName:@"SmallSecondViewController" bundle:nil];
        }
    }
    else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        // ... Add iPad code here if relevant.
    }

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[vc1, vc2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

To change the tab bar icon image programmatically edit the following in your view controller (replace "YOUR-IMAGE" with the actual name... do not put the extension (such as .png)):

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.tabBarItem.image = [UIImage imageNamed:@"YOUR-IMAGE"];
    }
    return self;
} 
```

When you create a new xib file, don't forget to select the "File Owner" (under "Placeholders") and set the "Custom Class" to the actual view controller class in the Attributes Inspector. Also, while the "File Owner" is selected, go to the "Connections Inspector" and drag the "view" outlet to the top level view of your xib.

# android - 用线程间隔重绘视图

> ID：13146119
> 
> 赞同：3
> 
> 时间：2012-10-30T19:15:20.290
> 
> 标签：android, user-interface, view

我需要自定义视图中的动画菜单。必须每隔一段时间（大约 10 次）重新绘制它，但它会在线程停止后重新绘制。

```
public void menuShift() {
    Runnable runnable  = new Runnable() {
        public void run() {
            while (TablesActivity.this.view.menuShifting) {
                try {
                    Thread.sleep(100) ;
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                TablesActivity.this.view.timerRefresh() ;
                TablesActivity.this.view.postInvalidate() ;
            }
        }
    } ;
    this.menuShiftThread = new Thread(runnable) ;
    this.menuShiftThread.run() ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:39:04.797

this.menuShiftThread.run(); 是问题，你需要

```
this.menuShiftThread.start() 
```

实际上开始一个新线程。

# sql-server - SQL Server：使用表 2 中的信息查找和更新表 1 中的列

> ID：13146121
> 
> 赞同：1
> 
> 时间：2012-10-30T19:15:33.763
> 
> 标签：sql-server, powershell, scripting

我对这一切都很陌生，并且刚刚开始编写脚本/编程。我搜索了高低并尝试了几件事，但我没有成功。我想要做什么

*   `Table1`有`Column1`
*   `Table2`有`Column2`

这些列中是文件路径。`Column1`文件路径将是`\\\server1\folder\video1.avi`， `Column2`文件路径将是`http://server2/folder/video1.mpg`

我想要做的是查询`Table1`并`Table2`匹配文件名，在这种情况下`video1`。这个文件名总是不同的，因此需要一些东西，以便它自己找到字符串的一部分。匹配完成后，我需要`Table1`进行更新`Column1`，以使其与`Table2.Column2`. 当更改完成并且我的程序的其余部分运行完毕后，其中的所有数据都`Table2`将被删除，但我仍然需要`Table1.Column1`永久更改并且不能恢复到旧的文件路径。

提前感谢您的帮助！

编辑：

这是我们数据库的文件名：

5149__20121030_120839.avi 将转换为 5149__20121030_120839.mpg 在任何给定的时间点，文件名的开头范围从 5100 到 5999，其余部分将随机更改。我目前的设置方式：

我正在获取文件名并将它们保存到 csv 文件中。从那里我将此 csv 文件上传到`Table2.Column2`. 正是在这个时间点，我被困在查询文件路径的一部分以在`Table1.Column1`. 找到一个匹配项，我正在尝试更新整个字符串`Table1.Column1`以匹配我在`Table2.Column2`. 在这一切都说完之后，我将删除`Table2.Column2`所有被移动的文件，并在第二天重新开始。

我一直在搜索并找到了一些可以尝试的东西，但到目前为止还没有运气。我最接近的是：

`UPDATE Table1 SET Table1.Column1 = Table2.Column2 FROM Table1 FULL JOIN Table2 ON Table2.Column2 like '%' + Table1.Column1 + '%'`

每当我运行它时，它都会`Table1.Column1`将所有内容设置为 NULL 而不是替换`Table2.Column2`. 这只是我实验室中的一个测试，看看它是否会起作用，我什至还没有开始研究如何在两个不同的表之间匹配字符串的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:35:27.997

You haven't provided enough information to know how much variation there is in the path and file extension in the two tables, but assuming they are constant, you could do something like this:

First I setup some mock tables and enter values

```
DECLARE @Table1 TABLE(Column1 varchar(200),keyfield varchar(50))
DECLARE @Table2 TABLE(Column2 varchar(200),keyfield varchar(50))

INSERT INTO @Table1
SELECT '\\\server1\folder\video1.avi',''
UNION ALL
SELECT '\\\server1\folder\video27.avi',''

INSERT INTO @Table2
SELECT 'http://server2/folder/video1.mpg',''
UNION ALL
SELECT 'http://server2/folder/video27.mpg','' 
```

Now update the tables like you may need to in order to make this work:

```
UPDATE @Table1 SET keyfield=(REPLACE(REPLACE(Column1,'\\\server1\folder\',''),'.avi',''))
UPDATE @Table2 SET keyfield=(REPLACE(REPLACE(Column2,'http://server2/folder/',''),'.mpg','')) 
```

Start values in Table1

![enter image description here](../Images/f2286c38f56a4af3352aa85e055222a5.png)

Now, I modify the values using the keyField to link the tables

```
UPDATE t1
SET t1.Column1=t2.Column2
FROM @Table1 t1 INNER JOIN @Table2 t2 ON t1.keyfield=t2.keyfield

SELECT * FROM @Table1 
```

You will see that @Table1 now has the full path that was in @Table2

![enter image description here](../Images/4fd05b70c8d549ad0db08803ac25e896.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:15:05.967

这是一个考虑文件路径变化的非常丑陋的查询，可能没有优化，但对于一次性运行并在一个脚本中获取所有内容：

```
UPDATE Table1 
SET Table1.Column1 = Table2.Column2 
FROM Table1 
INNER JOIN Table2 
    ON substring(Table2.Column2, 
                len(Table2.Column2) - CASE charindex('\', reverse(rtrim(Table2.Column2))) WHEN 0 THEN charindex('/', reverse(rtrim(Table2.Column2))) ELSE charindex('\', reverse(rtrim(Table2.Column2))) END + 2, 
                charindex('.', Table2.Column2) - len(Table2.Column2) + CASE charindex('\', reverse(rtrim(Table2.Column2))) WHEN 0 THEN charindex('/', reverse(rtrim(Table2.Column2))) ELSE charindex('\', reverse(rtrim(Table2.Column2))) END - 2 
        )
        = 
        substring(Table1.Column1, 
                len(Table1.Column1) - CASE charindex('\', reverse(rtrim(Table1.Column1))) WHEN 0 THEN charindex('/', reverse(rtrim(Table1.Column1))) ELSE charindex('\', reverse(rtrim(Table1.Column1))) END + 2, 
                charindex('.', Table1.Column1) - len(Table1.Column1) +CASE charindex('\', reverse(rtrim(Table1.Column1))) WHEN 0 THEN charindex('/', reverse(rtrim(Table1.Column1))) ELSE charindex('\', reverse(rtrim(Table1.Column1))) END - 2 
        ) 
```

# visual-studio-2010 - 测试挂起 (ChutzpahTimeoutException)

> ID：13146124
> 
> 赞同：2
> 
> 时间：2012-10-30T19:15:50.063
> 
> 标签：visual-studio-2010, chutzpah

我已经安装了 Chutzpah 并在我的计算机上运行了几次，然后我重新启动并尝试从*Visual Studio*中的扩展程序或*命令*运行时出现这种错误：

```
>chutzpah.console /wait /path C:\Projects\CP\Testing\RESAAS.JavaScriptTestSuite\Specs

Chutzpah Error: Chutzpah.Exceptions.ChutzpahTimeoutException: Timeout occured when running C:\Projects\CP\Testing\RESAAS.JavaScriptTestSuite\Specs\User\RegistrationSpec.js
at Chutzpah.TestRunner.HandleTestProcessExitCode(Int32 exitCode, String inputTestFile) in c:\Dev\chutzpah\Chutzpah\TestRunner.cs:line 217
at Chutzpah.TestRunner.InvokeTestRunner(String headlessBrowserPath, TestOptions options, TestContext testContext, TestRunnerMode testRunnerMode, ITestMethodRunnerCallback callback) in c:\Dev\chutzpah\Chutzpah\TestRunner.cs:line 200
at Chutzpah.TestRunner.<>c__DisplayClass2.<ProcessTestPaths>b__1(PathInfo testFile) in c:\Dev\chutzpah\Chutzpah\TestRunner.cs:line 143
While Running:C:\Projects\CP\Testing\RESAAS.JavaScriptTestSuite\Specs\User\RegistrationSpec.js

Chutzpah Error: Chutzpah.Exceptions.ChutzpahTimeoutException: Timeout occured when running C:\Projects\CP\Testing\RESAAS.JavaScriptTestSuite\Specs\User\SendMessageSpec.js
at Chutzpah.TestRunner.HandleTestProcessExitCode(Int32 exitCode, String inputTestFile) in c:\Dev\chutzpah\Chutzpah\TestRunner.cs:line 217
at Chutzpah.TestRunner.InvokeTestRunner(String headlessBrowserPath, TestOptions options, TestContext testContext, TestRunnerMode testRunnerMode, ITestMethodRunnerCallback callback) in c:\Dev\chutzpah\Chutzpah\TestRunner.cs:line 200
at Chutzpah.TestRunner.<>c__DisplayClass2.<ProcessTestPaths>b__1(PathInfo testFile) in c:\Dev\chutzpah\Chutzpah\TestRunner.cs:line 143
While Running:C:\Projects\CP\Testing\RESAAS.JavaScriptTestSuite\Specs\User\SendMessageSpec.js

=== 0 total, 0 failed, took 0.00 seconds === 
```

如果我在 Visual Studio 中单击一个文件的单个测试并要求它在浏览器中运行，它实际上会正确执行，但由于我们有 100 多个文件，我不能对所有文件使用这种方法。

任何见解将不胜感激。网上找参考书好像挺难的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:47:32.597

在 2.0 版本中有 /timeoutMilliseconds 选项。将此设置为更高的值，默认为 5000 (ms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T20:41:21.417

刚刚跳回 1.4 版（以匹配我的同事）并且错误都消失了，因为我没有使用任何新功能，这很好。

# macos - 如何更简洁地从命令行启动带有标志的 Chrome？

> ID：13146125
> 
> 赞同：32
> 
> 时间：2012-10-30T19:16:10.627
> 
> 标签：macos, command-line, security, webgl, shortcut

我正在开发一个 WebGL 驱动的应用程序，我想从命令行启动这样的 chrome：

```
open -a Google\ Chrome --args --disable-web-security 
```

我只是不想每次都输入。有没有办法轻松地将它变成一个单词命令？如果重要的话，我正在使用mac。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-03T18:42:10.477

只需在您的 .bashrc 或 .bash_profile 中创建一个别名

```
alias ogc='open -a Google\ Chrome --args --disable-web-security' 
```

然后重新加载你的shell。

```
exec $SHELL 
```

现在，每次您`ogc`在终端中键入（或任何您想调用的名称）时，它都会运行完整的命令`open -a Google\ Chrome --args --disable-web-security`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-01T04:25:46.017

这对我有用：

1.  修改 .bash_profile
2.  写下这个别名：

```
别名 cchrome='/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --user-data-dir="/tmp/chrome_dev_session" --disable-web-security'

```

3.  跑

```
执行 $SHELL
```

4.  使用该`cchrome`命令打开一个新的 chrome 窗口并禁用网络安全以解决“访问控制允许来源”问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-20T08:15:35.293

使用终端在 MAC 中使用标志启动 Chrome 的最简单方法是：

`'/Applications/Google Chrome.app/Contents/MacOS/Google Chrome' --disable-features=CrossSiteDocumentBlockingAlways,CrossSiteDocumentBlockingIfIsolating`

`--`上面代码中可以出现的任何过滤器`--disable-features=CrossSiteDocumentBlockingAlways,CrossSiteDocumentBlockingIfIsolating`只是一个示例。

注意：确保在运行之前关闭所有 Chrome 实例。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-11-01T07:47:01.400

为什么不只运行一个网络服务器？打开终端并输入

```
cd folder_with_html_and_assets
python -m SimpleHTTPServer 
```

现在在您的浏览器中运行`http://localhost:8000` 完成后转到终端并按 Ctrl-C

这似乎比禁用您的安全性并冒着获得 pwnd 的风险要好得多。

# node.js - Node.js + Express 传递一个对象

> ID：13146127
> 
> 赞同：2
> 
> 时间：2012-10-30T19:16:15.167
> 
> 标签：node.js, express

我正在构建一个小型 node.js/express 项目，并在 configure.js 中有一个函数，可以在我的 express 应用程序中设置配置选项。例如：

服务器.js

```
var express = require('express');
var server = ('./configure');

var app = express();
server.configure(app); 
```

配置.js

```
exports.configure = function(app) {
  app.set('title', 'Server');
}; 
```

这不起作用，但我希望它解释了我正在尝试做的事情。我想对 server.js 中的应用程序实例进行更改。我该怎么做呢？

编辑：

好的，我想如果我理解为什么这不起作用，我可以让这一切正常工作。是否与回调的时间有关？第二个 console.log() 没有被调用。

配置.js

```
var fs = require('fs');

var StringDecoder = require('string_decoder').StringDecoder;
var decoder = new StringDecoder('utf8');

function configure(app) {

  var config = module.exports = {};

    fs.readFile('config.txt', function (err, data) {
      if (err) throw err;

      config.title = decoder.write(data)
      console.log(config.title)

    });

    if(config.title) console.log(config.title);
    //app.set('title', config.title)
}

module.exports = function (app) {
  configure(app);
}; 
```

服务器.js

```
var express = require('express');
var cfg = require('./configure');
var fs = require('fs');

var app = express()

cfg(app) 
```

（config.txt 是 echo 'server' > config.txt）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:37:37.287

你所拥有的应该真正起作用。

至于您关于使用多个功能的问题，您可以分别导出和调用每个功能。当时间很重要时（例如，如果需要执行未在 中指定的其他设置步骤`configure.js`），这可能很有用：

```
// configure.js

exports.configure = function (app) {
  // ...
};

exports.attachMiddlware = function (app) {
  // ...
}; 
```

```
// server.js

var express = require('express');
var server = require('./configure');

var app = express();
server.configure(app);
server.attachMiddlware(app); 
```

您还可以将单个条目定义`function`为[导出的对象](http://nodejs.org/api/modules.html#modules_module_exports)，该对象调用`configure.js`. 这可以`server.js`通过将维护隔离在以下范围内来保持清洁`configure.js`：

```
function configure(app) {
  // ...
}

function attachMiddleware(app) {
  // ...
}

module.exports = function (app) {
  configure(app);
  attachMiddleware(app)
}; 
```

```
var express = require('express');
var configure = require('./configure');

var app = express();
configure(app); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:34:12.513

我会避免这种情况，只做一个 json 对象：

应用程序.js

```
var cfg = require('./config');
app.set('title', cfg.title); 
```

配置.js

```
var config = module.exports = {};
config.title = 'Server'; 
```

# haskell - 简单的生成器

> ID：13146128
> 
> 赞同：5
> 
> 时间：2012-10-30T19:16:16.203
> 
> 标签：haskell, f#, ocaml, yield, iterate

这段代码来自一篇名为[“Lazy v. Yield”](http://www.cs.indiana.edu/~sabry/papers/yield-pp.pdf)的论文。它是关于一种将数据流的生产者和消费者解耦的方法。我了解代码的 Haskell 部分，但 O'Caml/F# 让我无法理解。由于以下原因，我不理解此代码：

对于将异常作为参数并返回单位的函数，我可以期待什么样的行为？

消费者如何投射到特定的异常中？（这意味着什么？）

什么是消费者的例子？

```
module SimpleGenerators

type 'a gen        = unit -> 'a
type producer      = unit gen
type consumer      = exn -> unit  (* consumer will project into specific exception *)
type 'a transducer = 'a gen -> 'a gen 

let yield_handler : (exn -> unit) ref = 
    ref (fun _ -> failwith "yield handler is not set")

let iterate (gen : producer) (consumer : consumer) : unit = 
    let oldh = !yield_handler in
    let rec newh x =
        try 
            yield_handler := oldh
            consumer x
            yield_handler := newh
        with e -> yield_handler := newh; raise e
    in
    try
        yield_handler := newh
        let r = gen () in
        yield_handler := oldh
        r
    with e -> yield_handler := oldh; raise e 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:31:49.627

我对这篇论文不熟悉，所以其他人可能会更有启发性。在此期间，这里有一些快速的答案/猜测。

类型的函数`exn -> unit`基本上是一个异常处理程序。

异常可以包含数据。它们与多态变体非常相似——即，您可以随时添加新异常，并且它可以充当数据构造函数。

看起来消费者会寻找一个特定的异常来给它想要的数据。其他人它只会重新加注。因此，它只是查看可能异常空间的投影（我猜）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T02:30:41.273

我认为 OCaml 示例使用了一些您通常不会在 F# 中使用的构造和设计模式，因此它非常特定于 OCaml。正如 Jeffrey 所说，OCaml 程序经常将异常用于控制流（而在 F# 中它们仅用于*异常*情况）。

此外，F# 具有非常强大的*序列表达式*机制，可以很好地用于将数据的生产者与数据的消费者分开。我没有详细阅读论文，所以也许他们有更复杂的东西，但 F# 中的一个简单示例可能如下所示：

```
// Generator: Produces infinite sequence of numbers from 'start'
// and prints the numbers as they are being generated (to show I/O behaviour)
let rec numbers start = seq { 
  printfn "generating: %d" start
  yield start
  yield! numbers (start + 1) } 
```

一个简单的消费者可以使用`for`循环来实现，但是如果我们想消费流，我们需要说明要消费多少元素 using `Seq.take`：

```
// Consumer: takes a sequence of numbers generated by the 
// producer and consumes first 100 elements 
let consumer nums = 
  for n in nums |> Seq.take 100 do
    printfn "consuming: %d" n 
```

当您运行`consumer (numbers 0)`代码时开始打印：

```
generating: 0
consuming: 0
generating: 1
consuming: 1
generating: 2
consuming: 2 
```

所以你可以看到生产者和消费者的影响是交错的。我认为这是非常简单而强大的机制，但也许我错过了论文的重点，他们有一些更有趣的东西。如果是这样，请告诉我！虽然我认为惯用的 F# 解决方案可能看起来与上面的非常相似。

# xcode - XCode: Looking for Tween & Morph Object solutions

> ID：13146129
> 
> 赞同：2
> 
> 时间：2012-10-30T19:16:16.017
> 
> 标签：xcode, flash, flash-cs6, tween

I'm currently developing an iPhone app with Xcode. Part of the app requires the morph (or tween) of one shape into another shape. I know that using Adobe Flash Pro CS6 I can export a 'shape tween' to an iOS app using the built in AIR. The problem is that it does not give me any Objective C code that I can use, just a compiled app. That app cannot be inserted into my development, or have items parsed into it.

The Mac app 'FlashCode', converts SWF into Xcode code, but doesn't yet support shape tweens.

Any ideas how to deal with this?

# javascript - Knockout.js will not bind two templates and viewmodels to the same page

> ID：13146130
> 
> 赞同：3
> 
> 时间：2012-10-30T19:16:16.727
> 
> 标签：javascript, html, knockout.js

Here is my markup:

```
<section id="Application">
    <!-- ko ifnot: initialized -->
    <span>Loading...</span>
    <!-- /ko -->
    <ul data-bind="template:{name: 'clientList', foreach:clients}">
    </ul>

    <ul data-bind="template:{name: 'storyList', foreach:stories}">
    </ul>
</section> 
```

Here is my templates (they are in separate files):

```
function IncompleteStoriesViewModel() {
//data
var self = this;
self.initialized = ko.observable(false);
self.stories = ko.observableArray();
(function () {
    $.ajax({
        url: lucidServer.getIncompleteStory(1),
        success: function (data) {
            ko.mapping.fromJS(data, {}, self.stories);
            self.initialized(true);
        }
    });
})();
};

ko.applyBindings(new IncompleteStoriesViewModel());

function ClientViewModel() {
//data
var self = this;
self.initialized = ko.observable(false);
self.clients = ko.observableArray();
(function () {
    $.ajax({
        url: lucidServer.getClients(1),
        success: function (data) {
            ko.mapping.fromJS(data, {}, self.clients);
            self.initialized(true);
        }
    });
})();
};

ko.applyBindings(new ClientViewModel()); 
```

My template files are fine, if I call one or the other in the html, they each work individually, but when I try to get them both to show up, only the first one renders, and the second one throws an error that 'stories is not defined' or 'clients is not defined'

I am sure I need to execute this differently, I just can't figure out how. My goal is to have up to 10-15 viewmodels rendering different templates on the same page.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:36:21.857

您必须创建一个包含所有视图模型的视图模型：

```
function ViewModel(){
    var self = this;

    self.clientViewModel = new ClientViewModel();
    self.storyViewModel = new IncompleteStoriesViewModel();
} 
```

然后将绑定应用到整个页面：

```
ko.applyBindings(new ViewModel()); 
```

并相应地调整html：

```
<section id="Application">
    <ul data-bind="template:{name: 'clientList', foreach: clientViewModel.clients}">
    </ul>

    <ul data-bind="template:{name: 'storyList', foreach:storyViewModel.stories}">
    </ul>
</section> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T19:48:46.840

Artem 的答案可能是更好的方法，但您确实有另一种选择。您可以调用`applyBindings`并使用第二个参数来指定要定位的元素。

```
ko.applyBindings(viewModelA, document.getElementById("one"));
ko.applyBindings(viewModelB, document.getElementById("two")); 
```

这将允许在页面上绑定多个视图模型。

# c# - Balloon pop up over control mouse enter/exit

> ID：13146133
> 
> 赞同：0
> 
> 时间：2012-10-30T19:16:18.333
> 
> 标签：c#, winforms

![enter image description here](../Images/787908cb5abc6c87c96e136440258b9f.png)

Hello,

Above is the program I am writing. On the right panel is basically two custom controls (the blue rectangle area) I created and just added them as controls to the background panel control when this winform program loads.

I used MS paint to draw out the pop up balloon that I want to see when my mouse enter this control's area. I want to do the following:

```
 1\.  If mouse enter the control area, the yellow area balloon pop up and populate with the information of that specific control
   2\.  If mouse move out of the control area, the pop up balloon disappear. 
```

Can this be done with Winform application? I looked around and found out about `Tooltip` class but so far from researching I don't know if it does what I want to do.

I could be wrong but googling around gave me the impress that Tooltip offers very little in term of style. Ideally I want to make this pop up balloon into almost like a border-less pop up window where I can put image , font ect.....at will. Also Tooltip works if you hover over a button or specific field whereas I want the entire control area.

Can this be done? I appreciate if you can point me to any work around if there is one.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:21:52.277

由于您已经实现了自定义用户控件，您可能想再试一次。制作一个具有该样式和颜色的控件，根据其文本更改其大小。您可以从现有的用户控件对象中为其提供信息（例如要显示的文本）。您还可以让鼠标进入/离开代码驻留在您的第一个用户控件中。

如果您不确定如何制作带圆角的矩形，您可以使用图形对象即时制作（将在屏幕上变成位图）或使其在 GIMP 中显示为您希望的样子（或Photoshop，如果你有它）然后使用该图像作为用户控件的背景。使默认背景透明（因此圆角上方的空隙不是灰色的）。如果您制作了预加载的图像，您需要注意您只能在 Y 和 X 方向上等量缩放它。不等比例会使它看起来失真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:30:23.730

我写了一条评论，但我想我会把它扩展成一个完整的答案。这是假设您想要一个不是工具提示的新控件，以实现最大的可定制性。我最近为工作做了类似的事情，作为一个非模态信息弹出窗口，点击后消失。

## 创建自定义弹出表单

您想要的本质上是一个出现在您的表单上的浮动弹出窗口，这意味着您需要定义一个新`Form`对象，而不是 a `UserControl`，因为它实际上不会嵌入到您的其他表单中。

给它一个多行的、不可编辑的文本框，您可以在其中填写您要填充的信息，然后只需在您的`Mouse_Enter`事件中调用表单的新实例。关闭它`Mouse_Leave`。

## 调整风格

您将不得不使用它来让它实际上像一个弹出窗口而不仅仅是一个窗口。我建议将其设置为非模态弹出窗口，并删除边框。您可以编写一个函数来自动调整其大小。我不认为您会希望用户手动调整它的大小。

要研究的其他一些事情将覆盖`CreateParams`基本 Form 对象附带的属性。您可以在不使表单模式化的情况下强制`DropShadows`和表单。`TopMost`覆盖`ShowWithoutActivation`始终返回 true 将防止表单在弹出时窃取焦点。

我不确定您是否可以像样机中那样拉出圆形边缘。也许你可以通过 OnPaint() 函数中的一些魔法来完成它，但我无法告诉你如何去做。

* * *

摆弄它可能有点痛苦，但你可以从中获得一些好的功能和外观。如果您认为使用 ToolTip 类可以接受它，那就去做吧。我花了大约一周的时间才在我想要的地方收到通知（尽管我添加了一些您可能不需要担心的功能）。

### 例子

在相关搜索中查找的一些关键字是`Toast Notification`和`Non-Modal Popup`。这可能有些用处： http:
[//www.codeproject.com/Articles/442983/Android-Style-Toast-Notification-for-NET](http://www.codeproject.com/Articles/442983/Android-Style-Toast-Notification-for-NET)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:19:03.497

您可以在控件上使用 Mouse_Enter 事件吗？

# excel - Printing to file with vbNewLine results in double NewLine

> ID：13146136
> 
> 赞同：1
> 
> 时间：2012-10-30T19:16:32.840
> 
> 标签：excel, vba

I have the following simple line to print a new line to a log file:

```
Print #fileNumber, vbNewLine 
```

However, this results in 2 newlines instead of one. My code does not have any other vbNewLines or anything that would print newlines.

If I do not have this print line, then I print no newlines, so this means this line is printing 2 newlines.

Does anyone have any ideas why?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:31:56.940

刚刚对此进行了测试，并且 Print 总是添加换行符。

因此，简单地使用`Print #fileNumber,`将导致 1 个空白行。

问题是 Print 已经在新行上打印，所以当您添加时，`vbnewline`您会得到 2 行。

# javascript - How to "mark" a UL/LI nav item as "active" based on click?

> ID：13146137
> 
> 赞同：0
> 
> 时间：2012-10-30T19:16:44.033
> 
> 标签：javascript, jquery, html, css

Each `<a` link is an anchor for jQuery to hide(show) certain divs.

I'm using this CSS to handle hover style:

```
ul.textMenu a:hover

{   
    border-bottom: 3px solid #ff5c00;
    margin-bottom: -3px;
} 
```

After the user clicks an item, I want that `border-bottom` to persist. How do I do this?

[![menu](../Images/2f67a9600db47c65840048f544d25d30.png)](https://i.stack.imgur.com/m938K.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:20:18.257

添加一个 CSS 规则

```
ul.textMenu a.clicked

{   
    border-bottom: 3px solid #ff5c00;

} 
```

然后是一些js

```
$('ul.textMenu a').click( function() {
    // Remove the class clicked so that we have only one clicked item
    // Since there might be more than one ul i finde the parent.
    $(this).closest('ul.textMenu').find('a').removeClass('clicked')
    $(this).addClass('clicked');
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:20:35.477

```
jQuery('ul.textMenu a').click(function () {
    jQuery('ul.textMenu a').removeClass('active');
    jQuery(this).addClass('active');
}); 
```

为 ul.textMenu a.active 设置 css 以保持 CSS 边框

# ruby-on-rails - conception issue with a has_many association

> ID：13146138
> 
> 赞同：0
> 
> 时间：2012-10-30T19:16:57.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-many

There is something wrong with my associations.
I want that many VideoPost can refer to the same VideoInformation. I then thought that the foreign key should be in VideoPost so I started with the 2 models you can see below. But I can't access to @video_post.video_information (which seems to make sense since there is no association in VideoPost)
How should I do ? I'm a little confuse here

Thanks for any help !

My VideoPost model :

```
# Table name: video_posts
#
#  id                   :integer          not null, primary key
#  user_id              :integer
#  video_information_id :integer
#  created_at           :datetime         not null
#  updated_at           :datetime         not null
class VideoPost < ActiveRecord::Base
  belongs_to :user

  attr_accessible :video_information_id
end 
```

My VideoInformation model :

```
# Table name: video_informations
#
#  id              :integer          not null, primary key
#  title           :string(255)
#  description     :text
#  keywords        :text
#  duration        :integer
#  video_url       :string(255)
#  thumbnail_small :string(255)
#  thumbnail_large :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
class VideoInformation < ActiveRecord::Base
  has_many :video_posts
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:23:32.500

你应该添加

```
belongs_to :video_information 
```

进入 video_post.rb 因为当你定义关联时，你应该在两个模型中都这样做。

这是您可能想查看[的一些信息](http://guides.rubyonrails.org/association_basics.html)

# objective-c - Creating ManagedObjectContext and merging after concurrent core data update

> ID：13146139
> 
> 赞同：0
> 
> 时间：2012-10-30T19:16:58.960
> 
> 标签：objective-c, ios, multithreading, core-data, nsmanagedobjectcontext

I *know* I'm missing quite a bit here, but I can't find any tutorials with code and it's been driving me nuts.

I have an app that shows items in a table view (pulled from core data) that can be updated via pull-to-refresh. The updater pulls new data from a REST API and stores it in core data, and refreshes the master set of data contained within my TableViewController.

Obviously I would like the pull-to-refresh to be non-blocking, and so I've implemented it within a MOC:performBlock method call. Everything seems to work but I'm randomly getting application crashes when performing database operations within my model and I know it's because I'm managing my MOCs and persistent object model incorrectly. If anyone could point me in the right direction I'd be grateful.

Here's the method that actually performs the data and table refresh. Below I will list a bunch of auxiliary code that may be useful:

```
-(void)refresh {

    NSManagedObjectContext *child = [[NSManagedObjectContext alloc]initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [child setParentContext:self.db];

    [child performBlock:^{
        model = [[CustomersModel alloc] init];
        self.custs = [model getUpdatedCustomers:self.db];
        self.workingSet = self.custs;
        dispatch_async(dispatch_get_main_queue(), ^{

            [super performSelector:@selector(stopLoading) withObject:nil afterDelay:1.0];
        });
    }];
}

-(void)stopLoadingComplete {

    ...
    [self.tableView reloadData];
} 
```

Here's my appdelegate code for setting up MOC, persistent data store etc:

```
- (NSManagedObjectContext *)managedObjectContext
{

    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
} 
```

Here's my app delegate code for assigning MOC to UITableViewControllers:

```
CustomerListViewController *clvc = [[CustomerListViewController alloc] initWithNibName:@"CustomerListViewController" bundle:nil withManagedContext:self.managedObjectContext];
clvc.detailViewController = detailViewController;
UINavigationController *clvcNav = [[UINavigationController alloc] initWithRootViewController:clvc]; 
```

Here's my customer list view controller's code for assigning MOC:

customerlistview.h:

```
#import <UIKit/UIKit.h>
#import "CustomersModel.h"
#import "SearchBarTableViewController.h"

@interface CustomerListViewController : SearchBarTableViewController
{
    CustomersModel *model;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withManagedContext:(NSManagedObjectContext *)db;

@property (retain) IBOutlet UISearchBar *searchBar;
@property (strong, nonatomic)NSManagedObjectContext *db;
@property (strong, nonatomic)NSArray *custs, *workingSet;

@end 
```

customerlistview.m:

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withManagedContext:(NSManagedObjectContext *)passedDB {

    self.db = passedDB;
    return [self initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:22:40.313

我确实要回答这个问题——因为在子上下文完成它的操作之后保存父上下文，我还没有收到一个程序崩溃。

# android - Excluded folders In IntelliJ Idea

> ID：13146141
> 
> 赞同：1
> 
> 时间：2012-10-30T19:17:05.170
> 
> 标签：android, mercurial, intellij-idea

I am using IntelliJ Idea for Android development and IntelliJ uses a folder named `out` for putting APK file.

I am also using Mercurial as VCS and when I clone the project the out folder is left out from the cloned directory.

Also folder out is also not shown in the project structure and when I go to Open Module Settings -> Modules the folder is excluded as shown in the image below

![enter image description here](../Images/819be33db2bd282a9a66f6eb89d0331f.png)

Why out folder is excluded and how to include it in VCS (Mercurial)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:31:23.747

> 为什么 out 文件夹被排除在外

因为这个文件夹不包含源和（我想）IntelliJ 将自己的设置镜像到相关存储库的 .hgignore 文件中

> 如何将其包含在 VCS（Mercurial）中？

只是

# 永远不要这样做

因为构建工件的版本控制是个坏主意，无用，浪费时间和空间 - 只保存源，而不是可重复的结果

但是，如果您想在途中尝试所有机架 - 从 .hgignore 中删除相关字符串。

# c# - Custom Validator for Checkbox List with Callout Extender

> ID：13146146
> 
> 赞同：0
> 
> 时间：2012-10-30T19:17:30.720
> 
> 标签：c#, asp.net, ajax

Having some difficulty with this. The onServerValidate from code behind fires and sets the args.IsValid = false however the Custom Validator doesn't pop-up doesn't display the error on the client side. I am also trying to extend it using the AJAX callout extender.

```
<asp:CustomValidator ID="cvOffenceList" runat="server" 
            ErrorMessage="Please check at least one item on the offence list." 
            Display="None" ForeColor="#CC0000" 
            onservervalidate="cvOffenceList_ServerValidate" 
            >*</asp:CustomValidator>
        <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender2" runat="server" 
            TargetControlID="cvOffenceList">
        </asp:ValidatorCalloutExtender>
        <asp:CheckBoxList ID="cbOffenceList" runat="server" >
            <asp:ListItem>Items1</asp:ListItem>
            <asp:ListItem>Items2</asp:ListItem>
            <asp:ListItem>Items3</asp:ListItem>
        </asp:CheckBoxList>

protected void cvOffenceList_ServerValidate(object source, ServerValidateEventArgs args)
{
    args.IsValid = false;
    // Iterate through the Checkbox List and see if any items are checked
    for (int j = 0; j < cbOffenceList.Items.Count; j++)
    {
        if (cbOffenceList.Items[j].Selected)
        {
            // If any item is checked then validation is set to true
            args.IsValid = true;
        }
    }
}

protected void btnSubmitCase_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        // Store Session Variables for further use

        // Insert Case Info to Table

        // Check if Image has a file
    }
} 
```

# php - ImageMagick getImageLength() not found

> ID：13146154
> 
> 赞同：1
> 
> 时间：2012-10-30T19:18:06.830
> 
> 标签：php, imagemagick, imagick

Initially, I used getImageSize but an error message informed me it was deprecated, and to use getImageLength instead. Then I get this error.

```
Call to undefined method Imagick::getImageLength() 
```

I'm using imagick 3.01 and ImageMagick 6.2.8.0 on CentOS 5.8\. I upgraded imagick to the 3.1 RC2, but the error persisted. I reinstalled ImageMagick and ImageMagick-devel and still no luck. I used yum to install ImageMagick, and then pecl to install imagick.

Any advice? Thanks.

Pastebin data from get_class_methods dump

[http://pastebin.com/MUkDBJpY](http://pastebin.com/MUkDBJpY)

Version info is below

```
array(2) {
  ["versionNumber"]=>
  int(1576)
  ["versionString"]=>
  string(79) "ImageMagick 6.2.8 05/07/12 Q16 file:/usr/share/ImageMagick-       6.2.8/doc/index.html"
} 
```

# asp.net-mvc - 切换到 Windows 身份验证时无法获取 NHibernate 会话

> ID：13146155
> 
> 赞同：1
> 
> 时间：2012-10-30T19:18:06.327
> 
> 标签：asp.net-mvc, nhibernate, s#arp-architecture

我正在尝试将工作的 S#arp Architecture MVC 应用程序从具有网络服务身份的应用程序池切换到具有域用户身份的应用程序池。我在 Web 服务器中的用户上运行 aspnet_regiis 并授予用户访问数据库的权限（甚至尝试将其设置为数据库中的系统管理员）。但是，它似乎无法获得 NHibernate 会话。

```
Exception information: 
Exception type: NullReferenceException 
Exception message: Object reference not set to an instance of an object. 

Request information: 
Request URL: http://<redacted> 
Request path: /<redacted> 
User host address: 10.10.10.10
User: <webuser>
Is authenticated: True 
Authentication Type: Forms 
Thread account name: <MYDOMAIN\MYUSER> 

Thread information: 
Thread ID: 1 
Thread account name: <MYDOMAIN\MYUSER> 
Is impersonating: False 
Stack trace:    at SharpArch.Data.NHibernate.NHibernateSession.get_Current() in C:\MyStuff\Dev\Projects\SharpArchitecture\src\SharpArch\SharpArch.Data\NHibernate\NHibernateSession.cs:line 88
at UserAccount.Persistence.UserRepository.GetByPropertiesPartialMatching(IDictionary`2 exactMatchPropertyValuePairs, IDictionary`2 partialMatchPropertyValuePairs, MatchMode matchMode) in c:\Persistence\UserRepository.cs:line 66
... 
```

在 SharpArch NHibernateSession.cs 中给出 Null 引用异常的实际行是：

```
ISession session = Storage.Session; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:37:54.697

Clear your temp files on the server. I know it sounds crazy, but S# does file caching on the config.

I've done this several times, but have never seen the problem you are reporting. Do ANY of your calls to repositories (any of them) succeed or all but this one?

Here is what is sticking out to me. Your application spins up. If it had a connection issue, it would not be able to spin the application up. That is leading me to believe you might have another issue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:26:35.163

这个问题的根本原因是在此之前实际上存在另一个异常，即 NHibernate“无法编译映射文档”。原因是 .NET XMLSerializer 需要对 c:\windows\temp 进行写访问。我右键单击此文件夹并添加了具有修改权限的应用程序池身份（域用户）。那时就修好了。这在[NHibernate MappingException 中都有解释：无法编译映射文档](https://stackoverflow.com/questions/3253853/nhibernate-mappingexception-could-not-compile-the-mapping-document/3254368#3254368)

（所以它确实与临时文件有关，Alec。）

# objective-c - 将 integerValue 插入字典

> ID：13146157
> 
> 赞同：3
> 
> 时间：2012-10-30T19:18:08.640
> 
> 标签：objective-c, ios, dictionary, integer, xcode4.5

我想从文本字段中获取一些值并转换为整数。

```
NSMutableDictionary* dic = [[NSMutableDictionary alloc]init];
[dic setValue:txtTable.text forKey:@"Table"]; 
```

我尝试使用它，但它不起作用：

```
[dic setValue:[txtTable.text integerValue] forKey:@"Table"]; 
```

感谢帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:20:40.873

您需要将整数值包装在 NSNumber 值中。

```
NSInteger val = [txtTable.text integerValue];
NSNumber *num = [NSNumber numberWithInteger:val];
[dic setObject:num forKey:@"Table"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:30:46.310

```
NSInteger intVal = [txtTable.text integerValue];
dict[@"Table"] = @(intVal); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:19:32.640

使用`NSNumber`. 它可以包装一个整数值，并且可以添加到`array`或中`dictionary`。

**更新：** `NSNumber`是从`NSValue`. 因此，您可以使用它来包装它，如某些答案中所述，

```
[dic setValue:[NSNumber numberWithInteger:[txtTable.text integerValue]] forKey:@"Table"]; 
```

这可以添加到数组或字典中。要取回它，您可以使用`[[dic valueForKey:@"Table"] integerValue]`.

用于包装`CGRect`，`CGSize`或者`CGPoint`您可以使用[`NSValue`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:20:53.357

做这个：

```
[dic setValue:[NSNumber numberWithInt:[txtTable.text integerValue]] forKey:@"Table"]; 
```

# c++ - C++ 自由函数。向量排序和问题

> ID：13146161
> 
> 赞同：0
> 
> 时间：2012-10-30T19:18:20.470
> 
> 标签：c++

> **可能重复：**
> [使用我自己的函数进行 C++ 向量排序](https://stackoverflow.com/questions/13145370/c-vector-sorting-with-my-own-function)

C++ 自由函数。向量排序和问题

[我尝试根据我最近从这里的一位专家那里](https://stackoverflow.com/a/13145894/845092)收到的回复创建一个免费函数。

我所做的是在我的 main.cpp

我在 main.cpp 创建了这个函数

```
template<typename T> bool compareByArea(const T &a, const T &b) {
    return a.getArea() < b.getArea();
} 
```

我实际上在我的 main.cpp 中得到了这个

```
sortVector.assign(vehicletwod, vehicletwod + arrayCounter);
sort(sortVector.begin(),sortVector.end(),sortVector[0].compareArea); 
```

我的程序中有 1 个父类和 2 个子类

```
Parent: Vehicle
Child: Car & Lorry 
```

汽车和货车有一个

```
private: 
double area;
public:
double getArea(); 
```

**我想要实现的目标**

我正在尝试通过 compareByArea 对向量进行排序，其中较小的区域将在最高处排序，而较大的 1 将在底部。

问题是 getArea 是 Car & Lorry （子类）的函数，我在 main.cpp 创建了这个 compareByArea

sortVector 是 vehicletwod 的向量副本

我为我的车辆设定价值的方式是这样的..

```
if(vehicleType=="Car")
{
vehicletwod[arrayCount] = new Car();
vehicletwod[arrayCount].setDimension();
//set area
vehicletwod[arrayCount].setArea();
cout << "Done setting the data";
} 
```

我如何实现按区域升序排序。

编译错误：

```
no matching function for call to 'sort(std::vector<VehicleTwoD*>::iterator, std::vector<VehicleTwoD*>::iterator, <unresolved overloaded function type>)'

note: template<class _RAIter> void std::sort (_RAIter, _RAIter)
note: template<class _RAIter, class _Compare> void std::sort(_RAiter, _RAIter, _Compare) 
```

感谢大家的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:59:28.217

这是一个使用自由函数进行排序的小例子。它并没有完全反映你的类设计，主要是因为它没有真正的意义。如果您要存储指向基类的指针，那么您将需要有`GetArea`可从该基指针调用的函数。如果它是相同的类型，那么将区域存储在每个孩子中也是没有意义的，只需将其放在基础中，这样您就不会重复代码。

```
#include <algorithm>
#include <iostream>
#include <string>
#include <vector>

class Vehicle
{
public:
    Vehicle(double Width, double Height)
        : Area(Width*Height) {}

    double GetArea() const { return Area; }

private:
    double Area;
};

class Lorry : public Vehicle
{
public:
    Lorry(double Width, double Height)
        : Vehicle(Width, Height) {}
};

class Car : public Vehicle
{
public:
    Car(double Width, double Height)
        : Vehicle(Width, Height) {}
};

bool CompareVehiclesByArea(const Vehicle* lhs, const Vehicle* rhs)
{
    return lhs->GetArea() < rhs->GetArea();
}

typedef std::vector<Vehicle*> VehicleVec;

void PrintVehicles(const std::string& Header, const VehicleVec& Vehicles)
{
    std::cout << Header << std::endl;
    for(size_t Index = 0; Index < Vehicles.size(); ++Index)
    {
        std::cout << "Index: " << Index << ", Area: " << Vehicles[Index]->GetArea() << std::endl;
    }
}

int main()
{
    VehicleVec Vehicles;
    Vehicles.push_back(new Car(1.0, 2.0));
    Vehicles.push_back(new Car(3.0, 4.0));
    Vehicles.push_back(new Lorry(1.5, 2.5));
    Vehicles.push_back(new Lorry(3.5, 4.5));

    PrintVehicles("Before:", Vehicles);
    std::sort(Vehicles.begin(), Vehicles.end(), CompareVehiclesByArea);
    PrintVehicles("After:", Vehicles);

    //Cleanup omitted for brevity
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:00:24.190

看起来问题是您使用*指针*向量，但通过`compareByArea`. 但它的参数实际上被解析为**对对象指针的引用**，而不是对对象的引用。

正确方法：

```
// Note - parameter types are pointers, not references
template<typename T> bool compareByArea(const T* a, const T* b)
{
   return a->getArea() < b->getArea(); // getArea() must be const!
}

typedef std::vector<VehicleTwoD*> VehicleTwoDVec;

// Old good way
sort(sortVector.begin(), sortVector.end(),
  &compareByArea<VehicleTwoDVec::value_type>);

// "Advanced" C++11 way
sort(sortVector.begin(), sortVector.end(), 
  &compareByArea<std::remove_reference<decltype(sortVector.front())>::type>); 
```

但是问自己两次——你真的需要`compareByArea`成为模板吗？它使事情复杂化，但不能解决代码中的任何问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T19:36:00.053

`sort(sortVector.begin(), sortVector.end(), sortVector[0].compareArea);`是不正确的。

您可以通过切换到

```
sort(sortVector.begin(), sortVector.end(), &compareArea<decltype(*sortVector.begin())>); 
```

更好的解决方法是问问自己是否需要模板，因为看起来您只是在比较一种已知类型。

# c++ - 奇怪的未解决的外部编译 DLL

> ID：13146162
> 
> 赞同：1
> 
> 时间：2012-10-30T19:18:21.030
> 
> 标签：c++, windows, dll, unresolved-external, most-vexing-parse

我正在尝试按照此站点上的说明进行操作：http: [//support.microsoft.com/kb/q168958](http://support.microsoft.com/kb/q168958)

这是代码：

```
#include <windows.h>
#include <malloc.h>

namespace Test {

template<class TYPE> class TestBuffer
{
  private:
    TYPE*   m_pData;
    size_t  m_uSize;

  public:
    TestBuffer(size_t uSize) : m_pData(NULL), m_uSize(0)
    {
      m_pData = (TYPE*)malloc(uSize * sizeof(TYPE));
    }

    ~TestBuffer() { if (NULL != m_pData) free(m_pData); }

  public:
    bool IsValid() const { return NULL != m_pData; }
    operator TYPE*() const { return m_pData; }
};

template class __declspec(dllexport) Test::TestBuffer<wchar_t>;

__declspec(dllexport) bool GetCurrentDir(char* szDir, size_t uSize)
{
  DWORD dwRequiredSize = ::GetCurrentDirectoryW(0, NULL);
  Test::TestBuffer<wchar_t> wideCharBuffer(size_t(dwRequiredSize));

  bool bResult = (dwRequiredSize - 1 == 
    ::GetCurrentDirectoryW(dwRequiredSize, (wchar_t*)wideCharBuffer));

  wcstombs(szDir, (wchar_t*)wideCharBuffer, uSize);

  return bResult;
}

} // namespace Test

BOOL WINAPI DllMain(HMODULE hModule, DWORD dwReason, LPVOID lpReserved)
{
  char szPath[MAX_PATH] = { 0 };
  Test::GetCurrentDir(szPath, MAX_PATH);

  return TRUE;
} 
```

将其放入 VS 中的 WIN32 DLL 项目中会出现以下错误：

```
error LNK2019: unresolved external symbol "class Test::TestBuffer<wchar_t> __cdecl wideCharBuffer(unsigned int)" (?wideCharBuffer@@YA?AV?$TestBuffer@_W@Test@@I@Z) referenced in function "bool __cdecl Test::GetCurrentDir(char *,unsigned int)" 
```

我不确定为什么链接器找不到定义，因为所有内容都在那里定义，以及 TestBuffer 的导出语句。此外，在示例中，我什至不需要导出 TestBuffer 的显式实例化，因为它没有在 DLL 接口中公开，只有 GetCurrentDir() 是。

关于为什么没有为 TestBuffer 生成代码以便链接器可以找到它的任何猜测？

PS 这是一个人为的例子来演示这个问题，而不是实际的生产代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:30:55.810

编译器将声明`wideCharBuffer`视为函数声明（[最令人头疼的解析](https://stackoverflow.com/questions/1424510/most-vexing-parse-why-doesnt-a-a-work)）。尝试将其更改为：

```
Test::TestBuffer<wchar_t> wideCharBuffer((size_t(dwRequiredSize))); 
```

# python - Python SMTP，Gmail 没有响应

> ID：13146163
> 
> 赞同：0
> 
> 时间：2012-10-30T19:18:26.077
> 
> 标签：python, email, smtp, smtplib

当我尝试连接到 Gmail 服务器时，python 会抛出一个错误：

```
>>> from smtplib import SMTP
>>> m = SMTP('smtp.gmail.com', 587)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\smtplib.py", line 249, in __init__
    (code, msg) = self.connect(host, port)
  File "C:\Python27\lib\smtplib.py", line 309, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "C:\Python27\lib\smtplib.py", line 284, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "C:\Python27\lib\socket.py", line 571, in create_connection
    raise err
socket.error: [Errno 10060] 
```

输出的其余部分是不同的语言，但它基本上表示主机 (gmail) 没有响应。

我可以在工作时在浏览器上看到我的电子邮件，可能是网络配置不允许我自动发送电子邮件。

有没有办法让 python 充当常规浏览器？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-30T21:47:38.097

首先，您只能通过某种形式的身份验证作为客户端访问 gmail 的 SMTP 服务器；推荐的方法是使用 oauth。有关详细信息，请参阅[此页面](https://developers.google.com/google-apps/gmail/xoauth2_libraries)和[此](http://code.google.com/p/google-mail-oauth2-tools/wiki/OAuth2DotPyRunThrough)页面。因此，即使您解决了这个问题，您的代码也不会工作。

但是，这并不能解释为什么它甚至在您有机会登录之前就拒绝您的连接。

最可能的可能性是 gmail 的路由器正在维护 IP 的动态白名单。当您使用其他类型的正确登录连接时，您会被添加到白名单 N 秒，这意味着您可以连接到端口 587；否则，你会被拒绝。这将类似于传统的 SMTP-after-IMAP 身份验证方案，但不限于 IMAP，并在路由器而不是 SMTP 服务处处理（可能是为了降低成本或使 DoS 攻击更加困难）。

有一个很好的测试方法：配置 Outlook、Mail.app 或其他知道如何连接到 gmail 并使用 SMTP 通过 gmail 发送邮件的邮件客户端。在邮件客户端中获取邮件后几秒钟运行您的脚本。如果它有效，那就是问题所在。在这种情况下，解决方法是执行与邮件客户端相同的连接和登录（IMAP？Web 服务？）。

或者，当然，您可以使用谷歌在上述链接中提供的示例代码，而不是从第一原理开始。

（当然，gmail 也必须接受服务器到服务器的 SMTP 连接，但是他们可以很容易地为此使用不同的身份验证方案。我假设您正在尝试进行客户端到服务器的连接，而不是服务器-到服务器。）

另一种可能性是您在某种黑名单上——例如，gmail 认为您的 IP 属于垃圾邮件发送者。这也可能是动态的——可能任何连接到端口 587 但没有正确 oauth 的人在接下来的 N 秒内都会被阻止。无论如何，这也很容易测试：配置 Outlook、Mail.app 等。如果这是问题所在，他们也将无法发送邮件。

还有第三种可能性，即不允许任何人连接到端口 587，而 Google 希望您改用端口 565 或 25。

为了更容易调试，您可能需要考虑编写一个更简单的脚本，它只创建一个套接字并连接，而不是使用 smtplib：

```
import socket
s = socket.socket()
s.connect(('smtp.gmail.com', 587)) 
```

或者，更简单地说，只是命令行中的 netcat：

```
nc smtp.gmail.com 587 
```

要回答您的附带问题：

> 有没有办法让 python 充当常规浏览器？

那不是问题。普通浏览器不建立 SMTP 连接；它使用从 gmail.com 下载的 Javascript 代码建立 Web 服务连接。

当然 Python 也可以建立 Web 服务连接。

并且它可以像“常规浏览器”（例如，User-Agent、Referer 等标头）一样多或少，但这可能不相关——gmail Web 服务 API 是公开的并且具有关于如何验证自己的明确、公开的规则（在这种情况下，您只需按照规则所说的去做），或者它是私人的，除非您想参加军备竞赛，否则您不应该试图欺骗他们使用的任何保护措施。

无论如何，在这种情况下，我们知道它是[public](https://developers.google.com/google-apps/gmail/)，所以我们不必猜测。

# python - 需要解决方法在 AppFog 上制作 python 独立应用程序

> ID：13146167
> 
> 赞同：2
> 
> 时间：2012-10-30T19:18:41.187
> 
> 标签：python, appfog

在 appFog 网站上阅读了我可以使用 APScheduler 制作 python 后台工作程序后，我试了一下。我尝试使用包含以下行的`requirements.txt`文件（使用创建）推送一个简单的 python 独立应用程序：`pip freeze`

```
APScheduler==2.0.3
MySQL-python==1.2.4b5 
```

但是当将其推送到 appFog 时，出现以下错误：

```
====> /logs/stderr.log <====
Traceback (most recent call last):
  File "testConnectionDB.py", line 3, in <module>
    from apscheduler.scheduler import Scheduler
ImportError: No module named apscheduler.scheduler 
```

所以我猜该`requirements.txt`文件没有被读取。appFog 支持证实了它确实还不支持独立应用程序，即 python 独立应用程序无法在 appfog 上导入库，因此它们的使用非常有限。

所以我想知道是否有人已经有这种经验，是否有人找到了解决方法。我宁愿不要在 ruby​​ 中这样做或切换到另一个平台。有没有办法使用常规的 python 或 django-python 应用程序来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:48:14.073

您是否尝试过在非独立应用程序中启动它（例如添加像 CherryPy 这样的 Web 界面）。这应该允许您编译 requirements.txt 并让您摆脱独立应用程序的问题。

以上是我如何绕过Ruby应用程序的限制:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:53:43.263

**更新：**

我实际上能够解决这个问题，而无需解决从网络应用程序调用我的脚本。我认为这是一个更好且真正独立的解决方法。

它基本上涉及**将您的脚本打包为可执行文件**，然后**创建一个启动器 python 脚本**来调用生成的二进制/可执行文件。

[您可以在我的博客](http://www.mattlebrun.com/programming/how-to-run-a-standalone-python-script-with-dependencies-in-appfog/)上详细了解它。

* * *

我也有同样的问题。我不想通过网络应用程序来调用我的脚本，但这似乎是最好的方法。

我设法用 Flask 做到了，并创建了一条调用我的后台工作脚本的路由。我没有使用 APScheduler，只是很旧`os.system()`，而且看起来足够稳定。

[我在博客](http://www.mattlebrun.com/programming/deploy-and-run-a-python-background-worker-with-dependencies-in-appfog/)上详细写过。

# jquery - 如何停止关于函数的 jQuery 动画已完成

> ID：13146169
> 
> 赞同：0
> 
> 时间：2012-10-30T19:18:48.393
> 
> 标签：jquery, animation

我有一个函数可以增加一个数字并在 56,941 处停止。我还有一个 div 容器，它可以动画到不同的宽度大小。

一旦函数停​​止，我希望 div 容器停止动画。这是我的代码：

```
/****COUNTER****/

jQuery.fn.extend({
      ts : function (from, to, time) {
        var steps = 1,
            self = this,
            counter;

        if (from - to > 0) {
          steps = -1;
        };

        from -= steps;

        function step() {
          self.text(addCommas(from += steps));

          if ((steps < 0 && to >= from) || (steps > 0 && from >= to)) {
            clearInterval(counter);
          };
        };

        counter = setInterval(step, time || 5);
      }
    });

    var total = $('.total').ts(56100,56941);

    /****COMMA***/

    function addCommas(nStr)
    {
      nStr += '';
      x = nStr.split('.');
      x1 = x[0];
      x2 = x.length > 1 ? '.' + x[1] : '';
      var rgx = /(\d+)(\d{3})/;
      while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
      }
      return x1 + x2;
    }

    /****BAR****/

    $('.bar').animate({width: "21%",},5000); 
```

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:22:18.010

把它放在适当的地方，我会说在你清除间隔循环之后......

```
...
clearInterval(counter);
// stop the animation here...
$('.bar').stop();
... 
```

调用[`.stop()`](http://api.jquery.com/stop/)将停止选择器上的所有动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:22:19.973

只需使用该`stop()`功能 - [http://api.jquery.com/stop/](http://api.jquery.com/stop/) - 过早结束 jQuery 动画功能，在您的情况下将是：

```
$('.bar').stop(); 
```

# c - 更有效的并发解决方案

> ID：13146176
> 
> 赞同：1
> 
> 时间：2012-10-30T19:19:08.377
> 
> 标签：c, concurrency, pthreads

我现在正在上一门关于并发的课程，并且我已经完成了我的第一个（非常简单的）项目，现在我想让它变得有用。

在我的代码中，我正在通过一个数组对第二个数组的每个值进行二进制搜索。对于第二个数组中的每个值，我正在生成一个线程。结果证明这比顺序解决方案要慢，所以我的想法是我会产生少量线程并在每次完成执行时向它们传递一个新键。

我有几个问题。首先是，当没有更多键时，如何让线程退出？

我如何传递新密钥？

如何让线程在等待新键时不使用旧键执行（我一直在阅读有关条件等待的内容，并认为这就是我需要的）。

这是我当前（无效）的解决方案。

```
#define ARRAYSIZE 50000
#define KEY_NOT_FOUND -1
#define KEY_FOUND 0

#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>
#include <sys/time.h> 

int binary_search(int *array, int key, int min, int max); 
void *worker(void *arg);

int count = 0;
pthread_mutex_t L;
int l_array[ARRAYSIZE * 2];

int main(void)
{
    int r_array[ARRAYSIZE]; 
    int *p;
    pthread_t *threads;
    int ix = 0;
    int jx = 0;

    struct timeval start, stop;
    double elapsed;

    for(ix = 0; ix < ARRAYSIZE; ix++)
    {
        r_array[ix] = ix;
    }
    for(ix = 0; ix < ARRAYSIZE * 2; ix++)
    {
        l_array[ix] = ix + 2;
    }

    gettimeofday(&start, NULL);

    threads = (pthread_t *) malloc(ARRAYSIZE * sizeof(pthread_t));

    for (jx = 0; jx < ARRAYSIZE; jx++) {
         p = (int *) malloc(sizeof(int));  
        *p = r_array[jx];
        pthread_create(&threads[jx], NULL, worker, (void *)(p));
    }

    for (jx = 0; jx < ARRAYSIZE; jx++) {
        pthread_join(threads[jx], NULL);
    }

    fprintf(stderr, "%d\n", count);

    gettimeofday(&stop, NULL);
    elapsed = ((stop.tv_sec - start.tv_sec) * 1000000+(stop.tv_usec-start.tv_usec))/1000000.0;
    printf("time taken is %f seconds\n", elapsed);
    return 0;
}

void* worker(void *arg)
{
    int boolean = 0;
    int key = *((int *) arg);
    boolean = binary_search(l_array, key, 0, ARRAYSIZE * 2);
    if(boolean == 1)
    {
        pthread_mutex_lock(&L);
        count++;
        pthread_mutex_unlock(&L);
    } 
}

int binary_search(int *array, int key, int min, int max)
{
   int mid = 0;
    if (max < min) return 0;
    else
    {
      mid = (min + max) / 2;
      if (array[mid] > key) return binary_search(array, key, min, mid - 1);
      else if (array[mid] < key) return binary_search(array, key, mid + 1, max);
      else 
        {
        return 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:57:55.370

注意：下面的代码未经测试，但它很容易......

*   将基地址传递`r_array[]`给工人
*   保持全局`next_index`
*   定义另一个`pthread_mutex`

PS：与线程数一样，从 2 开始，直到您发现吞吐量没有差异为止。你也需要考虑所有的开销。

```
void worker(void *arg)
{
    int* r_arrPtr = (int*) arg;
    int boolean = 0;
    int key =0;[

    while (1) {
        pthread_mutex_lock(&pNextIndex_MutEx);
        if (next_index < ARRAYSIZE) {
            key = r_arrPtr[next_index];
            next_index ++;
        } else {
            pthread_mutex_unlock(&pNextIndex_MutEx);
            return;
        }
        pthread_mutex_unlock(&pNextIndex_MutEx);

        boolean = binary_search(l_array, key, 0, ARRAYSIZE * 2);
        if (boolean == 1) {
            // ....
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:35:28.457

我建议建立一个线程池，每个核心一个线程，所以今天 4 或 8 个用于基本桌面。

在[“分而治之”](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)策略的应用程序中，对于每个线程，您都可以通过搜索的一部分来分配工作。在控制器和工作人员之间存在“生产者/消费者”关系：可以使用阻塞队列。工作人员等待作业，控制器将作业排入队列。

“工作”可能是一个包含所有工作信息的结构。

# html - iframe body 删除空间

> ID：13146177
> 
> 赞同：4
> 
> 时间：2012-10-30T19:19:15.473
> 
> 标签：html, iframe, styles, width, margin

我的 iframe 样式为`style="width:100%"`，它几乎覆盖了页面宽度。但它在左侧和右侧留下了很小的余量。所以我添加`body { margin:0px; }`了删除空间。

它有效，但问题是删除边距会影响其他内容`<body>`，例如.`<p>``<body>`

有没有办法只为 消除边距`<iframe>`？

代码：

```
<!DOCTYPE html>
<html>
<body>
<p> hello </p>
<iframe src="http://www.weather.com" style="width:100%; height:95%; margin:0px"></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T19:42:19.787

你应该做一些像：

```
body{margin:0} // remove body margin

iframe{margin:0;width:100%}//remove iframe margin

p,div{margin:10px} //append margin to p and other tags 
```

您的案例演示：

```
<!DOCTYPE html>
<html>
<head>
<style>
    body{margin:0}
    iframe{margin:0;width:100%}
    p{margin:10px}
</style>
</head>
<body>
    <p> hello </p>
    <iframe src="http://www.weather.com" style="width:100%; height:95%; margin:0px"></iframe>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:49:02.750

```
As you can see, you can use body{margin:0 0 0 0px;} for top, right, bottom, left. You will be able to remove all spaces from browser.

<!DOCTYPE html>
<html>
<style type="text/css">
body {
    margin:0 0 0 0px;
}
</style>
<body>
<iframe src="http://www.weather.com" style="width:100%; height:95%; margin:0px"></iframe>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:23:23.683

有什么问题：

```
iframe {
  margin: 0;
} 
```

在您的 iframe 包含页面中

# wpf - 如何访问在 WPF 树视图中动态创建的 Windows 控件（复选框）？

> ID：13146179
> 
> 赞同：0
> 
> 时间：2012-10-30T19:19:19.517
> 
> 标签：wpf, dynamic, navigation, treeview, controls

我有一个带有分层数据模板的 WPF 树视图，可以加载对象并很好地显示它们。在树视图的子视图中，我使用文本块在树视图中显示对象的“名称”，旁边还有一个复选框。这是我的参考代码：

```
<DockPanel Name="test1" Margin="10,10,0,10" VerticalAlignment="Stretch" Grid.Row="3" Grid.RowSpan="7" Grid.Column="0">
        <DockPanel.Resources>
            <local:CheckBoxCommand x:Key="cbc"></local:CheckBoxCommand>
            <src:TreeViewFilter x:Key="MyList" />

            <HierarchicalDataTemplate DataType="{x:Type src:TreeViewParent}" ItemsSource="{Binding Path=OrderAttributes}">
                <TextBlock Text="{Binding Path=NameAndCount}" FontSize="24"/>
            </HierarchicalDataTemplate>

            <HierarchicalDataTemplate DataType="{x:Type src:OrderAttribute}" ItemsSource="{Binding Path=OrderAttributes}">
                <StackPanel Name="test" Orientation="Horizontal" VerticalAlignment="Center">
                    <CheckBox Command="{StaticResource cbc}"
                              CommandParameter="{Binding Path=NameAndParent}" Visibility="{Binding Path=CheckBoxVisible}" VerticalAlignment="Center">
                    </CheckBox>
                    <TextBlock Text="{Binding Path=NameAndCount}" FontSize="16"/>
                    </StackPanel>
            </HierarchicalDataTemplate>

        </DockPanel.Resources>
        <TreeView Name="treeView1" BorderThickness="2" ItemsSource="{Binding Source={StaticResource MyList}, UpdateSourceTrigger=PropertyChanged}" TreeViewItem.Selected="filterByBatchStatus"/>
    </DockPanel> 
```

当用户选中树中的复选框时，我的应用程序中会根据选中的复选框发生某些事情。我知道正在检查哪个复选框的方法是通过命令传递参数，并且该参数绑定到对象的“NameAndParent”。所有这一切都很好。

当我让用户选择保存已选中的复选框并将复选框旁边的每个对象的“名称”保存到 XML 中时，我的问题就开始了。如您所见，我只保存了对象的“名称”，但该名称没有与复选框挂钩，因此我无法返回并“找到”关联的复选框。

当我让用户选择加载这些已保存文件之一时，我想遍历树并选中已保存的框。问题是复选框没有名称或 UID，我无法通过绑定为它们分配一个，因为这是不允许的。

无论如何要遍历树视图并以某种方式将保存的名称与树中每个元素子元素的名称进行比较，然后选中该特定复选框，或者这是否必须以不同的方式进行编程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:00:17.030

只需在包含您的数据的类中创建一个布尔 IsChecked 属性，并将 CheckBox.IsChecked 绑定到该属性。无需操作视图，您可以更轻松地操作它所绑定的数据，无需花哨的 Visual-Tree 操作，并消除应用程序逻辑和 UI 之间的依赖关系。这是 Model-View-ViewModel 模式最重要的实现。

如果你不想在你的数据模型中引入 UI 相关的逻辑（比如我提到的 IsChecked 属性），你将不得不在模型和视图之间引入一个 ViewModel。

# git - Git：无法重定向/解析“git fetch --dry-run”命令的输出

> ID：13146187
> 
> 赞同：5
> 
> 时间：2012-10-30T19:19:51.327
> 
> 标签：git, bash, shell, io-redirection

`git fetch`控制台打印的命令输出信息有什么特别之处？我无法使用`grep`,`xargs`等。也无法将输出重定向到文件..

注意：我正在使用`git fetch --dry-run`命令

```
[sangeeth@localhost santest-code]$ 
[sangeeth@localhost santest-code]$ git fetch --dry-run > /tmp/1
From ssh://git.code.sf.net/p/santest/code
   9f068d0..2b9dc4e  master     -> origin/master
[sangeeth@localhost santest-code]$ 
[sangeeth@localhost santest-code]$ cat /tmp/1              <= no data
[sangeeth@localhost santest-code]$  
[sangeeth@localhost santest-code]$ git fetch --dry-run | grep "ssh"     <= output has both lines
From ssh://git.code.sf.net/p/santest/code
   9f068d0..2b9dc4e  master     -> origin/master
[sangeeth@localhost santest-code]$ 
[sangeeth@localhost santest-code]$ git --version 
git version 1.7.11.4
[sangeeth@localhost santest-code]$ 
```

我正在尝试解析`git fetch --dry-run`命令的输出以检查本地（`master`）分支是否与远程（`origin/master`）分支是最新的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T19:29:10.607

git 的一些状态输出转到`STDERR`. 如果你想通过它 grep，将 STDERR 合并到 STDOUT 中，如下所示：

```
git fetch --dry-run 2>&1 | grep ssh 
```

# java - openAccessory 的返回值究竟是什么？

> ID：13146189
> 
> 赞同：6
> 
> 时间：2012-10-30T19:19:56.053
> 
> 标签：java, android, usb, accessory

连接到 USB 配件时，我正在努力恢复我的 Android 应用程序。

显然 my`ParcelFileDescriptor`为 null，`openAccessory()`当我调用它时该方法不返回任何内容`onResume()`。

有人经历过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:51:14.743

似乎已修复，我在 USB 管道中有未读消息。

USB 配件未读取 Android 发送的消息。

这就是为什么应用程序无法`ParcelFileDescriptor`从`onResume()`.

# c++ - 为什么双 x = 0,1; 不编译？

> ID：13146191
> 
> 赞同：3
> 
> 时间：2012-10-30T19:20:15.147
> 
> 标签：c++, syntax, comma-operator

```
double x = 0,1; 
```

不编译（在 MSVC9.0 上尝试）。错误是

```
C2059 syntax error : 'constant' 
```

我*确实*意识到那里有一个逗号而不是一个点，但是上面的行不应该被解释为以下内容吗？

```
double x = (0,1); //which is double x = 1; 
```

顺便说一句，初始化使用括号成功编译。

`operator ,`我在考虑优先级低于的线路`operator =`，但在这种情况下`=`不是运算符，所以这不应该是一个问题。什么句法规则决定了

```
 double x = 0,1; 
```

应该是非法的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T19:21:44.307

好吧，它被视为

```
double x = 0; double 1; 
```

这就是为什么。就像你写的一样

```
double x = 0, y; 
```

这是声明的语法，您只是试图声明`1`为变量（这是错误的）。不要以为还有很多...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T19:23:15.880

在声明期间，没有括号的逗号被视为声明之间的分隔符。例如：

```
double x = 0, y = 1; 
```

或者

```
double x = 0, y; 
```

您输入的内容相当于

```
double x = 0;
double 1; 
```

这显然是不正确的。

# php - session.gc_maxlifetime 什么时候开始计算

> ID：13146198
> 
> 赞同：8
> 
> 时间：2012-10-30T19:20:45.570
> 
> 标签：php, session

在每次加载页面时，我都会运行`session_start()`以恢复当前会话。从什么时候`session.gc_maxlifetime`开始计算？第一次`session_start()`被调用并设置了该会话的cookie？或者计时器是否每隔一段时间重新启动一次`session_start()`？

设置为`session.gc_maxlifetime`大约 24 分钟，在此时间线中，会话数据应该被垃圾收集

```
 1\. 12:00:00 First page load, session_start(), session cookie created
 2\. 12:10:00 page load, session_start() 
 3\. 12:26:00 page load, session_start()
 4\. 12:55:00 page load, session_start() 
```

如果计时器在第一页加载时启动，`session_start()`那么我希望它会在加载 3 时进行垃圾收集。但是如果它重置 every `session_start()`，那么它直到加载 4 才会收集。

我希望它是后者，因为这样我可以每隔几分钟做一个 javascript 心跳来调用一个运行的页面`session_start()`。

如果是前者，`session.gc_maxlifetime`从创建会话 cookie 开始计数我需要销毁/重新创建或 regenerate_id 来重置计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:40:26.660

它来自最后一次 session_start() 调用 OR/AND 最后一次写入。我的猜测是后者，因为这会改变 PHP 垃圾收集器用来确定是否需要删除的“最后修改”时间戳。在这种情况下，它从最后一个使用 session_start() 的脚本开始计数，或者通过调用 session_write_close() 显式地在脚本中间结束。

PS这将使“心跳”变得漂亮而简单（一行）： http: [//prototypejs.org/api/ajax/periodicalUpdater](http://prototypejs.org/api/ajax/periodicalUpdater)

# javascript - Javascript 乒乓球游戏移动蝙蝠

> ID：13146200
> 
> 赞同：2
> 
> 时间：2012-10-30T19:20:49.423
> 
> 标签：javascript, onkeypress, pong

我目前正在使用 Javascript 进行 Pong 游戏教程。我正处于需要通过按某些键使 2 个蝙蝠移动的地步。当我按 K、M、A 或 Z 时，球棒应该会移动。但它们根本不动。我的 IDE 说“变量 e 隐藏参数”。这是我目前正在使用的代码：

```
batupdate = function(e) {   
var e = window.event ? event : e;

if (e.keyCode) 
{ 
    key = e.keyCode; 
}

else if (typeof (e.which) != 'undefined') 
{ 
    key = e.which; 
}

switch (key) 
{
    case (122):
        BatL.move(1);
        break;
    case (97):
        BatL.move(-1);
        break;
    case (107):
        BatR.move(-1);
        break;
    case (109):
        BatR.move(1);
        break;
}
}

document.onkeypress = batupdate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:24:09.893

将第 2 行更改`var e = ...`为`e = ...`

尝试通过放置断点`switch (key)`并查看`key`and来解决问题，或者如果您还不熟悉调试器，请`e`编写。`console.log("E: " + e + " KEY: " + key)`

我不确定这是否有必要——可能没有——但我对这些事情很偏执，所以为了安全起见，我会推后，在它和它所连接`else if`的语句之间没有新的界限。`if`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:25:41.140

您正在使用以下代码创建变量 e：

```
var e = window.event ? event : e ; 
```

它存在于 batupdate 函数的范围内。您还将一个参数传递给该函数，其标记为 e。

基本上，您对 2 个不同的事物使用相同的名称，这是有问题的。试试这个：

```
e = window.event ? event : e ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:45:52.777

问题不在于您向我们展示的代码。你可以在这里看到这个：http: [//jsfiddle.net/K6MRu/](http://jsfiddle.net/K6MRu/)

我`Bat[LR].move()`接听电话是因为我们没有他们的实施，并用显示相同数据的警报替换它们。你会看到它工作得很好。这意味着问题必须出在`BatL`和/或`BatR`变量的值或`move()`函数的实现中。

您的 IDE 给出的消息实际上根本不是问题，因为它只是意味着您无法访问您不想访问的内容。`var`您可以按照其他人的建议通过删除in来使消息消失`var e = window.event ? event : e;`，我建议您这样做，但这并不能解决蝙蝠不动的问题。

# python - gevent：调试旋转线程？

> ID：13146206
> 
> 赞同：3
> 
> 时间：2012-10-30T19:21:18.190
> 
> 标签：python, gevent

在我的基于 gevent 的程序中，我在某个地方有一个线程，它陷入了一个循环，例如：

```
while True:
    gevent.sleep(0) 
```

我怎样才能弄清楚这是哪个线程？是否可以列出（并获取堆栈跟踪）正在运行的线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T09:47:56.130

## 方法1.超时

我在我的代码中使用它来跟踪可能阻塞的greenlets。发生这种情况时会引发 NodeTaskTimeout。只需将您的作业包装在 Timeout 中或为它们提供 TimeOut 对象。

```
 with Timeout(90, False):
        task_jobs.join()

    if task_jobs:
        print 'task jobs killed', task_jobs
        task_jobs.kill()
        if settings.DEBUG:
            raise NodeTaskTimeout 
```

如果它挂起/阻塞/花费很长时间，这个打印就完成了任务。特别令人讨厌的是那些相互依赖并导致死锁 job1 /thread -> job2/thread2 -> job3/thread3 和 job/thread3 只有在 job1 完成时才会完成，这永远不会发生，因为 job2 没有完成而 job2 没有因为job3没有完成而完成..你明白了;）

## 方法 2 Settrace

[http://www.rfk.id.au/blog/entry/detect-gevent-blocking-with-greenlet-settrace/](http://www.rfk.id.au/blog/entry/detect-gevent-blocking-with-greenlet-settrace/)

但是您还需要将您怀疑“旋转”的代码放入 with 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-08T09:02:41.800

有一个用于检查块的官方 API，它会查明导致块的确切行，检查代码示例如下：

```
# gevent        1.3.7
# greenlet      0.4.15
# zope.event    4.4
import gevent
from gevent import config, get_hub
from gevent.events import IEventLoopBlocked
import logging
from pprint import pformat
import time
import zope.event

# initial logging
logging.basicConfig(level=logging.INFO)
log = logging.getLogger(__name__)

# setup gevent config
# enable the monitor thread
config.monitor_thread = True
config.max_blocking_time = 4

# start the monitor thread
hub = get_hub()
monitor = hub.start_periodic_monitoring_thread()

# register the event to logging system
def g(event):
    log.error('Greenlet: {}, exceed the max blocking time: {}'.format(event.greenlet, event.blocking_time))
    log.error(pformat(event.info))
event = IEventLoopBlocked()
zope.event.subscribers.append(g)

# you can also create you own monitoring function
# def check(hub):
#     print('< periodic check in monitoring thread >')
#
# monitor.add_monitoring_function(check, 1)

def gl1():
    # use time.sleep to trigger block
    log.info('block at gl1 for 2 seconds')
    time.sleep(2)
    log.info('leave gl1 now')

def gl2():
    # use time.sleep to trigger block
    log.info('block at gl2 for 6 seconds should be detected')
    time.sleep(6)
    log.info('leave gl2 now')

def gl3():
    # gevent.sleep will not block
    log.info('gl3 will not block since it use gevent.sleep')
    gevent.sleep(8)
    log.info('leave gl3 now')

gevent.joinall([
    gevent.spawn(gl3),
    gevent.spawn(gl1),
    gevent.spawn(gl2),
]) 
```

我希望它有帮助！

# c++ - 如何将函数中的stl列表作为C++中的参数传递

> ID：13146209
> 
> 赞同：0
> 
> 时间：2012-10-30T19:21:30.857
> 
> 标签：c++, visual-studio-2010, visual-c++, stl, vector

我有一个像这样的基类：

```
class Base
{
public:
    virtual void fun() const =0;
};

class Derived: public Base 
{
    virtual void fun()
    {
        //implemtation of fun
    }
}; 
```

我有一个全局结构：

```
struct Mystruct {
    int a;
    char *b;
} MYSTRUCT; 
```

然后我将结构添加到向量中：

```
List  = new MYSTRUCT;
vector<MYSTRUCT*> SS;
SS.push_back(List); 
```

如何将 this 向量传递给 fun 函数并访问函数中的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:54:35.210

就像这样：

```
class Base
{
public:
    virtual void fun(const std::vector<Mystruct*>& list) const =0;
};

class Derived:public Base 
{
public:
    virtual void fun(const std::vector<Mystruct*>& list)
    {
        //implemtation of fun
    }
}; 
```

但是您的示例表明您可能在理解如何设计 C++ 类时遇到其他问题（例如，您不需要将这种 C 类结构定义语法与 C++ 一起使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:42:09.947

您似乎对此的含义感到困惑：

```
struct Mystruct
{
int a;
char *b;
}MYSTRUCT; 
```

这是一个被调用的结构`Mystruct` *和*`Mystruct`一个被调用的实例的声明`MYSTRUCT`。因此，当您创建`std::vectors`或`std::lists`保存这些结构时，您需要使用*类型*作为模板参数：

```
std::vector<Mystruct> v0; // vector holding 0 Mystructs 
```

如果你想要一个持有指针的向量，你需要

```
std::vector<Mystruct*> v1; 
```

这将根本无法编译，因为`MYSTRUCT`它不是类型：

```
std::vector<MYSTRUCT*> 
```

# c# - 如何从 char 数组创建字符串而不复制它？

> ID：13146210
> 
> 赞同：12
> 
> 时间：2012-10-30T19:21:40.900
> 
> 标签：c#, .net, arrays, string, char

我有一个非常大的 char 数组，我需要将其转换为字符串才能在其上使用 Regex。但是当我将它传递给字符串构造函数时
，它太大了。`OutOfMemoryException`

我知道字符串是*不可变*的，因此它*不应该*指定它的底层字符集合，但我需要一种在不复制整个内容的情况下使用正则表达式的方法。

我如何获得该数组？

*   我使用`StreamReader`. 我知道要读取的内容的起始位置和长度，`Read`方法`ReadBlock`需要我提供一个`char[]`缓冲区。

所以这里是我想知道的事情：

*   有没有办法指定字符串的底层集合？（它甚至将其字符保存在数组中吗？）
*   ...或直接在字符数组上使用正则表达式？
*   ...或者直接将文件的一部分作为字符串获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:22:06.753

如果您有一个可以搜索的字符或模式保证不在您要查找的模式中，则可以扫描该字符的数组并创建较小的字符串以单独处理。过程将是这样的：

```
char token = '|';
int start = 0;
int length = 0;
for(int i = 0; i < charArray.Length; i++;)
{
    if(charArray[i] == token)
    {
        string split = new string(charArray,start,length);
        // check the string using the regex

        // reset the length
        length = 0;
    }
    else
    {
        length++;
    }
} 
```

这样，您将在每次尝试后复制较小的字符串片段，而不是整个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:07:38.700

一个相当丑陋的选择是使用非托管 RegEx 库（如 POSIX 正则表达式库）和不安全的代码。您可以获得指向 char 数组的 byte * 指针并将其直接传递给非托管库，然后将响应编组返回。

```
fixed (byte * pArray = largeCharArray)
{
   // call unmanaged code with pArray
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:55:06.503

我认为您最好的选择是将多个 char[] 块读入与某个维度重叠的单个字符串。这样，您就可以对各个块执行正则表达式，并且重叠将使您能够确保块中的“中断”不会破坏搜索模式。以伪代码方式：

```
int chunkSize = 100000;
int overLap = 2000;

for(int i = 0; i < myCharArray.length; i += chunkSize - overlap)
{
    // Grab your array chunk into a partial string
    // By having your iteration slightly smaller than 
    // your chunk size you guarantee not to miss any 
    // character groupings. You just need to make sure
    // your overlap is sufficient to cover the expression
    string chunk = new String(myCharArray.Skip(i).Take(chunkSize).ToArray());
    // run your regex
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-30T20:06:30.733

如果您使用的是 .NET 4.0 或更高版本，您应该使用的是[MemoryMappedFile](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile(v=vs.100).aspx)。此类是专门设计的，因此您可以操作非常大的文件。从 MSDN 文档：

> 内存映射文件将文件的内容映射到应用程序的逻辑地址空间。内存映射文件使程序员能够处理非常大的文件，因为内存可以同时管理，并且它们允许对文件进行完全、随机的访问，而无需查找。内存映射文件也可以在多个进程之间共享。

获得内存映射文件后，请查看有关如何将 RegEx 应用于内存映射文件的[Stack Overflow 答案。](https://stackoverflow.com/questions/4649239/id-like-to-apply-a-regex-efficiently-to-an-entire-file)

希望这可以帮助！

# javascript - 为什么我的 Jquery Modals 会通过我的模态框上的任何按钮关闭？

> ID：13146218
> 
> 赞同：0
> 
> 时间：2012-10-30T19:22:13.860
> 
> 标签：javascript, jquery, asp.net, button, modal-dialog

但是，我的 Jquery 模态运行完美，当我单击一个不应该关闭模态的按钮时，它会关闭模态吗？难道是按钮正在自动刷新页面导致模式关闭？我怎样才能克服这个当前的问题？

**这是脚本：**

```
 <script>

$(document).ready(function () {
    var triggers = $(".modalInput").overlay({

        // some mask tweaks suitable for modal dialogs
        mask: {
            color: '#F7F7F7',
            loadSpeed: 200,
            opacity: 0.9
        },

        closeOnClick: false
    });

    var buttons = $("#yesno button").click(function (e) {

        // get user input
        var yes = buttons.index(this) === 0;

        // do something with the answer
        triggers.eq(0).html("You clicked " + (yes ? "yes" : "no"));
    });

});

 </script> 
```

**这是按钮（触发器）：**

```
 <asp:Button class="modalInput" rel="#yesno" ID="modalInput" runat="server" BackColor="#525663" BorderColor="#999999"
               BorderStyle="Solid" BorderWidth="1pt" CommandName="MoveNext" Font-Size="Large"
               ForeColor="White" Style="font-family: Segoe UI; margin-left: 0px; position: relative;
               top: 25px; left: -25px; width: 152px; height: 41px;" Text="Edit Information"  /> 
```

**这是模态：**

```
 <div class="modal" id="yesno">  
 <h2>Edit Account Information:</h2>  

   <Uc2:EditCurrentSet ID="EditCurrentSet" runat="server" />

    <a class="close"></a> 

        </p></div> 
```

****我是否将返回错误；在正确的地方？：如果我在，结果仍然没有变化！****

```
 <script>

$(document).ready(function () {
    var triggers = $(".modalInput").overlay({

        // some mask tweaks suitable for modal dialogs
        mask: {
            color: '#F7F7F7',
            loadSpeed: 200,
            opacity: 0.9
        },

        closeOnClick: false

    });

    var buttons = $("#yesno button").click(function (e) {

        // get user input
        var yes = buttons.index(this) === 0;

        // do something with the answer
        triggers.eq(0).html("You clicked " + (yes ? "yes" : "no"));
        return false;
    });

    return false;
});
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:46:30.267

是的，你`return false;`来错地方了。而不是`return false;`，使用事件的`preventDefault`功能：

```
var buttons = $("#yesno button").click(function (e) {
    e.preventDefault();

    // get user input
    var yes = buttons.index(this) === 0;

    // do something with the answer
    triggers.eq(0).html("You clicked " + (yes ? "yes" : "no"));
    return false;
}); 
```

该按钮按 Web 表单的性质提交。使用`preventDefault`（或`return false;`如果您愿意），将阻止它发布到服务器，这是`asp:Button`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:30:17.883

如果您已将事件处理程序更改为返回 false 并且它仍然无法正常工作，那么您没有选择正确的按钮。我认为您的选择器应如下所示：

```
var buttons = $("#modalInput").click(function (e) {
    // get user input
    var yes = buttons.index(this) === 0;

    // do something with the answer
    triggers.eq(0).html("You clicked " + (yes ? "yes" : "no"));
    return false;
}); 
```

选择器中的 # 表示您正在尝试按 ID 查找按钮 - 您可以查看该按钮的呈现 HTML（在您喜欢的浏览器中查看源代码/Web 开发人员工具）并自己检查 ID。通过向按钮添加一个 rel 属性，您已经使它有点复杂了，但我不会想到选择器无论如何都会起作用。

# pointers - `access` 参数模式有什么用处？

> ID：13146219
> 
> 赞同：2
> 
> 时间：2012-10-30T19:22:14.797
> 
> 标签：pointers, parameters, parameter-passing, ada

在 Ada 中有三种“正常”的参数传递模式：`in`、`out`和`in out`. 但是还有第四种模式，`access`……**有什么需要它们的吗？** （即原本不可能的事情。）

现在，我知道 GNAT JVM Ada 编译器在导入的 [库] 规范中大量使用了它们。（此外，可以说它们对于 C/C++ 翻译至关重要。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:48:01.623

访问模式的主要驱动因素之一是解决在 Ada 2012 之前的限制，即函数参数只能是模式“in”。

因此，尽管在某些领域它们可能仍然是合适的解决方案，但可能在绑定中，Ada 2012 将允许的函数参数模式放宽到现在包括“in out”，这可能会显着减少对访问模式的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T20:15:46.667

不管它们有什么其他用途，我更喜欢在编码绑定到接收指针的 C API 时使用它们（当且仅当 0 不是 C 端该参数的有效值时）。

这样在 Ada 方面，我可以处理一个不错的对象，而不是一个容易出错的凌乱指针。

当然，您可以只在绑定中指定参数是通过引用传递的，这也是同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T02:28:58.840

`access` *在我最新的项目中，到目前为止*，我唯一需要使用的是在定义我自己的流子程序（`Read`、、`Write`等`X'Class'Output`）时。这些函数需要`not null access Ada.Streams.Root_Stream_Type'Class`作为参数。

例如：

```
package Example is
    type Printable_Type is private;

    procedure Print_Printable(
        Stream : not null access Ada.Streams.Root_Stream_Type'Class;
        Print  : in Printable_Type);

    for Printable_Type'Write use Print_Printable;
end Example 
```

# android - 数字不删除退格按钮android

> ID：13146223
> 
> 赞同：2
> 
> 时间：2012-10-30T19:22:40.423
> 
> 标签：android, button, backspace

我正在为计算器使用退格按钮的实现，但是当我删除两个或多个数字并再次单击另一个数字时，它给了我我用新数字删除的数字，例如，我输入了 2569，当我按下退格键时25 并按下按钮 7 它给了我 25697，任何想法，这里是退格按钮的代码。

```
btnBackSpace.setOnClickListener( new OnClickListener(){ 
    public void onClick(View arg0){

        String str=editX.getText().toString();
            if (str.length() >1 ) { 
                str = str.substring(0, str.length() - 1);
            editX.setText(str);
        }
            else if (str.length() <=1 ) {
            editX.setText("0");
            }
     }
}); 
```

# android - 我应该隐藏 AdMob 广告视图还是将其完全删除？

> ID：13146224
> 
> 赞同：2
> 
> 时间：2012-10-30T19:22:42.457
> 
> 标签：android, android-layout, admob, android-view

作为很多免费的应用程序，我自己的 AdMob 广告也可以在高级版本中删除。高级版将是解锁钥匙。现在，当在免费版本中检测到并验证此密钥时，我只是将 with 隐藏起来`AdView`，`setVisibility(View.GONE)`而用户永远看不到它。

我想知道，在这种特定情况下，最好从布局中删除视图，而不是仅仅隐藏它。我的意思是，`AdView`永远**不会**向用户显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T23:17:42.823

在这种情况下，最好删除 AdView。

我相信 AdMob SDK 会检查 AdView 的可见性，如果 AdView 不可见，则不会发出另一个请求。但是，您仍然在不必要地调用 AdMob SDK 代码，并且如果在 SDK 或某些 Android 设备上引入了错误，您不希望不必要地访问网络。

您还应该在创建 AdView 之前检查高级状态，因此一旦用户进行购买，就不会再次创建 AdView。

# algorithm - 分配心跳的算法？

> ID：13146225
> 
> 赞同：3
> 
> 时间：2012-10-30T19:22:43.143
> 
> 标签：algorithm, networking, network-programming, load-balancing

我正在构建一个传感器网络，其中大量传感器向中央集线器报告其状态。传感器需要至少每 3 小时报告一次状态，但我想确保集线器在任何给定时间都不会被太多报告淹没。因此，为了缓解这种情况，我让集线器告诉传感器“下一次报告时间”。

现在我正在寻找任何标准算法来对这些更新进行一些负载平衡，这样传感器不会超过报告之间的设定间隔，并且集线器可以计算下一个报告时间，以便其负载（接收报告的）平均分配那天。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:30:31.177

如果您知道有多少传感器，只需将每三个小时的数据块划分为多个时间段，然后（根据需要随机或以编程方式）为每个传感器分配一个。

如果不这样做，您仍然可以将每三个小时的时间块划分为大量的时隙并将它们分配给传感器。在您的分配算法中，您只需要确保所有插槽在它们中的任何一个有两个之前都有一个分配的传感器，并且在它们中的任何一个有三个之前所有插槽都有两个，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:38:25.720

最简单的解决方案：集线器是否有任何理由无法根据自己的时间表轮询传感器？

否则，您可能需要设计一个系统，其中集线器可以根据自己的负载决定是否接受报告。如果传感器的连接被拒绝，请让它等待一段随机时间并重试。随着时间的推移，传感器应该或多或少地以最佳方式将自己隔开。

IIRC TCP/IP 的某些方面使用了类似的方法，但我对哪个方面持空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T22:20:05.960

我会使用 90 分钟为基数，并在 30 分钟范围内随机变化，以便间隔在 60 到 120 分钟之间随机分布。如果您想更接近 3 小时的间隔，请调整这些数字，但我个人会很好地保持在它之下

# java - 拆分字符串全名

> ID：13146228
> 
> 赞同：-1
> 
> 时间：2012-10-30T19:23:06.957
> 
> 标签：java

> **可能重复：**
> [如何使用任何空白字符作为分隔符拆分字符串？](https://stackoverflow.com/questions/225337/how-do-i-split-a-string-with-any-whitespace-chars-as-delimiters)

我需要拆分全名，所以我只返回姓氏。

例如 FJ Hill（我们假设姓总是在名字之后或首字母之后）

所以这就是我到目前为止得到的

```
public String getLastName(){
    String surname;
    surname = FullName.split;
} 
```

但这不起作用。我能得到一些帮助吗？不太了解拆分字符串的工作原理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:27:46.693

你能看看这是否能解决你的答案吗？

```
public class Test {
    public static void main(String[] args) {
        String name = "F. J. Hill";
        String[] split = name.split(" ");
        int size = split.length - 1;
        System.out.println(split[size]);
    }
} 
```

# javascript - jQuery 插件，我们可以在实际调用插件之前在插件中的方法中整理数据吗？

> ID：13146229
> 
> 赞同：0
> 
> 时间：2012-10-30T19:23:14.447
> 
> 标签：javascript, jquery

不确定我的问题是否会使插件的工作方式无效。

但这是我的意图。

我在页面上有动态内容。加载页面后，所有需要的数据都可用，但动态数据仅在用户单击某些按钮时显示。

但是，由于用户不会点击所有按钮 - 当他/她点击任何特定按钮时，我想吞噬页面上的一些数据（与按钮有关的某些数据），并发送一个 ajax 请求。

这将是事情的顺序。1\. 用户点击按钮 2\. 随着页面动态变化（重新格式化表格数据并改变显示）。3\. 在构建每个表行项目时，我想从该行存储一些数据。4.一旦构建了所有行并且我有了存储数据的obj然后我调用我的插件。

我的问题 - 对于#3 - 而不是创建一个临时 obj 来将数据存储在页面中的某个位置，然后在我调用它时将其传递给插件。我可以使用其中一种插件方法来处理 - 存储该数据吗？这是不好的形式吗？

例如：

```
for each TR that is built.
   $.pluginName.methodName(storeData)
end; 
```

一旦存储了所有数据（建表），我只需调用我的插件。由于该*storeData*已经在我的插件中，我可以使用它吗？

我的猜测是这是不好的形式，因为我还没有初始化我的插件，设置选项等。所以这个数据集（storeData）将只是我插件中的一些流氓项目。我知道我的另一个选择是创建一个本地 obj，将数据推送到其中，当我调用我的插件时，只需将其传入即可。

这有意义吗？我在这里尽量简洁。

# asp.net - 如果输入多个字符，RegularExpressionValidator 会失败

> ID：13146232
> 
> 赞同：0
> 
> 时间：2012-10-30T19:23:23.073
> 
> 标签：asp.net, regex

这是我的`asp:RegularExpressionValidator`

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator2" 
                runat="server" ControlToValidate="uxTrachoCtrl1"
                ErrorMessage="Ne dois pas contenir des caractères alphabétiques"  
                ValidationExpression="[0123456789,.<>=]" ValidationGroup="verification" Display="Dynamic" 
                SetFocusOnError="True">
            </asp:RegularExpressionValidator> 
```

该字符串只能包含那些字符 0123456789,.<>=

这是我的正则表达式 [0123456789,.<,>,=]

如果我输入一个字符，如 f 或 1，它会起作用，但如果我输入多个字符，则会引发错误：

```
ex: input="1"=ok
    input="f"=error
    input="11"=error (It's supposed to be right) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:25:38.160

字符类只匹配一个字符。如果你想允许任意长度的字符，你需要重复它：

```
"[0-9,.<>=]*" 
```

如果要排除空输入，请改用：

```
"[0-9,.<>=]+" 
```

请注意，我的角色类别与您的角色类别等价（是您的角色类别中多次出现`0-9`的简写符号）。`0123456789``,`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:25:55.417

您刚刚定义了一个字符的有效字符范围

将其更改为

```
ValidationExpression="[0-9,.<>=]{minLength,maxlength}" 
```

而不是，`minLength`你`maxLength`应该把你想要的数字。或者`*|+`如果您想像其他人建议的那样允许`0|1`或更多重复字符，请使用

# c - HTTP 代理服务器无法从 C 中的主机服务器收集整个响应

> ID：13146236
> 
> 赞同：0
> 
> 时间：2012-10-30T19:23:31.253
> 
> 标签：c, http, get, proxy-server

我在 C 中实现一个 HTTP 代理服务器。

我从browser（客户端）获取 HTTP 请求标头并对其进行解析以查找 url、端口号等。然后我以以下格式向远程服务器发出请求：

**GET / HTTP1.0\r\nHost: www.gmail.com:80\r\n\r\n**

但是在执行过程中，代理服务器无法从远程服务器读取整个日期。

从代理服务器到远程服务器的标头或从服务器读取数据是否有问题。

```
 void handle_connection(......)
{
    ......
   //request send from proxy to remote server
      sprintf(buffer, "%s %s HTTP/1.%d\r\nHost: %s:80\r\n\r\n"
     , http_args[0], requested_url->file, requested_url->proto, requested_url->host);
          //sending the request to remote server connection socket rfd
    n = write(rfd, buffer, sizeof(buffer));
          //reading data from the response of the server
    while ((n = read(rfd, buffer, BUFFSIZE)) > 0) {
        write(connfd, buffer, BUFFSIZE); //sending it to client web brownser
        bzero(buffer, BUFFSIZE);
    }
    close(rfd);
} 
```

# sharepoint - 基于 Startswith 的 SharePoint 筛选器

> ID：13146238
> 
> 赞同：2
> 
> 时间：2012-10-30T19:23:39.100
> 
> 标签：sharepoint, filter

我想根据行开头的字母/数字过滤我的共享点列表。我知道我可以通过添加一个新的计算列并对其进行过滤来做到这一点，但我希望能够仅使用 URL 或 JavaScript 进行过滤，而无需为此目的添加列。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:36:14.660

您可以使用 SharePoint Designer 将内容编辑器 Web 部件添加到您的视图表单中，并放入一些 jQuery 以根据查询字符串值过滤列表。

将 jQuery 文件上传到您的样式库，并将 javascript 添加到您的内容编辑器 Web 部件。

请注意，很难做到这一点，因为查询字符串在视图中广泛使用，并且视图非常灵活，并且允许某人完全重新设计输出 html，只需在视图中添加 group by 子句甚至删除您的标题字段.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:35:14.743

You can't do this just through the URL. SharePoint accepts FilterFieldxxx and FilterValuexxx querystring parameters, but they only filter **exact** values.

You could do it programmatically using xslt in a list view. You could also use JavaScript to call an API like Web services, listdata.svc, the JSOM, or _api (new in SP 2013). But honestly the calculated column seems to be the most solid and straightforward approach.

# sql - 加入多行给出一个不同的行

> ID：13146239
> 
> 赞同：0
> 
> 时间：2012-10-30T19:23:41.047
> 
> 标签：sql

我的 SQL 语句返回以下内容

```
SQLID  Col1  Col2  Col3
14945  NULL  NULL  sdf
14945  NULL  xyz   NULL
14945  abc   NULL  NULL 
```

我希望它返回的地方

```
SQLID   Col1 Col2   Col3
14945   abc  xyz    sdf 
```

请帮忙。

架构是这样的，我有一个包含`SQLID`'s. 第二个表包含`SQLID`'s 作为第一个表和 col1、col2 和 col3 的 FK。目前我只是在加入`SQLId`

```
Select 
    t1.SQLID, t2.Col1, t2.col2, t2.col3
from
    Table1 t1 
join
    table2 t2 on t1.SQLId = t2.SQLid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:30:22.893

**编辑：**如果 Col1、Col2、Col3 是`DATETIME`数据类型（根据以下评论）您可以使用；

```
SELECT SQLID, MAX(ISNULL(Col1,0)) AS Col1,
        MAX(ISNULL(Col2,0)) AS Col2, MAX(ISNULL(Col3,0)) AS Col3
FROM YourTable
GROUP By SQLID 
```

# c++ - C++ 中土耳其语-I 的解决方案

> ID：13146241
> 
> 赞同：5
> 
> 时间：2012-10-30T19:23:45.680
> 
> 标签：c++, string-comparison

**大家好！**

在土耳其语中，其中一个字母具有不同的行为，它是 I -and i-。在英语中，I 和 i 是大写和小写。在土耳其语中，小写的 I 不是 i，而是**ı**。

所以在土耳其语环境（即Windows）中，“DOMAIN.COM”和“domain.com”是不相等的。由于电子邮件传输和 DNS 完全是英文的，如果邮件地址包含大写的 I，可能会出现问题。

在 C# 中，我们可以使用**InvariantCultureIgnoreCase**标志来纠正这个问题：

```
 // Mock
        string localDomain = "domain.com";
        string mailAddress = "USER@DOMAIN.COM";
        string domainOfAddress = mailAddress.Split('@')[1];
        string localInbox = "";

        //
        // Local inbox check

        //Case insensitive method 
        bool ignoreCase = true; // Equal to StringComparison.CurrentCultureIgnoreCase
        if (System.String.Compare(localDomain, domainOfAddress, ignoreCase) == 0) 
        { 
           // This one fails in Turkish environment
           localInbox = mailAddress.Split('@')[0];
        }

        //Culture-safe version
        if (System.String.Compare(localDomain, domainOfAddress, StringComparison.InvariantCultureIgnoreCase) == 0)
        {
            // This one is the correct/universal method
            localInbox = mailAddress.Split('@')[0];
        } 
```

由于我没有 C++ 经验，这两个示例的**C++ 等价物是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:33:23.263

If you are programming in `Windows`, you may change `locale` of your thread to `en_US` and then use `_stricmp`, or create a locale object for `en_US` and then use `_stricmp_l`:

```
setlocale( LC_CTYPE, "English" );
assert( _stricmp("DOMAIN", "domain") == 0 );

_locale_t l = _create_locale( LC_CTYPE, "English" );
assert( _stricmp_l("DOMAIN", "domain", l) == 0 ); 
```

If `boost` is an option for you, a more portable and C++ friendly solution is to use [boost::locale](http://www.boost.org/doc/libs/1_51_0/libs/locale/doc/html/index.html) library

# c# - excel中的C#用户表单在用户方法运行时挂起

> ID：13146252
> 
> 赞同：3
> 
> 时间：2012-10-30T19:24:32.827
> 
> 标签：c#, excel

我是 excel 编程的新手，现在我的 excel 插件代码有问题。我的加载项调用了 Mainform。每当我从这个表单的按钮调用我的方法来执行一些任务，例如搜索大量数据时，Mainform 被冻结，这是不可避免的。但是当方法运行时，假设它会调用一个子窗体，这个子窗体也处于挂起状态，我不能用它做任何事情。

我的目的是调用一个子窗体来添加进度条和一个 Abort 按钮来取消正在运行的方法。

我该如何解决这个问题？

在此先感谢您的帮助。呜呜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:42:07.933

我相信你需要多线程来允许它；**仅**使用 VBA 的多线程是无法完成的。

有关更多详细信息，请参阅[此问题的](https://stackoverflow.com/q/5721564/2258)[答案](https://stackoverflow.com/a/5721588/2258)。

# apache - 用 mod_rewrite 更改文件名？

> ID：13146256
> 
> 赞同：0
> 
> 时间：2012-10-30T19:24:43.370
> 
> 标签：apache, mod-rewrite

如果您有一个文件`/foo/index.html`要通过`/bar/index.html`重写很容易访问：

```
RewriteRule ^bar/(.*)$    foo/$1 [L] # <-- Leaves URL the same, but gives content of foo/ 
```

但这意味着两者`/foo/index.html`现在都`/bar/index.html`在努力访问内容。现在有没有办法禁止通过访问`/foo/index.html`？只是在做：

```
RewriteRule ^foo/(.*)$    bar/$1 [R=301,L] # <-- Change the URL if accessed via /foo
RewriteRule ^bar/(.*)$    foo/$1 [L] # <-- Leaves URL the same, but gives content of foo/ 
```

导致重定向循环。有没有办法指示“将 foo 重定向到 bar，除非 URL 已经是 '/bar'”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:05:29.703

是的，但是您需要检查一下，`%{THE_REQUEST}`否则您的两条规则将不断改变彼此的重写和循环。所以像：

```
# this is the rule you already had:
RewriteRule ^bar/(.*)$    foo/$1 [L]

# this is the rule that externally redirects
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /foo/
RewriteRule ^foo/(.*)$ /bar/$1 [L,R=301] 
```

对`%{THE_REQUEST}`变量的检查确保了*实际请求*是针对 的`/foo`，而不是内部重写的请求。

# android - Android 利用 dalvik 类：首选项

> ID：13146258
> 
> 赞同：12
> 
> 时间：2012-10-30T19:24:57.647
> 
> 标签：android, root, preferences, malware

最近，我一直在尝试了解一些应用程序如何通过主页等代码设法更改 android 浏览器设置。这就是我来的“多远”。android api和普通代码不支持它。您必须使用本机代码。我分析了一个广告 sdk，这是大多数应用程序设法更改设置的方式。我的第一个想法是，它可能会进行某种 root 漏洞利用来获得对存储设置的共享首选项的完全访问权限。

我对 sdk 进行了一些研究和分析，发现 sdk 和一个名为[Plankton](http://www.csc.ncsu.edu/faculty/jiang/Plankton/)的恶意软件有相似之处。恶意软件和 SDK 都会收集设备信息并向 C&C 服务器发送请求，并下载带有本机代码的 jar 文件。它“利用 Dalvik 类加载能力保持隐身”而不是使用 root 漏洞利用。它支持一些命令，如设置主页、快捷方式和书签以及收集浏览器历史记录。

我试图通过使用 url 从服务器手动下载 jar 并从 sdk 添加发布数据，但我没有让它工作。也许我弄乱了帖子数据。它如何在没有 root 访问权限的情况下更改设置，而是使用 dalivk 漏洞利用？任何想法将不胜感激。

[SDK](http://developers.startapp.com/Resource/SDK/StartAppSearchSDK-1.0.18.zip)链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:07:17.303

不是真正的主题，但“收集浏览器历史记录”是股票浏览器的支持功能。可以在以下位置看到所需的权限：http: [//developer.android.com/reference/android/Manifest.permission.html#READ_HISTORY_BOOKMARKS](http://developer.android.com/reference/android/Manifest.permission.html#READ_HISTORY_BOOKMARKS)

> public static final String READ_HISTORY_BOOKMARKS 在 API 级别 4 中添加 允许应用程序读取（但不能写入）用户的浏览历史记录和书签。常量值：“com.android.browser.permission.READ_HISTORY_BOOKMARKS”

希望这个对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:48:52.587

1.  将您的设备置于 wifi 上
2.  将系统代理设置为提琴手
3.  运行下载 jar 的应用程序。
4.  从提琴手那里拿罐子。
5.  利润

# python - Python：是否可以启动具有特定 PID 的进程？

> ID：13146260
> 
> 赞同：3
> 
> 时间：2012-10-30T19:25:25.320
> 
> 标签：python, subprocess

我想使用`subprocess.Popen()`.

是否可以为该进程分配预定的 PID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:34:27.560

据我所知，PID 是由操作系统分配的——完全独立于`subprocess`. （换句话说，不，你不能分配它——至少不能以任何独立于系统的方式并且没有非常努力地工作）。如果这对您有帮助，您可以从中获取子[进程的 PID](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.pid)`Popen` ...

# ruby - 初始化常量 （名称错误）

> ID：13146266
> 
> 赞同：0
> 
> 时间：2012-10-30T19:25:44.980
> 
> 标签：ruby

这是负责与 XML 文件交互的 CRUD 类。

```
require "rexml/document"
include REXML  

class Crud
  @users = Array.new()
  def self.get_allusers()
    xmlfile = File.new("Users.xml")
    doc = Document.new(xmlfile)
       XPath.each( doc, "//user") do |e|
         user = {:id => e.element['id'], :firstname => e.element['firstname'], :lastname => e.element['lastname']}
         @users << user     
       end
    end
  end 
```

这就是我尝试从不同文件访问该方法的方式。

```
users = Crud.new()
puts users.get_allusers() 
```

我收到以下错误：**"initialized constant Crud (NameError)"**。我不知道这意味着什么。因为我也尝试过以这种方式访问​​该方法：

```
puts Crud.get_allusers() 
```

代码有什么问题？我应该初始化什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:40:36.640

不同的文件需要 require 或加载 crud 文件，否则没有定义常量。Ruby 中的类是常量，因此本例中未定义的常量是 Crud 类。

# vb.net - Vb.net 更改或阻止 webbrowser 控件发送的标头信息

> ID：13146269
> 
> 赞同：0
> 
> 时间：2012-10-30T19:25:50.213
> 
> 标签：vb.net, visual-studio-2010, http-headers, user-agent, vb.net-2010

如何更改 webbrowser 控件的标题？

我的意思不仅仅是 UA，我想更改删除或屏蔽它可能在网站上收集的所有信息、ip、分辨率、java、flash 等等。

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:34:42.603

看看[http://awesomium.codeplex.com/](http://awesomium.codeplex.com/)你应该可以随心所欲，这取决于你的能力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:24:18.657

也许您可以导航到[代理站点](http://proxify.com/)，并通过其界面以编程方式输入任何信息，然后匿名浏览？只是一个想法。

# c++ - sstream 使用输入和输出文件

> ID：13146271
> 
> 赞同：1
> 
> 时间：2012-10-30T19:26:37.347
> 
> 标签：c++

所以我有一个文件 data3.txt，它基本上看起来像这样：

```
#file:data.txt
#data inputs
1 1234 +0.2 23.89 6.21
2 132 -0.03 3.22 0.1
3    32 0.00 31.50   4.76 
```

我想使用 stringtreams 将前 3 列写入一个新文件

```
#include <cctype>
#include <sstream>
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>
using namespace std;
int main(){
  string line;
  float curr_price, change;
  int stock_number;
  ifstream fin("data3.txt");
  istringstream iss;
  ostringstream oss;
  if(!fin){
    cerr<<"Can't open a file";
  }
  ofstream outfile("data2.txt");
  while (getline(fin,line)){
    iss.clear();
    iss.str(line);
    iss>>stock_number>>curr_price>>change;
    while(isspace(iss.peek()))
      iss.ignore();
    while(iss.str() == "#")
      iss.ignore();
    if( iss.str()==""){
      break;
    }
    oss<<stock_number<<"\t"<<curr_price<<"\t"<<change<<"\n";
    outfile<<oss.str();
  }
} 
```

但我的输出文件看起来很糟糕：

```
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
1   1234    0.2
0   0   0
0   0   0
1   1234    0.2
2   132 -0.03
0   0   0
0   0   0
1   1234    0.2
2   132 -0.03
3   32  0 
```

我不知道零是从哪里来的，如果我将 ofstream 放在 while 循环之外，那么它只会打印最后一个数据行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:36:59.527

一个问题是你总是输出数字，即使你得到了评论。此外，窥视和忽略的东西不应该是必要的。要检查数字是否被成功读取，只需在读取后将流评估为布尔值，就像我在此示例中所做的那样：

```
#include <fstream>
#include <sstream>
using namespace std;

int main(int argc, char ** argv)
{
    ifstream in(argv[1]);
    ofstream out(argv[2]);
    string line;
    while(getline(in,line))
    {
        if(line.empty() || line[0] == '#') continue;
        double number, price, change;
        stringstream ss(line);
        if(ss >> number >> price >> change)
            out << number << "\t" << price << "\t" << change << "\n";
    }
    return 0;
} 
```

顺便说一下，这是一个使用一些 C 函数会使事情变得更简单和更漂亮的例子：

```
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
using namespace std;

int main(int argc, char ** argv)
{
    string line;
    int number;
    double price, change;
    while(getline(cin,line))
        if(sscanf(line.c_str(), "%d %lf %lf", &number, &price, &change)==3)
            printf("%3d %8.2f %8.2f\n", number, price, change);
    return 0;
} 
```

此示例使用标准输入和输出而不是文件。这些被称为“标准”的原因是：它们非常灵活，可以非常简单地重定向到文件和其他进程/从文件和其他进程中重定向。但是该程序与文件非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:49:35.480

您需要**始终**检查您的输入是否成功！此外，您很少需要求助于基于奇怪字符的阅读技巧。例如，有一个操纵器可以跳过前导空格：`std::ws`. 下面是一个对值的类型没有做太多假设的版本。如果一行的第一个值必须是整数，则可以使用`int`代替，`std::string`甚至可以跳过对注释行的检查！您只需检查读取三个值是否成功。

```
#include <sstream>
#include <fstream>
#include <string>

int main()
{
    std::ifstream      in("input.txt");
    std::ofstream      out("output.txt");
    std::istringstream lin;
    std::string        tmp0, tmp1, tmp2;
    for (std::string line; std::getline(in, line); ) {
        lin.clear();
        lin.str(line);
        if ((lin >> std::ws).peek() != '#'
            && lin >> tmp0 >> tmp1 >> tmp2) {
            out << tmp0 << '\t' << tmp1 << '\t' << tmp2 << '\n';
        }
    }
} 
```

# wcf - InProcProxyFactory.CreateInstance 从 WCF 服务调用

> ID：13146273
> 
> 赞同：3
> 
> 时间：2012-10-30T19:26:41.763
> 
> 标签：wcf, proxy, proxyfactory, servicemodelex

我正在尝试使用 IDesign 中的 ServiceModelEx 库。当我尝试打电话时：

InProcFactory.CreateInstance();

从 WCF 服务中（基本上从 WCF 服务 A 调用 WCF 服务 B），我收到以下错误：

找不到动态程序集

失败的代码是：

```
 internal static Assembly[] GetWebAssemblies()
  {
     Debug.Assert(IsWebProcess());
     List<Assembly> assemblies = new List<Assembly>();

     if(Assembly.GetEntryAssembly() != null)
     {  
        throw new InvalidOperationException("Can only call in a web assembly");
     }
     foreach(ProcessModule module in Process.GetCurrentProcess().Modules)
     {
         assemblies.Add(Assembly.LoadFrom(module.FileName));
         if (module.ModuleName.StartsWith("App_Code.") && module.ModuleName.EndsWith(".dll"))
         {
             assemblies.Add(Assembly.LoadFrom(module.FileName));
         }
         if (module.ModuleName.StartsWith("App_Web_") && module.ModuleName.EndsWith(".dll"))
         {
             assemblies.Add(Assembly.LoadFrom(module.FileName));
         }
     }
     if (assemblies.Count == 0)
     {
         throw new InvalidOperationException("Could not find dynamic assembly");
     }
     return assemblies.ToArray();
  } 
```

程序集没有以 App_Web 或 App_Code 为前缀，因为这不是网站或 Web 应用程序（它是 WCF 服务）。但是，如果我从网站、Web 应用程序或 EXE 调用该代码，则该代码确实有效。这是设计的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:43:03.753

也许您期望的模块在这种情况下根本没有加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T06:37:37.920

那就是通用解析器崩溃了。它试图尽最大努力发现所有可能包含数据合同的程序集，但随着不同托管环境（特别是 IIS 变体）的弹出，这有点像军备竞赛。动态代码的引入也让生活变得更加困难。

如果您使用最新的 ServiceModelEx (SME)，它有解决此问题的修复程序。只需确保您在下载中使用最新的 .NET 版本（当前为 4.6.1），因为 SME 的旧 .NET 版本下载（例如 4.0 和更早版本）不会有这些修复。如果需要，您可以降级 .NET 版本（在限制范围内）。例如，我将 4.6.1 版本降为 4.5.2。

注意：仅当您通过通用解析器使用数据合同继承时才需要这样做。如果您不需要此功能并且它会导致您出现问题，您可以注释掉有问题的代码。

# java - 已建立大气套接字，但没有接收/发送数据

> ID：13146274
> 
> 赞同：1
> 
> 时间：2012-10-30T19:26:54.977
> 
> 标签：java, websocket, atmosphere

我正在按照 Atmosphere[教程](https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-AtmosphereHandler,-WebSocket-and-Long-Polling)获取基本的聊天应用程序设置。目前在运行 javascript 时，它似乎能够使用 Web 套接字建立与服务器的连接。我在 Chrome 控制台中得到以下信息：

```
Invoking executeWebSocket core.js:2298
Using URL: ws://localhost:8080/web-transport/chat?X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.1&X-Atmosphere-Transport=websocket&X-Cache-Date=0&Content-Type=application/json core.js:2298
Websocket successfully opened 
```

但是，当我尝试发布数据 (subSocket.push(...)) 时，似乎什么也没发生。我已经尝试调试 AtmosphereHandlerService 但它似乎从未被击中（并且没有生成日志。

我错过了什么会导致这种情况？

到目前为止，我有以下内容：

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:j2ee="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee    http://java.sun.com/xml/ns/j2ee/web-app_2.5.xsd">
    <description>AtmosphereServlet</description>
    <display-name>AtmosphereServlet</display-name>
    <servlet>
        <description>AtmosphereServlet</description>
        <servlet-name>AtmosphereServlet</servlet-name>
        <servlet-class>org.atmosphere.cpr.AtmosphereServlet</servlet-class>
        <!-- If you want to use Servlet 3.0 -->
        <!-- <async-supported>true</async-supported> -->
        <!-- List of init-param --> 
    </servlet>
    <servlet-mapping>
        <servlet-name>AtmosphereServlet</servlet-name>
        <!-- Any mapping -->
        <url-pattern>/chat/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

ChatAtmosphereHandler.java

```
@AtmosphereHandlerService(path = "/chat")
public class ChatAtmosphereHandler implements AtmosphereHandler {

    public void onRequest(AtmosphereResource resource) throws IOException {

        AtmosphereRequest request = resource.getRequest();

        if (request.getMethod().equalsIgnoreCase("GET")) {
            resource.suspend();
        } else if (request.getMethod().equalsIgnoreCase("POST")) {
            resource.getBroadcaster().broadcast(request.getReader().readLine().trim());
        }

    }

    public void onStateChange(AtmosphereResourceEvent event) throws IOException {

        AtmosphereResource resource = event.getResource();
        AtmosphereResponse response = resource.getResponse();

        if (resource.isSuspended()) {

            response.getWriter().write("Hello");

            switch (resource.transport()) {
                case JSONP:
                case LONG_POLLING:
                    event.getResource().resume();
                    break;
                case WEBSOCKET:
                case STREAMING:
                    response.getWriter().flush();
                    break;
            }

        } else if (!event.isResuming()) {
            event.broadcaster().broadcast("bye bye");
        }

    }

    public void destroy() { 
    }

} 
```

Maven依赖：

```
 <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-runtime</artifactId>
        <version>1.0.2</version>
    </dependency>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-jersey</artifactId>
        <version>1.0.2</version>
    </dependency>
    <dependency>
        <groupId>eu.infomas</groupId>
        <artifactId>annotation-detector</artifactId>
        <version>3.0.1</version>
    </dependency> 
```

最后是javascript：

```
$(document).ready(function() {

    var socket = $.atmosphere;
    var subSocket = null;

    var request = { 
        url: 'http://localhost:8080/web-transport/' + 'chat',
        contentType : "application/json",
        logLevel : 'debug',
        transport : 'websocket' ,
        fallbackTransport: 'long-polling'
    };

    request.onOpen = function(response) {
        console.log('onopen', response);
    };

    request.onReconnect = function (request, response) {
        console.log('onreconnect', request, response);
    };

    request.onMessage = function (response) {
        console.log('onmessage', response);
    };

    request.onError = function(response) {
        console.log('onerror', response);
    };

    $('#send').click(function(){
        subSocket.push(JSON.stringify({ author: 'me', message: 'hello' }));
    });

    $('#subscribe').click(function(){
        subSocket = socket.subscribe(request);
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:58:41.650

我终于发现问题不在于代码或氛围，而在于 Glassfish。

解决方案是使用以下命令启用 Web 套接字：

```
asadmin set configs.config.server-config.network-config.protocols.protocol.http-listener-1.http.websockets-support-enabled=true 
```

确保使用命令提示符运行命令。我之前通过管理 gui 启用了网络套接字，但不知何故，它似​​乎没有正确应用。在我运行了上面的命令并尝试了上面的代码之后，它运行良好。

# javascript - 脚本正在运行，但只能使用“hack”

> ID：13146277
> 
> 赞同：2
> 
> 时间：2012-10-30T19:27:09.027
> 
> 标签：javascript, google-apps-script

**背景：**

我是一个大家庭的一员，为了在圣诞节为每个人节省一些钱，我们做了一个秘密圣诞老人来送礼。我正在编写这个脚本，以便可以通过电子表格管理这一切，因为我们的过程可能有些混乱。规则是：

1.  每个“圣诞老人”都有两个名字，他们必须为其购买礼物。
2.  这两个名字不能相同。
3.  夫妻不能给对方或他们的孩子礼物。孩子不能给他们的兄弟姐妹或父母送礼物。

这是一个包含一些示例数据的表格： ![样本数据](../Images/56e12b34f527310cd18ecdaf740361dc.png)

**问题**

我相信我的问题是由于以下代码而发生的：

```
//Remove disallowedNames from currentAvailableNames
for (j=0; j<disallowed.length; j++){
  var disallowedName = disallowed[j];
  currentAvailableNames.splice(currentAvailableNames.indexOf(disallowed[j]), 1);
} 
```

出于某种原因，不允许的名称也从 availableNames 数组中删除，我不知道为什么。我能够“修复”它的唯一方法是在选择收件人后添加以下代码：

```
//Add Disallowed Names back to Available Names Array
for (k=0; k<disallowed.length; k++){
  var disallowedName = disallowed[k];
  if (disallowedName.length >0) {
    availableNames.push(disallowedName);
  }
} 
```

**原始代码**

```
function giftAssignments() {
  //Get Settings
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var settings = ss.getSheetByName("Settings");
  var resultsSheet = ss.getSheetByName("Results");
  var numOfAssignments = settings.getRange("B2").getValue();
  var minPrice = settings.getRange("B3").getValue();
  var maxPrice = settings.getRange("B4").getValue();
  var firstName = settings.getRange("B5").getValue();
  var santasLastRow = settings.getLastRow();
  var santasLastCol = settings.getLastColumn();
  var santasTotal = santasLastRow - firstName + 1;
  var santasAsRange = settings.getRange(firstName,1,(santasLastRow - firstName + 1), santasLastCol).getValues();

  //Create Santas Array (santas)
  var santas = []
  for (var i=0; i<santasAsRange.length; i++) {
    var name = santasAsRange[i][0];
    var email = santasAsRange[i][1];
    var disallowedAsString = santasAsRange[i][2];
    disallowedAsString = disallowedAsString.replace(", ",",");
    var disallowed =  disallowedAsString.split(",");
    disallowed.push(name);
    var santa = [];
    santa[0] = name;
    santa[1] = email;
    santa[2] = disallowed;
    santas.push(santa);
  }
  //Create Array of Names (availableNames)
  var availableNames = [];
  for (i=0; i<santas.length; i++) {
    var aName = santas[i][0];
    availableNames.push(aName);
  }
  //Assign Recipients
  var results = assignRecip(santas, availableNames);
  Logger.log("RESULTS = " + results);
}

function assignRecip(santas, names) {
  var availableNames = names;
  for (i=0; i<santas.length; i++) {
    var currentAvailableNames = availableNames;
    var name = santas[i][0];
    var disallowed = santas[i][2];
    Logger.log("Santa = " + name);
    Logger.log("availableNames = " + availableNames);

    //Remove disallowedNames from currentAvailableNames
    for (j=0; j<disallowed.length; j++){
      var disallowedName = disallowed[j];
      currentAvailableNames.splice(currentAvailableNames.indexOf(disallowed[j]), 1);
    }
    Logger.log("currentAvailableNames = " + currentAvailableNames);

    //Pick Random Ricipient from currentAvailableNames
    var recipient = currentAvailableNames[Math.floor(Math.random() * currentAvailableNames.length)];
    Logger.log("Recipient = " + recipient); 

    //Add Recipient to Santa Array
    santas[i].push(recipient);

    //Add Disallowed Names back to Available Names Array
    for (k=0; k<disallowed.length; k++){
      var disallowedName = disallowed[k];
      if (disallowedName.length >0) {
        availableNames.push(disallowedName);
      }
    }

    //Add Recipient to Disallowed Names Array
    santas[i][2].push(recipient);

    //Remove Recipient from Available Names Array
    availableNames.splice(availableNames.indexOf(recipient),1);
    Logger.log("availableNames = " + availableNames);
    Logger.log(" ");
  }
  return santas;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:30:19.330

它们是对同一个数组的引用。此代码不会复制 Array 本身。它复制对数组的引用。

```
var currentAvailableNames = availableNames; 
```

您可以使用`.slice()`.

```
var currentAvailableNames = availableNames.slice(); 
```

现在你有两个独立的数组，所以直接修改`currentAvailableNames`不会影响`availableNames`.

请注意，这是一个浅克隆。如果它是对象数组或数组，则对嵌套对象的修改仍然可以从两个数组中看到。

# shell - CSV 仅对特定列进行排序

> ID：13146278
> 
> 赞同：1
> 
> 时间：2012-10-30T19:27:11.190
> 
> 标签：shell, csv

所以我收到了这个以逗号分隔的文件：我需要打印如下所示“lastname, phone_number, zip

对于每个姓氏以字母 H 开头的人，我

仅使用 650 区号的电话号码。输出应按反向邮政编码排序“

我只有四列，例如：

```
Harris, K, (650)345-1760 1200, Ellis Street Suite 230 Mountain CA 93042
Mitchell, A, (212)-555-1234 650, This Street NY NY 01234
Thomson, F, (650)-999-9999 1450, The Terrace Avenue Stratford MA 10101
irvin, h, (650)678-2445 12345, denver st santa clara 96503 
```

我认为我在正确的道路上使用这段代码：

```
cat data.csv | awk -F"," '{print $1, $2, $3, $4}' |sort -t ',' -k1|grep "(650)" 
```

然后尝试仅 grep 姓氏的第一个字母...

```
cat data.csv | awk -F "," '$1~/"H*"/' '{print $1, $2, $3, $4}' 
```

但不断收到错误。我怎样才能只搜索最后一列中的第一个字母以及字符串的一部分并将其反转？（我想用排序？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:45:26.357

```
awk -F', ' '
    toupper($1) ~ /^[HI]/ && $3 ~ /^\(650\)/ {
        n = split($NF, ary, " ")
        print ary[n] ":" $0
    }
' filename |
sort -rn |
cut -d: -f2- 
```

生产

```
irvin, h, (650)678-2445 12345, denver st santa clara 96503
Harris, K, (650)345-1760 1200, Ellis Street Suite 230 Mountain CA 93042 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:43:56.113

您可能想看看[r17](http://www.rseventeen.com/examples/)，这是一个可以帮助您完成任务的工具。

# c# - 给定两个泛型类型变量，如何编译 system.linq.expression 树以将它们相乘？

> ID：13146281
> 
> 赞同：1
> 
> 时间：2012-10-30T19:27:15.133
> 
> 标签：c#, generics, expression-trees

给定两个泛型类型变量，如何编译 system.linq.expression 树以将它们相乘？如果两种类型之间没有有效的运算符 *，则表达式抛出异常是完全可以接受的。

我选择 System.Linq.Expression 是因为我记得在这里看到它是这样做的，但关于如何做的还不够。

谢谢。

编辑：我选择编译 Linq 表达式以提高速度；这应该尽可能快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T20:00:08.700

您可以通过编写以下代码了解如何执行此操作：

```
Expression<Func<int, int, int>> multiply = 
    (left, right) => left * right; 
```

将其编译为程序集并使用 IL 反汇编程序（例如 Reflector）查看 C# 编译器生成的代码。

对于给定的示例，C# 编译器将生成如下内容：

```
var left = Expression.Parameter(typeof(int), "left");
var right = Expression.Parameter(typeof(int), "right");

var multiply = Expression.Lambda<Func<int, int, int>>(
    Expression.Multiply(left, right),
    new ParameterExpression[] { left, right }); 
```

这正是您指定乘法表达式所需要做的。

当放在泛型方法中时，它可能看起来像这样：

```
public static Func<T, T, T> BuildMultiplier<T>()
{
    var left = Expression.Parameter(typeof(T), "left");
    var right = Expression.Parameter(typeof(T), "right");

    var multiply = Expression.Lambda<Func<T, T, T>>(
        Expression.Multiply(left, right),
        new ParameterExpression[] { left, right });

    return multiply.Compile();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:59:57.997

尝试这样的事情：

```
var left = Expression.Parameter(typeof(T), "left");
var right = Expression.Parameter(typeof(T), "right");
var body = Expression.Multiply(left, right);
return Expression.Lambda<Func<T, T, TResult>>(body, left, right); 
```

如果 type 没有有效的乘法运算符`T`，则该`Expression.Multiply`行将引发异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T20:06:03.850

> 我选择了 System.Linq.Expression

只是要清楚：还有另一种简单的方法：

```
public static T Multiply<T>(T x, T y) {
    return ((dynamic)x) * y;
} 
```

并将工作（包括缓存）卸载到框架。另一种选择 - [MiscUtil 具有通用的操作员支持](http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html)，将其包装起来 - 可[在此处](http://www.yoda.arachsys.com/csharp/miscutil/)下载。

# vba - 使用 Outlook 2007 中的脚本将字符串复制到剪贴板

> ID：13146283
> 
> 赞同：0
> 
> 时间：2012-10-30T19:27:21.777
> 
> 标签：vba, outlook, clipboard, outlook-2007

我正在构建一个将由 Outlook 中的规则触发的脚本。该脚本正在邮件正文中查找特定字符串并提取一些文本。

我想将该文本复制到剪贴板以在另一个应用程序中使用它。

这是我的代码：

```
Sub SaveAsText(MyMail As MailItem)

    Dim pos As String
    Dim loco As String

    pos = InStr(MyMail.Body, "message for Loco")
    loco = Mid(MyMail.Body, pos + 17, 8)

End Sub 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:49:50.037

我运行了这个 Outlook 2003 宏：

```
Sub CopyToScratchPad()

  Dim DataToSave As New DataObject

  DataToSave.SetText "Test string"
  DataToSave.PutInClipboard

End Sub 
```

然后我打开记事本并单击 Ctrl+C。“测试字符串”出现了。

所以，你可以做你想做的事，但这真的是实现你目标的最佳方式吗？

# java - 使用 Java 数组进行计算

> ID：13146284
> 
> 赞同：1
> 
> 时间：2012-10-30T19:27:39.917
> 
> 标签：java, arrays

第一次在这里海报。我已经走到了尽头，准备放弃我对编程职业的追求。我没有交上我的最后一个作业，因为我无法让我的程序运行。现在，我正在自己做一些额外的练习。一个使用数组的简单练习作业，我无法弄清楚它的最后一点。有人可以告诉我我在这里做错了什么吗？当我运行它时，我可以输入数据，但程序在显示输出之前退出并出现以下错误：

```
Exception in thread "main" java.lang.NullPointerException
     at Payroll.getGrossPay(Payroll.java:47)
     at PayrollCalc.main(PayrollCalc.java:32) 
```

我可以分别显示小时数和 payRate，但我不能显示 GrossPay。我对我的构造函数也不满意，但不太确定如何处理它。这个问题需要我初始化 Payroll 类中的数组。

* * *

```
public class Payroll {
    private final int NUM_EMPLOYEES = 3;
    private int[] employeeId = {5658845, 4520125, 7895122}, empId, hours;
    private double[] payRate, wages, grossPay;

    public Payroll()
{
    empId = employeeId;
}
public void setEmployeeId(int[] employeeId)
{
    empId = employeeId;
}
public void setEmpHours(int[] empHoursIn)
{
    hours = empHoursIn;
}
public void setEmpPayRate(double[] empPayRateIn)
{
    payRate = empPayRateIn;
}
public int[] getEmployeeId()
{
    return empId;
}
public int[] getEmpHours()
{
    return hours;
}
public double[] getEmpPayRate()
{
    return payRate;
}
public double[] getGrossPay()
{
    for (int count = 0; count < NUM_EMPLOYEES; count++)
    {
        grossPay[count] = getEmpPayRate()[count] * getEmpHours()[count];
    }

    return grossPay;
}
} 
```

* * *

导入 java.util.Scanner；

```
public class PayrollCalc 
{
public static void main(String[] args) 
{
    int count;
    final int NUM_EMPLOYEES = 3;
    int[] empHours = new int[NUM_EMPLOYEES];
    double[] empPayRate = new double[NUM_EMPLOYEES];
    Scanner keyboard = new Scanner(System.in);
    Payroll payroll = new Payroll();

    for (count = 0; count < NUM_EMPLOYEES; count++)
    {
        System.out.print("Enter total hours for employee " +  
                           payroll.getEmployeeId()[count] + ": ");
        empHours[count] = keyboard.nextInt();
        payroll.setEmpHours(empHours);

        System.out.print("Enter pay rate for employee " + 
                           payroll.getEmployeeId()[count] + ": ");
        empPayRate[count] = keyboard.nextDouble();
        payroll.setEmpPayRate(empPayRate);
    }

    System.out.println("\nEMPLOYEE ID\tGROSS PAY");
    System.out.println("-----------     ---------");

    for (count = 0; count < NUM_EMPLOYEES; count++)
    {
        System.out.println(payroll.getEmployeeId()[count] + "\t\t" + 
                           payroll.getGrossPay()[count]);           
    }
  }
  } 
```

* * *

在此先感谢您的帮助！

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:34:08.223

Your `NullPointerException` is occuring here:

```
grossPay[count] = getEmpPayRate()[count] * getEmpHours()[count]; 
```

as you haven't initialised the `double` array `grossPay` (or `payRate` or `wages`). You could use:

```
private double[] grossPay = new double[NUM_EMPLOYEES]; 
```

also you'll need:

```
private double[] payRate = new double[NUM_EMPLOYEES];
private double[] wages = new double[NUM_EMPLOYEES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:34:47.223

Doesn't look like you ever initialized the grossPay array - see if this makes a difference:

```
private double[] payRate, wages;
private double[] grossPay = new double[NUM_EMPLOYEES]; 
```

As a tip, when starting out it's probably best to initialize all your variables as soon as you can, which in your case is mostly at construction time. When you get a little more comfortable then you initialize when you need things - for example:

```
public double[] getGrossPay()
{
  if (grossPay == null) {
    grossPay = new double[NUM_EMPLOYEES]; 

    for (int count = 0; count < NUM_EMPLOYEES; count++)
    {
      grossPay[count] = getEmpPayRate()[count] * getEmpHours()[count];
    }
  }
  return grossPay;
} 
```

Good luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:37:31.650

数组 GrossPay 从未在公共 double[] getGrossPay() 中的 Payroll 中初始化。

您需要在使用它之前初始化数组的大小。

可能最好是添加构造函数：

```
public Payroll() {
grossPay= new double[NUM_EMPLOYEES];
} 
```

# c# - 当我的任何 UI 元素在 WPF/C# 中发生更改时，是否会触发任何事件？

> ID：13146286
> 
> 赞同：2
> 
> 时间：2012-10-30T19:27:51.967
> 
> 标签：c#, wpf, events, user-interface

我有一个 WPF 应用程序，其中包含构成 UI 的大量文本框和组合框。我有一个“保存”按钮，只要这些文本框或组合框的内容发生变化，我就想将其变为红色。是否有一个我可以处理的事件，这样我就不必写了

```
btnSave.Foreground = Brushes.Red 
```

每个文本框的 _TextChanged 事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:32:24.100

You could loop through all textboxes on the form by looping through the form's child `Controls`, and bind the event in one swoop accordingly.

```
//-- This is a hair on the pseudo side, ChangeSavebuttonToRedHandler is an event 
//-- handler for your foreground change.. You can also use a lambda or whatever 
//-- you'd like.
foreach(var loChild in this.Controls)
{
    if(loChild is TextBox)
    {
        loChild.TextChanged += ChangeSaveButtonToRedHandler;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:33:58.877

There are plenty ways to do such a thing. The best thing is to understand `"Bubbling and Tunneling in WPF"` and the usage of `"Attached events"`. Here are some references:

This link has all you need. [http://msdn.microsoft.com/en-us/library/ms742806.aspx](http://msdn.microsoft.com/en-us/library/ms742806.aspx)

[http://www.wpfmentor.com/2008/11/understand-bubbling-and-tunnelling-in-5.html](http://www.wpfmentor.com/2008/11/understand-bubbling-and-tunnelling-in-5.html)

Cheers

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:09:56.460

使用 Blend 创建行为。请参阅：[使用 Blend 将可见性行为添加到用于 WPF 或 Silverlight 的 DataGrid](http://omegacoder.com/?p=876)

# php - 本地文本文件到 PHP 中的变量

> ID：13146287
> 
> 赞同：0
> 
> 时间：2012-10-30T19:27:53.247
> 
> 标签：php, file, text, upload, local

我正在尝试将本地 .txt 文件中的文本捕获到 PHP 变量中，以便可以保存到数据库中。我已经做了几个小时了，没有运气。我已经尝试了几乎所有东西，但这就是我目前所拥有的。其中大部分被注释掉以进行调试。

照原样，它只是向我显示一个空白页面，并没有回显任何内容。我究竟做错了什么？任何建议将不胜感激。

**编辑：** 完成更新的代码。由于出现错误，我在第 12 行收到有关未定义索引的通知。

```
<?php
error_reporting(E_ALL); ini_set('display_errors','1');
?>

    <html>
    <head>
    <title>upload file</title>
    </head>
    <body>
    <?php

    $size = $_FILES['file']['size'];
    $filename = $_FILES['file']['tmp_name']; // name of the file

     //$max_filesize = 100000; // Maximum filesize in BYTES
     //$ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); // Get the extension from the filename.
     //  if($ext = "txt") //check for .txt
     //  die('Only .txt files allowed.');
     //  if($size > $max_filesize) //check file size
     //  die('File is too large');

    if(file_exists($filename)){

    $fp = fopen($filename, "r");
    $str = fread($fp, filesize($filename));
     echo $str;
    fclose($fp); 
     }

    ?>

    </body>
    </html> 
```

和上传表格：

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
<input type="hidden" name="MAX_FILE_SIZE" value="100" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:31:42.670

测试`$_FILES['uploadedfile']['tmp_name']`- 这是在服务器上创建的临时文件的位置。`$_FILES['uploadedfile']['name']`包含客户端上传文件的原始名称。

更新代码：

```
$size = $_FILES['file']['size'];
$filename = $_FILES['file']['name']; 
```

至

```
$size = $_FILES['uploadedfile']['size'];
$filename = $_FILES['uploadedfile']['tmp_name']; 
```

变量的文档`$_FILES`可以[在 PHP 手册](http://www.php.net/manual/en/features.file-upload.post-method.php)中找到。查看本[教程以使用 PHP 上传文件](http://www.w3schools.com/php/php_file_upload.asp)。

除此之外，更正`$size($filename)`to `filesize($filename)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:31:05.027

使用 $size 的文件大小，以便读取`$str = fread($fp, filesize($filename));`

# sql-server - GetDate 中的月份和年份部分

> ID：13146288
> 
> 赞同：0
> 
> 时间：2012-10-30T19:28:04.603
> 
> 标签：sql-server, asp.net-mvc

我在我的 asp.net 应用程序中使用 gridview，我想将数据集限制为在当前月份和年份提交的请求

我是应用程序开发的新手，并以以下方式思考

从 getdate() 函数中获取月份和年份部分，然后在 where 条件下将其与我们表中 receiveddate 列的月份和年份进行比较

我的选择语句如下

从 customerrequests 中选择 requestno,receiveddate,businessneed where receiveddate = getdate()

在上面的 sql 语句中我如何实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:35:15.990

There are two ways you could do this:

*   In SQL by passing two parameters for month and year. This is what your questions sounds like and can be done by just doing this:

    `select requestno,receiveddate,businessneed from customerrequests where YEAR(receiveddate) = YEAR(getdate()) AND MONTH(receiveddate) = MONTH(getdate())`

*   The other way would be to construct a date object on the client side and pass that in to your query and then just use regular date comparison techniques.

Hope that helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:39:54.463

您可以执行以下操作：

```
DECLARE @FirstDate DATETIME    
SELECT @FirstDate = DATEADD(month, DateDiff(Month, 0, GETDATE()), 0)

SELECT 
      requestno,receiveddate,businessneed 
FROM 
      customerrequests 
WHERE 
      receiveddate >= @FirstDate 
```

希望这可以帮助！！

# mysql - 行号和不同的在一起

> ID：13146290
> 
> 赞同：1
> 
> 时间：2012-10-30T19:28:09.113
> 
> 标签：mysql

给定表“table1”

```
name
------
Jhon
Jhon
Robert
Robert
Robert 
```

需要获取唯一名称和数字名称作为队列，即结果为：

```
1  Jhon
2  Robert 
```

此查询不起作用

```
SET @n = 0;

SELECT @n := @n + 1 AS n,  DISTINCT  name FROM table1 
```

我不问怎么做，（这可能是用子查询来做的吧？），我的问题是：为什么不工作查询，我在楼上写的？为什么不喜欢mysql这个查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:33:07.360

```
SELECT @rownum := @rownum + 1 AS row_number,
       table1.name
FROM   (SELECT DISTINCT name
        FROM   sparkles) table1
       JOIN (SELECT @rownum := 0) r 
```

Will produce:

```
| ROW_NUMBER |   NAME |
-----------------------
|          1 |   John |
|          2 | Robert |
```

## [See it in action](http://sqlfiddle.com/#!2/31a4a/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:39:29.640

为什么 MySQL 不喜欢这个查询：

```
SELECT @n := @n + 1 AS n,  DISTINCT  name FROM table1 
```

此查询不正确，因为 SQL 的`DISTINCT`查询修饰符适用于整行，而不仅仅是单个列或列的子集。这是 SQL 程序员常见的误解。

换句话说，`DISTINCT`只有当*所有*列都与另一行相同时，结果才会减少。

在语法上，`DISTINCT`关键字必须跟在`SELECT`. 放在其他列之后是不正确的。

您可以编写以下内容：

```
SELECT DISTINCT @n := @n + 1 AS n, name FROM table1 
```

但是这个查询不会得到你想要的。它将递增变量应用于table1 的*每一*行，然后应用于`DISTINCT`整个结果。由于保证每一行都有一个不同的 value `n`，所以`DISTINCT`不会有任何效果。

其他答案描述了`DISTINCT`在派生表（子查询）内部进行操作，以便仅根据 的不同值强制减少行`name`，然后将递增变量应用于结果行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:30:20.597

目前尚不清楚您在问什么，但是您的意思是这样的：

```
select name, @rn:=@rn+1 n
from
(
  select distinct name
  from table1
) t1, (SELECT @rn:=0) r
order by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e5fb6/3)

结果：

```
|   NAME | N |
--------------
|   Jhon | 1 |
| Robert | 2 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T03:22:42.963

当我探索没有像`Row Number()`MS SQL 中那样的函数时，我也遇到了同样的问题，然后我尝试了以下技巧，它对我有用

```
SELECT @n := @n + 1 AS n,  name from (select DISTINCT  name FROM table1) tb; 
```

# google-chrome - 如何从 Chrome 扩展中读取自定义变量？

> ID：13146291
> 
> 赞同：1
> 
> 时间：2012-10-30T19:28:09.407
> 
> 标签：google-chrome, google-chrome-extension

我正在为 chrome 制作一个扩展来可视化 js 结构，但由于某种原因，我无法从扩展中访问自定义 js 变量。我如何阅读这些变量/属性？想知道 jQuery 是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:46:45.520

内容脚本在[*孤立的世界*](http://developer.chrome.com/extensions/content_scripts.html#execution-environment)中运行：

> 他们**不能**：
> 
> *   使用由网页或其他内容脚本定义的变量或函数

您应该尝试从内容脚本向页眉注入一个`<script src='injected.js'><script>`（该脚本应该能够“看到”网页定义的变量和函数），然后在这两者之间建立通信。内容脚本和注入脚本可以简单地通过 DOM 进行对话（例如，在隐藏的 div 中发布消息），或者更好的是，使用[postMessage/addEventListener](http://developer.chrome.com/extensions/content_scripts.html#host-page-communication)。

# asp.net - 在 DetailView 更新后将字段设置为一个值

> ID：13146295
> 
> 赞同：0
> 
> 时间：2012-10-30T19:29:03.713
> 
> 标签：asp.net

更新DetailsView后，点击DetailView上的Update Command按钮；我想将其中一个字段设置为“完成”。我在这里做错了什么？请。帮助。这是我背后的代码：

```
 Protected Sub Test(sender As Object, e As System.Web.UI.WebControls.DetailsViewUpdatedEventArgs) Handles DetailsView1.ItemUpdated
        If IsPostBack Then
            Dim TextBox7 As TextBox = TryCast(DetailsView1.Rows(0).Cells(0).FindControl("TextBox7"), TextBox)
            TextBox7.Text = "Complete"
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:32:18.293

我已经使用了这种方法并让它发挥作用。

```
Protected Sub PageDetailsView_ItemCommand(sender As Object, e As DetailsViewCommandEventArgs)
    If Me.PageDetailsView.DefaultMode = DetailsViewMode.[ReadOnly] Then  
        If e.CommandName.Equals("GenerateModifiedDate", StringComparison.CurrentCultureIgnoreCase) Then 
            Dim modifiedDateLabel As Label = TryCast(Me.PageDetailsView.FindControl("ModifiedDateLabel"), Label)
            modifiedDateLabel.Text = DateTime.Now.ToString()
        End If 
    Else
        If e.CommandName.Equals("GenerateModifiedDate", StringComparison.CurrentCultureIgnoreCase) Then
           Dim modifiedDateTextbox As TextBox = TryCast(Me.PageDetailsView.FindControl("ModifiedDateTextbox"), TextBox)
           modifiedDateTextbox.Text = DateTime.Now.ToString()
        End If 
    End If
End Sub 
```

# security - 为什么我应该在 cookie 中使用会话 ID，而不是在 cookie 中存储登录名和（散列）密码？

> ID：13146298
> 
> 赞同：11
> 
> 时间：2012-10-30T19:29:18.347
> 
> 标签：security, session, login

（我很惊讶这个问题现在没有在 Stack 上被问到，但是我做了一些搜索并且找不到任何东西 oO）

我正在开发基于服务的 webapp，我想知道处理用户登录的最佳方式是什么。到目前为止，我有：

1.  当用户登录时，他们提供信用。密码在本地加盐和散列，而不是通过 POST 传输到服务器（因此嗅探用户将无法检索原始密码，即在其他站点上检查它们）
2.  登录和散列密码存储在 cookie 中，TTL 为 15 分钟（每一个 webaction 都被撤销）
3.  Passwod 在服务器端进行了加盐和哈希处理，并且与存储在数据库中的密码进行了比较（因此，密码使用不同的盐进行了双重哈希处理，这适用于将闯入数据库的人 - 他们仍然无法恢复登录贷记）
4.  用户每 5 分钟最多可以从单个 IP 进行 3 次登录尝试
5.  用户获取有关上次成功和不成功登录尝试的信息以及日期和 IP

有人注意到最好在 cookie 中存储唯一的会话 id 而不是散列密码，我想知道为什么它如此重要——如果有人嗅探数据包，而不是不管会话 id 与否——他们仍然可以从登录中获取包含所有数据的数据包需要冒充合法用户并自己登录。那么，与在 cookie 方法中存储登录名和哈希密码相比，存储会话 ID 方法还有其他优点吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T23:41:07.960

将散列密码存储为 cookie 是非常严重的漏洞，并且是[OWASP 违规](https://www.owasp.org/index.php/Top_10_2010-A3-Broken_Authentication_and_Session_Management)。散列密码的全部意义在于您迫使攻击者破坏散列以便登录。如果攻击者可以从数据库中提取哈希然后登录，那么你就有了一个相当于以纯文本形式存储密码的系统。

每个平台都有一个会话处理程序，在 php 中只需使用`session_start()`$_SESSION 超级全局。通过编写自己的会话处理程序，您将变得不那么安全。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T19:50:48.713

通过存储会话 ID，您可以识别同一用户的不同会话，并且您可能希望以任何特殊方式处理它们（例如，只允许单个会话，或者拥有与会话相关联的数据而不是与用户相关联的数据）。

而且您可以轻松地将活动与不同的会话区分开来，因此如果您在计算机中保持打开状态，则无需更改密码即可终止会话，而其他会话不会注意到差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T20:21:46.360

双重哈希并不能保护您免受攻击。如果从 cookie 中获取存储的用户 ID 和散列密码并将其发送到服务器，他将立即获得访问权限。使用会话 ID，它至少会超时。

# primefaces - 如何更改 p:barChart yaxis-tick 颜色

> ID：13146300
> 
> 赞同：2
> 
> 时间：2012-10-30T19:29:39.750
> 
> 标签：primefaces, jqplot

如何更改 barChart yaxis-tick 颜色

```
.jqplot-axis .jqplot-yaxis .jqplot-yaxis-tick{
     color: green;
} 
```

我尝试了我能找到的任何选项（也使用 Firebug），但没有任何效果

任何想法

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:07:29.527

在您的 : 上附加以下`extender`功能`barChart`：

```
function ext() {
    this.cfg.axes.yaxis.tickOptions = {
        textColor : '#00ff00'
    };
} 
```

# jquery - 多久可以检索到 DOM 元素的大小？

> ID：13146301
> 
> 赞同：1
> 
> 时间：2012-10-30T19:29:46.523
> 
> 标签：jquery

我正在使用该事件进行 ajax 调用以检索一些 html，然后将其用于填充元素`window.load`的 .html 属性。`<li>`这可行，尽管性能可能会更好，因为在我的通话开始之前必须加载所有内容。

作为此 ajax 调用的一部分，参数之一是`<li>`'`outerWidth`值。但是，当我尝试进行 ajax 调用时，例如，`document.ready`处理程序`outerWidth`设置不正确。我认为这是因为 DOM 元素当时还没有机会知道它们的最终大小。但是，在`document.ready`火灾发生之前我可以处理一个我知道元素大小的事件吗？`window.load`和之间的东西`document.ready`？

我还使用了 jQuery mobile 的 pageinit 事件来代替，`document.ready`但在这种情况下没有区别，这是可以理解的。我将使用 pageinit 继续前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:20:50.507

您可以使用`load()`on 特定的 DOM 元素而不是 on `window`。

[jQuery .load()](http://api.jquery.com/load-event/)

此方法是`.bind('load', handler)`.

当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

通过绑定到特定 DOM 元素上的加载事件，您不必等待其他（非子）项目呈现并且应该具有更好的性能。`window.load()`，正如您所发现的，将等待所有子元素加载。

例如，考虑一个带有简单图像的页面：

```
<img src="book.png" alt="Book" id="book" /> 
```

事件处理程序可以绑定到图像：

```
$('#book').load(function() {
  // Handler for .load() called.
}); 
```

# ruby-on-rails - Ruby - 如何访问模块的方法？

> ID：13146303
> 
> 赞同：1
> 
> 时间：2012-10-30T19:30:03.843
> 
> 标签：ruby-on-rails, ruby, module, forem

我正在使用 Forem gem 安装一个论坛。有一个允许头像个性化的选项，因为可以使用 Facebook 登录。您只需在 User 模型中指定您的方法即可。

```
# Forem initializer
Forem.avatar_user_method = 'forem_avatar'

# User model
def forem_avatar
  unless self.user_pic.empty?
    self.user_pic
  end
end 
```

但我想为普通的非 Facebook 帐户使用 Gravatar。[我在 Forem 上找到了该方法](https://github.com/radar/forem/blob/master/app/helpers/forem/posts_helper.rb)，理论上，我需要调用该`avatar_url`方法：

```
# User model
def forem_avatar
  unless self.user_pic.empty?
    self.user_pic
  else
    Forem::PostsHelper.avatar_url self.email
  end
end 
```

但是，Forem 不是一个实例，而是一个模块，我不能调用它，也不能创建一个新实例。简单的方法是复制该方法的行，但这不是重点。有没有办法做到这一点？

谢谢

# 更新

两个答案都是正确的，但是当我以任何一种方式调用该方法时，都会出现此`undefined local variable or method 'request'`错误，这是原始`avatar_url`.

有没有办法像在 PHP 中那样全球化该对象？我是否必须手动传递该参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:34:49.173

perhaps reopen the module like this:

```
module Forem
  module PostsHelper
    module_function :avatar_url
  end
end 
```

then call `Forem::PostsHelper.avatar_url`

if `avatar_url` call other module methods, you'll have to "open" them too via `module_function`

or just `include Forem::PostsHelper` in your class and use `avatar_url` directly, without `Forem::PostsHelper` namespace

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:40:33.353

如果您希望能够在用户类中使用这些方法，请包含它们并使用

```
class User < ActiveRecord::Base
  include Forem::PostsHelper

  def forem_avatar
    return user_pic if user_pic.present?
    avatar_url email
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:14:27.980

另一种方法是`Forem.avatar_user_method`动态设置，因为 Forem 代码在使用它之前检查它是否存在，`avatar_url`如果不存在则默认为。

```
class User < ActiveRecord::Base

  # This is run after both User.find and User.new
  after_initialize :set_avatar_user_method

  # Only set avatar_user_method when pic is present
  def set_avatar_user_method
    unless self.user_pic.empty?
      Forem.avatar_user_method = 'forem_avatar'
    end
  end

  def forem_avatar
    self.user_pic
  end
end 
```

这样你就不会用 Forem 中不必要的方法污染你的模型，也不会对 Forem 本身进行修补。

# sql - 如何选择列值不不同的每一行

> ID：13146304
> 
> 赞同：188
> 
> 时间：2012-10-30T19:30:05.227
> 
> 标签：sql, sql-server, sql-server-2008

我需要运行一个 select 语句，它返回列的值不不同的所有行（例如 EmailAddress）。

例如，如果表格如下所示：

```
CustomerName     EmailAddress
Aaron            aaron@gmail.com
Christy          aaron@gmail.com
Jason            jason@gmail.com
Eric             eric@gmail.com
John             aaron@gmail.com 
```

我需要查询返回：

```
Aaron            aaron@gmail.com
Christy          aaron@gmail.com
John             aaron@gmail.com 
```

我已经阅读了很多帖子并尝试了不同的查询，但无济于事。我认为应该工作的查询如下。有人可以提出替代方案或告诉我我的查询可能有什么问题吗？

```
select EmailAddress, CustomerName from Customers
group by EmailAddress, CustomerName
having COUNT(distinct(EmailAddress)) > 1 
```

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2013-10-11T20:26:51.373

这比以下`EXISTS`方式快得多：

```
SELECT [EmailAddress], [CustomerName] FROM [Customers] WHERE [EmailAddress] IN
  (SELECT [EmailAddress] FROM [Customers] GROUP BY [EmailAddress] HAVING COUNT(*) > 1) 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-30T19:49:14.977

您的查询不正确的是您按电子邮件和姓名进行分组，这形成了一组每个独特的电子邮件和姓名组合在一起，因此

```
aaron and aaron@gmail.com
christy and aaron@gmail.com
john and aaron@gmail.com 
```

被视为 3 个不同的组，而不是全部属于 1 个单独的组。

请使用下面给出的查询：

```
select emailaddress,customername from customers where emailaddress in
(select emailaddress from customers group by emailaddress having count(*) > 1) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-07-03T06:29:21.263

```
select CustomerName,count(1) from Customers group by CustomerName having count(1) > 1 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-30T19:34:08.923

How about

```
SELECT EmailAddress, CustomerName FROM Customers a
WHERE Exists ( SELECT emailAddress FROM customers c WHERE a.customerName != c.customerName AND a.EmailAddress = c.EmailAddress) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-10-30T19:38:15.653

只是为了好玩，这是另一种方式：

```
;with counts as (
    select CustomerName, EmailAddress,
      count(*) over (partition by EmailAddress) as num
    from Customers
)
select CustomerName, EmailAddress
from counts
where num > 1 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-19T05:29:52.347

而不是在 where 条件下使用子查询，这会增加大量记录的查询时间。

我建议使用 Inner Join 作为解决此问题的更好选择。

考虑到同一张表，这可能会给出结果

```
SELECT EmailAddress, CustomerName FROM Customers as a 
Inner Join Customers as b on a.CustomerName <> b.CustomerName and a.EmailAddress = b.EmailAddress 
```

为了获得更好的结果，我建议您使用`CustomerID`表中的任何唯一字段。复制`CustomerName`是可能的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-11T13:33:07.277

```
SELECT        Title, Id
FROM            dbo.TblNews
WHERE        (Title IN
      (SELECT  Title 
FROM dbo.TblNews AS TblNews_1
GROUP BY Title
HAVING (COUNT(*) > 1)))
ORDER BY Title 
```

*   按标题排序

# android - Android 可以与不运行 Java 的 PC 对话吗？

> ID：13146310
> 
> 赞同：3
> 
> 时间：2012-10-30T19:30:26.807
> 
> 标签：android, tcp

在我深入编码之前的基本问题。曾经有人告诉我，为了让 Android 手机联系 PC 服务器，该服务器必须用 Java 编写。我觉得这有点令人费解，但情况是这样吗？或者通过使用 TCP/IP 类（套接字），我可以通过管道读取和写入二进制数据，而不管服务器是由谁或如何编写的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:31:23.110

无论是哪种服务器，您都可以写入数据。无论它是用 Java、PHP、C++ 还是任何无关紧要的东西编写的。只要服务器知道如何读写套接字。我今天将我的 Android 手机连接到 PHP 服务器，所以要么我的手机违反了宇宙法则，要么...

此外，同样适用于其他方式，可以使除 Android 以外的其他平台的客户端连接到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:32:37.833

TCP/IP 与语言无关，您可以使用任何支持 TCP/IP 的语言或平台创建客户端/服务器实现，并与任何其他 TCP/IP 连接进行通信。

但是，通过协议进行的通信取决于实现，因此您需要确保客户端和服务器实现都了解通过套接字进行的通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:33:38.660

> 曾经有人告诉我，为了让 Android 手机联系 PC 服务器，该服务器必须用 Java 编写。

这是不正确的。TCP/IP的**全部意义**在于创建一组规则，一个允许跨不同设备、架构、操作系统等进行通信的协议。

**任何[TCP/IP](http://en.wikipedia.org/wiki/Internet_protocol_suite)**客户端都可以与任何 TCP/IP 服务器周期进行通信。没有例外。（前提是他们实现了协议的通用版本）

# linux - 如何在 EC2 实例上安装 xclip？

> ID：13146314
> 
> 赞同：19
> 
> 时间：2012-10-30T19:30:39.970
> 
> 标签：linux, github, amazon-ec2, yum

我正在按照[Github 的说明添加 SSH 密钥](https://help.github.com/articles/generating-ssh-keys#platform-linux)。我已经从我的 AWS EC2 实例生成了 id_rsa.pub 文件，但我无法完成让我使用 xclip 复制文件内容的步骤，因为我无法将 xclip 安装到 EC2 实例上。

1.  我尝试使用在 EC2 实例上安装 xclip `sudo yum install xclip`，但这不起作用（“没有可用的包 xclip”）。
2.  所以我环顾四周，找到[了更详细的安装说明](http://www.cyberciti.biz/faq/xclip-linux-insert-files-command-output-intoclipboard/)，但它们也不起作用（“curl：（22）请求的 URL 返回错误：404 Not Found”），并且评论中建议的正确 URL 也失败了。
3.  （我也尝试使用 Putty 和 ctl-c 复制 id_rsa.pub 文件的文本内容，但 Github 声明生成的密钥无效。）

那么，如何在 64 位 Amazon Linux AMI 2012.09 上安装 xclip？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2018-10-31T19:53:28.407

我今天需要这个文件来处理比 ssh 密钥大的文件，而 cat 还不够。您需要在 EC2 中启用 EPEL 存储库才能获得 xclip：

```
wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
sudo rpm -ivh epel-release-latest-7.noarch.rpm
sudo yum-config-manager --enable epel
sudo yum install xclip -y 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-30T20:02:23.880

你不需要 xclip。只需`ssh`进入 EC2 实例和`cat`终端的密钥，然后将其从终端复制并粘贴到您需要的任何位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-10-09T05:31:19.250

采用

```
sudo amazon-linux-extras install epel -y
sudo yum install xclip -y 
```

来源：[https ://gist.github.com/kevin-kientopp/7a1dee73ab0f1bdb21fe158407a028ea](https://gist.github.com/kevin-kientopp/7a1dee73ab0f1bdb21fe158407a028ea)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-10T07:38:19.807

我并不是要唤醒僵尸，但如果有人仍然想知道你可以`wget`使用 rpm（即从[这里](https://rpm.pbone.net/index.php3/stat/4/idpl/15289734/dir/redhat_el_6/com/xclip-0.12-1.el6.x86_64.rpm.html)）然后

```
sudo yum localinstall xclip-0.12-1.el6.x86_64.rpm 
```

**注意：**您可能需要对某些依赖项执行相同的操作。

# google-app-engine - Google App Engine 内存缓存性能低

> ID：13146316
> 
> 赞同：5
> 
> 时间：2012-10-30T19:30:46.387
> 
> 标签：google-app-engine, memcached

Memcache 是解决方案绝对可以是任何东西的东西之一，而且没有人真正给出一个像样的答案，也许是因为没有。所以我不是在寻找直接的答案，而只是为了让我朝着正确的方向前进。

对于一个典型的请求，这是我的 AppStats 信息：

![在此处输入图像描述](../Images/5ec2434e482e10493007663512772e2a.png)

因此，在总共 440 毫秒的请求中，我在内存缓存中花费了 342 毫秒。在这里，我认为 memcache 应该是闪电般的速度。我一定做错了什么。

在我的管理控制台中查看我的内存缓存统计信息，我有这个：

```
Hit count:  3848
Miss count: 21382
Hit ratio:  15% 
```

我不是这方面的专家，但我很确定 15% 很糟糕。

上面的典型请求有点过于详细，无法解释，但基本上，我创建并放置了一个新实体，该实体还更新并放置了一个父实体，该实体也更新并放置了与父实体关联的任何用户。

在这一切中，我总是一键获取，从不查询。哦，我正在使用 NDB，所以所有基本的[memcache 东西都是自动处理](https://developers.google.com/appengine/docs/python/ndb/cache)的。所以我从来没有在我的代码中自己手动接触过内存缓存。

有任何想法吗？

编辑：这是我的请求的细目

![在此处输入图像描述](../Images/235105924711badbeee46052ac4f2962.png)

所以我只有 2 个数据存储获取和 2 个放置。其余的会自动处理 memcache 的东西。为什么要做这么多工作？手动处理这些东西会更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T20:11:06.070

让我们仔细看看您的数据。七次 memcache 写入所花费的时间与两次数据存储写入所花费的时间一样多。这实际上证明了 memcache 比 Datastore 快 3.5 倍。

如果对您的应用程序的一个典型请求需要更新至少三个数据库实体——然后更新更多实体（关联的用户），那么您不能让这个操作“闪电般快速”。当您读取条目的频率远高于写入条目时，Memcache 会有所帮助。如果对用户记录的读取和写入量相等，则应考虑为此模型[关闭缓存。](https://stackoverflow.com/questions/12727233/ndb-query-fetch-and-contextoptions)

您还可以尝试[异步操作](https://developers.google.com/appengine/docs/python/ndb/async)和[任务队列](https://developers.google.com/appengine/docs/python/taskqueue/)。根据您的描述，您似乎尝试首先更新实体，并且仅在更新完成后才更新其父级，因为这是自然的。您可以同时运行这些；这可能需要一些重构，但这是值得的。

其次，更新“所有相关用户”可能是，也许。推迟到后台产生的任务；[任务队列](https://developers.google.com/appengine/docs/python/taskqueue/)为此提供了一个非常方便的界面。“关联用户”不会立即更新，但他们可能不需要！但是，您的请求的延迟会更少。

# jquery - 从内容可编辑的 div 保存文本时如何避免保留 html 元素

> ID：13146318
> 
> 赞同：1
> 
> 时间：2012-10-30T19:30:45.823
> 
> 标签：jquery, html, ruby-on-rails-3

我有一个内容可编辑的 div，用户可以在其中输入他们的简历，然后保存信息。我使用表单提交，我提交的数据是`$('#bio').html()`生物标签具有可编辑属性内容的地方。所有这一切都非常有效，除非用户点击回车然后它创建一个 div 标签和/或 a `<br>`，它们被保存为用户的简历，然后显示完整的 html 元素，这看起来很草率。

我正在寻找仅保存文本的某种方式或仅显示文本的方式。理想情况下，我希望能够保留新行而不显示`<div>`or `<br>`。

如果这很有用，我正在使用 Ruby-on-Rails 3。

谢谢，威尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:40:00.360

`strip_tags`在你的控制器中使用方法

```
> ActionController::Base.helpers.strip_tags("<br><div>sample")
> # => "sample" 
```

或者，如果您希望
将 转换为“\n”（新行），请执行此操作

```
> "<br>sample".gsub(/<br>/, "\n") 
> "\nsample" 
```

# java - 继承与否

> ID：13146319
> 
> 赞同：3
> 
> 时间：2012-10-30T19:30:53.270
> 
> 标签：java, design-patterns

我正在开发一个组件，它应该：

1.  从某些外部计算组件接收数据（项目集合）。我预计每个请求的输入大约有 100-1K 的项目。

2.  验证数据，如果缺失，计算一些属性

3.  持久化数据

大约有十种类型的项目。我使用继承来建模项目。我有一个具有通用属性和计算的基本项目类以及实现类型特定问题的子类。类似于以下示例：

```
public abstract class BaseItem {
    String name;
    boolean valid = true;

    public void postCalucate() {
        //common calculation
                    valid = valid && (name != null);
    }
}

public   class ItemA extends BaseItem {
    BigDecimal value;

    @Override
    public void postCalucate() {
        //some A specific calculations                        
        super.postCalucate();
    }
}

public   class ItemA1 extends ItemA {
    BigDecimal extraValue;

    @Override
    public void postCalucate() {
        //some A1 subtype specific calculations
               valid = isA1ItemValid();
        super.postCalucate();
    }
}

public   class ItemB extends BaseItem {
    Integer size;

    @Override
    public void postCalucate() {
        //some B specific calculations
        super.postCalucate();
    }
} 
```

有没有更好的方法/模式来完成我的任务？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:54:19.477

您尝试使用的模式相当合理。一般来说，我可能会建议使用接口而不是`BaseItem`类，因为它可能不包含那么多通用功能。

通常，大多数人似乎建议为要实现的类定义接口。如果您绝对想在 AbstractClass 中共享公共代码，我会推荐实现该接口的类，因为这种模式将在未来提供更大的可扩展性和灵活性。

因此，您首先要定义什么是适合您的*项目。*对我来说，在您的用例中，一个 Item 似乎是三件事：第一，它必须定义`postCalculate()`将在所有 Item 上调用的方法。其次，它必须提供一种`isValid()`方法。第三，它还应该提供一种`getName()`方法。

```
public interface Item {
    void postCalucate();
    boolean isValid();
    String getName();
} 
```

然后你将开始实现你的 Abstract 类。仅当确实有必要在所有项目之间共享代码库时才这样做。

```
public abstract class BaseItem implements Item {
    String name;
    boolean valid = true;

    public void postCalucate() {
        //common calculation
        valid = valid && (name != null);
    }

    public boolean isValid() { 
        return valid; 
    }

    public String getName() {
        return name;
    }
} 
```

如果 BaseItem.postCalculate() 是所有项目都需要完成的事情，那么这是一个很好的方法。如果您不完全确定，最好在一个`Helper`或`Tool`类中的某处定义一个方法，该方法对项目执行此常见计算，并由以下`postCalculate()`方法调用：

```
public class ItemTools {
    public static boolean meetsRequirements(Item item) {
        return item.isValid && item.getName() != null;
    } 
} 
```

许多人会争辩说，这会给您带来更轻松的时间，因为您的要求`BaseItem`可能会随着时间的推移而变化。

不管你去哪条路线，现在你只需要定义你的实际项目：

```
public   class ItemA extends BaseItem {
    BigDecimal value;

    @Override
    public void postCalucate() {
        //some A specific calculations                        
        super.postCalucate();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:40:52.090

虽然一般建议是避免过度使用继承，但这并不是过度使用的情况。因此，请继续使用这种方法。

除此之外：您的代码显示封装问题。你不应该拥有所有这些非私有领域。提醒一下：*完全没有*可见性是包可见性（在整个包和所有子类中可见）。将您的字段设为私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:41:58.580

先验地，你的提议似乎是合理的。

但可以肯定的是，您必须查看对象生命周期的所有事件：

*   实例化
*   使用，阅读
*   合作
*   坚持
*   ...

# canvas - 更改每个像素的图像并保存到数据库

> ID：13146323
> 
> 赞同：2
> 
> 时间：2012-10-30T19:30:55.650
> 
> 标签：canvas, pixel

我正在制作一个小网络游戏，我正在寻找一种方法来处理每个像素的图像并将其存储在 mysql 数据库中。准确地说，我需要能够做到以下几点：

*   从屏幕上的 mysql db 加载图像（250 x 250px）（图像不可见。例如，每个像素的 alpha 为 0）；
*   随机选取几个像素，将 alpha 设置为 1；
*   将新图像保存在 mysql 数据库中的旧图像上
*   加载具有可见像素数的新图像；
*   随机选择几个像素，将 alpha 设置为 1；ETC..

我已经设法让这件事发挥作用，但效率很低。我的 mysql 数据库中有数千条记录，每条记录中都有一个存储有正确位置、颜色和可见性的像素。当图像渲染到屏幕上时，需要读出每条记录。

我看过 html5 画布，但还没有找到正确的方法。实际上，此刻我不知道最好的方法是什么。希望有人可以在这里提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:40:35.290

有几种方法可以做到这一点。

是的，画布就是你想要的。您可以使用画布来操作图像数据（请参阅[MDN 上使用 Canvas 进行像素操作](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)）。

为了保存到您的服务器和恢复，您不应该使用数千条记录。您应该使用类似单个 base64 字符串来描述您的图像。画布 API 有一个用于检索它的方法，称为`toDataURL()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T23:23:02.880

听起来你想要的是一个线性同余随机数生成器。实际上，它们的描述（甚至写出它的名字！）比编程和使用要复杂得多。它们*真的很容易*使用。

[http://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)

使用这些，您可以仅将当前`seed`值（即您选择首先设置的像素，或者您之前设置的像素）传递到表达式中：

```
seed = ((seed * multiplier) + increment) % modulus. 
```

选择如下值： `seed`= 您的初始值必须大于 0 且小于模数。

`modulus`= 图像中的总像素数（即`width * height`），在 PHP 中必须为 2^31 或更少。它可能会更多一些，尽管您的代码效率会降低：比像素数大 2 的下一个幂可能是一个不错的选择。

`increment`= 最简单：“1”。或者，最多为 23,622,320,123 的素数。或者如果不是这样，那么至少与模数相对质数，并且小于（2 ^ 53-（模数*乘数））。

`multiplier`：

*   比能被模的所有素因数整除的数多一。
*   如果模数是 4 的倍数，则大于 4 的倍数。
*   小于 2^22。
*   如果你选择的模数是 2 的幂，那么这个乘数可以是（小素数 * 4）+ 1。所以，5，或 9，或其他东西。

这种仔细选择值将意味着当您重复种子生成代码时`modulus`，您将永远不会得到重复的数字 - 您将半随机地“选择”每个像素一次。

如果您`modulus`大于`width * height`，您有时会选择一个不在图像“中”的像素：如果您的图像是 10x10 或 100 像素，并且您选择了`modulus`128（2 的下一个最大幂），那么您将有一个它有可能选择 100 到 127 之间的数字。在这种情况下，您可以再次循环它，直到获得有效像素，或者只更改更少的像素。

但如果它从 0 到 99 选择一个像素，那就是要使用的像素。因此，对于 10x10 的图像，种子 37 可能意味着第四行第八像素。

具体来说：

```
$pixelX = $seed / $width;
$pixelY = $seed % $width; 
```

# jquery - jQuery .index()

> ID：13146328
> 
> 赞同：2
> 
> 时间：2012-10-30T19:31:10.533
> 
> 标签：jquery, css, indexing

jquery index() 似乎无法识别其中一个元素，总是说“无法读取未定义的属性'长度'”这是我的代码。mnumber 是导致问题的原因。我需要 number 和 mnumber 才能使用鼠标进行跟踪，并根据他们悬停在哪个框上为他们提供正确的值。

```
$(".module-details-lesson-container").hover(function () {
    var number = $(".module-details-lesson-container").index(this) - 9;
    var mnumber = $(".module-container").index(this);
    jQuery.each(modules[1][number], function (index, value) {
        $(".module-details-words-learned-body").eq(1).append("<div class='module-details-word'>" + value + '</div>');
    });
}, function () {
    $(".module-details-word").remove();
}); 
```

css 文件

```
<div class="module-container">
<div class="module-tab  envelope-heading white-font"></div>
<div class="module-body">

            <div class="module-details-lesson-container"></div>
            <div class="module-details-lesson-container"></div>
        </div>

        <div class="module-details-words-learned">
            <div class="module-details-words-learned-body ">
                <div class="module-details-word"></div>
            </div>
        </div>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:33:11.593

我认为它必须`$(this)`代替`this`它提到的任何地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:37:23.527

这个问题看起来你可能误用了关键字`this`。要访问所需范围内的正确对象，您需要在委托函数中将其替换为 $(this) ：

```
$(".module-details-lesson-container").hover(function(){
        // Changed this to $(this) below
        var number = $(".module-details-lesson-container").index($(this))-9;
        var mnumber = $(".module-container").index($(this));

        jQuery.each(modules[1][number], function(index,value){
            $(".module-details-words-learned-body").eq(1).append("<div class='module-details-word'>" + value + '</div>');
        });
    },
    function(){$(".module-details-word").remove();
}); 
```

# regex - 谷歌脚本搜索和替换正则表达式

> ID：13146329
> 
> 赞同：0
> 
> 时间：2012-10-30T19:31:15.920
> 
> 标签：regex, google-apps-script

我试图在文档上运行一个非常基本的 Google 脚本。docBody = docBody.replaceText(searchStr, replaceStr);

例如，当 searchStr = 'Name' 时它工作得很好，但是当我尝试替换 '[Name]' 时，脚本挂起并在文档中产生垃圾。我意识到 searchStr 参数是一个正则表达式，我已经尝试过：

\[姓名\]

/\[名称\]/g

（\[姓名\]）

一切都没有成功...

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:43:14.450

如果你在做

```
searchStr = '\[Name\]'; 
```

那么这应该可以工作，没有斜线，没有修饰符，没有组。如果您使用双引号，请确保双转义：

```
searchStr = "\\[Name\\]"; 
```

# jquery - 前导零正在从 gridcomplete 中删除

> ID：13146331
> 
> 赞同：0
> 
> 时间：2012-10-30T19:31:18.067
> 
> 标签：jquery, jqgrid

我正在加载可能有前导零的 varchar(10) 值，作为查找的关键字段。在网格中，值以前导零显示。当键值通过 select 传递给函数时，缺少零。

```
 gridComplete: function () {
        var ids = jQuery("#grdProductGrid").jqGrid('getDataIDs');
        for (var i = 0; i < ids.length; i++) {
            var cl = ids[i];
            var rowId = $("#grdProductGrid").getRowData(cl);
            be = "<a href='#'>Product</a >";
            be = "<a href='#' onclick='GetProduct(" + rowId['ID'] + ")'>Product</a >"; 
```

当我到达 GetProduct 函数时，缺少前导零。

加载选择时是否缺少字符串函数？或者我应该在这里做点别的吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:39:26.907

您没有将 ID 作为字符串传递给`GetProduct`.

`be = "<a href='#' onclick='GetProduct(" + rowId['ID'] + ")'>Product</a >";`将生成一个看起来像这样的链接：

`<a href='#' onclick='GetProduct(000123)'>Product<a/>`

000123 不是字符串文字，所以 javascript 认为它是一个数字。创建链接时试试这个：

`be = "<a href='#' onclick='GetProduct(\"" + id + "\")'>Product</a >";`

我`\"`在括号内添加了`GetProduct`. 这将生成一个如下所示的链接：

`<a href='#' onclick='GetProduct("000123")'>Product<a/>`

看到这个小提琴： http: [//jsfiddle.net/gromer/deSGV/](http://jsfiddle.net/gromer/deSGV/)（输出到控制台）。

# javascript - asp.net 下一页是焦点总是移到底部

> ID：13146334
> 
> 赞同：0
> 
> 时间：2012-10-30T19:31:30.033
> 
> 标签：javascript, asp.net

我有两页。第一页中的下一个按钮带来第二页。第二页的焦点总是向下移动。所以我需要使用滚动条将光标带到顶部。我想把焦点带到顶部。我的 focus-handler.js 如下：

```
 var lastFocusedControlId = "";

function focusHandler(e) {
    document.activeElement = e.originalTarget;
}

function appInit() {
    if (typeof (window.addEventListener) !== "undefined") {
        window.addEventListener("focus", focusHandler, true);
    }

    setFirstControl()

    Sys.WebForms.PageRequestManager.getInstance().add_pageLoading(pageLoadingHandler);
    Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoadedHandler);
}

function pageLoadingHandler(sender, args) {
    lastFocusedControlId = typeof (document.activeElement) === "undefined"
        ? "" : document.activeElement.id;
}

function focusControl(targetControl) {
    if (Sys.Browser.agent === Sys.Browser.InternetExplorer) {
        var focusTarget = targetControl;
        if (focusTarget && (typeof (focusTarget.contentEditable) !== "undefined")) {
            oldContentEditableSetting = focusTarget.contentEditable;
            focusTarget.contentEditable = false;
        }
        else {
            focusTarget = null;
        }

        try {
            targetControl.focus();
            if (focusTarget) {
                focusTarget.contentEditable = oldContentEditableSetting;
            }
        }
        catch (err) { }
    }
    else {
        targetControl.focus();
    }
}

function pageLoadedHandler(sender, args) {
    if (typeof (lastFocusedControlId) !== "undefined" && lastFocusedControlId != "") {
        var newFocused = $get(lastFocusedControlId);
        if (newFocused) {
            focusControl(newFocused);
        }
    }
}

function setFirstControl() {
    var bFound = false;

    // for each form
    for (f = 0; f < document.forms.length; f++) {
        // for each element in each form
        for (i = 0; i < document.forms[f].length; i++) {
            // if it's not a hidden element
            if (document.forms[f][i].type != "hidden") {
                // and it's not disabled
                if (document.forms[f][i].disabled != true) {
                    try {
                        // set the focus to it
                        document.forms[f][i].focus();
                        var bFound = true;
                    }
                    catch (er) {
                    }
                }
            }
            // if found in this element, stop looking
            if (bFound == true)
                break;
        }
        // if found in this form, stop looking
        if (bFound == true)
            break;
    }
}

Sys.Application.add_init(appInit); 
```

# objective-c - 在 UIButton 图像上创建叠加层，但仅在图像本身上

> ID：13146335
> 
> 赞同：1
> 
> 时间：2012-10-30T19:31:32.753
> 
> 标签：objective-c, ios, uibutton, overlay

如何在包含图像的图像上创建灰色叠加视图`UIButton`，但要使叠加仅显示在图像本身上，而不是在整个按钮上，因此图像将是灰色的。

是否可以？

这是按钮，因为它是：

![普通的](../Images/4b9907d6c30cc08d4858ecbcdf4f4417.png)

这是覆盖：

![覆盖](../Images/30d59153be94c130d595dc35168ec173.png)

这就是我想要的样子：

![最终的](../Images/f6f66f0c24d8132fcd5dfcca310ca763.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:47:21.953

只需为突出显示的状态设置您想要的图像。您可以通过将状态设置为“突出显示”在 XIB 或情节提要中执行此操作：

![在此处输入图像描述](../Images/6e61ffea2291842bdc0c9679cbfa8518.png)

然后设置图像：

![在此处输入图像描述](../Images/dba79149f66ed9fc2fb2ae72805e6abb.png)

**或者**

通过这样的代码做到这一点：

```
[theButton setImage:theImage forState:UIControlStateHighlighted]; 
```

可以使用 Photoshop 或 GIMP 等快速复制图像并将其转换为黑白图像。以编程方式将图像更改为黑白图像的工作量远远超过其价值。

# c# - 如何正确退出多线程程序

> ID：13146339
> 
> 赞同：2
> 
> 时间：2012-10-30T19:31:37.867
> 
> 标签：c#, multithreading, aforge

我制作了一个基于 Aforge 的程序（它是一个视频库）。该库为来自摄像机的下一个视频帧创建自己的刷新事件。到目前为止一切顺利，早期的人帮助我处理了多线程，因此这些 Aforge 线程可以报告回主程序线程，到目前为止一切都很好，效果很好。

代码可以在这里看到：[how to do multithreading when using outside referenced code](https://stackoverflow.com/questions/12966288/how-to-do-multithreading-when-using-outside-referenced-code)。

但现在我经常注意到一个新的程序错误。当我想退出程序时，问题就开始了。目前，Aforge 线程可能仍处于活动状态。它想写回关闭的主窗体。

不知何故，我需要在关闭程序之前停止另一个线程。Aforge 中有一个选项可以执行相机停止之类的操作，但这还不够。但是我的代码仍然想写在已经关闭的主窗体上。

有没有办法停止所有线程，或者有什么安全的方法来关闭原始线程？我什至将向主程序的后台报告放在了 try catch 构造中，但效果不佳，在这些情况下停止它的唯一方法是按下 Visual Studio 本身中的停止执行按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:42:49.733

如果我正确理解您的问题，您可能`Invoke`会在您关闭表单时在您的表单上收到一个电话。我也遇到过这种情况。

我所做的是在我开始关闭表单时设置一个“关闭”变量，然后使用它`AppDomain.CurrentDomain.UnhandledException`来监视`InvalidOperationException`（或你得到的任何东西），如果设置了关闭则​​忽略。

# django - 基于列表显示中的自定义可调用在 Django Admin 中排序

> ID：13146346
> 
> 赞同：6
> 
> 时间：2012-10-30T19:31:47.490
> 
> 标签：django, django-admin

我的列表显示中有一个自定义可调用对象。我希望能够按它排序，但它不对应单个字段，所以我**不能单独使用`admin_order_field`**。

如果将查询集选为字段，我希望能够更改查询集的顺序以反映这一点。但是，它看起来像是通过模型管理员调用运行`ChangeList`视图`get_ordering` *后*`get_ordering`调用，然后循环遍历给定的排序字段（格式`a.b.c.etc.y.z`为 a、b、c 等都是与显示中的一个或多个字段对应的整数列表。

在此示例中，我有一个订单页面，其中客户可以是公司/组织*或*个人。我希望能够对其进行排序，以便首先列出人员的所有订单，然后是组织，并且全部按字母顺序排列。

让我们以这个模型管理员设置为例：

```
class OrderAdmin(models.ModelAdmin):
    list_display = ('pk', 'date_ordered', 'customer')

    def customer(self, obj):
        return obj.organization or "%s %s" % (obj.first_name, obj.last_name) 
```

目前，我无法排序，因为排序字段仅在可调用对象`admin_order_field`附加了以下内容时才可用：

```
 def customer(self, obj):
        return obj.organization or "%s %s" % (obj.first_name, obj.last_name)
    customer.admin_order_field = 'customer' 
```

问题是，理想情况下，我希望能够截获默认代码并说，“如果其中一个字段是‘客户’，则从列表中删除该字段，而是使用`["organization", "last_name", "first_name"]`”对其进行排序。但据我所知，没有办法做到这一点。

我怀疑`extra(select={'customer':...})`会起作用，**除了**我使用`django-pyodbc`的是 SQL Server 数据库，并且生成的 SQL 根本不起作用并引发错误：

```
SELECT * 
FROM   (SELECT 

                ( COALESCE(organization, firstname + ' ' + lastname) ) AS [customer], 
                ..., 
               ( Row_number() 
                   OVER ( 
                     ORDER BY [customer] ASC, [orders].[date_created] DESC, 
                   [orders].[order_id] ASC 
                   ) )                                                    AS 
               [rn] 
        FROM   [orders]) AS X 
WHERE  X.rn BETWEEN 1 AND 100 
```

错误是：

> 列名“客户”无效。

没有重写 django-pyodbc，使用`.extra`不是解决方案。

所以我想知道是否还有什么可以做的，或者我是否只需要放弃单独使用客户名称作为排序字段，并将其替换为单独的组织、姓氏和名字列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T18:10:34.253

请注意 admin_order_field 是 SQL 结果集中的一个字段。因此，您需要做的是在 admin 中覆盖 get_queryset，以便您拥有一个适用于您的排序的“字段”。

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_queryset](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_queryset)

您可能还需要 Q() 和 F() 函数。我不知道他们是否在 pyodbc 中工作。

现在，这个“客户”字段应该只是用于排序。它可以通过 obj.customer 访问。

然后你需要一个对该字段进行排序的函数（也可以称为“客户”）。在其中，您可以使用 COALESCE 执行您想要执行的逻辑。

# sql - 按 customerID 分组联系信息

> ID：13146352
> 
> 赞同：0
> 
> 时间：2012-10-30T19:32:07.433
> 
> 标签：sql, tsql

我正在尝试从我的 SQL 语句中删除重复的客户 ID、名字和姓氏我希望能够按客户 ID 分组并从最终输出中删除重复的客户 ID 表单、名字和姓氏

```
SELECT customers.customerid, 
       customers.title, 
       customers.firstname, 
       customers.lastname, 
       customers.postion, 
       company.companyname, 
       (SELECT label.labelcontacttype 
        FROM   label 
        WHERE  label.labelcontacttypeid = 
       customer_contacts.labelcontacttypeid)AS 
       contactType, 
       customer_contacts.contactdetails, 
       customer_contacts.status, 
       customer_contacts.notes 
FROM   customers 
       INNER JOIN customer_company 
               ON customers.customerid = customer_company.customerid 
       INNER JOIN company 
               ON customer_company.companyid = company.companyid 
       INNER JOIN customer_contacts 
               ON customers.customerid = customer_contacts.customerid 
```

电流输出

```
15  Mr  Mike Smith Web Developer    compudata   Email   email@email.com 1   dvv  
15  Mr  Mike Smith Web Developer    compudata   Phone   111-111-1111    1   ex:2222 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:55:48.010

真的不是很清楚你要做什么，但如果你只希望 customerid、title、firstname 和 lastname 出现一次，那么你可以使用：

```
select 
  case when rn = 1 then customerid else '' end customerid,
  case when rn = 1 then title else '' end title,
  case when rn = 1 then firstname else '' end firstname,
  case when rn = 1 then lastname else '' end lastname,
  postion,
  companyname,
  contactType,
  contactdetails, 
  status, 
  notes
from
(
  SELECT cast(customers.customerid as varchar(20)) customerid, 
         customers.title, 
         customers.firstname, 
         customers.lastname, 
         customers.postion, 
         company.companyname, 
         (SELECT label.labelcontacttype 
          FROM   label 
          WHERE  label.labelcontacttypeid = 
         customer_contacts.labelcontacttypeid)AS contactType, 
         customer_contacts.contactdetails, 
         customer_contacts.status, 
         customer_contacts.notes ,
         row_number() over(order by customers.customerid) rn
  FROM   customers 
         INNER JOIN customer_company 
                 ON customers.customerid = customer_company.customerid 
         INNER JOIN company 
                 ON customer_company.companyid = company.companyid 
         INNER JOIN customer_contacts 
                 ON customers.customerid = customer_contacts.customerid 
) src 
```

# jquery - 如何使用jQuery遍历json数据对象

> ID：13146353
> 
> 赞同：0
> 
> 时间：2012-10-30T19:32:12.840
> 
> 标签：jquery, xml, json

从 ajax 响应中，我得到了一个对象，如下所示——

```
"highlighting":{
    "http://example.com/test1":{
        "content":["sample content 1"],
        "title":["sample title1"]},
        "http://example.com/test2":{
            "content":["sample content2"],
            "title":["sample title1"]
        }
    }
} 
```

你能告诉我如何获得“http://example.com/test*”吗？我可以循环搜索“内容”、“标题”，但是“http://example.com/test*”，因为没有与之关联的名称。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:39:37.830

这些是问题中的关键..试试这个

```
var data = obj["highlighting"]
for( key in data ){

    alert(key)
}
​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/UUUGW/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:40:47.457

```
var obj = {"highlighting":{//first key
                           "http://example.com/test1": { //first key in first key
                               "content":["sample content 1"],
                               "title"  :["sample title1"]
                                                       },
                           "http://example.com/test2":{ //second key in first key
                               "content":["sample content2"],
                               "title":["sample title1"]
                                                      }
                          }
          }

var first;
for (var i in obj.highlighting) {
    first = obj[i];
    break;
} 
```

[**小提琴**](http://jsfiddle.net/BTthv/)

# asp.net-mvc-3 - Can I create a controller in a common assembly which will be accessible by any assmbly which references it?

> ID：13146358
> 
> 赞同：0
> 
> 时间：2012-10-30T19:32:36.367
> 
> 标签：asp.net-mvc-3, embedded-resource, code-reuse

I have a common assembly where I put a lot of my helper functions etc. I want to create a common `EmbeddedResourceController` (kind of like WebResource.axd was for WebForms) which all my HTML helpers can use to embed and display their scripts and styles. The problem is, I need to be able to create an include path from my HTML helper code in a project agnostic way (ie without knowing any of the routing/controller rules in that project).

Ideally, I want to create an include like `<script type="text/javascript" src="/EmbeddedResource/myJsScript.js"></script>` from the helper code and have it work in every project that uses my common dll.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:17:20.347

也许您可以使用 HTML 帮助程序扩展。看看**Bell 先生**在以下问题[Populate a Razor Section From a Partial中的回答](https://stackoverflow.com/questions/5355427/populate-a-razor-section-from-a-partial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:44:35.490

If I understand your question correctly, you can just use this EmbeddedResource controller as a base for a controller in each of your projects:

```
EmbeddedResourceController : EmbeddedResourceBase 
```

Where EmbeddedResourceBase lives in your common dll

# apache-flex - set width for individual buttons

> ID：13146368
> 
> 赞同：1
> 
> 时间：2012-10-30T19:33:16.880
> 
> 标签：apache-flex, air, flex3, padding, buttonbar

I have a buttonbar which has both buttons with only small icons and buttons with short text labels. Problem is that each button gets huge padding while I want to set width of the button relative to its contents. Below is illustration of my problem: Current one [http://i.imgur.com/I8goS.png](http://i.imgur.com/I8goS.png) With buttonWidth=32 [http://i.imgur.com/s0fD5.png](http://i.imgur.com/s0fD5.png)

I can set buttonWidth to 32 for my buttonbar which works fine for my icons, but not for text. Is there way to remove that huge padding of the buttons?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:50:48.800

如果我明白你在那里之后，你可以使用按钮栏标签内的布局，如下所示：

```
<s:layout>
    <s:HorizontalLayout variableColumnWidth="true" gap="0"/>
</s:layout> 
```

# android - 我对 SQLite 数据库有疑问

> ID：13146371
> 
> 赞同：0
> 
> 时间：2012-10-30T19:33:35.447
> 
> 标签：android, sqlite

我让应用程序和编译器显示错误。我不知道发生了什么。我想在点击后从数据库中检索并显示随机记录。我使用了来自[Android SQLite 数据库教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)和 stackoverflov 错误的教程：

```
 10-30 19:19:59.533: E/AndroidRuntime(359): FATAL EXCEPTION: main
10-30 19:19:59.533: E/AndroidRuntime(359): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
10-30 19:19:59.533: E/AndroidRuntime(359):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580) 
```

我的代码是：

```
public class PrzyslowiaArabskie  {

    private static final String TABLE_NAME = "tabela_przyslowia";
    private static final String DATABASE_NAME = "przyslowiadb";
    private static final int DATABASE_VERSION = 1;
    public static final String KEY_ID = "id";
    public static final String KEY_PRZYSLOWIE = "przyslowie";

    private DbHelper myHelper;
    private final Context myContext;
    private SQLiteDatabase myDatabase;

    private static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
             db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + 
                       KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                     KEY_PRZYSLOWIE + " TEXT NOT NULL);" );

        } 

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }

    }
    public PrzyslowiaArabskie(Context c) {
        myContext = c;
    }
    public PrzyslowiaArabskie open() {
        myHelper = new DbHelper(myContext);
        myDatabase = myHelper.getWritableDatabase();
        return this;
    }
    public void close() {
        myHelper.close();
    }

    public String getData() {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ID, KEY_PRZYSLOWIE };
        Cursor c = myDatabase.query(TABLE_NAME, columns, KEY_ID + "=?", new String[] {String.valueOf(KEY_ID + 1)}, null, null, null);
         if (c != null) {
             c.moveToFirst(); 
             String data = c.getString(1);
             return data;
         }  
        return null;
    }

} 
```

我究竟做错了什么？

我解决了我的问题。我制作了 3 个按钮（下一个记录、上一个记录和显示记录），而不是从数据库中获取随机记录。我使用此说明[从数据库中获取下一条记录](https://stackoverflow.com/questions/8452310/getting-the-next-record-into-view-from-database) 感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:37:08.317

光标将始终不为空。相反`moveToFirst`有时会失败。

尝试

```
if(c.moveToFirst() {
  String data = c.getString(c.getColumnIndexOrThrow(KEY_PRZYSLOWIE ));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:39:09.440

您正在尝试对不存在的游标行上的列进行索引。

```
if (c != null) {
     c.moveToFirst(); // This needs to check for validity
     String data = c.getString(1); // Before indexing into a non-existent record
     return data;
} 
```

反而...

```
if(c.moveToFirst()){
  String data = c.getString(1);
  return data;
} 
```

当然，如果您打算遍历多行，您可能需要考虑使用 while 循环并使用`while(c.moveToNext()) ...`

**编辑**：地址评论的扩展答案。

要使用 while 循环遍历游标中可用的所有记录并利用消费者代码中的数据，您可能必须更改方法签名以返回排序集合而不是单个字符串。

```
public ArrayList<String> getData() {
    ArrayList<String> data = new ArrayList<String>();
    String[] columns = new String[] { KEY_ID, KEY_PRZYSLOWIE };
    Cursor c = myDatabase.query(TABLE_NAME, columns, KEY_ID + "=?", new String[] {String.valueOf(KEY_ID + 1)}, null, null, null);
    while(null != c && c.moveToNext()) {
      data.add(c.getString(1));
    }
    return data;
} 
```

提供的示例代码应该可以得到您想要的结果，但是如果您需要更多关于处理对象集合和 while 循环的说明，我建议您查阅[Java 文档以获取](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/flow.html)有关处理数据结构的一些信息或更抽象的编程信息和控制流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:39:59.640

改变

```
if (c != null) { 
```

到

```
if (c != null && c.moveToFirst()) { 
```

否则，即使没有匹配的行，您也会尝试从游标中获取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:45:11.840

看起来你有一个空光标。而不是检查它是否为空尝试检查

```
if(mCursor.getCount > 0)
{
  //do stuff
} 
```

# objective-c - What do these build errors mean & how can I better debug in situations like this? XCode, PayPal SDK

> ID：13146394
> 
> 赞同：1
> 
> 时间：2012-10-30T19:35:17.903
> 
> 标签：objective-c, ios, xcode, debugging

I need to understand what this means & how I go about resolving it in future.

I have been following this guide & followed it exactly,

[https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_iPhone.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_iPhone.pdf)

I have added the following files to my solution from the PayPal SDK

![PayPal SDK][1]

..had an image of the files in my solution, not allowed to post image, i don't have more than 10 points

I have imported PayPal.h & PayPalAdvancedPayment.h into one of my classes, the sample code supplied by paypal is on page 30 of that guide.

I added it made sure there was no obvious errors and then built the solution. My solution has been building and running fine until I imported these two files.

PayPal.h & PayPalAdvancedPayment.h

![XCode build errors][2]

..had an image of the debug errors in XCode

The full debug message dump is below.

```
Undefined symbols for architecture armv7:
"_SecPolicyCreateBasicX509", referenced from:
  +[Encryption encryptWithPublicKey:] in libPayPalMPL.a(Encryption.o)
"_SecTrustCreateWithCertificates", referenced from:
  +[Encryption encryptWithPublicKey:] in libPayPalMPL.a(Encryption.o)
"_inflateEnd", referenced from:
  -[GZipper obfm_initWithGzippedData:] in libPayPalMPL.a(GZipper.o)
  +[GZipper obfm_gzipInflate:] in libPayPalMPL.a(GZipper.o)
  -[GZipper obfm_zlibInflate] in libPayPalMPL.a(GZipper.o)
"_deflateInit_", referenced from:
  -[GZipper obfm_zlibDeflate] in libPayPalMPL.a(GZipper.o)
"_inflate", referenced from:
  -[GZipper obfm_initWithGzippedData:] in libPayPalMPL.a(GZipper.o)
  +[GZipper obfm_gzipInflate:] in libPayPalMPL.a(GZipper.o)
  -[GZipper obfm_zlibInflate] in libPayPalMPL.a(GZipper.o)
"_deflateEnd", referenced from:
  -[GZipper obfm_zlibDeflate] in libPayPalMPL.a(GZipper.o)
  +[GZipper obfm_gzipDeflate:] in libPayPalMPL.a(GZipper.o)
"_inflateInit_", referenced from:
  -[GZipper obfm_zlibInflate] in libPayPalMPL.a(GZipper.o)
"_SecTrustCopyPublicKey", referenced from:
  +[Encryption encryptWithPublicKey:] in libPayPalMPL.a(Encryption.o)
"_SecKeyGetBlockSize", referenced from:
  +[Encryption encryptWithPublicKey:] in libPayPalMPL.a(Encryption.o)
"_inflateInit2_", referenced from:
  -[GZipper obfm_initWithGzippedData:] in libPayPalMPL.a(GZipper.o)
  +[GZipper obfm_gzipInflate:] in libPayPalMPL.a(GZipper.o)
"_SecCertificateCreateWithData", referenced from:
  +[Encryption encryptWithPublicKey:] in libPayPalMPL.a(Encryption.o)
"_SecKeyEncrypt", referenced from:
  +[Encryption encryptWithPublicKey:] in libPayPalMPL.a(Encryption.o)
"_SecTrustEvaluate", referenced from:
  -[AdaptivePaymentsSOAP11BindingOperation   connection:didReceiveAuthenticationChallenge:] in libPayPalMPL.a(AdaptivePayments.o)
  +[Encryption encryptWithPublicKey:] in libPayPalMPL.a(Encryption.o)
  -[GMAdapterSOAP11BindingOperation connection:didReceiveAuthenticationChallenge:] in    libPayPalMPL.a(GMAdapter.o)
"_deflate", referenced from:
  -[GZipper obfm_zlibDeflate] in libPayPalMPL.a(GZipper.o)
  +[GZipper obfm_gzipDeflate:] in libPayPalMPL.a(GZipper.o)
"_deflateInit2_", referenced from:
  +[GZipper obfm_gzipDeflate:] in libPayPalMPL.a(GZipper.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

What is the problem? How do I identify what the problem is so that I can solve this in future myself?

I am normally a Visual Studio C#.NET developer, still learning to get the hang of XCode & Objective-C

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T19:44:11.560

It appears you need to add the Security framework to your project. In Xcode, select your target then select the Summary tab. Scroll down to the **Linked Frameworks and Libraries** section. Click on the + symbol at the bottom of the section and select Security.framework.

# php - 本地主机中的路径的 Codeigniter 问题（XAMPP）

> ID：13146395
> 
> 赞同：2
> 
> 时间：2012-10-30T19:35:22.357
> 
> 标签：php, codeigniter, view, path, controller

无论如何，我的代码点火器安装中的索引页面（又名 homepage.php）工作正常。

问题在于使用子目录来存储其他页面，目前它的设置如下： ![图像1](../Images/917327563352d13a304052b29297f9ba.png)

加载主页就像`http://localhost/VAw_CI/`工作正常（加载 homepage.php），这是在 routes.php 中设置的：

```
$route['default_controller'] = "pages/homepage"; 
```

在 config.php 中，我设置了：

```
$config['base_url'] = 'http://localhost/VAw_CI';

/*
|--------------------------------------------------------------------------
| Index File
|--------------------------------------------------------------------------
|
| Typically this will be your index.php file, unless you've renamed it to
| something else. If you are using mod_rewrite to remove the page set this
| variable so that it is blank.
|
*/
$config['index_page'] = ''; 
```

我`$config['index_page'] = '';`在上面指定，因为我修改了位于以下位置的 .htaccess `htdocs`：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .*homepage/$0 [PT,L] 
```

但是，如果我尝试登录 homepage.php，目前看起来像： ![img2](../Images/731e292cc09b14c647cb4ade52fb2360.png)

它把我送到`http://localhost/VAw_CI/pages/clientlogin`

显示： ![图像3](../Images/9cae44852786eae2c825d39c721e047e.png)

我的控制器设置如下： ![img4](../Images/54d8c93af1dba89066a19be94c339ed2.png)

这里给出了什么？当我访问时`http://localhost/VAw_CI`，它有效`views->pages->homepage.php`地正确加载了视图，但似乎任何其他视图都不起作用我是否在我的情况下错过了索引（homepage.php）以外的*页面的某些路径设置？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:55:56.657

请在项目文件夹中创建 .htaccess 文件并写入：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 

</IfModule>
<IfModule !mod_rewrite.c>
 ErrorDocument 404 index.php
</IfModule> 
```

您不需要在配置文件的 base_url 中定义：

```
$config['base_url'] = ''; // blank it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:32:31.443

弄清楚我做错了什么：

我需要访问：`http://localhost/VAw_CI/**index.php**/pages/aboutus`这真的很奇怪，因为我的默认 CI 页面设置为 $config['index_page'] = 'homepage';

希望这可以帮助某人，有时:)

# uiview - 旋转后将带有多个子视图的 UIView 居中

> ID：13146402
> 
> 赞同：0
> 
> 时间：2012-10-30T19:35:50.377
> 
> 标签：uiview, uiviewcontroller, centering, autosize

在一个视图中有一个 UIScrollview 和 UIView。第二个有 5 个子视图（2 个隐藏）。

我想保留 5 个子视图的布局（截至，时间/日期，刷新和隐藏）并使用 IB 的视图检查器在旋转后将 UIView 居中。到目前为止，我使用的任何组合都没有奏效。UIView 未连接到控制器（作为实例变量）。它的5个子视图是。

如何做到这一点？（列出我尝试过的内容可以写满一本书。）

标签，即将消失和更高版本位于滚动视图中，并且正在正确调整大小。

我达到预期结果的壁橱是“冲破”所有线条。这导致了一个居中的 320 像素 UIView，滚动视图的内容显示在横向的任一侧。

带有 View Inspector 设置的人像：

![带有 View Inspector 设置的人像](../Images/8024908796a32934a3c1a617e4363cba.png)

带设置的风景：

![景观](../Images/6d38400853a332090c49f5ca6f069652.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:56:47.040

以下是保持底部 UIView 的项目居中对齐和间距不变的步骤。

1.  撤消所有子视图的左右（自动调整大小）“支柱”。（我的只有在修改后打开了顶部支柱并且没有打开弹簧）
2.  在 UIView 的（包含子视图）大小检查器中，显示 > 布局矩形并将 X 更改为 -90。
3.  现在将宽度更改为 480。输入此值可能会导致元素左右“展开”以填充 480。某些子视图可能会消失。
4.  将子视图重新定位到所需位置。这可能需要在文档大纲中选择一个，然后将其剪切并粘贴回视图中。
5.  （可选）清理项目。
6.  构建和运行

具有较低 UIView（居中和相同间距）的改进版本及其在 Xcode 中显示的设置：

![较低的 UIView 居中，间距一致](../Images/db7f7dc89ab1ffb91262d10d5816e8eb.png)

它必须在 Interface Builder 中成为可能！

# asp.net - 从程序中获取asp.net 搜索结果？

> ID：13146403
> 
> 赞同：0
> 
> 时间：2012-10-30T19:35:50.420
> 
> 标签：asp.net, ruby

我有一个 Ruby 程序，它解析由我无法控制的政府网站上的 asp.net 页面生成的 HTML 数据。我目前在 asp.net 页面上提交查询，方法是转到页面并单击“提交”，然后保存结果（这是 Ruby 程序解析的文件）。有没有办法从我的 Ruby 程序中触发提交，所以我不必每次都手动执行？

如果有用，这是我去的地址并单击“提交”然后保存：

[http://www.deq.state.or.us/wq/sisdata/facilitycriteria.asp](http://www.deq.state.or.us/wq/sisdata/facilitycriteria.asp)

实际上，在保存之前，我在结果页面（http://www.deq.state.or.us/wq/sisdata/facilitylist.asp）上单击“显示所有记录”，所以我需要弄清楚如何触发在我的程序中也是如此，但我认为如果有办法“提交”，那么可能有类似的方法来执行“显示所​​有记录”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:37:45.807

你可以使用[Watir](http://watir.com/)：

```
require 'watir'
browser = Watir::Browser.new
browser.goto('http://www.deq.state.or.us/wq/sisdata/facilitycriteria.asp')
browser.button(:name, 'submit button name').click
puts browser.html  # <- This should display the HTML of the page 
```

# c++ - 在 C++ 中使用参数启动 Win32 Forms 应用程序

> ID：13146408
> 
> 赞同：0
> 
> 时间：2012-10-30T19:36:15.683
> 
> 标签：c++, parameters

如何为我的 Windows 窗体应用程序添加支持以便能够使用参数启动？

我正在使用 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:44:43.337

您可以将`args`数组添加到 Main 方法或使用[`Environment::GetCommandLineArgs()`](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)

所以要么

`int Main(array<String^>^ args)`

或者

`array<String^>^ args = Environment::GetCommandLineArgs();`

然后循环遍历 args 数组并根据数组中的内容确定要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:46:43.783

任何可执行程序都有一个`main(int argc, char** argv)`功能。您只需要解析传入的命令行参数`argv`并将这些传递给您的主窗体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:00:11.170

如果您正在编写 Win32 gui 应用程序，那么您的入口点就是[WinMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)：

```
int CALLBACK WinMain(
  _In_  HINSTANCE hInstance,
  _In_  HINSTANCE hPrevInstance,
  _In_  LPSTR lpCmdLine,
  _In_  int nCmdShow
); 
```

第三个参数，`lpCmdLine`是传递给应用程序的命令行。传递给应用程序的命令行参数将在该字符串中。

# objective-c - allowableMovement 似乎被忽略了

> ID：13146412
> 
> 赞同：8
> 
> 时间：2012-10-30T19:36:32.440
> 
> 标签：objective-c, ios6, uigesturerecognizer

我的`allowableMovement`财产`UILongPressGestureRecognizer`似乎被忽略了。我使用 Single View Application 模板创建了一个新项目（Xcode 4.5.1，iOS 6），并在视图中添加了一个长按手势识别器。有一个连接好的插座和一个动作。下面是 action 方法的代码：

```
- (IBAction)longPress:(UILongPressGestureRecognizer *)sender
{    
    if (sender.state == UIGestureRecognizerStatePossible)   NSLog(@"possible");
    if (sender.state == UIGestureRecognizerStateBegan)      NSLog(@"began");
    if (sender.state == UIGestureRecognizerStateChanged)    NSLog(@"changed");    
    if (sender.state == UIGestureRecognizerStateRecognized) NSLog(@"recognized");    
    if (sender.state == UIGestureRecognizerStateCancelled)  NSLog(@"cancelled");
    if (sender.state == UIGestureRecognizerStateFailed)     NSLog(@"failed");

    CGPoint locationInView = [sender locationInView:self.view];

    NSLog(@"long press: allowableMovement= %f, x= %f, y= %f", sender.allowableMovement, locationInView.x, locationInView.y);
} 
```

如果我按下足够长的时间然后放手，我会在日志中得到这个：

```
2012-10-30 20:24:41.449 Long Press[1078:907] began
2012-10-30 20:24:41.455 Long Press[1078:907] long press: allowableMovement= 10.000000, x= 210.500000, y= 99.500000
2012-10-30 20:24:42.880 Long Press[1078:907] recognized
2012-10-30 20:24:42.882 Long Press[1078:907] long press: allowableMovement= 10.000000, x= 208.500000, y= 96.000000 
```

这是我所期望的。

但无论我设置什么`allowableMovement`（正、负、大、小），一旦状态为`UIGestureRecognizerStateBegan`，我可以在屏幕上拖动手指。状态更改为`UIGestureRecognizerStateChanged`并有频繁更新，并且 locationInView 继续准确跟踪。当我放手时，我得到`UIGestureRecognizerStateRecognized`状态和最终输出到日志。

类引用说，如果移动超过 ，识别器应该会失败`allowableMovement`。为什么该`allowableMovement`属性似乎被忽略了？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-31T14:13:22.660

该`allowableMovement`属性与手势开始后可以拖动多远无关。这是关于在手势开始之前您可以移动多远。

从类参考：

> 当允许的手指数量 (numberOfTouchesRequired) 在指定的时间 (minimumPressDuration) 内被按下并且触摸没有超出允许的移动范围 (allowableMovement) 时，手势开始 (UIGestureRecognizerStateBegan)。

当您设置`minimumPressDuration`为像 3 秒这样的高值和`allowableMovement`像 1 像素这样的低值时，这一点变得很明显。如果您的手指完全滚动，则手势将不会开始。但是，如果您设置`allowableMovement`为 100，您的手指可以滚动很多，并且手势将开始。

这样，它就像其他属性一样。它们都是关于手势开始所需的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-13T22:28:19.580

我以为`allowableMovement`正是这个目的。我做了一个小子类来实现“预期”的行为`allowableMovementAfterBegan`。

```
#import <UIKit/UIKit.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface TDMLongPressGestureRecognizer : UILongPressGestureRecognizer
@property (nonatomic, assign) CGFloat allowableMovementAfterBegan;
@end

@implementation TDMLongPressGestureRecognizer
{
    CGPoint initialPoint;
}

- (instancetype)initWithTarget:(id)target action:(SEL)action
{
    self = [super initWithTarget:target action:action];
    if (self) {
        // Use default value for allowableMovement before touches begin
        _allowableMovementAfterBegan = self.allowableMovement; 
    }
    return self;
}

- (void)reset
{
    [super reset];      
    initialPoint = CGPointZero;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];   
    initialPoint = [self locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];

    if (!CGPointEqualToPoint(initialPoint, CGPointZero))
    {
        CGPoint currentPoint = [self locationInView:self.view];

        CGFloat distance = hypot(initialPoint.x - currentPoint.x, initialPoint.y - currentPoint.y);
        if (distance > self.allowableMovementAfterBegan)
            self.state = UIGestureRecognizerStateFailed;
        }
    }
} 
```

# javascript - 在 DataGrid 中插入加载消息

> ID：13146413
> 
> 赞同：0
> 
> 时间：2012-10-30T19:36:32.397
> 
> 标签：javascript, dojo, dojox.grid.datagrid

我想显示在填充数据网格时显示的加载消息（正在加载...）。

它会在单击搜索按钮时显示，并在填充网格结果时消失。

我已经看到了一些可能的选项，包括[dojox.widget.Standby](http://livedocs.dojotoolkit.org/dojox/widget/Standby)但是，看起来[dojox.grid.DataGrid中已经嵌入了一些东西](http://higginsforpresident.net/api/dojox/grid/_Grid.html#loadingMessage)

除了跨度标记外，我找不到任何有关如何访问它或在我的应用程序中显示它的文档：

```
<span class="dojoxGridLoading">Loading...</span> 
```

有人有幸在他们的应用程序中插入加载消息吗？我可以将标签放在 html 中，但它没有必要的元素，只能在单击搜索按钮时显示并在搜索完成时消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:40:06.507

您可以在 DataGrid 上为消息应用三个设置。

以下是默认值：

```
 // loadingMessage: String
    //  Message that shows while the grid is loading
    loadingMessage: "<span class='dojoxGridLoading'>${loadingState}</span>",

    // errorMessage: String
    //  Message that shows when the grid encounters an error loading
    errorMessage: "<span class='dojoxGridError'>${errorState}</span>",

    // noDataMessage: String
    //  Message that shows if the grid has no data - wrap it in a
    //  span with class 'dojoxGridNoData' if you want it to be
    //  styled similar to the loading and error messages
    noDataMessage: "", 
```

因此，例如，当您的数据正在加载时，您可以这样设置：

```
new EnhancedGrid({ // This can be DataGrid() also..
                    structure: layout,
                    store : store,
                    noDataMessage: "No Items Found.",
                    loadingMessage: "<span class='dojoxGridLoading'>Loading Really Awesome Stuff</span>"                        
                }, node ); 
```

# javascript - 如何将图像动态插入 DOM？

> ID：13146414
> 
> 赞同：0
> 
> 时间：2012-10-30T19:36:37.497
> 
> 标签：javascript, jquery

我正在尝试通过动态创建 div 并将其附加到图像对象来预加载图像，但不幸的是，div 已创建但图像未附加到它们。这是代码：

```
var preLoadImages = function(im) {
    var args_len = im.length;
    var slides = $('.slides');
    for (var i = args_len; i--;) {
        var img = $('<img>', {
            src : 'img/' + im[i] + '.jpg',
            alt : kp.imgAlt[i]
        })
      img.load(function(){
        (function(index){ 
            kp.cache.push(img);
            var toAppend = $('<div class="slide"></div>')
                            .css({'z-index' : (args_len - index) + 'px'})
                            .append(kp.cache[index]);
            slides.append(toAppend);
            kp.setTimer();
            kp.startSlideshow();
            if(i == 0){
                $('.slides #cover').fadeOut(800, function(){
                    $(this).remove();
                });
            }
        })(i);
      });

    }
  }; 
```

我究竟做错了什么？当我使用 Firebug 调试页面时，它显示图像已正确创建并存在于`kp.cache`变量中。

# javascript - 用 Date 对象查找一个月中的所有日子？

> ID：13146418
> 
> 赞同：30
> 
> 时间：2012-10-30T19:37:00.313
> 
> 标签：javascript, jquery, date, datepicker

有没有办法拥有一个月或一年的所有日子？我正在寻找这个以禁用日期选择器中的某些特定日期，我会在后台有一个页面来选择这些日子来禁用。

所以我需要显示一个月中的所有日子，并在每天下方添加一个“激活或停用”按钮。有没有办法用 Date 对象找到这些日子？例如，我找到了这个链接：[显示一个月的所有日子，](https://stackoverflow.com/questions/6729497/displaying-all-the-days-of-a-month)但我不太明白，加上它是 Java，我正在尝试在 javascript 中找到解决方案。

感谢您的帮助

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-30T20:07:28.563

要获取一个月中所有天的列表，您可以从一个月`Date`的第一天开始，增加天数，直到月份发生变化。

```
/**
 * @param {int} The month number, 0 based
 * @param {int} The year, not zero based, required to account for leap years
 * @return {Date[]} List with date objects for each day of the month
 */
function getDaysInMonth(month, year) {
  var date = new Date(year, month, 1);
  var days = [];
  while (date.getMonth() === month) {
    days.push(new Date(date));
    date.setDate(date.getDate() + 1);
  }
  return days;
} 
```

## UTC 版本

为了回应一些评论，我创建了一个使用 UTC 方法的版本，以防您想要调用 UTC 方法而不是返回本地化时区的标准方法。

我怀疑这是评论说这不起作用的罪魁祸首。`getUTCMonth/Day/Hours`如果您使用 实例化它，您通常希望确保调用方法`Date.UTC`，反之亦然，除非您尝试转换时区并显示差异。

```
function getDaysInMonthUTC(month, year) {
  var date = new Date(Date.UTC(year, month, 1));
  var days = [];
  while (date.getUTCMonth() === month) {
    days.push(new Date(date));
    date.setUTCDate(date.getUTCDate() + 1);
  }
  return days;
} 
```

## 编辑此答案

如果您认为此脚本有问题，请随时：

*   首先查看下面的现有单元测试
*   编写一个测试用例来证明它已损坏。
*   修复代码，确保现有测试通过。

## 单元测试

```
/**
 * @param {int} The month number, 0 based
 * @param {int} The year, not zero based, required to account for leap years
 * @return {Date[]} List with date objects for each day of the month
 */
function getDaysInMonthUTC(month, year) {
  var date = new Date(Date.UTC(year, month, 1));
  var days = [];
  while (date.getUTCMonth() === month) {
    days.push(new Date(date));
    date.setUTCDate(date.getUTCDate() + 1);
  }
  return days;
}

function getDaysInMonth(month, year) {
  var date = new Date(year, month, 1);
  var days = [];
  while (date.getMonth() === month) {
    days.push(new Date(date));
    date.setDate(date.getDate() + 1);
  }
  return days;
}

const days2020 = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
const days2021 = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

describe("getDaysInMonthUTC", function() {
  it("gets day counts for leap years", function() {
    const actual = days2020.map(
      (day, index) => getDaysInMonthUTC(index, 2020).length
    );
    expect(actual).toEqual(days2020);
  });

  it("gets day counts for non-leap years", function() {
    const actual = days2021.map(
      (day, index) => getDaysInMonthUTC(index, 2021).length
    );
    expect(actual).toEqual(days2021);
  });
});

describe("getDaysInMonth", function() {
  it("gets day counts for leap years", function() {
    const actual = days2020.map(
      (day, index) => getDaysInMonth(index, 2020).length
    );
    expect(actual).toEqual(days2020);
  });

  it("gets day counts for non-leap years", function() {
    const actual = days2021.map(
      (day, index) => getDaysInMonth(index, 2021).length
    );
    expect(actual).toEqual(days2021);
  });
});

// load jasmine htmlReporter
(function() {
  var env = jasmine.getEnv();
  env.addReporter(new jasmine.HtmlReporter());
  env.execute();
}());
```

```
<script src="https://cdn.jsdelivr.net/jasmine/1.3.1/jasmine.js"></script>
<script src="https://cdn.jsdelivr.net/jasmine/1.3.1/jasmine-html.js"></script>
<link href="https://cdn.jsdelivr.net/jasmine/1.3.1/jasmine.css" rel="stylesheet"/>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-07-08T11:35:47.330

**一个班轮**在一个月内将所有天都作为 Date 对象

```
const getDaysInMonth = (month, year) => (new Array(31)).fill('').map((v,i)=>new Date(year,month-1,i+1)).filter(v=>v.getMonth()===month-1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T20:00:03.133

根据您的描述，我不确定标准禁用日期日期选择器是否适用于您，因此我将直接回答您的问题。

通过执行以下操作，您可以相当容易地构建一个月的天数数组：

```
var numOfDays = new Date(2012, 10, 0).getDate(); //use 0 here and the actual month
var days = new Array();

//This will construct an array with all the elements represent the day of the week 
//(i.e. Oct 30th would be days[30-1] or days[29]) and the value would be the actual 
//day of the week (i.e. Tuesday which is representing by the number 2)
for(var i=0;i<=numOfDays;i++)
{
    days[i] = new Date(2012,9,i+1).getDay(); //use month-1 here            
}
//This will give you a number from 0 - 6 which represents (Sunday - Saturday)
alert(days[29]); 
```

使用这一系列的日子，你几乎可以用它做任何你想做的事情，并且还知道一周中的哪一天。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-06T18:14:45.890

### 使用 ES6 数组初始化器

您可以[获取指定月份的天数](https://stackoverflow.com/q/1184334/1366033)，然后创建一个具有该长度的新数组，并将每一天作为项目。

```
const getAllDaysInMonth = (month, year) =>
  Array.from(
    { length: new Date(year, month, 0).getDate() },
    (_, i) => new Date(year, month - 1, i + 1)
  ); 
```

### 堆栈片段中的演示

```
const getAllDaysInMonth = (month, year) =>
  Array.from(
    {length: new Date(year, month, 0).getDate()}, // get next month, zeroth's (previous) day
    (_, i) => new Date(year, month - 1, i + 1)    // get current month (0 based index)
  );

const allDatesInOctober = getAllDaysInMonth(10, 2021)

console.log(allDatesInOctober.map(x => x.toLocaleDateString([], { month: "short", day: "numeric" })))

// ['Oct 1', 'Oct 2', 'Oct 3', 'Oct 4', 'Oct 5', 'Oct 6', 'Oct 7', 'Oct 8', 'Oct 9', 'Oct 10', 'Oct 11', 'Oct 12', 'Oct 13', 'Oct 14', 'Oct 15', 'Oct 16', 'Oct 17', 'Oct 18', 'Oct 19', 'Oct 20', 'Oct 21', 'Oct 22', 'Oct 23', 'Oct 24', 'Oct 25', 'Oct 26', 'Oct 27', 'Oct 28', 'Oct 29', 'Oct 30', 'Oct 31']
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T20:11:05.807

这是一个贯穿每个月的循环，以确定该月的最后一天。Javascript Date 对象索引从零开始的月份，如果将日期设置为零，它将恢复到上个月的最后一天。方便确定 2 月的闰年最后一天

`Date( 2012, 12, 0)`将于 2012 年 12 月 31 日返回

`Date (2012,0,0)`将于 2011 年 12 月 31 日返回

最重要的是要弄清楚二月

`Date ( 2012,3,0)`自今年闰年起于 2 月 29 日返回

```
var mos=['jan','feb','mar','apr','may','jun','jul','aug','sep','oct','nov','dec']

for (i = 0; i < 12; i++) {
    var lastDate = new Date(2012, i+1, 0);
    $('body').append('Last day of ' + mos[i] + ' is ' + lastDate.getDate()+'<br>')
} 
```

演示：http: [//jsfiddle.net/5k8sn/1/](http://jsfiddle.net/5k8sn/1/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T23:32:04.637

我已经使用 jQuery datepicker 实现了您要求的功能。

首先，将后台选择的所有要禁用的日期添加到一个数组中

```
// format yyyy-mm-dd
var disabledDates = [
    "2012-10-01",
    "2012-10-02",
    "2012-10-30",
    "2012-09-12"
]; 
```

二、指定datepicker有两个功能

```
$("#datepicker").datepicker({

    // only enable date if dateEnabled returns [true]
    beforeShowDay: dateEnabled,

    // once a date has been selected call dateSelected
    onSelect: dateSelected
}); 
```

这是所需功能的定义

```
function dateEnabled( d ) {

    // if date found in array disable date
    if( disabledDates.indexOf( getDate( d ) ) > -1 ) {

        return [false];

    } else {

        return [true] ;

    }
} 
```

将日期转换为字符串以与数组中的日期进行比较

```
function getDate( d ) {
    var day,
        month,
        year;

    day = d.getDate( );
    month = d.getMonth( ) + 1; // add 1 as getMonth returns 0 - 11
    year = d.getFullYear( );

    if( month < 10 ) month = "0" + month;
    if( day < 10 ) day = "0" + day;
    return year + "-" + month + "-" + day;
} 
```

选择日期后，处理它

```
function dateSelected( d ) { 
   // do stuff with string representation of date                                          
} 
```

这是一个小提琴[http://jsfiddle.net/KYzaR/7/](http://jsfiddle.net/KYzaR/7/)

只是认为值得一提的是 Array.indexOf 是 ECMA-262 标准的最新补充，因此在 IE7 和 IE8 的情况下不支持它。以下 MDN 页面提供了为这些浏览器实现 Array.indexOf 的代码[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T19:43:58.457

要禁用日期选择器中的日期，您可以使用此处描述的答案：
[https ://stackoverflow.com/a/12061715/48082](https://stackoverflow.com/a/12061715/48082)

要选择多个日期（如在后台应用程序中），您可以使用此插件： http:
[//multidatespickr.sourceforge.net/](http://multidatespickr.sourceforge.net/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-19T11:30:49.407

我有一个解决方案。快乐编码❤️ !! 注意：0=1 月，1=2 月等。 [例如 w3schools](https://www.w3schools.com/jsref/jsref_getmonth.asp)

```
const getDays = (month, year) => {
    let date = new Date(`${year}-${parseInt(month)+1}-01`);
    let days = [];
    while (date.getMonth() === parseInt(month)) {
        days.push(date.getDate());
        date.setDate(date.getDate() + 1);
    }
    return days;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-18T22:05:25.963

你为什么不把一个月中的所有日子都放在这样的数组中。

```
 const getDaysInMonth = (month,year,index=1,result=[]) =>{
            const date = new Date(year,month,index)
            return month == date.getMonth() ? getDaysInMonth(month,year,index+1,[...result,date]) : result
        } 
```

然后数他们

```
const countDaysOfMonth = daysInMonth => daysInMonth.reduce((acc,value) => acc+1 ,0) 
```

然后使用 Math.ceil 7 将总数除以得到周数的行数

```
const countWeeksInMonth = numberOfDays => Math.ceil(numberOfDays / 7) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-26T23:40:05.937

这部分“新日期（年，月，0）”将获得一个月的最后一天，因此您只需从这一天开始迭代，创建从 1 到最后一天的所有天。

```
public getAllDaysOfMonth(year:number, month: number){
   const lastDayOfMonth = new Date(year, month , 0).getDate();
   for (let i = 1; i < lastDayOfMonth + 1; i++) {
     console.log('day', new Date(year, month - 1, i)) //Here will print all days
   }
} 
```

# iphone - 将 UIPanGestureRecognizer 添加到新创建的 UIView 中，并用幻灯片替换当前视图

> ID：13146419
> 
> 赞同：0
> 
> 时间：2012-10-30T19:37:03.817
> 
> 标签：iphone, objective-c, ios, xcode, uipangesturerecognizer

我已经阅读了几乎可以在该网站上找到的所有帖子。我发现了一些非常有用的帖子，但还没有找到解决我的问题的方法。我正在尝试创建一个跳板式图像查看器，用户可以将下一个图像滑入到位，但中途停止并返回。我在许多帖子中读到 PanGestureRecognizer 是可行的方法，但一直很难使用它。

在 Storyboard 中，我创建了 ViewController 并将 PanGestureRecognizer 添加到 ViewController 并添加了一个动作。

这是我的.h：

```
@interface PanViewController : UIViewController
- (IBAction)PanGesture:(UIPanGestureRecognizer *)recognizer;
@end 
```

这是我的.m：

```
@interface PanViewController ()
@property (nonatomic, retain) NSArray *PhotoBundle;
@property (nonatomic, retain) NSMutableArray *PhotoArray;
@property (nonatomic, retain) NSMutableArray *ImgViewArray;
@end

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
//set i to the correct range if needed.
if (i > 0 && 1 <= _PhotoArray.count) {

}
else i = 0;

//create photo bundle from directory
_PhotoBundle = [[NSBundle mainBundle] pathsForResourcesOfType:@".jpg"inDirectory:@"Otter_Images"];
//create array from bundle of paths.
_PhotoArray = [[NSMutableArray alloc] initWithCapacity:_PhotoBundle.count];
for (NSString* path in _PhotoBundle)
{
    [_PhotoArray addObject:[UIImage imageWithContentsOfFile:path]];
}

//create initial image view
UIImage *currentImage = [[UIImage alloc] init];
currentImage = [_PhotoArray objectAtIndex:i];
UIImageView *currentIV = [[UIImageView alloc]initWithFrame:CGRectMake(100,100, 100, 100)];
[currentIV setImage:currentImage];
[self.view addSubview:currentIV];
//increment i to progress through array.
i++;
}

- (IBAction)PanGesture:(UIPanGestureRecognizer *)recognizer {
    [self GestureDirection:recognizer];
}

- (void)GestureDirection:(UIPanGestureRecognizer *)gestureRecognizer
{
CGPoint direction = [gestureRecognizer velocityInView:self.view];

if(direction.x > 0)
{
    NSLog(@"gesture went right");
    UIImage *nextImg = [[UIImage alloc] init];
    nextImg = [_PhotoArray objectAtIndex:i];
    UIView *newView = [[UIView alloc] initWithFrame:CGRectMake(100,100, 100, 100)];
    UIImageView *nextIV = [[UIImageView alloc] initWithFrame:CGRectMake(100,100, 100, 100)];
    [nextIV setImage:nextImg];
    [newView addSubview:nextIV];

    self.view = newView;
}
else
    {
        NSLog(@"gesture went left");
    }
} 
```

它显示了 pan 上的下一个图像，但是在加载的新 View 上没有 PanGestureRecongizer。我认为当我在 Storyboard 中添加 PANGesture 时，它​​将使其可用于 ViewController 中的所有视图。

这可能是一个单独的问题，但是如何让动画在 PanGesture 上工作？我（显然）错误地认为 Pan 会执行幻灯片。

谢谢大家的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:12:13.133

所以就像 Tom Irving 说的，我使用了带有分页的 UIScrollView。我确实每次都在尝试创建一个新的手势识别器并添加分页，但这真的很复杂，我永远无法让它工作。

# utf-8 - 我的 jekyll 网站无法构建：Liquid Exception: incompatible character encodings

> ID：13146420
> 
> 赞同：21
> 
> 时间：2012-10-30T19:37:07.977
> 
> 标签：utf-8, jekyll, liquid

我不知道我改变了什么，但是今天我不能再用 jekyll 成功地建立我的网站的首页了。它现在抱怨：

```
[2012-10-30 14:22:10] regeneration: 1 files changed
Liquid Exception: incompatible character encodings: UTF-8 and ASCII-8BIT in index.html 
```

我不知道如何解决这个问题。我相信它是通过我在首页 index.html 上创建的一个帖子循环引入的，其中我包含了最后“n”个帖子的摘录。我对我的 _posts/ 目录使用了 file(1)，并且确实在其中混合了一些内容：

```
_posts/2012-08-10-canned-responses-your-silent-partner.md:    UTF-8 Unicode English text, with very long lines
_posts/2012-08-21-alternate-ssh-for-osx.md:                   UTF-8 Unicode English text, with very long lines
_posts/2012-08-21-appus-interruptus.md:                       ASCII English text
_posts/2012-10-25-emoryfocuslight.md:                         ASCII English text
_posts/2012-10-28-distributed-social-networking-with-tent.md: ASCII English text, with very long lines 
```

不过，我不确定这是否是我的问题。我使用 vim 和 bbedit 编辑这些文件，它们存储在 Dropbox 中（我在我的 Dropbox 文件夹中构建/暂存，但在其他地方发布）。我的大部分写作/编辑都是在 OS X 上完成的。

当我搜索此错误消息时，我得到了很多关于 rails 应用程序或强制 ruby​​ gems 使用特定编码的命中，我不知道这是否相关甚至对我有帮助。很想瞄准正确的方向或被告知如何解决这种情况。这是一种可悲的状态！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T16:16:52.367

解决方法是使用配置

[Jekyll 配置](http://jekyllrb.com/docs/configuration)

例子

```
encoding: utf-8 
```

[没有提到 UTF 修复](http://github.com/jekyll/jekyll/issues/1882)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-17T07:19:31.247

> 此外，您可能需要将控制台窗口的代码页更改为 UTF-8，以防在站点生成过程中出现“液体异常：不兼容的字符编码”错误。可以使用以下命令完成：

```
chcp 65001 
```

（来自 jekyll“Windows 安装页面”：http: [//jekyllrb.com/docs/windows/](http://jekyllrb.com/docs/windows/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:31:25.770

我最近一直在努力解决同样的问题，终于找到了根本原因。

我浏览了所有帖子文件，并注意到一些旧帖子中的标题内容包含以下内容：

```
title: !binary | {mime encoded string} 
```

可能是我使用的 Wordpress 迁移脚本将 latin1 字符串编码为 YAML 中的 !binary ，这在我的情况下导致了“不兼容的字符编码”错误。

我用正确的 UTF-8 字符串替换了那些，之后一切顺利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T22:42:31.593

听起来很愚蠢，但重新安装 Jekyll。然后尝试重新编译您的网站。

有一个快速的谷歌搜索，记住这些不是 Jekyll 而是 ruby​​ 如此相似。

[ruby 1.9 + sinatra 不兼容的字符编码：ASCII-8BIT 和 UTF-8](https://stackoverflow.com/questions/3223518/ruby-1-9-sinatra-incompatible-character-encodings-ascii-8bit-and-utf-8)

[http://www.ruby-forum.com/topic/206925](http://www.ruby-forum.com/topic/206925)

你`markdown`在 _config 中设置了什么？

# ruby-on-rails - HAML 和 form_for 中的错误

> ID：13146425
> 
> 赞同：0
> 
> 时间：2012-10-30T19:37:27.770
> 
> 标签：ruby-on-rails, haml

我正在学习 HAML，但我对 from_for 有疑问

```
%b New Advert!

- form_for @car, :url => { :action => "create" } do |f|
  = f.text_field :body 
  = f.submit t('advert.form.save') 
```

我的控制器

```
class AdvertController < ApplicationController
  def new
    @car = Car.new
  end

  def create
    @car = Car.new(params[:car])
  end
end 
```

还有我的模型 car.rb

```
class Car < ActiveRecord::Base
  attr_accessible :title, :body
end 
```

但我有一个错误：

# 未定义的方法“body”

广告中的 NoMethodError#new

显示 /my_project/app/views/advert/new.html.haml 其中第 4 行提出

**带有“=”的UPD** form_for 不起作用

```
= form_for @car, :url => { :action => "create" } do |f|
      = f.text_field :body 
      = f.submit t('advert.form.save') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:40:49.610

我可以在这里看到两个错误：首先你应该使用`=`而不是`-`for `form_form`，确实`=`会输出结果而`-`不会。

作为`form_for`表单的返回 HTML，您希望将其写在页面上；）

至于你的错误的原因，我不完全确定，但似乎你的`Car`模型没有`body`字段，所以它没有`body`方法

# java - Spring调度程序url模式不起作用

> ID：13146427
> 
> 赞同：0
> 
> 时间：2012-10-30T19:37:31.353
> 
> 标签：java, spring, servlets, spring-mvc

映射到控制器方法不起作用。将`http://localhost:8080/teleseminars/telesem_live`返回 404，这会显示在日志中：

> 2012-10-30 11:37:58,190 [http-8086-1] [WARN] [org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:947)] 找不到带有 URI 的 HTTP 请求的映射 [/ Teleseminars/telesem_live] 在 DispatcherServlet 中，名称为“dispatcher”

任何帮助表示赞赏。谢谢！

这是控制器：

```
@Controller
public class TeleseminarsController {

    private final Logger logger = LoggerFactory.getLogger(getClass());

    @RequestMapping(value= "/teleseminars/{page}/{series}", method = RequestMethod.GET) ///{page}/{series}
    public String getTele(@PathVariable("page") String page,
            @PathVariable("series") String series,
            HttpServletRequest request,
            final Model model) {

                //do stuff

            return page;
    }
} 
```

我在 web.xml 上有这个

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern>
    <url-pattern>/teleseminars/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T22:15:36.743

`servlet-mapping`你吃了它的那一部分。在您的控制器中，您可能需要`@RequestMapping`将`@RequestMapping(value= "/{page}/{series}", method = RequestMethod.GET)`. 我也遇到过这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:54:56.537

您能否确保您的 context.xml 中有以下行

```
 <context:component-scan base-package="com.yourapp.controller" /> 
```

在 Spring 3 或更高版本中，您仍然需要启用“自动组件扫描”（用于控制器）并手动声明“视图解析器”。我前段时间也遇到过这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:04:05.993

您正在映射两个路径变量，因此`http://localhost:8080/teleseminars/telesem_live/foo`会匹配，但`http://localhost:8080/teleseminars/telesem_live`不匹配。

# javascript - YouTube onPlayerStateChange 事件未在重新加载页面上的 Internet Explorer 中触发

> ID：13146429
> 
> 赞同：0
> 
> 时间：2012-10-30T19:37:38.803
> 
> 标签：javascript, youtube-api, dom-events

我们有一个包含 YouTube 视频的 Facebook Tab 应用程序（可能不相关）。

第一次从空缓存加载页面时一切正常。然而，在随后的页面加载中，一旦视频停止加载，[`onStateChange`](https://developers.google.com/youtube/js_api_reference#Events)处理程序就不会在 Internet Explorer 中触发。

在 Chrome 和 Firefox 中一切正常，这个问题似乎只影响 IE，而且奇怪的是，只发生在非空缓存中。[它看起来与gdata-issues #2942](http://code.google.com/p/gdata-issues/issues/detail?id=2942)非常相似，除了那个问题有`Status: Fixed`.

我们代码的相关块如下：

## 页

```
<!DOCTYPE html>

...

<div class="player-surround">
   <div id="ytplayer">
       You need Flash player 9+ and JavaScript enabled to view this video.
   </div>
</div>

...

<script src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
<script type="text/javascript">
var params = { allowScriptAccess: "always" };
var atts = { id: "ytplayer" };
// YouTube video ID redacted here
swfobject.embedSWF("http://www.youtube.com/v/XXXXXXXXXXXXXX?enablejsapi=1&playerapiid=ytplayer&version=3",
   "ytplayer", "587", "330", "8", null, null, params, atts);
</script>
<script src="//www.youtube.com/player_api"></script> 
```

## 包含的 JavaScript

```
MFA.onPlayerStateChange = function(evt) {
    var state = this.getPlayerState();
    log('158: STATE CHANGED: ' + state);

    // Then do some stuff, but the `log` call above doesn't fire
}

MFA.getPlayerState = function() {
    var playerState;

    if (this.ytplayer) {
        playerState = this.ytplayer.getPlayerState();

        switch (playerState) {
            case 5:  return 'video cued';
            case 3:  return 'buffering';
            case 2:  return 'paused';
            case 1:  return 'playing';
            case 0:  return 'ended';
            case -1: return 'unstarted';
            default: return 'Status uncertain';
        }
    }
}; 
```

（显然，我从这个问题中遗漏了一堆不相关的代码。）

有没有人知道为什么一切都会正常工作，除非 IE 以前看过该页面？我可以理解它是否*从未*在 IE 中工作过，但当缓存为空时它工作正常，但当您重新加载页面时失败。

感谢所有想法。

* * *

## 编辑

[Greg Schechter](https://stackoverflow.com/users/1715335/greg-schechter)指出我的代码示例使用了[`swfobject.embedSWF`](https://developers.google.com/youtube/js_api_reference#Embedding)代码，而不是[iframe 嵌入代码](https://developers.google.com/youtube/player_parameters?hl=en#IFrame_Player_API)。

我们最初确实使用了 iframe 嵌入代码：

```
var s = {
   playerHeight: '330',
   playerWidth: '587',
   playerVars: { 'rel': 0 },
   videos: {
      stage1: 'XXXXXXXXXXXXXX', // ...
   }
};

window.onYouTubePlayerAPIReady = function() {
   MFA.ytplayer = new YT.Player('ytplayer', {
      height: s.playerHeight,
      width: s.playerWidth,
      videoId: s.videos.stage1,
      playerVars: s.playerVars,
      events: {
         'onReady': $.proxy(MFA.onPlayerReady, MFA),
         'onStateChange': $.proxy(MFA.onPlayerStateChange, MFA),
         'onError': $.proxy(MFA.onPlayerError, MFA)
      }
   });
} 
```

，但这表现出同样的问题。该`swfobject.embedSWF`代码随后被添加以尝试解决该问题，因为我们之前已经看到 IE 过度偏执的问题，即从 iframe 跨域访问 API 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:38:30.510

您的代码示例看起来有点不对劲。看起来你正在使用`swfobject.embedSwf`with `//www.youtube.com/player_api`。该 `//www.youtube.com/player_api`脚本仅适用于 iframe 嵌入。如果您使用 iframe 嵌入，它应该可以解决您的问题。

详细信息可以在这里找到。 [https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:30:12.103

所以我不得不放下这个并回到另一个项目，但我的一位同事设法找到了解决方案。这个答案的其余部分直接取自他给我的电子邮件。

所以这里是我们如何解决这个（非常烦人的！）IE 问题的详细版本……事实证明，这是一个改变在 default.aspx 页面中调用 YouTube 播放器 API 的方式的案例。

我们替换了这个：

```
<script src="//www.youtube.com/player_api"></script> 
```

在`<script>`标签中使用以下 JavaScript：

```
 var tag = document.createElement('script');
 tag.src = "//www.youtube.com/iframe_api";
 var firstScriptTag = document.getElementsByTagName('script')[0];
 firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

（这就是它在[API 参考](https://developers.google.com/youtube/player_parameters?hl=en#IFrame_Player_API "YouTube API：使用 IFrame Player API 嵌入 IFrame")中指定的方式）。

我还注意到谷歌指定`iframe_api`但我们使用的是`player_api`. 这可能使问题更加复杂，但仅仅改变并不能解决问题。

[我们的技术总监] 向我解释的方式是，第一次加载页面时原始方式很好，因为所有内容都是新加载的，并且 YouTube API 有足够的时间在 init.js 初始化之前加载。

但是当您重新加载页面时`init.js`，在 API 准备好之前被缓存并且可能加载得太快，因此在尝试触发时失败`onYouTubePlayerReady`。以上述方式执行此操作仍然开始`init.js`，但同时也开始加载`iframe_api`（通过有效地将其作为列表中的第一个脚本标记插入）。它也可能[与 IE9 的一个已知问题略有关联，在该问题中 AJAX 调用会造成内存泄漏](https://stackoverflow.com/q/8348182/205245 "StackOverflow #8348182：jQuery 内存泄漏怀疑")，但不确定。

我在其他浏览器上间歇性地看到相同的错误（非常），我想这是由于这里和谷歌 API 连接到的任何数据中心之间的[RTD波动造成的。](http://en.wikipedia.org/wiki/Round-trip_delay_time "往返延误")如果在 API 准备好之前它不同步到足以`init.js`到达那里，`onYouTubePlayerReady`将会失败。但随后一个简单的刷新将解决它。

有趣的是，仅仅将 YouTube API 作为第一个脚本标签并没有什么不同！

所以我想教训是，当我们处理第三方 API、iframe 和 Internet Explorer 时，我们需要确保对所有第三方 API 使用异步加载，尤其是在涉及 YouTube 和 Facebook 的情况下。

# c++ - boost:asio 线程池实现，用于偶尔同步的任务

> ID：13146433
> 
> 赞同：11
> 
> 时间：2012-10-30T19:37:59.657
> 
> 标签：c++, multithreading, gcc, boost, boost-asio

我有一个“主要”功能，每个时间步执行许多小的独立任务。但是，在每个时间步之后，我必须等待所有任务完成才能继续前进。

我想让程序多线程。我已经尝试过使用 boost-offshoot 线程池的实现，我尝试过使用（共享指针）线程的向量，我已经尝试过 asio 线程池的想法（使用 io_service，建立一些工作，然后将运行分发到线程和向 io_service 发布处理程序）。

所有这些似乎都有很多开销为我的“许多小任务”创建和销毁线程，我想要一种方法，最好使用 asio 工具，实例化一个 io_service，一个 thread_group，将处理程序发布到 io_service，然后等待在发布更多任务之前完成单个时间步的工作。有没有好的方法来做到这一点？这是我现在工作的（精简）代码：

```
boost::asio::io_service io_service;
for(int theTime = 0; theTime != totalTime; ++theTime)
{
    io_service.reset();
    boost::thread_group threads;
    // scoping to destroy the work object after work is finished being assigned
    {
        boost::asio::io_service::work work(io_service);
        for (int i = 0; i < maxNumThreads; ++i)
        {
            threads.create_thread(boost::bind(&boost::asio::io_service::run,
                &io_service));
        }

        for(int i = 0; i < numSmallTasks; ++i)
        {
            io_service.post(boost::bind(&process_data, i, theTime));
        }
    }
    threads.join_all(); 
} 
```

这是我宁愿拥有的（但不知道如何实现）：

```
boost::asio::io_service io_service;
boost::thread_group threads;
boost::asio::io_service::work work(io_service);
for (int i = 0; i < maxNumThreads; ++i)
{
    threads.create_thread(boost::bind(&boost::asio::io_service::run,
         &io_service));
}

for(int theTime = 0; theTime != totalTime; ++theTime)
{
    for(int i = 0; i < numSmallTasks; ++i)
    {
        io_service.post(boost::bind(&process_data, i, theTime));
    }
    // wait here until all of these tasks are finished before looping 
    // **** how do I do this? *****
}
// destroy work later and join all threads later... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T21:14:27.183

您可以使用[期货](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.futures)进行数据处理并使用[`boost::wait_for_all()`](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.futures.reference.wait_for_all). 这将允许您根据已完成工作的部分而不是线程进行操作。

```
int process_data() {...}

// Pending futures
std::vector<boost::unique_future<int>> pending_data;

for(int i = 0; i < numSmallTasks; ++i)
{
   // Create task and corresponding future
   // Using shared ptr and binding operator() trick because
   // packaged_task is non-copyable, but asio::io_service::post requires argument to be copyable

   // Boost 1.51 syntax
   // For Boost 1.53+ or C++11 std::packaged_task shall be boost::packaged_task<int()>
   typedef boost::packaged_task<int> task_t;

   boost::shared_ptr<task_t> task = boost::make_shared<task_t>(
      boost::bind(&process_data, i, theTime));

   boost::unique_future<int> fut = task->get_future();

   pending_data.push_back(std::move(fut));
   io_service.post(boost::bind(&task_t::operator(), task));    
}

// After loop - wait until all futures are evaluated
boost::wait_for_all(pending_data.begin(), pending_data.end()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:46:36.117

可能你可以使用[boost::barrier](http://www.boost.org/doc/libs/1_33_1/doc/html/barrier.html)如下：

```
void thread_proc( boost::barrier& b ) {
    while( true ) {
        if( !ioservice.run_one() ) break; // io_service stopped
        b.wait();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T21:41:59.487

Rost 的方法本质上是有效的，但是 boost::make_shared 不能按原样编译。以下是工作版本（在 vs2012 中）：

```
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/make_shared.hpp>
#include <boost/function_types/result_type.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/function.hpp>
#include <boost/thread.hpp>

std::vector<boost::unique_future<void>> pending_data;
typedef boost::packaged_task<void> task_t;

boost::shared_ptr< boost::packaged_task<void> > pt(new boost::packaged_task<void> ([&,i](){...}));
boost::unique_future<void> result = pt->get_future();
pending_data.push_back(boost::move(result));
io_service.post(boost::bind(&task_t::operator(), pt));

boost::wait_for_all(pending_data.begin(), pending_data.end()); 
pending_data.clear(); 
```

如果在 packaged_task typedef 中使用参数，它将不会编译。这个由 asio 和 future 方法创建的线程池与每个循环创建新线程方法相比仅节省了 8% 的时间。

# r - 如何从 R 中的函数将对象加载到当前环境？

> ID：13146434
> 
> 赞同：1
> 
> 时间：2012-10-30T19:38:06.257
> 
> 标签：r

而不是做

```
a <- loadBigObject("a")
b <- loadBigObject("b") 
```

我想调用一个函数

```
loadBigObjects(list("a","b")) 
```

并且能够访问`a`和`b`对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T20:09:34.720

目前尚不清楚`loadBigObjects()`它会做什么或将在哪里寻找`a`和`b`。它如何从文件或源代码中加载对象？

一般有很多选择：

*   `sys.source()`允许将 R 文件获取到给定环境
*   `load()`这会将`.Rdata`文件加载到给定的环境
*   `assign()`结合由创建的任何对象`loadBigObjects()`或调用来`readRDS()`也可以将对象加载到给定的环境中。

在您的函数中，您需要使用`globalenv()`. 如果您不这样做，那么该对象将仅存在于 running 的评估框架中`loadBigObjects()`。例如

```
loadBigObjects <- function(list) {
    lapply(list, function(x) assign(x, readRDS(x), envir = globalenv()))
} 
```

（根据您对@GSee 的回答的评论，并假设`list("a","b")`有足够的信息`readRDS()`来定位和打开对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T19:45:52.610

Without knowing anything about what `loadBigObject` is or does, you can use `lapply` to apply a function to a list of objects

```
lapply(list("a", "b"), loadBigObject) 
```

If you provided the code for `loadBigObject` or at least describe what it is supposed to do, a better `loadBigObjects` function could probably be written.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T19:55:21.723

该`assign`函数可用于在当前环境以外的环境中定义变量。

```
loadBigObjects <- function(lst) {
  lapply(lst, function(l) {
    assign(l, loadBigObject(l), envir=globalenv())
  }
  lst
} 
```

（并不是说这一定是个好主意。）

# asp.net - 不同网站的货币格式不同

> ID：13146440
> 
> 赞同：2
> 
> 时间：2012-10-30T19:38:23.417
> 
> 标签：asp.net, iis, globalization

我在这里有一个奇怪的问题，我不确定它的 ASP.NET 版本、IIS 还是我在做一些愚蠢的事情（经验告诉我它可能是第 3 项。）

我有 2 个在 w2k3 上运行良好的网站，1 个是 ASP.NET 1.1，另一个是 2.0，货币在网页上正确显示。

自从将这些迁移到 w2k8 框和 IIS 7 后，我遇到了一个奇怪的问题，即 1.1 站点现在显示的是 $ 而不是用户浏览到的本地货币。但是 2.0 站点工作正常。

两者都将 IIS 设置为相同的全球化。（没有文化，客户是假的，UI 文化是英语 (en)）。

两个站点都托管在同一台服务器上，我能看到的唯一区别是；1 绑定使用`<Databinder.Eval(... Price, "{0:c}")>`，另一个绑定到使用的属性`String.Format("{0:c}");`

因此，由于代码没有改变，我觉得这是一个 IIS 问题。但由于这两个站点在 IIS 中具有相同的全球化设置，我认为不可能。

那么，有谁知道发生了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:29:49.600

AFAIK，至少`String.Format("{0:c}")`并且可能`<Databinder.Eval(... Price, "{0:c}")>`也会使用属性[System.Threading.Thread.CurrentCulture](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture%28v=vs.71%29.aspx)的值。

无论您是否在页面上设置它都没有关系，无论如何都会将值分配给它。并且很合理地认为，这些设置将来自服务器设置，根据您的描述，服务器设置似乎是 en-US。因此 $ 作为货币符号...您可能会问自己为什么它以前可以工作...
好吧，您确定您已经复制了所有配置文件吗？
另一个线索可能是，您模拟了 .Net 1.1 版本，而不是新盒子上的真实版本。它可能不是100％兼容...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:29:14.130

从新服务器的控制面板检查区域和语言选项，并确保它们与旧盒子上的类似设置相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-16T08:41:08.087

在英国机器服务器 2012 上开发的运行 IIS 10 站点已移至美国“开箱即用”的 GCP 默认构建服务器 2016。

在网站上 $ 符号出现在 £ 符号过去的位置。

我在“设置”>“区域和语言”中更改了所有内容。英国语言、键盘、更新和安全、左侧驱动器等。绝对没有任何区别。

最后在控制面板 > 区域中找到它。在添加英语英国作为显示语言后（并摆脱美国英语）

[![区域 > 管理 > 欢迎屏幕和新用户帐户。](../Images/38b4f03bf57e18ea11d1d3d738172388.png)](https://i.stack.imgur.com/VhHcB.png)

我需要进入管理选项卡、欢迎屏幕和新用户帐户。复制设置。

现在该网站终于显示正确的货币符号了。

# python - 如何将连续的 ID 序列恢复为 SQL 数据库中的主键？

> ID：13146441
> 
> 赞同：0
> 
> 时间：2012-10-30T19:38:25.270
> 
> 标签：python, sql, django, sqlite

我正在使用 SQlite 数据库和 Django 的`QuerySet`API 来访问这个数据库。我将数据顺序写入数据库，每个条目都有一个简单的 ID 作为主键（这是 Django 默认的）。这意味着现在数据库中有一个连续的 ID 序列（条目 1 的 ID 为 1，条目 2 的 ID 为 2，依此类推）。现在我需要再次删除一些条目。这意味着 ID 的序列现在是不连续的（条目 1 的 ID 为 1，但条目 2 的 ID 可能为 3、8、1432 或其他任何值，但不是 2）。

如何再次恢复这个连续的 ID 序列并将它们与数据库中的剩余条目相关联？有没有办法用 Django 的`QuerySet`API 做到这一点，还是我需要使用普通的 SQL？我没有使用纯 SQL 的经验，所以在这种情况下，一些工作代码会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:18:22.913

我想不出任何情况下这样做是可取的。最好的主键是不可变的（尽管这不是技术要求） ，使用无意义的整数主键的*目的*是避免更新它们。

我什至会说，如果您需要一个有意义的、完整的整数序列，请在表中创建一个单独的列，保留主键及其序列中断，并在需要时重新编号新的“序列”列。

但是，您可能有我想不到的要求。如果您*确实* **需要**更改这些键中的值，请确保数据库中对该列的所有引用都受到 FOREIGN KEY 约束的保护，并在声明外键时检查[ON UPDATE CASCADE选项。](http://www.sqlite.org/foreignkeys.html#fk_actions)它将指示数据库为您进行更新。

但是，如果您不必这样做*，*请不要这样做。

# iphone - iPhone试图创建一个NSDate对象，得到意外@

> ID：13146442
> 
> 赞同：1
> 
> 时间：2012-10-30T19:38:32.680
> 
> 标签：iphone

我正在尝试创建一个 NSDate 对象，并不断收到一条错误消息，提示“程序中出现意外@。该行是 NSDate *endDate=[ [NSDate alloc] dateWithNaturalLanguageString: @“31/12/01”]; 任何帮助都会棒棒哒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:41:51.507

我认为iOS不支持这种方法。它适用于 OSX

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:43:12.797

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T19:43:32.170

Try `[NSDate dateWithNaturalLanguageString: @"31/12/01" ]`

`dateWithNaturalLanguageString:` is a class method not an instance method (so don't call alloc).

# css - 在悬停时更改字体（粗体/斜体）以进行显示：表格单元格缩小宽度

> ID：13146443
> 
> 赞同：0
> 
> 时间：2012-10-30T19:38:34.703
> 
> 标签：css

正如标题所读。当悬停在显示为更改字体粗细的表格单元格的 li 上时，宽度会缩小/增长。

我使用 display:table`ul`因为我需要`li`s 均匀地跨越容器

这是一个 jsFiddle： http: [//jsfiddle.net/elzi/trXn4/5/](http://jsfiddle.net/elzi/trXn4/5/)已更新。

也许没有真正动态的方法来做到这一点，我需要为一些`li`带有更多文本的 s 设置一些宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:41:12.187

是的，除非您另有说明，否则表格会缩小/扩大以提供最多的内容和最多的空间。

您可以添加`width: 25%;`到您的`li`( [**Fiddle**](http://jsfiddle.net/trXn4/3/) )，也可以添加`table-layout: fixed;`到`ul`( [**Fiddle**](http://jsfiddle.net/trXn4/4/) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:41:46.707

当然可以：）如果您的列表项是静态的，您可以通过添加来设置固定宽度

```
width: xxxpx; 
```

对 li 的定义

# onclick - onclick 不适用于某些 scrollTop 值

> ID：13146444
> 
> 赞同：1
> 
> 时间：2012-10-30T19:38:36.833
> 
> 标签：onclick, scrolltop, onmouseout

我遇到了一个奇怪的问题，也许有人可以帮忙。

页面上有多个img，每个定义为：

```
<td><a href="#" onclick="Show(\'div1\');return false;"><img src="img1" onmouseout="Hide(\'div1\');"></a></td> 
```

当用户单击图像时，隐藏的 div 应该出现在页面中间，并在鼠标移出时消失。这是隐藏的 div：

```
<div id="div1" style="width:400px;height:220px;padding:8px;position:absolute;display:none;border:6px solid #CC6600;background-color:#FFDAB4"> 
```

一切正常，直到我开始上下滚动。在某些特定位置和滚动结束时，隐藏的 div 没有出现。有谁明白为什么？

这是javascript：

```
function Show (div)
{
    var winW=630,winH=460,t,l;

    if (document.body && document.body.offsetWidth) {
        winW = document.body.offsetWidth;
        winH = document.body.offsetHeight;
    }

    if (document.compatMode=='CSS1Compat' &&
        document.documentElement &&
        document.documentElement.offsetWidth ) {
        winW = document.documentElement.offsetWidth;
        winH = document.documentElement.offsetHeight;
    }

    if (window.innerWidth && window.innerHeight) {
        winW = window.innerWidth;
        winH = window.innerHeight;
    }

    var scrollTop  = window.pageYOffset || document.documentElement.scrollTop  || document.body.scrollTop;
    var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft;

    t=winH/2-240/2+scrollTop;
    l=winW/2-400/2+scrollLeft;

    document.getElementById(div).style.top=t+"px";
    document.getElementById(div).style.left=l+"px";
    document.getElementById(div).style.display="block";
}

function Hide(div)
{
    document.getElementById(div).style.display="none";
} 
```

我刚刚意识到这不是 scrollTop 问题。Anchor inside div不占整个div，只占下部。奇怪的是光标在整个img上发生了变化，onclick在整个img上被调用，但隐藏的div只有在点击下部时才会显示。我试过 style="display:block" 没有任何成功。出于绝望，我输入了 style="opacity:0.9" 并且它确实有效！唯一的问题是隐藏的 div 显示在 img 后面（比如 z-index 低于 img）。我没有使用 z-index，因为隐藏的 div 是位置：绝对。 ***还在寻找聪明人！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T10:11:09.103

试试 jQuery 解决方案

```
$(function() {
   $('body').scrollTop(0);
}); 
```

同时，如果您想要 JavaScript 解决方案，请尝试

```
document.body.scrollTop = document.documentElement.scrollTop = 0; 
```

# ruby-on-rails - 如何使用 Rspec 重构 Rails 模型中的复杂方法？

> ID：13146445
> 
> 赞同：4
> 
> 时间：2012-10-30T19:38:43.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, refactoring

我有以下复杂的方法。我正在尝试寻找并实施可能的改进。现在我把最后一个 if 语句移到了`Access`课堂上。

```
def add_access(access)
   if access.instance_of?(Access)
     up = UserAccess.find(:first, :conditions => ['user_id = ? AND access_id = ?', self.id, access.id])
     if !up && company
       users = company.users.map{|u| u.id unless u.blank?}.compact
       num_p = UserAccess.count(:conditions => ['user_id IN (?) AND access_id = ?', users, access.id])
       if num_p < access.limit
         UserAccess.create(:user => self, :access => access)
       else
         return "You have exceeded the maximum number of alotted permissions"
       end
     end
   end
 end 
```

我想在重构之前添加规范。我加了第一个。应该怎么像别人？

```
 describe "#add_permission" do
    before do
      @permission = create(:permission)
      @user = create(:user)
    end

    it "allow create UserPermission" do
      expect {
        @user.add_permission(@permission)
      }.to change {
        UserPermission.count
      }.by(1)
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:00:58.637

这是我将如何做到的。

使对 Access 的检查更像是初始断言，如果发生这种情况，则会引发错误。

制作一种新方法来检查现有用户访问权限 - 这似乎可重用且更具可读性。

然后，公司限制对我来说更像是一种验证，将其移至 UserAccess 类作为自定义验证。

```
class User

  has_many :accesses, :class_name=>'UserAccess'

  def add_access(access)
    raise "Can only add a Access: #{access.inspect}" unless access.instance_of?(Access)

    if has_access?(access)
      logger.debug("User #{self.inspect} already has the access #{access}")
      return false
    end

    accesses.create(:access => access)
  end

  def has_access?(access)
    accesses.find(:first, :conditions => {:access_id=> access.id})
  end

end

class UserAccess

  validate :below_company_limit

  def below_company_limit
    return true unless company
    company_user_ids = company.users.map{|u| u.id unless u.blank?}.compact
    access_count = UserAccess.count(:conditions => ['user_id IN (?) AND access_id = ?', company_user_ids, access.id])
    access_count < access.limit
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:48:12.873

你有这个类的单元和/或集成测试吗？在重构之前我会先写一些。

假设您有测试，第一个目标可能是缩短此方法的长度。

以下是一些需要改进的地方：

1.  将`UserAccess.find`调用移动到`UserAccess`模型并使其成为命名范围。
2.  同样，`count`也移动方法。

每次更改后重新测试并继续提取直到干净。每个人对干净都有不同的看法，但你看到它就知道了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:51:34.043

其他想法，与移动代码无关，但仍然更干净：

```
users = company.users.map{|u| u.id unless u.blank?}.compact
num_p = UserAccess.count(:conditions => ['user_id IN (?) AND access_id = ?', users, access.id]) 
```

可以变成 ：

```
num_p = UserAccess.where(user_id: company.users, access_id: access.id).count 
```

# php - 如何密码保护网站中可下载的pdf文件

> ID：13146450
> 
> 赞同：6
> 
> 时间：2012-10-30T19:39:09.590
> 
> 标签：php, html, pdf, download, password-protection

我有一个个人投资组合网站，我有一些 pdf 文件，例如

```
<a href="file.pdf">Some file</a> 
```

我不希望每个人都下载文件，我希望它用密码保护它，这样我就可以只与我认识的人分享

只有提供正确密码的人才能下载我的文件

注意： 1\. 因为它是一个个人作品集网站，所以它没有任何“登录”
2\. 我用 HTML 设计了网页作为响应代码

请您提出建议，没有 .htaccess 的任何方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T20:03:44.310

您需要使用 php 文件通过 pdf 文件存储在 NON PUBLIC 文件夹中的位置来提供文件。

例如，将您的 pdf 文件放在不可公开访问的目录中，例如：/home/pdfs/

并且您的 PHP 脚本位于公共可访问目录中，例如：/home/public_html/

在公共目录中的脚本中放置：

```
if (isset($_GET('password')) {
die('wrong password');
}

if ($_GET['password'] != 'mypass') {
die('wrong password');
}

$file="/home/pdfs/test.pdf";
header("Pragma: public");
header('Content-disposition: attachment; filename='.$file);
header("Content-type: ".mime_content_type($file));
header('Content-Transfer-Encoding: binary');
ob_clean();
flush();
readfile($file); 
```

使用 GET 值来确定要下载的文件，但为了确保更好的安全性，只允许 .pdf 扩展名，去除所有其他句点和斜线以防止它们遍历服务器的目录并获得包含密码等的重要安全文件！！！为了更安全，仍然只使用字符 az 0-9 和 - 或 _ 命名您的 pdf 文件

然后，当您希望下载文件时，请制作上述脚本的正确 URL，并确保 pdf 文件存在于非公共目录中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T19:48:35.880

使用 MySQL 或 MySQLite - 根据您的偏好 - 并将 PDF 的链接存储在数据库中。然后使用诸如download.php之类的脚本。在数据库中存储文件的密码，并要求用户在下载文件之前输入密码。如果您不熟悉数据库，您可以使用 PHP 完成所有操作。

一个非常粗糙的模型（没有数据库，如果您熟悉 dbs，请相应调整）

HTML 表单

```
<form name="download" id="download" method="post" action="download.php">
  <input type="password" id="password" name="password" />
  <input type="submit" id="submit" value="Download" />
</form> 
```

PHP (下载.php)

```
<?php
     // Get the password
          $pw = md5($_POST['password']);

     // Compare against the stored password
          $valid_pw = md5("your password you want to use");

          if($pw != $valid_pw){
               echo "Error! You do not have access to this file";
          }else{
               header("Location: /path/to/your/file.pdf");
          }
?> 
```

笔记：

我使用了一种非常基本的密码加密方法。如果这是我的应用程序，我会研究更好的方法，但为了简洁和易于理解，我使用了简单的`md5()`哈希比较。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T20:02:56.377

遵循**@rsmith84 的**提示，但请确保阻止文件夹访问：

**Apache** .htaccess 文件

```
Deny from all 
```

**IIS** web.config 文件

```
<system.webServer>
    <security>
        <authorization>
            <remove users="*" roles="" verbs="" />
            <add accessType="Allow" roles="Administrators" />
        </authorization>
    </security>
</system.webServer> 
```

然后只允许使用 PHP 文件进行交付。验证用户，然后`readfile('/protectd/file/path')`从受保护的文件夹中执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T19:45:58.227

Create a php file say, `download.php` and link to that file instead.
You can check for correct password there, and if it's correct, you can write the contents of the PDF file to the response.

# jquery - .NET MVC 4 Kendo UI 网格和文件上传

> ID：13146451
> 
> 赞同：0
> 
> 时间：2012-10-30T19:39:22.730
> 
> 标签：jquery, ajax, asp.net-mvc, kendo-ui

有没有可能做这样的事情：

1.  我有一个带有 KendoGrid 的窗口。DataSource 绑定到包含 AttachmentDetails 列表的模型：文件名、内容、描述等。
2.  我在表单顶部有一个按钮，可以将修改/添加/删除的列表“保存”到数据库。
3.  我有一个“添加”新附件的按钮。这将通过 javascript open.window 打开一个新窗口。
4.  在该窗口上，我有一个表单，其中包含模型 AttachmentDetails 的字段，输入类型为“文件”以获取内容。
5.  当我在该新窗口上单击“保存”时，它应该自行关闭，并将新项目添加到父窗口上的 Grid 中。

我怎样才能用剑道做这种可用性？我应该使用 Session 来存储包含内容的列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:33:12.180

因此，您希望在完成文件上传后刷新网格并显示新记录？如果是这种情况，您应该在调用上传成功回调时使用[dataSource.read()](http://docs.kendoui.com/api/framework/datasource#read)方法刷新 Grid。

# razor - Umbraco Razor 语法问题

> ID：13146452
> 
> 赞同：0
> 
> 时间：2012-10-30T19:39:25.337
> 
> 标签：razor, umbraco

我让这个宏在实时服务器上愉快地运行。在 WebMatrix 中没问题。现在 WebMatrix 已将自身更新为 2（刷新），它不会运行一些宏，这是其中之一：-

```
 @{
  //Check there are slider image page loaded
  var theCount = @Model.Descendants("SliderImagePage").Count();

  if (theCount > 0)
    {
        foreach (var theImagePage in Model.Descendants("SliderImagePage"))
          {
           var theImage = theImagePage.Media("sliderImage","umbracoFile");
           if (theImagePage.IsFirst()) 
           {
            @:<div class="slide" style="background-image:url('@Html.Raw(theImage)');display:block;"></div>
            } else {
            @:<div class="slide" style="background-image:url('@Html.Raw(theImage)');display:none;"></div>
            }
          }    
     }
  else
  {
   @: No Picture Image pages set up
  }

} 
```

它抱怨“：”在代码块的开头无效。

我在 VS2010 中有 MVC4 和 Razor 扩展。据我了解，这一切都是有效的。谁能解释为什么它不能通过验证？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:44:04.030

foreach 循环中的语句应该可以在不使用 @: 的情况下正常运行：

```
@{
    //Check there are slider image page loaded
    var theCount = @Model.Descendants("SliderImagePage").Count();

    if (theCount > 0)
    {
        foreach (var theImagePage in Model.Descendants("SliderImagePage"))
        {
            var theImage = theImagePage.Media("sliderImage","umbracoFile");
            if (theImagePage.IsFirst()) 
            {
                <div class="slide" style="background-image:url('@Html.Raw(theImage)');display:block;"></div>
            }
            else 
            {
                <div class="slide" style="background-image:url('@Html.Raw(theImage)');display:none;"></div>
            }
        }    
     }
    else
    {
        @: No Picture Image pages set up
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T21:06:05.610

您似乎在 Razor 中发现了编译问题。有一个简单的解决方法；如果从第 3 行中删除“@”字符，则上面给出的代码将在 Razor v1 和 Razor v2 中编译。

为此，我在 CodePlex 上的网页团队的错误数据库中打开了一个错误，希望它会在下一个版本中得到解决。

HTH，粘土

# apache - Apache Config - 从身份验证中排除位置

> ID：13146455
> 
> 赞同：10
> 
> 时间：2012-10-30T19:39:34.277
> 
> 标签：apache, authentication, location, single-sign-on, shibboleth

我有一个受 Shibboleth 身份验证模块保护的 Web 应用程序。我当前的配置如下

```
<Location /MyApp>
 AuthType shibboleth
 ShibUseHeaders On
 ShibRequestSetting requireSession 1
 require shibboleth
</Location> 
```

**shibboleth**是一个提供 SSO 功能的身份验证模块，当前流程将用户引导到*身份提供者*，以便用户输入登录凭据。我希望能够打开一个特定的 URL，以便 URL 被身份验证模块绕过。我尝试了以下方法，但它似乎不起作用，并且在加载 URL 时出现空白页

*方法一*

```
<Location /MyApp/Login.html>
  Satisfy Any
  Allow from all
  AuthType None
  Require all granted
</Location> 
```

*方法二*

```
<Location /MyApp/Login.html>
  AuthType shibboleth
  ShibRequestSetting requireSession 0
  require shibboleth
</Location> 
```

我做了一些额外的调试，似乎问题出在**Login.html**加载的其他文件上 - 例如 css、js 等。在 Apache 中配置它的正确方法是什么，以便可以绕过身份验证中的 Login.html

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T19:28:11.100

我最后关于排除**Login.html**加载的其他文件的评论最终是正确的。我使用以下格式排除了 html 文件正在加载的文件

```
<Location ~ "/MyApp/(Login.html|SessionTimeout.html|accessDenied.html|/badRequest.html|status|css/*|login/*|images/*|style/*|js/*|javascript/*|)">   
  Satisfy Any   
  Allow from all   
  AuthType None   
  Require all granted   
</Location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-14T05:22:45.110

当使用 Apache 2.4 而不是 2.2 时，为了排除“/server-status”，以下内容就足够了：

```
<LocationMatch "^(?!/server-status)">
    AuthType Basic
    AuthUserFile /etc/apache2/.htpasswd
    <RequireAll>
        Require ssl
        Require user valid_user_name
    </RequireAll>
</LocationMatch> 
```

分析：

*   `<LocationMatch "regex">`相当于。[_](https://httpd.apache.org/docs/current/mod/core.html#locationmatch) _`<Location ~ "regex">`
*   [使用](https://httpd.apache.org/docs/current/glossary.html#regex)的正则表达式是`pcre`（perl 兼容的正则表达式）。
*   `^(?!/server-status)`方法：
    *   `^`： “以。。开始”
    *   `(?!)`：“[负面展望](https://stackoverflow.com/questions/1240275/how-to-negate-specific-word-in-regex)（而不是正面`(?=)`）”

# android - Android 控制台公钥

> ID：13146459
> 
> 赞同：0
> 
> 时间：2012-10-30T19:39:46.023
> 
> 标签：android, publishing, public-key

好吧，我很困惑！

创建密钥库以签署 apk 文件时，是否应该使用“Android 控制台”中的公钥？

这是否有意义“如果您有开发者帐户，您可以使用 DEVELOPER KEY 签署您的应用程序。如果您没有账户，您可以使用您的 OWN 密钥”？这是什么意思，什么是“开发人员密钥”。

顺便提一句。我有开发者账户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:53:21.557

您不需要任何特定的密钥，只需在 Eclipse 中通过右键单击项目 > 导出签名的应用程序项目来创建一个新的密钥文件，然后创建一个

注意：从那时起，您必须始终使用此密钥文件来签署您的应用程序，以便上传和推送更新到 Play 商店

# google-apps-script - Google UiApp 重置 UI 应用

> ID：13146460
> 
> 赞同：2
> 
> 时间：2012-10-30T19:39:48.483
> 
> 标签：google-apps-script

我正在制作一个脚本，它本质上是一个提交电子邮件的表单。有一个提交和一个重置按钮。我希望完成的目标是重置按钮重新加载 Google 网站或重新加载应用程序脚本。我可以使用 Google Apps 脚本中的函数来完成此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T22:13:35.223

通过将所有内容放在面板中（水平、垂直、滚动等），您可以在服务器处理程序中为表单提交执行以下操作

```
app = UiApp.getActiveApplication().remove(0);
/*add whatever you want here using app */
return app; 
```

这将删除应用程序（面板）中的第一项，并允许您添加任何内容。您还可以将客户端处理程序与最初不可见的项目一起使用。提交时，隐藏表单并显示一条消息，直到服务器处理程序返回。

不幸的是，没有办法刷新页面。

**编辑：** *添加我在评论中写的内容，以便阅读：*

我通常设置我的方式，doGet 和处理程序都调用另一个函数，其中包含新/当前应用程序的参数以及我的列表框具有的任何值。例如，

```
function doGet(e){
    return actuallyCreateGadget(UiApp.createApplication(), "default value for listbox");
}
function actuallyCreateGadget(app, selectedValue){
    //do stuff here and finish by returning app
}
function serverHandlerFunction(e){
    return actuallyCreateGadget(UiApp.getActiveApplication().remove(0), e.parameter.lbFirst);
} 
```

# python - Python for Linux 中的垃圾收集

> ID：13146466
> 
> 赞同：4
> 
> 时间：2012-10-30T19:40:05.600
> 
> 标签：python, linux

我有点困惑 Python 如何分配内存和垃圾收集，以及它是如何特定于平台的。例如，当我们比较以下两个代码片段时：

片段一：

```
>>> id('x' * 10000000) == id('x' * 10000000)
True 
```

片段 B：

```
>>> x = "x"*10000000
>>> y = "x"*10000000
>>> id(x) == id(y)
False 
```

Snippet A 返回 true 是因为当 Python 分配内存时，它在第一次测试中将其分配在相同的位置，而在第二次测试中分配在不同的位置，这就是它们的内存位置不同的原因。

但显然系统性能或平台会影响这一点，因为当我大规模尝试时：

```
for i in xrange(1, 1000000000):
    if id('x' * i) != id('x' * i):
        print i
        break 
```

Mac 上的一个朋友试过这个，它一直运行到最后。当我在一堆 Linux 虚拟机上运行它时，它总是会在不同的虚拟机上返回（但在不同的时间）。这是因为 Python 中的垃圾收集调度吗？是因为我的 Linux VM 的处理速度低于 Mac，还是因为 Linux Python 实现的垃圾收集方式不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:45:04.380

The garbage collector just uses whatever space is convenient. There are lots of different garbage collection strategies, and things are also affected by paramters, different platforms, memory usage, phase of the moon etc. Trying to guess how the interpreter will happen to allocate particular objects is just a waste of time.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T19:50:41.000

发生这种情况是因为 python 缓存了小整数和字符串：

**大字符串**：存储在未缓存的变量中：

```
In [32]: x = "x"*10000000

In [33]: y = "x"*10000000

In [34]: x is y
Out[34]: False 
```

**大字符串**：不存储在变量中，看起来像缓存：

```
In [35]: id('x' * 10000000) == id('x' * 10000000)
Out[35]: True 
```

**小字符串**：缓存

```
In [36]: x="abcd"

In [37]: y="abcd"

In [38]: x is y
Out[38]: True 
```

**小整数：**缓存

```
In [39]: x=3

In [40]: y=3

In [41]: x is y
Out[41]: True 
```

**大整数：**

存储在变量中：未缓存

```
In [49]: x=12345678

In [50]: y=12345678

In [51]: x is y
Out[51]: False 
```

未存储：缓存

```
In [52]: id(12345678)==id(12345678)
Out[52]: True 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T19:50:16.400

*CPython* uses two strategies for memory management:

1.  Reference Counting
2.  Mark-and-Sweep Garbage Collection

Allocation is in general done via the platforms malloc/free functions and inherits the performance characteristics of the underlaying runtime. If memory is reused is decided by the operating system. (There are some objects, which are pooled by the python vm)

Your example does, however, not trigger the 'real' GC algorithm (this is only used to collect cycles). Your long string gets deallocated as soon as the last reference is dropped.

# c# - 继承自 TextBoxBase

> ID：13146469
> 
> 赞同：3
> 
> 时间：2012-10-30T19:40:11.090
> 
> 标签：c#, winforms

我正在处理一个库 (.dll) 文件，我想创建一个名为 FatherTextBox 的小自定义 TextBox，所以我首先从 TextBoxBase（一个抽象类）派生。

在对自定义逻辑进行编码后，我注意到我收到了以下错误消息：

```
The type 'System.Windows.Forms.TextBoxBase' has no constructors defined 
```

所以我想这不是一个选择：

```
 public FatherTextBox() : base()
    {

    } 
```

我的问题是：

1.  从没有构造函数的抽象类继承的方法是什么？
2.  为什么 TextBoxBase 没有构造函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T19:45:35.273

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.aspx)：

> 您通常不会从 TextBoxBase 继承。要创建自己的文本控件类，请从 TextBox 或 RichTextBox 继承。

`TextBoxBase`有一个`internal`构造函数，这就是为什么你不能调用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T20:04:37.770

看类的源码`TextBoxBase`，有两个构造函数：

```
internal TextBoxBase()
{
    base.SetState2(2048, true);
    this.textBoxFlags[TextBoxBase.autoSize | TextBoxBase.hideSelection | TextBoxBase.wordWrap | TextBoxBase.shortcutsEnabled] = true;
    base.SetStyle(ControlStyles.FixedHeight, this.textBoxFlags[TextBoxBase.autoSize]);
    base.SetStyle(ControlStyles.UserPaint | ControlStyles.StandardClick | ControlStyles.StandardDoubleClick | ControlStyles.UseTextForAccessibility, false);
    this.requestedHeight = base.Height;
} 
```

和

```
static TextBoxBase()
{
    // Note: this type is marked as 'beforefieldinit'.
    TextBoxBase.autoSize = BitVector32.CreateMask();
    TextBoxBase.hideSelection = BitVector32.CreateMask(TextBoxBase.autoSize);
    TextBoxBase.multiline = BitVector32.CreateMask(TextBoxBase.hideSelection);
    TextBoxBase.modified = BitVector32.CreateMask(TextBoxBase.multiline);
    TextBoxBase.readOnly = BitVector32.CreateMask(TextBoxBase.modified);
    TextBoxBase.acceptsTab = BitVector32.CreateMask(TextBoxBase.readOnly);
    TextBoxBase.wordWrap = BitVector32.CreateMask(TextBoxBase.acceptsTab);
    TextBoxBase.creatingHandle = BitVector32.CreateMask(TextBoxBase.wordWrap);
    TextBoxBase.codeUpdateText = BitVector32.CreateMask(TextBoxBase.creatingHandle);
    TextBoxBase.shortcutsEnabled = BitVector32.CreateMask(TextBoxBase.codeUpdateText);
    TextBoxBase.scrollToCaretOnHandleCreated = BitVector32.CreateMask(TextBoxBase.shortcutsEnabled);
    TextBoxBase.setSelectionOnHandleCreated = BitVector32.CreateMask(TextBoxBase.scrollToCaretOnHandleCreated);
    TextBoxBase.EVENT_ACCEPTSTABCHANGED = new object();
    TextBoxBase.EVENT_BORDERSTYLECHANGED = new object();
    TextBoxBase.EVENT_HIDESELECTIONCHANGED = new object();
    TextBoxBase.EVENT_MODIFIEDCHANGED = new object();
    TextBoxBase.EVENT_MULTILINECHANGED = new object();
    TextBoxBase.EVENT_READONLYCHANGED = new object();
} 
```

第一个构造函数是内部的，因此只有定义该类型的同一程序集才能访问它。第二个是静态构造函数，它在类的第一次访问时被调用。

现在回答你的问题：

1.  如果抽象类没有构造函数，则它不打算用于继承。还有其他课程，例如`TextBox`或`RichTextBox`满足您的需要。

2.  该课程的架构师`TextBoxBase`为所有文本框设计了一个文本框基础，具有共同的 OOP 原则：封装。封装简称为隐藏复杂类型的实现细节。而且`TextBoxBase`相当复杂。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T19:46:10.240

试试这个

```
 class Txt:TextBox

    {
        public Txt():base()
        {

        }
    } 
```

# javascript - 为任何找到的事件动态添加边距

> ID：13146470
> 
> 赞同：2
> 
> 时间：2012-10-30T19:40:22.870
> 
> 标签：javascript, jquery

我怎样才能使它更优雅和通用？它可以工作，但我希望在每次下一个 .alert 出现时将边距添加 +52px。

```
var alerts = $(".alert");
if(alerts.is(":visible")) {
    if(alerts.length > 1 ) {
        alerts.eq(1).css('margin-top', '52px');
        alerts.eq(2).css('margin-top', '104px');
        alerts.eq(3).css('margin-top', '156px');
    }
    alerts.delay(5000).slideUp("slow");
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:41:58.720

这个 ：

```
 $(".alert:visible").css('margin-top', function(i){return 52*i+'px'})
    .delay(5000).slideUp("slow"); 
```

# r - 如何在 R 中的函数内部操作全局环境？

> ID：13146473
> 
> 赞同：3
> 
> 时间：2012-10-30T19:40:35.080
> 
> 标签：r

我想从当前环境中删除所有对象，除了其中两个，像这样

```
rm(list=setdiff(ls(),c("current_object_a","current_object_b"))) 
```

但我想在一个函数中调用它。如果我现在这样做，什么也不会发生，因为我正在删除函数内部的环境变量，而不是全局环境。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T19:48:17.793

您必须为 和 指定`ls`环境`rm`。

```
rm(list = setdiff(ls(globalenv()),
                  c("current_object_a", "current_object_b")),
   pos = globalenv()) 
```

但是，真的，你为什么要这样做？从函数中删除全局环境中的东西似乎是一件坏事。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T19:42:36.537

您可以使用`pos`or`envir`参数指定环境

```
rm(list=setdiff(ls(pos=globalenv()),
                c("current_object_a","current_object_b")), 
   pos=globalenv()) 
```

* * *

从`?rm`

> 'pos' 参数可以通过以下几种方式指定要从中删除对象的环境： 作为整数（在 'search' 列表中的位置）；作为搜索列表中元素的字符串名称；或作为“环境”（包括使用“sys.frame”访问当前活动的函数调用）。'envir' 参数是指定环境的另一种方法，但主要是为了向后兼容。

# php - 构建对象注释树

> ID：13146478
> 
> 赞同：3
> 
> 时间：2012-10-30T19:40:43.943
> 
> 标签：php, mysql, object

我想制作回复有限的评论系统。例如：

```
#1st comment
## reply to the 1st comment
## reply to the 1st comment
#2nd comment
#3rd comment
## reply to the 3rd comment 
```

因此，每条评论都有一个回复树。最后我想像这样使用它，假设我有来自 db 的 $comments 对象数组：

```
foreach($comments as $comment)
{
    echo $comment->text;

    if($comment->childs)
    {
        foreach($comment->childs as $child)
        {
            echo $child->text;
        }
    }
} 
```

所以我想我需要创建另一个对象，但不知道如何让它全部工作。我应该使用 stdClass 还是其他东西？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:10:43.443

一般而言，我试图放下问题来理解它，看看从那里出现了哪种类型的 OO 设计。据我所见，您似乎有三个可识别的对象：要评论的对象、第一级评论和第二级评论。

*   要评论的对象有一个第一级评论列表。
*   第一级评论又可以有子评论。
*   二级评论不能有子级。

所以你可以从建模开始：

```
class ObjectThatCanHaveComments
{
     protected $comments;
     ...
     public function showAllComments()
     {
         foreach ($this->comments as $comment)
         {
            $comment->show();
         }
     }
}

class FirstLevelComment
{
     protected $text;
     protected $comments;
     ...
     public function show()
     {
         echo $this->text;
         foreach ($this->comments as $comment)
         {
            $comment->show();
         }
     }
}

class SecondLevelComment
{
     protected $text;

     public function show()
     {
         echo $this->text;
     }
} 
```

这可能是一种有效的第一种方法。如果这适用于您的问题，您可以通过创建[复合](http://en.wikipedia.org/wiki/Composite_pattern)来对评论进行建模来改进它，从而删除遍历评论列表和`$text`定义的重复代码。请注意，消息中的注释类已经是多态的`show()`。

# java - 用于文件中文本搜索的 OS Utilities 与 Java API

> ID：13146484
> 
> 赞同：1
> 
> 时间：2012-10-30T19:40:51.743
> 
> 标签：java

假设我想在文件中搜索一些文本。我想知道我们什么时候应该使用像 grep 这样的系统实用程序/程序，什么时候应该使用 Java API，比如读取一行，然后搜索该行中的文本或使用 java Scanner 类。

我想了解这两种方法之间的权衡。我的意思是，假设如果我们使用 grep，那么 JVM 和 grep 进程之间会有通信开销吗？为 grep 创建新的操作系统进程是否会产生开销？

grep 的性能是否优于普通的 java 文件搜索？

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:44:10.077

Yes, there will be an overhead. Starting an external process and communicating with it is costly. And moreover, many systems don't have a grep command. If you want to make your Java code portable, don't rely on OS-specific commands.

Another problem is that OS commands will be able to search (for example) in files, but not in your in-memory data structures.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:11:49.577

您基本上是在牺牲系统独立性来换取工具的感知收益，在某些情况下这是无法避免的。

并非每个系统都会在您认为应该安装的位置或您需要的版本中安装您想要的工具。

即使您可以将这些工具与您的应用程序一起部署，您也需要为每个目标平台提供一个实现。

当然，说“它永远不会在 X 上运行”很容易，但永远不会很快出现；）

还有执行和管理外部应用程序的 IO 的额外开销，虽然不难，但它比编写良好的 Java API 复杂得多。

正如我所说，有时，您根本别无选择（我有一些我在 Windows 和 Mac 上使用的媒体检查工具，我不打算尝试在 Java 中实现，不是因为它不能，而是因为它既复杂又耗时，而且有人已经完成了（使用本机程序））。

您需要在选择外部命令权重的好处与使用它的问题之间取得平衡。您还应该调查是否已经开始开发可能解决手头问题的 API。

恕我直言

# regsvr32 - Visual C++ ATL Com 注册问题

> ID：13146485
> 
> 赞同：1
> 
> 时间：2012-10-30T19:40:53.277
> 
> 标签：regsvr32

我有一个创建 COM DLL 的 Visual C++ 6 项目。这是一个我多年未使用过的旧项目，但最近我又回来更新 DLL 的一些功能。我遇到的问题是，当我尝试手动注册项目创建的 DLL（使用 regsvr32）时，我没有得到任何响应。它没有说它成功，也没有说它失败。我已经验证 DLL 没有被添加到注册表中。我从未见过 regsvr32 不会显示任何确认消息的情况。

此外，DLL 设置为在项目中自行注册，当它尝试这样做时，它也不会显示消息。

我已经很久没有碰过这个项目了，但我上次碰过它时，它没有问题。现在我回到它，突然之间我遇到了这个问题。就好像 Visual C++ 项目正在创建的 DLL 与当前版本的 Windows 不兼容。我已将开发软件更新到 SP6，但并没有改变这种情况。

当它指向创建的 DLL 时，我运行 Depends on regsvr32，它显示以下消息：

LoadLibraryExW("C:\Source32\BIS\Projects\ALFA\DigiPixSvc\DigiPixObj\Debug\DigiPixObj", 0x00000000, LOAD_WITH_ALTERED_SEARCH_PATH) 返回 NULL。错误：操作系统无法运行 %1 (182)。

谁能告诉我为什么会发生这种情况以及我能做些什么来纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:38:06.137

免责声明：由于我不再安装 VS 6.0，我将不得不使用一些 Google 搜索来为您提供 VC 6.0 对话框的确切步骤 - 所以其中一些信息可能不准确。我相信这是正确的——这确实是您在当前 IDE 中所做的，仅适用于 VC 6.0。

在您调试 DLL 的麻烦之前，请确保您通过[Dependency Walker](http://www.dependencywalker.com/)运行它以验证您的所有依赖项都在您的计算机上。不要在 regsvr32 上运行*Dependency Walker* - 重要的是您的 DLL 是否具有其依赖项。如果它们丢失，regsvr32 将无法加载 DLL。

要查看您的 DLL 是否在您尝试注册时被 regsvr32 加载，您需要通过该`DLLRegisterServer()`函数进行调试并查看那里发生了什么 - 这是 COM DLL 必须具有的 4 个入口点之一，并且 regsvr32 在DLL 即将注册。为此，您必须将 regsvr32 设置为项目的启动程序，并将调试构建的 DLL 的完整路径作为命令行参数传递给 regsvr32。

*   为您的项目调出*项目属性*。
*   转到*调试*选项卡。
*   确保选择了*常规*类别。
*   *在Executable for debug session*文本框中输入 regsvr32 的完整路径。
*   *在程序参数*文本框中输入 DLL 调试版本的完整路径。确保您的 DLL 有一个 PDB 文件，以便在调试期间可以看到符号信息。
*   将断点放在`DLLRegisterServer()`. 此函数中的代码可长可短，具体取决于它的创建方式：由向导生成、由开发人员编写等。
*   开始调试。

您的断点应该被击中，您应该能够单步执行注册代码并查看它在哪个点失败。

# javascript - javascript - 无法在初始化函数之外定义 Google Maps API lat & lng？

> ID：13146491
> 
> 赞同：0
> 
> 时间：2012-10-30T19:41:39.110
> 
> 标签：javascript, google-maps

所以我有我的简单`initialize()`功能，它工作正常，直到我需要能够更新纬度和经度坐标。我选择通过使用初始 lat & lng 坐标定义变量并将它们移出`initialize()`函数（在内部引用）并使用更新后的坐标更新这些变量的值（然后重新初始化地图）来做到这一点。

我不知道为什么，但是现在我刷新页面时地图没有加载。我将其更改为使用变量定义函数内部的坐标，它工作正常。只有当我在函数之外定义它们时它才不起作用。

但是，如果您`initialize()`在控制台中调用它会起作用，而不是像在此更改之前那样在页面加载时。

代码看起来基本上是这样的

```
var latcoord= 1234;
var lngcoord= 1234;
function initialize() {
    var myLatlng = new google.maps.LatLng(latcoord, lngcoord);
    //ETC
} 
```

这是我用来重现问题的小提琴：[这里](http://jsfiddle.net/j4NM5/1/)

那么我怎样才能使这项工作呢？如果我没有在`initialize()`函数之外定义它，那么我就无法更新变量并显示新坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:58:51.063

这与变量范围无关，与您使用的值有关。

```
if(latcoord === false) {// DOESN'T WORK
    latcoord = 120;
    lngcoord = 100;
} 
```

使用“DOES WORK”块时，您将值“false”分配给它们，这将导致 Maps API 将其视为 {0,0}。当您将 {120, 100} 分配给它们时，您无法获得有意义的结果，因为 {120,100} 在地球上没有有意义的表示（最大纬度为 90 - 北极）。

对于演示这一点的 Fiddles，请参阅[在函数外部使用 {0,0} 以获得与“函数内部”示例相同的效果，](http://jsfiddle.net/6q778/1/)并在函数[外部为 Lat/Long 使用有意义的值](http://jsfiddle.net/3VDAR/1/)。

# sunspot-rails - Openshift中的长时间运行过程 - 像太阳黑子

> ID：13146495
> 
> 赞同：0
> 
> 时间：2012-10-30T19:41:50.857
> 
> 标签：sunspot-rails, openshift, sunspot-solr

我知道那里有很多 openshift 粉丝，openshift 给你的功能列表我也不怪他们

所以这个问题是针对那些我`solr`在 openshift 上运行全文搜索引擎的人

现在我`sunspot_rails`用来连接`solr`到创建索引

一段时间内一切正常，所有索引都得到适当创建，但我们经历了一段时间后`connection`，solr 不断迷路

所以我假设openshift不允许长时间运行的进程像`solr`运行并且会在一段时间后终止

我相信我是正确的吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:41:40.813

You can use `nohup` to launch your script with post_start_ and post_stop_ scripts in .openshift\actionhooks

[Redhat openshift - Cron Runtime - Is there a default time for how long cron executes](https://stackoverflow.com/questions/13218013/redhat-openshift-cron-runtime-is-there-a-default-time-for-how-long-cron-exec) shows how to do it with cron.

# php - 不确定如何处理 json php mysql 集成

> ID：13146503
> 
> 赞同：1
> 
> 时间：2012-10-30T19:42:18.440
> 
> 标签：php, javascript, mysql, json

假设为了争论，我有：

```
<select id="lvl1">
</select>
<div id="lvl2">
    <select id="lvl2a">
    <select id="lvl2b">
    <input text id="lvl2c">
</div>
<select id="lvl3">
</select> 
```

在`file1.php`并且我想填充`<select id="lvl3">`一个查询的结果，它基本上看起来像：

```
SELECT * FROM lvl1 WHERE fld_a = lvl2a AND fld_b = lvl2b AND fld_c = lvl2c 
```

障碍是`lvl2`在外部 js 文件 ( `file2.js`) 中根据用户在`lvl1`. 从我所看到的一切来看，我似乎想为此使用 JSON，但是我将如何调用位于`file3.php`外部 js 文件中的 PHP 函数，`file2.js`并将这些结果作为数组返回以`lvl3`填充`file1.php`？

希望我已经很好地解释了自己。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:56:54.430

您将需要重构标记的生成方式才能使其正常工作。这是我的做法：

1.  `lvl1`页面加载时从您的 PHP 脚本中吐出。
2.  用户在 中选择某些内容后`lvl1`，您会使用他们选择的内容向服务器发出 AJAX 请求。
3.  服务器使用`lvl2`您注入页面的标记进行响应。
4.  如果需要，在用户从中选择某些`lvl2`内容以获取`lvl3`.
5.  最后，提交表单会将所有选定的数据中继到表单处理脚本，您将在其中验证响应并执行您正在执行的任何其他操作。

这应该足以让你继续前进。

# javascript - 使用链接点击清除输入字段Javascript

> ID：13146507
> 
> 赞同：1
> 
> 时间：2012-10-30T19:42:47.333
> 
> 标签：javascript, hyperlink, textfield

我正在尝试使用链接来清除文本输入字段。我正在隐藏并显示一个备忘录字段，如果用户在字段中放置文本并单击“删除备忘录”链接，我希望文本字段在单击时清除。

```
 <html>
    <head>
    <script language="JavaScript">
function toggle(id) {
    var state = document.getElementById(id).style.display;
        if (state == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }

    oldTextAry = new Array();

    function changeText (fieldObj, newTexStr) {
    if (newTexStr == fieldObj.innerHTML) {
    fieldObj.innerHTML = oldTextAry[fieldObj.id];
    } else {
    oldTextAry[fieldObj.id] = fieldObj.innerHTML;
    fieldObj.innerHTML = newTexStr;
    }
    }

    </script>
    <style type="text/css">
    <!--
    #hidden1 {display: none;}
    -->
    </style>
    </head>
    <body>

    <a href="###" onclick="toggle('hidden1'); changeText(this,'Remove Memo');" class="memo" >Add Memo</a>
    </div>

    <div id="hidden1"><div class="memo">Memo: <input type="text" id="ctlWorkflow_ctlMemo381" size="45" maxlength="32" name="ctlWorkflow:ctlMemo381"></div>        </div>                     

    </body>
    </html> 
```

我被卡住了，无法清理场地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:45:32.480

Use the below code in the click delegate. Sorry for the mistaken answer.

```
document.getElementById("ctlWorkflow_ctlMemo381").value = ''; 
```

Cheers

# html - 未知宽度的水平定位（和小的父元素）

> ID：13146509
> 
> 赞同：2
> 
> 时间：2012-10-30T19:42:50.437
> 
> 标签：html, css

我想在 CSS3 中创建简单的工具提示。

示例：http: [//jsfiddle.net/Cg2SX/](http://jsfiddle.net/Cg2SX/)

示例 HTML（必要时可以更改）：

```
 <div class="icons">
        <a href="">t <span class="tooltip">Twitter</span></a>
        <a href="">f <span class="tooltip">Facebook</span></a>
        <a href="">g <span class="tooltip">Google+</span></a>
    </div>​ 
```

和 CSS：

```
 .icons { position: absolute; left: 40px; top: 30px; }
    .icons a { text-decoration:none; font-size: 16px; color: #000000; position: relative; margin-right: 70px; border:1px solid red; }
    .icons a:hover { text-decoration:none; }
    .tooltip { background-color: green; color: #FFFFFF; font-family: Arial,sans-serif; font-size: 10px; padding: 2px 8px; bottom: -20px; position: absolute; }​ 
```

问题是 - 我不知道如何在共享图标下方居中工具提示（它们将是字体图标）。如果我知道它们的宽度，这不会很复杂，但我不知道。

任何想法表示赞赏。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T21:35:22.797

您可以尝试这样做：

# [*更新的小提琴*](http://jsfiddle.net/thebabydino/Cg2SX/4/)

在 上使用固定（足够大）`width`，`span`设置`text-align: center`它并将文本放在您提供的伪元素中`display: inline-block`

**HTML**：

```
<div class="icons">
    <a href="#">t
        <span class="tooltip" data-text='Twitter'></span>
    </a>
    <a href="#">f
        <span class="tooltip" data-text="Facebook"></span>
    </a>
    <a href="#">g
        <span class="tooltip" data-text='Google+'></span>
    </a>
</div>​ 
```

相关**CSS**：

```
.icons a {
    display: inline-block;
    position: relative;
    margin-right: 70px;
    width: 16px;
    color: #000;
    font-size: 16px;
    text-align: center;
    text-decoration: none;
}
.tooltip {
    position: absolute;
    bottom: -20px; left: 8px; /* half the width of link */
    margin-left: -35px;
    width: 70px;
    color: #fff;
    font: 10px Arial, sans-serif;
}
.tooltip:after {
    display: inline-block;
    padding: 2px 8px;
    background-color: green;
    content: attr(data-text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:01:10.260

你总是可以做这样的演示：http: [//jsfiddle.net/Cg2SX/1/](http://jsfiddle.net/Cg2SX/1/)

`a`我在`.icons`div 中更新了标签。这是我**改变**的：

```
.icons a {
    display:block;
    margin-right:10px /* spacing between a tags - changed from your original code */
    float:left; 
    text-align:center; 
    width:100px; /* you can change this as needed, but it keeps them all uniform*/
    height: 50px; /* Change this to the height of your tallest icon image */
} 
```

然后我`span.tooltip`相应地更新，我将它**添加**到你所拥有的：

```
.tooltip { 
    width:100%;
    padding: 2px 0; /* changed the side padding to 0 since width is 100% & it takes the text-align center from the CSS above on the a tag */
    display:block; /* Made it a block so the width 100% & centered text would work */
}​ 
```

这与您的图标图像的确切大小无关 - 它们都可能不同或相同，但只要过度`a`标签比最高和最宽的图像更宽更高，您就不会有任何问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T21:07:22.450

你为什么不使用 => width:auto;

# scala - Scala中范围内的剪辑编号

> ID：13146511
> 
> 赞同：1
> 
> 时间：2012-10-30T19:42:59.210
> 
> 标签：scala

给一个整数，如果它在某个范围的边界内`x`，我想返回。`x`如果不是，则返回它违反的边界的值。

```
def keepWithinRange(x:Int, min:Int, max:Int) : Int = {
  if (x < min) return min;
  if (x > max) return max;
  return x;
} 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T19:53:24.617

我会这样写：

```
def keepWithinRange(x: Int, min: Int, max: Int) = math.max(min, math.min(max, x)) 
```

或这个：

```
def keepWithinRange(x: Int, min: Int, max: Int) =
  if (x < min) min else if (x > max) max else x 
```

两者都比`return`在 Scala 中用于控制流更惯用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T20:28:19.833

您可以使用 RichInt 中的 max 和 min 方法：

```
def keepWithinRange(x:Int, minVal:Int, maxVal:Int) = x max minVal min maxVal 
```

# wordpress - 在 WordPress 中制作单页博客

> ID：13146515
> 
> 赞同：3
> 
> 时间：2012-10-30T19:43:23.920
> 
> 标签：wordpress

在过去的几天里，我一直在抨击 wordpress 试图解决这个问题，我正在尝试创建一个单页网站/登陆页面，但使用 wordpress 来显示最新的新闻故事，但有指向前三个新闻的链接文章。

除了能够使用页面底部的上一个和下一个链接从前 3 个帖子移动之外，一切都在工作。当我单击以移至过去的新闻报道时，它会重新加载页面以正确更改查询字符串，但帖子未更新，并且我无法移过第二页。

我已使用此网页[http://weblogtoolscollection.com/archives/2008/04/19/paging-and-custom-wordpress-loops/](http://weblogtoolscollection.com/archives/2008/04/19/paging-and-custom-wordpress-loops/)作为我的页面的基础，但遵循指示并没有解决我的问题。

我在页面中使用的标记在这里[http://codepad.org/dliQIwJR](http://codepad.org/dliQIwJR)

我已经配置了wordpress内部的所有设置，我已经将阅读设置中的页面设置为静态页面下的首页。

非常感谢您提供的任何帮助。

干杯，斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:19:59.283

我认为问题在于“showposts”参数。尝试用“posts_per_page=3”代替。showposts 参数已被删除。

有关详细信息，请参阅[https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters](https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)，以及该页面的总体 WP_Query 参考。

```
posts_per_page (int) - number of post to show per page (available with Version 2.1, replaced showposts parameter). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:43:49.027

我不确定我是否 100% 正确理解了您的问题，但是，请在第 40 行尝试“page”而不是“paged”。我在网站上遇到了类似的问题，不知何故这为我解决了。具体来说，我使用了：

```
 if ( get_query_var('paged') ) {
        $paged = get_query_var('paged');
    } else if ( get_query_var('page') ) {
        $paged = get_query_var('page');
    } else {
        $paged = 1;
    } 
```

# javascript - MM_swapImage OnMouseOver 在 IE 中不起作用

> ID：13146517
> 
> 赞同：3
> 
> 时间：2012-10-30T19:43:28.520
> 
> 标签：javascript, wordpress, onmouseover

我有一个图像，客户希望使用区域图在鼠标悬停时进行图像交换。

将鼠标悬停在每个正方形上时，将替换一个图像，该图像似乎是一个弹出窗口，解释了有关该部分的更多信息。

他们的旧（当前）站点是用 .ASP 编写的，我正在通过 WordPress 将其转移到 .PHP。我正在使用 MM_swapImage，甚至还重用了他们使用的代码，这些代码在 IE 中有效。

目前，编码在 FF、Chrome、Safari 和 Opera 中工作......除了 IE 之外的一切。

任何人都可以帮忙吗？

这是编码：

HTML：

```
 <img src="<?php bloginfo('template_directory'); ?>/img/img_ac_clinical1.jpeg" alt="" width="487" height="365" usemap="#img_ac_clinical1Map" class="alignnone size-full wp-image-796" id="img_ac_clinical1" title="img_ac_clinical1" border="0" />
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/mmover.js"> </script>
<map name="img_ac_clinical1Map" id="img_ac_clinical1" >
<area shape="rect" coords="28,204,169,349" href="#" onMouseOver="MM_swapImage('img_ac_clinical1','','http://www.ntst.com.php53-12.dfw1-1.websitetestlink.com/wp-content/uploads/2012/10/img_ac_clinical2.jpg',1)" onMouseOut="MM_swapImgRestore()">
  <area shape="rect" coords="179,174,317,312" href="#" onMouseOver="MM_swapImage('img_ac_clinical1','','http://www.ntst.com.php53-12.dfw1-1.websitetestlink.com/wp-content/uploads/2012/10/img_ac_clinical3.jpg',1)" onMouseOut="MM_swapImgRestore()">
  <area shape="rect" coords="327,152,456,287" href="#" onMouseOver="MM_swapImage('img_ac_clinical1','','http://www.ntst.com.php53-12.dfw1-1.websitetestlink.com/wp-content/uploads/2012/10/img_ac_clinical4.jpg',1)" onMouseOut="MM_swapImgRestore()">
</map> 
```

JavaScript：

```
 function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function P7_Snap() { //v2.65 by PVII
 var x,y,ox,bx,oy,p,tx,a,b,k,d,da,e,el,tw,q0,xx,yy,w1,pa='px',args=P7_Snap.arguments;a=parseInt(a);
 if(document.layers||window.opera){pa='';}for(k=0;k<(args.length);k+=4){
 if((g=MM_findObj(args[k]))!=null){if((el=MM_findObj(args[k+1]))!=null){
 a=parseInt(args[k+2]);b=parseInt(args[k+3]);x=0;y=0;ox=0;oy=0;p="";tx=1;
 da="document.all['"+args[k]+"']";if(document.getElementById){
 d="document.getElementsByName('"+args[k]+"')[0]";if(!eval(d)){
 d="document.getElementById('"+args[k]+"')";if(!eval(d)){d=da;}}
 }else if(document.all){d=da;}if(document.all||document.getElementById){while(tx==1){
 p+=".offsetParent";if(eval(d+p)){x+=parseInt(eval(d+p+".offsetLeft"));y+=parseInt(eval(d+p+".offsetTop"));
 }else{tx=0;}}ox=parseInt(g.offsetLeft);oy=parseInt(g.offsetTop);tw=x+ox+y+oy;
 if(tw==0||(navigator.appVersion.indexOf("MSIE 4")>-1&&navigator.appVersion.indexOf("Mac")>-1)){
  ox=0;oy=0;if(g.style.left){x=parseInt(g.style.left);y=parseInt(g.style.top);}else{
  w1=parseInt(el.style.width);bx=(a<0)?-5-w1:-10;a=(Math.abs(a)<1000)?0:a;b=(Math.abs(b)<1000)?0:b;
  x=document.body.scrollLeft+event.clientX+bx;y=document.body.scrollTop+event.clientY;}}
 }else if(document.layers){x=g.x;y=g.y;q0=document.layers,dd="";for(var s=0;s<q0.length;s++){
  dd='document.'+q0[s].name;if(eval(dd+'.document.'+args[k])){x+=eval(dd+'.left');y+=eval(dd+'.top');
  break;}}}e=(document.layers)?el:el.style;xx=parseInt(x+ox+a),yy=parseInt(y+oy+b);
 if(navigator.appVersion.indexOf("MSIE 5")>-1 && navigator.appVersion.indexOf("Mac")>-1){
  xx+=parseInt(document.body.leftMargin);yy+=parseInt(document.body.topMargin);}
 e.left=xx+pa;e.top=yy+pa;}}}
}

function P7_hideDiv(evt) { //v1.3 by PVII
 var b,relT,mT=false; 
 if(document.layers){b=evt.target;if(b.p7aHide){
  b.visibility="hidden";}else{routeEvent(evt);}
 }else if(document.all&&!window.opera){b=event.srcElement;
  while(b!=null){if(b.tagName=="DIV" && b.p7ahD){mT=true;break;}b=b.parentElement;}
  if(!b.contains(event.toElement)){b.style.visibility="hidden";}
 }else if(document.getElementById){b=evt.currentTarget;relT=evt.relatedTarget;
  while(relT!=null){if(b==relT){mT=true;break;}
  relT=relT.parentNode;}if(!mT){b.style.visibility="hidden";}}
}

function P7_autoHide() { //v1.3 by PVII
 var i,g,args=P7_autoHide.arguments;
 for(i=0;i<args.length;i++){if((g=MM_findObj(args[i]))!=null){
  g.p7aHide=true;if(document.layers){
  g.captureEvents(Event.MOUSEOUT);}g.onmouseout=P7_hideDiv;g.p7ahD=true;}}
}

function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true); 
```

任何帮助将不胜感激，因为我几天来一直在尝试通过反复试验和研究来解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:14:46.307

*   在我看来，所有带有“P7”的功能都没有使用。尝试删除它们。
*   IE 对行尾的分号格外挑剔。这将是我第一次尝试。
*   正如其他用户所建议的那样，使用 jquery ...查看下面的演示：[jQuery .hover() function](http://api.jquery.com/hover/)

# drupal-7 - drupal 7验证码图像不会改变

> ID：13146524
> 
> 赞同：2
> 
> 时间：2012-10-30T19:43:55.823
> 
> 标签：drupal-7, captcha

我已将验证码模块安装到我的 drupal 7 网站中，并以两种形式显示。除了缓存验证码外，它工作正常，所以当我刷新时它是一样的。如果我进入管理员并关闭缓存，它们仍然是相同的，但是如果我点击清除所有缓存按钮，它会在我下次访问该页面时更改为新的。有人有想法么？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T09:44:53.843

简单的以下 3 个步骤，您就可以摆脱错误。

1.  卸载验证码模块。
2.  清除捕获历史
3.  转到模块页面并启用验证码模块。

它会为你工作。

# css - CSS Transitions vs Samsung Galaxy Tab 2

> ID：13146526
> 
> 赞同：0
> 
> 时间：2012-10-30T19:43:57.567
> 
> 标签：css, ipad, tablet

I'm working on a web app for tablets, and I've styled a set of of divs and a label for my checkbox so that it can look like a switch. ([JsFiddle here.](http://jsfiddle.net/ZWc2Q/1/))

It works fine on iPad 2 & 3, however when I'm viewing it on Samsung Galaxy Tab 2 **it only changes state when I turn the tablet from portrait to landscape or vice versa**

I've also tried it without the transition, and still the same problem.

Is there any way I can get the effect I want without Javascript?

**SO won't let me just link to jsfiddle so here is the code:**

HTML:

```
<label class="switch" for="test">
    <input type="checkbox" id="test">
    <div class="track">
        <div class="knob"></div>
    </div>
</label>​ 
```

CSS:

```
label.switch > .track {
    width: 80px;
    height: 52px;
    border-radius: 60px;
    box-shadow: 0 1px 3px black inset, 0 -1px 1px rgba(255,255,255,0.15);
    /*border: 5px solid #666;*/
    display:inline-block;
    cursor:pointer;
    background: #333;
    background: -moz-linear-gradient(top,  rgba(0,0,0,0.65) 0%, rgba(0,0,0,0) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,0,0.65)), color-stop(100%,rgba(0,0,0,0)));
    background: -webkit-linear-gradient(top,  rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
    background: -o-linear-gradient(top,  rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
    background: -ms-linear-gradient(top,  rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
    background: linear-gradient(to bottom,  rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
    transition: background .5s;
    -webkit-transition: background .5s;
    -moz-transition: background .5s;
    -o-transition: background .5s;
    -ms-transition: background .5s;
}

label.switch > .track > .knob {
    height: 54px;
    width: 54px;
    border-radius: 50px;
    margin-top:-1px;
    box-shadow: 0 2px 3px black, 0 1px 0 rgba(255, 255, 255, 0.5) inset, 0 0 0 5px rgba(237,237,237,1) inset;
    transition: margin-left .25s;
    -webkit-transition: margin-left .25s;
    -moz-transition: margin-left .25s;
    -o-transition: margin-left .25s;
    -ms-transition: margin-left .25s;
    background: rgb(191,191,191);
    background: -moz-linear-gradient(top,  rgba(191,191,191,1) 0%, rgba(246,246,246,1) 53%, rgba(255,255,255,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(191,191,191,1)), color-stop(53%,rgba(246,246,246,1)), color-stop(100%,rgba(255,255,255,1)));
    background: -webkit-linear-gradient(top,  rgba(191,191,191,1) 0%,rgba(246,246,246,1) 53%,rgba(255,255,255,1) 100%);
    background: -o-linear-gradient(top,  rgba(191,191,191,1) 0%,rgba(246,246,246,1) 53%,rgba(255,255,255,1) 100%);
    background: -ms-linear-gradient(top,  rgba(191,191,191,1) 0%,rgba(246,246,246,1) 53%,rgba(255,255,255,1) 100%);
    background: linear-gradient(to bottom,  rgba(191,191,191,1) 0%,rgba(246,246,246,1) 53%,rgba(255,255,255,1) 100%);
}

label.switch > input {
    display:none;
}

label.switch > input:checked ~ .track {
    background: #D96200

}

label.switch > input:checked ~ .track > .knob {
    margin-left:26px;
}
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:42:08.937

Android 平板电脑（至少是三星 Galaxy Tab 2）附带旧版 Chrome 作为默认浏览器。

此浏览器无法识别[通用同级选择器](https://developer.mozilla.org/en-US/docs/CSS/General_sibling_selectors)( `~`)。这就是动画不工作的原因。

解决方案是为[相邻兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors)( `+`) 更改所有出现的通用兄弟选择器。

# automake - AutoMake - Source file used in more than one binary

> ID：13146531
> 
> 赞同：0
> 
> 时间：2012-10-30T19:44:14.810
> 
> 标签：automake

Attention AutoMake experts... ;)
What is the "proper" way of using certain source files in multiple binaries?
I have a client and a server, and there are some "shared" source files (parse.c/parse.h and message.c/message.h). And of course I have to binaries listed (`bin_PROGRAMS = client server`). So where in the Makefile.am should parse.c/h and message.c/h be? Listed twice, once in the client's sources and once in the server's sources?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:59:33.877

我这样做的方式是将有问题的 .h 文件`EXTRA_DIST`和 .c 文件放入`server_SOURCES`和`client_SOURCES`. 不确定这是否是最好的方法，但它确实有效。

# android - Application works on emulator, but not on real device - float type

> ID：13146532
> 
> 赞同：1
> 
> 时间：2012-10-30T19:44:32.013
> 
> 标签：android

My application works great while using the emulator, but it crashes while working on real device. I code it for Android 2.2\. Real device is 2.3.6.

**Problem is here:**

When I use something like that:

```
tvPlayerOneScores.setText("-" + numberFormat.format(level)); 
```

it works great both on emulator and real device.

But when I try this:

```
tvPlayerOneScores.setText("-" + numberFormat.format(level * 0.5f)); 
```

it works on emulator, but crashes on real device.

Stack Trace:

```
java.lang.NumberFormatException
    at org.apache.harmony.luni.util.FloatingPointParser.parseFltImpl(Native Method)
    at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:321)
    at java.lang.Float.parseFloat(Float.java:323)
    at java.lang.Float.valueOf(Float.java:362)
    at com.amrotek.truthordare.GameActivity$4.onClick(GameActivity.java:287)
    at android.view.View.performClick(View.java:2552)
    at android.view.View$PerformClick.run(View.java:9229)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3701)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
    at dalvik.system.NativeStart.main(Native Method) 
```

EDIT: I multiplied all values by 10, so I only work with integer numbers when I do arithmetic operations. At the end I just divide end value by 10\. It works :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:23:21.790

您应该在问题中包含错误的行，而不是在评论中：

```
playerOnePoints = Float.valueOf(numberFormat.format(playerOnePoints - level * 0.5f)); 
```

因为仅仅做出结论是不够的，这里有一个简短的清单供您检查：

1.  为什么你需要格式化一个数字`numberFormat`只是为了将它转换回来`valueOf`？

2.  是什么`numberFormat`，它真的会产生*有效*的浮点字符串吗？

3.  是`playerOnePoints`浮动还是浮动？你不应该使用`parseFloat()`代替`valueOf()`吗？

最后，如果您仍然无法解决您的问题，我建议将上述行替换为简单的：

```
playerOnePoints = playerOnePoints - level * 0.5f; 
```

那应该可以解决问题=)

附言。`Math.floor()/ceil()`如果我正确理解您的意图，您也可能想熟悉`parseFloat()/numberFormat()`。

# xcode - vmware + xcode + phonegap + make arhive = buffer overflow

> ID：13146533
> 
> 赞同：4
> 
> 时间：2012-10-30T19:44:35.070
> 
> 标签：xcode, cordova

I used xcode+phonegap on virtual machine. When i try make arhive of any project i get an error like this:

> error: '/Users/administrator/Library/Developer/Xcode/DerivedData/**TESTING**-avvoxtuipponnbeqgsiwblbbidxq/Build/Intermediates/ArchiveIntermediates/**TESTING**/IntermediateBuildFilesPath/UninstalledProducts/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app/**TESTING**.app' is longer than filepath buffer size (1025)

Help me! What could be the problem and how to increase the buffer? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T07:54:10.027

我刚才也有同样的问题。

原来我不小心把项目的产品本身拖到了“复制捆绑资源”部分。

所以 xcode 正在尝试递归地构建产品，因此它可以递归地添加产品本身作为自己的资源。

从“复制捆绑资源”部分中删除产品本身为我解决了它。

# jquery - jQuery not expanding both classes

> ID：13146536
> 
> 赞同：0
> 
> 时间：2012-10-30T19:44:53.213
> 
> 标签：jquery, class, html, expand

I've got some jQuery that expands a div header when clicked to reveal a subheader. Another click on this subheader then reveals content. However there are two subheaders and I can only get the first to reveal.

I tried changing the selectors to the format recommended on [stackoverflow.com/questions/1041344](https://stackoverflow.com/questions/1041344/jquery-multiple-class-selector) but this only resulted in the subheaders not even being hidden when the page loads. This is what I've got so far:

jQuery:

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery(".subheadingFrame, .subheadingEngine").hide();
    jQuery(".heading").click(function()
    {
        jQuery(this).next(".subheadingFrame, .subheadingEngine").slideToggle(500);
    });
    jQuery(".content").hide();
    jQuery(".subheadingFrame, .subheadingEngine").click(function()
    {
        jQuery(this).next(".content").slideToggle(500);
    });
});
</script> 
```

HTML:

```
<div id="divSparesSubHeader" class="heading">Benelli1</div>
<div id="divSparesLastHeader" class="subheadingFrame">Frame/Subheader1</div>
<div id="divSparesItem" class="content">Content 1</div>
<div id="divSparesLastHeader" class="subheadingEngine">Engine/Subheader2</div>
<div id="divSparesItem" class="content">Content 2</div> 
```

I've got the page up [here](http://www.synte.co.za/Puzey/Spares.html) if anyone could assist?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:46:56.007

尝试这个

```
jQuery(".heading").click(function(){
        jQuery(this).nextAll(".subheadingFrame").first().slideToggle(500);
        jQuery(this).nextAll(".subheadingEngine").first().slideToggle(500);
}); 
```

`.next()`仅针对 .heading .. 的直接兄弟。因此，如果找不到，它将返回一个空列表..

因此，在这种情况下，最好使用`.nextAll()` 和定位元素`.first()`

**[检查小提琴](http://jsfiddle.net/sushanth009/2Mjme/)**

# c++ - Boost.Proto and Complex Transform

> ID：13146537
> 
> 赞同：2
> 
> 时间：2012-10-30T19:44:53.870
> 
> 标签：c++, boost-proto

I'm experimenting with *Proto* to build a *DSEL* that operates on geometric vectors. I'm trying to write a transform that would take an assign expression and unroll it component wise. For instance, I want to replace

```
p = q + r; 
```

by

```
p[0] = q[0] + r[0],
p[1] = q[1] + r[1],
...,
p[N] = q[N] + r[N],
p; 
```

So far I have been able to *mostly* make it work by making a transform template `unroll_vector_expr` that recursively unrolls the expression for each vector component, in conjunction with a `distribute_subscript` transform.

I don't seem to understand whats the rationale for the 'parameters' used with `boost::result_of` and `result_of::make_expr`. The documentation, examples and internal code seem to mix `Expr`, `impl::expr` and `impl::expr_param`. I'm not sure what should I be using and when so that the `result_type` matches the actual result type. Currently I made it work by trial an error, by examining the error messages and fixing the `const` and `&` discrepancies. However, as soon as I deep copy the expression the terminals are no longer hold by reference and my code fails.

```
struct distribute_subscript
  : or_<
        scalar_grammar
      , when<
            vector_literal
          , _make_subscript( _, _state )
        >
      , plus< distribute_subscript, distribute_subscript >
      , minus< distribute_subscript, distribute_subscript >
      , multiplies< distribute_subscript, distribute_subscript >
      , divides< distribute_subscript, distribute_subscript >
      , assign< distribute_subscript, distribute_subscript >
    >
{};

template< std::size_t I, std::size_t N >
struct unroll_vector_expr_c;

template< std::size_t I, std::size_t N >
struct unroll_vector_expr_c
  : transform< unroll_vector_expr_c< I, N > >
{
    template< typename Expr, typename State, typename Data >
    struct impl
      : transform_impl< Expr, State, Data >
    {
        typedef
            typename result_of::make_expr<
                tag::comma
              , typename boost::result_of<
                    distribute_subscript(
                        Expr
                      , typename result_of::make_expr<
                            tag::terminal
                          , boost::mpl::size_t< I - 1 >
                        >::type
                    )
                >::type
              , typename boost::result_of<
                    unroll_vector_expr_c< I + 1, N >(
                        Expr
                    )
                >::type
            >::type
            result_type;

        result_type operator ()(
            typename impl::expr_param expr
          , typename impl::state_param state
          , typename impl::data_param data
        ) const
        {
            return
                make_expr< tag::comma >(
                    distribute_subscript()(
                        expr
                      , make_expr< tag::terminal >( 
                            boost::mpl::size_t< I - 1 >()
                        )
                    )
                  , unroll_vector_expr_c< I + 1, N >() (
                        expr
                    )
                );
        }
    };
};

template< std::size_t N >
struct unroll_vector_expr_c< N, N >
  : transform< unroll_vector_expr_c< N, N > >
{
    template< typename Expr, typename State, typename Data >
    struct impl
      : transform_impl< Expr, State, Data >
    {
        typedef
            typename boost::result_of<
                distribute_subscript(
                    Expr
                  , typename result_of::make_expr<
                        tag::terminal
                      , boost::mpl::size_t< N - 1 >
                    >::type
                )
            >::type
            result_type;

        result_type operator ()(
            typename impl::expr_param expr
          , typename impl::state_param state
          , typename impl::data_param data
        ) const
        {
            return
                distribute_subscript()(
                    expr
                  , make_expr< tag::terminal >( 
                        boost::mpl::size_t< N - 1 >()
                    )
                );
        }
    };
};

struct unroll_vector_expr
  : transform< unroll_vector_expr >
{
    template< typename Expr, typename State, typename Data >
    struct impl
      : transform_impl< Expr, State, Data >
    {
        typedef
            typename dimension<
                typename boost::remove_reference<
                    typename boost::result_of<
                        _value( State )
                    >::type
                >::type
            >::type
            dimension;

        typedef
            typename result_of::make_expr<
                tag::comma
              , typename boost::result_of<
                    unroll_vector_expr_c< 1, dimension::value >(
                        Expr
                    )
                >::type
              , State
            >::type
            result_type;

        result_type operator ()(
            typename impl::expr_param expr
          , typename impl::state_param state
          , typename impl::data_param data
        ) const
        {
            return
                make_expr< tag::comma >(
                    unroll_vector_expr_c< 1, dimension::value >()(
                        expr
                    )
                  , boost::ref( state )
                );
        }
    };
}; 
```

How should I write my transform so that the `result_type` matches the result from `operator ()`, and works for `terminal`s both hold by value and by reference?

**Update**: Code updated after *Eric*'s answer. The only remaining mismatch between `result_type` and `make_expr` is for the *first* instantiation of `unroll_vector_expr_c`, where the `terminal< mpl::size_t< 0 > >::type` is held by *const reference* instead of by *value*. Curiously enough, subsequent instantiations of the same template with higher indices do not result in this issue.

**Update**: I managed to get the code to fully work, after modifying the `distribue_subscript` transform to force to take the subscript index by value:

```
struct distribute_subscript
  : or_<
        scalar_grammar
      , when<
            vector_literal
          , _make_subscript( _, _byval( _state ) ) // <-- HERE
        >
      , plus< distribute_subscript, distribute_subscript >
      , minus< distribute_subscript, distribute_subscript >
      , multiplies< distribute_subscript, distribute_subscript >
      , divides< distribute_subscript, distribute_subscript >
      , assign< distribute_subscript, distribute_subscript >
    >
{}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:27:17.963

现在快速回答。明天我会试着更仔细地看看你的变换。

`impl::expr`和的含义`impl::expr_param`可以通过查看文档来理解[`transform_impl`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/proto/transform_impl.html)。简而言之，`impl::expr_param`在你的 transform 的签名中使用`operator()`，因为它添加了 a`const &`以确保表达式在传递给你的函数时不会被复制。`Expr`在您的类型计算中使用，例如在`boost::result_of`. `impl::expr`用处不大，可以忽略。

至于`deep_copy`总是强迫您的终端按价值持有，这几乎就是`deep_copy`目的。但也许你的意思是别的，因为我`deep_copy`在你的代码中没有看到任何地方。

一句话`make_expr`：它迫使您*非常仔细地*考虑哪些节点应该通过引用存储，哪些节点应该通过值存储。在类型计算 ( `result_of::make_expr`) 中，引用类型是应该通过引用保持的东西，但在实际的函数调用 ( ) 中，如果你想通过引用保持`proto::make_expr`，你必须用包装。`boost::ref`这很奇怪。检查用户文档以获取[`make_expr`](http://www.boost.org/doc/libs/1_51_0/doc/html/proto/users_guide.html#boost_proto.users_guide.front_end.making_lazy_functions.lazy_functions_made_simple_with__literal_make_expr____literal_).

# c# - NullReferenceException at RegistryKey

> ID：13146539
> 
> 赞同：2
> 
> 时间：2012-10-30T19:44:54.867
> 
> 标签：c#

I want to read from Registry and set some Values, but i keep getting NullReferenceExceptions.

```
public partial class Form1 : Form
{

    RegistryKey rkApp = null;
    RegistryKey settings = null;

    public Form1()
    {
        InitializeComponent();

        rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
        settings = Registry.CurrentUser.OpenSubKey("HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Shit", true);

        if (settings.GetValue("automove") != null)
        {
            automove = true;
            autostartToolStripMenuItem.Checked = true;
        }
    }
} 
```

i deleted some unrelevant code in this example but this is my code... Any Ideas?

The error appears in line if `(settings.GetValue("automove") != null)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:53:55.497

```
Registry.CurrentUser.OpenSubKey("HKEY_LOCAL_MACHINE\\... 
```

配置`HKEY_CURRENT_USER`单元不包含名称以 . 开头的键`HKEY_LOCAL_MACHINE`。如果您尝试从本地计算机配置单元读取，则需要更新您的代码：

```
Registry.LocalMachine.OpenSubKey("SOFTWARE\\Wow6432Node\\Shit", true) 
```

此外，如果`Wow6432Node`密钥不存在（也许您在 32 位操作系统上运行？），或者不包含名为 的密钥`Shit`，则该`OpenSubKey`方法将返回`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:03:27.053

我这样修复它：

首先，我检查了设置是否为空。如果设置为空，那么我首先创建子键。在此之后，我重新设置了设置变量，一切都很好。

```
settings = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Shit", true);
if (settings == null)
{
    Registry.CurrentUser.CreateSubKey("SOFTWARE\\Shit").Flush();
    settings = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Shit", true);
} 
```

# python - Broadcasting columns from a 2D numpy array to a larger 2D array based on an array of floats

> ID：13146542
> 
> 赞同：1
> 
> 时间：2012-10-30T19:45:04.960
> 
> 标签：python, numpy, matplotlib, scipy

I'm not quite sure how to say this so I'll try to be clear in my description. Right now I have a 3D numpy array where the 1st column represents a depth and the 2nd a position on the x-axis. My goal is to make a pcolor where the columns are spread out along the x-axis based on the values in a 1D float array.

Here's where it gets tricky, I only have the relative distances between points. That is, the distance between column 1 and column 2 and so on.

Here's an example of what I have and what I'd like:

```
darray = [[2  3  7  7]
          [4  8  2  3]
          [6  1  9  5]
          [3  4  8  4]]

posarray = [ 3.767, 1.85, 0.762]

DesiredArray = [[2  0  0  0  3  0  7  7]
                [4  0  0  0  8  0  2  3]
                [6  0  0  0  1  0  9  5]
                [3  0  0  0  4  0  8  4]] 
```

How I tried implementing it:

```
def space_set(darr, sarr):
    spaced = np.zeros((260,1+int(sum(sarr))), dtype = float)
    x = 0
    for point in range(len(sarr)):
            spaced[:, x] = darr[:,point]
            x = int(sum(sarr[0:point]))
    spaced[:,-1] = darr[:,-1] 
```

Then I was planning on using matplotlibs pcolor to plot it. This method seems to lose columns though. Any ideas for either directly plotting or making a numpy array to plot? Thanks in advance.

Here's an example of what I'm looking for.![example image](../Images/611dfd50839791afd98e10cac4306da2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T20:15:40.463

[由于有这么多的空白，也许绘制Rectangles](http://matplotlib.org/api/artist_api.html#matplotlib.patches.Rectangle)比使用[pcolor](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.pcolor)更容易。作为奖励，您可以将矩形准确地放置在您想要的位置，而不必将它们“捕捉”到整数值网格。而且，您不必为主要用零填充的较大二维数组分配空间。（在您的情况下，所需的内存可能很少，但这个想法不能很好地扩展，所以如果我们能避免这样做就好了。）

```
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.patches as patches
import matplotlib.cm as cm

def draw_rect(x, y, z):
    rect = patches.Rectangle((x,y), 1, 1, color = jet(z))
    ax.add_patch(rect)

jet = plt.get_cmap('jet')
fig = plt.figure()
ax = fig.add_subplot(111)

darray = np.array([[2, 3, 7, 7],
                   [4, 8, 2, 3],
                   [6, 1, 9, 5],
                   [3, 4, 8, 4]], dtype = 'float')
darray_norm = darray/darray.max()

posarray = [3.767, 1.85, 0.762]
x = np.cumsum(np.hstack((0, np.array(posarray)+1)))

for j, i in np.ndindex(darray.shape):
    draw_rect(x[j], i, darray_norm[i, j])
ax.set_xlim(x.min(),x.max()+1)
ax.set_ylim(0,len(darray))
ax.invert_yaxis()    
m = cm.ScalarMappable(cmap = jet)
m.set_array(darray)
plt.colorbar(m)
plt.show() 
```

产量

![在此处输入图像描述](../Images/4f0847f9160bddd3b0468baa75b903ed.png)

# hibernate - Hibernate equivalent for TIMESTAMP query

> ID：13146544
> 
> 赞同：1
> 
> 时间：2012-10-30T19:45:13.530
> 
> 标签：hibernate

Just out of curiosity, what is the best way to accomplish this using hibernate

```
 select * 
   from USERS 
   where TO_CHAR(CREATE_TIMESTAMP, 'YYYY-MM-DD HH24:MI:SS.FF') = '1972-   07-31 13:52:50.381000' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:50:18.397

```
Date date = dateFormat.parse("1972-07-31 13:52:50.381");
String hql = "select u from User u where u.createTimestamp = :timestamp";
return session.createQuery(hql).setTimestamp("timestamp", date).list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:07:09.303

我正在使用标准 api：发布后，我让它按如下方式工作：

```
Criteria criteria = getHibernateTemplate().getSessionFactory().getCurrentSession().createCriteria(User.class);
criteria.add(Restrictions.sqlRestriction("TO_CHAR(CREATE_TIMESTAMP, 'YYYY-MM-DD HH24:MI:SS.FF')='1972-07-31 13:52:50.381000'")); 
```

# powershell-remoting - Remote Tab in ISE Connects to a powershell 1.0 session

> ID：13146545
> 
> 赞同：0
> 
> 时间：2012-10-30T19:45:13.727
> 
> 标签：powershell-remoting, powershell-3.0, powershell-ise

I have PowerShell v3 installed and launch the ISE from my local workstation. When I open a remote tab to a server(win2K8R2 WMF 3 installed) I seem to get a powerShell V1 session. I checked this by inspecting the $host variable.

```
> Name             : ServerRemoteHost Version          : 1.0.0.0
> InstanceId       : f0b4913e-95a8-4d6b-9aaa-f869a5b2a8fd UI            
> : System.Management.Automation.Internal.Host.InternalHostUserInterface
> CurrentCulture   : en-US CurrentUICulture : en-US PrivateData      : 
> IsRunspacePushed :  Runspace         : 
```

This server has WMF 3.0 installed and when I open either the ISE or a PowerShell prompt locally from the server, I get a v3 session.

Other machines do not display this behavior and do run powershell v3 when opened locally or via a remote tab

I'm at a loss to troubleshoot this behavior. I want the remote tab to open a v3 Session.

Any Thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:19:54.263

要检查正在运行的 PowerShell 版本，请使用变量`$PSVersionTable`.

中的值`$PSVersionTable.PSVersion`告诉 PowerShell 版本。

这是 $PSVersionTable 变量内容的示例。

```
Name                           Value
----                           -----
PSVersion                      3.0
WSManStackVersion              3.0
SerializationVersion           1.1.0.1
CLRVersion                     4.0.30319.17929
BuildVersion                   6.2.9200.16384
PSCompatibleVersions           {1.0, 2.0, 3.0}
PSRemotingProtocolVersion      2.2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T17:43:32.140

我确定原始海报已经继续前进，但如果其他人正在寻找答案，那就是。似乎某些模块会检查 powershell 版本的合规性，并查看 ServerRemoteHost 版本而不是 Powershell 本身。这只是模块定义中的错误形式。PSRemoteRegistry 就是这样一个例子。

要解决问题（或者更确切地说，解决问题），只需编辑相关模块的 .psd1 文件并将版本要求更改回 1.0。

# 此模块所需的 Windows PowerShell 引擎的最低版本

PowerShellVersion = '1.0'

# 此模块所需的 Windows PowerShell 主机的名称

PowerShellHostName = ''

# 此模块所需的 Windows PowerShell 主机的最低版本

PowerShellHostVersion = '1.0'

问题解决了。

# ipc - XPC 没有为 XPC 服务创建任何进程

> ID：13146546
> 
> 赞同：5
> 
> 时间：2012-10-30T19:45:19.933
> 
> 标签：ipc, xpc

我正在尝试创建 XPC 服务，但似乎没有创建该服务。在我的服务的主要方法中，我做的第一件事是调用 syslog，以便我可以查看服务是否开始运行。这些日志消息永远不会出现在日志中。

我检查了所有包标识符、可执行文件名称和包层次结构，但似乎仍然没有创建服务。在应用程序中，当我通过 XPC 服务连接创建并发送消息后，立即调用我的事件处理程序并出现 XPC_ERROR_CONNECTION_INVALID 错误。我正在使用基于 C 的 XPC API。

还有什么我可以尝试做的以确保至少创建 XPC 服务吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:45:19.933

事实证明，我需要对应用程序目标和 XPC 服务目标进行代码签名。这可以在 Xcode 项目构建设置中完成，并且可以设置为“Ad-hoc Code Sign”，而无需 Mac 开发者证书。

![在此处输入图像描述](../Images/e204d0fa47a8bd9ebe131bbbd3694164.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-15T14:24:54.827

还要检查您的服务名称。我发现项目模板中的默认示例不包含完全限定名称。在客户端代码中，我不得不改变这个：

```
NSXPCConnection *connection = [[NSXPCConnection alloc] initWithServiceName:@"MyNetworkClient"]; 
```

对此：

```
NSXPCConnection *connection = [[NSXPCConnection alloc] initWithServiceName:@"com.example.MyNetworkClient"]; 
```

仔细检查 XPC 目标的 Bundle ID 是否是您用于服务名称的。就我而言，它没有启动 XPC，也没有显示任何错误或控制台日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:05:28.930

我有一个类似的错误，但解决方案是：干净，干净的构建文件夹，构建。

然后，通过魔术，它按预期工作。

# c# - Console.writeline() 多线程问题

> ID：13146551
> 
> 赞同：0
> 
> 时间：2012-10-30T19:45:44.453
> 
> 标签：c#, .net, multithreading, thread-safety, thread-synchronization

我正在尝试模拟聊天客户端。首先是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace thread
{
    class Program
    {

    public static Thread t1;
    public static Thread t2;
    public static bool flag;
    public static Random rand = new Random();

    static void Main(string[] args)
    {
        t1 = new Thread(first);
        t2 = new Thread(second);
        t1.Start();
        t2.Start();

        Console.Read();
    }

    public static void first()
    {

        string[] phrase = { "Hello", "random", "blah,blah", "computer", "Welcome", "This is chat bot" };
        while (!flag)
        {
            Thread.Sleep(4000);
            Console.WriteLine("{0}", phrase[rand.Next(6)]);
        }
    }

    public static void second()
    {
        string input = "";
        while (input!="x")
        {

            input=Console.ReadLine();
            if (input=="x")
            {
                break;
            }

        }
        flag = true;
    }

   }
} 
```

好的，所以这个程序会自动在控制台上打印一些文本，我也可以在屏幕上写我的信息。现在的问题是，每当我输入一个长句子时，任何需要超过 4 秒才能输入的内容。然后，它不会在下一行打印自动消息，而是附加到我正在输入的任何内容。我对多线程真的很陌生，所以我不确定是什么问题。我认为两个线程都使用相同的控制台类。

在这方面的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:06:21.383

在控制台中实现聊天客户端非常困难。这是*可能*的，但这一点也不简单。

在基于 GUI 的环境中实现它要容易得多，例如 winforms，您可以在其中拥有两个完全独立的文本区域，一个用于输入，一个用于输出。

为了在控制台中执行此操作，您需要在需要显示测试时将光标向上移动到上一行，写出该文本，然后将光标移回用户输入的位置。但是这样做会覆盖上一行文本，因此需要将上一行文本写在之前的行上，依此类推，直到到达缓冲区的顶部，该行可以被完全删除。最重要的是，您无法从控制台读取信息，因此您需要跟踪内存中的所有内容，以便您可以完成整个写入操作。

在 winform 中做所有事情要容易得多。要写出信息，只需将其添加到输出文本框中的文本中，要读取信息，当按下“发送”按钮或回车时，只需清除输入文本框并处理其内容。您无需担心这两者之间的交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:02:20.147

使用`Console`. 如果您真的想看到它在尝试使用`WinForm`或`WPF`应用程序时工作，那么您有很多选项`Controls`可以显示，例如使用控件等`facebook`进行聊天。`ListBox`

显然这是一种方法，但在`Console`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T09:03:15.503

大声笑2ez

```
 public static void WriteLineMultithread(string strt) {
        int lastx=Console.CursorLeft,lasty=Console.CursorTop;

        Console.MoveBufferArea(0,lasty,lastx,1,0,lasty+1,' ',Console.ForegroundColor,Console.BackgroundColor);
        Console.SetCursorPosition(0,lasty);
        Console.WriteLine(strt);
        Console.SetCursorPosition(lastx,lasty+1);
    } 
```

此方法允许您在用户在另一个线程上使用“Console.ReadLine()”时编写消息。我假设您的聊天消息的接收是异步的，或者发生在另一个线程上。

您可以添加一些 lock(){}，这将是完美的。

# gps - 模拟低和高 Gps 精度

> ID：13146553
> 
> 赞同：4
> 
> 时间：2012-10-30T19:45:49.063
> 
> 标签：gps, ios-simulator, emulation, gpx

我做了一个 .gpx 文件来模拟 IOS 模拟器上的路线，现在我想模拟水平精度我该怎么做？

以下是我的 .gpx 文件的摘录：

```
<?xml version="1.0"?>
<gpx>
    <wpt lat="-23.772830" lon="-46.689820"/> //how add horizontal accuracy 7 meters for example
    <wpt lat="-23.774450" lon="-46.692570"/> //and here horizontal accuracy of 2 metters for example
    <wpt lat="-23.773450" lon="-46.693530"/> //and here 19 meters
</gpx> 
```

如果我运行所有 gps 点返回 5 米的水平精度，否则我可以更改它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:43:16.810

我通过来自 viewController 的方法调用来做到这一点（我的是一个按钮，但显然你可以使用一个gestureRecognizer 或其他）。

我将我的 viewController 设置为 LocationManagerDelegate，但您可以放入您正在使用的委托而不是“self”

```
- (IBAction)simulateAccuracy:(id)sender {
    CLLocationCoordinate2D newCoor = CLLocationCoordinate2DMake(someLat, someLng);
    CLLocation *newLoc = [[CLLocation alloc]    initWithCoordinate:newCoor altitude:someAlt
    horizontalAccuracy:TheAccuracyYouWantToTest verticalAccuracy:ditto timestamp:nil];
    NSArray *newLocation = [[NSArray alloc] initWithObjects:newLoc,nil];
    [self locationManager:myLocationManager didUpdateLocations:newLocation];
} 
```

# java - JUnit run tests command line

> ID：13146557
> 
> 赞同：5
> 
> 时间：2012-10-30T19:45:52.937
> 
> 标签：java, junit

I've got the following structure

```
lib/junit-4.10.jar
tests/Tester.java
tests/Tester.class
build/jar/jar_file.jar 
```

(Tester belongs to package tests)

I can compile tests using

```
javac -cp build/jar/jar_file.jar:lib/junit-4.10.jar tests/*.java 
```

However I can't seem to run tests:

```
java -cp build/jar/jar_file.jar:lib/junit-4.10.jar org.junit.runner.JUnitCore tests.Tester 
```

or

```
java -cp build/jar/jar_file.jar:lib/junit-4.10.jar org.junit.runner.JUnitCore Tester 
```

And I get the following output:

```
JUnit version 4.10
Could not find class: tests.Tester

Time: 0.001

OK (0 tests) 
```

How do I resolve this `Could not find class` problem? I think it may be classpath related.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T19:53:06.013

假设这是 Linux/Mac（不是 Windows）并且您的路径分隔符是正确的 (:)，因为您的测试类文件存在于当前工作目录下的包子目录中 (.) 您需要添加“。” 到你的类路径，例如：

```
java -cp .:build/jar/jar_file.jar:lib/junit-4.10.jar org.junit.runner.JUnitCore tests.Tester 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:51:40.927

类路径应该用分号分隔（在 Windows 上 - 不确定您使用的是什么。）

```
java -cp build/jar/jar_file.jar;lib/junit-4.10.jar org.junit.runner.JUnitCore tests.Tester 
```

同样使用此命令行，您需要在项目根目录中运行它

# variables - Referencing Workbook and Worksheet by Variables

> ID：13146558
> 
> 赞同：3
> 
> 时间：2012-10-30T19:45:55.680
> 
> 标签：variables, excel, vba

What is the proper syntax for referencing a different workbook's worksheet? The following code is throwing an error on the last line. Thanks!

```
'Instantiate Workbook variables
 Dim mWB As Workbook 'master workbook

'Instantiate Worksheet variables
 Dim mWS As Worksheet 'master worksheet

'Open Workbook, set variables and reference range
 Workbooks.Open ("Local 500GB HD:Users:user:Public:file.xlsx")
 Set mWB = ActiveWorkbook
 Set mWS = Sheets("Invoices")
 mWB.mWS.Range("A1").FormulaR1C1 = "Import Date" ' <---- This is the where the error is 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T19:47:25.500

改变

```
Set mWS = Sheets("Invoices") 
```

至

```
Set mWS = mWb.Sheets("Invoices") 
```

然后写`mWS.Range("A1").FormulaR1C1 = "Import Date"`在最后一行。

实际上，您可以像我上面放置的那样将最后一行更改为读取，因为您`ActiveWorkbook`没有更改，但是，最好的做法是准确限定所有变量，因此不会发生意外行为。

# r - 变换和重新排序

> ID：13146567
> 
> 赞同：2
> 
> 时间：2012-10-30T19:46:49.423
> 
> 标签：r

> **可能重复：**
> [当在附加（显然）不相关的包之前和之后运行相同的代码时，数据框转换会产生不同的结果](https://stackoverflow.com/questions/10939516/data-frame-transformation-gives-different-results-when-same-code-is-run-before-a)

我有点问题。我曾经使用这种方法快速重新排序因子以使用 ggplot2 进行绘图。但它似乎不起作用：

```
tmp <- data.frame(Letters=letters[1:26],values=rnorm(26))
tmp <- transform(tmp, Letters = reorder(Letters,values))

identical(levels(tmp$Letters),letters[1:26]) # True! but shouldn't it be reorderd? 
```

这里发生了什么？

会话信息（）

```
R version 2.15.2 (2012-10-26)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C               LC_TIME=en_CA.UTF-8       
 [4] LC_COLLATE=en_CA.UTF-8     LC_MONETARY=en_CA.UTF-8    LC_MESSAGES=en_CA.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_CA.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] tools     stats     graphics  grDevices utils     methods   base     

other attached packages:
[1] reshape_0.8.4   digest_0.5.2    plyr_1.7.1      ggplot2_0.9.2.1

loaded via a namespace (and not attached):
 [1] brew_1.0-6         colorspace_1.2-0   dichromat_1.2-4    evaluate_0.4.2     grid_2.15.2       
 [6] gtable_0.1.1       gtools_2.7.0       httr_0.2           labeling_0.1       MASS_7.3-22       
[11] memoise_0.1        munsell_0.4        parallel_2.15.2    proto_0.3-9.2      RColorBrewer_1.0-5
[16] RCurl_1.95-1.1     reshape2_1.2.1     scales_0.2.2       stringr_0.6.1      whisker_0.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:05:16.597

`gdata`定义了一种方法，该方法`reorder.factor`具有`reorder.default`应用于因子的不同行为。[请参阅this other question](https://stackoverflow.com/q/10939516/892313)中的更详细讨论。

`gdata`在下面的新会话中，我已经包含了这种行为的记录，有和没有；请注意，一旦加载`gdata`，就很难摆脱该方法（[出于此处探讨的原因](https://stackoverflow.com/questions/11004018/how-can-a-non-imported-method-in-a-not-attached-package-be-found-by-calls-to-fun)）。

```
> tmp <- data.frame(Letters=letters[1:26],values=rnorm(26))
> tmp <- transform(tmp, Letters = reorder(Letters,values))
> 
> identical(levels(tmp$Letters),letters[1:26])
[1] FALSE
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> library("gdata")
gdata: read.xls support for 'XLS' (Excel 97-2004) files ENABLED.

gdata: read.xls support for 'XLSX' (Excel 2007+) files ENABLED.

Attaching package: ‘gdata’

The following object(s) are masked from ‘package:stats’:

    nobs

The following object(s) are masked from ‘package:utils’:

    object.size

> 
> tmp <- data.frame(Letters=letters[1:26],values=rnorm(26))
> tmp <- transform(tmp, Letters = reorder(Letters,values))
> 
> identical(levels(tmp$Letters),letters[1:26])
[1] TRUE
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] gdata_2.12.0

loaded via a namespace (and not attached):
[1] gtools_2.7.0 
```

# c# - XNA 2D Gamestate，重新开始游戏

> ID：13146571
> 
> 赞同：2
> 
> 时间：2012-10-30T19:47:21.610
> 
> 标签：c#, xna, switch-statement

我正在 XNA 中开发游戏，当我开始游戏时会弹出一个菜单。如果你按“空格”，游戏本身就会开始。我正在使用具有三种不同情况的游戏状态开关来执行此操作。虽然当我到达最后一个状态（游戏结束屏幕）并想通过按“空格”重新开始游戏时，除非你按住“空格”，否则它不起作用。

所以基本上。游戏从菜单屏幕开始。如果你按空格，游戏本身就会开始。如果你与任何东西相撞并死亡，你就会进入游戏结束屏幕。我想要它，以便您可以在按空格键时返回游戏运行，这是行不通的（除非您按住空格键并保持这种状态）

PS：如果需要，我愿意添加更多代码，请索取。提前致谢！

这是我的更新代码：

```
const int introMenu = 0, gameRunning = 1, gameOver = 2;
switch (gameState)
         {
          case introMenu:
          if (ks.IsKeyDown(Keys.Space))
           {
             gameState = gameRunning;
           }
                break;
            case gameRunning:
                if(colliding)
                {
                        gameState = gameOver;
                }
                break;
            case gameOver:
                if (ks.IsKeyDown(Keys.Space))
                {
                    gameState = gameRunning;     //NOT WORKING!
                }
                break;
        } 
```

这是我的绘图代码：

```
 GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();
            switch (gameState) 
       {
        case introMenu:
        background.Draw(spriteBatch);  
        break;
            case gameRunning:
                //draw the player, new background and everything nessecary
                break;
            case gameOver:
                //draw new gameover background
                break;
        }
        spriteBatch.End();

        base.Draw(gameTime); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:58:34.760

现在我没有足够的数据来给出一个确切的答案，但如果我猜的话，你的`colliding`条件仍然是正确的，并且游戏状态只是回到了原点。

正如我在评论中所说，您可以使用调试器来检查是否确实如此。

我还希望您将游戏变量重新初始化为其原始状态，因此当您重新开始游戏时，就好像您是第一次开始游戏一样（并确保碰撞不是真的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T20:07:12.547

上面的答案和评论是完全正确的。要解决这个单独的问题，只需按如下方式更改您的代码：

```
if(colliding)
{
     colliding = false;  
     gameState = gameOver;
} 
```

问题正在发生，因为当您在游戏结束后按下空格键时，游戏状态切换到正在运行，然后立即回到游戏结束屏幕，因为碰撞仍然是真实的

# iphone - iOS 应用程序的最有效结构

> ID：13146575
> 
> 赞同：0
> 
> 时间：2012-10-30T19:47:52.667
> 
> 标签：iphone, ios, xcode

我正在开发一个 iOS 应用程序，但我一直在思考如何设计它的结构。到目前为止，这是我所拥有的：该应用程序称为“时钟”，它允许用户打卡和打卡。该应用程序将分别在用户打卡或打卡时生成时间戳。就数据而言，我已经有一个大型 MySQL 数据库，它已经被用于类似的 Windows 桌面应用程序。（我正在努力迎合我公司的 iPhone 用户）

我的问题是，我应该如何处理这个应用程序中的数据结构？Core Data 可以检索 MySQL 数据（通过 Web 服务）并进行管理吗？我应该使用数据控制器类来管理数据吗？我不知道处理数据的最佳方式。

以下是需要管理的数据字段：

*   店铺
*   姓名
*   别针
*   时间戳输入
*   时间戳输出

总而言之，在这样的应用程序中管理数据的最有效方法是什么？如果你能指出我正确的方向，我将非常感激！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:55:15.640

核心数据将无法从 web 服务中检索任何内容，您需要创建一个数据访问层，该层将通过[NSURLConnection](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)等将该数据返回给您，那里有很多关于如何做到这一点的信息......我建议对一些类进行建模，基本上您的数据层将填充您的应用程序的其余部分以使用它们。此外，如果您的数据在许多视图中共享，我建议创建一些单例类来保留已检索到的数据，这样您就可以在应用程序中的不同 UIViewControllers 中访问它。我的结构方式是

DataAccessLayer（使用您的网络服务并将信息填充到类（您的模型）中的层）-> 一些使您的对象远离网络服务的单例类-> UIViewControllers（这些将与您的数据访问层/单例类对话以获取它的数据需求反过来使用它来填充您的视图->视图->如果您的模型发生更改，则通过数据访问层将其中继到您的网络服务

...至于核心数据，如果您想在应用程序中持久化数据，您可以使用它，但它不是必需的，我应该指出核心数据不是在应用程序中持久化数据的唯一方法.. .这个答案有点笼统，但希望它能为您指明正确的方向..

丹尼尔

# bundler - ServiceStack bundler 在构建时添加分号前缀

> ID：13146576
> 
> 赞同：1
> 
> 时间：2012-10-30T19:47:56.083
> 
> 标签：bundler, servicestack

ServiceStack 的 Bundler`;`在构建时为我们的 *js/*min.js 文件添加了前缀 a。这导致 git 认为存在不必要的差异。这是预期的行为吗？

# eclipse - Eclipse首选项中的文本重叠？

> ID：13146583
> 
> 赞同：0
> 
> 时间：2012-10-30T19:48:17.380
> 
> 标签：eclipse, preferences

我正在研究 Eclipse 的 Preferences 窗口，我发现了 Formatter 选项。我决定看一看，并最终创建自己的格式选项。单击“新建”按钮并选择要工作的基础后，它想到了：

![重叠文本](../Images/b39ffec1dcb86587c768678d510357d1.png)

有谁知道为什么会这样？或者我怎么可能解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:44:01.660

不确定，但它看起来像 GTK 主题。如果是这样，您是否尝试过默认主题？

# arrays - 从文本文件中读取双数

> ID：13146585
> 
> 赞同：0
> 
> 时间：2012-10-30T19:48:23.033
> 
> 标签：arrays, list, text, double, readline

我有一个文本文件，这个文件我有这样的东西：

```
0.003 0.4 6
0.004 0.002 54
0.007 0.001 6 
```

我需要从文本文件中读取这些数字并将它们保存在数组或列表中，如下所示：

```
0.003 0.4 6
0.004 0.002 54
0.007 0.001 6 
```

例如，如果数组名称是 myArray 并且我需要这样的东西

```
myArray[0,0,0]=0.003 
```

我发现了一些可以从文本文件中读取双精度的方法，但在所有这些方法中，数组都是这样的

```
myArray=[0.003;0.4;6;0.004,0.002;54;....] 
```

我应该怎么办？请帮助我，我是编程初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:27:02.287

你的程序将在每一轮循环中读取一个数字..所以让两个计数器一个用于行，另一个用于列，每次你读取一个数字时增加列计数器，直到你超过数字 3 ..然后将其重置为 0 和增加行计数器..查看此代码：

```
double array[3][3];
int i = 0, j = 0;
double num;
num = inFile.readline();
while ( !inFile.eof() )
{
    array[i][j] = num;
    if ( j == 2 ) // check if its last element in row i
    {
        i++; // move to row i+1 in array
        j = 0; // reset index to first element in row
    }
    else
        j++; // move to next element in array

    num = inFile.readline();
} 
```

# mysql - 如何进行正确的子查询？

> ID：13146592
> 
> 赞同：0
> 
> 时间：2012-10-30T19:48:58.820
> 
> 标签：mysql, sql, subquery

好吧，我`Workers`的数据库中有表。有 4列`id`、`name`和。我需要显示部门列表，其中工资超过最高工资值的 90% 的工人数量以及具有这种工资的工人数量超过部门工人数量的 15%。`salary``department`

起初我做了这样的查询，它显示了所有有高薪工人的行

```
 SELECT * 
 FROM   `Workers` 
 WHERE id IN (
    SELECT `id`  
    FROM   `Workers` 
    WHERE  `salary` > 0.9 * (SELECT MAX( `salary` )
                             FROM  `Workers`)) 
```

也许我问的是非常愚蠢的事情，但我卡住了，我真的不知道下一步该怎么做才能摆脱那些薪水很高但在他们的部门中只有不到 15% 的员工得到这样的薪水。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:54:27.643

这很丑陋，但它应该可以工作：

```
SELECT department, COUNT(*)
FROM `Workers` w
WHERE id IN
    (SELECT `id`  FROM `Workers`
     WHERE  `salary` > 0.9 * (SELECT MAX( `salary` )  FROM  `Workers`)) 
GROUP BY department
HAVING COUNT(*) > 0.15 *
    (SELECT COUNT(*) FROM `Workers`
     WHERE department = w.department) 
```

# rsync - 快速 RSYNC 代码校正

> ID：13146594
> 
> 赞同：0
> 
> 时间：2012-10-30T19:49:06.757
> 
> 标签：rsync

这段代码有什么问题？

> sudo -u replicant rsync -av -e "ssh -o 'StrictHostKeyChecking no' -i /home/replicant/.ssh/id_rsa" --exclude 'media/' --exclude 'var/' --exclude '.svn' root@$ADMIN:/var/www/ /var/www/ &> /tmp/rsync
> if
> [ $? -ne 0 ]; 然后
> 回显“ `date`：错误 rsync'ing 代码库来自 $ADMIN 检查 /tmp/rsync” | mail -s "rsync 错误！" $DEVEMAIL
> echo " `date`: 从 $ADMIN check /tmp/rsync 同步代码库出错" >> $LOGFILE
> echo "root@$ADMIN:/var/www /var/www" >> $LOGFILE
> exit
> fi

我不断收到此错误：

> 权限被拒绝（公钥）。
> rsync：连接意外关闭（到目前为止已收到 0 个字节）[Receiver]
> rsync 错误：io.c(605)
> [Receiver=3.0.9]处出现无法解释的错误（代码 255）

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-25T05:52:12.233

尝试直接登录 SSH 以解决您的问题，然后继续进行 rsync 测试。所以开始：

`ssh -o 'StrictHostKeyChecking no' -i /home/replicant/.ssh/id_rsa root@$ADMIN`

**旁注：**

*   不要`root`用于这样的任务
*   在 Bash 脚本的开头添加`set -eu`，以便错误结束您的脚本并简化调试（例如，如果`$ADMIN`未定义，脚本将以错误结束）

# jquery - 成功循环中的jQuery ajax请求不会在HTML元素中显示数据

> ID：13146598
> 
> 赞同：0
> 
> 时间：2012-10-30T19:49:29.473
> 
> 标签：jquery, closures

当我在循环中运行 Ajax 请求时，成功的 ajax 不显示返回的数据......这是代码：

```
url = ["../siteAdmin/statistics/queriesAjax.php", "../siteAdmin/statistics/geographyAjax.php"];
tabContainerId = ['tabs-2', 'tabs-3'];

for(var i=0, len=url.length; i < len; i++){
    console.log(tabContainerId[i]);
    jQuery("#"+tabContainerId[i]).html('<img src="../assets/images/loading.gif"/>');
    jQuery.ajax({
        type:"GET",
        url:url[i],
        data:{ from:from, to:to },
        success: function (msg) {
            jQuery("#"+tabContainerId[i]).html(msg);
        },
        error: function (msg) {
            showError("Error occurred.", tabContainerId[i]);
        }
    });
} 
```

在 HTML 元素中，我只看到 loading.gif。显示浏览器控制台中 ajax 成功的 Console.log(msg)。但在 HTML 元素中 - 不是。如果我设置 var i = 0 或 var i = 1，则显示数据。我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:28:41.307

您在`i`成功回调中使用了该变量，但是在执行回调时，`i`几乎可以肯定已经发生了变化。

您必须强制 i 成为回调函数闭包的一部分。一种方法是将 for 循环的内容放入立即调用的函数表达式 (IIFE)：

```
url = ["../siteAdmin/statistics/queriesAjax.php", "../siteAdmin/statistics/geographyAjax.php"];
tabContainerId = ['tabs-2', 'tabs-3'];

for(var i=0, len=url.length; i < len; i++) {
    (function(idx) {
        console.log(tabContainerId[idx]);
        jQuery("#"+tabContainerId[idx]).html('<img src="../assets/images/loading.gif"/>');
        jQuery.ajax({
            type:"GET",
            url:url[idx],
            data:{ from:from, to:to },
            success: function (msg) {
                jQuery("#"+tabContainerId[idx]).html(msg);
            },
            error: function (msg) {
                showError("Error occurred.", tabContainerId[idx]);
            }
        });
    })(i);
} 
```

In effect, this "saves" the value of `i` so it is the same when your callback functions use it.

I haven't run this code through lint or an interpreter, so there may be syntax errors.

# c# - 替代品上的正则表达式量词（竖线“|”）

> ID：13146603
> 
> 赞同：0
> 
> 时间：2012-10-30T19:49:51.330
> 
> 标签：c#, regex, quantifiers

我想修剪一个字符串，如果它以 foo 或 bar 开头和/或结尾，并且想要获取正则表达式组中的内部字符串。
例如

> “fooTestbar”应该是“Test”，
> “Test2bar”应该是“Test2”
> ，“Test3”应该是“Test3”。

我目前的正则表达式是：

```
^(foo|bar)?(.*)(foo|bar)?$ 
```

但这不起作用，因为我无法将量词`?`应用于替代组（`(foo|bar)`）。

**我的代码**

```
static string returnMatch(string text){
string pattern = @"^(foo|bar)?(.*)(foo|bar)?$";
return System.Text.RegularExpressions.Regex.Match(text, pattern).Groups[2].Value;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:02:42.430

你可以用这个

`^(?:foo|bar)?(.*?)(?:foo|bar)?$`

你现在可以像这样匹配它..

```
return Regex.Match(input,"^(?:foo|bar)?(.*?)(?:foo|bar)?$").Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:04:09.330

我建议你去

```
(?:^|(?<=^foo)).*?(?=bar$|$) 
```

或者，如果您想在开头和结尾允许`foo`和/或，则使用`bar`

```
(?:^|(?<=^foo)|(?<=^bar)).*?(?=foo$|bar$|$) 
```

导致`Groups[0]`

# pass-by-reference - Smalltalk 程序内存不足；通过引用问题？

> ID：13146606
> 
> 赞同：2
> 
> 时间：2012-10-30T19:50:07.283
> 
> 标签：pass-by-reference, smalltalk, binary-heap

因此，我正在开发一个程序，该程序应该“堆积”用户添加到集合中的整数等。但是，当我尝试访问作为参数传递给函数的 Node 的左子节点时，我现在遇到了问题。Visual Works 内存不足...

奇怪的是，在调试器中，我可以看到传递节点的左子节点已创建并正确分配给传递节点。但是当我尝试通过源代码访问它时，我得到了一个疯狂的内存错误。

这是相应的代码。希望它是可读的

发生错误的函数，一旦被调用：

```
addLeftChildTo: aNode

"Determine Left child of passed node. Set that child's parent node as self. Imprint the index where that value was retrieved from the array."

| temp leftChildIndex |
2 * aNode indexOfNode <= arrayOfInput size
    ifTrue: 
        [leftChildIndex := 2 * aNode indexOfNode.
        aNode left: (arrayOfInput at: leftChildIndex).
        aNode left parentNode: aNode.                   <---VW Runs out of memory and crashes here. This occurs once the debugger dives into the 'left' accessor method of the passed aNode object.
        aNode left indexOfNode: leftChildIndex.
        self bubbleUp: aNode left.
        self bubbleUpArrayOfInput: aNode left]
    ifFalse: [aNode left: nil] 
```

下面是 BinaryHeapNode 类的 'left' 的访问器方法

```
left

    ^self left

left: aValue

    left := BinaryHeapNode new: aValue. 
```

如果查看最初调用 addLeftChildTo: 方法的代码会有所帮助...

```
populateHeap
"from passed array of input"
"Add a node (typically a node with an element from the ArrayOfInput) to the heap. Bubble up as you go."

| temp |
rootNode isNil
    ifTrue: 
        [rootNode := BinaryHeapNode new: (arrayOfInput at: 1).
        rootNode indexOfNode: indexOfArray.

        self addLeftChildTo: rootNode.   <--- Call to function with problematic code. 
                    ... 
```

我不明白我做错了什么，我已经被这个问题困住了几个小时。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T20:04:46.867

您使用访问器 #left 进行了无限递归：

```
left
  ^self left 
```

这个方法实际上调用了它自己。而是只返回实例变量`^left`。

# c++ - 如何在 Windows 中制作任务栏（系统托盘）应用程序

> ID：13146607
> 
> 赞同：7
> 
> 时间：2012-10-30T19:50:13.033
> 
> 标签：c++, winapi, taskbar, system-tray, visual-c++-2008

我知道启动 Windows 应用程序的唯一方法是通过`CreateWindow`. 不幸的是，任务栏应用程序没有[窗口样式](http://msdn.microsoft.com/en-us/library/ms632600.aspx)，我想知道如何制作一个。我确实在 C# 中找到[了这个解释](http://alanbondo.wordpress.com/2008/06/22/creating-a-system-tray-app-with-c/)，但我正在寻找一个能够用 VC++ 2008 编译的解决方案。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T20:10:52.030

关键是`Shell_NotifyIcon`（正如其他用户所建议的那样）。

在标准情况下，您的应用程序应该至少有一个窗口（至少要接收系统托盘通知消息）。可能是隐藏的。右键单击您的托盘图标，显示一种弹出菜单是一种不错的选择。

我想你可以看看[这个](http://www.codeproject.com/Articles/7469/Quick-code-page-converter)。这个简单的程序演示了如何以非常简约的方式使用系统托盘。

# javascript - 如何将调用自身的脚本放在页面中

> ID：13146611
> 
> 赞同：0
> 
> 时间：2012-10-30T19:50:19.567
> 
> 标签：javascript, jquery, html

当我尝试执行此代码时：

索引.html：

```
<div id="mydiv">test</div>
<script type="text/javascript">
$('#mydiv').html('<script type="text/javascript" id="myscript" src="test.js"><\/script>');
</script> 
```

测试.js：

```
alert(document.getElementById('myscript').src); 
```

我有这个错误：

```
document.getElementById("myscript") is null 
```

我想解决它，知道它`"'<script type="text/javascript" id="myscript" src="test.js"></script>'"`是通过 ajax 调用获得的，与其他内容混合，但我简化了示例的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:08:52.737

您应该使用`document.CreateElement`and`document.body.appendChild`使您的脚本标签可用于 getElementById 。你可以检查这个[问题](https://stackoverflow.com/questions/9902803/getelementbyid-where-element-is-dynamically-created-at-runtime)

在你的情况下，它可能是

```
var scriptTag = document.createElement('script');

scriptTag.src = 'test.js';

document.getElementByID("mydiv").appendChild(scriptTag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:15:23.327

我认为必须先关闭标签，然后才能在其中查询。因此，您的`test.js`脚本将不得不等待片刻、DOM 就绪或 window.onload。

# java - 在java中传递数组的最佳方法是什么

> ID：13146612
> 
> 赞同：1
> 
> 时间：2012-10-30T19:50:23.233
> 
> 标签：java, arrays, reference

我想将一个数组传递给一个方法，但我知道数组是通过引用传递的，所以原始数组被修改了。我发现的一种解决方法是在方法内创建数组的副本，然后修改副本，但是传递数组副本的最佳方法是什么，或者在方法内创建副本会更好。这是我的代码，看看 ArrayUtils 类中的 reverse 方法

```
package com.javablackbelt.utils;

import java.util.ArrayList;
import java.util.Arrays;

public class ListUtils {

    public static void main(String arg[]) {
        String[] arr = {"one", "two", "three", "four", "five"};
        ArrayUtils.print(arr);

        System.out.println();

        String [] reversedArr = ArrayUtils.reverse(arr);
        ArrayUtils.print(reversedArr);

        System.out.println();

        ArrayList<String> list = ArrayUtils.toArrayList(arr);
        ListUtils.print(list);      

    }

    public static void print(ArrayList<String> aStr) {
        System.out.print("list: [ ");
        for(String l: aStr)
            System.out.print(l+" ");
        System.out.println(" ] size: "+aStr.size());
    }

}

package com.javablackbelt.utils;

import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.ArrayList;

public class ArrayUtils {

    public static void print(String[] arr) {
        System.out.print("Array: [ ");
        for(String str: arr) {
            if(str != null) 
                System.out.print(str.toString()+" ");
        }
        System.out.print(" ] size: "+arr.length);
    }

    public static String[] reverse(String[] arr) {
        String[] a = arr;

        List<String> list = Arrays.asList(a);

        Collections.reverse(list);

        String[] newArr = (String[]) list.toArray();

        return newArr;
    }

    public static ArrayList<String> toArrayList(String[] arr) {

        ArrayList<String> arrList = new ArrayList<String>();

        for(int i = arr.length-1; i >= 0; i--)
            arrList.add(arr[i]);
        return arrList;     
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:57:20.567

您可以创建数组的副本，从而避免编辑原始数组，

1.  System.arraycopy(srcArray, 0, destArray 0, srcArray.length);
2.  srcArray.clone()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:58:51.133

没有最佳答案。有时修改传递的数组（例如，`Arrays.sort()`）是正常的，有时则不是。关键是记录方法，并让调用者尊重合同。

我会发现对于返回输入数组的转换数组以使输入数组保持不变的方法是正常的，并且我发现在将数组传递给这样的方法之前必须创建副本是不好的，以防万一。有了清晰的文档，毫无疑问。

集合通常应优先于数组。使用集合，您不必创建副本来保护自己。您可以将集合包装在未修改的集合中：`Collections.unmodifiableList(list)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:55:53.847

您必须复制数组。有几种方法可以实现，但出于这个原因，使用实际对象（例如[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)对象）而不是“原始”数组通常更容易：

```
String[] myPrimitiveArrayOfStrings;
ArrayList<String> myObjectArrayOfStrings = new ; 
```

后一种方法（使用“泛型”）在如何使用阵列方面为您提供了很大的灵活性。它使排序、搜索、扩展数组中的对象以及许多其他事情变得更加容易。

也就是说，[Array](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)类为您提供了一些实用程序。

需要说明的是，Java 中的对象不是通过引用传递的，而是通过引用值传递的。这意味着复制了指向对象的指针。如果删除了原始指针，则该指针仍然存在。只有在删除所有指针后，才会对对象进行垃圾回收。

# javascript - jQuery返回不带逗号的字符串的前5个单词

> ID：13146613
> 
> 赞同：15
> 
> 时间：2012-10-30T19:50:28.353
> 
> 标签：javascript, jquery, arrays, string

我正在尝试以可读格式返回字符串的前 5 个单词，没有“”或逗号分隔单词。我不确定它是正则表达式还是什么，但我无法弄清楚，尽管它可能很简单。谢谢！

看看我到目前为止有什么：http: [//jsfiddle.net/ccnokes/GktTd/](http://jsfiddle.net/ccnokes/GktTd/)

这是我正在使用的功能：

```
function getWords(string){
    var words = string.split(/\s+/).slice(1,5);
    return words;
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-30T19:54:37.323

你唯一缺少的是一个`join()`

试试这个：

```
function getWords(str) {
    return str.split(/\s+/).slice(0,5).join(" ");
} 
```

这将执行以下操作：

```
var str = "This is a long string with more than 5 words.";
console.log(getWords(str)); // << outputs "This is a long string" 
```

查看[此链接](http://www.w3schools.com/jsref/jsref_join.asp "这个链接")以进一步解释`.join()`. javascript中的函数。本质上 - 如果您不提供参数，它使用默认分隔符`,`，而如果您提供一个（正如我在上面的示例中所做的那样，通过提供`" "`- 它将使用它。这就是输出成为第一个的原因5 个单词，每个单词之间用空格隔开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:54:49.720

这些逗号来自您输出数据的方式：

```
//write to DOM
$('<h2 />').text(getWords(str).join(' ')).appendTo('body'); 
```

​ 当您将字符串添加到 时`getWords(str)`，javascript 会尝试将数组转换为字符串 - 它通过用逗号连接单词来实现。如果您想将它们与其他东西一起加入，请使用[`join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T07:58:26.410

Troy Alford 解决方案有效，但有一个缺点。如果单词之间有多个空格，或者换行符 (\n) 将被转换为单个空格，例如：

'jQuery 是一个
多浏览器'

将转换为

'jQuery 是一个多浏览器'

为了解决这个问题，我们可能会使用单词边界正则表达式。它可能看起来像这样：

```
function getFirstWords(text, wordsAmount) {
  const arr = text.split(/\b/g);
  const arrItemsAmount = (/\b/.exec(text) && /\b/.exec(text).index) ?
                           wordsAmount * 2 :
                           wordsAmount * 2 - 1;
  return arr.slice(0, arrItemsAmount).join('');
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-07-29T11:32:32.980

你可以用 str.substring(1,15)

# javascript - Facebook OAuth 用户身份验证

> ID：13146615
> 
> 赞同：0
> 
> 时间：2012-10-30T19:50:38.133
> 
> 标签：javascript, jquery, facebook, facebook-graph-api

所以我一直在尝试获取一个网页来使用 Facebook OAuth 对用户进行身份验证。我一直在关注 Facebook 的关于如何做到这一点的教程，我已经完成了所有工作，但我似乎无法让它发挥作用。

这是代码...

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
function main(){ // runs all the other methods when needed, and maintains the proper path from making the form to posting to Facebook
//var imageURL = getImageURL();
//$("img[src='" + imageURL + "']").after("</br><form><input type=\"checkbox\" name=\"geo\" value=\"geolocation\"><b>Use Geolocation?</b> </br> <b>Additional Information About the Image: </b> <input type=\"comment\" name=\"cmnt\"></form>");
//alert("Form should have been placed.");
}

function testAPI() {
alert('Welcome!  Fetching your information.... ');
FB.api('/me', function(response) {
    alert('Good to see you, ' + response.name + '.');
});
}

// This function right now is hard coded to one particular image right now for testing purposes
// Should be coded in the future to return the URL of a long-pressed image
function getImageURL(){
var url = "http://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Solid_black.svg/200px-Solid_black.svg.png";
return url;
}

// Facebook login code
function login() {
FB.login(function(response) {
    if (response.authResponse) {
        // connected
        alert("Running testAPI();");
        testAPI();
    } else {
        alert("Login not complete.");
        // canceled
    }
});
}

function testAPI() {
alert('Welcome!  Fetching your information.... ');
FB.api('/me', function(response) {
    alert('Good to see you, ' + response.name + '.');
});
}
</script>
</head>
<body onload="main()">

<div id="fb-root"></div>
<script>

  //-----------------------------
  // This is an initilization script created by Facebook. 
  //-----------------------------
  window.fbAsyncInit = function() {
alert("Running Facebook init..");
FB.init({
  appId      : '488272104524396', // App ID
  channelUrl : '//t50.novarra.net/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

// Additional init code here
FB.getLoginStatus(function(response) {
    alert("Getting Login Status..");
    if (response.status === 'connected') {
        // connected
        alert("Response Status: Connected");
        $('.fblogincontainer').removeClass('hidden');
        testAPI();
    } else if (response.status === 'not_authorized') {
        alert("Response Status: Not Authorized");
        // not_authorized
        login();
    } else {
        alert("Response Status: Other");
        // not_logged_in
        login();
    }
});
  };

  // Load the SDK Asynchronously
 (function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

<b> Page </b>
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Solid_black.svg/200px-Solid_black.svg.png">

<div id="content">
     <div class="fblogincontainer hidden">
        <div class="fb-login-button">Login to Facebook</div>
    </div>
</div>

</body>
</html> 
```

所以我的问题是 FB>getLoginStatus 甚至没有启动。它的警报不会弹出。此外，fb-login-button 似乎不起作用。它对我来说消失了。

# php - 无法启动和运行 Wordpress

> ID：13146620
> 
> 赞同：1
> 
> 时间：2012-10-30T19:50:51.653
> 
> 标签：php, windows, wordpress, iis-7

我正在尝试启动并运行 Wordpress，但在登录机制方面遇到了问题。当我第一次运行 Wordpress 设置时，它成功地创建了数据库并填充了`wp_capabilities`表格，但它未能创建用户。我做了一些研究，发现了用户数据的存储方式，并手动创建了条目。它让我登录，但随后给了我以下错误：

`You do not have sufficient permissions to access this page.`

我在中添加了以下键`wp_usermeta`：

```
wp_capabilities = a:1:{s:13:"administrator";b:1;}
wp_user_level = 10 
```

知道有什么问题吗？如果有什么不同，我会在 Windows IIS7（支持 PHP）上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:00:53.177

我建议您从头开始，并确保您配置的数据库用户对数据库`wp-config.php`具有正确的写入权限。另外，我建议在设置时将 wordpress 目录的权限更改为所有用户的读取、写入和执行权限，然后在设置后更改`group`和`other`仅读取和执行的权限。

对于 Windows，您将需要以下内容：

```
CACLS <your_wordpress_directory> /E /T /C "<user>":F 
```

授予完全权限。然后：

```
CACLS <your_wordpress_directory> /E /T /C /W "<user>" 
```

撤销写权限。

**编辑：**

如果您看到 SMTP 失败问题，请查看[此处](http://www.neowin.net/forum/topic/873098-iis7-and-smtp-email-issues/)以了解禁用身份验证是否有帮助。

# c++ - 指向函数成员和非成员的指针

> ID：13146621
> 
> 赞同：4
> 
> 时间：2012-10-30T19:50:54.843
> 
> 标签：c++, function-pointers, member-function-pointers

# 抽象的

我有一个存储优化问题并针对该问题运行求解器的类。如果求解器失败，我想考虑一个子问题并使用相同的求解器（和类）进行求解。

# 介绍

优化问题本质上是很多（数学）函数。问题函数是在类外定义的，而子问题函数是在类内定义的，所以它们有不同的类型（`void (*)`例如`void (MyClass::*)`.

起初我以为我可以将成员函数强制转换为非成员指向函数的指针类型，但我发现我不能。所以我正在寻找其他方法。

## 示例代码

模拟我的问题的示例代码：

```
#include <iostream>

using namespace std;

typedef void (*ftype) (int, double);

// Suppose foo is from another file. Can't change the definition
void foo (int n, double x) {
  cout << "foo: " << n*x << endl;
}

class TheClass {
  private:
    double value;
    ftype m_function;
    void print (int n, double x) {
      m_function(size*n, value*x);
        }
  public:
    static int size;
    TheClass () : value(1.2), m_function(0) { size++; }
    void set_function (ftype p) { m_function = p; }
    void call_function() {
      if (m_function) m_function(size, value);
    }
    void call_ok_function() {
      TheClass ok_class;
      ok_class.set_function(foo);
      ok_class.call_function();
    }
    void call_nasty_function() {
      TheClass nasty_class;
//      nasty_class.set_function(print);
//      nasty_class.set_function(&TheClass::print);
      nasty_class.call_function();
    }
};
int TheClass::size = 0;

int main () {
  TheClass one_class;

  one_class.set_function(foo);
  one_class.call_function();
  one_class.call_ok_function();
  one_class.call_nasty_function();
} 
```

正如示例所示，成员函数不能是静态的。另外，我无法重新定义原始问题函数来接收对象。

谢谢你的帮助。

### 编辑

我忘了提。我尝试更改为 std::function，但我的原始函数有 10 多个参数（这是一个 Fortran 子例程）。

# 解决方案

`std::function`我按照建议对和进行了更改`std::bind`，但没有重新设计具有更多 10 个参数的函数。我决定创建一个中间函数。以下代码说明了我所做的，但变量较少。谢谢大家。

```
#include <iostream>
#include <boost/tr1/functional.hpp>

using namespace std;

class TheClass;

typedef tr1::function<void(int *, double *, double *, double *)> ftype;

// Suppose foo is from another file. Can't change the definition
void foo (int n, int m, double *A, double *x, double *b) {
    // Performs matrix vector multiplication x = A*b, where
    // A is   m x n
}

void foo_wrapper (int DIM[], double *A, double *x, double *b) {
    foo(DIM[0], DIM[1], A, x, b);
}

class TheClass {
    private:
        ftype m_function;
        void my_function (int DIM[], double *A, double *x, double *b) {
            // Change something before performing MV mult.
            m_function(DIM, A, x, b);
        }
    public:
        void set_function (ftype p) { m_function = p; }
        void call_function() {
            int DIM[2] = {2,2};
            if (m_function) m_function(DIM, 0, 0, 0);
        }
        void call_nasty_function() {
            TheClass nasty_class;
            ftype f = tr1::bind(&TheClass::my_function, this, _1, _2, _3, _4);
            nasty_class.set_function(f);
            nasty_class.call_function();
        }
};

int main () {
    TheClass one_class;

    one_class.set_function(foo_wrapper);
    one_class.call_function();
    one_class.call_nasty_function();
} 
```

PS。创建一个`std::function`超过 10 个变量的变量似乎是可能的（已编译，但我没有测试）

```
#define BOOST_FUNCTION_NUM_ARGS 15
#include <boost/function/detail/maybe_include.hpp>
#undef BOOST_FUNCTION_NUM_ARGS 
```

`std::bind`但是为超过 10 个参数创建一个似乎并不容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:53:29.693

`std::function`,`std::bind`和 lambda 是您正在寻找的。总之，函数指针是很不好的东西，应该被烧死。总之，`std::function`可以存储任何可以使用正确签名调用的函数对象，并且您可以使用`std::bind`lambda 生成一个函数对象，该函数对象可以快速轻松地调用您的成员函数。

编辑：然后你只需要推出你自己的`std::function`支持超过 10 个参数的等价物。

# drupal - drupal7 阻止用户显示内容不是匿名的

> ID：13146625
> 
> 赞同：1
> 
> 时间：2012-10-30T19:51:43.883
> 
> 标签：drupal, drupal-7

有谁知道在 Drupal 7 中是否可以向匿名用户无法访问的被阻止用户显示一段内容（页面）？

如果是这样，您将如何去做？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:08:08.390

为被阻止的用户创建新的内容类型（或节点）。

然后你需要为此编写一个自定义模块。在这个模块中，你需要实现[hook_node_access](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_access/7)，代码与此类似

```
function [YOUR_MODULE]_node_access($node, $op, $account)
{
    if($op == "view" && $node->type == "YOUR_CONTENT_TYPE" && $account->status != 0)
    {
        return NODE_ACCESS_DENY;
    }
} 
```

然后，您可以在块/视图中或任何您喜欢的方式使用这些节点。

请注意，我没有测试过代码，如果你在让它工作时遇到任何问题，请告诉我。

希望这会有所帮助……穆罕默德。

# visual-studio-2010 - VSIX 扩展 WPF 样式

> ID：13146629
> 
> 赞同：4
> 
> 时间：2012-10-30T19:52:14.040
> 
> 标签：visual-studio-2010, vsix

我正在用 WPF 构建一个 VS2010 扩展（vsix）。有什么方法可以重用 Visual Studio 本身的 WPF 样式模板，以使我的控件看起来是 Visual Studio 的原生控件？

我可以使用这样的画笔表达式：

```
xmlns:vsfx="clr-namespace:Microsoft.VisualStudio.Shell;assembly=Microsoft.VisualStudio.Shell.10.0"
Background="{DynamicResource {x:Static vsfx:VsBrushes.ToolWindowBackgroundKey}}" 
```

然而，这还不够。我可以对整个 TabControl 或 Label 应用样式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T16:50:59.860

您可以使用您提到的技术，我找到了这些链接（也）

用户界面： http: [//msdn.microsoft.com/en-us/library/bb165108 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb165108(v=vs.110).aspx)

内部设置查询： http: [//msdn.microsoft.com/en-us/library/bb164716 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb164716(v=vs.110).aspx)

但是除了可查询的设置之外，他们没有提到其他类似的自定义样式。

# bash - 循环脚本直到文件大小相等一分钟

> ID：13146630
> 
> 赞同：0
> 
> 时间：2012-10-30T19:52:16.433
> 
> 标签：bash, loops, if-statement, exists

我有 cronjob 每天在特定时间运行脚本。该脚本用于转换特定文件夹中的大文件（约 2GB）。问题是我同事不是每天都把文件放在文件夹之前的时间，写成cronjob。

请帮助我在脚本中添加命令或编写第二个脚本：

1.  检查文件是否存在于文件夹中。
2.  如果上一个操作为真，则每分钟检查一次文件大小。（我想避免转换仍然传入的大文件）。
3.  如果文件大小在 2 分钟内保持不变，则启动脚本进行转换。

到目前为止，我给你脚本的重要行：

```
cd /path-to-folder
for $i in *.mpg; do avconv -i "$i" "out-$i.mp4" ; done 
```

10倍的帮助！

**评论后的新代码：**

文件夹中有文件！

```
#! /bin/bash

cdate=$(date +%Y%m%d)
dump="/path/folder1"
base=$(ls "$dump")

if [ -n "$file"]
then
    file="$dump/$base"
    size=$(stat -c '%s' "$file")
    count=0
    while sleep 10
    do
        size0=$(stat -c '%s' "$file")
        if [ $size=$size0 ]
        then $((count++))
             count=0
        fi
        if [ $count = 2 ]
        then break
        fi
    done
    # file has been stable for two minutes. Start conversion.

CONVERSION CODE

fi 
```

终端消息：可能是错误？？？

```
script.sh: 17: script.sh: arithmetic expression: expecting primary: "count++" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:18:33.367

```
file=/work/daily/dump/name_of_dump_file

if [ -f "$file" ]
then
    # size=$(ls -l "$file" | awk '{print $5}')
    size=$(stat -c '%s' "$file")
    count=0
    while sleep 60
    do
        size0=$(stat -c '%s' "$file")
        if [ $size = $size0 ]
        then : $((count++))
        else size=$size0
             count=0
        fi
        if [ $count = 2 ]
        then break
        fi
    done
    # File has been stable for 2 minutes — start conversion
fi 
```

* * *

鉴于稍微修改的要求（在评论中描述），并假设文件名不包含空格或换行符或其他类似的尴尬字符，那么您可以使用：

```
dump="/work/daily/dump"                 # folder 1
base=$(ls "$dump")

if [ -n "$file" ]
then
    file="$dump/$base"
    ...code as before...
    # File has been stable for 2 minutes - start conversion
    dir2="/work/daily/conversion"       # folder 2
    file2="$dir2/$(basename $base .mpg).xyz"
    convert -i "$file" -o "$file2"
    mv "$file" "/work/daily/originals"  # folder 3
    ncftpput other.coast.example.com /work/daily/input "$file2"
    mv "$file2" "/work/daily/converted" # folder 4
fi 
```

如果文件夹中没有任何内容，则该过程退出。如果您希望它等到有文件要转换，那么您需要围绕文件测试循环：

```
while file=$(ls "$dump")
      [ -z "$file" ]
do sleep 60
done 
```

这使用了一个鲜为人知的 shell 循环特性；您可以将命令堆叠在控件中，但控制循环的是最后一个的退出状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:47:32.290

好吧，我终于做了一些工作代码如下：

```
#!/bin/bash

cdate=$(date +%Y%m%d)
folder1="/path-to-folder1"

cd $folder1

while file=$(ls "$folder1")
      [ -z "$file" ]
do sleep 5 && echo "There in no file in the folder at $cdate."
done

echo "There is a file in folder at $cdate"
size1=$(stat -c '%s' "$file")
echo "The size1 is $size1 at $cdate"
size2=$(stat -c '%s' "$file")
echo "The size2 is $size2 at $cdate"
if [ $size1 = $size2 ]
then
echo "file is stable at $cdate. Do conversion." 
```

### 下一行是循环相同脚本的正确行吗？？？

```
else sh /home/user/bin/exist-stable.sh
fi 
```

### 下面评论后的正确代码是

```
else exec /home/user/bin/exist-stable.sh
fi 
```

# android - 如何从按钮中获取可绘制对象？

> ID：13146632
> 
> 赞同：10
> 
> 时间：2012-10-30T19:52:23.280
> 
> 标签：android

由于在按钮上，我们可以使用 android:drawableLeft 来设置按钮左侧的可绘制对象。有没有办法以编程方式获得这个drawable？

```
<Button android:id="@+id/detail_refresh_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:text="@string/refresh" 
        android:gravity="center"
        android:drawableLeft="@drawable/progress"
/> 
```

有没有办法在 Java 代码中获得可绘制的“进度”？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-30T20:20:23.367

我想你想要`Button.getCompoundDrawables()[0]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T20:00:42.053

看着：http: [//developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)

你可以看到

```
myButton.setCompoundDrawablesWithIntrinsicBounds(Drawable,Drawable,Drawable,Drawable) 
```

应该给你你想要的。

顺序：左上右下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T03:03:36.220

如果视图是按钮，

```
button.getBackground().setLevel(x);
imageView.getDrawable().setLevel(x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-20T06:52:46.057

[文档链接](https://developer.android.com/reference/android/widget/TextView.html#getCompoundDrawables())

```
Button.getCompoundDrawables()[index] 
```

其中 , ,可以分别`index`为 0, 1, 2, 3 。`drawableLeft``drawableTop``drawableRight``drawableBottom`

# c++ - 程序产生的奇怪输出

> ID：13146638
> 
> 赞同：1
> 
> 时间：2012-10-30T19:53:00.940
> 
> 标签：c++, visual-c++

我认为我的代码有效。但是，它输出 01111E5 或 17B879DD 或类似的东西。

有人可以告诉我为什么。

我知道我设置了 P 的限制而不是 10,001。我的代码就是这样，因为我从 3 开始，跳过了素数 2。

```
#include <iostream>
bool prime (int i)
{
bool result = true;
int isitprime = i;
for(int j = 2; j < isitprime; j++)              ///prime number tester
{
    if(isitprime%j == 0) result = false;
}   
return result;
}

int main (void)
{
using namespace std;
int PrimeNumbers = 1;
int x = 0;
for (int i = 3 ; PrimeNumbers <=10000; i++)
{
    if(prime(i))
    {
        int prime = i;
        PrimeNumbers +=1;
    }
}   
cout<<prime<<endl;
system ("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T19:54:59.907

```
cout<<prime<<endl; 
```

打印函数的地址`bool prime (int i)`，而不是您声明的变量。只需重命名函数或变量（请注意，您还必须更改其范围，或移动`cout`循环内部 - 如果您想将它们全部打印出来）：

```
for (int i = 3 ; PrimeNumbers <=10000; i++)
{
    if(prime(i))
    {
        cout << i << endl;
        PrimeNumbers++;
    }
} 
```

还：

```
for(int j = 2; j < isitprime; j++)              ///prime number tester
{
    if(isitprime%j == 0) result = false;
} 
```

可以进行优化，因为（1）您不需要检查所有数字 until `isitprime`，但至多`sqrt(isitprimt)`和（2）您只需要检查 until `result`is `false`，此时您可以`break`退出循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T19:57:19.353

输出一点也不奇怪。

```
cout<<prime<<endl; 
```

您正在打印`prime`此处的函数指针。

您可能打算打印您在此处创建的变量：

```
 int prime = i; 
```

但这是在循环范围内。事实上，如果你在编译时启用了警告，你的编译器应该告诉你这个变量永远不会被使用。此外，将 C 或 C++ 中的变量与函数（或更高级别范围内的任何其他变量）同名也是不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:02:50.177

您在主程序中的循环不会正确停止，因为测试变量`PrimeNumbers`可能不会改变。
尝试：

```
 for (int i = 3; i < 10000; i++)
  {
   //...
  } 
```

`prime`此外，由于您在语句中声明了变量，因此在执行语句`if`后它会消失`if`：

```
 if (prime(i))
  {
      int prime = i; // <-- Declare the variable before the for loop.
  //... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T20:26:31.503

查找从第 n 个到 2 的素数（1 既不是素数也不是复合数）的代码写在下面，我没有使用 math.h 头文件，做了一些不同的事情，令人惊讶的是它工作得非常酷......代码是：

```
 #include<iostream.h>
             #include<stdio.h>
             #include<conio.h>
             class prime
                 {
                  int a;
                  int i;
                  public:
                    void display();
                  };

                void prime::display()
                    {
                      cout<<"Enter the number to see primes less than it till 2";
                      cin>>a;
                      int count=0;
                      for(int j=a;j>=1;j--)
                        {
                           for(int i=1;i<=j;i++)
                              {
                                if(j%i==0)
                                  {
                                    count++;
                                   }
                               }
                                if(count==2)
                                  {
                                      cout<<"\t"<<j;
                                   }
                              count=0;
                              }
                            }
                           void main()
                              {
                                  clrscr();
                                  prime k;
                                  k.display();
                                  getch();
                               } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-30T22:57:08.350

如果你想找到从 1 到 n 的素数，希望这对你有帮助。

```
 #include <iostream>

#include <vector>
static bool _isprime (int number)
{   
    if(number==1)
    {
        return false;
    }
    bool flag=true;
    if(number==2||number%2!=0)
    {
        for(int i=2;i<number;i++)
        {
            if(number%i==0)
            {
                flag=false;
            }
        }
    }
    else flag=false;
    return flag;
}
int main (void)
{
using namespace std;
vector<int> primenumber;
cout<<"prime number between 1 and ？"<<endl;
int x=0;
cin>>x;
    for(int i=0;i<=x;i++)
    {
        if(_isprime(i)==true)
        {
        //cout<<x<<" is a prime number"<<endl;
            primenumber.push_back(i);
        }
        //else cout<<x<<" is not a prime number"<<endl;
    }
    for(int i=0;i<primenumber.size();i++)
    {
        cout<<primenumber[i]<<endl;
    }
    cout<<"the number of prime number is "<<primenumber.size()<<endl;
system("pause");
return 0;
} 
```

# linux - 如何查询特定邻居的 IPv6 NDP（邻居发现协议）表

> ID：13146639
> 
> 赞同：6
> 
> 时间：2012-10-30T19:53:01.440
> 
> 标签：linux, ipv6, arp, netlink

我正在使用 Linux 并试图弄清楚如何（通过 API）查询 NDP 表以获取特定条目。到目前为止，我发现的唯一示例（在 iproute2 的源代码中）使用 Netlink 并获取整个表。有没有办法在特定接口上查询 Netlink 以获取特定 IPv6 地址？或者有没有与使用 Netlink 不同的方法，我应该这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:53:16.910

不幸的是，这在 3.6 版的 Linux 内核中是不可能的。有人在 2010 年提交了一个[补丁](http://patchwork.ozlabs.org/patch/42976/)来添加这样的功能，但它从未合并到内核代码库中。您必须将整个邻居表拉入用户空间，然后在那里进行搜索。

# java - 如何删除打印到控制台/终端的前一个字符？

> ID：13146640
> 
> 赞同：4
> 
> 时间：2012-10-30T19:53:03.993
> 
> 标签：java

有没有办法在 Java 中动态更改输出？例如，在终端窗口中，如果我有：

```
System.out.print("H") 
```

然后我有：

```
System.out.print("I") 
```

输出将是：

```
HI 
```

有没有办法为输出分配一个位置，允许您动态替换字符？例如（我知道这不会输出我想要的，我只是想展示我的想法）这个：

```
 System.out.print("H")
 Thread.sleep("1")
 System.out.print("I") 
```

它会首先打印出来

```
H 
```

然后一秒钟后，将 H 替换为 I?

我敢肯定这听起来很愚蠢，我只是对没有 GUI 的动态更改内容感兴趣。有人可以为我指出这项技术的方向吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:11:10.233

这就是您所需要的（使用回车 '\r' 覆盖先前的输出）：

```
 System.out.print("H");
  Thread.sleep(1000);
  System.out.print("\rI"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T20:02:55.433

你可能想看看

```
System.out.printf 
```

查看此处显示的示例：[http ://masterex.github.com/archive/2011/10/23/java-cli-progress-bar.html](http://masterex.github.com/archive/2011/10/23/java-cli-progress-bar.html)

编辑：

printf 显示格式化的字符串，这意味着您可以调整该格式并根据需要进行更改。

例如，您可以执行以下操作：

```
String[] planets = {"Mars", "Earth", "Jupiter"};        
String format = "\r%s says Hello";

for(String planet : planets) {
    System.out.printf(format, planet);
try { 
        Thread.sleep(1000); 
    }catch(Exception e) { 
        //... oh dear
    }
} 
```

使用此处找到的格式化字符串语法：http: [//docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)

正如评论所说，此解决方案仅限于单行，但取决于您的需要，这可能就足够了。

如果您需要针对整个屏幕的解决方案，那么可能的解决方案（虽然很脏）是使用 JNA 挂钩操作系统并在控制台窗口上获取句柄，找到它的高度，然后循环 println() 以“清除" 窗口然后重绘你的输出。

如果您想阅读更多内容，我可以回答更多问题，或者这里是一个链接：[https ://github.com/twall/jna](https://github.com/twall/jna)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T20:07:52.270

您可以使用`\b`退格和擦除前一个字符。

```
$ cat T.java
import java.lang.Thread;

public class T {
    public static void main(String... args) throws Exception {
        System.out.print("H");
        System.out.flush();
        Thread.sleep(1000);
        System.out.print("\bI\n");
        System.out.flush();
    }
}
$ javac T.java && java T
I 
```

它将输出，然后在一秒钟后将`H`其替换为。`I`

遗憾的是，它在 Eclipse 控制台中不起作用，但在普通控制台中却可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T20:02:52.953

通常用于执行此类操作的 C 库称为[`curses`](http://www.gnu.org/software/ncurses/). （也用于依赖绑定到 C 库的脚本语言，例如 Python。）您可以使用 Java 绑定到它，例如[JCurses](http://sourceforge.net/projects/javacurses/)。谷歌还告诉我有一个纯 Java 等价物，称为[lanterna](https://github.com/mabe02/lanterna)。

# javascript - div 上的条件“静态”到“固定”导致滚动抖动

> ID：13146642
> 
> 赞同：0
> 
> 时间：2012-10-30T19:53:12.833
> 
> 标签：javascript, jquery

我有一个顶部导航栏位置：“静态”，但是当用户滚动超过导航栏的高度时，位置更改为“固定”，以便导航栏附加到窗口的顶部。当滚动回页面顶部时，它也会切换回“静态”。

导航栏有一个静态横幅 div，它保留在页面顶部。当窗口顶部滚动到导航栏下方时，它会变为位置：“固定”。

当页面刚刚长到需要滚动时，我一直在经历一些抖动，但不足以保持滚动高度和导航栏为“固定”，所以当滚动到页面底部时，导航栏在“静态”和“固定”。

我已经发布了关于我如何设置它的 jsfiddle，但由于我遇到的问题，我不太能够复制这个问题：http: [//jsfiddle.net/bB7Bf/](http://jsfiddle.net/bB7Bf/)

HTML：

```
<div id="topMaterial">Static Top doesn't move</div>
<div id="ktNavbar">topbar that sticks to top of window after scrolls below static height</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JS：

```
$(function() {
var navScroll = $(window).scroll(function() {

    var scrollPosition = $(this).scrollTop();

    if (scrollPosition > 120) $("#ktNavbar").css({
        "position": "fixed",
        "top": 0,
        "left": 0,
        "right": 0
    });

    else $("#ktNavbar").css("position", "static");
    });
});​ 
```

是否有解决方法来防止“静态”和“固定”之间的这种滚动条件抖动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:30:52.993

为什么不让它一直保持固定并在下面的任何内容上添加上边距？不需要js。

# opencv - 编译opencv样本：未知的cmake命令ocv_check_dependencies

> ID：13146650
> 
> 赞同：14
> 
> 时间：2012-10-30T19:53:31.373
> 
> 标签：opencv, cmake, osx-snow-leopard

我正在尝试构建源包附带的 OpenCV 示例，我得到以下信息：

```
CMake Error at CMakeLists.txt:10 (ocv_check_dependencies):
  Unknown CMake command "ocv_check_dependencies". 
```

我确实使用安装了 OpenCV

```
cmake .
make
sudo make install 
```

我得到了一个教程片段（因此我认为它作为一个库正确安装）。但是，编译示例不起作用。

我想我必须以某种方式将 CMake 配置为具有“ocv_check_dependencies” - 但是如何？我搞不清楚了！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T21:58:55.200

实际上对于 OpenCV 2.4.4 beta，根 CMakeList.txt 文件说：

> OCV_OPTION(BUILD_EXAMPLES "构建所有示例"

`-DBUILD_EXAMPLES=ON`对我来说工作得很好。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-31T15:29:34.137

我得到了它。

为了构建示例，必须通过提供 cmake 来更改默认配置`-D`。我做错的是我试图从`samples`目录中执行 cmake 。

构建示例的正确方法是像这样调用 cmake（从解压存档的根目录中）：

```
cmake -DBUILD_SAMPLES . 
```

这将打开样本。可以使用 make 进行安装，然后进行安装。样本可以在`bin`构建后找到。

另请[参阅](http://opencv.willowgarage.com/wiki/OpenCV%20GPU%20FAQ#Are_there_any_samples.3F)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-18T01:55:46.900

如何编译 OpenCV 示例代码？

```
# For OpenCV 3 
cd /path/to/opencv/samples/cpp/
#Compile
g++ -ggdb `pkg-config --cflags --libs opencv` facedetect.cpp -o facedetect
#run
./facedetect 
```

为我工作。

[从这个链接谷歌搜索](http://www.learnopencv.com/how-to-compile-opencv-sample-code/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-08T10:05:14.373

mydragonisland 的构建说明几乎对我有用；稍微重新排序并包括重音：

```
g++ facedetect.cpp -o facedetect `pkg-config --libs opencv` 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-30T14:28:20.373

宏 'ocv_check_dependencies' 定义在：your_path_to/opencv/cmake/OpenCVModule.cmake

```
# ensures that all passed modules are available
# sets OCV_DEPENDENCIES_FOUND variable to TRUE/FALSE
macro(ocv_check_dependencies)
  set(OCV_DEPENDENCIES_FOUND TRUE)
  foreach(d ${ARGN})
    if(d MATCHES "^opencv_[^ ]+$" AND NOT HAVE_${d})
      set(OCV_DEPENDENCIES_FOUND FALSE)
      break()
    endif()
  endforeach()
endmacro() 
```

顶层 CMakeLists.txt 包含来自 opencv/cmake/ 文件的“包含”命令。这就是为什么当您通过从 opencv 源的根目录调用 cmake 进行编译时宏可用的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-01T04:28:38.817

## 原因

错误消息上下文：

```
CMake Error at CMakeLists.txt:10 (ocv_check_dependencies):
  Unknown CMake command "ocv_check_dependencies". 
```

出现此错误消息是因为 cmake 找不到`ocv_check_dependencies`

这就是为什么控制台说**Unknown CMake command**

## 解决方案

如果cmake找不到`ocv_check_dependencies`定义的地方

就像@Nick Hockings 说的：

`ocv_check_dependencies`是一个宏定义在`Your/OpenCV/path/OpenCVModule.cmake`

```
macro(ocv_check_dependencies)
  set(OCV_DEPENDENCIES_FOUND TRUE)
  foreach(d ${ARGN})
    if(d MATCHES "^opencv_[^ ]+$" AND NOT HAVE_${d})
      set(OCV_DEPENDENCIES_FOUND FALSE)
      break()
    endif()
  endforeach()
endmacro() 
```

最快的方法是将上面的这段代码复制到你的`CMakeList.txt`文件`ocv_check_dependencies`中

因此，cmake终于可以明白它是什么了

那应该可以解决问题，我希望将来没有其他人会打扰这个问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-13T20:52:02.463

我有类似的错误。我的方法如下： 1) cd xxx/samples 2) mkdir build 3) cd build 4) cmake .. 5) make 现在它可以工作了。我们无法在其源文件下构建单个项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-22T09:38:20.877

以下步骤对我有用。

导出工具链路径。

cd opencv-3.3.0/samples

cross_cmake && cross_make

cd opencv-3.3.0/samples/cpp/

# android - 如何禁用在android中单击ListView？

> ID：13146652
> 
> 赞同：31
> 
> 时间：2012-10-30T19:53:39.827
> 
> 标签：android, listview, clickable

我有一个 ListView，我用我的数据库中的值填充。如果数据库为空，我将 ListView 的第一项设置为“无数据”。我想禁用单击此项目。我用过 ArrayAdapter。我尝试将 areAllItemsEnabled,isEnabled 设为 false，但没有用。即使我将 ListView 的 isClickable 和 setEnabled 设置为 false，也没有用。我将 OnItemClickListener 的代码放在 else 条件中，即使这并不能阻止列表项可点击。有人有替代解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-30T20:03:00.373

在您的自定义 ArrayAdapter 中使用 isEnabled 函数返回 false：

```
@Override
public boolean isEnabled(int position) {
    return false;
} 
```

总是为我工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-08T22:58:22.760

一切变得更容易！list.setEnabled(假)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-30T19:58:22.027

您可以按所示设置空视图，它将自动处理：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:paddingLeft="8dp"
         android:paddingRight="8dp">

     <ListView android:id="@android:id/list"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="#00FF00"
               android:layout_weight="1"
               android:drawSelectorOnTop="false"/>

     <TextView android:id="@android:id/empty"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="#FF0000"
               android:text="No data"/>
 </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-20T13:05:32.733

尝试在 ListView 上设置这两个属性：

```
android:listSelector="@android:color/transparent" 
android:cacheColorHint="@android:color/transparent" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-15T12:04:52.267

为该列表创建适配器，并覆盖此方法

```
public boolean isEnabled(int position); 
```

然后`false`在您要禁用点击时返回

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T19:58:33.260

也许您可以使用 if 语句来检查 OnClick 中列表视图条目的内容，如果它包含“无数据”则什么也不做，否则照常执行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-19T06:12:04.400

我确实根据我的要求喜欢这个希望它可以帮助你一些如何

```
@Override

public boolean isEnabled(int position) {
        if(data.get(position).isClickable==false)
        {
            return false;
        }
        return super.isEnabled(position);
    } 
```

# modulo - 为较大的 n (10^9) 值计算 nCr mod m (n 选择 r)

> ID：13146654
> 
> 赞同：5
> 
> 时间：2012-10-30T19:53:53.287
> 
> 标签：modulo, ncr

现在 CodeSprint 3 结束了，我一直想知道如何解决这个问题。对于较大的 r 和 n (0<=n<=10^9 ; 0<=r<=n)，我们需要简单地计算 nCr mod 142857。我使用了一种递归方法，它通过 min(r, nr) 迭代来计算组合。事实证明这还不够有效。我尝试了几种不同的方法，但它们似乎都不够有效。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T17:52:14.493

For non-prime mod, factor it (142857 = 3^3 * 11 * 13 * 37) and compute C(n,k) mod p^q for each prime factor of the mod using the general Lucas theorem, and combine them using Chinese remainder theorem.

For example, C(234, 44) mod 142857 = 6084, then

*   C(234, 44) mod 3^3 = 9
*   C(234, 44) mod 11 = 1
*   C(234, 44) mod 13 = 0
*   C(234, 44) mod 37 = 16

The Chinese Remainder theorem involves finding x such that

*   x = 9 mod 3^3
*   x = 1 mod 11
*   x = 0 mod 13
*   x = 16 mod 37

The result is x = 6084.

## Example

C(234, 44) mod 3^3

First convert n, k, and n-k to base p

n = 234_10 = 22200_3

k = 44_10 = 1122_3

r = n-k = 190_10 = 21001_3

Next find the number of carries

```
e[i] = number of carries from i to end
e   4 3 2 1 0
        1 1
r   2 1 0 0 1
k     1 1 2 2
n   2 2 2 0 0 
```

Now create the factorial function needed for general Lucas

```
def f(n, p):
    r = 1
    for i in range(1, n+1):
        if i % p != 0:
            r *= i
    return r 
```

Since q = 3, you will consider only three digits of the base p representation at a time

So

```
f(222_3, 3)/[f(210_3, 3) * f(011_3, 3)] *
f(220_3, 3)/[f(100_3, 3) * f(112_3, 3)] *
f(200_3, 3)/[f(001_3, 3) * f(122_3, 3)] = 6719344775 / 7 
```

Now

```
s = 1 if p = 2 and q >= 3 else -1 
```

Then

```
p^e[0] * s * 6719344775 / 7 mod 3^3
e[0] = 2
p^e[0] = 3^2 = 9
s = -1
p^e[0] * s * 6719344775 = -60474102975 
```

Now you have

```
-60474102975 / 7 mod 3^3 
```

This is a linear congruence and can be solved with

```
ModularInverse(7, 3^3) = 4
4 * -60474102975 mod 27 = 9 
```

Hence C(234, 44) mod 3^3 = 9

# javascript - 函数运行多次的结果是否被缓存？

> ID：13146657
> 
> 赞同：0
> 
> 时间：2012-10-30T19:54:10.263
> 
> 标签：javascript, performance, caching

在 JavaScript 中，我有一个带有数组的对象，以及一个获取该数组的切片并与另一个数组连接的方法。

如果该方法在同一个函数中运行多次以始终返回相同的值，那么第一次运行后性能是否会更快（由于结果将缓存在 CPU 缓存中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:00:56.770

我想这个问题的一般答案是否定的！JavaScript 中没有缓存，也没有您可以使用 JavaScript 控制的 CPU 缓存。如果您需要缓存某些内容/提高性能，我将不得不自己编程。

看这个小例子：http: [//jsperf.com/cachingjq](http://jsperf.com/cachingjq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:58:28.970

当然，没有是唯一的答案。因为函数的目的是取一些参数并返回一个值。每次调用函数时，所有参数都可能不同，即使它们相同，结果也可能不同，如果调用函数并且每次返回相同结果时也会发生事件，因为它可能会执行操作或导致在其他地方进行一些修改，由解析器缓存结果将是一个错误的想法。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:03:33.210

也许。

这里有很多级别的缓存可供查看。仅您的处理器就有多个缓存。但是，基本上，您根本无法对这些说太多。它们可能具有不同的大小，例如您在此期间所做的其他事情以及功能的持续时间都会影响这一点。还应该注意的是，这在 Javascript 中称为函数调用的级别上不起作用，而是在低得多的级别上起作用。但是，有时这可能意味着可以从函数的执行时间中节省一些时间。我认为这不太可能或太引人注目，但最后，你真的不能说太多。

最后，还有 javascript 本身。根据标准，它没有这样的缓存。但是，该标准也不禁止奇怪的缓存，所以有一天可能会有一个浏览器这样做（我不相信现在有一个。）

最后，基本答案是：不，不是很明显。但是，由于缓存实际上可能会提高速度，这总是很难说的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:58:36.130

不，您必须手动（或使用框架）记忆结果：[Javascript Memoization Explanation?](https://stackoverflow.com/questions/8548802/javascript-memoization-explanation)

# javascript - 使用 javascript 从不同组中选择所有单选按钮

> ID：13146667
> 
> 赞同：1
> 
> 时间：2012-10-30T19:54:57.307
> 
> 标签：javascript, html, radio-button

我想知道是否有一种聪明的方法可以一次从不同的组中选择所有单选按钮。

这是一个旧网站，所以我不能使用 jquery。

这是我到目前为止得到的。

我将代码放在 codepen 上，对我来说它看起来很简单，但我认为也许有一些最简单的方法可以达到相同的结果。

[代码笔](http://codepen.io/joexadrez/pen/DzctL)

HTML：

```
<form name="form1">
  <input type="radio" name="group1" value="1">Yes<br />
  <input type="radio" name="group1" value="0">No<br />
  <input type="radio" name="group2" value="1">Yes<br />
  <input type="radio" name="group2" value="0">No<br />
  <input type="radio" name="group3" value="1">Yes<br />
  <input type="radio" name="group3" value="0">No
  <br />
  <br />
  <input type="radio" name="group4" value="1" onclick="selectAll(form1)">All Yes<br />
  <input type="radio" name="group4" value="0" onClick="selectAll(form1)" >All No
</form> 
```

JAVASCRIPT：

```
 <script type="text/javascript">
    function selectAll(form1) {

      var check = document.getElementsByName("group4"),
            radios = document.form1.elements;

        if (check[0].checked) {

            for( i = 0; i < radios.length; i++ ) {

                if( radios[i].type == "radio" ) {

                    if (radios[i].value == 1 ) {

                        radios[i].checked = true;
                    }

                }

            }

        } else {

            for( i = 0; i < radios.length; i++ ) {

                if( radios[i].type == "radio" ) {

                    if (radios[i].value == 0 ) {

                        radios[i].checked = true;

                    }

                }

            }

        };
      return null;
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-18T07:31:54.317

试试这个。你需要将当前页面作为参数传递 onclick="selectAll(this).like this

```
<form name="form1">
  <input type="radio" name="group1" value="1">Yes<br />
  <input type="radio" name="group1" value="0">No<br />
  <input type="radio" name="group2" value="1">Yes<br />
  <input type="radio" name="group2" value="0">No<br />
  <input type="radio" name="group3" value="1">Yes<br />
  <input type="radio" name="group3" value="0">No
  <br />
  <br />
  <input type="radio" name="group4" value="1" onclick="selectAll(this)">All Yes<br />
  <input type="radio" name="group4" value="0" onClick="selectAll(this)" >All No
</form>

<script type="text/javascript">
function selectAll( check ) {
    var radio, i=0;
    while( radio=check.form.elements[i++] )
        if( radio.type == "radio" && radio.value == check.value )
            radio.checked = true;
};
</script>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:43:41.563

如果您将 onclick 更改为`selectAll(this)`您可以摆脱这个：

```
function selectAll( check ) {
    var radio, i=0;
    while( radio=check.form.elements[i++] )
        if( radio.type == "radio" && radio.value == check.value )
            radio.checked = true;
}; 
```

# jquery - 使用悬停/淡入淡出折叠菜单

> ID：13146674
> 
> 赞同：1
> 
> 时间：2012-10-30T19:55:24.487
> 
> 标签：jquery, menu, hover

这是我尝试过的：http: [//jsfiddle.net/MRMr4/2/](http://jsfiddle.net/MRMr4/2/)

当然有问题。

如您所见，当我将鼠标移动到正下方显示的部分时，该部分消失了**。**如何更改我的 jQuery，以便仅当鼠标离开 #menu 或 #products 时此*部分*才会*消失*？

```
$('#menu').hover(function(){
    $('#products').fadeTo('fast', 1);
}, function(){
    $('#products').fadeTo('fast', 0);
});

$('#products').mouseover(function(){
    $('#products').show();
}).mouseout(function(){
    $('#products').fadeTo('fast', 0);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:11:46.390

正确的这种方法使用超时来延迟产品窗口的折叠。这将允许您将鼠标从菜单移动到产品窗口，而不会塌陷在您身上……！

```
$('#menu').mouseenter(function() {
    $('#products').fadeIn(100);

    var timeout = null;

    // Set timeout to delay collapse of product window
    $(this).mouseleave(function() {
        timeout = setTimeout(collapse, 300);
    });

    // Cancel the collapse event if product window is entered
    $('#products').mouseenter(function() {
        clearTimeout(timeout);
    }).mouseleave(function(){
        collapse();
    });
});

function collapse() {
    $('#products').fadeOut(100);
} 
```

看看[你更新的小提琴](http://jsfiddle.net/MRMr4/24/)。

# java - 如何从整个内存中撕下（）和设置（）？

> ID：13146676
> 
> 赞同：2
> 
> 时间：2012-10-30T19:55:25.763
> 
> 标签：java, junit, garbage-collection, destructor, finalizer

我的班级中有全局静态注册表，在某些情况下会注册实例。实际上它并不依赖于垃圾收集，但一些功能显然是放在`finalize()`.

在 jUnit 测试期间，我希望测试此功能是如何工作的，但我无法强制调用 GC。我打电话给`gc()`我`tearDown()`

```
@After
public void tearDown() throws Exception {

    log.debug("tearDown()");

    a = null;
    b = null;
    c = null;
    d = null;
    e = null;
    f = null;
    g = null;

    System.gc();

    log.debug("asserting hash size");
    assertEquals(0, Myclass.getRegisterSize());
} 
```

但这无济于事。我在日志中看到断言消息出现在最终确定之前。

是否可以等到所有最终确定发生？

是否有任何其他方法，例如重新启动类加载器或刷新堆或 jUnit 中的某些东西？我的意思是从头开始做所有事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:32:06.710

如果您要覆盖 finalize 为什么不直接调用它。目前[finalize](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#finalize%28%29)受到保护，但您的子类可以将其公开。然后你可以直接调用它并检查那里调用了什么。测试应该是确定性的，因此您希望它每次都运行。依赖垃圾收集器可能会给你的测试带来不一致，因为你不能保证什么/什么时候被调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:28:36.973

不，不可能等待所有最终确定发生。它们可能根本不会发生。当对象被垃圾回收时，Finalize 会运行。有些对象永远不会被收集，例如 Main 类。这不会收集垃圾，因为 JVM 在运行 gc() 之前就退出了。

最好的想法（真的）是添加一个进行清理的方法，然后从您的 JUnit 测试中调用它。而且，如果你真的，真的需要，也可以从 finalize() 开始。但是你永远不能依赖 finalize() 被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:35:01.483

编写测试的第一条规则是编写可测试的代码。定稿很难测试，除非您可以测试设计一个监控定稿*效果的测试。*

通常，您可以相信`finalize()`最终会被调用，因此您可能不需要特别测试此功能，而是测试该方法调用的任何`finalize()`方法。要么这样，要么扩展您的类以允许测试代码注入一些将由该`finalize()`方法修改的对象。

要么就是这样，要么`finalize()`直接从您的测试代码中调用 - 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T20:39:48.840

看起来您正在尝试测试 JVM 的“最终确定”功能 - 您不应该这样做。可以在这里工作 - 将您要测试的代码移动到一个单独的方法并像往常一样编写一个简单的单元测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T20:39:54.223

从发布的代码中，您将 null 设置为对 junit 测试中对象的引用，而不是在运行断言的类上。所以 MyClass 仍然会引用对象。

# silverlight - Silverlight 无法显示 Dropbox 图像

> ID：13146677
> 
> 赞同：0
> 
> 时间：2012-10-30T19:55:41.970
> 
> 标签：silverlight

这就是我在 Silverlight 中设置图像的方式：

```
 Public Sub setImage(ByRef img As Image, ByVal nameWithExtension As String, ByVal uriKind As UriKind)

    If uriKind = System.UriKind.Relative Then
        img.Source = New System.Windows.Media.Imaging.BitmapImage(New Uri("/PortalSilver;component/Images/" & nameWithExtension, uriKind))
    Else
        img.Source = New System.Windows.Media.Imaging.BitmapImage(New Uri(nameWithExtension, uriKind))
    End If

End Sub 
```

我几乎总是使用绝对 URI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:17:23.163

这是 HTTP 和 HTTPS 之间的跨方案限制。幸运的是，Dropbox 允许 HTTP 协议。

# ios - 升级IOS设备到指定版本

> ID：13146679
> 
> 赞同：1
> 
> 时间：2012-10-30T19:55:52.007
> 
> 标签：ios

我想将一些测试设备升级到特定的 iOS 版本（比如 5.0 - 5.2），所以我可以在不同的环境中测试应用程序，但使用 Apple iTunes 只能让我们将设备升级到最新版本（6.0），确实有谁知道有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:58:46.987

您需要下载所需的 .ipsw。通常有一些网站存储它们供用户下载。即：[http ://www.felixbruns.de/iPod/firmware/](http://www.felixbruns.de/iPod/firmware/)

然后您将打开 iTunes 并单击 iOS 设备，然后按“选项”+单击升级 (Mac) 或“SHIFT”+单击升级(PC)。这将允许您选择要安装的 .ipsw。

# java - 如何在增加另一个变量时增加一个变量？

> ID：13146690
> 
> 赞同：1
> 
> 时间：2012-10-30T19:57:12.550
> 
> 标签：java, loops, increment

我正在尝试用 Java 创建一个程序，其中每月服务费是在第 4 次取款后每次取款增加 1 美元（银行账户程序）。我尝试使用循环，但它只是卡住了。

代码：

```
 public void monthlyProcess() {
    int w = getWithdrawals();
    if (w > 4) {
        while(w > 4) {
            serCharge++;
        }
    }
    super.monthlyProcess();
    if(bal <= MIN_BAL) {
        status = false;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T20:09:14.197

在这里，这应该工作。

干杯!

```
public void monthlyProcess() {
    int w = getWithdrawals();
    if (w > 4) {
        serCharge += w - 4;
    }
    super.monthlyProcess();
    if(bal <= MIN_BAL) {
        status = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T20:00:06.953

为什么不只是`surcharge += w-4`？

编辑：

`surcharge += Math.max(w-4,0)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T20:00:33.423

对我来说看起来像是一个不定式循环，但总的来说我认为你完全不需要一个循环：

```
 public void monthlyProcess() {
    int w = getWithdrawals();
    if (w > 4) {
           while(w > 4) {
            serCharge++;
            w--;
         }

    }
    super.monthlyProcess();
    if(bal <= MIN_BAL) {
        status = false;
    }
} 
```

应该这样做

你得到了不定式循环，因为你没有对 w 变量做任何事情，它总是大于四，所以循环永远不会中断。如果确实如此，无论如何您最终都会收取巨额服务费，因为它会因为不定式循环而不断增加

****“一个程序员出去喝牛奶，他的妻子打电话给他说，‘你出去能不能拿些鸡蛋’……他再也没有回来”****

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T20:04:28.630

到目前为止，其他答案正确地指向您完全摆脱`while`循环，但为了完整起见，这是一个保持该循环的解决方案：

```
public void monthlyProcess() {
    int w = getWithdrawals();
    if (w > 4) {
        while(w > 4) {
            serCharge++;
            // make sure you update the value of w, 
            // otherwise you'll be stuck in an infinite loop!
            w--; 
        }
    }
    super.monthlyProcess();
    if(bal <= MIN_BAL) {
        status = false;
    }
} 
```**

# less - 更少的 CSS：& 具有多个类的反向父级？

> ID：13146694
> 
> 赞同：4
> 
> 时间：2012-10-30T19:57:31.800
> 
> 标签：less

这是我第一次发现 & 父选择器非常有用，因此我不需要重新定义父选择器来修改子元素。

当然，这实际上用 LESS 很容易，但我不得不问！

```
<div id="skrollr-body" class="nonav">
    <div class="skrollable">

    </div>
</div>

#skroller-body {
    .skrollable {
        margin-top:40px;

        .nonav & {
            // this parent selector lets me modify 
            // .skrollable without duplicating it
            margin-top:0px;

        }
    }
} 
```

的输出`.nonav &`是 `.nonav #skroller-body .skrollable`

我想知道我是否可以在`#skroller-body.nonav .skrollable`没有额外 HTML 标记（包装器`div.nonav`）的情况下以某种方式获得？

目前我只会复制父母

```
#skrollr-body {
    margin-top:40px;
    left:0;
    width:100%;

    .skrollable {
        margin-top:40px;
        position:fixed;
        z-index:100;
        .skrollable {
            position:absolute;

            .skrollable {
                position:static;
            }
        }
    }
    &.nonav {
            .skrollable {
                 margin-top:0px;
            }
    }
} 
```

或者保存冗余输出；

`#skroller-body.nonav .scrollable { margin-top:0px; }`

但这里的重点是*易于维护和阅读*的 CSS 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T20:03:10.443

[文档告诉我们：](http://lesscss.org/features/#parent-selectors-feature)

> 运算符表示嵌套规则的`&`父选择器，最常用于将修改类或伪类应用于现有选择器时

所以：

```
#skroller-body {
        &.nonav {
            .skrollable {
                // stuff
            }
        }
    }
} 
```

# c# - 动态级联下拉菜单

> ID：13146699
> 
> 赞同：0
> 
> 时间：2012-10-30T19:57:59.520
> 
> 标签：c#, asp.net, drop-down-menu

我有两个下拉菜单

1.  类别
2.  子类别

如果选择了一个类别，那么第二个下拉列表应该会自动更新，所以我在下面为第一个下拉列表编写了以下代码：

```
public void bindcategory()
{         
    DataTable dt = new BALCate().GetCate();        
    DropDownList dropdownlist = new DropDownList();
    foreach (DataRow dr in dt.Rows)
    {
        ListItem listitem = new ListItem();
        listitem.Text = dr["cate_name"].ToString();
        dropdownlist.Items.Add(listitem);            
    }
    cate_search.Controls.Add(dropdownlist);
} 
```

但是编写第二个下拉代码会出现一些错误，并且也很困惑**如何获得第一个下拉选择值，因为在 bindcategory() 块内声明了第一个下拉列表，这就是它无法在其他块中访问的原因。**那么我该怎么做呢？

```
public void bindsubcategory()
{
     //error (selected cate_id from 1st dropdown cant accessed due to scop problem)
     DataTable dt = new BALCate().GetSubCate(   //some cate_id   ); 

     // what should the code here?
} 
```

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:09:49.550

你缺少一些东西。请参阅下面的示例代码

```
public void bindcategory()
{         
    DataTable dt = new BALCate().GetCate();        
    DropDownList dropdownlist = new DropDownList();
    //SET AutoPostBack = true and attach an event handler for the SelectedIndexChanged event. This event will fire when you change any item in the category dropdown list.
    dropdownlist.AutoPostBack = true;
    dropdownlist.SelectedIndexChanged += new EventHandler(dropdownlist_SelectedIndexChanged);
    foreach (DataRow dr in dt.Rows)
    {
        ListItem listitem = new ListItem();
        listitem.Text = dr["cate_name"].ToString();
        listitem.Value= dr["cate_id"].ToString();
        dropdownlist.Items.Add(listitem);            
    }
    cate_search.Controls.Add(dropdownlist);
}

void dropdownlist_SelectedIndexChanged(object sender, EventArgs e){
    //Grab the selected category id here and pass it to the bindSubCategory function.
    bindSubCategory(Convert.ToInt32((sender as DropDownList).SelectedValue)); 
}

public void bindsubcategory(int categoryId)
{
     DataTable dt = new BALCate().GetSubCate(categoryId);
     //Bind this data to the subcategory dropdown list 
} 
```

# objective-c - 如何保证特定委托将处理 RestKit 响应

> ID：13146700
> 
> 赞同：0
> 
> 时间：2012-10-30T19:58:00.557
> 
> 标签：objective-c, asynchronous, delegates, restkit

这个问题是关于将 RestKit 请求包装在自定义对象中，以及我是否可以保证在返回响应时，发送 RestKit 请求的对象也将用作委托。

我正在使用一个深奥的 REST API (Salesforce)，而 RestKit 似乎不能很好地处理 Salesforce 的一些特性——例如，当您调用 Salesforce REST API 时，您可能会返回部分数据集，然后得到一个“nextRecordsUrl”，你必须遵循它才能获得下一个块。其他使用 Salesforce 和 REST 的人也遇到了同样的问题（参考[https://groups.google.com/forum/#!msg/restkit/HJNjB7I6WVM/8u5n7nHoJQUJ](https://groups.google.com/forum/#!msg/restkit/HJNjB7I6WVM/8u5n7nHoJQUJ)）。我创建了一个类来包装对 Salesforce 的调用并自动跟踪这些链接，并正确处理返回的数据集。类实例将自己注册为 REST 调用的委托。

我编写的类本身就很好用（当只有一个实例时），但我将创建其他类并有几个实例需要独立处理它们的数据。我已经通读了文档和代码（这是一次学习经历，我现在只使用 ios 大约一个月了），但我看不出它是否可以保证特定实例会作为其代理响应单独请求，或者它可能会意外获取另一个实例的响应。

例如，假设我有实例 A 和 B，它们都使用 RKObjectLoader 发出请求，并使用`loader.delegate = self;`. 两者同时运行（异步）。这是我看到的潜在流程：

1.  A 的 RKObjectLoader 进行调用，将自己注册为代理以进行响应
2.  RestKit 框架向 A 发送请求
3.  B 的 RKObjectLoader 进行调用，将自己注册为代理以进行响应
4.  RestKit 框架发送对 B 的请求
5.  ... 等待 ...
6.  RestKit 框架得到响应，**并以某种方式确定此响应来自 B 的请求，调用 B 作为委托**
7.  B 委托方法被调用
8.  RestKit 框架得到响应，**并以某种方式确定此响应来自 A 的请求，调用 A 作为委托**
9.  委托方法被调用

我看不出 RestKit 框架如何区分响应和请求，从而确保调用正确的委托实例。换句话说，在我看来，RestKit 可能会得到对请求的响应，然后调用它想要的任何委托……但这似乎违反直觉，而且框架作者似乎非常敏锐。

所以，我的问题：

1.  如果我有一个使用 RKObjectLoader 的类实例并将自己设置为委托，我能否保证在该请求的响应到来时调用它？
2.  您能否指出处理此问题的 RestKit 框架中的实际实现，以便我了解它是如何完成的？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:38:32.857

我还没有收到这个问题的答案，但如果有人有同样的问题并遇到这个问题，答案是：是的，RestKit 似乎确实将正确的委托与传出请求相匹配。

我创建了一个小类（具有调用服务的 (NSString*) 标识符属性，并在委托中打印出带有结果的实例标识符。我确认实例 A 的委托方法正在处理实例 A 的调用，而 B 正在处理B，有几个同时通话。

# python - 返回值帮助 Python

> ID：13146701
> 
> 赞同：1
> 
> 时间：2012-10-30T19:58:12.043
> 
> 标签：python

我无法打印我的一个函数的返回值

```
def readfile(filename):
    '''
    Reads the entire contents of a file into a single string using
    the read() method.

    Parameter: the name of the file to read (as a string)
    Returns: the text in the file as a large, possibly multi-line, string
    '''
    try:
        infile = open(filename, "r") # open file for reading

        # Use Python's file read function to read the file contents
        filetext = infile.read()

        infile.close() # close the file

        return filetext # the text of the file, as a single string
    except IOError:
        ()

def main():
    ''' Read and print a file's contents. '''
    file = input(str('Name of file? '))
    readfile(file) 
```

如何将 readfile 的值保存到另一个变量中，然后打印保存 readfile 返回值的变量的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:25:20.867

这是最简单的方法，我不建议在函数中添加 try 块，因为无论如何你都必须使用它或者返回一个空值，这是一件坏事

```
def readFile(FileName):
    return open(FileName).read()

def main():
    try:
        File_String = readFile(raw_input("File name: "))
        print File_String
    except IOError:
        print("File not found.")

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:00:24.047

你有没有尝试过：

```
def main():
    ''' Read and print a file's contents. '''
    file = input(str('Name of file? '))
    read_contents = readfile(file)
    print read_contents 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:00:39.230

这应该这样做，只需将函数调用分配给一个变量。

但是，如果引发异常，您什么都不会返回，因此该函数将返回`None`。

```
def main():
    ''' Read and print a file's contents. '''
    file = input('Name of file? ')           #no need of str() here
    foo=readfile(file)
    print foo 
```

并在处理文件时使用[`with`](http://preshing.com/20110920/the-python-with-statement-by-example)语句，它负责关闭文件：

```
def readfile(filename):
     try:
        with open(filename) as infile :
           filetext = infile.read()
           return filetext    
     except IOError:
        pass 
        #return something here too 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T20:00:44.143

```
def main():
    ''' Read and print a file's contents. '''
    file = input(str('Name of file? '))
    text = readfile(file)

    print text 
```

# algorithm - 找到所选顶点的最小生成树的算法

> ID：13146710
> 
> 赞同：7
> 
> 时间：2012-10-30T19:58:36.050
> 
> 标签：algorithm, graph, minimum-spanning-tree

可以使用 Prim 算法或 Kruskal 算法来找到一组顶点/节点和边/链接的最小生成树/图。不过，我想要的是一种算法，可以找到这个集合的最小跨度图，但结果图只需要包含任意选择的节点，而不是所有节点。如果结果图包含的节点多于所需的节点，那也没关系。

这样的算法存在吗？在修改图形以仅包含所需节点之后，也许可以只使用 Prim（或 Kruskal）算法？但是，我不确定如何在保持连接性的同时修改图表。

例如，假设我们有一个菱形的起始图（括号中的链接成本）：

```
 A
(2)/ \(1)
  B   C
(2)\ /(5)
    D 
```

现在，我们任意决定只需要节点 A 和 D。如果我们从 A 开始，我们仍然希望它走左边的路径，因为 ((2 + 2) < (1 + 5))。

假设我们稍微修改一下图表：

```
 A
(2)/ \(1) (2)
  B   C ------E
(2)\ /(5)
    D 
```

如果我们决定只需要节点 A、D 和 E，我们就会意识到成本最小的路径不一定是链接最少的路径。取 A--B--D 和 A--C--E 花费 7，但 A--C--D 和 C--E 花费 8。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T20:04:00.173

您要查找的是离散的[Steiner 树](http://en.wikipedia.org/wiki/Steiner_tree_problem)。当图中并非所有顶点都是强制性的，但允许树在可选顶点处分裂时，问题是 NP-hard。

维基百科说（上面链接）这个问题：*据信，通常不能在多项式时间内实现任意好的近似比。有一种多项式时间算法可以找到最小 Steiner 树的因子 1.39 近似值。*

# graph - 大型图形可视化库

> ID：13146716
> 
> 赞同：1
> 
> 时间：2012-10-30T19:59:12.617
> 
> 标签：graph, png, visualization, nodes

我需要在网站中可视化一个非常大的图表（> 100 万），该库应该接收 JSON 并生成一个 png。

我已经用 spfd 尝试了 graphviz，但等待时间太长，用户将无法与 GUI 交互，因此 Cytoscape 或 Gephi 不是一个选项。

另一种选择可能是将 .dot 导出到网络，但我不知道这会有多有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:15:37.557

[http://www.gnuplot.info/](http://www.gnuplot.info/)和[http://dygraphs.com/](http://dygraphs.com/)是我最喜欢的两个网络图表库。绘制一百万个数据点我可能会使用 gnuplot。我会尽可能多地缓存生成的图像，甚至可能批量生成它们，而不是在请求时生成它们。我认为您在尝试通过 JSON 传递数据并尝试呈现图形客户端时会遇到性能问题。

# javascript - 无法使用 jQuery 获取 html 表中的兄弟姐妹值

> ID：13146717
> 
> 赞同：0
> 
> 时间：2012-10-30T19:59:26.380
> 
> 标签：javascript, jquery, html-table, siblings

我有一张 5 x 5 的桌子。每个单元格都是一个 asp.net 文本框。我想用非空文本框获取最后一行的 5 个文本框值。例如：

![在此处输入图像描述](../Images/8ad56660d6d53d4c24d96d0ec2ac319e.png)

这应该得到你好，我的朋友

但是我得到了所有值，但最后一个（ND）。我不知道为什么。这是我的代码：

```
// RIGHT HERE, $(this) referes to the whole table
$(this).find('input[value!=""]')
        // I get the last edited textbox
        .last()
        // Go up to the parent <td>
        .parent('td')
        .siblings('td')
        // I get all my brothers of type input 
        .children(':input')
        .each(function () {
            alert($(this).val());
        }); 
```

我做错了什么但是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:02:43.570

您应该使用`parents()`并搜索`tr`然后在其中的所有`input`内容：

```
$(this).find('input[value!=""]')
       .last()
       .parents('tr')
       .find('input')
       .each(function () {
           alert($(this).val());
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:02:52.947

你可以使用这样的东西..

```
$(this).find('input[value!=""]:last')
       .parents("tr:first")
       .find(":text")
       .each(...); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:14:57.277

你应该做这样的事情

```
$(this).find('tr').filter(function() { // find all trs
    // returns the row if all inputs are filled  
    return $(this).find('input').filter(function() {
        return $(this).val().length > 0
    }).length == 5; // check to make sure row has 5 unempty textboxes
}).last() // get the last tr returned with no empty textboxes
.find('input').each(function() { // find inputs
    console.log($(this).val());
});​ 
```

[http://jsfiddle.net/E5hnA/](http://jsfiddle.net/E5hnA/)

您的问题在于您没有按行过滤..而是找到最后一个未空的文本框..然后从那里开始遍历

```
$(this).find('input[value!=""]')  // find all inputs that are not empty
    .last() // get the last one 
```

那么当最后一行有一个非空文本框的输入时会发生什么？这就是你得到的行。我在我的例子中所做的是。

查找所有行 > 过滤 - 返回填充了所有输入的行 > 获取返回集合中的最后一个 > 然后做任何事情 - 因为现在你有最后一行填充了所有输入

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T20:30:16.673

问题出在您调用时`.siblings()`- 它返回与您当前选择的元素具有相同父级的所有***其他*** 元素。可以通过遍历 DOM 中的另一个步骤然后选择子级来解决该问题，如 @Adrian、@Quintin Robinson、@Sushanth -- 和 @wirey 所示。`<td>``<td>`

我想我会发布一个答案，所以你会有一个解释，因为所有其他答案都解决了你的问题，但没有解释什么是错的。现在这就是我将如何更改您的代码:)

```
$(this).find('input[value!=""]:last')
    .parents('tr')
    .find('td input')
    .each(function () {
        alert($(this).val());
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T20:04:15.147

试试这个

```
$(this).find('input[value!=""]')

        .closest('tr')
        .prev('tr')
        .children(':input')
        .each(function () {
            alert($(this).val());
        }); 
```

# r - 如何在R中为散点图添加平均值？

> ID：13146718
> 
> 赞同：1
> 
> 时间：2012-10-30T19:59:27.307
> 
> 标签：r, regression, scatter-plot, mean

我有以下形式的数据：

```
Num Percent  
5   9.44  
4   19.7  
4   10.64  
4   10.81  
4   10.97  
4   11.35  
3   13.18  
3   24.54  
3   24.99  
3   12.95  
3   13.17  
3   24.29  
3   13.81  
3   13.93  
3   27.87  
3   13.26  
2   41.41  
2   34.19  
2   41.6  
2   19.31  
2   34.4  
2   38.72  
2   18.16  
2   36.28  
2   18.95  
2   18.49 
```

我想绘制数据，以便与'num'（x）和'percent'（y）的图一起，将x轴（2,3,4,5）每个点的平均值添加到绘制了图和基于平均系列的回归线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:15:01.113

调用您的数据框`DF`

```
MeansByNum <- tapply(DF$Percent, DF$Num, mean) #Create an array of means by Num
NewDF <- data.frame(cbind(Num = as.numeric(as.vector(names(MeansByNum))),
                          Percent = as.numeric(MeansByNum)))
plot(Percent~Num, DF)
points(NewDF$Num, NewDF$Percent, col="red")
abline(lm(Percent~Num, NewDF)) 
```

# vba - 创建宏以向上移动列中的数据？

> ID：13146720
> 
> 赞同：4
> 
> 时间：2012-10-30T19:59:35.850
> 
> 标签：vba, excel, excel-2010

我有一张数据混乱的 Excel 表：例如，应该在 AB 列和 AC 列中的数据在 B 列和 C 列中，但在后面的行中。我写了以下内容，分别将数据从 B 和 C 移动到 AB 和 AC：

```
Dim rCell As Range
Dim rRng As Range

Set rRng = Sheet1.Range("A:A")

i = 1

lastRow = ActiveSheet.Cells(Rows.Count, "A").End(xlUp).Row

For Each rCell In rRng.Cells

If rCell.Value = "" Then

    Range("AB" & i) = rCell.Offset(0, 1).Value

    rCell.Offset(0, 1).ClearContents

    End If

    i = i + 1

    If i = lastRow + 1 Then

    Exit Sub

    End If

Next rCell

End Sub 
```

但是，它不能解决数据位于相应行下方的问题，因为它们位于正确的列中。我是 VBA 宏的新手，所以我将不胜感激任何帮助以使数据现在对齐。我尝试切换 Offset 参数 (-1,0) 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:11:30.913

试试这样的东西？

```
For i = Lastrow To 1 Step -1
    ' move data into cell AA from Cell A one row down
    Cells(i, 27).Value = Cells(i + 1, 1).Value
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:53:15.267

您无需遍历范围即可完成您想要做的事情。

试试这个：

```
Sub MoveBCtoAbAcUpOneRow()
    Dim firstBRow As Integer
    Dim lastBRow As Long
    Dim firstCRow As Integer
    Dim lastCRow As Long

    ' get the first row in both columns
    If Range("B2").Value <> "" Then
        firstBRow = 2
    Else
        firstBRow = Range("B1").End(xlDown).Row
    End If
    If Range("C2").Value <> "" Then
        firstCRow = 2
    Else
        firstCRow = Range("C1").End(xlDown).Row
    End If

    ' get the last row in both columns
    lastBRow = Range("B" & ActiveSheet.Rows.Count).End(xlUp).Row
    lastCRow = Range("C" & ActiveSheet.Rows.Count).End(xlUp).Row

    ' copy the data to the correct column, up one row
    Range("B" & firstBRow & ":B" & lastBRow).Copy Range("AB" & firstBRow - 1)
    Range("C" & firstCRow & ":C" & lastCRow).Copy Range("AC" & firstCRow - 1)

    ' clear the incorrect data
    Range("B" & firstBRow & ":B" & lastBRow).ClearContents
    Range("C" & firstCRow & ":C" & lastCRow).ClearContents

End Sub 
```

**笔记：**

*   如果每一列中数据的形状相同，则不需要为每一列查找第一行和最后一行。每个变量只需要一个变量，一个复制操作而不是 2 个。
*   确保将变量声明设置为必需。（工具 -> 选项 -> 需要变量声明）您可能已经这样做了，但我不知道，因为它看起来像您的 Sub 的顶部被截断了。

# java - POI：如何验证范围内的空单元格

> ID：13146732
> 
> 赞同：2
> 
> 时间：2012-10-30T20:00:34.877
> 
> 标签：java, excel, apache-poi

我正在创建一个 Excel 文件，一旦创建和下载，用户就不允许在特定列中放置空单元格（*因为他将使用他输入的信息再次发送它*）。

我正在`POI HSSFDataValidation`使用`setEmptyCellAllowed(false)`.
但是当用户下载文件时，他仍然可以留下空单元格（*在写入一些文本并删除它之后*）。

有什么建议么？

**这是我的代码：**

```
HSSFDataValidation dv = new HSSFDataValidation();
dv.setFirstColumn((short)19);
    dv.setLastColumn((short)19);
    dv.setFirstRow((short)4);
    dv.setLastRow((short)24);
    dv.setDataValidationType(DVConstraint.ValidationType.INTEGER);
    dv.setOperator(DVConstraint.OperatorType.BETWEEN);
    dv.setDataValidationType(HSSFDataValidation.DATA_TYPE_INTEGER);
    dv.setOperator(HSSFDataValidation.OPERATOR_BETWEEN);
    dv.setFirstFormula("0");
    dv.setSecondFormula("1000");
    //dv.setEmptyCellAllowed(true);
    dv.setEmptyCellAllowed(false);
    dv.setShowPromptBox(true);
    dv.setSurppressDropDownArrow(false);
    dv.setErrorStyle(HSSFDataValidation.ERROR_STYLE_STOP);
    //dv.createErrorBox("", "");
    //dv.createPromptBox("", "");
    sheet.addValidationData(dv); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T08:39:44.207

这不是直接回答您的问题，但如果用户将其保留为空白，您可以使用 try 和 catch 块自己在单元格中写入内容：

# cakephp - 如何在 cakePHP 中配置路由进行故障排除

> ID：13146735
> 
> 赞同：0
> 
> 时间：2012-10-30T20:00:38.153
> 
> 标签：cakephp, routes

我在 cakephp 中有一个网络应用程序

我有 2 条路线

```
Router::connect('/', array('controller' => 'custom', 'action' => 'home')); 
```

（这条路线有效，当我转到本地主机时，我看到了正确的页面）

和

```
Router::connect('/custom/*', array('controller' => 'custom', 'action' => 'actionOnHomePage')); 
```

（这条路线不起作用）当我转到 localhost/custom/actionOnHomePage 时，我得到 Page not found 错误。很奇怪，因为我有一个

```
/app/View/Custom/actionOnHomePage - page 
```

我有

```
CustomController::actionOnHomePage 
```

在 apache 错误日志中我看到：

```
[Tue Oct 30 20:53:15 2012] [error] [client 127.0.0.1] File does not exist: /var/www/thundr.it/src/app/webroot/custom, referer: http://localhost/ 
```

所以它指的是错误的目录，因为他正在寻找 webroot。但是怎么解决。。

# java - 为什么我退出应用程序时会出现应用程序崩溃？

> ID：13146739
> 
> 赞同：0
> 
> 时间：2012-10-30T20:00:46.910
> 
> 标签：java, android

我对以下简单代码有疑问。我创建了扩展 SurfaceView 的 GraphicView 类。我在另一个从 onCreate 方法开始的线程上运行它：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate( savedInstanceState );
    GraphicView v = new GraphicView( this );
    Thread thread = new Thread( v );
    thread.start();
    setContentView( v );    
} 
```

我不知道为什么，但是当我关闭我的应用程序时 - 我收到一个错误。我不在平板电脑上使用英文 UI，但我认为在英文上听起来像这样：“应用程序中出现错误”。仅此而已！也许我需要停止线程？我的代码有错误吗？

```
public class GraphicView extends SurfaceView implements Runnable {

    Activity activity;
    SurfaceHolder holder;
    Paint paint;

    public GraphicView( Activity activity ) {

        super( activity );      

        this.activity = activity;

        paint = new Paint(); 
        paint.setColor( Color.YELLOW ); 
        paint.setStyle( Style.FILL ); 

        holder = getHolder();

    }

    @Override
    public boolean onTouchEvent( MotionEvent me ) {
        return false;
    }

    public void run() {

        while ( true ) {

            if ( !holder.getSurface().isValid() ) {
                continue;
            }

            Canvas c = holder.lockCanvas();
            c.drawARGB( 255, 128, 255, 80 );
            holder.unlockCanvasAndPost( c );

        }

    }

} 
```

所以错误是：

```
10-31 00:02:20.124: W/KeyCharacterMap(278): No keyboard for id 0
10-31 00:02:20.124: W/KeyCharacterMap(278): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-31 00:02:21.104: W/dalvikvm(278): threadid=11: thread exiting with uncaught exception (group=0x4001d800)
10-31 00:02:21.124: E/AndroidRuntime(278): FATAL EXCEPTION: Thread-10
10-31 00:02:21.124: E/AndroidRuntime(278): java.lang.NullPointerException
10-31 00:02:21.124: E/AndroidRuntime(278):  at com.example.GraphicView.run(GraphicView.java:192)
10-31 00:02:21.124: E/AndroidRuntime(278):  at java.lang.Thread.run(Thread.java:1096) 
```

GraphicView.java 的第 192 行：

```
c.drawARGB( 255, 128, 255, 80 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:05:08.863

尝试用 while(!yourActivity.isFinishing()) 替换 while(true)

也许更好的是，您应该在 Activity 的 onPause 中打破循环并在 onResume() 中恢复它

# javascript - 设置 DOMElement 边界的最快方法是什么？

> ID：13146746
> 
> 赞同：1
> 
> 时间：2012-10-30T20:02:07.547
> 
> 标签：javascript, performance, dom, browser

目前，要在 DOM 中放置一个绝对元素，我使用：

```
this.myObject.style.left = aValue1 + 'px' ;
this.myObject.style.top = aValue2 + 'px' ;
this.myObject.style.width = aValue3 + 'px' ;
this.myObject.style.height = aValue4 + 'px' ; 
```

有没有更好的（浏览器快速）方法来做到这一点？

另外，也许我应该从 DOM 中删除元素并在之后重新附加？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:48:32.407

# iphone - 通过蓝牙从 iPhone 获取 GPS 到 wifi iPad？

> ID：13146756
> 
> 赞同：0
> 
> 时间：2012-10-30T20:02:46.340
> 
> 标签：iphone, objective-c, ios, ipad

是否可以将 GPS 数据从支持 GPS 的 iPhone 传输到仅支持 WiFi 的 iPad？有没有人可以分享可以做到这一点的示例代码？

如何通过蓝牙从 Android 获取 GPS 数据，然后传输到 wifi iPad？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:06:24.030

是的，但是您需要为两个可以相互通信的设备创建一个应用程序。如果没有自定义应用程序发送数据，您将无法通过 wifi 获取位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:02:01.367

查看 WiTap 示例应用程序。这个应用程序允许两个设备使用 WiFi 找到彼此并相互发送数据。您可以调整此代码，以便一个设备将其获得的位置数据发送到另一台设备，而不是关于哪个矩形被点击的信息。

我没有关于使用 Android 执行此操作的信息。

# android - 是否有任何 Android 视图生命周期的图形表示（状态图）？

> ID：13146765
> 
> 赞同：77
> 
> 时间：2012-10-30T20:03:00.467
> 
> 标签：android, view, lifecycle, representation

[Android Activity 的生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)和[Fragment 的生命周期](http://developer.android.com/guide/components/fragments.html#Lifecycle)我们都知道。但是对于视图有什么等价的吗？

例如，这可能有助于构建自定义视图或深入了解 Android 上非常常见且通常隐藏的图形操作。

提前致谢 ！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-30T20:05:32.620

它不是官方文件，但[**最近**](https://plus.google.com/u/0/115089607132986274709/posts/cT1EuBbxEgN)出现在 Google+ 上。评论也有很好的讨论和一些详细的解释。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-09-23T19:12:05.080

在这里，我创建了扩展 View 的自定义视图。然后在每个方法中写入日志。这里调用方法的顺序：
**运行调试**
时 setOverScrollMode
setOverScrollMode
onFinishInflate
setLayoutParams
getLayoutDirection
requestLayout
hasFocus
hasTransientState
getVisibility
getLayoutDirection
getLayoutDirection
canResolveLayoutDirection
getLayoutDirection
canResolveTextDirection
isLayoutDirectionResolved
isLayoutDirectionResolved
getLayoutDirection
getLayoutDirection
isLayoutDirectionResolved
isTextDirectionResolved
isTextAlignmentResolved
getLayoutDirection
jumpDrawablesToCurrentState
jumpDrawablesToCurrentState
jumpDrawablesToCurrentState
jumpDrawablesToCurrentState
jumpDrawablesToCurrentState
jumpDrawablesToCurrentState
getVisibility
onAttachedToWindow
jumpDrawablesToCurrentState
getBackground
isFocused
isShown on
VisibilityAggregated
refreshDrawableState
drawableStateChanged
onCreateDrawableState
isFocused
hasWindowFocus
getVisibility
onMeasure
getSuggestedMinimumWidthVi
getMinimum
_
_

getSuggestedMinimumWidth
getSuggestedMinimumHeight
getVisibility
getVisibility
layout
isOpaque
onSizeChanged
getBackground
isOpaque
getMatrix
isOpaque
isHardwareAccelerated
getZ
getElevation
getTranslationZ
onLayout
getVisibility
getAnimation
getLayerType
getLayerType
computeScroll
draw
onDraw
dispatchDraw
onDrawForeground
hasOverlappingRendering
dispatchWindowFocusChanged
onWindowFocusChanged
refreshDrawableState
drawableStateChanged
onCreateDrawableState
isFocused
hasWindowFocus

**使用此视图打开活动：**
onScreenStateChanged
getLayoutDirection
getAnimation
getLayerType
getVisibility
getVisibility
getVisibility
layout
getVisibility
dispatchWindowFocusChanged
onWindowFocusChanged
refreshDrawableState
drawableStateChanged
onCreateDrawableState
isFocused
hasWindowFocus

# javascript - 闭包中未定义的变量？

> ID：13146770
> 
> 赞同：3
> 
> 时间：2012-10-30T20:03:20.513
> 
> 标签：javascript, jquery, variables, closures

我有这样的功能：

```
function foo(canvas) {
    canvas.mousedown(function(e) {
        console.log(canvas); //undefined
    });
} 
```

我在页面的某个位置单击鼠标时调用 foo 。

为什么画布未定义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-30T16:46:23.633

在使用之前，调试器可能不会显示闭包中的变量。

考虑这个例子，其中定义了 a 变量但从未使用过：

```
(function() {
  var x = 1;
  $(function () {
    debugger; // debugger stopped here, `x` is `undefined` in Chrome and IE but `1` in Firefox
    console.log("hi");
  }
})(); 
```

除了打印出变量而不是字符串文字之外的相同代码：

```
(function() {
  var x = 1;
  $(function () {
    debugger; // debugger stopped here, all three browsers show `x` as `1`
    console.log(x);
  }
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:46:05.923

问题是这样的：

```
function foo(canvas) {
    canvas.mousedown(function(e) {
        console.log(canvas); //undefined
        //...
        for (var i in array) {
            var canvas = array[i].canvas;
            //...
        }
    });
} 
```

我没有时间调查确切的原因。我的猜测是编译器在匿名函数的开头放置了一个“var canvas”声明，这样在控制台中输出时变量是未定义的。不然还不明白。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-27T18:42:27.510

一旦你给出了整个代码示例，你自己的答案是正确的。您遇到了称为“变量提升”的 Javascript 怪癖。您的代码被解释为：

```
function foo(canvas) {
    canvas.mousedown(function(e) {
        var i, canvas; //variable declarations moved to top of function scope
        console.log(canvas); //undefined
        //...
        for (i in array) {
            canvas = array[i].canvas;
            //...
        }
    });
} 
```

看：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/var#var_hoisting](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/var#var_hoisting)

[http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T08:20:33.793

只想确认在 chrome 中，查理所说的是正确的。在使用调试器语句时，我需要在闭包中使用它之前对有问题的变量进行引用！

# java - Java 代码约定：必须匹配模式 '^[az][a-zA-Z0-9]*$'

> ID：13146771
> 
> 赞同：19
> 
> 时间：2012-10-30T20:03:23.610
> 
> 标签：java, coding-style

我想使用以下常量：

```
final String ADD = "Add text"; 
```

但我的 CheckStyle 工具告诉我“添加”与模式不匹配`'^[a-z][a-zA-Z0-9]*$'.`

谁能告诉我“添加”有什么问题？意味着`'^[a-z][a-zA-Z0-9]*$'`每个名字都必须以低字符开头？难道就没有其他可能了吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-30T20:06:51.517

```
^[a-z][a-zA-Z0-9]*$ 
```

这个正则表达式描述了以小写字母开头的东西，其余部分由大写字母、小写字母和数字组成。（例如：`aVariable`, `variable`, `aNewVariable`, `variable7`, `aNewVariable7`.）

如果您希望您的字段保持不变和静态，请使用：

```
static final String ADD = "Add text"; 
```

否则，使用：

```
final String add = "Add text"; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T20:05:57.753

如果它是你想要的常数，它也应该是`static`

```
static final String ADD = "Add text"; 
```

常量通常使用大写字母，但由于您的变量不是静态的，它不会被解释为常量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-15T10:56:15.953

这个正则表达式表明需要驼峰式，第一个字母很小，然后每个下一个单词都将第一个字母作为大写字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T15:51:48.707

我刚刚遇到了同样的问题，事实证明这是因为我正在研究的 Java 代码库期望对所有变量使用驼峰式大小写作为命名约定。因此，请务必检查您的变量是否根据正则表达式模式命名`^[a-z]([a-z0-9][a-zA-Z0-9]*)?$`。就我而言，我陷入了 Python 模式，并且我的变量被命名`version_regex`为`versionRegex`. 一旦我进行了必要的更正，就不再抛出错误。

# ruby-on-rails - 在字符串中单词的第一个符号之前添加加号，在最后一个之后添加*

> ID：13146774
> 
> 赞同：1
> 
> 时间：2012-10-30T20:03:27.913
> 
> 标签：ruby-on-rails, ruby, map, gsub

我有这样的字符串：

```
Тормозные диски 
```

我怎样才能把它变成

```
+Тормозн* +дис* 
```

现在在 SO 的帮助下，我使用 gsub，但有人说它可以通过 map 来完成。但是怎么做？注意：主要问题是我有西里尔符号......

现在：

```
art_group_search = art_group.gsub(/\b(\w+?)\w{0,2}\b/, '+\1*').mb_chars.upcase.to_s 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:09:28.550

```
"Тормозные диски".split.map {|word| "+" + word + "*"}.join(" ") 
```

要分解该片段：

```
"Your string".split
=> ["Your", "string"]

["Your", "string"].map {|word| "+" + word + "*"}
=> ["+Your*", "+string*"]

["+Your*", "+string*"].join(" ")
=> "+Your* +string*" 
```

# oracle - 需要使用 sql developer 在 oracle db 上按日期计算记录和组计数

> ID：13146782
> 
> 赞同：20
> 
> 时间：2012-10-30T20:04:08.360
> 
> 标签：oracle, count, oracle10g, group-by, oracle-sqldeveloper

我有一张如下表

```
 ID                created    sent    type
-----------------------------------------------------
0001463583000051783  31-JUL-12  1   270
0081289563000051788  01-AUG-12  1   270
0081289563000051792  01-AUG-12  1   270
0081289563000051791  01-AUG-12  1   270
0081289563000051806  01-AUG-12  1   270
0001421999000051824  06-AUG-12  1   270
0001421999000051826  06-AUG-12  1   270
0001464485000051828  06-AUG-12  1   270
0082162128000051862  09-AUG-12  2   278
0082162128000051861  09-AUG-12  2   278
0022409222082910259  09-AUG-12  3   278 
```

我想有以下输出

```
created     Count
---------------------
31-JUL-12   1
01-AUG-12   4
06-AUG-12   3
09-AUG-12   3 
```

在 Oracle 10g 上使用 SQL Developer 完成此任务有多难

我已经尝试了几个查询来生成这样一个表，最后它不会按日期对计数进行分组，而当我们平均每天进行 5000-10000 笔交易时，它只会给我一个计数“1”。我可能过于复杂了。但我想要一些简单的东西，我可以在一个日期范围内每天提取交易量。

我运行查询时当前发生的情况是

```
created     Count
---------------------
31-JUL-12   1
01-AUG-12   1
01-AUG-12   1
01-AUG-12   1
01-AUG-12   1
06-AUG-12   1
06-AUG-12   1
06-AUG-12   1
09-AUG-12   1
09-AUG-12   1
09-AUG-12   1 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-30T20:20:21.943

我设法用这个查询得到了这个结果：

```
select trunc(created), count(*)
from table1
group by trunc(created) 
```

注意`trunc`函数，即使你不显示它，`DATE`数据类型也会保存时间

[这](http://www.sqlfiddle.com/#!4/e455a/3)是一个小提琴

# php - 使用 Ajax 调用在 CodeIgniter 中填充在线用户的 div（每 10 秒更新一次）

> ID：13146783
> 
> 赞同：3
> 
> 时间：2012-10-30T20:04:11.267
> 
> 标签：php, codeigniter, jquery

我需要使用 Ajax 调用每 10 秒用我的数据库中的记录填充一个 div。我知道我必须先创建一个 JSON 对象，然后将它传递给 Ajax 函数。这就是我尝试过的。
**//更新源** 代码如下：

**控制器**

```
<?php
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class HomePage extends CI_Controller {

    public function index()
    {
       $this->load->model('home_page_model');
       $data['query'] = json_encode($this->home_page_model->onlineUsers());
       $this->load->view('homepage', $data);
    }
    public function AjaxUsers()
    {
//When I placed here the following, got an errow about query variable not defined
//the problem is the $data variable which when not loaded with the view
//throws en error. I don't know what to do further...
//$this->load->model('home_page_model');
//$data['query'] = json_encode($this->home_page_model->onlineUsers());

    }
}
?> 
```

**模型**

```
<?php

    class home_page_model extends CI_Model {
        function __construct() {
            parent::__construct();
        }

        function onlineUsers() {
            $this -> db -> select('user_name,status,thumb') -> from('users') -> where('status', 'Online');
            $query = $this -> db -> get();
            if ($query -> num_rows > 0) {
                return $query -> result();

            } else {
                'There are no results';
            }   
        }
    }
    ?> 
```

**最后是我的观点**

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Welcome!</title>
        <link rel="stylesheet" type="text/css" href="<?php echo base_url() ?>css/csustyles.css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="text/javascript">
setInterval(function()
{
$('.user-records').load('<?php echo base_url()?>index.php/HomePage/');
}, 1000);
</script>
</head>
    <body>
        <div id="container">
            <h1>Welcome to CodeIgniter!</h1>

<div id="body">
<div class="user-records"></div>
</div>
    <p class="footer">
    Page rendered in <strong>{elapsed_time}</strong> seconds
    </p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:49:37.850

您只对填充 div 的数据感兴趣，因此没有视图输出的 ajax 控制器是理想的，除非您不想通过某种模板库在 javascript 中解析 json 对象：？

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Ajax_Controller extends CI_Controller{

    public function __construct(){
        parent::__construct();
    }

    public function online_users(){

        //load the model
        //
        $this->load->model('UserModel');

        //grab the data
        $data = &$this->UserModel->usersOnline();

        if(!$data)//expecting array/object or boolean
        {
            echo json_encode(array(
               'error'   =>  1 
            ));
        }

        //send to the browser
        $this->output
             ->set_content_type('application/json')
             ->set_output(json_encode(array(
                 'error' =>  0,
                 'data' =>  $data
             )));
    }

} 
```

-

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class UserModel extends CI_Model{

    public function __construct(){
        parent::__construct();
    }
    /**
     * usersOnline
     * 
     * @return mixed (boolean or array/object)
     * @throws Exception
     */
    public function usersOnline(){

        try
        {

           $data = $this->db
                 ->select('user_name, status, thumb')
                 ->from('users')
                 ->where('status', 'online')
                 ->get();

           if( !$data OR !$data->num_rows > 0)
               throw new Exception('No data found from last request__ ' . __CLASS__ . __METHOD__);

        }
        catch(Exception $e)
        {
            log_message('error', $e->getMessage());
            return false;
        }
        //we must have data?
        return $data;
    }
} 
```

-

```
$route['users-online'] = 'ajax_controller/online_users'; 
```

-

```
<!-- Add this to head section -->
        <script>
            //Assign base_url as a global variable
            var BASEURL = "<?= base_url() ?>";
        </script> 
```

-

```
<div id="usersOnline"></div>

        <script>
            (function($){

                var ajaxRequests = {

                    init : function(){
                        if(document.getElementById('usersOnline'))
                        {
                            this.onlineUsers;
                        }
                    },
                    onlineUsers : function(){

                        var scope = $("#usersOnline");

                        //ajax setup
                        var doAjax = function(div){
                            $.ajax({
                               url : BASEURL + "users-online",
                               type: 'GET',
                               context : div,
                               beforeSend : function(){
                                   $(this).html("<span class='loading-icon'>&nbsp;</span>");
                               },
                               success : function(callback){
                                   if(callback.error == 1)
                                   {
                                       return;
                                   }

                                   //$(this) == context => #usersOnline
                                   //
                                   //obviously the json object needs to be parsed first!!!!!!!
                                   //
                                   $(this).html(callback.data);

                               }
                            });
                        }

                        //run and run
                        window.setInterval(function(){
                            doAjax(scope);
                        }, 1000);
                    }
                }

                //ready?
                $(function(){
                   ajaxRequests.init(); 
                });

            })(jQuery);
        </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T22:07:34.850

您需要制作一个实际输出所需数据的 AJAX 控制器。让我们调用它`ajax_controller`（尽管它也可以是现有控制器中的方法，例如`homepage->online_users_ajax`，它不必*是*单独的控制器）。

然后，您需要使用 Javascript (jQuery) 每 10 秒调用一次新控制器。这是一个没有计时器的 jQuery 代码示例：

```
$('.online-users').load('<?php echo base_url('ajax_controller'); ?>'); 
```

所以，关键`ajax_controller`是渲染内容，jQuery 用渲染的数据填充现有的 div。

# automapper - 如何将字符串文字映射到目标属性

> ID：13146785
> 
> 赞同：73
> 
> 时间：2012-10-30T20:04:21.777
> 
> 标签：automapper, automapper-2

我希望能够使用 automapper 做这样的事情：

```
Mapper.CreateMap<Source, Destination>()
    .ForMember<d => d.Member, "THIS STRING">(); 
```

我希望 d.Member 始终是“这个字符串”，而不是从源模型中的任何特定成员映射。将字符串字段以“THIS STRING”作为其值的源模型也不是一种选择。

AutoMapper 是否以任何方式支持这些类型的东西？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-10-30T20:07:18.900

```
Mapper.CreateMap<Source, Destination>()
    .ForMember(dest => dest.Member, opt => opt.UseValue<string>("THIS STRING")); 
```

从[8.0 版](https://docs.automapper.org/en/stable/8.0-Upgrade-Guide.html?highlight=value#usevalue)开始，您必须使用以下内容：

```
Mapper.CreateMap<Source, Destination>()
    .ForMember(dest => dest.Member, opt => opt.MapFrom(src => "THIS STRING")); 
```

# domain-driven-design - 如何在 DDD 中组织继承对象的聚合？

> ID：13146786
> 
> 赞同：0
> 
> 时间：2012-10-30T20:04:24.180
> 
> 标签：domain-driven-design

假设您正在构建一个域模型并且您有以下要求：

*   会有访问者可以读取数据
*   会有可以读写数据的发布者
*   会有版主可以读取、写入和删除数据

从 OOP 的角度来看，您将创建一个基类，其中包含上述每个“参与者”所共有的所有内容。然后，我将创建子类来表示每个具体类型。我的问题是，在 DDD 世界中，我应该如何安排我的聚合？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:00:15.193

我不会为此使用继承。您的要求只需要一些用户权限支持。这甚至不是 DDD 问题，您所建议的不是聚合，而是大多数实体。

无论如何，关键是您将拥有具有特定权利的权利和组（角色）。当您需要做某事时，您只需检查当前用户的权限，然后继续或禁止。

无论我是否使用 DDD/OOP，我都会使用相同的方法。

# delphi - VirtualStringTree：在 OnBeforeCellPaint 之后修复节点命中框

> ID：13146789
> 
> 赞同：2
> 
> 时间：2012-10-30T20:04:40.730
> 
> 标签：delphi, virtualtreeview, tvirtualstringtree

我的表单上有一个 virtualstringtree 控件，它必须为某些节点显示来自图像列表的图标。这很好用，但是，对于某些节点，它还必须显示与节点和正方形一样高的自定义绘制图标。

我正在使用 OnBeforeCellPaint 事件来绘制这些图像并更改 ContentRect 以适应它在项目中所需的额外空间。

```
ContentRect.Offset(ContentRect.Height + 4, 0); 
```

（+4 与“图标”的文本间距与从图像列表加载的间距相同）

这种方法似乎工作正常，节点绘制正确，选择矩形也是如此。但是，用于单击节点的 hitboxes 似乎没有得到更新。我必须单击原始 ContentRect 来选择节点。

如何更新碰撞箱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:01:27.420

***要避免什么？***

如果要更改节点的大小，请不要修改`ContentRect`in 。`OnBeforeCellPaint`事件中的`ContentRect`矩形`OnBeforeCellPaint`用于修改将渲染单元格的位置。它实际上并没有修改节点的大小。通过该`ContentRect`偏移量，您刚刚将绘画移出节点的*物理*位置，移出可以单击节点的位置。

***如何调整节点高度？***

默认的固定节点高度由`DefaultNodeHeight`属性定义。当你事先不知道你需要的节点高度时，你可以编写`OnMeasureItem`事件的处理程序。您可以在此处修改`NodeHeight`参数值以调整节点的高度。

当您要处理`OnMeasureItem`事件时，请确保将选项包含在`toVariableNodeHeight`选项`TreeOptions.MiscOptions`集中。

***如何调整节点宽度？***

具体控制，节点宽度是通过`TVirtualStringTree`测量节点文本宽度增加2*文本边距（可通过`TextMargin`属性调整）来计算的。在节点文本宽度测量期间，`OnMeasureTextWidth`会触发具有声明`Extent`参数的事件，该参数包含测量的文本宽度。通过修改此`Extent`参数，您将影响节点的整体宽度，因为此事件在内部仅用于此目的。

因此，要增加每个节点的宽度，例如增加 20 个像素，您可以编写以下代码：

```
procedure TForm1.VirtualStringTree1MeasureTextWidth(Sender: TBaseVirtualTree;
  TargetCanvas: TCanvas; Node: PVirtualNode; Column: TColumnIndex;
  const Text: string; var Extent: Integer);
begin
  Extent := Extent + 20;
end; 
```

这是没有和修改文本范围的结果：

![在此处输入图像描述](../Images/dc896234c10cf7410966b2c9f2286117.png)

因为`TVirtualDrawTree`控制是容易得多的情况。它具有`OnGetNodeWidth`事件，用于通过其`NodeWidth`声明的参数指定节点宽度。

# html - iframe 到达页面底部

> ID：13146793
> 
> 赞同：7
> 
> 时间：2012-10-30T20:05:04.260
> 
> 标签：html, iframe, styles, height

有没有办法让`<iframe>`到达的高度正好在页面的底部？使用 很难判断`height:xx%`，可能与浏览器有关。

代码如下：

```
<!DOCTYPE html>
<html>
<body style="margin:0">
<p style="margin:10px"> hello </p>
<iframe src="http://www.weather.com" style="width:100%; height:95%"></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T11:31:03.617

使用JavaScript/jQuery，可以为`IFRAME`元素精确设置正确的维度，无需访问框架本身的DOM（跨域问题），依赖表格或绝对定位（如果框架上方的内容是动态的则无用）高度）：

```
$(function() {
    var aboveHeight = $("#aboveFrame").outerHeight(true);
    $(window).resize(function() {
        $('#frame').height( $(window).height() - aboveHeight );
    }).resize();
}); 
```

示例：http: [//jsfiddle.net/hongaar/jsdYz/](http://jsfiddle.net/hongaar/jsdYz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T00:42:47.523

尽管使用表格进行布局很烦人，但它们仍然是始终如一地处理垂直尺寸的最佳方式。以下仍然显示 iframe 边缘周围的一些白色像素，并且在某些版本的 Firefox 中有一个额外的滚动条，但与我所能达到的一样接近：

```
<!DOCTYPE html>
<html style="padding:0; margin:0; height:100%">
  <body style="padding:0; margin:0; height:100%">
    <table style="border:0; padding:0; margin:0; height:100%; width:100%">
      <tr style="border:0; padding:0; margin:0">
        <td style="border:0; padding:0; margin:0">
          <p style="margin:10px"> hello </p>
        </td>
      </tr>
      <tr style="border:0; padding:0; margin:0">
        <td style="border:0; padding:0; margin:0; height:100%">
          <iframe src="http://www.weather.com" style="border:0; padding:0; margin:0; width:100%; height:100%"></iframe>
        </td>
      </tr>
    </table>
  </body>
</html> 
```

如果您真的想避免使用表格元素，您可能会从带有`display:table`、`display:table-row`和的 div 标签中获得一些吸引力`display:table-cell`，但要为某些浏览器中更烦人的怪癖做好准备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T16:03:53.780

尝试这个...

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body 
      { 
        height: 100%;
        margin:0px;
        padding:0px;    
      } 
    </style>
</head>
<body>
<iframe src="http://www.weather.com" onload="this.height = document.body.offsetHeight;"></iframe>
</body>
</html> 
```

[你可以在这里](http://jsfiddle.net/j7fpq/1/)查看演示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T06:17:07.080

[演示](http://jsfiddle.net/XVVV2/)

```
 <!DOCTYPE html>
    <html>
    <head>
    <style>
    html, body 
    { 
        height: 100%;
        margin:0px;
        padding:0px;    
    } 

    #divHeader
    {
        height:25px;

    }
    #divContent
    {   
    box-sizing:border-box;
    -moz-box-sizing:border-box; /* Firefox */
    -webkit-box-sizing:border-box; /* Safari */
    height:100%;
    width:100%;
      margin-top:-25px;
    padding-top:25px;
    overflow:hidden;    
    }
    iframe
    {
        width:100%;
        height:100%;
    }
    </style>
    </head>
    <body>
    <div id="divHeader">
        header
    </div>
    <div id="divContent">
    <iframe src="http://www.weather.com"></iframe>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T05:27:28.267

如果您的`<p>`标签内容是固定的，那么您可以通过调整和相对的高度来尝试[这种方式](http://jsfiddle.net/SwGnR/4/)..并且您必须保持OR标签高度 100% 否则它将不起作用`<p>``<iframe>``<html>``<body>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T23:19:00.217

你不能。我之前尝试过这个，但是 iframe 存在问题，它将保持这种状态，直到他们找到一种方法来暴露内部 html 文档的高度......遵循标准。如果您删除内部文档的 DOCTYPE，我想您将可以访问它。[使 iframe 适合容器剩余高度的 100%](https://stackoverflow.com/questions/325273/make-iframe-to-fit-100-of-containers-remaining-height)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-03T19:20:25.000

我最近遇到了同样的问题。我相信您想要扩展高度以适应动态加载的内容。这就像做梦一样。:)

```
<!--This script will auto size the height.  Must set the id for it to work.-->      
<script type="text/javascript">
<!--//
 function sizeFrame() {
 var F = document.getElementById("myFrame");
 if(F.contentDocument) {
 F.height = F.contentDocument.documentElement.scrollHeight+30; //FF 3.0.11, Opera 9.63, and Chrome
 } 
 else {
  F.height = F.contentWindow.document.body.scrollHeight+30; //IE6, IE7 and Chrome
 }

 }

 window.onload=sizeFrame; 

//-->
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-04T16:53:03.797

作为 body 元素的子元素的 iframe 与它的父元素的高度为 100%，在你可以制作`iframe`整页之前，你必须声明它的高度`body`并使其也成为整页。

尝试这个。（我认为如果你把你的 CSS 放在一个外部文件中或者只是放在里面会更好`head`）

```
<!DOCTYPE html>
<html>
<head>
<style type='text/css'>
body {height:100%;}
iframe {height:100%;width:100%;}
</style>
</head>
<body style="margin:0">
<p style="margin:10px"> hello </p>
<iframe src="http://www.weather.com"></iframe>
</body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-31T13:13:58.683

```
<!DOCTYPE html>
<html style="height:100%">
<body style="margin:0; >
<p style="margin:10px"> hello </p>
<iframe src="http://www.weather.com" style="width:100%; height:100%"></iframe>
</body>
</html> 
```

好吧，这似乎很棘手，但您必须保持`<html>`OR`<body>`标签高度 100% 才能实现这一点

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-01T18:29:51.087

我一直使用 height:100vh; 为您提供 100% 的视口

# django - 如何克服 Session.get_decoded 哈希检查？

> ID：13146794
> 
> 赞同：2
> 
> 时间：2012-10-30T20:05:06.570
> 
> 标签：django, pickle, django-sessions

对于 Django 会话，在某些情况下，存储在数据库中的编码会话数据无法使用`django.contrib.sessions.models.Session`'`get_decoded`方法进行解码，即它总是会返回一个空字典。

有没有办法解码这些数据？

它依赖于`django.contrib.sessions.backends.base.SessionBase`'s`decode`方法，如果计算的哈希值与预期的哈希值不同（它会引发`SuspiciousOperation`异常），它将返回一个空字典。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:05:06.570

`django.contrib.sessions.models.Session`的`get_decoded`方法依赖于`django.contrib.sessions.backends.base.SessionBase.decode`，如果计算的哈希值与预期的哈希值不同（它引发`SuspiciousOperation`异常），则返回一个空字典，存在 a`ValueError`或 unpickling 异常。它确实会捕获所有异常，但这些是代码可能失败的原因。

因此，将所有这些代码调用包装在一起，除了哈希检查部分，您可以获得所需的内容。下面有一个函数可以为您提供某个会话对象的解码会话数据，前提是它存在。

```
import base64
import pickle

from django.contrib.sessions.models import Session
from django.utils.encoding import force_unicode

def decode_session_data(session_key):
    """Decode the data in a session object stored under ``session_key``.

    :param session_key: e.g. ``'1180b5ed42c2a3a5f217e35b755865da'`` 
    :return: decoded session data
    :rtype: :class:`dict`

    """
    session_obj = Session.objects.get(pk=session_key)
    session_data = force_unicode(session_obj.session_data)
    encoded_data = base64.decodestring(session_data)
    hash, pickled = encoded_data.split(':', 1)

    return pickle.loads(pickled) 
```

来源：[https](https://gist.github.com/3982485) ://gist.github.com/3982485 ，基于[Django 项目](https://www.djangoproject.com/)的源代码。

# jquery - jquery航点突出导航

> ID：13146797
> 
> 赞同：3
> 
> 时间：2012-10-30T20:05:12.527
> 
> 标签：jquery, navigation, jquery-waypoints

我正在关注有关使用 jQuery 航点创建带有粘性标题的单页网站的教程。

[http://webdesign.tutsplus.com/tutorials/javascript-tutorials/create-a-sticky-navigation-header-using-jquery-waypoints/](http://webdesign.tutsplus.com/tutorials/javascript-tutorials/create-a-sticky-navigation-header-using-jquery-waypoints/)

一切都很好，直到我对我的 HTML 结构做了一点改动。

我将导航放置在附加到航点的“关于”部分下。在我的导航下，还有一个没有附加到航路点的部分，因为它的内容仍然属于我的“关于”部分。

然后是附加到航点的另外两个部分。

我的粘性功能和滚动功能工作正常，但是突出显示 about 部分存在问题，因为我将导航放在了`id="about"`

我在这里有一个 jsFiddle：http: [//jsfiddle.net/8GENv/](http://jsfiddle.net/8GENv/)

我很确定问题出在以下代码中：

```
var sections = $(".waypointsec");
var navigation_links = $(".navigation .innernav ul li a");

sections.waypoint({
    handler: function(event, direction) {

        var active_section;
        active_section = $(this);
        if (direction === "up") active_section = active_section.prev();

        var active_link = $('.navigation .innernav ul li a[href="#' + active_section.attr("id") + '"]');
        navigation_links.removeClass("selected");
        active_link.addClass("selected");

    },
    offset: '60%'
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:03:25.153

我发现对于粘性导航，航点可能有点“笨拙”，并且所选状态总是有点关闭，尤其是在所有不同的屏幕尺寸选项周围。

这个插件更好，更容易使用，并且有很好的文档记录。它是用普通的旧 javascript 编写的，你可以用 css 做一些非常酷的东西！

[https://github.com/Prinzhorn/skrollr](https://github.com/Prinzhorn/skrollr)

一个例子可能是这样的

```
<div id="something" data-0="position:static;" data-110="position:fixed;top:-110px;left:0;width:100%;"></div>
<script type="text/javascript" src="<?php bloginfo('template_url');?>/js/skrollr.min.js"></script>

<script type="text/javascript">
//http://detectmobilebrowsers.com/ + tablets
(function(a) {
    if(/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|playbook|silk/i.test(a)
    ||
    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))
    {
        //Add skrollr mobile on mobile devices.
        document.write('<script type="text/javascript" src="<?php bloginfo('template_url');?>/js/skrollr.mobile.min.js"><\/script>');
    }
})(navigator.userAgent||navigator.vendor||window.opera);
</script>

<!--[if lt IE 9]>
<script type="text/javascript" src="<?php bloginfo('template_url');?>/js/skrollr.ie.min.js"></script>
<![endif]-->

<script type="text/javascript">
window.onload = function() {
    skrollr.init({
        forceHeight: false
    });
}
</script> 
```

# java - SWT - 打开/处理外壳 - 一般实践

> ID：13146799
> 
> 赞同：0
> 
> 时间：2012-10-30T20:05:22.387
> 
> 标签：java, swt, dispose, jface

我正在寻找处理壳的一般做法。

主应用程序菜单 单击 执行以下序列

DialogHandler Class =（执行我的应用程序基 GUI 类）

```
 @Override 
 public Object execute(final ExecutionEvent event) throws ExecutionException {
  if (dlg == null){
     try {
        AbstractAIFApplication app = AIFDesktop.getActiveDesktop().getCurrentApplication();
        session = (TCSession) app.getSession();
        TCUserService userService = session.getUserService();
        AplotVersion.negotiateVersion(userService);
        AplotQueryCapabilities.initialize(userService);
        shell = HandlerUtil.getActiveWorkbenchWindowChecked(event).getShell();
        dlg = new AplotBaseDialog(shell, session); 
     }
     catch (Exception ex) {
        MessageBox.post(HandlerUtil.getActiveWorkbenchWindowChecked(event).getShell(), ex, true);
     }
  }
  dlg.open();
  return null;
}// end execute() 
```

问题。由于我在 DialogHandler 中打开 Dialog，我是否必须在该类中处理它？

```
while(!shell.isDisposed()){
    if(!display.readAndDispatch())
      display.sleep();
  }
  display.dispose(); 
```

我的 GUI 基类 AplotBaseDialog =（扩展 TitleAreaDialog）

构造函数从 DialogHandler 类接收 Shell。

问题：我是否将 While(!shell.isDisposed()) 代码放在此类中？

我还从 AplotBaseDialog 类中的按钮打开了几个对话框。

```
 private void showPDFCreateDialog() {
   pdfDialog = new AplotCreatePDFDialog(this, getShell(), session);
   pdfDialog.open();
   pdfDialog.getShell().setSize(700, 400);
 } 
```

问题：我是否必须在每个对话框类中包含 dispose 代码，或者在关闭按钮代码中包含 dispose() 是否足够好？

问题：这是创建和打开对话框的正确方法吗？

问：现在，我没有在我的应用程序代码中的任何地方设置显示。

```
Display display = Display.getDefault(); 
```

我只是将一个 Shell 从父对话框传递给子对话框，并在需要时使用 asyncExec。

```
Display.getDefault().asyncExec(new Runnable() {
  public void run() {
  }
} 
```

问题：我是否需要在我的应用程序代码中的某处使用 while(!shell.isDisposed()) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:31:00.227

JFace`Dialog`为您执行以下功能。除非您想构建自己的对话框而不是扩展 JFace，否则您不需要做任何事情`Dialog`

```
//this is for keep reading events from event table
while(!shell.isDisposed()){
        if(!display.readAndDispatch())
          display.sleep();
      }
      display.dispose(); 
```

# ajax - YouTube API 基于浏览器的上传，带有 Ajax 的进度条

> ID：13146803
> 
> 赞同：1
> 
> 时间：2012-10-30T20:05:48.670
> 
> 标签：ajax, mootools, youtube-api

我正在尝试使用 YouTube API 来执行基于浏览器的上传，但也使用 Ajax 来显示进度条。

我从这里开始： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading)

如果我只使用基本的 HTML 表单帖子，它可以 100% 工作。

```
 <form id="frmYouTube" enctype="multipart/form-data" method="post" action="https://uploads.gdata.youtube.com/action/FormDataUpload/YOUTUBE_URL_HERE?nexturl=https%3a%2f%2fdomain%2fpageafter%2fVideoUploadDone%3fid2%3dLOCAL_ID">
    <table>
        <tr>
            <td><input type="file" name="file" /></td>
        </tr>
        <tr>
            <td>
                <input type="hidden" name="token" value="YOUTUBE_TOKEN_HERE" />
                <input type="submit" value="Upload" />
            </td>
        </tr>
    </table>
    </form> 
```

但是，如果我尝试添加一些 Javascript，我会遇到问题。我还包括 MooTools 和[http://mootools.net/forge/p/form_upload](http://mootools.net/forge/p/form_upload)中的 Request.File 类。

这是代码的简化版本：

```
var yt = $('frmYouTube');

var ytDone = function () {

     // Code to display: 'Video upload complete. Return to <a href="/Acount">your account</a>.';
};

var ytProgress = function (event, xhr) {

    var loaded = event.loaded, total = event.total;

    // Code to display: 'Uploading... ' + (parseInt(loaded / total * 100, 10)) + '%';
};

yt.addEvents({ 'submit': function (ev) {

    ev.stop();

    var rf = new Request.File({
        url: yt.get('action'),
        onProgress: ytProgress,
        onFailure: function (xhr) {

            ytError('Upload Failed (1).');
        },
        onCancel: function () {
            ytError('Upload Canceled.');
        },
        onException: function () {
            ytError('Upload Failed (2).');
        },
        onSuccess: ytDone
    });

    yt.getElements('input').each(function (field) {

        if (field.files) {

            rf.append(field.get('name'), field.files[0]);
        } else {

            rf.append(field.get('name'), field.get('value'));
        }
    });

    rf.send();
}
});
</script> 
```

此时文件已成功上传，YouTube 将 302 重定向返回到我的“nexturl”，但由于跨域规则不遵循重定向，我无法使用 Javascript 访问位置标头。

我见过一些涉及 iframe 的解决方案，但如果你想要一个进度条，那就行不通了。有没有人想出一个解决方法来将基于浏览器的上传到 YouTube 并显示一个进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T15:32:01.833

基于浏览器的上传方法不支持 CORS。[此处](http://code.google.com/p/gdata-issues/issues/detail?id=4050)报告了该问题。V3 支持 CORS，但那里没有基于浏览器的上传方法。只是某种 oauth 的东西。基本上，您需要让用户注册 youtube，然后返回您的网站/应用程序，授予您权限并将视频上传到他的 youtube 帐户，然后上传视频。您无法允许浏览器客户端使用 V3 api 在您的 youtube 帐户上上传视频。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T20:32:19.497

YouTube 数据 API 确实支持 CORS。确保您的客户端 ID 设置为允许来自您的站点的跨源。为此，请访问[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

另请注意，我们刚刚推出了一个新的 API，因此请尝试在[https://developers.google.com/youtube/v3/docs/videos/insert上传视频](https://developers.google.com/youtube/v3/docs/videos/insert)

您还可以尝试 YouTube 上传小部件的一件事。它将为您处理上传，并允许您收听事件以了解上传进度。 [https://developers.google.com/youtube/youtube_upload_widget](https://developers.google.com/youtube/youtube_upload_widget)

# javascript - 选择 jQuery 中没有文本节点的元素

> ID：13146805
> 
> 赞同：7
> 
> 时间：2012-10-30T20:06:00.110
> 
> 标签：javascript, jquery

我有这个 HTML 结构：

```
<div class="article-body">
<p>
    <a href="http://www.example.com">My Link</a>
Lorem Ipsum Dolor Sit amet.

</p>
<p><a href="http://www.example.com">Link that I must select.</a></p>
</div>​ 
```

我必须将一个类应用于第二个链接，即没有文本节点的链接。我尝试了“p:empty a”和“p > a:only-child”，但它们不起作用......有一种方法可以使用 jQuery 选择它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T20:11:51.210

不能用选择器做，但你可以[`filter()`](http://api.jquery.com/filter/)用来执行自定义选择：

```
$('p').filter(function(){
    var $clone = $(this).clone();
    $clone.children().remove();
    return !$clone.text();
}).addClass("red");​ 
```

在这里，有一个小提琴：http: [//jsfiddle.net/adrianonantua/5daYT/](http://jsfiddle.net/adrianonantua/5daYT/)

:)

**更新**

[`end()`](http://api.jquery.com/end/)根据@dfsq 的建议，我们可以在一行中利用并制作相同的逻辑：

```
$('p').filter(function(){
    return !$(this).clone().children().remove().end().text();
}).addClass("red");​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T20:14:34.553

另一个解决方案[`filter()`](http://api.jquery.com/filter/)：

```
$("p").filter(function() {
    return $(this).contents().filter(function() {
        return this.nodeType == 3 && $.trim(this.nodeValue) != "";
    }).length == 0;
}).addClass("myClass")​; 
```

**演示：http:** [//jsfiddle.net/wyvLC/](http://jsfiddle.net/wyvLC/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T20:31:59.180

This will be a very fast solution. No cloning needed:

```
$("p > a").filter(function(i, el) {
    return !el.previousSibling && !el.nextSibling;
}).parent(); 
```

* * *

Or this:

```
$("p").filter(function(i, el) {
    return el.firstChild && 
           el.firstChild === el.lastChild && 
           el.firstChild.nodeName.toUpperCase() === "A";
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T20:14:15.013

这应该可以工作[http://jsfiddle.net/nvass/](http://jsfiddle.net/nvass/)：

```
$("p").filter(function(){
    return $.grep(this.childNodes,function(node){
         return node.nodeType === 3 && node.nodeValue.replace(/(\s|\n|\r|\t)/g,"") !== "";
    }).length === 0;
}).css("background-color","green"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T20:23:30.900

# mysql - MySQL：停止使用方案（数据库）？

> ID：13146809
> 
> 赞同：8
> 
> 时间：2012-10-30T20:06:15.510
> 
> 标签：mysql

如何停止使用数据库？

要启动 mysql，您可以使用：

```
mysql -u root -pXXXX<ENTER> 
```

此时，没有选择任何数据库。我们称之为

*状态 1*

选择（或使用）数据库：

```
use "MyDB";
.....My operations or queries 
```

现在，我想返回*状态 1*（没有选择任何数据库）。我怎么能这样做？我可以选择另一个数据库，但我不想这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T20:25:15.087

Accidentally, I got the answer. Is not commands or statement.

```
CREATE DATABASE UnselectingDB;
USE UnselectingDB;
DROP DATABASE UnselectingDB; 
```

Best Regards,

You can test that with (to know what is the selected DB)

```
SELECT DATABASE(); 
```

**Step by step**...

```
mysql -u root -pXXXX<ENTER> 
```

At this step you can check that you don't have any selected Database, the answer is *NULL*

```
SELECT DATABASE(); 
```

Now you can to select any Database and make your operations

```
USE mysql;
/*your aditional operations*/ 
```

You can check wich is the selected Database, for this example is *mysql*

```
SELECT DATABASE(); 
```

Now, we need to create other database, not to delete any that is useful.

```
CREATE DATABASE StopUsingAnyDB; 
```

Later, We need to select the recently created database.

```
USE StopUsingAnyDB; 
```

You can check wich is the selected Database, for this example is *StopUsingAnyDB*

```
SELECT DATABASE(); 
```

Last. We delete the selected database

```
DROP DATABASE UnselectingDB; 
```

You can check wich is the selected Database, for this example is *NULL* again.

```
SELECT DATABASE(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T20:15:21.970

你所要求的是不可能的。返回该状态的唯一方法是断开连接然后重新连接。

如果您只是想从当前数据库切换，您可以切换到系统数据库，例如内部“mysql”数据库：

```
use mysql 
```

或者您可以创建一个空数据库并使用它：

```
create database empty;
use empty 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T20:13:17.380

试试`prompt`。

来自 MySQL 手册：

> 将 mysql 提示重新配置为给定的字符串。可以在提示中使用的特殊字符序列将在本节后面介绍。如果您指定`prompt`不带参数的命令，mysql 会将提示重置为默认值`mysql>`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-27T10:15:39.280

[艾克沃克的答案](https://stackoverflow.com/a/13146930)在我认为的正确轨道上。

创建一个交换空间，*或者*你可以停止服务器（停止进程）并重新启动它。这违背了服务器的目的——但它肯定会在你想要它的地方结束，而没有“使用”的数据库。

我确定你知道这一点，但我在这里提一下以防万一。你永远不会知道。有人可能不知道有可能做到这一点。

# c# - C++/Cli 将回调添加到托管操作 目的

> ID：13146810
> 
> 赞同：4
> 
> 时间：2012-10-30T20:06:19.350
> 
> 标签：c#, delegates, c++-cli

在 ac# 类中，我有以下内容：

```
public class Myclass
{
  public Action<string, string> MyDelegate { get; set;}

  public void CallingAction()
  {
    MyDelegate("string1", "string2");
  }
} 
```

在 C++/Cli 中，我想向委托添加一个新函数。

```
public ref class MyCliClass
{
  public :
  MyCliClass()
  {
    MyClass^ myClassInstance = gcnew MyClass();
    MyCliDelegate^ myDelegateInstance = gcnew MyCliDelegate(this, &MyCliClass::FunctionToCall);
    myClassInstance->MyDelegate += myDelegateInstance;
  }

  void FunctionToCall(string^ string1, string^ string2)
  {
    // Some stuff to do
  }

  private :
  void delegate MyCliDelegate(string^,string^);
} 
```

这给了我错误：

```
error C3365: operator '+' : differing operands of type 'System::Action<T1, T2> ^' and 'MyCliClass::FunctionToCall^' 
```

如何简单地将“FunctionToCall”添加到 C# 委托中，以便在调用“CallingAction”时，也调用“FunctionToCall”？

谢谢

**编辑/回答** 这是新的 Cli/类

```
public ref class MyCliClass
{
  public :
  MyCliClass()
  {
    MyClass^ myClassInstance = gcnew MyClass();
    myClassInstance->MyDelegate += gcnew Action<string^,string^>^(this, &MyCliClass::FunctionToCall);
  }

  void FunctionToCall(string^ string1, string^ string2)
  {
    // Some stuff to do
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:08:03.000

等效的委托类型是不可转换的。
您需要将您的委托实例声明为`Action<string^, string^>^`.

# linux - linux bash用可以包含任何字符的未知文本替换占位符

> ID：13146826
> 
> 赞同：1
> 
> 时间：2012-10-30T20:07:24.273
> 
> 标签：linux, bash, replace

如果我想用另一个可以包含任何字符的字符串替换占位符`{{VALUE}}`，那么最好的方法是什么？

`sed s/{{VALUE}}/$(value)/g`如果`$(value)`包含斜杠，使用可能会失败...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:15:36.210

```
oldValue='{{VALUE}}'
newValue='new/value'
echo "${var//$oldValue/$newValue}" 
```

但 oldValue 不是正则表达式，而是像 glob 模式一样工作，否则：

```
echo "$var" | sed 's/{{VALUE}}/'"${newValue//\//\/}"'/g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:04:04.063

问的问题基本上重复 [了如何在bash中的用户输入变量中转义正斜杠？](https://stackoverflow.com/questions/12965857), [为 sed 搜索模式转义字符串](https://stackoverflow.com/questions/407523), [在 makefile 中使用 sed; 如何转义变量？](https://stackoverflow.com/questions/3201226), [在 sed replace](https://stackoverflow.com/questions/5864146)和[许多其他](https://www.google.com/search?num=50&hl=en&q=site:english.stackexchange.com/questions+correct+to+use+this+%22technique%22+on+variables+-newest+-recently#q=site:stackoverflow.com/questions+sed+slashes+-newest+-recently&hl=en&prmd=imvns&ei=RHyRUKakMKq5igKJsID4Dg&start=0&sa=N&bav=on.2,or.r_gc.r_pw.r_qf.&fp=b834a242fa531d3a&bpcl=36601534&biw=1053&bih=579)问题中使用斜线。“使用不同的分隔符”是通常的答案。Pianosaurus 的[回答](https://stackoverflow.com/a/2705678)和 Ben Blank 的[回答](https://stackoverflow.com/a/407649/837847)列表字符（反斜杠和 & 符号）需要在 shell 中转义，除了用作备用分隔符的任何字符。但是，它们没有解决如果您的“可以包含任何字符的字符串”包含双引号时会出现的引用问题。同类型的问题会影响`${parameter/pattern/string}`上一个答案中提到的 shell 变量扩展。

除了上面提到的几个问题之外，还有一些其他问题建议使用 awk，这通常是处理比 sed 更复杂的更改的好方法。还要考虑 perl 和 python。除了单引号和双引号字符串外，python 还具有`u'...'`unicode 引号、`r'...'`原始引号、引号和带或分隔符的`ur'...'`三重引号。所述问题没有为特定的 awk/perl/python 解决方案提供足够的上下文。`'''``"""`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:09:39.423

Sed 也可以像`'s|something|someotherthing|g'`（或与其他分隔符一起使用）一样工作，但如果您无法控制输入字符串，则必须使用一些函数将其转义，然后再将其传递给 sed..

# eclipse - 将 PrimeFaces 库作为“外部 JAR”添加到 Eclipse 项目时，PrimeFaces 组件不显示

> ID：13146829
> 
> 赞同：4
> 
> 时间：2012-10-30T20:07:35.470
> 
> 标签：eclipse, jsf, primefaces

我尝试设置 PrimeFaces 库。所以我使用“添加外部 jar”命令添加了 primefaces-3.4.1.jar。比我添加命名空间：*xmlns:p="http://primefaces.org/ui*到 html 标记。根据[官方文档](http://primefaces.googlecode.com/files/primefaces_users_guide_3_4.pdf)，这就是它的全部内容，用于设置它。

我尝试将`<p:editor/>`组件添加到我的页面，但未显示。

我的项目配置是：Eclipse，JSF 2.1 on Glassfish 3.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:18:29.123

Apparently you did the "add external jar" command wrong. It's not clear from the question how exactly you performed this step, but this should be just a matter of dropping the JAR file in its entirety in the project's `/WEB-INF/lib` folder the usual way (as you would do for every 3rd party JAR file the webapp depends on). The way you put the question indicates that you weren't aware about this after all.

Really nothing more needs to be done. If you have fiddled around in project's *Build Path* properties, then you should undo that all to avoid possible collisions in the future. Eclipse is smart enough to set the necessary things automatically right whenever you drop a JAR in projects's `/WEB-INF/lib` folder.

### See also:

*   [How to add JAR libraries to WAR project without facing java.lang.ClassNotFoundException? Classpath vs Build Path vs /WEB-INF/lib](https://stackoverflow.com/questions/6792197/how-to-add-jar-libraries-to-war-project-without-facing-java-lang-classnotfoundex)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:02:27.093

我想这是同样的问题和解决方案：[Simple primefaces application not working](https://stackoverflow.com/questions/7219372/simple-primefaces-application-not-working)

web.xml 中缺少 servlet 映射：

```
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T10:23:04.147

PrimeFaces jar（在我的例子中是primefaces-7.0.jar）在运行时必须在文件夹/WEB-INF/lib 中可用。

# c - for 和 while 循环中没有循环条件

> ID：13146830
> 
> 赞同：10
> 
> 时间：2012-10-30T20:07:45.443
> 
> 标签：c, loops

```
while(cond) // fine
for(;cond;) //fine 
```

但是当我删除条件部分时

```
while() //syntax compilation error 
for(;;) //Infinite loop 
```

这些循环是如何在内部实现的？或者，编译器（解析器）如何知道其中的空条件`while`是错误的并且`for`是无限的？

我没有特别找到任何关于这个的东西，我认为像我这样的人（他们是初学者）在 C 中可能有同样的困惑

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T20:24:41.723

该标准要求将省略的`for`循环条件替换为非零常量：

从**C11 6.8.5.3**开始：（强调我的）

> 6.8.5.3 for 语句
> 
> 1 for (clause-1 ; expression-2 ; expression-3 ) 语句的行为如下： 表达式 expression-2 是在每次执行循环体之前计算的控制表达式。每次执行循环体后，表达式 expression-3 被评估为 void 表达式。如果clause-1 是一个声明，它声明的任何变量的范围是声明的其余部分和整个循环，包括其他两个表达式；它在控制表达式的第一次评估之前按照执行顺序到达。如果 Clause-1 是一个表达式，它在控制表达式的第一次评估之前被评估为一个 void 表达式。134)
> 
> **2 子句 1 和表达式 3 都可以省略。省略的表达式 2 被非零常量替换。**

由于循环没有这样的要求`while`（如果省略条件），我相信它留给编译器的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T20:11:31.963

没有技术原因可以解释为什么一个有效而另一个无效。这是语言设计者的人为因素考虑。他们觉得无限循环 using`for (;;)`比`while ()`. 他们可能受到了 ALGOL（一种穴居人使用的语言）的影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T21:44:59.290

> ...编译器（解析器）如何知道 while 中的空条件是错误而 for 是无限的？

因为语言定义在语法（语法）和语义上都指定了它。

这是`while`循环的语法：

```
**while (** *expression* **)** *statement* 
```

这是循环的语法`for`（截至[C2011](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)）：

```
**for (** *expression[opt]* **;** *expression[opt]* **;** *expression[opt]* **)** *statement*
**for (** *declaration expression[opt]* **;** *expression[opt]* **)** *statement*
```

语句中 each的下标*opt*表示对应的表达式是可选的。文本强化了这一点：`*expression[opt]*``for`

> ### 6.8.5.3 for 语句
> 
> ...
> 2*子句 1*和*表达式 3*都可以省略。省略的*表达式 2*被非零常量替换。

相比之下，该`while`语句的控制表达式没有标记为可选，这在文本中也得到了加强：

> ### 6.8.5.1 while 语句
> 
> 1 控制表达式的计算发生在每次执行循环体之前。

没有太多空间可以解释控制表达式可以省略。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T20:17:33.600

确定程序语法和语义正确性的条件被编码为语言语法。语言语法是由语言创造者制定的，它们决定了语言的外观，就像在 C 的情况下一样。我想背后的基本直觉`for(;;)`是`while(1)`，任何部分都`for(;;)`可以省略，尽管`while(1)`对于创建无限循环来说完全足够了，而`while()`对于一个狭窄的案例来说，这将是一个骇人听闻的角落案例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-30T20:47:44.513

它是 C 语法的一部分。每种编程语言都有其形式语法规范（这里是[BNF 中的 C 形式语法](http://www.cs.man.ac.uk/%7Epjj/bnf/c_syntax.bnf)- 即在语法上什么是正确的，什么是不正确的。在 C 形式语法中，您可以看到**while**必须看起来像：

> 'while' '(' exp ')' 统计

单引号（终端符号）中的单词/符号是强制性的：'while'、'(' 和 ')'。不带引号的词（非终结符号）也是在形式语法中指定的*东西。*如果你分析 C 形式语法，你会发现 exp**不可能**是*nothing*。另一方面，如果您查看**for**您会看到它可能看起来像：

> 'for' '(' exp ';' exp ';' exp ')' 统计
> 
> | 'for' '(' exp ';' exp ';' ')' 统计
> 
> | 'for' '(' exp ';' ';' exp ')' 统计
> 
> | 'for' '(' exp ';' ';' ')'stat
> 
> | 'for' '(' ';' exp ';' exp ')' 统计
> 
> | 'for' '(' ';' exp ';' ')'stat
> 
> | 'for' '(' ';' ';' exp ')' 统计
> 
> | 'for' '(' ';' ';' ')' 统计

（| 表示或）。

当您编译程序时，词法分析器（编译器的一部分）会检查您的代码在语法上是否正确（即符合形式语法）并根据源代码执行其他操作。

# crystal-reports - 水晶报表显示数据库查询

> ID：13146831
> 
> 赞同：0
> 
> 时间：2012-10-30T20:07:49.093
> 
> 标签：crystal-reports

我是CR的新手。我有一份其他人创建的报告。当我使用 Database -> 'Show SQL Query' 命令时，WHERE 子句有一堆名称。我怎样才能找出这个名字列表来自哪里？

```
SELECT "billing_tx_charge_detail_2004"."date_of_service", "billing_tx_charge_detail_2004"."v_SERVICE_CODE",     "billing_tx_charge_detail_2004"."v_PROVIDER_NAME",     "billing_tx_charge_detail_2004"."service_status_value", "billing_tx_charge_detail_2004"."v_client_name", "billing_tx_charge_detail_2004"."guarantor_liability", "billing_tx_charge_detail_2004"."CLAIM_NUMBER", "billing_tx_charge_detail_2004"."GUARANTOR_ID", "billing_tx_charge_detail_2004"."v_service_value", "billing_tx_charge_detail_2004"."PATID", "cw_patient_notes"."service_duration", "cw_patient_notes"."note_type_value"FROM   "SYSTEM"."billing_tx_charge_detail_2004" "billing_tx_charge_detail_2004" LEFT OUTER JOIN "CWSAVPMLIVESYSTEM"."cw_patient_notes" "cw_patient_notes" ON ((("billing_tx_charge_detail_2004"."FACILITY"="cw_patient_notes"."FACILITY") AND ("billing_tx_charge_detail_2004"."PATID"="cw_patient_notes"."PATID")) AND ("billing_tx_charge_detail_2004"."EPISODE_NUMBER"="cw_patient_notes"."EPISODE_NUMBER")) AND ("billing_tx_charge_detail_2004"."JOIN_TO_TX_HISTORY"="cw_patient_notes"."JOIN_TO_TX_HISTORY")
WHERE  ("billing_tx_charge_detail_2004"."date_of_service">={d '2009-07-01'} 
AND "billing_tx_charge_detail_2004"."date_of_service"<={d '2009-07-31'}) AND 
("billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='BARNHART,SCOTT' OR
 "billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='BINKER,BARB  MSW LISW' OR 
"billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='BRETNAN,BAUNEEN' OR 
"billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='CROWN,DWAYNE  BS  NCAC-I  LADAC' 
OR "billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='COFFEE,RAMBA  BA  LADAC' OR
"billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='DECODE,TENISE  MC LMFT LADAC' OR 
"billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='GONSALEZ,MAREN' OR
"billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='HITAN,TOM' OR 
"billing_tx_charge_detail_2004"."v_PROVIDER_NAME"='KOTUE,SHEENA')
 ORDER BY "billing_tx_charge_detail_2004"."v_SERVICE_CODE",
 "billing_tx_charge_detail_2004"."date_of_service", "billing_tx_charge_detail_2004"."PATID" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:12:17.017

它位于报告 -> 选择专家命令中！万岁！

我一发布问题就知道我会找到答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:14:08.233

你有一些选择。它是：

*   在记录选择公式中（报表 > 编辑选择公式 > 记录）
*   在“显示 SQL 查询”窗口中硬编码（虽然不太可能）
*   在与报告一起保存的参数中，或包含默认值（更不可能）

# emulation - WP8 sdk 之后 WP7 模拟器无法正常工作

> ID：13146836
> 
> 赞同：0
> 
> 时间：2012-10-30T20:08:05.217
> 
> 标签：emulation, windows-phone-8

所以我想使用 WP 7.1 模拟器选项进行调试，但无法启动模拟器，它说正在执行完整的操作系统启动，然后是 WP 徽标并永远坐在那里

这发生在安装 WP8 SDK 之后

有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:37:10.320

请在安装 WP8 SDK 之前卸载 WP7 SDK。WP8 SDK 包括对 WP7 应用程序的支持。

WP8 SDK 模拟器是 Hyper-V 驱动的模拟器，与 WP7 完全不同。

# android - 从android发送匿名数据

> ID：13146838
> 
> 赞同：1
> 
> 时间：2012-10-30T20:08:17.387
> 
> 标签：android

我目前正在尝试为 android 设计游戏。我即将把它发给家人和朋友进行 Beta 测试。我想让它自动向我发送有关他们玩游戏的频率和死亡地点的数据，以便我可以确保正确创建关卡。这有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:28:21.813

你可以看看[Flurry](http://www.flurry.com/)，一个移动分析库，它允许你获取有关使用 & co 的基本信息。您也可以定义自定义事件（例如在级别 x 中被杀死）以跟踪自定义信息。

# ruby-on-rails - 使用表单访问/设置嵌套值

> ID：13146839
> 
> 赞同：0
> 
> 时间：2012-10-30T20:08:20.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我的数据库中有 30k+ 文档具有以下结构：

```
{
  ...,
  "hours" : {
    "holiday" : {
      "New Years" : "Call",
      "Easter" : "Closed",
      "Memorial Day" : "Standard",
      "Independence Day" : "Standard",
      "Labor Day" : "Standard",
      "Thanksgiving" : "Closed",
      "Day After Thanksgiving" : "Call",
      "Christmas Eve" : "Call",
      "Christmas" : "Closed",
      "New Years Eve" : "Call"
    },
    "standard" : {
      "mon" : [{
        "open" : "8:00 am",
        "close" : "11:00 pm"
      }],
      "tue" : [{
        "open" : "8:00 am",
        "close" : "11:00 pm"
      }],
      "wed" : [{
        "open" : "8:00 am",
        "close" : "11:00 pm"
      }],
      "thu" : [{
        "open" : "8:00 am",
        "close" : "11:00 pm"
      }],
      "fri" : [{
        "open" : "8:00 am",
        "close" : "11:00 pm"
      }],
      "sat" : [{
        "open" : "8:00 am",
        "close" : "11:00 pm"
      }],
      "sun" : [{
        "open" : "8:00 am",
        "close" : "10:00 pm"
      }]
    }
  },
  ...
} 
```

我正在从一个 php 驱动的站点进行完全重写。我一直在绞尽脑汁，绝对想不出一种方法来制作一个允许我正确设置 business.hours["standard"]["mon"] 的表单字段。该网站每天提供多个打开/关闭条目，用于午餐关闭的企业等。该属性将设置为 [{"open" : "8:00 am", "close" : "12:00 pm}, {"open" : "1:00 pm", "close" : "5:00 pm}] 在这种情况下。我想为每个条目提供两个选择框，一个用于开放时间，一个用于关闭时间。

这是我的模型。包括一些我试图弄清楚如何与我的表格联系起来的getter/setter……但没有成功。

```
class Business
  include Mongoid::Document
  include Mongoid::Timestamps
  field :ad, type: String
  field :address, type: String
  field :city, type: String
  field :claimed, type: Boolean
  field :coupons, type: String
  field :created_at, type: DateTime
  field :extra_services, type: Array
  field :hours, type: Hash
  field :name, type: String
  field :organization, type: String
  field :permanently_closed, type: Boolean, :default => false
  field :phone, type: String
  field :state, type: String
  field :tags, type: Array
  field :unit, type: String
  field :updated_at, type: DateTime
  field :website, type: String
  field :zip, type: String

  attr_accessible :ad, :address, :city, :claimed, :coupons, :created_at, :updated_at, :extra_services, :hours,
                  :name, :organization, :permanently_closed, :phone, :state, :tags, :unit, :website, :zip

  index({address: 1, unit: 1, city: 1, state: 1, zip: 1, organization: 1}, {unique: true, name: "address_unique_index"})

  after_initialize do |b|
    b.hours = Hash.new unless b.hours
    b.hours["holiday_hours"] = {"New Years" => "Call",
                                "Easter" => "Call",
                                "Memorial Day" => "Call",
                                "Independence Day" => "Call",
                                "Labor Day" => "Call",
                                "Thanksgiving" => "Call",
                                "Day After Thanksgiving" => "Call",
                                "Christmas Eve" => "Call",
                                "Christmas" => "Call",
                                "New Years Eve" => "Call"} unless b.hours["holiday_hours"]

    b.hours["standard_hours"] = Hash.new unless b.hours["standard_hours"]
  end

  def holiday_hours
    hours["holiday_hours"] if hours["holiday_hours"]
  end

  def holiday_hours=(hours)
    self.hours["holiday_hours"] = hours if hours.present?
  end

  def holiday_hours_for(holiday)
    hours["holiday_hours"][holiday.to_s] if hours["holiday_hours"][holiday.to_s]
  end

  def update_holiday_hours_for(holiday, hours_text)
    self.hours = Hash.new unless hours
    self.hours["holiday_hours"] = Hash.new unless hours["holiday_hours"]
    self.hours["holiday_hours"][holiday.to_s] = hours_text.to_s
  end

  def standard_hours
    hours["standard_hours"] if hours["standard_hours"]
  end

  def standard_hours_for(day)
    hours["standard_hours"][day.to_s] if hours["standard_hours"][day.to_s]
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:14:02.820

我想出了一种方法来做到这一点，尽管我不是 100% 确定这是正确的方法。

```
attr_accessible :ad, :address, :city, :claimed, :coupons, :created_at, :updated_at, :extra_services, :hours,
                :name, :organization, :permanently_closed, :phone, :state, :tags, :unit, :website, :zip,
                :hours_mon_open, :hours_mon_close, :hours_tue_open, :hours_tue_close, :hours_wed_open,
                :hours_wed_close, :hours_thu_open, :hours_thu_close, :hours_fri_open, :hours_fri_close,
                :hours_sat_open, :hours_sat_close, :hours_sun_open, :hours_sun_close

attr_accessor :hours_mon_open, :hours_mon_close, :hours_tue_open, :hours_tue_close, :hours_wed_open,
              :hours_wed_close, :hours_thu_open, :hours_thu_close, :hours_fri_open, :hours_fri_close,
              :hours_sat_open, :hours_sat_close, :hours_sun_open, :hours_sun_close

before_save :parse_hours

def parse_hours
  h = Array.new

  if hours_mon_open.present? && hours_mon_close.present? && hours_mon_open.count == hours_mon_close.count
    h = Array.new
    i = 0
    while i < hours_mon_open.count
      hs = build_hours_set(hours_mon_open[i], hours_mon_close[i])
      h.push(hs) unless hs.nil?
      i += 1
    end

    if h.count > 0
      update_standard_hours_for("mon", h)
    end
  end

  if hours_tue_open.present? && hours_tue_close.present? && hours_tue_open.count == hours_tue_close.count
    h = Array.new
    i = 0
    while i < hours_tue_open.count
      hs = build_hours_set(hours_tue_open[i], hours_tue_close[i])
      h.push(hs) unless hs.nil?
      i += 1
    end

    if h.count > 0
      update_standard_hours_for("tue", h)
    end
  end

  if hours_wed_open.present? && hours_wed_close.present? && hours_wed_open.count == hours_wed_close.count
    h = Array.new
    i = 0
    while i < hours_wed_open.count
      hs = build_hours_set(hours_wed_open[i], hours_wed_close[i])
      h.push(hs) unless hs.nil?
      i += 1
    end

    if h.count > 0
      update_standard_hours_for("wed", h)
    end
  end

  if hours_thu_open.present? && hours_thu_close.present? && hours_thu_open.count == hours_thu_close.count
    h = Array.new
    i = 0
    while i < hours_thu_open.count
      hs = build_hours_set(hours_thu_open[i], hours_thu_close[i])
      h.push(hs) unless hs.nil?
      i += 1
    end

    if h.count > 0
      update_standard_hours_for("thu", h)
    end
  end

  if hours_fri_open.present? && hours_fri_close.present? && hours_fri_open.count == hours_fri_close.count
    h = Array.new
    i = 0
    while i < hours_fri_open.count
      hs = build_hours_set(hours_fri_open[i], hours_fri_close[i])
      h.push(hs) unless hs.nil?
      i += 1
    end

    if h.count > 0
      update_standard_hours_for("fri", h)
    end
  end

  if hours_sat_open.present? && hours_sat_close.present? && hours_sat_open.count == hours_sat_close.count
    h = Array.new
    i = 0
    while i < hours_sat_open.count
      hs = build_hours_set(hours_sat_open[i], hours_sat_close[i])
      h.push(hs) unless hs.nil?
      i += 1
    end

    if h.count > 0
      update_standard_hours_for("sat", h)
    end
  end

  if hours_sun_open.present? && hours_sun_close.present? && hours_sun_open.count == hours_sun_close.count
    h = Array.new
    i = 0
    while i < hours_sun_open.count
      hs = build_hours_set(hours_sun_open[i], hours_sun_close[i])
      h.push(hs) unless hs.nil?
      i += 1
    end

    if h.count > 0
      update_standard_hours_for("sun", h)
    end
  end
end

def build_hours_set(open, close)
  if open.present? && close.present?
    {"open" => open.to_s, "close" => close.to_s}
  else
    nil
  end
end    

def update_standard_hours_for(day, hours_array)
  if day.present? && hours_array.present?
    self.hours = Hash.new unless hours
    self.hours["standard"] = Hash.new unless hours["standard"]
    self.hours["standard"][day.to_s] = hours_array
  end
end 
```

# android - 在 Android 中计算传出 SMS / MMS

> ID：13146840
> 
> 赞同：0
> 
> 时间：2012-10-30T20:08:26.377
> 
> 标签：android, broadcastreceiver, android-contentprovider

我正在创建一个项目，我必须定期检查在该计时器期间发送的 SMS 和 MMS 的数量。例如，最近 15 分钟内发送的 SMS/MMS 的数量。

我看过这个[帖子：如何使用短信内容提供者？文档在哪里？](https://stackoverflow.com/a/1976557/777593)Mark Murphy (CommonsWare) 曾提到不要使用 SMS 内容提供程序，因为它没有记录。

鉴于上述情况，我可以做些什么来实现我的目标？

@CommonsWare 你能评论一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:20:31.333

我认为你可以使用[它的重构版本](https://stackoverflow.com/questions/2183680/delete-sms-in-android-1-5#2198104)来获得你需要的东西。

样本：

```
private int deleteMessage(Context context, SmsMessage msg) {
Uri deleteUri = Uri.parse("content://sms");
int count = 0;
Cursor c = context.getContentResolver().query(deleteUri, null, null,
        null, null);
    while (c.moveToNext()) {
    try {
        // Delete the SMS
        String pid = c.getString(0); // Get id;
        String uri = "content://sms/" + pid;
        count = context.getContentResolver().query(Uri.parse(uri),
                null, 
                "date('sentDate') - date('%M', '15') > date('now')", 
                null, 
                null);
    } catch (Exception e) {
    }
}
return count; 
```

}

SQL 可能完全错误，但这样的事情应该可以工作。

# java - Apache Wicket - 将 HTML 添加到反馈面板

> ID：13146841
> 
> 赞同：2
> 
> 时间：2012-10-30T20:08:38.203
> 
> 标签：java, html, apache, custom-controls, wicket

有没有办法将自定义 HTML 添加到反馈面板？

如中所示，我不想只将`<span>`元素添加到为每个添加的消息创建的 FeedbackPanel，而是添加a和.`<li>``<div>``<button>``<span>`

所以我正在寻找类似于`validationErrorFeedback.error(message);`我的 HTML 的消息。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T20:59:14.673

您可以子类化`FeedbackPanel`并因此提供您自己的标记。只需根据需要复制`FeedbackPanel.html`和编辑标记（组件层次结构必须仍然相同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T21:28:19.490

最简单的查找方法是调用

```
feedbackPanel#setEscapeModelStrings(false) 
```

但是如果你这样做，如果你有任何显示输入的验证器，你的应用程序很容易受到跨站点脚本攻击。例如，如果您有一个使用 EmailAddressValidator 的文本字段并且用户输入“Joe”，则验证器的错误消息将显示为：

```
'${input}' is not a valid email address. 
```

这将返回“乔”不是一个有效的电子邮件地址。但是 - 攻击者可以很容易地通过`<script>alert('xss')</script>`例如传递来注入 XSS 有效负载，该有效负载不再被转义。

如果你能保证你的验证器不会回显这个输入 - 继续使用它。否则，您需要按照 Leiter 先生的建议进行操作，并使用您自己的标记将 FeedbackPanel 子类化。在 wicket 1.5.x 中，这看起来像：

```
<html xmlns:wicket="http://wicket.apache.org">
<body>
<wicket:panel>
  <ul wicket:id="feedbackul" class="feedbackPanel">
    <li wicket:id="messages" class="errorlevel">
      <span wicket:id="message" class="errorlevel">A message</span>
    </li>
  </ul>
</wicket:panel>
</body>
</html> 
```

# django - Django 和 Nginx

> ID：13146842
> 
> 赞同：1
> 
> 时间：2012-10-30T20:08:39.530
> 
> 标签：django, nginx, dotcloud

我在 dotcloud 上运行一个网站，它使用 nginx 来提供静态内容和 html 页面，并使用 django 来为 ajax 请求提供 json 服务。

我在配置我的 nginx.conf 文件时遇到问题，因为似乎这里没有特别提到的任何东西都会被提供给 django，这会产生错误。

例如，假设用户想要访问“关于”页面，因此他们在浏览器中键入 www.example.com/about。我希望 nginx 在不涉及 django 的情况下返回 about.html。我怎样才能做到这一点？我尝试了以下方法：

```
rewrite ^/about/?$  /path/to/file/about.html break; 
```

但这似乎不起作用。我在这里做错了吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:13:53.760

我不知道这是否是首选方式，但您可以使用：

```
location /robots.txt { alias /home/www/static/any-filename.txt; } 
```

提供单个文件。在[文档](http://wiki.nginx.org/HttpCoreModule#location)和服务器[故障中找到](https://serverfault.com/questions/278351/nginx-root-versus-alias-for-serving-single-files)

# html - IE 怪癖模式使页面呈现奇怪 - LI 元素不水平

> ID：13146843
> 
> 赞同：0
> 
> 时间：2012-10-30T20:08:42.017
> 
> 标签：html, css, internet-explorer, quirks-mode

我在 IE 8 中遇到了一个奇怪的怪癖模式问题。我正在处理一个应该呈现水平菜单栏的网页。在 FF 和 IE 正常模式下，它可以完美呈现。但是，当我将 IE 设置为 quirks 模式时，UL 的 li 元素会垂直渲染，我不知道如何修复它。

这是CSS：

```
#primaryNav {
    background:url(/images/sprite_primary_nav.gif) repeat-x; 
    border:1px solid #dfdfdf;
    clear:both;
    height:49px;
    margin:0 auto;
    width:985px;
}
#primaryNav ul {
    list-style: none;
    margin:0;

}
#primaryNav ul li {
    border-left:1px solid #dfdfdf;
    display:list-item;
    float:left;
    height:49px;
    padding-bottom:0px;  

}
#primaryNav ul li a {
    border:1px solid #ffffff;
    color:#333333;
    display:block;
    font-family:ScalaOTRegular, "Times New Roman", Arial;
    font-size:123.1%;
    height:32px;
    padding:15px 23px 0px;
    text-decoration:none;
}
#primaryNav ul li a.afterActive, #primaryNav ul li a.firstNavItem {
    border-left:0px;
}
#primaryNav ul li.active a {
    background:url(../images/sprite_primary_nav.gif) repeat-x 0px -49px;
}
#primaryNav ul li:first-child {
    margin-left:41px;
}
#primaryNav ul li:last-child {
    border-right:1px solid #dfdfdf !important;
}
.primaryNavLast {
    border-right:1px solid #dfdfdf !important;
} 
```

这是html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <link rel="stylesheet" type="text/css" href="/css/reset.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="/css/delta_screen.css" media="screen"/>

    <script src="scripts/jquery-1.6.4.min.js"></script>
</head>
<body>
    <div id="primaryNav" class="addShadowShadowPrimaryNav">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Etiamn</a></li>
            <li><a href="#">Integer</a></li>
            <li><a href="#">Rhoncus</a></li>
            <li><a href="#">Sagittis</a></li>
            <li><a href="#">Facilisis &amp; Inte</a></li>
        </ul>
    </div><!--end primaryNav-->
<!-- end scripts -->
</body>
</html> 
```

有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:06:56.420

问题是你在 Intranet 上，除非你告诉它，否则 IE 会自动进入兼容模式。使用`X-UA-Compatible`标题（或等效`<meta>`标签）应该可以解决问题：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:57:29.410

它肯定会进入怪癖模式吗？我看不出它为什么会这样做。

这可能是 IE7 兼容模式——这是一个很常见的“陷阱”问题，因为有一些浏览器设置可能会导致它在不通知您的情况下切换模式，尤其是当您在本地网络上查看网站时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T21:04:08.320

尝试将 Doctype 更改为严格。在某些情况下，transitional 处于 quirks 模式，而 strict 不是。还要检查 Doctype 上方是否有任何内容（甚至是评论）并将其删除。

[http://en.wikipedia.org/wiki/Quirks_mode](http://en.wikipedia.org/wiki/Quirks_mode)

# c# - 当在 SubmitChanges() 上插入时，将提交的实体与服务器所做的更改返回给客户端

> ID：13146844
> 
> 赞同：0
> 
> 时间：2012-10-30T20:08:49.393
> 
> 标签：c#, silverlight, wcf-ria-services

我正在研究 SOA 架构。所以我无权访问数据库。我在服务器上使用 DTO 作为实体。我在客户端填写一个实体并将其提交到服务器，这就是为实体生成主键的时候。

我使用（客户端）

_customerDomainContext.SubmitChanges(SubmitChangesCallback, null);

在我尝试访问新添加的实体的回调中，我只能看到我填写的属性。

我可以访问域服务（服务器端）上提交的实体，如下所示。

```
 [Insert]
    public void InsertCustomerDTO(CustomerDTO customer)
    {
      CustomerDTO customerFromDB = CreateCustomerDTOCore(customer);
    } 
```

有没有办法将新生成的实体获取到客户端，以便我可以在 SubmitChanges 上访问实体新生成的密钥。

任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:21:11.507

只需使用回调的参数：

```
context.SubmitChanges(x =>
            {
                //Contains your entities fulfilled by the server
                x.ChangeSet
            }, null); 
```

它包含保存后服务器返回的实体，因此在您的键字段中，您将找到实际的键值。
为了使上述过程运行，您需要“编辑”您的实体可能并不明显。

```
[Insert]
public void InsertJeopardyModel(CustomerDTO jeopardy)
{
    CustomerDTO customerFromDB = CreateCustomerDTOCore(customer);
    jeopardy.Id = customerFromDB.Id;
    jeopardy.MyProperty = customerFromDB.MyDBEquivalentProperty;
} 
```

正如您在编辑后的示例中看到的那样，我实际上是在编辑 CustomerDTO 对象，就像 Enitity Framework 或 LINQ2SQL 所做的那样。
然后，该编辑的实体将被序列化给将在`Changeset`属性中公开它的客户端。

# r - 如何仅从包中加载特定功能

> ID：13146849
> 
> 赞同：8
> 
> 时间：2012-10-30T20:09:06.720
> 
> 标签：r

我有一个使用 gdata 包中的 trim() 函数的包。从字面上看，我没有使用包中的任何其他内容，并且（正如你们中的一些人可能已经看到的那样）它覆盖了我需要的基本 R 的一些功能。

有没有办法只加载一个函数而不是整个包？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T20:14:55.483

当然。`importFrom`只需在您的 NAMESPACE 文件中使用指令（[如 R-exts 中所述](http://cran.r-project.org/doc/manuals/R-exts.html#Specifying-imports-and-exports)）。

```
importFrom(gdata, trim) 
```

* * *

OP 编辑​​：从 R 3.2.0 开始，现在有一个基本功能：`trimws()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-13T18:04:04.750

现在我明白了：从另一篇文章：这意味着包（在本例中为 R）可以访问包函数/对象，但用户不能不显式加载工具包，因为统计、图形等已加载并准备就绪去为用户。

所以 - 正式指定的导入（您在描述文件中指定“导入：生存”以及在 NAMESPACE 文件中指定“importFrom（survival，Surv）”确实有效，但随后，无需*将*“Surv”添加到'export' -ed 对象的列表，函数 'Surv' 仅对包内的代码可用，但对用户不可用（因此也对小插图中的示例不可用）。

# php - 我将如何解析或将其转换为 JSON？

> ID：13146850
> 
> 赞同：5
> 
> 时间：2012-10-30T20:09:12.737
> 
> 标签：php, json, flash, apache-flex, rtmp

```
{
  name: 'com.riotgames.platform.summoner.PublicSummoner',
  keys: [ 'internalName', 'dataVersion', 'acctId', 'name', 'profileIconId', 'revisionDate', 'revisionId', 'summonerLevel', 'summonerId', 'futureData' ],
  object: {
    internalName: 'mrquackers',
    dataVersion: 0,
    acctId: { value: 34117327 },
    name: 'MrQuackers',
    profileIconId: 502,
    revisionDate: Tue, 30 Oct 2012 19:38:32 GMT,
    revisionId: { value: 0 },
    summonerLevel: { value: 30 },
    summonerId: { value: 20933307 },
    futureData: null
  },
  encoding: 0
} 
```

（编辑添加的换行符和缩进；不是响应的一部分）

这是来自 RTMP 数据包的响应，我不确定如何解析它。php中是否有一个库或者我可以将它转换为像json这样易于解析的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:13:27.073

不可以。如果您不知道响应使用的语言，则无法自动解析它。

虽然响应*看起来*像 JSON，但它不是。它甚至不*接近*JSON。您不能只引用键以使其成为有效的 JSON。

除了`revisionDate`，它*似乎*是有效的 Javascript，但谁知道呢？

解析器需要知道它可能遇到的每种数据类型。不知道响应中会出现什么。除非您找到这种格式的文档，否则您永远不知道您会遇到什么。

*理论上*，您可以解析您*认为*此响应的语言。但

1.  您需要实现自己的解析器。这并不容易。完全没有。
2.  你不能假设你*知道*响应者的语言。此响应是有效 javascript 的*一个值*。
3.  一个实现不佳的解析器甚至不会知道它遇到了它不理解的东西。非但不放弃，反而会产生意想不到的结果
4.  如果您修改语言模型，如果您的解析器不是成熟的解析器，那么将更改合并到解析器中很容易导致解析器的完全重写。

**结论：**

您不知道响应者所说的语言。这意味着您无法解析它。先找文档，*再讲*解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:16:27.910

如果您使用 Flash/AS3 接收此数据包，则可以使用[as3corelib JSONDecoder](https://github.com/mikechambers/as3corelib)类。

以下是使用您提供的 JSON 示例的示例：

```
import com.adobe.serialization.json.JSON;

var raw:String = "{ name: 'com.riotgames.platform.summoner.PublicSummoner', keys: [ 'internalName', 'dataVersion', 'acctId', 'name', 'profileIconId', 'revisionDate', 'revisionId', 'summonerLevel', 'summonerId', 'futureData' ], object: { internalName: 'mrquackers', dataVersion: 0, acctId: { value: 34117327 }, name: 'MrQuackers', profileIconId: 502, revisionDate: Tue, 30 Oct 2012 19:38:32 GMT, revisionId: { value: 0 }, summonerLevel: { value: 30 }, summonerId: { value: 20933307 }, futureData: null }, encoding: 0 }";
// 1\. Add quotes to all keys. 2\. Wrap string around date object. 3\. Replace single quotes with double quotes.
raw = raw.replace(/([\w]+): /g, "'$1': ").replace(/\w+, \d* \w+ \d* \d*:\d*:\d* \w+/g, "'$&'").replace(/'/g, "\"");

var json:Object = JSON.decode(raw, false);
var date:Date = new Date(json.object.revisionDate);

trace(json.name); // "com.riotgames.platform.summoner.PublicSummoner"
trace(date.month); // 9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T00:29:59.427

这就是我要做的。这里唯一的问题是修订日期，最好将其转换为要由 ActionScript 处理的时间戳（或转换为字符串，如果您愿意），因此我将使用该[`preg_replace_callback()`](http://php.net/manual/en/function.preg-replace-callback.php)函数将其更改为前一个条件或[`preg_replace()`](http://php.net/manual/en/function.preg-replace.php)函数后一种情况：

```
// this is for numeric timestamp: 1351625912
$str = preg_replace_callback('~(?<=\srevisionDate:\s).+?(?=,\n|,\r|,\r\n)~',
create_function('$m','return strtotime($m[0]);'),$str);

// alternatively, you can wrap it with single quotes: 'Tue, 30 Oct 2012 19:38:32 GMT'
//$str = preg_replace('~(?<=\srevisionDate:\s).+?(?=,\n|,\r|,\r\n)~',"'$0'",$str);

echo $str; 
```

# linux - 在 Redhat 中安装 R 2.15

> ID：13146852
> 
> 赞同：3
> 
> 时间：2012-10-30T20:09:26.763
> 
> 标签：linux, r, installation, redhat

我正在尝试在没有管理员权限的服务器上安装 R 的本地副本。我对服务器或 linux***几乎一无所知。***我可以通过键入“R”轻松访问 R 的副本，但是我正在使用的服务器只有 R 的旧副本（v2.10.1）。我至少需要 v2.14 来运行我的脚本，尽管我更愿意安装最新版本。

据我了解，我的服务器运行 Redhat e15 x86_64 GNU/Linux。我将服务器映射到我的 Windows 计算机，并尝试在服务器上定期安装 Windows R，但是当我尝试运行 R.exe 文件时，我收到一条错误消息，指出“无法执行二进制文件”。

我在 CRAN 网站上找到了我认为应该下载的内容：

linux下安装... redhat/e15/x86_64

但该文件夹仅包含 v2.10。我找到了这个关于在 Redhat 上安装 R 的线程，但我仍然不知道如何（如果可能的话）安装/构建我自己的 R 副本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T21:08:02.537

通常，从源代码构建 R 并将其安装到您的主目录中非常容易（我在工作中也这样做）。该过程大致归结为以下过程：

*   创建一个要安装 R 的目录，例如`~/progsandlibs/`. 您还可以将此目录用于您安装的所有其他自定义软件。
*   [从 CRAN](http://cran.at.r-project.org/src/base/R-2/R-2.15.2.tar.gz)下载R。
*   提取`tar.gz`您下载的文件`tar`
*   进入`R-2.15.2`目录。
*   给出以下命令：
    *   `./configure --prefix=~/progsandlibs/ --enable-R-shlib`
    *   `make`
    *   `make install`
*   添加`~/progsandlibs/bin/`到您的`PATH`环境变量。`.bashrc`最简单的方法是在您的:中添加一行`export PATH=~/progsandlibs/bin/:$PATH`。

如果上述所有步骤都正常运行，则您已经安装了 R，您可以从终端启动它。

# c# - LDAP 到大型机环境

> ID：13146853
> 
> 赞同：2
> 
> 时间：2012-10-30T20:09:26.743
> 
> 标签：c#, vbscript, ldap, linq-to-ldap

> **可能重复：**
> [在 C# 中查询 LDAP](https://stackoverflow.com/questions/6452531/querying-an-ldap-in-c-sharp)

我目前正在将一些旧的 ASP 代码从 VBScript 转换为 C#，并且卡在了使用 LDAP 连接到我们的 IBM Top Secret 环境的一块上。任何人都知道有关该过程的一些文档/资源，或者可以将相关代码转换为 C#/.NET 的吗？

```
Set oLdap = CreateObject("LDAPClient")
oLdap.Connect "MY SERVER NAME",1389,"cn=" & <MF Account>, <MF Password>
oLdap.Search "host=ldap,o=COMP, c=us","tssacid=<Target UserID>" 
```

*编辑*我相信我越来越接近这个：

```
DirectoryEntry entry = new DirectoryEntry("LDAP://SERVERADDR/tssacid=acidval,tssadmingrp=acids,host=ldap,o=comp,c=us"); 
```

使用此资源解决了我的问题：

[ftp://ftp.ca.com/pub/ldap/docs/ldapv3/eTrust_LDAP_Server_Administrator_Guide_30.pdf](ftp://ftp.ca.com/pub/ldap/docs/ldapv3/eTrust_LDAP_Server_Administrator_Guide_30.pdf)

我将在“完全重复”线程中复制资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:55:09.160

除了现有的 SO 线程外， CodePlex上还有一个[LINQ to LDAP提供程序。](http://linqtoldap.codeplex.com/)您可以将其用作 .NET 中现有目录服务 API 的替代方案（实际上，它是在此基础上构建的）。

# c# - 使用或不使用 where 子句执行 LINQ

> ID：13146857
> 
> 赞同：0
> 
> 时间：2012-10-30T20:09:48.473
> 
> 标签：c#, linq

在我的示例中，如果未提供名称，我想获取提供的促销代码名称的促销元素，然后获取所有可用的促销。

```
var result = from row in promoCodes.AsEnumerable() 
             where  (
                 !String.IsNullOrEmpty(fieldTitle) && 
                 !String.IsNullOrEmpty(filterValue) && 
                 row[fieldTitle].Equals(filterValue)
             ) || true
             select new PromoCodeInfoContainer
             {
                 BannerLink = row["BannerLink"] as string
                 ....
             }; 
```

我尝试遵循 SQL 技术，如果没有提供条件，那么 OR 将是不影响选择的任何内容 (|| true)。在 linq 中这不起作用，它总是返回所有条目，无论“fieldTitle”和“filterValue”是否为空。任何人都可以提出正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:15:26.517

首先，删除`|| true`- 将返回每一行，总是 - 因此问题。

一种很好的方法是组合 - 这样就避免了在每行有值时测试`fieldTitle`/的需要`fieldValue`，或者如果它们是空白的，则每行都做任何事情：

```
var query = promoCodes.AsEnumerable();
if(!string.IsNullOrEmpty(fieldTitle) && !string.IsNullOrEmpty(fieldValue))
{
    query = from row in query
            where filterValue.Equals(row[fieldTitle])
            select row;
}
var result = from row in query
             select new PromoCodeInfoContainer {...} 
```

注意我也颠倒了，`Equals`所以我们知道的东西不是空的在左边；尽管取决于数据类型，`Equals(x,y)`或者`x == y`可能更可取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:15:49.567

```
var result = from row in promoCodes.AsEnumerable() 
             where  String.IsNullOrEmpty(fieldTitle) ||                  
                    String.IsNullOrEmpty(filterValue) ||
                    row[fieldTitle].Equals(filterValue)  
             select new PromoCodeInfoContainer
             {
                 BannerLink = row["BannerLink"] as string
             }; 
```

如果其中`fieldTitle`一个`filterValue`为 null 或为空，则不会执行行过滤。

另一种选择（我认为流畅的界面在这里看起来更好）：

```
var query = promoCodes.AsEnumerable();

if (!String.IsNullOrEmpty(fieldTitle) && !String.IsNullOrEmpty(fieldValue))
    query = query.Where(row => row[fieldTitle].Equals(filterValue));

var result = query.Select(row => new PromoCodeInfoContainer { ... }); 
```

# android - Unwind_Backtrace 的堆栈跟踪与映射文件地址不匹配

> ID：13146859
> 
> 赞同：0
> 
> 时间：2012-10-30T20:09:48.780
> 
> 标签：android, c, android-ndk, backtrace

使用 Unwind_Backtrace 创建了一个函数对来生成堆栈转储（想回溯）。但是，生成的地址转储与我在链接器映射文件中看到的地址没有关联。我究竟做错了什么？似乎映射文件中的所有地址都是相对的，而堆栈转储是绝对的。如果是这种情况，我从哪里得到基地址。有人可以指出我的“Unwind_Backtrace 傻瓜指南”吗？

```
 static void dbg_log( DebugTopic_type topic, 
                         tDebugLevel_type lvl, 
                         const char *str )
    {
    // stuff
    // more stuff
    // ...
        if ( lvl >= DEBUG_LEVEL_ERR || lvl == DEBUG_LEVEL_VERBOSE )
        {
          int depth = 0;
          _Unwind_Backtrace(trace_callback, &depth);
        }
    } 
```

以下代码是我在网上找到的，带有用于此实现的小修改：

```
static _Unwind_Reason_Code trace_callback(struct _Unwind_Context *ctx, void *d)
{
  _Unwind_Reason_Code reason = _URC_NO_REASON;
  int   *depth = (int*)d;
  char  buf[100];

  snprintf( buf, 100, "\t#%d:\tsf:%p\tip:%p\n", *depth,
            (void*)_Unwind_GetRegionStart(ctx),
            (void*)_Unwind_GetIP(ctx));
  (*depth)++;
  nw_dbgout( DEBUG_LEVEL_VERBOSE, buf, strlen(buf));

  if ( *depth >= 10 )
  {
    reason = _UA_CLEANUP_PHASE;
  }
  return reason;
} 
```

它们一起产生以下输出：

```
 #0: sf:0x51e3e3e8   ip:0x51e3e4c2
    #1: sf:0x51e3e718   ip:0x51e3e764
    #2: sf:0x51e778bc   ip:0x51e7794c
    #3: sf:0x51e7a6b8   ip:0x51e7a728
    #4: sf:0x51e7b640   ip:0x51e7b678
    #5: sf:0x408b2e40   ip:0x408b2eb4
    #6: sf:0x408ed418   ip:0x408ed5be
    #7: sf:0x408b2fc0   ip:0x408c4cd0
    #8: sf:0x408c887c   ip:0x408c8938
    #9: sf:0x40901198   ip:0x40901404 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:16:03.867

这可能会对您有所帮助：[https ://groups.google.com/forum/?fromgroups=#!topic/android-ndk/F1q_qw5MFfU](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/F1q_qw5MFfU)

问题是您的 ips 与加载库的地址相抵消。请特别参阅上面链接中的 GetLibraryAddress()。

# javascript - 如何在函数中包含变量 - Javascript

> ID：13146874
> 
> 赞同：0
> 
> 时间：2012-10-30T20:11:15.303
> 
> 标签：javascript, html

好的，所以我有一个变量，其中包含一些需要进入函数的信息。例如，如果我有；

```
var apikey="123456789";

function foo() {
    $.getJSON('http://api.websiteexample.com/ + apikey');
} 
```

我希望在请求 JSON 数据时将一些存储在变量中的信息添加到网站地址的末尾。

我在示例中所做的方法是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:11:46.643

尝试如下，

```
//Note the quotes moved -----------------v
$.getJSON('http://api.websiteexample.com/' + apikey); 
```

当您将其放在引号内时..它将被视为`string`. 您需要将其放在引号之外才能知道它是一个变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:13:41.347

试试这个方法

```
var apikey="123456789";

function foo(key) {
    $.getJSON('http://api.websiteexample.com/ ' + key);
}

foo(apikey); 
```

# c# - html中的多个模型

> ID：13146881
> 
> 赞同：1
> 
> 时间：2012-10-30T20:12:00.553
> 
> 标签：c#, html, asp.net-mvc, model

我正在尝试在单个 cshtml 文件中使用多个模型。我的代码是：

```
@model CostumeContest.Models.VoteModel  
@{
    ViewBag.Title = "Vote";
}

<h2 style="color: #B45F04">Vote Receipt</h2>
<b>Your Name:</b> @Model.VoterName
<br />
<b>Your Vote for Best Costume: </b>@Model.BestName
<br />
<b>Your Vote for Most Creative Costume:</b> @Model.CreativeName
<br />

<h2 style="color: #B45F04">Vote Summary</h2>

//@model CostumeContest.Models.VoteResult    this is giving me problems when not commented out
<h3 style="color: #B45F04">Best Costume</h3>

<h3 style="color: #B45F04">Most Creative Costume</h3> 
```

我在上面做的事情有什么问题，更重要的是，我该如何解决我的问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:26:54.797

使用 a`Tuple`来容纳两个对象。

```
@model Tuple<VoteModel, VoteResult> 
```

Gromer 的回答是更好的设计，但这是一个简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:16:19.460

最好的办法是制作一个包含你需要的一切的视图模型。由于您的代码很稀疏，因此我将在黑暗中试一试：

```
namespace CostumeContest.Models
{
    public class MyViewModel
    {
        public VoteModel VoteModel { get; set; }
        public VoteResult VoteResult { get; set; }
    }
} 
```

然后将第一`@model`行更改为：

`@model CostumeContest.Models.MyViewModel`

显然，您会将类的名称更改为对您有意义的名称。然后，您将创建一个`MyViewModel`实例，使用它设置`VoteModel`and`VoteResult`属性，并将 的实例发送`MyViewModel`到视图，而不是`VoteModel`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:13:57.480

您应该创建一个外部模型类，其属性包含其他两个类。

# android - Android：按钮单击事件不适用于简单的乘法应用程序

> ID：13146882
> 
> 赞同：1
> 
> 时间：2012-10-30T20:12:06.543
> 
> 标签：android

再会，

我是 android 新手并使用 Eclipse 3.7.2。我一直在网上关注示例（所谓的“添加两个数字”示例，但是在发现 AbsoluteLayout 已被弃用后，我正在使用 RelativeLayout 并且基本上从头开始。该应用程序基本上应该采用两个数字（多远一个人走了，他每英里的工资是多少）并弹出总工资。

该应用程序编译良好并在模拟器中启动。我很兴奋！弹出 2 个数字并按下按钮。没有什么。我查看并看到没有发生错误。

我的按钮监听器是否遗漏了什么？这是我输入的 Java 代码（2012 年 10 月 31 日下午 5:27 更新）：

```
package com.example.wing_it;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
EditText mile,driver;
Button button1;
TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mile= (EditText) findViewById(R.id.mile);
    button1 = (Button) findViewById(R.id.button1);
    tv = (TextView) findViewById(R.id.pay);
    driver= (EditText) findViewById(R.id.driver);
    button1.setOnClickListener((OnClickListener) this);
    }

public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
class clicker implements Button.OnClickListener
{
public void onClick(View v) {
    // TODO Auto-generated method stub
    {
        String a,b;
        Integer vis;
        a = mile.getText().toString();
        b = driver.getText().toString();
        vis = Integer.parseInt(a)*Integer.parseInt(b);
        tv.setText(vis.toString());
        }
    }
}       
} 
```

XML 代码如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/miles"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="40dp"
    android:text="@string/paypermile"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView2"
    android:layout_marginLeft="52dp"
    android:layout_marginTop="62dp"
    android:layout_toRightOf="@+id/textView2"
    android:text="@string/compute" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:layout_marginTop="46dp"
    android:text="@string/pay"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/mile"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/button1"
    android:ems="10"
    android:inputType="numberDecimal" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/driver"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView2"
    android:layout_alignBottom="@+id/textView2"
    android:layout_alignLeft="@+id/mile"
    android:layout_alignParentRight="true"
    android:ems="10"
    android:inputType="numberDecimal" />

<TextView
    android:id="@+id/pay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView3"
    android:layout_alignBottom="@+id/textView3"
    android:layout_alignParentRight="true"
    android:text="@string/totalpay"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

这是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.wing_it"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 </application>

</manifest> 
```

我在strings.xml 中将结果textview 的值设置为空（只是一个空白）。它被设置为“0”，我将其删除以查看它是否会有所作为。依然没有。

有什么我在这里俯瞰的吗？谢谢你的关注。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:16:58.400

```
 public class MainActivity extends Activity implements OnClickListener {

    public void onCreate() {
     button1 = (Button) findViewById(R.id.button1);
     button1.setOnClickListener(this);
    }

    public void onClick(View view) {
       // code here
    } 
```

很难阅读您的代码，但这应该可以工作（对不起，如果我有拼写错误，我无法从我的代码中剪切/粘贴（在另一台机器上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:24:48.463

好的，我肯定是一个新手，不得不求助于安装 IntelliJ 11，这在提示和清晰度方面似乎更加周到......然后回到 Eclipse 以确保问题不是 Eclipse （因为我已经更新了我拥有的版本，你会认为世界在一天内改变了哈哈！）

无论如何，我只需要更改几行代码即可。事实证明，我根本不需要针对答题器的课程。我只需要将“new button.OnClickListener”作为设置 OnClickListener 的参数。我真的在生活和学习，这是你学习的好日子。谢谢你，Simon 和 David M。祝你有美好的一天！

这是现在可供任何人参考的代码：

```
package com.example.wing_it;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
EditText mile,driver;
Button button1;
TextView tv;
private double x,y,z;
private Button calculate;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mile= (EditText) findViewById(R.id.mile);
    button1 = (Button) findViewById(R.id.button1);
    tv = (TextView) findViewById(R.id.pay);
    driver= (EditText) findViewById(R.id.driver);
    calculate=(Button)findViewById(R.id.button1);
    calculate.setOnClickListener(new Button.OnClickListener()
    {public void onClick
                (View  v) { calculate();}});
}
private void calculate()
{
    x=Double.parseDouble(mile.getText().toString());
    y=Double.parseDouble(driver.getText().toString());
    z=x*y;
    tv.setText(Double.toString(z));

    }

public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:14:30.783

出于某种原因，您的界面中有两种方法...单击按钮时，**它将调用名为 的`onClick`**方法，而不是`onClick1`。

```
class clicker implements Button.OnClickListener
{
public void onClick1(View v)
{
    String a,b;
    Integer vis;
    a = mile.getText().toString();
    b = driver.getText().toString();
    vis = Integer.parseInt(a)*Integer.parseInt(b);
    tv.setText(vis.toString());
}

public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

应该：

```
class clicker implements Button.OnClickListener
{
public void onClick(View v)
{
    String a,b;
    Integer vis;
    a = mile.getText().toString();
    b = driver.getText().toString();
    vis = Integer.parseInt(a)*Integer.parseInt(b);
    tv.setText(vis.toString());
} 
```

注意方法名称从`onClick1`到的变化`onClick`。

但是，您不需要使用嵌套类来实现 OnClickListener，而是可以使用所谓的`inner classes`.

这样做是这样的：

```
button1.setOnClickListener(new Button.OnClickListener() {
    public void onClick(View v)
    {
        String a,b;
        Integer vis;
        a = mile.getText().toString();
        b = driver.getText().toString();
        vis = Integer.parseInt(a)*Integer.parseInt(b);
        tv.setText(vis.toString());
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T14:04:06.593

有时 Android Studio 本身存在错误。关闭它并重新启动它并再次运行您的应用程序。它应该工作。

# css - 具有 3 列的液体布局

> ID：13146883
> 
> 赞同：0
> 
> 时间：2012-10-30T20:12:09.513
> 
> 标签：css

我在这个网站上工作，我在列方面遇到了一些问题。现在每列周围都有一个边框，这就是我想要的效果。但是，我希望它们具有相同的高度。我知道柱子的高度是最高的，但无论如何都要让它们始终保持不变。我尝试在每列周围分别放置一个容器，但我无法让它工作。关于如何做到这一点的任何建议？

这是网站：[http ://www.pitt.edu/~mkm49/1052/liquid.html](http://www.pitt.edu/~mkm49/1052/liquid.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T00:23:50.240

在那里我得到了你的回答兄弟，因为一个月前我自己也遇到了同样的问题......嗯，这是答案：

CSS 部分

```
 .col {
   float:left;
   margin-left:3%;
   width:20%;
   height:300px;
   border-radius:10px;
   border-style:solid;
   border-width:5px
   } 
```

html部分

```
 <div class="col">
    <p>Lorem...</p>
  </div

  <div class="col">
    <p>Lorem...</p>
  </div

  <div class="col">
    <p>Lorem...</p>
  </div 
```

应该工作因为那是我使用的^_^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:02:47.783

你需要一个“clearfix”......在所有列之后......像这样......

`<div class="clearfix"></div>`

.clearfix { 明确：两者；}

在这里您可以找到有关某个主题的更多[信息 我可以使用哪些“clearfix”方法？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)

# php - Htaccess：如何获取变量形式的 URL？

> ID：13146889
> 
> 赞同：3
> 
> 时间：2012-10-30T20:12:35.020
> 
> 标签：php, .htaccess, mod-rewrite

我确实有关于 htaccess 的问题。我正在尝试执行以下操作：

`blabla.com/lala`和`blabla.com/lulu`

lala 和 lulu 是我的变量（在两个站点上显示不同的内容，但它是同一个文件（example.php）。

所以我在 htaccess 中所做的是：

```
RewriteRule ^([^&]+)$ example.php?type=$1 
```

但是当回显 GET[type] 时，我只得到文件名（“example.php”）。但我希望它显示“lala”或“lulu”。

当我这样做时它会起作用：

```
RewriteRule ^blablabla/([^&]+)$ example.php?type=$1 
```

但我只是不需要“blablabla”：D

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:18:31.513

> 但是当回显 GET[type] 时，我只得到文件名（“example.php”）。但我希望它显示“lala”或“lulu”。

这是因为重写规则循环，直到进入重写引擎的 URI 与从引擎出来的 URI 相同。您的正则表达式`^([^&]+)$`匹配您的规则目标 ( `example.php`)。因此，您要么需要条件来检查 URI 是否已经`example.php`存在，要么检查请求是否指向不存在的文件或目录：

```
RerwiteCond %{REQUEST_URI} !/example\.php
RewriteRule ^(.+)$ example.php?type=$1 [L,QSA] 
```

或者

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ example.php?type=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:16:32.733

尝试这个？

```
RewriteRule ^([A-Za-z0-9-]+)/?$ example.php?type=$1 [NC,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:16:50.070

```
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 
```

`QSA`用于查询字符串重写

# http - CORS Access-Control-Allow-Headers 通配符被忽略？

> ID：13146892
> 
> 赞同：129
> 
> 时间：2012-10-30T20:13:26.883
> 
> 标签：http, browser, cors

我无法让跨域 CORS 请求使用 Chrome 正常工作。

请求标头：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:origin, content-type
Access-Control-Request-Method:POST
Connection:keep-alive
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 
```

响应标头：

```
Access-Control-Allow-Headers:*
Access-Control-Allow-Origin:*
Allow:GET, POST, OPTIONS
Content-Length:0
Date:Tue, 30 Oct 2012 20:04:28 GMT
Server:BaseHTTP/0.3 Python/2.7.3 
```

错误：

```
XMLHttpRequest cannot load domain. Request header field Content-Type is not allowed by Access-Control-Allow-Headers. 
```

服务选项请求的python代码是：

```
self.send_response(200)
self.send_header('Allow', 'GET, POST, OPTIONS')
self.send_header('Access-Control-Allow-Origin', '*')
self.send_header('Access-Control-Allow-Headers', '*')
self.send_header('Content-Length', '0')
self.end_headers() 
```

似乎`Access-Control-Allow-Origin`通配符被忽略了？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-10-30T21:03:41.570

`Access-Control-Allow-Headers`仅在 2016 年 5 月才将对标头中的通配符的支持[添加到生活标准](https://github.com/whatwg/fetch/issues/251)中，因此可能并非所有浏览器都支持它。在尚未实现此功能的浏览器上，它必须完全匹配：[https ://www.w3.org/TR/2014/REC-cors-20140116/#access-control-allow-headers-response-header](https://www.w3.org/TR/2014/REC-cors-20140116/#access-control-allow-headers-response-header)

如果您期望有大量的标头，您可以读入`Access-Control-Request-Headers`标头的值并将该值回显到`Access-Control-Allow-Headers`标头中。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-11-14T02:53:31.383

那些 CORS 标头不支持`*`作为值，唯一的方法是替换`*`为：

`Accept, Accept-CH, Accept-Charset, Accept-Datetime, Accept-Encoding, Accept-Ext, Accept-Features, Accept-Language, Accept-Params, Accept-Ranges, Access-Control-Allow-Credentials, Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Expose-Headers, Access-Control-Max-Age, Access-Control-Request-Headers, Access-Control-Request-Method, Age, Allow, Alternates, Authentication-Info, Authorization, C-Ext, C-Man, C-Opt, C-PEP, C-PEP-Info, CONNECT, Cache-Control, Compliance, Connection, Content-Base, Content-Disposition, Content-Encoding, Content-ID, Content-Language, Content-Length, Content-Location, Content-MD5, Content-Range, Content-Script-Type, Content-Security-Policy, Content-Style-Type, Content-Transfer-Encoding, Content-Type, Content-Version, Cookie, Cost, DAV, DELETE, DNT, DPR, Date, Default-Style, Delta-Base, Depth, Derived-From, Destination, Differential-ID, Digest, ETag, Expect, Expires, Ext, From, GET, GetProfile, HEAD, HTTP-date, Host, IM, If, If-Match, If-Modified-Since, If-None-Match, If-Range, If-Unmodified-Since, Keep-Alive, Label, Last-Event-ID, Last-Modified, Link, Location, Lock-Token, MIME-Version, Man, Max-Forwards, Media-Range, Message-ID, Meter, Negotiate, Non-Compliance, OPTION, OPTIONS, OWS, Opt, Optional, Ordering-Type, Origin, Overwrite, P3P, PEP, PICS-Label, POST, PUT, Pep-Info, Permanent, Position, Pragma, ProfileObject, Protocol, Protocol-Query, Protocol-Request, Proxy-Authenticate, Proxy-Authentication-Info, Proxy-Authorization, Proxy-Features, Proxy-Instruction, Public, RWS, Range, Referer, Refresh, Resolution-Hint, Resolver-Location, Retry-After, Safe, Sec-Websocket-Extensions, Sec-Websocket-Key, Sec-Websocket-Origin, Sec-Websocket-Protocol, Sec-Websocket-Version, Security-Scheme, Server, Set-Cookie, Set-Cookie2, SetProfile, SoapAction, Status, Status-URI, Strict-Transport-Security, SubOK, Subst, Surrogate-Capability, Surrogate-Control, TCN, TE, TRACE, Timeout, Title, Trailer, Transfer-Encoding, UA-Color, UA-Media, UA-Pixels, UA-Resolution, UA-Windowpixels, URI, Upgrade, User-Agent, Variant-Vary, Vary, Version, Via, Viewport-Width, WWW-Authenticate, Want-Digest, Warning, Width, X-Content-Duration, X-Content-Security-Policy, X-Content-Type-Options, X-CustomHeader, X-DNSPrefetch-Control, X-Forwarded-For, X-Forwarded-Port, X-Forwarded-Proto, X-Frame-Options, X-Modified, X-OTHER, X-PING, X-PINGOTHER, X-Powered-By, X-Requested-With`

* * *

## `.htaccess`示例（包括 CORS）：

```
<IfModule mod_headers.c>
  Header unset Connection
  Header unset Time-Zone
  Header unset Keep-Alive
  Header unset Access-Control-Allow-Origin
  Header unset Access-Control-Allow-Headers
  Header unset Access-Control-Expose-Headers
  Header unset Access-Control-Allow-Methods
  Header unset Access-Control-Allow-Credentials

  Header set   Connection                         keep-alive
  Header set   Time-Zone                          "Asia/Jerusalem"
  Header set   Keep-Alive                         timeout=100,max=500
  Header set   Access-Control-Allow-Origin        "*"
  Header set   Access-Control-Allow-Headers       "Accept, Accept-CH, Accept-Charset, Accept-Datetime, Accept-Encoding, Accept-Ext, Accept-Features, Accept-Language, Accept-Params, Accept-Ranges, Access-Control-Allow-Credentials, Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Expose-Headers, Access-Control-Max-Age, Access-Control-Request-Headers, Access-Control-Request-Method, Age, Allow, Alternates, Authentication-Info, Authorization, C-Ext, C-Man, C-Opt, C-PEP, C-PEP-Info, CONNECT, Cache-Control, Compliance, Connection, Content-Base, Content-Disposition, Content-Encoding, Content-ID, Content-Language, Content-Length, Content-Location, Content-MD5, Content-Range, Content-Script-Type, Content-Security-Policy, Content-Style-Type, Content-Transfer-Encoding, Content-Type, Content-Version, Cookie, Cost, DAV, DELETE, DNT, DPR, Date, Default-Style, Delta-Base, Depth, Derived-From, Destination, Differential-ID, Digest, ETag, Expect, Expires, Ext, From, GET, GetProfile, HEAD, HTTP-date, Host, IM, If, If-Match, If-Modified-Since, If-None-Match, If-Range, If-Unmodified-Since, Keep-Alive, Label, Last-Event-ID, Last-Modified, Link, Location, Lock-Token, MIME-Version, Man, Max-Forwards, Media-Range, Message-ID, Meter, Negotiate, Non-Compliance, OPTION, OPTIONS, OWS, Opt, Optional, Ordering-Type, Origin, Overwrite, P3P, PEP, PICS-Label, POST, PUT, Pep-Info, Permanent, Position, Pragma, ProfileObject, Protocol, Protocol-Query, Protocol-Request, Proxy-Authenticate, Proxy-Authentication-Info, Proxy-Authorization, Proxy-Features, Proxy-Instruction, Public, RWS, Range, Referer, Refresh, Resolution-Hint, Resolver-Location, Retry-After, Safe, Sec-Websocket-Extensions, Sec-Websocket-Key, Sec-Websocket-Origin, Sec-Websocket-Protocol, Sec-Websocket-Version, Security-Scheme, Server, Set-Cookie, Set-Cookie2, SetProfile, SoapAction, Status, Status-URI, Strict-Transport-Security, SubOK, Subst, Surrogate-Capability, Surrogate-Control, TCN, TE, TRACE, Timeout, Title, Trailer, Transfer-Encoding, UA-Color, UA-Media, UA-Pixels, UA-Resolution, UA-Windowpixels, URI, Upgrade, User-Agent, Variant-Vary, Vary, Version, Via, Viewport-Width, WWW-Authenticate, Want-Digest, Warning, Width, X-Content-Duration, X-Content-Security-Policy, X-Content-Type-Options, X-CustomHeader, X-DNSPrefetch-Control, X-Forwarded-For, X-Forwarded-Port, X-Forwarded-Proto, X-Frame-Options, X-Modified, X-OTHER, X-PING, X-PINGOTHER, X-Powered-By, X-Requested-With"
  Header set   Access-Control-Expose-Headers      "Accept, Accept-CH, Accept-Charset, Accept-Datetime, Accept-Encoding, Accept-Ext, Accept-Features, Accept-Language, Accept-Params, Accept-Ranges, Access-Control-Allow-Credentials, Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Expose-Headers, Access-Control-Max-Age, Access-Control-Request-Headers, Access-Control-Request-Method, Age, Allow, Alternates, Authentication-Info, Authorization, C-Ext, C-Man, C-Opt, C-PEP, C-PEP-Info, CONNECT, Cache-Control, Compliance, Connection, Content-Base, Content-Disposition, Content-Encoding, Content-ID, Content-Language, Content-Length, Content-Location, Content-MD5, Content-Range, Content-Script-Type, Content-Security-Policy, Content-Style-Type, Content-Transfer-Encoding, Content-Type, Content-Version, Cookie, Cost, DAV, DELETE, DNT, DPR, Date, Default-Style, Delta-Base, Depth, Derived-From, Destination, Differential-ID, Digest, ETag, Expect, Expires, Ext, From, GET, GetProfile, HEAD, HTTP-date, Host, IM, If, If-Match, If-Modified-Since, If-None-Match, If-Range, If-Unmodified-Since, Keep-Alive, Label, Last-Event-ID, Last-Modified, Link, Location, Lock-Token, MIME-Version, Man, Max-Forwards, Media-Range, Message-ID, Meter, Negotiate, Non-Compliance, OPTION, OPTIONS, OWS, Opt, Optional, Ordering-Type, Origin, Overwrite, P3P, PEP, PICS-Label, POST, PUT, Pep-Info, Permanent, Position, Pragma, ProfileObject, Protocol, Protocol-Query, Protocol-Request, Proxy-Authenticate, Proxy-Authentication-Info, Proxy-Authorization, Proxy-Features, Proxy-Instruction, Public, RWS, Range, Referer, Refresh, Resolution-Hint, Resolver-Location, Retry-After, Safe, Sec-Websocket-Extensions, Sec-Websocket-Key, Sec-Websocket-Origin, Sec-Websocket-Protocol, Sec-Websocket-Version, Security-Scheme, Server, Set-Cookie, Set-Cookie2, SetProfile, SoapAction, Status, Status-URI, Strict-Transport-Security, SubOK, Subst, Surrogate-Capability, Surrogate-Control, TCN, TE, TRACE, Timeout, Title, Trailer, Transfer-Encoding, UA-Color, UA-Media, UA-Pixels, UA-Resolution, UA-Windowpixels, URI, Upgrade, User-Agent, Variant-Vary, Vary, Version, Via, Viewport-Width, WWW-Authenticate, Want-Digest, Warning, Width, X-Content-Duration, X-Content-Security-Policy, X-Content-Type-Options, X-CustomHeader, X-DNSPrefetch-Control, X-Forwarded-For, X-Forwarded-Port, X-Forwarded-Proto, X-Frame-Options, X-Modified, X-OTHER, X-PING, X-PINGOTHER, X-Powered-By, X-Requested-With"
  Header set   Access-Control-Allow-Methods       "CONNECT, DEBUG, DELETE, DONE, GET, HEAD, HTTP, HTTP/0.9, HTTP/1.0, HTTP/1.1, HTTP/2, OPTIONS, ORIGIN, ORIGINS, PATCH, POST, PUT, QUIC, REST, SESSION, SHOULD, SPDY, TRACE, TRACK"
  Header set   Access-Control-Allow-Credentials   "true"

  Header set DNT "0"
  Header set Accept-Ranges "bytes"
  Header set Vary "Accept-Encoding"
  Header set X-UA-Compatible "IE=edge,chrome=1"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set X-Content-Type-Options "nosniff"
  Header set X-Xss-Protection "1; mode=block"
</IfModule> 
```

* * *

### 常问问题：

*   为什么`Access-Control-Allow-Headers`, `Access-Control-Expose-Headers`,`Access-Control-Allow-Methods`值超长？

    那些不支持`*`语法，所以我从网络上收集了最常见（和异国情调）的标题，各种格式[#1](https://gist.github.com/eladkarako/253ea42ede4225c4f359#file-all_http_headers__separated_by_newline-txt) [#2](https://gist.github.com/eladkarako/9a1f6b523562320c0a37#file-all_http_headers__json-json) [#3](https://gist.github.com/eladkarako/67e065eb80a7a79ed356#file-all_http_headers__separated_by_comma-txt) [（我会不时更新列表）]

*   你为什么使用`Header unset ______`语法？

    GoDaddy 服务器（我的网站托管在它上面..）有一个奇怪的错误，如果标题已经设置，以前的值将加入现有的..（而不是替换它）这样我“预清理”现有值[（真的只是一个*快速&&肮脏*的解决方案）]

*   “按原样”使用对我来说安全吗？

    嗯.. 大部分答案是**肯定**的，因为它将`.htaccess`标头限制为从以下“文件夹”位置提供的脚本（PHP、HTML、...）和资源（.JPG、.JS、.CSS）。您可以选择删除这些`Access-Control-Allow-Methods`行。[此外`Connection`, `Time-Zone`,`Keep-Alive`和`DNT`, `Accept-Ranges`, `Vary`, `X-UA-Compatible`, `X-Frame-Options`,`X-Content-Type-Options`和`X-Xss-Protection`只是我用于在线服务的建议..也可以随意删除这些...]

*[取自我[上面的评论](https://stackoverflow.com/questions/13146892/cors-access-control-allow-headers-wildcard-being-ignored#comment48526275_13147554)]*

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-06-15T15:50:34.080

我发现`Access-Control-Allow-Headers: *`应该只为 OPTIONS 请求设置。如果您为 POST 请求返回它，那么浏览器会取消请求（至少对于 chrome）

以下 PHP 代码适用于我

```
// Allow CORS
if (isset($_SERVER['HTTP_ORIGIN'])) {
    header("Access-Control-Allow-Origin: {$_SERVER['HTTP_ORIGIN']}");
    header('Access-Control-Allow-Credentials: true');    
    header("Access-Control-Allow-Methods: GET, POST, OPTIONS"); 
}   
// Access-Control headers are received during OPTIONS requests
if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {
    header("Access-Control-Allow-Headers: *");
} 
```

我发现类似的问题有一些误导性的回答：

*   服务器线程说这是 chrome 的 2 年错误：`Access-Control-Allow-Headers`与 localhost 不匹配。错了：我可以通过 Post 正常使用 CORS 到我的本地服务器
*   `Access-Control-Allow-Headers`接受通配符。这也是错误的，通配符对我有用（我只用 Chrome 测试过）

这需要我半天时间才能弄清楚这个问题。

快乐编码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-27T08:03:53.483

引自 monsur，

> Access-Control-Allow-Headers 标头不允许使用通配符。它必须完全匹配： [http](http://www.w3.org/TR/cors/#access-control-allow-headers-response-header) ://www.w3.org/TR/cors/#access-control-allow-headers-response-header 。

所以这是我的php解决方案。

```
if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {
  header('Access-Control-Allow-Headers: ' . 
  $_SERVER['HTTP_ACCESS_CONTROL_ALLOW_HEADERS']);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-14T08:56:22.877

这是 nginx 的咒语，在里面

```
location / {
    # Simple requests
    if ($request_method ~* "(GET|POST)") {
      add_header "Access-Control-Allow-Origin"  *;
    }

    # Preflighted requests
    if ($request_method = OPTIONS ) {
      add_header "Access-Control-Allow-Origin"  *;
      add_header "Access-Control-Allow-Methods" "GET, POST, OPTIONS, HEAD";
      add_header "Access-Control-Allow-Headers" "Authorization, Origin, X-Requested-With, Content-Type, Accept";
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-15T15:49:47.700

我被绊倒了，因为我真正想要的是一个稍微不同的标题。

*   `access-control-ALLOW-headers`仅适用于飞行前请求。[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Headers)
*   `access-control-EXPOSE-headers`适用于请求本身，这意味着 Javascript 可以读取此处声明的标头。这就是我需要的。[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers)

我知道这是切线相关的，但我希望它对某人有所帮助。

# php - 使用 Timezome 格式的 php 日期时间

> ID：13146894
> 
> 赞同：2
> 
> 时间：2012-10-30T20:13:27.220
> 
> 标签：php, datetime, timezone

我正在尝试创建一个 DateTime 对象，但具有特定的 DateTimeZone（服务器可以拥有它自己的 DateTimeZone）。假设以下字符串：

```
$textoFecha = '15-30-10-2012'; //H-d-m-Y 
```

如果我尝试这样做：

```
$fecha = DateTime::createFromFormat('H-d-m-Y', $textoFecha);
$fecha->setTimezone(new DateTimeZone("America/Costa_Rica")); 
```

make的结果`echo $fecha->format('H-d-m-Y')`是：

```
19-30-10-2012 
```

我的问题是，我怎样才能设置 DateTimeZome 但保持给定值？(15-30-10-2012)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:21:31.760

您必须在 中指定时区`DateTime::createFromFormat`，如下所示：

```
$textoFecha = '15-30-10-2012'; //H-d-m-Y
$fecha = DateTime::createFromFormat('H-d-m-Y', $textoFecha, new DateTimeZone("America/Costa_Rica"));
echo $fecha->format('H-d-m-Y'); // prints 15-30-10-2012 
```

工作示例：[http ://codepad.viper-7.com/dqHDLW](http://codepad.viper-7.com/dqHDLW)

# html - 如何仅允许水平滚动一行图像并显示溢出，而不水平滚动页面的其余部分？

> ID：13146895
> 
> 赞同：0
> 
> 时间：2012-10-30T20:13:27.400
> 
> 标签：html, css, scroll, overflow

我有一个页面宽度为 960 像素，我有一排图像要溢出页面的右侧，并允许显示溢出的图像和水平滚动。我不希望整个页面水平滚动，只是那个元素。

使水平滚动工作相对容易，但是如果不增加整个页面的宽度（因此，使页面水平滚动），我就无法显示溢出图像。

我的 CSS：

```
container{
  width:960px;
  margin: 0 auto;
  }

.pic-container {
  white-space:nowrap; 
  overflow:scroll;
  } 
```

我的（简化的）HTML：

```
<body>
<container>
  <div class="pic-container">
    <div class="pic-row">
      <img src="1.jpg">
      <img src="2.jpg">
      <img src="3.jpg">
      <img src="4.jpg">
      <img src="5.jpg">
      <img src="6.jpg">
    </div>
  </div>
</container>
</body> 
```

这是我正在寻找的小图：

![在此处输入图像描述](../Images/8106adab277dd04a5ddcd9aff633d7c3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:20:08.230

这可能会满足您的需求（[请参阅此处的 JSFiddle](http://jsfiddle.net/q4H9N/1/)）：

```
<section>
  <div class="pic-container">
    <div class="pic-row">
      <img src="1.jpg">
      <img src="2.jpg">
      <img src="3.jpg">
      <img src="4.jpg">
      <img src="5.jpg">
      <img src="6.jpg">
    </div>
  </div>
</section>​ 
```

CSS：

```
body {
   overflow: hidden;
}
section {
  /* The width of your document, I suppose */
  width:600px;
  margin: 0 auto;
  white-space:nowrap; 
  overflow: scroll;
}
.pic-container {
 /* As large as it needs to be */
  width: 1500px;
}​ 
```

我们所做的是隐藏 的溢出`body`，这会阻止水平滚动条，即使页面不够宽以显示所有内容。然后你让它显示容器上的滚动条`div`，具有设定的宽度（大概是文档的宽度），并使其中的内容`div`尽可能宽。

另一个实现，它只是设置的宽度`section`而不是`body`，[可以在这里查看](http://jsfiddle.net/Fds4J/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:19:51.633

我想不出只使用 html + css 的方法，所以我依靠 JQuery。这实际上工作得很好，而且降级也很好——如果没有 javascript，图像仍然可以滚动，它们只是不会渗入右边距（默认情况下，'.pic-container' div 没有宽度，直到 js 添加它在）。

```
// Update pic-container width
function picWidth() {
  win = $(document).width();
  width = String( Math.round(((win-960)/2) + 960) );

  $('.pic-container').css({'width' : width});
}
$(window).resize(picWidth);
picWidth(); 
```

# javascript - Rails应用程序中的谷歌地图随机清除？

> ID：13146897
> 
> 赞同：0
> 
> 时间：2012-10-30T20:13:39.840
> 
> 标签：javascript, ruby-on-rails, google-maps-api-3

我和我的团队在我们的 Rails 应用程序中遇到了谷歌地图对象的问题。

基本上，我们有一个数据库。其中一张表有 9 行，每行都有位置属性。当加载了谷歌地图的页面时，它会查询数据库，将这 9 行的所有位置属性抓取到一个数组中，循环遍历并在地图上的所有 9 个位置设置标记，然后在用户当前的位置设置标记是，然后在所述用户周围放置 500M 半径。这一切都很好（我印象深刻，因为我以前从未做过这样的事情）。但是，我们制作了一个可以通过 ipad 等移动设备访问的页面。我的团队成员都解决了所有问题，效果很好。

我们现在遇到了一个奇怪的问题。当我在笔记本电脑上导航到 page.mobile 以在浏览器中查看移动页面时，如果我在 ipad 上连接并导航到那里，它的作用是加载地图、所有标记、用户标记、半径，然后停止一秒钟，然后清除所有标记和半径并在坐标 0,0（海洋中部）重新加载地图。我不明白为什么会这样？地图加载后没有执行脚本。填充地图的函数以及我执行的最后一个 javascript 函数。控制台没有出现错误，地图加载后rails服务器没有任何反应，最后加载的是assets/beachflag.png（用于用户位置），地图仍然可以正常工作，只是所有的标记和事情已经过去了。

桌面版似乎也可以正常工作。

有没有其他人看到过类似的问题？我需要帮助...这是一团糟！

ps 如果我使用最新版本的 rails 和 ruby​​ 很重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:25:41.697

@rthbound 不，只是使用 javascript api。所有谷歌地图的东西都是用javascript完成的。

不管怎样，我想通了。我的 javascript 文件中有一个函数来初始化地图。我在页面上调用了它两次，一次在页面上的脚本标记中，一次在正文标记的 onload 函数中。onload 最后发生，因此在地图被填充后，因此清除地图并将其设置为 0,0

# python - PyInstaller 运行时错误？(R6034)

> ID：13146899
> 
> 赞同：10
> 
> 时间：2012-10-30T20:13:41.627
> 
> 标签：python, pyinstaller

我终于让 PyInstaller 构建一个 exe 文件，但它没有运行。一旦我打开它，我就会在一个对话框中得到它：

```
Runtime Error!
Program C:\.....\MCManager.exe

R6034
An application has made an attempt to load the C runtime library incorrectly.
Please contact the application's support team for more information. 
```

这是我的规格：

```
# -*- mode: python -*-
a = Analysis(['MCManager.py'],
             pathex=['C:\\Users\\Lucas\\Dropbox'],
             hiddenimports=[],
             hookspath=None)
pyz = PYZ(a.pure)
exe = EXE(pyz,
          a.scripts,
          a.binaries,
          a.zipfiles,
          a.datas,
          name=os.path.join('dist', 'MCManager.exe'),
          debug=False,
          strip=None,
          upx=True,
          console=False,
          icon='MCManager.ico')
app = BUNDLE(exe,
             name=os.path.join('dist', 'MCManager.exe.app')) 
```

我环顾四周，似乎没有人有同样的问题。

如果它改变了一切，这个脚本使用 wxPython。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-18T15:34:19.883

我打算发表评论，但没有足够的代表。虽然前一段时间有人问过这个问题，但我最近遇到了同样的问题，结果证明这是 3.2 版的 Pyinstaller 错误。

升级到 pyinstaller 3.2 后，生成的 exe 以 R6034 终止： [https ://github.com/pyinstaller/pyinstaller/issues/1985](https://github.com/pyinstaller/pyinstaller/issues/1985)

PyInstaller 3.2，OneFile R6034，32 位 Python 2.7.11 [https://github.com/pyinstaller/pyinstaller/issues/2042](https://github.com/pyinstaller/pyinstaller/issues/2042)

看起来他们已经在最新的开发版本中修复了这个问题，建议

```
pip install https://github.com/pyinstaller/pyinstaller/archive/develop.zip 
```

在我的需求文件中使用它而不是 pyinstaller==3.2 为我修补了它！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-29T20:05:15.347

我最近开始收到“运行时错误？（R6034）”它是在一个可靠的现有 python 程序上，我之前使用 pyinstaller 编译到一个文件。我注意到这个问题只发生在我在编译后重命名 exe 之后。一旦我将它重命名为原始的 exe 名称，R6034 就消失了。

Leason 学会了...不要在使用 pyinstaller 构建后重命名您的 exe。如果您需要您的 exe 具有不同的名称，则更改源 py 名称，然后重新编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T15:27:38.587

这似乎是类似的问题[https://github.com/pyinstaller/pyinstaller/issues/689](https://github.com/pyinstaller/pyinstaller/issues/689)

看看您是否可以使用该解决方法：

> 我能够通过使用 onedir 选项而不是 onefile 构建可执行文件来解决问题，然后只需将清单移动到包含单文件可执行文件的目录中，这样它就可以工作了。

似乎他们正在修复它在 3.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-22T10:30:11.323

我有同样的问题，没有重命名任何东西，我只是构建 -F 并在 3.2 版本中崩溃但是这个错误不会出现在 2.1 版本中。

链接： [https ://github.com/pyinstaller/pyinstaller/releases/download/v2.1/PyInstaller-2.1.zip](https://github.com/pyinstaller/pyinstaller/releases/download/v2.1/PyInstaller-2.1.zip)

我的建议？pip uninstall pyinstaller 之后您应该安装 2.1 版并准备好再次运行。./setup.py 构建 ./setup.py 安装

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-06T22:05:46.547

如果您在 pyinstaller 构建的 exe 中调用 popen，也会发生此错误。要修复此错误，您必须为 popen 调用的 stdout 使用显式文件句柄，如下例所示。

```
import sys
import subprocess
from PyQt4 import QtGui

def verify_license():
    tmp_file = '.license_output'

    try:
        with open(tmp_file, 'w+') as file_obj:
            proc = subprocess.Popen(['echo', 'hi'], shell=True,
                                    stdout=file_obj, stderr=subprocess.STDOUT,
                                    stdin=subprocess.PIPE)
            ret = proc.wait()

        if ret != 0:
            sys.exit(-1)

        with open(tmp_file, 'r') as file_obj:
            output = file_obj.read()

    except Exception as err:
        sys.exit(-1)

    if 'hi' not in output:
        raise Exception('bad news: output was %s' % (output))

def main():
    app = QtGui.QApplication(sys.argv)

    w = QtGui.QWidget()
    w.resize(250, 150)
    w.move(300, 300)
    w.setWindowTitle('Simple')
    w.show()

    sys.exit(app.exec_())

if __name__ == '__main__':
    verify_license()
    main() 
```

# java - Eclipse AWT，无法调试

> ID：13146900
> 
> 赞同：1
> 
> 时间：2012-10-30T20:13:44.550
> 
> 标签：java, eclipse, debugging, awt

我希望能够在eclipse中调试以下代码：

```
String local;   
try {
    local = InetAddress.getLocalHost().getHostAddress() + ":" + port;
} catch (UnknownHostException ex) {
    local = "Network Error";
}
ip = (String) JOptionPane.showInputDialog(null, "IP: ", "Info", 
                             JOptionPane.INFORMATION_MESSAGE, null, null, local); 
```

当我这样做时：“运行为 > Java 应用程序”，一切正常。但是当我尝试调试时（在 eclipse Juno 32 或 64 位中），它永远不会出线：

```
ip = (String) JOptionPane.showInputDialog(null, "IP: ", "Info", JOptionPane.INFORMATION_MESSAGE, null, null, local); 
```

**附加信息：**

我在 Windows 7 64 位。当我暂停代码并查看堆栈时，它似乎被阻塞在：

```
while (keepBlockingCT.get() &&
        ((extCondition != null) ? extCondition.evaluate() : true)) {
    getTreeLock().wait();
} 
```

它在包 java.awt 的文件/类 WaitDispatchSupport 中；

我使用 JDK 1.7（最新的 JDK）

**编辑：** 此外，对话框永远不会出现

# objective-c - 如果一个类没有记录的指定初始化程序怎么办？

> ID：13146901
> 
> 赞同：9
> 
> 时间：2012-10-30T20:13:46.233
> 
> 标签：objective-c, ios, cocoa-touch

我正在寻找有关如何处理这种情况的一般指导。这是一个具体的例子。

我是 UIImageView 的子类化，并且我想重写 initWithImage 以在超类 init 本身与提供的图像之后添加我自己的初始化代码。

但是，没有记录 UIImageView 的指定初始化程序，所以我应该调用哪个超类初始化程序来确保我的子类被正确初始化？

如果一个类没有指定初始化器，我是否：

1.  假设调用任何类的 (UIImageView) 初始化程序是安全的？
2.  查看指定初始化程序的超类（UIView）？

在这种情况下，#1 似乎是答案，因为在我的重写初始化程序中执行以下操作是有意义的：

```
- (id)initWithImage:(UIImage *)image
{
    self = [super initWithImage:image];
    if (self) {
        // DO MY EXTRA INITIALIZATION HERE
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T20:32:53.593

UIImageView 有两个初始化器，因此您可能需要确保您的子类处理这两个初始化路径。

您可以简单地声明这`-initWithImage:`是*您*指定的初始化程序，并且不支持所有其他初始化程序。

此外，您可以实现`-initWithImage:highlightedImage:`并引发异常以指示它不受支持。

或者，您可以声明`-initWithImage:highlightedImage:`为您的指定初始化程序，并`-initWithImage:`调用您指定的初始化程序。

或者，您可能会发现`-initWithImage:`无论您的类是否使用`-initWithImage:`或初始化，都会调用您的初始化程序`-initWithImage:highlightedImage:`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-07T22:21:35.677

UIImageView 文档很糟糕。它显示了两个初始化程序，但您可能会遇到没有调用它们的情况。例如，我正在使用 IB 并且只`initWithCoder:`被调用。

```
- (id)init
{
    return [super init];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    return [super initWithCoder:aDecoder];
}

- (id)initWithFrame:(CGRect)frame
{
    return [super initWithFrame:frame];
}

- (id)initWithImage:(UIImage *)image
{
    self = [super initWithImage:image];
    return self;
}

- (id)initWithImage:(UIImage *)image highlightedImage:(UIImage *)highlightedImage
{
    self = [super initWithImage:image highlightedImage:highlightedImage];
    return self;
} 
```

子类化 UIImageView 的唯一正确方法是子类化所有初始化程序，并且每个子类只能调用具有相同名称的父初始化程序。例如：

`subclass -init`可以打电话`UIImageView -init`，但不能打电话`UIImageView -initWithCoder:`。

是的，没有指定是一个真正的痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T00:16:09.483

没有指定初始化程序的危险在于，您可能调用的任何初始化程序都可以根据其他初始化程序之一完成其工作。在这种情况下，它可能会意外调用您的一个覆盖，这将无法按预期方式工作。

如果您的类只有一个初始化程序并且它是超类初始化程序的覆盖，那么调用它覆盖的初始化程序是安全的。那是因为超级初始化器不可能（直接或间接）重新进入自己，所以它不可能重新进入你的覆盖。

您的类也可以实现任意数量的初始化程序，只要它们与超类中的*任何初始化程序名称**都不*相同。由于您的名称是唯一的，因此任何超类初始化程序都不会意外调用它们。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T21:36:32.757

派生自的每个类`NSObject`都有`init`方法作为一个初始化程序，该初始化程序将为该对象执行初始化过程。因此，如果您不确定，您始终可以`self = [super init]`在自定义初始化程序中使用。考虑到`UIImageView`苹果提供了两个初始化程序，您可能必须同时覆盖它们或向用户抛出他们无法使用此方法的异常（不推荐）。

例如：-

```
- (id)initWithCustomParam:(NSString *)param {

    if (self = [super init]) {
        self.myparam = param;
    }
    return self;
} 
```

然后你可以实现其他初始化器，

```
- (id)initWithImage:(UIImage *)image {

    if (self = [self initWithCustomParam:@"default value"]) {
        self.image = image;
    }
    return self;
} 
```

或定义，

```
- (id)initWithImage:(UIImage *)image customParam:(NSString *)string {

    if (self = [self initWithCustomParam:string]) {
        self.image = image;
    }
    return self;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T00:40:11.573

另一种方法是偷懒。您可以使用 viewDidLoad 或 viewDidMoveToSuperview 等方法进行一些设置。这实际上取决于设置何时很重要。*

# git - 如何仅还原工作目录中的更改

> ID：13146908
> 
> 赞同：6
> 
> 时间：2012-10-30T20:13:59.867
> 
> 标签：git

我有一个损坏的合并，我想恢复工作目录中的更改以找出它损坏的位置。我想保留索引，以便可以将修复添加到它并最终签入。本质上，我希望工作目录与 HEAD 相同，但不修改索引。这实质上会将基于索引的反向补丁应用到工作目录。看起来这将与 a 相反`git reset`。

你如何在 git 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-16T21:26:10.250

您可以提交索引，重置工作目录，然后重置提交。

```
$ git commit -m "blah"
$ git reset --hard
$ git reset --soft HEAD^ 
```

**编辑：** 看来我误解了原来的问题。

要在不影响索引的情况下将工作树重置为 HEAD，请执行以下操作：

```
$ git checkout -- .
$ git diff --cached | git apply --reverse 
```

（看起来@Brice 已经给出了这个答案。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-09T09:05:28.517

我在看一个做同样事情的简单命令，但没有。尽管您在问题中说明了这样做的正确方法：

> 这实质上会将基于索引的反向补丁应用到工作目录。

所以答案很简单：

```
git diff --no-color --staged | git apply --reverse 
```

所以不需要提交任何东西，只需应用索引的反向即可。

请注意，如果工作目录中的某些更改没有暂存/在索引中，它们将不会以这种方式反转。

如果要恢复工作目录中的所有内容（即使是未编入索引的更改和新文件），除了索引本身，请在之前运行以下命令：

```
git stash save --include-untracked --keep-index 
```

如果您不打算重复使用它，您可以在之后删除它：

```
git stash drop 
```

如果您想恢复除未跟踪文件（不在索引中的新文件）之外的所有内容，
请先执行以下操作：

```
git checkout . 
```

总结一下，这里有几个 bash 函数：

```
function git-unapply-index {
    git diff --no-color --staged | which git apply --reverse
}

function git-revert-workdir-keep-untracked {
    git checkout .
    git-unapply-index
}

function git-revert-workdir-all {
    git stash save --include-untracked --keep-index
    git stash drop
    git-unapply-index
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T07:25:05.463

可以为现有提交生成反向补丁，而不是为索引中的更改生成。

1.  提交索引中的更改[可能在 diff 分支中]。
2.  执行`git revert -n <commit>`

它将在您的工作目录中为您的提交生成反向补丁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T20:18:57.807

你试过`git checkout <commit>`吗？

的片段`git help checkout`：

```
git checkout [<branch>], git checkout -b|-B <new_branch> [<start point>], git checkout [--detach] [<commit>]
       This form switches branches by updating the index, working tree, and HEAD to reflect the specified branch or commit.

       If -b is given, a new branch is created as if git-branch(1) were called and then checked out; in this case you can use the --track or --no-track
       options, which will be passed to git branch. As a convenience, --track without -b implies branch creation; see the description of --track below.

       If -B is given, <new_branch> is created if it doesn’t exist; otherwise, it is reset. This is the transactional equivalent of

           $ git branch -f <branch> [<start point>]
           $ git checkout <branch>

       that is to say, the branch is not reset/created unless "git checkout" is successful. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T20:24:32.443

也许你正在寻找`git stash`。`git stash`您可以使工作目录看起来像 HEAD，并且当您处于该状态时，您可以做任何其他事情。完成后，您可以`git stash pop`取回所有更改。您必须确保不更改隐藏的文件，否则您将需要解决合并冲突。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-27T01:19:49.270

这正是您需要的：

```
git commit -m "Say thanks to John McClane"
git reset --hard HEAD^
git reset HEAD@{1} -- . 
```

我假设您在执行此操作之前已经暂存了所有必要的文件。否则将`-a`密钥添加到第一个命令或在它之前调用*git-add*。

请注意，`--`最后一个命令是可选的，它仅用于说明目的，以将其与其他形式的*git-reset*区分开来。

# ruby - 对于 ruby 中的深层命名空间，如何最好地管理编码风格和范围运算符的烦恼？

> ID：13146910
> 
> 赞同：4
> 
> 时间：2012-10-30T20:14:13.487
> 
> 标签：ruby, coding-style, namespaces, scope

我发现自己在与深度命名空间（> = 4 的深度）作斗争，即使它们在逻辑上是有意义的，以避免它们引起的一些烦恼。

首先，我希望我的代码能够很好地适合文本编辑器窗口，而不必过宽。尽管 2 sp 的 ruby​​ 常规缩进肯定有帮助，但这促使我使用范围运算符来避免所有嵌套缩进。但另一方面，使用范围运算符会带来一系列问题......

首先，要在当前命名空间上下文的上游某处使用常量，您必须使用该常量的完整命名空间以便 Ruby 找到它。而且由于当我使用范围运算符时，命名空间深度很深，因此引用常量和类会变得很长。

```
require 'a/b'
class A::B::C
  FOO = 'hi'
end
class A::B::C::D
  # FOO # can't do this. raises NameError: uninitialized constant; would work fine if classes used nested format, but then the extra indent makes for wide code.
  A::B::C::FOO # must use full reference when using scopes, ugh. Depending on the real names of A,B,C, this could be rather long as well.
end 
```

其次，我遇到了一种情况，我必须在我的类定义之后需要文件，我不想这样做（我喜欢顶部的 require 语句），就像这样。

```
# File: a/b/c.rb
require 'a/b'
# require 'a/b/c/d' # can't put it here, otherwise you get uninitialize const A::B::C when a/b/c/d.rb is getting interpreted.
class A::B::C
  def initialize
    @d = A::B::C::D.new 
  end
end
require 'a/b/c/d' # it bothers me putting requires anywhere but at the top

# File: a/b/c/d.rb
require 'a/b/c'
class A::B::C::D
end 
```

有些东西必须付出。也许我只需要放弃并扩大我的编辑器并坚持嵌套，或者我不了解如何最好地使用范围运算符在命名空间的上下文中工作。

有人对我应该如何处理管理这些问题的深层命名空间有任何建议吗？1\. 通过最小化缩进来降低代码宽度 2\. 当常量定义在当前上下文的上游时，能够仅使用常量名称 (FOO) 来引用常量 3\. 将所有 require 语句保留在源代码文件的顶部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:34:28.077

你自己在你的问题中回答了你的问题:-)

您试图避免代码中范围过长的问题。

简单地看一下——如果你引用了一个在你的范围层次结构中很深的常量——你可以在技术上做什么：

**使用 Ruby 的力量**

如果你有一个模块 A 和常量 B ，你可以尝试使用 include A 并访问常量 B 而不引用模块命名空间。

但这可能不是您正在寻找的 - 因为在这种情况下您将包含该模块，但它已经在那里定义了。

**寻找根源**

看看你是否必须引用命名空间 A::B::C::D 中的常量可能你的系统设计错误？OOP 的目标通常是使数据和方法尽可能接近。

你有两个选择：

1.  如果您感觉到气味，请改进您的系统设计。
2.  使用长引用，无论它们在您的编辑器中如何出现 - 只需重复简单的口头禅：“我在这里有这个长引用，因为它应该在那里并且看起来像这样。”

问题就会消失。

您不必使用类似于 Java 的基于包的命名空间。您可以选择一个更方便和简单的命名空间。

# c++ - 在 Qt for Symbian 中播放警报声

> ID：13146912
> 
> 赞同：1
> 
> 时间：2012-10-30T20:14:20.873
> 
> 标签：c++, qt, symbian

我正在制作一个倒数计时器，当它达到 0 时，我想播放系统警报声 - 内置时钟和日历应用程序使用的那个。

# javascript - Ember Action - {{action showClinic Clinic}} 生成带有“未定义”的链接

> ID：13146917
> 
> 赞同：1
> 
> 时间：2012-10-30T20:14:35.270
> 
> 标签：javascript, ruby-on-rails-3, ember.js

我正在使用 Ember、Ember-data 和 Rails。

当我在车把视图中创建一个链接时，它会链接到 /clinic/undefined。我试图让 View 代码创建一个看起来像:`http://localhost:3000/#/clinic/1`但看起来像:的链接`http://localhost:3000/#/clinic/undefined`。

任何想法为什么以及如何解决它？

看法：

```
<a {{action showClinic content.clinic href=true}}>Click here</a> 
```

路由器：

```
root: Ember.Route.extend({
showClinic: Ember.Route.transitionTo('clinic'),
showDoctor: Ember.Route.transitionTo('doctor'),

index: Ember.Route.extend({
  route: '/',
  connectOutlets: function(router) {
    router.get('applicationController').connectOutlet('main');
  }
}),

clinic: Ember.Route.extend({
  route: '/clinic/:clinic_id',
  connectOutlets: function(router, clinic) {
    router.get('applicationController').connectOutlet('clinic', clinic);
    router.get('clinicController').connectOutlet('doctors', clinic.get('doctors'));
  }
}),

doctor: Ember.Route.extend({
  route: '/doctor/:doctor_id',
  connectOutlets: function(router, doctor) {
    router.get('applicationController').connectOutlet('doctor', doctor);
  }
}) 
```

})

模型：

```
App.Doctor = DS.Model.extend({
  name: DS.attr('string'),
  clinic: DS.belongsTo('App.Clinic')
}); 
```

JSON：

```
{
  doctor: {
    id: 1,
    clinic_id: 1,
    name: "Dr. Who"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:35:56.950

这也发生在我身上，可能是与路由器中的序列化和反序列化有关的问题。当您反序列化 id 并且您获得 id 属性的未定义返回值时，诊所的数据尚未加载。解决方案是在每个状态的反序列化方法中实现承诺模式。

您可以查看以下链接以获取更多信息： [https](https://github.com/emberjs/ember.js/issues/1268#issuecomment-7893886) ://github.com/emberjs/ember.js/issues/1268#issuecomment-7893886 - 承诺模式的实现。

[Emberjs 异步路由](https://stackoverflow.com/questions/12034375/emberjs-async-routing)- 了解更多信息和另一种选择

# github - 每次我尝试单击 github 存储库时都会发生错误？

> ID：13146919
> 
> 赞同：1
> 
> 时间：2012-10-30T20:14:44.547
> 
> 标签：github, github-for-windows

我在我的电脑上克隆了一个 GitHub 的分支。它工作正常，但现在每次单击该项目（我已经使用过）时都会出现错误，我看到此错误：

![GitHub 克隆项目出错](../Images/817a25145993bff88575cf4451b2f637.png)

我和我的 GitHub 存储库出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:31:05.607

你可以在这里处于分离的[头部模式](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)。

您可以通过查看在`git branch`您的 repo 工作树中执行的输出来检查这一点。

SO 问题“ [github for windows crashing a day](https://stackoverflow.com/questions/12780095/github-for-windows-crashing-several-times-a-day) ” 包含恢复指令（但请先备份您正在进行的工作，以防万一）。

*   关闭该弹出窗口，然后单击`Tools -> Open a Shell Here`。
*   在 shell 中，您可以运行 ' `git reset --merge`' 来撤消导致 GitHub for Windows 崩溃的合并。
*   从那里，运行“ `git checkout master`”以从分离的 HEAD 切换。
*   之后，`git pull`在 shell 中运行“”以下拉任何新更改。它会提示您修复任何合并冲突（这是导致应用程序崩溃的原因）。

# c# - xna 方法不接受 null

> ID：13146933
> 
> 赞同：1
> 
> 时间：2012-10-30T20:15:28.897
> 
> 标签：c#, xna

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace WindowsGame3
{
    public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Texture2D ship, bullet, alien;

    Texture2D[] aliens = new Texture2D[20];
    Texture2D[] bullets = new Texture2D[10];

    Vector2 shipPos = new Vector2(200, 540);
    Vector2 alienPos = new Vector2(200, 400);
    Vector2 bulletPos = new Vector2(200, 450);

    Vector2[] aliensPos = new Vector2[20];
    Vector2[] bulletsPos = new Vector2[10];

    int alienCount = 0;
    int bulletCount = 0;

    KeyboardState state = Keyboard.GetState();

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";

        graphics.PreferredBackBufferWidth = 400;
        graphics.PreferredBackBufferHeight = 600;
    }

    protected override void Initialize()
    {
        base.Initialize();
    }

    protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);

        alien = Content.Load<Texture2D>("alien");
        ship = Content.Load<Texture2D>("ship");

        for (int x = 0; x < 5; x++)
        {
            for (int y = 0; y < 4; y++)
            {
                aliens[alienCount] = Content.Load<Texture2D>("alien");
                aliensPos[alienCount].X = 100 + (x * 40);
                aliensPos[alienCount].Y = 20 + (y * 40);
                alienCount++;
            }  
        }
    }

    protected override void UnloadContent()
    {

    }

    protected override void Update(GameTime gameTime)
    {
        if (state.IsKeyDown(Keys.Right) && shipPos.X < 360)
        {
            shipPos.X += 5;
        }

        if (state.IsKeyDown(Keys.Left) && shipPos.X > 0)
        {
            shipPos.X -= 5;
        }

        if (state.IsKeyDown(Keys.Space))
        {
                bullets[bulletCount] = Content.Load<Texture2D>("bullet");
                bulletsPos[bulletCount].X = shipPos.X;
                bulletsPos[bulletCount].Y = shipPos.Y;
                bulletCount++;
        }

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Black);

        spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);

        spriteBatch.Draw(ship, shipPos, Color.White);
        spriteBatch.Draw(alien, alienPos, Color.White);

        for (int alienCount = 0; alienCount < 20; alienCount++)
        {
            spriteBatch.Draw(aliens[alienCount], aliensPos[alienCount], Color.White);
        }

        for (int bulletCount = 0; bulletCount < 10; bulletCount++)
        {
            spriteBatch.Draw(bullets[bulletCount], bulletsPos[bulletCount], Color.White);
        }

        spriteBatch.End();
        base.Draw(gameTime);
    }
}
} 
```

我想在船舶位置创建一个子弹并将该子弹存储在一个数组中，但是在我的 draw 方法中，当我从数组中绘制子弹时，我收到错误消息 This method does not accept null for this parameter。参数名称：纹理

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:18:58.457

在 XNA 中，最好在需要之前加载所有资源，这就是 LoadContent() 方法的用途。您应该在其中加载子弹纹理，然后在必要时在 Update() 中使用它。

每个图像只需要一个 Texture2D 对象，即使您想多次绘制它。您不需要完全相同图像的 Texture2D 数组。

因此，对于您的示例：

```
protected override void LoadContent()
{
    spriteBatch = new SpriteBatch(GraphicsDevice);

    alien = Content.Load<Texture2D>("alien"); //only one texture needed
    ship = Content.Load<Texture2D>("ship");
    bullet = Content.Load<Texture2D>("bullet"); //only one texture needed

    //set initial positions as before
    for (int x = 0; x < 5; x++)
    {
        for (int y = 0; y < 4; y++)
        {
            aliensPos[alienCount].X = 100 + (x * 40);
            aliensPos[alienCount].Y = 20 + (y * 40);
            alienCount++;
        }  
    }
} 
```

当你想制作新的外星人或子弹时，你只需设置它们的位置，因为图像已经加载：

```
if (state.IsKeyDown(Keys.Space))
{
        bulletsPos[bulletCount].X = shipPos.X;
        bulletsPos[bulletCount].Y = shipPos.Y;
        bulletCount++;
} 
```

然后，当您加载并准备好所有纹理时，您可以绘制它：

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.Black);

    spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);

    spriteBatch.Draw(ship, shipPos, Color.White);

    for (int alienCount = 0; alienCount < 20; alienCount++)
    {
        //draw alien texture for every aliensPos
        spriteBatch.Draw(alien, aliensPos[alienCount], Color.White);
    }

    for (int bulletCount = 0; bulletCount < 10; bulletCount++)
    {
        //draw bullet texture for every bulletsPos
        spriteBatch.Draw(bullet, bulletsPos[bulletCount], Color.White);
    }

    spriteBatch.End();
    base.Draw(gameTime);
} 
```

最后，为了让你的船动起来，你应该每一帧都读键盘。您只调用一次 Keyboard.GetState() 。当您阅读它时，它会返回当前按下的键，因此您需要每帧刷新它。

您应该将其添加到 Update() 方法的开头：

```
state = Keyboard.GetState(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:20:18.090

那是因为您试图在制作子弹之前画出子弹。解决方案是在制作子弹之前不要画子弹。

有很多方法可以做到这一点，但这是最快和最肮脏的方法：

改变

```
 for (int bulletCount = 0; bulletCount < 10; bulletCount++)
    {
        spriteBatch.Draw(bullets[bulletCount], bulletsPos[bulletCount], Color.White);
    } 
```

至

```
 for (int bulletCount = 0; bulletCount < 10; bulletCount++)
    {
        if(bullets[bulletCount] != null)
            spriteBatch.Draw(bullets[bulletCount], bulletsPos[bulletCount], Color.White);
    } 
```

# jsf-2 - jsf target="_blank" 不适用于 primefaces 命令按钮

> ID：13146940
> 
> 赞同：4
> 
> 时间：2012-10-30T20:15:52.073
> 
> 标签：jsf-2, primefaces

尝试打开一个新选项卡以接受从 bean 生成的 pdf 文件。

与 h:commandbutton 一起使用，没有使用 p.commandbutton 打开的选项卡。

试图将 onclick 和 oncomplete="window.open('_blank') 放在 p:commandbutton 上，它会打开一个新选项卡，但它没有获取 pdf 并得到“找不到错误 404”。

使用 primefaces-3.1

谢谢

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
     'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>

     <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <h:outputStylesheet library="base" name='jquery-ui-1.8.16.custom.css' />
    </h:head>
    <h:form target="_blank">
      <p:commandButton value="Run" action="#{bean.createReport}"  />
    </h:form>

    </html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T21:21:42.030

尝试设置

```
ajax="false" 
```

在你的`p:commandButton`，这样它应该表现得像`h:commandButton`

# linux - 如何在 Debian 上安装 Kerberos 服务器

> ID：13146941
> 
> 赞同：1
> 
> 时间：2012-10-30T20:15:56.267
> 
> 标签：linux, debian, kerberos

我正在尝试在 Debian 计算机上构建 Kerberos 服务器，但我对所有的配置文件有点迷茫。谁能告诉我有关如何安装和配置 kerberos 服务器的任何好的分步教程？或者我可以安装 Kerberos 的最佳发行版是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T03:28:33.113

Debian 的软件包尝试为您完成大部分配置。在 openafs-client 包中有一个 Kerberos KDC 安装的完整脚本（作为 OpenAFS 完整安装脚本的第一部分），但基本步骤是：

1.  `apt-get install krb5-admin-server`
2.  您将被要求配置 krb5-config。在这里，系统会要求您提供本地域名。输入您正在设置的领域。（通常，这应该全部大写，并且应该以某种方式基于您的本地域，就好像您正在为您的域选择一个主机名一样。）
3.  如果提示 Kerberos 4 的预授权策略，请选择 nopreauth；你不在乎。
4.  当询问您领域中 KDC 的主机名时，输入当前系统的主机名。您将需要使用完全限定的域名。
5.  同样，当询问管理服务器时，输入当前主机名。
6.  运行`krb5_newrealm`。系统将提示您输入主密钥密码。输入一个*非常好的*密码并将其记录在安全的地方。

这里的所有都是它的。您设置了一个领域。要将主体添加到您的领域，请运行`kadmin.local`. 您可能希望创建一个用于管理操作的主体（`<username>/admin`这是约定），然后将其添加到具有完全访问权限的 /etc/krb5kdc/kadmin.acl 中：

```
<username>/admin@<realm> * 
```

`<username>/admin`您选择的管理员主体在哪里，并且`<realm>`是您在上面选择的领域的名称。

# c# - 当我单击项目 GridView 时返回 ImageView 实例

> ID：13146942
> 
> 赞同：2
> 
> 时间：2012-10-30T20:15:57.553
> 
> 标签：c#, android, xamarin.android, mvvmcross

当我单击项目 GridView 时如何返回 ImageView 实例？

**我为 ItemClick 创建自定义绑定事件：**

```
public class ItemClickSquareBinding
        : MvxBaseAndroidTargetBinding
    {
        private readonly GridView _gridView;
        private IMvxCommand _command;

        public ItemClickSquareBinding(GridView gridView)
        {
            _gridView = gridView;
            _gridView.ItemClick += GridView_ItemClick;
        }

        private void GridView_ItemClick(object sender, AdapterView.ItemClickEventArgs e)
        {
            //----->Get ImageView
        }

        public override void SetValue(object value)
        {
            _command = (IMvxCommand)value;
        }

        protected override void Dispose(bool isDisposing)
        {
            if (isDisposing)
            {
                _gridView.ItemClick -= GridView_ItemClick;
            }
            base.Dispose(isDisposing);
        }

        public override Type TargetType
        {
            get { return typeof(IMvxCommand); }
        }

        public override MvxBindingMode DefaultMode
        {
            get { return MvxBindingMode.OneWay; }
        }
    } 
```

**我的网格视图：**

```
<cirrious.mvvmcross.binding.android.views.MvxBindableGridView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:numColumns="4"
        android:gravity="center"
        android:listSelector="#00000000"
        local:MvxItemTemplate="@layout/itemimage"
        local:MvxBind="{'ItemsSource':{'Path':'Squares'}, 'ClickItemSquare':{'Path':'ClickCommand'}}" /> 
```

**我的图像视图：**

```
<ImageView
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:local="http://schemas.android.com/apk/res/LeSommet.ZooSnap.UI.Android"
      android:layout_width="80dp"
      android:layout_height="80dp"
      android:padding="5dp"
      android:layout_gravity="center"
      local:MvxBind="{'ResourcesImagePath':{'Path':'ImagePath'}}"
  /> 
```

**当我单击项目 GridView 时如何返回 ImageView 实例？（或者我如何返回点击我的对象实例）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:33:16.920

以下三个答案...我更喜欢标记为**3的答案**

### 1）更简单的方法

在一个非常基本的层面上，我认为您可以为此使用内置绑定。

查看[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindableGridView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindableGridView.cs)你应该能够做到`ItemClick`：

```
<cirrious.mvvmcross.binding.android.views.MvxBindableGridView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="4"
    android:gravity="center"
    android:listSelector="#00000000"
    local:MvxItemTemplate="@layout/itemimage"
    local:MvxBind="{'ItemsSource':{'Path':'Squares'}, 'ItemClick':{'Path':'ClickCommand'}}" /> 
```

`ClickCommand`类似的东西在哪里：

```
public ICommand ClickCommand { get { return new MvxRelayCommand<Square>(square => square.Foo()); } } 
```

如果这不起作用，那么请[用测试代码提出一个错误](https://github.com/slodge/MvvmCross/issues/new)- 网格是社区捐赠给 MvvmCross 的，所以它还不是我用过的东西。

* * *

### 2）使您的自定义绑定工作

如果您确实想做自定义绑定。

使用 Intellisense，看起来 an`AdapterView.ItemClickEventArgs`有几个潜在有用的属性：

```
 e.View;
        e.Position; 
```

因此，您可以根据`View`需要访问 - 然后可以使用诸如`FindViewById<>`查找包含的视图之类的东西。

或者您可以访问`Position`然后可以： - 使用适配器方法，例如`public override Object GetItem(int position)`从原始数组中获取 Java 包装的对象 - 或者可以直接在传入数组或可枚举上使用访问器方法。

* * *

### 3) 我平时工作的方式

当我只想单击列表项或列表项的一部分时，我通常不会执行这种自定义绑定。

相反，我编写 ViewModel 以便它们公开启用行为的集合 - 我尝试呈现 Model 对象的启用行为的包装器，而不是 Model 对象本身。

在这种方法中，ViewModel 公开了 a`List<WrappedSquare>`而不是 a`List<Square>`

```
public WrappedSquare
{
   Square _saure;
   SquareViewModel _square;

   public WrappedSquare(Square square, SquareViewModel parent)
   {
       /* assignment */
   }

   public ICommand TheCommand { get { return MvxRelayCommand(() -> _parent.DoStuff(_square)); } }

   public Square TheSquare { get { return _square; } } 
} 
```

列表项中的 axml 然后具有如下绑定：

```
<ImageView
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:local="http://schemas.android.com/apk/res/LeSommet.ZooSnap.UI.Android"
      android:layout_width="80dp"
      android:layout_height="80dp"
      android:padding="5dp"
      android:layout_gravity="center"
      local:MvxBind="{'ResourcesImagePath':{'Path':'TheSquare.ImagePath'},'Click':{'Path':'TheCommand'}}"
  /> 
```

网格的 axml 是：

```
<cirrious.mvvmcross.binding.android.views.MvxBindableGridView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="4"
    android:gravity="center"
    android:listSelector="#00000000"
    local:MvxItemTemplate="@layout/itemimage"
    local:MvxBind="{'ItemsSource':{'Path':'WrappedSquares'}}" /> 
```

此示例代码改编自[MvxBindableListView 中的 MVVMCross 更改 ViewModel](https://stackoverflow.com/questions/12682082/mvvmcross-changing-viewmodel-within-a-mvxbindablelistview) - 那里的答案也与此问题相关。

* * *

这种方法的一个真实示例是会议示例，它`WithCommand<T>`用于启用从列表到详细视图的导航。

但是......这种方法有一个警告 - 请注意，使用时`WithCommand<T>`我们在 iOS/MonoTouch 中发现了内存泄漏 - 基本上 GarbageCollection 拒绝收集嵌入式`MvxRelayCommand`- 这就是为什么`WithCommand<T>`以及`IDisposable`为什么`BaseSessionListViewMode`清除列表并`WithCommand`在意见是分离的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:17:21.720

第四个答案（在评论前三个之后......）

绑定是关于 View-ViewModel 通信的。

动画不是 ViewModel 或 Binding 真正应该处理的。

在我看来，最好为动画使用自定义控件。对于 MonoDroid 中的自定义控件，请参阅[Xamarin Monodroid：WP7 => Android 和自定义控件？](https://stackoverflow.com/questions/11091312/xamarin-monodroid-wp7-android-and-custom-control)

# c++ - 在具有不同版本的 Visual Studio 的静态库中内部使用 STL

> ID：13146943
> 
> 赞同：0
> 
> 时间：2012-10-30T20:16:05.490
> 
> 标签：c++, visual-studio, stl

我正在尝试将我的应用程序与在不同版本的 Visual Studio 中构建的静态库链接（我使用的是 VS2010，该库是用 VS2008 构建的）。静态库在内部使用 STL，我收到链接器错误，无法找到一些 basic_string 方法。

我知道如果静态库在其公共接口中使用 STL，那么这是不可能的，因为 STL 对象是二进制不兼容的。但这种情况并非如此。我调用的库中的所有方法都没有使用 STL，并且我没有将 STL 对象传递给库。但在内部，静态库在它自己的函数中使用 STL。

看起来库中没有编译 STL 代码，链接器正在尝试将 STL 链接到内部方法。我的问题是有什么方法可以编译静态库以静态链接到 STL 并在其中包含所有代码？

我应该提到我自己的应用程序也使用 STL。但似乎这两个版本都可以编译，前提是它们永远不会相互传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:30:54.547

如果您要链接到**静态**库，并且此库依赖于标准 C++ 库的版本*X* ，那么除了您可能在应用程序中使用的版本*Y*之外，您的应用程序还需要与版本*X链接。*

 **由于标准库的版本X*和版本*Y*的几个导出符号名称将相同，因此您最终会出现链接器错误。

你能把第三方库包装在一个DLL中吗？那将解决问题。*

# php - 查询数据库后使用php转置

> ID：13146949
> 
> 赞同：2
> 
> 时间：2012-10-30T20:16:24.520
> 
> 标签：php, mysql, excel

我正在使用 PHP 来查询一个 MYSQL 数据库，并且我正在尝试将数据输出到一个 excel 文件。

我使用过 phpexcel、csv 等。每次我都能成功地将数据输出到 excel 文件中，但我似乎无法在 excel 中转置它（转置-将所有列翻转为行，将行翻转为列)

我找不到任何教程来帮助我。

我的问题是，有没有办法使用 php 从 MYSQL 转置这些行和列并将它们导入到 excel 文件中？

谢谢！

**代码：**

```
exportMysqlToCsv($tablename,$tokenmain, $id);
function exportMysqlToCsv($tablename,$tokenmain, $id, $filename = 'Results.csv'){
    $sql_query = "select * from $tablename where token=1";

  // Gets the data from the database
   $result = mysql_query($sql_query);

    $f = fopen('php://temp', 'wt');
    $first = true;

//trying to transpose the data 
function transpose($array) {
    array_unshift($array, null);
    return call_user_func_array('array_map', $array);}

//inserting it into the excel file  
  while ($row = mysql_fetch_assoc($result)) {

        if ($first) {

            fputcsv($f, array_keys($row));

            $first = false;

         }

      fputcsv($f, $row);
    }
} //end while 
```

**数据库示例：**

```
=======================================
|  Male/female  |    Favorite artist  |
=====+========+===============+=======|
|    F          | Britney Spears      |
|-------------------------------------| 
```

**我希望它看起来像什么：**

```
=====================================
|Question          |  Answer        |
=====+========+===============+=====|
|   Male/female    |   F            |
|----+--------+---------------+-----|
| Favorite artist  | Britney Spears |
|----+--------+---------------+-----| 
```

**巨大的注意：**在 php.ini 中没有更改数据库/硬编码数组。我希望这一切都是动态的，并且数据库将保持原样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:52:02.243

要回答我的问题，这是我使用 PHPExcel 的代码：

```
$col=1; // 1-based index
while($row_data = mysql_fetch_assoc($result)) {

$row= 1;

    foreach ($row_data as $key=>$value) {

$objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
$row++;
    }
    $col++;

}

$row=1;
while($row_data = mysql_fetch_assoc($result2)) {
$col=0;

    foreach($row_data as $value) {

   $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
        $row++;

    $col++;}
} 
```

将列（col）和行（row）调高，使数据库中的列成为excel文件中的行，行到列也是如此。

# android - 输入键以显示 toast 文本不适用于编辑文本

> ID：13146964
> 
> 赞同：0
> 
> 时间：2012-10-30T20:17:18.670
> 
> 标签：android, android-edittext, toast, enter

我正在使用 Intellij IDEA 11、Android 4.1 并使用[http://www.mkyong.com/android/android-textbox-example/](http://www.mkyong.com/android/android-textbox-example/)中的示例在用户在编辑文本中输入文本然后按 Enter 后显示 toast 文本。问题是回车键总是创建一个新行，键盘还在，吐司不显示。我正在使用带有皮肤 WVGA800 的模拟器 ARM 来测试它是否有任何区别。

我尝试了不同的东西，包括：

```
edittext.requestFocus(); 
edittext.setFocusable(true);
edittext.setFocusableInTouchMode(true); and
edittext.setMaxLines(1); 
```

但它仍然无法正常工作。

这是xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >

    <EditText
            android:id="@+id/editText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

    <requestFocus />

    </EditText>

    </LinearLayout> 
```

这是java代码：

```
import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.widget.EditText;
import android.widget.TextView;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.Toast;

public class T_C_Activity extends Activity {
    /**
     * Called when the activity is first created.
     */

    private EditText edittext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        addKeyListener();
    }

    public void addKeyListener() {

        // get edittext component
        edittext = (EditText) findViewById(R.id.editText);

        //edittext.setFocusable(true);
        //edittext.setFocusableInTouchMode(true);
        //edittext.setMaxLines(1);

        // add a keylistener to keep track user input
        edittext.setOnKeyListener(new OnKeyListener() {
            public boolean onKey(View v, int keyCode, KeyEvent event) {

                // if keydown and "enter" is pressed
                if ((event.getAction() == KeyEvent.ACTION_DOWN)
                        && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                    edittext.requestFocus();
                    // display a floating message
                    Toast.makeText(T_C_Activity.this,
                            edittext.getText(), Toast.LENGTH_LONG).show();

                    return true;

                } else if ((event.getAction() == KeyEvent.ACTION_DOWN)
                        && (keyCode == KeyEvent.KEYCODE_9)) {
                    edittext.requestFocus();
                    // display a floating message
                    Toast.makeText(T_C_Activity.this,
                            "Number 9 is pressed!", Toast.LENGTH_LONG).show();
                    return true;
                }

                return false;

            }

        });

    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:41:16.637

查看 API 文档的[imeOptions 部分](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aimeOptions)。

例如，您可以执行以下操作：

```
<EditText
                android:id="@+id/edit_name"
                android:layout_height="wrap_content"
                android:layout_width="fill_parent"
                android:editable="true"
                android:singleLine="true"
                android:imeOptions="actionGo"
                android:focusable="true"
                /> 
```

然后，您可以像这样监听编辑器事件：

```
 EditText editText = (EditText) findViewById(R.id.edit_name);
        editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
            @Override
            public boolean onEditorAction(TextView textView, int i, KeyEvent keyEvent) {
                if(i == EditorInfo.IME_ACTION_GO){
                      //do whatever you want
                }
                return false;
            }
        }); 
```

# javascript - 如何格式化文本区域中的文本

> ID：13146972
> 
> 赞同：0
> 
> 时间：2012-10-30T20:17:59.790
> 
> 标签：javascript, formatting, textarea, haml

我默认将一些文本添加到文本区域

```
%textarea.email_copy
    Hi <awesome friend>,

    I am using this site called XXXX, and you should check it out. It is for smart and thoughtful people to share about their experiences and ideas around topics they care about, and I think you are perfect for it.

    I generated a special invite for you:

    http://some_link

    <%= current_user.getFirstName() %> 
```

但是，当我查看加载的页面时，我看到了这个

![在此处输入图像描述](../Images/c08c096157c79468ec4124d373566522.png)

如何在段落之间添加段落或间距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:21:50.497

在这里查看：http: [//cheat.errtheblog.com/s/haml/](http://cheat.errtheblog.com/s/haml/)

```
~ - Ruby expression preserving whitespace, e.g. %pre~ @content.body
  Works just like =, but calls the find_and_preserve helper to keep
  line breaks intact in the output. 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:20:58.657

文本区域不能包含标记。如果您只需要演示而不需要输入，那么 div 应该可以。如果您想要演示和输入，您应该查看 RTE。

# c# - 如何找到两个已知值之间的所有字符串？

> ID：13146974
> 
> 赞同：1
> 
> 时间：2012-10-30T20:18:05.817
> 
> 标签：c#, .net, regex

我想要`List<string>`字符串之间的所有`[ ]`字符串：

```
 Input = "[first] - [second] > [third] + 5" 
```

所以我想要第一，第二，第三。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:21:07.530

你可以这样做

```
List<string> lst=Regex.Matches(input,@"(?<=\[).*?(?=\])")
                      .Cast<Match>()
                      .Select(x=>x.Value)
                      .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:43:51.850

扩展上一个答案：

```
 static IEnumerable<string> GetListFromString(string stringToExtract)
    {

        var regex = new Regex(@"(?<=\[).*?(?=\])");
        foreach (Match match in regex.Matches(stringToExtract))
        {
            yield return match.Value;
        }
    } 
```

# haskell - 如何将失败的计算转换为成功的计算，反之亦然

> ID：13146980
> 
> 赞同：11
> 
> 时间：2012-10-30T20:18:38.703
> 
> 标签：haskell, typeclass, alternative-functor, monadplus

[这很可能是一个寻求问题的解决方案......如果是这样，我请求你的宽容！]

可能的实现：

```
class Switch' f where
  switch :: f a -> f ()

instance Switch' [] where
  switch []     = [()]
  switch (_:_)  = []

instance Switch' Maybe where
  switch Nothing   = Just ()
  switch (Just _)  = Nothing 
```

解释是：给定一个成功的计算，让它失败；给定一个失败的计算，让它成功。我不确定，但这似乎与 MonadPlus 正好相反……如果你眯着眼睛真的很用力的话。？？？

这个概念是否有标准类型类或其他实现？如果有的话，底层数学会是什么样子（即这是一个半群、一个循环等）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T20:38:20.440

```
switch :: (Alternative f, Eq (f a)) => f a -> f ()
switch x | x == empty = pure ()
         | otherwise = empty 
```

或者

```
switch :: (MonadPlus m, Eq (m a)) => m a -> m ()
switch x | x == mzero = return ()
         | otherwise = mzero 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T14:45:11.797

我有一个通用的解决方案，但它只能适用于`MonadPlus`遵守[左捕获](http://www.haskell.org/haskellwiki/MonadPlus)法则的实例（这可能只是一个必要条件，而不是充分条件）：

```
isZero :: (MonadPlus m) => m a -> m Bool
isZero x = (x >> return False) `mplus` return True

switch :: (MonadPlus m) => m a -> m ()
switch x = isZero x >>= \r -> if r then return () else mzero 
```

它[`STM`](http://hackage.haskell.org/packages/archive/stm/latest/doc/html/Control-Monad-STM.html#t:STM)也适用。

（对于它总是返回的列表`[()]`，我想说这个定义不适用于任何满足左分布的东西。）

不能以这种方式为`Applicative`s 定义它，因为`switch`检查 的值`isZero`，而应用程序不能这样做。（而且，`MonadPlus`满足左接规则的实例[很少满足](https://cstheory.stackexchange.com/q/14143/10336) `Applicative`法律。）

`switch . (switch :: m () -> m ()) = id`无论如何，看看这个定义是否成立会很有趣。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-26T07:53:21.710

我找到了一个完全不同的答案，那就是[monad `LogicT`transformer](http://hackage.haskell.org/package/logict)。它[`lnot`](http://hackage.haskell.org/packages/archive/logict/0.5.0.2/doc/html/Control-Monad-Logic-Class.html#v%3alnot)定义为：

> ```
> lnot :: MonadLogic m => m a -> m () 
> ```
> 
> 反转逻辑计算。如果`m`至少有一个值成功，则`lnot m`失败。如果`m`失败，则`lnot m`成功 value `()`。

我相信这正是你想要的。

# python - 从openstack keystone api获取用户列表

> ID：13146986
> 
> 赞同：2
> 
> 时间：2012-10-30T20:18:55.753
> 
> 标签：python, api, openstack, keystone

我想对 openstack keystone 用户执行 CRUD 操作。根据 keystone api docs，我们必须使用 GET 请求以及 x-auth-token 信息。我为此编写了一个代码，但我无法获得任何用户列表，而是得到“404 Not Found，The resource could not be found”。我的代码如下

```
#!/usr/bin/python
import httplib
import urllib
import os
import json
from urlparse import urlparse
#Define openstack url
url = "x.x.x.x:5000"
osuser = "osuser"
ospassword = "whatever"

params ='{"auth":{"tenantName":"openstackDemo", "passwordCredentials":{"username":"osuser", "password": "ospassword"}}}'
headers = {"Content-Type": "application/json"}
#make http request
conn = httplib.HTTPConnection(url)
conn.request("POST", "/v2.0/tokens", params,headers)
#get http response
response = conn.getresponse()
data = response.read()
verify_services = json.loads(data)
conn.close()
#print "The service verificetion is:%s\n\t" % verify_services
#Get keystone token
keystone_token = verify_services ['access']['token']['id']
print "Printing api token :\n" 
print keystone_token
user_id = verify_services['access']['user']['id']
print "Printing user id : \n"
print user_id
# Get keystone URL

keystone_url = verify_services ['access']['serviceCatalog'][5]
print "Printing keystone end points url: \n"
print keystone_url

#Now take the keystone public url and uid

for publicurl in keystone_url['endpoints']:
key_admin_url = publicurl['adminURL']
key_pub_url = publicurl['publicURL']
keystone_user_id = publicurl['id']      

print "printing keystone public url:\n"
print key_pub_url

print "Printing keystone user id:\n"
print keystone_user_id

##################
# Get the user list
#################
apiurlt = urlparse(key_pub_url)
print apiurlt
url2 = apiurlt[1]
print url2
#params1 = '{"username":"samit", "email":"sanjaya@kth.se","enabled":true,"password":"secret", "roles":"member"}'
p = urllib.urlencode({})
headers1 = {"X-Auth-Token":"keystone_token", "Content-type":"application/json"}
conn2 = httplib.HTTPConnection(url2)
conn2.request("GET", "%s/users" %apiurlt[2]  , p,headers1)
response2 = conn2.getresponse()
data2 = response2.read()
user_list = json.dumps(data2)
conn.close()
print "getting users:\n"
print response.status
print response.reason
print user_list 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T01:18:35.300

@sanjaya，如果您正在寻找一种通过 Python 快速与 Keystone 交互的方法，我建议您直接使用 keystoneclient 库，该库内置了所有这些相关工作。您可以从[https://github.com/openstack/python-keystoneclient/](https://github.com/openstack/python-keystoneclient/)获取源代码，或者从 PyPi ( [http://pypi.python.org/pypi/ python-keystoneclient/0.1.3](http://pypi.python.org/pypi/python-keystoneclient/0.1.3) )。

使用该客户端，您可以超级轻松地与 Keystone 交互：

```
from keystoneclient.v2_0 import client
kc = client.Client(username=osuser, password=ospassword, auth_url=url) 
```

请注意，仅使用用户名和密码，您将拥有非常有限的访问权限（所谓的“无范围访问授权令牌”），您需要进一步请求才能做任何有用的事情。

Keystone 更是如此，它在 API V2 中需要“管理员”角色才能与 keystone 上的任何 CRUD 操作进行交互。在您只想与 Keystone 交互的情况下（例如在设置许多其他部分之前启动帐户），从“管理令牌”开始并直接从客户端使用管理 URL 界面会更容易. 要做到这一点：

```
from keystoneclient.v2_0 import client
kc = client.Client(token='123secret456', endpoint='http://x.x.x.x:35350/v2.0')
kc.users.list() 
```

该令牌是您在 Keystone 中“admin_token”下的 [DEFAULT] 部分中已经配置的。请注意，端点 URL 是与授权 URL 不同的端口 (35350)。无论好坏，V2 API 都将它们明确分开，并且要对 Keystone 中的元素执行 CRUD 操作，您需要使用 API 端点的管理 URL。

如果您使用 Everett 上面提供的示例进行身份验证，则该管理 URL 将由 keystoneclient 自动加载，因此对于该库，您通常不必担心。

为了完整起见，使用 Python 中的 keystoneclient 库执行 Everett 上面的建议：

```
from keystoneclient.v2_0 import client
kc = client.Client(username='admin', password='devstack', tenant_name='admin', auth_url='http://172.16.0.1:5000/v2.0')
kc = client.users.list() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T21:52:53.177

使用 bash 这就是我所做的

```
TOKEN=`curl -s -X POST http://172.16.0.1:35357/v2.0/tokens -d '{"auth": {"passwordCredentials": {"username":"admin", "password":"devstack"}, "tenantName":"admin"}}' -H "Content-type: application/json" | python -c 'import json,sys; response=json.loads(sys.stdin.read()); print response["access"]["token"]["id"]'`;

curl -s http://172.16.0.1:35357/v2.0/users -H "X-Auth-Token: "$TOKEN"" 
```

请注意，我正在以管理员身份进行身份验证。也许里面的东西会对你有所帮助。

# java - 在 Eclipse 中运行 nutch 单元测试的配置

> ID：13146988
> 
> 赞同：0
> 
> 时间：2012-10-30T20:18:57.470
> 
> 标签：java, eclipse, junit, nutch

我已经为 Eclipse 设置了 nutch，并且可以运行和调试到我心中的内容。我可以使用 ant 从 eclipse 或命令行编译。我可以单独测试所有模块。但是，当从命令行运行通用 nutch 下载测试时 - 例如 ant 测试，我在一些（未修改的）模块中遇到了一些故障。

我的问题：如何从 Eclipse 中运行单元测试，以便查看测试失败的地方？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:40:26.340

如果您的项目中有单元测试，您可以右键单击并“运行为”。选择“JUnit 测试”（或其他测试框架）。这应该在 eclipse 中初始化单元测试模块。

# android - 从Service和onClick访问sqlite数据库android冲突

> ID：13146991
> 
> 赞同：2
> 
> 时间：2012-10-30T20:19:04.783
> 
> 标签：android, multithreading, sqlite, service

在我的应用程序 android 中，我可以从以下位置访问我的 sqlite 数据库：

1）服务android，每60秒。

2) 按下按钮后 (onclik)

如果我在服务访问数据库时按下按钮，则会发生错误。

所以我在 onclickListener 中插入，在访问数据库之前，调用 stopService()

但是冲突仍然存在，因为即使我在访问数据库之前调用 stopService() ，服务也会在此之后停止！

我试过了，使用：

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager)  getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.example.MyService".equals(service.service.getClassName())) {
           return true;
        }
    }
    return false;
 } 
```

如何[检查服务是否在 Android 上运行？](https://stackoverflow.com/questions/600207/android-check-if-a-service-is-running)

在访问数据库之前，我尝试以这种方式调用此方法：

```
 while(isMyServiceRunning())
    {
        // do nothing
    }

    // *** access to my database *** 
```

我可以做些什么来确保在访问数据库之前停止我的服务？

错误是：

```
10-30 21:05:43.360: E/SQLiteDatabase(13960): Failed to open the database. closing it.
10-30 21:05:43.360: E/SQLiteDatabase(13960):        android.database.sqlite.SQLiteDatabaseLockedException: database is locked
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:2115)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:984)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:753)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
10-30 21:05:43.360: E/SQLiteDatabase(13960):    at host.database.DB_DatabaseManager.open(DB_DatabaseManager.java:134) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:34:46.340

您可以覆盖`onDestroy()`服务的事件并尝试访问其上的数据库：

```
@Override
public void onDestroy() {
    // *** access to my database ***
    super.onDestroy();
} 
```

# git - 致命：无法创建临时文件'/home/username/git/myrepo.git/./objects/pack/tmp_pack_XXXXXX'：权限被拒绝

> ID：13146992
> 
> 赞同：53
> 
> 时间：2012-10-30T20:19:15.530
> 
> 标签：git

我一直遇到此错误消息的问题，我不明白修复它或调试它的正确解决方案。我已经以各种形式搜索了错误，但没有出现真正的解决方案。我假设这是权限问题，但我真的不知道如何检查或应该检查什么。

我有一台运行 Ubuntu 11.10 的服务器，我基本上是在尝试从我的开发机器对我的 git 存储库进行初始提交。我以root身份运行。我应该以用户身份运行吗？

**在服务器上创建回购：**

```
$ cd /home/username/git
$ mkdir myrepo.git
$ cd myrepo.git/
$ git --bare init 
```

**在开发机器上创建回购：**

```
Goto rails project directory first
$ git init
$ git add .
$ git commit -m "initial commit"
$ bundle pack
$ git add Gemfile.lock vendor/cache
$ git commit -m "bundle gems"
$ git remote add origin ssh://username@server.com/home/username/git/myrepo.git
$ git push origin master 
```

**错误：**

```
fatal: Unable to create temporary file '/home/username/git/myrepo.git/./objects/pack/tmp_pack_XXXXXX': Permission denied
error: pack-objects died of signal 13
error: failed to push some refs to 'ssh://username@server.com/home/username/git/myrepo.git' 
```

**我的 .git/config 文件：**

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
[remote "origin"]
    url = ssh://username@server.com/home/username/git/myrepo.git
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

类似的问题： [如何使用 Git 对远程存储库进行初始推送？](https://stackoverflow.com/questions/2337281/how-do-i-do-an-initial-push-to-a-remote-repository-with-git?rq=1)

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-30T20:48:44.997

听起来您在 root 拥有的 git 存储库中有文件。由于您以“用户名”身份进行推送，因此文件必须可由用户名写入。最简单的事情可能是以用户身份创建 repo，并使用同一用户进行推送。另一种选择是创建一个组，使该组可以写入所有内容，并使您的用户成为该组的成员。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-31T02:04:04.400

好的，我想通了。问题是我没有为 myrepo.git 和父目录 git 设置正确的权限。

我以 root 身份登录到服务器并使用：

```
$ chown username /home/username/git 
```

然后返回 drwxrwxr-x 4 username root 4096 2012-10-30 15:51 /home/username/git ，内容如下：

```
$ ls -ld /home/username/git 
```

然后我在 git 中为 myrepo.git 创建一个新目录：

```
$ mkdir myrepo.git
$ ls -ld myrepo.git/
drwxr-xr-x 2 root root 4096 2012-10-30 18:41 myrepo.git/ 
```

但它的用户设置为root，所以我将其更改为用户名和以前一样。

```
$ chown username myrepo.git/
$ ls -ld myrepo.git/
drwxr-xr-x 2 username root 4096 2012-10-30 18:41 myrepo.git/ 
```

然后我退出 root 并以用户名登录服务器：

在 git 目录中：

```
$ cd myrepo.git/
$ git --bare init
Initialized empty Git repository in /home/username/git/myrepo.git/ 
```

在本地机器上：

```
$ git remote add origin      
ssh://username@server.com/home/username/git/myrepo.git
$ git push origin master 
```

成功！

希望这对将来遇到相同问题的其他人有用！

资源

*   [http://www.cyberciti.biz/tips/unix-or-linux-commands-for-changing-user-rights.html](http://www.cyberciti.biz/tips/unix-or-linux-commands-for-changing-user-rights.html)
*   [http://www.cyberciti.biz/faq/how-to-use-chmod-and-chown-command/](http://www.cyberciti.biz/faq/how-to-use-chmod-and-chown-command/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T20:47:20.757

您的用户似乎无权写入服务器上的该目录。请确保权限正确。用户将需要对该目录的写入权限。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-19T02:20:34.977

感谢 Don Branson，我解决了我的问题。我想下次在服务器上构建我的 repo 时应该使用此代码：

```
root@localhost:~#mkdir foldername
root@localhost:~#cd foldername
root@localhost:~#git init --bare
root@localhost:~#cd ../
root@localhost:~#chown -R usergroup:username foldername 
```

在客户端，我使用这个

```
$ git remote add origin git@servername:/var/git/foldername
$ git push origin master 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-24T19:27:28.067

推送到 GIT 的主要问题之一是您推送的材料将显示为您的材料，并且会阻止团队中其他人的提交。作为 GIT 存储库管理员，您必须管理挂钩以防止 Alice 的推送阻止 Bob 推送。为此，您需要确保您的开发人员都属于一个组，我们将其称为“开发人员”并且存储库归 root:developers 所有，然后将其添加到 hooks/post-update 脚本中：

```
sudo chown -R root:developers $GIT_DIR
sudo chmod -R g+w $GIT_DIR 
```

这将使团队成员能够推送到存储库，而不会互相干扰。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-03T19:25:02.827

只需尝试执行此操作（通过 root 访问）-“chmod -R 777 /home/username/git”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-19T14:25:07.833

我通过授予用户对您正在使用的每个目录的权限来解决它，如下所示：

```
sudo chown user /home/user/git 
```

等等。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-11T20:33:58.003

一种可能是您推送到的 git 服务器已关闭/崩溃，解决方案在于重新启动 git 服务器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-14T17:29:52.177

就我而言（WINDOWS 10），它是 Microsoft Defender（我只是从另一个防病毒软件切换到 Defender）。

我只是把我的 C:\Users\USERNAME\PROJECT-PATH.git\objects\pack 放在排除列表和魔法中。:)

> WINDOWS 10 / VISUAL STUDIO 2019 或 GIT FOR WINDOWS

# java - 在java中暂停/恢复多个线程

> ID：13146993
> 
> 赞同：1
> 
> 时间：2012-10-30T20:19:20.920
> 
> 标签：java, multithreading, resume, suspend

尝试编写将运行、挂起和恢复 3 个线程的程序。

这是编码：

```
class Connectthread implements Runnable
{
public void run()
{
    for(int j=0;j<90;j+=10)
    System.out.println("Connecting..." + j + " Secs");
}
}

class DLoadthread implements Runnable
{
public void run()
{
    for(int d=0;d<60;d+=10)
    System.out.println("Downloading..." + d + " Secs");
}
}
class Runthread implements Runnable
{
public void run()
{
    for(int r=0;r<120;r+=10)
    System.out.println("Running..." + r + " Secs");
}
}
class EHAunitThread
{
Connectthread ct=new Connectthread();
DLoadthread dt=new DLoadthread();
Runthread rt=new Runthread();

public void main(String arg[])
{
    //putting threads into ready state.
    System.out.print("Starting threads\n");
    ct.start();
    dt.start();
    rt.start();

    System.out.print("Sleeping 3 seconds\n");
    safeSleep(3000, "Threads first sleep time interrupted\n");
    System.out.print("Suspending threads\n");
    ct.suspend();
    dt.suspend();
    rt.suspend();

    System.out.print("Sleep 5 seconds\n");
    safeSleep(5000, "Threads second sleep time interrupted\n");
    System.out.print("Resume threads\n");
    ct.resume();
    dt.resume();
    rt.resume();

    try
    {
        ct.join();
        dt.join();
        rt.join();
    }
    catch (InterruptedException e)
    {
        System.out.print("Join interrupted");
    }

    System.out.print("Testcase Completed");
    System.exit(0);
}
} 
```

`error:cannot find symbol`当我尝试编译它时，它不断给我 14 条这样的消息。

据我所知，就语法而言，编码*看起来是正确的。*我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:23:25.097

您的类是 Runnables，您可以在它们上调用 Thread 方法。您需要将它们包装在 Thread 对象中：

```
Thread ct=new Thread (newConnectthread()); 
```

另请注意，不推荐使用[Thread#suspend()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#suspend%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:23:58.903

`Runnable`没有`start`办法。您需要使用`Thread`该类来封装`Runnable`s：

```
Thread ct = new Thread(new Connectthread());
Thread dt = new Thread(new DLoadthread());
Thread rt = new Thread(new Runthread()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T20:43:55.023

Suspend 和 resume() 是不安全的，试试这个：

```
public class Pauser{

  private boolean isPaused=false;

  public synchronized void pause(){
     isPaused=true;
    }

  public synchronized void resume(){
    isPaused=false;
    notifyAll();
  }

  public synchronized void look(){
    while(isPaused){
        wait();
      }
   }

}

public class MyRunnable implements Runnable{

  Pauser pauser;

  public MyRunnable(Pauser pauser){
     this.pauser=pauser;
   }

  public void run(){
    while(true){
       pauser.look();
    }
  }

public class Caller{

  Pauser pauser=new Pauser();
  for(int i = 0; i<1000;i++)
    new Thread(new MyRunnable(pauser)).start();

//pause all threads
pauser.pause();

//resume all threads
pauser.resume();
} 
```

# c# - 如何重置捕获像素的值

> ID：13146994
> 
> 赞同：2
> 
> 时间：2012-10-30T20:19:22.867
> 
> 标签：c#, screenshot, rgb, pixel

我正在尝试创建一个 C# 函数，该函数从屏幕截图位图中返回每四个像素的 R、G 和 B 值。这是我的代码的一部分。

```
for (int ix = 4; ix < 1366; ix = ix + 4)
{
    x = x + 4;

    for (int iy = 3; iy < 768; iy = iy + 4)
    {
        y = y + 4;

        System.Drawing.Color pixelcolor = screenshot.GetPixel(x,y);
        red = kolorpiksela.R;
        green = kolorpiksela.G;
        blue = kolorpiksela.B;

        sumR = sumR + red;
        sumG = sumG + green;
        sumB = sumB + blue;                
    }
} 
```

`screenshot`位图在哪里。最后，“总和”值除以像素数。我的问题是它不起作用。我得到的错误是：

> System.Drawing.dll 中出现“System.ArgumentOutOfRangeException”类型的未处理异常
> 
> 附加信息：参数必须为正且 < 高度。

我认为错误的原因是`pixelcolor`应该在每一步都重置，但我在过去 2 天尝试这样做。没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:30:24.150

我假设你的位图是 1366 x 768。

在您的 ix 循环中，第一次迭代 ix = 4。在第 431 次迭代 ix = 1364，所以它进入循环。

问题是您随后将 4 添加到 x （因此 x = 1368），这超出了您的 1366 边界。

对位图尺寸进行硬编码并不是最好的方法，但您可以快速检查是否 x = x + 4 超过 1366 边界。

768 的 iy 循环几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:31:23.293

尝试这个：

```
for (int x = 0; x < screenshot.Width; x += 4)
{
    for (int y = 0; y < screenshot.Height; y += 4)
    {
        Color pixelcolor = screenshot.GetPixel(x, y);
        sumR += pixelcolor.R;
        sumG += pixelcolor.G;
        sumB += pixelcolor.B;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:26:12.990

我只是不知道这里发生了什么：

```
for (int ix = 4; ix < 1366; ix = ix +4 )
{
    x = x + 4;

    for (int iy = 3; iy < 768; iy = iy + 4)
    {
        y = y + 4; 
```

我的猜测是它应该看起来像：

```
for (int x = 0; x < screenshot.Width; x += 4 )
{
    for (int y = 0; y < screenshot.Height; y += 4)
    {
        System.Drawing.Color pixelcolor = screenshot.GetPixel(x,y); 
```

尽量不要在不必要的时候硬输入值。我什至可能会将那个“4”变成某个地方的 const 或属性。

# c++ - 将内联 ASM 转换为 x64 igraph 的内在

> ID：13146997
> 
> 赞同：3
> 
> 时间：2012-10-30T20:19:34.033
> 
> 标签：c++, c, assembly, visual-studio-2012, intrinsics

我正在从源代码编译 python 扩展 IGRAPH for x64 而不是发行版中可用的 x86。我已经在 VS 2012 中对它进行了整理，当我在 src/math.c 中注释如下时它会编译

```
#ifndef HAVE_LOGBL
long double igraph_logbl(long double x) {
long double res;
/**#if defined(_MSC_VER)
  __asm { fld [x] }
  __asm { fxtract }
  __asm { fstp st }
  __asm { fistp [res] }
 #else
 __asm__ ("fxtract\n\t"
 "fstp  %%st" : "=t" (res) : "0" (x));
 #endif*/
    return res;
 }
#endif 
```

问题是我不太了解 asm，我也不太了解从 x86 到 x64 是否存在问题。据我所见，这是 4 个必须转换为 x64 内在函数的汇编指令的简短片段。

任何指针？走向内在是正确的方式吗？或者它应该是子程序还是纯C？

编辑：如果有人想查看 igraph 扩展链接[http://igraph.sourceforge.net/download.html](http://igraph.sourceforge.net/download.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:57:43.250

在 x64 中，浮点通常将使用 SSE2 指令执行，因为这些指令通常要快得多。您唯一的问题是 SSE 中没有等效的 fxtract 操作（这通常意味着 FPU 版本将作为复合指令实现，因此非常慢）。因此，在 x64 上实现为 C 函数可能会一样快。

我发现该函数有点难以阅读，但是据我所知，它正在调用 fxtract，然后将整数值存储到 long double 指向的地址。这意味着 long double 将有一个“部分”未定义的值。尽我所能告诉上面的代码汇编不应该工作......但是自从我编写任何 x87 代码以来已经很长时间了，所以我可能只是生疏了。

无论如何，该功能似乎是您在 MSVC 中找不到的[logb的实现。](http://www.kernel.org/doc/man-pages/online/pages/man3/logb.3.html)但是，它可以使用 frexp 函数实现如下：

```
long double igraph_logbl(long double x) 
{
    int exp = 0;
    frexpl( x, &exp );
    return (long double)exp;
 } 
```

# linux - 没有可用的包 mongo-10gen - YUM INSTALL 在 AMAZON LINUX MACHINE 上

> ID：13146999
> 
> 赞同：0
> 
> 时间：2012-10-30T20:19:47.890
> 
> 标签：linux, mongodb, installation, amazon, yum

尝试在 amazon linux 服务器上安装 mongo db 时遇到问题。我相信服务器是 Fedora Linux，我按照官方教程中的以下步骤进行操作。

1，我使用“sudo vi /etc/yum.repos.d/10gen.repo”创建了一个repo，内容

[10代]

名称=10gen 存储库

baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64

gpgcheck=0

2、sudo yum install mongo-10gen 和 mongo-10gen-server

错误是 No package mongo-10gen available No package mongo-10gen-server available

我已经尝试谷歌了一段时间，但似乎找不到答案。

非常感谢您的帮助。谢谢。

回答：

**问题已解决，**亚马逊服务器是 32 位机器。