# StackOverflow 问答 15411000-15411999

# jquery - jQuery slideToggle 起作用了

> ID：15411003
> 
> 赞同：0
> 
> 时间：2013-03-14T13:42:42.753
> 
> 标签：jquery, hover, slidetoggle, hoverintent

我在这个设置上遇到了麻烦。当我单击“服务”链接时，它会下拉，但是如果我使用相同的“服务”链接关闭下拉/向下滑动区域，当我重新打开它时，它不会扩展/收缩以适应内容，大小只是冻结，好像我用向下滑动区域内的“关闭”链接关闭它，它继续工作正常。

（单击“服务”，将鼠标悬停在链接上，然后再次单击“服务”将其关闭，然后再次将其打开并再次将鼠标悬停在链接上以显示我的意思）

[jsFiddle](http://jsfiddle.net/9zK29/2/)供参考

```
 $(document).ready(function(){
        $("#closebtn").click(function(){
            $(".expandable").stop().slideUp().delay(600);
            $(".expandable2").stop().slideUp().delay(600);
            $("#taglinecontainer").stop().slideToggle({queue: false}).delay(600);
        });
        $("#toggleservices").click(function(){
            $(".expandable").slideUp().delay(600);
            $("#fullservices").stop().slideToggle({queue: false});
            $("#taglinecontainer").stop().slideToggle({}).delay(600);
        });
        $("#togglesectors").click(function(){
            $(".expandable").slideUp().delay(600);
            $("#fullsectors").slideToggle({queue: false});
            $("#taglinecontainer").slideToggle({}).delay(600);
        });
    });
    $(document).ready(function(){
        $("#togglestrategyblurb").hoverIntent(function(){
            $(".expandable2").slideUp();
            $("#strategyblurb").slideToggle();
        }, function(){
        });
        $("#toggledesignblurb").hoverIntent(function(){
            $(".expandable2").slideUp();
            $("#designblurb").slideToggle();
        }, function(){
        });
        $("#toggleprblurb").hoverIntent(function(){
            $(".expandable2").slideUp();
            $("#prblurb").slideToggle();
        }, function(){
        });
        $("#togglewebblurb").hoverIntent(function(){
            $(".expandable2").slideUp();
            $("#webblurb").slideToggle();
        }, function(){
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:50:09.383

添加`overflow`到您的`header`

```
header {
    background: rgba(0, 0, 0, 0.6);
    min-height: 50px;
    overflow:auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:06:33.267

看看这是否解决了您的问题：[示例](http://jsfiddle.net/9zK29/3/)

```
 $("#toggleservices").click(function(){

    $("#fullservices").stop().slideToggle({queue: false});
    $("#taglinecontainer").stop().slideToggle({}).delay(600);
 }); 
```

# windows - 如何下载 Windows 进程激活服务 (WAS)

> ID：15411004
> 
> 赞同：4
> 
> 时间：2013-03-14T13:42:44.783
> 
> 标签：windows, iis-7, download, was

当我尝试在 IIS7 中启动应用程序池时出现错误。

该错误称为“在计算机上找不到服务 WAS。”。

然后我用谷歌搜索“下载 Windows 进程激活服务 (WAS)，但我似乎找不到下载它。

我在我的 Windows 7 操作系统的远程桌面上的 AWS 上运行它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T13:43:56.940

它包含在 Windows 中，无需额外下载。

您需要`Turn Windows features on or off`在控制面板中打开并从那里安装它。

# jsf-2 - CDI 会话 bean 初始化

> ID：15411009
> 
> 赞同：0
> 
> 时间：2013-03-14T13:42:58.077
> 
> 标签：jsf-2, cdi

我有两个豆子：

```
@Named
@SessionScoped
public class Session implements Serializable {
    private String temp;
    +getter, setter

}

@Named
@RequestScoped
public class Test {
    @Inject
    private Session s;

    @PostConstruct
    public void init() {
        this.sth = s.getTemp(); //here is exception
    }
} 
```

当我尝试从会话中获取 init 相同的值时，我得到 NullPointerException。我究竟做错了什么？服务器是 JBoss eap 6.0，JSF v2.1。提前致谢

编辑：我调查了仅当我在 primefaces 子菜单组件中有超过 11 个项目时才会出现该问题。如果我有少于 11 个项目，每个人都认为工作正常。我正在使用 PrimeFaces v 3.5。编辑 2：在会话 bean 上仅调用构造函数。我有用 PostConstruct 注释的方法，但它没有被调用。在从测试 bean 调用会话上的任何方法后，我总是得到 NullPointerException。

# c++ - Qt TCP服务器/多客户端消息读取

> ID：15411017
> 
> 赞同：0
> 
> 时间：2013-03-14T13:43:26.200
> 
> 标签：c++, qt, tcp

我正在开发一个客户端/服务器应用程序（将 qt 用于 tcp）。客户端每秒必须向服务器发送大约 15 条消息。问题是这样的：
来自客户端的消息是分组接收的。我的意思是：当我收到`readyRead()`信号并从套接字读取数据时，缓冲区中有多个消息。
这当然会导致系统滞后。

我尝试将传入连接放在单独的线程中（每个连接线程），但没有任何改进。
每次收到`readyRead()`信号时，我也尝试启动线程，但又没有...

但是当我在与服务器相同的电脑上运行多个客户端时，一切似乎都很好。当在网络上使用不同的电脑时，会出现延迟......（使用的网络是 100Mbps LAN，消息 <200KB，电脑之间的 ping <5msec，所以我不认为这是网络问题）

在客户端，写入数据的代码非常简单：

```
tcpSocket->write(message.toUtf8());  
tcpSocket->waitForBytesWritten();  
tcpSocket->flush(); 
```

我也尝试过没有`flush()`或`waitForBytesWritten()`相同的...

编辑：使用 Qt 4.8.4 和 Windows 7 和 XP

有人知道如何克服这个问题吗？
先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:07:19.203

上次我遇到类似问题是 Qt3.3 的 QProcess 的 stdin/stdout 通信。它在 Linux 和 Windows 上的行为完全不同。

最后我们发现，在 Linux 上，它使用 select() 在数据到达时进行异步反应（快速，在大多数情况下只有一行可读），而在 Windows 上，新数据的存在是通过 Qt 主循环中的 QTimer 轮询的（大延迟，有几条消息可用）。我们尝试的一种解决方法是减少 Qt 源中的计时器周期，但最后我们切换到基于本机操作系统机制的共享内存。

您的描述听起来像是您在 Windows 操作系统上使用类似的 Qt 版本。

# c# - SqlDataSource OnInserted 过早触发

> ID：15411021
> 
> 赞同：3
> 
> 时间：2013-03-14T13:43:43.297
> 
> 标签：c#, asp.net, sql-server-2008

我有一个具有 OnInserted 处理程序的 SqlDataSource。处理程序发送一封电子邮件，其中包含从已插入记录中收集的数据。包括它的 ID（一个输出参数）。

昨天，我收到一封由处理程序发送的电子邮件，其时间戳为下午 4:00。在 SQL 中提交记录的时间戳之前 20 分钟。如果您认为这是 web/sql/exchange 服务器之间的机器时间差异......我已经排除了这一点。插入由存储过程执行。它在几个表中插入记录。所有这些都有一个下午 4:20 的时间戳。

此外，该电子邮件包含不准确的 ID。与发送电子邮件时未提交的记录一致。

问题是，SqlDataSource 的 OnInserted 处理程序发送的电子邮件怎么可能在 SQL 中提交记录之前发送？

```
protected void On_Inserted(object sender, SqlDataSourceStatusEventArgs e)
{
    try
    {
        //GET THE RECORD ID
        String RecordID = String.Empty;
        RecordID = e.Command.Parameters["@RecordID"].Value != null ? e.Command.Parameters["@RecordID"].Value.ToString() : String.Empty;

        //SEND THE EMAIL
        SmtpClient smtp = new SmtpClient("SmtpHere",##);
        MailMessage email = new MailMessage();
        email.From = new MailAddress("FromAddressHere");
        email.To.Add("ToAddressHere")
        email.Subject = "Example Email";
        email.Body = "The record #" + RecordID + " was just added.";
        smtp.Send(email);
        smtp = null;
        email.Dispose();

        //GO TO THE PAGE WITH THE NEW RECORD ID
        HttpContext.Current.Response.Redirect("~/Page.aspx?RecordID=" + RecordID, false);
    }
    catch (Exception ex)
    {
        //HANDLE EXCEPTION
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:56:57.257

我猜您的电子邮件代码（在`SqlDataSource.Inserted`事件中）没有检查[`SqlDataSourceStatusEventArgs.AffectedRows`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasourcestatuseventargs.aspx)属性以确保实际插入了一行：

```
protected void SqlDataSource1_OnInserted(Object source, SqlDataSourceStatusEventArgs e) 
{
    if (e.AffectedRows > 0)
    {
        // Send e-mail
    }
    else
    {
        // For some reason, the insert didn't happen.  Check for exceptions
        string errorMessage = e.Exception.InnerException.Message;
        // Here you want to display this error to the user, or log it, or something
    }
} 
```

所以我认为发生的是：

1.  即使记录还没有真正插入，电子邮件也会触发
2.  20 分钟后，另一个插入操作发生，实际上是成功的。生成另一封电子邮件，插入行等。

这种类型的错误可能会在一段时间内被忽视，这并不奇怪，因为您的插入可能很少会失败。

# c++ - 如何在编译时替换元组元素？

> ID：15411022
> 
> 赞同：10
> 
> 时间：2013-03-14T13:43:45.327
> 
> 标签：c++, templates, stl, c++11

有没有办法在**编译时**替换元组元素？

例如，

```
using a_t = std::tuple<std::string,unsigned>;  // start with some n-tuple
using b_t = element_replace<a_t,1,double>;     // std::tuple<std::string,double>
using c_t = element_replace<b_t,0,char>;       // std::tuple<char,double> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T14:27:42.700

你可以使用这个：

```
// the usual helpers (BTW: I wish these would be standardized!!)
template< std::size_t... Ns >
struct indices
{
    typedef indices< Ns..., sizeof...( Ns ) > next;
};

template< std::size_t N >
struct make_indices
{
    typedef typename make_indices< N - 1 >::type::next type;
};

template<>
struct make_indices< 0 >
{
    typedef indices<> type;
};

// and now we use them
template< typename Tuple, std::size_t N, typename T,
          typename Indices = typename make_indices< std::tuple_size< Tuple >::value >::type >
struct element_replace;

template< typename... Ts, std::size_t N, typename T, std::size_t... Ns >
struct element_replace< std::tuple< Ts... >, N, T, indices< Ns... > >
{
    typedef std::tuple< typename std::conditional< Ns == N, T, Ts >::type... > type;
}; 
```

然后像这样使用它：

```
using a_t = std::tuple<std::string,unsigned>;     // start with some n-tuple
using b_t = element_replace<a_t,1,double>::type;  // std::tuple<std::string,double>
using c_t = element_replace<b_t,0,char>::type;    // std::tuple<char,double> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T13:47:46.070

查看 boost MPL`transform`或`replace`算法 [http://www.boost.org/doc/libs/1_40_0/libs/mpl/doc/refmanual/transformation-algorithms.html](http://www.boost.org/doc/libs/1_40_0/libs/mpl/doc/refmanual/transformation-algorithms.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:53:51.320

[您可以使用std::tuple_element](http://en.cppreference.com/w/cpp/utility/tuple/tuple_element)访问元组类型的元素的类型。这实际上不允许您替换元组元素类型，但它允许您根据在其他元组类型中用作元素类型的类型来定义元组类型。

# php - WordPress：自定义显示中的新型帖子/页面

> ID：15411023
> 
> 赞同：0
> 
> 时间：2013-03-14T13:43:48.330
> 
> 标签：php, wordpress, wordpress-theming

我想制作一个类似 的页面`/news`，该页面需要具有类似于简单 WordPress 主题中的顶部/底部布局的内容：

```
Title "is a link also to access the post/page"
Space
Content of 160 Chars not more 
```

要简单地添加新新闻，请添加新帖子或页面，然后只需将新帖子设置为普通帖子，然后在此处选择一个选项以使其出现在新闻页面中。

这也应该在 RSS 提要中，但我认为它们只是定制的帖子/页面，所以没问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:09:00.370

这听起来像您想要一个[自定义帖子类型](http://codex.wordpress.org/Post_Types#Custom_Post_Types)。这应该就像一个普通的帖子或页面，但有自己的索引页面和后端管理屏幕。您需要使用[`register_post_type`](http://codex.wordpress.org/Function_Reference/register_post_type)来创建帖子类型。在那之后，事情大多是自动的。来自 Codex，作为参考：

```
function codex_custom_init() {
  $labels = array(
    'name' => 'Books',
    'singular_name' => 'Book',
    'add_new' => 'Add New',
    'add_new_item' => 'Add New Book',
    'edit_item' => 'Edit Book',
    'new_item' => 'New Book',
    'all_items' => 'All Books',
    'view_item' => 'View Book',
    'search_items' => 'Search Books',
    'not_found' =>  'No books found',
    'not_found_in_trash' => 'No books found in Trash', 
    'parent_item_colon' => '',
    'menu_name' => 'Books'
  );

  $args = array(
    'labels' => $labels,
    'public' => true,
    'publicly_queryable' => true,
    'show_ui' => true, 
    'show_in_menu' => true, 
    'query_var' => true,
    'rewrite' => array( 'slug' => 'book' ),
    'capability_type' => 'post',
    'has_archive' => true, 
    'hierarchical' => false,
    'menu_position' => null,
    'supports' => array( 'title', 'editor', 'author', 'thumbnail', 'excerpt', 'comments' )
  ); 

  register_post_type( 'book', $args );
}
add_action( 'init', 'codex_custom_init' ); 
```

参数可能有点混乱。[Smashing Magazine 有一篇文章应该有所帮助](http://wp.smashingmagazine.com/2012/11/08/complete-guide-custom-post-types/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:38:02.987

这将让你开始，只有基础知识

```
function custom_news() {
register_post_type(
            'news', 
            array(
                    'label' => __('News'),
                    'public' => true,
                    'show_ui' => true,
                    'capability_type' => 'post',
                    'menu_position' => 100,
                    'menu_icon' => 'path/to/icon',
                    'supports' => array(
                                 'editor',
                                 'post-thumbnails',
                                 'excerpts',
                                 'custom-fields',
                                 'comments',
                                 'revisions')
            )
    );
    register_taxonomy( 'articles', 'news', array( 'hierarchical' => true, 'label' => __('Articles') ) ); 

   } 
   add_action('init', 'custom_news'); 
```

然后用于`WP_Query`在您想要的任何位置显示自定义帖子：

```
$args = array(
  'post_type' => 'news',
);

$the_query = new WP_Query( $args );

while ( $the_query->have_posts() ) :
$the_query->the_post();
 echo '<a href="'.get_permalink($the_query->ID).'">' . get_the_title() . '</a>';
     echo '<p>' . get_the_content() . '</p>';
endwhile;

wp_reset_postdata(); 
```

# configuration - Apache2只显示索引，但知道其他方面

> ID：15411028
> 
> 赞同：-1
> 
> 时间：2013-03-14T13:43:58.937
> 
> 标签：configuration, apache2, debian

我在我的 Apache2 配置中需要帮助，其他线程对我不起作用:(我在我的 Debian Raspberry Pi 上得到了喘息。我已经安装了 Apache2 PHP 和 MySQL，就像在 How-To 中显示的那样。它工作得很好，index.php可以在我的服务器上工作, php-code 一切正常. 但是如果我添加一个第二个站点或添加一个 css\file.css 我会在 error.log 中收到以下消息：

```
[Thu Mar 14 14:15:55 2013] [error] [client 212.184.119.18] (13)Permission denied                         : file permissions deny server access: /var/www/style.html
[Thu Mar 14 14:15:57 2013] [error] [client 212.184.119.18] (13)Permission denied                         : access to /css/coolblue.css denied, referer: http://myNAME.dyndns-at-home.com/ 
```

我不知道如何修复此权限，请给我提示。

如果您需要更多信息，请告诉我，我会把它给您；-) 抱歉我的英语不好。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:06:12.033

您应该检查新站点所在目录的权限或您创建的文件的权限。此文件和目录必须可由 Apache 服务器的用户或组读取。

例如：列出文件或目录：

```
ls -la 
```

设置所需的目录权限

```
chmod 750 site_directory
chown webeditoruser:apachegroup site_directory 
```

设置文件所需的权限

```
chmod 640 your_file.ext
chown webeditoruser:apachegroup your_file.ext 
```

# c# - 将整个文件夹复制到 IsoStorage

> ID：15411029
> 
> 赞同：2
> 
> 时间：2013-03-14T13:44:02.423
> 
> 标签：c#, silverlight, windows-phone-7

对于我的 Windows Phone 应用程序，我目前正在通过列出确切的文件将我的文件复制到 isostorage。

```
string[] files = { "index.html", "style.css", "jquery.js" };
foreach (string f in files)
{
    Uri fileUri = new Uri(componentPrefix + f, UriKind.Relative);
    StreamResourceInfo sr = Application.GetResourceStream(fileUri);

    if (sr == null) 
    {
        // we are probably a folder or non-existing file
    }
    else
    {
        using (BinaryReader br = new BinaryReader(sr.Stream))
        {
            byte[] data = br.ReadBytes((int)sr.Stream.Length);
            IsoStoreUtils.SaveToIsoStore(f, data);
        }
    }
} 
```

是否可以复制整个文件夹而不是列出我要复制的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:57:12.930

您可以在 foreach 循环中执行此操作，但您需要首先收集所有嵌入式资源的列表。您可以使用[Assembly.GetManifestResourceNames](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcenames.aspx)检索它们。

# java - 在java中同时从字符串中提取2个单词

> ID：15411033
> 
> 赞同：2
> 
> 时间：2013-03-14T13:44:23.300
> 
> 标签：java, substring, indexof

```
 "[17235_A, 17235_B, -1.0, 0.06838527, 1.0]"   
    "[17235_C, 17235_D, -1.0, 0.06838527, 1.0]"
    "[17235_E, 17235_F, -1.0, 0.06838527, 1.0]" 
```

我有一堆如上所述的字符串，我想从第一行中提取数字`17235_A`，`17235_B`从第二行和第三行中提取类似的其他数字。如您所见，每行的数字都在变化，如果子字符串代码是通用的，我会很棒。你的建议对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:48:21.127

```
String[] result = string.split("," ,2); 
```

result[0] 和 result[1] 将是您需要的两个子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:51:11.867

一些正则表达式将为您执行此操作：

```
public static void main(String[] args) {
    final String[] myStrings = new String[] {"[17235_A, 17235_B, -1.0, 0.06838527, 1.0]", "[17235_C, 17235_D, -1.0, 0.06838527, 1.0]", "[17235_E, 17235_F, -1.0, 0.06838527, 1.0]"};
    final Pattern pattern = Pattern.compile("^\\[([^,]++),\\s*+([^,]++).*+$");
    for(final String string : myStrings) {
        final Matcher matcher = pattern.matcher(string);
        if(matcher.matches()) {
            System.out.println(matcher.group(1));
            System.out.println(matcher.group(2));
            System.out.println("Done");
        }
    }        
} 
```

输出：

```
17235_A
17235_B
Done
17235_C
17235_D
Done
17235_E
17235_F
Done 
```

正则表达式的解释：

*   `^`匹配字符串的开头
*   `\\[`匹配开头的“[”（双转义）
*   将`([^,]++)`内容匹配到第一个逗号，这更像是一种优化而不是必要性
*   then 匹配一个逗号，`,\\s*+`后跟任意数量的空格（再次肯定）
*   将`([^,]++)`内容匹配到下一个逗号
*   匹配内容`.*$`直到行尾（再次可能）

两个匹配组现在包含所需`String`的 s。

[这](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-optimizingregex.html)是一篇关于为什么尽可能使用所有格匹配的非常好的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:48:46.550

```
public static void main(String[] args) {
        String str = "[17235_A, 17235_B, -1.0, 0.06838527, 1.0]";

        String[] strArray = str.split(", ");

        System.out.println(strArray[0].substring(1)); //first number
        System.out.println(strArray[1]); //second number
    } 
```

# google-maps - 带有 Sencha Touch 2.x 的 Google Place API v3

> ID：15411034
> 
> 赞同：0
> 
> 时间：2013-03-14T13:44:24.243
> 
> 标签：google-maps, sencha-touch-2, google-places-api, sencha-architect

我是 Sencha Touch 的新手，知道 Javascript、jQuery、HTML5。

我正在使用 Sencha Touch + Sencha Architect 开发简单的 Google Map 应用程序，它在当前位置放置标记，还使用 ​​Google Place 在当前位置附近查找“商店”（即需要 Google 地点搜索的类型）。我在“callbackPlaces”（即纬度、经度）中获取位置，但 Google.Maps.Marker 在“callbackPlaces”方法中给出错误（即通过“addMarker”方法调用，我还尝试通过将 Google.Maps.Marker 放入'回调位置'）。

```
Ext.define('MyApp.view.Map', {
    extend: 'Ext.Map',
    alias: 'widget.map',

    config: {
        useCurrentLocation: true,
        listeners: [
            {
                fn: 'onMapMaprender',
                event: 'maprender'
            }
        ]
    },

    onMapMaprender: function(map, gmap, options) {
        this.initializePlaces();
    },

    initializePlaces: function() {

        //Set Marker on Current Position
        var geo = this.getGeo();
        var currentPosition = new google.maps.LatLng(geo.getLatitude(), geo.getLongitude());
        this.createMarker(currentPosition);

        //request set for Places Services
        var request = {
            location: currentPosition,
            radius: 500,
            types: ['store']
        };

        this.getMap().zoom = 15;

        // Call PlacesService
        var service = new google.maps.places.PlacesService(this.getMap());
        service.nearbySearch(request, this.callbackPlaces); 

    },

    callbackPlaces: function(results, status) {

        if (status == google.maps.places.PlacesServiceStatus.OK) {  

            for (var i = 0; i < results.length; i++) {
                addMarker(results[i]);
            }
        }
    },

    createMarker: function(position) {
        //Here Position = Google Map LatLng

        var infoWindow = new google.maps.InfoWindow();

        var marker = new google.maps.Marker({
            map: this.getMap(),
            position: position
        });

        google.maps.event.addListener(marker, "click", function() {    
            infoWindow.setContent("Lng: " + marker.position.lng() + "\n Lat: " + marker.position.lat());
            infoWindow.open(this.getMap(), marker);
        }); 
    },

    addMarker: function() {
        //Here Place = google.maps.places

        var infoWindow = new google.maps.InfoWindow();

        var marker = new google.maps.Marker({
            map: this.getMap(),
            position: place.geometry.location
        });

        google.maps.event.addListener(marker, "click", function() {    
            infoWindow.setContent("Lng: " + marker.position.lng() + "\n Lat: " + marker.position.lat());
            infoWindow.open(this.getMap(), marker);
        }); 
    }

}); 
```

我不知道出了什么问题！

任何帮助|提示将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:55:30.663

您指出 callbackPlaces 函数中存在范围问题。

因此，您应该替换以下行：

```
service.nearbySearch(request, this.callbackPlaces); 
```

和

```
service.nearbySearch(request, function (results, status) {
  this.callbackPlaces.call(this, [results, status]);
}); 
```

希望这可以帮助

# entity-framework - 实体框架 5 缓存问题

> ID：15411035
> 
> 赞同：-1
> 
> 时间：2013-03-14T13:44:24.347
> 
> 标签：entity-framework, entity-framework-5

我们正面临 Entity Framework 5 的以下问题：

我们的应用逻辑是用户可以处理来自多台计算机的相同数据。

一旦一个用户查询数据，并且在另一台计算机上更改了相同的数据，他将无法获得更新的数据，直到他重新启动应用程序。

我们已经将“启用延迟加载”选项设置为 true，并且我们不想禁用此选项。

我们希望实体每次都在不缓存的情况下查询数据库。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:12:23.957

您可以在 DbContext 类的构造函数中执行此操作：

```
 public DbContext()
    {
        this.Configuration.LazyLoadingEnabled = true;
    } 
```

编辑：我认为使用实体框架不可能实现您的要求。Entity Framework 会自动缓存对象，因为它就是为此而构建的。

# aggregate - 聚合相似行

> ID：15411037
> 
> 赞同：0
> 
> 时间：2013-03-14T13:44:33.713
> 
> 标签：aggregate, oracle9i

假设我有一张这样的表：

```
 NAME   REF1   REF2   DRCT
  A    (null)   Ra     D1
  A      Rb   (null)   D1
  A    (null)   Rc     D2
  B      Rd   (null)   D3
  B    (null)   Re     D3 
```

我想将该表聚合为：

```
NAME   REF1   REF2   DRCT
 A      Rb     Ra     D1
 A    (null)   Rc     D2
 B      Rd     Re     D3 
```

如您所见，我想聚合具有相同名称的每一行。我搜索了 COALESCE 和各种聚合函数，但没有找到我想要的东西。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:14:10.073

假设我在之前的评论中问的是真的，（对于每个 NAME、DRCT 对，REF1 和 REF2 仅为 null 或给定值），这似乎有效：

```
select NAME, M_REF1, M_REF2, DRCT 
from (
    select A.NAME, coalesce(A.REF1, B.REF1) m_REF1, 
       coalesce(A.REF2, B.REF2) m_REF2, A.REF1 A_REF1, B.REF1 B_REF1,
       A.REF2 A_REF2, B.REF2 B_REF2, A.DRCT
    from Table1 A JOIN Table1 B on A.NAME = B.NAME AND A.DRCT = B.DRCT)
    WHERE A_REF1 = m_REF1 AND B_REF2 = m_REF2
UNION
select A.NAME, A.REF1, A.REF2, A.DRCT 
FROM Table1 A JOIN
     (select NAME, DRCT, COUNT(*)
      from Table1
      group by NAME, DRCT
      HAVING COUNT(*) = 1) B ON A.NAME = B.NAME AND A.DRCT = B.DRCT; 
```

使用联合是因为只有一条记录的行不包含在第一个 SELECT 中。

但这有点简单，而且也有效：

```
select A.NAME, coalesce(A.REF1, B.REF1) M_REF1, coalesce(A.REF2,B.REF2) M_REF2,A.DRCT
from Table1 A LEFT OUTER JOIN Table1 B ON A.DRCT = B.DRCT AND A.NAME = B.NAME 
WHERE NVL2(A.REF1,0,1) = 1 AND NVL2(B.REF1,0,1) =0 
      AND NVL2(A.REF2,0,1) = 0 AND NVL2(B.REF2,0,1) = 1
UNION
select A.NAME, A.REF1, A.REF2, A.DRCT 
FROM Table1 A JOIN
 (select NAME, DRCT, COUNT(*)
  from Table1
  group by NAME, DRCT
  HAVING COUNT(*) = 1) B ON A.NAME = B.NAME AND A.DRCT = B.DRCT; 
```

# java - Gwt 组合框比较使用 contains 而不是startswith

> ID：15411039
> 
> 赞同：0
> 
> 时间：2013-03-14T13:44:40.867
> 
> 标签：java, combobox, gxt

需要在 Java 中使用 GWT 创建一个 Combobox。此组合框必须具有预先输入功能，并且还必须使用“contains”而不是“startswith”来获得建议。知道如何实现这一点吗？我应该覆盖一些东西吗？提前致谢

---编辑添加了我的代码的一些部分首先我声明了组合框和商店

```
private ComboBox docTypeField;
private Store store; 
```

然后我以这种方式初始化组合框

```
docTypeField = new ComboBox();
docTypeField.setFieldLabel("Doc Types:");
docTypeField.setDisplayField(DocTypePicker.STORE_FIELD_NAME);
docTypeField.setMode(ComboBox.LOCAL);
docTypeField.setStore(store);
docTypeField.setTypeAhead(true); 
```

我试图通过商店中的方法修改过滤器，但它没有按预期工作

```
store.filterBy(new StoreTraversalCallback() {
            public boolean execute(Record record) {
                //if user text matches the name or alias then its true
                if (sugestDocttype.getValue() == null
                        || sugestDocttype.getValue().length() == 0
                        || (record.getAsString(DocTypePicker.STORE_FIELD_NAME) != null && record.getAsString(
                                DocTypePicker.STORE_FIELD_NAME).toUpperCase().contains(
                                        sugestDocttype.getValue().toUpperCase()))
                        ){ 

                    return true;
                }

                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:43:41.670

可能对您有帮助：[使用 GWT SuggestBox 和 REST 创建多值自动完成字段](http://www.zackgrossbart.com/hackito/gwt-rest-auto/)。

# jquery - 复制拖动的项目

> ID：15411040
> 
> 赞同：-1
> 
> 时间：2013-03-14T13:44:45.110
> 
> 标签：jquery, html

我有一个可以拖拽的图片列表。

拖动我使用

```
 $('.test').draggable({opacity: 0.5}).resizable(); 
```

我想将拖动的 div 复制到它被拖动的 div 中。所以如果我拖动

```
 <div class="test">
  <img src="test.png">
 </div> 
```

进入

```
 <div id="box">
  </div> 
```

它应该变成

```
 <div id="box">
   <div id="test">
   <img src="test.png">
   </div>
 </div> 
```

我想要它在 div 框中，因为我已经打印了 div 框。因此，如果它不在 div 框中而是在其上方，则不会打印 img。

我可以看到它的使用

```
$('.box').droppable({
    drop: function( event, ui ) {
    $( this )
    .addClass( "ui-state-highlight" )
    .find( "p" )
    .html( "Dropped!" );
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:47:27.253

你应该使用 jquery ui draggable 和 droppable 并使用 helper clone，如果你想复制内容，如果你想移动内容，只需在 droppable 上做一个追加，再见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T08:12:48.943

里面

```
$("#bord").droppable
    ({  
        greedy: true,
        tolerance:"pointer",
        drop: function (event, ui) 
        {
             //here
        } 
```

我有

```
 .addClass('sleep').appendTo($(this)) 
```

这就是我所需要的。

追加为我做了诀窍。

关于附加的一些信息。

[链接到 jquery api 示例](http://api.jquery.com/append/)

说明：将参数指定的内容插入到匹配元素集中每个元素的末尾。

# c - 在 C 中初始化一个类似于 Fortran 的多维数组

> ID：15411041
> 
> 赞同：1
> 
> 时间：2013-03-14T13:44:48.767
> 
> 标签：c, fortran

我在 FORTRAN 90 中编写了一个小型测试用例程序，它初始化切片中的 3d 数组。可以在 C 中轻松复制相同的行为吗？

```
 program fortranEngine

  real(4) , dimension(10,10) :: tmp
  real(4) , dimension(10,10,3) :: p    

  tmp = RESHAPE( [  0.973, 1.053, 0,     0,     0,     0,     0,     0,     0,     0, &
                    1.053, 1.080, 0,     0,     0,     0,     0,     0,     0,     0, &
                    1.010, 0.408, 0.442, 0,     0,     0,     0,     0,     0,     0, &
                    1.119, 0.900, 0.399, 0.762, 0,     0,     0,     0,     0,     0, &
                    1.211, 0.975, 0.845, 0.952, 1.105, 0,     0,     0,     0,     0, &
                    1.248, 1.016, 0.485, 0.000, 0.000, 1.110, 0,     0,     0,     0, &
                    1.225, 1.123, 1.056, 0.000, 0.000, 0.949, 0.832, 0,     0,     0, &
                    1.138, 1.232, 1.089, 1.050, 0.930, 0.402, 0.789, 0.774, 0,     0, &
                    1.149, 1.406, 1.201, 1.052, 0.416, 0.878, 0.896, 0.431, 1.144, 0, &
                    1.351, 1.255, 1.290, 1.358, 1.240, 1.228, 1.257, 1.140, 1.123, 1.228] &
                    , [10,10] )    

    p(:,:,1) = tmp    

    ...

    end program fortranEngine 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:56:36.667

您可以在 C99 或 C2011 中或多或少地做到这一点，但它不如在 Fortran 中方便。注意[初始化](http://en.wikipedia.org/wiki/Row-major_order)顺序；Fortran 以一种顺序（以列为主），而 C 以另一种顺序（以行为主）。忽略这一点，您可以执行以下操作：

```
float tmp[10][10] =
{
    { 0.973, 1.053, 0,     0,     0,     0,     0,     0,     0,     0,    },
    { 1.053, 1.080, 0,     0,     0,     0,     0,     0,     0,     0,    },
    { 1.010, 0.408, 0.442, 0,     0,     0,     0,     0,     0,     0,    },
    { 1.119, 0.900, 0.399, 0.762, 0,     0,     0,     0,     0,     0,    },
    { 1.211, 0.975, 0.845, 0.952, 1.105, 0,     0,     0,     0,     0,    },
    { 1.248, 1.016, 0.485, 0.000, 0.000, 1.110, 0,     0,     0,     0,    },
    { 1.225, 1.123, 1.056, 0.000, 0.000, 0.949, 0.832, 0,     0,     0,    },
    { 1.138, 1.232, 1.089, 1.050, 0.930, 0.402, 0.789, 0.774, 0,     0,    },
    { 1.149, 1.406, 1.201, 1.052, 0.416, 0.878, 0.896, 0.431, 1.144, 0,    },
    { 1.351, 1.255, 1.290, 1.358, 1.240, 1.228, 1.257, 1.140, 1.123, 1.228 },
};
float p[3][10][10];    

for (int i = 0; i < 3; i++)
    memmove(p[i], tmp, sizeof(tmp)); 
```

请注意，我将维度`[3]`从声明的末尾移到了声明的开头。反过来，在 C 中没有多大意义。因此，该符号或多或少是可用的，但存储管理的细节使得如何准确地实现您想要的东西变得不那么明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:49:32.077

这很容易吗？

```
for(int i = 0 ; i < 10 ; ++i) 
    for(int j = 0 ; j < 10 ; ++j )
        p[0][i][j] = tmp[i][j] ; 
```

# node.js - 如何使用 http-proxy 在端口 80 上运行 node.js 应用程序？

> ID：15411042
> 
> 赞同：1
> 
> 时间：2013-03-14T13:44:59.087
> 
> 标签：node.js, express, reverse-proxy, http-proxy, node-http-proxy

我想在 Apache 服务器的 80 端口上运行我的 node.js 应用程序。我通过 Apache 尝试了 2 种方法：

```
<VirtualHost *:80>
    ServerName domainName.com
    ServerAlias www.domainName.com

    ProxyRequests off

    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    <Location />
        ProxyPass http://domainName:8080
        ProxyPassReverse http://domainName:8080
    </Location>
</VirtualHost> 
```

当我使用它时，我会`502 proxy error`进入 Chrome 控制台。服务器找不到我的`CSS`和`Socket.io`其他`JS`文件。

**更新：我通过放在`http://domainName.com:8080/`链接前面解决了 CSS 和普通 .js 文件的这个错误。但是socket.io的问题仍然存在！找不到 Socket.io！**

第二种方法是使用`http-proxy`模块（这是我找到的示例，请参阅本文下方的评论）：

```
var http = require('http'),
httpProxy = require('http-proxy'),
proxyServer = httpProxy.createServer ({
    hostnameOnly: true,
    router: {
        'domain.com':       '127.0.0.1:81',
        'domain.co.uk':     '127.0.0.1:82',
        '127.0.0.1':        '127.0.0.1:83'
    }
});

proxyServer.listen(80); 
```

这里解释了：[how to put nodejs and apache in the same port 80](https://stackoverflow.com/questions/11172351/how-to-put-nodejs-and-apache-in-the-same-port-80)

我不知道如何让这个为我的代码工作，因为我正在使用`Express`.

这是我的相关代码部分：

```
var express = require('express');
var http = require('http');
var io = require('socket.io');
var connect = require('connect');
var sanitize = require('validator').sanitize;
var app = express();
var MemoryStore = express.session.MemoryStore;
var server = http.createServer(app);

var sessionStore = new MemoryStore();
var io = io.listen(server);
app.configure(function() {
    //app.use(express.logger());
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.session({ 
            store: sessionStore, 
            secret: 'someSecret',
            key: 'cookie.sid', maxAge: null }));
            });
app.use(app.router);
app.use("/styles", express.static(__dirname + '/styles'));
app.use("/images", express.static(__dirname + '/styles/images'));
app.use("/js", express.static(__dirname + '/js'));
// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

server.listen(8080); 
```

**我更喜欢第二种方法，所以如果有人可以帮助我让它工作，我会非常感激。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:02:41.613

为了让 socket.io 通过具有多个域的节点 http-proxy 工作，这是我的设置。我不确定它是否是最好的（我希望它与路由器对象一起使用），但它可以工作。

```
var http = require('http'),
  httpProxy = require('http-proxy');

httpProxy.setMaxSockets(4096);

var server1 = new httpProxy.HttpProxy({
  target: {
    host: '127.0.0.1',
    port: '3000'
  }
});

var server2 = new httpProxy.HttpProxy({
  target: {
    host: '127.0.0.1',
    port: '3001'
  }
});

var server = http.createServer(function(req ,res){
  switch(req.headers.host){
    case 'server1.com':
      server1.proxyRequest(req, res);
    break;
    case 'server2.com':
      server2.proxyRequest(req, res);
    break;
  }
});

server.on('upgrade', function(req, socket, head){
  // Cases need only for servers that actually use websockets
  switch(req.headers.host){
    case 'server1.com':
      server1.proxyWebSocketRequest(req, socket, head);
    break;
    case 'server2.com':
      server2.proxyWebSocketRequest(req, socket, head);
    break;
  }
});

server.listen(80); 
```

# iphone - iPhone应用程序购买实物支付网关

> ID：15411046
> 
> 赞同：-3
> 
> 时间：2013-03-14T13:45:06.180
> 
> 标签：iphone, ios, payment-gateway, payment

我想在我的 iPhone 应用程序中使用支付网关。我们想购买/订购一些实物，如比萨饼或任何其他食品。所以请让我知道我应该使用哪个支付网关。苹果也会批准这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:00:26.977

在应用程序中购买实物商品或类似的外部商品是完全可以的。您可以使用任何您想要的网关，例如 PayPal。我从事旅游工作，我们使用自己的支付系统处理酒店预订等事务。

应用程序内购买*仅*适用于您在应用程序中购买的改变应用程序功能的东西（例如游戏中的虚拟帽子或解锁应用程序功能），并且是 Apple 允许您执行此操作的唯一方式。也可以（参见亚马逊的 Kindle Book 应用程序）支持在网站上购买并让应用程序更新数据，但是您不能在应用程序中提及这一点，甚至不能提供在线商店的链接。仍然只适用于应用程序内的东西。

就我个人而言，我不赞成 PayPal，因为他们倾向于以各种奇怪的原因欺骗人们。您应该研究许多选项，通常取决于您想要支持的国家/地区，因为在任何地方都很少有工作，您的公司是否可以满足网关公司需要的任何要求。

# iphone - 尝试使用 NSxmlparser 解析没有父节点的 xml 列表

> ID：15411047
> 
> 赞同：-1
> 
> 时间：2013-03-14T13:45:08.730
> 
> 标签：iphone, xml, nsxmlparser

我已经阅读了有关 NSxmlparser 的信息。我有以下文件，但我不明白我应该如何处理解析器。

我尝试使用 NSxmlparser 解析没有父节点的 xml 列表

```
<nodes1>
            <child1>txt1</child1>
            <child2>Txt2</child2>
</nodes1>
<nodes1>
            <child1>Txt3</child1>
            <child2>Txt4</child2>
</nodes1>
<nodes1>
            <child1>Txt5</child1>
            <child2>Txt6</child2>
</nodes1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:04:00.260

获取文件并开始解析

```
NSError *error;
NSString *xmlPath = [[NSBundle mainBundle] pathForResource:@"yourFile" ofType:@"xml"];

NSString* contents = [NSString stringWithContentsOfFile:xmlPath encoding:NSUTF8StringEncoding error:&error];
self.xmlData = [[NSData alloc] init];
self.xmlData = [contents dataUsingEncoding:NSUTF8StringEncoding];

self.xmlParser = [[NSXMLParser alloc] initWithData:self.xmlData];
[self.xmlParser setDelegate: self];
[self.xmlParser setShouldResolveExternalEntities: YES];
[self.xmlParser parse]; 
```

然后用于解析

```
BOOL isValid_child1 = NO;

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *) namespaceURI qualifiedName:(NSString *)qName attributes: (NSDictionary *)attributeDict
{
      if ([elementName isEqualToString:@"child1"]) {
      isValid_child1 = YES; 
      }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (isValid_child1) {
        valueInChild1 = string; // string is txt1
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"child1"]) {
       isValid_child1 = NO;
       [array addObject:valueInChild1]; // to add value for child1 to an array
    } 
```

我知道这很脏;) 但它有效，你可以更灵活地做到这一点。

# events - MFC COutlookBar 检测单击窗格

> ID：15411052
> 
> 赞同：0
> 
> 时间：2013-03-14T13:45:19.563
> 
> 标签：events, mfc

我有一个应用程序，其 CMFCOutlookBar 位于左窗格中。我在 OutlookBar 上添加了三个窗格，底部有三个按钮。到目前为止一切正常...

我试过但没有成功检测到何时单击位于 CMFCOutlookBar 底部的不同按钮。

是否可以拦截此类事件？

# image - Monodroid中图像上的矩形

> ID：15411057
> 
> 赞同：0
> 
> 时间：2013-03-14T13:45:29.183
> 
> 标签：image, xamarin.android, detection, rectangles, drawrectangle

我一直在尝试在一张人脸照片的图像上绘制一个矩形。就像照片机器中的人脸检测一样，但是矩形的坐标将从服务器获取。谁能帮我解决这个问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:19:05.650

您可能需要检查此[https://gist.github.com/slodge/2927149](https://gist.github.com/slodge/2927149)代码。

# c - rand() 多线程

> ID：15411061
> 
> 赞同：3
> 
> 时间：2013-03-14T13:45:36.393
> 
> 标签：c, multithreading

我正在处理两个线程，试图在 main() 中生成一次种子（时间（空））播种的随机数。程序不断出现分段错误，直到我发现在使用线程时我们必须为它们自己的例程中的所有线程生成随机数，然后没有分段错误。

我试图在谷歌上找到答案，为什么我们必须为所有线程独立播种，但没有找到足够令人信服的答案。谁能解释一下？谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T13:49:03.057

给你一个简短而直接的答案：

**`rand()`不是线程安全的。**

不应该在没有显式临界区的情况下从多个线程调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T14:11:41.730

正如 Dariusz 所提到的，问题在于 rand() 不是线程安全的。

但是，您可以使用 nrand48 ( [http://linux.about.com/library/cmd/blcmdl3_nrand48.htm](http://linux.about.com/library/cmd/blcmdl3_nrand48.htm) )，它将用于种子的存储作为参数。

通过这种方式，您可以将不同的种子存储与每个线程相关联，这样对随机数生成器的调用将在不同的内存区域上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:54:03.363

如果这不是用于密码学，而是用于蒙特卡洛情况或类似的情况，那么 Mersenne Twister 是一个很好的解决方案。特别是这个版本[http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dc.html](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dc.html) 已经专门针对并行或线程使用进行了调整。这项工作是由原作者完成的，PRNG 的周期很长。

# javascript - 拖动功能不允许所需的选择器

> ID：15411062
> 
> 赞同：0
> 
> 时间：2013-03-14T13:45:39.097
> 
> 标签：javascript, jquery, drag-and-drop, lightbox

我正在使用下面的代码使我网站上的图像可拖动，但我无法选择我希望使用的选择器。虽然使用“.photo”时图像是可拖动的，但它使用的边界框比图像大，我宁愿使用“img”或“.img1”和“.img2”。

此外，自从我开始使用此代码以来，每次我释放图像时都会触发*灯箱功能，而不是仅在单击时触发。*

```
jQuery(function($){
    $('.photo').drag(function( ev, dd ){
        $( this ).css({
            top: dd.offsetY,
            left: dd.offsetX
        });
    });
}); 
```

在此处查看演示：http: [//www.coreytegeler.com/jb/3/](http://www.coreytegeler.com/jb/3/)

*我已经使用`Draggable`了这种效果，但这导致 Chrome/Safari 中出现了一个我无法解决的奇怪问题，因此我选择了一种新方法。*

**编辑** 这是用于每个图像的 HTML（'.img1' 也可以是图像上的 '.img2'）

```
 <div class="photo"><a href="http://www.coreytegeler.com/jb/1/images/full/001.jpg" rel="lightbox"><img class="img1" src="http://www.coreytegeler.com/jb/1/images/001.png"/></a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:52:17.187

尝试将拖动行为应用到您想成为选择器的项目，然后使用该功能移动图像。

您可能会在每次拖动时触发灯箱，因为它正在记录 mousedown/mouseup 事件序列，并且由于您有自定义拖动事件，因此拖动的标准覆盖被禁用。

# python - 怎么办？。无检查

> ID：15411064
> 
> 赞同：0
> 
> 时间：2013-03-14T13:45:45.100
> 
> 标签：python, python-2.7

我知道这是在 Java 8 或 9 的管道中，但我认为必须有一种方法可以在 python 中做到这一点。例如，我正在编写一个复杂的表达式，并且懒得在所有级别添加空检查（下面的示例）

```
post_code = department.parent_department.get('sibling').employees.get('John').address.post_code 
```

我不想担心几个中间值是“无”。例如，如果 parent_department 没有兄弟键，我想分流并返回 None 分配给 post_code。就像是

```
post_code = department?.parent_department?.get('sibling')?.employees?.get('John')?.address?.post_code 
```

这可以在 Python 2.7.1 中完成吗？我知道这意味着调试时会遇到更多麻烦，但假设我已经完成了所有预检查，如果任何值为 null 则表示内部错误，所以如果我只是得到特定行失败的错误跟踪就足够了。

这是一种更详细的方式。我只需要一个不会抛出随机异常的单行器

```
def get_post_code(department):
    if department is None:
        return None
    if department.parent_department is None:
        return None
    if department.parent_department.get('sibling') is None:
        return None
    ... more checks...
    return post_code = department.parent_department.get('sibling').employees.get('John').address.post_code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:02:47.143

如果您想`post_code`成为`None`然后捕获通过尝试访问不存在的项目引发的异常：

```
try:
    post_code = department.parent_department.get('sibling').employees.get('John').address.post_code
except (AttributeError, KeyError):
    post_code = None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:30:22.337

实际上，对此的一个有效答案是开始考虑单子（可能是单子）来链接这些函数。一个非常原始的教程位于[https://github.com/dustingetz/dustingetz.github.com/blob/master/_posts/2012-04-07-dustins-awesome-monad-tutorial-for-humans-in-python。 MD](https://github.com/dustingetz/dustingetz.github.com/blob/master/_posts/2012-04-07-dustins-awesome-monad-tutorial-for-humans-in-python.md)

# cocos2d-x - Cocos2dx - 如何判断孩子是精灵还是图层？

> ID：15411065
> 
> 赞同：2
> 
> 时间：2013-03-14T13:45:51.137
> 
> 标签：cocos2d-x

我在 cocos2dx 中实现了一个应用程序。

我目前面临的问题是我无法找到孩子是精灵还是图层，因为 getChildren() 方法返回 CCObjects 列表。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:50:26.770

当你有一个孩子时，你需要做一个[类型转换](http://www.cplusplus.com/doc/tutorial/typecasting/ "类型转换")来检查它是一个精灵还是一个图层：

```
for(int i = 0; i < myNode->getChildren()->count(); i++)
{
    CCNode *child = myNode->getChildren()->objectAtIndex(i);
    CCSprite* s = dynamic_cast<CCSprite*>(child);
    if(s != 0) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T10:15:56.607

这是另一个示例可能会有所帮助：

```
Vector<Node*> allNodes=this->getChildren();
for(auto&  node : allNodes){
    if(dynamic_cast<Sprite*>(node)){ //It is Sprite 
        Sprite *target=dynamic_cast<Sprite*>(node);
        //Do whatever you like
    }
} 
```

# c# - 将验证错误从服务传递到控制器

> ID：15411066
> 
> 赞同：2
> 
> 时间：2013-03-14T13:45:52.243
> 
> 标签：c#, asp.net, validation, asp.net-mvc-4

在我的网络应用程序中，我的服务层负责所有逻辑（如注册等）。我想为我的表单实现服务器端验证。问题是我不能每次捕获无效数据时都抛出异常，因为如果用户输入了错误的电子邮件和密码，我的服务方法会在检查电子邮件后立即抛出异常，并且只有在用户之后才会注意到密码错误更正电子邮件并重新提交表格。我希望我的整个表格立即得到验证。重要的是：**我只需要传递错误类型，显示消息必须添加到控制器中的 ModelState 中。**我有一些想法，我希望您帮助我从性能和良好实践的角度来决定哪个更好（也许没有 - 也许还有另一种解决方案优于我发布的所有解决方案）。

想法：

1.  在字典中收集错误，然后以键值的形式抛出包含所有模型错误的单个异常（例如“密码”、“必须 > 5 个符号”）。在控制器中，我捕获错误，并使用 switch() 读取所有条目以检测错误类型并将适当的消息添加到 ModelState。
    *   优点：使用内置的 Exception.Data 字典
    *   缺点：需要从字符串中破译错误类型
2.  与以前类似，但我创建了自定义异常类，它具有额外的字段枚举字典（例如“密码”、ValidationEnum.LessThanFiveSignsError）。
    *   优点：枚举是 switch() 操作的更优雅的解决方案
    *   缺点：需要实现自定义异常来做一些内置异常类实际上可以做的事情
3.  使用字典的自定义异常，但使用异常而不是枚举 - 我创建了 StringTooShortException 和 UsernameAlreadyExistsException 之类的类并将它们添加到字典中（例如“密码”，新的 StringTooShortException（））。Switch 可能需要检查类型对象...
    *   优点：我使用异常？我越想越觉得这不是一个好主意……
    *   缺点：传递对象异常子类（具有所有异常类属性和东西）并且只使用该对象是什么类型的信息？
4.  让我的每个服务方法都返回包含 {object regularReturnValueDependingOnMethod, MyCustomErrorContainer canBeListOfEnumsOrSomething} 的自定义类。这个和以前的想法之间的基本区别是我不会抛出异常只是为了将我的错误容器带到控制器，我使用正确的工作流程。
    *   优点：不抛出异常，只是向控制器返回验证错误，使用正确的工作流程来传递值
    *   缺点：包装每个方法的返回值只是为了将验证错误传回控制器不是太多了吗？也许验证错误正是这种情况，我应该使用异常将消息传送到控制器（无论该消息可能是：文本字符串，或者在这种情况下，整个对象）
5.  不要包装返回值，只需在控制器中创建验证错误容器并将其作为“out”参数传递给服务
    *   优点：简单
    *   缺点：需要在调用任何服务方法之前创建错误容器实例（好的，只是那些验证输入的方法）。优雅吗？

你怎么看？哪个最好？我对完成它不感兴趣。我想以应有的方式完成它。我想学习良好的编程行为:)

谢谢你的帮助 ：）

//编辑：我的最新想法：我可以创建另一个服务方法仅用于验证目的（例如方法：RegisterUser() 用于注册，ValidateRegisterUser() 用于模型验证，我只需要确保在我之前调用验证方法调用常规方法。你怎么看？

# java - 带有身份验证的 RESTful Web 服务，用于移动应用程序

> ID：15411068
> 
> 赞同：1
> 
> 时间：2013-03-14T13:45:53.957
> 
> 标签：java, facebook, mobile, restful-authentication

我已经为 Java 中的移动应用程序开发了许多无状态的 RESTful Web 服务，它们运行良好。

例如：

*   [http://.../api/优惠券](http://.../api/coupon)
*   [http://.../api/coupon/{id}](http://.../api/coupon/%7Bid%7D)
*   ...

现在，我必须扩展这些服务，因为我必须为每个用户将不同的数据发送回移动设备。所以我需要在服务器端知道哪个用户试图获取或设置信息。而且我必须防止未经授权的用户的服务。

用户可以通过两种不同的方式登录移动应用程序：

1.  使用 Facebook 帐户登录
2.  使用应用程序帐户登录

我需要开发两个登录和注销服务，因为使用移动应用程序的用户必须登录到应用程序。

我阅读了很多关于 auth 和 RESTful 和 OAuth 的文章。我想我必须开发两个带有两个输入参数的登录服务：用户名和密码。

例如：

*   localLogin（字符串用户名，字符串密码）-> 令牌
*   facebookLogin（字符串用户名，字符串密码）-> 令牌

这些登录服务必须生成相同的令牌并在 http 标头中将其发送回移动应用程序。在登录过程之后，移动客户端有一个令牌。并且客户端在进行 RESTful 服务器调用时必须将此令牌发送到服务器。

你怎么看？我的想法好吗？

如果是，您能帮我如何开始用 Java 开发它吗？

如果不是，你能告诉我好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:43:53.250

您不需要 2 个登录程序。只需使用 Facebook SDK！

i) 在您的应用程序中将使用 facebook 按钮登录。

ii) 用户点击它，然后被重定向到 facebook 登录页面，用户在其中输入他的凭据，facebook 会向您返回一个令牌。您不必担心用户的 facebook 凭据或将它们存储在任何地方！Facebook 将为您处理。将 FB 登录部分视为您的应用程序的黑匣子 - 您只需进行 FB SDK 的登录调用，它将执行一些流程并将访问令牌返回给您的应用程序。

iii) 现在，您可以将访问令牌交换为用户的个人资料信息。将此配置文件信息输入您的数据库 - 这将确保经过身份验证的呼叫。

一旦您确认用户已登录，您就可以做任何您想做的事情。

# python - 如何让 Boto 返回 EC2 实例 - S3 工作正常

> ID：15411070
> 
> 赞同：3
> 
> 时间：2013-03-14T13:46:01.817
> 
> 标签：python, amazon-web-services, amazon-ec2, boto

我对 Boto 的 EC2 位（Boto v2.8.0，Python v2.6.7）有一些问题。

第一个命令返回一个 S3 存储桶列表——一切都很好！获取 EC2 实例列表的第二个命令以 403 的形式出现“查询字符串身份验证需要 Signature、Expires 和 AWSAccessKeyId 参数”

```
s3_conn = S3Connection(AWSAccessKeyId, AWSSecretKey)
print s3_conn.get_all_buckets()

ec2_conn = EC2Connection(AWSAccessKeyId, AWSSecretKey)
print ec2_conn.get_all_instances() 
```

此外，我的凭据都很好（完全管理员） - 我使用 Ruby aws-sdk 对它们进行了测试，EC2 和 S3 都可以正常工作。

我还注意到 ec2_conn 对象中的**主机**属性是**s3-eu-west-1.amazonaws.com**，“s3”...？确定是错的吗？我已经尝试将它复古修复到正确的端点，但没有运气。

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:32:21.727

这是我用来列出可能跨多个区域的所有实例的一些工作代码。它做的比你需要的要多得多，但也许你可以把它削减到你想要的。

```
#!/usr/bin/python
import boto
import boto.ec2
import sys

class ansi_color:
  red   = '\033[31m'
  green = '\033[32m'
  reset = '\033[0m'
  grey  = '\033[1;30m'

def name(i):
  if 'Name' in i.tags:
    n = i.tags['Name']
  else:
    n = '???'
  n = n.ljust(16)[:16]
  if i.state == 'running':
    n = ansi_color.green + n + ansi_color.reset
  else:
    n = ansi_color.red + n + ansi_color.reset
  return n

def pub_dns( i ):
  return i.public_dns_name.rjust(43)

def pri_dns( i ):
  return i.private_dns_name.rjust(43)

def print_instance( i ):
  print '  ' + name(i) + '| ' + pub_dns(i) + ' ' + pri_dns(i)

regions = sys.argv[1:]
if len(regions)==0:
  regions=['us-east-1']

if len(regions)==1 and regions[0]=="all":
  rr = boto.ec2.regions()
else:
  rr = [ boto.ec2.get_region(x) for x in regions ]

for reg in rr:
  print "========"
  print reg.name
  print "========"
  conn = reg.connect()

  reservations = conn.get_all_instances()

  for r in reservations:
  #  print ansi_color.grey + str(r) + ansi_color.reset
    for i in r.instances:
      print_instance(i) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T13:50:03.007

有 connect_to_region 命令：

```
import boto.ec2

connection = boto.ec2.connect_to_region('eu-west-1', aws_access_key_id=AWSAccessKeyId,
                                        aws_secret_access_key=AWSSecretKey) 
```

[Boto 教程](http://boto.s3.amazonaws.com/ec2_tut.html#a-note-about-regions)提供了另一种方法。该方法基本上是这样工作的：

```
import boto.ec2

for region in boto.ec2.regions():
    if region.name == 'my-favorite-region':
        connection = region.connect()
        break 
```

这不适用于[旧版本](https://code.google.com/p/boto/issues/detail?id=232)的 Boto。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T13:51:43.630

您是否按顺序准备好 IAM 凭证？给定的访问密钥应该具有 EC2 的权限。如果您不确定，可以添加策略 AmazonEC2FullAccess 进行测试，然后将其调低。

# php - if else 语句在 Wordpress 中不起作用

> ID：15411075
> 
> 赞同：0
> 
> 时间：2013-03-14T13:46:15.030
> 
> 标签：php, wordpress

我正在这里开发我的开发服务器；

> [http://www.trevorpeters.co.uk/plainarts/?page_id=11](http://www.trevorpeters.co.uk/plainarts/?page_id=11)

我有一个帖子列表，我在 wordpress 中创建了一个“精选”类别，当我选择这个类别到帖子时，我想对其应用 CSS 样式。

这是我正在使用的代码，但不知何故`<?php if (is_category('featured')) : ?>`找不到特色帖子！您可以在下面查看我的代码。

```
<?php if(have_posts()) :

            $wud = wp_upload_dir();
            $width = get_option( 'thumbnail_size_w' );
            $height = get_option( 'thumbnail_size_h' );
            remove_filter( 'get_the_excerpt', 'wp_trim_excerpt' ); ?>

            <ul class="cat-posts">
                <?php while(have_posts()) : the_post();
                $title = get_the_title(); ?>

                <?php if (is_category('featured')) : ?>
                <li class="featured cat-post cat-post-<?php the_ID(); ?>">
                <?php else : ?>
                <li class="cat-post cat-post-<?php the_ID(); ?>">
                <?php endif; ?>

                    <a href="<?php the_permalink(); ?>" class="post-image" title="<?php echo $title; ?>"><img src="<?php echo $wud['baseurl'] . '/thumb-' . sanitize_title( $title ) . '-' . $width . 'x' . $height; ?>.jpg" alt="<?php echo $title; ?>" width="<?php echo $width; ?>" height="<?php echo $height; ?>" /></a>
                    <a href="<?php the_permalink(); ?>" title="<?php echo $title; ?>"><h2><?php echo $title; ?></h2></a>
                    <div class="post-intro">
                        <?php if ($intro != "") :
                            echo (function_exists( 'te_obfuscate_email' )) ? te_obfuscate_email( str_replace( '>http://', '>', make_clickable( str_replace( array("\r\n", "\r", "\n"), "<br />", $intro ) ) ) ) : str_replace( '>http://', '>', make_clickable( str_replace( array("\r\n", "\r", "\n"), "<br />", $intro ) ) );
                        elseif ($use_content) :
                            echo neat_trim( strip_tags ( str_replace(".", ". ", str_replace( array("\r\n", "\r", "\n"), "<br />", get_the_content('', TRUE) ) ), '<p>' ), $max_chars );
                        endif; ?>
                    </div>
                </li>
                <?php endwhile; ?>
            </ul>
            <div style="clear: both"></div>

            <div class="navigation">
            <?php if(function_exists('wp_pagenavi')) { 
                wp_pagenavi(); 
            } else {
                posts_nav_link();
            } ?>
            </div>  
            <?php else : ?>
            <h2><?php _e('Not Found'); ?></h2>
            <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:56:48.570

[`is_category`“检查是否正在显示类别存档页面。”](http://codex.wordpress.org/Function_Reference/is_category) . 您似乎正在尝试使用来确定特定帖子是否属于某个类别，这不是它的本意。你可能需要[`has_category`](http://codex.wordpress.org/Function_Reference/has_category). 尝试：

```
if (has_category('featured')) : 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:56:15.250

尝试获取类别 ID 而不是类别名称

```
<?php 
       // Lets suppose you're looking for the category ID 16
       $category = get_the_category();
       if($category->cat_ID == 16) :
?> 
```

# matlab - 放大时图形剪辑的幅度

> ID：15411076
> 
> 赞同：0
> 
> 时间：2013-03-14T13:46:15.727
> 
> 标签：matlab, plot

这是我正在使用的绘图代码

```
 figure
 x = -pi:pi/40:pi;
 plot(x,cos(5*x),'-ro',x,sin(5*x),'-.b')
 hleg1 = legend('cos_x','sin_x'); 
```

输出如下：

![在此处输入图像描述](../Images/8224048511d9cafdf553563f90d1f41b.png)

当我尝试拉伸时间轴时，我得到的是这样的：

![在此处输入图像描述](../Images/a566e66ec98dfa8f2b0116c9280ee991.png)

但可以看出，当我拉伸时间轴时，幅度会被剪裁。在拉伸时间轴和 vV 时如何避免这种幅度削波？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:28:08.833

您可以尝试使用“放大”，加号放大镜图标并非常小心地选择图像的整个垂直范围。`axis`使用该功能更精确地控制轴的最小值和最大值。

```
 figure
 x = -pi:pi/40:pi;
 plot(x,cos(5*x),'-ro',x,sin(5*x),'-.b')
 hleg1 = legend('cos_x','sin_x');
 axis([1.6, 3.2,-1, 1]) 
```

# java - WebDriverException：转发新会话时出错，找不到：{platform=WINDOWS，browserName=FIREFOX，version=3.6}

> ID：15411078
> 
> 赞同：7
> 
> 时间：2013-03-14T13:46:25.197
> 
> 标签：java, selenium-webdriver

我是 Selenium Web 驱动程序和 Grid 2 的新手。

我正在尝试运行一个测试用例，但它给了我一个例外

> 线程“主”org.openqa.selenium.WebDriverException 中的异常：转发新会话时出错，找不到：{platform=WINDOWS, browserName=FIREFOX, version=3.6}

我已经使用命令启动了一个节点和集线器

```
java -jar selenium-server-standalone-2.29.0.jar -role hub

java -jar selenium-server-standalone-2.29.0.jar -role node  -hub %grid register% 
```

这两个命令都可以正常工作。

我不确定何时何地需要使用命令行 -browser browserName=firefox,version=3.6,maxInstances=5,platform=WINDOWS

（尝试从Grid 2官方页面配置节点

是不是因为这个？

这是我的代码：

```
package test;

import java.net.URL;
import java.net.MalformedURLException;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.openqa.selenium.WebDriverBackedSelenium;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;

public class Test { 
    public static void main(String[] args) throws MalformedURLException {
        DesiredCapabilities capability = DesiredCapabilities.firefox();
            capability.setBrowserName("FIREFOX");
            capability.setPlatform(org.openqa.selenium.Platform.WINDOWS);
            capability.setVersion("3.6");
    //  capability.setCapability("");
        WebDriver driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability);
        //WebDriver driver = new FirefoxDriver();
        driver.get("http://www.google.com"); 

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-29T09:23:22.030

对于注册节点，使用特定的浏览器配置，您必须在命令提示符下使用以下行：

java -jar selenium-server-standalone-2.32.0.jar -role node -hub [http://xxx.xxx.xxx.xxx:4444/grid/register](http://xxx.xxx.xxx.xxx:4444/grid/register) -browser browserName=firefox

将xxx替换为实际的ip地址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T23:10:34.087

我认为这是由于`capability.setBrowserName("FIREFOX");`

应该`capability.setBrowserName("firefox");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-17T06:56:45.827

您可以检查 url [http://localhost:4444/grid/console](http://localhost:4444/grid/console)，如果 selenium 网格已经启动并运行但需要检查是否有任何节点已注册！！（即检查任何浏览器是否已注册）

如果不是，您需要使用以下命令注册 selenium 节点 `java -jar selenium-server-standalone-x.xx.0.jar -role node -hub http://localhost:4444/grid/register`

确保机器上安装了 firefox 浏览器，并且路径上存在 geckodriver。

有时，如果您已经使用 docker 容器运行 selenium hub，则需要使用`docker kill $(docker ps -q);`

如果您正在运行 webdriverio，请检查 docker selenium 容器运行状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T05:41:14.843

我也面临同样的问题。解决了，问题出在端口 4444 上。它被阻止了。因此，为我的系统创建一个全局 IP 并允许端口 4444 对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-14T14:50:42.150

这可能就是它所说的：集线器/硒找不到与请求的功能匹配的东西。

我遇到了这个问题，得到的错误是（格式化后）：

```
java.lang.RuntimeException : org.openqa.selenium.WebDriverException : Error forwarding the new session cannot find : Capabilities[{
        proxy = {
            proxyAutoconfigUrl = null,
            socksUsername = null,
            socksPassword = null,
            autodetect = false,
            httpProxy = xxxxxxxxxxxx.com : 8080,
            proxyType = MANUAL,
            noProxy = xxxxxxxxxxxxx.net,
            ftpProxy = null,
            hCode = 1273131486,
            socksProxy = null,
            class = org.openqa.selenium.Proxy,
            sslProxy = xxxxxxxxxxxxxx.com : 8080
        },
        loggingPrefs = org.openqa.selenium.logging.LoggingPreferences @ 3564e4e9,
        browserName = MicrosoftEdge,
        type = regular,
        version = ,
        platform = ANY
    }
] 
```

结果是我的同事为功能添加了一个新参数（“类型”），而我没有更新配置我的 Selenium 节点的 .json 文件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-18T13:03:39.967

如果您运行并行测试。增加线程数并增加集线器内存

```
cat /proc/sys/kernel/threads-max
echo 100000 > /proc/sys/kernel/threads-max 
```

# javascript - SSL 为 Web 服务提供哪些保护？

> ID：15411089
> 
> 赞同：0
> 
> 时间：2013-03-14T13:46:56.177
> 
> 标签：javascript, json, ssl, https, fiddler

我有一个大量使用 JSON 服务的 ASP.NET 网站。基本结构是：jQuery Plugins -> JSON Service -> Server-Side BAL。

但是，这种解决方案显然不安全，因为恶意用户可以运行诸如 Fiddler 之类的工具并在他们的机器上捕获 JSON 调用，然后重放这些 JSON 调用更改参数等。

如果我将 web 服务文件夹放在 SSL 下，它会给我什么保护？我尝试将整个站点置于 SSL 下，但仍在运行 Fiddler，我可以看到转至 HTTPS 协议的明文消息，并且我可以使用相同或更改的参数从 Fiddler 重播这些消息。

我显然对 SSL 知之甚少，需要一些帮助。听起来我的 SSL 设置不正确，还是可以通过 Fiddler 查看 SSL 流量？如果是后者，SSL 在我的场景中提供什么保护？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:51:11.247

如果 Bob 在他的网站上实施 SSL，那么当 Alice 使用该网站时，Mallory 将无法拦截数据或在运行中更改数据。SSL 将 Alice 的浏览器和 Bob 的服务器之间的消息保密。它不会对 Alice 和 Alice 的浏览器之间的消息保密。

您可以采取两种方法来保护自己免受恶意数据的侵害。

1.  在将其插入其他格式之前，请转义（或等效）所有内容。例如，在 SQL 上使用准备好的语句，使用 JSON 序列化程序构建 JSON，而不是字符串混搭等。
2.  对用户进行身份验证并仅接受来自您信任的用户的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:51:14.517

SSL 仅加密传输。这意味着第三方无法窃听客户端和您的服务器之间的数据交换。它不会向服务器或服务本身添加任何安全功能。

您需要的是一个适当的身份验证、许可和验证系统。每个请求都需要检查其有效性。准备好接收带有任何类型参数的任何类型的请求，无论是因为用户摆弄了参数，还是因为代码中的错误或其他原因。如果请求无效，即不允许特定用户做某事，则拒绝该请求。
这不是您可以实施的附加技术，而是您服务的核心设计考虑因素。

# mysql - 节省 sql 查询时间

> ID：15411093
> 
> 赞同：0
> 
> 时间：2013-03-14T13:47:09.863
> 
> 标签：mysql, sql, database, query-optimization

我有一个场景。我的表中有 300 条记录。我执行查询以获取总数。然后，由于我必须实现分页，

我根据计数使用限制从同一个表中选择数据。我在想是否可以在单个查询中获取计数和数据。？.

我尝试了以下代码：

`Select * ,count(*) as cnt from table;`

但这给了我总数，但只有 1 条记录！

有没有办法节省我在查询中耗尽的时间并在单个查询中获得结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:50:14.083

就像是：

```
select t1.*,t2.cnt
from table t1
cross join (select count(*) as cnt from table) t2 
limit 'your limit for the first page' 
```

或者

```
select *,(select count(*) from table) as cnt
from table
limit 'your limit for the first page' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:01:54.150

您可以在您提到的数据结构中获取信息，但实际上没有理由这样做。当您执行两个查询时没有性能问题 - 一个用于获取行数，另一个用于数据选择。*当您尝试在一个*查询中选择所有信息时，您不会保存任何内容。改为执行两个简单的查询，这将是您的应用程序的更好解决方案 - 您将保持其简单性和清晰性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:57:20.867

使用两个查询可能没有您想象的那么糟糕，您可以阅读[本文](https://stackoverflow.com/questions/186588/which-is-fastest-select-sql-calc-found-rows-from-table-or-select-count)以获取更多信息。

# performance - PostgreSQL 9.2--Agg 查询慢，计数（不同 x）

> ID：15411096
> 
> 赞同：1
> 
> 时间：2013-03-14T13:47:15.200
> 
> 标签：performance, postgresql, count, distinct

我们正在从 MySQL 转换到 PG 9.2。然而，我们在 PG 中的聚合查询遇到了障碍。与 MySQL 相比，它们在 PG 中运行需要更长的时间。我认为造成最大问题的是我们在聚合查询中的 count(distinct x) 。这会导致额外的排序，无论我们将 WORK_MEM 设置为什么，它都会溢出到磁盘上。我们还尝试将 enable_sort 设置为“off”，将 enable_seqscan 设置为“off”。此外，我们定期运行 VACUUM ANALYZE。最后，我们无法利用索引，因为我们的查询有很多暗淡的字段，而且其中大部分是串联的。桌子是 40 磨到 80 磨。请任何建议都会有所帮助！这是解释分析的示例。

询问

```
SELECT
    concat(
        cast(coalesce(trim(tablea.state_id),'na') as varchar),
        '-',
        cast(
            coalesce(
                CASE WHEN char_length(cast(tablea.case_num as varchar)) = 12
                    THEN left(cast(tablea.case_num as varchar), 2)
                    else left(cast(tablea.case_num as varchar), 1)
                END,'na'
            ) as varchar
        )
    ),
    to_char(tablea.visit_date,'yyyy-mm-01') ,
    coalesce(tablea.payor_code,0) ,
    coalesce(tablea.los,'other') ,
    case when cpt_group is null or cpt_group = ''
        then '0'
        else split_part(tablea.cpt_group,'-',1)
    end ,
    case when cpt_group is null or cpt_group = ''
        then '0'
        else split_part(tablea.cpt_group,'-',2)
    end ,
    case when (tablea.erp_code) isnull
        then 'na'
        else concat(
            cast(coalesce(trim(tablea.state_id), 'na') as varchar),
            '-',
            coalesce(cast(tablea.erp_code as varchar), 'na') ,
            '-',
            coalesce(cast(tablea.mlp_code as varchar), 'na')
            )
    end ,
    coalesce(tablea.erp_attnd,'n') ,
    count(distinct concat(tablea.state_id,tablea.case_num)) ,
    count( unique_rec_id),
    sum(tablea.units) ,
    sum(tablea.total_amt) ,
    sum(tablea.total_rvu) ,
    sum(tablea.budget_rvu),
    sum(tablea.work_rvu) ,
    sum(tablea.payroll_rvu) ,
    sum(extract(day from charges.insert_ts - charges.visit_date))
FROM tablea
GROUP BY 1,2,3,4,5,6 ,7 ,8 
```

表结构

```
state_id character varying(8),
unique_rec_id bigint NOT NULL,
case_num bigint,
seq_nbr smallint,
charge_code character varying(18),
cpt_type character varying(2),
cpt_code character varying(19),
cpt_version_code character varying(2),
erp_code integer,
mlp_code integer,
shared_svcs character varying(1),
visit_date date,
units numeric(6,2),
unit_amt numeric(7,2),
total_amt numeric(7,2),
unit_rvu numeric(6,2),
total_rvu numeric(6,2),
place_of_serv smallint,
insert_ts timestamp(6) without time zone,
update_ts timestamp(6) without time zone,
alw_amt numeric(8,2),
pmt_amt numeric(8,2),
adj_amt numeric(8,2),
payor_code smallint,
coder_id smallint,
erp_attnd character varying(1),
tos smallint,
etos smallint,
los character varying(5),
budget_rvu numeric(6,2),
work_rvu numeric(6,2),
payroll_rvu numeric(6,2),
cpt_group character varying(7),
CONSTRAINT charges_pkey PRIMARY KEY (unique_rec_id) 
```

解释输出

```
"GroupAggregate  (cost=10007828904.29..10010019592.38 rows=3519178 width=77) (actual time=1270982.096..1448667.608 rows=7848213 loops=1)"
"  Output: (pg_catalog.concat((COALESCE(btrim((state_id)::text), 'na'::text))::character varying, '-', (COALESCE(CASE WHEN (char_length(((case_num)::character varying)::text) = 12) THEN "left"(((case_num)::character varying)::text, 2) ELSE "left"(((case_num)::character varying)::text, 1) END, 'na'::text))::character varying)), (to_char((visit_date)::timestamp with time zone, 'yyyy-mm-01'::text)), (COALESCE((payor_code)::integer, 0)), (COALESCE(los, 'other'::character varying)), (CASE WHEN ((cpt_group IS NULL) OR ((cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((cpt_group)::text, '-'::text, 1) END), (CASE WHEN ((cpt_group IS NULL) OR ((cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((cpt_group)::text, '-'::text, 2) END), (CASE WHEN (erp_code IS NULL) THEN 'na'::text ELSE pg_catalog.concat((COALESCE(btrim((state_id)::text), 'na'::text))::character varying, '-', COALESCE((erp_code)::character varying, 'na'::character varying), '-', COALESCE((mlp_code)::character varying, 'na'::character varying)) END), (COALESCE(erp_attnd, 'n'::character varying)), count(DISTINCT pg_catalog.concat(state_id, case_num)), count(unique_rec_id), sum(units), sum(total_amt), sum(total_rvu), sum(budget_rvu), sum(work_rvu), sum(payroll_rvu), sum(date_part('day'::text, (insert_ts - (visit_date)::timestamp without time zone)))"
"  Buffers: shared hit=866434, temp read=558843 written=558843"
"  ->  Sort  (cost=10007828904.29..10007916883.73 rows=35191776 width=77) (actual time=1270982.019..1314712.552 rows=36729163 loops=1)"
"        Output: (pg_catalog.concat((COALESCE(btrim((state_id)::text), 'na'::text))::character varying, '-', (COALESCE(CASE WHEN (char_length(((case_num)::character varying)::text) = 12) THEN "left"(((case_num)::character varying)::text, 2) ELSE "left"(((case_num)::character varying)::text, 1) END, 'na'::text))::character varying)), (to_char((visit_date)::timestamp with time zone, 'yyyy-mm-01'::text)), (COALESCE((payor_code)::integer, 0)), (COALESCE(los, 'other'::character varying)), (CASE WHEN ((cpt_group IS NULL) OR ((cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((cpt_group)::text, '-'::text, 1) END), (CASE WHEN ((cpt_group IS NULL) OR ((cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((cpt_group)::text, '-'::text, 2) END), (CASE WHEN (erp_code IS NULL) THEN 'na'::text ELSE pg_catalog.concat((COALESCE(btrim((state_id)::text), 'na'::text))::character varying, '-', COALESCE((erp_code)::character varying, 'na'::character varying), '-', COALESCE((mlp_code)::character varying, 'na'::character varying)) END), (COALESCE(erp_attnd, 'n'::character varying)), state_id, case_num, unique_rec_id, units, total_amt, total_rvu, budget_rvu, work_rvu, payroll_rvu, insert_ts, visit_date"
"        Sort Key: (pg_catalog.concat((COALESCE(btrim((charges.state_id)::text), 'na'::text))::character varying, '-', (COALESCE(CASE WHEN (char_length(((charges.case_num)::character varying)::text) = 12) THEN "left"(((charges.case_num)::character varying)::text, 2) ELSE "left"(((charges.case_num)::character varying)::text, 1) END, 'na'::text))::character varying)), (to_char((charges.visit_date)::timestamp with time zone, 'yyyy-mm-01'::text)), (COALESCE((charges.payor_code)::integer, 0)), (COALESCE(charges.los, 'other'::character varying)), (CASE WHEN ((charges.cpt_group IS NULL) OR ((charges.cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((charges.cpt_group)::text, '-'::text, 1) END), (CASE WHEN ((charges.cpt_group IS NULL) OR ((charges.cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((charges.cpt_group)::text, '-'::text, 2) END), (CASE WHEN (charges.erp_code IS NULL) THEN 'na'::text ELSE pg_catalog.concat((COALESCE(btrim((charges.state_id)::text), 'na'::text))::character varying, '-', COALESCE((charges.erp_code)::character varying, 'na'::character varying), '-', COALESCE((charges.mlp_code)::character varying, 'na'::character varying)) END), (COALESCE(charges.erp_attnd, 'n'::character varying))"
"        Sort Method: external merge  Disk: 4470728kB"
"        Buffers: shared hit=866434, temp read=558843 written=558843"
"        ->  Seq Scan on public.charges  (cost=10000000000.00..10003417837.76 rows=35191776 width=77) (actual time=0.062..182871.790 rows=36729163 loops=1)"
"              Output: pg_catalog.concat((COALESCE(btrim((state_id)::text), 'na'::text))::character varying, '-', (COALESCE(CASE WHEN (char_length(((case_num)::character varying)::text) = 12) THEN "left"(((case_num)::character varying)::text, 2) ELSE "left"(((case_num)::character varying)::text, 1) END, 'na'::text))::character varying), to_char((visit_date)::timestamp with time zone, 'yyyy-mm-01'::text), COALESCE((payor_code)::integer, 0), COALESCE(los, 'other'::character varying), CASE WHEN ((cpt_group IS NULL) OR ((cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((cpt_group)::text, '-'::text, 1) END, CASE WHEN ((cpt_group IS NULL) OR ((cpt_group)::text = ''::text)) THEN '0'::text ELSE split_part((cpt_group)::text, '-'::text, 2) END, CASE WHEN (erp_code IS NULL) THEN 'na'::text ELSE pg_catalog.concat((COALESCE(btrim((state_id)::text), 'na'::text))::character varying, '-', COALESCE((erp_code)::character varying, 'na'::character varying), '-', COALESCE((mlp_code)::character varying, 'na'::character varying)) END, COALESCE(erp_attnd, 'n'::character varying), state_id, case_num, unique_rec_id, units, total_amt, total_rvu, budget_rvu, work_rvu, payroll_rvu, insert_ts, visit_date"
"              Buffers: shared hit=866434"
"Total runtime: 1450131.131 ms" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:35:10.847

我做了表面优化：

```
SELECT
    concat(coalesce(state_id, 'na'), '-', case_num),
    visit_date,
    coalesce(payor_code, 0),
    coalesce(los, 'other'),
    case when cpt_group_1 is null or cpt_group = ''
        then '0'
        else cpt_group_1
    end,
    case when cpt_group_2 is null or cpt_group = ''
        then '0'
        else cpt_group_2
    end,
    erp_code ,
    coalesce(erp_attnd, 'n'),
    count_case_num,
    rec_id,
    units,
    total_amt,
    total_rvu,
    budget_rvu,
    work_rvu,
    payroll_rvu,
    days
from (
    select
        tablea.state_id,
        CASE WHEN tablea.case_num between 100000000000 and 999999999999
            THEN left(cast(tablea.case_num as text), 2)
            else left(cast(tablea.case_num as text), 1)
        END case_num,
        date_trunc('month', tablea.visit_date) visit_date,
        tablea.payor_code,
        tablea.los,
        split_part(tablea.cpt_group, '-', 1) cpt_group_1,
        split_part(tablea.cpt_group, '-', 2) cpt_group_2,
        case when tablea.erp_code is null
            then 'na'
            else concat(
                coalesce(tablea.state_id, 'na'),
                '-',
                coalesce(cast(tablea.erp_code as text), 'na'),
                '-',
                coalesce(cast(tablea.mlp_code as text), 'na')
                )
        end erp_code,
        tablea.erp_attnd,
        count(distinct (tablea.state_id, tablea.case_num)) count_case_num,
        count(unique_rec_id) rec_id,
        sum(tablea.units) units,
        sum(tablea.total_amt) total_amt,
        sum(tablea.total_rvu) total_rvu,
        sum(tablea.budget_rvu) budget_rvu,
        sum(tablea.work_rvu) work_rvu,
        sum(tablea.payroll_rvu) payroll_rvu,
        sum(extract(day from charges.insert_ts - charges.visit_date)) days
    FROM tablea
    GROUP BY 1, 2, 3, 4, 5, 6 ,7 ,8, 9
) s 
```

你担心的部分我改变了：

```
count(distinct concat(tablea.state_id,tablea.case_num)) 
```

至：

```
count(distinct (tablea.state_id, tablea.case_num)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T14:27:05.080

尝试`enable_sort='off';`在查询之前添加集合。

# css - Django中的Bootstrap和管理css冲突

> ID：15411097
> 
> 赞同：2
> 
> 时间：2013-03-14T13:47:18.477
> 
> 标签：css, django, twitter-bootstrap, django-admin

我正在使用带有 Django 的 Bootstrap，以及来自管理员的 css（用于日期小部件）。我的问题是，在我有日期小部件的页面上，管理员 css 会覆盖引导 css，因此整个页面看起来不同。我该如何解决？

base.html

```
<head>

     {% block extra_head %}
     {% endblock %}

    <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">

    <link href="{{ STATIC_URL }}bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

</head> 
```

带有日期小部件的模板

```
{% extends "base.html" %}
{% load adminmedia %}

{% block extra_head %}

  <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/base.css"/>
  <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/widgets.css"/>

  <script type="text/javascript" src="/admin/jsi18n/"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}admin/js/core.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}admin/js/admin/RelatedObjectLookups.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}admin/js/jquery.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}admin/js/jquery.init.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}admin/js/actions.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}admin/js/calendar.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}admin/js/admin/DateTimeShortcuts.js"></script>

  <script type="text/javascript">window.__admin_media_prefix__ = "{% filter escapejs %}{% admin_media_prefix %}{% endfilter %}";</script>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:00:01.437

将引导 css 放入`{% block extra_head %}{% endblock %}`. 不用担心，只要你没有调用`{{block.super}}`，bootstrap 就不会被激活。

```
<head>
     {% block extra_head %}
     <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
     <link href="{{ STATIC_URL }}bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
     {% endblock %}
</head> 
```

要在其他模板中激活引导程序，只需简单地输入`{{block.super}}`：

```
{% extends "base.html" %}

{% block extra_head %}
    {{block.super}}
    //other css here
{% endblock %} 
```

更新：

覆盖管理员现有的 css。在您的引导 css 中，您必须放置`!important`它以强制您的模板遵循引导设计

样本：

```
<p>This red text <strong style="color: red;">should be blue</strong></p>

<style>
   strong { color: blue !important; }
</style> 
```

# java - 如何Java web启动只下载一次的应用程序

> ID：15411100
> 
> 赞同：0
> 
> 时间：2013-03-14T13:47:30.810
> 
> 标签：java, jnlp, java-web-start

在我的应用程序中，JNLP 启动了 java webstart 应用程序，它提供了多种功能，例如：打开计算器、创建文件等。

但是，Jnlp 应该只下载一次。下次当用户尝试调用 Java web start 提供的任何功能时，它不应该调用远程服务器，而是调用 localhost 本身。如何让 jnlp 下载一次并听取请求？请帮助我。这是关于httplistener的东西吗？如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:04:44.157

如果我正确理解您的问题，您希望`offline-allowed`在 JNLP 文件中包含该元素。

有关详细信息，请参阅[http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:25:13.677

要查看您已下载的文件 (JWS)，请执行以下操作：控制面板 > Java > 常规 > 查看...您所有下载的文件都应显示在此处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:44:35.697

我怀疑您是否可以阻止（仅通过 JWS/JNLP 方式）再次运行 JWS 应用程序。但是，您可以在运行应用程序以创建侦听套接字后尝试。如果成功，则您在此端口（在单独的线程中）等待并等待传入​​消息 --- 您选择的“幻数”。如果你得到一个，你会回复一些代码告诉客户，“这个应用程序已经在运行”。但是，如果您无法创建监听套接字，那么您尝试向它发送一个幻数并监听回复。如果回复是上面提到的，你知道你的应用程序正在运行，你应该退出这个实例。如果你得到一些意想不到的回复，那么你从创建监听套接字开始重复上述步骤，但在具有更高编号的端口上——对于客户端，如果你得到意想不到的答案，

# c# - 使用 CSS 制作一个 两排高？

> ID：15411102
> 
> 赞同：4
> 
> 时间：2013-03-14T13:47:32.043
> 
> 标签：c#, asp.net, css

我有一组记录，我用表单视图显示，然后一次翻页。一些字段的长度变化很大，并且经常导致字段换行到第二行。当前，当您翻阅记录时，formview 的视觉外观会根据这些字段的长度而变化，并且换行会导致页面依次变高和变短。我不是页面尺寸变化的忠实粉丝，所以想解决这个问题。

这是我目前拥有的css：

```
.CommitmentInfo
{
  margin: 0px;
  padding: 0px;
  vertical-align: middle;
  text-align: left;
  float:left;
  list-style:none;
}
    .CommitmentInfo li
    {
      width: 300px;
    }
    .CommitmentInfo li.b
    {
      width: 150px;
    } 
```

然后它正在使用的代码：

```
<ol class="CommitmentInfo">
  <li><asp:Label runat="server" Text='<%# "<b>Vendor Name:</b>" + 
      Eval("ven_name") %>' /></li>
  <li><asp:Label runat="server" Text='<%# "<b>Stock Item:</b>" + 
      Eval("cmt_stock_code") %>' /></li>
  <li><asp:Label runat="server" Text='<%# "<b>Item Description:</b>" +
      Eval("inv_description") %>' /></li>
</ol>
<ol class="CommitmentInfo">
  <li><asp:Label runat="server" Text='<%# "<b>Agent Name:</b>" + 
      Eval("cmt_agent") %>' /></li>
  <li><asp:Label runat="server" Text='<%# "<b>Sales Rep:</b>" + 
      Eval("slm_name") %>' /></li>
  <li><asp:Label runat="server" Text='<%# "<b>Documentation:</b>" +
      GetDocument(Eval("doc_description"), Eval("cmt_document")) %>' /></li>
</ol>
<ol class="CommitmentInfo">                    
  <li class="b"><asp:Label runat="server" Text='<%# "<b>Qty Changed:</b>" + 
      Eval("cmt_changed", "{0:d}") %>' /></li>
  <li class="b"><asp:Label runat="server" Text='<%# "<b>Last Update:</b>" + 
      Eval("cmt_added", "{0:d}") %>' /></li>  
</ol> 
```

三个列表中有三列。需要双排的元素是第一列的第一个和第三个，第二列的第三个。我认为解决方案是将新类应用于那些特定的列表元素，但我无法找到任何使列表元素成为固定行数的东西。建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:53:55.143

我研究了类似的高度，发现将文本放入 a `div`，将 a`max-height`放在上面并`overflow`关闭对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:24:25.883

一个潜在的解决方案是使用 EM 作为高度，因为 EM 单位是基于字体大小的。

所以这里的理论是，如果你有一行文本，字体大小是 12px 高，那么 1em = 12px。

通过将 LI 的高度设置为 2em，您可以有效地将高度设置为 24px，或者两行的高度。也就是说，这没有考虑行高，如果我们有一个 15px 的行高，那就是每行额外空间 3px，总共 6，24+6=30=2.5em

# python - 如果键存在，则删除字典项

> ID：15411107
> 
> 赞同：354
> 
> 时间：2013-03-14T13:47:42.150
> 
> 标签：python, python-2.7

仅当给定键存在时，是否有任何其他方法可以删除字典中的项目，除了：

```
if key in mydict:
    del mydict[key] 
```

场景是我得到了一组要从给定字典中删除的键，但我不确定它们是否都存在于字典中。以防万一我错过了更有效的解决方案。

* * *

## 回答 #1

> 赞同：775
> 
> 时间：2013-03-14T13:49:39.607

您可以使用： [`dict.pop`](http://docs.python.org/3/library/stdtypes.html#dict.pop)

```
 mydict.pop("key", None) 
```

请注意，如果键不在字典中`None`，则引发第二个参数，即未给出。`KeyError`提供第二个参数可防止条件异常。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-14T13:49:44.387

还有：

```
try:
    del mydict[key]
except KeyError:
    pass 
```

这只进行 1 次查找而不是 2 次。但是，`except`子句很昂贵，因此如果您最终经常遇到 except 子句，这可能会比您已经拥有的效率低。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-14T14:01:03.553

# 方法：计算要删除的键，改变字典

让我们调用`keys`您要删除的键的列表/迭代器。我会这样做：

```
keys_to_remove = set(keys).intersection(set(mydict.keys()))
for key in keys_to_remove:
    del mydict[key] 
```

您预先计算所有受影响的项目并对其进行操作。

# 方法：计算要保留的键，用这些键创建新的字典

我更喜欢创建一个新字典而不是改变现有字典，所以我可能也会考虑这个：

```
keys_to_keep = set(mydict.keys()) - set(keys)
new_dict = {k: v for k, v in mydict.iteritems() if k in keys_to_keep} 
```

或者：

```
keys_to_keep = set(mydict.keys()) - set(keys)
new_dict = {k: mydict[k] for k in keys_to_keep} 
```

# scala - 在 sbt 中定义自定义测试配置

> ID：15411108
> 
> 赞同：6
> 
> 时间：2013-03-14T13:47:46.020
> 
> 标签：scala, sbt

我需要在 sbt 中定义一个运行测试的自定义测试配置，但需要一些额外的设置。我一直在环顾四周，试图弄清楚如何做到这一点，但我似乎无法做到这一点。

我想做的是这样的：`> test`它将运行正常的测试任务，并且`> pipelinetest`与测试完全相同，只有`(javaOptions += "-Dpipeline.run=run"`.

我已经弄清楚如何设置 javaOptions 进行测试，如下所示： `javaOptions in test += "-Dpipeline.run=run"`所以我想做的是：`javaOptions in pipelinetest += "-Dpipeline.run=run"`

我将如何定义`pipelinetest`来实现这个目标？这需要成为一项新任务吗？或者这会是`test`. 我对 sbt 很陌生，目前对此感到非常困惑，阅读文档并没有帮助，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-03T15:51:01.963

我只有部分答案，但我认为这可能是有用的信息。我只是想为 Spark 中的 sbt 构建做一些类似的事情——我想有一种方法来使用调试器运行测试。Mark Harrah 的评论为我指明了正确的方向。[我所做](https://github.com/squito/spark/commit/4cf01b3e66acfd9c489718d24432b90a4bfb4f0f)的改变是：

```
lazy val TestDebug = config("testDebug") extend(Test)
...
baseProject
  .configs(TestDebug)
  .settings(inConfig(TestDebug)(Defaults.testTasks): _*)
  .settings(Seq(
    javaOptions in TestDebug ++= "-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005"
    .split(" ").toSeq)) 
```

这让我通常只调用`test`,`testOnly`等，但现在我也可以运行`testDebug:testOnly ...`，这将使用上面定义的额外选项。（它可能还`testDebug:test`使用那些没有用的额外选项创建了 , 等等，但是很好。）

我真的不明白为什么，但对我来说，让它工作的一个重要部分是使用`inConfig(TestDebug)(Defaults.testTasks)`，而不是`inConfig(TestDebug)(Defaults.testSettings)`.

就我而言，我在弄清楚如何（a）让它为多项目构建工作和（b）我们的构建更奇怪 b/c 它基于 POM 文件时遇到了麻烦，这使得项目定义不同比每一个例子。

像往常一样，我对 sbt 的问题是我找到了似乎相关的信息，但是我的构建有一些不寻常的方面，这使我无法完全相信答案；尽管我似乎需要进行一些琐碎的修改，但如果没有透彻的理解，很难修改这些示例。

# python - 如何摆脱 Pandas plot() 的额外图例条目？

> ID：15411112
> 
> 赞同：2
> 
> 时间：2013-03-14T13:47:59.130
> 
> 标签：python, matplotlib, pandas

我有一个熊猫数据框：

```
>>> drawdata
                   sales       mg
ID     RPT_Date                  
600809 20120331  22.1401  13.5591
       20120630  38.1565  22.8968
       20120930  52.5098  31.5909 
```

下面的命令绘制了一个条形图，如下图所示：

```
>>> drawdata.unstack('ID').plot(kind='bar', use_index=True)
<matplotlib.axes.AxesSubplot object at 0x035A9D70> 
```

![在此处输入图像描述](../Images/30cd0e85cb75dfe830eede204a60bb35.png)

我的问题显示为注释：如何摆脱额外的图例条目？

（这个 url 是相关的： [How to barplot Pandas dataframe columns aligning by sub-index?](https://stackoverflow.com/questions/13492530/how-to-barplot-pandas-dataframe-columns-aligning-by-sub-index)）

**编辑：（有关 HYRY 方法的更多信息）**

* * *

```
# -*- coding: utf-8 -*-

import itertools
import pandas as pd
import io

text = '''\
ID RPT_Date sales mg
000568 20120331 22.140 13.559
000568 20120630 38.156 22.896
000568 20120930 52.509 31.590
'''

drawdata = pd.read_csv(io.BytesIO(text), delimiter = ' ', converters = {0:str})
drawdata.set_index(['ID','RPT_Date'], inplace = True)

ax  = drawdata.unstack('ID').plot(kind='bar', use_index=True, legend=False)

display_acct_list = list(drawdata.columns)
legend_list = list(itertools.product(display_acct_list, list(set(drawdata.index.get_level_values('ID')))))
legend_list = [x[0] + '-' + x[1] for x in legend_list]

ax.legend(legend_list, loc='best', fancybox=True, shadow=True)

ax.set_xlabel("") 
```

该图表缺少图例中的“颜色框”。

![在此处输入图像描述](../Images/80f5c21b39709efc032513ca4376fd89.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:06:57.133

您可以通过以下方式关闭图例标题：

```
drawdata.unstack('ID').plot().get_legend().set_title("") 
```

或者你可以自己画图例：

```
import pylab as pl
drawdata.unstack('ID').plot(legend=False)
pl.legend(loc="best") 
```

对于你的第二个问题：

那是因为情节中有一条虚线，如果你把它缩小一点，你会看到它。当您设置图例标签时，第一个标签将提供给虚线。您可以通过以下行修复它：

```
ax.legend(ax.containers, legend_list, loc='best', fancybox=True, shadow=True) 
```

# html - 在表单中，为什么标签的“for”属性与字段的“name”属性不匹配？

> ID：15411114
> 
> 赞同：3
> 
> 时间：2013-03-14T13:48:10.827
> 
> 标签：html, forms

我完全理解在标签上使用“for”属性的好处。我想这是关于 HTML 规范本身的问题：为什么创作者想要将标签与 ID 匹配，而不是在字段上使用“名称”属性？

无论如何，该字段的名称应该是唯一的，对吧？那么，为什么在 99% 的情况下，字段 ID 最终与字段名称直接匹配时，为什么要向字段添加另一个属性和额外的 HTML？

*编辑*

在单选按钮的情况下，正如你们中的许多人所说，名称不是唯一的，但在这种情况下，您不需要标签的“for”元素，因为您可以将`label`字段本身包裹起来，正确?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:51:29.503

该`name`属性并不总是唯一的：单选按钮通常共享相同的`name`.

**编辑**

输入可以包装在标签中，这是有效的。但是可以想到您不能或不想包装标签的情况。例如，如果标签与其他 HTML 的输入分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:50:46.630

这个名字不是唯一的我的朋友！就像单选按钮 btw ;) 所有选择器都基于 ID。

例子：

```
<fieldset>
 <label for="radio1">
 <input type="radio" name="allRadios" id="radio1">
 <label for="radio2">
 <input type="radio" name="allRadios" id="radio2">
</fieldset> 
```

JavaScript 函数：

document.getElementsByName("allRadios") 给出一个数组，即使只有一个名为 radio 的元素，而 document.getElementById("radio1") 给出一个 DOM 元素。

例子：

# c# - WPF 调度程序抛出 TargetInvocationException

> ID：15411125
> 
> 赞同：2
> 
> 时间：2013-03-14T13:48:38.837
> 
> 标签：c#, wpf, multithreading, dispatcher, targetinvocationexception

我的调试器有问题，当在 UI 线程中执行错误代码时，调试器会正确指出错误行，这在线程内执行时也是如此，但是在调度程序内调用时它的行为有点奇怪：引发 TargetInvocationException在拆卸中。

我怎样才能让它正确显示并避免这个烦人的消息？

这是一个说明问题的简单示例：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        //navigator.NavigatToMenuAccueil(true);

        //Throws NullPointerException
        /*String x = null;
        String y = x.ToUpper();*/

        Thread th = new Thread(DoWork);
        th.Start();
    }

    private void DoWork()
    {
        //Throws NullPointerException
        /*String x = null;
        String y = x.ToUpper();*/

        Thread.Sleep(1000);
        Dispatcher.BeginInvoke(new Action(() =>
        {
            //Throws TargetInnvocationException 
            /*
            String x = null;
            String y = x.ToUpper();
             */

            MyTextBlock.Text = "My New Text";
        }));            

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:56:58.317

`TargetInvocationException`是由反射调用的方法引发的异常（[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.targetinvocationexception.aspx)），并且通过 using `BeginInvoke`，您正在告诉`Dispatcher`这样做。

在传递的委托中抛出的任何异常都包含在`TargetInvocationException`. 您不能阻止 Dispatcher 包装原始异常。您仍然可以通过访问获得原始异常`InnerException`。

# ruby-on-rails - Rails：嵌套资源问题

> ID：15411139
> 
> 赞同：0
> 
> 时间：2013-03-14T13:49:25.997
> 
> 标签：ruby-on-rails, resources, nested, relationship

我是 RoR 的新手，目前正在使用我的第一个应用程序。
我有 3 个模型：Event、Place 和 Order

```
class Event < ActiveRecord::Base
  attr_accessible :name
  has_many :places
end

class Place < ActiveRecord::Base
  attr_accessible :number, :price, :event_id
  has_one :order
  belongs_to :event
end

class Order < ActiveRecord::Base
 attr_accessible :place_number, :price, :place_id
  belongs_to :place
end 
```

路线，顺便说一句，当我深深嵌套它时，至少新动作没有出错。

```
 resources :events do
       resources :places 
    end

    resources :places do
     resources :orders
  end 
```

我在创建新订单时遇到了问题。错误是

```
ActiveRecord::RecordNotFound in OrdersController#new

Couldn't find Event without an ID 
```

这是我的 OrdersController(not full) 导致它在我的代码的第一行失败

```
class OrdersController < ApplicationController

  def new
    @event = Event.find(params[:id])
  end
end 
```

再说一遍我应该做的。我通过获取有关用户点击的地点和事件的信息来创建新订单。所以我认为我需要在 NEW 动作中以及稍后在 CREATE 中使用这些变量来获取有关事件和地点的信息。

# clickonce - clickOnce 发布未部署我的 app.exe.config

> ID：15411141
> 
> 赞同：2
> 
> 时间：2013-03-14T13:49:31.547
> 
> 标签：clickonce, config

ClickOnce 没有在 wpf 项目中部署我的 app.exe.config 文件。我将构建操作设置为“无”并使用“始终复制”复制到目录。

同样在项目、发布、应用程序文件的属性中，我的配置文件不能在列表中。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:57:56.960

您也可以手动将配置复制到内容子文件夹（我一直这样做，直到我注意到上面的更新（谢谢））。但我不得不从“App.config”重命名为“exe.config.deploy”

# sql - “return”语句中的错误

> ID：15411147
> 
> 赞同：0
> 
> 时间：2013-03-14T13:49:44.107
> 
> 标签：sql, sql-server

我在 sql server 中编写了一个表值函数，并在“return statement”遇到错误代码中的所有语句都是正确的，但我不知道为什么会出现这个错误

我的错误是

```
Incorrect syntax near the keyword 'RETURN'. 
```

我的 sql 函数是

```
ALTER FUNCTION [dbo].[WEEKLY_REPORT](@START_DATE DATETIME, @END_DATE DATETIME,@PRACTISE NVARCHAR(MAX))
RETURNS @WEEKLY_REPORT_DETAILS_INFORMATION TABLE
(
RESOURCE_NAME NVARCHAR(MAX),
DAY1 DECIMAL(5,2),
DAY2 DECIMAL(5,2),
DAY3 DECIMAL(5,2),
DAY4 DECIMAL(5,2),
DAY5 DECIMAL(5,2),
DAY6 DECIMAL(5,2),
DAY7 DECIMAL(5,2),
UTILIZATION INT
)
AS 
BEGIN
DECLARE
    @RESOURCE_NAME NVARCHAR(MAX),
    @DAY1 DECIMAL(5,2),
    @DAY2 DECIMAL(5,2),
    @DAY3 DECIMAL(5,2),
    @DAY4 DECIMAL(5,2),
    @DAY5 DECIMAL(5,2),
    @DAY6 DECIMAL(5,2),
    @DAY7 DECIMAL(5,2),
    @UTILIZATION INT,
    @LAST_DAY1 INT,
@MONTH NVARCHAR(MAX),
@START_DAY INT,
@END_DAY INT,
@COUNT INT,
@COUNT_TEST INT,
@QUERY NVARCHAR(MAX);
BEGIN
    SET @MONTH = DATENAME(MONTH,@START_DATE)
    SET @START_DAY = DATENAME(DAY,@START_DATE)
    SET @END_DAY = DATENAME(DAY,@END_DATE)
    SET @COUNT = @END_DAY -@START_DAY + 1
--  SET @QUERY='SELECT A.NAME, '

--SET @QUERY = ' INSERT INTO @WEEKLY_REPORT_DETAILS_INFORMATION(RESOURCE_NAME,DAY1,DAY2,DAY3,
--              DAY4,DAY5,DAY6,DAY7,UTILIZATION) SELECT A.NAME,'
CREATE TABLE TEMP(RESOURCE_NAME NVARCHAR(MAX), DAY1 DECIMAL(5,2),
    DAY2 DECIMAL(5,2),
    DAY3 DECIMAL(5,2),
    DAY4 DECIMAL(5,2),
    DAY5 DECIMAL(5,2),
DAY6 DECIMAL(5,2),
DAY7 DECIMAL(5,2))

SET @QUERY = ' INSERT INTO #TEMP(RESOURCE_NAME,DAY1,DAY2,DAY3,DAY4,DAY5,DAY6,DAY7)' +
             ' SELECT A.NAME,'
    SET @COUNT_TEST = 1
WHILE @COUNT_TEST <= @COUNT
BEGIN
    IF(DATEPART(MONTH,@START_DATE)=DATEPART(MONTH,@END_DATE))
    BEGIN
        IF(@COUNT_TEST =@COUNT)
    BEGIN
        SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@START_DAY)
        SET @START_DAY = @START_DAY + 1
    END
    ELSE
    BEGIN
        SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@START_DAY) + ', ' 
        SET @START_DAY = @START_DAY + 1
    END
    SET @COUNT_TEST =@COUNT_TEST + 1    
END
ELSE 
BEGIN
    IF( DATEPART(MONTH,@START_DATE) = 1 OR DATEPART(MONTH,@START_DATE) = 3 OR
        DATEPART(MONTH,@START_DATE) = 5 OR DATEPART(MONTH,@START_DATE) = 7 OR
        DATEPART(MONTH,@START_DATE) = 8 OR DATEPART(MONTH,@START_DATE) = 10 OR
        DATEPART(MONTH,@START_DATE) = 12 )
    BEGIN   
        SET @LAST_DAY1 = DATENAME(DAY,@START_DATE)
        WHILE (@LAST_DAY1 <= 31 )
        BEGIN
            IF(@COUNT_TEST =@COUNT)
                SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@LAST_DAY1)
            ELSE
                SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@LAST_DAY1) + ', '
        SET @COUNT_TEST =@COUNT_TEST + 1 
        SET @LAST_DAY1 = @LAST_DAY1 +1  
        END
        SET @LAST_DAY1 = DATENAME(DAY,@END_DATE) - (DATENAME(DAY,@END_DATE)-1)
        WHILE (@LAST_DAY1 <=  DATENAME(DAY,@END_DATE))
        BEGIN
            IF(@COUNT_TEST =@COUNT)
                SET @QUERY=@QUERY + 'C.D' + CONVERT(NVARCHAR ,@LAST_DAY1)
            ELSE
                SET @QUERY=@QUERY + 'C.D' + CONVERT(NVARCHAR ,@LAST_DAY1) + ', '
        SET @COUNT_TEST =@COUNT_TEST + 1
        SET @LAST_DAY1 = @LAST_DAY1 +1      
        END
    END
    ELSE 
    IF( DATEPART(MONTH,@START_DATE) = 4 OR DATEPART(MONTH,@START_DATE) = 6 OR
             DATEPART(MONTH,@START_DATE) = 9 OR DATEPART(MONTH,@START_DATE) = 11 )
    BEGIN       
        SET @LAST_DAY1 = DATENAME(DAY,@START_DATE)
        WHILE (@LAST_DAY1 <= 30 )
        BEGIN
            IF(@COUNT_TEST =@COUNT)
                SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@LAST_DAY1)       
            ELSE
                SET @QUERY=@QUERY + 'C.D' + CONVERT(NVARCHAR ,@LAST_DAY1) + ', '
        SET @COUNT_TEST =@COUNT_TEST + 1
        SET @LAST_DAY1 = @LAST_DAY1 +1      
        END
        SET @LAST_DAY1 = DATENAME(DAY,@END_DATE) - (DATENAME(DAY,@END_DATE)-1)
        WHILE (@LAST_DAY1 <=  DATENAME(DAY,@END_DATE))
        BEGIN
            IF(@COUNT_TEST =@COUNT)
                SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@LAST_DAY1)
            ELSE
                SET @QUERY=@QUERY + 'C.D' + CONVERT(NVARCHAR ,@LAST_DAY1) + ', '
        SET @COUNT_TEST =@COUNT_TEST + 1
        SET @LAST_DAY1 = @LAST_DAY1 +1      
        END
    END
    ELSE
    BEGIN
        SET @LAST_DAY1 = DATENAME(DAY,@START_DATE)
        WHILE (@LAST_DAY1 <= 28 )
        BEGIN
            IF(@COUNT_TEST =@COUNT)
                SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@LAST_DAY1)
            ELSE
                SET @QUERY=@QUERY + 'C.D' + CONVERT(NVARCHAR ,@LAST_DAY1) + ', '
        SET @COUNT_TEST =@COUNT_TEST + 1
        SET @LAST_DAY1 = @LAST_DAY1 +1   
        END
        SET @LAST_DAY1 = DATENAME(DAY,@END_DATE) - (DATENAME(DAY,@END_DATE)-1)
        WHILE (@LAST_DAY1 <=  DATENAME(DAY,@END_DATE))
        BEGIN
            IF(@COUNT_TEST =@COUNT)
                SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@LAST_DAY1)
            ELSE
                SET @QUERY=@QUERY + 'C.D' + CONVERT(NVARCHAR ,@LAST_DAY1) + ', '
        SET @COUNT_TEST =@COUNT_TEST + 1
        SET @LAST_DAY1 = @LAST_DAY1 +1   
        END
    END
END 
END

IF(DATENAME(MONTH,@START_DATE)=DATENAME(MONTH,@END_DATE))
BEGIN
    SET @QUERY = @QUERY + ' FROM EMPLOYEE A JOIN CP_DETAILS B' +
                ' ON A.ID = B.EMPLOYEE_ID WHERE B.MONTH_USED = ' + '''' + @MONTH + '''' +
                ' AND B.YEAR_USED = ' + DATENAME(YEAR,@START_DATE) + 
                ' AND B.PRACTISE=' + '''' + @PRACTISE + ''''
END
ELSE
BEGIN
    SET @QUERY = @QUERY + ' FROM EMPLOYEE A JOIN CP_DETAILS B' +
                ' ON A.ID = B.EMPLOYEE_ID JOIN CP_DETAILS C ON A.ID=C.EMPLOYEE_ID' +
                ' WHERE B.MONTH_USED = ' + '''' + DATENAME        (MONTH,@START_DATE) + '''' +
                ' AND B.YEAR_USED = ' + DATENAME(YEAR,@START_DATE) + 
                ' AND B.PRACTISE=' + '''' + @PRACTISE + '''' + 
                ' AND C.MONTH_USED=' + '''' + DATENAME(MONTH,@END_DATE) + ''''
END

EXEC SP_EXECUTESQL @QUERY

DECLARE CP_DETAILS CURSOR FOR SELECT * FROM TEMP

OPEN CP_DETAILS
FETCH NEXT FROM CP_DETAILS INTO @RESOURCE_NAME,@DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7

WHILE (@@FETCH_STATUS =0)
BEGIN
    SET @UTILIZATION = dbo.UTILIZATION(@START_DATE,@END_DATE,@DAY1,
                                    @DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7)
    INSERT INTO @WEEKLY_REPORT_DETAILS_INFORMATION VALUES(@RESOURCE_NAME,
                @DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7,@UTILIZATION)

    FETCH NEXT FROM CP_DETAILS INTO @RESOURCE_NAME,@DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7
END
CLOSE CP_DETAILS
DEALLOCATE CP_DETAILS
DROP TEMP
RETURN ---error here
END
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:03:57.843

Lamak 是对的，你不能在函数中使用`EXEC`or`SP_EXECUTESQL`或类似的东西。

也许您可以将您的函数重新写入存储过程？

关于语法错误，你不应该写`DROP TABLE TEMP`而不是`DROP TEMP`吗？

# java - 在文本字段中使用字母的方法

> ID：15411149
> 
> 赞同：1
> 
> 时间：2013-03-14T13:49:45.397
> 
> 标签：java, swing, keylistener

我有一个字段来注册有关业务中特定交易的注释，我希望 JTextField 最多只允许写 200 个字母，然后开始使用（）它们。我知道你可以用 KeyListener 来做这个，但我什么也没找到。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:14:28.400

使用文档过滤器。[实现文档过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)的 Swing 教程有一个实际执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:58:19.897

如果您想将 JTextField 中的字符串保持在一定长度内，您需要获取文本并检查它是否大于您的最大文本长度，然后丢弃更大的内容。

```
private void setMaxTextLength(JTextField textField) {
    if(textField.getText().length() > MAXLENGTH) {
        textField.setText(textField.getText().substring(0, MAXLENGTH));
    }
} 
```

# javascript - 如果 page2 包含元素，则更改 page1 上的 div id

> ID：15411153
> 
> 赞同：-2
> 
> 时间：2013-03-14T13:49:50.567
> 
> 标签：javascript

如果 page2 (mysite.com/page2.html) 包含指定的 div，我需要更改 page1 (mysite.com/page1.html) 上的一个字符串。

```
if (document.getElementById("div_id")) {
var str = document.getElementById("div_id").innerHTML;
var n = str.replace("Login", "Logout");
document.getElementById("div_id").innerHTML = n;
} 
```

这仅适用于同一页面，但如何从另一个页面获取元素？我宁愿不使用 iframe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:52:48.810

您需要使用一些服务器端脚本语言而不是使用纯 html。当不同页面之间存在这样的逻辑依赖关系时，意味着你需要使用的不仅仅是静态页面。使用 JS/Ajax 可以在不使用服务器端脚本的情况下完成此操作，但这不是通常的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:51:26.583

尝试从第 1 页内部打开大小为 1x1 像素的 iframe 中的第二页。当`onload`iframe 的事件被触发时，页面完成加载，然后您可以在 iframe 中获取文档并检查指定的 div 是否存在。

编辑：我完全同意@aram90，并认为这是一种非常糟糕的网站编程方式。你应该重新考虑你的选择，很可能有更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:59:13.553

尝试在会话中放置一些变量。根据您可以隐藏/显示 div 的值。

# python - 熊猫“计数（不同）”等效

> ID：15411158
> 
> 赞同：360
> 
> 时间：2013-03-14T13:50:03.070
> 
> 标签：python, pandas, count, group-by, distinct

我使用 Pandas 作为数据库替代品，因为我有多个数据库（[Oracle](https://en.wikipedia.org/wiki/Oracle_Database)、[SQL Server](https://en.wikipedia.org/wiki/Microsoft_SQL_Server)等），并且我无法将命令序列转换为 SQL 等价物。

我在 DataFrame 中加载了一个表，其中包含一些列：

```
YEARMONTH, CLIENTCODE, SIZE, etc., etc. 
```

在 SQL 中，计算每年不同客户的数量是：

```
SELECT count(distinct CLIENTCODE) FROM table GROUP BY YEARMONTH; 
```

结果将是

```
201301    5000
201302    13245 
```

我怎样才能在熊猫中做到这一点？

* * *

## 回答 #1

> 赞同：536
> 
> 时间：2013-03-14T14:09:06.103

我相信这就是你想要的：

```
table.groupby('YEARMONTH').CLIENTCODE.nunique() 
```

例子：

```
In [2]: table
Out[2]: 
   CLIENTCODE  YEARMONTH
0           1     201301
1           1     201301
2           2     201301
3           1     201302
4           2     201302
5           2     201302
6           3     201302

In [3]: table.groupby('YEARMONTH').CLIENTCODE.nunique()
Out[3]: 
YEARMONTH
201301       2
201302       3 
```

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2017-07-02T11:16:54.497

这是另一种方法，它更简单。假设您的数据框名称是`daat`，列名称是`YEARMONTH`：

```
daat.YEARMONTH.value_counts() 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-05-05T02:59:28.173

有趣的是，通常`len(unique())`比`nunique()`.

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2019-08-01T09:38:19.670

我也在使用`nunique`，但如果您必须使用诸如此类的聚合函数，它将非常有帮助`'min', 'max', 'count' or 'mean'`。

```
df.groupby('YEARMONTH')['CLIENTCODE'].transform('nunique') #count(distinct)
df.groupby('YEARMONTH')['CLIENTCODE'].transform('min')     #min
df.groupby('YEARMONTH')['CLIENTCODE'].transform('max')     #max
df.groupby('YEARMONTH')['CLIENTCODE'].transform('mean')    #average
df.groupby('YEARMONTH')['CLIENTCODE'].transform('count')   #count 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-04-20T10:47:51.150

# 列的不同以及其他列上的聚合

要获取任何列的不同数量的值（`CLIENTCODE`在您的情况下），我们可以使用`nunique`. 我们可以在函数中将输入作为字典传递`agg`，以及其他列上的聚合：

```
grp_df = df.groupby('YEARMONTH').agg({'CLIENTCODE': ['nunique'],
                                      'other_col_1': ['sum', 'count']})

# to flatten the multi-level columns
grp_df.columns = ["_".join(col).strip() for col in grp_df.columns.values]

# if you wish to reset the index
grp_df.reset_index(inplace=True) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-11-23T15:16:20.597

使用`crosstab`，这将返回比 更多的信息`groupby` `nunique`：

```
pd.crosstab(df.YEARMONTH,df.CLIENTCODE)
Out[196]:
CLIENTCODE  1  2  3
YEARMONTH
201301      2  1  0
201302      1  2  1 
```

稍作修改后，结果如下：

```
pd.crosstab(df.YEARMONTH,df.CLIENTCODE).ne(0).sum(1)
Out[197]:
YEARMONTH
201301    2
201302    3
dtype: int64 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-03T00:40:45.490

这是一种在多列上计数不同的方法。让我们有一些数据：

```
data = {'CLIENT_CODE':[1,1,2,1,2,2,3],
        'YEAR_MONTH':[201301,201301,201301,201302,201302,201302,201302],
        'PRODUCT_CODE': [100,150,220,400,50,80,100]
       }
table = pd.DataFrame(data)
table

CLIENT_CODE YEAR_MONTH  PRODUCT_CODE
0   1       201301      100
1   1       201301      150
2   2       201301      220
3   1       201302      400
4   2       201302      50
5   2       201302      80
6   3       201302      100 
```

现在，列出感兴趣的列并以稍微修改的语法使用 groupby：

```
columns = ['YEAR_MONTH', 'PRODUCT_CODE']
table[columns].groupby(table['CLIENT_CODE']).nunique() 
```

我们获得：

```
YEAR_MONTH  PRODUCT_CODE CLIENT_CODE
1           2            3
2           2            3
3           1            1 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-28T14:15:31.853

创建一个数据透视表并使用*nunique* series 函数：

```
ID = [ 123, 123, 123, 456, 456, 456, 456, 789, 789]
domain = ['vk.com', 'vk.com', 'twitter.com', 'vk.com', 'facebook.com',
          'vk.com', 'google.com', 'twitter.com', 'vk.com']
df = pd.DataFrame({'id':ID, 'domain':domain})
fp = pd.pivot_table(data=df, index='domain', aggfunc=pd.Series.nunique)
print(fp) 
```

输出：

```
 id
domain
facebook.com   1
google.com     1
twitter.com    2
vk.com         3 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-02T14:58:40.960

使用新的 Pandas 版本，很容易得到一个数据框：

```
unique_count = pd.groupby(['YEARMONTH'], as_index=False).agg(uniq_CLIENTCODE=('CLIENTCODE', pd.Series.count)) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-17T02:16:17.507

现在您还可以使用`dplyr`Python 中的语法来执行此操作：

```
>>> from datar.all import f, tibble, group_by, summarise, n_distinct
>>>
>>> data = tibble(
...     CLIENT_CODE=[1,1,2,1,2,2,3],
...     YEAR_MONTH=[201301,201301,201301,201302,201302,201302,201302]
... )
>>>
>>> data >> group_by(f.YEAR_MONTH) >> summarise(n=n_distinct(f.CLIENT_CODE))
   YEAR_MONTH       n
      <int64> <int64>
0      201301       2
1      201302       3 
```

# ipad - ios6中的旋转问题-黑屏

> ID：15411160
> 
> 赞同：-2
> 
> 时间：2013-03-14T13:50:07.427
> 
> 标签：ipad, ios6, rotation

我在使用 iPAD 的 ios6 中发现了几个旋转问题……我们所有人……我使用新方法 shouldAutorotate 和 shouldAutorotateToInterfaceOrientation 解决了大部分问题。但是在其中一种观点中没有正确更新旋转。你可以看到（或多或少）发生了什么：

![轮换问题](../Images/cc7c5daa934229c0675c0ace93015744.png)

顶部图像描述了从横向到纵向的行为......如果我在第一张图片的其他不同位置更改我的应用程序的旋转，然后返回到第一个选项卡，则应用程序无法正确更新纵向视图。

底部的图像描述了当我从纵向到横向时会发生什么......在最后一个屏幕中，我可以将屏幕的一半完全变黑。

我在 iOS 方面的水平真的很基础，我会喜欢一些提示......你认为这可能是什么问题？因为在其他选项卡中不会发生同一个应用程序它不会发生。

如果您需要一段代码，请告诉我...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:36:06.390

试试这个： [https](https://github.com/alexth/TBSV) ://github.com/alexth/TBSV 示例如何在一个项目中拥有 NavigationBar、TabBar 和 SplitViewController，并在方向之间进行正确的转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:34:48.887

谢谢你的反应（讽刺）。我发现仅在我的应用程序的特定屏幕中旋转有什么问题。问题是，在我之前构建应用程序的那个`UISplitViewController`在`UITabBarController`. 在 iOS 6中，这种混合会`ViewController`带来很多问题，尤其是旋转问题。经过数千次尝试，我找到了这个链接并解决了。

iOS6 中的 UITabBarController 内的 UISplitViewController： [http ://objectiveseesharp.wordpress.com/](http://objectiveseesharp.wordpress.com/)

就这样。

我应该更改问题的标题吗？

# django - Django 模板文件夹

> ID：15411164
> 
> 赞同：32
> 
> 时间：2013-03-14T13:50:14.290
> 
> 标签：django, django-templates, django-urls

我正在试验 Django，并弄清楚如何设置**urls.py**以及 URL 是如何工作的。我已经在项目的根目录中配置了**urls.py**，以指向我的博客和管理员。但是现在我想在我的家中添加一个页面，所以在`localhost:8000`.

因此，我在项目根目录的**urls.py中添加了以下代码：**

```
from django.views.generic.simple import direct_to_template

urlpatterns = patterns('',
    (r"^$", direct_to_template, {"template": "base.html"}),
) 
```

**问题是它在blog/templates/...**中搜索模板， 而不是在我的根目录中搜索模板文件夹。其中包含**base.html**。

完整**的 urls.py**：

```
from django.conf.urls import patterns, include, url
from django.views.generic.simple import direct_to_template

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    (r"^$", direct_to_template, {"template": "base.html"}),
    url(r'^blog/', include('hellodjango.blog.urls')),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    (r'^tinymce/', include('tinymce.urls')),
) 
```

我忽略了什么吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-14T14:18:51.417

你设置`TEMPLATE_DIRS`在你的`settings.py`? 检查并确保它使用绝对路径正确设置。这就是我确保正确设置的方式：

# 设置.py

```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(PROJECT_ROOT, 'templates').replace('\\','/'),
)

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
) 
```

这样，我的`templates`项目根目录中有一个用于非应用程序模板的文件夹，并且每个应用`templates/appname`程序本身都有一个文件夹。

如果您想使用根模板文件夹中的模板，您只需提供模板的名称，`'base.html'`如果您想使用应用程序模板，您可以使用`'appname/base.html'`

文件夹结构：

```
project/
  appname/
    templates/ 
      appname/  <-- another folder with app name so 'appname/base.html' is from here
        base.html
    views.py
    ...

  templates/    <-- root template folder so 'base.html' is from here
    base.html

  settings.py
  views.py
  ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:37:44.993

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^blog/', include('hellodjango.blog.urls')),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^tinymce/', include('tinymce.urls')),
)

urlpatterns += patterns(
    'django.views.generic.simple',
    (r'^', 'direct_to_template', {"template": "base.html"}),
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:01:44.840

我会这样重新组织网址：

```
urlpatterns = patterns('',
    (r'^admin/doc/', include('django.contrib.admindocs.urls')),
    (r'^admin/', include(admin.site.urls)),
    (r'^tinymce/', include('tinymce.urls')),
    (r'^blog/', include('hellodjango.blog.urls')),
    (r'^$', direct_to_template, {"template": "base.html"}),
) 
```

模式由它们的特异性匹配，所以我倾向于把更具体的模式放在第一位。否则，您可能会看到一些意外行为。试一试，如果它仍然在请求从您的博客加载模板`/`，我们将深入挖掘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:32:01.117

我认为这取决于你希望你的主页是什么。如果它只是一个链接到您网站其他部分的页面，那么[凯瑟琳的](https://stackoverflow.com/a/15412263/1199394)回答是一个很好的干净方式。

例如，如果您希望网站的根目录成为您的博客，我会这样做：

```
urlpatterns = patterns('',
    # Django Admin
    url(r'^admin/', include(admin.site.urls)),
    # Tiny MCE Urls
    url(r'^tinymce/', include('tinymce.urls')),
    # Other App
    url(r'^other/', include('projectname.other.urls', namespace='other')),
    # Blog App
    url(r'^', include('projectname.blog.urls', namespace='blog')),
) 
```

也不要忘记命名空间你的网址包括：[https ://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces](https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-17T11:31:34.443

你可以参考我的解决方案

```
Django==3.2.5 
```

[https://stackoverflow.com/a/68420097/10852018](https://stackoverflow.com/a/68420097/10852018)

# java - 将 Hibernate 4.0 与 Tomcat 7 和 JSF 2.0 一起使用时出现 JndiException

> ID：15411167
> 
> 赞同：2
> 
> 时间：2013-03-14T13:50:23.570
> 
> 标签：java, hibernate, tomcat

在应用程序部署之后，当方法执行时，我得到以下错误。

```
Caused by: org.hibernate.service.jndi.JndiException: Unable to lookup JNDI name [java:comp/env/JSF_HIBER/ORACLE]
    at org.hibernate.service.jndi.internal.JndiServiceImpl.locate(JndiServiceImpl.java:68)
    at org.hibernate.service.jdbc.connections.internal.DatasourceConnectionProviderImpl.configure(DatasourceConnectionProviderImpl.java:116)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:223)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:89)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:77)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2283)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2279)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1748)
    at com.utils.HibernateUtils.<clinit>(HibernateUtils.java:19)
    ... 33 more
Caused by: javax.naming.NamingException: This context must be accessed through a java: URL
    at org.apache.naming.SelectorContext.parseName(SelectorContext.java:776)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:135)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at org.hibernate.service.jndi.internal.JndiServiceImpl.locate(JndiServiceImpl.java:65)
    ... 47 more 
```

**上下文.xml**

```
<Resource name="JSF_HIBER/ORACLE" auth="Container"
    type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000"
    username="****" password="**** driverClassName="oracle.jdbc.OracleDriver"
    url="jdbc:oracle:thin:@99.99.999.999:1521:xe" /> 
```

**休眠.cfg.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.datasource">java:comp/env/JSF_HIBER/ORACLE</property>
        <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
        <property name="dialect">org.hibernate.dialect.Oracle10gDialect</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="show_sql">true</property>
        <property name="hibernate.current_session_context_class">thread</property>
    <mapping class="com.entity.User"/>
    </session-factory>
</hibernate-configuration> 
```

**Web.xml**

```
<resource-ref>
        <description>JSF_HIBER</description>
        <res-ref-name>JSF_HIBER/ORACLE</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref> 
```

我不知道为什么我会收到这个错误，请帮助我...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-28T19:15:40.487

您必须在 hibernate.cfg.xml 文件中的“java:”和“comp”之间添加一个斜杠：

`<property name="hibernate.connection.datasource">java:/comp/env/JSF_HIBER/ORACLE</property>`

它可能会解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:35:07.010

您可能需要以下内容`META-INF/context.xml`将您的全局 JNDI 资源链接到特定于应用程序的资源：

```
<Context>
  <ResourceLink name="JSF_HIBER/ORACLE"
            global="JSF_HIBER/ORACLE"
            type="javax.sql.DataSource"
</Context> 
```

它将您的全局数据源链接`JSF_HIBER/ORACLE`到您的本地数据源`java:comp/env/JSF_HIBER/ORACLE`。

编辑：

如果您不想创建应用程序级链接，则可以改用全局 url：

```
<property name="hibernate.connection.datasource">JSF_HIBER/ORACLE</property> 
```

# wcf-ria-services - 如何将 SL/RIA 用作 WCF

> ID：15411169
> 
> 赞同：0
> 
> 时间：2013-03-14T13:50:26.377
> 
> 标签：wcf-ria-services

使用 VS2012 并从 SL 业务应用程序项目开始，我添加了一个 EF 模型 Model1，删除了 tt 文件，将代码生成更改为默认并构建了项目。然后我添加了带有各种表的 DomainService1。未选择 OData。

启动应用程序，它似乎有一个可用的服务：

![在此处输入图像描述](../Images/36ff09d122335f7ab7af479e5826a51e.png)

但是如果我们单击 url，我们希望看到 XML，但它不起作用。附加 ?wsdl 应该会导致 XML 被发送到浏览器，但我只是得到了插图页面。按照本页的建议使用 svcutil 进行尝试会产生以下结果：

```
Microsoft (R) Service Model Metadata Tool [Microsoft (R) Windows (R) Communication 
Foundation, Version 4.0.30319.17929] Copyright (c) Microsoft Corporation.  
All rights reserved.

Attempting to download metadata from 'http://localhost:57880/Ria1-Web-DomainService1.sv
c?wsdl' using WS-Metadata Exchange or DISCO. Generating files...     
Warning: No code was generated. If you were trying to generate a client, this could be 
because the metadata documents did not contain any valid contracts or services or 
because all contracts/services were discovered to exist in /reference assemblies. 
Verify that you passed all the metadata documents to the tool.

Warning: If you would like to generate data contracts from schemas make sure to use
the /dataContractOnly option. 
```

这似乎表明 MEX 端点的设计不正确，所以我的 WCF 书籍出来了，但他们认为应该包含的`<system.serviceModel>`内容与实际存在的内容*之间*没有关联：

```
 <system.serviceModel>
    <serviceHostingEnvironment 
      aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

我需要在配置中添加什么来公开元数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:50:26.377

在准备这个问题时，我想知道当您指定 OData 时配置会发生*什么*。事实证明这是一个正确的问题。你得到这个：

```
 <system.serviceModel>
    <serviceHostingEnvironment 
      aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
    <domainServices>
      <endpoints>
        <add name="OData" 
          type="System.ServiceModel.DomainServices.Hosting.ODataEndpointFactory, 
                System.ServiceModel.DomainServices.Hosting.OData, 
                Version=4.0.0.0, Culture=neutral, 
                PublicKeyToken=31bf3856ad364e35" />
      </endpoints>
    </domainServices>

  </system.serviceModel> 
```

这给了我更多的搜索词。结合来自各种来源的信息导致了这一点：

```
<add name="Soap" 
     type="Microsoft.ServiceModel.DomainServices.Hosting.SoapXmlEndpointFactory, 
     Microsoft.ServiceModel.DomainServices.Hosting, 
     Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" /> 
```

在我添加对此的引用之前，它完全无法工作：

![Microsoft.ServiceModel.DomainServices.Hosting.EndPoints](../Images/9dedf56d495c301cd81c48c5697e72cb.png)

于是，一切都亮了起来，大家欢欣鼓舞。

# actionscript-3 - 通过文件变量类型 ActionScript3 从加载的文件中获取大小

> ID：15411173
> 
> 赞同：0
> 
> 时间：2013-03-14T13:50:28.110
> 
> 标签：actionscript-3

无法获取我的文件大小！我有一个加载文件的变量，然后在我的 fileCompleteLoad 事件中我想检查该文件的大小（.png）。

`// clickButton event to load the file`

 ````
public function onMouseClick(e:MouseEvent):void{
    _fileRef = new File();
    _fileRef.addEventListener(Event.SELECT, onFileSelected, false, 0, true);
    _fileRef.addEventListener(Event.CANCEL, onCancel, false, 0, true);
    _fileRef.addEventListener(IOErrorEvent.IO_ERROR, onIOError, false, 0, true);
    _fileRef.addEventListener(SecurityErrorEvent.SECURITY_ERROR, 
    onSecurityError,  false, 0, true);

    _fileRef.browse([_imageFilter]);
}

// selected event

public function onFileSelected(evt:Event):void
{
    _fileRef.addEventListener(ProgressEvent.PROGRESS, onProgress, false, 0, true);
    _fileRef.addEventListener(Event.COMPLETE, onComplete, false, 0, true);
    _fileRef.load();
}

// thats my eventComplete

 public function onComplete(evt:Event):void
{
    _msgSuccessErrorTextField.text = "File was successfully loaded.";
    _pngInputTextField.text = String(_fileRef.nativePath);
    _atfOutputTextField.text = _fileRef.nativePath.replace(".png",".atf");
    _inputNativeProcess = _fileRef.nativePath;
    _outputNativeProcess = _atfOutputTextField.text;
    _flagLoadedFile = new Boolean(true);

    var test:Bitmap = evt.target.data as Bitmap;
    if(test){
        trace(test.height);
    }

    _fileRef.removeEventListener(Event.SELECT, onFileSelected);
    _fileRef.removeEventListener(ProgressEvent.PROGRESS, onProgress);
    _fileRef.removeEventListener(Event.COMPLETE, onComplete);
    _fileRef.removeEventListener(Event.CANCEL, onCancel); 
````  `现在，在那种情况下，我想检查我的文件大小......我尝试了很多东西，但没有成功......有时我从我的 _fileRef.data 中得到空值。

有什么建议可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:12:26.263

只是为了确定，你是否得到`data`了处理程序的内部`onComplete`？您显示的代码现在不这样做。应该是这样的：

```
_fileRef.addEventListener(Event.COMPLETE, onComplete, false, 0, true);

private function onComplete(e:Event):void
{
    var test:Bitmap = e.target.data as Bitmap;
    if(test)
        trace(test.height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:14:23.993

答案是 -

`//add that on my public function onComplete(evt:Event):void{}`

```
var loader:Loader = new Loader();

loader.loadBytes(byteArray);

loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderComplete);

// build another event

publicfunction loaderComplete(event:Event):void
{
var loaderInfo:LoaderInfo = LoaderInfo(event.target);

var bitmapData:BitmapData = new BitmapData(loaderInfo.width,
loaderInfo.height, false,   0xFFFFFF);

bitmapData.draw(loaderInfo.loader);
// result: bitmapData 
```

}

现在我可以得到高度，witdh 和任何东西......谢谢！`

# python - 我们是否需要每个源目录中的 sconscript 文件

> ID：15411176
> 
> 赞同：3
> 
> 时间：2013-03-14T13:50:38.080
> 
> 标签：python, scons

我正在使用 scons 来编译我的项目。在我的项目中，源文件位于不同的目录中。我们是否需要每个目录中的 sconscript 文件来编译这些项目源文件？

我尝试使用单个 sconscript 文件编译所有目录。但是所有目标文件都只添加到我的源目录中。

我正在使用这个功能：

```
env.Library('libs',files_list) 
```

如果 files_list 包含唯一的文件名，则 Obj 文件正在生成 @variant 目录。

如果 files_list 包含文件路径名，则 Obj 文件正在生成 @source 目录。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T15:17:33.350

我准备了一个示例，展示了如何使用 SCons VariantDir() 函数仅使用一个 SConstruct 脚本（没有附属的 SConscripts）来编译像您这样的项目。我决定在单独的答案中这样做，以便更容易阅读。

VariantDir() 函数没有很好地记录，所以你提到的关于编译目标文件位置的行为不是直接修复的。“技巧”是引用变体目录中的所有源文件，而不是实际源目录中的所有源文件，如下所示。

这是我项目中源文件的结构：

```
$ tree .
.
├── SConstruct
├── src1
│   ├── class1.cc
│   └── class1.h
├── src2
│   ├── class2.cc
│   └── class2.h
└── srcMain
    └── main.cc 
```

这是SConstruct：

```
env = Environment()

# Set the include paths
env.Append(CPPPATH = ['src1', 'src2'])

# Notice the source files are referred to in the build dir
# If you dont do this, the compiled objects will be in the src dirs
src1Sources = ['build/lib1/class1.cc']
src2Sources = ['build/lib2/class2.cc']
mainSources = ['build/mainApp/main.cc']

env.VariantDir(variant_dir = 'build/lib1', src_dir = 'src1', duplicate = 0)
env.VariantDir(variant_dir = 'build/lib2', src_dir = 'src2', duplicate = 0)
env.VariantDir(variant_dir = 'build/mainApp', src_dir = 'srcMain', duplicate = 0)

lib1 = env.Library(target = 'build/lib1/src1', source = src1Sources)
lib2 = env.Library(target = 'build/lib1/src2', source = src2Sources)
env.Program(target = 'build/mainApp/main', source = [mainSources, lib1, lib2]) 
```

这是编译输出：

```
$ scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
g++ -o build/lib1/class1.o -c -Isrc1 -Isrc2 src1/class1.cc
ar rc build/lib1/libsrc1.a build/lib1/class1.o
ranlib build/lib1/libsrc1.a
g++ -o build/lib2/class2.o -c -Isrc1 -Isrc2 src2/class2.cc
ar rc build/lib1/libsrc2.a build/lib2/class2.o
ranlib build/lib1/libsrc2.a
g++ -o build/mainApp/main.o -c -Isrc1 -Isrc2 srcMain/main.cc
g++ -o build/mainApp/main build/mainApp/main.o build/lib1/libsrc1.a build/lib1/libsrc2.a
scons: done building targets. 
```

这是编译后的项目结构：

```
$ tree .
.
├── build
│   ├── lib1
│   │   ├── class1.o
│   │   ├── libsrc1.a
│   │   └── libsrc2.a
│   ├── lib2
│   │   └── class2.o
│   └── mainApp
│       ├── main
│       └── main.o
├── SConstruct
├── src1
│   ├── class1.cc
│   └── class1.h
├── src2
│   ├── class2.cc
│   └── class2.h
└── srcMain
    └── main.cc 
```

应该提到的是，更直接的方法是使用 SConscript() 函数，指定 variant_dir，但如果您的要求不允许您这样做，则此示例将起作用。[SCons 手册页](http://www.scons.org/doc/production/HTML/scons-man.html)包含有关 VariantDir() 函数的更多信息。在那里，您还将找到以下内容：

> 请注意，VariantDir() 最自然地与辅助 SConscript 文件一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:28:38.877

要回答您的第一个问题：不，不必在每个 src 子目录中都有一个 SConscript 才能编译该目录中的文件。一切都可以通过一个 SConstruct 完成。

话虽如此，它通常被认为是更清洁和更好的组织，以便在 src 子目录中有一个 SConscript。通常在这种情况下，根 SConstruct 会设置整个项目共有的东西，并协调对 src 子目录的调用。然后，每个 src 子目录中的 SConstruct 将专注于该子目录的细节。我更喜欢这种方法，因为它更模块化。此外，这将允许您使用不同的环境调用相同的 src subdir SConstruct 来编译相同代码的不同版本，例如调试和发布。

所有这些都可以通过在 SConstruct 中创建一个环境，然后使用 SConscript() 函数将其传递给 sudirs 来完成。这是一个例子：

SConstruct

```
env = Environment()
env.Append(CPPPATH = '/some/dir/common/to/all')

SConscript('src/subdirA/SConscript',
           variant_dir = 'build/subdirA',
           duplicate = 0,
           exports = 'env')
SConscript('src/subdirB/SConscript',
           variant_dir = 'build/subdirB',
           duplicate = 0,
           exports = 'env') 
```

src/subdirA/SConscript

```
Import('env')

# If you need to add specific things to the env, then you should clone it,
# else the changes will be seen in other subdirs: clonedEnv = env.Clone()
# No need to specify the path to the source files if all source files are in 
# the same dir as this SConscript.
env.Library(target='subdirA', source='fileA.cc') 
```

src/subdirB/SConscript

```
Import('env')

# If you need to add specific things to the env, then you should clone it,
# else the changes will be seen in other subdirs: clonedEnv = env.Clone()
env.Library(target='subdirB', source='fileB.cc') 
```

至于最后几个问题，我真的不明白你在找什么，但是使用我上面解释的选项，生成的编译目标将始终放在 VariantDir 中。

# regex - 如何在 Yahoo Pipes 上使用正则表达式仅获取 URL？

> ID：15411182
> 
> 赞同：0
> 
> 时间：2013-03-14T13:50:50.500
> 
> 标签：regex, string, url, yahoo-pipes

例如，我有一些提要，带有这样的项目标题

**有些文本比一个文本更好[http://t.co/blablabla](http://t.co/blablabla) #hashtag**

然后我想只使用这样的正则表达式获取 URL

**[http://t.co/blablabla](http://t.co/blablabla)**

我怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:12:49.650

您可以使用此正则表达式：

```
http:\/\/t.co\/[^\s]+
```

[http://regex101.com/r/pK6lW5](http://regex101.com/r/pK6lW5)

# java - 处理异步 Web 服务请求的异常

> ID：15411186
> 
> 赞同：3
> 
> 时间：2013-03-14T13:50:53.323
> 
> 标签：java, playframework, playframework-2.1

我仍然是使用 Play!Framework 2.1 WS 库实现 Web 服务请求的新手。现在，我在理解 WS 库行为方面遇到了问题。

首先，我有这样的代码：

```
public static Result espnRss() {
    try {
        // do request
        return async(
            WS.url("http://espnfc.com/rss/news?section=premierleague").get().map(
                new F.Function<WS.Response, Result>() {
                    @Override
                    public Result apply(WS.Response response) throws Throwable {
                        return ok("Success!"); // success request
                    }
                }
            )
        );
    } catch (Exception e) {
        // exception occured
        return internalServerError("Oops, connect exception occured!");
    }
} 
```

当我尝试请求`espnRss`操作时，我得到了 SUCCESS 响应。

然后，我想在请求上设置 WS 超时。所以，我改变了我以前的代码是这样的：

```
public static Result espnRss() {
    try {
        // set request timeout for 1000 ms and do request
        return async(
            WS.url("http://espnfc.com/rss/news?section=premierleague").setTimeout(1000).get().map(
                ... // same as previous
            )
        );
    } catch (Exception e) {
        // exception occured
        return internalServerError("Oops, connect exception occured!");
    }
} 
```

我的互联网连接不快（下载速度约为 40 KB/s），我故意这样做（将请求超时设置为 1 秒）以执行异常处理代码。

但是，我从框架得到默认响应，而不是`internalServerError`响应提供的代码。

```
Execution Exception 
[TimeoutException: No response received after 1000] 
```

谁能解释我为什么无法使用我上面的代码捕获 WS 请求的异常？使用 Play!Framework WS 库处理异常的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T03:13:44.947

To handle exception that occur on **asynchronous** request such as `WS` request with Play!Framework 2.1.0, there is method on `Promise` named [`recover(F.Function<java.lang.Throwable,A> function)`](http://www.playframework.com/documentation/api/2.1.0/java/play/libs/F.Promise.html#recover%28play.libs.F.Function%29).

The method should be called when we want to handle all exception occured while requesting using `WS` library. So, I solved the problem using code that looked like following:

```
public static Result espnRss() {
    // do request
    return async(
        WS.url("http://espnfc.com/rss/news?section=premierleague").setTimeout(100).get().map(
            new F.Function<WS.Response, Result>() {
                @Override
                public Result apply(WS.Response response) throws Throwable {
                    return ok("Success!"); // success request
                }
            }
        ).recover( // to handle error occured on redeemed PROMISE
            new F.Function<Throwable, Result>() {
                @Override
                public Result apply(Throwable throwable) throws Throwable {
                    // option to distinguish exception
                    if (throwable instanceof TimeoutException) {
                        return internalServerError("Oops, time out exception occured!");
                    } else {
                        return internalServerError("Oops, other exception occured!");
                    }
                }
            }
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T08:03:05.453

我不熟悉 Play 框架，但`async`必须返回/使用某种未来。该请求实际上是在一个单独的线程中执行的，异常显然不会被您的`try..catch`处理程序捕获。

必须有一些类似的功能/方法`onComplete`可以应用于`async`允许您测试运行请求的结果。

# iphone - 我可以从我的应用程序中打开设置应用程序吗？

> ID：15411190
> 
> 赞同：-2
> 
> 时间：2013-03-14T13:51:04.693
> 
> 标签：iphone, ios, objective-c, xcode

我想打开我的应用程序的通知（在设置应用程序中）。

**我该怎么做？**

也许有人有交易。

例如：

[一只忙碌的猫 http://0.tqn.com/d/ipod/1/0/d/H/-/-/notification-center-settings.jpg](http://0.tqn.com/d/ipod/1/0/d/H/-/-/notification-center-settings.jpg)

**PS我使用IOS 5.0，... 6.1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:15:21.323

没有办法做到这一点，它不会起作用，因为苹果没有提供任何细节或`URL Schemes`与在较新版本中打开设置应用程序相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:54:04.650

用这个：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=NOTIFICATIONS_ID"]] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T14:00:17.763

您可以在[iPhone上执行此操作](http://itechbook.net)

通过使用此代码

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=NOTIFICATIONS_ID"]] 
```

# android - 适用于 android 和 windows8 的 Cordova 项目

> ID：15411195
> 
> 赞同：0
> 
> 时间：2013-03-14T13:51:21.330
> 
> 标签：android, windows, cordova

我想使用`PhoneGap`- Cordova 开发 HTML5 + javascript 应用程序，它将在 win8 和 android 上显示传感器数据。

我有一个基本问题，我在网络上的研究中没有理解。这种应用程序的结构是什么？我的意思是，如何仅在一个项目中构建这个跨平台应用程序？

我在电话间隙中看到的内容 - 入门指南[http://docs.phonegap.com/en/2.5.0/guide_getting-started_index.md.html#Getting%20Started%20Guides](http://docs.phonegap.com/en/2.5.0/guide_getting-started_index.md.html#Getting%20Started%20Guides)

和许多其他网站一样，工作模式是针对特定操作系统打开一个项目，例如在 VS2012 中。但我想将此项目用于win8和android！

我将不胜感激，尤其是如果您有代码示例并且可能`tools\templates`对打开此项目有用。

注意：我是 HTML5-javascript 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:58:55.227

杜松子酒，结构是您将使用 jQuery、java 脚本、CSS、资源和您的基本 HTML 进行编码。

HTML API 和 CORDOVA 的 java 脚本将与 Phonegap 的原生插件集成。

我们可以创建自己的插件，我们在同一个网站上有一个格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:51:51.513

如果您决定在本地构建应用程序，则需要为每个平台创建不同的项目。例如，您需要在 Mac 机器上创建一个 Xcode 项目来开发 iOS 应用程序。如果您可以进行云构建，您可以查看[http://build.phonegap.com](http://build.phonegap.com)，您只需上传压缩的 html/js 和 css 文件，它就可以让您准备好运行适用于 iOS、Android、 Windows 移动、BB 等...

# excel - 无法将数据保存到由宏 vba 输入的 excel 2010

> ID：15411196
> 
> 赞同：0
> 
> 时间：2013-03-14T13:51:21.807
> 
> 标签：excel, vba

我创建了一个包含多张工作表的工作簿。在其中一个工作表中，我编写了一个宏，一旦单击 active-x 按钮，它就会在另一个工作表（带有预定义的单元格）中创建下拉值。

现在的问题是，一旦我运行宏，它就会完美执行，但是一旦我删除宏，即使我在删除宏之前保存了文件，下拉值也会消失。

让我知道是否需要更多详细信息。

代码片段 -

```
Private Sub CommandButton1_Click()
'Define the variables
Dim vRangeDefined, vRowCount, vCounter, vCellValue As String, vDataValue As String
Dim wbk As Workbook

'Define the range where the values are entered
vRangeDefined = ActiveSheet.Range("A:B").Value
vRowCount = ActiveSheet.UsedRange.Rows.Count

For vCounter = 2 To vRowCount
    vCellValue = vRangeDefined(vCounter, 1)
    vDataValue = vRangeDefined(vCounter, 2)

   'Assign the names to cells as per the range
    Sheets(2).Select
    ActiveSheet.Range(vCellValue).Select

    With Selection.Validation
        .Delete
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
        xlBetween, Formula1:=vDataValue
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With

Next

MsgBox "Process complete..."

End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:23:04.860

我需要的只是 A1:B2 范围内的四个单元格值，您可以在此处简单地键入。

我很抱歉那篇文章（以上面一行中的文字开头），因为我想将它添加为评论，但在我的手机上做时失败了。因此，我继续在这里...

我做了你所描述的一切，没有任何异常发生，你没有任何问题。我在 Excel 2010 上进行了测试。我的进一步建议是：

1.  请考虑如果您在删除宏后执行任何其他操作，这在这种情况下似乎并不重要，

2.  尝试断开您的宏与按钮的连接并将其放入标准模块（例如 Module1）中，然后使用 VBA 编辑器中的 F5 键运行它。

如果您最终找到解决方案，请通知我们。

# xss - 由于 IE 中的 XSS 脚本而不是 google chrome 中的 Web 应用程序崩溃，但两个浏览器都在处理脚本？

> ID：15411200
> 
> 赞同：0
> 
> 时间：2013-03-14T13:51:29.823
> 
> 标签：xss, antixsslibrary

我正在测试针对 xss 攻击的 Web 应用程序。因为有事件列表，每个事件都有评论区，在其中一个事件中，我插入了这个脚本，

```
<script src=”http://www.example.com/malicious.js”&gt;</script > 
```

该事件显示了一个标志，即有评论，但没有显示。这里的问题是，每当我单击该事件时，应用程序就会崩溃，并且浏览器会给出“恢复页面”。

但是在 Chrome 中，它正在接受该脚本，将其显示为空注释（“”），并且它没有崩溃，为什么？

我在 IE 中重置了浏览器设置，但出现了同样的问题。那是因为 Chrome 没有处理病毒（不确定），还是 IE 处理了它？

我试过这个脚本，

```
<script >alert("Hello");</script > 
```

两种浏览器都以相同的方式运行而不会崩溃。

那么你能告诉我其中发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:53:15.867

您似乎使用了一些非标准引号。尝试用这个替换：

```
<script src="http://www.example.com/malicious.js"></script> 
```

# c - 环回接口上的客户端服务器连接

> ID：15411205
> 
> 赞同：1
> 
> 时间：2013-03-14T13:51:39.707
> 
> 标签：c, localhost, connect

我正在尝试使用 localhost 地址测试客户端-服务器的简单实现。这是代码。

服务器：

```
/*
 * Sequential busy-waiting
 */
int main(int argc, char** argv) {

    int opt, client_addr_l, errsv;
    unsigned short port;
    struct sockaddr_in server_addr, client_addr;

    /* ... */

    printf("Port number retrieved (%d), server is starting ...\n", port);

    /*TCP Socket creation*/
    sock_ds = socket(AF_INET, SOCK_STREAM, 0); 
    if(sock_ds == -1){
        fprintf(stderr, "Socket creation error: %s\n", strerror(errno));
        exit(EXIT_FAILURE);
    }

    /*Server address binding*/
    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(port);
    server_addr.sin_addr.s_addr = INADDR_ANY;

   /*!!!! */
   int optval = 1;                                      
   if( (setsockopt(sock_ds,SOL_SOCKET,SO_REUSEADDR,&optval,sizeof(optval))) == -1 ) {                
       printf("Error on setsockopt\n");                         
       exit(EXIT_FAILURE);                                  
   }
  /*????*/

   if(bind(sock_ds, (struct sockaddr*)&server_addr, sizeof(server_addr)) == -1){
       fprintf(stderr, "Address binding error\n");
       exit(EXIT_FAILURE);
   }

   /*Server with passive socket*/
   if(listen(sock_ds, SOMAXCONN) == -1){
       fprintf(stderr, "Listen call error: %s\n", strerror(errno));
       exit(EXIT_FAILURE);
   }

   while(1){
       memset(&client_addr, 0, sizeof(client_addr));
       acc_sock_ds = accept(sock_ds, (struct sockaddr *)&client_addr, &client_addr_l);
       printf("DEBUG: LINE201, acc_sock_ds = %d\n", acc_sock_ds);
       /*Connect error management*/
       if(acc_sock_ds == -1){
           fprintf(stderr, "Fatal error on accept %d(%s)\n"
                   , errsv, strerror(errsv));
            exit(EXIT_FAILURE);
       }

       //sin_addr to ASCII (string) );
       printf("Connected with: %s\n", inet_ntoa(client_addr.sin_addr)); 

       /*...*/     

       close(acc_sock_ds);

      /*...*/
    }

/*...*/

} 
```

客户：

```
 int main(){

    int sock_ds;
    struct sockaddr_in remote_addr;
    struct hostent *hp;

    /*TCP Socket creation*/
    sock_ds = socket(AF_INET, SOCK_STREAM, 0); 
    if(sock_ds == -1){
        fprintf(stderr, "Socket creation error\n");
        exit(EXIT_FAILURE);
    }

    remote_addr.sin_family = AF_INET;
    remote_addr.sin_port = htons(25556);

    hp = gethostbyname("localhost");
    bcopy(hp -> h_addr, &remote_addr.sin_addr, hp -> h_length); //fills address entry

   if(connect(sock_ds, (struct sockaddr*)&remote_addr, sizeof(remote_addr)) == -1){ //connection attempt
       fprintf(stderr, "Connect failure(%s)\n", strerror(errno));
       exit(EXIT_FAILURE);        
   }

   /*...*/

} 
```

当我在两个不同的终端上运行它们时，服务器返回我：

```
Port number retrieved (25556), server is starting ...
Server is ready. Waiting for client connections.
DEBUG: LINE201, acc_sock_ds = 4
Connected with: 0.0.0.0 
```

我的问题是：为什么服务器检索到的客户端地址是0.0.0.0。它不应该是 127.0.0.1 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:29:39.973

看起来您将第三个参数传递给未初始化的accept()，它应该设置为第二个参数的大小。除此之外，它应该是 socklen_t，而不是 int，请参阅[http://pubs.opengroup.org/onlinepubs/009695399/functions/accept.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/accept.html)

可以尝试通过将 client_addr_l 声明为 socklen_t，然后在传递给 accept() 之前将其设置为 sizeof(struct sockaddr_in) 吗？

我猜它的未初始化值为零，因此 accept() 无法将远程地址设置为您的 client_addr，因为它的大小为零。因此，client_addr 保持不变，当您之前将其归零时，您将获得 0.0.0.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:53:20.023

`0.0.0.0`表示您的服务器接受来自您设备中任何接口的连接

所以`127.0..0.1`包含地址的环回接口

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T13:55:02.087

这似乎是一种特殊情况。所有可能的地址都在监听您的连接。 [这](https://serverfault.com/questions/78048/whats-the-difference-between-ip-address-0-0-0-0-and-127-0-0-1)是一个关于此的线程。

引用：

```
0.0.0.0, in this context, means "all IP addresses on the local machine" 
(in fact probably, "all IPv4 addresses on the local machine"). 
So, if your webserver machine has two ip addresses, 192.168.1.1 and 10.1.2.1, 
and you allow a webserver daemon like apache to listen on 0.0.0.0, 
it will be reachable at both of those IPs. 
But only to what can contact those IPs and the web port(s). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-13T12:52:22.833

```
server_addr.sin_addr.s_addr = INADDR_ANY; 
```

可能应该是

```
server_addr.sin_addr.s_addr = htonl(INADDR_LOOPBACK); 
```

# jenkins - 针对 JIRA 对 Jenkins 用户进行身份验证

> ID：15411208
> 
> 赞同：9
> 
> 时间：2013-03-14T13:51:43.050
> 
> 标签：jenkins, jira

我们目前正在设置 Confluence、JIRA 和 Jenkins，我宁愿只有一个所有工具都可以使用的用户数据库，而不是必须在每个工具中创建单独的帐户。Google 告诉我，Jenkins 可以针对 Atlassian Crowd 对用户进行身份验证和授权。Confluence 可以使用 Crowd 和 JIRA 进行用户管理。

但是 Jenkins 可以使用 JIRA（而不是 Crowd）作为其用户数据库，来对用户进行身份验证和授权吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-10-08T01:06:47.047

一种方法是使用 Crowd2（Jenkins 插件）。

### 从吉拉

1.  转到 Admin Cog > 用户管理
2.  “JIRA 用户服务器”（左侧）
3.  点击“+添加应用”（右上角）

    *注意：要在 Jira 中使用 IP 地址指定端口，请使用 XX.XX.XX.XX/PORT 格式。Jira 用户必须具有管理员权限。*

    ![Jira 用户服务器](../Images/ec6b193a198f48760fd0a4c3fa3a4d9c.png)

### 从詹金斯

1.  转到“管理 Jenkins”（左侧）> 管理插件 > 可用选项卡
2.  下载 crowd2 插件
3.  转到“管理 Jenkins”（左侧）>“配置全局安全性”

    *注意：需要 Jenkins 管理员访问权限。*

    ![配置全局安全](../Images/e847d5a4349ebbb7c45e4da38c52dec0.png)

# ruby-on-rails - 在 Rails 上重用代码 Ruby

> ID：15411210
> 
> 赞同：0
> 
> 时间：2013-03-14T13:51:53.817
> 
> 标签：ruby-on-rails, ruby

我的项目中有一个模块，位于 lib/. 它的内容是这样的：

```
module Search
  module Score

    def get_score
      return 'something'
    end

  end    
end 
```

此搜索有许多不同的模块，我需要使用 Score。我意识到我需要在我的模型中添加 require （我正在尝试从模型中使用它）。所以这是我的代码（模型）：

```
require 'search'

class User < ActiveRecord::Base

  def get_user_score
    #tried this :
    p Search::Score.get_score #error
    #this as well
    score_instance = Score.new #error
    score = Search::Score.get_score # error undefined method `get_score'
  end

end 
```

那么如何重用我在其他类（模块）中的代码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:10:47.490

为了让它工作，你可以将模块混合到你的类中：

```
require 'search'

class User < ActiveRecord::Base
  include Search::Score

  def get_user_score
    p get_score # => "something"
  end
end 
```

或者您可以在模块中定义类似于类方法的方法：

```
module Search
  module Score
    def self.get_score
      return 'something'
    end
  end    
end 
```

如果你这样做，你可以`get_score`像预期的那样调用：

```
require 'search'

class User < ActiveRecord::Base
  def get_user_score
    p Search::Score.get_score # => "something"
  end
end 
```

有关Ruby 中模块的更深入解释，请参阅[本教程。](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:56:45.210

首先，请参阅“[在 Ruby on Rails 中重用控制器之间代码的最佳实践](https://stackoverflow.com/questions/128450/best-practices-for-reusing-code-between-controllers-in-ruby-on-rails)”。

关于将代码重用为模块，请查看“ [Rethinking code reuse with Modularity for Ruby](http://www.agileweboperations.com/rethinking-code-reuse-with-modularity-for-ruby) ”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:57:30.450

`Search::Score`是一个模块而不是一个类，所以`Score.new`不会工作。

您可以尝试将`get_score`函数的签名更改为`self.get_score`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:10:33.823

**“模块是残缺的类”**

模块就像 Ruby 中的残缺类。如果你查看继承链，你会发现一个类实际上是从模块继承的。

无法实例化模块。所以对 .new 的调用不起作用。

但是，您可以做的是将您的方法指定为“类”方法（我知道我说过它不是类...）

所以你会像这样在前面添加一个自我：

```
module Search
  module Score

    def self.get_score
      return 'something'
    end

  end    
end 
```

然后您可以将此方法作为类方法调用，就像您在代码示例中尝试的那样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-28T13:57:18.887

除了`def self.get_score`上面的答案，还有`extend self`，像这样：

```
module Search
  module Score
    extend self

    def get_score
      return 'something'
    end
  end    
end 
```

和`module_function`：

```
module Search
  module Score
    module_function

    def get_score
      return 'something'
    end
  end    
end 
```

后者实际上是 RuboCop [(source)](https://github.com/rubocop-hq/ruby-style-guide#module_function)中的首选方法，尽管在实践中我个人并没有经常看到它。

# java - 当某个物体向它移动时移动平面上的物体

> ID：15411211
> 
> 赞同：0
> 
> 时间：2013-03-14T13:52:06.070
> 
> 标签：java, math, geometry, distance

**我有一组星星（地点），它们与点P**的距离。我也可以移动点**P。**

现在我想根据与该点**P**的距离将这些星星放在图表上。使得距离小的恒星离**P点更近，它的直径比其他的大，距离大的恒星离****P**点远。

当**P**点向星星移动时，最近的星星会越来越大，然后移开，其他星星也会越来越近。所以我想首先以这样一种方式放置星星，即距离 P 点附近距离较小的星星比距离较大的星星更近，当我移动物体**P**时，这些点会随着直径的增加而靠近并远离。所以我怎么能实现它。

# android - Android HttpsUrlConnection eofexception

> ID：15411213
> 
> 赞同：40
> 
> 时间：2013-03-14T13:52:14.410
> 
> 标签：android, httpurlconnection, eofexception

我有一个问题，当我尝试读取任何输入时，我的 HttpsURLConnection 会抛出 EOFException。该代码适用于某些网络调用，但在其他网络调用上失败。如果我尝试从连接中读取任何内容，则会因上述错误而失败。

例子：

```
urlConnect.getResponseCode() // will throw error
urlConnect.getResponseMessage() // will throw error
BufferedInputStream in = new BufferedInputStream(urlConnect.getInputStream()); //will throw error 
```

这是每个的堆栈跟踪：

得到响应：

```
03-14 09:49:18.547: W/System.err(6270): java.io.EOFException
03-14 09:49:18.547: W/System.err(6270):     at libcore.io.Streams.readAsciiLine(Streams.java:203)
03-14 09:49:18.547: W/System.err(6270):     at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:573)
03-14 09:49:18.547: W/System.err(6270):     at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:821)
03-14 09:49:18.547: W/System.err(6270):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:283)
03-14 09:49:18.547: W/System.err(6270):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
03-14 09:49:18.547: W/System.err(6270):     at libcore.net.http.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:134) 
```

缓冲输入流：

```
03-14 09:39:14.077: W/System.err(5935): java.io.EOFException
03-14 09:39:14.077: W/System.err(5935):     at libcore.io.Streams.readAsciiLine(Streams.java:203)
03-14 09:39:14.077: W/System.err(5935):     at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:573)
03-14 09:39:14.077: W/System.err(5935):     at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:821)
03-14 09:39:14.077: W/System.err(5935):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:283)
03-14 09:50:46.547: W/System.err(6476):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
03-14 09:50:46.547: W/System.err(6476):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271) 
```

感谢您的任何帮助，

瑞克

**编辑** 我找到了答案：

这不是一个有据可查的答案。它出现在一些较新版本的 android 中，有一个回收 url 连接的错误。为了解决这个问题（尽管可能存在一些性能问题），我需要添加：

```
if (Build.VERSION.SDK != null
&& Build.VERSION.SDK_INT > 13) {
urlConnect.setRequestProperty("Connection", "close");
} 
```

谢谢！

瑞克

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-07-22T15:41:51.943

有人要求我回答我自己的问题而不是编辑。所以这里又是一个答案。

这不是一个有据可查的答案。它出现在一些较新版本的 android 中，有一个回收 url 连接的错误。为了解决这个问题（尽管可能存在一些性能问题），我需要添加：

```
if (Build.VERSION.SDK != null && Build.VERSION.SDK_INT > 13) {
    urlConnect.setRequestProperty("Connection", "close");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T16:34:03.167

您没有指定您的服务器，因此它可能是您自己实现的自定义服务器。根据 HTTP 规范，您的响应可能不太正确。

我的服务器使用的是 python SimpleHTTPServer，我错误地假设我需要做的就是表明成功如下：

```
self.send_response(200) 
```

这会发送初始响应标头行、服务器和日期标头，但会使流处于您也可以发送其他标头的状态。HTTP 需要在标头之后添加一个新行以指示它们已完成。当您尝试使用 HttpURLConnection 获取结果正文 InputStream 或响应代码等时，如果这条新行不存在，那么它会抛出 EOFException （这实际上是合理的，考虑一下）。一些 HTTP 客户端确实接受了简短的响应并报告了成功结果代码，这导致我可能不公平地指责 HttpURLConnection。

我更改了我的服务器来执行此操作（添加 Content-Length 以获得良好的衡量标准）：

```
self.send_response(200)
self.send_header("Content-Length", "0")
self.end_headers() 
```

该代码不再有 EOFException 。“连接：关闭”解决方案可能会在某些可能解决此问题的服务器上触发某些行为（例如，确保在关闭之前响应有效）但python SimpleHTTPServer 的情况并非如此，根本原因结果是我的错。

注意：Android pre-Froyo (2.2) 上存在一些与保持连接相关的错误，但我认为这个问题中没有足够的信息来声称新版本存在 Android 错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-30T09:35:16.967

首先，检查您的 URL 是否包含意外的换行符（'\n' 或 '\r\n'），如果有，在读取响应时会出现 EOFException。换行将中继 HTTP 包，服务器认为客户端有更多数据要发送，所以没有响应。每次读取响应的尝试都会立即获得 EOF。

确保您的请求有效后，请尝试其他人提供的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T02:38:18.747

我使用 NetHttpTransport ，`google-api-java-client`所以如何设置 RequestProperty 并不明显，我切换到使用 ApacheHttpTransport 并且问题消失了。

# android - 带有 ListView 的 MonoDroid AlertDialg

> ID：15411217
> 
> 赞同：0
> 
> 时间：2013-03-14T13:52:29.030
> 
> 标签：android, android-layout, xamarin.android, monotouch.dialog

我对 MonoDroid/Android 开发相当陌生，我想知道是否有人可以向我指出一个示例或解释我将如何使用自定义 ListView 创建一个 AlertDialog？

我需要一个带有图像的名称列表。我可以使用如下列表创建一个 AlertDialog：

```
List<string> sPeople = new List<string>();
for (int ndx = 0; ndx < od.PeopleAtLoc.Count; ndx++)
{
    ObjectPeople d = od.PeopleAtLoc[ndx];
    sPeople.Add (d.Name + "\n" + d.Type);
}
string[] stuff = sPeople.ToArray();

new AlertDialog.Builder(this)
    .SetTitle("Choose a Person:")
        .SetItems(stuff, (sender, args) => 
                  { 
            _bInDetails = true;
            Intent intent = new Intent(this, typeof(FindAPersonDetailActivity));
                                intent.PutExtra("PERSON_ID", od.PeopleAtLoc[(int)args.Which].ID);
                                intent.PutExtra ("PERSON_CITY", od.PeopleAtLoc[(int)args.Which].City);
            StartActivity(intent);
        })
        .Show(); 
```

但是我真的需要一个与每个项目相关联的图像，这就是为什么我希望我可以将 AlertDialog 与 ListView 一起使用。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:18:29.517

您可以将自定义`View`s添加到`Dialog`s。因此，您可以进行自定义`ListView` `Adapter`，使用 a 创建视图，对其进行`ListView`膨胀，将其添加到 并将其`Dialog`设置`Adapter`为您自己的。

```
var customView = LayoutInflater.Inflate (Resource.Layout.CustomDialogListView, null);
var listView = (ListView) customView.FindViewById(Resource.Id.ListView);
listView.Adapter = new MyListViewAdapter(stuff);

var builder = new AlertDialog.Builder(this);
builder.SetView(customView);
builder.SetPositiveButton(Resource.String.dialog_ok, OkClicked);
builder.SetNegativeButton(Resource.String.dialog_cancel, CancelClicked);

return builder.Create(); 
```

# android - 如何从列表中获取元素的索引

> ID：15411218
> 
> 赞同：0
> 
> 时间：2013-03-14T13:52:29.790
> 
> 标签：android

我的循环有问题。这是循环：

```
for(String element: listOfSBPData){
            date1 = (String) element.subSequence(0,2);
            date2 = (String) tvDateFrom.getText().subSequence(0,2);
            if(element.contains(tvDateFrom.getText())){
                for(int i = 0; i<7; i++)
                if(date1.contains(date2)){
                    listOfSBPDataToPlot.add(element);
                    listOfSBPToPlot.add(listOfSBP.get(element.//here I want to get id my element))
                }
            }   
        } 
```

`"element"`我在放置注释的代码中获取 Id 时遇到问题。我怎样才能得到这个元素的索引？我需要这个元素的索引，因为我有其他表并且我想获取具有相同索引的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:56:54.037

```
 int index =0;

for(String element: listOfSBPData){
        date1 = (String) element.subSequence(0,2);
        date2 = (String) tvDateFrom.getText().subSequence(0,2);
        if(element.contains(tvDateFrom.getText())){
            for(int i = 0; i<7; i++)
            if(date1.contains(date2)){
                listOfSBPDataToPlot.add(element);
                listOfSBPToPlot.add(listOfSBP.get(index));
            }
        }   
        index++;
} 
```

# java - Java 布尔值 |= 运算符

> ID：15411219
> 
> 赞同：27
> 
> 时间：2013-03-14T13:52:31.383
> 
> 标签：java, operators, specifications, boolean-expression, compound-assignment

最近我看到一个使用这个的代码：

```
boolean val = something();
val |= somethingElse(); 
```

有趣的部分是在布尔原始类型上创建的 |=（类似二进制）运算符。

令我惊讶的是 |= 存在于布尔值，就好像它是整数类型一样，并在 Java 规范中搜索了这个运算符，但找不到任何东西。

如果左值已经为真，我会很好奇是否评估右操作数。

有人可以指出我的Java规范吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-14T13:55:03.147

来自 JLS：

> [**15.26.2。复合赋值运算符**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)
> 
> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T) ((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。
> 
> [**15.22.2。布尔逻辑运算符`&`, `^`, 和`|`**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.2)
> 
> 当 a `&`, `^`, or`|`运算符的两个操作数都是`boolean`or`Boolean`类型时，按位运算符表达式的类型是`boolean`。在所有情况下，操作数都会根据需要进行拆箱转换（第 5.1.8 节）。
> 
> 对于`|`，如果两个操作数值都为假，则结果值为假；否则，结果为真。

这意味着

```
val |= somethingElse(); 
```

严格等价于

```
val = val | somethingElse(); 
```

（假设`somethingElse()`返回`boolean`或`Boolean`）。

> 如果左值已经为真，我会很好奇是否评估右操作数。

是的，它会被评估，因为`|`不会短路：

> [**15.7.2\. 操作前评估操作数**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.2)
> 
> Java 编程语言保证在执行操作本身的任何部分之前，运算符的每个操作数（条件运算符 、 和 除外`&&`）`||`似乎`? :`都已被完全评估。
> 
> [**15.24。条件或运算符`||`**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.24)
> 
> 因此，计算与on或操作数`||`相同的结果。它的不同之处仅在于右手操作数表达式是有条件地计算而不是总是计算。`|``boolean``Boolean`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T13:57:11.050

有关. [_](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.2) _ `|`有关. [_](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2) _ `|=`这些定义正是您的想法。

令我惊讶的是缺少`||=`操作员。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T13:54:10.663

按位逻辑运算符将具有与布尔值上的“普通”逻辑运算符相同的效果。

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22)15.22：

> 当 &、^ 或 | 的两个操作数 运算符的类型为 boolean 或 Boolean，则按位运算符表达式的类型为 boolean。在所有情况下，操作数都会根据需要进行拆箱转换（第 5.1.8 节）。
> 
> 对于 &，如果两个操作数值都为真，则结果值为真；否则，结果为假。
> 
> 对于 ^，如果操作数的值不同，则结果值为真；否则，结果为假。
> 
> 对于 |，如果两个操作数的值都为假，则结果值为假；否则，结果为真。

唯一真正的区别是按位运算符不能用于短路评估。

例如，此代码将抛出`NullPointerException`：

```
Boolean b1 = new Boolean(true);
Boolean b2 = null;
if (b1 || b2) {
    //no null pointer here;
}
if (b1 | b2) {
    //null pointer here;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T14:01:57.700

```
>>I'd be curious if right operand is evaluated if left value already is true. 
```

位运算符（如`|`, `&`, ..）在完成之前评估双方。

在某些情况下，逻辑运算符（如`&&`, `||`, ..）可以跳过第二部分的评估。这被称为`short-circuit`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T16:47:54.060

它不是二进制的，它是“或”逻辑语句的意思

```
 val |= {something else} 
```

与布尔表达式相同：

```
val == val or {something else} 
```

这是包容性的或（数学表达式和计算机科学中的常规或使用）

在某些编程语言中或被两个 || 标志和一些由一个| 其中之一是 SQL 和我所知道的 DTD JSON 等所有数据库语言。

# c# - 在 Win-RT 上暂停和恢复录音

> ID：15411220
> 
> 赞同：1
> 
> 时间：2013-03-14T13:52:33.227
> 
> 标签：c#, windows-8, windows-runtime

**谁能帮我在 WinRT 中编码以暂停和恢复录制音频文件。**

使用的类如下：

**IRamdomAccessStream** 用于将捕获的语音存储到随机流中。

**Windows.Media.Capture.MediaCapture** 用于捕获音频语音。

**Windows.Storage.StorageFile**用于存储文件。

请帮助我编写如何暂停流并再次恢复捕获的语音附加到现有流的代码。

等待4回复..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:26:54.823

不知道为什么这被否决了。看看[这个示例](http://code.msdn.microsoft.com/Media-Capture-Sample-adf87622)，它应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T08:13:34.943

上面链接的示例确实为如何在 WinRT 应用程序中处理音频/视频捕获提供了一个良好的开端。但是，示例中没有回答原始问题的场景：似乎确实没有支持 MediaCapture 中暂停的方法。唯一支持录制时暂停的商店应用程序，我可以看到它是[Microsoft 的 Windows 录音机](http://apps.microsoft.com/windows/en-us/app/9f03273f-fe0b-4ed8-9bc8-c2f256375490)。我假设 App 是用 C++ 编写的，并使用自定义接收器来记录音频，该音频还支持将数据附加到现有流。

# debugging - 为什么 IIS7 和 IIS8 Express 之间的身份验证行为不同

> ID：15411221
> 
> 赞同：1
> 
> 时间：2013-03-14T13:52:36.297
> 
> 标签：debugging, authentication, iis-7, iis-express

我有一个使用 VS2012 在 Windows 7 上运行的大部分为空的 MVC4 项目。在我的`web.config`我有一个配置我的身份验证模式的外部文件的引用。我已经尝试删除它并声明内联模式，但它会产生相同的结果。在`web.config`里面有这条线

```
<authentication configSource="Authentication.config" /> 
```

在`Authentication.config`文件中有这些行：

```
<authentication mode="Forms">
    <forms name=".AuthCookie" loginUrl="~/Account/LogOn" timeout="180" slidingExpiration="true" protection="All" path="/" />
</authentication> 
```

当我在 IIS7 中访问项目时，`/Account/LogOn`当我尝试通过 Visual Studio 2012 内置的 IIS8 Express 访问此项目时，我被正确重定向到此选项似乎被忽略了。

# r - R - 将递归代码转换为函数式编程

> ID：15411222
> 
> 赞同：1
> 
> 时间：2013-03-14T13:52:41.687
> 
> 标签：r, recursion, functional-programming, reduce, higher-order-functions

我想做一个有条件的cumsum。我原本以为我可以使用 Reduce 功能，但我不能。解释清楚：

```
a <- rep(1,5)
b <- rnorm(n=5,mean=0.5)
c <- rep(2,5)
d <- rep(0.5,5)

Reduce( '+', a, init=200 , accumulate=TRUE) 
```

结果是

```
[1] 200 201 202 203 204 205 
```

这就像一个简单的cumsum。但我真正想要的是一个有条件的cumsum：

递归定义为：

```
 x0 = 200
 index = 0

 function (x) {
   index = index + 1
   if( x is between 200 and 202 ) return x + a[index]
   else if(x is between 202 and 204) return x + b[index]
   else if(x is between 204 and 206) return x + c[index]
   else return x + d[index]

 } 
```

预期的结果可能是这样的（当然，由于随机性，它永远不会相同。

```
 [1] 200 201 202.3 203.8 204.1 205 
```

对于那些感兴趣的人，可以在这里找到答案： [将简单递归关系转换为函数式程序](https://stackoverflow.com/questions/15506060/convert-simple-recursive-relation-to-functional-program)

我似乎找不到将这个问题标记为*已关闭*的方法，因为版主不断删除我添加的任何内容，而没有提出适当的关闭方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:18:23.960

我认为你不需要`Reduce`这里。这是一个解释用例的示例`Reduce`：

```
 Reduce(paste,list(1:3,letters[1:3],LETTERS[1:3]))
[1] "1 a A" "2 b B" "3 c C" 
```

我认为您尝试使用 xan 完成的操作`ifelse`是矢量化的。例如，从初始值开始的 a 和 b 的条件立方和。

```
a <- rep(1,5)
b <- rep(0.01,5)
init <- 200
x <- seq_along(a)
cumsum(c(init,ifelse( x %% 2 ,a[x],  b[x])))
[1] 200.00 201.00 201.01 202.01 202.02 203.02 
```

当然，如果您有多种情况：

*   使用多个条件：`x %% 2 & x^2 < 5`
*   使用嵌套`ifelse`：`ifelse( x %% 2 ,ifelse(x^2 <2, a[x], b[x]),1)`

# c# - EF Code First Fluent API 定义唯一约束

> ID：15411224
> 
> 赞同：5
> 
> 时间：2013-03-14T13:52:43.363
> 
> 标签：c#, entity-framework, entity-framework-5, ef-fluent-api

我试图首先使用流利的代码配置来强制执行列的唯一约束。有没有比在业务逻辑中实现它或使用类似下面的方法更好的方法

```
context.ObjectContext.ExecuteStoreCommand("CREATE UNIQUE CONSTRAINT..."); 
```

或者我想知道是否不可能使用流畅的配置来实现独特的约束？

编辑 ：

已确认这对于流畅的配置是不可能的。但话又说回来，我想知道最好的方法是什么？并且想知道 EF 不支持这一点的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T09:28:49.243

在此示例中，您可以看到如何定义唯一键属性并在任何实体中使用它。

> [http://code.msdn.microsoft.com/windowsdesktop/CSASPNETUniqueConstraintInE-d357224a](http://code.msdn.microsoft.com/windowsdesktop/CSASPNETUniqueConstraintInE-d357224a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:12:33.497

我之前也出现过这个问题

它无法使用 fluent API 实现唯一约束。</p>

所以，你使用的方式是正确的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T19:16:51.083

这可以通过 DbMigrations...

```
public override void Up()
{
    CreateIndex("dbo.MyTableName", "MyColumnName", unique: true); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-11T04:59:50.867

可以使用自定义扩展方法来完成：

```
using System.ComponentModel.DataAnnotations.Schema;
using System.Data.Entity.Infrastructure.Annotations;
using System.Data.Entity.ModelConfiguration.Configuration;

internal static class TypeConfigurationExtensions
{
    public static PrimitivePropertyConfiguration HasUniqueIndexAnnotation(
        this PrimitivePropertyConfiguration property, 
        string indexName,
        int columnOrder = 0)
    {
        var indexAttribute = new IndexAttribute(indexName, columnOrder) { IsUnique = true };
        var indexAnnotation = new IndexAnnotation(indexAttribute);

        return property.HasColumnAnnotation("Index", indexAnnotation);
    }
} 
```

在此处查看完整答案：[https ://stackoverflow.com/a/25779348/111438](https://stackoverflow.com/a/25779348/111438)

# merge - 在 SPSS 中使用 Table 或 In 匹配文件

> ID：15411225
> 
> 赞同：0
> 
> 时间：2013-03-14T13:52:43.867
> 
> 标签：merge, spss

尝试将一个 spss 文件的变量添加到另一个文件时，我一直遇到错误。文件 1 有 1.800.000 个案例 [付款]，文件 2 有 800.000 个案例 [收件人]。他们都有一个 ID 号来匹配案件。

对于文件 1 中的每一笔付款，我想从文件 2 中添加收件人。因此，收件人应该能够匹配多笔付款。

这是我一直在尝试的两个代码，它们不起作用：

### 使用 IN 的代码

```
 DATASET ACTIVATE DataSet1\. 
      SORT CASES BY recipientid(A).
      DATASET ACTIVATE DataSet2\. 
      SORT CASES BY recipientid(A).

      Match Files /File=DataSet1
      /In=DataSet2
      /BY globalrecipientid.
      execute 
```

当我使用 /In 时，我没有收到任何错误，但文件与 sin 不正确匹配，它不会添加任何变量。

### 使用 TABLE 的代码

```
 DATASET ACTIVATE DataSet1\. 
      SORT CASES BY recipientid(A).
      DATASET ACTIVATE DataSet2\. 
      SORT CASES BY recipientid(A).

      Match Files /File=DataSet1
      /TABLE=DataSet2
      /BY globalrecipientid.
      execute 
```

当我使用 /TABLE 时，出现以下错误：

*警告 #5132 未定义错误 #5132 - 无法打开文本文件 'S:\Progra~1\spss\IBM\SPSS\STATIS~1\20\lang\en\spss.err"：没有这样的文件或目录*

我已经用完了技巧，不敢在 Ruby 中尝试这个，遗憾的是，excel 太小而无法处理这个.. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:00:05.533

您的第一个解决方案是错误的，因为您`IN`错误地使用了子命令。换句话说，您将 Dataset1 与任何内容匹配。

> IN 在结果文件中创建一个新变量，该变量指示案例是否来自前面 FILE 子命令中命名的输入文件。

你的第二个解决方案。您正在按变量对数据集进行排序，`recipientid`但由变量`match files`完成`globalrecipientid`。为什么您按一个变量排序但按另一个变量匹配？这可能是个问题。数据集名称应该用引号引起来。

解决方案1：

```
DATASET ACTIVATE DataSet1\. 
SORT CASES BY recipientid (A).

DATASET ACTIVATE DataSet2\. 
SORT CASES BY recipientid (A).

Match Files
 /File = "DataSet1"
 /TABLE = "DataSet2" 
 /BY recipientid.

execute. 
```

解决方案 2\. 我从不喜欢 SPSS 中数据集的实现。我不信任他们。其他解决方案是将数据集保存为文件并进行文件匹配。

```
get "file1.sav".
SORT CASES BY recipientid (A).
save out "file1s.sav".

get "file2.sav".
SORT CASES BY recipientid (A).
save out "file2s.sav".

Match Files
 /File = "file1s.sav"
 /TABLE = "file2s.sav"
 /BY recipientid.

execute. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:02:00.513

我的语法看起来有些不同：

数据集激活数据集 1。匹配文件 /FILE=* /FILE='DatenSet2' /RENAME VarsToRename /BY ID /DROP= Vars EXECUTE。

也许这有帮助？

# c# - 在 WPF 中绑定一个 char[]

> ID：15411230
> 
> 赞同：0
> 
> 时间：2013-03-14T13:52:57.627
> 
> 标签：c#, wpf, binding, char

我有一个 char[] 属性。我想绑定它，但我显示“system.char[]”而不是 char[] 值。

**这是我的 XAML：**

```
<DataGridTextColumn Binding="{ Binding Path= strEvtNumero}" Header="  N° évènement   " Width="Auto" IsReadOnly="True"  /> 
```

**这是我的财产：**

```
public char[] strEvtNumero
    {
        get { return m_strEvtNumero; }
        set
        {
            m_strEvtNumero = value;
            FirePropertyChangedEvent("strEvtNumero");
        }
    } 
```

请问你有什么想法吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:55:11.270

您可以创建一个[值转换器](http://wpftutorial.net/ValueConverters.html)来显示正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:56:31.340

您可以将其包装到另一个属性中

```
 string strEvtNumeroString
    {
        get
        {
            return strEvtNumero.ToString();
        }
        set
        {
            strEvtNumero = value.ToArray();
        }
    } 
```

或使用价值转换器

# windows-8 - 将鼠标移动完全复制到触摸事件中

> ID：15411238
> 
> 赞同：0
> 
> 时间：2013-03-14T13:53:31.993
> 
> 标签：windows-8, touch, tablet, pixelsense, wpf-4.0

我最近购买了 Acer Iconia W510。所有的触摸事件都可以正常工作，单指单击、双击等。我有一个在触摸表上运行的 Windows 应用程序（WPF 4）（运行 Windows 7，使用 pixelense 2.0 开发）。我知道与 Windows 8 没有直接兼容性。该应用程序有几个按钮和一个地图，您可以在其中平移。还有一些可点击的按钮。所有这些功能都可以使用鼠标（左键单击），但不能使用触摸事件。有没有办法/黑客将鼠标移动复制到触摸事件？这样我就可以使用触摸来平移。

谢谢！

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:03:32.537

最简单的方法是重新编译应用程序并将所有内容放在 System.Windows 窗口中，而不是 SurfaceWindow。

稍微复杂一点的解决方案是将所有内容放在 UserControl 中，并在 SurfaceWindow 旁边添加一个 System.Windows Window。然后在 App.xaml.cs 的 OnStartUp 事件中添加如下内容：

```
if (Microsoft.Surface.SurfaceEnvironment.IsSurfaceEnvironmentAvailable)
                StartupUri = new Uri("SurfaceWindow.xaml", UriKind.RelativeOrAbsolute);
            else
                StartupUri = new Uri("PlainWindow.xaml", UriKind.RelativeOrAbsolute); 
```

我在网上某个地方找到了这个，不幸的是不记得出处了，但对我来说它就像一个魅力。

# sql - 如何在sql中将两行合并为一行？

> ID：15411239
> 
> 赞同：15
> 
> 时间：2013-03-14T13:53:35.763
> 
> 标签：sql, pivot

我有一张桌子

```
EmployeeID    IndividualPay  FamilyPay   IsActive
    1            200          300        true
    1            100          150        false 
```

但我希望输出如下（我想使用此输出与其他表进行内部连接）

```
EmployeeID  IndPay_IsActive  IndPay_IsNotActive FamilyPay_IsActive   FamilyPay_IsNotActive 
    1            200                 100              300                   150 
```

我已经研究过`PIVOT`，但不确定如何在我的情况下使用它。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-14T13:58:30.387

这种类型的转换称为*枢轴*。`CASE`您没有指定您使用的数据库，但您可以在任何系统中使用带有表达式的聚合函数：

```
select employeeid,
  max(case when IsActive = 'true' then IndividualPay end) IndPay_IsActive,
  max(case when IsActive = 'false' then IndividualPay end) IndPay_IsNotActive,
  max(case when IsActive = 'true' then FamilyPay end) FamilyPay_IsActive,
  max(case when IsActive = 'false' then FamilyPay end) FamilyPay_IsNotActive
from yourtable
group by employeeid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d4398/1)

根据您的数据库，如果您可以访问`PIVOT`和`UNPIVOT`函数，则可以使用它们来获取结果。该`UNPIVOT`函数将`IndividualPay`和`FamilyPay`列转换为行。完成后，您可以使用以下函数创建四个新列`PIVOT`：

```
select *
from
(
  select employeeid,
    case when isactive = 'true'
      then col+'_IsActive'
      else col+'_IsNotActive' end col, 
    value
  from yourtable
  unpivot
  (
    value
    for col in (IndividualPay, FamilyPay)
  ) unpiv
) src
pivot
(
  max(value)
  for col in (IndividualPay_IsActive, IndividualPay_IsNotActive,
              FamilyPay_IsActive, FamilyPay_IsNotActive)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d4398/6)。

两者都给出相同的结果：

```
| EMPLOYEEID | INDIVIDUALPAY_ISACTIVE | INDIVIDUALPAY_ISNOTACTIVE | FAMILYPAY_ISACTIVE | FAMILYPAY_ISNOTACTIVE |
----------------------------------------------------------------------------------------------------------------
|          1 |                    200 |                       100 |                300 |                   150 | 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:11:14.947

```
Select
    EmployeeID,
    Active.IndividualPay As IndPay_IsActive,
    Active.FamilyPay As FamilyPay_IsActive,
    Inactive.IndividualPay As IndPay_IsNotActive,
    Inactive.FamilyPay As FamilyPay_IsNotActive
From
    PayTable Active
    Join PayTable Inactive On Active.EmployeeID = Inactive.EmployeeId
        And Inactive.IsActive = 'false'
Where
    Active.IsActive = 'true' 
```

# android - 带有和不带有 SyncAdapter 的应用程序的自动更新

> ID：15411240
> 
> 赞同：0
> 
> 时间：2013-03-14T13:53:45.147
> 
> 标签：android, android-service, updates, android-alarms, android-syncadapter

我有一个非常常见的问题，但无法找到合适的解决方案/模式来解决它。我的应用程序有两种需要自动更新的数据：

*   一般数据
*   用户相关数据

如果用户未登录，则仅下载并显示一般数据，如果用户已登录，则也处理他/她的数据。

我需要定期从 Web 服务下载这些数据，**从设备启动开始**（在`android.intent.action.BOOT_COMPLETED`触发操作之后）。由于我的应用程序可以移动到 SD，因此我还需要注册该`android.intent.action.EXTERNAL_APPLICATIONS_AVAILABLE`操作。

**问题 1**：从 API 级别 11 (Honeycomb) 开始，[所有操作都不会发送到处于停止状态的应用程序](https://code.google.com/p/android/issues/detail?id=18225)。我不太明白这一点，这是否意味着如果我的应用程序刚刚安装并且从未打开过（所以如果我们计算更新只有一次），它就无法监听操作？或者这是否意味着，**每次系统重新启动后**，只有在应用程序启动时才会触发该操作？

**问题2**：如果应用程序已经移到SD，`SyncAdapter`s将无法运行，所以我必须依靠一般的`BroadcastReceiver`- `Service`- `Alarm`-`PendingIntent`策略。但是我怎么知道`SyncAdapter`系统不会启动呢？（我已经处理`Account`了 s `AccountManager`）

你知道有什么图书馆可以处理所有这些吗？这似乎很奇怪，这不是一个普遍的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:03:27.583

回复：**问题 1**，据我所知，一个应用程序在用户第一次明确运行它之前是不“活跃的”。除非用户使用Android 应用程序管理设置中的*强制停止*按钮明确停止它，否则它仍然会“活着”直到日子结束。然后，他必须手动重新运行该应用程序才能接收广播和内容。

# mysql - 这个 MySQL 索引会提高性能吗？

> ID：15411242
> 
> 赞同：0
> 
> 时间：2013-03-14T13:53:52.153
> 
> 标签：mysql, performance, select, indexing

我有以下 MySQL 表：

```
CREATE TABLE `my_data` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tstamp` int(10) unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我只想优化以下`SELECT`查询：

```
SELECT `id`, `name` FROM `my_data` ORDER BY `name` ASC 
```

无论表的大小如何，添加以下索引都会提高性能吗？

```
CREATE INDEX `idx_name_id` ON `my_data` (`name`,`id`); 
```

一个`EXPLAIN`查询表明它会，但我没有快速测试大型数据集的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:56:27.543

**当您在**where 子句中使用列时，或者当列是****两个表之间链接**的条件的一部分时，**索引**很有用。[见 MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:57:42.183

是的。即使您仍在进行全表扫描，拥有索引也会使排序操作（由于排序依据）变得不必要。

但它也会增加插入和删除语句的开销！**

# javascript - 在同一帧中打开一个 URL + 元素值

> ID：15411246
> 
> 赞同：0
> 
> 时间：2013-03-14T13:54:01.447
> 
> 标签：javascript, url, button, onclick

我有这个代码：

```
<form>
   <input type="text" placeholder="Enter something..." id="box">
   <button onclick="window.open('http://example.com/' + document.getElementById('box').value);">GO
   </button>
</form> 
```

当用户输入一个单词并单击“GO”时，他会转到一个 url+ 输入的值。使用此代码，页面在新窗口中打开，但我想在同一框架中打开它。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:55:17.253

```
window.open ('page2.htm','_self',false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:02:19.447

尝试以下

```
window.open('http://example.com/' + document.getElementById('box').value,'_self') 
```

所以你的代码会是这样的

```
<form>
   <input type="text" placeholder="Enter something..." id="box">
   <button onclick="window.open('http://example.com/' + document.getElementById('box').value, '_self');">GO
   </button>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:55:32.073

您可以使用 javascript。

> window.location = 网址 + 文本；

# asp.net - 如何在 asp.net 中创建可编辑的 pdf？

> ID：15411251
> 
> 赞同：0
> 
> 时间：2013-03-14T13:54:18.467
> 
> 标签：asp.net, pdf, itextsharp, abcpdf

这是我的项目中关于 pdf 的不同类型的要求。

我想生成一个预填充值很少的 pdf。其余字段可由用户填写，因此 Pdf 应允许用户编辑 pdf，以便他可以将其保存在本地系统上。

pdf 可能包含复选框和文本框。

我曾使用过“itextsharp”、“abc pdf”和“Rad Pdf”。

为此，由于项目所有者的一些限制，我不能使用“Rad Pdf”。请分享您的宝贵答案，为我提供完成此任务的正确方法。

期待您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:37:36.503

Acrobat Reader XI 提供开箱即用的保存电子表格的功能。

如果您的客户使用此版本的 Acrobat，他们将能够填写和保存标准 PDF 表单。

您可能遇到的唯一问题与没有此功能的旧版本 Acrobat Reader 有关。

因此，只要您的客户拥有最新版本的 Acrobat Reader，使用 ABCpdf 或任何 PDF 库生成的任何 eForm 都应该按照您希望的方式工作。

ABCpdf 包含一个名为“Annotations”的示例项目，它展示了如何以这种方式创建电子表格。

我的回复可能包含基于 ABCpdf .NET 的概念，因为这是我的工作。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:10:45.190

您需要使用 Adob​​e Professional，只需单击几下，即可将现有的电子或纸质表格变成可填写的表格。

[http://adobe.ly/Ydc7qb](http://adobe.ly/Ydc7qb)

# python - 在我的“高分”python 程序中，比较运算符会引发错误，但只是有时

> ID：15411252
> 
> 赞同：2
> 
> 时间：2013-03-14T13:54:19.190
> 
> 标签：python, python-3.x

该问题是指以下python程序-

```
# High Scores
# Maintains a list of the five highest scores and the players responsible.

hiscores = [56,45,23,11]
again = "a"

def findplace(xlist, x):
    # list is in descending order
    for j in range(len(xlist)-1):
        if x >= xlist[j]:
            xlist.insert(j, x)
            return xlist

while again:
    print("\n", hiscores)
    score = int(input("\nEnter a score (zero to exit): "))
    if score >= hiscores[3]:
        hiscores = findplace(hiscores, score)
    elif score == 0:
        again = ""

print(hiscores)
input("\nETE") 
```

该程序从用户那里获取分数，如果它们足够高，则将它们添加到列表中。我想通过将 while 循环第三行的索引值设置为 3 来将入门级别设置为最低分数，但这会引发错误。0、1 和 2 完美运行！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:20:05.020

我无法用“入门级”分数重现您的问题。但是，由于您的列表无论如何只有五个元素，您可以通过完全放弃入门级检查来使事情变得更容易。

```
while True:
    print("\n", hiscores)
    score = int(input("\nEnter a score (zero to exit): "))
    if score == 0:
        break
    hiscores = findplace(hiscores, score) 
```

另请注意，您的`findplace`方法会将高分列表扩展到五个以上的条目，并且`None`如果分数不在第一个`len-1`条目中，它可以返回。相反，您可以只添加新分数，以相反的顺序对列表进行排序，然后取前五个元素。

```
def findplace(xlist, x):
    return sorted(xlist + [x], reverse=True)[:5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:22:07.293

问题是`findplace`仅在分数为高分时才返回新列表。如果您输入`11`未插入的 ，则它不会命中`return`语句（因此返回`None`）。由于您设置`highscores = findplace(hiscores, score)`，您实际上将您的列表设置为`None`，导致`TypeError`.

移动到与 in 中的循环`return xlist`相同的级别修复此错误（但会在您的函数中显示逻辑错误，我将留给您发现）。`for``findplace``findplace`

# html -   与空白：nowrap

> ID：15411260
> 
> 赞同：9
> 
> 时间：2013-03-14T13:54:31.740
> 
> 标签：html, whitespace, space, nowrap

我会承认，`&nbsp;`当我不想让它们中断时（例如表头），我有在单词之间使用的习惯。

我真的应该用 来设计我的元素`white-space:nowrap`吗？如果我唯一要做的就是不让文字包装，是否有任何优点/缺点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T14:01:48.230

在某些情况下，不间断空间无济于事：

*   该词包含一个连字符（例如*web-developer*）；
*   [`hyphens: auto`](https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens)用于容器元素自动进行断字。

在这些情况下，`white-space: nowrap`很有用。此外，无论样式是否应用于文档，不间断空格都有效，而 CSS 规则仅在启用样式时有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-17T04:48:42.583

`white-space:nowrap`有几个优点

1.  它可以全局应用于所有匹配的文本元素。如果您将它放在一个类中或将其应用于所有跨度，那么您不需要`&nbsp;`在所有文件中添加/删除。
2.  与拥有一堆 html 实体相比，它使 html 更易于阅读。它还允许将您的源代码包装到下一行而不会弄乱任何东西（`&nbsp;`行尾的 a 呈现为 2 个空格）。
3.  它可以应用于难以/不可能用 . 替换空格的元素`&nbsp;`。例如，在反应中`<span style={{whiteSpace: 'nowrap'}}>{myValue}</span>`工作正常，无需编辑值。这对于反应特别有用，因为它会转义任何 html 实体（并且使用 unicode 非中断空间非常不适合人类阅读）。
4.  它可用于没有空格但有连字符的文本。`white-space:nowrap`也胜过`hyphens: auto`, `overflow-wrap: anywhere`，`word-break: break-word`虽然你不应该有矛盾的风格。
5.  是否自动换行是在样式而不是文档结构的范围内，因此`white-space:nowrap`比`&nbsp;`CSS 优先于`<b>`.

# javascript - javascript中的多个正则表达式匹配

> ID：15411261
> 
> 赞同：0
> 
> 时间：2013-03-14T13:54:32.133
> 
> 标签：javascript, regex

```
document.querySelectorAll("table[id^='Table']"); 
```

此代码选择 id 的所有表`Table`。但我想选择 id 为`Table2 OR Table7`（或任何其他数字）的表。如何用正则表达式做到这一点？

编辑：jQuery 不适用于我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:04:08.640

```
function getTables(tableNumbers) { // Usage: getTables([2, 7]) will return the tables with the ID 'Table2' and 'Table7'. (You can add more numbers; [2,7,3,6])
    var allTables = document.querySelectorAll("table[id^='Table']");
    var tablesWeWant = [];
    for (var i = 0; i < allTables.length; i++) {
        if (allTables[i].id.match(/Table[0-9]/)) {
            tablesWeWant.push(allTables[i]);
        }
    }
    for (var i = 0; i < tablesWeWant.length; i++) {
        if (!tableNumbers.contains(tablesWeWant[i].id.substr(id.length - 1))) {
            tableNumbers.splice(i, 1);
        }
    }
    return tablesWeWant;
} 
```

这应该返回 ID 与正则表达式匹配`/Table[0-9]/`并以变量中包含的数字结尾的所有表`tableNumbders`。

免责声明：我不是正则表达式专家。

**编辑：**
经过几次编辑，上面的代码变得有点太长了，所以我改写成这样：

```
function getTables(tableNumbers) {
    var tablesWeWant = [];
    for (var i = 0; i < tableNumbers.length; i++) {
        tablesWeWant.push(document.querySelector("#Table" + tableNumbers[i]));
    }
    return tablesWeWant;
} 
```

第二种方法有效：http: [//jsfiddle.net/qQ7VT/1/](http://jsfiddle.net/qQ7VT/1/)

# php - 如何在 php 中为 css 缩小编写更好的正则表达式？

> ID：15411263
> 
> 赞同：0
> 
> 时间：2013-03-14T13:54:48.810
> 
> 标签：php, css, regex, minify

## 我有的

我在 php 中有以下正则表达式，可以缩小原始 css 字符串：

```
function compress( $css ) {
    $css = str_replace('; ',';', $css);
    $css = str_replace(': ',':', $css);
    $css = str_replace(', ',',', $css);

    $css = str_replace(' }','}', $css);
    $css = str_replace('} ','}', $css);

    $css = str_replace('{ ','{', $css);
    $css = str_replace(' {','{', $css);

    $css = str_replace('( ','(', $css);
    $css = str_replace(' (','(', $css);

    $css = str_replace(' )',')', $css);
    $css = str_replace(') ',')', $css);

    $css = str_replace(array("\r\n","\r","\n","\t",'  ','    ','    '),"",preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!','',$css));

    return $css;
} 
```

这有效，但代码很糟糕。

## 问题

有人知道写这个的更好方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:59:14.267

我已经经历了很多次，目前我有一个运行良好的实现。

```
// comments
$string = preg_replace('!/\*.*?\*/!s','', $string);
$string = preg_replace('/\n\s*\n/',"\n", $string);

// space
$string = preg_replace('/[\n\r \t]/',' ', $string);
$string = preg_replace('/ +/',' ', $string);
$string = preg_replace('/ ?([,:;{}]) ?/','$1',$string);

// trailing;
$string = preg_replace('/;}/','}',$string); 
```

我将此实现为 Twig 过滤器：[https ://github.com/catchamonkey/CatchamonkeyAsseticFilterBundle](https://github.com/catchamonkey/CatchamonkeyAsseticFilterBundle)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T13:58:28.910

如何更改此代码：

```
...
$css = str_replace('; ',';', $css);
$css = str_replace(': ',':', $css);
$css = str_replace(', ',',', $css);

$css = str_replace(' }','}', $css);
$css = str_replace('} ','}', $css);

$css = str_replace('{ ','{', $css);
$css = str_replace(' {','{', $css);
... 
```

对此：

```
$css = str_replace(array('; ',': ',', ',...),array(';',':',',',...),$css); 
```

还可以考虑使用现有的库进行 CSS 缩小。有很多东西可以缩小。例如：`margin:0 0 0 0;`可以变成`margin:0;`等等……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T13:58:48.767

我将它用于css：

```
//Minify CSS code:
function minifyCSS($sCss) {
    // Compress whitespace.
    $sCss = preg_replace('/\s+/', ' ', $sCss);
    // Remove comments.
    $sCss = preg_replace('/\/\*.*?\*\//', '', $sCss);

    return trim($sCss);
} 
```

# php - 用于 xlsx 的 phpexcel 千位分隔符

> ID：15411265
> 
> 赞同：4
> 
> 时间：2013-03-14T13:55:01.850
> 
> 标签：php, excel

我在用着

```
\PHPExcel_Shared_String::setThousandsSeparator(','); 
```

为 Excel 文件定义千位分隔符。多亏了它，一个单元格显示为`55 452`而不是`55452`. 尽管如此，单元格值是一个整数 55452，因此可以计算，在图表中使用等。

是否有类似的方法来定义百万分隔符等（例如，每 3 位定义一个分隔符）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T08:35:12.230

您需要定义这样的数字格式 "#,#0.##;[Red]-#,#0.##"

```
$workbook = new Spreadsheet_Excel_Writer('example.xls');
$worksheet =& $workbook->addWorksheet("example_sheet_name");
$format =& $workbook->addFormat();
$format->setNumformat('#,#0.##;[Red]-#,#0.##');

$worksheet->writeNumber(1, 1, '100000',$format);

output : 100.000,00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:09:07.480

千位分隔符将用于数百万、数十亿等；据我所知，Excel 不直接支持每个倍数的不同分隔符

但是，您可以定义以下数字格式掩码：

```
#:###!###,##0.00 
```

它可能会在 MS Excel 本身中工作，尽管 PHPExcel 不会正确格式化值

# android - 在代码中设置 ScollView 大小（高度）（所有控件高度之和）

> ID：15411267
> 
> 赞同：0
> 
> 时间：2013-03-14T13:55:02.320
> 
> 标签：android, height, xamarin.android, scrollview

我想动态设置每个代码的**ScrollView的****高度**，因为我的 ScrollView 实际上比它应该高（底部的空白）。

 **我的想法是，我可以获得 ScrollView 中所有控件的高度，总结它们，然后我可以将该高度设置为我的 ScrollView。

我尝试的是以下代码：

```
protected override void OnStart()
{
    base.OnStart();
    SetScrollViewSize();
}

private void SetScrollViewSize()
{
    var root = FindViewById<ScrollView>(Resource.Id.root);
    if (root != null)
    {
        var controls = GetSelfAndChildrenRecursive(root); //Gives me all Controls in the root (The ScrollView)
        int heightOfAllControlsTogether = 0;
        foreach (ViewGroup control in controls)
        {
            heightOfAllControlsTogether += control.Height;
        }
        ViewGroup.LayoutParams parameters = new ViewGroup.LayoutParams(root.Width, heightOfAllControlsTogether);
        root.LayoutParameters = parameters;
    }
} 
```

Heights 和 MeasuredHeights 始终为 0（零） - （我知道它需要先渲染，但那会是正确的位置吗？）我什至不确定我的方法是否可行。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:04:45.347

好吧，我发现了原因。

背景图形太高了。那是在底部创建空白空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T07:53:51.407

这是一个基于子项总高度设置滚动视图高度的示例：

私人无效 setScrollViewHeightBasedOnChildren() {

```
int size = layoutRoot.getChildCount();
LinearLayout item = (LinearLayout) layoutRoot.getChildAt(0);
item.measure(0, 0);
int height = item.getMeasuredHeight();
//Reset size of ScrollView
scroll.setMinimumHeight(height / size);
scroll.invalidate();
} 
```

查看详情：[设置 ScrollView 的高度等于子项的总高度](http://thinkandroidsimple.blogspot.com/2014/01/set-height-scrollView-based-on-children.html)**

# python - 金字塔：会话是否必须是字典

> ID：15411270
> 
> 赞同：0
> 
> 时间：2013-03-14T13:55:15.547
> 
> 标签：python, session, pyramid

我正在尝试在 Pyramid 中实现我自己的会话工厂。我见过的所有会话工厂示例（烧杯、redis 等）都将其实现为以下子类`dict`：

```
request.session['key'] = 'value' 
```

我想实现一个非常简单的会话接口：

```
request.session.set('key', 'value')
request.session.get
request.session.delete 
```

这个可以吗？这是否会影响 Pyramid 的任何内部方法无法正常运行？是否有任何 Pyramid 子系统依赖于类似 dict 的会话？

编辑：

默认值[`SessionAuthenticationPolicy`](https://github.com/Pylons/pyramid/blob/master/pyramid/authentication.py)确实取决于会话字典

```
def remember(self, ...):
    ...
    request.session[self.userid_key] = principal 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:37:30.070

到目前为止，您所看到的东西都符合 Pyramid 的`ISession`界面。如果您希望任意包能够访问您的会话（例如`SessionAuthenticationPolicy`），您必须提供符合这些包期望的接口的会话实现。

这就是 Pyramid 期望有效运作的。话虽如此，实际上很少有软件包需要有效的会话，所以你通常可以做任何你想做的事（直到你不能:)。如果您想在原始界面之上提供其他方法供您的应用程序使用，那完全可以。

[http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/interfaces.html?highlight=isession#pyramid.interfaces.ISession](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/interfaces.html?highlight=isession#pyramid.interfaces.ISession)

# ruby - 查找倍数的脚本返回“unexpected $end”

> ID：15411275
> 
> 赞同：0
> 
> 时间：2013-03-14T13:55:25.253
> 
> 标签：ruby

有谁知道为什么这个脚本不起作用？

```
def multiples_three (n)
    i=1
    while i<n
        if i%3==0
            print "#{i}"
            i=i+1
        elsif
            i=i+1
end 
```

它返回：

```
syntax error, unexpected $end, expecting keyword_end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:57:40.280

看起来你在那里错过了几个“结束”。

```
def multiples_three (n)
    i=1
    while i<n
        if i%3==0
            print "#{i}"
            i=i+1
        elsif
            i=i+1
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T13:57:16.847

您缺少两个“结束”语句。

一个用于“如果”

另一个“暂时”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T13:57:26.467

你错过了一个结局

```
def multiples_three (n)
    i=1
    while i<n
        if i%3==0
            print "#{i}"
            i=i+1
        elsif
            i=i+1
        end #<--- needed
    end #<--- also needed
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T15:08:24.070

正如其他人所说，你错过了一些结局......而且没有条件的赤裸裸的 elsif 让我烦恼；如果您实际上并没有测试某些东西，则需要一个 else。

至于样式，您应该在 ruby​​ 中使用两个空格：

```
def multiples_three(n)
  i=1
  while i<n
    if i % 3 == 0
      print i  # no need to put in string and interpolate if it is by itself
      i=i+1
    else
      i=i+1
    end
  end
end 
```

但更红宝石的方式来做到这一点，对我们来说是迭代器，范围，并返回一个数组值，而不是直接从函数打印：

```
def multiples_three(n)
  (1..n).select{|i| i % 3==0 }
end

puts multiples_three(12).join("\n")
3
6
9
12
=> nil 
```

事实上，ruby 让这一切变得如此简单，我什至不会编写那个函数。

# android - 如何使舞台兼容多种屏幕尺寸 Kineticjs

> ID：15411278
> 
> 赞同：1
> 
> 时间：2013-03-14T13:55:36.613
> 
> 标签：android, webkit, kineticjs

在java中，我会将屏幕尺寸设置为320x480，我只需要处理静态像素尺寸，而不是在需要时拉伸它以适应屏幕。这让我的工作变得轻松。但是对于 Kineticjs，我遇到了屏幕尺寸的问题。如果我这样做

```
var stage = new Kinetic.Stage({
container: 'container',
width: window.innerWidth,
height: window.innerHeight
}); 
```

比我不能使用静态像素进行绘图。还尝试设置静态舞台大小：

```
var stage = new Kinetic.Stage({
container: 'container',
width: 480,
height: 320
}); 
```

然后拉伸它：

```
document.addEventListener("deviceready", function(){
stage.setHeight( window.innerHeight);
stage.setWidth(window.innerWidth);
}, false); 
```

没用。

使用 KineticJS 在 android 手机上支持多种屏幕尺寸的方法是什么？

# c# - 从 C# 调用本机 Delphi 代码

> ID：15411280
> 
> 赞同：0
> 
> 时间：2013-03-14T13:55:39.473
> 
> 标签：c#, delphi, com, native-code, managed-code

是否有从 C# (ASP.NET) 调用本机 C++ 或 Delphi Dlls 的最佳实践？调用或 COM 互操作是访问这些 Dll 的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:57:42.717

您可以使用 DllImport 来实现您的目标，如下所示：

```
[DllImport("kernel32.dll")]
public static extern IntPtr OpenProcess(uint dwDesiredAccess, bool bInheritHandle, int dwProcessId); 
```

您可以将它与任何与 Win32 兼容的 DLL 一起使用，包括 Delphi 的。

# android - 可打包数组列表 安卓

> ID：15411282
> 
> 赞同：0
> 
> 时间：2013-03-14T13:55:41.180
> 
> 标签：android, parcelable

我无法在我的对象属性“ArrayList”上实现 Parcelable，显然我的属性“ArrayList 有效，为什么？因为，我使用相同的方法：

```
in.readTypedList(etapes,Step.CREATOR);          
in.readTypedList(points, LatLng.CREATOR);//BUG 
```

我的课，当然还有：“import com.google.android.gms.maps.model.LatLng;”

```
public class Road implements Parcelable {
    public String depart;
    public String arrivee;
    public int distance;
    public int duration;
    public ArrayList<Step> etapes = new ArrayList<Step>();
    public String travel_mode;
    public LatLngBounds bounds;    
    public ArrayList<LatLng> points = new ArrayList<LatLng>();

    public Road(String depart, String arrivee, int distance, int duration, ArrayList<Step> etapes, String travel_mode, ArrayList<LatLng> points){

        this.depart = depart;
        this.arrivee = arrivee;
        this.distance = distance;
        this.duration = duration;
        this.etapes = etapes;
        this.travel_mode = travel_mode;                 

        LatLngBounds.Builder builder = new LatLngBounds.Builder();
        for(int i=0; i<points.size();i++){              
            builder.include(points.get(i));             
        }
        bounds = builder.build();
        this.points = points;  

    }        

    private Road(Parcel in){
        depart =  in.readString();
        arrivee = in.readString();
        distance = in.readInt();
        duration = in.readInt(); 
        in.readTypedList(etapes,Step.CREATOR);//GOOD            
        travel_mode = in.readString();
        LatLng ne = new LatLng(in.readDouble(),in.readDouble());
        LatLng sw = new LatLng(in.readDouble(),in.readDouble());
        LatLngBounds.Builder builder = new LatLngBounds.Builder();
        builder.include(ne);
        builder.include(sw);
        bounds = builder.build();           
        in.readTypedList(points, LatLng.CREATOR);//BUG      
    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        // TODO Auto-generated method stub          
        dest.writeString(depart);
        dest.writeString(arrivee);
        dest.writeInt(distance);
        dest.writeInt(duration);            
        dest.writeTypedList(etapes);            
        dest.writeString(travel_mode);
        dest.writeDouble(bounds.northeast.latitude);
        dest.writeDouble(bounds.northeast.longitude);
        dest.writeDouble(bounds.southwest.latitude);
        dest.writeDouble(bounds.southwest.longitude);           
        dest.writeParcelable(bounds, flags);
        dest.writeTypedList(points);            
    }       

    public static final Parcelable.Creator<Road> CREATOR =
            new Parcelable.Creator<Road>() {

        public Road createFromParcel(Parcel in){
            return new Road(in);
        }
        public Road[] newArray(int size){
            return new Road[size];          
        }
    }; 
```

}

我的堆栈跟踪：

```
03-14 14:34:12.431: E/AndroidRuntime(9809): FATAL EXCEPTION: main
03-14 14:34:12.431: E/AndroidRuntime(9809): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.TEST flg=0x10 (has extras) } in com.eloges.GeoPosActivity$2@41013368
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:794)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Handler.handleCallback(Handler.java:608)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Looper.loop(Looper.java:156)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.app.ActivityThread.main(ActivityThread.java:5099)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at dalvik.system.NativeStart.main(Native Method)
03-14 14:34:12.431: E/AndroidRuntime(9809): Caused by: com.google.android.gms.internal.aw$a: Expected object header. Got 0x2e006d Parcel: pos=3484 size=17768
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.google.android.gms.internal.aw.c(Unknown Source)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.google.android.gms.maps.model.LatLngCreator.createFromParcel(Unknown Source)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.google.android.gms.maps.model.LatLngCreator.createFromParcel(Unknown Source)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Parcel.readTypedList(Parcel.java:1655)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.eloges.geoloc.Road.<init>(Road.java:66)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.eloges.geoloc.Road.<init>(Road.java:49)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.eloges.geoloc.Road$1.createFromParcel(Road.java:98)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.eloges.geoloc.Road$1.createFromParcel(Road.java:1)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Parcel.readParcelable(Parcel.java:1997)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Parcel.readValue(Parcel.java:1859)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Parcel.readMapInternal(Parcel.java:2099)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Bundle.unparcel(Bundle.java:223)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.os.Bundle.getParcelable(Bundle.java:1158)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at com.eloges.GeoPosActivity$2.onReceive(GeoPosActivity.java:162)
03-14 14:34:12.431: E/AndroidRuntime(9809):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:781)
03-14 14:34:12.431: E/AndroidRuntime(9809):     ... 9 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:11:44.837

为您的 ArrayList 使用 writeParcelableArray()，并确保您的对象 LatLng 和 Step 是 Parcelable 的。

# android - Android - 如何使用自定义 TextView？

> ID：15411287
> 
> 赞同：0
> 
> 时间：2013-03-14T13:55:58.933
> 
> 标签：android

我创建了一个扩展类`TextView`

```
public class EmployeeTextView extends TextView {

    private String employeeId;

    private String employeeName;

    public EmployeeTextView( Context context, String employeeId,
            String employeeName ) {
        super( context );
        this.employeeId = employeeId;
        this.employeeName = employeeName;
    }

    public String getEmployeeId( ) {
        return employeeId;
    }

    public void setEmployeeId( String employeeId ) {
        this.employeeId = employeeId;
    }

    public String getEmployeeName( ) {
        return employeeName;
    }

    public void setEmployeeName( String employeeName ) {
        this.employeeName = employeeName;
    }

    @Override
    public CharSequence getText( ) {
        return this.employeeId + " - " + this.employeeName;
    }

} 
```

我将如何在我的主要活动中实现这个类？我必须以`EmployeeTextView`编程方式创建这些“”吗？或者有没有办法创建一个自定义小部件并通过 XML 添加它，然后调用我的 getter 和 setter？

我需要这个自定义 TextView 的原因是我需要单独获取employeeId 或employeeName。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:59:19.793

在 layout.xml 添加如下

```
<your_package_name.EmployeeTextView 
      android:id="@+id/view_id"
      other attributes
/> 
```

这里your_package_name是EmployeeTextView类的src包

在课堂上使用

```
EmployeeTextView v = (EmployeeTextView ) findViewById(R.id.view_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:59:51.317

在您的 layout.xml 中使用完整的限定名称。

在你的情况下：

<com.example.EmployeeTextView ... />

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:00:45.053

像通常使用 TextView 一样使用它，也在 XML 中。只需在其前面添加您的包名称即可。

# php - 将变量传递给另一个文件并保存到平面文件

> ID：15411295
> 
> 赞同：0
> 
> 时间：2013-03-14T13:56:19.900
> 
> 标签：php, variables

我正在创建一个原型电子商务网站，我在将访问者姓名保存到我的平面文件数据库“购买”时遇到问题。

```
<body>

    <h1>Confirm Selection</h1>

    <form action="write.php" method="post">
        <table>

            <tr><th></th><th></th><th></th><th>Price</th></tr>

            <?php              
               $visitor = $_POST['visitor'];
               echo "<p>".'Hello '."<b>".$visitor."</b>&nbsp;".'please confirm your purchase(s) below.'."</p>";
            ?>

        </table> 
```

上面的确认文件创建了一个名为 $visitor 的变量，它是用户在之前的表单中输入的任何名称，然后我想使用这个变量，一旦用户确认他们的选择，将其传递给“write.php”要处理的文件并写入购买文件。

我的“write.php”文件的一部分如下。

```
<?php
        if (!($data = file('items.txt'))) {
            echo 'ERROR: Failed to open file! </body></html>';
            exit;
        }

        $now = date(' d/m/y H:i:s ');

        foreach ($_POST as $varname => $varvalue) {
            foreach ($data as $thedata) {
                list($partno, $name, $description, $price, $image) = explode('|', $thedata);
                if ($partno == $varname) {

                    $myFile = "purchases.txt";
                    $fh = fopen($myFile, 'a') or die("can't open file\n");

                    $content = $now . "|" . $partno . "|" . $name . "|" . $price . "\n";

                    if (!(fwrite($fh, $content))) {
                        echo "<p>ERROR: Cannot Write ($myFile)\n</p>";
                        exit;
                    } else {
                        echo "<p>Transaction Completed!</p>";
                        fclose($fh);
                    }
                }
            }
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:37:03.150

如果购买页面提交到 write.php，隐藏变量可能会起作用：

```
<form action="write.php" method="post">
    <table>

        <tr><th></th><th></th><th></th><th>Price</th></tr>

        <?php              
        $visitor = $_POST['visitor'];
        echo "<p>".'Hello '."<b>".$visitor."</b>&nbsp;".'please confirm your purchase(s) below.'."</p>";
        ?>
        <input type="hidden" name="visitor" value="<?=$visitor?>"/> <!-- added line to send visitor -->
    </table> 
```

所以在你的 write.php 中：

```
 if (!($data = file('items.txt'))) {
        echo 'ERROR: Failed to open file! </body></html>';
        exit;
    }
    $visitor = $_REQUEST['visitor']; // added line, now you have visitor
    $now = date(' d/m/y H:i:s '); 
```

PS：您可能需要 htmlentities 功能，因为用户可以为访客输入有趣的字符：

```
<input type="hidden" name="visitor" value="<?=htmlentities($visitor)?>"> 
```

# python - 如何使用装饰器检索函数中传递的参数的名称

> ID：15411297
> 
> 赞同：0
> 
> 时间：2013-03-14T13:56:29.653
> 
> 标签：python, parameters, decorator

```
import sys
def entryExit(f):
    def new_f(self,*args):
        print "Entering", f.__name__,self.__class__.__name__ 
        f(self,*args)
        print "Exited", f.__name__,self.__class__.__name__
    return new_f

class A:
    @entryExit
    def move(self,g,h):
        print "hello"
        print g,h           

a=A()
a.move(5,7) 
```

上面的代码输出

```
Entering move A
hello
5 7
Exited move A 
```

我能够检索方法名称以及使用装饰器定义它的类。但我无法在运行时检索方法参数的名称。

基本上我需要这样的输出

```
Entering move A g,h
hello
5 7
Exited move A g,h 
```

那么我应该在打印语句中添加什么来获得类似上面的输出。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:59:13.440

你可以用[`inspect.getargspec`](http://docs.python.org/2/library/inspect.html#inspect.getargspec)这个。

例如：

```
import sys
import inspect
def entryExit(f):
    def new_f(self,*args):
        print "Entering", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:]
        f(self,*args)
        print "Exited", f.__name__,self.__class__.__name__
    return new_f

class A:
    @entryExit
    def move(self,g,h):
        print "hello"
        print g,h           

a=A()
a.move(5,7) 
```

结果是：

```
Entering move A ['g', 'h']
hello
5 7
Exited move A 
```

# android - 如何强制 Linux mmcblk 枚举

> ID：15411299
> 
> 赞同：0
> 
> 时间：2013-03-14T13:56:30.213
> 
> 标签：android, linux, linux-kernel

在我的设备上，我有*2 个 mmc 设备*、eMMC 和一个 SD 卡，内核分别枚举为`/dev/mmcblk0`和`/dev/mmcblk1`。最好反过来列举这些，

那么有谁知道强制它作为某种内核参数的方法吗？

# javascript - Google Maps API 的初始化函数没有 ONLOAD 正文标记或在结束正文之前

> ID：15411309
> 
> 赞同：2
> 
> 时间：2013-03-14T13:56:44.513
> 
> 标签：javascript, jquery, html, google-maps-api-3

我正在使用 DotNetNuke CMS 的网站上工作。我已经使用 API 添加了 Google Maps 地图，但是我需要在页面加载后调用 initialize() 函数。通常你会这样做：

```
<body onload="initialize()"> 
```

或在 </body> 标记之前添加以下内容：

```
<script type="text/javascript">
    window.onload = function () {
        initialize();
    }
</script> 
```

但是，我无权访问正文标签或标签的确切结尾。有没有其他方法可以在不执行上述操作的情况下调用此函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:10:03.677

在窗口加载事件中执行此操作不是一个好主意 - 如果您加载了一些高延迟图像或其他资产，那么您的谷歌地图将加载非常缓慢。在结束正文标记之前，添加以下内容：

```
<script>
 initialize();
</script> 
```

谷歌在构建地图之前需要准备的只是 DOM，而不是页面上的每一个资产。当脚本在结束 body 标记之前加载时，DOM 总是完全加载。

**编辑**

从技术上讲，谷歌地图在构建它的地图之前需要准备好就是要放置它的 div。所以你甚至不需要在你的结束 body 标签之前有脚本，你可以在之后立即拥有它你的地图 div 标签是这样的：

```
<html>
...
<body>
...html...

<div id="map-canvas"></div>
<script>initialize();</script>

...more html
</body> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T14:05:54.780

当我只是随机尝试某事时，我已经弄清楚了。将以下内容添加到标题中的事项。API V3 万岁！

```
<script type="text/javascript">
    google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:20:19.850

您也可以调用以下方式

```
 <div id="map-canvas"></div>

    $("#map-canvas").on("load", function () {
       initialize();            
    }); 
```

# mongodb - 有条件的MongoDB聚合框架项目

> ID：15411315
> 
> 赞同：5
> 
> 时间：2013-03-14T13:56:50.747
> 
> 标签：mongodb, mongoid

我有一系列簿记条目，如下所示：

```
{
    _id: 5141aff1a1d24c991a000002, 
    date: 2012-02-23 00:00:00 UTC, 
    details: "sdfd", 
    value: 250, 
    clinic_id: "513e2227a1d24ceab3000001"
} 
```

我想获得每月贷方和借方总额的报告。像这样：

```
[
  {"credit"=> -229, "debit" => 0    "month"=>1},
  {"credit"=> -229, "debit" => 0    "month"=>2},
  {"credit"=> -229, "debit" => 0    "month"=>3},
  {"credit"=> -229, "debit" => 0    "month"=>4},
  {"credit"=> -229, "debit" => 0    "month"=>5},
  {"credit"=> -229, "debit" => 0    "month"=>6},
  {"credit"=> -229, "debit" => 0    "month"=>7},
  {"credit"=>    0, "debit" => 300  "month"=>8},
  {"credit"=>    0, "debit" => 300  "month"=>9},
  {"credit"=>    0, "debit" => 300  "month"=>10},
  {"credit"=>    0, "debit" => 300  "month"=>11},
  {"credit"=>    0, "debit" => 300  "month"=>12} 
```

]

为此，我计划使用聚合框架。

*   `credit`当 $value <= 0 时如何分配 $value ？
*   `debit`当 $value >= 0 时如何分配 $value ？
*   我该如何分组？

我有这个：

```
BookKeepingEntry.collection.aggregate(
    [ { "$match" => { "clinic_id" => self.clinic.id } },
      { "$project" =>
        {        
          "credit" => { what here? },
          "debit" => { What here?}
          "month" => { "$month" => "$date" }
        }
      },
      { "$group" => {} }
      { "$sort" => { "month" => 1 } }
    ]
  ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T14:31:50.820

```
BookKeepingEntry.collection.aggregate(
    { $project: {
        _id: 0,
      credit : { $cond: [ {$lt: ['$value',0]}, '$value', 0 ] },
      debit :  { $cond: [ {$gt:  ['$value',0]}, '$value', 0 ] },
      month : { $month : "$date" }
    }},
    { $group : {_id: {Month: "$month"} , CreditSum: {$sum: "$credit"}, DebitSum: {$sum: "$debit"}} },
    { $sort : { "_id.Month" : 1 } }
    ); 
```

# sql-server-2008-r2 - Sql Server 代理作业 - 添加版本号

> ID：15411316
> 
> 赞同：3
> 
> 时间：2013-03-14T13:56:52.000
> 
> 标签：sql-server-2008-r2, sql-agent-job

我使用 sql server 2008 r2 dmvs 和 dmfs 创建了一个监控工具。我通过 tsql 为它创建了一个 sql server 作业，通过 9 个步骤将其部署到客户端站点。

我的问题是找到一种方法以某种方式包含与作业一起存储的版本，以便我知道何时升级作业以进行下一次部署。任何想法如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:08:25.867

您可以像这样向数据库对象添加自定义属性：

```
EXEC sp_addextendedproperty
    N'YourProperyName', N'SomeValue',
    N'SCHEMA', N'dbo',
    N'TABLE', N'MyTable' 
```

但我不知道它是否适用于工作。或者也许使用工作的描述字段：

```
select top 10 * from msdb.dbo.sysjobs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T16:50:18.557

您可以使用 sp_addextendedproperty 对 msdb.dbo.sysjobs 表或列进行版本化（例如 version_number）；但是，您不能对特定记录执行此操作。由于扩展属性值的 TYPE 是 SQLVARIANT，您可以将 XML 存储在 msdb.dbo.sysjobs 表中，描述所有作业的版本。

或者您可以简单地在您的数据库中创建一个表并存储 job_id (GUID) 和您当前的版本号 - 一个自定义解决方案。

值得一提的是，这里是您如何使用 sp_addextendedproperty 在 sysjobs 表上添加、查看、更新和删除扩展属性的方法。我去了 COLUMN，但你可以在桌子上停下来：

```
--Add the 'Version' extended property to msdb.dbo.sysjobs.[version_number] column.
EXECUTE sp_addextendedproperty N'Version', '1.0.0.0', 'SCHEMA', N'dbo', 'TABLE', N'sysjobs', 'COLUMN', N'version_number';

--Update the 'Version' extended property
EXECUTE sp_updateextendedproperty N'Version', '1.0.0.2', 'SCHEMA', N'dbo', 'TABLE', N'sysjobs', 'COLUMN', N'version_number';

--View the current value of 'Version'
SELECT objtype, objname, name, value
FROM fn_listextendedproperty(N'Version', 'SCHEMA', N'dbo', 'TABLE', N'sysjobs', 'COLUMN', N'version_number');

--Drop the 'Version' extended property
EXECUTE sp_dropextendedproperty N'Version', 'SCHEMA', N'dbo', 'TABLE', N'sysjobs', 'COLUMN', N'version_number'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T17:09:28.840

您不能使用 sp_addextendedproperty 在作业中保存版本号

> [@level1type=]{'level1_object_type'}
> 
> 是级别 1 对象的类型。level1_object_type 是 varchar(128)，默认为 NULL。有效输入为 AGGREGATE、DEFAULT、FUNCTION、LOGICAL FILE NAME、PROCEDURE、QUEUE、RULE、SYNONYM、TABLE、TABLE_TYPE、TYPE、VIEW、XML SCHEMA COLLECTION 和 NULL。[资源](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-addextendedproperty-transact-sql)

这样做需要将“level1_object_type”的值更改为“JOB”，这不是一个选项。

# spring - Spring JMX Mbean 未出现或未向 jconsole 注册

> ID：15411321
> 
> 赞同：1
> 
> 时间：2013-03-14T13:57:08.807
> 
> 标签：spring, tomcat, jmx, spring-jmx

只是在本地 tomcat 服务器上的 eclipse 中尝试了一个简单的 Spring JMX 应用程序，但似乎无法注册 mbean，因此它们可以在 jconsole 中查看，在 eclipse 上下文中：component-scan 确实可以拾取我创建的 bean但是这些没有注册。当以编程方式注册 mbean 时，它可以工作。

这是我的配置 xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<bean id="mbeanServer" class="java.lang.management.ManagementFactory"
lazy-init="false" factory-method="getPlatformMBeanServer">
</bean>

<context:component-scan base-package="com.jmx.beans" />
<context:mbean-export server="mbeanServer" />

</beans> 
```

我正在尝试使用注释注册的简单 bean

```
package com.jmx.beans;

import org.springframework.jmx.export.annotation.ManagedAttribute;
import org.springframework.jmx.export.annotation.ManagedResource;
import org.springframework.stereotype.Component;

@Component
@ManagedResource(objectName="bean:name=Hello")
public class Hello{

String message =  null;

@ManagedAttribute(description="get the message")
public String getMessage(){

    return this.message;
}

@ManagedAttribute(description="set the message")
public void setMessage(String Message){

    this.message = Message;

}
} 
```

我还设置了tomcat服务器参数如下

```
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=9990
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.hostname="localhost" 
```

对此的任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:50:57.907

你为什么编辑你的帖子以删除`<context:component-scan/>`？这是找到您的`@Component`.

我刚刚测试过，对我来说一切都很好......

```
@Component
@ManagedResource
public class Foo {

    @ManagedAttribute
    public int getIt() {
        return 42;
    }
} 
```

和

```
<context:mbean-server/>

<context:component-scan base-package="foo" />

<context:mbean-export/> 
```

我用你的 MBean 服务器风格进行了尝试，它也很有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-17T08:53:16.593

老问题但仍然有效。您可以使用以下 vm 参数来解决 Mbean 未出现问题。

```
-Dspring.jmx.enabled=true 
```

# c# - 从线程中得到错误的结果

> ID：15411327
> 
> 赞同：0
> 
> 时间：2013-03-14T13:57:15.537
> 
> 标签：c#, wpf, multithreading, file, dispatcher

我有一个小`WPF`应用程序需要枚举指定目录中的所有文件并检查其中是否存在某个字符串。这是搜索方法：

```
private void btnSearch_Click_1(object sender, RoutedEventArgs e)
{
  Thread t = new Thread(()=>search(@"c:\t", "url", true));
  t.Start();
}

private void search(string path, string textToSearch, bool ignoreCase)
{
  foreach (string currentFile in Directory.EnumerateFiles(path, "*.*", SearchOption.AllDirectories))
  {
    int lineNumber = 0;
    foreach (string line in File.ReadLines(currentFile))
    {
      lineNumber++;
      if (line.Contains(textToSearch))
      {
        lbFiles.Dispatcher.BeginInvoke((Action)(() =>
        {
          //add the file name and the line number to a ListBox
          lbFiles.Items.Add(currentFile + "     " + lineNumber);
        }));
      }
    }
  }
} 
```

我的问题是，如果在文件中多次找到指定的字符串，则所有出现的行号都是后者。对于具有以下行的文本文件：

**abcd**
**EFG**
**url**
**hijk123**
**url**

将`listbox`如下所示：

![列表框结果](../Images/261f8d907839a877f877682a37a11c72.png)

当使用断点单步执行代码时，我可以看到在退出搜索方法后立即“跳”回`BeginInvoke`声明。
请指教。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:04:34.397

问题是您正在关闭变量`lineNumber`。 `BeginInvoke`是异步的，它不会等待在 UI 线程上调用委托。到它设法被调用时，它`lineNumber`已经增加了很多次。

有两种解决方案。创建一个更本地化的副本`lineNumber`以关闭，以便以后看不到更改：

```
foreach (string line in File.ReadLines(currentFile))
{
  lineNumber++;
  if (line.Contains(textToSearch))
  {
    var lineNumberCopy = lineNumber;
    lbFiles.Dispatcher.BeginInvoke((Action)(() =>
    {
      //add the file name and the line number to a ListBox
      lbFiles.Items.Add(currentFile + "     " + lineNumberCopy );
    }));
  }
} 
```

或使用`Invoke`代替`BeginInvoke`, 以便`lineNumber`在它有机会增加之前读取它。

# python - 从重定向的 URL 中检索 JPEG 图像并将其显示在 GUI 窗口上

> ID：15411330
> 
> 赞同：0
> 
> 时间：2013-03-14T13:57:23.337
> 
> 标签：python, tkinter

我正在尝试从 URL 下载 JPEG 文件并将其显示在 tkinter GUI 窗口中

这是我试图用来下载和显示 JPEG 的代码：

```
picURL = "https://graph.facebook.com/" + ID + "/picture"
picBytes= urlopen(picURL).read()
picData = io.BytesIO(picBytes)
picPil = Image.open(picData)
picTk = ImageTk.PhotoImage(picPil)
label_9 = Label(image = picTK, bg = "blue").pack() 
```

问题是图像没有显示出来。我得到的只是一个蓝色的盒子。我怎样才能让它显示图片？

谢谢

我在 Windows 上使用 python 3.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:31:16.993

您使用什么库来访问图像？我会推荐[requests](http://docs.python-requests.org/en/latest/ "要求")。它会自动为您处理重定向：

```
import requests
import Image
from StringIO import StringIO

r = requests.get(https://graph.facebook.com/userID/picture)
im = Image.open(StringIO(r.content)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:00:53.397

尝试使用 Tkinter

```
import Tkinter 
import Image, ImageTk
#open image and convert to byte format
im = Image.open('photo.jpg').convert2byte()
root = Tkinter.Tk()
tkimage = ImageTk.PhotoImage(im)
Tkinter.Label(root, image=tkimage).pack()
root.mainloop() 
```

另外，请参阅相关问题[Showing image in Gui](https://stackoverflow.com/questions/14213662/showing-image-in-gui)

# c# - 实体框架 Linq SelectMany 与条件

> ID：15411335
> 
> 赞同：6
> 
> 时间：2013-03-14T13:57:33.770
> 
> 标签：c#, linq, entity-framework

我一直在尝试为我正在尝试编写的 linq 查询找到合适的解决方案。

在我的模型结构中，我有一个 Item 类，它包含一个 PaymentRecords 列表。我希望我的查询实现的是：

```
public class PaymentRecord
{
    public int PaymentRecordId { get; set; }

    [Required]
    public double PaymentAmount { get; set; }

    [Required]
    public DateTime DateOfPayment { get; set; }

    [Required]
    public bool FinalPayment { get; set; }

    [JsonIgnore]
    public Item Item{ get; set; }
}

public class Item
{
    public int ItemId { get; set; }

    public List<PaymentRecord> PaymentRecords {get; set;}

    ...various other properties
} 
```

选择所有项目，其中 PaymentRecord 列表与以下条件匹配（工作正常），或者 PaymentRecord 为空，例如 Items 类没有 PaymentRecord。有没有办法做到这一点？

```
var result = m_context.Item
            .SelectMany(
                x => x.PaymentRecords.Where(p => (p.FinalPayment == true
                                              && p.DateOfPayment >= _revenueStatementRequest.StartDate
                                              && p.DateOfPayment <= _revenueStatementRequest.EndDate)
                                              || p.FinalPayment != true),
                (x, p) => x
            )
            .ToList(); 
```

理想情况下，我想做类似下面的事情，但我无法得到任何类似的工作：

```
var result = m_context.Item
            .SelectMany(
                x => x.PaymentRecords.Where(p => (p.FinalPayment == true
                                              && p.DateOfPayment >= _revenueStatementRequest.StartDate
                                              && p.DateOfPayment <= _revenueStatementRequest.EndDate)
                                              || p.FinalPayment != true)
                || x.PaymentRecords == null,
                (x, p) => x
            )
            .ToList(); 
```

根据给出的答案工作后，我有这个：

```
 m_context.Item.Where(c => (!
                            c.PaymentRecords.Any(q => (q.FinalPayment &&
                                                            q.DateOfPayment >= _revenueStatementRequest.StartDate &&
                                                            q.DateOfPayment <= _revenueStatementRequest.EndDate)
                                                            || q.FinalPayment != true
                                                )
                            )
                    && (c..Type == Booked || c.Type == Reserved)
                    && (c.StartDate < _revenueStatementRequest.StartDate)
                    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:10:52.507

你可以在没有`SelectMany`

```
 List<Item> res = m_context.Items
                      .Where(c => !c.PaymentRecords
                                .Any(q => (q.FinalPayment && 
                                        q.DateOfPayment >=_revenueStatementRequest.StartDate &&
                                        q.DateOfPayment <= _revenueStatementRequest.EndDate)
                                        || !q.FinalPayment)
                            )
    //**EDIT**
    .Where(c => c.StartDate < _revenueStatementRequest.StartDate)
 //this is comment out, so we can better test on the more complex part of the query
  //.Where(c => c.Type == Booked || c.Type == Reserved)   
    .ToList(); 
```

这样你得到一个`List<Item>`而不是`List<PaymentRecord>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:11:44.197

> 选择所有项目，其中 PaymentRecord 列表与以下条件匹配（工作正常），或者 PaymentRecord 为空，例如 Items 类没有 PaymentRecord。

```
var result = m_context.Item
                      .Where(x => !x.PaymentRecords.Any() ||
                                   x.PaymentRecords.Any(p => (p.FinalPayment == true
                                                        && p.DateOfPayment >= _revenueStatementRequest.StartDate
                                                        && p.DateOfPayment <= _revenueStatementRequest.EndDate)
                                                        || p.FinalPayment != true))
                      .ToList(); 
```

我看不出有什么理由在`SelectMany`这里使用。简单`Where`的条件就可以完成这项工作。

# windows-8 - 为 win8 应用程序更改 csproj 后混合“无效标记”

> ID：15411336
> 
> 赞同：1
> 
> 时间：2013-03-14T13:57:36.097
> 
> 标签：windows-8, blend

我正在开发几个 UI 重的 Win8 应用程序。在 VS2012 中更改文件后，Blend 通常会正常更新（尽管必须重新构建才能使 viewModel 显示为设计数据）

我遇到的问题是，每次我在 VS2012 中对项目进行更改时，例如添加一个文件，并且 .csproj 文件得到更新，Blend 似乎放弃了所有 XAML 知识并用一条消息抱怨一切：“无效标记” .

重新启动 Blend 后一切恢复正常。

想法？谢谢！

# javascript - 从数组中获取特定对象而不循环的最佳方法

> ID：15411337
> 
> 赞同：3
> 
> 时间：2013-03-14T13:57:37.783
> 
> 标签：javascript, angularjs

在我的角度应用程序的一个控制器中，我有一个变量集如下。

```
SomeService.get({}, function(data){
    // this sets xyz as the list of the data retrieved 
    // from the resource within the controllers scope
    $scope.xyz = data.objects;    
}); 
```

现在`$scope.xyz`看起来像

```
[
    0: {id: 1, ...more data here ...},
    1: {id: 2, ...more data here ...},
    2: {id: 3, ...more data here ...},
    3: {id: 4, ...more data here ...},
    4: {id: 5, ...more data here ...},
    5: {id: 6, ...more data here ...},
] 
```

我想要做的是使用`id`属性（而不是列表索引）在 xyz 中获取一个对象。我知道我可以按如下方式迭代数组。

```
angular.forEach($scope.xyz, function(obj){ return obj.id == 1;}); 
```

但是有没有办法在不循环列表的情况下做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-15T20:57:48.093

虽然这已经在一年前得到了回答，但由于这是谷歌的顶级结果之一，我想我可以添加以下建议，这可能是最简单的过滤方法。将 $filter 注入控制器后，

```
var result = $filter('filter')($scope.xyz, {id:"1"}); 
```

参考： [https ://docs.angularjs.org/api/ng/filter/filter](https://docs.angularjs.org/api/ng/filter/filter)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T14:10:36.600

`O(n)`不，除非满足某些先决条件，否则您无法真正避免循环 ( )。

*   如果数组按 id 排序，则可以使用二分查找算法 ( `O(log n)`)。
*   如果数组索引总是对应 id-1（或者一些类似的简单公式），可以直接在`O(1)`.

如果最初没有满足这些条件，但是您需要通过 id 多次访问项目，那么将它们带入该形式（排序/构建哈希映射）可能会有所帮助。

# java - 如何编写正则表达式以删除字符串开头和结尾的部分，并保存中间的部分

> ID：15411339
> 
> 赞同：0
> 
> 时间：2013-03-14T13:57:41.390
> 
> 标签：java, regex

我有一个这样的字符串；

`myString = "Logged in as: MyUserName (Administrator)"`

如何删除除 之外的所有部分`MyUserName`？

到目前为止，我只设法删除了该`(Administrator)`部分。

```
System.out.println(myString.replaceAll("\\([^()]*\\)", "")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:23:24.357

我会使用以下内容：

```
public static void main(String[] args) {    
    final String myString = "Logged in as: MyUserName (Administrator)";
    final Pattern pattern = Pattern.compile("^[^:]++:\\s*+(\\S++).*+$");
    final Matcher matcher = pattern.matcher(myString);
    if(matcher.matches()) {
        System.out.println(matcher.group(1));
    }
} 
```

输出

```
MyUserName 
```

这使用了所有匹配器，[当没有找到匹配时会更快](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-optimizingregex.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:04:18.117

我建议使用匹配组。您可以使用“（”和“）”来匹配您正则表达式的一部分，然后将所有字符串替换为组的内容。

这是一个例子：

```
String myString = "Logged in as: MyUserName (Administrator)";
System.out.println(myString.replaceAll("^[^:]*:\\s+([a-zA-Z]+)\\s.*$", "$1")); 
```

输出：

```
MyUserName 
```

正则表达式

```
^[^:]*:\\s+([a-zA-Z]+)\\s.*$ 
```

包含与用户名匹配的匹配组 ([a-zA-Z]+)。整个字符串被替换为第一个匹配组的内容（在本例中为 $1）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:15:54.850

你可以试试这个：

```
String myString = "Logged in as: MyUserName (Administrator)";
String myUserName = myString.replaceAll(".+:(.+)(\\(.+)", "$1").trim(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T14:03:31.477

我已经用你的输入测试了这个正则表达式：

```
[^:]*:\s*([^(]*).* 
```

或在 Java 中：

```
Pattern p = Pattern.compile("[^:]*:\\s*([^(]*).*");
Matcher m = p.matcher("Logged in as: MyUserName (Administrator)");
if(m.find()) {
   System.out.println(m.group(1));
} 
```

顺便说一句，[RegexPlanet](http://www.regexplanet.com/advanced/java/index.html)是您编写正则表达式的朋友 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T14:05:12.690

这对我有用：`myString.replaceAll(".+:(.+)\\(.+\\)", "$1")`

它将匹配直到并包括第一个的所有字符`:`。一旦找到，它将所有下一个字符写入捕获组，直到找到第一个`(`。然后它将所有匹配的内容（应该是整个字符串）替换为捕获组的内容，即该`MyUserName`部分。

另一个版本可能是这样的：它将从该部分`myString.replaceAll(".+:\\s*(.+)\\s*\\(.+\\)", "$1")`中删除任何额外的空白字符。`MyUserName`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T14:02:43.287

如果你确定字符串总是以 开头`Logged in as:`，那么你可以试试这个：

```
 String myString = "Logged in as: MyUserName (with parentheses) (Administrator)";
    String login = myString.substring("Logged in as:".length(), myString.lastIndexOf('(')).trim(); 
```

返回`MyUserName (with parentheses)`

如果您确定您的用户名不能包含括号，则可以替换`lastIndexOf`为。`indexOf`

一个更简单的版本将是：

```
 String myString = "Logged in as: MyUserName (with parentheses) (Administrator)";
    String login = myString.substring(myString.indexOf(':'), myString.indexOf('(')).trim(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T14:07:22.987

尝试这个：

```
System.out.println(myString.replaceAll(".*?:\\s*(\\w+).*", "$1"); 
```

这会忽略第一个冒号之前的所有内容，冒号本身和它后面的任何空格，捕获用户名并忽略它后面的所有内容。然后它将整个匹配项（即整个字符串）替换为第一个捕获的组，即用户名。

另请参阅模式语法文档：[http ://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-14T14:06:08.937

在我看来，您应该使用 Pattern 对象，使用匹配器可以提取参数。此代码可以帮助您：

```
Pattern p = Pattern.compile("Logged in as: (.)+ (Administrator)", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(myString);
if (m.find()) {
   return m.group(1);
}

else {
   System.out.println("Not found !");
} 
```

希望它会有所帮助:)

# gnome - GDBus : 迁移到 GDBUS 并了解 GVariants 和 GTypes

> ID：15411346
> 
> 赞同：0
> 
> 时间：2013-03-14T13:57:50.663
> 
> 标签：gnome, glib

`GVariant`是用于`GDBUS`绑定的不透明数据结构`libDBus`。

有人提到这`GVariant`是一个浮动引用计数系统。在这方面，浮动参考实际上意味着什么？此外，还提到`GVariant`调用`g_variant_ref_sink()`将浮动引用转换为完整引用。

谁能解释一下这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:06:49.283

[浮动引用](https://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#floating-ref)的GObject 文档解释了这个概念。GVariant 不能依赖于 GObject（这将是一个循环依赖，因为 gobject 依赖于 glib 而 GVariant 是 glib 的一部分），所以它不是同一个实现，但它是同一个概念。

# xml - 使用 XSL 输出最后 6 位数字

> ID：15411352
> 
> 赞同：3
> 
> 时间：2013-03-14T13:57:58.140
> 
> 标签：xml, xslt

我正在尝试想出一种使用 XSL 输出以下字段的最后 6 位数字的方法

```
<NameReference Text="4380.401.0500-111820" /> 
```

我基于 xml 文件编写了以下表达式：

```
<xsl:if test="">
<xsl:for-each select="NameReference">
<ID>
<Data>
<xsl:value-of select="substring(@Text,-6)"/>
</Data>
</ID>
</xsl:for-each>
</xsl:if> 
```

但是，输出如下“43804010500111820”。它基本上将整个字段解析为所需的数据，我只在破折号 '-' 之后寻找最后 6 位数字。我试图从左到右，但没有奏效。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:01:27.110

该`substring`函数的第二个参数是起始位置。您想从该`length-6`位置开始获取字符。

尝试

```
substring(@Text, string-length(@Text) - 6) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:28:52.773

**关于substring-after**函数可能值得了解，以供将来参考。如果连字符后的位数不定，这将很有用。在这种情况下，您可以这样做：

```
 <xsl:value-of select="substring-after(@Text, '-')" /> 
```

在这种情况下也应该输出`111820`。

# c# - 如何使用 C# 从 Active Directory 中检索用户的私钥（=如何从 Active Directory 中获取 PKCS12 (PFX) 证书？）

> ID：15411353
> 
> 赞同：1
> 
> 时间：2013-03-14T13:58:04.277
> 
> 标签：c#, active-directory, pki

我们正在使用 Active Directy 和 C# 实施数字签名 ad-hoc 方案。我们想知道我们应该如何从 AD 上的用户帐户条目中检索私钥（或用户的 PFX 文件），以便我们可以使用该私钥签署一些信息。同时，如何在 AD 中为每个用户正确安装 PFX 文件？（以便我们以后可以通过编程方式检索它）

我们已经在访问 AD 并从“userCert”字段中检索公钥信息，我们现在使用它来验证签名文件，但我们需要先访问私钥来签署这些文件！

我们正在使用 LDAP 访问 AD。像这样的东西：

```
DirectoryEntry o2ADEntry = new DirectoryEntry("LDAP://darwin.charles/DC=domain, DC=info", "user", "password");
DirectorySearcher o2objSearch = new System.DirectoryServices.DirectorySearcher(o2ADEntry);

o2objSearch.PropertiesToLoad.Add("samaccountname");
o2objSearch.PropertiesToLoad.Add("displayname");
o2objSearch.PropertiesToLoad.Add("userCert");
o2objSearch.Filter = (string.Format("(samaccountname={0})", "user")); 

SearchResult res = o2objSearch.FindOne();
if (res != null)
{
   CreateNavigator().SelectSingleNode("/my:myFields/my:name", NamespaceManager).SetValue(res.GetDirectoryEntry().Properties["displayname"].Value.ToString());
   FormState["certificate"] = res.GetDirectoryEntry().Properties["userCert"].Value;
} 
```

我们还使用标准的 Microsoft Crypto API（没有 bouncycastle，没有 OpenSSL.NET）。

我们在这里检查了[http://technet.microsoft.com/en-us/library/aa996408(v=exchg.65).aspx](http://technet.microsoft.com/en-us/library/aa996408(v=exchg.65).aspx)，但没有说明如何访问私钥。

非常感谢，朋友们！

# php - 在 php 5.3 中使用 ucfirst() 函数返回解析错误

> ID：15411354
> 
> 赞同：0
> 
> 时间：2013-03-14T13:58:06.150
> 
> 标签：php, codeigniter, parsing, ucfirst

我正在尝试在我的 codeigniter 控制器中添加一个 ucfirst() 函数，所以我将返回一个带有第一个大写字母的字符串。出于某种原因，我不断收到解析错误：

解析错误：语法错误，在第 7 行（我的 ucfirst 所在的行）中出现意外的 '('，期待 ',' 或 ';'。

尝试将 ucfirst() 更改为 ucfirst(strtolower($database)) 或 ucwords($database) 返回相同的结果。

我的代码是：

```
defined('BASEPATH') OR exit('No direct script access allowed');

class Somecontroller extends CI_Controller {
    private $database = "some_database";
    private $model = ucfirst($this->database)."_model";
    ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:59:46.063

来自[php 文档](http://php.net/manual/en/language.oop5.properties.php)

> 声明可以包含一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

`$model`您应该在类构造函数中初始化属性

```
public function __construct()
{
   // I guess you'll need to call parent constructor as well
   parent::__construct();
   $this->model = ucfirst($this->database) . '_model';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:00:22.057

您应该使用 $this->database 并在构造函数中分配

就像是：

```
function __construct()
{
   $this->model = ucfirst($this->database) . "whatEver";
} 
```

# javascript - 如何允许使用 htacess 列出目录，但禁用浏览器缓存？

> ID：15411355
> 
> 赞同：0
> 
> 时间：2013-03-14T13:58:06.790
> 
> 标签：javascript, apache, caching

我在 Apache 2.2.14 服务器（Ubuntu 10.04）上有一个 XML 目录。我只是想让人们从我的 PHP 应用程序中提供一个链接来从这个目录下载文件。

问题是浏览器缓存了它们的初始文件列表，除非按下 F5，否则不会更新以显示新文件。这个目录有很多新文件，虽然它不需要实时更新，但我希望不必在页脚写注释，提醒客户他们需要 F5 才能看到他们刚刚上传的文件。

额外的问题：我可以只`Options -Indexes`输入 httpd.conf 以避免创建根 .htaccess 文件吗？

**httpd.conf**

```
ServerName localhost
FileETag none
ExpiresActive On
ExpiresDefault "access plus 30 days"
ExpiresByType text/html A86400 
```

**根 .htaccess 文件：**

```
Options -Indexes 
```

**XML 目录 .htaccess 文件**

```
Options +Indexes
IndexIgnore .. *.shtml
IndexOptions SuppressHTMLPreamble XHTML HTMLTable SuppressDescription Charset=UTF-8 NameWidth=*
HeaderName HEADER.shtml
ReadmeName README.shtml
AddType text/xml .xml 
```

**头文件.shtml**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
  <head>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1">
  </head>
  <body> 
```

**自述文件.shtml**

```
 </body>
</html> 
```

可能值得指出的是，这是通过 javascript 打开链接的方式：

```
var newWin = window.open(url,name,'height=800,width=600,menubar=no,titlebar=0,resizable=yes,toolbar=no,scrollbars=yes,screenX=100,screenY=100,dependent=no');
newWin.focus(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:20:43.103

我添加`ExpiresActive Off`到**XML 目录 .htaccess 文件**中，目录列表现在总是新鲜的。

# ruby - 在 Ruby 中是否可以绕过单例方法调用？

> ID：15411360
> 
> 赞同：2
> 
> 时间：2013-03-14T13:58:12.037
> 
> 标签：ruby

我正在学习我的对象个性化，`IRB`我确实尝试了下面的代码：

```
class Foo
    def talk
        p "huanng"
    end
end
#=> nil

module Bar
    def talk
        p "hunnggg"
    end
end
#=> nil

foo = Foo.new
#=> #<Foo:0x1152b88>

class << foo
    def talk
        p "hukkangg"
    end
 include Bar
end
#=> #<Class:#<Foo:0x1152b88>>

foo.talk
"hukkangg"
#=> "hukkangg" 
```

上面的输出很明显。

无论如何，通过调用`talk`对象上的单例方法并在using`foo`中执行该方法？`talk``class Foo``foo.talk`

在调用中寻找输出`foo.talk`为`"huanng"`.

***编辑：***

根据**@Anthony Alberto**的建议，我可以访问`talk`of `Bar`。

```
class Foo
    def talk
        p "huanng"
    end
end
#=> nil

module Bar
    def talk
        p "hunnggg"
    end
end
#=> nil

foo = Foo.new
#=> #<Foo:0x1152b88>

class << foo
    def talk
        super
        return
        p "hukkangg"
    end
    include Bar
end
#=> #<Class:#<Foo:0x11f6670>>

foo.talk
"hunnggg"
#=> nil 
```

在同一条路线上，如何绕过单例`talk`方法和？`Foo``talk``talk``Bar`

***编辑***

最后不是答案，但接近实际需要的是**@Neil**

```
class Foo
    def talk
        p "huanng"
    end
end
#=> nil

module Bar
    def talk
        p "hunnggg"
    end
end
#=> nil

foo = Foo.new
#=> #<Foo:0x1152b88>

class << foo
    def talk
     p "hukkangg"
    end
   include Bar
end

#=> #<Class:#<Foo:0x1200db0>>

foo.dup.talk
#"huanng"
#=> "huanng"

foo.talk
#"hukkangg"
#=> "hukkangg" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:50:27.597

技术上不针对同一个实例调用，但 dup 不会复制单例的东西（克隆*将*），所以你可以这样做：

```
foo.dup.talk 
```

. . . 在某些情况下可能就足够了？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:43:39.507

您可以，尽管它（可以理解）令人费解。您从类中获取实例方法（绕过单例类）并调用它`foo`：

```
an_unbound_method = foo.class.instance_method(:talk)
a_bound_method = an_unbound_method.bind(foo)
a_bound_method.call 
```

# r - Plotting error ellipses in R

> ID：15411364
> 
> 赞同：5
> 
> 时间：2013-03-14T13:58:32.927
> 
> 标签：r, plot

I'm trying to plot a U-Pb isochron, which is basically an xy plot, with an error ellipses around each datapoint to indicate the precision of that data point. Here's an example of what I'm trying to achieve, the only difference being that I have a lot more data points:

[![example plot](../Images/105987bdd45326253d70a5755f846e45.png)](https://i.stack.imgur.com/BEO4J.jpg)

I have symmetrical + and - errors for each data point in x and y space that I would like to use to dictate the shape of the error ellipse.

Below is the code that I have written so far. This plots up my data, but instead of error ellipses I currently have errorbars.

```
# Select data file.
fname<-file.choose()
# Rename imported data file.
upbiso <- read.table(file=fname, header= TRUE)
# Attaches data file as default data source.
attach(upbiso)
# Reads and display column headers in console.
names(upbiso)
# Sets margins around plot.
par(mar=c(5,5,4,2))
# Plots 238U/206Pb vs 207Pb/206Pb with superscript notation for isotopic masses, xlim and ylim sets min and max limit for axes, las rotates y axis labels, cex.lab increases the size of the axis labels.
plot(UPb, PbPb, xlab = expression({}^238*"U/"*{}^206*"Pb"), ylab = expression({}^207*"Pb/"*{}^206*"Pb"), xlim = c(0,2500),ylim = c(0, 1), las=1, cex.lab = 1.5)
# Opens Oceanographic package to run errorbars function and runs 1 sigma percent error bars for x-y co-ordinates.
library(oce)
errorbars(UPb,PbPb,UPbErrP,PbPbErrP, percent=T) 
```

How would I go about replacing the errorbars with error ellipses?

Here's a Google docs link to my data which is in .txt format.

[https://docs.google.com/file/d/0B75P9iT4wwlTNUpQand2WVRWV2s/edit?usp=sharing](https://docs.google.com/file/d/0B75P9iT4wwlTNUpQand2WVRWV2s/edit?usp=sharing)

Columns are `UPb`, `UPbErrP` (error on UPb at 1 sigma %), `UPbErrAbs` (absolute error on UPb), and then the same again for the `PbPb` data.

If you need me to clarify anything just let me know and I'll do my best

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T14:21:32.710

A few month ago I wrote a little function to draw ellipses to [answer someone else's question](https://stackoverflow.com/questions/11944767/draw-an-ellipse-based-on-its-foci/11947391#11947391). By simplifying it a little we can achieve something useful for your issue I think.

```
ellipse <- function(a,b,xc,yc,...){
    # a is the length of the axis parallel to the x-axis
    # b is the length of the axis parallel to the y-axis
    # xc and yc are the coordinates of the center of the ellipse
    # ... are any arguments that can be passed to function lines
    t <- seq(0, 2*pi, by=pi/100)
    xt <- xc + a*cos(t)
    yt <- yc + b*sin(t)
    lines(xt,yt,...)
    }

plot(UPb, PbPb, pch=19,
     xlab = expression({}^238*"U/"*{}^206*"Pb"), ylab = expression({}^207*"Pb/"*{}^206*"Pb"), 
     xlim = c(0,2500),ylim = c(0, 1), las=1, cex.lab = 1.5)

apply(upbiso, 1, 
      function(x)ellipse(a=x[2]*x[1]/100, b=x[5]*x[4]/100, 
                               xc=x[1], yc=x[4], col="red")) 
```

![enter image description here](../Images/16982d1b3e6c7f2aa6be42c0fe6cb2c5.png)

# eclipse - Eclipse无法执行jdk1.7.0/bin/java，error=13，权限被拒绝

> ID：15411366
> 
> 赞同：0
> 
> 时间：2013-03-14T13:58:39.110
> 
> 标签：eclipse, jakarta-ee, maven-plugin, eclipse-juno

我在 Eclipse Juno 中有一个 Maven Web 应用程序项目，当我使用 执行该项目时`Goals: clean install tomcat:run`，出现错误提示：

```
Exception occurred executing command line.

Cannot run program "/home/huahsin68/tool/jdk1.7.0/bin/java" (in directory "/home/huahsin68/workspace/web1"): error=13, Permission denied 
```

我已经在控制台应用程序上进行了测试，它工作正常。有什么想法吗？

**2013 年 3 月 21 日更新**

我不确定这是否发生在其他平台上，但我确定我在 Fedora 17 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:07:57.303

[http://wiki.apache.org/httpd/13PermissionDenied](http://wiki.apache.org/httpd/13PermissionDenied)

通过 cmd 行检查文件路径的权限。您的 Tomcat 无权访问包含文件的目录。您将需要更改这些权限。

您如何执行此操作取决于您使用的操作系统。

# c# - Imagebox 转换为位图

> ID：15411369
> 
> 赞同：0
> 
> 时间：2013-03-14T13:58:52.457
> 
> 标签：c#, winforms, emgucv

我正在编写一个使用网络摄像头捕获图像的 C# 程序。对于输出图像的框，选择`imagebox`（在`EmguCV`库中）。我愿意从输出图像中获取像素信息。根据我的发现，我需要将图像转换`imagebox`为位图，然后我可以使用`picturebox`in c# 来执行分析（[http://www.emgu.com/wiki/index.php/Working_with_Images#Using_ImageBox](http://www.emgu.com/wiki/index.php/Working_with_Images#Using_ImageBox)）所以，Tobitmap( ) 方法是必需的。谁能告诉我如何根据该函数将图像框图像转换为位图？非常感谢

```
private void ProcessFrame(object sender, EventArgs arg)
{
   ImageFrame = _capture.QueryFrame();
   detectimageBox.Image = ImageFrame;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:06:07.650

只需将 Image 传递给 Bitmap 构造函数：

```
Bitmap bitmap = new Bitmap(detectImageBox.Image); 
```

当然，您可以创建一个扩展：

```
 public static Bitmap ToBitmap(this PictureBox imageBox)
    {
        return new Bitmap(imageBox.Image)
    } 
```

像这样称呼它：

```
Bitmap bitmap = detectImageBox.ToBitmap(); 
```

注意：我在这里没有做过空检查或任何事情，但我建议你将它们包括在内。

# windows - 如何在 Windows 8 上更新 Meteor？

> ID：15411370
> 
> 赞同：0
> 
> 时间：2013-03-14T13:58:53.523
> 
> 标签：windows, meteor

我在 Windows 8 上运行 Meteor PREVIEW 0.5.7，这就是发生的事情：

> ///////////////////////////////////////// /////////////////////////
> 
> ///////////////////////////////////////// /////////////////////////
> 
> 流星已经过时了。请运行：
> 
> ```
>  meteor update 
> ```
> 
> ///////////////////////////////////////// /////////////////////////
> 
> ///////////////////////////////////////// /////////////////////////
> 
> Windows 尚不支持通过 Meteor 进行更新。查看[http://win.me](http://win.me)
> 
> teor.com 每周...

我确实检查了 win.meteor.com 但没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:01:11.550

目前 Windows 版本的流星正在开发中，因此目前无法在 Windows 上更新超过 0.5.7 版本。

# java - 通过表单调用其他 jsp：HTTP 状态 405 - 此 URL 不支持 HTTP 方法 POST

> ID：15411372
> 
> 赞同：0
> 
> 时间：2013-03-14T13:58:55.733
> 
> 标签：java, jsp

我有一个jsp文件，它调用另一个jsp来创建一个bean：

例如 ：

```
 <form action="klant.jsp" method="post">
    <!-- retreval of possible message from the currentMessage bean -->
    <h3><jsp:getProperty property="message" name="Message"/></h3>

    <div id="klant-name">Klant name : </div><div id="Klant-field"><input type="text" name="loginName" /></div><br> 
    <div id="klant-pwd">Klant Password : </div><div id="Klant-field"><input type="text" name="pwd" /></div><br> 
    <input type="submit" value="Create"/>
</form> 
```

工作正常并且确实调用了jsp文件

但是此 jsp 中的第一个（表单）调用（与上述相同）不起作用并给出 HTTP 状态 405 - 此 URL 错误不支持 HTTP 方法 POST。底部的第二种形式确实有效？在以下两个jsp中都没有帖子！

```
<form action="feedbacktypical.jsp" method="post" >

    <P>To add a new FeedbackTypical record to the database, submit the
        following data:</P>

            <!-- retreval of possible message from the currentMessage bean -->
    <h3><jsp:getProperty property="message" name="Message"/></h3>

    <TABLE>
        <TR VALIGN=TOP ALIGN=LEFT>
            <TD><B><I>StartDate: <br> (mm/dd/yyyy)
                </I></B></TD>
            <TD><input id="datepicker" NAME="startdate"></TD>
        </TR>

        <TR VALIGN=TOP ALIGN=LEFT>
            <TD><B><I>EndDate: <br> (mm/dd/yyyy)
                </I></B></TD>
            <TD><INPUT id="datepicker2" NAME="enddate"></TD>
        </TR>

        <TR VALIGN=TOP ALIGN=LEFT>
            <TD><B><I>Typical name : <br>
                </I></B></TD>
            <TD><INPUT type="text" name="name"></TD>
        </TR>

        <TR VALIGN=TOP ALIGN=LEFT>
            <TD><B><I>Visibility</I></B></TD>
            <TD><INPUT TYPE="checkbox" name="visibility" value="Visibility" checked><BR></TD>
        </TR>

    </TABLE>    
    <input type="submit" value="Add"/>      
</form>

<p>

<form method="post" action="welcome_feedbackverantwoordelijke.jsp">
<input type=submit name="command" value="Terug naar feedbackverantwoordelijke menu">
</form> 
```

任何建议都会更受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:34:09.800

> 任何建议都会更受欢迎！

我建议您看一下上面的 JSP 在单击相应按钮时调用的 servlet 方法。最有可能的原因是一个被编码为支持 POST 请求而另一个不是。

# jquery - 在 iframe 之外打开新窗口

> ID：15411376
> 
> 赞同：0
> 
> 时间：2013-03-14T13:59:15.130
> 
> 标签：jquery, iframe

我目前有一个包含 iframe 的页面。该 iframe 正在从包含表单的 3rd 方站点打开一个页面。

我在 iframe 中显示的页面是：

[http://local.amazon.com/subscribe](http://local.amazon.com/subscribe)

我无法控制 iframe 中出现的页面，因为它来自第 3 方。

我想要发生的是在用户单击继续然后单击订阅后，下一页需要跳出我的 iframe 并打开全窗口。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:40:40.597

不，您无法检测到在不受您控制的页面上发生的点击（同源策略）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:56:47.267

在iframe`target="_blank"`和`top.location = self.location.href`.

# apache-flex - 如何在 Panel Flex 中绘图？

> ID：15411383
> 
> 赞同：0
> 
> 时间：2013-03-14T13:59:27.317
> 
> 标签：apache-flex, actionscript, line, draw, mxml

当我想在面板中画线时遇到问题。我不知道该怎么做，请解释我...

我试图将 SpriteVisualElement 放在面板中，但我从 Flex builder 得到“此处不允许组件声明”。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >

<fx:Script>
    <![CDATA[
        import mx.graphics.SolidColorStroke;

        import spark.primitives.Line;

        private function drawLine():void 
        {
            var myShape:Shape = new Shape();
            myShape = new Shape() ;

            myShape.graphics.lineStyle(2, 0x00008B, .75);
            myShape.graphics.moveTo(500, 500);

            myShape.graphics.lineTo(25, 45);
            spr.addChild(myShape);
        }
    ]]>
</fx:Script>

<mx:Button label="Click" click="drawLine()" />
<mx:Panel  y="30" width="400" height="250" layout="vertical" title="Panel" borderColor="#008040" fontFamily="Arial" fontWeight="bold" fontSize="13">

<mx:Text text="Drawing.." fontWeight="bold"/>
        <s:SpriteVisualElement width="500" height="500" id="spr"/>
</mx:Panel>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:05:41.780

使用火花面板

```
<s:Panel> 
```

# python - django 表单排除字段 - 通过表单实例向它们添加值时出错

> ID：15411385
> 
> 赞同：0
> 
> 时间：2013-03-14T13:59:34.473
> 
> 标签：python, django

我有 2 个模型 'Student' 和 'Abc' 。

```
class Abc(models.Model):
    student = models.ForeignKey(Student)
    name = models.CharField(max_length=10)
    nickname = models.CharField(max_length=20)

ClassAbcForm(forms.ModelForm):
    class Meta:
        model = Student
        fields = ('name', 'nickname')  # Note that I didnt include student field. 
```

我没有包括“学生”字段，因为它可以通过视图填充。用户只需
输入“姓名”和“昵称”字段。因此，我通过在 Meta 类中设置“字段”，仅包含要在表单中显示的那些字段。

我在视图中尝试如下：

```
student = student_instance
student_id = id 
```

但是，得到了错误。

如果我在表单中的字段中添加“学生”，那么它工作正常。有什么解决办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:29:47.737

```
ClassAbcForm(forms.ModelForm):
    class Meta:
        model = Abc //should be Abc not Student
        fields = ('name', 'nickname')

def view_name(request):
    student = Student(student_id=student_id) //define first student here
    if request.method == 'POST':
        form = ClassAbcForm(request.POST, instance=student)
        if form.is_valid():
            form.save()

    ................ 
```

# spring-batch - ItemReaderAdapter 和 ItemStream

> ID：15411388
> 
> 赞同：1
> 
> 时间：2013-03-14T13:59:43.070
> 
> 标签：spring-batch

```
<bean id="itemReader" class="org.springframework.batch.item.adapter.ItemReaderAdapter">
  <property name="targetObject" ref="fooService" />
  <property name="targetMethod" value="generateFoo" />
</bean> 
```

鉴于这个简单的设置， fooService 是一个简单的 pojo spring bean。

如果 fooService 实现了 ItemStream 并且正确地实现了 open 和 update 方法，我的 ItemReader 是否可以重新启动？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:49:07.807

好的，我终于回答了我自己的问题。

我发现 ItemReaderAdapter 非常有用，因为大多数时候我们已经有了某种 DAO 或服务来访问我们需要的数据。

但我的测试表明，如果我使用 ItemReaderAdapter impl。开箱即用，它们无法重新启动，因为它们没有实现 ItemStream！

因此，如果你们中的任何人想要使用具有可重新启动功能的 ItemReaderAdapter，这就是我的解决方案。

经过测试和工作;-)

**1) 创建您自己的 ItemReaderAdapter 实现：**

```
package xxx.readers.adapters;

import java.math.BigDecimal;

import org.apache.log4j.Logger;
import org.springframework.batch.item.ExecutionContext;
import org.springframework.batch.item.ItemReader;
import org.springframework.batch.item.ItemStream;
import org.springframework.batch.item.ItemStreamException;
import org.springframework.batch.item.adapter.AbstractMethodInvokingDelegator;
import org.springframework.beans.factory.annotation.Autowired;

/**
* Invokes a custom method on a delegate plain old Java object which itself
* provides an item.
* 
* overriden to implements the ItemStream interface
* 
* @author Benoit Campeau
*/
public class MyItemReaderAdapter<T> extends AbstractMethodInvokingDelegator<T>  implements ItemReader<T>, ItemStream {

private static final Logger log = Logger.getLogger(MyItemReaderAdapter.class);

private long currentCount = 0;

private final String CONTEXT_COUNT_KEY = "ReglementAdapter.count"; 

/**
 * @return return value of the target method.
 */
public T read() throws Exception {

    super.setArguments(new Long[]{currentCount++});
    return invokeDelegateMethod();
}
@Override
public void open(ExecutionContext executionContext)
        throws ItemStreamException {
    currentCount = executionContext.getLong(CONTEXT_COUNT_KEY,0);
    log.info("Open Stream current count : " + currentCount);

}

@Override
public void update(ExecutionContext executionContext) throws ItemStreamException {
    executionContext.putLong(CONTEXT_COUNT_KEY, currentCount);
    log.info("Update Stream current count : " + currentCount);
}

@Override
public void close() throws ItemStreamException {
    // TODO Auto-generated method stub

}

} 
```

**2) 现在使用您的 impl 将 Reader 配置为 Adapter。(MyItemReaderAdapter)。**

```
<bean id="MyReader" class="xxx.readers.adapters.MyItemReaderAdapter">
    <property name="targetObject" ref="someAdapter" />
    <property name="targetMethod" value="next" />       
</bean> 
```

**3) 最后，创建一个用作适配器委托类的组件：**

```
package fcdq.iemt.batch.validation.reglement.readers.adapters;

import java.util.List;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component("someAdapter")
public class SomeAdapter {

private static final Logger log = Logger.getLogger(SomeAdapter .class);

@Autowired
private SomeService srv1;

private List<Transaction> listTrx;

public void init() {
    log.info("Initializing " + SomeAdapter.class.toString() );
    listTrx = srv1.findByTimestampAndStatus(context.getBeginTSCutoff(), context.getEndTSCutoff(), TransactionTypeEnum.TRANSFER_COMPLETE);
        }

/**
 * read method delegate  
 * @return
 */
public Transaction next(Long index) {
    if (listTrx != null && listTrx.size() > index ) {
        return listTrx.get(index.intValue());
    } else {
        return null;
    }

}

} 
```

注意事项：

1.  注意 MyItemReaderAdapter 中的 setArguments。必须将存储在 execution_context 中的 currentCount 的值传递给委托的 read() 方法

2.  注意 MyItemReaderAdapter 没有实现 InitializingBean 接口。我使用 stepListener 代替，因为我想初始化我的项目列表以便及时读取。

希望它会帮助别人。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T05:50:18.573

另一种实现相同目的的方法是扩展`AbstractItemCountingItemStreamItemReader`

来自文档::

> ItemReaders 的抽象超类，通过在 ExecutionContext 中存储项目计数来支持重新启动（因此需要在运行之间保留项目排序）。子类本质上不是线程安全的

示例代码：

```
package com.***.batch.reader;

import java.util.List;

import org.apache.log4j.LogManager;
import org.apache.log4j.Logger;
import org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.mivim.campaignmanager.data.model.custom.CustomCampaignSubscriberEmail;
import com.mivim.campaignmanager.service.CampaignSubscriberService;

@Component
public class CampaignSubscriberItemReader extends
        AbstractItemCountingItemStreamItemReader<CustomCampaignSubscriberEmail> {

    private Logger logger = LogManager.getLogger(CampaignSubscriberItemReader.class);

    @Autowired
    CampaignSubscriberService campaignSubscriberService;

    List<CustomCampaignSubscriberEmail> customCampaignSubscriberEmails;

    final String ecName = "csItemReaderContext";

    public CampaignSubscriberItemReader() {
        setName(ecName);
    }

    @Override
    protected CustomCampaignSubscriberEmail doRead() throws Exception {
        CustomCampaignSubscriberEmail customCampaignSubscriberEmail = customCampaignSubscriberEmails
                .get(getCurrentItemCount() - 1);
        return customCampaignSubscriberEmail;
    }

    @Override
    protected void doOpen() throws Exception {
        customCampaignSubscriberEmails = campaignSubscriberService.getPendingCampaignSubscriber();

        setMaxItemCount(customCampaignSubscriberEmails.size());

    }

    @Override
    protected void doClose() throws Exception {
        customCampaignSubscriberEmails.clear();
        setMaxItemCount(0);
        setCurrentItemCount(0);
    }

} 
```

# c# - 用户在文本框中输入时 C# 延迟 SQL 查询

> ID：15411393
> 
> 赞同：1
> 
> 时间：2013-03-14T13:59:53.073
> 
> 标签：c#, winforms, timer

我刚刚编写了我的第一个程序，该程序使用用户写入文本框中的信息来查询 SQL 数据库。这是使用 Windows 窗体的 C#。我的目标是让它类似于我们的 ERP 软件中的搜索功能，其中结果显示为用户类型（类似于 Google 的预测搜索功能）。

我正在努力减少对数据库的查询数量。现在我有它，以便在用户输入至少 3 个字符之前不会执行查询，否则会返回太多结果。

```
private void SearchField_TextChanged(object sender, EventArgs e)
{
    string search = SearchField.Text;
    if (search.Length >= 3)
    {
        dataGridView1.DataSource = sql.ExecuteQuery(Query(search));
    }
} 
```

我要添加的是查询延迟，直到用户停止输入或者在这么多毫秒内没有输入字符。我一直在查看计时器类，但在努力解决我发现正确实现它的示例。基本上我想将我的代码更改为如下所示：

```
private void SearchField_TextChanged(object sender, EventArgs e)
{
    string search = SearchField.Text;
    if (search.Length >= 3 && aTimer.Time > 500)  //500 is milliseconds
    {
        dataGridView1.DataSource = sql.ExecuteQuery(Query(search));
    }
    aTimer.Reset();
} 
```

如果使用计时器类，我不知道如何正确实现它。如果有更好的解决方案，我也会对此持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:52:34.640

您要做的是将查询安排在将来的某个时间点发生，同时能够在用户键入时重置或撤销待处理的查询。这是一个例子：

```
using System;
using System.Diagnostics;
using System.Drawing;
using System.Windows.Forms;

class Form1 : Form
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }

    Timer queryTimer;
    TextBox SearchField;

    public Form1()
    {
        Controls.Add((SearchField = new TextBox { Location = new Point(10, 10) }));
        SearchField.TextChanged += new EventHandler(SearchField_TextChanged);
    }

    void SearchField_TextChanged(object sender, EventArgs e)
    {
        if (SearchField.Text.Length < 3)
            RevokeQueryTimer();
        else
            RestartQueryTimer();
    }

    void RevokeQueryTimer()
    {
        if (queryTimer != null)
        {
            queryTimer.Stop();
            queryTimer.Tick -= queryTimer_Tick;
            queryTimer = null;
        }
    }

    void RestartQueryTimer()
    {
        // Start or reset a pending query
        if (queryTimer == null)
        {
            queryTimer = new Timer { Enabled = true, Interval = 500 };
            queryTimer.Tick += queryTimer_Tick;
        }
        else
        {
            queryTimer.Stop();
            queryTimer.Start();
        }
    }

    void queryTimer_Tick(object sender, EventArgs e)
    {
        // Stop the timer so it doesn't fire again unless rescheduled
        RevokeQueryTimer();

        // Perform the query
        Trace.WriteLine(String.Format("Performing query on text \"{0}\"", SearchField.Text));
    }
} 
```

# asp.net - .Net - Visual Studio 2010 无法识别 ASP 页面上的某些 HTML 和 CSS 元素

> ID：15411396
> 
> 赞同：1
> 
> 时间：2013-03-14T14:00:08.883
> 
> 标签：asp.net, html, css, visual-studio-2010

我正在尝试设置我的新开发环境。我正在使用源代码管理，所以代码本身都没有改变。

我遇到的问题之一是 VS2010 无法识别某些 HTML 和 CSS 元素。

```
<body MS_POSITIONING="GridLayout">
<form id="_Default" style="MARGIN: 5px" method="post" runat="server" 
                onsubmit="return document.body.style.cursor = 'wait';">
<div class="SectionTitle" style="WIDTH: 780px">Portfolio Search</div>
<table cellSpacing="0" cellPadding="3" width="780" border="0"> 
```

在上面的块中，VS 将无法识别：

*   MS_定位
*   单元格间距
*   单元格填充
*   边界

自从它在我以前的 PC（也是 VS2010）上运行以来，代码没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:03:30.467

您的 Visual Studio 可能设置为识别有效的 HTML 4 或 HTML 5。

此外，HTML 4 要求所有属性都为小写。所以你的 HTML 应该是：

```
<body ms_positioning="GridLayout">
...
<table cellspacing="0" cellpadding="3" width="780" border="0"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:16:46.847

当您查看 .aspx 页面的源视图时，在 VS2010 的其中一个工具栏中应该有一个下拉菜单，用于设置“用于验证的目标架构”。尝试将其更改为“Internet Explorer 6.0”。

# dojo - dojox/form/manager“试图注册小部件”错误

> ID：15411402
> 
> 赞同：0
> 
> 时间：2013-03-14T14:00:25.750
> 
> 标签：dojo

**这是我的 HTML：**

```
**<form action="http://localhost/so/users/login" method="post" accept-charset="utf-8" class="user_login_form" id="user_login_form" widgetid="user_login_form" data-dojo-type="dojox/form/Manager">
.
.
.
</form>** 
```

**这是我的 js 代码 **

```
<script="text/javascript">

require(
    ['dijit/registry','dojo/_base/array','dojo/parser','dojo/ready','dijit/form/TextBox','dijit/form/Button','dojox/form/Manager',

    ],
    function(registry,array,parser,ready,textbox,button

    ){
    // parse the dom
    parser.parse();

}); // close the dojo sandbox

</script> 
```

**这是控制台上的错误**

**已弃用：dojox.form.Manager::getDescendants() 已弃用。请改用 getChildren()。-- 将在版本中删除：2.0 kernel.js:203 dojo/parser::parse() 错误错误参数：未定义获取堆栈：函数（）{[本机代码]}消息：“尝试使用 id== 注册小部件user_login_form 但该 id 已注册”设置堆栈：函数（）{[本机代码]}类型：未定义_*原型*_：SetUpError.d**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:56:53.767

请在您实际创建小部件的代码之前在 onLoad() / 尝试以下操作：

```
if (dojo.byId('user_login_form') != null) {
                        dojo.forEach(dijit.findWidgets(dojo.byId('user_login_form')), function (w) {
                            w.destroyRecursive();
                        });
                    }
                    dojo.destroy(dojo.byId('user_login_form'));
                    if (dijit.byId('user_login_form')) {

dijit.byId('user_login_form').destroy();
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:41:45.663

由于您已经指定了将由注册表使用的 id，因此 widgetid 似乎是多余的，实际上可能会导致错误。

# javascript - 在 JavaScript 中使用多个 return 语句

> ID：15411404
> 
> 赞同：1
> 
> 时间：2013-03-14T14:00:30.713
> 
> 标签：javascript, return

我正在尝试使用多个返回，但只是不断破坏代码。我尝试了一些示例，但找不到正确的组合。

如何将这两个返回语句合并为一个？

```
$(".bar").popover({
content: 
    function (){
        return $(this).data('dataObj').status;
        return $(this).data('dataObj').timeline;
    }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T14:02:01.930

采用

```
function (){
    return $(this).data('dataObj');
} 
```

或者

```
function (){
    // return an array
    return [ $(this).data('dataObj').status, $(this).data('dataObj').timeline ]
} 
```

或者

```
function (){
    // return a associative array
    return { "status": $(this).data('dataObj').status, "timeline": $(this).data('dataObj').timeline }
} 
```

并处理调用者中的组件。

**更新**

的`content`参数`popover`需要一个字符串作为参数，你可以这样做：

```
function (){
    return $(this).data('dataObj').status + " " + $(this).data('dataObj').timeline;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:02:38.543

撇开这种特殊情况，插件需要某种类型的返回值（在这种情况下显然是一个字符串），你不能真的......**返回语句终止函数**。您需要做的是返回一个包含这两个值的对象（或数组） -

```
var status = $(this).data('dataObj').status;
var timeline = $(this).data('dataObj').timeline;
return [status,timeline]; 
```

或者

```
var status = $(this).data('dataObj').status;
var timeline = $(this).data('dataObj').timeline;
var returnObj = {'status':status, 'timeline':timeline};
return returnObj; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:04:21.880

您可以返回包含这两项的 objext ir 数组

```
$(".bar").popover({
content: 
    function (){
        return 
        {
        status: $(this).data('dataObj').status;
        timeline: $(this).data('dataObj').timeline;
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:04:01.413

尝试返回一个以 .status 和 .timeline 作为元素的数组。好的 Lix 更快。

# java - 如果bean属性包含http，如何制作超链接？

> ID：15411405
> 
> 赞同：0
> 
> 时间：2013-03-14T14:00:32.200
> 
> 标签：java, jsp, struts

在我的应用程序中，我开发了一个留言板，最终用户可以在其中发布消息并获得回复。如果消息（commentText）包含指向网站的任何链接，我需要将它们显示为超链接。如何做到这一点？我正在使用struts 1.3。

JSP 代码：

```
<tr>
    <td width="8%">
    <span class="formlabel">
              <bean:message key="ui.jsp.dashboard.news.showNews.message" />
    </span>
    </td>
    <td width="80%">
       :&nbsp;&nbsp;<a><bean:write name="record" property="commentText" /></a>
    </td>
</tr> 
```

commentText 是字符串类型，值是从数据库中检索的。如果`commentText contains http`我需要显示它`as hyper link`。

```
Is it possible to represent the plain text that commentText holds completely as html ? 
```

欢迎任何想法，

谢谢

# pjsip - 可以使用 pjsip 通过 3CX 隧道连接到 3CX 电话系统吗？

> ID：15411407
> 
> 赞同：2
> 
> 时间：2013-03-14T14:00:33.553
> 
> 标签：pjsip, sip-server, 3cx

我将把问题分成一些子问题：

1.  3CX 隧道是真正的 TCP SIP 代理吗？
2.  可以使用pjsip连接吗？
3.  如果可能，我应该如何设置帐户和连接数据？

让我们考虑在`3CX server`NAT 和 public 后面运行`IP address is: 123.123.123.123`，隧道正在工作，`port 5090`3CX 的内部地址是 192.168.1.13。SIP 用户是`user1@123.123.123.123 with pass: userPass and the tunnel has the password tunnelPass.`

账户结构应该如何`pjsip`初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T15:17:28.320

1.  它不是与 SIP 代理服务器相同意义上的 SIP 代理。它重新打包并通过单个端口（因此，隧道）发送所有媒体、SIP 和其他相关流量。

3CX 软电话内置了此功能。3CX 隧道代理是隧道流量的简单中继，因此网络上的任何 voip 流量都可以使用隧道（而不仅仅是内置它的 3cx 软电话）。

1.  不，只有软电话的隧道代理被建立来连接它。要使其他任何东西连接到它，需要自定义编程和分析它的工作原理。这在理论上是可能的，但可能不值得你花时间。

2.  不适用，因为无法使用替代客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-05T17:56:41.633

您可以通过 3CX SIP 代理管理器使用隧道。也就是说，安装 3CX SIP 代理管理器，它将在它和 3CX 之间建立隧道。然后使用 3CX SIP 代理管理器作为代理将您的 pjsip 应用程序指向 3CX。这样你就可以连接任何东西。例如，您可以使用隧道连接硬件电话...

# iphone - 自动续订：一个月有多长？

> ID：15411408
> 
> 赞同：10
> 
> 时间：2013-03-14T14:00:39.030
> 
> 标签：iphone, objective-c

我对一些问题感到困惑：

1：自动续费订阅的1个月期限是30天还是取决于自然月？

因为我只能在沙盒模式下测试，所以持续时间只有几分钟......也许Apple只是简单地计算它：2013\01\15 -> 2013\02\15 -> 2013\03\15。如果是这样，第二个问题出现了

2：例如：我在 2013\03\31 购买了每月自动续订，因为 2013\04 只有 30 天，那么我的订阅的 expires_date 是多少天？2013\04\30 或 2013\05\01 或其他日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:30:05.217

它增加了 1 个月，而不是 30 天。1 个月的天数不同。因此，在 3/31 购买订阅将在 4/30 结束。

您可以使用 NSDate、NSCalendar 和 NSDateComponents 将月份添加到日期，并查看它将持续多长时间。更多信息在这里：[修改 NSDate 以表示从今天开始的 1 个月](https://stackoverflow.com/questions/185780/modifying-nsdate-to-represent-1-month-from-today)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T22:58:03.233

我可以通过我自己在 iOS 和 Android 上的应用数据来确认这一点。

例如，如果有人在一个月的 15 日购买了每月续订订阅，那么它将在下个月的 15 日续订，无论该月有多少天。

如果有人在 3 月 31 日购买订阅，那么它将在 5 月 1 日续订（因为 4 月没有 31 天，续订日期将跳到日历年的下一个可用日期 - 这也适用于闰年的 2 月， ETC）。

鉴于此，并假设您的应用程序的主要收入来自订阅，随着时间的推移，您应该期望在任何给定月份的 31 日看到低于平均销售额，因为不会有那么多的续订。但这无需担心，因为您应该期望在漫长的一个月之后的任何一个月的第一天看到高于平均销售额的事实抵消了这一点。如果您在任何一个月的 31 日检查您的统计数据，请不要失望。

# entity-framework - EF 5.0 代码优先导航属性

> ID：15411411
> 
> 赞同：0
> 
> 时间：2013-03-14T14:00:51.930
> 
> 标签：entity-framework, code-first

我有一个用户实体，其中存储了我的用户。对于某些用户（管理员），我想添加其他详细信息。我写了以下代码。

```
 public partial class UserProfile 
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    [Display(Name = "EMail")]
    [Required]
    public string UserName { get; set; }

    [ForeignKey("AdminDetailID")]
    public virtual AdminDetail AdminDetail { get; set; }
    public int? AdminDetailID { get; set; }

}   

public class AdminDetail 
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int AdminDetailID { get; set; }

    [ForeignKey("UserId")]
    public virtual UserProfile UserProfile { get; set; }
    public int UserId { get; set; }   

} 
```

我喜欢通过编写例如从我的 AdminDetail 表导航回我的用户配置文件表。admin.UserProfile.UserName。但是，当我运行 Database-Update 时，我收到：

*此关联的主体端必须使用关系流式 API 或数据注释显式配置。*

当我删除 UserProfile 属性时，一切正常。如何在 AdminDetail 类中创建“后退”导航？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:21:14.053

Entity Framework Code-First 允许将多态类存储在同一个表中。您是否考虑过使用这样的关系？

```
public partial class UserProfile 
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    [Display(Name = "EMail")]
    [Required]
    public string UserName { get; set; }
}   

public class AdminProfile : UserProfile   
{
    // AdminProfile members.
} 
```

这会生成一个 UserProfile 表，其中包含一个名为 Discriminator 的附加列，EF 会为您创建和管理该列。此列指示表中的每一行是 UserProfile 还是 AdminProfile。EF 访问时，UserProfile 类型的行会忽略特定于 AdminProfile 的列。

实体框架为您处理所有类型歧视，因此您无需直接担心。您的 DbContext 将只有一个 DbSet，它还可以存储 AdminProfile 类型的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:11:08.187

你不需要在你的`UserProfile`班级有一个 FK。要设置正确的 1:1，只有`AdminDetail`类实际上需要具有`UserProfile`该类的外键。您仍然可以保持虚拟属性能够来回导航，并且 EF 会知道您在做什么。与此类似：

```
public partial class UserProfile 
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    [Display(Name = "EMail")]
    [Required]
    public string UserName { get; set; }

    public virtual AdminDetail AdminDetail { get; set; }
} 
```

# java - 循环队列 java 打印不正确

> ID：15411419
> 
> 赞同：0
> 
> 时间：2013-03-14T14:01:09.310
> 
> 标签：java

嘿伙计们，我在尝试打印循环队列数组时遇到问题，这是我的代码：

```
public class CircularQueue {

    private int [] queue;
    private int front, rear;

    // do not change the constructor
    CircularQueue() {
        queue = new int [5];
        front = 0;
        rear = -1;
    }

    // FILL IN:
    // throws DSException if out of space
    public void enqueue ( int item  ) throws DSException {
            if ( front == 0 && rear == -1 ){
                    throw new DSException();
            }
            queue[rear+1] = item;
            rear = (rear+1)%queue.length;
    }

    // FILL IN:
    // throws DSException if no element in the queue
    // return the dequeued value
    public int dequeue () throws DSException {
            if ( front == 0 && rear == -1 ){
                    throw new DSException();
            }

            int temp = queue[front];
            queue[front] = 0;
            front = (front+1)%queue.length;
            return temp;

    }

    // FILL IN:
    // return the value at beginning of the queue
    // throws DSException if no element in the queue
    public int first () throws DSException {
            return front;
    }

    // FILL IN:
    // print the circular queue in the following format
    // - print "+" before the value at the front
    // - print "-" after the value at the rear
    // - print "." for the places without valid element.

    public void print () {
        System.out.print("      <");
        for ( int i = 0; i < queue.length; i++ ){
                if ( front == 0 && rear == -1 ){
                        System.out.print("."+"\t");
                } else if ( i == front ) {
                        System.out.print("+"+ queue[i]);
                } else if ( i == rear ) {
                        System.out.print( queue[i]+ "-");
                } else if ( i == front && i == rear) {
                        System.out.print("+"+ queue[i] +"-");
                } else {
                        System.out.print( queue[i] );
                }
        }
        System.out.print(">\n");
    }    

} 
```

结果是 EMPTY: <. . . . . > 排队 (0):

我应该将 0-4 入队并将某些元素出队，但它在入队 0 后停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:46:58.700

一个 CircularQueue 可以处于 3 种状态，其不变量如下：
空：前 == -1 && 后 == -1
满：(后+1)%queue.length == 前
既不是空也不是满：不满足条件上文提到的

 `public class CircularQueue {`

 ````
private int [] queue;
private int front, rear;

// do not change the constructor
CircularQueue() {
    queue = new int [5];
    front = -1; 
    rear = -1;
}

// FILL IN:
// throws DSException if out of space
public void enqueue ( int item  ) throws DSException,Exception {
        if ( front == -1 && rear == -1 ){
               front = 0;
               rear = 0;
               queue[rear] = item;
        }  
        else if((rear+1)%queue.length == front) {
                 throw new Exception("Full");
        }
        else {
             rear = (rear+1)%queue.length;
             queue[rear] = item;
        }

}

// FILL IN:
// throws DSException if no element in the queue
// return the dequeued value
public int dequeue () throws DSException {

        if ( front == -1 && rear == -1 ){
                throw new DSException();
        }
        else {
            int ret = queue[front];
            if(rear==front) {
                   rear = -1;
                   front = -1;
            }
            else {
                front = (front+1)%queue.length;
            }
            return ret;
        }
}

// FILL IN:
// return the value at beginning of the queue
// throws DSException if no element in the queue
public int first () throws DSException {
        if(front==-1 && rear ==-1) {
               throw new DSException();
        }
        return queue[front];
}

// FILL IN:
// print the circular queue in the following format
// - print "+" before the value at the front
// - print "-" after the value at the rear
// - print "." for the places without valid element.

public void print () {
    if(front==-1 && rear == -1) {
          for(int i=0;i<queue.length;i++) {
               System.out.print(".");
          }
    }
    else {
        if(front<=rear) {
              for(int i=0;i<=front-1;i++) { 
                  System.out.print(".");   
              }
              System.out.print("+");
              for(int i=front;i<=rear;i++) { 
                  System.out.print(queue[i]);
              } 
              System.out.print("-");
              for(int i=rear+1;i<=queue.length-1;i++) { 
                  System.out.print(".");   
              }
        }
        else  {
              for(int i=0;i<=rear;i++) { 
                  System.out.print(queue[i]);   
              }
              System.out.print("-");
              for(int i=rear+1;i<=front-1;i++) { 
                  System.out.print(".");
              } 
              System.out.print("+");
              for(int i=front;i<=queue.length-1;i++) { 
                  System.out.print(queue[i]);   
              }
        }

    }

} 
```

}`  `* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-05T12:55:38.803

这是我的方法。但我在这里假设数组中的空块初始化为零，并且任何有效条目都将是非零的。此外，如果队列部分填充，它将打印零。

```
public void print() {
            if (isEmpty()) {
                System.out.println("Queue is empty");
            } else {
                System.out.println("In order from latest to oldest");
                int i = front;
                while (i < array.length) {
                    System.out.print(array[i] + " ");
                    i++;
                }
                i = i % array.length;
                if(array[i] != 0) {
                    while(i < front) {
                        System.out.print(array[i] + " ");
                        i++;
                    }
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:05:59.093

圆形数组和前/后索引的问题是“满”和“空”是无法区分的。您将必须添加一个布尔值“空”，它最初是正确的，并在测试中使用。

```
private int [] queue;
private int front, rear;
private boolean empty;

// do not change the constructor
CircularQueue() {
    queue = new int [5];
    front = 0;
    rear = -1;
    empty = true;
}

// FILL IN:
// throws DSException if out of space
public void enqueue ( int item  ) throws DSException {
        if (!empty && (front - rear + queue.length) % queue.length == 1){
                throw new DSException();
        }
        queue[rear+1] = item;
        rear = (rear+1)%queue.length;
        empty = false;
}

// FILL IN:
// throws DSException if no element in the queue
// return the dequeued value
public int dequeue () throws DSException {
        if (empty){
                throw new DSException();
        }            

        int temp = queue[front];
        queue[front] = 0;
        front = (front+1)%queue.length;
        empty = (front - rear + queue.length) % queue.length == 1;
        return temp;

} 
````

# bash - RETVAL 是什么意思？

> ID：15411429
> 
> 赞同：10
> 
> 时间：2013-03-14T14:01:37.767
> 
> 标签：bash, shell

我正在尝试为脚本`start`和`stop`服务创建模板。我正在检查`tomcat`启动和停止的模板并查看命令`RETVAL=$?`。

这是做什么的？我应该保留它吗？顺便说一句，我的脚本在下面，以防你们想看。

```
#!/bin/bash
#===================================================================================
#
#
FILE: <script-file-name>.sh
#
#
USAGE: <script-file-name>.sh [-d] [-l] [-oD logfile] [-h] [starting directories]
#
# DESCRIPTION: List and/or delete all stale links in directory trees.
#
The default starting directory is the current directory.
#
Don’t descend directories on other filesystems.
#
#
OPTIONS: see function ’usage’ below
# REQUIREMENTS: ---
#
BUGS: ---
#
NOTES: ---
#
AUTHOR: Valter Henrique, valter.henrique@<company>.com
#
COMPANY: <company>
#
VERSION: 1.0
#
CREATED: 03.14.13
#
REVISION: 03.14.13
#===================================================================================
#
# chkconfig: 345 90 12
# description: <service-name> start, stop, restart service
#
# Get function from functions library
. /etc/init.d/functions

folder=/<company>/<service-folder> #folder to the application
service="<service-name>" #name of the service

startup=$folder/start.sh
shutdown=$folder/stop.sh

#=== FUNCTION ================================================================
#
NAME: start
# DESCRIPTION: Start the service <service-name>
# PARAMETER 1: ---
#===============================================================================
start() {

  #----------------------------------------------------------------------
  # logging the start
  #----------------------------------------------------------------------
  initlog -c "echo -n Starting $service:"

  #----------------------------------------------------------------------
  # getting the process PID
  #----------------------------------------------------------------------    
  pid_process=`ps -ef | grep "$folder/<jar>.jar" | grep -v grep |awk -F' ' '{ print $2 }'`;

  if [ $pid_process ]; then
    echo "<service-name> is running!"
    echo "Stop then first!"
  else
    action $"Starting <service-name> service: " su - <user_deployer> -c $startup
    RETVAL=$?
  fi
  #----------------------------------------------------------------------
  # create the lock file
  #----------------------------------------------------------------------
  touch /var/lock/subsys/$service
  success $"Sucess $service startup"
  echo
}

#=== FUNCTION ================================================================
#
NAME: stop
# DESCRIPTION: Stop the service <service-name>
# PARAMETER 1: ---
#===============================================================================
stop() {
  #----------------------------------------------------------------------
  # logging the stop
  #----------------------------------------------------------------------
  initlog -c "echo -n Stopping $service: "
  killproc $service
  #----------------------------------------------------------------------
  # now, delete the lock file
  #----------------------------------------------------------------------
  rm -f /var/lock/subsys/$service
  echo
}

#----------------------------------------------------------------------
# Main Logic
#----------------------------------------------------------------------
case "$1" in
  start)
        start
        ;;
  stop)
        stop
        ;;
  status)
        status $service
        ;;
  restart|reload|condrestart)
        stop
        start
        ;;
  *)
        echo $"Usage: $0 {start|stop|restart|reload|status}"
        exit 1
esac 
exit 0 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-14T14:03:48.690

`$?`给出最后执行的命令的状态。在您的情况下，执行的最后一个命令是`action....`. 此命令的退出状态将出现，稍后将在变量`$?`中捕获。`RETVAL`如果命令成功，`$?`将包含 0，否则为非零值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T14:05:45.963

RETVAL 是一个变量。美元？正在将最后执行的命令的状态分配给 RETVAL 变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:12:54.587

正如其他人所说，`$?`是最后一个命令的退出状态。

现在，关于你的问题...

`RETVAL`不会在脚本的其他任何地方使用，但请记住，在 bash 中，常规变量是全局变量，因此它们可以被其他函数使用。如您所见，有一个`success`调用可能会用到它。在*我检查* `/etc/init.d/functions`的分布中没有使用这个变量，所以这条线只是噪音，可以被删除。检查*你的*分布，看看它做了什么。

# eclipse - 使用 Eclipse Classic 开发 Eclipse RCP 应用程序

> ID：15411430
> 
> 赞同：0
> 
> 时间：2013-03-14T14:01:41.500
> 
> 标签：eclipse, eclipse-rcp

我一直在使用*Eclipse Classic*在 Java 中根据需要安装插件来开发应用程序。现在我正在考虑使用**Eclipse RCP** UI 开发一个应用程序。我已经在线阅读了一些教程，但他们建议将*Eclipse 用于 RCP/RAP 开发人员*。

我查看了这个[Eclipse Packages Compare](http://www.eclipse.org/downloads/compare.php)页面，但我还没有完全弄清楚为什么我不能使用*Eclipse Classic*来开发 Eclipse RCP 应用程序。

我必须安装哪些插件才能使用*Eclipse Classic*进行 Eclipse RCP 应用程序开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:37:17.197

这两个软件包之间几乎没有（实际）差异。Classic（AKA，Eclipse SDK）包含更多 Eclipse 包本身的源代码，例如 JDT 和 PDE，这在开发您自己的插件和 RCP 应用程序时实际上很有用）；RCP/RAP 显然包括 RAP，如果你需要它就很重要，但如果你不需要它就毫无意义。RCP 还包括 EGit（同样，如果您需要它，很好）和 XML 工具。我经常从 SDK (Classic) 包开始，然后根据需要添加东西。甚至有人谈论完全放弃 RCP 包，尽管它仍然存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T14:24:26.717

> 我必须安装哪些插件才能使用 Eclipse Classic 进行 Eclipse RCP 应用程序开发？

相信我，最好为 RCP/RAP 开发人员将 Eclipse 解压缩到不同的目录中，然后使用它来开发您的 RCP 应用程序。

您很幸运，将 Eclipse 插件添加到 Eclipse Classic 并没有破坏您的 Java 开发环境。

# php - 批量删除大量文件

> ID：15411436
> 
> 赞同：6
> 
> 时间：2013-03-14T14:01:48.327
> 
> 标签：php, linux, unix, ubuntu

超过一个月的用户每天上传的文件将从服务器中删除。用户上传的内容按天存储到目录中（例如`/var/www/media/2013-03-13`），因此很容易识别需要删除的文件/目录。

**问题：**一次删除 100,000 个文件会使服务器无响应并且需要很长时间。（Ubuntu 12.04 在软件 RAID1 中带有 2x2TB ext4 SATA3 硬盘）。目前 PHP 正在执行`exec`命令`find /path/to/dir -maxdepth 1 -name '*' -delete`。

如何拆分删除所需的文件？`ls`对那些大型目录执行操作将需要很长时间。

*解决方案不必在 PHP 中。它甚至不需要将文件分成更小的批次*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:09:09.593

1.  找到您想要保留的日子的目录
2.  查找所有日子的目录
3.  从 2 中删除 1.
4.  `rm -rf`您从 3 获得的目录。

我不确定这是否比您的方法更快，但它避免了明确列出目录中的所有文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:07:40.927

诀窍不是读取所有文件，而是用来`readdir`一个一个地获取它们。请参阅Perl 的救援：为 Perl 解决方案[删除大目录的案例研究。](http://blogs.perl.org/users/randal_l_schwartz/2011/03/perl-to-the-rescue-case-study-of-deleting-a-large-directory.html)

# javascript - jquery/javascript 错误

> ID：15411438
> 
> 赞同：0
> 
> 时间：2013-03-14T14:01:55.660
> 
> 标签：javascript, jquery, cookies

有谁知道为什么以下脚本不起作用。

我正在尝试查看 cookie 是否已设置以及何时设置我不想查看值是 1 还是 0 如果值为 1 我不想移动我的 div#content 偏移量，但是当它是为 0 我想以相同的偏移量移动它，但方向相反

```
$(function() {
    var loc = window.location.pathname.split( '/' );

    if("index.php" == loc[3] && (document.cookie('subMenu') === null || document.cookie('subMenu') == 0)) {
        document.cookie("subMenu", 1);
        animatethis("#content", 1500, "+=50px");
    }
    else 
    {
        if(!"index.php" == loc[3] && (document.cookie('subMenu') == 1)
        {
            document.cookie("subMenu", 0);
            animatethis("#content", 1500, "-=50px");
        }
    }
});

function animatethis(targetElement, speed, offset) {
    var x = $('#menuwrapper').height();

    $(targetElement).animate({ marginTop: "+=50"},
    {
        duration: speed,
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:53:44.533

您有语法错误。以下行中第一个括号的结尾缺失：

```
//It would be
if(!"index.php" == loc[3] && (document.cookie('subMenu') == 1))

//In place of 
if(!"index.php" == loc[3] && (document.cookie('subMenu') == 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:06:49.933

你只是不在`offset`这里使用你的变量：

```
$(targetElement).animate({ marginTop: "+=50"},
{
     duration: speed,

}); 
```

尝试这个 ：

```
$(targetElement).animate({ marginTop: offset},
{
    duration: speed,

}); 
```

# regular-language - 有人可以使用抽水引理帮助我证明这个证明吗？

> ID：15411443
> 
> 赞同：3
> 
> 时间：2013-03-14T14:02:05.253
> 
> 标签：regular-language, automata, proof, pumping-lemma

我刚刚开始阅读有关抽水引理的内容，并且知道如何进行一些证明，主要是通过矛盾。只有这个特殊的问题，我似乎没有找到答案。我不知道如何开始。我可以假设必须有一个泵送长度`P`，并且对于 L 的所有`w`元素，`LENGTH(w) >= P`. 当然，我们可以用`xyz`抽水引理的三个正常条件来写 w。

我必须证明以下语言是非常规的：

```
L = {x + y = z | x,y,z element of {0,1}* and #(x) + #(y) = #(z) } 
```

有人可以帮助我吗，我真的很想掌握证明这类问题的过程吗？

**编辑：**
对不起，忘了说字母表是字符串`{0,1,+,=}`的`#`二进制值。喜欢`#(00101) = 5`和`#(110) = 6`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:50:21.063

既然你想掌握这个过程，我会在证明之前指出一些事情。

1.  首先要注意的是 the`+`和 the`=`可能只出现一次。因此，当您将字符串写`w`为`w = abc`时，抽水部分 ,`b`不能包含`+`，`=`否则您会遇到一个微不足道的矛盾（我没有使用更标准的`w = xyz`符号来避免与`L`' 的定义混淆）。

2.  另一件需要注意的事情是，通常，您会选择一个特定的字符串`w`来抽水。在这种情况下，选择共享某个属性的一类字符串*可能会更容易。*抽水引理只要求你用一根弦来达到矛盾，但没有理由不能用多根弦来达到矛盾。

证明（剧透）：

> 因此，让我们`w`成为其中的任何字符串`L`，`|w| ≥ P`并且`x, y, z`不包含前导`0`'s。通过抽引引理，我们可以写成`w`通过`w = abc`抽引引理，我们知道`b`它不是空的。由于`b`不能包含`+`or `=`，所以它完全包含在`x, y,`or`z`中。用任何 i ≠ 1抽水`w`会导致二元方程不再成立，因为其中一个`x, y, z`将是不同的数字（这就是我们需要无前导`0`位的原因）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:51:33.920

选择作为字符串`1(0^n+1) + 1(0^n) = 11(0^n)`。

换句话说，您的字符串将显示“2 的 n+2 次方加上 2 的 n+1 次方之和等于 11，后跟 n 个零”。

由于要抽取的字符串将完全由第一个加数中的符号组成，因此抽取必须更改表示的数字（向数字添加或删除数字会改变数字；这是真的，因为我们的字符串不包含前导零）并且如果`x + y = z`成立，`x' + y = z`则不成立 if `x' != x`（至少在整数上）。

由于抽水引理要求抽水字符串在语言中，并且抽水该字符串失败，因此我们认为该语言不规则。

# c# - 如何使用 MVC 操作向视图添加 HtmlPrefix？

> ID：15411445
> 
> 赞同：0
> 
> 时间：2013-03-14T14:02:08.047
> 
> 标签：c#, asp.net-mvc-3, razor

我有以下操作来调用单个页面中的多个部分视图。

```
public ActionResult AddDetail(string Key)
{
    var viewData = new ViewDataDictionary(ViewData)
            {
                TemplateInfo = new System.Web.Mvc.TemplateInfo
                {
                    HtmlFieldPrefix = string.Format("{0}", key)
                }
            };
    return View(key);
 }

 [View]
 @model Customer
 @Html.TextBoxFor(model=>model.Name) 
```

上面的代码给了我呈现为的html

```
<input type="text" name="Name"/> 
```

但是，我想拥有

```
<input type="text" name="Customer.Name" /> 
```

如果我通过这个`AddDetail("Customer")`动作。

我不知道如何获取`ViewContext`并将其附加`Prefix`到视图中。

有人可以帮我添加前缀吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:09:46.450

试试这个 ：）

```
public ActionResult AddDetail(string Key)
{
    ViewData.TemplateInfo.HtmlFieldPrefix = string.Format("{0}", key)
    return View(key);
} 
```

# c++ - Getpixel() 从外部窗口句柄 MFC

> ID：15411446
> 
> 赞同：1
> 
> 时间：2013-03-14T14:02:09.260
> 
> 标签：c++, mfc, getpixel

我有窗口句柄，我需要获取像素颜色。

```
#include "Globals.h"
    void MainHamsterDlg::OnTimer(UINT nIDEvent)
    {
      Sleep(4000);
      HDC hDC = ::GetDC(tempHWND);
      COLORREF rgb = GetPixel(hDC,351,515);

        if(GetPixel(hDC,351,515) == RGB(33,30,28))
          AfxMessageBox(L"Please select or write correct name!");

      ::ReleaseDC(tempHWND, hDC);

       CDialog::OnTimer(nIDEvent);
    } 
```

调试说`COLORREF rgb = GetPixel(hDC,351,515);`获取`3225917`我需要转换为 rgb 以检查比较的值吗？我不知道那里有什么问题，因为我是 mfc 的新手。

```
#include "Globals.h"
    void WaitProcessDlg::OnTimer(UINT nIDEvent)
    {
      if(::FindWindow(NULL, str)){
       tempHWND = ::FindWindow(NULL, str);
       ::SetWindowText(tempHWND, L"Weather");
       EndDialog( 0 );
       KillTimer(IDC_PROGRESS1);
       }
      CDialog::OnTimer(nIDEvent);
    } 
```

这里窗口句柄和它的句柄窗口。我检查了更改标题。

我正在使用 Globals 将窗口句柄从一个对话框转移到另一个。

```
Globals.h
-------------------
#pragma once
extern HWND tempHWND;
-------------------- 
```

所以我的问题是我需要转换为 RGB 来检查比较吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:10:08.280

我使用不同的代码来实现它及其工作！

```
HDC hDC = CreateDC(L"DISPLAY",0,0,0);
COLORREF rgb5 = GetPixel(hDC,24,507); 
```

# php - MySQL：查询语法错误和 2 个语句

> ID：15411448
> 
> 赞同：-2
> 
> 时间：2013-03-14T14:02:15.317
> 
> 标签：php, mysql, syntax-error

我的脚本有问题：

```
<?php
include('includes/header.php');
include("includes/config.php");
$email = $_GET['email'];
$key = $_GET['key'];
$email = strip_tags($email); 
$email = trim($email);
$key = strip_tags($key); 
$key = trim($key);
$sql = mysql_query("SELECT * FROM confirm WHERE email = '$email' AND key = '$key' 
ORDER BY id ASC LIMIT 1")or die(mysql_error()); 
while($result = mysql_fetch_array($sql))
{ 
$key2 = $result['key']; 
$email2 = $result['email'];  
}
if($key == $key2 && $email == $email2){
$sql = mysql_query("UPDATE users SET user_confirm = 1 WHERE user_mail = '$email2'")or  
die(mysql_error());
$sql = mysql_query("DELETE FROM confirm WHERE email = '$email2'")or die(mysql_error());
echo "Your account have been activated, and is ready to use!";
}else{
echo 'You have entered wrong key or the key is invalid!';
}
include('includes/footer.php');
?> 
```

'key = (keyvalue here)' 附近出现语法错误

有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:08:10.020

'key' 是 MySQL 中的保留字。

将您的第一个查询更改为以下内容（注意关键字周围的正确引用）

```
$sql = mysql_query("SELECT * FROM confirm WHERE email = '$email' AND `key` = '$key' ORDER BY id ASC LIMIT 1")or die(mysql_error()); 
```

更好的解决方案是不使用 mysql 保留字。因此，您可以重命名“确认”表中的“键”列。

这是 MySQL 保留字列表： http: [//dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:06:13.550

如果您的列名是“key”，那么问题`KEY`是 MySQL 5.1 中的旧运算符。您可以在列名周围加上反引号以使其工作

```
`key` = 'some value' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:07:55.387

将您的列名编辑为 cnf_key ，然后尝试替换下面的 syntex

```
$sql = mysql_query("SELECT * FROM confirm WHERE email = '$email' AND `cnf_key`= '$key' 
ORDER BY id ASC LIMIT 0,1")or die(mysql_error()); 
```

# propel - 推动嵌套集合行为

> ID：15411449
> 
> 赞同：0
> 
> 时间：2013-03-14T14:02:16.870
> 
> 标签：propel, nested-sets

我想使用推进构建一个有向图。我正在寻找的行为类似于嵌套集，但一个孩子有多个父母。

存在什么：

P：父节点

C：子节点

> (0,1)P <- (0,n)C

我需要的：

> (0,n)P <- (0,n)C

我读过这个： http: [//propelorm.org/behaviors/nested-set.html](http://propelorm.org/behaviors/nested-set.html) 和那个：[https ://github.com/CraftyShadow/EqualNestBehavior](https://github.com/CraftyShadow/EqualNestBehavior)

你能给我一些方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:01:16.430

我找到了一个解决方案，我在两个关系链接上使用同一张表的多对多关系。

```
table Node
Table ParentNode (ParentFK: Node, NodeFK: Node) 
```

# security - Web API 最佳实践：将参数放在哪里？

> ID：15411453
> 
> 赞同：0
> 
> 时间：2013-03-14T14:02:36.227
> 
> 标签：security

这个问题与[之前的 SO 问题有关](https://stackoverflow.com/questions/4024271/rest-api-best-practices-where-to-put-parameters)：Is there a security difference between

通过https（使用TLS）发送参数1）作为URL路径的一部分（即/api/resource/parametervalue）2）作为查询参数（即/api/resource?parameter=value）3）作为表单参数？

特别是如果发送 sessionid 作为参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:28:09.557

我不确定我已经很好地理解了这个问题，但没有一个比另一个更安全。任何人都可以在 URL 或表单中写下他想要的任何内容。您将拥有这样的变量 :`$_GET['var']`或`$_POST['var']`包含完全相同的字符串。

危险在于使用变量时。

请参阅此线程： [GET 或 POST 是否比另一个更安全？](https://stackoverflow.com/questions/198462/is-either-get-or-post-more-secure-than-the-other)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:31:59.163

您提到的三种方法中没有一种比另一种更安全，因为所有三种方法中的数据都驻留在 HTTP 内容中。

[如果您想要增强安全性，请通过HTTP Secure](http://en.wikipedia.org/wiki/HTTP_Secure)等安全协议发送数据

# if-statement - 水晶if语句错误

> ID：15411455
> 
> 赞同：0
> 
> 时间：2013-03-14T14:02:38.727
> 
> 标签：if-statement, crystal-reports

我在水晶报表中的 If 语句遇到问题。有人可以告诉我我做错了什么

```
if (time > -1) then
    prev = time
else if (isnull({tbl.field}))then //error on this line
    prev := 0
else
    prev := TONUMBER({tbl.field}); 
```

如果在 else 之后，它在第二个给我一个“布尔预期的这里错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:12:00.413

```
if time > -1 then
    prev := time  // missing :
else if isnull({tbl.field}) then
    prev := 0
else
    prev := TONUMBER({tbl.field})
; 
```

# java - 选项卡片段中的按钮没有响应

> ID：15411460
> 
> 赞同：1
> 
> 时间：2013-03-14T14:02:50.833
> 
> 标签：java, android, android-fragments

在我的应用程序中，我有三个选项卡。在每个选项卡中，我都有一些控件。当我尝试为我的按钮实现 onClick 方法时，我发现按钮没有响应手势，更具体地说，是点击。

这是选项卡的类：

```
package com.telkitty.myPetProject

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.provider.Contacts;
import android.provider.ContactsContract;

public class ContactPage extends Fragment {

    private static final int CONTACT_PICKER_RESULT = 1001;  

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Activity activity = getActivity();

        if (activity != null) 
        {       
            addListenerOnButton();      
        }   
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View view = inflater.inflate(R.layout.contact_page, container, false);       
        return view;
    }

    public void onListItemClick(ListView l, View v, int position, long id) {
        Activity activity = getActivity();

    }

    public void addListenerOnButton() 
    {   
        Button add = (Button) getView().findViewById(R.id.add_button);
        add.setOnClickListener(new View.OnClickListener()
        {
        public void onClick(View v)
        {
            Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,  
                    Contacts.CONTENT_URI);  
            startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);  
        }});
    }

} 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

   <Button
        android:id="@+id/edit_button"
        android:layout_width="80dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="10dp"
        android:text="@string/edit_contact"/>

   <Button
        android:id="@+id/add_button"
        android:layout_width="150dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="10dp"
        android:text="@string/add_contact"/>

    <ListView
        android:id="@+id/contact_list"
        android:layout_width="320dp"
        android:layout_height="380dp"
        android:paddingTop="50dp" >

    </ListView>    

</RelativeLayout> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:36:18.943

`onCreateView(..)`在您的中定义您的视图`Fragment`并注册监听器，如下所示：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View view = inflater.inflate(R.layout.contact_page, container, false);
        Button lEditButton = (Button) view.findViewById(R.id.edit_button);
        Button lAddButton = (Button) view.findViewById(R.id.add_button);
        ListView lContactList = (ListView) view.findViewById(R.id.contact_list);

        lEditButton.setOnClickListener(this);
        lAddButton.setOnClickListener(this);
        lContactList.setOnItemClickListener(this);

        return view;
    } 
```

实现`onClickListener`和`onItemClickListener`接口：

```
public class ContactPage extends Fragment implements onClickListener, onItemClickListener { 
```

通过使用这些界面，您将被迫覆盖`onClick(View v)`以及`onItemClick(..)`您可以在哪里处理按钮和列表的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:52:43.443

好的，只是碰巧我的按钮实际上位于 ListView 下方，因此尽管它们看起来好像在那里，但每次我单击它们时，实际上都选择了 ListView。

我添加了标记线，现在按钮可以正常工作了。

```
 public void addListenerOnButton() 
    {   
        Button add = (Button) getView().findViewById(R.id.add_button);
        add.bringToFront(); // <--- this line
        add.setOnClickListener(new View.OnClickListener()
        {
        public void onClick(View v)
        {
            Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,  
                    Contacts.CONTENT_URI);  
            startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);  
        }});
    } 
```

# wordpress - 如何在 Wordpress 中暂存和查看修改后的页面

> ID：15411464
> 
> 赞同：1
> 
> 时间：2013-03-14T14:02:54.560
> 
> 标签：wordpress, content-management-system

我们正在为一个大型新项目采用 Wordpress，它需要作为一个内容管理系统 (CMS)，而不仅仅是一个博客平台，并且页面会不断修改。

因此，我们的一个真实用例是内容所有者需要一次修改多个页面，并在暂存环境中暂存这些更改，然后再将修改后的内容推广到生产网站。我们知道这对新页面是如何工作的，但似乎 Wordpress 不支持以草稿或暂存形式将“修订”保存到现有页面以供审阅。

**问题：**有哪些 Wordpress、编程或 devops 技术可以满足在发布前审查修订内容的要求？

# android - Renderscript - 处理 2 张图像

> ID：15411473
> 
> 赞同：0
> 
> 时间：2013-03-14T14:03:17.607
> 
> 标签：android, image-processing, computer-vision, renderscript

快速浏览文档我还没有找到任何将 2 个图像作为输入传递的明显方法 - 有没有人这样做过或者知道它是否可能在当前实现中实现？

干杯，乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:44:38.923

内核输入当前仅限于单个分配。您可以在全局范围内传递额外的分配，然后使用 rsGetElementAt(thealloc, coords...) 从中获取数据。

# asp.net - 下拉列表保持为空 - 填充 json 数据

> ID：15411480
> 
> 赞同：0
> 
> 时间：2013-03-14T14:03:29.467
> 
> 标签：asp.net, ajax, json

嗨，我正在使用 json 数据从 sql server 填充另一个下拉列表的更改事件的下拉列表，当我签入 Firefox 时我得到了 json 数据，但我的下拉列表仍然为空 有人可以帮我这里做错了什么是我的代码

```
 function OnCathwordPopulated(response) {

         var xx = (typeof response.d) == 'string' ? eval('(' + response.d + ')') : response.d;

         $("#<%=ddlCatchword.ClientID %>").removeAttr("disabled");

         $("#<%=ddlCatchword.ClientID %>").children().remove();

         $("#<%=ddlCatchword.ClientID %>").empty().append("<option selected='selected' value='0'>Please select</option>");

         var listItems = "";
         for (var i = 0; i < xx.length; i++) {

             var val1 = xx[i];

             var text1 = xx[i];
             listItems += "<option value='" + val1+ "'>" + text1 + "</option>";

         } $("#<%=ddlCatchword.ClientID%>").html(listItems);

     } 
```

我也用了另一种方法

```
 $("#<%=ddlCatchword.ClientID%>").append($("<option></option>").val(val1).text(text)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:08:27.853

修改代码以正确删除。我假设这是根据上面的代码选择正确的列表。另外，一个小提琴例如：http: [//jsfiddle.net/Tkt2B/](http://jsfiddle.net/Tkt2B/)

```
$("#<%=ddlCatchword.ClientID %>").removeAttr("disabled");
$("#<%=ddlCatchword.ClientID %>").find("option").remove().end()
$("#<%=ddlCatchword.ClientID %>").append("<option selected='selected' value='0'>Please select</option>");

 var listItems = "";
 for (var i = 0; i < xx.length; i++) {
     var val1 = xx[i];
     var text1 = xx[i];
     listItems += "<option value='" + val1+ "'>" + text1 + "</option>";
 } 

 $("#<%=ddlCatchword.ClientID%>").append(listItems); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:30:40.850

我已经尝试过这种方法来测试数据

```
var h = ' <select name="test" id="ss" class="country" data-native-menu="false">';
             h = h + listItems;
             var w = window.open(); $(w.document.body).html(h); 
```

它会在新窗口中打开带有所有 json 数据的新 dropdwon。我不知道有什么奇怪的地方出错了……请注意我使用 jquery mobile 和 asp.net

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:05:21.830

它通过使用以下技巧解决了，

```
 $("#<%=ddlCatchword.ClientID%>").html(listItems); $("#<%=ddlCatchword.ClientID%>").selectmenu('refresh', true); 
```

[在http://ozkary.blogspot.no/2010/12/jquery-mobile-select-controls-populated.html](http://ozkary.blogspot.no/2010/12/jquery-mobile-select-controls-populated.html)的帮助下得到它的帮助 谢谢！

# node.js - 从现有的启动一个新的 node.js 服务器

> ID：15411483
> 
> 赞同：0
> 
> 时间：2013-03-14T14:03:45.037
> 
> 标签：node.js, nowjs-sockets

我还没有发现任何关于我的问题，所以我想问你是否可以解决以下问题。我有一个 nodejs 服务器，它显示一个带有按钮的网站。当我单击此按钮时，是否可以启动另一个节点服务器（它应该进行一些 spookyJS 测试并将结果打印到网站）？

我发现使用 nowJS 你有一个服务器和“客户端”（一些 html 页面）共享的共享空间。这个模块有用吗？

谢谢你的帮助，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:18:54.567

简而言之 - 是的！

但也许您可以让两个 Web 服务器始终运行。事实上，它对您的硬件的负担会更小。

第一个服务器 - 应用程序服务器 - 在 yoursite.com 上运行 第二个服务器 - SpookyJs/Test 服务器 - 在 tests.yoursite.com 上运行

在服务器启动并运行之后，我要做的下一件事是用一个简单的 restful 接口/api 包装 SpookyJs 应用程序。开始测试并以测试结果作为响应。

这里要注意的重要一点是，当您启动 SpookyJS 应用程序时，请保持打开状态。这样对 SpookyJS 应用程序的每个请求（通过您的界面）都会调用“open”或“then”方法。

同样，这是为了解决产生过多无头浏览器的问题。

请求通过后，继续使用 spooky 给您的结果响应请求。

也许这有帮助？

我们正在用 Zombie js 做类似的事情......所以也许它会帮助你（：

# maven - osgi 项目在 intellij idea 中有几个 pom

> ID：15411486
> 
> 赞同：0
> 
> 时间：2013-03-14T14:03:49.060
> 
> 标签：maven, intellij-idea, osgi, multi-project

我有两个带有 2 个 poms（类型）的 maven 项目。项目 1 中的一些组件依赖于项目 2。几乎所有组件（maven）都是 osgi 组件。

问题是：由于 IntelliJ IDEA 不支持多项目，因此不可能在一个 IDE 实例中同时打开两个项目。

然后，我相信，我将遇到一个问题，将我的 osgi 组件（它们与 IDE 中的 OSGI Facets 相关联）从 IDE 部署到我的 osgi 容器（因为它应该由 IDE 处理，在部署时使用这些方面组件到 osgi 服务器，如果我在我的 IDE 中看不到项目 2，那么它就无法处理它.. 在部署和 ide 集成方面）。

例如，如果我打开两个 IDE，其中项目 1 合二为一，项目 2 在第二个 ide 中，那么如果我在项目 2 中更改某些内容（1 取决于 2）.. 我是否应该在两个 IDE 中配置相同的（一个）osgi 服务器，并单独部署？

有人有相同的项目结构吗？在 IntelliJ IDEA 中使用它的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:16:49.287

每个窗口只能有一个 IDEA 项目，但一个项目可以包含多个 Maven 项目，请参阅[我在另一篇文章中的回答](https://stackoverflow.com/a/15382685/500478)。

通过打开你的第一个 pom.xml`File > Open`创建一个新的 IDEA 项目，然后打开`Maven Projects`右侧的视图，单击绿色加号添加你的第二个 Maven 项目，瞧！

配置完成后，您可以创建一个新的运行/调试配置，它将在同一个 tomcat 实例上部署两个工件。

# android - 使用类加载器从资产中获取字体文件时出现 NullPointer 异常

> ID：15411488
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:03:57.967
> 
> 标签：android, classloader, assets

我有这段代码可以从assets文件夹中获取字体文件：

```
public static Typeface getMyFont(Context context, String resource) {
    InputStream is;
    Typeface font = null;
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();

    AssetManager assetManager = context.getResources().getAssets();

    try {
        is = classLoader.getResourceAsStream(resource);
        is = assetManager.open(resource);
        BufferedReader br = new BufferedReader(new InputStreamReader(is));
        String line = null;
        while ((line = br.readLine()) != null) {
            Log.e("wwwww", line);
        }
        br.close();
        font = Typeface.createFromAsset(context.getAssets(), line);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return font;
} 
```

这里的资源是链接（快捷方式）的assets文件夹中的font / MYFONT.ttf，但我在这一行得到空指针异常：

```
font = Typeface.createFromAsset(context.getAssets(), line); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T15:41:29.947

我也遇到了同样的问题，您可以尝试使用 try & catch 块围绕添加字体的部分来捕获空指针异常，因此，在我的情况下，

```
Typeface comingsoon = Typeface.createFromAsset(getApplicationContext().getAssets(), "ComingSoon.ttf"); 
```

变成

```
try{
    Typeface comingsoon = Typeface.createFromAsset(getApplicationContext().getAssets(), "ComingSoon.ttf");
}
catch(NullPointerExecption e){
     //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:07:35.600

```
 my_font = Typeface.createFromAsset(context.getAssets(), "fonts/MYFONT.ttf"); 
```

# .htaccess - 在htaccess中通过斜线重定向相同的子

> ID：15411490
> 
> 赞同：0
> 
> 时间：2013-03-14T14:03:58.813
> 
> 标签：.htaccess, redirect

如何重定向为：

```
Redirect 301 /ruler/             http://www.sample.com/ruler/
Redirect 301 /ruler/red/review   http://www.sample.com/product_review/flexible-ruler/
Redirect 301 /ruler/read/        http://www.sample.com/read/soft-ruler/ 
```

使用上面的代码，它不能正常工作。`Redirect 301 /ruler/red/review`愿意_ `[http://www.sample.com/ruler/](http://www.sample.com/ruler/)`

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:05:04.413

你需要在`Redirect 301 /ruler/red/review`前面放行`Redirect 301 /ruler/`，阅读更多关于[处理顺序的信息](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#order)

# extjs - selectionChange 或 ItemClick

> ID：15411493
> 
> 赞同：1
> 
> 时间：2013-03-14T14:04:04.253
> 
> 标签：extjs, grid, extjs4, listener, extjs4.1

我正在设计一个 extjs 应用程序，其中有几个面板。其中一个有一个网格。我知道我可以在网格侦听器或 itemClick 上执行 selectionChange。

我应该使用哪一个？或者更何况哪一个更好。单击网格项后，我显然会在右侧面板上加载数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:25:38.157

第一个仅在选择更改时触发（正如您可能已经猜到的那样）并为您提供一组选定记录（可能只有一个），而第二个在每次点击时被调用并只为您提供您点击的一条记录在。

对于您的情况，我倾向于使用第二个事件并在内部保存最后一次单击的记录。如果尚未为此记录加载第二个网格，我将只加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:10:27.750

您的网格在运行时显示为页面上的表格，因此您可以在网格的 onrowdatabount 事件期间在网格或表格单元格上添加 onClick() 事件。

# java - 创建温暖的 StanfordNLP 解析器的最小示例

> ID：15411496
> 
> 赞同：1
> 
> 时间：2013-03-14T14:04:12.080
> 
> 标签：java, nlp, stanford-nlp

我想要一个温暖的（已经加载的）解析器来解析输入，而不是每次我想要解析输入时都创建一个新实例。

我想要一个功能类似于[http://nlp.stanford.edu:8080/parser/](http://nlp.stanford.edu:8080/parser/)的解析器。我`stanford-corenlp`从 Maven 安装。我执行了`StanfordCoreNlpDemo`课程。

但是我被困在如何将解析器嵌入到我自己的程序中。请提供以编程方式创建解析器的最小示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:26:32.457

但请记住：

*   斯坦福核心 NLP ！= 斯坦福解析器；前者包括解析器和其他 NLP 工具。

*   核心 NLP 会占用大量内存！

我一直在努力实现同样的目标。到目前为止，这就是我对 Web 服务的了解，您可以对单例进行类似的操作。

```
 public class NLPServlet extends HttpServlet {
    private StanfordCoreNLP pipeline;
    public void init(ServletConfig config) throws ServletException {
        super.init(config);
        try {
            Properties props = new Properties();
            props.put("annotators", "tokenize, ssplit, pos, lemma, ner, parse, dcoref");
            this.pipeline = new StanfordCoreNLP(props);
        } catch (Exception e) {
            System.err.println("Error " + e.getLocalizedMessage());
        }
    }
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        text="blah, blah, blah.";

        // create an empty Annotation just with the given text
        Annotation document = new Annotation(text);

        // run all Annotators on this text
        pipeline.annotate(document);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T08:05:16.613

你可以试试这个方法

```
import java.io.IOException;
import java.util.List;
import java.util.Properties;

import edu.stanford.nlp.ling.CoreAnnotations;
import edu.stanford.nlp.pipeline.Annotation;
import edu.stanford.nlp.pipeline.StanfordCoreNLP;
import edu.stanford.nlp.semgraph.SemanticGraph;
import edu.stanford.nlp.semgraph.SemanticGraphCoreAnnotations;
import edu.stanford.nlp.trees.Tree;
import edu.stanford.nlp.trees.TreeCoreAnnotations;
import edu.stanford.nlp.util.ArrayCoreMap;
import edu.stanford.nlp.util.CoreMap;

public class getentity{
    public static void main(String[]args) throws IOException{
     Properties props = new Properties();
        props.setProperty("annotators", "tokenize, ssplit, parse,sentiment");
        StanfordCoreNLP pipeline = new StanfordCoreNLP(props);

        Annotation annotation= new Annotation("project is good but management is bad, work-culture is good");
        pipeline.annotate(annotation);
        List<CoreMap> sentences = annotation.get(CoreAnnotations.SentencesAnnotation.class);
        if (sentences != null && sentences.size() > 0) {

            ArrayCoreMap sentence = (ArrayCoreMap) sentences.get(0);
            Tree tree = sentence.get(TreeCoreAnnotations.TreeAnnotation.class);
            for (CoreMap token : sentence.get(CoreAnnotations.TokensAnnotation.class)) {
                ArrayCoreMap aToken = (ArrayCoreMap) token;
                }
             SemanticGraph graph = sentence.get(SemanticGraphCoreAnnotations.CollapsedCCProcessedDependenciesAnnotation.class);

            String k=graph.toString("plain");
            System.out.println(k);

  }
  }
} 
```

这个特定的代码你可以得到句子中的所有实体

# python - Heroku 截断 HTTP 响应？

> ID：15411498
> 
> 赞同：78
> 
> 时间：2013-03-14T14:04:20.883
> 
> 标签：python, json, heroku, flask, gunicorn

我在 Heroku Cedar dyno 上运行**Flask/Gunicorn Python 应用程序。**该应用程序返回`JSON responses`给它的客户（它是一个`API server`，真的）。

有时客户端会收到 0 字节的响应。然而，不是我归还它们。这是我的应用程序日志的片段：

> 3 月 14 日 13:13:31 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 app[web.1] [2013-03-14 13:13:31 UTC] 10.104.41.136 apisrv - api_get_credits_balance(): session_token=[MASKED ]

上面的第一行是我开始处理请求。

> 3 月 14 日 13:13:31 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 app[web.1] [2013-03-14 13:13:31 UTC] 10.104.41.136 apisrv 1252148511 api_get_credits_balance()：返回 [{' credits_balance'：0}]

第二行是我返回一个值（给 Flask——它是一个 Flask“响应”对象）。

> 3 月 14 日 13:13:31 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 app[web.1] "10.104.41.136 - - [14/Mar/2013:13:13:31] "POST /get_credits_balance?session_token=屏蔽 HTTP/1.1" 200 22"-" "Appcelerator Titanium/3.0.0.GA (iPhone/6.1.2; iPhone OS; en_US;)"

第三行是 Gnicorn 的，在这里你可以看到 Gunicorn 获得了 200 状态和 22 字节的 HTTP 正文（“ `200 22`”）。

但是，客户端获得了 0 个字节。这是 Heroku 路由器日志：

> 3 月 14 日 13:13:30 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 heroku[router] at=info method=POST path=/get_credits_balance?session_token=MASKED host=matchspot-apisrv.herokuapp.com fwd="66.87\. 116.128" dyno=web.1 队列=0 等待=0ms 连接=1ms 服务=19ms 状态=200 字节=0

为什么 Gunicorn 返回 22 个字节，但 Heroku 看到 0，并且确实将 0 个字节传回给客户端？这是 Heroku 的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T10:17:31.973

我知道我在这里可能被认为有点离谱，但还有另一种选择。

我们知道在运输过程中不时会出现错误。我们知道我们现在无能为力来阻止这个问题。如果您只提供 API，则停止阅读，但是如果您也编写客户端，请继续阅读。

该错误是已知情况和已知原因。空返回值的结果意味着出现问题。但是，该值是可用的，并且已被获取、计算等等……作为开发人员，我的直觉是将空结果视为 HTTP 错误并请求重新发送数据。然后，您可以跟踪重新发送请求并查看这种情况发生的频率。

我会建议（虽然你觉得我也是那种会想到这一点的开发人员）你计算请求并设置一个合理的值来向用户响应“网络错误”。我的直觉是立即重试，然后再等一会儿再重试。

根据您的描述，第一次重试可能会正确获取数据。当然，这可能意味着将较旧的请求保留在缓存中几分钟或第二次运行请求，具体取决于看起来最合适的方式。

这也将绕过任何数量的其他点对点网络错误，并使应用程序即使在面临连接问题时也更加健壮。

我知道我们作为开发人员的本能是修复已知故障，但有时最好朝着能够在故障情况下运行的系统努力。也就是说，记录错误和问题并尝试修复它们永远不会受到伤害。

# jquery - 带有鼠标移动的jQuery倒数计时器

> ID：15411510
> 
> 赞同：0
> 
> 时间：2013-03-14T14:05:14.203
> 
> 标签：jquery, timer, countdown, mousemove

我正在尝试创建一个带有大约 60 秒长的计时器的网页，如果用户移动鼠标，他们会收到一条消息，如果他们等待整整 60 秒，他们会收到另一条消息。我有这部分工作，您可以从下面创建的代码中看到。

我无法工作以允许用户重试的部分，因此如果他们移动鼠标，那么他们有机会尝试让鼠标再保持静止 60 秒，甚至在他们获得获胜消息的最后，他们可以也再试一次。

**旧代码 - 代码：**

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Timer</title>
<style>
.start{display:block;}
.oops{display:none;}
.end{display:none;}
.tryagain{ cursor:pointer; color:#0066FF;}
.startcount{ cursor:pointer; color:#0066FF;}
</style>
</head>

<body>

<div class="start">
<span class="startcount">Start text</span> || Can you wait???
<p class="countdown"></p>
</div>

<div class="oops">
opps you moved the mouse | Would you like to <span class="startcount">try again?</span>
</div>

<div class="end">
Well done you waited. | Would you like to <span class="startcount">try again?</span>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
<script>
$(function(){
    var count = -1;
        countdown = null;

    $('.startcount').on('click', function(){
        count = 10;
        $('.start').css({'display':'block'});
        $('.end').css({'display':'none'});
        $('.oops').css({'display':'none'});
        if (countdown == null){
        countdown = setInterval(function(){
            $("p.countdown").html(count + " seconds remaining!");
            if(count > 0){
                count--;
            }
            if(count == 0){
                $('.start').css({'display':'none'});
                $('.end').css({'display':'block'});
                $('.oops').css({'display':'none'});
                clearInterval(countdown);
                countdown = null;
            }
            if(count > 1){
                $('html').mousemove(function(){
                    $('.oops').css({'display':'block'});
                    $('.start').css({'display':'none'});
                    $('.end').css({'display':'none'});
                    clearInterval(countdown);
                    countdown = null;
                }); 
            }else if(count == 0){
                $('html').mousemove(function(){
                    $('.oops').css({'display':'none'});
                    $('.end').css({'display':'block'});
                });
            }else{
                $('html').mousemove(function(){
                    $('.oops').css({'display':'none'});
                });
            }
            console.log(count);
            console.log(countdown);
        }, 1000);
        }
    });

});
</script>
</body> 
```

**固定代码：**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Timer</title>
<style>
.start{display:block;}
.oops{display:none;}
.end{display:none;}
.tryagain{ cursor:pointer; color:#0066FF;}
.startcount{ cursor:pointer; color:#0066FF;}
</style>
</head>

<body>

<div class="start">
<span class="startcount">Start text</span> || Can you wait???
<p class="countdown"></p>
</div>

<div class="oops">
opps you moved the mouse | Would you like to <span class="startcount">try again?</span>
</div>

<div class="end">
Well done you waited. | Would you like to <span class="startcount">try again?</span>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
<script>
$(function(){
    var count = 3, 
    countdown = null, 
    counter;

    $('.startcount').on('click', function(){

        // on click displayes the start information
        $('.start').css({'display':'block'});
        $('.end').css({'display':'none'});
        $('.oops').css({'display':'none'});

        counter = count; // sets up the counter
        countdown = setInterval(function(){
            $("p.countdown").html(counter + " seconds remaining!");

            if(counter != 0){
                //checks for mouse movements
                $('html').mousemove(function(){
                    $('.oops').css({'display':'block'});
                    $('.start').css({'display':'none'});
                    $('.end').css({'display':'none'});
                    clearInterval(countdown); //clears the interval so that it does not run multiple times 
                });
            } else {
                $('html').unbind('mousemove'); //removes the mousemove bind to the html !this is important
                $('.start').css({'display':'none'});
                $('.end').css({'display':'block'});
                $('.oops').css({'display':'none'});
                clearInterval(countdown); //clears the interval so that it does not run multiple times 
                return false;
            }

            counter--; //removes 1 from the counter

        }, 1000);
        $('html').unbind('mousemove'); //removes the mousemove bind to the html !this is important

    });

});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:09:47.310

[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

事实上，你想开始倒计时，当倒计时激活时，你想对用户说，嘿，等一下你的小山羊，当 60 秒完成时，另一条消息？正确的 ？

# layout - 响应式布局代码顺序

> ID：15411511
> 
> 赞同：0
> 
> 时间：2013-03-14T14:05:14.720
> 
> 标签：layout, responsive-design

我正在尝试创建一个像这样的简单布局

[http://www.ttmt.org.uk/forum/col-1.html](http://www.ttmt.org.uk/forum/col-1.html)

[http://jsfiddle.net/Y3kvj/](http://jsfiddle.net/Y3kvj/)

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <meta name="description" content="">
      <meta name="keywords" content="">
      <meta name="robots" content="">
      <title>Title of the document</title>

      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <link rel="stylesheet" href="css/master.css" />

      <!--[if lt IE 9]>
             <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

      <style type="text/css">
        *{
          margin:0;
          padding:0;
        }
        html, body{
          background:#eee;
          height:100%;

        }
        h1{
          font-family:sans-serif;
          color:#ddd;
        }
        #wrapper{
          min-height:100%;
          max-width:1000px;
          margin:0 auto;
          background:#fff;
          overflow:auto;
          border-left:30px solid #eee;
          border-right:30px solid #eee;
          padding:20px 20px 0 20px;
        }
        #leftCol{
          background:yellow;
          height:200px;
          width:280px;
          float:left;
        }
        #rightCol{
          background:red;
          height:200px;
          margin-left:320px;
        }

        @media only screen and (max-width:700px){
          #leftCol{
            float:none;
          }
          #rightCol{
            float:none;
            margin:20px 0 0 0;
          }
        }
      </style>

      </head>

    <body>

      <div id="wrapper">

        <div id="leftCol">

          <h1>Left Col</h1>

        </div><!-- #leftCol -->

        <div id="rightCol">
          <h1>Right Col</h1>

        </div><!-- #rightCol -->

      </div><!-- #wrapper -->

      <!--jQuery -->

    </body>

    </html> 
```

它是固定宽度的左列和流动的右列

当窗口调整大小时，我希望左列低于右列 - 在这个例子中它没有

我知道这是因为代码顺序。

如果我在窗口调整大小时将左列放在右列下方，它会按照我的意愿下降。

[http://www.ttmt.org.uk/forum/col-2.html](http://www.ttmt.org.uk/forum/col-2.html)

[http://jsfiddle.net/x8bKD/](http://jsfiddle.net/x8bKD/)

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <meta name="description" content="">
      <meta name="keywords" content="">
      <meta name="robots" content="">
      <title>Title of the document</title>

      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <link rel="stylesheet" href="css/master.css" />

      <!--[if lt IE 9]>
             <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

      <style type="text/css">
        *{
          margin:0;
          padding:0;
        }
        html, body{
          background:#eee;
          height:100%;
        }
        h1{
          font-family:sans-serif;
          color:#ddd;
        }
        #wrapper{
          min-height:100%;
          max-width:1000px;
          margin:0 auto;
          background:#fff;
          overflow:auto;
          border-left:30px solid #eee;
          border-right:30px solid #eee;
          padding:20px 20px 0 20px;
        }

        #leftCol{
          background:yellow;
          height:200px;
          width:280px;
          float:left;

        }
        #rightCol{
          background:red;
          height:200px;
          float:right;
        }

        @media only screen and (max-width:700px){
          #leftCol{
            float:none;
          }
          #rightCol{
            float:none;
            margin:0 0 20px 0;
          }
        }
      </style>

      </head>

    <body>

      <div id="wrapper">

        <div id="rightCol">
          <h1>Right Col</h1>

        </div>

        <div id="leftCol">

          <h1>Left Col</h1>

        </div>

      </div><!-- #wrapper -->

    </body>

    </html> 
```

我现在的问题是如何使正确的 col 伸展以填充空间。

## 负边距

我知道我可以像这样以负边距做到这一点

[http://www.ttmt.org.uk/forum/col-3.html](http://www.ttmt.org.uk/forum/col-3.html)

[http://jsfiddle.net/vkZPj/](http://jsfiddle.net/vkZPj/)

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <meta name="description" content="">
      <meta name="keywords" content="">
      <meta name="robots" content="">
      <title>Title of the document</title>

      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <link rel="stylesheet" href="css/master.css" />

      <!--[if lt IE 9]>
             <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

      <style type="text/css">
        *{
          margin:0;
          padding:0;
        }
        html, body{
          background:#eee;
          height:100%;
        }
        h1{
          font-family:sans-serif;
          color:#ddd;
        }
        #wrapper{
          min-height:100%;
          max-width:1000px;
          margin:0 auto;
          background:#fff;
          overflow:auto;
          border-left:30px solid #eee;
          border-right:30px solid #eee;
          padding:20px 20px 0 20px;
        }

        #leftCol{
          background:yellow;
          height:200px;
          width:280px;
          float:left;

        }
        #rightCol{
          background:red;
          height:200px;
          width:100%;
          margin-left:-290px;
          float:right;
        }
        #rightCol-inner{

          margin-left:290px;
        }    

        @media only screen and (max-width:700px){
          #leftCol{
            float:none;
          }
          #rightCol{
            float:none;
            margin:0 0 20px 0;
          }
          #rightCol-inner{

            margin-left:0;
          }
        }
      </style>

      </head>

    <body>

      <div id="wrapper">

        <div id="rightCol">
          <div id="rightCol-inner">
             <h1>Right Col</h1>
          </div><!-- #rightCol-inner -->

        </div>

        <div id="leftCol">

          <h1>Left Col</h1>

        </div>

      </div>

    </body>

    </html> 
```

负边距是唯一的方法吗 - 它会在我的代码中添加大量的 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:13:44.843

通过您列出的所有示例，很难理解您想要什么，但是....

以这种方式订购您的 div：

```
<div id="wrapper">
    <div id="leftCol">
        <h1>Left Col</h1>
    </div>
    <div id="rightCol">
        <h1>Right Col</h1>
    </div>
</div> 
```

在#wrapper 中放置一个溢出：隐藏：

```
#wrapper{
  min-height:100%;
  max-width:1000px;
  margin:0 auto;
  background:#fff;
  overflow:hiddeen;
  border-left:30px solid #eee;
  border-right:30px solid #eee;
  padding:20px 20px 0 20px;
} 
```

将两列都向左浮动，给右列一个最大宽度：

```
#leftCol{
  background:yellow;
  height:200px;
  width:280px;
  float:left;

}
#rightCol{
  background:red;
  height:200px;
  max-width:500px;
  float:left;
} 
```

如果您想看到正确的列伸展，您需要在其中放入一些内容（例如 - lorum ipsum）。

# c++ - 如何优雅地将所有枚举放入 std::set

> ID：15411519
> 
> 赞同：7
> 
> 时间：2013-03-14T14:05:52.333
> 
> 标签：c++, enums, stdset

我有一个枚举，我想把它们都放在集合中（然后用 set_intersection 算法删除一些，但那是题外话）。一切都很好，除了我坚持第 1 步。:)

如果我有（真正的班级有更高基数的枚举）

```
class MyClass
{
enum Color{red, green , blue}
}; 
```

我将如何初始化 a`std::set<MyClass::Color>` 以包含所有枚举。
我显然可以一个一个地手动插入它们，使用强制转换进行 for 循环，因为它们是连续的并且从 0 开始（如果我在枚举定义中不使用 =，我认为这是必需的），但我正在寻找一种更优雅的方式。

编辑：如果可能，我更喜欢 C++03 解决方案，因为当前的问题实例需要它，但如果不是，C++11 也很高兴知道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T14:11:07.097

这是一个选项：

```
#define COLORS {red, green , blue}
enum Color COLORS;
static std::set<Color> color_set() {
    return COLORS;
}
#undef COLORS 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:28:09.487

使用`std::bitset< total_colors >`. 对于有限空间上的集合，这是更合适的数据结构。每种颜色都映射到一个布尔值，表示它是否是集合的一部分。您可以将其初始化为所有`true`的使用`my_bitset.set()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:40:37.197

就我个人而言，我会使用一个循环，并在我去的时候把东西扔掉。

但是，如果您对强制转换不满意，您可以在枚举上定义运算符，以便您可以使用`++`. 这样你就可以在不强制转换的情况下循环。

# c# - 在 C# 中从电子邮件中捕获 IP 地址

> ID：15411521
> 
> 赞同：-5
> 
> 时间：2013-03-14T14:05:54.937
> 
> 标签：c#, string

我编写了一个程序来地理定位发件人的通用位置，但是我在从字符串中提取 IP 地址时遇到问题，例如：

```
 public static string getBetween(string strSource, string strStart, string strEnd)
    {
        int Start, End;
        if (strSource.Contains(strStart) && strSource.Contains(strEnd))
        {
            Start = strSource.IndexOf(strStart, 0) + strStart.Length;
            End = strSource.IndexOf(strEnd, Start);
            return strSource.Substring(Start, End - Start);
        }
        else
        {
            return "";
        } 
```

// 我已经将完整的 EMAIL 的 MIME 数据捕获到一个字符串 (txtEmail) // 现在我搜索字符串 ...

```
 //THIS IS MY PROBLEM. this is always different. 
  // I need to capture only the IP address between the brackets
  string findIP = "X-Originating-IP: [XXX.XXX.XXX.XXX]"; 
  string data = getBetween(findIP, "[", "]");
  txtCustomIPAddress.Text = data; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:10:19.870

我会建议一个正则表达式

```
Regex rex = new Regex("X-Originating-IP\\:\\s*\\[(.*)\\]", RegexOptions.Multiline|RegexOptions.Singleline);

string ipAddrText = string.Empty;
Match m = rex.Match(headersText);
if (m.Success){
    ipAddrText = m.Groups[1].Value;
}

// ipAddrText should contain the extracted IP address here 
```

[**工作演示在这里**](http://rextester.com/BOOWV76810)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:17:26.490

与 Miky 类似，但使用[正向前瞻/后向，](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs)因此我们只选择 IP 地址。

```
var str = "X-Originating-IP: [XXX.XXX.XXX.XXX]";
var m = Regex.Match(str, @"(?<=X-Originating-IP:\ \[).*?(?=])");
var ipStr = m.Success ? m.Value : null; 
```

# jquery - 语法错误标签无效

> ID：15411528
> 
> 赞同：-2
> 
> 时间：2013-03-14T14:06:13.720
> 
> 标签：jquery, jquery-mobile

我有 jQuery Mobile 的 jQuery 代码，当在另一台服务器上访问 URL 时，我看到这个错误：

> 语法错误标签无效

来源是：

```
$(document).ready(function(){
    var location;
    var starPrice;
    var endPrice;
    var beds;
    var baths;
    var typep;

    $('#location').change(function(){
        typep = $("input[name='type']:checked").val();
        baths = $("input[name='baths']:checked").val(); 
        beds = $("input[name='beds']:checked").val();
        location = $('#location').val();
        starPrice = $('#priceStart').val();
        endPrice = $('#priceEnd').val();

        $.ajax({
            url: "/findListings",
            data:{
                limit: 10
            },
            dataType: "jsonp",
            type : 'POST',
        }).done(function(data) {
            alert(data[0].ListingId);
        });             
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:08:00.003

此处多加逗号

```
type : 'POST', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:09:15.043

有些浏览器会忽略一些语法错误。这`,`是问题所在

# django - Django：您可以在哪里查询 ADMINS 设置的 auth 用户模型？

> ID：15411529
> 
> 赞同：0
> 
> 时间：2013-03-14T14:06:18.910
> 
> 标签：django

我正在尝试设置电子邮件和 ADMINS 设置，并想查询用户模型以获取电子邮件地址和其他电子邮件凭据，因此我不必将该信息提供给 git hub 上的每个人。如果我将以下内容放在我的设置文件的末尾（在定义数据库之后）：

```
from django.contrib.auth.models import User
u1 = User.objects.get(pk__exact=1)
ADMINS = ((u1.username, u1.email))
print ADMINS 
```

我得到一个成功的查询并且服务器启动，但是当我尝试启动应用程序时，由于缺少设置，我收到了各种错误，具体取决于我在设置文件中放置上述代码的位置。

据此，我了解到您无法在设置文件中查询数据库，那么我可以将这段代码放在哪里，以便在服务器启动时填充 ADMINS 设置和电子邮件设置变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:15:06.097

我建议你不要使用 django 模型`settings.py`，

通常，`settings.py`加载后，django 知道数据库配置是什么。

**更惯用的做法是在 settings.py 的末尾**添加一些代码：

```
from local_settings import * 
```

或者只是覆盖`ADMINS`命名空间，`ADMINS = (('admin', 'admin@example.com'))`在 local_settings 中硬编码，

```
from local_settings import ADMINS 
```

由于您不想将信息公开给 github，请添加`local_settings.py`到您的`.gitignore`.

正如@DJV 所说，“settings.py 中的 ADMINS 和超级用户意味着不同的东西（第一个应该管理网站，而其他人则管理内容）”，我认为 ADMINS 并不那么重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:38:09.043

我希望这段代码在服务器启动时运行，而不是在每次请求时运行，而这个解决方案似乎就是这样做的。我不想对 ADMINS 进行硬编码，因为我喜欢使用 django 的管理员来管理用户的想法，而且由于我从数据库中提取用户名和电子邮件，我不必担心在代码中暴露用户的信息信息.

我在我的应用程序中创建了一个名为 admins.py 的文件，并在 **init** .py 中导入了该文件以执行代码。现在，当用户 is_superuser 时，他们的信息将自动添加到 ADMINS。

我的应用程序核心。**初始化**.py

```
from myapp.core.admins import * 
```

myapp.core.admins.py

```
from django.conf import settings
from django.contrib.auth.models import User
from django.core.mail import mail_admins

#admins setup: These users will get 500 error emails
admins = User.objects.filter(is_superuser__exact=True)
settings.ADMINS = []
for u in admins:
    settings.ADMINS.append((u.username, u.email))

#send test email
if settings.SEND_TEST_EMAIL:
    mail_admins('SEVER HAS BEEN STARTED', 'The server has been started @ '+settings.SITE_IP, fail_silently=False) 
```

更新：上述解决方案存在问题。我不得不重建我的数据库，当我运行 syncdb 时，由于缺少用户模型而失败。我尝试将导入移动到 models.py init 但仍然没有运气。第一个安全入口在哪里？？我是否必须创建管理员模型或创建用户配置文件来扩展 auth/user 并添加 is_admin 字段？——</p>

# facebook - Facebook URL 调试器给出错误，OG 标签不在头部错误中

> ID：15411537
> 
> 赞同：1
> 
> 时间：2013-03-14T14:06:39.223
> 
> 标签：facebook, meta

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.chiploco.com%2Frazer-ouroboros-review-22725%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.chiploco.com%2Frazer-ouroboros-review-22725%2F)

出于某种原因，FB URL 调试器说元标记在 body 标记而不是 head 中，但据我所见，它们显然在 head 标记中。

任何人都可以看到什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:21:53.117

> 出于某种原因，FB URL 调试器说元标记在 body 标记而不是 head 中，但据我所见，它们显然在 head 标记中。

不，他们不是。

OG 相关`meta`标签放置在代码中的第 127 行开始 - 但在第 93 行，您有一个`noscript`包含元素的`div`元素。由于元素在元素`div`内部没有任何业务，因此在此之前元素已*隐式*关闭。`head``head`

 *从 DOM 视图来看，这会导致您的`meta`元素位于`head`.

在提出此类问题之前，请*始终使用验证器检查您的 HTML：http:* [//validator.w3.org/check ?uri=http://www.chiploco.com/razer-ouroboros-review-22725/](http://validator.w3.org/check?uri=http://www.chiploco.com/razer-ouroboros-review-22725/)

如您所见，还有很多问题需要解决。*

# linux - 如何修复 tmux 中的滚动错误？

> ID：15411543
> 
> 赞同：6
> 
> 时间：2013-03-14T14:06:56.223
> 
> 标签：linux, cygwin, tmux

我知道这听起来很可怕，但它可能不仅仅与 cygwin 有关。如您所知，cygwin 使用 xterm，我通过 ssh 连接到另一台启动 tmux 的机器。在一台机器上，我为 tmux 启用了鼠标，滚动时几乎可以正常工作。在用鼠标滚动屏幕时，我在命令行中出现了一些随机字符，但至少滚动可以工作，但是我的机器无法拥有自己的配置，所以用键盘滚动真的很麻烦。使用此快捷方式进入滚动模式后`ctrl+b [`，我只能滚动可见区域，然后所有随机字符都出现在命令行中，它根本不允许我向上滚动。最有趣的是，启用鼠标，使用键盘滚动很好，我仍然会出现这个随机字符，但只要滚动有效就可以了。

所以我的问题是如何摆脱使用鼠标/键盘滚动时出现的随机字符？

我启用鼠标的 tmux.config：

```
set-option -g mode-mouse on
set-option -g mouse-select-pane on
set-option -g mouse-select-window on 
```

# android - 如何使用 Bionic C 库中不支持的标准 C 库来构建 Android-NDK？

> ID：15411547
> 
> 赞同：2
> 
> 时间：2013-03-14T14:07:04.007
> 
> 标签：android, android-ndk, java-native-interface, bionic, libm

我的原生资源使用了复杂的操作（定义）。这些操作在标准 C99 数学库中实现，但不在 Android-NDK 使用的仿生数学库中实现。出于这个原因，我想使用标准数学库而不是仿生数学库来编译我的源代码。

我的可能性是什么？

# c# - 获取日期数组（每年和绝对）

> ID：15411549
> 
> 赞同：1
> 
> 时间：2013-03-14T14:07:16.573
> 
> 标签：c#, linq, linq-to-sql

我有以下 2 个功能 + 1 个正在进行中：

```
 public static IEnumerable<LockedDate> GetAllByEmployee(int employeeID)
    {
        var v = LockedDates.GetAll();
        return from p in v where p.EmployeeID == employeeID select p;
    }

    public static IEnumerable<LockedDate> GetAllByCompany()
    {
        var v = LockedDates.GetAll();
        return from p in v where p.EmployeeID == null select p;
    }

    public static List<LockedDate> GetAllForEmployee(int employeeID)
    {
        var empList = GetAllByEmployee(employeeID);
        var compList = GetAllByCompany();
        //What do???
        return from p in empList and from q in compList where p and q are not duplicate . toList()
    } 
```

这些使用 LINQ-SQL。

LockedDate 有一个 Date 和一个 IsYearly 布尔值。如果 IsYearly 为真，则不应考虑年份。永远不应该考虑时间。

我现在需要一个函数，它将员工拥有的所有 LockedDates 和公司的所有 LockedDates 都包含在一个列表中，没有任何重复。因此，如果 IsYearly && dd/mm 是 == 或 !IsYearly && dd/mm/yyyy 是 == 则存在重复。什么可能是一种有效的、非天真的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:23:35.773

```
var yearly = source.Where(p => p.IsYearly)
                   .GroupBy(p => new { Month = p.Date.Month, Day = p.Date.Day })
                   .Select(g => g.First());
var nonYearly = source.Where(p => !p.IsYearly)
                      .GroupBy(p => p.Date.Date)
                      .Select(g => g.First());

return yearly.Union(nonYearly).ToList(); 
```

`source`可以通过以下`Union`方法轻松完成：

```
var source = GetAllByEmployee(employeeID).Union(GetAllByCompany()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:22:28.043

你不能这样做吗

```
 var v = LockedDates.GetAll();
    return from p in v where p.EmployeeID == null || p.EmployeeID == employeeID select p; 
```

# object - 使用 HPC 填充 VBA 对象

> ID：15411550
> 
> 赞同：0
> 
> 时间：2013-03-14T14:07:16.590
> 
> 标签：object, hpc

我们正在研究 HPC 以改进对我们一些更大、更复杂的电子表格的处理。我们已经向一些同事演示了这个，他们认为这很有用的领域是使用电子表格工具，作为计算例程的一部分，该工具生成一个 5 维数组（每个维度大约 100 行乘 100 列）用于以后的计算。他们问是否可以使用 HPC 来分担该对象的计算负载，而不是将结果写回单元格？
我已经进行了一些搜索，但找不到任何涵盖此内容的内容...这是否意味着无法完成，或者只是 HPC 的使用方式并非如此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:03:13.117

如果您指的是 Microsoft HPC 2012 或 2008 R2，它可以用来做很多事情，从处理原始非结构化数据到进行 excel 计算。

[http://msdn.microsoft.com/en-us/library/cc853440(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc853440(v=vs.85).aspx)

该链接适用于 2008 R2 文档（没有发布 2012 年的新示例）其中一个示例是一个电子表格，其值通过 HPC 计算。如果内存来自 SP4 示例包中的 Excel 目录，您想查看 MonteCarloCLI 示例。

# database - 使用 Sqoop 从 Sybase 导入数据的问题

> ID：15411557
> 
> 赞同：2
> 
> 时间：2013-03-14T14:07:32.430
> 
> 标签：database, jdbc, hadoop, sybase, sqoop

我正在尝试使用 Sqoop 从 Sybase 导入数据。从日志中我可以说我已经成功地进行了一次连接。但是我的工作没有给我一些 Sybase 的 Sql 异常。我主要不是在 Sybase 上工作，所以无法挖掘出这个错误。我的资源中只有一个位于 Sybase。

我使用了以下命令：

```
sqoop import --verbose \
--driver com.sybase.jdbc3.jdbc.SybDriver \
--connect jdbc:sybase:Tds:nyhostx123.sm.com:13290/DATABASE=tempdb \
--table tempdb..mit \
--split-by sipid \
--fields-terminated-by ',' \
--target-dir /home/DEVTEST/sqoop_mit \
--username user01 \
-m 1 \
-P 
```

**错误片段：**

```
13/03/14 07:36:19 INFO mapred.JobClient: Running job: job_201301151126_25936
13/03/14 07:36:20 INFO mapred.JobClient:  map 0% reduce 0%
13/03/14 07:36:27 INFO mapred.JobClient: Task Id : attempt_201301151126_25936_m_000000_0, Status : FAILED
java.io.IOException: SQLException in nextKeyValue
        at org.apache.sqoop.mapreduce.db.DBRecordReader.nextKeyValue(DBRecordReader.java:265)
        at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:456)
        at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67)
        at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143)
        at org.apache.sqoop.mapreduce.AutoProgressMapper.run(AutoProgressMapper.java:182)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:647)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:266)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1278)
        at org.apache.hadoop.mapred.Child.main(Child.java:260)
Caused by: com.sybase.jdbc3.jdbc.SybSQLException: Incorrect syntax near '.'.

        at com.sybase.jdbc3.tds.Tds.a(Unknown Source)
        at
attempt_201301151126_25936_m_000000_0: log4j:WARN No appenders could be found for logger (org.apache.hadoop.hdfs.DFSClient).
attempt_201301151126_25936_m_000000_0: log4j:WARN Please initialize the log4j system properly.
13/03/14 07:36:33 INFO mapred.JobClient: Task Id : attempt_201301151126_25936_m_000000_1, Status : FAILED
java.io.IOException: SQLException in nextKeyValue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:58:10.747

我认为问题出在 --table 参数中。Sqoop 期望纯表名，但您似乎传递了额外的值“tempdb..”（我猜这是一个数据库名称？）。你介意只用“--table mit”试试吗？

# c# - 数据绑定组合框有时会返回值而不是选择为显示成员的值

> ID：15411564
> 
> 赞同：1
> 
> 时间：2013-03-14T14:07:58.013
> 
> 标签：c#, data-binding, combobox

这是与组合框相关的所有代码。

```
string SelectedDealer = Dealers.SelectedValue.ToString();
this.Dealers.DataSource = this.dealersBindingSource;
this.Dealers.DisplayMember = "DealerName";
this.Dealers.ValueMember = "DealerName"; 
```

Dealers 表只有两列。发生的情况是，有时（一两次/应用程序运行）

```
Dealers.SelectedValue.ToString(); 
```

返回其他数据成员的值，letsay Dealer-Id；对，这很奇怪。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:18:33.537

尝试更改行的顺序，谁知道，这可能会有所帮助:) 如果先前未设置 ValueMember，则在设置其数据源后，Combobox 可能会为 ValueMember 设置一些默认值。

```
this.Dealers.DisplayMember = "DealerName";
this.Dealers.ValueMember = "DealerName";
this.Dealers.DataSource = this.dealersBindingSource;
string SelectedDealer = Dealers.SelectedValue.ToString(); 
```

还要检查您的组合框中是否确实选择了某些内容：组合框的 SelectedIndex 不会是 -1（SelectedValue 可能未指定，尽管它应该抛出 NullPointerException）

# php - Facebook Connect Wall Posting 仅作为弹出窗口出现。如何改变它？

> ID：15411567
> 
> 赞同：0
> 
> 时间：2013-03-14T14:08:01.887
> 
> 标签：php, javascript, facebook

我的网站有 facebook 应用程序，并且 facebook 连接工作正常。我在用户的墙上发布帖子选项，但在墙上发布帖子是作为弹出窗口发生的，并且大多数浏览器都会自动禁用弹出窗口。所以墙贴没有像我想要的那样工作，因为大多数人不启用弹出窗口。是否有任何解决方案可以使此帖子不是弹出窗口。

我用于 fb connect 的代码是

```
<script>

window.fbAsyncInit = function()
{
    FB.init({
        appId  : '',
        status : true, // check login status
        cookie : true, // enable cookies to allow the server to access the session
        xfbml  : true , // parse XFBML
        oauth : true // Enable oauth authentication
    });

FB.login(function(response)
{
    if (response.authResponse)
    {

        FB.api('/me/feed', 'post',
                {
                    message     : "",
                    link        : '',
                    picture     : "",
                    name        : '',
                   description  : ''

           },
           function(response) {
               showLoader(false);

                if (!response || response.error) {
                    alert('Error occured');
                } else {
                    alert('Post ID: ' + response.id);
                }
            });
    }

}, { scope : 'publish_stream' });
};

</script>

<!-- FACEBOOK -->        
<div id="fb-root"></div>
<script>
(function() {
 var e = document.createElement('script');
// replacing with an older version until FB fixes the cancel-login bug
  e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
  //e.src = 'scripts/all.js';
  e.async = true;
  document.getElementById('fb-root').appendChild(e);
  }());
</script>
<!-- END-OF-FACEBOOK --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:16:00.637

打开弹出窗口的不是帖子（`FB.api`是一种后台方法，它永远不会打开弹出窗口）——而是`FB.login`调用。

如文档中所述，不应在页面加载时调用此方法，而应在显式用户交互（例如单击登录按钮）时调用此方法。当前浏览器中默认配置的弹出窗口阻止程序不会阻止用户交互时出现的弹出窗口。

如果这对您来说还不够好，那么您可以使用登录对话框的直接 URL 版本，这将引导用户登录 Facebook 并在登录后返回您的页面：[https ://developers.facebook.com/docs/howtos/登录/客户端-没有-js-sdk/#step2](https://developers.facebook.com/docs/howtos/login/client-side-without-js-sdk/#step2)

# mongodb - 如何检索 Mongo DB 数组中存在的元素？

> ID：15411568
> 
> 赞同：0
> 
> 时间：2013-03-14T14:08:06.360
> 
> 标签：mongodb, mongodb-query, mongodb-java, spring-data-mongodb

我的结构如下所示：

```
{
  field1: "somevalue",
  name:"xtz",
  nested_documents: [ 
                        {   
                            x:1,
                            y:2,
                            info:[
                                    {name:"sachin",value:"test"},
                                    {name:"sachin", value:"test"}
                                 ]
                        },
                        {
                            x:1,
                            y:3,
                            info:[
                                    {name:"sachin1",value:"test"},
                                    {name:"sachin2", value:"test"}
                                 ]
                        },
                        {
                            x:4,
                            y:3,
                            info:[
                                    {name:"sachin",value:"test"},
                                    {name:"sachin", value:"test"}
                                 ]
                        }
                    ]
    } 
```

我知道我可以使用以下代码检索第一个数组中存在的元素：

```
db.test.find({"nested_documents.x": 1},{_id: 0, nested_documents: {$elemMatch: {x: 1}}} 
```

但是，我想对`name`属性应用相同的逻辑。我只想检索名称为“sachin”的文档。我尝试的内容如下所示：

```
db.test.find({"nested_documents.info.name": "sachin"}, 
        {_id: 0, 'nested_documents.info': {$elemMatch: {name: "sachin"}}}); 
```

但是Mongo db说它不支持'。投影内的运算符:(。
还有其他方法可以做到这一点吗？（使用命令提示符或代码）

插入文档的命令如下所示：

```
db.test.insert( {
  field1: "somevalue",
  name:"xtz",
  nested_documents: [ 
                        {   
                            x:1,
                            y:2,
                            info:[
                                    {name:"sachin",value:"test"},
                                    {name:"sachin", value:"test"}
                                 ]
                        },
                        {
                            x:1,
                            y:3,
                            info:[
                                    {name:"sachin1",value:"test"},
                                    {name:"sachin2", value:"test"}
                                 ]
                        },
                        {
                            x:4,
                            y:3,
                            info:[
                                    {name:"sachin",value:"test"},
                                    {name:"sachin", value:"test"}
                                 ]
                        }
                    ]
    }
    ) 
```

我期望输出为：

```
{ "_id" : ObjectId("5142e0f153cd2aab3a3bae5b"), 
"nested_documents" : [ 
                        {       "x" : 1,        "y" : 2,       
                        "info" : [     
                                    {       "name" : "sachin",      "value" : "test" },   
                                    {       "name" : "sachin",      "value" : "test" } 
                                ] 
                        },
                        {      "x" : 4,        "y" : 3,        
                        "info" : [      {       "name" : "sachin",      "value" : "test" },
                                        {       "name" : "sachin",      "value" : "test" } 
                                ] 
                        } 
                    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:18:31.857

您必须将 aggregate() 与双 $unwind 一起使用，如下所示：

```
db.test.aggregate([
    // filter for documents with x=1
    // note: this will use an index, if defined on "nested_documents.x"
    //{ $match: { "nested_documents.x": 1 } },
    // reduce data to nested_documents, as other fields are not considered
    { $project: { nested_documents: 1 } },
    // flatten the outer array
    { $unwind: "$nested_documents" },
    // filter for nested_documents with x=1
    // note that at this point nested_documents is no longer an array
    //{ $match: { "nested_documents.x": 1 } },
    // flatten the inner array
    { $unwind: "$nested_documents.info" },
    // filter for nested_documents.info.name = "sachin"
    // note that at this point nested_documents.info is no longer an array
    { $match: { "nested_documents.info.name": "sachin" } },
    // format output: re-create inner array
    { $group: { _id: { id: "$_id", 
                       nested_documents: { 
                          x: "$nested_documents.x",
                          y: "$nested_documents.y" 
                       }
                     }, 
                     info: { $push: "$nested_documents.info" } } },
    { $project: { "nested_documents.x": "$_id.nested_documents.x",
                  "nested_documents.y": "$_id.nested_documents.y",
                  "nested_documents.info": "$info" } },
    // format output: re-create outer array
    { $group: { _id: "$_id.id", nested_documents: { $push: "$nested_documents" } } },
]) 
```

注意：我在 //comments 中输入了过滤 x=1 的逻辑，就像在前面的示例中一样

结果是：

```
{
    "result" : [
        {
            "_id" : ObjectId("515d873457a0887a97cc8d19"),
            "nested_documents" : [
                {
                    "x" : 4,
                    "y" : 3,
                    "info" : [
                        {
                            "name" : "sachin",
                            "value" : "test"
                        },
                        {
                            "name" : "sachin",
                            "value" : "test"
                        }
                    ]
                },
                {
                    "x" : 1,
                    "y" : 2,
                    "info" : [
                        {
                            "name" : "sachin",
                            "value" : "test"
                        },
                        {
                            "name" : "sachin",
                            "value" : "test"
                        }
                    ]
                }
            ]
        }
    ],
    "ok" : 1
} 
```

有关聚合的更多信息，请参阅[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

# c# - 找不到用于 System.Json.JsonObject 类型的默认构造函数

> ID：15411572
> 
> 赞同：3
> 
> 时间：2013-03-14T14:08:12.977
> 
> 标签：c#, asp.net-mvc, json

我正在尝试返回一些推特数据，但我无法完成我的任务。

```
using System.Collections.Generic;
using System.Json;
using System.Linq;
using System.Net.Http;
using System.Web.Mvc;
using Demo.Models;

namespace Demo.Controllers
{
    public class HomeController : Controller
    {
    public ActionResult Index()
            {
                var model = new List<Tweets>();
                var client = new HttpClient();
                var task =
                    client.GetAsync("http://search.twitter.com/search.json?q=dave").ContinueWith((taskWithMessage) =>
                        {
                            var response = taskWithMessage.Result;
                            var jsonTask = response.Content.ReadAsAsync<JsonObject>();
                            jsonTask.Wait(); //THIS IS WHERE THE FAULT IS

                            var jsonObject = jsonTask.Result;
                            model.AddRange(
                                (from JsonObject jo in jsonObject["results"]
                                 select new Tweets
                                     {
                                         Name = jo["from_user"].ToString(),
                                         Text = jo["text"].ToString()
                                     }
                                ));
                        });

                task.Wait();
                return View(model);
            }
    }
} 
```

当我执行上述代码时，它失败并显示错误消息

> 找不到用于 System.Json.JsonObject 类型的默认构造函数

我在使用 .NET 4 和 4.5 时遇到了同样的错误消息

谁能解释一下我需要做什么？

其余部分包含完整的堆栈跟踪

```
[JsonSerializationException: Unable to find a default constructor to use for type System.Json.JsonObject. Path 'completed_in', line 1, position 16.]  
Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateNewDictionary(JsonReader reader, JsonDictionaryContract contract) +234
Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue) +810   

    Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue) +184
Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent) +793
Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType) +1143
Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType) +46
System.Net.Http.Formatting.<>c_DisplayClass8.b_6() +950 System.Threading.Tasks.TaskHelpers.RunSynchronously(Func`1 func, CancellationToken cancellationToken) +143

    [AggregateException: One or more errors occurred.]
System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions) +3548265
System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken) +10487717
System.Threading.Tasks.Task.Wait() +10
Demo.Controllers.<>c_DisplayClass3.b_1(Task1 taskWithMessage) in c:\Users\Dave\Documents\Visual Studio 2012\Projects\Demo\Demo\Controllers\HomeController.cs:22
System.Threading.Tasks.ContinuationTaskFromResultTask1.InnerInvoke() +80 System.Threading.Tasks.Task.Execute() +49

     [AggregateException: One or more errors occurred.]
System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions) +3548265
System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken) +10487717
System.Threading.Tasks.Task.Wait() +10
Demo.Controllers.HomeController.Index() in c:\Users\Dave\Documents\Visual Studio 2012\Projects\Demo\Demo\Controllers\HomeController.cs:35
lambda_method(Closure , ControllerBase , Object[] ) +101
System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14
System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary2 parameters) +211
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary2 parameters) +27
System.Web.Mvc.Async.<>c_DisplayClass42.b_41() +28 System.Web.Mvc.Async.<>c_DisplayClass81.<BeginSynchronous>b__7(IAsyncResult _) +10 System.Web.Mvc.Async.WrappedAsyncResult1.End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +48
System.Web.Mvc.Async.<>c_DisplayClass39.b_33() +57 System.Web.Mvc.Async.<>c_DisplayClass4f.b_49() +223 System.Web.Mvc.Async.<>c_DisplayClass37.b_36(IAsyncResult asyncResult) +10 System.Web.Mvc.Async.WrappedAsyncResult1.End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +48
System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +24 System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +102 System.Web.Mvc.Async.WrappedAsyncResult1.End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43
System.Web.Mvc.<>c_DisplayClass1d.b_18(IAsyncResult asyncResult) +14
System.Web.Mvc.Async.<>c_DisplayClass4.b_3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult1.End() +62
System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult1.End() +62
System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47     System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
System.Web.Mvc.<>c_DisplayClass8.b_3(IAsyncResult asyncResult) +25
System.Web.Mvc.Async.<>c_DisplayClass4.b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9     System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:42:04.073

这是因为 JsonObject 没有默认构造函数。见[这里](http://msdn.microsoft.com/en-us/library/system.json.jsonobject%28v=VS.95%29.aspx)。

我建议使用 Newtonsoft.Json（在 nuget 中也称为“JSON.NET”）而不是 System.Json。

```
using System.Collections.Generic;
using System.Linq;
using System.Net.Http;
using System.Web.Mvc;
using Newtonsoft.Json.Linq;
using PayPoint.Models;
using System.Threading.Tasks;

namespace PayPoint.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            var model = new List<Tweets>();
            const string webUri = "http://search.twitter.com/search.json?q=dave";

            var client = new HttpClient();
            var tweetTask = client.GetAsync(webUri);
            Task<JObject> jsonTask = tweetTask.Result.Content.ReadAsAsync<JObject>();
            var results = jsonTask.Result;

            model.AddRange((from b in results["results"]
                     select new Tweets()
                         {
                             Name = b["from_user"].ToString(),
                             Text = b["text"].ToString()
                         }).ToList());

            return View(model);
        }
    }
} 
```

# android - eclipse juno ADT 21 - 缓慢切换标签

> ID：15411574
> 
> 赞同：0
> 
> 时间：2013-03-14T14:08:16.650
> 
> 标签：android, eclipse, adt

当我尝试在选项卡之间切换时（时间约为 2-3 秒），我的日食非常慢。当我在选项卡之间切换时，我看到图标“重新加载依赖项”和“语法检查”切换这是我的配置：eclipse=Juno; adt-bundle=adt-bundle-windows-x86；广告版本= 21

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T14:17:42.263

我不知道你的日食会发生什么。在我的 Mac Pro 中运行良好，但确实有时我会感觉到选项卡之间的切换速度很慢。

无论如何，我的回答是……有一个新环境，Intellij Idea。也许一开始，设置android sdk和管理有点困难……但是来吧，它超级快……比eclipse快……而且界面超级好……如果你不能用 eclipse 正常工作，至少，让你知道你有这个选择。

我没有使用太多它，因为我也在为 iOS 编程，但是我们公司的两个超级书呆子，他们已经在使用 Intellij Idea。

希望这对您有所帮助，也许在将来。（欢迎您加分，:)）

# sql-server - SQL Server 空间查询：条件行为«奇怪»

> ID：15411583
> 
> 赞同：0
> 
> 时间：2013-03-14T14:08:33.587
> 
> 标签：sql-server, spatial

我已经意识到这个“愚蠢的”空间查询可以找到距离中心 5 公里远的所有点。源表包含 +150K 行。

这里是查询：

```
DECLARE @position geography = geography::Parse('POINT(9.123 45.123)')
DECLARE @circle geography = @position.STBuffer(5000) -- A circle of 5Km of radius

SELECT 
    g.Coordinate.STDistance(@position), g.Coordinate.Filter(@circle)
FROM 
    [DB_NAME].[SCHEMA].[TABLE] AS g WITH (nolock)
WHERE 
    g.Coordinate.Filter(@circle) = 1 
```

我奇怪地观察到该`WHERE`条件不起作用：实际上我检索到条件返回 0 的偶数 +600 个点。

有什么建议么？

为了清楚起见，表模式是

```
[DB_NAME].[SCHEMA].[TABLE](Coordinate geography NOT NULL) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:08:44.413

[官方文档](http://msdn.microsoft.com/en-us/library/cc627367%28v=sql.105%29.aspx)指出：«如果地理实例可能与另一个地理实例相交，则返回 1。这种方法可能会产生误报，确切的结果可能取决于计划。*如果没有找到地理实例的交集，则**返回准确的 0 值（**真正的负返回***） 。»

所以我的意思是 0 总是可以的，而 1 可以近似（恕我直言，这种行为是绝对合理的）

顺便说一句，@Damien 观察让我简单地解决了问题：

```
DECLARE @position geography = geography::Parse('POINT(9.123 45.123)')
DECLARE @circle geography = @position.STBuffer(5000) -- A circle of 5Km of radius

SELECT * FROM
    (SELECT 
       g.Coordinate.Filter(@circle) filter, g.Coordinate Coord
        FROM [DB_NAME].[SCHEMA].[TABLE] AS g WITH (nolock)
    WHERE 
        g.Coordinate.Filter(@circle) = 1
    ) t
    WHERE t.filter = 1 
```

这让我想起了“[双重检查模式](http://en.wikipedia.org/wiki/Double-checked_locking)”深奥……但在那种情况下，动机很明确。

可以进一步研究的一点是关于返回值的转换......很多年前，我偶然发现了一个类似的问题，在服务器场中，将布尔值树隐式转换为 int 导致 -1 (0xFFFFFFFF) 而不是 1 (0x00000001 )…COM 年龄…</p>

# matlab - 在两个集合数字之间生成随机值

> ID：15411585
> 
> 赞同：1
> 
> 时间：2013-03-14T14:08:35.813
> 
> 标签：matlab, random

我的任务是在 -2 和 5 之间生成 5000 个随机数，然后计算这些值中有多少在 2 和 3 之间 这是我目前所拥有的：

```
randNums=rand(1,5000); %Generate 5000 random values between 0 and 1

randNums=randNums*7-2; %Get those random values to be between -2 and 5 
```

我明白这一点`7*1=7`，`0*7=0`所以 -2 从每个 = 7-2，但我完全理解如果数字在 5,6 或 -6 和 1 之间，如何再次应用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:19:54.620

# 我的问题解释

您在区间 (0,1) 中有随机数。但是您需要（a，b）中的随机数。

# 解决方案

你只需要缩放和改变你的间隔。

**缩放区间：** 区间 (a,b) 的大小/长度为 ba。要重新调整间隔，您必须将所有随机值乘以 ba。

**移动间隔：** 当您缩放间隔时，您在间隔 (0,ba) 中有数字。您只需将数字 a 添加到其中即可移动所有数字。这导致区间（a，b）中的随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:29:43.213

您所指的是“[线性插值](http://en.wikipedia.org/wiki/Linear_interpolation)”。在某些库中，它被调用`lerp`并且通常被实现

```
float lerp(float v0, float v1, float t) {
    return v0+(v1-v0)*t
} 
```

所以在你的情况下`v0`是 -2，`v1`是 7，`t`是你想要插值的 0 到 1 之间的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:36:23.230

```
numbers = random('unif', -2, 5, 1, 1000);
count = sum(numbers > 2 & numbers < 3); 
```

# highcharts - Highcharts 中的灰度 SVG

> ID：15411586
> 
> 赞同：0
> 
> 时间：2013-03-14T14:08:36.290
> 
> 标签：highcharts

在 Highcharts 中是否有将彩色图表转换为灰度的选项？需要生成代表灰度图像的 SVG。基于 CSS 的选项无济于事，因为 SVG 没有在浏览器中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:17:07.737

您可以尝试定义自己的颜色[http://api.highcharts.com/highcharts#colors](http://api.highcharts.com/highcharts#colors)

# jquery - 动态删除预览添加的表格行

> ID：15411591
> 
> 赞同：0
> 
> 时间：2013-03-14T14:08:53.617
> 
> 标签：jquery

我有一个只有几行的表，我在每一行中添加了 onclick Eventhanlder，它创建了一个新的 TR 作为下一个元素：

```
$(this).after('<tr><td></td><td colspan="8">' 
                       + $(this)
                       .find('td:eq(1)')
                       .text() + '</td></tr>'); 
```

这工作正常。

但是我想通过单击下一个 TR（在本例中是第三个 TR）来删除我刚刚创建的 TR。

我需要类似的东西： $(this).before('tr').remove() ;-)

你能请。帮助？

干杯阿明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:11:22.330

像这样的东西应该可以解决问题

```
$(this).prev().remove(); 
```

**HTML**

```
<table>
    <tr>
        <td>Hello 1</td>
    </tr>
    <tr>
        <td>Hello 2</td>
    </tr>
    <tr>
        <td>Hello 3</td>
    </tr>    
</table> 
```

**JS**

```
$('tr').on('click', function(){
    $(this).prev().remove();
}) 
```

[**演示**](http://jsfiddle.net/dPcXv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:11:54.147

请参阅此处的文档： http: [//api.jquery.com/remove/](http://api.jquery.com/remove/)和此处：[http ://api.jquery.com/before/](http://api.jquery.com/before/)

# mongodb - MongoDB 和动态分片键

> ID：15411592
> 
> 赞同：1
> 
> 时间：2013-03-14T14:08:55.353
> 
> 标签：mongodb, dynamic, key, sharding

我一直在考虑使用 MongoDB 进行分片，并遇到了一个我无法弄清楚的用例……所以这里是：

如果我有类似这样的文件...

```
_id [Integer]
username [String]
password [String] <-- SHA1 hash
firstname [String]
lastname [String] 
```

...我现在选择密码字段作为我的分片键，它非常适合分片，因为它具有非常高的基数并且可以很好地扩展。但问题仍然存在，如果用户更改密码会发生什么？对应的文档会自动迁移到不同的chunk吗？

有人知道 MongoDB 如何处理这样的案例吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:33:25.933

不，分片键是不可变的。

考虑 mongo 文档，[我可以在对集合进行分片后更改分片键吗？](https://docs.mongodb.com/manual/faq/sharding/#can-i-change-the-shard-key-after-sharding-a-collection)：

> 我可以在对集合进行分片后更改分片键吗？
> 
> 不。
> 
> MongoDB 中没有自动支持在对集合进行分片后更改分片键。这一现实强调了选择一个好的分[片键](https://docs.mongodb.com/manual/core/sharding-shard-key/#shard-key)的重要性。如果在对集合进行分片后必须更改分片键，最好的选择是：
> 
> *   将 MongoDB 中的所有数据转储为外部格式。
> *   删除原始分片集合。
> *   使用更理想的分片键配置分片。
> *   [预先分割分片](https://docs.mongodb.com/manual/tutorial/create-chunks-in-sharded-cluster/)键范围以确保初始均匀分布。
> *   将转储的数据恢复到 MongoDB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-03T21:35:44.637

我对你的问题的理解是你问：

> 如果用户更改他的密码会发生什么？

不是：

> 如果我更改分片键会发生什么？

完全不同的问题。对于第二种情况，接受的答案是正确的。

对于您的原始问题：

在共享集群中，mongodb 有一个称为平衡器的组件。平衡器将平衡您的分片并迁移您的块，以便尽可能平衡它们的大小。

请阅读：[分片集群平衡器](https://docs.mongodb.com/manual/core/sharding-balancer-administration/)。

所以，是的，如果用户更改他们的密码，相应的文档将自动迁移到不同的块，只有当平衡器认为需要时。平衡器会处理这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-09T09:28:54.290

作为从 4.2 开始发布新版本的重要说明，以下声明不适用。

> “一旦插入，文档的分片键值就不能被修改”。

那么问题的答案，**可以更改分片键吗？**

> 尽管您不能为分片集合选择不同的分片键，但从 MongoDB 4.2 开始，您可以更新文档的分片键值，除非分片键字段是不可变的 _id 字段

# ios - AIR 3.6 iOS - 使用 ABC 加载外部 SWF

> ID：15411603
> 
> 赞同：4
> 
> 时间：2013-03-14T14:09:18.227
> 
> 标签：ios, actionscript-3, flash, air, flash-builder

使用 AIR 3.6，最终是否可以从 Web 加载带有 AS3 代码的 EXTERNAL swf 文件并在 iOS 设备上使用它？

我在[他们的网页上](http://labs.adobe.com/technologies/flashruntimes/air/)看到他们说新功能包括：

> 打包和加载多个 SWF：此功能允许开发人员随时从多个 SWF 动态加载所需的资产，而不必预先加载，从而为开发人员提供更好的内存管理。

澄清一下，这是否意味着它只适用于与应用程序一起打包的 swfs，或者也适用于外部 swfs？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:20:34.207

这只是在 AIR 3.7 而不是 3.6 中宣布的。

AIR 3.6 包括将多个 swf 打包到您的 iOS 应用程序的能力，但不允许您从外部服务器下载它们。

AIR 3.7 看起来让您能够从网站加载外部 swf。

> 应用程序开发人员将能够在外部服务器上托管他们的辅助 SWF，并使用此功能根据他们的应用程序逻辑按需加载它们。在 AOT 模式下加载具有任何 ABC 代码的辅助 SWF 之前仅适用于本地打包的 SWF，现在也适用于从外部加载 SWF

看起来字节码将包含在您的应用程序二进制文件中

> 在 IPA 打包期间，ADT 从示例文本文件中指定的所有子 SWF 中提取 Actioscript 代码，将其添加到最终可执行文件中，并将剥离的 SWF 移动到在当前工作目录中创建的“externalStrippedSwfs”文件夹中。

查看发行说明 PDF 以获取示例，

[http://labsdownload.adobe.com/pub/labs/flashruntimes/shared/air3-7_flashplayer11-7_releasenotes.pdf](http://labsdownload.adobe.com/pub/labs/flashruntimes/shared/air3-7_flashplayer11-7_releasenotes.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:02:07.393

似乎需要为 Flash Player 11.6 编译外部 SWF 文件，内部版本号 >= 19。

# php - 在会话中存储复选框值，然后通过会话重新选择它们

> ID：15411605
> 
> 赞同：1
> 
> 时间：2013-03-14T14:09:34.307
> 
> 标签：php, session, checkbox

我只是试图通过会话变量传递我的复选框值，以供用户在某个时候返回时使用。转到我的第一页后`POSTING`，我希望将这些选择存储在一个`SESSION`变量中。到目前为止，我还没有运气弄清楚这一点。我的代码如下。

这是我的复选框的 html。我有大约 15 个与下面同名的复选框。我采用所有这些复选框并将它们分解为另一个脚本以插入数据库。

```
<input type='checkbox' name='list[]' id='product' value='Product'></input> 
```

在这里，我使用复选框的 POST 设置我的变量。

```
$checkboxes = $_POST['list'];
$_SESSION['list'] = $checkboxes; 
```

如何将这些复选框选择传入和传出会话变量以选择前一页上的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:33:07.697

改变：

```
 <input type='checkbox' name='list[]' id='product' value='Product'></input> 
```

到

```
 <input type='checkbox' name='list[0]' id='product' value='Product'></input>
 <input type='checkbox' name='list[1]' id='product' value='Product'></input>
 etc. 
```

并使用 foreach：

可以，然后呢。我们知道，`$_SESSION['list']`我们只检查了那些！

```
 foreach ($_SESSION['list'] as $key => $value)
    {

             echo '<input type="checkbox" name="list['$key']" value="'.$value.'" checked="checked >';           
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-07T10:02:07.137

只是想我分享我的代码/解决方案，用于在会话中存储 html 表单复选框值。我的搜索并没有让我涵盖我需要的所有场景。
我的场景包括我通过检查或未检查的默认状态。

HTML 表单代码：

```
<input type="hidden" name="product[]" value = 0>
<input name="product[]" type="checkbox" value = 1 <?php echo (($productvalue == 1) ? 'checked' : '')?>> 
```

PHP表单处理代码：

```
$productvalue = ((isset($_POST['product'])) ? array_sum((array)$_POST['product']) : ((isset($_SESSION['productsession'])) ? $_SESSION['productsession'] : 0));
$_SESSION['productsession'] = $productvalue; 
```

# iphone - 自定义ios相机快门打不开？

> ID：15411606
> 
> 赞同：1
> 
> 时间：2013-03-14T14:09:35.560
> 
> 标签：iphone, ios5, camera, uiimagepickercontroller

我已经在自定义相机中尝试了 UIImagePickerController，当应用程序外出或我要调用 safari 时，相机快门未打开，我使用了以下代码。

```
 -(IBAction)cameraAction:(id)sender
{

   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   [defaults setValue:@"rear" forKey:@"rearcamera"];
   [defaults synchronize];
   NSLog(@"hai App %@",[defaults valueForKey:@"closeApp"]);

   dispatch_async(dispatch_get_main_queue(), ^{
       [cameraBut setSelected:NO];
       self.picker = [[UIImagePickerController alloc] init];
       self.picker.sourceType = UIImagePickerControllerSourceTypeCamera;
       self.picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
       self.picker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
       self.picker.showsCameraControls = NO;
       self.picker.navigationBarHidden = YES;
       self.picker.toolbarHidden = YES;
       self.picker.wantsFullScreenLayout = YES;

   });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:31:30.727

不要在 .h 文件中声明选择器。按钮操作中的简单声明和使用，工作完成后释放。

```
-(IBAction)cameraAction:(id)sender
{

   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   [defaults setValue:@"rear" forKey:@"rearcamera"];
   [defaults synchronize];
   NSLog(@"hai App %@",[defaults valueForKey:@"closeApp"]);

   dispatch_async(dispatch_get_main_queue(), ^{
       [cameraBut setSelected:NO];
      UIImagePickerController *picker = [[UIImagePickerController alloc] init];
      picker.sourceType = UIImagePickerControllerSourceTypeCamera;
      picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
      picker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
      picker.showsCameraControls = NO;
      picker.navigationBarHidden = YES;
      picker.toolbarHidden = YES;
      picker.wantsFullScreenLayout = YES;

      [self presentViewController:picker animated:YES completion:nil];

   });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T06:32:38.457

根据你的解释，我猜你只需要打开相机快门，你的相机就可以正常工作了。

所以我建议你添加一个动画，模拟相机快门打开。

这是代码，这是CALayer的核心动画：

```
CATransition *shutterAnimation = [CATransition animation];
     [shutterAnimation setDelegate:self];
     [shutterAnimation setDuration:0.6];

     shutterAnimation.timingFunction = UIViewAnimationCurveEaseInOut;
     [shutterAnimation setType:@"cameraIris"];
     [shutterAnimation setValue:@"cameraIris" forKey:@"cameraIris"];
     CALayer *cameraShutter = [[CALayer alloc]init];
     [cameraShutter setBounds:CGRectMake(0.0, 0.0, 320.0, 425.0)];
     [self.layer addSublayer:cameraShutter];
     [self.layer addAnimation:shutterAnimation forKey:@"cameraIris"]; 
```

这不是确切的解决方案，但这是解决方法之一。

希望这将帮助您实现您的要求。

# css - JSF Datatable 为什么单击按钮后样式会发生变化？

> ID：15411607
> 
> 赞同：1
> 
> 时间：2013-03-14T14:09:39.437
> 
> 标签：css, jsf, datatable, openfaces

我有一个`xhtml`页面，其中有两个设置为 css 样式的表：

```
<o:dataTable id="productTable" value="#{produkty.produkty}" var="p"
                rowKey="#{p.product.id}" pageSize="10" styleClass="dataTable"
                style="line-height: 15px; font-size: 12px; table-layout: fixed;">
                <o:columnResizing resizeHandleWidth="10px" minColWidth="50px" />
                <o:multipleRowSelection rowDatas="#{produkty.SProdukty}"
                    style="background: #a4aec5; color: white;" mouseSupport="false"
                    keyboardSupport="false" />

                <!-- OPIS -->

                <o:column header="Opis" id="opisCol1"
                    sortingExpression="#{p.product.opis}"
                    style="text-align: left; padding-right: 5px; padding-left: 5px; ">
                    <f:facet name="subHeader">
                        <o:inputTextFilter />
                    </f:facet>
                    <!-- <h:outputText value="#{p.product.opis}" /> -->
                    <o:hintLabel value="#{p.product.opis}" hintTimeout="0"
                        style="width: 350px; margin-right: 10px; color: black; border-color: red;" />
                </o:column>
            </o:dataTable> 
```

仅在我按下按钮时设置的样式`<o:hintLabel>`和标签：`<o:dataTable>`

addBean 方法如下所示：

```
public void addBean() {
  add();
  produktyP.chainReaction(this);
} 
```

它与表格没有任何共同之处，但它正在重新加载页面，为什么只有当我按下这个按钮时才设置 css 样式？另外，我会说该网站在标签中。我使用 OpenFaces 库。

`index.xhtml`资源：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:o="http://openfaces.org/">
<h:head>
    <title>PIR Kreator Ofert</title>
    <script src="/WEB-INF/resources/script.js" type="text/javascript"></script>
     <link rel="stylesheet" href="resources/style.css" type="text/css"/>
</h:head>
<h:body>
    <h:form id="form">
        <h:panelGrid columns="2">
            <h:outputLink value="index.xhtml"><h:graphicImage id="logo" alt="pir logo" url="/images/logo.png"/></h:outputLink>
            <h1>Kreator Ofert</h1>
        </h:panelGrid>
        <o:tabbedPane>
            <o:subPanel caption="Nagłówek">

                <ui:include src="index_core/naglowek.xhtml" />

            </o:subPanel>
            <o:subPanel caption="Produkty">

                <ui:include src="index_core/produkty.xhtml" />

            </o:subPanel>

        </o:tabbedPane>
        <h:panelGrid columns="2">
            Sortowanie Elementów:
            <o:selectBooleanCheckbox value="#{pdf.sortContent}" />
        </h:panelGrid>
        <h:panelGrid columns="5">
        Nazwa pliku:
            <o:inputText value="#{pdf.fileName}" />
            <o:commandButton id="printButton" value="Drukuj"
                actionListener="#{pdf.printt}" />
            <o:commandButton id="initializePDFButton" value="Reset"
                action="#{pdf.initPDF}" />
            <o:commandLink value="Download PDF" action="#{pdf.downloadPDF}"
                target="_blank" />
        </h:panelGrid>
        <!-- AJAX -->

        <ui:include src="ajax_core/ajax.xhtml" />

    </h:form>
</h:body>
</html> 
```

`produkty.xhtml`资源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:o="http://openfaces.org/">

    <h:panelGrid columns="2">
        <h:panelGroup layout="block" id="produktMenu">
            <o:dataTable id="productTable" value="#{produkty.produkty}" var="p"
                rowKey="#{p.product.id}" pageSize="10" styleClass="dataTable"
                >
                <o:columnResizing resizeHandleWidth="10px" minColWidth="50px" />
                <o:multipleRowSelection rowDatas="#{produkty.SProdukty}"
                    style="background: #a4aec5; color: white;" mouseSupport="false"
                    keyboardSupport="false" />

                <o:columnReordering />
                <f:facet name="columnMenu">
                    <o:columnMenu />
                </f:facet>
                <f:facet name="header">
                    <h:outputText value="Tabela Produktów" />
                </f:facet>
                <!-- SELECTION -->
                <o:selectionColumn sortable="true" header="Selection"
                    style="width: 5%;" onclick="O$('form:addProduct').run()">
                    <f:facet name="header">
                        <o:selectAllCheckbox style="width: 10px;" />
                    </f:facet>
                </o:selectionColumn>

                <!-- KATEGORIA -->

                <o:column header="Kategoria"
                    sortingExpression="#{p.product.kategoria}">
                    <f:facet name="subHeader">
                        <o:dropDownFieldFilter maxlength="4" customValueAllowed="false"
                            style="width: 40px;" />
                    </f:facet>
                    <h:outputText value="#{p.product.kategoria}" />
                </o:column>

                <!-- ILOSC -->

                <o:column header="Ilość">
                    <o:spinner id="ilosc" value="#{p.ilosc}" minValue="1"
                        maxValue="100" onclick="O$('form:addProduct').run()"/>
                </o:column>

                <!-- SYMBOL -->

                <o:column header="Symbol" id="symbolCol1"
                    sortingExpression="#{p.product.symbol}" style="width: 100px">
                    <f:facet name="subHeader">
                        <o:inputTextFilter />
                    </f:facet>
                    <h:outputText value="#{p.product.symbol}" />
                </o:column>

                <!-- OPIS -->

                <o:column header="Opis" id="opisCol1"
                    sortingExpression="#{p.product.opis}"
                    style="text-align: left; padding-right: 5px; padding-left: 5px; ">
                    <f:facet name="subHeader">
                        <o:inputTextFilter />
                    </f:facet>
                    <!-- <h:outputText value="#{p.product.opis}" /> -->
                    <o:hintLabel value="#{p.product.opis}" hintTimeout="0"
                        style="width: 350px; margin-right: 10px; color: black; border-color: red;" />
                </o:column>

                <!-- CENA -->

                <o:column header="Cena" id="cenaCol1"
                    sortingExpression="#{p.product.cena}" style="width: 55px;">
                    <h:outputText value="#{p.product.cena}€" />
                </o:column>

                <!-- PAGINATOR -->

                <f:facet name="below">
                    <o:dataTablePaginator id="paginator" firstText="Pierwsza"
                        lastText="Ostatnia" nextText="Następna" previousText="Poprzednia"
                        pageNumberPrefix="Strona" pageCountPreposition="z" />
                </f:facet>
                <f:facet name="footer">
                    <o:commandButton value="Odśwież" type="button"
                        onclick="O$('form:addProduct').run()" />
                </f:facet>
            </o:dataTable>
        </h:panelGroup>
    </h:panelGrid>

</ui:composition> 
```

我在两个页面上都使用 DOCTYPE，因为当只有 index.xhtml 有它时，Tomcat 给了我：

`HTTP Status 500 - /index.xhtml @28,51 <ui:include src="index_core/produkty.xhtml"> Invalid path : index_core/produkty.xhtml`

另一件事，当我想通过添加css文件`<h:outputStylesheet library="css" name="style.css" />`或`<link rel="stylesheet" href="resources/style.css" type="text/css"/>`tomcat给我`java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config`异常时，我将jstl.jar lib添加到`Tomcat/lib`并没有任何帮助。

它适用于IE olny，为什么？

# eclipse-plugin - Eclipse RCP 和 Eclipse 插件

> ID：15411613
> 
> 赞同：5
> 
> 时间：2013-03-14T14:09:42.927
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在尝试学习 Eclipse RCP 并在线阅读一些文章。我很困惑 Eclipse RCP 教程谈论 Eclipse 插件开发。我无法理解 Eclipse RCP。

Eclipse RCP 和 Eclipse 插件之间有什么关系？

我想用 Eclipse RCP 作为 UI 框架来开发应用程序（*不是吗？*）。这与 Eclipse 插件开发有什么关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:18:40.967

> Eclipse RCP 和 Eclipse 插件之间有什么关系？

它们都使用 Eclipse 作为集成开发环境 (IDE)。

Eclipse Rich Client Platform (RCP) 是一个用于运行应用程序的通用 Java 平台。它提供了使用 OSGi 框架构建富客户端应用程序 GUI 的基本块。

Eclipse RCP 是用于构建 GUI 应用程序的 SWT 基础。

Eclipse 插件扩展了 Eclipse IDE 的功能。

在内部，Eclipse RCP 和 Eclipse 插件与 OSGi 有一些相似之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-18T21:46:02.847

Eclipse 是一个提供java、C++等开发特性的IDE。

Eclipse IDE 是一个 Eclipse RCP 应用程序。

您可以开发将扩展 Eclipse IDE 的 Eclipse 插件。您可以开发 Eclipse 插件，这些插件将成为您自己创建的 Eclipse RCP 应用程序的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T14:10:15.947

如果您想创建一个 Eclipse RCP 应用程序，您将创建一个专用的应用程序类。在该应用程序类中，您将添加所有要添加的 swt 控件。Eclips RCP 是独立的应用程序。

Eclipse插件开发就是创建一个插件，也就是单独创建某个特性。如果您愿意，可以将其添加到您的 RCP 应用程序或任何其他插件中。

基本上插件开发正在开发可插拔或可插拔的功能。

例如，我创建了一个 RCP 应用程序“CAR”，如果我想将“AC”功能添加到“CAR”中，我正在创建一个插件“AC”，我可以添加或不添加。

插件和 RCP 应用程序之间的唯一区别是应用程序类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-04T18:45:35.670

Eclipse RCP**是一个**插件。那可以有更多的插件。在 Eclipse World 中，一切都是插件。

如果您创建一个 RCP 插件，它只是在其上构建您的应用程序的基础，您的起点。您可以通过创建更多插件（非 rcp 插件）来构建您的应用程序，并将它们集成到您的 RCP 应用程序中。

最后，您将拥有基于插件的应用程序。

# c# - 填充隐藏控件留下的空白空间

> ID：15411615
> 
> 赞同：2
> 
> 时间：2013-03-14T14:09:46.363
> 
> 标签：c#, winforms

这个问题有点微不足道，但我似乎找不到任何标准解决方案。

我有一个表单，根据用户权限显示或隐藏按钮+文本框。现在发生的事情是这样的：

![可以看到](../Images/04fda4603b7f44b057f2abdb4e9e4744.png)

这是用户有权查看/使用它的时候。当他不这样做时：

![没看到](../Images/7ed09e548daabcdfe4f4f8cf34e97a26.png)

它不可见 - 简单的部分，但据我发现，只有`FlowLayoutPanel`提供自动功能来隐藏这个空白空间，而我的情况并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:15:19.860

将标签和文本框的`Dock`属性设置为。`Top`这样，当按钮和文本框消失时，布局系统会自动将它们向上移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:16:21.323

这取决于这是否是您问题的简化版本。如果它只是您所描述的，那么每当您检查权限/隐藏相关控件时，您都可以使用它们的 Top 属性重新定位其他控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-22T08:44:18.397

将控件包装在 a 中`div`并将浮动设置为`float:none`。然后，通过将display 设置为 none 来隐藏`div`及其内容。例如;`div``display:none`

`<div style="display:none;float:none"> content to hide begin here </div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-19T22:04:44.033

嗯，很简单，只要把那个控件的位置改成隐藏控件的位置，在不隐藏隐藏控件的时候重新定位到原来的位置。

```
btn.location=new point(x,y) 
```

其中**x** , **y**是 winforms 中显示的隐藏控件的坐标。

# javascript - jQuery $.map 的 Angular 等价物？

> ID：15411620
> 
> 赞同：36
> 
> 时间：2013-03-14T14:09:58.193
> 
> 标签：javascript, jquery, angularjs, ecmascript-5

我正在从依赖 jQuery 过渡到在 AngularJS 中构建应用程序。[很多地方](https://stackoverflow.com/questions/14994391/how-do-i-think-in-angularjs-if-i-have-a-jquery-background)都建议*不要*混合使用 jQuery 和 Angular 代码。

我想念的一件事是用于数组的 jQuery $.map 函数。[我知道这可以使用本机 Javascript映射函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)重写，但这并不是在所有浏览器中实现的（特别是 IE < v9）。

那么，是否有 Angular 等价物，或者我应该重新开始写作`for (var x = 0; x < foo; x += 1) {...}`，这样我就可以停止包含 jQuery 了？

**更新**有时知道要搜索什么就是您所需要的。Bergie 说“寻找 polyfills”。这是一个参考指南（来自 Modernizr 团队），其中包含大量使现代代码在旧浏览器上工作的资源：[HTML5 Cross Browser Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-14T14:19:05.920

在这里查看：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

Mozilla 为不受支持的浏览器提供了 Array.map 填充程序

```
if (!Array.prototype.map) {
  Array.prototype.map = function(callback, thisArg) {

    var T, A, k;

    if (this == null) {
      throw new TypeError(" this is null or not defined");
    }

    // 1\. Let O be the result of calling ToObject passing the |this| value as the argument.
    var O = Object(this);

    // 2\. Let lenValue be the result of calling the Get internal method of O with the argument "length".
    // 3\. Let len be ToUint32(lenValue).
    var len = O.length >>> 0;

    // 4\. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if (typeof callback !== "function") {
      throw new TypeError(callback + " is not a function");
    }

    // 5\. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if (thisArg) {
      T = thisArg;
    }

    // 6\. Let A be a new array created as if by the expression new Array(len) where Array is
    // the standard built-in constructor with that name and len is the value of len.
    A = new Array(len);

    // 7\. Let k be 0
    k = 0;

    // 8\. Repeat, while k < len
    while(k < len) {

      var kValue, mappedValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if (k in O) {

        // i. Let kValue be the result of calling the Get internal method of O with argument Pk.
        kValue = O[ k ];

        // ii. Let mappedValue be the result of calling the Call internal method of callback
        // with T as the this value and argument list containing kValue, k, and O.
        mappedValue = callback.call(T, kValue, k, O);

        // iii. Call the DefineOwnProperty internal method of A with arguments
        // Pk, Property Descriptor {Value: mappedValue, : true, Enumerable: true, Configurable: true},
        // and false.

        // In browsers that support Object.defineProperty, use the following:
        // Object.defineProperty(A, Pk, { value: mappedValue, writable: true, enumerable: true, configurable: true });

        // For best browser support, use the following:
        A[ k ] = mappedValue;
      }
      // d. Increase k by 1.
      k++;
    }

    // 9\. return A
    return A;
  };      
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-12T21:52:41.823

不，Angular 中没有等价物。正如您所发现的，不，您不需要回退到编写命令式代码。

相反，只需使用`map`直接内置在 JavaScript 中的函数。如果您需要支持 IE8，请在脚本开头插入[polyfill 。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map#Polyfill)

# ios - 从设置应用程序获取数据到 IOS 中的实现

> ID：15411621
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:10:00.933
> 
> 标签：ios, objective-c

在我的 .h 上：

```
@property (weak, nonatomic) IBOutlet UILabel *user;
@property (weak, nonatomic) IBOutlet UILabel *pass;
@property (weak, nonatomic) IBOutlet UILabel *mail;

-(void)setValuesFromPrefrences; 
```

在我的 .m 上：

```
#define kUser @"user"
#define kPass @"pass"
#define kMail @"mail"

- (void)setValuesFromPrefrences {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

    NSDictionary *initialDefaults=[[NSDictionary alloc]
                                   initWithObjectsAndKeys:
                                   @"Username", kUser,
                                   @"Password", kPass,
                                   @"Mail", kMail,
                                   nil];
    [userDefaults registerDefaults: initialDefaults];

    self.user.text = [userDefaults stringForKey:kUser];
    self.pass.text = [userDefaults stringForKey:kPass];
    self.mail.text = [userDefaults stringForKey:kMail];
     }

- (void)viewDidLoad {
    [self setValuesFromPrefrences];
    [super viewDidLoad];
    [self setTitle:@"FEED"];

    [self refreshStream: @"1" user:@"user" pass:@"pass" mail:@"mail"]; 
} 
```

如何从用户那里获取值，传递并邮寄到该行：

```
[self refreshStream: @"1" user:@"user" pass:@"pass" mail:@"mail"]; 
```

现在代码将在标签上写入值，并且它可以工作 - 总线我想使用 refreshStream 中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:02:27.780

您的问题非常令人困惑，因为您似乎已经知道该怎么做。

假设您的问题是关于这一行：

```
[self refreshStream: @"1" user:@"user" pass:@"pass" mail:@"mail"]; 
```

然后做你在`setValuesFromPreferences`方法内部做的事情：

```
NSString *user = [[NSUserDefaults standardUserDefaults] stringForKey:kUser];
NSString *pass = [[NSUserDefaults standardUserDefaults] stringForKey:kPass];
NSString *mail = [[NSUserDefaults standardUserDefaults] stringForKey:kMail];
[self refreshStream: @"1" user:user pass:pass mail:mail]; 
```

如果这不是您正在寻找的内容，请澄清您的问题。

# java - 多表合一玩[2.0.4]

> ID：15411625
> 
> 赞同：0
> 
> 时间：2013-03-14T14:10:09.100
> 
> 标签：java, playframework, playframework-2.0, forms

我正在尝试制作一种具有一个模型和两个值的表单，这些值始终相同，但有一个值会发生变化。

我的html表单是：

```
@helper.form(action = routes.TeacherController.putQuestionToAssignment(), 'class -> "form-horizontal") {

            <input type="hidden" name="size" value="@{size}">
            <input type="hidden" name="assignment_id" value="@{assignment_id}">
            @for(question <- questions){
                <input type="checkbox" name="question_id" value="@{question.question_id}">
            }
                <button type="submit" class="btn btn-primary" value="submit">create</button>
    } 
```

我的模型：

```
@Entity
public class Verkefnaspurningar extends Model {
    @Id
    public int verkefnaspurningar_id;
    @Constraints.Required
    public int assignment_id;
    @Constraints.Required
    public int question_id;
    @Constraints.Required
    public Double size; 
```

在控制器中，我将尝试为表单中复选框中选中的每个问题创建一个模型，但我不知道该怎么做，我可以在表单中的 question_id 字段上设置一个 id 和通过那个循环？

```
public static Result putQuestionToAssignment(){
        Form<Verkefnaspurningar> verkefnaspurningarForm = form(Verkefnaspurningar.class).bindFromRequest();
            int question_id= verkefnaspurningarForm.get().question_id;
            Double size= verkefnaspurningarForm.get().size;
            int assignmentId= verkefnaspurningarForm.get().assignment_id;
            Verkefnaspurningar verkefnaspurningar = Verkefnaspurningar.create(assignmentId, question_id, size);

        return redirect(routes.TeacherController.createAssignment());
    } 
```

希望这篇文章不是愚蠢的，我的第一篇文章，对 Björn 表示亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:04:31.213

这是我解决您问题的想法。但是，我使用**Play!Framework 2.1.0**测试了这个解决方案。

在您的**控制器**`question_id`中，您可以像这样获取用户提交的检查值：

```
public static Result putQuestionToAssignment() {
    // get all HTTP request value from submitted form
    Map<String, String[]> map = request().body().asFormUrlEncoded();
    String[] allCheckedData = map.get("question_id"); // get all checked question
    ... // bind the rest of request parameter to variable if needed

    Verkefnaspurningar verkefnaspurningar;
    // Loop for each checked question
    for (String t : allCheckedData) {
        Logger.info("Checked data is " + t);
        verkefnaspurningar = new Verkefnaspurningar(); // create each data
        ... // put the rest of code for saving the model
    }

    return TODO; // still dummy. Should be redirect!
} 
```

请注意，我不在`Form`此解决方案中使用。我使用从提交的表单中获取所有请求参数`request().body().asFormUrlEncoded()`。`RequestBody` [在此处](http://www.playframework.com/documentation/api/2.1.0/java/play/mvc/Http.RequestBody.html)查看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:15:39.393

我会为此使用 DynamicForm 。它会是这样的：

```
public static Result putQuestionToAssignment(){

        DynamicForm form = form().bindFromRequest();

        Set<Long> ids = new HashSet<Long>();
        for (Entry<String, String> entry : form.data().entrySet()) {
                ids.add(Long.valueOf(entry.getValue()));
        }

        Verkefnaspurningar verkefnaspurningar;
        for (Long id : ids) {
                verkefnaspurningar = Verkefnaspurningar.create(assignmentId, id, ids.size());
        }
        return redirect(routes.TeacherController.createAssignment());
} 
```

要获得`assignmentId`，您可能必须在循环时添加一个条件`form.data().entrySet()`：如果`entry.getKey()`是您的分配之一，则存储 id，否则将值添加到 Set。

# java - 在 DST 当天将 GregorianCalendar 转换为 Date 会损失一个小时？

> ID：15411630
> 
> 赞同：2
> 
> 时间：2013-03-14T14:10:24.330
> 
> 标签：java, date

我正在解决将仅表示当前日期（即// 2013-03-10 00:00:00）的 GregorianCalendar 转换为 java.util.Date 对象的问题。这个测试背后的想法是取两个日期——一个只有当前日期，一个只有当前时间（即// 1970-01-01 12:30:45），并将它们组合成一个代表日期的日期和时间 (2013-03-10 12:30:45)。

在 DST 切换发生的那一天，测试失败 - 因为将 GregorianCalendar 转换为日期对象（Date date = dateCal.getTime(); 在下面的代码中）损失了一个小时，因此回滚到 (2013-03-09 23:00:00)。我怎样才能让这不会发生？

```
public static Date addTimeToDate(Date date, Date time) {
    if (date == null) {
        throw new IllegalArgumentException("date cannot be null");
    } else if (time == null) {
        throw new IllegalArgumentException("time cannot be null");
    } else {
        Calendar timeCal = GregorianCalendar.getInstance();
        timeCal.setTime(time);

        long timeMs = timeCal.getTimeInMillis() + timeCal.get(Calendar.ZONE_OFFSET) + timeCal.get(Calendar.DST_OFFSET);
        return addMillisecondsToDate(date, timeMs);
    }
}

@Test
public void testAddTimeToDate() {
    Calendar expectedCal = Calendar.getInstance();
    Calendar dateCal = Calendar.getInstance();
    dateCal.clear();
    dateCal.set(expectedCal.get(Calendar.YEAR), expectedCal.get(Calendar.MONTH), expectedCal.get(Calendar.DAY_OF_MONTH));

    Calendar timeCal = Calendar.getInstance();
    timeCal.clear();
    timeCal.set(Calendar.HOUR_OF_DAY, expectedCal.get(Calendar.HOUR_OF_DAY));
    timeCal.set(Calendar.MINUTE, expectedCal.get(Calendar.MINUTE));
    timeCal.set(Calendar.SECOND, expectedCal.get(Calendar.SECOND));
    timeCal.set(Calendar.MILLISECOND, expectedCal.get(Calendar.MILLISECOND));

    Date expectedDate = expectedCal.getTime();
    Date date = dateCal.getTime();
    Date time = timeCal.getTime();

    Date actualDate = DateUtil.addTimeToDate(date, time);

    assertEquals(expectedDate, actualDate);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:46:28.167

为什么在计算中包括时区偏移？当您在 Java 中使用毫秒时，它们*始终*使用 UTC。你不需要做任何额外的转换。

您最大的问题可能是尝试手动进行这些日期/时间计算。您应该使用 Calendar 类本身来处理计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:56:13.957

这就是我最终重构我的方法以补偿由于 DST 而损失/获得的时间的方式：

```
public static Date addTimeToDate(Date date, Date time) {
    if (date == null) {
        throw new IllegalArgumentException("date cannot be null");
    } else if (time == null) {
        throw new IllegalArgumentException("time cannot be null");
    } else {
        Calendar dateCal = GregorianCalendar.getInstance();
        dateCal.setTime(date);

        Calendar timeCal = GregorianCalendar.getInstance();
        timeCal.setTime(time);
        int zoneOffset = timeCal.get(Calendar.ZONE_OFFSET);

        if (dateCal.get(Calendar.MONTH) == Calendar.MARCH) {
            if (Calendar.SUNDAY == dateCal.get(Calendar.DAY_OF_WEEK) && dateCal.get(Calendar.DAY_OF_MONTH) >= 7
                    && dateCal.get(Calendar.DAY_OF_MONTH) <= 14 && timeCal.get(Calendar.HOUR_OF_DAY) >= 3) {
                zoneOffset -= TimeUnit.MILLISECONDS.convert(1, TimeUnit.HOURS);
            }
        } else if (dateCal.get(Calendar.MONTH) == Calendar.NOVEMBER) {
            if (Calendar.SUNDAY == dateCal.get(Calendar.DAY_OF_WEEK) && dateCal.get(Calendar.DAY_OF_MONTH) <= 7
                    && timeCal.get(Calendar.HOUR_OF_DAY) >= 3) {
                zoneOffset += TimeUnit.MILLISECONDS.convert(1, TimeUnit.HOURS);
            }
        }
        long timeMs = timeCal.getTimeInMillis() + zoneOffset + timeCal.get(Calendar.DST_OFFSET);
        return addMillisecondsToDate(date, timeMs);
    }
} 
```

我不喜欢这种方法，因为如果 DST 的规则发生变化，那么这种方法就需要更新。有没有可以执行类似功能的库？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:17:50.537

我试过了，并没有什么不同。甚至不同的语言环境，并用日历替换了 GregorianCalendar..

用过的：

```
private static Date addMillisecondsToDate(Date date, long timeMs) {
    return new Date(date.getTime() + timeMs);
} 
```

即将推出的 Java 8 具有更好的日期/时间支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-05T19:50:24.907

# xaml - Windows 8 XAML-only 解决方案，用于在将鼠标悬停在不同控件上时切换控件的可见性

> ID：15411634
> 
> 赞同：4
> 
> 时间：2013-03-14T14:10:34.443
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我正在处理一个项目，需要帮助来找到一个仅适用于 Windows 8 XAML 的解决方案，以便在将鼠标悬停在不同控件上时切换控件的可见性。该控件可以是按钮或任何 Windows8 控件，并且代码需要在 XAML 中，因为我的所有逻辑都在 XAML 中。我尝试了许多 XAML 解决方案，但我想我遗漏了一些东西。在我的第一次尝试中，我编写了一个事件触发器，但字符串无法转换为可见性，因此以下代码在执行时会崩溃。

微软的任何人或任何专家都可以帮助我吗？我真的很感谢你的帮助。我正在寻找的是一个不需要任何代码隐藏的解决方案，它应该是完整的 XAML 代码。

```
<Page
    x:Class="App1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App1"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <StackPanel Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Button Margin="5" x:Name="btn1">Button 1</Button>

        <Button Margin="5" x:Name="btn2">
            <Button.Triggers>
                <EventTrigger RoutedEvent="Button.GotFocus">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="btn1" Storyboard.TargetProperty="Button.Visibility" To="Collapsed" Duration="0:0:1"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>

                <EventTrigger RoutedEvent="Button.LostFocus">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="btn1" Storyboard.TargetProperty="Button.Visibility" To="Visible" Duration="0:0:1"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Button.Triggers>
            Button 2
        </Button>

        <Button Margin="5" x:Name="btn3">Button 3</Button>

    </StackPanel>

</Page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:34:39.553

我不确定您是否可以将 EventTrigger 与 RoutedEvent 一起使用。可能会有用

```
 <Page.Resources>
    <Style x:Key="TagAppBarButtonStyle" TargetType="Button" BasedOn="{StaticResource AppBarButtonStyle}">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border x:Name="AppButton" Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
              <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                  <VisualState x:Name="Normal">
                    <Storyboard>
                      <Storyboard>
                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="tbName" />
                      </Storyboard>
                    </Storyboard>
                  </VisualState>
                  <VisualState x:Name="PointerOver">
                    <Storyboard>
                      <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="tbName" />
                    </Storyboard>
                  </VisualState>

                </VisualStateGroup>

              </VisualStateManager.VisualStateGroups>
              <Grid Width="100">
                <Rectangle Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" Fill="Transparent"/>
                <TextBlock Text="Button 2" x:Name="tbName" />

              </Grid>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Page.Resources>
  <Grid>
  <StackPanel Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Button Margin="5" x:Name="btn1" Content="Button 1" />
    <Button Margin="5" x:Name="btn2" Style="{StaticResource TagAppBarButtonStyle}" />
    <Button Margin="5" x:Name="btn3" Content="Button 3" />

  </StackPanel>
  </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:21:01.450

你不能用 DoubleAnimation 控制 Visibility，因为 Visibility 不是一个 double。您应该使用 ObjectAnimationUsingKeyFrames：

```
<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="btn1">
    <DiscreteObjectKeyFrame KeyTime="0">
        <DiscreteObjectKeyFrame.Value>
            <Visibility>Collapsed</Visibility>
        </DiscreteObjectKeyFrame.Value>
    </DiscreteObjectKeyFrame>
</ObjectAnimationUsingKeyFrames> 
```

我还建议使用行为和视觉状态来使您的 XAML 对设计人员更加友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T11:35:30.893

[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)

这在框架中有许多内置转换器，包括 BooleanToVisibilityConverter。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T19:35:13.693

如果你只是想翻转`Visibility`你可以只使用绑定到`IsPointerOver`属性：

```
<StackPanel Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <StackPanel.Resources>
        <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </StackPanel.Resources>
    <Button Margin="5" x:Name="btn1">Button 1</Button>

    <Button Margin="5" x:Name="btn2"  Visibility="{Binding ElementName=btn1, Path=IsPointerOver, Converter={StaticResource BooleanToVisibilityConverter}}">
        Button 2
    </Button>
</StackPanel> 
```

您需要添加代码，`BooleanToVisibilityConverter`因为它不像 WPF 中那样内置。

# javascript - 如何在 HTML5 中只接受字符值

> ID：15411636
> 
> 赞同：0
> 
> 时间：2013-03-14T14:10:44.397
> 
> 标签：javascript, html

有什么简单的方法可以用来阻止用户接受 html 文本框中的数值吗？我遇到了 HTML5 的一些功能，例如 type="email" 等...

现在有什么功能可以只接受字符值吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T14:15:30.983

我不知道它的支持程度如何，但[模式](http://www.w3.org/TR/html5/forms.html#attr-input-pattern)属性应该允许你这样做。

```
<input name="test" type="text" pattern="[A-Za-z]+"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:25:17.283

我会喜欢 jQuery ：

**jQuery**

```
$("#only-text").on('keyup', function(e) {
    var val = $(this).val();
   if (val.match(/[^a-zA-Z]/g)) {
       $(this).val(val.replace(/[^a-zA-Z]/g, ''));
   }
}); 
```

见工作[小提琴](http://jsfiddle.net/soyuka/Y9my7/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:16:06.163

如果您想限制可以输入输入的字符，您将不得不使用一些 Javascript 来执行此操作，可以在[此处找到使用 jQuery 的示例](http://www.devcurry.com/2009/10/allow-only-alphanumeric-characters-in.html)

使用普通的 JS，你可以做类似的事情

```
document.getElementById("alphaonly").onkeypress=function(e){ 
var e=window.event || e 
var keyunicode=e.charCode || e.keyCode 
return (keyunicode>=65 && keyunicode<=122 || keyunicode==8 || keyunicode==32)? true : false 
} 
```

其中“alphaonly”是您输入的 id

# java - Java中的RSA加密，PHP中的解密

> ID：15411640
> 
> 赞同：5
> 
> 时间：2013-03-14T14:10:52.500
> 
> 标签：java, php, encryption, rsa

假设我有以下 Java 代码来生成公私密钥对：

```
KeyPairGenerator generator = KeyPairGenerator.getInstance ("RSA");
SecureRandom random = SecureRandom.getInstance("SHA1PRNG");

generator.initialize (1024, random);

KeyPair pair = generator.generateKeyPair();
RSAPrivateKey priv = (RSAPrivateKey)pair.getPrivate();
RSAPublicKey pub = (RSAPublicKey)pair.getPublic();

// Sign a message
Signature dsa = Signature.getInstance("SHA1withRSA");
dsa.initSign (priv);
dsa.update ("Hello, World".getBytes(), 0, "Hello, World".length());

byte[] out = dsa.sign();
/* save the signature in a file */
FileOutputStream sigfos = new FileOutputStream("sig");
sigfos.write(out);
sigfos.close(); 
```

如何在 PHP 中解密文件“sig”？我已经阅读了这篇文章：[https](https://stackoverflow.com/a/1662887/414414) ://stackoverflow.com/a/1662887/414414 ，它提供了一个将`DER`文件转换为的函数`PEM`（假设我还保存了来自 Java 的公钥）。

我试过类似的东西：

```
$key = openssl_pkey_get_public ("file://pub_key.pem");
$data = null;
openssl_public_decrypt ( file_get_contents ("sig"), $data, $key);
echo $data, "\n"; 
```

它成功解密了消息，但它是许多奇怪的字符。

我们的场景是一个 Java 客户端，它向 PHP 服务器发送消息，但使用私钥加密数据。PHP 知道公钥，它应该使用它来解密和验证消息。

我已经在 SO 上阅读了很多关于这个问题的帖子，但我已经意识到这是一个有点具体的问题，特别是如果使用不同的算法等。如果这可能是重复的，很抱歉。

非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:34:07.413

“RSA 签名”通常不仅仅是“用私钥加密，用公钥解密”，因为像 PKCS#1 这样的公钥协议也指定了填充方案，并且所有签名方案都将加密消息的摘要，而不是完整的消息。如果 java 的签名方案使用 PKCS#1 中指定的签名填充方案，我找不到任何文档，但我怀疑它是。

如果是，您将改为使用`openssl_verify`PHP 中的方法，在[此处](http://php.net/manual/en/function.openssl-verify.php)记录。如果签名无效或有效，这将分别返回 0 或 1。

如果 Java 不使用填充方案，您的问题是签名中加密的数据是消息的哈希，而不是消息本身（您可以在 Java 代码中看到它使用 SHA-1 哈希算法）。因此，在 PHP 方面，您需要使用设置为 true 的 sha1 方法获取消息的 sha1 哈希，[并](http://php.net/manual/en/function.sha1.php)`$raw_output`比较这些字符串以确保您的消息有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T14:19:43.070

从片段

```
$key = openssl_pkey_get_public ("file://pub_key.pem"); 
```

看起来您正在引用公钥，这将是错误的解密密钥。再确认一次 ？

# c++ - std::vector 中的高效 push_back

> ID：15411641
> 
> 赞同：2
> 
> 时间：2013-03-14T14:10:53.990
> 
> 标签：c++

在下面的代码中有 3 个对象 d1 和 d2 被创建用于执行 push_back()。一个在我创建时，一个在调用 v.push_back() 时，另一个在它实际复制到向量中时{我不确定}。

在 C++03 中不使用 std::vector 的情况下，避免这种情况的最佳选择是什么？

```
#include <iostream>
#include <vector>
#include <string>

using namespace std;

struct Details
{
    string fname;
    string lname;
    string address;
    int age;
};

int main(int argc, char **argv)
{
    vector<Details> v;

    Details d1;
    d1.fname = "vivek";
    d1.lname = "kumar";
    d1.address = "New Delhi";
    d1.age = 25;

    v.push_back(d1);

    Details d2;
    d2.fname = "some name";
    d2.lname = "some lastname";
    d2.address = "some address";
    d2.age = 25;

    v.push_back(d2);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:19:30.407

调用[`std::vector::push_back()`](http://www.cplusplus.com/reference/vector/vector/push_back/)本身不会创建副本，因为传递了 const 引用。它只创建成为向量元素的副本。而这个副本是 的语义所必需的`std::vector`。

您也可以`push_back()`在`Details`复制相对便宜的时候：

```
Details d1; // Now the 3 strings of d1 are still small
v.push_back(d1); // essentially copies 3 empty strings and an int.
v.back().fname = "vivek";
v.back().lname = "kumar";
v.back().address = "New Delhi";
v.back().age = 25; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:34:21.843

如果您真的确定性能在这里至关重要，那么您将需要/实现引用语义。

*   在 C++11 中你有移动语义，所以你会为 Details 结构实现一个移动构造函数，所以我通常强烈建议使用它
*   由于您使用的是 C++03，因此您可以使用 boost::shared_ptr 来包装您的 Details 结构，如下所示`vector<boost::shared_ptr<Details> >`：由于您使用的是 C++03，请注意`>`.
*   通常我会推荐 unique_ptr 而不是 shared_ptr，但 unique_ptr 仅在 C++11 中可用，在大多数情况下，移动语义替代方案更好。
*   我不推荐原始指针的原因是您需要为它们手动管理内存，这是一个禁忌。

至于您的示例，请注意在 C++03 push_back 中采用 const 引用，因此只涉及您的结构的一个副本。使用我上面建议的任何方法仍然会做一个副本，但是副本的大小将受到检查，并且不会随着您的结构大小而缩放，这可能正是您在处理大型文件时想要的数据。

# java - 使用Java中的Document删除xml中的节点

> ID：15411643
> 
> 赞同：0
> 
> 时间：2013-03-14T14:11:00.947
> 
> 标签：java, dom, xml-parsing, domdocument

我正在使用 org.w3c.dom.Document 进行 xml 解析。我的服务器中有一个 xml 文件，例如..

```
<query><item access='server1'><item access='server2'><item access='server3'></query> 
```

我将读取此 xml 文件并根据某些选项，我将动态删除任何节点（server1 或 server2 或 server3）并将结果作为字符串返回，以便我可以在我的一个用户界面中显示。下面是代码

```
DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
documentBuilderFactory.setIgnoringComments(true);
inputStream = new FileInputStream(new File(filename));
org.w3c.dom.Document doc = documentBuilderFactory.newDocumentBuilder().parse(inputStream);
Element rootNode = doc.getDocumentElement();
if(filename.endsWith("items.xml"))//load the enabled items
{
    NodeList nList = doc.getElementsByTagName("item");
    for(int i = 0; i < nList.getLength(); i++)
    {
        try
        {
            Node node = nList.item(i);
            if((node.getNodeType() == Node.ELEMENT_NODE))
            {
                Element ele = (Element)node;
                String access = (String)ele.getAttribute("access");
                String level = access.substring(0,access.indexOf("."));

                if(!LevelManager.isLevelEnabled(level))
                {
                    rootNode.removeChild(node);
                }
            }
            else
            {
                System.out.println("NO ELEMENT NODE");
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
}
doc.normalize();
StringWriter stw = new StringWriter();
Transformer serializer = TransformerFactory.newInstance().newTransformer();
serializer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,"yes");
serializer.transform(new DOMSource(doc), new StreamResult(stw));
discfeatures = stw.toString();
return discfeatures;
}
catch(Exception w)
{
} 
```

现在，问题是---> 有时节点没有被删除。例如，如果我删除了 server1 属性节点——它被删除了。然后我再次尝试删除 server2 属性节点。它显示不应该的 server1 节点。如果我使用了正确的删除节点的方法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:41:09.093

我刚刚意识到，在 for 循环中，一旦我删除节点，xml 节点的总大小就会减少 1，并且 xml 结构会重新排列......所以它将进一步推进 1 个节点。我将代码更改为

```
for(int i =0 ; i < nList.getLength();)
{
   //operation/

  //remove case match
   {
     //remove
     i=0;
     contiune;
   }
  i++
} 
```

这对我有用！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T17:52:18.540

当您删除节点列表中的节点时，DOM 会重新排列它，您的索引将是错误的。

> DOM 中的 NodeList 和 NamedNodeMap 对象是活动的；也就是说，对底层文档结构的更改会反映在所有相关的 NodeList 和 NamedNodeMap 对象中。

孩子的解决方案有效，但可能无效。所以我只是稍微编辑一下。

```
int j = 0;
for(int i =0 ; i < nList.getLength();)
{
   //operation/

  //remove case match
   {
     //remove
     i=j;
     continue;
   } else {
     j++;
   }
  i++
} 
```

我确实尝试过，它对我有用。

# mysql - 你怎么知道 GroovyStrings 什么时候没有被当作 Strings 对待？

> ID：15411647
> 
> 赞同：2
> 
> 时间：2013-03-14T14:11:08.427
> 
> 标签：mysql, groovy, mysql-connector, groovy-sql

在尝试修改 MySQL 数据库时，我在 Groovy 中遇到了一个令人困惑的问题。`GroovyString`除非 my显式转换为 a ，否则看似相同的代码会引发异常`java.lang.String`：

```
import groovy.sql.Sql
def sql = Sql.newInstance('jdbc:mysql://localhost/test?useUnicode=yes&characterEncoding=UTF-8', 'user', 'pass', 'com.mysql.jdbc.Driver')
def tableName = 'my_table'
sql.execute "truncate $tableName" 
```

抛出：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''my_table'' at line 1 
```

而以下工作没有问题：

```
sql.execute "truncate $tableName".toString() 
```

这是令人惊讶的。我是否应该预料到这个问题，如果是这样，在什么情况`GroovyString`下`String`可能会被区别对待？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:21:37.190

这里的区别在于 Groovy Sql 类显式地与 GStrings 一起使用以确保正确引用参数（[如文档中所述](http://groovy.codehaus.org/api/groovy/sql/Sql.html)）。

所以它将第一个示例转换为

```
truncate 'my_table' 
```

这是错误的（正如错误所解释的）

您还可以使用：

```
sql.execute "truncate ${Sql.expand(tableName)}" 
```

# c# - “如果任何包含任何”（DbExpressionBinding 需要输入）

> ID：15411651
> 
> 赞同：2
> 
> 时间：2013-03-14T14:11:16.847
> 
> 标签：c#, linq, entity-framework-5

我正在尝试构建一个简单的搜索，在其中传递关键字列表。但是，只要我将“任何包含关键字”添加为列表而不是字符串，我就会得到：

`"DbExpressionBinding requires an input expression with a collection ResultType."`

我已经扩展`IQueryable<Inspector>`了：

```
 public static IQueryable<Inspector> Search(this IQueryable<Inspector> qry, List<string> keywords)
 {
    return from i in qry
           where
             i.LastName.Any(x => keywords.Contains(i.LastName)) ||
             i.FirstName.Any(x => keywords.Contains(i.FirstName)) ||
             i.City.Any(x => keywords.Contains(i.City)) ||
           select i;
 } 
```

当我调用它时，我使用：

```
return qry.Search(keywords).ToList(); 
```

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:15:59.143

我认为您正在尝试解决此问题：

```
return from i in qry
    where keywords.Contains(i.LastName) ||
        keywords.Contains(i.FirstName) ||  
        keywords.Contains(i.City)
    select i; 
```

这将返回您的关键字列表中包含 FirstName、LastName 或 City 的任何记录。

# gps - 这个 GPGSV 句子有效吗？

> ID：15411652
> 
> 赞同：1
> 
> 时间：2013-03-14T14:11:16.890
> 
> 标签：gps, nmea

在解析 GPS 接收器的 NMEA 输出时，我得到以下几行：

```
$GPGSV,4,1,16,02,17,228,35,03,04,048,37,05,59,285,29,06,02,030,34*73
$GPGSV,4,2,16,07,58,061,46,08,80,159,40,09,11,227,32,10,51,167,47*77
$GPGSV,4,3,16,13,15,089,38,15,00,279,,16,00,018,,26,34,279,42*7A
$GPGSV,4,4,16,28,20,154,39*4C 
```

据我了解，来自网络上的各种来源（例如[这里](http://aprs.gids.nl/nmea/#gsv)），这是错误的。根据第 3 个数字，应该有 16 颗卫星，这对于我之前遇到的所有 GPS 接收器都是如此，但是这句话中的句子只包含 13 颗卫星的数据。

这是一个错误吗？还是我错误地阅读了规范？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T18:02:32.830

Nmea 是一种弱指定的文件格式。GPS 芯片制造商提供他们如何解释 NMEA 规范的文档。
例如，ublox 和 Sirf 各有一个大约 40 页的章节，描述如何解释 NMEA 格式。

因此，如果您写“或者我是否错误地阅读了规范？”，那么问题是您正在阅读哪个规范。GPS芯片制造商的那个？NMEA 0183 规范不包含足够的信息来正确解析句子。

特别是在您的情况下：NMEA 协议没有描述如何处理空值和无效值。

在您的情况下，接收器理论上预计会看到 16 颗卫星，但只找到了 13 颗。我希望丢失的 3 颗卫星将有空的“,,,,,,,”。但显然制造商决定停止并附加校验和字符串。（它根本没有指定必须为丢失的 3 个 sats 打印出空分号。

不幸的是，您必须为每个 CHPS 芯片制造商编写 NMEA 解析器。
因此我总是推荐使用芯片制造商协议的二进制格式。（例如，uBlox 二进制文件或 Sirf 二进制文件，因为它们是完全指定的）。

您可以进一步查看 GpsBable 的文档：它们显示了不同的制造商如何产生不同的 GSV 数据集。

**更新：**
正如您现在所说，它是一个 ublox 接收器：

答案是，是的，NMEA 语句是有效的。查看 ublox 协议规范。我使用 ublox 5 的规范：在描述 GSV 句子的页面上查看“消息结构”：

```
{,sv,elv,az,cno}*cs 
```

花括号包含重复的序列。下面看看“1..4”：这意味着 1,2,3 或 4 个块。没有写“4”，它的“1..4”因此卫星信息是可选的，并且不能为空。

如果您进一步查看 ublox 给出的示例，那么您会看到，最后一条 GPGSV 消息包含少于 4 颗卫星，正如您在问题中所显示的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-16T21:49:48.093

是的，这是不一致的；最后一条消息应该描述了不止一颗卫星（实际上是四颗），以便将广告中的 16 颗加起来。GPS 接收器应该至少报告卫星 ID (PRN)，即使它们在天空中的观察方向和 SNR 当时是未知的，例如：{,01,,,}。

话虽如此，最好编写能够容忍格式错误消息的程序；在这种情况下，将视图中的卫星数量更新为 13 颗。

（我检查了校验和，它们没问题。）

# c++ - “删除”的 CMFCPropertyGridProperty 问题

> ID：15411664
> 
> 赞同：0
> 
> 时间：2013-03-14T14:11:55.600
> 
> 标签：c++, visual-studio-2008, mfc

当我在我的应用程序中使用 CMFCPropertyGridProperty 时，我遇到了在运行时操作值的问题。“删除”键不起作用。在 Debug 版本中它可以工作，但在 Release 中不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:52:41.193

您没有提供很多信息，所以我只是在了解您在 Debug 和 Release 构建之间的行为不同的事实。这通常是由于未初始化变量的问题——通常是布尔值——所以首先检查你的代码以确保你没有这样的问题。特别是，布尔值将在 Debug 构建中初始化为零，但在 Release 构建中可能为非零 - 这会影响应用程序中的逻辑。

# c# - NMock 和 NUnit

> ID：15411674
> 
> 赞同：1
> 
> 时间：2013-03-14T14:12:12.903
> 
> 标签：c#, unit-testing, nunit, nmock

NMock 和 NUnit 有什么区别？我花了一些时间在谷歌上搜索并在这里找到了解释：

[http://blog.yetcode.co.uk/2009/05/nunit-and-nmock/](http://blog.yeticode.co.uk/2009/05/nunit-and-nmock/) [http://en.wikipedia.org/wiki/NMock](http://en.wikipedia.org/wiki/NMock) [http://en.wikipedia.org/wiki/NUnit](http://en.wikipedia.org/wiki/NUnit)

但是，我仍然不清楚。

以下网页还显示：“我们现在有教程！”： http: [//nmock3.codeplex.com/](http://nmock3.codeplex.com/)。我找不到这些教程。有最新的教程吗？我找到了本教程：http: [//msdn.microsoft.com/en-us/magazine/cc163904.aspx](http://msdn.microsoft.com/en-us/magazine/cc163904.aspx)。但是，在添加对 NMOCK3 ( `using NMock;`) 的引用后，我在尝试创建 DynamicMock 实例时遇到编译器错误：“找不到类型或命名空间名称 DynamicMock”。

我已经购买了一本关于该主题的书，预计将在几天内交付。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:33:41.453

NMock 是一个有助于实现单元测试的框架，它们基于接口创建模拟数据。mock 是基于代理模式的数据副本

示例：为了测试业务层，避免访问数据库，避免不属于测试的网络约束，您模拟您的数据访问类。

NUnit 是执行测试的技术层。但是使用 NMock 你可以完成这些困难案例

# perl - 带有 Sublime Text 2 的用户输入 Perl 程序

> ID：15411678
> 
> 赞同：2
> 
> 时间：2013-03-14T14:12:21.900
> 
> 标签：perl, sublimetext2, read-eval-print-loop, sublimerepl

我一直在编写脚本并构建它们没有问题。但是当我想接受用户输入时呢？

我安装了 SublimeREPL 并选择了 perl 包，但我不确定如何使用这个控制台运行我的程序。

我没有看到任何文档，我看到有人运行 python 脚本并输入“运行”的视频，但这似乎不适用于 perl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:34:30.790

SublimeREPL 应该是 Perl 的吗？我不这么认为。也许您应该尝试使用`perl myscript.pl`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:39:26.373

包含的 Perl REPL ( `Packages/SublimeREPL/config/Perl/re.pl`) 基本上是一个非常短的 perl 程序，`eval()`一次输入一行：

```
$| = 1;

    while(true) {
        print "perl>  ";
        $line=<>;
        $value=eval($line);
        $error=$@;
        if( $error ne "" ) { 
                print $error; 
            } else { 
                print "$value\n"; 
        }
    } 
```

而且，老实说，还有很多不足之处。

然而，快速搜索 CPAN 发现了[Devel::REPL](http://search.cpan.org/~ether/Devel-REPL-1.003015/lib/Devel/REPL.pm)，你可以尝试在 SublimeREPL 中运行它。创建以下内容`Packages/User/SublimeREPL/config/Perl/Main.sublime-menu`：

```
[
     {
        "id": "tools",
        "children":
        [{
            "caption": "SublimeREPL",
            "mnemonic": "r",
            "id": "SublimeREPL",
            "children":
            [
                {"caption": "Perl",
                "id": "Perl",

                 "children":[
                    {"command": "repl_open",
                     "caption": "Devel::REPL",
                     "id": "repl_perl",
                     "mnemonic": "p",
                     "args": {
                        "type": "subprocess",
                        "encoding": "utf8",
                        "cmd": ["/path/to/perl", "/path/to/Devel/REPL/re.pl"],
                        "cwd": "$file_path",
                        "syntax": "Packages/Perl/Perl.tmLanguage",
                        "external_id": "devel_repl"
                        }
                    }
                    ]
                }
            ]
            }]
        }
] 
```

这将为`Perl`您的菜单添加一个新的子`Tools`菜单，其中包含一个`Devel::REPL`选项。我现在没有机会测试它，祝你好运！

# c# - 工作流 Foundation 4.5 并排版本控制

> ID：15411685
> 
> 赞同：0
> 
> 时间：2013-03-14T14:12:34.340
> 
> 标签：c#, workflow-foundation-4, workflow-foundation

使用 VS 2012 和 .Net 4.5，我开发了一个工作流并进行了部署。由于一些业务变化，我不得不改变它。由于以前的版本没有错误，我可以让旧实例得出结论，我决定使用并行版本控制。

不过有问题。我的工作流程有 c# 表达式。我确实实现了一个工厂，它只适用于新实例！如果旧实例收到消息，运行时会返回工作流 (v1) 未“编译”！我将其解释为“服务激活仅适用于最新版本”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:51:06.843

我最终找到了这里描述的相同答案：[WF4.5 not compiling side-by-side c# workflows](https://stackoverflow.com/questions/15412914/wf4-5-not-compiling-side-by-side-c-sharp-workflows)

我不得不手动强制工厂的版本......

# c++ - 如何通过符号在内存中的地址获取有关符号的更多信息

> ID：15411690
> 
> 赞同：2
> 
> 时间：2013-03-14T14:12:57.020
> 
> 标签：c++, linux, dlopen, thunk, dladdr

我试图通过它在内存中的*地址来获取符号名称。*我使用`int dladdr(void *addr, Dl_info *info)`函数 from`dlfcn.h`来获取信息：

```
类型定义结构{
 常量字符 *dli_fname; /* 共享对象的路径名
                                          包含地址 */
 无效*dli_fbase；/* 共享对象的地址
                                          已加载 */
 常量字符 *dli_sname; /* 与地址最近的符号名称
                                          低于地址 */
 无效*dli_saddr；/* 命名符号的确切地址
                                          在 dli_sname */
} DL_信息；

```

但此函数找不到与地址匹配的符号，并将 dli_sname 和 saddr 设置为 NULL。

在这种情况下，如何获取符号名称或有关符号的任何其他信息（种类、属性等）？

**注意：**我要查找的符号名称是`_ZTv0_n24_N4QGst13PropertyProbeD0Ev`. `QGst::PropertyProbe`它在类的vtable 中列出`g++ -fdump-class-hierarchy`：

```
QGst::PropertyProbe 的 Vtable
QGst::PropertyProbe::_ZTVN4QGst13PropertyProbeE: 14u 个条目
...
80 (int (*)(...))QGst::PropertyProbe::_ZTv0_n24_N4QGst13PropertyProbeD1Ev
...

```

但是，当我通过和符号查看共享对象并遍历虚函数指针列表`dladdr`时，我没有通过它的地址找到它。v-table 中的所有其他函数都由 找到。`dlopen``dlsym``_ZTVN4QGst13PropertyProbeE``dladdr`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:15:10.027

> 我试图通过它在内存中的地址来获取符号名称。

做什么的？

> 我使用 int dladdr() ...

首先需要了解的是，`dladdr`只看ELF 映像的*动态符号表，它通常比**静态*符号表小得多。可以看到动态符号表的内容`nm -D`。

例如，如果你链接的`a.out`可执行文件不带`-Wl,-E`或`-rdynamic`标志，那么`main`将不会出现在动态符号表中，从而将“不可见”到`dladdr`.

您需要知道的第二件事是，当您链接共享库时，您可以准确控制哪些符号可以从其中导出和不导出（导出的符号是具有动态符号表条目的符号）。有多种方法可以做到这一点：链接器版本脚本、`-fvisibility`标志、`attribute((visibility(...)))`.

这就是说，找到一个`dladdr`无法告诉您任何信息的符号一点也不奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:21:51.197

试试`objdump --syms`。那应该打印（损坏的）符号名称及其地址。请参阅[http://linux.die.net/man/1/objdump](http://linux.die.net/man/1/objdump)。

# arrays - 使用 powershell 格式化数组并包含在电子邮件中

> ID：15411692
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:13:02.883
> 
> 标签：arrays, email, powershell, format

我正在尝试构建一个 powershell 脚本，该脚本从多个系统收集系统正常运行时间信息，然后通过电子邮件发送。我想格式化电子邮件，以便以合理的方式对其进行结构化，然后添加有关系统的更多信息。

今天我有这个脚本，它收集有关系统列表的正常运行时间信息，然后将这些信息以数组的形式传递给 SendMail 函数，该函数将数组包含在电子邮件中。但是当前的输出是这样的。

```
正常运行时间列表：重新启动 02/19/2013 04:04:52 MyServer01 计算机正常运行时间：23 天 9 小时 重新启动 02/15/2013 04:17:40 MyServer02 计算机正常运行时间：27 天 9 小时

```

我希望输出或电子邮件文本更像：

```
系统 | 重启日期/时间 | 正常运行时间
MyServer01 02/17/2013 04:04:52 25 天 9 小时
MyServer02 02/17/2013 04:04:52 25 天 9 小时

```

如何格式化电子邮件中的文本，或者在将数组传递给电子邮件函数之前是否必须这样做。

脚本本身：

`

```
function SendMail([string]$arg1){

     #SMTP server name
     $smtpServer = "mysmtp"

     #Creating a Mail object
     $msg = new-object Net.Mail.MailMessage

     #Creating SMTP server object
     $smtp = new-object Net.Mail.SmtpClient($smtpServer)

     #Email structure 
     $msg.From = "my@overtherainbow.ddd"
     $msg.ReplyTo = "noreply@overtherainbow.ddd"
     $msg.To.Add("my@overtherainbow.ddd")
     $msg.subject = "System uptime"
     $msg.body = ("List og servers and uptime:" + $arg1 )

     #Sending email 
     $smtp.Send($msg)}

function CheckUptime($listofservers){
    $k =@()
    foreach($s in $listofservers){
        $Booted = Get-WmiObject -Class Win32_OperatingSystem -Computer $s
        $Calc = [DateTime]::Now - $Booted.ConvertToDateTime($Booted.LastBootUpTime)
        $k +=       "   Restarted " + 
        $Booted.ConvertToDateTime($Booted.LastBootUpTime) +
        " " + $s + " " +
        "    Computer Uptime:   " + 
        $Calc.days + " " +
        "days and", $Calc.hours + " hours"
        }
        return $k
}

#Defining list og servers
$listofservers = "MyServer01", "MyServer02"

#Calling function
$message = CheckUptime($serverlist)
SendMail($message) 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:24:57.727

首先，当您的样本甚至不是工作样本时，它几乎不需要付出任何努力。可变错别字等

作为一种解决方案，为什么不为每个服务器创建包含数据的自定义对象并将其作为数组输出？就像是：

```
PS > function CheckUptime($listofservers){
    $res = @()

    foreach($s in $listofservers){
        $boot = Get-WmiObject win32_operatingsystem -ComputerName $s | % { $_.ConvertToDateTime($_.LastBootUpTime) }
        $uptime = [DateTime]::Now - $boot
        $res += New-Object psobject -Property @{
            Server = (Get-Culture).TextInfo.ToTitleCase($s)
            BootTime = $boot
            Uptime = "{0} days and {1} hours" -f $uptime.Days, $uptime.Hours
        }
    }

    #Output
    $res
}

$myservers = "localhost", "localhost"

$str = "List of servers and uptime:`r`n"

$str += CheckUptime $myservers | Out-String

PS > $str
List of servers and uptime:

Server                            Uptime                           BootTime
------                            ------                           --------
Localhost                         8 days and 6 hours               06.03.2013 09:33:37
Localhost                         8 days and 6 hours               06.03.2013 09:33:37 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:34:02.703

用于`Format-Table`根据需要格式化数据，并将其通过管道`Out-String`转换为包含格式化数据的单个字符串。

然后将其附加到您的电子邮件内容中。

这依赖于数据收集，将构建单个字符串替换为构建自定义对象，每个不同列都有单独的字段。

例如（不完整，但应该给你的想法）

```
$serverData = $serverList | Foreach-Object { GetServerData $_ } | 
   Format-Table Name, 
                @(l='Boot Time'; e={$_.BootTime.ToLocalTime()}},
                @(l='Uptime'; e={FormatUptime([DateTime]::UtcNow - $_.BootTime}} |
   Out-String

$emailBody += $serverData 
```

其中引用的函数已经定义，大致如下：

```
function GetServerData {
  params([string]$name)

  $os = Get-WmiObject -Class Win32_OperatingSystem -Computer $name
  $bootTimeLocal = $os.ConvertToDateTime($os.LastBootUpTime)

  new-object PSObject -property @{
    Name = $name;
    # Keep everything in UTC to avoid confusion in calcs,
    # TODO FIX: Use the remote machine's timezone for this....
    BootTime = $bootTimeLocal.ToUniversalTime()
  }
} 
```

和

```
function FormatUptime {
  params([TimeSpan]$time)

  ...
} 
```

概括：

*   使用`Format-*`cmdlet 进行格式化，如果不立即传递给输出（默认`Out-Default`附加到每个管道的末尾，`Out-*`没有`Out-String`.
*   尽可能长时间地保持数据类型的本机类型。除非必须，否则不要转换为人类可读的形式。因此信息不会丢失。
*   利用自定义对象和属性（尤其是 NoteProperties）来创建您自己的对象“类型”以将相关信息保存在一起。

# javascript - jQuery 切换 - 只显示一个 div

> ID：15411693
> 
> 赞同：1
> 
> 时间：2013-03-14T14:13:04.717
> 
> 标签：javascript, jquery, toggle

我是 javascript 和 jQuery 的绝对初学者，正在努力学习。我有一些用这个 jQuery 切换的表：

```
$(document).ready(function() {
    $('th').click(function() {
        $(this).parents('table').find('td').slideToggle("fast");
    });
}); 
```

我想一次只显示一个表，这样如果你先显示第一个表然后再显示另一个，第一个表就会关闭。我将非常感谢任何指导。完整代码在这里：http: [//jsfiddle.net/qHGDF/1/](http://jsfiddle.net/qHGDF/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:17:16.630

试试这个

```
 $('th').click(function() {
    $(".datagrid").children("table").find("td").slideUp();
    $(this).parents('table').find('td').slideToggle("fast");
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:28:46.507

您需要隐藏那些打开的，一种方法是找到所有不需要显示和运行的 td ：http `slideUp()`: [//jsfiddle.net/qHGDF/4/](http://jsfiddle.net/qHGDF/4/)

```
$('th').click(function() {
    var thetd =  $(this).parents('table').find('td');
    $('table  td').not(thetd).slideUp("fast");
    $(thetd).slideToggle("fast");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:17:56.923

您可以随时向上滑动所有其他 td

```
$(document).ready(function() {
    $('th').click(function() {
        $("td").slideUp("fast");
        $(this).parents('table').find('td').slideToggle("fast");
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:18:20.137

为此，您需要先隐藏所有 td

```
var $ = jQuery.noConflict(true);
        $('th').click(function() {
            $('table  td').hide(300);
            $(this).parents('table').find('td').slideToggle("fast");
        }); 
```

[小提琴](http://jsfiddle.net/manishmishra256/uGhpH/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T14:32:12.867

如果您的表格上有太多条目，并且出于优化渲染的目的，请滑动*元素*`<tbody>`而不是`<td>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T14:37:13.677

你可以试试这个：http: [//jsfiddle.net/5hDVS/](http://jsfiddle.net/5hDVS/)

```
$(document).on('click','div.datagrid',function() {
     $('table td',this).slideToggle("fast");
     $('td',$(this).siblings('div.datagrid')).slideUp('fast');
}); 
```

# java - 无法连接到端口 7056 上的二进制 FirefoxBinary(C:\Program Files (x86)\Mozilla Firefox\firefox.exe)；处理输出如下：null

> ID：15411696
> 
> 赞同：1
> 
> 时间：2013-03-14T14:13:10.260
> 
> 标签：java, selenium, webdriver

我正在使用带有 Selenium 2.29.0 的 FireFox 18。运行测试异常时发生

无法连接到端口 7056 上的二进制 FirefoxBinary(C:\Program Files (x86)\Mozilla Firefox\firefox.exe)；处理输出如下：null

这个错误很少发生似乎很奇怪。假设我的班级有 20 次测试，“连接失败”错误发生在 2 次测试中，有时 3 次，有时不会发生。

无法弄清楚为什么会这样。如果这是版本问题或其他问题，则不应运行任何测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:31:08.163

如果您的环境变量中的路径变量未设置..然后将其设置为 Firefox.exe 的位置....或者您可以明确提及 firefox.exe 的路径

```
File pathToFirefoxBinary = new File(browser);
FirefoxBinary firefoxbin = new FirefoxBinary(pathToFirefoxBinary);
driver = new FirefoxDriver(firefoxbin,null); 
```

这应该可以工作..或者你可以升级到 2.31.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T15:41:02.243

我在使用 Firefox 28.0 时遇到了完全相同的问题，我通过将 Firefox 版本降级到 27.0.1 解决了这个问题

# c# - 如果 text 属性已设置为绑定，如何在插入模式下预填充 formview 文本框？

> ID：15411697
> 
> 赞同：2
> 
> 时间：2013-03-14T14:13:11.950
> 
> 标签：c#

我有一个 formview 控件，用于将数据上传到附加的 gridview 控制器。在我的 gridview 顶部，我使用 asp:linkbutton 将我的 formview 设置为插入模式

```
 FormView1.ChangeMode(FormViewMode.Insert); 
```

这是我在表单视图的插入模板中的文本框：

```
 <asp:TextBox ID="Date_Position_AvailableTextBox" runat="server" Text='<%# Bind("Date_Position_Available") %>' /> 
```

这是我在 formLoad 中的代码。这是我相信我预填充文本框控件的值的地方：

```
 if (!IsPostBack)  
        {  
            FillDefaultVaueInFormView();  
        } 
```

最后是我的 FillDefaultVaueInFormView(); 功能。

```
 public void FillDefaultVaueInFormView()
    {

        if (FormView1.CurrentMode == FormViewMode.Insert)
        {

            TextBox txtPositionAvailable = FormView1.FindControl("Date_Position_AvailableTextBox") as TextBox;
            if (txtPositionAvailable != null)
            {
                txtPositionAvailable.Text = DateTime.Now.ToShortDateString();
            }
        }
    } 
```

当我进入插入模式时，该字段为空白。我在这里做错了什么？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:21:51.147

`FillDefaultValueInFormView()`在将 FormView 设置为插入模式后，您需要立即移动。当您尝试在表单加载时填写字段时，文本框不存在（当您不处于插入或编辑模式时，“文本框”实际上是标签）。这导致您的`if`陈述返回错误，因此没有填充值。

# gwt - CORS 和 GWT 现在可以工作了吗？

> ID：15411698
> 
> 赞同：2
> 
> 时间：2013-03-14T14:13:12.373
> 
> 标签：gwt, cors, gwt-rpc

我一直在尝试让跨域 RPC 调用在我的 GWT 应用程序上工作，因为我想将我的 java 脚本直接部署到用户的移动设备上，然后让它对 Google App Engine 进行 RPC 调用。

应用程序当前工作正常，但前提是 JS 动态下载到客户端。我从 2 年前在 gwt 上看到了这个[问题。](http://code.google.com/p/google-web-toolkit/issues/detail?id=6502)**知道跨域 RPC 调用**是否仍然存在问题或运气好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:59:30.350

[我只是在博客](http://experienceswithgwt.blogspot.in/2010/04/gwt-and-cross-site-requests_28.html)中遇到了 2010 年左右建议的解决方法。虽然它是严重的hacky。

也许我们可以尝试[在我的 GWT 服务器端代码上使用来自 http 代理的一些想法](https://stackoverflow.com/questions/15363652/http-proxy-on-my-gwt-server-side-code)

GWT 关于同一主题的讨论 - [https://groups.google.com/forum/#!msg/google-web-toolkit/TFZsxQIeQXs/cQtKHVKCAr8J](https://groups.google.com/forum/#!msg/google-web-toolkit/TFZsxQIeQXs/cQtKHVKCAr8J)

**注意**- 根据 Broyer 的评论，您可能需要重新评估您的要求！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:16:30.000

是的，你可以做到，见这里：[http ://css.dzone.com/articles/cross-site-requests-gwt](http://css.dzone.com/articles/cross-site-requests-gwt)

然而，这需要相当现代的浏览器，所以如果您也在旧设备上获得支持，那么 JSONP 是更安全的选择（因为您可以使用 JsonpRequestBuilder 或 RestyGWT）。

**编辑：**我刚刚意识到您专门询问了 RPC。因此，这并不能回答您的问题，但可能会对您有所帮助。

# java - 在Java中读取JSON双维数 组

> ID：15411702
> 
> 赞同：6
> 
> 时间：2013-03-14T14:13:22.120
> 
> 标签：java, android, json

每个`news`条目包含**三个**内容：`title`和。`content``date`

这些条目是从数据库中检索的，我想在我的应用程序中使用 JSONObject 和 JSONArray 读取它们。但是，我不知道如何使用这些类。

这是我的 JSON 字符串：

```
[
   {
      "news":{
         "title":"5th title",
         "content":"5th content",
         "date":"1363197493"
      }
   },
   {
      "news":{
         "title":"4th title",
         "content":"4th content",
         "date":"1363197454"
      }
   },
   {
      "news":{
         "title":"3rd title",
         "content":"3rd content",
         "date":"1363197443"
      }
   },
   {
      "news":{
         "title":"2nd title",
         "content":"2nd content",
         "date":"1363197409"
      }
   },
   {
      "news":{
         "title":"1st title",
         "content":"1st content",
         "date":"1363197399"
      }
   }
] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T14:18:42.680

您的 JSON 字符串是其中的一个`JSONArray`，`JSONObject`然后包含一个`JSONObject`名为“新闻”的内部。

试试这个来解析它：

```
JSONArray array = new JSONArray(jsonString);

for(int i = 0; i < array.length(); i++) {
    JSONObject obj = array.getJSONObject(i);
    JSONObject innerObject = obj.getJSONObject("news");

    String title = innerObject.getString("title");
    String content = innerObject.getString("content");
    String date = innerObject.getString("date");

    /* Use your title, content, and date variables here */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:18:48.813

首先，您的 JSON 结构并不理想。您有一个对象数组，每个对象中都有一个对象。但是，您可以这样阅读：

```
JSONArray jsonArray = new JSONArray (jsonString);
int arrayLength = jsonArray.length ();

for (int counter = 0; counter < arrayLength; counter ++) {
    JSONObject thisJson = jsonArray.getJSONObject (counter);

    // we finally get to the proper object
    thisJson = thisJson.getJSONObject ("news");

    String title = thisJson.getString ("title");
    String content = thisJson.getString ("content");
    String date = thisJson.getString ("date");

} 
```

**然而！**

如果您将 JSON 更改为如下所示，您可以做得更好：

```
[
    {
        "title": "5th title",
        "content": "5th content",
        "date": "1363197493"
    },
    {
        "title": "4th title",
        "content": "4th content",
        "date": "1363197454"
    }
] 
```

然后，您可以按如下方式解析它：

```
JSONArray jsonArray = new JSONArray (jsonString);
int arrayLength = jsonArray.length ();

for (int counter = 0; counter < arrayLength; counter ++) {
        // we don't need to look for a named object any more
    JSONObject thisJson = jsonArray.getJSONObject (counter);    

    String title = thisJson.getString ("title");
    String content = thisJson.getString ("content");
    String date = thisJson.getString ("date");
} 
```

# jquery - Jquery可拖动到可排序的错误

> ID：15411703
> 
> 赞同：2
> 
> 时间：2013-03-14T14:13:30.597
> 
> 标签：jquery, draggable, jquery-ui-sortable

我正在尝试将元素拖到可排序容器中。它工作正常，但有时会有反弹效应。这有点随机。我正在使用 jquery1.9.1 和 jqueryui1.10.1。

代码在这里-> [http://jsfiddle.net/A7cPj/](http://jsfiddle.net/A7cPj/1/)

您可以在此处查看该错误的视频 -> [http://www.youtube.com/watch?v=KXUQRn7gnCc](http://www.youtube.com/watch?v=KXUQRn7gnCc)

请帮帮我！！！`enter code here`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:22:29.077

当我切换`revert`到`false`. 该错误似乎不再出现。

```
 $("#draggableIconTextBlock").draggable({
    connectToSortable: "#sortable2, #sortable1",
    helper: "clone",
    revert: "false"
}); 
```

和

```
 $("#draggableIconImage").draggable({
    connectToSortable: "#sortable2, #sortable1",
    helper: "clone",
    revert: "false"
}); 
```

# jquery - jQuery.ajax：“试图使用一个不可用或不再可用的对象”

> ID：15411705
> 
> 赞同：2
> 
> 时间：2013-03-14T14:13:38.723
> 
> 标签：jquery, ajax, binary

我正在尝试从服务器读取一些二进制数据，并且这样可以正常工作：

```
var xml = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("MSXML2.XMLHTTP");

xml.open("GET", "/some.php", true);
xml.responseType = "arraybuffer";

xml.onreadystatechange = myHandler; // myHandler here seems to be irrelevant

xml.send(); 
```

但是，如果我尝试像这样对 jquery 做同样的事情：

```
$.ajax({
    url: "/some.php",
    xhrFields: {
        responseType: "arraybuffer"
    },
    complete: function(xhr) {
        console.log(xhr.readyState);
        console.log(xhr.statusText); // is: [Exception... "An attempt was made to use an object that is not, or is no longer, usable"  code: "11" nsresult: "0x8053000b (InvalidStateError)" ...
    }
}); 
```

我无法得到结果，因为它[在 jquery 源代码](https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js#L85)`myHandler`的这一行上返回错误“试图使用一个不可用或不再可用的对象” - 显然此时不再可用. 处理这个问题的最佳方法是什么？`xhr`

在stackoverflow上实际上是一样的：转到/，在firebug控制台中输入：

```
$.ajax({
        url: "/",
        xhrFields: {
            responseType: "arraybuffer"
        },
        complete: function(xhr) {
            console.log(xhr.readyState);
            console.log(xhr.statusText);
        }
    }); 
```

# php - 如何使用 mysqli_multi_query 创建视图？

> ID：15411710
> 
> 赞同：1
> 
> 时间：2013-03-14T14:13:45.863
> 
> 标签：php, mysql, view, mysqli, mysqli-multi-query

我正在开发一个 PHP 应用程序，它应该能够使用 SQL 文件列表设置项目数据库并更新它/它的数据定义。这是第一个天真的快速和肮脏的书面程序原型：

```
<?php
function executeSQLFiles(array $dbOptions, array $dbFiles) {
    $dbConnection = mysqli_connect($dbOptions['host'], $dbOptions['user'], $dbOptions['password'], $dbOptions['database']);
    if (mysqli_connect_errno($dbConnection)) {
        echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }
    // db setup
    foreach ($dbFiles['setup'] as $listItem) {
        $query = file_get_contents(__DIR__ . '/../../config/database/' . $listItem['file']);
        $result = mysqli_multi_query($dbConnection, $query);
        if (!$result) {
            die($listItem['file'] . ': ' . 'Invalid query: ' . mysqli_error($dbConnection) . PHP_EOL);
        } else {
            echo $listItem['file'] . ' ' . 'OK' . PHP_EOL;
        }
    }
    // db migration
} 
```

它适用于表格，但不适用于视图。我没有收到任何错误，只是没有创建视图，我收到消息“filename.sql OK”。

创建 SQL 脚本的视图（使用 MySQL Workbench 生成）是可以的。当我在 MySQL 客户端中执行它时，会创建一个视图。

```
-- -----------------------------------------------------
-- Placeholder table for view `allproviders`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `allproviders` (`id` INT, `providertype` INT, `providerid` INT, `displayedname` INT, `url` INT, `city_id` INT);
SHOW WARNINGS;

-- -----------------------------------------------------
-- View `allproviders`
-- -----------------------------------------------------
DROP VIEW IF EXISTS `allproviders` ;
SHOW WARNINGS;
DROP TABLE IF EXISTS `allproviders`;
SHOW WARNINGS;
DELIMITER $$
CREATE OR REPLACE VIEW `allproviders` AS

SELECT
    `providers`.`id`,
    `providers`.`type` AS `providertype`,
    `providers`.`providerid` AS `providerid`,
    `universities`.`displayedname`,
    `universities`.`url`,
    `universities`.`city_id`
FROM
    `providers`
JOIN
    `universities` ON `providers`.`providerid` = `universities`.`id`
UNION
SELECT
    `providers`.`id`,
    `providers`.`type` AS `providertype`,
    `providers`.`providerid` AS `providerid`,
    `partners`.`displayedname`,
    NULL `url`,
    `partners`.`city_id`
FROM
    `providers`
JOIN
    `partners` ON `providers`.`providerid` = `partners`.`id`
$$
DELIMITER ;

;
SHOW WARNINGS;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

难道我做错了什么？如何让它工作？

谢谢

# c# - 在 .NET 3.5 中从 C# 更新 XAML GridView

> ID：15411711
> 
> 赞同：2
> 
> 时间：2013-03-14T14:13:47.210
> 
> 标签：c#, .net, wpf, xaml

我有一个简单的（我认为）应用程序，可以将 SQL 数据库读入我程序中的变量，然后我需要用我读取的数据更新在 XAML 中定义的网格视图。我受限于 .NET 3.5 的代码。我在有关 XAML、MS .NET 帮助和 Web 其他地方的书籍上进行的所有搜索显示了无数从 ASP.NET 执行此操作的示例，但没有一个来自 C#-XAML 组合的示例。我发现在 XAML ++much++ 中做简单的事情比在 Winforms 中做同样的事情更加困难和复杂，我只是不明白这一点。特别是，数据绑定在我看来是一门魔法。有人可以看看我的 XAML 并告诉我需要做什么或更改以从我的 C# 代码隐藏中填充此控件吗？

这是我的 XAML：

```
<Window x:Class="UCCResourceManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="UCC Resource Mangler" Height="350" Width="700">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="250"/>
      <RowDefinition />
    </Grid.RowDefinitions>

    <ListView Name="grdResource"
              ItemsSource="{Binding}"
              Grid.Row="0">

      <ListView.View>

        <GridView AllowsColumnReorder="false"
              ColumnHeaderToolTip="UCC Resource Table">

          <GridViewColumn DisplayMemberBinding="{Binding Path=ID}"
                          Header="ID"
                          Width="50"/>

          <GridViewColumn DisplayMemberBinding="{Binding Path=LocationID}"
                          Header="LocationID"
                          Width="75"/>

          <GridViewColumn DisplayMemberBinding="{Binding Path=Type}"
                          Header="Type"
                          Width="50"/>

          <GridViewColumn DisplayMemberBinding="{Binding Path=Name}"
                          Header="Name"
                          Width="200"/>

          <GridViewColumn DisplayMemberBinding="{Binding Path=Enabled}"
                          Header="Enabled"
                          Width="50"/>

          <GridViewColumn DisplayMemberBinding="{Binding Path=Flags}"
                          Header="Flags"
                          Width="50"/>

        </GridView>

      </ListView.View>
    </ListView>

    <Button Name="btnOK"
            Content="OK"
            Grid.Row="1"
            Width="100"
            Height="20
            " Click="btnOK_Click" />

  </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:04:28.010

我建议使用 MVVM。在那里你有一个 ViewModel 类，你可以在其中绑定你的属性。

```
public class MainWindowViewModel
{
    #region Constructor
    public MainWindowViewModel()
    {
        YourGridList = new ObservableCollection<GridElement>();

        var el = new GridElement
                     {
                         Element1 = "element 1", 
                         Element2 = "element 2", 
                         Element3 = "element 3"
                     };

        YourGridList.Add(el);
    }
    #endregion

    #region Private members

    private ObservableCollection<GridElement> _yourGridList;
    private ICommand _addElementCommand;

    #endregion

    #region Public properties
    public ObservableCollection<GridElement> YourGridList
    {
        get
        {
            return _yourGridList;
        }
        set
        {
            _yourGridList = value;
        }
    }
    #endregion

    #region Commands
    public ICommand AddElementCommand
    {
        get { return _addElementCommand ?? (_addElementCommand = new DelegateCommand(AddElement)); }
    }
    #endregion

    #region Private Methods
    private void AddElement()
    {
        var el = new GridElement
        {
            Element1 = "NewEl1",
            Element2 = "NewEl2",
            Element3 = "NewEl3"
        };

        YourGridList.Add(el);
    }
    #endregion 
```

然后，您可以在 xaml.cs 文件中使用此类作为 DataContext。

```
 public MainWindow()
    {
        InitializeComponent();
        DataContext = new MainWindowViewModel();
    } 
```

从 xaml 文件中，您可以使用 ViewModel 的“YourGridList”属性填充 ListView ItemsSource。

```
<Window x:Class="WpfApplication6.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="35"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Button Content="Add element" Command="{Binding AddElementCommand}" Grid.Row="0"/>

        <ListView Grid.Row="1"
                  Margin="10"
                  ItemsSource="{Binding YourGridList, UpdateSourceTrigger=PropertyChanged}"
                  MaxHeight="300">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Width="Auto">
                            <GridViewColumn.Header>
                                <GridViewColumnHeader Content="Element 1" HorizontalContentAlignment="Left" />
                            </GridViewColumn.Header>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Element1}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Width="Auto">
                            <GridViewColumn.Header>
                                <GridViewColumnHeader Content="Element 2" HorizontalContentAlignment="Left" />
                            </GridViewColumn.Header>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Element2}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Width="Auto" >
                            <GridViewColumn.Header>
                                <GridViewColumnHeader Content="Element 3" HorizontalContentAlignment="Left" />
                            </GridViewColumn.Header>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Element3}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Grid> 
```

这应该适用于更新您的 ListView 并在代码和 xaml 部分之间有明确的解耦。

# java - 声明了属性文件并在一个类中初始化了 Webdriver 对象。我想在同一个包或另一个包中使用这个 Webdriver 对象

> ID：15411712
> 
> 赞同：0
> 
> 时间：2013-03-14T14:13:48.623
> 
> 标签：java, webdriver, selenium-webdriver

我已经声明了属性文件并在一个类中初始化了 Webdriver 对象。现在我想在同一个包或另一个包中的任何地方使用这个 Webdriver 对象。如何？

请在下面找到代码：

```
public class Config
{
public static Properties config =null;
public static Properties OR = null;
public static WebDriver driver = null ;
public static Logger APPLICATION_LOGS = Logger.getLogger("devpinoyLogger");

@SuppressWarnings("unused")
public void initialization() throws IOException
{
    // creating properties files storing the ID's and xpaths
    APPLICATION_LOGS.debug("Starting the test suite");
    APPLICATION_LOGS.debug("Loading config files");
    config = new Properties();
    //FileInputStream fp = new FileInputStream("./config.properties");
    FileInputStream fp = new FileInputStream(System.getProperty("user.dir")+"\\src\\com\\ode\\utility\\config.properties");
    config.load(fp);
    APPLICATION_LOGS.debug("Loading Object XPATHS");
    OR = new Properties();
    //FileInputStream fp1 = new FileInputStream("./OR.properties");
    FileInputStream fp1 = new FileInputStream(System.getProperty("user.dir")+"\\src\\com\\ode\\utility\\OR.properties");
    OR.load(fp1);

    APPLICATION_LOGS.debug("Starting the driver");
    driver = new InternetExplorerDriver();

    driver.get(config.getProperty("Testwebsite"));
    driver.manage().window().maximize();
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
}
} 
```

我不知道如何使用这个...帮我解决这个问题...

帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:16:46.593

由于您可能会在相同和不同包中的不同类中使用驱动程序，如何在一个类中初始化驱动程序，以及哪个类需要驱动程序，只需扩展该类，以便在测试用例运行时访问来自不同的不同方法类，那里会使用相同的驱动程序引用吗？

```
public class A {

public static WebDriver driver = new ......();

}

public class B extends A {
  //members and attributes of class B
}

public class C extends A {
  //members and attributes of class C

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:28:02.817

我在我正在开发的测试框架中所做的是我创建了基类：

BasePage.java
BaseTest.java
BaseElement.java

并在 BaseTest 类中初始化 webdriver 对象。我正在遵循 PageObject 模式。因此，我创建的任何 pageobject 类都在其中扩展 BasePage 类。我编写的任何测试类（带有注释的 TestNG 测试方法），我都扩展了 BaseTest 类。因此，在 BaseTest 类中初始化的驱动程序对象可以通过它们的构造函数在子类和 PageObject 类中传递。那可行。

# google-bigquery - BigQuery 中文本匹配的嵌套查询

> ID：15411714
> 
> 赞同：2
> 
> 时间：2013-03-14T14:13:59.770
> 
> 标签：google-bigquery

我想知道是否有一种方法可以对我试图在我拥有的推文数据集上运行的文本匹配运行嵌套查询。我在 BigQuery 中有一个表，其中包含我收集的讨论各种股票的推文，我想根据每条推文文本中的单词对该表进行分段。

我有一个情感词典（实际上它是一组表，其中每个表列出与感觉相关的单词。有一个表用于表示积极情绪的词，一个用于表示消极、不确定等的词），所以我想做的是如下所示：

```
SELECT text AS bullish_tweets
FROM bigtweettable
WHERE text CONTAINS (SELECT words FROM table_x); 
```

我只是不确定 BigQuery 是否允许这种查询，或者是否有某些功能可以。因为我在情绪字典中使用的这些表每个都有几百到几千行，所以很高兴知道这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:24:18.220

除非您的推文已经用单词分隔，否则我无法想到按照您的要求进行操作。如果您预处理推文以拆分输入中的单词，您可以创建一个表示单词的重复字段。然后您可以进行查询：

```
SELECT text as bullish_tweets 
FROM bigtweettable
WHERE tweet_word IN (SELECT words from table_x) 
```

bigtweettable 的架构类似于字段：类型：模式文本：字符串：可为空的 tweet_word：字符串：重复

如果 tweet_word 重复，您需要以 JSON 格式导入，因为 CSV 不支持重复值。或者，您可以预先扁平化并重复推文中每个单词的文本。

# sublimetext2 - 自动换行 - 可以只突出显示许多水平线吗？

> ID：15411716
> 
> 赞同：0
> 
> 时间：2013-03-14T14:14:11.093
> 
> 标签：sublimetext2, sublimetext

我喜欢自动突出显示我正在处理的代码行，但当前设置突出显示整个包裹线——有时会在页面上延伸几条水平线。

```
// If enabled, will highlight any line with a caret
"highlight_line": true, 
```

有没有办法只突出显示一行水平的文本，即使换行可能包含几行水平的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T05:22:22.897

这在 Sublime Text 2 中是不可能的。然而，Emacs / Aquamacs 的夜间构建确实提供了这个功能。

# c# - ASP.NET 数据源选择命令

> ID：15411718
> 
> 赞同：1
> 
> 时间：2013-03-14T14:14:14.790
> 
> 标签：c#, asp.net, gridview, checkbox, sqldatasource

我有一个本地数据库表，它显示在`GridView`. 在该表中，我有一列名为：“已完成”。

当我第一次显示表格时，我在显示它时没有完成记录（Completed=false）。这是`SqlDataSource`选择命令：

```
"SELECT * FROM [CERecord] WHERE [Completed]='false' ORDER BY [Priority]"; 
```

我有一个导致回发的复选框。我想通过勾选/取消勾选来切换已完成记录的显示：

```
protected void cbShowCompletedRecords_CheckedChanged(object sender, EventArgs e)
    {
        if (cbShowCompletedRecords.Checked)
            CEDatabaseSource.SelectCommand = "SELECT * FROM [CERecord] ORDER BY [Priority]";
        else
        {
            CEDatabaseSource.SelectCommand = "SELECT * FROM [CERecord] WHERE [Completed]='false' ORDER BY [Priority]";
        }
    } 
```

目前，当我选中该框时，我会得到所有记录。但是当我取消选中它时`GridView`，即使上面的代码执行，它也不会更新。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:24:32.197

尝试在块后使用您`GridView`的 s`DataBind`方法`if...else`

```
protected void cbShowCompletedRecords_CheckedChanged(object sender, EventArgs e)
    {
        if (cbShowCompletedRecords.Checked)
            CEDatabaseSource.SelectCommand = "SELECT * FROM [CERecord] ORDER BY [Priority]";
        else
        {
            CEDatabaseSource.SelectCommand = "SELECT * FROM [CERecord] WHERE [Completed]='false' ORDER BY [Priority]";
        }

        yourGrid.DataBind();
    } 
```

这将确保网格中显示的结果反映您对 select 语句所做的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:22:52.567

SqlDataSource 允许您将参数绑定到控件属性：

```
<asp:SqlDataSource ID="myds" runat="server" 
  SelectCommand="SELECT * FROM [CERecord] WHERE [Completed]=:COMPLETED ORDER BY [Priority]">
  <SelectParameters>
    <asp:ControlParameter ControlID="MyCheckbox" Name="COMPLETED" PropertyName="Checked" Type="Boolean" />
  </SelectParameters>
</asp:SqlDataSource> 
```

这将根据复选框的“选中”属性修改您的选择命令。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T14:23:44.693

如果 Completed 是 DB 中的位类型，请将您的查询更改为：

```
"SELECT * FROM [CERecord] WHERE [Completed]=0 ORDER BY [Priority]"; 
```

# asp.net-mvc - 如何使用实体框架 4.3.1 设置空外键

> ID：15411722
> 
> 赞同：1
> 
> 时间：2013-03-14T14:14:20.717
> 
> 标签：asp.net-mvc, entity-framework, entity

当我通过设置删除帖子的画廊时遇到麻烦虽然我有时在执行调试时接受null null，但在断点时撤退，它不是null值我该如何解决这个问题？埃斯特科迪戈：

```
 var postold = _postRepositorio.ObterPorId(postDto.Id);

        if (postold.ImagemCapa != postDto.ImagemCapa && !String.IsNullOrEmpty(postDto.ImagemCapa) && !String.IsNullOrEmpty(postold.ImagemCapa))
        {
            if (
                File.Exists(
                    System.Web.HttpContext.Current.Server.MapPath(
                        Path.Combine(ConfigurationManager.AppSettings["DiretorioImagem"], postDto.ImagemCapa))))
            {
                File.Delete(
                    System.Web.HttpContext.Current.Server.MapPath(
                        Path.Combine(ConfigurationManager.AppSettings["DiretorioImagem"], postold.ImagemCapa)));
            }
        }
        var editPost = AutoMapper.Mapper.Map(postDto, postold);
        editPost.CategoriaPost = _categoriaPostRepositorio.ObterPorId(postDto.CategoriaPost);

        editPost.Galeria = postDto.Galeria == 0 ? null : _galeriaRepositorio.ObterPorId(postold.Id);

        _postRepositorio.Editar(editPost);

        _contexto.SaveChanges(); 
```

这是我为画廊设置 null 的地方

```
 editPost.Galeria = postDto.Galeria == 0? null: _galeriaRepositorio.ObterPorId (postold.Id); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:04:23.697

这里的问题与默认情况下 EF 将延迟加载导航属性有关，除非您明确地使用`.Include()`.

使用延迟加载，导航属性将一直存在`null`，直到您第一次尝试访问它。在第一次访问期间，EF 将点击数据库以将数据加载到导航属性中。

您的代码没有这样做。您试图在属性延迟加载之前将其设置为 null。你可以试试这个：

```
var tenerGaleria = editPost.Galeria == null; // this will trigger the lazy load
if (postDto.Galeria == 0 && tenerGaleria)
    editPost.Galeria = null; // now setting it to null should work
else if (postDto.Galeria != 0)
  editPost.Galeria = _galeriaRepositorio.ObterPorId(postold.Id); 
```

如果您的实体还公开了外键，您可以将其设置为 null 而无需担心导航属性的延迟/急切加载。

```
if (postDto.Galeria == 0)
    editPost.GaleriaId = null; // set the FK to null
else
    editPost = _galeriaRepositorio.ObterPorId(postold.Id); 
```

# c# - 如何将内联从 RichTextBox 子项带入视图

> ID：15411725
> 
> 赞同：4
> 
> 时间：2013-03-14T14:14:31.420
> 
> 标签：c#, wpf, xaml, focus, richtextbox

我怎样才能把注意力集中`Inline`在一个`RichTextBox`？
我从文本文件创建一个`FlowDocument`并将其加载到我的文件中，并根据 Button_click`richTextBox1` 一个接一个地标记（重新创建）`Inline``FlowDocument`

## 使用此代码：

```
 richTextBox1.SelectAll();
            richTextBox1.Selection.Text = "";

            string text = System.IO.File.ReadAllText(file);
            int iZeile = 0;

            string[] split = text.Split(new string[] {"\r\n"},StringSplitOptions.None);

                    foreach (string s in split)
                    {
                        if (iZeile != 27)
                        {
                            paragraph.Inlines.Add(s + "\r\n"); // adds line added without marking
                        }
                        else
                        {
                            Run run = new Run(split[27]); // adds line with marking
                            run.Background = Brushes.Yellow;
                            paragraph.Inlines.Add(run);
                            paragraph.Inlines.Add("\r\n");
                        }
                        iZeile++;
                    }

            FlowDocument document = new FlowDocument(paragraph);
            richTextBox1.Document = new FlowDocument();
            richTextBox1.Document = document;
            Keyboard.Focus(richTextBox1);
        } 
```

我知道它不..完美。

## 问题

到目前为止它有效，但出现的问题是我的市场`Inline`没有进入视图。有没有一种简单的方法可以将它`Inline`带入View？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:41:51.213

直接的解决方案似乎是，`FrameworkContentElement.BringIntoView()`但在将其放入下面的代码之后，它最初没有任何效果。事实证明，这是这些时间问题之一（我在 WinForms 中看到过类似的问题），可以通过处理未完成的 Windows 消息来解决。WPF 没有直接的等价物，`DoEvents()`但存在一个众所周知的替代品。

我把它放在一个 ButtonClick 中，更改标记为`//**`：

```
 Paragraph paragraph = new Paragraph();
        Inline selected = null;   //**

        richTextBox1.SelectAll();
        richTextBox1.Selection.Text = "";

        string text = System.IO.File.ReadAllText(@"..\..\MainWindow.xaml.cs");
        int iZeile = 0;

        string[] split = text.Split(new string[] { "\r\n" }, StringSplitOptions.None);

        foreach (string s in split)
        {
            if (iZeile != 27)
            {
                paragraph.Inlines.Add(s + "\r\n"); // adds line added without marking
            }
            else
            {
                Run run = new Run(split[27]); // adds line with marking
                run.Background = Brushes.Yellow;
                paragraph.Inlines.Add(run);
                paragraph.Inlines.Add("\r\n");
                selected = run;                // ** remember this element
            }
            iZeile++;
        }

        FlowDocument document = new FlowDocument(paragraph);
        richTextBox1.Document = new FlowDocument();
        richTextBox1.Document = document;
        Keyboard.Focus(richTextBox1);

        DoEvents();                   // ** this is required, probably a bug
        selected.BringIntoView();     // ** 
```

和辅助方法，从[这里](https://stackoverflow.com/a/4502200/60761)：

```
 public static void DoEvents()
    {
        Application.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Background, 
            new Action(delegate { }));
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T08:08:11.383

您应该尝试其中一种方法

```
richTextBox.SelectionStart = richTextBox.Text.Length;
richTextBox.ScrollToCaret(); 
```

.

```
richTextBox.AppendText(text);  
richTextBox.ScrollToEnd(); 
```

更多信息在[这里](http://msdn.microsoft.com/de-de/library/system.windows.forms.textboxbase.scrolltocaret.aspx)和[这里](http://msdn.microsoft.com/de-de/library/system.windows.controls.primitives.textboxbase.scrolltoend.aspx)

**编辑**

好的，在 WPF RichTextBox 中进行了一些挖掘之后，您尝试`richTextBox.ScrollToVerticalOffset(Offset)` 获取偏移量，也许您可​​以使用这个[答案](https://stackoverflow.com/a/2577699/1993545)

## 编辑 2

好的，经过更多研究后，我发现以下[链接](http://shevaspace.blogspot.de/2007/11/how-to-search-text-in-wpf-flowdocument.html)，您可以在其中下载**[此](http://www.cnblogs.com/Files/sheva/SearchInFlowDocumentDemo.zip)**工作示例

# scala - Scala Process - 捕获标准输出和退出代码

> ID：15411728
> 
> 赞同：39
> 
> 时间：2013-03-14T14:14:43.523
> 
> 标签：scala

我正在使用 Scala`scala.sys.process`库。

我知道我可以捕获退出代码`!`和输出`!!`但是如果我想捕获两者怎么办？

我已经看到这个答案[https://stackoverflow.com/a/6013932/416338](https://stackoverflow.com/a/6013932/416338)看起来很有希望，但我想知道是否有一个班轮，我错过了一些东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-15T17:22:10.490

我有以下用于运行命令的实用程序方法：

```
import sys.process._
def runCommand(cmd: Seq[String]): (Int, String, String) = {
  val stdoutStream = new ByteArrayOutputStream
  val stderrStream = new ByteArrayOutputStream
  val stdoutWriter = new PrintWriter(stdoutStream)
  val stderrWriter = new PrintWriter(stderrStream)
  val exitValue = cmd.!(ProcessLogger(stdoutWriter.println, stderrWriter.println))
  stdoutWriter.close()
  stderrWriter.close()
  (exitValue, stdoutStream.toString, stderrStream.toString)
} 
```

如您所见，它捕获标准输出、标准错误和结果代码。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-05-11T22:48:56.070

您可以使用`ProcessIO`. 我在 Specs2 测试中需要类似的东西，我必须检查退出值以及进程的输出，具体取决于`stdin`（`in`并且`out`是类型`String`）上的输入：

```
"the operation" should {
  f"return '$out' on input '$in'" in {
    var res = ""
    val io = new ProcessIO(
      stdin  => { stdin.write(in.getBytes)
                  stdin.close() }, 
      stdout => { res = convertStreamToString(stdout)
                  stdout.close() },
      stderr => { stderr.close() })
    val proc = f"$operation $file".run(io)
    proc.exitValue() must be_==(0)
    res must be_==(out)
  }
} 
```

我想这可能会对你有所帮助。在示例中，我忽略了来自`stderr`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-29T14:06:09.837

您可以指定捕获文本的输出流：

```
import sys.process._
val os   = new java.io.ByteArrayOutputStream
val code = ("volname" #> os).!
os.close()
val opt  = if (code == 0) Some(os.toString("UTF-8")) else None 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-11T22:11:05.330

BasicIO 或 ProcessLogger 的单行使用很有吸引力。

```
scala> val sb = new StringBuffer
sb: StringBuffer = 

scala> ("/bin/ls /tmp" run BasicIO(false, sb, None)).exitValue
res0: Int = 0

scala> sb
res1: StringBuffer = ... 
```

或者

```
scala> import collection.mutable.ListBuffer
import collection.mutable.ListBuffer

scala> val b = ListBuffer[String]()
b: scala.collection.mutable.ListBuffer[String] = ListBuffer()

scala> ("/bin/ls /tmp" run ProcessLogger(b append _)).exitValue
res4: Int = 0

scala> b mkString "\n"
res5: String = ... 
```

根据捕获的含义，除非退出代码不为零，否则您可能对输出感兴趣。在这种情况下，处理异常。

```
scala> val re = "Nonzero exit value: (\\d+)".r.unanchored
re: scala.util.matching.UnanchoredRegex = Nonzero exit value: (\d+)

scala> Try ("./bomb.sh" !!) match {
     | case Failure(f) => f.getMessage match {
     |   case re(x) => println(s"Bad exit $x")
     | }
     | case Success(s) => println(s)
     | }
warning: there were 1 feature warning(s); re-run with -feature for details
Bad exit 3 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T03:05:21.420

除非性能较差，否则您的链接中“Alex Cruise”提供的响应相当简洁。

您可以扩展 sys.process.ProcessLogger 来管理

```
var out = List[String]()
var err = List[String]() 
```

在内部，带有用于 out.reverse 和 err.reverse 结果的吸气剂。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-14T10:07:44.720

这是一个非常简单的 Scala 包装器，它允许您检索标准输出、标准错误和退出代码。

```
import scala.sys.process._

case class ProcessInfo(stdout: String, stderr: String, exitCode: Int)

object CommandRunner {

def runCommandAndGetOutput(command: String): ProcessInfo = {
    val stdout = new StringBuilder
    val stderr = new StringBuilder
    val status = command ! ProcessLogger(stdout append _, stderr append _)
    ProcessInfo(stdout.toString(), stderr.toString(), status)
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-27T18:26:15.257

我结合了这些并想出了这个。预期的 RC 在那里，因为我有一个程序需要在一个项目中运行，它在工作时返回 1。这确实取决于异常的文本，但它仍然会做一些不匹配的合理事情。

```
 private val ProcessErrorP: Regex = "(.*): error=(\\d+),(.*)".r.unanchored

  case class ProcessInfo(stdout: String, stderr: String, exitCode: Int, private val expectedRd: Int) {
    def succeeded: Boolean = exitCode == expectedRd
    def failed: Boolean = !succeeded
    def asOpt: Option[String] = if (succeeded) None else Some(stderr)
  }

  /**
   * Run a simple command
   * @param command -- what to run
   * @return -- what happened
   */
  def run(command: String, expectedRc: Int = 0): ProcessInfo = {
    try {
      val stdout = new StringBuilder
      val stderr = new StringBuilder
      val status = command ! ProcessLogger(stdout append _, stderr append _)
      ProcessInfo(stdout.toString(), stderr.toString(), status, expectedRc)
    } catch {
      case io: IOException =>
        val dm = io.getMessage
        dm match {
          case ProcessErrorP(message, code, reason) =>
            ProcessInfo("", s"$message, $reason", code.toInt, expectedRc)
          case m: String =>
            ProcessInfo("", m, 999, expectedRc)
        }
    }
  } 
```

# spring - Spring-Batch：如何从 StepListener 返回自定义 Job exit STATUS 以决定下一步

> ID：15411731
> 
> 赞同：5
> 
> 时间：2013-03-14T14:14:51.930
> 
> 标签：spring, spring-batch

问题是这样的：我有一个多步骤的 Spring Batch 作业。基于第一步，我必须决定下一步。**我可以根据作业参数在STEP1- passTasklet**中设置状态，以便我可以将退出状态设置为自定义状态并在作业定义文件中定义它以转到下一步。

```
Example
<job id="conditionalStepLogicJob">
<step id="step1">
<tasklet ref="passTasklet"/>
<next on="BABY" to="step2a"/>
<stop on="KID" to="step2b"/>
<next on="*" to="step3"/>
</step>
<step id="step2b">
<tasklet ref="kidTasklet"/>
</step>
<step id="step2a">
<tasklet ref="babyTasklet"/>
</step>
<step id="step3">
<tasklet ref="babykidTasklet"/>
</step>
</job> 
```

理想情况下，我希望在步骤之间使用我自己的退出状态。我可以这样做吗？它不会破坏任何 OOTB 流程吗？这样做是否有效

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T15:21:22.737

他们有几种方法可以做到这一点。

您可以使用 a`StepExecutionListener`并覆盖该`afterStep`方法：

```
@AfterStep
public ExitStatus afterStep(){
    //Test condition
    return new ExistStatus("CUSTOM EXIT STATUS");
} 
```

或使用 a`JobExecutionDecider`根据结果选择下一步。

```
public class CustomDecider implements JobExecutionDecider  {

    public FlowExecutionStatus decide(JobExecution jobExecution, StepExecution stepExecution) {
        if (/* your conditon */) {
            return new FlowExecutionStatus("OK");
        }
        return new FlowExecutionStatus("OTHER CODE HERE");
    }

} 
```

xml配置：

```
 <decision id="decider" decider="decider">
        <next on="OK" to="step1" />
        <next on="OHTER CODE HERE" to="step2" />
    </decision>

<bean id="decider" class="com.xxx.CustomDecider"/> 
```

# postgresql - Postgresql，限制特定列的更新（只读）

> ID：15411735
> 
> 赞同：20
> 
> 时间：2013-03-14T14:15:02.600
> 
> 标签：postgresql

如果更新包括对特定列的更改，是否可以让 postresql 限制/阻止对特定记录的更新？

这将如何实施。触发器/约束？实现这一点的最有效方法是什么？

我使用的是 9.1 版

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-14T14:21:24.703

最简单的方法是创建`BEFORE UPDATE`将比较`OLD`和`NEW`行 的触发器，`RAISE EXCEPTION`如果​​禁止更改行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T14:21:59.777

不，但写起来应该很简单。只需设置一个`BEFORE UPDATE`触发器，将旧字段与新字段进行比较，并`RAISE ERROR`在它们不同时执行。pgSQL 文档有一些关于如何编写触发器函数的示例。

# css - 是否可以使用 css3 捕捉属性的缺失？

> ID：15411736
> 
> 赞同：0
> 
> 时间：2013-03-14T14:15:09.547
> 
> 标签：css

我想知道我们是否可以抓住这两种不同的情况来避免 javascript 解析：

```
<div class="a b"></div>
<div class="a"></div>

div.a.b {
  color: red;
}

div.a { //Specify "when there is no class b"
  color: blue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:16:44.643

使用 CSS3，您可以使用`:not`：

```
div.a:not(.b) { ... } 
```

使用 CSS2 这不是直接可能的，但您可以设置所需的属性并使用`div.a.b`规则“取消设置”它们。你已经这样做了：你的 div 是红色的，但是“当没有类时`b`”它们是蓝色的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:16:35.570

使用 CSS3 选择器：

```
div.a:not(.b){
  color: blue;
} 
```

[http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/)

# r - R gbm：交叉验证在这个包中是如何工作的？

> ID：15411738
> 
> 赞同：1
> 
> 时间：2013-03-14T14:15:15.913
> 
> 标签：r, cross-validation

有人可以提供有关此的工作流程吗？例如，假设我正在做二进制分类，

对于算法的每次迭代：

1.  随机采样 k*N 行，其中 k 是 bag.fraction，N 是 nrow(dataset)。

2.  使用这个训练样本构建一个分类器，假设我们在这里使用分类树。

3.  预测终端节点类标签。

这就是在没有简历的情况下完成提升的方式。如果我想做一个 3-fold CV，我到底应该在哪里应用它？在第 1 步和第 2 步之间还是在第 3 步之后？谢谢！

# php - 使用 Ajax() 函数的 jQuery ajax 调用不起作用

> ID：15411744
> 
> 赞同：0
> 
> 时间：2013-03-14T14:15:24.510
> 
> 标签：php, ajax, jquery

这是 index.php 的代码：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
    <script type="text/javascript">
        jQuery(function () {    
            jQuery('#city').change(function() {
                var city = jQuery('#city').val();           
                var data = "city=" + city; 
                jQuery.ajax({
                    url: 'page.php', 
                    type: 'GET',
                    data: data,
                    success: function(data){ jQuery("#my_div").html(data); }
                });             
            });
        });
    </script>
</head>
<body>
    <select id='city'>  
        <option value='Paris'>Paris</option>
        <option value='London'>London</option>
        <option value='Rome'>Rome</option>
    </select>   
    <div id='my_div'>
        <?php require_once('page.php'); ?>      
    </div>
</body>
<html> 
```

和page.php：

```
<?php if (isset($_GET['city'])) echo 'you selected '.$_GET['city']; ?> 
```

选定的城市应显示“您已选择”，然后显示城市名称。但它什么也没做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:18:18.187

您没有发送数据...这里的数据未定义...将您的代码更改`var city = "city=" + city;`为`var data= "city=" + city;`..您将收到您的响应作为数据..所以替换

```
jQuery("#my_div").html(html); 
```

和

```
jQuery("#my_div").html(data); 
```

尝试这个

```
 jQuery('#city').change(function() {
            var city = jQuery('#city').val();           
            var data= "city=" + city; //<--here
            jQuery.ajax({
                url: 'page.php', 
                type: 'GET',
                data: data,
                success: function(data){ jQuery("#my_div").html(data); } //<--here
            });             
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:24:04.367

你可以使用速记......但这里真正的问题是两个变量是“未定义的”。没有定义 html 变量，也没有定义前面提到的 data 变量。

试一试

```
 $('#city').change(function() {
        var data= "city=" + $('#city').val();
        $.ajax({
            url: 'page.php', 
            type: 'GET',
            data: data,
            success: function(html){ 
                $("#my_div").html(html); 
            }
        });             
    }); 
```

# linux - 启用上拉 GPIO

> ID：15411746
> 
> 赞同：3
> 
> 时间：2013-03-14T14:15:29.720
> 
> 标签：linux, embedded, arm, gpio

我正在使用具有 4 个 PIO 控制器的 AT91SAM9G25 板，可管理多达 32 条可编程 I/O 线。每个引脚可配置为仅通用 I/O 线或多路复用至两个外围 I/O 的 I/O 线。因此，例如，根据文档（[SAM9G25](http://www.atmel.com/Images/Atmel_11032_32-bit-ARM926-Microcontroller_SAM9G25_Datasheet.pdf "SAM9G25")，第 14 页），信号 PC0 可以多路复用，例如通用 I/O 线或 VIDEO_ATMEL_ISI（图像传感器接口的 ISI）的 ISI_D0 线。

```
╔════════════╦════════════╦════════════╦════════════╦════════════╗
║  Primary   ║ Alternates ║   PeripA   ║   PeripB   ║  PeripC    ║
╠════════════╬════════════╬════════════╬════════════╬════════════╣
║ Signal/Dir ║ Signal/Dir ║ Signal/Dir ║ Signal/Dir ║ Signal/Dir ║
║ ---------  ║ ---------  ║ ---------  ║ ---------  ║ ---------  ║
║ PC0 / I/O  ║            ║            ║ ISI_D0 / I ║            ║
╚════════════╩════════════╩════════════╩════════════╩════════════╝ 
```

所有 GPIO 线的复位状态为方向 IN 和上拉使能。当我通过 sysfs 使用 GPIOLIB 时，由于上拉，我在几个 GPIO 中读取了一个“1”值作为 INPUT。这是 GPIO（带上拉电阻的输入）在多个板中复位时的正常安全状态，当它们可以与其他外设复用时？我看不到如何使用 GPIOLIB 通过用户空间禁用上拉。例如，我看到当内核启动时，它会检查图像传感器外设是否在内核或作为模块启用，如果是，它将 PC0 设置为外设 B。这是在 /arch/arm/mach 的内核源代码中-at91/at91sam9x5_devices.c

```
#if defined(CONFIG_VIDEO_ATMEL_ISI) || defined(CONFIG_VIDEO_ATMEL_ISI_MODULE)
....
         at91_set_B_periph(AT91_PIN_PC0, 0);    /* ISI_D0 */
...
#endif 
```

然后，如果我不在内核中启用 ISI 支持，我可以将 PC0 信号用作 GPIO 线。这是 /sys/kernel/debug/gpio：

```
 # cat /sys/kernel/debug/gpio

    GPIOs 32-63, A:

    GPIOs 64-95, B:
    [atmel_usba_udc] GPIOB16: [gpio] set
    [d1] GPIOB18: [gpio] clear

    GPIOs 96-127, C:

    GPIOs 128-159, D:
    [ohci_vbus] GPIOD19: [gpio] clear
    [ohci_vbus] GPIOD20: [gpio] clear
    [d2] GPIOD21: [gpio] set 
```

这是 /sys/kernel/debug/at91_gpio

```
 # cat /sys/kernel/debug/at91_gpio

    Pin     PIOA            PIOB            PIOC            PIOD

    0:      A               A               GPIO:1          A
    1:      A               A               GPIO:1          A
    2:      GPIO:1          A               GPIO:1          A
    3:      GPIO:1          A               GPIO:1          A
    4:      GPIO:1          A               GPIO:1          GPIO:1
    5:      GPIO:1          A               GPIO:1          GPIO:1
    6:      GPIO:1          A               GPIO:1          A
    7:      B               A               GPIO:1          A
    8:      GPIO:1          GPIO:1          GPIO:1          A
    9:      A               A               GPIO:1          A
    10:     A               A               GPIO:1          A
    11:     A               GPIO:1          GPIO:1          A
    12:     A               GPIO:1          GPIO:1          A
    13:     A               GPIO:1          GPIO:1          A
    14:     A               GPIO:1          GPIO:1          GPIO:1
    15:     GPIO:1          GPIO:1          GPIO:1          A
    16:     GPIO:1          GPIO:1          GPIO:0          A
    17:     GPIO:1          GPIO:1          GPIO:1          A
    18:     GPIO:1          GPIO:1          GPIO:1          A
    19:     GPIO:1          A               GPIO:1          GPIO:0
    20:     GPIO:1          A               GPIO:0          GPIO:0
    21:     GPIO:1          A               GPIO:0          GPIO:1
    22:     GPIO:1          A               GPIO:1          A
    23:     GPIO:1          A               GPIO:1          A
    24:     GPIO:1          A               GPIO:1          A
    25:     GPIO:1          A               GPIO:1          A
    26:     GPIO:1          A               GPIO:1          A
    27:     GPIO:0          A               GPIO:1          A
    28:     GPIO:1          A               GPIO:0          A
    29:     GPIO:1          A               GPIO:0          A
    30:     GPIO:1          A               GPIO:1          A
    31:     GPIO:1          A               GPIO:1          A 
```

上面的输出表明 PIOA0 多路复用到外设 A（TXD0 UART 线），例如 PIOC20 被清除，但文档说所有处于复位状态的 GPIO 线都是带上拉的输入，我找不到内核或 u-boot 禁用的位置这个 GPIO 的上拉（如果没有人接触他的寄存器，也许 GPIO 会保持它们的状态？）

但他的主要问题是，我怎样才能清除 GPIO 线的上拉寄存器？我在内核源代码中发现 /arch/arm/mach-at91/at91sam9x5_devices.c 使用了在 linux-2.6.39/arch/arm/mach-at91/gpio.c 中实现的这个函数。

```
 /*
    * enable/disable the pull-down.
    * If pull-up already enabled while calling the function, we disable it.
    */
    int __init_or_module at91_set_pulldown(unsigned pin, int is_on)
    {
        void __iomem    *pio = pin_to_controller(pin);
        unsigned    mask = pin_to_mask(pin);

        if (!pio || !cpu_has_pio3())
            return -EINVAL;

        /* Disable pull-up anyway */
        __raw_writel(mask, pio + PIO_PUDR);
        __raw_writel(mask, pio + (is_on ? PIO_PPDER : PIO_PPDDR));
        return 0;
    }
    EXPORT_SYMBOL(at91_set_pulldown); 
```

头文件arch/arm/mach-at91/include/mach/gpio.h

```
 #ifndef __ASSEMBLY__
    /* setup setup routines, called from board init or driver probe() */
    .....
    extern int __init_or_module at91_set_pulldown(unsigned pin, int is_on);
    .....
    #endif  /* __ASSEMBLY__ */ 
```

如何在我的工具链中使用这些功能，或者我应该制作一个内核模块？

谢谢

PD：对不起，我的英语有任何错误，我知道我需要改进它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:27:01.297

也许你可以不理会引体向上。我在 OMAP SoC 上使用过 GPIO，在最低级别有类似的引脚复用器选项，但不必担心上拉。通常无论是什么驱动它都可以吸收足够的电流（这是EE /电路的观点，如果您不熟悉，请不要担心）。浮动输入可能是随机且麻烦的；拉高应该没问题。

我认为您不需要制作内核模块。我建议您尝试使用现有的用户模式界面。您的内核应该已经连接了低级驱动程序以通过 sysfs 提供访问。请参阅[sysfs](http://www.tanzilli.com/gpio_sysfs)、[omap gpio](http://omappedia.org/wiki/GPIO)。我认为我没有在 sysfs 中看到 pullup 选项。如果你得到了一些工作并且需要从 C 代码中调用它，那么你可以寻找 API，或者只使用 system()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T09:05:33.310

在使用设备树的较新内核上，您可以通过重新编译设备树“blob”来控制它，而无需更改内核或编写内核驱动程序。

[http://lxr.free-electrons.com/source/Documentation/devicetree/bindings/pinctrl/atmel,at91-pinctrl.txt](http://lxr.free-electrons.com/source/Documentation/devicetree/bindings/pinctrl/atmel,at91-pinctrl.txt)

但是如果 pinctrl 有一个像 gpio 这样的用户空间接口，那就太好了，所以控制 pin 的完整解决方案是用户空间控制。

# javascript - 如何检查操作系统是否处理某些 URL 协议？（跨浏览器）

> ID：15411747
> 
> 赞同：0
> 
> 时间：2013-03-14T14:15:30.897
> 
> 标签：javascript, macos, url, protocols

我已将我的 Cocoa 应用程序设置为`com_example_myapp:`协议的 URL 处理程序（使用[这个很棒的教程](https://stackoverflow.com/questions/49510/how-do-you-set-your-cocoa-application-as-the-default-web-browser)）。因此，Safari 中的链接`<a href="com_example_myapp://link">`现在打开了我的应用程序。凉爽的。

但是在我在网络浏览器中给用户链接之前，我如何确定客户端的操作系统是否能够处理它？如何通过 JS（PHP，...）检查这个？

我找到了很多解决方案（主要用于 Mobile Safari），但找不到任何跨浏览器兼容的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:23:33.700

据我所知，Chrome 不支持这个。您可以尝试使用 a`try/catch`但它不会返回任何内容。您可以使用您的其他参考并在他们的 Safari 中进行特定调用。

最后，我还没有测试它，但你可以绑定一些东西`window`来看看它是否`blur`是。

```
$(window).blur(function() {
    //code to see if it blurred on a setTimeout
} 
```

然后记录创建它的日期，看看它是否在 1 秒内，这样当他们回来时，如果它仍然存在，你可以销毁计时器。

虽然只是想法...

# jsf - Primefaces对带有子表的数据表进行过滤/排序

> ID：15411750
> 
> 赞同：2
> 
> 时间：2013-03-14T14:15:33.480
> 
> 标签：jsf, primefaces

所以可以说我有下表：

```
 <p:dataTable id="genaricTable" var="item" value="#{genaricBean.currentValue}" >
            <p:columnGroup type="header"> 
                <p:row>
                    <p:column rowspan="" headerText="value1"/>
                    <p:column rowspan="" headerText="value2"/>
                    <p:column rowspan="" headerText="value3"/>
                </p:row> 
            </p:columnGroup>  
            <p:subTable var="subItem" value="#{item.subItemList}" >
                <f:facet name="header">  
                  #{item.header}
                </f:facet> 
                <p:column>
                    <h:outputText value="#{subItem.value1}"/>
                </p:column>
                <p:column>
                    <h:outputText value="#{subItem.value1}"/>
                </p:column>
                <p:column>
                    <h:outputText value="#{subItem.value1}"/>
                </p:column>
            </p:subTable>
        </p:dataTable> 
```

有没有办法可以使用内置的 primefaces 组件按子列表进行过滤/排序？我唯一能想到的就是放入一个自定义命令链接来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T10:05:45.310

你是对的。当您将**sortBy**属性添加到子表内的列定义时，它不起作用。

然而，有一个非常简单的解决方案。**将其添加到标题 columnGroup**内的列定义中。如果在此处定义，PrimeFaces 会处理此属性。

我想这种方法可能也适用于**filterBy**，但我没有尝试过。

```
<p:columnGroup type="header"> 
    <p:row>
        <p:column rowspan="" headerText="value1" sortBy="#{subItem.value1}"/>
        <p:column rowspan="" headerText="value2"/>
        <p:column rowspan="" headerText="value3"/>
    </p:row> 
</p:columnGroup> 
```

**编辑：**您当然需要考虑您的基础数据集，并且可能使用不同的东西作为排序表达式，或者也可能在您的托管 Bean 中编写一些解决方法，因为分层数据从未如此简单。我使用该表达式只是为了说明解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T09:56:12.513

要对子列表进行排序，您可以在子列表中添加 sortBy ..类似这样的东西..

```
 <p:column sortBy="#{subItem.value1}">
                <h:outputText value="#{subItem.value1}"/>
            </p:column> 
```

试试..

# php - Jquery 手风琴形式包装

> ID：15411751
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:15:39.210
> 
> 标签：php, jquery, codeigniter, jquery-ui-accordion

我的 Jquery 手风琴形式可以完美地工作，除非我将标签拉到整个盒子上。这个想法是将表格分开，因为要收集很多信息。

[http://www.bigwavemedia.co.uk/test/](http://www.bigwavemedia.co.uk/test/)（其中一个手风琴内带有 Form 标签的工作版本）

[http://www.bigwavemedia.co.uk/test/index.php/stack](http://www.bigwavemedia.co.uk/test/index.php/stack)（当我在整个手风琴系统中移动表单标签时中断）

代码--->工作版本

```
<div id="container">
    <div class="preOrderTop">
        <h1>Pre Order</h1>
    </div>

       <?php 

        $this->load->helper("form");
        echo validation_errors();
        echo "<div id='accordion'>";

        echo  "<h3>Party Details</h3>";

        echo  $message;

        echo  form_open("welcome/send_email");

        echo form_label("Name:", "name");
        $data = array(
            "name" => "fullName",
            "id" => "fullName",
            "value" => set_value("fullName")

        );
        echo form_input($data);

        echo form_label("Email:", "email");
        $data = array(
            "name" => "email",
            "id" => "email",
            "value" => set_value("email")
        );
        echo form_input($data);

        echo form_label("Telephone", "telephone");
        $data = array(
            "name" => "telephone",
            "id" => "telephone",
            "value" => set_value("telephone")
        );
        echo form_input($data);

        echo form_label("date", "date");
        $data = array(
            "name" => "date",
            "id" => "date",
            "value" => set_value("date")
        );
        echo form_input($data);

        echo "<br>";

        echo form_submit("contactSubmit", "send");

        echo form_close();
    ?>

    <h3>Section 2</h3>
        <div>
        <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In suscipit faucibus urna. </p>
    </div>
        <h3>Section 3</h3>
        <div>
        <p>Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis. Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui. </p>
        <ul>
            <li>List item</li>
            <li>List item</li>
            <li>List item</li>
            <li>List item</li>
            <li>List item</li>
            <li>List item</li>
            <li>List item</li>
        </ul>

        </div>
    </div> 
</div> 
```

但是当我将整个表单标签包裹在手风琴周围时，它会破裂吗？我不知道如何解决这个问题，它让我发疯。

-> 形式环绕的代码

```
<div id="container">
  <div class="preOrderTop">
    <h1>Pre Order</h1>
  </div>
  <?php 

        $this->load->helper("form");
        echo validation_errors();
            echo  $message;

        echo  form_open("welcome/send_email");
        echo "<div id='accordion'>";

        echo  "<h3>Party Details</h3>";

        echo  $message;

        echo  form_open("welcome/send_email");

        echo form_label("Name:", "name");
        $data = array(
            "name" => "fullName",
            "id" => "fullName",
            "value" => set_value("fullName")

        );
        echo form_input($data);

        echo form_label("Email:", "email");
        $data = array(
            "name" => "email",
            "id" => "email",
            "value" => set_value("email")
        );
        echo form_input($data);

        echo form_label("Telephone", "telephone");
        $data = array(
            "name" => "telephone",
            "id" => "telephone",
            "value" => set_value("telephone")
        );
        echo form_input($data);

        echo form_label("Date", "date");
        $data = array(
            "name" => "date",
            "id" => "date",
            "value" => set_value("date")
        );
        echo form_input($data);

        echo "<br>";

    ?>
  <h3>Section 2</h3>
  <div>
    <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In suscipit faucibus urna. </p>
  </div>
  <h3>Section 3</h3>
  <div>
    <p>Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis. Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui. </p>
    <ul>
      <li>List item</li>
      <li>List item</li>
      <li>List item</li>
      <li>List item</li>
      <li>List item</li>
      <li>List item</li>
      <li>List item</li>
    </ul>
  </div>
  <?php     
        echo form_submit("contactSubmit", "send");

        echo form_close();
        ?>
</div> 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:25:46.117

经过更多研究，我发现这个手风琴菜单不适用于表单，在使用另一个菜单后，它第一次完美运行。

# structuremap - nservicebus：我应该期待什么延迟/性能？

> ID：15411752
> 
> 赞同：0
> 
> 时间：2013-03-14T14:15:48.377
> 
> 标签：structuremap, nservicebus

bus.send 和处理程序之间存在延迟。

默认配置延迟 2 秒。
用于构建器的结构图延迟 3 秒。

这是正常的吗？
我可以期望在服务器的生产环境中速度显着加快吗？

方法：

*   我正在使用的解决方案是使用从 nuget 下拉 NSB 时弹出的代码第一个示例构建的。
*   我通过在 Bus.Send 的消息中添加一个 UTCNow 然后在处理程序处附加另一个 UTCNow 来进行测试。
*   我在 Windows 8 i7-3517U @ 1.90Ghz 2.40 Ghz 和 8GB 内存上运行测试，不确定磁盘速度。戴尔笔记本电脑。
*   在测试时，CPU 运行 5-10%，可用内存为 4GB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:26:56.123

Andreas Öhlund 在对 OP 的评论中回应：“这是第一条消息吗？接下来的消息呢，它们应该很快吗？”。

结果发现之后的每条消息都几乎是即时的，所以看起来这个过程只需要一段时间才能开始。我在公共交通中遇到了类似的问题。但是，如果您尝试在开始使用 MT 后立即发送消息，那么看起来根本不会发生任何事情。显然 MSMQ 需要一个预热期。

# html - 我是否应该明确指定 SELECT 的默认值，即使它是第一个

> ID：15411758
> 
> 赞同：1
> 
> 时间：2013-03-14T14:15:56.757
> 
> 标签：html, forms, html-select

在我知道的所有浏览器中，第一个选项在下面的 HTML 中被默认选择：

```
<select>
  <option>foo</option>
  <option>bar</option>
</select> 
```

但是我可以指望这种行为吗？或者，即使它是第一个选项，明确指定默认值是否会更好，即这样做会更安全：

> ```
> <select>
>   <option selected>foo</option>
>   <option>bar</option>
> </select> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:06:54.613

[HTML(5) 规范](http://www.w3.org/TR/html5/forms.html#attr-option-selected)没有说如果没有`selected`属性存在，默认选择的选项应该是第一个。

> 选项元素的选择是一个布尔状态，最初为假。除非另有说明，否则在创建元素时，如果元素具有 selected 属性，则必须将其选中状态设置为 true。每当添加选项元素的 selected 属性时，必须将其选中状态设置为 true。

然而，它[确实说](http://www.w3.org/TR/html5/forms.html#dom-select-selectedindex)如果没有`selected`值存在，那么默认值应该是返回 -1 的选择值。

> selectedIndex IDL 属性在获取时必须以树顺序返回选项列表中的第一个选项元素的索引，该选项的选择性设置为 true（如果有）。**如果没有，那么它必须返回 -1。**

我猜你因此*不应该*假设第一个选项将始终被选为默认选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:20:58.327

我不认为这很重要。仅当您没有在顶部设置默认值时。“选定”是如果您想更改默认选项。如果你没有在上面。

像这样：

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="vw">VW</option>
  <option value="audi" selected>Audi</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T03:27:56.697

在第一次渲染时（或者可能在`<select>`创建元素时），第一个`<option>`被隐式选择：[`selectedIndex`](https://www.w3.org/TR/html5/forms.html#dom-select-selectedindex)返回**0**，并且[`selected`](https://www.w3.org/TR/html5/forms.html#dom-option-selected)（第一个选项）返回**true**。

但是，如果您使用 JavaScript 更改选项，例如删除所有选项并添加新选项，则`selectedIndex`返回**-1**，并且`selected`（第一个选项）返回**false**。

当然，以上所有假设[`selected="selected"`](https://www.w3.org/TR/html5/forms.html#attr-option-selected)都从未使用过该属性。

所以，如果你是动态添加选项，并且想使用第一个被初始选中的，那么你**必须**使用 selected 属性。

# asp.net-mvc - ASP.NET MVC 根据业务规则禁用/隐藏控件

> ID：15411768
> 
> 赞同：2
> 
> 时间：2013-03-14T14:16:16.807
> 
> 标签：asp.net-mvc, user-permissions, disabled-control

我需要将控件标记为只读，禁用它们或完全隐藏它们，具体取决于各种业务规则。

目前，我正在为我的视图模型中的每个属性传递一个枚举。然后我检查每个控件的枚举值。这导致了相当讨厌的 Razor 块。即使使用`@helper`s 输出也很讨厌。

我想知道是否有更好的方法来根据业务规则更改控件的外观。大多数时候，我只是添加属性。在最坏的情况下，我根本没有显示控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:32:19.823

显示逻辑/责任落在了视图的肩上，所以......

如果规则依赖于例如用户权限并且适用于所有控件，那么我会说每个视图模型一个枚举就足够了。

否则你做得很好。我唯一要改变的是我会编写自定义扩展方法来显示视图模型属性。

这些方面的东西：

```
 public static MvcHtmlString TextBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, DisplayMode mode)
    {
     // put a switch statement here to either
     // add html attribute for readonly
     // or
     // return null/emptystring
    } 
```

有了这个扩展，你的视图可以有`@Html.TextBoxFor(x => x.Prop, Model.PropMode)`

这会清理你的剃刀视图。

还要记住，只读字段值仍然可以更改（开发工具、萤火虫）。这是在您的 HttpPost 操作中需要注意的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:19:20.837

为此，您可以使用 XACML（可扩展访问控制标记语言 - 基于属性的访问控制实现）和策略决策点。有了它，您实际上可以将控件/小部件可见性/启用状态绑定到决策，例如

```
approveButton.Enabled = PDPUtil.authorized(Page.User.Identity.Name, purchaseOrderObject); 
```

策略是在您的应用程序之外定义的，并且可以像您喜欢的那样细化，例如

```
Managers can approve a purchase order if the poLocation == userLocation. 
```

然后可以将这些策略应用于不同的系统，而不仅仅是 .NET 控件。相同的策略可以应用于 HttpModule 或 WCF 消息检查器。

我在这里写了一篇关于 XACML 和 C# 的文章：[http ://www.webfarmr.eu/2012/02/fine-grained-access-control-using-xacml-in-c-applications-and-the-net-framework/](http://www.webfarmr.eu/2012/02/fine-grained-access-control-using-xacml-in-c-applications-and-the-net-framework/)

另请查看[http://www.axiomatics.com/policy-decision-points.html](http://www.axiomatics.com/policy-decision-points.html)

# android - 在 Android 选项卡式应用程序中处理方向更改

> ID：15411771
> 
> 赞同：0
> 
> 时间：2013-03-14T14:16:26.457
> 
> 标签：android, android-layout, android-asynctask, android-orientation

这篇文章是关于一个流行的、讨论得很好的主题——*处理屏幕方向*。即使它被谈论得很多，我也很难为这个迫使我写在这里的应用程序绘制一个可行的解决方案。

因此，该应用程序基本上由使用 TabHost 的选项卡组成。每个选项卡都是一个活动组。该应用程序主要使用 AsyncTask 从 Web 服务中获取数据。每个子活动都附加到一个包含 UI 处理程序对象的 AsyncTask，该对象显示所有与 UI 相关的操作，例如显示警报消息和附加 listView 适配器。

例如，从 Activity 调用 asynctask 如下所示。

```
UIHandler handler = new UIHandler(this, getParent()) //parent context of the tab
CustomAsyncTask taskRunner = new CustomAsyncTask(handler);
taskRunner.execute(params); 
```

我尝试使用显然不起作用的保存和恢复实例状态。我发现在我的场景中使用配置令人困惑。

希望我确实解释了立场。你能建议出路吗？

笔记：

让我知道我是否应该提供更多细节来支持场景。

**目前处理方式：**

我对大多数屏幕都有一个单一的布局。它适用于清单文件中的单行。

```
android:configChanges="keyboard|keyboardHidden|orientation" 
```

但是现在，我有两个屏幕，有两种布局，每个方向一个。

**编辑**

我有一个使用自定义适配器的 ListView。从服务器获取数据，UI 处理程序正确加载 listView。

在自定义适配器的 getView() 中，我使用布局 xml 进行行布局。

```
public View getView(int position, View convertView, ViewGroup parent) {
   convertView =  mInflater.inflate(R.layout.custom_fullpicturerow, null); 
} 
```

在方向更改时，如何更改上述布局并加载新布局？

# android - 隐藏 Fragment 时如何留出空地

> ID：15411781
> 
> 赞同：0
> 
> 时间：2013-03-14T14:16:48.470
> 
> 标签：android, android-fragments, show-hide

我一直在寻找一段时间，只是想出了在隐藏片段时不留下开放空间的方法。我有一个 3 面板应用程序，当我隐藏其中一个面板时，我希望其余面板保持相同大小。

这是我的xml代码：

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:id="@+id/fragment_container"
        android:background="#140506">
        <fragment
            android:name="tets.twopane.FragmentA"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:id="@+id/titles"
            android:layout_weight="1"
            >
        </fragment>
        <LinearLayout
        android:layout_width="5dp"
        android:layout_height="match_parent"
        android:orientation="horizontal">

        </LinearLayout>
        <fragment
            android:name="tets.twopane.FragmentB"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:id="@+id/viewers"
            android:layout_weight="1"
            >
        </fragment>
        <LinearLayout
        android:layout_width="5dp"
        android:layout_height="match_parent"
        android:orientation="horizontal">

        </LinearLayout>
        <fragment
            android:name="tets.twopane.FragmentC"
            android:layout_width="0dp"

            android:layout_height="match_parent"
            android:id="@+id/pass"
            android:layout_weight="1"
            >
        </fragment>
    </LinearLayout> 
```

这是我的主要活动中隐藏片段的功能：

```
 public void Hide3() {
    final FragmentTransaction ft = this.getFragmentManager()
            .beginTransaction();
    final Fragment myFrag = this.getFragmentManager().findFragmentById(
            R.id.pass);
    ft.hide(myFrag);
    ft.commit();

} 
```

欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:32:33.100

我认为您可能可以用容器（例如线性布局）包装每个片段，并且可以将布局权重传递给它。因此，例如以这种方式包装 FragmentA：

```
<LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
         android:layout_weight="1"
        android:orientation="horizontal">
        <fragment
            android:name="tets.twopane.FragmentA"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/titles"
            >
        </fragment>
 </LinearLayout> 
```

# php - 让 pspell 或任何拼写检查器在 wamp 中工作

> ID：15411785
> 
> 赞同：0
> 
> 时间：2013-03-14T14:17:06.707
> 
> 标签：php, wamp, spell-checking, pspell

我一直在尝试在我的 wamp 版本中安装一个 php 拼写检查器，但它没有发生。我取消了 php ini 的注释，用更新版本的 php 重新安装了 wamp，基本上没有运气。目前我得到了这条线。PHP 警告：PHP 启动：无效库（可能不是 PHP 库）'php_pspell.dll' in Unknown on line 0

所以看起来我的扩展中的 pspell 版本错误。

有人可以给我一个非常容易遵循的方法来添加它吗？我一直在努力让 Enchant 也能正常工作。一切都无济于事-有人可以帮忙。

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T19:51:29.700

好像周围没有太多动静吧？无论如何，不​​确定您是否仍在寻找解决方案，但我或多或少有同样的问题。PHP 5.3+ 的 pspell 似乎没有解决方案，但 enchant 似乎确实有效。

我有一个使用 pspell 进行拼写检查的系统，并且似乎没有任何可用版本的该文件可以与在 5.3 以上的 wamp 中运行的任何 PHP 版本一起运行（我认为它与过去的 VC 版本有关编译系统）。

现在，关于附魔的问题，我设法通过取消注释 php.ini 中的行使其在 wamp 中工作

由于您的输入没有任何迹象表明可能出了什么问题，因此您可以采取以下措施进行故障排除：

*   启用附魔扩展并重新启动 wamp 后，创建一个仅包含指令的 php 文件，`phpinfo();`并通过浏览器访问它。在那里搜索字符串“附魔”。这将告诉您扩展是否已加载
*   如果未加载扩展，请尝试从命令框中运行以下行：`<%path_to_your_php_exe%>/php.exe -c <%path_to_your_php_ini%>/php.ini -v`

当任何扩展出现问题时，您会在命令行或弹出窗口中收到消息，这在 wamp 中不会发生（如果您从命令行启动 apache，则会发生这种情况）。

我希望这有帮助。祝你好运。

# asp.net - MS JSON 日期序列化和夏令时

> ID：15411789
> 
> 赞同：4
> 
> 时间：2013-03-14T14:17:21.933
> 
> 标签：asp.net, json, datetime, datacontractserializer

我们有一个托管在 ASP.NET 应用程序中的 Ajax Web 服务。此服务接受一个 DateTime 参数，就本问题而言，该参数应接收相当于 的 DateTime ，这是巴西时间`/Date(1359727200000-0200)/`2013 年 2 月 1 日**上午 9:00的 MS-JSON 文字。**这个文字是浏览器在 Ajax 请求中发送的内容。

但是，传递给服务方法的参数不是接收该日期和时间，而是 Feb 1, 2013 **12:00 PM**。更糟糕的是，参数的 DateTimeKind 是`Local`. 如果是这样是可以理解的`Utc`，但即使这样也是不正确的，因为 2 月 1 日是巴西东部的夏令时，因此[上午 9:00（本地）应该是上午 11:00（UTC）](http://www.timeanddate.com/worldclock/converted.html?iso=20130201T09&p1=233&p2=0&p3=&p4=&p5=&p6=&p7=&p8=&p9=&p10=&p11=&p12=)。这真是一团糟。顺便说一句，Web 服务器在巴西东部时区下运行。

是否有任何 ASP.NET 配置、服务方法注释、特定客户端指令或任何框架资源来解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:31:18.447

经过大量调试后，我发现了问题：当（反）序列化在服务器和浏览器之间来回时，我不知道 JSON 序列化程序在`System.DateTime`种类和文字方面的工作方式。`Date`

详细地说，这就是发生的事情。假设服务必须以 JSON 格式向客户端返回 DateTime 值。这`DataContractJsonSerializer`将生成（臭名昭著的）**/Date(UTC ticks)/**格式的字符串，客户端可以将其解析为 JavaScript 日期值。此序列化对 DateTime 的 Kind 属性很敏感：

*   当 Kind 为`DateTimeKind.Utc`时，字符串文字将包含“/Date(UTC ticks)/”并且没有时区。
*   当 Kind 为`DateTimeKind.Local`时，字符串文字将包含“/Date(UTC ticks-time zone)/”。
*   如果 Kind 是`DateTimeKind.Unspecified`，则假定为`Local`。

相反，如果客户端向服务发送日期值，则序列化过程对 JSON 文字的“种类”也很敏感：

*   当文字的格式为“/Date(UTC ticks)/”且没有时区时，生成的 DateTime 将是`DateTimeKind.Utc`同类的。
*   当文字采用“/Date(UTC ticks-time zone)/”格式时，生成的 DateTime 将是`DateTimeKind.Local`一种类型。

我所要做的就是确保客户端只向服务发送 UTC 格式的日期文字。现在一切都很好。

# c++ - 滚动一个非常大的 GtkDrawingArea

> ID：15411792
> 
> 赞同：5
> 
> 时间：2013-03-14T14:17:32.290
> 
> 标签：c++, c, gtk, gtk2

我有一个`GtkDrawingArea`用于可视化数据的。根据数据库和用户输入，绘图可能会变得非常大（大于允许的最大`GtkDrawingArea`尺寸）。因此，我想使用与当前窗口一样大的绘图区域，并在滚动时手动更新它。

如果我使用 ScrolledWindow + Viewport 方法将滚动条添加到绘图区域，它显然不起作用，因为绘图区域不够大，需要滚动条。

有什么方法可以让视口认为底层小部件比实际大吗？如果不是，解决这个问题的最佳方法是什么？

注意：我正在使用 Gtk2 并且切换到 Gtk3 是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T01:15:54.097

您需要子类`GtkDrawingArea`化并覆盖`set_scroll_adjustments`信号。[GtkWidget 文档](https://developer.gnome.org/gtk2/stable/GtkWidget.html)

在此信号中，您将获得滚动窗口的调整。几年前我写了一些代码，你可以看看如何实现它。

[MarlinSample查看代码](https://gitlab.gnome.org/Archive/marlin/blob/master/marlin/marlin-sample-view.c#L2984)

这段代码能够假装小部件有数百万像素宽，而实际上它并不比窗口大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:34:14.873

结果很简单：

有`GtkScrolledWindow`另一个构造函数，可用于设置`GtkAdjustments`滚动窗口应使用的。

```
//These adjustments will be attached to the scrollbars.
prvt->hAdjustment = GTK_ADJUSTMENT(gtk_adjustment_new(0, 0, 0, 0, 0, 0));
prvt->vAdjustment = GTK_ADJUSTMENT(gtk_adjustment_new(0, 0, 0, 0, 0, 0));

GtkWidget* scrolledTree = gtk_scrolled_window_new(prvt->hAdjustment, prvt->vAdjustment);
gtk_scrolled_window_add_with_viewport(GTK_SCROLLED_WINDOW(scrolledTree), drawing_area); 
```

现在，每当图纸尺寸发生变化时，您只需修改`GTKAdjustments`以模拟变化。无需实际调整绘图区域的大小。

```
gtk_adjustment_set_lower(prvt->hAdjustment, 0);
gtk_adjustment_set_step_increment(prvt->hAdjustment, 1);
gtk_adjustment_set_page_increment(prvt->hAdjustment, 10);
gtk_adjustment_set_upper(prvt->hAdjustment, picture_width);
gtk_adjustment_set_page_size(prvt->hAdjustment, scrollArea_width);
gtk_adjustment_changed(prvt->hAdjustment); 
```

注意我`gtk_adjustment_changed`最后打电话了。这很重要，否则`ScrolledWindow`不会更新滚动条。

最后，可以使用`value_changed`回调来捕获滚动事件并调整绘图。`GtkAdjustmens`

编辑：这不能正常工作，因为`GtkScrolledWindow`接收滚动事件以及移动图像:(

# orm - DDL 脚本到 OR 模型中

> ID：15411797
> 
> 赞同：0
> 
> 时间：2013-03-14T14:17:52.263
> 
> 标签：orm, fluent-nhibernate, ddl

是否有将**DDL 脚本转换为 OR 模型**的工具？我知道一些商业逆向工程软件从数据库中执行此操作。

但我正在寻找的更像是一个开源库，它可以成为我的 c# 代码的一部分。很像 hbm2dll，除了反过来。

# jquery - JQuery绑定mouseenter事件不执行功能

> ID：15411799
> 
> 赞同：0
> 
> 时间：2013-03-14T14:17:56.497
> 
> 标签：jquery, jquery-plugins

当我将鼠标悬停在一个图标上时，我试图让一个 div 显示在我的页面上。不过，完整的代码“系统”有点复杂......

**场景**
在页面加载时，用户会看到一个小条显示他/她所在地区的当前天气状况。当用户将鼠标悬停在此栏上时，其下方将出现一个更大的 div，其中包含更详细的预报和代表该国其他地区当前天气状况的图标。

当用户将鼠标悬停在这些图标上时，应该会为悬停的图标所代表的区域显示更详细的天气预报（或可能作为工具提示）。

**结构**
因为雅虎的天气api转发的HTML很丑，所以我写了我的jquery来重写它并输出如下：

```
<div id="weather">
    <div id="weather-feed">
        <div class="weather-conditions">Mostly Cloudy, 23 C</div>
        <div class="weather-icon">
            <img src="http://l.yimg.com/a/i/us/we/52/28.gif"><span>Pretoria</span>

        </div>
    </div>
    <div class="weather-more-button">+</div>
    <div class="weather-extra">
        <div class="weather-forecast">
            <p style="font-size: 13pt;"><b>Forcast for your area:</b>

            </p>Thu - Mostly Clear. High: 25 Low: 14
            <br>Fri - Mostly Sunny. High: 25 Low: 17
            <br>Sat - Mostly Sunny. High: 28 Low: 18
            <br>Sun - Sunny. High: 31 Low: 17
            <br>Mon - Sunny. High: 31 Low: 17
            <br>
            <br><a href="http://us.rd.yahoo.com/dailynews/rss/weather/Pretoria__SF/*http://weather.yahoo.com/forecast/SFXX0044_c.html">Full Forecast at Yahoo! Weather</a>

        </div>
        <table width="100%">
            <tbody>
                <tr>
                    <td align="center" width="33%">
                        <img class="jhb" src="http://l.yimg.com/a/i/us/we/52/3200.gif">
                    </td>
                    <td align="center" width="33%">
                        <img class="dbn" src="http://l.yimg.com/a/i/us/we/52/30.gif">
                    </td>
                    <td width="33%" align="center">
                        <img class="cpt" src="http://l.yimg.com/a/i/us/we/52/34.gif">
                    </td>
                </tr>
                <tr>
                    <td align="center">JHB</td>
                    <td align="center">DBN</td>
                    <td align="center">CPT</td>
                </tr>
            </tbody>
        </table>
        <div class="jhbw">
            <hr>
            <p style="font-size: 13pt;"><b>Forcast for Johannesburg:</b>

            </p>
            <br>Thu - Mostly Clear. High: 22 Low: 11
            <br>Fri - Mostly Sunny. High: 22 Low: 14
            <br>Sat - Mostly Sunny. High: 26 Low: 15
            <br>Sun - Sunny. High: 27 Low: 14
            <br>Mon - Sunny. High: 28 Low: 13
            <br>
            <br>
        </div>
    </div>
</div> 
```

请注意，此处显示的所有天气数据都是动态生成的。

**JQuery**
我使用了 mouseenter 和 mouseleave 事件的绑定，这些事件绑定到 jquery 代码中的单独函数以促进悬停事件：

```
var showWeather = function (target) {
    var div = $(target);
    console.clear();
    div.css("display", "block");
}
var hideWeather = function (target) {
    var div = $(target);
    div.css("display", "none");
}
$("img.jhb").bind({
    mouseenter: function () { showWeather("jhbw") },
    mouseleave: function () { hideWeather("jhbw") }
});
var showExtra = function () {
    var extra = $(".weather-extra");
    extra.css("display", "block");
}

var hideExtra = function () {
    var extra = $(".weather-extra");
    extra.css("display", "none");
}

$("#weather").bind({
    mouseenter: showExtra,
    mouseleave: hideExtra
}); 
```

**问题**
目前，只有最后一个函数 ( `showExtra, hideExtra`) 和绑定`#weather`似乎有效。我在函数中添加了 console.clear() ，`showWeather`以便我可以通过控制台立即看到该函数是否正在执行。它不是。

我在[http://jsfiddle.net/a3fRM/2/上发布了一个 JSFiddle](http://jsfiddle.net/a3fRM/2/)

我看不出我在这里做错了什么。在我看来，两个绑定应该以完全相同的方式工作。

如果有人能看到出了什么问题，我将不胜感激。

**我意识到这可能是非常具体的，所以如果你必须关闭这个问题，但至少等待有人可以回答**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:29:56.717

您正在传递“jhbw”之类的目标，然后使用 $(target).-> $("jhbw") 与任何内容都不匹配。

使用类似的东西：

```
var showWeather = function (target) {
    var div = $("div ."+target);
    console.clear();
    div.css("display", "block");
} 
```

# c - 使用 libpq 库将图像发送到 postgresql db 中的 bytea 列时出错

> ID：15411803
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:02.307
> 
> 标签：c, postgresql, libpq, bytea

我正在用 C 编码并使用 Postgresql 的 Libpq 库，我想将 PNG 图像以“bytea”类型存储到数据库中。我在网上搜索了几个小时，找不到一个很好的例子来处理这项工作，所以想写在这里并寻求你的帮助。

我有 12 个要绑定的参数，其中一个是 PNG 图像。其余的是 char*，它们没有问题。

以下是我到目前为止所尝试的。（我正在编写代码的必要部分）：

```
 PGresult   *res;
    PGconn *conn;

    const char *paramValues[12];
    int         paramLengths[12];
    int         paramFormats[12];

    const char* imageFrame=frameImageArray.data();// frameImageArray.data is const char*.
    int imageSize=frameImageArray.size();

    paramFormats[11]=1;
    paramLengths[11]=imageSize;
    paramValues[11]= imageFrame;

// insertplate is a function on db
    res = PQexecParams(conn,
    "SELECT insertplate($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12)",
    12,              // param number 
    NULL,            // oid param type 
    paramValues,     // param values
    paramLengths,    // param lengths 
    paramFormats,    // params format, 1 for binary
    1);              //1 for binary result 
```

它编译没有问题，但是在运行时将图像存储到数据库时，会发生经典的运行时错误：

“..._debug.exe 中 0x6d3dc220 处的未处理异常：0xC0000005：访问冲突读取位置 0x000000007f91e508。”

似乎与内存处理有关。

无论我尝试了什么，我都无法让它运行，也看不到我的错误。我是否必须使用 Oids 通过 PQexecParams 将二进制数据发送到 db？还是我缺少的其他东西？如果有人帮助我，我真的很感激。

提前致谢。

编辑：我刚刚意识到，如果我使用 Insert 语句，它工作得很好，但这个函数没有。通常它可以工作。奇怪的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:04:30.090

我终于找到了错误。

```
//paramFormats[0]=0;
//paramFormats[1]=0;
//paramFormats[2]=0;
//paramFormats[3]=0;
//paramFormats[4]=0;
//paramFormats[5]=0;
//paramFormats[6]=0;
//paramFormats[7]=0;
//paramFormats[8]=0;
//paramFormats[9]=0;
//paramFormats[10]=0;
//paramFormats[11]=1; 
```

可以将“参数格式”保留为 NULL，但我只想设置“paramFormats [11]”，如上所示。我也将其他设置为 0 并且它有效。我没想到会发生这样的事情。

# c# - 尝试从 IEnumerable 获取属性时，对象与目标类型不匹配 Func 的哪个结果 .Net 4

> ID：15411804
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:05.437
> 
> 标签：c#, .net, asp.net-mvc, generics, reflection

我想要获得的是来自实体的属性并对值求和。我正在使用泛型，实体的类型和属性的名称在运行时是已知的。以下（简化）代码编译良好，但抛出“对象与目标类型不匹配”。尝试从实体获取属性时。这是代码：

```
 public class SomeModel
    {
        public int ValueA { get; set; }
        public int ValueB { get; set; }
    }

    public class SomeViewModel
    {
        public int ViewValue { get; set; }
    }

    public class HomeController : Controller
    {

        public ActionResult Index()
        {
            IEnumerable<SomeModel> data = GetData();

            var result = SumValues(data, a => new SomeViewModel { ViewValue = a.ValueA });

            return Content(string.Format("Total is: {0}", result));
        }

        private int SumValues<T, TRes>(IEnumerable<T> data, Func<T, TRes> transformation)
        {
            var transformedData = data.Select(transformation);
            Type type = typeof(TRes);
            PropertyInfo property = type.GetProperty("ViewValue");
            IEnumerable<int> listOfValues = property.GetValue(transformedData, null) as IEnumerable<int>;
            var sum = listOfValues.Sum();

            return sum;
        }

        private IEnumerable<SomeModel> GetData()
        {
            var data = new List<SomeModel>();
            Random random;
            for (int i = 0; i < 1000; i++)
            {
                random = new Random(i);
                data.Add(new SomeModel { ValueA = random.Next(5,100), ValueB = random.Next(20,80) });
            }
            return data;
        }
    } 
```

我在这里生成假数据，但真正的应用程序是使用 EF 从数据库中获取数据。泛型对我来说是新的，所以请任何指出我正确方向的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:26:03.810

在这一行：

```
IEnumerable<int> listOfValues = 
                       property.GetValue(transformedData, null) as IEnumerable<int>; 
```

您正在尝试检索对象的`ViewValue`属性值`List<SomeModel>`，但`List<SomeModel>`没有`ViewValue`属性。你可以做的一件事是：

```
IEnumerable<int> listOfValues = 
                       transformedData.Select(i => (int)property.GetValue(i, null)); 
```

但更清洁的解决方案是完全避免反射，因为这里不需要它：

```
interface IViewValue
{
    int ViewValue { get; set; }
}

public class SomeViewModel : IViewValue
{
    public int ViewValue { get; set; }
}

private int SumValues<T, TRes>(IEnumerable<T> data, Func<T, TRes> transformation)
                                            where TRes : IViewValue
{
    var transformedData = data.Select(transformation);
    IEnumerable<int> listOfValues = transformedData.Select(i => i.ViewValue);
    var sum = listOfValues.Sum();

    return sum;
} 
```

# php - 使用 swiftmailer 和发送附件

> ID：15411805
> 
> 赞同：2
> 
> 时间：2013-03-14T14:18:09.267
> 
> 标签：php, swiftmailer

我正在尝试修改脚本以发送带有附件的电子邮件。它现在可以工作，但所有字段都是必需的，我想知道我缺少什么来制作它，所以这些字段不是必需的。

```
<?php
if (($_POST)) {

$success = $error = false;

$post = new stdClass;

foreach ($_POST as $key => $val)
    $post->$key = trim(strip_tags($_POST[$key]));

    $dir = dirname(__FILE__);

    ob_start();
    require_once($dir.'/html.php');
    $html_message = ob_get_contents();
    ob_end_clean();

    require_once($dir.'/swift/swift_required.php');

    $mailer = new Swift_Mailer(new Swift_MailTransport());

    $message = Swift_Message::newInstance()
                   ->setSubject('Imperial Order') // Message subject
                   ->setTo(array($post->email => $post->name, 'ehilse@paifashion.com' => 'Janet McCauley')) // Array of people to send to
                   ->setFrom(array('noreply@paifashion.com' => 'Imperial Order'))
                   ->setBody($html_message, 'text/html') // Attach that HTML message from earlier
                   ->attach(Swift_Attachment::fromPath($_FILES['attachment']['tmp_name'])->setFilename($_FILES['attachment']['name']));

    // Send the email, and show user message
    if ($mailer->send($message))
        $success = true;
    else
        $error = true;      
}
?> 
```

我相信它与 foreach 有关，但如果我尝试将其取出，它会破坏整个代码。如果有人可以提供帮助，那就太好了。我进行验证的原因是因为我想在客户端而不是服务器端进行验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:21:06.847

您可以删除 for each 但是您必须单独请求每个发布的字段并一次处理/验证它们而不是循环，因为循环将所有帖子变量拉到本地变量。

此外，您不需要将 swift mailer 包括在循环内等，它们可以移到循环外，就像 $mailer = new transport start 行可以全部移出循环一样

**编辑示例**

```
if (isset($_POST)) { //BAD BAD BAD way of checking there's better ways

$success = $error = false;

$input1 = $_POST['input1'];
$input2 = $_POST['input2'];
$input3 = $_POST['input3'];
$input4 = $_POST['input4'];

    $dir = dirname(__FILE__);
    // THIS BIT IS RETARDED BUT LEAVING IT IN FOR NOW
    ob_start();
    require_once($dir.'/html.php');
    $html_message = ob_get_contents();
    ob_end_clean();
    // END RETARDED BIT
    require_once($dir.'/swift/swift_required.php');
    $mailer = new Swift_Mailer(new Swift_MailTransport());
    if (isset($_FILES) && strlen($_FILES['attachment']['name']) > 0) { //here we're checking that there is attachments if there are then we're going to do the attach sw code
        $message = Swift_Message::newInstance()
                   ->setSubject('Imperial Order') // Message subject
                   ->setTo(array($input1 => $input2, 'ehilse@paifashion.com' => 'Janet McCauley')) // Array of people to send to
                   ->setFrom(array('noreply@paifashion.com' => 'Imperial Order'))
                   ->setBody($html_message, 'text/html') // Attach that HTML message from earlier
                   ->attach(Swift_Attachment::fromPath($_FILES['attachment']['tmp_name'])->setFilename($_FILES['attachment']['name']));
    } else {
        //non attach sw code
        $message = Swift_Message::newInstance()
                   ->setSubject('Imperial Order') // Message subject
                   ->setTo(array($input1 => $input2, 'ehilse@paifashion.com' => 'Janet McCauley')) // Array of people to send to
                   ->setFrom(array('noreply@paifashion.com' => 'Imperial Order'))
                   ->setBody($html_message, 'text/html') // Attach that HTML message from earlier
    }
    //there's better ways of doing the above but as an example this will suffice.
    // Send the email, and show user message
    if ($mailer->send($message)) {
        $success = true;
    } else {
        $error = true;
    }
}
?> 
```

# sql - 创建一个更新触发器，将更改级联到引用表

> ID：15411807
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:10.683
> 
> 标签：sql, triggers

我有 Table2 和 Table1 的外键。我想创建一个在更新 Table1 时自动更新 Table2 的触发器。这是我的想法：

```
create trigger MyTrigger on Table1 instead of update as
if UPDATE(Table1_ID)
begin
    declare @OldID as int, @NewID as int;
    select @OldID=P_ID from deleted;
    select @NewID=P_ID from inserted;

    update Table2 set Table1_ID=@NewID where Table2.Table1_ID=@OldID;
    update Table1 set Table1_ID=@NewID where Table1_ID=@OldID;
end 
```

它不起作用，因为我收到了来自 SQL Server 的错误，表明与外键约束存在冲突。所以我稍微修改了一下：

```
create trigger MyTrigger on Table1 instead of update as
if UPDATE(Table1_ID)
begin
    declare @OldID as int, @NewID as int;
    select @OldID=P_ID from deleted;
    select @NewID=P_ID from inserted;

    update Table2 set Table1_ID=null where Table2.Table1_ID=@OldID;
    update Table1 set Table1_ID=@NewID where Table1_ID=@OldID;
    update Table2 set Table1_ID=@NewID where Table1_ID=null;
end 
```

有用。但是，如果触发器运行，Table2 中预先存在的空值显然会丢失。这样做的正确方法是什么？请注意，我在创建表时已经知道级联选项。我只想用触发器来做。谢谢。

# webbrowser-control - 在 Windows Phone 8 网络浏览器控件中使用 Google Webfonts

> ID：15411808
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:11.687
> 
> 标签：webbrowser-control, windows-phone, webfonts

我正在尝试在我的 Windows 手机应用程序中使用网络字体。从我读过的评论中，我了解到无法使用嵌入到 XAP 文件中的字体。因此，我正在尝试打开一个包含 Google Web 字体的网页，该网页位于： http: [//omercelik.com/e.htm](http://omercelik.com/e.htm)

当我从手机上的 Internet Explorer 打开此页面时，它会正确显示字体。但是，当我尝试从 webBrowser 控件加载此页面时，它不会加载此页面。除了在我的应用程序上，我什么都不做：

```
 private void PhoneApplicationPage_Loaded_1(object sender, RoutedEventArgs e)
    {
        webBrowser.Navigate(new Uri("http://omercelik.com/e.htm"));
    } 
```

因此，在我的应用程序中显示自定义字体仍然没有成功。有建议远程托管字体和缓存，但即使没有缓存，我也无法显示字体。有人可以提供一个可行的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T19:11:37.720

[通过使用诸如TTFEdit 之](http://sourceforge.net/projects/ttfedit/)类的软件将字体上的 embeddable 标签设置为 0，可以在 Windows Phone 8 webapps 中嵌入 truetype 字体。这可能证明是解决您的问题的更可靠和更优雅的解决方案。

有关所有详细信息，请参阅[我对另一个 Stack Overflow](https://stackoverflow.com/questions/14558331/getting-a-web-font-to-work-on-an-html5-windows-phone-app/20573678#20573678)问题的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:17:39.543

使用`WebBrowser`控件时，如果您想在 Windows Phone 8 中获得正确的 IE10 行为（即不是怪癖模式），包含 HTML doctype 非常重要...

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      @import url(http://fonts.googleapis.com/css?family=Tangerine);
    </style>
  </head>
  <body>
    <div id="para" style="font-family:'Tangerine', serif;">Making the Web Beautiful</div>
  </body>
</html> 
```

为了以后参考，Windows Phone 7 的`WebBrowser`控件（基于 IE9）不支持 Web Fonts。

# web-services - 使用视图模型将肥皂网络服务中的值分配给下拉列表

> ID：15411811
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:21.323
> 
> 标签：web-services, asp.net-mvc-4, viewmodel

我需要一些关于从肥皂网络服务获取值以使用视图模型显示在下拉列表中的建议，我目前从服务类库项目（n 层应用程序）中找到的服务类接收各种下拉列表的数据。

下拉列表服务的代码遵循与以下代码类似的格式：

```
public IEnumerable<SelectListItem> getValuesAsSelectItems(string selected)
    {
        var items = new List<SelectListItem>();

        items.Add(new SelectListItem { Text = "Please Select", Value = string.Empty, Selected = (selected == string.Empty) });

        foreach (var value in this.getValues())
        {
            items.Add(new SelectListItem { Text = value.Value, Value = value.Value, Selected = (selected == value.Value) });
        }
        return new SelectList(items, "Value", "Text");
    } 
```

我需要一种将值从该服务传递到视图模型的方法，然后我为每个下拉列表创建了 7 个控制器，它们都将链接到我可以在整个应用程序中重用的部分视图，下拉列表包括标题、国家、州和其他。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:58:27.047

您可以采取的一种方法是将下拉列表值提取到它们自己的视图模型中。所以：

**第 1 步：**创建一个`ItemsViewModel`封装下拉列表项的视图模型 ( )：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Models
{
    public class DropDownListItem
    {
        public string Text { get; set; }
        public string Value { get; set; }
    }

    public class ItemsViewModel
    {
        private readonly List<DropDownListItem> _items;

        // The selected item:
        public string SelectedItem { get; set; }

        // The items:
        public IEnumerable<SelectListItem> Items
        {
            get
            {
                var allItems = _items.Select(i => new SelectListItem 
                {
                    Value = i.Value,
                    Text = i.Text
                });
                return DefaultItem.Concat(allItems);
            }
        }

        // Default item (i.e. the "select" text) if none selected
        public IEnumerable<SelectListItem> DefaultItem
        {
            get
            {
                return Enumerable.Repeat(new SelectListItem
                {
                    Value = "-1",
                    Text = "Select an item"
                }, count: 1);
            }
        }

        public ItemsViewModel()
        {

        }

        // Constructor taking in items from service and selected item string:
        public ItemsViewModel(List<DropDownListItem> items, string selected)
        {
            _items = items;
            SelectedItem = selected;
        }
    }
} 
```

**第 2 步：**在 Views 文件夹中创建一个局部视图，该视图绑定到`ItemsViewModel`：

```
@model Models.ItemsViewModel
@Html.DropDownListFor(m => m.SelectedItem, Model.Items) 
```

**第 3 步：**在适当的控制器（例如 HomeController）中，将从服务、视图模型和局部视图中提取数据的子操作放在一起：

```
[ChildActionOnly]
public ActionResult DropDownList(string type, string selected)
{
    // If you need to call different services based on the type (e.g. Country), then pass through "type" and base the call on that

    var items = new ItemsViewModel(
        (from g in _service.getTitles() select new DropDownListItem { Text = g.Text, Value = g.Value }).ToList(), 
        selected);

    return PartialView("DropDownPartial", items);
} 
```

**第 4 步：**将这行代码拖放到需要下拉列表的视图中：

```
@Html.Action("DropDownList", "Home", new { selected = "2", type = "country" }) 
```

请注意，`selected`and`type`将根据您认为合适的方式来确定，并且是可选的。

希望这能给你一些启发。

# c# - 查找程序中所有函数的名称

> ID：15411815
> 
> 赞同：-3
> 
> 时间：2013-03-14T14:18:30.247
> 
> 标签：c#

我想知道如何找到程序中所有函数的名称？有什么内置的方法吗？或任何提示我如何找到？ *堆栈跟踪*或类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:21:55.597

```
var allMethods = typeof(AnyClass).Assembly
                                 .GetTypes()
                                 .SelectMany(type => type.GetMethods());

var allMethodNames = allMethods.Select(method => method.Name);

Console.WriteLine( string.Join(Environment.NewLine, allMethodNames) ); 
```

为了检查许多程序集，请使用下一个代码：

```
Assembly[] assembliesToInspect = {
                                    typeof(AnyClass).Assembly, 
                                    typeof(ClassFromAnotherAssembly).Assembly
                                 };

var allMethods = assembliesToInspect.SelectMany(assembly => assembly.GetTypes())
                                    .SelectMany(type => type.GetMethods()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:21:45.147

您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183.aspx)打开您的程序或 dll 并枚举所有类型，并为每种类型枚举其所有公共方法。

# symfony - 在 symfony2 parameters.yml 中获取环境变量

> ID：15411817
> 
> 赞同：19
> 
> 时间：2013-03-14T14:18:36.910
> 
> 标签：symfony, amazon-web-services, amazon-elastic-beanstalk

我正在尝试让我的 symfony2 应用程序在弹性 beantalk 上运行。我试图在我的 parameters.yml 中获取环境变量（RDS_USER、RDS_PASSWORD 等）以获取数据库凭据。
问题是 symfony2 需要以环境变量为前缀，`SYMFONY__`所以我可以得到这些不带前缀的变量吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T20:21:24.720

您可以将 php 文件作为资源加载：

```
# app/config/config.yml
imports:
    - { resource: parameters.php } 
```

从那里很容易：

```
// app/config/parameters.php
$container->setParameter('rds.user', getenv('RDS_USER'));
// if set via apache SetEnv use:
//$container->setParameter('rds.user', apache_getenv('RDS_USER')); 
```

**更新**：由于最初的答案，提供了一个新的解决方案（感谢[@darragh-enright](https://stackoverflow.com/users/312962/darragh-enright)指出）使用组件的`env-map`功能。`incenteev-parameters``composer.json`

```
"extra": {
    "incenteev-parameters": {
    "file": "app/config/parameters.yml",
        "env-map": {
            "database_host": "RDS_HOSTNAME",
            "database_port": "RDS_PORT",
            "database_name": "RDS_DB_NAME",
            "database_user": "RDS_USERNAME",
            "database_pass": "RDS_PASSWORD"
        }
    }
} 
```

任何映射的参数都将被环境变量中的值覆盖。有关详细信息，`env-map`请参阅[文档](https://github.com/Incenteev/ParameterHandler#using-environment-variables-to-set-the-parameters)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-07-08T14:52:39.057

我很抱歉，因为这个问题已经得到解答（我发现答案非常有帮助，感谢**@tomas.pecserke**和**@dubrox**！），但我又挖了一点，发现了一个我认为值得添加的替代解决方案后人。

简而言之，您可以添加`env-map`to `incenteev-parameters`in`composer.json`以将可用的环境变量映射到参数；例如：

```
"extra": {
    "incenteev-parameters": {
        "file": "app/config/parameters.yml",
        "env-map": {
            "database_host": "RDS_HOSTNAME",
            "database_port": "RDS_PORT",
            "database_name": "RDS_DB_NAME",
            "database_user": "RDS_USERNAME",
            "database_pass": "RDS_PASSWORD"
        }
    }
} 
```

如[使用环境变量设置参数中所述](https://github.com/Incenteev/ParameterHandler#using-environment-variables-to-set-the-parameters)：

> 对于您的 prod 环境，部署时可能无法使用交互式提示。在这种情况下，您可以依靠环境变量来提供参数。这是通过提供环境变量和它们应该填充的参数之间的映射来实现的 [...]

和

> 如果设置了环境变量，其值将始终替换现有参数文件中设置的值。

我刚刚在一个新的 EB 部署上对此进行了测试，并且效果很好。您可以使用本地部署对此进行测试，如下所示：

```
rm app/config/parameters.yml

export RDS_HOSTNAME=foo \ 
       RDS_PORT=3306 \
       RDS_DB_NAME=bar \
       RDS_USERNAME=baz \
       RDS_PASSWORD=quux

composer install 
```

交互式提示将跳过所有`database_*`参数，它们将由环境值自动填充。部署理智。惊人的 ：）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-24T15:34:20.387

只是为了给出一个对我有用的明确示例，我在我的配置文件（ ）中同时使用`parameters.yml`和：`parameters.php``config.yml`

```
# app/config/config.yml
imports:
    - { resource: parameters.yml }
    - { resource: parameters.php } 
```

如果至少找到一个 RDS 环境变量，则保留`parameters.yml`我的默认值并覆盖其中的一些：`parameters.php`

```
<?php
// app/config/parameters.php
if(getenv('RDS_HOSTNAME'))) {
    $container->setParameter('database_host', getenv('RDS_HOSTNAME'));
    $container->setParameter('database_port', getenv('RDS_PORT'));
    $container->setParameter('database_name', getenv('RDS_DB_NAME'));
    $container->setParameter('database_user', getenv('RDS_USERNAME'));
    $container->setParameter('database_password', getenv('RDS_PASSWORD'));
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-16T05:00:04.237

```
<?php
    // app/config/parameters.php
    function setParameter($container, $paramName, array $options, $default = null) {
        foreach ($options as $o) {
            if (is_string(getenv($o))) {
                $container->setParameter($paramName, getenv($o));
                return;
            }
        }

        if (! is_null($default)) {
            $container->setParameter($paramName, $default);
        }
    }

    setParameter($container, 'database.name', ['RDS_DB_NAME', 'SYMFONY__DATABASE__NAME'], 'DEFAULT');
    setParameter($container, 'database.port', ['RDS_PORT', 'SYMFONY__DATABASE__PORT'], '3306');
    setParameter($container, 'database.host', ['RDS_HOSTNAME', 'SYMFONY__DATABASE__HOST'], '127.0.0.1');
    setParameter($container, 'database.user', ['RDS_USERNAME', 'SYMFONY__DATABASE__USER'], 'root');
    setParameter($container, 'database.password', ['RDS_PASSWORD', 'SYMFONY__DATABASE__password'], ''); 
```

# ajax - 你如何使用 Angular JS 设置 CORS

> ID：15411818
> 
> 赞同：20
> 
> 时间：2013-03-14T14:18:39.730
> 
> 标签：ajax, playframework, angularjs, cross-domain, cors

在发出跨域 Ajax 请求时，如何设置 Angular 以发送正确的标头？

什么对我有用：

在尝试找到配置我的 Angular 应用程序以使用 CORS 的答案大约一整天之后，我终于想出了一个可行的解决方案！假设您已正确设置服务器 - 您需要在客户端上做的唯一一件事就是删除应用配置中的默认标头。

```
angular.module('myApp').config(['$httpProvider', function($httpProvider) {

    delete $httpProvider.defaults.headers.common['X-Requested-With'];

}); 
```

X-Requested-With 标头将请求标识为 AJAX 请求 - 默认情况下不允许跨域。所以我们需要做的就是将它从我们的默认设置和BOOM中删除！有用。

对于我们的应用程序，我们使用的是播放后端（1.2.5）——我们需要添加的代码行是：

添加标头以允许跨域请求。请注意，很多浏览器不支持这些功能并且会忽略标题。请参阅浏览器的文档以了解哪些版本支持它们。

参数：allowOrigin 允许执行 x 域调用的域的逗号分隔列表，或“ *”表示所有域。allowMethods 允许的 HTTP 方法的逗号分隔列表，或全部为 null。allowCredentials 让浏览器在执行 x 域请求时发送 cookie。仅当 allowOrigin != "* "时浏览器才会尊重

```
Http.Response.current().accessControl("*", "GET,PUT,POST,DELETE,OPTIONS",false); 
```

# c# - 该进程无法访问文件“filename.xml”，因为它正被另一个进程使用

> ID：15411824
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:43.647
> 
> 标签：c#, asp.net, xml

我有一个 webservice 项目 c#，当我上传我的项目 @live 时，我收到此错误：

> System.IO.IOException：该进程无法访问文件“E:\Sites\www.bivolino.com\bivolino3D\bivo\imgGal\ProductFeedBeslist.xml”，因为它正被另一个进程使用。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
> 在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs , String msgPath, Boolean bFromProxy) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) at System.Xml.XmlTextWriter..ctor(String filename, Encoding encoding)
> 在 e:\Sites\www.bivolino.com\bivolino3D\bivo\OpenGarments\og_webservice\App_Code\ws_og_bivolinogallery.cs:line 1186 中的 ws_og_bivolinogallery.GetItemsBeslist()

在我的本地（本地服务器）中，当我运行我的项目时一切正常，但是@live（实时服务器）我所有的方法都不再起作用了。这是我的代码（例如我的新方法）：

```
[WebMethod(MessageName = "GetItemsBeslist", Description = "Get a list of GAL shirts", CacheDuration = 3600)]
   public XmlDocument GetItemsBeslist()
   {
   XmlTextWriter textWriter = new XmlTextWriter("E:/Sites/www.bivolino.com/bivolino3D/bivo/imgGal/ProductFeedBeslist.xml", Encoding.UTF8);
   //E:/Sites/www.bivolino.com/bivolino3D/bivo/imgGal
   try
   {
       if (bRegisterIP)
       {
           try { LogFiler.ToLog("### IP ### - [" + sRemoteAddress + "]"); }
           catch { }
       }
       XmlDocument xProducts = new XmlDocument();
       XmlElement subElm;
       XmlElement elmAttr;
       XmlNode elmValue;

       xProducts.CreateXmlDeclaration("1.0", "utf-8", null);
       XmlElement topElm = xProducts.CreateElement("ProductFeed");
       topElm.SetAttribute("version", "1.0");
       topElm.SetAttribute("timestamp", System.DateTime.Now.ToString().Replace(" ", ":"));
       xProducts.AppendChild(topElm);

       List<string[]> strarrVelden = new List<string[]>();
       strarrVelden.AddRange(DB.GetItemsBeslist());
       foreach (string[] rij in strarrVelden)
       {

           subElm = xProducts.CreateElement("Product");

           elmAttr = xProducts.CreateElement("ProductTitle");
           elmValue = xProducts.CreateNode(XmlNodeType.Text, "ProductTitle", null); elmValue.Value = "Herenoverhemd Bivolino " + rij[5].ToString();
           elmAttr.AppendChild(elmValue);
           subElm.AppendChild(elmAttr);

           elmAttr = xProducts.CreateElement("Price");
           elmValue = xProducts.CreateNode(XmlNodeType.Text, "Price", null); elmValue.Value = rij[6].ToString().Replace(",", ".");
           elmAttr.AppendChild(elmValue);
           subElm.AppendChild(elmAttr);

           elmAttr = xProducts.CreateElement("productURL");
           elmValue = xProducts.CreateNode(XmlNodeType.CDATA, "productURL", null); elmValue.Value = rij[1].ToString();
           elmAttr.AppendChild(elmValue);
           subElm.AppendChild(elmAttr);

           elmAttr = xProducts.CreateElement("Category");
           elmValue = xProducts.CreateNode(XmlNodeType.Text, "Category", null); elmValue.Value = "Herenoverhemd ";
           elmAttr.AppendChild(elmValue);
           subElm.AppendChild(elmAttr);

           elmAttr = xProducts.CreateElement("ProductDescription");
           elmValue = xProducts.CreateNode(XmlNodeType.Text, "ProductDescription", null); elmValue.Value = rij[2].ToString();
           elmAttr.AppendChild(elmValue);
           subElm.AppendChild(elmAttr);

           topElm.AppendChild(subElm);
       }

       textWriter.WriteStartDocument();

       xProducts.Save(textWriter);
       textWriter.WriteEndDocument();
       textWriter.Close();

       return xProducts;

   }
   catch (Exception ex)
   {
       return ErrHandle("ERROR - GetItemsBeslist - " + ex.Message, "ERROR - GetItemsBeslist");
   } 
```

}

通常这些错误来自未关闭的文件流，但我已经处理好了。我想我忘记了一个重要的步骤，但不知道在哪里。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:25:38.453

我会`XmlTextWriter`在方法的末尾创建唯一的（当我们真正需要它时），我也会使用 using 块。`using (var textWriter = new XmlTextWriter ("")) { ... }` 而且，这个方法可以被不同的线程同时调用吗？如果是这样，您必须处理并发性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:24:10.280

尝试将您的流 ctor 包装在 `using:

```
using (XmlTextWriter textWriter = new XmlTextWriter("E:/Sites/www.bivolino.com/bivolino3D/bivo/imgGal/ProductFeedBeslist.xml", Encoding.UTF8)){

...
} 
```

您的代码似乎没有在异常时关闭流，请`using`注意这一点。即使 XmlTextWriter 是 IDisposable ，它也可能需要一些时间才能被释放，您可能会在此之前点击您的方法。

另外 - 了解序列化，可能不需要像您一样手动创建 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:34:05.763

考虑使用[`Server.MapPath`](https://stackoverflow.com/questions/275781/server-mappath-server-mappath-server-mappath-server-mappath)或[`HostingEnvironment`](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.aspx)获取您的文件系统链接。using 语句应该解决这个问题。

```
[WebMethod(MessageName = "GetItemsBeslist", Description = "Get a list of GAL shirts", CacheDuration = 3600)]
public XmlDocument GetItemsBeslist()
{
    if (bRegisterIP)
    {
       try { LogFiler.ToLog("### IP ### - [" + sRemoteAddress + "]"); }
       catch { }
    }

    try
    {
       var xProducts = GetProducts();
       string file = Server.MapPath("/bivolino3D/bivo/imgGal/ProductFeedBeslist.xml");

       using(XmlTextWriter textWriter = new XmlTextWriter(file, Encoding.UTF8))
       {
           textWriter.WriteStartDocument();
           xProducts.Save(textWriter);
           textWriter.WriteEndDocument();
       }

       return xProducts;
    }
    catch (Exception ex)
    {
       return ErrHandle("ERROR - GetItemsBeslist - " + ex.Message, "ERROR - GetItemsBeslist");
    }
}

private XmlDocument GetProducts()
{
    XmlDocument xProducts = new XmlDocument();
    XmlElement subElm;
    XmlElement elmAttr;
    XmlNode elmValue;

    xProducts.CreateXmlDeclaration("1.0", "utf-8", null);
    XmlElement topElm = xProducts.CreateElement("ProductFeed");
    topElm.SetAttribute("version", "1.0");
    topElm.SetAttribute("timestamp", System.DateTime.Now.ToString().Replace(" ", ":"));
    xProducts.AppendChild(topElm);

    List<string[]> strarrVelden = new List<string[]>();
    strarrVelden.AddRange(DB.GetItemsBeslist());
    foreach (string[] rij in strarrVelden)
    {

       subElm = xProducts.CreateElement("Product");

       elmAttr = xProducts.CreateElement("ProductTitle");
       elmValue = xProducts.CreateNode(XmlNodeType.Text, "ProductTitle", null); elmValue.Value = "Herenoverhemd Bivolino " + rij[5].ToString();
       elmAttr.AppendChild(elmValue);
       subElm.AppendChild(elmAttr);

       elmAttr = xProducts.CreateElement("Price");
       elmValue = xProducts.CreateNode(XmlNodeType.Text, "Price", null); elmValue.Value = rij[6].ToString().Replace(",", ".");
       elmAttr.AppendChild(elmValue);
       subElm.AppendChild(elmAttr);

       elmAttr = xProducts.CreateElement("productURL");
       elmValue = xProducts.CreateNode(XmlNodeType.CDATA, "productURL", null); elmValue.Value = rij[1].ToString();
       elmAttr.AppendChild(elmValue);
       subElm.AppendChild(elmAttr);

       elmAttr = xProducts.CreateElement("Category");
       elmValue = xProducts.CreateNode(XmlNodeType.Text, "Category", null); elmValue.Value = "Herenoverhemd ";
       elmAttr.AppendChild(elmValue);
       subElm.AppendChild(elmAttr);

       elmAttr = xProducts.CreateElement("ProductDescription");
       elmValue = xProducts.CreateNode(XmlNodeType.Text, "ProductDescription", null); elmValue.Value = rij[2].ToString();
       elmAttr.AppendChild(elmValue);
       subElm.AppendChild(elmAttr);

       topElm.AppendChild(subElm);
    }

    return xProducts;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:34:52.063

我还会在 textWriter.Close() 之前调用 textWriter.Flush() 或作为您的 using 块的最后一行。有时 .NET 需要一段时间才能在关闭时从缓冲区写入 IO 操作的底层流，这可能会锁定您的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T14:43:27.370

当您真正需要它并序列化多个线程的访问时，您会尝试打开文件。

与其在方法开始时打开文本编写器，不如在需要的地方打开它，即在方法结束时还定义静态全局对象 objLock，您可以在该对象上获取锁。这应该工作

```
 private static  object objLock = new object();

 lock(objLock)
 {
   using (XmlTextWriter textWriter = new    XmlTextWriter("E:/Sites/www.bivolino.com/bivolino3D/bivo/imgGal/ProductFeedBeslist.xml", Encoding.UTF8))
    {
       textWriter.WriteStartDocument();
       xProducts.Save(textWriter);
       textWriter.WriteEndDocument();
       textWriter.Close();

     }

 } 
```

# php - 单循环给出一个重复的帖子

> ID：15411825
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:48.143
> 
> 标签：php, wordpress

我的 Wordpress 网站在主页上只显示一个循环。

今天我注意到循环返回特定帖子的副本。

我检查了数据库，数据库中只有一个帖子的物理存在。

这就是我定义循环参数的方式：

```
$args = array(
        'posts_per_page' => 65,
        'ignore_sticky_posts' => 1,
        'paged' => $paged,
        'orderby' => 'date',
        'order' => 'DESC',
        'post_type'=>'post'
    );
    query_posts($args); 
```

如果我在 orderby 子句中输入 ID 而不是“日期”，则问题不存在。但我需要按日期订购。

任何想法为什么会发生这种情况？我知道这通常发生在我们有两个或更多循环时。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T14:30:31.213

试试这个代码

```
<?php
wp_reset_query();
?>
<?php
if ($allposts->have_posts()):
    while ($allposts->have_posts()):
        $allposts->the_post();
        the_title();
    endwhile;
endif;
?> 
```

# ruby-on-rails-3 - Rails form_for 操作的语言环境已损坏

> ID：15411828
> 
> 赞同：4
> 
> 时间：2013-03-14T14:18:50.527
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我有一个帐户仪表板，其中列出了办公室以及每个办公室的可用工作。

等级制度：

*   公司（1 个用户有 1 个公司，如果从用户个人资料访问）
*   办公室（每个公司可以有多个办公室）
*   工作（每个办公室可以有多个工作）

楷模：

```
class Company < ActiveRecord::Base
  has_many :offices, :dependent => :destroy
  has_many :jobs, :through => :offices

class Office < ActiveRecord::Base
  belongs_to :company
  has_many :jobs, :dependent => :destroy

class Job < ActiveRecord::Base
  belongs_to :office 
```

对于每项工作，我都有一个编辑链接

例如，对于工作 id 10（工作是办公室工作迭代的局部变量）

= 链接到编辑作业路径（I18n.locale，作业）

-> 本地主机：3000/de/jobs/10/edit

当我点击编辑链接时，我进入编辑页面。到目前为止一切顺利，但表格看起来像这样：

```
<form accept-charset="UTF-8" action="/10/jobs/10" class="edit_job" enctype="multipart/form-data" id="edit_job_10" method="post"> 
```

请注意，我的语言环境（在本例中为 de）消失了，取而代之的是作业 ID！

我的路线.rb

```
scope "/:locale" do
    resources :companies
    resources :offices do
            resources :jobs
    end
    resources :jobs
end 
```

提到了两个工作，我可能可以不用，但这是一种简单的方法，我可以直接提及工作 url 以查看或在创建新工作链接中添加 office 变量并使用 :office_id （在我的仪表板控制器中：link_to new_office_job_path( I18n.locale, office) 然后在我的新工作表格中：= f.hidden_​​field :office_id)

但即使我删除了 :offices 中的资源 :jobs。区域设置仍由编辑表单中的作业 ID 替换。

请注意，我可以正确编辑作业，但是由于更改了区域设置，因此在我重定向后本地化文本都错误。

知道如何解决吗？

------ 请求的附加数据 ------------

```
= form_for(@job) do |f|
    .field
        = f.label :name, t(:job_title)
        = f.text_field :name
    .field
        = f.label :url, t(:job_url)
        = f.text_field :url
    .field
        = f.hidden_field :office_id
    .field
        = f.label :pdf, t(:job_upload_pdf)
        = f.file_field :pdf
    .field
        = f.label :tag_list, t(:job_tags)
        = f.text_field :tag_list
    .actions
        = f.submit "Submit", :class => "btn btn-primary" 
```

- - - 附加信息 - - - - - -

顺便说一句：这项工作有效，我得到 /de/jobs/10 但我想了解如果我使用默认 form_for，语言环境为什么会损坏。

```
 = form_for @job, :url => job_path(I18n.locale, @job) do |f| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:21:38.190

您可以使用[路由过滤器](https://github.com/svenfuchs/routing-filter)来处理语言环境，我已经在我的项目中尝试过，您不必担心路由中的语言环境，过滤器会为您处理它。

```
# in config/routes.rb
Rails.application.routes.draw do
  filter :locale
end 
```

我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:05:28.637

该`form_for`行构建路径，构建路径时还需要指定语言环境。要干净利落地执行此操作（无需显式指定 url，这也是可能的），请将其编写如下：

```
= form_for [I18n.locale, @job] do |f| 
```

这应该呈现正确的路径。正如[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)中所指定的，它将使用数组来构建正确的路径（这适用于命名空间和嵌套路由，所以我猜它也适用于您的语言环境）。

另一种方法是使用`:url`选项显式指定路径。

HTH。

# python - SQLAlchemy 会话错误

> ID：15411832
> 
> 赞同：0
> 
> 时间：2013-03-14T14:18:58.920
> 
> 标签：python, session, sqlalchemy, add

我在 SQLAlchemy 中的会话有问题，当我在数据库中添加一行时没问题，但是如果我想在不关闭我的应用程序的情况下添加另一行，它不会添加

这是我的模型中的功能：

```
def add(self,name):
    self.slot_name = name
    our_slot = self.session_.query(Slot).filter_by(slot_name = str(self.slot_name)).first()
    if our_slot:
        return 0
    else:
        self.session_.add(self)
        self.session_.commit()
        return 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:02:15.827

问题是您提交了会话。提交会话后，将其关闭。要么在完成添加后提交，要么在每次提交后打开一个新会话。也看看`Session.commit()`。您可能应该在[SQLAlchemy 的文档](http://docs.sqlalchemy.org/en/latest/orm/session.html)中阅读有关会话的内容。

此外，建议您这样做：

```
def add(self,name):
    self.slot_name = name
    try:
        our_slot = self.session_.query(Slot)\
        .filter_by(slot_name = str(self.slot_name)).one()
        self.session_.add(self)
        return 1
    except NoResultFound:
        return 0 
```

当然，这仅在您期望只有一个结果时才有效。引发异常并捕获它们而不是弥补条件被认为是一种很好的做法。

# javascript - 使用 moment.js 将日期转换为字符串“MM/dd/yyyy”

> ID：15411833
> 
> 赞同：110
> 
> 时间：2013-03-14T14:19:03.470
> 
> 标签：javascript, jquery, momentjs

我需要从 jquery datepicker 中获取日期值，将其转换为字符串格式“MM/dd/yyyy”，以便它可以执行正确的 ajax 发布。当页面加载或更改日期选择器时，将进行 jquery ajax 调用。

我有这个代码：

```
var sTimestamp =
moment($("#start_ts").datepicker("getDate")).format("MM/dd/yyyy"); 
```

但它不会把它变成“MM/dd/yyyy”。当我使用提琴手检查发送的内容时，这是正文：

```
startTimestamp=03%2FTh%2Fyyyy&endTimestamp=03%2FTh%2Fyyyy&pageSize=50&pageNum=0 
```

如果我在提琴手中使用 compose 并将正文更改为：

```
startTimestamp=03/13/2013&endTimestamp=03/14/2013&pageSize=50&pageNum=0 
```

我得到了正确的回应。所以，我的问题是，有没有办法使用 moment.js 获取日期对象并将其格式化为字符串“MM/dd/yyyy”？还是我从 datepicker 获取日期的方式有问题？

顺便说一句，我假设 datepicker.getDate 返回一个日期对象，因为这是 jQuery 文档告诉我的。

谢谢，

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2014-03-29T06:48:34.270

```
StartDate = moment(StartDate).format('MM-YYYY'); 
```

...和 ​​MySQL 日期格式：

```
StartDate = moment(StartDate).format('YYYY-MM-DD'); 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-03-14T14:24:18.640

我认为您只是格式字符串中的大小写不正确。根据文档，这应该对您有用：`MM/DD/YYYY`

[moment.js 文档](http://momentjs.com/docs/#/displaying/format/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-14T14:23:58.083

试试这个：

```
var momentObj = $("#start_ts").datepicker("getDate");

var yourDate = momentObj.format('L'); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-06-19T18:18:18.427

```
.format('MM/DD/YYYY HH:mm:ss') 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-12-14T13:28:48.030

采用：

> date.format("MM/DD/YYYY") 或 date.format("MM-DD-YYYY")}

其他支持的格式供参考：

## 月份：

> **米**1 2 ... 11 12
> 
> **月** 1 日 2 日 ... 11 日 12 日
> 
> **毫米** 01 02 ... 11 12
> 
> **MMM** 1 月 2 月 ... 11 月 12 月
> 
> **MMMM** 一月 二月 ... 十一月 十二月

## 天：

> **d** 0 1 ... 5 6
> 
> **第 0 次第 1 次 ... 第 5 次第 6**次****
> 
>  ****dd** Su Mo ... Fr Sa
> 
> **ddd** 周日 周一 ... 周五 周六
> 
> **dddd** 星期日 星期一 ... 星期五 星期六**

 **## 年：

> **年** 70 71 ... 29 30
> 
> **年年** 1970 年 1971 年 ... 2029 年 2030 年
> 
> **是**1970 1971 ... 9999 +10000 +10001**

# c++ - 将矩阵类转换为 IplImage*

> ID：15411836
> 
> 赞同：0
> 
> 时间：2013-03-14T14:19:09.907
> 
> 标签：c++, visual-studio-2010, opencv

我确实有一个 Matrix 类，我通过两个循环访问它，并在其中存储了我想要的所有值。

```
Matrix MatriceJ(width, height);
for (int i=0;i<width;i++)
{
    for (int j=0;j<height;j++)
    {
        MatriceJ.at(i,j)=....
    }
} 
```

但是现在，我想将 MatriceJ 存储在 IplImage* 中，因为我可以将它的不同元素与其他 IplImage 一个接一个地相乘。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:24:16.940

这应该让你开始。我假设数据是无符号字符和一个通道，请相应调整。

```
// Create the image
int depth = IPL_DEPTH_8U; // please adjust
int channels = 1;         // please adjust
IplImage* img = cvCreateImage(cvSize(width,height), depth, channels);

// Now assume there is a matrix MatriceJ
// Copy the data to our newly created IplImage*
for (int i=0;i<height;i++)
{
    uchar* ptr = (uchar*)(img->imageData + i*img->widthStep);
    for (int j=0;j<width;j++)
    {
        ptr[j] = MatriceJ(i,j);
    }
} 
```

# java - 是否可以使用 Flash 获得无线名称

> ID：15411837
> 
> 赞同：0
> 
> 时间：2013-03-14T14:19:15.330
> 
> 标签：java, html, flash, browser

是否可以使用 Flash 获取无线名称和无线 MAC 地址？或者我应该使用Java？

# webdriver - ChromeDriver 触摸事件始终禁用

> ID：15411838
> 
> 赞同：2
> 
> 时间：2013-03-14T14:19:17.413
> 
> 标签：webdriver, google-chrome-devtools, selenium-chromedriver

我正在尝试在启用触摸事件的情况下启动 Chrome 浏览器，但是当它总是在禁用触摸事件的情况下进行统计时（触摸事件不起作用并且“开发工具”-> 设置-> 中未选中“模拟触摸事件”复选框覆盖）
我的代码是：

```
ChromeOptions opt = new ChromeOptions();
opt.addArguments("touch-events"); 
WebDriver driver = new ChromeDriver(opt); 
```

有没有办法在启用触摸事件的情况下启动 Chrome？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:31:44.267

我认为你混淆了两个设置。首先是浏览器是否支持触摸事件 API。这由 -touch-events 标志控制（启用、禁用或自动，这意味着如果检测到触摸屏则启用）。当它为真时，您会看到，例如 ('ontouchstart' in window) 为真（并且存在许多其他属性/函数）。

其次，有一个 devtools 功能，可以从鼠标输入生成合成触摸事件。无论是否启用了敏感 API，这在技术上都有效（但如果某些触摸 API 不存在，但它们接收到触摸事件，某些网站可能会合理地混淆）。据我所知，没有办法启用开发人员工具并从命令行打开功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-28T19:25:03.843

这应该可以解决问题

`opt.addArguments("--touch-events=disabled");`

# javascript - 如何将自动完成结果列为链接？

> ID：15411839
> 
> 赞同：0
> 
> 时间：2013-03-14T14:19:18.677
> 
> 标签：javascript, asp.net, ajax

我是 Ajax 的新手。我需要找到如何将自动完成结果作为链接列出。当用户单击结果时，应打开该链接。我可以列出相关结果，但找不到如何添加链接。它应该作为 html 标记添加到脚本中的某处。请给我一些线索如何添加html链接

这是我的脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        SearchText();
    });
    function SearchText() {
        $(".auto").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Default.aspx/GetAutoCompleteData",
                    data: "{'question':'" + document.getElementById('txtQuestion').value + "'}",
                    dataType: "json",
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (result) {
                        alert("Error Occurred");
                    }
                });
            }
        });
    }
</script> 
```

这是连接到数据库并返回相关结果的方法：

```
[WebMethod]
public static List<string> GetAutoCompleteData(string question)
{
    List<string> result = new List<string>();
    using (SqlConnection conn = new SqlConnection("Data Source=xxx;Initial Catalog=xxx;User ID=xxx;Password=xxx+"))
    {
        using (SqlCommand cmd = new SqlCommand("SELECT Questions,Link FROM DigiQA WHERE Questions LIKE '%'+@quest+'%'", conn))
        {
            conn.Open();
            cmd.Parameters.AddWithValue("@quest", question);
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                result.Add(dr["Questions"].ToString());
            }
            return result;
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:24:01.380

尝试这样的事情

```
success: function(data) {
    response($jQuery.map(data, function(item) {
        return {
           label: '<a href="yoururl">' + item + '</a>'),
           value: item
        }
    }))
} 
```

# database - Spring JDBC BeanPropertyRowMapper 是 否 ('Y','N') 到布尔 bean 属性

> ID：15411843
> 
> 赞同：8
> 
> 时间：2013-03-14T14:19:40.100
> 
> 标签：database, oracle, spring, boolean, spring-jdbc

我有一个包含一些字符串、整数和布尔字段的类。我为他们声明了 getter 和 setter。

```
public class SomeClass {

    private int id;
    private String description;
    private boolean active;

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
    public boolean isActive() {
        return active;
    }
    public void setActive(boolean active) {
        this.active = active;
    }

} 
```

我是 BeanPropertyRowMapper 从 Oracle DB 中获取所有对象。

```
@Override
public List<Destination> getAll() {
     List<SomeClass> objs = jdbcTemplate.query(
                myQuery, new BeanPropertyRowMapper<SomeClass>(SomeClass.class));
     return objs;
} 
```

如果调试已打开，我会看到：

```
[3/14/13 10:02:09:202 EDT] 00000018 SystemOut     O DEBUG BeanPropertyRowMapper - Mapping column 'ID' to property 'id' of type int
[3/14/13 10:02:09:202 EDT] 00000018 SystemOut     O DEBUG BeanPropertyRowMapper - Mapping column 'DESCRIPTION' to property 'description' of type class java.lang.String 
```

然后它尝试映射活动失败。Active 定义为 DB 中的 1 字节 CHAR，其值为“Y”或“N”。使用 BeanPropertyRowMapper 并成功将“Y”和“N”等值转换为布尔值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T19:20:01.890

所以我想出了如何做到这一点。在将控件移交给 beanpropertyrowmapper 以获取其余数据类型之前，我通过一些自定义代码扩展了 BeanPropertyRowMapper 和处理程序布尔类型。

注意：它适用于我，因为我使用 oracle 并且所有“布尔”类型的列都是具有“y”、“是”、“n”和“否”类型值的字符串。

那些使用数字 1,0 或其他格式的人可能会进一步改进它，方法是通过对象是映射使其通用并从结果集中获取对象并在此映射中查找它们。希望这可以帮助像我这样的情况的其他人。

```
import java.beans.PropertyDescriptor;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

import org.apache.commons.lang3.StringUtils;
import org.springframework.jdbc.core.BeanPropertyRowMapper;

/**
 * Extends BeanPropertyRowMapper to allow for boolean fields
 * mapped to 'Y,'N' type column to get set correctly. Using stock BeanPropertyRowMapper
 * would throw a SQLException.
 * 
 */
public class ExtendedBeanPropertyRowMapper<T> extends BeanPropertyRowMapper<T> {

    //Contains valid true values
    public static final Set<String> TRUE_SET = new HashSet<String>(Arrays.asList("y", "yes", "true"));

    public ExtendedBeanPropertyRowMapper(Class<T> class1) {
        super(class1);
    }

    @Override
    /**
     * Override <code>getColumnValue</code> to add ability to map 'Y','N' type columns to
     * boolean properties.
     * 
     * @param rs is the ResultSet holding the data
     * @param index is the column index
     * @param pd the bean property that each result object is expected to match
     * (or <code>null</code> if none specified)
     * @return the Object value
     * @throws SQLException in case of extraction failure
     * @see org.springframework.jdbc.core.BeanPropertyRowMapper#getColumnValue(java.sql.ResultSet, int, PropertyDescriptor) 
     */
    protected Object getColumnValue(ResultSet rs, int index,
            PropertyDescriptor pd) throws SQLException {
        Class<?> requiredType = pd.getPropertyType();
        if (boolean.class.equals(requiredType) || Boolean.class.equals(requiredType)) {
            String stringValue = rs.getString(index);
            if(!StringUtils.isEmpty(stringValue) && TRUE_SET.contains(stringValue.toLowerCase())){
                return true;
            }
            else return false;
        }       
        return super.getColumnValue(rs, index, pd);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-27T15:25:39.563

`BeanPropertyRowMapper`将使用和将值转换为`Boolean`对象。刚试过这个，它的工作原理。`0=false``1=true`

[这篇博文](http://www.techrepublic.com/article/oracle-tip-choosing-an-efficient-design-for-boolean-column-values/)包含更多信息，以及带有 OCCI 的 Java 和 C 代码示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-20T10:22:56.153

老问题，但你可以做类似的事情

```
public void setIsActive(String active) {
    this.active = "Y".equalsIgnoreCase(active);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-19T15:26:28.123

正如 Harikumar 所指出的，`BeanPropertyRowMapper`实际上确实将 0 和 1 转换为布尔值。我找不到任何文档来支持这一点，但这实际上是当前的情况。

因此，不需要您扩展的解决方案是`BeanPropertyRowMapper`将您的列解码为这些值：

```
@Override
public List<Destination> getAll() {
     List<SomeClass> objs = jdbcTemplate.query(
                "SELECT ID, DESCRIPTION, " +
                " DECODE(ACTIVE, 'Y', 1,'N', 0) as ACTIVE " +
                " FROM YOUR_TABLE",
                new BeanPropertyRowMapper<SomeClass>(SomeClass.class));
     return objs;
} 
```

# jquery - jquery：在选定值中查找特定的文本字符串

> ID：15411852
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:20:15.443
> 
> 标签：jquery

我正在使用下面的代码根据下拉菜单中的选择隐藏/显示部分。我想说，如果选择的值**包含**单词“ **-AREA** ”，则继续代码。如何在此代码库中包含对特定字符串的查找/搜索？

```
$('select#7535').change(function(event) { 
        var campaignType = $(this).val();
           if (campaignType == "Type 1")
           {
               $('tr.tr-1153-7548').show();
               $('tr.tr-1153-7549').show(); 
           }
           else 
           {
               $('tr.tr-1153-7548').hide();
               $('tr.tr-1153-7549').hide(); 
           }
}); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:22:10.180

[`String#indexOf`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.7)在字符串中搜索子字符串，因此：

```
if (campaignType.indexOf("-VIEW") !== -1) {
    // It's there
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:22:36.860

您可以为此使用该`indexOf`方法。

我不确定您的“选定值”是什么，但假设它是，`campaignType`那么您可以这样做：

```
var contains = campaignType.indexOf("-AREA") > -1; 
```

`contains`将是一个可用于测试的布尔值（真/假）。

# mysql - 系统变量 - 过程中的过程名称

> ID：15411856
> 
> 赞同：1
> 
> 时间：2013-03-14T14:20:34.097
> 
> 标签：mysql

在 MySQL 中编写存储过程时，是否存在具有存储过程名称的系统变量？

我想做一些登录存储过程，我想使用过程名称作为进程 ID，而不是在每个过程中硬编码名称。就像是`me.name equals myStoredProc`

# javascript - 通过使用正则表达式查找图像 url

> ID：15411860
> 
> 赞同：2
> 
> 时间：2013-03-14T14:20:56.453
> 
> 标签：javascript, jquery, regex, find, match

任何有效的正则表达式来查找图片网址？

例子 ：

```
var reg = /^url\(|url\(".*"\)|\)$/;

var string = 'url("http://domain.com/randompath/random4509324041123213.jpg")';

var string2 = 'url(http://domain.com/randompath/random4509324041123213.jpg)';

console.log(string.match(reg));
console.log(string2.match(reg)); 
```

我并列但失败，这种`reg` 模式看起来像这样，我只想要图像 url`url(" ")`或`url( )`

我只想得到像这样的输出`http://domain.com/randompath/random4509324041123213.jpg`

[http://jsbin.com/ahewaq/1/edit](http://jsbin.com/ahewaq/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:23:34.067

试试这个正则表达式：

```
var regex = /\burl\(\"?(.*?)\"?\)/;
var match = regex.exec(string);
console.log(match[1]); 
```

URL 在第一个子组中被捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:28:34.830

我会简单地使用这个表达式：

```
/url.*\("?([^")]+)/ 
```

这将返回一个数组，其中第一个索引 (0) 包含整个匹配项，第二个将是 url 本身，如下所示：

```
'url("http://domain.com/randompath/random4509324041123213.jpg")'.match(/url.*\("?([^")]+)/)[1];
//returns "http://domain.com/randompath/random4509324041123213.jpg"
//or without the quotes, same return, same expression
'url(http://domain.com/randompath/random4509324041123213.jpg)'.match(/url.*\("?([^")]+)/)[1]; 
```

如果使用单引号和双引号发生了变化，您可以简单地将 all 替换`"`为`'"`or `['"]`，在这种情况下：

```
/url.*\(["']?([^"')]+)/ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T14:25:51.003

如果字符串始终保持一致，则一种选择是简单地删除前 4 个字符`url("`和最后两个字符`")`：

```
var string = 'url("http://domain.com/randompath/random4509324041123213.jpg")';

// Remove last two characters
string = string.substr(0, string.length - 2);

// Remove first five characters
string = string.substr(5, string.length); 
```

这是[一个工作小提琴](http://jsfiddle.net/vvqpG/1/)。

**这种方法的好处：**您可以自己编辑它，而无需让 StackOverflow 为您完成。RegEx**很棒**，但如果你不知道，在你的代码中添加它会导致令人沮丧的重构。

# sql-server - SQL Server 2005 中同一时区的错误时间

> ID：15411863
> 
> 赞同：0
> 
> 时间：2013-03-14T14:21:00.080
> 
> 标签：sql-server, tsql, datetime

我成功地将 XML 类型的参数作为存储过程参数传递。我处理来自 XML 的所有数据没有问题，但我发现来自 XML 的日期没有正确检索。

例如，`2013-03-14T15:14:53.598438+01:00`现在`2013-03-14 14:14:00`. 似乎 SQL 正在计算`+1`以显示时间。

我正在使用以下 T-SQL 从 xml 获取日期

```
select 
   A.B.value('xs:dateTime((ConfirmationDate)[1])', 'smalldatetime') as ConfirmationDate
FROM    
   @XML.nodes('/ArrayOfPreOrder/PreOrder/confirmationinfo/ConfirmationInfo') A(B)) as ConfirmationDate 
```

我该如何纠正这个问题？服务器和 SQL Server 都在同一个时区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:26:29.843

检查您的时区设置和您要导入的时区之间是否存在差异...

```
SELECT SYSDATETIMEOFFSET()

DECLARE @TimeZone NVARCHAR(255)
EXEC master.dbo.xp_instance_regread 

N'HKEY_LOCAL_MACHINE', 
N'SYSTEM\CurrentControlSet\Control\TimeZoneInformation',
N'TimeZoneKeyName',
@TimeZone OUTPUT

SELECT @TimeZone 
```

您正在导入的 XML 中指定时区，所以我猜它正在为您将其转换为本地时间。因此，您从 +1 导入的时区将是 +2。

# c++ - 与 Boost 正则表达式库链接时程序启动期间崩溃

> ID：15411871
> 
> 赞同：4
> 
> 时间：2013-03-14T14:21:29.177
> 
> 标签：c++, linux, boost, linker

我们的项目（在 C++ 中）需要链接，`boost regex`所以我们只需找到正确的编译`libboost_regex_1.45.0`并告诉 g++ 链接它。编译成功，我们只需按预期获得正确的可执行文件。问题是，每次我们尝试运行可执行文件时，它都会在进入`main()`例程之前崩溃。

使用附加生成的`core`文件`gdb`，该`backtrace`命令显示 期间存在分段错误`__bultin_strlen`，已解决为`strlen@@GLBC_2.2.5`.

由于我们的可执行文件链接到多个动态库，`readelf -s`因此可以用来识别有问题的符号，它归结为`libboost_regex`. 但是，所引用的符号已经存在于 RHEL6 系统文件夹`/lib64/libc.so`中。

问题是，我们如何才能让 boost regex 正常工作？

*   操作系统：RHEL6.2
*   海合会：4.3.2 /`libstdc++6.0.13`
*   Boost 库是由完全相同的工具集构建的 -`user-config.bjam`是定制的

由于各种原因，静态链接对我们来说不是一个好的选择。

符号信息和 ldd 信息附在[https://gist.github.com/skyscribe/5184622](https://gist.github.com/skyscribe/5184622)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:11:12.303

从 gdb 回溯中，我们看到`std::char_traits<char>::length`带参数的方法`\"http:\\\\/\\\\/localhostr.com\\\\/files\\\\/.+?\"`正在触发分段错误。g++ 4.3.2 引入了新的[堆栈粉碎保护](http://www.blackhat.com/presentations/bh-europe-09/Fritsch/Blackhat-Europe-2009-Fritsch-Bypassing-aslr-slides.pdf)功能，这可能会干扰 strlen 长度计算。

用最近的 g++ 编译器重新编译/重新链接你的代码，看看你是否解决了这个错误。此示例代码不会重现此类错误：

```
user@workstation ~
$ g++ -v
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-pc-cygwin/4.5.3/lto-wrapper.exe
Target: i686-pc-cygwin
Configured with: /gnu/gcc/releases/respins/4.5.3-3/gcc4-4.5.3-3/src/gcc-4.5.3/configure --srcdir=/gnu/gcc/releases/respins/4.5.3-3/gcc4-4.5.3-3/src/gcc-4.5.3 --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --datadir=/usr/share --localstatedir=/var --sysconfdir=/etc --datarootdir=/usr/share --docdir=/usr/share/doc/gcc4 -C --datadir=/usr/share --infodir=/usr/share/info --mandir=/usr/share/man -v --with-gmp=/usr --with-mpfr=/usr --enable-bootstrap --enable-version-specific-runtime-libs --libexecdir=/usr/lib --enable-static --enable-shared --enable-shared-libgcc --disable-__cxa_atexit --with-gnu-ld --with-gnu-as --with-dwarf2 --disable-sjlj-exceptions --enable-languages=ada,c,c++,fortran,java,lto,objc,obj-c++ --enable-graphite --enable-lto --enable-java-awt=gtk --disable-symvers --enable-libjava --program-suffix=-4 --enable-libgomp --enable-libssp --enable-libada --enable-threads=posix --with-arch=i686 --with-tune=generic --enable-libgcj-sublibs CC=gcc-4 CXX=g++-4 CC_FOR_TARGET=gcc-4 CXX_FOR_TARGET=g++-4 GNATMAKE_FOR_TARGET=gnatmake GNATBIND_FOR_TARGET=gnatbind --with-ecj-jar=/usr/share/java/ecj.jar
Thread model: posix
gcc version 4.5.3 (GCC)

user@workstation ~
$ cat test.cc
#include <iostream>
#include <string>

int main(int argc, char *argv[]) {
  char * a = "\"http:\\\\/\\\\/localhostr.com\\\\/files\\\\/.+?\"";
  int t =  std::char_traits<char>::length (a);
  std::cout << t << std::endl;
}

user@workstation ~
$ g++ -g test.cc
test.cc: In function ‘int main(int, char**)’:
test.cc:6:14: warning: deprecated conversion from string constant to ‘char*’

user@workstation ~
$ gdb a.exe
Reading symbols from /home/user/a.exe...done.
(gdb) b std::char_traits<char>::length
Breakpoint 1 at 0x4017f6: file /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/char_traits.h, line 263.
(gdb) r
Starting program: /home/user/a.exe
[New Thread 764.0x5e4]
[New Thread 764.0x100c]

Breakpoint 1, std::char_traits<char>::length (__s=0x402080 "\"http:\\\\/\\\\/localhostr.com\\\\/files\\\\/.+?\"") at /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/char_traits.h:263
263           { return __builtin_strlen(__s); }
(gdb) c
Continuing.
41
[Inferior 1 (process 764) exited normally]
(gdb) 
```

# android - 如何在原始查询中正确定义 SelectArg？

> ID：15411872
> 
> 赞同：4
> 
> 时间：2013-03-14T14:21:32.437
> 
> 标签：android, case, where, ormlite

我需要在查询的 WHERE 条件中实现一个 CASE。我写了以下代码：

```
QueryBuilder<Cars, String> carsQB = carsDao.queryBuilder();
carsQB.selectColumns("id");
carsQB.join(modelsDao.queryBuilder());                          

carsQB.where().raw("CASE WHEN future = true THEN date > ? ELSE endDate > ? END",
    new SelectArg("date"), new SelectArg("endDate")); 
```

但我收到以下错误：

```
E/AndroidRuntime(4599): Caused by: java.lang.IllegalArgumentException:
       Either the column name or SqlType must be set on each argument 
```

date 和 endDate 都是我数据库中的 Date 列。

我错过了什么？有没有更好的方法来实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T17:09:35.267

问题是（不幸的是）调用`new SelectArg(String)`调用[`SelectArg(Object) constructor`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/SelectArg.html#SelectArg%28java.lang.Object%29)设置*值*而不是列名。您应该将参数定义为：

```
new SelectArg("date", null); 
```

回溯，状态的[javadocs`Where.raw()`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/Where.html#raw%28java.lang.String,%20com.j256.ormlite.stmt.ArgumentHolder...%29)：

> args - 对应于任何的可选参数？在 rawStatement 中指定。每个参数必须具有相应的 columnName 或 sql-type 集。

您也可以使用`SqlType`构造函数。我已经改进了文档中的 Javadocs`SelectArg`来帮助解决这个问题。[在 github 上](https://github.com/j256/ormlite-core/commit/1bf01e69763137149fb014fed7ee64474b218a79)查看此更改。

另外，正如我所提到的，我认为您想要执行以下操作：

```
SelectArg dateArg = new SelectArg("date", null);
SelectArg endDateArg = new SelectArg("endDate", null);
carsQB.where().raw("CASE WHEN future = true THEN date > ? ELSE endDate > ? END",
    dateArg, endDateArg);
...
dateArg.setValue(...);
endDateArg.setValue(...); 
```

# clojure - clojure 是否支持按返回类型重载方法？

> ID：15411876
> 
> 赞同：1
> 
> 时间：2013-03-14T14:21:41.910
> 
> 标签：clojure, overloading

当我偶然发现[这两个函数](https://github.com/nathanmarz/storm/blob/0.9.0/src/clj/backtype/storm/scheduler/IsolationScheduler.clj#L21)时，我正在阅读一些风暴代码。它们的名称和参数相同，但看起来它们的返回类型不同。**稍微**简化的代码是：

```
(defn- foo "Returns list of sets of things"
  [^Bar xs]
  (->> ...
       (map set)))

(defn- foo "Returns mutable set of sets of things"
  [^Bar xs]
  (->> ...
       (map set)
       (HashSet.)
       )) 
```

任何人都可以阐明这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:24:04.760

第二个定义覆盖第一个。Clojure 不关心类型。

# java - 从 xml 字符串构建 DOM 文档给了我一个空文档

> ID：15411877
> 
> 赞同：1
> 
> 时间：2013-03-14T14:21:42.163
> 
> 标签：java, xml, string, dom

我正在尝试使用 DOM 库来解析 xml 格式的字符串。由于某种原因，我的文档包含空值，我在尝试解析它时遇到了问题。字符串变量“response”不为空，在调试模式下我可以看到该字符串。

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        InputSource is = new InputSource(new StringReader(response));
        Document doc = builder.parse(is);

        NodeList nodes = doc.getElementsByTagName("BatchFile");;
        for (int i = 0; i < nodes.getLength(); i++) {
            Element element = (Element) nodes.item(i);

            NodeList batchItem = element.getChildNodes();
            String uri = batchItem.item(0).getNodeValue();
            String id = batchItem.item(1).getNodeValue();
            String fqName = batchItem.item(2).getNodeValue();
          } 
```

运行后突出显示该行`Document doc = builder.parse(is);`显示 的结果`[#document: null]`。

编辑：我现在设法没有空文档，但字符串值仍然为空（在代码末尾）。我将如何获得这样的价值

```
 <GetBatchFilesResult>
            <BatchFile>
                <Uri>uri</Uri>
                <ID>id</ID>
                <FQName>file.zip</FQName>
            </BatchFile>

        </GetBatchFilesResult> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:58:33.633

您也可以使用 getTextContent()。getNodeValue 将为元素返回 null。此外，您最好使用 getElementsByTagName，因为空格也被视为子节点之一。

```
Element element = (Element) nodes.item(i);
String uri = element.getElementsByTagName("Uri").item(0).getTextContent();
String id =  element.getElementsByTagName("ID").item(0).getTextContent();
String fqName =  element.getElementsByTagName("FQName").item(0).getTextContent(); 
```

查看[Node API 文档](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html)以查看哪种类型的节点将为 getNodeValue 返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:54:43.783

我找到了解决方案。您必须以这种方式从节点获取值似乎很愚蠢。

```
 Element element = (Element) nodes.item(i);

        NodeList batchItem = element.getChildNodes();
        Element uri = (Element) batchItem.item(0);
        Element id = (Element) batchItem.item(1);
        Element fqName = (Element) batchItem.item(2);
        NodeList test = uri.getChildNodes();
        NodeList test1 = id.getChildNodes();
        NodeList test2 = fqName.getChildNodes();

        String strURI= test.item(0).getNodeValue();
        String strID= test1.item(0).getNodeValue();
        String strFQName= test2.item(0).getNodeValue(); 
```

# xslt - 1行中的动态列数

> ID：15411879
> 
> 赞同：0
> 
> 时间：2013-03-14T14:21:49.177
> 
> 标签：xslt, twitter-bootstrap

我有多个类别，我想将其分成几行，一行中的类别数将基于`$catsInLine`. 是从 1 到 12的`$catsInLine`数字。每个类别将由类从 span1 到 span 12 的 DIV 包装。类别将再次包装`<div class="row-fluid">`每一行。

我在下面尝试了几个小时，但没有得到正确的结果。

```
<div class="row-fluid">
    <xsl:variable name="catsInLine">
        <xsl:value-of select="categories_in_line" />
    </xsl:variable>
    <xsl:variable name="column">
        <xsl:value-of select="(12 div $catsInLine)" />
    </xsl:variable>
    <xsl:for-each select="categories/category">
        <xsl:if test="position() mod $catsInLine = 1 or position() = 1">
            <xsl:text disable-output-escaping="yes">&lt;div class="row-fluid"&gt;</xsl:text>
        </xsl:if>
        <div class="span{$column}">
            <xsl:call-template name="category" />
        </div>
        <xsl:if test="position() mod $catsInLine = 0 or position() = last()">
            <xsl:text disable-output-escaping="yes">&lt;&#47;div&gt;</xsl:text>
        </xsl:if>
    </xsl:for-each>
</div> 
```

假设`$catsInLine`是`2`，我希望得到的结果是

```
<div class="row-fluid">
    <div class="span6">
        <a>Category1</a>
    </div>
    <div class="span6">
        <a>Category2</a>
    </div>
</div>
<div class="row-fluid">
    <div class="span6">
        <a>Category3</a>
    </div>
    <div class="span6">
        <a>Category4</a>
    </div>
</div> 
```

如果`$catsInLine`是`1`，结果应该是

```
<div class="row-fluid">
    <div class="span12">
        <a>Category1</a>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <a>Category2</a>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <a>Category3</a>
    </div>
</div>
<div class="row-fluid">
    <div class="span12">
        <a>Category4</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:39:46.020

请试试这个：

```
<xsl:apply-templates select="categories/category[position() mod $catsInLine = 1 or
                                                 $catsInLine = 1]" 
                     mode="row" />

<!-- Separate template -->
<xsl:template match="category" mode="row">
  <div class="row">
    <xsl:apply-templates 
              select=". | following-sibling::category[position() &lt; $catsInLine]" />
  </div>
</xsl:template> 
```

# javascript - JS 函数不会将确切的值传递给表单

> ID：15411880
> 
> 赞同：0
> 
> 时间：2013-03-14T14:21:50.137
> 
> 标签：javascript, forms

我有这个js函数：

```
function createFormAndSubmit(val){

{% for user in users %}

 var submitForm = document.createElement("form_user_{{ user.id }}");
 document.body.appendChild(submitForm);
 submitForm.method = "POST";

 var newid = document.createElement("input");
 newid.type = "hidden";
 newid.value = "{{ user.id }}";
 submitForm.appendChild(newid);

 var newperm = document.createElement("input");
 newperm.type = "radio";
 newperm.value = val;
 submitForm.appendChild(newperm);

 submitForm.action= "/networks/{{ net.id }}/sensors/{{ sens.id }}/rights";
 document.forms['form_user_{{ user.id }}'].submit();
 //submitForm.submit();

{% end %}

} 
```

它被这个 html 元素调用：

```
{% if users %}

        <tr>
            <td>
              <div>
                <strong>All users</strong>
              </div>
            </td>
            <td>
                <label class="radio inline" onclick="createFormAndSubmit('0');">
                <input type="radio" name="permsall" id="all_0" value="0">
                None
              </label>
              <label class="radio inline" onclick="createFormAndSubmit('1');">
                <input type="radio" name="permsall" id="all_1" value="1">
                Read
              </label>
              <label class="radio inline" onclick="createFormAndSubmit('4');">
                <input type="radio" name="permsall" id="all_4" value="4">
                Read + Commands
              </label>
            </td>

          </tr> 
```

我想将 userid 和 perm（权限）传递给表单，但是如果我打印传递给 Web 服务器的值，我会看到 perm 始终为 0。为什么？js函数的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:26:18.593

在这一行：

`var submitForm = document.createElement("form_user_{{ user.id }}");`

`form_user_{{ user.id }}`不是有效的 html 元素。您需要传递`form`给该`createElement`方法。

# shell - 从文本文件中删除最后 2 个字符：shell 脚本

> ID：15411894
> 
> 赞同：4
> 
> 时间：2013-03-14T14:22:30.517
> 
> 标签：shell, scripting

我需要从 shell 脚本中的文本文件中删除最后 2 个字符。关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T14:26:06.073

**仅**使用删除最后一行的最后两个字符`sed`：

```
$ sed '$s/..$//' file 
```

如果您对更改感到满意，请使用`-i`将它们存储回文件：

```
$ sed -i '$s/..$//' file 
```

如果您想删除**每一**行的最后两个字符，它将是：

```
$ sed 's/..$//' file 
```

再次用于`-i`将更改存储回文件：

```
$ sed -i 's/..$//' file 
```

# apache - Mod-Rewrite REGEX 不工作 Apache

> ID：15411898
> 
> 赞同：1
> 
> 时间：2013-03-14T14:22:36.703
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试使以下工作：

当用户使用搜索框时，get 会将用户发送到`www.example.com/search/?s=Query+String`

发送 GET 请求不是问题，但是，通过`RewriteRule`is 获取它。我不确定我的 REGEX 在这种情况下是否合适。

```
RewriteRule ^search/\?s=(.*[^/])$ search.php?s=$1 [NC,L] 
```

需要发生的是`/search/?s=Query+String`必须从该 url 获取查询字符串部分并`search.php?s=Query+String`通过重写规则发送到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:25:24.170

来自请求的查询字符串存储在变量中`%{QUERY_STRING}`。规则使用`%{REQUEST_URI}`. 只需使用`QSA`标志：

```
RewriteRule ^search/?$ search.php [NC,L,QSA] 
```

[在这里](http://htaccess.madewithlove.be/)测试。

# android - TCP数据传输不好

> ID：15411901
> 
> 赞同：1
> 
> 时间：2013-03-14T14:22:43.627
> 
> 标签：android, tcp

我不知道这是否真的是一个问题，但我创建了一个应用程序，通过 wifi 或便携式热点控制计算机上的鼠标光标。问题是：当我用 wifi 接入点连接我的电脑和我的安卓设备时，光标移动不如我将电脑连接到安卓设备的便携式热点时流畅。我尝试了两部不同的安卓手机，也遇到了同样的问题。以下是我在应用程序上使用的 TCP 代码：

```
 @Override
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction();

    switch (action) {
    case MotionEvent.ACTION_DOWN:

        xStart = event.getRawX();
        yStart = event.getRawY();
        if (mess.equals("click")) {
            mess="leftdown";
        }
        break;

    case MotionEvent.ACTION_MOVE:
        xMove = event.getRawX();
        yMove = event.getRawY();
        distanceX = (xStart - xMove);
        distanceY = (yStart - yMove);
        sendCmd(distanceX, distanceY);
        xStart = xMove;
        yStart = yMove;
        mess="move";
        sendMess(mess);
        break;

    case MotionEvent.ACTION_UP:
        break;
    }
    return detector.onTouchEvent(event);
}

void sendCmd(float distanceX, float distanceY) {
    try {
        out.writeFloat(distanceX);
        out.writeFloat(distanceY);

    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

void sendMess(String mess) {
    try {
        out.writeUTF(mess);

    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

这是我在服务器上使用的 TCP 代码

```
 @Override
public void run() {

    // System.out.println("Connected");
    // pixel, velocity

    float x = 0, y = 0;
    try {

        Robot mouse = new Robot();
        PointerInfo a;

        Point b;
        String mess;
        int xx, yy;

        DataInputStream in = new DataInputStream(server.getInputStream());
        x = in.readFloat();
        y = in.readFloat();
        mess = in.readUTF();
        System.out.println(x + "-" + y);
        if (mess.equals("click")) {
            mouse.mousePress(InputEvent.BUTTON1_MASK);
            mouse.mouseRelease(InputEvent.BUTTON1_MASK);

        } else if (mess.equals("scroll")) {

        } else if (mess.equals("leftdown")) {
            mouse.mousePress(InputEvent.BUTTON1_MASK);
        } else if (mess.equals("leftup")) {
            mouse.mouseRelease(InputEvent.BUTTON1_MASK);
        } else if (mess.equals("right")) {
            mouse.mousePress(InputEvent.BUTTON3_MASK);
            mouse.mouseRelease(InputEvent.BUTTON3_MASK);
        } else if (mess.equals("move")) {
            a = MouseInfo.getPointerInfo();
            b = a.getLocation();
            xx = (int) b.getX();
            yy = (int) b.getY();
            mouse.mouseMove(xx - (int) x, yy - (int) y);
            mouse.delay(7);
        }
    } catch (Exception e) {
        // TODO: handle exception
    }
} 
```

由于某些特殊原因，请原谅我无法在我的 java 文件中发布整个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:10:47.853

您不应该期望 TCP 的低延迟行为，因为它不是为此目的而设计的。

实际上，称为 nagle 算法的东西通常会增加延迟以提高批量效率。您可能有能力在某些系统上禁用它，但在其他系统上则不能 - 通常您需要在连接的两端都这样做以避免由此产生的延迟。

此外，wifi 网络不保证延迟，因此您可以看到差异很大。诸如接入点的实施细节之类的事情会改变效率，RF 环境也是如此——我已经看到该国的延迟远低于大城市的中心。此外，当您使用手机作为接入点时，您会限制所需的 wifi 行程次数 - 而不是手机接入点计算机，它只是手机计算机。

所以你可能会看的东西：

*   切换到UDP而不是TCP，并实现自己的低延迟可靠性（ack/resend）机制
*   选择没有其他用户的 wifi 频道（如果可能）
*   如果您必须继续使用 TCP，请禁用 nagle
*   在接入点模式下使用手机（尽管这可能是不可取的，因为您可能不希望 PC 的其他流量以这种方式进行）
*   使用蓝牙代替wifi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:15:35.143

我尝试使用 UDP 方法，但客户端有时会丢失数据包，这会导致我的服务器出现一些错误。几个小时后，我找到了一个适合我的解决方案，我不确定它是否适用于其他人。对客户端套接字和服务器套接字使用 setTcpNoDelay()。

# c# - 表单关闭后触发：button.performclick

> ID：15411903
> 
> 赞同：1
> 
> 时间：2013-03-14T14:22:51.160
> 
> 标签：c#

请帮我解决按钮执行点击后关闭表单的问题，因为我只依赖窗口关闭按钮（右上角），我不使用额外的按钮来关闭表单。但是，该程序仍在运行，但在保存 .ini 文件后不会立即自动关闭表单。

我想关闭表单...在 button1.performclick() 之后，但我不知道该怎么做..

我有以下代码：

```
 int beFore, afTer;
    private void Form3_Load(object sender, EventArgs e)
    {
        beFore = this.checkedListBox1.CheckedIndices.Count +
                 this.checkedListBox2.CheckedIndices.Count +
                 this.checkedListBox3.CheckedIndices.Count +
                 this.checkedListBox4.CheckedIndices.Count;
    }
    //private Form4 subForm4 = new Form4();
    private void Form3_FormClosing(object sender, FormClosingEventArgs e)
    {
        afTer = this.checkedListBox1.CheckedIndices.Count +
                this.checkedListBox2.CheckedIndices.Count +
                this.checkedListBox3.CheckedIndices.Count +
                this.checkedListBox4.CheckedIndices.Count;
        while (beFore != afTer)
        {
            if (MessageBox.Show("Changes have been made..\r\nSave to configuration file (.ini) ?", "Warning",
                 MessageBoxButtons.YesNo, MessageBoxIcon.Warning) == DialogResult.Yes)
            {
                this.button1.PerformClick(); //need to close this form after button.performclick..
                this.UpdateForm1();
                break;
            }
            else
            {
                this.UpdateForm1();
                break;
            }
        }
        beFore = afTer;

    }

    private void UpdateForm1()
    {
        Form4 subForm4 = new Form4();
        subForm4.Show();
        subForm4.Update();
        try
        {
            int checkagain1 = this.checkedListBox1.CheckedIndices.Count; this.checkedListBox1.SetItemChecked(2, true);
            int checkagain2 = this.checkedListBox2.CheckedIndices.Count; this.checkedListBox2.SetItemChecked(2, true);
            int checkagain3 = this.checkedListBox3.CheckedIndices.Count; this.checkedListBox3.SetItemChecked(2, true);
            int checkagain4 = this.checkedListBox4.CheckedIndices.Count; this.checkedListBox4.SetItemChecked(2, true);

            Form1 myParentForm = (Form1)this.Owner;
            if (myParentForm.comboBox1.Text.Length != 0)
            {
                //myParentForm.Enabled = false;
                myParentForm.method1();
                myParentForm.method2();
                myParentForm.method3();
                myParentForm.method4();
                //myParentForm.Enabled = true;
                subForm4.Close();
            }

        }
        catch (Exception)
        {
            subForm4.Close();
            return;
            throw;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:28:41.420

我不是 100% 确定您想要什么，但我很确定您正在寻找的答案在表单的 DialogResult 属性中。

如果您的问题是当您单击某个按钮时正在关闭表单，请为表单的 DialogResult 属性设置 DialogResult.None。

```
DialogResult = DialogResult.None; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:47:40.937

我没有正确理解您，但如果您想在结果为“是”的情况下关闭表单，您可以这样做。

```
if (MessageBox.Show("Changes have been made..\r\nSave to configuration file (.ini) ?", "Warning",
                 MessageBoxButtons.YesNo, MessageBoxIcon.Warning) == DialogResult.Yes)
            {
                this.Dispose();
                this.Close();
            } 
```

其中 Dispose 清理程序使用的所有资源然后关闭它，或者 Close 直接关闭窗体

或尝试这样做，如果你想要这样：

```
 private void button1_Click(object sender, EventArgs e)
        {
            this.Dispose();
            this.Close();
        }

    if (MessageBox.Show("Changes have been made..\r\nSave to configuration file (.ini) ?", "Warning",
                     MessageBoxButtons.YesNo, MessageBoxIcon.Warning) == DialogResult.Yes)
                {
                    button1.PerformClick();
                } 
```

# java - JPanel 中使用 Miglayout 的多个 JTable

> ID：15411906
> 
> 赞同：2
> 
> 时间：2013-03-14T14:22:54.410
> 
> 标签：java, swing, jtable, miglayout

我是 MigLayout 的初学者，所以我需要在一个 JPanel 中添加多个 JTable，但是当我尝试添加多个表时，只会出现最后一个表，而其他表只标记为 JScrollPane 边框。我的代码在下面。

```
 Test() {
    //Panels
    JPanel globalPanel = new JPanel(new MigLayout("fillx","[]","[]50[]"));
    JPanel topPanel = new JPanel (new MigLayout("fillx","40px[]15[grow]","40px[]"));
    JPanel tablePanel = new JPanel (new MigLayout("fillx","[center]","[]"));
    //Components
    JComboBox boxProj;
    JTable table;
    JScrollPane scroll;

    //Top Panel        
    topPanel.add(new JLabel("Project Name:"));
    String listString[] = {"test"};
    boxProj= new JComboBox(listString);
    topPanel.add(boxProj);

    //Table Panel
    //Tables
    table = new JTable();
    createTable(table); //my table

    //Adding Multiples Tables
    tablePanel.add( new JScrollPane(table),"growx,wrap,hmax 300");
    tablePanel.add( new JScrollPane(table),"growx,wrap,hmax 300");

    //Scroll to TablePanel
    scroll = new JScrollPane(tablePanel);
    scroll.setBorder(BorderFactory.createTitledBorder(null, "Project", TitledBorder.LEFT, TitledBorder.TOP, new Font("null", Font.BOLD, 12), Color.BLACK));
    scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    //Global Panel
    globalPanel.add(topPanel, "dock north");
    JSeparator separator = new JSeparator();
    globalPanel.add(separator,"growx");
    globalPanel.add(scroll,"dock south, growx");

    getContentPane().add(globalPanel);
    pack();
    setSize(1024,768);
} 
```

如果我犯了一些错误，请纠正我。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:31:40.583

任何 Swing 组件只能有一个父级。在这里，您将相同的内容添加`JTable`到 2 个不同的`JScrollPane`容器中。结果是只显示最后一个。要出现 2 个`JTable`组件，您必须创建 2 个单独的组件。

```
table2 = new JTable();
...
tablePanel.add(new JScrollPane(table2), "growx,wrap,hmax 300"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:41:14.150

看起来您正在尝试两次添加相同的组件。您只能在一个容器中看到一个组件：

表 = 新的 JTable(); 创建表（表）；//我的表

```
//Adding Multiples Tables
tablePanel.add( new JScrollPane(table),"growx,wrap,hmax 300");
tablePanel.add( new JScrollPane(table),"growx,wrap,hmax 300"); 
```

尝试：

```
JTable table1 = new JTable();
JTable table2 = new JTable();
createTable(table1); //my table
createTable(table2);

//Adding Multiples Tables
tablePanel.add( new JScrollPane(table1),"growx,wrap,hmax 300");
tablePanel.add( new JScrollPane(table2),"growx,wrap,hmax 300"); 
```

# input - VHDL：计算输入值未注册最终输入

> ID：15411907
> 
> 赞同：0
> 
> 时间：2013-03-14T14:23:00.563
> 
> 标签：input, sum, vhdl

我正在开发一个 vhdl 模块。

我想总结 6 个时钟周期的输入值，然后根据是否达到阈值设置输出高或低。

我遇到的问题是，在最后一个时钟周期，总和值没有添加最终输入值。我需要在时钟的上升沿输出高电平。

这是代码：

```
architecture Behavioral of inputCounter is

signal totalBitWidth     : integer := 6;

-- This signal is specified by the user to determine the majority value
-- for the output.
signal majorityValue     : integer := 4;
signal Sum : integer := 0;

process(clk, input)
    variable clkCount     : integer := 0;
begin
    if input = '1' then
        Sum <= Sum + 1;
    else
        Sum <= Sum + 0;
    end if;

    clkCount := clkCount + 1;

    if clkCount >= (totalBitWidth) then
    -- Determine if the majoritySum variable has met the
    -- threshold for a 1 value
    if Sum >= majorityValue then
    output <= '1';
    else
    output <= '0';
    end if;

    if Sum = totalBitWidth Or Sum = 0 then
    countError <= '0';
    else
    countError <= '1';
    end if;

    -- Reset the clock counter, sum value and majority vector
    clkCount := 0;
    Sum <= 0;

    -- Set the bit counter high to alert other midules that a new bit
    -- has been received
    bitReady <= '1';
end process;
end behavioral; 
```

如果您需要更多信息，请告诉我。谢谢您的帮助。

更新：我在搞乱总和整数，并将其更改为过程中的变量，而不是体系结构中的整体信号。这似乎奏效了。但由于我使用的是 ISim 和 ISE Project navigator，我无法从流程中跟踪变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:26:58.310

解决方案是将我的信号更改为过程中的变量。

这是我的代码：

```
 architecture Behavioral of inputCounter is

signal totalBitWidth     : integer := 6;

signal majorityValue     : integer := 4;
-- This signal is to trace the variable sum
signal SumS              : integer := 0;

begin

-- Process for recognizing a single input value from a 6 clock cycle
-- wide input signal
majority_proc: process(clk, input)
    variable clkCount     : integer := 0;
    variable Sum  : integer := 0;

    begin

        if rising_edge(clk) And enable = '1' then
            -- Reset bitReady after one clock cycle
            bitReady <= '0';

            -- Check the input value and add it to the Sum variable
            if input = '1' then
                Sum := Sum + 1;
            else
                Sum := Sum + 0;
            end if;

            -- Increment the clock counter variable
            clkCount := clkCount + 1;

            -- Check if the clock count has reached the specified number of cycles
            if clkCount >= totalBitWidth then
                -- Determine if the Sum variable has met the threshold for
                -- value of 1, set the output accordingly
                if Sum >= majorityValue then
                    output <= '1';
                else
                    output <= '0';
                end if;

                -- This checks if the value for all clock cycles was the same and
                -- sets an error flag if not
                if Sum = totalBitWidth Or Sum = 0 then
                    countError <= '0';
                else
                    countError <= '1';
                end if;

                -- Reset the clock counter and sum value
                clkCount := 0;
                Sum := 0;

                -- Set the bit counter high to alert other midules that a new bit
                -- has been received
                bitReady <= '1';
            end if;
        end if;

        -- Assign the variable Sum to the signal SumS
        SumS <= Sum;
end process;

end Behavioral; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:01:02.953

如果您必须在获得最后一个输入的同一时钟周期结束时更改输出，则需要将累加器寄存器和加法器分开。将累加器寄存器和输出比较逻辑放入您的进程中，并将加法器拉入异步逻辑。缩写示例代码：

```
process (clk)
  if rising_edge(clk) and enable='1' then
    accumulator <= sum;
    if sum >= majorityValue then
      output <= '1';
    else
      output <= '0';
    end if;
  end if;
end process;

sum <= accumulator + 1 when input='1' else accumulator; 
```

# mule - 如何在 Mule 消息上设置出站属性

> ID：15411909
> 
> 赞同：2
> 
> 时间：2013-03-14T14:23:14.670
> 
> 标签：mule

在我看来，`<set-property>`它只设置入站属性（对吗？）。我该如何设置`outbound property`，旨在将其携带穿过运输障碍，然后用于`<copy-properties>`将其从入站复制到出站。

我不想设置会话变量在出站端点的流中丢失

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:44:40.593

`set-property`添加出站消息属性。如果要检查所有消息属性，请使用`logger`组件，或者可以使用带有可视流调试器的 Mule 3.4.0 (Beta)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:17:12.873

Set-variable 设置 INVOCATION 范围内的属性。

使用消息属性转换器在不同的范围内添加变量。

# c - 用 argc 和 argv[] 构建一个尾部程序

> ID：15411910
> 
> 赞同：0
> 
> 时间：2013-03-14T14:23:17.310
> 
> 标签：c, tail, argv, argc

练习要求一个带有 argc 和 argv[] 的尾部程序。它将有特定数量的行。用户将输入一个 N 参数，然后程序将打印最后 n 行。当我从 cmd 调用这个程序作为 tail 3程序名称程序打开但它不打印任何东西。这是代码。

```
#include <stdio.h>
int main (int argc,char *argv[])
{
    char *linja[]={"Mjeshter Ciko", "Sisteme Elektronike" , "Bisha" , "Super Mario Bros" , "Pallim Gjoni"};
    int i=0;
    if (argc!=3)
    {
               printf("Your Request can't be completed\n");
               printf("The format is Tail X Program Name\n");
               return -1;
               }
    if(*argv[1] <= 4)
    {
                printf("The Last Lines Are: \n");
                for(i=4 ;*argv[1]>=0; i--,*argv[1]--)
                {
                        printf("%s\n",linja[i]);
                        }
                        }
                        return 0;
                        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:26:42.297

表达式`*argv[1] <= 4`将是错误的。`argv[1]`是一个*字符串*，并且`*argv[1]`是该字符串的第一个字符。您必须将数字的文本表示形式转换为正确的数字。

试试吧`strtol(argv[1], NULL, 10) <= 4`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:28:04.810

在比较之前，您必须将字符串转换为整数。所以这一行：

```
if(*argv[1] <= 4) 
```

正在比较第一个字符串的地址是否小于 4，这不是您想要的。

[使用strtol](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strtol.html)将字符串转换为整数：

```
char *endptr;
    long N = strtol(argv[1], &endptr, 10);
    /* error checking for conversion failure*/ 
```

然后比较：

```
if(N <= 4) 
```

您的 for 循环条件中存在同样的问题。

# c++ - 尝试连接两个字符串时出错

> ID：15411911
> 
> 赞同：3
> 
> 时间：2013-03-14T14:23:17.990
> 
> 标签：c++

我有两个字符串，我想连接它们，所以，我使用了这段代码 `char* a = "Hel"; char* b = "lo"; strcat(a,b);`，但是当我运行我的应用程序时它显示了这个错误`Access violating writing location`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T14:24:54.683

它们都是 (`a`和`b`) 字符串文字——你不能给它们写信。事实上，你根本不应该使用`char *a = "Hel";`- 你应该使用`char const *a = "Hel";`，在这种情况下代码甚至不会编译。

尝试这样的事情：

```
std::string a = "Hel";
std::string b = "lo";

std::string c = a + b; 
```

`strcat`在 C++ 中（即使使用正确）充其量是高度怀疑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:25:39.950

`a`指向一个无法修改的文字，除此之外，还`strcat`需要目标中的空间来附加`src`字符串。正如 Jerry 所提到的，您可以使用`std::string`它使事情变得更简单。如果你需要使用，`char *`那么你可以这样：

```
char str[20] ;

strcat( str, "Hel" ) ;
strcat( str, "lo" ) ; 
```

虽然，没有一个老式的`C`字符串方法真的很好用，除非你这样做只是为了学习。如果您打算大量使用它们，您应该至少阅读几篇关于[C 和 C++ 中的安全编码的文章：C-Style Strings](http://www.sei.cmu.edu/library/abstracts/news-at-sei/feature120061.cfm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:28:01.023

只是扩展杰里科芬所说的话。

非`std::string`解决方案类似于：

```
char str[10];
strcpy(str,"Hel");
strcat(str,"lo"); 
```

不过`std::string`一般比较好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T14:29:31.727

第一个声明使“a”成为指向四个内存字节的指针变量，其中包含字符“H”、“e”、“l”和字节 0。strcat 将“l”写入第四位，覆盖零字节，然后将'o'放入第四个字节之后的位置。内存中的那个地方不是你可以写的，所以你会得到一个错误。相反，请确保目的地有足够的空间来保存连接的字符串。如果可能，不要单独使用 strcat，而是使用更安全的东西，比如 strncat。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T14:29:56.373

请参阅这些资源之一。

[http://www.cplusplus.com/reference/cstring/strcat/](http://www.cplusplus.com/reference/cstring/strcat/)

您应该尽可能多地使用 cplusplus.com 上的参考页面。

还有手册页： `man strcat`如果您在 Unix 系统中，则来自 Unix 命令行，尽管它们可以在网上找到。

# c# - Irony 中的简单语法无法按预期工作

> ID：15411913
> 
> 赞同：1
> 
> 时间：2013-03-14T14:23:23.567
> 
> 标签：c#, xml-parsing, irony

我一直在尝试使用 Irony 来解析一些 XML 代码。我将语法定义如下：

```
this.Root = tagList;
tagList.Rule = this.MakeStarRule(tagList, tag);
tag.Rule = conditionBlock;

ifTagOpen.Rule = <  + "a" + "condition" + equals + "'i'" + >;
ifTagClose.Rule = <  + slash + "a" + >;
elseIfTag.Rule = <  + "b" + "a" + equals + "'i'" + >;
elseTagClose.Rule = <  + slash + "a" + >;

conditionBlock.Rule = ifTagOpen + ifTagCloseElseIf | ifTagOpen + tag + ifTagCloseElseIf;
elseIfTagBlock.Rule = elseIfTag + elseTagClose;
ifTagCloseElseIf.Rule = ifTagClose | ifTagClose + elseIfTagBlock | Empty; 
```

现在，当我尝试解析这样的东西时： `<a condition ='i'><a condition ='i'></a><b a='i'></b></a>` 它工作正常（如预期的那样）。

但是，当我尝试这样的事情时： `<a condition ='i'><a condition ='i'></a></a>` 它不起作用，它告诉我它期望`<b a='i'>`在第一个`</a>`.

如果我错了，请纠正我，但这不应该也是可解析的吗？最后一条规则的第一个产生式明确表示不必有`<b a='i'>`after `</a>`。我怀疑在解析器在第一个之后遇到另一个“<”之后，`</a>`它会尝试应用最后一条规则 ifTagClose + elseIfTagBlock 的第二个产生，因此期望`<b a='i'>`. 我很确定问题出在开头的“<”上，因为当我从所有终端的开头删除它时，它会按预期工作。

除了自定义解析操作之外，是否有任何解决方法？或者任何其他 c# 解析引擎知道如何处理这个问题？

# ios - 在 viewController 之间跳转时出错

> ID：15411916
> 
> 赞同：0
> 
> 时间：2013-03-14T14:23:25.993
> 
> 标签：ios, xcode, loops, storyboard, viewcontroller

这个有一些困难。我正在从 plist 加载问题、答案和正确答案。所有数据都被很好地读取，如下所示

```
- (void)viewDidLoad
{
[super viewDidLoad];
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]];   
 currentQuestion = -1;
[self showNextQuestion];
}
-(void) showNextQuestion{
        currentQuestion++;
   int numItems = [rootArray count];
    NSMutableArray *question = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *A = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *B = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *C = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *addimage = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *Answer = [NSMutableArray arrayWithCapacity:numItems];
   for (NSDictionary *itemData in rootArray) {
    [question addObject:[itemData objectForKey:@"question"]];
    [A addObject:[itemData objectForKey:@"A"]];
    [B addObject:[itemData objectForKey:@"B"]];
    [C addObject:[itemData objectForKey:@"C"]];
    [addimage addObject:[itemData objectForKey:@"ImageUse"]];
    [Answer addObject:[itemData objectForKey:@"ANS"]];
}
self.questionasked.text = question[currentQuestion];
self.answer1.text = A[currentQuestion];
self.answer2.text = B[currentQuestion];
self.answer3.text = C[currentQuestion];
additionImage.image = [UIImage imageNamed:addimage[currentQuestion]];
self.correctAns = Answer[currentQuestion];
if(currentQuestion == 4){
   [ self performSegueWithIdentifier:@"levelclear" sender:nil];// here I am performing a segue to indicate that when 4 questions are displayed it will go to this view controller
}
} 
```

我的 VC 中有 3 个按钮，每个选项 A、B、C 一个，它们都有一个功能

```
- (IBAction)SelectA:(id)sender {
if ([self.correctAns isEqualToString:@"A"]) {
    currentQuestion ++;
    [self showNextQuestion];
}
else{
    [self performSegueWithIdentifier:@"incorrect" sender:nil];
}
}
- (IBAction)SelectB:(id)sender {

if ([self.correctAns isEqualToString:@"B"]) {
    currentQuestion ++;
[self showNextQuestion];
}
else{
    [self performSegueWithIdentifier:@"incorrect" sender:nil];

}
}
- (IBAction)SelectC:(id)sender {

if ([self.correctAns isEqualToString:@"C"]) {
    currentQuestion ++;
[self showNextQuestion];
}
else{
    [self performSegueWithIdentifier:@"incorrect" sender:nil];
}
} 
```

当我正确回答问题时，它会转到下一个问题。但是，当我回答错误时，它会转到错误的 VC，通知错误的问题。当按下按钮返回问题 VC（我在情节提要中制作）时，此 VC 有一个转场。它确实回到了问题 VC，但只是跳回到了第一个问题。我知道这与 currentQuestion 有关，但不确定是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:39:36.057

看起来当你选择不正确的答案时，你正在破坏问题视图控制器，当你回到它时，它会被重新创建。

# silverlight - Silverlight 中 MergedDictionary 中的主题在设计时不起作用

> ID：15411917
> 
> 赞同：2
> 
> 时间：2013-03-14T14:23:27.623
> 
> 标签：silverlight, resources, themes

好的，这让我发疯了。我有一个 Silverlight 5 项目。不久前，我们决定为我们的项目设置主题，只是为了让它更流行。我找到了一个主题实现并继续前进。

首先，我使用了 Silverlight Toolkit 中的 .Theming 命名空间。我使用了显式构建的theme.dll。但这有一个缺点，就是我没有自定义主题的能力。所以我决定只使用theme.xaml，并通过使用.xaml 来实现它`<MergedDictionaries>`。

但是，这种方法的问题是我失去了在设计时看到主题的能力。在运行时它工作正常。但这还不够好，当我不想自定义主题时。

我通过在 App.Xaml 中使用合并字典来实现主题，就像这样

```
 <Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/eCP;component/Themes/WhistlerBlue.xaml"/>
        </ResourceDictionary.MergedDictionaries>
        <vm:ViewModelLocator x:Key="ViewModelLocator"/>
    </ResourceDictionary>
   </Application.Resources> 
```

如果我在我的 MainPage 中放置相同的块，则主题会在设计时立即打开。但不是必须在每个 Silverlight 页面上都这样做吗？

简而言之：如果我在 App.xaml 中使用 MergedDictionaries 实现主题，则它在设计时不起作用。如果我在特定页面上执行此操作，它确实有效。

有趣的是，如果我在 Expression Blend 中打开我的项目，它在设计时可以正常工作。

我的第一个想法是，我的 Visual Studio 2010 SP1 出现了问题。也许隐藏项目文件中的某些内容或其他内容，但我不知道。

有谁能帮忙吗？

# c# - 如何在 Windows 8 应用程序上定义图像插值质量？

> ID：15411919
> 
> 赞同：1
> 
> 时间：2013-03-14T14:23:31.183
> 
> 标签：c#, .net, windows-runtime, bitmapimage

我正在制作一个 Windows 8 应用程序。

我有一个 ScrollViewer，里面有一个 Image。源图真的很大，用 Image 渲染真的很糟糕（因为 Image 真的比源图小，所以缩放让结果很难看）。

这是我设置源图像的方式：

```
var baseUri = new Uri("ms-appx:///");
var bitmapImage = new BitmapImage(new Uri(baseUri, CurrentLocalization.MapPath));
MapImage.Source = bitmapImage; 
```

我的问题是：如何设置图像的插值质量以获得更好的渲染？我没有找到任何 ScalingMode 选项或 InterpolationQuality ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:38:26.663

您需要使用 DirectX 或 SharpDX 来获得这样的结果。

# jquery - Div 使用 jquery 获取颜色并在单击时丢失

> ID：15411920
> 
> 赞同：0
> 
> 时间：2013-03-14T14:23:31.837
> 
> 标签：jquery, html, css

人们

在这里，我有一个用于评级（劣势、平均、优势）的 JS 代码和所有这些参数的按钮。

但是我有一个问题，当我点击劣势、平均和优势按钮时，如果之前在这些按钮上点击过，它必须失去颜色，如果我点击平均或优势也是一样的，因为其他按钮必须失去颜色并且只有单击的按钮以获取颜色。问题出在某个地方。我将代码放在一个 jsfiddle 中：

[http://jsfiddle.net/mwsvP/](http://jsfiddle.net/mwsvP/)

```
$(".ca_button, .ca_button1").click(function () {

    $this = $(this);

    if ($this.is("a")) {
        $this = $this.parent();
    }

    $par = $this.parent();

    $par.find(".ca_button, .ca_button1").css("background-color", "#bababa");

    if ($(this).hasClass("ca_button1")) {
        $this.find("a").css("background-color", "#0F0");
    } else {
        $this.find("a").css("background-color", "#F00");
    }

    return false;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:26:10.660

我认为问题在于你定义这个变量的方式：

```
$this = $(this); 
```

如果你这样做应该会更好：

```
var t = $(this); 
```

然后`t`在你现在使用的任何地方使用`$this`.

```
$(".ca_button, .ca_button1").click(function () {

    var t = $(this);

    if (t.is("a")) {
        t = t.parent();
    }

    $par = t.parent();

    $par.find(".ca_button, .ca_button1").css("background-color", "#bababa");

    if ($(this).hasClass("ca_button1")) {
        t.find("a").css("background-color", "#0F0");
    } else {
        t.find("a").css("background-color", "#F00");
    }

    return false;

}); 
```

这是您更新的 jsFiddle：http: [//jsfiddle.net/mwsvP/2/](http://jsfiddle.net/mwsvP/2/)

# jquery - 为什么事件没有触发动画？

> ID：15411921
> 
> 赞同：0
> 
> 时间：2013-03-14T14:23:32.523
> 
> 标签：jquery, html, css

当我网站上的用户决定一个接一个地快速单击按钮时，我遇到了一些动画问题。所以如果我按下 btn2 然后 btn1 快速 btn2 动画发生 btn1 看起来按下但动画没有发生。会是什么呢？

HTML：

```
<div id="grid-container" class="is-active">
    <div id="pager"></div>
    <div id="myGrid" style="height:500px;"><img src="<?php echo bloginfo( 'stylesheet_directory' ) . "/images/loading.gif"; ?>"/></div>
</div><!-- grid-container -->
<div id="chart-wrapper">
     <div class='arrow-right'></div>
     <div id='sel-msg'> 
          <h3>Hey there!</h3>
          <p>There's no graph here yet because we don't know what fields you'd like to see plotted.</p>
          <p>Please <strong>use the menu on the left</strong> and a graph will automatically appear.</p>
     </div>
     <div id="data-chart"></div>                
     </div><!-- graph-container -->
<div id="map-wrapper"></div>
<!-- map-container gets appended dynamically --> 
```

CSS：

```
#grid-container{
    overflow: hidden;
    min-height: 100%;   
}

#chart-wrapper{
    overflow: hidden;
    background-color: red;
    width: 100%;
    display: none;
    min-height: 500px;
}

#map-wrapper{
    overflow: hidden;
    display: none;
    width: 100%;
}

#map-container{
    overflow: hidden;
    position: relative;
    height: 500px;
    width: 100%;
} 
```

查询：

```
$('.btn').on('click',function(e){
        var active = $('#content-container').find('div.is-active').attr('id');
        var old_btn = $('#top-btn-group').find('a.btn-active').attr('id');
        var pressed = $(this).attr('id');

        $('#'+old_btn).removeClass('btn-active');
        $('#'+pressed).addClass('btn-active');

        $('#'+active).removeClass('is-active');
        //console.log(active);

        //hide active container
        $('#content-controls-container > div > div:visible').slideUp(300);

        $('#'+active).slideUp(300,function(){
            //remove the map container to allow a redraw of the map         
            if($('#map-container').length){
                $('#map-container').remove();

            }
            if(pressed == 'grid-btn'){              
                $('#grid-container').addClass('is-active');         
                $('#grid-container').slideDown(300);                                    
            }                       
            if(pressed == 'graph-btn'){
                $('#chart-wrapper').addClass('is-active');
                /*if($('#sel-msg, .arrow-right').length){
                    $('#sel-msg, .arrow-right').slideDown(500);                 
                }*/                                     
                $('#chart-wrapper').slideDown(500);                                 
                $('#chart-controls-wrapper').slideDown(300);                            
            }   
            if(pressed == 'map-btn'){
                if(!$('#map-container').length){
                    $('#map-wrapper').addClass('is-active');
                    $('#map-wrapper').append($('<div>').attr({id:"map-container"}));        
                    $('#map-controls-wrapper').slideDown(300);  
                    $('#map-wrapper').slideDown(300, function(){doMap();});
                }           
            }       
        });
        console.log(old_btn);
        console.log(pressed);
}); 
```

谢谢

# android - Android UniversalImageLoader 在不无线时加载较小的图像

> ID：15411926
> 
> 赞同：0
> 
> 时间：2013-03-14T14:23:48.963
> 
> 标签：android, universal-image-loader

我正在使用通用图像加载器加载一个 95KB 的图像，尺寸为 1024x683。当我在无线时，图像加载得很好。但是，如果我关闭无线并使用手机的网络，它会以 305x203 的分辨率下载图像。

这是我的配置：

```
// setup the image async loader
DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
    .cacheInMemory()
    .cacheOnDisc()
    .build();
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())
    .defaultDisplayImageOptions(defaultOptions)
    .build();
ImageLoader.getInstance().init(config); 
```

这是下载：

```
ImageLoader.getInstance().displayImage(imageUrl, imageView, new SimpleImageLoadingListener() {
    @Override
    public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
        super.onLoadingComplete(imageUri, view, loadedImage);
        android.util.Log.v("image size", String.valueOf(loadedImage.getWidth())+" x "+String.valueOf(loadedImage.getHeight()));
    }
}); 
```

我试过删除 cacheInMemory。我尝试使用 loadImage 并指定目标大小，但它仍然以较小的大小下载。我尝试更改图像比例类型，使用 NONE 和 EXACTLY，没有变化。

我觉得我错过了一些明显的东西，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:57:34.297

不知道 UniversalImageLoader 究竟做了什么，但也许它是负责任的。您可以通过使用两种连接类型（WiFi 和移动）的普通 AndroidHttpClient 连接下载图像，然后比较它们的实际大小来找出答案。

这种现象也可能由于网络运营商的重新格式化代理而发生，该代理会在您不知情或未请求的情况下检测到您的移动设备的用户代理并缩小图像。我知道这听起来很奇怪，但那些事情发生了。您可以发现这种情况，但尝试使用不同的提供商（更改 sim 卡）或尝试更改 http 用户代理的设置（假装是完整的桌面 Firefox）。

祝你好运！

# java - 在 Java 中编辑距离库，支持用户成本函数

> ID：15411928
> 
> 赞同：2
> 
> 时间：2013-03-14T14:24:00.223
> 
> 标签：java, levenshtein-distance

Java 有相当多的编辑距离实现。但是，它们大多专门实现 Levenshtein 距离，即任何替换成本为 2、任何插入：1 和任何删除：1\. 是否有一个现有的库，我可以在其中提供不同的编辑成本，例如替换“用“n”替换“m”的成本低于用“a”替换“m”的成本？

# c# - 从 .Net 更新 iSeries DATE/TIME/TIMESTAMP 列

> ID：15411934
> 
> 赞同：2
> 
> 时间：2013-03-14T14:24:10.380
> 
> 标签：c#, orm, entity-framework-4, db2, ibm-midrange

我有一个使用 EF4 以及 DB2 LUW 和 iSeries 的 .Net 应用程序。

当我们在 DB2 上运行命令时，我们将原始命令克隆到新的 iDB2Command 中，复制参数并运行。这一切都很好，直到我们进入`DATE`专栏。在这一点上，AS400 或驱动程序似乎跌倒了：它得到一个参数，说它是 a `DbTypes.DateTime`，并包含一个 DateTime 对象，但列是`DATE`。

返回的错误（在 LUW 上）如下。AS400 (v6r1m0) 返回的措辞略有不同

> **`ERROR [22008] [IBM] CLI0114E Datetime field overflow. SQLSTATE=22008`**

代码看起来像这样（并且完全与 iSeries/DB2-LUW 无关）

```
// all generic System.Data classes, no iDB2Connection datatype.  The driver isn't even
// installed on dev/build machines at this point.  We rely on .Net reading the connection
// string from App.config to create the proper DB Driver (db2-luw or iSeries)

DbConnection c = ... get connection from somewhere...
DbCommand  cmd = c.CreateCommand();

var p = cmd.CreateParameter();
p.ParamterName = "V_XXX_XXX";
p.DbType = DbTypes.DateTime;
p.Value  = DateTime.Now;
cmd.AddParamter(p);
... 
```

所以...

我们在这里做错了什么吗？ ~~对于 LUW 将参数作为 a 发送`DbTypes.DateTime`就可以了。~~ ***编辑：****它在 LUW 上工作得很好，因为我们在本地测试代码中发送了一个截断的日期（例如，`Now.Date`）。正常`DateTime.Now`失败并出现截断错误，就像在 AS400 上一样）*

此外，我们有关于类型的完整元数据，所以理论上可以在转换时告诉转换为什么`System.DbTypes`。我们希望这就是需要做的所有事情（或hacky转换为字符串的东西），而不是一些潜在的问题。

** 解决方案 **

感谢@mike-willis，我们只需在创建命令之前检查列，并在需要时进行手动截断。

```
// get the db2 column type from our model metadata, because in .net it is all just DateTime
cmd.AddParamter("@MyDateColumn", FixParam( dateObject, metatdata.ColumnType);

// fix up different types of parameters.  real version does a lot more validation
public object FixParam(object value, string db2columnType) {
    if (db2columnType == "date") return ((DateTime)value).Date;
    ...
    return value;
} 
```

谢谢，你们所有的 DB2 人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:52:52.087

来自 i，您可以从一个`DATE`字段分配给一个`DateTime`字段。

```
DateTime EmployeeSignedDateTime = i.Field<DateTime>("EMP_SIGNED_DATE").Add(i.Field<DateTime>("EMP_SIGNED_TIME").TimeOfDay) 
```

为了发送到 i，您可以执行以下操作：

```
p.Add("@EMPLOYEE_SIGNED_DATE", iDB2DbType.iDB2Date).Value = DateTime.Now.Date;
p.Add("@EMPLOYEE_SIGNED_TIME", iDB2DbType.iDB2Time).Value = DateTime.Now.ToString("HH.mm.ss"); 
```

请注意，我使用的是`IBM.Data.DB2.iSeries.dll`.

# vb.net - 如何使表单出现在所有其他窗口的顶部？

> ID：15411935
> 
> 赞同：5
> 
> 时间：2013-03-14T14:24:15.670
> 
> 标签：vb.net, winforms

如何使表单出现在桌面上的所有内容之上，而不仅仅是我的应用程序中的表单。我花了很长时间在谷歌上搜索，但只找到了 C++ 和旧版本的 Visual Studio 的片段，它们不再起作用。我知道答案就在那里，我一定是在寻找错误的东西。

需要明确一点 - 我的项目是在 Visual Studio 2012 中创建的，它是用 Visual Basic 编码的。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T14:55:23.160

正如史蒂夫所说，只要您的应用程序是唯一使用它的应用程序，这项工作就可以：

```
Me.TopMost = True 
```

它是在表单中找到的属性。如果您在表单外执行此操作，请使用表单的名称，例如`Form1.TopMost = True`.

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.topmost%28v=vs.80%29.aspx)和一些关于尝试使窗口位于“顶级”Windows 顶部的[信息可能会让您感兴趣。](http://blogs.msdn.com/b/oldnewthing/archive/2011/03/10/10138969.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T16:14:05.447

将 TopMost 设置为 True 会使其永久遮挡其他窗口。我发现如果你把它设置为 True 然后 False，你会将表单带到顶部以便它可见，但如果其他表单被选中，它们可以通过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T22:47:41.710

```
Me.TopMost = True 
```

但在 ACTIVATED 中（不在 LOAD EVENT 中）

```
Private Sub frm_Activated(sender As Object, e As EventArgs) Handles Me.Activated

    Me.TopMost = True
End Sub 
```

# android - 根据第一个 Spinner 的选择，第二个 Spinner 没有收到正确的信息

> ID：15411937
> 
> 赞同：1
> 
> 时间：2013-03-14T14:24:24.610
> 
> 标签：android, spinner, populate

我知道已经有大约一百万个主题，但请听我说完。

标题说明了一切，当我在微调器 1 中选择一个项目时，微调器 2 会获得一个特定的选项列表以供选择（然后将用于显示信息）。它本质上是一个小型通讯录。

****更新***** 所有已修复且正常工作，特别感谢用户 FishTruck 的帮助（即让它工作！）

```
package com.your.package.name;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;

public class Contact extends Activity{

        public Spinner spinner1, spinner2;
        public Button btnSubmit;//not needed yet

        @Override
        public void onCreate(Bundle savedInstanceState){
                super.onCreate(savedInstanceState);

                setContentView(R.layout.contact);
                findViews();
                addItemsOnSpinner1();
                addItemsOnSpinner2(0);
        }

        private void findViews(){
                spinner1 = (Spinner) findViewById(R.id.spinner1);
                spinner2 = (Spinner) findViewById(R.id.spinner2);
        }

        private void addItemsOnSpinner1() {
                List<String> list = new ArrayList<String>();

                list.add("Please Select");
                list.add("Choice 1");
                list.add("choice 2");

                ArrayAdapter<String> name = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);  

                name.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

                spinner1.setAdapter(name);
                spinner1.setOnItemSelectedListener(new OnItemSelectedListener(){
                        @Override
                        public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
                                if(arg2>0)
                                addItemsOnSpinner2(arg2);
                        }
                        @Override
                        public void onNothingSelected(AdapterView<?> arg0) {
                                addItemsOnSpinner2(0);
                        }}
                );
        }

        private void addItemsOnSpinner2(int selectedIndex) {

                int positionTop = selectedIndex;

                if(positionTop==0){
                        List<String> list = new ArrayList<String>();
                        list.add("Please Select");
                        ArrayAdapter<String> name0 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
                        name0.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                        spinner2.setAdapter(name0);
                }else if(positionTop==1){
                        List<String> list1 = new ArrayList<String>();
                        list1.add("Please Select");
                        list1.add("item 1");
                        list1.add("item 2");
                        ArrayAdapter<String> name1 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list1);
                        name1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                        spinner2.setAdapter(name1);
                }else if(positionTop==2){
                        List<String> list2 = new ArrayList<String>();
                        list2.add("Please Select");
                        list2.add("item 3");
                        list2.add("item 4");
                        ArrayAdapter<String> name2 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list2);
                        name2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                        spinner2.setAdapter(name2);
                }
        }

} 
```

希望这可以帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:32:56.167

`addItemsOnSpinner2()`当第一个微调项被选中时，您需要调用该函数。

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
    long arg3) {
addItemsOnSpinner2();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:31:17.787

您在代码的开头（在 onCreate 中）设置了两个微调器。您应该在 spinner1 数据更改后填充第二个微调器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:41:49.510

是的，正如我之前的先生们所说。

为了让第二个微调器获得正确的索引来设置列表，

单击第一个微调器后，您需要填充它。

/* 错误答案已删除 */

如果这是我的代码，我会将 addItemsOnSpinner2() 更改为：

```
private void addItemsOnSpinner2(int selectedIndex){
    int positionTop = selectedIndex;
    //rest is the same
    /* ... */
} 
```

并再次将这些插入到 addItemsOnSpinner1() 中：

```
spinner1.setOnItemSelectedListener(new OnItemSelectedListener(){
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
            if(arg2>0)
            addItemsOnSpinner2(arg2);
        }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            addItemsOnSpinner2(0);
        }}
    ); 
```

我就是这样做的

我认为这里有很多方法

edit2:oh 并将 onCreate() 中的 addItemsOnSpinner2() 编辑为 addItemsOnSpinner2(0)

edit3：你需要在onCreate()中调用addItemsOnSpinner2()，否则你的spinner是空的！

edit4：对不起，我犯了一个巨大的错误，认为 onItemClickListener 可以在这里应用，真丢脸:((

顺便说一句，如果你想保留索引（在屏幕方向改变或回到前台的情况下），它需要更复杂的工作

但这里有一个更简单的方法：

1.设置一个全局静态变量：int selectedIndex；

2.在onCreate中，如果savedInstanceState为null，则设置selectedIndex为0

3.onCreate中，saveInstanceState为nullcheckd后，调用addItemsOnSpinner2(selectedIndex)

4.在 spinner1 的监听器中，将 selectedIndex 设置为选定的索引。

但不能保证在每台机器上都能工作:(

# dynamics-crm-2011 - MS CRM 2011 获取 XML 过滤器表达式

> ID：15411941
> 
> 赞同：1
> 
> 时间：2013-03-14T14:24:41.030
> 
> 标签：dynamics-crm-2011, fetchxml

我有一个 fetch xml 查询，我想过滤带有日期和**时间**字段的记录。

**我在或之前**使用表达式，但这似乎只过滤日期（*没有时间*）。

```
FetchXml= ...
'<filter type="and">'+
'<filter type="or">'+
    '<condition attribute="scheduledend" value="'+ currentdate +'" operator="on-or-before"/>'+
    '<condition attribute="scheduledend" operator="null"/>'+
'</filter>'+
'</filter>'+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:08:03.913

您可以构建日期并将 0 影响到时间部分。是你想要的吗？

```
var date = Xrm.Page.getAttribute("createdon").getValue();
var d = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0, 0); 
```

# java - 导入项目时出现 NoClassDefException

> ID：15411943
> 
> 赞同：1
> 
> 时间：2013-03-14T14:24:52.057
> 
> 标签：java, android, logcat, noclassdeffounderror

我有一个问题，我正在做一个地图应用程序，我需要使用一些浮动菜单。我发现了一个很好的例子，它被发布在这个网站（QuickAction）中。但是当我将这个项目包含到我的项目的构建路径中时，我得到一个 NoClassDefError。这是我的日志。

日志猫：

```
03-14 15:19:17.858: W/dalvikvm(1807): VFY: unable to find class referenced in signature (Lnet/londatiga/android/QuickAction;)
03-14 15:19:17.888: E/dalvikvm(1807): Could not find class 'net.londatiga.android.ActionItem', referenced from method com.gps.gpsclient.GPSClientActivity.createFloatingMenu
03-14 15:19:17.888: W/dalvikvm(1807): VFY: unable to resolve new-instance 646 (Lnet/londatiga/android/ActionItem;) in Lcom/gps/gpsclient/GPSClientActivity;
03-14 15:19:17.888: D/dalvikvm(1807): VFY: replacing opcode 0x22 at 0x0000
03-14 15:19:17.898: D/dalvikvm(1807): DexOpt: unable to opt direct call 0x0f95 at 0x02 in Lcom/gps/gpsclient/GPSClientActivity;.createFloatingMenu
03-14 15:19:17.908: D/dalvikvm(1807): DexOpt: unable to opt direct call 0x0f98 at 0x20 in Lcom/gps/gpsclient/GPSClientActivity;.createFloatingMenu
03-14 15:19:17.968: I/org.osmdroid.views.MapView(1807): Using tile source: org.osmdroid.tileprovider.tilesource.XYTileSource@410e7460
03-14 15:19:17.978: I/org.osmdroid.tileprovider.modules.MapTileFileStorageProviderBase(1807): sdcard state: mounted
03-14 15:19:17.978: I/org.osmdroid.tileprovider.modules.MapTileFileStorageProviderBase(1807): sdcard state: mounted
03-14 15:19:18.038: I/org.osmdroid.tileprovider.MapTileProviderBase(1807): rescale tile cache from 0 to 10
03-14 15:19:18.088: I/org.osmdroid.tileprovider.MapTileProviderBase(1807): Finished rescale in 44ms
03-14 15:19:18.098: D/dalvikvm(1807): GC_CONCURRENT freed 141K, 3% free 6877K/7047K, paused 2ms+7ms
03-14 15:19:18.128: D/dalvikvm(1807): GC_FOR_ALLOC freed 39K, 4% free 7144K/7431K, paused 28ms
03-14 15:19:18.258: D/dalvikvm(1807): GC_CONCURRENT freed 206K, 3% free 7467K/7687K, paused 2ms+3ms
03-14 15:19:18.258: D/AndroidRuntime(1807): Shutting down VM
03-14 15:19:18.268: I/dalvikvm(1807): threadid=3: reacting to signal 3
03-14 15:19:18.288: W/dalvikvm(1807): threadid=1: thread exiting with uncaught exception (group=0x40a671f8)
03-14 15:19:18.298: I/dalvikvm(1807): Wrote stack traces to '/data/anr/traces.txt'
03-14 15:19:18.298: E/AndroidRuntime(1807): FATAL EXCEPTION: main
03-14 15:19:18.298: E/AndroidRuntime(1807): java.lang.NoClassDefFoundError: net.londatiga.android.ActionItem
03-14 15:19:18.298: E/AndroidRuntime(1807):     at com.gps.gpsclient.GPSClientActivity.createFloatingMenu(GPSClientActivity.java:61)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at com.gps.gpsclient.GPSClientActivity.onCreate(GPSClientActivity.java:47)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.app.Activity.performCreate(Activity.java:4492)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.os.Looper.loop(Looper.java:137)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-14 15:19:18.298: E/AndroidRuntime(1807):     at dalvik.system.NativeStart.main(Native Method)
03-14 15:19:18.558: D/dalvikvm(1807): GC_CONCURRENT freed 406K, 7% free 7450K/7943K, paused 3ms+2ms
03-14 15:19:18.768: I/dalvikvm(1807): threadid=3: reacting to signal 3
03-14 15:19:18.768: I/dalvikvm(1807): Wrote stack traces to '/data/anr/traces.txt'
03-14 15:19:18.888: I/dalvikvm(1807): threadid=3: reacting to signal 3
03-14 15:19:18.898: I/dalvikvm(1807): Wrote stack traces to '/data/anr/traces.txt' 
```

我认为它对那个构建路径有些想法，但这是我第一次将完整项目包含到构建路径中，所以我对此没有任何经验。导入工作正常。

活动：

```
package com.gps.gpsclient;

import net.londatiga.android.ActionItem;
import net.londatiga.android.QuickAction;

import org.osmdroid.tileprovider.tilesource.TileSourceFactory;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import org.osmdroid.views.MapView;

import com.gps.gpsclient.R;

public class GPSClientActivity extends Activity {

private MapView view;
private MapDrawer mainDrawer;
private QuickAction mQuickAction; 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gps);
        view = (MapView) findViewById(R.id.mapView);
        view.setTileSource(TileSourceFactory.MAPNIK);
        view.setBuiltInZoomControls(true);
        MapController mapController = view.getController();
        mapController.setZoom(10);
        GeoPoint point2 = new GeoPoint(51496994, -134733);
        mapController.setCenter(point2);
        mainDrawer=new MapDrawer(view);
        createFloatingMenu();
        final Button button = (Button) findViewById(R.id.addButton);
        button.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {
                mQuickAction.show(view);
                return false;
            }
        }); 

    }

    public void createFloatingMenu()
    {
        ActionItem item=new ActionItem();
        item.setIcon(getResources().getDrawable(R.drawable.ic_launcher));
        item.setTitle("Custom");
        mQuickAction =new QuickAction(view.getContext());
        mQuickAction.addActionItem(item);

    }

} 
```

希望你能帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:28:39.793

Clean and Build

If that doesnt help then restart eclipse and clean and build again.

**EDIT:**

You said:

> .But when i include this project to buildpath of my project,i get a NoClassDefError.

It seems that you have some library project included in your build path.You need to mark this external project as a library project.To do that,after importing the project into the workspace go to your main project.Right Click and go to properties.. and select the "Android" group on the left.On the right pane you will find a Library panel in the extreme bottom.Click on add and find and add the other project to it and mark it as a library project.

![enter image description here](../Images/3fc2a738c6029fb21062beb069e9f067.png)

After doing this,clean build and do what i said earlier.[Refer this Q/A as well](https://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-android-project).

If this solves your issue mark it as an answer.

# c# - 从 MembershipUserCollection 中获取一个 MembershipUser

> ID：15411951
> 
> 赞同：1
> 
> 时间：2013-03-14T14:25:13.230
> 
> 标签：c#, .net, asp.net-membership

我有一个membershipusercollection，我试图从中获取一个特定用户。不幸的是，我无法使用该`MembershipUser.GetUser()`方法。所以目前我收集了所有会员用户，如下所示：

```
MembershipUserCollection mc = Membership.GetAllUsers(); 
```

我想做的是通过登录或电子邮件获得其中一个用户（不管是哪一个）。我意识到我可以对集合进行 foreach 循环并进行比较，但我必须想象有更好的方法......

提前致谢...

对于那些好奇为什么我不能使用 getuser 方法的人，可以说这是因为 sharepoint。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:37:32.070

尝试这个

```
mc.Cast<MembershipUser>().SingleOrDefault(m => m.UserName == "username"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:45:50.090

`MembershipUser.GetUser()`不是一个有效的方法`Membership.GetUser("johndoe")`。

```
var user = Membership.GetAllUsers()
    .Cast<MembershipUser>()
    .FirstOrDefault(m => m.Email == "john@doe.com" || m.UserName == "johndoe"); 
```

您要注意的一件事是`GetAllUsers`从数据库中检索所有用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:31:58.037

显然还有另一种方法：

```
MembershipUser m = mc["username"]; 
```

# styles - Neo4j 样式规则新行

> ID：15411953
> 
> 赞同：1
> 
> 时间：2013-03-14T14:25:15.287
> 
> 标签：styles, neo4j

在数据浏览器中使用 Neo4j，属性文本水平显示。在样式规则中如何修改它以垂直显示？

换句话说，我希望每个属性一次显示一行：

“joe”、
“dog”

与此相反：
“joe”、“dog”
谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:48:59.633

您可以使用分号。例如 {name};{pet}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:38:09.640

不确定是否可以设置换行符。请在问题跟踪器中提出增强请求？

# dynamic-programming - 2/3 字符串的最长公共子字符串：后缀数组与动态编程方法

> ID：15411954
> 
> 赞同：1
> 
> 时间：2013-03-14T14:25:16.973
> 
> 标签：dynamic-programming, suffix-array

如果我想找到 2 个字符串的最长公共子字符串，那么哪种方法在时间/空间复杂度方面更有效：使用 DP 的后缀数组？

DP 将产生 O(m*n) 空间，时间复杂度为 O(m*n)，后缀数组方法的时间复杂度是多少？

1) 计算后缀 O(m) + O(n) 2) 排序 O(m+n log2(m+n)) 3) 找到 m+n-1 个字符串的最长公共前缀？[我不确定如何计算 #of 比较]

后缀数组允许我们对子字符串做更多的事情（比如搜索子字符串等），但是由于在这种情况下不需要其他函数，DP 是否会被认为是一种更简单/更清洁的方法？哪一个应该在我们比较 2 个字符串的情况下使用？

另外，如果我们有超过 2 个字符串怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T14:56:42.573

后缀数组会更好。LCS（n个字符串的最长公共子串）问题可以解决如下：

1.  连接 S1, S2, ..., Sn 如下： S = S1$1S2$2...$nSn，这里 $i 是特殊符号（哨兵），它们与初始字母表的其他符号不同且在字典上少于其他符号。
2.  计算后缀数组。通常，我们在 O(n*log n) 中实现后缀数组，但是有一个重要的算法称为 DC3，它计算后缀数组的时间为 O(n)，n 是 N 个字符串的总长度。你可以google这个算法。
3.  计算所有相邻后缀的 LCP。

# deployment - JBOss 查找类的问题：由于异常，未安装可选组件“X”：java.lang.ClassNotFoundException

> ID：15411956
> 
> 赞同：4
> 
> 时间：2013-03-14T14:25:17.593
> 
> 标签：deployment, ant, jar, jboss7.x, ear

我正在尝试使用 Ant 将 EAR 文件部署到我的 JBoss。我正在使用 JBoss 7.1。我已经在那里进行了一些战争（使用相同的部署过程），但是这个 EAR 包含有关我需要工作的框架的数据。这个框架特别使用了一个 JAR (index-app)，我已经将它包含在它的 lib 文件夹中。

我的 EAR build.xml 中的这段剪辑显示了它如何从其 lib 文件夹中读取 JAR（所有子文件夹都存在）：

```
 <copy todir="${build.home}" flatten="true" includeemptydirs="false">
        <fileset dir="${lib.home}">             
            <include name="index/**/*.jar" />
            <include name="crawler/**/*.jar" />
            <include name="poi/**/*.jar" />
            <include name="*.jar" />
            <exclude name="local/**" />
        </fileset>
    </copy> 
```

当我部署 EAR 时，编译没有问题，只有实际部署在我的日志中生成：

```
09:33:52,452 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-15) JBAS015876: Starting deployment of "scp-app.ear"
09:33:52,642 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) JBAS015876: Starting deployment of "scp-app-web.war"
09:33:52,642 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "scp-app.jar"
09:33:52,700 INFO  [org.jboss.as.jpa] (MSC service thread 1-7) JBAS011401: Read persistence.xml for CST_SPC_DS
09:33:52,737 WARN  [org.jboss.as.ee] (MSC service thread 1-1) JBAS011006: Not installing optional component com.t1c.modules.index.servlets.SPCCentralServlet due to exception: java.lang.ClassNotFoundException: com.t1c.modules.index.servlets.SPCCentralServlet from [Module "deployment.scp-app.ear.scp-app-web.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
    at java.lang.Class.forName0(Native Method) [rt.jar:1.6.0_39]
    at java.lang.Class.forName(Class.java:249) [rt.jar:1.6.0_39]
    at org.jboss.as.server.deployment.reflect.DeploymentClassIndex.classIndex(DeploymentClassIndex.java:54) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:79)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [rt.jar:1.6.0_39]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [rt.jar:1.6.0_39]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_39]

09:33:52,759 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/spc]] (MSC service thread 1-6) Marking servlet SPC Startup Servlet as unavailable
09:33:52,759 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/spc]] (MSC service thread 1-6) Servlet /spc threw load() exception: java.lang.ClassNotFoundException: com.t1c.modules.index.servlets.SPCCentralServlet from [Module "deployment.scp-app.ear.scp-app-web.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at org.jboss.as.web.deployment.WebInjectionContainer.newInstance(WebInjectionContainer.java:72) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1156) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [rt.jar:1.6.0_39]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [rt.jar:1.6.0_39]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_39]

09:33:52,767 INFO  [org.jboss.web] (MSC service thread 1-6) JBAS018210: Registering web context: /spc
09:33:52,968 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) JBAS015870: Deploy of deployment "scp-app.ear" was rolled back with failure message JBAS014750: Operation handler failed to complete
09:33:52,983 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-15) JBAS015877: Stopped deployment scp-app-web.war in 13ms
09:33:52,993 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-11) JBAS015877: Stopped deployment scp-app.jar in 24ms
09:33:53,004 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-11) JBAS015877: Stopped deployment scp-app.ear in 35ms
09:33:53,005 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 2) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => "JBAS014750: Operation handler failed to complete"}} 
```

我仔细检查了包含类 SPCCentralServlet 的 JAR 文件存在，它就在生成的 EAR 文件内的 JAR 中，但不知何故 JBoss 找不到它。

有没有人有任何解释或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-31T11:30:48.150

您需要在以下之一中指定包含该类的 jar `com.t1c.modules.index.servlets.SPCCentralServlet`：
1.`MANIFEST.MF`用于 WAR
2\. 作为 jboss 模块
3\. 作为依赖项`jboss-deployment-structure.xml`

# c# - 从多个设备捕获音频输入

> ID：15411958
> 
> 赞同：0
> 
> 时间：2013-03-14T14:25:26.773
> 
> 标签：c#, naudio

我正在使用 NAudio 库在 C# 中捕获音频输入：

```
int _deviceID;
double _previewVal;
private void PreviewData()
{
    WaveIn waveIn = new WaveIn();
    waveIn.DeviceNumber = _deviceID;
    waveIn.DataAvailable += waveIn_DataAvailable;
    int sampleRate = 8000; // 8 kHz
    int channels = 1; // mono
    waveIn.WaveFormat = new WaveFormat(sampleRate, channels);
    waveIn.StartRecording();
}
void waveIn_DataAvailable(object sender, WaveInEventArgs e)
{
    for (int index = 0; index < e.BytesRecorded; index += 2)
    {
        short sample = (short)((e.Buffer[index + 1] << 8) |
                                e.Buffer[index + 0]);
        _previewVal = sample / 327.68f;
    }
} 
```

为每个音频输入设备（在我的系统中为 4 个）同时调用函数 PreviewData。当我只为一个设备调用该方法时，它似乎正在工作，但如果我再次调用它，我会得到异常“AlreadyAllocated 调用 waveInOpen”。有人知道如何解决这个问题吗？

# svn - 提交脚本到 ubuntu 中的 svn 存储库

> ID：15411959
> 
> 赞同：0
> 
> 时间：2013-03-14T14:25:29.933
> 
> 标签：svn, ubuntu

我是 Ubuntu 的新手，我在 svn 存储库中有库，我也知道用户名和密码，如何将该库放入我的本地系统。我做了以下事情。sudo apt-get install subversion sudo svn --username --password co [https://svn.datadrivensafety.com:3690/](https://svn.datadrivensafety.com:3690/)

我把它们放在里面的 \Dharani 文件夹中，我正在 \Dharani\truck\sources\sample.rb 中编写脚本现在我想添加这些文件并将其提交到 svn 存储库

任何人都可以帮助我我想知道。对于任何帮助非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:03:57.683

第一次签出要处理的项目时 ( `svn co ...`)

从那时起，您的日常工作流程就不再像：

*   使用其他团队成员（如果有）更新更改`svn update`
*   如果您创建或复制了需要版本控制的新文件：`svn add folder/myfile.rb`
*   在将更改发送回服务器之前检查您的更改`svn status`
*   提交您的更改：`svn commit`

这在免费的 SVN Book ( [http://svnbook.red-bean.com/](http://svnbook.red-bean.com/) )中有详细的[解释，这里解释了基本的工作流程](http://svnbook.red-bean.com/en/1.2/svn.tour.cycle.html)。

您可能会喜欢使用集成在文件资源管理器中的桌面工具，例如[RabbitVCS](http://www.rabbitvcs.org/)（很像 Windows 上的 TortoiseSVN）。

# sql - 表创建后交换列顺序

> ID：15411960
> 
> 赞同：-4
> 
> 时间：2013-03-14T14:25:31.083
> 
> 标签：sql, oracle

我创建了一个有 4 列的表。我需要更改表的结构。我需要永久交换第 4 列和第 2 列的位置。这在甲骨文中可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:27:31.070

不可能。看到[这个](http://www.orafaq.com/wiki/SQL_FAQ#How_does_one_add_a_column_to_the_middle_of_a_table.3F)。

> Oracle 只允许将列添加到现有表的末尾。

因此，您必须删除并重新创建表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:08:54.367

您可以运行这样的脚本：

```
CREATE TABLE TMP_TBL as SELECT * FROM TBL_ORIG;
ALTER TABLE TBL_ORIG ADD COLUMN COL3;
DROP TABLE TBL_ORIG;
CREATE TABLE TBL_ORIG AS SELECT COL1, COL3, COL2 FROM TMP_TBL;
DROP TABLE TMP_TBL 
```

您需要考虑索引以及存储问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:31:57.627

*col1 和 col2 列的交换*
假设 col1 是`int`col2 是`varchar2(20)`

```
-- drop all indexes and constraints concerning col1 and col2
alter table your_table add temp_col int;          -- type of col1
update your_table set col1 = null, temp_col = col1;
alter table your_table modify col1 varchar2(20);  -- type of col2
update your_table set col2 = null, col1 = col2;
alter table your_table modify col2 int;           -- type of col1
update your_table set col2 = temp_col;
alter table your_table drop column temp_col;
alter table your_table rename column col1 to temp_col;
alter table your_table rename column col2 to col1;
alter table your_table rename column temp_col to col1;  
-- recreate indexes and constraints 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T15:55:09.993

如果它们是相同的数据类型，只需重命名表列。如果不是，那么 Alter - 请参阅 Sean 和 Egor 示例。

重命名： http: [//docs.oracle.com/cd/E11882_01/server.112/e25494/tables006.htm#ADMIN11662](http://docs.oracle.com/cd/E11882_01/server.112/e25494/tables006.htm#ADMIN11662)

在采访中，他们正在寻找肖恩的答案。仅供参考...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T15:14:39.893

为什么在这个世界上这是必要的？列顺序在 SQL 中没有任何意义。

# c# - Telerik RadGridView：当 RowDetails 中的 TextBox 达到 MaxLength 时，编辑列值

> ID：15411961
> 
> 赞同：1
> 
> 时间：2013-03-14T14:25:33.473
> 
> 标签：c#, telerik, silverlight-5.0, radgridview

我有一个使用 Telerik 的 Silverlight 5 项目`RadGridView`。这`RadGridView`有`RowDetails`，其中包含可编辑`TextBox`的。如果我在`TextBox`其中多次粘贴一些文本直到达到`MaxLength`，则所选网格行中的第一列会自动使用多余的文本进行编辑。有没有人看到并修复了这个？

试试看，这里有一些 sode：

**XAML**

```
<telerik:RadGridView Name="gvMain" AutoGenerateColumns="False">
    <telerik:RadGridView.ChildTableDefinitions>
    <telerik:GridViewTableDefinition />
</telerik:RadGridView.ChildTableDefinitions>

<telerik:RadGridView.Columns>
    <telerik:GridViewDataColumn DataMemberBinding="{Binding Title}" />
    <telerik:GridViewDataColumn DataMemberBinding="{Binding PageCount}" />
</telerik:RadGridView.Columns>

<telerik:RadGridView.HierarchyChildTemplate>
    <DataTemplate>
       <StackPanel Orientation="Horizontal">
           <TextBlock>Name</TextBlock>
           <TextBox Text="{Binding DataContext.Author.Name, RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel}}" 
                    MaxLength="20" Width="100" />
       </StackPanel>
    </DataTemplate>
</telerik:RadGridView.HierarchyChildTemplate> 
```

**楷模**

```
public class Author
{
   public string Name { get; set; }
   public string LastName { get; set; }
}

public class Book
{
   public string Title { get; set; }
   public int PageCount { get; set; }
   public Author Author { get; set; }
} 
```

**背后的代码**

```
this.gvMain.ItemsSource = new List<Models.Book>()
  {
     new Book(){ Author = new Author(){ Name = "John", LastName = "Smith"}, 
                 Title = "Dummy", PageCount = 100}
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:21:35.023

似乎当`TextBox`或`ComboBox`在 RowDetails 中无法粘贴剪贴板中的文本时（`MaxLength`例如到达时），它们停止处理中继到行本身的粘贴事件。Ard 所以行插入粘贴的文本。

我们实施的解决方案是用只有这个附加代码的自定义文本框替换文本框：

```
protected override void OnKeyDown(KeyEventArgs e)
 {
     if (IsPastingAndClipboardTextIsTooLarge(e.Key))
     {
        int textToFit = (MaxLength - Text.Length + SelectionLength);
        if (textToFit > 0)
        {
           var startIndex = SelectionStart;
           var textToPaste = Clipboard.GetText().Substring(0, Math.Min(textToFit, Clipboard.GetText().Length));
           int caretPosition = startIndex + textToPaste.Length;
           if (SelectionLength > 0)
              Text = Text.Remove(startIndex, SelectionLength);

           Text = Text.Insert(startIndex, textToPaste);
           SelectionStart = caretPosition;
        }

        e.Handled = true;
     }
     else base.OnKeyDown(e);
  }

  public bool IsPastingAndClipboardTextIsTooLarge(Key key)
  {
     return key == Key.V && ((Keyboard.Modifiers & ModifierKeys.Control) == ModifierKeys.Control) &&
            Clipboard.ContainsText() &&
            Text.Length + Clipboard.GetText().Length > MaxLength - SelectionLength;
  } 
```

但`ComboBoxes`也需要一些代码。如果有更好的解决方案请告诉我！

# jquery - 计算具有相同类的不同表的TD数

> ID：15411966
> 
> 赞同：1
> 
> 时间：2013-03-14T14:25:44.097
> 
> 标签：jquery

假设我们有两个具有相同类的表，唯一的区别是列数。

```
<table class="lives prono_live">
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
    </tr>
</table>

<table class="lives prono_live">
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>           
    </tr>
</table> 
```

我想要一个 jQuery 函数，它可以在一个循环中为我提供每个表的 TD 编号。

我创建了这段代码：

```
$( '.lives.prono_live' ).each(function( index ) {
    alert($('.lives.prono_live td').length);
}); 
```

这段代码不好，只是部分。

这段代码的作用：

*   显示两个值为 9 和 9 的警报框

我想拥有的：

*   显示两个警报框，值为 4 和 5

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:28:10.557

`tds`因为你的循环里面有类选择器，所以你的代码正在计数`$('.lives.prono_live td')`......使用`$(this)`参考，它应该可以工作..

尝试这个

```
$( '.lives.prono_live' ).each(function( index ) {
  alert($(this).find('td').length); 
}); 
```

[在这里摆弄](http://jsfiddle.net/gzsAG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:28:49.143

您需要使用`this`，否则您将同时使用类选择器。

```
$( '.lives.prono_live' ).each(function( index ) {
    alert($(this).find('td').length);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:29:15.593

尝试这个...

```
$(".lives.prono_live").each(function() {
    alert($("td", this).length);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T14:31:07.860

在 $.each() 循环中，您需要使用 $(this) 定位“当前”元素。

```
$( '.lives.prono_live' ).each( function( index ) {
    alert( $( this ).find( 'td' ).length );
}); 
```

# python - 如何检查代码是否在 IPython 笔记本中执行？

> ID：15411967
> 
> 赞同：111
> 
> 时间：2013-03-14T14:25:44.877
> 
> 标签：python, ipython, ipython-notebook

我有一些我想分享的 Python 代码示例，如果在终端 Python / IPython 或 IPython 笔记本中执行，它应该会做一些不同的事情。

我如何检查我的 Python 代码是否在 IPython 笔记本中运行？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2016-09-23T13:43:35.997

以下内容满足我的需求：

```
get_ipython().__class__.__name__ 
```

它`'TerminalInteractiveShell'`在终端 IPython、`'ZMQInteractiveShell'`Jupyter（笔记本和 qtconsole）上返回，并`NameError`在常规 Python 解释器上失败（）。启动 IPython 时，默认情况下该方法`get_python()`似乎在全局命名空间中可用。

将其包装在一个简单的函数中：

```
def isnotebook():
    try:
        shell = get_ipython().__class__.__name__
        if shell == 'ZMQInteractiveShell':
            return True   # Jupyter notebook or qtconsole
        elif shell == 'TerminalInteractiveShell':
            return False  # Terminal running IPython
        else:
            return False  # Other type (?)
    except NameError:
        return False      # Probably standard Python interpreter 
```

以上内容在 macOS 10.12 和 Ubuntu 14.04.4 LTS 上使用 Python 3.5.2、IPython 5.1.0 和 Jupyter 4.2.1 进行了测试

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-07-24T15:04:56.937

要检查您是否在笔记本中，这可能很重要，例如在确定要使用哪种进度条时，这对我有用：

```
def in_ipynb():
    try:
        cfg = get_ipython().config 
        if cfg['IPKernelApp']['parent_appname'] == 'ipython-notebook':
            return True
        else:
            return False
    except NameError:
        return False 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-03-15T14:05:07.860

您可以使用以下代码段[[1]](https://stackoverflow.com/questions/2356399/tell-if-python-is-in-interactive-mode)检查 python 是否处于*交互*模式：

```
def is_interactive():
    import __main__ as main
    return not hasattr(main, '__file__') 
```

我发现这种方法非常有用，因为我在笔记本中做了很多原型设计。出于测试目的，我使用默认参数。否则，我从`sys.argv`.

```
from sys import argv

if is_interactive():
    params = [<list of default parameters>]
else:
    params = argv[1:] 
```

执行后[`autonotebook`](https://github.com/tqdm/tqdm/blob/master/tqdm/autonotebook.py)，您可以使用以下代码判断您是否在笔记本中。

```
def in_notebook():
    try:
        from IPython import get_ipython
        if 'IPKernelApp' not in get_ipython().config:  # pragma: no cover
            return False
    except ImportError:
        return False
    except AttributeError:
        return False
    return True 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-06-06T15:56:08.180

最近我[在 Jupyter notebook](https://github.com/fchollet/keras/pull/2860)中遇到了一个需要解决方法的错误，我想在不丢失其他 shell 功能的情况下做到这一点。我意识到[keflavich 的解决方案](https://stackoverflow.com/a/24937408/854988)在这种情况下不起作用，因为`get_ipython()`只能直接从笔记本中获得，而不是从导入的模块中获得。所以我找到了一种从我的模块中检测它是否是从 Jupyter 笔记本导入和使用的方法：

```
import sys

def in_notebook():
    """
    Returns ``True`` if the module is running in IPython kernel,
    ``False`` if in IPython shell or other Python shell.
    """
    return 'ipykernel' in sys.modules

# later I found out this:

def ipython_info():
    ip = False
    if 'ipykernel' in sys.modules:
        ip = 'notebook'
    elif 'IPython' in sys.modules:
        ip = 'terminal'
    return ip 
```

如果这足够强大，我们将不胜感激。

类似的方式可以获得有关客户端的一些信息，以及 IPython 版本：

```
import sys

if 'ipykernel' in sys.modules:
    ip = sys.modules['ipykernel']
    ip_version = ip.version_info
    ip_client = ip.write_connection_file.__module__.split('.')[0]

# and this might be useful too:

ip_version = IPython.utils.sysinfo.get_sys_info()['ipython_version'] 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-09-25T16:12:52.430

已针对 python 3.7.3 测试

CPython 实现的名称`__builtins__`可作为其全局变量的一部分，顺便说一句。可以通过函数 globals() 检索。
如果脚本在 Ipython 环境中运行，那么`__IPYTHON__`应该是`__builtins__`.
因此，如果在 Ipython 下运行，下面的代码将返回`True`，否则返回`False`

```
hasattr(__builtins__,'__IPYTHON__') 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-14T14:56:28.810

问题是你想以不同的方式执行什么。

我们在 IPython 中尽最大努力防止内核知道连接到哪种前端，实际上您甚至可以让一个内核同时连接到许多不同的前端。即使您可以查看类型`stderr/out`以了解您是否在 ZMQ 内核中，但它并不能保证您在另一端拥有什么。你甚至可以根本没有前端。

您可能应该以独立于前端的方式编写代码，但是如果您想显示不同的东西，您可以使用[丰富的显示系统（链接固定到 IPython 的 4.x 版）](http://nbviewer.jupyter.org/github/ipython/ipython/blob/4.x/examples/IPython%20Kernel/Rich%20Output.ipynb)根据前端显示不同的东西，但是前端会选择，而不是库。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-02-18T21:09:17.573

您所要做的就是将这两个单元格放在笔记本的开头：

单元格 1：（标记为“代码”）：

```
is_notebook = True 
```

单元格 2：（标记为“原始 NBConvert”）：

```
is_notebook = False 
```

第一个单元格将始终执行，但第二个单元格仅在您将笔记本导出为 Python 脚本时才会执行。

稍后，您可以检查：

```
if is_notebook:
    notebook_code()
else:
    script_code() 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-08T12:53:23.653

据我所知，这里有 3 种使用的 ipython`ipykernel`

1.  `ipython qtconsole`（简称“qtipython”）
2.  spyder中的IPython（简称“spyder”）
3.  jupyter notebook 中的 IPython（简称“jn”）

使用`'spyder' in sys.modules`可以区分spyder

但是对于 qtipython 和 jn 很难区分，因为

他们有相同`sys.modules`的 IPython 配置：`get_ipython().config`

我发现 qtipython 和 jn 之间有所不同：

首先`os.getpid()`在 IPython shell 中运行以获取 pid 号

然后运行`ps -ef|grep [pid number]`

我的 qtipython pid 是 8699

```
yanglei   8699  8693  4 20:31 ?        00:00:01 /home/yanglei/miniconda2/envs/py3/bin/python -m ipykernel_launcher -f /run/user/1000/jupyter/kernel-8693.json 
```

我的 jn pid 是 8832

```
yanglei   8832  9788 13 20:32 ?        00:00:01 /home/yanglei/miniconda2/bin/python -m ipykernel_launcher -f /run/user/1000/jupyter/kernel-ccb962ec-3cd3-4008-a4b7-805a79576b1b.json 
```

qtipython 和 jn 的不同是 ipython 的 json 名称，jn 的 json 名称比 qtipython 的长

因此，我们可以使用以下代码自动检测所有 Python 环境：

```
import sys,os
def jupyterNotebookOrQtConsole():
    env = 'Unknow'
    cmd = 'ps -ef'
    try:
        with os.popen(cmd) as stream:
            if not py2:
                stream = stream._stream
            s = stream.read()
        pid = os.getpid()
        ls = list(filter(lambda l:'jupyter' in l and str(pid) in l.split(' '), s.split('\n')))
        if len(ls) == 1:
            l = ls[0]
            import re
            pa = re.compile(r'kernel-([-a-z0-9]*)\.json')
            rs = pa.findall(l)
            if len(rs):
                r = rs[0]
                if len(r)<12:
                    env = 'qtipython'
                else :
                    env = 'jn'
        return env
    except:
        return env

pyv = sys.version_info.major
py3 = (pyv == 3)
py2 = (pyv == 2)
class pyi():
    '''
    python info

    plt : Bool
        mean plt avaliable
    env :
        belong [cmd, cmdipython, qtipython, spyder, jn]
    '''
    pid = os.getpid()
    gui = 'ipykernel' in sys.modules
    cmdipython = 'IPython' in sys.modules and not gui
    ipython = cmdipython or gui
    spyder = 'spyder' in sys.modules
    if gui:
        env = 'spyder' if spyder else jupyterNotebookOrQtConsole()
    else:
        env = 'cmdipython' if ipython else 'cmd'

    cmd = not ipython
    qtipython = env == 'qtipython'
    jn = env == 'jn'

    plt = gui or 'DISPLAY' in os.environ 

print('Python Envronment is %s'%pyi.env) 
```

源码在这里：[检测Python环境，特别区分Spyder、Jupyter notebook、Qtconsole.py](https://gist.github.com/DIYer22/5cc015dcef53d62c16bdff0f8f345e96)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-22T18:53:46.087

以下捕获[https://stackoverflow.com/a/50234148/1491619](https://stackoverflow.com/a/50234148/1491619)的案例，无需解析输出`ps`

```
def pythonshell():
    """Determine python shell

    pythonshell() returns

    'shell' (started python on command line using "python")
    'ipython' (started ipython on command line using "ipython")
    'ipython-notebook' (e.g., running in Spyder or started with "ipython qtconsole")
    'jupyter-notebook' (running in a Jupyter notebook)

    See also https://stackoverflow.com/a/37661854
    """

    import os
    env = os.environ
    shell = 'shell'
    program = os.path.basename(env['_'])

    if 'jupyter-notebook' in program:
        shell = 'jupyter-notebook'
    elif 'JPY_PARENT_PID' in env or 'ipython' in program:
        shell = 'ipython'
        if 'JPY_PARENT_PID' in env:
            shell = 'ipython-notebook'

    return shell 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-03T10:33:18.417

我建议避免检测特定的前端，因为它们[太多了](https://github.com/markusschanta/awesome-jupyter#runtimesfrontends)。相反，您可以测试您是否在 iPython 环境中运行：

```
def is_running_from_ipython():
    from IPython import get_ipython
    return get_ipython() is not None 
```

`False`如果您`running_from_ipython`从通常的 python 命令行调用，上面将返回。当您从 Jupyter Notebook、JupyterHub、iPython shell、Google Colab 等调用它时，它将返回`True`.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-05-20T14:29:08.657

一个非常简单高效的解决方案是检查调用堆栈的顶部是否引用了 IPython 环境，如下：

```
import traceback

def is_in_notebook():
    rstk = traceback.extract_stack(limit=1)[0]
    return rstk[0].startswith("<ipython") 
```

此代码适用于 IPython 或 Jupyter 上的 Python 2 和 3，无需检查、设置或更改环境。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-11-03T11:02:39.343

我正在使用 Django Shell Plus 来启动 IPython，并且我想让“在笔记本中运行”作为 Django 设置值可用。`get_ipython()`加载设置时不可用，所以我使用它（这不是防弹的，但对于它所使用的本地开发环境来说已经足够好了）：

```
import sys

if '--notebook' in sys.argv:
    ENVIRONMENT = "notebook"
else:
    ENVIRONMENT = "dev" 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-02-11T19:55:25.423

假设您可以控制 Jupyter Notebook，您可以：

1.  在将其用作**代码中的标志**的单元格中设置环境值。在该单元格（或您要排除的所有单元格）中放置唯一注释

    # exclude_from_export
    %set_env is_jupyter=1

2.  将笔记本导出为 python 脚本以在不同的上下文中使用。导出将排除注释的单元格，然后排除设置环境值的代码。注意：将*your_notebook.ipynb*替换为您的实际笔记本文件的名称。

    jupyter nbconvert --to 脚本 --RegexRemovePreprocessor.patterns="['^# exclude_from_export']" your_notebook.ipynb

这将生成一个没有设置 jupyter 环境标志的文件，允许使用它的代码确定性地执行。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-18T15:20:08.037

像这样的东西怎么样：

```
import sys

inJupyter = sys.argv[-1].endswith('json')

print(inJupyter); 
```

# php - 如何将用户从php文件重定向回dreamhost上的`index.html`

> ID：15411978
> 
> 赞同：9
> 
> 时间：2013-03-14T14:26:16.293
> 
> 标签：php, redirect

我正在 DreamHost 上设置一个简单的登录页面。它不会让我将 php 代码放入文件中`index.html`。因此，当用户提交电子邮件地址时，我使用`$_POST`将电子邮件地址提交到另一个页面`mail_auto.php`。

在看到快速的“已发送电子邮件”消息后，我希望将用户`index.html`从`mail_auto.php`.

`header()`看起来有点复杂，似乎干扰了平衡的执行`mail_auto.php`。

重定向用户的最佳方式是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T14:28:21.103

要将用户重定向回 index.html，请使用以下命令：

```
header('Location: index.html');
exit; 
```

或者，如果您想在屏幕上显示类似“Redirecting...”的内容，您可以使用`meta-refresh`method 或 JavaScript `window.location`method with`setTimeout`

元刷新方法：

将此添加到 HTML `<head>`：

```
<meta http-equiv="refresh" content="2;url=index.html"> 
```

其中 2 是执行刷新之前的秒数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:28:47.717

只需在进程结束时回显此 javascript 代码即可。

```
 <script>
      window.location.href = 'http://www.yourwebsite.com';
    </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:29:30.827

使用标题通常是我会做的。

您是否考虑过使用 JavaScript？这不是最好的方法，尽管它会起作用。

```
<script type="text/javascript">
   <!--
   window.location = "http://www.google.com/"
   //-->
</script> 
```

# validation - Grails 验证无约束块

> ID：15411983
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:26:26.977
> 
> 标签：validation, grails

在 Grails 中约束验证域对象的常用方法是在域对象中定义一个静态约束闭包，之后可以调用 myObject.validate()。

是否有可能以某种方式将应该验证的内容传递给 validate 调用而不定义约束块？

我想这可以用 Spring 验证器实例来完成，但有没有更简单的方法让你仍然拥有 Grails 的“好东西”（最大、电子邮件等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:42:31.983

您可以将字段列表传递到`.validate(["fieldA", "fieldB"])`其中，它只会验证这些字段。您仍然需要一个约束块来定义这些字段的约束。

来自 Grails 用户指南：“ *validate 方法接受一个可选的 List 参数，其中包含要验证的属性的名称。当指定名称列表时，只会验证那些属性。* ”

回复@eugene82：

```
@Validateable
class MyDomainValidator {
String email
static constraints = {
email(email:true)
}
}

MyDomain m = new MyDomain()...
MyDomainValidator mv = new MyDomainValidator()..
mv.properties = m.properties
mv.validate() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T15:06:41.113

我想象这样一种方法：创建一个`@Validateable`带有静态约束的 groovy 类，其中包含您需要的任何 Grails 好东西。让它像您的域一样拥有所有字段（例如通过扩展域），并提供一种将所有字段从域实例复制到该对象的新实例的方法，例如使用构造函数。比叫`validate()`那个班。

```
class MyDomain {
    String email
    MyDomain() {}
    MyDomain(email) {
        email = this.email
    }
}
@Validateable
class MyDomainCustomValidator extends MyDomain {
    MyDomainValidator() {}
    MyDomainValidator(domain) {
        super(domain.email)
    }
    static constraints = {
        email email: true
    }
}

def d = new MyDomain('e@mail.com')
new MyDomainCustomValidator(d).validate() 
```

# jakarta-ee - Java - ProcessBuilder 中的批处理文件执行被阻止

> ID：15411990
> 
> 赞同：2
> 
> 时间：2013-03-14T14:26:58.247
> 
> 标签：jakarta-ee

感谢您的支持。

我正在使用 ProcessBuilder 从 java 执行批处理文件。此执行将在一个线程中每 4 分钟继续执行一次。输出和错误将被写入文件。

这可以正常工作 1 或 2 天。之后，执行线程被阻塞。我将重新启动应用程序，它可以再正常工作 1 或 2 天。在过去的 20 天里，我一次又一次地遇到这个问题。

我试着分析。我没有从错误流中发现任何错误。直到日志文件中打印的最后一条语句，一切都正确。我拿了线程转储并进行了分析。线程状态

“load-thr”prio=6 tid=0x0000000009875000 nid=0x1014 可运行 [0x000000000c71e000] java.lang.Thread.State: RUNNABLE
- 锁定 <0x00000000894fbeb8> (a java.io.InputStreamReader) 在 java.io.BufferedReader.readLine(Unknown Source)
at com.xxx.qqq.load(MyLoad.java:553) ==> 这是 while() 语句的行

为什么它无限期地在 while() 语句行中等待？

这个锁是什么原因造成的？

```
public void load()
{       
    BufferedReader br1=null,br2=null;
    String err=null,err1=null;
    Process p=null;   
    try
    {
              ProcessBuilder pb=new ProcessBuilder();
              pb.directory("my work directory given");
              pb.command("cmd.exe","/c","www.bat");
              pb.redirectErrorStream(true);
              p=pb.start();                                                           
              br1=new BufferedReader(new InputStreamReader(p.getInputStream()));
              br2=new BufferedReader(new InputStreamReader(p.getErrorStream()));
              while((err=br1.readLine())!=null || (err1=br2.readLine())!=null) {  if(err!=null) {logtofile(err);} if(err1!=null) {logtofile(err1);}}
              p.waitFor();                                                            
    }
    catch(Exception e){e.printStackTrace();}
    finally
    {
        try{
            if(p!=null){p.destroy();}
            if(br1!=null) {br1.close();}
            if(br2!=null) {br2.close();}                
        }catch(Exception e) {
            e.printStackTrace();
        }
    }       
}

public void logtofile(String err){
    //all statements are written to file.
    //file 'll be changed over the time when file size exceeds 2MB.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T04:32:34.357

这个问题已经[在这里](https://stackoverflow.com/questions/3807834/processbuilder-gets-stuck-after-getting-an-error)回答了 。基本上你应该在另一个线程中阅读你的流。因为从流中读取会阻塞调用，直到某些输入可用、发生 I/O 错误或到达流的末尾。

# css - 其他所有文字样式

> ID：15411992
> 
> 赞同：-1
> 
> 时间：2013-03-14T14:27:00.783
> 
> 标签：css

我想让我的网站新闻风格化。

```
first news : red
second news : blue
third news : red
fourth news : blue 
```

和其他类似的。颜色应该是每隔一个文本改变一次。

我怎样才能做到这一点？因为一个 div 用于所有新闻！和一个CSS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:32:35.803

你可以使用 JQuery。

例如，如果新闻项目在列表中，您可以执行以下操作：

```
$(document).ready(function(){
  $('#menu li:nth-child(even)').addClass('blue-link');
  $('#menu li:nth-child(odd)').addClass('red-link');
}); 
```

例如，这将设置奇数链接（如第 1、3 等）链接为红色，偶数（第 2、第 4、第 6 等）链接为蓝色。

对于此示例，html 将是：

```
<ul id="menu">
<li>first news</li>
<li>second news</li>
<li>third news</li>
<li>fourth news</li>
</ul> 
```

小提琴示例：http: [//jsfiddle.net/XwCaL/](http://jsfiddle.net/XwCaL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:33:58.807

如果您在容器中的单独元素中有消息，如下所示：

```
<div id="news">
    <span>Some news 1</span>
    <span>Some news 2</span>
    <span>Some news 3</span>
    <span>Some news 4</span>
</div> 
```

然后，您可以使用此 CSS 简单地设置所有其他子元素的样式：

```
#news span:nth-child(2n) {
    color: #f00; // 1st, 3rd, 5th...
}

#news span:nth-child(2n+1) {
    color: #00f; // 2nd, 4th, 6th...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:37:34.837

如果网站只是一个静态网站，我会这样设计；

**HTML**

```
<ul>
   <li class="red">News 1</li>
   <li class="blue">News 2</li>
   <li class="red">News 3</li>
   <li class="blue">News 4</li>
</ul> 
```

**CSS**

```
.red {
   color:red;
}
.blue {
   color:blue; 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T15:01:56.527

*HTML：*

```
<ul>
   <span class="red"><li>News 1</li></span>
   <span class="blue"><li>News 2</li></span>
   <span class="red"><li>News 3</li></span>
   <span class="blue"><li>News 4</li></span>
</ul> 
```

*CSS：*

```
.red {
   color: red;
}
.blue {
   color: blue;
} 
```

# c# - WPF MVVM 事件到命令 - 基于事件参数调用命令

> ID：15411993
> 
> 赞同：0
> 
> 时间：2013-03-14T14:27:03.750
> 
> 标签：c#, wpf, mvvm, devexpress, prism

我有一个 WPF 应用程序，它使用 DevExpress 控件和带有 PRISM 的 MVVM。
我正在使用 DockLayoutManager 的“DockOperationCompleted”事件在我的视图模型上调用命令，如下所示：

```
 <dxd:DockLayoutManager x:Name="dockContainer">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="DockOperationCompleted">
                <i:InvokeCommandAction Command="{Binding DataContext.SaveLayoutCommand, ElementName=dockContainer}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <dxd:LayoutGroup/>
    </dxd:DockLayoutManager> 
```

“SaveLayoutCommand”命令的目的是保存布局，以便以后可以及时恢复。
在 DockItem 停靠或关闭后引发“DockOperationCompleted”事件（还有其他情况，但它们无关紧要）。
问题是，当我关闭主窗口时，我的 DockLayoutManager 中的停靠项会一个一个地关闭，因此每个关闭的停靠项都会调用“SaveLayoutCommand”，我不希望这种情况发生。
引发事件的“DockOperationCompletedEventArgs”有一个“DockOperation”属性，我可以再次检查它，但我不确定这段代码到底应该放在哪里。

**：当基于事件的事件参数调用命令时，有没有办法“过滤”？** 

 ****谢谢**:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T08:05:29.487

除了 aKzenTs 的回答，我想指出，使用 DevExpress 将事件参数传递给命令相当容易。

您应该使用他们的 MVVM 库 (PassEventArgsToCommand-Property) 中的 EventToCommand。如果你想让你的视图模型保持 DevExpress 的干净，你可以另外使用转换器将事件参数转换为任意对象。

```
<dxmvvm:Interaction.Triggers>
    <dxmvvm:EventToCommand Command="{Binding YOURCOMMAND}"
                           EventName="THEEVENT"
                           EventArgsConverter="{StaticResource YOUREVENTARGSCONVERTER}"
                           PassEventArgsToCommand="true" />
</dxmvvm:Interaction.Triggers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:42:14.180

没有内置方法可以过滤在调用操作之前引发的事件。但是，您可以实现自己的自定义触发器操作来进行过滤。

不幸的是，访问事件参数并将它们传递给命令也不容易。将此问题视为参考：

[MVVM 将 EventArgs 作为命令参数传递](https://stackoverflow.com/questions/6205472/mvvm-passing-eventargs-as-command-parameter)**

# android - Android选项菜单：更改图标大小

> ID：15411994
> 
> 赞同：1
> 
> 时间：2013-03-14T14:27:07.990
> 
> 标签：android

我正在使用选项菜单，我想增加图标的大小......意味着图标太小......如何增加它们的宽度或高度......或者如何删除图标周围的空间......即填充，边距等...我想要一个底部有图标的菜单...我应该怎么做？？？

```
 <activity
        android:name="com.example.parentengagementtracking.BaseActivity"
        android:label="@string/title_activity_base"
        android:theme="@style/MenuTheme" >

        <!-- android:theme="@style/Theme.FixedSize"> -->
    </activity>

<style name="MenuTheme" parent="android:Theme">
    <item name="android:panelFullBackground">@drawable/back11</item>
    <item name="android:padding">1dip</item>
    <item name="android:drawablePadding">1dip</item>
</style> 
```

公共类 BaseActivity 扩展 Activity {

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_parent_home, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    Bundle objBundle; 
    Intent objIntent;
    switch (item.getItemId())
    {

    case R.id.menu_about_us:
        objIntent=null;
        objIntent = new Intent(BaseActivity.this,InfoActivity.class);
        objBundle=new Bundle();            
        objBundle.putString("source","BaseActivity");
        objIntent.putExtras(objBundle);
        finish();
        startActivity(objIntent);
        return true;

    case R.id.menu_profile:
        objIntent=null;
        objIntent = new Intent(BaseActivity.this,UserProfile.class);
        finish();
        startActivity(objIntent);
        return true;

    case R.id.menu_activity:
        objIntent=null;
        objIntent = new Intent(BaseActivity.this,ViewActivity.class);
        finish();
        startActivity(objIntent);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

}

```
<!--         android:icon="@drawable/homen" -->
<item
    android:id="@+id/menu_profile"
    android:orderInCategory="2"
    android:showAsAction="always"
    android:icon="@drawable/profile1"
    android:title="Profile"/>
<item
    android:id="@+id/menu_activity"
    android:orderInCategory="3"
    android:showAsAction="always"
    android:icon="@drawable/reports"
    android:title="Reports"/>

<item
    android:id="@+id/menu_about_us"
    android:icon="@drawable/aboutusn"
    android:orderInCategory="4"
    android:showAsAction="always"
    android:title="Aboutus"/> 
```

我如何设置图标的填充、边距、宽度和高度等..？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:33:26.530

您的图像应为 24*24 或 36*36。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-14T11:59:30.233

您可以使用**"app:actionLayout"**解决此问题。

```
 <item
        android:id="@+id/menu1"
        app:actionLayout="@layout/custom_action_bar"  //this line will change icon
        android:visible="true"
        android:title="Menu 1"
        app:showAsAction="always" /> 
```

请参阅此文档[自定义菜单图标](https://stablekernel.com/using-custom-views-as-menu-items/)以将侦听器添加到自定义菜单。

# haskell - 从 Data.Binary.Get 返回列表

> ID：15411996
> 
> 赞同：0
> 
> 时间：2013-03-14T14:27:08.967
> 
> 标签：haskell, binaryfiles

我正在尝试阅读 MIDI 文件作为处理二进制文件的教育练习，但我遇到了障碍。

当我阅读曲目时，我只想获取文件标题部分中声明的特定数量的曲目。这是我如何尝试解决它的代码（虽然不起作用）：

```
getMidi = do
  header <- grabHeader
  tracks <- grabTracks (numTracks header)
  return (header, tracks)

grabTracks :: Integer -> Get [Track]
grabTracks numT = do
  if numT == 0
     then do
       return []
     else do
       myTrack <- grabTrack
       otherTracks <- grabTracks (numT-1)
       return myTrack : otherTracks

grabTrack :: Get Track
grabTrack = do
  chunkId <- getByteString 4
  chunkSize <- getWord32be
  events <- getLazyByteString (fromIntegral chunkSize)
  return Track {trackSize=(fromIntegral chunkSize), eventData=events} 
```

`numT`是头文件中声明的轨道数。我想这样做有两个原因。

1.  最后可能有垃圾我想忽略。
2.  想要将此技术应用于其他二进制文件，其中包含“某些东西”的列表。

当我尝试编译它时，我得到了这个错误：

```
Couldn't match expected type `Get [a]' with actual type `[a0]'
    In a stmt of a 'do' block: return myTrack : otherTracks
    In the expression:
      do { myTrack <- grabTrack;
           otherTracks <- grabTracks (numT - 1);
           return myTrack : otherTracks }
    In a stmt of a 'do' block:
      if numT == 0 then
          do { return [] }
      else
          do { myTrack <- grabTrack;
               otherTracks <- grabTracks (numT - 1);
               return myTrack : otherTracks } 
```

`Get`当我被迫使用这样的列表连接时，我不知道如何制作单子。谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:32:28.597

你需要括号

```
return (myTrack : otherTracks) 
```

为了使该行不被解析为

```
(return myTrack) : otherTracks 
```

函数应用程序的绑定比任何中缀运算符都强。

在第一个版本中，您在 monad 中返回一个列表，在第二个版本中，您在其他语句为s`Get`的 do-block 中有一个列表类型的表达式。`Get`

# api - Backbone.sync – 使用 ajax 以及 Socket.IO/WebSockets 的集合

> ID：15411998
> 
> 赞同：8
> 
> 时间：2013-03-14T14:27:13.233
> 
> 标签：api, rest, backbone.js, websocket, socket.io

我有一个 Backbone 应用程序，它有一个名为`Links`. `Links`映射到`/api/links`.

API 将为用户提供最新的链接。但是，我有一个系统，当用户点击这个 API 时，它将向消息队列添加一个作业，请求更新数据库中的链接。

当这项工作完成后，我会将新链接**推送到 Backbone 集合。**

我该怎么做？在我看来，我有两个选择：

*   从 Backbone 集合中，长轮询 API 以获取新链接
*   设置 WebSockets 以在作业完成时向集合发送“消息”，并与它一起发送新数据
*   为我的应用程序废弃 REST API，只为所有事情使用 WebSocket，因为我以后可能会有更多的实时需求

## 带有 REST API 的 WebSocket

如果我使用 WebSockets，我不确定将它集成到我的 Backbone 集合中以便它与 REST API 一起工作的最佳方式。

目前我的 Backbone 集合看起来像这样：

```
var Links = Backbone.Collection.extend({
  url: '/api/links'
}); 
```

我不确定如何启用 Backbone 集合来处理 AJAX**和**WebSocket。我是否继续使用默认的 Backbone.sync 进行 CRUD Ajax 操作，然后手动处理单个 WebSocket 连接？在我脑海里：

```
var Links = Backbone.Collection.extend({
  url: '/api/links',
  initialize: function () {
    var socket = io.connect('http://localhost');
    socket.on('newLinks', addLinks)
  },
  addLinks: function (data) {
    // Prepend `data` to the collection
  };
}) 
```

## 问题

我应该如何根据上述选项或您的任何其他想法来实现我的实时需求？请提供代码示例以提供一些上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-11T11:40:30.083

不用担心！[Backbone.WS 为](https://github.com/ydaniv/backbone-ws)您提供保障。

你可以像这样初始化一个 WebSocket 连接：

```
var ws = new Bakcbone.WS('ws://exmaple.com/'); 
```

并将模型绑定到它，例如：

```
var model = new Backbone.Model();
ws.bind(model); 
```

然后此模型将侦听该类型的消息事件，`ws:message`您可以调用`model.send(data)`以通过该连接发送数据。

当然，集合也是如此。

Backbone.WS 还提供了一些工具，用于将自定义的类似 REST 的 API 映射到您的模型/集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T20:11:06.830

我的公司有一个使用主干的完全基于 Socket.io 的解决方案，主要是因为我们希望我们的应用程序在另一个用户屏幕上实时进行更改时“更新”gui。

简而言之，这是一罐蠕虫。Socket.IO 运行良好，但它也打开了很多你可能不感兴趣的门。骨干事件变得非常不正常，因为它们与 ajax 事务紧密相关……您实际上是在覆盖该默认行为。我们更好的问题之一是删除，因为我们的套接字响应不是改变的模型，而是整个集合，例如。我们的解决方案确实比大多数解决方案走得更远，因为交易是通过一个 DDL 进行的，该 DDL 专门设置为在我们现在和将来需要能够与之通信的许多设备上通用。

如果您确实走 ioBind 路径，请注意，与非套接字流量相比，您将使用不同的方法来更改事件（如果混合和匹配）这是该方法的最大缺点，诸如“更改”之类的标准内容变为“更新”，例如避免冲突。在深夜调试或有新开发人员加入团队时，它会变得非常混乱。出于这个原因，我更喜欢使用套接字，或者不使用套接字，而不是组合。到目前为止，套接字一直很好，而且速度很快。

我们使用一个基础函数来完成繁重的工作，并有几个其他函数扩展了这个基础，为我们提供了我们需要的事务功能。

[本文](http://swizec.com/blog/elegantly-using-socket-io-in-backbone-apps/swizec/5712)为我们使用的方法提供了一个很好的开端。

# c# - C# MVC4 更改视图属性未更改视图 HTML 页面上的数据

> ID：15411999
> 
> 赞同：0
> 
> 时间：2013-03-14T14:27:16.833
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

更新：Jacco 的建议（如下）为我解决了这个问题。即， ModelState.Clear() 是你的朋友。

我有一个名为 ScheduleController 的控制器，其 ActionResult 如下所示：

```
[HttpPost]
public ActionResult Create(ScheduledCall scheduledcall) 
```

scheduleCall 模型对象有一个名为 content 的属性。我有一个条件，我想更改 content 属性的值并将模型返回到视图以供用户在浏览器中阅读。我发现虽然更改属性的值很容易，但视图不会将新值呈现给 HTML 显示。相反，它显示用户提交的内容。

控制器动作中的示例：

```
scheduledcall.Content = "Mark my words!";
ViewBag.message = scheduledcall.Content;
return View(scheduledcall); 
```

在视图上，我输出 @ViewBag.message（在控制器中设置以匹配 schedulecall.Content 属性的值）。视图中的输出是“Mark my words!”，但内容的文本区域 (@Html.TextAreaFor(model => model.Content)) 显示的是用户输入的文本，而不是“Mark my words!”。

如何让视图在文本区域中显示更新的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:30:31.177

可能不是您要找的答案。

[考虑使用Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式，而不是从您的 POST 返回呈现的视图。

> Post/Redirect/Get (PRG) 是一种 Web 开发设计模式，可以防止一些重复的表单提交，为用户代理（用户）创建更直观的界面。PRG 以可预测的方式实现书签和刷新按钮，不会创建重复的表单提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:18:54.163

我想你的答案就在这里

[Html.TextBoxFor 在 POST 操作中不显示更新的值](https://stackoverflow.com/questions/4886923/html-textboxfor-does-not-show-updated-value-in-post-action)

ModelState.Clear(); 或者复制模型应该可以解决问题。

曾经也遇到过这个问题，它是 MVC 框架中不那么明显的角落之一。

问候， 雅科