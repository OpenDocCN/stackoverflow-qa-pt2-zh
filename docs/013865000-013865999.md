# StackOverflow 问答 13865000-13865999

# cakephp - CakePHP 命名约定

> ID：13865004
> 
> 赞同：1
> 
> 时间：2012-12-13T17:15:03.830
> 
> 标签：cakephp

我有以下表格：

*   管理员
*   特性
*   管理员属性

控制器文件标题为：

*   管理员控制器.php
*   properties_controller.php
*   administrators_properties_controller.php

模型文件的标题为：

*   管理员.php
*   属性.php
*   管理员_property.php

我无法理解连接模型名称的单数/复数命名约定。（或者问题可能出在控制器上？也许是 administrator_properties_controller.php？）

有什么明显的问题浮现在脑海中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:28:13.420

如果您在理解如何使单词复数或单数化时遇到困难，请使用变形器：http: [//book.cakephp.org/2.0/en/core-utility-libraries/inflector.html](http://book.cakephp.org/2.0/en/core-utility-libraries/inflector.html)

如果您使用的是 CakePHP 2.X，那么您的命名是错误的。您应该阅读食谱上的 CakePHP 命名约定：http: [//book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html)

**表：**

> 对应于 CakePHP 模型的表名是复数形式并带有下划线。

**连接表：**

> 在模型之间的 hasAndBelongsToMany (HABTM) 关系中使用的连接表应该以它们将按字母顺序连接的模型表命名（apples_zebras 而不是 zebras_apples）。

**控制器：**

> 控制器类名是复数，CamelCased，并以 Controller 结尾。PeopleController 和 LatestArticlesController 都是传统控制器名称的示例。

**楷模：**

> 模型类名是单数和 CamelCased。Person、BigPerson 和ReallyBigPerson 都是常规模型名称的示例。

在你的情况下，你的桌子没问题。关于其余的：

控制器应该是：`AdministratorsController.php`, `PropertiesController.php`,`AdministratorsPropertiesController.php`

模型应该是：`Administrator.php`, `Property.php`,`AdministratorsProperty.php`

# python - 按下按钮时有多个命令

> ID：13865009
> 
> 赞同：20
> 
> 时间：2012-12-13T17:15:19.543
> 
> 标签：python, python-2.7, button, tkinter, command

单击按钮时，我想运行多个功能。例如，我希望我的按钮看起来像

```
self.testButton = Button(self, text = "test", 
                         command = func1(), command = func2()) 
```

当我执行此语句时，我收到一个错误，因为我无法将某些东西分配给一个参数两次。如何使命令执行多个功能。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2017-06-26T16:42:41.923

您可以像这样简单地使用 lambda：

```
self.testButton = Button(self, text=" test", command=lambda:[funct1(),funct2()]) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-13T17:23:29.673

您可以创建一个用于组合函数的通用函数，它可能看起来像这样：

```
def combine_funcs(*funcs):
    def combined_func(*args, **kwargs):
        for f in funcs:
            f(*args, **kwargs)
    return combined_func 
```

然后你可以像这样创建你的按钮：

```
self.testButton = Button(self, text = "test", 
                         command = combine_funcs(func1, func2)) 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-13T17:18:38.410

```
def func1(evt=None):
    do_something1()
    do_something2()
    ...

self.testButton = Button(self, text = "test", 
                         command = func1) 
```

也许？

我想也许你可以做类似的事情

```
self.testButton = Button(self, text = "test", 
                         command = lambda x:func1() & func2()) 
```

但这真的很恶心......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-11T11:16:18.917

您可以为此使用 lambda：

```
self.testButton = Button(self, text = "test", lambda: [f() for f in [func1, funct2]]) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-11-30T10:43:41.157

`Button(self, text="text", command=func_1()and func_2)`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-15T06:15:38.917

我认为使用 lambda 运行多个函数的最佳方式。

这里有一个例子：

```
button1 = Button(window,text="Run", command = lambda:[fun1(),fun2(),fun3()]) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-06T16:29:47.930

我也发现了这个，它对我有用。在这样的情况下...

```
b1 = Button(master, text='FirstC', command=firstCommand)
b1.pack(side=LEFT, padx=5, pady=15)

b2 = Button(master, text='SecondC', command=secondCommand)
b2.pack(side=LEFT, padx=5, pady=10)

master.mainloop() 
```

... 你可以做...

```
b1 = Button(master, command=firstCommand)
b1 = Button(master, text='SecondC', command=secondCommand)
b1.pack(side=LEFT, padx=5, pady=15)

master.mainloop() 
```

我所做的只是将第二个变量重命名`b2`为与第一个变量相同的名称`b1`，并在解决方案中删除第一个按钮文本（因此只有第二个是可见的并且将作为一个单独的）。

我也尝试了函数解决方案，但由于一个模糊的原因，它对我不起作用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-03T11:16:38.370

这是一个简短的示例：按下下一个按钮时，它将在 1 个命令选项中执行 2 个功能

```
 from tkinter import *
    window=Tk()
    v=StringVar()
    def create_window():
           next_window=Tk()
           next_window.mainloop()

    def To_the_nextwindow():
        v.set("next window")
        create_window()
   label=Label(window,textvariable=v)
   NextButton=Button(window,text="Next",command=To_the_nextwindow)

   label.pack()
   NextButton.pack()
   window.mainloop() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-11T20:20:16.097

看看这个，我试过这个方法，我也遇到了同样的问题。这对我有用。

```
def all():
    func1():
        opeartion
    funct2():
        opeartion
    for i in range(1):
        func1()
        func2()

self.testButton = Button(self, text = "test", command = all) 
```

# geolocation - Lucene.net 邻近搜索

> ID：13865010
> 
> 赞同：5
> 
> 时间：2012-12-13T17:15:34.113
> 
> 标签：geolocation, lucene.net

有没有人有 lucene.net 索引纬度和经度值的经验，然后根据与单点的距离返回一组有序的结果？

Lucene.Net.Spatial 库会帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:43:48.967

聚会有点晚了，但是是的，空间图书馆是从这里开始的地方。其背后的基础是：

1) 在文档中添加经纬度字段

```
doc.Add(new Field("Latitude", 
                  NumericUtils.DoubleToPrefixCoded(Latitude), 
                  Field.Store.YES, Field.Index.NOT_ANALYZED));

doc.Add(new Field("Longitude", 
                  NumericUtils.DoubleToPrefixCoded(Longitude), 
                  Field.Store.YES, Field.Index.NOT_ANALYZED)); 
```

2) 为您的搜索需要支持的每一层粒度创建绘图仪

```
IProjector projector = new SinusoidalProjector();
var ctp = new CartesianTierPlotter(0, projector, 
                                   Fields.LocationTierPrefix);
StartTier = ctp.BestFit(MaxKms);
EndTier = ctp.BestFit(MinKms);

Plotters = new Dictionary<int, CartesianTierPlotter>();
for (var tier = StartTier; tier <= EndTier; tier++)
{
    Plotters.Add(tier, new CartesianTierPlotter(tier, 
                                            projector, 
                                            Fields.LocationTierPrefix));
} 
```

3) 使用绘图仪为每一层索引文档

```
private static void AddCartesianTiers(double latitude, 
                                      double longitude, 
                                      Document document)
{
    for (var tier = StartTier; tier <= EndTier; tier++)
    {
        var ctp = Plotters[tier];
        var boxId = ctp.GetTierBoxId(latitude, longitude);
        document.Add(new Field(ctp.GetTierFieldName(),
                        NumericUtils.DoubleToPrefixCoded(boxId),
                        Field.Store.YES,
                        Field.Index.NOT_ANALYZED_NO_NORMS));
    }
} 
```

索引文档后，您可以继续构建查询。此示例使用 ConstantScoreQuery，但您可以将其换成您的范围得分：

```
/*  Builder allows us to build a polygon which we will use to limit  
 * search scope on our cartesian tiers, this is like putting a grid 
 * over a map */
var builder = new CartesianPolyFilterBuilder(Fields.LocationTierPrefix);

/*  Bounding area draws the polygon, this can be thought of as working  
 * out which squares of the grid over a map to search */
var boundingArea = builder.GetBoundingArea(Latitude, 
                Longitude, 
                DistanceInKilometres * ProductSearchEngine.KmsToMiles);

/*  We refine, this is the equivalent of drawing a circle on the map,  
 *  within our grid squares, ignoring the parts the squares we are  
 *  searching that aren't within the circle - ignoring extraneous corners 
 *  and such */
var distFilter = new LatLongDistanceFilter(boundingArea, 
                                    DistanceInKilometres * KmsToMiles,
                                    Latitude, 
                                    Longitude, 
                                    ProductSearchEngine.Fields.Latitude,
                                    ProductSearchEngine.Fields.Longitude);

/*  We add a query stating we will only search against products that have 
 * GeoCode information */
var query = new TermQuery(new Term(Fields.HasGeoCode, 
                                   FieldFlags.HasField));

/*  Add our filter, this will stream through our results and 
 * determine eligibility */
masterQuery.Add(new ConstantScoreQuery(distanceFilter), 
                BooleanClause.Occur.MUST); 
```

所有这些都取自我刚刚在查看类似问题时写的一篇博客文章。您可以在[http://www.leapinggorilla.com/Blog/Read/1005/spatial-search-in-lucenenet看到它](http://www.leapinggorilla.com/Blog/Read/1005/spatial-search-in-lucenenet)

# c# - 如何删除我的 lambda 表达式的 Where 条件？

> ID：13865022
> 
> 赞同：1
> 
> 时间：2012-12-13T17:16:08.450
> 
> 标签：c#, linq, lambda

我正在尝试编写一个程序，向用户显示重复记录以更正数据或删除重复行。它有效，但我必须在我的 lambda 表达式中放置一个 Where 子句才能使其正常工作。我怎样才能删除这个无用的条款？

**其中（d => d.Id > 0）**在第 22 行。

```
public class Person
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public int Age { get; set; }
    }

    public class Program
    {
        static void Main(string[] args)
        {
            List<Person> dt = new List<Person>();
            dt.Add(new Person() { Id = 1, Name = "MICHAEL JACKSON", Age = 50 });
            dt.Add(new Person() { Id = 2, Name = "MICHAEL JACKSON", Age = 51 });
            dt.Add(new Person() { Id = 3, Name = "JOHN LENNON", Age = 40 });
            dt.Add(new Person() { Id = 4, Name = "JOHN LENNON", Age = 41 });
            dt.Add(new Person() { Id = 5, Name = "ELVIS PRESLEY", Age = 42 });

            var duplicates = dt.AsEnumerable().GroupBy(r => r.Name).Where(gr => gr.Count() > 1).ToList();
            if (duplicates.Any())
            {
                var query = duplicates.SelectMany(c => c.Where(d => d.Id > 0)).AsQueryable();

                foreach (var item in query)
                    Console.WriteLine(String.Format("{0} - {1}", item.Name, item.Age));
            }
            else
                Console.WriteLine("No records duplicates.");

            Console.ReadLine();
        }
    } 
```

这只是示例代码，我的代码进行了很多其他检查，但是如果有人知道如何删除此子句，那将对我非常有帮助。我认为这可能会影响性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:21:04.827

这在这里也有效：

```
 List<Person> dt = new List<Person>();
    dt.Add(new Person() { Id = 1, Name = "MICHAEL JACKSON", Age = 50 });
    dt.Add(new Person() { Id = 2, Name = "MICHAEL JACKSON", Age = 51 });
    dt.Add(new Person() { Id = 3, Name = "JOHN LENNON", Age = 40 });
    dt.Add(new Person() { Id = 4, Name = "JOHN LENNON", Age = 41 });
    dt.Add(new Person() { Id = 5, Name = "ELVIS PRESLEY", Age = 42 });

    var duplicates = dt.GroupBy(r => r.Name).Where(gr => gr.Count() > 1).ToList();
    if (duplicates.Any())
    {

        foreach (var item in duplicates)
            Console.WriteLine(String.Format("{0} - {1}", item.Key, string.Join(",", item.Select(p => p.Age))));
    }
    else
        Console.WriteLine("No records duplicates.");

    Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:19:55.010

那`duplicates`是因为是按对象分组的。如果您只想显示名称，请尝试此操作：

```
var query = duplicates.Select(c => c.Key);
foreach (var item in query)
    Console.WriteLine(String.Format("{0}", item)); 
```

如果你想显示重复的年龄，试试这个：

```
var query = duplicates.SelectMany(i => i);
foreach (var item in query)
    Console.WriteLine(String.Format("{0} - {1}", item.Name, item.Age)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T17:22:23.877

这对我有用。

```
 var query = duplicates.SelectMany(c => c).AsQueryable(); 
```

# mod-rewrite - .htaccess 不会重定向 .php 文件

> ID：13865024
> 
> 赞同：0
> 
> 时间：2012-12-13T17:16:23.027
> 
> 标签：mod-rewrite

我的 htaccess 中有这个，标准域重定向：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^sub\.domain\.com$ [NC]
RewriteRule ^(.*)$ "http\:\/\/fullnewdomain\.org\/$1" [QSA,R=301,L] 
```

它适用于文件夹、子文件夹、html 文件、图像等。但是，由于某种原因，它拒绝重定向 php 文件。相反，它们仍然正常运行，并且不会重定向到新域。关于为什么以及如何解决它的任何想法？这几乎就像这个主机在检查任何规则之前尝试执行 php 文件（如果是这种情况，我不确定我能做什么！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:39:18.843

原来有一个 htaccess 文件，主机放置在主目录（public_html 上一级）中以“对抗”机器人，但它所做的只是破坏了任何其他试图将规则应用于 php 文件的东西。删除文件，问题自行解决。

作为参考，hostgator 是主机，我仍然不知道他们为什么觉得有必要首先将文件放在那里。

# java - 更新对模型元素（jlist）所做的更改到 mysql 数据库，问题

> ID：13865025
> 
> 赞同：1
> 
> 时间：2012-12-13T17:16:23.003
> 
> 标签：java, mysql, swing, jlist, defaultlistmodel

请记住我是一个业余爱好者。由于某种原因，该代码仅在使用 NETBEANS 的 jlist 中只有一个以上元素时才有效，错误位于生成的代码中的某处。

这是我得到的错误：

> java.lang.ArrayIndexOutOfBoundsException: 1 >= 1

// 这是我的保存按钮，问题是当我尝试保存时**// voor ledenlijst**

```
private String input ;
Mainn main;
DefaultListModel model = new DefaultListModel();
int selectie;

 private void opslaanActionPerformed(java.awt.event.ActionEvent evt) {                                        
        String leiderString = leider.getText();
        String namen = model.get(1).toString();
        String codev = code.getText();
        String naam1 = model.get(selectie).toString();

        main = new Mainn();
        try {

            //voor leider wijzigen
            main.stat = main.con.prepareStatement("UPDATE project SET leider=? WHERE code = ?");
            main.stat.setString(1, leiderString);
            main.stat.setString(2, codev);

            // voor ledenlijst PROBLEM IS HERE
            main.stat2 = main.con.prepareStatement("UPDATE leden SET naam = ? WHERE naam = ?");
            main.stat2.setString(1, input);
            main.stat2.setString(2, naam1);

            main.stat.execute();
             main.stat2.execute();
            JOptionPane.showMessageDialog(null, "opgeslagen");
        } catch (SQLException ex) {
            System.out.println(ex);

        }

    } 
```

// 下面是进行更改的代码：

```
private void wijzigActionPerformed(java.awt.event.ActionEvent evt) {                                       
    //try {
    // } catch (SQLException ex) {
    //    System.out.println(ex);
    // }
    //  

  selectie = uitvoerLeden.getSelectedIndex();
  input = JOptionPane.showInputDialog("Wijzig dit project lid", model.elementAt(selectie));
  model.setElementAt(input,selectie);  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:21:33.500

在什么时候`model`被初始化？我猜这不是在执行此行之前，可能会发生错误。

```
 String namen = model.get(1).toString(); 
```

# php - 使用 PHP 阅读推文

> ID：13865027
> 
> 赞同：0
> 
> 时间：2012-12-13T17:16:29.570
> 
> 标签：php, twitter

我的推文脚本有一个小问题。但由于某种原因，我不知道错误可能是什么。这是它给我的错误：

```
$url    = "http://www.twitter.com/statuses/user_timeline/{$username}.xml?count={$number}";
$tweets = file_get_contents($url);
$feed   = new SimpleXMLElement($tweets);

function time_stamp($date){
if (empty($date)){
    return "No date provided";
} 
```

在 index.php 页面上，它将显示以下代码：

```
<?php
    $username = "user";//your twitter username
    $number = 3;//number of tweets
    include ("{$dir}/php/tweets.php");
?> 
```

你们知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:21:25.717

你不需要`file_get_contents()`

尝试：

```
$url    = "http://www.twitter.com/statuses/user_timeline/{$username}.xml?count={$number}";
$feed   = simplexml_load_file($url); 
```

此外，Twitter 不久前进行了一些更改，因此您的 URL 需要如下所示：

`$url = "http://api.twitter.com/1/statuses/user_timeline/{$username}.xml?count={$number}";`

检查[这个](https://dev.twitter.com/discussions/11694)讨论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T17:32:01.580

您可以比**XML更轻松、更快速地使用****JSON**

 **并获取您可以使用的内容

**卷曲** => 更快

或者

**文件获取内容**

网址

```
https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name={screenname}&count={count} 
```

像这样

```
<?php
  $url = 'https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=abdullaheid&count=3'

  $x = file_get_contents( $url ) ; // Using file get contents

  $object = json_decode( $x ) ;
  $array = (array) $object    ;

  print_r( $array ) ;

?> 
```**

# php - 在我编辑了我的 php 代码后，它无法正常工作

> ID：13865029
> 
> 赞同：0
> 
> 时间：2012-12-13T17:16:34.477
> 
> 标签：php, arrays, json

```
 $queries = array(
        array('method' => 'GET', 'relative_url' => '/'.$user),
        array('method' => 'GET', 'relative_url' => '/'.$user.'/home?limit=50'),
        array('method' => 'GET', 'relative_url' => '/'.$user.'/friends'),
        array('method' => 'GET', 'relative_url' => '/'.$user.'/photos?limit=6'),
        );

    // POST your queries to the batch endpoint on the graph.
    try{
        $batchResponse = $facebook->api('?batch='.json_encode($queries), 'POST');
    }catch(Exception $o){
        error_log($o);
    }

    //Return values are indexed in order of the original array, content is in ['body'] as a JSON
    //string. Decode for use as a PHP array.
    $user_info      = json_decode($batchResponse[0]['body'], TRUE);
    $feed           = json_decode($batchResponse[1]['body'], TRUE);
    $friends_list   = json_decode($batchResponse[2]['body'], TRUE); 
```

我已将代码编辑为

```
$queries = array('method' => 'GET', 'relative_url' => '/'.$user);

try{
    $batchResponse = $facebook->api('?batch='.json_encode($queries), 'POST');
}catch(Exception $o){
    error_log($o);
}

$user_info      = json_decode($batchResponse['body'], TRUE); 
```

但是当我回显 $user_info 时它不再正常工作并且没有价值

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:19:04.547

您更改了嵌套数组结构。我认为你需要：

```
$queries = array(
    array('method' => 'GET', 'relative_url' => '/'.$user)
    ); 
```

代替

```
$queries = array('method' => 'GET', 'relative_url' => '/'.$user); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:19:32.700

最后一行：

```
 array('method' => 'GET', 'relative_url' => '/'.$user.'/photos?limit=6'), 
```

最后不应该昏迷

```
 array('method' => 'GET', 'relative_url' => '/'.$user.'/photos?limit=6') 
```

# java - Java 编译器字符串优化

> ID：13865030
> 
> 赞同：6
> 
> 时间：2012-12-13T17:16:39.030
> 
> 标签：java, string, compiler-construction

在我看来，编译器将采用这样的方式是合理的：

```
log.info("A really long logger message that is kind of a pain in the tucous " + 
    "and violates formatting standards by making the line to long"); 
```

并将两个字符串编译为一个。我很确定这是真的，但如果有人提出来，我想把我的鸭子排成一排。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T17:18:37.287

是的，这将由 Java 语言规范的[常量表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)部分处理。特别参见第[15.18.1 部分。字符串连接运算符 +](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T17:19:42.250

> 由常量表达式（第 15.28 节）计算的字符串在编译时计算，然后将其视为文字。

向任何“挑战”你的人展示[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.10.5)的那句话。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T17:38:52.890

为了检查 JLS 关于常量表达式的说法是否属实，我编写了这段代码，Test.java

```
public static void main(String[] args) {
    log.warning("123" + "456");
} 
```

然后用 Jad 反编译 Test.class 并得到这个

```
public static void main(String args[])
{
    log.warning("123456");
} 
```

也就是说，在 Test.class 中只有一个文字“123456”

# java - 哪个更有效：i++ 或 i+c（其中 c=0,1,2,...）

> ID：13865037
> 
> 赞同：2
> 
> 时间：2012-12-13T17:17:16.083
> 
> 标签：java, android, arrays, element

我需要在循环中设置一个非常大的数组的元素。循环可能`continue`在某些情况下，因此必须单独计算数组位置。

我总是需要设置 10**个连续**的元素。（10 是一个例子。在某些情况下，我可能需要 30 或更多。）

是`k+c`(c=0,1,2,... 常数) 还是`k++`更好的方法？以下两种解决方案哪个更有效，为什么？

```
int k = 0;
for (int i = 0; i < aVeryHighNumber; i++) {                 
    if (continueRequired()) {
        continue;
    }

    k = ... // get k as a result of a certain calculation

    veryLargeArray[k++] = value0; // these values might be calculated on-the-fly
    veryLargeArray[k++] = value1;
    veryLargeArray[k++] = value2;
    veryLargeArray[k++] = value5;
    veryLargeArray[k++] = value4;
    veryLargeArray[k++] = value5;
    veryLargeArray[k++] = value6;
    veryLargeArray[k++] = value4;
    veryLargeArray[k++] = value7;
    veryLargeArray[k++] = value1;                   
} 
```

第二种解决方案：

```
for (int i = 0; i < aVeryHighNumber; i++) {                 
    if (continueRequired()) {
        continue;
    }

    k = ... // get k as a result of a certain calculation

    veryLargeArray[k]      = value0;
    veryLargeArray[k + 1]  = value1;
    veryLargeArray[k + 2]  = value2;
    veryLargeArray[k + 3]  = value5;
    veryLargeArray[k + 4]  = value4;
    veryLargeArray[k + 5]  = value5;
    veryLargeArray[k + 6]  = value6;
    veryLargeArray[k + 7]  = value4;
    veryLargeArray[k + 8]  = value7;
    veryLargeArray[k + 9]  = value1;
} 
```

理论上，第二个解决方案执行 9 个**加法**操作（它基本上是一个展开循环），而第一个解决方案执行 9 个递增操作，即它还需要存储 的值`k`。但是，现在自增可能是一种非常有效的操作，所以我不确定第二种解决方案是否更快。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T17:23:16.540

这不太可能有所作为。找到更重要的事情来担心。

（额外分配产生的任何差异都将由 JIT 优化。性能差异很可能*不存在*，而不仅仅是很小。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T17:26:45.017

就编译后的代码而言，它只是二进制加法。该`++`代码只是`+1`. 当这些在编译后转换为二进制加法时，两者之间没有区别。

即使确实存在差异，任何现代计算机在计算时间上都不会显示差异，直到您执行 1000 次。

# ruby-on-rails-3 - Capybara::ElementNotFound on Dropdown Collection Select using Rspec

> ID：13865040
> 
> 赞同：0
> 
> 时间：2012-12-13T17:17:25.023
> 
> 标签：ruby-on-rails-3, rspec, capybara

我一直在用头撞墙，试图弄清楚为什么这个测试没有通过 Rspec。它在浏览器中工作。

我有一个属于等级对象的课程表单。在 Course 表单中，有一个选择框允许用户选择 Grade：

```
<%= form_for [current_user, @course] do |course| %>
...
<%= course.label :grade_id, "What age are the students?" %>
<%= course.collection_select(:grade_id, Grade.all, :id, :grade_level, options ={:prompt => "Select Grade"})  %> 
```

我在 Rspec 中的测试如下所示：

```
describe "A workign form" do
  before do
    sign_in_via_form #signs the user in
    visit new_user_course_path(@user) #references @user, defined in Helper
  end
let(:course){@user.courses}

  context "With valid information" do
    it "adds a course" do
      expect {
        fill_in 'course_name', with:'Course Name'
        select 'Fall', from: 'course_course_semester'
        select '2012', from: 'course_course_year'
        select 'Grade 5', from: 'course_grade_id'
        fill_in 'course_summary', with: 'Perfunctory Summary'
        fill_in 'course_objectives_attributes_0_objective', with: "an objective"
        click_button "submit"
     }.to change(course, :count).by(1)
    end
  end
...#other tests
end #describe block 
```

在我的表单中生成的 HTML 如下所示：

```
<label for="course_grade_id">What age are the students?</label>
<select id="course_grade_id" name="course[grade_id]"><option value="">Select Grade</option>
    <option value="1">Kindergarten</option>
    <option value="2">Grade 1</option>
    <option value="3">Grade 2</option>
    <option value="4">Grade 3</option>
    <option value="5">Grade 4</option>
    <option value="6">Grade 5</option>
    <option value="7">Grade 6</option>
    <option value="8">Grade 7</option>
    <option value="9">Grade 8</option>
    <option value="10">Grade 9</option>
    <option value="11">Grade 10</option>
    <option value="12">Grade 11</option>
    <option value="13">Grade 12</option>
    <option value="14">High School</option>
</select> 
```

让我知道是否需要其他代码；我很乐意提供它。我的其他选择框正在工作，但它们也是模型的一部分，其中数组驱动内容。但是，在这种情况下，相关模型正在驱动内容。我不确定这是否重要，如果重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:48:24.297

下拉列表的数据来自数据库。Rails 使用单独的数据库进行测试，默认情况下它的表是空的。因此，您需要填充成绩表以便在下拉列表中有一些选项。

使用 FactoryGirl 它看起来像

```
FactoryGirl.define do
  factory :grade do
    sequence(:grade_level) { |n| "Grade #{n}" }
  end
end 
```

和测试

```
describe "A workign form" do
  before do
    sign_in_via_form #signs the user in
    FactoryGirl.create_list(:grade, 14) # fill the grades table before visit the page
    visit new_user_course_path(@user) #references @user, defined in Helper
  end
  ... 
```

# cron - Informix 连接通过 Windows 工作，但不能通过 Cygwin

> ID：13865042
> 
> 赞同：1
> 
> 时间：2012-12-13T17:17:30.163
> 
> 标签：cron, odbc, cygwin, informix

不知道该去哪里。我有一个 PHP 脚本，它调用一个连接到 Informix 数据库的 PERL 脚本。当我将脚本运行到 Windows cmd 提示符时，此设置工作得很好，但是当我尝试在 cygwin 中通过 cron 运行它时，它会失败

> [Informix][Informix ODBC 驱动程序]无法加载翻译共享库 (DLL)。(SQL-IM009)

我尝试将 Informix bin 目录 (/cygdrive/c/Program\ Files\ (x86)/IBM/Informix/Client-SDK/bin) 添加到 crontab 文件中的 PATH 变量中，但没有任何更改。我还尝试将同一目录添加到 crontab 文件中的 INFORMIXDIR 变量中，但随后出现以下错误消息

> [Informix][Informix ODBC 驱动程序][Informix]未指定的系统错误 = -23101。(SQL-HY000)

如果我在 finderr.exe（由驱动程序提供）中查看该错误，我发现这意味着它无法加载语言环境类别或我的 INFORMIXDIR 不正确，但我不确定如何设置 CLIENT_LOCALE 或 DB_LOCALE。

然后我想我通过使用正确的目录分隔符解决了这个问题，并在 crontab 中删除了 INFORMIXDIR 变量的 bin 子目录，因为我再次遇到 SQL-IM009 错误。

我在 cygwin 中使用 Windows PHP 和 PERL 可执行文件，所以我不确定为什么如果我通过 cmd 提示符运行它，它为什么不能正常工作。有人知道这是为什么吗？

我在 Windows Server 2008 R2 云实例上运行它，并且我正在尝试复制一个工作设置，以便我们可以将它移动到异地位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:25:30.487

事实证明，cygwin 不喜欢 Client-SDK 所在的目录。一旦我将它重新安装到 C:/IBM/Informix/Client-SDK ，一切都开始工作了。我不确定问题是括号还是空格，但是让它们脱离路径似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:45:35.100

看起来更像是在 PATH 环境中使用反斜杠和斜杠组合的问题。*nix 的斜杠，WIN 和 DOS 的反斜杠。CLIENT、DBLOCALE、DBDATE 等可以在 WIN/DOS 中的 servernane.cmd 文件和 .profile、.cshrc、.login 等中设置，具体取决于您使用的 *nix shell。您可以将 Informix 二进制文件和其他支持文件安装在您喜欢的任何目录中，只要 INFORMIXDIR 环境指向安装的目录即可。我在 C:\INFORMIX 中安装了 11.70.FC6，在 C:\DBSPACES 中安装了我的 dbspace。

# shell - 使用 kill -9 和 kill SIGUSR2 的区别

> ID：13865045
> 
> 赞同：0
> 
> 时间：2012-12-13T17:17:38.587
> 
> 标签：shell, kill-process, sigkill

使用 kill 命令格式的操作有什么区别，在什么情况下使用哪一种。

```
kill -9 process-id
kill SIGUSR2 process-id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:36:45.200

如果你想发送`SIGUSR2`到一个进程，你可以使用：

```
kill -SIGUSR2 $pid
kill -USR2 $pid
kill -10 $pid   # This will vary with platform 
```

如果你想发送`SIGKILL`到一个进程，你可以使用：

```
kill -SIGKILL $pid
kill -KILL $pid
kill -9 $pid 
```

不知道如何回答您关于“哪种情况”的问题。如果要发送`USR2`，则使用前 3 个命令之一。如果要发送`KILL`，请使用后者之一。您通常希望避免使用`KILL`, 作为一个接收到 a 的进程，`KILL`它自身无法清理。另一方面，很多软件写得不好，只能通过`SIGKILL`. 通常认为发送更有礼貌`TERM`，然后在第二次发送之前等待一段`TERM`时间，然后在发送之前再次等待`KILL`。 `USR2`通常只对期待它并以某种有用方式响应的程序有用。如果程序不期望该信号并且没有采取任何措施来忽略它，则默认行为是终止。

请注意，SIGUSR2 的具体信号编号会有所不同。根据平台的不同，它可能是 10、12、31，可能还有许多其他值。最好避免显式设置该值。唯一[标准化](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/kill.html)的信号编号是 1、2、3、6、9、14 和 15，因此 9 始终是`SIGKILL`，但`SIGUSR2`可能（并且确实！）会有所不同。

# sql-server-2005-express - SQL Server 2012 Express 是否比 SQL Server 2005 Express 快？

> ID：13865057
> 
> 赞同：0
> 
> 时间：2012-12-13T17:18:04.907
> 
> 标签：sql-server-2005-express, sql-server-2012-express

最近，我将我的开发计算机升级到 Windows 8，现在，我很难在我的开发计算机上安装 SQL Server 2005 express。我的 ASP.NET MVC 网站项目基于 SQL Server 2005 Express。（实体框架 CodeFirst 5.0）

现在，我在想，也许将我的网站依赖项升级到 SQL Server 2012 Express 可能是个好主意。但是，我在一些网站上看到，SQL Server 2012 比 SQL Server 2008 慢，SQL Server 2008 比 SQL Server 2005 慢。我的数据库表非常简单，不需要 SQL Server 2008 或 SQL Server 2012 的新功能.

我有点困惑，你能给我一些建议吗？我的意思是，SQL Server 2012 express 是否真的比 SQL Server 2005 express 慢？如果是这样，那么我会尽量坚持使用 SQL Server 2005 express，因为我真的不需要 SQL 2012 的额外功能。

# r - 在R中将多条输出打印到同一个CSV？

> ID：13865067
> 
> 赞同：1
> 
> 时间：2012-12-13T17:18:40.163
> 
> 标签：r, csv, file-io, traminer

我正在使用 TraMineR 包。我正在将输出打印到 CSV 文件，如下所示：

```
write.csv(seqient(sequences.seq), file = "diversity_measures.csv", quote = FALSE, na = "", row.names = TRUE)
write.csv(seqici(sequences.seq), file = "diversity_measures.csv", quote = FALSE, na = "", row.names = TRUE, append= TRUE)
write.csv(seqST(sequences.seq), file = "diversity_measures.csv", quote = FALSE, na = "", row.names = TRUE,  append= TRUE) 
```

可以在[此处](https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/rubinius_rubinius_sequencing/sequences.seq_object)找到 dput(sequences.seq) 对象。

但是，这不会正确附加输出，而是会创建以下错误消息：

```
In write.csv(seqST(sequences.seq), file = "diversity_measures.csv",  :attempt to set 'append' ignored 
```

此外，它只给我最后一个命令的输出，所以它似乎每次都会覆盖文件。

是否可以在单个 CSV 文件中获取所有列，每个列都有一个列名（即熵、复杂性、湍流）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T17:44:37.747

您可以`append=TRUE`在`write.table`调用中使用并使用相同的文件名，但您需要根据需要指定所有其他参数。 `append=TRUE`包装函数不可用`write.csv`，如文档中所述：

> 这些包装器故意不灵活：它们旨在确保使用正确的约定来编写有效的文件。更改 append、col.names、sep、dec 或 qmethod 的尝试将被忽略，并发出警告。

或者你可以写出

```
write.csv(data.frame(entropy=seqient(sequences.seq), 
                     complexity=seqici(sequences.seq), 
                     turbulence=seqST(sequences.seq)),
          'output.csv') 
```

# c++ - 如何将QNetworkReply信号连接到qt中的进度条

> ID：13865068
> 
> 赞同：1
> 
> 时间：2012-12-13T17:18:39.937
> 
> 标签：c++, qt

在下面的代码中：

```
connect(network_access_manager_, SIGNAL(finished(QNetworkReply*)),
    this, SLOT(onRequestCompleted_progress(QNetworkReply *)));

    network_access_manager_->get(request); 
```

关键是，虽然通过 get(request) 下载文件正在进行中，但我想将 QNetworkReply 的信号连接到 progressBar，但我根本不知道该怎么做？QNetworkReply 未命名。
有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:25:12.497

`network_access_manager_->get(request);`返回`QNetworkReply*`，所以

```
QNetworkReply *reply = network_access_manager_->get(request);
connect(reply, SIGNAL(downloadProgress(qint64, qint64)), this, SLOT(......)) 
```

将服务。

# linux - Sed 分隔符与 Grep 不兼容

> ID：13865070
> 
> 赞同：0
> 
> 时间：2012-12-13T17:18:45.867
> 
> 标签：linux, sed, grep

将 grep 与 sed 结合使用时，只要使用标准的正斜杠分隔符，一切都可以。

```
find . -maxdepth 2 -xdev -type f -exec grep -i "teststring" -l {} \; -exec sed -i '/./d' {} \; 
```

如果我将它更改为另一个字符，如“+”或“#”，它就不起作用（我需要更改它，因为测试字符串可能包含“/”字符并导致错误。

```
find . -maxdepth 2 -xdev -type f -exec grep -i "teststring" -l {} \; -exec sed -i '#.#d' {} \; 
```

有没有解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:19:19.777

看起来您正在尝试清空任何包含 teststring 的文件。那只是：

```
find . -maxdepth 2 -xdev -type f | 
while IFS= read -r file; do
   if grep -i "teststring" -q "$file"; then
      > "$file"
   fi
done 
```

如果您只想删除那些至少包含一个字符的行，那就是：

```
find . -maxdepth 2 -xdev -type f | 
while IFS= read -r file; do
   if grep -i "teststring" -q "$file"; then
      sed -i '/^./d' "$file"
   fi
done 
```

如果你想删除那些包含一些字符串“foo”的行，那么那就是：

```
find . -maxdepth 2 -xdev -type f | 
while IFS= read -r file; do
   if grep -i "teststring" -q "$file"; then
      sed -i '/foo/d' "$file"
   fi
done 
```

只需遵循该模式，假设您没有包含换行符的文件名，您想做的任何事情都是微不足道的。如果您愿意，您可以将 grep 移到查找行中，但这似乎有点毫无意义并且会混淆代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:30:49.517

### 您需要反斜杠第一个分隔符

有时用于 sed（例如，OSX）的 BSD 手册页并没有说清楚，但是只有在 RE 前面有反斜杠时，对 sed 正则表达式地址使用任意分隔符才有效。

```
\xMATCHTHISxd 
```

这将删除有`MATCHTHIS`某处的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T17:25:45.960

根据[sed 的手册页](http://linux.die.net/man/1/sed)，任何字符都可以用作匹配正则表达式的行，语法为`\cregexpc`where `c`is any character。

```
find . -maxdepth 2 -xdev -type f -exec grep -i "teststring" -l {} \; -exec sed -i '\#.#d' {} \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T17:26:39.030

如果要在`sed`删除命令中使用不同的分隔符，则需要以反斜杠开始地址，如下所示：

```
sed -i '\#.#d' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T17:24:11.893

这与[sed](/questions/tagged/sed "显示标记为“sed”的问题")与[grep](/questions/tagged/grep "显示标记为“grep”的问题")没有任何关系，如果你真的不能改变分隔符然后只是`/`用反斜杠转义所有实例，`\`如：

```
sed -i '/\//d' 
```

但`sed -i '\#/#d'`这样做的技巧，这将删除所有包含`/`.

您应该告诉我们您要做什么，因为我觉得这里根本不需要[grep 。](/questions/tagged/grep "显示标记为“grep”的问题")

# android - 类转换异常错误

> ID：13865071
> 
> 赞同：0
> 
> 时间：2012-12-13T17:18:59.860
> 
> 标签：android

**尝试运行具有两个类的动态壁纸项目： 1\. LiveWallpaper 2\. LiveWallpaperSettings 我在清单中添加了这两个名称，但我不知道为什么我在这里得到这个类广播异常。我也在添加清单代码：**

```
 12-13 22:41:48.861: W/dalvikvm(3599): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
    12-13 22:41:48.871: E/AndroidRuntime(3599): FATAL EXCEPTION: main
    12-13 22:41:48.871: E/AndroidRuntime(3599): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{ca.jvsh.livewallpaper/ca.jvsh.livewallpaper.LiveWallpaper}: java.lang.ClassCastException: ca.jvsh.livewallpaper.LiveWallpaper cannot be cast to android.app.Activity
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.os.Handler.dispatchMessage(Handler.java:99)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.os.Looper.loop(Looper.java:137)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.app.ActivityThread.main(ActivityThread.java:4340)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at java.lang.reflect.Method.invokeNative(Native Method)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at java.lang.reflect.Method.invoke(Method.java:511)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at dalvik.system.NativeStart.main(Native Method)
    12-13 22:41:48.871: E/AndroidRuntime(3599): Caused by: java.lang.ClassCastException: ca.jvsh.livewallpaper.LiveWallpaper cannot be cast to android.app.Activity
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
    12-13 22:41:48.871: E/AndroidRuntime(3599):     ... 11 more
    12-13 22:41:51.891: I/Process(3599): Sending signal. PID: 3599 SIG: 9 
```

****清单代码****

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ca.jvsh.livewallpaper"
    android:versionCode="1"
    android:versionName="1.0.20100908.1" >
        <uses-sdk android:minSdkVersion="7" />
        <uses-feature android:name="android.software.live_wallpaper" />
        <application
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:permission="android.permission.BIND_WALLPAPER" >
        <service
            android:name=".LiveWallpaper"
            android:icon="@drawable/icon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService" />
            </intent-filter>
                <meta-data
                android:name="android.service.wallpaper"
                android:resource="@layout/livewallpaper" />
        </service>
        <activity
            android:name=".LiveWallpaperSettings"
            android:exported="true"
            android:icon="@drawable/icon"
            android:label="@string/livewallpaper_settings"
            android:theme="@android:style/Theme.Light.WallpaperSettings" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />  
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:20:40.283

您在清单中声明 Service 和 Activity 具有相同的名称，因此每次查看时使用不同的名称

```
<service
            android:name=".LiveWallpaper"  <<<-----here
            android:icon="@drawable/icon"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name=
                  "android.service.wallpaper.WallpaperService" />
            </intent-filter>

            <meta-data
                android:name="android.service.wallpaper"
                android:resource="@layout/livewallpaper" />
        </service>

        <activity
            android:name=".LiveWallpaper"   <<<-----here
            android:exported="true"
            android:icon="@drawable/icon"
            android:label="@string/livewallpaper_settings" 
```

并在代码部分中，如果您正在启动 LiveWallpaper 服务，则将其作为 LiveWallpaperSettings 启动：

```
Intent intent=new Intent(getApplicationContext(),LiveWallpaper.class);
startService(intent); 
```

# architecture - 是否有适用于 JVM 的持久队列库？

> ID：13865072
> 
> 赞同：0
> 
> 时间：2012-12-13T17:19:03.417
> 
> 标签：architecture, asynchronous, queue, message-queue

我正在寻找排队到磁盘而不是内存的 BlockingQueue 的功能。我宁愿避免使用重量级的解决方案（例如 JMS）。理想情况下，队列应该在 JVM 上与客户端（生产者）和消费者在同一进程中运行。如果消费者停止，它应该能够继续排队，并且在重新启动时也能存活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:08:42.080

破解关系表的顶部怎么样？这种方法有一些优点。

它可能是一种反模式，有时它是。有一些陷阱（特别是如果没有特别注意，争用可能会很高）。

但也有一些有意义的优势：您可以将队列数据与其他数据集成，获得 ACID 语义，获得一致的备份（任何外部队列都无法获得这些，因为您无法同时备份它作为数据库），您可以在项目中使用新技术保存。

为每个队列项分配一个状态和索引。

这是一个简单的争用管理技术：向每个队列行添加一个随机数。出队时，请求`select TOP 1 * from QueueTable where RandomNumberColumn > RAND() order by RandomNumberColumn`. 这使您可以从随机位置获取物品，从而大大减少了由于 X 锁定而导致的阻塞。

# iphone - 无法查看配置文件

> ID：13865074
> 
> 赞同：0
> 
> 时间：2012-12-13T17:19:12.440
> 
> 标签：iphone, ios, xcode

我正在一个应用程序中工作，直到昨天我能够毫无问题地构建它。但是现在我无法在目标的构建设置下选择配置文件。它将配置文件显示为此图像中给出的通用文件。我该如何解决？![在此处输入图像描述](../Images/e2a51b5f1afed2122e451ec6734d373c.png)

# magento - 无论如何在magento中禁用数量编辑？

> ID：13865080
> 
> 赞同：0
> 
> 时间：2012-12-13T17:19:32.563
> 
> 标签：magento

正如我的标题所说，是否有禁用magento购物车中的数量编辑？目前，我可以在 magento 中看到文本框。我想以纯文本形式查看数量或禁用文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:28:38.920

我相信这个`.phtml`文件在，`app/design/frontend/base/default/checkout`所以如果是，你可以复制文件并将其粘贴到你自己的自定义主题（`app/design/frontend/[custom_package]/[custom_theme]/template/checkout/...`）中。

`.phtml`在该模板文件中将文本框修改为只读或您想要的任何内容。

请注意，修改核心文件*不是*一个好习惯。对于`app/design/`代码，最好制作自己的包/主题并复制/粘贴默认内容并在那里修改（确保您的包/主题已在管理面板中设置）。

**原始文件位置**：`/app/design/frontend/base/default/template/checkout/cart/item`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:29:09.523

是的，您可以，转到以下路径 app\design\frontend\base\default\template\catalog\product\view\addtocart.phtml。

```
 <?php $_product = $this->getProduct(); ?>
<?php $buttonTitle = $this->__('Add to Cart'); ?>
<?php if($_product->isSaleable()): ?>
    <div class="add-to-cart">
        <?php if(!$_product->isGrouped()): ?>
        <label for="qty"><?php echo $this->__('Qty:') ?></label>
        <input type="text" name="qty" id="qty" maxlength="12" value="<?php echo $this->getProductDefaultQty() * 1 ?>" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
        <?php endif; ?>
        <button type="button" title="<?php echo $buttonTitle ?>" class="button btn-cart" onclick="productAddToCartForm.submit(this)"><span><span><?php echo $buttonTitle ?></span></span></button>
        <?php echo $this->getChildHtml('', true, true) ?>
    </div>
<?php endif; ?> 
```

将输入标签编辑为文本或根据需要将其注释掉

# android - Android 嵌入式 apk

> ID：13865084
> 
> 赞同：1
> 
> 时间：2012-12-13T17:19:40.487
> 
> 标签：android, installation, dex

我在 android 中有两个应用程序（apk 文件）。假设 app1.apk 和 app2.apk。我想知道是否可以从 app1.apk 开始在 app2.apk 上的任何活动而无需安装 app2.apk。问题是我想对用户隐藏 app2.apk。可能吗？

先感谢您...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:21:49.547

您无法运行未安装的应用程序。它还没有通过任何安全步骤。

Aka，用户还没有授予它运行权限（在安装期间完成）。所以永远不可能。

为什么不将 app2 中的活动捆绑到 app1 中。然后它们将与 app1 一起安装，并且可以运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:37:39.983

如果您像其他人提到的那样做，将所有活动放在一个捆绑的应用程序中，您可以使用 Intents 启动其他活动，甚至从其他活动中获取结果。

[这](http://developer.android.com/guide/components/intents-filters.html)可能会有所帮助，来自 Android 开发者指南。

# spservices - 是否可以使用 GetListItems 执行查询以使用 SPServices 从共享点列表中检索特定项目？

> ID：13865087
> 
> 赞同：0
> 
> 时间：2012-12-13T17:19:49.753
> 
> 标签：spservices

我想知道是否可以使用 GetListItems 使用特定值查询列表并仅返回与该查询匹配的行？

目前我可以使用 GetListItems 检索列表中的所有项目，或特定视图中的所有项目，但我无法进一步过滤。

我很欣赏我可以只对返回的项目集执行查询，但想知道是否有可能（并且可能更快）让 sharepoint 为我执行查询。

在 yoursharepoint/_vti_bin/Lists.asmx?op=GetListItems 我看到的页面中，

```
 <query>
    <xsd:schema>schema</xsd:schema>xml</query>
  <viewFields>
    <xsd:schema>schema</xsd:schema>xml</viewFields>
  <rowLimit>string</rowLimit>
  <queryOptions>
    <xsd:schema>schema</xsd:schema>xml</queryOptions> 
```

但不知道如何/是否可以使用这些参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:50:45.530

简短回答：是的，可以将它与各种过滤器一起使用

过滤语言 (XML) 称为 CAML..

您应该查看 SPServices 文档和论坛以获取大量示例。GetListItems 的文档应该专门解决​​您对其使用的需求......

本指南将帮助您开始在 CAML 中构建查询：http: [//sharepointmagazine.net/articles/writing-caml-queries-for-retrieving-list-items-from-a-sharepoint-list](http://sharepointmagazine.net/articles/writing-caml-queries-for-retrieving-list-items-from-a-sharepoint-list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:54:58.453

是的，您可以调用 GetListItems 操作并传递 CAMLQuery 参数。假设以下html

```
<div id='result'></div> 
```

我正在使用以下 SPServices 调用在标题列中查找与术语“Bob Tester”匹配的所有列表项。

```
$().SPServices({
   operation: "GetListItems",
   async: false,
   listName: "MyCustomList",
   CAMLQuery: "<FieldRef Name='Title'></FieldRef><Value Type='Text'>Bob Tester</Value>",
   CAMLViewFields: "<ViewFields><FieldRef Name='Title' /></ViewFields>",
   completefunc: function (xData, Status) {
      $(xData.responseXML).SPFilterNode("z:row").each(function() {
         var foundItem = "<div>" + $(this).attr("ows_Title") + " matches</div>";
         $("#result").append(foundItem);
      });
   }
}); 
```

# jquery - 如何使 jquery 代码在所有浏览器中工作？

> ID：13865091
> 
> 赞同：0
> 
> 时间：2012-12-13T17:20:09.813
> 
> 标签：jquery, cross-browser

```
$(function()
{
    var list = $('#ulGall li');
    currentItem = 0;

    function changeToSlide(index) 
    {
        var i = index;
        var nextImage = "url(" + $('#ulGall img' + ':eq(' + i +')').attr('src');
        $('#gall').css('background-image', nextImage);
    }

    $('#gRight').click(function() 
    {
        var i = currentItem;
        if ( i < (list.length - 1))
        {
            changeToSlide(i+1);
            currentItem += 1;
        } 
        else 
        {
            changeToSlide(0);
            currentItem = 0;   
        }

        $("#gInfo").hide();
    });

    changeToSlide(0); // this is the starting background of #gall
}); 
```

此代码位于一个单独的文件中，它更改了#gall 的背景图像（单击#gRight）
它在 Firefoks 中完美运行，但在 IE8 和 Chrome 中却不行。
我在同一个文件中有另一个 jQuery 函数，它们在 IE 和 Chrome 中工作。
未在 Opera 和 Safari 中测试。

我怎样才能使这段代码成为`cross-browser`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:21:59.920

似乎缺少结束的右括号

```
"url(" + $('#ulGall img' + ':eq(' + i +')').attr('src') + ")"  ;
                                                           ^-- Missing 
```

这可能会影响它的工作方式，`IE-8`因为糟糕的 HTML 可能会搞砸它。

如果是，`HTML is not properly formed`那么它可能**不会首先呈现**。

最后你还有一个额外的右括号.. `});` ..也删除它

# algorithm - 如何在线性时间内计算列表中的不同值？

> ID：13865094
> 
> 赞同：8
> 
> 时间：2012-12-13T17:20:21.457
> 
> 标签：algorithm, list, count, complexity-theory, distinct-values

我可以考虑对它们进行排序，然后逐个检查每个元素，但这是 nlogn。是否有一种线性方法来计算列表中的不同元素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T17:22:52.547

**更新： - 独特与独特**

* * *

如果您正在寻找**“唯一”**值（例如，如果您多次看到一个元素“JASON”，则它不再是唯一的，不应计算在内）

您可以使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)在线性时间内做到这一点；）

（广义/与语言无关的想法是[Hash table](http://en.wikipedia.org/wiki/Hash_table)）

HashMap / Hash 表的每个条目都是`<KEY, VALUE>`一对，其中键是唯一的（但对它们在对中的对应值没有限制）

**步骤1：**

遍历列表中的所有元素一次：**O(n)**

*   对于列表中看到的每个元素，检查它是否已经在 HashMap 中**O(1)，已摊销**
    *   如果没有，则将其添加到 HashMap 中，并将列表中元素的值作为 KEY，并且到目前为止您看到此值的次数为 VALUE **O(1)**
    *   如果是这样，请增加您到目前为止看到此 KEY 的次数**O(1)**

**第2步：**

遍历 HashMap 并计算 VALUE 正好等于 1 的 KEYS（因此是唯一的）**O(n)**

**分析：**

*   运行时间：O(n)，摊销
*   空间：O(U)，其中 U 是不同值的数量。

* * *

但是，如果您正在寻找**“不同”**的值（就像您想计算有多少*不同*的元素一样），请使用[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)而不是 HashMap / Hash 表，然后简单地查询 HashSet 的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:46:04.030

您可以调整[这个非常酷的 O(n) 时间**和 O(1) 空间**就地算法](https://stackoverflow.com/a/1533667/47984)来删除重复值，以完成计算不同值的任务——只需计算等于最终 O 中的哨兵值的值的数量(n) 通过，并从列表的大小中减去它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T17:54:13.513

将列表中的每个元素添加到[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)，然后检查 HashSet 的[大小](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#size%28%29)（基数），即列表中不同值的数量。

# wpf - 从本地 xml 文件同步到 sql server db 的两种方式

> ID：13865095
> 
> 赞同：0
> 
> 时间：2012-12-13T17:20:23.413
> 
> 标签：wpf, xml, web-services, sql-server-2008

我知道在同步方面，很多人会说使用 sqlCE 并将其同步到中央数据库。我的应用程序已经使用原始 xml 来保存我的数据（轻量级）。我的 wpf 应用程序在本地存储数据，而不需要在原始 xml 文件上上网。我正在尝试找到将本地 xml 同步到我的 sql 服务器的最佳方式（方法）。我的目标是将本地 xml 文件与中央数据库同步并更新中央数据库数据，以及拉下更新的数据并更新到我的本地 xml。希望我的问题很清楚。我以前从未使用过网络服务，因此将不胜感激任何帮助或指导。使用 Sync 框架可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:32:37.700

同步数据并非易事。看看[同步框架](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)。我不知道它是否支持开箱即用的 XML，但您可能可以实现一个合适的提供程序。

一个警告 - 即使同步几个 SQL Server [Express|CE] 数据库，开箱即用的支持，也需要相当多的工作才能使其正常工作。

# jquery - 如何使用 jQuery 实现类似 http://ellislab.com/codeigniter 的火花效果

> ID：13865096
> 
> 赞同：0
> 
> 时间：2012-12-13T17:20:33.950
> 
> 标签：jquery, html, animation

我想重新创建一个类似[http://ellislab.com/codeigniter](http://ellislab.com/codeigniter)的效果，在他们的橙色“英雄”引导的背景中有火花飞舞。

我查看了它背后的 jQuery，看起来很复杂，是否有任何库或任何“模板/教程”明智的，你可以指出的方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:36:04.873

好吧，JavaScript 的好处在于它是客户端，所以你可以*确切地*看到它们是如何做到的。这是一段非常简单的 javascript，他们只是使用 css 来设置火花的样式。这是运行火花的主要代码：

```
// Let some sparks fly in a somewhat randomly timed fashion
          this.startSpark = function(){
            if (me.sparkInterval != null) return;
            me.sparkInterval = setInterval(function(){
              var opac = Math.max(.15, Math.random() - .4),
                  size = Math.floor(Math.random() * 120 + 30),
                  spark = $('<div/>').addClass('spark')
                    .css({
                      'width': size,
                      'height': size,
                      'opacity': opac, 
                      '-moz-opacity': opac
                    });

              $wrapper.append(
                spark
                .css(
                  {
                    "bottom": "-100px",
                    "left": (Math.random() * 100) + "%"
                  }
                )
                .animate(
                  {
                    "bottom": "800px",
                  },
                  Math.floor(Math.random()*3000+1000),
                  "linear",
                  function(){
                    $(this).remove(); // don't need the spark if we're in the dark
                  }
                )
              )
            }, 500)
          } 
```

基本上，他们创建一个'spark' div，随机设置不透明度、宽度和高度以及位置，将其附加到 DOM，然后随机对其进行动画处理，当动画完成后，他们将其从 DOM 中删除。如果您不确定如何打开检查元素或萤火虫，这是整个源文件：http: [//ellislab.com/asset/js/ci.js](http://ellislab.com/asset/js/ci.js)

恐怕我找不到任何适合你的“动画随机火花”jQuery 插件。把这算作一次冒险吧。深入了解，学习一些 JavaScript，打破常规，玩得开心！我敢肯定，通过一些工作和学习，您可以完成这项工作。

# ios - 适用于 iOS 的 Google Maps SDK 预览 API 密钥

> ID：13865098
> 
> 赞同：3
> 
> 时间：2012-12-13T17:20:41.290
> 
> 标签：ios, google-maps

谷歌表示，为了能够使用地图 API，您需要注册以访问 API 密钥，当 API 密钥可用时，他们会与我们联系。我注册了钥匙，但到目前为止我还没有得到任何东西。

知道这些钥匙什么时候可以使用..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:34:26.467

我注册了获取 google ios sdk 的 api 密钥。我在注册 3 天后获得了密钥。所以这将是关于您提供的 ID 或您接受谷歌条款和条件的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:02:21.853

不知道何时可能会发放许可证，但请注意 Google Maps SDK 中存在大量许可证限制：

[https://developers.google.com/maps/licensing](https://developers.google.com/maps/licensing)

每天只有 2500 个地理编码和方向请求，还有一些分辨率限制。

使用没有限制的 iOS 映射框架可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:10:05.873

您可以按照这些[说明](https://developers.google.com/maps/documentation/ios/start)通过[APIS 控制台](https://code.google.com/apis/console/)***创建新的 iOS 密钥***。如果成功，将会有一个 40 字符的 API 密钥，也许您可​​以使用此密钥进行测试。

# ruby-on-rails - Resque 清除失败的作业是成功的重试

> ID：13865099
> 
> 赞同：3
> 
> 时间：2012-12-13T17:20:42.277
> 
> 标签：ruby-on-rails, ruby, redis, resque

目前是否可以在强制重试后成功清除失败的作业？目前，失败的队列与重试之前的失败数量相同。是否有一个工具或内置的 Resque 可以比默认行为更好地管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:35:53.307

我从来没有试过这个，但一个快速的谷歌发现 resque 清洁器：

[https://github.com/ono/resque-cleaner](https://github.com/ono/resque-cleaner)

我们使用 resque 和 resque-status 但手动清除队列，以便我们可以查看损坏的内容等。

# android - 轮询 .NET Web 服务时减少流量和服务器负载

> ID：13865104
> 
> 赞同：0
> 
> 时间：2012-12-13T17:20:49.497
> 
> 标签：android, web-services, google-cloud-messaging, long-polling

我有一个 Android（业务）应用程序，它应该创建一个**通知**，然后在服务器端的特定数据发生变化时尽快更新其内容。数据通过 IIS 中托管的 .NET REST 样式 Web 服务访问，该服务最多可为 1000 个用户提供服务。

我阅读了有关推送通知的 GCM 服务，这将带来很多好处。我认为我不能使用它的原因是：

*   设备需要设置一个谷歌账户，这是额外的部署成本
*   这些设备不绑定到一个人，但内容是。用户通过应用程序登录。

**所以我认为我需要在特定的时间间隔内进行轮询**，在那里我会考虑不耗尽电池的技术。如果数据更改和通知之间的延迟不到一分钟，那就太好了。

进行一些近似和估计的计算：

*   流量/一分钟间隔/每天/每台设备：HTTP GET 请求约为 500 字节 * 60 * 24 = ~700kb
*   为 1000 个用户支付负载/每分钟：1000 个索引列上的数据库 Guid 查找约 3 秒

**我想减少流量并将负载降到最低。**所以我需要一种技术，它可以让我发送更少的请求，这不会影响用户在关注的意义上真正消耗的更改和通知之间的延迟。

编辑：好的，我对这个话题有了更深入的了解。关键字是彗星。对我来说正确的方法似乎是长轮询技术。Web 开发上下文中的其他关键字是服务器发送的事件和 Web 套接字，两者都需要 HTML5，无论如何这里都没有涉及。知道我正在寻找一种不被迫建立消息传递基础设施的方法。我想使用该通知功能集成到现有的 Web 服务中。如果我找到答案，我会更新。

**您将如何减少流量并支付负载？** 也许很有趣。GCM 如何做到这一点？他们不能真正通知设备。他们也需要投票。他们还需要处理很多请求。我猜他们也关心交通。编辑：（好的，他们在应用引擎 api 中为该 api 功能使用 xmpp 基础设施，所以我猜它在 gcm 中会相似）

感谢您的意见。

# ios - 更新已从应用商店移除的 iOS 应用

> ID：13865106
> 
> 赞同：1
> 
> 时间：2012-12-13T17:21:04.433
> 
> 标签：ios, iphone, app-store, app-store-connect

是否可以更新从应用商店中删除的应用。我的意思是我想删除它，但我仍然想向我当前的用户提供更新。可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T17:31:15.450

这取决于您要提供什么样的更新。无法提供应用的更新版本

但是，如果您的应用程序支持此类功能，您仍然可以为您的应用程序提供从您自己的服务器获取的内容更新。只要用户安装了您的应用程序，他们就可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:28:06.897

我不认为那是可能的。我猜他们除了将应用商店中最新版本的版本号与已安装的版本号进行比较之外什么都不做。因此，如果商店中没有应用程序，它们就没有可比性，所以没有“更新”。

# jquery - jquery在FF中加载时回弹白色背景

> ID：13865117
> 
> 赞同：0
> 
> 时间：2012-12-13T17:21:25.600
> 
> 标签：jquery, jquery-backstretch

我正在为一个站点做一个演示，当我在 FF (mac) 中加载或刷新页面时，看起来左列的背景占据了整个页面，直到你调整浏览器大小或滚动鼠标。

Chrome（mac）中似乎没有发生。不太确定它是在我的 CSS 中还是在 FF 中。此外，当我不使用图库作为背景图像时，似乎不会发生。

这是我的演示的链接：

[http://review.boostmktg.com/niven/](http://review.boostmktg.com/niven/)

非常感谢任何见解。谢谢！

# backbone.js - 如何使用 Marionette.CompositeView 收集表单元素，基于经过验证的模型

> ID：13865119
> 
> 赞同：0
> 
> 时间：2012-12-13T17:21:32.847
> 
> 标签：backbone.js, marionette

我有手机型号和手机系列。Marionette.CompositeView 用于呈现手机表单元素的集合，Marionette.ItemView 用于呈现输入。

CompositeView 从 .add-phone 按钮监听事件添加添加到集合空电话模型，但 Backbone.Collection 在添加事件上验证我的模型并抛出异常。

如何在我的手机模型和 Marionette 视图中使用标准验证器来添加新的空手机表单元素？

```
Uncaught Error: Can't add an invalid model to a collection 
```

见[小提琴](http://jsfiddle.net/c6hRN/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:25:40.463

你有几个不同的选择。您可以允许验证传递一个根本没有设置“数字”属性的 PhoneModel：

```
 validate: function() {

        if(_.has(this.attributes, 'number'))
            return;

        return this.get('number').length == 0;
    } 
```

这仍然会使模型失败，这些模型的`number`属性设置为空字符串。

或者，您可以在模板中提供单独的部分以添加新项目，并仅在用户单击“添加”按钮后创建模型。像[这个小提琴](http://jsfiddle.net/U2Kp2/)一样的东西。

# javascript - Javascript暂停循环等待事件

> ID：13865120
> 
> 赞同：0
> 
> 时间：2012-12-13T17:21:36.423
> 
> 标签：javascript, for-loop

我在用：

```
for(i = 0; i < numPages; i++)
{
returnViewONE.setPage(array[i]);
alert("page "+array[i]+" set");
returnViewONE.savePage(sFolderPath+i+"file.tiff");
alert(sFolderPath+i+"file.tiff Saved");
} 
```

但我发现没有警报，这无法保存第二第三……页，有没有办法暂停循环等待事件。我们有一个事件 6，它在保存页面时触发。

如

```
for(i = 0; i < numPages; i++)
{
returnViewONE.setPage(array[i]);
alert("page "+array[i]+" set");
returnViewONE.savePage(sFolderPath+i+"file.tiff");
alert(sFolderPath+i+"file.tiff Saved");
when (id == 6) then loop untill i++
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:47:33.567

我认为您不能暂停循环，但也许您可以继续循环并检查您的条件而不做任何事情，直到满足条件。如果您使用了一个while循环，并且在满足您等待的条件之前没有增加您的计数器怎么办？

```
i = 0;
lastIteration = -1;
while(i < numPages) {
  if(i > lastIteration) {
    returnViewONE.setPage(array[i]);
    returnViewONE.savePage(sFolderPath+i+"file.tiff");
  }

  lastIteration = i;

  if(/*savePage has completed*/) {
   i++;
  }
} 
```

如果 savePage 从未完成，这将永远循环，因此您还必须在其中具有某种安全机制。

# c# - 在代码中定义后显示文本框

> ID：13865121
> 
> 赞同：-8
> 
> 时间：2012-12-13T17:21:40.007
> 
> 标签：c#, textbox, show

假设我以这种方式定义了一个文本框数组：

```
TextBox[] myTextBoxes = new TextBox[10]; 
```

如何让它们显示在设计窗口上？我想同样的方法适用于标签、按钮等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:26:06.977

只有在设计器中创建的、放置在​​ Designer.cs 文件中并由 InitializeComponent 方法执行的组件才会显示在设计器中。如果您创建自己的组件并手动添加它们，它们将仅在运行时显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:27:06.283

我认为您无法在设计器中看到它。假设这是 WPF，要让 TextBox 甚至呈现，您至少需要将控件添加到`Panel`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T17:24:20.903

您不能在设计窗口中显示它们，因为它们是在运行时创建的，而设计窗口显示在.. 设计时间？:)

# javascript - search() 方法在 Google 脚本中不起作用

> ID：13865123
> 
> 赞同：0
> 
> 时间：2012-12-13T17:21:49.047
> 
> 标签：javascript, google-apps-script

**更新**：好的，这是一个简单的修复。我选择了我正在输入的数字列，然后转到格式->数字->纯文本，突然我的功能起作用了！如果我将其更改为 Format -> Number -> Normal 或其他任何内容，则会引发错误。

* * *

如果字符串的开头小于 9，我有一个方法可以将零添加到字符串的开头。我收到一个错误，指出函数`search`未定义，如`issn.search`第 4 行所示。什么可能导致此问题？具体来说，Google Apps 脚本中的错误是`TypeError: Cannot call method "search" of undefined. (line 5)`

```
function fixissn(issn){
    //Logger.log("Old issn is " + issn);
    //if there's a dash in the ISSN, it need 9 characters instead of 8
    if (issn.search("-") > -1) {
        var mis = 9; 
    } else if (issn.search("-") == -1) {
        var mis = 8; 
    }

    //if the ISSN is less than 9 or 8 (mis), add zeros to the beginning
    while (issn.length < mis && issn.length > 0) {
        //zero added to beginning of ISSN
        issn = 0 + issn
    }
    //Logger.log("fixed to new issn " + issn);
    return issn;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:44:56.440

只是为了呼应@epascarello 所说的内容，看起来好像没有传入一个值。很难说，但这可能是由于您在一系列单元格上使用了此函数，其中一些单元格是空的。要绕过该问题，您可以尝试以下操作：

```
function fixissn(issn){
    if (issn !== undefined) {
        //Logger.log("Old issn is " + issn);
        //if there's a dash in the ISSN, it need 9 characters instead of 8
        if (issn.search("-") > -1) {
            var mis = 9; 
        } else if (issn.search("-") == -1) {
            var mis = 8; 
        }

        //if the ISSN is less than 9 or 8 (mis), add zeros to the beginning
        while (issn.length < mis && issn.length > 0) {
            //zero added to beginning of ISSN
            issn = 0 + issn
        }
        //Logger.log("fixed to new issn " + issn);
    }
    return issn;
} 
```

# asp.net-mvc - 使用 Razor 和空格的 MVC4 条件 HTML

> ID：13865124
> 
> 赞同：0
> 
> 时间：2012-12-13T17:21:58.470
> 
> 标签：asp.net-mvc, razor

因此，我将 Bootstrap CSS 与 MVC4 结合使用，但我遇到了一个我似乎无法弄清楚的小问题。

我在我的代码中使用它

```
 @(Model.Enabled ? "class=btn btn-primary" : "class=btn") 
```

呈现的实际 html 是

```
class="btn" btn-primary 
```

我想如何让它像这样渲染

```
class="btn btn-primary" 
```

任何援助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:47:50.663

在同事的帮助下弄明白了

```
 class="@(Model.Enabled ? "btn btn-primary" : "btn")" 
```

会给出想要的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:13:58.937

您的字符串中没有引号，因此该`class`属性只能看到“btn”。尝试

```
@(Model.Enabled ? "class='btn btn-primary'" : "class='btn'") 
```

或者

```
@(Model.Enabled ? "class=\"btn btn-primary\"" : "class=\"btn\"") 
```

# hadoop - 试图理解 HBase

> ID：13865130
> 
> 赞同：1
> 
> 时间：2012-12-13T17:22:17.347
> 
> 标签：hadoop, nosql, mapreduce, hbase

以下是我的问题：

1.  Hbase 在其内部工作中是否使用 Map/Reduce 从 Hadoop 中提取数据？
2.  HBase 可以与其他框架（例如 Amazon dynamo）一起使用，还是必须将 Hadoop 作为其基础框架？
3.  Hbase好学吗？
4.  设置我可以练习的 HBase 实例的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T19:14:09.450

1.  当您尝试访问其中的单元格或行时，HBase 不使用 map/reduce。基本上，Hadoop 存储数据以便它知道在哪里找到密钥（密钥按字典顺序存储）。您可以在Lars George的[这篇文章](http://www.larsgeorge.com/2009/10/hbase-architecture-101-storage.html)中查看详细信息。HBase 确实支持 map/reduce，因此您可以将其用作您创建的作业的源或目标。

2.  HBase 需要 Hadoop API 作为框架，但是像 mapr 或 datastax 这样的公司提供了底层 hadoop 框架的替代实现，所以从技术上讲，如果你真的想这样做，你也可以这样做

3.  相对于什么？:) 使用陈词滥调我会说 HBase 易于学习但难以掌握。您可以非常快速地将数据输入和输出 HBase，但需要时间来学习正确设计模式、了解您的使用模式以及它对使用/禁用预写日志、压缩、拆分、运行的影响每个节点上是否有多个区域服务器等。

4.  最简单的可能是下载一个已经安装了 hadoop 的 VM。例如Cloudera 提供的[这些](https://ccp.cloudera.com/display/SUPPORT/CDH+Downloads)

# r - 使用 facet_wrap 时重新排序 geom_bar

> ID：13865133
> 
> 赞同：9
> 
> 时间：2012-12-13T17:22:28.600
> 
> 标签：r, ggplot2

我试图实现的是让条形按每个面板的给定变量排序。

一个简单的例子：

```
 library(ggplot2)
    library(plyr)

    df <- data.frame(fac = c("a", "b", "c", "e", "b", "c", "d"),             
                  val = c(1, 2, 7, 4, 5, 3, 1),
                  group = c(1, 1, 1, 1, 2, 2, 2))

    p1 <- ggplot(df, aes(x = fac, y = val)) + geom_bar() + facet_wrap(~ group, scales = "free") + coord_flip()
    p1

    p2 <- ggplot(df, aes(x = reorder(fac, val), y = val)) + geom_bar() + facet_wrap(~ group, scales = "free") + coord_flip()
    p2 
```

p2 没有产生我想要的，因为并非每个“因子级别”都出现在所有面板中。这个问题是否已经有一个简单的解决方案？

我找到的一个解决方案如下（计算每组每个因素水平的排名）。

```
df2 <- ddply(df, .(group), transform, fac2 = rank(val))
df2$fac2 <- factor(df2$fac2)
p3 <- ggplot(df2, aes(x = fac2, y = val)) + facet_wrap(~ group, scales = "free") + geom_bar(stat = "identity") + coord_flip() +
  opts(panel.margin = unit(2, "lines"))
p3 
```

我必须在这里自己设置标签。一种可能的解决方案如下（本示例硬编码）：

```
grid.newpage()
grob <- ggplotGrob(p3)
object.path <- grid.ls(getGrob(grob, "axis.text.y", grep = TRUE, global = TRUE), print = FALSE)$name
grob <- grid::editGrob(grob, object.path[1], label = c("ABDQ", "M", "A", "B"))
grob <- grid::editGrob(grob, object.path[2], label = c("A", "B", "EEEEX"))
grid.draw(grob) 
```

但是还有另一个问题。我现在必须自己设置 panel.margin 似乎不可能这样做，因为我只能设置一个“全局” panel.margin 而我需要的是所有 4 个边（或至少 2)。

问题 1：是否有使用重新排序的简单解决方案？

问题 2：有没有使用 scale_x_discrete 获得所需轴的解决方案？

问题 3：我无法找到所需的网格对象来操作 panel.margins 的视口。有没有一种简单的方法来操作适当的网格对象？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:31:47.990

我认为这`grid.arrange`是一个比试图将自由尺度塞入刻面框架更好的工具：

```
library(gridExtra)
q1 <- ggplot(subset(df,group == 1),aes(x = reorder(fac,val),y = val)) + 
        geom_bar() + 
        facet_wrap(~group) + 
        coord_flip()

q2 <- q1 %+% subset(df,group == 2)

grid.arrange(q1,q2,nrow = 1) 
```

![在此处输入图像描述](../Images/3f9b1821e48be1cdaa54aa10465dfcc8.png)

# jsf - PrimeFaces 验证器未触发

> ID：13865136
> 
> 赞同：12
> 
> 时间：2012-12-13T17:22:32.543
> 
> 标签：jsf, file-upload, jsf-2, primefaces, validation

由于primefaces 3.4中不再存在fileLimit我正在尝试解决实现验证器的工作，问题是方法validate从未被调用。那是我的验证器：

```
@FacesValidator(value ="fileLimitValidator")
public class FileLimitValidator implements Validator {

    @Override
    public void validate(final FacesContext context, final UIComponent component,
            final Object value) throws ValidatorException {

        final String fileLimit = (String)component.getAttributes().get("fileLimit");
        final String size = (String)component.getAttributes().get("size");

        if (fileLimit!=null && size!=null) {
            if (Integer.valueOf(size) >= Integer.valueOf(fileLimit)) {
                FacesUtils.throwErrorExceptionFromComponent(component,"fichero_confidencialidad_error");
            }
        }
    }
} 
```

在我的 facelet 中，我尝试过：

```
 <p:fileUpload id="#{id}FileUpload"
        fileUploadListener="#{bean[metodoTratarFichero]}" mode="advanced"
        multiple="true" allowTypes="#{allowTypes}" showButtons="false"
        update="#{id}ListaDocs #{id}MsgError" auto="true"
        label="#{fileuploadmsg.label_boton}"
        invalidFileMessage="#{fileuploadmsg.tipo_incorrecto}" >

        <f:validator validatorId="fileLimitValidator"/>
        <f:attribute name="fileLimit" value="#{fileLimit}"/>
        <f:attribute name="size" value="#{listaDocumentos.size}"/>
    </p:fileUpload> 
```

和：

```
 <p:fileUpload id="#{id}FileUpload"
        fileUploadListener="#{bean[metodoTratarFichero]}" mode="advanced"
        multiple="true" allowTypes="#{allowTypes}" showButtons="false"
        update="#{id}ListaDocs #{id}MsgError" auto="true"
        label="#{fileuploadmsg.label_boton}"
        invalidFileMessage="#{fileuploadmsg.tipo_incorrecto}" 
        validator="fileLimitValidator">

        <f:attribute name="fileLimit" value="#{fileLimit}"/>
        <f:attribute name="size" value="#{listaDocumentos.size}"/>
    </p:fileUpload> 
```

和：

```
 <p:fileUpload id="#{id}FileUpload"
        fileUploadListener="#{bean[metodoTratarFichero]}" mode="advanced"
        multiple="true" allowTypes="#{allowTypes}" showButtons="false"
        update="#{id}ListaDocs #{id}MsgError" auto="true"
        label="#{fileuploadmsg.label_boton}"
        invalidFileMessage="#{fileuploadmsg.tipo_incorrecto}" 
        validator="#{fileLimitValidator}">

        <f:attribute name="fileLimit" value="#{fileLimit}"/>
        <f:attribute name="size" value="#{listaDocumentos.size}"/>
    </p:fileUpload> 
```

和：

```
 <p:fileUpload id="#{id}FileUpload"
        fileUploadListener="#{bean[metodoTratarFichero]}" mode="advanced"
        multiple="true" allowTypes="#{allowTypes}" showButtons="false"
        update="#{id}ListaDocs #{id}MsgError" auto="true"
        label="#{fileuploadmsg.label_boton}"
        invalidFileMessage="#{fileuploadmsg.tipo_incorrecto}" 
        validator="#{fileLimitValidator.validate}">

        <f:attribute name="fileLimit" value="#{fileLimit}"/>
        <f:attribute name="size" value="#{listaDocumentos.size}"/>
    </p:fileUpload> 
```

但 validate 方法永远不会被调用。正确的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T20:39:06.983

根据[`FileUpload`](http://grepcode.com/file/repository.primefaces.org/org.primefaces/primefaces/3.2/org/primefaces/component/fileupload/FileUpload.java)和[`FileUploadRenderer`](http://grepcode.com/file/repository.primefaces.org/org.primefaces/primefaces/3.2/org/primefaces/component/fileupload/FileUploadRenderer.java)源代码，验证器仅在使用时才被调用`mode="simple"`（注意：这又需要`ajax="false"`on 命令）。高级模式即不会将上传的文件设置为组件的提交值，导致它一直保留`null`到调用监听器方法。只要提交的值为`null`，就不会调用验证器。

我不确定这是否是故意的。理论上，应该可以设置`UploadedFile`为提交的值并让验证器依赖它。您可能想在[PrimeFaces issue tracker](https://github.com/primefaces/primefaces/issues)创建增强报告。

同时，尽管这是一种[糟糕的做法](https://stackoverflow.com/questions/5892225/jsf-2-0-validation-in-actionlistener-or-action-method)，但您最好的选择实际上是在`fileUploadListener`方法中执行验证。您可以通过`FacesContext`以下方式触发验证失败添加面孔消息：

```
if (fail) {
    context.validationFailed();
    context.addMessage(event.getComponent().getClientId(context), new FacesMessage(
        FacesMessage.SEVERITY_ERROR, messageSummary, messageDetail));
} 
```

否则，您需要创建一个自定义渲染器，`<p:fileUpload>`用于`decode()`在PrimeFaces 最初没有那样实现它的原因）。

顺便说一句，您的第一次和第二次验证人尝试是正确的。第三次尝试仅在您使用`@ManagedBean`而不是`@FacesValidator`([这通常在`@EJB`强制注入 an 时完成 - 这在 a 中是不可能的`@FacesValidator`](https://stackoverflow.com/questions/7572335/dependency-injection-in-facesvalidator-jsf-validation/7572413#7572413)) 才有效。第四次尝试无效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-10T16:23:51.060

为了在高级模式（ajax）中验证所需的 primefaces 文件上传，可以使用：

```
<f:metadata>
    <f:event listener="#{bean.processValidations()}" type="postValidate" />
</f:metadata> 
```

该`bean.processValidations()`方法的实现将类似于以下内容：

```
public void processValidations() {
        FacesContext context = FacesContext.getCurrentInstance();
        UIInput fileUploadComponent = fileUploadsBean.getFileUploadComponent();
        if (fileUploadComponent!=null && !isFileUploaded()) {
            fileUploadComponent.setValid(false);
            context.addMessage(fileUploadComponent.getClientId(context), new FacesMessage(FacesMessage.SEVERITY_ERROR, messageSummary, messageDetail));
            context.validationFailed();
        }
    } 
```

`fileUploadsBean`将 REQUEST 范围的 CDI bean（不适用于标准 JSF ManagedBeans）注入到定义了方法的 bean 中，`processValidations()`该方法`fileUploadsBean.getFileUploadComponent()`返回 primefaces 文件上传组件（您将`<p:fileUpload binding="#{fileUploadsBean.fileUploadComponent}" ...>`用于该组件）。该方法`isFileUploaded()`将确定文件是否已上传（可能只是对您从 fileUploadListener 填充的成员变量进行空检查）。

如果您想突出显示文件上传按钮，您当然可以有条件地添加一个 styleClass，然后您可以使用它来添加例如红色边框。

```
styleClass="#{fileUploadsBean.fileUploadComponent.valid ? '' : 'validationFailed'}" 
```

因此，primefaces 文件上传的验证失败消息将与所有其他 jsf 验证消息一起显示。您可能在维护验证消息的顺序时遇到问题（将始终在最后），但是在用户处理来自不同字段的所有标准 jsf 验证消息以及您在支持 bean 中的操作之后，它仍然优于显示失败的上传文件验证终于达到了。

# asp.net-mvc - 更新多对多关系

> ID：13865138
> 
> 赞同：0
> 
> 时间：2012-12-13T17:22:36.740
> 
> 标签：asp.net-mvc, entity-framework

我正在开发一个涉及多对多关系的 MVC 4 互联网应用程序。我设法建立了多对多关系，但我无法更新它。

```
public class Machine
{
    public int ID { get; set; }

    //Other attributes

    public List<Task> Tasks {get; set; }
}

public class Task
{
    public int ID { get; set; }

    //other attributes

    public List<Machine> Machines { get; set; }
} 
```

我创建了一些示例数据，就我而言，映射工作正常。

然后我继续创建 CURD。我想添加一个复选框列表，用于为“添加/编辑机器”视图选择任务。

```
class MachineController : Controller
{
  public ActionResult Add(){ return View(); }

  [HttpPost]
  public ActionResult Add(Machine machine, string[] tasks)
  {
    //some code here
  }

  public ActionResult Edit(int id) { //some code here } 

  [HttpPost]
  public ActionResult Edit(Machine machine, string[] tasks)
  {
    //This method will add or remove Task objects from the list as needed & works
    UpdateMachineTasks(machine, tasks);
    //The below method fails - exception: 
        //An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key
    //db.Entry(machine).State = EntityState.Modified
    //Then I used the following from a post I found on SO
    Machine m = db.Machines.Find(machine.ID);
    db.Entry(m).CurrentValues.SetValues(machine) //On debug, `machine` has the proper `Task` 
    db.SaveChanges();
  }
} 
```

`Add(Machine machine, string[] tasks) { //... }`作品很好。当我打开网址`/Edit/1`时，字段已正确填充，并且复选框也已正确选中。我更改值（字符串和整数）以及复选框并保存。

然后我注意到复选框没有更新，但其他 vlues 是。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:27:46.337

尝试使用联结表[http://en.wikipedia.org/wiki/Junction_table](http://en.wikipedia.org/wiki/Junction_table)来解决您的多对多关系。

问题可能是您的系统不喜欢多对多关系。

# javascript - HTML5 验证和字段比较

> ID：13865146
> 
> 赞同：5
> 
> 时间：2012-12-13T17:23:17.980
> 
> 标签：javascript, html, html5-validation

目前有什么方法可以在 2 个字段之间进行比较检查，以检查它们在 HTML5 验证中是否匹配？还是您必须编写自己的 Javascript 才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:29:03.573

使用 HTML5 无法完成这种检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T11:33:19.480

不完全是 HTML5 验证，但一点 JavaScript 可以解决问题，以下是关于您的问题的一般示例：

```
<form method="post" enctype="multipart/form-data" action="Your_Action_Page.php">
<p>Password:</p>
<input name="password" required="required" type="password" id="password" />
<p>Confirm Password:
</p>
<input name="password_confirm" required="required" type="password" id="password_confirm" oninput="check(this)"  />
<script language='javascript' type='text/javascript'>
function check(input) {
if (input.value != document.getElementById('password').value) {
input.setCustomValidity('Password Must be Matching.');
} else {
// input is valid -- reset the error message
input.setCustomValidity('');
}
}
</script>
<br /><br />
<input type="submit" />
</form> 
```

# php - 针对同一 XML 模式 (XSD) 加快一批 XML 文件的 XML 模式验证

> ID：13865149
> 
> 赞同：7
> 
> 时间：2012-12-13T17:23:26.867
> 
> 标签：php, xml, xsd, libxml2, xsd-validation

我想加快针对同一个 XML 模式 (XSD) 验证一批 XML 文件的过程。唯一的限制是我在 PHP 环境中。

我当前的问题是我要验证的架构包括相当复杂的 2755 行 xhtml 架构（http://www.w3.org/2002/08/xhtml/xhtml1-transitional.xsd）。即使对于非常简单的数据，这也需要很长时间（大约 30 秒验证）。因为我的批处理中有数千个 XML 文件，所以这并不能很好地扩展。

为了验证 XML 文件，我使用了标准 php-xml 库中的这两种方法。

*   DOMDocument::schemaValidate
*   DOMDocument::schemaValidateSource

我认为 PHP 实现通过 HTTP 获取 XHTML 模式并构建一些内部表示（可能是 DOMDocument），并且在验证完成时将其丢弃。我在想 XML-libs 的某些选项可能会更改此行为以缓存此过程中的某些内容以供重用。

我建立了一个简单的测试设置来说明我的问题：

[**测试模式.xsd**](http://pastebin.com/jetD110d)

```
<xs:schema attributeFormDefault="unqualified"
    elementFormDefault="qualified"
    targetNamespace="http://myschema.example.com/"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:myschema="http://myschema.example.com/"
    xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <xs:import
        schemaLocation="http://www.w3.org/2002/08/xhtml/xhtml1-transitional.xsd"
        namespace="http://www.w3.org/1999/xhtml">
    </xs:import>
    <xs:element name="Root">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="MyHTMLElement">
                    <xs:complexType>
                        <xs:complexContent>
                            <xs:extension base="xhtml:Flow"></xs:extension>
                        </xs:complexContent>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

[**测试数据.xml**](http://pastebin.com/5cSD5BR2)

```
<?xml version="1.0" encoding="UTF-8"?>
<Root xmlns="http://myschema.example.com/" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://myschema.example.com/ test-schema.xsd ">
  <MyHTMLElement>
    <xhtml:p>This is an XHTML paragraph!</xhtml:p>
  </MyHTMLElement>
</Root> 
```

[**schematest.php**](http://pastebin.com/cUAEJh95)

```
<?php
$data_dom = new DOMDocument();
$data_dom->load('test-data.xml');

// Multiple validations using the schemaValidate method.
for ($attempt = 1; $attempt <= 3; $attempt++) {
    $start = time();
    echo "schemaValidate: Attempt #$attempt returns ";
    if (!$data_dom->schemaValidate('test-schema.xsd')) {
        echo "Invalid!";
    } else {
        echo "Valid!";
    }
    $end = time();
    echo " in " . ($end-$start) . " seconds.\n";
}

// Loading schema into a string.
$schema_source = file_get_contents('test-schema.xsd');

// Multiple validations using the schemaValidate method.
for ($attempt = 1; $attempt <= 3; $attempt++) {
    $start = time();
    echo "schemaValidateSource: Attempt #$attempt returns ";
    if (!$data_dom->schemaValidateSource($schema_source)) {
        echo "Invalid!";
    } else {
        echo "Valid!";
    }
    $end = time();
    echo " in " . ($end-$start) . " seconds.\n";
} 
```

运行这个 schematest.php 文件会产生以下输出：

```
schemaValidate: Attempt #1 returns Valid! in 30 seconds.
schemaValidate: Attempt #2 returns Valid! in 30 seconds.
schemaValidate: Attempt #3 returns Valid! in 30 seconds.
schemaValidateSource: Attempt #1 returns Valid! in 32 seconds.
schemaValidateSource: Attempt #2 returns Valid! in 30 seconds.
schemaValidateSource: Attempt #3 returns Valid! in 30 seconds. 
```

非常欢迎任何有关如何解决此问题的帮助和建议！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T18:00:18.120

您可以安全地从计时值中减去 30 秒作为开销。

对 W3C 服务器的远程请求被延迟，因为大多数库不反映缓存文档（甚至 HTTP 标头都表明这一点）。但[请阅读您自己的](http://www.w3.org/Help/Webmaster#slowdtd)：

> **W3C 服务器返回 DTD 的速度很慢。延迟是故意的吗？**
> 
> 是的。由于各种软件系统每天从我们的站点下载 DTD 数百万次（尽管我们的服务器有缓存指令），我们已经开始从我们的站点提供 DTD 和模式（DTD、XSD、ENT、MOD 等）。人为延迟。我们这样做的目标是让更多人关注我们持续存在的过多 DTD 流量问题，并保护我们网站其他部分的稳定性和响应时间。我们建议使用 HTTP 缓存或目录文件来提高性能。

W3.org 试图保持低请求。这是可以理解的。PHP`DomDocument`是基于 libxml 的。libxml 允许设置外部实体加载器。在这种情况下，整个[*目录支持*部分](http://xmlsoft.org/catalog.html)都很有趣。

要解决有问题的问题，请设置一个`catalog.xml`文件：

```
<?xml version="1.0"?>
<catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">
    <system systemId="http://www.w3.org/2002/08/xhtml/xhtml1-transitional.xsd"
            uri="xhtml1-transitional.xsd"/>
    <system systemId="http://www.w3.org/2001/xml.xsd"
            uri="xml.xsd"/>
</catalog> 
```

`.xsd`使用目录旁边的目录文件中给出的名称保存两个文件的副本（`file:///...`如果您喜欢不同的目录，则相对路径和绝对路径都可以使用）。

然后确保您的系统环境变量`XML_CATALOG_FILES`设置为文件的`catalog.xml`文件名。当一切都设置好后，验证就会运行：

```
schemaValidate: Attempt #1 returns Valid! in 0 seconds.
schemaValidate: Attempt #2 returns Valid! in 0 seconds.
schemaValidate: Attempt #3 returns Valid! in 0 seconds.
schemaValidateSource: Attempt #1 returns Valid! in 0 seconds.
schemaValidateSource: Attempt #2 returns Valid! in 0 seconds.
schemaValidateSource: Attempt #3 returns Valid! in 0 seconds. 
```

如果仍然需要很长时间，那只是环境变量未设置到正确位置的标志。我已经在博客文章中处理了变量以及一些边缘情况：

*   [**通过 PHP 的 DOMDocument 和 Libxml2 使用目录进行验证**](http://hakre.wordpress.com/2012/12/17/using-catalogs-for-validation-with-phps-domdocument-and-libxml2/)。

它应该处理各种边缘情况，例如包含空格的文件名。

或者，可以创建一个简单的外部实体加载器回调函数，该函数以数组的形式使用本地文件系统的 URL => 文件映射：

```
$mapping = [
     'http://www.w3.org/2002/08/xhtml/xhtml1-transitional.xsd'
         => 'schema/xhtml1-transitional.xsd',

     'http://www.w3.org/2001/xml.xsd'                          
         => 'schema/xml.xsd',
]; 
```

如图所示，我已将这两个 XSD 文件的逐字副本放入名为`schema`. 下一步是利用[`libxml_set_external_entity_loader`](http://php.net/libxml_set_external_entity_loader)映射来激活回调函数。磁盘上已经存在的文件是首选并直接加载。如果例程遇到没有映射的非文件，`RuntimeException`将抛出 a 并显示详细消息：

```
libxml_set_external_entity_loader(
    function ($public, $system, $context) use ($mapping) {

        if (is_file($system)) {
            return $system;
        }

        if (isset($mapping[$system])) {
            return __DIR__ . '/' . $mapping[$system];
        }

        $message = sprintf(
            "Failed to load external entity: Public: %s; System: %s; Context: %s",
            var_export($public, 1), var_export($system, 1),
            strtr(var_export($context, 1), [" (\n  " => '(', "\n " => '', "\n" => ''])
        );

        throw new RuntimeException($message);
    }
); 
```

设置此外部实体加载器后，远程请求不再有延迟。

就是这样。见[要点](https://gist.github.com/4278694)。注意：这个外部实体加载器是为加载 XML 文件而编写的，以从磁盘进行验证并将 XSD URI“解析”为本地文件名。其他类型的操作（例如基于 DTD 的验证）可能需要一些代码更改/扩展。更可取的是 XML 目录。它也适用于不同的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T16:09:15.533

作为@hakre 的替代方法：第一次尝试下载外部资源（DTD），然后使用下载的版本：

```
libxml_set_external_entity_loader(    
    function ($public, $system, $context) {
        if(is_file($system)){
            return $system;
        }
        $cached_file= tempnam(sys_get_temp_dir(), md5($system));
        if (is_file($cached_file)) {
            return $cached_file;
        }
        copy($system,$cached_file);
        return $cached_file;
    }
); 
```

# ios - Phonegap - 资产和通用 iOS 应用程序

> ID：13865152
> 
> 赞同：1
> 
> 时间：2012-12-13T17:23:38.053
> 
> 标签：ios, cordova

我目前正在为 iPhone、iPad、Android 手机和 Android 平板电脑构建应用程序。

我正在使用[此示例](http://devgirl.org/2012/07/16/phonegapcordova-templatetutorial-for-sharing-code-between-platforms/)中的单个代码库。

但由于我的项目也由于支持平板电脑而有点复杂，我希望排除在安装应用程序的设备上未使用的资产。

为了澄清，我的项目文件/文件夹结构如下所示：

项目根：

*   html（用于 android 和 ios 项目的 html、JS、Css、图像）
    *   css
        *   样式.css
        *   样式-android-phone.css
        *   样式-android-tablet.css
        *   样式-ios-phone.css
        *   样式-ios-tablet.css
    *   图片
        *   共享
            *   [...]
        *   电话
            *   [...]
        *   药片 -[...]
    *   js
        *   [...]
    *   模板（=html 模板）
        *   电话
            *   [...]
        *   药片
            *   [...]
*   安卓（日食项目）
    *   资产
        *   www（../../html 的符号链接）
    *   垃圾桶
        *   [...]
    *   创
        *   [...]
    *   库
        *   [...]
    *   资源
        *   [...]
    *   源代码
        *   [...]
    *   [...]
*   ios (xcode 项目)
    *   科尔多瓦库
        *   [...]
    *   我的项目
        *   课程
            *   [...]
        *   插件
            *   [...]
        *   资源
            *   [...]
        *   [...]
    *   My_project.xcodeproj
    *   www（../../html 的符号链接）

例如，我不希望 iphone 应用程序包含以下平板电脑资产：html/css/style-android-tablet.css、html/css/style-ios-tablet.css、html/images/tablet/ *、html/模板/平板电脑/*

目前，由于无用的资产（主要是图像），该应用程序在 iphone（例如）上很重。

我尝试了一些想法，例如： - 在 xcode 项目中使用 2 个标记。一个用于iphone，一个用于ipad。但是 xcode 中 www 下的文件和文件夹无法设置为目标成员。只有www可以。- 使用 2 个 www 目录和 2 个目标，但 iphone 目标仍然包括目标 ipad 的 www。

我认为[这个解决方案](https://stackoverflow.com/questions/10836460/how-do-i-use-symbolic-links-with-xcode-4-and-cordova)可以帮助我，但我真的不明白如何让它适应我的文件结构。

因此，我请求您的帮助，为未来（下一个项目和现有项目的发布）找到最佳和更简单的解决方案。

在此先感谢您的帮助。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:05:16.517

以下是我过去用于在 Android 和 iOS 之间共享资源的方法：

*   [http://www.tricedesigns.com/2012/02/16/linked-source-files-across-phonegap-projects-on-osx/](http://www.tricedesigns.com/2012/02/16/linked-source-files-across-phonegap-projects-on-osx/)

您可以使用这种精确的技术来拥有共享代码库，但也可以拥有特定于平台的文件。只需将文件夹添加到 www 目录（而不是共享目录），然后将特定于平台的 CSS 文件放入其中。 *注意：在这种方法中，www 的子文件夹是符号链接的，而不是 www 的父文件夹。*

对于在设备外形尺寸之间拥有单独的 CSS 文件，这有点棘手......

一种选择是在应用程序初始化期间使用 JavaScript 有条件地附加 <style> 元素。您可以检查用户代理和窗口尺寸，并为适当的平台和外形手动添加 <style> 元素。但是，通常不鼓励用户代理嗅探，因为它很容易被破坏，或者如果引入了新的设备类别则失败。

另一种选择是包含所有内容并使用 CSS 媒体查询。

如果您使用的是通用二进制文件（同时针对手机和平板电脑的外形尺寸），那么您必须在应用程序中包含手机和平板电脑的 CSS。您可以使用 CSS 媒体查询，以便 CSS 样式仅应用于特定的设备外形尺寸。因此，将您的平板电脑样式包装在媒体查询中，它们只会应用于平板电脑的外形尺寸。

您可以在此处阅读有关 CSS 媒体查询的更多信息：

*   [https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

您可以在此处访问针对常见设备外形的预定义 CSS 媒体查询：

*   [媒体查询：如何定位台式机、平板电脑和移动设备？](https://stackoverflow.com/questions/6370690/media-queries-how-to-target-desktop-tablet-and-mobile)
*   [http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

如果您不使用通用二进制文件，则每个设备类别都需要单独的项目环境。在每个单独的项目中，您可以符号链接到共享代码库，并带有指向 CSS 文件的静态路径。

如果您想有条件地将特定的 CSS 文件插入到特定的项目配置中，那么您需要为每个项目配置单独的项目，或者您需要编写一个脚本来为您执行此操作。

希望这会有所帮助...

# objective-c - 记录项目中所有 UIViewController 的类名

> ID：13865164
> 
> 赞同：12
> 
> 时间：2012-12-13T17:24:35.193
> 
> 标签：objective-c, ios, uiviewcontroller, nslog

我们从外包中收到了一个**巨大**的项目，我们正试图“修复”。项目中有数百个视图控制器。我们的目标是轻松确定我们当前在设备上查看的类别。

我们的解决方案（不起作用，因此出现了 SO 问题）如下。

通过一个类别覆盖 UIViewController 的 viewDidAppear 方法：

```
-(void)viewDidAppear:(BOOL)animated
{
    NSLog(@"Current View Class: %@", NSStringFromClass(self.class));
    [self viewDidAppear:animated];
    //Also tried this:
    //[super viewDidAppear:animated];
} 
```

此类别将放在项目的**.pch**中。

这将不需要在数百个视图控制器中放入额外的代码，并且可以轻松地打开和关闭。它不起作用，因为正如我们现在所了解的，< ***meme*** >one 不会简单地通过 category< ***/meme*** > 覆盖现有方法。

我们缺少什么？！？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T17:52:27.810

答案是调配方法！这是我们想出的：

```
#import "UIViewController+Logging.h"
#import <objc/runtime.h>

@implementation UIViewController (Logging)

-(void)swizzled_viewDidAppear:(BOOL)animated
{
    NSLog(@"Current View Class: %@", NSStringFromClass(self.class));
    [self swizzled_viewDidAppear:animated];
}

+ (void)load
{
    Method original, swizzled;

    original = class_getInstanceMethod(self, @selector(viewDidAppear:));
    swizzled = class_getInstanceMethod(self, @selector(swizzled_viewDidAppear:));

    method_exchangeImplementations(original, swizzled);

}
@end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-30T10:15:43.157

### `viewWillAppear`日志

这是在控制台中*打印*当前视图控制器类名称时的解决方案：

*   在 Xcode 中创建**符号断点**
*   对于**符号**，添加`-[UIViewController viewWillAppear:]`
*   对于**Action**，添加一个 Debugger Command 和这个表达式： `expr -- (void) printf(" %s\n", (char *)object_getClassName($arg1))`
*   检查*评估操作后自动继续*。

[![在此处输入图像描述](../Images/38b8312060c86fe82c92bf7b66ac1251.png)](https://i.stack.imgur.com/kYi5I.png)

每当我在项目中迷失时，这对我有很大帮助！

### `deinit`日志

您还可以添加日志以查看何时`deinit`调用视图控制器：

*   创建另一个**符号断点**
*   对于**符号**，添加`-[UIViewController dealloc]`
*   对于**Action**，添加一个 Debugger Command 和这个表达式： `expr -- (void) printf(" %s\n", (char *)object_getClassName($arg1))`
*   检查*评估操作后自动继续*。

[![在此处输入图像描述](../Images/b96bf87cd0319145beaa6c48f03e719e.png)](https://i.stack.imgur.com/rvSC9.png)

这对于确保视图控制器从内存中释放非常方便，同时也是捕捉**保留周期**的一个很好的指标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T18:08:38.747

这是解决方案

在你的 .pch 文件中包括这个

```
#define UIViewController MyViewController
#import "MyViewController.h" 
```

创建新的 UIViewController 子类为

.h 文件

```
#import <UIKit/UIKit.h>

#ifdef UIViewController
#undef UIViewController
#endif
@interface MyViewController : UIViewController

@end
#ifndef UIViewController
#define UIViewController MyViewController
#endif 
```

和 .m 文件

```
#import "MyViewController.h"

@implementation MyViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"Current View Class: %@", NSStringFromClass(self.class));
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T17:28:04.350

视图控制器是否共享一个公共基类？如果是这样，您可以将其放在 [viewDidAppear:] 的基类实现中。如果他们不共享一个共同的基础，那么也许这将是一项有价值的任务，因为它在未来无论如何都可能有用（共同分析代码等）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T17:53:37.760

您可以从 Xcode 进行应用程序范围的查找和替换，但不一定会找到所有情况（但您尝试的方法也不会）。你可以寻找“[super viewDidLoad];” 并替换为“[super viewDidLoad]; NSLog(@"Current View Class: %@", NSStringFromClass(self.class));"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T18:13:12.840

应用程序是否使用导航控制器来显示视图控制器？如果是这样，您可以使用 NavigationController 的方法来报告当前控制器：

```
 - (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated
    {
        [self reportNewController:viewController];
    }

    - (void) reportNewController:(UIViewController *)viewController
    {
        NSString *name = viewController.title;
            NSLog(@"Name is %@",name);
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-29T08:55:18.810

您可以使用方法调配。这是一个很好的指南： http: [//nshipster.com/method-swizzling/](http://nshipster.com/method-swizzling/)

# c++ - 无法与第三方库一起暂停线程

> ID：13865166
> 
> 赞同：2
> 
> 时间：2012-12-13T17:24:35.693
> 
> 标签：c++, multithreading

我在使用封闭源代码的第三方库并暂停线程时遇到问题：使用此第三方库时我无法暂停线程。

操作系统是 Ubuntu 32 位。编译器是 g++。

下面的下一个代码很简单并且工作正常。

```
#include <chrono>
#include <thread>

int main()
{
    std::chrono::seconds duration(3);
    std::this_thread::sleep_for(duration);
} 
```

我已经编译了它：

```
g++ -std=c++0x test1.cpp -o test1 
```

好的，现在有这个第三方库（来自 AVT 的 GigE Vision Devices 的“PvApi”）和我的以下代码。

```
#include <chrono>
#include <thread>
#include <PvApi.h>

int main()
{
  PvInitialize();

  std::chrono::seconds duration(3);
  std::this_thread::sleep_for(duration);
} 
```

我已经编译了它：

```
g++ -std=c++0x -D_x86 -D_LINUX -D_REENTRANT test2.cpp -lPvAPI -o test2 
```

运行代码时，它真的运行了！它只是不会暂停一纳秒。为什么？？？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:16:50.497

这可能为时已晚，但问题是这样的：PvInitialize() 显然在幕后运行 timer_create()，这会产生频繁的 SIGALRM 中断 sleep()（或 usleep()，两者都在调用 nanosleep ())。我知道的唯一解决方法是使用 nanosleep() （这是 AVT 的示例代码使用的）。如果您查看 nanosleep() 的手册页，它需要两个参数，都是指向 timespec 结构的指针。发生的情况是，当睡眠中断时，第二个 timespec 包含剩余的时间（即，假设还要睡眠多少时间）。以下代码段摘自 AVT 的示例代码：

/* 时间以毫秒为单位 */

void Sleep(unsigned int time) { struct timespec t,r;

```
 t.tv_sec    = time / 1000;
    t.tv_nsec   = (time % 1000) * 1000000;

    while(nanosleep(&t,&r)==-1)
            t = r; 
```

}

您可以使用它来代替所有 sleeps()，它应该可以解决您的大部分问题，但要注意其他可能无法防止这种情况的库。您要处理的另一个地方是 select() 调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T17:33:17.293

PvInitialize 是否有可能处理操作系统发送的任何信号？这将停止您的进程的睡眠。

# shell - 使用 awk 的 shell 脚本

> ID：13865170
> 
> 赞同：2
> 
> 时间：2012-12-13T17:24:46.307
> 
> 标签：shell, scripting, awk

遇到麻烦`awk`。基本上我要做的是在文件中搜索这个特定的字符串。然后打印该行的第三个元素。

这是我所做的：

```
awk -F' / ' '$1=="$log"{print $3}' schedlist 
```

出于某种原因，这不起作用，但如果我这样做：

```
awk -F' / ' '$1=="20121213-20:58:53"{print $3}' schedlist 
```

该代码有效。但我需要让用户输入`log`姓名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:28:56.607

您需要使用该`-v`选项将 shell 变量传递给`awk`，如下所示：

```
awk -v tstamp="$log" -F' / ' '$1==tstamp{print $3}' schedlist 
```

（将变量名称更新为`tstamp`（如评论中所述），因为`log`与 awk 内置函数冲突`log`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:22:56.730

你有几个选择。使用变量（带有`-v`或仅作为赋值，但不能将其命名为“log”，因为这是一个 awk 函数）：

```
awk -F' / ' '$1 == s {print $3}' s="$log" schedlist 
```

以不同的方式引用您的脚本：

```
awk -F' / ' '$1 == "'"$log"'" { print $3}' schedlist 
```

# java - 带有 OSX 的 MacBook 上的 Java 性能极差，在同一单元上的 Windows 下则更少，为什么？

> ID：13865171
> 
> 赞同：2
> 
> 时间：2012-12-13T17:24:56.877
> 
> 标签：java, eclipse, development-environment

我正在学习 Java 并开始我的第一堂课/项目。在这个项目中，导师的像素在屏幕上移动并稳定剪辑，并在几秒钟内完成它在屏幕上的旅程。我的需要几分钟，每 5 秒只移动 1 个像素。我原以为 MacBook Pro 会比这更好地处理 Java 图形。为了查看它是我的代码还是单元，我在 Windows 中启动时从头开始重建了项目，性能得到了显着提高。在那里，光标每秒移动 1-2 个像素；仍然不如讲师，但比OSX处理得更好。我想知道这是正常的还是预期的？OSX 是否只是在处理 Java 图形方面很糟糕？如果它有助于回答这个问题，我已经链接了我的代码，以及 OSX 中缓慢移动的像素和糟糕的帧速率的视频。Fraps 显示我在 Windows 中的平均速度为 650 fps，OSX 端的代码输出显示它在 40-60 左右，具体取决于我是否有其他视频处理。在视频中它大约是 45，但那是因为屏幕捕获使它从平均 60 fps 减慢。

OSX 中的帧率示例：[https ://www.youtube.com/watch?v=PQ0-L4slgP4](https://www.youtube.com/watch?v=PQ0-L4slgP4)

屏幕类代码：http: [//pastebin.com/3ETKsY8r](http://pastebin.com/3ETKsY8r)

游戏类代码：http: [//pastebin.com/NDreVB60](http://pastebin.com/NDreVB60)

我在 Apple 端使用 10.7.5 下的 Eclipse Juno，在 Bootcamp 端使用 Windows 7。MacBook 配备 4GB 内存和 2.53 Ghz Intel Core 2 Duo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:16:29.853

我在我的 MacBookPro 上运行了您的代码示例，结果比您发布的视频中的要好得多。

现在，我不是 Java 2D 图形方面的超级专家，但有一个观察结果是，由于您需要在每次迭代时一遍又一遍地重绘整个画布以使像素移动，因此渲染过程中涉及的逻辑应该很快。此外，由于像素沿对角线移动，右侧较大的区域对您的示例没有用处，因此我建议将 JFrame 设置为正方形，这样可以减少重新绘制的区域。

最后，我对 Screen 类的代码进行了一些更改，这可以使您的操作更快。

```
package com.oblivion.rain.graphics;

public class Screen {
    // Height was removed since there is no use for it
    private int width;
    public int[] pixels;

    int time = 0;
    int counter = 0;

    // We need this in order to avoid the iteration in the clear method.
    int previousPixel = 0;

    public Screen(int width, int height) {
        this.width = width;
        pixels = new int[width * height]; // 50,400
    }

    public void clear() {
        // In case the frame is a rectangle, the previousPixel
        // could hold a value that is greater than the array size
        // resulting in ArrayOutOfBoundsException
        if (previousPixel < pixels.length) {
            pixels[previousPixel] = 0;
        }
    }

    public void render() {
        counter++;

        if (counter % 100 == 0) {
            time++;
        }

        // Calculate the previousPixel index for use in the clear method
        previousPixel = time + (time * width);

        // Make sure we didn't exceed the array length, then set the 
        // array data at the calculated index
        if (previousPixel < pixels.length) {
            pixels[previousPixel] = 0xff00ff;
        }
    }
} 
```

# r - 当我们切换到夏令时并返回时处理日期

> ID：13865172
> 
> 赞同：13
> 
> 时间：2012-12-13T17:24:57.437
> 
> 标签：r, datetime, timezone, dst

我想使用 R 进行时间序列分析。我想制作一个时间序列模型并使用包 timeDate 和 forecast 中的函数。

我有 CET 时区的日内数据（15 分钟数据，每小时 4 个数据点）。3 月 31 日实施夏令时，我缺少通常拥有的 96 个数据点中的 4 个。在 10 月 28 日，我有 4 个数据点太多，因为时间切换回来了。

对于我的时间序列模型，我总是需要 96 个数据点，否则日内的季节性会变得混乱。

你有这方面的经验吗？您是否知道有助于自动化此类数据处理的 R 函数或包 - 一些优雅的东西？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T19:29:13.343

我对来自传感器的水文数据也有类似的问题。我的时间戳是 UTC+1 (CET) 并且没有切换到夏令时 (UTC+2, CEST)。由于我不希望我的数据中断一小时（如果使用 UTC 就是这种情况），我采用`%z`了`strptime`. 在`?strptime`你会发现：

> `%z`与 UTC 的小时和分钟的有符号偏移量，因此 -0800 比 UTC 晚 8 小时。

例如：2012 年，标准时间到 DST 的切换发生在 2012 年 3 月 25 日，所以这一天没有 02:00。如果您尝试将“2012-03-25 02:00:00”转换为 POSIXct-Object，

```
> as.POSIXct("2012-03-25 02:00:00", tz="Europe/Vienna")
[1] "2012-03-25 CET" 
```

您不会收到错误或警告，您只会得到没有时间的日期（此行为已记录在案）。

使用`format = "%z"`给出了预期的结果：

```
> as.POSIXct("2012-03-25 02:00:00 +0100", format="%F %T %z", tz="Europe/Vienna")
[1] "2012-03-25 03:00:00 CEST" 
```

为了便于导入，我编写了一个带有适当默认值的小函数：

```
as.POSIXct.no.dst <- function (x, tz = "", format="%Y-%m-%d %H:%M", offset="+0100", ...)
{
  x <- paste(x, offset)
  format <- paste(format, "%z")
  as.POSIXct(x, tz, format=format, ...)
}

> as.POSIXct.no.dst(c("2012-03-25 00:00", "2012-03-25 01:00", "2012-03-25 02:00", "2012-03-25 03:00"))
[1] "2012-03-25 00:00:00 CET"  "2012-03-25 01:00:00 CET"  "2012-03-25 03:00:00 CEST"
[4] "2012-03-25 04:00:00 CEST" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-13T17:32:35.310

如果您不想要夏令时，请转换为没有夏令时的时区（例如 GMT、UTC）。

```
times <- .POSIXct(times, tz="GMT") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T12:58:02.193

这是获取夏令时偏移量 - 例如中央夏令时

```
> Sys.time() 
```

"2015-08-20 07:10:38 CDT" # 我在美国/芝加哥白天时间

```
> as.POSIXct(as.character(Sys.time()), tz="America/Chicago") 
```

“2015-08-20 07:13:12 CDT”

```
> as.POSIXct(as.character(Sys.time()), tz="UTC") - as.POSIXct(as.character(Sys.time()), tz="America/Chicago") 
```

-5小时的时差

```
> as.integer(as.POSIXct(as.character(Sys.time()), tz="UTC") - as.POSIXct(as.character(Sys.time()), tz="America/Chicago")) 
```

-5

一些灵感来自

[在 R 中转换时区：提示、技巧和陷阱](http://blog.revolutionanalytics.com/2009/06/converting-time-zones.html)

# python - Pandas 数据框按日期索引

> ID：13865176
> 
> 赞同：3
> 
> 时间：2012-12-13T17:25:08.167
> 
> 标签：python, pandas, time-series

因此，带有 pandas 模块的 Python 似乎是 matlab 和 R 的一个很好的选择。这就是我最近切换到它的原因。那里有资源，我搜索了论坛但找不到类似的东西。如果您有一些教程或其他有用材料的链接，请发布它们。

Wes McKinney 有一个关于熊猫的精彩而详尽的教程。 [http://www.youtube.com/watch?v=w26x-z-BdWQ&list=FLJ5xKwlfj7wg8S_A5SgR6Wg&feature=mh_lolz](http://www.youtube.com/watch?v=w26x-z-BdWQ&list=FLJ5xKwlfj7wg8S_A5SgR6Wg&feature=mh_lolz)

在 1:10，他展示了如何按日期而不是整数索引数据框中的行的示例。我想做类似的事情。

不同之处在于我有 3 个变量，Y1、Y2、Y3，每个变量都有一列时间戳，X1、X2、X3。

```
TestFile.txt:  
X1  Y1  X2  Y2  X3  Y3
27/11/2012  11.436  29/11/2012  20.631  4/12/2012   10.209  
28/11/2012  11.468  30/11/2012  20.185  5/12/2012   9.973  
29/11/2012  11.414  3/12/2012   19.962  6/12/2012   9.736  
30/11/2012  11.355  4/12/2012   19.562  7/12/2012   9.509  
3/12/2012   11.309  5/12/2012   18.908  10/12/2012  9.259  
4/12/2012   11.118  6/12/2012   18.288  11/12/2012  8.109  
5/12/2012   10.873  7/12/2012   17.973  
6/12/2012   10.582  10/12/2012  17.788  
7/12/2012   10.264  11/12/2012  17.554  
10/12/2012  9.886  
11/12/2012  9.164 
```

我想做四件事：

1.  按 Xi 中的日期关联 Yi 中的数据，因为 i = 1,2,3

2.  按日期索引行

3.  删除早于 2012 年 4 月 12 日（即 Y3 的第一个日期）的所有数据

4.  只能按日期和列访问所有日期

这是一个测试文件，它描述了如何读取数据以及如何打印数据。您可以看到 X1 被正确解析为 pandas 日期格式，但不是 X2 或 X3。这是我试图通过指定 index_col=[0,2,4]
和
parse_dates = True 来做的

```
TestFile.py:
import pandas as pd

df = pd.read_csv('TestFile.txt',sep='\t', index_col=[0,2,4], parse_dates = True)

print 'pandas version: ', pd.__version__
print df 
```

给出输出：

```
pandas version:  0.10.0b1
X1         X2         X3              Y1      Y2      Y3                   
2012-11-27 29/11/2012 4/12/2012   11.436  20.631  10.209
2012-11-28 30/11/2012 5/12/2012   11.468  20.185   9.973
2012-11-29 3/12/2012  6/12/2012   11.414  19.962   9.736
2012-11-30 4/12/2012  7/12/2012   11.355  19.562   9.509
2012-03-12 5/12/2012  10/12/2012  11.309  18.908   9.259
2012-04-12 6/12/2012  11/12/2012  11.118  18.288   8.109
2012-05-12 7/12/2012  None        10.873  17.973     NaN
2012-06-12 10/12/2012 None        10.582  17.788     NaN
2012-07-12 11/12/2012 None        10.264  17.554     NaN
2012-10-12 None       None         9.886     NaN     NaN
2012-11-12 None       None         9.164     NaN     NaN 
```

想要的输出：

```
 Y1      Y2       Y3                 
2012-04-12  11.118  19.562   10.209
2012-05-12  10.873  18.908    9.973
2012-06-12  10.582  18.288    9.736
2012-07-12  10.264  17.973    9.509
2012-10-12   9.886  17.788    9.259
2012-11-12   9.164  17.554    8.109 
```

如果您对如何执行此操作有任何想法，非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:08:32.007

我认为您的困惑是由于对`index_col`论点的误解。当您将列列表传递给 时`index_col`，pandas 正在尝试创建多索引，即具有多个列作为索引的数据框，例如多维表。它不是试图通过连接多个列来创建单个索引。

一种可行的策略是使用输入文件中的适当列对创建三个数据框，然后将它们连接起来。

X1 Y1 X2 Y2 X3 Y3 --> (X1, Y1) 的数据帧 + (X2, Y2) 的数据帧 + (X3, Y3) 的数据帧

如果您正在使用或愿意使用 Pandas 的最新开发版本，可以`parse_cols`使用`read_csv()`. 或者您可以读入所有数据，提取您需要的三个数据帧，然后将它们连接起来。

最后，您可以`df.truncate`使用`before`和`after`参数来获取您需要的 DateRange。更简单地说，您可以使用`dropna()`省略缺少值的日期。

希望这可以帮助。请让我们知道您使用的是什么版本的熊猫。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:08:12.457

通过设置`index_col=[0,2,4]`您正在创建一个 MultiIndex，这就是您获得该输出的原因。

对于您想要的输出， read_csv 将无法即时执行此操作。只需读取单个并合并数据框

# jquery - jcrop_api 未定义？

> ID：13865178
> 
> 赞同：2
> 
> 时间：2012-12-13T17:25:18.773
> 
> 标签：jquery, jcrop

将 Jcrop 添加到 Javascript 中的函数时，jcrop_api 变量变为未定义。当我使用在窗口加载时创建 Jcrop 时，我让插件工作（包括 api）`$(document).ready(function() { ... });`
问题是我希望用户能够保持纵横比，或者不仅仅是通过选中或取消选中复选框。所以我有以下内容：

```
$(document).ready(function() {
    $('#aspectratio').click(function() {
        alert(jcrop_api);
        if (!$(this).is(':checked')) {
            jcrop_api.setOptions({
                aspectRatio: 0
            });
        } else {
            jcrop_api.setOptions({
                aspectRatio: 31 / 12
            });
        }
    });
}

function stopUpload(success, newfile) {
    $('#target').attr('src', newfile);
    $('#preview').attr('src', newfile);
    $('#myfile').val('');
    $('#options').css('display', 'block');
    $('#target').Jcrop({
        onChange: updatePreview,
        onSelect: updatePreview,
        aspectRatio: 31 / 12
    }, function() {
        // Use the API to get the real image size
        var bounds = this.getBounds();
        boundx = bounds[0];
        boundy = bounds[1];
        // Store the API in the jcrop_api variable
        var jcrop_api = this;
    });
} 
```

我已经看到了其他答案，例如以下列方式调用 Jcrop：

```
$.Jcrop($('#cropbox_full')); 
```

由于某种原因，这样做时 jcrop 框根本不会出现。很奇怪。所以基本上，我的问题是，我做错了什么，我该如何解决这个问题（以类似于上面的方式），以便我可以通过单击复选框来更改 aspectRatio？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:22:13.000

好的，这很简单……变量 ( `jcrop_api`) 只是在函数中设置，因此无法从函数外部访问。我通过将其设置为全局变量来解决此问题。我不知道这是否是不好的做法，但如果有人有更好的解决方案，我会很高兴听到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T11:48:08.857

**jcrop_api**需要先定义 这里是 sum stuffs 来学习如何定义**jcrop_api**变量

```
var jcrop_api;
var cWidth = 100;
var cHeight = 100;

jQuery(function($){

  // initialize jcrop
  jcrop_api = $.Jcrop('#target');

  // set the selection area
  jcrop_api.animateTo([0,0,cWidth,cHeight]);

}); 
```

在正文部分图像标签中

```
<img src="demo_files/sago.jpg" id="target" alt="[Jcrop Example]" /> 
```

# c++ - CMake Find.Boost 未考虑配置

> ID：13865184
> 
> 赞同：3
> 
> 时间：2012-12-13T17:25:54.557
> 
> 标签：c++, boost, compilation, cmake

尝试使用 boost 编译时，Windows 上一切正常，但是当我尝试使用 linux 编译时，`SET`FindBoost 似乎没有考虑使用命令给出的配置。

执行以下操作时，

```
set(Boost_USE_STATIC_LIBS        OFF)
set(Boost_USE_MULTITHREADED      OFF)

find_package(Boost COMPONENTS system REQUIRED)
if (Boost_FOUND)
MESSAGE(${Boost_SYSTEM_LIBRARY})
endif () 
```

输出`/usr/lib/libboost_system-mt.a`似乎是库中的静态和多线程版本。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:50:24.820

如果您查看[FindBoost.cmake，将 Boost_USE_STATIC_LIBS](https://github.com/Kitware/CMake/blob/master/Modules/FindBoost.cmake)指定为 OFF，则使用默认后缀值进行搜索 (CMAKE_FIND_LIBRARY_SUFFIXES)，而不是覆盖它们。在我的 linux 机器上

```
MESSAGE(${CMAKE_FIND_LIBRARY_SUFFIXES}) 
```

返回

> .so.a

所以

```
set(Boost_USE_STATIC_LIBS        OFF) 
```

提供导致 .so 文件优先于 .a 的提示，但如果未找到匹配的 .so 则将包含它们。在这种情况下，问题是您很可能没有安装共享对象，或者它们安装在 FindBoost.cmake 不查找的地方。要解决此重新运行 cmake

```
cmake -DBoost_DEBUG=ON 
```

并查看输出以查看 cmake 在哪里寻找 boost 库，然后检查这些位置以查看 .so 文件是否实际存在。如果它们存在，请确保它们的命名方式与您设置的提示匹配，例如 libboost_system-mt.so 将不匹配，因为您指定应该关闭多线程。

关于多线程，对于 linux 发行版，没有“-mt”的库有时只是带有“-mt”的库的符号链接，所以如果是这种情况，将 Boost_USE_MULTITHREADED 设置为 OFF 将导致链接多线程库。

# cuda - 存储在纹理内存中的常量数据：选择线性内存还是 2D/3D 数组？

> ID：13865199
> 
> 赞同：1
> 
> 时间：2012-12-13T17:26:51.903
> 
> 标签：cuda, textures

我的不同内核将使用一些常量数据。为了优化我的代码，我正在考虑使用纹理内存而不是常量内存，因为每个线程将加载不同的数据（尽管每个块都相同）。

对于每个线程，我的数据涉及浮点数 ( **M** )、大小为 3 的浮点数向量 ( **K** ) 或 3×3 浮点数矩阵 ( **J** )。

我至少有两个选择：

*   将**M**存储在一维数组中，将**K**存储在 2D 数组中，将**J**存储在 3D 数组中。
*   通过一些映射将**M**、**K**和**J存储在线性内存中。**

由于线程数非常少（N = 32），哪种解决方案最好？它是等效的，还是`tex1Dfetch`比`tex2D`and更快`tex3D`？我不需要CUDA数组带来的特性（硬件插值等），内存限制显然不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:53:04.250

您的访问模式`M`完美结合，因此在计算能力设备的缓存层次结构的帮助下全局内存 > 2.x 将为该阵列提供最佳性能。

您在 K 和 J 中具有相同的访问模式，因此访问也被合并。因此，没有理由不使用全局内存并获得最佳性能

正如您所评论的那样，*内存限制显然不是问题*，我知道数组的大小会很小，因此您会期望缓存层次结构的良好行为。

如果您想更进一步，您可以将`K`数组复制到 1D 纹理内存并比较两种方法的性能。

# python - 尝试在 matplotlib 中绘制双曲线会沿垂直渐近线产生线吗？

> ID：13865200
> 
> 赞同：3
> 
> 时间：2012-12-13T17:26:52.153
> 
> 标签：python, matplotlib, graphing

我正在尝试使用 pyplot 和 matplotlib 绘制双曲线。这是我的代码：

```
from __future__ import division

import numpy
import matplotlib.pyplot as pyplot

x = numpy.arange(0, 1000, 0.01)
y = [10 / (500.53 - i) for i in x]
pyplot.plot(x, y, 'b')
pyplot.axis([0, 1000, -10, 10])

pyplot.show() 
```

它产生以下图表：

![双曲线](../Images/92e001fa3c2fb2d1d6630e473edb5472.png)

如何修改我的图表以删除沿垂直渐近线延伸的那条线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:48:05.047

在绘图之前，添加这些行：

```
 threshold = 1000 # or a similarly appropriate threshold
 y = numpy.ma.masked_less(y, -1*threshold) 
 y = numpy.ma.masked_greater(y, threshold). 
```

然后做

```
pyplot.plot(x, y, 'b')
pyplot.axis([0, 1000, -10, 10])
pyplot.show() 
```

像往常一样。

另请注意，由于您使用的是 numpy 数组，因此不需要列表推导来计算`y`

```
In [12]: %timeit y = [10 / (500.53 - i) for i in x]
1 loops, best of 3: 202 ms per loop

In [13]: %timeit y = 10 / (500.53 - x)
1000 loops, best of 3: 1.23 ms per loop 
```

希望这可以帮助。

# c++ - 如何将 String 对象转换为 UTF8CHAR 指针？

> ID：13865205
> 
> 赞同：0
> 
> 时间：2012-12-13T17:27:17.350
> 
> 标签：c++, function

我正在集成一个新系统，而旧系统在方法中有一个 char*。现在有一个 UTF8CHAR * 代替。

我有一个字符串对象：

```
string data("test set"); 
```

并想将其传递给函数：

```
my_method(UTF8CHAR* text, ENUM extra, newStruct &item); 
```

我的第一次尝试是：

```
newStruct param("hi", 0,0);
my_method(data.c_str(), extra::OPEN,param); 
```

我没有收到错误，而是收到 EXC_BAD_ACCESS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:22:25.573

A`string`和一个`char`数组每个都包含一个字节序列。这取决于所讨论的库，但常识表明`UTF8CHAR`数组也是字节序列，另外理解某些字节组合描述某些 unicode 代码点，而某些其他字节组合是非法的。所以每个 utf8 char 数组都是一个 char 数组，但不一定反过来。由于区别不是编译器可以检查的，除了确保正确的数据类型处理之外，传递 char 指针应该可以工作。如果没有，可能是其他地方出了问题，我们无法根据您发布的代码来判断。

# ios - 核心数据后台慢和后台保存，sqlite后台和mergeChangesFromContextDidSaveNotification

> ID：13865206
> 
> 赞同：0
> 
> 时间：2012-12-13T17:27:18.210
> 
> 标签：ios, sqlite, core-data, grand-central-dispatch, background-process

我正在为我的应用程序编写更新，我需要在 db 30 图像中插入。现在我正在使用核心数据，它可以正确保存，但需要 10 秒......所以我决定在后台发送保存过程。我有一个处理图像数组的 for 循环，每轮我创建一个 NSmanagedObject 并保存它。有了这个基础，我尝试了不同的解决方案，没有任何工作正常：

1------------

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Add code here to do background processing
    //context = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSManagedObjectContext *contextTemp = [[NSManagedObjectContext alloc] init];
    NSPersistentStoreCoordinator *store=[(RecipesAppDelegate *)[[UIApplication sharedApplication] delegate] persistentStoreCoordinator];
    contextTemp.persistentStoreCoordinator=store;

    Recipe *recipe = (Recipe *)[contextTemp objectWithID:MoID];

    NSManagedObject *image = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:contextTemp];
    [image setValue:[[ArrayDizionariImmagini objectAtIndex:i] valueForKey:@"image"] forKey:@"image"];
    [image setValue:[NSDate date] forKey:@"data"];

    recipe.image=image;
    [contextTemp save:nil];

}); 
```

此方法以正确的方式保存所有内容，但需要 10 秒，就像我在主线程中的第一次尝试一样，所以它没用...

2------------------------------------------------ ----

```
dispatch_queue_t request_queue = dispatch_queue_create("com.doeatraw.saveimages", NULL);
dispatch_async(request_queue, ^{

    // Create a new managed object context
    // Set its persistent store coordinator
    AppDelegate *theDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *newMoc = [[NSManagedObjectContext alloc] init];
    [newMoc setPersistentStoreCoordinator:[theDelegate persistentStoreCoordinator]];

    // Register for context save changes notification
    NSNotificationCenter *notify = [NSNotificationCenter defaultCenter];
    [notify addObserver:self
               selector:@selector(mergeChanges:)
                   name:NSManagedObjectContextDidSaveNotification
                 object:newMoc];

    BOOL success = [newMoc save:nil];

});
dispatch_release(request_queue);

- (void)mergeChanges:(NSNotification*)notification
{

    context = [(RecipesAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    [context performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:NO];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

在此尝试中，我仅在所有更新结束时保存一个临时的 ManagedObjectContext，然后我尝试合并更改。通过这种方式，我可以将所有图像保存在后台，并且我的 UI 始终保持响应。但是，如果我关闭并重新打开应用程序，我所有的积蓄都会丢失......所以很明显核心数据没有任何真正的合并。

3------------------------------------------------ ------------

我也尝试通过sql直接插入所有数据。我已经把所有的东西都放在了后台，看起来没问题，ui 是响应式的并且所有的数据都被插入了......无论如何都出了问题。当我尝试访问同一个表时（通过在应用程序中启动查询同一个表的其他独立方法），sql 使应用程序崩溃而日志中没有错误（只有一次我收到错误“约束失败”）。我能够提取和可视化插入的图像，但我不能在表格中再插入一个（按核心数据）。

有人可以帮助我吗？我知道 NSManagedObjectContext 不是线程安全的，但我尝试在我的一些尝试中遵循文档指南......也许我错过了一些东西......我试图保存的是一个带有图像作为关系的 nsmanagedobject。我如何才能真正合并我的上下文？或者我可以用错误sqlite Constraint Failed做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:21:21.390

Most probably your overhead comes from creating a new context each time you save an image. That's an expensive operation. You only need 2 contexts, one for the main queue and the second for a serial background queue. Also, please note that Apple advises against storing images in the database, the experience I have says the same thing. You should only keep the image path in the database, and keep the image on the file system.

# c# - 基本错误 System.NullReferenceException

> ID：13865207
> 
> 赞同：-1
> 
> 时间：2012-12-13T17:27:18.363
> 
> 标签：c#, asp.net-mvc, razor, nullreferenceexception

我有这个我无法修复的基本错误...对象引用未设置为对象的实例

我正在使用带有 ef 的 asp.net mvc4

我的控制器

```
 public class PostController : Controller
    {
        private UsersContext db = new UsersContext();

        public ActionResult Index()
        {
            return View(db.Posts.ToList());
        }

        public ActionResult Create()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Create(FormCollection values)
        {
            var post = new Post();
            TryUpdateModel(post);

            if(ModelState.IsValid)
            {
                var context = new UsersContext();
                var username = User.Identity.Name;
                var user = context.UserProfiles.SingleOrDefault(u => u.UserName == username);
                var userid = user.UserId;
                // var firstname = user.FirstName;

                post.UserId = userid;
                post.Date = DateTime.Now;

                db.Posts.Add(post);
                db.SaveChanges();
            }
            return View("Index");
        } 
```

我的观点：

```
@model IEnumerable<MyProject.Models.Post>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Content)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Date)
        </th>
        <th></th>
    </tr>

   @foreach (var item in Model) { //**line with error**

    <tr>
        <td>
                @Html.DisplayFor(modelItem => item.Content)
        </td>
        <td>
                @Html.DisplayFor(modelItem => item.Date)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.PostId }) |
            @Html.ActionLink("Details", "Details", new { id=item.PostId }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.PostId })
        </td>
    </tr>
}
</table> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T17:28:41.990

在控制器中的 GET 操作之后，您忘记将模型发送到视图。你的`return`陈述应该是：

```
 public ActionResult Create()
    {
        return View("Create", new Post());
    } 
```

您必须为模型提供一些东西，否则它将`null`在视图中。

您的 POST 方法可能也会遇到同样的问题，它返回：

```
return View("Index"); 
```

而不是这样做，您可能应该只重定向到 Index 操作：

```
return RedirectToAction("Index"); 
```

此外，您只想在成功时执行此操作 - 如果模型状态无效，您可能希望返回创建屏幕以显示错误。因此，您的发布操作最终会是这样的：

```
 [HttpPost]
    public ActionResult Create(FormCollection values)
    {
        var post = new Post();
        TryUpdateModel(post);

        if(ModelState.IsValid)
        {
            var context = new UsersContext();
            var username = User.Identity.Name;
            var user = context.UserProfiles.SingleOrDefault(u => u.UserName == username);
            var userid = user.UserId;
            // var firstname = user.FirstName;

            post.UserId = userid;
            post.Date = DateTime.Now;

            db.Posts.Add(post);
            db.SaveChanges();

            return RedirectToAction("Index");
        }

        return View("Create", post);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:28:57.990

an`Object reference not set to an instance of an object`表示您正试图访问一个对象的属性或方法，即`null`.

# php - 如何将变量从模型传递到控制器以在代码点火器中的视图上使用？

> ID：13865209
> 
> 赞同：-2
> 
> 时间：2012-12-13T17:27:26.573
> 
> 标签：php, codeigniter, variable-assignment

我正在尝试在 codeigniter 中创建我的用户模块，但无法弄清楚如何将模型中的查询结果传递给允许我在视图中使用的控制器。

这是我的模型：

```
public function user() 
        {
            $session = $this->session->userdata('is_logged_in');
            $user_id = $this->session->userdata('id');
            $query = $this->db->query("SELECT * FROM users WHERE id=$user_id LIMIT 1"); 
            foreach ($query->result() as $row)
            {
                $row->first_name;
                $row->id;
                $row->email;
                $row->last_name;
            }

        } 
```

这是我的控制器。如何传递这些对象？或者我应该把它们放在一个数组中，然后传递数组（仍然不确定如何传递它），然后从我的控制器上的数组中提取它们？

```
public function edit() 
    {
        $data['first_name'] = $this->session->userdata('first_name');
        $data['profile_icon'] = 'edit';
        $data['profile_breadcrumbs'] = 'Edit Profile';
        $data['main_content'] = 'account/edit';
        $this->load->view('includes/templates/main_page_template', $data);
        $this->load->library('session');
        $this->load->model('account_model');
        $session = $this->session->userdata('session_id');
        $this->account_model->user();
        if($session)
        {
            //TRYING TO GET OBJECTS
        }
    } 
```

我发现了与此相关的类似问题，但很难找到我正在寻找的东西。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:50:26.387

您必须将其分配给一个变量并使用它：

```
$user = $this->account_model->user();

foreach($user->result() as $row){
    echo $row->name;
} 
```

如果你想将数据传递给视图，你必须确保在所有`$data`设置后最后加载视图：

```
$user = $this->account_model->user();
$data['user'] = $user;
$this->load->view('includes/templates/main_page_template', $data); 
```

那么模型生成的用户数据将通过`$user`变量在视图中可用。

* * *

编辑：

还注意到你没有`return`从模型中得到任何东西：/

模型：

```
public function user() 
    {
        $session = $this->session->userdata('is_logged_in');
        $user_id = $this->session->userdata('id');
        $query = $this->db->query("SELECT * FROM users WHERE id=$user_id LIMIT 1"); 
        return $query;

    } 
```

控制器：

```
$user = $this->account_model->user();
$data['user'] = $user;
$this->load->view('includes/templates/main_page_template', $data); 
```

看法：

```
foreach($user->result() as $row){
    $first_name = $row->first_name;
    $id = $row->id;
    $email = $row->email;
    $last_name = $row->last_name;
}

echo "User id: $id has $first_name as a first name, $last_name as their last name, and $email as their email address"; 
```

因此，您的模型查询数据库并返回结果。控制器为它想要的数据调用模型中的函数（在这种情况下`user()`）并将其发送到视图。视图循环查询并显示数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:14:51.697

控制器：

```
$data['user']=$this->account_model->user();
//populates $data['user'] with the user details based on the session.
$this->load->view('includes/templates/main_page_template', $data); 
```

该模型：

```
public function user() 
    {
        $session = $this->session->userdata('is_logged_in');
        $user_id = $this->session->userdata('id');
        $query = $this->db->query("SELECT * FROM users WHERE id=$user_id LIMIT 1");
        if($query->num_rows()==1)
        {
           $data = $query->result_array();
           return $data[0];
        //above returns the single row you need to the controller as an array.
        //to the $data['user'] variable.
        } else {
           do something here to handle no return
        }
    } 
```

然后在视图中可以通过 $user 变量访问您的数据，因此您可以这样做：

```
echo 'Hi '.$user['first_name']; 
```

# c - 复合文字在这段代码中是如何工作的？

> ID：13865216
> 
> 赞同：1
> 
> 时间：2012-12-13T17:27:51.383
> 
> 标签：c, gcc, c99, compound-literals

我有以下代码，其中我编写了两个函数。两者都旨在产生相同的输出。但是`g()`具有循环的函数产生的输出与我预期的不同，如下所示。

```
#include <stdio.h>

struct S { int i; };

void f(void)
{
    struct S *p;

    int i = 0;

    p = &((struct S) {i});
    printf("%p\n", p);

    i++;

    p = &((struct S) {i});
    printf("%p\n", p);
}

void g(void)
{
    struct S *p;

    for (int i = 0; i < 2; i++)
    {
        p = &((struct S) {i});
        printf("%p\n", p);
    }
}

int main()
{   
    printf("Calling function f()\n");
    f();

    printf("\nCalling function g()\n");
    g();
} 
```

输出：

```
Calling function f()
0023ff20
0023ff24

Calling function g()
0023ff24
0023ff24 
```

为什么调用时的地址`p`相同`g()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T17:48:18.907

好吧，我不确切知道您要完成什么，但这里发生的是：

*   C99中的`(struct S){i}`符号将在堆栈上创建新的数据结构
*   此数据结构在创建它的作用域结束时自动销毁

因此，在`f()`函数中，您实际上在整个函数的范围内创建了两个不同的结构（即使您将它们的地址分配给同一个指针）——因此是两个不同的地址。

```
void f(void)
{
    struct S *p;

    int i = 0;

    p = &((struct S) {i}); // <- first data structure, let's call it A
    printf("%p\n", p);     // <- address of the structure A printed

    i++;

    p = &((struct S) {i}); // <- second data structure, let's call it B
    printf("%p\n", p);     // <- address of the structure B printed
}                          // <- both A and B destroyed 
```

但是在`g()`函数中`p`是在块的内部块中创建和销毁的`for`，因此碰巧 p 被一遍又一遍地分配在堆栈上的相同位置，总是给出相同的地址。

```
void g(void)
{
    struct S *p;

    for (int i = 0; i < 2; i++)
    {
        p = &((struct S) {i}); // <- data structure A created
        printf("%p\n", p);     // <- data structure A's address printed
    }                          // <- data structure A destroyed
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T17:31:55.610

您应该检查汇编代码以确保，但我想，由于`p`在循环范围内本地分配了自动分配变量的地址（在堆栈上分配），它只是重用堆栈上的相同空间。

`f()`它不会这样做，因为两个结构在同一范围内共存，而在编译`g()`器中确定在第一次迭代结束时您将无法使用`&((struct S) {0})`.

只是出于好奇，`-O2`对 gcc4.2 进行了尝试，看看是否有任何变化：

```
Calling function f()
0x7fff5fbff388
0x7fff5fbff380

Calling function g()
0x7fff5fbff390
0x7fff5fbff390 
```

# jquery - jQuery UI：Datepicker 将年份范围下拉设置为 100 年

> ID：13865218
> 
> 赞同：319
> 
> 时间：2012-12-13T17:28:04.247
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

使用 Datepicker，默认情况下，年份下拉菜单仅显示 10 年。用户必须单击最后一年才能添加更多年份。

我们如何将初始范围设置为 100 年，以便用户默认看到一个大列表？

![在此处输入图像描述](../Images/da8b309c183101aca490737eaf79f22e.png)

```
 function InitDatePickers() {
        $(".datepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            showButtonPanel: true,
            maxDate: '@maxDate',
            minDate: '@minDate'
        });
    } 
```

* * *

## 回答 #1

> 赞同：604
> 
> 时间：2012-12-13T17:30:00.240

您可以在此处根据文档使用此选项设置年份范围[http://api.jqueryui.com/datepicker/#option-yearRange](http://api.jqueryui.com/datepicker/#option-yearRange)

```
yearRange: '1950:2013', // specifying a hard coded year range 
```

或者这样

```
yearRange: "-100:+0", // last hundred years 
```

从文档

> 默认值：“c-10:c+10”
> 
> 年份下拉菜单中显示的年份范围：相对于今天的年份 ("-nn:+nn")、相对于当前选定的年份 ("c-nn:c+nn")、绝对年份 ("nnnn: nnnn") 或这些格式的组合 ("nnnn:-nn")。请注意，此选项仅影响下拉列表中显示的内容，要限制可以选择的日期，请使用 minDate 和/或 maxDate 选项。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-02-28T06:42:41.360

**尝试以下操作：-**

> **ChangeYear：-**当设置为true时，表示可以选择当前月份日历中指示的上个月或下个月的单元格。此选项与 options.showOtherMonths 设置为 true 一起使用。
> 
> **YearRange：-**指定年份下拉列表中的年份范围。（默认值：“-10:+10”）

**例子：-**

```
$(document).ready(function() {
    $("#date").datepicker({
        changeYear:true,
        yearRange: "2005:2015"
    });
}); 
```

**请参阅：-** [在 jquery datepicker 中设置年份范围](https://web.archive.org/web/20160119122404/http://jqueryasp.net/set-year-range-jquery-datepicker/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-26T02:13:31.730

我这样做了：

```
var dateToday = new Date();
var yrRange = dateToday.getFullYear() + ":" + (dateToday.getFullYear() + 50);
and then
yearRange : yrRange 
```

其中`50`是当前年份的范围。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-04T06:38:04.333

您可以在 jQuery UI datepicker 中使用此选项设置年份范围：

```
yearRange: "c-100:c+0", // last hundred years and current years

yearRange: "c-100:c+100", // last hundred years and future hundred years

yearRange: "c-10:c+10", // last ten years and future ten years 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-26T07:59:18.743

我想实现日期选择器来选择生日，但我在更改时遇到了麻烦，`yearRange`因为它似乎不适用于我的版本（1.5）。我在这里更新到最新的 jquery-ui datepicker 版本：[https](https://github.com/uxsolutions/bootstrap-datepicker) ://github.com/uxsolutions/bootstrap-datepicker 。

然后我发现他们提供了这个非常有用的即时工具，因此您可以配置整个日期选择器并查看您必须使用哪些设置。

这就是我发现该选项的方式

> 默认查看日期

是我正在寻找的选项，但我没有在网上找到任何结果。

所以对于其他用户：如果您还想提供日期选择器来更改生日，我建议使用此代码选项：

```
$('#birthdate').datepicker({
    startView: 2,
    maxViewMode: 2,
    daysOfWeekHighlighted: "1,2",
    defaultViewDate: { year: new Date().getFullYear()-20, month: 01, day: 01 }
}); 
```

打开日期选择器时，您将从视图开始选择年份，即 20 年前相对于当前年份。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-10T16:43:32.323

考虑到最初的问题是多久前发布的，所以提出这个建议有点晚了，但这就是我所做的。

我需要一个 70 年的范围，虽然没有 100 年多，但对于访问者来说仍然太多年滚动浏览。（jQuery 确实以组为单位进行了一年，但对于大多数人来说，这是一种痛苦。）

第一步是修改 datepicker 小部件的 JavaScript：在 jquery-ui.js 或 jquery-ui-min.js 中找到此代码（它将被最小化）：

```
for (a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+
a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++)
 a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";
a.yearshtml+="</select>"; 
```

并将其替换为：

```
a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+
 ".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');
 \" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');
 \">";
for(opg=-1;b<=g;b++) {
    a.yearshtml+=((b%10)==0 || opg==-1 ?
        (opg==1 ? (opg=0, '</optgroup>') : '')+
        (b<(g-10) ? (opg=1, '<optgroup label="'+b+' >">') : '') : '')+
        '<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";
}
a.yearshtml+="</select>"; 
```

这围绕着 OPTGROUP 标签的几十年（当前除外）。

接下来，将其添加到您的 CSS 文件中：

```
.ui-datepicker OPTGROUP { font-weight:normal; }
.ui-datepicker OPTGROUP OPTION { display:none; text-align:right; }
.ui-datepicker OPTGROUP:hover OPTION { display:block; } 
```

这隐藏了几十年，直到访问者将鼠标悬停在基准年上。您的访问者可以快速滚动任意年数。

随意使用它；请在您的代码中给出适当的归属。

# fonts - 为什么使用 Edge Inspect 在通过 Localhost 的设备中查看 Typekit 字体不起作用？

> ID：13865222
> 
> 赞同：2
> 
> 时间：2012-12-13T17:28:13.573
> 
> 标签：fonts, localhost, webfonts, typekit, adobe-edge-inspect

使用 Edge Inspect 测试本地运行的站点时，不会下载或呈现 Typekit 字体。

我已将 localhost 添加到我的 Typekit 工具包中的允许域中，并添加了我机器的 IP 地址。

在浏览器中查看时，字体呈现良好，只是在任何设备上都没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T17:31:06.977

我正在添加 Adob​​e 支持提供的这个答案，希望它能帮助其他人解决这个问题。以下为直接报价：

> 当您通过主机名浏览本地网站时`localhost`，网络上的任何其他设备都无法访问该网站，Edge Inspect 会自动获取您机器的本地 IP 地址（与 whatismyip 等网站上显示的外部 IP 地址不同） .com）并将其发送到移动应用程序。例如，假设我有一个 Sinatra 应用程序在我的 Mac 上的 Chrome 中运行为 `http://localhost:4567`. 我的 iPhone 无法理解主机名“localhost”，但它可以看到我的 Mac 使用其 IP 地址 10.1.10.1，因此 Edge Inspect 将导航到`http://10.1.10.1:4567`.
> 
> 因此，要使字体正常工作，您可以将两者都添加`localhost`到 `10.1.10.1`您的工具包中。但是，我们不建议将本地 IP 添加到套件中，因为它们往往会在没有警告的情况下更改。（在我上面的例子中，下次我打开我的电脑时，它的 IP 可能会更改为 10.1.10.2，但我只知道字体在我的设备上再次停止工作。）
> 
> 为了解决这个问题，我们建议使用某种形式的“动态 DNS”——基本上，一个使用您当前 IP 自动更新的域名，因此将始终指向您的计算机。
> 
> 如果您使用的是 Mac，最简单的方法是使用 Mac 的 Bonjour 主机名。Bonjour 是 Mac OS X 和 iOS 中内置的一项技术，可帮助设备通过网络自动找到彼此。
> 
> 要查找您的 Bonjour 主机名：
> 
> 1.  在 Mac 上打开系统偏好设置。
> 2.  选择共享图标。
> 3.  您的 Bonjour 主机名将显示在顶部区域的“计算机名称”字段下。
> 
> 您可以将那里出现的主机名添加到您的套件中，并在您网络上的任何 Apple 设备上使用它。例如，我的 Bonjour 名称是 Somename-rMBP.local，因此我可以在任何 Mac 或 iOS 设备上浏览到[http://Somename-rMBP.local:4567并查看我的 Sinatra 应用程序。](http://Somename-rMBP.local:4567)
> 
> 不幸的是，这个简单的解决方案只能在安装了 Apple Bonjour 软件的 Apple 设备或 Windows PC 上运行——您不能在 Android 手机或平板电脑上使用此主机名。如果您需要一个可以在任何设备上使用的主机名，我推荐以下几个选项：
> 
> 1.  名为 Forward 的第三方服务提供了一种将端口从您的计算机轻松转发到 Internet 上任何位置的其他设备的方法。您可以在此处了解有关它们的更多信息并注册 30 天试用版： [https](https://forwardhq.com) ://forwardhq.com 。Forward 将为您的转发应用程序提供一个永久域名，您可以将其添加到您的工具包中，例如 `dev-yourcompany.fwd.wf`.
>     
>     
> 2.  37signals 有一个名为 xip.io 的免费“通配符 DNS”服务，它会自动将流量转发到本地 IP 地址。您可以通过打开系统偏好设置，然后选择网络来获取您当前的本地 IP 地址。无论连接处于活动状态（即旁边有一个绿点），IP 地址都应显示在连接状态下方的小文本中。获得 IP 后，您可以通过 [YOUR IP].xip.io 访问您的计算机。要使字体正常工作，请将 *.xip.io 添加到您的工具包中。请记住，您的 IP 可能会更改，因此如果您的网站无法访问，您应该检查以确保您拥有正确的 IP 地址。

# linux - Apache - 允许访问服务器上的“共享”目录

> ID：13865224
> 
> 赞同：2
> 
> 时间：2012-12-13T17:28:29.987
> 
> 标签：linux, apache

在这里遇到了一些问题，而我想配置我的 apache 服务器以让一个子域访问另一个文件（共享），以消除直接 URL 调用的需要和开销。

例如，我希望我的主域 (site.domain.com) 访问位于“共享”域 (share.domain.com/images) 中的图像。

目录结构如下：

```
- subdomains
    - site
    - share 
```

我有一个包含以下内容的 site.domain.com/index.html 文件...

```
<img src="http://share.domain.com/images/img.jpg"> (works)
<img src="../share/images/img.jpg"> (does not work) 
```

而且无论我添加多少“../”，我仍然无法离开目录。当我对不起作用的图像执行“查看图像”时，会显示该图像。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:11:34.157

免责声明：我不是专家。

我认为您无法访问共享区域的原因是不在您的`DocumentRoot`，在查看文档后，我认为您想要的是`Alias`指令；可在以下位置找到相关文档：

[http://httpd.apache.org/docs/2.2/mod/mod_alias.html#alias](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#alias)

使用示例如下：

```
Alias /share path-to-share
<Directory path-to-share>
    Order allow,deny
    Allow from all
</Directory> 
```

您需要将其放入`<VirtualHost>`配置中的块中。这样做映射`/share/imgages/img.jpg`到，`<path-to-share>/images/img.jpg`以便您可以访问它，就像文件在您的`DocumentRoot`.

使用此设置，您的示例将变为：

```
<img src="http://share.domain.com/images/img.jpg"> (works)
<img src="/share/images/img.jpg"> (should work) 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:44:33.723

假设您的站点位于`/var/www/site`(site.domain.com) 下，而您的共享文件夹位于`/var/www/share`(share.domain.com) 下。

If you would like to have share as just a subdirectory accessible from `site.domain.com/share` all you will need to do its to create a symlink from `/var/www/share` to `/var/www/site/share`:

```
ln -s /var/www/share /var/www/site/share 
```

# php - 读取由 xpath 填充的多维数组的值

> ID：13865231
> 
> 赞同：2
> 
> 时间：2012-12-13T17:28:53.823
> 
> 标签：php, xml, arrays, xpath, simplexml

我对 PHP 有点陌生，我不确定我在这里缺少什么。我有一个使用 XPath 从 XML 文件创建的多维数组。我能够在数组中移动并检索大多数值，但我被困在一个部分。

XML 结构示例：

*   主节点
    *   子节点项1
    *   子节点项2
    *   子节点项 3
    *   子节点项列表
        *   子列表项
            *   子项属性 1
            *   子项属性 2
            *   子项属性 3
        *   子项列表
            *   子项属性 1
            *   子项属性 2
            *   子项属性 3
    *   子节点项4
    *   子节点项5

我可以使用以下语法检索任何 SubNode 值的值：

```
$val=$XML[$i]->SubNodeItem1; 
```

但是，我无法终生弄清楚如何检索`SubListItemProperty`.

我认为这将是逻辑语法：

```
$SubItemPropVal=$XML[$i]->SubNodeItemList->SubListItem[$i]->SubItemProperty1; 
```

我搜索了与 PHP 多数组相关的其他论坛和主题，但未能找到正确的方法来执行此操作。

`"Trying to get property of non-object"`运行代码时出现错误。我很确定这表明我没有正确指向节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:38:14.343

~~我的建议是保留显然已经可以正常工作的 XML 文件并使用它。~~

~~将其元素转移到数组中对我来说没有多大意义。~~

*编辑： OP 实际上并不使用数组，而是使用 SimpleXML 对象。*

XPath 在从 XML 文档中选择所需的位方面非常灵活和强大：

```
$doc = new DOMDocument();
$doc->loadXML($your_xml);

$xp = new DOMXPath($doc);

// for example
$result = $xp->query("//SubListItem[2]/SubItemProperty1");

if ($result->length)
{
    echo $result->item(0)->textContent;
} 
```

* * *

SimpleXML 也可以工作：

```
$xml = simplexml_load_string($result);

// either this ($node will be an array of matches, or FALSE)
$node = $xml->xpath("//SubNodeItemList/SubListItem[1]/SubItemProperty1");

// or this (unless you add a number, [0] will be assumed)
$node = $xml->SubNodeItemList->SubListItem->SubItemProperty1; 
```

重要提示：数组表示法从 开始计数`0`，而 XPath 总是从 开始计数`1`。

请注意，当文档的结构不是您的代码所期望的时，第二个选项（数组表示法）将引发运行时错误。

使用 XPath 将根本没有返回值，这更容易处理（不需要 try/catch 块，`if ($node) { ... }`就足够了）。

另请注意，使用 SimpleXML，文档元素 ( `<MasterNode>`)*成为*文档。所以你不会使用`$xml->MasterNode->SubNodeItemList`，但是`$xml->SubNodeItemList`。

# c++ - Qt 的 QBuffer 线程安全吗？

> ID：13865232
> 
> 赞同：5
> 
> 时间：2012-12-13T17:28:55.983
> 
> 标签：c++, qt, thread-safety

我在模式下使用[QBuffer 。](http://qt-project.org/doc/qt-4.8/qbuffer.html)`ReadWrite`一名工作人员`QThread`将数据推送到缓冲区中，另一名工作人员`QThread`从中读取。

`QBuffer`保证线程安全还是我需要从互斥体中派生`QBuffer`并添加互斥体？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T17:39:07.183

引用 Mark Summerfield 的书[C++ GUI Programming with Qt 4：](https://rads.stackoverflow.com/amzn/click/com/0132354160)

> Qt 的线程安全类包括 QMutex、QMutexLocker、QReadWriteLock、QReadLocker、QWriteLocker、QSemaphore、QThreadStorage 和 QWaitCondition。此外，部分 QThread API 和其他几个函数是线程安全的，特别是 QObject::connect()、QObject::disconnect()、QCoreApplication::postEvent() 和 QCoreApplication::removePostedEvents()。

Qt 期望您将围绕它的大多数类使用锁定机制。如果是，文档会说“所有函数都是线程安全的”，并且各个函数还将指定“是线程安全的”。

> [Qt 类注意事项](http://qt-project.org/doc/qt-4.8/threads-reentrancy.html#thread-safe)
> 
> 许多 Qt 类是可重入的，但它们不是线程安全的，因为使它们成为线程安全的会导致重复锁定和解锁 QMutex 的额外开销。例如，QString 是可重入的，但不是线程安全的。您可以同时从多个线程安全地访问 QString 的不同实例，但不能同时从多个线程安全地访问 QString 的同一实例（除非您自己使用 QMutex 保护访问）。
> 
> 一些 Qt 类和函数是线程安全的。这些主要是线程相关的类（例如QMutex）和基本函数（例如QCoreApplication::postEvent()）。

因为`QBuffer`是`QIODevice`我特别希望它不是线程安全的直接子类，但是有些容器类对于读访问是线程安全的，但需要锁定以进行写访问：

> [容器类](http://doc.qt.digia.com/qt/containers.html)
> 
> 容器类是隐式共享的，它们是可重入的，它们针对速度、低内存消耗和最小的内联代码扩展进行了优化，从而产生更小的可执行文件。此外，在所有用于访问它们的线程将它们用作只读容器的情况下，它们是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:47:50.837

`QBuffer`不是线程之间通信的最佳方式，因为写入它会使缓冲区增长，但从它读取并不会在开始时删除数据。

您可以改为使用带有`QByteArray`参数的信号/插槽，使用`QLocalSocket`或编写从您自己派生的线程安全环形缓冲区类`QIODevice`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T17:40:12.220

这扩展了 QIODevice，并且那里的文档指出 QIODevice 上的所有方法都是可重入的，但没有指定任何线程安全性。鉴于 QBuffer 没有提及更多内容，我希望 QBuffer 不是线程安全的。

[http://qt-project.org/doc/qt-4.8/qiodevice.html](http://qt-project.org/doc/qt-4.8/qiodevice.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T15:57:15.360

Qt 中线程之间通信的最简单方法是将事件发布到另一个线程的事件队列中。这假设另一个线程旋转一个事件循环。它只需要定期在您通常检查新数据等的地方旋转它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-09T19:42:50.103

正如其他几位发帖人所指出的那样，QBuffer 是不适合这项工作的工具，无论线程安全问题如何。

[Qt 中是否有进程内本地管道？](https://stackoverflow.com/questions/32317081/is-there-an-intra-process-local-pipe-in-qt)描述了一个更适合预期目的的基于 QIODevice 的 FIFO 队列（尽管它不包括任何线程安全机制）

# java - 嵌套 For 循环动态深度 Java

> ID：13865235
> 
> 赞同：2
> 
> 时间：2012-12-13T17:28:59.130
> 
> 标签：java, algorithm, loops, nested

您好，我是编程新手并已注册此论坛 :)

所以我创建了一个带有嵌套 for 循环的小程序，它打印出五个数字的所有组合，其值可以从 0 到 5。使用嵌套的 for 循环可以正常工作。但是没有更清洁的解决方案吗？我尝试调用 for 循环本身，但我的大脑没有得到解决方案.. :(

```
//my ugly solution
int store1, store2, store3, store4, store5;
        for (int count = 0; count <= 5; count++) {
            store1 = count;
            for (int count2 = 0; count2 <= 5; count2++) {
                store2 = count2;
                for (int count3 = 0; count3 <= 5; count3++) {
                    store3 = count3;
                    for (int count4 = 0; count4 <= 5; count4++) {
                        store4 = count4;
                        System.out
                                .println(store1 + " " + store2 + " " + store4);
                }
 //I'm trying around with something like this 
    void method1() {
        for (int count = 0; count <= 5; count++) {
                    list.get(0).value = count;
            count++;
            method2();
        }
    }
    void method2() {
        for (int count = 0; count <= 5; count++) {
                    list.get(1).value = count;
            count++;
            method1();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:42:42.437

通常当人们尝试使用递归或函数时，使用循环更简单或更快。但是，在这种情况下，递归是结合循环的更简单的选择。

```
public static void method(List<Integer> list, int n, int m) {
   if (n < 0) {
       process(list);
   } else {
      for(int i = 0; i < m; i++) {
         list.set(n, i);
         method(list, n-1, m);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:04:54.020

我知道您正在尝试组合，但这可能会有所帮助。

**重复排列**

当你有 n 件事可供选择时……你每次都有 n 个选择！

选择它们时，排列是：

n × n × ... (r 次) = n^r

```
//when n and r are known statically

class Permutation
{
    public static void main(String[] args)
    {
        char[] values = {'a', 'b', 'c', 'd'};
        int n = values.length;
        int r = 2; 

        int i = 0, j = 0;
        for(i=0; i<n; i++)
        {
            for(j=0; j<n; j++)
            {
                System.out.println(values[j] + " " + values[i]);
            }
        }
    }
}

//when n and r are known only dynamically

class Permutation
{
    public static void main(String[] args)
    {
        char[] values = {'a', 'b', 'c', 'd'};
        int n = values.length;
        int r = 2; 
        int i[] = new int[r];
        int rc = 0;
        for(int j=0; j<Math.pow(n,r); j++)
        {

            rc=0;
            while(rc<r)
            {
                System.out.print(values[i[rc]] + " ");
                rc++;
            }
            System.out.println();
            rc = 0;
            while(rc<r)
            {
                if(i[rc]<n-1)
                {
                    i[rc]++;
                    break;
                }
                else
                {
                    i[rc]=0;
                }
                rc++;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T17:41:37.837

像这样的东西？

```
// Print all sequences of len(list)+n numbers that start w/ the sequence in list
void method( list, n ) {
    if ( list.length == n )
        // print list
    else for ( int c=0; c<=5; c++ ) {
        // add c to end of list
        method( list, n );
        // remove c from end of list
    }
} 
```

初始调用将是最初为空的`method( list, 5 )`地方。`list`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T17:46:32.487

这里是另一个交互但不太优雅的版本

```
while (store1 < 6) {
        store5++;
        if (store5 == 6) {
            store5 = 0;
            store4++;
        }
        if (store4 == 6) {
            store4 = 0;
            store3++;
        }
        if (store3 == 6) {
            store3 = 0;
            store2++;
        }
        if (store2 == 6) {
            store2 = 0;
            store1++;
        }
        System.out.println(store1 + " " + store2 + " " + store3 + " " + store4 + " " + store5 + " ");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T18:00:24.203

我能想到的最简单的代码会用一种完全不同的方法来解决这个问题：

```
public class TestA {
    public static void main(String[] argv) {
        for (int i=0; i<(6 * 6 * 6 * 6 * 6); ++i) {
            String permutation = Integer.toString(i, 6);
            System.out.println("00000".substring(permutation.length()) + permutation);
        }
    }
} 
```

从您的文本（不是您的代码）中，我收集到您有 5 个位置和 6 个符号，这表明有 6 到 5 次方组合。所以代码只是计算这些数字并将数字转换为输出组合。

由于这也可以看作是一个以 6 为底的数字系统，因此它使用了 Integer.toString，它已经为此提供了格式化代码（前导零除外）。在缺少的地方添加前导零。

# java - 分发使用 JRI 和 R 的 Java 应用程序

> ID：13865236
> 
> 赞同：2
> 
> 时间：2012-12-13T17:29:00.043
> 
> 标签：java, r, packaging, jri

所以我正在开发一个使用 JRI 库与 R 对话的 Java 应用程序（在 Windows 7 上的 Eclipse 中开发）。为了让 JRI 工作，我必须修改一堆环境变量（PATH、R_HOME、R_LIBS_USER），以便让 JRI 能够与 R 对话并使用所有已安装的用户库。由于这些都是特定于我的系统的，我该如何制作它，所以当我使它可分发时，它能够检测到用户 R 安装的位置？我是否必须让用户设置所有这些环境变量作为设置的一部分？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:45:05.287

看看[JGR](http://rforge.net/JGR)启动器——它们就是这样做的（在 Windows 和 Mac OS X 上）。他们在启动 Java 之前检测 R 位置并相应地设置变量。源代码位于源代码`launcher`目录中（参见[https://svn.rforge.net/JGR/trunk/launcher/](https://svn.rforge.net/JGR/trunk/launcher/)）。

PS：有关 rJava/JRI/JGR 的问题，请使用[stats-rosuda-devel](http://mailman.rz.uni-augsburg.de/mailman/listinfo/stats-rosuda-devel)邮件列表。

# c# - 使用 Windows 语音将任何句子转换为文本

> ID：13865244
> 
> 赞同：-1
> 
> 时间：2012-12-13T17:29:14.980
> 
> 标签：c#, speech-recognition, speech-to-text, wolframalpha

目前，我有一个 C# 程序，它使用 MS Windows 语音识别 (SR) 系统获取语音，将其转换为文本，将问题作为文本发送到 Worlfram Alpha，然后使用文本到语音读取基于文本的答案（ TTS）。

不幸的是，计算机只能识别在输入到 SR 的语法中定义的预定义句子和短语的列表。我需要该程序识别任何句子，而不必定义一个包含英语中每个单词的巨大语法文件。如何让程序识别任何英语短语而无需定义包含完整英语语言规则的语法文件？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:29:17.673

今天有两种基本类型的语音识别系统；一种类型支持使用列出预期识别结果规则的[语法](http://msdn.microsoft.com/en-us/library/system.speech.recognition.grammar.aspx)，另一种使用[统计建模](http://electronics.howstuffworks.com/gadgets/high-tech-gadgets/speech-recognition2.htm)（例如：隐马尔可夫模型）基于匹配用于“训练”的一组数据的概率来获得识别结果系统。您所描述的“预定义句子和短语列表”是语法。我很确定 MS Windows 语音识别系统只支持基于语法的解决方案。您所描述的所需解决方案是 SR 的统计建模系统。你可能想看看[狮身人面像](http://cmusphinx.sourceforge.net/sphinx4/#language_models)项目。它是开源的，并且支持统计建模。请注意，建立统计建模系统并不容易，并且需要花费大量时间才能对其进行正确调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:31:29.743

看看这个 - [SpeechSynthetizer Class](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.aspx)以及这个相关的堆栈溢出问题[How to write an application that reads text and generate speech](https://stackoverflow.com/questions/1386058/how-to-write-an-application-that-reads-text-and-produces-speech)

对于 Speech to Text，请查看此 codeproject 文章[http://www.codeproject.com/Articles/380027/Csharp-Speech-to-Text](http://www.codeproject.com/Articles/380027/Csharp-Speech-to-Text)

# jsp - 将 JSP 参数从一个 jsp 传递到另一个：代码使用 HIPPO

> ID：13865245
> 
> 赞同：2
> 
> 时间：2012-12-13T17:29:19.417
> 
> 标签：jsp, parameters, hippocms

我正在尝试将参数从一个 jsp 文件传递​​到另一个使用

来自 Index.jsp

```
<jsp:include page="footer.jsp">
   <jsp:param name="main" value="true"/>
</jsp:include> 
```

然后使用在footer.jsp中访问param main

```
 <h1>The value : ${param.main}</h1>
  <c:choose>
    <c:when test="${param.main=='true'}">
      something
    </c:when> 
```

但是，param.main 在footer.jsp 中仍然为空。

我们的代码使用 HIPPO CMS。有没有办法可以在 HIPPO CMS 中将参数从一个 jsp 发送到另一个。我尝试搜索，但找不到与 HIPPO CMS 相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:57:53.260

我们为此使用了标记库。有效。

创建一个标签文件footer.tag（这个文件类似于footer.jsp）

然后在 index.jsp 中包含使用的标记文件

```
<customTag:footer main="true"/> 
```

（自定义标签表示保存 footer.tag 的文件夹）

这将包括 index.jsp 中的页脚标记，并且可以如上所述传递参数。

页脚标签示例：

```
<%@ tag language="java" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib uri="http://www.hippoecm.org/jsp/hst/core" prefix='hst'%>

<%@ attribute name="main" required="false"%>

<p>The value of main is ${main}</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T09:48:41.067

我设法使用以下代码解决了这个问题：

```
<c:set var="name" value="${value}" scope="request" />
<jsp:include page="page.jsp" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T08:08:34.967

Hippo 用自己的请求包装 HttpServletRequest 并为属性名称添加前缀以访问不同组件（或浏览器窗口）中具有相同名称的属性。但是所有这一切都不能阻止你使用 pure `HttpServlet.setAttribute`- 只是 get `RequestContext`from`HstRequest`然后 get `HttpServletRequest`：

```
HstRequest hstRequest = ...
hstRequest.getRequestContext().getServletRequest().setAttribute("attributeName", new Object()); 
```

# html - Libgdx 和 html5 中的 Scene2dUI

> ID：13865246
> 
> 赞同：4
> 
> 时间：2012-12-13T17:29:26.290
> 
> 标签：html, gwt, libgdx, scene2d

我无法正常启动包含scene2d ui 元素的应用程序版本的html5。使用 Scene2dUI 转换到屏幕后，结果显示在这里![使用 Scene2dUI 过渡到屏幕](../Images/95c5cdb51a214e3d9811fabf80d17ea0.png)

看起来像应用程序“工作”是可能的。

Eclipse 的gwt 插件的最后一个版本已经设置好了。

为什么会出现这种情况？该版本的android和桌面运行良好。

在存档一个测试项目。本[示例](http://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/UITest.java)的源代码 该项目是在 Intellij Idea 中开发的，html5 版本是在 Eclipse 中编译的。`Version Libgdx libgdx-nightly-20121213.zip`. 在 http:// 的已编译 html5 中不存在。

在存在使用 Scene2d 的屏幕和具有 Scene2dUI 的屏幕而没有使用 Scene2dUI 的屏幕的游戏中工作得非常好。如果我从 Scene2dUI 切换到屏幕，则会出现现在 http:// 上的错误

编辑： [问题 1169](http://code.google.com/p/libgdx/issues/detail?id=1169)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:49:39.093

此问题现已修复。只需从 github 获取源以进行更新。相关帖子：[http ://www.badlogicgames.com/wordpress/?p=2704](http://www.badlogicgames.com/wordpress/?p=2704)

# inno-setup - 使用 InnoSetup 递归设置文件夹权限

> ID：13865247
> 
> 赞同：3
> 
> 时间：2012-12-13T17:29:28.953
> 
> 标签：inno-setup

我有一个文件夹树，我复制到 C:\ProgramData 我正在安装的软件（不要为此责怪我，我没有架构、编写或设计它）需要每个人都完全控制这些数据。

所以我把下面这行放在 [Files] sectionL

```
Source: "C:\ProgramData\PFPS\MapDataServer\*"; DestDir: "C:\ProgramData\PFPS\FalconViewCommand"; Flags: ignoreversion createallsubdirs recursesubdirs; Permissions: everyone-full; Excludes: "*.LDF" 
```

是的，这确实让每个人都可以完全控制每个单独的文件，但是程序需要创建文件并且文件夹权限（目录）并没有为每个人设置。

我试图添加一个 [Dirs] 部分，但没有奏效：

```
[Dirs]
Name: "C:\ProgramData\PFPS\FalconViewCommand"; Flags: uninsalwaysuninstall; Permissions: everyone-full 
```

大师怎么说？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T13:42:05.073

这对我有用：

```
[Dirs]    
Name:"{app}\"; Permissions:everyone-modify 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:22:55.567

我一直在做的是最后的以下RUN，我发现Dirs没有工作（是的，我总是在测试安装脚本时完全卸载），否则你怎么知道产品发布时会发生什么?

我同意你关于 {commonappdata} 的观点，但我正在尝试消除随机性，直到我找到问题的根源。

这是我一直在尝试的：

```
[Run]
Filename: "C:\Windows\System32\icacls.exe"; Parameters: "C:\ProgramData\PFPS\FalconViewCommand /grant:r Users:(OI)(CI)F"; WorkingDir: "{tmp}"; Description: "Changing Directory Permissions"; StatusMsg: "Changing Directory Permissions" 
```

# extjs - 商店同步前的模型验证

> ID：13865250
> 
> 赞同：2
> 
> 时间：2012-12-13T17:29:34.680
> 
> 标签：extjs, extjs4, ext.net

监听`beforeSync`商店的事件。选项参数具有要同步的所有记录的哈希，分解为创建、更新和销毁。

我需要根据他们的模型验证规则来验证它们。

是否可以？

我试过了，但它总是返回 true：

```
Ext.Array.forEach(options.create, function (item) {
    console.log(item.isValid());
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:53:41.547

我刚刚意识到无效记录没有被插入到要同步的记录哈希中（选项参数）。

相反，我可以遍历商店的商品：

```
Ext.Array.forEach(st.data.items, function (item) {
    console.log(item.isValid())
} ); 
```

# javascript - ExtJS MVC 在哪里添加全局变量？

> ID：13865251
> 
> 赞同：9
> 
> 时间：2012-12-13T17:29:42.733
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我想知道在哪里为 ExtJS 应用程序添加全局变量。我已经查看了 stackoverflow 中的一些建议，其中提到您可以将它们添加到 app.js 中。但是，有人可以更具体吗？我的 app.js 看起来像这样：

```
Ext.application({

    launch: function() {..}

}); 
```

那么，变量到底去哪儿了？在启动功能中？外面`Ext.application`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-05T13:45:12.477

更好的方法是创建一个单独的类来保存这样的全局常量。**然后，您应该根据需要**将该常量类放入**app.js**中。

```
Ext.define("App.Constants", {
         singleton  : true,   

         BASE_URL : "http://localhost:8080/",
         LABLE_HEADER : "geekrai.blogspot",
         TIMEOUT : 6000 
 }); 
```

这将确保加载类，现在您可以访问任何属性/全局值。我在我的博客上也详细提到过：[链接](http://geekrai.blogspot.in/2013/10/handling-global-variables-in-ext-js.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T17:31:46.917

声明你自己的对象命名空间并将它们添加到那里：

```
Ext.ns('My.Application.Globals');

My.Application.Globals.SomeValue = 5;
My.Application.Globals.SomeText = 'Hello World!'; 
```

然而，除非绝对需要，否则通常不赞成使用全局变量，所以如果可以的话，尽量使用它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T18:08:32.010

我知道你已经接受了一个很好的答案。我只是想添加一种 MVC 方式来包含应用程序可用的命名空间变量。这些“全局变量”有一个警告——你不能在你的类定义中使用它们。这意味着您不能在`Ext.define({})`方法中引用您的应用程序。它们必须在`initComponent`方法中或以后使用。

所以这就是我所做的：

```
Ext.application({
    name:'MyApp',
    appFolder:'js/app',
    controllers:[ 'Main' ],
    autoCreateViewport : true,
    launch:function () {
        console.log("App Launched!");
        MyApp.app = this;   //added this to get reference to app instance. IMPORTANT!    
    }, 
    //variables used throughout the app
    globals:{
        myURL:'http://example.com',
        magicNum:5
    }
}); 
```

要使用这些应用程序范围的变量，您需要引用您的应用程序命名空间，因此不会污染全局空间。像这样：

```
MyApp.app.gloabals.magicNum 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T17:31:11.127

除了可能内置的任何功能之外`Ext`，您始终可以使用立即函数来创建闭包：

```
(function(){
    var globalVariable = 'foo';    

    Ext.application({

        launch: function() { alert(globalVariable); }

    });

})(); 
```

# java - Maven 将 jar 与依赖项部署到 repo

> ID：13865255
> 
> 赞同：19
> 
> 时间：2012-12-13T17:29:55.753
> 
> 标签：java, maven, deployment

我可以通过在我的和运行`jar`中使用以下内容来部署：`pom.xml``mvn deploy`

```
 <distributionManagement>
    <repository>
        <id>releases</id>
        <url>http://${host}:8081/nexus/content/repositories/releases</url>
    </repository>
    <snapshotRepository>
        <id>snapshots</id>
        <name>Internal Snapshots</name>
        <url>http://${host}:8081/nexus/content/repositories/snapshots</url>
    </snapshotRepository>
</distributionManagement> 
```

我可以`jar-with-dependencies`使用以下内容构建可执行文件：

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <id>create-executable-jar</id>
                    <phase>deploy</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <descriptorRefs>
                            <descriptorRef>jar-with-dependencies</descriptorRef>
                        </descriptorRefs>
                        <archive>
                            <manifest>
                                <mainClass>my.company.app.Main</mainClass>
                            </manifest>
                        </archive>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

问题是我不知道如何将这些拼接在一起以将可执行文件部署`jar`到我的 Maven 存储库。我真的不知道这是通过新插件还是通过向现有程序集插件添加目标或其他步骤来完成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-07-27T11:23:31.350

如果您将程序集绑定到打包阶段，它将在您进行构建时安装在您的存储库中“常规”jar 和带有依赖项的 jar：

```
 <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <mainClass>my.company.app.Main</mainClass>
                </manifest>
            </archive>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
        </configuration>
        <executions>
            <execution>
                <id>make-assembly</id> <!-- this is used for inheritance merges -->
                <phase>package</phase> <!--  bind to the packaging phase -->
                <goals>
                    <goal>single</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

然后只需运行`mvn clean install deploy`将两个 jar 上传到您的存储库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T18:42:03.303

为了构建（所谓的）Über JAR 并使用 maven 部署它，您还可以使用[shade plugin](http://maven.apache.org/plugins/maven-shade-plugin/index.html)。以下代码取自他们的网站，但我已经使用此功能制作了一两个项目。

```
 <project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <shadedArtifactAttached>true</shadedArtifactAttached>
              <shadedClassifierName>jackofall</shadedClassifierName> <!-- Any name that makes sense -->
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

在此配置中，除了普通 JAR 之外，您还可以将 Über JAR 作为一个部署。然后，JAR 的用户可以根据分类器决定提取一体化包或具有依赖关系的 JAR。

我通常会使用 shade 插件来构建 Über JAR（或以某种方式修改 JAR）并使用程序集插件来构建安装包之类的东西（包含 JAR 和可能的其他东西）。但是，我不确定单个插件的预期目标是什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T18:26:45.540

以下工作。我打算让这个问题有点开放，因为我不肯定这是最佳实践，但工作是一些事情。

我注意到的问题是我编造了 ID 名称，我不知道这是否是通常的做法，我必须对 jar 名称进行硬编码；它不是从其他任何东西推断出来的。

```
<plugin>
<artifactId>maven-deploy-plugin</artifactId>
<version>2.7</version>
<executions>
    <execution>
        <id>deploy-executable</id>
        <goals>
            <goal>deploy-file</goal>
        </goals>
        <configuration>
            <file>target/Monitoring-Client-1.0-SNAPSHOT-jar-with-dependencies.jar</file>
        </configuration>
    </execution>
</executions>
</plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T19:15:28.940

`pom.xml`从本质上讲，我这样做的困难揭示了我已经偏离轨道的事实。一切都会自行到位。我以前在做：

*   将所有依赖项保存到 lib 文件夹中
*   构建一个带有类路径的 jar 来消除该 lib 文件夹
*   使用组装插件制作另一个可部署的 jar

我认为在此过程中这种方式是有道理的有几个原因，尤其是当我的库没有很好地从我的应用程序中考虑时。

但是，通过删除 1 和 2，只需要该`distributionManagement`部分，部署阶段就会自动运行。所以总而言之，这是一个通过删除大量代码来真正添加功能的惊人案例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T08:09:53.830

首先，您不应该在部署阶段创建 ueber jar，最好在打包阶段执行此操作。此外，创建的 jar 文件通常会自动附加到您的工件，并将传输到远程存储库（在您的情况下为 Nexus）。如果您只是尝试执行 mvn install 并查看输出（如果创建的 jar 已安装到本地存储库中），则可以检查这一点。要将结果部署到 nexus 中，您需要调用 mvn deploy。

# jquery - Jquery Mobile 可折叠内容丢失可折叠区域

> ID：13865262
> 
> 赞同：0
> 
> 时间：2012-12-13T17:30:22.047
> 
> 标签：jquery, jquery-mobile, collapsable

我基本上是在构建页面更改完成时调用的动态可折叠内容。

可折叠内容的创建是在页面更改时生成的，并使用许多 div 动态填充。第一个可折叠部分设置为打开（未折叠）

当我转到上一页并返回动态可折叠内容页面时，我丢失了可折叠部分格式（css）

-- 我确实使用 $page =$(pageSelector);

尝试使用 - ~~$page.page(); $.mobile.changePage($page);~~ 正在打破页面返回按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:17:08.503

如果您在附加使用时附加整个可折叠 div，`$("#id").append("content").trigger('create');`或者您可以保持可折叠 div 静态并附加内容，例如

```
<div data-role="collapsible" data-content-theme="c">
   <h3>Header</h3>
   <div id="content"></div>
</div>
<script>
    $("#content").append('data');
</script> 
```

**编辑：**

好的，我以为您正在尝试将内容附加到可折叠中，但您正在附加整个可折叠本身，那么您应该阅读[此](http://jquerymobile.com/test/docs/api/events.html)文档。正如解释的那样，你必须像这样更新布局本身

```
.trigger('updaelayout'); 
```

附加可折叠后。

**编辑2：**

```
<div data-role=collapsible>
   <h3>Header</h3>
    <div id="data-set" class="ui-collapsible-content ui-body-c ui-corner-bottom">
    </div>
</div>
$("#data-set").append('data'); 
```

尝试这个。

# c# - 比较 linq to sql 语句中的 2 个字符串

> ID：13865273
> 
> 赞同：-1
> 
> 时间：2012-12-13T17:31:19.010
> 
> 标签：c#

```
 var j = from c in User.USERs
                    where (c.USER_NAME.Equals(tempUserName))
                    select c; 
```

这一直给我一个空序列

两者都只是将用户输入与数据库进行比较的字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:33:04.093

做这样的事情：

```
var j = User.USERs.First(c => c.USER_NAME == tempUserName) 
```

或者

```
var j = User.USERs.Single(c => c.USER_NAME == tempUserName) 
```

或者只是从您自己的查询给您的结果中取 j[0] 。

PS - 如果没有与查询匹配的项目，First 或 Single 都会抛出异常，如果您想在没有找到任何内容的情况下返回 null，请分别使用 FirstOrDefault 和 SingleOrDefault。

* * *

要拓宽范围，请尝试以下操作：

```
string userToSearchFor = tempUserName.Trim().ToLower();
var j = User.USERs.FirstOrDefault(c => c.USER_NAME.ToLower() == userToSearchFor);

if (j != null)
{ 
  //found something 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:37:32.737

如果它返回一个空序列，那么您的 where 子句评估为 false，如果您需要先解决该问题，请检查它生成的 SQL。

要回答您的问题，以获得您通常使用的单个元素

[.Single( )](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx) [.SingleOrDefault()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx) [.First()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx) [.FirstOrDefault()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:01:41.557

我会这样做：

```
var result = User.USERs.SingleOrDefault(x => x.USER_NAME.Equals(tempUserName));
if (result != null)
{
    //do your thing
} 
```

# oracle - 不能从 PL/SQL 调用存储过程

> ID：13865274
> 
> 赞同：1
> 
> 时间：2012-12-13T17:31:19.523
> 
> 标签：oracle, stored-procedures, plsql

我有这个用 PL/SQL 编写和执行的简单存储过程。

```
CREATE OR REPLACE PROCEDURE test_sp
IS
     BEGIN
       dbms_output.put_line('Test');
     END; 
```

我试图在 PL/SQL 中这样调用它：

```
CALL test_sp; 
```

但我最终得到了这个错误：

```
ORA-06576: not a valid function or procedure name 
```

这是一个简单的调用，是否存在语法错误或者我缺少某种权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:54:29.097

如果您正在使用，`call`那么您将需要包括括号。[oracle 文档显示`call`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4008.htm#BABDEHHG) 使用这些：

```
call test_sp(); 
```

或者您可以使用`exec`：

```
exec test_sp; 
```

或者您可以将存储过程名称包装在一个匿名块中：

```
begin
   test_sp;
end; 
```

# php - Doctrine 与 mssql 连接

> ID：13865277
> 
> 赞同：2
> 
> 时间：2012-12-13T17:31:32.123
> 
> 标签：php, sql-server, pdo, doctrine, symfony-1.4

有没有办法在`php-mssql`没有 PDO 连接的情况下使用 DRIVER连接 sqlserver `symfony`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:53:17.207

我相信您需要为此创建自己的驱动程序。

定义了`abstract class Doctrine_Connection`连接方式。在这个类中，在“connect”方法中，您可以阅读：

```
if (extension_loaded('pdo')) {
    find valid driver and load into PDO (calling PDO::getAvailableDrivers())
    $found = true;
} 
```

如果未找到驱动程序（例如，如果您提交这样的 dsn `mssql_own:host=localhost;dbname=localdb`），则 Doctrine_Connection 会：

```
$class = 'Doctrine_Adapter_' . ucwords("mssql_own");

if (class_exists($class)) {
    $this->dbh = new $class($this->options['dsn'], $this->options['username'], $this->options['password'], $this->options);<br/><br/>
} else {
    throw new Doctrine_Connection_Exception("Couldn't locate driver named " . "mssql_own");
} 
```

您需要编写以我的示例“Doctrine_Adapter_Mssql_own”命名的此类并与 php-mssql 建立连接。

我希望它有帮助...

# spring - 无法使用 Spring OpenID 成功登录

> ID：13865281
> 
> 赞同：0
> 
> 时间：2012-12-13T17:31:47.483
> 
> 标签：spring, spring-mvc, spring-security, openid

我在 spring-security.xml 中有以下代码

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/security 
            http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http security="none" pattern="/openid.jsp" />
    <security:http security="none" pattern="/logout.jsp" />
    <security:http security="none" pattern="/success.jsp" />

    <security:http auto-config="true"
        authentication-manager-ref="authManager">
        <security:intercept-url pattern="/**" access="ROLE_USER"/>
        <security:openid-login login-page="/openid.jsp" 
            authentication-failure-url="/logout.jsp"
            default-target-url="/success.jsp" >
        </security:openid-login>
    </security:http>

    <security:authentication-manager id="authManager">
        <security:authentication-provider>
            <security:user-service>
                <security:user name="spring" password="spring"
                    authorities="ROLE_USER" />
            </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager> 

</beans> 
```

Tomcat 访问日志确实显示 Google 已经对 openid 进行了身份验证，但在允许从 Google open id 页面访问后，我仍然点击了 logout.jsp。

```
127.0.0.1 - - [13/Dec/2012:22:55:44 +0530] "GET /SpringWebSecurityOpenID/getEmp.do/10 HTTP/1.1" 302 35
127.0.0.1 - - [13/Dec/2012:22:55:44 +0530] "GET /SpringWebSecurityOpenID/openid.jsp HTTP/1.1" 200 258
127.0.0.1 - - [13/Dec/2012:22:55:49 +0530] "POST /SpringWebSecurityOpenID/j_spring_openid_security_check HTTP/1.1" 302 35
127.0.0.1 - - [13/Dec/2012:22:55:50 +0530] "GET /SpringWebSecurityOpenID/j_spring_openid_security_check?openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2012-12-13T17cwcwc4rf32dwfdwGJ5oVQ_g&openid.return_to=http%3A%2F%2Flocalhost%3A8080%2FSpringWebSecurityOpenID%2Fj_spring_openid_security_check&openid.assoc_handle=AMlYA9UzE_QF5BKDYtD-k3_TbEdofnp7-43i9om-guRWh1TG5LhzEN7lzPyJ0IXzTjtNDbZz&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle&openid.sig=4MN6wuiKCWkuNwfwfwfd32dddqwg%3D&openid.identity=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%cwcwc34r2dwefreWzH1fBOWj5v4U&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid432432EdewedrUfrp0nP3AWzH1fBOWj5v4U HTTP/1.1" 302 35
127.0.0.1 - - [13/Dec/2012:22:55:50 +0530] "GET /SpringWebSecurityOpenID/logout.jsp HTTP/1.1" 200 102 
```

请。帮助解决此问题。如果我删除 openid 登录页面属性并使用 Spring 生成的默认 open id 表单，那么我可以轻松获得身份验证并点击请求的 URL。

更新上面的 spring-security.xml 代码。日志中看到的异常是：

```
2012-12-16 11:26:32,430&#123;HH&#58;mm&#58;ss&#125; DEBUG &#91;http-bio-8080-exec-4&#93; &#40;ConsumerManager.java&#58;1788&#41;
- Local signature verification succeeded.
2012-12-16 11:26:32,430&#123;HH&#58;mm&#58;ss&#125;  INFO &#91;http-bio-8080-exec-4&#93; &#40;ConsumerManager.java&#58;1848&#41;
- Verification succeeded for: https://www.google.com/accounts/o8/id?id=AItOawl2FdNxxWJLrUfrp0nP3AWzH1fBOWj5v4U
2012-12-16 11:26:32,433&#123;HH&#58;mm&#58;ss&#125; DEBUG &#91;http-bio-8080-exec-4&#93; &#40;ProviderManager.java&#58;152&#41; -
 Authentication attempt using org.springframework.security.openid.OpenIDAuthenticationProvider
2012-12-16 11:26:32,434&#123;HH&#58;mm&#58;ss&#125; DEBUG &#91;http-bio-8080-exec-4&#93; &#40;AbstractAuthenticationProcessingFil
ter.java&#58;340&#41; - Authentication request failed: org.springframework.security.core.userdetails.UsernameNotFoundException: h
ttps://www.google.com/accounts/o8/id?id=AItOawl2FdNxxWJLrUfrp0nP3AWzH1fBOWj5v4U
2012-12-16 11:26:32,434&#123;HH&#58;mm&#58;ss&#125; DEBUG &#91;http-bio-8080-exec-4&#93; &#40;AbstractAuthenticationProcessingFil
ter.java&#58;341&#41; - Updated SecurityContextHolder to contain null Authentication
2012-12-16 11:26:32,435&#123;HH&#58;mm&#58;ss&#125; DEBUG &#91;http-bio-8080-exec-4&#93; &#40;AbstractAuthenticationProcessingFil
ter.java&#58;342&#41; - Delegating to authentication failure handlerorg.springframework.security.web.authentication.SimpleUrlAuth
enticationFailureHandler@e9927a 
```

我是否需要在 spring-security.xml 中添加我想要认证的用户。我试图允许任何具有有效 openid 的人登录。我没有任何要进行身份验证的用户列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:01:23.543

对于你的拦截器 url，试试这个而不是一个角色。

```
<security:intercept-url pattern="/**" access="isFullyAuthenticated()"/> 
```

# c# - .NET 远程服务似乎崩溃，并停止响应客户端

> ID：13865283
> 
> 赞同：10
> 
> 时间：2012-12-13T17:31:52.703
> 
> 标签：c#, .net, event-log, .net-remoting

我有一个 .NET Remoting 服务，大部分时间都可以正常工作。如果发生异常或错误，它会将错误记录到文件中，但仍会继续运行。

但是，大约每两周一次，服务会停止对客户端的响应，这会导致客户端应用程序崩溃并出现 SocketException 并显示以下消息：

```
A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 
```

没有异常或堆栈跟踪被写入我们的日志文件，所以我无法确定服务在哪里崩溃，这让我相信它在我的代码之外的某个地方失败了。我可以采取哪些额外的步骤来找出这次崩溃的根本原因？我想它会在某处向 EventLog 写入一些内容，但我对 Windows 的事件日志系统并不十分熟悉，所以我不确定在哪里看。

提前感谢您对此提供的任何帮助。

**编辑：**忘了提，停止或重新启动服务什么都不做，服务从不响应。我需要手动终止该进程，然后才能再次启动该服务。

**编辑2：**

```
public class ClientInfoServerSinkProvider :
       IServerChannelSinkProvider
   {
      private IServerChannelSinkProvider _nextProvider = null;

      public ClientInfoServerSinkProvider()
      {
      }

      public ClientInfoServerSinkProvider(
              IDictionary properties,
              ICollection providerData)
      {
      }

      public IServerChannelSinkProvider Next
      {
         get { return _nextProvider; }
         set { _nextProvider = value; }
      }

      public IServerChannelSink CreateSink(IChannelReceiver channel)
      {
         IServerChannelSink nextSink = null;

         if (_nextProvider != null)
         {
            nextSink = _nextProvider.CreateSink(channel);
         }
         return new ClientIPServerSink(nextSink);
      }

      public void GetChannelData(IChannelDataStore channelData)
      {
      }
   }

   public class ClientIPServerSink :
       BaseChannelObjectWithProperties,
       IServerChannelSink,
       IChannelSinkBase
   {

      private IServerChannelSink _nextSink;

      public ClientIPServerSink(IServerChannelSink next)
      {
         _nextSink = next;
      }

      public IServerChannelSink NextChannelSink
      {
         get { return _nextSink; }
         set { _nextSink = value; }
      }

      public void AsyncProcessResponse(
              IServerResponseChannelSinkStack sinkStack,
              Object state,
              IMessage message,
              ITransportHeaders headers,
              Stream stream)
      {
         IPAddress ip = headers[CommonTransportKeys.IPAddress] as IPAddress;
         CallContext.SetData("ClientIPAddress", ip);
         sinkStack.AsyncProcessResponse(message, headers, stream);
      }

      public Stream GetResponseStream(
              IServerResponseChannelSinkStack sinkStack,
              Object state,
              IMessage message,
              ITransportHeaders headers)
      {
         return null;
      }

      public ServerProcessing ProcessMessage(
              IServerChannelSinkStack sinkStack,
              IMessage requestMsg,
              ITransportHeaders requestHeaders,
              Stream requestStream,
              out IMessage responseMsg,
              out ITransportHeaders responseHeaders,
              out Stream responseStream)
      {
         if (_nextSink != null)
         {
            IPAddress ip =
                    requestHeaders[CommonTransportKeys.IPAddress] as IPAddress;

            CallContext.SetData("ClientIPAddress", ip);
            ServerProcessing spres = _nextSink.ProcessMessage(
                    sinkStack,
                    requestMsg,
                    requestHeaders,
                    requestStream,
                    out responseMsg,
                    out responseHeaders,
                    out responseStream);
            return spres;
         }
         else
         {
            responseMsg = null;
            responseHeaders = null;
            responseStream = null;
            return new ServerProcessing();
         }
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-29T22:47:22.253

这就像试图找出为什么当你打电话给朋友时没有人接电话一样。问题是他的房子被烧毁了。对正在发生的事情的不完美看法是核心问题，尤其是对服务不利，因为可看的东西太少了。

除非您使用该电话与服务程序员交谈并让他参与解决问题，否则这种情况不会变得更好。 *有人*将不得不对此进行调试。是的，这会很困难，每两周失败一次可能还不够关键。或者坐等它发生的时间太长。您可以做的唯一实际的事情是创建流程的小型转储并将其传递给服务程序员，以便他有一些东西可以戳。如果该服务在另一台机器上运行，那么也要让 LAN 管理员参与进来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-03T17:39:06.170

问题是由于我的代码中引起的死锁，如果内存服务我有两个锁定对象，我从另一个内部锁定了一个，基本上让它们互相等待。我能够通过将调试器连接到远程服务来确定这一点。

# matlab - Matlab以编程方式将本机库添加到路径

> ID：13865285
> 
> 赞同：3
> 
> 时间：2012-12-13T17:31:56.033
> 
> 标签：matlab, matlab-deployment

**背景**

我有一个 Matlab 代码库（或现在带有 r2012b 的*应用程序*），我分发给用户。

这个应用程序将 JNI 与本机库（几个*.dll*文件）一起使用。在我的本地机器上，这需要 librarypath.txt 或 javalibrarypath.txt (r2012b) 文件中的条目*，*如*Mathworks*和[Undocumented](http://www.mathworks.com/help/matlab/matlab_external/bringing-java-classes-and-methods-into-matlab-workspace.html?s_tid=doc_12b) Matlab[所述](http://undocumentedmatlab.com/blog/matlab-installation-take-2/)。

**问题**

有没有办法以编程方式将本机库添加到 Matlab java 类路径？

我想编写一个*initMyLibrary.m*脚本，其中：

*   用户不必手动修改这些文件。
*   该代码可用作已编译的 MCR 应用程序。
*   init 不会破坏用户现有的*javalibrarypath.txt*。
*   假设没有管理员权限（不能修改 Matlab 基础安装）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:42:21.510

这可能很混乱，我不是这方面的专家，但在你的*initMyLibrary.m*中不会有这样的事情：

```
currentdir = pwd; % or any other directory you know the dll will be in
if ispc
    system(['setx path "%path%;' currentdir '"']); % only works from windows 7 onwards though, for xp or vista youll have to change the registry with reg
elseif isunix
    system(['export PATH=$PATH:' currentdir]); % dont know if this works without admin rights though...
elseif ismac
    % for mac I dont know how to do this without admin rights
else
    error('whatever') % error handling
end 
```

因为我认为如果您的 dll 在系统路径上，这应该没问题，不是吗？不要忘记在应用程序结束时恢复路径。

无论如何，这一切可能有点危险......

# c++ - C++ 类对象函数

> ID：13865288
> 
> 赞同：0
> 
> 时间：2012-12-13T17:32:00.843
> 
> 标签：c++, class, function, object, reference

我试图了解这种类型的功能是如何工作的以及你将如何使用它。

我假设有一些课程我们称之为测试。

```
class Test {

} 
```

我在头文件中看到了这种类型的函数，我试图弄清楚它的作用。以及如何正确使用它。

```
Test& testFunction(); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:35:38.080

函数名前面是函数将返回的类型。在这种情况下，`testFunction`返回一个`Test`对象。在`&`这种情况下 (reference) 意味着它将返回一个`Test`-reference。如果您希望在调用函数时修改返回的对象，这一点很重要。或者以“按值返回”不可能的方式使用它。

您的代码并没有告诉我们太多关于您将如何处理返回值，但这里有一个非常常用的很好的例子：

```
Test & T::f() {
    // do something

    return *this;
} 
```

`*this`这是调用其方法的实际对象`.f`。这里的特别之处在于，由于我们返回一个引用，我们可以在保持原始对象的同时*链接调用。*每次都会`*this`一样。`*this`使用按值返回，我们无法做到这一点。例如：

### 引用：

```
Test & T::f() {

    this->x++;

    return *this;

}

int main() {

    Test t;

    t.x = 5;

    t.f().f();

    std::cout << t.x; // 7 as we expect

} 
```

### 按价值：

```
Test T::f() { ... } // notice the omission of &

int main() {

    Test t;

    t.x = 5;

    t.f().f();

    std::cout << t.x; // 6

} 
```

`t`仅更改一次，因为该对象在下一次调用时丢失。

# c# - 查询字符串和中继器

> ID：13865291
> 
> 赞同：0
> 
> 时间：2012-12-13T17:32:32.217
> 
> 标签：c#, query-string, repeater

我有一个大学项目来建立新闻网站。在我的主页中，我有一些链接，我试图通过这个 URL 传递查询字符串

`<a href="Content.aspx?Id=2&NewsId=6">`

MyContent.aspx 文件

```
<%@ Page Title="" Language="C#"  MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Content.aspx.cs" Inherits="Content" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <asp:Repeater ID="Repeater1" runat="server">
        <ItemTemplate>
            <%# Eval ("NewsDetails") %>
        </ItemTemplate>
    </asp:Repeater>
</asp:Content> 
```

文件隐藏代码

```
public partial class Content : System.Web.UI.Page
{    
    protected void Page_Load(object sender, EventArgs e)
    {
        int _Id = Convert.ToInt32(Request.QueryString["Id"]);
        int _NewsDetails = Convert.ToInt32(Request.QueryString["NewsDetails"]);
        int _NewsId = Convert.ToInt32(Request.QueryString["NewsId"]);

        //open your database connection
        SqlConnection conn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\MySite\\Pandheri\\App_Data\\Padheri.mdf;Integrated Security=True;User Instance=True");
        conn.Open();
        SqlCommand _cmd = new SqlCommand ("Select [NewsDetails],[Id] FROM Article",conn);
        DataSet ds = new DataSet();
        SqlDataAdapter adptr = new SqlDataAdapter(_cmd);
        adptr.Fill(ds);
        //close your database connection

        Repeater1.DataSource = ds;
        Repeater1.DataBind();

    } 
```

当我运行该页面时，我从 NewsDetails 表中获取所有数据。

我的数据库。

{新闻表

Id,NewsCategory

文章表

Id,NewsTitle,NewsDetails,NewsId}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:10:53.727

好的，我假设`Id`和分别`NewsId`代表表格中的`Id`和。您通过查询字符串传递这些值，并希望从数据库中提取与这些 ID 相关的文章。`NewsId``Article`

您正在阅读查询字符串。但是您没有对正在阅读的值做任何事情。您需要将它们传递给 SQL 查询。您的 SqlCommand 变为：

```
SqlCommand _cmd = new SqlCommand ("Select [NewsDetails],[Id] FROM Article WHERE [Id]=@Id AND [NewsId]=@NewsId",conn); 
```

注意`WHERE`条款。我们正在 SQL 查询中设置参数。现在我们需要用从查询字符串中获得的值填充这些参数。

```
_cmd.Parameters.AddWithValue("@Id", _Id);
_cmd.Parameters.AddWithValue("@NewsId", _NewsId); 
```

现在，当 SqlCommand 运行时，您应该*只*获得由这两个 ID 定义的文章。

# objective-c - 未调用 applicationDidFinishLaunching

> ID：13865295
> 
> 赞同：-3
> 
> 时间：2012-12-13T17:32:39.410
> 
> 标签：objective-c, ios, xcode

这是我的代码：

```
- (BOOL)application:(UIApplication *)applicationdidFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.
NSLog(@"Beep");
return YES;
} 
```

我将控制台设置为显示“所有输出”，但在控制台中看不到“哔”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T17:54:02.703

方法签名错误。代替

```
- (BOOL)application:(UIApplication *)applicationdidFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

它应该是

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions; 
```

请参阅[UIApplication Delegate的文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:didFinishLaunchingWithOptions:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:50:06.147

您需要提供有关您的应用程序的更多详细信息，一件事可能是您以某种方式删除了您将在应用程序午餐时运行的课程。

这不太可能发生，但
转到左侧面板上的资源文件夹，找到您的`main.m`

你的主要应该是这样的

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[]) {

    @autoreleasepool {
        int retVal = UIApplicationMain(argc, argv, nil, @"AppController");
        return retVal;
    }
} 
```

看到这`"AppController"`是运行的类，它可能是`"AppDelegate"`你的情况。

所以基本上确保该`@""`字符串与您的 appdelegate 接口具有相同的名称 `@interface AppController : NSObject <UIApplicationDelegate>`

# android - Android：关于通过HTTP的安全性和用户认证（注册、登录）的一些问题

> ID：13865296
> 
> 赞同：3
> 
> 时间：2012-12-13T17:32:49.347
> 
> 标签：android, security, ssl, httprequest, android-authenticator

我只是无法弄清楚这一点。我目前正在 Android 上构建一个相当大规模的应用程序。不过，我遇到了一些关于安全性和身份验证的问题......

## 场景：

我有一个应用程序通过 HTTP（稍后将实现 SSL）调用运行 PHP 和 MySQL 的服务器。当然我想使用现有的用户数据库，所以迁移到另一个数据库不是一个解决方案。我设法创建了“通过 Android 将用户注册到服务器”功能。我也做了一个工作登录，但这是问题开始的地方。

当我正在处理的 Android 应用程序中的用户通过/向应用程序添加、编辑、删除和同步服务器上的内容时，事情变得相当复杂。对我来说似乎有点太复杂了:)

## 问题：

1.  当我从服务器端登录获得结果并通过 JSON 将其从服务器传递到 Android 时，连接断开，服务器端我没有登录（会话断开），而在电话上我是。如何使登录在服务器和 Android 上都保持不变，而无需再次登录？因此，从 Android 到服务器的后续调用是使用同一用户进行的，仍然经过身份验证。即我想要一种一次性登录（直到我注销），就像在 Spotify 应用程序（和许多其他应用程序）中一样。

2.  如果我理解正确的话，正确实施 SSL 可以将密码以明文形式发送到服务器，而无需先对其进行哈希处理。它是否正确？

我无法停止思考这样一个事实，即 MIM 攻击会破坏我从 Android 发送到服务器的任何唯一 ID。我的第一个想法是在成功登录后将 Android 设备上的 UID 作为服务器的“密钥”。但是，如果该密钥落入坏人之手，与该 UID 关联的用户将受到威胁。我已经查看了 Android 上的 AccountManager，但在我的情况下它似乎有点过头了。

如果有人可以提供示例或至少是指导方针，我将不胜感激！

提前感谢！

## 编辑后添加的解决方案图

![描述身份验证机制的图像](../Images/c9c8b95a4de9144a9167719e60503327.png)

请注意，此图显示了应用程序的第一次启动。以后的初创公司不会显示登录/注册表格，而是使用 DUT。

// 亚历山大

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:30:38.910

向 Android 应用程序发出某种形式的短期身份验证令牌。他们需要在每个请求中传递它，并且您将在您的 Web 应用程序中检查它。断开连接并不会结束会话，如果是这样，您的 Web 应用程序中有错误：修复它。在 Android 中，只要你使用同一个 HttpClient 实例，它就会继续使用同一个 session，不需要什么特别的。

无论您做什么，*都不要推迟实施 SSL，**现在*就去做。

# c - 如何组织一个需要创建Window并退出的C程序？

> ID：13865298
> 
> 赞同：0
> 
> 时间：2012-12-13T17:33:04.903
> 
> 标签：c, cron, ipc, xlib, code-organization

我正在创建定期调用的 ac 程序。但在满足某些条件时，它可能会调用使用 X11 创建窗口的函数。该窗口将监听事件，因此有一个等待事件的循环。所以我的 C 程序必须等到创建的窗口完成它的工作。如何让我的程序调用创建窗口并退出的函数[在另一个 c 文件中定义]？

更新：我正在考虑在我的 C cron 作业和处理创建窗口并执行用户指示的服务器之间创建一个套接字。一个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:30:36.857

`cron`通常无法访问终端或 X 显示器。如果你想要它，你必须弄清楚它工作所需的所有位（从设置开始`DISPLAY`，但可能需要深入研究`xauth`和其他事情，并决定当显示器不运行时需要做什么，或锁定，或运行不同的用户，或...）并将所有这些合并到一个脚本中，然后调用您的程序。

# android - 分片还是不分片？

> ID：13865300
> 
> 赞同：10
> 
> 时间：2012-12-13T17:33:06.790
> 
> 标签：android, android-activity, fragment

随着我开始越来越多地采用 Fragments，而且随着 Fragments 功能的增加（Fragments 中的 Fragments，MapFragments），我开始达到需要定义何时应该将新的 View/Action 作为 Fragment 的地步或作为一个活动？

一个活动被定义为：

> 活动是用户可以做的一个单一的、有重点的事情。

但是 Fragments 有点像文档中描述的那样采用了该定义：

> 例如，一个新闻应用程序可以使用一个片段在左侧显示文章列表，而另一个片段在右侧显示一篇文章——两个片段都出现在一个活动中

这是用户可以在一个 Activity 中使用两个 Fragment 做的两件事。

所以我想要一些输入/帮助来确定决定我应该将新动作/视图作为片段还是作为活动的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T18:20:50.287

答案取决于您和您的开发实践（或您公司的开发实践）。然而，我的观点是：至少，如果你认为正在开发的功能可以在多个活动中使用，或者如果它可以在一个活动中与另一个视图一起使用（如在平板电脑上），那么你应该做到这一点一个片段。

我们最近采用了在所有情况下都创建片段的理念。我们的活动现在只是顶级协调员，基本上是把事情联系在一起的粘合剂。这使得架构一致且灵活。这对我们很重要，因为我们在几个地方有许多工程师在处理代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T14:16:20.107

> 一个活动被定义为：“一个活动是用户可以做的一个单一的、专注的事情”

这更像是一个过时的文档问题，而不是其他任何事情。`Activity`具有相同的定义...当我们使用较小的屏幕尺寸（例如电话）时。当您移动到更大的屏幕时，一项活动比“一个单一的、专注的事物”更复杂的可能性会增加。

> 所以我想要一些输入/帮助来确定决定我应该将新动作/视图作为片段还是作为活动的最佳方法是什么？

这是我的一般启发式：

*   如果您预计某某 UI 可能独立存在于手机大小的屏幕上，但与平板电脑大小的屏幕上的其他内容一起使用，请将其设为片段。

*   如果您预计某某 UI 将始终独立存在，只需创建一个简单的活动。

*   如果您预计自己的预测能力不是那么好，那就错在制造更多碎片方面。例如，您可能会说，“嗯，帮助永远不需要与其他任何东西并列”，并使其成为一项活动。然后，如果您意识到*UI 的其他部分*可能会受益于与它们并排的帮助而不是单独关闭 - 这样用户可以同时阅读文档并执行操作 - 您将后悔没有把帮助变成一个片段，因为你将不得不做一些返工。

*   如果某某 UI 永远不会独立存在——换句话说，如果它更像是一个单独的小部件而不是一个完整的活动——并且你预计在多个项目中使用它，那么让它*成为*一个单独的小部件，在习惯`View`或的形式`ViewGroup`。

但是，正如 jsmith 所指出的，没有普遍的正确或错误答案。顺便说一句，AFAIAC，jsmith 的答案在这里是正确的，但我对他的答案的评论太罗嗦了...... :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:32:32.480

我从 1.5 开始就在 Android 上进行开发，所以我一直在开发很长一段时间的活动和最近的片段。

经常有碎片让我嘴里有酸味……一个例子是当我需要一种带有按钮的分页仪表板时。为此，我使用 ViewPager + 每个按钮 1 个片段。我遇到了各种各样的问题，因为在 Android 4.2 之前无法嵌套片段。

另一个问题是片段的异步功能模式，当需要将片段从一个地方快速移动到另一个地方时，它会出现各种不当行为。

不要认为一切都很糟糕......在更简单的情况下，片段的使用效果很好。

所以，在我看来，只要你有一个独立的区域，在视图上不经常移动，可以在多个屏幕中重复使用，并且你支持平板电脑（或我的未来），使用它。

如果您需要嵌套片段、频繁重新排列的视图或不会重用的代码，请不要这样做。

# javascript - 如何将包含 utf8 十六进制代码的字符串转换为 javascript 字符串

> ID：13865302
> 
> 赞同：7
> 
> 时间：2012-12-13T17:33:06.530
> 
> 标签：javascript

我有一个包含十六进制字符串的字符串（utf8 字符串的内容）

```
"666f6f6c 6973686e 6573732c 20697420 77617320 74686520 65706f63 68206f66 2062656c 6965662c 20697420 77617320 74686520 65706f63 68206f66 20696e63 72656475 6c697479 2c206974 20776173 20746865 20736561 736f6e20 6f66204c 69676874 2c206974 20776173 20746865 2073656" 
```

我需要将其转换回 javascript 字符串。怎么做 ？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T17:59:55.953

```
var s = "666f6f6c 6973686e 6573732c 20697420 77617320 74686520 65706f63 68206f66 2062656c 6965662c 20697420 77617320 74686520 65706f63 68206f66 20696e63 72656475 6c697479 2c206974 20776173 20746865 20736561 736f6e20 6f66204c 69676874 2c206974 20776173 20746865 2073656";
var r = decodeURIComponent(s.replace(/\s+/g, '').replace(/[0-9a-f]{2}/g, '%$&')); 
```

该解决方案实际上处理 UTF-8。

这个想法是`%`在每对十六进制数字前面放一个（从而创建一个 URL 编码字符串），然后让[`decodeURIComponent`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent)处理细节（特别是，它将正确解码多字节 UTF-8 字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-14T15:04:06.983

要正确处理 UTF8，您可能需要尝试这种方法：

```
 function utf8ToHex(str) {
      return Array.from(str).map(c => 
        c.charCodeAt(0) < 128 ? c.charCodeAt(0).toString(16) : 
        encodeURIComponent(c).replace(/\%/g,'').toLowerCase()
      ).join('');
    },
    function hexToUtf8: function(hex) {
      return decodeURIComponent('%' + hex.match(/.{1,2}/g).join('%'));
    } 
```

演示：[https ://jsfiddle.net/lyquix/k2tjbrvq/](https://jsfiddle.net/lyquix/k2tjbrvq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-05T14:20:22.637

仅节点解决方案。有一个`Buffer`类可以在数据之间进行转换（例如 utf 字节和 utf8 字符串。

```
Buffer.from(0x66, 0x6f, 0x6f, 0x6c).toString(); // 'fool' 
```

因此，对于以空格分隔的字节字符串格式，您将：

```
let s = '666f6f6c 6973686e 6573732c';

// [102, 111, 111, 108, 105, 115, 104, 110, 101, 115, 115, 44]
let bytes = [...s.matchAll(/[^ ]{1,2}/g)].map(a => parseInt('0x' + a[0]));

Buffer.from(bytes).toString(); // 'foolishness,' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-15T14:17:40.300

用这个：

```
function HexToString(s) {
  var escaped = "";
  var hex = "";
  if(s.length%4 > 0) {
    for (i = 0; i < (4 - (s.length % 4)); i++) {
      hex += "0";
    }
  }
  hex += s;
  for (var i = 0; i < hex.length; i += 4) {
    escaped += "%u" + hex.charAt(i) + hex.charAt(i + 1) + hex.charAt(i + 2) + hex.charAt(i + 3);
  }
  return unescape(escaped).split(unescape("%00")).join("");
} 
```

它对我有用。

# php - simplexmlelement 上的 json_decode/encode 添加数组而不是空字符串

> ID：13865308
> 
> 赞同：4
> 
> 时间：2012-12-13T17:33:24.590
> 
> 标签：php, xml, simplexml, json

加载 xml 文档并使用转换为数组时

```
json_decode(json_encode(simplexml_load_string($xml)), 1); 
```

所有空的 xml 节点 ( `<node />`) 都转换为 array() 我希望它们改为空字符串。我是否需要遍历所有元素并用其他东西替换每个空节点？

我正在加载 xml 文档`$xml = new SimpleXmlElement($this->feed_uri, LIBXML_NOBLANKS | LIBXML_NOEMPTYTAG , true);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:15:31.150

您无法自动完成此操作。因此，您需要在转换后用空字符串替换空数组。

顺便说一句，`LIBXML_NOEMPTYTAG`这里没有意义：

> 此选项目前仅在 DOMDocument::save 和 DOMDocument::saveXML 函数中可用。 [http://ua1.php.net/manual/en/libxml.constants.php](http://ua1.php.net/manual/en/libxml.constants.php)

# python - 如何在python中将字符串作为原始字符串？

> ID：13865309
> 
> 赞同：-2
> 
> 时间：2012-12-13T17:33:25.207
> 
> 标签：python

我是 python 新手，我喜欢打印我的字符串而不考虑它的特殊字符（我的意思是原始字符串），例如：>>> print 'Hello/npython/tworld'` 当我打印它时，它应该给出如下所示的 o/p

```
'Hello\npython\tworld' 
```

我怎样才能使我的字符串作为原始字符串谢谢盒马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:39:57.640

使用`repr(mystring)`，但如果您打算使用双引号进行打印（如果以这种方式初始化），这将不起作用。它将始终使用单引号。

# vba - Microsoft Word 形式的可扩展表格

> ID：13865312
> 
> 赞同：1
> 
> 时间：2012-12-13T17:33:58.973
> 
> 标签：vba, ms-access, ms-word

我正在 Microsoft Word 中创建一个将分发给不同人的表单。表格上的一个部分是一个表格，用户在其中列出了他/她参加的所有测试以及有关这些测试的一些相关详细信息。我事先不知道用户进行了多少次测试，尽管我可以假设它至少为 1。我想创建一个表，用户可以为每个测试添加行。一些列将具有表单控件，一个具有下拉框，一个具有复选框，一个具有日期选择器。一旦用户完成它们，我希望能够将这些表单与 Access 链接起来。

是否可以创建一个用户可扩展表来维护每列中的表单控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:21:40.563

我现在在一台 Linux 机器上，所以我无法为你测试和调试代码，但我已经在 Word 中制作了表格，然后在运行时确定大小（事实上，我是从 Excel 中完成的，但这不是主题）。但是，我可以告诉你一般形式是：

表达式.Add(BeforeRow)

其中表达式返回一个行对象，例如

ActiveDocument.Tables(1).Rows.Add(5)

请参阅处理的 microsoft 文档

表： http: [//msdn.microsoft.com/en-us/library/office/aa212430%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa212430%28v=office.11%29.aspx)

和行： http: [//msdn.microsoft.com/en-us/library/office/aa223081%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa223081%28v=office.11%29.aspx)

此外，从 VB 编辑器中的 word 中，转到帮助并搜索“表对象成员”、“行对象成员”等。

如果明天还没有关闭，我会写一些东西。我承认，在我的经验中，Word VBA 比 Excel VBA 更容易动摇。

# python - 什么错误：没有重复的意思在这个从编译的 Python 正则表达式的回溯中

> ID：13865318
> 
> 赞同：3
> 
> 时间：2012-12-13T17:34:37.050
> 
> 标签：python, regex

我在尝试理解和改进我在 Python 中使用 REGEX 时遇到了一个有趣的问题

这是一个正则表达式

```
verbose_signature_pattern_2 = re.compile("""
^            # begin match at new line
\t*          # 0-or-more tab
[ ]*         # 0-or-more blankspaces
S            # capital S
[iI][gG][nN][aA][Tt][uU][rR][eE]
[sS]?        # 0-or-1 S
\s*          # 0-or-more whitespace
[^0-9]       # anything but [0-9]
$            # newline character
""", re.VERBOSE|re.MULTILINE) 
```

当我运行代码时出现错误

```
""", re.VERBOSE|re.MULTILINE)
  File "C:\Python27\lib\re.py", line 190, in compile
return _compile(pattern, flags)
File "C:\Python27\lib\re.py", line 242, in _compile
raise error, v # invalid expression
error: nothing to repeat 
```

如果我去掉制表符 (\t) 特殊字符上的 0 个或多个限定符，它不会引发错误

我正在尝试查找在其上具有单词 Signature 的某些变体作为该行中的第一个单词的行。我知道我可以使用稍微不同的方法来获得我需要的东西。但是，我想象文档的创建者可能会使用标签将单词大致居中，或者他们可能会使用空格。我不想使用 \s，因为我不想捕获可能在包含单词 Signature 的行之前的所有空行。具体来说，我试图避免捕获所有这些杂物

```
'\n\n\n\n            Signature    \n 
```

我只想在输出中看到这个

```
'            Signature    \n 
```

我确实意识到我可以轻松去除多余的换行符，但我正在尝试更准确地理解和做事。有趣的是，以下 REGEX 具有相同的开头，但似乎按预期工作。那就是当这个编译器编译时我没有收到错误，它似乎给了我想要的东西——尽管我仍然需要找到更多的边缘情况。

```
verbose_item_pattern_2 = re.compile(r"""
^            # begin match at newline
\t*          # 0-or-more tabs
[ ]*         # 0-or-more blanks
I            # a capital I
[tT][eE][mM] # one character from each of the three sets this allows for unknown case
\t*          # 0-or-more tabs
[ ]*         # 0-or-more blanks
\d{1,2}      # 1-or-2 digits
[.]?         # 0-or-1 literal .
\(?          # 0-or-1 literal open paren
[a-e]?       # 0-or-1 letter in the range a-e
\)?          # 0-or-1 closing paren
.*           # any number of unknown characters so we can have words and punctuation
[^0-9]       # anything but [0-9]
$            # 1 newline character
""", re.VERBOSE|re.MULTILINE) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T17:42:16.460

第一个字符串不是原始字符串。因此，当 Python 编译字符串时（在它进入正则表达式引擎之前），它会替换所有转义序列。所以`\t`实际上会变成字符串中的制表符（不是反斜杠-t）。但是您使用的是自由空间模式 ( `re.VERBOSE`)。因此，空格是微不足道的。您的正则表达式相当于：

```
^*[ ]*S[iI][gG][nN][aA][Tt][uU][rR][eE][sS]?\s*[^0-9]$ 
```

`\s`保持`\s`，即使在非原始字符串中，因为它不是 Python 字符串中公认的转义序列。

然后一开始`^*`就导致了问题，因为你不能重复锚点。

这就是为什么您应该**始终**使用原始字符串来编写正则表达式。然后`\t`只是保持反斜杠-t，正则表达式引擎可以将其解释为选项卡。

顺便说一句， in 中的空格`[ ]`不是问题，因为即使在详细/自由空间模式下，字符类中的空格也很重要。

# grep - 是否有包含 € 的 grep 正则表达式类

> ID：13865321
> 
> 赞同：0
> 
> 时间：2012-12-13T17:34:50.530
> 
> 标签：grep

是否有特定的正则表达式类，包括欧元符号？根据[grep 手册](http://www.gnu.org/software/grep/manual/html_node/Character-Classes-and-Bracket-Expressions.html)， [:print:] 类（AFAIK € 是可打印的）和 [:punct:] 类不包含欧元符号，因为它们仅包含语言环境（en_US.UTF-8）和 ASCII 标点字符（包括$)

```
$ echo "I can has 5€ ?"  | grep -o "[[:print:]*"
I can has 5 
```

是否有另一种解决方案（因为我猜这个问题将与美元以外的每个货币字符一起出现）可以让我捕捉每个可打印的字符？

**编辑** 在玩腻子设置后，我在打印文件时设法显示了€，但是 grep-ing 它的行为很奇怪。最初我什至无法打印“€”，但是在将腻子编码更改为 cp1252（而不是 Unicode）后，我可以看到这个标志。grepping 仍然不起作用

```
$ cat test.bah
I can has 5€ ?
$ cat test.bah | grep -o '[[:print:]]*'
I can has 5
 ?
$ locale
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE="en_US.UTF-8"
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:20:52.380

显然，在我的机器上：

```
Ubuntu 12.04.1 LTS (GNU/Linux 3.2.0-32-virtual i686) 
grep --version grep (GNU grep) 2.10 
bash --version GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu) 
```

解决方案是使用 -P 开关并匹配 `[[:print:]]`或不可打印的`[^[:print:]]`字符：

```
$ cat test.bah
I can has 5€  or 5£?
$ cat test.bah | grep -P -o '[[:print:]]*'
I can has 5
  or 5
? 
```

（顺便说一句，新行是多次匹配的结果，而不是印错货币符号）

```
$ cat test.bah | grep -P -o '[^[:print:]]*'
€
£
$ cat test.bah | grep -P -o '([[:print:]]|[^[:print:]])*'
I can has 5€  or 5£? 
```

几点注意事项：

1.  @melpomene 在他的回答中表明，他的控制台或 grep 版本可以更好地处理货币符号。我正在使用 ubuntu 12.04 的 aws 库存版本
2.  在我的问题中，我提到我需要更改腻子设置以防有人需要设置 - 在 Window->Translation-> 下将接收到的数据设置为 Win1252 (Western) 看起来很反直觉，将编码设置为 UTF-8使 € 和 £ 显示为 # 或 ▒ 取决于绘图字符选择的选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:39:03.360

```
$ echo "I can has 5€ ?" | grep -o '[[:print:]]*'
I can has 5€ ?
$ echo $LANG
en_US.utf8 
```

# windows-server-2008 - 计划任务以基于文件启动

> ID：13865323
> 
> 赞同：0
> 
> 时间：2012-12-13T17:34:55.850
> 
> 标签：windows-server-2008, scheduled-tasks

我的 Windows 2008 Server 中有一个文件夹。

我有一个每 15 分钟运行一次的 Windows 计划任务，它将从上述文件夹中读取文件并将其存储在数据库中。存储后，文件将移动到不同的文件夹。

有什么方法可以安排任务，以便它在文件夹中看到新文件时启动，而不是等待 15 分钟或即使文件夹中没有文件也运行？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:38:07.023

如果您愿意在 .NET 中编写程序，我认为您可以使用`FileSystemWatcher`该类来执行此操作。

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

我相信这也可以从**PowerShell**中使用，但从未这样做过！

# c# - 如何在 ASP.NET 4.0 中保存页面后面的代码属性（不使用静态）？

> ID：13865325
> 
> 赞同：0
> 
> 时间：2012-12-13T17:34:55.557
> 
> 标签：c#, asp.net, postback

现在我要在 asp.net 中构建一个 Web 应用程序。ASP.net 的风格给我带来了一些奇怪的感觉。最困难的问题是我无法在每个 PostBack 事件之后保存变量的值（当我们单击按钮时）。我在[动态用户控件在回发后获取和维护值](https://stackoverflow.com/questions/5428433/dynamic-user-controls-get-and-maintain-values-after-postbacks)的问题中看到了一个解决方案， 但它只熟悉与控件绑定的值。

现在我想到了2个解决方案：

1.  和上面的参考问题一样，我会在页面 PostBack 时解绑数据。我将在 Session 中保存一个变量，在 UnBind 方法中，我将重新加载到会话中的变量。
2.  Use the ajax Button (not reload all pages)：我很想用这个方法，但是听起来很容易出错。感觉在asp.net中使用Ajax控件非常难。

我的代码：

```
public class MainPage
{ 
    //variable 
    private List<string> lstName; 

    public MainPage()
    { 
        if (!IsPostBack)
        { 
           lstName = new List<string>(); 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:12:02.153

现在我找到了一种在 ASP.NET 4.0 中保存页面后面代码属性的方法。

那就是使用 ViewState["variableName"] 变量。当我需要保存一个属性（例如 var ttsHandler）时，我保存它： ViewState["ttsHandler"]=ttsHandler;

当我需要加载它的值时，我必须输入强制转换：

ttsHandler=(TTSHandler) ViewState["ttsHandler"];

但是这个解决方案仍然只适用于众所周知的类类型（字符串、整数...），因为它必须是可序列化的。不幸的是，一些属性我不能分配它的类可序列化。

例如：我必须分配一个 MyThread 类（System.Thread.Threading 的子类），而调试器需要将项目分配给 Serializa System.Thread.Threading 类，这是不可能的。

现在我必须使用另一种不太好的方法，即使用 Session["var"] 而不是 ViewState。我会尽力处理这件事，我很高兴有你的帮助。

# datagridview - .Net DataGridView 垂直滚动条错误与多行行

> ID：13865329
> 
> 赞同：3
> 
> 时间：2012-12-13T17:35:35.090
> 
> 标签：datagridview, scrollbar

我有一个未绑定的 DataGridView。我将 ScrollBars 属性设置为 Both。这些列是文本框，WrapMode 设置为 true，以允许每行多行。如果我有几行超出 dgv 的高度，则会出现垂直滚动条并正常运行。

在极少数情况下，我会有一个有这么多行的单行，它会长得比 dgv 本身还高。发生这种情况时，滚动条根本不会出现。

[http://i.stack.imgur.com/HNElt.jpg](http://i.stack.imgur.com/HNElt.jpg)

第 3 列应该是：

A,A
B,B
C,C
D,D
E,E
F,F

有没有人见过这个？有什么建议么？

# image - Facebook“喜欢”按钮的图像

> ID：13865331
> 
> 赞同：0
> 
> 时间：2012-12-13T17:35:43.883
> 
> 标签：image, facebook, facebook-like

试图让我的“喜欢”按钮链接到 Wordpress 附加的图像 URL。

是否可以仅“喜欢”图像文件？

这就是我所拥有的

```
<?php $large_image_url = wp_get_attachment_url( get_post_thumbnail_id(), 'large'); ?>

<div class="likeButton" style="float: left;"><iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo urlencode($large_image_url); ?>&amp;layout=button_count&amp;show_faces=false&amp;width=100&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:100px; height:25px"></iframe></div> 
```

Firebug 显示它正在链接，但按喜欢没有结果到我的 FB 页面。哎呀！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:40:57.933

在这里查看我的答案：[Like Button 会计算 PDF 的点数，但实际上并未发布活动？](http://facebook.stackoverflow.com/questions/13615310/like-button-counts-the-likes-of-a-pdf-but-does-not-actually-post-the-activity/13616954#13616954)

您不能直接点赞文件，因为该文件不会提供 Facebook 用来显示“点赞”故事的元数据 - 您需要点赞 HTML URL，然后在该 URL 中包含图片（或重定向 Facebook 爬虫以外的用户）到图像）

# javascript - Disqus应用程序设置不保存，怎么办？

> ID：13865334
> 
> 赞同：0
> 
> 时间：2012-12-13T17:35:56.987
> 
> 标签：javascript, jsonp, disqus

无论我在做什么（新帐户、新网站、新应用），它都不会保存任何设置。这意味着我无法将域添加到白名单，也无法获得公钥。

他们自己网站的 Javascript 非常混乱，到处崩溃。我想他们不会很快解决这一切。我试图通过他们的联系页面多次联系他们，但正如预期的那样：没有回应。

我想知道这只会发生在我身上。谁能证实这一点？

不，我完全面临接收数据的问题。我通过代理尝试了 JSONP、JSON-REST 和其他一些东西。在没有 api 密钥（不是公共密钥）的情况下使用 JSONP 时，我收到 HTTP 400 错误。

有没有其他方法可以通过他们的 API 接收数据？我不能使用服务器端解决方案。

好吧，欢迎任何提示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:32:45.517

这听起来像是一个错误，您绝对应该使用您的短名称和您使用的浏览器与我们联系：http: [//disqus.com/support/](http://disqus.com/support/)

# php - Magento 在添加到购物车事件时以编程方式更新产品属性

> ID：13865337
> 
> 赞同：0
> 
> 时间：2012-12-13T17:36:01.407
> 
> 标签：php, magento

我有一个从另一个脚本获取值的产品，并且我有一个产品属性名称 custom_value，我想以编程方式从另一个脚本设置值。我尝试了不同的方法，但无法完成。我试过这个，它没有工作

```
$quoteItem = $observer->getItem();
if ($additionalOptions = $quoteItem->getOptionByCode('stamp_design')) {
$orderItem = $observer->getOrderItem();
$options = $orderItem->getProductOptions();
$options['stamp_design'] = unserialize($additionalOptions->getValue());
$orderItem->setProductOptions($options);
} 
```

我也试过这个，它也没有奏效。

```
 $product = $observer->getEvent()->getProduct();

    // Write a new line to var/log/product-updates.log
    $name = $product->getName();
    $sku = $product->getSku();

    $orderItem = $observer->getEvent()->getItem();
    $options = $product->getProductOptions();

    var_dump($options);
    $options['custom_value'] = $_SESSION['generated_value'];
    $product->setProductOptions($options);

    $options = $product->getOptions(); 
```

他们给出了致命错误：调用非对象上的成员函数 xxxx。

大家可以给我一些解决方案，Magento 版本是 1.7 谢谢。

# c# - 存储过程获取正确的行但 SqlDataAdapter 未填充相同数量的行

> ID：13865338
> 
> 赞同：0
> 
> 时间：2012-12-13T17:36:03.587
> 
> 标签：c#, sql, sql-server, ado.net, sqldataadapter

我有一个 VS2010 .Net 4.0 Web 服务，它应该返回记录的 DataTable。直到今天，它似乎一直运行良好。如果我通过 SQL Server Management Studio 将 5 个参数（3 个整数和 2 个日期时间）传递给它，我会得到我期望的所有行。但是，当我通过服务运行并检查 ds.Fill(MyTable) 行上的变量时，某些行不会显示。

我刚刚注意到一些奇怪的事情，当我搜索 TagNumber 1-270 的项目时，我得到了 SSMS 和 .Fill 中的所有行。每当我尝试返回 TagNumbers 介于 271 和 300 之间的项目时，所有这些行都会显示在 SSMS 中，但它们都不会在 .Fill 中返回。我检查过的所有 300 多件作品都符合预期。

这是我的存储过程。我能说的并不特别。

```
ALTER PROCEDURE [dbo].[FetchLicenseReceiptData] (
    @ForYear INT,
    @StartNumber INT,
    @EndNumber INT,
    @StartDate DATETIME,
    @EndDate DATETIME
)
AS
BEGIN
-- Also update udf GetLicenseReceiptData

SELECT
    DISTINCT
    -- License Fields
    l.BarCode,
    l.TagNumber,
    l.Issued,
    l.ForYear,
    l.Fee,
    l.WebOrderNumber,
    lts.Name AS TagStyle,
    CAST(CAST((l.ForYear + 1) AS VARCHAR) + '-01-31' AS DATETIME) AS RenewalDate,
    -- Dog Fields
    d.Name AS DogName,
    d.BirthDate,
    d.SpayNeuter,
    d.Deceased,
    lb.Name AS Breed,
    lhl.Name AS HairLength,
    lpc.Name AS PrimaryColor,
    lsc.Name AS SecondaryColor,
    lx.Name AS Sex,
    -- Owner Fields
    lt.Name AS Title,
    o.FirstName,
    o.Initial,
    o.LastName,
    -- Address Fields
    a.Address1,
    a.Address2,
    a.City,
    a.County,
    ls.Abbreviation AS State,
    a.ZipCode,
    -- Contact Fields
    jpi.PhoneNumber AS PrimaryPhoneNumber,
    jpi.PhoneType AS PrimaryPhoneType,
    jei.EmailAddress AS PrimaryEmail,
    jei.EmailType AS PrimaryEmailType
FROM
                    data.License      AS   l
    LEFT OUTER JOIN data.Dog          AS   d ON l.DogID = d.ID
    LEFT OUTER JOIN data.Owner        AS   o ON d.OwnerID = o.ID
    LEFT OUTER JOIN data.Address      AS   a ON o.AddressID = a.ID
    LEFT OUTER JOIN lookup.Title      AS  lt ON o.TitleID = lt.ID
    LEFT OUTER JOIN lookup.State      AS  ls ON a.StateID = ls.ID
    LEFT OUTER JOIN lookup.TagStyle   AS lts ON l.TagStyleID = lts.ID
    LEFT OUTER JOIN lookup.Breed      AS  lb ON d.BreedID = lb.ID
    LEFT OUTER JOIN lookup.HairLength AS lhl ON d.HairLengthID = lhl.ID
    LEFT OUTER JOIN lookup.Color      AS lpc ON d.PrimaryColorID = lpc.ID
    LEFT OUTER JOIN lookup.Color      AS lsc ON d.SecondaryColorID = lsc.ID
    LEFT OUTER JOIN lookup.Sex        AS  lx ON d.SexID = lx.ID
    LEFT OUTER JOIN (
        SELECT
            p.Number AS PhoneNumber,
            lpt.Name AS PhoneType,
            op.OwnerID AS OwnerID
        FROM
                            data.OwnerPhone  AS  op
            LEFT OUTER JOIN data.Phone       AS   p ON op.PhoneID = p.ID
            LEFT OUTER JOIN lookup.PhoneType AS lpt ON p.PhoneTypeID = lpt.ID
        WHERE
            p.IsPrimary = 1
    ) AS jpi ON o.ID = jpi.OwnerID
    LEFT OUTER JOIN (
        SELECT
            e.Address AS EmailAddress,
            let.Name AS EmailType,
            oe.OwnerID AS OwnerID
        FROM
                            data.OwnerEmail  AS  oe
            LEFT OUTER JOIN data.Email       AS   e ON oe.EmailID = e.ID
            LEFT OUTER JOIN lookup.EmailType AS let ON e.EmailTypeID = let.ID
        WHERE
            e.IsPrimary = 1
    ) AS jei ON o.ID = jei.OwnerID
WHERE
        l.ForYear = @ForYear
    AND l.TagNumber >= @StartNumber
    AND l.TagNumber <= @EndNumber
    AND l.Issued >= @StartDate
    AND l.Issued <= @EndDate
ORDER BY
    l.TagNumber 
```

结尾

在这里结束是我调用 SP 的方法：

```
 public DataTable FetchLicenseReceiptData(int ForYear, int StartNumber, int EndNumber, DateTime StartDate, DateTime EndDate) {
        DataTable Result = new DataTable();

        try {
            using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DogLicensingContext"].ConnectionString)) {
                SqlCommand cmd = new SqlCommand("FetchLicenseReceiptData", con);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.Add(new SqlParameter("@ForYear", ForYear));
                cmd.Parameters.Add(new SqlParameter("@StartNumber", StartNumber));
                cmd.Parameters.Add(new SqlParameter("@EndNumber", EndNumber));
                cmd.Parameters.Add(new SqlParameter("@StartDate", StartDate));
                cmd.Parameters.Add(new SqlParameter("@EndDate", EndDate));

                con.Open();

                SqlDataAdapter ds = new SqlDataAdapter(cmd);
                ds.Fill(Result);
                Result.TableName = "LicenseReceiptDataAutoPrint";
            } // using the connection
        } catch (Exception e) {

        } // try-catch

        return Result;
    } // FetchLicenseReceiptData - Method 
```

所以在 SSMS 中，当我运行以下命令时：

FetchLicenseReceiptData 2013, 270, 271, '2012-01-01', '2012-12-31'

我得到2条记录。通过 .Fill 运行时，我只得到一个（270）

当我在 SSMS 中运行以下命令时：

FetchLicenseReceiptData 2013, 271, 300, '2012-01-01', '2012-12-31'

我得到了所有 30 行。但是通过 .Fill 它不会返回任何内容。

最后，如果我运行以下命令：

FetchLicenseReceiptData 2013, 301, 310, '2012-01-01', '2012-12-31'

我在 SSMS 和 .Fill 中都得到了 10 个。

作为返回数据的示例，这里是 SSMS 中返回的 270 和 271 数据。我用波浪号 (~) 字符替换了选项卡

01CA2013T000270~270~2012-12-12 16:10:58.273~2013~20.00~NULL~标准~2014-01-31 00:00:00.000~Theo~2008-02-13 00:00:00.000~0~0 ~沙皮~短~杏~白~男~未知~cccccccc~~kkkkkkk~4444 RICHLAND AVE.~~xxxxxx~~OH~44444~5555555~家~NULL~NULL

01CA2013T000271~271~2012-12-13 08:44:58.670~2013~20.00~NULL~标准~2014-01-31 00:00:00.000~SAMSON~1999-12-12 00:00:00.000~1~0 ~拉布拉多犬~中~黑色~未知~男~女士~xxxxx~~xxxxxxxxxx~4444 GIEL AVE~~xxxxxx~~OH~44444~5555555~家~xxxxxx~个人

这个很奇怪。希望你们中的一位大师可以帮助我。

**解决方案：** 感谢@EJBrennan 的 SQL Profiler 建议。我以前从未使用过它，但它为我指明了正确的方向。这是实际上被发送到 SQL：

exec FetchLicenseReceiptData @ForYear=2013,@StartNumber=270,@EndNumber=271,@StartDate='2012-01-01 00:00:00',@EndDate='2012-12-13 00:00:00'

当我运行它时，它给了我 1 行而不是 2 行。基本上除了 00:00:00 之外的值是相同的。我最终将以下内容添加到我的存储过程的顶部以强制事情正确：

```
SET @StartDate = DATEADD(DAY, DATEDIFF(DAY, 0, @StartDate), 0) -- Beginning of given Date
SET @EndDate   = DATEADD(DAY, DATEDIFF(DAY, 0, @EndDate),   1) -- End of given Date 
```

这将获取传入的任何 @StartDate 并将其强制为当天的 0:0:0。然后它将@EndDate 设置为NEXT 日期，同时设置时间为0:0:0。

同样在 WHERE 子句中 SP 的底部，我将 <= @EndDate 更改为 < EndDate 从现在开始，@EndDate 是传入日期之后的一天。

再次感谢@EJBrennan

# jquery - Jquery UI Tabs Link而不是tabcontainer

> ID：13865341
> 
> 赞同：0
> 
> 时间：2012-12-13T17:36:16.807
> 
> 标签：jquery, hyperlink, tabs, jquery-ui-tabs

我在使用 jquery ui 选项卡的 php 项目中遇到问题

我将尝试尽可能简单地解释它：

我需要制作tablink

```
<ul><li><a href="test.php"></a></li></ul> 
```

在一个完整的新页面中调用 test.php。不仅像往常一样作为标签内容加载。

任何人都可以给我一个提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:05:21.300

在jQuery中，您可以为该选项卡设置一个ID，然后拥有

```
<script>    
  $(document).on('click', '#tabId', function(){ 
    window.location.href='www.google.com'; 
  }); 
</script> 
```

这就像您在单击选项卡时单击链接一样，假设您的选项卡的 id 是 tabId。

听起来您想要看起来像标签的链接。我可以看到的另一个解决方案实际上是使用 CSS 将链接样式化为看起来像选项卡。

# java - BST 树 - Java 中的字典

> ID：13865342
> 
> 赞同：0
> 
> 时间：2012-12-13T17:36:18.250
> 
> 标签：java, implementation, binary-search-tree

有谁会告诉我是否有使用二叉树在 Java 中创建字典的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:37:15.107

这正是`TreeMap`课堂所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:09:45.723

是的。您可以使用 TreeMap 类。

文档说它是用红黑树实现的。

> 红黑树是一种二叉搜索树，其中每个节点都有一个颜色属性，其值为红色或黑色。除了对二叉搜索树施加的普通要求外，以下附加要求适用于红黑树

如果您想了解更多信息，请查看来源。

# scala - Scala 最佳实践：映射二维数据

> ID：13865344
> 
> 赞同：2
> 
> 时间：2012-12-13T17:36:27.417
> 
> 标签：scala, functional-programming, scala-collections

在 Scala 中以适当的功能方式在 Java 中执行以下代码的最佳方法是什么？

```
LinkedList<Item> itemsInRange = new LinkedList<Item>();
for (int y = 0; y < height(); y++) {
    for (int x = 0; x < width(); x++) {
        Item it = myMap.getItemAt(cy + y, cx + x);
        if (it != null)
            itemsInRange.add(it);
    }
}

// iterate over itemsInRange later 
```

当然，它可以以命令式的方式直接翻译成 Scala：

```
val itemsInRange = new ListBuffer[Item]
for (y <- 0 until height) {
    for (x <- 0 until width) {
        val it = tileMap.getItemAt(cy + x, cx + x)
        if (!it.isEmpty)
            itemsInRange.append(it.get)
    }
} 
```

但我想以适当的、实用的方式来做。

我认为应该`map`在某种二维范围内进行操作。理想情况下，`map`将执行一个函数，该函数将获取`x`和`y`作为输入参数和输出`Option[Item]`。在那之后，我会得到类似的东西`Iterable[Option[Item]]`，然后`flatten`它会 yield `Iterable[Item]`。如果我是对的，那么唯一缺少的就是以某种方式在 2D 范围内进行地图操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T17:53:11.800

您可以通过一个不错的步骤完成这一切：

```
def items[A](w: Int, h: Int)(at: ((Int, Int)) => Option[A]): IndexedSeq[A] =
  for {
    x <- 0 until w
    y <- 0 until h
    i <- at(x, y)
  } yield i 
```

现在假设我们在一个四乘四的板上有这种符号表示：

```
val tileMap = Map(
  (0, 0) -> 'a,
  (1, 0) -> 'b,
  (3, 2) -> 'c
) 
```

我们只写：

```
scala> items(4, 4)(tileMap.get)
res0: IndexedSeq[Symbol] = Vector('a, 'b, 'c) 
```

我认为这是你想要的。

# mysql - 选择带有元数据的行

> ID：13865345
> 
> 赞同：0
> 
> 时间：2012-12-13T17:36:28.630
> 
> 标签：mysql, sql

我有 2 张桌子

表格1

```
===================================
= Id = Name             =  email  =
===================================
= 1  = David            = d@d.com =
=================================== 
```

表 2

```
==================================
= uid = key        =  Value      =
==================================
= 1   = Age        =  18         =
= 1   = Tele       =  0123456798 =
================================== 
```

这个想法是 UID 与 Id 相关以链接表。

我想做的是运行一个 SQL 查询来获得以下输出。

```
=========================================================================
= Id = Name             =  email  = age        =  Tele                  =
=========================================================================
= 1  = David            = d@d.com = 18         = 012345678              =
========================================================================= 
```

我需要运行什么查询。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:16:17.547

虽然您已经接受了答案，但我发布此答案是为了提供替代解决方案。您正在尝试`PIVOT`数据，而 MySQL 没有数据透视函数，因此您可以将聚合函数与`CASE`语句一起使用。

如果您有已知数量的值，则可以对查询进行硬编码：

```
select t1.id,
    t1.name,
    t1.email,
    MAX(CASE WHEN t2.key='age' THEN t2.value ELSE NULL END) AS age,
    MAX(CASE WHEN t2.key='tele' THEN t2.value ELSE NULL END) AS tele
FROM Table1 t1 
LEFT JOIN Table2 t2 
  ON t1.Id = t2.uid
GROUP BY t1.id, t1.name, t1.email 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/28044/1)

但是，如果您有未知数量的`key`值，那么您将需要使用准备好的语句来创建动态 sql 版本：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when t2.`key` = ''',
      `key`,
      ''' then t2.Value else null end) AS ',
      `key`
    )
  ) INTO @sql
FROM table2;

SET @sql = CONCAT('SELECT t1.id, t1.name, t1.email, ', @sql, ' 
                  FROM table1 t1
                  left join table2 t2
                    on t1.id = t2.uid
                  GROUP BY t1.id, t1.name, t1.email');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7b2ed/5)

结果：

```
| ID |  NAME |   EMAIL | AGE |      TELE |
------------------------------------------
|  1 | David | d@d.com |  18 | 123456798 | 
```

两者都会产生相同的结果，但准备好的语句版本会`key`在运行时生成值列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:40:20.143

```
select t1.id,
    t1.name,
    t1.email,
    MAX(CASE WHEN t2.key='age' THEN t2.value ELSE NULL END) AS age,
    MAX(CASE WHEN t2.key='tele' THEN t2.value ELSE NULL END) AS tele
FROM Table1 t1 INNER JOIN Table2 t2 ON t1.Id = t2.uid
GROUP BY t1.id, t1.name, t1.email 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T17:40:31.683

像这样的东西：

```
select 
  t.Id,
  t.Name, 
  t.Email,
  (select Value from Table2 t2 where t2.uid = t.Id and t2.Key = 'Age') as Age, 
  (select Value from Table2 t2 where t2.uid = t.Id and t2.Key = 'Tele') as Tele 

from Table1 t 
```

如果您事先知道密钥，则上述查询有效。它的名字是未知的，从数据库中获取可用的键名列表：

```
select distinct Key from Table2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T17:41:38.577

```
select
  Id,
  Name,
  email,
  age.Value as age,
  tele.Value as tele
from `Table 1`
left join `Table 2` as age on age.key='Age' and age.uid=Id
left join `Table 2` as tele on tele.key='Tele' and tele.uid=Id
; 
```

我只是多次加入表 2（好像它是几个表），每次只取与某个键匹配的值。然后对于我感兴趣的值，我只需为每个值选择适当的别名并相应地命名列。

# python - 为什么 python 正则表达式会在 Linux 上编译而不是 Windows？

> ID：13865346
> 
> 赞同：10
> 
> 时间：2012-12-13T17:36:33.610
> 
> 标签：python, regex

我有一个正则表达式来检测 unicode 字符串中的无效 xml 1.0 字符：

```
bad_xml_chars = re.compile(u'[^\x09\x0A\x0D\u0020-\uD7FF\uE000-\uFFFD\U00010000-\U0010FFFF]', re.U) 
```

在 Linux/python2.7 上，这可以完美运行。在 Windows 上会引发以下问题：

```
 File "C:\Python27\lib\re.py", line 190, in compile
    return _compile(pattern, flags)
  File "C:\Python27\lib\re.py", line 242, in _compile
    raise error, v # invalid expression
  sre_constants.error: bad character range 
```

任何想法为什么这不在 Windows 上编译？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T18:03:56.120

您在 Windows 上[构建了一个狭窄的 Python](http://wordaligned.org/articles/narrow-python)，因此 Unicode 使用[UTF-16](http://en.wikipedia.org/wiki/UTF-16)。这意味着高于 Unicode 字符`\uFFFF`将是 Python 字符串中的两个单独字符。您应该看到如下内容：

```
>>> len(u'\U00010000')
2
>>> u'\U00010000'[0]
u'\ud800'
>>> u'\U00010000'[1]
u'\udc00' 
```

以下是正则表达式引擎将如何尝试在窄构建中解释您的字符串：

```
[^\x09\x0A\x0D\u0020-\ud7ff\ue000-\ufffd\ud800\udc00-\udbff\udfff] 
```

您可以在此处看到`\udc00-\udbff`无效范围消息的来源。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T18:03:41.197

它不起作用，因为 Windows 版本的 Python 使用 16 位来表示 unicode 字符，编码为 UTF-16。代码点`10000`及以上代码点在 UTF-16 中表示为两个代码单元，这混淆了`re`范围表示，它期望`-`.

这是您传递给的字符串如何`re.compile`拆分为字符的方式：

```
>>> [x for x in u'[^\x09\x0A\x0D\u0020-\uD7FF\uE000-\uFFFD\U00010000-\U0010FFFF]']
[u'[', u'^', u'\t', u'\n', u'\r', u' ', u'-', u'\ud7ff', u'\ue000', u'-', 
 u'\ufffd', u'\ud800', u'\udc00', u'-', u'\udbff', u'\udfff', u']'] 
```

请注意，`\U00010000-\U0010FFFF`它表示为 5 个字符：

```
u'\ud800', u'\udc00', u'-', u'\udbff', u'\udfff' 
```

在字符集中`[...]`，将其`re.compile`解释为字符`u'\ud800'`and`u'\udfff'`和 range `u'\udc00' - u'\udbff'`。这个范围是无效的，因为它的结束小于它的开始，这会导致错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T18:09:54.803

标准库中有一个部分处理坏字符范围（`Lib/sre_compile.py:450`）：

```
if code1[0] != LITERAL or code2[0] != LITERAL:
    raise error, "bad character range"
lo = code1[1]
hi = code2[1]
if hi < lo:
    raise error, "bad character range" 
```

当它比较字符范围的`lo`和`hi`文字时`\U00010000-\U0010FFFF`，它们分别是序数`56320`和`56319`（当然失败了，因为范围似乎是向后的）。

正如其他人所说，这是因为 Python 将您的 8 字符 Unicode 文字视为两个单独的字符。

# android - 当我尝试打开 SQLite 数据库时出现 ErrorCopyingDataBase 异常

> ID：13865347
> 
> 赞同：0
> 
> 时间：2012-12-13T17:36:34.787
> 
> 标签：android, android-sqlite

当我尝试使用该方法打开资产文件夹中的数据库时

```
 public void loadDatabase(String dbName){
    System.out.println("dbName");
    DataBaseAdapterNew mDbHelper = new DataBaseAdapterNew(
                    this, dbName);
            mDbHelper.createDatabase();
            mDbHelper.open();

    } 
```

我得到一个致命的异常**ErrorCopyingDataBase**

错误堆栈

```
12-13 18:21:29.179: E/AndroidRuntime(10230): FATAL EXCEPTION: main
12-13 18:21:29.179: E/AndroidRuntime(10230): java.lang.Error: ErrorCopyingDataBase
12-13 18:21:29.179: E/AndroidRuntime(10230):    at com.my.app.db.DataBaseHelper.createDataBase(DataBaseHelper.java:43)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at com.my.app.db.DataBaseAdapterNew.createDatabase(DataBaseAdapterNew.java:42)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at com.my.app.MyActivity.loadDatabase(MyActivity.java:133)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at com.my.app.MyActivity$InvocazioneAsincrona$1.run(MyActivity.java:173)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at android.os.Handler.handleCallback(Handler.java:587)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at android.os.Looper.loop(Looper.java:130)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at java.lang.reflect.Method.invokeNative(Native Method)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at java.lang.reflect.Method.invoke(Method.java:507)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-13 18:21:29.179: E/AndroidRuntime(10230):    at dalvik.system.NativeStart.main(Native Method) 
```

我的 DatabaseAdapterNew 类是：

```
public class DataBaseAdapterNew {

    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public DataBaseAdapterNew(Context context, String nameDB) {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext, nameDB);
    }

    public DataBaseAdapterNew createDatabase() throws SQLException {
        try {
            mDbHelper.createDataBase();
        } catch (IOException mIOException) {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public DataBaseAdapterNew open() throws SQLException {
        try {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } catch (SQLException mSQLException) {
            Log.e(TAG, "open >>" + mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    public Cursor allData() {
        try {
            Cursor c = mDb.rawQuery(
                    "SELECT * FROM myTable order by Quantity desc", null);
            if (c != null) {
                c.moveToNext();
            }
            return c;
        } catch (SQLException mSQLException) {
            Log.e(TAG, "allData >>" + mSQLException.toString());
            throw mSQLException;
        }

    }

    } 
```

我的 DatabaseHelper 类是：

```
public class DataBaseHelper extends SQLiteOpenHelper {
    private static String TAG = "DataBaseHelper"; 
    private static String DB_PATH = "";
    private static String DB_NAME = "";
    private SQLiteDatabase mDataBase;
    private final Context mContext;

    public DataBaseHelper(Context context, String nomeDB) {
        super(context, nomeDB, null, 1);// 1? its Database Version
        DB_NAME = nomeDB;
        DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
        this.mContext = context;
    }

    public void createDataBase() throws IOException {
        // If database not exists copy it from the assets

        boolean mDataBaseExist = checkDataBase();
        if (!mDataBaseExist) {
            this.getReadableDatabase();
            this.close();
            try {
                // Copia il database dalla cartella assests
                copyDataBase();
                Log.e(TAG, "createDatabase database created");
            } catch (IOException mIOException) {
                throw new Error("ErrorCopyingDataBase");
            }
        }
    }

    private boolean checkDataBase() {
        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();
    }

    private void copyDataBase() throws IOException {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer)) > 0) {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    public boolean openDataBase() throws SQLException {
        String mPath = DB_PATH + DB_NAME;
        mDataBase = SQLiteDatabase.openDatabase(mPath, null,
                SQLiteDatabase.CREATE_IF_NECESSARY);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() {
        if (mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

传递的 String *dbName显示了 println 中**assets*文件夹中存在的 db 的正确名称，并且数据库不是 null 并且是预编译的，所以我不知道错误的原因是什么。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:19:11.033

我将您的代码复制到我的项目中，它可以正常工作。

在 loadDatabase() 中，

```
System.out.println("dbName"); 
```

将始终打印单词**dbName**。我不确定这是否是资产文件夹中数据库的名称；因为我看不到您对 loadDatabase(dbName) 的调用，所以我不知道您使用的是什么值。

这就是我直接从我的应用程序调用您的代码的方式：

```
 String dbName = "itr";
    System.out.println(dbName);
    DataBaseAdapterNew mDbHelper = new DataBaseAdapterNew(
                    this, dbName);
            mDbHelper.createDatabase();
            mDbHelper.open(); 
```

在 DatabaseHelper.createDataBase() 中，您隐藏了错误条件。如果您想查看导致问题的异常，我可以建议

```
public void createDataBase() throws IOException {
    // If database not exists copy it from the assets

    boolean mDataBaseExist = checkDataBase();
    if (!mDataBaseExist) {
        this.getReadableDatabase();
        this.close();
        try {
            // Copia il database dalla cartella assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } catch (IOException mIOException) {
            Log.e(TAG, mIOException.toString());
            throw mIOException;
        }
    }
} 
```

那打印了异常

> java.io.FileNotFoundException: itr UnableToCreateDatabase

我将现有数据库复制到 /assets/itr 中，并且我的数据库已正确创建。

# svn - 使用 svn 忽略多个特定文件

> ID：13865354
> 
> 赞同：4
> 
> 时间：2012-12-13T17:37:05.503
> 
> 标签：svn

我们的构建系统会生成许多分散在源代码树周围的文件。

这些文件在运行时显示`svn status`

在下面的示例中，所有文件都带有“？” 在该`thirdparty`目录中已由构建系统生成。

例如

```
svn status
M       common/db/unit_test/src/db_payload_builder_test_suite.cpp
?       common/db/unit_test/Makefile
M       common/lib/osal/variant/linux/public_inc/osal_specific_msgq.hpp
M       common/lib/enb/public_inc/enb_service.h
?       thirdparty/lib/curl/public_inc_arm
?       thirdparty/lib/curl/public_inc_x86
?       thirdparty/lib/curl/originals/config.log
?       thirdparty/lib/curl/originals/libcurl.pc
?       thirdparty/lib/curl/originals/config.status
?       thirdparty/lib/curl/originals/libtool
?       thirdparty/lib/curl/originals/curl-config
?       thirdparty/lib/curl/originals/src/curl 
```

我想告诉`svn`忽略这些文件。我不能简单地指定应该忽略的目录，因为其中许多目录包含签入到存储库的源。

上面的示例是生成的文件的子集，我们不能使用忽略模式，因为某些生成的文件匹配我们不希望忽略的文件（例如 xxx_.h" ）

我试过使用`svn propset svn:ignore 'somefile' dir`，但我只能设法告诉 svn 忽略每个目录的一个特定文件。

如何为 svn 指定多个要忽略的特定文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T15:38:04.113

一线解决方案：

```
svn propset svn:ignore "file1"$'\n'"file2"$'\n'"file3" . 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T18:38:02.990

您可以向它传递要忽略的文件列表，每行一个

```
vnix$ svn propset svn:ignore 'config.log
> libcurl.pc
> config.status
> libtool
> curl-config' thirdparty/lib/curl/originals 
```

...`vnix$`您的外壳程序的主要提示符在哪里，并且`>`是辅助提示符。

不要看起来害怕，这就是你在 shell 中编写多行字符串的方式。

或者，在标准输入上给它一个文件：

```
vnix$ svn propset svn:ignore -F - thirdparty/lib/curl/originals <<HERE
> config.log
> libcurl.pc
> config.status
> libtool
> curl-config
> HERE 
```

另请参阅[红皮书](http://svnbook.red-bean.com/en/1.1/ch07s02.html)，尽管该示例对于您的特定场景不是很明确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T18:52:55.433

如果您开始阅读文档，您会发现，

*   svn:ignore 可以应用于包含必须被忽略的文件的文件夹，而不仅仅是该文件夹的父级
*   svn:ignore 定义文件的模式，这些模式在未来`svn add`和`svn status`默认情况下会被忽略，但**仅适用于未版本化的文件**。已经在版本控制下的文件**不受 svn:ignore 影响**

您的分叉流必须是：

1.  在 SVN 中添加所有需要的文件
2.  对于作为构建器目标的文件夹，添加*.* 忽略模式
3.  通过构建测试运行测试模式和阻塞的完整性并检查`svn st`WC 根目录中的输出

# paypal - PayPal ExpressCheckout 忽略折扣

> ID：13865355
> 
> 赞同：1
> 
> 时间：2012-12-13T17:37:08.040
> 
> 标签：paypal, express-checkout

我使用带有折扣的 Paypal **ExpressCheckout发现了一个有线问题：**

我通过了 2 项，例如：

```
L_NAME0 : "test2",
L_AMT0: 2, // 2 EUR
L_QTY0: 1 
```

和

```
L_NAME1 : "Discount",
L_AMT1: -0.60, // 60 cent
L_QTY1: 1 
```

重定向到 Paypal 后，一切似乎都很好：

![paypal_bug_lol](../Images/e4b29604b6855ccb95458cb8fdcb0ea3.png)

但在关闭此交易后，贝宝会从我的贝宝账户中收取全额（2 欧元）：

![贝宝订单确认](../Images/22d65c63007654c8935722664cbdee51.png)

这个贝宝折扣有什么问题？这似乎是在欺骗客户，他一定感到被背叛了。我不相信它的贝宝错，所以任何关于我做错了什么的想法都值得赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:50:53.610

看起来您将折扣行项目应用于 SetExpressCheckout 调用，但 DoExpressCheckoutPayment 调用一定没有相同的东西..??

您需要确保 DECP 中包含所有相同的订单项详细信息。

# php - 在特定键下的另一个数组中添加一个数组

> ID：13865356
> 
> 赞同：0
> 
> 时间：2012-12-13T17:37:08.070
> 
> 标签：php, arrays, foreach, associative-array

我有一个查询并且有来自查询的结果，所以现在我对结果进行 foreach 循环，并根据结果中的值运行另一个查询并在单独的数组中获取更多数据。

```
 $results = some sql query;
   foreach($results as $res) {
       $sub_results = another sql query

       foreach($sub_results as $sub_res) {
            array_push($some_array, array(
                'key1'=>$sub_res['value1'],
                'key2'=>$sub_res['value2'],

             ));
        }

        array_push($final_array, array(
               'somekey'=>$res['value'],
               'somekey2'=>$res['value2'],
               'newkey'=>$some_array,
        ));

    } 
```

当我将 $some_array 添加为 final_array 的一部分时，我希望只看到与该特定数组对应的结果。所以它应该看起来像

```
 [0]=>array(
          'somekey'=>'1',
          'somekey2'=>'2',
          'newkey'=>array(
              have the $some array that corresponds to this specific one and so on
          )
      ) 
```

但是我在 $final_array 内的 newkey 数组下得到了相同的结果

# xml - 嵌套 CDATA - 正确

> ID：13865357
> 
> 赞同：7
> 
> 时间：2012-12-13T17:37:08.933
> 
> 标签：xml, cdata

这是 XML 文档中的问题：

```
<![CDATA[<b>Title</b> 
       Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
       tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
       quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
       consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
       cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
       proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
]]> 
```

我需要在此文本中插入您的 CDATA 表达式。怎么做 ？（如果我这样做，我会在评估文档时看到错误）

```
<![CDATA[]]]]>Expression<![CDATA[>]]> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-14T19:54:02.837

@Oded 在评论中发布了上面的参考真实答案...我想将其添加为答案，以便人们可以找到它。
如果他/她添加它，我们可以删除它。

是的，重要的是要确定你需要这样做；“CDATA”一开始就经常被误用，更不用说嵌套了。但在一些时髦的场合，我们会这样做。

## -

基本计划是将嵌套 CDATA 的末端埋在另一个 CDATA 中。它将与外部 CDATA 的解释一起被剥离以离开内部。

这是来自@Oded 上面
[en.wikipedia.org/wiki/CDATA#Nesting的维基百科文章](http://en.wikipedia.org/wiki/CDATA#Nesting)

动作是替换任何内部的、嵌套的

```
]]> 
```

和

```
]]]]><![CDATA[> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T20:56:14.450

我可以给你一个发生在我身上的场景。我有一个 SharePoint 内容编辑器 Web 部件，它被导出为 .dwp（其内容包含在 CDATA 中），需要将其插入到 Visual Studio 部署包中，Elements.xml 文件中的目标位置也是数据。这有点傻，因为它只是 XML 中的 HTML 中的 XML，但它是 SharePoint，所以傻是正常的存在状态。

因此，以防万一这导致其他人访问此页面，我想我会总结一下我提出的解决方案：

1) XML 对内部 CDATA 进行编码，因此您不需要内部 CDATA。可能并不总是实用的，但在我的情况下有效。

2) 在这种情况下，还有另一个选项，将内容编辑器 Web 部件的内容移动到单独的文件，并将内容编辑器链接到该 Web 部件文件。我想这属于重新考虑你的战略方法。

3）上述将整个CDATA分成三个独立的连续CDATA的想法。虽然这是一个聪明的想法并且适用于一般情况，但我不确定这是否适用于我的情况。这是因为内容将由 2 个不同的进程传递，部署程序和页面管理器。部署者需要获取外部 CDATA 的内容并将其整个传递给页面管理器，然后页面管理器会将 CDATA 的内容作为单个元素值。使用 3 CDATA 方法，部署者会将整个内容视为单个 XML 结构，因此 HTML 实际上会被错误地解释。（我希望这是有道理的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-28T05:32:55.713

嗨，此函数添加到 javascript 中的字符串对象，您可以将其用于任何字符串。此代码的末尾向您展示了如何使用它来解决您的问题（seiied mahmood mirkhalili(majb.ms@gmail.com)）

```
 /**
     * replace pattern with relative of nested pattern (a pattern in another patern)
     * @param  {string} input  [match of regreplace]
     * @param  {string} input1 [match firstgroup of regreplace ]
     * @param  {string} input2 [match second group of regreplace ]
     * @return {string}        [replace string with pattern ]
     */
    String.prototype.relativeInnerReplaceFunction = function (input , input1 , input2){
      var firstMatch = input1.match(this.regfirst);
      if(firstMatch != undefined){
        firstMatch = firstMatch.length
      } else {
        firstMatch = 0 ;
      }
      var lastMatch = input1.match(this.regEnd);
      if(lastMatch != undefined){
        lastMatch = lastMatch.length ;
      } else {
        lastMatch = 0 ;
      }
      if(input1 != undefined && input1 != 404){
        var relativeInnerReplaceFunction = this.relativeInnerReplaceFunction.bind(this);
        input1 = input1.replace(this.regReplace , relativeInnerReplaceFunction) ; 
      }
      var numLoop = firstMatch - lastMatch - 1;
      if(input2 != undefined){
        for (var i = 0; i < numLoop; i++) {
          input2 = input2.replace(this.regReplace , this.pattern);
        }
      } else {
        input2 = '' ;
      }
      return input1+input2 ;
    };
    /**
     * replace recuresive pattern for solve problem cdata in cdata mor info in this link   https://stackoverflow.com/questions/13865357/nested-cdata-correctly
     * @param  {regular experssion} regfirst   [the start pattern ]
     * @param  {regular experssion} regEnd     [the end pattern ]
     * @param  {regular experssion} regReplace [the pattern for nested replace]
     * @param  {string} pattern [the pattern will replace with regReplce regular pattern in nested replace]
     * @return {string}            [string after calculate nested pattern and replace with regreplace ]
     */
    String.prototype.relativeInnerReplace = function (regfirst , regEnd, regReplace , pattern){
      this.regfirst = regfirst ;
      this.regEnd = regEnd ;
      this.regReplace = regReplace ;
      this.pattern = pattern ;
      var relativeInnerReplaceFunction = this.relativeInnerReplaceFunction.bind(this);
      var output = this.replace(regReplace , relativeInnerReplaceFunction) ;
      return output ;
    }

/*how to use
  for example for nested cdata problem 'search in stackoverflow'
 wpsExample.relativeInnerReplace(/<!\[CDATA\[/g , /\]\]>/g , /^(.*)(\]\]>)/g , '$1]]]]><![CDATA[>')
 */ 
```

# c++ - 用模板实现“访问者模式”

> ID：13865360
> 
> 赞同：3
> 
> 时间：2012-12-13T17:37:30.043
> 
> 标签：c++, templates, design-patterns

我正在尝试以参数方式实现访问者模式的修改版本，以这种方式避免每个具体元素过载的“通用访问者”，但是，由于我在模板编程方面没有太多经验我不知道如何才能完成“模式”。

代码：

```
// test.cpp
#include <iostream>
#include <vector>

using namespace std;

struct Base
{
    virtual ~Base() {}
    virtual void visit() = 0;
};

template<typename Visitor>
struct ElementBase : public Base
{
    // No virtual.
    void visit()
    {
        _e.visit(this);
    }

private:
    Visitor _e;
};

// Atoms.
template<typename Visitor>
struct ElementA : public ElementBase<Visitor>
{
    ElementA() : a(5) {}

    int a;
};

// Visitors.
struct VisitorA
{
    void visit(ElementBase<VisitorA> *a)
    {
        ElementA<VisitorA>* elto = dynamic_cast<ElementA<VisitorA>*>(a);

        cout << elto->a << endl;
    }

    /*
    void visit(ElementA<VisitorA> *a)
    {
        cout << a->a << endl;
    }
    */
};

std::vector<Base*> v;

int main()
{
    v.push_back(new ElementA<VisitorA>());

    for (auto i : v)
        i->visit();
} 
```

这工作正常，其输出为 5（如预期的那样）。但我假装是直接使用 VisitorA 中“访问”的第二个（注释）版本。

显然，这不起作用，因为“this”的类型为 ElementBase<...>*。

如何将指针“this”向下转换为 ElementBase 中的实际派生类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:50:11.903

就像 user786653 说的那样，Curiously Recurring Template Pattern 可以解决这个问题

```
template<typename Visitor, typename Derived>
struct ElementBase : public Base
{
    void visit()
    {
        _e.visit(static_cast<Derived*>(this));
    }

private:
    Visitor _e;
};

// Atoms.
template<typename Visitor>
struct ElementA : public ElementBase<Visitor, ElementA<Visitor> >
{
    ElementA() : a(5) {}

    int a;
};

// Visitors.
struct VisitorA
{
    void visit(ElementA<VisitorA> *a)
    {
        cout << a->a << endl;
    }
}; 
```

# javascript - 是否可以在不将其传递给处理程序的情况下获取单击事件？

> ID：13865365
> 
> 赞同：2
> 
> 时间：2012-12-13T17:37:47.643
> 
> 标签：javascript

我有类似的东西：

```
<div onclick="doSomething('foo', 'bar');"></div> 
```

如您所见，事件没有传递给处理程序。无论如何都可以在处理程序内部访问它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:39:51.333

> 如您所见，事件没有传递给处理程序。无论如何都可以在处理程序内部访问它吗？

不。

完成此操作的最佳方法是向您的 div 添加一个 id，并从脚本设置事件处理。

这应该做你正在寻找的

```
<div id='myDiv'></div> 
```

* * *

接着

```
function doSomething(evt, str1, str2) { ... }

document.getElementById('myDiv').onclick = function(e) {

    doSomething(e, 'foo', 'bar');

}; 
```

只需确保包含上述内容的脚本标签位于 body 标签*的底部*，这样脚本在创建并准备好 dom 之前不会运行。

# java - 为聊天服务器选择 xmpp 或 java servlet

> ID：13865368
> 
> 赞同：0
> 
> 时间：2012-12-13T17:38:13.650
> 
> 标签：java, servlets, xmpp, forum, irc

我对 xmpp 协议进行了一些（但不是高级专家）研究，并学习了 java 和 Java EE 以制作 JSP 和 Servlet。

我想做一个基于网络的聊天系统。显然，这需要基于 javascript、css、html 的前端 UI（如果使用 xmpp 完成，可以使用一些桌面 xmpp 客户端）。

我真的无法决定使用什么。xmpp 或 java servlet（因为它们可以在典型的 jsp 网站之外使用）。它可以在两者中完成。有一些我可以使用和自定义的开源 xmmp 服务器，或者我可以从头开始编写我自己的基于 servlet 的服务器应用程序。

我应该让它符合 xmpp 还是只在 java 中使用 Socket 类而不关心 xmpp？

我描述了具有相似属性的聊天服务器，例如 IRC、facebook 聊天和 stackoverflow 之类的论坛的混合

这是一个长期战略问题，提前规划利益、特点和问题或限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:45:01.503

[XMPP](http://xmpp.org/)是一种协议。Java EE 是一种技术。

XMPP 有[Java 实现，但也有许多其他技术](http://xmpp.org/xmpp-software/libraries/)

你的问题毫无意义：真皮座椅和家用车之间的选择......

好吧，你可以选择家用车和真皮座椅。或者带真皮座椅的跑车。或者是带真皮座椅的 SUV。...

* * *

根据您的评论编辑：

> 我想问我应该使它符合 xmpp 还是只在 java 中使用 Socket 类并使用端口 80 完成所有工作

为什么不使用实现 XMPP 协议的现有 Java 库？您应该通过不重新发明轮子来节省时间......

> “我应该让它符合 xmpp 还是只在 java 中使用 Socket 类而不关心 xmpp？”

如果它们适合您的需要，您应该使用现有的库和协议。如果现有的服务器可以做你想做的事，那就去做吧。如果没有，但您可以相当轻松地自定义它，那么就去做吧，如果没有，如果 XMPP 满足您的需求，则使用现有的 XMPP 库创建您的服务器。

你是唯一一个知道你需要什么的人。您有 XMPP 协议规范来决定它是否涵盖它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:53:36.293

将 java 与 JSP 和 Servlets 以及 Javascript 与 Ajax 一起使用，可能使用 Apache Wicket。将大部分 java 源代码保留在 Servlet 中。

# c - 为什么在 pthread_create 后未分离线程时未加入的 pthread 会泄漏资源

> ID：13865375
> 
> 赞同：3
> 
> 时间：2012-12-13T17:39:00.093
> 
> 标签：c, memory-leaks, pthreads

我举了一个例子

[https://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html](https://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html)

通过在`pthread_create`不调用`pthread_join`. 这会导致内存泄漏，最终 PC 内存不足。当我`pthread_detach`在创建线程后立即添加时，程序表现良好，一段时间后内存使用量保持不变。

我的印象是，当一个线程退出时（在关闭`}` 函数时，如果给予`pthread_create`）它的所有资源都会被清除。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T17:45:10.113

> 我的印象是，当一个线程退出时（在关闭函数时，如果给 pthread_create）它的所有资源都会被清除。

那是错误的印象。正如您所说，当您调用 pthread_join 或线程是分离线程时，所有资源都会为完成的线程释放。

对于非分离线程，必须保留一些资源 - 否则您无法通过稍后调用 pthread_join 获得线程的返回值。无法加入分离的线程，因此您无法从中获取退出值。

许多实现将此返回值存储在线程的堆栈中，因此保留整个堆栈，直到有人在非分离线程上调用 pthread_join。

# c# - 泛型方法 - 调用方法不同的类

> ID：13865379
> 
> 赞同：0
> 
> 时间：2012-12-13T17:39:05.223
> 
> 标签：c#, asp.net-mvc

我想设置取决于类型的第一类或第二类的可变结果方法，我的代码有什么问题？

```
 public ActionResult Contact()
    {
        ViewBag.Message = GetValue(new ClassOne(), "classOne");

        return View();
    }

    public string GetValue<T>(T customClass, string type)
    {
        if (type == "classOne") return customClass.ClassOneMethod();
        else customClass.ClassTwoMethod();
    }

    class ClassOne
    {
        public string ClassOneMethod()
        {
            return "ClassOneMethod";
        }
    }

    class ClassTwo
    {
        public string ClassTwoMethod()
        {
            return "ClassTwoMethod";
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:45:19.717

问题是编译器在编译时对类型一无所知，`T`并且无法确定其中包含的对象`customClass`有一个名为`ClassOneMethod`or的方法`ClassTwoMethod`。您有多种选择，例如从通用基类派生，覆盖虚拟方法或实现接口。

这里有一些关于如何使用界面进行操作的提示。这远非完美，但我试图让它与您的原始代码非常接近。

```
interface IHaveAMethod
{
    String GetString();
}

public ActionResult Contact()
{
    ViewBag.Message = GetValue(new ClassOne());

    return View();
}

public String GetValue<T>(T customClass) where T : IHaveAMethod
{
    return customClass.GetString();
}

class ClassOne : IHaveAMethod
{
    public String GetString()
    {
        return "ClassOneMethod";
    }
}

class ClassTwo : IHaveAMethod
{
    public String GetString()
    {
        return "ClassTwoMethod";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T17:49:26.770

您的代码不起作用，因为您的类没有相同的定义。您可以像这样更改代码以使代码运行：

```
public ActionResult Contact()
{
    ViewBag.Message = GetValue<MyInterface>(new ClassOne());
    return View();
}

public string GetValue<T>(T customClass, string type)
{
    return customClass.MyMethod
}

class ClassOne : IMyInterface
{
    public string MyMethod()
    {
        return "ClassOneMethod";
    }
}

class ClassTwo : IMyInterface
{
    public string MyMethod()
    {
        return "ClassTwoMethod";
    }
}

public Interface IMyInterface
{
    string MyMethod();
} 
```

# java - 如何使用变量声明一个新的 JComboBox

> ID：13865387
> 
> 赞同：2
> 
> 时间：2012-12-13T17:39:21.947
> 
> 标签：java, swing, parameters, jcombobox, comboboxmodel

我需要创建一个新的 JComboBox，但由于我对三个不同的操作使用相同的 JFrame，我需要将 JComboBox 名称作为参数传递

这是我现在拥有的代码：

```
 comboTipo=("Tienda."+tablaP+"Items");
    tipo = new JComboBox(comboTipo); 
```

如果我打印 comboTipo，我可以阅读“Tienda.telasItems”或“Tienda.accesoriosItems”或“Tienda.aviosItems”。我希望将此文本用于组合框声明，因此我不必创建决策结构

如果需要其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:43:35.217

您不能直接在 Java 中通过字符串访问变量（不是没有反射，这在这里没有多大意义），您正在尝试做一些不允许的事情。

您应该使用不同的方法解决问题，例如您可以使用数组：

```
Object[][] data = new Object[][]{Tienda.telasItems, Tienda.accesoriosItems, Tienda.aviosItems};
JComboBox[] boxes = new JComboBox[3];

for (int i = 0; i < boxes.length; ++i)
  boxes[i] = new JComboBox(data[i]); 
```

# maven - Maven OpenSAML 依赖问题

> ID：13865390
> 
> 赞同：7
> 
> 时间：2012-12-13T17:39:43.337
> 
> 标签：maven, dependencies, opensaml

我被分配了在我的公司和客户之间实施 SAML 的任务。我正在考虑使用 OpenSAML，但我正在努力设置 maven 项目。

我添加依赖项：

```
<dependency>
<groupId>org.opensaml</groupId>
<artifactId>opensaml</artifactId>
<version>2.5.1</version>
</dependency> 
```

但是pom文件有错误： Missing artifact xerces:xml-apis:jar:1.4.01

我无法在 Maven 存储库中找到此依赖项。检查 OpenSAML 站点时，它指出：

> 在基于 Maven 的项目中使用 OpenSAML
> 
> 以下是在基于 Maven 的项目中使用 OpenSAML 所需的信息。Maven 存储库： [https](https://build.shibboleth.net/nexus/content/repositories/releases) ://build.shibboleth.net/nexus/content/repositories/releases 组 ID：org.opensaml 工件 ID：opensaml

但是当我在我的 pom 文件中配置该存储库时，它仍然找不到依赖项。

```
<repositories>
    <repository>
      <id>org.opensaml</id>
      <url>https://build.shibboleth.net/nexus/content/repositories/releases</url>
    </repository>
 </repositories> 
```

有没有人在 Maven 中设置了 OpenSAML 可以提供帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T18:27:40.707

您是否还从存储库向您的 POM 文件添加了 xmltooling 和 openws 依赖项：

[https://build.shibboleth.net/nexus/content/repositories/releases/org/opensaml/](https://build.shibboleth.net/nexus/content/repositories/releases/org/opensaml/)

```
<dependency>
<groupId>org.opensaml</groupId>
<artifactId>xmltooling</artifactId>
<version>1.3.2</version>
</dependency>

 <dependency>
<groupId>org.opensaml</groupId>
<artifactId>openws</artifactId>
<version>1.4.2</version>
 </dependency> 
```

xmltooling 应该有缺少的 xerces xml-api。

谢谢，约格什

# linux-kernel - 防止linux内核将线程迁移到其他cpu的任何方法

> ID：13865393
> 
> 赞同：4
> 
> 时间：2012-12-13T17:40:04.017
> 
> 标签：linux-kernel, pthreads

有什么办法可以防止linux内核将线程迁移到其他cpu？使用 hwloc（它又使用 pthread_setaffinity_np），我将线程绑定到核心。但是，有时我会看到内核启动了昂贵的迁移任务。有什么办法可以阻止内核这样做吗？我没有在 hwloc / pthreads 库中找到任何标志，也没有将 kernel/sched_nr_migrate 设置为 0 导致所需的行为。任何建议都受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:38:15.190

您可以设置进程（而不是线程）的 CPU 亲和性，据我了解，内核将努力尊重这一点。如果您希望特定进程产生的所有线程在同一个 CPU 上运行，那么这是一个可以接受的解决方案。

这是 IBM 的一篇文章，提供了一些额外的背景和特定的系统调用：

[http://www.ibm.com/developerworks/library/l-affinity/index.html](http://www.ibm.com/developerworks/library/l-affinity/index.html)

# c# - 用列表填充 SharePoint 列表

> ID：13865395
> 
> 赞同：-1
> 
> 时间：2012-12-13T17:40:12.033
> 
> 标签：c#, list, sharepoint

我在一个 web 部件中工作。我过滤（使用 caml）一个 SharePoint 列表并将我的结果放在一个`List<SPListItem>`.

现在，我需要填充另一个 SharePoint 列表（我在相同的代码中创建了该列表），但我找不到这样做的方法。

```
List<SPListItem> results = new List<SPListItem>()  //results have the result of my    query
.
.
.
SPList listFiltered = mySite.Lists[newListName];      //listFiltered is my newlist
SPListItemCollection newListItems = listFiltered.Items; //newListItem are the item from my list
foreach (SPListItem item in results)
{
      //I don't know how to send my result to my SharePoint list :(
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:48:03.277

您将需要定义您的其他列表，然后您可以使用列表包含的列向该列表添加一个新的 SPListItem。我不确定是什么`results`，如果这是一个错字，但我将其包含在我的答案中。`results`如果不存在，您将需要更改它。

```
SPList secondList = web.Lists["MyList"];
foreach(SPListItem item in results)
{
     SPListItem Item = secondList.Items.Add();
     item["Title"] = companyName
     item["DateReceived"] = System.DateTime.Now;
     item["Description"] = companyDesc;
     item.Update();
} 
```

# vba - 在两张纸中查找多个匹配项并在另一张纸中复制粘贴

> ID：13865399
> 
> 赞同：-1
> 
> 时间：2012-12-13T17:40:27.610
> 
> 标签：vba, excel

我需要一个用于不同工作表中多个匹配项的宏，它将返回唯一 ID 的所有值。

1.  表 1 包含唯一的 ID 和值，可能存在重复的值。
2.  在另一张纸上，也可能有重复的值，并且将为每个重复值赋值对应的值
3.  作为输出，我需要一个唯一 ID 的所有相应值。

Sheet1 的内容

```
id1 isin1
id2 isin1
id3 isin2
id4 isin3 
```

Sheet2的内容：

```
isin1 value1 age1
isin1 value2 age2
isin2 value3 age3
isin3 value4 age4
isin3 value5 age5
isin1 value6 age6
isin3 value7 age7

<U>Output</U>

id1 isin1 value1 age1
id1 isin1 value2 age2
id1 isin1 value6 age6

id2 isin1 value1 age1
id2 isin1 value2 age2
id2 isin1 value6 age6

id3 isin2 value3 age3

id4 isin3 value4 age4
id4 isin3 value5 age5
id4 isin3 value7 age7 
```

我尝试对此进行编程，但出现错误。

我试图循环两个数组，即（range1 & range2）并尝试将所有值存储在另一个数组（range3）中。

运行程序时出现运行时 424 对象错误。

如何在另一个数组中以期望的方式获取值？

```
Option Explicit

Sub test()

Dim varSheetA As Variant
Dim varSheetB As Variant
Dim varSheetC As Variant
Dim strRangeToCheck1 As String
Dim strRangeToCheck2 As String
Dim strRangeToCheck3 As String   

Dim iRow1 As Long
Dim iCol1 As Long
Dim iRow2 As Long
Dim iCol2 As Long
Dim iRow3 As Long
Dim iCol3 As Long

strRangeToCheck1 = "A1:B5"
strRangeToCheck2 = "D1:E6"
strRangeToCheck3 = "f1:h22"

Debug.Print Now

varSheetA = Worksheets("Sheet1").Range(strRangeToCheck1)
varSheetB = Worksheets("Sheet1").Range(strRangeToCheck2)
varSheetC = Worksheets("Sheet1").Range(strRangeToCheck3)

Debug.Print Now

For iRow1 = LBound(varSheetA, 1) To UBound(varSheetA, 1)
For iCol1 = LBound(varSheetA, 2) To UBound(varSheetA, 2)

For iRow2 = LBound(varSheetA, 1) To UBound(varSheetA, 1)
For iCol2 = LBound(varSheetA, 2) To UBound(varSheetA, 2)

If varSheetA(iRow1, 2) = varSheetB(iRow2, 1) Then

    varSheetC(iRow1, 1).Value = varSheetA(iRow1, 1).Value " Here i am  getting 424 runtime error"

Else
End If

Next iCol2
Next iRow2

Next iCol1
Next iRow1

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:40:46.020

所以如果我理解正确的话，第一张纸上只有 1 个 id#？如果是这种情况，请遍历 sheet1 行并读取每一对 (id#, isin#)。

然后，对于每个 isin#，您在 sheet2 中搜索 isin# 并获得另一对 (value#, age#)。你现在有一组 4 输出。当然，您必须阅读 sheet2 的所有 isin#s，因此将其放入循环中。作为一个简单的例子 - （编辑 - 比我的原始版本更多的代码，因为我有 Excel 可以调试）：

```
Option Explicit

Sub Tester()

Dim counter1 As Long
Dim counter2 As Long
Dim counter3 As Long
Dim counter4 As Long

Dim firstSheet1Row As Long
Dim lastSheet1Row As Long
Dim firstSheet2Row As Long
Dim lastSheet2Row As Long

Dim firstColNumSht1 As Long
Dim secondColNumSht1 As Long
Dim firstColNumSht2 As Long
Dim secondColNumSht2 As Long
Dim thirdColNumSht2 As Long

Dim writeRow As Long

Dim dataVal(1 To 4) As Long

firstSheet1Row = 1
lastSheet1Row = 10
firstSheet2Row = 1
lastSheet2Row = 20

firstColNumSht1 = 1
secondColNumSht1 = 2
firstColNumSht2 = 1
secondColNumSht2 = 2
thirdColNumSht2 = 3

writeRow = 1

For counter1 = firstSheet1Row To lastSheet1Row

  dataVal(1) = Worksheets(1).Cells(counter1, firstColNumSht1)
  dataVal(2) = Worksheets(1).Cells(counter1, secondColNumSht1)

    For counter2 = firstSheet2Row To lastSheet2Row

      If Worksheets(2).Cells(counter2, firstColNumSht2) = dataVal(2) Then

        dataVal(3) = Worksheets(2).Cells(counter2, secondColNumSht2)
        dataVal(4) = Worksheets(2).Cells(counter2, thirdColNumSht2)

        For counter3 = 1 To 4
          Worksheets(3).Cells(writeRow, counter3) = dataVal(counter3)
        Next counter3

        writeRow = writeRow + 1

      End If

    Next counter2

  Next counter1

End Sub 
```

我希望变量命名约定清楚，您没有准确指定工作表、行、列等的位置。此外，如果您有兴趣，请查看 Range.FindNext 方法。帮助文件包含一个可以摆脱第二个 for 循环的循环。如果你没有很多数据，那没关系（但这是更好的做法），但如果你有很长的值列表，本机 excel 代码（如 Range.FindNext）将运行一个数量级或者比手动编写检查每个单元格的 for 循环更快。

如果我误解了你的问题，请告诉我，我会尽量得到正确的答案（不过我确实有工作！）。再说一次，我不会这样编码。有更优雅、更强大和更有效的方法来完成这项工作，但我想先从一个可行的解决方案开始。

# ms-access-2010 - MS Access - 运行查询，每个用户显示一个结果

> ID：13865405
> 
> 赞同：1
> 
> 时间：2012-12-13T17:40:36.020
> 
> 标签：ms-access-2010

我有一个数据库，我正在绑定到我们的访问控制系统中。我正在尝试创建一个报告，显示用户从建筑物的第一个入口和最后一个出口。我已经将一个查询放在一起，该查询如何为一个用户提供正确的单个结果，但我想自动执行此操作以遍历用户列表。

获取一个用户的第一个条目的查询（目前是这样）如下：

```
SELECT TOP 1 AccessLog.ID, AccessLog.Date, First(AccessLog.Time) AS FirstOfTime, AccessLog.User, AccessLog.Details, AccessLog.Event, AccessLog.Department, AccessLog.Where
FROM AccessLog
GROUP BY AccessLog.ID, AccessLog.Date, AccessLog.User, AccessLog.Details, AccessLog.Event, AccessLog.Department, AccessLog.Where
HAVING (((AccessLog.Date)=#DATE#) AND ((AccessLog.User)="USERNAME") AND ((AccessLog.Where)="Front Door (In)"))
ORDER BY First(AccessLog.Time); 
```

我有一个包含所有用户名的单独表格，是否可以为此进行运行？

基本上我是一个完整的 Access n00b，过去我会使用 PHP 和循环函数完成此操作，但这在 Access 中应该很容易实现，不是吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:17:30.393

您可以使用以下查询按日期获取所有用户的到达时间列表。将查询定义保存在名称“ArriveTimes”下：

```
SELECT AccessLog.Date, AccessLog.User, Min(AccessLog.Time) AS ArriveTime
FROM AccessLog
WHERE (((AccessLog.Where)="Front Door (In)"))
GROUP BY AccessLog.Date, AccessLog.User; 
```

同样，您可以使用保存为“DepartTimes”的类似查询来获取出发时间：

```
SELECT AccessLog.Date, AccessLog.User, Max(AccessLog.Time) AS DepartTime
FROM AccessLog
WHERE (((AccessLog.Where)="Front Door (Out)"))
GROUP BY AccessLog.Date, AccessLog.User; 
```

然后，您可以将 [ArriveTimes] 和 [DepartTimes] 查询连接在一起（在 [Date] 和 [User] 上加入）并通过加入 [AccessLog] 表的两个实例（在 [Date] 上加入，[用户]和[时间]）：

```
SELECT ArriveTimes.Date, ArriveTimes.User, 
    ArriveTimes.ArriveTime, AccessLog_A.Details AS ArriveDetails, 
    DepartTimes.DepartTime, AccessLog_D.Details AS DepartDetails
FROM 
    (AccessLog AS AccessLog_A INNER JOIN 
        (ArriveTimes INNER JOIN DepartTimes 
            ON (ArriveTimes.User = DepartTimes.User) 
                AND (ArriveTimes.Date = DepartTimes.Date)
        ) 
        ON (ArriveTimes.ArriveTime = AccessLog_A.Time) 
            AND (AccessLog_A.User = ArriveTimes.User) 
            AND (AccessLog_A.Date = ArriveTimes.Date)
    ) 
    INNER JOIN AccessLog AS AccessLog_D 
        ON (DepartTimes.DepartTime = AccessLog_D.Time) 
            AND (DepartTimes.User = AccessLog_D.User) 
            AND (DepartTimes.Date = AccessLog_D.Date); 
```

# java - 设置具有相同属性的不同对象

> ID：13865410
> 
> 赞同：0
> 
> 时间：2012-12-13T17:41:04.823
> 
> 标签：java

这不是我第一次发现自己必须使用几乎相同的数据来调整两个对象，例如：

```
User.java  (Object returned from another library)
private String name;
private String surname;
private String email;
private String telephone;
...
getters and setters();
constructor(); 
```

* * *

```
MyUser.java
private String name;
private String surname;
private String email;
private String telephone;
...
getters and setters();
constructor(); 
```

我通常创建一种方法来将一个对象转换为另一个对象，如下所示：

```
 User m1 = new User();
 MyUser m2 = new MyUser();
 m2.setName(m1.getName());
 m2.setsurmame(m1.getsurname()); 
```

...等等...

有人知道做这种事情的不同方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:43:34.357

C Sharp 中有一个[AutoMapper](http://automapper.codeplex.com/)项目。

概括地说，它提供了一种将属性从源实例映射到目标实例的简单方法，其中源实例和目标实例可以属于不同的类。

这个链接分享了一些关于 Java 中类似项目的有趣想法：[Automapper for Java](https://stackoverflow.com/questions/3319002/automapper-for-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:47:34.863

您可以做的一件事是将该`User`对象传递给类的方法`MyUser`或类的构造函数，`MyUser`然后执行这些设置器。

使用构造函数：

```
public MyUser(User u){
    setName(u.getName());
    setSurname(u.getSurname());
    ...
} 
```

或创建一个单独的方法：

```
public void setMyUser(User u){
   setName(u.getName());
   setSurname(u.getSurname());
   ...
} 
```

然后你可以像这样使用它：

```
User u = new User();
//hope all values are set in User u object
MyUser m = new MyUser(u); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T17:51:27.027

使用[对象组合](http://en.wikipedia.org/wiki/Object_composition)对于使用其他库创建的对象，创建`ExternalUser`. 但是，如果您想在本地创建它们，请创建一个`BrandNewUser`. 然后，您可以以相同的方式对待它们，一个版本使用传递组合方法，另一个版本使用您自己的内部实现由您的代码创建。

您可以像这样创建对象：

```
public interface MyUser {
  // all the methods you need
  String getSurname();
}

public class ExternalUser implements MyUser {
  private User _user;
  private ExternalUser() { }
  public ExternalUser(User u) {
    this._user = u;
  }
  public String getSurname() {
    return _user.getSurname();
  }
}

public class BrandNewUser implements MyUser {
  private String _surname;
  public ExternalUser(String name, String surname) {
    this._surname = surname;
  }
  public String getSurname() {
    return _surname;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T17:51:46.313

在适当的情况下，重构这些对象以相互继承，而不是重复属性和逻辑。

在对象必须保持不同的情况下，您可以使用多种克隆工具中的任何一种来执行从对象到对象的深度复制。这是一个体面的，非详尽的列表：

*   [折花](http://code.google.com/p/orika/)
*   [推土机](http://dozer.sourceforge.net/)
*   [属性工具](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/PropertyUtils.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T17:52:11.253

也许您可以使用提供复制属性功能的 beanutils。 [http://commons.apache.org/beanutils/](http://commons.apache.org/beanutils/)

# python - python sql查询检查

> ID：13865412
> 
> 赞同：1
> 
> 时间：2012-12-13T17:41:19.533
> 
> 标签：python, sql

我使用 psycopg 在 python 中有这个 sql 查询：

```
cr.execute('select id from test_table where va1_1=%s
            order by val_2 desc limit 1',(id, )) 
```

如果查询有多个记录，这样我只获取最后一个。然后我将结果分配给一个变量：

```
x=cr.fetchone()[0] 
```

但是，有时查询不返回任何记录，用 cr.fetchone 赋值自然会出错。在尝试分配之前首先检查查询是否会返回记录的正确方法是什么？
我尝试了一个简单的：

```
if cr.exec....:
    x=cr.fetchone()[0] 
```

但似乎它总是返回 False 并且总是不执行 fetchone。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:45:22.160

您可以先检查结果是否为空。 `fetchone`当没有更多结果时返回 None。

```
x = cr.fetchone()
if x is not None:
  result = x[0] 
```

# ruby-on-rails - 为什么 Rails 重定向我的 POST 而不是 GET？

> ID：13865416
> 
> 赞同：2
> 
> 时间：2012-12-13T17:41:34.520
> 
> 标签：ruby-on-rails, redirect

我正在尝试将数据发布到某个`controller#action`对，但我的应用程序将我重定向到 POST（但不是 GET），我不知道为什么。

我用一种方法构建了一个简单的控制器：

```
class NavigationsController < ApplicationController
    def foo
        render :text => 'in foo'
    end
end 
```

我的路由文件只有一条规则：

```
map.connect ':controller/:action/:id' 
```

不过，这是我 GET 和 POST 时的结果：

```
$ curl http://localhost:3000/navigations/foo/1
in foo
$ curl -d 'a=b' http://localhost:3000/navigations/foo/1
<html><body>You are being <a href="http://localhost:3000/">redirected</a>.</body></html> 
```

*规格：rails 2.3.8，ruby 1.8.7*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:01:12.420

关掉`protect_from_forgery`。

## 对于所有控制器

在 ApplicationController 中注释掉（或删除）`protect_from_forgery`。

```
class ApplicationController < ActionController::Base
    #protect_from_forgery # See ActionController::RequestForgeryProtection for details
    # ...
end 
```

## 对于一个或多个控制器

添加`skip_before_filter :verify_authenticity_token`到控制器声明。

```
class NavsController < ApplicationController
    skip_before_filter :verify_authenticity_token
    # ...
end 
```

## 对于一项或多项操作

`:except`为上述`skip_before_filter`或`protect_from_forgery`命令添加一个选项。

```
class MyController < ApplicationController
    protect_from_forgery :except => :index
end

class MyOtherController < ApplicationController
    skip_before_filter :verify_authenticity_token, :except => [:create]
end 
```

# string - 为什么 Haskell 的默认字符串实现是一个字符的链表？

> ID：13865420
> 
> 赞同：21
> 
> 时间：2012-12-13T17:41:41.290
> 
> 标签：string, performance, haskell, linked-list

Haskell 的默认实现在速度和内存方面效率不高的事实`String`是众所周知的。据我所知`[] lists`，通常在 Haskell 中作为单链表实现，对于大多数小/简单的数据类型（例如`Int`）来说，这似乎不是一个好主意，但`String`似乎完全是矫枉过正。关于这个问题的一些意见包括：

[真实世界的 Haskell](http://book.realworldhaskell.org/read/efficient-file-processing-regular-expressions-and-file-name-matching.html)

> 在像这样的简单基准测试中，即使是用 Python 等解释性语言编写的程序也能胜过使用 String 的 Haskell 代码一个数量级。

[Haskell 中的高效字符串实现](https://stackoverflow.com/questions/576213/efficient-string-implementation-in-haskell)

> 由于String只是[Char]，即Char的链表，这意味着String的引用局部性较差，再次意味着String在内存中相当大，至少为N *（21bits + Mbits），其中N是字符串的长度，M 是指针的大小 (...)。编译器不太可能将字符串优化为循环等。

我知道 Haskell`ByteString`的 s（和`Array`s）有几种不错的风格，它们可以很好地完成这项工作，但我希望默认实现是最有效的实现。

TL;DR：为什么 Haskell 的默认`String`实现是一个单链表，尽管它非常低效并且很少用于现实世界的应用程序（除了非常简单的应用程序）？有历史原因吗？更容易实现吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-13T18:20:41.873

> 为什么 Haskell 的默认 String 实现是单链表

因为单链表支持：

*   通过模式匹配进行归纳
*   具有有用的属性，例如 Monad、Functor
*   是适当参数多态的
*   天生懒惰

等`String`( `[Char]`unicode points) 表示符合语言目标的字符串类型（截至 1990 年），并且基本上随列表库“免费”提供。

总之，从历史上看，语言设计者对设计良好的核心数据类型更感兴趣，而不是文本处理的现代问题，所以我们有一个优雅、易于理解、易于教授的`String`类型，它不是一个 unicode 文本块, 并且不是密集的、打包的、严格的数据类型。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-13T17:56:17.617

Efficiency is only one axis to measure an abstraction on. While lists are pretty inefficient for text-y operations, they are darn convenient in that there's a lot of list operations implemented polymorphically that have useful interpretations when specialized to `[Char]`, so you get a lot of reuse both in the library implementation and in the user's brain.

It's not clear that, were the language being designed today from scratch with our current level of experience, the same decision would be made; however, it's not always possible to make decisions perfectly before experience is available.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T17:56:48.337

在这一点上，它可能是历史性的：使事情`ByteString`如此高效的优化是*最近的*，而`[Char]`比它们早了很多年。

# actionscript-3 - FLVPlayback VideoEvent.COMPLETE 在视频结束前触发，视频停止播放

> ID：13865421
> 
> 赞同：2
> 
> 时间：2012-12-13T17:41:49.370
> 
> 标签：actionscript-3, flv, flvplayback

```
import fl.video.*;
var player:FLVPlayback = new FLVPlayback();
addChild(player);
player.skin = "someSkin.swf";
player.source = "http://someDomian/some.flv"; 
```

这是代码。我只是从服务器加载和播放一些 flv，当我通过 Flash 测试它时（只需按 ctrl+enter），视频将在视频的大约 90% 处停止并发送 COMPLETE 事件。有谁知道为什么？再试一次，视频停止的时间是一样的，都在90%左右。我搜索了它，并尝试更改播放器的 playheadUpdateInterval，显式设置 totalTime 或将 bufferTime 设置得更长。所有这些解决方案都没有区别。我试图从同一台服务器加载另一部电影，同样的问题。服务器有没有可能出现问题？

编辑：我将 swf 发送给其他人，视频按预期播放。然后另一个人，同样的结果。所以，我猜我的设置有问题？是否有一些设置会导致这个奇怪的动作？但是当我在笔记本电脑上尝试时，视频意外停止。为什么这似乎适用于除我之外的每个人的计算机？

before CLOSE：最后我的同事发现了导致这个问题的奇怪原因，如果将发布设置更改为 FP10 & 10.1 或 FP9，它会按我们预期的那样工作。FP10.2 及更高版本，该服务器上的视频似乎没有找到结局的天赋。视频是 H.264/AAC，如果我将它们转换为 VP60/MP3，所有 FP 版本都可以使用。由于我无法修改有关编解码器的设置，我将只更改发布设置并保留编解码器的事情。虽然我对此感到沮丧，但如果你看到这个并且很幸运你碰巧知道为什么会出现“早期完成”的编解码器，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:44:17.563

问题可能出在 .FLV 文件上，有时在将任何视频文件（AVI、MOV、MP4、3GP、WMV）编码为 .FLV 格式时可能会出现问题，从而导致跳帧。如果效果良好，请尝试使用其他 .FLV 文件的代码，然后您需要重新编码您的 FLV 文件。

您还可以尝试通过跟踪视频播放进度来捕获视频完成事件。

```
import fl.video.*;

var player:FLVPlayback = new FLVPlayback();
addChild(player);
player.skin = "someSkin.swf";
player.source = "http://someDomian/some.flv";

addEventListener(Event.ENTER_FRAME, enterFrameHandler);

function enterFrameHandler(event:Event):void {

    if(player.playheadPercentage>=99)
    {

      //On Video Playback Complete Actions here     
    }
} 
```

# computation - 这是将自身打印为输出的正确非平凡程序吗？打印以下两次，第二次在引号中

> ID：13865422
> 
> 赞同：1
> 
> 时间：2012-12-13T17:41:48.473
> 
> 标签：computation

这是 Scoot Aaronsson 在他的讲座中给出的。打印以下内容，第二次用引号括起来。（程序）“在引号中第二次打印以下内容”（输出）

我不明白这个。我的理解是：在引号中第二次打印以下内容。“，第二次加引号”

这可能是一个愚蠢的问题，但任何人都可以解释我是对还是错？

# javascript - 从表格单元格中获取项目并附加到同一行中的第一个单元格

> ID：13865424
> 
> 赞同：1
> 
> 时间：2012-12-13T17:41:57.990
> 
> 标签：javascript, jquery, html

如何从表格中的 td 中获取文本并将其插入到同一行的第一个 td 中？--使用jQuery

```
<table border=1>
  <tbody>
    <tr>
      <td>APPEND TEXT1 HERE</td>
      <td></td>
      <td>GRAB TEXT1 HERE</td>
    </tr>
    <tr>
      <td>APPEND TEXT2 HERE</td>
      <td></td>
      <td>GRAB TEXT2 HERE</td>
    </tr>
    <tr>
      <td>APPEND TEXT3 HERE</td>
      <td></td>
      <td>GRAB TEXT3 HERE</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:45:10.613

```
$('table td:first-child').text(function(){
    return $(this).siblings().last().text()
}) 
```

[http://jsfiddle.net/VdjN8/](http://jsfiddle.net/VdjN8/)

如果您想附加文本（*而不是替换*）：

```
$('table td:first-child').text(function(i, c){
    return c + ' ' + $(this).siblings().last().text()
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T17:44:03.797

遍历每一行并将`td`所需偏移量处的文本附加到第一行：

```
$('tr').each(function(){
    $(this).find('td').eq(0).append($(this).find('td').eq(2).text());
}); 
```

这是一个演示：http: [//jsfiddle.net/pchEG/](http://jsfiddle.net/pchEG/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T17:44:16.953

循环遍历每个`<tr>`并`.html()`从最后一个`<td>`子元素中获取。

```
$('tr').each(function(idx){
  var appendToNode = $(this).find('td:first-child');
  // And append to the existing HTML.
  appendToNode.html(appendToNode.html() + $(this).find('td:last-child').html());
}); 
```

[http://jsfiddle.net/Lvfwt/](http://jsfiddle.net/Lvfwt/)

# php - 使用数组更新mysql数据库中的数据

> ID：13865425
> 
> 赞同：0
> 
> 时间：2012-12-13T17:42:04.860
> 
> 标签：php, mysql, arrays

我想更新数据库中已经存在的信息，但使用数组。我收到“成功更新”消息，表明数据库中的数据未更新。

以下是我用来进行插入的函数：

```
function update_knowledge_modules($update_data,$value)
{   
    $update = array();
    array_walk($update_data,'array_clean');

    foreach($update_data as $field=>$data)
    {
        $update[] = '.$field. = \''.$data.'\'';
    }

    $query = "UPDATE knowledge_modules SET".implode(', ',$update)."WHERE curr_code =$value";

    mysql_query($query)
    or die(mysql_error);

}

<?php

                    if(isset($_GET['success']) == true && empty($_GET['success'])==true)
                        {
                            echo 'Changed successfully';    
                        }
                    else
                        {
                            if(empty($_POST)== false && empty($errors)== true ) 
                                {
                                    $update_module = array(
                                    'KM_Number'=>$_POST['KM_Number'],
                                    'KM_Title'=>$_POST['KM_Title'],
                                    'NQF_Level'=>$_POST['NQF_Level'],
                                    'Credits'=>$_POST['Credits']

                                    );

                                    update_knowledge_modules($update_module,$_SESSION['Curr_Code']); 
                                    header('Location:edit_km_details.php?success');
                                    exit();
                                }
                        else if(empty($errors)== false)
                            {
                                echo output($errors);
                            }

              ?>

            <form action="edit_km_details.php" method="POST"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:55:31.530

Well, first of all, you are outputting the "changed successfully" message solely based on `$_GET['success']` being truthy. It has nothing to do with whether you had success or failure in your `update_knowledge_modules` function call at all, which seems odd.

Second of all, I don't see anywhere where you are actually making a database connection.

Third, your query is undoubtedly being formed improperly. Look at this:

```
$update[] = '.$field. = \''.$data.'\''; 
```

you are going to get a literal `$field` and backslashes in your query string. Try this:

```
$update[] = $field . " = '" . $data . "'"; 
```

Also where you put your imploded array in the final query, you don't have spaces after `SET` and before `WHERE`.

Anytime you are having problems with a query, just `var_dump` it and run it on the database directly to see why it isn't working and look at your errors, including mysql errors.

Finally, you should not be using the `mysql_*` family of functions. They are deprecated.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:53:40.897

尝试：`$update[] = $field . " = '" . $data . "'";`

输出：

```
Array
(
    [0] => KM_Number = 'blah'
) 
```

# java - 在事件中将自定义对象存储在 JLabel 中

> ID：13865427
> 
> 赞同：2
> 
> 时间：2012-12-13T17:42:14.640
> 
> 标签：java, swing

我正在将自定义对象拖放到 JLabel 中，并且能够在传输过程中引用该对象（将标签字符串更改为接收的对象 toString），但不确定如何将自定义对象实际存储在 JLabel 中或构建一个参考。

在转移过程中实现此目的的最佳方法是什么？

这是接收对象并使用它来设置文本的工作传输代码（非常感谢先前的答案：[这里](https://stackoverflow.com/questions/13855184/drag-and-drop-custom-object-from-jlist-into-jlabel/13856193#13856193)：

```
public boolean importData(TransferSupport support) {
            boolean accept = false;
            if (canImport(support)) {
                try {
                    Transferable t = support.getTransferable();
                    Object value = t.getTransferData(PersonTransferable.PERSON_FLAVOR);
                    if (value instanceof Person) {
                        Component component = support.getComponent();
                        if (component instanceof JLabel) {
                            ((JLabel)component).setText(((Person)value).toString());
                            //action here

                        }
                    }
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
            }
            return accept;
        } 
```

JLabels 具有我想将它们存储到的特定实例变量。由于我有组件（JLabel）和值（自定义对象），我可以制作这个链接吗？

在最坏的情况下，我只需要为*每个*标签构建一个 TransferHandler 并准确引用该值。无论如何，这可能是最佳做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:32:14.307

你有很多选择，我可以看到

**选择#1**

创建`Map`某种类型的对象并将对象存储在标签上，使用标签作为键

```
Map<JLabel, Person> mapPeople = new HashMap<JLable, Person>(25) 
```

然后在你的导入方法中

```
mapPeople.put((JLabel)component, (Person)value); 
```

**选择#2**

利用`put/getClientProperty`将值存储到命名键...

在您的导入方法中...

```
((JLabel)component).putClientProperty("person", value); 
```

当你再次需要它时

人 person = (Person)label.getClientProperty("person");

**选择#3**

创建一个能够直接引用此人的自定义标签。

```
public class PersonLabel extends JLabel {
    private Person person;
    public void setPerson(Person person) {
        this.person = person;
        setText(person == null ? null : person.toString());
    }

    public Person getPerson() {
        return person;
    }
} 
```

基本上，你会使用这个组件来代替 normal `JLabel`，确保你正确地转换它。

感谢气垫船和垃圾神首先提到了大部分内容。

**最终选择**

最终选择将取决于您自己的设计、要求以及您希望解决方案的可重用性。

如果这是您的应用程序的“一个”要求，那么`Map`和 client 属性是合理的解决方案。

这`Map`对其他开发人员来说更加明显，很明显您正在尝试做什么。然而，它很容易搞砸。地图要么包含不相关的数据，要么缺少数据，因为有人忘记/或不知道遵守要求。

从这个意义上讲，`clientProperty`它确实解决了一些缺点`Map`，因为您正在处理单个组件，而不是一个组件和一个`Map`（尽管开发人员仍然可能忘记设置属性），但是与比较时的可见性要低得多到`Map`. 开发人员可能需要更长的时间才能意识到您如何存储/检索数据。

然而，它确实具有简单的优点。您可以传递对标签的引用，并且您不仅拥有标签，而且还拥有标签`Person`。

自定义标签为您提供了灵活性的机会。它比解决方案更明显`clientProperty`，因为它定义了公共方法。它还允许您在`TransferHandler`创建标签时进行设置，而不必在每次要重新使用解决方案时单独建立每个标签。

它会归结为这个。您想要一个快速的、一次性的解决方案，还是想要一个独立且可重复使用的解决方案。`Map`和选项的`clientProperty`实施和使用相对较快。自定义组件将花费更多的精力，但通常会产生更可重用的解决方案。全取决于你 ;）

# iphone - 加载特定于设备的 iPad/iPhone UIViewController nib 失败，带有 .mm 文件

> ID：13865432
> 
> 赞同：0
> 
> 时间：2012-12-13T17:42:34.623
> 
> 标签：iphone, ios, ipad, nib

编辑：我在下面写“类”的地方，我的意思是“类的实际类名”，而不是字面意义上的“类”！

对于通用应用程序中的 UIViewController，我们使用：

```
[[class alloc] initWithNibName:nil bundle:nil]; 
```

或者

```
[[class alloc] init]; // same thing 
```

与文件：

1.  类~ipad.xib
2.  类~iphone.xib

根据 Apple 文档，Apple 正确加载了特定于设备的 NIB。

但是如果 UIViewController 有一个“.mm”扩展名，它每次都会失败。似乎只发生在 Obj-C++ 视图控制器上（更改文件扩展名“修复”它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:08:22.053

啊，自我回答，找到了一个可行的解决方法：

代替：

```
initWithNibName:nil bundle:nil 
```

采用：

```
initWithNibName:@"class" bundle:nil // where "class" == your classname, no extension 
```

无论Apple的代码中基于文件名读取NIB文件的错误是什么......这似乎都可以解决它

# push-notification - 如何使用 Redth PushSharp 库向多个平台发送推送通知？

> ID：13865433
> 
> 赞同：0
> 
> 时间：2012-12-13T17:42:37.240
> 
> 标签：push-notification, apple-push-notifications, google-cloud-messaging, pushsharp

我一直在使用[Redth/PushSharp](https://github.com/Redth/PushSharp)代码为 Android 和 iPhone 实现服务器端推送。

使用以下代码：

```
 foreach (Receipient in iOSUsers)
        {
            push.QueueNotification(NotificationFactory.Apple()
                .ForDeviceToken(APNS_Device_Token_Of_Receipient)
                .WithAlert("Alert!")
                .WithSound("default")
                .WithBadge(2));
        }

        foreach (Receipient in GCMUsers)
        {
            push.QueueNotification(NotificationFactory.AndroidGcm()
                .ForDeviceRegistrationId(GCM_Device_Token_Of_Receipient)
                .WithCollapseKey("NONE")
                .WithJson("Alert!"));
        } 
```

我的问题是我一次只能发送到一个平台，上面的代码只发送到 iPhone，如果第一个循环被禁用，那么只有 Android 用户会收到推送消息。

有什么线索吗？

如果需要，我可以添加其他代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T18:55:54.680

I created a windows service that gets the list of ios users and android users and for each calls an instance of the pushbroker object and processes as you have above. You'll have multiple threads processing all ios and android.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:22:20.567

看一下

```
.WithExpiry() 
```

为您发送的消息指定过期日期。

# javascript - Javascript下拉边框大小和颜色

> ID：13865437
> 
> 赞同：0
> 
> 时间：2012-12-13T17:42:47.553
> 
> 标签：javascript, colors, size, border, getelementbyid

我在 CRM 中工作，并创建了一个表单。在我的表格中，我有一些下拉列表。如何使用 JavaScript 更改边框大小和颜色？更改文本框的颜色和边框很容易。我一直在使用的代码是这样的：

```
function colorchanger(){

document.getElementById("fieldname").style.borderColor="#FF0000";

} 
```

我已将此代码用于所有文本框字段，它工作得非常好。我已经用谷歌搜索了这个问题一个小时，但只能找到如何更改 css 和 html 的下拉菜单。我使用了这段代码，但它没有用：

```
document.getElementById().style.border="5px solid #0000ff" 
```

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:48:15.420

为了获得边框颜色，您需要边框宽度。

```
​&lt;select id="fieldname"><option>XX</option></select>

<script>
document.getElementById("fieldname").style.border="5px solid #0000ff";  
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T12:19:28.563

我也面临与选择输入相同的问题。通过使用以下内容，我得到了修复。

```
 $('#selectId').parent().css('border-color','red'); 
```

# c# - Sharepoint 中的反射加载失败和控制台中的成功

> ID：13865439
> 
> 赞同：0
> 
> 时间：2012-12-13T17:42:48.660
> 
> 标签：c#, .net, system.reflection

我在通过反思我的班级时遇到问题。

这段代码：

```
PublishingClass = Type.GetType("CONST STRING FULLY QUALIFIED", true); 
```

如果我在控制台应用程序中工作但如果我在 Sharepoint 上下文中失败（无法加载“CONST STRING FULLY QUALIFIED”）。

为什么有些类从同一个 DLL 加载而其他类不加载？

为什么从控制台应用程序所有类都加载每个类，而从共享点没有？

我在我的机器上运行，复制到 gac，重置 IIS 并回收 AppPool..

有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:48:06.710

你已经尝试过了？

```
Type.GetType("CONST STRING FULLY QUALIFIED, AssemblyName"); 
```

# xml - SSIS 包 xml 目标

> ID：13865441
> 
> 赞同：1
> 
> 时间：2012-12-13T17:42:57.243
> 
> 标签：xml, ssis

我有一个 SSIS 包，可以从数据库中获取某种数据并将其放入 xml 文件目标中。它在 foreach 循环下工作。在执行每个循环时，目标文件中的数据都会更新。目前，数据在每个循环中都被覆盖。真的我想附加数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:16:33.967

首先将您的 XML 包装在 VARCHAR(MAX) 中并按照以下方式输出到平面文件目标：http: [//schottsql.blogspot.com.au/2009/10/ssis-and-xml-output.html](http://schottsql.blogspot.com.au/2009/10/ssis-and-xml-output.html)

然后编辑您的平面文件目标并取消选中“覆盖文件中的数据”选项。每个循环都将附加到平面文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T01:20:59.787

您可以将数据导入 RecordSet 目标并使用脚本组件将 RecordSet 写入 XML 文件。以下链接包含此过程的分步指南：

*   [另一个 SSIS XML 目标](https://www.sqlservercentral.com/articles/yet-another-ssis-xml-destination)

# android - 接收器和服务

> ID：13865442
> 
> 赞同：0
> 
> 时间：2012-12-13T17:42:59.690
> 
> 标签：android, broadcastreceiver, alarmmanager

在 stackoverlow 用户的帮助下，我们编写了这段代码。应该在指定时间开始敬酒但不运行。

有人可以帮我找出问题所在吗？谢谢！

```
public class UnUsedService extends Service {

private PendingIntent pendingIntent;

@Override
public IBinder onBind(Intent intent) {
return null;
}
@Override
public void onCreate() {
super.onCreate();
Toast.makeText(this, "Service Created", Toast.LENGTH_LONG).show();

//startService(new Intent(this, UnUsedService.class));
}
@Override
public void onDestroy() {
super.onDestroy();
//Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();
}

@Override
public void onStart(Intent intent, int startId) {

//  super.onStart();
super.onStart(intent, startId);

Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

//Toast.makeText(UnUsedService.this, "Start Alarm", Toast.LENGTH_LONG).show();

Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 22);
calendar.set(Calendar.MINUTE, 30);
calendar.set(Calendar.SECOND, 0);    AlarmManager am = (AlarmManager)     getApplicationContext().getSystemService  (Context.ALARM_SERVICE);
PendingIntent pi = PendingIntent.getService(getApplicationContext(), 0, new Intent(getApplicationContext(),     AlarmReceiver.class),      PendingIntent.FLAG_UPDATE_CURRENT);
am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),     AlarmManager.INTERVAL_DAY, pi);

}}; 
```

接收器类

```
public class AlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "Alarm worked.", Toast.LENGTH_LONG).show();

    }
 } 
```

显现：

```
<service android:name="UnUsedService">
        <intent-filter>
        <action
        android:name="org.gortcloud.startatboot.UnUsedService" />
        </intent-filter>
        </service>

<receiver android:name=".AlarmReceiver" android:process=":remote"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:42:09.610

好的...我得到了这个工作。我关注[了如何在 Android 中使用警报管理器启动服务？](https://stackoverflow.com/questions/8321443/how-to-start-service-using-alarm-manager-in-android). 基本上我使用的*是*`pendingIntent.setBroadcast(..)`需要广播接收器的，现在我正在使用`pendingIntent.setService(...)`

我有一个扩展 IntentService 的类（带有 noarg 构造函数）。我已成功收到警报以触发启动此服务。我有一个`onStart()`and`onStartCommand()`并且`onHandleIntent()`每个都运行（我假设你只会实现其中一个）

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:54:05.963

我只是在做类似的事情。你能用对我有用的代替`receiver android:name=".AlarmReceiver"`吗？`receiver android:name=".AlarmReceiver" android:process=":remote"`

# typescript - 从 Uri 导入 TypeScript 模块

> ID：13865445
> 
> 赞同：14
> 
> 时间：2012-12-13T17:43:20.963
> 
> 标签：typescript

是否可以在 TypeScript 中导入模块或从 uri 引用定义文件？

我们将 RequireJS 用于我们的应用程序，并希望从 CDN 提供我们的一些定义文件和 TypeScript（或生成的 JavaScript）文件，而不是直接将它们全部包含在我们的项目中。

**引用定义文件**
在 TypeScript 中，我们可以像这样引用定义文件：

```
/// <reference path="jquery-1.8.3.d.ts" /> 
```

但是，我们想做的是：

```
/// <reference path="https://github.com/borisyankov/DefinitelyTyped/raw/master/jquery/jquery-1.8.d.ts" />

export class UsesSomethingFromJQuery {

    TestMethod(element: JQuery) {
        // Do something with the supplied element
    }

} 
```

*注意：我不打算使用 Boris 的 github 链接作为 CDN。我使用链接来演示这个概念。*

**导入 TypeScript 文件**
我们还想从一个通用网站导入模块，如下所示：

```
import OtherModule = module('http://some-internal-site/ts/other');

export class UsesSomethingFromOther {

    TestMethod(c: OtherModule.TestClass) {

    }

} 
```

但是，在为模块提供 uri 时出现错误“导入路径无效”。

**我们要解决**
的问题 我们有一个 TypeScript 文件库，可以为我们的控件、一些 REST 服务包装器和其他实用程序生成 JavaScript。我们希望在其他 Web 应用程序中使用这些通用控件。

当我们有一个特定于我们的一个网站（因此不是公共核心的一部分）的 TypeScript 文件依赖于公共核心中定义的类时，我们希望使用 uri 来引用依赖项。因此上面的问题。

如果这些只是 JavaScript 源文件，我们会将它们托管在内部 CDN 上并从那里引用，但是在 TypeScript 编译步骤中我们会遇到问题。我们是否以错误的方式处理这个问题？有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T14:06:13.123

我认为从 CDN 提供 JavaScript 输出是一个好主意，这会影响您的模块加载器或脚本标签，但`.d.ts`运行时不需要这些文件。

您可以在 TypeScript 中调整[此 RequireJS 和 jQuery 示例，](http://www.stevefenton.co.uk/Content/Blog/Date/201302/Blog/Using-RequireJS-and-Jquery-In-TypeScript/)以像这样远程加载文件...

1.  本地定义文件 ( `.d.ts`)
2.  远程运行时文件，使用`require.config`.

*应用程序.ts*

```
///<reference path="require.d.ts" />
///<reference path="jquery.d.ts" />

require.config({
  paths: {
    'jquery' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min'
  }
});

require(['jquery'], function (jquery) {
    jquery(document).ready(() => {
        alert('Your code executes after jQuery has been loaded.');
    });
}); 
```

# c++ - C++ std::push_heap 打破堆/不尊重比较器

> ID：13865446
> 
> 赞同：0
> 
> 时间：2012-12-13T17:43:26.607
> 
> 标签：c++, vector, c++11, heap, std

我迷失在标准堆函数上......似乎 push_heap 不尊重我输入的比较器。

编辑：我创建了无意义的 operator=()，这导致了错误。我修复了代码中的部分....

这是一个精简的示例：

```
#include <vector>
#include <iostream>
#include <algorithm>

using namespace std;

template<class T>
struct lt_entry: public binary_function <T, T, bool>
{
    bool operator()(const T &l, const T &r) const
    {
        cout << l._cost << " < " << r._cost << " ? " << (l._cost < r._cost) << endl;
        return l._cost < r._cost;
    }
};

template<typename T, class Cmp>
struct OrderedVector {
    vector<T> _c;

    inline void insert(T &&t) {
        _c.push_back(move(t));
        push_heap(_c.begin(), _c.end(), Cmp());
        cout << "i is heap: " << is_heap(_c.begin(), _c.end(), Cmp()) << endl;
    }

    inline T extract_min() {
        pop_heap(_c.begin(), _c.end(), Cmp());
        T t = move(_c.back());
        _c.pop_back();
        cout << "e is heap: " << is_heap(_c.begin(), _c.end(), Cmp()) << endl;
        return move(t);
    }

    inline bool empty() const {
        return _c.empty();
    }
};

struct Entry
{
    float _cost;

    Entry(Entry &&ofs) :
        _cost(ofs._cost)
    {
    }

    //This caused the error
    //Entry operator=(Entry &&e) {
    //  return Entry(move(e));
    //}

    Entry& operator=(Entry &&e) {
        _cost = e._cost;
        return *this;
    }

    Entry(float cost) : _cost(cost)
    {
    }
};

typedef  OrderedVector<Entry, lt_entry<Entry> > OrderedContainer;

int main() {

    OrderedContainer h; // Doesn't work, breaks heap on second insertion

    h.insert(Entry(200.1));
    h.insert(Entry(100.1));
    h.insert(Entry(300.1));
} 
```

编译器是 gcc 4.7.2，带有 g++ heaps.cpp -std=c++0x -Wall -O3。

输出是：

```
i is heap: 1
200.1 < 100.1 ? 0
200.1 < 100.1 ? 0
i is heap: 1
200.1 < 300.1 ? 1
200.1 < 100.1 ? 0
200.1 < 300.1 ? 1
i is heap: 0 <---- Heap is broken... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:11:30.310

Entry 的（移动）赋值运算符实际上并没有修改`this->cost_`，或者根本没有任何内容`*this`。所有执行的交换/移动分配`make_heap`什么都不做。

# c++ - C 中的变量声明 typedefs 约定

> ID：13865451
> 
> 赞同：0
> 
> 时间：2012-12-13T17:43:50.440
> 
> 标签：c++, c, coding-style

自从我开始在 CI 中编程以来，就知道/看到每个人在使用 typedef 声明变量时都使用以下约定，如下所示：

```
 int32_t *data_value;
   const int16_t *Order_Of_Mag;
   uint16_t min_change;
   uint8_t  eeprom_save_flag; 
```

我理解部分原因是不同架构之间的可移植性。有谁知道什么时候和/或什么标准规定了这种声明方法？

还有什么是处理需要使用 char 的标准库 (stdio.h) 函数的推荐方法，因为 char 既不是 uint8_t 也不是 int8_t（参见下面的示例函数）

```
sscanf(const char *format)
int atio(const char *s) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:03:37.523

我所知道的唯一要求您使用此类 typedef 的标准是项目/公司特定的编码约定。然后，这些编码约定还准确指定要使用的 typedef（甚至宏），因此它可能`UINT32`不是`uint32_t`您必须使用的

* * *

至于`char`,`uint8_t`或之间的选择`int8_t`，默认应该`char`用于字符数据（即字符串和字符）和`uint8_t`or`int8_t`用于小数字。

# fiddler - 如何使用 Fiddler 检查多个 URL 的响应码？

> ID：13865458
> 
> 赞同：2
> 
> 时间：2012-12-13T17:44:29.963
> 
> 标签：fiddler

请建议如何使用作曲家。有没有办法我可以只输入一个带有 URL 列表的文件并让 fiddler 为我检查这些链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:52:15.557

没有内置功能可以完全执行该功能，但您可以轻松编写执行此操作的脚本。使用`utilIssueRequest`Proxy 对象上的方法向目标 URL 发送请求。有关完整的脚本示例，请参阅[http://www.fiddler2.com/fiddler/dev/scriptsamples.asp](http://www.fiddler2.com/fiddler/dev/scriptsamples.asp)。

# sql - 在 SQL 中系统地更新列名

> ID：13865459
> 
> 赞同：0
> 
> 时间：2012-12-13T17:44:32.207
> 
> 标签：sql

我有几个表具有从 1 到 55 的相同列名。我想系统地更新它们。如 q1 至 q55 或 s1 至 s55。我可以做些什么来通过使用 SQL 来实现它？您的建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:09:24.333

大多数数据库支持以下内容：

```
alter table <tablename> rename column <dolname> to <newname> 
```

我会在 Excel 中生成一个脚本来执行此操作，然后运行它。

SQL Server 不支持这种语法。相反，您可以使用命令`sp_rename`。再一次，我会在 Excel 中设置语句以批量创建它们。

# installation - Maven在安装时将jar复制到不同的位置

> ID：13865464
> 
> 赞同：0
> 
> 时间：2012-12-13T17:44:57.140
> 
> 标签：installation, maven-3

我正在尝试在无法访问主 maven 存储库的隔离框中运行应用程序。我想知道是否可以创建一个 maven 插件来识别更改的快照并将其复制到隔离框，以便我可以在该隔离框上进行构建。这需要是临时的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:12:31.730

如果您对该隔离机器上的项目进行**maven 安装**，而该机器仍处于连接状态，则应将所有依赖项下载到该机器的本地存储库。

然后应该可以在断开连接后在该机器上构建。

# java - 单击时如何阻止textview字段闪烁

> ID：13865465
> 
> 赞同：0
> 
> 时间：2012-12-13T17:44:56.377
> 
> 标签：java, android

我正在为我的 android 创建一个计时器应用程序。它从指定时间（即 8 分钟）倒计时到 0。

我已经对其进行了编码，当应用程序启动时它会显示指定的时间。当您单击`TextView`显示时间时，它开始倒计时更新`TextView`事件`onTick()`。当您再次单击时`TextView`，它将停止倒计时并保存剩余的毫秒以`TextView`在下次单击时恢复（基本上暂停时钟）。

一切都按预期工作。但是，当`TextView`单击它时，它会消失，直到释放单击为止。如果我按住单击 3 秒钟，则在按住时`TextView`完全消失，并在释放后立即重新出现。

我怎样才能停止这种行为以继续显示`TextView`整个时间的价值？

编辑：

```
 tvPeriod.setOnLongClickListener( new View.OnLongClickListener() {           
        @Override
        public boolean onLongClick(View v) {
            valPeriod = 1;
            tvPeriod.setText( tvPeriodPrefix + "1" );

            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:56:17.610

You can probably do something like set the background to a color, or even transparent. Actually on the lower level, a Button is descended from a TextView, so that may explain why it can act like a Button.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:15:08.703

试试这个示例代码。

```
import android.os.Bundle;
import android.os.CountDownTimer;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

public class MainActivity extends Activity {
    TextView tv;
    CountDownTimer countDownTimer;
    boolean isRunning = false;
    long remainingTime = 90000;
    long elapsedTime = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tv = (TextView) findViewById(R.id.tv1);
        tv.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (isRunning) {
                    isRunning = false;
                    countDownTimer.cancel();
                    remainingTime = elapsedTime;
                } else {
                    countDownTimer = new CountDownTimer(remainingTime, 1000) {

                        public void onTick(long millisUntilFinished) {
                            elapsedTime = millisUntilFinished;
                            tv.setText("seconds remaining: "
                                    + millisUntilFinished / 1000);

                        }

                        public void onFinish() {
                            tv.setText("done!");
                        }
                    }.start();
                    isRunning = true;
                }

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

# java - 改进从客户端获取服务器 IP 地址的方式

> ID：13865467
> 
> 赞同：3
> 
> 时间：2012-12-13T17:45:01.150
> 
> 标签：java, sockets, networking, multicast

```
MulticastSocket multicast_socket = new MulticastSocket(Dialogos.MULTICAST_PORTA);
InetAddress group = InetAddress.getByName(Dialogos.MULTICAST_IP_GRUPO);
multicast_socket.joinGroup(group);
byte[] msg = new byte[1024];
DatagramPacket packet = new DatagramPacket(msg, msg.length);
multicast_socket.receive(packet); 
```

在上面的代码中，服务器通过多播接收来自客户端的请求。服务器现在应该让客户端知道它在“哪里”。这只是客户端猜测连接位置的一种方法，并不完全依赖它。

服务器可以安装在许多不同的环境中，所以我不知道哪个接口/地址将用于与客户端通信。因此，为了告诉客户端它在哪里，我正在编译服务器中所有可用的 IP 地址，并将它们全部发送回多播，以便客户端可以尝试它们直到成功。

我的问题：有没有办法改进这个机制？我想知道，在服务器应用程序上，我是否可以获取从客户端接收多播的本地 ip，然后我会知道要发回哪个。虽然找不到这样做的方法。也许某种方式尝试连接到客户端只是为了知道它会选择哪个本地地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:19:40.597

只需将单播 UDP 数据包发送回客户端，客户端就可以提取源 IP 地址。这将确保它是客户端和服务器可以相互通信的接口/路由上的地址。当然，您将需要该数据包以某种方式告诉侦听端口号。

# c - GCC 4.7.0 运行时问题 - 接收信号 11 (SigSegv)

> ID：13865470
> 
> 赞同：0
> 
> 时间：2012-12-13T17:45:17.043
> 
> 标签：c, signals, posix

以下是我从管道函数中读取的代码片段。这可以正确执行并验证数据是否已进入缓冲区。

```
int readFrom(char *buffer)
{
int nread;

if((nread = read(readfd,buffer,100)) < 0)
{
    printf("\nerror in reading data from FIFO\n");
    return(-1);
}
buffer[nread]='\0';
return(0);
} 
```

在上面的示例中， nread 小于 100 。我正在使用 GCC-4.7.0。

我们为上述函数提供了一个抽象层，如下所示：

```
int pipe_input(char *parmPtr, int size)
{

char readMsg[100];

if( readFrom((char *)&readMsg) == -1)
  return ERROR;

if (strlen(readMsg) < 1)
{
    printf("Incorrect Input\n");
    return ERROR;
}
strncpy(parmPtr, readMsg, ((size < 100)?size:100));

return 0; 
```

}

在上述函数中，也验证了读取消息是正确的，并且 parmptr 正确加载了该值。但是在我试图调用 pipe_input 的函数中，我得到了一个 sigsegv。GCC-4.7.0 会发生这种情况，但使用 GCC-4.2.4 编译的相同代码可以正常执行。我验证了警告，但上述没有警告。任何指针都会非常有帮助。

下面是调用 pipe_input 的代码片段：

```
int Calling_func(void)
{
  char alpha[100] ;

  pipe_input(alpha,100);
  printf("alpha value is %s \r\n",alpha);
} 
```

在 print 语句中获取 sigsegv。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:19:58.417

您的代码中有一个错误。您的数组有 100 个元素，但您没有考虑 NULL 终止：

```
strncpy(parmPtr, readMsg, ((size < 100)?size:100)); 
```

和：

```
buffer[nread]='\0'; 
```

最后一个元素是`buffer[99]`（因为数组索引从 0 开始，而不是 1），但您可以写入`buffer[100]`. 这可能会导致段错误。

您可能应该改为声明所有大小为 101 的数组，看看它是否有帮助。如果你在 Linux 上，你也应该在 Valgrind 中运行你的程序；它可以准确地告诉您段错误是如何发生的。

# java - 直接从 JSP 向 Java 类发送数据？

> ID：13865474
> 
> 赞同：-3
> 
> 时间：2012-12-13T17:45:26.387
> 
> 标签：java, jsp

有什么方法可以在不使用 Servlet 的情况下将数据从 JSP 页面传递到 JAVA 类？我有一个不使用 servlet 发送到 JAVA 类的表单。我也不想为此目的使用 Struts1。

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:52:11.317

Servlet 是与 jsp 结合的一个不错的选择 - 为什么您忽略它？
签出 scriptlet 标签`<% %>` `<%= %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:53:41.413

从 JSP 页面调用 java 代码的不同方式

1.  直接调用Java代码

    将所有 Java 代码放在 JSP 页面、scriptlet 中。仅适用于非常少量的代码。

2.  间接调用 Java 代码

    开发单独的实用程序类。将调用实用程序类所需的 Java 代码插入 JSP 页面。

3.  使用 bean（标准操作）

    开发结构为 bean 的单独实用程序类。使用 jsp:useBean、jsp:getProperty 和 jsp:setProperty 来调用代码。

4.  使用 MVC 架构

    *我看到您不想使用 servlet。*

5.  使用 JSP EL

    使用速记语法访问和输出对象属性。通常与 bean 和 MVC 结合使用。

6.  使用自定义标签

    开发标记处理程序类或使用标记库 (JSTL)。

# android - 有没有办法免费向某人提供 Android 应用内订阅？

> ID：13865478
> 
> 赞同：1
> 
> 时间：2012-12-13T17:45:44.053
> 
> 标签：android, google-play, in-app-billing

不久前我看到过类似的帖子，说这样做的唯一方法是让该人实际购买订阅，然后我可以处理退款。是否有任何更新，或者这仍然是给特定人免费订阅的唯一方法？

我的一个朋友有一个 iPhone 应用程序的解决方案... 免费请求该应用程序的人给了我朋友他们的 UDID，我的朋友将其放入数据库中。应用程序每次运行时都会检查数据库中的特定 UDID，如果存在，则提供订阅内容。否则，必须购买。

但这对 Android 来说似乎不可行，因为 Android 设备[并没有真正的唯一 ID](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)；无论如何，我不知道用户如何在 Android 上找到这个设备 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:55:07.417

Not a subscription to the best of my knowledge, unless you set them up with a test account. For refunds for in app managed items, you can control what a refund does however and hence it's up to you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:51:45.497

使用测试帐户设置用户。测试帐户基于电子邮件地址工作。如果您提供他们的 Google 电子邮件地址，它应该允许您做任何事情，包括为他们提供免费订阅。

# debugging - Android/IOS 设备浏览器中的 HTML/CSS/JS 调试器

> ID：13865492
> 
> 赞同：0
> 
> 时间：2012-12-13T17:46:42.127
> 
> 标签：debugging, firebug

我开发了很多网站，我在 IE 上使用开发人员工具 / 在 Firefox 和 Chrome 上使用 firebug 也具有用于编辑和调试的检查元素功能。但是当我开始为 Android/IOS 浏览器开发时，我不知道如何编辑和调试。

有什么办法可以做到这一点，因为它消耗了我的很多精力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T09:45:12.463

[weinre](http://people.apache.org/~pmuellr/weinre/docs/1.x/1.5.0/)正是您要找的！将库导入您的 index.html 并使其指向您的本地 weinre 服务器或[此处](http://debug.phonegap.com/)，您将设备控制台导入 chrome。很直接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:51:22.477

您可能应该使用远程调试器，例如[Pony](http://corner.squareup.com/2012/08/ponydebugger-remote-debugging.html)或[使用 Firefox](https://hacks.mozilla.org/2012/08/remote-debugging-on-firefox-for-android/)。您也可以在 IOS 上使用[Safari来执行此操作。](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/)

# javascript - Javascript/HTML 适用于除 IE9 和真正旧的 IE 之外的所有内容

> ID：13865496
> 
> 赞同：-1
> 
> 时间：2012-12-13T17:47:19.520
> 
> 标签：javascript, css, html, internet-explorer-9

[www.americanmedicalbuildings.com/ourwork.html](http://www.americanmedicalbuildings.com/ourwork.html)

自从更新到 HTML 5，在“组合”下 - 即按类型查看..我无法在 IE9 上使用下拉菜单。它适用于 Opera、Safari、Chrome、IE8、Firefox 和移动设备。

我还收到错误 Uncaught TypeError: Cannot read property 'style' of null

```
 // JavaScript Document

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
} 

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
   var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-     2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src;    x.src=a[i+2];}
}

function showLayer(whichLayer){
    document.getElementById(whichLayer).style.display = "block";
}

 function hideLayer(whichLayer){
    document.getElementById(whichLayer).style.display = "none";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:07:20.560

您在尝试创建元素的 MooTools 库中有错误

```
SCRIPT5022: DOM Exception: INVALID_CHARACTER_ERR (5) 
```

您需要升级 mootools 版本以消除错误，因为您拥有的版本不支持 IE9。

# symfony - 翻译不起作用

> ID：13865501
> 
> 赞同：0
> 
> 时间：2012-12-13T17:47:45.220
> 
> 标签：symfony, yaml

我在 config.yml 中有以下代码：

```
framework:
#esi:             ~
translator:     { fallback: pt_BR }
secret:          %secret%
charset:         UTF-8
router:          { resource: "%kernel.root_dir%/config/routing.yml" }
form:            true
csrf_protection: true
validation:      { enable_annotations: true }
templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
session: 
    default_locale: pt_BR
    auto_start: true 
```

在`MyBundle/Resources/translations`我的文件中是：`MyBundle.pt_BR.yml`.

文件中翻译的一个例子是：

`form_my_height: "Altura"`

在我的表格中：

`$builder->add('height')`

当我第一次清除缓存并刷新页面时，会加载翻译，但是当我转到另一个页面时，它会停止运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:55:02.550

或者您可以让模板翻译您的标签

php:

```
$builder->add('height', 'text', array('label' => 'form_my_height'); 
```

枝条：

```
{{ form_label(form.height)|trans }}
{{ form_widget(form.height) }}
{{ form_errors(form.height) }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:34:06.537

我相信你必须去：

```
$builder->add($this->get('translator')->trans('form_my_height')) 
```

如果您在控制器中，如果不是，则需要传递翻译服务参考，并且：

```
$builder->add($translator->trans('form_my_height')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:40:26.440

也许尝试：

```
$builder->add('height', 'text', array('label' => 'form_my_height', 'translation_domain' => 'MyBundle')); 
```

# ruby-on-rails - Rails 在查询 UI 模式中使用选择列表

> ID：13865503
> 
> 赞同：0
> 
> 时间：2012-12-13T17:47:59.557
> 
> 标签：ruby-on-rails, jquery-ui, fullcalendar

我正在使用 query-ui - Dialog - Basic Modal 为 Fullcalender 事件制作弹出表单。它工作得很好。但是，我想添加一个选项列表作为模式中的输入字段之一。

以下作为测试工作：

```
<div id="dialog-form" style="display: none" title="Create new event">
<form>
<fieldset>
  <label for="workorder">Workorder</label>
  <select  name="workorder">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
    <option value="5">Option 5</option>
  </select>
  <label for="title">Title</label>
  <input type="text" name="title" id="title" class="text ui-widget-content ui-corner-all" />
  <label for="description">Description</label>
  <input type="text" name="description" id="description" value="" class="text ui-widget-content ui-corner-all" />
  <label for="hours">Hours (All Day ONLY)</label>
  <input type="floating" name="hours" id="hours" value="" class="text ui-widget-content ui-corner-all" />
</fieldset>
</form>
</div> 
```

模式将选择值显示为选项 - 到目前为止很好。

现在我想用我的工单表中的数据填充选项。

我该怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:18:01.157

想通了=

```
 <%= collection_select(:workorder, :id, Workorder.all, :id, :wonum) %> 
```

# iphone - 将数据写入iphone中的文件时出错

> ID：13865506
> 
> 赞同：0
> 
> 时间：2012-12-13T17:48:03.050
> 
> 标签：iphone, objective-c, xcode

在我的应用程序中，我放置了一个空的

1.  我的文件.txt

当我有互联网连接时，我从互联网获取 json 数据并使用以下代码将 json 字符串保存在其中

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"myFile" ofType:@"txt"];
[myString writeToFile:filePath automatically:YES encoding:NSUTF... error:nil];

//now while retrieving it when no internet connection
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"myFile" ofType:@"txt"];
NSString *myString = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF..  error:nil]; 
```

现在 myString 返回`@""`... 为什么我无法写入数据？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:57:19.307

无论您想做什么（或至少强烈不鼓励）更新应用程序包中的文件都是不可能的。

如果您正在下载文件并希望将它们存储在设备上，您应该使用 Documents 目录。您可以使用以下命令获取此目录的路径：

```
- (NSString *)getDocumentsDirectory {  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    return [paths objectAtIndex:0];  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:10:40.057

首先检查天气内容正在写入文件。您可以在 xcode 中查看该文件。我的建议是当你运行应用程序时创建这个空文件。然后您可以轻松地读取和写入该文件。

尝试使用下面的代码：

```
 NSError* error = nil;
 NSString* jsonFileName = [NSString stringWithFormat:@"myfile"];
 NSString* jsonPath = [[NSBundle mainBundle] pathForResource:jsonFileName    
    ofType:@"txt"];
 NSString* jsonString = [NSString stringWithContentsOfFile:jsonPath 
          encoding:NSUTF8StringEncoding error:&error]; 
```

文件目录：

写入文件

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains
        (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    //make a file name to write the data to using the documents directory:
    NSString *fileName = [NSString stringWithFormat:@"%@/textfile.txt", 
                                                  documentsDirectory];
    //create content - four lines of text
    NSString *content = @"One\nTwo\nThree\nFour\nFive";
    //save content to the documents directory
    [content writeToFile:fileName 
                     atomically:NO 
                           encoding:NSStringEncodingConversionAllowLossy 
                                  error:nil]; 
```

显示内容：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains
                    (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    //make a file name to write the data to using the documents directory:
    NSString *fileName = [NSString stringWithFormat:@"%@/textfile.txt", 
                                                  documentsDirectory];
    NSString *content = [[NSString alloc] initWithContentsOfFile:fileName
                                                  usedEncoding:nil
                                                         error:nil]; 
```

# arrays - 我可以设置多少个参数

> ID：13865511
> 
> 赞同：2
> 
> 时间：2012-12-13T17:48:17.293
> 
> 标签：arrays, shell, parameters

我有这个问题：运行时

```
./choose_words.sh $NWORDS_s1 $NWORDS_s2 $NWORDS_s3 $NWORDS_s4 
```

在choose_words 中，does 之后`nwords=($1 $2 $3 $4)`，`$4`似乎不包含任何值。因此，如果尝试打印：

```
echo ${nwords[4]} # I get nothing from this 
```

而如果我尝试打印`echo ${nwords[*]}`，则数组`nwords`实际上具有第四个元素及其实际值。

这对你有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:51:28.403

数组索引从 开始`0`，因此需要使用`${nwords[3]}`来获取数组的第四个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T17:51:29.043

数组索引从 0 开始，而不是 1 ;)

IE：

```
echo ${nwords[0]} # This is the 1st element, corresponding to $1
echo ${nwords[1]} # This is the 2nd element, corresponding to $2
echo ${nwords[2]} # This is the 3rd element, corresponding to $3
echo ${nwords[3]} # This is the 4th element, corresponding to $4 
```

# ruby-on-rails - 无法在 EC2 机器上启动 SOLR - 未检测到 gem

> ID：13865513
> 
> 赞同：1
> 
> 时间：2012-12-13T17:48:21.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, solr, sunspot

我最近在我的 Amazon EC2 机器上安装了 SOLR，当我尝试使用 启动 SOLR 时`RAILS_ENV=production bundle exec rake sunspot:solr:start --trace`，我收到以下消息：

```
** Invoke sunspot:solr:run (first_time)
** Invoke sunspot:solr:moved_to_sunspot_solr (first_time)
** Execute sunspot:solr:moved_to_sunspot_solr

Note: This task has been moved to the sunspot_solr gem. 
To install, start and stop a local Solr instance, please add sunspot_solr to your Gemfile:

group :development do
  gem 'sunspot_solr'
end 
```

但是，我已经包含`sunspot_solr`在我的 Gemfile 中并且我的 RAILS_ENV 是生产的（我也尝试过`export RAILS_ENV=production`。**关于为什么 SOLR 无法启动并继续尝试在开发中运行的任何提示？**我按照此链接安装它 - [http： //tanin.nanakorn.com/b/96/tomcat_and_solr_on_ec2](http://tanin.nanakorn.com/b/96/tomcat_and_solr_on_ec2)

这是我的 Gemfile 的一部分：

```
group :development, :test do
  gem 'factory_girl_rails'
  gem "rspec-rails"
  gem 'faker'
  gem 'fuubar'
  gem 'pry'
  gem 'foreman'
  gem 'guard-spork'
  gem 'sunspot_solr'
end 
```

我已经跑过`bundle install`，看到 gem 正在被使用：

```
Using rsolr (1.0.8)
Using sunspot (1.3.0) 
Using sunspot_rails (1.3.0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:30:14.260

`sunspot_solr`gem 位于 Gemfile 的组`:development`中，当您指定`RAILS_ENV=production`. gem主要`sunspot_solr`是为了方便开发和测试，并没有特别针对生产进行调整，这就是文档建议将其包含在`:development`组中的原因。

如果您已按照链接的博客文章中描述的步骤进行操作，则实际上不需要使用 Sunspot 捆绑的 Solr 实例。在那篇文章的结尾，您应该在您的服务器上运行一个 Solr 服务器。（您必须仔细检查 Tomcat 配置以查看它在哪个端口上运行。）

如果我这么大胆，您可能还会从考虑云托管的 Solr 搜索（例如我自己的[websolr.com）](https://websolr.com)中受益。您应该能够在几分钟内建立并运行索引。

# mysql - Wordpress orderby meta_value 的第二个单词

> ID：13865514
> 
> 赞同：1
> 
> 时间：2012-12-13T17:48:27.877
> 
> 标签：mysql, wordpress, sql-order-by, explode, meta-key

我有一个页面模板“作者”（ID 1814）我用来查询我的帖子（标题：书名和内容：描述），meta_key：author_name，它等于书作者的名字和姓氏_但是，我想仅按作者的姓氏（meta_value 中的第二个单词）对这些帖子进行排序。我可以使用以下方法在循环中过滤获得这些结果：

```
$values = get_post_custom_values("author_name");
$alpha = end(explode(' ',$values[0])); 
```

但我不知道如何通过这个结果而不是作者姓名的名字来排序这些帖子。我在下面找到了 functions.php 文件的查询，我认为它让我走上了正确的道路，但在我使用它时在我的页面上返回了 404 错误。

来自这里的代码：[http ://randyhoyt.com/wordpress/custom-post-type-ordering/](http://randyhoyt.com/wordpress/custom-post-type-ordering/)

我什至还没有添加要爆炸的 SQL 查询（或者在 SQL 中而不是 PHP 中的任何内容）。不确定该代码是否不起作用，因为我正在查询页面模板而不是 archive.php 文件？有什么建议可以让我走上正确的道路吗？

```
add_filter('posts_join', 'author_join' );
function author_join($wp_join) {
    if(is_page(1814)) {
        global $wpdb;
        $wp_join .= " LEFT JOIN (
                SELECT post_id, meta_value as author_name
                FROM $wpdb->postmeta
                WHERE meta_key =  'author_name' ) AS DD
                ON $wpdb->posts.ID = DD.post_id ";
    }
    return ($wp_join);
}

add_filter('posts_orderby', 'author_order' );
function author_order( $orderby ) {
    if(is_page(1814)) {
            $orderby = " DD.post_title ASC";
    }
    return $orderby;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:39:55.117

我已经处理了一个类似的问题，其中以“The ...”开头的乐队名称在 T 处按字母顺序排列。我实施的修复是颠倒数据库中名称的顺序以满足 MySQL 查询，然后显示page 可以使用字符串函数将名称反转回正确的顺序。

显示页面上的类似内容可以修复输出：

```
// The author's name, reverse ordered.
$author_name = 'Doe,John';

// Break the full name into its parts.
list($last_name,$first_name) = explode(',',$author_name);

// Then display the name in the correct order.
echo(first_name.' '.last_name); 
```

# c# - 如何使用户控件像窗口一样在屏幕上可拖动

> ID：13865517
> 
> 赞同：7
> 
> 时间：2012-12-13T17:48:38.807
> 
> 标签：c#, wpf, xaml, draggable

我的 WPF 应用程序有一个`UserControl`看起来和行为都应该像弹出窗口的窗口，但它不是窗口。控件不属于`Window`该类的原因是因为它包含第三方虚拟屏幕键盘，并且该控件必须与`TextBox`当您单击其按钮时将输入字符发送到的控件位于同一窗口中. 如果键盘控件不在同一个窗口中，它甚至看不到`TextBox`控件。

我遇到的问题是拖动对话框时性能非常糟糕。鼠标离开拖动区域并停止跟随鼠标的速度足够慢。我需要一个更好的方法。

这是控件的 xaml 的摘录：

```
<Grid Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Border Background="{DynamicResource PopupBackground}"
            BorderBrush="{DynamicResource PopupBorder}"
            BorderThickness="5,5,5,0"
            MouseLeftButtonDown="Grid_MouseLeftButtonDown"
            MouseLeftButtonUp="Grid_MouseLeftButtonUp"
            MouseMove="Grid_MouseMove">
    . . .
    </Border>
</Grid> 
```

这是鼠标事件处理程序：

```
 private void Grid_MouseLeftButtonDown( object sender, MouseButtonEventArgs e ) {
        Canvas canvas = Parent as Canvas;
        if ( canvas == null ) {
            throw new InvalidCastException( "The parent of a KeyboardPopup control must be a Canvas." );
        }
        DraggingControl = true;
        CurrentMousePosition = e.GetPosition( canvas );
        e.Handled = true;
    }

    private void Grid_MouseLeftButtonUp( object sender, MouseButtonEventArgs e ) {
        Canvas canvas = Parent as Canvas;
        if ( canvas == null ) {
            throw new InvalidCastException( "The parent of a KeyboardPopup control must be a Canvas." );
        }

        if ( DraggingControl ) {
            Point mousePosition = e.GetPosition( canvas );

            // Correct the mouse coordinates in case they go off the edges of the control
            if ( mousePosition.X < 0.0 ) mousePosition.X = 0.0; else if ( mousePosition.X > canvas.ActualWidth ) mousePosition.X = canvas.ActualWidth;
            if ( mousePosition.Y < 0.0 ) mousePosition.Y = 0.0; else if ( mousePosition.Y > canvas.ActualHeight ) mousePosition.Y = canvas.ActualHeight;

            // Compute the new Left & Top coordinates of the control
            Canvas.SetLeft( this, Left += mousePosition.X - CurrentMousePosition.X );
            Canvas.SetTop( this, Top += mousePosition.Y - CurrentMousePosition.Y );
        }
        e.Handled = true;
    }

    private void Grid_MouseMove( object sender, MouseEventArgs e ) {
        Canvas canvas = Parent as Canvas;
        if ( canvas == null ) {
            // It is not.  Throw an exception
            throw new InvalidCastException( "The parent of a KeyboardPopup control must be a Canvas." );
        }

        if ( DraggingControl && e.LeftButton == MouseButtonState.Pressed ) {
            Point mousePosition = e.GetPosition( canvas );

            // Correct the mouse coordinates in case they go off the edges of the control
            if ( mousePosition.X < 0.0 ) mousePosition.X = 0.0; else if ( mousePosition.X > canvas.ActualWidth  ) mousePosition.X = canvas.ActualWidth;
            if ( mousePosition.Y < 0.0 ) mousePosition.Y = 0.0; else if ( mousePosition.Y > canvas.ActualHeight ) mousePosition.Y = canvas.ActualHeight;

            // Compute the new Left & Top coordinates of the control
            Canvas.SetLeft( this, Left += mousePosition.X - CurrentMousePosition.X );
            Canvas.SetTop ( this, Top  += mousePosition.Y - CurrentMousePosition.Y );

            CurrentMousePosition = mousePosition;
        }
        e.Handled = true;
    } 
```

请注意，该控件必须放在`Canvas`使用它的窗口中的 a 内。

我不能使用`DragMove`它，因为它是该类的方法，`Window`并且该类从`UserControl`. 如何提高此控件的拖动性能？我必须求助于 Win32 API 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T18:42:35.553

您可以简单地使用[MouseDragElementBehavior](http://msdn.microsoft.com/en-us/library/ff723922%28v=Expression.40%29.aspx)。

**UPD** 关于`MouseDragElementBehavior`行为的重要事项：

*MouseDragElementBehavior 行为不适用于处理 MouseClick 事件的任何控件（例如，Button、TextBox 和 ListBox 控件）。如果您需要能够拖动其中一种类型的控件，请将该控件设置为可拖动控件（例如边框）的子控件。然后，您可以将 MouseDragElementBehavior 行为应用到父元素。*

您还可以像这样实现自己的拖动行为：

```
public class DragBehavior : Behavior<UIElement>
{
    private Point elementStartPosition;
    private Point mouseStartPosition;
    private TranslateTransform transform = new TranslateTransform();

    protected override void OnAttached()
    {
        Window parent = Application.Current.MainWindow;
        AssociatedObject.RenderTransform = transform;

        AssociatedObject.MouseLeftButtonDown += (sender, e) => 
        {
            elementStartPosition = AssociatedObject.TranslatePoint( new Point(), parent );
            mouseStartPosition = e.GetPosition(parent);
            AssociatedObject.CaptureMouse();
        };

        AssociatedObject.MouseLeftButtonUp += (sender, e) =>
        {
            AssociatedObject.ReleaseMouseCapture();
        };

        AssociatedObject.MouseMove += (sender, e) =>
        {
            Vector diff = e.GetPosition( parent ) - mouseStartPosition;
            if (AssociatedObject.IsMouseCaptured)
            {
                transform.X = diff.X;
                transform.Y = diff.Y;
            }
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T16:09:26.993

根据@DmitryMartovoi 的回答中的信息，我想出了一种方法来完成这项工作。我仍然给 Dmitry 一个 +1，因为如果没有他的贡献，我将无法弄清楚这一点。

我所做的是我在构造函数中创建了一个`TranslateTransform`并将`UserControl's`其分配给它的`RenderTransform`属性：

```
RenderTransform = new TranslateTransform(); 
```

在 XAML 中，我`Border`将用户单击以拖动整个控件的控件命名为：

```
<Border Background="{DynamicResource PopupBackground}"
        BorderBrush="{DynamicResource PopupBorder}"
        BorderThickness="5,5,5,0"
        MouseLeftButtonDown="Grid_MouseLeftButtonDown"
        MouseLeftButtonUp="Grid_MouseLeftButtonUp"
        MouseMove="Grid_MouseMove"
        Name="TitleBorder">

    . . .
</Border> 
```

最后，我修改了各种鼠标事件处理程序，如下所示：

```
private void Grid_MouseLeftButtonDown( object sender, MouseButtonEventArgs e ) {
    CurrentMousePosition = e.GetPosition( Parent as Window );
    TitleBorder.CaptureMouse();
}

private void Grid_MouseLeftButtonUp( object sender, MouseButtonEventArgs e ) {
    if ( TitleBorder.IsMouseCaptured ) {
        TitleBorder.ReleaseMouseCapture();
    }
}

private void Grid_MouseMove( object sender, MouseEventArgs e ) {
    Vector diff = e.GetPosition( Parent as Window ) - CurrentMousePosition;
    if ( TitleBorder.IsMouseCaptured ) {
        ( RenderTransform as TranslateTransform ).X = diff.X;
        ( RenderTransform as TranslateTransform ).Y = diff.Y;
    }
} 
```

这很好用。当您拖动 时，整个`UserControl`内容及其所有内容都会平滑移动`Border`，与鼠标保持同步。如果您单击其表面上的任何其他位置，则整个`UserControl`不会移动。

再次感谢@DmitryMartovoi 提供的代码。

编辑：我正在编辑这个答案，因为上面的代码虽然有效，但并不完美。它的缺陷是当您单击标题栏区域并开始拖动之前，控件会弹回屏幕上的原始位置。这很烦人，而且完全错误。

我想出的方法实际上完美无缺，首先将控件放入`Canvas`. 控件的父级是 a 很重要，`Canvas`否则下面的代码将不起作用。我也停止使用`RenderTransform`. 我添加了一个名为`canvas`type的私有属性`Canvas`。我`Loaded`在弹出控件中添加了一个事件处理程序来进行一些重要的初始化：

```
private void KeyboardPopup_Loaded( object sender, RoutedEventArgs e ) {
    canvas = Parent as Canvas;
    if ( canvas == null ) {
        throw new InvalidCastException( "The parent of a KeyboardPopup control must be a Canvas." );
    }    
} 
```

完成所有这些后，以下是修改后的鼠标事件处理程序：

```
private void TitleBorder_MouseLeftButtonDown( object sender, MouseButtonEventArgs e ) {
    StartMousePosition = e.GetPosition( canvas );
    TitleBorder.CaptureMouse();
}

private void TitleBorder_MouseLeftButtonUp( object sender, MouseButtonEventArgs e ) {
    if ( TitleBorder.IsMouseCaptured ) {
        Point mousePosition = e.GetPosition( canvas );
        Canvas.SetLeft( this, Canvas.GetLeft( this ) + mousePosition.X - StartMousePosition.X );
        Canvas.SetTop ( this, Canvas.GetTop ( this ) + mousePosition.Y - StartMousePosition.Y );
        canvas.ReleaseMouseCapture();
    }
}

private void TitleBorder_MouseMove( object sender, MouseEventArgs e ) {
    if ( TitleBorder.IsMouseCaptured && e.LeftButton == MouseButtonState.Pressed ) {
        Point mousePosition = e.GetPosition( canvas );

        // Compute the new Left & Top coordinates of the control
        Canvas.SetLeft( this, Canvas.GetLeft( this ) + mousePosition.X - StartMousePosition.X );
        Canvas.SetTop ( this, Canvas.GetTop ( this ) + mousePosition.Y - StartMousePosition.Y );
        StartMousePosition = mousePosition;
    }
} 
```

当您单击标题栏以第二次移动它时，控件将停留在您放置它的位置，并且仅当您单击标题栏时它才会移动。单击控件中的其他任何位置都不会执行任何操作，并且拖动非常流畅且响应迅速。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-08T13:07:03.767

[http://www.codeproject.com/Tips/442276/Drag-and-Drop-WPF-Controls](http://www.codeproject.com/Tips/442276/Drag-and-Drop-WPF-Controls) 这是我花了很多时间后得到的很棒的解决方案。尽管此处显示的示例是普通控件，但经过一些更改后，您也可以使其适用于用户控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T18:20:58.020

我对此的解决方案是@DmitryMartovoi 和这个线程之间的混合：[https ://www.codeproject.com/Questions/1014138/Csharp-WPF-RenderTransform-resets-on-mousedown](https://www.codeproject.com/Questions/1014138/Csharp-WPF-RenderTransform-resets-on-mousedown)

我唯一的改变来自@DmitryMartovoi 的答案是鼠标左键向下。当您第一次单击它时，这会阻止它传送。为此，您还需要`Systems.Windows.Interactivity.WPF`Nuget 包。

```
AssociatedObject.MouseLeftButtonDown += (sender, e) =>
{
    var mousePos = e.GetPosition(parent);
    mouseStartPosition = new Point(mousePos.X-transform.X, mousePos.Y-transform.Y);
    AssociatedObject.CaptureMouse();
}; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-09-26T09:15:59.510

只需执行`MouseDown`事件并在执行中放置`this.DragMove();`

例子：

```
<StackPanel MouseDown="UIElement_OnMouseDown">

</StackPanel> 
```

```
 void UIElement_OnMouseDown(object sender, MouseButtonEventArgs e)
{
    this.DragMove();
} 
```

# php - AS3 转 PHP，JSON 类型错误？C/Ping 字符串有效，$_posting JSON 本身无效

> ID：13865518
> 
> 赞同：0
> 
> 时间：2012-12-13T17:48:41.117
> 
> 标签：php, mysql, json, actionscript-3, flash

我将一个`JSON`对象从 flash传递`AS3`到`PHP`，然后将其拆开并传递给 DB。

```
In Flash:
    var jsonObject:Object = JSON.encode(currentlySelectedArray);

In PHP:
    $json_pieces_array = $_POST['jsonArray'];
    $json_obj = json_decode($json_pieces_array, true); 
```

**当我通过复制/粘贴“trace (saveDataJSON.ToString());”**的输出来测试我的代码时 并将其放入我**的 '$_POST['jsonArray'] = '[[Valid JSONLint checked JSON here.]]'**中，一切正常并被推送到数据库。

但是当我不干预和使用 flash-sent`$_POST`时，没有任何东西会推送到 MYSQL DB。

**我的问题是双重的：**

1）对这种复杂情况进行错误测试的最佳方法是什么？我在Flash界面。

2）我应该寻找什么样的东西？我已经检查了`JSON`正在编码的内容是否有效。我是否缺少某种奇怪的类型转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:41:12.917

首先，您必须调试来自闪存的请求。您可以通过以下几种方式做到这一点：

*   创建虚拟文件`var_dump($_REQUEST);`；
*   添加`file_put_contents('my_dump_file.txt', var_export($_REQUEST, true));`现有脚本；
*   检查您的网络服务器日志；
*   使用调试器（xdebug 或类似）调试您的脚本。

然后你应该检查你的 PHP 脚本。尝试`var_dump($_REQUEST);`在顶部和之前`json_decode`。它可能会在`$_POST['jsonArray']`其他地方被覆盖。

我想问题出在flash和php之间。在大多数情况下，只是拼写错误或`$_POST`与`$_GET`.

# android - 线程启动/停止在 android 上无法正常工作

> ID：13865519
> 
> 赞同：1
> 
> 时间：2012-12-13T17:48:57.193
> 
> 标签：android, multithreading, restart

我需要一些帮助来启动/停止我的怪物。
我们像这样生成：

```
for (int i = 0; i < 20; i++) {
    boolean notFree = true;
    int x = 0, y = 0;
    // while not free change
    // not determinstisch setting!
    while (notFree) {
        x = (int) (Math.random() * Config.XSIZE);
        y = (int) (Math.random() * Config.YSIZE);
        if (map.getMapPosition(x, y) == Config.EMPTYPOSITION) {
            notFree = false;
        }
    }
    switch ((int) Math.floor(Math.random() * 2)) {
    case 0:
        monsterVerktor.add(new Monster(context, x, y, this.map, 1,
                this.charac));
        break;
    case 1:
        monsterVerktor.add(new DeathReaper(context, x, y, this.map, 1,
                this.charac));
        break;
    default:
        break;
    }
} 
```

我像这样阻止他们：（Start 与 Startmoving 相同......）

```
public void stopAllMonsters() {
    for (Monster monster : monsterVerktor) {
        monster.getControl().stopMovingThread();
    }
 } 
```

thread.stopMovingThread 的工作方式如下：

```
public void stopMovingThread() {
    this.monster.setAlife(false);
    running = false;
    moveDone = true;
    boolean retry = true;
    while (retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {
            // try again shutting down the thread
        }
    }
} 
```

运行（）：

```
public void startMovementThread() {
    running = true;
    thread = new Thread() {

        @Override
        public void run() {
            while (running) {
                Log.d(TAG, "run Thread");
                // get a little randomness in the movement ;)
                try {
                    // up to 0.5s sleeping till next moving
                    sleep(new Random().nextInt(Config.RANDOMSLEEP));
                } catch (InterruptedException e1) {}
                while (monster.isAlife()) {// check if alife
                    moveDone = false; // resett movement Done
                    noMove = false;
                    // Charakter in near if one is in near he
                    // will move to it.
                    if (!checkCharInAggroRange()) {
                        noMove = rndMove(); // if we have no move
                    }
                    while (!moveDone) {
                        timeBegin = System.currentTimeMillis();
                        // if hes not done with the move
                        if (monster.moveToX == monster.positionX
                            && monster.moveToY == monster.positionY) {
                            if (noMove) {
                                try {// sleep because no movement with a bit
                                        // randomness
                                    sleep(Config.MONSTERMOVINGTIME
                                        + (new Random()
                                                .nextInt(Config.RANDOMSLEEP)));
                                } catch (InterruptedException e) {
                                    Log.d(TAG,
                                        "An error occured during sleep because"
                                            + " of no Animatino");
                                }
                            }
                            // false after sleep
                            moveDone = false;
                            break; // already at the right position!
                            // movetoX is left of position
                        } else if (monster.moveToX > monster.positionX) {
                            monster.positionX++;
                            // movetoX is left of it
                        } else if (monster.moveToX < monster.positionX) {
                            monster.positionX--;
                            // movetoY is left of position
                        } else if (monster.moveToY > monster.positionY) {
                            monster.positionY++;
                            // movetoY is left of position
                        } else if (monster.moveToY < monster.positionY) {
                            monster.positionY--;
                        }
                        // sleep if hes moving to fast!
                        timeDiff = System.currentTimeMillis() - timeBegin;
                        sleepTimer = (int) (Config.MONSTERTIMING - timeDiff);
                        if (sleepTimer > 0) { // if >0 we are fast enough
                            // and can sleep a bit ;)
                            try {
                                sleep(sleepTimer);
                            } catch (InterruptedException e) {
                                Log.d(TAG, "Gameloop thread cant sleep");
                            }
                        }
                    }
                }
                try {
                    sleep(Config.RESPAWNTIMER);
                } catch (InterruptedException e) {
                    Log.d(TAG, "Monsterthread cant sleep");
                }
                // respawn it after a sleep :)
                respawn();
            }
        }
    };
    thread.start();
} 
```

如果我们想阻止它们并像这样启动它们，Android 就会停止工作，我不明白为什么。我们也像这样停止/开始我们的渲染。（嗯，这是一个可运行的，这不是）

Monster isAlife 等：

```
public class Monster extends Drawable {

    private static final String TAG = Monster.class.getSimpleName();
    private int fullLife; // full life
    private int curLife; // current life
    public Context context;
    private Character charac;
    // ..
    // Basic monsterstuff
    private boolean alife, moveDone;
    private int level;
    public Status status;
    private MonsterControl control;

    // ..
    public Monster(Context context, int mapPosX, int mapPosY, Map map,
            int level, Character cha) {
        this.context = context;
        this.map = map;
        this.setCharac(cha);
        this.mapPosition[0] = mapPosX;
        this.mapPosition[1] = mapPosY;
        this.status = Status.IDLE;
        // example for full life calculation
        this.fullLife = level * 100 + ((int) (Math.random() * 10 * level)); // Examples
        this.curLife = this.fullLife;
        this.map.setMapPosition(mapPosX, mapPosY, Config.MONSTERSTATE);
        // set monster position
        // ..
        // load the sprite bitmap
        // ...
        // Change this later!
        alife = true;
        Log.d(TAG, "Monster created");
        // Starting the Controler
        control = new MonsterControl(this, this.charac);
        control.startMovementThread();
        Log.d(TAG, "Monster start moving");
        // exemplarisch cut of the sprite
        this.monsterPicAnimation();
    }
} 
```

这里是 aLife 的 getter/setter

```
public boolean isAlife() {
    return alife;
}

public void setAlife(boolean alife) {
    this.alife = alife;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:58:59.387

首先，您对“Android 停止工作”的评论，您是在暗示崩溃吗？有 LogCat 跟踪吗？

除此之外，这个分析是否正确？

1.创造一个怪物。

```
running = true;
isAlife = true; //or whatever monster.isAlife() checks 
```

2.线程开始。

```
while (running) {
  ...
  while (monster.isAlife()) {
    ...
  }
} 
```

3.您尝试通过 (1) 将 running 设置为 false 和 (2) 加入线程来停止线程？

* * *

假设这一切都是真的。怪物线程仍然运行，直到有东西从嵌套`while(monster.isAlife())`循环中踢出来。一旦结束，`while(running)`将评估为 false 并且线程应该终止，继续处理您集合中的下一个怪物。如果没有终止，您将等待每个怪物死亡，同时使用`join()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:51:43.283

除了我没有详细查看的代码逻辑之外，共享变量缺乏同步。特别是，实际上，您的代码不能保证您的线程（in `startMovementThread`）将能够观察到从主线程对标志所做的更改。

一个好的第一步是使这些变量易变：

```
private volatile boolean alife, moveDone; 
```

但是请注意，可能还有其他问题（取决于您的要求）。例如，当这些语句在 中执行时`startMovementThread`：

```
if (monster.moveToX == monster.positionX ...)
monster.positionX++; 
```

在该线程中所做的任何更改都可能在主线程中不可见，反之亦然。如果这可能是一个问题，您还需要同步对这些变量的访问（并且使它们变得易变是不够的，因为例如，`monster.positionX++`它不是原子的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:28:46.097

我自己用“好”的想法解决了这个问题。问题是，我让他们在某些时候睡觉。如果他们睡着了，它就不能停止/加入线程，甚至不看它是否“正在运行”。所以我用一个看起来像这样的小方法解决了它：

```
private void breakableSleep(int i, int intervall){
    int x = 0;
    while(running && x <= i){
        try {
            this.thread.sleep(intervall);
        } catch (InterruptedException e) {
            Log.d(TAG, "Monsterthread cant sleep");
        }
        x++;
    }
} 
```

它可以在每个间隔停止。当然这会花费一些电池，但没有找到任何其他方法以“快速”的方式阻止怪物，因为如果他们死了（重生），有些人会睡大约 3 秒我还重写了整个 startMovementThread，因为在我看来它看起来不太好.

此致

# c# - C# 新的泛型约束不使用最高构造函数

> ID：13865520
> 
> 赞同：-2
> 
> 时间：2012-12-13T17:48:59.860
> 
> 标签：c#, generics

本质上，我们得到的是：

```
public class A {
...
    public A() { ... }
...
}

public class B : A {
...
    public B() : base()
    { throw new Exception(); }
...
} 
```

但是之后：

```
public class Test<T>
    where T : A, new()
{
    public void doStuff() { B b = new B(); }
} 
```

并且没有抛出异常。这真的很混乱！我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:56:49.270

以下代码按预期引发异常。我想你没有正确使用你的测试类，因为你没有发布代码。

```
public MainWindow()
    {
        InitializeComponent();

        Test<B> myTest = new Test<B>();
        myTest.doStuff(); // throws exception in B()
    }

    public class A
    {
        public A() { }
    }

    public class B : A
    {
        public B()
            : base()
        {
            throw new Exception();
        }

    }

    public class Test<T> where T : A, new()
    {
        // I modified this because the intent is to use T correct?
        public void doStuff() { T test = new T(); }
    } 
```

# android - 如何将对象动态分配到堆中

> ID：13865524
> 
> 赞同：0
> 
> 时间：2012-12-13T17:49:16.490
> 
> 标签：android, sqlite

> **可能重复：**
> [如何超过方法代码的 65535 字节限制](https://stackoverflow.com/questions/13846340/how-to-exceed-65535-byte-limit-for-method-code)

我在堆中有超过 64kb 的数据，我该如何克服这个限制？

```
public class ProductList extends Activity {

    //Listview
    private ListView lv;

    // Listview Adapter
    ArrayAdapter<String> adapter;

    // Search EditText
    EditText inputSearch;

    // ArrayList for Listview
    ArrayList<HashMap<String, String>> productList;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_product_list);

        String as = System.getProperty("line.separator");

                ArrayList<String> products = new ArrayList<String>();

                products.add("Banana" +as+ "Its color is yellow.");
                products.add("Orange" +as+ "Orange is a sour fruit.");
                products.add("Onion" +as+ "Onion usually used on Pizza");
                products.add("Banana" +as+ "Its color is yellow.");
                products.add("Orange" +as+ "Orange is a sour fruit.");
                products.add("Onion" +as+ "Onion usually used on Pizza");
                products.add("Banana" +as+ "Its color is yellow.");
                products.add("Orange" +as+ "Orange is a sour fruit.");
                products.add("Onion" +as+ "Onion usually used on Pizza");
                products.add("Banana" +as+ "Its color is yellow.");
                products.add("Orange" +as+ "Orange is a sour fruit.");

        lv = (ListView) findViewById(R.id.list_view);
        inputSearch = (EditText) findViewById(R.id.inputSearch);

        // Adding items to listview
        adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.p_list,   products);
        lv.setAdapter(adapter);

        /**
         * Enabling Search Filter
         * */
        inputSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                ProductList.this.adapter.getFilter().filter(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub
            }
        });

    }

} 
```

这是问题的图像[https://dl.dropbox.com/u/15065300/problem-4.png](https://dl.dropbox.com/u/15065300/problem-4.png)

我是android新手，所以需要详细的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:01:40.043

Java 将方法的大小限制为 65535 字节。你可以做的是将你的 onCreate 方法分解成更小的方法，然后在你的 onCreate 中调用这些方法。

编辑：

您可以做的是创建一个单独的方法来填充您的列表。您需要在创建列表适配器之前调用它。

注意：尽管正如其他人所提到的，如果您有这么多像这样硬编码的值，通常被认为是不好的做法。建议将其更新为从数据库查询或从某种类型的文件（txt、xml）中读取。

```
public class ProductList extends Activity 
{
    //Listview
    private ListView lv;

    // Listview Adapter
    ArrayAdapter<String> adapter;

    // Search EditText
    EditText inputSearch;

    ArrayList<String> products = new ArrayList<String>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_product_list);

        lv = (ListView) findViewById(R.id.list_view);
        inputSearch = (EditText) findViewById(R.id.inputSearch);

        // Adding items to listview
        initProductList();
        adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.p_list, products);
        lv.setAdapter(adapter);

        /**
         * Enabling Search Filter
         * */
        inputSearch.addTextChangedListener(new TextWatcher() 
        {
            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                ProductList.this.adapter.getFilter().filter(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub
            }
        });
    }

    private void initProductList()
    {
        String as = System.getProperty("line.separator"); 
        products.add("Banana" +as+ "Its color is yellow.");
        products.add("Orange" +as+ "Orange is a sour fruit.");
        products.add("Onion" +as+ "Onion usually used on Pizza");
        products.add("Banana" +as+ "Its color is yellow.");
        products.add("Orange" +as+ "Orange is a sour fruit.");
        products.add("Onion" +as+ "Onion usually used on Pizza");
        products.add("Banana" +as+ "Its color is yellow.");
        products.add("Orange" +as+ "Orange is a sour fruit.");
        products.add("Onion" +as+ "Onion usually used on Pizza");
        products.add("Banana" +as+ "Its color is yellow.");
        products.add("Orange" +as+ "Orange is a sour fruit.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:45:10.140

你没有。您需要将数据存储在[SQLite 数据库](http://developer.android.com/guide/topics/data/data-storage.html#db)中，或从文件中读取。单个方法中的代码不能超过 64kB，虽然将其拆分为多个方法也可以，但这是一种糟糕的编码实践。

我**强烈**建议您将数据保存在 SQLite 数据库中。[这](http://www.vogella.com/articles/AndroidSQLite/article.html)是一个很好的教程。

# php - jQuery包含表单元素提交

> ID：13865527
> 
> 赞同：0
> 
> 时间：2012-12-13T17:49:39.087
> 
> 标签：php, jquery

从头开始重新配置 Joomla 组件。我正在尝试在我的组件中加入 AJAX 搜索功能。到目前为止，我有这个：

```
$(document).ready(function() {

    $('form').submit(function() {
        var results = $('form').serialize();
        var url = 'index.php?option=com_mls&task=ListData&format=raw&' + results;
        $('#test').html(url);
    });
}); 
```

这只需要将表单元素的值转储到 div 中。现在，它将显示文本字符串，但不显示`results`var。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:19:09.010

`$('form').serailize()`如果您的表单输入元素没有附加任何名称属性，那么您正在使用它 - 序列化会将其转换为密钥。那么当您序列化表单时，您将不会得到任何东西。

另外，由于您在表单的提交功能中..使用它可能会更好`$(this).serialize()`- 如果您在一页上有多个表单 - 它会知道哪个表单正在提交并序列化正确的表单。

# ruby-on-rails-3 - Amazon Git Eb 工具未部署

> ID：13865528
> 
> 赞同：0
> 
> 时间：2012-12-13T17:49:42.153
> 
> 标签：ruby-on-rails-3, amazon-web-services, passenger, amazon-elastic-beanstalk

我按照此处的帮助页面进行操作，并通过 eb tools 命令行工具创建了我的应用程序。我可以在命令行上看到应用程序，但是当我登录 AWS 管理控制台并选择区域区域，然后单击“elastic beanstalk”时，我看到欢迎屏幕要求我创建一个新应用程序，我的问题是为什么我不能在 Web 界面上查看我的应用程序？该应用程序也在网络上运行，因为当我访问 url 时，链接处于活动状态，但我看到这条消息“在任何来源 (Bundler::GemNotFound) 中都找不到 rake-10.0.2”（如果有人知道的话如何解决这个问题也会有所帮助）提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:14:21.870

事实证明，亚马逊不知何故更改了我的密钥，而我的实例没有显示。当我更新本地机器上的密钥时，一切都开始正常工作。

# regex - VB.Net REGEX 去除电子邮件

> ID：13865529
> 
> 赞同：0
> 
> 时间：2012-12-13T17:49:53.660
> 
> 标签：regex, vb.net, email

我需要从纯文本段落中删除电子邮件地址。我用谷歌搜索并搜索了这个网站，发现了很多建议——我都无法开始工作。我正在使用这样的代码：

```
Imports System.Text.RegularExpressions

        Dim strEmailPattern As String = "^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$"       
        Dim senText As String = "blah blah blah blah blah someone@somewhere.com"  
        Dim newText As String = String.Empty

        newText = Regex.Replace(senText, strEmailPattern, String.Empty) 
```

在调用 Regex.Replace 之后，newText 字符串仍然包含完整的 senText 字符串，包括电子邮件。我认为这是我使用的正则表达式模式，但我尝试了很多，所以也许我在代码中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:01:39.150

此 posix 正则表达式应匹配所有电子邮件，前提是

1.  它们可能无效
2.  每封电子邮件至少包含`@`
3.  符号周围有一系列字符`@`，包括字母、数字、连字符和点，而不是由任何非字母字符开始。
4.  所有电子邮件至少由一个空格字符分隔。

正则表达式

```
([[:alpha:]][[:alnum:].-]+@)+[[:alpha:]][[:alnum:].-]+ 
```

这也可能有效

```
([a-zA-Z][[a-zA-Z0-9].-]+@)+[a-zA-Z][a-zA-Z0-9.-]+ 
```

一个较短的版本（如评论）将是

```
(\w[\w.-]+@)+\w[\w.-]+ 
```

但这将匹配更多无效的电子邮件。

我正在解决的模式将与大多数电子邮件地址匹配。如果您真的想匹配所有符合 RFC-822 的电子邮件，请考虑使用[此处的模式](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)。它是一个匹配所有标准电子邮件地址的 6425 个字符长的正则表达式。但请注意，它会执行缓慢！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T17:55:35.867

There are various corner cases where your regex would fail..

you should use as simple as this

`(?<=^|\s)[^@]+?\@[^@]+?(?=$|\s)`

# asp.net - Visual Studio“添加为链接”在调试时不起作用

> ID：13865534
> 
> 赞同：28
> 
> 时间：2012-12-13T17:50:02.000
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, web, webforms

我使用 Visual Studio 2010 维护大约 40 个不同的 Web 应用程序，这些应用程序在部署时都位于同一个网站上。这些项目在同一个解决方案中，但位于不同的项目中，因为它们各自做的事情非常不同。

我正在尝试通过“添加为链接”选项在各个项目之间共享 css/js 文件，这样我可以一次更新 css 或 js 文件并自动将更新反映在各个项目中，而无需构建和重新部署每个项目。

我遇到的问题是，当我试图在我的 PC 上本地运行一个项目以进行调试时，这些链接的文件不起作用。我得到一个未找到的文件。

> ***我的想法：***我认为这是因为在本地运行应用程序时文件夹结构不同。我很好奇是否只有在调试模式下构建时才能将文件复制到项目中并相应地调整相对 URL，以便我能够在发布到我们的 Web 服务器之前正确测试应用程序。

谢谢，

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-13T20:50:10.887

此问题的解决方案是复制在每次构建期间作为链接添加的内容文件（如 js、css 或其他）。有几种方法可以做到这一点。我可以建议使用 MSBuild 目标，它可以被不同的 Web 应用程序项目重用。

因此，您可以使用以下内容创建以下文件（例如，将其命名为 WebApplication.Extension.targets）：

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <!-- Override the default target dependencies to -->
    <!-- include the new CopyLinkedContentFiles target. -->
    <PropertyGroup>
        <BuildDependsOn>
            CopyLinkedContentFiles;
            $(BuildDependsOn);
        </BuildDependsOn>
    </PropertyGroup>

    <!--
    ============================================================
    CopyLinkedContentFiles

    A new target to copy any linked content files into the 
    web application output folder.

    NOTE: This is necessary even when '$(OutDir)' has not been redirected.
    ============================================================
    -->
    <Target Name="CopyLinkedContentFiles">
        <!-- Remove any old copies of the files -->
        <Delete Condition=" '%(Content.Link)' != '' AND Exists('$(WebProjectOutputDir)\%(Content.Link)') "
                Files="$(WebProjectOutputDir)\%(Content.Link)" />
        <!-- Copy linked content files recursively to the project folder -->
        <Copy Condition=" '%(Content.Link)' != '' " SourceFiles="%(Content.Identity)"
              DestinationFiles="$(WebProjectOutputDir)\%(Content.Link)" />
    </Target>
</Project> 
```

然后通过将以下行放在 .csproj 文件中，将此目标添加到您的 Web 应用程序项目中：

```
<Import Project="$(MSBuildProjectDirectory)[RelativePathToFile]\WebApplication.Extension.targets" /> 
```

基本上，您可以在 .csproj 文件中添加以下行之后的这一行：

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" /> 
```

应该解决作为链接添加的内容文件的这个问题。

**编辑：** 要仅在 MSBUILD 中构建调试配置时执行以下逻辑，您可以指定 Condition 元素。

例如，仅导入指定目标以进行调试配置，您可以将导入语句更新为以下内容：

```
<Import Project="$(MSBuildProjectDirectory)[RelativePathToFile]\WebApplication.Extension.targets" Condition=" '$(Configuration)' == 'Debug' "/> 
```

**编辑2：**

为了克服这个问题，我前段时间创建了一个“ [MSBuild.WebApplication.CopyContentLinkedFiles](https://www.nuget.org/packages/MSBuild.WebApplication.CopyContentLinkedFiles/) ”nuget 包。这个包添加了 MsBuild 目标，它将在构建期间作为链接添加到项目文件夹的所有内容文件复制。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-05-10T00:37:44.543

使用 MSBuild 在每次构建时将所有链接的内容文件自动复制到其“虚拟”位置的解决方案如下：

[http://mattperdeck.com/post/Copying-linked-content-files-at-each-build-using-MSBuild.aspx](http://mattperdeck.com/post/Copying-linked-content-files-at-each-build-using-MSBuild.aspx)

这可确保当您按 F5 时，您的链接文件将可供浏览器使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-06T21:28:02.173

也可以通过将以下代码段粘贴到包含链接文件的 .proj 文件的末尾来解决此问题

```
<Target Name="CopyLinkedContentFiles" BeforeTargets="Build">
<Copy SourceFiles="%(Content.Identity)" 
      DestinationFiles="%(Content.Link)" 
      SkipUnchangedFiles='true' 
      OverwriteReadOnlyFiles='true' 
      Condition="'%(Content.Link)' != ''" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T13:18:53.473

将链接文件复制到虚拟位置存在一个大问题：如果您在指向其中一个链接文件的 JavaScript 引用上使用 Go To Definition (Shift + F2)，您将被带到本地复制的文件，而不是到链接的文件。那么，你一定会犯编辑本地版本的错误，从而消除使用链接文件的好处。此外，这可能会导致 Intellisense 出现问题。

更好的解决方案：与其将链接文件与关联链接一起复制到当前项目目录，不如将它们复制到该目录（或您希望的任何目录中的“hiddenDebug”文件夹；将其保存在同一目录中更易于管理，然后在调试期间操纵路径，我将在下面解释）。

以下是如何将文件从共享存储库复制到“hiddenDebug”文件夹（添加到源项目的 Post-Build 事件）：

*单个 CSS 文件*

xcopy /Y "$(ProjectDir)App_Themes\Theme1\Shared.css" "$(SolutionDir)WebApp\App_Themes\Theme1\hiddenDebug\"

*JavaScript 目录*

xcopy /Y /S "$(ProjectDir)Scripts" "$(SolutionDir)WebApp\Scripts\Shared\hiddenDebug\"

在调试时，您可以使用 Global.asax 中的 Response.Filter 动态更改共享文件的源路径。这是一个例子：

*响应过滤器类（在共享项目中）*

```
Imports System.IO

Namespace Code
    Public Class LinkedReferencesFilter
    Inherits MemoryStream

        Private ReadOnly outputStream As Stream = Nothing
        Private ReadOnly _IsDevEnvironment As Boolean = False

        Public Sub New(ByVal output As Stream, IsDevEnvironment As Boolean)
            Me.outputStream = output
            Me._IsDevEnvironment = IsDevEnvironment
        End Sub

        Public Overrides Sub Write(ByVal buffer As Byte(), ByVal offset As Integer, ByVal count As Integer)
            ' Convert the content in buffer to a string
            Dim contentInBuffer As String = UTF8Encoding.UTF8.GetString(buffer)

            If Me._IsDevEnvironment Then
                contentInBuffer = contentInBuffer.Replace("<script src=""Scripts/Shared/", "<script src=""Scripts/Shared/hiddenDebug/")
                contentInBuffer = contentInBuffer.Replace("/Scripts/Shared/", "/Scripts/Shared/hiddenDebug/")
                contentInBuffer = contentInBuffer.Replace("/App_Themes/Theme1/Shared.css", "/App_Themes/Theme1/hiddenDebug/Shared.css")
            End If

            Me.outputStream.Write(UTF8Encoding.UTF8.GetBytes(contentInBuffer), offset, UTF8Encoding.UTF8.GetByteCount(contentInBuffer))
        End Sub
    End Class
End Namespace 
```

*全球.asax*

```
Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
    ' Simulate internet latency on local browsing
    If Request.IsLocal Then
        System.Threading.Thread.Sleep(50)
    End If

    Dim currentRelativePath As String = Request.AppRelativeCurrentExecutionFilePath

    If request__1.HttpMethod = "GET" Then
        If currentRelativePath.EndsWith(".aspx") Then
            Dim IsDevEnvironment As Boolean = False
            //Use whatever method you want to determine whether your current environment is a development environment:
            #If CONFIG = "Develop" Then
                IsDevEnvironment = True
            #End If

            Response.Filter =
                New Shared.Code.LinkedReferencesFilter(
                    output:=Response.Filter,
                    IsDevEnvironment:=IsDevEnvironment)
        End If
    End If
End Sub 
```

故障排除：尝试卸载并重新加载包含链接项目的项目。如果这没有帮助，请将 hiddenDebug 目录添加到您的项目中。我必须这样做，但后来我能够将其删除。这很挑剔……如果微软完善了这个功能，那就太好了，但我现在已经准备好了。

如果您不知道：当您发布 Web 应用程序时，源（链接）文件会自动复制到发布目标。一旦设置好，您就可以忘记它。最好的部分是，您不会失去智能感知或快速导航。

迁移到 TypeScript 后，大多数 JavaScript 文件引用挑战将被简化或消除（我希望像其他托管 .NET 语言一样简单的跨项目引用，但可能已经有一些解决方法来启用此类功能）。

请让我知道它是否适合您，或者您是否有更好的方法。

# iphone - SDWebImage 清除缓存

> ID：13865537
> 
> 赞同：35
> 
> 时间：2012-12-13T17:50:17.260
> 
> 标签：iphone, objective-c, ios, sdwebimage

我正在显示从 Web 下载的图标列表，其中包含表格视图中的文本。可以在服务器端更改图标，一旦有新图标可用，我需要更换它们。我尝试使用以下代码：

```
[imgView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"table_avatar_icon"] options:SDWebImageCacheMemoryOnly]; 
```

并`[[SDImageCache sharedImageCache] clearMemory];`在我的刷新回调中调用，但它不会清除缓存的内容。更重要的是，即使我关闭应用程序并再次打开它，图像仍然存在。

我发现只有一种清除缓存的方法，那就是调用`[[SDImageCache sharedImageCache] clearDisk];`. 仅在我关闭并重新打开应用程序后才有效。

如何强制 SDWebImage 不使用磁盘缓存？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-04-29T11:23:32.917

```
SDImageCache *imageCache = [SDImageCache sharedImageCache];
[imageCache clearMemory];
[imageCache clearDisk]; 
```

不要忘记将这些代码行也放入您的`didReceiveMemoryWarning`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-14T15:31:12.083

如果有问题，请找到源头。看来我被`SDImageCache`. 在 UIImageView 上使用的扩展缓存由其`SDWebImageManager`实例变量控制`SDImageCache`。如果你想为扩展清除缓存，你必须调用它`imageCache`的方法，比如 clearDisk 和 clearMemory。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-10T10:54:36.123

只有以下代码对我有用：Swift 5.0、Xcode 11、iOS 13、SDWebImage pod 5.0

```
 SDWebImageManager.shared.imageCache.clear(with: .all) {
        print("deleted all")
 } 
```

您在哪里选择选项，例如`SDImageCacheType.disk, SDImageCacheType.memory, SDImageCacheType.disk`

此外，如果您想从缓存中删除特定图像，请使用以下命令：

```
SDWebImageManager.shared.imageCache.removeImage(forKey: "url of image", cacheType: .all) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-05-12T10:22:59.283

除了 SDImageCache 方法，我强烈建议你**检查你的图像 url。**在我的情况下，我尝试了 imageCache 的所有方法，内存问题仍然存在。由于硬件无法处理，崩溃主要发生在 iPhone 4s 上。

主要问题是**url & 编码！**

例如，查看这些 url：第一个 url 使用“&”，第二个没有。由于 & 符号，我的 JSON 库无法读取宽度，并且宽度值变得比它应该高得多。这就是为什么我有记忆问题。

1) /select.php?imageid=101961221 **"&"** ;width=100 **"&"** ;isWatermarked=true

2) /select.phpimageid=101961221&width=100&isWatermarked=true

**最新版本的 SDWebImage 库**也包含`UIImageView+WebCache.h`类，它可以很好地处理缓存问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-10-20T08:21:15.443

可以在服务器端更改图标，

所以你需要每次都加载刷新缓存。

如果您使用的是最新的 SDWebImage 框架 (5.12.x)

你可以这样称呼它

```
[imgView sd_setImageWithURL:[NSURL URLWithString:urlStr] placeholderImage:[UIImage imageNamed:@"xxx" options:SDWebImageRefreshCached]; 
```

在 220112 编辑。

# android - 使用 AsyncTask 加密

> ID：13865540
> 
> 赞同：0
> 
> 时间：2012-12-13T17:50:43.050
> 
> 标签：android, encryption, android-asynctask

我使用这段代码来加密字符串，它工作得很好：

```
public class Encryption {

    public String encrypt(String seed, String cleartext) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = encrypt(rawKey, cleartext.getBytes());
        return toHex(result);
    }

    public String decrypt(String seed, String encrypted) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] enc = toByte(encrypted);
        byte[] result = decrypt(rawKey, enc);
        return new String(result);
    }

    private byte[] getRawKey(byte[] seed) throws Exception {
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
        sr.setSeed(seed);
        kgen.init(128, sr); // 192 and 256 bits may not be available
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();
        return raw;
    }

    private byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
    }

    private byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec);
        byte[] decrypted = cipher.doFinal(encrypted);
        return decrypted;
    }

    public String toHex(String txt) {
        return toHex(txt.getBytes());
    }

    public String fromHex(String hex) {
        return new String(toByte(hex));
    }

    public byte[] toByte(String hexString) {
        int len = hexString.length() / 2;
        byte[] result = new byte[len];
        for (int i = 0; i < len; i++)
            result[i] = Integer.valueOf(hexString.substring(2 * i, 2 * i + 2),
                    16).byteValue();
        return result;
    }

    public String toHex(byte[] buf) {
        if (buf == null)
            return "";
        StringBuffer result = new StringBuffer(2 * buf.length);
        for (int i = 0; i < buf.length; i++) {
            appendHex(result, buf[i]);
        }
        return result.toString();
    }

    private final static String HEX = "0123456789ABCDEF";

    private void appendHex(StringBuffer sb, byte b) {
        sb.append(HEX.charAt((b >> 4) & 0x0f)).append(HEX.charAt(b & 0x0f));
    }

} 
```

但我想知道是否可以在 AsyncTask 中运行此代码**并**显示带有当前进程的 ProgressDialog。在 AsyncTask 类中运行代码是没有问题的，但我不知道如何获得当前进度。

**编辑：**我使用此代码在 AsyncTask 中运行代码：

```
private class EncryptData extends AsyncTask<String, Integer, String> {
        ProgressDialog pd;

        @Override
        protected void onPreExecute() {
            pd = new ProgressDialog(MainActivity.this);
            pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            pd.setMessage("Processing Data...");
            pd.setCancelable(false);
            pd.show();
        }

        @Override
        protected String doInBackground(String... arg0) {

            Encryption encryptText = new Encryption();
            String result = "";

            try {
                result = encryptText.encrypt("123", arg0[0]);
            } catch (Exception e) {

            }
            return result;
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {
            pd.setProgress((int) (progress[0]));
            pd.setMessage("Processing Data... (" + progress[0] + "%)");
        }

        @Override
        protected void onPostExecute(String ui) {
            setEncryptedData(ui);
            pd.dismiss();
        }
    } 
```

我想用这段代码加密几 MB 的数据。

**编辑：**我将此代码添加到加密：

```
 public int getProcess() {
        return ((int) (offset / totalSize) * 100);
    }

    public void setProgress(int totalSize, int offset) {
        this.totalSize = totalSize;
        this.offset = offset;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:57:51.090

你调用 doFinal(byte[])。这样您就无法从 Cipher 中获取进度信息。当您更改为更新（字节 []、偏移等）时，您可以分块数据并在循环中显示您的进度。顺便说一句，完成最后。

你可能会得到类似的东西（从头开始）

```
private byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

    int offset = 0;
    byte[] encrypted;

    while(offset < clear.length()) {
        final byte[] answer = cipher.update(clear, offset, 1024);
        encrypted = Arrays.copyOf( encrypted, encrypted.length + 1024);
        System.arrayCopy(answer, 0, encrypted, offset, 1024);
        offset += 1024;
    }
    encrypted += cipher.doFinal(clear, offset, clear.length() - offset);
    return encrypted;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:54:58.177

Did you look at the [AsyncTask Reference](http://developer.android.com/reference/android/os/AsyncTask.html)? It is built-in.

> An asynchronous task is defined by a computation that runs on a background thread and whose result is published on the UI thread. An asynchronous task is defined by 3 generic types, called Params, Progress and Result, and 4 steps, called onPreExecute, doInBackground, onProgressUpdate and onPostExecute.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T17:52:43.627

你应该能够。您在线程部分完成繁重的工作，并且 ASyncTask 具有帮助您使用 UI 线程更新控件的机制

# asp.net - 错误 无法解析从服务器收到的消息

> ID：13865542
> 
> 赞同：0
> 
> 时间：2012-12-13T17:50:50.553
> 
> 标签：asp.net, vb.net, excel, response, filestream

所以我正在做的是使用 epplus 创建一个 excel 文件并将其保存到 response.outputstream

由于某种原因，代码中断给我一个错误。我不知道我做错了什么。

```
Using package As New ExcelPackage(newFile)
        ' add a new worksheet to the empty workbook
        Dim worksheet As ExcelWorksheet = package.Workbook.Worksheets.Add("Analysis")
        Dim worksheet2 As ExcelWorksheet = package.Workbook.Worksheets.Add("Data")
        'Add the headers
        worksheet.Cells(1, 2).Value = "Key Performance Indicators"
        worksheet.Cells(1, 6).Value = MWHtotal & "MW Hours"
        worksheet.Cells(2, 3).Value = "Before Deslag"
        worksheet.Cells(2, 4).Value = "After Deslag"
        worksheet.Cells(2, 5).Value = "Percent Change"
        worksheet.Cells(2, 2).Value = aunit
        worksheet.Cells(2, 6).Value = auser & " analysis"

        worksheet.Cells(3, 2).Value = "Primary SuperHeat Draft Loss"
        worksheet.Cells(4, 2).Value = "Primary SuperHeat Draft Loss Rate"
        worksheet.Cells(5, 2).Value = "Zolo FEGT"
        worksheet.Cells(6, 2).Value = "Max Ramp Rate"
        worksheet.Cells(7, 2).Value = "Max Load"
        worksheet.Cells(8, 2).Value = "Throttle Set Pressure"
        worksheet.Cells(9, 2).Value = "Water Wall Cleanliness"
        worksheet.Cells(10, 2).Value = "Platen SH Cleanliness"
        worksheet.Cells(11, 2).Value = "SSH Cleanliness"
        worksheet.Cells(12, 2).Value = "SSH Delta Temp"
        worksheet.Cells(13, 2).Value = "Primary SH Cleanliness"
        worksheet.Cells(14, 2).Value = "SHT Attemp"
        worksheet.Cells(15, 2).Value = "DP Across SSH"
        worksheet.Cells(16, 2).Value = "RH Cleanliness"
        worksheet.Cells(17, 2).Value = "RH Delta Temp"
        worksheet.Cells(18, 2).Value = "RH Attemp"
        worksheet.Cells(19, 2).Value = "DP Across RH"
        worksheet.Cells(20, 2).Value = "Boiler Efficiency"
        worksheet.Cells(21, 2).Value = "Reheat Gas Temp(Above Horiz Reheater Grid)"
        worksheet.Cells(22, 2).Value = "Econ Gas Outlet Temp"
        worksheet.Cells(23, 2).Value = "Furnace Exit Gas Temp"
        worksheet.Cells(24, 2).Value = "East FEGT"
        worksheet.Cells(25, 2).Value = "West FEGT"
        worksheet.Cells(26, 2).Value = "Secondary SuperHeat Draft Loss"
        worksheet.Cells(27, 2).Value = "Vertical ReHeat Cleanliness Factor"
        worksheet.Cells(28, 2).Value = "Air Heat Gas Outlet Temp"
        worksheet.Cells(29, 2).Value = "Total Air Flow"
        worksheet.Cells(30, 2).Value = "MW"
        worksheet.Cells(3, 6).Value = "H2O"
        worksheet.Cells(4, 6).Value = "H2O/Min"
        worksheet.Cells(5, 6).Value = "Deg F"
        worksheet.Cells(6, 6).Value = "MW/Min"
        worksheet.Cells(7, 6).Value = "MW"
        worksheet.Cells(8, 6).Value = "Psig"
        worksheet.Cells(9, 6).Value = "Percent"
        worksheet.Cells(10, 6).Value = "Percent"
        worksheet.Cells(11, 6).Value = "Percent"
        worksheet.Cells(12, 6).Value = "Deg F"
        worksheet.Cells(13, 6).Value = "Percent"
        worksheet.Cells(14, 6).Value = "lb/hr"
        worksheet.Cells(15, 6).Value = "H2O"
        worksheet.Cells(16, 6).Value = "Percent"
        worksheet.Cells(17, 6).Value = "Deg F"
        worksheet.Cells(18, 6).Value = "lb/hr"
        worksheet.Cells(19, 6).Value = "H2O"
        worksheet.Cells(20, 6).Value = "Percent"
        worksheet.Cells(21, 6).Value = "Deg F"
        worksheet.Cells(22, 6).Value = "Deg F"
        worksheet.Cells(23, 6).Value = "Deg F"
        worksheet.Cells(24, 6).Value = "Deg F"
        worksheet.Cells(25, 6).Value = "Deg F"
        worksheet.Cells(26, 6).Value = "H2O"
        worksheet.Cells(27, 6).Value = "Percent"
        worksheet.Cells(28, 6).Value = "Deg F"
        worksheet.Cells(29, 6).Value = "KPPH"
        worksheet.Cells(30, 6).Value = "MW"
        arraycol = 0
        arrayrow = 0
        For i = 0 To pdata.Count
            worksheet2.Cells(arrayrow + 1, arraycol + 1).Value = PIArray(arrayrow, arraycol)
        Next

        worksheet.Cells(3, 3).Value = wa
        worksheet.Cells(4, 3).Value = za
        worksheet.Cells(5, 3).Value = ua
        worksheet.Cells(6, 3).Value = amaxrate
        worksheet.Cells(7, 3).Value = amax
        worksheet.Cells(8, 3).Value = ta
        worksheet.Cells(9, 3).Value = aa
        worksheet.Cells(10, 3).Value = ba
        worksheet.Cells(11, 3).Value = ca
        worksheet.Cells(12, 3).Value = da
        worksheet.Cells(13, 3).Value = ea
        worksheet.Cells(14, 3).Value = fa
        worksheet.Cells(15, 3).Value = ga
        worksheet.Cells(16, 3).Value = ha
        worksheet.Cells(17, 3).Value = ia
        worksheet.Cells(18, 3).Value = ja
        worksheet.Cells(19, 3).Value = ka
        worksheet.Cells(20, 3).Value = la
        worksheet.Cells(21, 3).Value = ma
        worksheet.Cells(22, 3).Value = na
        worksheet.Cells(23, 3).Value = oa
        worksheet.Cells(24, 3).Value = qa
        worksheet.Cells(25, 3).Value = ra
        worksheet.Cells(26, 3).Value = xa
        worksheet.Cells(27, 3).Value = ya
        worksheet.Cells(28, 3).Value = pa
        worksheet.Cells(29, 3).Value = sa
        worksheet.Cells(30, 3).Value = va
        worksheet.Cells(3, 4).Value = wb
        worksheet.Cells(4, 4).Value = zb
        worksheet.Cells(5, 4).Value = ub
        worksheet.Cells(9, 4).Value = ab
        worksheet.Cells(10, 4).Value = bb
        worksheet.Cells(11, 4).Value = cb
        worksheet.Cells(12, 4).Value = db
        worksheet.Cells(13, 4).Value = eb
        worksheet.Cells(14, 4).Value = fb
        worksheet.Cells(15, 4).Value = gb
        worksheet.Cells(16, 4).Value = hb
        worksheet.Cells(17, 4).Value = ib
        worksheet.Cells(18, 4).Value = jb
        worksheet.Cells(19, 4).Value = kb
        worksheet.Cells(20, 4).Value = lb
        worksheet.Cells(21, 4).Value = mb
        worksheet.Cells(22, 4).Value = nb
        worksheet.Cells(23, 4).Value = ob
        worksheet.Cells(24, 4).Value = qb
        worksheet.Cells(25, 4).Value = rb
        worksheet.Cells(26, 4).Value = xb
        worksheet.Cells(27, 4).Value = yb
        worksheet.Cells(28, 4).Value = pb
        worksheet.Cells(29, 4).Value = sb
        worksheet.Cells(30, 4).Value = vb
        worksheet.Cells(3, 5).Value = wpercent
        worksheet.Cells(4, 5).Value = zpercent
        worksheet.Cells(5, 5).Value = upercent
        worksheet.Cells(9, 5).Value = apercent
        worksheet.Cells(10, 5).Value = bpercent
        worksheet.Cells(11, 5).Value = cpercent
        worksheet.Cells(12, 5).Value = dpercent
        worksheet.Cells(13, 5).Value = epercent
        worksheet.Cells(14, 5).Value = fpercent
        worksheet.Cells(15, 5).Value = gpercent
        worksheet.Cells(16, 5).Value = hpercent
        worksheet.Cells(17, 5).Value = ipercent
        worksheet.Cells(18, 5).Value = jpercent
        worksheet.Cells(19, 5).Value = kpercent
        worksheet.Cells(20, 5).Value = lpercent
        worksheet.Cells(21, 5).Value = mpercent
        worksheet.Cells(22, 5).Value = npercent
        worksheet.Cells(23, 5).Value = opercent
        worksheet.Cells(24, 5).Value = qpercent
        worksheet.Cells(25, 5).Value = rpercent
        worksheet.Cells(26, 5).Value = xpercent
        worksheet.Cells(27, 5).Value = ypercent
        worksheet.Cells(28, 5).Value = ppercent
        worksheet.Cells(29, 5).Value = spercent
        worksheet.Cells(30, 5).Value = vpercent
        worksheet.Cells(3, 7).Value = wcolor
        worksheet.Cells(4, 7).Value = zcolor
        worksheet.Cells(5, 7).Value = ucolor
        worksheet.Cells(9, 7).Value = acolor
        worksheet.Cells(10, 7).Value = bcolor
        worksheet.Cells(11, 7).Value = ccolor
        worksheet.Cells(12, 7).Value = dcolor
        worksheet.Cells(13, 7).Value = ecolor
        worksheet.Cells(14, 7).Value = fcolor
        worksheet.Cells(15, 7).Value = gcolor
        worksheet.Cells(16, 7).Value = hcolor
        worksheet.Cells(17, 7).Value = icolor
        worksheet.Cells(18, 7).Value = jcolor
        worksheet.Cells(19, 7).Value = kcolor
        worksheet.Cells(20, 7).Value = lcolor
        worksheet.Cells(21, 7).Value = mcolor
        worksheet.Cells(22, 7).Value = ncolor
        worksheet.Cells(23, 7).Value = ocolor
        worksheet.Cells(24, 7).Value = qcolor
        worksheet.Cells(25, 7).Value = rcolor
        worksheet.Cells(26, 7).Value = xcolor
        worksheet.Cells(27, 7).Value = ycolor
        worksheet.Cells(28, 7).Value = pcolor
        worksheet.Cells(29, 7).Value = scolor
        worksheet.Cells(30, 7).Value = vcolor

        Response.Clear()

        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
        Response.AppendHeader("Content-Disposition", "attachment;filename=analyze.xlsx")
        package.SaveAs(Response.OutputStream)

        Response.End()
    End Using 
```

我收到这个错误

0x800a139e - Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:20:44.867

您可能会从 UpdatePanel 或 Ajax 调用中调用它 - 但是您这样做是为了清除响应标头，而不是 ajax 等待返回的 json，而是发送不同的东西（这里是一个 xlsx 文件） - 你会得到那个消息，那不能解析那个excel。

ajax 或 UpdatePanel 无法理解您尝试发送类似此文件的不同内容。您必须做的是创建发送此文件的以太处理程序，并将其放在超链接中，以太删除 UpdatePanel。

# google-apps-script - 如果 Google 表单上的字段留空，如何创建不打印某些文本的套用信函

> ID：13865545
> 
> 赞同：2
> 
> 时间：2012-12-13T17:51:11.707
> 
> 标签：google-apps-script

我的公司最近切换到 Google Apps，我正试图将 Word 和 Excel 文档转换为 Google 文档。我对 Google App Script 完全陌生并且被卡住了。我一直在寻找几天没有找到我要找的东西。

我有一个通过电子邮件发送给销售人员的 Google 表单。完成后，Google 电子表格会更新，然后向销售人员发送一封套用信函，总结他们的输入。表单上的某些字段是可选的。如果问题未得到解答，如何创建不包含某些套用信函文本的模板？

例如，可选字段之一是客户网站地址，如果客户没有网站，我不希望网站出现在表单上。

如果有人对如何做到这一点有任何“傻瓜”说明，我将不胜感激。

谢谢。

这是我到目前为止所拥有的：

```
// Business Review Report
// Get template from Google Docs and name it
var docTemplate = "1gRk2irahyW2Sf4pQMTDykXlMQqYgbe1Ba1vkh20KDYo";
var docName = "Business Review";

// When Form Gets submitted
function onFormSubmit (e) {
//Get information from form and set as variables
var variablename = "static entry or form value"
var email_address = e.values[1];
var Business_Name = e.values[2];
var Business_Address = e.values[3];
var Phone_Number = e.values[4]
var Email_address = e.values[5];
var Website = e.values[6];
var Participants = e.values[7];
var Agenda = e.values[8];
var Updates_and_Progress1 = e.values[9]; 
var Updates_and_Progress2 = e.values[10];
var Updates_and_Progress3 = e.values[11]; 
var Current_Issues1 = e.values[12]; 
var Current_Issues2 = e.values[13]; 
var Current_Issues3 = e.values[14]; 
var Next_Steps = e.values[15]; 

// Get document template, copy it as a new temp doc, and save the Doc’s id
var copyId = DocsList.getFileById(docTemplate)
.makeCopy(docName+' for '+ Business_Name)
.getId();

// Open the temporary document
var copyDoc = DocumentApp.openById(copyId);
// Get the document’s body section
var copyBody = copyDoc.getActiveSection();

// Replace place holder keys,in our google doc template
copyBody.replaceText('keyBusinessName', Business_Name);
copyBody.replaceText('keyBusinessAddress', Business_Address);
copyBody.replaceText('keyPhoneNumber', Phone_Number);
copyBody.replaceText('keyEmailaddress', email_address);
copyBody.replaceText('keywebsite', Website);
copyBody.replaceText('keyParticipants', Participants);
copyBody.replaceText('keyAgenda', Agenda);
copyBody.replaceText('keyUpdatesAndProjects1', Updates_and_Progress1);
copyBody.replaceText('keyUpdatesAndProjects2', Updates_and_Progress2);
copyBody.replaceText('keyUpdatesAndProjects3', Updates_and_Progress3);
copyBody.replaceText('keyCurrentIssues1',Current_Issues1);
copyBody.replaceText('keyCurrentIssues2', Current_Issues2);
copyBody.replaceText('keyCurrentIssues3', Current_Issues3);
copyBody.replaceText('keyNextSteps', Next_Steps);

// Save and close the temporary document
copyDoc.saveAndClose();

// Convert temporary document to PDF
var pdf = DocsList.getFileById(copyId).getAs("application/pdf");

// Attach PDF and send the email
var subject = "Business Review";
var body = "Business Review for " + Business_Name + "";
MailApp.sendEmail(email_address, subject, body, {htmlBody: body, attachments: pdf});

// Delete temp file
DocsList.getFileById(copyId).setTrashed(true);

} 
```

它可以工作，但生成的 PDF 还包括未填充字段的文本，如 CurrentIssues2。

我不确定我是否清楚地解释了这一点，所以请回答任何问题，我会尽量说得更清楚。

再次感谢，丽莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T20:14:47.167

您的表单问题显然具有您不希望在表单信函中出现的默认值。您可以检查这些默认值并将它们替换为更合适的内容，例如空白字符串。

```
...
// If website question was not answered, leave blank
var Website = e.values[6];
if (Website == 'website') Website = '';
... 
```

此替代方法使用三元或[条件运算](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)，并且更紧凑：

```
...
// If website question was not answered, leave blank
var Website = (e.values[6] == 'website') ? '' : e.values[6];
... 
```

# jquery - 在向上滚动时添加类时遇到 jQuery 问题

> ID：13865546
> 
> 赞同：0
> 
> 时间：2012-12-13T17:51:17.700
> 
> 标签：jquery, html, css, jquery-waypoints

如果你在下面看，我在偏移量 -185 处添加了几个类，当你向下滚动时，两个是动画/淡入的。当您向上滚动超过偏移量时，我希望栏淡出，但我无法实现这一点。我正在使用 jQuery 航点脚本[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

```
$('#wrapper').waypoint(function(event, direction) {
    $('#scroll-action').toggleClass('hidden', direction === "up");
}, {
    offset: -185
}).find('#scroll-action').waypoint(function(event, direction) {
    $('#scroll-action').removeClass('hidden');
    $(this).parent().toggleClass('sticky', direction === "down");
    $('#scroll-action').addClass('animated fadeIn');
    event.stopPropagation();
}, {
    offset: -185
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:06:03.863

我认为您应该将其简化一点，这样可以更轻松地解决您的问题。您将需要用您的逻辑进行交换，但将其简化为仅使用航点与`#wrapper`我认为是要走的路。当您向下滚动并`#wrapper`在窗口上方 185 像素时，然后淡入`#scroll-action`. 当你向上滚动然后淡出。我认为将航点也打开`#scroll-action`可能会导致两者发生冲突。

```
$(function() {
  $('#wrapper').waypoint(function(event, direction) {
    if(direction === "up") {
      $('#scroll-action').fadeOut();
    } else {
      $('#scroll-action').fadeIn();
    }
  }, { offset: -185});
}); 
```

[这是一个与您正在做的事情类似的 jsFiddle，因此您可以看到它的实际效果。](http://jsfiddle.net/qNF6k/) 确保你的 HTML 窗口有点小。

# debugging - 在 Symfony 环境中调试 Ajax 请求

> ID：13865557
> 
> 赞同：0
> 
> 时间：2012-12-13T17:51:51.880
> 
> 标签：debugging, jquery, symfony, xmlhttprequest, symfony-1.4

不确定 SFDebug 在这种情况下是否有帮助。我正在使用 jQuery 制作 ajax 帖子。它在我的操作 URL 中检索 JSON 数据，然后调用执行操作的 Model 方法。直到我的操作 URL 的部分，以及对它的 jQuery 调用都可以正常工作。从客户端传输到服务器的数据得到了很好的接收，并且没有出错。

它是它调用模型上失败的方法的部分。我的 jQuery 方法如下所示：

```
$.post(url, jsonData, function(servermsg) { console.log(servermsg); }) ; 
```

我的服务器操作是这样的

```
public function executeMyAjaxRequest(sfWebRequest $request)
{

   if($request->isXmlHttpRequest())
   {
      // process whatever
      $servermsg =  Doctrine_Core::getTable('table')->addDataToTable($dataArray);
      return $this->renderText($servermsg);
   }

       return false;
} 
```

Table.class.php 文件中关注的方法如下所示：

```
public function addDataToTable($dataArray)
{
   // process $dataArray and retrieve the necessary data   

   $data = new Data();
   $data->field = $dataArray['field'];
    .
    .
    .
   $data->save();

   return $data->id ;
} 
```

该方法在模型中失败，当返回操作中的renderText并登录到控制台时，它返回SFDEBUG的HTMl。这表明它失败了。

如果这不是一个 Ajax 调用，我可以通过查看模型方法吐出的内容来调试它，但是在混合 Ajax 时这有点乏味。

不是在这里寻找确切的答案，而是更多关于如何在 symfony 环境中调试 ajax 请求，所以如果有关于如何调试的建议，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-06T05:16:47.927

您必须通过 ajax 发送带有会话 ide 密钥的 cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-16T15:52:13.140

（假设您在服务器上配置了 XDEBUG）

为了通过 AJAX 请求触发调试会话，您必须以某种方式发出该请求以发送额外的 URL 参数`XDEBUG_SESSION_START=1`。对于您的示例：

`$.post(url + '?XDEBUG_SESSION_START=1', jsonData, function(servermsg) { console.log(servermsg); }) ;`

您也可以通过 cookie 触发它，但附加 URL 参数通常更容易。

# php - XPATH/PHP - 更聪明的方式来完成这个？

> ID：13865563
> 
> 赞同：0
> 
> 时间：2012-12-13T17:52:08.123
> 
> 标签：php, xpath, html-content-extraction

**我有以下内容：**

```
$html = "<a href="/path/to/page.html" title="Page name"><img src="path/to/image.jpg" alt="Alt name"  />Page name</a>" 
```

**我需要提取 href 和 src 属性和锚文本**

**我的解决方案：**

```
$dom = new DOMDocument;
$dom->loadHTML($html);
foreach ($dom->getElementsByTagName('a') as $node) { 
    $href = $node->getAttribute('href');
    $title = $node->nodeValue;
}
foreach ($dom->getElementsByTagName('img') as $node) { 
    $img = $node->getAttribute('src');
} 
```

**更聪明的方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:00:15.247

如果您使用`DOMXPath`直接抓取元素，则可以避免循环：

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$xpath = new DOMXpath( $dom);

$a = $xpath->query( '//a')->item( 0);         // Get the first <a> node
$img = $xpath->query( '//img', $a)->item( 0); // Get the <img> child of that <a> 
```

现在，您可以执行以下操作：

```
echo $a->getAttribute('href');
echo $a->nodeValue;
echo $img->getAttribute('src'); 
```

这将打印：

```
/path/to/page.html 
Page name 
path/to/image.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:55:28.333

`http://ca2.php.net/manual/en/function.preg-match.php` - if you want to use regex

or

`http://php.net/manual/en/book.simplexml.php`

if you need to use xml parsing.

```
// Simple xml
$xml = simplexml_load_string($html);

$attr = $xml->attributes();
echo 'href: ' . $attr['href'] . PHP_EOL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:01:17.857

可能的替代方法：

```
$domXpath = new DOMXPath(DOMDocument::loadHTML($html));
$href = $domXpath->query('a/@href')->item(0)->nodeValue;
$src = $domXpath->query('img/@src')->item(0)->nodeValue; 
```

空/空检查由您决定。

# javascript - 如何用jQuery中的另一组链接替换链接？

> ID：13865576
> 
> 赞同：0
> 
> 时间：2012-12-13T17:52:43.503
> 
> 标签：javascript, jquery, jquery-selectors

这个问题链接到[如何 Greasemonkey 脚本如何将链接拆分为三个相关链接？](https://stackoverflow.com/questions/13775527/how-can-a-greasemonkey-script-split-a-link-into-three-related-links).

顺便说一下，在给出的答案（有效）中，方法是修改初始链接并将其他链接附加到它。但是，它是为链接到单个 Redmine 问题的提交评论而设计的。我这样修改

```
$('a[title]').each( function () {
    redmineURL = getProjectURL($(this).attr('title'));
});
$("a[href*='/commit/']").each ( function () {
    /*-- Parse each link for the expected format:
        refs #{number} {description text}
    */
    var jThis       = $(this);
    if ($(this).text().match(/#\d+\b/g)) {
        var commitText = $(this).text();
        var cgitURL = $(this).attr('href');
        //$(this).text (commitText[1]);
        $(this).after(processLinkedCommit(redmineURL, commitText, cgitURL)); 
    }
} ); 
```

使用此方法，原始链接应替换为函数的输出`processLinkedCommit`。`redmineURL`是`Redmine`有问题的项目，它是根据页面中的“标题”属性计算的。`commitText`是提交的文本，位于`Cgit`页面链接中，`cgitURL`是 href 属性。

我想用最多 10 个由`processLinkedCommit`. 看来我将不得不删除 $(this) 并将其替换为 URL 列表，即我必须将它放在它的前一个兄弟之后。我将如何在 jQuery 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:13:28.090

经过更多思考和查阅文档，我想出了这个解决方案。使用该函数附加替换 URL，并使用该`.after()`函数删除原始链接`.remove()`；

```
$('a[title]').each( function () {
    redmineURL = getProjectURL($(this).attr('title'));
});
$("a[href*='/commit/']").each ( function () {
    if ($(this).text().match(/#\d+\b/g)) {
        var commitText = $(this).text();
        var cgitURL = $(this).attr('href');
        $(this).after(processLinkedCommit(redmineURL, commitText, cgitURL)); 
        $(this).remove();
    }
}); 
```

# scala - 对具有继承内部类 scala 的重载定义的模糊引用

> ID：13865577
> 
> 赞同：0
> 
> 时间：2012-12-13T17:52:58.837
> 
> 标签：scala, inheritance, overloading, inner-classes, ambiguous-call

所以这是有问题的代码：

```
trait World {
  type State
  def dynamics(s: State): State
  // ...
}
trait GridWorld extends World {
  class State {...} // concrete
  def dynamics(s: State) = s    // concrete
  // some other staff still abstract
}
trait SimpleGridWorld extends GridWorld {
  class State extends super.State {...}  // concrete
  def foo {dynamics(new State)}  // compiler error
} 
```

编译器说，`dynamics`在两者中都`World`匹配`GridWorld`签名。但是， in`World`它是抽象的，然后在 中实现`GridWorld`，所以在我看来，很明显我在调用`GridWorld.this.dynamics`.

我注意到的另一件事是，如果我删除`extends super.State`in `SimpleGridWorld`，一切正常（我不明白为什么，我确实需要`GridWorld.State`这里定义的功能）。有什么解释吗？谢谢！

**更新** 无论如何我看到我的设计模式很奇怪，因为如果`State`in`SimpleGridWorld`不继承`GridWorld.this.State`，`dynamics`将引用根特征中定义的未实现的模式`World`（这是有道理的，因为实现 in`GridWorld`可能使用`GridWorld.this.State`其中可能不存在的功能`SimpleGridWorld.this.State`）。但我想要的是：

1.  `XXXWorld.this.State`必须继承它`super.State`（或只是使用它）
2.  `dynamics`除非在此处被覆盖，否则总是指`super.dynamics`是否在超级特征/类中实现。

我怎样才能做到这一点？我认为这不是一个完全不相关的问题，可能前一个问题的答案会告诉我如何重新设计我的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:28:19.930

怎么样：

```
trait World {
  type State
  def dynamics(s: State): State
}
trait GridWorld extends World {
  type State = MyState
  class MyState {} // concrete
  def dynamics(s: State) = s    // concrete
}
trait SimpleGridWorld extends GridWorld {
  class MyState extends super.MyState {}  // concrete
  def foo {dynamics(new MyState)}  // compiler error; ok
} 
```

# c# - mvc3 中 Viewbag 的范围是什么，我们如何在 MVC 中维护状态

> ID：13865578
> 
> 赞同：6
> 
> 时间：2012-12-13T17:52:58.760
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework-4

1.  mvc3 中 Viewbag 的范围是什么，它仅在我们通过我的操作方法呈现的页面上可用。
2.  我们如何在 MVC 中跨页面维护信息。假设我创建了新员工，并且当我转到下一页时，我想要该员工信息。
3.  我们如何在 MVC 中维护状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:00:30.040

1.  视图包是 httpcontext 的一部分。它主要在控制器操作中设置并在视图中读取，但可以从 http 请求/响应内的 mvc 框架中的任何位置访问它。
2.  网络没有状态，就像在富客户端应用程序中一样。要在页面之间维护值（或者更恰当地说，请求到请求），您可以使用 cookie、会话、查询字符串、请求正文（想想 post/put 请求）。
3.  与#2 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:07:48.127

1.  `ViewBag`是一个动态表达式，它适用于所有页面。中的数据`ViewBag`是根据我们指定的更改的内容。如果我们`ViewBag.items=itemlist;`为 a赋值`View`，那么它将是常量`View`。我们可以根据需要在每页中放入任意数量的数据`ViewBag`，对于单个页面，我们可以拥有

    ```
    ViewBag.items=itemlist;
    ViewBag.table=usertable; 
    ```

2.  您可以通过将数据作为参数传递给渲染我们要在其上维护信息的视图的方法来维护 MVC 中跨页面的信息，如下所示：

    ```
    public ActionResult CreateEmployee(EmployeeModel emp)
    {
         //Add Employee to db
         ViewBag.employee=emp;
         RedirectToAction("MethodToCall","Controller");
    } 
    ```

因此，下一页可以将员工信息包含在`ViewBag`

或者，您也可以使用`ViewData`。

3] 可以使用会话、cookie 等来维护状态

# ms-access - 压缩和修复后访问自动编号序列已更改

> ID：13865579
> 
> 赞同：1
> 
> 时间：2012-12-13T17:53:00.867
> 
> 标签：ms-access

我有一个访问数据库，我使用以下命令修改了一些表：

```
ALTER TABLE TestTable ALTER COLUMN ID AUTOINCREMENT(1001,1) 
```

该表的第一列 ID 为自动编号。创建表后，我进行了压缩和修复。但是在插入数据时，第一个 ID 设置为 1 而不是 1001。如果我不进行紧凑修复，则第一个 ID 按预期设置为 1001。我无法控制何时执行紧凑修复。那么有没有办法确保 ID 总是从 1001 开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:40:30.010

自动编号的种子值不是静态的。添加一行后，种子将重置为先前的种子值加上增量。

compact 的一个有意功能是根据 autonumber 字段中包含的当前值重置种子。

没有简单易行的解决方法。

您可以创建一个`autoexec`宏来检查您的自动编号的当前种子值，如果它小于 1001，则执行您的 DDL 语句。这将在您每次打开数据库时按照您的意愿进行设置。

或者您可以添加一个 ID = 1000 的虚拟行`TestTable`，并确保您永远不会删除该行。但这很丑陋。

或者您可以制作 ID Long Integer 并创建您自己的自定义自动编号代码来确定您存储在那里的值。但这并不容易或不方便。

# javascript - Javascript - 将选项的参数附加到由下拉菜单检索的 URL

> ID：13865590
> 
> 赞同：0
> 
> 时间：2012-12-13T17:53:43.603
> 
> 标签：javascript, url, append, option

我有一个下拉菜单。我用它来选择一种特定的茶。

```
<form name="barcode" onSubmit="return OnSubmitForm();" method="post">

    <select name="entry_id" id="entry_id">
        <option selected="selected">Select a tea</option>
        <td><option entry_id="865"> Black Tea</option></td>
        <td><option entry_id="123"> Green Tea</option></td>
    </select>

    <input type="submit" value="Tea story">
</form> 
```

然后我想使用 javascript 来检索`entry_id`选定的 Tea 并将其附加到 URL 的末尾，例如`/myshop/tea/865`<-- 865 是红茶的条目 ID

我的Javascript代码：

```
<SCRIPT language="JavaScript">
    function OnSubmitForm()
    {
        alert('inside');
        var eid = document.getElementById('entry_id').value;
        alert(eid);
        document.barcode.action ="https://www.myshop.ca/tea/" + eid;
    }
</SCRIPT> 
```

但每次它都会附加“红茶”或“绿茶”名称，例如，`/myshop/tea/Black Tea`或`/myshop/tea/Green Tea`。有没有办法`entry_id`在 URL 的末尾附加，例如`/myshop/tea/865`或`/myshop/tea/123`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:56:24.977

```
<form name="barcode" onSubmit="return OnSubmitForm();" method="post">

    <select name="entry_id" id="entry_id">
       <option selected="selected">Select a tea</option>
       <option value="865">Black Tea</option>
       <option value="123">Green Tea</option>
    </select>

    <input type="submit" value="Tea story">
    </form> 
```

更有意义。使用应该使用的表单小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:57:11.993

您不应该`td`在 select 元素中有 s 。此外，您需要将元素的`value`属性设置`option`为所需的 ID。例如。：

```
<select name="entry_id" id="entry_id">
   <option selected="selected">Select a tea</option>

   <option value="865"> Black Tea</option>

   <option value="123"> Green Tea</option>
</select> 
```

# python - 使用 SciPy 的分位数-分位数图

> ID：13865596
> 
> 赞同：103
> 
> 时间：2012-12-13T17:54:07.757
> 
> 标签：python, statistics, scipy

你将如何使用 Python 创建一个 qq 图？

假设您有大量测量值，并且正在使用一些将 XY 值作为输入的绘图函数。该函数应根据某些分布（正态、均匀...）的相应分位数绘制测量的分位数。

由此产生的图让我们可以评估我们的测量是否遵循假设的分布。

[http://en.wikipedia.org/wiki/Quantile-quantile_plot](http://en.wikipedia.org/wiki/Quantile-quantile_plot)

R 和 Matlab 都为此提供了现成的函数，但我想知道在 Python 中实现的最简洁的方法是什么。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-12-13T18:11:14.907

**更新：**正如人们指出的那样，这个答案是***不正确***的。概率图不同于分位数-分位数图。在您在解释或传达您的分布关系时出错之前，请查看这些评论和其他答案。

我认为这`scipy.stats.probplot`会做你想要的。有关更多详细信息，请参阅[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.probplot.html)。

```
import numpy as np 
import pylab 
import scipy.stats as stats

measurements = np.random.normal(loc = 20, scale = 5, size=100)   
stats.probplot(measurements, dist="norm", plot=pylab)
pylab.show() 
```

**结果**

![在此处输入图像描述](../Images/8f810466690a1232db3d34da4d8a1ce8.png)

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-03-16T02:50:40.933

使用`qqplot`of`statsmodels.api`是另一种选择：

非常基本的例子：

```
import numpy as np
import statsmodels.api as sm
import pylab

test = np.random.normal(0,1, 1000)

sm.qqplot(test, line='45')
pylab.show() 
```

结果：

![在此处输入图像描述](../Images/7b7a499335a2cfe9faa8bd8d7a0f26e1.png)

文档和更多示例在[这里](http://statsmodels.sourceforge.net/devel/generated/statsmodels.graphics.gofplots.qqplot.html)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-06-13T19:44:02.303

如果您需要绘制一个样本与另一个样本的 QQ 图，statsmodels 包括 qqplot_2samples()。就像上面评论中的 Ricky Robinson 一样，这就是我认为的 QQ 图与概率图的对比，概率图是针对理论分布的样本。

[http://statsmodels.sourceforge.net/devel/generated/statsmodels.graphics.gofplots.qqplot_2samples.html](http://statsmodels.sourceforge.net/devel/generated/statsmodels.graphics.gofplots.qqplot_2samples.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-13T17:54:07.757

我想出了这个。也许你可以改进它。特别是生成分布分位数的方法对我来说似乎很麻烦。

您可以替换`np.random.normal`为任何其他分布，`np.random`以将数据与其他分布进行比较。

```
#!/bin/python

import numpy as np

measurements = np.random.normal(loc = 20, scale = 5, size=100000)

def qq_plot(data, sample_size):
    qq = np.ones([sample_size, 2])
    np.random.shuffle(data)
    qq[:, 0] = np.sort(data[0:sample_size])
    qq[:, 1] = np.sort(np.random.normal(size = sample_size))
    return qq

print qq_plot(measurements, 1000) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-02T12:19:09.167

它现在存在于 statsmodels 包中：

[http://statsmodels.sourceforge.net/devel/generated/statsmodels.graphics.gofplots.qqplot.html](http://statsmodels.sourceforge.net/devel/generated/statsmodels.graphics.gofplots.qqplot.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-17T05:39:39.667

你可以使用散景

```
from bokeh.plotting import figure, show
from scipy.stats import probplot
# pd_series is the series you want to plot
series1 = probplot(pd_series, dist="norm")
p1 = figure(title="Normal QQ-Plot", background_fill_color="#E8DDCB")
p1.scatter(series1[0][0],series1[0][1], fill_color="red")
show(p1) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-08T17:43:15.620

```
import numpy as np 
import pylab 
import scipy.stats as stats
measurements = np.random.normal(loc = 20, scale = 5, size=100)   
stats.probplot(measurements, dist="norm", plot=pylab)
pylab.show() 
```

这里 probplot 绘制图形测量值与 dist="norm" 中的正态分布

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-31T14:35:48.753

为了增加 Python 和 R 世界中 QQ 图和概率图的混淆，[SciPy 手册](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.probplot.html#scipy.stats.probplot)是这样说的：

> “`probplot`生成一个概率图，不应与 QQ 或 PP 图混淆。Statsmodels 具有这种类型的更广泛的功能，请参阅 statsmodels.api.ProbPlot。”

如果您尝试一下`scipy.stats.probplot`，您会发现它确实将数据集与理论分布进行了比较。QQ 图，OTOH，比较两个数据集（样本）。

R 有函数`qqnorm`,`qqplot`和`qqline`。从 R 帮助（版本 3.6.3）：

> `qqnorm`是一个通用函数，其默认方法生成 y 中值的正常 QQ 图。`qqline`将一条线添加到“理论”，默认情况下是正常的分位数 - 分位数图，该图通过概率分位数，默认情况下是第一和第三四分位数。
> 
> `qqplot`生成两个数据集的 QQ 图。

简而言之，R提供了与默认设置`qqnorm`相同的功能。但他们称它为“生成正常的 QQ 情节”这一事实可能很容易让用户感到困惑。`scipy.stats.probplot``dist=norm``qqnorm`

最后，一句警告。这些图不能代替适当的统计测试，仅用于说明目的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-09T10:41:57.767

你的样品有多大？[这是使用OpenTURNS 库](http://openturns.org)针对任何发行版测试数据的另一种选择。在下面的示例中，我从均匀分布中生成了一个包含 1.000.000 个数字的样本 x，并针对正态分布对其进行了测试。如果您将其重塑为，您可以用您的数据替换 x`x= [[x1], [x2], .., [xn]]`

```
import openturns as ot

x = ot.Uniform().getSample(1000000)
g = ot.VisualTest.DrawQQplot(x, ot.Normal())
g 
```

在我的 Jupyter Notebook 中，我看到： [![在此处输入图像描述](../Images/6ae84465b412ce1c0e2356a3d3271bbb.png)](https://i.stack.imgur.com/jf2LU.png)

如果您正在编写脚本，则可以做得更正确

```
from openturns.viewer import View`
import matplotlib.pyplot as plt
View(g)
plt.show() 
```

# c# - 无法将 lambda 表达式转换为字符串类型，因为它不是委托类型

> ID：13865598
> 
> 赞同：-4
> 
> 时间：2012-12-13T17:54:10.983
> 
> 标签：c#, asp.net-mvc, lambda

我正在尝试使用以下结构/代码创建一个链接按钮：

```
<%:school => string.Format("<a class='add' href='{0}' title='Add {1} to {4}'><img class='pic2' alt='{2}' src='{3}'/></a>",
                                          Url.Action("AddSchoolToParty", "PartySchool",
                                          new { partyId = Model.PartyId, schoolId = school.SchoolId }),
                                          School.EntityName, string.Empty,
                                          Url.Content("~/Content/images/addImage.png"),
                                          School.EntityName)%> 
```

我得到的错误是：

**CS1660：无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型**

这也是用我拥有的信息创建链接的正确格式吗？

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Kids.MVC.Models.ViewModels.SchoolFormViewModel>" %>

<%@ Import Namespace="Kids.Resources" %>
<%@ Import Namespace="Kids.Resources.Entities" %>
<%@ Import Namespace="MvcContrib.Pagination" %>
<%@ Import Namespace="MvcContrib.UI.Grid" %>
<%@ Import Namespace="MvcContrib.UI.Pager" %>
<%: Html.ValidationSummary(true, Message.ValidationErrorSummary, new{@class= "error"}) %>
<%=Html.DatePickerEnable() %> 
```

**这是我在不同页面中使用的格式，这是我想在没有列和 string.format 的标签中重写的按钮链接 - 我想知道重写此链接的正确方法。**

```
column.For(
                        school =>
                        string.Format("<a class='add' href='{0}' title='Add {1} to {4}'><img class='pic2' alt='{2}' src='{3}'/></a>",
                                      Url.Action("AddSchoolToParty", "PartySchool",
                                      new { partyId = Model.PartyId, schoolId = school.SchoolId }),
                                      School.EntityName, string.Empty,
                                      Url.Content("~/Content/images/addImage.png"),
                                      School.EntityName)).Encode(false).Sortable(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:18:22.023

试试这样：

```
<a class="add" href="<%: Url.Action("AddSchoolToParty", "PartySchool", new { partyId = Model.PartyId, schoolId = Model.SchoolId }) %>" title="<%: string.Format("Add {0} to {0}", School.EntityName) %>">
    <img class="pic2" alt="" src="<%: Url.Content("~/Content/images/addImage.png") %>" />
</a> 
```

但是为了避免这种丑陋的标签汤，我建议您编写一个自定义 HTML 帮助程序，这将使这种语法更加清晰。

# facebook - 如何强制登录的客户重新认证？

> ID：13865599
> 
> 赞同：1
> 
> 时间：2012-12-13T17:54:10.147
> 
> 标签：facebook, facebook-authentication, facebook-authorization

我们正在开发一个应用程序，我们将使用 Facebook 对用户进行身份验证。我们有一项业务要求，客户需要重新验证才能进入“我的个人资料”部分。即当客户尝试进入“我的个人资料”部分时，他们将被视为已识别但未通过身份验证。

要查看类似的示例：访问 Amazon.com -> 登录 -> 将任何商品添加到购物车 -> 继续结帐。此时，系统会要求您重新输入凭据。

是否有允许我这样做的 Facebook API？顺便说一句，如果客户选择不重新进行身份验证，我不应该注销客户。

如果已经问过这个问题，我们深表歉意——请指点我相关的线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T22:57:03.673

将用户发送到 login.php，并将下一个 URL 发送到您的应用程序授权页面。

`https://www.facebook.com/login.php?skip_api_login=1&api_key=&signed_next=1&next=`

# nginx - nginx - 有条件地提供文件而不重定向

> ID：13865603
> 
> 赞同：0
> 
> 时间：2012-12-13T17:54:15.543
> 
> 标签：nginx, passenger

我目前正在 Rails 中构建多域 cms。由于此内容在下一次更改之前是相同的，因此我想通过静态文件进行缓存。

包含 foo.com 和 baz.com 的一些缓存页面的公共目录（在这两种情况下都是 / 和 /asdf）：

```
public/
   assets/
      cms.css
   sites/
      foo.com/
         assets/
            screen-some-hash.min.css
         index.html
         asdf/
            index.html
      baz.com/
         assets/
            screen-some-hash.min.css
         index.html
         asdf/
            index.html 
```

我想要做的是以下内容：

将 www 重定向到非 www（有效）

如果请求包含子域（cms、admin 等）：如果路径包含 /assets，则在 public/assets 中提供文件并将过期内容设置为 30d 左右。这里没问题，因为 /assets = public/assets 和 public/ 是乘客根。其他一切：通过 Rails 处理，无需特殊缓存或任何需要。

对于所有其他请求（意味着没有子域）：如果路径包含 /assets 在 public/sites/$host$request_uri 中提供文件并将过期内容设置为 30d 左右。其他一切：检查 public/sites/$host$request_uri 或回退到 rails 应用程序。

除了 www/non-www 重定向之外，我从未使用过 nginx 条件，并且真的不知道对于上述条件我必须做什么。如果可能的话，我不想对缓存的东西使用重定向（即重定向到 /sites/foo.com/asdf），而是我想让 nginx 在访问[http://时直接提供这个文件foo.com/asdf](http://foo.com/asdf)。

进一步：我不想硬编码主机名，因为我想处理未知数量的域。我也不想为此使用多个 Rails 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:52:37.820

得到了一些有用的东西，不是 100%，但现在已经足够好了。

```
server {
  listen   80;
  server_name  *IP*;

  if ($host ~* www\.(.*)) {
    set $host_without_www $1;
    rewrite ^(.*)$ http://$host_without_www$1 permanent;
  }

  location ~ ^/(assets)/  {
    try_files /sites/$host$uri $uri @passenger;

    root /home/cms/app/current/public;
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  location / {
    try_files /sites/$host$uri/index.html /sites/$host$uri $uri @passenger;
    root   /home/cms/app/current/public;
  }

  location @passenger {
   access_log  /home/cms/app/shared/log/access.log;
   error_log  /home/cms/app/shared/log/error.log;
   root   /home/cms/app/current/public;
   passenger_enabled on;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:14:55.143

对于子域，这应该可以解决问题：

```
server {
    server_name ~^(?<subdomain>.+)\.example\.com$;
    access_log /var/log/nginx/$subdomain/access.log;
    location /assets {
        expires max;
    }
    location / {
        proxy_pass http://your_rails_app;
    }
} 
```

不太确定 proxy_pass 设置，因为我使用 Ruby 应用程序的唯一经验是 Gitlab，我正在以这种方式运行它。我希望这至少有一点帮助。

```
server {
    server_name example.com;

    location /assets {
        root /public/sites/$hostname/$request_uri;
        expires max;
    }
} 
```

您必须添加自己的设置并稍微尝试一下，因为我现在没有机会实际测试它。但它应该为您指明方向。

# jquery - jQuery validate plugin: valid remote call bypassess other invalid checks

> ID：13865605
> 
> 赞同：0
> 
> 时间：2012-12-13T17:54:35.280
> 
> 标签：jquery, jquery-validate

I have one remote rule and some other basic required rules. Oddly if my remote rule passes, but some of the other rules fail, it will go ahead and submit the form. I've tried moving the remote rule to the back or front of the list to see if it made a difference, and it didn't. Has anyone encountered this?

[http://jsfiddle.net/LU5sU/7/](http://jsfiddle.net/LU5sU/7/) ( to pass validation, enter test in the promo code box. )

```
$('#ticket-form').validate({
onfocusout: false,
onkeyup: false,
onclick: false,
rules: {
    code: {
        required: true,
        remote: {
            url: "http://www.bobmurdoch.com/ajax.php",
            type: "post",
            async: false,
            data: {
                action: "check_code",
                code: function () {
                    return $("#code").val();
                }                    
            }
        }
    },
    first_name: {
        required: true
    },
    last_name: {
        required: true
    },
    company: {
        required: true
    },
    address: {
        required: true
    },
    city: {
        required: true
    },
    state: {
        required: true
    },
    zip: {
        required: true
    },
    phone: {
        required: true
    },
    email: {
        required: true,
        email: true
    },
    survey_question_1: {
        required: false
    }
},
messages: {
    code: {
        required: "Please enter a valid promo code",
        remote: "Please enter a valid promo code"
    },
    first_name: "Please enter a value for First Name",
    last_name: "Please enter a value for Last Name",
    company: "Please enter a value for Company",
    address: "Please enter a value for Address",
    city: "Please enter a value for City",
    state: "Please enter a value for State",
    zip: "Please enter a value for Zip/Postal Code",
    phone: "Please enter a value for Phone",
    email: {
        required: "Please enter a valid e-mail address",
        email: "Please enter a valid e-mail address"
    }
},
showErrors: function (errorMap, errorList) {
    var errors = '';
    for (var i in errorList) {
        errors = errors + errorList[i].message + "\n"
    }
    if (errors != '') {
        alert(errors);
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:19:05.553

按照[的在线文档`remote:`](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)，我从中删除`async: false,`，`remote:`它似乎按预期工作。

**根据文档：**

```
$("#myform").validate({
  rules: {
    email: {
      required: true,
      email: true,
      remote: {
        url: "check-email.php",
        type: "post",
        data: {
          username: function() {
            return $("#username").val();
          }
        }
      }
    }
  }
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/LU5sU/8/)

**您修改后的代码：**

```
 code: {
        required: true,
        remote: {
            url: "http://www.bobmurdoch.com/ajax.php",
            type: "post",
            data: {
                action: "check_code",
                code: function () {
                    return $("#code").val();
                }                    
            }
        }
    }, 
```

* * *

**根据 OP 的评论进行编辑：**

通过删除用于在弹出窗口中放置错误消息的自定义函数并使用默认`errorPlacement:`函数，我可以证明这是有效的。输入`.invalid`在无效时显示类，`.valid`在有效时显示类。您的问题在其他地方，与我的解决方案无关。

见演示：http: [//jsfiddle.net/LU5sU/11/](http://jsfiddle.net/LU5sU/11/)

# javascript - 使用 D3 将 SVG 画布附加到主体以外的元素

> ID：13865606
> 
> 赞同：21
> 
> 时间：2012-12-13T17:54:48.760
> 
> 标签：javascript, html, d3.js, svg

`<body>`如果脚本不在该元素内，是否可以将 SVG 画布附加到使用 D3.js 以外的元素？

例如，下面的代码不起作用：

```
<html>
<body>
<script src="../../d3.v2.js"></script>
<script>
    var vis = d3.select("#container")
        .append("svg:svg")
          .attr("width",w)
          .attr("height",h);
</script>

<div id="container"></div>

</body> 
```

我见过使用的所有示例，`d3.select("body").append....`但显然我们并不总是希望将画布立即附加到正文。

我发现如果在`<script>`容器 div 内，那么我可以使用`d3.select("#container")`，但对我来说似乎很奇怪，我必须将我的脚本包含在我想要画布的特定容器中。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-13T17:57:51.023

您正在尝试`#container`在它存在之前进行选择。您需要将代码放入`onload`或移动页面下方的脚本`#container`。

# javascript - 如果变量是全局变量，为什么需要将参数传递给 javascript 中的自执行函数？

> ID：13865607
> 
> 赞同：5
> 
> 时间：2012-12-13T17:54:49.603
> 
> 标签：javascript, jquery, underscore.js, self-executing-function

我正在查看[underscore.js 库](http://underscorejs.org/underscore.js)的代码（jQuery 做同样的事情），只是想澄清一下为什么将窗口对象传递给自执行函数。

例如：

```
(function() {            //Line 6
  var root = this;       //Line 12
  //Bunch of code
}).call(this);           //Very Bottom 
```

既然`this`是全局的，为什么要传递给函数呢？下面的工作也不行吗？这样做会出现什么问题？

```
(function() {
  var root = this;
  //Bunch of code
}).call(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T18:15:55.633

我怀疑原因是 ECMAScript 5 [strict mode](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode#.22Securing.22_JavaScript)。

在非严格模式下，这个 IIFE

```
(function() {
   console.log(this); // window or global
})(); 
```

记录`window`对象（或`global`对象，如果您在 node.js 服务器上），因为全局对象是`this`针对不作为对象方法运行的函数提供的。

将该结果与

```
"use strict";
(function() {
   console.log(this); // undefined
})(); 
```

In strict mode, the `this` of a bare-invoked function is undefined. Therefore, the Underscore authors use `call` to supply an explicit `this` to the anonymous function so that it is standardized across strict and non-strict mode. Simply invoking the function (as I did in my examples) or using `.call()` leads to an inconsistency that can be solved with `.call(this)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:09:31.747

jQuery 做同样的事情，您可以通过沿着这些行搜索找到关于 SO 问题的几个答案。

在局部范围内有一个始终可用的全局变量有两个原因，这两个原因`window`都是为了进行相当小的优化：

1.  加载时间。查找局部变量比查找全局变量花费的时间要少一点，因为解释器不必查找上下文树那么远。在 Underscore 或 jQuery 大小的函数长度上，理论上可以在较慢的机器上加起来不​​那么微不足道的时间。

2.  文件大小。Javascript 缩小依赖于这样一个事实，即变量可以命名任何东西，只要它们是一致的。`myLongVariableName`变成`a`缩小版。当然，问题是这只适用于脚本内定义的变量；它从外部提取的任何东西都必须保持相同的名称才能工作，因为如果您缩小`window`到`pr`解释器将不知道您在说什么。通过使用对自身的引用来遮蔽它，Minify 可以执行以下操作：

    ```
    (function(A){ B(A, {...}); A.doStuff(); //etc });})(window) 
    ```

    每次你本来应该放`window`（6个字符）的时候，你现在有`A`（1个字符）。`window`同样，不是主要的，但在需要定期显式调用以进行范围管理的大文件中，它可能很重要，如果您使用它两次，您已经获得了几个字符的优势。在由有限的服务器和可能有糟糕的互联网计划的人提供服务的大型流行图书馆中，每个字节都很重要。

* * *

阅读有关问题的评论后进行编辑：

如果您查看[实际`function.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)执行的操作，您的第二个片段实际上不会起作用 -[传入](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)`this`的不是参数，它是函数的显式调用上下文，您必须将其提供给`.call()`. 文件开头的行用于上述两个目的。明确设置上下文的原因是面向`call`未来的——现在，匿名函数获取全局上下文，但理论上这可能会改变，在未来的 ECMA 规范中不鼓励使用，或者在小众浏览器上表现异常。对于一半的互联网使用的东西，最好更加明确并完全避免这个问题。`this`/ _`window`顶级选择我认为必须与担心非PC设备（即移动设备）可能会为其顶级对象使用不同的名称有关。

# sql - SQL select 语句的字符串转换

> ID：13865608
> 
> 赞同：0
> 
> 时间：2012-12-13T17:54:52.537
> 
> 标签：sql, vb.net

使用 SELECT 语句查询数据库并返回格式为：name1,name2,name3

根据数据库条目，此结果可能有任意数量的名称：name1,name2...name(n)

我想使用这些数据来查询另一个数据库，如下所示：

```
SELECT Name, SerialNo, Model FROM InstrumentTable where ID=1 and InstName IN name1,name2,name3 
```

为此，我需要将 name1,name2,name3 转换为 ('name1','name2','name3')

我尝试将字符串拆分为字符串数组

```
 Dim ref1s As String = cmdf1.ExecuteScalar()
    Dim fields() As String = Nothing
    fields = ref1s.Split(",") 
```

然后将它们连接在一个数组中

```
For i As Integer = 0 To fields.Count - 1
     MsgBox(String.Concat("'", fields(i), "'"))
 Next 
```

但我还没有弄清楚该怎么做。

在字符串的开头和结尾添加括号应该不是问题，只需将引号添加到每个名称并用逗号分隔它们就是问题所在。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:05:30.783

用户557425，

这样的事情可能会为您指明正确的方向：

```
Dim lst As List(Of String)
For i As Integer = 0 to fields.Count - 1
    if i = fields.Count - 1 Then
       lst.Add(fields(i) & "'")
    Else
        lst.Add(fields(i) & "','")
    End if
Next

Dim sqlSB As StringBuilder
sqlSB.Append("SELECT * FROM TABLE WHERE BLAH IN(")
For each s As String in lst
     sqlSB.Append(s)
Next

'use the stringbuilder as command text in a SqlCommand... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:08:16.390

你有一点以前

```
For i As Integer = 0 To fields.Count - 1
  fields[i] = String.Concat("'",fields[i],"'")
Next 
```

然后

```
strValue = fields.Join(',') 
```

# css - 仅在主页上的 CSS 背景图像，在 Rails 应用程序中

> ID：13865610
> 
> 赞同：1
> 
> 时间：2012-12-13T17:54:54.433
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我目前正在开发 Rails 应用程序，并且能够获取图像作为主页的背景。但是，我将代码放在主页 css 文件中，但它也被应用于应用程序 css 文件。这导致图像成为应用程序中所有页面的背景。

在 Rails 3.1+ 应用程序中，如何让背景图像仅出现在主页上？

我试图将背景图像 css 块移动到不同的 css 文件，但它仍然适用于所有页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:57:47.967

为您想要的页面声明样式内联，如果您在 CSS 文件中声明并将这些文件链接到多个文档中，那么显然它将采用相应元素的背景图像

假设它就像`index.html`

```
<style>
body {
   background-image: url('#');
}
</style> 
```

或者简单地声明一个类并应用于该特定页面

```
.unique { /* In Your CSS File */
   background-image: url('#');
}

<body class="unique"></body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:58:46.207

仅在该页面的 body 标记上使用类名。为该类创建相应的 CSS 声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T03:38:21.473

我不确定这是否是最好的方法，但我通过制作两种应用程序布局（一种用于主页`(home_application.html.erb`）和一种用于所有其他页面（`application.html.erb`），在我的一个应用程序中解决了这个问题。在你的 CSS 文件中添加一个 id 标签：

```
#home {
  background: url(example.jpg);
} 
```

制作`application.html.erb`：

```
<!DOCTYPE html>
<html>
  <head>
    header
  </head>

  <body>
    stuff
  </body>

</html> 
```

制作`home_application.html.erb`：

```
<body id="home">
    stuff
</body> 
```

然后在您的`static_pages_controller`（或您用于主页的任何控制器）中输入：

```
def home
    render 'layouts/home_application.html.erb'
end 
```

`<body>`这将通过仅更改标签的 id 来呈现具有主页背景图像的布局和所有其他页面的所有其他页面的布局。

# c# - MVC 4 中的图表

> ID：13865612
> 
> 赞同：4
> 
> 时间：2012-12-13T17:54:57.083
> 
> 标签：c#, .net, asp.net-mvc, charts

我已经搜索了很长一段时间，但无法找到我要找的东西。

我想在我的控制器中生成一个图表并通过 ViewModel 将其提供给我的视图。我发现的两篇最有用的文章是

[http://www.codecapers.com/post/Build-a-Dashboard-With-Microsoft-Chart-Controls.aspx#tb](http://www.codecapers.com/post/Build-a-Dashboard-With-Microsoft-Chart-Controls.aspx#tb)

[ASP.Net MVC 3 中的图表](https://stackoverflow.com/questions/6281520/charting-in-asp-net-mvc-3)

两者都向您展示了如何创建图表对象，但它们并不能帮助我以我想要的方式在视图中显示它。我知道您可以保存图像并简单地从视图中打开图像，但是如果我希望图表具有交互性怎么办？单击饼图上的切片或其他有用的“向下钻取”功能时，可能会转到另一个页面。

我很困惑吗？纯 asp.net mvc 是否可以实现这种功能，或者我是否将花哨的功能与 3rd 方图表库混淆了？如果是前者，我如何`public Chart queueChart { get; set; }`在我的视图中呈现我的图表对象？

顺便说一句，我对使用 3rd 方图表库不感兴趣。

控制器：

```
//Query from db into model.queue
Chart chart = new Chart();
chart.Width = 600;
chart.Height = 400;
chart.Titles.Add("Title goes here");
chart.ChartAreas.Add(new ChartArea());
Series series = new Series();

series.ChartType = SeriesChartType.Pie;

foreach( Queue i in model.queue )
{
    string x = i.name;
    double y = i.count;

    series.Points.AddXY(x, y);
}

chart.Series.Add(series);

model.queueChart = chart; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T18:00:56.000

为什么不使用做图表的 JavaScript 库呢？这些将提供许多功能并允许您拥有交互式图表。

[高图](http://www.highcharts.com)

[剑道UI](http://www.kendoui.com/dataviz.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:16:05.550

如果您想要交互性，您应该考虑使用 Javascript 库。
[jqChart](http://www.jqchart.com/)是一个功能强大且易于使用的基于 jQuery 的库，它们还提供了 MVC 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T19:58:43.610

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/dd456772.aspx)介绍了如何使用客户端图像映射在 Chart 控件中启用交互性。

谷歌搜索“MVC3 图像地图图表”将找到一些资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-19T10:06:37.717

在使图表具有交互性时，最好的方法是使用高位图表。这些都是非常用户友好的，更不用说它们是最具交互性的单元，以及所有向下钻取功能。信不信由你，但你想在得出任何结论之前先检查一下。查看链接，它包含所有说明以及示例。

[https://dotnethighcharts.codeplex.com/](https://dotnethighcharts.codeplex.com/)

确保安装包：Dotnet.HighCharts

这可以通过 TOOLS->Library Package Manager->Package Manager Console 来完成。

PM>Install-Package DotNet.HighCharts

然后在视图中确保拖动脚本文件（/jquery-1.5.1.min.js 和 /highcharts.js）。从而创建参考。（在 MVC 中）随着

@model DotNet.Highcharts.Highcharts

@（模型）

# java - Cant create table in database from java app

> ID：13865618
> 
> 赞同：0
> 
> 时间：2012-12-13T17:55:18.667
> 
> 标签：java, mysql, database

This is my code..Just starting with mySQL. IDE is netbeans 7.2.1

```
 package monitordata;

    import java.io.*;
    import java.sql.*;
    import java.util.*;
    import javax.xml.ws.Endpoint;

    public class monitorDataMF {

    public static void main(String[] args){
        Statement stmt = null;
        String dbname = null;
        String dbuser = null;
        String dbpass = null;
        String dbport = null;
        String dbIP = null;

        //pairnoume tis parametrous gia ti sindesi me ti vasi apo to properties file
        try{                
            Properties prop = new Properties();
            prop.load(new FileInputStream("mySQL.properties"));
            dbname = prop.getProperty("dbname");
            dbuser = prop.getProperty("dbuser");
            dbpass = prop.getProperty("dbpass");
            dbport = prop.getProperty("dbport");
            dbIP = prop.getProperty("dbIP");
        }catch(IOException e){e.printStackTrace();}

        //connecting with database
        try{
            Connection conn = null;
            Class.forName("com.mysql.jdbc.Driver");
            String dbUrl = "jdbc:mysql://" + dbIP + ":" + dbport + "/" + dbname;
            conn = DriverManager.getConnection(dbUrl, dbuser, dbpass);
            String createTable = "CREATE TABLE IF NOT EXISTS test"
                    + "(NAME VARCHAR(40) NOT NULL)";
            //String insertData = "INSERT INTO test "
            //        + "VALUES ('Stelios','Thwmas')";
            stmt = conn.createStatement();
            stmt.executeUpdate(createTable);
            //stmt.executeUpdate(insertData);
        }catch(ClassNotFoundException | SQLException e){}
    }
} 
```

I execute the update, i go to Services>WebInterfaces i hit refresh and the table isn't there. I am not sure if i should executeUpdate or executeQuery

Update: This is the actual error Caught exception: Access denied for user 'root '@'localhost' (using password: YES) but i printed the pass that i sent to the connection statement and it corresponds with the pass needed for the database to start. Not sure what i am doing wrong

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:43:03.320

可能你会在执行中出错，你没有在 catch 语句中记录异常。修改代码以查看错误。此外，您必须正确关闭连接。

```
 Connection conn = null;
 try{
        Class.forName("com.mysql.jdbc.Driver");
        String dbUrl = "jdbc:mysql://" + dbIP + ":" + dbport + "/" + dbname;
        conn = DriverManager.getConnection(dbUrl, dbuser, dbpass);
        String createTable = "CREATE TABLE IF NOT EXISTS test"
                + "(NAME VARCHAR(40) NOT NULL)";
        //String insertData = "INSERT INTO test "
        //        + "VALUES ('Stelios','Thwmas')";
        stmt = conn.createStatement();
        stmt.executeUpdate(createTable);
        //stmt.executeUpdate(insertData);
    }catch(ClassNotFoundException exp){
       System.err.println("Caught IOException: " + exp.getMessage()); 
    }catch( SQLException e) {
      System.err.println("Caught IOException: " + e.getMessage());
    } finally {
       if(conn != null) {
         conn.close();
       }
    } 
```

# java - Not writing in Unicode when exported

> ID：13865623
> 
> 赞同：0
> 
> 时间：2012-12-13T17:55:40.517
> 
> 标签：java, file, unicode, printwriter

So I have a programm that is supposed to write text, which uses unicode, to a file. Everythhing works when I do it through Eclipse, but not when exxported. Here is what it looks like when I do it through Eclipse:

> Все товары: Ted По цене: 100руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп
> По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб
> 
> Проданные товары: Ted По цене: 100руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене:
> 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб Дерп По цене: 10руб
> 
> Не проданные товары:
> 
> Всего пренесенно: 11 Кол-во проданно: 11 Кол-во не проданно: 0 Выручка: 200руб

And this is what it looks like when I do it from a built jar:

> ??? ??????:
> 
> ????????? ??????: Ted ?? ????: 100??? ???? ?? ????: 10??? ???? ?? ????: 10??? ???? ?? ????: 10??? ???? ?? ????:
> 10??? ???? ?? ????: 10??? ???? ?? ????: 10??? ???? ?? ????: 10??? ???? ?? ????: 10??? ???? ?? ????: 10??? ???? ?? ????: 10???
> 
> ?? ????????? ??????:
> 
> ????? ??????????: 11 ???-?? ????????: 11 ???-?? ?? ????????: 0 ???????: 200???

Here is my code:

```
public void writeToFile(Purchase purchase, String dir) throws Exception {
        file = new File(dir);

        if (!file.exists()) {
            file.createNewFile();
        }

        printer.println(purchase.getName() + "   По цене:   "
                + purchase.getPrice() + "руб");
        Timer timer = new Timer();
    }

    public void writeFooter(List<Purchase> list) throws Exception {

        int amountSold = 0;
        int amountNotSold = 0;

        int moneyRecieved = 0;

        if (file == null) {
            file = new File(dir);
        }
        if (!file.exists()) {
            file.createNewFile();
        }

        openStreams();

        printer.println("Все товары: ");

        for(int i = 0; i < list.size();i++){
            writeToFile(list.get(i), dir);
        }

        printer.println();
        printer.println("Проданные товары: ");

        for (int i = 0; i <= list.size() - 1; i++) {
            if (list.get(i).isSold()) {
                writeToFile(list.get(i), dir);
                amountSold++;
                moneyRecieved += list.get(i).getPrice();
            }
        }
        printer.println();
        printer.println("Не проданные товары: ");
        for (int i = 0; i <= list.size() - 1; i++) {
            if (!list.get(i).isSold()) {
                writeToFile(list.get(i), dir);
                amountNotSold++;
            }
        }

        printer.println();
        printer.println("Всего пренесенно: " + list.size());
        printer.println("Кол-во проданно: " + amountSold);
        printer.println("Кол-во не проданно: " + amountNotSold);
        printer.println("Выручка: " + moneyRecieved + "руб");

        closeStreams();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:59:00.550

下面的编码“UTF-8”可以省略，然后使用当前平台编码：`System.getProperty("file.encoding")`.

```
PrintWriter printer = new Printer(
        new OutputStreamWriter(new FileOutputStream(file), "UTF-8")); 
```

还要注意编辑器编码和javac编译器编码是一样的；如果你想传递来源。也许在 IDE 中也将它们显式设置为 UTF-8。

# ruby-on-rails - Capybara 匹配器用于按钮或链接的存在

> ID：13865625
> 
> 赞同：33
> 
> 时间：2012-12-13T17:55:51.953
> 
> 标签：ruby-on-rails, capybara

网页上的用户不区分“按钮”和“链接样式为按钮”。有没有办法添加检查页面上是否存在“按钮或链接”？

例如水豚有步骤：

```
page.should have_button('Click me') 
```

它找不到样式为按钮的链接。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-17T10:57:25.343

更新的答案（应该在 RSpec 3.0+ 中弃用匹配器）：

```
expect(page).to have_selector(:link_or_button, 'Click me') 
```

前：

```
page.should have_selector(:link_or_button, 'Click me') 
```

随后在`click_link_or_button`此处定义：[https ://github.com/jnicklas/capybara/blob/master/lib/capybara/node/actions.rb#L12](https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/actions.rb#L12)

```
def click_link_or_button(locator)
  find(:link_or_button, locator).click
end
alias_method :click_on, :click_link_or_button 
```

它调用一个选择器`:link_or_button`。这个选择器在这里定义：[https ://github.com/jnicklas/capybara/blob/master/lib/capybara/selector.rb#L143](https://github.com/jnicklas/capybara/blob/master/lib/capybara/selector.rb#L143)

```
Capybara.add_selector(:link_or_button) do
  label "link or button"
  xpath { |locator| XPath::HTML.link_or_button(locator) }
end 
```

它调用此方法：[http ://rdoc.info/github/jnicklas/xpath/XPath/HTML#link_or_button-instance_method](http://rdoc.info/github/jnicklas/xpath/XPath/HTML#link_or_button-instance_method)

```
# File 'lib/xpath/html.rb', line 33

def link_or_button(locator)
  link(locator) + button(locator)
end 
```

所以我试图检查选择器的存在并且它有效：

```
page.should have_selector(:link_or_button, 'Click me') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-13T08:52:49.090

使用**期望**语法

```
expect(page).to have_selector(:link_or_button, 'Click me') 
```

这无需定义自定义匹配器即可工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T00:30:12.857

您还可以使用自定义匹配器

```
RSpec::Matchers::define :have_link_or_button do |text|
  match do |page|
    Capybara.string(page.body).has_selector?(:link_or_button, text: text)
  end
end 
```

然后做

```
expect(page).to have_link_or_button('Login') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T07:56:36.067

就我个人而言，我会给你的按钮或链接一个 id 并使用

`page.should have_css('#foo')`

这样您就可以参考链接或按钮，而不必担心其实现。

我总是觉得这很有用：[https ://gist.github.com/428105](https://gist.github.com/428105)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T19:30:09.033

我认为您可以使用查找按钮实例方法：

```
(Capybara::Element) find_button(locator) 
```

使用 ID、名称、值。

或者如果你想要一个链接

```
(Capybara::Element) find_link(locator) 
```

来自：[http ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#find_button-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#find_button-instance_method)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-04T15:08:15.423

我有一个奇怪的案例，其中一些冒烟测试在各种以客户为中心的登录页面上进行，这些页面在执行登录提交按钮时略有不同......由用户、组织等的 Cucumber 表驱动。

```
# A bit of a hack, org_name is normally a subdomain, but sometimes it is the complete domain
def login(user, org_name)
  # Use the below to automatically hit each user's org's server
  if org_name.include? '.com'
    Capybara.app_host = "http://#{org_name}"
  else
    Capybara.app_host = "http://#{org_name}.mydomain.com"
  end

  visit '/'
  fill_in 'username', :with => user
  fill_in 'userpwd', :with => '***'
  begin
    page.find(:link_or_button, 'submit')
    click_on 'submit'
  rescue Capybara::ElementNotFound
    page.find(:link_or_button, 'Log In')
    click_on 'Log In'
    rescue Capybara::ElementNotFound
      pending "Need to determine how to invoke the Login button for #{org_name} near Line ##{__LINE__} of #{__method__} in #{__FILE__} "
  end

  # -----------------------
  # Work-around for modal popup saying SSL is mismatched if you are using actual production URLs
  # The rescue is for cases that do not exhibit the modal pop-up
  page.driver.browser.switch_to.alert.accept rescue Selenium::WebDriver::Error::NoAlertPresentError

  # Ensure that login was successful
  page.should_not have_content 'Login failed'
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-06T06:47:24.523

如果是 html：

```
<a class="top-menu__item">text123
    <span class="label">
        <span class="label">86</span>
    </span>
</a> 
```

不行：

```
 assert page.has_selector?(:link_or_button, text: 'text123')
  assert page.should have_selector(:link_or_button, text: 'text123') 
```

# actionscript-2 - How do you stop a swf from going blank after a user clicks print or cancel print using AS2?

> ID：13865626
> 
> 赞同：1
> 
> 时间：2012-12-13T17:55:52.083
> 
> 标签：actionscript-2

I have an embedded swf that contains a print button which allows users to print some or all pages (AS 2.0) of the swf. The browser's print dialog box opens when the user clicks the print button from the swf. However, after the user clicks print, the swf become blank. This only occurs in IE and FF - works fine in Chrome. Here's the AS2.0 code:

```
print_btn.onPress = function() {
    attachMovie("printbg", "printbg", 5000);
    printbg._x = 623;
    printbg._y = 360;
    attachMovie("printall", "printall", 5001);
    printall._x = 621;
    printall._y = 316;
    attachMovie("printun", "printun", 5002);
    printun._x = 622;
    printun._y = 342;
    attachMovie("printcancel", "printcancel", 5003);
    printcancel._x = 622;
    printcancel._y = 367;
    printcancel.onPress = function() {
        removeprint();
    };
    function removeprint() {
        removeMovieClip("printbg");
        removeMovieClip("printall");
        removeMovieClip("printun");
        removeMovieClip("printcancel");
    }
    printall.onPress = function() {
        printallterms();
        removeprint();
    };
    printun.onPress = function() {
        printunlearnedterms();
        removeprint();
    };
};
function printallterms() {
    pageno = 0;
    toptitle = "<b>"+title+"</b>\nALL\n\n";
    attachMovie("printpage_mov", "printall"+pageno, 500);
    this["printall"+pageno]._x = 1000;
    this["printall"+pageno]._y = 0;
    this["printall"+pageno].printtxt.htmlText = toptitle;
    for (x=1; x<=20; x++) {
        if (this["printall"+pageno].printtxt.textHeight+45>680) {
            pageno++;
            attachMovie("printpage_mov", "printall"+pageno, 501);
            this["printall"+pageno]._x = 1000;
            this["printall"+pageno]._y = 0;
            this["printall"+pageno].printtxt.htmlText = "";
        }
        this["printall"+pageno].printtxt.htmlText += "<b>"+term_i[x]+"</b>"+"\n";
        this["printall"+pageno].printtxt.htmlText += definition_i[x]+"\n\n";
    }
    printjobs();
}
function printunlearnedterms() {
    pageno = 0;
    toptitle = "<b>"+title+"</b>\nREMAINING\n\n";
    attachMovie("printpage_mov", "printall"+pageno, this.getNextHighestDepth());
    this["printall"+pageno]._x = 1000;
    this["printall"+pageno]._y = 0;
    this["printall"+pageno].printtxt.htmlText = toptitle;
    for (x=1; x<=20; x++) {
        if (this["printall"+pageno].printtxt.textHeight+45>680) {
            pageno++;
            attachMovie("printpage_mov", "printall"+pageno, this.getNextHighestDepth());
            this["printall"+pageno]._x = 1000;
            this["printall"+pageno]._y = 0;
            this["printall"+pageno].printtxt.htmlText = "";
        }
        if (learned[x] == 0) {
            this["printall"+pageno].printtxt.htmlText += "<b>"+term_i[x]+"</b>"+"\n";
            this["printall"+pageno].printtxt.htmlText += definition_i[x]+"\n\n";
        }
    }
    printjobs();
}
function printjobs() {
    var allprintjob:PrintJob = new PrintJob();
    allprintjob.start();
    pagesToPrint = 0;
    while (pagesToPrint<=pageno) {
        allprintjob.addPage(this["printall"+pagesToPrint], {xMin:0, xMax:540, yMin:0, yMax:700});
        //trace(this["printall"+pagesToPrint]._height);
        removeMovieClip(this["printall"+pagesToPrint]);
        pagesToPrint++;
    }
    if (pagesToPrint>0) {
        allprintjob.send();
    }
    delete allprintjob;
} 
```

Please help!

# jquery - backbone.js json -> template

> ID：13865628
> 
> 赞同：0
> 
> 时间：2012-12-13T17:56:07.077
> 
> 标签：jquery, json, backbone.js-collections

This is my first time using backbone.js. I am trying to get a json string to parse out and populate a template I have.

JSON:

```
[
{
    "nav":{
            "feel":"Feel Well",
            "eat":"Eat Well",
            "move":"Move Well",
            "work":"Work Well",
            "sleep":"Sleep Well",
            "play":"Play Well"
    }
}
] 
```

CODE:

```
//collection        
WH.ApplicationCollection = Backbone.Collection.extend({

  defaults: {
    model: WH.ApplicationModel
  },

  model: WH.ApplicationModel,
  url: 'json/test.json'

});

// View
WH.applicationView = Backbone.View.extend({

el: 'body',
template: _.template($('#header-template').html()),

initialize: function(){
    this.collection = new WH.ApplicationCollection();
    this.collection.bind("reset", this.render, this);
    this.collection.fetch();
},

render: function(){
    console.log(this.collection.toJSON());
    $(this.el).html(this.template(this.collection.toJSON));
    return this;
} 
```

});

MARKUP:

```
 <script id="header-template" type="text/template">
    <div id="header">
        <ul id="navigation">
            <li id="logo"><a data-target="home" data-index="0" href="#/home"><h1></h1></a></li>
            <% _.each(nav, function(navitem){ %>
                <li><a data-target="<%= navitem %>" data-index="1" href="#/<%= navitem %>">Feel Well</a></li>
            <% }); %>
        </ul>
    </div>
</script> 
```

The console.log shows that the JSON string is being read. But when it comes to the actual template. it gives me the error:

Uncaught ReferenceError: nav is not defined

which is from the markup.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:31:53.690

```
render: function(){
    console.log(this.collection.toJSON());
    $(this.el).html(this.template(this.collection.toJSON()));
    return this;
} 
```

toJSON 是一个**函数**

你应该检查你的模板标记我很确定它会根据你的模型失败。

我引用你的代码

```
render: function(){
    console.log(this.collection.toJSON());
    $(this.el).html(this.template(this.collection.toJSON));
    return this;
} 
```

# eclipse - Eclipse 调试器在切换文件时失去焦点

> ID：13865634
> 
> 赞同：5
> 
> 时间：2012-12-13T17:56:38.417
> 
> 标签：eclipse, debugging, focus, keyboard-shortcuts

调试时（Mac 上的 Juno、SR1）我更喜欢使用键盘键而不是鼠标来执行单步、跨步、跨步、执行等操作。但是这些键盘快捷键似乎仅在编辑器处于焦点时才有效。真正的问题发生在进入或退出另一个文件时。编辑器正确显示新文件中的当前行，但该文件**未**聚焦。因此，我必须抓住鼠标并在该视图中单击以重新启用热键。

这将我的调试拖得很慢，因为我经常不得不使用鼠标而不是触摸打字。搜索并没有完全找到这个问题。有人有变通办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:52:59.937

这取决于 Eclipse 版本。Eclipse 4.2 在 Windows 和 Ubuntu 上很糟糕 - 由于一个错误

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=372941](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372941)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T11:36:44.540

也许您可以更改键绑定：

转到Window->Preferences-General->Keys，搜索“step into”等。然后在选择框中更改：“When：”到“In Windows”（来自“Debugging”）或尝试它以获得结果你要。

将其设置为“在 Windows 中”，我可以从任何集中的 Eclipse 组件（例如包管理器、控制台、断点、服务器等）“进入”。甚至在进入文件时也是如此。

# php - Scope of Static Members in PHP and Concurrency

> ID：13865635
> 
> 赞同：5
> 
> 时间：2012-12-13T17:56:39.510
> 
> 标签：php, concurrency, static, scope, member

I have a class that is declared in my application that has a private static member like so:

```
class SomeClass{
private static myMember =  array(); 

public static getterFunction(){}
public static setterFunction(){}

} 
```

My question / concern is that multiple requests (i'm thinking like a thread in Java) would be able to modify this static member. My understanding of php scope and static members is that they are in the request scope and a new variable is created for each new request and subsequently destroyed after the request has been fulfilled. That said, this would be a difficult thing to test (at least i can't think of an easy way) so i'd rather be safe than sorry.

Is my assessment correct? The PHP docs i've read are pretty crappy in terms of detail so I haven't been able to authoritatively answer yet...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T18:00:45.123

除非您明确地这样做（例如使用会话、数据库、文件、共享内存），否则没有任何数据是持久的或在 PHP 脚本的不同实例之间*共享*。每个 PHP 实例都是它自己的东西，每个新请求都会导致 web 服务器启动一个单独的实例。

所以是的，你是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:06:53.717

默认情况下，您在 PHP 中没有共享内存。每个请求都在单独的进程中处理，因此它们彼此不知道。

我希望我正确理解了你的问题。

例如：

您有一个简单的 script.php 文件，它在传递 GET 参数时在类中设置私有字段：

```
<?
class A {
  private $x = 1;
  public function setX($x) {$this->x = $x;}
  public function getX() {return $this->x;}
}

$a = new A();
if (!empty($_GET['x'])) {
  $a->setX($_GET['x']);
  sleep(3);
}

echo $a->getX();
?> 
```

您一次执行两个请求：

```
GET /script.php?x=5
GET /script.php 
```

第二个请求将打印您“1”。是的，你是对的！

# java - Waiting till previous function is completely executed

> ID：13865636
> 
> 赞同：0
> 
> 时间：2012-12-13T17:56:42.340
> 
> 标签：java, android, recursion, wait

I have a series of IF statements in order of execution, my dilemma is if one of the IF statements is entered I would like the calling method to wait till the called function is finished. The thing is my called function is recursive so I have no idea when it's going to end. Here's the calling method's code.

```
 if(log.isChecked())
                {
                    runlog(sdPath.getAbsolutePath());
                }
                if(tmp.isChecked())
                {
                    runtmp(sdPath.getAbsolutePath());
                }
                if(txt.isChecked())
                {
                    runtxt(sdPath.getAbsolutePath());
                }
                if(bf.isChecked())
                {
                    runbf(sdPath.getAbsolutePath());
                }
                if(ed.isChecked())
                {
                    runed(sdPath.getAbsolutePath());
                } 
```

If log.isChecked() is entered, I would like the calling function(the code I've shown here, that function) to wait till it checks the next condition which is tmp.isChecked()

As I mentioned before ALL the called functions runlog, runtmp, runtxt, runbf, runed are recursive. How do I achieve what I want?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:18:28.223

我认为电影“盗梦空​​间”最好地解释了递归。你有 3 件事要做。

> 1.  去睡觉。
> 2.  梦。
> 3.  起床吃一碗麦片。

想象你在做梦，然后在那个梦里有一个梦。你现在不能醒来吃饭，直到你退出更深的梦境并完成当前的梦境。

这基本上就是你的例子中发生的事情，除了你没有做梦你跑了第一个 if 并且你不能退出它，直到它达到它的返回条件然后你才能醒来并吃东西（进入第二个 if）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:01:42.380

这应该默认发生。递归的嵌套函数在这里没有区别。

每个 if 块只会在前一个块完成后执行，除非您的嵌套函数正在启动线程或类似的东西。

# c++ - std::string 类查找函数未返回预期结果。我可能使用不正确

> ID：13865642
> 
> 赞同：0
> 
> 时间：2012-12-13T17:57:09.913
> 
> 标签：c++

使用字符串类的 find 方法，我在查询中没有得到正确的结果。这是我的代码

```
int main()
{
    string phoneData;
    string name;
    string phoneNumbers[51];
    ifstream inputFile;
    inputFile.open("phonebook");
    int i = 0;
    while (getline(inputFile, phoneData))
    {
        phoneNumbers[i] = phoneData;
        i++;
    }
    cout << "Enter a name or partial name to search for: ";
    getline(cin, name);
    cout << endl << "Here are the results of the search: " << endl;

    for(int i =0;i<50;i++)
    {
        if (name.find(phoneNumbers[i]) == 0)
            cout << phoneNumbers[i] << endl;
    }
    inputFile.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:00:47.950

你没有正确使用它。string::find() 找到匹配时返回开始位置，如果没有找到匹配则返回 string::npos。您也可以向后搜索。您在 'phoneNumbers[i] 中寻找 'name'，而不是相反。您在循环内的检查应如下所示：

```
if (phoneNumbers[i].find(name) != string::npos)
    cout << phoneNumbers[i] << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:01:32.950

改变

```
if (name.find(phoneNumbers[i]) == 0) 
```

到

```
if (phoneNumbers[i].find(name) != std::string::npos) 
```

前者试图在名称中找到 phoneNumbers[i]。第二个（我相信这是您想要的）是在 phoneNumbers[i] 中搜索名称。第二，失败返回`std::string::find`不`std::string::npos`为零。

# linux - 如何使用 sed 删除前导数字？

> ID：13865651
> 
> 赞同：3
> 
> 时间：2012-12-13T17:57:38.640
> 
> 标签：linux, sed

我有一个文件：

```
$ cat file 
1 Fred
2 Fred3
3 Fred3
4 Fred3
5 Fred3
6 Fred3
7 Fred3
8 Fred3
9 Fred3
10 Fred3
11 Fred3
12 Fred288 
```

我想删除前导数字，输出应该是这样的：

```
$ cat file 
Fred
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred288 
```

如何使用 sed 实现这个目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T18:00:14.917

与`sed`：

```
sed 's/^[0-9]\+ //' file
Fred
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred3
Fred288 
```

`sed -i 's/^[0-9]\+ //' file`将更改存储回文件。

* * *

我也建议使用`cut`这个

```
cut -d' ' -f2 file 
```

选项：

> -d, --delimiter=DELIM 使用 DELIM 而不是 TAB 作为字段分隔符
> 
> -f, --fields=LIST 只选择这些字段；还打印任何不包含分隔符的行，除非指定了 -s 选项

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T17:59:40.563

这将打印每行中的第二个单词：

```
awk '{print $2}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T08:51:01.217

我们可以使用 sed 来做到这一点

```
sed -r 's/^[0-9]+//g' file 
```

sed -r 告诉我们将使用常规 expersion。我们被告知 sed 从“^”行的开头开始，并告诉我们以多种形式“//g”查找数字“[0-9]+”全局执行。

# hook - LD_PRELOAD 和 strace 有什么区别？

> ID：13865656
> 
> 赞同：5
> 
> 时间：2012-12-13T17:57:55.940
> 
> 标签：hook, system-calls, strace, ld-preload

这两种方法都用于收集系统调用以及参数和它们的返回值。我们什么时候喜欢`LD_PRELOAD`，为什么？也许我们可以说我们只能通过收集系统调用，但我们可以通过技巧`strace`收集库调用。`LD_PRELOAD`但是，对于名称为`ltrace`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T19:01:48.830

`strace`正在使用[ptrace(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/ptrace.2.html)系统调用（`PTRACE_SYSCALL`可能），因此将捕获每个系统调用（通过安装的内核挂钩`ptrace`）。它适用于任何可执行文件，甚至是静态链接的可执行文件，或者那些使用您的发行版的 GNU Glibc 以外的其他东西的可执行文件（例如[musl-libc](http://www.musl-libc.org/)或某些汇编编写的实用程序，如旧版本的`busybox`）。

`LD_PRELOAD`技巧使用动态加载器，例如`/lib64/ld-linux-x86-64.so.2`或`/lib/ld.so`（参见[ld.so(8)](http://www.kernel.org/doc/man-pages/online/pages/man8/ld.so.8.html)手册页）等...因此不适用于静态链接的可执行文件（或使用动态加载器和 GNU libc 以外的其他东西的可执行文件）。

`ltrace`大概也是`ptrace`基于。

所有这些都是免费软件，您可以研究它们的源代码（并改进它）。

# sql - 在分区上合并列中的值

> ID：13865657
> 
> 赞同：3
> 
> 时间：2012-12-13T17:57:57.463
> 
> 标签：sql, db2

我选择通过一个例子来问这个问题，因为我认为它最清楚地说明了我正在尝试做的事情。

假设我有下表：

```
member   number  time
------   -----   -----
  1        2     19:21 
  1        4     19:24 
  1       27     19:37
  2        4     19:01
  2        7     21:56
  2        8     22:00
  2        21    22:01 
```

如何获得以下列？

```
member   number  new column
------   -----   ---------
  1        2       2.4.27 
  1        4       2.4.27
  1       27       2.4.27
  2        4       4.7.8.21
  2        7       4.7.8.21
  2        8       4.7.8.21
  2       21       4.7.8.21 
```

编辑：

我正在使用 DB2 SQL。

每个成员的行数不一定相同。

顺序是由时间决定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:29:19.840

根据您的 db2 版本，您可能可以使用[LISTAGG()函数。](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0058709.html)我认为它包含在 9.7 之后的任何 db2 版本中。

例子：

```
select
  member,
  number,
  listagg(number,',') as new_column
from
  tablename
group by
  member 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:15:15.757

在 Oracle 中，这将完成这项工作，

```
select a.member,a.number,b.newcol from table a,(select member,replace(wm_concat(number),',','.') newcol from test11 group by member)b where a.member=b.member; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:39:00.330

我知道回答你自己的问题是不好的形式，但我发现了这个有用的页面：

[https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/aggregating_strings42?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/aggregating_strings42?lang=en)

修改那里的代码给出：

```
create table test (member int, number int, time_stamp time)`;

insert into test values 
(1,2,'19:21'),
(1,4,'19:24'),
(1,27,'19:37'),
(2,4,'19:01'),
(2,7,'21:56'),
(2,8,'22:00'),
(2,21,'22:01');

select 
  member, substr(xmlcast(xmlgroup('.' || number as a order by time_stamp) as varchar(60)), 2)
from test
group by member 
```

# git - git sparsecheckout - 如何拉入不同的目录

> ID：13865660
> 
> 赞同：1
> 
> 时间：2012-12-13T17:58:15.497
> 
> 标签：git, git-submodules, git-subtree, sparse-checkout, pootle

我正在使用 pootle 来允许人们在 PHP Yii 项目中翻译 .po 文件。

一旦翻译者更新了 .po 文件，Pootle 就可以拉取和推送翻译。另外，我们有开发人员在网站上工作，他们也可能会更新翻译文件以添加更多要翻译的文本。

Yii 要求 .po 文件位于：

> yii-project/protected/messages/en_gb/messages.po

Pootle 要求目录结构为：

> pootle/yii-project/en_GB/messages.po

为了让 pootle 拉和推，.git 目录需要在 pootle/yii-project/.git 中。

我曾尝试使用 git sparse checkout，但这会将文件拉入 pootle/yii-project/protected/messages/en_gb/messages.po 不幸的是 pootle 没有收到。

我无法在其他地方提取存储库然后进行软链接，因为那时 pootle 将无法找到 .git 目录。

我真正想做的是一个目录的稀疏检出并将结果映射到另一个目录，即检出：

> pootle/yii-project/protected/messages/ -> pootle/yii-project

我不想使用 git-subtree，因为我希望开发人员或翻译人员能够更新文件。我不想使用子模块，因为我不喜欢额外的拉动开销，我们希望开发人员在一次提交中包含与新功能有关的所有更改（而不是在主项目上的一次提交和一个在子模块上）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:47:33.130

我们找不到使用 git sparsecheckout 的解决方案。

相反，我们使用了子模块。

我们首先提取了 yii-project/protected/messages 目录，并创建了一个名为 yii-project-translations 的新存储库。

然后我们将包括翻译在内的每个目录都小写 - 例如：

```
git mv en_GB en_gb 
```

然后我们将新的存储库作为子模块包含回原来的 yii-project 中：

```
cd yii-project/
git subtree split --prefix=protected/messages --branch=yii-project-translations
cd protected/
git rm -rf ./messages
mkdir messages
pushd messages
git init
git remote add origin git-server:yii-project-translations
git pull ../../ yii-project-translations
git push origin -u master
popd 
```

并将此存储库克隆为 pootle 项目：

```
cd $POOTLE_HOME/translations/
git clone gitolite@git.algo.travel:yii-project-translations yii-project 
```

最后，我们将 pootle 数据库中的几个表更新为小写目录名，所以一切都很好地联系在一起：

```
update pootle_app_language set code = lower(code);
update pootle_app_directory set pootle_path = lower(pootle_path);
update pootle_app_translationproject set real_path = lower(real_path), pootle_path = lower(pootle_path); 
```

@michal-cihar - Weblate 看起来很棒。如果我在我们沿​​着 pootle 路径获得 90% 之前遇到它，我会使用它。谢谢！

# django - Django 动态表单集表单

> ID：13865661
> 
> 赞同：3
> 
> 时间：2012-12-13T17:58:16.790
> 
> 标签：django, django-forms

嗨，我有一个网站，它以零件和数量表的形式输出用户结果。页面上的用户交互可能会导致表格中的行（部分）数量可变。

我需要针对用户保存此部件列表，因此我相信表单集是处理此问题的最佳方法：

**表格.py**

```
class UserBuildForm(forms.Form):
    part = forms.CharField()
    part_quantity = forms.IntegerField() 
```

**视图.py**

```
from django.forms.formsets import formset_factory
from tool.forms import UserBuildForm

def my_view(request):
    ...
    UserBuildFormSet = formset_factory(UserBuildForm)
    formset = UserBuildFormSet()
    ... 
```

我的想法是将表单字段包装在表格 html 中，以便实际输入部件列和数量列（尽管只有数量应该是用户可编辑的）。这样每一行实际上就是一个表格。

现在，我的 ajax 函数通过在表中添加和删除行来工作。我可以添加额外的表单字段作为纯 html 吗？

我应该如何处理这些动态数量的表格？我知道您可以指定使用的表单集`extra`的数量，但我需要验证的表单数量是未知的。

另外 - 这是保存用户产品数据的典型方法的最佳方法吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:41:14.030

*   您可以使用 jquery 添加/删除表单字段
*   表单数量存储在隐藏输入“id_formname_TOTAL-FORMS
*   只需遍历 views.py 中的表单来处理数据：

    对于 formset.forms 中的表单：form.save()

这是 excellet 教程，向您展示如何处理添加/删除表单字段（jquery）： [http ://stellarchariot.com/blog/2011/02/dynamically-add-form-to-formset-using-javascript-and -django/](http://stellarchariot.com/blog/2011/02/dynamically-add-form-to-formset-using-javascript-and-django/)

# javascript - 关于 eval 语句的构造和删除

> ID：13865663
> 
> 赞同：5
> 
> 时间：2012-12-13T17:58:26.173
> 
> 标签：javascript, google-chrome

如果我在 google chrome 控制台中运行以下代码，我会得到以下结果

```
var x = 1;

alert(delete x); // false 
```

* * *

```
eval('var y = 2');

alert(delete y); // true 
```

为什么在第一个例子中变量没有被删除，而在第二个例子中它被删除了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:41:49.587

[来自 Mozilla JS 文档`delete`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)：

> `delete`仅对对象的属性有效。它对变量或函数名称没有影响。

提供的示例与您的示例相似。

```
x = 42;         // creates the property x on the global object
var y = 43;     // declares a new variable, y

delete x;       // returns true  (x is a property of the global object and can be deleted)
delete y;       // returns false (delete doesn't affect variable names) 
```

那么，为什么`alert(delete y);`有效？我无法确定确切的答案，但基本上你不能依赖 eval 的范围。

我认为`eval('var y = 2');`不会被声明为变量并被*视为属性*，但除了我们的测试结果之外，我还没有找到证据。我将继续研究，看看我是否找到了确切的原因。

其他关于`eval`怪异的文章：

*   [http://wingolog.org/archives/2012/01/12/javascript-eval-considered-crazy](http://wingolog.org/archives/2012/01/12/javascript-eval-considered-crazy)
*   [http://brownplt.github.com/2012/10/21/js-eval.html](http://brownplt.github.com/2012/10/21/js-eval.html)
*   [http://blog.rakeshpai.me/2008/10/understanding-eval-scope-spoiler-its.html](http://blog.rakeshpai.me/2008/10/understanding-eval-scope-spoiler-its.html)

* * *

**编辑 0**

根据@Xavier Holt 的评论，我查找了关于`eval`. [来自 Mozilla Dev 文档的这个范围备忘](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet)单有以下内容：

> **eval 可以捕获赋值，但不能捕获 var 声明**
> 
> eval'd vars 会正常提升，因此 evals 可能会捕获类似于以下内容的分配：
> 
> ```
> function f() {   {
>     let x = "inner";
>     eval("var x = 'outer'");
>     print(x); // "outer"   } 
> } 
> ```

如果我没看错，那么我之前的假设是正确的。`eval()`不`var`通过声明变量来评估声明。它必须创建一个属性或被视为一个属性才能`delete`工作。

# iphone - 带步进的 CAGradientLayer。如何改用CALayer？

> ID：13865665
> 
> 赞同：0
> 
> 时间：2012-12-13T17:58:40.010
> 
> 标签：iphone, cocoa-touch, quartz-graphics

我最近一直在使用一些 CAGradientLayers，我注意到一些非常难看的步骤。所以我做了一些研究，发现可以改用 CALayers。

我对 CoreGraphics 和 Quartz2D 非常陌生，我不知道从哪里开始使用 CALayers 和绘制渐变。

有人可以帮助我吗？或者引导我举一些好的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:44:52.113

渐变层不抖动，这是看到一些步骤的原因。但与此同时，它的速度要快几个数量级，因为它直接在 GPU 上绘制。

请参阅 Apple 的 Quartz 2D Programming Guide 关于渐变的章节：[https ://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_shadings/dq_shadings.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_shadings/dq_shadings.html)

您应该查看可以在 drawRect: 或 drawLayer:inContext: 中使用的 CGGradientRef 来绘制任何渐变。

# jquery - 显示所有类元素，即使是那些在屏幕上不可见的元素

> ID：13865666
> 
> 赞同：1
> 
> 时间：2012-12-13T17:58:43.450
> 
> 标签：jquery, css, html, printing

我正在尝试使用单独的 CSS 文件从我的页面打印出详细信息。我遇到的问题是显示我想要显示的所有内容。我的网页上有一个手风琴，用于不同的详细信息，我希望它显示 3 个手风琴框中的所有相关详细信息，但它仅打印当前打开框中的数据。我希望打印时所有部分中的“约会数据”类中的数据都可见。

```
<div id="accordion">

    <div>
         <h3><a href="#">Section 1</a></h3>
        <div>
            <div class="appointment-image">
                <img alt="img1" src="../../Content/images/img1.jpg" />
            </div>

            <div class="appointment-data">
                <div class="display-box">
                    <div class="display-label">@Html.LabelFor(model => model.Item1)</div>
                    <div class="display-field">@Html.DisplayFor(model => model.Item1)</div>
                </div>
                <div class="display-box">
                    <div class="display-label">@Html.LabelFor(model => model.Item2)</div>
                    <div class="display-field">@Html.DisplayFor(model => model.Item2)</div>
                </div>

            </div>
        </div>
    </div>
         <h3><a href="#">Section 2</a></h3>
        <div>
            <div class="appointment-image">
                <img alt="" src="../../Content/images/img2.jpg" />
            </div>

            <div class="appointment-data">
                <div class="display-box">
                    <div class="display-label">@Html.LabelFor(model => model.Item3)</div>
                    <div class="display-field">@Html.DisplayFor(model => model.Item3)</div>
                </div>                                    
            </div>
        </div>
    </div>
    <div>
         <h3><a href="#">Section 3</a></h3>
        <div class="appointment-image">
            <img alt="" src="../../Content/images/img3.jpg" />
        </div>

        <div class="appointment-data">
            <div class="display-box">
                <div class="display-label">@Html.LabelFor(model => model.Item4)</div>
                <div class="display-field">@Html.DisplayFor(model => model.Item4)</div>
            </div>                                    
        </div>
    </div>

</div> 
```

因为它是一个手风琴，一次只能看到一个部分，我宁愿使用 CSS 和 HTML 而不是 jQuery/JavaScript。手风琴是使用 jQuery 完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:15:21.660

我遇到了同样的问题，我找到了解决方案，为每个 div 提供“id”，让我们分别假设“divAccordion1, divAccordion2, divAccordion3”。以下适用于我的情况，它将打开所有三个手风琴并打印内容。

```
<style type="text/css">
@media print{
#divAccordion1 {display: block !important;}
#divAccordion2 {display: block !important;}
#divAccordion3 {display: block !important;}
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:00:10.497

CSS 无法处理 CLICK 事件。您需要 JavaScript 来执行此操作。

# java - java String.valueOf 问题

> ID：13865668
> 
> 赞同：1
> 
> 时间：2012-12-13T17:58:50.643
> 
> 标签：java, string, value-of

我写了这段代码：

```
byte[] test = {-51};
byte[] test2 = {-51};
byte[] test3 = {-51};
System.out.println(String.valueOf(test));
System.out.println(String.valueOf(test2));
System.out.println(String.valueOf(test3)); 
```

我得到了不同的结果：

```
[B@9304b1
[B@190d11
[B@a90653 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:00:05.037

您看到的数字是[数组 objects 的哈希码](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)。

要查看数组的内容，请使用[`Arrays.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28byte%5B%5D%29)：

```
System.out.println(Arrays.toString(test));
System.out.println(Arrays.toString(test2));
System.out.println(Arrays.toString(test3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:00:19.837

toString pf any 数组不使用数组中的值来创建您可以使用的[`Arrays.toString(test);`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28byte%5B%5D%29)字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T18:07:11.827

[String.valueOf](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28java.lang.Object%29)没有 byte[] 参数，因此它将被处理为`Object`并`toString()`调用该方法，因为数组未实现此方法，所以[Object.toString()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)将在数组中处理，其结果与每个实例。

如果要转换`byte[]`为字符串，请使用构造函数[String(byte[])](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5B%5D%29)或[String(byte[] bytes, Charset charset)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.nio.charset.Charset%29)

```
byte[] test = {-51};
byte[] test2 = {-51};
byte[] test3 = {-51};
System.out.println(new String(test));
System.out.println(new String(test2));
System.out.println(new String(test3)); 
```

结果：

```
Í
Í
Í 
```

如果要查看数组的内容，请使用[Arrays.toString(byte[])](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28byte%5B%5D%29)

```
byte[] test = {-51};
byte[] test2 = {-51};
byte[] test3 = {-51};
System.out.println(Arrays.toString(test));
System.out.println(Arrays.toString(test2));
System.out.println(Arrays.toString(test3)); 
```

结果：

```
[-51]
[-51]
[-51] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T18:00:34.127

`ValueOf()`只是`toString()`给定对象的调用。如果要打印数组的内容，请`Arrays.toString()`改用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T18:03:04.580

因为没有`String.valueOf`字节数组，所以当你给它时`byte[]`，它使用`String.valueOf(Object obj)`.

# html - 在单击按钮时停止递归 AJAX 调用，并在单击按钮时再次启动它

> ID：13865670
> 
> 赞同：3
> 
> 时间：2012-12-13T17:59:07.763
> 
> 标签：html, jquery

我每 5 秒调用一次 ajax 来更新我的数据，我需要在单击按钮时停止该调用。我的ajax函数是：

```
function get_text(){
    var text = $.ajax({
            type: "POST",
            url: "getIt.php",
            async: false
        }).complete(function(){
            setTimeout(function(){get_text();}, 5000);
        }).responseText;

        $('#editor_Content').html(text);
} 
```

这个函数在

```
$(document).ready(function(){
   new get_text(); 
} 
```

我需要在单击按钮时停止此呼叫，并在再次单击同一按钮时再次启动此呼叫。有什么建议么？

我的按钮点击代码是

```
function editit(){ 
    var myVar = document.getElementById("editor_Content").getAttribute("contenteditable"); 
    if(myVar=='true'){         
        document.getElementById("editor_Content").setAttribute("contenteditable", "false"); 
        document.getElementById("editbtn").setAttribute("value","Edit Text"); 
    } else{ 
        document.getElementById("editbtn").setAttribute("value","Done Editing"); 
        document.getElementById("editor_Content").setAttribute("contenteditable", "true"); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:01:24.870

您需要保存结果`setTimeout`并在调用`clearTimeout`函数时使用它，如下所示：

```
function get_text(){
    var text = $.ajax({
        type: "POST",
        url: "getIt.php",
        async: false
    }).complete(function(){
        window.getTextTimeoutId = setTimeout(function(){get_text();}, 5000);
    }).responseText;

    $('#editor_Content').html(text);
}

$(document).ready(function(){
    get_text(); 
} 

function editit(){ 
    var myVar = document.getElementById("editor_Content").getAttribute("contenteditable"); 
    if(myVar=='true'){         
        if(window.getTextTimeoutId){
            window.clearTimeout(window.getTextTimeoutId)
            window.getTextTimeoutId = null;
        }
        document.getElementById("editor_Content").setAttribute("contenteditable", "false"); 
        document.getElementById("editbtn").setAttribute("value","Edit Text"); 
    } else{ 
        document.getElementById("editbtn").setAttribute("value","Done Editing"); 
        document.getElementById("editor_Content").setAttribute("contenteditable", "true"); 
        if(!window.getTextIntervalId) //edited for not to create another call. fixed!
            window.getTextTimeoutId = setTimeout(get_text, 0);
    } 
} 
```

但是出于您的目的，我认为`setInterval`并且`clearInterval`会更好。这是您的新代码的样子：

```
function get_text(){
    var text = $.ajax({
        type: "POST",
        url: "getIt.php",
        async: false
    }).responseText;

    $('#editor_Content').html(text);
}

$(document).ready(function(){
     window.getTextIntervalId = window.setInterval(get_text, 5000); 
} 

function editit(){ 
    var myVar = document.getElementById("editor_Content").getAttribute("contenteditable"); 
    if(myVar=='true'){         
        if(window.getTextIntervalId){
            window.clearInterval(window.getTextIntervalId)
            window.getTextIntervalId = null;
        }
        document.getElementById("editor_Content").setAttribute("contenteditable", "false"); 
        document.getElementById("editbtn").setAttribute("value","Edit Text"); 
    } else{ 
        document.getElementById("editbtn").setAttribute("value","Done Editing"); 
        document.getElementById("editor_Content").setAttribute("contenteditable", "true");
        if(!window.getTextIntervalId) //edited for not to create another call. fixed!
            window.getTextIntervalId = setInterval(get_text, 5000);
    } 
} 
```

# node.js - 集中式 node_modules

> ID：13865671
> 
> 赞同：6
> 
> 时间：2012-12-13T17:59:16.763
> 
> 标签：node.js, debian, npm, node-modules

我想让我的 Node 模块存储在一个集中的地方，比如说，`/var/http/common/`让我的应用程序在不同的位置运行/运行，比如说`/var/http/www/apps/APP#1_NAME/`。

我能够设置`server.js`使用相对路径的要求`require('../../../common/express')`，但从阅读NPM 作者的[帖子](https://github.com/isaacs/npm/issues/775#issuecomment-1389398)，听起来我正在破解它，我应该使用`npm link`为 Node 创建一个“本地”引用（符号链接到实际安装）。

我首先在 中安装了我的节点模块`/var/http/common/`，但是当我尝试创建符号链接 ( `npm link ../../../common/node_modules/express`) 时，npm 似乎已将其视为“全局”安装，并重新安装了 express `/usr/local/lib/node_modules/express`（并为其创建了一个“本地”符号链接`./node_modules/express ->`）这不是我所期望的。这是我真正想要的吗？我应该先使用`npm config set prefix`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:23:51.693

事实证明：我应该`npm config set prefix`在做任何其他事情之前就做好准备。

看起来可能会`npm link`做`npm install -g`同样的事情；然而，`npm link`在全局安装模块的同时，它*还会*创建一个`node_modules`指向`$prefix/lib/node_modules/$module`. [MaxGfeller](https://stackoverflow.com/a/13867998/758177)是不正确的：没有那个本地符号链接，Node 会抱怨它找不到（全局安装的）模块。这是通过我自己的尝试确定的，并从中推断`npm help folders`：

> •如果您要**require()它，请在****本地**安装它。
> 
>  **•如果您要在**命令行上运行它，请****全局**安装它。
> 
>  **• 如果**两者都**需要，则在两个地方都安装它，或者使用**npm link**。****

 ****这并没有具体解决我的问题：我希望将模块存储在一个中央位置（供多个节点应用程序访问），但我不关心从命令中使用它们——我只想使用它们在`require('')`.

至于我关于`require('')`在`npm link`. 对我来说，这似乎是一个六合一的情况[，](http://en.wiktionary.org/wiki/six_of_one,_half_a_dozen_of_the_other)但我想与 Node 的标准保持一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:32:19.517

您可以通过在命令中添加“-g”来全局安装节点模块。例如：

```
npm install express -g 
```

在您的代码中，您可以正常使用它：

```
require('express'); 
```

然后将模块存储在 /usr/local/lib/node_modules****

# hadoop - Hadoop - Mysql 新 API 连接

> ID：13865673
> 
> 赞同：0
> 
> 时间：2012-12-13T17:59:24.177
> 
> 标签：hadoop

我正在尝试在 Hadoop 进程中将 MySQL 设置为输入。如何为 Hadoop 使用 DBInputFormat 类 - 版本 1.0.3 中的 MySQL 连接？通过 hadoop-1.0.3/docs/api/ 中的 JobConf 配置作业不起作用。

```
// Create a new JobConf
JobConf job = new JobConf(new Configuration(), MyJob.class);

// Specify various job-specific parameters     
job.setJobName("myjob");

FileInputFormat.setInputPaths(job, new Path("in"));
FileOutputFormat.setOutputPath(job, new Path("out"));

job.setMapperClass(MyJob.MyMapper.class);
job.setCombinerClass(MyJob.MyReducer.class);
job.setReducerClass(MyJob.MyReducer.class);

job.setInputFormat(SequenceFileInputFormat.class);
job.setOutputFormat(SequenceFileOutputFormat.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:03:33.643

看看[这个](http://shazsterblog.blogspot.com/2012/11/storing-hadoop-wordcount-example-with.html)帖子。它展示了如何将数据从 Map Reduce 下沉到 MySQL 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:42:31.867

您需要执行以下操作（例如假设典型的员工表）：

```
JobConf conf = new JobConf(getConf(), MyDriver.class);
    conf.setInputFormat(DBInputFormat.class); 
    DBConfiguration.configureDB(conf, “com.mysql.jdbc.Driver”, “jdbc:mysql://localhost/mydatabase”); String [] fields = { “employee_id”, "name" };
    DBInputFormat.setInput(conf, MyRecord.class, “employees”, null /* conditions */, “employee_id”, fields); 
    ...
    // other necessary configuration
    JobClient.runJob(conf); 
```

和`configureDB()`调用`setInput()`配置`DBInputFormat`. 第一个调用指定要使用的 JDBC 驱动程序实现以及要连接到的数据库。第二个调用指定要从数据库加载哪些数据。MyRecord 类是在 Java 中读取数据的类，“employees”是要读取的表的名称。“employee_id”参数指定表的主键，用于排序结果。下面的“InputFormat 的限制”部分解释了为什么这是必要的。最后，fields 数组列出了要读取的表的哪些列。的重载定义`setInput()`允许您指定要从中读取的任意 SQL 查询。

调用`configureDB()`and之后`setInput()`，您应该像往常一样配置其余的作业，设置 Mapper 和 Reducer 类，指定要读取的任何其他数据源（例如，HDFS 中的数据集）和其他特定于作业的参数。

您需要创建自己的实现`Writable`- 如下所示（将 id 和 name 视为表字段）：

```
class MyRecord implements Writable, DBWritable { 
    long id; 
    String name; 

    public void readFields(DataInput in) throws IOException { 
        this.id = in.readLong(); 
        this.name = Text.readString(in); 
        } 

    public void readFields(ResultSet resultSet) throws SQLException { 
        this.id = resultSet.getLong(1); 
        this.name = resultSet.getString(2); } 

    public void write(DataOutput out) throws IOException { 
        out.writeLong(this.id); 
        Text.writeString(out, this.name); } 

    public void write(PreparedStatement stmt) throws SQLException { 
        stmt.setLong(1, this.id); 
        stmt.setString(2, this.name); } 
    } 
```

然后，映射器接收您的 DBWritable 实现的实例作为其输入值。输入key是数据库提供的一个row id；您很可能会丢弃此值。

```
public class MyMapper extends MapReduceBase implements Mapper<LongWritable, MyRecord, LongWritable, Text> { 
public void map(LongWritable key, MyRecord val, OutputCollector<LongWritable, Text> output, Reporter reporter) throws IOException { 
// Use val.id, val.name here 
output.collect(new LongWritable(val.id), new Text(val.name)); 
} 
} 
```

更多信息：阅读以下链接（我的答案的实际来源）： http: [//blog.cloudera.com/blog/2009/03/database-access-with-hadoop/](http://blog.cloudera.com/blog/2009/03/database-access-with-hadoop/)

# iphone - cocoalibspotify 用内置的 Iphone 媒体播放器播放“不错”吗？

> ID：13865675
> 
> 赞同：1
> 
> 时间：2012-12-13T17:59:30.003
> 
> 标签：iphone, spotify

我再次来到这里，每天都有关于 Spotify 的问题......

因此，在我的应用程序中，我希望用户能够选择播放来自 Spotify 的音乐或播放来自他们自己的 iPhone 媒体库的音乐。但是，由于我添加了 Spotify 框架，每当我测试我的应用程序并尝试加载与 MediaPicker 有任何关系的场景时（无论它是否具有指向带有媒体选择器的视图控制器的链接，或者如果用于选择的场景里面有媒体选择器代码）我收到以下错误（错误中的编辑内容只是我的应用程序的名称） [截图](http://imgur.com/d7j8i)

所以我的问题是，我可以在我的应用程序中同时拥有 Spotify 和 iPod 功能吗？还是其中之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:06:24.120

是的，当然可以。但是，您的屏幕截图隐藏了左侧的堆栈跟踪，您需要设置一个断点来中断异常。就日志而言，它看起来与 CocoaLibSpotify*或*MediaPicker 无关。

# php - 动态更改块引用的内容

> ID：13865677
> 
> 赞同：1
> 
> 时间：2012-12-13T17:59:37.310
> 
> 标签：php, html, ajax, bxslider

我需要在我的网站中动态更改块引用的内容。实际上，我必须从数据库中检索需要显示的内容，因此我需要使用 php 脚本来获取它们并以我需要的方式形成它们。

我尝试使用类似的东西： http: [//dhtmlexamples.com/2011/02/18/dynamically-loading-content-using-ajax-and-xmlhttprequest/](http://dhtmlexamples.com/2011/02/18/dynamically-loading-content-using-ajax-and-xmlhttprequest/)

但没有成功：/

我应该说我的块引用中有 html，尽管我认为这并不重要。

有人可以帮我吗？

编辑：这是一些代码

```
<blockquote class="pro-in" id="content" style="left:-10000px; opacity:0;"></blockquote> 
```

当我单击图像时，块引用会在可见的“平面”上移动。内容是用 init() 生成的；功能。上面提供的链接中描述了 init 函数和逻辑。

// 根据以下答案的建议更正了函数 - 使用 JQuery 函数 openpro(contentNumber){

```
 $.get('phpscripts/projectsLogic.php?project='+contentNumber, function(data) {
        $('#content').html(data);
    });

    $('#content').animate({left:0, opacity:1},{duration:1600});
    $('#con').animate({left:-10000, opacity:0},{duration:1600});
} 
```

如果您对实际创建内容而不是修复此解决方案有更好的建议，我支持它。------------------------------------- bxslider EDIT2：

我实际上称之为 bxslider（加上其他）。问题是我曾经像这样在 $(document).ready 调用中初始化 bxslider：

```
$(document).ready(function(){
    $('.bxslider').bxSlider({
        pager: true,
        auto: true,
        speed: 2000,
        autoHover: true,
        pause: 6000
    });
    $('.bxslider1').bxSlider({
        pager: true
    });
    $('.bxslider2').bxSlider({
        pager: true
    });
    ....
    }); 
```

当我动态更改 div 的内容时，我想没有 bxlider 对象处理新内容，因此没有可见的滑块。我尝试将调用放在创建内容的函数中（ openpro() ）但徒劳无功。我也尝试过这样的事情：

```
var slide   = document.createElement("script");
        slide.type  = "text/javascript";
        slide.text  = "$(document).ready(function(){ $('#slider1').bxSlider({pager:true}); });";

        document.head.appendChild(slide); 
```

但仍然没有成功。有没有人有任何想法？对不起，我刚开始使用网络开发语言，所以我有点无能为力..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:32:55.507

用 jQuery get 试试这个例子

testFunction('lorem.txt', '内容'); //第一个参数是文件url，第二个是blockquote id

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
function testFunction(path, container){
    $.get(path, function(data) {
        $('#'+container).html(data);
    });
    $('#'+container).animate({left:0, opacity:1},{duration:2000});
    $('#'+container).animate({left:-10000, opacity:0},{duration:2000});
}

</script>
<body onload="testFunction('lorem.txt', 'content');">
    <blockquote class="pro-in" id="content" style="left:-10000px; opacity:0;"></blockquote>
</body> 
```

# jquery - 不能 appendTo() 曾经在变量中的内容

> ID：13865682
> 
> 赞同：0
> 
> 时间：2012-12-13T18:00:03.263
> 
> 标签：jquery, html, variables, append

我正在开发小型画廊插件。目标是让一个人创建一系列包含图像的无序列表，并将它们包装在具有类库的 div 中。这将是设置，我的脚本将获取 .gallery 的内容并将它们存储在一个变量中，向 .gallery 添加一些新的 html 元素，然后让我的样式和图库脚本接管。

以下是我获取和重组 html 的方式：

```
 var content = $("#gallery").html();

    $("#gallery").html("<div id='galleryInner'><div id='galleryTrack'>"+content+"</div>   
<div class='mask' id='leftMask'><div class='btn' id='lBtn'><img src='images/arrowL.png'> 
</div></div><div class='mask' id='rightMask'><div class='btn' id='rBtn'><img 
src='images/arrowR.png'></div></div></div></div>"); 
```

以这种方式设置后，我的脚本可以操作此 html 结构的某些方面，但其他方面则失败。

例如：

```
function moveLeft() {
   $('#galleryTrack ul:first-child').animate({
       width: 0,
     }, 250, function() {
   $("#galleryTrack ul:first-child").appendTo($("#galleryTrack"));
   $("#galleryTrack ul:last-child").css("width", w);
     });         
} 
```

动画正在运行，但 appendTo() 和 css() 没有。

如果它都是静态的，它工作得很好，只有当我用 javascript 重新创建内容时它才会中断。

任何想法为什么？

*****编辑*******

 **好的，这是完整的代码：

```
 $(document).ready(function() {
    var btn = 1;
    var count = 0;
    var w = $("#galleryTrack ul:first-child").width();
    var nh = 0;
    var h = 0;
    var timer = null;
    var msg = $("#msg");
    var content = $("#gallery").html();

    $("#gallery").html("<div id='galleryInner'><div id='galleryTrack'>"+content+"</div></div><div class='mask' id='leftMask'><div class='btn' id='lBtn' style='display: none;'><img src='images/arrowL.png'></div></div><div class='mask' id='rightMask'><div class='btn' id='rBtn' style='display: none;'><img src='images/arrowR.png'></div></div>");

   $('#rBtn').click(function(){
       clearTimeout(timer); 
       timer = setTimeout(moveLeft, 250);
   }); 

    $('#lBtn').click(function(){
      clearTimeout(timer); 
      timer = setTimeout(moveRight, 250);
    }); 

    $(document).keydown(function(e){
      if (e.keyCode == 39) { 
         clearTimeout(timer); 
         timer = setTimeout(moveLeft, 250);
      }
    });

    $(document).keydown(function(e){
      if (e.keyCode == 37) { 
        clearTimeout(timer); 
        timer = setTimeout(moveRight, 250);
      }
    });

    function moveLeft() {
        $('#galleryTrack ul:first-child').animate({
            width: 0,
        }, 250, function() {
            $("#galleryTrack ul:first-child").appendTo($("#galleryTrack"));
            $("#galleryTrack ul:last-child").css("width", w);
        });         
    }

    function moveRight() {
        $("#galleryTrack ul:last-child").css("width", "0");
        $("#galleryTrack ul:last-child").prependTo($("#galleryTrack"));
        $('#galleryTrack ul:first-child').animate({
            width: w,
        }, 250);
     }                                

     $("#gallery").mouseover(function(e) { 
         if ((e.pageX - this.offsetLeft) < $(this).width() / 2) {
              $("#lBtn").fadeIn(300);
              $("#rBtn").fadeOut(300);
         } else {
              $("#rBtn").fadeIn(300);
              $("#lBtn").fadeOut(300);     
         }
     });

     $("#gallery").hover(function() {
     }, function() {
         $(".btn").fadeOut(300);     
     });  

  }); 
```

***编辑...再次***

好的，看起来问题实际上是函数 moveRight() 中的动画：

```
 function moveRight() {
             $("#galleryTrack ul:last-child").css("width", "0");
             $("#galleryTrack ul:last-child").prependTo($("#galleryTrack"));
             $('#galleryTrack ul:first-child').animate({
                  width: w,
             }, 250);
           } 
```**

# google-maps - 注释谷歌地图

> ID：13865687
> 
> 赞同：-2
> 
> 时间：2012-12-13T18:00:10.877
> 
> 标签：google-maps, google-maps-markers

我在谷歌地图上放置了一些位置。我需要在地图上的标记旁边设置文本。有办法吗？因为我看不到谷歌地图提供的任何工具或选项。

它不是我正在开发或编码的应用程序。我只是在谷歌地图网站上保存位置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:38:54.683

查看[实用程序库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/)中的信息框。文档中有[一个示例](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-label.html)。

# c# - 获取进度条以在单击按钮时开始

> ID：13865701
> 
> 赞同：-1
> 
> 时间：2012-12-13T18:00:41.087
> 
> 标签：c#, progress-bar

我目前有一个开始播放wav文件的按钮对象，还有一个进度条和一个计时器，这些都是Visual Studio 2010中的工具箱对象。问题是，当我打开表单时，进度条会自动启动填满。只有当我点击按钮时，我才能让它启动？

这是我到目前为止的代码：

```
 private void playsong1_Click(object sender, EventArgs e)
    {
        SoundPlayer sndplayer = new SoundPlayer(Programming_assignment.Properties.Resources.Back_In_Black);
        sndplayer.Play();

        timer1.Enabled = true;

    }

    private void progressBar1_Click(object sender, EventArgs e)
    {

    }
    private void timer1_Tick(object sender, EventArgs e)
    {            
        if (progressBar1.Value < 256)
        {
            progressBar1.Value++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:08:19.857

看起来您拥有`timer1.Enabled = true`或`timer1.Start()`在表单的构造函数或 Load 事件处理程序中。顺便说一句`Enabled`，在设计器中检查计时器的属性-也许您将其设置为`true`默认值。

# sql-server - Sql 服务器递归

> ID：13865710
> 
> 赞同：0
> 
> 时间：2012-12-13T18:01:02.037
> 
> 标签：sql-server

我有一张桌子，它有两列。

```
CurrentNumber | NewNumber
12345 | 12346
12346 | 12347
12347 | NULL
12349 | NULL
12350 | 12351
12351 | NULL 
```

我想做的就是将这个视图展平如下。创建一个新表

```
CurrentNumber | OldNumber
12347 | 12346
12347 | 12345
12351 | 12350 
```

这是我的问题。我可以使用一些嵌套游标来查找可能存在的递归数，但我无法想出一种方法来将旧数字找到无穷大。任何帮助，将不胜感激。

我有 Sql Server 2008、2012 或 MySql 服务器可用于尝试解决此问题。我也可以编写一个外部应用程序来潜在地执行此操作，但我必须定期执行此操作，因此如果可能的话，我宁愿将其保留在 SQL 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:02:42.637

试试这个。[SQL小提琴](http://sqlfiddle.com/#!3/a5ceb/2)

```
CREATE TABLE t
    ([CurrentNumber] int, [NewNumber] int)
;

INSERT INTO t
    ([CurrentNumber], [NewNumber])
VALUES
    (12345, 12346),
    (12346, 12347),
    (12347, NULL),
    (12349, NULL),
    (12350, 12351),
    (12351, NULL)
;

;WITH cte AS (
  SELECT [CurrentNumber], CAST(NULL AS INT) AS OldNumber
  FROM t
  WHERE NewNumber IS NULL
  UNION ALL
  SELECT c.CurrentNumber, t.CurrentNumber AS OldNumber
  FROM t
  INNER JOIN cte c
      ON (ISNULL(c. OldNumber,c.CurrentNumber) = t.NewNumber)
)
SELECT * 
FROM cte
WHere OldNumber IS NOT NULL
ORDER BY 1,2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:30:36.737

那是你要的吗 ？

```
;with cte as
            (
              select * 
              from table 
              where NewNumber is not null 
            ),
       cte2 as 
            (
               select NewNumber CurrentNumber, CurrentNumber OldNumber 
               from cte 
            )

 select * from cte2 order by CurrentNumber 
```

如果需要，您可以将这些结果插入到表中。

# php - 会话变量与普通变量？

> ID：13865711
> 
> 赞同：-5
> 
> 时间：2012-12-13T18:01:03.153
> 
> 标签：php, session, variables

有什么不同？我知道会话变量存储信息并让您跨页面使用它，但我有几个问题：值存储在哪里？会话变量和普通变量有什么区别？

这是在 PHP 的上下文中。我正在寻求深入的答案，因为我没有在网上找到很多关于此的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:12:59.730

> 价值存储在哪里？

这取决于 PHP 配置。默认情况下，会话变量被序列化并写入服务器文件系统上的文件中。在启动会话的每个页面视图上，它们都是非序列化的，并且可以从`$_SESSION`数组中访问。可以覆盖默认会话处理程序，以便您可以将变量存储在其他地方，例如数据库。

会话通过将会话 ID（这是一个唯一标识符）作为 cookie 存储在客户端计算机上来工作。每次客户端请求页面时，会话 ID cookie 都会与请求一起发送，PHP 从 cookie 中获取会话 ID，然后提取与所述会话 ID 相关的会话数据。

> 会话变量和普通变量有什么区别？

简而言之，会话变量被保存到源（例如文件系统），这就是它们如何在页面请求之间保持不变。普通变量只会在脚本执行完成之前存在，然后将被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:04:10.770

默认情况下，会话变量存储在服务器上的文件中。处理指向用户的会话通常是浏览器中设置的 cookie（或者可能是查询字符串中的丑陋参数，但不建议这样做）。

文档中有很多关于会话如何工作[的信息](http://php.net/manual/en/book.session.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:05:19.967

PHP 将会话变量（具有唯一 ID）存储在本质上是服务器站点 cookie 中。然后它会在用户的浏览器中存储一个 cookie，以跟踪会话 ID，以便以后查找。

Cookie 基本上是包含每个变量的编码数据的文本文件。

普通变量只是存储在临时内存中，完成后会被垃圾回收。

编辑：另外，请参阅此答案以获得替代定义：[PHP：在 $_SESSION 中存储“对象”](https://stackoverflow.com/questions/132194/php-storing-objects-inside-the-session)

# c# - 我得到“System.Collections.Generic.List”而不是数据

> ID：13865712
> 
> 赞同：2
> 
> 时间：2012-12-13T18:01:04.970
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

我尝试`TextBox`在 WPF 应用程序中使用 C# 进行 Google Search 之类的自动完成，基本上我想要做的`TextBox`是绑定到 SQL 数据库表的自动完成。该表有 2 个字段（条形码和名称），我的代码如下：

## 在 XAML 中：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="37*" />
        <RowDefinition Height="88*" />
    </Grid.RowDefinitions>
    <TextBlock Text="Type Your Search :" HorizontalAlignment="Left"            VerticalAlignment="Bottom" Width="112" Height="15.96" Margin="31,0,0,4" />

    <TextBox HorizontalAlignment="Right" VerticalAlignment="Bottom" Height="25" Width="325" Margin="0,0,10,0" x:Name="txtCAuto" TextWrapping="NoWrap" />

    <ListBox x:Name="lbSuggestion" SelectionChanged="lbSuggestion_SelectionChanged" Background="LightYellow" Grid.Row="1" Visibility="Collapsed" HorizontalAlignment="Right" VerticalAlignment="Top" Width="325" Margin="0,0,10,0"/>
</Grid> 
```

后面的代码：

```
 List<string> nameList;
    List<Product> prodList;

    public List<string> SelProd4Sale(string str )
    {
        string constr = "Data Source=.;Initial Catalog=AgamistaStore;User ID=emad2012;Password=emad_2012";
        SqlConnection SqlCon = new SqlConnection(constr);
        SqlCommand SqlCmdProds = new SqlCommand();
        SqlCmdProds.Connection = SqlCon;
        SqlCmdProds.CommandType = CommandType.Text;
        SqlCmdProds.CommandText = "SELECT dbo.ProductsTbl.ProductID,ProductsTbl.ProductBarcode," + 
            "dbo.ProductsTbl.ProductName, dbo.ProductsTbl.SalePrice FROM dbo.ProductsTbl ";
        SqlCon.Open();
        SqlDataAdapter dapProds = new SqlDataAdapter();
        dapProds.SelectCommand = SqlCmdProds;
        DataSet dsProds = new DataSet();
        dapProds.Fill(dsProds);
        SqlCon.Close();
        prodList = new List<Product>();
        for (int i = 0; i < dsProds.Tables[0].Rows.Count; i++)
        {
            prodList.Add(new Product
                            (dsProds.Tables[0].Rows[i]["ProductBarcode"].ToString(),
                            dsProds.Tables[0].Rows[i]["ProductName"].ToString());
        }
        dsProds = null;

        nameList = new List<string>() 
        {
           prodList.ToString()
        };

        return nameList;
    }

    public Window2()
    {
        InitializeComponent();
        SelProd4Sale(txtCAuto.Text);
        txtCAuto.TextChanged += new TextChangedEventHandler(txtAuto_TextChanged);
    }

    #region TextBox-TextChanged-txtAuto
    private void txtAuto_TextChanged(object sender, TextChangedEventArgs e)
    {
        string typedString = txtCAuto.Text.ToUpper();
        List<string> autoList = new List<string>();
        autoList.Clear();

        foreach (string item in nameList)
        {
            if (!string.IsNullOrEmpty(txtCAuto.Text))
            {
                if (item.StartsWith(typedString))
                {
                    autoList.Add(item);
                }
            }
        }

        if (autoList.Count > 0)
        {
            lbSuggestion.ItemsSource = autoList;
            lbSuggestion.Visibility = Visibility.Visible;
        }
        else if (txtCAuto.Text.Equals(""))
        {
            lbSuggestion.Visibility = Visibility.Collapsed;
            lbSuggestion.ItemsSource = null;
        }
        else
        {
            lbSuggestion.Visibility = Visibility.Collapsed;
            lbSuggestion.ItemsSource = null;
        }
    }
    #endregion

    #region ListBox-SelectionChanged-lbSuggestion
    private void lbSuggestion_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (lbSuggestion.ItemsSource != null)
        {
            lbSuggestion.Visibility = Visibility.Collapsed;
            txtCAuto.TextChanged -= new TextChangedEventHandler(txtAuto_TextChanged);
            if (lbSuggestion.SelectedIndex != -1)
            {
                txtCAuto.Text = lbSuggestion.SelectedItem.ToString();
            }
            txtCAuto.TextChanged += new TextChangedEventHandler(txtAuto_TextChanged);
        }
    }
    #endregion
}

class Product
{
    private string _ProductBarcode = "";
    private string _ProductName = "";

    public Product(string prodName,string prodBarcode)
    {
        this._ProductBarcode = prodBarcode;
        this._ProductName = prodName;
    }

    public string ProductBarcode
    {
        get { return _ProductBarcode; }
        set { _ProductBarcode = value; }
    }

    public string ProductName
    {
        get { return _ProductName; }
        set { _ProductName = value; }
    }

} 
```

当我运行它时，我得到“System.Collections.Generic.List”作为结果而不是数据。

有人可以帮助我并告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:05:18.143

问题出在这段代码中：

```
nameList = new List<string>() 
        {
           prodList.ToString()
        }; 
```

由于`ToString()`它没有被覆盖，`List<T>`它只返回一个类名（来自 的基本实现`System.Object`）。结果，您的列表包含单个条目`"System.Collection.Generic.List"`。要应用于`ToString()`列表元素并创建新列表，请将该代码替换为：

```
nameList = productList.Select(p => p.ToString()).ToList(); 
```

# html - HTML5 检查图像尺寸

> ID：13865714
> 
> 赞同：1
> 
> 时间：2012-12-13T18:01:10.923
> 
> 标签：html, fileapi, html5-filesystem

我正在尝试使用 HTML5 文件 API 显示具有其他属性的图像尺寸出于某种原因，我将图像的高度设为 0。

[http://jsfiddle.net/NfDMh/3/](http://jsfiddle.net/NfDMh/3/)

```
<input type="file" id="files" name="files[]" multiple="multiple" />
    <output id="list"></output>​

function handleFileSelect(evt)
{
    var files = evt.target.files; 
    var output = [];
    var height;
    var width;
    for (var i = 0, f; f = files[i]; i++)
    {
        output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                    f.size / 1024, ' KB, last modified: ',
                    f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                    '</li>');
        checkDimensions(f);

    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
}

function checkDimensions(file)
{
    var _URL = window.URL || window.webkitURL;
    var Dimensions = new Object;
    image = new Image();
    image.src = _URL.createObjectURL(file);
    alert(image.height);

}

document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:06:56.283

您需要挂钩 onload 事件。您正在尝试在图像加载之前查看大小。

```
image = new Image();
image.onload = function() { alert(image.size) };
image.src = _URL.createObjectURL(file); 
```

# java - Java布尔值“错误”吗？

> ID：13865717
> 
> 赞同：1
> 
> 时间：2012-12-13T18:01:17.277
> 
> 标签：java

因此，根据维基百科和其他人的说法，一个`boolean`值应该只有两种状态：`0`或`1`；`true`或`false`；`yes`或`no`；等等...

好的，如果我错了，请纠正我，但是，Java`Boolean`包装器让开发人员有 3 种状态`true`：`false`和`null`.

那不是错了吗？

我知道它可以用“布尔是一个对象”等来解释，但是，如果 javac 自动“包装”`null`到`false`恕我直言，那就太好了。

我的观点是：这种行为让开发人员做了很多废话，因为他们使用`Boolean`而不是正确的对象类型。

不管怎样，你怎么看？我是在遵循错误的思路……还是真的“错误”？

* * *

**编辑**

我知道什么是，和等`null`之间的区别等等（我有 3 年以上的 java 经验）。`boolean``Boolean`

我的观点是关于概念本身，例如在 Ruby 中，如果我做类似的事情`if something`，如果这个`something`实例是`nil`，它将是`false`.

我并不是说 Java 是垃圾或类似的东西，我每天都在使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T18:05:01.840

`null`表示没有值，而`true`和`false`是确定的值。这是肯定或否定地知道某事与根本不知道之间的区别。这是一种思考方式。

从技术上讲 a `Boolean`can的原因`null`是因为它是一个对象引用，而不是一个`boolean`值本身，[自动装箱](http://en.wikipedia.org/wiki/Object_type_%28object-oriented_programming%29#Autoboxing)可能会给您带来混乱。过去，您必须手动创建`Boolean`对象以包含值并手动从对象中`boolean`提取值。从 Java 5 开始，编译器会为您解决这个问题。`boolean``Boolean`

`boolean`对象包含的值`Boolean`可以是`true`或`false`，但对象变量可能根本不指向对象，在这种情况下，*引用*的值是`null`。

`boolean`为什么和`Boolean`你可能会问有什么不同？嗯，在 Java 中，与许多较新的语言不同，原始类型*不是*类，原始类型*不是*对象。当您想这样对待它们时，例如当您想通过引用传递或调用它们的方法或将它们放入集合中时，您必须将它们装箱在它们各自的[原始包装类](http://en.wikipedia.org/wiki/Object_type_%28object-oriented_programming%29#Autoboxing)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T18:07:48.107

如果它的三值特性`Boolean`不适合您，**请不要使用它**。使用`boolean`. 有时你需要`Boolean`，当你使用`Object`面向接口的时候。发生这种情况时，您使用`Boolean`.

*   `boolean`是表示您所描述的概念的原始类型，具有两个可能值的类型：真和假。

*   `Boolean`是不同的类型。这是一个`Object`具有`boolean`价值的东西。如果对象不存在，则**引用**为空。不是布尔对象为空，而是对布尔对象的引用为空。

尽管它们的名称相似，但不要将`boolean`和混为一谈`Boolean`。它们是不同的类型，这是有充分理由的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T18:07:55.643

由于您有一个`boolean`which 可以是两种状态，因此使用它没有意义，`Boolean`除非

*   你需要三个状态
*   您正在使用 API，这意味着您必须这样做。

通常，如果可以，请始终使用原语，除非 a）您需要一个`null`值 b）由于 API 而必须。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T18:11:54.960

您的意思是包装器应该模仿原始“真实”布尔值的严格行为。那就是问题所在。布尔值*在概念上与*布尔值不同（注意大写）。

原始布尔值提供了 Wikipedia 中描述为布尔值的内容。

Boolean (java.lang.Boolean) 不是为了展示而称为包装器。它在概念上是一个*包含*布尔值的对象。所以对布尔值的引用是*引用*，与布尔值没有任何共同之处。因此，*引用*规则适用，而不是原语。

如果您采取这种观点，它非常简单和合乎逻辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T18:05:34.060

您对原始`boolean`和原始包装器感到困惑`Boolean`。确实`boolean`可以`true`或`false`只有。

`Boolean`实例可以持有`true`或`false`太。但是如果实例不存在，则引用是`null`任何未初始化的引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T18:07:58.813

`null`意思是“我这里没有对象”。该`Boolean` `true`对象是对原语的包装`boolean true`，但它仍然是一个对象。请注意，以下代码会抛出一个`NullPointerException`

```
public static void main(String[] args) {
  Boolean myBool = null;
  boolean primBool = myBool;

  System.out.println(primBool);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T18:19:03.920

Null 使其可以为空，例如，当您创建数据库时，它有一个包含以下列的表：

Col-1 : 小时 (nvarchar)

Col-2 : 分钟 (nvarchar)

Col-3 : IsDay (bool)

因此，如果小时为 18，分钟为 00，则 IsDay 的值是多少？（也不是真假）此时它为空......

# c# - Directory.GetFiles 只获取今天的文件

> ID：13865718
> 
> 赞同：17
> 
> 时间：2012-12-13T18:01:20.350
> 
> 标签：c#, asp.net, .net

.NET Directory.GetFiles 中有很好的功能，当我需要从目录中获取所有文件时使用它很简单。

```
Directory.GetFiles("c:\\Files") 
```

但是，如果有很多创建时间不同的文件，我如何（什么模式）只获取创建时间今天的文件？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-13T18:05:08.817

试试这个：

```
var todayFiles = Directory.GetFiles("path_to_directory")
                 .Where(x => new FileInfo(x).CreationTime.Date == DateTime.Today.Date); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-13T19:32:09.390

为了性能，特别是如果目录搜索可能很大，使用`Directory.EnumerateFiles()`懒惰地枚举搜索路径优于`Directory.GetFiles()`，它急切地枚举搜索路径，在过滤任何匹配之前收集所有匹配项：

```
DateTime today = DateTime.Now.Date ;
FileInfo[] todaysFiles = new DirectoryInfo(@"c:\foo\bar")
                         .EnumerateFiles()
                         .Select( x => {
                            x.Refresh();
                            return x;
                         })
                         .Where( x => x.CreationTime.Date == today || x.LastWriteTime == today )
                         .ToArray()
                         ; 
```

请注意，其属性`FileSystemInfo`及其子类型可以（并且被）缓存，因此它们不一定反映当前的实际情况。因此，调用以`Refresh()`确保数据正确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T18:07:54.727

您需要获取文件的目录信息

```
public List<String> getTodaysFiles(String folderPath)
{
    List<String> todaysFiles = new List<String>();
    foreach (String file in Directory.GetFiles(folderPath))
    {
        DirectoryInfo di = new DirectoryInfo(file);
        if (di.CreationTime.ToShortDateString().Equals(DateTime.Now.ToShortDateString()))
            todaysFiles.Add(file);
    }
    return todaysFiles;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T18:03:33.393

您可以使用以下代码：

```
var directory = new DirectoryInfo("C:\\MyDirectory");
var myFile = (from f in directory.GetFiles()
             orderby f.LastWriteTime descending
             select f).First();

// or...
var myFile = directory.GetFiles()
             .OrderByDescending(f => f.LastWriteTime)
             .First(); 
```

请参见此处：[如何使用 .NET 在目录中查找最新文件且不循环？](https://stackoverflow.com/questions/1179970/c-sharp-find-most-recent-file-in-dir)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T18:04:06.937

使用 System.Linq；

```
DirectoryInfo info = new DirectoryInfo("");
FileInfo[] files = info.GetFiles().OrderBy(p => p.CreationTime).ToArray();
foreach (FileInfo file in files)
{
    // DO Something...
} 
```

如果您想将其分解为特定日期，可以使用过滤器尝试

```
var files = from c in directoryInfo.GetFiles() 
            where c.CreationTime >dateFilter
            select c; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T18:09:50.153

你应该能够通过这个：

```
var loc = new DirectoryInfo("C:\\");

var fileList = loc.GetFiles().Where(x => x.CreationTime.ToString("dd/MM/yyyy") == currentDate);
foreach (FileInfo fileItem in fileList)
{
    //Process the file
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-25T14:58:18.827

```
var directory = new DirectoryInfo(Path.GetDirectoryName(@"--DIR Path--"));
DateTime from_date = DateTime.Now.AddDays(-5);
DateTime to_date = DateTime.Now.AddDays(5);

//For Today 
var filesLst = directory.GetFiles().AsEnumerable()
              .Where(file.CreationTime.Date == DateTime.Now.Date ).ToArray(); 

//For date range + specific file extension 
var filesLst = directory.GetFiles().AsEnumerable()
              .Where(file => file.CreationTime.Date >= from_date.Date && file.CreationTime.Date <= to_date.Date && file.Extension == ".txt").ToArray(); 

//To get ReadOnly files from directory  
var filesLst = directory.GetFiles().AsEnumerable()
              .Where(file => file.IsReadOnly == true).ToArray(); 

//To get files based on it's size
int fileSizeInKB = 100; 
var filesLst = directory.GetFiles().AsEnumerable()
              .Where(file => (file.Length)/1024 > fileSizeInKB).ToArray(); 
```

# javascript - 如何用谷歌图表工具绘制“年龄-性别”风格的柱形图？

> ID：13865719
> 
> 赞同：2
> 
> 时间：2012-12-13T18:01:21.203
> 
> 标签：javascript, html, google-visualization

![在此处输入图像描述](../Images/0c2ff1e3fa423ed4f2538416c2b8d9b7.png)

我可以绘制一个并排样式的柱形图和一个堆叠图（都在 x 轴上方），但不是这个。如何使x轴下方的值仍然为正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:15:43.383

如果您使用[柱形图](https://developers.google.com/chart/interactive/docs/gallery/columnchart)，请将`isStacked`属性设置为 true 并将一个性别的值（在您的示例中为女性）乘以 -1，这将为您提供您正在寻找的条形图。接下来，您需要更改 vAxis 格式以隐藏负号。Google Charts 有一些限制，这会使 100% 的请求更难实现。最大的一个是 Google Charts 只支持部分[ICU 模式集](http://icu-project.org/apiref/icu4c/classDecimalFormat.html#_details)，这意味着您不能将百分比修饰符添加到正值和负值。为了解决这个问题，我将百分比值乘以 100，而不是 1.0 的分数，这在技术上是正确的。此外，正如您所指出的，工具提示显示负值。为了解决这个问题，您需要为女性基准提供一个格式化的值，即正值（也许您可以在这种情况下包括 %，因为它只是一个字符串，而不是图表值）。

在[Google Code Playground](http://code.google.com/apis/ajax/playground/?type=visualization#column_chart)中试试这个：

```
function drawVisualization() {
  /* Create and populate the data table. */
  var data = {
    "cols":[
      {"id":"Age","label":"Age","type":"string"},
      {"id":"Female","label":"Female","type":"number"},
      {"id":"Male","label":"Male","type":"number"}
    ],"rows":[
      {
        "c":[
          {"v":13,"f":"13-17"},
          {"v":-11,"f":"11%"},
          {"v":2,"f":"2%"}]
      },
      {
        "c":[
          {"v":18,"f":"18-24"},
          {"v":-8,"f":"8%"},
          {"v":5,"f":"5%"}]
      },
      {
        "c":[
          {"v":25,"f":"25-34"},
          {"v":-6,"f":"6%"},
          {"v":8,"f":"8%"}]
      },
      {
        "c":[
          {"v":35,"f":"35-44"},
          {"v":-6,"f":"6%"},
          {"v":10,"f":"10%"}]
      },
      {
        "c":[
          {"v":45,"f":"45-54"},
          {"v":-8,"f":"8%"},
          {"v":12,"f":"12%"}]
      },
      {
        "c":[
          {"v":55,"f":"55-64"},
          {"v":-3,"f":"3%"},
          {"v":7,"f":"7%"}]
      },
      {
        "c":[
          {"v":64,"f":"64+"},
          {"v":-1,"f":"1%"},
          {"v":2,"f":"2%"}]
      }
    ]
  };

  /* Create and draw the visualization. */
  new google.visualization.ColumnChart(document.getElementById('visualization'))
    .draw(new google.visualization.DataTable(data), {
      title:"Coffee Consumption by age",
      isStacked: true,
      vAxis: {
        format: "##;##"
      },
      width:600, height:400,
      hAxis: {
        title: "Age"
      }
    }
  );
} 
```

这是它的样子：

![堆积图](../Images/e339ae87b6b1a851032a189302f225ff.png)

# asp.net - Facebook Javascript SDK - 如何与 ASP.NET MVC 登录绑定？

> ID：13865722
> 
> 赞同：0
> 
> 时间：2012-12-13T18:01:32.640
> 
> 标签：asp.net, facebook

我有一个 ASP.NET MVC4 Web 应用程序，我想使用 Facebook 对用户进行身份验证。

我的计划是让用户在 Facebook 上“注册”，然后使用它登录。

现在，当用户访问该站点并使用我设置的 Facebook 登录按钮登录时，这很好，该按钮通过 /Account/FacebookLogin 操作进行。在该操作中，我可以获取 Auth Token 并根据 SQL 数据库对其进行检查，然后使用我在数据库中存储的所有额外字段/信息对用户进行身份验证（这是一个基于网络的游戏，因此角色名称等）......

现在，如果用户访问我的网站并且他们已经登录到 Facebook，他们显然不会执行 /Account/FacebookLogin 操作...我只需通过

```
FB.getLoginStatus(function (response) {
        if (response.status === 'connected') {
            var accessToken = response.authResponse.accessToken;
            //alert("User is logged in");
        }
        else if (response.status === 'not_authorized') {
            //alert("User is not authorised");
        }
        else {
            //alert("User is not connected to Facebook");
        }

    }); 
```

我的问题是......我可以在“如果已连接”代码中做什么来授权我的用户，而不会将它们发送到无限循环中？我尝试将它们重定向到 /Account/FacebookLogin 操作并传入身份验证令牌等。但是在每个页面上都会调用 getLoginStatus 回调......所以它们陷入了无限循环......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:27:00.567

Facebook 允许您访问某人的 Facebook 身份。您现在可能想要为该身份创建一个用户帐户。一旦该用户拥有一个帐户，那么您需要让该用户通过您的应用程序验证他们自己（如果您希望将自己绑定到 Facebook，您可以使用 Facebook 身份来执行此操作）。然后，您可以授权该用户在您的应用程序中执行某些操作。

在 MVC 的上下文中，您可以非常简单地向它们发出表单身份验证令牌：

```
var username = response.authResponse.name; // <- check the syntax on this
FormsAuthentication.SetAuthCookie(username, true);
return this.RedirectToAction("Index", "AuthorizedUsersOnlyController"); 
```

# sql-server - MS SQL 2008 运行带有空白但不返回这些记录的已知字段的查询

> ID：13865728
> 
> 赞同：1
> 
> 时间：2012-12-13T18:02:06.357
> 
> 标签：sql-server

我正在处理一个查询以从两个表中获取结果。而是每个条目有 5 条记录 # 或 (DOC#) 我在同一个表上有多个内部连接，以便在每个条目的一条记录上获得多个结果。

基本查询结果

```
Date    GL# AccountName AccountDesc Amount          Doc#    FieldG
00:00.0 51010   Account1    Description1    -3230.77    494634  TECH
00:00.0 51010   Account1    Description1    -3230.77    494634  220
00:00.0 51010   Account1    Description1    -3230.77    494634  SGA
00:00.0 51010   Account1    Description1    -3230.77    494634  TX
00:00.0 51010   Account1    Description1    -3230.77    494634 
```

在同一张表上有多个内部连接

```
Date    GL# AccountName AccountDesc Amount   Doc#    
00:00.0 51010   Account1    Description1    -3230.77 494634 TECH 220 SGA TX 
```

我正在使用的查询

```
SELECT 
GLE.Date
,GLE.GL# 
,GLE.AccountName
,GLE.AccountDesc
,GLE.Amount
,GLE.Doc#
,LED.FieldG
,LED2.FieldH
,LED3.FieldI
,LED4.FieldJ
,LED5.Unit 

FROM [Company, Inc$G_L Entry]  GLE
INNER JOIN [Company, Inc$Ledger Entry Dimension] LED
    ON GLE.[Doc#]=LED.[Doc#]
INNER JOIN [Company, Inc$Ledger Entry Dimension] LED2
    ON GLE.[Doc#]=LED2.[Doc#]
INNER JOIN [Company, Inc$Ledger Entry Dimension] LED3
    ON GLE.[Doc#]=LED3.[Doc#]
INNER JOIN [Company, Inc$Ledger Entry Dimension] LED4
    ON GLE.[Doc#]=LED4.[Doc#]
 JOIN [Company, Inc$Ledger Entry Dimension] LED5
    ON GLE.[Doc#]=LED5.[Doc#]

WHERE LED.Date Between '20120101' and '20130101'
AND GLE.[G_L Account No_]between '50000' and '59999'
AND GLE.GD1C between '0000' and '0999'
AND GLE.[Doc#]='494634' 
AND LED.[DC_1]='FieldG'
AND LED2.[DC_1]='FieldH'
AND LED3.[DC_1]='FieldI' 
AND LED4.[DC_1]='FieldJ'
AND LED5.[DC_1]='UNIT'
ORDER BY GLE.Date 
```

我专门为 DOC# 使用硬值，以便我可以测试以限制我的结果。我知道我有这个记录的单位字段，它是空白的。当我运行查询时，它不会返回任何结果。我知道它失败了，因为我对 LED5 表使用了 INNER JOIN，因为它没有匹配的记录。所有其他字段都有数据，因为它是强制性的，因此不会失败。作为一个新手，我可以在这个查询中改变什么来获取包含数据并且也是空白的记录？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:18:12.927

首先将 INNER JOIN 更改为 LEFT JOIN 并将 WHERE 子句更改为 AND ISNULL(LED5.[DC_1],'UNIT')='UNIT'

# java - Java ActionListener 不监听事件

> ID：13865731
> 
> 赞同：0
> 
> 时间：2012-12-13T18:02:22.160
> 
> 标签：java, events, event-handling, awt

任何人都可以说出为什么当我单击我的 Gui 中的打开按钮时类 OpenMenuListener 不发送反馈？擦除按钮虽然有效。它给我一个反馈。我筋疲力尽。

```
import java.awt.*;
import javax.swing.*;

public class DrawingApplication extends JFrame {

    JComponent drawingArea;

    class EraseButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            System.out.println("Clicked erase");
        }
    }

    class OpenMenuListener implements ActionListener{
        public void actionPerformed(ActionEvent e) {
            System.out.println("Clicked open");
    }
    }
        public DrawingApplication() {
        JPanel frame = new JPanel();
        add(frame);
        // panel1.add( new JButton(Figuur),BorderLayout.CENTER);

        drawingArea = new JLabel();
        // label1.add(drawingArea);
        frame.add(drawingArea);

        // Creates a menubar for a JFrame
        JMenuBar menuBar = new JMenuBar();
        // Add the menubar to the frame
        setJMenuBar(menuBar);
        JMenu fileMenu = new JMenu("File");
        menuBar.add(fileMenu);

        JMenu open = new JMenu("Open");
        fileMenu.add(open);
        fileMenu.addSeparator();
        JMenu save = new JMenu("Save");
        fileMenu.add(save);
        fileMenu.addSeparator();
        JMenu close  =new JMenu("Close");
        fileMenu.add(close);
        JMenu helpMenu = new JMenu("Help");

        menuBar.add(helpMenu);
        helpMenu.add(new JMenu("Info"));

        JPanel panel2 = new JPanel();
        add(BorderLayout.SOUTH, frame);
        frame.add(new JLabel("figuurkeuze"));
        frame.add(panel2);
        setVisible(true);

        JRadioButton rectButton = new JRadioButton("Rectangle");
        JRadioButton triangleButton = new JRadioButton("Triangle");
        JRadioButton circleButton = new JRadioButton("Circle");
        frame.add(rectButton);
        frame.add(triangleButton);
        frame.add(circleButton);

        JButton erase = new JButton("Erase");
        frame.add(erase);

        EraseButtonListener eraselistener = new EraseButtonListener();
        erase.addActionListener(eraselistener);

        OpenMenuListener openMenuListener = new OpenMenuListener();
        open.addActionListener(openMenuListener);

    }

    public static void main(String[] args) {

        DrawingApplication frame = new DrawingApplication();
        frame.setTitle("My prgram");
        frame.setSize(400, 300);

        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:06:16.163

这似乎是名称别名的问题，您将侦听器添加到`open`声明为 a 的变量中`JMenuItem`，因此您将添加`ActionListener`到菜单项而不是按钮（因为没有`JButton open = new JButton("open")`任何地方，所以您永远不会声明）。

# asp.net-mvc-3 - System.NotSupportedException：无法在 LINQ to Entities 查询中构造实体或复杂类型“Project.Models.MyModel”

> ID：13865734
> 
> 赞同：0
> 
> 时间：2012-12-13T18:02:28.587
> 
> 标签：asp.net-mvc-3, join, model

是否可以将连接结果存储在模型中的两个/多个表上？例如说我有模型

```
public class model1{
  public string studentID {get; set;}
  public string Address [get; set;}
 }

public class model2{
  public int ID {get; set;}
  public string StudentName [get; set;}
}

public class model3{
   public string StudentName [get; set;} 
    public string Address [get; set;}
} 
```

如果模型 1 和模型 2 从数据库中提取数据，我可以通过连接模型 1 和模型 2 的结果来创建模型 3 吗？

**编辑**

所以，我做了类似的事情

```
model3object = dbcontext.Model3.AsQueryable();
        model3object = from m1 in dbcontext.model1
                  let id = dbcontext.Model1.Select(x => m1.studentId).Cast<int>().FirstOrDefault()
                  join m2 in dbcontext.model2
                  on  id equals m2.Id
                  select new Result
                  {
                      studentName = m2.studentName,
                      Address = m1.Adress,
                  }; 
```

但我得到了错误

```
System.NotSupportedException: The entity or complex type 'ProjectName.Models.Model3' cannot be constructed in a LINQ to Entities query. 
```

请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:07:57.280

我会使用两种不同的模型。用于存储数据库值的模型和用于在 mvc 中显示数据的视图模型。

看看这个小例子：

```
var customerOrders = from o in myService.GetOrdersByCustomerId(id)
                     join p in myService.GetAllProducts() on o.ProductId equals p.Id
                     select new CustomerOrderViewModel
                     {
                         OrderId = o.Id,
                         ProductId = p.Id,
                         OrderDate = o.OrderDate,
                         ProductName = p.ProductName
                     }; 
```

您对模型 1 和模型 2 执行相同的代码并将这两个模型映射到一个视图模型。

# asp.net-mvc-4 - Autofac v3、Web Api 和 Authorize 属性

> ID：13865735
> 
> 赞同：1
> 
> 时间：2012-12-13T18:02:33.303
> 
> 标签：asp.net-mvc-4, asp.net-web-api, autofac

我有一个包含 Mvc 控制器和 Web Api 控制器的项目。一切都使用 autofac 3 连接起来：

```
var builder = new ContainerBuilder();
        builder.Register(x => NHibernateConfigurator.BuildSessionFactory()).SingleInstance();
        builder.Register(x => x.Resolve<ISessionFactory>().OpenSession()).InstancePerHttpRequest();
        builder.RegisterSource(new AnyConcreteTypeNotAlreadyRegisteredSource());

        builder.Register(x => new WebApiTransactionAttribute()).PropertiesAutowired();

        builder.RegisterControllers(Assembly.GetExecutingAssembly());
        builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

        builder.RegisterType<ExtensibleActionInvoker>().As<IActionInvoker>();
        builder.RegisterWebApiFilterProvider(config);

        var container = builder.Build();

        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
        config.DependencyResolver = new AutofacWebApiDependencyResolver(container); 
```

问题是，当我添加 [Authorize] 属性（来自 System.Web.Http 的属性）时，我得到：

```
Cannot choose between multiple constructors with equal length 1 on type 'System.String'. 
Select the constructor explicitly, with the UsingConstructor() configuration method, when the component is registered. 
```

有人能指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:12:06.223

抱歉，这有点猜测，但`AnyConcreteTypeNotAlreadyRegisteredSource` [这里](http://api.autofac.org/html/111905AD.htm)看起来注册可能太宽泛了：

> 为尚未在容器中注册的**任何**具体类型提供即时注册。

然后，Autofac 过滤器提供程序可能会注册各种框架具体类型并陷入混乱。

如果您将其取出并进行更有针对性的注册，这可能会有所帮助，也许可以按惯例注册。

# javascript - 类型错误：document.getElementById(...) 为空

> ID：13865739
> 
> 赞同：2
> 
> 时间：2012-12-13T18:03:00.553
> 
> 标签：javascript, template-engine

我正在尝试使用[http://ejohn.org/blog/javascript-micro-templating构建模板构建器](http://ejohn.org/blog/javascript-micro-templating)

我的 html 有这个脚本标签

```
<script type="text/html" id="item_tmpl">
   <div>
   <div class="grid_1 alpha right">
   </div>
    <div class="grid_6 omega contents">
  <p><b><a href="/<%=AdTitle%>"><%=AdTitle%></a>:</b> <%=AdTitle%></p>
  </div>
 </div>
</script>

<script src="${URLUtils.staticURL('/js/shoptheAd.js')}"type="text/javascript"></script>
The Script contains the following code  
        (function(app){
       if (app) {
       var cache = {};
       this.tmpl = function tmpl(str, data){
        // Figure out if we're getting a template, or if we need to
        // load the template - and be sure to cache the result.
        var fn = !/\W/.test(str) ?
          cache[str] = cache[str] ||
             tmpl(document.getElementById(str).innerHTML) :
          // Generate a reusable function that will serve as a template
          // generator (and which will be cached).
          new Function("obj",
            "var p=[],print=function(){p.push.apply(p,arguments);};" +

            // Introduce the data as local variables using with(){}
            "with(obj){p.push('" +

            // Convert the template into pure JavaScript
            str
              .replace(/[\r\t\n]/g, " ")
              .split("<%").join("\t")
              .replace(/((^|%>)[^\t]*)'/g, "$1\r")
              .replace(/\t=(.*?)%>/g, "',$1,'")
              .split("\t").join("');")
              .split("%>").join("p.push('")
              .split("\r").join("\\'")
          + "');}return p.join('');");

        // Provide some basic currying to the user
        return data ? fn( data ) : fn;
      };
      var sitecoresuggestions = {
        "suggestions": [
            {
                "AdTitle": "CheckAd",
                "AdDescription": "",
                "AdImageUrl": "http://demo-kiehls.loreal.photoninfotech.com/~/media/Advertisement Images/emma-watson-3.ashx",
                "Count": 2,
                "Hit": 0
            },
            {
                "AdTitle": "CheckAd",
                "AdDescription": "",
               "AdImageUrl": "http://demo-kiehls.loreal.photoninfotech.com/~/media/Advertisement Images/kate2.ashx",
                "Count": 2,
                "Hit": 0
            }
        ]
    } ;
      var show_user = tmpl("item_tmpl"), html = "";
    for ( var i = 0; i < sitecoresuggestions.suggestions.length; i++ ) {
      html += show_user( sitecoresuggestions.suggestions[i] );
    }
         console.log(html);
        } else {
            // namespace has not been defined yet
            alert("app namespace is not loaded yet!");
        }
    })(app);
        When the show_user = tmpl("item_tmpl")  is executed  
      i get the error TypeError: document.getElementById(...) is null 
```

在调试时我发现由于某种原因

```
 <script type="text/html" id="item_tmpl">
      <div>
     <div class="grid_1 alpha right">
     </div>
     <div class="grid_6 omega contents">
    <p><b><a href="/<%=AdTitle%>"><%=AdTitle%></a>:</b> <%=AdTitle%></p>
     </div>
   </div>
   </script> 
```

没有在浏览器中加载任何想法为什么它没有被加载，即使它包含在 head 标记或任何其他导致错误原因的指针中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:14:31.280

根据帖子：

> 快速提示：在您的页面中嵌入具有未知内容类型的脚本（这里就是这种情况 - > 浏览器不知道如何执行文本/html 脚本）会被浏览器简单地忽略 - 并且 > 会被搜索引擎忽略和屏幕阅读器。它是一个完美的隐藏设备，可以将模板偷偷溜进你的页面。我喜欢将这种技术用于快速而肮脏的情况，我只需要在页面上放置一个或两个小的 >template 并且想要一些轻巧快速的东西。

所以页面实际上并没有呈现 HTML，我假设您只会在页面中引用它，以便您可以提取并应用于其他对象或项目。正如博主所说，您可以像这样使用它：

```
var results = document.getElementById("results");
results.innerHTML = tmpl("item_tmpl", dataObject); 
```

# sublimetext2 - 将 Enmet 与 ERB 一起使用

> ID：13865741
> 
> 赞同：0
> 
> 时间：2012-12-13T18:03:00.570
> 
> 标签：sublimetext2, emmet

我想知道是否可以使用 SublimeText2 的 Enmet/ZenCoding 插件轻松标记 ERB 模板。

例如，您通常可以执行以下操作：

`span.goodbye{hi there!}`--> 选项卡 -->`<span class="goodbye">hi there!</span>`

有没有办法做类似的事情：

`span.goodbye{<%= @post.content%>}`--> 选项卡 -->`<span class="goodbye"><%= @post.content %></span>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:13:39.087

实际上，`span.goodbye{<%= @post.content%>}`按要求工作。

但我建议你[创建一个自定义片段](http://docs.emmet.io/customization/snippets/)，`"erb": "<%= |${child} %>"`这样你就可以写出这样的缩写：

`span.goodbye>erb{@post.content}`

# r - 在 R 中传输矩阵列的标题名称

> ID：13865746
> 
> 赞同：1
> 
> 时间：2012-12-13T18:03:05.250
> 
> 标签：r

假设我有一个包含 N 列的矩阵 A，并且我从该矩阵中取出 2 个（或任何子集）列来构造一个新矩阵 B，例如：

```
B = cbind(A[,1], A[,3]) 
```

是否可以添加一个简单的参数，以便传输两列的标题名称？使用`names(B) = names(A)`不起作用，因为矩阵的维度不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:15:27.343

一个例子会很有帮助，因为我怀疑您可能正在使用您错误地调用矩阵的数据框。我这么说是因为与矩阵一起使用的 names<- 函数会破坏矩阵结构。修改列名的正确函数是`colnames<-`. 此外，如果您使用“[”函数从矩阵中提取列，则几乎不可能列名不会与值一起出现：

```
> mat <- matrix(1:9, 3)
> colnames(mat) <- letters[1:3]
> mat[ , 2:3]
     b c
[1,] 4 7
[2,] 5 8
[3,] 6 9 
```

回应您的评论，最好这样做：

```
B <- A[ , c(1,3) ] 
```

然后您的列名将被正确继承。（补充说明：我很惊讶您的 cbind 操作没有将 col.names 带过来，并想知道为什么会这样。在 cbind 中使用“[”的这个版本确实保留了 col.names：

```
> B=cbind( A[,1,drop=FALSE], A[,3,drop=FALSE])
> B
     a c
[1,] 1 7
[2,] 2 8
[3,] 3 9 
```

"[" 函数将强制单个列或行到一个原子向量，并且显然也失去了它的 dimnames 属性。`drop=FALSE`防止这种损失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:13:14.197

您可以将子集与“选择”一起使用`?subset`

```
 B <- subset(A,select = c(col1,col2)) 
```

例如

```
 A <- mtcars
 B <- subset(A,select = c(mpg,cyl))

                      mpg cyl
Mazda RX4         21.0   6
Mazda RX4 Wag     21.0   6
Datsun 710        22.8   4
Hornet 4 Drive    21.4   6
Hornet Sportabout 18.7   8
Valiant           18.1   6 
```

如果你按索引做：

```
 B=cbind(A[,1],A[,3])
      colnames(B) <- colnames(A)[c(1,3)] 
```

# java - 执行 aapt 的 Android Eclipse 错误：返回代码 139

> ID：13865748
> 
> 赞同：19
> 
> 时间：2012-12-13T18:03:05.103
> 
> 标签：java, android, eclipse, adt

我有一个突然停止工作的 Android 应用程序项目。显然没有错误，但是当我尝试启动时，我得到了这个：

> 执行 aapt 时出错：返回代码 139

我试图清理项目及其依赖库项目，重新启动 Eclipse，更新到最新的 ADT 和 SDK 版本等，但都失败了。我有时也有这个其他错误（没有改变任何东西）：

> 生成最终存档时出错：java.io.FileNotFoundException: .../bin/resources.ap_ 不存在

我完全迷路了。

**更多信息**

我花了几个小时来分解和重​​新组装所有东西，最后找到了导致这些错误的原因，尽管我仍然没有更好的理解......我有这样的资源：

```
<resources>
<integer-array name="titi">
<item>@+id/toto</item>
</integer-array>
</resources> 
```

我删除了它，一切又恢复了……当然，资源文件根本没有错误。半天白白浪费了，这个 Eclipse 快把我逼疯了 8-/ 只有我一个人吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-12-16T02:33:32.043

只是遇到了同样的问题，问题是我在菜单文件夹中有一个菜单文件，而`android:title="@string/.."`我的字符串文件中不存在该文件。添加它并执行后`Project > Clean`，问题就消失了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-23T15:27:55.447

不要`@+id/...`在这里使用：

```
<?xml version="1.0" encoding="utf-8"?>    
<resources>
    <integer-array name="titi">
    <Item>@+id/Toto</item>
    </integer-array>
</resources> 
```

`@+id/...`只能在布局资源中使用。

如果需要，使用`@id/...`并生成带有帮助资源文件的 ID： *res/values/ids.xml：*

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item type="id" name="toto" />
</resources> 
```

[http://developer.android.com/guide/topics/resources/more-resources.html#Id](http://developer.android.com/guide/topics/resources/more-resources.html#Id)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-17T13:23:29.450

遇到同样的问题，在播放一个小时左右后，问题被追踪到一个单引号“'”，出现在资源中。删除了报价，错误消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-20T20:33:07.900

我刚刚将一个项目从使用[Android v7 appcompat 支持库](https://developer.android.com/tools/support-library/features.html#v7-appcompat)中移开并遇到了这个问题。原来我有一堆菜单资源文件，它们仍在使用它们的某些属性的 appcompat 版本。

我曾经有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:compat="http://schemas.android.com/apk/res-auto">
    <item
        android:id="@+id/conversations_activity_menu_contacts"
        android:title="@string/contacts"
        compat:showAsAction="ifRoom|withText" />
</menu> 
```

但随后通过将它们更改为以下内容来纠正问题：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/conversations_activity_menu_contacts"
        android:showAsAction="ifRoom|withText"
        android:title="@string/contacts" />
</menu> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T18:18:05.633

AAPT 错误有时是由于 eclipse 运行内存不足造成的。请参阅：

[如何在 Eclipse 中诊断“执行 aapt 时出错”错误？](https://stackoverflow.com/questions/7198905/how-to-diagnose-error-executing-aapt-error-in-eclipse)

对于问题的第二部分，请参见：

[Android打包问题：resources.ap_不存在](https://stackoverflow.com/questions/4714711/android-packaging-problem-resources-ap-does-not-exist)

# mysql - 如何在 MySQL 中将数据从一个表移动到另一个表？

> ID：13865749
> 
> 赞同：0
> 
> 时间：2012-12-13T18:03:07.940
> 
> 标签：mysql, mysql-workbench

我有以下查询，它提取 1000 行数据：

```
select barcode, type from collections where user = 'myusername' 
```

我需要将此数据移动到我的新`collectors_collections`表中。该`user`列现在标记为`username`。

最快的方法是什么？某种或其他方式的查询？我正在使用最新的 MySQL Workbench。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:08:22.480

您可以尝试运行此查询：

```
INSERT INTO
    collectors_collections(barcode, type, username)
SELECT
    barcode,
    type,
    `user`
FROM
    collections
WHERE
    `user` = 'myusername'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:07:31.463

好吧，这是一种简单的方法，我将使用它来将您选择的结果剪切并粘贴到文本编辑器中。并执行一些简单的搜索/替换来为您的新表创建插入语句。然后只需将新的插入语句粘贴到您的 mysql 客户端。

我假设您不希望正在运行的程序具有此功能。

# java - 为什么这个正则表达式没有给出预期的输出？

> ID：13865750
> 
> 赞同：0
> 
> 时间：2012-12-13T18:03:20.353
> 
> 标签：java, regex, string, string-matching

我有一个包含一些值的字符串，如下所示。我想 用一些新文本替换**包含特定 customerId 的 html img 标签。**我尝试了没有给我预期输出的小型 java 程序。这是程序信息

我的输入字符串是

```
 String inputText = "Starting here.. <img src=\"getCustomers.do?custCode=2&customerId=3334&param1=123/></p>"
    + "<p>someText</p><img src=\"getCustomers.do?custCode=2&customerId=3340&param2=456/> ..Ending here"; 
```

正则表达式是

```
 String regex = "(?s)\\<img.*?customerId=3340.*?>"; 
```

我想放在输入字符串中的新文本

**编辑开始：**

```
String newText = "<img src=\"getCustomerNew.do\">"; 
```

**编辑结束：**

现在我在做

```
 String outputText = inputText.replaceAll(regex, newText); 
```

输出是

```
 Starting here.. Replacing Text ..Ending here 
```

但我的预期输出是

```
 Starting here.. <img src=\"getCustomers.do?custCode=2&customerId=3334&param1=123/></p><p>someText</p>Replacing Text ..Ending here 
```

**请注意，在我的预期输出中，只有包含 customerId=3340 的 img 标签被替换为替换文本。我不明白为什么在输出中我得到两个 img 标签都被替换了？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:18:15.417

你有“通配符”/“任何”模式（`.*`），这会将匹配扩展到可能的最长匹配字符串，并且模式中的最后一个固定文本是一个`>`字符，因此匹配`>`输入文本中的最后一个字符，即最后一个！

您应该能够通过将`.*`部分更改为类似的东西来解决这个问题，`[^>]+`这样匹配就不会超过第一个`>`字符。

用正则表达式解析 HTML 势必会带来痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:52:33.283

正如其他人在评论中告诉你的那样，HTML 不是一种常规语言，因此使用正则表达式来操作它通常很痛苦。您最好的选择是使用 HTML 解析器。我以前没有使用过 Jsoup，但是用谷歌搜索一下似乎你需要类似的东西：

```
import org.jsoup.*;
import org.jsoup.nodes.*;
import org.jsoup.select.*;

public class MyJsoupExample {
    public static void main(String args[]) {
        String inputText = "<html><head></head><body><p><img src=\"getCustomers.do?custCode=2&customerId=3334&param1=123\"/></p>"
            + "<p>someText <img src=\"getCustomers.do?custCode=2&customerId=3340&param2=456\"/></p></body></html>";
        Document doc = Jsoup.parse(inputText);
        Elements myImgs = doc.select("img[src*=customerId=3340");
        for (Element element : myImgs) {
            element.replaceWith(new TextNode("my replaced text", ""));
        }
        System.out.println(doc.toString());
    }
} 
```

基本上，代码获取具有包含给定字符串`img`的属性的节点列表`src`

```
Elements myImgs = doc.select("img[src*=customerId=3340"); 
```

然后遍历列表并用一些文本替换这些节点。

**更新**

如果您不想`img`用文本替换整个节点，而是需要为其`src`属性指定一个新值，那么您可以将`for`循环块替换为：

```
element.attr("src", "my new value")); 
```

或者，如果您只想更改部分`src`值，则可以执行以下操作：

```
String srcValue = element.attr("src");
element.attr("src", srcValue.replace("getCustomers.do", "getCustonerNew.do")); 
```

这与我[在此线程中](https://stackoverflow.com/questions/13857509/regex-to-replace-the-specific-string-with-in-image-tag/13882807#13882807)发布的内容非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T15:47:35.660

发生的情况是，您的正则表达式开始匹配第一个*img*标签，然后消耗所有内容（无论是否贪婪），直到找到*customerId=3340*，然后继续消耗所有内容，直到找到*>*。

如果您希望它仅使用*customerId=3340的**img* ，请考虑是什么使该标签与它可能匹配的其他标签不同。

 *在这种特殊情况下，一种可能的解决方案是使用后视运算符（不消耗匹配项）查看该*img标记背后的内容。*此正则表达式将起作用：

```
String regex = "(?<=</p>)<img src=\".*?customerId=3340.*?>"; 
```*

# javascript - jQuery clone() 复制数据...有时...？

> ID：13865754
> 
> 赞同：2
> 
> 时间：2012-12-13T18:03:25.683
> 
> 标签：javascript, jquery, jquery-ui, clone

使用下面的示例，`tr`我正在复制一个。它包含一个 jQuery `autocomplete`。第一次克隆时，自动完成功能不起作用，因为附加`data("items")`为空。第二次单击“添加”按钮时，自动完成功能起作用。此后，再次单击“添加”会产生不起作用的自动完成。

在函数内部添加断点`makeAutoComplete`表明它`items`始终为空，除非第二次单击添加！

谁能解释这种奇怪的行为？

**HTML/JS**（这里的小提琴：http: [//jsfiddle.net/SDvF4/12/](http://jsfiddle.net/SDvF4/12/)）

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title>Test!</title>
        <style type="text/css">
            tr.Template
            {
                display: none;
            }
        </style>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/ui/1.8.18/jquery-ui.js"></script>
        <script type="text/javascript">
            $(document).ready(function ()
            {
                var textbox = $(".AutoComplete");

                makeAutoComplete(textbox);

                $("#addButton").click(function ()
                {
                    var attrRegex = /\d+/;
                    var template = $("tr.Template");
                    var newRow = template.clone(false);
                    var newRowIndex = (template.siblings().length + 1);

                    newRow.removeClass("Template");
                    newRow.find("*[id]").each(function ()
                    {
                        var element = $(this);

                        element.attr("id", element.attr("id").replace(attrRegex, newRowIndex));
                    });
                    newRow.find("*[name]").each(function ()
                    {
                        var element = $(this);

                        element.attr("name", element.attr("name").replace(attrRegex, newRowIndex));
                    });
                    newRow.insertBefore(template);
                    newRow.find(".AutoComplete").each(function ()
                    {
                        makeAutoComplete($(this));
                    });
                });
            });

            function makeAutoComplete(textbox)
            {
                var items = textbox.data("items");
                var test = textbox.data("test");

                if (items == null)
                {
                    if (test == "JSM")
                        alert("ERROR: data.items not copied but data.test was!");
                    else
                        alert("ERROR: data.items not copied nor was data.test!");
                }

                textbox.autocomplete(
                {
                    minLength: 0,
                    source: items
                });
            }
        </script>
    </head>
    <body>
        <table>
            <tbody>
                <tr class="Template">
                    <td>
                        <input id="test_0" name="test_0" class="AutoComplete" type="text"/>
                        <script type="text/javascript">
                            var testData = [{ label: "One", value: 1 }, { label: "Two", value: 2 }];

                            $("#test_0").data("items", testData);
                            $("#test_0").data("test", "JSM");
                        </script>
                    </td>
                </tr>
            </tbody>
        </table>
        <br/><br/>

        <button id="addButton">Add</button>​
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:48:45.957

我必须解决多个问题才能使其正常工作。

首先是@pimvdb 指出的——我没有正确识别元​​素，所以第二个新行的 ID 与模板行相同。

其次，你不能简单地调用`autocomplete`一个已经是`autocomplete`- 首先你必须销毁它的小部件：

```
textbox.autocomplete("destroy");
textbox.removeData("autocomplete"); 
```

第 12 次修订工作正常：http: [//jsfiddle.net/SDvF4/12/](http://jsfiddle.net/SDvF4/12/)

# android - 辅助类中的 View.VISIBLE 或 View.INVISIBLE

> ID：13865755
> 
> 赞同：0
> 
> 时间：2012-12-13T18:03:25.833
> 
> 标签：android, android-layout, view, progress-bar, android-progressbar

我有一个带有布局和 ProgressBar 的活动：

```
public class Saldo_Menu extends Activity implements OnClickListener, OnLongClickListener {

static InternetHelper IH;
ProgressBar pleasewait;  

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        pleasewait=(ProgressBar)findViewById(R.id.pleasewait);

        IH=new InternetHelper(this);

        pleasewait.setVisibility(View.INVISIBLE);
} 
```

我想从这个帮助类 InternetHelper 中激活进度条，有人可以给我一个小例子。这给出了一个空指针，因为我知道我无法从那里访问 UI：

```
 public InternetHelper (Context context) {
        myContext = context;

         }

public void ShowProgressBar(boolean show){
 if (show){pleasewait.setVisibility(View.VISIBLE);}else{pleasewait.setVisibility(View.INVISIBLE);}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:12:16.737

在您的助手类中保存对进度条的引用，然后使用它来访问它。

```
ProgressBar myBar;

public InternetHelper (Context context, ProgressBar pleasewait) {
        myContext = context;
        myBar = pleasewait;
        } 
```

然后你应该能够`ShowProgressBar(boolean)`毫无问题地使用你的功能。

# android - 如何在android应用程序中嵌入sqlite-database-file

> ID：13865759
> 
> 赞同：0
> 
> 时间：2012-12-13T18:03:37.380
> 
> 标签：android, sqlite

有人指导我plzzzz。我有一个用于执行 CRUD 操作的基本 android-sqlite-database 应用程序。当我对`/data/data/package-name/mydatabase.db`. 但是现在我必须将数据库文件嵌入到应用程序中。我已将文件放在*`.db`*文件`assets`夹中并编写了此代码。但是面临如下所述的持续问题......我的*DatabaseHandler*类如下......

```
private static final String DATABASE_PATH = "com.example.database_abc/assets/contactsDB.db" ; 
private static final String DATABASE_NAME = "contactsDB";
private  SQLiteDatabase myDatabase ;
private final Context myContext ;

public DatabaseHandler3(Context context){
    super(context, DATABASE_NAME, null, 1);
    this.myContext = context ;

}

public boolean checkDatabase(){
    SQLiteDatabase checkDB = null ;
    try{
        checkDB = SQLiteDatabase.openDatabase( DATABASE_PATH , null, SQLiteDatabase.OPEN_READWRITE);
    }catch(SQLException ioex){
        throw new Error("Database Not Found..........................");
    }

    if(checkDB != null){
        checkDB.close();
    }

    return checkDB != null ? true : false ;
}// End of checkDataBase()

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DATABASE_PATH ;
    myDatabase = SQLiteDatabase.openDatabase(DATABASE_PATH, null, SQLiteDatabase.OPEN_READWRITE);

   }

@Override
public void onCreate(SQLiteDatabase db){

}
@Override
public void onUpgrade(SQLiteDatabase db, int arg1, int arg2){

} 
```

我`Logcat`的如下..

```
12-13 17:24:29.244: E/SQLiteLog(5563): (14) cannot open file at line 30176 of [00bb9c9ce4]
12-13 17:24:29.244: E/SQLiteLog(5563): (14) os_unix.c:30176: (2) open(//com.example.database_abc/assets/contactsDB.db3) - 
12-13 17:24:29.384: E/SQLiteDatabase(5563): Failed to open database 'com.example.database_abc/assets/contactsDB.db3'.
12-13 17:24:29.384: E/SQLiteDatabase(5563): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at com.example.database_abc.DatabaseHandler3.checkDatabase(DatabaseHandler3.java:27)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at com.example.database_abc.MainActivity.onButtonClick(MainActivity.java:55)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at java.lang.reflect.Method.invokeNative(Native Method)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at java.lang.reflect.Method.invoke(Method.java:511)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.view.View$1.onClick(View.java:3592)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.view.View.performClick(View.java:4202)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.view.View$PerformClick.run(View.java:17340)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.os.Handler.handleCallback(Handler.java:725)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.os.Looper.loop(Looper.java:137)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at java.lang.reflect.Method.invokeNative(Native Method)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at java.lang.reflect.Method.invoke(Method.java:511)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-13 17:24:29.384: E/SQLiteDatabase(5563):     at dalvik.system.NativeStart.main(Native Method)
12-13 17:24:29.384: D/AndroidRuntime(5563): Shutting down VM
12-13 17:24:29.394: W/dalvikvm(5563): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-13 17:24:29.504: E/AndroidRuntime(5563): FATAL EXCEPTION: main
12-13 17:24:29.504: E/AndroidRuntime(5563): java.lang.IllegalStateException: Could not execute method of the activity
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.view.View$1.onClick(View.java:3597)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.view.View.performClick(View.java:4202)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.view.View$PerformClick.run(View.java:17340)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.os.Handler.handleCallback(Handler.java:725)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.os.Looper.loop(Looper.java:137)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at java.lang.reflect.Method.invokeNative(Native Method)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at java.lang.reflect.Method.invoke(Method.java:511)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at dalvik.system.NativeStart.main(Native Method)
12-13 17:24:29.504: E/AndroidRuntime(5563): Caused by: java.lang.reflect.InvocationTargetException
12-13 17:24:29.504: E/AndroidRuntime(5563):     at java.lang.reflect.Method.invokeNative(Native Method)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at java.lang.reflect.Method.invoke(Method.java:511)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at android.view.View$1.onClick(View.java:3592)
12-13 17:24:29.504: E/AndroidRuntime(5563):     ... 11 more
12-13 17:24:29.504: E/AndroidRuntime(5563): Caused by: java.lang.Error: Database Not Found..........................
12-13 17:24:29.504: E/AndroidRuntime(5563):     at com.example.database_abc.DatabaseHandler3.checkDatabase(DatabaseHandler3.java:29)
12-13 17:24:29.504: E/AndroidRuntime(5563):     at com.example.database_abc.MainActivity.onButtonClick(MainActivity.java:55)
12-13 17:24:29.504: E/AndroidRuntime(5563):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:16:40.980

不知道你是如何创建数据库的，但是使用 Firefox [SQLiteManager](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)之类的东西来创建，然后粘贴到 assets 目录中对我来说一直很好。另一个原因可能是版本不兼容，或者扩展名（`db3`vs. `db`or `sqlite`）很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:19:27.013

不要这样做有什么问题，但我认为你最好试试这个

> SQLiteDatabase.openOrCreateDatabase（路径，工厂）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:13:47.513

这是我用来创建使用只读 sqlite 数据库的应用程序的教程：

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

它提供了将打包在您的资产文件夹中的数据库移动到“/data/data/XX.XXX.XX/databases”位置中的最终存放位置所需的所有代码。

如果您的数据库很大，也请阅读此链接：

[http://ponystyle.com/blog/2010/03/26/dealing-with-asset-compression-in-android-apps/](http://ponystyle.com/blog/2010/03/26/dealing-with-asset-compression-in-android-apps/)

# sql-server-2012 - 如何在 SQL Server 2012 重新安装时重置实例名称？

> ID：13865761
> 
> 赞同：2
> 
> 时间：2012-12-13T18:03:41.867
> 
> 标签：sql-server-2012, overwrite, failed-installation

我正在尝试在 Windows 7 64 位上安装 SQL Server 2012。第一次，我的笔记本电脑在“安装进度”期间崩溃了，所以我必须通过结束进程从 Windows 任务管理器中取消安装。

现在我想再次安装并替换已经存在的所有内容。但是，由于我第一次将实例名称设置为 MSSQLSERVER2012，因此需要我设置一个新的。我怎么能覆盖现有的？或者我必须设置一个新的并在安装后删除旧的？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:11:58.417

您不能覆盖实例名称，您必须卸载旧实例并使用新实例名称重新安装。

# objective-c - 通过 addChildViewController 添加 UISplitViewController

> ID：13865763
> 
> 赞同：2
> 
> 时间：2012-12-13T18:03:49.257
> 
> 标签：objective-c, layout, rotation, uisplitviewcontroller, childviewcontroller

我有一个 UIViewController，其中另一个 viewcontroller(1) 和 splitviewcontroller(2) 通过 addchildviewcontroller 方法进行切换。因此，当我添加 splitviewcontroller 时，它无法处理正确的旋转。看视频[——https://dl.dropbox.com/u/2139277/IMG_0180.MOV](https://dl.dropbox.com/u/2139277/IMG_0180.MOV)。

这是进行切换的代码：

```
- (void)transitionFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController
{
    if (fromViewController == toViewController)
        return;
    // animation setup
    toViewController.view.frame = self.view.bounds;
    // notify
    [fromViewController willMoveToParentViewController:nil];
    [self addChildViewController:toViewController]; 
    // select animation direction
    UIViewAnimationOptions animation = (_contentState == ContentStateViewingMap) ? UIViewAnimationOptionTransitionCurlUp : UIViewAnimationOptionTransitionCurlDown;
    // transition
    ContentState previousState = _contentState;
    _contentState = ContentStateAnimating;
    [self transitionFromViewController:fromViewController
                      toViewController:toViewController
                              duration:0.6
                               options:animation | UIViewAnimationOptionCurveEaseInOut
                            animations:nil
                            completion:^(BOOL finished) {
                                [toViewController didMoveToParentViewController:self];
                                [fromViewController removeFromParentViewController];
                                _contentState = (previousState == ContentStateViewingMap) ? ContentStateViewingList : ContentStateViewingMap;
                            }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:16:36.553

AFAIK UISplitViewController 必须是窗口的根视图控制器。不支持将其添加为子视图控制器。

# javascript - 必应地图 API——setBounds

> ID：13865770
> 
> 赞同：2
> 
> 时间：2012-12-13T18:04:37.827
> 
> 标签：javascript, google-maps, bing-maps

我正在将映射实用程序从 Gmap 转换为 Bing。在 Google 地图中，您可以轻松地向地图添加标记，并且每次添加标记时，都会将标记的位置添加到边界对象，然后`setBounds()`在地图上调用以使地图居中以适合所有标记。

我找不到使用 Bing 地图的类似方法，而且与 Google 的文档相比，这些文档非常糟糕。

到目前为止，我已经创建了地图并添加了标记——但地图停留在初始视图，而不是更新以适应标记。

是否有与 Bing javascript API 的 setBounds 方法等效的方法，或者是否有另一种方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:12:31.387

在 Bing 中执行此操作的方法是：

1) 使用 LocationRect.fromLocations 函数 (http://msdn.microsoft.com/en-us/library/gg427621.aspx) 从您的图钉位置创建一个边界框 2) 将在其中创建的 LocationRect 传递给地图对象setViewFunction 作为 ViewOptions 参数的一部分[http://msdn.microsoft.com/en-us/library/gg427628.aspx](http://msdn.microsoft.com/en-us/library/gg427628.aspx)

# opengl - glGenVertexArrays 没有给出唯一的 vaos

> ID：13865771
> 
> 赞同：2
> 
> 时间：2012-12-13T18:04:39.487
> 
> 标签：opengl, graphics, cross-platform, vertex-array

我和我的朋友正在开发一个使用 C++ 和 OpenGL 的项目。我们为“ModelObject”创建了一个 C++ 类，每个 ModelObject 都有一个 GLuint vao 作为成员变量。然后在初始化 ModelObject 时，我们调用

```
glGenVertexArrays( 1, &vao );
glBindVertexArray( vao ); 
```

在我们调用的初始化函数结束时

```
glBindVertexArray(0); 
```

脱离上下文。现在我们正在尝试渲染 2 个对象，一个火车车厢和一个立方体。在他的机器（Linux Mint）上，它们都渲染得很好，有自己的纹理，查询对象的 vaos 分别返回 1 和 2。

然而，在我的机器（MacBook Pro）上，两个对象都呈现为立方体（尽管一个具有火车的纹理，另一个具有立方体的纹理）。查询他们的 vaos 返回 0 和 0。

作为一个实验，我们告诉 glGenVertexArrays 为每个 ModelObject 创建 5 个 vaos。这产生了列表 0、1、918273、8、7（或类似的东西），并且对于两个 ModelObject 来说它是相同的列表。

据我所知，问题在于 glGenVertexArrays 既 a）使用 0 作为有效地址，又 b）在每次调用时生成相同的地址，即使我们从未调用 glDeleteVertexArray。为什么它会在我的机器上而不是他的机器上执行此操作，我该如何阻止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:08:52.543

您的 GPU 是否支持 OpenGL 3.0？[glview](http://www.realtech-vr.com/glview/)对入口点 glGenVertexArrays 有什么看法？您的 GPU/驱动程序可能不支持 VAO。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-16T10:32:34.023

我在 iMac 上遇到了同样的问题。事实证明，显然在 MacOS 上，您需要使用 glGenVertexArrayAPPLE 和 glBindVertexArrayAPPLE。替换呼叫提供一致的唯一 VAO。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-16T13:20:59.007

VAO 是在 OpenGL 3.0 中引入的，因此它们只能在支持 3.0 或更高版本的上下文中工作。

Mac OS 仅在 Core Profile 上下文中支持 OpenGL 3.x 和 4.x。默认情况下，您将获得一个支持 OpenGL 2.1 的上下文，其中包含所有已弃用且已在核心配置文件中删除的旧功能。Mac OS 不**支持**兼容性配置文件，其中 3.0 及更高版本的功能可以与旧功能结合使用。

如何创建 Core Profile 上下文取决于您使用的窗口系统界面。对于两个常见的：

*   使用 GLUT（它本身被标记为已弃用，但目前仍然有效）：添加`GLUT_3_2_CORE_PROFILE`到传递给的标志`glutInitDisplayMode()`（有关详细信息，请参阅[Mac OSX 10.9 中的 Glut 弃用，IDE：QT Creator](https://stackoverflow.com/questions/24095931/glut-deprecation-in-mac-osx-10-9-ide-qt-creator/24098402#24098402)）。

*   使用 Cocoa，将此属性/值对添加到像素格式属性中：

    ```
    NSOpenGLPFAOpenGLProfile, NSOpenGLProfileVersion3_2Core, 
    ```

一旦你有了核心配置文件上下文，`glGenVertexArrays()`就`glBindVertexArray()`可以正常工作了。这显然需要一台至少可以支持 OpenGL 3.x 的机器。本页表格列出了每台机器的版本支持：http: [//support.apple.com/kb/HT5942](http://support.apple.com/kb/HT5942)。

# wpf - 关闭动画弹出窗口

> ID：13865772
> 
> 赞同：1
> 
> 时间：2012-12-13T18:04:45.490
> 
> 标签：wpf, c#-4.0, .net-4.0, popup

所以我在 C# 中为弹出窗口设置动画时遇到了麻烦，我想知道我做错了什么。弹出窗口在打开时动画，在关闭时不动画。打开后是否必须将 PopupAnimation 值设置为新动画？

```
Popup popup = new Popup();
popup.AllowTransparency = true;
popup.StayOpen = false;
popup.PopupAnimation = PopupAnimation.Slide;
popup.IsOpen = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:51:11.030

要在关闭时为弹出窗口设置动画，您必须在动画之后设置动画才能打开弹出窗口。

```
popup.Opened += popup_Opened;  
void popup_Opened(object sender, EventArgs e)
{
    popup.PopupAnimation = PopupAnimation.Fade;
} 
```

# c# - 我可以使用自动映射器将多个对象映射到目标对象吗

> ID：13865776
> 
> 赞同：2
> 
> 时间：2012-12-13T18:05:05.210
> 
> 标签：c#, mapping, automapper

```
UserAccount objUserAccount=null;
AutoMapper.Mapper.CreateMap<AccountBO, UserAccount>();
objUserAccount = AutoMapper.Mapper.Map<AccountBO, UserAccount>(lstAcc[0]); 
```

到目前为止，它的映射`AccountBO`属性很好。

现在我必须将对象`objAddressBO`属性映射到目的地，包括上面的映射值。为此，我在上面的代码行之后编写了如下代码。

```
AutoMapper.Mapper.CreateMap<AddressBO,UserAccount>();
objUserAccount=AutoMapper.Mapper.Map<AddressBO,UserAccount>(objAddressBO); 
```

但它丢失了第一次映射的值，只返回最后一次映射的值。

请让我知道我需要做哪些更改才能使我的目标对象中的这两个值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:10:24.923

您应该只配置一次映射。最好的方法是使用配置文件：

```
public class MyProfile : Profile
{
    public override string ProfileName
    {
        get
        {
            return "MyProfile";
        }
    }

    protected override void Configure()
    {
        AutoMapper.Mapper.CreateMap<AccountBO, UserAccount>();
        AutoMapper.Mapper.CreateMap<AddressBO,UserAccount>();
    }
} 
```

然后应该在初始化方法中对其进行初始化（例如`App_Start`对于 Web 项目）

您还应该创建一个单元测试来测试映射是否已正确配置

```
[TestFixture]
public class MappingTests
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();
    }
} 
```

如果一切正常，并且假设我已经正确理解了这个问题，您想从 初始化，然后`objUserAccount`从`listAcc[0]`中填写一些附加参数`objAddressBO`。你可以这样做：

```
objUserAccount = Mapper.Map<AccountBO, UserAccount>(lstAcc[0]);
objUserAccount= Mapper.Map(objAddressBO, objUserAccount); 
```

第一个地图将创建对象，第二个地图将更新提供的目标对象。

请注意，要使其正常工作，您可能需要稍微填写映射配置以提供正确的行为。例如，如果您希望避免更新目标属性，您可以使用该`UseDestinationValue`指令。如果您想对更新应用条件，您可以使用该`Condition`指令。如果您希望完全忽略该属性，可以使用该`Ignore`指令。

如果需要，可以在[此处](https://github.com/AutoMapper/AutoMapper/wiki)找到更多文档。

# asp.net-mvc - SignalR Sql Server/Owin 依赖问题

> ID：13865782
> 
> 赞同：3
> 
> 时间：2012-12-13T18:05:26.280
> 
> 标签：asp.net-mvc, signalr

我将在这个问题的开头说我大约在 30 小时前开始使用 SignalR，所以请原谅任何业余问题，如果您知道一些我错过的文档，请随时指出我。另外，我不是想写一篇博文——只是解释我为达到我所经历的步骤。

TLDR？跳到最后的问题...

我需要使用 Sql Server 背板（很想使用 Redis，但我们目前不处理 Redis，并且不愿意在一个开发周期中引入*太多新技术）。*目前，没有可用的 NuGet 包，`Microsoft.AspNet.SignalR.SqlServer`所以我必须使用 Github 源代码。

所以我去下载源代码，编译并添加对 Microsoft.AspNet.SignalR.SqlServer.dll 的引用，但现在编译失败（特别`GlobalHost.DependencyResolver.UseSqlServer( ... )`是在我的代码中引用时 - 这是一个依赖冲突，`*.SqlServer`代码需要更新版本`*.SignalR.Core`- 这并不奇怪，因为自从 NuGet 包发布以来，Github 的版本（毫无疑问）有很多变化）。:(

所以下一步是使用`*.Core`我编译的`*.SqlServer`. 下一个问题 - 新的 SignalR 版本不再适用于`*.Hosting.Common`或`*.Hosting.AspNet`已被`*.Owin`库替换。

所以，我添加了`*.Owin`（和 Owin - 来自 NuGet），但现在我遇到了另一个问题：`MapHubs( ... )`扩展方法不再起作用 -`MapHubs( IAppBuilder builder, ... )`在 Owin 中调用了扩展方法，但它们不再起作用`RouteTable`- 它们起作用`Owin.IAppBuilder`（因此我想需要参考 Owin）。

所以这就是我所在的地方。[我对Owin](http://owin.org/)做了一个快速的阅读（似乎是一个很酷的概念），但我并不特别在意花几个小时来解决这个问题，只是为了能够在服务器端设置 SignalR。所以，现在的问题：

1.  我是否应该尝试`*.SqlServer`与 SignalR 的较旧 NuGet 包配合使用（换句话说，更改依赖关系是否可能`*.SqlServer`会引入不可靠的行为）？或者，是否有一个版本`*.SqlServer`可以与 SignalR 的当前 NuGet 版本一起使用？
2.  通过 Owin 主机方法运行 SignalR 需要哪些具体步骤（如果没有引入 Nancy 集成，我找不到任何示例 - 或者这是正确的方法）？
3.  MapHubs 方法的替代方法是什么？我从哪里获得 IAppBuilder？我什至应该这样做吗？
4.  在[Google Groups 帖子](https://groups.google.com/forum/#!topic/net-http-abstractions/eG9q1hMLypc)中，David Fowler 指出，在 Owin 支持下，不再需要 AspNet 依赖项。很好 - 但是现在有什么理由在 ASP.Net MVC 应用程序中使用 SignalR 吗？
5.  如果 SignalR 的任何部分都没有通过服务器上的 IIS 托管，客户端回退（即 SSE 或长轮询）是通过 IIS 还是独立使用 Owin 主机？
6.  最后，我计划在一个 ASP.Net MVC 4 项目中运行 SignalR，该项目作为另一个现有站点的虚拟目录托管 - 我想在单个域中工作。当我的站点托管在 IIS 7.5 中时，使用 Owin 方法是否仍然可行？

**更新：**根据上面的*1.*，我设法通过`*.SqlServer`依赖当前的 NuGet`*.Core`实现来编译代码。所以现在我可以继续开发了。我不认为我想在生产中使用它——我只需要做一个与处理对象相关的小改动——但我只是不认为这是一个好方法。所以我关于 Owin 方法的问题仍然存在——除非有人能说服我我所采取的方法是好的。

谢谢，扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:55:37.853

**简短的回答：**

希望这会帮助其他有这个问题的人（我敢肯定你们至少有一个人！）：似乎我提出的问题的时机真的很糟糕，因为在发布几个小时后，SignalR 在 NuGet 中更新为版本 1.0.0-rc1。所以，对于任何与我有同样问题的人 - 只需升级软件包。

**细节：**

安装后，当您查看引用时，您会注意到现在有一​​个`Microsoft.AspNet.SignalR.SystemWeb`引用。在没有深入研究的情况下，我认为这是一个替代品`*.Hosting.Common`，`*.Hosting.AspNet`因为在更新`MapHubs( ... )`扩展方法后工作正常。

我还注意到`*.SystemWeb`引用依赖于`*.Owin`- 所以我猜 Owin 引用被用作抽象层，它允许 SystemWeb 托管独立于底层 IIS/其他服务器实现。

至于`.SqlServer`参考，那仍然需要我针对 NuGet 版本编译一个版本`*.Core`，以便在本地编译。我现在只使用它，并希望项目团队在不久的将来某个时候在 NuGet 上发布一个工作版本。

一个现实的替代方案是让我的团队相信我们应该将 Redis 加入其中——在与 Redis 合作过其他项目后，出于性能考虑，我认为这是一个不错的选择，但它确实需要 Linux，这可能是一个问题.Net 团队...

# php - php：脚本过早更新字段？

> ID：13865787
> 
> 赞同：0
> 
> 时间：2012-12-13T18:05:54.657
> 
> 标签：php, time, strtotime, php4, unix-timestamp

我正在制作一个拍卖类型的网站，您可以想象它应该在产品过期时将其下架。过期只是存储为 MySQL 数据类型 DATE。

所以check_items.php：

```
<?php
function check_items()
{
$con = mysql_connect('localhost','heh','heh');
mysql_select_db('heh_db',$con);
$q = mysql_query("select last_check from ran_last",$con) or die("Check ran_last 1");
$r = mysql_fetch_assoc($q);
//if((time()-strtotime($r['last_check'])) >(60*60*17))//check only once every 17 hours
if(true)
{
    $q2 = mysql_query("select * from Item where expired=0");
    $remove = array(); $count=0;
    while($row = mysql_fetch_assoc($q2))
    {
        if(strtotime($row['time_expire'])<time())
        {
            echo("strtotime: ".strtotime($row['time_expire'])." time: ".time());
            $remove[$count] = $row['ItemID'];
            $count++;
        }
    }
    mysql_free_result($q2);
    foreach($remove as $next)
    {
        echo($next);
        $q3 = mysql_query(sprintf("select * from Item where ItemID='%s'",$next)) or die("check items outer query foreach");
        $r3 = mysql_fetch_assoc($q3);
        $q4 = mysql_query(sprintf("update Item set expired='1' where ItemID='%s'",$r3['ItemID']));
        if(isset($r3['bidderID']))
        {
            $f1 = mysql_query(
                sprintf("insert into notifications(userID,item_name,ItemID,type,info) values('%s','%s','%s','%s','%s')",
                $r3['bidderID'],
                $r3['item_name'],
                $r3['ItemID'],
                "BUY",
                sprintf("You have won the bidding for this item. Contact the <a href=\"pm.php?ID=%s&&expired_item=%s\">seller</a> for details",
                    $r3['userID'],
                    $r3['ItemID'])
                ),$con
            );
            $f2 = mysql_query(
                sprintf("insert into notifications(userID,item_name,ItemID,type,info) values('%s','%s','%s','%s','%s')",
                $r3['userID'],
                $r3['item_name'],
                $r3['ItemID'],
                "SELL",
                sprintf("<a href=\"pm.php?ID=%s&&expired_item=%s\">User</a> has won the bidding for your item. You are encouraged to contact each other",$r3['bidderID'],
                    $r3['ItemID'])
                ),$con
            );
        }
        else
        {
            $f1 = mysql_query(
                sprintf("insert into notifications(userID,item_name,ItemID,type,info) values('%s','%s','%s','%s','%s')",
                $r3['userID'],
                $r3['item_name'],
                $r3['ItemID'],
                "SELL",
                sprintf("Unfortunately no one bid on your item. You can view expired items from your userpage and re-upload",
                    $r3['userID'])
                ),$con
            );
        }
        mysql_free_result($q3);
    }
    $done = mysql_query("insert into ran_last values()");
}
mysql_free_result($q);
}
?> 
```

该脚本功能齐全，存储上次更新的时间，并且应该每 17 小时运行一次。现在，只要调用该函数，它就会运行。基本上每当我列出产品时，它都会自动被除名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:10:25.567

呃，你为什么要这样？你可以在 PHP 中进行过滤，省去很多麻烦：

```
SELECT ItemID
FROM Item
WHERE (expired = 0) AND (time_expire < (SELECT last_check FROM last_ran)) 
```

另外，当您进行真正的到期检查时，您甚至没有检查此值：

```
 if(strtotime($row['time_expire'])<time())
                                      ^^^^^^--- shouldn't this be $r['last_check']? 
```

# javascript - 如何访问来自 Internet Explorer 中的 ajax 调用的响应正文（数据）？

> ID：13865793
> 
> 赞同：0
> 
> 时间：2012-12-13T18:06:21.077
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

在除 Internet Explorer 之外的所有其他浏览器中，我可以使用 jQuery 表单插件从 ajax 请求访问响应数据。当我在 Internet Explorer 中执行相同操作时，数据会进入，但我无法访问它。我在 IE9 的控制台中不断收到“SCRIPT5: Access Denied”错误。我如何访问这些数据，因为它显然是进来的，但是任何时候我什至尝试控制台它都会抛出那个错误。是的，console.log 确实在 IE9 中工作。我已经测试过了。

```
function run() {
        $("#testing").ajaxSubmit({
            success: function (data) {
                console.log(data);
                var parsedjson = JSON.parse(data)[0];
            }
        });
    }

<form id="testing" action="http://clvapi/upload/uploadhandler.ashx" method="POST" enctype="multipart/form-data">
<div class="twitter-bootstrap-upload">
    <div class="fileupload fileupload-new" data-provides="fileupload">
      <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
      <div>
        <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" name="files[]" onchange="run()"/></span>
        <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
      </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:10:07.123

我假设`testing`是你的形式。

试试这个而不是使用插件：

```
 $("#testing").on('submit', function(){
        $.post(this.action, $(this).serialize(), function (data) {
            console.log(data);
            var parsedjson = JSON.parse(data)[0];
        });
        return false; //prevent the default `submit` from occuring
    }); 
```

然后，当您想（以编程方式）提交表单时，只需执行以下操作：

```
 $("#testing").trigger('submit'); 
```

或者，如果您不想从 js 代码提交表单，只需像往常一样提交即可。

# javascript - 网站中的可拖动下拉菜单（通过触摸幻灯片显示菜单元素）

> ID：13865796
> 
> 赞同：3
> 
> 时间：2012-12-13T18:06:39.887
> 
> 标签：javascript, jquery, html, jquery-mobile, hammer.js

我想制作一个像这张图片中的菜单：

![在此处输入图像描述](../Images/b48480682272d6ffbb5b54868ef4ea20.png)

在左侧有完整的菜单（其中每个按钮都是一个 div），但是当我打开页面时按钮不显示。我想通过按住和滑动来显示按钮（可能使用触摸幻灯片？），但这必须在移动设备上工作。此外，如果它不能在 PC 上运行也没关系。

我不知道这是否可以通过使用 jQuery mobile、Hammer 或其他库来实现。我已经做了一个菜单，只需单击第一个按钮即可显示所有按钮，但设计师对此并不满意。我的代码是这样的：

```
<div id="main_button">Button</div>
<nav id="main_menu">
    <div id="b1">Yellow</div>
    <div id="b2">Red</div>
    <div id="b3">Blue</div>
    <div id="b4">Green</div>
    <div id="b5">Orange</div>
    <div id="b6">Purple</div>
</nav> 
```

你知道这是否可能吗？如果是这样，我可以用什么来完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:48:32.590

**编辑 1**

更多可能的部分解决方案：

*   [JQuery Mobile：拉动刷新列表视图](https://stackoverflow.com/questions/8991774/jquery-mobile-pull-to-refresh-list-view)
*   [https://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

* * *

**编辑 0**

类似的问题：[有人知道 javascript 中的下拉菜单插件吗？](https://stackoverflow.com/questions/8749921/does-anyone-know-of-a-pulldown-menu-plugin-in-javascript)

和解决方案：http: [//jsfiddle.net/JXeWA/46/](http://jsfiddle.net/JXeWA/46/)

* * *

我认为这是可能的，但您可能必须根据您的规范自定义代码。这是我发现的一个例子：http: [//jsfiddle.net/vxvgH/3/light/](http://jsfiddle.net/vxvgH/3/light/)

[此示例](http://codecanyon.net/item/jquery-pull-down-to-refresh/1157148)使用类似的效果来刷新页面。这可能有助于自定义您的代码。

您将在下面找到第一个示例中的 JavaScript。这很混乱，但它是一个开始的地方。

```
var startPosition = 0;
var pagePosition = 0;
var scrollY = 0;
var scrollPrevented = false;

$(document).on('vmousedown', '.dragme', function(event) {
    var startPosition = pagePosition;
    $(document).on('vmousemove', function(event2) {
        scrollY = event2.pageY;
        pagePosition = startPosition + scrollY - event.pageY;
        if (pagePosition > $("#menu").height()) {
            pagePosition = $("#menu").height();
        } else if (pagePosition < 0) {
            pagePosition = 0;
        }
        if (scrollPrevented == false) {
            scrollPrevented = true;
            $(document).on('touchmove', function(ev) {
                ev.preventDefault();
            });
        }
        $("#menu").css({
            'z-index': '-1'
        });
        menuSlide();
        $("#menu").show();
    });
});

$(document).on('vmouseup', function() {
    if (scrollPrevented == true) {
        $('body').unbind('touchmove');
        scrollPrevented = false;
    }
    $(document).off('vmousemove', stopScroll());
});

function menuSlide() {
    var newHeight = $(window).height() - pagePosition;
    $("#page1").css({
        top: pagePosition,
        height: newHeight
    }).page();

    $("#page2").css({
        top: pagePosition,
        height: newHeight
    }).page();
}

function stopScroll() {
    if (pagePosition > $("#menu").height() / 2) {
        pagePosition = $("#menu").height();
        $("#menu").show();
        $("#menu").css({
            'z-index': '1500'
        });
    } else {
        pagePosition = 0;
        $("#menu").hide();
        $("#menu").css({
            'z-index': '-1'
        });
    }
    menuSlide();
}

$("#menu").css({
    position: "absolute",
    width: $(window).width(),
    height: $(window).height * .3,
    left: 0,
    'z-index': '-1',
    'min-height': 'initial'
}).page();

$(document).on("click", ".page1", function(){
    $("#menu").css({
        'z-index': '-1'
    });

    pagePosition = 0;
    menuSlide();
    $("#menu").hide();
    $.mobile.changePage("#page1", {transition:"slide",
                                   reverse: true}); 
});

$(document).on("click", ".page2", function(){

    pagePosition = 0;
    menuSlide();
    $("#menu").hide();
    $.mobile.changePage("#page2", {transition:"slide"}); 
});
​ 
```

# jsf-2 - 如何绑定列表 JSF 中 selectManyListbox 的值

> ID：13865804
> 
> 赞同：2
> 
> 时间：2012-12-13T18:07:00.123
> 
> 标签：jsf-2, glassfish, managed-bean

**情况**：我有一个 JavaServer Faces 页面和一个会话范围的托管 bean，它有两个`ArrayList<Integer>`属性：一个用于保存可能值的列表，另一个用于保存选定值的列表。在 JSF 页面上有一个`<h:selectManyListBox>`绑定了这两个属性的组件。

**问题**：提交表单后，所选值将转换为字符串（ArrayList 类型的属性实际上包含几个字符串！）；但是，当我使用转换器时，会收到如下错误消息：

> 验证错误：值无效

**问题**：如何正确地将`ArrayList<Integer>`属性绑定到`<h:selectManyListBox>`组件？

谢谢你帮助我。

**具体代码**

JSF 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:body>
        <h:form>
            <h:selectManyListbox value="#{testBean.selection}">
                <f:selectItems value="#{testBean.list}"></f:selectItems>
            </h:selectManyListbox>
            <h:commandButton action="#{testBean.go}" value="go" />
            <ui:repeat value="#{testBean.selection}" var="i">
                #{i}: #{i.getClass()}
            </ui:repeat>
        </h:form>
    </h:body>
</html> 
```

和托管bean：

```
import java.io.Serializable;
import java.util.ArrayList;

@javax.faces.bean.ManagedBean
@javax.enterprise.context.SessionScoped
public class TestBean implements Serializable
{
    private ArrayList<Integer> selection;
    private ArrayList<Integer> list;

    public ArrayList<Integer> getList()
    {
        if(list == null || list.isEmpty())
        {
            list = new ArrayList<Integer>();
            list.add(1);
            list.add(2);
            list.add(3);
        }
        return list;
    }

    public void setList(ArrayList<Integer> list)
    {
        this.list = list;
    }

    public ArrayList<Integer> getSelection()
    {
        return selection;
    }

    public void setSelection(ArrayList<Integer> selection)
    {
        this.selection = selection;
    }

    public String go()
    {
            // This throws an exception: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer
            /*for (Integer i : selection)
            {
                System.out.println(i);
            }*/
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T18:32:45.273

的泛型类型信息`List<Integer>`在运行时丢失，因此仅看到的 JSF/EL`List`无法识别泛型类型`Integer`并假定它是默认类型（因为这是应用请求值阶段`String`底层调用的默认类型）。`HttpServletRequest#getParameter()`

您需要*明确*指定 a `Converter`，您可以使用 JSF 内置[`IntegerConverter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/IntegerConverter.html)：

```
<h:selectManyListbox ... converter="javax.faces.Integer"> 
```

*或者*只是使用`Integer[]`，它的类型信息在运行时是清楚的：

```
private Integer[] selection; 
```

# google-apps-script - ScriptDb 操作限制

> ID：13865805
> 
> 赞同：1
> 
> 时间：2012-12-13T18:07:04.393
> 
> 标签：google-apps-script

我有一个脚本可以生成大约 20,000 个小对象，其中包含大约 8 个简单属性。我的愿望是将这些对象扔进 ScriptDb 以供以后处理数据。

不过，我遇到的是，即使使用保存批处理操作，该过程所需的时间也比预期的要长得多，然后静默停止。时间过长，通常会超过 5 分钟的执行限制，但不会引发任何错误。该脚本运行时间如此之长，以至于我没有尝试检查突变结果以查看没有成功的原因，但是从执行后的检查看来，大多数都没有。

因此，尽管我很确定我的对象集合低于存储大小限制，但是否有一个鲜为人知的限制或限制访问导致我出现问题？这里的罪魁祸首是对象的数量吗，我是否应该尝试保存一个大对象，它是较小对象的集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:38:09.990

我认为这是您正在编写的数据量。我知道你可以存储 20,000 个小对象，但你不能在 5 分钟内写那么多。写1000然后退出。写下一个千，等等。运行你的函数 20 次，数据就被加载了。如果您需要更多/自动化执行此操作，请使用[ScriptApp](https://developers.google.com/apps-script/class_scriptapp#newTrigger)。

# image - 只有鼠标移动时图像才会移动，为什么？Python3+pygame

> ID：13865806
> 
> 赞同：0
> 
> 时间：2012-12-13T18:07:05.913
> 
> 标签：image, python-3.x, pygame

我有一个问题，不知道如何解释这个错误。我有一个要移动的图像，这是代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import pygame
import random

pygame.init() 
size=[800,600] 
screen=pygame.display.set_mode(size)
pygame.display.set_caption("Sub Dice")

background_position=[0,0]
background_image=pygame.image.load('Gfx/Table.png').convert()
card=pygame.image.load('Gfx/Deck1card01.png').convert_alpha()
card=pygame.transform.smoothscale(card,(130,182))
closeDeckShirt=pygame.image.load('Gfx/CardBack.png').convert_alpha()

SETFPS=30
zx=0
zy=0

done=False
clock=pygame.time.Clock()

while done==False:
    clock.tick(SETFPS)
    for event in pygame.event.get():  
        if event.type == pygame.QUIT:
            done=True

        if event.type == pygame.MOUSEBUTTONDOWN:
            print('a')

        screen.blit(background_image, background_position)
        screen.blit(card,[zx,zy])
        zx=zx+2
        zy=zy+2
        pygame.display.flip()

pygame.quit () 
```

问题是**卡片**图像仅在我单击或移动鼠标时才会移动。如果我不触摸鼠标，图像就会静止。但应每帧移动一次（1/30 秒）。

谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:16:03.973

您正在事件循环中翻转。这意味着您当前正在为每个生成的事件更新屏幕。你不想要那个。

[这是一个样板。](http://code.google.com/p/ninmonkey/source/browse/boilerplate/pygame/1.%20blank%20screen/1%20-%20basic.%20pygame%20--nocomments.py)

要点是你：

```
for event in events:
    #handle them
draw()
pygame.display.flip() 
```

# widget - 将值一分为三的用户友好方式

> ID：13865807
> 
> 赞同：1
> 
> 时间：2012-12-13T18:07:08.457
> 
> 标签：widget

显然，滑块非常适合将值分隔为 2，但如果我们需要将值分隔为 3 怎么办？有谁知道实现这一目标的用户友好方式？现在我正在使用两个相互引用（和移动）的滑块，但这不是很直观，是吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:48:08.753

我很惊讶我没有得到任何答案，因为似乎很多人在我之前就想要这个小部件。无论如何，一个有两个拇指的滑块是每个人（和我）都选择的解决方案。

# web-services - 多个请求的服务持久性

> ID：13865809
> 
> 赞同：3
> 
> 时间：2012-12-13T18:07:11.637
> 
> 标签：web-services, servicestack

我最初认为每个请求都会重新创建一个特定的“服务接口”，在我的示例中，它继承自 ServiceStack.ServiceInterface.Service。我最近发现可能并非如此，因为依赖项（和一般成员）保留了内部状态。我只是希望是否有人可以为我指出预期行为的正确方向以及它为什么会这样。我主要对两种情况感兴趣，一种用于 IIS 托管，一种用于 VS 托管/调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:42:03.847

[ServiceStack](http://www.servicestack.net/)中的服务像任何其他 IOC 依赖项一样被注册和自动装配。每个请求都会创建一个新的 Service 实例并与其依赖项自动装配。

服务是否与现有实例自动连接取决于依赖项的注册方式，例如，如果您使用[内置的 Funq IOC](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)：

默认情况下，依赖项在 Singleton 范围内注册，即每次都会注入相同的实例：

```
container.Register<IFoo>(c => new Foo());  
container.Register<IFoo>(c => new Foo()).ReusedWithin(ReuseScope.Container); 
```

您还可以指定 RequestScope 以便为每个请求创建和注入一个新实例：

```
container.Register<IFoo>(c => new Foo()).ReusedWithin(ReuseScope.Request); 
```

最后有一个临时范围，每次都会创建和注入一个新实例：

```
container.Register<IFoo>(c => new Foo()).ReusedWithin(ReuseScope.None); 
```

重新创建服务的新实例确实是根据请求创建的，但是是否获得新实例取决于依赖项的注册范围：

```
public class MyService : Service { 
    public IFoo Foo { get; set; }  // auto-wired using above registration rules
} 
```

# php - php数组对象属性

> ID：13865825
> 
> 赞同：0
> 
> 时间：2012-12-13T18:07:59.993
> 
> 标签：php, arrays, object, properties

让我用我的代码解释我的问题。这有效：

```
$multiarray = array(
    'multikey1' => '',
    'multikey2' => ''
);
$array = array(
    'key1' => '',
    'key2' => '',
    'key3' => '',
    'key4' => $multiarray 
);
print_r($array); 
```

这不起作用：

```
class Array {

    public static $multiarray = array(
        'multikey1' => '',
        'multikey2' => '',
        'multikey3' => ''
    );

    public $array = array(
        'key1' => '',
        'key2' => self::$multiarray
    );
}

$array = new Array; 
```

不幸的是，这不起作用。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:10:52.743

您无法将成员变量初始化为任何非常量，并且您正在尝试将另一个数组作为成员变量包含在内，这需要运行时执行。

另请注意，`Array`类名无效，因为它与`array`用于创建数组的保留字冲突。

从[手册](http://www.php.net/manual/en/language.oop5.properties.php)：

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

解决方法是在构造函数中设置变量：

```
class Array2 {
    public static $multiarray = array(
        'multikey1' =>  '',
        'multikey2' =>  '',
        'multikey3' =>  ''
    );

    public $array;

    function __construct() {
        $this->array = array(
            'key1'  =>  '',
            'key2'  =>  self::$multiarray
        );
    }
} 
```

# python - 摆脱 Python 启动器图标 - OS X

> ID：13865826
> 
> 赞同：2
> 
> 时间：2012-12-13T18:08:02.963
> 
> 标签：python, macos, daemon

当我在我的 Macbook Pro 上启动一个守护程序时，为了“守护”一个 python 脚本，Dock 中会弹出一个 python 启动器图标。

我想知道是否有任何方法可以禁用/删除它

这个图标： http://osx.wdfiles.com/local--files/icon:python/ [Python.png](http://osx.wdfiles.com/local--files/icon:python/Python.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:42:52.243

为了严格回答您的问题，可以通过在 Python 应用程序包装器的 Info.plist 中将 LSUIElement 设置为 YES 来删除应用程序图标。

```
sudo defaults write /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/Info "LSUIElement" -string "1" 
```

应该这样做，但它会为任何 Python 应用程序隐藏它。可以通过将 1 替换为 0 来恢复更改。

出于某种原因，我之后还不得不对 Info.plist 文件进行 chmod，不确定这只是我的配置还是什么。

# c# - 在 WHERE 中重现条件 LEFT JOIN 行为？

> ID：13865829
> 
> 赞同：0
> 
> 时间：2012-12-13T18:08:08.550
> 
> 标签：c#, sql, database, optimization, sybase

我有一个问题，现在我没有想法。

我正在为数据库应用程序做一些优化。有一种方法 (Method_A) 被调用了几百次，可以进行这种查询：

```
SELECT 
A.a,
ISNULL(A.b, 'Nothing') As alias_b
ISNULL(B.a, 'N/A') as alias_c
FROM A
LEFT JOIN B on A.fk=B.fk AND B.a = 'SOME_KEY'
WHERE A.c = 'SOME_OTHER_KEY' 
```

导致一行看起来像这样：

```
[a      ][alias_b][  alias_c  ]
[ val_a ][ val_b ][val_c|'N/A'] 
```

为了优化我的代码，我想做的是在 Method_A 之前发出一个请求，检索所有数据并使 Method_A 过滤客户端。（它是用 .NET 编码的，我用 DataSet 替换了 OleDBConnection）

我怎么能达到这种行为？因为如果我使用客户端条件进行过滤，而不是在连接不返回任何内容的情况下得到“N/A”，我只是没有得到任何行，这是一个问题，因为我仍然需要 val_a 和 val_b

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:44:05.620

你可以试试这个，基本上把B元素不匹配和有匹配的两种情况分开（并做内连接），说不定会有更清晰的执行计划：

```
(SELECT A.a,
        ISNULL(A.b, 'Nothing') As alias_b
        'N/A' as alias_c
 FROM A 
 WHERE A.c = 'SOME_OTHER_KEY' and
  not exists (select B.fk FROM B WHERE A.fk=B.fk AND B.a = 'SOME_KEY')
)
UNION ALL
(SELECT A.a
        ISNULL(A.b, 'Nothing') As alias_b
        B.a as alias_c
 FROM A, B
 WHERE A.c = 'SOME_OTHER_KEY' and 
       A.fk= B.fk and 
       B.a = 'SOME_KEY'
) 
```

请注意，您需要以下索引：

*   A(c)
*   A(fk)
*   B(fk)
*   B(fk,a)
*   A(fk,c)

# excel - 我可以在 Excel 宏中使用 if else 语句来决定根据单元格值运行哪个宏吗？

> ID：13865837
> 
> 赞同：0
> 
> 时间：2012-12-13T18:08:26.050
> 
> 标签：excel, vba, if-statement

如果单元格“DB2”等于“热”则运行 Hot_Macro 如果单元格“DB2”等于“冷”则运行 Cold_Macro 如果单元格“DB2”等于“暖”则运行 Warm_Macro 如果单元格“DB2”为空白结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:37:48.423

您调用使用 Call 语句从另一个宏运行一个宏。一个极简主义的例子：

```
 Sub main_macro()
       If Range("A1").Value = "hot" Then
           Call hot_macro
       ElseIf Range("A1").Value = "cold" Then
           Call cold_macro
       Else
           Return
       End If
   End Sub

   Sub hot_macro()
       Range("A2").Value = "It's hot!"
   End Sub

   Sub cold_macro()
       Range("A2").Value = "It's cold!"
   End Sub 
```

# linux - 如何使用在线服务恢复文件系统的快照？

> ID：13865840
> 
> 赞同：1
> 
> 时间：2012-12-13T18:08:32.910
> 
> 标签：linux, filesystems, backup, restore, snapshot

我现在在 Linux 下实现一个文件系统备份和恢复程序。要求是所有操作都必须在线进行。

我的问题是，目前，程序对要恢复的文件的状态没有感觉。因此，当恢复发生时，某些文件可能正在被其他应用程序编辑，在这种情况下，对文件的修改可能会被备份覆盖。

我能想出的一种解决方案是在恢复之前测试文件是否被其他应用程序打开，并将恢复推迟到文件关闭的时间。但是，要测试文件的打开状态，我觉得应该遍历`/proc`文件系统，即检查所有正在运行的进程，并为每个进程获取一个打开的文件列表，这很费时间。

这个问题有更好或经典的解决方案吗？任何提示将不胜感激。

感谢你并致以真诚的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:50:41.463

您可以尝试侦听文件系统更改，看看您是否对这些负责。inotify 框架可以帮助您完成此类任务。inotify 是一个用户态 api。见维基百科... [http://en.wikipedia.org/wiki/Inotify](http://en.wikipedia.org/wiki/Inotify)

# c++ - 函数内的静态 constexpr 变量是否有意义？

> ID：13865842
> 
> 赞同：245
> 
> 时间：2012-12-13T18:08:39.893
> 
> 标签：c++, static, c++11, constexpr

`static`如果我在函数中有一个变量（例如，一个大数组），那么同时声明它是否有意义`constexpr`？`constexpr`保证数组是在编译时创建的，所以`static`没用吗？

```
void f() {
    static constexpr int x [] = {
        // a few thousand elements
    };
    // do something with the array
} 
```

`static`实际上在生成的代码或语义方面做了什么吗？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-12-13T20:12:15.600

简短的回答是，它不仅`static`有用，而且总是很受欢迎。

首先，请注意`static`和`constexpr`是完全相互独立的。`static`定义对象在执行期间的生命周期；`constexpr`指定对象在编译期间应该可用。编译和执行在时间和空间上都是不相交和不连续的。所以一旦程序编译完成，`constexpr`就不再相关了。

每个声明的变量`constexpr`都是隐式的，`const`但几乎是正交的（除了与整数的交互。）`const``static``static const`

对象模型（第`C++`1.9 节）要求除位域之外的所有对象都至少占用一个字节的内存并具有地址；此外，在给定时刻在程序中可观察到的所有此类对象都必须具有不同的地址（第 6 段）。这并不完全要求编译器在每次调用具有本地非静态 const 数组的函数时在堆栈上创建一个新数组，因为编译器可以在`as-if`原则上寻求庇护，只要它可以证明没有其他这样的对象可以观察到的。

不幸的是，这并不容易证明，除非该函数是微不足道的（例如，它不调用其主体在翻译单元中不可见的任何其他函数），因为根据定义，数组或多或少是地址。因此，在大多数情况下，每次调用时都必须在堆栈上重新创建非静态`const(expr)`数组，这违背了能够在编译时计算它的意义。

另一方面，本地`static const`对象由所有观察者共享，而且即使定义它的函数从未被调用，它也可能被初始化。所以以上都不适用，编译器不仅可以免费生成它的单个实例；在只读存储中生成它的单个实例是免费的。

所以你绝对应该`static constexpr`在你的例子中使用。

但是，在一种情况下您不想使用`static constexpr`. 除非`constexpr`声明的对象是[ODR-used](https://en.cppreference.com/w/cpp/language/definition#ODR-use)或 declared `static`，否则编译器可以完全不包含它。这非常有用，因为它允许使用编译时临时`constexpr`数组，而不会用不必要的字节污染已编译的程序。在这种情况下，您显然不想使用`static`，因为`static`可能会强制对象在运行时存在。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-10-10T18:23:32.760

除了给出的答案，值得注意的是编译器不需要在编译时初始化变量，知道和`constexpr`之间的区别在于使用你确保变量只初始化一次。`constexpr``static constexpr``static constexpr`

以下代码演示了如何`constexpr`多次初始化变量（尽管具有相同的值），而`static constexpr`肯定只初始化一次。

此外，代码比较了`constexpr`反对`const`与结合的优势`static`。

```
#include <iostream>
#include <string>
#include <cassert>
#include <sstream>

const short const_short = 0;
constexpr short constexpr_short = 0;

// print only last 3 address value numbers
const short addr_offset = 3;

// This function will print name, value and address for given parameter
void print_properties(std::string ref_name, const short* param, short offset)
{
    // determine initial size of strings
    std::string title = "value \\ address of ";
    const size_t ref_size = ref_name.size();
    const size_t title_size = title.size();
    assert(title_size > ref_size);

    // create title (resize)
    title.append(ref_name);
    title.append(" is ");
    title.append(title_size - ref_size, ' ');

    // extract last 'offset' values from address
    std::stringstream addr;
    addr << param;
    const std::string addr_str = addr.str();
    const size_t addr_size = addr_str.size();
    assert(addr_size - offset > 0);

    // print title / ref value / address at offset
    std::cout << title << *param << " " << addr_str.substr(addr_size - offset) << std::endl;
}

// here we test initialization of const variable (runtime)
void const_value(const short counter)
{
    static short temp = const_short;
    const short const_var = ++temp;
    print_properties("const", &const_var, addr_offset);

    if (counter)
        const_value(counter - 1);
}

// here we test initialization of static variable (runtime)
void static_value(const short counter)
{
    static short temp = const_short;
    static short static_var = ++temp;
    print_properties("static", &static_var, addr_offset);

    if (counter)
        static_value(counter - 1);
}

// here we test initialization of static const variable (runtime)
void static_const_value(const short counter)
{
    static short temp = const_short;
    static const short static_var = ++temp;
    print_properties("static const", &static_var, addr_offset);

    if (counter)
        static_const_value(counter - 1);
}

// here we test initialization of constexpr variable (compile time)
void constexpr_value(const short counter)
{
    constexpr short constexpr_var = constexpr_short;
    print_properties("constexpr", &constexpr_var, addr_offset);

    if (counter)
        constexpr_value(counter - 1);
}

// here we test initialization of static constexpr variable (compile time)
void static_constexpr_value(const short counter)
{
    static constexpr short static_constexpr_var = constexpr_short;
    print_properties("static constexpr", &static_constexpr_var, addr_offset);

    if (counter)
        static_constexpr_value(counter - 1);
}

// final test call this method from main()
void test_static_const()
{
    constexpr short counter = 2;

    const_value(counter);
    std::cout << std::endl;

    static_value(counter);
    std::cout << std::endl;

    static_const_value(counter);
    std::cout << std::endl;

    constexpr_value(counter);
    std::cout << std::endl;

    static_constexpr_value(counter);
    std::cout << std::endl;
} 
```

**可能的程序输出：**

```
value \ address of const is               1 564
value \ address of const is               2 3D4
value \ address of const is               3 244

value \ address of static is              1 C58
value \ address of static is              1 C58
value \ address of static is              1 C58

value \ address of static const is        1 C64
value \ address of static const is        1 C64
value \ address of static const is        1 C64

value \ address of constexpr is           0 564
value \ address of constexpr is           0 3D4
value \ address of constexpr is           0 244

value \ address of static constexpr is    0 EA0
value \ address of static constexpr is    0 EA0
value \ address of static constexpr is    0 EA0 
```

如您所见，您自己`constexpr`被多次初始化（地址不一样），而`static`关键字确保只执行一次初始化。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2021-03-06T18:14:13.237

不制作大型数组`static`，即使它们`constexpr`会对性能产生巨大影响，并可能导致许多错过的优化。它可能会使您的代码减慢几个数量级。您的变量仍然是本地的，编译器可能决定在运行时初始化它们，而不是将它们作为数据存储在可执行文件中。

考虑以下示例：

```
template <int N>
void foo();

void bar(int n)
{
    // array of four function pointers to void(void)
    constexpr void(*table[])(void) {
        &foo<0>,
        &foo<1>,
        &foo<2>,
        &foo<3>
    };
    // look up function pointer and call it
    table[n]();
} 
```

您可能希望`gcc-10 -O3`将 a 编译`bar()`为`jmp`它从表中获取的地址，但事实并非如此：

```
bar(int):
        mov     eax, OFFSET FLAT:_Z3fooILi0EEvv
        movsx   rdi, edi
        movq    xmm0, rax
        mov     eax, OFFSET FLAT:_Z3fooILi2EEvv
        movhps  xmm0, QWORD PTR .LC0[rip]
        movaps  XMMWORD PTR [rsp-40], xmm0
        movq    xmm0, rax
        movhps  xmm0, QWORD PTR .LC1[rip]
        movaps  XMMWORD PTR [rsp-24], xmm0
        jmp     [QWORD PTR [rsp-40+rdi*8]]
.LC0:
        .quad   void foo<1>()
.LC1:
        .quad   void foo<3>() 
```

这是因为 GCC 决定不存储`table`在可执行文件的数据部分，而是在每次函数运行时使用其内容初始化一个局部变量。事实上，如果我们去掉`constexpr`这里，编译后的二进制文件是 100% 相同的。

这很容易比以下代码慢 10 倍：

```
template <int N>
void foo();

void bar(int n)
{
    static constexpr void(*table[])(void) {
        &foo<0>,
        &foo<1>,
        &foo<2>,
        &foo<3>
    };
    table[n]();
} 
```

我们唯一的改变是我们已经做出了改变`table` `static`，但影响是巨大的：

```
bar(int):
        movsx   rdi, edi
        jmp     [QWORD PTR bar(int)::table[0+rdi*8]]
bar(int)::table:
        .quad   void foo<0>()
        .quad   void foo<1>()
        .quad   void foo<2>()
        .quad   void foo<3>() 
```

总之，永远不要让您的查找表成为局部变量，即使它们是`constexpr`. Clang 实际上很好地优化了此类查找表，但其他编译器却没有。[请参阅编译器资源管理器以获取实时示例](https://godbolt.org/z/Mnrb96)。

# sql - 将具有多级连接的 sql 转换为 rails activerecord 表达式

> ID：13865843
> 
> 赞同：0
> 
> 时间：2012-12-13T18:08:42.617
> 
> 标签：sql, ruby-on-rails, activerecord

```
'SELECT "complaints".* FROM "complaints" INNER JOIN "machines" ON "machines"."id" = "complaints"."machine_id" INNER JOIN "mclns" ON "machines"."mcln_id" = "mclns"."id" ORDER BY "mclns"."response_time" ASC' 
```

我需要将上面的 sql 转换为 Active Record 语句

`complaint`模型不知道`mcln` 它必须通过`machine`

`Complaint.joins(:machine=>:mcln)`给

```
SELECT "complaints".* FROM "complaints" INNER JOIN "machines" ON "machines"."id" = "complaints"."machine_id" INNER JOIN "mclns" ON "mclns"."machine_id" = "machines"."id" 
```

但是我需要

```
SELECT "complaints".* FROM "complaints" INNER JOIN "machines" ON "machines"."id" = "complaints"."machine_id" INNER JOIN "mclns" ON "machines"."mcln_id" = "mclns"."id" 
```

更新：

一台机器可以有一个 mcln，许多机器也可以有相同的 mcln。

我已经通过使用实现了它

`has_one :mcln`在`Machine`模型 `belongs_to :machine`和`Mcln`

而且我不确定这是否是正确的实施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:42:27.377

您的关联不正确。如果许多机器可以有相同的 mcln，那么机器表应该有一个 mcln_id 列，你的类应该看起来像

```
class Machine < AR::Base
  belongs_to :mcln
end

class Mcln < AR::Base
  has_many :machines
end 
```

然后`Complaint.joins(:machine => :mcln)`应该生成你想要的SQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:12:49.140

试试这个：

```
SELECT complaints.*,machines.*,mclns.* FROM `complaints` 
INNER JOIN `machines` 
ON ( machines.id = complaints.machine_id )
INNER JOIN `mclns`
( ON machines.mcln_id = mclns.id ) 
```

# mysql - 通用提供者和mysql的使用

> ID：13865849
> 
> 赞同：1
> 
> 时间：2012-12-13T18:09:17.717
> 
> 标签：mysql, asp.net-mvc, asp.net-membership

我创建了一个 asp.net mvc 4 应用程序，并添加了通用提供程序，因为我需要创建一个从我的 sql 数据库读取用户数据的自定义成员资格提供程序。

当我在开发人员工作站上工作时，一切正常，但是当我在没有安装 Sql Server 的服务器上部署时，我收到一个错误。试图打开 DefaultConnection。

在从向导创建的**InitializeSimpleMembershipAttribute**中，我有这个： **WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: false);** 此调用初始化数据库连接，什么都不做，并且不被自定义成员资格提供程序使用，但必须在启动时完成。连接字符串是：

*add name="DefaultConnection" connectionString="Data Source=...;Initial Catalog=...;User id=...;Password=..." providerName="System.Data.SqlClient" />*

问题是我不知道如何配置使用 mysql 数据库并在应用程序启动时传递此控制。

如果我必须将它安装在安装了 Sql server 的服务器中，我会正确配置它，并且在初始调用后 mysql 成员资格提供程序可以正常工作，但是当我无法使用此解决方法时会遇到问题，并且在调用时引发异常初始化数据库连接。

我该如何解决这个问题？

# c++ - 如何在 STL 容器中存储模板化的异构对象

> ID：13865853
> 
> 赞同：2
> 
> 时间：2012-12-13T18:09:28.933
> 
> 标签：c++, templates, visual-c++, generics, stl

问题是关于在 MS Visual C++ 11 中开发的代码，只能访问 STL，没有 Boost。

有一个包装模板类，大致有这个头：

```
template <typename Payload>
class Wrapper {
  Payload p;
  std::string src;
  Wrapper( std::string, Payload );

  Payload get();      // returns payload
  void set(Payload);  // replaces payload
  void operator ()(); // uses payload
} 
```

`Payload`可以是任何东西——指针、整数，甚至是重对象。

后来，`Wrapper`s 需要放到一个容器中，比如`std::vector`--但不管它们的具体参数类型。这给我带来了麻烦，因为容器需要同质元素。

我已经[从 KennyTM](https://stackoverflow.com/a/13065363/836097)尝试过这样的基类建议，但是它给了我一些方法问题，`get()`并且`set()`- 当从向量中使用时需要强制转换（？），因为如果在该答案建议的模式中使用元素看起来像基类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T18:14:08.200

为此，您将需要使用某种类型的擦除。从最基本的（提供基类型，通过指向基的指针存储元素）到更高级的解决方案，如 boost::any 你可以选择（我知道你没有提到任何提升，但你总是可以看看实现） . 或者，如果有效载荷集已知且相对较小，则可以使用*变体*方法（类似于 boost::variant），但这可能难以实现单次使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T18:36:53.790

```
template<typename Payload>
struct Wrapper;

struct WrapperBase {
  std::string src;
  WrapperBase( std::string s ):src(s) {}
  template<typename Payload>
  Payload get() const;
  template<typename Payload>
  void set(Payload);
  virtual void operator ()() = 0; // uses payload
};

template <typename Payload>
struct Wrapper {
  Payload payload;
  Wrapper( std::string s, Payload p ):WrapperBase(s),payload(p) {}

  Payload get() const { return payload; };      // returns payload
  void set(Payload p) { payload = p; };  // replaces payload
  virtual void operator()() override; // todo
}

template<typename Payload>
Payload WrapperBase::get() const {
  Assert(dynamic_cast<Wrapper<Payload> const*>(this));
  return static_cast<Wrapper<Payload> const*>(this)->get();
}
template<typename Payload>
void WrapperBase::set(Payload p) {
  Assert(dynamic_cast<Wrapper<Payload>*>(this));
  static_cast<Wrapper<Payload>*>(this)->set(p);
} 
```

a 的用户`WrapperBase`，如果他们想设置/获取有效负载，需要知道有效负载的类型是什么。如果您不知道，您可以使用`dynamic_cast<Wrapper<Payload>*>`它来确定给定的是否是特定种类。`WrapperBase`

这没有值语义，因此您需要存储一个`vector`智能指针`WrapperBase`而不是实际实例。 `std::shared_ptr`或者`std::unique_ptr`是行为非常不同的优秀候选人。

如果存在 的有限有界集`Payloads`，则访问者模式可以工作。

如果您需要值语义，`pImpl`存储实际有效负载的模式可以使用手动`operator=`克隆`pImpl`.

可以询问“您是否持有类型`T`”，但通常类似于`dynamic_cast`.

# magento - Magento 在添加新网站后崩溃

> ID：13865866
> 
> 赞同：0
> 
> 时间：2012-12-13T18:10:49.187
> 
> 标签：magento

我已经有一个 Magento 站点正在运行，并试图从这个安装中创建一个新网站。我添加了一个代号“tb_new”并点击保存。我的直播网站崩溃了。可能是万磁王不喜欢带有 _ 的新代号。

更新：在检查错误日志时，问题似乎是因为 Magento 的初始安装在我的服务器上的特定用户下，而实时站点在不同的用户下运行。这是错误：

> a:4:{i:0;s:96:"SQLSTATE[28000] [1045] 用户'tomharris'@'64.111.114.232'的访问被拒绝>（使用密码：YES）";i:1;s:2672 :"#0 >/home/anotheruser/domainname.com/lib/Zend/Db/Adapter/Pdo/Mysql.php(96): >Zend_Db_Adapter_Pdo_Abstract->_connect()

如何最好地让我的网站快速运行？

# node.js - nodejs dgram udp 套接字有限制吗？

> ID：13865871
> 
> 赞同：0
> 
> 时间：2012-12-13T18:11:04.813
> 
> 标签：node.js, udp, datagram

我正在尝试做的是使用 nodejs 通过 UDP 摄取大量日志。我最终编写了一些不错的代码来处理所有这些。但是，我在测试时似乎丢失了很多通过 UDP 发送的消息。

下面的简单代码将说明我的问题：

```
var dgram = require("dgram")
, udp = dgram.createSocket('udp4')
, connections = 0

udp.on('message', function(msg){
  connections++
})

setInterval(function(){
  console.log(connections + ' msg per sec incoming') 
  connections = 0
},1000);

udp.bind(514) 
```

我在这里所做的只是创建套接字并绑定到 514。我使用 loggen（Linux 上的日志生成工具）每秒发送 5k 日志，我的控制台如下所示：

```
2404 msg per sec incoming
2409 msg per sec incoming
2001 msg per sec incoming
2409 msg per sec incoming
2696 msg per sec incoming
2650 msg per sec incoming 
```

但是，然后我将 loggen 每秒发送的日志增加到 70k，我的控制台如下所示：

```
30738 msg per sec incoming
32284 msg per sec incoming
35104 msg per sec incoming
34998 msg per sec incoming
34441 msg per sec incoming
33890 msg per sec incoming 
```

老实说，我试图弄清楚这是 nodejs 限制还是 UDP 限制或 NIC 限制，但实际上它似乎不是其中的任何一个。如果 Node 可以在某一时刻每秒接收 30k+ 条消息（尽管它丢失了超过 50%），为什么它不能接收到之前发送的 5k 条消息的 100%？无论发送多少消息，它似乎都丢失了超过 50% 的消息。

有人对这里可能发生的事情有任何建议吗？显然这是一个非常简单的示例，但我在完整代码中看到了相同的问题，因此原则应该是相同的。

# java - 是否有 API 可以用另一个列表替换列表中的一系列值？

> ID：13865872
> 
> 赞同：1
> 
> 时间：2012-12-13T18:11:05.287
> 
> 标签：java, list, collections

我有一个当前列表，我希望通过用另一个列表替换一系列元素来更新它，例如：

当前列表：

```
a, b, c, d, e, f, g 
```

新列表：

```
x, y, z 
```

我想做类似于以下的事情：

```
CurrentList.setAll(5, NewList) 
```

哪个应该将 转换`CurrentList`为具有以下值：

```
a, b, c, d, e, x, y, z 
```

所以它用一个额外的新元素替换了`f, g`元素。`x, y``added``CurrentList``z`

编辑：这并不总是在列表的末尾。它不仅与字符串有关。这是关于具有任何类型元素的列表。这需要适用于列表的任何部分。例如我可能需要更换`b, c, d`. 我只是有起始索引，然后我必须向前替换元素，如果列表空间不足，则`add`列出而不是替换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:14:43.167

如果您有一组字母，最好使用 StringBuilder

```
StringBuilder sb = new StringBuilder("abcdefg");
sb.replace(5, sb.length(), "xyz"); 
```

如果你有一个元素列表，你可以做

```
List<String> list = ...
List<String> subList = list.subList(5, list.size());
subList.clear();
subList.addAll(Arrays.asList("x", "y", "z")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:29:18.777

你正在寻找的是这个：

```
List<?> list = ...  // original list
List<?> toReplace = list.subList(startingIndex, endIndex);
toReplace.clear(); // clears the subList
List<?> replacement = ... // list of new elements
toReplace.addAll(replacement); // inserts the new elements in the original list, through the sublist 
```

您也可以一一添加新元素。支持列表将根据需要增加大小。

# openstack - 更改 OpenStack Horizo n 的登录页面

> ID：13865873
> 
> 赞同：0
> 
> 时间：2012-12-13T18:11:13.213
> 
> 标签：openstack

我需要更改 OpenStack 登录页面的行为。我正在研究另一种对用户进行身份验证的方法。我不再使用名称和密码。它在命令行上工作，但我也必须在图形部分（水平）中使用它。我应该更改单击登录按钮时执行的操作，但我找不到该操作的实现在哪里：Horizo​​n 调用哪个函数来验证用户？我的目标是调用我的新 keystone 函数来获取令牌，但我找不到 Horizo​​n 的哪个函数调用 keystone。

[更新问题]

*../horizo​​n/views/auth_forms.py* 定义了登录页面的定义方式。它的类在哪里`Login`被调用？我需要修改启动登录页面创建的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:56:07.013

Horizo​​n 为 keystone 交互实例化了整个类集。

结帐地平线/openstack_dashboard/api/keystone.py

它主要使用 python-keystoneclient api 集。

您可能还想查看[http://docs.openstack.org/developer/horizo​​n /topics/customizing.html](http://docs.openstack.org/developer/horizon/topics/customizing.html)

# ruby - Ruby 线程不够好？

> ID：13865878
> 
> 赞同：1
> 
> 时间：2012-12-13T18:11:33.790
> 
> 标签：ruby, multithreading, jruby

JRuby 对多线程的支持比普通 Ruby 的支持好多少？普通旧 Ruby 中的线程有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:27:19.257

“普通”ruby（或 mri）有一个很大的锁，可以防止多个线程一次运行 ruby​​ 代码（称为 GIL 或 GVL）。

Rubinius 和 jruby 没有这个锁。在 ruby​​ 1.8.x 中，线程也是绿色线程，但是从 ruby​​ 1.9 开始，ruby 线程被映射到本地线程。不过，GVL 会阻止您获得很多好处。

本机扩展可以在锁之外运行代码，例如，多个 MySQL 查询可以从不同的线程同时运行，但是当它们不持有锁时它们不能调用常规的 ruby​​ api

# javascript - 如何在链接单击时播放 mp3

> ID：13865882
> 
> 赞同：7
> 
> 时间：2012-12-13T18:11:41.483
> 
> 标签：javascript, jquery, html

有一个简单的链接

```
<a href="some.mp3">01\. The Name of Track</a> 
```

当用户点击链接时，如何播放 mp3 文件？请帮我找到一些简单有效的解决方案。谢谢你。

* * *

谢谢你的帮助。

我选择了这个解决方案[http://www.schillmania.com/projects/soundmanager2/demo/play-mp3-links/](http://www.schillmania.com/projects/soundmanager2/demo/play-mp3-links/)最适合我的情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T18:14:32.100

使用 HTML5`<audio>`

```
<audio controls id="linkAudio">
  <source src="demo.ogg" type="audio/ogg">
  <source src="demo.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio>

<script>
  document.getElementById("link_id").addEventListener("click", function () {
    document.getElementById("linkAudio").play();
  });
</script> 
```

> 注意：由于音频是 HTML5 标签，它不支持旧浏览器，所以在使用前请务必确认。

或者看看这篇[文章](http://webdesign.about.com/od/sound/a/play_sound_oncl.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T18:30:28.080

由于 IP 限制，当今的许多浏览器（如 Chrome 和 Firefox）将无法播放 MP3 或 MP4 文件。您可以将文件转码为兼容的替代品，例如 Ogg，或者您必须依靠插件来获得通用浏览器支持。一个非常好的选择是[Soundmanager](http://www.schillmania.com/projects/soundmanager2/doc/getstarted/)，我在一个不能选择转码的项目中使用它。它会尽可能使用 HTML 5 播放，但如果所选浏览器不支持文件类型，则会退回到不可见的 Flash 电影。它非常灵活，但它有一点学习曲线。不过，这些演示非常棒，并提供了几种类型的播放器，您可能只需将它们放入任何界面即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:23:13.110

```
<a href="#">Play Audio</a>
<audio>
  <source src="demo.ogg" type="audio/ogg">
  <source src="demo.mp3" type="audio/mpeg">
  Your browser doesn't support the audio element.
</audio> 
```

使用 jQuery：

```
$("a").click(function() {
  $("audio").play();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T18:26:54.937

你有几个选择，你可以使用 html5 音频标签，它会创建一个小播放器，让你播放音频：

```
<audio controls width="100" height="100">
    <source src="some.mp3" type="audio/mp3">
    <!-- Fallback for older browsers -->
    Your browser doesn't support html5 audio
</audio> 
```

您还可以使用 embed html 标签：

```
<embed src="some.mp3" autostart="false" id="somemp3" enablejavascript="yes"> 
```

然后在单击链接时运行以下 javascript：

```
var snd = document.getElementById(somemp3);
snd.play(); 
```

`audio`或者您可以通过将上述代码放在音频标签中，对不支持 html5 的浏览器使用 embed 方法，并且仅当浏览器无法识别该`audio`标签时才会显示

您也可以使用 Flash 音频播放器。

# javascript - 使用 jQuery 的 .innerHTML 属性插入输入框

> ID：13865883
> 
> 赞同：2
> 
> 时间：2012-12-13T18:11:49.403
> 
> 标签：javascript, jquery

我是第一次使用 jQuery。我一直在寻找很多，但没有得到答案。

我想在 id="star" 和 value="score Star" 处插入一个输入类型，但我不能这样做。分数返回数值。我认为问题出在 value 属性中，但我不知道在哪里。提前致谢。

这是代码：

```
<script type="text/javascript">
            $(function() {
                $('#click').raty({
                    click: function(score) {
                        document.getElementById('star').innerHTML="<input type='text' name='type' value='"score+ "' Star >";
                        //alert( 'score: ' + score);

                        }
                    });
                });
</script>

          <label>Deal Type:</label>
         <div id="click"></div><span  id="star"></span></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:13:39.047

您没有连接字符串，也没有正确引用值

```
.innerHTML="<input type='text' name='type' value='"score+ "' Star >"; 
```

应该

```
.innerHTML="<input type='text' name='type' value='" + score + " Star' >"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:15:57.267

您没有正确编写代码

```
.innerHTML="<input type='text' name='type' value='"score+ "' Star >"; 
```

它应该是

```
.innerHTML="<input type='text' name='type' value='"+score+" Star' >"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T18:16:15.940

```
<script type="text/javascript">
            $(function() {
                $('#click').raty({
                    click: function(score) {
                        document.getElementById('star').innerHTML="<input type='text' name='type' value='"+score+ " Star'>";
                        //alert( 'score: ' + score);

                        }
                    });
                });
</script>

          <label>Deal Type:</label>
         <div id="click"></div><span  id="star"></span></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T18:17:07.490

更好的方法是实际创建一个输入 DOM 对象并附加它：

```
$('#star').append($('<input/>').attr({
    type: "text",
    name: "type",
    value: score + " Star"
})); 
```

# ios - EXC_BREAKPOINT 在测试目标中使用 UITableViewCell 的 textLabel 文本

> ID：13865885
> 
> 赞同：0
> 
> 时间：2012-12-13T18:11:54.820
> 
> 标签：ios, uitableview, tdd, ocunit, sentestingkit

我有一个测试目标，我正在测试表格视图数据源。我想测试`textLabel`返回的单元格是否`tableView:cellForRowAtIndexPath:`包含我期望的文本，但是当我设置 textLabel 的文本时，我得到一个 EXC_BREAKPOINT 异常......

这是否与并非 UIKit 中的所有类都可以在测试目标中使用的事实有关（不确定这是否是真的）？

我是否缺少测试目标中的任何特殊设置？

想说明我的代码在静态库中。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:47:31.267

我在[这里](http://paulsolt.com/2012/12/unit-testing-static-libraries-with-kiwi-for-ios-development/)建立了解决方案。基本上，您必须添加一个带有自己的单元测试目标的 iPhone 应用程序目标，并在那里进行所有与 UIKit 相关的测试。

# asp.net - 当用户单击电子邮件中的链接时，有没有办法运行子程序？

> ID：13865886
> 
> 赞同：-1
> 
> 时间：2012-12-13T18:12:09.420
> 
> 标签：asp.net, vb.net

当我的应用程序中添加了新的“联系人”时，我的程序当前会发送一封电子邮件。此电子邮件包含一个链接，该链接具有 ContactID 并将链接到一个页面 (Contacts.aspx)。此 Contacts.aspx 有一个 Gridview，其中包含各种联系人记录。Whenever a specific record is selected, it provides more information on that contact through a subroutine called `LoadContact(int ContactID)`. 它通过显示带有各种 asp.net 控件（如标签和复选框）的面板来提供更多信息。我的问题是这样的：

是否可以进行设置，以便当用户单击电子邮件中的链接时，它会将他们直接带到 Contacts.aspx 页面并自动加载有关该特定联系人的更多信息，而不必单击具有该联系人ID的特定记录?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:15:23.290

您可以向链接添加参数

```
Contacts.aspx?myparameter=foo 
```

然后在您的代码隐藏文件中的页面加载事件中访问它

```
Request.QueryString("myparameter") 
```

有了这些信息，您可以在 Gridview 中选择特定的数据

# wordpress - 与 blogger.com 自动同步 wordpress 帖子

> ID：13865899
> 
> 赞同：-1
> 
> 时间：2012-12-13T18:13:19.153
> 
> 标签：wordpress, seo, blogger, blogspot

我想将我的 wordpress 博客文章与 blogspot.com 博客同步。至少帖子标题和 wordpress 帖子链接应该显示在我的博客上。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:19:30.767

您可以使用[ifttt.com](http://ifttt.com)服务。

您可以触发“**当我的 wp 博客上有新帖子时**”并设置操作“**在博客上创建帖子**”

这个食谱可以做到：[https ://ifttt.com/recipes/31738](https://ifttt.com/recipes/31738)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T05:46:50.353

考虑到谷歌最近推出的名为（熊猫和企鹅）的算法更新，我永远不会在不同的博客上保留相同的内容副本。这只是浪费时间，也可能会损害您的网站。

最好发布独特的文章，因为质量比数量更重要！

# c# - 将空数据行插入网格

> ID：13865900
> 
> 赞同：-1
> 
> 时间：2012-12-13T18:13:33.570
> 
> 标签：c#, asp.net

我正在尝试创建一个网格视图，用户可以在其中插入行。我试图在网格中有 10 个空行，所有列都为空。是否可以？

用户只需要输入文本框，所以我必须将所有 10 行保存到数据库中！这是使用 c# asp.net ..

```
<asp:TemplateField ItemStyle-Width="50">
     <ItemTemplate>
         <asp:TextBox ID="txtSpots" runat="server" Text='<%#Eval("Spots")%>' Width="45px">           </asp:TextBox>                           
      </ItemTemplate>
  </asp:TemplateField>
  <asp:TemplateField ItemStyle-Width="180">
      <ItemTemplate>
         <asp:TextBox ID="txtCompanyName" runat="server" Text='<%#Eval("CompanyName")%>'></asp:TextBox>
         </ItemTemplate>
   </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:25:55.283

```
DataTable dt = new DataTable();
dt.Columns.Add("Spots");
dt.Columns.Add("CompanyName");

int i = 0;
while(i<10)
{
   DataRow dr = dt.NewRow();
   dr["Spots"] = "";
   dr["CompanyName"] = "";

   dt.Rows.Add(dr);
   i++;
}

MyGrid.DataSource = dt;
MyGrid.DataBound(); 
```

# javascript - 从 html 文档调用函数不会生成警报

> ID：13865901
> 
> 赞同：1
> 
> 时间：2012-12-13T18:13:33.943
> 
> 标签：javascript, html

大家好，感谢您的关注。

当我单击更新按钮时，我试图调用一个 javascript 函数。

这是javascript

```
var text2Array = function() {
// takes the value from the text area and loads it to the array variable.

alert("test");

} 
```

和html

```
<button id="update" onclick="text2Array()">Update</button> 
```

如果您想查看所有代码，请查看此 jsfiddle [http://jsfiddle.net/runningman24/wAPNU/24/](http://jsfiddle.net/runningman24/wAPNU/24/)

我试图使函数全局化，但运气不好，我可以从 html 获取警报，但由于某种原因它不会调用函数？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:19:38.397

`pswdBld`您在 JavaScript中声明函数时出错。

```
...
var pswdBld() = function() {
        ---^^---
... 
```

这会导致语法错误并避免加载 JavaScript 文件。

[请参阅更正版本。](http://jsfiddle.net/mC6v8/)

* * *

此外，您可以考虑绑定事件而不是内联它。

```
<button id="update">Update</button> 
```

```
var on = function(e, types, fn) {
  if (e.addEventListener) {
    e.addEventListener(types, fn, false);
  } else {
    e.attachEvent('on' + types, fn);
  }
};

on(document.getElementById("update"), "click", text2Array);​ 
```

[现场观看。](http://jsfiddle.net/n9T3B/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T18:19:21.630

在您的小提琴中，在左上角的下拉菜单中，将“onLoad”更改为“no wrap（head）”然后更改

```
var text2Array = function()
var pswdBld() = function() 
```

至

```
function text2Array()
function pswdBld() 
```

它会按预期发出警报。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T18:19:28.663

您在下面的行中有**语法错误**..

```
var pswdBld() = function
           ^---  Remove this 
```

应该是

```
var pswdBld = function 
```

还要确保您**在正文标记的末尾**调用此脚本..

因为你正在使用`Function Expressions`而不是`Function Declaration`

```
var pwsdBld = function()    // Function Expression

function pwsdBld()         // Function Declaration 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/wAPNU/26/)**

# amazon-web-services - 通过亚马逊 MWS 创建关系源

> ID：13865904
> 
> 赞同：1
> 
> 时间：2012-12-13T18:13:41.833
> 
> 标签：amazon-web-services, amazon

我的一位客户希望我在亚马逊上上传和维护产品的变体。我被困在创建关系（变化）提要中。我已经用谷歌搜索了好几个小时，但没有运气。

我可以通过 MWS 轻松生成和上传简单的产品、库存、图像和价格信息，但我对变体信息的概念并不清晰。

为简化起见，我的客户有一个产品名为“ABC”，有两种不同的颜色（黑色、红色）。ABC 尚未在亚马逊上注册。客户拥有该产品的 EAN 以在亚马逊上列出并显示两种不同的变体。

现在，如果有任何机构可以帮助我了解如何制作提要以反映变化。

请用实际的代码示例进行解释。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T08:15:22.510

您可以使用以下 XML 来创建关系。使用“_POST_PRODUCT_RELATIONSHIP_DATA_”作为提要类型

```
<?xml version="1.0" encoding="utf-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
<Header>
<DocumentVersion>1.01</DocumentVersion>
<MerchantIdentifier>xxxxxxxxxxxxxxx</MerchantIdentifier>
</Header>
<MessageType>Relationship</MessageType>
<Message>
<MessageID>1</MessageID>
<OperationType>Update</OperationType>
<Relationship>
    <ParentSKU>skt_parent1234</ParentSKU>
    <Relation>
       <SKU>skt_white123</SKU>
       <Type>Variation</Type>
    </Relation>
    <Relation>
        <SKU>skt_orange1234</SKU>
        <Type>Variation</Type>
    </Relation>
</Relationship>
</Message>
</AmazonEnvelope> 
```

# python - 使用 tkinter GUI 显示最新的输入信号

> ID：13865907
> 
> 赞同：4
> 
> 时间：2012-12-13T18:13:52.537
> 
> 标签：python, user-interface, tkinter, gpio

蟒蛇2.7

我正在使用树莓派来监控一些数字输入信号作为一个爱好项目。我想要一个大显示屏来显示累积值并使用全局变量更新它们，这些变量将跟踪输入信号。我现在要在面包板上使用按钮，所以我尝试使用一个保持变量来防止计数器在每个周期递增。我对 Python 很陌生，因为我确信这很明显，所以请尽可能保持简单。我正在调用一个输入`PE_MATTRESSES`，另一个`PE_COMBINED`，另一个`RESET`，我想显示`PE_MATTRESSES`从中减去的第三个值`PE_COMBINED`。当然`RESET`会把一切归零..

我的伪代码虽然过程是：

*   建立 I/O 和全局变量
*   创建图形用户界面
*   while 1
    -- 查看 I/O
    -- 更新全局变量
    -- 更新标签以显示它们
    -- 循环

我的代码如下：

```
import Tkinter as tk
import tkFont
import time
import RPi.GPIO as GPIO

GPIO.setmode(GPIO.BCM)
GPIO.setup(17, GPIO.IN, pull_up_down=GPIO.PUD_UP)
GPIO.setup(21, GPIO.IN, pull_up_down=GPIO.PUD_UP)
GPIO.setup(22, GPIO.IN, pull_up_down=GPIO.PUD_UP)

PE_MATTRESS = GPIO.input(17)
PE_MATTRESS_LATCH = 0
PE_MATTRESS_ACCUMULATOR = 0
PE_COMBINED = GPIO.input(21)
PE_COMBINED_LATCH = 0
PE_COMBINED_ACCUMULATOR = 0
BOXSPRING_ACCUMULATOR = 0
BOXSPRING_ACCUMULATOR = PE_COMBINED_ACCUMULATOR - PE_MATTRESS_ACCUMULATOR 
RESET = GPIO.input(22)

class App:
    def __init__(self):
        root=tk.Tk()
        # create a custom font
        self.customFont = tkFont.Font(family="Helvetica", size=117)

        # create widgets 

        label1 = tk.Label(root, text="MATTRESSES: %s" % PE_MATTRESS_ACCUMULATOR , font=self.customFont)
        label1.pack()

        spacer1 = tk.Label(root, text="", font=self.customFont)
        spacer1.pack()

        Quit = tk.Button(root, text="QUIT", command=quit)
        Increment = tk.Button(root, text="Test", command=Inc)
        Quit.pack()
        Increment.pack()

        label2 = tk.Label(root, text="BOXSPRINGS: %s" % BOXSPRING_ACCUMULATOR, font=self.customFont)
        label2.pack()

        spacer2 = tk.Label(root, text="", font=self.customFont)
        spacer2.pack()

        label3 = tk.Label(root, text="      COMBINED: %s" % PE_COMBINED_ACCUMULATOR, font=self.customFont)
        label3.pack()

        root.geometry('1800x1000+0+0')
        root.after(10,Inputs)

        root.mainloop()

    def Inc():

        PE_MATTRESS_ACCUMULATOR = PE_MATTRESS_ACCUMULATOR + 1
    label1.setText("MATTRESSES: %s" % PE_MATTRESS_ACCUMULATOR)
    label2.setText("BOXSPRINGS: %s" % BOXSPRING_ACCUMULATOR)
    label3.setText("      COMBINED: %s" % PE_COMBINED_ACCUMULATOR)

        root.update_idletasks()

    def Inputs():

        if PE_MATTRESS == True and PE_MATTRESS_LATCH == False:
            PE_MATTRESS_ACCUMULATOR = PE_MATTRESS_ACCUMULATOR + 1
            PE_MATTRESS_LATCH = True

        elif PE_MATTRESS == False and PE_MATTRESS_LATCH == True:
            PE_MATTRESS_LATCH = False

        elif PE_COMBINED == True and PE_COMBINED_LATCH == False:
            PE_COMBINED_ACCUMULATOR = PE_COMBINED_ACCUMULATOR + 1
            PE_COMBINED_LATCH = True

        elif PE_COMBINED == False and PE_COMBINED_LATCH == True:
            PE_COMBINED_LATCH = False

        elif RESET == True:
            PE_COMBINED_ACCUMULATOR = 0
            PE_MATTRESS_ACCUMULATOR = 0

app=App() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:32:01.347

您的伪代码包含一个`while 1`循环，但您的实际代码没有。此外，`Inc()`从不调用。我建议您将以下几行添加到末尾`Inputs()`：

```
self.Inc()
self.root.after(10, self.Inputs) 
```

您还必须创建`root`一个实例变量，即包含`self.root = root`在其中`__init__()`以使其工作。

# opengl - LWJGL设置透明度颜色？

> ID：13865909
> 
> 赞同：0
> 
> 时间：2012-12-13T18:14:00.883
> 
> 标签：opengl, transparency, alpha, lwjgl

我一直在玩 LWJGL，作为 Pygame 的升级版。我正在尝试渲染一个精灵，我想知道 LWJGL 是否具有类似于 Pygame 的 colorkey 的功能，可以让您在将渲染为透明的图像中定义一种颜色。您必须在 OpenGL 中使用 Alpha 通道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:17:08.147

OpenGL 没有任何内置的颜色键控支持。您需要手动将密钥交换为 CPU 上的 alpha，或者使用自定义着色器即时替换它。

# windows - 为 32 位 PCI 设备编写 Windows 64 位设备驱动程序

> ID：13865910
> 
> 赞同：5
> 
> 时间：2012-12-13T18:14:03.713
> 
> 标签：windows, 64-bit, driver, dma, pci

我正在评估将几年前编写的设备驱动程序从 32 位移植到 64 位。物理设备是 32 位 PCI 卡。也就是说，该设备是 32 位的，但我需要从 Win7x64 访问它。该设备向 Windows 世界提供一些寄存器，然后执行繁重的总线主数据传输到一块驱动程序分配的内存中。

我在 Microsoft 文档中读到，您可以指示驱动程序是否支持 64 位 DMA。如果不是，则 DMA 是双缓冲的。但是，我不确定是否是这种情况。我的驱动程序将/可能是一个完整的 64 位驱动程序，因此它可以支持处理器地址空间中的 64 位地址，但实际的物理设备不支持它。事实上，设备 BAR 必须映射到 4 GB 以下，并且设备必须获得一个 PC RAM 地址才能执行 4 GB 以下的总线主控。这是否意味着我的驱动程序将始终通过双缓冲？这是一个对性能非常敏感的过程，双缓冲可能会阻止整个系统工作。

当然，设计一个新的 64 位 PCI（或 PCI-E）板是没有问题的。

任何人都可以为这个过程提供一些资源（除了 MS 页面）？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T15:02:38.343

这是一个旧帖子，我希望答案仍然相关......

这里有两个部分，PCI target 和 PCI master access。

**PCI 目标访问：**驱动程序将 PCI BAR 映射到 64 位虚拟地址空间，驱动程序只需通过指针读取/写入。

**PCI 主访问：**您需要通过调用[IoGetDmaAdapter()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549220(v=vs.85).aspx)创建一个 DmaAdapter 对象。创建时，您还描述了您的设备是 32 位的（请参阅 DEVICE_DESCRIPTION 参数）。然后调用[DmaAdapter::AllocateCommonBuffer()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540575(v=vs.85).aspx)方法在 PC RAM 中分配一个连续的 DMA 缓冲区。

不过，我不确定双缓冲。根据我的经验，不使用双缓冲，而是 DmaAdapter::AllocateCommonBuffer() 如果无法分配满足 DEVICE_DESCRIPTION 的缓冲区（在您的情况下为 32 位 dma 寻址），则会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-06T05:45:44.263

为仅支持 32 位 PCI 寻址的设备编写 64 位驱动程序没有问题。正如 Alexey 所指出的，您创建的 DMA 适配器对象指定了您设备的硬件寻址能力。当您分配 DMA 缓冲区时，操作系统会考虑到这一点，并确保在您的硬件可访问区域内分配这些缓冲区。Linux 驱动程序的行为类似，您的驱动程序必须提供一个 DMA 地址掩码以与您的设备相关联，稍后使用的 DMA 函数将引用该掩码。

如果您的应用程序分配了一个需要 DMA 进出的缓冲区，您可能会遇到的性能损失。这个缓冲区可以分散在整个内存中，内存中的页面超过 4G。如果您的驱动程序计划对这些进行 DMA，则需要在 DMA 期间将缓冲区页面锁定在 RAM 中，并根据页面位置为您的 DMA 引擎构建一个 SGL。问题是，对于 4G 以上的页面，操作系统必须将它们复制/移动到 4G 以下的页面，以便您的 DMA 引擎能够访问它们。这就是潜在的性能冲击所在。

# web - 网站目录搜索引擎优化

> ID：13865912
> 
> 赞同：0
> 
> 时间：2012-12-13T18:14:08.357
> 
> 标签：web, bing, seo

可能没有正确答案，欢迎提出意见。

我的网站有一个产品目录部分`/catalog`，产品列在该目录中`/catalog/product-name`。关联的文件和图像是否应该作为子目录 ( `/catalog/product-name/image/img1.png`)、同一目录 ( `/catalog/product-name/img1.png`) 或中央目录 ( `/images/img1.png`) 可见？

这完全是为了 SEO 结构，因为图像作为 blob 存储在 RAM 中并使用哈希表进行访问。

此外，我最初的目标是允许使用多个名称访问同一个图像（例如：`product-name-profile-shot.png`将是 的别名`img1.png`），但是由于没有图像的规范链接形式，如果我冒着看起来垃圾邮件的风险同一张图片出现在不同网址的多个位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:43:09.837

根据我的经验，URL 结构确实在网络营销中发挥着重要作用。当您优化网站以进行自然搜索时，基于主题分类的结构化数据非常有用。您可以参考这个简单的静态网站，该网站的组织方式与您提到[的 yogacurious.com](http://www.yogacurious.com)相同，只需检查分类及其在 Google 搜索中的存在。用户友好的分类可以带来更好的搜索效果！

关于图像别名，我不会喜欢它。我建议通过考虑放置链接的内容和产品页面来使用具有不同 alt 标签的相同图像。

祝一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:58:12.917

您绝对不需要更改资源的 url 结构。页面的 URL 结构很重要。资源 url 结构没有，也不会影响 SEO。

我不会为图像创建别名，因为从 SEO 的角度来看没有理由这样做。

# css - 试图让三个部门并排

> ID：13865914
> 
> 赞同：0
> 
> 时间：2012-12-13T18:14:13.247
> 
> 标签：css, html

这是我当前的代码，但我看不出问题出在哪里。我是 html 新手，所以我不太确定。我想在左边有一个大约 20% 的空间的列，中心的列占用 60% 的空间，右侧的列占用 20% 的空间。

```
#wrapper {
    background-color: #788D9A;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
}

#mainleft {
    width: 20%;
    float: left;
    padding: 10px;
    text-align: center;
    background-color: #ABB8C0;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
    border-right: solid black;
    display:inline-block;
}

#maincenter {
    width: 60%;
    float: left;
    overflow: hidden;
    text-align: center;
    padding: 10px;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
    display:inline-block;

}

#mainright {
    width: 20%;
    float: left;
    padding: 10px;
    text-align: center;
    background-color: #ABB8C0;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
    border-right: solid black;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:18:14.773

在使用`padding-left` `padding-right` `margin-left` `margin-right` `border-left`以及`border-right`何时需要这种类型的布局时，您需要注意。

这些样式中的每一个都会影响该元素的整体宽度，因此添加 a`padding: 10px`实际上会使您的`div` `width`= `20% + 20px`。

* * *

如果你想拥有内部填充和边框样式`div`

**示例：http: [//jsfiddle.net/b62Ju/2/](http://jsfiddle.net/b62Ju/2/)**

* * *

HTML

```
<div id="wrapper">    
    <div id="mainleft">
        <div>L</div>
    </div>
    <div id="maincenter">
        <div>C</div>
    </div>
    <div id="mainright">
        <div>R</div>
    </div>
</div>​ 
```

CSS

```
#wrapper {
    background-color: #788D9A;
}

#wrapper > div
{
    height: 1000px;
    float: left;
    text-align: center;
}

#mainleft {
    width: 20%;    
    background-color: #ABB8C0;
}

#maincenter {
    width: 60%;
}

#mainright {
    width: 20%;
    background-color: #ABB8C0;
}

#maincenter > div
{    
    height: 1000px;
    border-left: solid black;
    border-right: solid black;
}

#mainleft > div, 
#maincenter > div,
#mainright > div
{
    padding: 10px;
} 
```

* * *

或者，您可以使用以下`box-model`样式：

```
.box
{
    box-sizing: border-box;
    ms-box-sizing: border-box;
    webkit-box-sizing: border-box;
    moz-box-sizing: border-box;
} 
```

更多信息：[http ://www.quirksmode.org/css/box.html](http://www.quirksmode.org/css/box.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:41:55.277

这些`display: table`属性似乎是这里的最佳选择。你得到了等高的列（我假设这就是疯狂的底部边距/填充），没有额外的标记和填充，而不必担心调整盒子模型（在此处了解有关盒子模型的更多信息： [http：/ /css-tricks.com/the-css-box-model/](http://css-tricks.com/the-css-box-model/)）。

[http://jsfiddle.net/b62Ju/3/](http://jsfiddle.net/b62Ju/3/)

```
#wrapper {
    display: table;
    width: 100%;
}

#wrapper > div
{
    display: table-cell;
    padding: 1em;
}

#mainleft {
    width: 20%;    
    background-color: orange;
}

#maincenter {
    width: 60%;    
}

#mainright {
    width: 20%;
    background-color: green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:20:19.667

如果我们需要并排放置三个潜水，供您参考，

HTML：

```
<div class="main">
    <div class="left">...</div>
    <div class="center">...</div>
    <div class="right">...</div>
</div> 
```

CSS：

```
.main {
    width: 1000px;
    float: left;
    display: inline-block;
}

.left {
    width : 20%;
    float: left;
    display: inline-block;
}

.right {
    width : 20%;
    float: left;
    display: inline-block;
}

.center {
    width : 60%;
    float: left;
    display: inline-block;
} 
```

它会起作用的。

我认为在您的代码中，您需要为主包装器 div 设置宽度。

# java - Why does it go to exception when parse to integer?

> ID：13865922
> 
> 赞同：0
> 
> 时间：2012-12-13T18:14:37.147
> 
> 标签：java, android

I can´t figure out why this Integer.parseInt makes an exception, its a NullpointerException..

```
try
{
    int numberOfPictures = Integer.parseInt(editTextNumberOfGames
                        .getText().toString()); 
    Toast toast =Toast.makeText(getBaseContext(), "ratt", Toast.LENGTH_SHORT); 
                toast.show();
} catch (Exception e)
{
    Toast toast =Toast.makeText(getBaseContext(), "fel", Toast.LENGTH_SHORT); 
                toast.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:21:42.373

Have you used a debugger to verify that editTextNumberOfGames is not null when you get to this code?

You can temporary break up the Integer.parseInt(editTextNumberOfGames.getText().toString()) statement to see exactly which part of the compound statement is causing the exception.

See [http://developer.android.com/reference/java/lang/Integer.html](http://developer.android.com/reference/java/lang/Integer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:28:43.820

As ratchet freak pointed out in comments, i had not done this:

editTextNumberOfGames = (EditText)findViewById(R.id.editTextNrOfPictures);

Thanks for all help though.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-13T18:18:24.370

It throws an expecption because `editTextNumberOfGames` is null

initialize editTextNumberOfGames correctly, or if for whatever reason you cannot garuantee, that it is initialized then

```
int numberOfPictures;
if (editTextNumberOfGames != null) {
   numberOfPictures = Integer.parseInt(editTextNumberOfGames.getText());
} 
```

# powershell - 如何卸载其他用户安装的应用程序？

> ID：13865930
> 
> 赞同：63
> 
> 时间：2012-12-13T18:15:05.690
> 
> 标签：powershell, windows-8, windows-runtime, windows-store-apps, windows-store

当我尝试调试我的 Windows 8 应用程序并且已经在另一个用户帐户上安装了一个副本时，我一直遇到这个问题：

> DEP0700：应用注册失败。另一个用户已经安装了这个应用程序的打包版本。未打包的版本无法替代它。冲突的包是 {{{PackageName}}}，它是由 CN={{{Certificate Stuff}}} 发布的。(0x80073cf9)

有时我可以只登录或要求其他人登录机器并卸载应用程序。或者，我可以更改应用程序名称/ID，但一个并不总是可行，另一个是有风险的（我不想将更改后的应用程序 ID 签入源代码控制）。

必须有某种方法可以卸载它。也许是 PowerShell 脚本？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T20:15:32.403

我上面的过程仍然有效，但它只是解决了竞争条件问题，Windows 更新（是的，很奇怪）负责清除“暂存包”。

[根据 Microsoft](http://blogs.msdn.com/b/wsdevsol/archive/2013/01/28/registration-of-the-app-failed-another-user-has-already-installed-a-packaged-version-of-this-app-an-unpackaged-version-cannot-replace-this.aspx)的说法，“其他修复”——我仍然认为这个问题是一个错误——是：

> 问题原因：
> 
> Windows Update (WU) 会下载您拥有的较新版本的软件包并将它们“暂存”为本地系统，因此当您去商店更新应用程序时，更新过程会尽可能快。WU 最终将清理从未安装的暂存包。
> 
> **拥有“分阶段”包有什么后果？**
> 
> 1.  分阶段包阻止您在开发模式下安装该特定包
>     
>     
> 2.  分阶段的包会占用一些磁盘空间，但由于硬链接，这种影响被减轻了。如果包的多个版本之间的文件相同，则 appx 部署会硬链接这些文件，而不是维护同一文件的两个单独副本。
>     
>     
> 
> **如何找到“分阶段”包？**
> 
> 1.  在管理员 powershell 提示符下，命令：
>     
>     
>     
>     `get-appxpackage -all`
>     
>     
> 
> 将显示机器上的所有包。对于暂存的包，PackageUserInformation 将显示 {S-1-5-18 [Unknown user]: Staged} 2\. 使用 powershell 过滤，获取所有暂存的 packagefullnames 的列表，您可以执行以下操作：
> 
> ```
> get-appxpackage -all |% {if ($_.packageuserinformation.installstate -eq "Staged"){$_.packagefullname}} 
> ```
> 
> **如何摆脱“分阶段”包？**
> 
> 1.  `psexec`从 Mark Russinovich 编写的 sysinternals 工具下载
>     
>     
> 2.  要摆脱所有这些，请在常规管理员/提升的命令提示符（不是 powershell）中运行：
>     
>     
> 
> `psexec -s powershell -c "get-appxpackage | remove-appxpackage"`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-06-21T22:37:03.310

Windows 10 1709 对 remove-appxpackage cmdlet 进行了改进，添加了 -allusers 作为选项。

因此，要为所有用户卸载应用程序，此命令有效：

```
Get-AppxPackage -AllUsers [PackageFamilyName] | Remove-AppxPackage -AllUsers 
```

其中 [PackageFamilyName] 通常是您的包的 GUID。

警告/警告：该命令似乎使稍后重新安装（使用 DISM 重新配置包）变得非常困难，因为它似乎将每个用户单独卸载了该应用程序。进入这里太多了...

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-01-15T14:39:21.147

如果这不起作用，您还可以尝试以下对我有用的方法。请注意，这是针对我的开发机器，而不是普通用户的机器，所以我不知道它会如何影响非开发人员：-P

1.  获取文件夹 c:\Program Files\WindowsApps 和 C:\ProgramData\Microsoft\Windows\AppRepository 的所有权 - 授予管理员完全访问权限。确保 TrustedInstaller 也具有修改权限。你也取得了所有权。如果您不知道，这是通过该文件夹上的属性完成的。

2.  转到服务并停止 Windows Installer 服务。

3.  打开 C:\ProgramData\Microsoft\Windows\AppRepository\ 并删除 PackageRepository.edb 文件。

4.  再次启动 Windows Installer 服务。

5.  以管理员身份启动 Visual Studio。

6.  尝试启动您的应用程序。它应该工作。

运行应用程序一次后，您应该能够再次在用户模式下运行 VS。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-06-14T10:35:14.940

**解决方法**：

如果没有其他方法对您有用（对我来说也没有），**您可以在应用清单中更改您的包名称**（只需将最后几个字符替换为其他字符）。**当你这样做时，你将不再有冲突的包。**

更改包名称可能不适用于某些情况，但您可以随时备份并在有问题的设备上完成调试后将其更改回来......

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-09-06T10:55:57.057

如果要删除当前用户的应用程序，请尝试：

```
Get-AppxPackage | where name -eq "APP.NAME" | Remove-AppxPackage 
```

它帮助了我。所以`Get-AppxPackage`没有`-all`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-11-09T07:25:31.383

***在 Windows 10 上：***

首先，你需要一个像 SqliteBrowser3 这样的 SQL 数据库编辑器

1.  以系统用户身份进行操作（使用 psexec 或其他）
2.  制作一份`C:\ProgramData\Microsoft\Windows\AppRepository\StateRepository-Machine.srd`
3.  使用 SqliteBrowser3 打开该副本
4.  您将需要编辑“package”、“packageuser”和“user”表。为此，您需要记下“用户”表中的幽灵用户 ID，然后将其删除。`user`然后，从“packageuser”表中删除列中具有幽灵用户 ID 的条目。
5.  杀`tasklist /svc /fi "services eq StateRepository"`
6.  `StateRepository-Machine.srd`备份后替换原件。
7.  重启，然后你可以正常删除你的包

注意：您需要将自己的用户条目分配给包

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-15T05:42:05.803

有一组用于管理 Windows 应用商店应用的 PowerShell cmdlet。如果您以管理员身份运行以下命令，则可以列出计算机上所有用户已安装的应用程序：

```
Get-AppxPackage -AllUsers 
```

不过，我还没有找到为其他用户卸载应用程序的方法。`Remove-AppxPackage`仅适用于当前用户。如果您删除安装了应用程序的用户，这会使一切变得更加有趣。至少在 Windows 8 的预发布版本中，这使得删除他安装的应用程序是不可能的。自最终发布以来，我成功地避免了这种情况，因此我无法确认问题仍然存在，即删除用户帐户时不会卸载应用程序。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-09-04T16:08:10.897

我必须执行以下操作：

```
 get-appxpackage -all > log.txt
 notepad log.txt (search for the offending PackageFullName)
 remove-appxpackage -allusers -package "PackageFullName" 
```

对我来说，关键是添加**-allusers**标志，因为没有它我收到**“...因为当前用户没有安装该软件包。使用 Get-AppxPackage 查看已安装的软件包列表。** ”错误。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-11-30T16:42:41.167

这类似于其他一些答案，尤其是@Pavel Nazarov，但适用于不同的用户。它与公认的答案不同，因为您不需要安装任何程序。

在管理员模式下的 Windows Powershell 中，运行：

`get-appxpackage -all | where name -eq "{{ App Name }}" | remove-appxpackage`

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-11-01T07:02:06.467

虽然这对我不起作用，但它可能只适用于其他人......

以管理员身份启动 powershell 并运行：

```
Get-AppxPackage -all | Out-GridView -Passthru | Remove-AppXPackage 
```

然后**选择**正确的包并**确定**，希望它会被删除。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-29T06:44:02.753

什么对我有用

```
 1\. Close VS
 2\. Open Services
 3\. Stop Appx Deployment Service
 4\. Open C:\ProgramData\Microsoft\Windows\AppRepository\ and delete the PackageRepository.edb file.
 5\. Start Appx Deployment Service
 6\. Start VS & Debug - worked like charm 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-10T01:14:31.180

在尝试了许多其他变体之后，我刚刚`get-appxpackage -all | where name -eq "PackageName" | remove-appxpackage -AllUsers`在 Win 10 v1903 上使用它并且它有效。之后我测试了包裹的存在，它消失了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-07T08:59:41.017

如果所有其他方法都失败并且您很绝望，就像我的情况一样（因为用户已被删除）这个有点危险，但它对我有用。

风险自负！我知道我的用户是在机器上创建的最后一个用户。

这个答案是 Auri Rahimzadeh 上面关于 TAKEOWN 的答案和 intika 的答案的组合，您使用“DB Browser For SQLite”修改 StateRepository-Machine.srd（在此处下载：[DB Browser for SQLite 3](http://sqlitebrowser.org/)），唯一的区别是我只编辑了一个事情：在**PackageUser 中**，我将值**User** *3*（这是以前删除的用户的 ID）更改为*4*（这是我，最后创建的用户）

请务必检查**用户**表并查看在您的情况下哪些值有效！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-05T12:04:08.823

在我的情况下，我需要使用： `Get-AppxProvisionedPackage -online`而不是 `Get-AppxPackage`然后相应地使用`Remove-AppxProvisionedPackage -PackageName YourPackageNameHere -Online -AllUsers`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-14T20:25:04.433

这对我有用。

1.  以管理员身份打开 Powershell。
2.  执行这个命令（使用你的包名和安装它的用户）

> 获取-AppxPackage -名称“MyPackageBlah”-用户“blahdy”

3.  复制输出信息中 PackageFullName 的值。

> 名称：MyPackageBlah
> 出版商：CN = BLAH
> 架构：X64
> RESOURCEID：
> 版本：1.0.34.0
> PackageFullName：**MyPackageBlah_1.0.34.0_x64__ww4kfnnrsedz6**
> IsFramework：假
> PackageFamilyName：MyPackageBlah_ww4kfnnrsedz6
> 的publisherId：ww4kfnnrsedz6
> IsResourcePackage：假
> IsBundle：假
> IsDevelopmentMode：假
> 不可拆卸：假
> 依赖关系：{微软.UI.Xaml.2.6_2.62107.6002.0_x64__8wekyb3d8bbwe，
> Microsoft.NET.Native.Framework.2.2_2.2.29512.0_x64__8wekyb3d8bbwe，
> Microsoft.NET.Native.Runtime.2.2_2.2.28604.0_x64__8wekyb3d8bbwe，
> Microsoft.VCLibs.140.00_14.0.30035.0_x64__8wekyb3d8bbwe}
> IsPartiallyStaged：错误
> SignatureKind：开发人员
> 状态：好的

4.  执行这个命令

> 删除-AppxPackage -Package“MyPackageBlah_1.0.34.0_x64__ww4kfnnrsedz6”-AllUsers

您现在可以在 Visual Studio 中运行您的应用程序了。

# java - 优化 Tomcat / 垃圾回收

> ID：13865931
> 
> 赞同：7
> 
> 时间：2012-12-13T18:15:09.813
> 
> 标签：java, tomcat, optimization, garbage-collection, performance

我们的服务器有 128GB 的​​ RAM 和 64 个内核，在 CentOS 6.3 上运行 Tomcat 7.0.30 和 Oracle jdk1.6.0_38。

每 60 分钟，我们就会看到需要 45 到 60 秒的垃圾收集。添加 -XX:-UseConcMarkSweepGC 将页面加载时间增加了大约 10%，但降低到了大约 3 秒，这是一个可以接受的折衷方案。

我们的配置：

```
-Xms30g
-Xmx30g
-XX:PermSize=8g
-XX:MaxPermSize=8g
-Xss256k
-XX:-UseConcMarkSweepGC

```

我们将堆设置为 30 GB 以保持 32 位寻址（我读到 32 GB 以上，64 位寻址占用更多内存，因此您必须达到大约 48 GB 才能看到改进）。

使用 VisualGC，我可以看到 Eden 空间每 30 到 60 分钟循环一次，但 Survivor 0、Survivor 1、Old Gen 和 Perm Gen 发生的情况并不多。

我们有一个强大的服务器。我们可以做哪些其他优化来进一步减少 3 秒的 GC 时间？

有什么提高性能或扩展性的建议吗？

任何其他有帮助的输出或配置信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:52:37.630

这听起来可能违反直觉，但您是否尝试过分配更少的内存？例如，你真的需要一个 30G 的堆吗？万一你能和 4G 甚至更少：垃圾收集可能会更频繁，但当它发生时，它会快很多。通常我发现这比分配大量内存更可取，因为清理它需要时间。

即使这对您没有帮助，因为*您*确实需要 30G 内存，但其他人可能会遇到类似的问题，并且他们可能会从分配更少的内存中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T21:58:55.820

似乎您需要增量 GC 来减少暂停：

*   -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode

对于没有 visualgc 的跟踪，这对我来说总是很顺利（catalina.out 中的输出）：

*   -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps

> 2013-01-05T22：52：13.954+0100：15918369.557：[GC 15918369.557：[DEFNEW：65793K-> 227K（98304K）（98304K），0.0031220 SECS SECS] 235615K-> 1700010.000320.000320 K（490050K） =0.00，实数=0.00 秒]

在你可以玩这个之后：

*   -XX:NewSize=ABC -XX:MaxNewSize=ABC
*   -XX:幸存者比率=ABC
*   -XX:新比率=ABC

参考：[虚拟机垃圾收集调优](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)

# python - Python中的切片列表混淆

> ID：13865937
> 
> 赞同：1
> 
> 时间：2012-12-13T18:15:25.487
> 
> 标签：python, list, slice, del

好吧，我是 Python 的超级新手，关于切片列表的事情让我很困扰。当我从这段代码中切片 [1] 和 [3] 时，为什么会得到 [1, 3, 4]？

```
z = [1, 2, 3, 4, 5]
del z[1], z[3]
print z 
```

我以为我会得到 [1, 3, 5] 回来，因为它似乎 [2] 和 [4] 正在被删除。

如果-->[1, 2, 3, 4, 5]
是-->[0, 1, 2, 3, 4]

我的逻辑在哪里搞砸了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T18:16:29.623

第一次删除会更改列表索引，因此下一个不是以前的位置...简化

```
>>> a = [1, 2, 3]
>>> del a[0] # should delete 1
>>> a
[2, 3]
>>> del a[1] # This use to be the index for 2, but now `3` is at this index
>>> a
[2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T18:17:00.970

一次删除一个。第一次删除将所有后续元素向左移动一个位置：

```
In [3]: z = [1, 2, 3, 4, 5]

In [5]: del z[1]

In [6]: z
Out[6]: [1, 3, 4, 5]

In [7]: z[3]
Out[7]: 5 
```

如果您将索引从最大到最小排列，则不会发生这种情况，因为没有删除会更改任何相关索引：

```
In [18]: z = [1, 2, 3, 4, 5]

In [19]: del z[3], z[1]

In [20]: z
Out[20]: [1, 3, 5] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T18:22:43.270

当您进行删除时，它们一次发生一个，因此每次删除都会导致向右的值移动到左侧的一个索引上。

```
z = [1, 2, 3, 4, 5]

del z[1] # [1, X, 3, 4, 5] --> [1, 3, 4, 5]

del z[3] # [1, 3, 4, X] --> [1, 3, 4] 
```

您应该做的保留顺序是将删除从最大索引到最小索引，这样就不会转移任何内容，*即*

```
del z[3]; del z[1] 
```

更好的是一次删除所有内容以完全避免该问题：

```
z = [1, 2, 3, 4, 5]
del z[1::2]
# returns [1, 3, 5] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T18:21:36.277

其他人提到了您的代码有什么问题，我可以真正理解您打算做什么的原因

如果您想删除第 2 个和第 4 个元素并且不太关心移位列表，您应该在一个单一的范围内执行此操作，可能的解决方案是通过 List COMprehension

```
def inplace_del(it, rng): 
    return [e for i, e in enumerate(it) if i not in set(rng)]
inplace_del(z,(2,3))
[1, 2, 5]
y = xrange(1,6)
inplace_del(y,(2,3))
[1, 2, 5] 
```

更好的解决方案是使用 itertools

```
>>> from itertools import count, compress
>>> def in_del(it, rng):
    rng = set(rng)
    holes = (e not in rng for e in count(0))
    return compress(it, holes)

>>> list(in_del(z,(2,3)))
[1, 2, 5]
>>> list(in_del(y,(2,3)))
[1, 2, 5]
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T18:22:30.537

您看到这种行为的原因是，这`del z[1], z[3]`完全等同于在单独的行上设置`del z[1]`和。`del z[3]`所以第一个`del`语句将移动后续元素并`z[3]`成为最后一个元素（`5`）：

```
>>> def del_test():
...     del z[1], z[3]
...
>>> def del_test2():
...     del z[1]
...     del z[3]
...
>>> del_test.__code__.co_code == del_test2.__code__.co_code
True 
```

# vhdl - 时钟内的上升沿检测

> ID：13865940
> 
> 赞同：0
> 
> 时间：2012-12-13T18:15:31.700
> 
> 标签：vhdl

我是 vhdl 编程的新手。我最近接到了一项任务，通过按下按钮来更改对时钟信号敏感的移位寄存器中 std_logic_vector 的值。

当我按住 KEY(2) 时，移位寄存器的值会发生变化，但除非我松开按钮，否则它不会移位。是否可以在下面修改我的代码，使其对 KEY(2) 的上升沿敏感？或者是否有任何其他可能性可以通过按下 KEY(2) 按钮来更改向量的值，即使我按住按钮它也会发生变化？

谢谢您的回答。我会非常感激，这对我有很大帮助。

对不起，我的英语不好。玩得开心。

```
ENTITY hadvhdl  IS PORT (
    CLOCK_50 : IN STD_LOGIC;
    KEY      : IN STD_LOGIC_VECTOR  (3 downto 0);
    LEDR     : OUT STD_LOGIC_VECTOR (15 downto 0)
);
END hadvhdl;

ARCHITECTURE rtl OF hadvhdl IS
    shared variable register : std_logic_vector(15 downto 0) := (1 downto 0=>'1', others=>'0');
    shared variable count   : integer range 1 to 4 :=1;
BEGIN

    changecount: process (KEY)
    begin    
        if rising_edge(KEY(2)) then
            if count<4 then
                count := count + 1; 
            else
                count := 1;
            end if;
        end if; 
    end process;

    shift: process (CLOCK_50, KEY)
        variable up : BOOLEAN := FALSE;
        variable reg : std_logic_vector(15 downto 0) := (1 downto 0=>'1', others=>'0'); 
    begin   
        if rising_edge(CLOCK_50) then
            if (KEY(2)='1') then
                case count is 
                    when 1 => register := (1 downto 0=>'1', others=>'0'); 
                    when 2 => register := (2 downto 0=>'1', others=>'0'); 
                    when 3 => register := (3 downto 0=>'1', others=>'0'); 
                    when 4 => register := (4 downto 0=>'1', others=>'0'); 
                end case; 
            end if;

            reg := register;
            LEDR <= reg;

            if up then
                reg := reg(0) & reg(15 downto 1); 
            else 
                reg := reg(14 downto 0) & reg(15);  
            end if;

            register := reg;

        end if;
    end process;

END rtl; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T18:40:28.607

1.  不要使用变量！（至少作为 VHDL 初学者）
2.  不要将按钮用作时钟（例如在上升沿）
3.  在您的设计中只使用*一个*时钟（在您的情况下似乎没问题）
4.  请记住，机械按钮会弹跳。

这是边缘检测的一个变体：

```
 -- in entity
  clk    ; in std_logic;
  sig_in : in std_logic;

...

signal sig_old  : std_logic;
signal sig_rise : std_logic;
signal sig_fall : std_logic;

...

  process
  begin
    wait until rising_edge( clk);

    -- defaults
    sig_rise <= '0';
    sig_fall <= '0';

    -- shift value in
    sig_old <= sig_in;

    -- do some real action
    if sig_old = '0' and sig_in = '1' then
      sig_rise <= '1';
    end if;

    if sig_old = '1' and sig_in = '0' then
      sig_fall <= '1';
    end if;

  end process; 
```

# c# - 使用 C# 和 WPF 更新 XML 文件

> ID：13865943
> 
> 赞同：3
> 
> 时间：2012-12-13T18:15:44.823
> 
> 标签：c#, wpf, xml

我正在构建一个应用程序，它将使用文本框输入来编辑 xml 文件的内容。我已经了解了使用 C# 创建新的 xml 文件的基本概念，但是在尝试更新文件时仍然会出错。请帮忙？

（我是一个需要很多帮助的新开发人员。如果我需要发布其他任何内容，请添加评论。）

**编辑：** *这是我的问题所在：`doc.CreateElement()`. 它不会更新文件。如果我单击保存按钮，文件本身不会更新。*

这是我尝试过的：

**文件名.xml**：

```
 <ApplicationPreferences>
   <Facility>2400</Facility> 
   <FacilityName>Somewhere</FacilityName> 
 </ApplicationPreferences> 
```

**代码**：

```
namespace WIPSControlPanel
{
[Serializable]
public class ApplicationPreferences 
{
    private const string CONFIG_FILE_NAME = "fileName.xml";
    private string _facility = String.Empty;
    private string _facilityName = String.Empty;
    private string _preferencesPath = CONFIG_FILE_NAME;
    private string _appURI = String.Empty;

    [XmlElement]
    public string FacilityName
    {
        get { return _facilityName; }
        set { _facilityName = value; }
    }

    [XmlElement]
    public string Facility
    {
        get { return _facility; }
        set { _facility = value; }
    }

     public string AppURI
    {
        get { return _appURI; }
    }

    //Constructor
    public ApplicationPreferences()
    {
    }

    /// <summary>
    /// Constructs the class
    /// </summary>
    public ApplicationPreferences(string pathName)
    {

        _preferencesPath = Path.Combine(pathName, CONFIG_FILE_NAME);

    }

   public void Save()
    {
        XmlSerializer serializer = new XmlSerializer(typeof(ApplicationPreferences));
        XmlWriter writer = GetXmlWriter();
        serializer.Serialize(writer, this);
    }

    public void Load()
    {
        XmlSerializer serializer = new XmlSerializer(typeof(ApplicationPreferences));
        XmlReader reader = GetXmlReader();
        ApplicationPreferences newConfig = (ApplicationPreferences)serializer.Deserialize(reader);

        if (newConfig != null)
        {
            this.FacilityName = newConfig.FacilityName;
            this.Facility = newConfig.Facility;
        }
    }

private XmlReader GetXmlReader()
    {
        XmlReaderSettings settings = new XmlReaderSettings();

        return XmlReader.Create(_preferencesPath, settings);
    }

    private XmlWriter GetXmlWriter()
    {
        if (CONFIG_FILE_NAME != null)
        {
            XmlWriterSettings settings = new XmlWriterSettings();

            return XmlWriter.Create(Path.Combine(Path.GetDirectoryName(@"\\server"), CONFIG_FILE_NAME));
        }
    }
 }

namespace WIPSControlPanel
{

   public partial class MainWindow : Window, INotifyPropertyChanged
   {
    #region Private Variables
    private ApplicationPreferences _configFile = new ApplicationPreferences();
    }

   public ApplicationPreferences ConfigFile
    {
        get { return _configFile; }

        set
        {
            _configFile = value;
            OnPropertyChanged("ConfigFile");
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        Loaded += fileLoad;
        this.DataContext = this;
        this.ConfigFile = new ApplicationPreferences(@"\\server");
        this.ConfigFile.Load();
        LoadAvailableOperations(this.ConfigFile.Facility);
        UpdateOperationDescriptions(this.ConfigFile);
    }

    private void butGenSave_Click(object sender, RoutedEventArgs e)
    {
        XmlDocument doc = new XmlDocument();
        doc.LoadXml("WIPSConfig");

        XmlWriter writer;

        XElement newElement = doc.CreateElement(
            new XElement("Facility", txtFacility.Text),
            new XElement("FacilityName", txtFacilityName.Text),
            new XElement("ApplicationStatus", txtStatus.Text),
            (new XElement("RefreshInterval", txtRefreshInterval.Text)));
        doc.Save(writer);

        writer = new XmlTextWriter("WIPSConfig.xml", null);
        writer.WriteStartElement("ApplicationPreferences");
        writer.WriteEndElement();
        doc.Save(writer);
        writer.Close();

    }
 } 
```

**文本框的 XAML**：

```
 <TextBox x:Name="txtFacilityName"
                                         Grid.Column="1"
                                         Margin="5,5,0,5"
                                         Width="129"
                                         HorizontalAlignment="Left"
                                         Text="{Binding ConfigFile.FacilityName}" />
<TextBox x:Name="txtFacility"
                                         Grid.Column="1"
                                         Grid.Row="1"
                                         Width="129"
                                         Margin="5,5,0,5"
                                         HorizontalAlignment="Left"
                                         Text="{Binding ConfigFile.Facility}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:27:17.870

马上，您可能会在一个地方创建文件，然后尝试从另一个地方读取它：

```
// _preferencesPath ~= @"\\srvusadcweb01\wips_test\Cortland\fileName.xml":
XmlReader.Create(_preferencesPath, settings);

XmlWriter.Create(Path.Combine(Path.GetDirectoryName(@"\\server"), CONFIG_FILE_NAME)); 
```

除非`@"\\server"`只是为了使事情更“通用”而进行的编辑。

**编辑**

您是否尝试使用`XmlWriter.Create()`覆盖现有文件？如果是这样，您可能需要检查一下：
[C# Serialization to file, overwrite if exists](https://stackoverflow.com/questions/2064282/c-sharp-serialization-to-file-overwrite-if-exists)

```
XmlWriter.Create(File.Create(fileName), settings) 
```

# varnish - Varnish HitPass 调试

> ID：13865945
> 
> 赞同：1
> 
> 时间：2012-12-13T18:15:54.507
> 
> 标签：varnish, varnish-vcl, setcookie

我注意到我的一个网站上的一个问题，即我的内容页面（不应该设置任何 cookie，应该都返回带有 max-age 集的“Cache-Control：public”，并且不需要授权）。

我的问题是，HitPass 对象以某种方式进入了我的缓存，从该页面中删除了缓存。我需要对此进行调试，但对如何最好地做到这一点感到困惑，特别是因为我无法复制这个问题。

我注意到清漆在清漆日志中的 HitPass 旁边给了我一个 ID。我假设这是生成 HitPass 的请求的清漆 ID，并且在清漆日志中搜索会告诉我响应到底出了什么问题？

从我要缓存的页面中删除 SetCookie 标头会更好吗？问题是即使通过了 URL 也会调用 vcl_fetch ......有没有办法在 vcl_fetch 中判断当前请求是否已通过 vcl_recv 传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:07:08.980

SetCookie 确实是您在缓存中获得点击传递对象的原因。这是对未准备好的站点的重要优化。hit-for-pass 将让 varnish 为每个请求直接进入后端，而不是让它们停止并等待前一个请求的响应。

我不确定您要调试的确切内容。如果它是 set-cookie，您可能应该从后端删除它，或者对缓存哪些内容或缓存中忽略哪些内容制定自己的规则。如果您仍然需要 set-cookie 并且它具有独特的值，那么通过点击是最好的方法。

# scala - 如何在 Scala 中表达这种类型？存在类型类（即隐式）限制？

> ID：13865947
> 
> 赞同：6
> 
> 时间：2012-12-13T18:15:54.690
> 
> 标签：scala, existential-type, implicits

我正在使用 Play 框架的 JSON 库，它使用类型类来实现[`Json.toJson`函数](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.libs.json.Json$)。（我可能会决定使用另一种静态类型较少的技术，比如反射；但现在我想使用这个库，因为它可以帮助我学习 Scala 类型系统。）

我有一堆需要传递给的简单案例类`toJson`，所以我必须`Writes[T]`为它们中的每一个实现一个隐式对象。对于每个类，第一次剪辑可能看起来像这样。

```
// An example class
case class Foo(title: String, lines: List[String])

// Make 'Foo' a member of the 'Writes' typeclass
implicit object FooWrites extends Writes[Foo] {
  def writes(f: Foo) : JsValue = {
    val fields = Seq("title" -> toJson(f.title), 
                     "lines" -> toJson(f.lines))                        
    JsObject(fields)
  }
} 
```

每个类都有一个相似的隐含值，所以我可以抽象出公共部分，如下所示。但这不会编译，因为我不确定如何声明类型。

```
def makeSimpleWrites[C](fields: (String, C => T??)*) : Writes[C] = {
  new Writes[C] {
    def writes(c: C) : JsValue = {
      val jsFields = fields map { case (name, get) => (name, toJson(get(c)))}
      JsObject(jsFields)
    }
  }
}

implicit val fooWrites : Writes[Foo] = 
    makeSimpleWrites[Foo]("title" -> {_.title}, "lines" -> {_.lines})                                 
implicit val otherWrites ... 
```

问题是`T`我要传递给的类型`makeSimpleWrites`。它不能是普通类型参数，因为 T 中的每个项目都不同`fields`。这是存在主义的类型吗？我还没有使用其中之一。在语法上挥舞...

```
def makeSimpleWrites[C](fields: (String, C=>T forSome { type T; implicit Writes[T] })*) 
```

这在 Scala 中可行吗？如果是这样，语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:00:00.073

因为每个字段都有不同的类型，所以每个字段都需要一个类型参数。这是因为要编写这些字段，您需要（隐式）提供`Writes`相应类型的实例（给方法`toJson`），并且这些实例是静态解析的。

解决此问题的一种解决方案是将过程分成两部分：一种方法是您为每个字段调用以提取字段访问器并将其与相应的`WriteS`实例打包（这甚至可以从您的对中进行隐式转换）已经通过），以及一种方法，它采用整体并创建最终`WriteS`实例。像这样的东西（说明性，未经测试）：

```
class WriteSFieldAccessor[C,T] private ( val title: String, val accessor: C => Any )( implicit val writes: Writes[T] )

implicit def toWriteSFieldAccessor[C,T:Writes]( titleAndAccessor: (String, C => T) ): WriteSFieldAccessor = {
  new WriteSFieldAccessor[C,T]( titleAndAccessor._1, titleAndAccessor._2 )
}
def makeSimpleWrites[C](fields: WriteSFieldAccessor[C,_]*) : Writes[C] = {
  new Writes[C] {
    def writes(c: C) : JsValue = {
      val jsFields = fields map { f: WriteSFieldAccessor => 
        val jsField = toJson[Any](f.accessor(c))(f.writes.asInstanceOf[Writes[Any]])
        (f.title, jsField)
      }
      JsObject(jsFields)
    }
  }
}

// Each pair below is implicitly converted to a WriteSFieldAccessor  instance, capturing the required information and passing it to makeSimpleWrites
implicit val fooWrites : Writes[Foo] = makeSimpleWrites[Foo]("title" -> {_.title}, "lines" -> {_.lines}) 
```

有趣的部分是`toJson[Any](f.accessor(c))(f.writes..asInstanceOf[Writes[Any]])`。您只需`Any`作为静态类型传递，**但**显式传递（通常是隐式的）`Writes`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:59:27.800

当试图解决我的第一个解决方案必须写`"title" -> {s:Section => s.title}`而不是 的限制时`"title" -> {_.title}`，我对其进行了一些修改，只是为了一直在 scala 的推理限制中运行。所以我决定尝试从另一个角度解决它，并提出了一个完全不同的解决方案。这基本上是一个准DSL：

```
class ExpandableWrites[C]( val fields: Vector[(String, C => Any, Writes[_])] ) extends Writes[C] {
  def and[T:Writes](fieldAccessor: C => T)(fieldName: String): ExpandableWrites[C] = {
    new ExpandableWrites( fields :+ (fieldName, fieldAccessor, implicitly[Writes[T]]) )
  }
  def writes(c: C) : JsValue = {
    val jsFields = fields map { case (name, get, writes) => (name, toJson[Any](get(c))(writes.asInstanceOf[Writes[Any]]) )}
    JsObject(jsFields)
  }
}

class UnaryExpandableWritesFactory[C] {
  def using[T:Writes](fieldAccessor: C => T)(fieldName: String): ExpandableWrites[C] = {
    new ExpandableWrites[C]( Vector( (fieldName, fieldAccessor, implicitly[Writes[T]] ) ) )
  }
}

def makeSimpleWritesFor[C] = new UnaryExpandableWritesFactory[C]

implicit val fooWrites : Writes[Foo] = 
  makeSimpleWritesFor[Foo].using(_.title)("title") .and (_.lines)("lines") .and (_.date)("date") 
```

这个想法是你`Writes`一步一步地创建你的实例，并一个一个地用新的字段来丰富它。唯一的烦恼是您确实需要`.and`分隔符，包括点。如果没有点（即使用中缀表示法），编译器似乎再次感到困惑并抱怨如果我们只是这样做`(_.title)`而不是`(s:Section => s.title)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-25T14:41:19.777

至少截至 2015 年 1 月 25 日，play-json 已经有一种内置的方式来做你想做的事：

```
import play.api.libs.json._
import play.api.libs.functional.syntax._

sealed case class Foo(title: String, lines: List[String])  // the `sealed` bit is not relevant but I always seal my ADTs

implicit val fooWrites = (
  (__ \ "title").write[String] ~
  (__ \ "lines").write[List[String]]
)(unlift(Foo.unapply)) 
```

事实上，这也适用于`Reads[T]`

```
implicit val fooReads = (
  (__ \ "title").read[String] ~
  (-- \ "lines").read[List[String]]
)(Foo.apply _) 
```

和`Format[T]`：

```
implicit val fooFormat = (
  (__ \ "title").format[String] ~
  (-- \ "lines").format[List[String]]
)(Foo.apply _, unlift(Foo.unapply)) 
```

您还可以应用转换，例如：

```
implicit val fooReads = (
  (__ \ "title").read[String].map(_.toLowerCase) ~
  (-- \ "lines").read[List[String]].map(_.filter(_.nonEmpty))
)(Foo.apply _) 
```

甚至2路转换：

```
implicit val fooFormat = (
  (__ \ "title").format[String].inmap(_.toLowerCase, _.toUpperCase) ~
  (-- \ "lines").format[List[String]]
)(Foo.apply _, unlift(Foo.unapply)) 
```

# excel - 如何使用 Excel 在轴区域外绘制气泡图

> ID：13865955
> 
> 赞同：1
> 
> 时间：2012-12-13T18:16:27.810
> 
> 标签：excel, macos, ms-office, bubble-chart

我使用 Excel for Mac 2011，我有下图

![在此处输入图像描述](../Images/4bee821b61f8a0b5c57c95c98f05a65b.png)

我想仍然在可用图表区域之外显示气泡，同时保持最大和最小轴值不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:34:18.630

使用相同的数据创建一个相同的图表，但轴限制显示完整的气泡。然后将图表中除气泡以外的所有格式设置为相当于“无”，即没有轴标签、图表轮廓、网格线、图表和绘图边框、背景颜色等。

通过在原始图表上非常仔细地调整此仅气泡图表的大小和位置，您可以使气泡延伸到原始图表区域之外。如果气泡的大小或位置有一点偏差，则将叠加图表的数据修改为使气泡覆盖底层原始气泡所需的微小量。最后一步关闭底层气泡的格式。

不是程序化的，非常反复试验，而且很挑剔，当然，我希望有人想出一种更优雅的方式来实现你的目标。但我能够让它在我的 Windows 机器上运行。

# postgresql - 从 Postgresql 数据库中获取 .Net 中的登录用户

> ID：13865967
> 
> 赞同：1
> 
> 时间：2012-12-13T18:17:12.070
> 
> 标签：postgresql, nhibernate, npgsql

我正在开发一个使用 NHibernate 和 PostgreSQL 以及 Npgsql 数据提供程序的系统。我需要在触发器中获取系统中的登录用户才能运行审计功能。有没有办法在 NHibernate 会话中设置用户或直接从数据库中获取它？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:34:24.883

这是我前段时间编写的[关于如何将应用程序级用户身份转换为触发器的详细说明。](https://stackoverflow.com/a/13172964/398670)本质上，您可以使用临时表来存储用户登录或自定义 GUC。无论哪种方式，您的应用程序都必须在创建会话时显式设置它，以便以后可以访问它。

就我个人而言，我认为您通常应该使用 PostgreSQL 用户，并且`SET ROLE` [如此处所述](https://dba.stackexchange.com/q/25357/7788)，但我意识到这并不总是一种选择。

# java - 异步过程中列表的数据同步

> ID：13865968
> 
> 赞同：-1
> 
> 时间：2012-12-13T18:17:20.497
> 
> 标签：java, salesforce, data-synchronization

在 Salesforce 中，每个人都有一个唯一的 ID。当我推送不在 Salesforce 中的人员列表时，会向我异步返回一个新列表（可能需要几个小时），这是我填写了 id 行的列表。新列表的行顺序不同。如何将已发送列表与返回列表进行匹配，以便将返回的唯一 ID 添加到已发送列表中？可以使用任何种类的数据结构。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:28:28.617

贴一些代码？

SOAP API[文档](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_create_saveresult.htm)：

> create() 调用返回 SaveResult 对象的数组。SaveResult 数组中的每个元素对应于在 create() 调用中作为 sObjects 参数传递的 sObject[] 数组。例如，**SaveResult 数组的第一个索引中返回的对象与 sObject[] 数组的第一个索引中指定的对象匹配。**

`create()`调用的文档和示例 Java 代码：http: [//www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_create.htm#SampleIntro](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_create.htm#SampleIntro)

我确实对结果进行了重新排序 - 提交一个带有 SF 支持的错误。您也可以跟进简单地查询数据`WHERE Id IN ...`，但我强烈怀疑这是您这边的事情（可能是序列化和反序列化地图？）

# c# - c#接口 - 隐式转换错误？

> ID：13865969
> 
> 赞同：2
> 
> 时间：2012-12-13T18:17:23.833
> 
> 标签：c#, interface

如果我有这个界面：

```
public interface IFoo : IDisposable
{ 
    int PropA {get; set;}
    int PropB {get; set;}
} 
```

还有一个类：

```
public class Foo : IFoo
{
    public int PropA {get; set;}
    public int PropB {get; set;}

    public void Dispose()
    {
        Dispose();
        GC.SuppressFinalize(this);
    }
} 
```

如果没有“无法隐式转换”错误，这不应该有效吗？

```
 private Context context = new Context();
    private GenericRepository<IFoo> FooRepo;

    public GenericRepository<IFoo> Article
    {
        get
        {
            if (this.FooRepo == null)
            {
                this.FooRepo = new GenericRepository<Foo>(context);
            }
            return FooRepo;
        }
    } 
```

我以为我做对了，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:17:39.727

您正在尝试做的事情（分配`GenericRepository<Foo>`对 type 字段的引用`GenericRepository<IFoo>`）只有在其泛型类型参数`GenericRepository<T>`中[*协变时才有效。*](http://msdn.microsoft.com/en-us/library/dd799517.aspx)为此，`GenericRepository<>`将被定义为：

```
public class GenericRepository<out T> {...} //note the "out" modifier. 
```

那么这个分配就可以了：

```
this.FooRepo = new GenericRepository<IFoo>(context); 
```

但是，**这行不通**，因为协方差仅限于*接口*和*委托*。因此，为了在该限制内发挥作用，您可以定义一个协变`IGenericRepository<T>`接口并使用该接口而不是类：

```
public interface IGenericRepository<out T> {}
public class GenericRepository<T> : IGenericRepository<T> { }

private Context context = new Context();
private IGenericRepository<IFoo> FooRepo;

public IGenericRepository<IFoo> Article
{
    get
    {
        if (this.FooRepo == null)
        {
            this.FooRepo = new GenericRepository<Foo>(context);
        }
        return FooRepo;
    }
} 
```

或者，如果`GenericRepository<T>`实现，`IEnumerable`您可以使用以下`Enumerable.Cast<T>`方法：

```
public IGenericRepository<IFoo> Article
{
    get
    {
        if (this.FooRepo == null)
        {
            this.FooRepo = new GenericRepository<Foo>(context).Cast<IFoo>();
        }
        return FooRepo;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:23:11.173

您正在尝试将上下文隐式转换为 Foo 而不是它的接口。另外，上下文是否实现了 IFoo？如果是，这应该有效。

试试这个：

```
private Context context = new Context();
private GenericRepository<IFoo> FooRepo;

public GenericRepository<IFoo> Article
{
    get
    {
        if (this.FooRepo == null)
        {
            this.FooRepo = new GenericRepository<IFoo>(context);
        }
        return FooRepo;
    }
} 
```

# ruby-on-rails - 可以在 Heroku Rails 应用程序中为 /public 目录使用 Amazon S3 存储桶吗？

> ID：13865982
> 
> 赞同：0
> 
> 时间：2012-12-13T18:18:40.680
> 
> 标签：ruby-on-rails, heroku, amazon-s3

我试图弄清楚如何在可能的几个 Heroku dynos 之间共享一堆*（阅读：数千个）静态 HTML 文件。*

显然，测功机将具有单独的文件系统（更不用说它们是短暂的），因此那里似乎没有可行的解决方案。

生成这些页面将相当昂贵（并且可能会改变），所以我不想在每个测功机上频繁生成。

有没有办法设置 Rails/Heroku 在 S3 存储桶中查找 /public 目录？我不想将信息放入数据库，因为我想保持它完全静态并且可以通过 CDN 提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:53:21.987

在将数据写入 s3 方面，任何现有的 aws gem 都可以解决问题。如果我是你，我会看官方的 aws sdk 或雾。

使用雾，您可以使用类似的东西编写文件（假设`storage`是 Fog::Storage 对象）

```
storage.directories.new(:key => 'bucket_name').files.create(:key => 'filename', :body => data) 
```

data 可以是字符串或 io 对象，例如文件。

你可以有一个向控制器发送请求的路由

```
storage.directories.new(:key => 'bucket_name').files.head(file_name) 
```

查看文件是否存在。根据您的需要，您可能希望缓存文件存在的事实，这样您就不必每次都调用 s3。

# c# - ToggleSwitch - 切换到编辑，切换到保存

> ID：13865988
> 
> 赞同：0
> 
> 时间：2012-12-13T18:19:09.243
> 
> 标签：c#, xaml, windows-8, toggleswitch

我目前正在使用 C# 和 XAML 开发 Windows 8 应用程序，并且我决定实现一个 ToggleSwitch 以将某些文本框的 IsReadOnly 属性更改为**打开**或**关闭**。
如果**off**，文本框应该是 IsReadOnly = true，它们现在是。如果**on**，它们应该设置为 IsReadOnly = false，它们也这样做。

但是，ToggleSwitch 的主要功能是在将 ToggleSwitch 从**打开**（非只读）切换到**关闭**（只读）后将新输入保存在文本框中。默认情况下，该开关处于**关闭状态**，以确保文本框中的文本是安全的。

简而言之：
1\. 将 ToggleSwitch 从**off**切换到**on**以便能够编辑文本
2\. 编辑文本框中的文本，或者要更改的文本框
3\. 将 ToggleSwitch 从**on**切换到**off**，然后程序将保存新文本。

我有所有变量等，程序运行良好，除了 ToggleSwitch 不保存新信息，因为我对如何正确完成这件事一无所知......

谢谢，SOF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:31:45.223

你的意思是你想要一个全 XAML 的做事方式吗？不幸的是，DataTrigger 在 WinRT 中不可用 - 您可以尝试使用 VisualStateManager 或在更改的处理程序中为您的 ToggleSwitch 调用 Save() 方法。

# asp.net-mvc-3 - MVC3 Webgrid 格式化

> ID：13865991
> 
> 赞同：1
> 
> 时间：2012-12-13T18:19:18.760
> 
> 标签：asp.net-mvc-3, razor, pagination, webgrid

我正在使用 Webgrid 进行分页。有没有办法访问每个项目？例如，如果模型的项目符合特定条件，我想添加一些链接列。例如：

```
@grid.GetHtml(columns: grid.Columns(
     /If (item.name == "test")// statement to test condition here{
       grid.Column(format: (item) => Html.ActionLink("Delete", "Delete", new { name = item.name })),
       }
       else{
       grid.Column(format: (item) => Html.ActionLink("Detail", "Detail", new { name = item.name })),
        }
        grid.Column("FirstName"),
        grid.Column("LastName"),
        grid.Column("EmailAddress")
    ) 
```

这可以用 webgrid 完成吗？如果没有，还有什么其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:24:41.603

您应该能够在`format`参数本身内放置类似的条件。像这样：

```
@grid.GetHtml(columns: grid.Columns(
    grid.Column(format: item => 
        (item.name == "test") ?
            Html.ActionLink("Delete", "Delete", new { name = item.name })
            : Html.ActionLink("Detail", "Detail", new { name = item.name })
    ))
) 
```

请注意，如果您需要更复杂的场景，您还可以在`format`lambda 中放置一个匿名函数。它应该返回一个`MvcHtmlString`（如`ActionLink`等）：

```
grid.Column(format: item => 
{
    if (item.name == "test")
    {
        return Html.ActionLink("Delete", "Delete", new { name = item.name });
    }
    else
    {
        return Html.ActionLink("Detail", "Detail", new { name = item.name });
    }
}) 
```

# javascript - 提交表单后将用户的输入保留在文本框中

> ID：13865996
> 
> 赞同：1
> 
> 时间：2012-12-13T18:19:27.337
> 
> 标签：javascript, html, forms

我创建了一个注册表单和一个错误处理程序，用于处理用户在注册时犯的错误。提交表单后，可能会向用户显示错误。我正在尝试使用 javascript 来保留用户在文本字段中输入的数据，即使在他提交了表单之后，他也不必再次重新输入数据。对于表单，我使用了 HTML 和 CSS。让我感到困惑的是我将使用什么函数以及如何将它应用到表单的每个元素中！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:39:08.267

我找到了这个，我希望它有帮助！我假设您在 IIS 或类似的东西上运行它，否则，PHP 有一种非常友好的方式让您通过 $_POST 变量来执行此操作。

.aspx 文件：

```
<script type="text/javascript">
<!--
function setSessionVariable(valueToSetTo)
{
 __doPostBack('SetSessionVariable', valueToSetTo);
}
// -->
</script> 
```

aspx.cs 文件：

```
private void Page_Load(object sender, System.EventArgs e)
{
 // Insure that the __doPostBack() JavaScript method is created...
 this.GetPostBackEventReference(this, string.Empty);

 if ( this.IsPostBack )
 {
  string eventTarget = (this.Request["__EVENTTARGET"] == null) ? string.Empty :    this.Request["__EVENTTARGET"];
  string eventArgument = (this.Request["__EVENTARGUMENT"] == null) ? string.Empty : this.Request["__EVENTARGUMENT"];

  if ( eventTarget == "SetSessionVariable" )
  {
   Session["someSessionKey"] = eventArgument;
  }
 }
} 
```

然后稍后您将不得不让其中一个表单元素读取类似于

然后，您将必须使用 Javascript 加载 onpageload 或类似的东西，然后将 document.FormName.element.ElementName = Session 变量（或通过剖析 POST 数据设置的 var）。

抱歉，我对 PHP 更加熟悉 - 我希望这可以帮助您找到您正在寻找的答案！