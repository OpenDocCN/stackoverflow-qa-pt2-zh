# StackOverflow 问答 12947000-12947999

# postgresql - 在考虑时区的同时获取 PostgreSQL 中日期的记录数

> ID：12947000
> 
> 赞同：1
> 
> 时间：2012-10-18T04:13:31.637
> 
> 标签：postgresql, timezone, timestamp

鉴于我在 postgresql 中有一个带有 created_at 列的签入表，我将如何在考虑时区`'America/New_York'`（并考虑到夏令时）？

目前我正在执行以下查询，`psql (PostgreSQL) 9.1.6`但它似乎缺少一些在一天结束时添加的记录。

```
SELECT COUNT(*) AS count FROM checkins WHERE date(created_at) = '2012-10-17'; 
```

这是给定日期的所有记录的列表。上面的查询返回 10，这是不正确的。我应该回到13。

```
 id  | waiver_id |         created_at         |         updated_at         
------+-----------+----------------------------+----------------------------
 1391 |         1 | 2012-10-18 00:42:07.308453 | 2012-10-18 00:42:07.308453
 1390 |       286 | 2012-10-18 00:38:53.102685 | 2012-10-18 00:38:53.102685
 1389 |       590 | 2012-10-18 00:38:28.811605 | 2012-10-18 00:38:28.811605
 1388 |         7 | 2012-10-17 22:29:25.610774 | 2012-10-17 22:29:25.610774
 1387 |      1155 | 2012-10-17 22:01:40.647219 | 2012-10-17 22:01:40.647219
 1386 |      1154 | 2012-10-17 22:00:05.477698 | 2012-10-17 22:00:05.477698
 1385 |      1153 | 2012-10-17 21:57:59.698076 | 2012-10-17 21:57:59.698076
 1384 |      1152 | 2012-10-17 21:08:32.533203 | 2012-10-17 21:08:32.533203
 1383 |      1151 | 2012-10-17 21:07:42.500036 | 2012-10-17 21:07:42.500036
 1382 |       115 | 2012-10-17 21:04:03.075333 | 2012-10-17 21:04:03.075333
 1381 |         3 | 2012-10-17 20:30:13.741647 | 2012-10-17 20:30:13.741647
 1380 |       245 | 2012-10-17 20:29:53.808852 | 2012-10-17 20:29:53.808852
 1379 |      1150 | 2012-10-17 20:27:30.057269 | 2012-10-17 20:27:30.057269 
```

签入列和数据类型

```
 column_name |          data_type          
-------------+-----------------------------
 updated_at  | timestamp without time zone
 created_at  | timestamp without time zone
 waiver_id   | integer
 id          | integer 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:25:35.630

根据您的确切需求，该[**`AT TIME ZONE`**](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT)构造可以提供帮助。

如果您的列属于类型[`timestamp [without time zone]`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)，并且您的本地时间设置为与 EST 不同的时区，但您想要 EST 的相应日期，这将是您的查询：

```
SELECT count(*) AS ct
FROM   checkins
WHERE  (created_at AT TIME ZONE 'EST')::date = '2012-10-16'; 
```

不能肯定地说，您的问题缺少基本信息并留有解释空间。
PostgreSQL 时区处理的综合说明，并在[此相关答案](https://stackoverflow.com/questions/9571392/ignoring-timezones-altogether-in-rails-and-postgresql/9576170#9576170)中提供了示例和链接。

如果您希望自动涵盖**夏令时**，请使用**时区名称**而不是时区缩写。喜欢：

```
created_at AT TIME ZONE 'America/New_York' 
```

[有关此相关问题](https://stackoverflow.com/questions/12042506/time-zone-names-with-identical-properties-yield-different-result-when-applied-to)的更多信息。

# http - HTTP PUT 语义

> ID：12947001
> 
> 赞同：2
> 
> 时间：2012-10-18T04:13:32.787
> 
> 标签：http, rest, put

引用来自[http://www.garfieldtech.com/blog/put-up-with-put](http://www.garfieldtech.com/blog/put-up-with-put)的问题（这是针对 Drupal 开源项目的，这里没有代码，有点元）：

GET、HEAD 和 PUT 是幂等的，但是诸如日志记录或统计信息收集之类的“偶然”副作用是可以的，并且不会违反它们的幂等性。RFC 2616 对幂等性有这样的说法：

> 方法还可以具有“幂等性”的属性，因为（除了错误或过期问题）N > 0 个相同请求的副作用与单个请求相同。GET、HEAD、PUT 和 DELETE 方法共享此属性。（RFC 2616 第 9.1.2 节）

我不清楚“副作用是一样的”限定词。这是否意味着它可以是相同副作用的重复，或净 0 效应？

然后......我们一直允许向前修订，即创建一个尚未成为默认版本但将成为默认版本的新版本。这对幂等性和 PUT 有何影响？如果创建了新修订，则重复 PUT 不是无操作。相反，它将创建另一个修订版。规范说：

> 单个资源可以由许多不同的 URI 标识。例如，一篇文章可能有一个用于标识“当前版本”的 URI，它与标识每个特定版本的 URI 是分开的。在这种情况下，对通用 URI 的 PUT 请求可能会导致源服务器定义其他几个 URI

换一种方式：

`PUT /node/5 {title: "Hello world"}`

结果是：

*   `GET /node/5 {title: "Hello world"}`

*   `GET /node/5/revision/8 {title: "Hello world"}`

根据我对规范的阅读，这完全没问题。但是，什么：

`PUT /node/5 {title: "Bonjour le monde"}`

结果是：

*   `GET /node/5 {title: "Hello world"}`
*   `GET /node/5/revision/8 {title: "Hello world"}`
*   `GET /node/5/revision/9 {title: "Bonjour le monde"}`

这仍然是规范有效的行为吗？如果不是，这是否意味着任何使用 Create-Read-Archive-Purge (CRAP) 模型而不是 CRUD 或支持正向修订的系统本质上不是 PUT 兼容的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:34:59.453

创建版本资源作为副作用很好。重要的是客户端要求什么，而不是服务器决定做什么。

请参阅[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-21.html#idempotent.methods——](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-21.html#idempotent.methods)现在是时候停止查看 RFC 2616。

# ms-access - 使用 VBA 代码绑定或操作 Access 数据表

> ID：12947002
> 
> 赞同：1
> 
> 时间：2012-10-18T04:13:52.843
> 
> 标签：ms-access, ms-access-2007, vba

我将 Access 2007 用于原型应用程序。我有两个数据库 testUi.accdb（其中

包含我的所有表单）和 testDb.mdb（包含我的数据库）。现在我想在我的一个子表单中使用数据表。有人可以帮我解决这些问题吗？

1.  我可以手动构建没有表格的数据表吗？
2.  如何通过 VBA 代码使用 DAO 或 ADO 将数据与此数据表绑定
3.  是否可以使用 VBA 代码循环数据表？获取或设置每一行的值？
4.  如果以上是不可能的，那么在 Access 中使用像网格这样的数据表的替代方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:15:38.887

1) 数据表表单只能绑定到 DAO 记录集对象或 ADO 记录集对象。您可以通过设置 RecordSource 将它们隐式绑定到 DAO 记录集对象，也可以在代码中手动执行，如 #2 所示。您只能使用代码绑定到 ADO 记录集，然后数据表的某些默认选项（如过滤和排序）将不起作用。

2）我知道这过于简化了，但是......在表单的加载事件中：Set Me.Recordset = rs（rs 是您的记录集对象）

3) 您不能像在许多网格控件上那样循环插入行对象和数据的数据表。

4) 你可以使用微软的ActiveX 控件，例如Grid Control 或ListView Control。

您可能完成此操作的一种方法是使用“制造的 ADO 记录集”，然后将表单绑定到该记录集。这将使用我在#1 和#2 中列出的选项。

在任何情况下，Access 数据表表单都不会像许多网格控件那样动态添加和配置足够的单元格/列来显示数据。这意味着您需要事先在表单上有足够的文本框，然后使用代码将它们绑定到 DAO 或 ADO 记录集中的字段。您不需要的任何列都必须使用代码隐藏。标签标题必须使用代码填写，以便它们成为正确的列标题。简而言之，虽然数据表视图实际上非常强大，但它根本不是网格控件。

如果您曾经使用过 .NET，那么创建一个可以为您提供所需内容的 AddIn 或 dll 可能会相当简单（尽管不是微不足道的）。唯一的问题是 .NET 的 DataGridView 不能绑定到 DAO 或 ADO 记录集，因此您必须编写代码来获取 DAO 或 ADO 记录集并将该记录集“转换”为 ADO.NET DataTable。或者，您可以编写，以便您的 .NET 表单通过获取数据库和查询信息并使用它来检索所需数据来进行数据访问。

**Edit1**
为了回应您在下面的评论，这里有一些示例代码。我认为您需要创建一个显式记录集对象，您在下面的评论中没有这样做。

```
Option Compare Database
Option Explicit

Private Sub Form_Load()
    Dim db As DAO.Database
    Set db = OpenDatabase("E:\Access\Testdb.mdb")
    Dim rs As DAO.Recordset
    Set rs = db.OpenRecordset("Select * from tblMarket", dbOpenSnapshot)
    Set Me.Market1.Form.Recordset = rs
    Set rs = Nothing
End Sub 
```

# ruby-on-rails - Postgres 身份验证失败，没有 pg_hba.conf

> ID：12947005
> 
> 赞同：2
> 
> 时间：2012-10-18T04:13:57.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, macos, postgresql

我有一个应用程序似乎在 Postgres（对于 Heroku）上大部分运行得很好，但现在我正在尝试做一些更有趣的事情，比如用

```
RAILS_ENV=production script/delayed_job 
```

我收到此错误：

```
FATAL:  password authentication failed for user "<myusername>" (PG::Error) 
```

这很麻烦，因为

1.  作为一个 Rails 新手，安装 postgres 对我来说是一个巨大的、令人困惑的混乱，而且我从不记得设置密码。（我有 PGAdminII 的密码，但我知道那个，但不是这个）。当我进入我的 database.yml 文件并尝试将密码更改为我能想到的所有内容时，它不起作用。

2.  在互联网上四处寻找，看起来我应该对 pg_hba.conf 文件做点什么，但显然我没有任何地方。

3.  我已经在这个应用程序上工作了几个星期，我真的不想抹去我正在做的事情，所以我对 initdb'ing 在另一个目录中保持警惕。

4.  数据库的东西对我来说毫无意义。我试图弄清楚，但我认为我对这些东西太陌生了。而且我永远不知道从哪里开始解决问题。

这个问题有点含糊，因为我不知道要问什么具体问题——但有人可以帮我解决这个问题吗？比如：我怎么知道我的密码？我该如何处理 pg_hba.conf？我必须启动一个新数据库吗？

编辑——根据以下建议（谢谢！），我运行了“ps -A | grep postgres”和“ps -A | grep pg_ctl”。每个的输出分别为

```
85 ??         0:06.94 postgres: logger process    
  101 ??         0:32.04 postgres: writer process    
  102 ??         0:23.98 postgres: wal writer process    
  103 ??         0:06.70 postgres: autovacuum launcher process    
  104 ??         0:07.60 postgres: stats collector process    
 6337 ttys002    0:00.01 grep postgres 
```

和

```
6340 ttys002    0:00.00 grep pg_ctl 
```

不幸的是，这两者似乎都没有任何以-D开头的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:10:41.310

我可以在路径中找到我的 pg_hba.conf 文件：

/etc/postgresql/9.1/main/

# android - Android - 单击项目时设置文本视图

> ID：12947012
> 
> 赞同：4
> 
> 时间：2012-10-18T04:14:54.157
> 
> 标签：android, gridview, textview

我有一个gridview，每个项目都有一个文本视图。当我单击gridview 中的一个项目时，我希望SetText 用于文本视图。

它的方法：`setOnItemClickListener`

但我不知道如何控制文本视图。

有什么想法、例子或教程吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:22:28.727

您可以将 textview 从布局文件膨胀到 TextView 实例。然后，只需为其设置文本，如下所示：

```
TextView text = (TextView) findViewById(R.id.this_is_the_id_of_textview);
text.setText("test"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T04:42:44.323

您可以`click event`在方法内处理 TextView 的`getView`。如果它会单击，那么只需更改文本。

**编辑**

```
...getView(...) {
  TextView text = (TextView) convertView.findViewById(R.id.this_is_the_id_of_textview);
  text.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
      // TextView was clicked!
      // Change the text
   }
  }); 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T04:41:15.370

试试这个。

```
public void onItemClick(AdapterView<?> adapView, View view, int position, long arg3) {
    TextView textview=(TextView)view.findViewById(R.id.id_of_textview);
    textview.setText("write your text here");
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T04:48:20.393

假设您有 4 个网格：

```
String[] subtitle = {"Hotel", "Store","Restaurant","Station"}; 
```

为 gridview 设置 onItemClick ：

```
GridView gView = (GridView) findViewById(R.id.gridview);
gView.setAdapter(new ImageAdapter(this));
gView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            TextView ket =(TextView)findViewById(R.id.test);
            ket.setText(subtitle [position]);
               }
            }); 
```

因此，如果您在图像网格中按 / onclick，结果将根据位置显示数组字符串。

# javascript - 如何在 tinyMCE 中更改工具栏和按钮的大小

> ID：12947014
> 
> 赞同：5
> 
> 时间：2012-10-18T04:15:00.887
> 
> 标签：javascript, css, tinymce

我创建了一个编辑器页面，我正在尝试增加工具栏和按钮的大小，这就是我尝试过的 ![在此处输入图像描述](../Images/11706036229d9a98515cd07cb331432c.png)

我想要的在下面给出

![在此处输入图像描述](../Images/46c4a0574a31ad4935f708f264e08028.png)

有没有办法在 tinyMCE 中做到这一点，感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:11:46.397

默认情况下，TinyMCE 只接受**工具**栏中 20 x 20**像素**的图标。如果您想制作一个宽度超过 20 像素的自定义工具栏图标，您需要在 TinyMCE 中编辑 ui.css。编辑 ui.css ( **tiny_mce/themes/advanced/skins/default/ui.css** ) 并更改以下值：

```
.defaultSkin span.mceIcon, .defaultSkin img.mceIcon {display:block; width:20px; height:20px}
.defaultSkin .mceButton {display:block; border:1px solid #F0F0EE; width: 20px; height:20px; margin-right:1px} 
```

根据需要更改**宽度**和**高度**值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T11:45:34.427

**JQuery 方法：** 当您在控制台浏览器上执行以下指令时，

```
$('a[role=button]') 
```

您将有 20px 因此，您可以执行以下说明：

```
$('a[role=button],img.mceIcon,span.mceIcon').css({'width':'30px','height':'30px'})
$('img.mceIcon,span.mceIcon').css('margin','2px') 
```

# bluetooth - Aubtm 20 蓝牙模块工作

> ID：12947017
> 
> 赞同：0
> 
> 时间：2012-10-18T04:15:29.100
> 
> 标签：bluetooth

我正在使用**lemaubtm 20**。当我将它与**超级终端**连接时，它会收到 OK，然后当我输入**LLL**时，它也显示 OK。

我的问题是当我输入其他命令时，例如**AT**它给了我**错误**

如果有人有任何想法，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-29T06:04:19.427

连接 aubtm20 后，您会收到“ok”响应 .. 太好了，您已经完成了 pc 与您的 bt 模块“对话”所需的所有电子连接..！我完全知道你在哪里弄错了..在你输入任何命令之前按“LLL”连接到命令模式后，你必须遵循以下格式：<cr>atcommand..你可以通过在超级终端（对于 winxp）： ctrl+m（对于 <cr>） ctrl+j（对于 <lf>）

告诉我你得到了什么？

# clojure - 我可以获取命名空间的元数据吗？

> ID：12947018
> 
> 赞同：14
> 
> 时间：2012-10-18T04:15:37.463
> 
> 标签：clojure, namespaces, metadata

如果我将元数据放在命名空间声明中：

```
(ns 
^{:doc "Myspace documentation"}
myspace
) 
```

我能得到它吗 ？我试过了`(meta myspace)`，`(meta #'myspace)`但我无法得到它

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T04:34:05.500

如果您当前位于该名称空间中，则可以执行此操作

```
myspace=> (meta *ns*)
{:doc "Myspace documentation"} 
```

如果您不在命名空间中，则可以使用[find-ns](http://clojuredocs.org/clojure_core/clojure.core/find-ns)

```
foo=> (meta (find-ns 'myspace))
{:doc "Myspace documentation"} 
```

# bash - 用于从文件名或 XML 文档内容中提取唯一字符串的 Shell 脚本

> ID：12947028
> 
> 赞同：0
> 
> 时间：2012-10-18T04:17:09.293
> 
> 标签：bash, shell, xml-parsing, compare

使用 bash shell 脚本，我想获取文件的目录列表，并且只列出特定字符串的唯一实例。

字符串（例如`0082230958089736545`）可以在 2 个地方找到

1.  文件名（在第 4 部分，最长的数字）

    ```
    AVAILITY.VT04.00090.0082230958089736545.72732411.20121017.053604220 
    ```

2.  XML 文档内部

    ```
    <ENVELOPE>
    <HEADER>
    <ProviderTransID>0082230958089736545</ProviderTransID>
    </HEADER>
    <ENVELOPE> 
    ```

在文件名中，前 4 个部分（包括带有我要比较的字符串的部分）是相同的，而后 3 个部分会随着文件重试的过程日期和时间而变化。

字符串的每个实例最多可以重复 24 次。现在我必须手动确保我用眼睛抓住了字符串的每个实例，而且我并不总是相信那些 LOL。

我想生成一个没有重复的每个字符串的列表，然后将每个字符串分配给它自己的变量，以便稍后在脚本中使用。

只要它可以在 Bash shell 脚本中完成，我不在乎字符串是从文件名中提取的还是从 .XML 文档的内容中提取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:31:27.727

此方法仅访问文件名。将以下任一内容添加到您的 shell 脚本中：

```
IFS=$'\n'
array=($(awk -F "." '!a[$5]++ { print $5 }' <(find . -type f))) 
```

或者：

```
IFS=$'\n'
array=($(cut -d "." -f 5 <(find . -type f) | sort -u)) 
```

* * *

您可以使用数组切片访问数组的元素。例如，要访问第一个元素：

```
echo "${array[0]}" 
```

或者，您可以使用 for 循环遍历所有元素：

```
for i in "${array[@]}"; do
    echo "$i"
done 
```

# sql - SQL 保存到临时表不起作用

> ID：12947029
> 
> 赞同：0
> 
> 时间：2012-10-18T04:17:14.253
> 
> 标签：sql, join, sql-server-2008-r2, temp-tables

我有以下 sql 查询

```
 SELECT P.catalogid, 
       Sum(numitems)     numitems, 
       Sum(ignoreditems) ignoreditems, 
       P.supplierid, 
       P.cname, 
       P.cprice, 
       P.cstock, 
       P.ccode, 
       P.minstock, 
       P.pother4, 
       P.processedsucssessfully, 
       P.notprocessed, 
       Y.backorder 
INTO   ##tempt 
FROM   ##temporderstable P 
       JOIN supporder Y 
         ON P.catalogid = Y.catalogid 
GROUP  BY P.catalogid, 
          P.supplierid, 
          P.cname, 
          P.cprice, 
          P.cstock, 
          P.ccode, 
          P.minstock, 
          P.pother4, 
          Y.backorder, 
          P.processedsucssessfully, 
          P.notprocessed 
```

我正在尝试将连接结果保存到另一个临时表中，但是当我尝试从另一个查询访问新表时，它说无效的对象名称，这是将此查询结果保存到的正确方法`##tempt`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:24:02.833

尝试使用显式临时表声明，然后检查！

像这样

```
CREATE TABLE ##tempt (
supplierid int,
other fields ..) 
```

# java - 为什么我不能在 Java 中实例化扩展类的实例？

> ID：12947031
> 
> 赞同：2
> 
> 时间：2012-10-18T04:17:20.490
> 
> 标签：java, oop, inheritance, static, extends

我只是想做的是从 LinkedList 扩展一个类。这是我的代码：

```
 import java.util.*;

  class Test {

    public static void main( String [] args ) {

        OrderedLinkedList ol = new OrderedLinkedList();
    }

    public class OrderedLinkedList extends LinkedList<Integer> {

        public boolean add( Integer item ) {
            for (int i=0; i < size(); i++) {
                Integer itemOfList = get( i );
                if ( itemOfList.compareTo( item ) > 0 ) {
                    add( i, item );
                    break;
                }
            }
            return true;
        }
    }

} 
```

但是，我收到此消息的编译错误：

```
Test.java:7: non-static variable this cannot be referenced from a static context
        OrderedLinkedList ol = new OrderedLinkedList();
                               ^
1 error 
```

我相信我没有引用任何东西，而是实例化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T04:18:43.343

内部类具有对其外部类的隐式引用，除非标记为静态。

您需要将内部类标记为静态以避免这种情况：

```
public static class OrderedLinkedList extends LinkedList<Integer> { 
```

所以编译器抱怨内部类没有 Test 的实例，因为 main 是一个静态方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:18:34.350

1) 关闭测试类 2) 如果你在同一个文件中有两个类，主类应该是文件名，只有主类应该是公共的。

```
public class Test {

    public static void main( String [] args ) {

        OrderedLinkedList ol = new OrderedLinkedList();
    }
} 
```

然后

```
class OrderedLinkedList extends LinkedList<Integer> {

            public boolean add( Integer item ) {
                for (int i=0; i < size(); i++) {
                    Integer itemOfList = get( i );
                    if ( itemOfList.compareTo( item ) > 0 ) {
                        add( i, item );
                        break;
                    }
                }
                return true;
            }
        } 
```

如果内部类是您的要求，则将您的类设为静态类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:21:28.897

将这两个类保存在单独的文件中。但是，如果内部课程是您的目标，那么

按如下方式访问它

```
new Test().new OrderedLinkedList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:20:24.347

您的课程`OrderedLinkedList`不在静态上下文中。请更改 `public class OrderedLinkedList extends LinkedList<Integer>`为 `public static class OrderedLinkedList extends LinkedList<Integer>`并编译它应该做的。阅读静态和实例变量将有助于理解更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T04:21:58.513

尝试将 ol 声明为静态：

```
static OrderedLinkedList ol = new OrderedLinkedList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T04:23:55.203

你为什么要在另一个类中实现一个`public`类？`OrderedLinkedList``Test`

将您的内部类移动到它自己的文件中。它应该工作。

# jquery - 更改文本框时，Jquery .val() 方法不起作用，

> ID：12947034
> 
> 赞同：0
> 
> 时间：2012-10-18T04:18:06.620
> 
> 标签：jquery, asp.net-mvc-3

我一直在开发 MVC3 应用程序。这是我的编辑视图，我要编辑的文本框

```
@Html.TextBoxFor(model => model.NoOfDays, new { @class="text_box_size",@size = "5" }) 
```

我使用 Jquery 根据上述文本框的值更改其他文本框

```
$(function () {
            $("input#NoOfDays").change(function () {
                var value =$("#NoOfDays").val();

                validation();

            });
        }); 
```

更改文本框值后，我调用预先编写的验证函数。但它不起作用。总是返回 $("#NoOfDays").val(); 功能是旧值。不是新值。请任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:25:51.933

不完全确定您要做什么，因为您的问题可能需要一些工作，但是如果我对您的理解正确，您希望在您显示的示例发生更改时更新其他文本框的值。如果这是正确的，试试这个：

```
$(function () {
    $('input#NoOfDays').on('blur', function (event) {
        var value = $(this).val();

        $('#id_of_other_textbox').val(value);

        // ... the rest of your code ...

    });
}); 
```

`on`需要 jQuery 1.7 或更高版本。

HTH。

**编辑：**`on`使用（然后指定要处理的事件）之间的主要区别在于`click`它`on`是可用于处理多个事件的委托，而`click`（显然）仅侦听`onclick`事件。如果您想绑定到动态事件，它也很有用；绑定到静态父级，然后过滤到将匹配动态元素的选择器：

```
$(function () {
    $('#container-id').on('blur', 'input.dynamic-element-class', function (event) {

        // ... the rest of your code ...

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:41:07.560

提供更新的值作为参数：

```
$(function () {
            $("input#NoOfDays").change(function () {
                var value =$("#NoOfDays").val();    
                validation(value);    
            });
        }); 
```

如果您在 .change 中遇到问题，您也可以这样做：

```
$("input#NoOfDays").live('change keyup', function() {
    do your code here ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:13:39.960

而不是 onchange 尝试使用 onBlur 事件。

谢谢

考希克

# jquery - 菜单未显示在 html 页面中

> ID：12947035
> 
> 赞同：0
> 
> 时间：2012-10-18T04:18:12.080
> 
> 标签：jquery, css

创建了一个 jquery 菜单，但它只能在小提琴中工作，但不能在我制作[Html 菜单页面链接的 html 页面中工作](http://www.creativecorp.in/guru/test.html)

这是现在正在使用的小提琴

[小提琴链接](http://jsfiddle.net/RHVDT/32/)

当鼠标悬停在主页链接上时将显示一个子菜单，下一个鼠标悬停在子菜单中的一个链接上时的重现方式多子菜单显示。

如果在一个链接的右侧放置一个小箭头，也将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:27:59.837

```
SyntaxError: illegal character
http://www.creativecorp.in/guru/test.html
Line 19 
```

分号后的代码中似乎有一些隐藏的控制字符。使用允许您查看所有[隐藏字符](https://stackoverflow.com/questions/767545/does-notepad-show-all-hidden-characters)的编辑器。

# android - 如何杀死Android中未运行的进程

> ID：12947039
> 
> 赞同：7
> 
> 时间：2012-10-18T04:18:34.000
> 
> 标签：android, process, kill

有没有人遇到过这种情况？我在 Android 设备的设置对话框中强制停止应用程序。但是当我`ps`通过它使用命令时，`adb`它仍然显示在屏幕上。但是这个过程是不能通过的`activityManager.getRunningAppProcesses()`。这个过程甚至在我卸载这个应用程序后仍然存在，它是随机发生的。

因为我在我的应用程序中使用打开了一个端口`ServerSocket`，所以在我停止我的应用程序后无法释放该端口。下次我尝试打开我的应用程序时，它无法再次使用此端口。

我正在使用华硕 EeePad，这个问题似乎只发生在该设备上。

顺便说一句，流程管理器等任何第三方工具都无法获取流程。`pid`但是当我使用`ps`via`adb shell`列出所有进程时，它确实存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:20:23.920

由于没有代码..这里有一些提示：

1-你关闭你的连接？？？这将是保持港口繁忙的主要原因。

2-当您的应用程序将要暂停、停止或被销毁时更安全地处理套接字..您可以覆盖 onpause、onstop 或 ondesotry ..并在关闭应用程序之前释放端口。

3-在一个单独的线程中建立连接并实现一个计时器来检查你是否真的需要端口（我的意思是你的应用程序是否活着）并基于那个杀死/离开线程（连接）

4-在最坏的情况下..如果您可以控制连接的另一端（服务器，设备..），请尝试使您的解决方案更加灵活，例如首先检查端口范围，然后使用它们是否可用。

祝你好运

# sql - 如何将具有值的表从一个数据库复制到另一个数据库表？

> ID：12947045
> 
> 赞同：0
> 
> 时间：2012-10-18T04:19:13.420
> 
> 标签：sql, sql-server, sql-server-2005

我**在 test**数据库下创建表 abc。我**在 test1 下创建 bcd 表**。bcd，abc 表字段相同。abc 表有数据。现在，**如何将 abc 表值复制到 sql server 2005 中的 bcd 表**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:21:57.020

利用`INSERT INTO...SELECT`

```
INSERT INTO test1.dbo.bcd(col1, col2, col3)
SELECT col1, col2, col3
FROM test.dbo.abc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:23:59.317

这样做： SELECT * INTO DestinationDB..MyDestinationTable FROM SourceDB..MySourceTable

# iphone - 如何在 Windows 7 上编写 Iphone 应用程序？

> ID：12947047
> 
> 赞同：0
> 
> 时间：2012-10-18T04:19:34.297
> 
> 标签：iphone, ios

> **可能重复：**
> [如何使用 Windows 开发机器为 iPhone 开发？](https://stackoverflow.com/questions/22358/how-can-i-develop-for-iphone-using-a-windows-development-machine)

我想为 Iphone 编写一个应用程序，但我没有 Mac 机器。通常，我在笔记本电脑上设置了一个 Hackintos 来执行此操作。我们可以直接在窗口环境中执行此操作吗？哪些工具？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:29:08.463

不，您不能直接从 Windows 执行此操作。买个mac mini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:02:36.743

按照苹果的定义，这是不可能的。他们“要求”您使用 macintosh，但是，您可以在 Windows 机器上安装 VMWare 以运行 Mac OSX。这应该可行，但是我建议您只购买便宜的 Mac（二手，也许是 Mac Mini）。

# html - 将背景应用于 HTML 表单不起作用

> ID：12947048
> 
> 赞同：0
> 
> 时间：2012-10-18T04:19:47.507
> 
> 标签：html, css, forms

这是我的 HTML 表单的一部分：

```
<form style="background: red; display: inline-block;" method="POST" action="index.php"> 
```

`display: inline-block`样式被正确应用，但不是`background: red`。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:21:37.320

`background:red;`应该`background-color:red;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:29:44.247

使用内部 div：

```
<form style="padding:0;" method="POST" action="index.php">
  <div style="display: inline-block; background-color: red;">
    <!-- Stuff here -->
  </div>
</form> 
```

[JSFiddle 链接](http://jsfiddle.net/2zp87/)

另外，你用的是什么浏览器？

# java - 使用 SWT 选择表值到文本字段？

> ID：12947050
> 
> 赞同：0
> 
> 时间：2012-10-18T04:20:18.310
> 
> 标签：java, swt, tableviewer

我有`Table`( `TableViewer`) 包含`TableItem`带有值的 s。我有另一个`TextField`根据表列名映射的类。

现在我的问题是：当我选择表中的任何行时，该行中的值应该反映在文本字段中。在文本字段中，我可以编辑这些值并保存到表中。请让我知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:03:17.210

“巴兹”所说的都是正确的。如果需要编辑表格数据，则将表格列设为可编辑。但是，如果您想在控件中单独编辑表格行（如文本字段），则从*[TableViewer获取](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/IStructuredSelection.html)**[IStructuredSelection](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/IStructuredSelection.html)*并获取控件中的数据进行编辑。然后在您编辑后，从控件中取回数据并将其设置回表中。希望能帮助到你。

# ruby-on-rails - 如何使用 Wicked PDF 将图像文件转换为 PDF？

> ID：12947055
> 
> 赞同：-4
> 
> 时间：2012-10-18T04:21:17.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, wicked-pdf

现在我正在研究 Rails 3 版本。我想将图像文件转换为 PDF 格式。我正在使用 Wicked PDF gem，但它不起作用。请帮我。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:37:26.240

好吧，从提供的有限描述中，我可以对要做什么给出一个非常粗略的想法。Wicked PDF 带有一些[助手](https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf_helper.rb)。

您需要的是“wicked_pdf_image_tag”。要使用它，您只需像使用 rails image_tag 助手一样使用它。

```
<%= wicked_pdf_image_tag 'my_image.jpg' %>` 
```

将上面的行插入到您的 erb pdf 模板中。但是，如果您的图像位于 assest/images 文件夹以外的位置，则此帮助程序会出现问题。

如果你想解决这个问题，你可以继续做一个你自己的助手，把它放在应用程序助手中，你就可以开始了。例如：

```
 def custom_image_tag(img_name, options={})
 image_tag "file://#{Rails.root}/your/image/location/{img_name}", options
 end 
```

# iphone - iphone自动登录

> ID：12947057
> 
> 赞同：0
> 
> 时间：2012-10-18T04:21:22.153
> 
> 标签：iphone, ios5

我在我的应用程序中使用**了 NSUser Defaults**，通常它会在注册时**存储**用户数据，并在注销时**删除这些数据。**因此，当用户注册然后登录时，NSUser Defaults 中存储的数据使**自动登录**部分生效，即使用户关闭应用程序并再次打开它也是如此。

但问题是，当用户注销时，它要求他重新注册。我想要的是，如果用户注册，该信息应该永久**存储**，当他退出时，它不应该要求他再次注册，因为它应该**只清除登录页面的内存**，以便其他用户可以使用同一个应用程序。

我正在使用**iOS 5**。那么，我可以在我的应用程序中同时使用**SQLite**数据库（永久存储注册信息）和**NSUser Defaults**（清除登录页面的内存）吗？或者有任何替代解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:51:56.163

如果您使用自动登录系统并存储用户名和密码，您应该使用钥匙串，而不是 NSUSerDefaults

阅读[此处](https://developer.apple.com/library/ios/#documentation/security/conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html#//apple_ref/doc/uid/TP30000897-CH208-SW1)了解有关使用钥匙串的更多详细信息。

您还可以使用钥匙串来控制登录会话，我不确定，但我认为即使用户删除了他们的应用程序，详细信息也会保留在钥匙串中，以防他们重新安装应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:38:29.467

似乎您的应用程序处于脱机状态，并且多个用户可以在同一个应用程序（手机）中**注册**和**登录**，所以我认为最好的方法是将**注册**数据保存在**sqlite**数据库中（您可以使用**coredata**）和**NSUserDefaults中的****登录**信息 。因此，当用户注销时，您只需清除您的 NSUserDefaults 值。同样在登录时，您可以从数据库中检查用户是否存在，因为所有已注册的用户数据都存储在您的数据库中。此外，如果有用户可以删除他的帐户的功能，那么只需从数据库中清除该用户条目。希望这可以帮助....

# mysql - 个人用户查看通知的数据库模型

> ID：12947066
> 
> 赞同：0
> 
> 时间：2012-10-18T04:21:52.180
> 
> 标签：mysql, database, model

我正在为我的应用程序设置 mySQL 数据库的方式寻找最佳解决方案。

我的应用程序就像一个布告栏，有两个部分，“新通知”和“已查看通知”。

现在，当用户查看通知时，他们单击一个按钮，它会从 New 移动到 Seen。但只针对这个人。

每个人都可以查看所有通知 - 但不一定在相同的部分 - 因为用户将在不同时间查看它们并在不同时间查看它们。

我的猜测是所有通知都有一个表“通知”，以及一个名为“Seen”的单独表，其中包含“UserID”和“noticeID”行。这意味着对于每个通知，它都需要查阅“Seen”表来确定是否应该显示它。这是理想的还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:26:52.567

有一个带有 NoticeID 和 UserID 的表是正确的，我还要添加查看日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:29:23.717

您可以使用 3 张桌子

1.  用户
2.  通知
3.  SeenNotices（也许不是最好的名字）

在 SeenNotices 表中有三列 UserID、NoticesID、HaveSeen。have HaveSeen 列会告诉您用户是否已经看过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:43:38.323

您的思维方式应该可行，尽管随着时间的推移，您最终会得到一个非常大的“Seen”表，它是不可扩展的。一个简单的替代方法是改用“Unseen”表。这样，当人们查看通知时，表格会变小，您还可以删除非常旧的条目（旧通知可能不再相关，因此如果它们未向用户显示为“未见”则无关紧要）。

使用 'unseen' 表，您的查询将如下所示：

```
SELECT n.notice_id, n.notice_msg, IF(u.user_id, 'new', 'seen') AS status
FROM notice n
LEFT JOIN unseen u ON (u.user_id = $user_id AND n.notice_id = u.notice_id)
WHERE user_id = $user_id; 
```

# c# - DataGridView 行为

> ID：12947070
> 
> 赞同：1
> 
> 时间：2012-10-18T04:22:21.877
> 
> 标签：c#, .net, winforms, datagridview

因此，我正在尝试装配 DataGridView，以便在最后一行的最后一个单元格上按下回车键时，将添加一个新行。我似乎无法让它工作，因为当在最后一行按下回车键时，DataGridView 控件似乎没有响应任何键事件。有没有办法覆盖这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:39:24.230

```
protected override bool ProcessDataGridViewKey(KeyEventArgs e)
    {
        // Handle the ENTER key.  
        if (e.KeyCode == Keys.Enter)
        {
            // Add another if statement and use some logic to see if it is the cell you want then create your new row if true!
        }
        return base.ProcessDataGridViewKey(e);
    } 
```

更多信息：[DataGridView.ProcessDataGridViewKey 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.processdatagridviewkey.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:59:27.903

您可以像这样实现此行为：

```
 DataTable dt = new DataTable();
    int value = 0;
    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.AutoGenerateColumns = true;

        dt.Columns.AddRange(new DataColumn[]
            {
                new DataColumn("column1", typeof(string)),
                new DataColumn("column2", typeof(int)),
            });

        dt.Rows.Add("row " + value, value++);
        dataGridView1.DataSource = dt;
    }

    private void dataGridView1_KeyDown(object sender, KeyEventArgs e)
    {
        DataGridViewCell cell = dataGridView1.SelectedCells[0];
        if (e.KeyCode == Keys.Enter && 
            cell.RowIndex == dataGridView1.Rows.Count - 1 && 
            cell.ColumnIndex == dataGridView1.Columns.Count - 1)
            dt.Rows.Add("row " + value, value++);
    } 
```

这是一个数据绑定的网格视图，当然您可以将行添加到未绑定的数据网格视图本身。

# php - PHP中未定义的错误

> ID：12947072
> 
> 赞同：0
> 
> 时间：2012-10-18T04:22:25.267
> 
> 标签：php

我尝试将以下 htmlentities 用于文本框，但在文本框中出现以下未定义变量错误。我尝试将我的 php 更改为`<?= htmlentities [$_POST['invo_val'] ?>`但仍然收到相同的消息。知道我哪里出错了吗？

```
<td><input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php htmlentities($_POST['invc_no']) ?>"></td> 
```

错误说：`<br /><b>Notice</b>: Undefined index: invc_no in <b>E:\xampp\htdocs\ss\docs\addInvo.php</b> on line <b>394</b><br />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:23:50.070

尽量不要从未设置的帖子中获取数据

```
$invc_no = isset($_POST['invc_no']) ? $_POST['invc_no'] : '';

<td><input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php htmlentities($invc_no) ?>"></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:26:47.057

当您尝试访问未定义的变量时，PHP 会发出此通知。

在使用变量之前，您应该先检查变量是否存在（使用`isset`）。

例如：

```
<?php $value = isset($_POST['invc_no']) ? htmlentities($_POST['invc_no']) : ''; ?>

<td><input type="text" id="invc_no" name="invc_no" size="15" class="colr" value="<?php echo $value; ?>"></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:26:52.207

您必须首先检查是否设置了 post 变量。使用以下代码：

```
if(isset($_POST['invc_no'])
{
$inv_no=$_POST['invc_no'];
}
else
{
$inv_no='';
} 
```

现在`$inv_no`在你的代码中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:35:48.023

另一种选择是使用错误控制运算符抑制*通知：* [@](http://php.net/manual/en/language.operators.errorcontrol.php)

```
<?= @$_POST['invc_no']; ?> 
```

# php - 如何使用 PHP 获取 SSL 证书信息

> ID：12947078
> 
> 赞同：1
> 
> 时间：2012-10-18T04:22:57.010
> 
> 标签：php, ssl, curl, openssl

我想使用 PHP 收集 SSL 证书的所有必要信息：

->有效期

->指纹

->公钥

->以及所有其他参数

我尝试了通过 SO 或 PHP_manual 提供的其他解决方案，但无法获取所有必需的信息。任何帮助将不胜感激。

# maven - Ubuntu 上的 Netbeans + maven

> ID：12947079
> 
> 赞同：10
> 
> 时间：2012-10-18T04:23:03.890
> 
> 标签：maven, plugins, netbeans

我有一个正确设置的 Maven 项目，我在 Windows 上的 Netbeans 可以识别它并且可以正确构建它，但是我在 Ubuntu 上的 Netbeans 甚至不会将该项目视为 Netbeans 项目。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-02T15:29:46.473

Netbeans 中的 Maven 支持以官方插件的形式出现。Ubuntu 附带的版本几乎没有安装任何插件。要解决此问题，`Tools ▶ Plugins`请从那里导航并安装 Maven 插件。重新启动 IDE 后，应自动识别所有 Maven 项目。

如果您没有看到插件列表，请确保在`Tools ▶ Plugins ▶ Settings`选项卡中启用了存储库。至少检查 `Certified Plugins`和 `NetBeans Distribution`。`Available Plugins`在选项卡中重新加载目录。现在您应该看到所有可用插件的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:54:02.550

当我下载带有突触的 netbeans 时，我在 Xubuntu 上遇到了同样的问题。

我已经卸载了 synaptic 上的 netbeans 并在 netbeans 网站上安装了所有可用的 netbeans，它工作正常（最后一列）。我现在可以导入 Maven 项目。希望它可以帮助你。

[http://netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)

# c++ - _getch() 在 Windows Server 2012 上不起作用

> ID：12947080
> 
> 赞同：2
> 
> 时间：2012-10-18T04:23:07.093
> 
> 标签：c++, c, getch, windows-server-2012

我需要一个 DLL，以便用户可以键入密码而不是在屏幕上回显。所以我`_getch()`用来获取没有回声的字符，

```
 //get character with no echo
        ch = _getch(); 
```

并使用microsoft vs2005编译代码。
它适用于 windows server 2003/2008，但在新的 windows server 2012 上，它会将字符回显到屏幕上。
我的问题是为什么`_getch()`只在 windows server 2012 上回显字符？以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:38:20.643

使用 cin.get() 代替 getch() 。

# mysql - 从相关表中获取每组的最大行数

> ID：12947081
> 
> 赞同：1
> 
> 时间：2012-10-18T04:23:09.613
> 
> 标签：mysql, select, join

这是我第一次在这里提问。对学习很有帮助。

我正在尝试选择一个表并仅获取另一个表中对其特定组具有最大值的行。非常接近但不完全存在的最佳答案之一是这个（[SQL Select only rows with Max Value on a Column](https://stackoverflow.com/questions/7745609/sql-select-only-rows-with-max-value-on-a-column)），但它仅与单个表有关。我发现其他一些有多个表但不确定如何使用它。

我有一张桌子（简化）

`prodID, quantity, mach, etc`

然后我有一张桌子

`prodStatusID, prodID, userID, subStatusID`

带有子状态名称的最后一个表

`subStatusID, subStatusName`

我正在尝试获取包含所有第一个表和第二个表的表，但仅包含具有最大状态编号并包含正确状态名称的行。
我的另一个担忧现在可能无关紧要，但在一两年内，当这个东西开始真正填满时，就是性能。我不知道在 select 内有 select 不好，但如果我试图返回所有产品，那么它将为每个产品做一个查询。

只是为了更清楚。在第二个表 prodStatus 中可能有 2 行 prodID 为 4，但第一个的 subStatusID 为 1，第二个为 2。用户 ID 将不同。我想要返回的是第二行，因为它具有最高的状态编号，并且我需要与该行关联的 userID 和 statusName。

我已经用谷歌搜索了 2 天来得到这个答案，我看到了 1 条关于拍卖的信息，但即使在研究之后我也没有完全理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:26:45.033

`subStatusID`您需要创建一个子查询来获取每个的最大值`prodID`。

```
SELECT  a.*,     -- select only columns that you want to show
        c.*,     -- asterisks means all columns
        d.*
FROM    table1 a
        INNER JOIN
        (
            SELECT prodID, max(subStatusID) maxID
            FROM table2
            GROUP BY prodID
        ) b ON a.prodID = b.prodID 
        INNER JOIN  table2 c
            ON b.prodID = c.prodID AND
                b.maxID = c.subStatusID
        INNER JOIN table3 d
            ON c.subStatusID = d.subStatusID 
```

# java - Java TreeMap 比较器

> ID：12947088
> 
> 赞同：35
> 
> 时间：2012-10-18T04:23:59.500
> 
> 标签：java, comparator, treemap, sortedmap

我需要一个 TreeMap 的比较器。我应该在我的 TreeMap 的构造函数中匿名写这个吗？我怎么能写我的比较器。目前，Java 不喜欢我的代码（我可以匿名这样做吗？）：

```
SortedMap<String, Double> myMap = 
    new TreeMap<String, Double>(new Comparator<Entry<String, Double>>()
    {
        public int compare(Entry<String, Double> o1, Entry<String, Double> o2)
        {
            return o1.getValue().compareTo(o2.getValue());
        } 
    }); 
```

1.  我可以匿名进行上述操作吗？
2.  我还能怎么做？
3.  我想按值而不是键对 myMap 进行排序

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-18T04:30:43.700

您不能按值对[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)进行排序。

> 基于红黑树的 NavigableMap 实现。地图根据其键的自然顺序排序，或者通过在地图创建时提供的比较器进行排序，具体取决于使用的构造函数您需要提供`comparator`，`Comparator<? super K>`以便您的比较器应该在键上进行比较。

要对值进行排序，您将需要[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)。采用

```
SortedSet<Map.Entry<String, Double>> sortedset = new TreeSet<Map.Entry<String, Double>>(
            new Comparator<Map.Entry<String, Double>>() {
                @Override
                public int compare(Map.Entry<String, Double> e1,
                        Map.Entry<String, Double> e2) {
                    return e1.getValue().compareTo(e2.getValue());
                }
            });

  sortedset.addAll(myMap.entrySet()); 
```

给你举个例子

```
 SortedMap<String, Double> myMap = new TreeMap<String, Double>();
    myMap.put("a", 10.0);
    myMap.put("b", 9.0);
    myMap.put("c", 11.0);
    myMap.put("d", 2.0);
    sortedset.addAll(myMap.entrySet());
    System.out.println(sortedset); 
```

输出：

```
 [d=2.0, b=9.0, a=10.0, c=11.0] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-18T04:27:09.917

比较器应该只用于键，而不是整个条目。它根据键对条目进行排序。

您应该将其更改为如下内容

```
SortedMap<String, Double> myMap = 
    new TreeMap<String, Double>(new Comparator<String>()
    {
        public int compare(String o1, String o2)
        {
            return o1.compareTo(o2);
        } 
}); 
```

**更新**

您可以执行以下操作（在地图中创建条目列表并根据值对列表进行排序，但请注意这不会对地图本身进行排序） -

```
List<Map.Entry<String, Double>> entryList = new ArrayList<Map.Entry<String, Double>>(myMap.entrySet());
    Collections.sort(entryList, new Comparator<Map.Entry<String, Double>>() {
        @Override
        public int compare(Entry<String, Double> o1, Entry<String, Double> o2) {
            return o1.getValue().compareTo(o2.getValue());
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T22:20:48.583

您可以滑动键和值。例如

```
 String[] k = {"Elena", "Thomas", "Hamilton", "Suzie", "Phil"};
        int[] v = {341, 273, 278, 329, 445};
        TreeMap<Integer,String>a=new TreeMap();
        for (int i = 0; i < k.length; i++) 
           a.put(v[i],k[i]);            
        System.out.println(a.firstEntry().getValue()+"\t"+a.firstEntry().getKey());
        a.remove(a.firstEntry().getKey());
        System.out.println(a.firstEntry().getValue()+"\t"+a.firstEntry().getKey()); 
```

# java - 存储 DynamicLMClassifier (Lingpipe)

> ID：12947090
> 
> 赞同：0
> 
> 时间：2012-10-18T04:24:02.703
> 
> 标签：java, nlp

我正在使用 lingpipe 进行情感分析（遵循[此](http://alias-i.com/lingpipe/demos/tutorial/sentiment/src/PolarityBasic.java)代码），并且在训练分类器后尝试存储分类器。问题是存储后我无法加载它：

`java.lang.ClassCastException: com.aliasi.classify.LMClassifier cannot be cast to com.aliasi.classify.DynamicLMClassifier`

为了存储我使用的分类器：

```
AbstractExternalizable.compileTo(mClassifier, classifierFile); 
```

并加载它：

```
mClassifier = (DynamicLMClassifier<NGramProcessLM>) AbstractExternalizable.readObject(classifierFile); 
```

编辑：我之前应该读过 lingpipe 的 javadoc。要存储分类器并在之后加载它，`mClassifier`的类应该是`LMClassifier<NGramProcessLM, MultivariateEstimator>`. 因此它可以被初始化为 a[`DynamicLMClassifier<NGramProcessLM>`](http://alias-i.com/lingpipe/docs/api/com/aliasi/classify/DynamicLMClassifier.html#compileTo%28java.io.ObjectOutput%29)并且在训练阶段有必要将它转换为`DynamicLMClassifier<NGramProcessLM>`。在此之后，它可以被加载并用于对新对象进行分类。正如@mjv 所说，这使得分类器不再可训练。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:41:51.770

AbstractExternalizable.compileTo() 方法仅调用被序列化对象的 compileTo() 方法并将输出发送到指定的文件。

由于[**DynamicLMClassifier.compileTo()**](http://alias-i.com/lingpipe/docs/api/com/aliasi/classify/DynamicLMClassifier.html#compileTo%28java.io.ObjectOutput%29)方法会产生`LMClassifier`反序列化时得到的结果。LMClassifier 几乎是一样的东西，如果有的话，更高效更紧凑，主要区别在于它不可训练；因此，如果您打算在初始创建分类器后继续训练分类器，这只是一个问题。

如果您需要继续训练分类器，您可以单独序列化 LanguageModel（大多数 LanguageModel 实现 Compilable），并通过调用其构造函数并将反序列化模型列表传递给动态分类器来重新创建动态分类器。我从未尝试过这种方法，但我相信这是推荐的方法，特别是现在 LingPipe 对象的序列化已被重构。

# c# - 我可以写入控制台日志以使用 C# 调试 Web 应用程序吗

> ID：12947093
> 
> 赞同：17
> 
> 时间：2012-10-18T04:24:44.230
> 
> 标签：c#

我想在调试时在我的 ASP MVC3 应用程序中记录一些变量。我尝试了一些不同的东西，例如：

```
Debug.Log(topTitle + " " + subTitle); 
```

这似乎不起作用。如何从我的 C# 代码写入 VS2010 的控制台？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-18T04:31:59.487

要在 Visual Studio 中写入控制台窗口，请使用：

```
System.Diagnostics.Debug.WriteLine(topTitle + " " + subTitle); 
```

下面是它的工作截图：

![在此处输入图像描述](../Images/07118cf094f1f46f300e27a2e2f3615e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:38:22.140

您可以使用[Debug](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.aspx)类从您的应用程序发出调试信息。当您不从 Visual Studio 进行调试时，您甚至可以将[跟踪侦听](http://msdn.microsoft.com/en-us/library/4y5y10s7.aspx)器添加到您的文件以将输出重定向到文件或事件日志。`web.config`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:45:58.020

要在 Visual Studio 中写入控制台窗口，请使用：

```
System.Diagnostics.Debug.WriteLine(topTitle + " " + subTitle); 
```

或者您可以使用`Immediate window`. [即时窗口](http://msdn.microsoft.com/en-us/library/f177hahy.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:54:36.423

`System.Diagnostics.Debug`没有日志方法。您可以使用`System.Diagnostics.Debug.WriteLine` . 您可以在输出窗口中查看输出。然后确保您在调试模式下运行。

. 只有在调试模式下运行时才能看到调试信息。在 Release 模式下，Debug 语句将不可见（如果您希望这些语句在 Release 模式下可见，可以使用 Trace 而不是 Debug）。

请参考以下文章

[如何在 Visual C# 中进行跟踪和调试](http://support.microsoft.com/kb/815788)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-06T17:39:28.080

如果您在 Visual Studio 代码终端上运行 dotnet 项目，请使用语法`System.Console.WriteLine("Something")`.

干杯!

# facebook - 获取 Facebook 好友电子邮件地址

> ID：12947094
> 
> 赞同：-1
> 
> 时间：2012-10-18T04:24:52.867
> 
> 标签：facebook, facebook-graph-api

> **可能重复：**
> [如何获取 Facebook 好友的电子邮件？](https://stackoverflow.com/questions/4331666/how-to-get-facebook-friends-email)

在我的应用程序中，我必须检索用户的朋友电子邮件地址。我尝试了以下代码，但我没有得到朋友的电子邮件地址。

我的代码：

```
<div id="fb-root"></div> 
            <script> 
            window.fbAsyncInit = function() {
                FB.init({
                  appId  : 'xxxxxxxxxxxxxxx',
                  status : true, // check login status
                  cookie : true, // enable cookies to allow the server to access the session
                  xfbml  : true,  // parse XFBML
          oauth  :true
                });

  function login(){

        /* Show User's Name*/ 

        FB.api('/me/friends', function(response) {
            alert("user name:"+response.name);
            alert("user mailid:"+response.email);
           // document.getElementById('login').style.display = "block";
           // document.getElementById('login').innerHTML = response.name + " succsessfully logged in!";
        });

    //window.location="http://google.com"; // Redirect to Another Page.

    } 
```

但是在警报中没有显示邮件ID。我搜索了这个，我发现电子邮件不是公共财产，所以我可以做些什么来检索邮件ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:10:06.980

据我所知，朋友的电子邮件地址无法访问。

谢谢考希克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:48:28.857

首先初始化 FB Javascript SDK 如下。

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

上面的代码将初始化您的 FB SDK。现在在 JavaScript 中编写以下函数。有关详细信息，请参阅[此文档](https://developers.facebook.com/docs/reference/javascript/FB.login/)。

```
function initiateFB Login()
{
 FB.login(function(response) {
   if (response.authResponse) 
   {
     //Login Success if you want you can initiate request for friend list here only.
     FB.api('/me/friends/fields=id,username', function(resp)
     {
       /// Process the resp over here. This resp will be JSON response of friend request
     }
     );
   }
   else 
   {
     console.log('User cancelled login or did not fully authorize.');
   }
 });

} 
```

您可以获得用户名，即 FB 用户名。以下是对此的要求。

```
me/friends?fields=id,username 
```

此请求将为您提供以下格式的 JSON 响应。

```
{
  "data": [
    {
      "id": "FB_ID", 
      "username": "FB_USER_NAME"
    }, 
    {
      "id": "FB_ID", 
      "username": "FB_USER_NAME"
    }
]
} 
```

您可以解析它并获取用户名。

希望这可以帮助。

谢谢

考希克

# c# - 如何将对象存储在数据库中

> ID：12947095
> 
> 赞同：2
> 
> 时间：2012-10-18T04:24:52.523
> 
> 标签：c#, serialization

我有`Sock`数据对象，我想将此对象存储到数据库中；所以我以后可以取回它；这可能吗？

我知道在 Java 中我可以实现`Serializable`，那 c# 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:31:39.397

阅读有关[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)的信息。它将为您完成大部分工作。它非常易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:29:12.140

您可以使用 ADO.NET 来存储此对象。您可以在这里参考：http: [//www.codeproject.com/Articles/8477/Using-ADO-NET-for-beginners](http://www.codeproject.com/Articles/8477/Using-ADO-NET-for-beginners)

# java - 如何通过查询选择对象列表作为 Hibernate 组的构造函数参数的一部分

> ID：12947098
> 
> 赞同：3
> 
> 时间：2012-10-18T04:25:32.110
> 
> 标签：java, sql, hibernate, orm, group-by

我试图弄清楚如何选择对象列表作为 Hibernate group-by 查询的一部分。我知道如何以更难的方式做到这一点，但我很好奇是否有一些特殊的糖语法可以实现相同的目标。

基本上，我对这个结构有一个查询：

```
select com.myapp.domain.TagSummary(
   tag.id, tag.term, tag.description, tag.synonyms, count(user)
)
from User user
   join user.tags tag 
```

我想将其存储`tag.synonyms`为`List<Tag>`. 这可能吗，还是我需要查询叉积并在查询结果返回后手动进行分离？

或者，我最终真正想要的是用逗号分隔的同义词列表。因此，如果标签 is`spring`并且它具有同义词`spring-framework`and `spring-framework-3.1`，那么将 string 放入构造函数中会很棒`spring-framework, spring-framework-3.1`。那可能吗？

**编辑**：我了解到我可以使用 group_concat() 来实现功能的后半部分，但它仅在 MySQL 中可用。有没有办法让它在 hsqldb 中也可用？在 Spring 3.1 中，如何将此功能添加到 Hibernate？我知道我应该调用一些东西`Configuration`，但我不知道通过什么 bean 来访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:45:51.257

```
for (Object[]> result : query.list()) {    
    Tag tag = (Tag ) result[3];
    User user = (User) result[4];
} 
```

您可以从此链接获取更多信息

[https://derrickpetzold.com/p/in-and-group-by-count-hibernate/](https://derrickpetzold.com/p/in-and-group-by-count-hibernate/)

# sql-server-2008 - 不断增长的数据库大小的超时错误

> ID：12947106
> 
> 赞同：0
> 
> 时间：2012-10-18T04:26:22.490
> 
> 标签：sql-server-2008

我们有一个在生产环境下运行的应用程序。该应用程序有一个 Web 服务，它接收数据并将数据保存在 MS SQL 数据库中以供将来处理。我们的客户使用此 Web 服务来发送数据。我们每秒收到大约 80 条记录。

最初，应用程序运行良好，数据库大小为 1 GB。该应用程序在生产环境中运行了大约 6 个月，数据库大小已达到 15 GB。现在对数据库的所有操作都需要更多时间。由于数据库速度慢，客户端出现 Web 服务超时错误。

请提出一个解决方案，以便我们可以处理这样一个数据库大小逐渐增加的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:44:21.147

重建表上的索引。重建索引允许数据库服务器更快地搜索数据库。您应该定期重建索引，以便数据库引擎获得所需的“快速引用”以及时完成搜索。

# css - Google 自定义搜索样式问题

> ID：12947110
> 
> 赞同：0
> 
> 时间：2012-10-18T04:26:42.813
> 
> 标签：css, search, google-custom-search

我认为我的 Google 自定义搜索存在 CSS 问题。

出现的搜索框和结果未在我的自定义搜索中正确显​​示。搜索框被压扁，执行搜索时显示的“X”未显示在当前位置。

此外，当执行搜索时，URL 链接正在被“压缩”。蓝色下划线未显示，字体底部被截断。

非常感谢任何帮助。

[http://structurology.com/search](http://structurology.com/search)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:31:30.397

`.gs-result`，`.gs-title`行高太小，`1.2em`它`1.8em`会修复链接和下划线。

至于搜索框，它受到您的`th`, `td`,`caption`填充的影响。

将 X 的 .gscb_a 字体规则更改为以下内容：

```
font: 27px/18px arial,sans-serif; 
```

# linux - 在 unix 文件系统中指向彼此的软链接的行为？

> ID：12947117
> 
> 赞同：1
> 
> 时间：2012-10-18T04:27:14.643
> 
> 标签：linux, unix, ubuntu, operating-system, symlink

当我在一个目录中创建两个指向对方的软链接时

例如。 `abc->xyz`和`xyz->abc`

我无法在 ubuntu 中以图形方式打开该目录。当我单击该目录时，它立即打开并立即关闭。这可能是什么原因，除了删除那些软链接之外，如何对其进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:31:55.260

您可能指的是循环*符号链接*（或符号链接）。你会期待什么？任何[open(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)（或其他）系统调用都会失败，并且 errno 设置为

```
 ELOOP  Too many symbolic links encountered while traversing the path. 
```

您应该使用[unlink(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/unlink.2.html)系统调用删除其中一个链接，例如由`rm`命令调用；所以你可以打开一个终端，`cd`到包含那个烂摊子的目录，然后

```
 rm -v abc xyz 
```

# java - MSDOS 窗口中的 Java 程序错误：线程“主”java.lang.NumberFormatException 中的异常

> ID：12947118
> 
> 赞同：0
> 
> 时间：2012-10-18T04:27:18.543
> 
> 标签：java

我正在尝试用 Java 编写一个程序，该程序将接受用户的输入并转换为摄氏度或华氏度。所以用户将输入一些数字，一个空格，然后是一个 C 或 F。你的程序编译得很好，但是当我尝试测试它时，我收到以下消息：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: (whatever number, space, F/C I put in to test it0

    at java.lang.Integer.parseInt<Integer.java:492>
    at java.lang.Integer.parseInt<Integer.java:527>
    at Temp.Conv.main<TempConv.java:14> 
```

我猜 Java 不喜欢我尝试使用 Parse 在字符串中搜索整数。关于如何完成它的任何建议？

这里是代码：（你知道，我知道括号和空格是关闭的，但这个网站不允许我修复它）

```
public class TempConv
{
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);
    String reply = "y";
  while( reply.equalsIgnoreCase("y") )
    {
        System.out.println("Enter temp (ex. 70 F or 23 C): ");
        String CF = input.nextLine(); // inputs string
        int temp = Integer.parseInt(CF); // to get integers from string
        for (int i = 0; i < CF.length(); ++i)
        {
            char aChar = CF.charAt(i);
            if (aChar == 'F') // looking in string for F
            // go to f2c()
            {
                f2c(temp);
            }
            else if (aChar == 'C') // looking for C
            // go to c2f()
            {
                c2f(temp);
            }
        }
    System.out.println("Would you like to covert another temp? <y/n> ");
    reply = input.next();
    }
}
static void f2c(int j)
{
    int c = (j - 32)*(5/9);
    System.out.println(j + "F = " + c + "C");
}

static void c2f(int k)
{
    int f = (k*(5/9))+32;
    System.out.println(k + "C = " + f + "F");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:30:02.430

`Integer.parseInt`将尝试解析您传递的整个字符串。如果您通过例如`"75F"`，那么该方法将失败，并出现您看到的异常。

您需要进行自己的输入验证。如果您希望用户使用某种格式，则需要检查输入是否与格式匹配，然后提取与数字匹配的输入部分，并将其传递给`Integer.parseInt`：检查`C`or的最后一个字符`F`，并传递该字符之前的子字符串`Integer.parseInt`。将调用包装在一个`try/catch`块中，以便您可以继续询问/循环输入是否仍然格式错误。

您可以使用`Scanner.nextInt`从输入中获取数字，但如果您的输入看起来像`75F`，那么`Scanner.nextInt`将失败并显示`InputMismatchException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:40:26.390

```
String CF = input.nextLine(); // inputs string
int temp = Integer.parseInt(CF); // 
```

是有问题的。你怎么知道用户总是输入整数值？这里它试图解析例如 10C 或 10 F 这不是一个有效的整数。当你是`nextLine`方法时，它返回任何字符串，它不必是一个数字。在 try catch 中处理它，

```
try {
temp  = Integer.parseInt(CF);
} catch () {
 //handle
} 
```

但在此之前，您必须将 C 或 F 与原始字符串分开以进行整数解析。

# jquery - 使用 jquery 从动态 iframe 访问父文档

> ID：12947122
> 
> 赞同：0
> 
> 时间：2012-10-18T04:27:47.900
> 
> 标签：jquery, html, iframe, cross-browser

这个问题是这个问题的[延续](https://stackoverflow.com/questions/12928139/how-to-change-iframe-styles-from-iframe-itself-using-jquery)。我使用以下代码将动态附加`<iframe>`到文档中。

```
var _hf_iFrame = document.createElement("iframe");
_hf_iFrame.setAttribute("id", "_hf_iFrame");
_hf_iFrame.setAttribute("name", "_hf_iFrame");
_hf_iFrame.setAttribute("allow-transparency", true);
_hf_iFrame.setAttribute("style", "height: 354px; width: 445px; border: 0; top: 23%; position: fixed; left:0; overflow: show; background:transparent;");
document.body.appendChild(_hf_iFrame);
_hf_iFrame.setAttribute("src", "javascript:false");

var myContent = '<!DOCTYPE html>'
+ '<html><head><title>Helpflip</title><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script><script type="text/javascript" src="http://somedomain.com/js/core.js"></script></head>'
+ '<body style="margin: 0px;"></body></html>';

_hf_iFrame.contentWindow.document.open('text/html', 'replace');
_hf_iFrame.contentWindow.document.write(myContent);
_hf_iFrame.contentWindow.document.close(); 
```

加载后`<iframe>`，我正在尝试使用以下代码对其进行动画处理

```
$('#_hf_iFrame', top.document).animate({
      'margin-left': '-400px'
   }, 300).animate({
      'margin-left': '-380px'
   }, 150).animate({
      'margin-left': '-393px'
}, 100); 
```

这在 Firefox、Chrome 和 Safari 上运行良好。`Access Denied`IE 9在线抛出`$('#_hf_iFrame', top.document)`

跨域的问题还适用吗？

提前致谢。

# java - 从同一个 java 项目中的另一个类调用枚举值

> ID：12947125
> 
> 赞同：0
> 
> 时间：2012-10-18T04:27:58.837
> 
> 标签：java, class, enums

我在 Java 类的介绍中有一个作业，我们假设从文件中读取，对其进行数学运算，然后将其输出到另一个文件。我似乎已经关闭了文件 I/O 部分。我遇到的问题是在数学运算阶段。我们得到了一个名为 SimpleMath 的类，并假设从中调用方法。这是给定的类：

```
import java.text.DecimalFormat;

public class SimpleMath {

    // Operation enumeration
    public enum eOperation {
        PERIMETER, AREA
    }

    // Conversion enumeration
    public enum eScale {
        CELSIUSFAHRENHEIT, FAHRENHEITCELSIUS
    }    

    // computeHypotenuse method
    public static double computeHypotenuse(double adjacent, double opposite) {

        // Pythagorean theorem
        return Math.sqrt(adjacent * adjacent + opposite * opposite);
    }

    // solveQuadratic method
    public static double solveQuadratic(double a, double b, double c) {

        // Quadratic formula
        double minusRoot = (-b - Math.sqrt((b * b) - (4.0 * a * c))) / (2.0 * a);
        double plusRoot  = (-b + Math.sqrt((b * b) - (4.0 * a * c))) / (2.0 * a);
        return (plusRoot >= minusRoot ? plusRoot : minusRoot);
    }

    // convertTemperature method
    public static double convertTemperature(eScale scale, double degrees) {

        // Scale conversion
        if (scale == eScale.CELSIUSFAHRENHEIT)
            return (((9.0 / 5.0) * degrees) + 32.0);
        else
            return ((5.0 / 9.0) * (degrees - 32.0));
    }

    // geometryCircle method
    public static double geometryCircle(eOperation op, double radius) {

        // Basic geometry
        if (op == eOperation.PERIMETER)
            return (Math.PI * radius * 2.0);
        else
            return (Math.PI * radius * radius);
    }
} 
```

当我尝试从 SimpleMath 类调用方法 geometryCircle 和 convertTemperature 时，我遇到的问题出现在我的代码中。这是因为这两种方法在调用进入类的变量时都使用了枚举变量。事实证明，无论我似乎在做什么，我正在从事的 P5 类在类之间传递这些枚举变量时都会遇到问题。这是我到目前为止编写的 P5 代码：

```
 import java.io.File;
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.util.Scanner;

    import SimpleMath.eOperation;
    import SimpleMath.eScale;

public class P5 
{   

// These are the input variables used
    double Adjacent,Opposite,CoEff0, CoEff1, CoEff2, Fahrenheit,Radius;

    // These are the variables used for output values
    double Hypotenuse, Root, Celsius, Area;

    // This is the main method of class P5 main method that tells the other methods in this class where to find their variables.    
    public static void main(String[] args) 
    {
        // Instantiates the Class P5 into variable p5.
        P5 p5=new P5();

        // Initiates the readFile method while passing it the arguments that are stored in the class.
        p5.readFile(args[0]);

        // Initiates the computeMath method with no added variables.
        p5.computeMath();

        // Initiates the writeFile method and passes the desired name, which is stored as a part of the class, of the new file being written to. 
        p5.writeFile(args[1]);

    }

    /* This method tells the computer to read in a file,
     * which is specified in the RunConfigurations window under the Arguments tab in the file for this class,
     * and then it assigns the values pulled from the file to the appropriate input variables
     */
    private void readFile(String InputFile)
    {
        try
            {
                // This tells the computer how and where to look for the designated input file.
                Scanner ReadFile = new Scanner(new File(InputFile));

                // These set up variables so that all of the lines in the files can be assigned later.
                String Line1 = ReadFile.nextLine();
                String Line2 = ReadFile.nextLine();
                String Line3 = ReadFile.nextLine();
                String Line4 = ReadFile.nextLine();
                String Line5 = ReadFile.nextLine();
                String Line6 = ReadFile.nextLine();
                String Line7 = ReadFile.nextLine();

                // These are the variables, and here they are being assigned values from the file that is being read.
                Adjacent = Double.valueOf(Line1);
                Opposite = Double.valueOf(Line2);
                CoEff0 = Double.valueOf(Line3);
                CoEff1 = Double.valueOf(Line4);
                CoEff2 = Double.valueOf(Line5);
                Fahrenheit = Double.valueOf(Line6);
                Radius = Double.valueOf(Line7);

                // This lets the user see what values have been written to the variables, mostly for error checking purposes.
                System.out.println("Adjacent: " + Adjacent);
                System.out.println("Opposite: " + Opposite);
                System.out.println("CoEff0: " + CoEff0);
                System.out.println("CoEff1: " + CoEff1);
                System.out.println("CoEff2: " + CoEff2);
                System.out.println("Fahrenheit: " + Fahrenheit);
                System.out.println("Radius: " + Radius);

                // This closes the designated file and disconnects it from the stream.
                ReadFile.close();
            } 
        catch (IOException e)

            {
                System.out.println("Cannot Read File: " + InputFile);
                System.exit(0);
            }
    }

    // This method takes the values found in the ReadFile method and conducts mathematical operations on them.
    private void computeMath()
    {
        // This calls the 
        Hypotenuse = SimpleMath.computeHypotenuse(Adjacent,Opposite);
        Root = SimpleMath.solveQuadratic(CoEff0, CoEff1, CoEff2);       
        Celsius = SimpleMath.convertTemperature(eScale.FAHRENHEITCELSIUS, Fahrenheit);
        Area = SimpleMath.geometryCircle(eOperation.AREA, Radius);
    }

    /* This method takes all of the variables values determined throughout the program
     * and writes them to a file that is specified in the RunConfigurations window under
     * the Arguments tab for this class. 
     */
    private void writeFile(String OutputFile)
    {
        try
            {
                // This initiates the PrintWriter class which allows the program to write to a file.
                PrintWriter Output = new PrintWriter(new File(OutputFile));

                // These are the lines of text in which the program is writing in the designated file. 
                Output.println("Adjacent = " + Adjacent);
                Output.println("Opposite = " + Opposite);
                Output.println("Coefficent 0 = " + CoEff0);
                Output.println("Coefficent 1 = " + CoEff1);
                Output.println("Coefficent 2 = " + CoEff2);
                Output.println("Fahrenheit = " + Fahrenheit);
                Output.println("Radius Of Circle = " + Radius);

                // This closes the designated file and disconnects it from the stream.
                Output.close();

            }   
        catch(IOException e)

            {
                    System.out.println("Cannot Write File: " + OutputFile);
                    System.exit(0);
                }
        }

} 
```

因此，任何帮助都会很好，甚至可以推测为什么这段代码的行为方式会如此。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T04:34:32.973

只需在 from 中添加类名，`enums`如下所示。当他们重新宣布公开时，你应该没问题。

```
Celsius = SimpleMath.convertTemperature(
                                  SimpleMath.eScale.FAHRENHEITCELSIUS, Fahrenheit);
Area = SimpleMath.geometryCircle(SimpleMath.eOperation.AREA, Radius); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-24T07:18:34.333

要将一个包中声明的枚举值用于其他包，

1.  确保将枚举声明为公开。

    `public enum DATATYPE { STRING, LONG, BOOLEAN, INTEGER; }`

2.  在要访问值的包中导入枚举。

    `import Helper.DATATYPE;`

# c# - 加载应用程序时如何导航到 ConnectionSettingsTask 页面

> ID：12947139
> 
> 赞同：1
> 
> 时间：2012-10-18T04:29:43.123
> 
> 标签：c#, windows-phone-7

我为 Wifi 选项下创建了一个辅助磁贴`ConnectionSettingsTask`。

此辅助磁贴使用 MainPage`NavigatedTo`事件检查是否按下辅助磁贴，如果是，则导航到 WiFi 页面。

问题是，这不会通过认证过程。如果按下辅助磁贴，则必须导航到该页面，然后当按下硬件返回按钮时，必须显示开始屏幕。

我不知道如何以这种方式实际实现此要求，因为它`ConnectionSettingsTask`有自己的`Show()`方法并且我无法`Uri`直接访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:07:40.490

您可以使用[NavigationService.RemoveBackEntry](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.removebackentry.aspx)

这个想法是 - 您从导航历史记录中删除 MainPage，然后，通过后退按钮，用户可以按预期关闭应用程序。

[这里](http://jesseliberty.com/2011/07/13/removing-the-backstack-entry-in-windows-phone/)有一些例子。

# java - 用星号开头和结尾替换字符串忽略当前字符串中的括号

> ID：12947144
> 
> 赞同：0
> 
> 时间：2012-10-18T04:30:07.683
> 
> 标签：java, replace, case-insensitive

如何获得所需的输出？

输入字符串：

```
 " software Company(1920 of 1897 ) IBM region(sb2). region(sb3) 
```

要搜索的词 -

```
"software company(1920)" 
```

输出

*软件公司 (1920)* IBM.IBM 地区 (sb2)。地区(sb3)

简而言之，我必须找到一个短语并将相同的短语替换为起始和结束星号 (*)、忽略大小写和匹配精确世界

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:35:02.113

试试这个`BackReference`

```
 String inputString = " software Company(1920) IBM. software company (1920)"+
           "TCS. SOftware Company (1920) HSBC. SOFTWARE COMPANY (1920) INFOSYS ";
     String patternStr = "([[a-zA-Z]{2}ftware Company\\([0-9]{4}\\)]{24})";
     Pattern pattern = Pattern.compile(patternStr );
     Matcher matcher = pattern.matcher(inputString);
     System.out.println(matcher.replaceAll("*$1*")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:17:53.260

你可以这样做：

```
 String str = "software Company (1920) IBM. software company (1920) TCS. SOftware Company (1920) HSBC. SOFTWARE COMPANY (1920) INFOSYS";

    Pattern p = Pattern.compile("(?i)(software company \\(1920\\))");
    Matcher matcher = p.matcher(str);
    while(matcher.find()) {
        String curStr = matcher.group();
        str = str.replace(curStr,"*"+curStr+"*");
    }
    System.out.println(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:59:37.323

`CASE_INSENSITIVE`在编译模式时使用该功能

```
String input = "Software company (1988)";
    Pattern pattern = Pattern.compile("software company \\([1-9][0-9]{3}\\)",Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(input);
    if (matcher.matches())
    {
            System.out.println("*" + matcher.group(0) + "*");
    } 
```

`group(0)`返回整个匹配的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:39:24.563

我只有几年的 java 经验，所以如果我错了，请有人纠正我，但你不能使用这个：假设你的输入字符串是`String input`然后使用`input.indexOf([words to be searched])`. 一旦有了索引，您就可以简单地使用该`subString()`方法，将整个文本切成一堆小块，添加星号，然后将所有内容重新连接在一起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T04:39:26.617

使用正则表达式

对于.net

[http://msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.aspx)

对于java

[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

[http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

# node.js - 错误：无法安装“pre”版本的节点，请改用 --nodedir 标志

> ID：12947145
> 
> 赞同：11
> 
> 时间：2012-10-18T04:30:13.950
> 
> 标签：node.js, opencv, npm

我正在尝试为节点安装[opencv](https://github.com/peterbraden/node-opencv)。我认为这与opencv没有直接关系，而是与node-gyp有关。我成功地在我的 Mac 上安装了 opencv，但是当我尝试在 Ubuntu 服务器上执行完全相同的操作时，在执行“npm install opnecv”后出现以下错误：

```
npm http GET https://registry.npmjs.org/opencv
npm http 304 https://registry.npmjs.org/opencv

> opencv@0.0.7 preinstall /home/demo/node_modules/opencv
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: "pre" versions of node cannot be installed, use the --nodedir flag instead
gyp ERR! stack     at install (/usr/local/lib/node_modules/node-gyp/lib/install.js:69:16)
gyp ERR! stack     at Object.commands.forEach.self.commands.(anonymous function) [as install] (/usr/local/lib/node_modules/node-gyp/lib/node-gyp.js:56:37)
gyp ERR! stack     at getNodeDir (/usr/local/lib/node_modules/node-gyp/lib/configure.js:181:20)
gyp ERR! stack     at /usr/local/lib/node_modules/node-gyp/lib/configure.js:101:9
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:538:7)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:96:17)
gyp ERR! stack     at maybeClose (child_process.js:638:16)
gyp ERR! stack     at Process._handle.onexit (child_process.js:680:5)
gyp ERR! System Linux 3.2.0-29-generic
gyp ERR! command "node" "/usr/local/bin/node-gyp" "rebuild"
gyp ERR! cwd /home/demo/node_modules/opencv
gyp ERR! node -v v0.8.13-pre
gyp ERR! node-gyp -v v0.7.1
gyp ERR! not ok 
npm ERR! opencv@0.0.7 preinstall: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! 
npm ERR! Failed at the opencv@0.0.7 preinstall script.
npm ERR! This is most likely a problem with the opencv package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls opencv
npm ERR! There is likely additional logging output above.

npm ERR! System Linux 3.2.0-29-generic
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install" "opencv"
npm ERR! cwd /home/demo
npm ERR! node -v v0.8.13-pre
npm ERR! npm -v 1.1.63
npm ERR! code ELIFECYCLE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/demo/npm-debug.log
npm ERR! not ok code 0 
```

我还尝试下载源代码并执行“node-gyp rebuild”，结果相似：

```
demo@camera:~/src/node$ node-gyp rebuild
gyp info it worked if it ends with ok
gyp info using node-gyp@0.7.1
gyp info using node@0.8.13-pre | linux | x64
gyp ERR! configure error 
gyp ERR! stack Error: "pre" versions of node cannot be installed, use the --nodedir flag instead
gyp ERR! stack     at install (/usr/local/lib/node_modules/node-gyp/lib/install.js:69:16)
gyp ERR! stack     at Object.commands.forEach.self.commands.(anonymous function) [as install] (/usr/local/lib/node_modules/node-gyp/lib/node-gyp.js:56:37)
gyp ERR! stack     at getNodeDir (/usr/local/lib/node_modules/node-gyp/lib/configure.js:181:20)
gyp ERR! stack     at /usr/local/lib/node_modules/node-gyp/lib/configure.js:101:9
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:538:7)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:96:17)
gyp ERR! stack     at maybeClose (child_process.js:638:16)
gyp ERR! stack     at Process._handle.onexit (child_process.js:680:5)
gyp ERR! System Linux 3.2.0-29-generic
gyp ERR! command "node" "/usr/local/bin/node-gyp" "rebuild"
gyp ERR! cwd /home/demo/src/node
gyp ERR! node -v v0.8.13-pre
gyp ERR! node-gyp -v v0.7.1
gyp ERR! not ok 
```

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-06-26T19:52:38.117

我还可以通过将我的节点版本升级到稳定版本（例如，不是“预”版本 - 你的版本是`0.8.13-pre`）来解决这个问题：

```
sudo npm install -g n # install node version manager "n"
sudo n stable # install the latest stable version of node 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-21T10:33:30.157

使用`npm install --nodedir=/path/to/node opencv`, where`/path/to/node`是当前 nodejs 源代码的路径。

发生这种情况是因为 node-gyp 无法找到您的自定义构建的源代码，这里是关于它的讨论：[https ://github.com/TooTallNate/node-gyp/issues/86](https://github.com/TooTallNate/node-gyp/issues/86)

如果您具有超级用户权限，通常可以通过创建符号链接来解决此问题。

```
chmod a+r /path/to/node -R
cd /usr/lib
sudo ln -s /path/to/node node 
```

再说`npm install`一遍，它很可能会找到它。如果 /usr/lib/node 已经存在，不要这样做，因为其他软件可能依赖它。

# ios - 核心数据 - 检查是否为空 - iOS

> ID：12947151
> 
> 赞同：0
> 
> 时间：2012-10-18T04:30:42.047
> 
> 标签：ios, xcode, core-data, attributes

在给给定实体的核心数据中输入新数据时，如何检查特定属性的条目是否为空？我有三个属性名称，mail 和 mailedCustomer。我添加数据如下：

```
SalesPerson *data = (SalesPerson *)[NSEntityDescription         insertNewObjectForEntityForName:@"SalesPerson" inManagedObjectContext:self.managedObjectContext];
[data setName:name];
[data setEmail:userEmail];
 NSLog(@" mailed personel%@",data.mailedCustomer);
if([data.mailedCustomer != nil){
    NSLog(@"inside condition");
    [data setMailedCustomer:@"//"];
} 
```

这对我不起作用。我试图附加一些字符串。因此，当我第一次输入时，我需要将该属性设置为 @"//" 然后附加到进一步的调用中。

```
 NSLog(@" mailed personnel %@",data.mailedCustomer); 
```

上面的 NSLog 给了我：

```
 mailed personnel (null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:37:15.073

如果我得到你想要的，你的 if 语句是不正确的。您现在正在检查它是否不为零（意味着它具有某些值），然后将其重置为 //。如果你希望它是 // 然后附加值，你必须检查它是否为 nil 然后将它设置为 //：

```
if (!data.mailedCustomer) {
    NSLog(@"inside condition");
    [data setMailedCustomer:@"//"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T14:09:29.840

```
@interface NSObject (PE)
- (BOOL) isNull:(NSObject*) object;
- (BOOL) isNotNull:(NSObject*) object;
@end

@implementation NSObject (PE)

- (BOOL) isNull:(NSObject*) object {
    if (!object)
        return YES;
    else if (object == [NSNull null])
        return YES;
    else if ([object isKindOfClass: [NSString class]]) {
        return ([((NSString*)object) isEqualToString:@""]
                || [((NSString*)object) isEqualToString:@"null"]
                || [((NSString*)object) isEqualToString:@"<null>"]);
    }
    return NO;
}

- (BOOL) isNotNull:(NSObject*) object {
    return ![self isNull:object];
}

@end

if([self isNotNull:some object])
{
not null
}
else
{
null
} 
```

# asp.net - 我们如何使用 Paypal Payflow 专业帐户在同一网站返回金额

> ID：12947155
> 
> 赞同：1
> 
> 时间：2012-10-18T04:31:10.333
> 
> 标签：asp.net, paypal

我们如何使用 Paypal Payflow 专业帐户在同一网站返回扣除金额？

我正在为我的一个应用程序使用 Paypal Payflow 专业帐户。它进行交易但不返回扣除金额的详细信息。我第一次使用 Paypal Payflow 帐户。因此，如果有人在此之前做过此类工作，请与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:47:41.257

***嗨，我已经这样做了，任何需要解决方案的人请参见下文：***

```
protected NameValueCollection httpRequestVariables()
{
    var post = Request.Form;       // $_POST
    var get = Request.QueryString; // $_GET
    return Merge(post, get);
}

if (!IsPostBack)
    {
        string output = "";
        if (httpRequestVariables()["RESULT"] != null)
        {
            HttpContext.Current.Session["payflowresponse"] = httpRequestVariables();
            output += "<script type=\"text/javascript\">window.top.location.href = \"" + url + "\";</script>";
            BodyContentDiv.InnerHtml = output;
            return;
        }

var payflowresponse = HttpContext.Current.Session["payflowresponse"] as NameValueCollection;
            if (payflowresponse != null)
            {
                HttpContext.Current.Session["payflowresponse"] = null;

                bool success = payflowresponse["RESULT"] == "0";
                if (success)
                {
                    output += "<span style='font-family:sans-serif;font-weight:bold;'>Transaction approved! Thank you for your order.</span>";
                }
                else
                {
                    output += "<span style='font-family:sans-serif;'>Transaction failed! Please try again with another payment method.</span>";
                }

                output += "<p>(server response follows)</p>\n";
                output += print_r(payflowresponse);

                AdvancedDemoContent.InnerHtml = output;

public string print_r(Object obj)
    {
        string output = "<pre>\n";
        if (obj is NameValueCollection)
        {
            NameValueCollection nvc = obj as NameValueCollection;

            output += "RESULT" + "=" + nvc["RESULT"] + "\n";
            output += "PNREF" + "=" + nvc["PNREF"] + "\n";
            output += "RESPMSG" + "=" + nvc["RESPMSG"] + "\n";
            output += "AUTHCODE" + "=" + nvc["AUTHCODE"] + "\n";
            output += "CVV2MATCH" + "=" + nvc["CVV2MATCH"] + "\n";
            output += "AMT" + "=" + nvc["AMT"] + "\n";

        }
        else
        {
            output += "UNKNOWN TYPE";
        }
        output += "</pre>";
        return output;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:42:45.900

转到您的 PayPal 商家帐户--> 个人资料--> 销售偏好--> 网站支付偏好--> 网站支付的自动退货将单选按钮打开，默认它应该关闭。交易后确保价值存储在您的数据库。我希望这对你有帮助

# c++ - 你能指定下一个要执行的线程吗？

> ID：12947161
> 
> 赞同：0
> 
> 时间：2012-10-18T04:32:00.737
> 
> 标签：c++, multithreading, pthreads

我正在使用 c++ 并且很好奇我是否可以指定接下来要执行的线程。我覆盖了几个 pthread_mutex 函数，以便在多线程程序中设置执行顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:22:42.433

您不能直接指定要执行哪个线程，这是系统调度程序的工作。

你可以创建一个任务队列，每个线程都阻塞在任务队列中。当任务有一些任务时，可以通过同步原语通知线程执行。例如，pthread_cond_t。

# visual-studio-2010 - 从表中初始化下拉列表

> ID：12947164
> 
> 赞同：1
> 
> 时间：2012-10-18T04:32:41.787
> 
> 标签：visual-studio-2010, drop-down-menu, asp.net-mvc-4, asp.net-4.0

我是`MVC4`编程新手。最初遵循`NerdDinner`教程。现在我逐渐使场景复杂化。我想`DropDown`从表格的字段中填充一个列表，但不知道如何，虽然我从互联网上搜索了相关材料，但无法获得一些复杂的信息。

场景是有2个表`Software`和`Category`（代表软件的类别，无论是防病毒、图形等......）。

1.  in `Software`table，`catID`是与in表`int`有外键关系的形式。`catID``Category`
2.  在`Category`表中，`catID`并且`catTitle`是唯一的字段。

现在，在创建`Create`视图以添加/上传新的 s 时`Software`，我希望`catTitle`所有`catID`s 都显示在 a`Drop-Down List`中，用户将从中选择 Software 类别，但我不知道该怎么做......

我的`Create.cshtml`文件中使用的模型是

```
@model SoftwarePortal.Models.Software 
```

所以在这种情况下，争论的焦点是什么

```
@Html.DropDownListFor() 
```

我应该如何以及在哪里指定要获取`catIDs`和对应的 SQL stmt `catTitles`？（我正在使用Linq to SQL...）
如何访问未声明为当前视图模型的表...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:16:30.540

在控制器中假设您生成的数据库实体将是 SoftDBEntities

```
private SoftDBEntities se = new SoftDBEntities();
public ActionResult Create()
{
    //se.Categorys will get all categories
    //se.Categorys may be replace with a function which return records from Category table
    ViewBag.CatId= new SelectList(se.Categorys, "CatId", "CatTitle");
    return View();
} 
```

在 cshtml 文件中

```
@Html.DropDownList("CatId") 
```

如果上面的语句不起作用，那么试试这个

```
@Html.DropDownListFor(model.CatId,(SelectList)ViewBag.CatId,"CatId","CatTitle") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:01:36.493

哦，天哪！你相信我需要做的就是把里面的**字体转换**`ViewBag.Categories`成字体吗！！！因为它不会自动形成存储物品的形状...... 我太愚蠢了......`SelectList``@Html.DropDownListFor()`

# c++ - 第一个 c++ 库：我不确定在哪里引用和声明我的变量

> ID：12947165
> 
> 赞同：1
> 
> 时间：2012-10-18T04:32:42.017
> 
> 标签：c++, class, variables

我目前正在学习如何为我的 mbed 电子项目编写自己的库。到目前为止，我有两个文件 cfExtensions.cpp 和 cfExtensions.h 文件。我在 cfExtensions.h 构造函数中引用了我的变量，并在我的 cfExtensions.cpp 文件中更改了它们的值；但是我的 mbed c++ 编译器抛出：标识符“phMin”未识别。我的代码是：

文件：cfExtensions.h /* 文件：cfExtensions.h

```
Header file for cfExtensions Library.
*/

#ifndef __cfExtns_H
#define __cfExtns_H

#include "mbed.h"

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
//==================================
// Definitions
//==================================
#define CF_FILE_LOCATION  "local/settings.cf"     // File location local/settings.cf

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
//==================================
// cfExtension Class
//==================================
class cfExtensions
{
public:
//---------------------------
// Function Prototypes
//---------------------------
        cfExtensions();                         // Constructor, Initialisation tasks

        void loadConfigFile();                  // Loads config file defined in CF_FILE_LOCATION
        void checkConfigForFirstStart();        // Check if MBED startup is the very first startup
        void getPhMaxValueFromConfigFile();     // Get PH Max value from config file
        void getPhMinValueFromConfigFile();     // Get PH Min value from config file
        void getKeyAndValue();

//---------------------------
// Variables
//---------------------------
        volatile bool pingTicked;

        bool linkedWithBaseStation;

        char *sbNameKey;
        char sbNameValue[BUFSIZ];

        char *sbFirstStartKey;
        char sbFirstStartValue[BUFSIZ];

        char *sbUseBaseStationKey;
        char sbUseBaseStationValue[BUFSIZ];

        char *sbPhMaxKey;
        char sbPhMaxValue[BUFSIZ];

        char *sbPhMinKey;
        char sbPhMinValue[BUFSIZ];

        float phMax;
        float phMin;

//---------------------------
// Devices
//--------------------------- 

};

#endif 
```

文件：cfExtensions.cpp

> ```
> //================================
> // Get PH Min Value from CF
> //================================
> void getPhMinValueFromConfigFile() {    
>     /*
>      * Get a configuration value.
>      * Then attach the sbNameValue to SensorData json
>      */
>     if (cfg.getValue(sbPhMinKey, &sbPhMinValue[0], sizeof(sbPhMinValue))) {
>         phMin = atof(sbPhMinValue);
>     }
> } // End of getPhMinValueFromConfigFile 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:36:17.040

我认为它应该`void cfExtensions::getPhMinValueFromConfigFile() { }`在您的 cfExtensions.cpp 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:38:41.483

在 cpp 文件中将函数实现更改为

```
void cfExtensions::getPhMinValueFromConfigFile() {
  // etc ....
} 
```

这里的关键是在函数前面有 cfExtensions::。

# java - 使用 SSL 和证书的 SVNKit 身份验证

> ID：12947169
> 
> 赞同：4
> 
> 时间：2012-10-18T04:33:37.727
> 
> 标签：java, svn, svnkit

SVNKit 中的新手。我很难弄清楚如何在我的 svn 存储库中进行身份验证。

基本上，当我使用命令行 SVN 代码连接到我的存储库时，它会告诉我接受一些证书并请求我的用户名和密码。它也使用https。

但是使用我从 wiki 看到的代码，它说的是这样的，但这并不容易。

```
ISVNAuthenticationManager authManager =
  SVNWCUtil.createDefaultAuthenticationManager(name, password); 
```

我在某处阅读了有关创建您自己的身份验证提供程序的信息，但似乎找不到足够的代码来告诉我这是如何完成的。

如何使用 SSL 和证书对 svn 存储库进行身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:31:29.363

这取决于您的目的，您可以创建默认的身份验证管理器：

```
ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager(); 
```

它使用`~/.svn/`目录中的设置。

如果您希望身份验证管理器从控制台询问密码/密钥，请查看`SVNCommandEnvironment#createClientAuthenticationManager`实现。

但是您也可以通过仅枚举凭据来创建最简单的身份验证管理器（`~/.svn/`此选项不需要目录）：

```
ISVNAuthenticationManager authManager = new 
    BasicAuthenticationManager(new SVNAuthentication[] {authentication1, authentication2, ...}); 
```

所以您只需将`SVNSSLAuthentication`实例（包含正确的证书文件和密码）作为数组元素之一传递。SVNKit 将尝试这些身份验证直到成功。

# haskell - Scala 的蛋糕模式可以在 Haskell 中实现吗？

> ID：12947176
> 
> 赞同：20
> 
> 时间：2012-10-18T04:34:42.533
> 
> 标签：haskell, module, cake-pattern

使用 Scala 中的一些较新的语言特性，可以实现可组合的组件系统并使用所谓的 Cake Pattern 创建组件，Martin Odersky 在论文[Scalable Component Abstractions](http://lampwww.epfl.ch/~odersky/papers/ScalableComponent.pdf)和[最近的一次演讲](http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/Reflection-and-Compilers)中对此进行了描述。

Cake Pattern 中使用的一些 Scala 特性具有相应的 Haskell 特性。例如，Scala 隐式对应于 Haskell 类型类，Scala 的抽象类型成员似乎对应于 Haskell 的关联类型。这让我想知道蛋糕模式是否可以在 Haskell 中实现以及它会是什么样子。

蛋糕模式可以在 Haskell 中实现吗？在这样的实现中，Scala 特性对应于哪些 Haskell 特性？如果蛋糕模式不能在 Haskell 中实现，那么缺少哪些语言特性来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T03:48:59.457

奥列格在这里提供了一个非常详细的答案：http: [//okmij.org/ftp/Haskell/ScalaCake.hs](http://okmij.org/ftp/Haskell/ScalaCake.hs)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T11:26:51.527

以此为例[，](http://ofps.oreilly.com/titles/9780596155957/ApplicationDesign.html#DependencyInjectionInScala)在我看来，以下代码非常相似：

```
{-# LANGUAGE ExistentialQuantification #-}

module Tweeter.Client where

import Data.Time
import Text.Printf
import Control.Applicative
import Control.Monad

type User = String

type Message = String

newtype Profile = Profile User

instance Show Profile where
  show (Profile user) = '@' : user

data Tweet = Tweet Profile Message ZonedTime

instance Show Tweet where
  show (Tweet profile message time) =
    printf "(%s) %s: %s" (show time) (show profile) message

class Tweeter t where
  tweet :: t -> Message -> IO ()

class UI t where
  showOnUI :: t -> Tweet -> IO ()
  sendWithUI :: Tweeter t => t -> Message -> IO ()
  sendWithUI = tweet

data UIComponent = forall t. UI t => UIComponent t

class Cache t where
  saveToCache :: t -> Tweet -> IO ()
  localHistory :: t -> IO [Tweet]

data CacheComponent = forall t. Cache t => CacheComponent t

class Service t where
  sendToRemote :: t -> Tweet -> IO Bool
  remoteHistory :: t -> IO [Tweet]

data ServiceComponent = forall t. Service t => ServiceComponent t

data Client = Client UIComponent CacheComponent ServiceComponent Profile

client :: (UI t, Cache t, Service t) => t -> User -> Client
client self user = Client
  (UIComponent self)
  (CacheComponent self)
  (ServiceComponent self)
  (Profile user)

instance Tweeter Client where
  tweet (Client (UIComponent ui)
                (CacheComponent cache)
                (ServiceComponent service)
                profile)
        message = do
    twt <- Tweet profile message <$> getZonedTime
    ok <- sendToRemote service twt
    when ok $ do
      saveToCache cache twt
      showOnUI ui twt 
```

对于虚拟实现：

```
module Tweeter.Client.Console where

import Data.IORef
import Control.Applicative

import Tweeter.Client

data Console = Console (IORef [Tweet]) Client

console :: User -> IO Console
console user = self <$> newIORef [] where
  -- Tying the knot here, i.e. DI of `Console' into `Client' logic is here.
  self ref = Console ref $ client (self ref) user

instance UI Console where
  showOnUI _ = print

-- Boilerplate instance:
instance Tweeter Console where
  tweet (Console _ supertype) = tweet supertype

instance Cache Console where
  saveToCache (Console tweets _) twt = modifyIORef tweets (twt:)
  localHistory (Console tweets _) = readIORef tweets

instance Service Console where
  sendToRemote _ _ = putStrLn "Sending tweet to Twitter HQ" >> return True
  remoteHistory _ = return []

test :: IO ()
test = do
  x <- console "me"
  mapM_ (sendWithUI x) ["first", "second", "third"]
  putStrLn "Chat history:"
  mapM_ print =<< localHistory x

-- > test
-- Sending tweet to Twitter HQ
-- (2012-10-21 15:24:13.428287 UTC) @me: first
-- Sending tweet to Twitter HQ
-- (2012-10-21 15:24:13.428981 UTC) @me: second
-- Sending tweet to Twitter HQ
-- (2012-10-21 15:24:13.429596 UTC) @me: third
-- Chat history:
-- (2012-10-21 15:24:13.429596 UTC) @me: third
-- (2012-10-21 15:24:13.428981 UTC) @me: second
-- (2012-10-21 15:24:13.428287 UTC) @me: first 
```

然而，这是最简单的情况。在 Scala 中，您有：

*   具有抽象值和类型成员的类（提醒 ML 函子和依赖记录，如在 Agda 中）。

*   路径相关类型。

*   自动类线性化。

*   *这*和*超级*。

*   自我类型。

*   子类型化。

*   隐含的。

*   ...

它只是，嗯，与你在 Haskell 中的不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T07:14:52.413

有几种解决方案。“显而易见”的方法是为给定的类型类（例如，对于游戏）提供多个可以自由组合的实例`Loader`，`Player`但`GUI`在我看来，这样的设计更适合 OO 语言。

如果你思考并认识到 Haskell 中的基本构建块是函数（D'oh！），你会得到这样的结果：

```
data Game = Game
  { load    :: String -> IO [Level]
  , player1 :: Level -> IO Level
  , player2 :: Level -> IO Level
  , display :: Level -> IO ()  
  }  

play :: Game -> IO () 
```

使用这种设计，很容易用机器人代替人类玩家。如果这变得太复杂，使用`Reader`monad 可能会有所帮助。

# ruby-on-rails - 为什么 rake db:seed 没有按预期运行？

> ID：12947177
> 
> 赞同：0
> 
> 时间：2012-10-18T04:35:12.017
> 
> 标签：ruby-on-rails, rake, seeding

我正在尝试以一种非常特殊的方式播种我的数据库。这是我的 /db/seeds.rb 文件：

```
# creates a school in a local database.
test_school = School.find_or_create_by_email(school_name: "Test School One", client_user_name: 'admin', client_password: 'Secretz1', fname: 'John', lname: 'doe', client_short_code: "72727", email: 'testemail@testemail.com')

# creates a user in local database
test_user = User.find_or_create_by_email(email: test_school.email, password: test_school.client_password, full_name: test_school.full_name, user_role: 'admin', school_id: test_school.id )

# creaate school via API
results = School.create_via_api test_school 

if results[0].to_i == 0
  test_school.update_attribute :client_number, results[2].split(" ").first
  SchoolMailer.registration_confirmation(test_user, test_school).deliver
else
  test_school.destroy
  test_user.destroy
end

# an array of keyword topics
keywords_ary = ["lunch", "schoolout?", "thenews", "holidays", "buses", "help"]
# create a keyword object for each topic in the above array
keywords_ary.each do |n|
  message = ""
  Array(1..5).each do |i|
    message += "#{i}. Test for @ts#{n}\n"
  end
  Keyword.find_or_create_by_user_id(
    name: "@ts#{n} test", keyword: "@ts#{n}", 
    message1: message, 
    user_id: test_user.id
    )
end

# create each of the keywords via API
test_user.keywords.each do |keyword|
  results = Keyword.create_on_avid keyword, test_user
  if results[0].to_i == 0
    #save the api id to the local database
    keyword.update_attribute :keyword_id, results[2]
  else
    keyword.destroy
  end
end 
```

所以有什么问题？好吧，当我检查我的数据库时，只创建了第一个关键字，关键字的 message1 字段如下所示：

```
 --- - 1 - 2 - 3 - 4 - 5 
```

什么时候应该是这样的：

```
1\. this is a test for @tslunch
2\. this is a test for @tslunch
3\. this is a test for @tslunch
4\. this is a test for @tslunch
5\. this is a test for @tslunch 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:36:49.287

```
 Keyword.find_or_create_by_user_id 
```

这看起来像罪魁祸首，因为你正在做 find_or_create_by_user_id

所以第一次它会创建一个具有该 user_id 的对象，之后每次它都会获取相同的对象。

可能会将其更改为

```
Keyword.find_or_create_by_message1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:38:06.370

我发现了我的方式的错误。在我的`keywords_ary.each`循环中，用于`Keyword.find_or_create_by_user_id`创建我的每个关键字。问题是，每个关键字都有相同的user_id。所以在找到或创建第一个关键字后，循环退出。

我将其更改为`Keyword.find_or_create_by_user_id_and_name`，不，它工作正常。

# doctrine-orm - 忽略 DQL 中返回的表达式

> ID：12947178
> 
> 赞同：1
> 
> 时间：2012-10-18T04:35:17.883
> 
> 标签：doctrine-orm, dql

我有一个 DQL 查询，其中包含一个`SELECT`仅用于排序的表达式：

```
SELECT u, (u.orderTotal / u.orderCount) AS orderAverage
FROM User u
ORDER BY orderAverage 
```

我必须使用这个技巧，因为到目前为止，[Doctrine 不支持按表达式排序](https://groups.google.com/d/msg/doctrine-user/Fpkf7hwaIFY/2dLiyyj1ujUJ)。

这很好用，预计由于此问题范围之外的原因，我只想`u`由[getResult()](http://www.doctrine-project.org/api/orm/2.3/class-Doctrine.ORM.AbstractQuery.html#_getResult)返回：

```
[0] => object(User)
[1] => object(User) 
```

而不是包含`u`and的嵌套数组`orderAverage`：

```
[0] =>
       [0] => object(User)
       ['orderAverage'] => float
[1] =>
       [0] => object(User)
       ['orderAverage'] => float 
```

我以为我在某处读到有一个 DQL 关键字用于在结果中不返回表达式，但我未能在文档中找到它。它会是这样的：

```
SELECT u, IGNORE (u.orderTotal / u.orderCount) AS orderAverage
FROM ... 
```

那存在吗，还是我做梦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:14:35.467

好的，我终于设法在[EBNF 文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#select-expressions)中找到它。

正确的关键字是`HIDDEN`, 之后是`AS`:

```
SELECT u, (u.orderTotal / u.orderCount) AS HIDDEN orderAverage 
```

# c# - .NET 4.5 Framework 上不存在 ConfigurationManager 类

> ID：12947179
> 
> 赞同：33
> 
> 时间：2012-10-18T04:35:18.003
> 
> 标签：c#, .net, .net-4.5

我刚开始使用 C# 的 .NET Framework 4.5。我正在使用 Windows 窗体应用程序。我已经完成了所需的导入，例如：

```
using System.Configuration; 
```

但实际上 ConfigurationManager 类似乎没有退出。我曾尝试改用 ConfigurationSettings，但 Visual Stdio 告诉我它已过时并被 ConfigurationManager 取代！

这是与问题相关的代码块：

```
Int32.Parse StartingMonth = int.parse(ConfigurationManager.AppSettings["StartingMonthColumn"]); 
```

那么，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-18T06:20:46.957

1.  确保添加`System.Configuration.dll`到项目中。如果您已经添加了它，请尝试删除并重新添加它。
2.  将光标放在上面，`ConfigurationManager`然后按`ctrl`+ `.`，看看它给你的建议。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-07-13T17:14:45.307

右键单击项目->添加->参考...->程序集->框架选择System.Configuration（选中）应该可以解决问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-01T02:40:28.007

ConfigurationManager 存在于 System.Configuration 命名空间中，但它需要在您的项目中使用 System.Configuration 程序集。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T07:22:22.100

这是因为参考，我只是在添加参考后重新启动了项目，它工作正常:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-12T13:00:43.023

如果您无法找到参考这里是正确的路径

"C:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a"

转到添加参考并选择浏览器选项并转到上面的链接。然后你可以添加 System.Configuration.dll

# c - 当有人通过信号处理输入“CTRL-C”时，在我的 shell 的历史缓冲区中输出最后 10 个命令

> ID：12947182
> 
> 赞同：0
> 
> 时间：2012-10-18T04:36:00.033
> 
> 标签：c, shell, process, fork, history

我试图跟踪我的 shell 中的最后 10 个命令，并让`ctrl`+`c`信号处理程序输出它们的数组。

显然这个数组只包含 10 个元素，并且总是输出 10；这只是暂时的，直到我得到正确的功能。

当我在 shell 历史记录中有多个命令时，它会以奇怪的顺序多次输出数组，其中一些输出比其他输出多。我猜这是由子进程也调用处理程序引起的，但我现在不知道该怎么做。.

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>
#include <string.h>
#include <errno.h>

#define MAX_LINE 80 /* 80 chars per line, per command, should be enough. */
#define BUFFER_SIZE 10

char buffer[BUFFER_SIZE][MAX_LINE];
//char buffer[BUFFER_SIZE];
int pos = 0;
int handleEvent = 0;

void handle_SIGINT()
{
   int i = 0;
   while (i < BUFFER_SIZE)
   {
      //printf("%d\n", i);
      write(STDOUT_FILENO, buffer[i], strlen(buffer[i]));
      printf("\n");
      i++;
   }
}

void setup(char inputBuffer[], char *args[],int *background)
{
    int length, /* # of characters in the command line */
    i,      /* loop index for accessing inputBuffer array */
    start,  /* index where beginning of next command parameter is */
    ct;     /* index of where to place the next parameter into args[] */

    ct = 0;

    /* read what the user enters on the command line */
    length = read(STDIN_FILENO, inputBuffer, MAX_LINE);  

    start = -1;
    if (length == 0)
        exit(0);            /* ^d was entered, end of user command stream */
    if ((length < 0) && (errno !=EINTR)){
        perror("error reading the command");
    exit(-1);           /* terminate with error code of -1 */
    }

    /* examine every character in the inputBuffer */
    for (i = 0; i < length; i++) { 
        switch (inputBuffer[i]){
        case ' ':
        case '\t' :               /* argument separators */
            if(start != -1){
                args[ct] = &inputBuffer[start];    /* set up pointer */
                ct++;
            }
            inputBuffer[i] = '\0'; /* add a null char; make a C string */
            start = -1;
            break;

        case '\n':                 /* should be the final char examined */
            if (start != -1){
                args[ct] = &inputBuffer[start];     
                ct++;
            }
            inputBuffer[i] = '\0';
            args[ct] = NULL; /* no more arguments to this command */
            break;

        case '&':
            *background = 1;
            inputBuffer[i] = '\0';
            break;

        default :             /* some other character */
            if (start == -1)
                start = i;
        } 
    }    
    args[ct] = NULL; /* just in case the input line was > 80 */
} 

int main(void)
{
    char inputBuffer[MAX_LINE]; /* buffer to hold the command entered */
    int background;             /* equals 1 if a command is followed by '&' */
    char *args[MAX_LINE/2+1];/* command line (of 80) has max of 40 arguments */

    /* set up the signal handler */
    struct sigaction handler;
    handler.sa_handler = handle_SIGINT;
    //handler.sa_flags = 0;
    //sigemptyset(&handler.sa_mask);
    sigaction(SIGINT, &handler, NULL);

    while (1){            /* Program terminates normally inside setup */
        background = 0;
    printf("COMMAND->");
        fflush(0);
        setup(inputBuffer, args, &background);       /* get next command */

    strcpy(buffer[pos], inputBuffer);
    pos++;

        int pid;
    int returnValue;

    pid = fork(); /* for a child process */

    if (pid < 0) { /* check if error occurred with child process */
      fprintf(stderr, "Fork Failed");
      return 1;
    } 
    else if (pid == 0) { /* child process */
      execvp(args[0], args);
    } 
    //else {
      if (background == 0){ /* check if the parent should wait */
        //wait(&returnValue);
        waitpid(pid, NULL, 0);
      }
   //}

    /* the steps are:
     (1) fork a child process using fork()
     (2) the child process will invoke execvp()
     (3) if background == 0, the parent will wait, 
    otherwise returns to the setup() function. */
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:17:05.177

我至少看到两件事：

*   如果出现错误（例如，如果您尝试运行未知命令），execvp 将返回，因此您需要在 execvp 之后添加 return 语句。
*   read 不会读取字符串 char 的结尾，因此您需要 inputBuffer[length] = '\0';

此外，当您按 Ctrl+CI 时，认为您也从 read() 返回并将 inputBuffer 的最后一个值添加到您的历史记录中。

希望这可以帮助。

# java - 加载应用程序后在地图上绘制圆圈

> ID：12947188
> 
> 赞同：0
> 
> 时间：2012-10-18T04:36:28.027
> 
> 标签：java, android, android-mapview

**背景：-**

在我的应用程序中当前正在发生的事情 - 每当我打开应用程序时，在 android 屏幕的上半部分，它会绘制一个地图，而在 android 屏幕的下半部分，它会显示一个列表视图。然后，一旦位置发生变化，它就会以当前位置为圆心绘制一个圆形，并在当前位置（圆心）显示图像。一切都很好，直到这里 -

**问题陈述：-** 我想要的是当用户打开我的应用程序时，圆圈应该立即在谷歌地图上绘制（目前没有发生，它只在位置改变时绘制圆圈），而不是等待位置改变和在圆心上没有任何图像，然后如果位置发生变化，则以当前位置为圆心并在圆心处绘制带有图像的圆。

这是我下面的代码，它满足了我在背景中提到的场景 - 我怎样才能让这个代码以我想要的方式工作？希望我的问题足够清楚。任何建议将不胜感激。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapView = (MapView) findViewById(R.id.mapView);
    listView = (ListView) findViewById(R.id.mylist);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    
    locationListener = new GPSLocationListener(mapView);
    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            35000, 
            10, 
            locationListener);

    mapView.setStreetView(true);
    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(14);
} 
```

我向 Overlay 发送请求以绘制圆圈的位置更新类

```
 private class GPSLocationListener implements LocationListener {

    MapOverlay mapOverlay;

    public GPSLocationListener(MapView mapView) {

    }

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            GeoPoint point = new GeoPoint(
                    (int) (location.getLatitude() * 1E6), 
                    (int) (location.getLongitude() * 1E6));

            mapController.animateTo(point);
            mapController.setZoom(15);

            if (mapOverlay == null) {
                mapOverlay = new MapOverlay(this,android.R.drawable.star_on);
                List<Overlay> listOfOverlays = mapView.getOverlays();
                listOfOverlays.add(mapOverlay);
            }
            mapOverlay.setPointToDraw(point);
            mapView.invalidate();
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

绘制圆圈的类。

```
 class MapOverlay extends Overlay {
    private GeoPoint pointToDraw;
    int[] imageNames=new int[6];
    private Point mScreenPoints;
    private Bitmap mBitmap;
    private Paint mCirclePaint;

    public MapOverlay(GPSLocationListener gpsLocationListener, int currentUser) {
        imageNames[0]=currentUser;
        mCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mCirclePaint.setColor(0x30000000);
        mCirclePaint.setStyle(Style.FILL_AND_STROKE);
        mBitmap = BitmapFactory.decodeResource(getResources(),imageNames[0]);
        mScreenPoints = new Point();
    }

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);
        if (pointToDraw == null) {
            return true;
        }
        mScreenPoints = mapView.getProjection().toPixels(pointToDraw, mScreenPoints);
        int totalCircle=5;
        int radius=40;
        int centerimagesize=35;
        for (int i = 1; i <= totalCircle; i ++) { 
            canvas.drawCircle(mScreenPoints.x,mScreenPoints.y, i*radius, mCirclePaint); 
        } 
        canvas.drawBitmap(mBitmap, (mScreenPoints.x-(centerimagesize/2)),(mScreenPoints.y-(centerimagesize/2)), null);
        super.draw(canvas,mapView,shadow);
        return true;
    }

} 
```

**更新-**

我是这样做的，但它给我抛出了 Null Pointer Exception`location.setLatitude`任何人都可以帮助我为什么它会抛出 NPE 吗？

```
private Location location;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

    locationListener = new GPSLocationListener();

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            0, 
            0, 
            locationListener);
    mapView = (MapView) findViewById(R.id.mapView);
    listView = (ListView) findViewById(R.id.mylist);
    mapView.setStreetView(true);
    mapView.setBuiltInZoomControls(true);

    mapController = mapView.getController();
    mapController.setZoom(15);

    GeoPoint initialPoint = new GeoPoint( (int) (36.778261* 1E6), (int) (-119.417932 * 1E6));
    double latitude = initialPoint .getLatitudeE6() / 1E6;
    double longitude = initialPoint .getLongitudeE6() / 1E6;

     // Null Pointer Exception right here.
    location.setLatitude(latitude);
    location.setLongitude(longitude);
    locationListener.onLocationChanged(location);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:57:16.230

`locationListener.onLocationChanged(your_initial_location)`在活动结束时调用`onCreate();`

否则，它会等待第一个有效更新来运行设置绘制点的代码。

添加：

在 onCreate() 中：

```
....

mapView.setStreetView(true);
mapView.setBuiltInZoomControls(true);
mapController = mapView.getController();
mapController.setZoom(14);

GoePoint initialPoint = new GeoPoint(some initial point);
double latitude = initialPoint .getLatitudeE6() / 1E6;
double longitude = initialPoint .getLongitudeE6() / 1E6;

Location location = new Location("initialLocation");
location.setLatitude(latitude);
location.setLongitude(longitude)
locationListener.onLocationChanged(location);
} 
```

# .htaccess - htaccess 301 重定向除 /admin 之外的所有内容

> ID：12947190
> 
> 赞同：1
> 
> 时间：2012-10-18T04:36:51.203
> 
> 标签：.htaccess, redirect, http-status-code-301

因为这个，我已经挠了半个小时了。我不知道我做错了什么，可能只是在我的眼皮底下，但我就是看不到。这是我的`.htaccess`

```
 RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
  RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]

  RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
  RewriteCond %{REQUEST_URI} !^/admin [NC]
  RewriteRule ^(.*)$ http://newsite.com/$1 [R=301,L] 
```

当我访问`example.com/admin`时，我仍然被重定向到`newsite.com/admin`. 有人可以请教吗？谢谢！

更新：这是我目前在 mod_rewrite 上的所有内容：

```
 RewriteRule ^googleabcdef12345.html - [L] 
  RewriteCond %{HTTP_HOST} ^sample1\.no$ [NC]
  RewriteRule ^(.*)$ http://www.newsample1.no/$1 [L,R=301]

  RewriteCond %{HTTP_HOST} example\.com$ [NC]
  #RewriteRule admin - [S=1]
  RewriteRule ^(.*)$ http://newsite.com/$1 [R=301,L]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

这是一个drupal网站顺便说一句。我尝试了 QUERY_STRING 而不是 REQUEST_URI 但仍然没有运气。

# json - JqG rid 在完成树网格和 json 绑定时对数据进行排序

> ID：12947191
> 
> 赞同：1
> 
> 时间：2012-10-18T04:37:01.190
> 
> 标签：json, jqgrid

当 JqGrid 是具有相邻模型的树网格并且使用 json 绑定数据时，是否可以在 JqGrid 中进行排序！我想对不同列上的数据进行排序，它不是树列。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:46:34.397

你没有发布详细信息。所以我不得不猜测。TreeGrid 排序的典型问题是错误填充`parent`树的根元素的字段。例如，该值应该是`null`或`"null"`不是`""`。有关详细信息，请参阅[答案](https://stackoverflow.com/a/7332627/315935)。

# javascript - History.pushState URL + 滚动效果

> ID：12947198
> 
> 赞同：4
> 
> 时间：2012-10-18T04:38:28.013
> 
> 标签：javascript, jquery, html

我正在使用 History.pushState 将我的站点 URL 更改为 /name，它正在工作，但页面不会滚动到它应该滚动到的站点位置。

**索引.php：**

```
<nav>
    <ul>
        <li><a href="#work">Work</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#services">Services</a></li>
        <li>Blog <!-- Coming Soon... --> </li>
        <li><a href="#contact">Contact</a></li>
    </ul>
</nav>

<article class="content" id="work"> 
...

<article class="content" id="about">
... 
```

**jquery.page.js：**

```
_saveState = function( chapter ) {

    if (History.getState().url.queryStringToJSON().chapter !== chapter) {
        var page;

        if (chapter == 1)
            page = "/work";

        if (chapter == 2)
            page = "/about";

        if (chapter == 3)
            page = "/services";

        if (chapter == 4)
            page = "/blog";

        if (chapter == 5)
            page = "/contact";

        else 
            page = '?chapter=' + chapter;

        History.pushState(null, null, page)
    }
},

...

_goto = function( chapter ) {

    var chapter = chapter || History.getState().url.queryStringToJSON().chapter,
    isHome = ( chapter === undefined ),

    $article    = $( chapter ? '#' + 'chapter' + chapter : '#' + 'introduction' );

... 
```

当用户单击导航菜单中的链接时，我如何使页面跳转到它假定的位置，如我一直在关注的**[教程中所见？](http://tympanus.net/codrops/2012/04/02/responsive-horizontal-layout/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:08:34.770

它们在您的 javascript 中没有问题，但问题出在您的 html 中，请更正 content-wrapper div 它没有包含它喜欢的文章

```
<div class="content-wrapper"></div><article></article>... 
```

它应该是

```
<div class="content-wrapper"><article></article>....</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:03:43.473

`History.getState().url.queryStringToJSON().chapter`正在尝试`chapter`在您的 URL 中查找查询参数，该参数已不存在，因为您更改了 URL 格式。

在没有使用 $.History 的情况下，在我看来，您可以尝试使用以下内容与 URL 进行比较：

```
if (History.getState().hash.replace(/^\/|\/$/g, '') !== chapter) { ... }
// replace(/^\/|\/$/g, '') will remove a leading and/or trailing slash '/' 
```

但请注意，如果您的站点不在根目录（例如`http://example.com/foo/bar/portfolio`）上，您仍然需要处理 URL 的其余部分，因为`History.getState().hash`将返回您`/foo/bar/portfolio`而不是`/portfolio`.

*（附带说明：如果您发现自己重复写作`else if`，请尝试使用 a[`switch`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)代替。）*

# c# - 组合框在 WPF 中启动时不显示 SelectedIndex

> ID：12947201
> 
> 赞同：0
> 
> 时间：2012-10-18T04:38:35.180
> 
> 标签：c#, .net, wpf, combobox

我正在开发一个需要使用组合框的 WPF 应用程序。我需要在组合框中添加项目并在 xaml 中设置 selectedindex。我已成功完成，但运行应用程序时未出现 SelectedIndex。这是我的代码：

**XAML：**

```
<ComboBox Grid.Column="0" ItemsSource="{Binding FrequencyList}" SelectedItem="{Binding SelectedFrequencyList, Mode=TwoWay}" SelectedIndex="0" Name="comboBox1" />
<ComboBox Grid.Column="2" ItemsSource="{Binding ModesList}" SelectedItem="{Binding SelectedModesList, Mode=TwoWay}" SelectedIndex="2" Name="comboBox2" /> 
```

**视图模型：**

```
public ObservableCollection<string> _FreqList;
_FreqList = new ObservableCollection<string>();
public ObservableCollection<string> _CodecModes;
_CodecModes= new ObservableCollection<string>();

public ViewModel()
{
        _FreqList.Add("8 kHz");
        _FreqList.Add("11.025 kHz");
        _FreqList.Add("12 kHz");
        _FreqList.Add("14.7 kHz");
        _FreqList.Add("16 kHz");
        _FreqList.Add("22.050 kHz");
        _FreqList.Add("24 kHz");
        _FreqList.Add("29.4 kHz");
        _FreqList.Add("32 kHz");
        _FreqList.Add("44.100 kHz");
        _FreqList.Add("48 kHz");
        _FreqList.Add("88.2 kHz");
        _FreqList.Add("96 kHz");
        _FreqList.Add("undef");

        _CodecModes.Add("None");
        _CodecModes.Add("A Loop");
        _CodecModes.Add("DSP");
        _CodecModes.Add("I2S");            
}

public ObservableCollection<string> FrequencyList
    {
        get { return _FreqList; }
        set
        {
            _FreqList = value;
            OnPropertyChanged("FrequencyList");
        }
    }

    /// <summary>
    /// Selected Frequency List
    /// </summary>
    private string _selectedFrequencyList;
    public string SelectedFrequencyList
    {
        get { return _selectedFrequencyList; }
        set
        {
            _selectedFrequencyList = value;
            int Listvalue = FrequencyList.IndexOf(_selectedFrequencyList);
            int ListFinalVal = Listvalue + 1;
            SelectedFreq(ListFinalVal);
            OnPropertyChanged("SelectedFrequencyList");
        }
    }

    public void SelectedFreq(int Select)
    {            
        int cmd = 0;
        int numBytes = 0;           

        cmd = ((0x8F00 & 0x7F00) | (m_slot & 0xFF));
        sendBuf[numBytes++] = Convert.ToByte(Select - 1);
    }

    public ObservableCollection<string> ModesList
    {
        get { return _CodecModes; }
        set
        {
            _CodecModes = value;
            OnPropertyChanged("ModesList");
        }
    }

    /// <summary>
    /// Selected Modes List
    /// </summary>
    private string _selectedModesList;
    public string SelectedModesList
    {
        get { return _selectedModesList; }
        set
        {
            _selectedModesList = value;
            int Modevalue = ModesList.IndexOf(_selectedModesList);
            int ModeFinalvalue = Modevalue + 1;
            SelectedMode(ModeFinalvalue);
            OnPropertyChanged("SelectedModesList");
        }
    }

    public void SelectedMode(int Select)
    {
        int cmd = 0;
        int numBytes = 0;           

        cmd = ((0x8F00 & 0x7F00) | (m_slot & 0xFF));
        sendBuf[numBytes++] = Convert.ToByte(Select - 1);
    } 
```

即使我已经`SelectedIndex=1`在我的 xaml.xml 中设置了。当我运行应用程序时，组合框有一组项目，但不显示选定索引。我在这里错过了什么吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:51:15.423

如果具有初始空值，则设置`SelectedIndex=1`与您的绑定冲突。`SelectedItem`

`SelectedItem`您可以更改to的绑定模式，`OneWayToSource`以便视图模型中的值不会用于设置所选项目：

```
<ComboBox Grid.Column="0" ItemsSource="{Binding FrequencyList}" SelectedItem="{Binding SelectedFrequencyList, Mode=OneWayToSource}" SelectedIndex="1" Name="comboBox1" /> 
```

或者，您可以在视图模型中初始化`SelectedFrequencyList`为所需的频率：

```
public ViewModel()
{
    _FreqList.Add("8 kHz");
    _FreqList.Add("11.025 kHz");
    _FreqList.Add("12 kHz");
    _FreqList.Add("14.7 kHz");
    _FreqList.Add("16 kHz");
    _FreqList.Add("22.050 kHz");
    _FreqList.Add("24 kHz");
    _FreqList.Add("29.4 kHz");
    _FreqList.Add("32 kHz");
    _FreqList.Add("44.100 kHz");
    _FreqList.Add("48 kHz");
    _FreqList.Add("88.2 kHz");
    _FreqList.Add("96 kHz");
    _FreqList.Add("undef");

    SelectedFrequencyList = _FreqList[1];
} 
```

在这种情况下，您根本不需要为组合框设置选定的索引：

```
<ComboBox Grid.Column="0" ItemsSource="{Binding FrequencyList}" SelectedItem="{Binding SelectedFrequencyList, Mode=TwoWay}" Name="comboBox1" /> 
```

# redmine - 如何将问题从 redmine 迁移到 tuleap

> ID：12947204
> 
> 赞同：1
> 
> 时间：2012-10-18T04:39:11.587
> 
> 标签：redmine, alm, tuleap

最初我们使用[Redmine](http://redmine.org)作为问题管理系统，现在我们计划迁移到[Tuleap](http://www.tuleap.com/)系统。

两个系统都具有将问题导入/导出到 .csv 文件的功能。

我想知道是否有标准/简单的方法来迁移问题。

`status`问题内的主要项目是`title`和`description`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:47:05.897

由于两个系统都可以导出包含他们需要的项目标题的 csv 文件，因此某些标题是不同的。

它需要脚本从一个系统映射到另一个系统，代码片段如下所示。

如果它们不支持应用程序（我的意思是迁移），它可以适用于其他 ALM 系统。

```
#!/usr/bin/env python
import csv
import sys

# read sample tuleap csv header to avoid some field changes
tuleapcsvfile = open('tuleap.csv', 'rb')
reader = csv.DictReader(tuleapcsvfile)
to_del = ["remaining_effort","cross_references"]
# remove unneeded items
issueheader = [i for i in reader.fieldnames if not i in to_del]

# open stdout for output
w = csv.DictWriter(sys.stdout, fieldnames=issueheader,lineterminator="\n")
w.writeheader()

# read redmine csv files for converting
redminecsvfile = open('redmine.csv', 'rb')
redminereader = csv.DictReader(redminecsvfile)
for row in redminereader:
    newrow = {}
    if row['Status']=='New':
        newrow['status'] = "Not Started"
    # some simple one to one mapping
    newrow['i_want_to' ]= row['Subject']
    newrow['so_that'] = row['Description']
    w.writerow(newrow) 
```

导出的 csv 中的某些项目无法在 tuleap 中重新导入，例如 `remaining_effort`, `cross_references`.

这两项显示在`.csv`从 tuleap 问题导出的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:32:45.587

提醒中的“remaining_effort”和“cross_references”类型的数据是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T11:52:45.933

有同样的问题，csv解决方案对我来说太有限了：

*   跟踪器和 csv 内容之间的字段匹配必须完全匹配
*   你不能导入附件
*   你不能链接工件
*   ...

可以使用 REST API 或直接读取 SQL 数据库从 Redmine 中提取问题。[可以使用REST API](https://tuleap-documentation.readthedocs.io/en/latest/user-guide/rest.html)在 Tuleap 中创建工件。您“只”需要一个中间脚本来从 Redmine 中提取问题，然后将它们导入 Tuleap。

我在 Python 中创建了这样一个脚本：

*   它有一个插件方法，因此它可以从任何错误跟踪器导入问题/错误，然后将它们保存到任何其他错误跟踪器。
*   目前它只支持从 Redmine SQL 数据库中提取问题并使用 REST API 导出到 Tuleap。
*   可以扩展它（新插件）以从其他跟踪器（bugzilla/mantis/gitlab）中提取问题。
*   可以扩展它（新插件）以生成 Tuleap xml 文件，而不是使用 Tuleap REST API 导入工件（XML 在这里更强大）。

我使用它将数百个问题从 Redmine 移植到 Tuleap，这足以满足我的需求。

看看[https://github.com/jpo38/TrackerIO](https://github.com/jpo38/TrackerIO)。

# webdriver - Fitnesse 符号问题：Java

> ID：12947205
> 
> 赞同：0
> 
> 时间：2012-10-18T04:39:18.973
> 
> 标签：webdriver, fixtures, fitnesse, selenium-webdriver, selenium-fitnesse-bridge

我在设置我的符号和使用 Fitnesse 符号检索它们时遇到问题。我正在创建一个名为 Carrier 的新类，它是一个简单的 Java bean，它采用 WebDriver 对象。

我用于设置符号的 Java 实现如下所示：

```
public class ColumnFixtureTest extends ColumnFixture{

    private WebDriver driver;

    public Carrier together(){
        driver = new FirefoxDriver();
        Carrier c = new Carrier();
        c.setMyDriver(driver);
        return c;
    }

} 
```

我用于检索它们的 Java 实现如下所示：

```
public class SymbolsTest extends ColumnFixture{

    private Carrier symbolValue;

    public boolean check(){
        if(symbolValue.getMyDriver()!=null){
            return true;
        }
        return false;
    }
} 
```

我的载体对象如下所示：

```
public class Carrier {

    WebDriver myDriver;

    public WebDriver getMyDriver() {
        return myDriver;
    }

    public void setMyDriver(WebDriver myDriver) {
        this.myDriver = myDriver;
    }

} 
```

我的 Fit 表如下所示：

```
!|柱夹具测试|
|=一起()|
|梳子|

!|符号测试|
|symbolValue=|检查？|
|梳|真|
```

但是运行它之后，我收到以下错误：

```
梳子
无法解析：com.symbolTest.Carrier@5ed75ed7，预期类型：com.symbolTest.Carrier。
```

我的值被正确设置为：

```
梳 = com.ebay.srp.symbolTest.Carrier@5ed75ed7
```

任何帮助，将不胜感激。现在坚持了一段时间:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:00:05.277

我已经很久没有使用 Fit 表了。我怀疑问题在于 ColumnFixture 类不能来回移动对象的实例。它可能仅适用于可以表示为字符串的股票类型。但我可能在这方面做得很差。

您使用 Fit 样式表有什么原因吗？我会建议你看看[Slim](http://fitnesse.org/FitNesse.UserGuide.SliM)，或者去[FitLibrary](http://sourceforge.net/projects/fitlibrary/)。对于 WebDriver 测试，FitLibrary 有 SpiderFixture，并且已经有项目使用 WebDriver for Slim（[Xebium](https://github.com/xebia/Xebium)是一个选项）。

我知道这一点。Slim 支持在符号中传递对象引用。

# css - 视口 100% 高度不是 div 100% 高度，为什么？

> ID：12947208
> 
> 赞同：1
> 
> 时间：2012-10-18T04:39:24.520
> 
> 标签：css, height

这是页面：[http ://benoitjacquesdesigner.com/intro_fra1.php](http://benoitjacquesdesigner.com/intro_fra1.php)

在这个页面上，在 FF mac 上，左边的菜单一直延伸到底部（如果屏幕是 1000x715），一切都滚动......我很高兴

在 PC 上，它只有 100% 的视口高度，或者不是 100% 的 div 高度。我想知道要在我的 CSS 中添加什么来永久修复这个问题。我想要#wrapper 的 100% #menu 高度

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:43:10.230

`100%`对我来说是div`#wrapper`而不是视口，我正在使用 Firefox 15.1 `Windows`，你说的是哪个版本？顺便说一句，你正在使用`html5`所以总是使用这个..

```
html, body {
   height: 100%;
} 
```

我也看到了这个

```
#menu {
    height: 100%;
    min-height: 100%;
} 
```

所以只需使用上述之一，无需同时指定..

# c# - 如何从非常通用的 xml 文档中提取信息？

> ID：12947212
> 
> 赞同：1
> 
> 时间：2012-10-18T04:39:50.657
> 
> 标签：c#, xml, visual-studio-2010, xmlreader

我的 xml 文档如下（但要大得多，与出生日期信息无关）。它是由一种方法产生的，我想从中访问信息。

我想查找像 John 或 Hannah 这样的“姓名”，并从下一行获取 DOB，也许将它们放入`Dictionary<string,string>`以后查找。

该文件始终采用这种形式，并且名称是唯一的。我只需要第一个部分名称 = “DOBs”。

```
<info>
  <section name="DOBs">
   <table>
    <headers>
      <cell value="Name" />
      <cell value="DOB" />
    </headers>
    <row>
      <cell value="John" />
      <cell value="121245" />
    </row>
    <row>
      <cell value="Hannah" />
      <cell value="050595" />
    </row>
   </table>
  </section>
  <section name="notDOBs">
   <table>
    <headers>
      <cell value="Name" />
      <cell value="other info" />
    </headers>
    <row>
      <cell value="Hannah" />
      <cell value="blue" />
    </row>
    ....
    </table>
  </section>
</info> 
```

我尝试了什么？- 老实说，并不是很多，因为我对一般的 xml 感到困惑。我查看了一些 SO 条目：[Xml Reader](https://stackoverflow.com/questions/6591135/extract-contents-from-xml-file)、[This one](https://stackoverflow.com/questions/3093347/how-can-i-extract-an-xml-block-from-an-xml-document)和[How to use XMLreader to read this xml](https://stackoverflow.com/questions/9381720/how-to-use-xmlreader-to-read-this-xml)。我还查看了看起来不错的[csharp-examples.net](http://www.csharp-examples.net/xml-nodes-by-name/)，但我不断收到有关“未导致节点集”的错误。

当我发现这个时我很兴奋：[获取 xml 属性值](https://stackoverflow.com/questions/2035991/get-xml-attribute-values-as-string)但没有快乐，它似乎并没有找到它们。

```
var myXml = XElement.Load(_myPath).Elements();
var myArray = myXml.Elements("cell").Attributes("value").Select(n => n.Value); 
```

我知道我还有很多工作要做，但有时你只需要硬着头皮问……有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:06:03.190

```
var list = XDocument.Load("C:\\test.xml")
            .Descendants("section")
            .Where(e => e.Attribute("name").Value.Equals("DOBs"))
            .Descendants("row")
            .Descendants("cell")
            .Attributes("value").ToList();

var dic = Enumerable.Range(0, list.Count/2)
    .ToDictionary(i => list[2*i], i => list[2*i + 1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:47:26.587

[按属性名称的字母顺序对 XML 节点进行排序](https://stackoverflow.com/questions/12943635/sort-xml-nodes-alphabetically-on-attribute-name/12943861#12943861)

检查上面的示例

在导航器中尝试使用

```
 .MoveFirstChild() method
      .MoveNext() method
      .MoveToFirstAttribute() method
      .MoveToNextAttribute() method
      .Name property
      .Value property 
```

不要忘记检查当前是否为空

# iphone - SQLite ANALYZE 破坏索引

> ID：12947214
> 
> 赞同：2
> 
> 时间：2012-10-18T04:39:56.670
> 
> 标签：iphone, ios, sqlite

我有一个包含大约 500K 行的表。该表在“状态”列上有一个索引。所以我运行以下解释命令：

```
EXPLAIN QUERY PLAN SELECT * FROM my_table WHERE status = 'ACTIVE' 
```

结果是可预测的“解释”......

```
SEARCH TABLE my_table USING INDEX IDX_my_table_status (status=?) (~10 rows) 
```

在表中添加了许多额外的行之后，我调用了“分析”。之后，查询似乎慢了很多，所以我重新运行了我的解释，现在看到以下内容：

```
SCAN TABLE my_table (~6033 rows) 
```

我注意到的第一件事是，这两个行估计都相差甚远。最大的担忧是，一旦运行 ANALYZE，索引似乎就被跳过了。我尝试了 REINDEX - 无济于事。我可以取回索引的唯一方法是删除它们，然后重新创建它们。有人见过这个吗？这是一个错误吗？任何想法我做错了什么？我已经在多个数据库上尝试过这个，我看到了相同的结果。这是在我的 PC、MAC 和 iPhone/iPad 上——结果都是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:43:11.187

当 SQLite 使用索引从表中获取行时，它必须首先读取索引页，然后读取包含一个或多个匹配记录的表的所有页。如果匹配的记录很多，则几乎所有表的页面都可能包含一个，因此通过索引将需要读取更多页面。

但是，SQLite 的查询计划器没有关于索引或表中记录大小的信息，因此它的估计可能是错误的。

收集的信息`ANALYZE`存储在[`sqlite_stat1`和 may`sqlite_stat3`表](http://www.sqlite.org/fileformat2.html#stat1tab)中。请显示有关您的桌子的信息。
如果该信息不能反映您的数据的真实分布，您可以尝试再次运行，或者只是从表中`ANALYZE`删除该信息。`sqlite_stat*`

如果`ORDER BY`在索引字段上使用，则可以强制遍历索引。（[`INDEXED BY`](http://www.sqlite.org/lang_indexedby.html)正如其文档所述，*不*用于调整查询性能。）

如果您不需要选择表的*所有*字段，您可以通过在这些查询的字段上创建索引来加速特定查询，以便您拥有[覆盖索引](http://www.sqlite.org/queryplanner.html#covidx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:28:27.273

查询执行计划避免在像“status”这样的低基数列上使用现有索引并不少见，它可能只有几个不同的值。通过扫描 db 表来执行查找通常更快。（一些 DBA 建议永远不要索引低基数列。）

然而，基于解释计划中变化很大的行数，我*猜测*SQLite 的“分析”在使用 InnoDB 存储引擎时与 MySQL 的“分析”类似。MySQL 的“分析”对表数据进行一组随机潜水以确定行数、索引基数等。由于随机潜水，每次“分析”运行后统计信息可能会有所不同，并导致不同的查询执行计划。低基数列更容易受到不正确的统计数据的影响，例如，随机跳水可能表明表中的大多数行都处于“活动”状态，这使得表扫描比使用索引更有效. （我不是 SQLite 专家，所以如果我对“分析”有预感，请有人插话

您可以尝试使用“indexed by”（请参阅[​​ http://www.sqlite.org/lang_indexedby.html](http://www.sqlite.org/lang_indexedby.html)）在查询中测试索引的使用，尽管强制使用索引通常是最后的手段。不同的 RDBMS 对低基数问题有不同的解决方案，例如分区、使用位图索引等。我建议研究特定于 SQLite 的解决方案来对低基数列进行查询/索引）。

# php - 联系表格 iframe 重定向

> ID：12947221
> 
> 赞同：0
> 
> 时间：2012-10-18T04:40:37.053
> 
> 标签：php, forms, iframe

我在[http://www.brisbanediveacademy.com.au](http://www.brisbanediveacademy.com.au)有一个使用 php 制作的联系表。在提交表单后，我试图让它重定向到 iframe 内的新页面。我目前无法将其重定向到任何地方。

这是我的PHP

```
<?php 
$errors = '';
$myemail = 'enquiries@brisbanediveacademy.com.au';
if(empty($_POST['name'])  || 
   empty($_POST['email']) || 
   empty($_POST['message']))
{
    $errors .= "\n Error: all fields are required";
}
$name = $_POST['name'];
$contact = $_POST['number'];
$inquiry = $_POST['inquiry'];  
$email_address = $_POST['email']; 
$message = $_POST['message']; 
if (!preg_match(
"/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
$email_address))
{
     $errors .= "\n Error: Invalid email address";
}
if( empty($errors))
{
    $to = $myemail; 
    $email_subject = "Website contact Form Enquiry: $inquiry";
    $email_body = "You have received a new message. ".
    " Here are the details:\n Name: $name \n Email: $email_address \n Contact Number:  $contact \n Message: \n $message"; 
    $headers = "From: $myemail\n"; 
    $headers = "Reply-To: $email_address";"\r\n";
    mail($to,$email_subject,$email_body,$headers);
} 
?> 
```

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:52:17.380

在代码中，您应该有一个重定向代码，如下所示，

```
<?php
/* Redirect browser */
header("Location: http://www.brisbanediveacademy.com.au/");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:20:57.060

我可以看到这个错误报告

`Warning: Cannot modify header information - headers already sent by (output started at /home/brisbane/public_html/contact/mail.php:9) in /home/brisbane/public_html/contact/mail.php on line 37`

这意味着，之前的代码`header('Location:..')`具有某种面向输出的代码，例如回声。找到错误日志的设置，检查回显。最好您可以查看 mail.php 的第 37 行。这主要是因为您的 php conf 有 display_errors true 并且 error_reporting 设置为最低级别。因此，即使生成了 NOTICE，它也会在您执行之前设置标题。在之后添加这些行`<?php`

```
 error_reporting(E_ERROR);
    ini_set('display_errors','false'); 
```

即使只有第二行也可以。

编辑：正如您所问，使用这行代码可以进行重定向。

`header("Location: url-to-redirect");`

如果您的文件中没有这行代码，请确认您正在为您的要求做正确的事情。

希望这会有所帮助。

# java - 在 main 方法中调用方法

> ID：12947225
> 
> 赞同：-2
> 
> 时间：2012-10-18T04:41:05.260
> 
> 标签：java, methods

这是我的主要方法，它从命令行获取 3 个整数，然后在我的验证方法中解析。

`operatinMethod()`但是我有一种操作方法可以调用其他 3 种方法，但我不知道什么类型的数据以及我必须在原因开关中放入多少只得到一个）；并且也在我`mainMethod()`的`operationMehod()`自称？

如果我不清楚，请告诉我？谢谢！

主要方法：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:58:14.003

看来您要执行以下操作

```
 CountPrimes(int) ,   getFactorial(int) and isLeapYear(int)` .... 
```

现在告诉我你会得到什么值`command line arguments`。如果要执行所有三个操作，则通过更改大小写值并给出输入值

```
 performOperations(int value, int caseConstant) 
```

上面的语句将得到两个参数，一个是值，另一个是选择操作的常量。

```
 if(validateInput(args[0],args[1],args[2])) {

   performOperations(Integer.parseInt(args[0]),1);

   performOperations(Integer.parseInt(args[1]),2);

   performOperations(Integer.parseInt(args[2]),3);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:43:50.140

```
public static void main(String[] args){ 
   /*whatever here*/
   try{
   performOperation(Integer.parseInt(args[3])); /*if option is supplied with the arguments*/ 
   }catch(Exception e){ }
}
private static void performOperations(int option) {
    switch(option) {
  case 1: // count Prime numbers
      countPrimes(a);
      break;
  case 2: // Calculate factorial
      getFactorial(b);
      break;

  case 3: // find Leap year
      isLeapYear(c);
      break;

   } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:46:08.103

命令行参数接收输入，`String []`并且可以将值解析为所需的数据类型，并可以将其作为函数参数传递。有关[命令行参数解析，请参见此处](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)

```
public static void main(String[] args){
 } 
```

如果错了，请纠正我:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:46:49.803

你把你正在评估值的变量的名称放在这个 switch 语句中 switch（**我想在这里放什么？**）例如，当你说 case 1 时，那么那个 1 应该来自你的变量。

当您定义方法时，您只需要传递您正在评估其值的参数，然后您可以将该变量传递给 switch 语句？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T05:20:31.107

您可以尝试使用这种方法：

我避免使用全局变量，它们不是必需的，我假设您一直在尝试这样做：

*   countPrimes 与第一个参数
*   用第二个计算阶乘
*   并用第三个找到闰年

代码应该是这样的：

```
public class Test {
// Global Constants
        final static int MIN_NUMBER = 1;
        final static int MAX_PRIME = 10000;
        final static int MAX_FACTORIAL = 12;
        final static int MAX_LEAPYEAR = 4000;

        public static void main(String[] args) {
            if (validInput(args)) {
                performOperations(args);
            }
        }

        private static boolean validInput(String[] args) {
            if (args.length == 3 && isInteger(args[0]) && isInteger(args[1]) && isInteger(args[2]) &&
                    withinRange(Integer.parseInt(args[0]),MIN_NUMBER, MAX_PRIME) &&
                    withinRange(Integer.parseInt(args[1]),MIN_NUMBER, MAX_FACTORIAL) &&
                    withinRange(Integer.parseInt(args[2]),MIN_NUMBER, MAX_LEAPYEAR) )
                return true;
            return false;
        }

        //Check the value within the specified range
        private static boolean withinRange(int userInput, int min, int max) {
            boolean isInRange = true;
            if (userInput < min || userInput > max) {
                isInRange = false;
            }
            return isInRange;
        }

        private static boolean isInteger(String value) {
            try {
                Integer.parseInt(value);
            } catch (NumberFormatException nfe) {
                return false;
            }
            return true;
        }

        //Perform operations
        private static void performOperations(String[] args) {
            countPrimes(args[0]);
            getFactorial(args[1]);
            isLeapYear(args[2]);
        }
} 
```

# java - 用 Java 读取图像并执行仿射变换

> ID：12947228
> 
> 赞同：0
> 
> 时间：2012-10-18T04:41:18.363
> 
> 标签：java, image-processing, affinetransform, getpixel

所以对于一个类项目，我必须读取一个`Image`文件并执行`Affine Transforms`它。我使用类找到了如何使用 Complete Reference bool 中存在的信息来执行格式`PixelGrabber`。但是，我必须为许多图像执行此操作。

在`Affine Transforms`课堂上，我如何将图像作为输入。它不接受二维数组作为输入。在这种情况下要给出的输入到底是多少？我必须获取图像`reflection`，`rotation`然后`scaled up`形成并保存它们。

# .htaccess - 如果 url 以特定单词停止，则 htacess 重定向

> ID：12947230
> 
> 赞同：0
> 
> 时间：2012-10-18T04:41:42.187
> 
> 标签：.htaccess, redirect

是否可以基于以下网址进行重定向：

www.url.com/stuff.php

但如果 url 包含 php 之后的任何字符，则不会重定向，例如：

www.url.com/stuff.php?variables=values&othervariable=othervalue&etc=more

我也不知道怎么写。

提前致谢！

编辑：基本上，只有当 www.url.com 以 .php 结尾时，我才需要重定向到 www.url2.com，但如果 .php 后跟变量则不需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:02:54.903

尝试

```
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^/site.com/?$   /site.com/cart.php [R=301,NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:23:29.650

尝试：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^/?cart.php$ / [L,R=301] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T04:55:37.023

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^stuff.php$ RELATIVE_OR_ABSOLUTE_URL_HERE [L] 
```

# jquery - 在 $this（当前）元素的父 `ul` 上使用 appendTo()

> ID：12947234
> 
> 赞同：0
> 
> 时间：2012-10-18T04:42:01.920
> 
> 标签：jquery, syntax

我对一些语法有困难。

**JS**

```
function sortAlpha(a,b){
       return a.innerHTML > b.innerHTML ? 1 : -1;
};

$('.brick ul li').each(function() {
       $(this).sort(sortAlpha).appendTo('ul');
}); 
```

**HTML**

```
<div id="studio" class="brick">
<div class="listlist">
<h3 class="title">Studio</h3>
<ul class="list">
    <li class="odd">
        <a href="#">
            <span class="title">Apple</span>
        </a>
    </li>
    <li class="even">
    <span class="title"><a href="#">Cat</span>
            </a>
    </li>
    <li class="odd">
        <span class="title">
                        <a href="#">Bar</span>
        </a>
    </li>
</ul>
</div>
</div> 
```

我想附加`$this` `li`到它自己的父级`ul`而不是所有列表

编辑：只是为了确保我选择了正确的 li 和父母。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:50:09.970

您可以使用该`closest()`方法遍历 DOM 并找到`UL`父级 -

```
$(this).sort(sortAlpha).appendTo($(this).closest('ul')); 
```

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:46:53.430

如果您不确定父元素，请使用此

```
$(this).sort(sortAlpha).appendTo($(this).parent("ul")); 
```

如果您仍然不确定父级是否会位于 DOM 树的正上方，请使用`.closest()`

```
$(this).sort(sortAlpha).appendTo($(this).closest("ul")); 
```

`ul`但是，如果你唯一地用一个`id`like来识别，性能会更好

```
<ul id="meParent">
   ...
</ul> 
```

然后

```
$(this).sort(sortAlpha).appendTo("#meParent"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:03:36.320

无论如何，您的嵌套不准确`html`，嵌套不正确，您可以尝试一下，我已经回答假设第一个`li`嵌套正确，如下所示

```
<li class="odd">
    <a href="#">
        <span class="title">Apple</span>
    </a>
</li> 
```

[**工作示例在这里**](http://jsfiddle.net/CCZcN/10/)。

```
// Sorter
function sorter(){
    var arr=[], len=$('.brick').find('ul.list li').length;    
    $('.brick ul.list li').each(function(i) {
        var el=$(this).find('a span').text();
        arr.push(el);
        if(i==(len-1))
        {
            arr=sortAlpha(arr);
            var ul=$(this).closest('ul.list').empty();
            $.each(arr, function(k, v){
                var cls=(k%2) ? 'even':'odd',
                li=$('<li/>', {'class':cls}),
                a=$('<a/>',{'href':'#'}).append($('<span/>', {'class':'title'}).text(v));
                ul.append(li.append(a));
            });
        }
    });    
}

//Sort helper
function sortAlpha(list){
    var result = [], map = [];
    for (var i=0, length = list.length; i < length; i++) {
        map.push({ index: i, value: list[i].toLowerCase() });
    }
    map.sort(function(a, b) {
        return a.value > b.value ? 1 : -1;
    });
    for (var i=0, length = map.length; i < length; i++) {
        result.push(list[map[i].index]);
    }
    return result;
} 
```

# java - Java中的重载/覆盖

> ID：12947238
> 
> 赞同：1
> 
> 时间：2012-10-18T04:42:36.917
> 
> 标签：java, overriding, overloading

如果我有

```
class A
{
 void foo(){}
 void foo(int a){}
}

class B extends A
{
 void foo(){}
} 
```

**类 A**中的方法**foo()**会被覆盖和重载吗？

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T04:43:43.773

是的。它既被重载又被覆盖。

`foo`用方法在classA中重载`foo(int a)`

`foo`在 B 类中用方法重写`foo()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T04:47:28.043

如果您`foo(){}`从 B 对象调用，则该方法将被覆盖。
如果`foo(int a){}`从 A 对象调用，则该方法将被重载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T04:59:04.097

`A objA = new A();`
`objA.foo(10);`//（重载）

`A objAB = new B();`
`MobjAB.foo();`// （重写，将调用 B 的方法而不是 A）**

# asp.net-mvc-3 - 如何删除 MvcMailer、T4Scaffolding 和其他依赖项并恢复我的程序？

> ID：12947240
> 
> 赞同：0
> 
> 时间：2012-10-18T04:42:55.953
> 
> 标签：asp.net-mvc-3, mvcmailer

我尝试安装 MvcMailer，一旦我添加了这个包，我的项目就死了。我开始收到关于与不同版本的 T4Scaffolding..versions 1.0.7 和 1.0.8 的依赖冲突的各种错误消息。所以我卸载了 MvcMailer。

当我运行该程序时，我仍然收到相同的消息：不同版本的 T4Scaffolding 已在此 Visual Studio 实例中运行 请重新启动 Visual Studio 以避免意外行为。在重新启动 Visual Studio 之前，您将无法使用脚手架。

我的模型有错误消息，如：

找不到类型或命名空间名称“ColumnAttribute”（您是否缺少 using 指令或程序集引用？）

或者

找不到类型或命名空间名称 DatabaseGenerated（您是否缺少 using 指令或程序集引用？）

我正在使用 EntityFramework 4.50501 SP1Re l。

MvcMailer 似乎是个好主意，但自从我安装了它后，我就无法再运行我的程序了。无论如何，我可以简单地让我的程序恢复到安装 MvcMailer 之前的设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:40:31.483

在项目的根目录中会有一个 Packages 文件夹。删除 T4Scaffolding 版本 1.0.7 应该可以解决冲突。

# regex - Coldfusion：如何使用正则表达式提取子字符串

> ID：12947242
> 
> 赞同：1
> 
> 时间：2012-10-18T04:43:08.433
> 
> 标签：regex, string, coldfusion, coldfusion-8

我有一个字符串，其中包含一些双引号子字符串，即 " 字符。双引号之间是我想要的数据。

我如何编写一个正则表达式来从中提取“我想要的第一个数据”和“我想要的第二个数据”：

'一些带有“我想要的第一个数据”和“我想要的第二个数据”的字符串'

我尝试了以下代码。

```
<cfset mydata = 'some string with "the first data i want" and "the second data i want"'/>

<cfset arrData = ListToArray(mydata ,'"') /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:08:37.007

大概你可以做一些像这样微不足道的事情：

```
<cfset matches = REMatch('"([^"]*)"', mydata) />
<cfdump var="#matches#" label="Example REMatch" /> 
```

不幸的是，这也将包括匹配中的双引号，并且 ColdFusion 的正则表达式引擎相当陈旧且粗制滥造，因此它不支持 Lookaheads/Lookbehinds。

双引号可以很容易地替换，但如果你真的想使用前瞻和后瞻，你可以求助于使用 Java 自己的模式库。

```
<cfset matches = [] />
<cfset pattern = CreateObject("java","java.util.regex.Pattern").Compile('(?<=")[^"]*(?=")') />
<cfset matcher = pattern.Matcher(mydata) />
<cfloop condition="matcher.Find()">
    <cfset ArrayAppend(matches, matcher.Group()) />
</cfloop>

<cfdump var="#matches#" label="Example of Java Regex" /> 
```

# php - WordPress - 模板页面上的分页？

> ID：12947248
> 
> 赞同：0
> 
> 时间：2012-10-18T04:43:39.473
> 
> 标签：php, wordpress, wordpress-theming

我正在使用 WordPress 模板构建我的网站，以便精细控制每个模板的外观。

我的新闻页面上有我的循环，可以从帖子中提取帖子。

工作正常，至少我是这么认为的。

```
<?php 
/*
    Template Name: News
*/
?>

<?php get_header(); ?>
<div id="main-content">

<?php get_sidebar(); ?>
<?php query_posts ("posts_per_page=4"); ?>

<?php if (have_posts()) : while ( have_posts()) : the_post(); ?>
<div <?php post_class() ?> id="post-<?php the_ID(); ?>">

    <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>

    <div class="entry">
        <?php the_content(); ?>
    </div>
    <?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>
    <div class="postmetadata">
        <?php the_tags('Tags: ', ', ', '<br />'); ?>
        Posted in <?php the_category(', ') ?> | 
        <?php comments_popup_link('No Comments &#187;', '1 Comment &#187;', '% Comments &#187;'); ?>
    </div>

</div>

<?php endwhile; endif; ?>

<div class="navigation">
<div class="next-posts"><?php next_posts_link('&laquo; Older Entries') ?></div>
<div class="prev-posts"><?php previous_posts_link('Newer Entries &raquo;') ?></div>
</div>

</div> <!-- end div main-content -->
<?php get_footer(); ?> 
```

较旧/较新的条目会显示，但在单击它们后，它只会将我带到同一页面/最新的 4 个帖子。

如何使用这样的模板页面进行分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:14:48.953

您需要添加`paged`参数来`query_posts()`对结果进行分页：

```
<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
query_posts('posts_per_page=3&paged=' . $paged); 
?> 
```

[http://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query](http://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-26T05:58:14.490

```
<div class="navigation">
<div class="next-posts"><?php next_posts_link('&laquo; Older Entries') ?></div>
<div class="prev-posts"><?php previous_posts_link('Newer Entries &raquo;') ?></div> 
```

只需将此行放在您的页面中。

# php - 使用 php、jquery 在图像中创建一个空间以在其上放置另一个图像

> ID：12947250
> 
> 赞同：-2
> 
> 时间：2012-10-18T04:43:45.493
> 
> 标签：php, jquery, html

我想创建一个网页，其中有一个背景图像，并且在该网页上有一个图像的占位符，用户可以在其中单击并上传照片，并且该照片将被放置在该背景图像上（用户上传的图像可以调整放大的大小）。

所以我的问题是：

1.  如何在背景图像顶部创建一个空白区域，例如一个圆圈，我使用以下方法在页面上创建了背景图像：

    ```
    <div style="background-image: url(bg.jpg); height: 400px; width: 800px; border: 1px solid black;"> 
    ```

2.  我希望在上面创建的空间中有一个链接类型，该链接将打开一个弹出窗口，让用户上传图像，并且该图像将在创建的空间（圆圈）中可见。

我知道如何使用 jquery 打开模态表单，并使用 php 上传图像。请指导我为图像创建占位符，然后在上传后如何将该图像放置在占位符中。

我不擅长 jquery 和 HTML。因此，感谢您对他的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:51:23.573

### CSS：

```
* {font-family: "Segoe UI", Tahoma;}
p {margin: 0 0 15px;}
.frame {background: url("http://www.vector-eps.com/wp-content/gallery/floral-frames-vectors/floral-frames-vectors4.jpg") center center no-repeat; width: 400px; height: 314px; position: relative;}
.frame img {position: absolute; width: 150px; height: 100px; top: 100px; left: 125px; border: 1px solid #ccc;}​ 
```

### HTML：

```
<p>Say you have something like this:</p>

<div class="frame">
    <img src="http://i48.tinypic.com/dmb47t.jpg" />
</div>​ 
```

### jQuery

一开始会有一个空`<img />`标签。使用 jQuery，上传后，您可以这样设置值：

```
$(".frame > img").attr("src", "image-url"); 
```

### 截屏：

![截屏](../Images/4b5470e70a72735747b1f7d4377cb465.png)

### 小提琴：http: [//jsfiddle.net/UUtyQ/](http://jsfiddle.net/UUtyQ/)

# java - 如何在java中比较字符串数组中的元素？

> ID：12947254
> 
> 赞同：1
> 
> 时间：2012-10-18T04:43:54.983
> 
> 标签：java, arrays, string, nullpointerexception, compareto

我正在尝试在字符串数组中查找重复的单词。

这是我的比较代码：

```
 for ( int j = 0 ; j < wordCount ; j++)
   {    
       for (int i = wordCount-1 ; i > j ; i--)
       {       
           if (stringArray[i].compareTo(stringArray[j]) == 0 && i!=j)
           {
               //duplicate
               duplicates++;
           }
       }
   }
   wordCount -= duplicates;
   System.out.print("\nNumber of words, not including duplicates: " + wordCount); 
```

在 if 语句中，它说`NullPointerException`. 这是什么意思？有一个更好的方法吗？我试着简单地做

```
if (stringArray[i] == stringArray[j] && i!=j) 
```

但这一直给我错误的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:53:40.003

您可以这样做以获得更好的性能：

```
public int getDuplicateCount(Integer[] arr){
     int count = 0;   
     Set<Integer> set = new HashSet<Integer>();
     for (int i = 0; i < arr.length; i++) {
         if (set.contains(arr[i]))
             count++;
         set.add(arr[i]);
      }
      return count;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:53:10.327

空指针可能是因为您的数组中有任何空值。

您的代码不起作用，因为您正在对需要查找重复项的同一数组进行迭代

您可以使用以下代码来计算数组中的重复单词。

```
public class WordCount {

public static void main(String args[]){
    String stringArray[]={"a","b","c","a","d","b","e","f"};

    Set<String> mySet = new HashSet<String>(Arrays.asList(stringArray));

    System.out.println("Number of duplicate words: "+ (stringArray.length -mySet.size()));

    System.out.println("Number of words, not including duplicates: "+ mySet.size());
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:48:42.657

这意味着`stringArray[i]`is `null`，即您的数组`null`在某处有一个条目。您可能在其他地方有逻辑错误，并且数组的某些元素没有正确设置。

如果您的数组合法地包含空值，则必须在尝试调用方法之前明确检查`stringArray[i]`：

```
if (stringArray[i] == null){
    // Do whatever
} else if (stringArray[i].compareTo(stringArray[j]) == 0 && i!=j) {
    //duplicate
    duplicates++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:46:28.130

NullPointerException 表示您的数组成员之一未设置（即它为空）

不要使用 == 来比较字符串。

您走在正确的轨道上 - 可能`stringArray[]`包含一些未设置的成员。Eacy 修复是在使用这些值之前进行空检查。

```
for ( int j = 0 ; j < wordCount ; j++)
   {    
       for (int i = wordCount-1 ; i > j ; i--)
       {       
           String wordi = stringArray[i];
           String wordj = strinArray[j];
           // If both are null it won't count as a duplicate.
           // (No real need to check wordj - I do it out of habit)
           if (wordi != null && wordj != null && wordi.compareTo(wordj) == 0 && i!=j)
           {
               //duplicate
               duplicates++;
           }
       }
   }
   wordCount -= duplicates;
   System.out.print("\nNumber of words, not including duplicates: " + wordCount); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-15T03:12:01.630

在这里，我看到您正在尝试查找给定字符串的唯一元素计数。我建议使用 HashSet 以获得更好的解决方案。

```
public int getUniqueElements(String str)
{
  HashSet<Character> hSet = new HashSet<>();

  // iterate given string, hSet only adds unique elements to hashset
  for(int i = 0; i < str.length() ; i++
    hSet.add(str.charAt(i));

  return hSet.size();
} 
```

# iphone - 项目归档问题

> ID：12947262
> 
> 赞同：1
> 
> 时间：2012-10-18T04:45:09.987
> 
> 标签：iphone, objective-c, ipad, three20, mailcore

我正在使用`Product > Archive`iPad 项目当我在项目中使用构建配置作为发布时，我成功地在管理器中获取了文件，但它没有显示版本、标识符和图标图像，而是使文件具有`.xcarchieve`扩展名灰色的图标图像，上面写着带有符号 A 的存档。当我使用`Build Configuration`我的项目时，`Distribution`它有时会向我显示错误：

```
"Three20/Three20.h" File not Found 
```

有时向我展示 :: 的错误

```
Command/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-g++-4.2 failed with exit code 1.. 
```

我的项目有 2 个静态库 Three20 和 MailCore Framework。任何帮助表示赞赏..

# sharepoint-2010 - 当前上下文中不存在名称“InitializeControl”（SharePoint 2010、Visual Studio 2010）

> ID：12947263
> 
> 赞同：1
> 
> 时间：2012-10-18T04:45:12.280
> 
> 标签：sharepoint-2010, sandbox

当我使用 Visual Studio 2010 为 SharePoint 2010 创建沙盒解决方案时遇到了这个问题。

图片：http: [//imageshack.us/photo/my-images/812/sp20102y.jpg/](http://imageshack.us/photo/my-images/812/sp20102y.jpg/)

[如本文所示（链接](http://blog.raminassar.com/2011/10/14/working-with-sharepoint-2010-projects-on-visual-studio-without-installing-the-server/)），在完成开发环境后，我使用本地计算机创建此解决方案。我想将此解决方案部署到安装了 SharePoint Server 2010 的服务器，但 Visual Studio 2010 给了我这个问题。你能建议我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:34:00.587

这似乎是一个错误。

检查这篇文章：

[http://blog.mastykarz.nl/the-name-initializecontrol-does-not-exist-in-the-current-context-visual-web-part-sandboxed-bug-fix/](http://blog.mastykarz.nl/the-name-initializecontrol-does-not-exist-in-the-current-context-visual-web-part-sandboxed-bug-fix/)

# mysql - 在不锁定表的情况下同时从不同线程进行多个插入？

> ID：12947266
> 
> 赞同：0
> 
> 时间：2012-10-18T04:45:17.060
> 
> 标签：mysql, locking, deadlock, database-administration

我正面临 mysql 表锁的问题。我想从各种线程的表中插入多条记录。在此，开始向表中插入数据的第一个线程获取表锁，而其他线程必须等待第一个线程完成。这是应用程序的开销。我想解决这个问题。我想允许所有线程同时将批量记录插入到同一个表中。是否有可能在 mysql 中，如果是，那么如何？请指导我。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:51:55.773

看来您的问题与隔离级别有关

检查连接隔离级别设置可能会有所帮助

[http://dev.mysql.com/doc/refman/5.1/en/dynindex-isolevel.html](http://dev.mysql.com/doc/refman/5.1/en/dynindex-isolevel.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:55:44.993

MySQL 允许[`INSERT DELAYED`](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html). 该行被安排用于插入并且数据库调用返回。从 5.5.7 开始，它甚至支持延迟多行插入。

# iphone - 是否有更好的方法来重写 URL 以获取 @2x 图像资源？

> ID：12947272
> 
> 赞同：0
> 
> 时间：2012-10-18T04:45:55.623
> 
> 标签：iphone, uiimage, retina-display

我编写了这段代码来处理字符串形式的 URL，以尝试获取可能的视网膜图像。意图是转弯

```
scheme://host/path/name.extension 
```

进入

```
scheme://host/path/name@2x.extension 
```

URL 是可预测的，因此假设例如只有一个“.”。在最终文件名中是安全的。但是我有那种 iOS 的感觉，我想知道这是否需要太多的代码来完成；有没有更好的，也许是 API 提供的方法来做到这一点？

这只是启动请求的方法的开始。

```
- (NSData *)fetchResourceWithURLLocation:(NSString *)location
                             requestedBy:(id<DataRequestDelegate>)requester
                          withIdentifier:(id)requestID {

    NSData *resultData = nil;

    // some disassembly to get rid of the double '/' in scheme
    NSURL *locationURL = [NSURL URLWithString:location];
    NSString *host = [locationURL host];
    NSString *scheme = [locationURL scheme];
    NSString *dataPath = [locationURL relativePath];

    // if this is a retina display, rewrite the dataPath to use @2x
    if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] && ([UIScreen mainScreen].scale == 2.0)) {

        NSArray *pathComponents = [dataPath componentsSeparatedByString:@"/"];
        NSString *nameComponent = [pathComponents lastObject];
        NSArray *nameComponents = [nameComponent componentsSeparatedByString:@"."];
        NSAssert(([nameComponents count] == 2), @"nameComponent contains more than one \".\"");
        nameComponent = [NSString stringWithFormat:@"%@@2x.%@", [nameComponents objectAtIndex:0], [nameComponents lastObject]];
        dataPath = @"";
        for(NSString *pathComponent in pathComponents) {
            if(pathComponent != [pathComponents lastObject])
                dataPath = [dataPath stringByAppendingString:[NSString stringWithFormat:@"%@/", pathComponent]];
        }
        dataPath = [dataPath stringByAppendingString:nameComponent];
    }

    // reassembly to check existence
    NSString *processedLocation = [NSString stringWithFormat:@"%@://%@%@", scheme, host, dataPath]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:31:04.283

您认为将字符串插入地址字符串的代码量非常大，这是对的。你想做的事情相当简单，所以这里有一个示例方法，它`"@2x"`只是在 last 之前将 the 弹出到一个字符串中`"."`。如果没有，则返回 nil `"."`。代码注释中的进一步解释。

```
-(NSString *)retinaURLStringForString:(NSString *)nonRetinaAddress{
    // Find the range (location and length of ".")
    // Use options parameter to start from the back.
    NSRange extDotRange = [nonRetinaAddress rangeOfString:@"." options:NSBackwardsSearch];
    // You can check whether the "." is there or not like this:
    if (extDotRange.location == NSNotFound){
        // Handle trouble
        return nil;
    }

    // We can use NSString's stringByReplacingCharactersInRange:withString: method to insert the "@2x".
    // To do this we first calculate the range to 'replace'.
    // For location we use the location of the ".".
    // We use 0 for length since we do not want to replace anything.
    NSRange insertRange = NSMakeRange(extDotRange.location, 0);

    // Lastly simply use the stringByReplacingCharactersInRange:withString: method to insert "@2x" in the insert range.
    NSString *retinaAddress = [nonRetinaAddress stringByReplacingCharactersInRange:insertRange withString:@"@2x"];
    return retinaAddress;
} 
```

当测试如下：

```
NSString *nonRetinaAddress = @"scheme://host/path/name.extension";
NSString *retinaAddress = [self retinaURLStringForString:nonRetinaAddress];

NSLog(@"%@",nonRetinaAddress);
NSLog(@"%@",retinaAddress); 
```

它记录：

```
scheme://host/path/name.extension
scheme://host/path/name@2x.extension 
```

*小旁注：*

如果原始字符串是可变字符串，则可以使用`[mutableAddressString insertString:@"@2x" atIndex:extDotRange.location]`而不是计算替换范围。不值得为此创建一个可变的。

# c# - 使用 asp.net 或 javascript 访问 iframe 内容头

> ID：12947273
> 
> 赞同：0
> 
> 时间：2012-10-18T04:45:56.943
> 
> 标签：c#, asp.net, html, iframe

我用 iframe 创建了一个 asp.net 页面。iframe 有一个 HTML 页面。现在我通过 url 引用 HTML 内容`Admin/Home.aspx#Personnel_Data`。但它不起作用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:57:35.850

试试这些

docment.getElementById('iframe').contentWindow。

document.getElementById('FrameId').contentWindow.document.body.innerHTML

document.getElementById('FrameId').contentWindow.document.body.outerHTML

var doc = document.getElementById('FrameId').contentWindow.document;

[http://www.w3schools.com/jsref/dom_obj_frame.asp](http://www.w3schools.com/jsref/dom_obj_frame.asp)

# formatting - 从 HTML 格式化链接

> ID：12947286
> 
> 赞同：0
> 
> 时间：2012-10-18T04:46:46.773
> 
> 标签：formatting, screen-scraping, href

我试图找到一个指南来解释浏览器如何格式化包含在 href 标记中的“链接”。例如：

浏览器如何处理以下类型的标签：

*   /律师
*   ?p=1&名称=A
*   律师

我想要这些信息的原因是因为我目前正在以一种非常低效的方式格式化链接，并且想编写自己的脚本来处理这个任务。但是，每次我自己创建脚本时，它都会错过标记，并且某些链接不可避免地不起作用 - 所以一定有一些我遗漏的规则。

谢谢您的帮助！尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:09:21.477

*   /attorneys => 替换路径，只有主机不变
*   ?p=1&Name=A => 替换查询字符串，主机和路径不变
*   律师=>替换文件名，主机和路径到最后一个/不变

大多数语言都有一个库可以为你做这件事，这就是你应该使用的。例如，在 ruby​​ 中它是 URI：

```
new_url = URI.join(current_url, href).to_s 
```

# java - Java 中的集合

> ID：12947293
> 
> 赞同：0
> 
> 时间：2012-10-18T04:47:21.593
> 
> 标签：java, collections

所以我明天在我的软件工程课上考试，我被提出这个问题作为一个练习问题。我很确定我必须使用 hashcode 和 equals 才能使其工作，但不确定如何准确编码。谁能给我一些如何做的例子？

编写 Java 代码以在不进行（显式）比较的情况下删除重复项。使用集合系列。

字符串[] 数据；//已经满了字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:52:31.660

`java.util.HashSet` 可以是您在添加元素时删除重复项的选择。但是`Collection Framework`完全理解，这样你就不会停止自己解决一个问题，而是理解它足以解决任何问题。好的起点是[Oracle Java 教程](http://docs.oracle.com/javase/tutorial/collections/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:54:18.300

在伪代码中，您要创建一个集合，最初为空。对于集合中的每个元素 e，see of e 在集合中。如果没有，请将其添加到集合中。如果是这样，请将其从集合中删除。

我会让你弄清楚如何实现Java。

注意对于软件工程课程来说，这似乎是一个非常微不足道的问题。

# java - Java Matrix Transpose 奇怪正在发生

> ID：12947298
> 
> 赞同：1
> 
> 时间：2012-10-18T04:47:40.023
> 
> 标签：java, class, matrix, copy, transpose

好的，我正在制作我自己的 Matrix 类。我有一个转置矩阵的转置方法。这是 main 方法中的块

```
 Matrix m1 = new Matrix(4,2);
    m1.fillMatrix(1,2,3,4,5,6,7,8);
    System.out.println("before " + m1.toString());
    m1.transpose();
    System.out.println("after " + m1.toString()); 
```

这就是它搞砸的地方，在 m1.transpose(); 在 transpose() 方法中

```
public Matrix transpose() {
    if(isMatrix2) {
        Matrix tempMatrix = new Matrix(row, col); // matrix2 contents are emptied once this line is executed
        for(int i=0; i < row; i++) {
            for(int j=0; j < col; j++)
                tempMatrix.matrix2[i][j] = matrix2[i][j];
        } 
```

所以出于某种原因，tempMatrix.matrix2 的 id 与 this.matrix2 相同。所以当代码执行时

```
 Matrix tempMatrix = new Matrix(row,col); 
```

然后 this.matrix2 的内容被清空。有谁知道这里可能发生了什么？这些字段都是私有静态的，如果有帮助的话......

# sdl - SDLK_F1 钥匙盒不工作

> ID：12947300
> 
> 赞同：2
> 
> 时间：2012-10-18T04:48:00.687
> 
> 标签：sdl

我正在尝试在 C++ 中的 SDL 中捕捉 F1 键的事件。但是，不知何故，按下 F1 键后我看不到任何变化。但是，当我想在屏幕上切换我的动画对象时，我使用 SDL_t 案例来执行此操作，并且执行得很好。只是不明白为什么不按 F1 键。下面是处理按键事件的 switch case：

```
SDL_Event event;

  bool done = false;
  bool keyPress = false;
  while ( not done ) {
    draw();
    SDL_Flip(screen);

    SDL_PollEvent(&event);
    if (event.type ==  SDL_QUIT) { break; }
    if(event.type == SDL_KEYUP) { keyCatch = false; }
    if(event.type == SDL_KEYDOWN) {
      switch ( event.key.keysym.sym ) {
        case SDLK_ESCAPE : done = true; break;
        case SDLK_q      : done = true; break;
        case SDLK_F1     :  {
    if(!keyCatch){
              keyPress=true;
                     //this method is from another class.
                  io.printMessageAt("F1 is selected:",50,10);       
              currentOrb = (currentOrb+1) % orbs.size(); 
                      }
        break; 
        } 
        case SDLK_t : case SDLK_SPACE :
          if ( !keyPress ) {
            //something
          }
          break;
        case SDLK_p      : {
          if (!keyPress) {
            keyPress = true;
            //something
          }
          break;
        }
        default          : break;
      }
    }
  } 
```

注意：我不能在这里给出整个代码。以上是我正在尝试做的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:33:50.020

仔细检查您的窗口管理器或热键守护程序是否在您的进程命中之前没有消耗您的 F1。

这在我的系统上工作正常（F1 关闭程序）：

```
#include <SDL.h>

int main( int, char** )
{
    SDL_Init(SDL_INIT_EVERYTHING); 
    SDL_Surface* screen = SDL_SetVideoMode(640, 480, 32, SDL_ANYFORMAT);

    SDL_Event event;

    bool done = false;
    bool keyPress = false;
    while ( !done ) 
    {
        SDL_Flip(screen);

        SDL_PollEvent(&event);
        if(event.type == SDL_QUIT) 
        { 
            break; 
        }
        if(event.type == SDL_KEYUP) 
        { 
            keyPress = false; 
        }
        if(event.type == SDL_KEYDOWN)
        {
            switch ( event.key.keysym.sym ) 
            {
            case SDLK_ESCAPE: 
            case SDLK_q: 
                done = true; 
                break;
            case SDLK_F1:  
                if(!keyPress)
                {
                    keyPress=true;
                    done = true;
                }
                break; 
            case SDLK_t:
            case SDLK_SPACE:
                if ( !keyPress ) 
                {
                    //something
                }
                break;
            case SDLK_p: 
                if (!keyPress) 
                {
                    keyPress = true;
                    //something
                }
                break;
            default: 
                break;
            }
        }
    }

    SDL_Quit();
    return 0;
} 
```

我确实注意到这`keyCatch`是未定义的。我用`keyPress`.

# c++ - 函数参数

> ID：12947301
> 
> 赞同：0
> 
> 时间：2012-10-18T04:48:00.703
> 
> 标签：c++, function, parameters

函数的一些重要参数是指针、地址和数组。

```
void somethingHappens (int *a); //pointers
void somethingHappens (int& a); //address
void somethingHappens (int arg[]); //array 
```

如果我要使用（初始化）上面的函数，它会是什么样子？\我的答案如下。如果我错了，请纠正我。

```
int i = 9; int j[20] = {1,2,3,4,5};
somethingHappens(&i); //pointers
somethingHappens(&i); //address - Not really sure...
somethingHappens(j); //array 
```

我是否缺少任何其他重要的函数参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:08:00.267

在第一种情况下（正如您正确提到的），参数通过指针传递，即参数的地址传递给方法。因此，该方法可以直接访问*指针指向*的内存位置（请记住，指针也是一个变量，但它持有一个内存地址）。

在第二种情况下，参数作为别名传递。它与第一种方法非常相似，唯一不同的是你**没有**使用参数的内存地址来访问它的值。

在第三种情况下（有趣的是），当您传递数组变量时，它是通过引用传递的（在数组 arr[] 的情况下，arr 表示数组的基地址，即第零个元素的地址或 &arr[0]）。因此，在方法中操作数组也会反映在调用者中。

在**第二种情况下**，

```
void somethingHappens (int& a); 
```

对此的调用应采用以下形式，

```
somethingHappens(i); 
// somethingHappens(&i); is wrong because &i means the location of i, 
// while the method is expecting an alias and not an address 
```

**更多信息**

*   [C++ 参考资料](http://www.cprogramming.com/tutorial/references.html)
*   [C++中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)

# javascript - Node.js | 遍历数组，进行后期调用并将结果累积到数组中

> ID：12947303
> 
> 赞同：1
> 
> 时间：2012-10-18T04:48:13.103
> 
> 标签：javascript, node.js, callback, coffeescript

我希望在 Node.js 中进行类似这样的调用（我在 node.js 中使用咖啡脚本）

```
test = [] //initially an empty array
list = []//an array with 10 json object

for li in list
  get_data url , li, (err,data) -> test.push data 
```

**我的 get_data 方法看起来像**

```
get_data: (url, json_data, callback) ->
  throw "JSON obj is required" unless _.isObject(json_data) 
  post_callback = (error, response) ->
    if error
      callback(error)
    else
      callback(undefined, response)
    return
  request.post {url: url, json: json_data}, post_callback
  return 
```

**问题是我无法将 request.post 的结果收集到“测试”数组** 中我知道我在 for 循环中做错了，但不确定是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:05:46.667

您似乎无法知道所有请求何时返回。你真的应该考虑使用[一个好的异步库](https://github.com/caolan/async)，但是你可以这样做：

```
test = [] //initially an empty array
list = []//an array with 10 json object

on_complete = ->
  //here, test should be full
  console.log test
  return

remaining = list.length
for li in list
  get_data url , li, (err,data) ->
    remaining--
    test.push data
    if remaining == 0
      on_complete() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:39:19.697

仅查看您的代码（而不是尝试），问题似乎是“您何时会收到响应”的问题，而不是“是否会收到响应”的问题。在你的 for 循环运行之后，你所做的就是排队一堆请求。您需要对其进行设计，以便在第一个响应之前不会发生第二个请求，或者（更好）您需要一种方法来累积响应并知道所有响应何时返回（或超时）和然后使用不同的回调将控制权返回给程序的主要部分。

顺便说一句，[这](http://svn.maccherone.com/urlmultiloader/trunk/src/com/maccherone/urlmultiloader/URLMultiLoader.as)是我为 ActionScript 创建的多文件加载器的代码。由于 I/O 在 ActionScript 中也是异步的，因此它实现了我上面描述的累积方法。它使用事件而不是回调，但它可能会给你一些关于如何为 CoffeeScript 实现这一点的想法。

# css - 防止页面 CSS 影响 Chrome 扩展 CSS

> ID：12947306
> 
> 赞同：5
> 
> 时间：2012-10-18T04:48:30.000
> 
> 标签：css, google-chrome-extension

我有一个 Chrome 扩展程序，它将一个 DIV 注入每个页面，并使用扩展程序中包含的样式表来设置该 DIV 的样式。在某些页面上，注入的 DIV 看起来符合预期，但在其他页面上却并非如此。例如，在 StackOverflow 站点之一，`box-shadow`我的元素的属性被覆盖，尽管它是`! important`在我的 CSS 中指定的。

当我检查有问题的元素时，Chrome 告诉我该`box-shadow`属性未应用（它显示为删除线），但它没有告诉我原因：样式级联中没有任何内容指定该属性。

当我将`box-shadow`属性直接添加到元素（没有 CSS 类的好处）时，CSS 检查器视图显示属性与元素相关联，但效果仍然不存在。

**更新**：代码片段：

这是我在代码中指定的内容：

```
 var $bar = $('<div>').addClass('pp_bar').css({
        'box-shadow': '-1px 0px 2px 1px #444',
        '-moz-box-shadow': '-1px 0px 2px 1px #444',
        '-webkit-box-shadow': '-1px 0px 2px 1px #444'
    }); 
```

这是CSS：

```
.pp_bar {
    height: 80%;
    right: -4px;
    top: 0px;
    position: absolute;
    box-shadow: -1px 0px 2px 1px #444 ! important;
    -webkit-box-shadow: -1px 1px 2px 1px #444 ! important;
    -moz-box-shadow: -1px 1px 2px 1px #444 ! important;
} 
```

以下是 Chrome 显示的计算样式：

```
-webkit-box-shadow: #444 0px 0px 1.2000000476837158px 0px;
    element.style - rgb(68, 68, 68) -1px 0px 2px 1px
    .pp_bar - rgb(68, 68, 68) -1px 1px 2px 1px user stylesheet 
```

您可以看到使用的值 ( `#444 0px 0px 1.2000000476837158px 0px`) 与元素样式不同（在我的代码中分配；元素样式覆盖了类值（它们是相同的）。如果没有元素样式设置，类值将被删除。

在正常工作的站点上，浏览器以计算的样式报告以下内容：

```
-webkit-box-shadow: #444 -1px 1px 2px 1px;
    element.style - rgb(68, 68, 68) -1px 0px 2px 1px
    .pp_bar - rgb(68, 68, 68) -1px 1px 2px 1px user stylesheet 
```

接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:02:49.607

`!important`使用标志在元素本身上设置样式。然后，您可以确定该样式正在应用于具有最高优先级的元素。

例子：

```
var div = document.createElement('div');
// Pick any of these (the first two lines have identical results)
div.style.setProperty('box-shadow', '0 0 3px red', 'important');
div.style.cssText += 'box-shadow: 0 0 3px red !important';

// If the HTML is generated from a string:
div.innerHTML = '<div style="box-shadow:0 0 3px!important;">...</div>'; 
```

非示例（不起作用**！**）：

```
div.style.boxShadow = '0 0 3px red !important'; // Does not work! 
```

如果您无法设置内联样式，请尝试在 CSS 选择器中实现更高的[特异性](http://css-tricks.com/specifics-on-css-specificity/)，例如通过包含 ID。

# ios - 为什么来自 HTTPS URL 的视频无法在 iOS 网络浏览器上播放？

> ID：12947313
> 
> 赞同：0
> 
> 时间：2012-10-18T04:49:20.163
> 
> 标签：ios, http, video, browser, https

有人可以解释或帮助我理解为什么这个[HTTPS 视频链接](https://mediastreamer.doit.wisc.edu/uwli-ltc/sandbox/ethansandbox/VideoWall/assets/videos/LesMiserables.mp4) **不能**在 iPad 和 iPhone 的网络浏览器上播放吗？

但是，此[HTTP 链接](http://mediastreamer.doit.wisc.edu/uwli-ltc/sandbox/ethansandbox/VideoWall/assets/videos/LesMiserables.mp4) **确实可以**在 iPad 和 iPhone 的网络浏览器上播放。

两者都指向同一个 Web 服务器上的同一个视频文件。它们只是别名网络链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:38:43.003

您必须在服务器上安装有效的中间证书。

更多相关信息：[无法在 Safari 或 UIWebView 中通过 HTTPS 观看 Quicktime 电影](https://stackoverflow.com/questions/4660189/cannot-view-quicktime-movies-over-https-in-safari-or-uiwebview)

# c++ - 使用 PyMethodDef 注册非静态方法

> ID：12947317
> 
> 赞同：3
> 
> 时间：2012-10-18T04:49:49.440
> 
> 标签：c++, boost-python, python-c-extension

我正在寻找一种将 MyWidget 类的非静态方法注册为 python 方法的方法。

MyWidget 类是一个 QWidget 类，它位于主窗口中。因此，我想在启动应用程序时初始化 python，然后我想从 MyWidget 类中的 MyTableWidget (QTableWidget) 中检索信息。我喜欢将 itemCount 非静态方法注册为 python 方法。我不能这样做，因为非静态对象注册在下面的 myPythonCommands 上给出了错误。

我检查了 boost::python 但找不到方法。据我所知，在 C++ 中创建一个 python 类是文档封面，但不是他的。

我想知道你们中是否有人知道一种方法并指出我正确的方向？

```
class MyTableWidget
{

};

class MyWidget
{

    MyWidget()
    {
        Py_Initialize();
        Py_InitModule("myApp", myPythonCommands);
    }
    ~MyWidget()
    {
        Py_Finalize();
    }

    int itemCount()
    {
        return table.itemCount(); //return item count (in table) to python
    }

    MyTableWidget table;
};
static PyMethodDef myPythonCommands[] = {
                                            {"itemCount",  itemCount, METH_NOARGS, ""}, // here is the register part
                                            {NULL, NULL, 0, NULL}
                                        }; 
```

# r - 从列值中过滤行名称中的数据框

> ID：12947318
> 
> 赞同：2
> 
> 时间：2012-10-18T04:50:06.033
> 
> 标签：r, filtering, dataframe

基本上我有两列（`target_id`和`fpkm`）的数据框。我只想在第一列中保留那些不重复的行名。
例如，在下面的数据框中，您可以看到有两个具有相同名称的行名称（几乎）`comp267138_c0_seq1` `comp267138_c0_seq2`并且来自两者，我只想`comp267138_c0_seq2`在第 2 列中保留一个基于高值的行名称。

```
 target_id        fpkm
comp247393_c0_seq1    3.197885
comp257058_c0_seq4    1.624577
comp242590_c0_seq1    1.750319
comp77911_c0_seq1     1.293059
comp241426_c0_seq1    1.626589
comp288413_c0_seq1   14.828853
comp294436_c0_seq1   11.555596
comp63603_c0_seq1     1.982386
comp267138_c0_seq1    8.594494
comp267138_c0_seq2   11.134958
comp321623_c0_seq1    6.934149 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:04:02.563

It appears you only want to consider part of the `target_id` (the first two components, splitting by `_`)

If your `data.frame` is called `DT`

```
# create   column without the _seqx part
DT$new_id <- sapply(lapply(strsplit(as.character(DT[['target_id']]), '_'), head, 2),
              paste, collapse = '_')
library(plyr)

ddply(DT, .(new_id), function(x) x[which.max(x$fpkm),]) 
```

# java - Java：简单 XML 序列化（simple-xml-2.6.6.jar）给出错误与包含的 XML 文件 &

> ID：12947320
> 
> 赞同：2
> 
> 时间：2012-10-18T04:50:13.113
> 
> 标签：java, android, web-services, xml-parsing

我在[这里](http://simple.sourceforge.net/)使用简单 XML 序列化（simple-xml-2.6.6.jar）将我的 XML 响应从 web 服务转换为 POJO 类。XML是：

```
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/1999/XMLSchema" xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance">
      <SOAP-ENV:Body>
         <return>
           <appointments>
             <appointment>
               <encounterId>211707</encounterId>
               <date>2012-10-16</date>
               <startTime>00:00:00</startTime>
               <ufname>Sam</ufname>
               <ulname>Willis</ulname>
               <reason>Chest Congestion</reason>
               <FacilityId>2837</FacilityId>
               <Notes/>
             </appointment>
          </appointments>
        </return>
      </SOAP-ENV:Body>
 </SOAP-ENV:Envelope> 
```

约会包含约会列表。POJO如下：

```
@Root
public class Return {

    @ElementList
    private List<Appointment> appointments;

    @ElementList
    private List<Appointment> historicalAppointments;

    public List<Appointment> getAppointments() {
        return appointments;
    }

    public void setAppointments(List<Appointment> appointments) {
        this.appointments = appointments;
    }

    public List<Appointment> getHistoricalAppointments() {
        return historicalAppointments;
    }

    public void setHistoricalAppointments(List<Appointment> historicalAppointments) {
        this.historicalAppointments = historicalAppointments;
    }   
} 
```

约会是：

```
@Root
public class Appointment {

    @Element(required=false)
    int encounterId;

    @Element
    Date date;

    @Element
    String startTime;

    @Element(required=false)
    String endTime;

    @Element
    String ufname;

    @Element
    String ulname;

    @Element(required=false)
    int FacilityId;

    @Element(required=false)
    String reason;

    @Element(required=false)
    String Notes;

    @Element(required=false)
    String Status;

    @Element(required=false)
    int EncLock;

    public int getEncounterId() {
        return encounterId;
    }

    public void setEncounterId(int encounterId) {
        this.encounterId = encounterId;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public String getStartTime() {
        return startTime;
    }

    public void setStartTime(String startTime) {
        this.startTime = startTime;
    }

    public String getEndTime() {
        return endTime;
    }

    public void setEndTime(String endTime) {
        this.endTime = endTime;
    }

    public String getUfname() {
        return ufname;
    }

    public void setUfname(String ufname) {
        this.ufname = ufname;
    }

    public String getUlname() {
        return ulname;
    }

    public void setUlname(String ulname) {
        this.ulname = ulname;
    }

    public int getFacilityId() {
        return FacilityId;
    }

    public void setFacilityId(int facilityId) {
        FacilityId = facilityId;
    }

    public String getReason() {
        return reason;
    }

    public void setReason(String reason) {
        this.reason = reason;
    }

    public String getNotes() {
        return Notes;
    }

    public void setNotes(String notes) {
        Notes = notes;
    }

    public String getStatus() {
        return Status;
    }

    public void setStatus(String status) {
        Status = status;
    }

    public int getEncLock() {
        return EncLock;
    }

    public void setEncLock(int encLock) {
        EncLock = encLock;
    }

} 
```

现在，如果我从我的 XML中删除`<SOAP-ENV:Envelope>`&它工作正常。`<SOAP-ENV:Body>`但是当使用这些标签解析 XML 时，我收到错误消息：

```
Exception in thread "main" org.simpleframework.xml.core.ElementException: Element 'Body' does not have a match in class pojo.Return at line 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T23:08:33.597

> 现在，如果我从我的 XML中删除`<SOAP-ENV:Envelope>`&它工作正常。`<SOAP-ENV:Body>`但是当使用这些标签解析 XML 时，我得到了错误。

这就是你的问题。简单 XML 尝试解析您提供给它的整个文档。如果你说：

```
serializer.read(Appointment.class, yourXML) 
```

并且该 XML 的根`<SOAP-ENV:Envelope>`之后是 a`<SOAP-ENV:Body>`然后它不起作用。您需要创建一个或多个类来封装`<SOAP-ENV:*>`XML 中的节点。否则，简单 XML 会感到困惑，并告诉您它没有看到预期的内容。这就是当您删除这些元素时它会起作用的原因：因为 XML 现在看起来与预期的完全一样。

# php - PHP：接口和类继承的正确顺序

> ID：12947322
> 
> 赞同：0
> 
> 时间：2012-10-18T04:50:25.603
> 
> 标签：php, inheritance, interface

我有一个抽象的父类 P，以及两个具体的子类 C1 和 C2。C1 和 C2 从 P 延伸。

与此同时，我有三个接口，iP、iC1 和 iC2。iC1 和 iC2 从 iP 扩展而来。

显然每个子类都应该实现它各自的接口，但是抽象父类也应该实现它的接口吗？

鉴于我将只实例化具体类，并且这些类绑定到 iP（凭借接口继承层次结构），我不确定我是否真的需要 P 来实现 iP？

另一种选择是我在接口端废弃继承层次结构......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:03:41.417

接口的精神是允许解耦，换句话说，将“什么”与“如何”分开。正如您在问题中所说的那样，对每个类进行 hava 和 interface 并不是一个非常好的做法，因为它没有任何意义。

您可以在 iP 中拥有您的类将要实现的所有方法的签名，以及部分实现要在您的子类中重用的公共方法的抽象类 P，以及您计划稍后编写的方法的签名在你的孩子班上。

这样，C1 和 C2 扩展您的抽象类 P 就足够了，因为您被迫实现接口和抽象类中声明的所有方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:07:12.983

在不了解商业模式的情况下很难回答。但是如果你有一个抽象类，我最好的猜测是你不需要 C1 和 C2 的接口，只需要一个 P 实现的接口并声明它是抽象方法。然后子类扩展 P。

# opengl - 裁剪平面附近的 OpenGL

> ID：12947333
> 
> 赞同：5
> 
> 时间：2012-10-18T04:51:56.660
> 
> 标签：opengl, 3d, clipping, glu

我正在为计算机图形课程制作交互式场景。我已经设置了一个程序来生成颜色立方体，然后让我用键盘旋转它们。然而，它们被我相机的近剪辑平面切开：

![被剪裁的颜色立方体](../Images/e55422849d419c48f66af496065068eb.png)

我尝试使用 gluPerspective，但 OpenGL 文档没有给出任何使用示例。我发现它被用于在线示例程序中，并半复制了他们的代码：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective( 65, 1, 0.01, 100 );
glMatrixMode(GL_MODELVIEW); 
```

有什么想法吗？

更新：正如下面评论中所建议的，我尝试使用 glFrustum 代替，代码如下：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glFrustum( -0.5, 0.5, -0.5, 0.5, 0.1, 100 );
glMatrixMode(GL_MODELVIEW); 
```

同样，没有区别。我是否没有正确推送结果矩阵或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:10:04.717

也许您需要将您的对象移动到离相机更远一点的位置。现在似乎它们比 0.0 更接近。

考虑到您的更新“我将立方体从相机移开一整个单位，现在当它们旋转时，它们会被近端和远端剪裁平面剪裁”，您的立方体可能对于您的剪裁深度来说太大（100 - 0.1）。将立方体从相机移开 50，并将剪裁平面设置为 0.1 .. 1000，以确保一切都合适。

如果问题仍然存在，我们可能需要查看您的矩阵代码。

# c - 我的 C-Lua 混合程序中的字符串连接

> ID：12947336
> 
> 赞同：1
> 
> 时间：2012-10-18T04:52:06.757
> 
> 标签：c, lua

我不知道为什么会这样，但确实如此，而且很奇怪。我正在准备一个服务器来了解更多关于套接字编程和 C-Lua API 的信息，它工作得非常好，除了一个（不是那么轻微的）打嗝。

到目前为止，它所做的只是接受连接，检查可读连接，然后从中读取。它将读取的内容传递给特定于该连接的 Lua 状态的 Lua 函数，然后将其回显给客户端（并为服务器打印出来）。

出于某种原因，字符串连接的行为非常奇怪。我无法在一个简单的测试程序中重现它，所以我不知道是什么原因造成的。基本上，这是我的 lua/state.lua 文件：

```
function OnRead(...)
    local s = table.concat({...})
    print(s)
    s = 'You sent the string: "' .. s .. '" and then some stuff at the end.'
    print(s)
    send(s)
end 
```

所以，如您所见，非常简单。第一次打印将正常工作。然而，一旦我连接起来，最后的东西（即，“，然后是结尾的一些东西。）将被写在字符串的开头！所以如果输入是字符串“Hello World。”那么 s 赢了不会变成：

```
You sent the string: "Hello World." and then some stuff at the end. 
```

反而：

```
"and then some stuff at the end.d. 
```

而且我一生都无法弄清楚它为什么会这样做！这是以下代码特有的问题，因为我无法在一个小的简单程序中重现它，但我不知道是什么导致 Lua 脚本如此奇怪地行为不端。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <time.h>
#include <stdlib.h>
#include <stdio.h>
#include <lua.h>
#include <lualib.h>
#include <lauxlib.h>

#define SERVER_PORT 5000

#define READ_OVERFLOW_SIZE_LIMIT 4098 /* maximum socket line length */
#define READ_BUFFER_SIZE 4098
#define BUFFER_SIZE 1024
#define SHORT_BUFFER_SIZE 64

#define STATE_LUA_FILE "lua/state.lua"
/* L_ prefix for Lua registry table keys */
#define L_CONNFD "server_connfd"
/* G_ prefix for Lua global table keys */
#define G_ONREAD_HANDLER "OnRead"

typedef struct node_t {
    struct node_t *next;
    struct node_t *prev;
    int value;
    lua_State *state;
} ll_conn_t;

/*-----------------------------------------------------------------------------
 *  Appends a connection tuple to a linked list. Returns 0 on success, or a -1
 *  on error.
 *  If the connfd value is already present in the linked list, it will error.
 *---------------------------------------------------------------------------*/
int ll_conn_append(ll_conn_t *list, int value, lua_State *state)
{
    ll_conn_t *temp;
    for (temp = list; temp->next != NULL; temp = temp->next)
    {
        if (temp->next->value == value)
            return -1;
    }
    temp->next = (ll_conn_t *)malloc(sizeof(ll_conn_t));
    temp->next->prev = temp;
    temp->next->next = NULL;
    temp->next->value = value;
    temp->next->state = state;
    list->value++;
    return 0;
}   /*-----  end of function ll_conn_append  -----*/

/*-----------------------------------------------------------------------------
 *  Creates a new linked list and returns a pointer to the new linked list.
 *---------------------------------------------------------------------------*/
ll_conn_t *ll_conn_create()
{
    ll_conn_t *list = (ll_conn_t *)malloc(sizeof(ll_conn_t));
    list->next = NULL;
    list->prev = NULL;
    list->value = 0;
    list->state = NULL;
    return list;
}   /*-----  end of function ll_conn_create  -----*/

/*-----------------------------------------------------------------------------
 *  Iterates over a linked list and completely frees up its memory.
 *---------------------------------------------------------------------------*/
void ll_conn_delete(ll_conn_t *list)
{
    ll_conn_t *temp;
    for (temp = list->next; temp != NULL; list = temp, temp = temp->next)
    {
        lua_close(list->state);
        free(list);
    }
}   /*-----  end of function ll_conn_delete  -----*/

/*-----------------------------------------------------------------------------
 *  Searches for and removes the first occurrence of a specific connfd from a
 *  linked list. Returns a boolean which indicates whether the value was found.
 *---------------------------------------------------------------------------*/
int ll_conn_remove(ll_conn_t *list, int value)
{
    ll_conn_t *iter, *temp;
    for (iter = list; iter->next != NULL; iter = iter->next)
    {
        temp = iter->next;
        if (temp->value == value)
        {
            iter->next = temp->next;
            if (temp->next != NULL)
                temp->next->prev = iter;
            lua_close(temp->state);
            free(temp);
            list->value--;
            return 1;
        }
    }
    return 0;
}   /*-----  end of function ll_conn_remove  -----*/

/*-----------------------------------------------------------------------------
 * lua_CFunction
 * Takes a string argument, and writes that string to this Lua state's socket
 * connection.
 *---------------------------------------------------------------------------*/
int luasend(lua_State *L)
{
    int connfd, success, length;
    lua_pushstring(L, L_CONNFD);
    lua_rawget(L, LUA_REGISTRYINDEX);
    connfd = (int)lua_tointegerx(L, -1, &success);
    lua_pop(L, 1);
    if (!success)
    {
        /* error! */
        lua_pushstring(L, "Socket connfd could not be converted to integer!");
        lua_error(L);
    }
    length = luaL_len(L, -1);
    write(connfd, lua_tostring(L, -1), length);
    lua_pop(L, 1);
    return 0;
}   /*-----  end of function luasend  -----*/

/*-----------------------------------------------------------------------------
 *  Takes as input a connected socket file descriptor and builds a new Lua
 *  state for that socket.
 *---------------------------------------------------------------------------*/
lua_State *l_create_state(int connfd)
{
    lua_State *L = luaL_newstate();
    luaL_openlibs(L);
    lua_pushstring(L, L_CONNFD);
    lua_pushinteger(L, connfd);
    lua_rawset(L, LUA_REGISTRYINDEX);
    lua_register(L, "send", *luasend);
    luaL_dofile(L, STATE_LUA_FILE);
    return L;
}   /*-----  end of function l_create_state  -----*/

/*-----------------------------------------------------------------------------
 *  Reads from the Lua state's connection, and calls the Lua handler for each
 *  line it encounters in the read buffer.
 *---------------------------------------------------------------------------*/
void l_read_conn(lua_State *L, int connfd)
{
    static char buffer[READ_BUFFER_SIZE];
    int count = 1, i, start, overflow_count = 0, overflow_size = 0, len;
    while (1)
    {
        ioctl(connfd, FIONREAD, &len);
        if (len == 0)
            break;
        count = read(connfd, buffer, READ_BUFFER_SIZE);
        if (count == -1)
        {
            /* TODO error handling */
            break;
        }
        if (count == 0)
        {
            /* EOF */
            break;
        }
        start = 0;
        for (i = 0; i < count; i++)
        {
            if (buffer[i] != '\n')
                continue;
            if (!overflow_count)
                lua_getglobal(L, G_ONREAD_HANDLER);
            /* We won't be passing newlines to the handler. Otherwise, it would
             * be 1 + i - start. */
            lua_pushlstring(L, buffer + start, i - start);
            lua_call(L, 1, 0);
            overflow_count = overflow_size = 0;
            start = i + 1;
        }
        /* If there's bits in the buffer that aren't terminated with a newline,
         * add it as overflow to the stack.
         * NOTE: THIS IS A REALLY BAD IDEA !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
        if (start < count)
        {
            if (!overflow_count)
                lua_getglobal(L, G_ONREAD_HANDLER);
            lua_pushlstring(L, buffer + start, count - start);
            overflow_size += count - start;
            overflow_count++;
            /* let's include this check to make this a marginally less bad idea
             * in order to soothe my OCD worries */
            if (overflow_size >= READ_OVERFLOW_SIZE_LIMIT)
                break;
        }
    }
    if (overflow_count)
        lua_call(L, overflow_count, 0);
}   /*-----  end of function l_read_conn  -----*/

int main(int argc, char *argv[])
{
    int listenfd = 0, connfd = 0, maxfd = 0;
    struct sockaddr_in serv_addr, conn_addr;
    char sendBuff[BUFFER_SIZE];
    lua_State *L;
    fd_set fds;
    ll_conn_t *connections = ll_conn_create();
    /* iterators */
    ll_conn_t *temp;
    int n;
    unsigned int i, j;

    listenfd = socket(AF_INET, SOCK_STREAM, 0);
    if (listenfd == -1)
    {
        /* TODO error handling */
    }
    memset(&serv_addr, '0', sizeof(serv_addr));
    memset(sendBuff, '0', BUFFER_SIZE);

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    serv_addr.sin_port = htons(SERVER_PORT);

    if (bind(listenfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) == 0)
    {
        /* TODO error handling */
    }

    if (listen(listenfd, 10) == -1)
    {
        /* TODO error handling */
    }

    while (1)
    {
        FD_ZERO(&fds);
        FD_SET(listenfd, &fds);
        if (listenfd >= maxfd)
            maxfd = listenfd + 1;
        for (temp = connections->next; temp != NULL; temp = temp->next)
            FD_SET(temp->value, &fds);
        if ((n = select(maxfd, &fds, NULL, NULL, NULL)) > 0)
        {
            if (FD_ISSET(listenfd, &fds))
            {
                i = sizeof(conn_addr);
                connfd = accept(listenfd, (struct sockaddr *)&conn_addr, &i);
                if (connfd < 0)
                {
                    /* TODO error handling */
                }
                L = l_create_state(connfd); /* create new state */
                if (ll_conn_append(connections, connfd, L) < 0)
                {
                    /* TODO error handling */
                }
                if (connfd >= maxfd)
                    maxfd = connfd + 1;
                printf("New connection from %s.\n",
                        inet_ntoa(conn_addr.sin_addr));
            }
            /* we do iteration this way so that we don't segfault!!! */
            for (temp = connections->next; temp != NULL;)
            {
                connfd = temp->value;
                L = temp->state;
                temp = temp->next;
                if (FD_ISSET(connfd, &fds))
                {
                    /* check connection status */
                    ioctl(connfd, FIONREAD, &j);
                    if (j == 0)
                    {
                        /* the socket should now be removed! */
                        ll_conn_remove(connections, connfd);
                    }
                    else
                    {
                        /* read from connection */
                        l_read_conn(L, connfd);
                    }
                }
            }
        }
        if (n < 0)
        {
            /* TODO error handling */
        }
    }
    return EXIT_SUCCESS;
}       /*----------  end of function main  ----------*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:56:33.650

因为你的 's' 包含由 telnet 或你使用的任何东西发送的换行符。[从http://lua-users.org/wiki/StringTrim](http://lua-users.org/wiki/StringTrim)获取修剪实现之一并使用`s = 'You sent the string: "' .. trim(s) .. '" and then some stuff at the end.'`或类似的东西。

更新：对不起，它更有可能是回车。但没关系，就您的问题而言。

# android - Android 应用程序可以工作，但过了一会儿它崩溃了

> ID：12947340
> 
> 赞同：0
> 
> 时间：2012-10-18T04:52:25.617
> 
> 标签：android

这个应用程序运行良好，直到在其中输入数字 30 秒后，它才崩溃。我认为这是一个内存问题，但我可能是错的。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:ems="10"
    android:inputType="numberSigned|numberDecimal" 
    android:imeOptions="actionDone">

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/editText1"
    android:ems="10" 
    android:inputType="numberSigned|numberDecimal"
    android:imeOptions="actionDone"/>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/editText1"
    android:layout_alignParentLeft="true"
    android:text="@string/C"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/editText2"
    android:layout_alignParentLeft="true"
    android:text="@string/F"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

```
public class MainActivity extends Activity {

EditText text1, text2, text3, text4, text5;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text1 = (EditText) findViewById(R.id.editText1);
    text1.addTextChangedListener(watcher1);
    text2 = (EditText) findViewById(R.id.editText2);
    text2.addTextChangedListener(watcher2);

    }
    // Celcius
    TextWatcher watcher1 = new TextWatcher() {
         public void afterTextChanged(Editable s) {
             if(text1.getText().toString().length() == 0)
             {
                 return;
             }
                if (text1.hasFocus() == true ) {
                    float inputValue = Float.parseFloat(text1.getText().toString());
                    text2.setText(String.valueOf(convertCelsiusToFahrenheit(inputValue)));
                }
            }
            public void beforeTextChanged(CharSequence s, int start, int count,
                            int after) {
            }
            public void onTextChanged(CharSequence s, int start, int before,
                            int count) {
            }
        };
    // Fahrenheit   
    TextWatcher watcher2 = new TextWatcher() {
        public void afterTextChanged(Editable s) {
            if(text2.getText().toString().length() == 0)
            {
                return;
            }
                if (text2.hasFocus() == true ) {
                    float inputValue = Float.parseFloat(text2.getText().toString());
                    text1.setText(String.valueOf(convertFahrenheitToCelsius(inputValue)));
            }
        }
        public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
        }
        public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
        }
    };

//Converts C to F
private float convertCelsiusToFahrenheit(float celsius) {
 return (float) ((celsius * 1.8) + 32);
}

//Converts F to C
private float convertFahrenheitToCelsius(float fahrenheit) {
 return (float) ((fahrenheit - 32) / 1.8);
    }

} 
```

.

```
 10-18 13:57:18.201: D/AndroidRuntime(1280): Shutting down VM
10-18 13:57:18.201: W/dalvikvm(1280): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-18 13:57:18.291: E/AndroidRuntime(1280): FATAL EXCEPTION: main
10-18 13:57:18.291: E/AndroidRuntime(1280): java.lang.NumberFormatException: Invalid float: "-"
10-18 13:57:18.291: E/AndroidRuntime(1280):     at java.lang.StringToReal.invalidReal(StringToReal.java:63)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at java.lang.StringToReal.initialParse(StringToReal.java:151)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at java.lang.StringToReal.parseFloat(StringToReal.java:304)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at java.lang.Float.parseFloat(Float.java:300)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at com.thenegative.temerature.converter2.MainActivity$1.afterTextChanged(MainActivity.java:31)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.widget.TextView.sendAfterTextChanged(TextView.java:7095)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:8743)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.SpannableStringBuilder.sendAfterTextChanged(SpannableStringBuilder.java:970)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:497)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.SpannableStringBuilder.delete(SpannableStringBuilder.java:212)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.SpannableStringBuilder.delete(SpannableStringBuilder.java:30)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.method.BaseKeyListener.backspaceOrForwardDelete(BaseKeyListener.java:94)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.method.BaseKeyListener.backspace(BaseKeyListener.java:49)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.method.BaseKeyListener.onKeyDown(BaseKeyListener.java:155)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.text.method.NumberKeyListener.onKeyDown(NumberKeyListener.java:138)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.widget.TextView.doKeyDown(TextView.java:5240)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.widget.TextView.onKeyDown(TextView.java:5059)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.KeyEvent.dispatch(KeyEvent.java:2609)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.View.dispatchKeyEvent(View.java:7086)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1892)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1369)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.app.Activity.dispatchKeyEvent(Activity.java:2356)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1819)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3575)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewRootImpl.deliverKeyEvent(ViewRootImpl.java:3531)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3113)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2930)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.os.Looper.loop(Looper.java:137)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at java.lang.reflect.Method.invokeNative(Native Method)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at java.lang.reflect.Method.invoke(Method.java:511)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-18 13:57:18.291: E/AndroidRuntime(1280):     at dalvik.system.NativeStart.main(Native Method)
10-18 13:57:18.462: D/dalvikvm(1280): GC_CONCURRENT freed 275K, 4% free 8188K/8519K, paused 46ms+5ms, total 214ms 
```

我认为这是一个内存问题，因为在我在编辑文本中输入数字大约 30 秒到 40 秒后它就崩溃了，并且在 logcat 中它一直说“GC_CONCURRENT 释放 434K，7% 空闲 8167K/8711K，暂停 16 毫秒 + 16 毫秒，总共 173 毫秒”和看起来也很慢。我也认为这可能只是一个模拟器问题。

Edit1：问题仅在我删除时发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:00:16.510

您可以使用 try/catch 处理 NumberFormatException 并在异常情况下显示 Toast。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:59:17.213

尝试将您的支票更新为：

```
if(text1.getText().toString().length() == 0)
{
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:03:05.933

使用条件：--

```
if(!text1.getText().toString().equalIngorecase(""))
{
       float inputValue = Float.parseFloat(text1.getText().toString());
       text2.setText(String.valueOf(convertFahrenheitToCelsius(inputValue)));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:03:32.793

您不能将空字符串解析`""`为`Float`. 将您的代码（第 50 行）放入 try 块并 catch `java.lang.NumberFormatException`。

更多信息[在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Float.html#parseFloat%28java.lang.String%29)。

# asp.net - 即使使用控制器定义了动作名称，MVC4 链接也会自动重定向到默认 INDEX 页面/动作

> ID：12947341
> 
> 赞同：1
> 
> 时间：2012-10-18T04:52:30.827
> 
> 标签：asp.net, .net, asp.net-mvc-3, asp.net-mvc-4

我正在 mvc4 中创建 Web 移动应用程序。我的问题是当我单击应用程序中的特定链接时，它运行良好，但有时它会自动重定向到`INDEX`设置为默认页面的`global.asax`页面

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional         } // Parameter defaults
            ); 
```

现在我不知道为什么它会自动重定向到 INDEX 页面，即使我已经定义了控制器和动作名称，它显示重定向为，

```
<a href='@(Url.Action( "ActivityWall", "Home"))' > </a> 
```

从逻辑上讲，它应该重定向到“ `ActivityWall`”页面，它确实如此。但有时它只会转到 INDEX 页面。然后当我清除我的 cookie 问题将再次解决但一段时间后它再次开始重定向到 INDEX 页面。

我昨天还发布了与 cookie 问题相关的问题，但我认为这不是主要问题。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:13:15.773

您需要使用 Fiddler 或 firebug 等来捕捉这一点，并观察重定向是否真的来自应用程序或是否发生了其他事情。您上面的链接应该继续指向 /Home/ActivityWall，但是如果没有在 ActivityWall 中看到您的代码，我们无法确定那里发生了什么。

观看您点击该链接的每一个齿的位置。如果重定向返回，要么您有一个执行重定向的操作过滤器，要么您的代码出于某种您不知道的原因执行此操作，或者它的安全配置错误。

# jquery - 无法成功使用 Jquery .delegate() 方法

> ID：12947342
> 
> 赞同：0
> 
> 时间：2012-10-18T04:52:31.110
> 
> 标签：jquery, html, delegates

拼命尝试使 Jquery 的 .delegate 方法按我的需要工作。我希望委托函数确认更改或单击从循环返回的单选按钮。

但是，使用委托方法不适用于我的代码。

```
$("#MailGroupResults").delegate("input[type=radio]", "click", function () {
        alert('works');
});
<div class="secResultCon" id="MailGroupResultsCon">
  <div class="secResult" id="MailGroupResults">
  <!-- Following Code is generated by jquery loop -->
  <p>Mailbox Permissions</p>
  <div class="optionResources">
   <div class="optionResourceMini">
    Group
   </div>

  <div class="optionResourceMini">

  <div class="switch">
   <input type="radio" id="11" class="checkbox" name="Jindabyne Tickets">
   <input type="radio" id="10" class="checkbox" name="Jindabyne Tickets" checked="">
   <label class="cb-enable"><span>On</span></label>
   <label class="cb-disable selected"><span>Off</span></label>
  </div>
 </div>
 </div>
</div> 
```

**- 什么不起作用**

我使用了一个 javascript 函数，它使用 ajax 从数据库中提取信息。它将显示一个邮箱列表，每个邮箱都分配有一个单选按钮，根据结果启用或禁用。

当我单击单选按钮时，下面的功能不做任何事情，这意味着警报框。但是，如果我将生成的 html 复制到我的代码中，它将起作用……令人困惑。

```
$("#MailGroupResults").delegate("input[type=radio]", "click", function () {
        alert('works');
}); 
```

**Javascript 如何生成子元素**

```
function GetUserMailGroups(userName) {
        $("#Mailloading").show();
        $.ajax({
            type: 'POST',
            url: 'ADMethods.asmx/GetEmailGroups',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: '{ userName : "' + userName + '"}',
            success: function (response) {
                $("#Mailloading").fadeOut();
                GetMailGroups = false;
                var memberOfMail = response.d;
                i = 0;
                // Create Javascript Array to contain the Mailbox information so that we can run check against when 
                // a switch is pressed. Therefore, on form submission we can identify changes of permissions
                arrSize = memberOfMail.length;
                arrMail = new Array(arrSize);
                $.each(memberOfMail, function (index, MailInfo) {
                    arrMail[i] = new Array(2);
                    var html = '<div class="optionResources">';
                    var html = html + '<div class="optionResourceMini">' + MailInfo.GroupName + '</div>';
                    var html = html + '<div class="optionResourceMini">';
                    var html = html + '<div class="switch">';
                    // Apply returned data to array
                    arrMail[i][0] = MailInfo.GroupName
                    if (MailInfo.MemberOf) {
                        var html = html + '<input type="radio" id="' + i + '1" class="checkbox" name="' + MailInfo.GroupName + '" checked />';
                        var html = html + '<input type="radio" id="' + i + '0" class="checkbox" name="' + MailInfo.GroupName + '" />';
                        var html = html + '<label class="cb-enable selected"><span>On</span></label>';
                        var html = html + '<label class="cb-disable "><span>Off</span></label>';
                        arrMail[i][1] = true;
                    } else {
                        var html = html + '<input type="radio" id="' + i + '1" class="checkbox" name="' + MailInfo.GroupName + '" />';
                        var html = html + '<input type="radio" id="' + i + '0" class="checkbox" name="' + MailInfo.GroupName + '" checked />';
                        var html = html + '<label class="cb-enable"><span>On</span></label>';
                        var html = html + '<label class="cb-disable selected"><span>Off</span></label>';
                        arrMail[i][1] = false;
                    }

                    var html = html + '</div>';
                    var html = html + '</div>';
                    var html = html + '</div> ';
                    $("#MailGroupResults").append(html);
                    // Increase i integer for array index.
                    i++;
                })
            }
        });
    } 
```

我设法让相同的方法在 jsfiddle 中工作。缩小范围是非常基本的方法，即循环。

[http://jsfiddle.net/aFSmF/4/](http://jsfiddle.net/aFSmF/4/) [JS 小提琴](http://jsfiddle.net/aFSmF/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:05:50.403

Put the delegate in document.ready. you are calling delegate on empty array as the DOM is not initialized yet and does not contain element with that ID. Moving that delegate function into document.ready will have events properly registered. That was the basic reason your jsfiddle is working and actual code is not working

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:20:08.103

[delegate](http://api.jquery.com/delegate/)[`on`](http://api.jquery.com/on/)在 jQuery 1.8中被替换为。

```
$("#MailGroupResults").delegate("input[type=radio]", "click", function () {
    alert('works');
}); 
```

使用 on 应该看起来像这样。

```
$("#MailGroupResults").on("click", 'input[type="radio"]', function () {
    alert('works');
}); 
```

或者

```
$(document).on("click", '#MailGroupResults input[type="radio"]', function () {
    alert('works');
}); 
```

还要给您的单选按钮一个名称属性，并且 HTML4 中的 id 不能以数字开头。

# tsql - SQL 检查 where 语句中某个列的值是否为空，如果是，则将其设置为某个值

> ID：12947344
> 
> 赞同：0
> 
> 时间：2012-10-18T04:52:55.203
> 
> 标签：tsql, sql-server-2008-r2, where, isnull

我有这个 SQL 查询

```
SELECT * 
FROM   ##tempt 
WHERE  ( minstock <= 0 
         AND numitems - backorder - cstock >= 1 ) 
        OR ( minstock >= 1 
             AND numitems - backorder + minstock - cstock >= 1 ) 
```

我将如何检查的值是否`minstock`为空，如果为空，则将其设置为某个数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T04:53:52.877

您可以使用`isnull(minstock, 0)`- 如果 minstok 为空，它将返回 0。您还可以使用`coalesce(minstock, other_field, 0)`两个以上的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:55:13.957

您不能`UPDATE`在同一 SQL 查询中更新该列，但如果数据库中给定行的特定列的值为 NULL，则可以使用另一个值，使用该`ISNULL()`函数，如下所示：

```
SELECT * 
FROM   ##tempt 
WHERE  ( ISNULL(minstock, 0) <= 0 
         AND numitems - backorder - cstock >= 1 ) 
    OR ( minstock >= 1 
         AND numitems - backorder + minstock - cstock >= 1 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:56:17.683

```
SELECT * 
FROM   ##tempt 
WHERE  ( ISNULL(minstock,0)<= 0 
     AND numitems - backorder - cstock >= 1 ) 
    OR ( ISNULL(minstock,0)>= 1 
         AND numitems - backorder + ISNULL(minstock,0)- cstock >= 1 ) 
```

# haskell - 检查一棵树是否是完美树

> ID：12947345
> 
> 赞同：2
> 
> 时间：2012-10-18T04:53:01.210
> 
> 标签：haskell, tree, boolean

我想编写一个 Haskell 函数来检查一棵树是否是一棵完美的树。我知道如果树的所有叶子都在相同的深度，那么一棵树就是完美的。

我知道我会这样开始

`perfectTree :: Tree a -> Bool`

但是看到我对实际定义的掌握不是太强，任何人都可以真正解释什么是完美的树，以及如何在 Haskell 中检查一棵树是否完美

我应该包括我定义的数据类型如下：

```
data Tree a = Leaf | Node a (Tree a) (Tree a) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T05:12:55.507

一种方法是定义一个辅助函数`perfectTreeHeight :: Tree a -> Maybe Int`，如果它是完美的，则返回`Just`树的高度，`Nothing`否则。这更容易实现，因为您实际上从递归调用中获得了高度，因此您可以比较它们。（提示：使用do-notation）

`perfectTree`那么只是这个函数的一个简单的包装器。

```
import Data.Maybe (isJust)

perfectTree :: Tree a -> Bool
perfectTree = isJust . perfectTreeHeight

perfectTreeHeight :: Tree a -> Maybe Int
perfectTreeHeight = ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T05:13:26.550

您是否尝试过递归地思考这个问题？

* * *

**解：**树的子树必须*都是*完美树。此外，这些子树的深度应该相等。**结尾。**

我希望这个高级解决方案/想法有所帮助。我避免给出实际定义，`perfectTree`因为我缺乏 a 的实际定义`Tree`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:39:37.423

我假设你的树看起来像这样......

```
data Tree a = Leaf a | Branch (Tree a) (Tree a) deriving Show 
```

现在，我们可以按照以下方式定义递归`height`函数：

```
height :: Tree a -> Maybe Int
height (Leaf _) = Just 1
height (Branch a b) = ??? 
```

Ind the second case (???), we want to add one to the height of the subtrees, but only if they are perfect, and only if they have the same height. Let's define a helper function, `same`, which takes the heights of the subtrees, and returns a Maybe Int containing their height, but only if they are both perfect and have the same height.

```
same :: Eq a => Maybe a -> Maybe a -> Maybe a
same (Just a) (Just b) = if a == b then Just a else Nothing
same _ _ = Nothing 
```

Now we can finish the `height` function. All it needs to do is add 1 to the height of the subtrees.

```
height :: Tree a -> Maybe Int
height (Leaf _) = Just 1
height (Branch a b) = maybe Nothing (Just . (1+)) subTreeHeight
  where subTreeHeight = same (height a) (height b) 
```

And here's how to use it.

```
main :: IO ()
main = do
  let aTree = (Leaf 'a')
  print aTree
  print $ height aTree

  let bTree = Branch (Leaf 'a') (Leaf 'b')
  print bTree
  print $ height bTree

  let cTree = Branch (Leaf 'a') (Branch (Leaf 'b') (Leaf 'c'))
  print cTree
  print $ height cTree

  let dTree = Branch (Branch (Leaf 'a') (Leaf 'b')) (Branch (Leaf 'c') (Leaf 'd'))
  print dTree
  print $ height dTree 
```

When I run this, I get:

```
Leaf 'a'
Just 1
Branch (Leaf 'a') (Leaf 'b')
Just 2
Branch (Leaf 'a') (Branch (Leaf 'b') (Leaf 'c'))
Nothing
Branch (Branch (Leaf 'a') (Leaf 'b')) (Branch (Leaf 'c') (Leaf 'd'))
Just 3 
```

# gwt - GWT 真实世界项目

> ID：12947347
> 
> 赞同：-1
> 
> 时间：2012-10-18T04:53:12.623
> 
> 标签：gwt, web

除了下面由 GWT 提供支持的现实世界项目列表

1.  [http://gwtgallery.appspot.com/](http://gwtgallery.appspot.com/)
2.  [https://developers.google.com/web-toolkit/examples/#real-world-projects](https://developers.google.com/web-toolkit/examples/#real-world-projects)
3.  [http://www.ongwt.com](http://www.ongwt.com)（最后更新：2011 年 6 月 30 日）
4.  [http://www.gwtsite.com/whos-using-gwt/](http://www.gwtsite.com/whos-using-gwt/)

我还能在哪里找到项目列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:16:28.240

一般来说，GWT 势头强劲，此类项目在网络中的数量呈指数级增长。

使用 GWT 有很多很棒的项目：

*   [奥德诺克拉斯尼基](http://odnoklassniki.ru)。拥有 2530 万活跃用户的俄罗斯社交网络

*   [谷歌版主](http://google.com/moderator)。允许对用户提交的问题、建议和想法进行投票并使用众包进行排名的服务

*   [谷歌 Orkut](http://orkut.com)。拥有超过 3300 万活跃用户的社交网络。与其他 Google 服务（GTalk、Google Video 等）紧密集成

*   [谷歌组](https://groups.google.com)。支持讨论组和线程对话的服务

*   [谷歌广告词](http://adwords.google.com)。程序可以在每次点击成本模式下创建广告和推广产品

*   [谷歌广告](http://google.com/adsense)。计划将 AdWords 广告投放到特定网站

*   [谷歌文档查看器](https://docs.google.com/viewer)。Google Docs平台上的服务，允许直接在浏览器中查看不同格式的文档

*   [谷歌网络字体](http://google.com/webfonts)。允许在网站上使用数百种以前不安全的字体的网络字体目录

Google 中肯定还有其他一些项目使用 GWT。例如，可能是[Google Maps](https://maps.google.com/)和[Google Offers](https://google.com/offers/home)的地理部分。

但除了强大的成功 GWT 项目之外，还应该提到轰动的项目[Google Wave](http://wave.google.com)和[Google Buzz](http://buzz.google.com)已经停产。第一个是用于实时通信和协作的在线工具。Buzz 是集成到 Gmail 中的社交网络工具。

以及各种小型 GWT 项目：

*   [财务预算](http://finbudget.com)

*   [3D端口](http://3d-port.com)

*   [凯迪斯](http://kdice.com)

*   [GPokr](http://gpokr.com)

*   [随机主页](http://therandomhomepage.com)

*   [交通信息](http://gtraffic.info)

另请参阅 google 给我的这些链接：

[建站 GWT](http://www.quora.com/What-web-applications-use-Google-Web-Toolkit-%28GWT%29)

[将 GWT 用于生产应用程序](http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/a2991a0000efab40you?pli=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:49:44.257

以下是真实世界项目的汇编：

*   [http://gwtreferencelist.appspot.com/](http://gwtreferencelist.appspot.com/)

（我发现谷歌引用的它[正在使用 GWT——你呢？](http://blog.oio.de/2011/12/14/google-is-using-gwt-and-you/)）

# wcf - 如何允许某些特定 IP 地址访问我的 WCF 服务

> ID：12947349
> 
> 赞同：1
> 
> 时间：2012-10-18T04:53:16.547
> 
> 标签：wcf

我有一个 WCF 服务返回 xml。我只想要一个 IP 地址来访问它，例如：10.0.0.5

有人可以告诉我我该怎么做。请告诉我防火墙和 IIS 以外的其他信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:29:18.303

您需要添加 ip 过滤，类似于下一个 - [https://stackoverflow.com/a/803813/182344](https://stackoverflow.com/a/803813/182344)

或者使用[ServiceAuthorizationManager.CheckAccessCore](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceauthorizationmanager.checkaccesscore.aspx)从 OperationContext 获取客户端 IP。

# .htaccess - 301 重定向以删除尾随连字符

> ID：12947350
> 
> 赞同：0
> 
> 时间：2012-10-18T04:53:24.820
> 
> 标签：.htaccess, redirect, pattern-matching, bulk

由于网址末尾的尾随 - （连字符），我有数百个重复页面。

现在我可以分别重定向每一个并且它可以工作，但我正在寻找一个批量/模式匹配重定向，它将重定向这些以节省大量工作。

[http://example.co.uk/example/example-](http://example.co.uk/example/example-) 301 重定向也 [http://example.co.uk/example/example](http://example.co.uk/example/example)

我试图创建一个带有查询字符串重定向的查询字符串重定向，我知道它适用于问号，但我没有运气。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:14:02.010

这应该可以解决问题：

```
RewriteRule ^(.*)-$ http://www.example.com/$1 [L,R=301] 
```

# sql - 计算活动总和

> ID：12947351
> 
> 赞同：1
> 
> 时间：2012-10-18T04:53:28.847
> 
> 标签：sql, oracle

我有一张包含以下信息的表格

```
activity     cost    order   date  other information
10            1       100     --
20            2       100
10            1       100
30            4       100
40            4       100
20            2       100
40            4       100
20            2       100
10            1       101
10            1       101
20            1       101 
```

我的要求是获得工作订单中所有活动的总和，例如：订单 100

1+2+4+4=11

1（针对活动 10） 2（针对活动 20） 4（针对活动 30）等

我尝试使用 group by，计算需要很多时间。仓库中有 10 万多条记录。是否有任何有效方式的可能性。

```
SELECT SUM(MIN(cost))
FROM COST_WAREHOUSE a
WHERE   order = 100
GROUP BY (order, ACTIVITY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:57:52.097

您可以使用以下查询来获取（活动、订单、成本）的不同元组的成本总和

```
SELECT SUM(COST)
FROM
    (SELECT DISTINCT activity, order, cost 
     FROM COST_WAREHOUSE WHERE order = 100) AS A 
```

# java - Java com.sun.media.codec.video.jmpx.Jmpx@1751a9e 错误

> ID：12947357
> 
> 赞同：0
> 
> 时间：2012-10-18T04:54:01.693
> 
> 标签：java, jmf

我从互联网上下载了以下代码，以前运行良好，但现在显示错误：

```
import com.sun.media.codec.video.jmpx.*;
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Frame;
import java.awt.GridLayout;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.IOException;
import java.net.URL;
import javax.media.ControllerEvent;
import javax.media.ControllerListener;
import javax.media.EndOfMediaEvent;
import javax.media.Manager;
import javax.media.Player;
import javax.media.PrefetchCompleteEvent;
import javax.media.RealizeCompleteEvent;
import javax.media.Time;
import javax.swing.*;
import javax.swing.event.InternalFrameAdapter;
import javax.swing.event.InternalFrameEvent;

public final class JavaVideo extends Frame//UtilityMethods
{
    Player player=null;
    Player newPlayer=null;
    JDesktopPane desktopPane=null;
    JMFrame jmFrame=null;
    String filename;
    URL url=null;
    public int windowWidth=0;
    public int windowHeight=0;
    Dimension screenSize=null;
    JPanel btnPanel=null;
    static JButton btnVideo1=null;
    static JButton btnVideo2=null;
    static JButton btnClose=null;
    //UtilityMethods um=new UtilityMethods();

   public JavaVideo()
    {}      

    public JavaVideo(String file_name)
    {
        //Determine the current screen resolution
        screenSize=Toolkit.getDefaultToolkit().getScreenSize();
        //Toolkit toolkit = 

        //Add Desktop Pane
        setTitle("IP Camera");
        setLayout(new BorderLayout());
        desktopPane=new JDesktopPane();
        desktopPane.setDoubleBuffered(true);

        add("Center", desktopPane);

        //Add button pane and buttons to the main window
        btnPanel=new JPanel();
        btnPanel.setLayout(new GridLayout(20, 20));

        btnVideo1=new JButton("Video 1");
        btnVideo2=new JButton("Video 2");
        btnClose=new JButton("Close");
        btnClose.setMnemonic(KeyEvent.VK_C);

        btnPanel.add(btnVideo1);
        btnPanel.add(btnVideo2);
        btnPanel.add(btnClose);

        add("East", btnPanel);
        //End of adding buttons

        //Following line not working
        setSize(screenSize.width-50,screenSize.height-50);

        setLocationRelativeTo(null);

        setVisible(true);

        try
        {
            UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
        }
        //catch(ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e)
        catch(Exception e)
        {
            System.out.println("Error in setLookAndFeel :: "+e);
        }

        addWindowListener( new WindowAdapter() 
        {
            @Override
            public void windowClosing(WindowEvent we) 
            {
                System.exit(0);
            }
        } );

        btnClose.addActionListener(new ActionListener() 
        {

            @Override
            public void actionPerformed(ActionEvent e) 
            {
               dispose(); //It releases all memory for this window and make the window undisplayable
            }
        });

        Manager.setHint(Manager.LIGHTWEIGHT_RENDERER, true);

        this.filename="file:"+file_name;
        playVideoFile(filename);
    }

    public void playVideoFile(String fname)
    {
        String mediaFile=fname;

        try
        {
            //Create an url from the filename
            if((url=new URL(mediaFile))==null)
            {
                //Fatal("Can't build url for "+mediaFile);
                System.out.println("Can't build url for "+mediaFile);
                return;
            }

            //Create an instance of a player for this media
            try
            {
                player=Manager.createPlayer(url);
            }
            catch(Exception e)
            {
                System.out.println("Error in Creating Player :: "+e);
            }
        }
        catch(IOException ioE)
        {
            System.out.println("IO Error while Creating URL :: "+ioE);
        }
        catch(Exception e)
        {
            System.out.println("Error while Creating URL :: "+e);
        }

        if(player!=null)
        {
            //this.filename=filename;
            jmFrame=new JMFrame(player,filename);
            desktopPane.add(jmFrame);
        }
    }

    public Dimension SystemCurrentResolution()
    {
        Toolkit toolkit=Toolkit.getDefaultToolkit();
        Dimension dim=toolkit.getScreenSize();
        return dim;
    }

    public static void main(String[] args)
    {
        String file="/home/aruna/Desktop/JavaFiles/video/delta.mpg";
        JavaVideo javaVideo = new JavaVideo(file);
    }
}

class JMFrame extends JInternalFrame implements ControllerListener 
{
    Player mplayer;
    Component visual = null;
    Component control = null;

    int videoWidth = 0;
    int videoHeight = 0;
    int controlHeight = 30;
    int insetWidth = 10;
    int insetHeight = 30;
    boolean firstTime = true;

    public JMFrame(Player player, String title) 
    {
        super(title, true, true, true, true);
        getContentPane().setLayout( new BorderLayout() );
        setSize(320, 10);
        setLocation(50, 50);
        setVisible(true);
        mplayer = player;
        mplayer.addControllerListener((ControllerListener) this);
        mplayer.realize(); 

        addInternalFrameListener( new InternalFrameAdapter() 
        {
            @Override
            public void internalFrameClosing(InternalFrameEvent ife) 
            {
                mplayer.close();
            }
        } );
    }

    @Override
    public void controllerUpdate(ControllerEvent ce) 
    {
        if (ce instanceof RealizeCompleteEvent) 
        {
            mplayer.prefetch();
        } 
        else if (ce instanceof PrefetchCompleteEvent) 
        {
            if (visual != null)
                return;

            if ((visual = mplayer.getVisualComponent()) != null) 
            {
                Dimension size = visual.getPreferredSize();
                videoWidth = size.width;
                //videoWidth = 800;
                videoHeight = size.height;
                //videoHeight = 600;
                getContentPane().add("Center", visual);
            }
            else
                videoWidth = 320;

            if ((control = mplayer.getControlPanelComponent()) != null) 
            {
                controlHeight = control.getPreferredSize().height;
                getContentPane().add("South", control);
            }

            JavaVideo jv=new JavaVideo();

            setSize(videoWidth + insetWidth,videoHeight + controlHeight + insetHeight);
            //setSize(jv.windowWidth-100,jv.windowHeight-100);
            validate();
            mplayer.start();
        }
        else if (ce instanceof EndOfMediaEvent) 
        {
            mplayer.setMediaTime(new Time(0));
            mplayer.start();

        }
    }
} 
```

它在执行 mplayer.realize 时显示以下错误行

```
 Error: Unable to realize com.sun.media.codec.video.jmpx.Jmpx@1751a9e 
```

好吧，让我告诉我 jmpx 包中没有 Jmpx@1751a9e。我不知道如何得到一个。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:27:55.177

1.  使用以下命令将所有 .so 文件从 /JMF-2.1.1e/lib/ 复制到 /usr/lib： sudo cp *.so /usr/lib/
2.  编译你的代码:)

# java - 无法解析超类

> ID：12947358
> 
> 赞同：1
> 
> 时间：2012-10-18T04:54:04.167
> 
> 标签：java, android, noclassdeffounderror, superclass

也许这是一个新手问题，因为我还是 java/android..sorry.. 的新手。我在 onclick(SettingActivity) 收到以下错误日志。我发现一些类似的帖子谈论了我已经从城市飞艇库导入的 jar 文件。希望有人可以帮助我度过难关。非常感谢！

```
Unable to resolve superclass of Lcom/app/android/SettingActivity; (2487)
Link of class 'Lcom/app/android/SettingActivity;' failed
Could not find class 'com.app.android.SettingActivity', 
  referenced from method com.app.android.HomeActivity.onOptionsItemSelected
VFY: unable to resolve const-class 594 (Lcom/app/android/SettingActivity;) 
  in Lcom/app/android/HomeActivity; 
```

HomeActivity.java

```
// Initiating Menu XML

@Override
public boolean onCreateOptionsMenu(Menu bottom_menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.bottom_menu, bottom_menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.btn_logout:
        userFunctions.logoutUser(getApplicationContext());
        Intent login = new Intent(getApplicationContext(), LoginActivity.class);
        login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(login);
        finish();
        return true;
    case R.id.btn_setting:
        Intent i = new Intent(getApplicationContext(), SettingActivity.class);
        startActivity(i);
        finish();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

SettingActivity.java

```
package com.app.android;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

import com.urbanairship.Logger;
import com.urbanairship.analytics.InstrumentedActivity;
import com.urbanairship.location.UALocationManager;

public class SettingActivity extends InstrumentedActivity {

    Button launchButton, locationButton;
    IntentFilter boundServiceFilter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.setting); 
```

更新

现在我在清理后得到这些错误..

```
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: com.app.android.SettingActivity
   at com.app.android.HomeActivity.onOptionsItemSelected(HomeActivity.java:169)
   at android.app.Activity.onMenuItemSelected(Activity.java:2507)
   at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:982)
   at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
   at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
   at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
   at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
   at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
   at android.view.View$PerformClick.run(View.java:14165)
   at android.os.Handler.handleCallback(Handler.java:605)
   at android.os.Handler.dispatchMessage(Handler.java:92)
   at android.os.Looper.loop(Looper.java:137)
   at android.app.ActivityThread.main(ActivityThread.java:4517)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:511)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
   at dalvik.system.NativeStart.main(Native Method) 
```

![在此处输入图像描述](../Images/cd1c5344f59ad617c164a480cb1662c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:05:14.733

尝试在您的项目目录中创建一个文件夹**libs**（与可绘制对象、资产等平行）并将所有外部 jar 放在那里..

然后右键单击您的项目->配置构建路径->添加外部jar（从libs文件夹添加它们），

并清理您的项目..应该可以正常工作..

# javascript - 画布中图像的 CORS 设置

> ID：12947361
> 
> 赞同：12
> 
> 时间：2012-10-18T04:54:21.390
> 
> 标签：javascript, amazon-s3, cors

我尝试使用 Caman.js 并从 Amazon S3 加载图像。Caman.js 是一个用于生成图像效果的 JS 库，它通过将图像副本创建到画布对象并对数据进行各种像素操作来工作。看起来画布有一些安全细节来限制 javascript 在数据来自外部服务器时访问像素数据的能力，除非该服务器在请求中传递一些安全凭证，或跨域资源共享 (CORS ）。

我以前从未遇到过CORS，正在尝试了解它，但我似乎无法使其正常工作。据我了解，为了避免出现在 Chrome 中的这个错误：

```
Unable to get image data from canvas because the canvas has been tainted by cross-origin data.
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

您需要在您的 Amazon 存储桶上设置一个 CORS 文件。这是我正在使用的 CORS 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>HEAD</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

这似乎没有任何效果。这些 CORS 文件是由 Amazon 缓存的，还是我应该期望它立即生效？-- 更新：我在 8 小时后尝试了它仍然无法正常工作，所以我认为缓存不是问题。

似乎上面指定的 CORS 文件应该允许所有内容通过，不是吗？我查看了有关 CORS 和 Google 的 Chrome 文档，但似乎找不到任何好的答案。以前有人处理过这个问题吗？

谢谢！凯文

更新：这是我从对亚马逊的图像请求中获得的响应标头：

```
Date:Thu, 18 Oct 2012 04:52:40 GMT
ETag:"9848ce610c994521295d8aa38b47bab9"
Last-Modified:Thu, 18 Oct 2012 04:19:45 GMT
Server:AmazonS3
x-amz-id-2:Govue0tJg5MLYedr/l7T2RU5RApXLZBwJ8p507hS+sLGqxYojRnVKqj4jRHRZsZ6
x-amz-request-id:F4FF5B669C3156D2 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T15:45:20.093

尽管这是 4 个月大的问题，但我想通过在此处提供对工作解决方案的引用来帮助获取**S3、CORS 和 HTML 画布问题的其他人。**

只有在明确要求时，Amazon S3 才会发送**跨域标头（**[请参阅 CORS 规范](http://www.w3.org/TR/cors/)）。这意味着客户端必须在 HTTP 请求中明确要求它们。预期的行为是客户端将在请求中的**“Origin: host-name”**标头中指定主机名，服务器将检查它是否应该与特定的源名称共享资源。这里重要的是要了解，如果您的客户端是 Web 浏览器，它不会无缘无故发送此标头。

这就是跨域 ajax 请求的工作方式。最近添加了对字体和图像等其他一些资源的支持。

**Images:** HTML5 added Cross-Origin support for images in HTML tags and Javascript... Use the **crossOrigin** attribute on images and the browser will fetch the resource as a Cross-Origin resource (it will add the **Origin** header to the HTTP request) [link to the original post](https://stackoverflow.com/questions/2390232/why-does-canvas-todataurl-throw-a-security-exception).

> The *`crossorigin`* attribute is a CORS settings attribute. Its purpose is to allow **images** from *third-party sites that allow **cross-origin** access* **to be used with canvas**.

[read more on MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/Img#Attributes)

i also fetched similar issue, if you can rely on HTML5 support on the client side, use that solution!

# php - 如果在 while 循环中找不到匹配项，则显示错误消息

> ID：12947364
> 
> 赞同：0
> 
> 时间：2012-10-18T04:54:39.440
> 
> 标签：php, if-statement, while-loop, preg-match, fopen

如果在 while 循环中找不到匹配项，我正在尝试显示一条错误消息“未找到匹配项”。目前，我知道如果我在里面放一个“else”语句，它只会为每一行显示“Match not found”，直到它到达循环的末尾。

这是我到目前为止所拥有的：

```
 <?php
        $filename = "roster.txt";
        $fp = fopen($filename, "r") or die("Couldn't open $filename");

        while(!feof($fp))
        {   $line = fgets($fp);

            if (preg_match('/Navi/',$line)) {
                print "$line<br>";      
            }
        }
        fclose($fp)
    ?> 
```

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:01:22.530

`match`像之前一样设置一个`false`while循环并将其设置`true`为找到匹配时。在 while 循环检查`match`变量之后。

```
$match = false;
while(!feof($fp))
{   $line = fgets($fp);
$answer = str_replace(":"," ",$line);   
  if ((preg_match("/$lastname/",$line)) && (preg_match("/$id/",$line))) {
      $match = true;
      print "$answer<br>";        
  }
}
if ($match === false) {
    echo 'Match not found';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:59:09.523

我累了......这可能不是最优雅的方式，但它应该工作。

```
$x=0;
while(!feof($fp))
{   $line = fgets($fp);
$answer = str_replace(":"," ",$line);   
if ((preg_match("/$lastname/",$line)) && (preg_match("/$id/",$line))) {
print "$answer<br>";    
$x = $x+1;    
}
}
if($x==0) {
echo 'No match found';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:01:14.430

我会使用一个布尔值来跟踪是否找到了该值*，*然后使用它来有选择地显示一条消息（如果*没有*找到）：

```
<?php
$filename = "roster.txt";
$fp = fopen($filename, "r") or die("Couldn't open $filename");
$lastname = $_GET['lastname'];
$id = $_GET['id'];

// variable to track if any matches are found, initialize to false
$found = false;   
while(!feof($fp)){   
    $line = fgets($fp);
    $answer = str_replace(":"," ",$line);   
    if ((preg_match("/$lastname/",$line)) && (preg_match("/$id/",$line))) {
        print "$answer<br>";

        // when a match is found, set to true
        $found = true;    
    }
}

// If no matches were found, show the error message
if (!$found) print "Match not found";
fclose($fp)
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:01:20.030

创建一个局部变量来跟踪是否找到了匹配项。例如在伪代码中：

```
int match_is_found = 0

loop :
    // do stuff
    if match was found:
        match_is_found = 1

end loop

if match_is_found is 0:
    display error message 
```

（抱歉，如果这对 PHP 没有帮助 - 从未使用过）。

# opencv - 在 Android 中实现 ASIFT

> ID：12947371
> 
> 赞同：0
> 
> 时间：2012-10-18T04:55:16.497
> 
> 标签：opencv, android-ndk, android-2.2-froyo, asift

我是 openCV 和 Android 的新手。我必须检测项目中的对象。所以，我决定使用 ASIFT 来做同样的事情。但是，他们在[这里](http://www.ipol.im/pub/algo/my_affine_sift/)给出的代码非常冗长。它包含很多 C 文件。它也`doesn't`有`openCV support`。

对[SO](https://stackoverflow.com/questions/11181780/asift-and-opencv)本身的一些搜索表明它是`easier to connect`openCV 库的 ASIFT 代码，但我`can't`知道如何做到这一点。任何人都可以通过提供一些链接或告诉我应该用来将 ASIFT 添加到我的 openCv 库中的步骤来帮助我，我可以进一步利用它来制作我的 Android 应用程序吗？

另外，我想知道`Android NDK along with JNI`用于调用 C 文件或`Android SDK along with binary package`用于我的 android 项目（对象检测）是否适合我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:45:42.770

最后，我通过使用 ASIFT 开发人员网站上给出的源代码解决了我的问题。我将所有源文件压缩在一起，使用 make 制作我自己的库。然后我使用 JNI 从库中调用了所需的函数。

它对我有用，但在 Android 设备上执行大约需要 2 分钟。有人对减少运行时间的方法有一些想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:04:16.277

他们使用了非常简单且缓慢的蛮力匹配（仅用于证明概念）。你可以使用 FLANN 库，它会有很大帮助。[http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)

# c - 有没有办法在运行时修改 Linux C 程序中的函数代码？

> ID：12947388
> 
> 赞同：3
> 
> 时间：2012-10-18T04:56:54.047
> 
> 标签：c, linux, gcc, assembly, writable

简单来说，我们有两个类似的功能：

```
void f1()
{
    printf("%d", 123);
}
void f2()
{
    printf("%d", 124);
} 
```

现在我们在main中调用f1，它打印出123。编译的时候，反汇编`f1`可能是这样的：

```
08048424 <f1>:
 8048424:       55                      push   %ebp
 8048425:       89 e5                   mov    %esp,%ebp
 8048427:       83 ec 18                sub    $0x18,%esp
 804842a:       b8 40 86 04 08          mov    $0x8048640,%eax
 804842f:       c7 44 24 04 7b 00 00    movl   $0x7b,0x4(%esp)
 8048436:       00
 8048437:       89 04 24                mov    %eax,(%esp)
 804843a:       e8 05 ff ff ff          call   8048344 <printf@plt>
 804843f:       c9                      leave
 8048440:       c3                      ret 
```

f2 的机器码与 f1 类似。

现在我想在运行时将 f1 替换为 f2 的机器码。我使用 memcpy(f1, f2, SIZE_OF_F2_MACHINE_CODE)。当然，问题来了——段错误。

现在我想知道是否存在解决此问题的解决方案。这是一个常见的 C 程序。据我所知，我们可以使用下面的代码来设置 Linux 内核中的可写页面：

```
int set_page_rw(long unsigned int addr)
{
    unsigned int level;
    pte_t *pte = lookup_address(addr, &level);

    if(pte->pte & ~_PAGE_RW)
        pte->pte |= _PAGE_RW
} 
```

但它不适用于普通的 Linux C 程序。那么什么有效呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:39:17.483

你为什么要问？如果您的愿望只是最终能够调用其代码由同一进程生成的某些函数，则可以以不同的方式进行：

1.  始终使用函数指针来调用此类动态生成的函数；我的建议是，出于可读性原因，`typedef`在声明指针之前对其签名，请参阅[此答案](https://stackoverflow.com/a/8310429/841108)。
2.  生成函数并获取指向它的指针。

    *   例如，您可以生成一个 C 源文件`generated.c`，派生一个进程，也许用`system("gcc -fPIC -O -shared generated.c -o generated.so");`编译它，然后`dlopen("./generated.so", RTLD_GLOBAL)`用`dlsym`. 有关详细信息，请参见[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)手册页。仅供参考，[MELT](http://gcc-melt.org/)正在这样做。

    *   您还可以在内存中生成函数的机器代码（可能通过使用标志的[mmap(2)获得）。](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)`PROT_EXEC`有几个 JIT（即时翻译）库可用：[GNU Lightning](http://www.gnu.org/software/lightning/)（快速生成运行缓慢的机器代码）、[myjit](http://myjit.sourceforge.net/)、[libjit](https://freecode.com/projects/libjit)、[LLVM](http://llvm.org/)（优化机器代码的缓慢生成）、[LuaJIT](http://luajit.org/) ...

如果你真的想覆盖一些现有的函数代码，你可能会这样做，但这需要非常小心并且很痛苦（例如，因为新的函数代码比旧的函数代码需要更多的空间，而且还因为[重定位](http://en.wikipedia.org/wiki/Relocation_%28computer_science%29)问题）。使用[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)和/或[mprotect(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mprotect.2.html)系统调用来获得此类技巧的许可。但要为调试噩梦做好准备。您可能希望使用[您的 python 脚本](http://sourceware.org/gdb/onlinedocs/gdb/Python.html)`gdb`编写调试器脚本。

对于内核模块，情况就不同了。我听说一些与网络相关的内核代码（`iptables`也许？）可能会使用 JIT 技术来生成机器代码并运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T05:02:23.853

不要覆盖过程，而是覆盖符号表中的符号引用。这确实需要动态链接。或者，您可以使用对另一个函数的调用来覆盖对该函数的调用，但是诸如`NX`位之类的事情可能会妨碍您。自我修改代码通常是不受欢迎的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T10:17:21.287

我试图找到你的答案，但失败了。我实际成功做的只是简化有问题的代码：

```
void f1( )
{
}
int main( )
{
  *(char*) f1 = *(char*) f1;
  return( 0 );
} 
```

是的，它因分段错误（在 gcc 中）或内存访问冲突（在 MS VC 中）而失败。

编辑：

## 其实我成功地做了你想做的

（基于 Basile Starynkevitch 的回答）。但仅适用于 x86，仅适用于 gcc，并且仅适用于您的具体示例。下面是几个代码示例。

首先 - 简化的例子。

```
#include <stdio.h>
#include <sys/mman.h>
#include <unistd.h>

void f1( )
{
}

int main( )
{
  int rc;
  int pagesize;
  char *p;

  f1( );

  pagesize = sysconf( _SC_PAGE_SIZE );
  printf( "pagesize=%d (0x%08X).\n", pagesize, pagesize );
  if( pagesize == -1 )
    return( 2 );

  p = (char*) f1;
  printf( "p=0x%08X.\n", p );
  p = (char*) ((size_t) p & ~(pagesize - 1));
  printf( "p=0x%08X.\n", p );

  rc = mprotect( p, pagesize, PROT_READ | PROT_WRITE | PROT_EXEC );
  printf( "rc=%d.\n", rc );
  if( rc != 0 )
    return( 2 );

  printf( "'mprotect()' succeeded.\n" );

  *(char*) f1 = *(char*) f1;

  printf( "Write succeeded.\n" );

  f1( );

  printf( "Call succeeded.\n" );

  return( 0 );
} 
```

你编译它并启动一次。它会失败，但你会知道页面大小。假设是**4096**。然后你像这样编译这个例子：

```
gcc a1.c -falign-functions=4096 
```

它应该工作。

输出：

```
pagesize=4096 (0x00001000).
p=0x00402000.
p=0x00402000.
rc=0.
'mprotect()' succeeded.
Write succeeded.
Call succeeded. 
```

现在是高级示例：

```
#include <stdio.h>
#include <sys/mman.h>
#include <unistd.h>
#include <string.h>

//extern void f1( void ) __attribute__(( aligned( 4096 ) ));
__asm__( ".text" );
__asm__( ".align 4096" );
void f1( void )
{
  printf( "%d\n", 123 );
}

void f2( void )
{
  printf( "%d\n", 124 );
}

int main( void )
{
  int rc;
  int pagesize;
  char *p;
  int i;

  printf( "f1=0x%08X.\n", f1 );
  printf( "f2=0x%08X.\n", f2 );

  f1( );
  f2( );

  pagesize = sysconf( _SC_PAGE_SIZE );
  printf( "pagesize=%d (0x%08X).\n", pagesize, pagesize );
  if( pagesize == -1 )
    return( 2 );

  p = (char*) f1;
  printf( "p=0x%08X.\n", p );
  p = (char*) ((size_t) p & ~(pagesize - 1));
  printf( "p=0x%08X.\n", p );

  rc = mprotect( p, pagesize, PROT_READ | PROT_WRITE | PROT_EXEC );
  printf( "rc=%d.\n", rc );
  if( rc != 0 )
    return( 2 );

  printf( "'mprotect()' succeeded.\n" );

  for( i = 0; i < (size_t) f2 - (size_t) f1; i++ ) {
    if( ((char*) f2)[ i ] == 124 ) {
      printf( "i=%d.\n", i );
      ((char*) f1)[ i ] = ((char*) f2)[ i ];
    }
  }

  //memcpy( f1, f2, (size_t) f2 - (size_t) f1 );

  printf( "Write succeeded.\n" );

  f1( );
  f2( );

  printf( "Call succeeded.\n" );

  return( 0 );
} 
```

您不能在此处使用“ **memcpy()** ”（已注释），因为在“ **f1()** ”和“ **f2() ”中对“** **printf()** ”的调用是相对的，而不是绝对的。而且我找不到如何使它们成为绝对的（“ **-fPIC** ”和“ **-fno-PIC** ”在我的情况下都不起作用）。**如果您在“ f1()** ”和“ **f2()** ”中没有相关的函数调用，我相信您可以使用“ **memcpy()** ”（但我没有尝试）。

 ******您还应该使用“ **f1()** ”与页面大小的对齐方式（除非您确定在“ **f1()** ”开始之前有足够的代码）。如果你有 gcc 4.3 及更高版本，你可以使用属性（因为我有 gcc v4.1.2，所以有注释）。***如果没有，您可以使用那个丑陋***且不可靠的“ **_asm_ ”***。*

 *输出：

```
f1=0x00402000.
f2=0x0040201E.
123
124
pagesize=4096 (0x00001000).
p=0x00402000.
p=0x00402000.
rc=0.
'mprotect()' succeeded.
i=12.
Write succeeded.
124
124
Call succeeded. 
```

而且，当然，那个可怕的“ **if( ((char*) f2)[ i ] == 124 )** ”。它用于区分应该替换的内容（打印的数字）和不应该替换的内容（相对引用）。显然，这是一个非常简化的算法。您将必须实现自己的，适合您的任务。*******

# android - 将android支持库v4添加到intellij ide

> ID：12947390
> 
> 赞同：12
> 
> 时间：2012-10-18T04:56:57.710
> 
> 标签：android, intellij-idea, android-support-library

我正在尝试在 intelli j 中使用来自 android 支持库 v4 的 viewpager。目前，我正在使用 Android SDK 4.1

我复制`android-support-v4.jar`到'libs'下的我的intellij android项目

在intellij的项目设置中

我转到**“模块”=>“MyModuleName”=> 依赖**项选项卡，并通过导航到我自己项目下的 libs/ 文件夹的路径来添加 android-support-v4.jar

除了这个新添加的 jar 文件，我还检查了“导出”

但我仍然无法在我的应用程序中使用 viewpager。

我收到一个崩溃消息，例如：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.xxxx/com.xxxx.MyActivity}: android.view.InflateException: Binary XML file line #13: Error inflating class android.support.v4.view.ViewPager 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-19T12:10:29.060

我检查了您提供的项目，发现问题是由**不正确的库配置**引起的。添加库时，您已在`android`其中指定文件夹，`jar`而不是指定其`jar`本身。

不正确的配置：

![不正确](../Images/24166263ed7f02aa53482e2eb3386363.png)

正确配置：

![正确的](../Images/c66b54f5667090ead70df3f144a73b82.png)

# php - 使用 php&mysql 防止多个电子邮件通知的方法

> ID：12947393
> 
> 赞同：-2
> 
> 时间：2012-10-18T04:57:17.520
> 
> 标签：php, mysql, email-notifications

我的第一篇文章，但到目前为止，我从 stackoverflow 中得到了很多很好的答案和提示。这是一个近距离通话-> [facebook，gmail如何发送实时通知？](https://stackoverflow.com/questions/1086380/how-does-facebook-gmail-send-the-real-time-notification/1086448#1086448)但不完全是，所以让我们一起集思广益。

当网站发生更改时，我有带有邮件通知的 CMS 系统。一切都很好，但我想防止多个通知，如果有人做出另一个快速更改，比如说，修复一个错字。显然，使用 php mail()。

我有两种方法，一种简单，一种....让我们说，很重......**咳嗽**。第三个的灵感来自[实施电子邮件通知](https://stackoverflow.com/questions/7155498/implementing-email-notification)，但一次发送一堆电子邮件对我来说真的不吸引人。

1.  使用时间戳检查是否在最后 5 分钟的“让说”中进行了其他更改。

2.  记录最后一次更改，并将其与新更改进行比较。同时可能对备份有用，因为我必须将更改保存在某处，但是文本可能很长，并且进行 sql 搜索会很痛苦。不会吗？

3.  使用 cron 每 x 分钟发送一次更改...如果您认为这是一个合适的解决方案，请说服我。

您有任何想法、意见或建议吗？期待您的意见，因为我现在注册了，我会尽我所能提供帮助。

干杯，一切都好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:43:35.940

关于 cron 作业，这始终是一个不错的选择，因为它消除了 php 处理中检查时间、数据库、额外文件等的部分负担。但只有当你真的有使用它时才有意义，例如，如果你有10 个用户，这可能是矫枉过正。如果您有 1000 个，那么您只需要优化邮寄过程本身，但这仍然是一个不错的选择。

关于时间戳，不断检查数据库以查找更改对于系统来说非常耗时并且会使数据库过载。除非您有专门的表格，仅用于更改帖子，否则系统没有太多工作，而且您可以每隔几次使用该信息就清理过时的记录。

如果您有很多用户，那么记录帖子本身的最后一次更改并不断与新/旧版本进行比较可能会让系统不堪重负。

因此，我将使用一个专门用于更改帖子的表，其中包含 id_post、timestamp_of_the_change 和 mail_sent 之类的内容。然后在对该表进行任何更新后，我将检查帖子是否在最后一分钟左右被修改，如果发生这种情况，我将更新时间戳但不会发送新邮件，除非最后一个发送过程邮件失败，这就是我将在那里使用的第三个字段。

再见

# wordpress - 在子目录中设置 CakePHP；Wordpress 安装在根目录下

> ID：12947396
> 
> 赞同：3
> 
> 时间：2012-10-18T04:57:29.930
> 
> 标签：wordpress, .htaccess, cakephp, mod-rewrite, subdirectory

我一直在寻找解决方案 2 小时，但似乎没有任何效果......这是我的问题：

我在根目录（var/www）中安装了 WordPress。因此，通过[访问 http://www.geekderek.com](http://www.geekderek.com)，我看到了我的 wordpress 网站。

我把 CakePHP 放在一个子目录 var/www/cakephp 中。我希望能够通过访问 www.geekderek.com/cakephp 来查看我的 CakePHP 应用程序。

然而，目前这个 url 只返回一个 Wordpress 页面，上面写着“找不到内容”。

我相信这个问题可以通过在我的根目录中修改 .htaccess 来解决。所以这是我的.htaccess： http: [//pastebin.com/sXJTRstB](http://pastebin.com/sXJTRstB)

如您所见，我将此行添加到默认的 WP .htaccess 文件中：

```
RewriteRule    ^cakephp(/(.*))?$ cakephp/app/webroot/$1    [QSA,L] 
```

但是，由于某种原因，这似乎不起作用。

谁能告诉我什么是错的？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:47:58.220

我有类似的设置，我的蛋糕应用程序在子目录中，我的根 .htaccess 有这个重写规则：

```
RewriteRule ^cakephp/(.*)$ /cakephp/$1 [L,QSA] 
```

其余的都通过常规的 cakephp 设置处理。

我的/cakephp/app/webroot/.htaccess：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

希望这对你也有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T12:50:23.263

thanat的回答几乎对我有用。我只需要编辑*RewriteBase*即可阅读

```
RewriteBase /cakephp 
```

并确保 apache conf 允许我的根目录覆盖其先前的选项

```
<Directory "/my/root/dir">
AllowOverride All
</Directory> 
```

但话又说回来，我的*应用程序*目录位于apache 设置的*DocumentRoot之外。**cakephp*目录实际上是webroot*本身*。所以我的目录结构如下

```
/my/root
/my/root/app  #cake's app dir without webroot
/my/root/dir  #apache DocumentRoot (your wordpress is here)
/my/root/dir/cakephp  #cake's webroot 
```

还要确保进行编辑`/my/root/dir/cakephp/index.php`，以便它知道*应用程序*和蛋糕的库目录在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T02:54:26.827

这是我的情况，使用 laravel 但它们是相同的。

> [https://community.bitnami.com/t/laravel-application-in-subdirectory-of-wordpress-website/79535/2](https://community.bitnami.com/t/laravel-application-in-subdirectory-of-wordpress-website/79535/2)

只需要改变

```
AllowOverride None => AllowOverride All 
```

# javascript - 浏览器关闭提示

> ID：12947400
> 
> 赞同：0
> 
> 时间：2012-10-18T04:57:52.623
> 
> 标签：javascript, c#, asp.net, ajax, dom-events

当我关闭浏览器时，我必须执行一些服务器端功能。

如果在执行服务器端功能时发生任何异常，我必须显示一条警告消息“操作不成功”，在这种情况下，浏览器不应关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:17:13.417

实际上，您**不能**阻止用户关闭窗口。但是，您可以通过您的消息提醒他/她，要求用户留下或离开页面，这通过绑定到`onbeforeunload`事件来完成。

```
var showAlert = false;
window.onbeforeunload = function(){
    $.ajax({
       url: "serversideprcess.aspx",
       async : false
       }).done(function ( data ) {
        if(data !="success") 
           showAlert = true;
      }).fail(function(){
    showAlert = true;
    });

    if(showAlert){
       return "Operation unsuccessful";
    }
} 
```

ajax 请求必须是同步的：`async : false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:22:56.893

你不能。

您根本无法阻止浏览器窗口关闭。曾经。您也不能在处理程序中执行任何需要时间的工作（例如 HTTP 请求）`onbeforeunload`——您真正可以做的就是显示一个确认对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:46:46.160

```
window.onbeforeunload = WindowCloseHanlder;
function WindowCloseHanlder() {
    //Call ajax server code CallIntiateAjaxCalling();
    if (conditionfails) {
        alert("condition fails")
            return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:09:39.353

也许您可以使用此代码

```
<html>
<head>
<script type="text/javascript">
  var hook = true;
  window.onbeforeunload = function() {
    if (hook) {
      return "Did you save your stuff?"
    }
  }
  function unhook() {
    hook=false;
  }
 </script>
</head>
<body>

<a href="http://google.com">external link</a>

</body>
</html> 
```

# jquery - JQuery DatePicker - 在另一个日期选择器的“OnSelect”上弹出日历对话框

> ID：12947403
> 
> 赞同：0
> 
> 时间：2012-10-18T04:58:15.873
> 
> 标签：jquery, datepicker

我有**两个 JQuery 日期**选择器来选择**'StartDate' 和 'EndDate' 。**我的要求是在选择 startDate 后自动弹出结束日期日历。

***我已经尝试了 COMMENTED HERE 中的所有步骤。***

这里的代码成功触发了'EndDate'日历的焦点，但它显示了一秒钟并隐藏起来。

```
$(document).ready(function() {  //Runs when tab is loaded
        var dateFormat = "dd/mm/yy";
        var today=new Date();
        today.setMonth(today.getMonth()-1); 
        $("#ctl00_ContentPlaceHolder1_datepicker1").datepicker({
         minDate: 0, 
         dateFormat:dateFormat,
         //maxDate: '+12M +31D',  
         onSelect: function(dateText, inst){
                   var the_date = new Date($.datepicker.parseDate(dateFormat,dateText));
                   //var end=(the_date.getDate()+1) + '/' + (the_date.getMonth()+1) + '/' + the_date.getFullYear();
                   $("#ctl00_ContentPlaceHolder1_datepicker2").datepicker('option', 'minDate', the_date);
                  // TRIED ALL THESE
                  //document.getElementById('ui-datepicker-div').style.display  = 'block';
                  //document.getElementById('ui-datepicker-div').style.left  = '635.5px';
                  //$("#ctl00_ContentPlaceHolder1_datepicker2").datepicker("show");
                  //$("#ctl00_ContentPlaceHolder1_datepicker2").datepicker(); 
                  //$("#ctl00_ContentPlaceHolder1_datepicker2").focus();
                  //$('#foo').slideUp(300).delay(800).fadeIn(400);
                  //$("#ctl00_ContentPlaceHolder1_datepicker2").trigger("focus"); 
                  $('#ctl00_ContentPlaceHolder1_datepicker2').focus();

      }
     });
     $("#ctl00_ContentPlaceHolder1_datepicker2").datepicker({
        //maxDate: '+12M +31D', 
        dateFormat:dateFormat,
        onSelect: function(dateText, inst){

        }                       
    });

 }); 
```

**WEBSITE** 这里是前端[http://www.chuttitime.com/beta/](http://www.chuttitime.com/beta/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:10:14.997

用这个 ：

```
onClose: function() {
                  $('#endDate').focus();
            }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:10:56.430

可能这很有用..它有 2 个字段来指示范围[http://jqueryui.com/datepicker/#date-range](http://jqueryui.com/datepicker/#date-range)

# c# - 字符串路径验证

> ID：12947405
> 
> 赞同：1
> 
> 时间：2012-10-18T04:58:23.823
> 
> 标签：c#, path

我在这里有一个文件路径的字符串（来自用户的输入）。我检查了字符串，以便它符合条件：

*   ***检查文件路径的无效字符***
*   ***不接受绝对路径*** *(\Sample\text.txt)*

无效字符有：

< > : " / \ | ? *

我尝试在 catch 子句中捕获这些无效字符。它工作除了'\'。它将接受 'C:\\Sample\text.txt' 这是一个无效的文件路径。

**以下示例应该是无效路径：**

*   :\text.txt
*   :text.txt
*   \:文本.txt
*   \文本.txt
*   C:\\\text.txt

**ff。是一个有效路径的例子：**

*   C:\text.txt

我经历过这里发布的类似问题，但似乎没有一个能解决我的问题。

进行此类检查的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:07:19.143

您可以使用[Path.GetFullPath](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)，如果路径无效，它将引发异常。你可以有这样的方法：

```
public static bool IsValidPath(string path)
{
    try
    {
       path = path.Replace(@"\\", ":"); // to cancel out c:\\\\test.text
       string temp = Path.GetPathRoot(path); //For cases like: \text.txt
       if (temp.StartsWith(@"\"))
            return false;
       string pt = Path.GetFullPath(path);
    }
    catch //(Exception NotSupportedException) // catch specific exception here or not if you want
    {
        return false;
    }
    return true;
} 
```

要测试的示例代码：

```
List<string> list = new List<string>()
{
    @":\text.txt",
    @":text.txt",
    @"\:text.txt",
    @"\text.txt",
    @"C:\\\text.txt",
    @"C:\text.txt",

};

foreach(string str in list)
{
    Console.WriteLine("Path: {0} is Valid = {1}" ,str,IsValidPath(str));
} 
```

输出：

```
Path: :\text.txt is Valid = False
Path: :text.txt is Valid = False
Path: \:text.txt is Valid = False
Path: \text.txt is Valid = False
Path: C:\\\text.txt is Valid = False
Path: C:\text.txt is Valid = True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:15:49.000

使用 regex.match() 方法进行文件路径验证：

```
Match match = Regex.Match(input, ^(?:[\w]\:|\\)(\\[a-z_\-\s0-9\.]+)+\.(?i)(txt|gif|pdf|doc|docx|xls|xlsx)$,
        RegexOptions.IgnoreCase); 
```

# ruby-on-rails - 在 Rails 中检查 wget 是否成功

> ID：12947406
> 
> 赞同：1
> 
> 时间：2012-10-18T04:58:30.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 Rails 3 项目中，在控制器中，我使用命令`wget`从 Internet 下载文件并将它们放在我的服务器上。在控制器中，我想检查是否`wget`成功下载文件。我该如何执行该检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:07:08.757

来自命令的Ruby[文档](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)`system`：

> 如果命令给出零退出状态，系统返回 true，非零退出状态返回 false。如果命令执行失败，则返回 nil。

所以，你可以这样做：

```
if system('wget fail')
   puts 'Success!'
else
   puts 'Fail!'
end 
```

# git - 修订控制文件而不将其放在目录中

> ID：12947407
> 
> 赞同：1
> 
> 时间：2012-10-18T04:58:29.987
> 
> 标签：git, version-control

可以对文本文件进行（Git）修订控制而不必将其放入目录中吗？

想法是：给定一个文件`somepath/file.txt`

```
$ git singlefile init file.txt 
```

`.file.txt.git`在同一路径创建一个目录`somepath/`，并在其中存储 Git 存储库信息。然后某些机制会将数据`.file.txt.git`与文件相关联`file.txt`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:01:20.240

有什么理由不能忽略目录中的其余文件吗？

```
$ cd somepath
$ git init
$ echo "*" > .gitignore
$ git add -f file.txt .gitignore 
```

如果您想让存储库称为 以外的其他名称，您可以通过环境变量`.git`手动指定它：`GIT_DIR`

```
$ GIT_DIR=.file.txt.git git init
$ echo "*" > .gitignore
$ GIT_DIR=.file.txt.git git add -f file.txt .gitignore 
```

（为了节省一些时间，您可以将 GIT_DIR 导出到您的外壳中）

# php - 看不到回显消息，但我的本地主机可以工作

> ID：12947409
> 
> 赞同：-1
> 
> 时间：2012-10-18T04:58:38.150
> 
> 标签：php

这是我的第一个 php 代码，我似乎无法让它工作。（我正在使用 Eclipse）

```
<html>
<body>
<?php

    echo 'Hello World!';
    $txt = "I <3 you!";
    $num = 19;

?>  
</body>
</html> 
```

当我运行它（http://localhost/Assignment3.0/index.php）时，我得到：

未找到

**在此服务器上找不到请求的 URL /Assignment3.0/index.php。Apache/2.2.22 (Ubuntu) 服务器在 localhost 端口 80**

但是当我运行这个（http://localhost/）时，我得到：

**有用！这是此服务器的默认网页。**

Web 服务器软件正在运行，但尚未添加任何内容。

那么可能是什么问题呢？我的“Hello World！”呢？

我需要将我的文件添加到 localhost 下的某种文件夹中吗？

另外，对于 Stackoverflow 格式，我如何开始一个新行而不在其间添加一个空行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:01:05.590

永远不要使用句`.`点来命名目录，而是`Assignment3.0`使用下划线，它应该适合你..`_``Assignment3_0`

`html`顺便说一句，在标签之后关闭你的`body`标签

# asp.net - linq 查询中的 where 子句

> ID：12947410
> 
> 赞同：0
> 
> 时间：2012-10-18T04:58:42.517
> 
> 标签：asp.net, linq

在下面的代码中`transmittalno.TransID`总是有值，但`doctranstocon.Transid`有时有值，有时没有，所以当`doctranstocon.Transid`有值时我没有问题，但当没有任何值时，在 where 子句中比较时，如 : `transmittalno.TransID == doctranstocon.Transid`。它返回错误“**对象引用未设置为对象的实例。** ”

```
TranstoCons = from doctranstocon in _DocTranstoCons where 
              ( transmittalno.TransID == doctranstocon.Transid  ) 
              select doctranstocon.tblTranstoCon 
```

当“ doctranstocon.Transid ”没有任何值时，我喜欢 TranstoCons 返回 null

如何在以下 linq 查询中处理此错误：

```
var query = from transmittalno in _Transmittals
            Select new TransmittaltoConPresentationModel 
            { 
              TransID = transmittalno.TransID, 
              Transmittal = transmittalno.TRANSMITTAL, 
              TranstoCons = from doctranstocon in _DocTranstoCons where 
                            ( transmittalno.TransID == doctranstocon.Transid  ) 
                            select doctranstocon.tblTranstoCon 
             }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:09:26.223

你可以使用这个：

```
where doctranstocon != null && doctranstocon.Transid.Equals(transmittalno.TransID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:09:38.050

```
var query = from transmittalno in _Transmittals
            Select new TransmittaltoConPresentationModel 
            { 
              TransID = transmittalno.TransID, 
              Transmittal = transmittalno.TRANSMITTAL, 
              TranstoCons = from doctranstocon in _DocTranstoCons 
                            where doctranstocon == null || transmittalno.TransID == doctranstocon.Transid
                            select doctranstocon != null? doctranstocon.tblTranstoCon : null
             }; 
```

# asp.net-mvc-3 - 带有剃刀标签的样式在 IE 中不起作用？

> ID：12947415
> 
> 赞同：0
> 
> 时间：2012-10-18T04:59:30.833
> 
> 标签：asp.net-mvc-3, razor

> **可能重复：**
> [style.display='none' 不适用于 chrome 中的选项标签，但它在 Firefox 中有效，有人知道为什么吗？或解决方法？](https://stackoverflow.com/questions/2324250/style-display-none-doesnt-work-on-option-tags-in-chrome-but-it-does-in-firefo)

```
 @For Each myItem In Data
      @<option style="display: none; " value="@myItem.dataCode" child="@myItem.dataCodeChild" >
          @myItem.dataCode
      </option>                                
 Next myItem 
```

所有选项标签仍然显示，但 IE 中的样式。元素仍然显示样式=“显示：无；”。但它适用于 Chrome。如何修复它以在 IE 中工作。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:26:06.890

<option> 不正式支持 style="display: none" 属性

看到这个其他问题[style.display='none' doesn't work on option tags in chrome, but it does in firefox](https://stackoverflow.com/questions/2324250/style-display-none-doesnt-work-on-option-tags-in-chrome-but-it-does-in-firefo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:22:20.517

在此站点上解决您的问题：[https](https://stackoverflow.com/a/878331/1643075) ://stackoverflow.com/a/878331/1643075 和[演示](http://jsbin.com/anoci)

# c - 将 malloc 与 char 指针一起使用时出现分段错误

> ID：12947419
> 
> 赞同：2
> 
> 时间：2012-10-18T05:00:12.300
> 
> 标签：c, pointers, char, segmentation-fault, malloc

我是 C 和学习结构的新手。我正在尝试`malloc`使用大小为 30 的 char 指针，但它给出了分段错误（核心转储）。我在互联网上搜索了它，但无法解决这个问题。任何帮助都感激不尽。
可能我`char*`错误地访问了结构的成员？

```
typedef struct{
int x;
int y;
char *f;
char *l;
}str;

void create_mall();

void create_mall() //Malloc the struct
{
str *p;
p->f = (char*)malloc(sizeof(char)*30);  // segmentation fault here
p->l = (char*)malloc(sizeof(char)*30);
printf("Enter the user ID:");
scanf("%d",&p->x);
printf("\nEnter the phone number:");
scanf("%d",&p->y);
printf("\nEnter the First name:");
scanf("%29s",p->f);
printf("\nEnter the Last name:");
scanf("%29s",p->l);
printf("\nEntered values are: %d %d %s %s\n",p->x,p->y,p->f,p->l);
}

int main(void)
{
create_mall();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T05:04:22.890

这是你的问题：

```
str *p; 
```

您已经声明了一个指向 的实例的指针`str`，但您还没有使用值对其进行初始化。您要么需要将此变量移动到堆栈中：

```
str p; 
```

...或`malloc`首先对其进行一些记忆：

```
str *p = (str*)malloc(sizeof(str)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T05:04:10.067

你从来没有为结构本身分配空间，只有一个指向它的指针。

尝试类似：

```
str *p = malloc(sizeof(str)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T07:48:07.197

正如许多人指出的那样，您需要`str`在写入该结构的字段之前为该结构分配内存。

在 C 中这样做的最佳方法是：

```
p = malloc(sizeof *p); 
```

这具有以下优点：

1.  没有强制转换，因为[在 C 语言中不需要强制转换](https://stackoverflow.com/a/605858/28169)并且有强制转换可以隐藏实际错误。
2.  没有重复类型信息，通过使用运算符来计算值点`sizeof`需要多少存储空间。`p`

然后分配字符串空间时，可以将其简化为：

```
p->f = malloc(30); 
```

因为：

1.  没有演员表，出于[同样的原因](https://stackoverflow.com/a/605858/28169)。
2.  C 保证它`sizeof (char)`总是 1，所以像你一样使用它不会增加任何东西，`1 * 30`总是只是`30`.

最后，你应该在使用它之前*检查*它的返回值`malloc()`，因为它可能会失败并返回`NULL`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:06:20.240

`malloc()`在返回函数时检查 NULL 值。

<也`str *p;`没有初始化。

将 p 初始化为`str *p = malloc(sizeof(str));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T05:39:09.797

问题就在这里。

```
str *p;   ---> Problem Line 1<br>
p->f = (char*)malloc(sizeof(char)*30); ----> Problem  Line2
p->l = (char*)malloc(sizeof(char)*30); 
```

你已经声明了一个 str 类型的指针 p。
问题 1：
您尚未将此指针初始化为 NULL。因此，p 可以指向任何东西。
问题 2：
由于 p 是一个未初始化的指针，p->f 可以指向任何导致段错误的地方。下面是正确的方法

```
str *p = NULL;
p = malloc(sizeof(str));
// Check p for NULL
memset(p, 0, sizeof(str)); 
```

现在你有一个 p 指向的初始化内存。您现在可以随意使用它。

# ncover - Nunit 测试用例未显示在 NCover 中

> ID：12947422
> 
> 赞同：1
> 
> 时间：2012-10-18T05:00:18.473
> 
> 标签：ncover

让我知道以下问题的原因。我已经编写了 NUnit 测试，并且正在调试模式下通过该方法的所有行，但是这些行未显示为 NCover 报告中所涵盖的内容。

注意：我正在从 DB 获取该方法的数据。

我正在使用完整的v.3.4.18.6937版本ncover并使用命令行\使用ncover UI执行nunits。

# java - 如何通过java类在jsp中显示值

> ID：12947423
> 
> 赞同：-4
> 
> 时间：2012-10-18T05:00:45.873
> 
> 标签：java, jsp, servlets

我有一个包含表和值的数据库。我想获取该数据并将其显示在 jsp 页面中。不想在jsp页面中编写查询，分离java类，创建java对象值，然后在jsp的select字段中显示。请帮我...

这是我的java类p

```
ublic class EmpBean {
                    public java.util.List dataList(){
                        ArrayList list=new ArrayList();
                        try{
                             Class.forName("driver");
                                   Connection con = DriverManager.getConnection("url", "user", "pwd");
                                   Statement st=con.createStatement();
                                   System.out.println("hiiiii");
                                   ResultSet rs=st.executeQuery("select * from employee");
                                   while(rs.next()){
                                       list.add(rs.getString("name"));
                                       list.add(rs.getString("address"));
                                       list.add(rs.getString("contactNo"));
                                       list.add(rs.getString("email"));

                        }
                                   System.out.println(rs.getString("contactNo"));
                        }
                        catch(Exception e){}
                        return   list;

                        }

                }

//and my jsp file
                <%@page language="java" import="java.util.*" %>
                <html>
                <body> 
                <table border="1" width="303">
                <tr>
                <td width="119"><b>Name</b></td>

                </tr>
                <%Iterator itr;%>
                <%EmpBean p = new EmpBean();
                List list= (List) p.dataList(); %>
                for (itr=list.iterator(); itr.hasNext(); ){
                %>
                <tr>
                <select name="" id="" style="width: 150px;"">
                                <option value="-1"><%=itr.next()%></option>
                </select>

                </tr>
                <%}%>
                </table>
                </body>
                </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:11:54.657

我想你应该试试这个

```
 public class EmpBean {
                public java.util.List dataList(){
                    ArrayList list=new ArrayList();
                    try{
                         Class.forName("driver");
                               Connection con = DriverManager.getConnection("url", "user", "pwd");
                               Statement st=con.createStatement();
                               System.out.println("hiiiii");
                               ResultSet rs=st.executeQuery("select * from employee");
                               while(rs.next()){
                                   list.add(rs.getString("name"));
                                   list.add(rs.getString("address"));
                                   list.add(rs.getString("contactNo"));
                                   list.add(rs.getString("email"));

                    }
                               System.out.println(rs.getString("contactNo"));
                    }
                    catch(Exception e){}
                    return   list;

                    }

            } 
```

假设这个类工作正常并且它返回具有一些值的列表

现在在你的jsp页面上

```
 <%@page language="java" import="java.util.*" %>
            <html>
            <body> 
            <table border="1" width="303">
            <tr>
            <td width="119"><b>Name</b></td>

            </tr>
            <%
                  ArrayList list;
                  EmpBean emp = new EmpBean();
                  list = emp.dataList();
                  ArrayList li = (ArrayList) li.get(0);

            %>
            <tr>
            <select name="" id="" style="width: 150px;"">
                            <option value="-1"><%=li.get(1)%></option>
            </select>

            </tr>

            </table>
            </body>
            </html> 
```

只需检查此代码...可能会发生此处获取的值可能是错误的，只需通过更改列表索引来检查值，并且如果您可以用 try catch 包围整个脚本，这样如果发生异常，很容易找到错误...祝你好运，如果它不起作用，请不要担心我会给你示例代码，以确保我正在使用这个代码我的项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T05:26:28.270

假设您的 String username = String.valueOf(connect.getTasks(mysql)); 并且您想显示用户名，然后将其作为 pageContext.setAttribute("username", username) 存储在页面上下文中

然后在任何地方显示或简单地使用 <%=String.valueOf(connect.getTasks(mysql)>

如果我让你更加困惑，我没有得到你的问题并道歉......

玫瑰

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T05:41:27.857

在 Java 类中，您可以创建连接并执行查询并将其存储在 ArrayList 中。将列表设置到会话的 setAttribute 函数中。然后可以使用 sendRedirect() 方法将其重定向到 jsp 页面。

在实现此之前，请查看此链接 http://www.tutorialspoint.com/jsp/jsp_standard_tag_library.html 中的 JSP 核心标签。

但在所有这些之前，您可以粘贴您正在执行的代码块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:21:36.010

听起来你在要求[***Hibernate***](http://www.hibernate.org/docs)。

这将为您的数据库创建普通的旧 java 对象。这需要一些时间来适应，但这正是您所要求的。

# java - InetAddress.toString() 返回正斜杠

> ID：12947435
> 
> 赞同：23
> 
> 时间：2012-10-18T05:01:35.197
> 
> 标签：java

我有一个可变数据包类型`DatagramPacket`。虽然`packet.getAddress().toString()`结果是一个表示 IP 地址的字符串，但它`/`在字符串的开头附加了一个额外的内容：

```
/127.0.0.1 
```

我可以轻松删除前导`'/'`，但是有没有更好的方法来获取 IP 的字符串表示形式？`'/'`我很担心，因为如果在其他情况下还有更多怎么办。

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-18T05:04:16.973

使用以下内容：

```
packet.getAddress().getHostAddress() 
```

从[文档](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getHostAddress%28%29)中：

> 以文本形式返回 IP 地址字符串。

与之对比[`InetAddress.toString()`](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#toString%28%29)：

> 将此 IP 地址转换为`String`. 返回的字符串格式为：主机名/文字 IP 地址。如果主机名未解析，则不执行反向名称服务查找。主机名部分将由一个空字符串表示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T05:13:21.170

如果您只想要 IP，请使用主机地址：

```
String address = InetAddress.getByName("stackoverflow.com").getHostAddress(); 
```

如果您只想要主机名，请使用

```
String hostname = InetAddress.getByName("stackoverflow.com").getHostName(); 
```

您看到的斜线可能是当您尝试打印返回的 InetAddress 时对返回的 InetAddress 执行隐式 toString() 时，它会打印由斜线分隔的主机名和地址（例如 stackoverflow.com/64.34.119.12）。你可以使用

```
String address = InetAddress.getByName("stackoverflow.com").toString().split("/")[1];
String hostname = InetAddress.getByName("stackoverflow.com").toString().split("/")[0]; 
```

但是这里根本没有理由去 String 中介。InetAddress 使这两个字段在本质上是分开的。

# git - git union merge 带回一些已删除的行

> ID：12947436
> 
> 赞同：9
> 
> 时间：2012-10-18T05:01:35.497
> 
> 标签：git, git-merge

我试图用 git union merge 来理解一个令人费解的行为。要重现，请从 hello.txt 开始，其中包含：

```
1
2
3 
```

在另一个提交中，添加一行，例如

```
1
2
new
3 
```

在原始提交的不同`foo`分支中，删除中间行：

```
1
3 
```

在这里，我希望合并不包含已删除的行，即使使用联合合并也是如此。然而我看到它包含（`git merge foo`在主人运行后）：

```
1
2
new
3 
```

所以它忽略了我的行删除。我只是误解了联合合并的工作原理吗？此处的示例回购：[https ://github.com/davidebbo/MergeTest](https://github.com/davidebbo/MergeTest)

还有一点需要注意：如果不是删除第 2 行，而是删除第 1 行，那么合并会按预期进行，最终结果为：

```
2
new
3 
```

所以奇怪似乎只发生在标准（非联合）合并下会导致冲突的场景中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T06:45:54.680

--union 合并正在正常工作。请参阅[git-merge-file](http://www.kernel.org/pub/software/scm/git/docs/git-merge-file.html)手册页：

> 不要在文件中留下冲突，而是解决有利于行**两侧**的冲突。

第二种情况根本不算冲突。修改后的行不相邻（#1 和#3）。

# asp.net - WCF 服务合同同时被 XML 和 Json 序列化

> ID：12947438
> 
> 赞同：3
> 
> 时间：2012-10-18T05:01:43.823
> 
> 标签：asp.net, wcf, web-services, rest, serialization

如何在 WCF RESTful 服务中创建服务合同以采用**XmlSerializerFormat**和**WebMessageFormat.Json 。**

我需要的是从需要进行 XML 序列化的 ASP.Net 1.1 后面的代码和从 Json 序列化的 jQuery ajax 调用“CallADSWebMethod”操作合同。

服务合约

```
[ServiceContract, XmlSerializerFormat]
    public interface IService
    {
        [OperationContract, XmlSerializerFormat]
        [WebInvoke(UriTemplate = "/CallADSWebMethod",
                   Method = "POST",
                   BodyStyle = WebMessageBodyStyle.WrappedRequest,
                   ResponseFormat = WebMessageFormat.Json)]
        VINDescription CallADSWebMethod(string vin, string styleID);
    } 
```

**端点信息**

```
 <endpoint address="basic"
                  binding="basicHttpBinding"
                  name="httpEndPoint"
                  contract="ADSChromeVINDecoder.IService" />
        <endpoint address="json"
                  binding="webHttpBinding"
                  behaviorConfiguration="webBehavior"
                  name="webEndPoint"
                  contract="ADSChromeVINDecoder.IService" />
        <endpoint contract="IMetadataExchange"
                  binding="mexHttpBinding"
                  address="mex" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:18:22.423

您可以做的是像这样指定您的 Web 服务：

```
 [OperationContract]
    [WebInvoke(Method = "POST", 
        ResponseFormat = WebMessageFormat.Xml, 
        BodyStyle = WebMessageBodyStyle.WrappedRequest, 
        UriTemplate = ""/CallADSWebMethod"")]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        UriTemplate = ""/CallADSWebMethod"")]
VINDescription CallADSWebMethod(string vin, string styleID);
    } 
```

*但是*，我建议您指定 2 个不同的*端点*：一个用于**XML**序列化数据，另一个用于**JSON**序列化数据。来吧，伙计，您使用的是***REST 架构***.....为什么不充分利用它？？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T19:58:24.790

这实际上可以在没有双重声明的情况下[通过](https://stackoverflow.com/questions/3719594/return-multiple-response-from-wcf)将`webHttpBehavior`'`automaticFormatSelectionEnabled`属性设置为`true`.

# opengl - 镶嵌着色器剔除看不见的顶点？

> ID：12947440
> 
> 赞同：0
> 
> 时间：2012-10-18T05:02:10.300
> 
> 标签：opengl, tessellation

我注意到，在我的程序中，当我将视线从镶嵌网格上移开时，帧时间会下降很多，这表明屏幕上没有发生镶嵌。（我没有自定义剔除代码）

但出于我的目的，我需要在几何着色器中访问镶嵌顶点，无论它们是否在屏幕上。

这些镶嵌三角形是否进入几何着色器阶段？或者他们甚至在进入镶嵌评估阶段之前就被淘汰了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:22:16.260

> 当我将视线从我的镶嵌网格上移开时，帧时间会下降很多，这表明不在屏幕上的网格上没有发生镶嵌。

好吧，这是你的问题；相信更快的速度意味着缺乏镶嵌。

屏幕外多边形比屏幕内多边形更快的原因有*很多。*例如，就速度而言，您可能部分或完全受片段着色器和/或像素限制。因此，一旦这些片段完全在屏幕外被剔除，您的渲染时间就会下降。

简而言之，一切都很好。OpenGL 和 D3D 都不允许曲面细分阶段任意丢弃几何图形。请记住：您不必在剪辑空间中进行镶嵌，因此系统甚至无法知道三角形是否“不在屏幕上”。您的 GS 可以在屏幕上显示屏幕外的三角形。所以当时没有足够的信息来决定什么是屏幕外的，什么不是屏幕外的。

很可能，您的渲染器的性能与光栅化器/片段着色器有关，而不是与顶点处理有关。因此，即使顶点仍在处理中，由于三角形不在屏幕上，因此不会执行昂贵的每个片段操作。因此，性能有所提高。

# c++ - 从文本文件复制并粘贴到 QListWidget 的最快方法？

> ID：12947444
> 
> 赞同：0
> 
> 时间：2012-10-18T05:02:28.860
> 
> 标签：c++, qt

我有从文件字符串加载的 QListWidget，文件中的每个字符串都转换为 QListWidget 中的项目。
现在我需要能够从文本行号复制到剪贴板并将它们粘贴到 QListWidget 中
，它会将项目添加到 QListWidget 中。
我该如何进行复制/粘贴功能是否有任何教程或示例可以显示这种操作？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:37:55.090

如果我正确理解了您的操作，您希望从文件中复制，粘贴到全局剪贴板并将数据从剪贴板插入到 QListWidget。然后，您应该阅读 QClipBoard [http://doc.crossplatform.ru/qt/4.7.x/qclipboard.html](http://doc.crossplatform.ru/qt/4.7.x/qclipboard.html "QClipBoard”；")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:44:45.630

从文件中读取行并将它们加载到 QListWidget 的最快方法（写入速度最快，而不是性能方面）是：

```
QFile f;
QListWidget w;

.........

w.addItems(QString(f.readAll()).split('\n')); 
```

如果你也想捕获类似的东西，你可以使用 a`QRegExp`而不是。`\n``\r\n`

# php - 从 PHP 更改 SQL 查询

> ID：12947449
> 
> 赞同：1
> 
> 时间：2012-10-18T05:02:55.940
> 
> 标签：php, mysql, sql, drupal

如何在 PHP 代码中更改某个 SQL 查询表单，例如下面的代码

```
<?php
function eb_mine_views_query_alter(&$view, &$query) {
  if ($view->name == 'statuser') {
    dsm($query, 'before');
    $query->where[0]['type'] = 'OR';
    dsm($query, 'after');
  }
}
?> 
```

此代码与 Drupal 修改有关。

上一个查询

```
SELECT node.title AS node_title, node.nid AS nid, node.created AS node_created
FROM 
{node} node
INNER JOIN {taxonomy_index} taxonomy_index_value_0 ON node.nid = taxonomy_index_value_0.nid AND taxonomy_index_value_0.tid = :views_join_condition_0
INNER JOIN {taxonomy_index} taxonomy_index_value_1 ON node.nid = taxonomy_index_value_1.nid AND taxonomy_index_value_1.tid = :views_join_condition_1
WHERE ((( (taxonomy_index_value_0.tid = :db_condition_placeholder_2) )**AND**( (taxonomy_index_value_1.tid = :db_condition_placeholder_3) )))
ORDER BY node_created DESC 
```

在上面的代码运行结果查询之后

```
SELECT node.title AS node_title, node.nid AS nid, node.created AS node_created FROM node node OUTER JOIN taxonomy_index taxonomy_index_value_0 ON node.nid = taxonomy_index_value_0.nid AND taxonomy_index_value_0.tid = '9' OUTER JOIN taxonomy_index taxonomy_index_value_1 ON node.nid = taxonomy_index_value_1.nid AND taxonomy_index_value_1.tid = '6' WHERE ((( (taxonomy_index_value_0.tid = '9') )OR( (taxonomy_index_value_1.tid = '6') ))) ORDER BY node_created DESC LIMIT 5 OFFSET 0; 
```

如您所见，查询从 AND 更改为 OR。

现在我想像这样更改相同的代码：

```
SELECT node.title AS node_title, node.nid AS nid, node.created AS node_created FROM node node LEFT OUTER JOIN taxonomy_index taxonomy_index_value_0 ON node.nid = taxonomy_index_value_0.nid AND taxonomy_index_value_0.tid = '9' LEFT OUTER JOIN taxonomy_index taxonomy_index_value_1 ON node.nid = taxonomy_index_value_1.nid AND taxonomy_index_value_1.tid = '6' WHERE ((( (taxonomy_index_value_0.tid = '9') )OR( (taxonomy_index_value_1.tid = '6') ))) ORDER BY node_created DESC LIMIT 5 OFFSET 0; 
```

而不是使用**OUTER JOIN**我想使用**LEFT OUTER JOIN**。那么如何在我的 PHP 代码中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:50:52.550

尝试这个：

```
<?php
function eb_mine_views_query_alter(&$view, &$query) {
  if ($view->name == 'statuser') {
    dsm($query, 'before');
    $query->where[0]['type'] = 'OR';
    $query->tables[1]['type'] = 'LEFT OUTER';
    dsm($query, 'after');
  }
}
?> 
```

# database - Format for storing EXIF metadata in database

> ID：12947451
> 
> 赞同：2
> 
> 时间：2012-10-18T05:03:18.863
> 
> 标签：database, database-design, metadata, exif

I'm working on an application for which I need to be able to store EXIF metadata in a relational database. In the future I'd like to also support XMP and IPTC metadata, but at the moment my focus is on EXIF.

There are a few questions on Stack Overflow about what the table structure should look like when storing EXIF metadata. However, none of them really address my concern. The problem I have is that different EXIF tags have values in different formats, and there isn't really one column type which conveniently stores them all.

The most common type is a "rational" which is an array of two four-byte integers representing a fraction. But there are also non-fractional short and long integers, ASCII strings, byte arrays, and "undefined" (an 8-bit type which must be interpreted according to a priori knowledge of the specific tag.) I'd like to support all of these types, and I want to do so in a convenient, efficient, lossless (i.e. without converting the rationals to floats), extensible and searchable manner.

Here's what I've considered so far:

*   My current solution is to store everything as a string. This makes it pretty easy to store all of the different types, and is also convenient for searching and debugging. However, it's kind of clunky and inefficient because when I want to actually use the data, I have to do a bunch of string manipulation to convert the rational values into their fractional equivalents, e.g. `fraction = float(value.split('/')[0]) / float(value.split('/')[1])`. (It's not actually a messy one-liner like that in my real code, but this demonstrates the problem.)

*   I could grab the raw EXIF bytes for each value from the file and store them in a blob column, but then I'd have to reinterpret the raw bytes every time. This could be marginally more CPU-efficient than the string solution, but it's much, much worse in every other way - on the whole, not worth it.

*   I could have a different table for each different EXIF datatype. Using [this pattern](https://stackoverflow.com/questions/1730665/how-to-emulate-tagged-union-in-a-database) I can maintain my foreign key relationships while storing my values in several different tables. However, this will make my most common query, which is to select all EXIF metadata for a given photo, kind of nasty. It will also become unwieldy very quickly when I add support for other metadata formats.

I'm not a database expert by any means, so there some pattern or magic union-style column type I'm missing that can make this problem go away? Or am I stuck picking my poison from among the three options above?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:17:56.223

这可能是一个非常便宜的解决方案，但我个人只会将 json 或类似的东西存储在数据库中。

有一种很酷的方法可以提取 EXIF 数据并将其解析为 json。

这是链接：[Img2JSON](http://img2json.appspot.com/)

我希望这种方法可以帮助你！

# regex - Removing index.php from url using .htaccess even if the user requests it

> ID：12947460
> 
> 赞同：0
> 
> 时间：2012-10-18T05:03:52.813
> 
> 标签：regex, .htaccess, url, url-rewriting, permalinks

I never want index.php to show up in my URL, even if the user inputs it. Is this possible?

This is variation whatever after several tries. I've come close a few times but this is where it's at for now.

```
RewriteEngine On  
RewriteBase /sub-dir/  
RewriteCond %{REQUEST_URI} index\.php$  //If URL ends in index.php
RewriteRule (.*)index\.php $1  //Somehow remove index.php from the url
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . index.php [L] 
```

Currently I have permalink set up where if the user enters domain.com/sub-dir/my-perma-lin/ it generates a string on the page based on my-perma-link to look like My Perma Link. What I'd like is if the user submits any URL ending in index.php it just removes that from the URL but leaves everything else as is.

domain.com/sub-dir/index.php --> domain.com/sub-dir/
domain.com/sub-dir/my-perma-link/index.php --> domain.com/sub-dir/my-perma-link

I've written quite a few rules in [http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/) that work perfectly but when I upload it (to Dreamhost) nothing works.

This for example should work according to the the tester

```
RewriteEngine On  
RewriteBase /sub-dir/  
RewriteCond %{REQUEST_URI} \.php  //Not needed but thought it would/should help
RewriteRule (.*)(index\.php)+ $1 [L,R=301,NC] 
```

But it just removes everything after /sub-dir/

I'm either missing something super obvious or it's not possible ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:26:31.007

您需要在规则中添加一些标志：

```
RewriteEngine On  
RewriteBase /sub-dir/  
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.*)index\.php(\?|\ )
RewriteRule ^ /%1 [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . index.php [L] 
```

您可以放弃`RewriteCond %{REQUEST_URI} index\.php$`条件，因为`RewriteRule`. 您需要`$`在正则表达式的末尾包含 a ，并包含`L`停止重写和`R=301`重定向的标志。

# javascript - How would I generate a list of distinct HTML tags in a page using JavaScript (must work in IE6)

> ID：12947463
> 
> 赞同：0
> 
> 时间：2012-10-18T05:04:03.577
> 
> 标签：javascript, html, dom

The end result I'm after is a JavaScript array containing a list of tag names that are used in the HTML document eg:

div, span, section, h1, h2, p, etc...

I want the list to be distinct and I'm not interested in tags within the `<head>` of the document (but they can be there if it's a performance hog to exclude them).

This has to work in IE 6, 7, & 8 and I don't want to use jquery.

What would be the most efficient way of doing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:11:10.487

您正在寻找的是`document.all.tagName` 在我的脑海中，这样的 for 循环应该可以做到（前提是您要过滤该列表中不需要的标签）

```
for(i = 0; i < document.all.length; i++)
{
  console.log(document.all[i].tagName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:21:07.623

这是一个跨浏览器的解决方案：

```
var tags = {};  // maintains object of tags on the page and their count
var recurse = function(el) {
    // if element node
    if(el.nodeType == 1) {
        if(!tags[el.tagName])
            tags[el.tagName] = 0;
        tags[el.tagName]++;    
    }   
    // recurse through the children
    for(var i = 0, children = el.childNodes, len = children.length; i < len; i++) {
        recurse(children[i]);
    }
}

recurse(document);

// if you want just what's in the body(included)
var bodies = document.getElementsByTagName("body");
for(var i = 0; i < bodies.length; i++)
    recurse(bodies[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:56:46.267

要将文档中的唯一标记名列表作为一个数组获取，该数组适用于所有浏览器（回到 IE 6 和等效版本）：

```
function listTagNames() {
  var el, els = document.body.getElementsByTagName('*');
  var tagCache = {};
  var tagname, tagnames = [];

  for (var i=0, iLen=els.length; i<iLen; i++) {
    tagname = els[i].tagName.toLowerCase();

    if ( !(tagname in tagCache) ) {
      tagCache[tagname] = tagname;
      tagnames.push(tagname);
    }  
  }
  return tagnames;
} 
```

如果您认为可能存在与标记名称相同的继承对象属性，请使用[`propertyIsEnumerable`](http://ecma-international.org/ecma-262/5.1/#sec-15.2.4.7)测试：

```
 if (!tagCache.propertyIsEnumerable(tagname)) { 
```

所以它甚至可以在 Safari < 2 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:58:12.453

获取文档中的所有标记名，唯一的，跨浏览器的，纯js：

```
var els = document.getElementsByTagName('*'), tags = [], tmp = {}
for (var i=0;i<els.length;i+=1){
 if (!(els[i].tagName in tmp)){
   tags.push(els[i].tagName);
   tmp[els[i].tagName] = 1;
 }
} 
```

利用

```
if (!(els[i].tagName in tmp) 
     && !/head/i.test(els[i].parentNode.tagName) 
     && !/html|head/i.test(els[i].tagName)) 
```

排除`<head>`

# mysql - 我可以在 Windows 7 上运行不同版本的 mysql

> ID：12947469
> 
> 赞同：3
> 
> 时间：2012-10-18T05:04:43.323
> 
> 标签：mysql, database

我有 8GP RAM 的 Windows 7 机器。我可以同时运行 mysql 版本 4 和 5.5.21。如果可能，请指导我。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:09:49.677

是的你可以。但是您必须指定 2 个不同的端口来运行 2 个不同的 MySql Server 实例。我猜，Mysql 的默认端口是 3306。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:11:32.370

您可以在 Windows 上运行多个服务器，方法是从命令行手动启动它们，每个都具有适当的操作参数，或者通过将多个服务器安装为 Windows 服务并以这种方式运行它们。

在这里继续阅读：

[https://dev.mysql.com/doc/refman/5.5/en/multiple-windows-servers.html](https://dev.mysql.com/doc/refman/5.5/en/multiple-windows-servers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:16:54.403

这背后的整个想法是用不同的 TCP/IP 端口和 Unix 套接字文件编译新的 MySQL 服务器，以便每个服务器都在不同的网络接口上侦听。为每个安装在不同的基本目录中编译还会为每个服务器生成单独的编译数据目录、日志文件和 PID 文件位置。

也参考这个链接[。](https://dev.mysql.com/doc/refman/4.1/en/multiple-windows-servers.html)

[如何在同一台 PC 上安装两个不同版本的 MySQL 服务器](http://www.geeksengine.com/article/install-two-mysql.html)

# php - PHP: Pass parameter to function, but with variables defined inside function used in parameter

> ID：12947471
> 
> 赞同：0
> 
> 时间：2012-10-18T05:04:52.293
> 
> 标签：php, function

I would like to pass a parameter to a function. However, inside this parameter, I use variables that are defined inside the function. For example:

```
<?php

function foo($var){
    $test = "test";
    echo $var;
}

foo($test);

?> 
```

In this example, I would like for the function to print out "test". Of course, this returns an error. However, this is what I am trying to do.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:07:28.603

您可以使用 using 来完成此操作[`variable-variables`](http://php.net/manual/en/language.variables.variable.php)，但我不明白您为什么想要/需要：

```
function foo($var){
    $test = "test";
    echo $$var;
}

foo('test'); 
```

注意在`echo`里面的语句中`foo()`，变量有两个`$`前导。这是 a`variable-variable`和`$var`的*值*将被视为变量名。因此，通过调用`foo('test');`（在这种情况下参数是字符串），`$$var`将评估为`$test`.

# algorithm - General tricks for reducing time complexity of DP algorithms

> ID：12947472
> 
> 赞同：2
> 
> 时间：2012-10-18T05:04:57.317
> 
> 标签：algorithm

So as I was going through some practice problems from programming contests (ACM ICPC, etc), people can often times take an O(N^2) Solution, or even worse, and use a Heap (priority_queue in C++) or a deque to reduce complexity. (as some sort of optimization, after noticing "something" in the pattern)

For example in the "sliding window maximum" problem, which is pretty much:

```
For each window of size K in an array of size N, compute the maximum. 
```

There's a trivial O(NK) algorithm, a rather easy O(nlogn) solution (even I can see it, using a heap) and a O(N) solution, using a double ended queue.

These principals seem to be on the principal of "throwing" away useless values, or querying a region to find a property (maximum, cumulative sum, min, etc).

For example to convert some O(N^2) algorithms to O(NlogN), sometimes you can use a priority_queue and keep popping out values until you get one within a certain window, instead of looping through all previous N elements to find a maximum.

Anyone have good tips? (Other than doing more problems... I'm trying to do that)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:00:02.057

DP算法的基础是分裂问题。

为了降低时间复杂度，让我们以不同的方式拆分问题。

为了体现 DP 算法，我们使用了许多简单的子算法，例如排序、树（即使它不是算法）、...

如果您想降低时间复杂度，请更快地体现此算法。

如果您使用排序，请使用快速排序或堆排序而不是选择/冒泡排序。

如果要获取最小值/最大值，请使用堆或优先级队列。

如果你不能做出更快速的递归公式，那么使用更快速的子算法来减少时间。

# google-chrome - Difference between background script and content script in chrome extension

> ID：12947473
> 
> 赞同：25
> 
> 时间：2012-10-18T05:04:58.913
> 
> 标签：google-chrome, google-chrome-extension, content-script

As the questions says, I just want to know the **difference between background script and content script** in chrome extension. When I logged the chrome object in both the scripts, I found the different objects.

## Use case

I want to inject my javascript into the page when the icon is clicked So in `manifest.json` I added a content script but I am unable to listen to icon click event inside content script.

> chrome.browserAction is not defined in chrome object in content script.

## Question

How can I listen to click event in content script. Can we include both background and content script ?

This is my manifest.json

```
{
  "name": "First Plugin Testing",    
  "version": "1.0",
  "manifest_version": 2,    
  "description": "Trying hands on first extension",
  "background": { "scripts": ["background.js"] },
  "browser_action": {
    "default_icon": "icon.png"
  },
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "content_scripts": [
    {
      "matches": ["http://*/*"], 
      "js": ["temp.js"]
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T05:30:11.787

我已经找到了所提问题的答案。

> A. 我们可以同时包含内容脚本和背景脚本吗？

**是**的，我们可以在清单中同时包含后台脚本和内容脚本。要在它们之间进行交互，您可以使用[Chrome Message Passing API](http://developer.chrome.com/extensions/messaging.html#examples)。

我也在做同样的事情，但是后台脚本中有一些我看不到的错误，因此我在谷歌上进行了一些搜索后发布了这个问题。

> B. 如何在内容脚本中收听点击事件？

**解决方案：**我们不能`browser click event`在内容脚本。它只能部分访问 chrome 对象所以你必须在后台脚本中接收点击处理程序并将消息发送到内容脚本并做你想做的任何事情。

在后台脚本中使用`chrome.browserAction.onClicked`事件，然后使用[消息传递](http://developer.chrome.com/extensions/messaging.html#examples)将信息发送到用户单击图标的内容脚本。

# sql-server - Dynamic scheduling of data driven subscription

> ID：12947474
> 
> 赞同：1
> 
> 时间：2012-10-18T05:05:03.677
> 
> 标签：sql-server, reporting-services

I have a data driven subscription which delivers a report to an email alias at specific time. In a subscription query:

```
select WorkProjectionReportTime,WorkProjectionReportToMailAlias,
'Work Projection Report for the period ' + CONVERT(varchar(10),GETDATE()-31,101)+ ' to '+CONVERT(varchar(10),GETDATE()-1,101) as Subject,
CONVERT(varchar(10),GETDATE()-31,101) as FromDate,CONVERT(varchar(10),GETDATE()-1,101) as ToDate, 60 as WO, 
'Please see the attachment for the details' as body
from tblConfig
Pivot ( MAX(cValue) for cKey in (WorkProjectionReportTime,WorkProjectionReportToMailAlias) ) as xyz 
```

So by query I get all the required fields, Email To, Time, report parameters.

I want to use the time parameter to schedule report. e.g. if time is 9:30 the report should be mailed at 9:30 AM etc. I want to achieve this from SQL or database front and not from C#. How to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:34:53.150

结合上面建议的调度表，您可以使用以下命令通过 TSQL 发送报告，使用 @report_path 作为参数：

```
SELECT 'exec ReportServer.dbo.AddEvent @EventType=''TimedSubscription'', 
             @EventData=''' + CONVERT(VARCHAR(max), rs.SubscriptionID) + ''''
FROM   ReportServer.dbo.Catalog c,
       ReportServer.dbo.ReportSchedule rs,
       ReportServer.dbo.Schedule s
WHERE      rs.ReportID = c.ItemID
       AND rs.ScheduleID = s.ScheduleID
       AND c.path = @report_path
       AND s.RecurrenceType = 1 -- only the ones with the regular scheduling disabled 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:05:31.647

您可以创建每分钟运行的作业并检查是否有报告要发送和发送。但这意味着您将有最多 1 分钟的延迟 +“您的报告运行需要多长时间”。

此外

1.  您可以将报告发送放在服务代理中，它将确保报告异步发送到您的计划检查器作业。

或者

1.  为报告发送创建排队表，主作业将向其插入发送请求。此外，您可以有 5 个作业来读取 1-2 个请求并发送它们，但在这种情况下，您会延迟作业计划。

希望这可以帮助。

# javascript - To change scrollbar location

> ID：12947477
> 
> 赞同：0
> 
> 时间：2012-10-18T05:05:19.490
> 
> 标签：javascript, html, css

I have the following css and html :

```
<head>
<style type="text/css">
ul > li {
    position:relative;
    margin:0;
    list-style:none;
    padding:0;
}
ul{
padding:0;
margin:0;
}
</style>
</head>
<body >
<div style="position:absolute;top:40%;width:100;height:50%;border:1px solid red;overflow:auto;offsetTop:10px">
<!--<a onclick='calla()' disabled="disabled">Delete</a>-->
<ul>
<?php
for ($i=0;$i<50;$i++){
?>
<li>Test li_<?php echo $i; ?> 
</li>
<?php
}
?>
</ul>
</div> 
```

The above code creates a vertical scrollbar for the div and by default the scrollbar always comes at the top. If I want to change the scrollbar location ie. say at the middle or anywhere according to the height I give(so that the visible li components also change), How can I go about doing it?

Solution both in html/css and javascript(dynamically) is most welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:29:13.467

```
<html>
<head>
<style type="text/css">
ul > li {
    position:relative;
    margin:0;
    list-style:none;
    padding:0;
}
ul{
padding:0;
margin:0;
}

p { margin:10px;padding:5px;border:2px solid #666;width:1000px;height:1000px; }

</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body >
<div class="demo" style="position:absolute;top:40px;width:100;height:60%;border:1px solid gray;overflow:auto;offsetTop:10px">
<!--<a onclick='calla()' disabled="disabled">Delete</a>-->
<ul>
<?php
for ($i=0;$i<50;$i++){
?>
<li>Test li_<?php echo $i; ?></li>
<?php
}
?>
</ul>
</div>
<script>$("div.demo").scrollTop(300);</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:22:56.103

使用 jquery 的 scrollTop() 方法。

请参考：[http ://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

# java - How do you declare a string array of unknown size?

> ID：12947478
> 
> 赞同：18
> 
> 时间：2012-10-18T05:05:23.790
> 
> 标签：java, arrays, string, initialization

> **Possible Duplicate:**
> [Declaring an array of unknown size](https://stackoverflow.com/questions/5447981/declaring-an-array-of-unknown-size)

I'm working in Java and I am trying to input a sentence into a string array. I am tokenizing it and determining the word count. However, I need to add each word into a string array in order to determine if there are duplicates or not. I am not sure how to initialize my array if I don't know the word count until later in the program.

```
 //Declares variables
  Scanner scan = new Scanner (System.in);
  int withoutdup = 0, wordCount = 0;
  String line, word; 
  StringTokenizer tokenizer;
  List<String> sentence = ArrayList<String>;

  //Asks user for input
  System.out.println ("Please enter text. Enter DONE to finish.");
  line = scan.next();

  //Tokenizes the string and counts the number of character and words
while (!line.equals("DONE"))
 {
     tokenizer = new StringTokenizer (line);
     while (tokenizer.hasMoreTokens())
     {
        word = tokenizer.nextToken();
        wordCount++;
        sentence += word; 
     }
     line = scan.next();
 } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-18T05:06:50.927

Use an `ArrayList` instead

```
List<String> list = new ArrayList<String>(); 
```

it grows automatically.

To check for the duplicates, you can utilize a `Set` (`HashSet`), it doesn't allow duplicate elements.

**Update**

I see a couple of problem in your code:

```
List<String> sentence = ArrayList<String>; 
```

You are missing the `new` after `=`.

```
sentence += word; 
```

That only would work if `sentence` was a `String`. It's a `List` so you should use `List.add` method there

```
sentence.add(word); 
```

Also now `wordCount++;` is redundant `sentence.size()` will tell you how many words.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T05:37:55.590

只要看下面的例子，你就会明白如何声明一个未知大小的字符串数组。

首先，使用 ArrayList 存储字符串，每次调用 .add 方法时，ArrayList 的大小都会增加一个元素。当您填充 ArrayList 时，请使用 ArrayList size() 方法并创建您的 String 数组并从中调整大小。但是请确保 ArrayList 中的每个元素都是一个对象，这就是为什么您需要将每个元素转换为字符串的原因。

例子：

```
ArrayList list = new ArrayList();

for( int i = 0; i < 100; i++ )

list.add( "stuff" );

String[] strArray = new String[ list.size() ];

for( int j = 0; j < strArray.length; j++ )

strArray[ j ] = list.get( j ).toString(); 
```

希望这会帮助你。这只是一种方式，但我认为可能还有另一种更有效的方式可以让你做同样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T05:07:04.230

Use a **dynamic** structure which can shrink and grow as needed, `ArrayList` would be a good choice, for example.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T05:07:16.183

不可能，数组的长度是恒定的。最好使用`java.util.List`诸如此类的实现`ArrayList,LinkedList`...

如果你想坚持使用数组，那么你可以使用这样的函数来调整你的数组，但在这里它会再次创建一个具有新大小的新数组并复制以前的数组值。

```
private static Object resizeArray (Object oldArray, int newSize) {
   int oldSize = java.lang.reflect.Array.getLength(oldArray);
   Class elementType = oldArray.getClass().getComponentType();
   Object newArray = java.lang.reflect.Array.newInstance(
         elementType, newSize);
   int preserveLength = Math.min(oldSize, newSize);
   if (preserveLength > 0)
      System.arraycopy(oldArray, 0, newArray, 0, preserveLength);
   return newArray; 
} 
```

# python - 什么可能导致 TypeError：无法连接 'str' 和 'function' 对象？

> ID：12947480
> 
> 赞同：0
> 
> 时间：2012-10-18T05:05:46.747
> 
> 标签：python, string, variables, flask, typeerror

在执行我的 Python 脚本时，我刚刚收到以下类型错误：

```
File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1701, in __call__
return self.wsgi_app(environ, start_response)
File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1689, in wsgi_app
response = self.make_response(self.handle_exception(e))
File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1687, in wsgi_app
response = self.full_dispatch_request()
File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1360, in full_dispatch_request
rv = self.handle_user_exception(e)
File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1358, in full_dispatch_request
rv = self.dispatch_request()
File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1344, in dispatch_request
return self.view_functions[rule.endpoint](**req.view_args)
File "/Users/Zach/Dropbox/stock/stk.py", line 31, in stock
url="http://finance.yahoo.com/d/quotes.csv?s="+stock+"&f=snl1"
TypeError: cannot concatenate 'str' and 'function' objects 
```

导致问题的行似乎是`url="http://finance.yahoo.com/d/quotes.csv?s="+stock+"&f=snl1"`，特别是变量`stock.`经过研究和我从以前的错误中了解到的一点点，我推断原因一定是变量定义的问题（它不是字符串，或者可能没有定义完全）；也就是说，我之前在函数中将此变量定义为字符串：

```
@app.route('/', methods=['GET', 'POST'])
def home_search():
    if request.method == 'POST':
            stock = request.form['s']
            return redirect(url_for('stock'))

    return render_template('stk.html') 
```

这是函数，`stock`我尝试调用并显示之前定义的值：

```
@app.route('/stock', methods=['GET', 'POST'])
def stock():
    print type(stock)
    url="http://finance.yahoo.com/d/quotes.csv?s="+stock+"&f=snl1"
    text=urllib2.urlopen(url).read()

    return render_template('stock.html') 
```

但是，它的定义与`@app.route`我调用它时的不同。Python中的变量不应该像那样存储和调用，还是在加载新页面时变量被清空？如果是这种情况，任何有关解决方法或更好方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:20:14.413

命名函数是变量，就像其他所有东西一样。该`stock`行中使用的是：

```
 url="http://finance.yahoo.com/d/quotes.csv?s="+stock+"&f=snl1" 
```

是包含它的函数。您不应该跨请求依赖 Python 变量；相反，您应该将变量作为请求变量传递，例如

```
/stock?s=whatever 
```

然后从`request.form`该 URL 的处理程序中的 new 中读回它。

* * *

`stock`您在函数中创建的变量`home_search`是一个局部变量，它只在调用的生命周期内存在`home_search`，一旦您将客户端重定向到不同的 URL（例如`/stock`），该变量就会结束。

# regex - htacess 将所有页面重定向到 www，结帐页面除外

> ID：12947482
> 
> 赞同：0
> 
> 时间：2012-10-18T05:05:55.677
> 
> 标签：regex, .htaccess

我有一个带有 ssl 的网站，它只适用于非 www 版本。是否可以使用 htacess 将除结帐页面之外的所有 url 重定向到 www 版本并在结帐页面上添加 https://

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:30:34.827

假设您的结帐页面位于`https://domain.com/checkout.php`

尝试：

```
RewriteEngine On

# redirect non-www hostname to www hostname, but not /checkout.php
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule !^/?checkout.php http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# if checkout.php, redirect if not HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^/?checkout.php https://domain.com%{REQUEST_URI} [L,R=301] 
```

# gwt - GWT-Eclipse Deployment Error

> ID：12947487
> 
> 赞同：0
> 
> 时间：2012-10-18T05:06:20.170
> 
> 标签：gwt, web-deployment

Got this while deploying:

> Unable to update: com.google.appengine.tools.admin.HttpIoException: Error posting to URL: [https://appengine.google.com/api/appversion/clonefiles?app_id=venuebookingservice&version=2&](https://appengine.google.com/api/appversion/clonefiles?app_id=venuebookingservice&version=2&) 500 Internal Server Error

I'm using the Eclipse GWT plugin for Eclipse 3.6\. It was deploying fine before this started.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T05:28:19.750

不要将 Eclipse 3.6 与 GWT 一起使用。在我们的项目中，我们的经历很糟糕（Indigo 包含很多错误）。尝试使用更稳定且运行良好的 Eclipse Juno (4.2)。许多错误/问题将得到解决。

# tomcat - 多个 Https Tomcat 连接器，一个需要客户端身份验证，一个不需要

> ID：12947500
> 
> 赞同：0
> 
> 时间：2012-10-18T05:07:37.930
> 
> 标签：tomcat, web-applications, https, webserver, authentication

我正在开发一个组件，该组件需要在没有客户端身份验证的情况下通过 https 连接到用户，并在启用客户端身份验证的情况下与其他组件通信。

我想用两个安全连接器启动组件，一个启用客户端身份验证说 C1，一个禁用说 C2。

我还想配置我的组件的哪个 servlet 将使用连接器 C1 运行，哪个将在 C2 上运行。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:50:29.890

我得到了这个问题的部分答案

您可以在 servlet.xml 配置中为 tomcat 添加多个连接器，一个在 8443 上启用客户端身份验证，一个在端口 8444 上未启用客户端身份验证。

那么您是否需要客户端身份验证将取决于您与服务器通信的端口。

但是我仍然没有找到强制（并自动重定向）servlet 在预配置连接器上进行通信的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:43:45.453

您可以通过两种方式实现拆分：

1.  将您的应用程序分成两场战争：一场用于需要客户端身份验证的 servlet，另一场用于不需要客户端身份验证的 servlet。然后在 Tomcat 中创建两个虚拟主机，每个虚拟主机都有一个连接器和一个 war 文件。
2.  编写要调用的应用程序，`request.getAttribute("javax.servlet.request.X509Certificate")`并根据所需的路由决定是否将重定向（通过 302 HTTP 代码）发送回客户端。

# jquery - 使用 remote: true 提交 form_for 后刷新部分

> ID：12947501
> 
> 赞同：2
> 
> 时间：2012-10-18T05:07:45.643
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, ruby-on-rails-3

我在侧栏中有一个表单，当表单提交时，我只需要从侧栏中刷新特定的部分，而不是整个页面。部分有一个 div id = "class-id" 。

部分.html.haml

```
- if class
 // display some stuff
- else
  = form_for [Class.new], remote: true do |f| 
    .field
      = f.label :description
      = f.text_field :description      
    .actions
      = f.submit 
```

提交完成后我需要重新加载这个部分，以便访问第一个 if 。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:24:02.027

例如，创建一个视图文件作为您的操作名称。- 假设您的操作名称`create`在您的文件夹中，`user controller` 然后在您的`view/users`文件夹中创建一个文件`create.js.erb`并在该文件中写入以下代码。

### 对于 jQuery

```
$('class or id name').html("<%= escape_javascript render(:partial => 'whatever your your partial') %>") 
```

### 对于原型

```
page.replace_html "class or id name", :partial => "whatever your partial to update" 
```

# android - 如何在android中播放不同的视频文件格式

> ID：12947506
> 
> 赞同：0
> 
> 时间：2012-10-18T05:08:40.827
> 
> 标签：android, ffmpeg

我正在开发一个 android 应用程序，其中一个功能是播放从服务器下载的视频文件。

在服务器中，一些文件是 .mp4 文件，由 android 支持，一些文件是 .mov 文件。

在这里，我还必须在我的应用程序中播放 .mov 文件，这些文件不受 android 的支持。所以我用谷歌搜索了这个，我发现使用**ffmpeg**我们解决了这个问题。但我没有找到一个很好的教程，如何在我的 android 应用程序中包含 ffmpeg在 Windows 上。

请给出一些关于这个问题的指导方针。

提前致谢

# c# - MSTest 显示复合布尔表达式的部分代码覆盖率

> ID：12947507
> 
> 赞同：12
> 
> 时间：2012-10-18T05:08:53.333
> 
> 标签：c#, unit-testing, mstest, code-coverage

从 Microsoft 的文档中，部分覆盖的代码是*“......该行中的某些代码块没有被执行”。*我对这个很困惑（为简洁起见）：

鉴于此方法：

```
public List<string> CodeUnderTest()
{
    var collection = new List<string> { "test1", "test2", "test3" };
    return collection.Where(x => x.StartsWith("t") && x == "test2").ToList();
} 
```

而这个测试：

```
[TestMethod]
public void Test()
{
    var result = new Class1().CodeUnderTest();
    CollectionAssert.Contains(result, "test2");
} 
```

代码覆盖结果显示，表达式`x.StartsWith("t") && x == "test2`仅被部分覆盖。我不确定这怎么可能，除非编译器或 CLR 有某种急切的条件匹配的东西，但也许我只需要解释一下。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T23:50:26.820

条件与运算符 (&&) 对其布尔操作数执行逻辑与，但仅在必要时评估其第二个操作数。

[http://msdn.microsoft.com/en-us/library/2a723cdk(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/2a723cdk(v=vs.100).aspx)

所以你会期望双方都被覆盖

也许它抱怨的是你没有测试 -ve 路径，即如果你的集合是

```
var collection = new List<string> { "test1", "test2", "test3", "not_this_one" }; 
```

这样您就可以测试`x.StartsWith("t")`T/F，因为目前只有 T 路径正在针对该条件进行测试。

# java - ibatis数据迁移问题

> ID：12947508
> 
> 赞同：0
> 
> 时间：2012-10-18T05:08:54.030
> 
> 标签：java, sql, ibatis

我的java项目中使用ibatis在两个SQL数据库之间进行数据迁移时如何解决这个错误。我得到的Stacktrace如下。

> 信息：为持久性单元“projproject”关闭 JPA EntityManagerFactory [EL 配置]：2012-10-18 15:20:56.439--ServerSession(257101811)--Connection(904190158)--Thread(Thread[main,5,main] )--断开[EL信息]：2012-10-18 15:20:56.439--ServerSession(257101811)--Thread(Thread[main,5,main])--file:/var/tmp/tproject/lib /project-domain-0.9.28.jar_projproject 注销成功 2012 年 10 月 18 日下午 3:20:56 org.springframework.context.weaving.DefaultContextLoadTimeWeaver 销毁信息：删除类加载器的所有注册转换器：sun.misc.Launcher$AppClassLoader 异常在线程“主”org.springframework.jdbc.UncategorizedSQLException：SqlMapClient 操作；SQL [] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；--- 错误发生在 tproject-migration-sql-map.xml 中。--- 应用结果映射时发生错误。--- 检查 TprojectMigration.findOrders-AutoResultMap。--- 在结果对象上设置属性时发生错误。--- 原因：java.lang.NullPointerException；嵌套异常为 com.ibatis.common.jdbc.exception.NestedSQLException: --- 错误发生在 tproject-migration-sql-map.xml。--- 应用结果映射时发生错误。--- 检查 TprojectMigration.findOrders-AutoResultMap。--- 在结果对象上设置属性时发生错误。--- 原因：org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83) 中的 java.lang.NullPointerException。--- 错误发生在 tproject-migration-sql-map.xml 中。--- 应用结果映射时发生错误。--- 检查 TprojectMigration.findOrders-AutoResultMap。--- 在结果对象上设置属性时发生错误。--- 原因：java.lang.NullPointerException

# javascript - 关于 Math.sqrt 在 JavaScript 中的精度的奇怪行为

> ID：12947509
> 
> 赞同：1
> 
> 时间：2012-10-18T05:09:07.823
> 
> 标签：javascript, math, vector, precision

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

所以我正在研究一个 js 库来处理 3 维向量，我偶然发现了一个非常小的精度问题。好的，首先，看下面的代码：

```
var a = new vec3(1, 0, 0);
var b = new vec3(1, 1, 0).normalize(); 
```

在那里，我创建了 2 个彼此正好成 45° 度的向量（我省略了`vec3`构造函数，因为我只是在那里做标准的数学东西）

现在你们知道了 2 个 3D 向量的点积产生了它们的大小和相乘的角度的余弦。但是当我这样做时：

```
alert(180 / Math.PI * Math.acos(a.dot(b))); 
```

我明白了`45.00000000000001`

我知道这是一个非常非常小的差异，但这会阻止我检查两个向量之间的角度是否为 45°，以防我事先不知道，因为`Math.acos(a.dot(b)) == Math.cos(Math.PI / 180 * 45)`会导致`false`

但这是一件有趣的事情，如果我将向量更改为：

```
var y = new vec3(Math.sqrt(2), Math.sqrt(2), 0).normalize();
var x = new vec3(Math.sqrt(2), 0, 0).normalize(); 
```

然后进行与上述相同的计算，结果正好是 45。

现在我知道我可以四舍五入`45.00000000000001`，但是由于我对如何在较低级别上实现数学函数完全不了解，我真的很好奇哪些因素可能导致两个计算应该给出完全相同的值来导致结果略有不同的东西。

# jquery - 从 IE 中的 iFrame 访问父文档

> ID：12947512
> 
> 赞同：1
> 
> 时间：2012-10-18T05:09:09.160
> 
> 标签：jquery, html, iframe

> **可能重复：**
> [权限被拒绝 IE iFrame](https://stackoverflow.com/questions/2953158/permission-denied-ie-iframe)
> [使用 jquery 从动态 iframe 访问父文档](https://stackoverflow.com/questions/12947122/access-parent-document-from-dynamic-iframe-using-jquery)

我正在尝试`<iframe>`使用`$('#_hf_iFrame', top.document)`. 它适用于 Firefox、Chrome 和 Safari，但 IE 会抛出**拒绝访问**异常。

我正在使用以下代码来`<iframe>`动态创建。

这个问题是这个问题的延续。我使用以下代码将动态附加到文档中。

```
var _hf_iFrame = document.createElement("iframe");
_hf_iFrame.setAttribute("id", "_hf_iFrame");
_hf_iFrame.setAttribute("name", "_hf_iFrame");
_hf_iFrame.setAttribute("allow-transparency", true);
_hf_iFrame.setAttribute("style", "height: 354px; width: 445px; border: 0; top: 23%; position: fixed; left:0; overflow: show; background:transparent;");
document.body.appendChild(_hf_iFrame);
_hf_iFrame.setAttribute("src", "javascript:false");

var myContent = '<!DOCTYPE html>'
+ '<html><head><title></title><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script><script type="text/javascript" src="http://somedomain.com/js/core.js"></script></head>'
+ '<body style="margin: 0px;"></body></html>';
_hf_iFrame.contentWindow.document.open('text/html', 'replace');
_hf_iFrame.contentWindow.document.write(myContent);
_hf_iFrame.contentWindow.document.close(); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:22:37.193

这可能会解决您的问题。

[跨子域Javascript](http://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/)

```
<script type="text/javascript">
document.domain = "yourdomain.com";
</script> 
```

> 基本上，JS 认为即使是诸如 img.yourdomain.com 这样的子域也是与 www.yourdomain.com 不同的域。因此，来自这两个子域的页面之间的 AJAX 将不起作用。此外，如果您有一个从一个到另一个的 iframe，您将无法来回引用 JS 变量或函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:22:28.910

我已将代码更改为

```
//var source = "javascript:void((function(){document.open();document.domain=\'cloudapp.net\';document.close();})())";  
var source = "javascript:false";
var elem = document.createElement("iframe");
elem.frameBorder = "0";
elem.src = source;
elem.style.width = "100%";
elem.style.margin = "0px";
elem.style.padding = "0px";
elem.setAttribute("id", "_hf_iFrame");
document.body.appendChild(elem);

elem.contentWindow.document.open('text/html', 'replace');
elem.contentWindow.document.write(myContent);
elem.contentWindow.document.close(); 
```

它适用于所有浏览器......但我仍然找不到这个奇怪问题的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T05:22:19.407

如果父级和 iframe 都在同一个域上，我认为您可以从 iframe 中获取父级对象。否则子 iframe 或父 iframe 无法相互访问。

设置域

```
document.domain = 'yourdomain.com'; 
```

**编辑：**

document.domain 只能设置为`subset of the current domain`. 所以`developer.mozilla.org`可以设置为`mozilla.org`，但不是`mozilla.com`。此属性在某些浏览器中也可能是只读的。

# python - Python Pandas 混合布尔值 Yes/True 和 NaN 列

> ID：12947521
> 
> 赞同：2
> 
> 时间：2012-10-18T05:10:08.083
> 
> 标签：python, import, pandas

我正在学习推荐 R 或 Stata 的健康科学课程。我正在尝试改用 Python / Numpy / Pandas，因为我希望将来将其用于金融时间序列分析。

数据是 Stata 格式，所以我复制了这些字段并将它们保存为`CSV`. 所有字段导入都很好，除了有许多“是/否”列，其中一些有空白字段。

导入命令是

```
fhs = pd.io.parsers.read_csv('F:\\BioStatistics\\fds\\fhs_c2.csv', header=0, index_col=0) 
```

如果有一个空白字段，则 dtype 是对象（有意义）

如果某些列转换为 没有空格`TRUE/FALSE`，则其他列保留为，`Yes/No`但 dtype 为 bool。知道为什么吗？

我希望所有人都使用一种 dtype 并表达一种查看+统计分析的方式。

我通过在开头添加一行空白单元格来为没有空格的布尔列添加一行来实现这一点 - 所以一切都变成了一个对象。然后我 `fhs = fhs.drop([1002])`用来删除该行并且数据类型仍然很好。

我很想在没有这一行的情况下保存它，并且每次都能使用“正确”类型加载数据，但不知道是否有可能何时某些列将全部为“是”或“否”，而有些则为空白细胞。是否可以？

谢谢，对不起新手问题。

## 例子：

输入

```
 C1    C2    C3

R1   Yes   Yes    No

R2    No    No    No

R3   Yes         Yes

R4   Yes   Yes   Yes 
```

第一列进入 df 为 Yes, No, Yes, Yes 在下面输入 bool xxxx

第 2 列进入 df 为 Yes、No、NaN、Yes 类型对象

第 3 列作为 FALSE、FALSE、TRUE、TRUE 类型进入 df

该死。刚检查。我错了。如果是和否，则列类型为对象。

我想在导入时告诉它以使它们全部成为对象并坚持是和否，因为：1.我认为第二列必须是对象（否则我认为它是混合的）2.数据集是/否和其他班员会看着是和否

## 当我尝试解决方案时发生了什么。

这是我的数据： [链接](http://i.imgur.com/sVRK0.gif)

代码如下：
from pandas import *
import numpy as np
import pandas as pd

```
def convert_bool(col):
    if str(col).title() ==  "True": #check for nan
        return "Yes"
    elif str(col).title() == "False":
        return "No"
    else:
        return col

fhs = pd.read_csv('F:\\BioStatistics\\fds\\StatExport.csv', converters={"death": lambda x:convert_bool(x)}, header=0, index_col=0) 
```

和输出[链接](http://i.imgur.com/oJ42H.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:45:25.697

您可以使用 pandas.read_csv 中的转换器字段

```
def convert_bool(col):
    if str(col).title() ==  "True": #check for nan
        return "YES"
    elif str(col).title() == "False":
        return "NO"
    else:
        return col
pandas.read_csv(file_in, converters={"C3": lambda x:convert_bool(x)}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T21:30:06.617

请注意，在即将推出的 pandas 0.9.2（其中包括一个新的文件解析器引擎）中，您将能够：

```
In [1]: paste
data = """A,B,C
Yes,No,Yes
No,Yes,Yes
Yes,,Yes
No,No,No"""

result = read_csv(StringIO(data), dtype=object)
## -- End pasted text --

In [2]: result
Out[2]: 
     A    B    C
0  Yes   No  Yes
1   No  Yes  Yes
2  Yes  NaN  Yes
3   No   No   No

In [3]: result = read_csv(StringIO(data), dtype=object, na_filter=False)

In [4]: result
Out[4]: 
     A    B    C
0  Yes   No  Yes
1   No  Yes  Yes
2  Yes       Yes
3   No   No   No 
```

甚至（获取 NumPy 数组）：

```
In [5]: result = read_csv(StringIO(data), dtype='S3', na_filter=False, as_recarray=True)

In [6]: result
Out[6]: 
array([('Yes', 'No', 'Yes'), ('No', 'Yes', 'Yes'), ('Yes', '', 'Yes'),
       ('No', 'No', 'No')], 
      dtype=[('A', '|S3'), ('B', '|S3'), ('C', '|S3')]) 
```

# iphone - uitableview单元格中的异步图像加载

> ID：12947523
> 
> 赞同：2
> 
> 时间：2012-10-18T05:10:24.607
> 
> 标签：iphone

我是 iPhone 编程的新手。我想将图像加载到 UITableView。我的图片来自网络。我知道我必须使用`ASIHttp Request`然后将图像加载到 UITableview。但如果我这样做，那么直到它的加载图像 UITableview 挂起。如果我使用异步图像加载块，那么每次`Cell==nil`或重用请求女仆，我不想这样做。

以下我在 Tableview 中使用的代码行`cellForRowAtIndexpath`。

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        static NSString *CellIdentifier = @"CellIdentifier";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        UIImageView *imgViewCellBg;

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
            cell.accessoryType=UITableViewCellAccessoryNone;

                   imgViewCellBg = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,151)];
                   imgViewCellBg.userInteractionEnabled = NO;
                     imgViewCellBg.backgroundColor = [UIColor whiteColor];
                   imgViewCellBg.tag = 10000;
                   [cell.contentView addSubview:imgViewCellBg];
                   [imgViewCellBg release];

         }
       else{
                   imgViewCellBg = (UIImageView *)[cell.contentView viewWithTag:10000];
            }

     //-------------------------------- For the image Downloding And Displaying ------
            __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:(MY Url)]];
            [request setCompletionBlock:^{
                // NSLog(@"Image downloaded.");
                NSData *data = [request responseData];
                UIImage *imageCountry = [[UIImage alloc] initWithData:data];

                [imgViewCellBg setImage:imageCountry];
                imageCountry = Nil;

            }];
            [request setFailedBlock:^{
                NSError *error = [request error];
                NSLog(@"Error downloading image: %@", error.localizedDescription);
            }];
            [request startAsynchronous];
            //-----------------------------------------------------------------

 return cell; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:32:40.383

这是一个例子，你可以从[AynchImageView](http://www.markj.net/iphone-asynchronous-table-image/)`AysncImageView`下载这个类和例子

您可以像下面的代码一样访问此类。

```
- (UITableViewCell *)tableView:(UITableView *)tableView

           cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"ImageCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {
            cell = [[[UITableViewCell alloc]
                  initWithFrame:CGRectZero reuseIdentifier:CellIdentifier]
                  autorelease];
        } else {
        AsyncImageView* oldImage = (AsyncImageView*)
                 [cell.contentView viewWithTag:999];
        [oldImage removeFromSuperview];
        }

        CGRect frame;
        frame.size.width=75; frame.size.height=75;
        frame.origin.x=0; frame.origin.y=0;
        AsyncImageView* asyncImage = [[[AsyncImageView alloc]
                   initWithFrame:frame] autorelease];
        asyncImage.tag = 999;
        NSURL* url = [imageDownload
                   thumbnailURLAtIndex:indexPath.row];
        [asyncImage loadImageFromURL:url];

        [cell.contentView addSubview:asyncImage];

        return cell;
    } 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:20:09.823

[只需从https://github.com/SIMHAM/AsyncImageView-1](https://github.com/SIMHAM/AsyncImageView-1)添加 AsyncImageView 文件

然后你可以在你的单元格中添加 imageView，如下所示：

```
AsyncImageView *asyncImageView=[[AsyncImageView alloc] initWithFrame:CGRectMake(15,20,80.0f,110.0f)];
[asyncImageView loadImageFromURL:[NSURL URLWithString:yourImageUrl]];
[cell.contentView addSubview:asyncImageView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T05:22:41.007

根据我的建议，我正在使用 SDWebImages [A Link of GitHubproject进行异步操作](https://github.com/rs/SDWebImage)

我按照以下步骤进行配置：-

*   您需要首先右键单击您的项目名称：-> 将文件添加到您的项目-> 选择 SDWebImageproject 并添加它们

注意：- 请不要检查复制选项

*   现在单击您的 xcode 中的项目名称，以构建阶段：-> 目标依赖项：-> 单击 + 按钮并添加 SDWebimage ARC

*   现在选择链接二进制库单击+按钮添加libSDWebimageARC.a并再次单击+并添加imageIO.framework并添加libxml2.dylib就是这样

    去构建设置：->其他链接标志：->添加-ObjC

    和标题搜索路径添加这三项

    1 /usr/include/libxml2

    2 "$(OBJROOT)/UninstalledProducts/include"

    3 "$(TARGET_BUILD_DIR)/usr/local/lib/include"

`now build and run its working like smoothly cheers.... :)`

加载图像及其存储捕获更简单且非常有用的任务，因此您可以更快地工作。

你可以只用两行代码来异步图像，比如

在`.m`：-

`#import <SDWebImage/UIImageView+WebCache.h>`

```
 NSString *strUrlSting =[d valueForKey:@"Current_RequestUser_Image"];
        strUrlSting =[strUrlSting stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
        NSURL* url = [NSURL URLWithString:strUrlSting];

        [imgView_user1 setImageWithURL:url
                      placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

# javascript - 使用位置固定的数据过滤器（不可滚动）

> ID：12947525
> 
> 赞同：2
> 
> 时间：2012-10-18T05:10:32.847
> 
> 标签：javascript, html, jquery-mobile

我正在为我的一个小项目使用 jQueryMobile。当显示一个列表视图及其包含 100 万个项目的搜索过滤器时，我意识到在滚动列表时保持搜索输入框固定会更好，就像标题一样。想象一下，我所拥有的是：

```
<section data-role="page" id="start-page">
  <header data-role="header" data-position="fixed">
    <h1>Start Page!</h1>
  </header>
  <div data-role="content">
    <ul data-role="listview" data-filter="true" id="start-page-listview" data-filter-placeholder="Search..." data-filter-theme="d" data-theme="d" data-divider-theme="d"></ul>
  </div>
</section> 
```

实现这一目标的最佳方法是什么？有没有办法不用自己接触 jQuery Mobile 文件（css 或 js）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:08:00.093

将搜索字段放在标题中并且数据位置是固定的

```
<section data-role="page" id="start-page">
 <header data-role="header" data-position="fixed">
   <h1>Start Page!</h1>
   <ul data-role="listview" data-filter="true" id="start-page-listview" data-filter-  placeholder="Search..." data-filter-theme="d" data-theme="d" data-divider-theme="d"></ul>
 </header>
 <div data-role="content">

</div> 
```

# arrays - 堆栈增长与否？

> ID：12947540
> 
> 赞同：0
> 
> 时间：2012-10-18T05:12:15.037
> 
> 标签：arrays, stack, mips, mips32

AC 函数 f1 有一个包含 100 个元素的局部整数数组，它调用另一个函数 f2。编译成 MIPS 后，下列说法正确的是？(a) 当这个函数被调用时，栈将增长 100 字节。(b) 调用此函数时，堆栈将增长正好 400 字节。 (c) 调用此函数时，堆栈将增长不少于 404 字节。(d) 以上都不是。

我的想法是答案是 D，因为函数 f1 有一个整数数组的 100 个元素，所以由于每个整数使用 4 个字节，所以需要 100 个字节。然而，我们缺少函数 f2 的信息，因为 f2 也可以有一个存储在堆栈上的整数数组。我们不知道函数 f2 是否有一个整数数组，即使有，我们也不知道该函数是否选择将数组存储在堆栈上，这让我假设 D 是正确答案。假设仅仅因为你有一个函数并不意味着你会在堆栈上为它可能包含的任何内容分配空间是正确的，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:59:05.260

在返回地址在寄存器中传递的架构中，'leaf' 函数可以简单地说`br [r15]`. 这反过来又假设调用叶函数 f2，f1 必须调用一些指令，这些指令首先将返回地址设置为 r15，然后调用 f2。但是r15之前的内容会怎样呢？f1回到哪里？

即使 MIPS 将使用基于堆栈的返回地址存储，同样的概念也适用。

# c++ - Reading input from a file

> ID：12947541
> 
> 赞同：1
> 
> 时间：2012-10-18T05:12:17.400
> 
> 标签：c++

list.txt

```
first 10
second third 20
fourth fifth 30
.
.
. 
```

What's the conventional way to read the first line separately from the others, such that I can use "first","second", ... and 10, 20, ... as their respective types elsewhere in the program?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:19:12.143

Is this what you're thinking of?

```
ifstream fin("list.txt");

string str1, str2;
int n;

fin >> str1 >> n; // first 10

// do something with "first" and 10

while(fin >> str1 >> str2 >> n)
{
  // do something with str1, str2 and n
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:21:42.140

```
struct header { 
    std::string name;
    int number;
};

std::istream &operator>>(std::istream &is, header &h) { 
    return is >> h.name >> h.number;
}

struct line { 
    std::string first;
    std::string second;
    int number;
};

std::istream &operator>>(std::istream &is, line &data) { 
    returns is >> data.first >> data.second >> data.number;
}

int main() { 
    header h;
    std::ifstream data("list.txt");

   // read first line:
   data >> h;
   // now h.name and h.number are the string and number from the first line

   // read the rest of the lines:
   std::vector<line> lines((std::istream_iterator<line>(data),
                            std::istream_iterator<line>());

   // now lines[i].first, lines[i].second and lines[i].number
   // are the first string, second string, and number
   // from the i-th line of three-field data from the file.

   return 0;
} 
```

# php - MySQL-Query with IN，这个结果可能吗？

> ID：12947548
> 
> 赞同：-1
> 
> 时间：2012-10-18T05:12:57.710
> 
> 标签：php, mysql, sql, join

```
SELECT      ntc.newsID, ntc.categoryID, category.title
FROM        news_to_category ntc
LEFT JOIN   news_category category
ON          ntc.categoryID = category.categoryID
WHERE       ntc.newsID IN (2,4) 
```

在这张桌子上

```
news_to_category
    categoryID newsID
    32         2
    33         2
    23         4

news_category
    categoryID title
    32         Important
    33         Cars
    23         Fishing 
```

结果应该是：

```
Array
(
    [2] => Array
        (
            [0] => Array
                (
                    [0] => 32
                    [1] => Important
                )
            [1] => Array
                (
                    [0] => 33
                    [1] => Cars
                )
        )
    [4] => Array
        (
            [0] => Array
                (
                    [0] => 23
                    [1] => Fishing
                )
        )
) 
```

第二个数组的键应该是 newsID。只需 1 个查询就可以得到这个结果吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:36:13.043

查询是正确的，但会返回一个一维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:40:41.310

像这样工作（表名略有不同）：

```
 SELECT     ctn.newsID, ctn.categoryID, cat.title
    FROM        wcf".WCF_N."_cnews_news_to_category ctn
    LEFT JOIN   wcf".WCF_N."_cnews_category cat
    ON          ctn.categoryID = cat.categoryID
    WHERE       newsID IN (".implode(',',$newsIDs).")

    $result = WCF::getDB()->sendQuery($sql);
    $news = array();        
    // save info
    while ($row = WCF::getDB()->fetchArray($result)) {
        $news[$row['newsID']][] = $row;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:06:30.167

尝试这个

```
$res = mysql_query("SELECT      ntc.newsID, ntc.categoryID, category.title
                    FROM        news_to_category ntc
                    LEFT JOIN   news_category category
                    ON          ntc.categoryID = category.categoryID
                    WHERE       ntc.newsID IN (2,4)");

$array = array();

while($row = mysql_fetch_array($res))
{
    if(!isset($array[$row["newsID"]]))
    $array[$row["newsID"]]=array();

    array_push($array[$row["newsID"]], array($row["categoryID"],$row["title"]));
}

echo "<pre>";
var_dump($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:44:15.430

如果您使用的是 php

```
<?php

while($res=mysql_fectch_assoc($resource))
{
$result[$res['newsID']][]=array($res['categoryID '],$res['title']);

}

?> 
```

# java - 为什么我的字符串数组有空值？（爪哇）

> ID：12947552
> 
> 赞同：0
> 
> 时间：2012-10-18T05:13:22.890
> 
> 标签：java, arrays, string, null, nullpointerexception

> **可能重复：**
> [如何在java中比较字符串数组中的元素？](https://stackoverflow.com/questions/12947254/how-to-compare-elements-in-a-string-array-in-java)

我正在尝试将数组中的单词设置为字符串，然后计算不包括重复项的单词数，但是当我尝试使用 if 语句检查重复项时，它会显示“NullPointerException”，这意味着在大批。为什么数组有空值？

这里是设置字符串数组的代码，输入是“DO UNTO OTHERS AS YOU WOW HAVE THE M DO UNTO YOU”：

```
 String[] stringArray = new String[wordCount];
   while (!line.equals("DONE"))
   {
       for ( int k = 0 ; k < wordCount ; k++)
       {
           //put tokens into string array
           StringTokenizer tokens = new StringTokenizer(line);
           stringArray[k] = tokens.nextToken();
       }
   } 
```

下面是比较代码和导致 NullPointerException 的 if 语句：

```
 for ( int j = 0 ; j < wordCount ; j++)
   {    
       for (int i = j+1 ; i < wordCount ; i++)
       {       
            if (stringArray[i] == null)
            {
                stringArray[i] = "null";
            } 
            else if (stringArray[i].compareTo(stringArray[j]) == 0 && i!=j) 
            {
                //duplicate
                System.out.print("\n" + stringArray[j]);
                duplicates++;
            }
       }
   }
   wordCount -= duplicates;
   System.out.print("\nNumber of words, not including duplicates: " + wordCount); 
```

我正在尝试进行空检查，但结果仍然很差，因为它增加了重复项，因为当我将 stringArray[i] 更改为“null”时，它也会更改 stringArray[j]

请帮忙！我一直在努力解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:21:29.267

您应该使用`equals()`而不是`compareTo()`. 如果传递 null，则`compareTo()`引发。`NullPointerException`

[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)的 Java 文档

> 请注意，null 不是任何类的实例，即使 e.equals(null) 返回 false，e.compareTo(null) 也应该抛出 NullPointerException。

```
 if (stringArray[i] == null) {
                continue;
            } else if (stringArray[i].equals(stringArray[j]) && i != j) {
                // duplicate
                duplicates++;
            } 
```

所以完整的源代码应该是这样的。`I have not changed any logic inside your for loop.`

```
 String line = "DO UNTO OTHERS AS YOU WOULD HAVE THEM DO UNTO YOU";
    String[] stringArray = line.split("\\s");//Use split StringTokenizer use is discouraged in new code
    int duplicates = 0;
    int wordCount = stringArray.length;
    for (int j = 0; j < stringArray.length; j++) {
        for (int i = j + 1; i < stringArray.length; i++) {
            if (stringArray[i] == null) {
                stringArray[i] = "null";
            } else if (stringArray[i].equals(stringArray[j]) && i != j) {
                // duplicate
                System.out.print("\n" + stringArray[j]);
                duplicates++;
            }
        }
    }
    wordCount -= duplicates;
    System.out.print("\nNumber of words, not including duplicates: "
            + wordCount); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:23:01.257

放弃你的`if (stringArray[i] == null)`空支票。这不是必需的。相反，尝试在初始化后立即打印出数组，看看是否`wordCount`可能太大，或者标记器没有破坏您认为应该的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:10:42.247

@AmitD 的代码看起来很棒！我猜你的代码唯一的问题是关于 **字数**..我认为你没有初始化可能给你异常的字符串数组，这就是我所理解的..只需用一些值启动字数..检查字数是否得到东西与否..可能会有所帮助......

# asp.net - 会话对象返回奇怪的结果

> ID：12947555
> 
> 赞同：2
> 
> 时间：2012-10-18T05:13:34.247
> 
> 标签：asp.net, c#-4.0, iis-7, session-variables

我想将用逗号（1,2,3,4 ...）分隔的数字序列输入存储到会话对象中

我的代码是：

```
string items = string.Empty;

protected void Button1_Click(object sender, EventArgs e)
    {
                    fillitem(TextBox1.Text);
                    showsession();
    }

      void fillitem(string par1)
        {
            if (Session["itemvar"] != null)
            {
                items = Session["itemvar"].ToString();
                Session["itemvar"] = null;
            }

            items += par1 + ",";
            Session["itemvar"] = items;
        }     

 void showsession()
    {
            string itempp = string.Empty;
            if (Session["itemvar"] != null)
            {
                itempp = Session["itemvar"].ToString();
                int indexOfkoma = itempp.LastIndexOf(",", StringComparison.OrdinalIgnoreCase);

                if (indexOfkoma != -1)
                {
                    itempp = itempp.Substring(0, indexOfkoma);

                }
            }
            Label1.Text = itempp;

    } 
```

该代码在我的本地运行良好。但是当我在服务器上发布时，会话对象返回奇怪的结果，如下所示：

Button1_Click 事件 1 结果：Session["itemvar"] 返回：1

Button1_Click 事件 2 结果：Session["itemvar"] 返回：2 ----> 正确的结果应该返回：1,2

Button1_Click 事件 3 结果：Session["itemvar"] 返回：1,3 ----> 正确的结果应该返回：1,2,3

Button1_Click 事件 4 结果：Session["itemvar"] 返回：2,4 ----> 正确的结果应该返回：1,2,3,4

任何想法，这些奇怪行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:45:55.130

您看到的行为可能是由于在 Web 场配置中使用进程内会话状态（IIS 上的默认值）引起的。

在这种情况下，您的请求实际上将由不同的应用程序服务器（每个都有自己的会话）提供服务。

[配置进程外会话状态](http://technet.microsoft.com/en-us/library/cc754032%28v=ws.10%29.aspx)以解决 Web 场方案中的此问题。

# ios - UIScrollView/UITableView 分层效果类似 Path

> ID：12947557
> 
> 赞同：0
> 
> 时间：2012-10-18T05:13:35.833
> 
> 标签：ios, uitableview, uiscrollview

iOS 应用程序 Path 有这个非常酷的分层 scrollView/tableView 组合，我正试图弄清楚它是如何工作的。. .

如果您还没有看到它，那么在 UITableView 后面有一个图像，这样当您滚动 tableview 时，背景图像也会滚动，但速度不同。

不知道他们是如何实现这种效果的，但我认为这可能是通过将两个 UIScrollView 层叠在另一个之上并弄乱偏移量/标题。

有没有人遇到过这种效果，如果有的话，是否有人对如何实现它有任何想法？我目前在允许触摸同时滚动两个滚动视图时遇到问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:29:37.280

听起来像是一种简单的视差效果。你是正确的轨道（或正确的轨道，有多种方法可以做到这一点）。

实现我认为您所要求的最简单的方法是在表格视图后面的滚动视图，其内容大小与图像背景的高度相同。将您的图像放在此滚动视图中。

然后，实现 scrollviewdidscroll 方法并检测表格视图何时滚动。使用该信息设置背景图像滚动视图的滚动偏移量。例如，无论您的表格视图滚动的偏移百分比是多少，都将背景滚动设置为相同的百分比。

或者，如果您不想使用第二个滚动视图，则可以使用百分比偏移量在背景中向上或向下移动 uiimageview。

再一次，有很多方法可以实现背景移动，我列出了两种简单的方法，但请记住，如果你的图像很大，你需要将它分成一些更小的部分，或者使用 uiscrollview 方法和加载瓷砖。

/大脑转储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T12:06:55.083

我已经使用表格视图实现了滚动效果，该表格视图的标题 a`UIView`为 100 px 高度，背景颜色清晰。在`viewDidLoad`我创建一个`UIImageView`与表格视图的标题视图（100 px）高度相同的情况下，然后创建一个 UIView，我们将用作表格视图的 backgroundView 并在其顶部添加 UIImageView。在委托方法中，根据滚动视图值`scrollViewDidScroll`缩放框架。`UIImageView``contentOffset.y`

```
static CGRect headerImgFrame = {{.0, .0}, {320.0, 100.0}};

...

- (void)viewDidLoad {
    [super viewDidLoad];

    // Do any additional setup after loading the view from its nib.
    _headerImgView = [[UIImageView alloc] initWithFrame: headerImgFrame];
    _headerImgView.image = [UIImage imageNamed: @"test.png"];
    _headerImgView.contentMode = UIViewContentModeCenter;
    _headerImgView.autoresizingMask = UIViewAutoresizingNone;
    _headerImgView.layer.masksToBounds = YES;

    UIView *bgView = [[UIView alloc] init];
    bgView.backgroundColor = [UIColor whiteColor];

    tableView.backgroundView = bgView;
    [bgView release];

    [tableView.backgroundView addSubview: _headerImgView];
    [_headerImgView release];
}

- (void)scrollViewDidScroll: (UIScrollView *)scrollView {
    CGRect newFrame = CGRectMake(headerImgFrame.origin.x, headerImgFrame.origin.y,
                                 headerImgFrame.size.width, headerImgFrame.size.height - scrollView.contentOffset.y);

    _headerImgView.frame = newFrame;    
} 
```

# lame - 在 WAMP 上工作时，Lame 没有在 LAMP 服务器上生成 wav 文件

> ID：12947558
> 
> 赞同：2
> 
> 时间：2012-10-18T05:13:38.570
> 
> 标签：lame

我已经在我的项目的根文件夹中上传了 lame.exe 和 lame_enc.dll。例如 ：`C:\wamp\www\lame\lame.exe & C:\wamp\www\lame\lame_enc.dll`

我使用以下 php 代码生成 wav 文件：

```
$tmpname = substr(md5(time()), 0, 10);

copy($_FILES["mp3"]["tmp_name"], "{$tmpname}_o.mp3");

exec("lame {$tmpname}_o.mp3 -m m -S -f -b 16 --resample 8 {$tmpname}.mp3 && lame -S --decode {$tmpname}.mp3 {$tmpname}.wav"); 
```

这段代码在我的`localhost/lame/`

但没有工作`http://demo.phxsolution.com/mp3wave/`

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:26:15.923

您已经在项目中包含了 Windows 版本的 LAME，但您正试图在 Linux 服务器上运行它。您将需要在 Linux 服务器本身上配置 LAME，或者通过以某种方式将其包含在您的项目中，或者（更推荐）将其单独安装在 Linux 服务器上并从您的 PHP 脚本中调用它（作为外部应用程序）。

# angularjs - 使用 angularjs 使用来自 websocket 的数据实时更新表

> ID：12947560
> 
> 赞同：6
> 
> 时间：2012-10-18T05:13:47.897
> 
> 标签：angularjs, real-time

我需要使用来自网络套接字的数据实时更新表格。

我现在所做的是每次在套接字上获取数据时，我将其附加到一个字符串并创建一个二维数组，该数组用于使用 ng-repeat 显示表格。

使用这种方法的性能很慢。此外，这种方法假设我按顺序获取消息，但是我没有按正确的顺序获取数据。

将数据格式化为 html 或 json 并通过 Web 套接字发送或发送原始数据会更好吗？

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:20:52.610

如果您每次都从此字符串重新创建二维数组，则更快的方法是将新数据推送到数组中。

以 HTML 格式发送数据不是可行的方法，但在服务器上将数据格式化为 JSON 几乎肯定有助于加快客户端的处理速度。发送小块数据，然后将它们增量附加到客户端上的数组，然后重新排序数据（如果需要）可能会更快。

另一种选择是使用类似[Underscore.js 的节流函数](http://underscorejs.org/#throttle)来限制在 AngularJS 中导致摘要循环的次数。如果您不想在项目中包含所有下划线，您也可以[只使用油门。](https://github.com/documentcloud/underscore/blob/master/underscore.js#L621)

# scripting - 使用 Grep -v 遇到问题

> ID：12947567
> 
> 赞同：0
> 
> 时间：2012-10-18T05:15:19.070
> 
> 标签：scripting, grep

我目前正在尝试删除包含该行的文本文件中的每一行

“事件/D:x:y:z:pmts1[122]:pmts2[122]:drift:Tot/D:S1:S2:S1Top:S1Bot:S2Top:S2Bot:logS2S1:pseudo_z:pseudo_z_s2”。

我想我可以很容易地通过以下方式使用 grep -v ：

```
grep -v  "event/D:x:y:z:pmts1[122]:pmts2[122]:drift:Tot/D:S1:S2:S1Top:S1Bot:S2Top:S2Bot:logS2S1:pseudo_z:pseudo_z_s2" data.txt >> NewData.txt 
```

但是，该命令似乎只是陷入了无限循环之类的问题，并且 data.txt 中的任何行都没有添加到 NewData.txt 中。

有人可以告诉我我做错了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:45:09.003

您需要使用`\`. 尝试：

```
grep -v "event\/D:x:y:z:pmts1\[122\]:pmts2\[122\]:drift:Tot\/D:S1:S2:S1Top:S1Bot:S2Top:S2Bot:logS2S1:pseudo_z:pseudo_z_s2" file.txt > newfile.txt 
```

如果您有，您可以使用以下标志`GNU sed`将更改直接写入您的文件：`-i`

```
sed -i '/event\/D:x:y:z:pmts1\[122\]:pmts2\[122\]:drift:Tot\/D:S1:S2:S1Top:S1Bot:S2Top:S2Bot:logS2S1:pseudo_z:pseudo_z_s2/d' file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:18:15.023

如果第一个字符是双引号 '"'，您可以将模式放在单引号中。

# css - 如何让 CSS 伪元素看起来与跨浏览器相同？

> ID：12947571
> 
> 赞同：0
> 
> 时间：2012-10-18T05:15:50.153
> 
> 标签：css, css-selectors, attr, pseudo-element, pseudo-class

这是我想要完成的一个非常基本的演示。

**在谷歌浏览器**中打开：http : [//jsfiddle.net/8EbxG/4/](http://jsfiddle.net/8EbxG/4/)

它应该看起来**除了一个灰色的矩形之外什么都没有**。

现在，在 IE9 或 Firefox 中打开。

您将看到一个空的白色矩形包含在较大的灰色矩形中。

我需要做些什么才能让它看起来像在 chrome **Chrome**跨浏览器中一样（我什至没有测试过旧的 IE、Opera 或 Safari）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:27:54.880

添加这个CSS：

```
#sb-caption:empty {display:none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:26:15.510

删除内容：""; 它适用于所有浏览器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:35:56.470

使用十六进制颜色代码而不是 rgba 代码

```
 #sb-caption{height:auto; font:12px/36px Arial, Helvetica, sans-serif; position:absolute; right:10px; bottom:10px; background:#ccc} 
```

并使用空格“”或html中的一些文本

```
<div id="sb-wrapper">
  <div id="sb-caption">&nbsp;</div>
</div>​ 
```

:D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T18:28:06.330

我最近记得 IE 需要为伪元素指定一个 DOCTYPE 才能工作。

> 因此，当输入 DOCTYPE 时，该框会消失（至少在**IE9中）。**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

并且，感谢**manishie**建议使用：

> #sb-caption:empty {display:none;}

我很确定，这是**Firefox**工作所需要的。

> *注意：*我使用此方法`<div>`在**shadowbox.js**中创建标题。
> 文本`<div id="#sb-caption"></div>`通过 JavaScript 输入，使用`<a rev=""></a>`
> 
> **例子：** `<a href="LINK" rev="YOUR CAPTION">`
> 
> `rev=""`是您的字幕文本所在的位置。然后将进入`<div>`
> 
> 这是 shadowbox 复杂的解决方法/hack 的一小部分。

**这是最终版本：**

对于**Chrome**和**Firefox** ，请在此处查看：http: [//jsfiddle.net/FBwQd/](http://jsfiddle.net/FBwQd/)
（它在 IE 中不起作用，因为 JS-fiddle 无法识别 DOCTYPE）

对于**IE**（和/或**Chrome**），您可以在此处查看：[http ://cssdesk.com/Mrwh8](http://cssdesk.com/Mrwh8)

您可以**删除****“TEST”**字样，让盒子完全消失！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T18:40:48.373

# sql-server - 选择新数据库 SQL Server、mongodb、ravendb +++

> ID：12947574
> 
> 赞同：0
> 
> 时间：2012-10-18T05:16:14.010
> 
> 标签：sql-server, mongodb, couchdb, ravendb, database

目前我正在开始一个新项目并考虑我想使用哪种数据库技术。我们对 SQL Server 有很好的了解，但也于 2012 年在 RavenDB 上启动了几个项目。

有没有人可以帮助我就 raven、mongo、couch 等技术与 SQL Server 的优缺点进行一些争论。

恐怕这些新技术只是一种炒作，或者已经消亡，至少对于 Couchdb 来说似乎是这样。这些应该只用作玩新技术和概念的沙盒，还是适合未来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:20:13.863

那么，你有什么**样**的数据？

如果它相当清晰和**高度结构化**（如簿记/分类帐或订单输入）-> 那么具有模式和事务等的“传统”SQL 数据库肯定具有明显的优势。

或者它是否更加**非结构化**并且可以呈现各种形状 -> 那么像 RavenDB 这样的基于 NoSQL 文档的解决方案可能值得一试。

# android - Youtube 在 WebView 中只播放一次

> ID：12947576
> 
> 赞同：1
> 
> 时间：2012-10-18T05:16:27.910
> 
> 标签：android, flash, webview, youtube

我有以下代码。它成功地从 YouTube 流式传输视频。但是当视频结束时。它无法再次播放，即使我退出并重新进入应用程序也是如此。它总是显示加载页面，然后立即跳转到建议的视频。

```
public class HdPlayer extends CustomView {
Button share_btn;
DisplaySize mDisplaySize;
String youtubeLink = null;
String thumbnailLink, description, VideoId, viewCount, date = null;
String title = null;
WebView webview;
String duration = null;

DbAdapter db;

/** Called when the activity is first created. */
@SuppressLint("SetJavaScriptEnabled")
@Override
public void onCreate(Bundle savedInstanceState) {
    // Remove notification bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hd_player);
    db = new DbAdapter(this);

    titlebar_title.setText("Playing");
    titlebar_icon.setImageResource(R.drawable.titlebar_play);
    Bundle bundle = this.getIntent().getExtras();
    youtubeLink = bundle.getString("youtubeLink");

    webview = (WebView) findViewById(R.id.web_view_player);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setPluginState(PluginState.ON);
    webview.getSettings().setPluginsEnabled(true);
    // webview.getSettings().setLoadWithOverviewMode(true);// completely zoomed out
    // webview.getSettings().setUseWideViewPort(true);
    webview.getTouchables();

    webview.setBackgroundColor(Color.parseColor("#00000000"));
    mDisplaySize = new DisplaySize(this);

    Display display = getWindowManager().getDefaultDisplay();
    int[] widthHeight = new int[2];
    widthHeight = mDisplaySize.getDisplaySize(display);
    int width = widthHeight[0];
    int height = widthHeight[1];
    Log.i("iframe", " before iframe");
    String emdLink = "http://www.youtube.com/embed/" + VideoId;
    Log.i("iframe", " before loadData, youtubeLink: " + emdLink);

    LayoutParams lp = new RelativeLayout.LayoutParams(width,
            (width / 4) * 3);
    lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    webview.setLayoutParams(lp);
    webview.setWebChromeClient(new WebChromeClient());
    webview.loadUrl(emdLink);

}

@Override
public void onPause() {
    super.onPause();

    try {
        Log.i("in onpause", "onpause try" );
        Class.forName("android.webkit.WebView")
                .getMethod("onPause", (Class[]) null)
                .invoke(webview, (Object[]) null);

    } catch (ClassNotFoundException cnfe) {
    } catch (NoSuchMethodException nsme) {
    } catch (InvocationTargetException ite) {
    } catch (IllegalAccessException iae) {
    }
    webview.clearCache(true);
    webview.clearHistory();
    webview.destroy();
}

} 
```

它报告错误： dequeueBuffer: SurfaceComposer::createGraphicBuffer failed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:47:31.173

以下代码对我来说很好。尝试添加这个
**webView.setWebViewClient(new WebViewClient());**

```
webView.setWebChromeClient(new WebChromeClient(){

});
webView.setWebViewClient(new WebViewClient());
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setPluginsEnabled(true);
webView.getTouchables();
webView.setBackgroundColor(Color.parseColor("#00000000"));
String emdLink = "http://www.youtube.com/embed/" + "hPUGNCIozp0";
webView.loadUrl(emdLink); 
```

# java - 通过过滤器以使用 JAVA 中的 ksoap 库从 magento 检索特定的客户列表集

> ID：12947589
> 
> 赞同：4
> 
> 时间：2012-10-18T05:17:34.790
> 
> 标签：java, magento, ksoap

我正在使用 SOAP API 从 magento 服务器获取数据。
我想获取客户列表，并且我想通过过滤器来检索特定的客户列表。我正在使用 hashMap 但它引发了序列化异常。

我的代码就像

```
{request = new SoapObject(NAMESPACE, "customerCustomerInfo");
            request.addProperty("sessionId", sessionId);
            HashMap<String, Object> filter=new HashMap<String, Object>();
            filter.put("customer_id", condition);
            request.addProperty("filters", filter);} 
```

我也使用过 jsonobject ，简单的 Arraylist ，但它引发了同样的异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T17:51:55.193

您可以尝试将“HashMap”更改为“HashTable”，并将“MarshalHashtable”注册到您的信封中。

像：

```
SoapSerializationEnvelope env = new SoapSerializationEnvelope(SoapEnvelope.VER11);
androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.debug=true;
(new MarshalHashtable()).register(env);
// filter
Hashtable <String, String> filter=new Hashtable<String, String>();
filter.put("customer_id", "1");
request.addProperty("filter", filter); 
```

得到了这个建议

“使用参数数组创建请求”在

[https://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks](https://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T05:35:18.903

@Ricardo 的回答是正确的，它帮助了我，但我为那些仍然感到困惑的人发布了这个完整的代码。下面的代码将为我获取特定客户的订单。

```
SoapSerializationEnvelope env = new SoapSerializationEnvelope(SoapEnvelope.VER11);   
env.dotNet = false;                                                                  
env.xsd = SoapSerializationEnvelope.XSD;                                             
env.enc = SoapSerializationEnvelope.ENC;                                             
Hashtable hashtable = new Hashtable();                                               
hashtable.put("customer_id", 17);                                                    

SoapObject request = new SoapObject(NAMESPACE, "salesOrderList");                               
request.addProperty("filters", hashtable);                                           
request.addProperty("sessionId", sessionId);                 

env.setOutputSoapObject(request);                                                    

HTttpTransportSE transportSE = new HttpTransportSE(URL);                                              
transportSE.debug=true;                                                              
(new MarshalHashtable()).register(env); 
```

# r - 列表数据框类上匹配日期的百分比计算

> ID：12947592
> 
> 赞同：2
> 
> 时间：2012-10-18T05:17:43.487
> 
> 标签：r, list, date, dataframe, match

我有我的列表，`MF`其中包含`105`列表。每个列表，`MF[[1]] MF[[2]]`...`MF[[105]]`包含不同数量的数据帧。因此，`MF[[1]][[1]]`存在，但`MF[[1]][[2]]`因为`NULL`只有一个数据框`MF[[1]]`。另一方面`MF[[2]]`包含15个不同的数据帧，所以`MF[[2]][[1]]`存在`MF[[2]][[15]]`。

`colnames`每 105 个列表中的所有数据帧为：

```
[1] "Run"             "Fecha"           "Serie"           "Patrimonio"      "Ret Log Pat"     "Percentil 5%"    "Percentil Monto" 
```

我会用一个具体的例子来问我的问题。让我们使用包含 15 个不同数据帧的 MF[[2]]。以下是这些数据帧的一些标头：

```
head(MF[[2]][[1]]):
 Run      Fecha Serie Patrimonio  Ret Log Pat Percentil 5% Percentil Monto
31 8011 2002-08-18     1 4191689227 -0.456258862   -0.1973659      1305605031
32 8011 2002-08-19     1 4749171865  0.124866449   -0.2179453       913558775
33 8011 2002-08-20     1 5132656241  0.077653052   -0.2179453      1035059470
34 8011 2002-08-21     1 5088469783 -0.008646158   -0.2179453      1118638070
35 8011 2002-08-22     1 4998945148 -0.017750234   -0.2179453      1109007841
36 8011 2002-08-23     1 5449454077  0.086288515   -0.2179453      1089496372

head(MF[[2]][[2]])
    Run      Fecha Serie Patrimonio   Ret Log Pat Percentil 5% Percentil Monto
31 8011 2006-05-09   100 6413583009 -0.0076314490  -0.07046562       455399234
32 8011 2006-05-10   100 6412446421 -0.0001772315  -0.07046562       451937105
33 8011 2006-05-11   100 6380254435 -0.0050328784  -0.07046562       451857014
34 8011 2006-05-12   100 6381112038  0.0001344061  -0.07046562       449588586
35 8011 2006-05-13   100 6381970402  0.0001345073  -0.07046562       449649018
36 8011 2006-05-14   100 6315827940 -0.0104180360  -0.07046562       449709503

head(MF[[2]][[3]])
    Run      Fecha Serie Patrimonio   Ret Log Pat Percentil 5% Percentil Monto
31 8011 2002-08-18     2 3147993667 -0.0395416467  -0.03216529       105340167
32 8011 2002-08-19     2 3065335420 -0.0266083198  -0.03778848       118957901
33 8011 2002-08-20     2 3044946268 -0.0066737439  -0.03778848       115834372
34 8011 2002-08-21     2 3089802537  0.0146239300  -0.03778848       115063897
35 8011 2002-08-22     2 3090714960  0.0002952578  -0.03778848       116758947
36 8011 2002-08-23     2 3230667973  0.0442864759  -0.03778848       116793426 
```

我想要的是与列匹配的迭代或其他任何内容`"Fecha"`（`"Date"` 顺便说一句），如果日期匹配，则计算代表列中每一行的百分比与日期匹配的总和的`"Patrimonio"`百分比`"Patrimonio"`。

给出的例子：

在这种情况下，我们得到：

```
head(MF[[2]][[1]]):
     Run      Fecha Serie Patrimonio  Ret Log Pat Percentil 5% Percentil Monto
    31 8011 2002-08-18     1 4191689227 -0.456258862   -0.1973659      1305605031

 head(MF[[2]][[3]])
        Run      Fecha Serie Patrimonio   Ret Log Pat Percentil 5% Percentil Monto
    31 8011 2002-08-18     2 3147993667 -0.0395416467  -0.03216529       105340167 
```

所以，`MF[[2]][[1]][1,2]==MF[[2]][[3]][1,2]`（日期匹配），然后我想在每个数据帧上都有一个新列，如下所示：

```
 New column for MF[[2]][[1]] = MF[[2]][[1]][1,4]/(MF[[2]][[1]][1,4]+MF[[2]][[3]][1,4]) =  4191689227/( 4191689227+ 3147993667) ( Percent Calculation over "Patrimonio" column )

 New column for MF[[2]][[3]] = MF[[2]][[3]][1,4]/(MF[[2]][[1]][1,4]+MF[[2]][[3]][1,4]) =  3147993667/( 4191689227+ 3147993667) ( Percent Calculation over "Patrimonio" column ) 
```

问题是我必须匹配所有 15 个数据框来计算所有 105 个列表`"Patrimonio"`的变量百分比`"Fecha"`等等。希望我的疑问足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:39:52.540

由于标题中的“5%”，我无法轻松使用您的数据。`apply`但是，第一步需要使用族。

```
lapply(MF, yourfunction) 
```

将适用`yourfunction`于 的每个元素`ML`。由于 的每个元素`ML`也是一个列表，因此您可以再次 lapply（在`yourfunction`或`lapply(MF, lapply, yourfunction)`.

`yourfunction`将可以在单个`data.frame`. 我发现从这些嵌套结构中提取一个并编写一个适用于它的函数是最容易的。然后担心将其应用于嵌套列表的所有成员。

听起来您想比较 data.frames 之间的日期。如果是这种情况，最好的办法是将它们组合成一个框架，而不是嵌套在一个列表中。

你可以通过几种方式做到这一点，但我喜欢`plyr`.

```
library(plyr)
ldply(unlist(MF, recursive=FALSE), as.data.frame) 
```

那么比较就更直接了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:51:34.537

我喜欢 plyr 解决这样的问题，但我不确定我是否理解你想要的。你能用你的数据试试这个吗？我相信 tmp5，是你想要达到的目标。

```
dat <- ldply(lapply(MF,ldply)) # Flatten
tmp4 <- ddply(dat,.(.id,Fecha),summarize,Percent=Patrimonio) # Pull-out
tmp5 <- na.omit(ddply(tmp4,.(.id,Fecha),summarize,New=Patrimonio[1]/(Patrimonio[1] + Patrimonio[2]))) # Calculate, when you do this do you get what you expect?

# Dummy data
 MF <- list() 
    tmp <- data.frame(Fecha=letters[1:10],Patrimonio=rnorm(10))
    tmp2 <- data.frame(Fecha=letters[1:10],Patrimonio=rnorm(10))
    MF$a <- list(tmp,tmp2)
    MF$b <- list(tmp,tmp2) 
```

# python - TypeError: __init__() 需要至少 2 个参数（1 个给定）错误

> ID：12947599
> 
> 赞同：7
> 
> 时间：2012-10-18T05:18:37.230
> 
> 标签：python, python-3.x

我正在使用 Python3 开发一个简单的基于文本的地下城游戏。首先提示用户从 screen.py 文件中选择英雄。

```
from game import *

class GameScreen:
    '''Display the current state of a game in a text-based format.
    This class is fully implemented and needs no
    additional work from students.'''

    def initialize_game(self):
        '''(GameScreen) -> NoneType
        Initialize new game with new user-selected hero class
        and starting room files.'''

        hero = None
        while hero is None:
            c = input("Select hero type:\n(R)ogue (M)age (B)arbarian\n")
            c = c.lower()
            if c == 'r':
                hero = Rogue()
            elif c == 'm':
                hero = Mage()
            elif c == 'b':
                hero = Barbarian()

        self.game = Game("rooms/startroom", hero)

    def play(self):
        '''(Game) -> NoneType
        The main game loop.'''

        exit = False
        while not exit:
            print(self)
            if self.game.game_over():
                break
            c = input("Next: ")
            if c in ['q', 'x']:
                print("Thanks for playing!")
                exit = True
            elif c == 'w':  # UP
                self.game.move_hero(-1, 0)
            elif c == 's':  # DOWN
                self.game.move_hero(1, 0)
            elif c == 'a':  # LEFT
                self.game.move_hero(0, -1)
            elif c == 'd':  # RIGHT
                self.game.move_hero(0, 1)
            elif c == 'r':
                ## RESTART GAME
                self.initialize_game()
            else:
                pass

    def __str__(self):
        '''(GameScreen) -> NoneType
        Return a string representing the current room.
        Include the game's Hero string represetation and a
        status message from the last action taken.'''

        room = self.game.current_room
        s = ""

        if self.game.game_over():
            #render a GAME OVER screen with text mostly centered
            #in the space of the room in which the character died.

            #top row
            s += "X" * (2 + room.cols) + "\n"
            #empty rows above GAME OVER
            for i in list(range(floor((room.rows - 2) / 2))):
                s += "X" + " " * room.cols + "X\n"
            # GAME OVER rows
            s += ("X" + " " * floor((room.cols - 4) / 2) +
                "GAME" + " " * ceil((room.cols - 4) / 2) + "X\n")
            s += ("X" + " " * floor((room.cols - 4) / 2) +
                "OVER" + " " * ceil((room.cols - 4) / 2) + "X\n")
            #empty rows below GAME OVER
            for i in list(range(ceil((room.rows - 2) / 2))):
                s += "X" + " " * room.cols + "X\n"
            #bottom row
            s += "X" * (2 + room.cols) + "\n"
        else:
            for i in range(room.rows):
                for j in room.grid[i]:
                    if j is not None:
                        if j.visible:
                            s += j.symbol()
                        else:
                            #This is the symbol for 'not yet explored' : ?
                            s += "?"
                s += "\n"
        #hero representation
        s += str(self.game.hero)
        #last status message
        s += room.status
        return s

if __name__ == '__main__':
    gs = GameScreen()
    gs.initialize_game()
    gs.play() 
```

每当我运行此代码时，我都会收到此错误： TypeError: **init** () 需要至少 2 个参数（给定 1 个），这与 Rogue() 或其他英雄类有关。这是 hero.py。

```
class Rogue(Tile):
    '''A class representing the hero venturing into the dungeon.
    Heroes have the following attributes: a name, a list of items,
    hit points, strength, gold, and a viewing radius. Heroes
    inherit the visible boolean from Tile.'''

    def __init__(self, rogue, bonuses=(0, 0, 0)):
        '''(Rogue, str, list) -> NoneType
        Create a new hero with name Rogue,
        an empty list of items and bonuses to
        hp, strength, gold and radius as specified
        in bonuses'''

        self.rogue = rogue
        self.items = []
        self.hp = 10 + bonuses[0]
        self.strength = 2 + bonuses[1]
        self.radius = 2 + bonuses[2]
        Tile.__init__(self, True)

    def symbol(self):
        '''(Rogue) -> str
        Return the map representation symbol of Hero: O.'''

        #return "\u263b"
        return "O"

    def __str__(self):
        '''(Item) -> str
        Return the Hero's name.'''

        return "{}\nHP:{:2d} STR:{:2d} RAD:{:2d}\n".format(
                    self.rogue, self.hp, self.strength, self.radius)

    def take(self, item):
        '''ADD SIGNATURE HERE
        Add item to hero's items
        and update their stats as a result.'''

        # IMPLEMENT TAKE METHOD HERE
        pass

    def fight(self, baddie):
        '''ADD SIGNATURE HERE -> str
        Fight baddie and return the outcome of the
        battle in string format.'''

        # Baddie strikes first
        # Until one opponent is dead
            # attacker deals damage equal to their strength
            # attacker and defender alternate
        if self.hp < 0:
            return "Killed by"
        return "Defeated" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T05:23:10.703

**问题**

在`GameScreen.initialize_game()`中，您设置`hero=Rogue()`了 ，但`Rogue`构造函数将`rogue`其作为参数。（换句话说，`__init__`of`Rogue`要求传入。）当您设置and`rogue`时，您可能会遇到同样的问题。`hero=Mage``hero=Barbarian`

**解决方案**

幸运的是，修复很简单。您可以更改`hero=Rogue()`为`hero=Rogue("MyRogueName")`. 也许您可以提示用户输入名称`initialize_game`，然后使用该名称。

**关于“至少 2 个参数（给定 1 个）”的注释**

当你看到这样的错误时，这意味着你调用了一个函数或一个方法而没有传递足够的参数给它。（`__init__`只是在初始化对象时调用的特殊方法。）因此，将来在调试此类内容时，请查看调用函数/方法的位置以及定义它的位置，并确保两者具有相同数量的参数。

关于这些类型的错误有点棘手的一件事是，`self`它会被传递。

```
>>> class MyClass:
...     def __init__(self):
...             self.foo = 'foo'
... 
>>> myObj = MyClass() 
```

在那个例子中，人们可能会想，“奇怪，我初始化了`myObj`，所以`MyClass.__init__`被调用了；为什么我不必为 传递一些东西`self`？” 答案是，`self`只要使用“object.method()”表示法，就会有效地传入。希望这有助于清除错误并解释将来如何调试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:24:36.720

```
Class Rogue:
    ...
    def __init__(self, rogue, bonuses=(0, 0, 0)):
       ... 
```

`__init__`您的`Rogue`类需要参数，`rogue`但您正在将其实例化为`hero = Rogue()`.`initialize_game`

您需要将一些适当的参数传递给它，例如`hero = Rogue('somename')`

# ios - 在 PHP 中使用 gzcompress；需要能够在 iPhone iOS5.0 上解压

> ID：12947602
> 
> 赞同：1
> 
> 时间：2012-10-18T05:18:39.993
> 
> 标签：ios, gzip

我`gzcompress()`用来在 PHP 中压缩 JSON 数据，然后对其进行 base64 编码，以通过 Amazon SQS 队列将其发送到 iPhone 应用程序在弄清楚如何在 iPhone (iOS) 上解压缩这些数据时遇到了一些麻烦。

当我在 iPhone 上收到它时，我使用 NSData+Base64 类别对其进行 base64 解码，然后尝试使用 godzippa 对其进行解压缩。但是这不起作用。是否有另一个我应该使用的库或另一种方法。

我在论坛上搜索过，只找到一篇关于类似问题的帖子，但没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:40:58.697

非常感谢你。我终于能够使用[https://github.com/schacon/igithub/blob/master/CocoaGit/Util/NSData+Compression.h](https://github.com/schacon/igithub/blob/master/CocoaGit/Util/NSData+Compression.h)上的 NSData+Compression 类别进行 gzip 解压缩。 . 也会让你得心应手。再次感谢你！

# c++ - 使用 stringstream 浮动的字符串

> ID：12947607
> 
> 赞同：7
> 
> 时间：2012-10-18T05:19:26.893
> 
> 标签：c++, stringstream

我在网上找到了这段代码作为对字符串进行浮点/整数/双精度转换的模板。它只是在这里，所以我有一些东西可以参考这个问题......

我想让用户输入一个数字作为字符串，将其转换为浮点数，测试它是否成功，如果输入为“Q”则退出，如果不是“Q”字符则打印“无效输入”和返回以获得更多输入。

转换失败测试的语法是什么？会是 ss.fail() 吗？

```
// using stringstream constructors.
#include <iostream>
#include <sstream>
using namespace std;

int main () {

  int val;
  stringstream ss (stringstream::in | stringstream::out);

  ss << "120 42 377 6 5 2000";

  /* Would I insert an 

     if(ss.fail())
       { 
        // Deal with conversion error }
       }

    in here?! */

  for (int n=0; n<6; n++)
  {
    ss >> val;
    cout << val*2 << endl;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T06:46:45.643

您的代码不是很有帮助。但如果我理解你的话，就这样做

```
string str;
if (!getline(cin, str))
{
  // error: didn't get any input
}
istringstream ss(str);
float f;
if (!(ss >> f))
{
  // error: didn't convert to a float
} 
```

没有必要使用失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:26:45.880

实际上，进行字符串到浮点转换的最简单方法可能是`boost::lexical_cast`

```
#include <string>
#include <boost/lexical_cast.hpp>

int main() {
    std::string const s = "120.34";

    try {
        float f = boost::lexical_cast<float>(s);
    } catch(boost::bad_lexical_cast const&) {
        // deal with error
    }
} 
```

显然，在大多数情况下，您只是不立即捕获异常并让它在调用链中冒泡，因此成本大大降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:24:13.640

原始问题要求的一些功能是：

1.  输出两倍于输入浮点数的值
2.  报告无效输入
3.  即使在遇到无效输入后也继续寻找浮点数
4.  看到“Q”字符后停止

我认为以下代码符合上述要求：

```
// g++ -Wall -Wextra -Werror -static -std=c++11 -o foo foo.cc

#include <iostream>
#include <sstream>

void run_some_input( void )
{
    std::string        tmp_s;

    int  not_done  =  1;

    while( not_done  &&  getline( std::cin,  tmp_s ) )
    {
        std::stringstream  ss;

        ss  << tmp_s;

        while( ! ss.eof() )
        {
            float  tmp_f;
            if ( ss >> tmp_f )
            {
                std::cout  << "Twice the number you entered:  " 
                           << 2.0f * tmp_f << "\n";
            }
            else 
            {
                ss.clear();
                std::string  tmp_s;
                if( ss >> tmp_s )
                {
                    if( ! tmp_s.compare( "Q" ) )
                    {
                        not_done  =  0;
                        break;
                    }
                    std::cout << "Invalid input (" << tmp_s << ")\n";
                }
            }
        }
    }
}

int main( int argc __attribute__ ((__unused__)),  char **argv __attribute__ ((__unused__)) )
{
    run_some_input();
} 
```

这是一个示例会话：

```
$ ./foo
1
Twice the number you entered:  2
3 4
Twice the number you entered:  6
Twice the number you entered:  8
5 bad dog Quit 6 8 Q mad dog
Twice the number you entered:  10
Invalid input (bad)
Invalid input (dog)
Invalid input (Quit)
Twice the number you entered:  12
Twice the number you entered:  16 
```

# delphi - Windows Explorer 类似于 Delphi 中的控件

> ID：12947618
> 
> 赞同：1
> 
> 时间：2012-10-18T05:20:18.940
> 
> 标签：delphi

有谁知道是否有任何内置或第 3 方控件提供类似 Windows 资源管理器的行为？比如Tile布局、Details布局、List布局等等？

![在此处输入图像描述](../Images/b353712b9674142a4e2244af17a3bc22.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T05:45:01.800

您询问的视图类型在标准 TListView 中可用。将 style 属性设置为 vsReport、vsList、vsIcon 或 vsSmallIcon 以获得所需的效果。ListView 还通过 Column 属性添加命名列来支持 vsReport 中的标题行。

Windows 资源管理器通过其菜单、地址和搜索栏以及左窗格提供的功能是您必须自己添加的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T07:32:40.737

Jam Software 的 ShellBrowser Delphi 组件以最少的编程提供了这一点： [JamShellBrowser](http://www.jam-software.com/shellbrowser_delphi/samples.shtml)。成本，但我经历了极好的支持。支持 Delphi 7 的 IDE（XE2 中为 +64 位）。XE3 版本将于任何一天发布。

但这取决于你想做什么。无额外费用选项 - 检查 Delphi 安装中的演示或示例文件夹作为示例位置：

```
C:\Users\Public\Documents\RAD Studio\6.0\Demos\DelphiWin32\VCLWin32\ShellControls
C:\Users\Public\Documents\RAD Studio\9.0\Samples\Delphi\VCL\ShellControls 
```

包括 ShellComboBox、ShellListView、ShellTreeView 和 ShellChangeNotifier

# android - EditText 上 Android 中的电子邮件地址验证

> ID：12947620
> 
> 赞同：227
> 
> 时间：2012-10-18T05:20:26.347
> 
> 标签：android, android-edittext, email-validation

我们怎样才能`Email Validation`在`edittext`in上表演`android`？我已经通过 google & SO 但我没有找到一种简单的方法来验证它。

* * *

## 回答 #1

> 赞同：751
> 
> 时间：2013-04-04T09:58:32.720

爪哇：

```
public static boolean isValidEmail(CharSequence target) {
    return (!TextUtils.isEmpty(target) && Patterns.EMAIL_ADDRESS.matcher(target).matches());
} 
```

科特林：

```
fun CharSequence?.isValidEmail() = !isNullOrEmpty() && Patterns.EMAIL_ADDRESS.matcher(this).matches() 
```

编辑：它将适用于Android 2.2+ ！

编辑：添加缺失`;`

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-10-18T05:20:26.347

要执行电子邮件验证，我们有很多方法，但简单和最简单的方法是**两种方法**。

**1-**使用`EditText(....).addTextChangedListener`which 不断触发`EditText box`ie email_id 中的每个输入无效或有效

```
/**
 * Email Validation ex:- tech@end.com
*/

final EditText emailValidate = (EditText)findViewById(R.id.textMessage); 

final TextView textView = (TextView)findViewById(R.id.text); 

String email = emailValidate.getText().toString().trim();

String emailPattern = "[a-zA-Z0-9._-]+@[a-z]+\\.+[a-z]+";

emailValidate .addTextChangedListener(new TextWatcher() { 
    public void afterTextChanged(Editable s) { 

    if (email.matches(emailPattern) && s.length() > 0)
        { 
            Toast.makeText(getApplicationContext(),"valid email address",Toast.LENGTH_SHORT).show();
            // or
            textView.setText("valid email");
        }
        else
        {
             Toast.makeText(getApplicationContext(),"Invalid email address",Toast.LENGTH_SHORT).show();
            //or
            textView.setText("invalid email");
        }
    } 
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    // other stuffs 
    } 
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    // other stuffs 
    } 
}); 
```

**2-**`if-else`使用条件的 最简单方法。使用 getText() 获取 EditText 框字符串并与为电子邮件提供的模式进行比较。如果模式不匹配或不匹配，按钮的 onClick 会显示一条消息。它不会在 EditText 框中的每个字符输入时触发。如下所示的简单示例。

```
final EditText emailValidate = (EditText)findViewById(R.id.textMessage); 

final TextView textView = (TextView)findViewById(R.id.text); 

String email = emailValidate.getText().toString().trim();

String emailPattern = "[a-zA-Z0-9._-]+@[a-z]+\\.+[a-z]+";

// onClick of button perform this simplest code.
if (email.matches(emailPattern))
{
Toast.makeText(getApplicationContext(),"valid email address",Toast.LENGTH_SHORT).show();
}
else 
{
Toast.makeText(getApplicationContext(),"Invalid email address", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2013-02-02T05:14:21.657

我是这样做的：

添加此**方法**以**检查** **电子邮件**地址是否**有效****：**

```
private boolean isValidEmailId(String email){

    return Pattern.compile("^(([\\w-]+\\.)+[\\w-]+|([a-zA-Z]{1}|[\\w-]{2,}))@"
              + "((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\\.([0-1]?"
              + "[0-9]{1,2}|25[0-5]|2[0-4][0-9])\\."
              + "([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\\.([0-1]?"
              + "[0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|"
              + "([a-zA-Z]+[\\w-]+\\.)+[a-zA-Z]{2,4})$").matcher(email).matches();
     } 
```

现在检查**EditText**的**字符串**：

 **```
if(isValidEmailId(edtEmailId.getText().toString().trim())){
  Toast.makeText(getApplicationContext(), "Valid Email Address.", Toast.LENGTH_SHORT).show();
}else{       
  Toast.makeText(getApplicationContext(), "InValid Email Address.", Toast.LENGTH_SHORT).show();
} 
```

**完毕**

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2012-10-18T05:23:39.670

使用此方法验证您的电子邮件格式。将 email 作为字符串传递，如果格式正确则返回 true，否则返回 false。

```
/**
 * validate your email address format. Ex-akhi@mani.com
 */
public boolean emailValidator(String email) 
{
    Pattern pattern;
    Matcher matcher;
    final String EMAIL_PATTERN = "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";
    pattern = Pattern.compile(EMAIL_PATTERN);
    matcher = pattern.matcher(email);
    return matcher.matches();
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-10-18T05:27:44.087

试试这个：

```
if (!emailRegistration.matches("[a-zA-Z0-9._-]+@[a-z]+\.[a-z]+")) {
 editTextEmail.setError("Invalid Email Address");
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-09-25T10:15:33.603

使用此方法验证 EMAIL：-

```
 public static boolean isEditTextContainEmail(EditText argEditText) {

            try {
                Pattern pattern = Pattern.compile("^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$");
                Matcher matcher = pattern.matcher(argEditText.getText());
                return matcher.matches();
            } catch (Exception e) {
                e.printStackTrace();
                return false;
            }
        } 
```

如果您有任何疑问，请告诉我？

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-10-18T05:30:07.707

```
public static boolean isEmailValid(String email) {
    boolean isValid = false;

    String expression = "^[\\w\\.-]+@([\\w\\-]+\\.)+[A-Z]{2,4}$";
    CharSequence inputStr = email;

    Pattern pattern = Pattern.compile(expression, Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(inputStr);
    if (matcher.matches()) {
        isValid = true;
    }
    return isValid;
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-10-18T05:28:35.490

试试这个

```
public static final Pattern EMAIL_ADDRESS_PATTERN = Pattern.compile(

              "[a-zA-Z0-9\\+\\.\\_\\%\\-\\+]{1,256}" +
              "\\@" +
              "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}" +
              "(" +
              "\\." +
              "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,25}" +
              ")+"
          ); 
```

并在 tne 中编辑文本

```
final String emailText = email.getText().toString();
EMAIL_ADDRESS_PATTERN.matcher(emailText).matches() 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-10-19T07:33:27.807

这是我创建的用于验证电子邮件地址的示例方法，如果传递的字符串参数是有效的电子邮件地址，则返回 true，否则返回 false。

```
private boolean validateEmailAddress(String emailAddress){
    String  expression="^[\\w\\-]([\\.\\w])+[\\w]+@([\\w\\-]+\\.)+[A-Z]{2,4}$";  
       CharSequence inputStr = emailAddress;  
       Pattern pattern = Pattern.compile(expression,Pattern.CASE_INSENSITIVE);  
       Matcher matcher = pattern.matcher(inputStr);  
       return matcher.matches();
} 
```**

# css - 鼠标悬停搜索按钮时的奇怪行为

> ID：12947625
> 
> 赞同：0
> 
> 时间：2012-10-18T05:20:31.117
> 
> 标签：css, wordpress-theming

我目前正在为朋友建立一个网站。

除了搜索框外一切正常。

如果您可以在[http://wordpress.alternet.com.au/](http://wordpress.alternet.com.au/)上看到，则窗口右上角有一个搜索框。搜索图标/图像位于需要的位置。

我使用的是 Chrome 版本 22.0.1229.94 m，当我将鼠标悬停在页面顶部的菜单项上时，搜索图标/图像会重新定位到搜索区域的左侧。

我不明白为什么会这样？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:00:36.660

使用此更新更新您在 style.css 中的类。100% 它整天都在工作`=D`

```
 form#searchform input[type="text"] {
       height: 28px;
 }
 form#searchform {
       position: absolute;
       right: 0;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:30:52.823

............. 嗨，现在添加到`box-sizing`您的`input`或`focus`像这样

**添加** `this css`您的`stylesheet`

```
form#searchform input[type="text"], form#searchform input[type="text"]:focus{
box-sizing:border-box;
-webkit-box-sizing:border-box;
-moz-box-sizing:border-box;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:30:55.947

不是真正的答案，但为了您的信息，这是它在 FireFox 中的外观：

![看起来坏了](../Images/23f0d772c869e310ae84f7dca3a3dd5f.png)

# .net - 显示来自不同线程的弹出窗口（windows phone）

> ID：12947630
> 
> 赞同：1
> 
> 时间：2012-10-18T05:21:03.413
> 
> 标签：.net, multithreading, windows-phone-7, ui-thread

我在从不同线程中显示弹出窗口时遇到问题。我已尝试阅读此处的其他一些问题，但我无法理解如何应用它们...

我有一个使用相机的应用程序，我想在可用后弹出图片的预览。

PhotoCamera 有“CaptureImageAvailable”事件，我想在其中弹出预览

```
private void cam_CaptureImageAvailable(object sender, ContentReadyEventArgs e)
    {
        BitmapImage img = new BitmapImage();
        img.SetSource(e.ImageStream);
        e.ImageStream.Close();

        //creating the new pop-up preview
        Grid panelPreview = new Grid();
        panelPreview.Background = new SolidColorBrush(Colors.Black);
        panelPreview.Width = 300;
        panelPreview.Height = 400;

        //create an ImageBrush to display the image in the new pop-up
        ImageBrush imgPreview = new ImageBrush();
        imgPreview.ImageSource = img;

        //need a rectangle to add the image to, otherwise can't add it
        Rectangle rect = new Rectangle();
        rect.Width = 300;
        rect.Height = 400;
        rect.Fill = imgPreview;

        //Adding the rectangle to the grid
        panelPreview.Children.Add(rect);

        imagePreview.IsOpen = true;

        ....
    } 
```

这会导致 UnauthorizedAcessException，这对我来说很有意义，因为这个事件在不同的线程上，但我不明白如何修复它......我也尝试过使用这段代码

```
private void cam_CaptureImageAvailable(object sender, ContentReadyEventArgs e)
    {

        Deployment.Current.Dispatcher.BeginInvoke(delegate()
        {

            BitmapImage img = new BitmapImage();
            img.SetSource(e.ImageStream);
            e.ImageStream.Close();

            //creating the new pop-up preview
            Grid panelPreview = new Grid();
            panelPreview.Background = new SolidColorBrush(Colors.Black);
            panelPreview.Width = 300;
            panelPreview.Height = 400;

            //create an ImageBrush to display the image in the new pop-up
            ImageBrush imgPreview = new ImageBrush();
            imgPreview.ImageSource = img;

            //need a rectangle to add the image to, otherwise can't add it
            Rectangle rect = new Rectangle();
            rect.Width = 300;
            rect.Height = 400;
            rect.Fill = imgPreview;

            //Adding the rectangle to the grid
            panelPreview.Children.Add(rect);

            imagePreview.IsOpen = true;
        }); 
```

此方法不会引发任何错误，但似乎也没有实际执行任何操作。如何在 UI 线程上显示此弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:23:42.163

你可以使用 Dispatcher，像这样

```
Deployment.Current.Dispatcher.BeginInvoke(()=>{

      something...

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:29:27.690

什么是“图像预览”？
如果它是任何类型的弹出窗口或图像元素容器，则您必须添加“panelPreview”作为它的子元素，以便它在 UI 上可见。

还有一件事，你可以使用缩略图（通过

> 私有 void cam_CaptureThumbnailAvailable（对象发送者，ContentReadyEventArgs e）

) 用于在弹出窗口上查看，这将比实际图像占用更少的内存。

# lisp - “小阴谋家”中的利弊结果

> ID：12947640
> 
> 赞同：4
> 
> 时间：2012-10-18T05:22:04.530
> 
> 标签：lisp, scheme, cons, the-little-schemer

在第 178 页，有一个问题：

```
(cons rep-car
    (cons (cons rep-quote
        (cons
            (cons rep-a
                (cons rep-b
                    (cons rep-c
                        (quote ()))))
            (quote ())))
    (quote ()))) 
```

在哪里

```
rep-car is car
rep-quote is quote
rep-a is a
rep-b is b
rep-c is c 
```

书中的答案是

```
(car (quote (a b c))) 
```

但我认为答案应该是

```
(car ((quote ((a b c))))) 
```

为什么我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:25:45.480

不，书上的答案是对的。请注意，表达式出现 3 次`(quote ())`, 以创建 3 个列表。然后它将各种原子合并到列表中。您的答案包含 5 个列表，而不是 3 个。

`(quote ())`只是返回一个空列表。`(cons 1 (quote ()))`将一项添加到空列表中以 yield `(1)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:24:07.170

```
(car ((quote ((a b c))))) 
```

尝试运行该代码段；您将收到一条错误消息。该代码的作用是

1.  生成符号**a**、**b**和**c**的列表，
2.  尝试将该列表作为函数执行
3.  **将汽车**应用于结果。

由于第 2 步将失败（因为**'(abc)**不是函数），因此永远不会到达第 3 步。

查看原始代码应该清楚，代码的任何部分都没有这样做。

你可能是想说

```
(car (quote ((a b c)))) 
```

由于 Alex D. 给出的原因，这是错误的。

# sql - 自夏令时开始以来，Coldfusion、SQL 和 Ingres 的数据不正确

> ID：12947653
> 
> 赞同：4
> 
> 时间：2012-10-18T05:23:11.360
> 
> 标签：sql, jdbc, coldfusion, dst, ingres

自从大约两周前开始夏令时以来，我们注意到在我们的新 ColdFusion 站点上以下列方式限制日期的任何查询都返回了不正确的数据（其中 StartDate 的格式为 dd-mmm-yyyy）。

```
select ...
from ...
where ...
  and o.booking_date >= date('#StartDate#')
  and o.booking_date < date('#StartDate#') + date('1 day') 
```

我们发现，如果 StartDate 更改如下，则返回正确的数据：

```
and booking_date >= '#DateFormat(DateAdd("d",-1,StartDate), "dd-mmm-yyyy")# 13:00'
and booking_date < '#DateFormat(StartDate, "dd-mmm-yyyy")# 13:00' 
```

我们的 CF 服务器上的时间是正确的，并且设置为 UTC+10:00，并启用了夏令时的自动调整。Ingres II Visual Manager (II_TIMEZONE_NAME) 中的时间设置设置为 AUSTRALIA-VICTORIA。

我们使用 ColdFusion 10 通过 JDBC 连接到 Ingres 数据库。我们使用 ODBC 连接到 Ingres 数据库的旧 ColdFusion 4.5 服务器不会遇到这个问题，所以我认为我们遇到的问题一定与 ColdFusion 10 或我们现在使用的 JDBC 连接有关。

关于为什么会发生这种情况的任何想法？为什么在执行上面第一个示例中所示的操作时需要指定纯 UTC 日期/时间（即没有时间调整）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:57:33.970

假设您使用的是最新版本的 Ingres，9.x 及更高版本，您可能必须将时区指定为连接属性/属性。例如，您可以将连接 URL 属性设置`TZ`为`AUSTRALIA-VICTORIA`，即

`jdbc:ingres://..../mydb;TZ=AUSTRALIA-VICTORIA`

如果 Coldfusion 支持 JDBC 属性，则属性名称为`timezone`，则 TZ/II_TIMEZONE_NAME 的值相同。

虽然 ODBC 和 JDBC 最终都通过相同的接口连接到 Ingres，但 JDBC 不知道服务器环境，因此不会观察到 II_TIMEZONE_NAME。

# java - JSP 和小脚本

> ID：12947654
> 
> 赞同：6
> 
> 时间：2012-10-18T05:23:19.507
> 
> 标签：java, jsp, jstl, el, scriptlet

我知道现在使用 scriptlet 被认为是禁忌。没关系，我会同意 Top Star 的话（因为我目前只是 Java 新手）。

到目前为止我听到的是，它让设计师的生活更轻松。但我想知道，它是否与 JSP 页面的性能有关。另一方面，如果只是为了“让设计师的生活更轻松”，那么你们如何看待在 Java 开发人员同时完成这两项工作的情况下使用 scriptlet？

如果现在 scriptlet 在各方面都不好，你有什么建议？埃尔？JSTL ?

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T06:35:23.243

这不仅仅是为了让别人的生活更轻松，这也是为了让你的生活更轻松。JSTL 和其他标签强制/帮助您正确编写 JSP。scriptlet 的一个问题是人们在 JSP 中做了他们不应该做的事情。我的意思是，JSTL（以及其他标签）可以帮助您保持 MVC 模式，因为基本上，如果在 JSP 中有一些您不能用 JSTL 做的事情，那是因为您不应该这样做。如果你不尊重 MVC 并且在 JSP 中做你不应该做的事情

可以使用 JSTL、struts 标签、springs 标签等。选项很少，可以组合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:27:50.557

EL 和 JSTL 是我推荐的，因为它们也使开发人员的生活变得轻松。与 scriplet 相比，当您使用 EL 和 JSTL 时，您的代码可读性会得到提高。使用 JSTL，我体验到与使用 scriptlet 相比，遍历数组列表非常容易。这只是我发现非常有用的一件事。但是有很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:36:43.183

我个人不觉得 scriptlet 不好，如果你正在做一些小的条件检查，比如会话是否有效，或者用户已经登录等等。如果 Java 开发人员也是 UI 开发人员，那么对于小代码应该没问题。但是做很多 java 的事情，比如从数据库中获取数据、业务规则验证等是非常非常糟糕的。虽然我强烈推荐 EL 和 JSTL，但如果你没有时间学习 JSTL（比如项目截止日期等），那么几行代码也可以使用 scriptlet

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T14:38:12.160

**到目前为止，绝对不**推荐使用Scriptlet 。主要原因是处理特殊情况`NullPointerExceptions`等。请参阅：[Head First Servlets 和 JPS。](http://my.safaribooksonline.com/book/web-development/jsp/0596005407/being-a-jsp/headservletsjsp-chp-7-sect-30) 表达式语言是相同的改进版本，并且提供了更多的功能。永远记住，您必须始终避免在 JSP 中编写脚本。

使用表达式语言和 JSTL 不仅不会使您的代码干净，而且还可以帮助开发人员避免多次不必要的处理。

# ruby-on-rails-3 - Rails 3/Mongoid：更新时在集合上调用验证器

> ID：12947656
> 
> 赞同：0
> 
> 时间：2012-10-18T05:23:34.017
> 
> 标签：ruby-on-rails-3, validation, mongoid, one-to-many, activemodel

我在 Mongoid 3 和 Rails 3 中工作。

我希望在修改集合后在模型上调用验证器：

```
class TooManyValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    puts "validate called"
    if value.size > 4
      puts "too many???"
      record.errors[attribute] << 'too many'
    end
  end
end    

class Task
  include Mongoid::Document

  has_many :parts, inverse_of: :task
  validates :parts, too_many: true
end

class Part
  include Mongoid::Document

  belongs_to :task, inverse_of: :parts
end 
```

我的测试是：

```
it "should not have too many parts" do    
  task = Task.create!

  puts "ADDING PARTS"
  6.times { task.parts << Part.create }
  #task.save

  puts "task.errors['parts'] = #{task.errors["parts"]}"

  Task.find(task._id).parts.size.should == 4
end 
```

我得到的输出是：

```
validate called
ADDING PARTS
task.errors['parts'] = [] 
```

并且测试失败了`6 != 4`。

`task.save`当我在我得到的测试行中评论时也要注意

```
validate called
ADDING PARTS
validate called
too many???
task.errors['parts'] = ["too many"] 
```

但它仍然失败`6 != 4`

如何在修改部件集合后调用 :parts on Task 的验证器，并使其在失败后不更新集合？

谢谢

# mysql - 在mysql中使用条件将用户的对象关系合并到另一个用户

> ID：12947657
> 
> 赞同：1
> 
> 时间：2012-10-18T05:23:37.883
> 
> 标签：mysql, on-duplicate-key, insert-select

这是我的第一个 SO 问题 :)

我正在尝试将临时用户“合并”到现有用户，以及他们所有相关的对象关系——一个是“post_relationships”

问题是..如果两个用户都与同一个帖子有关系，一个简单的 INSERT INTO ... SELECT 语句会产生一个 DUPLICATE KEY 错误..

另外，如果其中一个用户具有更高的权限级别，我想保留两个用户的最高权限级别。

我已经构建了一个有效的查询，但我想知道是否有更好的方法来完成这个。我担心随着表的增长，这个查询不会那么有效。

```
INSERT INTO post_relationships
            (id_user, id_post, access, label, time_created)
        SELECT 
            old.id_user,
            new.id_post, 
            new.access, 
            new.label, 
            new.time_created 
        FROM 
            post_relationships AS old,
            post_relationships AS new
        WHERE 
            old.id_user = '$id_old' AND 
            new.id_user = '$id_new' AND
            new.id_post = old.id_post AND 
            new.access > old.access
        ON DUPLICATE KEY UPDATE
            access= new.access,
            label = new.label 
```

当条件出现时，它总是强制更新

```
new.access > old.access 
```

这让我担心这里有一些矫枉过正的代码。有什么建议么？

谢谢！

# java - 我怎样才能从相同的方法返回 2 ArrayList

> ID：12947659
> 
> 赞同：10
> 
> 时间：2012-10-18T05:23:38.530
> 
> 标签：java, arraylist

我有一个方法如下，这个方法包含两个arraylist（“eventList”和“emailList”）。

```
List<EmailUID> emailid=SharedEvent.getEmailUid(filter, uri, exchWD, EmailShare);

public static List<EmailUID> getEmailUid(Filter filter, String uri, NexWebDav exchWD,
            List<String> emailShare)
List eventsToday = null;
List<EmailUID> arrayList = new ArrayList<EmailUID>();
List<EmailUID> emailList = new ArrayList<EmailUID>();
List<EmailUID> eventList = new ArrayList<EmailUID>();

        for (String email : emailShare) {
            String uris = uri + email + "/events/";
            InputStream stream = null;
            try {
                stream = exchWD.get(uris);
                BufferedReader br = new BufferedReader(new InputStreamReader(stream));
                CalendarBuilder builder = new CalendarBuilder();
                net.fortuna.ical4j.model.Calendar calendar = builder.build(br);

                //eventsToday.add(email);

                eventsToday = (List<?>) filter.filter(calendar.getComponents(Component.VEVENT));
                arrayList=getEmailUID(eventsToday,email);
                emailList.addAll(arrayList);//
                eventList.addAll(eventsToday);//

            } catch (ParserException e) {
                LOGGER.error("Parse Exception"+e.getMessage());
            } finally {
                IOUtils.closeQuietly(stream);
            }
        }
    //return eventList;
    return emailList;
    } 
```

如何同时获取列表“eventList”和“emailList”

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T05:25:12.570

单个函数不可能有两个`return statement`，但您可以包装新的`Map`，或者`List`可以返回两个 ArrayList。

```
public Map<String,List<EmailUID>> getList()
  List<EmailUID> emailList = new ArrayList<EmailUID>();
  List<EmailUID> eventList = new ArrayList<EmailUID>();
  ...
  Map<String,List<EmailUID>> map =new HashMap();
  map.put("emailList",emailList);
  map.put("eventList",eventList);
  return map;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-18T05:26:16.853

好吧，如果你真的需要，你可以将它们包装成一个只有 2 个 List 字段的对象。

或者，您可以返回 2 个列表的 Map，每个列表都有一个唯一的键。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T05:26:47.687

您可以创建一个具有两个列表作为其成员的类，然后可以将这个类对象与您的列表一起返回。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T05:28:15.617

您可以将它们返回到一个数组中。

```
public static List[] getEmailUid(Filter filter, String uri, NexWebDav exchWD,
           List<String> emailShare) {
    //
    // Method body 
    //
    return new List[] { eventList, emailList };

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T05:26:01.060

创建一个`List<EmailUID>`对象列表，即`List<List<EmailUID>>`. 将您的列表 (`eventList`和`emailList`) 添加到此**超级列表中**。并返回这个超级列表。

要`evenlist`稍后访问，请使用此`superList.get(0); //refers to eventlist`

（假设`superList`从您的方法返回并且`evenlist`是该列表中的第一项）：

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-18T05:26:26.300

在 Java 中没有简单的方法可以做到这一点。您可以创建一个包含两个元素的小型包装类，您可以返回两个列表的列表、两个列表的集合或包含两个列表的 2 个条目的 Map>。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-18T05:29:55.497

您需要更改方法的签名。将返回类型更改为

```
ArrayList<String>[] 
```

或者

```
ArrayList<ArrayList<String>> 
```

根据选择的返回类型，编辑代码。

如果选择数组作为返回类型，则在返回之前添加以下行：

```
ArrayList<String>[] arr = new ArrayList<String>[2];
arr[0] = eventList;
arr[1] = emailList;
return arr; 
```

同样，您可以为第二个选项添加代码。如果您需要进一步的帮助，请告诉我。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-03-02T05:07:14.647

公共静态列表 getData() {

/*其他实现代码*/

返回 Arrays.asList(List1, list2);

}

# java - 如何使用 ResoucesBundles 在属性文件中存储与可用性相关的值（字体、尺寸、颜色……）

> ID：12947661
> 
> 赞同：1
> 
> 时间：2012-10-18T05:23:58.937
> 
> 标签：java, swing, properties, resourcebundle, externalizing

我可以使用属性文件和 ResourceBundle 类使用`ResourceBundle.getString()`. 甚至还可以使用以下方法获取 int 和 float 对象：

```
int a = (int) ResourceBundle.getObject("IntKey");
float b = (float) ResourceBundle.getObject("FloatKey"); 
```

但我想知道如何获取一些复杂的对象，比如字体？

```
Font font = (Font) ResourceBundle.getObject("FontKey"); 
```

但是如何将字体值存储在属性文件中？我可以将对象存储为：`new Font("Tahoma", Font.PLAIN, 12);`到属性文件的键：值中。

# 更新1：

@doublesharp 你的答案很好。实际上我没有扩展 ResourceBundle 类来覆盖 handleGetObjects() 方法。我的实现如下图所示：

```
public class Usability {

    private static final String BUNDLE_NAME = "com.upgrade.utility.resources.Usability";

    private static final ResourceBundle RESOURCE_BUNDLE = ResourceBundle.getBundle(BUNDLE_NAME);

    private Usability() {}

    public static String get(String key, Object ... args) {

        String value = null;
        try {
            value = RESOURCE_BUNDLE.getString(key);

            for (Object var : args) {
                if (var != null) {
                    try {
                        value = value.replaceFirst("@", var.toString());
                    } catch (Exception e) {}
                }
            }
        } catch (MissingResourceException e) {
            value = '!' + key + '!';
        }
        return value;
    }

    public static Font getFont(String key){
        Font value = null;
        try {
            String fontName = (String) RESOURCE_BUNDLE.getString(key+ ".Name");
            Integer fontStyle = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".Style"));
            Integer fontSize = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".Size"));
            value = new Font(fontName, fontStyle, fontSize);
        } catch (MissingResourceException e) {
            value = new Font("Tahoma", Font.PLAIN, 11);
        }catch (NullPointerException npe) {
            value = new Font("Tahoma", Font.PLAIN, 11);
        }

        System.out.println("Font"+ value);
        return value;

    }
} 
```

在这种情况下，我该如何使用您的方法？我是 JAVA 新手，你能告诉我如何修改我的实现以使用方法 handleGetObjects() 吗？

# 更新 2：

@doublesharp：从您的上一条评论中，我已经进行了这样的修改，但是在可用性类的第 3 行中出现了 Class Cast 异常。

```
public class Usability {

    private static final String BUNDLE_NAME = "com.upgrade.utility.resources.Usability";

    public static final MyResourceBundle RESOURCE_BUNDLE = (MyResourceBundle) MyResourceBundle.getBundle(BUNDLE_NAME);

    private Usability() {}

    public static String get(String key, Object ... args) {

        String value = null;
        try {
            value = RESOURCE_BUNDLE.getString(key);

            for (Object var : args) {
                if (var != null) {
                    try {
                        value = value.replaceFirst("@", var.toString());
                    } catch (Exception e) {}
                }
            }
        } catch (MissingResourceException e) {
            value = '!' + key + '!';
        }
        return value;
    }

} 
```

我的扩展 ResourceBunlde 类是：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.util.Enumeration;
import java.util.MissingResourceException;
import java.util.ResourceBundle;

public class MyResourceBundle extends ResourceBundle{

    @Override
    public Object handleGetObject(String key) {
       if (key.contains("Font")) {
           return getFont(key);
       } else if (key.contains("color")){
           return getColor(key);
       }else if (key.contains("Dimension")){
           return getDimension(key);
       }
    return this.getObject(key);
    }

     public Font getFont(String key){
            Font value = null;
            try {
                String fontName = (String) this.getString(key+ ".Name");
                Integer fontStyle = Integer.parseInt(this.getString(key+ ".Style"));
                Integer fontSize = Integer.parseInt(this.getString(key+ ".Size"));
                value = new Font(fontName, fontStyle, fontSize);
            } catch (MissingResourceException e) {
                value = new Font("Tahoma", Font.PLAIN, 11);
            }catch (NullPointerException npe) {
                value = new Font("Tahoma", Font.PLAIN, 11);
            }
            return value;
        }

     public Color getColor(String key){
            Color value = null;
            try {
                Integer R = Integer.parseInt(this.getString(key+ ".R"));
                Integer G = Integer.parseInt(this.getString(key+ ".G"));
                Integer B = Integer.parseInt(this.getString(key+ ".B"));
                value = new Color(R, G, B);
            } catch (MissingResourceException e) {
//              value = new Color("Tahoma", Font.PLAIN, 11);
            }catch (NullPointerException npe) {
//              value = new Color("Tahoma", Font.PLAIN, 11);
            }
            return value;
        }

     public Dimension getDimension(String key){
            Dimension value = null;
            try {
                Integer X = Integer.parseInt(this.getString(key+ ".X"));
                Integer Y = Integer.parseInt(this.getString(key+ ".Y"));
                value = new Dimension(X, Y);
            } catch (MissingResourceException e) {
//              value = new Color("Tahoma", Font.PLAIN, 11);
            }catch (NullPointerException npe) {
//              value = new Color("Tahoma", Font.PLAIN, 11);
            }
            return value;
        }

    @Override
    public Enumeration<String> getKeys() {
        return null;
    }

} 
```

如何解决此异常？

**还有我的回答有问题吗？**使用我刚刚打电话的样子

```
Usability.getFont("JPanelUpgradeTypeScreen.ElementLabelFont"); 
```

但是使用您的回答技术，我需要将其称为（调用中需要类型转换）：

```
(Font)Usability.RESOURCE_BUNDLE.handleGetObject("JPanelUpgradeTypeScreen.ElementLabelFont"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:29:20.460

不应在属性文件中初始化对象。您应仅在属性文件中使用常量值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:50:08.263

您需要`handleGetObject()`为您的实现覆盖该方法。您不能将对象定义存储在属性文件中，但您可以将其初始化参数存储为键，并在返回对象时使用它们。在此示例中，您将为`font-family`（Tahoma 等）、`font-type`（用于映射到 Font.BOLD 等的文本值）和`font-size`. 调用`MyResourceBundle.getObject("font")`（一个扩展的类`ResourceBundle`）会调用你的实现，`handleGetObject()`然后使用之前的值来创建你的对象：

```
@Override
public Object handleGetObject(String key) {
   if (key.equals("font")) {
      String family = this.getString("font-family");
      String strType = this.getString("font-type");
      int type;
      switch (strType){
          case "bold": Font.BOLD;
          default: type = Font.PLAIN;
      }
      int size = this.getInt("font-size");
      return new Font(family, type, size);
   } else {
      return null;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:52:25.363

您可以序列化您的自定义对象，然后使用 base64 编码包装二进制代码，例如，您可以将其作为字符串写入属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T06:28:33.340

从您的所有答案和评论中获取输入：这是答案，满足我的要求：

```
public static Font getFont(String key){
        Font value = null;
        try {
            String fontName = (String) RESOURCE_BUNDLE.getString(key+ ".Name");
            Integer fontStyle = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".Style"));
            Integer fontSize = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".Size"));
            value = new Font(fontName, fontStyle, fontSize);
        } catch (MissingResourceException e) {
            value = new Font("Tahoma", Font.PLAIN, 11);
        }catch (NullPointerException npe) {
            value = new Font("Tahoma", Font.PLAIN, 11);
        }
        return value;   
    } 
```

在我存储为的属性文件中

```
#Usability
    DialogTextFont.Name=Tahoma
    DialogTextFont.Style=0
    DialogTextFont.Size=12 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T03:24:20.090

在一个类中，我定义了以下函数，每当我需要访问与可用性相关的值时，我都会调用它们。所有与可用性相关的值都存储在一个公共位置（属性文件）。

```
private static final String BUNDLE_NAME = "com.testApp.resources.properties.Usability";

private static final ResourceBundle RESOURCE_BUNDLE = ResourceBundle.getBundle(BUNDLE_NAME);

    public static Font getFont(String key){
        Font value = null;
        try {
            String fontName = (String) RESOURCE_BUNDLE.getString(key+ ".Name");
            Integer fontStyle = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".Style"));
            Integer fontSize = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".Size"));
            value = new Font(fontName, fontStyle, fontSize);
        } catch (MissingResourceException e) {
            value = new Font("Tahoma", Font.PLAIN, 11);
        }catch (NullPointerException npe) {
            value = new Font("Tahoma", Font.PLAIN, 11);
        }
        return value;
    }

    public static Color getColor(String key){
        Color value = null;
        try {
            Integer R = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".R"));
            Integer G = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".G"));
            Integer B = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".B"));
            value = new Color(R, G, B);
        } catch (MissingResourceException e) {
//            value = new Color("Tahoma", Font.PLAIN, 11);
        }catch (NullPointerException npe) {
//          value = new Color("Tahoma", Font.PLAIN, 11);
        }
        return value;
    }

 public static Dimension getDimension(String key){
        Dimension value = null;
        try {
            Integer X = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".X"));
            Integer Y = Integer.parseInt(RESOURCE_BUNDLE.getString(key+ ".Y"));
            value = new Dimension(X, Y);
        } catch (MissingResourceException e) {
//            value = new Color("Tahoma", Font.PLAIN, 11);
        }catch (NullPointerException npe) {
//          value = new Color("Tahoma", Font.PLAIN, 11);
        }
        return value;
    }
} 
```

在我为可用性相关值维护的属性文件中，属性定义如下：

```
#BLACK
ElementLabelFont.Color.R=4
ElementLabelFont.Color.G=4
ElementLabelFont.Color.B=4

#ScreenPanel dimension
ScreenPanel.Dimension.X=632
ScreenPanel.Dimension.Y=625

#Font of jCheckBoxYesAgreement
JPanelPreUpgradeStepsScreen.jCheckBoxYesAgreement.Font.Name=Tahoma
JPanelPreUpgradeStepsScreen.jCheckBoxYesAgreement.Font.Style=0
JPanelPreUpgradeStepsScreen.jCheckBoxYesAgreement.Font.Size=12 
```

# sql - 如何在sql中对特定列表进行排序

> ID：12947664
> 
> 赞同：1
> 
> 时间：2012-10-18T05:24:27.960
> 
> 标签：sql, sqlite, sorting

嗨，我正在使用此查询来制作事件列表

```
SELECT *, CASE
WHEN ((month > 9 OR (month =9 and days >= 22)) AND year <= 2012)then 'list1'
WHEN (year <= 2013) then 'list2' 
WHEN (year > 2013)then 'list3' 
end as sortlist from events order by sortlist, date 
```

现在我想按相同的 sql 对 list3 进行排序，按年份排序。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:31:09.240

如果你有 SQL SERVER 2005 或更高版本，你可以这样做

```
SELECT
    *,
    CALC.sortlist
from events as e
    outer apply
    (
        select
                case
                WHEN ((e.month > 9 OR (e.month =9 and e.days >= 22)) AND e.year <= 2012)then 'list1'
                WHEN (e.year <= 2013) then 'list2' 
                WHEN (e.year > 2013)then 'list3' 
            end as sortlist
    ) as CALC
order by
    CALC.sortlist, CALC.date,
    case when CALC.sortlist = 'list3' then e.year else null end 
```

你也可以这样做，但如果你的情况等于'list3'，它并不完全按年份排序（我的意思是如果你要改变表达式，`case`你也需要改变`order by`）

```
SELECT
    *,
    case
        WHEN ((e.month > 9 OR (e.month =9 and e.days >= 22)) AND e.year <= 2012)then 'list1'
        WHEN (e.year <= 2013) then 'list2' 
        WHEN (e.year > 2013)then 'list3' 
    end as sortlist
from events as e
order by
    sortlist, e.date,
    case when e.year > 2013 then e.year else null end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:43:02.547

我得到了解决方案。为了按顺序，我刚刚编辑为

```
 order by sortlist, case when sortlist='list3' then year else null end, 
```

# mysql - MySQL 在 Windows 上将数据库文件存储在哪里以及文件的名称是什么？

> ID：12947668
> 
> 赞同：94
> 
> 时间：2012-10-18T05:25:02.260
> 
> 标签：mysql, database, windows

我不小心格式化了我的硬盘驱动器并重新安装了 Windows，并忘记备份我在 MySQL 服务器中的一个重要数据库。我正在尝试使用一些软件来挽救文件，但我不知道要查找什么。

文件存储的路径是什么，文件的名称是什么（我应该寻找什么命名约定或文件扩展名）？

我相信我的服务器正在使用 MyISAM，但不是 100% 肯定。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-18T05:27:16.567

您可以检查`my.ini`文件以查看数据文件夹的位置。

通常有一个文件夹 {mysqlDirectory}/data

MySQL数据存储：

```
Commands.frm
Commands.myd
Commands.myi 
```

*.frm 文件包含表定义。您的 *.myi 文件是 MyISAM 索引文件。您的 *.myd 文件包含表数据。

**编辑/更新**。由于问题中显示的兴趣，这里有更多信息，也可以在评论中找到。

在 Windows 8.1 中，MySQL 数据库（默认情况下）存储在此处：`C:\ProgramData\MySQL\MySQL Server 5.6\data`

文件夹 C:\ProgramData 是一个隐藏文件夹，因此您必须在 Windows 资源管理器地址中键入它才能到达那里。在该数据文件夹中，数据库被命名为`/{database_name_folder}/{database_tables_and_files}`.

例如，

```
C:\ProgramData\MySQL\MySQL Server 5.6\data\mydatabase\mytable.frm
C:\ProgramData\MySQL\MySQL Server 5.6\data\mydatabase\mytable.ibd 
```

感谢 @marty-mcgee 提供此内容

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-08-10T21:06:22.230

在 Windows 7 中，MySQL 数据库存储在

> C:\ProgramData\MySQL\MySQL 服务器 5.6\data

注意：这是一个*隐藏*文件夹。我的例子是 MySQL Server 5.6 版；如果不同，请根据您的版本更改文件夹名称。

知道这个位置很方便，因为有时 MySQL Workbench 无法删除模式（或导入数据库）。这主要是由于 db 文件夹中存在文件，由于某种原因，Workbench 在早期进程中无法删除这些文件。使用 Windows 资源管理器删除文件并重试（删除、导入），您的问题应该得到解决。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-02-12T04:05:40.280

我在根目录中有一个默认的 my-default.ini 文件，并且有一个服务器配置：

```
[mysqld]
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 
```

所以这并没有告诉我路径。

最好的方法是连接到数据库并运行此查询：

```
SHOW VARIABLES WHERE Variable_Name LIKE "%dir" ; 
```

结果如下：

```
basedir                     C:\Program Files (x86)\MySQL\MySQL Server 5.6\
character_sets_dir          C:\Program Files (x86)\MySQL\MySQL Server 5.6\share\charsets\

datadir                     C:\ProgramData\MySQL\MySQL Server 5.6\Data\
innodb_data_home_dir    
innodb_log_group_home_dir   .\
lc_messages_dir             C:\Program Files (x86)\MySQL\MySQL Server 5.6\share\

plugin_dir                  C:\Program Files (x86)\MySQL\MySQL Server 5.6\lib\plugin\

slave_load_tmpdir           C:\Windows\SERVIC~2\NETWOR~1\AppData\Local\Temp
tmpdir                      C:\Windows\SERVIC~2\NETWOR~1\AppData\Local\Temp 
```

如果您想查看为数据库配置的所有参数，请执行以下操作：

```
SHOW VARIABLES; 
```

storage_engine 变量会告诉你使用的是 InnoDb 还是 MyISAM。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-02T07:40:07.080

对于 Windows7 使用此链接：c:\users\all users\MySql\MySql Server xx\Data\

其中 xx 是您机器中安装的 sql server 的版本号。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-09-07T14:21:29.083

MYSQL 8.0：

`my.ini`在磁盘中搜索，我们会找到这个文件夹：

> C:\ProgramData\MySQL\MySQL Server 8.0
> 是`ProgramData`，不是`Program file`

数据在子文件夹中：`\Data`.

每个人都有`database`一个文件夹，每个`table`是文件，每个`index`是 1+ 个文件。

这是一个示例数据库`sakila`： [![在此处输入图像描述](../Images/18210227c37c8666ecb681db0922c2b7.png)](https://i.stack.imgur.com/nNbRq.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-10-17T15:01:01.927

只需对本地分区上的 *.myi 文件执行 Windows 搜索。时期。

正如我所怀疑的那样，它们位于程序文件文件夹中，而不是像大多数其他数据库管理器那样使用正确的仅数据文件夹。

为什么要搜索 my.ini 文件，用编辑器打开它，查找路径字符串，确保没有更改配置文件 (!)，然后再进行第二次搜索？除了练习触摸打字之外，没有一点额外的好处。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-18T05:29:28.997

那应该是您的 {install path}\data 例如`C:\apps\wamp\bin\mysql\mysql5.5.8\data\{databasename}`

*   [如何从 .myd、.myi、.frm 文件中恢复 MySQL 数据库](https://stackoverflow.com/questions/879176/how-to-recover-mysql-db-from-myd-myi-frm-files)
*   [MySQL目录结构](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=/com.ibm.ztpf-ztpfdf.doc_put.cur/gtpm7/m7dirstruct.html)
*   [从物理文件恢复 MySQL 数据库](https://stackoverflow.com/questions/484750/restoring-mysql-database-from-physical-files)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-03-01T08:25:19.340

它通常在下面指定的文件夹中，但 ProgramData 通常是隐藏文件夹。要显示它，请转到控制面板搜索“文件夹”，然后在高级设置下勾选显示隐藏文件并单击应用。C:/ProgramData/MySQL/MySQL 服务器 5.5/Data/

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-04-22T13:43:38.707

如果您使用的是安装了 Xampp 服务器的 Win10，那么您可以在**C:\xampp\mysql\data中找到数据文件夹**

在数据文件夹内，每个数据库都有自己的文件夹，该文件夹又包含代表数据库中单个表的 .frm、.myi 和 .myd 文件。

例如，如果您创建了一个名称为 myschool 的数据库，并且在数据库内部，您有三个名称为的表：

1.  苗圃
2.  基本的
3.  中学

然后，您将拥有 Nursery 表：nursery.frm、nursery.myi 和nursery.myd。主表和辅助表也是如此。**因此，在我这里提到的，您将在名为myschool**的数据库文件夹内共有 9 个文件。

然后，您可以复制数据库文件夹并在新的 mysql 安装数据文件夹中使用它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-02-19T11:12:08.070

我刚刚在 Windows7 上安装了 MySQL 5.7。数据库文件位于以下隐藏目录中： `C:\ProgramData\MySQL\MySQL Server 5.7\Data`

该`my.ini`文件位于同一根目录中：`C:\ProgramData\MySQL\MySQL Server 5.7`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-07T09:44:01.330

在 MySQL 中，
“.myd”是一个数据库自身，
“.tmd”是一个临时文件。
但有时我也会看到“.sql”。

这取决于您的设置和/或导出方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-18T05:30:10.690

1) 找到存储在 MySQL 安装文件夹中的 my.ini。

例如，

```
C:\Program Files\MySQL\MySQL Server 5.1\my.ini 
```

2) 使用我们喜欢的文本编辑器打开“my.ini”。

```
#Path to installation directory. All paths are usually resolved relative to this.
basedir="C:/Program Files/MySQL/MySQL Server 5.1/"

#Path to the database root/"
datadir="C:/Documents and Settings/All Users/Application Data/MySQL/MySQL Server 5.1/Data 
```

找到“datadir”，这是 MySQL 在 Windows 中存储数据的位置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-01T15:33:10.660

**C:\Program Files\MySQL\MySQL Workbench 6.3 CE\sys**

粘贴`URL`到窗口文件，并`Tables, Procedures, Functions`从该目录获取

# xml - 使用 XML 向 Zend 表单添加验证

> ID：12947670
> 
> 赞同：1
> 
> 时间：2012-10-18T05:25:26.870
> 
> 标签：xml, zend-form

我正在尝试在我已经实现的 Zend Framework 中使用 XML 构建表单。我还添加了验证，但如果验证失败，我将无法显示错误。这是xml文件。

```
`

<?xml version="1.0" encoding="UTF-8"?>
<form>
<user>
    <login>
        <name>signup</name>
        <class>test</class>
        <method>post</method>

        <elements>
            <username>
                <type>text</type>
                <options>
                    <label>Username:</label>
                    <validators>
                        <strlen>
                            enter code here<validator>StringLength</validator>
                            <options>
                                <min>4</min>
                                <max>20</max>
                            </options>
                        </strlen>
                    </validators>
                    <required>true</required>
                </options>
            </username>

            <password>
                <type>password</type>
                <options>
                    <label>Password:</label>
                    <validators>
                        <regex>
                            <validator>regex</validator>
                            <options>
                                <pattern>/^[a-z]/i</pattern>
                            </options>
                        </regex>
                        <strlen>
                            <validator>StringLength</validator>
                            <options>
                                <min>3</min>
                            </options>
                        </strlen>
                    </validators>
                    <required>true</required>
                </options>
            </password>

            <submit>
                <type>submit</type>
                <options>
                    <value>Submit</value>
                </options>
            </submit>
        </elements>
    </login>
</user> 
```

`

IndexController.php 文件

```
`

类 IndexController 扩展 Zend_Controller_Action {

function indexAction() {
    $this->view->baseUrl = $this->_request->getBaseUrl();
    $this->view->pageTitle = "Zend_Form Login";

    Zend_Loader::loadClass("Zend_Config_Xml");
    $form = new Zend_Config_Xml('../application/forms/login.xml');
    $form = new Zend_Form($form->user->login);

    $form->setDecorators(array( 
                'FormElements',
                'Form' 
            )); 

    $form->setElementDecorators(array( 
        'ViewHelper', 
        'Label' 
    )); 

    foreach($form->getElements() as $element) {
        $element->addDecorators(array( 
            array('Errors', ''),
            array('HtmlTag', ''), 
            array('Label', ''), 
        )); 
    }

    if ($this->getRequest()->isPost()) {
        if ($form->isValid($_POST)) {
            $formData = $form->getValues();
            $username = $form->getValue('username');
            $password = $form->getValue('password');

            if ($username == "admin" && $password == "root") {
                $this->_redirect("index/complete");
            } else {
                //Booh!
            }
        } else {
            $form->populate($formData);
        }
    }

    $this->view->form = $form;
}

function completeAction(){} 
```

}`

如果验证失败，请帮助显示错误 [http://webcache.googleusercontent.com/search?q=cache:http://www.maltblue.com/php/zend-form-mastery-with-zend-config-part -3-标准形式元素选项][1]

问候 Prashant Sudeep

# javascript - 获取具有特定类的兄弟 div 并且未禁用

> ID：12947674
> 
> 赞同：1
> 
> 时间：2012-10-18T05:25:44.060
> 
> 标签：javascript, jquery

我想找到一个与它关联的类的 div，但它不能被禁用。我正在使用以下代码获取下一个兄弟，但它将返回具有“menuDiv”类的下一个元素。

```
var nextDiv=jQuery('div.subMenuBarhover').nextAll('.menuDiv:first'); 
```

但现在我需要未禁用的元素，并且所有元素的 id 都是未知的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:46:33.867

您说您正在使用自定义属性将 a 标记`div`为禁用。我建议始终将`data-*`属性用于自定义属性，即

```
<div data-disabled="true"> 
```

要选择`div`没有该属性的下一个，请使用[否定伪类（又名`:not`选择器）](http://www.w3.org/TR/selectors/#negation)和*属性*选择器：

```
jQuery('div.subMenuBarhover').nextAll('.menuDiv:not([data-disabled]):first'); 
```

如果要查找`data-disabled`属性具有特定值的下一个元素，请使用[*属性等于*](http://api.jquery.com/attribute-equals-selector/)选择器：

```
jQuery('div.subMenuBarhover').nextAll('.menuDiv[data-disabled=false):first'); 
```

* * *

一般来说，[看看所有现有的选择器](http://api.jquery.com/category/selectors/)都已经尝试过了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:27:38.513

尝试添加 . `not(':disabled')`根据需要添加到您的代码。

[不是](http://api.jquery.com/not/)

[禁用选择器](http://api.jquery.com/disabled-selector/)

# javascript - 在 HTML 页面中显示 XML/JSON 内容

> ID：12947678
> 
> 赞同：0
> 
> 时间：2012-10-18T05:26:07.087
> 
> 标签：javascript, xml, perl

我是新手，我有应用程序，其中存在复选框树。如果用户在选中其中一些复选框之前，我想预先填充复选框。

为此，我从我的后端 perl 脚本获取 XML 格式，如下所示。类似，在下面的 XML 中只有 0、43、44、45、46 和 50 出现，所以只有那些相应的复选框需要在页面加载时检查。我想要在页面加载时显示那些选中的复选框。我该怎么做.......？

我尝试了很多例子。但我的问题没有得到解决。下面是我从 perl 脚本获取的 XML 格式数据。

```
<perldata> 
<hashref memory_address="0x86f4880"> 
<item key="0">1</item> 
</hashref> 
</perldata> 
<perldata> 
<hashref memory_address="0x86f4880"> 
<item key="43">1</item> 
</hashref>  
</perldata> 
<perldata> 
<hashref memory_address="0x86f4880"> 
<item key="44">1</item> 
</hashref> 
</perldata> 
<perldata> 
<hashref memory_address="0x86f4880"> 
<item key="45">1</item> 
</hashref> 
</perldata> 
<perldata> 
<hashref memory_address="0x86f4880"> 
<item key="46">1</item> 
</hashref>  
</perldata> 
<perldata> 
<hashref memory_address="0x86f4880"> 
<item key="50">1</item> 
</hashref> 
</perldata> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:54:55.333

缺少很多信息，但我会尽力帮助您。我将假设您正在获取整个 XML，并且您没有使用 jQuery 或其他库。首先，您的 XML 缺少根节点。然后您可以在 JavaScript 中解析您的 XML 并选中您的复选框：

```
// if you are getting the XML from AJAX call
//var xmlDoc = xmlhttp.responseXML;

// if you are have the XML as String
var xmlStr = '<root><perldata> \
<hashref memory_address="0x86f4880"> \
<item key="0">1</item> \
</hashref> \
</perldata> \
<perldata> \
<hashref memory_address="0x86f4880"> \
<item key="43">1</item> \
</hashref>  \
</perldata> \
<perldata> \
<hashref memory_address="0x86f4880"> \
<item key="44">1</item> \
</hashref> \
</perldata> \
<perldata> \
<hashref memory_address="0x86f4880"> \
<item key="45">1</item> \
</hashref> \
</perldata> \
<perldata> \
<hashref memory_address="0x86f4880"> \
<item key="46">1</item> \
</hashref>  \
</perldata> \
<perldata> \
<hashref memory_address="0x86f4880"> \
<item key="50">1</item> \
</hashref> \
</perldata> \
</root>';
var xmlDoc;
if (window.DOMParser)
{
    var parser=new DOMParser();
    xmlDoc=parser.parseFromString(xmlStr,"text/xml");
}else // Internet Explorer
{
    xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async=false;
    xmlDoc.loadXML(xmlStr); 
}

// get all the item tags from the XML
var itemTags = xmlDoc.getElementsByTagName("item");
// get all the items to be checked
var inputsToCheck = {}; 
for(var i = 0, len = itemTags.length; i < len; i++) {
    var itemTag = itemTags[i];
    inputsToCheck[itemTag.getAttribute("key")] = true;
}

// loop through the inputs and check the items to be checked
var inputs = document.getElementsByTagName("input");
for(var i = 0, len = inputs.length; i < len; i++) {
    var input = inputs[i];
    if(input.getAttribute("type") == "checkbox" && inputsToCheck[input.getAttribute("name")])
        input.setAttribute("checked", "true");
} 
```

# ruby-on-rails - 多态关联形式 tag_list

> ID：12947692
> 
> 赞同：0
> 
> 时间：2012-10-18T05:27:21.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, polymorphic-associations

使用代码：

```
<div class="field">
<%= form_for [@tagable, Tag.new] do |f| %>
    <p>
        <%= f.label :Tag %><br />
        <%= f.text_field :tag_list %>
    <p>
    <div class="actions">
        <%= f.submit "Create Product", class: "btn btn-large btn-primary" %>

    </div>
<% end %>
 </div> 
```

我在我的 Tag 模型中定义了该方法：

```
def tag_list
 tags.map(&:name).join(", ")
end

def tag_list=(tags_string)

    tag_names = tags_string.split(",").collect{|s| s.strip.downcase}.uniq
    logger.debug "#{tag_names}\n\n\n\n\n\n"

    tag_names.each do |tag_name|
      #tag = Tag.find_or_initialize_by_name(tag_name)
      #tag.save
      tag = Tag.find_or_create_by_name(tag_name)

      logger.debug "#{tag}\n\n\n\n\n\n"

    end
 end 
```

“find_or_create ....”处的代码行不起作用，在控制台上它似乎工作，但最后代码带来了一个名称属性 nil。像这样：

```
 INSERT INTO "tags" ("created_at", "name", "tagable_id", "tagable_type", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 19 Oct 2012 01:04:31 UTC +00:00], ["name", nil], ["tagable_id", 19], ["tagable_type", "Product"], ["updated_at", Fri, 19 Oct 2012 01:04:31 UTC +00:00]] 
```

在该代码之前，我在控制台打印了我想要保存的“标签”的内容：

```
Tag Load (0.1ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = 'musica' LIMIT 1
  (0.0ms)  begin transaction
  (0.1ms)  commit transaction 
```

如何创建“tag_list”的每个标签？PS：我也试过“标签模型”的注释代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:18:39.747

根据我的理解，您正在展示`text field`将标签添加到任何`taggable`. 此文本字段可能包含标签列表（称为`tag_list`）。提交表单后，`taggable`它将与这些标签相关联。

如果是这种情况，你可以试试这个[**`acts_as_taggable`插件**](https://github.com/mbleigh/acts-as-taggable-on) ，它默认提供你想要`tag_list`的功能:) 具有丰富的选项。

一些参考链接

*   [https://stackoverflow.com/a/7702224/1160106](https://stackoverflow.com/a/7702224/1160106)
*   [堆栈溢出帖子...](https://stackoverflow.com/search?q=acts_as_taggable+%5Bruby-on-rails-3%5D)

如果我错过了您的任何要求，请告诉我。

# compiler-construction - 这个识别中缀表达式的 YACC 规范是否正确？

> ID：12947693
> 
> 赞同：0
> 
> 时间：2012-10-18T05:27:24.613
> 
> 标签：compiler-construction, yacc

再次修改。删除递归后，为中缀表达式编写代码：它还包含优先级检查，没有递归语法，没有开始非终端，还有一个错误消息。

```
%{
#include<stdio.h>
%}

%token ALPHA NUMBER PLUS MINUS MUL DIV LPAR RPAR

%%

expr : expr PLUS term     { printf("its an infix expression");  }
     | expr MINUS term    
     | term 
     ; 

term : term MUL factor
     | term DIV factor
     | factor
     ;

factor : LPAR expr RPAR 
       | NUMBER 
       | ALPHA
       ;
%%
main()
{
yyparse();
}

int yyerror (char *s)
{

    printf("Not an infix expression");
} 
```

现在可以了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:31:55.603

不，不是。除了所有冲突之外，它没有定义任何运算符优先级。Internet 上有大量正确的 LR 表达式语法示例。

*编辑：*一元减号进入缺失`primary`规则。从`factor`它通常是这样的：

```
factor: primary
    | primary '^' factor // exponentiation, note right-recursion for right-associativitity, or use %prec
    ;

primary: '(' expr ')'
    | '-' primary // unary minus; note recursion, to allow any number of them
    | NUMBER
    | IDENTIFIER
    ; 
```

# c# - 将列表绑定到 UserControl 属性

> ID：12947694
> 
> 赞同：3
> 
> 时间：2012-10-18T05:27:26.727
> 
> 标签：c#, xaml, data-binding, user-controls, windows-8

我在让我的用户控件绑定到 List<> 时遇到了一些麻烦。当我尝试执行以下操作时效果很好：

```
public string Map
{
    get { return (string)GetValue(MapProperty); }
    set
    {
        SetValue(MapProperty, value);
    }
}

public static readonly DependencyProperty MapProperty =
DependencyProperty.Register(
    "Map",
    typeof(string), 
    typeof(GamePane), 
    new PropertyMetadata(     
        "Unknown",            
        ChangeMap)
    ); 
```

但是，如果我尝试使用比字符串、int 或 float 等更多的属性，我会得到“成员'属性名称'无法识别或不可访问”。例子：

```
public List<string> Players
{
    get { return (List<string>)GetValue(PlayersProperty); }
    set
    {
        SetValue(PlayersProperty, value);
    }
}

public static readonly DependencyProperty PlayersProperty =
DependencyProperty.Register(
    "Players",   
    typeof(List<string>),
    typeof(GamePane),  
    new PropertyMetadata(     
        new List<string>(), 
        ChangePlayers)
    ); 
```

除了类型之外，代码完全相同。

我已经看到我可能需要使用 BindableList，但是，这对于 Windows 8 项目似乎不存在。

有人可以指出我正确的方向或告诉我另一种方法。

编辑：根据请求，我的列表视图的 XAML，我尝试将字符串列表绑定到：

```
<ListView x:Name="PlayerList" SelectionMode="None" ScrollViewer.HorizontalScrollMode="Disabled" ScrollViewer.VerticalScrollMode="Disabled" ItemsSource="{Binding Players}"
                  ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Margin="6,-1,0,0" IsHitTestVisible="False"> 
```

然后，在我的主视图中，我绘制了我的 GridView，它创建了我的绑定并且有异常：

```
<GridView
    x:Name="currentGames"
    AutomationProperties.AutomationId="ItemsGridView"
    AutomationProperties.Name="Items"
    TabIndex="1"
    Padding="12,0,12,0"
    ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
    SelectionMode="None"
    IsSwipeEnabled="false" Grid.Row="1" Margin="48,-20,0,0" Height="210" VerticalAlignment="Top" >
    <GridView.ItemTemplate>
        <DataTemplate>
            <local:GamePane Map="{Binding Map}" Time="{Binding TimeRemaining}" Players="{Binding Players}"/>
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

有趣的是，虽然此 XAML 破坏了 Visual Studio 和 Blend 的设计器，但代码仍将执行。不过，我的玩家不会出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:26:33.137

是的，它有效。

这是要绑定到它的 XAML：

```
<Grid Background="Black">
    <local:MyUserControl x:Name="MyControl" />
    <ListBox ItemsSource="{Binding MyList, ElementName=MyControl}" />
</Grid> 
```

这是用户控制代码：

```
public sealed partial class MyUserControl : UserControl
{
    public MyUserControl()
    {
        this.InitializeComponent();
    }

    public string[] MyList
    {
        get { return new string[] { "One", "Two", "Three" }; }
    }
} 
```

# java - uint8_t 和 int8_t 的 JNA 映射

> ID：12947702
> 
> 赞同：4
> 
> 时间：2012-10-18T05:28:21.883
> 
> 标签：java, c, jna

C 类型 uint8_t 和 int8_t 的正确 JNA 映射是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:17:25.690

Java 中唯一的 8 位整数数据类型是`byte`，因此您可以使用它。不幸的是，它是有符号的，所以`uint8_t`超过 127 的值在转换为 Java 时将被视为负数`byte`。这不是一个真正的问题，因为存储的位是相同的。

# python - 正则表达式标点符号'

> ID：12947707
> 
> 赞同：-1
> 
> 时间：2012-10-18T05:28:44.163
> 
> 标签：python, regex

我们有一个字符串：

```
application-label:'I'go Reader' 
```

我们应该（在 Python 中）编写什么正则表达式来匹配：

```
I'go Reader 
```

注意：我试过：

```
re.search(r"(?<=label\=\')[\d\w\s\' ]+?(?=\')", text) 
```

但它匹配字符串直到第一个'。如何匹配直到第二个'之前的子字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:34:58.530

只需使量词贪婪，以便它尝试找到最长的匹配：

```
re.search(r"(?<=label\=\')[\d\w\s\' ]+(?=\')", text)
#                                    ^^ 
```

这是否适合您取决于您​​的输入。

但是，如果这是完整的字符串或每个输入始终遵循模式`label:'content'`，我将在第一个冒号处拆分并删除引号：

```
content = text.split(':', 1)[1].strip("'") 
```

# java - 为什么 replaceFirst 和 replaceAll 给出不同的结果？

> ID：12947714
> 
> 赞同：9
> 
> 时间：2012-10-18T05:29:29.303
> 
> 标签：java, regex

以下代码将 str 设置为“testss”

```
String str = "test".replaceAll("(.*)$","$1s"); 
```

以下代码将其设置为“测试”

```
String str = "test".replaceFirst("(.*)$","$1s"); 
```

我原以为这两种操作都会产生相同的结果。有人可以解释为什么 replaceAll 在字符串末尾添加一个额外的 s 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:35:26.440

这是因为`"(.*)$"`从 中捕获两个字符串`"test"`，`"test"`以及空字符串 ("")。所以 replaceAll 将添加两个`"s"`.

# c# - Visual Studio 调试器工具提示信息

> ID：12947721
> 
> 赞同：1
> 
> 时间：2012-10-18T05:30:51.887
> 
> 标签：c#, visual-studio-2010

在 Visual Studio 中，我相信有一种方法可以定义在调试模式下将鼠标滑到代码中的特定变量（或位置）时要在工具提示上显示哪些信息。我不太记得它是什么，比如 [DebuggerInformation] 但我可能错了。

功能叫什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:14:55.010

您可以使用[DebuggerDisplay](http://msdn.microsoft.com/en-us/library/ms228992.aspx)来做到这一点。

# ios - iOS，未知进程，未知崩溃

> ID：12947730
> 
> 赞同：16
> 
> 时间：2012-10-18T05:31:15.373
> 
> 标签：ios, memory-leaks

我的用户一直在报告间歇性崩溃。我相信这是一个内存问题。我终于在设备上重现了它，我无法在模拟器中重现，但是，没有例外，没有低内存警告，iOS 也没有调用任何方法来退出应用程序。它只是退出并返回到主屏幕。甚至不会“终止”，而是停留在暂停的应用程序列表中。

有一个“未知”崩溃日志，但我不知道它是什么意思。从这个日志中可以得出什么意思吗？我的应用是名为 SRTS 的应用。rpages 值似乎可能过高，但我不确定。非常感谢解释此崩溃日志的任何帮助。

我正在使用 XCode 4.5.1 并构建到 iOS SDK 5.1。

```
Incident Identifier: 4695578C-4367-4BE1-860F-94FF8562ECAF
CrashReporter Key:   9de810f246c07ab4704bd4f440fe9a3d0cab9401
Hardware Model:      iPad2,1
OS Version:          iPhone OS 6.0 (10A403)
Kernel Version:      Darwin Kernel Version 13.0.0: Sun Aug 19 00:28:05 PDT 2012; root:xnu-2107.2.33~4/RELEASE_ARM_S5L8940X
Date:                2012-10-18 01:11:40 -0400
Time since snapshot: 103 ms

Free pages:        882
Active pages:      3028
Inactive pages:    1941
Throttled pages:   104533
Purgeable pages:   0
Wired pages:       17730
Largest process:   SRTS

Processes
     Name                    <UUID>                       rpages       recent_max       [reason]          (state)

      MobileMail <bff817c61ce33c85a43ea9a6c98c29f5>         1010             1010         [vm]         (resume) (continuous)
     MobilePhone <3fca241f2a193d0fb8264218d296ea41>          992              992         [vm]         (resume) (continuous)
             kbd <3e7136ddcefc3d77a01499db593466cd>          438              438         [vm]         (daemon)
            tccd <eb5ddcf533663f8d987d67cae6a4c4ea>          179              179         [vm]         (daemon)
            SRTS <66eed1e3358a33a4997bbf88dad284f2>        90334            90334         [vm]         (audio) (frontmost) (resume)
            ptpd <04a56fce67053c57a7979aeea8e5a7ea>          677              677                      (daemon)
       locationd <892cd1c9ffa43c99a82dba197be5f09e>          535              535                      (daemon)
   iaptransportd <f784f30dc09d32078d87b450e8113ef6>          287              287                      (daemon)
           wifid <9472b090746237998cdbb9b34f090d0c>          362              362                      (daemon)
    mediaserverd <80657170daca32c9b8f3a6b1faac43a2>          926              926                      (daemon)
         syslogd <cbef142fa0a839f0885afb693fb169c3>          158              158                      (daemon)
     SpringBoard <27372aae101f3bbc87804edc10314af3>         2031             2031                     
      backboardd <5037235f295b33eda98eb5c72c098858>         5629             5629                      (daemon)
        networkd <0032f46009f53a6c80973fe153d1a588>          206              206                      (daemon)
        BTServer <c92fbd7488e63be99ec9dbd05824f5e5>          347              347                      (daemon)
         configd <4245d73a9e96360399452cf6b8671844>          411              411                      (daemon)
   fairplayd.K93 <47f0ea63619d351db2ef1b21790e89b9>          178              178                      (daemon)
       fseventsd <996cc4ca03793184aea8d781b55bce08>          400              400                      (daemon)
         imagent <1e68080947be352590ce96b7a1d07b2f>          376              376                      (daemon)
   mDNSResponder <3e557693f3073697a58da6d27a827d97>          252              252                      (daemon)
       lockdownd <ba1358c7a8003f1b91af7d5f58dd5bbe>          295              295                      (daemon)
          powerd <2d2ffed5e69638aeba1b92ef124ed861>          197              197                      (daemon)
  UserEventAgent <6edfd8d8dba23187b05772dcdfc94f90>          509              509                      (daemon)
     debugserver <185719f06f1631d4922c652bdd4c8529>            0                0                      (daemon)
       gputoolsd <889065a15ba8372ca533e023c10bd776>            0                0                      (daemon)
       gputoolsd <889065a15ba8372ca533e023c10bd776>            0                0                      (daemon)
       gputoolsd <889065a15ba8372ca533e023c10bd776>            0                0                      (daemon)
springboardservi <ff6f64b3a21a39c9a1793321eefa5304>            0                0                      (daemon)
    syslog_relay <45e9844605d737a08368b5215bb54426>            0                0                      (daemon)
    syslog_relay <45e9844605d737a08368b5215bb54426>            0                0                      (daemon)
filecoordination <fbab576f37a63b56a1039153fc1aa7d8>          169              169                      (daemon)
notification_pro <845b7beebc8538ca9ceef731031983b7>          177              177                      (daemon)
       distnoted <a89af76ec8633ac2bbe99bc2b7964bb0>          177              177                      (daemon)
            apsd <94d8051dd5f5362f82d775bc279ae608>          370              370                      (daemon)
      aggregated <8c3c991dc4153bc38aee1e841864d088>           93               93                      (daemon)
         notifyd <51c0e03da8a93ac8a595442fcaac531f>          163              163                      (daemon)
     ReportCrash <8c32f231b2ed360bb151b2563bcaa363>          234              234                      (daemon)

**End** 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T20:02:49.037

我终于将其归结为内存泄漏。通过在内存较少的 iPad1 上运行，我得到了关于泄漏是什么的线索。iPad1 没有暂停该应用程序，而是给出了一个略有不同的崩溃日志，显示该应用程序已被驱逐。这证实了我这是一个内存问题。启用 Zombie 对象并在模拟器上使用模拟内存警告帮助我最终找到了泄漏的位置。因此，对于任何其他获得此类未知崩溃日志的人，我建议先查找内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:39:04.713

尝试启用僵尸对象（在 Xcode 产品菜单 -> 编辑方案 -> 从左侧选择调试 -> 在诊断选项卡上 -> 启用僵尸对象）并从 XCode 在设备上运行。这将为您提供有关该错误的更多描述。

# c - 将元素添加到C中的结构数组

> ID：12947731
> 
> 赞同：3
> 
> 时间：2012-10-18T05:31:18.577
> 
> 标签：c, arrays, struct

因此，对于加密类，我们正在使用 SRA 协议实现 Mental Poker。我们正在为 BIGNUM [http://www.openssl.org/docs/crypto/bn.html](http://www.openssl.org/docs/crypto/bn.html)使用 openSSL 库，在将加密卡添加到 BIGNUM 结构数组时遇到问题。

```
#include <openssl/bn.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

BIGNUM* encryptedDeck[52];
BIGNUM* bobHand[5];
BIGNUM* aliceHand[5];

int main(int argc, char* argv[]){
    int lcv = 0;
    BIGNUM *P,*Q,*N,*alpha,*alphaPrime,*beta,*betaPrime,*temp,*Pminus;
    BN_CTX *ctx = BN_CTX_new();
    P = BN_new(); //same for all BIGNUM pointers

    BN_generate_prime(P,512,1,NULL,NULL,NULL,NULL);
    BN_generate_prime(Q,512,1,NULL,NULL,NULL,NULL);
    BN_generate_prime(alpha,128,1,NULL,NULL,NULL,NULL); //Alice's key [ gcd(alpha,P) = 1 ]
    BN_generate_prime(beta,128,1,NULL,NULL,NULL,NULL);  //Bob's key. Same rule as alice's

    BN_one(temp);  //set temp to be a BIGNUM equivalent to integer 1
    BN_sub(Pminus,P,temp);

    BN_mul(N,P,Q,ctx);

    temp = BN_new();
    BIGNUM *encryptedCard = BN_new();
    for(lcv; lcv < 52; lcv++){
        BN_bin2bn(deck[lcv],strlen(deck[lcv]),temp);
        BN_mod_exp(encryptedCard,temp,beta,P,ctx);    //encrypt temp, store in encryptedCard

        printf("ec: %s\n\n",BN_bn2dec(encryptedCard));  //prints *correct numbers

        encryptedDeck[lcv] = encryptedCard;  //store cards in the array of encrypted cards
    }

    printf("00: %s\n\n",BN_bn2dec(encryptedDeck[0]));
    printf("01: %s\n\n",BN_bn2dec(encryptedDeck[1]));
    //...
    printf("40: %s\n\n",BN_bn2dec(encryptedDeck[40]));
} 
```

forloop 中的 print 语句打印 52 个不同的值（每张卡片 1 个。）

我打算将这些值中的每一个都简单地添加到数组 encryptedDeck，但是当我在退出循环后检查这些值时，它们都等同于第 52 张卡。所以由于某种原因，数组中的每个索引都被每张新卡覆盖？或者类似的奇怪的东西。

在处理结构数组时，我是否缺少一些明显的东西？我马上想到的唯一一件事是关于数组没有用足够的空间或其他东西初始化的问题。

我认为可以将 BIGNUM 值转换为 char* 并以这种方式将它们存储在数组中，但我试图避免这种情况，因为我不知道指针需要多大，甚至不知道它们的大小范围。就像是

```
char encryptedDeck[52][something ridiculous]; 
```

我省略了一些代码，但我相信这仍然应该编译（假设你有 openssl 库，并在编译时链接它）并为我没有初始化的所有其他 BIGNUM 指针填写 BN_new() 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:45:39.160

就在你的 for 循环之上：

```
BIGNUM *encryptedCard = BN_new(); 
```

你永远不会改变这指向的东西。您只需不断地将新数据放入同一张卡中，然后将该卡保存到 for 循环的当前插槽中。

我的猜测是将卡片移动到循环*内。*

```
for(lcv; lcv < 52; lcv++){
    BIGNUM *encryptedCard = BN_new();
    BN_bin2bn(deck[lcv],strlen(deck[lcv]),temp);
    BN_mod_exp(encryptedCard,temp,beta,P,ctx);
    printf("ec: %p: %s\n\n",encryptedCard, BN_bn2dec(encryptedCard));
    encryptedDeck[lcv] = encryptedCard;
} 
```

注意：我不使用这个加密库，所以我不能告诉你`temp`循环中是否需要相同的位置，但似乎你的问题可能出在哪里。

# mysql - 从一个表中只选择不同的（名称），其中 ID 在另一个表中使用？

> ID：12947738
> 
> 赞同：2
> 
> 时间：2012-10-18T05:31:52.250
> 
> 标签：mysql

我有一个名为`L1`3,000 条记录的表，其中有一个名为`town_id`.

`town_id`in`L1`是`towns`包含数百个城镇名称的第二个表中数据的整数 ID - 字段名称是`name`.

我需要从有记录的城镇表中获取所有不同的城镇名称，`L1`以便我只选择实际使用的城镇列表，而不是列出所有城镇。

谁能告诉我如何构造该查询，因为它使我难以忍受：)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:35:34.293

将一个表连接到另一个表的最快方法通常是连接。如果您正在编写查询，最好阅读并了解连接的实际工作方式，因为它是关系数据库的核心。加入这两个表后，您可以执行 GROUP BY 将一堆记录折叠在一起，这些记录都共享一个共同的字段值（如城镇名称）。所以你可以这样做：

```
select towns.name from towns inner join L1 on L1.town_id = towns.id group by towns.name 
```

但为了获得不同的值，人们通常选择使用“不同”运算符：

```
select distinct towns.name from towns inner join L1 on L1.town_id = towns.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:35:54.950

有几种写法。最简单的，也许是：

```
SELECT Name
  FROM Towns
 WHERE ID IN (SELECT Town_ID FROM L1) 
```

另一个是：

```
SELECT DISTINCT T.Name
  FROM Towns AS T
  JOIN L1 ON T.ID = L1.Town_ID; 
```

享受发明其他方式的乐趣......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T05:36:15.290

也许这会对您有所帮助：http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html) - 很确定您想要一个`INNER JOIN`.

# java - 使用 mysql 的 Android 登录表单

> ID：12947739
> 
> 赞同：0
> 
> 时间：2012-10-18T05:31:58.687
> 
> 标签：java, android, mysql, login, android-ksoap2

我开发了一个登录表单。

这是我的网络服务代码：

```
public class Login {
    public String authentication(String userName,String password){

    String retrievedUserName = "";
    String retrievedPassword = "";
    String status = "";
    try{

        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/androidlogin","root","chathura");
        PreparedStatement statement =  con.prepareStatement("SELECT * FROM user WHERE username = '"+userName+"'");
        ResultSet result = statement.executeQuery();

        while(result.next()){
            retrievedUserName = result.getString("username");
            retrievedPassword = result.getString("password");
        }

        if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)){
            status = "Success!";
        }

        else{
            status = "Login fail!!!";
        }

    }
    catch(Exception e){
        e.printStackTrace();
    }
    return status;
    }

} 
```

这是我的安卓代码：

```
try{
    androidHttpTransport.call(SOAP_ACTION, envelope);
    SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
    String status = response.toString();
    TextView result = (TextView) findViewById(R.id.tv_status);
    result.setText(response.toString());

    if(status.equals("Success!")){

        //   ADD  to save  and  read next time
        String strUserName = userName.getText().toString().trim();
        String strPassword = userPassword.getText().toString().trim();

        if (null == strUserName || strUserName.length() == 0){

            //  showToast("Enter Your Name");
            userName.setError( "username is required!" );
            isUserValidated = false;
        }
        if (null == strPassword || strPassword.length() == 0){

            //  showToast("Enter Your Password");
            isPasswordValidated = false;
            userPassword.setError( "password is required!" );
        } 
        if(isUserValidated && isPasswordValidated){

            Intent intent = new Intent(AndroidLoginExampleActivity.this,TabBarSimple.class);
            intent.putExtra("login",userName.getText().toString());
            startActivity(intent);           
        }
    }

    else{
        Intent i = new Intent(getApplicationContext(), AndroidLoginExampleActivity.class);
        startActivity(i);
    }
}
catch(Exception e){ 
    //
}

}
} 
```

**我目前的 o/p**是：

*   如果我输入正确的登录详细信息，它会显示“成功”消息，然后进入下一个活动

*   如果我输入错误的登录详细信息，它会显示“登录失败”消息。

**希望需要的o/p**是：

*   如果我输入正确的登录详细信息，它应该直接进入下一个活动并且不应该显示任何成功消息。

*   如果我输入了错误的登录详细信息，应该会显示“登录失败”消息。

请帮我解决一下这个。我该如何开发这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:10:02.270

正如您所提到的，您不想在应用程序中使用 toast 或警报对话框来显示登录失败消息，因此您可以使用 Textview 来显示消息，为此，您应该提及 textView 以及 Password EditText 字段，以及任何名字说，**PasswordMessage**。

现在，尝试使用以下代码，

```
TextView PasswordMessage = (TextView)findViewById(R.id.PasswordMessage);
if(isUserValidated && isPasswordValidated)
{
    Intent intent = new Intent(AndroidLoginExampleActivity.this,TabBarSimple.class);
    intent.putExtra("login",userName.getText().toString());
    startActivity(intent);
}
else
{
    PasswordMessage.setText("Login Failed, Please enter valid Username or Password");
} 
```

# java - JDK8存储库中的更改

> ID：12947742
> 
> 赞同：3
> 
> 时间：2012-10-18T05:32:07.210
> 
> 标签：java, version-control, mercurial, java-8

我想关注JDK8的发展，但我在[repo](http://hg.openjdk.java.net/jdk8/jdk8)中看到的充其量是奇怪的：

```
6 days ago  katleman    Added tag jdk8-b60 for changeset e07f499b9dcc default tip   changeset | manifest
7 days ago  katleman    Merge jdk8-b60  changeset | manifest 
```

大多数更改看起来像“为变更集 XXX 添加了标签 jdk8-b60”或“合并 XXX”，有一些条目看起来像实际的代码更改，但没有指向代码的链接。实际上，没有一次单击使我获得了任何有用的东西。

我对 Mercurial 一无所知，但我应该吗？只要点击 Github，我就可以到达某个地方......

那么我怎样才能了解 JDK8 中发生的事情呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T06:43:56.823

根据 Mercurial，标记和合并变更集通常没有任何实质性的代码更改。添加标签会更改`.hgtags`存储库中的本地文件并立即提交。*如果在合并过程*中实际更改了代码，例如当正在合并的文件发生冲突时，合并可能会发生大量代码更改。当前靠近存储库顶端的合并（[这个](http://hg.openjdk.java.net/jdk8/jdk8/rev/e07f499b9dcc)和[这个](http://hg.openjdk.java.net/jdk8/jdk8/rev/522dfac8ca4d)）实际上都只是在文件中发生的合并`.hgtags`，所以它们根本没有代码。

任何以“已添加标签”开头的内容都几乎可以保证只是对 的更改`.hgtags`，并且大多数合并也不会有任何实质性内容。

现在，*确实*有重大变化的提交是以数字开头的提交（例如[这个](http://hg.openjdk.java.net/jdk8/jdk8/rev/2ba6f4da4bf3)）。这些数字与错误数据库中的问题编号直接相关。例如，[我刚刚链接](http://hg.openjdk.java.net/jdk8/jdk8/rev/2ba6f4da4bf3)的那个以“7197849”开头，它与[此错误报告完全相关。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7197849).

几点说明：如果您想更普遍地跟踪进度，可以查看[此页面上](http://openjdk.java.net/projects/jdk8/milestones)为项目定义的里程碑。还有一些不错的入门教程，例如[Joel Spolsky 的这篇](http://hginit.com/)教程，可以教您一些 Mercurial 基础知识，例如合并及其含义。

**所以...**

话虽如此，看起来您实际链接到的存储库可能不是您要查找的存储库。`jdk8`除了您链接的存储库之外，实际上还有其他几个以前缀为前缀的存储库。这里有一些有趣的地方可以寻找存储库和代码：

*   [顶级存储库索引](http://hg.openjdk.java.net/)- 列出 OpenJDK 网站上通过 Mercurial 管理的所有存储库。只需查找以 开头的那些`jdk8`，其中包括`lambda`和`nio`。
*   [热点](http://hg.openjdk.java.net/jdk8/jdk8/hotspot/summary)- 实际的 JVM 更改。这些是对 Hotspot JVM 的本机 C/C++ 代码所做的更改。
*   [swing/jdk](http://hg.openjdk.java.net/jdk8/swing/jdk/) - 对 Swing 的 .java 文件的更改，包括共享代码和不同平台。

当然，还有其他的，但为自己探索是一半的乐趣（或战斗，取决于你如何看待它）。另请注意，并非所有 JDK8 的东西都属于`jdk8`repo。例如，[Lambda 项目](http://openjdk.java.net/projects/lambda/)存储库以`lambda`.

最后一件事：如果您想浏览存储库本身，请使用顶部导航栏上的“清单”链接。它将带您进入某种资源管理器页面。如果您愿意，您也可以随时将源代码下载为 zip。它都是开源的，因此可以随时下载。

希望有帮助。狩猎愉快:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:36:54.717

也许这个答案有点矫枉过正，但我​​希望你至少觉得它有用。

我通常下载代码并自己构建。有一些工具可以查看实际变化是什么（例如 TortoiseHG）。这就是我所做的：

## 如何构建 JDK 8

以下指南介绍了如何使用[Ubuntu Linux 12.04 (Precise)构建](http://www.ubuntu.com/)[Open JDK 8 Developer Lambda 项目](http://openjdk.java.net/projects/lambda/)。如果您需要有关构建过程如何工作的更多详细信息，请参阅[新构建系统的自述文件](http://openjdk.java.net/projects/build-infra/guide.html)。对于其他 JDK 项目，例如主 JDK 8 森林或 Jigsaw 森林，该过程几乎相同。

## 如何构建第一次

安装 Ubuntu 后，您必须安装以下附加软件包：

```
sudo apt-get install build-essential
sudo apt-get install mercurial
sudo apt-get install tortoisehg
sudo apt-get install awk
sudo apt-get install m4
sudo apt-get install ccache
sudo apt-get install openjdk-7-jdk
sudo apt-get install ant
sudo apt-get install vim
sudo apt-get install libX11-dev 
sudo apt-get install libxext-dev 
sudo apt-get install libxrender-dev 
sudo apt-get install libxtst-dev
sudo apt-get install libcups2-dev
sudo apt-get install libfreetype6-dev
sudo apt-get install libasound2-dev 
```

使用 Mercurial 下载 Open JDK8 Lambda 项目源代码

```
hg clone http://hg.openjdk.java.net/lambda/lambda 
```

其他项目森林是：

```
http://hg.openjdk.java.net/jdk8/jdk8
http://hg.openjdk.java.net/jigsaw/jigsaw 
```

尽管 Jigsaw 已推迟到 JDK 9。

前面的命令，实际上只是下载了项目林的根目录。您仍然需要为其余的子项目（即 corba、jaxp、jaxw、langtools、jdk 和热点）下载 mercurial 存储库。您可以通过运行`get_source.sh`位于您刚刚签出的项目的根文件夹中的命令来执行此操作。

```
cd ~/lambda
sh ./get_source 
```

所有其他项目存储库的下载可能需要一段时间，所以请耐心等待。

下载所有项目存储库后，您就可以配置构建了。假设您仍然位于 lambda 目录中

```
cd commom/makefiles
sh ../autoconf/configure 
```

此命令:`configure`有很多选项，您可以设置这些选项来自定义 JDK 的构建方式。您可以通过运行来查看这些选项的文档`configure --help`。但是，在没有任何参数的情况下运行命令就足够了。

虽然您仍然位于 lambda/common/makefiles，但现在您已准备好构建 JDK 8。

```
make images 
```

该`make`命令还有多个选项来构建 JDK。如果您键入`make help`，您将看到它们全部。

根据您计算机上的资源量（内核和内存），此编译过程可能需要一些时间。我在具有单核和 1GB 内存的虚拟机中做过一次，它花了一整夜。我现在在具有 4 核和 4 GB 内存的 Intel Core i7 中执行此操作，并且需要不到 1 小时。无论如何，一旦编译准备好，JDK 映像位于：

```
~/lambda/build/linux-x64-normal-server-release/images/j2sdk-image 
```

该目录`linux-x64-normal-server-release`在您的计算机上可能具有不同的名称，具体取决于其体系结构。

一切顺利，您现在可以使用此构建版本来测试 JDK 8 的新功能。

**如何获取更新和重建**

随着 OpenJDK 工作的进展，您可能希望不时获取最新的源代码并重新构建整个东西，对吧？

要更新到最新的源代码，只需`get_source.sh`再次运行命令：

```
cd lambda
sh ./get_source 
```

您可能不需要`configure`再次运行该命令，除非您的硬件架构（即更多内核、更多内存）或您安装的软件（即安装的 jdk）发生了变化。但是，如果您想确定并重新运行它，请从清理并完全清除之前的构建开始：

```
make dist-clean 
```

该命令将删除之前的配置并构建。

然后你可以再次配置：

```
cd commom/makefiles
sh ../autoconf/configure 
```

最后，再次构建系统：

```
make images 
```

## 如何知道发生了什么变化

显然，一旦您获得了最新版本的代码，您可能想知道自上次构建以来发生了什么变化。任何子项目（即热点、langtools 等）中的情况都可能发生了变化。但是，JDK 子项目中正在积极开发 JDK API。

由于项目使用 Mercurial，您可以使用 TortoiseHG 与您的存储库进行交互并查看发生了什么变化。只需找到项目目录之一并运行 TortoiseHG 命令：

```
cd ~/lambda/jdk
thg 
```

这将启动 TortoiseHG GUI 工具，您可以在其中轻松查看存储库中所有更改的日志以及在您获得的最后一次更新中准确修改的内容，在上面的 jdk 子项目示例中。您可以通过在每个子文件夹中调用 thg 命令来查看编译器在 langtools 子项目中遭受的变化，并查看 jvm 在热点子项目中遭受的变化。

## 如何创建 Java 文档

尽管该`configure`命令带有一个名为的选项，该选项`--enable-docs`应该在构建期间自动生成 Java 文档，但截至今天，该标志似乎没有做任何事情。因此，您可以使用以下命令生成 javadocs：

```
~/lambda/build/linux-x64-normal-server-release/images/j2sdk-image/bin/javadoc \
-d ~/lambda/build/linux-x64-normal-server-release/images/j2sdk-image/docs \
-use \
-author \
-version \
-linksource \
-splitIndex \
-windowtitle 'Java 2 Platform 8.0 API Specification' \
-doctitle 'Java<sup><font size="-2">TM</font></sup> 2 Platform 8.0 API Specification' \
-header '<b>Java 2 Platform </b><br><font size="-1">8.0</font>' \
-group "Core Packages" "java.\*" \
-overview ~/lambda/jdk/src/share/classes/overview-bundled.html \
-sourcepath ~/lambda/jdk/src/share/classes \
java.lang java.util java.util.functions java.util.concurrent \
java.lang.annotation java.lang.reflect java.lang.ref 
```

请注意，JDK 的源代码位于 ~/lambda/jdk/src/share/classes/

此处指定的列表包是执行大部分 JDK 8 工作的包。添加您认为必要的任何其他软件包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T01:05:57.383

您正在查看的存储库是 JDK8 源代码树的“根”或“顶级”存储库[。](http://hg.openjdk.java.net/jdk8/jdk8)它主要包含 makefile 和其他配置文件，这就是为什么对变更集历史没有太大兴趣的原因。有包含有趣源代码的嵌套存储库。比如Hotspot JVM在[hotspot](http://hg.openjdk.java.net/jdk8/jdk8/hotspot/)，类库在[jdk](http://hg.openjdk.java.net/jdk8/jdk8/jdk/)，javac编译器等工具在[langtools](http://hg.openjdk.java.net/jdk8/jdk8/langtools/)。

[OpenJDK Developer's Guide](http://openjdk.java.net/guide/repositories.html)中详细描述了这种安排。

# sql-server-2005 - 在 SQL Server 中检索数据列

> ID：12947743
> 
> 赞同：1
> 
> 时间：2012-10-18T05:32:08.713
> 
> 标签：sql-server-2005

我有一个问题，我需要将学生的学科名称（例如英语、科学……）显示为列，并在每个学科下显示其各自的分数。我查询数据库并将这些值作为数据集中的行而不是列。我应该如何查询数据库？

我的查询结果

```
student name | marks  | Subectname
------------------------------------
raghuram        78         english
raghuram        34         physics
raghuram        76         chemistry

 ................              ...         .......... 
```

报告中要求的结果

```
studentname | english | Maths | physics | ......
----------------------------------------------------
raghuram        78       66        32 
```

这是我的查询

```
SELECT
    st.FirstName + ' ' + st.LastName as StudentName,
    s.Subject_Name, se.Mark 
FROM
    dbo.FEE_STUDENT_EXAM se
INNER JOIN 
    dbo.FEE_STUDENT_GRADE sg ON sg.Student_ID=se.Student_ID
INNER JOIN 
    FEE_STUDENT st ON st.Student_ID=sg.Student_ID
INNER JOIN 
    dbo.EMP_SUBJECT s ON s.SubjectID=se.Subject_ID
WHERE
    sg.Grade_ID = @GradeId 
    AND sg.Division_ID = @DivId 
    AND se.Subject_ID IN (SELECT d.SubjectId 
                          FROM dbo.FEE_STUDENT_EXAM_SCHEDULED d 
                          INNER JOIN dbo.FEE_STUDENT_EXAM_SCHEDULEH h ON h.ExamScheduleID = d.ExamScheduleID 
                          WHERE h.Grade_Id = @GradeId AND h.Division_ID = @DivId 
                            AND YEAR(CAST(d.TestDate AS DATETIME)) = @Year
                            AND MONTH(CAST(d.TestDate AS DATETIME)) = @Month) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:48:46.740

添加`GROUP BY`到您的查询和`max(case...)`您需要的每个主题：

```
 Select st.FirstName+' '+st.LastName as
           StudentName,

          max(case when s.Subject_Name = 'english' then se.Mark else 0 end) as english,     
          max(case when s.Subject_Name = 'Maths' then se.Mark else 0 end) as Maths,
          max(case when s.Subject_Name = 'physics' then se.Mark else 0 end) as physics,
.........

     from   dbo.FEE_STUDENT_EXAM se
                   inner join dbo.FEE_STUDENT_GRADE sg on sg.Student_ID=se.Student_ID
                   inner join FEE_STUDENT st on st.Student_ID=sg.Student_ID
                   inner join dbo.EMP_SUBJECT s on s.SubjectID=se.Subject_ID
                   where sg.Grade_ID=@GradeId and sg.Division_ID=@DivId and
                   se.Subject_ID in(Select  d.SubjectId from dbo.FEE_STUDENT_EXAM_SCHEDULED d inner join 
                   dbo.FEE_STUDENT_EXAM_SCHEDULEH h on h.ExamScheduleID=d.ExamScheduleID where 
                   h.Grade_Id=@GradeId and h.Division_ID=@DivId and year(cast (d.TestDate as datetime))=@Year
                   and month(cast (d.TestDate as datetime))=@Month)

               Group by se.Student_ID 
```

# html - 引号和英镑符号显示为问号

> ID：12947747
> 
> 赞同：1
> 
> 时间：2012-10-18T05:32:33.117
> 
> 标签：html, utf-8

我正在开发一个获取一些 RSS 提要并显示它们的网站。每个提要来自不同的站点。

其中 3 个站点使用 UTF-8 和一个 iso-8859-1，但是其中两个站点不能正确显示引号和井号。iso-8859-1 站点显示正确，其中一个 UTF-8 可以，但其他 UTF-8 则不能。

我已在我的 head 部分将字符集定义为 UTF-8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:37:23.813

您可以使用 htmlentities 来显示这种类型的字符，例如`&pound;`，

查看此链接[http://www.ascii.cl/htmlcodes.htm](http://www.ascii.cl/htmlcodes.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:40:21.947

事实证明，解决方案在于我用于 RSS 的解析器，`MagpieRSS`它不能很好地处理像“£”这样的额外字符。

解决方案是切换到`SimplePie RSS`

# xml - 如何在 XML 输出中显示属性名称而不是“项目”

> ID：12947749
> 
> 赞同：0
> 
> 时间：2012-10-18T05:32:41.223
> 
> 标签：xml, web-services, wsdl

我正在编写一个 WSDL 文件并且它正在工作。但是，输出看起来并不完全是我喜欢看到的。所以，我定义了这样的输出消息：

```
<message name="serviceResponse">
  <part name="code" type="xsd:string"/>
  <part name="description" type="xsd:string"/>
  <part name="results" element="tns:myProperty"/>
</message> 
```

在 <types> 标记中，我有：

```
<xsd:element name="myProperty">
  <xsd:complexType>
    <xsd:sequence>
      <xsd:element name="name" type="xsd:string"/>
      <xsd:element name="description" type="xsd:string"/>
      <xsd:element name="id" type="xsd:int"/>
      <xsd:element name="date" type="xsd:date"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element> 
```

作为回应，我得到：

```
<SOAP-ENV:serviceResponse>
  <code xsi:type="xsd:string">001</code>
  <description xsi:type="xsd:string">Successful</description>
  <results SOAP-ENC:arrayType="SOAP-ENC:Array[2]" xsi:type="SOAP-ENC:Array">
    <item SOAP-ENC:arrayType="xsd:ur-type[7]" xsi:type="SOAP-ENC:Array">
      <item xsi:type="xsd:string">John</item>
      <item xsi:type="xsd:string">Director</item>
      <item xsi:type="xsd:int">21</item>
      <item xsi:type="xsd:string">2012-10-16</item>
    </item>
    <item SOAP-ENC:arrayType="xsd:ur-type[7]" xsi:type="SOAP-ENC:Array">
      <item xsi:type="xsd:string">Smith</item>
      <item xsi:type="xsd:string">Programmer</item>
      <item xsi:type="xsd:int">88</item>
      <item xsi:type="xsd:string">2012-10-18</item>
    </item>
  </results>
</SOAP-ENV:serviceResponse></SOAP-ENV:Body> 
```

我希望在“结果”标签中得到类似以下的内容，而不是一堆“项目”：

```
<myProperty SOAP-ENC:arrayType="xsd:ur-type[7]" xsi:type="SOAP-ENC:Array">
  <name xsi:type="xsd:string">John</name>
  <description xsi:type="xsd:string">Director</description>
  <id xsi:type="xsd:int">21</id>
  <date xsi:type="xsd:string">2012-10-16</date>
</myProperty>
<myProperty SOAP-ENC:arrayType="xsd:ur-type[7]" xsi:type="SOAP-ENC:Array">
  <name xsi:type="xsd:string">Smith</name>
  <description xsi:type="xsd:string">Programmer</description>
  <id xsi:type="xsd:int">88</id>
  <date xsi:type="xsd:string">2012-10-18</date>
</myProperty> 
```

任何人都可以阐明一下吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:40:30.660

我通过查看另一篇文章解决了这个问题：[复杂类型的 WSDL 列表 HOWTO-定义，从服务返回？](https://stackoverflow.com/questions/3229941/wsdl-list-of-complextype-howto-define-return-from-a-service)

不需要 DTD 定义。[无论如何](https://stackoverflow.com/users/1726532/so)都要感谢。

我所做的略有不同。我没有使用名为“myProperty”的元素，而是直接使用名称“myProperty”定义了一个 complexType。它刚刚奏效。

```
<xsd:complexType name="myProperty">
    <xsd:sequence>
        <xsd:element name="name" type="xsd:string"/>
        <xsd:element name="description" type="xsd:string"/>
        <xsd:element name="id" type="xsd:int"/>
        <xsd:element name="date" type="xsd:date"/>
    </xsd:sequence>
</xsd:complexType>

<xsd:element name="serviceResponse">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element maxOccurs="unbounded" minOccurs="0" name="myResult" nillable="true" type="tns:myProperty"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

输出正是我所期望的：

```
<myProperty xsi:type="ns1:myProperty">
    <name xsi:type="xsd:string">Smith</name>
    <description xsi:type="xsd:string">Programmer</description>
    <id xsi:type="xsd:int">88</id>
    <date xsi:type="xsd:date">2012-10-18</date>
</myProperty> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:31:19.113

为您的 myProperty 标记正确定义 DTD。

像：

```
<!ELEMENT myProperty (name,description,id,date)>
<!ELEMENT name(#PCDATA)>
<!ELEMENT description(#PCDATA)>
<!ELEMENT id(#PCDATA)>
<!ELEMENT date(#PCDATA)> 
```

# c# - 将 C++ 对象传递给 C#

> ID：12947756
> 
> 赞同：4
> 
> 时间：2012-10-18T05:33:39.223
> 
> 标签：c#, c++, c++-cli

我有一个 C# 应用程序，它从 C++ 应用程序接收序列化数据作为文本（数据是使用 BOOST 库在 C++ 中序列化的）现在序列化数据实际上是一个对象，我需要将其转换为类似的 .Net 对象。为了为了实现这一点，我被告知可以将 C++/CLI 组件编写为 dll，它可以反序列化文本数据（使用用于序列化它的同一库）并将其传递回 C# 应用程序。我没有 C++/CLI 编程经验，但我在 C++ 编程方面没有任何问题。但我不认为 C++/CLI 很难掌握。我的问题是我没有得到关于如何创建 C++/CLI 应用程序将对象传递回 C# 的部分？任何提示、教程、链接将不胜感激

编辑正在发送的对象在 C++ 中是这样的

```
class person 
{ 
public: 
    person() 
    { 
    } 

    person(int age) : age_(age) 
    { 
    } 

    int age() const 
    { 
        return age_; 
    } 

private: 

    friend class boost::serialization::access; 

    template <typename Archive> 
    void serialize(Archive &ar, const unsigned int version) 
    { 
        ar & age_; 
    } 

    int age_; 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:03:19.253

您应该阅读命名空间 System.Runtime.InteropServices.Marshal

这是一篇关于如何将二进制数据 - 结构编组为 c# 结构的优秀文章。 [http://www.codeproject.com/Articles/66243/Marshaling-with-C-Chapter-3-Marshaling-Compound-Ty](http://www.codeproject.com/Articles/66243/Marshaling-with-C-Chapter-3-Marshaling-Compound-Ty)

这是类型参考 - [http://www.codeproject.com/Articles/66244/Marshaling-with-C-Chapter-2-Marshaling-Simple-Type](http://www.codeproject.com/Articles/66244/Marshaling-with-C-Chapter-2-Marshaling-Simple-Type)

它称为编组，您可以使用 C# 读取结构或复杂类型中的二进制或文本数据。

您应该在这里考虑的几件事是结构的打包和对齐。谷歌搜索这些术语将产生非常有用的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:43:49.863

我可能是错的，但 XML 的全部意义不在于它与平台和语言无关吗？只要您接收到的 C# 类镜像 XML 文件中的数据结构（即它有一个 int age_ 变量），使用 C# 中的普通 XML 文件解析器对其进行反序列化应该不会有任何问题。XML 文件是由 C++ 应用程序编写的这一事实并不比您手动编写更重要。

# ssrs-2008 - ssrs sql server service pack 2 2008 导致查询错误

> ID：12947758
> 
> 赞同：0
> 
> 时间：2012-10-18T05:33:54.963
> 
> 标签：ssrs-2008, ssas, mdx

我有 sql server 2008 服务包 1 64 位。我在查询设计器中使用此查询在 ssrs 中报告：

```
 SELECT NON EMPTY { [Measures].[Sum_AvgTime_WaitDist], [Measures].[Sum_AvgTime_WaitConfirm], [Measures].[TheDistribution_Count], [Measures].[Void_Dist_Price], [Measures].[Void_Dist_Count], [Measures].[Sum_AvgTime_Dist], [Measures].[Sale_Estimate_Price], [Measures].[Sum_AvgTime_Settle], [Measures].[Sum_AvgTime_Confirm], [Measures].[TheDistribution_Price], [Measures].[Sum_AvgTime_Delivered], [Measures].[Sale Price], [Measures].[Ret Dist Pure Price], [Measures].[Sale Count], [Measures].[Transfer To Next Month From Month Except Last Day], [Measures].[Transfer To Next Month], [Measures].[Order Count Last Day Order], [Measures].[Void_Sale_Price], [Measures].[Void_Sale_Count], [Measures].[Sale Price LD], [Measures].[Order Count Last Day Exit Dist], [Measures].[Exit Price LD], [Measures].[Transfer To Next Month From Month Last Day], [Measures].[BeenRejected_Count], [Measures].[BeenDelivered_NotSettled_Price], [Measures].[BeenRejected_Price], [Measures].[DuringTheVerification_Count], [Measures].[Convert_Price], [Measures].[Return Price], [Measures].[Sale_Estimate_Count], [Measures].[AreDistributed_Count], [Measures].[BeenDelivered_NotSettled_Count], [Measures].[AreDistributed_Price], [Measures].[FullBack_Price], [Measures].[FullBack_Count], [Measures].[Less_Price], [Measures].[RetDist_Pure_Price], [Measures].[RetDist_Pure_Count], [Measures].[FactorSettled_Count], [Measures].[DuringTheVerification_Price], [Measures].[FactorSettled_Price], [Measures].[ForwardPlanning_Price], [Measures].[ForwardPlanning_Count] }
  ON COLUMNS, 
  NON EMPTY {

  {[Dim Sale Office].[Zone Key].[Zone Key].ALLMEMBERS }* 
  {[Dim Sale Office].[Office Key].[All]} * 
  {[Dim Dist Branch].[Dist Branch Key].[All]}, 

  {[Dim Sale Office].[Zone Key].[All]} * 
  {[Dim Sale Office].[Office Key].[All]} * 
  {[Dim Dist Branch].[Dist Branch Key].[All]}, 

  {[Dim Sale Office].[Zone Key].[Zone Key].ALLMEMBERS} * 
  {[Dim Sale Office].[Office Key].[Office Key].ALLMEMBERS} * 
  {[Dim Dist Branch].[Dist Branch Key].[All]}, 

  {[Dim Sale Office].[Zone Key].[All]} * 
  {[Dim Sale Office].[Office Key].[All]} * 
  {[Dim Dist Branch].[Dist Branch Key].[Dist Branch Key].ALLMEMBERS}, 

  {[Dim Sale Office].[Zone Key].[Zone Key].ALLMEMBERS} * 
  {[Dim Sale Office].[Office Key].[Office Key].ALLMEMBERS} * 
  {[Dim Dist Branch].[Dist Branch Key].[Dist Branch Key].ALLMEMBERS }

   } DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME ON ROWS 
   FROM ( SELECT ( STRTOSET(@DimSaleOfficeZoneKey, CONSTRAINED) ) ON COLUMNS 
   FROM ( SELECT ( STRTOSET(@DimDateDay, CONSTRAINED) ) ON COLUMNS 
   FROM ( SELECT ( STRTOSET(@DimDateMonth, CONSTRAINED) ) ON COLUMNS FROM ( SELECT ( STRTOSET(@DimDateYear, CONSTRAINED) ) ON COLUMNS FROM [Cube_SaleEstimateDashboard])))) WHERE ( IIF( STRTOSET(@DimDateYear, CONSTRAINED).Count = 1, STRTOSET(@DimDateYear, CONSTRAINED), 
   [Dim Date].[Year].currentmember ), 
   IIF( STRTOSET(@DimDateMonth, CONSTRAINED).Count = 1, STRTOSET(@DimDateMonth, CONSTRAINED), 
   [Dim Date].[Month].currentmember ), 
   IIF( STRTOSET(@DimDateDay, CONSTRAINED).Count = 1, STRTOSET(@DimDateDay, CONSTRAINED), 
   [Dim Date].[Day].currentmember ) ) CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING, FONT_NAME, FONT_SIZE, FONT_FLAGS 
```

如您所见，此查询有 4 个参数（年、月、日、区），它对我来说很好用。

但在我安装 Service Pack 2 2008 之后

如果我选择一个区域作为参数，它会给我错误：

> “MDx 函数失败，因为‘区域键’属性的坐标包含一个集合”

它适用于（全部或对于参数区域的多选值。但是如果我为参数选择仅一个区域它会给我错误为什么....？如果我从轴中删除非空，还有一件事错误消息消失了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T00:07:26.570

尝试`CONSTRAINED`从所有`STRTOSET`公式中删除 。当我将 SSRS 解决方案升级到 VS2012 时，我遇到了类似的问题。我认为这与收紧针对不合格成员名称的证券有关。

# .net - XSLT 1.0 Meunchian 分组

> ID：12947762
> 
> 赞同：1
> 
> 时间：2012-10-18T05:34:22.223
> 
> 标签：.net, xslt, xslt-1.0

我发现 XSLT 1.0 Meunchian 分组非常复杂。如果您可以指导我使用以下内容`xsl:key`，那就太好了。实际的 XML 很大，我只使用了其中的一部分来表示结构。

如果您需要任何其他说明，请告诉我。

我的要求是以表格格式显示以下示例 XML，首先按 itemtype 名称分组，然后按客户名称分组。请注意，该节点`Details`始终只有一个节点`Detail`

**期望的输出**

**ItemType 客户名称 价格**

书约翰史密斯 7

DVD 约翰史密斯 45

DVD Jane Doe 44

**输入：**

```
<Item> 
   <SomeRandomField>abc</SomeRandomField>  
  <Details>
    <Detail>
        <Price>7.00</Price
        <CustomerName>John Smith</CustomerName>
     </Detail>
   </Details>
   <ItemType>   
      <Key>1</Key>
      <Name>Book</Name>
   </ItemType>
</Item>

<Item> 
   <SomeRandomField>mno</SomeRandomField>  
  <Details>
    <Detail>
        <Price>45.00</Price
        <CustomerName>John Smith</CustomerName>
     </Detail>
   </Details>
   <ItemType>   
      <Key>2</Key>
      <Name>DVD</Name>
   </ItemType>
</Item> 
<Item> 
   <SomeRandomField>xyz</SomeRandomField>  
  <Details>
    <Detail>
        <Price>44.00</Price
        <CustomerName>Jane Doe</CustomerName>
     </Detail>
   </Details>
   <ItemType>   
      <Key>2</Key>
      <Name>DVD</Name>
   </ItemType>
</Item> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:22:56.723

您可以使用以下 xslt 来转换您的 xml 以获得所需的输出，并且我通过添加`<Items>`根节点修改了您的 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:output method="html" indent="yes"/>

  <xsl:template match="Items">
    <table>
      <tr>
        <td>
          <b>ItemType</b>
        </td>
        <td>
          <b>Customer Name</b>
        </td>
        <td>
          <b>Price</b>
        </td>
      </tr>
      <xsl:for-each select="Item">
       <xsl:sort select="ItemType/Name" order="ascending"/>
        <tr>
          <td>
            <xsl:value-of select="ItemType/Name"/>
          </td>
          <td>
            <xsl:value-of select="Details/Detail/CustomerName"/>
          </td>
          <td>
            <xsl:value-of select="Details/Detail/Price"/>
          </td>
        </tr>
      </xsl:for-each>
    </table>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:44:16.327

我相信以下达到了预期的结果。该键用于按 ItemType 进行分组，如果需要，您可以包含一个排序来对客户名称进行分组。

XML

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
    <Item> 
        <SomeRandomField>abc</SomeRandomField>  
        <Details>
            <Detail>
                <Price>7.00</Price>
                <CustomerName>John Smith</CustomerName>
            </Detail>
        </Details>
        <ItemType>   
            <Key>1</Key>
            <Name>Book</Name>
        </ItemType>
    </Item>

    <Item> 
        <SomeRandomField>mno</SomeRandomField>  
        <Details>
            <Detail>
                <Price>45.00</Price>
                <CustomerName>John Smith</CustomerName>
            </Detail>
        </Details>
        <ItemType>   
            <Key>2</Key>
            <Name>DVD</Name>
        </ItemType>
    </Item> 
    <Item> 
        <SomeRandomField>xyz</SomeRandomField>  
        <Details>
            <Detail>
                <Price>44.00</Price>
                <CustomerName>Jane Doe</CustomerName>
            </Detail>
        </Details>
        <ItemType>   
            <Key>2</Key>
            <Name>DVD</Name>
        </ItemType>
    </Item> 
</Items> 
```

XSL

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:key name="itemname" match="/Items/Item/ItemType" use="Name"/>
    <xsl:key name="custname" match="/Items/Item/Details/Detail" use="CustomerName"/>
    <xsl:output method="html" indent="yes"/>
    <xsl:template match="/">
        <html>
            <body>
                <xsl:for-each select="/Items/Item/ItemType
                    [generate-id(.) = generate-id(key('itemname', Name))]
                    ">
                    <xsl:variable name="local_item" select="Name"/>
                    <xsl:for-each select="/Items/Item">
                        <xsl:if test="ItemType/Name = $local_item">
                            <p><xsl:value-of select="$local_item"/>-
                                <xsl:value-of select="Details/Detail/CustomerName"/>-
                                <xsl:value-of select="Details/Detail/Price"/></p>
                        </xsl:if>
                    </xsl:for-each>
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

HTML

```
<html>
   <body>
      <p>Book-John Smith-7.00</p>
      <p>DVD-John Smith-45.00</p>
      <p>DVD-Jane Doe-44.00</p>
   </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:48:18.353

除了我上面的回答，我相信对于这个例子，一个简单的排序也足够了。

```
<?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
        <xsl:key name="itemname" match="/Items/Item/ItemType" use="Name"/>
        <xsl:key name="custname" match="/Items/Item/Details/Detail" use="CustomerName"/>
        <xsl:output method="html" indent="yes"/>
        <xsl:template match="/">
            <html>
                <body>
                    <xsl:for-each select="/Items/Item">
                        <xsl:sort select="ItemType/Name"/>
                        <xsl:sort select="Details/Detail/CustomerName"/>
                        <xsl:value-of select="."/><br/>
                    </xsl:for-each>
                </body>
            </html>
        </xsl:template>
    </xsl:stylesheet> 
```

# html - 如何为没有子元素的 body 标签应用渐变？

> ID：12947763
> 
> 赞同：0
> 
> 时间：2012-10-18T05:34:26.277
> 
> 标签：html, css

我怀疑我对没有元素的主体应用了线性渐变它不起作用。但是，我在 body 标记中添加任何元素都会起作用。

**HTML 代码：**

```
<html>
<head>
     <style>
          body{
           background:-moz-linear-gradient(top,rgba(0,0,0,0.3),rgba(0,0,0,0.3));
           background:-webkit-linear-gradient(top,rgba(0,0,0,0.3),rgba(0,0,0,0.3));
         }
    </style>
</head>
<body>
</body> 
```

**小提琴链接**

[http://jsfiddle.net/kykPk/2/](http://jsfiddle.net/kykPk/2/)

为什么不适用于空体标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:38:49.050

这是因为一个空的身体没有尺寸（除非你用 css 调整它的大小），所以你将无法看到它的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:39:18.583

这是因为你的`body`标签里面没有元素所以这样做：[**我的小提琴**](http://jsfiddle.net/kykPk/9/)

CSS

```
html, body {
   height: 100%;
} 
```

# php - 通过Java连接Android PHP

> ID：12947772
> 
> 赞同：1
> 
> 时间：2012-10-18T05:35:40.987
> 
> 标签：php, android, mysql

我是 android 的初学者。我已经为离开模块构建了一个登录应用程序。为了通过 PHP 将它与 mySql 连接起来。我从网站上尝试了这段代码。

```
package com.example.axdroid;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Axdroid extends Activity {
Button b;
EditText et,pass;
TextView tv;
HttpPost httppost;
StringBuffer buffer;
HttpResponse response;
HttpClient httpclient;
List<NameValuePair> nameValuePairs;
ProgressDialog dialog = null;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_axdroid);

    b = (Button)findViewById(R.id.Button01); 
    et = (EditText)findViewById(R.id.username);
    pass= (EditText)findViewById(R.id.password);
    tv = (TextView)findViewById(R.id.tv);

    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            dialog = ProgressDialog.show(Axdroid.this, "",
                   "Validating user...", true);
            Intent i=new Intent(getApplicationContext(),Userpage.class);
             startActivity(i);                
             new Thread(new Runnable() {
                    public void run() {
                        login();                         
                    }
                  }).start();         

        }
        });}
void login(){
    try{           

        httpclient=new DefaultHttpClient();
        httppost= new HttpPost("http://192.168.1.222/AndroidLeave/check.php");
        //add your data
        nameValuePairs = new ArrayList<NameValuePair>(2);
        // Always use the same variable name for posting i.e the android side variable name and php side variable name should be similar,
        nameValuePairs.add(new BasicNameValuePair("username",et.getText().toString().trim()));  // $Edittext_value = $_POST['Edittext_value'];
        nameValuePairs.add(new BasicNameValuePair("password",pass.getText().toString().trim()));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        //Execute HTTP Post Request
        response=httpclient.execute(httppost);
        // edited by James from coderzheaven.. from here....
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        final String response = httpclient.execute(httppost, responseHandler);
        System.out.println("Response : " + response);
        runOnUiThread(new Runnable() {
            public void run() {
                tv.setText("Response from PHP : " + response);
                dialog.dismiss();
            }
        });

        if(response.equalsIgnoreCase("User Found")){
            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(Axdroid.this,"Login Success", Toast.LENGTH_SHORT).show();
                }
            });

            startActivity(new Intent(getApplicationContext(), Userpage.class));
        }else{
            showAlert();               
        }

    }catch(Exception e){
        dialog.dismiss();
        System.out.println("Exception : " + e.getMessage());
    }
}
public void showAlert(){
    Axdroid.this.runOnUiThread(new Runnable() {
        public void run() {
            AlertDialog.Builder builder = new AlertDialog.Builder(Axdroid.this);
            builder.setTitle("Login Error.");
            builder.setMessage("User not Found.") 
                   .setCancelable(false)
                   .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                       }
                   });                    
            AlertDialog alert = builder.create();
            alert.show();              
        }
    });
}

} 
```

我无法在调试代码时完成这项工作......控件从 httpclient 跳转到捕获代码。在排序时提供任何帮助将不胜感激。

这是 PHP 文件。我已经单独检查过它并且它正在工作。

```
<?php
$hostname_localhost ="localhost";
$database_localhost ="mydatabase";
$username_localhost ="root";
$password_localhost ="";
$localhost = mysql_connect($hostname_localhost,$username_localhost,$password_localhost)
or
trigger_error(mysql_error(),E_USER_ERROR);

mysql_select_db($database_localhost, $localhost);

$username = $_POST['username'];
$password = $_POST['password'];

$query_search = "select * from tbl_user where username = '".$username."' AND password = '".$password. "'";
$query_exec = mysql_query($query_search) or die(mysql_error());
$rows = mysql_num_rows($query_exec);
//echo $rows;
if($rows == 0) {
echo "No Such User Found";
}
else  {
echo "User Found";
}
?> 
```

@ashwani 这是目前的 Axdroid.java 页面（主要活动页面）

```
public class Axdroid extends Activity {
Button b;
EditText et,pass;
TextView tv;
HttpPost httppost;
StringBuffer buffer;
HttpResponse response;
HttpClient httpclient;
List<NameValuePair> nameValuePairs;
ProgressDialog dialog = null;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_axdroid);

    b = (Button)findViewById(R.id.Button01); 
    et = (EditText)findViewById(R.id.username);
    pass= (EditText)findViewById(R.id.password);
    tv = (TextView)findViewById(R.id.tv);

    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            String url="http://192.168.1.222/AndroidLeave/check.php";
            JSONParser jparser= new JSONParser();
            ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("tag", "getcategory"));
            params.add(new BasicNameValuePair("username", et.getText().toString()));
            params.add(new BasicNameValuePair("password", pass.getText().toString()));
            JSONObject jObj= jparser.makeHttpRequest(url, "POST", params);try {
                String success = jObj.get("success").toString();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }               

        }
        });}' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:53:46.783

为了解析数据，我使用以下类

JsonParser.java

```
public class JSONParser {

    InputStream is = null;
    JSONObject jObj = null;
    String json = "";

    public JSONParser() {
    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if (method == "POST") {
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            } else if (method == "GET") {
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder("");

            Log.d("reader value in json parser", reader.toString());
            String line = "";
            while ((line = reader.readLine()) != null) {
                Log.d("line in JsonParser", line);
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.d("Json value", json);

        } catch (Exception e) {
            Log.d("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {

            jObj = new JSONObject(json);
            json = "";
        } catch (JSONException e) {
            Log.d("JSON Parser", "Error parsing data " + e.toString());
        }
        return jObj;
    }
} 
```

现在在您的活动中尝试传递这样的网址

```
String url="place your url here";
JSONParser jparser= new JSONParser();
params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("tag", "getcategory"));
params.add(new BasicNameValuePair("username", username.getText().toString()));
params.add(new BasicNameValuePair("password", password.getText().toString()));
JSONObject jobj= jparser.makeHttpRequest(url, "POST", params); 
```

//现在这里从json中检索数据：

```
String success= jobj.get("success"); 
```

希望这可以帮助！

同样在你的 php 文件中你必须使用这个`json_encode`函数`echo`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:28:24.960

使用此功能。根据您的要求进行更改。

```
void login()
        {
            String data = null;
            InputStream is = null;
            StringBuilder sb;
            String result;

            try
            {
                HttpClient httpsClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost("http://192.168.1.4/check.php");
                List<NameValuePair> nameValue = new ArrayList<NameValuePair>();

                nameValue.add(new BasicNameValuePair("username", "" + et.getText().toString()));
                nameValue.add(new BasicNameValuePair("password", "" + pass.getText().toString()));

                httpPost.setEntity(new UrlEncodedFormEntity(nameValue));

                HttpResponse httpRes = httpsClient.execute(httpPost);

                HttpResponse httpResponce = httpsClient.execute(httpPost);
                HttpEntity httpEntity = httpResponce.getEntity();
                is = httpEntity.getContent();

            }
            catch(Exception e) {}

             try
                {
                    BufferedReader BufR = new BufferedReader(new InputStreamReader(is, "iso-8859-1"),8);
                    sb = new StringBuilder();
                    sb.append(BufR.readLine() + "\n");
                    String line = "0";

                    while((line = BufR.readLine()) != null)
                    {
                        sb.append(line + "\n");
                    }

                    result = sb.toString();

                    Toast.makeText(getApplicationContext(), result.toString(), Toast.LENGTH_LONG).show();
                    if(result.equals("User Found"))
                    {
                        Toast.makeText(getApplicationContext(), "User Found ", Toast.LENGTH_LONG).show();
                    }
                    else
                    {
                        Toast.makeText(getApplicationContext(), "User Not Found ", Toast.LENGTH_LONG).show();
                    }
                }
                catch (Exception e) {
                    Log.e("log_tag", "Error in convert String" + e.toString());
                }

        } 
```

# c# - 如何使用 C# 在代码中进行数据绑定？

> ID：12947775
> 
> 赞同：7
> 
> 时间：2012-10-18T05:35:51.923
> 
> 标签：c#, data-binding

我打算在我的几个类之间使用数据绑定。换句话说，我不是在模型类和 UI 之间绑定值，而是在不同类之间绑定变量。

我在几个地方读到了 C# 中的数据绑定，但其中大多数是指 Windows 窗体和源对象之间的绑定。

我还是 C# 的新手。这就是我理解我应该做什么的方式：

首先，对于我的*源对象*，比如说有一个类名`DataObject`. 源对象必须实现一个`INotifyPropertyChange`接口，然后在属性`health`设置为更改时触发事件。我对此没有任何问题。

现在，假设我有一个*名为*`CharacterClass`. `life`是 中的一个属性`CharacterClass`，也是我要绑定到源对象属性的*目标*`health`属性。

如何仅使用普通的 .NET 框架在代码中将两个属性绑定在一起（单向和双向）？

*关于我为什么问这个问题的一些背景信息：*

万一你认为这是一个重复的问题，它不是。我已经通过 SE 进行了搜索。关于代码中数据绑定的其他问题是在 WPF 或 XAML 的上下文中，这不适合我。我还阅读了 MSDN 上的几篇文章，似乎我可以创建一个`Binding`对象，然后通过`BindingOperations.SetBinding()`. 但是，`Binding`该类似乎是 WPF 库的一部分，位于 `System.Windows.Data.Binding`. 尽管我使用的是 C#，但我怀疑我是否有机会访问 WPF 库，因为我主要使用 C# 作为 Unity3D 中的一种脚本语言。我相信我只能访问 vanilla .Net 框架。但是，我对此不太确定，因为我还是 C# 的新手。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T10:52:24.793

尽管对与所使用的 UI 框架紧密耦合的绑定有很多支持，但您仍然可以轻松编写自己的绑定框架。

这是一个 POC，它实现了两个对象的属性之间的单向绑定。

注意：这只是可能的方法之一，充其量是 POC（可能需要针对高性能/生产场景进行微调）并使用 .Net 2.0 类和接口，不依赖于任何 UI 框架（'vanilla'.net用你的话来说框架:))。一旦你理解了这一点，你就可以轻松地扩展它以支持 2-way binding

```
class Program
{
    public static void Main()
    {
        Source src = new Source();
        Destination dst = new Destination(src);
        dst.Name = "Destination";
        dst.MyValue = -100;
        src.Value = 50; //changes MyValue as well
        src.Value = 45; //changes MyValue as well
        Console.ReadLine();
    }
}

//A way to provide source property to destination property 
//mapping to the binding engine. Any other way can be used as well
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
internal class BindToAttribute : Attribute
{
    public string PropertyName
    {
        get;
        private set;
    }

    //Allows binding of different properties to different sources
    public int SourceId
    {
        get;
        private set;
    }

    public BindToAttribute(string propertyName, int sourceId)
    {
        PropertyName = propertyName;
        SourceId = sourceId;
    }
}

//INotifyPropertyChanged, so that binding engine knows when source gets updated
internal class Source : INotifyPropertyChanged
{
    private int _value;
    public int Value
    {
        get
        {
            return _value;
        }
        set
        {
            if (_value != value)
            {
                _value = value;
                Console.WriteLine("Value is now: " + _value);
                OnPropertyChanged("Value");
            }
        }
    }

    void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
}

internal class Destination
{
    private BindingEngine<Destination> _binder;

    private int _myValue;

    [BindTo("Value", 1)]
    public int MyValue
    {
        get
        {
            return _myValue;
        }
        set
        {
            _myValue = value;
            Console.WriteLine("My Value is now: " + _myValue);
        }
    }

    //No mapping defined for this property, hence it is not bound
    private string _name;
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            _name = value;
            Console.WriteLine("Name is now: " + _name);
        }
    }

    public Destination(Source src)
    {
        //Binder for Source no 1
        _binder = new BindingEngine<Destination>(this, src, 1);
    }
}

internal class BindingEngine<T>
{
    private readonly T _destination;
    private readonly PropertyDescriptorCollection _sourceProperties;
    private readonly Dictionary<string, PropertyDescriptor> _srcToDestMapping;

    public BindingEngine(T destination, INotifyPropertyChanged source, int srcId)
    {
        _destination = destination;

        //Get a list of destination properties
        PropertyDescriptorCollection destinationProperties = TypeDescriptor.GetProperties(destination);

        //Get a list of source properties
        _sourceProperties = TypeDescriptor.GetProperties(source);

        //This is the source property to destination property mapping
        _srcToDestMapping = new Dictionary<string, PropertyDescriptor>();

        //listen for INotifyPropertyChanged event on the source
        source.PropertyChanged += SourcePropertyChanged;

        foreach (PropertyDescriptor property in destinationProperties)
        {
            //Prepare the mapping.
            //Add those properties for which binding has been defined
            var attribute = (BindToAttribute)property.Attributes[typeof(BindToAttribute)];
            if (attribute != null && attribute.SourceId == srcId)
            {
                _srcToDestMapping[attribute.PropertyName] = property;
            }
        }
    }

    void SourcePropertyChanged(object sender, PropertyChangedEventArgs args)
    {
        if (_srcToDestMapping.ContainsKey(args.PropertyName))
        {
            //Get the destination property from mapping and update it
            _srcToDestMapping[args.PropertyName].SetValue(_destination, _sourceProperties[args.PropertyName].GetValue(sender));
        }
    }
} 
```

![在此处输入图像描述](../Images/e13750b6877688c6a59288625d14fd01.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:55:36.100

> 我相信我只能访问 vanilla .Net 框架

现实情况是 UI 中使用了数据绑定。因此，如果有人谈论数据绑定，那么他会自动暗示“[UI 框架名称] 中的数据绑定”。

您可以考虑对象到对象的映射而不是数据绑定。

# xcode - 在 Mac OS X 10.8.1 上安装 xcode 4.3.2

> ID：12947776
> 
> 赞同：1
> 
> 时间：2012-10-18T05:35:53.680
> 
> 标签：xcode, macos

如何在 Mountain Lion 上安装两个版本的 Xcode？

我想安装 xcode 4.3.2 并保留 xcode 4.5 但是每当我尝试安装 4.3.2 时，它都会说它需要安装 Mac OS X 10.7。有任何想法吗？

另外，如果我安装 xcode 4.3.2，我现在可以使用 iOS5.1 作为基础 SDK 编译应用程序，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:06:59.183

检查此链接[已解决：如何在 Lion 上安装 XCode 3.2.6？](http://forums.macrumors.com/showthread.php?t=1289543). 我已经用山狮（3.x，4.x）在mac上安装了旧版本的xcode。您所需要的 - 使用 xcode 从 dmg 卷到 mpkg 文件的正确路径。

# java - Eclipse 链接简单连接

> ID：12947778
> 
> 赞同：2
> 
> 时间：2012-10-18T05:36:03.843
> 
> 标签：java, join, eclipselink

如何在 eclipselink 中进行简单的连接查询？我想接收 ArrayList；例如，我有两个实体：

```
public class A implements Serializable {

 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 @Basic(optional = false)
 @Column(name = "id")
 private Long id;
 @Column(name = "value")
 private String value;   

 @OneToMany(mappedBy = "aid")
 private Collection<B> bCollection; 
```

}

```
public class B implements Serializable {

 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 @Basic(optional = false)
 @Column(name = "id")
 private Long id;

 @JoinColumn(name = "a_id", referencedColumnName = "id")
 @ManyToOne
 private A aid; 
```

}

我想执行这样的查询：

```
Select * From A a Join B b ON a.id = b.a_id Where a.value = '1'; 
```

我这样做：

```
EntityManager em = createEntityManager();
Query q = em.createQuery("Select a From A a Where a.value = 1");
q.setHint("eclipselink.join-fetch", "a.bCollection");
Object result = q.getResultList(); 
```

并且我收到 A 对象，该对象具有指向 B 对象（bCollection）的链接，而 B 对象（bCollection）具有 A 对象（aid）的链接，因此无限期。正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:39:11.610

是的。在`bidirectional mapping`ie中**，父母指的是孩子，孩子指的是父母**，这是正常的。但是，如果您不无限期地访问圆形图，那您就很好。

# validation - 在 joomla 2.5 中验证电话号码

> ID：12947785
> 
> 赞同：1
> 
> 时间：2012-10-18T05:36:51.047
> 
> 标签：validation, joomla

我可以通过将 validate-email 类添加到输入字段来验证电子邮件 ID。

如何验证电话号码的输入字段？另外，我们如何验证数字整数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:38:52.837

你可以试试。

> 验证数字

[阅读更多](http://docs.joomla.org/Client-side_form_validation)

对于电话号码，您可以尝试

> 验证-[自定义]

# c++ - 想要实现类似信号模板的boost，它以函数类型为参数

> ID：12947786
> 
> 赞同：0
> 
> 时间：2012-10-18T05:36:58.820
> 
> 标签：c++

对不起，如果这个问题非常有根据。我无法以某种方式将模板实现的一个简单示例代码视为**Boost.signals** ，例如：

```
 boost::signal<void ()> sig; 
```

我所知道的是以下内容：

```
 template <class T>
  TemplateClass {
      T t;
   };

   TemplateClass<int> a; 
```

请提供一些关于它的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:46:59.133

不确定问题是什么，但增强信号的问题是您创建了一个发布者/订阅者系统，以便您可以将事件发送给感兴趣的各方。

声明 -boost::signal sig;- 是一个简单的模板，就像您在它下面列出的模板一样，但类型是函数签名（不要与函数指针混淆）。然后订阅者可以提供带有该签名的回调。

这是一个简单的 hello world 示例：

[http://www.boost.org/doc/libs/1_51_0/doc/html/signals/tutorial.html#id3193274](http://www.boost.org/doc/libs/1_51_0/doc/html/signals/tutorial.html#id3193274)

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:25:30.533

你想如何创建 boost::signals2::signal 之类的模板参数吗？实施示例在这里：

```
#include <tuple>

template <class Signature>
class TemplateClass; // declaration only

template <class R, class... Args>
class TemplateClass<R(Args...)> { // partial specialization as function like signature
public:
    typedef R result_type;
    typedef std::tuple<Args...> arg_types;

    R operator()(const Args&... args)
    {
        return invoke_function(args...);
    }
};

int main()
{
    TemplateClass<void(int, double)> x;
    x(1, 3.14);
} 
```

# ruby-on-rails-3 - rails rspec email_spec 失败，但真正的电子邮件有效

> ID：12947790
> 
> 赞同：1
> 
> 时间：2012-10-18T05:37:09.300
> 
> 标签：ruby-on-rails-3, rspec2, email-spec

真正的电子邮件有效，但测试失败。不知道出了什么问题。有谁知道可能是什么问题？

使用有效参数创建的 TasksController POST 向协作者发送电子邮件（失败 - 1）

```
 it 'emails the collaborators' do
    post :create, { :task => valid_attributes }

    Emailer.should_receive(:send_email).with(user, :new_task, assigns(:task).project)
  end 
```

失败：

1) TasksController POST 使用有效参数创建电子邮件合作者失败/错误：Emailer.should_receive(:send_email).with(user, :new_task, assigns(:task).project) ().send_email(#, :new_task, 'blah ')
预期：1 次
收到：0 次

我有以下宝石：
rails (3.2.7)
rspec-rails (2.11.4)
email_spec (1.2.1)

# sharepoint-2010 - 支持 Web 服务的 Share Point 2010 版本

> ID：12947792
> 
> 赞同：0
> 
> 时间：2012-10-18T05:37:28.083
> 
> 标签：sharepoint-2010

在四个 microsoft sharepoint 2010 试用版中..即。Enterprise Client Access license Features, Standard Client Access license Features, internet Sites Enterprise, internet Sites Standard，哪一种支持网络服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:03:09.473

这个问题非常不清楚，但让我根据您的上下文给您两个可能的答案；使用标准的 SP Web 服务或托管您自己的 Web 服务。

**标准 SharePoint Web 服务**

SharePoint 的所有版本都具有可用于与其交互的 Web 服务，作为在 .NET 中使用 SP 对象模型的替代方法。当然，每个版本都有一些独特的 Web 服务，因为功能集并不相同。

[您可以在http://msdn.microsoft.com/en-us/library/jj193051(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/ee705814.aspx)阅读有关 SP 2013 Web 服务的信息，在[http://msdn.microsoft.com](http://msdn.microsoft.com/en-us/library/jj193051(v=office.15).aspx)阅读SP 2010 Web 服务[/en-us/library/ee705814.aspx](http://msdn.microsoft.com/en-us/library/ee705814.aspx)。请注意，2010 和 2013 之间的支持有一些变化，请参阅[http://technet.microsoft.com/en-us/library/ff607742(v=office.15).aspx](http://technet.microsoft.com/en-us/library/ff607742(v=office.15).aspx)。

**在 SharePoint 中托管自定义 Web 服务**

如果愿意，您还可以在 SharePoint 中托管您自己的 Web 服务。它是您需要作为应用程序的一部分公开的任何 WCF 服务的完美宿主。它们应该部署到 _vti_bin，请参阅[http://msdn.microsoft.com/en-us/library/ff521581.aspx](http://msdn.microsoft.com/en-us/library/ff521581.aspx)以供参考！

# android - 在三星手机上按返回键按钮不起作用

> ID：12947793
> 
> 赞同：1
> 
> 时间：2012-10-18T05:37:44.590
> 
> 标签：android, xamarin.android

我正在使用三星 GT-5330 安装我的安卓应用程序。如果用户在确认数据后按下返回按钮，我需要返回到第一个屏幕。

我正在使用以下代码：

```
 public override bool OnKeyDown(Android.Views.Keycode keyCode, Android.Views.KeyEvent e) {

          if (keyCode == Keycode.Back)
        {

            Intent i = new Intent(this, typeof(HotelSearchPage));
              StartActivity(i);

        }
        return base.OnKeyDown(keyCode, e);

         } 
```

这在我的模拟器上运行良好，但不适用于我的设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:40:04.157

错误的： `if (keyCode == Keycode.Back)`

正确的： `if (keyCode == KeyEvent.KEYCODE_BACK)`

所以你可以试试：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        // do something on back.
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

由于[onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)从 API 级别 5 开始可用，您也可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:39:33.900

使用`onBackPressed()`方法并尝试

# cocoa - 有什么与可可类别相反的吗？

> ID：12947803
> 
> 赞同：-5
> 
> 时间：2012-10-18T05:38:35.413
> 
> 标签：cocoa, objective-c-category

无论如何，我可以删除添加到类别中的方法吗？我不想子类化或评论该类别？请告诉我如果我创建一个类别使用它会发生什么，然后我不想再使用它。我是可可新手，所以请提供任何帮助和建议....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:48:40.520

Objective-C 是一种动态语言，缺乏任何强大的隐藏概念；公共、私人、受保护等；方法，尤其是在运行时。因此，子类不能隐藏继承的方法，这在某些语言中是可能的。

因此，简单且推荐的答案是您无法删除或隐藏方法。

但是考虑到 Objective-C 的动态特性，永远不要说永远......但你真的不应该去那里！

减少一个类的暴露的标准方法是让另一个类私有地拥有该类的一个实例并调节对它的所有访问。如果你是面向模式的，你会发现可以做到这一点的模式。

# java - ArrayList 的不安全或未经检查的操作

> ID：12947806
> 
> 赞同：7
> 
> 时间：2012-10-18T05:38:42.297
> 
> 标签：java, arraylist, compiler-errors

我被分配制作一个程序，该程序可以获取 0-25 之间的 100 个随机整数并将它们存储在一个数组中。然后我必须调用 2 种方法来分割偶数和赔率（非常典型）。所以我尝试了 ArrayList 的东西（我刚刚学会了），它看起来很好（我在网上关注教程和东西），直到我遇到这个： *Unit8.java 使用未经检查或不安全的操作*

我的代码是这样的：

```
 import java.util.*;
    import java.awt.*;

    public class Unit8
    {
public static void main (String [] args)
{
    //create an array for original 100 integers
    //create a 2D array for evens and odds
    //split them up using 2 methods

    int[] originalArray = new int[100];
    ArrayList even = new ArrayList(1);
    ArrayList odd = new ArrayList(1);

    for (int x = 0; x < originalArray.length; x++)
    {
        originalArray[x] = (int)(Math.random() * 25);
    }

    evensDivider(originalArray, even);
    oddsDivider(originalArray, odd);
}

public static void evensDivider (int[] e, ArrayList even)
{

    for (int y = 0; y < e.length; y++)
    {
        if (e[y]%2 == 0)
            even.add(e[y]);
    }

    System.out.println("The evens are: " + even);
}

public static void oddsDivider (int[] o, ArrayList odd)
{

    for (int z = 0; z < o.length; z++)
    {
        if (o[z]%2 == 1)
            odd.add(o[z]);
    }
} 
```

}

错误具体发生在： `even.add(e[y]);` 和 `odd.add(o[z]);`

请帮助我解决这个问题，我已尽力使其清晰易懂。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T05:41:38.163

这是因为您正在使用`ArrayList`with `raw type`。你正在向它添加一个特定的类型。

原始类型 ArrayList 需要 Object 类型的元素。如果您添加任何其他类型，那么编译器将无法确切知道您存储的是什么类型。因此，它*`unchecked or unsafe operations`*可以警告您您可能做错了什么。

您应该更好地创建一个`Generic`ArrayList：-

```
List<Integer> evenNumbers = new ArrayList<Integer>(); 
```

`method`另外，在您的签名中更改它：-

```
public static void evensDivider (int[] e, List<Integer> evenNumbers) 
```

**PS** : - 如果你有一个，你应该总是有一个参考`interface type`。我的意思是使用`List`代替`ArrayList`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T05:41:17.180

它在抱怨这个

```
ArrayList even = new ArrayList(1); 
```

你有那里的非通用版本`ArrayList`。将其更改为

```
List<Integer> even = new ArrayList<Integer>(1); 
```

那是通用的和类型安全的。

此外（作为旁注）值 1 in`new ArrayList(1);`指定列表的初始容量。该功能适用​​于您知道将向列表添加大量元素的情况，在这种情况下，您将提供一些更大的数字，这将有助于避免调整大小的开销。传递一个小值（如 1）没有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T05:42:21.087

而不是这个：

```
ArrayList even = new ArrayList(1); 
```

试试这个：

```
List<Integer> evens = new ArrayList<Integer>(50); 
```

以下是优点：

*   这`List`只能保存数字（实际上是整数，也称为整数），我假设这是警告的来源。
*   它有一个复数名称，可以更好地反映它是什么，一个列表
*   它以 50（而不是 1）的大小来实例化自己，这与您期望它的大小有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T05:44:45.020

将此替换`ArrayList even = new ArrayList(1);`为`ArrayList<Integer> even = new ArrayList<Integer>(1);`

或者**在属性/方法/类的顶部****添加。`@SuppressWarnings("rawtypes")`**

# android - 如何避免纹理失真（即拥有更高分辨率的纹理）

> ID：12947807
> 
> 赞同：1
> 
> 时间：2012-10-18T05:38:45.840
> 
> 标签：android, opengl-es, textures

我对纹理质量感到困扰。我加载了一个 Obj 文件来显示 3-D 模型，并使用 2048 * 2048 2-D 图像在 android 中使用 Opengl-ES 进行 3-D 模型的纹理映射。带有纹理的模型可以随意旋转和缩放，但是当放大到一定比例时，纹理开始变形。

我想知道如何避免放大过程中的失真，这类似于谷歌地球。

任何指针将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:40:33.193

您可以根据相机和对象之间的距离更改对象纹理。所以当物体靠近时可以使用更详细的纹理（谷歌地球的工作方式）。

# ruby - Nokogiri 和 IMDb

> ID：12947811
> 
> 赞同：-1
> 
> 时间：2012-10-18T05:39:03.420
> 
> 标签：ruby, nokogiri

我开始使用 Nokogiri 并尝试从 IMDB 中提取一些数据。但是，IMDB 的 html 有点好笑，似乎找不到 css 选择器，例如创建者的名字：[http](http://www.imdb.com/title/tt1439629/) ://www.imdb.com/title/tt1439629/ 。我怎么能得到我所追求的？

```
require 'nokogiri'
require 'open-uri'

url = "http://www.imdb.com/title/tt1439629/"
doc = Nokogiri::HTML(open(url))  
puts doc.at_css("h1").text.strip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:44:16.450

这是 Nokogiri 的初学者教程，它解释了如何通过 firebug 及其复制 CSS 功能非常容易地找到您正在寻找的内容。

[http://ruby.bastardsbook.com/chapters/html-parsing/](http://ruby.bastardsbook.com/chapters/html-parsing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:04:52.747

这个有效：

```
puts doc.at_css("div.txt-block a").text.strip
> Dan Harmon 
```

# c++ - 指针向下转换和向上转换的使用差异？

> ID：12947825
> 
> 赞同：7
> 
> 时间：2012-10-18T05:40:16.487
> 
> 标签：c++, inheritance, pointers, casting, virtual

我想知道当我们使用向下转换和向上转换时，指针转换到底发生了什么。我有2个问题。其中前两个是评论。Q3终于结束了。

```
#include<iostream>
using namespace std;
class A{
  public:
    virtual void  f()
    {
      cout<<"A"<<endl;
    }
};
class B: public A{
  public:
     virtual void   f()
    {
      cout<<"B"<<endl;
    }
};
int main()
{
  A* pa =new A();
  B* pb =new B();
  A* paUpcast= new B();
  /*
    Q1:
    Is the line above equivalent to the following?
    A* paUpcast = (A*) B;
  */
  B* pbDowncast=(B*)paUpcast;
  /*
    Q2:Why we cannot use the following 2 code;
    B* pbDowncast=new A();
    B* pbDowncast = (B*) pa;
  */
  pa->f();
  pb->f();
  paUpcast->f();
  pbDowncast->f();

  return 1;
} 
```

Q3：我想总结一个规则来推断如果我们一起使用虚函数和指针转换会发生什么，但我就是想不通。

本来，我认为虚函数会把我们引向指针真正指出的地方。因此，当我们键入

```
A* paUpcast= new B();
paUpcast->f(); 
```

如果 Af() 是虚函数，第二行将显示“B”，因为 paUpcast 实际上是指向 B 对象

但是，当我们键入

```
B* pbDowncast=(B*)pa;
pbDowncast->f(); 
```

它会显示“A”而不是“B”，这会导致矛盾发生。

谁能解释或给我一些提示？非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T10:18:11.057

我会尝试解释我是如何理解它的。帮助我的提示是考虑乐高积木。

在你的情况下，我们有两个乐高积木，一个命名`A`，另一个命名`B`......但想象一下，`B`这块是通过连接两块形成的一块，其中一个是相同类型的`A`：

```
 A     B
+-+  +-+-+
|a|  |a|b|
+-+  +-+-+ 
```

然后，您使用指针来引用每个乐高积木，但每个积木都有自己的形状，所以，想象一下：

```
A* pa =new A();
B* pb =new B();
A* paUpcast= new B();

A *pa -->       +-+   new A()
                |a|
                +-+
B* pb -->       +-+-+ new B()
                |a|b|
                +-+-+
A* paUpcast --> +-+-+ new B()
                |a|b|
                +-+-+ 
```

请注意，`paUpcast`指针是 type 的指针，`A`但持有一块 type `B`，这块与`B`那块不同`A`，正如您所看到的，它比它的基数*略大。*

这就是你所说的向上转换，基指针就像一个通配符，可以在继承树上向下保存任何相关的东西。

> A* paUpcast= 新 B();
> 
> 上面的行是否等同于以下行？
> 
> A* paUpcast = (A*) B;

好吧，假设你真的想写这个：`A* paUpcast = (A*) new B();`是的，它是。您创建`B`类的新实例并将其存储到指向`A`类的指针中，在分配到指针之前转换新实例不会改变它将存储到基类指针中的事实。

> 为什么我们不能使用以下2个代码；
> 
> B* pbDowncast=新 A();
> 
> B* pbDowncast = (B*) A;

记住乐高积木。做的时候会发生什么`B* pbDowncast=new A()`？：

```
B* pbDowncast --> +-+ new A()
                  |a|
                  +-+ 
```

创建一个新的基类实例并将其存储到派生类的指针中，如果您仔细观察乐高积木不合适，您会尝试将基类视为派生类！该`A`作品缺少需要考虑的*额外内容*`B`；所有这些东西都“存储”到乐高积木的额外部分中，`B = all the A stuff plus something more`：

```
 B
+-+-----------------------------------+
|a|extra stuff that only B pieces have|
+-+-----------------------------------+ 
```

如果您尝试调用只有`B`类具有的方法会发生什么？拥有一个`B`指针，您可以调用所有`B`方法，但是您创建的实例来自`A`没有`B`方法的类型，它不是用所有这些额外的东西创建的。

> 但是，当我们键入
> 
> B* pbDowncast=(B*)pa;
> 
> pbDowncast->f();
> 
> 显示“A”而不是“B”，这使矛盾发生。

这对我来说并不矛盾，记住乐高积木，`pa`指针指向一块类型`A`：

```
A *pa --> +-+
          |a|
          +-+ 
```

这篇文章缺少所有的`B`东西，事实是缺少在标准输出上`f()`打印的方法`B`……但它有一个在输出上`f()`打印的方法`A`。

我希望它有帮助！

编辑：

> 看来您也同意使用downcast是不合适的不是吗？

不，我不同意。向下转换根本不是不合适的，但根据它的用途它会是不合适的。与所有 C++ 工具一样，向下转换具有实用性和使用范围；所有尊重善用的诡计都是适当的。

那么向下转换工具有什么用处呢？恕我直言，任何不会破坏代码或程序流程的东西，如果程序员知道他在做什么，则尽可能保持代码可读性和（对我来说最重要）。

毕竟，向下转换采用可能的继承分支是一种常见的做法：

```
A* paUpcast = new B();
static_cast<B*>(paUpcast)->f(); 
```

但是使用更复杂的继承树会很麻烦：

```
#include<iostream>
using namespace std;
class A{
public:
    virtual void  f()
    {
        cout<<"A"<<endl;
    }
};
class B: public A{
public:
    virtual void   f()
    {
        cout<<"B"<<endl;
    }
};
class C: public A{
public:
    virtual void   f()
    {
        cout<<"C"<<endl;
    }
};

A* paUpcast = new C();
static_cast<B*>(paUpcast)->f(); // <--- OMG! C isn't B! 
```

为了解决这个问题，您可以使用`dynamic_cast`

```
A* paUpcast = new C();

if (B* b = dynamic_cast<B*>(paUpcast))
{
    b->f();
}

if (C* c = dynamic_cast<C*>(paUpcast))
{
    c->f();
} 
```

但是`dynamic_cast`众所周知，它[缺乏性能](https://stackoverflow.com/questions/4050901/performance-of-dynamic-cast)，您可以研究一些替代方法`dynamic_cast`，例如内部对象标识符或转换运算符，但为了解决这个问题，如果正确使用向下转换，它一点也不坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T07:01:11.027

不要在 C++ 中使用 C 风格的强制转换！没有理由这样做，它会混淆你正在尝试做的事情的含义，更重要的是，如果你不投射你认为你正在投射的东西，它会产生有趣的结果。在上述情况下，您总是可以使用`static_cast<T*>()`，尽管所有向下转换可能最好是`dynamic_cast<T*>()`，而不是：后者只有在转换实际上意味着工作时才会成功，在这种情况下它返回一个指向正确对象的指针，可能将指针值调整为需要（在涉及多重继承的情况下，指针值可能会改变）。如果`dynamic_cast<T*>(x)`失败，即`x`不是真正指向类型`T`（或派生）对象的指针，则返回 null。

现在，关于问题：指针强制转换只会影响指针，不会影响对象。也就是说，指向对象的类型永远不会改变。在问题 1 的场景中，您创建一个指向派生类型的指针并将其分配给指向基类型的指针。由于派生类型*是*基类型，因此这种转换是隐式的，但它等效于

```
A* paUpcast = static_cast<A*>(pb); 
```

在第二种情况下，您强制`paUpcast`转换为`B*`. 由于`paUpcast`将 a 转换回 a 的结果是`B*`使用`A*`:`B*`转换`static_cast<T*>(x)`指针或引用时，`static_cast<>()`您可以反转隐式转换的效果。如果您想以任何其他方式导航类层次结构，而不是反转隐式转换的效果，您需要使用`dynamic_cast<>()`. 您也可以`dynamic_cast<>()`在这种情况下使用，但`dynamic_cast<>()`要付出一些代价。

现在，对于第三种情况，您`pa`实际上指向了一个`A`不是对象的`B`对象。编译器将允许您转换`pa`为，`B*`但您对编译器撒谎：`pa`不是a到 an和 using的隐式转换的结果**（**或者在这种情况下是等效的，但 C 风格的转换**并不**总是等同于s）导致未定义的行为：编译器做它想做的任何事情。由于 a和object 的布局相似，它最终调用了一个虚函数，但这只是许多可能的结果之一，并不能保证会发生什么。如果你用过`B*``A*``static_cast<B*>(pa)``(B*)pa`**`static_cast<>()``A``B``A``dyanmic_cast<B*>(pa)`结果将是一个空指针，表示从`pa`to的转换`B*`不起作用。**

# c# - 删除一系列单元格后使用 Aspose 工具保存工作簿时出错

> ID：12947827
> 
> 赞同：1
> 
> 时间：2012-10-18T05:40:53.713
> 
> 标签：c#, excel, aspose, aspose-cells

在保存工作簿之前，我正在删除工作表中的 CellArea（我使用了 ClearContents、DeleteRange、ClearRange）。但它不断给出错误“**指定的参数超出了有效值的范围**。” 但是，如果我删除删除代码并尝试保存，它工作正常..请建议.. 我的代码是这样的：

```
foreach (GcmTemplateWorksheets _worksheet in Worksheetdetails)
        {
            if (_worksheet.IsTransposeRequired ?? false)
            {
                Range maxRange = _workbook.Worksheets[_worksheet.WorksheetName].Cells.MaxDisplayRange;
                _workbook.Worksheets[_worksheet.WorksheetName].Cells.ClearRange((int)_worksheet.StartRow, (int)_worksheet.StartColumn, maxRange.RowCount, maxRange.ColumnCount);
            }
            _workbook.Worksheets[_worksheet.WorksheetName].Cells.ImportDataTable(data_.Tables[_worksheet.FixedWorksheetName], false, _worksheet.ExportDataStartRow ?? 0, 0);
            //Instantiate the error checking options
            ErrorCheckOptionCollection opts = _workbook.Worksheets[_worksheet.WorksheetName].ErrorCheckOptions;
            int index = opts.Add();
            ErrorCheckOption opt = opts[index];
            //Disable the numbers stored as text option
            opt.SetErrorCheck(ErrorCheckType.TextNumber, false);
            opt.AddRange(CellArea.CreateCellArea(0, 0, _workbook.Worksheets[_worksheet.WorksheetName].Cells.MaxDataRow, _workbook.Worksheets[_worksheet.WorksheetName].Cells.MaxDataColumn));
        }
             string _exportPath = System.Configuration.ConfigurationManager.AppSettings["ExportTemplatePath"].ToString();
        //Save the worksheet at an appropriate configured location and assign path to _exportPath..
        _workbook.Save(_exportPath);
        return _exportPath; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:15:11.123

我已经测试了这个场景，在我的测试过程中，我不得不相应地更新你的代码（*因为有一些对象/指针或其他选项我不确定它们的值。所以，我必须使用一个虚拟 DataTable 和其他相应的对象/值*）使用我的示例输入文件（Book1.xlsx）和我们的最新版本/修复来测试他的案例：[Aspose.Cells for .NET v7.3.2.5](https://skydrive.live.com/redir?resid=3FA80127BB8FA477!179&authkey=!APnkCUv5yDmDa6o)，根据我的观察，它工作得非常好. 我没有发现任何问题。

这是我的完整可运行示例代码 v7.3.2.5（请推荐用户尝试）：

**示例代码：**

```
DataTable dt = new DataTable();
dt.Columns.Add("Column1", typeof(int));
dt.Columns.Add("Column2", typeof(string));
dt.Columns.Add("Column3", typeof(int));
for (int i = 0; i < 100; i++)
{
    dt.Rows.Add(i / 10 + 1, "Item " + i.ToString(), i);
}
Workbook _workbook = new Workbook(@"e:\test2\book1.xlsx");
Worksheet _worksheet = _workbook.Worksheets[0];
Range maxRange = _workbook.Worksheets[_worksheet.Name].Cells.MaxDisplayRange;
//workbook.Worksheets[_worksheet.WorksheetName].Cells.ClearRange((int)_worksheet.StartRow, (int)_worksheet.StartColumn, maxRange.RowCount, maxRange.ColumnCount);
_workbook.Worksheets[_worksheet.Name].Cells.ClearRange((int)maxRange.FirstRow, (int)maxRange.FirstColumn, maxRange.RowCount, maxRange.ColumnCount);
//workbook.Worksheets[_worksheet.WorksheetName].Cells.ImportDataTable(data.Tables[_worksheet.FixedWorksheetName], false, _worksheet.ExportDataStartRow ?? 0, 0)
_workbook.Worksheets[_worksheet.Name].Cells.ImportDataTable(dt, false, 0, 0);
//Instantiate the error checking options
ErrorCheckOptionCollection opts = _workbook.Worksheets[_worksheet.Name].ErrorCheckOptions;

int index = opts.Add();
ErrorCheckOption opt = opts[index];
//Disable the numbers stored as text option
opt.SetErrorCheck(ErrorCheckType.TextNumber, false);
opt.AddRange(CellArea.CreateCellArea(0, 0, _workbook.Worksheets[_worksheet.Name].Cells.MaxDataRow, _workbook.Worksheets[_worksheet.Name].Cells.MaxDataColumn));
string _exportPath = @"e:\test2\ouput_book1.xlsx";
//Save the worksheet at an appropriate configured location and assign path to _exportPath..
_workbook.Save(_exportPath); 
```

供您参考，我还附上了资源文件（[Book1.xlsx](https://skydrive.live.com/redir?resid=3FA80127BB8FA477!178&authkey=!AKM3YT8RB726C_I)，[ouput_book1.xlsx](https://skydrive.live.com/redir?resid=3FA80127BB8FA477!177&authkey=!AD_zA8fC1gRi_p0)）。如果您仍然遇到最新版本的任何问题，您能否分享一个可运行的代码/控制台应用程序（他也可能为此动态使用一些虚拟数据表）以在我们端重现该问题。您也可以在[Aspose.Cells 产品支持论坛](http://www.aspose.com/community/forums/aspose.cells-product-family/19/showforum.aspx)中发布查询。

# c# - 如何编写 sql 选择查询以更快地获取数据？

> ID：12947831
> 
> 赞同：0
> 
> 时间：2012-10-18T05:41:18.667
> 
> 标签：c#, oracle, asp-classic, oracle11g

当我编写如下查询以检索数据时，我有一个包含 20,000 条记录的表

```
select emp_id from emp; 
```

它正在谈论 13 到 15 秒来执行我如何才能更快地从表中获取数据。请注意，它也不是 20,000 更多。

这里是输出 emp_id 除了 mtrl_cd 这里

```
 columnname ID      PK null       datatype     Histogram  numdistinct
    MTRL_DESC   2       Y   VARCHAR2 (100 Byte)   None    19480         
    MTRL_CD     1   1   N   VARCHAR2 (9 Byte)     None    19990 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:20:34.180

如果 emp_id 已经是主键，那么您将无法为这个简单的 SELECT 做太多事情。屏幕缓慢的原因是因为您将 > 20000 个项目绑定到组合框。

一种可能的解决方案是：ajax 自动完成，这是 .net 的示例。 [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:20:04.273

当您访问大数据时，主要的事实总是获取您实际需要的那些数据。为此，我们在查询中使用条件。我们使用的常见条件是分页、搜索条件、仅显示与某些数据相关的记录等。因此将其视为设计问题。

[编辑]

如果您希望将这些大数据链接到组合框，请参阅以下文章。

[jQuery Searchable DropDown 插件演示](http://jsearchdropdown.sourceforge.net/)

[ASP.NET AJAX 控件工具包](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)

[如何使用组合框控件？（C＃）](http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/combobox/how-do-i-use-the-combobox-control-cs)

# collections - 如何使用 mongoose 创建有上限的集合？

> ID：12947833
> 
> 赞同：9
> 
> 时间：2012-10-18T05:41:21.570
> 
> 标签：collections, mongoose

我正在尝试使用 Mongoose 创建一个有上限的集合，但是以下创建了一个没有上限的集合：

```
var schema = new mongoose.Schema(
{
    Name: { type: String },
    Text: { type: String }
},
{
    capped: { max: 5, size: 1000000 }
}); 
```

我很确定我正确地遵循了文档的示例，但显然我做错了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-15T06:11:03.400

```
new Schema({..}, { capped: { size: 1024, max: 1000, autoIndexId: true } }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-22T16:32:37.510

```
new Schema({..}, { capped: { size: 1024, max: 1000, autoIndexId: true } }); 
```

*   `size`是内存中的最大字节数，直到您的数据库没有上限或直到您的旧记录未被删除。
*   `max`定义数据库在封顶之前将保存的最大记录数。

    无论最大组件如何，您都必须定义尺寸组件。因为如果在达到最大值之前使用您的尺寸，那么就会开始设置上限，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T04:31:34.257

如果非上限集合已经存在，那么您需要使用以下命令将其转换为上限集合。

```
db.runCommand({"convertToCapped": "collection_name", size: 100000}); 
```

然后你就可以将它与猫鼬一起使用了。

# java - 页面不应在“更多”按钮单击时转到顶部

> ID：12947835
> 
> 赞同：0
> 
> 时间：2012-10-18T05:41:35.237
> 
> 标签：java, javascript, jquery, jsp

我有一个具有 JQuery 移动实现的 JSP 页面，在页面上显示了 8 个产品加载，并在底部提供了一个“更多”按钮，单击“更多”按钮将填充 8 个更多产品，但是当我单击在“更多”按钮上 8 个新产品已加载，页面转到顶部，这是不正确的。那么，如何防止页面返回顶部呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:04:37.523

我假设您的 jQuery 点击处理程序看起来像这样：

```
$('.more').click(function(e) {
    loadMore();
    // ...
}); 
```

默认情况下，click 事件仍会[冒泡](http://www.quirksmode.org/js/events_order.html)到浏览器，并执行其默认事件：跟随链接 href (#)。

为防止这种情况，请将您的代码更改为：

```
$('.more').click(function(e) {
    e.preventDefault();

    loadMore();
    // ...
}); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# jquery - 幻灯片上的jQuery删除按钮的悬停状态

> ID：12947836
> 
> 赞同：3
> 
> 时间：2012-10-18T05:41:35.940
> 
> 标签：jquery, hover, jquery-animate

使用 Jquery，当您单击按钮时，我可以简单地向下滑动 div。 **问题是，按钮 :hover 状态没有被删除。**

JS 小提琴：http: [//jsfiddle.net/Y6gHb/9/](http://jsfiddle.net/Y6gHb/9/)

（小记，在我的网站版本上，我实际上需要再次将鼠标悬停在按钮上，然后将鼠标移出，以使其恢复正常状态）。

这是JS代码：

```
 $("a").click(function() {
        var div = $("#toggleDiv"); 
        if (!div.hasClass("open")) {
            div.animate({
                height: "300px"
            },"fast").addClass("open");
        } else {
            div.animate({
                height: "150px"
            },"fast").removeClass("open");

        }
        return false;
    }); 
```

正如您将在小提琴中看到的那样，幻灯片后链接保持红色。在这个简单的例子中，这看起来不是什么大问题，但在我的网站上，这真的很烦人。

我的问题是：

**难道我做错了什么？或者如何在点击时删除 :hover 状态？**

（我对 Twitter 引导工具提示有类似的问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:51:13.400

在我的测试中，每当我移动鼠标时它就会自行移除，但让链接“悬停”仍然令人不快。你可以这样欺骗它：

```
$(this).unbind('onmouseover').unbind('onmouseout'); 
```

但是，如果您为这些事件绑定了事件，则应在删除它们后重新附加。

这***仅***适用于您有这样的情况：

```
$("a").hover(function(){
//Do fancy stuff
}); 
```

所以你会做这样的事情：

```
 function hoverLinkEffect(e) {
        // Do fancy stuff                                
    }

//Then on the a click event handler
$(this).unbind('onmouseover').unbind('onmouseout').on('hover',hoverLinkEffect); 
```

这是完整的代码：

```
$(document).ready(function() {

    $("a").click(function() {
        $(this).unbind('onmouseover').unbind('onmouseout');
        var div = $("#toggleDiv"); 
        if (!div.hasClass("open")) {
            div.animate({
                height: "300px"
            },"fast").addClass("open");
        } else {
            div.animate({
                height: "150px"
            },"fast").removeClass("open");

        }
        return false;
    });

});​ 
```

# javascript - CKEDITOR.dom.element.createFromHtml(str); 不能在 IE 中工作

> ID：12947838
> 
> 赞同：0
> 
> 时间：2012-10-18T05:41:41.230
> 
> 标签：javascript, ckeditor

***我试图创建新元素并在ckeditor的旧元素之后插入***

**工作代码如下：**

```
var str = "<Element1>sometext</Element1>";
var Newelement = CKEDITOR.dom.element.createFromHtml(str);
Newelement.insertAfter(oldElement); 
```

在 FF 和 IE 工作

**非工作代码如下：**

```
var str = "<Element1></Element1>";
var Newelement = CKEDITOR.dom.element.createFromHtml(str);
Newelement.insertAfter(oldElement); 
```

在FF工作但**不在IE工作**

> IE 错误：

```
Error on CKEDITOR.dom.element.createFromHtml(str) 

The Error :  'getFirst()' is null or not an object 
```

错误号：-2146823281

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:05:51.687

我猜这可能是 IE 中的错误

如果您尝试在 Head 中创建元素（如果您的代码介于两者之间，则无法在标签中创建）有一个补丁，但我找不到链接

或尝试在其中创建元素（将您的脚本块放在与目的地相同的部分）

这可以解决您的问题

此问题是 IE-8 特有的，如果您尝试使用 IE-9，则一定不是这样

# c# - 使用 LINQ 查找数据表中两列条目的重复项

> ID：12947839
> 
> 赞同：0
> 
> 时间：2012-10-18T05:41:54.460
> 
> 标签：c#, linq

我有一个数据表 dt，其中有供应商 ID 和 SubsystemId 作为它的 2 个列。我想查找这两个列值的组合是否有任何重复条目。

我是 Linq 的初学者。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T05:47:20.153

您可以通过按供应商 ID 和子系统 ID 对元素进行分组来查找重复项。之后对它们进行计数，您会发现哪些是重复的。

这就是你如何隔离受骗者：

```
 var duplicates = items.GroupBy(i => new {i.supplierId, i.SubsystemId})
                  .Where(g => g.Count() > 1)
                  .Select(g => g.Key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:17:00.083

```
 var dups = from row in dt.Copy().AsEnumerable()
                       group row by new { SubsystemTypeId = row.Field<int>("SubsystemTypeId"), SupplierId = row.Field<int>("SupplierId") }
                           into grp
                           where grp.Count() > 1
                          select grp.Key; 
```

谢谢斯里拉姆

# joomla2.5 - 如何通过提供用户 id 来获取用户组名称

> ID：12947841
> 
> 赞同：2
> 
> 时间：2012-10-18T05:42:02.803
> 
> 标签：joomla2.5

我正在使用 joomla 2.5。

我想**通过提供用户 ID 来获取用户组名称。**有什么核心功能可以完成这个任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-15T03:28:21.110

使用以下函数获取给定用户 ID 的用户组标题。

```
 function getGroupTitles($id)
        {
            $db = JFactory::getDbo();
            $query = $db->getQuery(true);
            $query
            ->select('title')->from('#__usergroups')
            ->where('id IN (' . implode(',', array_values(JFactory::getUser($id)->groups)) . ')');
            $db->setQuery($query);
            return $db->loadColumn();
        } 
```

示例：print_r(getGroupTitles(427)); 将输出一个类似这样的数组： Array ( [0] => Registered [1] => Author )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:18:44.030

您可以通过以下自定义函数找到用户组名称。

```
function getUserGroups($gid)
    {
        // Initialise variables.
        $db     = JFactory::getDBO();
        $query  = $db->getQuery(true)
            ->select('a.title AS text')
            ->from('#__usergroups AS a')
            ->where('a.id='.$gid)
            ->group('a.id')
            ->order('a.lft ASC');

        $db->setQuery($query);
        $options = $db->loadObjectList();

        return $options;
    } 
```

只需调用此函数并`groups`在函数中传递例如

```
$user =& JFactory::getUser(48);
$usergroupname = getUserGroups($user->groups[8]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:46:06.017

我认为这段代码会对你有所帮助。

如果您需要通过函数参数方式传递值，您可以更改代码。我列出了查询和结果。

```
<?php

    $user = JFactory::getUser();

    $db     = JFactory::getDBO();
    $query  = $db->getQuery(true);
    $query->select('s.title AS group_name');
    $query->from('#__user_usergroup_map AS c');
    $query->join('LEFT', '#__usergroups AS s ON s.id = c.group_id' );
    $query->where('c.user_id = '.$user->id);
    $db->setQuery($query);
    $group_name = $db->loadResult();

    echo $group_name;
?> 
```

# c# - 使用 system.io 的 C# 在我的课堂上没有工作，但在 main 中工作

> ID：12947845
> 
> 赞同：1
> 
> 时间：2012-10-18T05:42:28.583
> 
> 标签：c#, class, .net, using-directives

我正在研究一个我不记得以前遇到过的问题。我正在使用 VS2012 C#

当我添加使用时`System.IO`；在我的主程序中一切正常，但是当我将它添加到我的类文件时，它不会让我使用所有的方法。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Data.SQLite;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace FoxySearch
{    
    class FoxySearch
    {
         File.    <<<<----- here i want to add File.Exists("Blablalba")
    }
} 
```

由于某种原因，它不会让我添加它。一旦我添加了句点，智能感知就会关闭并且没有显示任何选项。当我自己输入它时，它会显示为红色并说，

`System.IO.File.Exists(string)`是一种方法，但用作类型

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T05:46:09.510

您还没有真正给出足够的代码来确定，但听起来您可能正在尝试直接在类声明中编写“普通代码”，而不是在方法或属性声明中。

类只能包含声明——方法声明、字段声明等。你不能这样写：

```
class Foo
{
    int i = 10; 
    Console.WriteLine(i);
} 
```

等等。第一行是有效的，因为它是一个变量声明 - 第二行不是，因为它只是一个方法调用。如果将代码移动到方法中，那就没问题了：

```
class Foo
{
    public void Bar()
    {
        int i = 10; 
        Console.WriteLine(i);
    }
} 
```

此外，我建议您重新审视您的命名 - 为类和命名空间使用相同的名称是一个[坏主意](http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:46:20.820

您需要将它放在函数或子、属性等中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T05:49:53.047

您需要将代码放入方法中，例如：

```
class FoxySearch
{
   public bool DoesFileExist(string filePath)
   {
       return File.Exists(filePath);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:46:46.057

你在课堂上写过，你不能在那里写。& 也 file.Exists() 返回布尔值。你必须写这样的东西：

```
boolean a= File.Exists("bla"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T05:48:10.667

您在类中使用 File.Exists() 而不是在方法中使用它是一个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T05:51:24.273

您必须在项目中添加对程序集的引用。

# mongodb - 如何限制、跳过和依靠 mongodb runCommand

> ID：12947848
> 
> 赞同：2
> 
> 时间：2012-10-18T05:42:47.793
> 
> 标签：mongodb

在你发火之前，我知道如何在使用`find`命令时从常规 mongodb 查询中获取限制、跳过或获取计数。

但是当使用在 mongodb中返回**距离的****geoSpatial** 时。这不接受跳过和计数参数。有谁知道怎么做？`runCommand`

 **```
db.runCommand({ geoNear : "users", near: [25.081398,55.177263], num: 20, distanceMultiplier: 111.194}) 
```

注意：现在我可以通过传递`num`给查询来获得限制，但我也希望能够跳过分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:17:52.817

它是 MongoDB 未实现的选项然而，我正在关闭这个问题，但没有删除，因为更聪明的人可能会提供一些解决方法或解决方案

[https://jira.mongodb.org/browse/SERVER-3925](https://jira.mongodb.org/browse/SERVER-3925)**

# javascript - 使用 Javascript 中的表单将输入逐一添加到数组或对象

> ID：12947855
> 
> 赞同：0
> 
> 时间：2012-10-18T05:44:32.290
> 
> 标签：javascript, arrays

我想知道使用什么代码来创建一个表单，用户可以在其中输入内容并单击提交（或按钮），数据将存储在数组（或 JSON 对象）中，然后他们可以再次执行此操作数据将被“推送”，因此用户可以继续添加。这将继续如此等等。如果可以使用“本地存储”将这些信息存储在用户机器上，我也很感兴趣。

这个问题是我在这里提出的问题的延续： [Add form input to array with javascript using unshift()](https://stackoverflow.com/questions/12903927/add-form-input-to-array-with-javascript-using-unshift)

下面是一些代码。这段代码做我想要的，但只有一个输入项。

谢谢你。

```
<form>
<input id="input" type="text"/>
<button id="button"> Click me </button>
</form>

<script>

var input = document.getElementById("input"); // save the object
var button = document.getElementById("button");

var myArray = [];

button.onclick = function alerted (){
    myArray.unshift(input.value); // get the value
    alert(myArray);
    return false;
};

</script>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:52:24.293

像这样创建一个海关对象：

```
 function MyObject(value1,value2,value3,value4,value5){
     this.attribute1=value1;
     this.attribute2=value2;
     this.attribute3=value3;
     this.attribute4=value4;
     this.attribute5=value5;
  } 
```

然后使用此对象存储各个值。最后，您可以将这个对象添加到您的数组中，如下所示（少数模式之一）：

```
button.onclick = function alerted (){
      // get several input values and set in the custom object
      Myobject object = new MyObject(input1.value, 
                               input2.value,
                               input3.value,
                               input4.value,
                               input5.value);
      myArray.unshift(object); 
      alert(myArray);
      return false;
 }; 
```

希望这可以帮助。

# java - Java 合成器 - 如何为组合绑定自定义编辑器？

> ID：12947857
> 
> 赞同：3
> 
> 时间：2012-10-18T05:44:34.697
> 
> 标签：java, swing, jcombobox, look-and-feel, synth

我正在为组合框蒙皮。组合框由多个子组件组成，其中一个是编辑器。
我编写了一个自定义编辑器，它具有一些自定义功能，并且我曾经`combobox.setEditor(new CustomComboEditor())`设置自定义编辑器。我在我的皮肤 xml 文件中为编辑器定义了皮肤标签，如下所示：

```
style id="skinnedComboTextStyle">
<state value="MOUSE_OVER">
<imagePainter method="textFieldBackground" path="/images/image1.png" sourceInsets="2 2 2 20" />
</state>
<state value="PRESSED">
<imagePainter method="textFieldBackground" path="/images/image2.png" sourceInsets="2 2 2 2" />
</state>
</style>
<bind style="skinnedComboTextStyle" type="name" key="ComboBox.textField" /> 
```

请注意，组合 UI 合成器实现是`SynthComboBoxUI`并且它具有绑定`setName(ComboBox.textField)`，因此我`ComboBox.textField`在上面的标签中用作键。

我注意到当我将自定义编辑器设置为我的组合编辑器时，皮肤不会生效。
但是，如果我不使用任何自定义编辑器并依赖编辑器的默认实现，我的皮肤可以工作，但是我打算在我的组合编辑器中拥有的功能不会生效。

当我尝试为组合设置自定义渲染器时，我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:45:24.620

我猜 Nisha，您还需要根据要求从 ComboBoxEditor 类中覆盖其他方法。就像您可能还必须在 getItem() 中进行修改一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:32:16.307

您可以从 SynthComboBoxEditor 覆盖 createEditorComponent() 并创建一个带有 2 个标签的按钮并将此按钮作为您的编辑器返回。还要覆盖 setItem() 方法，以便您分别为这两个标签设置文本。

# android - 加载类时警报对话框侦听器出错

> ID：12947858
> 
> 赞同：0
> 
> 时间：2012-10-18T05:44:38.023
> 
> 标签：android, android-intent, android-alertdialog, onclicklistener

我正在使用一个 android 项目。现在我正在创建一个自定义的覆盖类。在这个类中，我在警报对话框侦听器上遇到了问题。我无法在侦听器中加载任何意图。我该怎么办？这是我的代码..

```
import java.util.ArrayList;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.view.MotionEvent;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

/**
 * Class used to place marker or any overlay items on Map
 * */
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

       private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

       private Context context;

       public AddItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context) {
            this(defaultMarker);
            this.context = context;
       }

       @Override
       public boolean onTouchEvent(MotionEvent event, MapView mapView)
       {   

           if (event.getAction() == 1) {
               GeoPoint geopoint = mapView.getProjection().fromPixels(
                   (int) event.getX(),
                   (int) event.getY());
               // latitude
               double lat = geopoint.getLatitudeE6() / 1E6;
               // longitude
               double lon = geopoint.getLongitudeE6() / 1E6;
               //Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
           }
           return false;
       } 

       @Override
       protected OverlayItem createItem(int i) {
          return mapOverlays.get(i);
       }

       @Override
       public int size() {
          return mapOverlays.size();
       }

       @Override
       protected boolean onTap(int index) {
         OverlayItem item = mapOverlays.get(index);
         AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
         dialog.setTitle(item.getTitle());
         dialog.setMessage(item.getSnippet());
         dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

                startActivity(new Intent(AddItemizedOverlay.this,SinglePlaceActivity.class));
            }
         })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
//                  MainActivity.this.finish();
                }
            });
         dialog.show();
         return true;
       }

       public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
       }

       public void populateNow(){
           this.populate();
       }

    } 
```

并得到如下错误 ![在此处输入图像描述](../Images/8b199cf7cb858b8caf9e502c6c377b92.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:53:09.233

用于`Context`启动活动。

```
Intent intent = new Intent(context, RosettaActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:55:55.833

[new Intent(Context, Class)](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context,%20java.lang.Class%3C?%3E%29) "的第一个参数应该是一个上下文对象，AddItemizedOverlay是从Context派生的吗？

# ios - Phonegap 应用程序在后台模式下输入时崩溃

> ID：12947859
> 
> 赞同：2
> 
> 时间：2012-10-18T05:44:41.377
> 
> 标签：ios, cordova, phonegap-plugins

我正在使用PhoneGap（1.9）在ios中开发应用程序。以下是我在安静的几个小时内面临的问题......

1）当应用程序进入后台模式时，我的应用程序正在崩溃。

2）另外，如何禁用启动画面。我已经删除了default.png图像，但它仍然显示带有phonegap徽标的启动画面，然后是白色空白屏幕。

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-31T02:01:23.510

我遇到了这个问题，因为我在后台模式下遇到了同样的问题。

但是，关于启动画面，我可以告诉您，您必须根据屏幕大小替换特定文件。它为所有屏幕尺寸生成图像，您必须在构建文件夹中替换它们，而不仅仅是原始项目文件夹（至少我似乎必须这样做）。构建的文件夹位于应类似于 /MyProject/platforms/ios/www/res/screen/ios/[screen_specific_splash_screens] 的路径

同样，我必须对图标做同样的事情：/MyProject/platforms/ios/www/res/icon/ios/[screen_specific_icons]

这些文件的文档（讨论哪些屏幕尺寸）： [http ://docs.phonegap.com/en/4.0.0/config_ref_images.md.html](http://docs.phonegap.com/en/4.0.0/config_ref_images.md.html)

# javascript - 单击链接时将信息传递给表单输入

> ID：12947861
> 
> 赞同：0
> 
> 时间：2012-10-18T05:44:45.347
> 
> 标签：javascript, jquery

我有一些看起来像这样的 html：

```
<h3 class="basic left-top-border-radius">Basic<br /> 500<span>$25</span></h3>
    <a class="signup colorbox" href="#text-signup-form">More Info</a> 
```

单击更多信息时，会弹出一个带有简单信息请求表单的灯箱。这是我的问题。我希望在单击链接时将 h3 标题的文本传递到隐藏的表单输入字段，以便我知道他们单击了哪个计划以获取更多信息。

输入看起来像这样：

```
<input type="text" class="cat_textbox" id="CAT_Custom_440761" name="CAT_Custom_440761" maxlength="1024" /> 
```

我将如何使用 jQuery 来做到这一点？（我想过使用 jQuery`.text()`方法，但我读到它不适用于表单，而且我不知道如何传递 h3 文本。

***注意***页面上有多个`h3`元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:55:29.767

您可以使用此代码执行以下操作。

```
$('.signup').click(function(){
    var planTitle = $('h3').text();

    $('#CAT_Custom_440761').val(planTitle);
}); 
```

当您单击按钮时，它将搜索 h3 标记（最好将 ID 附加到 h3 标记）获取该元素的文本并将其插入到输入字段的值中。

如果您无法将 ID 附加到 h3 标签，您可以搜索 h3 的 prev 实例并从中获取文本。

```
$('.signup').click(function(){
    var planTitle = $(this).prev('h3').text();

    $('#CAT_Custom_440761').val(planTitle);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:52:39.847

也许您可以使用此代码

```
<form action="test1.asp" id="testform">
    <input type="hidden" id="test3" value="">
    <input type="BUTTON" id="submit" onclick="modify_value()"/>
</form>

<script type="text/javascript">
    function modify_value()
    {
        var hidden_field = document.getElementById('test3');
        hidden_field.value = 'testvalue';
        document.getElementById("testform").submit();
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:54:48.700

你可以试试这个：

```
$('a').click( function() {
   var text = $(this).parent().find('h3').text();
   $(this).parent().find('.cat_textbox').val(text); 
}) 
```

# c++ - 正确编码：返回类的新实例时

> ID：12947862
> 
> 赞同：1
> 
> 时间：2012-10-18T05:44:51.940
> 
> 标签：c++, optimization

假设我有一个名为 的类`MyClass`，它有两个成员变量（都被`int`）称为`firstNumber_`和`secondNumber_`。这个类还有一个被调用的方法`clone( )`，它创建一个具有相同值的对象的新实例并返回该新实例。

问题是，当返回一个新的类实例时，我是把它作为指针、引用还是只是实例本身返回？

```
// MyClass.h
class MyClass {
private:
    int firstNumber_;
    int secondNumber_;

public:
    MyClass( int numA, int numB ) {
         firstNumber_ = numA;
         secondNumber_ = numB;
    }

    ~MyClass( ) { };

    // This method creates a copy of the object and returns that object.
    // The ( ? ) is there because I am not sure what type the returned value is.
    MyClass ( ? ) clone( ) {
         // Do I just return the new instance? Or do I need to return a reference or a pointer of the new instance?
         return MyClass( firstNumber_, secondNumber_ );
    }
}; 
```

实现这一目标的正确方法是什么？请注意，`MyClass`它不会从任何其他类继承。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:47:22.507

该方法`clone()`通常用于返回指向多态类型实例的指针，因此您可以在基类型的指针上调用它并获取指向正确派生类型实例的指针。对于简单的复制，在 C++ 中，您使用*复制构造函数*，而不是克隆方法。

克隆方法：

```
struct Base{};
struct Foo : Base 
{
  Base* clone() const { return new Foo(*this); }
}:

Base * b1 = new Foo;
...
Base * b2 = b1->clone(); // points to a Foo instance, copy of object pointed at by b1 
```

我们`clone`使用（编译器生成的）复制构造函数的方法。

使用复制构造函数：

```
Foo f1;
Foo f2 = f1; // copy assignment 
```

在实际代码中，您应该更喜欢智能指针而不是这些示例中使用的原始指针。

关于返回值，默认情况下您应该按值返回，尽管在多态`clone()`示例中，这会通过将返回对象切片为`Base`. 所以我们返回一个指向动态分配实例的指针。意图和所有权必须明确：在这种情况下，调用者*拥有*指针，并负责释放它。在 c++11 之前，您必须依靠文档来传达这一点。在 C++11 中，您可以使用智能指针`std::unique_ptr`，它强制执行所有权并清楚地说明它。

# html - -webkit-text-size-adjust 用于桌面浏览器

> ID：12947864
> 
> 赞同：1
> 
> 时间：2012-10-18T05:44:56.173
> 
> 标签：html, css, webkit

有没有办法获得与在桌面浏览器上使用 webkit-text-size-adjust 类似的结果？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T01:39:27.413

我遇到了麻烦，我知道这是一个老问题，但我想我还是会回答。

只是手机的 FYI，如果你[有一套，](https://developer.mozilla.org/en-US/docs/Web/CSS/text-size-adjust#IE_Phone_note)`-webkit-text-size-adjust` [那是行不通的`<meta viewport>`](https://developer.mozilla.org/en-US/docs/Web/CSS/text-size-adjust#IE_Phone_note)。如果您想对事物的缩放方式进行更多控制，您可以指定`initial-scale`，`maximum-scale`甚至`minimum-scale`与`width=device-width`.

这里有很多很好的[信息](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)。

# javascript - javascript中使用正则表达式的基本搜索排名

> ID：12947865
> 
> 赞同：0
> 
> 时间：2012-10-18T05:44:58.037
> 
> 标签：javascript, jquery, regex, lawnchair

目前我正在使用下面的搜索。我假设用户键入的每个术语都必须在文章中至少出现一次。我使用正则表达式的匹配方法

```
^(?=.*one)(?=.*two)(?=.*three).*$ 
```

, `g`,`i`和`m`

目前我使用matches.length来计算匹配的数量，但行为并不像预期的那样。例如：“ `one two three. one two three`”会给我 2 个匹配项，但实际上应该是 6 个。

如果我做类似的事情

```
(one|two|three) 
```

那么我确实得到了 6 场比赛，但如果我有数据：

```
"one two. one two" 
```

我得到 4 个匹配项，而实际上我希望它为 0，因为并非每个单词都至少出现一次。我可以做第一个正则表达式来检查是否至少有一个“匹配”。如果有，我随后会使用第二个正则表达式来计算实际匹配数，但这会使我的程序运行速度比现在慢得多。对 2500 篇 json 文章执行此正则表达式需要 60 到 120 秒。

关于如何使它更快或更好的任何想法？更改正则表达式？使用搜索或 indexOf 代替匹配？

* * *

注意：我正在使用草坪椅数据库进行本地持久性和 jquery。我将 phonegap 的代码打包为一个 chrome 打包的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:59:31.917

```
var input = '...';
var match = [];
if (input.match(/^(?=.*\bone\b)(?=.*\btwo\b)(?=.*\bthree\b)/i)) {
  match = input.match(/\b(one|two|three)\b/ig);
} 
```

**[在此处](http://jsfiddle.net/7tWDd/)**测试此代码。

# java - android.widget.Button 中的致命异常

> ID：12947868
> 
> 赞同：1
> 
> 时间：2012-10-18T05:45:09.617
> 
> 标签：java, android

我对 Java 和 Android 还是很陌生。我正在尝试制作一个计算圆柱体中液体体积的应用程序，然后将结果返回到 textView 框。但是现在当我单击计算按钮时，它崩溃了，我不知道我错过了什么。一切都编译得很好。

```
package com.somename.fuel.volume.calculator;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.app.Activity;

public class CalculateCylinder extends Activity {

EditText length, width, height, depth;
TextView result;
Button calculate;
double firstNum, secNum, thirdNum, volume, area;
double liqVolume;
double radius;
double a, l, aSide,aTop,b,Arc,FluidSurfaceAreaTotal,r,d,v,h,fsal;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculate_cylinder);

    calculate = (Button) findViewById(R.id.buttonCylCalc);

    length = (EditText) findViewById(R.id.editCylLength);
    height = (EditText) findViewById(R.id.editCylHeight);
    depth = (EditText) findViewById(R.id.editCylDepth);
    result = (TextView) findViewById(R.id.buttonCylResult);

    calculate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            //Toast.makeText(getApplicationContext(), (CharSequence) result, Toast.LENGTH_LONG).show();
            try {
                calculate();
            } catch (Exception e) {
                e.printStackTrace();
            }
            result.setText((CharSequence) result);
        }

        public TextView calculate() throws Exception {
            // TODO Auto-generated method stub
            double firstNum = Double.valueOf(length.getText().toString());
            double secNum   = Double.valueOf(height.getText().toString());
            double thirdNum = Double.valueOf(depth.getText().toString());

            radius = (secNum/2);
            area = ((secNum*secNum)*3.14);
            //liqVolume = (firstNum) * (radius*radius)(acos(radius-depth/radius))
            // Cubic Volume

            v = aSide * l;
            // Fluid surface Area, Side
            aSide = (r*r)*(3.14 / 2 -Math.acos(1-h/r)) - (r-h)*Math.sqrt(h*(2*r-h));
            // Fluid Surface Area Top
            aTop = 2*Math.sqrt((r*r)-((r-h)*(r-h) * l));
            // Fluid Surface Area Bottom
            b = fsal*l;
            // Fluid Surface Area Total
            FluidSurfaceAreaTotal = 2*aSide+aTop+b;
            // Cylinder Radius
            r = d/2;
            // Cylinder Diameter
            d = 2*r;
            if (h <= r )
                // Fluid Side Arc Length
                fsal = 2*r*Math.acos((r-h)/r);

            else if (h > r)
                fsal = 2*r*(3.14-Math.acos((h-r)/r));
            return result;
            }

    });
}   

} 
```

这是一个日志猫：

```
10-18 05:24:38.893: E/AndroidRuntime(964): FATAL EXCEPTION: main
10-18 05:24:38.893: E/AndroidRuntime(964): java.lang.ClassCastException:    android.widget.Button
10-18 05:24:38.893: E/AndroidRuntime(964):  at   com.dbryant423.fuel.volume.calculator.CalculateCylinder$1.onClick(CalculateCylinder.java:55 )
10-18 05:24:38.893: E/AndroidRuntime(964):  at android.view.View.performClick(View.java:2408)
10-18 05:24:38.893: E/AndroidRuntime(964):  at android.view.View$PerformClick.run(View.java:8816)
10-18 05:24:38.893: E/AndroidRuntime(964):  at android.os.Handler.handleCallback(Handler.java:587)
10-18 05:24:38.893: E/AndroidRuntime(964):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-18 05:24:38.893: E/AndroidRuntime(964):  at android.os.Looper.loop(Looper.java:123)
10-18 05:24:38.893: E/AndroidRuntime(964):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-18 05:24:38.893: E/AndroidRuntime(964):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 05:24:38.893: E/AndroidRuntime(964):  at java.lang.reflect.Method.invoke(Method.java:521)
10-18 05:24:38.893: E/AndroidRuntime(964):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-18 05:24:38.893: E/AndroidRuntime(964):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-18 05:24:38.893: E/AndroidRuntime(964):  at dalvik.system.NativeStart.main(Native Method) 
```

我一直在绞尽脑汁试图弄清楚如何对此进行数学计算，但我无法找到它为什么崩溃的答案。我敢肯定，这可能是我在某处错过的简单事情。如果您需要其他文件中的更多信息，请告诉我，但这似乎是唯一有问题的文件。我也知道我还没有删除未使用的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:47:39.803

```
result.setText((CharSequence) result); 
```

此行会导致**异常**，因为您将 Android`View`类转换为`CharSequence`Class。

**可能的解决方案：**

将方法的返回类型更改 `public TextView calculate()`为

```
public String calculate() 
```

现在在方法中`public String calculate()` **返回结果字符串** `fsal`

你的按钮`Click()`是这样的，

```
calculate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //Toast.makeText(getApplicationContext(), (CharSequence) result, Toast.LENGTH_LONG).show();
           String resultValue = "";
            try {
             resultValue =  calculate();
            } catch (Exception e) {
                e.printStackTrace();
            }
            result.setText( resultValue);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:17:33.733

```
result = (TextView) findViewById(R.id.buttonCylResult); 
```

你投对了吗？根据命名，我会说您正在从按钮投射到 TextView。尝试更改为，

```
result = (Button) findViewById(R.id.buttonCylResult); 
```

# jquery - 图像“可显示”的 jQuery 事件

> ID：12947869
> 
> 赞同：0
> 
> 时间：2012-10-18T05:45:12.547
> 
> 标签：jquery, image, events, load

> **可能重复：**
> [等待使用 JQuery 加载图像](https://stackoverflow.com/questions/1098788/waiting-for-images-loading-with-jquery)

我有一个大问题，我在互联网上找到的任何帖子都没有真正回答，所以这是我的问题：

如果我想在图像“可显示”后立即执行一些代码，那么正确的事件是什么？这是一种称为“加载”的事件，但实际上 .load() 事件是在一段时间之前触发的。在我的情况下，我想为加载的图像设置动画，但在开始时（尤其是在移动设备上），图像正在被动画，而没有完全显示/渲染。

```
somecontainer.children("img").load(function() {
    $(this).parent().data('loaded', 'true');
};

somecontainer.children("img").click(function() {
    if($(this).parent().data('loaded') == 'true')
        $(this).animate({
            left: var1,
            top: var2,
            width: var3
        });
}); 
```

如您所见，我将动画间接绑定在“加载”事件上（并且还尝试了 jQuery 插件“waitforimages”之类的东西），但它们都没有真正起作用。我怎样才能得到我想要的事件？应该有什么办法吧？

最良好的祝愿和感谢，丹尼斯

编辑：更正代码

# visual-studio-2010 - 根据下拉列表中的选择将数据绑定到表中

> ID：12947870
> 
> 赞同：0
> 
> 时间：2012-10-18T05:45:27.177
> 
> 标签：visual-studio-2010, c#-4.0, data-binding, gridview, drop-down-menu

使用 Visual Studio 2010 和 SQL management Studio，我创建了一个页面，管理员可以通过该页面获取学生结果的详细信息。

我有 7 个下拉菜单。

1.  学校
2.  年
3.  课
4.  版本
5.  老师
6.  领域
7.  学习单元。

学校和年份是必填字段。

我在页面底部提供了一个名为 Excel 的按钮，单击它会将基于选择的网格视图转储到 Excel 中。

现在我所做的是在每个下拉列表中选择索引更改事件，我正在绑定其他下拉列表以及 gridview。

如果管理员以较低的顺序选择任何其他下拉列表，它将根据更改的选择重新加载表。

因此，某些选择需要很多加载时间。

是否可以在按钮单击事件中制作代码，就像单击时一样，它将首先检查管理员选择了哪些下拉菜单，并根据唯一选择的下拉菜单的值，我可以制作 gridview 并将其转储到 Excel 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:06:46.007

在按钮点击事件里面写这样的，

```
 string s1 = "";
        string s2 = "";
        if (dropdown1.SelectedIndex > -1)
           s2 = dropdown1.Text.Trim();
        else
           s2 = "";
        if (dropdown2.SelectedIndex > -1)
            s1 = dropdown2.Text.Trim();
        else
            s1 = ""; 
```

基于此字符串，您可以编写查询以从 db 获取数据，并将此数据绑定到您的 gridview。

# c# - 从查询创建 DataTable 的最快方法？

> ID：12947872
> 
> 赞同：5
> 
> 时间：2012-10-18T05:45:51.977
> 
> 标签：c#, .net, sql, datatable

`DataTable`将从该 SQL 查询生成的行数最少的代码是什么？

```
SELECT * 
FROM [Table1] 
WHERE ([Date] BETWEEN @Date1 AND @Date2) AND 
      ([Field1] IS NULL OR [Field2] IS NULL) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T05:49:53.210

使用[SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter%28v=vs.71%29.aspx)填充 DataTable。

```
DataTable dt = new DataTable();
using (SqlConnection yourConnection = new SqlConnection("connectionstring"))
{
    using (SqlCommand cmd = new SqlCommand("....your sql statement", yourConnection))
    {
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        {
            da.Fill(dt);
        }
    }
} 
```

将[using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)块与您的`SqlConnection`,一起使用`SqlCommand`，`SqlDataAdapter`因为它们实现了`IDisposable`接口。也使用[参数化](http://msdn.microsoft.com/en-us/library/c6tdby40.aspx)查询

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T05:54:10.213

尝试这个

```
SqlCommand command = new SqlCommand(query, conn);
DataTable dt = new DataTable();
using(SqlDataReader reader = command.ExecuteReader())
{
     dt.Load(reader);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T05:50:33.380

SqlDataAdaptor 和 FillSchema

它将即时创建您的表格

应用于数据集

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)

应用于数据表

[http://msdn.microsoft.com/en-us/library/152bda9x.aspx](http://msdn.microsoft.com/en-us/library/152bda9x.aspx)

# php - 如何在 Oracle 钱包中使用 PHP？

> ID：12947873
> 
> 赞同：0
> 
> 时间：2012-10-18T05:45:53.067
> 
> 标签：php, oracle, connect, oracle-call-interface, oci8

> **可能重复：**
> [使用 Oracle Wallet 从 PHP 连接到 Oracle DB](https://stackoverflow.com/questions/7194176/connect-from-php-to-an-oracle-db-using-an-oracle-wallet)

我们计划实施 Oracle Wallet。它从 sqlplus 工作，如下所示。这表明钱包功能正在运行。

```
 export ORACLE_HOME=/afs/engg/g/lcls/package/oracle/product/11.1.0.6/client
    export PATH=$ORACLE_HOME/bin:${PATH}
    export TNS_ADMIN=/afs/engg/g/lcls/tools/oracle/wallets/engg_reader

    $ sqlplus /@enggdev
    SQL> show user
    USER is "ENGG_READER" 
```

到目前为止，我还没有成功使它从 php 工作。我们安装了带有 OCI8 扩展的 php。请特别指导我 oci_connect 命令及其语法。

这是我的 php 文件 -

```
 <?php
    // Create connection to Oracle
    PutEnv("ORACLE_HOME=/afs/engg/g/lcls/package/oracle/product/11.1.0.6/client");
    PutEnv("TNS_ADMIN=/afs/engg/g/lcls/tools/oracle/wallets/engg_reader");

    $conn = oci_connect("/", "", "$TNS_ADMIN", null, OCI_CRED_EXT);

     if (!$conn) {
     $m = oci_error();
     echo $m['message'], "\n";
     exit;
     }
     else {
     print "Connected to Oracle!\n";
     }
     // Close the Oracle connection
     oci_close($conn);
     ?> 
```

当我执行命令时`$ /mccelog/package/php/php-5.4.7/bin/php connect4.php`

```
Warning: oci_connect(): OCIEnvNlsCreate() failed. There is something wrong 
with your system - please check that ORACLE_HOME and LD_LIBRARY_PATH are set and 
point to the right directories in /afs/engg/u/cd/divekar/technical/connect4.php on
line 7 
```

请注意，我已正确设置`ORACLE_HOME`和`LD_LIBRARY_PATH`. 第 7 行是导致该错误的 oci_connect 字符串。如何使用 oci8/oci_connect 连接到 Oracle 数据库？

提前谢谢你。问候。-Shashi Divekar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:48:01.347

谢谢你。你的回答很有用。我试图分配积分，但它不允许我分配积分。我做了一些实验，现在这对我有用。

我设置了一些环境变量，然后运行 ​​php 脚本。

# 导出 ORACLE_HOME=/nfs/lcls/package/oracle/product/11.1.0.6/client

# 导出 TNS_ADMIN=/nfs/lcls/tools/oracle/wallets/elog_reader

我从命令行运行以下测试 php 脚本，它现在正在工作。至少现在我有 OCI8 和 Oracle 钱包一起工作。

# php连接.php

```
<?php
// Create connection to Oracle

$conn = oci_connect("/", "", "MCCODEV", null, OCI_CRED_EXT);
if (!$conn) {
$m = oci_error();

echo $m['message'], "\n";
exit;
}
else {
     print "Connected to Oracle!\n";
      }
 // Close the Oracle connection
 oci_close($conn);
 ?> 
```

再次感谢您的帮助和提供的非常好的信息。我还将更新我的 stackoverflow.com 帖子。

问候。-Shashi Divekar

# java-me - 诺基亚 c1-01 中的 J2ME-App 无法连接到互联网

> ID：12947878
> 
> 赞同：2
> 
> 时间：2012-10-18T05:46:26.530
> 
> 标签：java-me, nokia, midp

我制作了一个需要互联网连接的应用程序，以便我可以在我的应用程序中显示一些数据。

但是当我在诺基亚 c1-01 中测试我的那个应用程序时，它无法从我的服务器获取数据，同时如果我在任何其他设备上检查我的应用程序，它们很容易连接到互联网，我可以看到我的应用程序。

这是我的代码：

```
 HttpConnection httpConn = null;

    InputStream is = null;
    OutputStream os = null;
    StringBuffer sb = new StringBuffer();

    try {
        // Open an HTTP Connection object
        httpConn = (HttpConnection) Connector.open(url);
        // Setup HTTP Request to POST
        httpConn.setRequestMethod(HttpConnection.POST);

        httpConn.setRequestProperty("User-Agent",
                "Profile/MIDP-2.0 Confirguration/CLDC-1.1");
        httpConn.setRequestProperty("Accept_Language", "en-US");
        //Content-Type is must to pass parameters in POST Request
        httpConn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

        os = httpConn.openOutputStream();

        os.write(params.getBytes());

        /**Caution: os.flush() is controversial. It may create unexpected behavior
        on certain mobile devices. Try it out for your mobile device **/
        //os.flush();
        // Read Response from the Server
        //StringBuffer sb = new StringBuffer();
        is = httpConn.openDataInputStream();
        int chr;
        while ((chr = is.read()) != -1) {
            sb.append((char) chr);
        }
    } finally {
        if (is != null) {
            is.close();
        }
        if (os != null) {
            os.close();
        }
        if (httpConn != null) {
            httpConn.close();
        }
    } 
```

我必须对代码进行哪些更改才能在诺基亚 C1-01 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:27:32.577

我想到了两件事。

第一个是微不足道的，与手机上的互联网设置有关。我不具体了解诺基亚 C1，但我知道许多设备都有设备的 Internet 设置 + Java 的另一个 Internet 设置。确保 Java 的 Internet 设置正确。仅仅因为您可以在手机上使用浏览器，并不意味着 Internet 连接适用于 Java MIDlet。

您可以研究的第二件事与 Content-Type 属性有关。

我在开发一款通过服务器上的 PHP 检索并将高分发送到我的网络服务器的游戏时遇到了这个问题。我发现它在我们的大多数测试手机上都能正常工作，而其中一些有问题，这很奇怪。

输出手机收到的数据显示 404 回复（或类似的东西，已经有一段时间了）。

在咨询了另一位 JavaME 开发人员后，我了解到：

一些设备向网络服务器发送特定指令：“你好。请给我一些来自 data.php 的 text/plain 类型的数据”。如果 data.php 包含标题（'Content-type: text/plain'），那么一切都很好。如果没有，那么服务器会回复：“对不起，伙计，我在那个地址没有任何文本/简单的东西”。

这仅在某些设备上发生，因为只有某些设备会发送该特定请求。

因此，您在 JavaME 部分的 setRequestProperty() 中定义的任何 Content-Type 在服务器端脚本中都必须相同。

希望这两件事中的一件有所帮助。:-)

# liferay - 更改 service.xml 并在 liferay 中构建服务时表未更新

> ID：12947884
> 
> 赞同：1
> 
> 时间：2012-10-18T05:46:48.753
> 
> 标签：liferay, portlet, liferay-6

我正在为liferay 开发自定义portlet。我的问题是一旦我创建了服务构建器并构建了服务，然后在我的数据库中创建了表。我的 service.xml 中有一些更改（添加了一些表列）但是现在当我构建服务时，我的数据库表没有更新表列。它和以前一样。

那么任何人都可以指导我为什么会发生这种情况？我是liferay的新手，总会发生一些变化，所以我需要解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:25:40.563

我得到了这个问题的解决方案..

1）..尝试从liferay中删除您的portlet... 2）..然后再次重新部署该portlet..解决了我的问题

如果有人有同样的问题，那么可以尝试这种方式

# jquery-mobile - (jquery) 搜索过滤栏显示和隐藏

> ID：12947893
> 
> 赞同：1
> 
> 时间：2012-10-18T05:47:25.350
> 
> 标签：jquery-mobile

我需要添加显示和隐藏搜索过滤器栏的功能

我尝试使用（示例）：

```
 setTimeout(showFilter,5000);

 function showFilter(){
    alert('showFilter');

    $.mobile.listview.prototype.options.filter = true;
    $('#workList').listview('refresh');

    setTimeout(hideFilter,1500);
 }

 function hideFilter(){
   alert('hideFilter');

   $.mobile.listview.prototype.options.filter = false;
   $('#workList').listview('refresh');
 } 
```

但不工作，你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:31:56.820

您可以`.hide()`在 searchfilter 的容器 div 上简单地隐藏它。以下代码将隐藏页面上的每个 searchfilter 文本框，因此如果您想隐藏某个子集，则必须将其缩小到 DOM 的特定部分。

```
$(".ui-input-search").hide(); 
```

用来`.show()`恢复它。或者，用于`.toggle()`在隐藏和可见之间来回切换。

（注意：在搜索框中输入的任何文本仍然适用，即使搜索框被隐藏。）

# java - 股票数据结构

> ID：12947894
> 
> 赞同：3
> 
> 时间：2012-10-18T05:47:25.493
> 
> 标签：java, data-structures, collections

以下场景最合适的数据结构是什么：需要整理股票报价（股票代码、价格）。每小时，需要按降序报告前 N 个股票（最高报价）。潜在地，一个小时内的报价数量可能达到数百万。由于频繁插入，带有比较器的数组列表将是一场灾难。TreeSet 似乎是一种选择 - 但有人可以建议一个更好的结构，如果有的话。（这可以包括在通用数据结构上构建，而不是使用现有的 java 集合类。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:59:16.920

除了 ，我不能提出任何建议`TreeSet`，但我可以指出一个可能的优化 - 似乎任何低于迄今为止第 N 个报价的报价根本不需要添加。这意味着树的大小最多为 N，而不是无界。

例如：

```
final int n = ...;
final NavigableSet<Quote> topNQuotes = new TreeSet<Quote>();

void addQuote(Quote quote) {
    //if the Set of quotes has reached N,
    if (topNQuotes.size() == n) {
        //get the greatest Quote that is less than this one
        Quote lowerQuote = topNQuotes.lower(quote);
        //if no such Quote was found in the Set, quit without adding
        if (lowerQuote == null) {
            return;
        }
        //otherwise remove and discard the lowest Quote from the Set
        topNQuotes.pollFirst();
    }
    //add the new Quote to the Set
    topNQuotes.add(quote);
} 
```

请注意，此示例不是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:55:06.503

从编写实时价格馈送的个人经验来看，如果速度是一个问题，那么占用一些额外的内存是值得的。老实说，如果可行的话，我会建议按价格或订单 ID 对您的价格信息进行散列。

另外，如果我对您的理解正确，您希望显示一个交易品种的前 N ​​个价格。虽然这 N 个价格可能有数百万个订单，但它们每个都可以整理成 N 个价格水平之一。因此，如果您创建一个价格水平对象，您的数据结构只需围绕指向这些价格水平对象的指针进行洗牌。在这种情况下，只要 N 不太大（因为特定交易品种的价格水平通常没有那么多），数组可能在局部性上足够快。

我还认为，如果您不想散列它，那么使用循环数组将是显示价格水平书籍的一个不错的解决方案。这样，在前面（即最低价格）和结尾（最高）的插入平均应该是恒定的时间。您还可以使用影子数组来确保 O(1) 恒定时间插入。

# jqgrid - jqGrid multipleGroup 向服务器发送查询

> ID：12947896
> 
> 赞同：1
> 
> 时间：2012-10-18T05:47:31.063
> 
> 标签：jqgrid

我有一个带有以下寻呼机的 jqGrid

```
.navGrid('#pager-mm',{add:false,edit:false,del:false,search:true,view:true},
 {},{},{},
 {multipleSearch:true,multipleGroup:true,showQuery: true},
 {}) 
```

当我构建具有嵌套 AND 和 OR 分组的复杂查询时，jqGrid 在客户端将正确的查询构建为字符串。我不想在我的服务器上重新构建相同的查询编写额外的代码，而是想将正确构建的客户端查询作为字符串发送到服务器。然而，

```
beforeSumbit:function() 
```

我搜索时没有被触发。如何将此自定义字符串发送到我的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:54:30.053

我不完全明白你真正想要什么。默认情况下，过滤器将作为`filters`参数发送到服务器。不过，您可以使用[onSearch](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asinge_searching#options)回调来访问搜索过滤器。您可以使用

```
var filters = $(this).jqGrid("getGridParam", "postData").filters; 
```

获得. `filters`_`postData`

**更新**： 我**永远不会相信在客户端创建的 SQL 语句片段**。如果您在服务器代码中使用从客户端发送的 SQL 片段，您将允许自动进行[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。如果安全性在您的应用程序中发挥作用，则不应使用 jqGrid 创建的 SQL 语句。

不过，如果您的问题具有纯理论性质，您可以使用`toSQLString`搜索过滤器的方法在搜索对话框中显示 SQL 语句。相应的代码可能如下所示

```
grid.jqGrid('navGrid', '#pager', {edit: false, add: false, del: false}, {}, {}, {}, {
    multipleSearch: true,
    multipleGroup: true,
    showQuery: true,
    recreateFilter: true,
    onSearch: function () {
        var $filter = $("#" + $.jgrid.jqID("fbox_" + this.id)),
            sql = $filter.jqFilter('toSQLString');
        alert(sql);
    }
}); 
```

[您可以在此处](http://www.ok-soft-gmbh.com/jqGrid/displaysqlquery.htm)找到相应的演示。顺便说一句，您不需要使用`showQuery: true`就可以使用`toSQLString`方法。

# visual-studio - 保存 TypeScript 文件时刷新 .js 文件

> ID：12947900
> 
> 赞同：2
> 
> 时间：2012-10-18T05:47:45.237
> 
> 标签：visual-studio, visual-studio-2012, typescript

> **可能重复：**
> [文件更改时自动编译](https://stackoverflow.com/questions/12719582/automatic-compilation-when-file-changes)

当我在 Visual Studio 中将 TypeScript 文件添加到我的项目时，解决方案资源管理器中的 .ts 文件下方会出现一个 JavaScript 文件（TypeScript 编译结果）。

构建项目时会刷新 .js 文件。有没有办法在保存 .ts 文件时刷新此文件而无需重建？（与 T4 文件一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:32:19.297

官方的答案是，还没有。但是，您有一些可用的解决方法：

[如何查看和编译所有 TypeScript 源代码？](https://stackoverflow.com/questions/12799237/how-to-watch-and-compile-all-typescript-sources)

# android - 以编程方式在android中添加视图

> ID：12947902
> 
> 赞同：-1
> 
> 时间：2012-10-18T05:47:49.547
> 
> 标签：android

我必须在android中水平添加两个相对的布局。我知道我必须使用addRule概念。但是我没有正确的链接来实现这一点。有人可以为我提供一些关于android中addRule的好教程以及解决方案这个问题。谢谢！[可以看出，两个相对布局应该在一个父布局中。以下是我的代码：

```
 //Layout on which my parentrelativelayout should be added 
        LinearaLayout ll=(LinearLayout)findViewbyId(R.id.ll);

        RelativeLayout parentrelativelayout=new RelativeLayout(mContext);
        parentrelativelayout.setId(1);
        parentrelativelayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        parentrelativelayout.setBackgroundColor(Color.BLACK);

        RelativeLayout rl_relativelayout1 = new RelativeLayout(mContext);
        rl_relativelayout1.setId(2);
        rl_relativelayout1.setLayoutParams(new LayoutParams(800,LayoutParams.WRAP_CONTENT));
        rl_relativelayout1.setBackgroundResource(R.drawable.voucher_row);

        RelativeLayout rl_relativelayout2=new RelativeLayout(mContext);
        rl_relativelayout2.setId(3);
        rl_relativelayout2.setBackgroundResource(R.drawable.grab_voucher);
        RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT); 
```

我需要在 android 中以编程方式实现这一点。] [1](http://i.stack.imgur.com/3DZzi.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:58:30.773

是的，这是可以实现的。检查这些。

1.  [http://android-er.blogspot.com/2012/05/add-and-remove-view-dynamically.html](http://android-er.blogspot.com/2012/05/add-and-remove-view-dynamically.html)
2.  [http://technotzz.wordpress.com/2011/11/04/android-dynamically-add-rows-to-table-layout/](http://technotzz.wordpress.com/2011/11/04/android-dynamically-add-rows-to-table-layout/)
3.  [http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)

另一种可能性是在 xml 上绘制布局，但使用可见性属性隐藏它。然后，如果满足条件，则显示它。

# jquery - 如何关闭浏览器窗口

> ID：12947903
> 
> 赞同：0
> 
> 时间：2012-10-18T05:47:53.500
> 
> 标签：jquery

> **可能重复：**
> [window.close() 在 Firefox 上不起作用，有什么解决方法吗？](https://stackoverflow.com/questions/1754374/window-close-doesnt-work-on-firefox-any-work-around)

单击使用 jquery 的按钮时，我需要关闭当前浏览器窗口。我尝试了很多方法，但它们不适用于所有浏览器：我的代码是：

```
$('#btnCloseBrowser').click(function () {
//                close();
//                this.close();
//                window.parent.close();
//                window.close();
//                self.cose();

            window.setTimeout("window.close()", 1000);
    });
}); 
```

// 关（）; // this.close(); // window.parent.close(); // window.close(); // self.cose();

这适用于 IE，但不适用于 Firefox、CHROME

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:54:37.140

查看[如何在浏览器窗口中关闭当前选项卡？](https://stackoverflow.com/questions/2076299/how-to-close-current-tab-in-a-browser-window?rq=1)

请注意，只有使用 JavaScript 打开的窗口才能关闭，`window.close()`否则通常较新的浏览器不允许任意关闭窗口。

# r - 有什么方法可以用较低时间尺度的信号填充（填充）每月动物园对象？

> ID：12947904
> 
> 赞同：2
> 
> 时间：2012-10-18T05:47:57.730
> 
> 标签：r, zoo, lubridate

假设我有一个每月一系列的动物园数据，其中包含来自集合 {0,1} 的信号。

例如

```
 a b c
Oct 2005 1 0 1
Nov 2005 0 1 1
Dec 2005 0 1 0
Jan 2006 1 0 0
Feb 2006 1 1 0
Mar 2006 0 0 1
Apr 2006 0 0 1
May 2006 0 1 1
Jun 2006 1 1 0
Jul 2006 0 1 1
Aug 2006 1 0 0
Sep 2006 0 1 1
Oct 2006 0 1 1
Nov 2006 1 0 0
Dec 2006 0 0 1
Jan 2007 1 1 1
Feb 2007 0 1 0
Mar 2007 1 1 0
Apr 2007 0 0 0
May 2007 1 0 0 
```

是否有一种巧妙的矢量化方法来使用信号值填充月份之间的每日数据？此外，它需要滞后一移。所以对于第 1 行，2005 年 10 月。a,b,c= c(1,0,1)，我想用该集合 {1,0,1} 填充 2005 年 11 月的所有内容。接下来，将是 2005 年 11 月 = {0,1,1}，整个 12 月都将填充这些值......等等，直到第 n 个月。

我宁愿从每月规模开始生成，但要分析填充的每日值。我正在考虑诸如自动过滤或excel中的数据透视表之类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:16:55.663

多亏了动物园，这实际上相当简单。首先，将对象的索引从 转换`yearmon`为`Date`。然后生成从该系列的开始到结束的每日日期序列。最后，合并并填充缺失值。

```
# assuming your monthly series is called 'Z'
# create new object and convert index to Date
z <- Z
index(z) <- as.Date(index(z))

# generate daily sequence
# note that yearmon are converted to the first Date of the month,
# so I add one month and subtract one day from the last yearmon value
dailySeq <- seq(start(z), as.Date(end(Z)+1/12)-1, by="1 day")

# merge z with empty zoo object containing the new daily index
d <- merge(z, zoo(,dailySeq))
# fill in missing values using last-observation-carried-forward
d <- na.locf(d) 
```

# ruby-on-rails - 从任何编码强制字符串为 UTF-8

> ID：12947910
> 
> 赞同：45
> 
> 时间：2012-10-18T05:48:13.027
> 
> 标签：ruby-on-rails, ruby, utf-8, character-encoding

在我的 Rails 应用程序中，我正在处理来自世界各地的 RSS 提要，有些提要的链接不是 UTF-8 格式。原始提要链接不受我的控制，为了在应用程序的其他部分使用它们，它们需要采用 UTF-8 格式。

如何检测编码并转换为 UTF-8？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-18T06:39:06.457

红宝石 1.9

“强制”编码很容易，但它不会转换字符只是更改编码：

```
str = str.force_encoding('UTF-8')

str.encoding.name # => 'UTF-8' 
```

如果要执行转换，请使用`encode`：

```
begin
  str.encode("UTF-8")
rescue Encoding::UndefinedConversionError
  # ...
end 
```

我肯定会阅读以下帖子以获取更多信息： http:
[//graysoftinc.com/character-encodings/ruby-19s-string](http://graysoftinc.com/character-encodings/ruby-19s-string)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-06-04T16:53:03.853

这将确保您具有正确的编码并且不会出错，因为它将任何无效或未定义的字符替换为空白字符串。

这将确保无论如何，您有一个有效的 UTF-8 字符串

```
str.encode(Encoding.find('UTF-8'), {invalid: :replace, undef: :replace, replace: ''}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T05:56:45.860

[图标v](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/iconv/rdoc/Iconv.html#method-c-iconv)

```
require 'iconv'
i = Iconv.new('UTF-8','LATIN1')
a_with_hat = i.iconv("\xc2") 
```

总结：iconv gem 完成了转换编码的所有工作。确保它已安装：

```
gem install iconv 
```

现在，您需要知道您的字符串当前采用什么编码，因为 Ruby 1.8 将字符串视为字节数组（没有内在编码）。例如，假设您的字符串是 latin1 并且您想将其转换为 utf-8

```
require 'iconv'

string_in_utf8_encoding = Iconv.conv("UTF8", "LATIN1", string_in_latin1_encoding) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-06-12T09:00:36.510

只有这个解决方案对我有用：

```
string.encode('UTF-8', 'binary', invalid: :replace, undef: :replace, replace: '') 
```

请注意**二进制**参数。

# jquery - jquery动画的加载顺序

> ID：12947911
> 
> 赞同：0
> 
> 时间：2012-10-18T05:48:16.777
> 
> 标签：jquery

我刚刚开始一个 jQuery 教程，我有一个关于 jQuery 动画加载顺序的基本问题。

当我使用以下 HTML 代码时，单击链接会同时显示警报和隐藏动画：

```
 <body>
   <a href="http://jquery.com/">jQuery</a>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
   <script>
     $(document).ready(function(){
       $("a").click(function(event){
         alert("As you can see, the link no longer took you to jquery.com");
         event.preventDefault();
       });
       $("a").click(function(event){
         event.preventDefault();
         $(this).hide("slow");
       });
     });
   </script>
 </body> 
```

但是，当我从 document.ready 函数中取出第二次单击函数以使代码如下所示时，会出现弹出窗口并且文本消失，但不会发生隐藏动画。

```
 <!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="utf-8">
   <title>jQuery demo</title>
   <style>
    a.test { font-weight: bold; }
  </style>
 </head>
 <body>
   <a href="http://jquery.com/">jQuery</a>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
   <script>
     $(document).ready(function(){
       $("a").click(function(event){
         alert("As you can see, the link no longer took you to jquery.com");
         event.preventDefault();
       });
     });
     $("a").click(function(event){
       event.preventDefault();
       $(this).hide("slow");
     });
   </script>
 </body>
 </html> 
```

谁能解释为什么隐藏动画只出现在第一个例子而不是第二个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:52:53.570

这是因为，在您的第二个示例中，最后一次调用`click()`位于`ready`处理程序之外。

执行该调用时，DOM 可能尚未准备好，因此处理程序未绑定，之后也不会发生动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:55:14.707

This is because the second handler is not get attached to all the anchor `<a>` tags on the div.

```
 $("a").click(function(event){ //This function will execute as the script loads
                               // and during this time, DOM might have been loaded yet
   event.preventDefault();
   $(this).hide("slow");
 }); 
```

**But**, by wrapping this inside.

```
$(document).ready(function() {

    // DOM is loaded

}); 
```

You first make sure the DOM is loaded first, then attach the handler.

# xcode - CALayer 渲染导致带有 OSX 10.7.4 的新 MacBook Pro 上的内存泄漏

> ID：12947912
> 
> 赞同：3
> 
> 时间：2012-10-18T05:48:19.007
> 
> 标签：xcode, macos, memory-leaks, calayer, xcode-instruments

在使用 CALayer 渲染开发 Mac OSX 应用程序时，我们发现 Apple 官方示例代码 'CALayerEssentials' 可能会导致装有 OSX 10.7.4 的新 MacBook Pro（2012 年中 15' Retina）上的内存泄漏。

内存泄漏一般描述：

1.  使用 Xcode 运行“CALayerEssentials”项目；（你可以在 Xcode Organizer -> OS X 10.7 Core Library -> Graphics & Animation -> Animation -> CALayerEssentials 下找到这个项目）
2.  打开 Instruments Leaks 模板，并附加到 CALayerEssentials 进程 ID；
3.  开始记录，Leaks 会提示大约每 10 秒发生一次内存泄漏；
4.  在 Leaks Object 面板中，有一个项目 'Malloc 48 Bytes' 随着计数和内存大小的增加；
5.  大约 15 分钟后，泄漏大小将增加到大约 2.48 MB；
6.  大约 78 分钟后，泄漏大小将增加到大约 23.54 MB；
7.  通过检查 vmmap 结果地址区域中的泄漏地址，表明所有地址都与 QuartzCore_0x6bb2a800 有关，如下行：

MALLOC_OTHER 086af000-086d1000 [ 136K] rw-/rwx SM=COW QuartzCore_0x6bb2a800

这是运行 CALayerEssentials 并监控其内存泄漏的屏幕截图：http: [//smartsweetie.com/uploads/screenshot1.png](http://smartsweetie.com/uploads/screenshot1.png)

这是内存泄漏机器系统配置：

*   机器：MacBook Pro（2012 年中，15' Retina）
*   处理器：2.3 GHz 英特尔
*   酷睿 i7 内存：8 GB 1600 MHz DDR3
*   显卡：NVIDIA GeForce GT 650M 1024 MB
*   软件：Mac OS X Lion 10.7.4 (11E2620)

但是，在其他机器上运行相同的 CALayerEssentials 不会有 CALayer 内存泄漏问题。

*   机器：MacBook Pro（2011 年末，15'）
*   处理器：2.2 GHz 英特尔酷睿 i7
*   内存：4 GB 1333 MHz DDR3
*   显卡：AMD Radeon HD 6750M 512 MB
*   软件：Mac OS X Lion 10.7.4 (11E53)

装有 OS X 10.7.4 的新 MacBook Pro 上的 CALayer 内存泄漏是否存在任何已知问题？或者有什么建议可以进一步调查这个问题？

# web-services - 使用单点登录进行身份验证

> ID：12947913
> 
> 赞同：-1
> 
> 时间：2012-10-18T05:48:20.267
> 
> 标签：web-services, authentication, soap, web, single-sign-on

在我的 Web 服务项目中，我需要包含使用单点登录和 spring 的身份验证部分。我是这项技术的新手。过去几天我一直在寻找示例应用程序，但找不到。请通过建议任何教程来帮助我。对我会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:59:57.023

对于单点登录，用于验证的 Web 服务方法应将用户名和密码作为参数，并且此验证方法应返回 MAC（'Message Authentication Code'，也称为'Authentication Token'）。

对其他 Web 服务方法的所有后续调用都应包含此 MAC，以便 Web 服务方法知道哪个用户正在调用它们。

```
//example pseudo code for authentication
string web_service_auth(string User_Name,string Password) {
   ...
   string Mac;
   if (access_accepted(User_Name,Password))
     Mac = ...;
   else
     Mac = "access-denied";
   return Mac;
}

//example pseudo code for other methods
string web_service_get_my_info(string Mac) {
  if (!mac_is_valid(Mac))
    return "invalid-mac";
  ...
  string User_Name = mac_to_username(Mac);
  string Info      = get_user_info(User_Name);
  return Info;
} 
```

# c - 使用 CUDA 5 的 cudaMemcpyToSymbol 出错

> ID：12947914
> 
> 赞同：14
> 
> 时间：2012-10-18T05:48:21.080
> 
> 标签：c, cuda, gpu-constant-memory

**问题**

我使用常量内存准备了一个示例 CUDA 代码。我可以在 cuda 4.2 中成功运行它，但是 当我使用 CUDA 5 编译时出现*“无效的设备符号” 。我已在此处附加示例代码。*

**编码**

```
#include <iostream>
#include <stdio.h>
#include <cuda_runtime.h>
#include <cuda.h>

struct CParameter
{
    int A;  
    float B;
    float C;
    float D;
};

__constant__ CParameter * CONSTANT_PARAMETER;   
#define PARAMETER "CONSTANT_PARAMETER"

bool ERROR_CHECK(cudaError_t Status)
{
    if(Status != cudaSuccess)
    {
        printf(cudaGetErrorString(Status));
        return false;
    }   
    return true;
}

// Kernel that executes on the CUDA device
__global__ void square_array(float *a, int N)
{
  int idx = blockIdx.x * blockDim.x + threadIdx.x;
  if (idx<N)
  {
      a[idx] = CONSTANT_PARAMETER->A * a[idx];
  }
}
////Main Function/////
int main(void)
{
    /////Variable Definition
    const int N = 10;
    size_t size = N * sizeof(float);
    cudaError_t Status = cudaSuccess;

    CParameter * m_dParameter;
    CParameter * m_hParameter;
    float * m_D;
    float * m_H;

    //Memory Allocation Host
    m_hParameter = new CParameter;
    m_H = new float[N];

    //Memory Allocation Device
    cudaMalloc((void **) &m_D, size);
    cudaMalloc((void**)&m_dParameter,sizeof(CParameter));

    ////Data Initialization
    for (int i=0; i<N; i++) 
        m_H[i] = (float)i;

    m_hParameter->A = 5;
    m_hParameter->B = 3;
    m_hParameter->C = 98;
    m_hParameter->D = 100;

    //Memory Copy from Host To Device
    Status = cudaMemcpy(m_D, m_H, size, cudaMemcpyHostToDevice);
    ERROR_CHECK(Status);

    Status = cudaMemcpy(m_dParameter,m_hParameter,sizeof(CParameter),cudaMemcpyHostToDevice);
    ERROR_CHECK(Status);        

    Status = cudaMemcpyToSymbol(PARAMETER, &m_dParameter, sizeof(m_dParameter));
    ERROR_CHECK(Status);

    // Do calculation on device:
    int block_size = 4;

    int n_blocks = N/block_size + (N%block_size == 0 ? 0:1);

    square_array <<<n_blocks, block_size>>>(m_D,N);

    // Retrieve result from device and store it in host array
    cudaMemcpy(m_H, m_D, sizeof(float)*N, cudaMemcpyDeviceToHost);

    // Print results
    for (int i=0; i<N; i++)
        printf("%d %f\n", i, m_H[i]);

    // Cleanup
    free(m_H);
    free(m_hParameter);
    cudaFree(m_dParameter);
    cudaFree(m_D);
    return 0;   
} 
```

**我已经尝试过*WINDOWS：CUDA 5.0 Production Release*，显卡是 GTX 590。**
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T06:14:55.070

为了避免[“字符串类型”](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)，在 CUDA 4.1 的 CUDA 运行时 API 函数中不推荐使用字符串来引用设备符号，并在 CUDA 5.0 中删除。

[CUDA 5 发行说明](http://developer.download.nvidia.com/compute/cuda/5_0/rel/docs/CUDA_Toolkit_Release_Notes_And_Errata.txt)如下：

> ** 不再支持使用字符串来指示设备符号，这在某些 API 函数中是可能的。相反，应直接使用该符号。

如果您将代码更改为以下内容，它应该可以工作。

```
Status = cudaMemcpyToSymbol(CONSTANT_PARAMETER, &m_dParameter, sizeof(m_dParameter));
ERROR_CHECK(Status); 
```

![在此处输入图像描述](../Images/94f815366b0bdaa16e9ed7d71da031fc.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T06:16:15.117

来自[CUDA 5.0 发行说明](http://docs.nvidia.com/cuda-toolkit-release-notes/index.html)：

> ** 不再支持使用字符串来指示设备符号，这在某些 API 函数中是可能的。相反，应直接使用该符号。"

这些 API 函数仍然存在，但它们现在只接受目标符号参数作为裸标识符，而不是作为裸标识符或命名 ident 的字符串文字。例如

```
__ device__ __ constant__ type ident;

main() { cudaMemcpyToSymbol("ident", ...); } // no longer valid, returns cudaErrorInvalidSymbol

main() { cudaMemcpyToSymbol(ident, ...); }   // valid 
```

所以摆脱这个：

```
#define PARAMETER "CONSTANT_PARAMETER" 
```

并改变这个：

```
Status = cudaMemcpyToSymbol(PARAMETER, &m_dParameter, sizeof(m_dParameter)); 
```

对此：

```
Status = cudaMemcpyToSymbol(CONSTANT_PARAMETER, &m_dParameter, sizeof(m_dParameter)); 
```

我认为它会起作用。

# android - 通过android远程服务器中的Web服务保存和访问数据

> ID：12947915
> 
> 赞同：4
> 
> 时间：2012-10-18T05:48:22.243
> 
> 标签：android, web-services, webserver

> **可能重复：**
> [如何使 Android 应用程序通过 Internet 与 Web 服务器通信？](https://stackoverflow.com/questions/9501550/how-can-i-make-an-android-app-communicate-with-a-web-server-over-the-internet)

我正在尝试将数据（用户名和密码）保存在服务器中，并在每次登录时通过服务器进行访问。

如何在Android中创建连接类和用户类和访问类？

# android - Android：从后台堆栈中删除所有以前的活动

> ID：12947916
> 
> 赞同：142
> 
> 时间：2012-10-18T05:48:29.163
> 
> 标签：android, back-stack

**当我在我的个人资料**活动中单击**注销**按钮时，我想将用户带到**登录**页面，他需要在其中使用新凭据。

 ****因此我使用了这段代码：

```
Intent intent = new Intent(ProfileActivity.this,
        LoginActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

在`onButtonClick`注销按钮中。

但问题是当我单击登录活动上的设备后退按钮时，它会将我带到 ProfileActivity。当我按下 LoginActivity 上的设备后退按钮时，我期待应用程序应该关闭。

我究竟做错了什么？

我还在`android:launchMode="singleTop"`清单中为我的**LoginActivity添加了**

谢谢你

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2014-06-13T12:33:11.473

[这里](http://tips.androidhive.info/2013/10/how-to-clear-all-activity-stack-in-android/)提出的解决方案对我有用：

### 爪哇

```
Intent i = new Intent(OldActivity.this, NewActivity.class);
// set the new task and clear flags
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
startActivity(i); 
```

### 科特林

```
val i = Intent(this, NewActivity::class.java)
// set the new task and clear flags
i.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK
startActivity(i) 
```

但是，它需要 API 级别 >= 11。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-18T08:20:24.703

这是使用注销按钮时清除所有应用程序活动的一种解决方案。

每次启动 Activity 时，都像这样启动它：

```
Intent myIntent = new Intent(getBaseContext(), YourNewActivity.class);
startActivityForResult(myIntent, 0); 
```

当您想关闭整个应用程序时，请执行以下操作：

```
setResult(RESULT_CLOSE_ALL);
finish(); 
```

RESULT_CLOSE_ALL 是具有唯一整数的最终全局变量，表示您要关闭所有活动。

然后定义每个活动的`onActivityResult(...)`回调，以便当活动返回 RESULT_CLOSE_ALL 值时，它还调用`finish()`：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch(resultCode)
    {
    case RESULT_CLOSE_ALL:
        setResult(RESULT_CLOSE_ALL);
        finish();
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

这将导致关闭所有活动的级联效应。

然而，这是一种黑客攻击，并且`startActivityForResult`以一种并非设计为使用的方式使用。

也许更好的方法是使用广播接收器，如下所示：

[注销时，清除 Activity 历史堆栈，防止“返回”按钮打开仅登录的 Activity](https://stackoverflow.com/questions/3007998/on-logout-clear-activity-history-stack-preventing-back-button-from-opening-l/3008684#3008684)

有关其他方法，请参见这些线程：

[Android：清除后台堆栈](https://stackoverflow.com/questions/5794506/android-clear-the-back-stack?lq=1)

[完成之前的所有活动](https://stackoverflow.com/questions/6330260/finish-all-previous-activities)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-09-08T04:56:40.833

要完全清除活动堆栈，您需要使用 TaskStackBuilder 创建一个新的任务堆栈，例如：

```
Intent loginIntent = LoginActivity.getIntent(context);
TaskStackBuilder.create(context).addNextIntentWithParentStack(loginIntent).startActivities(); 
```

这不仅会创建一个新的、干净的任务堆栈，如果您的 LoginActivity 有父活动，它还将允许“向上”按钮正常运行。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-12-09T07:26:23.477

`finishAffinity()`在 API 16 中添加。`ActivityCompat.finishAffinity()`在以前的版本中使用。当您将使用意图启动任何活动并完成当前活动时。现在 `ActivityCompat.finishAffinity()`改用`finish()`. 它将完成当前活动下方的所有堆叠活动。这对我来说可以。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-04-24T10:30:32.410

什么对我有用

```
Intent intent = new Intent(getApplicationContext(), HomeActivity.class);
ComponentName cn = intent.getComponent();
Intent mainIntent = IntentCompat.makeRestartActivityTask(cn);
startActivity(mainIntent); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-02-24T19:03:10.960

对于 API 11+，您可以`Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK`这样使用：

```
Intent intent = new Intent(this, MyActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK);
this.startActivity(intent); 
```

它将完全清除所有以前的活动并开始新的活动。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-07-11T11:54:40.283

你可以试试`finishAffinity()`，它会关闭所有当前活动并在 Android 4.1 及以上版本上运行

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-10-18T06:04:32.537

我可以建议您的一种可能的解决方案是为我的**ProfileActivity**`android:launchMode="singleTop"`添加清单。并且当单击注销时，您可以*再次***注销您*****的 LoginActivity。*** 在注销时你可以调用它。

 ******```
Intent in = new Intent(Profile.this,Login.class);
                in.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(in);
                finish(); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-03-05T10:55:33.683

使用以下内容`activity`

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK); 
```

删除**CLEAR_TASK**标志以供片段使用。

我希望这可能对某些人有用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-01-17T10:38:21.940

**我也面临同样的问题。。**

在登录活动中，我所做的是。

```
 Intent myIntent = new Intent(MainActivity.this, ActivityLoggedIn.class);
    finish();
    MainActivity.this.startActivity(myIntent); 
```

**注销时**

```
 Intent myIntent = new Intent(ActivityLoggedIn.this, MainActivity.class);
   finish();
   ActivityLoggedIn.this.startActivity(myIntent); 
```

**这很好用，但是当我在 ActivityLoggedIn 中并且我最小化应用程序并单击应用程序抽屉上的启动器按钮图标时，MainActivity 再次启动：-/我正在使用标志**

```
android:LaunchMode:singleTask 
```

**对于 MainActivity。**

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-01-09T09:06:39.533

没有一个意图标志对我有用，但这是我修复它的方法：

当用户从一个活动中退出时，我必须从该活动中广播一条消息，然后在我想关闭的活动中接收它，然后我调用 finish(); 它工作得很好。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-10-18T06:07:55.237

就收下吧

```
Intent intent = new Intent(ProfileActivity.this,
    LoginActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
startActivity(intent); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-07-03T11:04:16.603

在 API 级别 11 或更高版本中，使用`FLAG_ACTIVITY_CLEAR_TASK`并`FLAG_ACTIVITY_NEW_TASK`标记 Intent 以清除所有活动堆栈。

```
Intent i = new Intent(OldActivity.this, NewActivity.class);
// set the new task and clear flags
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |  Intent.FLAG_ACTIVITY_CLEAR_TASK)
startActivity(i); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-06-13T04:24:44.737

试试这个它会工作：

```
Intent logout_intent = new Intent(DashboardActivity.this, LoginActivity.class);
logout_intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
logout_intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
logout_intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
startActivity(logout_intent);
finish(); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-01-09T18:34:46.170

## 高级、可重用的 Kotlin：

您可以使用 setter 方法直接设置标志。在 Kotlin`or`中是[Java](https://stackoverflow.com/a/45996002/974045)按位或`|`.

```
intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK 
```

如果您打算定期使用它，请创建一个 Intent 扩展功能

```
fun Intent.clearStack() {
    flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK
} 
```

然后，您可以在启动意图之前直接调用此函数

```
intent.clearStack() 
```

如果您需要在其他情况下添加附加标志的选项，请在扩展函数中添加一个可选参数。

```
fun Intent.clearStack(additionalFlags: Int = 0) {
    flags = additionalFlags or Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-09-12T08:29:03.707

为您的活动添加到清单`android:launchMode="singleTask"`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-28T12:15:16.027

您可以使用以下方法

```
 fun signOut(context: Context) {
        try {
                val intent = Intent(context, SplashActivity::class.java)
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK)
                context.startActivity(intent)
                (context as Activity).finishAffinity()
            }
        } catch (e: Exception) {
            LogUtils.logE("EXCEPTION", e)
        }

    } 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2015-06-12T06:33:06.703

**用这个**

```
Intent i1=new Intent(getApplicationContext(),StartUp_Page.class);
i1.setAction(Intent.ACTION_MAIN);
i1.addCategory(Intent.CATEGORY_HOME);
i1.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i1.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
i1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
startActivity(i1);
finish(); 
```**********

# yii - yii : 如何在 Yii 配置 SEO 友好的 url？

> ID：12947920
> 
> 赞同：1
> 
> 时间：2012-10-18T05:48:47.683
> 
> 标签：yii, seo

我通过 yiic 创建了一个应用程序。然后我尝试制作一个 SEO 网址。我在 [app root]/protected/config/main.php 取消注释 urlManager。我将以下内容添加到 [app root]/.htaccess 中。

> 重写引擎开启
> 
> # 如果目录或文件存在，直接使用
> 
> RewriteCond %{REQUEST_FILENAME} !-f
> 
> RewriteCond %{REQUEST_FILENAME} !-d
> 
> # 否则转发到 index.php
> 
> 重写规则。索引.php

当我浏览 [app]/site/index 时，我收到错误 404 - 找不到对象。但是如果我通过 [app]/index.php?r=site/index 浏览，它会显示我的应用页面。我通过谷歌搜索跟踪了许多网站。但我得到了同样的错误。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:54:46.487

```
Try to use this :

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\?*$ index.php/$1 [L,QSA] 
```

您可以在 Yii 中使用 urlManager 来自定义 url 规则，而不是使用 .htaccess。在 urlManager 上阅读以了解详细信息。我希望这篇文章也可能有助于给你这个想法。[Yii 中的控制 url：controller/action/id 到 /id](https://stackoverflow.com/questions/10908931/controlling-url-in-yii-controller-action-id-to-id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:44:50.890

我自己找到了解决方案。1\. 在 app/protected/config/main.php 取消注释 urlManager 2\. 在 app/ 文件夹下创建 .htaccess 文件。（重要：不在 app/protected/ 文件夹下） 3\. 将以下代码复制并粘贴到新的 .htaccess 文件中

```
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

就这些。谢谢大家帮助我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:14:54.397

[查看这篇关于在 Yii 中重写 URL 的文章](http://yiitutorials.net/easy/easy-url-rewriting-with-yii)

此外，在您的配置中，将 showScriptName 设置为 false

```
'urlManager'=>array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    ... 
```

# ios - 如何在 iOS 中的 FlipBoard Animation 等视图之间翻转？

> ID：12947925
> 
> 赞同：1
> 
> 时间：2012-10-18T05:49:18.707
> 
> 标签：ios, flip, flipboard

我想在 iOS 5 中从一个视图切换到另一个视图，它可以正常切换。

但我想在**FlipBoard 动画**等视图之间翻转。

是否可以？如果是，请帮助我在我的项目中执行此操作。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:58:04.940

看看：[https](https://github.com/mpospese/MPFoldTransition) ://github.com/mpospese/MPFoldTransition这可能会帮助你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-08T20:39:01.037

我试图通过使用 CALayers 和 Core Animation 来解决这个问题。我有两个主要层来完成这个动画，一个静态层和一个动画层。

静态层是整个视图的大小。该层没有动画，它只包含两个图像，左侧和右侧（左侧和右侧图像也是您要翻转的页面的屏幕截图）。动画层是整个视图的一半大小，该层动画执行翻转动画。动画层的正面和背面也是当前页面和下一页的屏幕截图。

例如，假设我们要翻到下一页。

静态图层的左侧将包含当前页面左侧的屏幕截图。右侧将包含下一页右侧的屏幕截图。动画层将位于静态视图的顶部，其正面将包含当前页面右侧的屏幕截图。动画层的背面将包含下一页左侧的屏幕截图。

当您平移手指时，您将在动画层的 y 轴上执行 CATransform3DRotate。因此，当您的手指从屏幕右侧移动到左侧时，动画层将翻转并显示静态视图的右侧和自身的背面。

这是在图层（animationLayer CALayer）上执行翻转动画的基本代码。

```
 var t = CATransform3DIdentity
    t.m34 = 1.0/850 //Adds depth to the animation
    t = CATransform3DRotate(t, newRadianAngleValue, 0, 1, 0)

    CATransaction.begin()
    CATransaction.setAnimationDuration(0)
    yourAnimationCALayer.transform = t
    CATransaction.commit() 
```

我创建了自己的使用这个基本概念的库，请查看。（虽然仍在进行中）

[https://github.com/djk12587/DJKSwiftFlipper](https://github.com/djk12587/DJKSwiftFlipper)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T06:06:11.680

[在此链接](https://github.com/Dillion/iOS-Flip-Transform)下载代码。它可以像 FlipBorad 一样呈现精确的输出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-13T12:36:26.333

看看这个

[https://github.com/ITechRoof/ITRFlipper](https://github.com/ITechRoof/ITRFlipper)

这更简单，更易于与自定义视图一起使用。

# java - 查找arraylist中的重复元素并显示

> ID：12947926
> 
> 赞同：5
> 
> 时间：2012-10-18T05:49:26.397
> 
> 标签：java, collections, arraylist

有谁能够帮我？我需要编写一个程序，其中有 10 个元素，`arraylist`我需要找到它有多少重复值，并计算和显示这些值。

例如：说我有

```
list = {"stack", "overflow", "stack", 
        "yahoo", "google", "msn", 
        "MSN", "stack", "overflow", "user" } 
```

结果应该是：

```
stack = 3
overflow = 2
google = 1
msn = 2
yahoo =1
user = 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T05:53:48.343

使用哈希映射。这是一个简单的实现

```
List<String> strings = new ArrayList<String>();
strings.put("stack", "overflow", "stack", "yahoo", "google", "msn", "MSN", "stack", "overflow", "user");

Map<String, Integer> counts = new HashMap<String, Integer>();

for (String str : strings) {
    if (counts.containsKey(str)) {
        counts.put(str, counts.get(str) + 1);
    } else {
        counts.put(str, 1);
    }
}

for (Map.Entry<String, Integer> entry : counts.entrySet()) {
    System.out.println(entry.getKey() + " = " + entry.getValue());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T05:51:44.693

使用[Google Guava](http://code.google.com/p/guava-libraries/)库的`MultiSet`. 它支持添加多个元素，并计算多重集包含的每个元素的出现次数。

```
Multiset<String> wordsMultiset = HashMultiset.create();
wordsMultiset.addAll(words);
for(Multiset.Entry<String> entry : wordsMultiset.entrySet() ){
     System.out.println("Word : "+entry.getElement()+" count -> "+entry.getCount());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T05:51:23.667

像这样使用`hashmap`
：

```
Map<String, Integer> occurrencies = new HashMap<String, Integer>();
for (String word : list) {
    occurrencies.put(word, occurrencies.containsKey(word)
    ? occurrencies.get(word) + 1 : 1);
}
for (Entry<String, Integer> entry : occurrencies.entrySet()) {
    System.out.println("Word: "+entry.getKey()
                     + ", occurences: "+entry.getValue());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T05:52:38.223

```
Map<String, Integer> frequency = new HashMap<String, Integer>();
for (String element : list) {
    if (frequency.contains(element)) {
        frequency.put(element, frequency.get(element) + 1);
    }
    else {
        frequency.put(element, 1);
    }
}
for (Map.Entry<String, Integer> entry : frequency.entrySet()) {
    System.out.print(entry.getKey() + " = " + entry.getValue() + " ");
}
System.out.println(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T05:51:54.977

用一个`HashMap`

```
Map<String, Integer> freqMap = new HashMap<String, Integer>(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T05:52:17.750

创建一个`Map<String, Integer>`，然后遍历您的`ArrayList`.

**然后对于每个元素： -**

*   如果它已经存在于 Map 中，则`Integer`将该元素的值增加 1
*   如果不存在，则添加`initial Integer`值为 1的元素

# ruby - 只安装heroku客户端，不安装其他东西

> ID：12947936
> 
> 赞同：4
> 
> 时间：2012-10-18T05:50:22.750
> 
> 标签：ruby, heroku, rvm

我正在为我的 Ruby 安装使用 RVM。

我最近在安装 heroku 工具带时遇到了一个问题，它在我的实际系统上安装了 Ruby 1.9.1，然后重写了环境变量，并破坏了我的 ruby​​ cli。我不得不删除所有内容，重新安装 RVM，重新安装 gems，等等。

关键是，我希望能够使用 heroku 客户端，可能还有工头，但我不希望工具带尝试在我的系统上安装 git 和 ruby​​ 1.9.1。

我尝试执行 gem install 版本，但它指出 gem 已折旧，并且我要安装 toolbelt。

任何帮助将不胜感激。

感谢您提供所有周到的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T05:43:58.247

转到[github 上的 Heroku CLI](https://github.com/heroku/heroku)并从其他设置下载 tarball。提取 Tarball 并将生成的文件移动到`/usr/local/heroku`. 添加`/usr/local/heroku/bin`到您的`PATH`. 确保从任何项目 gem 文件中删除 Heroku gem。重新加载终端，Heroku CLI 应该可以工作了。

你可以`which heroku`从你的项目目录运行，你应该得到`/usr/local/heroku/bin/heroku`.

由于它是自我更新的，因此您只需要执行一次。

如果您想要 Foreman，只需使用 Gem 版本。

将不会使用此过程安装 Git 和 Ruby。

**更新：** Heroku 现在有一个[安装脚本，用于在](https://toolbelt.heroku.com/standalone)没有 Foreman 和 Git 的情况下独立安装 Heroku 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T05:59:05.420

在 Windows 上，Heroku Toolbelt 安装程序提供完整安装和自定义安装之间的选择。如果选择自定义，则可以选择要安装的组件。

![在此处输入图像描述](../Images/b6d48867ff401d7b7dabe863ce2cd05e.png)

# c++ - 指向具有指针成员的对象的指针

> ID：12947937
> 
> 赞同：0
> 
> 时间：2012-10-18T05:50:24.763
> 
> 标签：c++, pointers

指向指针的指针在 C++ 中是否合法？我遇到了这个问题：[Pointer to Pointer to Pointer](https://stackoverflow.com/questions/4655963/pointer-to-pointer-to-pointer)

但答案尚不清楚它是否是合法的 c++。假设我有：

```
class A{
public:
    void foo(){
        /* ect */
    }
};

class B{
public:
    A* a;
    /* ect */
};

void Some_Func() {
    B *b;

    // besides this looking ugly, is it legal c++?
    b->a->foo();
}; 
```

线`b->a->foo()`可以写吗？有没有更好的方法来表示这个表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:57:06.797

这是完全有效的。但是您使用的术语“*指向指针的指针*”是错误的。

该术语表示双指针`**P`，例如**保存另一个指针地址的指针**。

但你的情况是指针（A类）是一个类的成员，其指针（B类）是由你创建的`some_func`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:54:26.847

非法，“a”是私有的。“富”也是如此。

如果更正为“公共”，那么它们是合法的构造。

从您的代码中很难找到“更好”的方法。但是您可以修改代码以使代码看起来更清晰：

```
class A{
public:
    void foo(){ cout << "Work";}
};

class B{
private:
    A *a;
public:
    A& getA(){
       return *a;
    }
};

void SomeFunction()
{
    B *b = new B();
    B& bRef = *b;
    bRef.getA().foo(); //better looking code? 
        delete b;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:09:04.627

这是合法的，但在您的示例中，您的程序将崩溃（如果您可以编译它，因为您的成员是私有的），因为您没有创建 B 的实例

```
void Some_Func() {
    B *b;  // uninitialized B ptr  should be   B* b = new B;

    // legal
    b->a->foo();
}; 
```

尽管您可能想重新考虑直接访问变量，而是使用 getter/setter 来访问私有成员变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T05:53:51.620

是的，但是你必须使用指向指针的指针，如`**P`.
实际上，如果我们想访问一个持有另一个指针的指针，那么我们可以这样做。这在 c++ 中是允许的，但请记住，只有在您分配了一个指针的情况下`pointer p`

# .htaccess - .htaccess 将以 / 或 index.html 结尾的文件重定向到 .shtml

> ID：12947941
> 
> 赞同：0
> 
> 时间：2012-10-18T05:50:49.263
> 
> 标签：.htaccess, redirect

将我的站点转移到具有新文件结构和文件扩展名的新 CMS 后，我需要将所有以 / 或 index.html 结尾的文件重定向到 .shtml：

example.com/violent-crimes/assault-with-a-deadly-weapon/
到
example.com/violent-crimes/assault-with-a-deadly-weapon.shtml

example.com/violent-crimes/assault-with-a-deadly-weapon/index.html
到
example.com/violent-crimes/assault-with-a-deadly-weapon.shtml

example.com/violent-crimes/index.html
到
example.com/violent-crimes.shtml

example.com/violent-crimes/
到
example.com/violent-crimes.shtml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:32:57.917

尝试将这些规则添加到文档根目录中的 htaccess 文件中，高于可能已经存在的任何规则：

```
RewriteEngine On
RewriteRule ^(.*)(/|/index.html)$ /$1.shtml [L,R=301] 
```

# openerp - OpenERP 自定义编号

> ID：12947942
> 
> 赞同：0
> 
> 时间：2012-10-18T05:50:55.680
> 
> 标签：openerp

如何在自定义模块中制作自定义编号字段？

我需要将自定义编号与自定义对象字段相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:05:39.123

为模型添加序列，并在模型的默认值中定义如下：

```
'name': lambda obj, cr, uid, context: obj.pool.get('ir.sequence').get(cr, uid, 'model.name'), 
```

# ios6 - 使应用程序兼容 iOS 6.0

> ID：12947944
> 
> 赞同：0
> 
> 时间：2012-10-18T05:51:13.427
> 
> 标签：ios6, xcode4.5, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我有一个主要针对 iPhone 3/3G 和 iPhone 4(retina) 的应用程序（使用 iOS SDK 5.0）。现在我想将它移植到 iPhone 5。我的机器上安装了 Xcode 4.5.1。大多数 UI 实现都是以编程方式完成的，无需使用任何 Xib 文件。

在这个阶段，我不明白该做什么以及从哪里开始:(

请帮助我找到一种方法...在此先感谢:)

我在iOS中很新...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:04:47.870

您可以尝试：xib>文件检查器>使用自动布局。

在 iPhone 5 的模拟器上试一下。

此外，您的代码可能有一些错误/警告，如下所示：

[许多功能已被弃用 - iOs 6](https://stackoverflow.com/questions/12507455/a-lot-of-functions-are-deprecated-ios-6)

你应该解决这个问题，然后如果一切正常，你就完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:18:46.463

当您以编程方式生成 UI 元素时，您可能还想尝试为 iPhone 5 屏幕编写条件语句。

```
if ([[UIScreen mainScreen] bounds].size.height == 568) {
    //code for generate UI elements for iPhone 5 screen.
} 
```

# java - 如何确保 java 失去焦点事件处理程序在执行另一个事件处理程序之前完成其工作

> ID：12947949
> 
> 赞同：0
> 
> 时间：2012-10-18T05:51:25.557
> 
> 标签：java, swing

我正在将语音识别组件与我现有的应用程序集成在一起。在我的应用程序中，我有一个 JTree 和 JTextPane。我已经为 jtextpane 编写了丢失焦点事件处理程序，并为 JTree 编写了选择事件处理程序。当焦点在 jtextpane 中然后在 jtree 中选择一个节点时，我可以看到在焦点丢失事件处理程序之前，执行了选择事件处理程序。我在焦点丢失事件处理程序中编写了 ThreadPoolExecutor，并向 ThreadPoolExecutor 添加了三个作业，我必须确保在执行选择处理程序之前我应该​​完成 ThradPoolExecutor 中的所有作业；为此我使用了倒计时。我已经阅读了许多类似的帖子，但我找不到如何确保在执行选择事件处理程序之前完成焦点丢失。一些帖子要求在 invokeLater 方法中运行选择事件处理程序代码。但这不是我的问题的解决方案，因为 ThreadPoolExecutor 在另一个线程中执行其代码。下面我记下了我想执行我的代码的顺序

1.  在焦点丢失事件处理程序中将作业添加到 ThreadPoolExecutor
2.  在失去焦点事件中阻塞 UI 线程并完成所有添加到 ThreadPoolExecutor 的作业。
3.  执行选择事件处理程序。

下面是我的焦点处理程序的编写代码

```
public void focusLost(FocusEvent e)
  {

    if (ecaControl.isInitialized())
    {

      ecaControl.addStopRecordingJobToExecutor();

      ecaControl.addSaveJobToExecutor(this.currentMetaFileName != null ? this.currentMetaFileName : this.getName());

      ecaControl.addCloseJobToExecutor();

      co = new CountDownLatch(ecaControl.getExecutor().counter);
      ecaControl.getExecutor().setCountdownla(co);

      try
      {
        System.out.println("------- count before" + ecaControl.getExecutor().counter);
        co.await();

        ecaControl.getExecutor().setCountdownla(null);
      }
      catch (InterruptedException e1)
      {
        // TODO Auto-generated catch block
        e1.printStackTrace();
      }
      System.out.println("--------count after" + ecaControl.getExecutor().counter);
      try
      {
        System.out.println("The text is "
            + this.getStyledDocument().getText(0, getStyledDocument().getLength()));
      }
      catch (BadLocationException e1)
      {
        // TODO Auto-generated catch block
        e1.printStackTrace();
      }

    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:25:30.897

如果选择事件仅与`focusLost()`事件一起发生，那么您应该调用[`awaitTermination()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)，`ThreadPoolExecutor`然后在选择事件中调用`invokeLater()`方法。如果不是，那么最好的解决方案可能是事件调度程序。如果您将所有事件发送到事件分发器，它可以协调是否`JTree`需要等待，执行任何必要的线程，然后在适当的时间将事件重新分发到适当的组件。

# php - ldap_add 错误`数据中的未知属性`

> ID：12947959
> 
> 赞同：1
> 
> 时间：2012-10-18T05:52:23.647
> 
> 标签：php, openldap

我能够连接到 ldap 服务器，该 id 具有添加用户的凭据。我能够毫无问题地绑定到用户 ID。当我尝试在 ldap 中添加条目时，我收到错误消息：
`ldap_add(): Unknown attribute in the data`

```
$info["dn"] = "cn=jack,o=ldapdb";
$info["o"] = "ldapdb";
$info["cn"] = "John Jones";
$info["sn"] = "Jones";
$info["objectclass"] = "LDAPDB";

echo ldap_add($lc, "cn=jack,o=ldapdb", $info)  ? "was able to add" : "was not able to add";

echo ldap_error($lc);

ldap_close($lc); 
```

`ldap_error`给出的响应为---但是，该用户在结果`Success`中不可见。`ldap_search`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:13:29.580

当 ldap_add 方法中已经有一个参数 dn 时，您可能不需要“dn”属性。

用这个属性注释行，即

> $info["dn"] = "cn=jack,o=ldapdb";

然后再次执行程序。

# iphone - NSMutableDictionary 设置值在 iOS 5 上崩溃

> ID：12947962
> 
> 赞同：1
> 
> 时间：2012-10-18T05:52:39.080
> 
> 标签：iphone, objective-c, ios, ipad

我有以下代码：

```
 NSMutableDictionary *attributes = [NSMutableDictionary dictionary];
    [attributes setValue:[UIColor colorWithRed:86.0/255.0 green:134.0/255.0 blue:172.0/255.0 alpha:1.0] forKey:NSForegroundColorAttributeName]; 
```

它在 iOS 6 上运行良好，但在 iOS 5 上崩溃了。知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:53:46.363

NSForegroundColorAttributeName 仅在 iOS6 中可用。

[http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html)

所有 NSAttributedString 仅适用于 iOS6。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T06:02:26.693

NSAttributedString [UIKit Additions Reference](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html)`NSForegroundColorAttributeName`说：

> NSForegroundColorAttributeName
> 
> > 该属性的值是一个 UIColor 对象。使用此属性可在渲染期间指定文本的颜色。如果不指定此属性，则文本以黑色呈现。
> > 
> > 在 iOS 6.0 及更高版本中可用。
> > 
> > 在 NSAttributedString.h 中声明。

所以这个属性只适用于 iOS 6 及更高版本。事实上， [NSAttributedString UIKit Additions](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html)中的所有内容都是 iOS 6 及更高版本。

# node.js - Nodejs + Passport.js + Redis：如何在 Redis 中存储会话

> ID：12947965
> 
> 赞同：15
> 
> 时间：2012-10-18T05:52:46.880
> 
> 标签：node.js, session, redis, passport.js

我已经阅读了这个主题[Node.js + express.js + passport.js ：在服务器重新启动之间保持身份验证](https://stackoverflow.com/questions/10164312/node-js-express-js-passport-js-stay-authenticated-between-server-restart)，我需要完全相同的东西，但对于 Redis。我使用了这样的代码：

```
var RedisStore = require('connect-redis')(express);
app.use(express.session({
    secret: "my secret",
    store: new RedisStore,
        cookie: { secure: true, maxAge:86400000 }
})); 
```

它不起作用。要连接 Redis，我使用 connect-redis 模块。我做错了什么？谢谢！

**UPD**：我没有收到任何错误。为了确保身份验证过程成功，我添加了日志行，它会执行。

```
function(email, password, done) {
    // asynchronous verification, for effect...
    process.nextTick(function() {
        findByEmail(email, function(err, user) {
            if (!user) {
                return done(null, false, {
                    message: 'Unknown user ' + email
                });
            }
            if (user.password != password) {
                return done(null, false, {
                    message: 'Invalid password'
                });
            }
            //just logging that eveything seems fine
            console.log("STATUS: User " + email + " authentificated succesfully");
            return done(null, user);
        })
    });
})); 
```

启用 express.logger() 的日志是：

```
127.0.0.1 - - [Fri, 19 Oct 2012 05:49:09 GMT] "GET /ico/favicon.ico HTTP/1.1" 404 - "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
STATUS: User admin authentificated succesfully 
```

我**确实**认为 auth/users/credentials/serializing/deserializing 本身没有任何问题。问题只是护照无法将cookie设置为Redis并读取它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:43:05.807

我应该使用

```
cookie: { secure: false, maxAge:86400000 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-06T04:45:08.133

试试这个，而不是通过快递来`const RedisStore`通过会话。

```
const redis = require('redis');
const session = require('express-session');
const redisStore = require('connect-redis')(session);
const cookieParser = require('cookie-parser');
const app = require('../app');

app.app.use(cookieParser("secret"));

const rediscli = redis.createClient();

app.app.use(session({
    secret: 'secret',
    store: new redisStore({
        host: '127.0.0.1',
        port: 6379,
        client: rediscli,
        ttl: 260
    }),
    saveUninitialized: false,
    resave: false
})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T12:45:00.243

当您明确设置商店时会发生什么？即在您的应用程序中的这些内容：

```
var redis = require('redis');
// This is host and port-dependent, obviously
var redisClient= redis.createClient(6379, 'localhost');

app.use(express.session({
    secret: 'your secret',
    /* set up your cookie how you want */
    cookie: { maxAge: ... },
    store: new (require('express-sessions'))({
        storage: 'redis',
        instance: redisClient
    })
})); 
```

# php - 网站托管问题：重定向到本地主机

> ID：12947967
> 
> 赞同：1
> 
> 时间：2012-10-18T05:53:02.600
> 
> 标签：php, asp.net, iis-7, web, web-hosting

我已经创建了我的网站，以便在服务器机器中使用 http://localhost:9005 或 http://216.94.45.84:9005。现在我有一个网站 mysite.com。我正在使用 IIS7。我添加了创建一个新网站并修改了绑定，现在有两个绑定

它们是 IP 地址：未分配的端口：9005 主机名：- IP 地址：未分配的端口：80 主机名：mysite.com

因此，当我调用该网站时配置此设置后，mysite.com 正在解析并重定向到 http://localhost:9005。因此该站点停止工作。请帮助我使我的网站正常工作。

我的配置 Windows 7、PHP、IIS7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:09:46.153

只需将 Var 文件夹中可用于 OpenX 的配置文件（localhost.conf.php）更改为实际的网站名称（现在它可能指向本地主机）。这么简单对吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:10:28.057

查看您是否根据以下提示修改了脚本设置以在新域上移动 OpenX：[http ://www.openxtips.com/2009/06/tip-17-moving-openx/](http://www.openxtips.com/2009/06/tip-17-moving-openx/)

# iphone - 每当我使用 OpenCVClientViewController 时，它都会被视为错误

> ID：12947971
> 
> 赞同：0
> 
> 时间：2012-10-18T05:53:32.060
> 
> 标签：iphone, objective-c, ios

我将我的项目集成到以下链接 [http://aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)

那里`OpenCVClientViewController.h, OpenCVClientViewController.mm and OpenCVClientAppDelegate.h, OpenCVClientAppDelegate.mm`

当我执行以下操作时出现问题：我需要调用其中命名`-(void)processFrame`的一个方法`OpenCVClientViewController.mm` 会给出以下错误，如下图所示。即使是我所做的更改也删除了错误也不清楚。

`OpenCVClientViewController.mm`当我像下面这样使用时，问题就来了

```
OpenCVClientViewController *svc=[[OpenCVClientViewController alloc]initWithNibName:@"OpenCVClientViewController" bundle:nil];

[svc processFrame]; 
```

![在此处输入图像描述](../Images/7aeca4f41d41c47822dfe74c04109282.png)

如果我删除了上面放置的代码，即使错误没有被删除（看起来像一个小错误，但我没有得到错误的位置）

# bing-maps - 如何将图像附加到必应地图中的信息框？

> ID：12947972
> 
> 赞同：1
> 
> 时间：2012-10-18T05:53:42.073
> 
> 标签：bing-maps

有没有办法将图像放在必应地图的信息框中？感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:38:15.763

[是的，通过htmlContent 属性](http://msdn.microsoft.com/en-us/library/gg675210.aspx)提供您自己的 html 。您可以随意显示信息框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-25T13:02:02.913

您可以通过选项哈希中添加的 htmlContent 属性添加 HTML。例如：

```
var infoboxOptions = {
    width :200, 
    height :100, 
    showCloseButton: true,
    zIndex: 0, 
    offset:new Microsoft.Maps.Point(10,0), 
    showPointer: true,
    htmlContent:'<img src="source/of/image></img>"'
}; 
```

# php - JAXL 3\. 关闭

> ID：12947992
> 
> 赞同：1
> 
> 时间：2012-10-18T05:55:01.483
> 
> 标签：php, xmpp

我正在尝试使用 jaxl 3.0 通过 xmpp 进行通知。唯一的事情，我无法理解 - 工作完成后如何关闭 JAXL 服务器？看不到任何停止 jaxl-server 的回调

这是我的代码的一部分

```
 public function __construct(JAXL $jaxl){
     $this->client=$jaxl;
     $this->client->add_cb('on_auth_success', array($this,'send'));
   }

   public function setSenders($senders){
       $this->senders=$senders;
   }
   public function addLine($messagePart){
        $this->message.=$messagePart.PHP_EOL;
   }

   public function notify(){
      $this->client->start();
   }

   public function send(){
   foreach($this->senders as $sender){
      $this->client->send_chat_msg($sender,$this->message);
    }
    //Here server should be stopped. Everything is done.
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:03:18.213

您需要调用JAXL 实例`$client->send_end_stream();`在哪里。`$client`这将发送 xmpp 流结束数据包。您还可以为`on_disconnect`JAXL 实例成功关闭与服务器的连接时调用的事件注册回调。有关更多详细信息，请参见[示例/echo_bot.php](https://github.com/abhinavsingh/JAXL/blob/v3.x/examples/echo_bot.php#L107)（它同时使用了这两者）。

# html - 鼠标活动在 QT Webkit 上的 Html5ApplicationViewer 中不起作用

> ID：12947996
> 
> 赞同：2
> 
> 时间：2012-10-18T05:55:23.663
> 
> 标签：html, qt, qt-creator

使用 QtCreator 应用程序向导，我使用 Html5 应用程序模板创建了一个项目。

它应该显示一个`index.html`页面。如果我在 Chrome 中加载该页面，它可以正常工作。我的 Qt 程序将正确呈现它，但点击在按钮、链接或滚动条上不起作用。

我的代码正是向导生成的：

```
int main(int argc, char *argv[]) {

    QApplication app(argc, argv);

    Html5ApplicationViewer viewer;
    viewer.setOrientation(Html5ApplicationViewer::ScreenOrientationAuto);

    viewer.showExpanded(); //Load the HTML Page
    viewer.loadFile(QLatin1String("html/index.html"));

    return app.exec();
} 
```

有人遇到过这个问题吗？我有 Qt 4.7.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T00:11:13.167

```
// don't know exactly what is the problem but you can try this    
viewer.webView()->setAcceptHoverEvents(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:14:04.723

最后，这是解决方案，它完成了！！！

viewer.loadUrl(QUrl("assets:/html/index.html"));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T04:43:06.533

我不知道解决方案，但我知道问题出在哪里，问题是向导没有将正确的路径放到 index.html，所以我确实在 /data/local/tmp/ 处提取索引只是为了测试应用程序

viewer.loadFile(QLatin1String("/data/local/tmp/index.html"));