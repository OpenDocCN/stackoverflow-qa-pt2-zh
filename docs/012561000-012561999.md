# StackOverflow 问答 12561000-12561999

# android - 将行添加到列表视图android

> ID：12561006
> 
> 赞同：0
> 
> 时间：2012-09-24T08:00:21.440
> 
> 标签：android, listview, row

我有一个包含 30 行的列表视图，其中包含从互联网解析的数据。当我有 30 行时，向 Footer 添加一个按钮，它会解析 30 个新行。我的问题是我不能将 30 个新行添加到那些已经有列表视图的行中我必须指定一些东西来分配适配器？我一直在寻找一段时间，但我的代码没有正确执行。我尝试了许多变化但没有成功。

任何帮助是极大的赞赏。

谢谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:10:17.120

添加新值后，尝试通过在适配器上调用 notifyDataSetChanged() 来通知 Listview，这将反过来通知您的列表视图刷新自身。

希望这可以解决您的问题。

# xerces - xerces-3.1.1 无法在 MSYS 上创建 dll？

> ID：12561010
> 
> 赞同：0
> 
> 时间：2012-09-24T08:00:44.323
> 
> 标签：xerces, mingw32, msys

我在 MSYS 上使用 mingw-gcc 构建 xeces-3.1.1。我配置了`--prefix=/c/open-source/install/xerces-3.1.1 --enable-shared`但是在安装目录中没有找到dll。哪里不对了？

BR，若尘

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T13:23:02.120

这个解决方案对我有用：

```
make libxerces_c_la_LDFLAGS="-release 3.1 -no-undefined" 
```

请参阅[http://mail-archives.apache.org/mod_mbox/xerces-c-users/201111.mbox/%3Cboris.20111103155709@codesynthesis.com%3E](http://mail-archives.apache.org/mod_mbox/xerces-c-users/201111.mbox/%3Cboris.20111103155709@codesynthesis.com%3E)

# sql-server - 无法加载 Microsoft.SqlServer.BatchParser 或其依赖项之一

> ID：12561013
> 
> 赞同：14
> 
> 时间：2012-09-24T08:00:56.697
> 
> 标签：sql-server, visual-studio-2010, sql-server-2008

我知道这个问题被问了很多次，我在谷歌上找到了很多关于这个问题的信息，但我仍然无法解决我的 DEV PC 上存在的问题:(
![我在每一页上都有那个丑陋的错误信息](../Images/38c45bb9814bc2ceb411fd32d2108da5.png)

> 无法加载文件或程序集 Microsoft.SqlServer.BatchParser

我按照许多 Internet 资源中的建议安装了[Microsoft SQL Server 2005 管理对象集合](http://www.microsoft.com/en-us/download/details.aspx?id=24793)，但它没有帮助。

然后我尝试安装[Microsoft SQL Server 2008 Management Objects](http://www.microsoft.com/en-us/download/details.aspx?id=16177)，但它说它无法安装，因为已经存在新版本（我安装了 SQL Server 2008）。

然后我去了GAC，发现了以下几行：

> Microsoft.SqlServer.BatchParser，版本=10.0.0.0，文化=中性，PublicKeyToken=89845dcd8080cc91，处理器架构=AMD64
> 
> Microsoft.SqlServer.BatchParser，版本=9.0.242.0，文化=中性，PublicKeyToken=89845dcd8080cc91，处理器架构=AMD64
> 
> Microsoft.SqlServer.BatchParser，版本=10.0.0.0，文化=中性，PublicKeyToken=89845dcd8080cc91，处理器架构=x86
> 
> Microsoft.SqlServer.BatchParser，版本=9.0.242.0，文化=中性，PublicKeyToken=89845dcd8080cc91，处理器架构=x86
> 
> **Microsoft.SqlServer.BatchParserClient, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91, processorArchitecture=MSIL** <-- 版本 9.0.242.0 应该存在吗？

我已经花了大约半天的时间找到了一个没有成功的解决方案，当 IntelliSense 因为那个错误而无法工作时，使用 VS 非常糟糕。

我安装了 VS 2010 SQL Express 2005 和 SQL Server 2008（见配置截图） ![在此处输入图像描述](../Images/944b46b7a98ae91e2a025ec62af9b280.png)

如何解决这个依赖问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-12T07:14:20.760

**注意：此答案适用于从 C# 程序使用 MS SQL SMO（管理对象）的人。**

我一直在努力解决问题中提到的错误。我得到的确切错误是：

> 无法加载文件或程序集“Microsoft.SqlServer.BatchParser.dll”或其依赖项之一。动态链接库 (DLL) 初始化例程失败。（HRESULT 异常：0x8007045A）

它最终成为在 .NET 4.0（或更高版本）CLR 中运行 .NET 2.0 程序集的问题。SQL Server SMO 程序集是针对运行时的 v2.0.50727 构建的，因此 app.config（或 web.config）中需要以下部分

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup> 
```

提示在 MSDN 论坛上的[这个讨论线程中。](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/37307f67-e84c-456f-9844-52860552d674/could-not-load-file-or-assembly-microsoftsqlserverbatchparser-or-one-of-its-dependencies?forum=sqlsmoanddmo&prof=required)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T17:26:21.467

您是否在 Management Studio 或 Visual Studio 中看到此错误？您何时收到此错误消息？该问题可能是由于文档中的 32 位与 64 位交互引起的

956178 在基于 Itanium 的 Windows 版本上运行 32 位版本的 SQL Server 2008 时出现错误消息：“系统找不到指定的文件” [http://support.microsoft.com/kb/956178/EN-US](http://support.microsoft.com/kb/956178/EN-US)

如果您使用的是 64 位系统，请确保您安装了 64 位版本的更新管理对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-08T13:55:57.180

此时 08 feb 2020 smo 16 解决了这个问题。

`Install-Package Microsoft.SqlServer.SqlManagementObjects -Version 160.1911221.0-preview`

仍在预览中，但效果很好

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-28T03:20:52.797

您在通过 Visual Studio 执行应用程序时一定会收到此错误。我过去遇到过此错误，但经过一些解决方法后解决了

1.  删除不需要的 BatchParser 引用（如果它存在于 web.config 中）。
2.  使用了一些可能导致应用程序通过此错误的第 3 方 dll。
3.  您可能已经从其他页面复制了您的 aspx 页面并且忘记更改“继承”部分。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-10T17:58:44.053

我必须进入应用程序池的高级设置并将“启用 32 位应用程序”设置为 TRUE（我运行的是 64 位 SQL Server）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-13T21:05:33.210

我知道这是一个很老的问题，但以防万一这对其他人有帮助，我`Microsoft.SqlServer.SqlManagementObjects`在我的`C#`应用程序 (v150.18208.0) 中使用`Nuget`. 当我得到试图使用`ServerConnection.ConnectionContext.ExecuteNonQuery`它的代码时，它爆炸了，给出了错误：

> “无法加载文件或程序集 'Microsoft.SqlServer.BatchParser, Version=15.100.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' 或其依赖项之一。系统找不到指定的文件。”：“Microsoft.SqlServer.BatchParser ，版本=15.100.0.0，文化=中性，PublicKeyToken=89845dcd8080cc91"

这是一个希望在`Nuget`包中得到修复的错误。

我通过手动将 v15.0.600.33 添加`Microsoft.SqlServer.BatchParser`到`GAC`. 我找到了`dll`at `C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\Common7\IDE\Extensions\Microsoft\SQLCommon\150`。此路径可能会根据您安装的`Visual Studio`.

如果您正在分发并且不希望您的用户必须将其添加到，`GAC`那么只需在您的项目中包含`dll`作为参考。`C#`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-01T03:34:40.530

如果您使用从 Nuget 检索的最新 SMO，您可能会遇到类似的问题

> 无法加载文件或程序集“Microsoft.SqlServer.BatchParser，Version=15.100.0.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91”或其依赖项之一。该系统找不到指定的文件。

或不告诉您版本号的消息

> 无法加载文件或程序集“Microsoft.SqlServer.BatchParser.dll”或其依赖项之一。指定的模块无法找到。

对于那些没有提到版本号的人来说，这是因为我们需要vc2013运行时来进行SMO。[请在此处查看 Microsoft 的说明和下载链接。](https://docs.microsoft.com/en-us/sql/relational-databases/server-management-objects-smo/installing-smo?view=sql-server-ver15#system-requirements)

对于上面版本号有错误的人，我发现 jendev在[这个讨论中提供](https://github.com/Microsoft/sqltoolsservice/issues/783)[了一个 repo](https://github.com/Jandev/SmoSample)，你可以克隆并在编译后获取 dll。如果您没有 Visual Studio，那么请使用[我的 fork](https://github.com/iamshiao/SmoSample)，其中已经包含了确切的 dll。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-24T02:53:42.907

升级 installshield 项目（2008 到 2017）后出现此错误：

*   我们从通过 MSI 安装的 2008 SMO 升级
*   从安装它们的项目中删除了 MSI
*   升级到 2017，通过 nuget 包交付
*   安装它并将所有dll添加到项目中
*   将软件包提供的 dll 添加到 installshield

在 installshield 安装了我的程序后，它立即爆炸并抱怨 BatchPaser.dll：

> “无法加载文件或程序集 'Microsoft.SqlServer.BatchParser, Version=15.100.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' 或其依赖项之一。系统找不到指定的文件。”：“Microsoft.SqlServer.BatchParser ，版本=15.100.0.0，文化=中性，PublicKeyToken=89845dcd8080cc91"

调试了一段时间后，我从站点下载了nuget包。使用软件包中的新 SMO，而不是 msi 安装它们，Microsoft 不建议将它们添加到您的 GAC（如果您想知道）：

> 如文件和版本号页面所述，您不应将 SMO 程序集安装到 GAC 中。这样做可能会导致也使用这些版本的 SMO 的其他应用程序（例如 SQL Server Management Studio）出现问题。

[https://docs.microsoft.com/en-us/sql/relational-databases/server-management-objects-smo/installing-smo?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/relational-databases/server-management-objects-smo/installing-smo?view=sql-server-ver15)

[https://docs.microsoft.com/en-us/sql/relational-databases/server-management-objects-smo/files-and-version-numbers?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/relational-databases/server-management-objects-smo/files-and-version-numbers?view=sql-server-ver15)

您需要做的是从站点下载 nuget 包并转到 runtimes/win-x86/native。然后您会看到 BatchParser.dll。将其添加到项目安装/目录或任何位置。为我工作，几乎就是错误消息告诉我的内容。Nuget 只是没有在项目中安装此文件。

[https://www.nuget.org/packages/Microsoft.SqlServer.SqlManagementObjects/150.18178.0](https://www.nuget.org/packages/Microsoft.SqlServer.SqlManagementObjects/150.18178.0)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-03T08:43:29.313

就我而言，可以通过在 Visual Studio (2019) 中的 C# 项目的构建设置中将目标平台设置为 x86 来解决此问题，干杯

# apache - 无重定向的 URL 重写

> ID：12561017
> 
> 赞同：0
> 
> 时间：2012-09-24T08:01:04.203
> 
> 标签：apache, .htaccess

我有两个网址

> domain.com / domain.de

重定向到

> domain.other-host.de

是否有可能通过用户看不到的 url 重写

> domain.other-host.de

在他的浏览器中，但

> 域名.com

提前致谢，

托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:06:13.933

不，重写是不可能的*。不过，您可以使用反向代理来实现此效果。请参阅 mod_proxy Apache 文档。请注意，这将导致每个请求都将通过两个域，从而使您的带宽使用量增加一倍并减慢用户的速度。

*在 RewriteRule 中添加 [P] 标志会导致规则被代理处理，但必须先安装并启用 mod_proxy。上述警告仍然适用于这种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:09:15.567

好的，不是这方面的大专家，但据我所知，这必须在服务器中完成。这就是我记得上次我查看**IIS**的碗时所做的事情。[这个线程](http://www.sitepoint.com/forums/showthread.php?128217-changing-the-url-in-address-bar)证实了这一点。

就像他们建议的那样，您也可以**弹出一个**没有地址栏的窗口或**使用框架**，但这两种方法都会非常烦人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:34:59.127

您可以使用`P`mod_rewrite 的标志，将 URI 交给 mod_proxy。

在 domain.com 和 domain.de 文档根目录的 htaccess 文件中，添加如下内容：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} domain.com$ [NC,OR]
RewriteCond %{HTTP_HOST} domain.de [NC]
RewriteRule ^(.*)$ http://domain.other-host.de/$1 [L,P] 
```

如果未启用 mod_proxy，则不会执行任何操作。

# php - 在 Jquery 中添加 JS 函数以检查用户名是否可用

> ID：12561020
> 
> 赞同：-3
> 
> 时间：2012-09-24T08:01:28.943
> 
> 标签：php, javascript, jquery, mysql

我想问关于 JS 函数的问题，现在我想这个函数正在检查用户名这是我的 JS 代码：

```
jQuery.validator.addMethod("noSpace", function(value, element) { 
    return value.indexOf(" ") < 0 && value != ""; 
    });

    $().ready(function()
    {
        $("#signupForm").validate(
        {
            rules:
            {
                full_name: "required",
                username: {
                    required: true,
                    minlength: 2,
                    noSpace: true,
                },
                password: {
                    required: true,
                    minlength: 5
                },
                email: {
                    required: true,
                    email: true
                },
            },
            messages:
            {
                full_name: "Please enter your full name",
                username:
                {
                    required: "Please enter a username",
                    minlength: "Your username must consist of at least 2 characters",
                    noSpace: "No space allowed",
                },

                password:
                {
                    required: "Please provide a password",
                    minlength: "Your password must be at least 5 characters long"
                },

                email: "Please enter a valid email address"
            }
        });
    }); 
```

那么如何添加该功能以检查可用用户名并将其显示在输入文本用户名下方（如果可用或不可用），如果可用用户可以继续提交表单。如果没有，用户将无法继续提交表单。

要检查用户名，我使用 PHP 语言和 Mysql 数据库。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:16:54.700

尝试使用此示例，请注意此处如何使用 checkAvailability

```
$(document).ready(function() {
jQuery.validator.addMethod("checkAvailability",function(value,element){
 var x= $.ajax({
    /*Setting of request*/
 }).responseText;

 if($("message", x).text()=="true") return true;
 else return false;
},"Sorry, this user name is not available");

$("#loginForm").validate({
    rules:  {
        username: {
            required: true,
            minlength: 4,
            checkAvailability: true
        },
    },

    submitHandler: function(form){send()}
});
}); 
```

# qt - 两个应用程序的QT Dbus共享接口

> ID：12561023
> 
> 赞同：1
> 
> 时间：2012-09-24T08:01:46.973
> 
> 标签：qt, dbus

我有以下设置：

*   我有两个应用程序，属于同一个逻辑组（逻辑组=我们公司的产品）
*   这两个应用程序需要将 DBus 连接到同一个接口（我们有更多的产品，它们都应该使用自己的 DBus 接口）并公开一些功能（所有这些都使用 QtDBus）。

所以我尝试了（箭头不是 C++ 指针操作:)）：

```
App1 -> get QDBusConnection::sessionBus();
App1 -> registerService("com.una-frog.ddm") 
App1 -> registerObject ("/DDM-gui") 
```

然后

```
App2 -> get QDBusConnection::sessionBus();
App2 -> registerService("com.una-frog.ddm") 
App2 -> registerObject ("/DDM-cli") 
```

并启动 App1 和 App2。

此时 App2 抱怨它无法注册服务，因为 App1 已经注册了它。这是正确的。

我可以轻松地将 App1 注册到“com.una-frog.ddm.gui **”**，将 App2 注册到“com.una-frog.ddm.cli **”** ，但我宁愿尝试使用一个通用接口和两个对象来获取所有必需的行动。

谁知道如何实现两个QtDBus应用程序连接到同一个接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:30:05.507

这两个应用程序可以共享 DBus*接口* `com.una-frog.ddm`。但是 registerService 不适用于接口，它适用于 DBus*服务*。服务名称不能在应用程序之间共享，因为它们用于路由方法调用（单播）。

如果您重新设计您的 API，以便两个应用程序改为侦听（广播）信号，那么您甚至不需要注册服务名称。

或者，总线具有服务名称的*排队所有者*`DBUS_NAME_FLAG_*`的概念（参见[规范](http://dbus.freedesktop.org/doc/dbus-specification.html#message-bus)）。如果两个应用程序提供相同的服务并且您不在乎哪个应用程序处理它，这将很有用。Qt似乎有这个：[http ://doc.qt.digia.com/stable/qdbusconnectioninterface.html#registerService](http://doc.qt.digia.com/stable/qdbusconnectioninterface.html#registerService)

# android - 如何在 onCreateOptionsMenu 中动态更改菜单

> ID：12561033
> 
> 赞同：7
> 
> 时间：2012-09-24T08:03:09.173
> 
> 标签：android, actionbarsherlock, android-menu

我有一个小问题，我想用动态菜单解决它：

```
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    switch(Globals.editMode){
    case Globals.MODE_NONE:
        getSupportMenuInflater().inflate(R.menu.imagehandlingmain_menu, menu);
        break;
    case Globals.MODE_MOVE:
        getSupportMenuInflater().inflate(R.menu.savecancel_menu, menu);
        break;
    case Globals.MODE_ROTATE:
        getSupportMenuInflater().inflate(R.menu.savecancel_menu, menu);
        break;
    case Globals.MODE_SCALE:
        getSupportMenuInflater().inflate(R.menu.savecancel_menu, menu);
        break;
    }
    //getSupportMenuInflater().inflate(R.menu.imagehandlingmain_menu, menu);
    return true; 
```

我有两个菜单，您可以在其中选择工作模式的菜单，而在某些工作模式下，菜单应更改为“取消”和“保存”。

所以这个想法是你进入一种模式，然后如果你决定不保存你的工作，你可以取消它并返回到以前的状态。

现在，正如我假设 onCreateOptionsMenu 只被调用一次，那么我如何/应该在需要时“重新加载”整个菜单？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-24T08:15:21.597

您可以使用[`Activity.invalidateOptionsMenu()`](https://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29). 这 - 顾名思义 - 将使当前菜单无效，因此`Activity.onPrepareOptionsMenu()`将再次调用。

# mysql - mysql反序列化数据

> ID：12561034
> 
> 赞同：0
> 
> 时间：2012-09-24T08:03:15.180
> 
> 标签：mysql, wordpress, serialization

是否可以在运行时反序列化 mysql 查询中的数据？我不想使用 php 的 unserialize() 函数。

我需要使用 mysql 查询从保存在 wp_postmeta 表中的以下序列化值中获取值“数学”。

```
a:4:{s:39:"wpcf-fields-checkboxes-option-223412915";s:7:"science";s:39:"wpcf-fields-checkboxes-option-499894518";s:10:"technology";s:40:"wpcf-fields-checkboxes-option-1474335177";s:11:"engineering";s:40:"wpcf-fields-checkboxes-option-1018405300";s:11:"mathematics";} 
```

# java - Google App Engine 和 Restlet

> ID：12561036
> 
> 赞同：0
> 
> 时间：2012-09-24T08:03:18.617
> 
> 标签：java, google-app-engine, restlet

我一直在修改这个[示例](http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/303-restlet.html#dsy303-restlet_common-classes)，试图确定 restlet 是否可以与谷歌应用引擎一起工作以满足我的需求。到目前为止，这似乎相当简单，但我已经坚持了几个小时，希望能得到一些帮助......

客户端代码

```
 ClientResource cr = new ClientResource("my_gae_url");
 ContactResource resource = cr.wrap(ContactResource.class); 
```

这返回一个空

```
 Contact contact = resource.retrieve() 
```

但这会返回预期的 json 字符串

```
 String s = cr.get(MediaType.APPLICATION_JSON).getText(); 
```

它不会返回对象，但会返回 json。我不知道我是否缺少一个 jar 或者我没有实现某些东西或什么

```
 I'm using Google Plugin 3.7 and app engine 1.7.2
 I'm using restlet app engine edition 2.0.15 
 The server includes the following jars org.restlet.jar, org.restlet.ext.gwt.jar,           
 org.restlet.ext.servlet.jar, org.restlet.ext.jackson.jar,
 org.codehaus.jackson.core.jar, org.codehaus.jackson.mapper.jar 
```

如果重要的话，我用来测试的客户端是 jsf，其中包含以下 jar

```
 org.restlet.jar, org.restlet.ext.net.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:03:38.973

您还需要在客户端添加 Jackson 扩展

# jqplot - jqplot - 如何使非常密集的图表看起来不错？

> ID：12561038
> 
> 赞同：1
> 
> 时间：2012-09-24T08:03:30.727
> 
> 标签：jqplot

我有一个包含大量数据的简单日期图表。问题是我要绘制的区域有限，当有这么多数据时，与系列日期的刻度重叠。自动缩放似乎在一定程度上有助于日期仍然关闭。此外，即使刻度数自动减少，网格中的线数也保持不变，使其成为纯色而不是网格。

有没有办法让下面的图表看起来不错？

1- 网格中的行数与刻度中的日期相同 2- 减少刻度数以获得更多空间

我尝试使用 numberTicks 限制滴答声的数量，但随后滴答声消失了，或者只是从第一个滴答声开始显示它们并省略其余部分。尝试使用 syncticks 和不同的参数，但没有设法修复它。也许我错误地输入了参数。

我已经创建了一个代码的 pastebin 来获取这个图表，它可以在这里找到：http: [//pastebin.com/zVRN8dJy](http://pastebin.com/zVRN8dJy)

任何提示任何人？

我看到的唯一选择是直接从服务器端进行分发，但我有几种组合要处理，并且由 jqplot 完成分发会简化很多事情。我正在使用最新版本的 jqplot，我在 Snow Leopard 上，问题与浏览器无关。

谢谢。

![示例图](../Images/fa83ac01cb61d0861f515623e7ca3ba3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:37:41.873

首先，你能限制数据的范围吗？您在那里大约有 50 个数据点。限制为 25 会使图表更加整洁。

如果这不是一个选项，您需要自己控制标签。

有一个选项

```
ticks: [],      // a 1D [val1, val2, ...], or 2D [[val, label], [val, label], ...]
                // array of ticks to use.  Computed automatically. 
```

使用 2D 刻度选项设置每个值并自己标记，执行类似的操作

```
ticks: [[1, 'label 1'], [2, ''], [3, ''], [4, 'label 4'], [5, '']...] 
```

在创建图表之前构造标签。

我还建议在您的图表中将标签文本倾斜一个角度，而不是垂直向下。这比垂直阅读更容易，至少比伸长脖子好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:47:56.110

您可能使用错了 numberTicks。使用它的方法是将它作为 xaxis 的参数，例如

```
xaxis: {
numberTicks: 20, 
```

由其他参数跟进。如果这不起作用，我建议您删除 jQplot 的其他属性，以找出干扰的属性。

如果由于某种原因您无法让 numberTicks 工作，您可以做的另一件事（解决方法）。这限制了数组中的源数据。

```
var series1 = [//your data//]

var smallerArr = [];

for (var i = 0; i < series1.length; i = i+10) {
    smallerArr.push(series1[i]);
}; 
```

# c# - 如何在 Excel 和 C# 之间将“double”转换为“datetime”

> ID：12561042
> 
> 赞同：2
> 
> 时间：2012-09-24T08:03:46.833
> 
> 标签：c#, excel, datetime

我有 ac# 程序需要创建一个 excel 对象，并进行一些操作，这里是我的部分代码：

```
// c# code:

workSheet.Cells[1, 1] = "=2012/9/20";       //asign "2012/9/20" to cell[1,1] in Excel
double d = workSheet.Cells[1, 1].value();   // by default, Excel will return 11.17
Debug.Print(d.ToString());                  //c#:  d = 11.1777777777778 
```

那么如何让输出再次变成“2012/9/20”呢？

我尝试了一些代码，但失败了：

```
DateTime str = DateTime.FromOADate(d);     //c#: str = 1/10/1900 4:16:00 AM
DateTime str = new DateTime((long)d);      //c#: str = 1/1/0001 12:00:00 AM 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T08:13:55.433

你可以试试这个：

首先在单元格中设置格式：

```
 ws.Cells[1,1].Style.Numberformat.Format = "yyyy/MM/dd"; 
```

然后将值设置为 DateTime：

```
workSheet.Cells[1, 1] =new DateTime(2012,9,20); 
```

要获得价值，请使用以下内容：

```
double d = double.Parse(workSheet.Cells[1, 1].value());
DateTime conv = DateTime.FromOADate(d); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:11:32.470

通过键入 `=2012/9/20" 你告诉 Excel 这是一个公式。2012 除以 9，除以 20 等于 11.17777777778。

尝试存储不带`=`符号的日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T08:13:11.843

如果要在 Excel 单元格中存储文字或预先格式化的值，请在该值前加上单引号`'`。例如，`workSheet.Cells[1, 1] = "'2012/9/20";`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-07T06:52:01.820

伙计，您的 excel 值不是日期。去掉开头的等号。

完成此操作后，您将获得适当的双精度值（可以通过 OADate 函数进行转换）。你现在得到的都是废话。

# android - 我可以以编程方式将 Textview 添加到 appwidget 而不在 xml 布局中定义它吗？

> ID：12561043
> 
> 赞同：1
> 
> 时间：2012-09-24T08:03:55.073
> 
> 标签：android, android-layout, android-widget

我做了很多研究来做以下事情：
我想在`AppWidgetProvider`类中通过代码添加一个文本视图，但我不能这样做，因为需要一个已经在 xml 布局中定义的视图的 id 的`addView`方法。`RemoteViews`

我想根据小部件的大小添加文本视图，我可以这样做吗？

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:07:15.193

Yes you can check this [Link](https://stackoverflow.com/a/7445160/1412308) its may help you.

or

```
TextView valueTV = new TextView(this);
valueTV.setText("hallo hallo");
valueTV.setId(5);
valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
```

# c# - C# 应用程序中的字体

> ID：12561047
> 
> 赞同：1
> 
> 时间：2012-09-24T08:04:14.093
> 
> 标签：c#, .net, winforms, fonts

我在 C# 中开发了一个独立的应用程序

我需要一种简单的字体

当用户输入英文时，它会自动转换为马拉地语或说 Devnagari 脚本

有谁知道具体的字体？？？

有没有安装特定软件可以解决上述问题？？？

我希望它...如果用户在键盘上键入...maz nav raj>>>那么显示应该是...मझ नाव राज

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:13:06.313

您可以使用[Google translate API](https://developers.google.com/translate/)或[Bing Translate API](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)。

# c++ - Visual Studio 不能包含头文件。

> ID：12561048
> 
> 赞同：20
> 
> 时间：2012-09-24T08:04:14.940
> 
> 标签：c++, visual-studio-2010

Visual Studio 项目有一个用于存放头文件的文件夹。所以，我把头文件放在那里，以为我可以输入#include“SDL.h”，但这不起作用。我做了一些搜索，发现没有任何帮助。

![错误](../Images/da8a02e9107b67a6074ca890c7b7f8c6.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-24T08:05:19.843

将标题放在那里仅有助于组织您的文件，它不会将文件复制到包含目录，也不会使其自动可见。

您需要将路径添加`SDL.h`到项目其他包含目录的位置。

只需右键单击项目 -> 配置属性 -> C/C++ -> 常规 -> 附加包含目录。

事实上，您不必添加`SDL.h`到解决方案中，在 Additional Include Directories 中有路径就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:08:57.417

您可以在左侧看到的此文件夹视图只是项目组织层次结构 - 它不反映您的磁盘层次结构，并且文件在磁盘上的实际位置可能完全不同。并且#include 会考虑您的磁盘位置（以及项目属性中设置的所有搜索路径）

因此，简而言之： - 检查您的 SDL.h 文件是否在磁盘上可访问的位置:)

# map - MAP（移动应用程序部分）和 SMPP（短消息对等）协议之间的区别

> ID：12561051
> 
> 赞同：3
> 
> 时间：2012-09-24T08:04:50.717
> 
> 标签：map, smpp, telecommunication

我对这些协议有一个基本的想法，但是当谈到将它们放在一个集成系统中时，我无法理解它们的位置。

例如。有人可以解释一下什么时候使用 SMPP 什么时候使用 MAP 吗？它们属于不同的电信网络吗？假设我们有一个 IP-SM-Gateway。那么它是如何使用的呢？它的作用类似于从 IMS 到 SS7 网络的消息转换器吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-29T19:56:35.193

SMPP 用于 IP 网络，而 MAP 是 SS7 堆栈的一部分 - 用于 SS7 网络。SMPP 通常在 SMS 提供商之间使用，或由电信公司为其 VAS 服务提供。另一方面，MAP 被电信基础设施中的 SMSC 设备使用。

通常电信运营商都有可以接受 SMPP 连接的 SMSC。一旦某个 VAS 客户端通过 SMPP 向 SMSC 提交消息，SMSC 将使用 MAP 将此消息传递给订户。

因此，您实际上可以在您的机器上使用 SMPP 客户端并连接到电信公司的 SMSC（当然，一旦您与电信公司就此达成一致）。这实际上是了解什么是 SMPP / MAP 关系的一个很好的例子。在这种情况下，如果您运行 SMPP 客户端并连接到 SMSC（通过公共互联网或某些 VPN），您将扮演“ESME”角色。连接后（在 SMPP 术语中，您“绑定成功”，使用 BindSM 数据包中的正确凭据），您可以使用 SubmitSM 数据包发送 SMS 消息。

因此，ESME 发送“SubmitSM”数据包，其中包含所有必需的 SMS 数据（源地址（发起者）、目标地址、消息文本等）。Telco 的 SMSC 将分析您的提交数据包，如果没有问题，将回复您发送 SubmitSMResp 数据包以及 MessageID（消息的唯一标识符）。

现在 SMSC 必须真正将消息传递给订阅者 - 它将使用 MAP 协议。首先，SMSC 将发送 MAP_SendRoutingInfo 数据包以发现用户当前注册的 MSC 地址。HLR（归属位置寄存器）将返回此类信息。然后 SMSC 将发出 MAP_ForwardShortMessage，将消息内容发送给 MSC 和 IMSI，两者都是在 HLR 收到的响应中提供的。MSC 将（希望）联系目标用户的移动设备，并向 SMSC 发送“确认”（移动设备发送的确认，说“我收到消息”）。

此过程完成后，SMSC 将再次使用 SMPP ，让您的 SMPP 客户端知道消息已传递 - 您将收到带有先前 MessageId 标识符的“DeliverSM”SMPP 数据包，表示“您的消息已成功传递”。

请注意，这只是一个通用的“用例”，那里有很多不同的流，例如使用 DeliverSM 而不是 SubmitSM，在 MAP 上重试以防 MSC 等没有肯定的确认等。我只是使用了这个例子试图解释 SMPP 和 MAP 的常见用法 - 我希望您了解每种协议的作用。

# c# - 错误 CS5001：exe 不包含适用于入口点的静态“Main”方法

> ID：12561052
> 
> 赞同：6
> 
> 时间：2012-09-24T08:04:55.023
> 
> 标签：c#, macos, mono, xamarin.ios, monodevelop

在尝试编译我的 MonoTouch 项目时，我突然开始收到以下错误。

> 错误 CS5001：程序“MyApp.exe”不包含适用于入口点 (CS5001) (MyApp) 的静态“Main”方法

下面是我的 Main.cs 的样子。

```
using System;
using System.Collections.Generic;
using System.Linq;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace MyApp
{
    public class Application
    {
        static void Main (string[] args)
        {
            UIApplication.Main (args, null, "AppDelegate");
        }
    }
} 
```

知道我能做些什么来解决这个问题吗？还是我需要创建一个新的解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-19T09:00:38.647

也许您可能错过了 STAThread：

```
[STAThread]
static void Main(string[] args)
{
 ...
} 
```

# symfony1 - 管理员生成器 yaml：链接到另一个模块

> ID：12561054
> 
> 赞同：0
> 
> 时间：2012-09-24T08:05:07.367
> 
> 标签：symfony1, symfony-1.4, admin-generator

如何在 Symfony 管理生成器 Yaml 中生成指向另一个模块的链接？我正在尝试从 sfGuardUser 模块（用户列表）链接到 profile/viewProfilesDetails 但它总是指向 sfGuardUser/viewProfilesDetails

我的 generator.yml ：

```
(...)
  list:
    title:   Użytkownicy
    display: [=username, _name, created_at, last_login]
    actions: {}
    batch_actions: {}
    object_actions:
      _edit: ~
      signIn:
        label:  Zaloguj jako
        action: signIn
      viewProfiles:
        label:  Profile
        module: profiles
        action: viewProfilesDetails
(...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:10:02.853

我认为您不能在此配置中指定模块，而只能指定来自同一模块的操作。

我个人就是这样做的。

`generator.yml`：

```
object_actions:
  _edit: ~
  _delete: ~
  viewItems: { label: View items, action: viewItems } 
```

然后在同一个模块中`generator.yml`，我创建了一个动作：

```
public function executeViewItems($request)
{
  $this->redirect($this->generateUrl('items'));
} 
```

它会生成一个名为*View items*的链接，例如`/blog/158/viewItems`重定向到`/items`（即路由`@items`）。

**编辑：**

事实上，您**不能**指定其他模块。

模板[`_list_td_actions.php`](http://trac.symfony-project.org/browser/branches/1.4/lib/plugins/sfDoctrinePlugin/data/generator/sfDoctrineModule/admin/template/templates/_list_td_actions.php)展示`list.object_actions`。这是有趣的部分：

```
<?php else: ?>
    <li class="sf_admin_action_<?php echo $params['class_suffix'] ?>">
      <?php echo $this->addCredentialCondition($this->getLinkToAction($name, $params, true), $params) ?>
    </li>
<?php endif; ?> 
```

它通过以下方式调用`getLinkToAction`使用当前模块的`$this->getModuleName()`：

```
return '[?php echo link_to(
  __(\''.$params['label'].'\', array(), \''.$this->getI18nCatalogue().'\'), 
  \''.$this->getModuleName().'/'.$action.$url_params.', 
  '.$this->asPhp($params['params']).'
) ?]'; 
```

# eclipse-plugin - 如何为工作台窗口主工具栏贡献一个按钮

> ID：12561056
> 
> 赞同：2
> 
> 时间：2012-09-24T08:05:23.250
> 
> 标签：eclipse-plugin, eclipse-rcp

![在此处输入图像描述](../Images/c3d98c030a4453233710eeafd8dfb13b.png)

请看上面的截图。我想将命令添加到工具栏 1，但它们进入工具栏 2。这是我的plugin.xml，

```
<menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="my.toolbar">
            <command
                  commandId="my.open"
                  label="Open"
                  style="push">
            </command>
            <command
                  commandId="my.save"
                  label="Save"
                  style="push">
            </command>
            <command
                  commandId="my.exit"
                  label="Exit"
                  style="push">
            </command>
         </toolbar>
      </menuContribution> 
```

我知道 locationURI 或工具栏 ID 不正确。但是我不知道工具栏1的ID。请帮我看看问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:05:31.490

这是系统中的一个错误，在窗口创建期间没有在正确的时间应用 menuContribution。[您可以在https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Platform&component=UI](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Platform&component=UI)打开一个错误

如果您将 save & restore 设置为 true，则在恢复时它可能会在正确的位置（但它仍然应该得到修复）。

# c# - C#中的多维数组问题

> ID：12561057
> 
> 赞同：-2
> 
> 时间：2012-09-24T08:05:28.970
> 
> 标签：c#, .net

这是将一个二维数组的所有值分配给另一个二维数组的有效方法吗？

```
matrix1=matrix2; 
```

他们都是`mXn`维度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T08:06:36.983

采用**[`Array.Copy()`](http://msdn.microsoft.com/en-us/library/system.array.copy%28v=vs.71%29.aspx)**

```
Array.Copy(sourceArray, targetArray); 
```

# c# - ASP.NET 会话和 LINQ

> ID：12561058
> 
> 赞同：5
> 
> 时间：2012-09-24T08:05:34.483
> 
> 标签：c#, asp.net, linq, session, linq-to-entities

我有一个关于我目前正在从事的项目的问题。

我有这个代码：

```
 var query = from user in dwe.UsersTable
                        where user.LoginName.Equals(usernameBox.Text) && user.Password.Equals(pwBox.Text)
                        select user;

        if (query.Count() == 1)
        {
            Session["User"] = usernameBox.Text;                     
            Response.Redirect("Edit.aspx");
        }
        else
        {
            LabelError.Text = "Error try again";
        }
    } 
```

在我的“UsersTable”中，我有一个名为“UserID”的列。**我想**将“用户 ID”作为会话发送到重定向页面 (Edit.aspx)，用户 ID 必须等于用户名和密码之间的比较结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:09:37.247

你只需要写下

```
var query = (from user in dwe.UsersTable 
                        where user.LoginName.Equals(usernameBox.Text) && 
                        user.Password.Equals(pwBox.Text)
                         select user).FirstOrDefault();

if(query!=null)
{
   Session["User"] = query.UserID; 
   Response.Redirect("Edit.aspx"); 
}
else
{
   LabelError.Text = "Error try again";
} 
```

无需编写您拥有的使用 Count 方法的代码，而不是仅使用 Of`FirstOrDefault`将轻松为您提供结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:07:27.513

```
var query = from user in dwe.UsersTable
            where user.LoginName.Equals(usernameBox.Text) 
                  && user.Password.Equals(pwBox.Text)
            select user;

// get user from query
// If SingleOrDefault is not supported (<4.0) use FirstOrDefault instead. 
// Thanks Tim Schmelter
var user = query.SingleOrDefault(); 

if (user != null)
{
    Session["UserID"] = user.UserID;                 
    Response.Redirect("Edit.aspx");
}
else
{
    LabelError.Text = "Error try again";
} 
```

# java - 快速搜索字典

> ID：12561061
> 
> 赞同：2
> 
> 时间：2012-09-24T08:05:49.763
> 
> 标签：java, algorithm, data-structures

我需要在数据结构中存储几百个字符串。每个字符串都有两个与之关联的字段，比如说单词含义及其来源。我可以以任何方式存储单词，比如排序、反向排序或任何你喜欢的方式。

* * *

我只需要尽快在字典中搜索一个字符串并获取两个相关字段。如果可能的话，我希望我的搜索比二分搜索更好。

* * *

我正在使用 Java。我应该使用哪个`data structure`或`Collection Class`应该使用？

* * *

注意：我不想在此使用数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:07:46.577

您可以使用 a [`HashMap<String,MyDataObject>`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)- 这将是最快和最简单的使用。

平均寻道时间是`O(|S|)`，其中`|S|`是字符串的长度。

您也可以尝试使用[trie](http://en.wikipedia.org/wiki/Trie)或[radix tree](http://en.wikipedia.org/wiki/Radix_tree)，但请确保`HashMap`在开始研究解决方案之前通过分析解决方案来为它留出时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:10:33.877

显而易见的答案是“使用 a `HashMap`”，但并非没有警告。您搜索的每个字符串都需要计算其哈希码。如果您每次都使用一个新对象，则每次都需要支付 O( *s* )（在这种情况下*s*是字符串长度），再加上另一个 O( *s* ) 进行`equals`检查。

解决此问题的一种方法是使用`intern`所有用于搜索的字符串。`equals`这将确保一次计算的哈希码被重用，并且还将使随后的检查短路。

另一种选择是使用*trie*。它的优点是你最多支付 O( *s* )，但通常更少——它是基于前缀的搜索，所以只要你遍历到你的前缀唯一的点，你就会得到结果。

总之，如果您可以安排`interned`字符串的重用，基于哈希码的解决方案是最佳的；如果不是，则*trie*是更好的选择。

其他常见的选项是跳过列表（在 Lucene 中使用）和 B-tree（在数据库索引中很常见）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:08:43.780

使用`HashTable`或`HashMap`

你的结构应该是这样的`HashMap<String,Bookcontent>`

where`BookContent`是具有属性词含义和来源的类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T08:11:25.263

我建议你使用**Trie**数据结构。我已经完成了与此类似的任务。此[链接](http://vkroz.wordpress.com/2012/03/23/prefix-table-trie-implementation-in-java/)可帮助您实施 Trie DS。

# python - Python 从文件中提取数据

> ID：12561063
> 
> 赞同：8
> 
> 时间：2012-09-24T08:05:53.230
> 
> 标签：python, python-2.7

我有一个文本文件只是说

```
text1 text2 text text
text text text text 
```

我希望首先计算文件中字符串的数量（全部由空格分隔），然后输出前两个文本。（文本 1 文本 2）

有任何想法吗？

在此先感谢您的帮助

编辑：这是我到目前为止所拥有的：

```
>>> f=open('test.txt')
>>> for line in f:
    print line
ï»¿text1 text2 text text text text hello
>>> words=line.split()
>>> words
['\xef\xbb\xbftext1', 'text2', 'text', 'text', 'text', 'text', 'hello']
>>> len(words)
7
if len(words) > 2:
    print "there are more than 2 words" 
```

我遇到的第一个问题是，我的文本文件是： text1 text2 text text text

但是当我拉出单词的输出时，我得到： ['\xef\xbb\xbftext1', 'text2', 'text', 'text', 'text', 'text', 'hello']

'\xef\xbb\xbf 来自哪里？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T08:13:20.253

要逐行读取文件，只需循环遍历打开的文件对象`for`：

```
for line in open(filename):
    # do something with line 
```

要按空格将一行拆分为单独的单词列表，请使用`str.split()`：

```
words = line.split() 
```

要计算 python 列表中的项目数，请使用`len(yourlist)`：

```
count = len(words) 
```

要从 python 列表中选择前两项，请使用切片：

```
firsttwo = words[:2] 
```

我将把构建完整的程序留给你，但你不需要比上面更多的东西，加上一个`if`声明，看看你是否已经有了你的两个词。

您在文件开头看到的三个额外字节是[UTF-8 BOM](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)（字节顺序标记）；它将您的文件标记为 UTF-8 编码，但它是多余的，仅在 Windows 上真正使用。

您可以使用以下方法将其删除：

```
import codecs
if line.startswith(codecs.BOM_UTF8):
    line = line[3:] 
```

您可能希望使用该编码将字符串解码为 un​​icode：

```
line = line.decode('utf-8') 
```

您还可以使用以下命令打开文件[`codecs.open()`](http://docs.python.org/library/codecs.html#codecs.open)：

```
file = codecs.open(filename, encoding='utf-8') 
```

请注意，这*不会*`codecs.open()`为您剥离 BOM；最简单的方法是使用：*`.lstrip()`*

 *```
import codecs
BOM = codecs.BOM_UTF8.decode('utf8')
with codecs.open(filename, encoding='utf-8') as f:
    for line in f:
        line = line.lstrip(BOM) 
```*

# java - lwjgl 找不到我的纹理的路径

> ID：12561064
> 
> 赞同：0
> 
> 时间：2012-09-24T08:05:54.243
> 
> 标签：java, opengl, lwjgl, texture-mapping

我不知道如何使用 lwjgl 在 2d 环境中加载纹理。

我正在使用他们教程的 Sprite、Texture 和 TextureLoader 类。我只是用自己的路径/文件替换了原始路径/文件，我已经检查了大约 20 次以确保它们是正确的。这是代码，以及它产生的错误。

```
public Sprite(TextureLoader loader, String ref) {
    try 
    {
        texture = loader.getTexture("C:/Users/John/workspace/MyGames/sprites/" + ref);
        width = texture.getImageWidth();
        height = texture.getImageHeight();
    } 
    catch (IOException ioe) 
    {
        ioe.printStackTrace();
        System.exit(-1);
    }
}

java.io.IOException: Cannot find: C:/Users/John/workspace/MyGames/sprites/ship.gif 
```

我究竟做错了什么？

编辑：当我尝试自己运行 lwgjl 太空侵略者游戏而不进行任何修改时，我遇到了同样的问题。我将所有文件都放在正确的路径中，并检查了调用中是否存在这些路径。

# jquery - 如何在 HTML 和 CSS 中将背景设为静态？

> ID：12561066
> 
> 赞同：0
> 
> 时间：2012-09-24T08:06:07.803
> 
> 标签：jquery, iphone, html, css, mobile

我用 jQuery Mobile、CSS 和 HTML 制作了一个移动网站，并在所有不同的页面上设置了背景图片。它适用于那些包含少量文本的页面。但是一页包含您必须向下滚动才能阅读的文本量。在那个页面上，背景调整了大小，你只能看到它的一半。如果我想要一个无论我如何滚动都始终保持不变的静态背景，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:10:18.010

modified as mentioned by '@Rob W' `background-attachment:fixed` should do the job.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:15:06.913

```
background: url(path-to-image.jpg) no-repeat center center fixed;
background-size: cover; 
```

如果您使用背景图案，而不是`no-repeat`使用：
`repeat`，`repeat-x`或者`repeat-y`取决于您的需要。
该`background-size`属性取决于您的发现。我喜欢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:13:37.447

您必须更改`background-size`属性（查看 specs 或[css3.info](http://www.css3.info/preview/background-size/)）或添加`repeat`而不是`no-repeat`. 取决于你想要得到的效果。

# jquery - 内置多选 JQuery 下拉列表

> ID：12561069
> 
> 赞同：0
> 
> 时间：2012-09-24T08:06:23.143
> 
> 标签：jquery, jquery-plugins

默认情况下，是否有任何内置的多选下拉列表作为 JQuery 插件提供。我尝试了 3rd 方插件。但我的要求不是这样的。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:12:58.600

结帐 JQuery UI 演示[http://jqueryui.com/demos/selectable/](http://jqueryui.com/demos/selectable/)这个演示有一个多选，当你按下 CTRL+Click 时它会起作用。另一方面，您需要一个下拉菜单。我发现除了一个很好的插件之外，我已经看到了[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)并且是高度可配置的。试试看。

# sql-server-2005 - 使用 OSQL 命令时如何批量获取错误名称？

> ID：12561074
> 
> 赞同：0
> 
> 时间：2012-09-24T08:06:32.920
> 
> 标签：sql-server-2005, batch-file, osql

我创建了一个执行 sql 命令的批处理文件。

让我们看看这段代码

```
SET OSQL="C:\Program Files (x86)\Microsoft SQL Server\90\Tools\Binn\osql.exe"
IF NOT EXIST %OSQL% ECHO OSQL.EXE not found, please check the OSQL variable!
IF NOT EXIST %OSQL% GOTO :ERROR

SET SQLQUERY_UPDATEDB = "SELECT * FROM %DB%";

%OSQL% -S %SQLSERVERNAME% -d %DBNAME% -U %DBACCOUNT% -P %DBPASSWORD% -Q %SQLQUERY_UPDATEDB% -n -b -m-1 > D:\sqloutput.txt

:ERROR
ECHO Sorry, could not complete your request!
ECHO %ERRORLEVEL%
GOTO :END

:END
ECHO Finish batch 
```

上面的代码部分总是返回 0 和`Sorry, could not complete your request!`. 这是什么意思 ？

如何设置在控制台中显示错误以查看到底是什么错误？

我用[MSDN](http://msdn.microsoft.com/en-us/library/ms162806.aspx)放置`-m-1`并相应地删除了，但没有出现在我的控制台中。`-h-1`

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:12:03.707

嗯。因为即使它成功运行 SQL 命令，它也会进入错误处理程序？

`GOTO :END`运行命令后尝试添加：

```
SET SQLQUERY_UPDATEDB = "SELECT * FROM %DB%";

%OSQL% -S %SQLSERVERNAME% -d %DBNAME% -U %DBACCOUNT% -P %DBPASSWORD% -Q %SQLQUERY_UPDATEDB% -n -b -m-1 > D:\sqloutput.txt
GOTO :END

:ERROR 
```

# css - @font-face 完全被窃听

> ID：12561079
> 
> 赞同：1
> 
> 时间：2012-09-24T08:06:53.143
> 
> 标签：css, font-face

我正在尝试将字体导入我正在使用的网站`@font-face`。但它无法在**Chrome**上运行，有时它可以在**Firefox**上运行，有时不能。

所以我不知道发生了什么。

这是我迄今为止尝试过的：

```
@font-face {
    font-family: "Proxima Nova";
    src: url('fonts/Proxima Nova.otf') format('opentype');
} 
```

这几乎在**Firefox**中有效，但**Chrome**甚至不想显示它，而是显示了一些完全随机大小的奇怪字体，与输入的 css 无关。

然后我尝试了这个：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    @font-face {
        font-family: 'proxnova';
        src: url('fonts/ProximaNovaSemibold.otf') format('opentype');
        font-weight: normal;
        font-style: normal;
    }
} 
```

这修复了大小问题，但现在它在任何地方都没有显示正确的字体。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:10:29.303

您必须为不同的浏览器使用不同的字体格式。对于那个很抱歉... ：（

### 来源：[http ://css-tricks.com/snippets/css/using-font-face/](http://css-tricks.com/snippets/css/using-font-face/)

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfont.woff') format('woff'), /* Modern Browsers */
         url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
    } 
```

您可以使用[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)之类的网站自动生成所需的一切。

# html - CSS Layout info-box

> ID：12561083
> 
> 赞同：0
> 
> 时间：2012-09-24T08:07:10.383
> 
> 标签：html, css

my Problem is that I need in exactly that hierachy an infoBox that pops up on an event (it will be an click on button). Div "Info" should be that. It should be independent on the parent-element. So for example if I set top:0px; and left:0px; it should be at the top left of the browserwindow. How to solve this?

```
<div style="postion:relative;float:left;margin-left:20px;margin-right:20px;">
  <div style="postion:relative;float:left;margin-top:100px">
    <div id="info" style="display:hidden;background-color:red"></div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:11:30.880

将位置设置为绝对将始终使用浏览器窗口中的绝对位置（例如 top:0px；left:0px 是浏览器窗口的左上角）。

# ajax - ajaxplorer set default language

> ID：12561086
> 
> 赞同：0
> 
> 时间：2012-09-24T08:07:21.490
> 
> 标签：ajax, config, explorer, lang, pydio

I use Ajaxplorer as explorater for file on the server I works very fine, but the thing is that I can not, or I do not know how to change default configuration.

In the documentation it s written:

```
Browse to conf and open the file conf.php. Use your favorite text editor to open and modify this document. We’ll customize settings in this file for your unique server configuration and security purposes. Make the mandatory changes listed in section 2.4 Required Settings.

2.4 Required Settings

$dft_langue="en": Set the default language to be used (modify bold portion).
define("ADMIN_PASSWORD", "admin"): Set the administrator password which is granted most permissions (access) on your file server (modify bold portion). 
```

I've been looking for the conf.php file since 1 hours but I did not find it.

So I do not know when I do it directly on the interface everytime it says 'your peferences has been saved' but when I close and reopen the window, there is no mora savec configuration.

Of course I've clean the cache after each modification.

Thank you very much in advance for your help.

Kind regards.

SP.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T02:52:09.810

它指的是您可以在 system_path/ajaxplorer/conf/ 文件夹下找到的 bootstrap_context.php 文件。如果您遇到麻烦，请尝试查看这里[http://ajaxplorer.info/f/topic/bug-share-center-5-0/](http://ajaxplorer.info/f/topic/bug-share-center-5-0/)

# php - 如何在文本字段中阅读全文

> ID：12561090
> 
> 赞同：0
> 
> 时间：2012-09-24T08:07:41.987
> 
> 标签：php, mysql, forms, post

目前我想从我的数据库中打印出全文，但它只打印出 1 个文本，我不知道为什么以及如何解决它，代码和图像显示如下::

```
print "<td><input name='taskname[]' type='text' size='225' value=".$db_field['task_name']." readonly=readonly></td>"; 
```

![在此处输入图像描述](../Images/4329785538bceaf94c7e0f9863ae0d0f.png)

假设它出现像“配置新问题”这样的全文，但它没有，为什么会发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:09:29.283

您需要将`value`属性的值放在引号之间：

```
 value='".$db_field['task_name']."'
       ^                          ^ 
```

由于您在 HTML 中输出内容，因此您还需要调用[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)它：

```
 value='".htmlspecialchars($db_field['task_name'], ENT_QUOTES)."' 
```

的第二个（编码选项）和第三个（输入的文本编码）参数`htmlspecialchars` **必须**设置为正确的值；请查看文档确定哪些适合您。

# objective-c - dispatch_async 比 performSelectorInBackground 慢：？

> ID：12561093
> 
> 赞同：2
> 
> 时间：2012-09-24T08:08:00.483
> 
> 标签：objective-c, ios, multithreading, cocoa-touch, grand-central-dispatch

在我的应用程序中，我使用了`performSelectorInBackground:`从磁盘加载图像。在使用 dispatch_async 进行一些单元测试后，我决定用 dispatch_async 调用替换我的 performSelectorInBackground。

```
dispatch_queue_t currentBackgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
dispatch_async(currentBackgroundQueue, ^{
    [self getImageFromDisk:sPath delegate:(id)delegate];
}); 
```

该代码似乎有效，但现在我的图像加载速度比以前慢。当用户滚动图像时，这会导致黑色图像。

我的应用程序包含某种照片卷轴。我不能使用苹果的平铺示例代码，因为它会增加应用程序的大小。我使用[这个](https://gist.github.com/259357)片段从磁盘加载图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T08:14:43.297

我之前在其他类似问题上说过，在全局队列上使用异步调度会导致类似同步的行为，尤其是对于最终更新 UI 的代码。YMMV 但是当我尝试它时，它或多或少与同步调用的结果相同。创建和使用您自己的队列，或（创建并使用您自己的队列）与 NSOperations。

我相信这样做的原因是任何发布到全局队列的事件都会消耗队列处理时间，即使代码在*技术上*是异步的。不要将全局队列用于后台操作。

使用自定义队列并抽取您自己的运行循环。

# android - Accept value from a variable to SQLITE execute statement

> ID：12561095
> 
> 赞同：1
> 
> 时间：2012-09-24T08:08:09.650
> 
> 标签：android, sqlite, cordova

I am using SQLITE as my database in Phonegap but the value of the variable is not being accepted in tx.execute statements

```
var name=document.getElementByID("Txtname").value;
 var age=document.getElementByID("Txtage").value;
   function populateDB(tx)
 {     
   tx.executeSql('DROP TABLE IF EXISTS DEMO');  
   tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)'); 
   tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, '"+name+"')');  
   tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, '"+age+"')'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:12:21.003

只需使用这个简单的字符串连接。

```
executeString = "INSERT INTO DEMO (id,data) VALUES (1,'"+name+"')";
tx.executeSql(executeString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-01T15:04:30.293

在 jsfiddle 或类似的地方试试这个。（[jsfiddle示例](https://jsfiddle.net/zcsa963y/)）

```
db = window.openDatabase('demo',1,'demo',1024);
db.transaction(function(tx) {
   tx.executeSql("CREATE TABLE demo (`id` unique, `data`);");
   var query = "INSERT INTO `demo` (id,data) VALUES(?,?);";
   var values = [1,"abc"];
   tx.executeSql(query, values);
}); 
```

或内联

```
db = window.openDatabase('demo',1,'demo',1024);
db.transaction(function(tx) {
   tx.executeSql("CREATE TABLE demo (`id` unique, `data`);");
   var name = "abc";
   tx.executeSql("INSERT INTO demo (`id`,`data`) VALUES(2,'"+name+"');");
}); 
```

*注意，如果您尝试第一个然后是第二个示例，它将失败，因为您尝试再次创建表，然后因为 ID 不是唯一的，这可能是您最初的问题。

您不会在控制台中收到任何错误。最好通过提供成功/错误处理程序来查看发生了什么。

```
db = window.openDatabase('demo', 1, 'demo', 1024);
db.transaction(function(tx) {
  var name = "abcd";
  tx.executeSql("INSERT INTO demo (`id`,`data`) VALUES(1,'" + name + "');", [], successHandler, errorHandler);
});

function errorHandler(transaction, error) {
  alert("Error : " + error.message);
}

function successHandler(transaction, result) {
  alert("Success : " + result.rowsAffected + " rows affected");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:14:49.690

我不知道 PhoneGap 中的工作原理，但我认为您需要将查询封装在双引号`"`中，而不是单引号中`'`

```
tx.executeSql("DROP TABLE IF EXISTS DEMO");
tx.executeSql("CREATE TABLE IF NOT EXISTS DEMO (id unique, data)");
tx.executeSql("INSERT INTO DEMO (id, data) VALUES (1, '" + name + "')");
tx.executeSql("INSERT INTO DEMO (id, data) VALUES (2, '" + age + "')"); 
```

# javascript - Algorithm for fitting different sized rectangles in a larger rectangle

> ID：12561102
> 
> 赞同：2
> 
> 时间：2012-09-24T08:09:00.987
> 
> 标签：javascript, algorithm, math

I need an algorithm to calculate best fit for rectangles in a larger rectangle.. and the larger rectangle changes size dynamically. More details:

I am using the Code52 Metro UI project: [http://code52.org/metro.css/](http://code52.org/metro.css/)

I am using only ONE tile row and all the tiles have "float:left" defined. This works beautifully when all the tiles are of the same size.. a user can resize the browser to any width and the tiles just "drop down" under each other. Now the problem comes in when I want different tile sizes. This breaks everything and is obviously why people generally design metro UIs as fixed width. Well, I need to go with a fluid layout if possible. Tile sizes are pre-defined as follows:

```
Single: 130px x 130px
Double Horizontal: 130px x 280px
Double Vertical: 280px x 130px
and Double Both: 280px x 280px 
```

Container is fluid, so width/height changes dynamically.

What I need is an algorithm to make a best-fit for the tiles.. so any empty spaces will only be at the bottom-right corner and not mixed in with the tiles. Any math genius here with an idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:35:23.953

您可能想查看[jQuery Masonary](http://masonry.desandro.com/)。它旨在为任何尺寸的瓷砖做到这一点。头版上的示例甚至完全符合您的要求。

# c++ - Using private variable in class

> ID：12561108
> 
> 赞同：0
> 
> 时间：2012-09-24T08:09:41.397
> 
> 标签：c++, class, variables, crash

I'm running into an irritating problem where my program keeps crashing if I try to reference a private variable that I have created in one of my classes. I can't figure out where I am going wrong. Here is the class that calls the class that crashes:

```
#include <stack>
#include <fstream>
#include <ostream>
#include <cstdlib>
#include <string>
#include <set>
#include "schemeList.cpp"

using namespace std;

class dataLog
{
public:
stack<string> commands;
set<string> domain;
processor tokens;
int nextToken;
schemeList * s;
dataLog(stack<string> s, ofstream * out, processor p, int location)
{
    commands = s;
    tokens = p;
    nextToken = location;
    commands.push("<Query List>");
    commands.push(":");
    commands.push("Queries");
    commands.push("<Rule List>");
    commands.push(":");
    commands.push("Rules");
    commands.push("<Fact List>");
    commands.push(":");
    commands.push("Facts");
    commands.push("<Scheme List>");
    commands.push(":");
    commands.push("Schemes");
    checkNext();
}

void checkNext()
{
    for(int i = 0; i < tokens.tags.size(); i++)
    {
        if(commands.top().compare(tokens.tags[i].getName())!=0)
        {
            if(commands.top().find("<")==0)
            {
                if(commands.top().compare("<Scheme List>")==0)
                {
                    int output = (*s).process(i, tokens, domain);                       string hi = (*s).toString();

                }
            }
        }
        commands.pop();
    }

}
}; 
```

This class creates an object of my SchemeList class, which is written out as follows:

```
#include "schemes.cpp"
#include <cstdlib>
#include <string>
#include <set>
using namespace std;

class schemeList
{
private:
string success;

public:
int process(int number, processor p, set<string> domain)
{
    success = "HELLO";
    return 13;
}

string toString()
{
    return success;
}

}; 
```

As soon as I get to line 15 `success = "HELLO";`, the program crashes with the message

```
Unhandled exception at 0x00E48B66 in lab2.exe: 0xC0000005: Access violation reading   
 location 0xCCCCCCE4. 
```

I am using Microsoft Visual Studio Express 2012 for Windows Desktop.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:11:29.737

首先，变量`schemeList * dataLog::s`从未初始化，因此访问它是未定义的行为，这会导致崩溃。最有可能在悬空指针上调用进程并尝试写入您不拥有的一些内存。

第二，不要`#include "schemeList.cpp"`。您不应该包含`cpp`文件。相反，将声明和实现分开并包含标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:15:45.983

你还没有初始化`dataLog::s`。当你打电话时`(*s).process(i, tokens, domain)`，你会得到未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:16:11.910

首先，您显然在标头中包含源代码文件。这可能会打破单一定义规则并出现可怕的错误。

其次，“s”对于班级成员来说不是一个很好的名字。这使得几乎不可能找到它的用途。

第三，我在您的初始化 s 的代码中看不到任何地方。我可以看到它在哪里被引用了，但是由于它还没有被初始化，取消引用的效果是未定义的，幸运的是只会让你的程序崩溃，这看起来就像正在发生的事情。

# java - Android aapt duplicate files error when building with ant

> ID：12561110
> 
> 赞同：1
> 
> 时间：2012-09-24T08:10:17.307
> 
> 标签：java, android, ant, aapt

I am using ant to make a build system for our android project which has two build targets, Dev and Release.

This involves replacing the default `-package-resources` target with my own one in my build.xml. It goes from this:

```
<target name="-package-resources" depends="-crunch">
    <!-- only package resources if *not* a library project -->
    <do-only-if-not-library elseText="Library project: do not package resources..." >
        < aapt executable="${aapt}"
                command="package"
                versioncode="${version.code}"
                versionname="${version.name}"
                debug="${build.is.packaging.debug}"
                manifest="${out.manifest.abs.file}"
                assets="${asset.absolute.dir}"
                androidjar="${project.target.android.jar}"
                apkfolder="${out.absolute.dir}"
                nocrunch="${build.packaging.nocrunch}"
                resourcefilename="${resource.package.file.name}"
                resourcefilter="${aapt.resource.filter}"
                libraryResFolderPathRefid="project.library.res.folder.path"
                libraryPackagesRefid="project.library.packages"
                previousBuildType="${build.last.target}"
                buildType="${build.target}"
                ignoreAssets="${aapt.ignore.assets}"
                >
            <res path="${out.res.absolute.dir}" />
            <res path="${resource.absolute.dir}" />
            <!-- <nocompress /> forces no compression on any files in assets or res/raw -->
            <!-- <nocompress extension="xml" /> forces no compression on specific file extensions in assets and res/raw -->
        </aapt>
    </do-only-if-not-library>
</target> 
```

To this :

```
<target name="-package-resources" depends="-crunch">
    <!-- only package resources if *not* a library project -->
    <echo message="Packaging resources with ${package.internal} as a package name" />
    <do-only-if-not-library elseText="Library project: do not package resources..." >
        <exec executable="${aapt}" failonerror="true">
                <arg value="package" />
                <arg value="-f" />
                <arg value="-v" />
                <arg value="-M" />
                <arg path="${out.manifest.abs.file}" />
                <arg value="-A" />
                <arg path="${asset.absolute.dir}" />
                <arg value="-I" />
                <arg path="${project.target.android.jar}" />
                <arg value="-m" />
                <arg value="-J" />
                <arg path="${out.absolute.dir}" />
                <arg value="-F" />
                <arg path="${out.absolute.dir}/${resource.package.file.name}" />
                <arg value="-S" />
                <arg path="${out.res.absolute.dir}" />
                <arg path="${resource.absolute.dir}" />
                <arg value="--no-crunch" />
        <arg value="--rename-manifest-package" />
        <arg value="${package.internal}" />
        </exec>
    </do-only-if-not-library>
</target> 
```

However, when I launch the build, it fails on this step with the following error:

```
-package-resources:
     [echo] Packaging resources with dev.appname.android as a package name
     [exec] Found 4 custom asset files in /appname/app/native/android/appname/assets
     [exec] Processing raw dir '/appname/app/native/android/appname/res'
     [exec] /appname/app/native/android/appname/res/drawable/map_marker.png: error: Duplicate file.
     [exec] /appname/app/native/android/appname/bin/res/drawable/map_marker.png: Original is here. 
```

Not sure how to proceed here. My understanding was that the `-f` flag should take care of overwriting files.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:22:03.007

这里的问题是同一个资源文件被找到了两次。

[执行] /appname/app/native/android/appname/res/drawable/map_marker.png：错误：重复文件。[exec] /appname/app/native/android/appname/bin/res/drawable/map_marker.png：原件在这里。

运行 Ant 构建时，建议您保持 Eclipse 关闭，因为它会自动将 res/* 转储到 bin

还要确保在运行 aapt 之前有一个干净的目标来清理 bin。希望两者都能解决您的问题...

当我尝试使用以下 build.properties 进行构建时，它会成功。我使用的build.properties如下..

```
sdk.dir=<sdk.dir>
source.dir=src
gen.dir=gen
resource.dir=res 
asset.dir=res/assets
external.libs.dir=libs
out.dir=bin
target=android-10
target.api=android-10 
```

希望能帮助到你 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:13:02.193

原来这是我自己的错；以下，

```
<arg value="-S" />
<arg path="${out.res.absolute.dir}" />
<arg path="${resource.absolute.dir}" /> 
```

应该是：

```
<arg value="-S" />
<arg path="${out.res.absolute.dir}" />
<arg value="-S" />
<arg path="${resource.absolute.dir}" /> 
```

# jqplot - Export jqplot within the update panel

> ID：12561115
> 
> 赞同：1
> 
> 时间：2012-09-24T08:10:35.523
> 
> 标签：jqplot

I have graph in my page, build with the help of jqplot. And the graph lies within the update panel.Now I need to export that graph to the excel. But while I export that graph only the Title get exported but not the graph.So, I am stuck on this.

I will be very thankful to the answer for exporting the chart build by jqplot within the update panel to excel

Code used for export:

```
protected void btnExcel_Click(object sender, ImageClickEventArgs e)
{
    Response.Clear();
    Response.AddHeader("content-disposition", "attachment;filename=ProjectTarget_" + CampaignID + ".xls");
    Response.Charset = "";
    Response.ContentType = "application/vnd.xls";
    StringWriter stringWrite = new StringWriter();
    HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);

    //  LoadMileStones(currMileStone);

    TableLists.RenderControl(htmlWrite);
    Response.Write(stringWrite.ToString());
    Response.End();
} 
```

# sql - Importing multiple xml files, filter, then output to different xml format in SSIS

> ID：12561120
> 
> 赞同：0
> 
> 时间：2012-09-24T08:10:48.067
> 
> 标签：sql, xml, ssis

I have a task that requires me to pull in a set of xml files, which are all related, then pick out a subset of records from these files, transform some columns, and export to a a single xml file using a different format.

I'm new to SSIS, and so far I've managed to first import two of the xml files (for simplicity, starting with just two files).

The first file we can call "Item", containing some basic metadata, amongst those an ID, which is used to identify related records in the second file "Milestones". I filter my "valid records" using a lookup transformation in my dataflow - now I have the valid Item ID's to fetch the records I need. I funnel these valid ID's (along with the rest of the columns from Item.xml through a Sort, then into a merge join.

The second file is structured with 2 outputs, one containing two columns (ItemID and RowID). The second containing all of the Milestone related data plus a RowID. I put these through a inner merge join, based on RowID, so I have the ItemID in with the milestone data. Then I do a full outer join merge join on both files, using ItemID.

This gives me data sort of like this:

*   ItemID[1] - MilestoneData[2]
*   ItemID[1] - MilestoneData[3]
*   ItemID[1] - MilestoneData[4]
*   ItemID[1] - MilestoneData[5]
*   ItemID[2] - MilestoneData[6]
*   ItemID[2] - MilestoneData[7]
*   ItemID[2] - MilestoneData[8]

I can put this data through derived column transformations to create the columns of data I actually need, but I can't see how to structure this in a relational way/normalize it into a different xml format.

The idea is to output something like:

```
<item id="1">
      <Milestone id="2">
      <Milestone />
      <Milestone id="3">
      <Milestone />
</item> 
```

Can anyone point me in the right direction?

**UPDATE:** A bit more detailed picture of what I have, and what I'd like to achieve:

Item.xml:

```
 <Items>
     <Item ItemID="1">
         <Title>
         Data
         </Title>
     </Item>
     <Item ItemID="2">
          ...
     </Item>
     ...
 </Items> 
```

Milestone.xml:

```
 <Milestones>
  <Item ItemID="2">
       <MS id="3">
            <MS_DATA>
             Data
            </MS_DATA>
       </MS>
       <MS id="4">
            <MS_DATA>
             Data
            </MS_DATA>
       </MS>
   </Item>
   <Item ItemID="3">
       <MS id="5">
            <MS_DATA>
             Data
            </MS_DATA>
       </MS>
   </item>
 </Milestones> 
```

The way it's presented in SSIS when I use XML source, is not entirely intuitive, meaning the Item rows and the MS rows are two seperate outputs. I had to run these through a join in order to get the Milestones that corresponds to specific Items. No problem here, then run it through a full outer join with the items, so I get a flattened table with multiple rows containing obviously the same data for an Item and with different data for the MS. Basically I get what I tried to show in my table, lots of redundant Item data, for each unique MilestoneData.

In the end it has to look similar to:

```
 <NewItems>
 <myNewItem ItemID="2">
       <SomeDataDirectlyFromItem>
            e.g. Title
       </SomeDataDirectlyFromItem>
       <DataConstructedFromMultipleColumnsInItem>
            <MyMilestones>
                  <MS_DATA_TRANSFORMED MSID="3">
                       data
                  </MS_DATA_TRANSFORMED>
                  <MS_DATA_TRANSFORMED MSID="4">
                       data
                  </MS_DATA_TRANSFORMED>
            </MyMilestones>
       </DataConstructedFromMultipleColumnsInItem>
  <myNewItem ItemID="3">
       <SomeDataDirectlyFromItem>
            e.g. Title
       </SomeDataDirectlyFromItem>
       <DataConstructedFromMultipleColumnsInItem>
            <MyMilestones>
                  <MS_DATA_TRANSFORMED MSID="5">
                       data
                  </MS_DATA_TRANSFORMED>
            </MyMilestones>
       </DataConstructedFromMultipleColumnsInItem>
 </myNewItem>
 <myNewItem ItemID="4">
       <SomeDataDirectlyFromItem>
            e.g. Title
       </SomeDataDirectlyFromItem>
       <DataConstructedFromMultipleColumnsInItem>
            <MyMilestones></MyMilestones>
       </DataConstructedFromMultipleColumnsInItem>
 </myNewItem>
 </NewItems> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:12:30.047

将 XML 导入关系表（例如在 tempdb 中）然后使用 FOR XML PATH 重建 XML 怎么样？FOR XML PATH 对您希望 XML 的外观提供了高度的控制。下面是一个非常简单的例子：

```
CREATE TABLE #items ( itemId INT PRIMARY KEY, title VARCHAR(50) NULL )
CREATE TABLE #milestones ( itemId INT, msId INT, msData VARCHAR(50) NOT NULL, PRIMARY KEY ( itemId, msId ) )
GO

DECLARE @itemsXML XML

SELECT @itemsXML = x.y
FROM OPENROWSET( BULK 'c:\temp\items.xml', SINGLE_CLOB ) x(y)

INSERT INTO #items ( itemId, title )
SELECT 
    i.c.value('@ItemID', 'INT' ),
    i.c.value('(Title/text())[1]', 'VARCHAR(50)' )
FROM @itemsXML.nodes('Items/Item') i(c)
GO

DECLARE @milestoneXML XML

SELECT @milestoneXML = x.y
FROM OPENROWSET( BULK 'c:\temp\milestone.xml', SINGLE_CLOB ) x(y)

INSERT INTO #milestones ( itemId, msId, msData )
SELECT 
    i.c.value('@ItemID', 'INT' ),
    i.c.value('(MS/@id)[1]', 'VARCHAR(50)' ) msId,
    i.c.value('(MS/MS_DATA/text())[1]', 'VARCHAR(50)' ) msData
FROM @milestoneXML.nodes('Milestones/Item') i(c)
GO

SELECT 
    i.itemId AS "@ItemID"
FROM #items i
    INNER JOIN #milestones ms ON i.itemId = ms.itemId
FOR XML PATH('myNewItem'), ROOT('NewItems'), TYPE

DROP TABLE #items 
DROP TABLE #milestones 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:22:40.390

我会尝试使用`script component`带有组件类型的 a 来处理这个问题`transformation`。由于您是 ssis 的新手，我假设您以前没有使用过它。所以基本上你

*   定义输入列，您的组件将期望（即`input_xml`包含`ItemID[1] - MilestoneData[2];...`
*   使用 c# 创建一个切割和粘在一起的逻辑
*   定义您的组件将用于传递转换后的行的输出列

您将面临最后可能会使用两次的问题，例如 ie

`ItemID[1] - MilestoneData[2]`

将导致

```
<item id="1">
      <Milestone id="2"> 
```

我使用[Pentaho 水壶](http://kettle.pentaho.com/)做了一些非常相似的事情，即使没有使用`script component`你定义自己的逻辑的东西。但我猜 ssis 这里缺少任务。

# java - activate event with a keypress

> ID：12561121
> 
> 赞同：0
> 
> 时间：2012-09-24T08:11:00.097
> 
> 标签：java, swing, keypress, keylistener

I am trying to find a sulotion to translate the void keypressed from c# to java without any succes yet anyone a sulotion?

I want when i press the key 13(enter) that Private void doen() activates once.

```
import java.awt.event.*;
import javax.swing.JTextField;
import javax.swing.*;
import java.awt.*;
import java.awt.Toolkit;
import java.util.Timer;
import java.util.TimerTask;

public class Paneel extends JPanel {

    private static final long serialVersionUID = 1L;
    String text;
    String AccountName = "default";
    String autosavecheck = "";
    String iss;
    JProgressBar monsterbar, progressbar;
    JButton sendknop, clearknop, creditsknop, saveknop, loadknop, restartknop,
            disableautosaveknop;
    JTextArea commandstextbox, dialoogtextbox;
    JTextField naamtextbox, invoertextbox;
    JOptionPane resetdialog;
    Toolkit toolkit;
    Timer timer;

    public Paneel() {

        setLayout(null);
// --------------------------------
        dialoogtextbox = new JTextArea();
        dialoogtextbox.setFont(new Font("sansserif", Font.BOLD, 12));
        dialoogtextbox.setBounds(12, 12, 838, 207);
        dialoogtextbox.list();

        invoertextbox = new JTextField(12);
        invoertextbox.setBounds(12, 330, 982, 20);
        invoertextbox.setEnabled(false);
        commandstextbox = new JTextArea();
        commandstextbox.setBounds(856, 28, 138, 191);
        naamtextbox = new JTextField(12);
        naamtextbox.setBounds(772, 263, 220, 20);

        toolkit = Toolkit.getDefaultToolkit();
        timer1 = new Timer();
        toolkit = Toolkit.getDefaultToolkit();
        autosave = new Timer();
        toolkit = Toolkit.getDefaultToolkit();
        monstertimer = new Timer();
        toolkit = Toolkit.getDefaultToolkit();
        autodisabletimer = new Timer();

        sendknop = new JButton("Send");
        sendknop.setBounds(12, 260, 75, 23);
        sendknop.addActionListener(new sendknopHandler());

        add(sendknop);
    }

    private void keypressed() {
        if (e.KeyChar == (char) Keys.Return) {
            doen();
        }
    }

    private void doen() {
        text = invoertextbox.getText();
        invoertextbox.setText("");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:21:26.517

As you can, there are a number of approaches you could try. You didn't really specify on which component you were interested in monitoring, so we've thrown a few different suggestions at you...

In the following example of demonstrated [key bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) and the default button of the [`RootPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html).

Unfortunately, the `JTextArea` consumes the enter key before the root pane is notified, meaning that it won't fire. This is a general issue with text fields as they respond to the enter key action.

The other problem you will face is the fact that I've overridden the default behavior of the `JtextField`'s enter key, meaning it will no longer insert new lines.

```
public class TestPane extends JPanel {

    private JTextArea textArea;
    private JButton doneButton;

    public TestPane() {

        textArea = new JTextArea(10, 50);
        doneButton = new JButton("Done");

        setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 1;
        gbc.weighty = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(4, 4, 4, 4);

        add(new JScrollPane(textArea), gbc);

        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.insets = new Insets(4, 4, 4, 4);

        add(doneButton, gbc);

        InputMap inputMap = textArea.getInputMap(JComponent.WHEN_FOCUSED);
        ActionMap actionMap = textArea.getActionMap();

        inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "enter");
        actionMap.put("enter", new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {

                System.out.println("I'm done here");

            }
        });

        doneButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("All the way out...");
            }
        });

    }

    @Override
    public void addNotify() {

        super.addNotify();

        // This is the button that will be activate by "default", depending on
        // what that means for the individual platforms...
        SwingUtilities.getRootPane(this).setDefaultButton(doneButton);

    }

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.setVisible(true);

            }
        });

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:49:03.933

好吧，如果您想在`JButton`按下 a 后调用该方法，则必须将 an 添加`ActionListener`到`JButton`并从内部调用该方法，`actionPerformed(ActionEvent ae)`如下所示：

```
jBtn.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("called");
        //call method here
    }
    }); 
```

或者，如果您想在`JPanel`使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)上按下某个键后调用该方法，而不是`KeyListener`像这样：

```
JPanel panel=...;
...    

panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0), "send");
panel.getActionMap().put("send", new MyAction());

...

class MyAction extends AbstractAction {
@Override
public void actionPerformed(ActionEvent e) {
    System.out.println("called");
    //call method here
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:19:02.610

首先：正确设置格式，请参阅插入代码片段的说明。帮助我们这些阅读它的人:)

我不完全确定你在这里问什么，但我猜你正试图让你的程序响应用户点击你的任何按钮。这发生在您应该为按钮设置的各种 ActionListener 中。例如，在您的情况下， sendknopHandler 应该包含处理用户按下此特定按钮时发生的事情的逻辑。在这个类中，您必须过滤掉动作的来源（即按下的按钮）、动作是什么以及您想要如何响应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T08:19:47.930

了解所有关于听众和更具体的[关键听众](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T08:36:29.737

“key 13”是一个按钮还是当用户键入“13”时？

如果它是一个按钮，只需使用

```
button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
                           your statements;
                    }
} 
```

否则使用关键侦听器 Peter 响应。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-24T08:38:19.760

a）在代码行之后`public Paneel() {`丢失 ，同样的问题是，`}``add(sendknop);``public class Paneel extends JPanel {`

b）从此代码和这种形式中，您永远不会听到任何事件，因为代码不可运行，您的问题是关于 Java Basic，而不是关于 Swing GUI，也不是关于侦听器

c）要监听`ENTER`键，您必须将[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)添加到[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

d) 因为`Swing GUI`必须使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)而不是`util.Timer`，否则您会遇到[Swing 中的 Concurency问题](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

e) 对于 Swing GUI，不要使用 KeyListener，有[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)并输出到[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

f )否则`Swing JComponents`得到`Focus in the Window``KeyListener`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T08:45:58.160

`invoertextbox`通过将以下行添加到代码的初始化部分，为您添加一个关键侦听器：

```
invoertextbox.addKeyListener(this); 
```

然后通过添加扩展您的类来实现`KeyListener`接口：

```
import java.awt.event.KeyListener;

public class Paneel extends JPanel implements KeyListener { 
```

`Paneel`并在您的类中实现接口的以下方法：

```
@Override
public void keyTyped(KeyEvent e) {
}

@Override
public void keyPressed(KeyEvent e) {
  if (e.getKeyCode()==KeyEvent.VK_ENTER) {
    doen();
  }
}

@Override
public void keyReleased(KeyEvent e) {
}

private void doen() {
  text = invoertextbox.getText();
  invoertextbox.setText("");
} 
```

考虑使用`keyTyped(KeyEvent)`而不是`keyPressed(KeyEvent)`.

> “按键类型”事件是更高级别的，通常不依赖于平台或键盘布局。它们是在输入 Unicode 字符时生成的，并且是了解字符输入的首选方式。在最简单的情况下，按键类型的事件由单个按键产生（例如，'a'）[…]（[JavaDoc for KeyEvent](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html)）

# html - Error in alignment when converting div to table

> ID：12561123
> 
> 赞同：1
> 
> 时间：2012-09-24T08:11:02.970
> 
> 标签：html, yii, html-table

I'm experiencing error in alignment when try to convert div to table. How to solve?

```
<tr><td>
        <?php echo $form->labelEx($model,'gender'); ?></td>
        <td>
        <?php echo $form->labelEx($model,'M');?>
        <?php echo $form->radioButton($model,'gender',array('value'=>'M')); ?>
        <?php echo $form->labelEx($model,'F');?>
        <?php echo $form->radioButton($model,'gender',array('value'=>'F')); ?>
        <?php echo $form->error($model,'gender'); ?>
        </td></tr> 
```

![enter image description here](../Images/d55c3e722717a0858c7ec307b699d194.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:15:23.583

可能是因为标签和单选按钮被一个 div 包裹了，或者元素有 style 属性 display:block;

# matlab - building a matrix starting from another matrix

> ID：12561125
> 
> 赞同：2
> 
> 时间：2012-09-24T08:11:05.187
> 
> 标签：matlab, matrix

I want to build a square matrix. Let's suppose We have this matrix called nodes

```
1 4.3434  3.4565
2 6.2234  5.1234
3 10.4332 2.3243
4 7.36543 1.1434 
```

where the column 2 and 3 represents position x and y of nodes n

and a matrix called heads where its elements are some elements of nodes matrix

```
2 6.2234 5.1234
3 10.4332 2.3243 
```

I created this function to build the matrix of the distance of every nodes from the heads

```
function [distances] = net_dist(nodes,heads)
nnodes = length(nodes(:,1));
distances = zeros(nnodes);
for i = 1 : nnodes
    for j = 1 : nnodes
        if nodes(i,1) == nodes(j,1) && ismember(nodes(j,1),heads(:,1))
            distances(i,j) = sqrt((nodes(i,2) - nodes(j,2))^2 + (nodes(i,3) - nodes(j,3))^2);
        elseif (nodes(i,1) == nodes(j,1) || nodes(i,1) ~= nodes(j,1)) && ismember(nodes(j,1),heads(:,1))
            distances(i,j) = sqrt((nodes(i,2) - nodes(j,2))^2 + (nodes(i,3) - nodes(j,3))^2); 
        elseif (nodes(i,1) == nodes(j,1) || nodes(i,1) ~= nodes(j,1)) && ~ismember(nodes(j,1),heads(:,1))
            distances(i,j) = 1E9;
        end
    end
end
return; 
```

This function should return the distance of every nodes from a heads. The positions between nodes that aren't heads are filled with number 1E9\. I don't understand why when I execute this function instead to receive sqrt values I receive all 0.

Definitely I would obtain such similar thing

```
 1   2   3   4 
 1 1E9 d   d   1E9
 2 1E9 0   d   1E9
 3 1E9 d   0   1E9
 4 1E9 d   0   1E9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:35:02.000

你没有得到零，你得到正确的距离。你可能认为你得到了零，因为 1e9 是一个很大的值，当你尝试打印你的矩阵时，你会得到

```
distances =

1.0e+09 *

1.0000    0.0000    0.0000    1.0000
1.0000         0    0.0000    1.0000
1.0000    0.0000         0    1.0000
1.0000    0.0000    0.0000    1.0000 
```

您可以看到两个 0 条目是真零，而其他条目在昏迷后大约是 0 到 4 位。尝试打印其中一个矩阵元素，看看它们不是零

```
distances(1,2)

ans =

2.5126 
```

您还可以使用`nnz`函数快速知道您有多少个非零

```
nnz(distances)

ans =

14 
```

# javascript - 如何访问 Json 数组中的特定元素？

> ID：12561132
> 
> 赞同：0
> 
> 时间：2012-09-24T08:11:25.450
> 
> 标签：javascript, arrays, json

我有一个 Json 数组，其中包含以下元素：“adjacencies”、“data”、“id”、“name”。在某些元素中，“邻接”是不存在的。这是一个例子：

```
var JsonArray = [
                 {
                   "id" : "id1",
                   "name" : "name1",
                   "data" : {
                             "$type" : "circle",
                             "$color" : "#AEC43B"
                            }
                 }, //Without "adjacencies"

                 {
                   "id" : "id2",
                   "name" : "name2",
                   "data" : {
                             "$type" : "circle",
                             "$color" : "#AEC43B"
                            }
                 }, //Without "adjacencies"

                 {
                    "adjacencies": [
                                    {
                                     "nodeTo": "id1",
                                     "nodeFrom": "id3",
                                     "data": {
                                              "$color": "#416D9C"
                                             }
                                    }
                                    ],
                    "id" : "id3",
                    "name" : "name3",
                    "data" : {
                             "$type" : "circle",
                             "$color" : "#AEC43B"
                            }
                 } //With "adjacencies"
                ]; 
```

第一个和第二个元素不包含“邻接”，但第三个元素包含。在循环中`for (i = 0; i < JsonArray.length; i++)`如何访问第三个元素？`.contain`例如，有没有财产？提前致谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:13:53.607

一种方法是检查值是否为 type `undefined`：

```
for (i = 0; i < JsonArray.length; i++) {
    var item = JsonArray[i];
    if (typeof item.adjacencies !== "undefined") {
        // item has adjacencies property
    }
} 
```

顺便说一句：这不是 JSON 数组——它是 Javascript 数组。没有 JSON 对象，没有 JSON 数组，没有 JSON。唯一存在的 JSON-y 是纯 JSON，它是一种序列化格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:22:04.417

使用 hasOwnProperty

所以你可以这样做

```
for (i = 0; i < JsonArray.length; i++){
    if( JsonArray[i].hasOwnProperty('adjacencies') ){
        //Do something here
    }
} 
```

# android - Android BroadCastReceiver 用于音量键上下

> ID：12561142
> 
> 赞同：11
> 
> 时间：2012-09-24T08:11:49.880
> 
> 标签：android, android-intent, volume

如果用户向上或向下按音量键，是否可以在我的广播接收器中检测到它？我需要完整的代码。

这是我的意图过滤器

```
IntentFilter filter = new IntentFilter();
filter.addAction("android.media.VOLUME_CHANGED_ACTION"); 
```

我的`onReceive`方法是

```
public void onReceive(Context arg0, Intent intent) {
      KeyEvent ke = (KeyEvent)intent.getExtras().get(Intent.EXTRA_KEY_EVENT);
        if (ke .getKeyCode() == KeyEvent.KEYCODE_VOLUME_UP) {
                System.out.println("I got volume up event");
         }else if (ke .getKeyCode() == KeyEvent.KEYCODE_VOLUME_DOWN) {
                System.out.println("I got volume key down event");
         }
    } 
```

它给了我一个空的 KeyEvent ......任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T08:56:00.937

意图没有额外的 EXTRA_KEY_EVENT。它确实有一个额外的 android.media.EXTRA_VOLUME_STREAM_VALUE 包含新卷。

```
int volume = (Integer)intent.getExtras().get("android.media.EXTRA_VOLUME_STREAM_VALUE"); 
```

如果您存储旧值，您可以推断是否按下了音量增大或减小。

# asp.net-mvc - MVC 3.0 中的运行时条件验证（必填字段）

> ID：12561143
> 
> 赞同：0
> 
> 时间：2012-09-24T08:11:52.537
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation

我的模型类中的地址行字段很少，它会根据所选国家/地区/语言更改其行为（必需/非必需）。

例如，英国应该有 3 个地址行作为必填输入字段，而在美国的情况下，它应该只有 2 个必填字段。

**我尝试使用自定义验证器“RequiredIf”并根据另一个可为空**的布尔属性打开或关闭它；但它不起作用。

我的模型的相关属性被提及为流：

```
public bool? IsAddressLine3Mandatory { get; set; }

[RequiredIf("IsAddressline3Mandatory", true, ErrorMessage = "Address line 3 is mandatory for UK")]
    public string AddressLine3 { get; set; } 
```

我正在从我们的数据库中获取国家信息，并在该视图的 HTTPGet Action 方法中设置 IsAddressline3Mandatory 字段。

我正在尝试实现客户端和服务器端验证。

RequiredIf 的代码如下：

```
 public class RequiredIfAttribute : ValidationAttribute, IClientValidatable
{
    private RequiredAttribute _innerAttribute = new RequiredAttribute();

    public string DependentProperty { get; set; }
    public object TargetValue { get; set; }

    public RequiredIfAttribute(string dependentProperty, object targetValue)
    {
        this.DependentProperty = dependentProperty;
        this.TargetValue = targetValue;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        // get a reference to the property this validation depends upon
        var containerType = validationContext.ObjectInstance.GetType();
        var field = containerType.GetProperty(this.DependentProperty);

        if (field != null)
        {
            // get the value of the dependent property
            var dependentvalue = field.GetValue(validationContext.ObjectInstance, null);

            // compare the value against the target value
            if ((dependentvalue == null && this.TargetValue == null) ||
                (dependentvalue != null && dependentvalue.Equals(this.TargetValue)))
            {
                // match => means we should try validating this field
                if (!_innerAttribute.IsValid(value))
                    // validation failed - return an error
                    return new ValidationResult(this.ErrorMessage, new[] { validationContext.MemberName });
            }
        }

        return ValidationResult.Success;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule()
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = "requiredif",
        };

        string depProp = BuildDependentPropertyId(metadata, context as ViewContext);

        // find the value on the control we depend on;
        // if it's a bool, format it javascript style 
        // (the default is True or False!)
        string targetValue = (this.TargetValue ?? "").ToString();
        if (this.TargetValue.GetType() == typeof(bool))
            targetValue = targetValue.ToLower();

        rule.ValidationParameters.Add("dependentproperty", depProp);
        rule.ValidationParameters.Add("targetvalue", targetValue);

        yield return rule;
    }

    private string BuildDependentPropertyId(ModelMetadata metadata, ViewContext viewContext)
    {
        // build the ID of the property
        string depProp = viewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(this.DependentProperty);
        // unfortunately this will have the name of the current field appended to the beginning,
        // because the TemplateInfo's context has had this fieldname appended to it. Instead, we
        // want to get the context as though it was one level higher (i.e. outside the current property,
        // which is the containing object (our Person), and hence the same level as the dependent property.
        var thisField = metadata.PropertyName + "_";
        if (depProp.StartsWith(thisField))
            // strip it off again
            depProp = depProp.Substring(thisField.Length);
        return depProp;
    }
} 
```

# python - 为什么线程ID变得如此之大

> ID：12561153
> 
> 赞同：2
> 
> 时间：2012-09-24T08:12:48.177
> 
> 标签：python, linux, multithreading

```
In [19]: threading.currentThread().ident
Out[19]: 139639576676096 
```

139639576676096 是我在 mysql CENTOS 框中的线程 ID。可以吗？为什么线程 id 变得这么大？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T08:14:34.060

线程标识符不是自动递增的数字。相反，它是该线程的*唯一*`-sys.maxint + 1`编号，它将是和之间的非零整数`sys.maxint`，

该标识符是一个“魔术 cookie”值。您不需要关心它的实际值，只需要它唯一地标识当前线程即可。

# go - 函数调用中的“用作值”

> ID：12561162
> 
> 赞同：138
> 
> 时间：2012-09-24T08:13:19.473
> 
> 标签：go

在条件语句中评估函数的值时调用函数的正确方法是什么？

```
package main
import "fmt"
func main(){
        if sumThis(1,2) > sumThis(3,4){
                fmt.Println("test")
        } else {
                fmt.Println("derp")
        }
}
func sumThis(a, b int){
        return a+b
} 
```

这将返回错误：

```
./test4.go:4: sumThis(1, 2) used as value
./test4.go:4: sumThis(3, 4) used as value
./test4.go:11: too many arguments to return 
```

你会怎么用 Go 写这个？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-09-24T08:24:57.380

您忘记声明返回值。它应该是：

```
func sumThis(a, b int) int {
// ... 
```

# c++ - File I/0 Function 它采用什么类型的参数？

> ID：12561164
> 
> 赞同：-1
> 
> 时间：2012-09-24T08:13:34.730
> 
> 标签：c++, file-io

嘿，我正在用 C++ 编写游戏，但我不明白保存函数需要什么类型的参数。我假设你会使用文件名作为参数，但我只是得到一个错误。

> 4 IntelliSense：“std::ofstream &”类型的引用（非 const 限定）不能 > 使用“const char [9]”类型的值初始化 c:\Users\Conor\Documents\College\C++ Programming\ Marooned\Marooned\MainApp.cpp 13 13 Marooned

```
void MenuText::print()
{
cout<< "Story= " << mText<< endl;
cout<< endl;
}
void MenuText::save(ofstream& outFile)
{
outFile<< "Story = " << mText<< endl;
outFile<< endl;
}
void MenuText::load(ifstream& inFile)
{
string garbage;
inFile>> garbage >> mText;
} 
```

谁能帮我理解它需要什么类型的论据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:25:38.220

似乎您正在`save`使用文字字符串（我根据错误消息猜测的文件名）调用该函数。您应该使用现有的`ofstream`来调用它。

就像是

```
MenuText menuText;

std::ofstream output("some file name");

menuText.save(output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:14:51.893

std::ofstream& 是对输出流的引用。所以你需要传入一个ofstream（输出文件流）：[http ://www.cplusplus.com/reference/iostream/ofstream/](http://www.cplusplus.com/reference/iostream/ofstream/)

# c# - 如何从所选目录 ASP.NET 加载几个文件

> ID：12561171
> 
> 赞同：0
> 
> 时间：2012-09-24T08:14:10.727
> 
> 标签：c#, javascript, asp.net, asp.net-mvc

有以下问题：是否可以仅使用 ASP.NET 应用程序在客户端选择文件夹并将所有文件从该客户端加载到服务器，而无需在客户端添加任何其他应用程序？

我真的不知道这怎么可能或有可能做到。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:15:44.467

不，使用纯 HTML 和 javascript 是不可能的。您可以获得的最接近的是 HTML5 的`<input type="file">`控件，它允许您执行多个文件选择。因此，您可以让用户进入文件夹，然后选择所有文件。这可以通过附加`multiple`属性来完成：

```
<input type="file" name="file" multiple="multiple" /> 
```

当然，您的客户端使用的浏览器必须支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:18:42.440

这在互联网上是不可能的，但您可以使用将数据发送到 ASP.NET WebService 的 HTML 应用程序（客户端上的 HTA 文件）来执行此操作。但这种解决方案并非在所有情况下都可接受，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:21:14.067

这对于普通的 asp.net 是不可能的。

看看 [jQuery 多文件上传插件](http://www.fyneworks.com/jquery/multiple-file-upload/)

> jQuery 多文件上传插件 ($.MultiFile) 是一个非侵入式的 jQuery 插件，可帮助用户轻松选择多个文件以在您的托管服务器上快速轻松地上传，同时还提供一些基本的验证功能来帮助开发人员识别简单的错误，而无需提交表格

# android - SQLite 选择查询中的撇号

> ID：12561173
> 
> 赞同：1
> 
> 时间：2012-09-24T08:14:17.317
> 
> 标签：android, sqlite

我对 SQLite 和一些定制的 SQL 有疑问：

```
public Cursor getExistingSpeciesDetails(String sub_id, String english_name) {
    Cursor c = mDb.rawQuery(
            "SELECT mobileobs.how_many, mobileobs.comment, mobileobs.sensitive, "
                    + "mobileobs.breeding_evidence from mobileobs "
                    + "WHERE mobileobs.sub_id = '" + sub_id
                    + "' and mobileobs.english_name = '" + english_name
                    + "'", null);
    return c;
} 
```

我的问题是英文名称中的撇号（Cetti's Warbler）导致 SQL 错误（强制关闭我的 Android 应用程序）。有什么办法可以避免这类子句中的撇号？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T08:22:18.323

为此，您需要使用 SQLIte 的参数注入。例如：

```
Cursor c = mDb.rawQuery(
            "SELECT mobileobs.how_many, mobileobs.comment, mobileobs.sensitive, "
             + "mobileobs.breeding_evidence from mobileobs "
             + "WHERE mobileobs.sub_id = ? AND mobileobs.english_name = ?"
             , new String[]{sub_id, english_name}); 
```

或更改您的输入参数，如下所示：

```
Cetti''s Warbler 
```

# java - 如何展望 XMLStreamReader？

> ID：12561181
> 
> 赞同：0
> 
> 时间：2012-09-24T08:15:05.090
> 
> 标签：java, xml-parsing

[我在XMLStreamReader](http://docs.oracle.com/javaee/5/api/javax/xml/stream/XMLStreamReader.html)文档中找不到任何`peek`功能`unread`。例如，为了解析 HTML 列表中的子元素列表，获取至少一个标记的首选方法是什么？

```
<ul>
  <li>
  <li>
</ul> 
```

当我创建一个具有解析函数的递归体面解析器时，解析`ul`函数必须在找到结束标记时终止，但它不能使用它，因为解析函数需要它才能成功。`li``li``ul``ul`

我习惯用`peek`or来解决此类问题，`unread`但它们似乎丢失了。解决此问题的首选 Java 方法是什么？

**更新**：我使用 XMLStreamReader 实现了解析器，而没有前瞻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:27:34.347

有一种实现递归解析器的常用方法，通过预先读取下一个标记、存储它并针对它进行测试来避免对`unread`or的需要：`peek`

*   当你读入一个令牌时，你将它存储在一个（全局）变量中。
*   然后您只需使用您正在寻找的所有令牌（例如`<li>`和`</ul>`）对其进行测试
*   当您找到正确的方法时，您调用处理该问题的方法（或继续）
*   （读取下一个令牌，“消耗”了匹配的令牌）

实际上，您*已经*窥视了前方。

Dragon 编译器书的第 1 版有一个很好的例子，在他们早期的概述章节中，用 C 语言（他们在第 2 版中使用了 Java，但没有必要夸大其词，恕我直言——C 风格在 Java 中运行良好）。

我将尝试从我自己的源代码中提取一个示例，但我的代码被分成一个库层，其中包含处理更易于使用的方法。我将尝试将它们结合起来做一个清晰的例子，但它可能不会独立运行。将其视为伪代码，以说明这个想法，您需要填补空白。

```
XMLStreamReader in; 
int token;
String localname;

public void parse() {
  next();
  if (token==START_ELEMENT && localname.equals("ul")) ul();
}

void ul() {
  next();          // assume we are called when a <ul> is seen, so we consume it
  while (true) {   // loops for list
    if (token==START_ELEMENT && localname.equals("li")) li();  // ifs for choice 
    else if (token==START_ELEMENT && localname.equals("sometag")) sometag();
    else break;
  }
  if (token==END_ELEMENT && localname.equals("ul")) next();
  else throw new RuntimeException("expected </ul>");
       // <li> or <sometag> would also be acceptable
}

void li() {
  next();
  ...
}

void next() {
  token = in.next();         // consume the token means to set up the next one
  localname = in.getLocalName();
} 
```

如果你创建一个层库来处理重复的东西，我发现它更容易使用，例如我有：

*   `boolean startTag(String name)`如果匹配则返回 true
*   `void requireStartTag(String name)`如果匹配则消耗，否则抛出异常

但我认为这个例子更清楚，保持字面意思。

还有其他问题，例如跳过非元素标记（如评论、PI 等）；跟踪您所在的线路以获取更多有用的例外情况等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:26:58.883

似乎没有直接的方法可以做到这一点。您是否可以使用 XMLEventReader 来完成相同的功能？

# asp.net-mvc-3 - MVC 3 Web 应用程序存储 user_id

> ID：12561184
> 
> 赞同：0
> 
> 时间：2012-09-24T08:15:11.767
> 
> 标签：asp.net-mvc-3

这是一个在网络上有各种意见的话题。

基本上我正在使用 ASP.net MVC 3 开发一个 SAAS 应用程序。

我想知道存储 user_id 以查看正确的用户是否经过身份验证的好方法是什么？

我知道经典的会话 asp.net 方法，但真的想避免这种情况。

任何建议都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:20:31.080

一件事是您可以简单地在控制器方法中授权用户。在那里，您可以验证单个用户或组。

如果您使用的是 ASP.NET Membership 提供程序，

Guid userGuid = (Guid)Membership.GetUser().ProviderUserKey;

这将起作用。如果您需要任何其他指导，请发表评论。

# iphone - 如何在 Objective-C 中制作正则表达式

> ID：12561185
> 
> 赞同：5
> 
> 时间：2012-09-24T08:15:15.807
> 
> 标签：iphone, objective-c, ios, regex

我总是对 Regex 格式如何工作以及如何根据我的要求制作 Regex 感到困惑。我只是复制一些常见的正则表达式格式并粘贴到我的项目中，但显然我们无法根据我们的要求找到每种正则表达式格式。所以我想了解正则表达式。

我只是在一次又一次地运行代码后根据我的猜测做出的，但我仍然对这个正则表达式不太了解

```
NSString *regexNumber = @"[123456789][0-9]{0}([0-9]{1})?"; 
```

这个比较`Age`，根据这个年龄应该从1-9开始，最少1位，最多2位，只有数字。

现在我想为**Name -** (exp - vakul, Vakul, vakul saini, Vakul Saini, vakul Saini, Vakul saini 等)、**电子邮件**、**电话号码**、**仅字符串**、**生日**、**URL**制作正则表达式。但不想复制和粘贴我想了解它们如何工作以及如何制作我自己的正则表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T09:02:37.220

正则表达式是由字母数字字符和称为元字符的特殊字符组合而成的文本模式

元字符是：

```
\ | ( ) [ { ^ $ * + ? . < > 
```

`.` ---- 相反，它是一个匹配任何字符的特殊元字符。

`*` ---- * 字符匹配连续出现的零个或多个字符。

`+` ---- + 字符类似于`*`但匹配一个或多个。

`?` ---- 零个或一个字符实例

`{m,n}`---- 表示匹配 m 或最多 n 个字符。例如`{1,5}`匹配 1 个或最多 5 个字符

`^`---- 它将匹配以它后面的单词开头的任何行

`$`--- 它会匹配任何以它后面的单词结尾的行

`<>`--- 匹配它们之间的单词。例如。返回所有包含 abc 的单词

您可以通过使用开始和结束括号字符来形成组或子表达式，因为它们经常被称为： `()`( 开始子表达式， ) 结束它

`|`--- 或参数

`[ and ]`--- 字符序列。放在序列括号内的任何字符都被视为文字字符，甚至是元字符。唯一的特殊字符是 - 表示字符范围，以及 ^ 用于否定序列。例如。`[a-z]`

这是正则表达式所需的最基本知识，几乎所有语言都相同。

有关更多详细信息，您可以参考[此链接](http://www.proftpd.org/docs/howto/Regex.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:23:14.680

你应该使用[Regexkit 框架](http://regexkit.sourceforge.net)，我发现它是 iOS 中正则表达式的最佳解决方案

# mysql - 在mysql中更新记录并保留以前的记录数据

> ID：12561186
> 
> 赞同：0
> 
> 时间：2012-09-24T08:15:18.007
> 
> 标签：mysql, logging, sql-update

我想知道是否有一种方法可以更新 mysql 中的记录，并且仍然能够保留记录的先前（更新之前）数据并保留更新历史计数器。

我应该能够将最后更新的记录用作真实记录。

帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:16:28.970

我认为您不需要更新记录，而是更新`Insert`另一条记录，这样您以前的记录就不会受到影响。

**更新 1**

您需要为此创建两个表。第一个是`data`记录，另一个是保存更改的表。例子，

```
CREATE TABLE dataList
(
    ID INT NOT NULL,
    Name VARCHAR(30),
    -- other fields... ,
    CONSTRAINT dl_pk PRIMARY KEY ID)
);

CREATE TABLE versionList
(
    ID INT AUTO_INCREMENT,
    DataID INT,
    VersionID INT,
    DateChanged datetime,
    CONSTRAINT vl_pk PRIMARY KEY (ID),
    CONSTRAINT vl_fk FOREIGN KEY (DataID) 
        REFERENCES dataList(ID)
);

INSERT INTO dataList(ID, Name) VALUES (1,'hello');
INSERT INTO dataList(ID, Name) VALUES (2,'world');

INSERT INTO versionList(DataID, VersionID, DateChanged) VALUES (1,1,'2011-01-01');
INSERT INTO versionList(DataID, VersionID, DateChanged) VALUES (1,2,'2011-02-01');
INSERT INTO versionList(DataID, VersionID, DateChanged) VALUES (1,3,'2011-03-01');
INSERT INTO versionList(DataID, VersionID, DateChanged) VALUES (2,1,'2012-01-01');
INSERT INTO versionList(DataID, VersionID, DateChanged) VALUES (2,2,'2012-02-01'); 
```

# javascript - javascript以相反的方式工作

> ID：12561189
> 
> 赞同：2
> 
> 时间：2012-09-24T08:15:26.340
> 
> 标签：javascript

我一直在尝试将“选择”列表与 javascript 一起使用。我做了一个隐藏或显示部分 html 代码的 Javascript 函数，但它以相反的方式工作，我无法弄清楚我哪里出错了，因为代码似乎是直截了当的。

我的 JS 函数是

```
<script type="text/javascript" language="javascript">       

    function toggle(id) {

        if(document.getElementById(id).value=='IELTS' || document.getElementById(id).value=='TOEFL')
        {
            if(document.getElementById('dv1').style.display=='block')
            {
                document.getElementById('dv1').style.display='none';
                document.getElementById('dv1').style.visibility='hidden';
            }
        }
        else 
        {
            document.getElementById('dv1').style.display='block';
            document.getElementById('dv1').style.visibility='visible';
            //alert('Its displaying now');
        }

        if(document.getElementById(id).value=='Other')
        {
            if(document.getElementById('dv2').style.display=='block')
            {
                document.getElementById('dv2').style.display='none';
                document.getElementById('dv2').style.visibility='hidden';
            }

        }
        else 
        {
            document.getElementById('dv2').style.display='block';
            document.getElementById('dv2').style.visibility='visible';
        }

        if(document.getElementById(id).value=='none')
        {
                document.getElementById('dv1').style.display='none';
                document.getElementById('dv1').style.visibility='hidden';
                document.getElementById('dv2').style.display='none';
                document.getElementById('dv2').style.visibility='hidden';
        }

    }
</script> 
```

问题是第一个“if”语句显示/隐藏“dv2”而不是“dv1”，第二个“if”语句显示/隐藏“dv1”而不是“dv2”，尽管所有内容都是这样指定的第一个“if”语句处理“dv1”，第二个“if”语句处理“dv2”

我在理解 JS 的工作原理方面是否遗漏了一些东西..

这里预定义了一个样式来隐藏 html 代码

```
<style type="text/css">
.toggleClass{
    display:none; 
    visibility:hidden;
    } 
</style>
</head>

<body>

<form name="myform" > 
```

这是我在更改时调用 JS 函数的选择

```
 <select id="exam" name="exam" onchange="toggle('exam')">
    <option selected="selected" value="none" >Please Choose</option>
    <option value="IELTS">IELTS</option>
    <option value="TOEFL">TOEFL</option>
    <option value="Other">Other</option>
    </select>   
  <br><br> 
```

这是dv1

```
<div id="dv1" class="toggleClass">
    <table width="50%"  border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td height="600" bgcolor="#CCCCCC">IELTS and TOEFL</td>
      </tr>
    </table>
</div> 
```

这是dv2

```
<div id="dv2" class="toggleClass">
    <table width="50%"  border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td height="600" bgcolor="#CCCCCC">Other</td>
      </tr>
    </table>
</div>
</form>
</body>
</html> 
```

请注意，如果我交换“dv1”和“dv2”，它工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:46:56.787

考虑这段代码：-

```
if(document.getElementById(id).value=='Other')
        {
            if(document.getElementById('dv2').style.display=='block')
            {
                document.getElementById('dv2').style.display='none';
                document.getElementById('dv2').style.visibility='hidden';
            }

        }
        else 
        {
            document.getElementById('dv2').style.display='block';
            document.getElementById('dv2').style.visibility='visible';
        } 
```

从这里很明显，如果您选择“其他”，那么在这种情况下，div 2 将永远不会出现。因为条件为真，因为下面提到的 else 条件：-

```
else 
        {
            document.getElementById('dv1').style.display='block';
            document.getElementById('dv1').style.visibility='visible';
            //alert('Its displaying now');
        } 
```

将显示您已验证的 div1。您正在寻找的脚本必须如下所述：-

```
<script type="text/javascript" language="javascript">       

    function toggle(id) {

        if(document.getElementById(id).value=='IELTS' || document.getElementById(id).value=='TOEFL')
        {
            if(document.getElementById('dv1').style.display=='block')
            {
               document.getElementById('dv1').style.display='block';
                document.getElementById('dv1').style.visibility='visible';

            }
        }
        else 
        { 
```

document.getElementById('dv1').style.display='none';

```
 document.getElementById('dv1').style.visibility='hidden';
            //alert('Its displaying now');
        }

        if(document.getElementById(id).value=='Other')
        {
            if(document.getElementById('dv2').style.display=='block')
            {
                document.getElementById('dv2').style.display='block';
               document.getElementById('dv2').style.visibility='visible';
            }

        }
        else 
        {
            document.getElementById('dv2').style.display='none';
            document.getElementById('dv2').style.visibility='hidden';

        }

        if(document.getElementById(id).value=='none')
        {
                document.getElementById('Table1').style.display='none';
                document.getElementById('Table1').style.visibility='hidden';
                document.getElementById('Table2').style.display='none';
                document.getElementById('Table2').style.visibility='hidden';
        }

    }
</script> 
```

试试这个，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:00:42.387

FIRST：仅当该属性有内联样式时才设置样式属性。

所以在你的 div 你应该插入一个样式属性

```
<div id="dv1" class="toggleClass" style="visibility:hidden; display:none"> 
```

div2 也一样

在那之后......逻辑似乎不正确：

```
if(document.getElementById(id).value=='IELTS' || document.getElementById(id).value=='TOEFL') 
```

此行应该在第一个 div ( `div1`) 处可见，但在此之后：

```
document.getElementById('dv1').style.display='none';
document.getElementById('dv1').style.visibility='hidden'; 
```

你把它藏起来！

# android - 如何在运行时在 android 中更改 3D 饼图段值？

> ID：12561192
> 
> 赞同：1
> 
> 时间：2012-09-24T08:15:37.993
> 
> 标签：android, android-spinner, pie-chart, android-sqlite

我想根据 db 值创建饼图，在调整滑块时我必须更改饼图，我创建了饼图并获得了滑块可调值。我的代码是，

```
 PieChartDefalut.java

   package com.exae.url;

   import android.app.Activity;
   import android.database.Cursor;
   import android.database.sqlite.SQLiteDatabase;
   import android.database.sqlite.SQLiteException;
   import android.os.Bundle;
   import android.util.Log;
   import android.view.View;
   import android.webkit.WebView;
   import android.widget.AdapterView;
   import android.widget.AdapterView.OnItemSelectedListener;
   import android.widget.ArrayAdapter;
   import android.widget.Button;
   import android.widget.CheckBox;
   import android.widget.ImageView;
   import android.widget.LinearLayout;
   import android.widget.SeekBar;
   import android.widget.Spinner;
   import android.widget.TextView;
   import android.widget.Toast;

   public class PieChartDefalut extends Activity implements SeekBar.OnSeekBarChangeListener, OnItemSelectedListener
  {
private final String SAMPLE_DB_NAME = "chartdb";
private final String SAMPLE_TABLE_NAME = "piechart3d";
  SQLiteDatabase sampleDB = null;
  String year;
    double value;
    LinearLayout ll,ll1;
    Spinner my_spinner;

    ImageView pieChart;
    View my_vew;
    int count=0;
    String value_arr[]={};
    static String[] my_year={};
    static int[] my_values={};
    static int my_values_length=0;
    static int my_year_length=0;
    String mUrl;
    String label="";
private WebView googleChartView;
static String urlGoogleChart = "http://chart.apis.google.com/chart?cht=p3&chs=300x150&";

 static String[] urlyear;
 static int[] urlvalues;
 SeekBar mSeekBar;
   TextView mProgressText;
  Button bt;
   int progress1=0;
   int progress2=0;
   Cursor c,c1;
   int b;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.url);
  mSeekBar = (SeekBar)findViewById(R.id.seek);
  mSeekBar.setOnSeekBarChangeListener(this);
  mProgressText = (TextView)findViewById(R.id.progress);
 bt = (Button)findViewById(R.id.ok);
  ll=(LinearLayout)findViewById(R.id.my);
  ll1=(LinearLayout)findViewById(R.id.my_linear);
  my_spinner=(Spinner)findViewById(R.id.planets_spinner);

try {
    sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

    sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
            SAMPLE_TABLE_NAME +
            " (Year VARCHAR(5),Value DOUBLE(5));"); 
    sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAME + " Values ('2001',5);");
    sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAME + " Values ('2002',25);");
    sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAME + " Values ('2003',15);");
    sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAME + " Values ('2004',25);");
    sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAME + " Values ('2005',25);");
     c = sampleDB.rawQuery("SELECT Year,Value FROM " + SAMPLE_TABLE_NAME , null);

     final int Column1 = c.getColumnIndex("Year");
    final int Column2 = c.getColumnIndex("Value");
    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                 year = c.getString(Column1);
                 value = c.getDouble(Column2);

                 System.out.println(year);
                 System.out.println(value);

            }while (c.moveToNext());

        } 
    }

    int columncount=c.getCount();

    System.out.println("count------>"+columncount);

         my_year = new String[columncount];

        if (c.moveToFirst())
        {                       
            for (int i = 0; i < columncount; i++)
            {
                my_year[i] = c.getString(Column1);
                System.out.println("database value-----"+i);
                System.out.println(my_year[i]);
                c.moveToNext();
            }           
        }

         my_values = new int[columncount];

        if (c.moveToFirst())
        {                       
            for (int j = 0; j < columncount; j++)
            {
                my_values[j] = c.getInt(Column2);
                System.out.println("database value-----"+j);
                System.out.println(my_values[j]);
                c.moveToNext();
            }           
        }

        my_year_length=my_year.length;
        System.out.println("string length----->"+my_year_length);

        for(int k=0;k<my_year_length;k++)
        {
            System.out.println("array stored values----------->"+my_year[k]);
        }

       my_values_length=my_values.length;
        System.out.println("string length----->"+my_values_length);

        for(int k1=0;k1<my_values_length;k1++)
        {
            System.out.println("array stored values----------->"+my_values[k1]);
        }

googleChartView = (WebView)findViewById(R.id.webView1);

StringBuffer urlyear = new StringBuffer();

for(int i=0;i<my_year_length;i++)
{
if(i == (my_year_length - 1 ))
urlyear.append(my_year[i]);
else
urlyear.append(my_year[i]+"|");
}

StringBuffer urlvalues = new StringBuffer();

for(int j=0;j<my_values_length;j++) 
{
if(j == (my_values_length - 1 ))
urlvalues.append(my_values[j]);
else
urlvalues.append(my_values[j]+",");
}

mUrl = urlGoogleChart+"chl="+urlyear+"&chd=t:"+urlvalues;
googleChartView.loadUrl(mUrl);  

 ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,my_year);

 dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_item);

 my_spinner.setAdapter(dataAdapter);

 my_spinner.setOnItemSelectedListener(this);
 System.out.println("seek bar value----->"+progress1);

 bt.setOnClickListener(new View.OnClickListener() 
 {
     public void onClick(View v) 
    {
         if (c != null ) 
         {
                if  (c.moveToFirst()) 
                {
                    do 
                    {                       
                         year = c.getString(Column1);

                         System.out.println(year);
                         if(label.equalsIgnoreCase(year))
                         {
                             Log.i("","values compared....");
                             System.out.println("Lable.."+label);
                             System.out.println("year.."+year);
                             b=1;

                            }

                    }while (c.moveToNext());

                } 
            }
    }

});

} 
catch (SQLiteException se )
{
    Log.e(getClass().getSimpleName(), "Could not create or Open the database");
} finally
{
    if (sampleDB != null) 
        sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAME);
        sampleDB.close();
}
}

public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch)
{
    progress1=progress;
       mProgressText.setText(progress + " " +getString(R.string.seekbar_from_touch) + "=" + fromTouch);
   }

   public void onStartTrackingTouch(SeekBar seekBar)
   {

   }

   public void onStopTrackingTouch(SeekBar seekBar)
   {

       progress2=progress1;
       System.out.println("seek bar value---->"+progress2);
      // upDate();
       sampleDB.execSQL("UPDATE "+SAMPLE_TABLE_NAME+ "SET Value= "+ progress2+ "WHERE Year="+label,null);

   }

public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {

     label = arg0.getItemAtPosition(arg2).toString();
    System.out.println("selected values--->"+label);

 //  Toast.makeText(arg0.getContext(), "You selected: " + label,Toast.LENGTH_LONG).show();
}

public void onNothingSelected(AdapterView<?> arg0) 
{

}
public void upDate()
{
    if(b==1&&progress2>0)
     {
      b=0;

      sampleDB.execSQL("UPDATE "+SAMPLE_TABLE_NAME+ "SET Value= "+ progress2+ "WHERE Year="+label,null);
        Log.i("","database updated");
     }
}

} 
```

现在我的问题是我想从微调器和可调节滑块值中选择年份来更新数据库。否则，我必须根据特定选定年份的可调整值更改饼图。它显示了一些错误。

```
 09-24 13:06:14.245: ERROR/AndroidRuntime(1907): FATAL EXCEPTION: main
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907): java.lang.IllegalArgumentException: Empty bindArgs
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1793)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at com.exae.url.PieChartDefalut.onStopTrackingTouch(PieChartDefalut.java:283)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.widget.SeekBar.onStopTrackingTouch(SeekBar.java:115)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.widget.AbsSeekBar.onTouchEvent(AbsSeekBar.java:302)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.View.dispatchTouchEvent(View.java:3885)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.os.Handler.dispatchMessage(Handler.java:99)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.os.Looper.loop(Looper.java:123)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at android.app.ActivityThread.main(ActivityThread.java:3683)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at java.lang.reflect.Method.invokeNative(Native Method)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at java.lang.reflect.Method.invoke(Method.java:507)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
     09-24 13:06:14.245: ERROR/AndroidRuntime(1907):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

我该如何解决这个问题？有谁能够帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:23:07.297

错误是抱怨第二个参数[`execSQL(String sql, Object[] bindArgs)`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String,%20java.lang.Object%5B%5D%29)为空。

```
public void onStopTrackingTouch(SeekBar seekBar) {
    progress2=progress1;
    System.out.println("seek bar value---->"+progress2);
    sampleDB.execSQL("UPDATE "+SAMPLE_TABLE_NAME+ "SET Value= "+ progress2+ "WHERE Year="+label, null);
} 
```

你可以[`execSQL(String sql)`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)改用。

```
public void onStopTrackingTouch(SeekBar seekBar) {
    progress2=progress1;
    System.out.println("seek bar value---->"+progress2);
    sampleDB.execSQL("UPDATE "+SAMPLE_TABLE_NAME+ "SET Value= "+ progress2+ "WHERE Year="+label);
} 
```

# python - 在 python 中，硒模块。如何使用火狐驱动

> ID：12561193
> 
> 赞同：5
> 
> 时间：2012-09-24T08:15:40.547
> 
> 标签：python, firefox, selenium, selenium-webdriver

我想使用 Selenium 的 Firefox 驱动程序。但我得到了如下所示的错误。火狐可能没有正确安装吗？

------ 我的来源 ------

```
from selenium import webdriver

driver = webdriver.Firefox() 
```

------ 我的源码完------

这是返回的错误：

```
Traceback (most recent call last):
  File "test.py", line 4, in <module>
    browser = webdriver.Firefox()
  File "/usr/local/lib/python2.7/site-packages/selenium-2.25.0-py2.7.egg/selenium/webdriver/firefox/webdriver.py", line 51, in __init__
    self.binary, timeout),
  File "/usr/local/lib/python2.7/site-packages/selenium-2.25.0-py2.7.egg/selenium/webdriver/firefox/extension_connection.py", line 47, in __init__
    self.binary.launch_browser(self.profile)
  File "/usr/local/lib/python2.7/site-packages/selenium-2.25.0-py2.7.egg/selenium/webdriver/firefox/firefox_binary.py", line 43, in launch_browser
    self._start_from_profile_path(self.profile.path)
  File "/usr/local/lib/python2.7/site-packages/selenium-2.25.0-py2.7.egg/selenium/webdriver/firefox/firefox_binary.py", line 65, in _start_from_profile_path
    env=self._firefox_env).communicate()
  File "/usr/local/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/local/lib/python2.7/subprocess.py", line 1228, in _execute_child
    raise child_exception
AttributeError: 'NoneType' object has no attribute 'rfind' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T05:30:34.387

I faced the same error but got fixed when I installed firefox. Didn't realise that firefox was not installed. Check it out.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T13:23:47.840

selenium webdriver 为您提供对 Web 内容的编程访问。它驱动一个*真正的*浏览器，所以是的，你需要安装 Firefox 来实例化`webdriver.Firefox()`.

# filemaker - 当教师添加作业时，所有学生姓名都会出现。怎么做？

> ID：12561198
> 
> 赞同：0
> 
> 时间：2012-09-24T08:15:49.353
> 
> 标签：filemaker

![ERD](../Images/ca2468992c37157c364e96a46619e3ee.png)

我的任务是创建一个数据库来跟踪学校的学生成绩。我根据3种规范化形式得出了一组表之间的关系（我希望我做对了。如果没有，请赐教）。

我想在 Filemaker 应用程序中添加的一个功能是，当老师想要输入一些作业分数时，他只需要创建一个新的提交记录，班级中的所有学生姓名都会出现。

我无法想到如何在 Filemaker 中完成此功能。我只能创建一个新的提交记录并输入一个学生的分数，然后创建另一个新记录来为第二个学生做同样的事情。

有人可以帮忙吗？我是一名教师，而不是 Filemaker 开发人员，所以如果我的数据库表做错了，请纠正我。

更新：我希望输出是这样的![输出](../Images/c4b2f26294e025fa9e544f25e010ac7d.png)

电子表格不适合，因为它不能用于轻松搜索/排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:56:11.727

我在[这里](https://dl.dropbox.com/u/9175169/Matrix.zip)有一个快速示例文件。这是一个旧样本，它使用不同（但相似）的模型。基本上这个想法是：您有一个计算字段（我使用重复字段）来显示数据。您还有一个用作编辑小部件的*全局重复字段。*每次您访问记录时，您都会使用相关记录中的数据填充此字段的代表（使用 OnRecordLoad 触发器）。这并不意味着该字段对所有记录显示相同的数据，因为它的条件格式规则设置为隐藏所有数据；因此，它仅在您实际输入其中一个重复项时才显示一条数据。这是可以编辑的数据。最后，每次您退出该字段并将您的更改发布到相关表（添加、更新或删除）时都会触发一个触发器。

该示例并不完整，因为如果数据列少于重复项，您可能希望以某种方式锁定剩余的重复项；这部分没有完成。否则它工作得相当好。然而，在 FM 12 中，它往往会冻结应用程序；我向 FMI 报告了这个问题，他们承认了，但我认为它还没有修复。

# c# - 在 C# 中的 ListViewItem 中捕获双重条目

> ID：12561199
> 
> 赞同：0
> 
> 时间：2012-09-24T08:15:59.037
> 
> 标签：c#, .net, winforms, listviewitem

我试图管理如何[防止 ListView Item in C# 中的双重条目](https://stackoverflow.com/questions/1403898/prevent-double-entries-in-listview-using-c)。所有这些都不适合我。

我尝试以[Ahmad Mageed](https://stackoverflow.com/users/59111/ahmad-mageed)的源代码为基础，但我对他的装饰感到困惑。我将他的源代码基于我的项目

```
ListViewItem item = ListView1.FindItemWithText(txtPLU.Text);
if (item != null)
{
    MessageBox.Show("Item is already been exist!"); //Result if the item has exist in the listview item.
}
else
{
    addToList(); //Its a method to add the product items in the ListViewItem.
    txtBoxPLU.Focus();
} 
```

运行时的行为是它只添加一个项目。

对不起，如果这让你们所有人感到困惑。我只是为了捕获该项目是否已存在于列表视图项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-18T04:52:21.607

有[`ListView.ListViewItemCollection`](https://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection(v=vs.110).aspx)2 种方法可用于查找项目是否包含在集合中。

[Contains](https://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.contains(v=vs.110).aspx)和[ContainsKey](https://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.containskey(v=vs.110).aspx)方法。

> 例子：

```
ListViewItem _item = new ListViewItem();

if (!listView1.Items.Contains(_item))
{
    // TODO: Add to list.
}
else
{
    // Already exists.
} 
```

# php - 如何在服务器的htaccess中更改php版本

> ID：12561203
> 
> 赞同：59
> 
> 时间：2012-09-24T08:16:22.237
> 
> 标签：php, .htaccess, version

我`php 5.3`在本地机器上使用。在我们的网络服务器上，我们有`php 4.8`. 我们的服务器是共享服务器。所以我想通过`.htaccess`文件更改我们服务器上的 php 版本。有可能做到吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-02-07T12:01:06.297

要切换到 PHP 4.4：

```
AddHandler application/x-httpd-php4 .php 
```

要切换到 PHP 5.0：

```
AddHandler application/x-httpd-php5 .php 
```

要切换到 PHP 5.1：

```
AddHandler application/x-httpd-php51 .php 
```

要切换到 PHP 5.2：

```
AddHandler application/x-httpd-php52 .php 
```

要切换到 PHP 5.3：

```
AddHandler application/x-httpd-php53 .php 
```

要切换到 PHP 5.4：

```
AddHandler application/x-httpd-php54 .php 
```

要切换到 PHP 5.5：

```
AddHandler application/x-httpd-php55 .php 
```

要切换到 PHP 5.6：

```
AddHandler application/x-httpd-php56 .php 
```

要切换到 PHP 7：

```
AddHandler application/x-httpd-php7 .php 
```

要切换到 PHP 7.1：

```
AddHandler application/x-httpd-php71 .php 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-09T16:50:50.230

要切换到 PHP 4.4：

`AddHandler application/x-httpd-php4 .php .php4 .php3`

要切换到 PHP 5.0：

`AddHandler application/x-httpd-php5 .php .php5 .php4 .php3`

要切换到 PHP 5.1：

`AddHandler application/x-httpd-php51 .php .php5 .php4 .php3`

要切换到 PHP 5.2：

`AddHandler application/x-httpd-php52 .php .php5 .php4 .php3`

要切换到 PHP 5.3：

`AddHandler application/x-httpd-php53 .php .php5 .php4 .php3`

要切换到 PHP 5.4：

`AddHandler application/x-httpd-php54 .php .php5 .php4 .php3`

要切换到 PHP 5.5：

`AddHandler application/x-httpd-php55 .php .php5 .php4 .php3`

要使用 Suhosin 补丁切换到安全的 PHP 5.2：

`AddHandler application/x-httpd-php52s .php .php5 .php4 .php3`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-04T12:53:17.230

请注意，以上所有答案对于 Apache+ [mod-php](/questions/tagged/mod-php "显示标记为“mod-php”的问题")设置都是正确的。他们不太可能使用最新的 PHP-FPM 设置。这些通常只能在 VirtualHost 部分定义，而不是 .htaccess。

同样，这在很大程度上取决于您的主机如何配置 PHP。每个域/用户通常都有自己运行的 PHP FPM 实例。随后`…/x-httpd-php52`将无法识别泛型类型。

有关概述，请参阅[**ServerFault** : Alias a FastCGI proxy protocol handler via Action/ScriptAlias/etc](https://serverfault.com/questions/884781/alias-a-fastcgi-proxy-protocol-handler-via-action-scriptalias-etc)。

对于 Apache 2.4.10+/ [mod-proxy-fcgi](/questions/tagged/mod-proxy-fcgi "显示标记为“mod-proxy-fcgi”的问题")配置，您*可能*可以使用以下内容：

```
 AddHandler "proxy:unix:/var/run/php-fpm-usr123.sock|fcgi://localhost" .php 
```

或者`SetHandler`使用您的`.htaccess`. 但同样，在具体的 FPM 插座上咨询您的主机是不可避免的。在现代 PHP-FPM 设置中没有通用的答案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-24T08:22:12.340

试试这个切换到php4：

```
AddHandler application/x-httpd-php4 .php 
```

更新。看起来我没有正确理解你的问题。**如果您的服务器上只有**php 4，这将无济于事。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-23T18:11:52.660

仅供参考，GoDaddy 是这样的：

> AddHandler x-httpd-php5-3 .php

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-23T17:15:03.610

这对我有用

**PHP 7.2**

```
AddHandler application/x-httpd-ea-php72 .php 
```

**PHP 7.3**

```
AddHandler application/x-httpd-ea-php73 .php 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-12T08:47:49.680

当前标记答案的补充：

将 addhandler 放在以下范围内，如下所示：

```
<IfModule mod_rewrite.c>

   AddHandler application/x-httpd-php71 .php
   RewriteEngine On

   ....

</IfModule> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-20T12:50:10.717

转到CPanel上的文件管理器>>>公共html>>>找到.htaccess文件>>>右键单击它>>>>单击编辑。[看图片](https://i.stack.imgur.com/dAKk0.png)

键入要更改为的版本号。即 - 73、70 或 71。

希望这可以帮助。之后，保存更改。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-30T09:18:52.633

对于 Cpanel 生成的 php8 代码：

```
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php80 .php .php8 .phtml
</IfModule> 
```

应安装所需的 PHP 版本

* * *

## 回答 #10

> 赞同：-28
> 
> 时间：2012-09-24T08:18:29.037

您不能通过 .htaccess 更改 PHP 版本。

您需要为 PHP 5.3 更新您的服务器，或者您可以找到另一台在共享主机上提供 PHP 5.3 的主机。

# php - PHP stdClass - 雅虎 OAuth

> ID：12561211
> 
> 赞同：0
> 
> 时间：2012-09-24T08:16:43.623
> 
> 标签：php, oauth, contacts, yahoo

我正在尝试在我的代码中使用 Yahoo OAuth 获取联系方式。OAuth 工作正常，我从 Yahoo 获得以下 stdClass：

```
stdClass Object ( 
    [profile] => stdClass Object ( 
            [guid] => AA5JFPBIASDFFESAETKHA 
            [birthYear] => 1980 
            [birthdate] => 1/31 
            [created] => 2008-10-08T13:59:36Z 
            [displayAge] => 32 
            [gender] => M 
            [image] => stdClass Object ( 
                [height] => 192 
                [imageUrl] => http://socialprofiles.zenfs.com/images/636fb037c2791a06fda15adda78b38f0_192.jpg 
                [size] => 192x192 [width] => 192 
           )
           [location] => Noida, India 
           [memberSince] => 2002-03-04T11:38:32Z 
           [nickname] => Himanshu 
           [profileUrl] => http://profile.yahoo.com/AA5JFPBIZUNNQRHEA6R73NTKHA 
           [status] => stdClass Object (
                     [lastStatusModified] => 2011-10-27T17:03:35Z 
                     [linkTo] => 
                     [message] => Using Yahoo! mail after a long time.... Full of features that Gmail cannot come anywhere close to..... ) 
                     [isConnected] => false 
                     ) 
```

这是我脚本第 164 行上变量 $profile 的 print_r。现在当我试图在我的程序中使用这个变量时，它给了我一个这样的错误：

```
Notice: Undefined property: stdClass::$profileUrl in /var/www/vhosts/xyz.com/httpdocs/PHP/yahoo-api-php-client/examples/simpleauth/simpleauth.php on line 165 
```

我的 php 脚本中的第 165 行是`$prfurl = $profile->profileUrl;`

谁能帮我我在这里做错了什么？这是雅虎的标准代码，我没有在其中做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:22:09.550

它应该是`$prfurl = $profile->profile->profileUrl;`

# javascript - Xpages、dijit.form.RadioButton如何保存值？

> ID：12561218
> 
> 赞同：0
> 
> 时间：2012-09-24T08:17:20.387
> 
> 标签：xpage上使用, dijit.form.radiobutton, xpages-extlib, dijit.form.radiobutton, xpage, , , , , dijit.form.radiobutton, javascript, dojo, xpages, radio, lotus

我计划在[xpage上使用](/questions/tagged/xpage "显示标记为“xpage”的问题")[dijit.form.radiobutton](/questions/tagged/dijit.form.radiobutton "显示标记为“dijit.form.radiobutton”的问题")。我尝试在不使用[xpages-extlib](/questions/tagged/xpages-extlib "显示标记为“xpages-extlib”的问题")的情况下找到解决方案。如果我将[dijit.form.radiobutton](/questions/tagged/dijit.form.radiobutton "显示标记为“dijit.form.radiobutton”的问题")添加到[xpage](/questions/tagged/xpage "显示标记为“xpage”的问题")，则不会保存按钮的值。

## 不工作的代码

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:this.data>
        <xp:dominoDocument var="document1" formName="tstRadio"></xp:dominoDocument>
    </xp:this.data>
    <xp:this.resources>
        <xp:dojoModule name="dijit.form.RadioButton"></xp:dojoModule>
    </xp:this.resources>
    <xp:button value="Label" id="button1">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.action>
                <xp:saveDocument var="document1"></xp:saveDocument>
            </xp:this.action>
        </xp:eventHandler>
    </xp:button>
    <xp:radio text="Yes" id="radio1" groupName="radio" selectedValue="yes" value="#{document1.radio}" dojoType="dijit.form.RadioButton">
        <xp:this.dojoAttributes>
            <xp:dojoAttribute name="name" value="radio"></xp:dojoAttribute>
            <xp:dojoAttribute name="value" value="yes"></xp:dojoAttribute>
        </xp:this.dojoAttributes>
    </xp:radio>
    <xp:radio text="No" id="radio2" groupName="radio" selectedValue="no" value="#{document1.radio}" dojoType="dijit.form.RadioButton">
        <xp:this.dojoAttributes>
            <xp:dojoAttribute name="name" value="radio"></xp:dojoAttribute>
            <xp:dojoAttribute name="value" value="no"></xp:dojoAttribute>
        </xp:this.dojoAttributes>
    </xp:radio>
</xp:view> 
```

* * *

## 工作代码

如果没有[dijit.form.radiobutton](/questions/tagged/dijit.form.radiobutton "显示标记为“dijit.form.radiobutton”的问题")值正确保存。

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<xp:this.data>
<xp:dominoDocument var="document1" formName="tstRadio"></xp:dominoDocument>
    </xp:this.data>
    <xp:this.resources>
       <xp:dojoModule name="dijit.form.RadioButton"></xp:dojoModule>
   </xp:this.resources>
   <xp:button value="Label" id="button1">
       <xp:eventHandler event="onclick" submit="true"
           refreshMode="complete">
           <xp:this.action>
              <xp:saveDocument var="document1"></xp:saveDocument>
           </xp:this.action>
       </xp:eventHandler>
   </xp:button>
   <xp:radio text="Yes" id="radio1" groupName="radio" selectedValue="yes" value="#{document1.radio}">
       <xp:this.dojoAttributes>
           <xp:dojoAttribute name="name" value="radio"></xp:dojoAttribute>
           <xp:dojoAttribute name="value" value="yes"></xp:dojoAttribute>
        </xp:this.dojoAttributes>
    </xp:radio>
    <xp:radio text="No" id="radio2" groupName="radio" selectedValue="no" value="#{document1.radio}">
       <xp:this.dojoAttributes>
           <xp:dojoAttribute name="name" value="radio"></xp:dojoAttribute>
           <xp:dojoAttribute name="value" value="no"></xp:dojoAttribute>
       </xp:this.dojoAttributes>
   </xp:radio>
</xp:view> 
```

* * *

## 问题

我不确定我在第一个示例中编写的 Not working 代码是否正确，其中可能缺少某些内容。是否可以将 dijit.form.Radio 与 Xpage 上的工作保存功能一起使用？如果是，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:13:06.437

您的第一个代码片段因此无法正常工作的原因`<xp:dojoAttribute name="name" value="radio"></xp:dojoAttribute>`。该语句将tag的`name`属性设置为而不是类似 this 。我删除了它为我工作的线路。你也不需要像你的工作那样添加。`input``radio``view:_id1:radio``<xp:dojoAttribute name="value" value="yes"></xp:dojoAttribute>``selectedValue`

所以你的代码变成了这样 -

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:this.data>
        <xp:dominoDocument var="document1" formName="tstRadio"></xp:dominoDocument>
    </xp:this.data>
    <xp:this.resources>
        <xp:dojoModule name="dijit.form.RadioButton"></xp:dojoModule>
    </xp:this.resources>
    <xp:button value="Label" id="button1">
        <xp:eventHandler event="onclick" submit="true" refreshMode="complete">
            <xp:this.action>
                <xp:saveDocument var="document1"></xp:saveDocument>
            </xp:this.action>
        </xp:eventHandler>
    </xp:button>
    <xp:radio text="Yes" id="radio1" groupName="radio" selectedValue="yes" value="#{document1.radio}" dojoType="dijit.form.RadioButton">
    </xp:radio>
    <xp:radio text="No" id="radio2" groupName="radio" selectedValue="no" value="#{document1.radio}" dojoType="dijit.form.RadioButton">
    </xp:radio>
</xp:view> 
```

# android - 哪个端口 android 应用程序正在使用

> ID：12561220
> 
> 赞同：3
> 
> 时间：2012-09-24T08:17:30.880
> 
> 标签：android

我的 wifi 通过代理工作，所以我使用带有 asproxy 的 root 手机连接到互联网。

大多数应用程序使用标准端口（这是我的信念），但有些使用特殊端口，例如 play.google.com 使用 5228 进行连接。

有没有办法知道我的其他应用程序正在使用哪个端口（可能是听）示例强大的文本，以便我可以在 asproxy 中配置它们。我已经尝试过 logcat，但我没有提供太多细节。

logcat 提取：

```
 W/com.Alsu.ASProxy(  757): Network connected, starting
> D/WifiWatchdogService(  251): (android.server.ServerThread) wi-fi
> (.f....) does not require the watchdog D/Tethering(  251):
> MasterInitialState.processMessage what=3 D/GTalkService( 2257): #####
> Network broadcast (connected=true) type=WIFI, state=CONNECTED
> I/MediaUploader( 6574): No need to wake up D/GTalkService( 2257):
> [GTalkConnection.1] ### networkStateChanged: active and curr network
> type/state are the same(1/CONNECTED), ignore D/CMStats ( 6594):
> CONNECTIVITY_ACTION: noConnectivity = false D/CMStats ( 6594):
> CONNECTIVITY_ACTION: starting service D/CMStats ( 6594): User has not
> opted in -- skipping reporting.
> **V/texty   ( 5190): Data connection is ON.** D/dalvikvm(  370): GC_CONCURRENT freed 390K, 45% free 3913K/7047K, external 133K/513K,
> paused 4ms+6ms W/KeyCharacterMap(  370): Can't open keycharmap file
> W/KeyCharacterMap(  370): Error loading keycharmap file
> '/system/usr/keychars/europa_keypad0.kcm.bin'.
> hw.keyboards.0.devname='europa_keypad0' 
```

# actionscript-3 - AS3 错误 #1009：无法访问空对象引用的属性或方法

> ID：12561222
> 
> 赞同：0
> 
> 时间：2012-09-24T08:17:47.227
> 
> 标签：actionscript-3, flash, point

基本上，我试图让一个随机生成的角色跟随一系列航路点到达他需要去的地方，而不会在舞台上走进墙壁等。

我通过将一个点数组从引擎传递给角色的 followPath 函数来做到这一点（这将是一个循环，但我还没有到那个阶段）。

这个 followPath 函数的一部分是检测角色何时足够接近航点，然后移动到下一个。为此，我尝试使用 Point.distance(p1,p2) 来计算当前选择的航点与代表角色当前位置的点之间的距离。

这就是我遇到这个问题的地方。尝试更新角色的当前 (x,y) 点位置被证明是困难的。出于某种原因，Point.setTo 函数似乎不存在，尽管它在文档中。结果，我正在使用

```
 currentPos.x = x;
        currentPos.y = y;
        //update current position point x and y 
```

尝试这样做，这就是我的 1009 错误的来源。

到目前为止，这是我的完整 Character 课程：

```
package  {
import flash.display.MovieClip;
import flash.geom.Point;

public class Character extends MovieClip {

    public var charType:String;
    private var charList:Array = ["oldguy","cloudhead","tvhead","fatguy","speakerhead"];
    private var numChars:int = charList.length;
    private var wpIndex:int = 0;
    private var waypoint:Point;
    private var currentPos:Point;
    private var wpDist:Number;
    private var moveSpeed:Number = 5;

    //frame labels we will need: charType+["_walkingfront", "_walkingside", "_walkingback", "_touchon", "_touchonreaction", "_sitting"/"_idle", "_reaction1", "_reaction2", "_reaction3", "_reaction4"]

    public function Character() {
        trace("new character:");
        charType = charList[Math.floor(Math.random()*(numChars))];
        //chooses a random character type based on a random number from 0-'numchars'
        trace("char type: " + charType);

        gotoAndStop(charType+"_walkingfront");

        x = 600;
        y = 240;
    }

    public function followPath(path:Array):void {
        if(wpIndex > path.length){ //if the path has been finished
            gotoAndStop(charType+"_sitting"); //sit down
            return;//quit
        }

        waypoint = path[wpIndex];
        //choose the selected waypoint
        currentPos.x = x;
        currentPos.y = y;
        //update current position point x and y

        wpDist = Point.distance(currentPos,waypoint);
        //calculate distance

        if(wpDist < 3){ //if the character is close enough to the waypoint
            wpIndex++; //go to the next waypoint
            return; //stop for now
        }
        moveTo(waypoint);
    }

    public function moveTo(wp:Point):void {
        if(wp.x > currentPos.x){
            currentPos.x += moveSpeed;
        } else if(wp.x < currentPos.x){
            currentPos.x -= moveSpeed;
        }

        if(wp.y > currentPos.y){
            currentPos.y += moveSpeed;
        } else if(wp.y < currentPos.y){
            currentPos.y -= moveSpeed;
        }
    }

} 
```

}

谁能向我解释为什么会这样？这是我现阶段无法克服的障碍。

我也很好奇是否有人可以提供有关为什么我不能使用幻像 Point.setTo 方法的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:30:44.703

您正在尝试分配不存在的 Point 对象的 x 和 y 属性。

你必须创建你的点：

```
currentPos = new Point (); 
```

然后分配 x 和 y

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:39:10.597

问题是您没有首先使用 Point 构造函数。当您创建一个不是简单数据类型（Int、Number、String ...）的变量时，您必须首先调用构造函数，然后才将属性分配给对象的字段。这是因为您必须在访问它的属性之前初始化 Point 类的实例。任何其他类也是如此。

[http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29](http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29)

“在面向对象的编程中，类中的构造函数（有时缩写为 ctor）是一种特殊类型的子例程，在创建对象时调用。它准备新对象以供使用..”

基本上，您没有准备新的 Point 对象。

在这个例子中，在构造函数期间（公共函数字符）

```
public function Character() {
        //add these lines (you can omit the zeroes as the default value is zero)
        //I added the zeroes to show that the constructor can set the initial values.
        wayPoint = new Point(0, 0);
        currentPos = new Point(0, 0);
        trace("new character:");
        charType = charList[Math.floor(Math.random()*(numChars))];
        //chooses a random character type based on a random number from 0-'numchars'
        trace("char type: " + charType);

        gotoAndStop(charType+"_walkingfront");

        x = 600;
        y = 240;
    } 
```

记住每个新的对象标识符都引用 NULL（什么都没有），直到你构造一个对象或做这样的事情

```
var pointA = pointB;
//where pointB is already not null
//You can also check this
if(currentPos != null)
{
   currentPos.x = X;
   currentPos.y = Y;
} 
```

如果您首先使用构造函数，则 currentPos 不会为空。

祝你好运。

# html - 在元素之前创建一个中断

> ID：12561224
> 
> 赞同：1
> 
> 时间：2012-09-24T08:18:09.300
> 
> 标签：html, css

我试图在 css 中的元素之前添加一个中断而不更改下面的 html 代码。我一直在这个论坛上寻找答案，但无法让它在不同的浏览器上工作。

HTML（不可更改，因为它是`joomla`组件的一部分）

```
 <span id="mod_login_usernametext-map"> <label for="mod_login_username-map"> Email </label> </span>

    <span><input type="text" name="username" id="mod_login_username-map" class="inputbox-map" /></span>

    <-- here i want the break -->

    <span id="mod_login_passwordtext-map"><label for="mod_login_password-map">Password</label></span>&nbsp;<span><input type="password" name="passwd" id="mod_login_password-map" class="inputbox-map" />

    <-- and break here -->
    <input type="checkbox" name="remember" id="mod_login_remember-map" class="inputbox-map" value="yes" /> <span id="mod_login_remembermetext-map"><label for="mod_login_remember-map">Remember me</label></span> 
```

我试过`#mod_login_passwordtext-map:before { content: '\A';white-space: pre-line; }`了，但结果不是很好`firefox`，`chrome`很好..

使用`display: break`不会将输入框放在同一级别。如果我可以添加一个环绕元素，那么最简单的方法是，但没有人可以做到这一点。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:41:03.183

用这个 css 试试：

```
#mod_login_passwordtext-map:before {
  content: '\A';
  white-space: pre;
} 
```

演示：[codepen](http://codepen.io/anon/pen/hyEAC)

对我来说在 FF 和 Chrome 上运行良好。

最好的祝福

**编辑：**

这也会为您的登录按钮添加一个中断+对齐两个`input`字段：

```
#mod_loginform-map #mod_login_passwordtext-map:before,
#mod_loginform-map .cbLoginButtonSpan:before {
  content: '\A';
  white-space: pre;
}

#mod_login_usernametext-map label,
#mod_login_passwordtext-map label {
  display: inline-block;
  width: 6em;
} 
```

演示：[codepen](http://codepen.io/anon/pen/Geapw)

**编辑2：**

不能向元素添加伪类`:before`。`:after``input`

为什么？

因为在元素**内容**`:before`之前添加，并且在元素内容之后添加，**而****不是**在元素本身之前或之后。**`:after`**

 ******输入元素没有内容，只有一个值。

希望这可以帮助。

**编辑 3：**

要使用 CSS 获得一个新行，对于“*记住我* `input`”，我只看到一种方式。

```
#mod_loginform-map #mod_login_passwordtext-map:before,
#mod_loginform-map .cbLoginButtonSpan:before,
#mod_loginform-map span:nth-child(4):after {
  content: '\A';
  white-space: pre;
} 
```

演示：[codepen](http://codepen.io/anon/pen/wylEm)

但是这种解决方法在我看来有点糟糕。

最好的祝福

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:50:33.790

为什么不直接设置`#mod_login_passwordtext-map`为`display:block`？或者甚至对你的标记做一些浮动/清除。

[http://jsfiddle.net/TUGCX/1/](http://jsfiddle.net/TUGCX/1/)

```
#mod_login_passwordtext-map {
    clear:both;
}

span {
    float:left;
}

/* You don't need that. */
input {
    display:inline-block;
    margin-left:5px;
} 
```

​注意 **：** `display: break`不是有效的css！******

# spring-mvc - Spring MVC 内化，只显示英文消息。但是地址栏发生了变化

> ID：12561227
> 
> 赞同：0
> 
> 时间：2012-09-24T08:18:22.650
> 
> 标签：spring-mvc, internationalization

--------------------更新！-------------这是我的.jsp，没有不必要的按钮

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<html>
<head>

<title>Practice</title>
<link rel="stylesheet" type="text/css" href="style/wort.css" />
</head>
<body>

    <a href="goToDictionary.html" class="practice_dictionary"><spring:message code="check.the.dictionary" />
        </a>

    <br>
    <a href="?lang=en" class="languageselectorEnglish">en</a>
    <a href="?lang=de" class="languageselectorGerman">de</a>
    <br>

</body>
</html> 
```

----------------------------------更新到此结束---------- --------------------------

我已经使用 Spring MVC 为我的 Web 应用程序设置了 i18n。这没用。当我点击链接时：

`<a href="?lang=de">de</a>`

没有任何反应，只有地址栏变为

```
http://localhost:8080/wort/register.html?lang=de 
```

但显示的消息保持不变（英文）。显然我在 messages_en.properties 文件旁边有 messages_de.properties 文件。（英文信息的显示没有问题。）

我错过了一些明显的东西吗？

这是我的弹簧配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />
    <context:component-scan base-package="net" />

    <mvc:annotation-driven />
    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

<bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>

    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
        <property name="defaultLocale" value="en" />
    </bean>

    <bean id="handlerMapping"
          class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="interceptors">
            <ref bean="localeChangeInterceptor" />
        </property>
    </bean>

    <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.model.Word</value>
                <value>net.model.Category</value>
                <value>net.model.Challenge</value>
                <value>net.model.User</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:03:22.453

这是解决方案：我必须从 spring-servlet.xml 中删除它，一切都很好

```
<mvc:annotation-driven /> 
```

# c# - 在 Mono 下读取小键盘符号

> ID：12561232
> 
> 赞同：0
> 
> 时间：2012-09-24T08:18:40.107
> 
> 标签：c#, .net, mono, num-lock

我正在开发一个控制台应用程序，它应该在数字锁定状态下监听数字键盘上的数字 - 打开和关闭。该应用程序在带有 Arch Linux 和 Mono 的 Raspberry Pi 上运行。由于我没有找到一种方法，即在 Mono 下编译，永久打开 numlock，我使用以下方法将 num pad 命令转换为数字：

```
private string ReadNumPadSymbol(ConsoleKeyInfo keyInfo)
    {
        char editedSymbol;
        switch (keyInfo.Key)
        {
            case ConsoleKey.Insert:
                editedSymbol = '0';
                break;
            case ConsoleKey.End:
                editedSymbol = '1';
                break;
            case ConsoleKey.DownArrow:
                editedSymbol = '2';
                break;
            case ConsoleKey.PageDown:
                editedSymbol = '3';
                break;
            case ConsoleKey.LeftArrow:
                editedSymbol = '4';
                break;
            case ConsoleKey.Clear:
                editedSymbol = '5';
                break;
            case ConsoleKey.RightArrow:
                editedSymbol = '6';
                break;
            case ConsoleKey.Home:
                editedSymbol = '7';
                break;
            case ConsoleKey.UpArrow:
                editedSymbol = '8';
                break;
            case ConsoleKey.PageUp:
                editedSymbol = '9';
                break;
            default:
                return String.Empty;
        }
        return editedSymbol.ToString();
    } 
```

它在 Windows 下按预期工作，但在 Linux 下，当按下“5”按钮时，该方法返回空字符串。由于某种原因，它没有进入 ConsoleKey.Clear 案例。有解决办法吗？

谢谢！

# html - 问题用横幅图像衬里底部阴影

> ID：12561235
> 
> 赞同：1
> 
> 时间：2012-09-24T08:18:46.417
> 
> 标签：html, css

我试图将这个底部阴影排成顶部阴影，但我似乎无法将它弄出来。它崩溃的唯一一次是当我使用开发人员工具栏在 css 文件中进一步删除行高或字体大小时，但这当然也会影响其他所有内容。这是我的基本 html 结构：

```
<div class="banner-image">
  <div class="banner-image-wrapper">
    <div class="shadow-top"></div>
      <a class="header-image">
        <img />
      </a>
    <div class="shadow-bottom"></div>
  </div>
</div> 
```

在标签上，如果我删除字体大小和行高，一切都会很好地自行折叠，但我似乎无法仅在标签上强制执行此操作。

我知道一旦解决了这将是一个荒谬的问题。

谢谢！

![在此处输入图像描述](../Images/af5ac5dcf7d80ea1c2148e78e78bf8d6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:05:49.713

答案其实很简单，你只需要使用一些巧妙的定位并利用父母的盒子模型：

```
.banner-image{
    position:relative;
}

.shadow-bottom{
    position:absolute;
    height: x;
    bottom: -x;
} 
```

这是您需要的公式：

*   取底部阴影的高度（某个值 x ）
*   然后确保该元素的父元素的位置为“相对”（~重要~）
*   使底部阴影的位置为“绝对”
*   将其放置在底部减去它的高度值（ -x ）

这是一个说明效果的 jsFiddle：http: [//jsfiddle.net/k7CmJ/](http://jsfiddle.net/k7CmJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T14:02:33.243

我知道这已经过时了，但是对于其他正在寻找答案的人来说，绝对定位不起作用，在 img 标签上设置 display:block 将摆脱那个空间：

```
.header-image > img {
    display:block;
} 
```

通常图像是一个内联块，并且因为它是内联的，所以它周围的空白被保留。

这是问题所在：http: [//jsfiddle.net/3Kd3f/](http://jsfiddle.net/3Kd3f/)

这是完全相同的代码，只是将 display:block 添加到 img 标签：http: [//jsfiddle.net/3Kd3f/1/](http://jsfiddle.net/3Kd3f/1/)

# mysql - mysql搜索权重到结果

> ID：12561239
> 
> 赞同：3
> 
> 时间：2012-09-24T08:19:03.180
> 
> 标签：mysql, sql

数据库条目

表测试

```
 name
========================
 Sunae Kasimov
 Obsop Natty
 Preem Kuman 
```

mysql查询

```
select * 
from test 
where name like 'na%' or 
      name like '% na%' or 
      name like '%na%'; 
```

按顺序 1 和 2 返回，但我想要按顺序 2 和 1。那是想给 '% na%' 然后给 '%na%' 更多的权重

这可以在mysql中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:41:04.667

您应该在您的选择中创建虚拟文件并按其排序。例如：

```
select test.*,
case when name like '% na%'
         then 1
     else 2
end as OrderField
from test 
where name like 'na%' or 
      name like '% na%' or 
      name like '%na%'
order by OrderField 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:35:13.297

```
select * from 
(
select * from name where name like '% na%'
union
select * from name where name like 'na%'
union
select * from name where name like '%na%'
) a 
```

# highstock - 如何使用函数更改 Highstock 的散点符号 url？

> ID：12561240
> 
> 赞同：0
> 
> 时间：2012-09-24T08:19:05.683
> 
> 标签：highstock

我想使用某种函数为 highstock 的 plotOptions.scatter.marker.symbol 赋值。这就是我编写代码的方式，但我在图表中看不到符号。请帮我解决一下这个。

```
plotOptions={  
scatter:{
  marker:{
     var a;
     a=myFunction();
     symbol:a
        }           
    } 
   }
 };
 function myFunction() {

    if(true){
return 'url(http://www.lib.udel.edu/ud/ill/images/green_marker.gif)';
}
else{
return 'square';
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:53:24.080

这部分代码需要修改：

```
marker:{
     var a;
     a=myFunction();
     symbol:a 
```

}

您只能在函数内部定义变量。不在 Highstock 代码块内。

所以，在这里我改变了

```
plotOptions: {
                scatter: {
                    marker: {
                        radius: 3,
                        symbol:myFunction(),
                    }
                }
            } 
```

将符号添加到散点图的代码。

你没有提到条件。所以，我认为你应该根据你的需要定制这个例子。

检查这个小提琴。[http://jsfiddle.net/mhardik/YgxEB/1/](http://jsfiddle.net/mhardik/YgxEB/1/)

# php - 反斜杠没有使用addlashes函数+ php格式化

> ID：12561242
> 
> 赞同：-1
> 
> 时间：2012-09-24T08:19:27.117
> 
> 标签：php, mysql

我有以下 php 字符串：“Device/ mo\bile's”；我想将它插入到数据库中，所以在插入之前，我使用addlashes 函数对其进行消毒并且进行了消毒，但是字符串作为“设备/移动设备”插入到数据库中，即。反弹消失。

我也想保留'\'。任何人都建议我该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:52:03.247

不要`addslashes`用于转义 SQL。事实上，不要`addslashes`用于任何事情。如果您仍在使用现已弃用的 mysql_* 函数，请使用`mysql_real_escape_string`. 如果您使用较新的 mysqli_* 或 PDO 扩展，请使用准备好的语句。然后将正确插入所有数据。如果您使用不相关的转义函数，而这些函数不考虑手头语言的适当转义规则，您将不会得到正确的结果。

# c++ - VCL形式的多线控制

> ID：12561245
> 
> 赞同：1
> 
> 时间：2012-09-24T08:19:46.087
> 
> 标签：c++, vcl, trichedit

我正在使用 C++ Builder 创建一个 VCL 表单应用程序，并且想要一个多行编辑框。

我是否正确地说我必须使用 TRichEdit 控件来完成此操作？

如果是这样，（我添加了一个只是为了尝试），我如何在控件中设置文本？似乎没有 .text 或 .caption 属性。

我可以通过 ->text 属性获取 TRichEdit 的内容，但是如何“设置”文本？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:32:21.080

该`Text`属性是读/写的：

```
String s = RichEdit1->Text;

RichEdit1->Text = ...; 
```

它只是这样声明的，`__published`因此您在设计时不会在 Object Inspector 中看到它。如果您想在设计时查看文本，则必须改用该`Lines`属性。

顺便说一句，`TRichEdit`不是唯一的多行编辑控件。 `TMemo`是另一个。它们之间的主要区别在于`TRichEdit`支持的格式选项比`TMemo`它多。将它们分别视为 MSWord 和记事本应用程序的 VCL 等效项。

# php - 如何使 dompdf 处理树枝页面

> ID：12561250
> 
> 赞同：1
> 
> 时间：2012-09-24T08:19:56.680
> 
> 标签：php, twig, dompdf

我必须将用 TWIG 编写的动态页面转换为 PDF。我无法让他解释 TWIG 代码，每个 php、html 输出都会被渲染，但 TWIG 会被忽略。你能告诉我是否有一个不是“在php中重写相同的模板”的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:34:08.667

使用渲染功能？它输出 html，以便您可以在 DomPDF 中传递它。

```
$twig = new Twig_Environment($loader, array(
'cache' => '/path/to/compilation_cache',
));
$dompdf->load_html($twig->render('index.html', array('name' => 'Fabien')));
$dompdf->render(); 
$dompdf->stream("sample.pdf"); 
```

如果你在 Symfony 下

```
$dompdf->load_html($this->renderView('index.html', array('name' => 'Fabien')));
$dompdf->render(); 
$dompdf->stream("sample.pdf"); 
```

# php - 如何从 htm 文件中的 smarty 值中删除 span 标签？

> ID：12561251
> 
> 赞同：0
> 
> 时间：2012-09-24T08:20:00.940
> 
> 标签：php, smarty

我有一个名为 user.htm 的 htm 文件。在这里，我将显示我的用户详细信息。当我尝试添加指向用户图像的链接时，我遇到了一个问题。图片链接中存在 span 标签。

例如，$img_link= '/image/users/44.jpg'。我想从 user.htm 中的 $img_link 中删除 span 标签。

我的代码是：

```
<img src="http://www.mysite.com/Imprenta/{$ruta_value}" height="50px" width="150px" /> 
```

这里 {$ruta_value} 的值是 => '/user/images/44.jpg'

我不能在这里使用像 str_replace 或 strip_tags 这样的 PHP 函数。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:36:41.850

你可以像这样在 smarty 中使用**[strip_tags ，](http://www.smarty.net/docs/en/language.modifier.strip.tags.tpl)**

```
{$img_link|strip_tags} 
```

所以在你的情况下，它会像

```
<img src="http://www.mysite.com/Imprenta/{$ruta_value|strip_tags}" height="50px" width="150px" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:41:28.183

如果你想从 HTML 中删除 span 标签，请给它一个 ID，`<span id="userSpan"> </span>` 然后在这里使用少量 JavaScript

```
var span = document.getElementById("userSpan");
span.parentNode.removeChild(span); 
```

# iphone - UIWebView 显示内容时显示

> ID：12561253
> 
> 赞同：0
> 
> 时间：2012-09-24T08:20:12.900
> 
> 标签：iphone, objective-c, ios, ipad

在**BViewController**中有一个*webView*可以在 method 中从本地文件加载 html ，当从**AViewController**（一个 NavigationViewController）`viewDidLoad`推送**BViewController时，** *webView*会显示一段时间的白页，然后显示 html 内容。

 ***有没有办法直接用白页加载html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:24:51.613

首先将您的 html 加载到您的 webView，然后将其添加为 subView。***

# upgrade - 将 TFS 2010 迁移到 2012 - 迁移 Web 访问中的自定义控件

> ID：12561259
> 
> 赞同：2
> 
> 时间：2012-09-24T08:20:38.207
> 
> 标签：upgrade

我们为 TFS 2010 开发了自定义控件，将其部署到 Visual Studio 和 Web 访问。将 TFS 更新到 2012 后，Web 访问中缺少自定义控件。用c#编写的自定义控件，似乎需要重写为客户端javascript（[在javascript中创建控件的指令](http://blogs.msdn.com/b/serkani/archive/2012/06/22/work-item-custom-control-development-in-tf-web-access-2012-development.aspx)）

是否存在在 TFS 2012 中使用服务器控件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:31:24.300

不，那是不可能的。Web Access 得到了彻底的更新，现在比以往任何时候都快得多。为了能够实现这一目标，它是基于其他技术从头开始构建的。

这需要权衡现有控件需要重写。很抱歉，目前没有更好的答案适合您。

# cakephp - angularjs 中的路由，如 cakephp

> ID：12561267
> 
> 赞同：1
> 
> 时间：2012-09-24T08:21:34.090
> 
> 标签：cakephp, routing, angularjs

我正在尝试在 angularjs 中实现路由。但我希望以与 cakephp 相同的方式进行操作。例如：在 cakephp 中，如果我通过类似的东西

```
blog/manager/users/index/page:2/sort:username/direction:asc 
```

或者

```
blog/manager/users/index/sort:username/direction:asc/page:2 
```

两者都产生相同的结果。即 cakephp 理解以任何顺序传入 url 的命名参数（顺序无关紧要）。如果我需要在 angularjs 中做同样的事情怎么办？现在我在angularjs中为我的路由控制器编写了以下代码：

```
 angular.module('productapp', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/productapp', {templateUrl: 'partials/productList.html', controller: productsCtrl}).
        when('/productapp/:productId', {templateUrl: 'partials/edit.html', controller: editCtrl}).
        otherwise({redirectTo: '/productapp'});
        }], 
        ['$locationProvider', function($locationProvider) {
            $locationProvider.html5Mode = true;
}]); 
```

我是否需要对命名参数的每个组合进行硬编码？或者有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:32:50.097

`$_GET`在 PHP（或任何后端语言）中，由于 mod_rewrite 和对象，您可以灵活地使用 URL 。在 JavaScript 中，我们必须添加所有免费提供给我们的额外逻辑。

使用上面的示例和博客 URL，以下是我在 Angular 中编写这些的方式：

```
$routeProvider.
    when('blog/manager/users/index/:page/:sort/:direction', {
        controller: blogController
    }).
    when('blog/manager/users/index/:sort/:direction/:page', {
        controller: blogController
    }); 
```

如果您不希望为每个可能的参数组合和顺序创建路由，我建议查看`resolve`参数或编写自定义参数函数来监视路由事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:15:30.563

你可以试试这个：

`when('/blog/manager/users/index/:param1/:param2/:param2, {templaeURL: 'mytmpl', controller: MyCtrl}).`

现在 param1,param2 和 param3 可以接收任何东西，但是如果你想对参数做一些事情，你必须在你的控制器中验证（例如：MyCtrl）。

# websphere - 无法在 WebSphere 6.x 中使用 jython 从 wsadmin 调用 os.environ？

> ID：12561283
> 
> 赞同：2
> 
> 时间：2012-09-24T08:22:31.223
> 
> 标签：websphere, jython, wsadmin

我正在尝试为 WebSphere 6.0、6.1.x 和 7 环境制作通用脚本。我需要的是读取我自己的一些环境变量，我需要在我一直使用 os.environ.get['MYVAR'] 的脚本中使用这些环境变量。它适用于 WebSphere 7 和 6.1.x 环境。但是对于 WebSphere 6.0 环境，它给了我以下错误：

```
AttributeError: class 'org.python.modules.os' has no attribute 'environ' 
```

在搜索中，我发现许多库是在 WebSphere 6.1.x 及更高版本中作为可选库引入的，并且在 /opt/WebSphere../AppServer/optionalLibraries/jython/Lib 下可用，但对于 WebSphere 6.0，它不是。

我将其缩小到 javaos.py 并将其复制到一个共享位置并使用`-wsadmin_classpath`选项传递该位置以便可以找到它，但现在它给了我另一个错误（可能它没有找到它。）

```
ImportError: no module named javaos 
```

我需要的是能够以某种方式在 WebSphere 6.0、6.1.x 和 7.0 上无缝地传递一些环境变量，或者能够找出 javaos.py 是否有进一步的依赖关系需要解决（困难的方式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:15:04.730

根据@Husain Khambty 的评论进行编辑：

1 - 将 Jython 库从 WebSphere 6.1.x 复制到 6.0（目录 ex：${WAS_INSTALL_ROOT}/AppServer/optionalLibraries/jython/Lib）。[更多信息](http://webspherehacks.com/blog/?p=10)

2 - 如果您想为 jython 库使用任何自定义位置（更适合无法更改当前 WP 环境目录的情况），那么您可以告诉 wsadmin.sh 通过使用在自定义位置查找库-java选项“-Dpython.path=”

# c# - 无法下载 pdf 文档

> ID：12561284
> 
> 赞同：0
> 
> 时间：2012-09-24T08:22:43.733
> 
> 标签：c#, asp.net, pdf-generation

我想生成一个pdf文档然后下载

```
//this is file name
var fileName = name + "_" + DateTime.Now.ToShortDateString() + ".pdf";
//here I generate my pdf document
string fullpath=  GeneratePDF();

bool existFile= File.Exists(fullpath);
//here I check if this document exists
   if (existFile)
    {
        HttpContext.Current.Response.ContentType = "Application/pdf";
        HttpContext.Current.Response.AppendHeader("Content-Disposition", 
                                        "attachment; filename=" + fileName);
        HttpContext.Current.Response.TransmitFile(fullpath);
        HttpContext.Current.Response.Flush();
        HttpContext.Current.Response.End();
  } 
```

遍历所有cod后，文档创建成功，但下载不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:29:20.207

我正在使用以下代码，它强制下载不同类型的文档：

```
 if (myfile.Exists)
 {
     //Clear the content of the response    
      try
      {
          Response.ClearContent();
         // Add the file name and attachment, which will force the open/cancel/save dialog box to show, to the header    
         Response.AddHeader("Content-Disposition", "attachment; filename=" + myfile.Name);
         // Add the file size into the response header    
         Response.AddHeader("Content-Length", myfile.Length.ToString());    // Set the ContentType    
         Response.ContentType = ReturnMimeType(myfile.Extension.ToLower());    // Write the file into the response (TransmitFile is for ASP.NET 2.0\. In ASP.NET 1.1 you have to use WriteFile instead)    
         Response.TransmitFile(myfile.FullName);
         Response.Flush();
         Response.Close();
         Response.End();
        }
        finally
        {
            File.Delete(myfile.FullName);
        }
  } 
```

...

对于 pdf 文件，ReturnMimeType 包含以下行：

```
case ".pdf": return "application/pdf"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:27:18.893

试试这个

```
Response.ContentType = "application/pdf";
Response.AddHeader("Content-disposition", "inline");
Response.BinaryWrite(File.ReadAllBytes(Server.MapPath(fullpath))); 
```

# python - 写入文件对象，python

> ID：12561285
> 
> 赞同：0
> 
> 时间：2012-09-24T08:22:50.340
> 
> 标签：python

我有以下代码

```
for i in np.arange(10):
   f = open("file_"+str(i)+".dat",'w')
   for j in np.arange(100):
      f.write(str(func(i,j)))
      f.write("\n")
      print func(i,j)
   f.close() 
```

现在，由于该`print`命令，我可以在终端上看到输出，但它正在创建的文件是空的。它无法将输出写入文件。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:26:18.630

试试下面的代码。它既显示值并将其写入文件：

```
import numpy as np

def func(i, j):
    return i + j/1000.0

for i in np.arange(10):
    f = open("file_"+str(i)+".dat",'w')
    for j in np.arange(100):
        f.write(str(func(i,j)))
        f.write("\n")
        print func(i,j)
    f.close() 
```

我的猜测是 Daniel Roseman 是对的，并且问题隐藏在您的`func`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:42:45.593

您可能想尝试：

```
for i in np.arange(10):
   with open("file_%i.dat" % i,'w') as f:
       for j in np.arange(100):
           val = func(i,j)
           f.write("%s\n" % val)
           print val
       f.flush() 
```

# php - 未捕获的 SoapFault 异常：[HTTP] 未找到

> ID：12561291
> 
> 赞同：3
> 
> 时间：2012-09-24T08:23:45.367
> 
> 标签：php, soap

这是我的代码

```
 $client = new SOAPClient ( 'http://torcache.net/torcache.wsdl');
    var_dump($client->cacheTorrent()); 
```

我得到这个`var_dump`之后`$client`

```
object(SoapClient)#1 (2) { ["_soap_version"]=> int(1) ["sdl"]=> resource(1) of type (Unknown) } 
```

但是，当我尝试查找 var_dump($client->cacheTorrent()); 时收到此消息 未捕获的 SoapFault 异常：[HTTP] 未找到

但这对我来说毫无意义，因为我下载了 wdsl 文件，它清楚地表明存在 cacheTorrent 操作！

这里

```
<?xml version='1.0' encoding='UTF-8' ?>
<definitions name='Cache'
  targetNamespace='urn:Torcache'
  xmlns:tns='urn:Torcache'
  xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/'
  xmlns:xsd='http://www.w3.org/2001/XMLSchema'
  xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/'
  xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'
  xmlns='http://schemas.xmlsoap.org/wsdl/'>

<message name='cacheTorrentRequest'>
  <part name='torrent' type='xsd:string'/>
</message>

<message name='cacheTorrentResponse'>
  <part name='Result' type='xsd:string'/>
</message>

<portType name='CachePortType'>
  <operation name='cacheTorrent'>
    <input message='tns:cacheTorrentRequest'/>
    <output message='tns:cacheTorrentResponse'/>
  </operation>
</portType>

<binding name='CacheBinding' type='tns:CachePortType'>
  <soap:binding style='rpc'
    transport='http://schemas.xmlsoap.org/soap/http'/>

  <operation name='cacheTorrent'>
    <soap:operation soapAction='urn:xmethods-delayed-quotes#cacheTorrent'/>
    <input>
      <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes'
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
    </input>
    <output>
      <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes'
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
    </output>
  </operation>
</binding>

<service name='CacheService'>
  <port name='CachePort' binding='CacheBinding'>
    <soap:address location='http://torcache.net/api/soap/'/>
  </port>
</service>
</definitions> 
```

关于我为什么会收到此错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:33:02.970

您的客户端代码没有任何问题....我运行

```
$client = new SOAPClient ( 'http://torcache.net/torcache.wsdl');
var_dump($client->__getFunctions()); 
```

你会得到

```
array
  0 => string 'string cacheTorrent(string $torrent)' (length=36) 
```

显然`cacheTorrent`期望一个 URL 需要是一个有效的 torrent .. 确定错误是在肥皂服务器上生成的，同时尝试验证或访问该 url

# java - Android：将 calcOpticalFlowPyrLK 与 MatOfPoint2f 一起使用

> ID：12561292
> 
> 赞同：4
> 
> 时间：2012-09-24T08:23:47.587
> 
> 标签：java, android, opencv, opticalflow, feature-tracking

我一直无法将 calcOpticalFlowPyrLK 与 MatOfPoint2f 一起使用。我声明我的类型如下：

```
private Mat mPreviousGray;                  // previous gray-level image
private List<MatOfPoint2f> points;          // tracked features
private MatOfPoint initial;                 // initial position of tracked points 
```

并使用以下内容查找和跟踪特征（我的代码基于 Robert Laganiere 的 C++ 示例光流应用程序。）

```
// Called whenever a new frame m is captured
private void OpticalFlow(Mat m, int maxDetectionCount, double qualityLevel,
    double minDistance) {

    if (points.get(0).total() < maxDetectionCount/2)                // Check if new points need to be added
    {
        // maxDetectionCount = 500
        // qualityLevel = 0.01
        // minDistance = 10
        Imgproc.goodFeaturesToTrack(m, initial, maxDetectionCount, qualityLevel, minDistance);

        // add the detected features to the currently tracked features
        points.get(0).push_back(initial);
        // Have checked length of points.get(0), is not zero.
    }

    // for first image of the sequence
    if(mPreviousGray.empty())
        m.copyTo(mPreviousGray);

    if( points.get(0).total() > 0 )   // EMG - 09/22/11 - fix optical flow crashing bug 
    {       
        // 2\. track features
        Video.calcOpticalFlowPyrLK(mPreviousGray, m, // 2 consecutive images
                points.get(0), // input point position in first image
                points.get(1), // output point postion in the second image
                status,    // tracking success
                error);      // tracking error
    }

    ...

    m.copyTo(mPreviousGray);

    ...
} 
```

以前，变量`points`是类型的`List<List<Point>>`，我将通过实例化 MatOfPoint2f`fromList`并将其传递给 calcOpticalFlowPyrLK 在类型之间进行转换。

但是，我不想再这样做了，因为这种从和到列表的转换会丢失和中的点之间的对应`initial`关系`points`。我想保留这种对应关系，因此我可以通过同时迭代两个矩阵中的项目来绘制光流线。

不幸的是，现在我有以下断言失败：

```
09-24 10:04:30.400: E/cv::error()(8216): OpenCV Error: Assertion failed ((npoints = prevPtsMat.checkVector(2, CV_32F, true)) >= 0) in void cv::calcOpticalFlowPyrLK(const cv::_InputArray&, const cv::_InputArray&, const cv::_InputArray&, const cv::_OutputArray&, const cv::_OutputArray&, const cv::_OutputArray&, cv::Size, int, cv::TermCriteria, int, double), file X:\Dev\git\opencv-2.4\modules\video\src\lkpyramid.cpp, line 593
09-24 10:04:30.400: E/AndroidRuntime(8216): FATAL EXCEPTION: Thread-321
09-24 10:04:30.400: E/AndroidRuntime(8216): CvException [org.opencv.core.CvException: X:\Dev\git\opencv-2.4\modules\video\src\lkpyramid.cpp:593: error: (-215) (npoints = prevPtsMat.checkVector(2, CV_32F, true)) >= 0 in function void cv::calcOpticalFlowPyrLK(const cv::_InputArray&, const cv::_InputArray&, const cv::_InputArray&, const cv::_OutputArray&, const cv::_OutputArray&, const cv::_OutputArray&, cv::Size, int, cv::TermCriteria, int, double)
09-24 10:04:30.400: E/AndroidRuntime(8216): ]
09-24 10:04:30.400: E/AndroidRuntime(8216):     at org.opencv.video.Video.calcOpticalFlowPyrLK_2(Native Method)
09-24 10:04:30.400: E/AndroidRuntime(8216):     at org.opencv.video.Video.calcOpticalFlowPyrLK(Video.java:445) 
```

奇怪的是，如果我自己添加这个断言，在调用 calcOpticalFlowPyrLK 之前，它不会失败。

我希望有人可以帮助我找出真正的问题出在哪里，以及如何保持帧之间跟踪点之间的这种关系。

**编辑**：我发现需要做些什么来避免这个断言错误，然后应用程序行为正确，但是：

*   我不知道**为什么**。
*   我现在对 Calib3d.solvePnP 也有类似的问题，但是将 convertTo 应用于 imagePoints 和 objectPoints 并不能解决这里的问题，无论是`CvType.CV_32FC2`，`CvType.CV_32F`还是`CvType.CV_64F`

为了在 的情况下纠正断言失败`calcOpticalFlowPyrLK`，我已更改`points.get(0).push_back(initial);`为以下内容：

```
Imgproc.goodFeaturesToTrack(m, initial, maxDetectionCount, qualityLevel, minDistance);

MatOfPoint2f initial2f = new MatOfPoint2f();
initial.convertTo(initial2f, CvType.CV_32FC2);
// add the detected features to the currently tracked features
trackedpoints.get(0).push_back(initial2f); 
```

所以我的问题变成了：有人可以为我解释一般情况，以便我知道如何解决我的 Calib3d.solvePnP 问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:27:25.480

calcOpticalFlowPyrLK 点参数的类型为 MatOfPoint2f，内部为 CV_32FC2。

solvePnP 第一个参数是**MatOfPoint3f**，内部是**CV_32FC3**。尝试转换为它以查看它是否修复。

一些 opencv 函数需要特定的 Mat 类型，我想出于效率原因，您必须手动选择正确的函数，而不是 opencv 自动猜测/转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:36:39.983

[其他线程](https://stackoverflow.com/questions/14346482/opencv4android-conversion-from-matofkeypoint-to-matofpoint2f)中的某个人以前遇到过这个问题。我最近在OpenCV4Android的光流功能中遇到了这个问题（Assertion）。此解决方案仅在您无法处理以前的点矩阵时才有效：

而不是使用 convertTo() 方法，您应该将从 matOfKeyPoints.ToArray() 获得的 Keypoint[] 数组的每个元素放入 matOfPoints2f 数组中。

[这个页面](http://www.answers.opencv.org/question/6206/opencv4android-conversion-from-matofkeypoint-to/)解释了原因：

```
 KeyPoint[] arrayOfkp = keypoints.toArray();
    org.opencv.core.Point[] arrayOfp = new org.opencv.core.Point[arrayOfkp.length];
    for(int j =0;j<arrayOfkp.length;j++)
    {
        arrayOfp[j] = new org.opencv.core.Point(0, 0);
        arrayOfp[j].x = (int) arrayOfkp[j].pt.x;
        arrayOfp[j].y = (int) arrayOfkp[j].pt.y;
    }
    prevPts.fromArray(arrayOfp); 
```

# mysql - MySQL：两列的总和

> ID：12561293
> 
> 赞同：1
> 
> 时间：2012-09-24T08:23:57.193
> 
> 标签：mysql

是否可以在 MySQL 结构中创建一个自动汇总其他两列的列？

因此，如果我有一张名为`TABLE`：

```
Column A, Column B, and Column C. 
```

我想`Column C`自动总结`Column A`和`Column B`。

那可能吗？

如果A改变，C改变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T08:25:10.650

可以使用视图或触发器。在大多数情况下，视图是更好的解决方案。

**看法：**

您的表`TABLE`将只有列`A`和`B`。
该视图将如下所示：

```
create or replace view V_TABLE as
select A, B, A + B as C
from TABLE; 
```

如果您需要查询 TABLE，则使用视图而不是表本身。每个查询都将返回正确的 C。

**扳机：**

您的表`TABLE`将包含所有三列`A`和。您将在更新或更改时立即 创建触发器。`B``C`
`A``B``C``A``B`

此答案假定在您的情况下，直接在您的应用程序中计算该值是不可行的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:25:33.000

最好的方法是在将记录插入数据库之前计算应用程序级别的记录。

# android - 在 gridview 适配器中，getView(position == 0) 在加载器中的 setImageBitmap() 被调用太多次以测量布局

> ID：12561295
> 
> 赞同：23
> 
> 时间：2012-09-24T08:24:10.007
> 
> 标签：android, android-view, android-gridview

我有一个`GridView`用于显示一些图标的。

在我从 Android 开发人员网站上阅读此[高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)之前，我直接在`getView()`适配器的本地路径中解码位图，如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {
      ...
      ImageView icon = ...... (from getTag() of convertView)
      icon.setImageBitmap(BitmapUtil.decode(iconPath));
      ...
} 
```

这种方式无论如何都很好，我称之为[直接模式]，`getView()`方法的输出日志应该是：

```
getView(0)   // measure kid's layout.
getView(0)
getView(1)
getView(2)
...
getView(n)       // when scrolling gridview.
getView(n+1)
...
getView(n+3)    // scrolling again.
getView(n+4)
... 
```

然后我尝试将代码更改为[有效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)一文中提到的[加载器模式] ，如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {
      ...
      ImageView icon = ...... (from getTag() of convertView)
      loadIcon(icon, iconPath);
      ...
} 
```

在`loadIcon()`：

```
...
final CacheImageLoader loader = new CacheImageLoader(getActivity(), imageView, imageUrl, savePath);
final AsyncDrawable asyncDrawable = new AsyncDrawable(getResources(), placeHolderBitmap, loader);
imageView.setImageDrawable(asyncDrawable); 
```

在 Loader 的监听器中：

```
@Override
public void onLoadComplete(Loader<Bitmap> arg0, Bitmap arg1) {
    ...
    ImageView imageView = imageViewReference.get();
    if (result != null && imageView != null) {
        imageView.setImageBitmap(result);
    }
} 
```

基本上，它与训练代码相同，实际上，这种方式也可以正常工作。但是，我发现了一些不同的地方，在这种模式下`getView()`，适配器中的方法被调用了太多次，但是，这些对这个方法的重复调用总是使用“位置”参数== 0，这意味着`etView(0, X, X)`重复调用 g。

```
getView(0)     // measure kid's layout.
getView(0)
getView(1)
getView(2)
...    
getView(0)     // loader completed then imageView.setImageBitmap(result); 
getView(0)     // same as above
getView(0)
getView(0)
...
getView(n)     // when scrolling gridview.
getView(n+1)
getView(n+2)
getView(0)     // loader completed then imageView.setImageBitmap(result); 
getView(0)     // same as above
getView(0)
...
getView(n+3)   // scrolling again.
getView(n+4)
getView(0)     // loader completed then imageView.setImageBitmap(result); 
getView(0)     // same as above
getView(0) 
```

这不好，因为我在`getView()`. 我检查了源代码，发现它们最初是由**`imageView.setImageBitmap(result)`**loader 的 `onLoadComplete`方法调用的，并且在`ImageView`：

```
 /**
 * Sets a drawable as the content of this ImageView.
 * 
 * @param drawable The drawable to set
 */
public void setImageDrawable(Drawable drawable) {
        ...

        int oldWidth = mDrawableWidth;
        int oldHeight = mDrawableHeight;

        updateDrawable(drawable);

        if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {
            requestLayout();
        }
        invalidate();
    }
} 
```

这里**`requestLayout()`**是 View 的方法，总是在 View.class 中的 [Direct Mode] 或 [Loader Mode] 中执行：

```
public void requestLayout() {
    mPrivateFlags |= FORCE_LAYOUT;
    mPrivateFlags |= INVALIDATED;

    if (mLayoutParams != null) {
        mLayoutParams.onResolveLayoutDirection(getResolvedLayoutDirection());
    }

    if (mParent != null && !mParent.isLayoutRequested()) {
        mParent.requestLayout();
    }
} 
```

但是不同的是：在[直接模式]中， `mParent.requestLayout()`调用一次，但是在[加载器模式]中，每次我调用时**`imageView.setImageBitmap(result);`**， `mParent.requestLayout()`都会调用，这意味着`mParent.isLayoutRequested()`返回`false`，并且`mParent.requestLayout();`会`GridView`通过调用来测量其孩子的布局`obtainView()`给第一个孩子，然后导致`getView(0, X, X)`：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    ...
    mItemCount = mAdapter == null ? 0 : mAdapter.getCount();
    final int count = mItemCount;
    if (count > 0) {
        final View child = obtainView(0, mIsScrap);
    ... 
```

* * *

所以，我的**问题**是：如果我使用 [loader mode]为什么要`mParent.isLayoutRequested()`返回？`false`还是只是正常情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-09T11:32:26.013

`isLayoutRequested`只是在那里告诉您布局是否已经为此挂起`View`。也就是说， after`requestLayout`被调用，`isLayoutRequested`将返回 true 直到下一个布局传递完成。此签入的唯一原因`requestLayout`是避免`requestLayout`在父级无论如何都要进行布局时重复调用它。`isLayoutRequested`这里是一个红鲱鱼：这不是`onMeasure`被反复调用的原因。

根本问题是`ImageView`每当您更改其可绘制对象时都会请求新布局。这是必要的，原因有两个：-

1.  `adjustViewBounds`如果已设置，ImageView 的大小可能取决于可绘制对象的大小。这可能反过来影响其他视图的大小，具体取决于布局：`ImageView`它本身没有足够的信息来了解。
2.  `ImageView.onMeasure`负责`ImageView`根据缩放模式计算可绘制对象的大小必须调整多少以适应 的边界。如果新的drawable与旧的drawable大小不同，则`ImageView` **必须**再次测量以重新计算所需的缩放比例。

`Bitmap`您只能通过保留加载程序返回的 s的本地缓存来解决加载程序过多的问题。`Bitmap`如果您知道没有那么多，或者只有*n 个*最近使用的缓存，缓存可能包含所有s。在您的`getView`中，首先检查`Bitmap`缓存中是否存在该项目的 ，如果存在，则返回一个`ImageView`已设置的`Bitmap`。只有当它不在缓存中时，您才需要使用加载器。

注意：如果底层数据可以更改，您现在需要确保在调用或通知`invalidate`的同时使缓存无效。[我在我的应用程序中使用了一些自制代码来实现这一点，它对我来说效果很好，但是 Square 的好人有一个名为Picasso](http://square.github.io/picasso/)的开源库，如果你愿意，可以为你完成所有艰苦的工作。`GridView``ContentResolver`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:14:55.277

这是正常的行为，android 可以多次调用同一位置的 getView。开发人员仅在需要时才能在 getView 中获取/设置缩略图（即，如果未设置缩略图或缩略图路径发生更改）。在其他情况下，只需返回 convertView，我们将其作为 getView 中的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T12:55:05.260

我有同样的问题。Grid 总是在测量它的第一个孩子，即使我在 30 的位置。
我只是通过在 getView 顶部添加此检查来绕过整个 getView 代码：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // Patch for multiple getView for position 0
    if(convertView!=null && position==0 && viewGrid.getFirstVisiblePosition()>1) return convertView; 
```

这不会停止调用 getView，但至少不会运行文本、图像和布局更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T20:43:52.057

尝试在任何引用高度的地方调整您的 xml 布局，因为 android 每次都会进行测量并重新绘制单元格。尝试在 listview match_parent 和行上的单元格上使用一个精确的高度。对不起我的英语不好。

# python - 如何在 wxPython 中将 ListCtrl 放在 ListBook 中？

> ID：12561297
> 
> 赞同：0
> 
> 时间：2012-09-24T08:24:23.953
> 
> 标签：python, user-interface, wxpython, wxwidgets

我是 wxPython 的新手。

我可以构建一个 ListCtrl(a Demo of wxPython)(TestVirtualList.py)，

```
import  wx
import sys

#----------------------------------------------------------------------

class TestVirtualList(wx.ListCtrl):
    def __init__(self, parent, log):
        wx.ListCtrl.__init__(
            self, parent, -1, 
            style=wx.LC_REPORT|wx.LC_VIRTUAL|wx.LC_HRULES|wx.LC_VRULES
            )

        self.log = log

        self.InsertColumn(0, "First")
        self.InsertColumn(1, "Second")
        self.InsertColumn(2, "Third")
        self.SetColumnWidth(0, 175)
        self.SetColumnWidth(1, 175)
        self.SetColumnWidth(2, 175)

        self.SetItemCount(100)

        self.attr1 = wx.ListItemAttr()
        self.attr1.SetBackgroundColour("yellow")

        self.attr2 = wx.ListItemAttr()
        self.attr2.SetBackgroundColour("light blue")

        self.Bind(wx.EVT_LIST_ITEM_SELECTED, self.OnItemSelected)
        self.Bind(wx.EVT_LIST_ITEM_ACTIVATED, self.OnItemActivated)
        self.Bind(wx.EVT_LIST_ITEM_DESELECTED, self.OnItemDeselected)

    def OnItemSelected(self, event):
        self.currentItem = event.m_itemIndex
        self.log.write('OnItemSelected: "%s", "%s", "%s", "%s"\n' %
                           (self.currentItem,
                            self.GetItemText(self.currentItem),
                            self.getColumnText(self.currentItem, 1),
                            self.getColumnText(self.currentItem, 2)))

    def OnItemActivated(self, event):
        self.currentItem = event.m_itemIndex
        self.log.write("OnItemActivated: %s\nTopItem: %s\n" %
                           (self.GetItemText(self.currentItem), self.GetTopItem()))

    def getColumnText(self, index, col):
        item = self.GetItem(index, col)
        return item.GetText()

    def OnItemDeselected(self, evt):
        self.log.write("OnItemDeselected: %s" % evt.m_itemIndex)

    def OnGetItemText(self, item, col):
        return "Item %d, column %d" % (item, col)

class TestVirtualListPanel(wx.Panel):
    def __init__(self, parent, log):
        wx.Panel.__init__(self, parent, -1, style=wx.WANTS_CHARS)

        self.log = log
        sizer = wx.BoxSizer(wx.VERTICAL)

        if wx.Platform == "__WXMAC__" and \
               hasattr(wx.GetApp().GetTopWindow(), "LoadDemo"):
            self.useNative = wx.CheckBox(self, -1, "Use native listctrl")
            self.useNative.SetValue( 
                not wx.SystemOptions.GetOptionInt("mac.listctrl.always_use_generic") )
            self.Bind(wx.EVT_CHECKBOX, self.OnUseNative, self.useNative)
            sizer.Add(self.useNative, 0, wx.ALL | wx.ALIGN_RIGHT, 4)

        self.list = TestVirtualList(self, self.log)
        sizer.Add(self.list, 1, wx.EXPAND)

        self.SetSizer(sizer)
        self.SetAutoLayout(True)

    def OnUseNative(self, event):
        wx.SystemOptions.SetOptionInt("mac.listctrl.always_use_generic", not event.IsChecked())
        wx.GetApp().GetTopWindow().LoadDemo("ListCtrl_virtual")

#----------------------------------------------------------------------

if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    win = wx.Frame(parent = None, title = 'Simple Editor', size = (600, 400))
    log = sys.stdout
    bkg = TestVirtualListPanel(win, log)
    app.SetTopWindow(win)
    win.Show()
    app.MainLoop()
#---------------------------------------------------------------------- 
```

我可以构建一个 ListBook(TestLB.py)，

```
import wx
import sys

colourList = [ "Aquamarine", "Black", "Blue", "Blue Violet", "Brown", "Cadet Blue",
               "Coral", "Cornflower Blue", "Cyan", "Dark Grey", "Dark Green",
               "Dark Olive Green",
               ]

#----------------------------------------------------------------------------

class TestLB(wx.Listbook):
    def __init__(self, parent, id, log):
        wx.Listbook.__init__(self, parent, id, style=
                            wx.BK_DEFAULT
                            #wx.BK_TOP
                            #wx.BK_BOTTOM
                            #wx.BK_LEFT
                            #wx.BK_RIGHT
                            )
        self.log = log

        # make an image list using the LBXX images
        il = wx.ImageList(32, 32)
        tsize = (32, 32)
        for x in range(12):
            bmp = wx.ArtProvider.GetBitmap(wx.ART_NEW, wx.ART_TOOLBAR, tsize)
            il.Add(bmp)
        self.AssignImageList(il)

        # Now make a bunch of panels for the list book
        first = True
        imID = 0
        for colour in colourList:
            win = self.makeColorPanel(colour)
            self.AddPage(win, colour, imageId=imID)
            imID += 1
            if imID == il.GetImageCount(): imID = 0
            if first:
                st = wx.StaticText(win, -1,
                          "I want the LISTCRL to show here,\n"
                          "This is the LISTCTRL %d, how can I do this???" % (imID),
                          wx.Point(10, 10))
                first = True

        self.Bind(wx.EVT_LISTBOOK_PAGE_CHANGED, self.OnPageChanged)
        self.Bind(wx.EVT_LISTBOOK_PAGE_CHANGING, self.OnPageChanging)

    def makeColorPanel(self, color):
        p = wx.Panel(self, -1)
        return p

    def OnPageChanged(self, event):
        old = event.GetOldSelection()
        new = event.GetSelection()
        sel = self.GetSelection()
        self.log.write('OnPageChanged,  old:%d, new:%d, sel:%d\n' % (old, new, sel))
        event.Skip()

    def OnPageChanging(self, event):
        old = event.GetOldSelection()
        new = event.GetSelection()
        sel = self.GetSelection()
        self.log.write('OnPageChanging, old:%d, new:%d, sel:%d\n' % (old, new, sel))
        event.Skip()

#----------------------------------------------------------------------------

if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    win = wx.Frame(parent = None, title = 'Simple Editor', size = (600, 400))
    log = sys.stdout
    booklist = TestLB(win, -1, log)
    app.SetTopWindow(win)
    win.Show()
    app.MainLoop() 
```

现在我想把 ListCtrls 放在 ListBook 的每一页，我该怎么做呢？

我试图修改`OnPageChanged()`TestLB.py中的函数：

```
def OnPageChanged(self, event):
    old = event.GetOldSelection()
    new = event.GetSelection()
    sel = self.GetSelection()
    self.log.write('OnPageChanged,  old:%d, new:%d, sel:%d\n' % (old, new, sel))

    win = self.makePanel()
    sizer = wx.BoxSizer(wx.VERTICAL)

    object_list = ObjectList(self, self.log)
    sizer.Add(object_list, 1, wx.EXPAND)

    win.SetSizer(sizer)
    self.SetAutoLayout(True)
    self.AddPage(win, bucketList[new], imageId=new)

    event.Skip() 
```

bucketList 是 a `list`，每个元素都是 a `string`。但它没有按预期工作。ListCtrl 没有显示在 Panel（ListBook 的右侧）上，而是显示在整个 ListBook 上。那么我怎样才能让它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:48:58.637

如果您想动态添加页面内容，您可以这样做，但通常在构建`AddPage()`后立即调用会简单得多。`wxListbook`也就是说，实际上不需要处理任何事件，只需在创建书籍控件本身时创建并添加所有页面（它们只是任意窗口）。

另外，我不知道您的`makePanel`功能在哪里，但您需要创建以书本身为父的页面。

# git - 使用https时如何通过防火墙访问Github玩中间人？

> ID：12561299
> 
> 赞同：4
> 
> 时间：2012-09-24T08:24:33.963
> 
> 标签：git, https, proxy, github, firewall

我需要访问 Github 进行读写访问。早些时候我只是使用了普通的 http 协议，它工作得很好。但是今天这似乎不再起作用了。

我的问题：我在防火墙后面，只有 http 访问是可能的。https 访问似乎相当棘手，因为防火墙充当中间人：它解密来自/到 Internet 的所有 SSL 流量，并使用自己的用户证书再次对其进行加密。可以从已安装的 Web 浏览器中提取此证书。

在这些条件下，有没有办法建立与 GitHub 的工作连接？如果是，怎么做？

亲切的问候，马库斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T06:59:14.497

最后通过设置使其与https一起使用，`git config --global http.sslVerify false`因此公司证书被忽略。

# c# - 获取 C# 中 IDL 中定义的方法的真实名称

> ID：12561300
> 
> 赞同：1
> 
> 时间：2012-09-24T08:24:39.043
> 
> 标签：c#, reflection, com, idl, enumerator

我们有 IDL 项目，并且定义了 Enumeration 接口。它具有 ID = DISPID_NEWENUM 的属性（支持 for-each 等）。

由此我们生成互操作 dll。当我使用反射获取该接口的所有方法时，该方法将替换为 GetEnumerator 方法。

我可以通过反射以某种方式获得方法的真实名称（用 IDL 编写）吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:51:16.940

您可以通过检索`TypeInfo`您的类型的实例并读取标有 DISPID_NEWENUM dispid 的方法名称来实现。这是一个例子：

```
 using System.Runtime.InteropServices;
  using System.Runtime.InteropServices.ComTypes;

  var tiPtr = Marshal.GetITypeInfoForType(typeof (IMyInterface));
  var ti = (ITypeInfo)Marshal.GetObjectForIUnknown(tiPtr);

  string[] names = new string[1];
  int cnt;
  ti.GetNames(-4, names, 1, out cnt); // -4 = DISPID_NEWENUM
  // string[0] == "_NewEnum" 
```

`ITypeInfo`使您可以访问该类型的所有元数据，例如您可以阅读成员文档（如果在类型库中可用）等。

# c++ - 为什么在linux上物理内存不断增加而虚拟内存大小会在长时间后增加一点

> ID：12561303
> 
> 赞同：1
> 
> 时间：2012-09-24T08:24:53.167
> 
> 标签：c++, linux, memory-leaks, virtual-memory

程序写在`C++`on上`X86_64 Linux 2.6.32.12`，有两种情况，一种情况会为每个注入的文件生成一个文件，并通过发送出去`UDP(Version A)`；而另一种情况不会生成文件，直接通过 . 发送注入的文件`UDP(Version B)`。

===============版本A统计图============================ [http://i .stack.imgur.com/8bxI5.png](https://i.stack.imgur.com/8bxI5.png) ![http://i.stack.imgur.com/8bxI5.png](../Images/5a9bea3d31a95d45b2ee0aeceaea2017.png)

================VersionB 静态图=========================== [http:// i.stack.imgur.com/wEnKc.png](https://i.stack.imgur.com/wEnKc.png) ![http://i.stack.imgur.com/wEnKc.png](../Images/5cb1473b5070536db48325941decf54b.png)

我已经使用`valgrind`验证了这两种情况，报告相同，没有看到任何内存泄漏。这是由linux内核内存映射引起的吗？测试机有`64G`内存。这是`memory leak`吗？

更新信息：

在 中`Version A`，我们使用`UNIX socket`将原始文件内容发送到另一个应用程序，然后接收处理结果生成所需的文件。如图所示，物理内存将增加。我试过另一种情况，不通过Unix套接字发送文件，使用`system`函数，调用另一个应用程序生成需要的文件，显示内存不会增加。似乎新生成的文件不是问题，它是由 Unix 套接字引起的。我们使用套接字池，我使用`lsof`，没有打开额外的套接字。难道`Unix socket`会占用内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:35:45.343

我猜想版本 A 正在为文件内容分配内存，并且内存管理器在释放内存时不会将内存返回给系统（因为它正确地知道内存将被重用）。

我不会担心，如果内存有压力，内核会重新使用内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:39:48.370

您可能会遇到内存碎片，这会阻止将内存块返回给操作系统。

# android - 在两个不同的活动中创建警报 - Android

> ID：12561305
> 
> 赞同：0
> 
> 时间：2012-09-24T08:24:57.693
> 
> 标签：android, mobile

我正在尝试创建一个按钮，当按下该按钮时，它会自动在移动设备中创建一个警报，该警报设置为活动早期指定的某个时间。

即，用户使用 TimePickerDialog 选择他们想要醒来的时间，“创建闹钟”按钮获取用户“创建”的日历对象并为该时间设置闹钟。

互联网上的很多例子展示了如何在一个单独的活动中做到这一点，但我希望找到一种方法来做到这一点，而无需创建一个新的活动。

有没有办法做到这一点，还是我不得不创建一个新活动？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:46:32.323

您绝对可以在同一活动中*设置警报。*但我猜这不是你要问的。如果您希望警报触发某些代码运行，即使您的应用程序不在前台，那么此代码也需要在[接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)中，而不是在活动中。活动仅在它们处于前台时运行。当您提到使用“单独活动”的示例时，您实际上是指接收者吗？

因此，要回答我认为您要问的问题，设置警报的代码将在活动类中，而在警报响起时运行的代码将在接收者类中。

# youtube-api - 未捕获的异常'Zend_Gdata_App_HttpException

> ID：12561307
> 
> 赞同：2
> 
> 时间：2012-09-24T08:25:02.363
> 
> 标签：youtube-api, zend-gdata

这是我的代码。

// 实例化父对象

```
 parent::__construct(false, 'Youtube Upload');
    set_include_path(TEMPLATEPATH . '/inc/');
    require_once ( 'Zend/Loader.php');
    Zend_Loader::loadClass('Zend_Gdata_YouTube');
    Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

    $authenticationURL = 'http://www.google.com/accounts/ClientLogin';

    // set video params to authenticate user
    $this->httpClient = Zend_Gdata_ClientLogin::getHttpClient(
            $username = $this->username,
            $password = $this->password,
            $service = 'youtube', 
            $client = null, 
            $source = 'youtubeAPi',
            $loginToken = null,
            $loginCaptcha = null, 
            $authenticationURL
    );

$yt = new Zend_Gdata_YouTube($youtube->httpClient, '', '', $youtube->api_key);
$video = new Zend_Gdata_YouTube_VideoEntry();
$date = md5(strtotime("now") . rand());
$video->setVideoTitle("{$_POST['title']}");
$video->setVideoDescription("{$_POST['description']}");
// $video->setVideoPrivate();
$video->setVideoCategory("{$_POST['category']}");
$video->SetVideoTags("{$_POST['tags']}");

$handler_url = 'https://gdata.youtube.com/action/GetUploadToken';
$token_array = $yt->getFormUploadToken($video, $handler_url);
$token = $token_array['token'];
$post_url = $token_array['url'];
$next_url = 'https://bazaar.me/orbit/youtube/'; 
```

我认为错误在这一行 $authenticationURL = 'http://www.google.com/accounts/ClientLogin'; 它应该是[https://www.google.com/accounts/ClientLogin](https://www.google.com/accounts/ClientLogin)但如果我将其更改为“http”它不会显示错误但其他功能不起作用并显示此错误。

```
Fatal error: Uncaught exception 'Zend_Gdata_App_HttpException' with message 'Expected response code 200, got 401 
```

# ssas - 多个日期字段的时间维度名称

> ID：12561313
> 
> 赞同：0
> 
> 时间：2012-09-24T08:25:13.680
> 
> 标签：ssas, pivot-table

我有一个时间维度（名为 Time），服务器维度类型，它与事实表的**TransactionDate**字段相关（在 DIMENSION USAGE 中） 。该维度在维度使用窗口中被命名为**时间（交易日期） 。**此外，我在此窗口中创建了另外两个维度以指向事实表中的其他日期字段：**DueDate**（命名为**Time (Expiration date)**和**DocumentDate**（命名为**Time (Document date)**）。问题是如果我从Excel 数据透视表，第一个维度正确标识为名称**时间 - 日期事务**但是另外两个用相同的名称标识，并且不可能知道哪个字段时间是相关的（无论是**DueDate**还是**DocumentDate**）。这三个维度是相同的，唯一的区别是分配的名称和它们相关的字段。有谁知道如何从 Excel 中正确识别它们以便区分它们？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:23:24.537

在“维度使用”选项卡上，您添加了 DueDate 和 DocumentDate，您可以将其重命名为您想要的任何名称。这是 SSAS 处理角色扮演维度的功能。

# asp.net - “实现页面方法 asp.net 的最佳方式”

> ID：12561322
> 
> 赞同：0
> 
> 时间：2012-09-24T08:25:55.930
> 
> 标签：asp.net

> 块引用

我想最好的*页面覆盖方法*，我们可以在这个页面方法中使用什么样的数据。任何机构都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:29:41.803

PageMethods 是代码后面装饰有`[WebMethod]`和`[ScriptMethod]`属性的静态方法（实际上，`[ScriptMethod]`如果您不使用由 ASP.NET 生成的 jjavascript 代理来调用 PageMethod，则不需要该属性 - 请参阅下面的答案以获取有关调用的更多信息页面方法）。它们可以将任意复杂的 .NET 对象作为输入和输出。他们使用 JSON 作为序列化机制。

让我们以 WebForm 的代码隐藏中定义的 PageMethod 为例：

```
[WebMethod]
[ScriptMethod]
public static User[] FindUsers(User criteria)
{ 
    ... do some filtering on the criteria and return a User array with the results
} 
```

User 类可能如下所示：

```
public class User
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

在客户端，您可以使用内置的 Microsoft AJAX 框架调用此 PageMethod，该框架将自动生成一个类型化的 javascript 代理来调用 PageMethod：

```
var criteria = { FirstName: 'john', LastName: 'smith' };
PageMethods.FindUsers(criteria, function(users) {
    // success => you could directly use the "users" variable here
    // that will represent the result returned by your page method
    // for example
    for (var i = 0; i < users.length; i++) {
        alert(users[i].FirstName);
    }
}, function() {
    // failure
}); 
```

为了生成此代理，必须使用该`[ScriptMethod]`属性修饰 PageMethod。

作为使用自动生成的 javascript 代理的替代方法，您还可以使用 jQuery 来调用 PageMethod：

```
var criteria = { FirstName: 'john', LastName: 'smith' };
$.ajax({
    type: 'POST',
    url: 'PageName.aspx/FindUsers',
    data: JSON.stringify(criteria: criteria),
    contentType: 'application/json; charset=utf-8',
    success: function(result) {
        // success => you need to use "result.d" to access the actual object 
        // that was returned by the PageMethod
        var users = result.d;
        for (var i = 0; i < users.length; i++) {
            alert(users[i].FirstName);
        }
    },
    error: function() {
        // failure
    }
}); 
```

如果在不使用代理的情况下直接使用 javascript 调用 PageMethod，则不需要使用`[ScriptMethod]`属性装饰 PageMethod，因为我们不关心此代理，因为我们不使用它。

# javascript - 数据表单个列过滤（选择标签）：使用精确匹配

> ID：12561323
> 
> 赞同：2
> 
> 时间：2012-09-24T08:26:17.880
> 
> 标签：javascript, jquery, datatables, filtering, exact-match

我正在使用数据表 1.9.4 和列过滤插件。它就像一个魅力，除了当我使用“选择”标签进行列过滤时，过滤器不会完全匹配。它使用通配符搜索，这是我不想要的。我认为使用选择元素而不是文本输入可以解决问题，但事实并非如此。

当我搜索**'Semester - I'**时，它应该只显示 'Semester - I' 结果。但它也显示**“学期 - II”**和**“学期 - III”**匹配，因为过滤器不寻找精确匹配。

我尝试[了 jQuery DataTable ColumnFilter 插件。“选择”过滤器样式可以支持精确匹配吗？](https://stackoverflow.com/questions/9520423/jquery-datatable-columnfilter-plugin-can-the-select-filter-style-support-exac)那还有[http://code.google.com/p/jquery-datatables-column-filter/issues/detail?id=11](http://code.google.com/p/jquery-datatables-column-filter/issues/detail?id=11)那。但是没有一个能解决我的问题。

**JS代码**

```
$('#semester').dataTable({
                    "sPaginationType": "full_numbers"
                })
                .columnFilter({
                    aoColumns: [ { type: "text"},
                             { type: "text" },
                             { type: "select", values: [ 'Year - I', 'Year - II', 'Year - III', 'Semester - I', 'Semester - II', 'Semester - III', 'Semester - IV', 'Semester - V', 'Semester - VI', 'Semester - VII  ( Integrated )', 'Semester - VIII  ( Integrated )', 'Semester - IX  ( Integrated )', 'Semester - X  ( Integrated )']},
                             { type: "text" },
                             null
                        ]

                }); 
```

还有其他选择吗？提前致谢

**更新**

我也尝试了以下方法，但这也无济于事：

```
if (bRegex)
      oTable.fnFilter($(this).val(), iColumn, bRegex);
else
      oTable.fnFilter(unescape("^"+$(this).val()+"$"), iColumn, true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:12:15.123

瞧！通过一系列的反复试验，我自己弄清楚了。对于那些遇到类似问题的人，这里是解决方案：

在插件文件里面`select.change(function () {})`，改变这个：

```
if (bRegex)
  oTable.fnFilter($(this).val(), iColumn, bRegex);
else
  oTable.fnFilter(unescape($(this).val()), iColumn); 
```

到

```
if (bRegex)
  oTable.fnFilter($(this).val(), iColumn, bRegex);
else
  oTable.fnFilter(unescape("^"+$(this).val()+"$"), iColumn, true, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:54:03.603

[**DataTable Demo**](http://datatables.net/examples/api/multi_filter.html)中的多重过滤器[](http://datatables.net/examples/api/multi_filter.html)

 **```
var asInitVals = new Array();

$(document).ready(function() {
    var oTable = $('#example').dataTable( {
        "oLanguage": {
            "sSearch": "Search all columns:"
        }
    } );

    $("tfoot input").keyup( function () {
        /* Filter on the column (the index) of this element */
        oTable.fnFilter( this.value, $("tfoot input").index(this) );
    } );

    /*
     * Support functions to provide a little bit of 'user friendlyness' to the textboxes in 
     * the footer
     */
    $("tfoot input").each( function (i) {
        asInitVals[i] = this.value;
    } );

    $("tfoot input").focus( function () {
        if ( this.className == "search_init" )
        {
            this.className = "";
            this.value = "";
        }
    } );

    $("tfoot input").blur( function (i) {
        if ( this.value == "" )
        {
            this.className = "search_init";
            this.value = asInitVals[$("tfoot input").index(this)];
        }
    } );
} ); 
```

**请注意**，在上面的代码中，提供了支持函数以确保最终用户知道正在过滤哪些数据。fnFilter() 是这里主要导入的函数。

```
// after creating the table and getting the table object...

var oTable = $('#some_id').dataTable();

// ...you can use it to get a settings object...

var oSettings = oTable.fnSettings();

// ...then you can do things with the settings object

oSettings.aoPreSearchCols[ iCol ].sSearch = "^\\s*"+'1'+"\\s*$";
oSettings.aoPreSearchCols[ iCol ].bRegex = false;
oSettings.aoPreSearchCols[ iCol ].bSmart= false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T19:35:43.440

我使用了接受的答案，但是如果我更改下拉列表，然后将其更改回默认值，我将不会得到任何结果。我的猜测是它试图对“”进行精确的文本搜索，但什么也没找到。我做了这个修改，它似乎对我有用。

```
if ($(this).val() == "")
    oTable.fnFilter(unescape($(this).val()), iColumn, false, false, false, false);
else {
    if (bRegex)
       oTable.fnFilter($(this).val(), iColumn, bRegex, false, false, false); 
    else
       oTable.fnFilter(unescape("^" + $(this).val() + "$"), iColumn, true, false, false, false); 
    } 
```**

# php - 序列化/反序列化用于存储/检索数据

> ID：12561326
> 
> 赞同：0
> 
> 时间：2012-09-24T08:26:37.560
> 
> 标签：php, mysql, arrays

我是 php 的初学者。
昨晚我完成了我的第一个完整站点脚本
，但我根本没有使用任何 MySQL 数据库，
我曾经序列化以将数据作为数组存储在文件中，
然后当我想检索它时。 . 我简单地将该文件加载到变量中
并对其进行反序列化，使其成为一个包含数据的数组

以这段代码为例：

```
 <?
  //saving
  $data_array = array('name' => 'John','user-name'=>'shotgun','birth'=>'April');
  $data_array=serialize($data_array);
  file_put_contents('data.ser', $data_array);

  //calling back and printing
  file_get_contents('data.ser');
  $data_array=unserialize($data_array);
  print_r($data_array);
  ?> 
```

我知道绝对没有优点。用这种方法
，但有什么缺点。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:34:44.670

除了对硬盘进行 IO 之外，我认为您的方法没有任何缺点。不过，对于更复杂的情况，使用 MySQL 数据库会更好。例如，您无需阅读整个条目列表即可获得所需的条目。如果您不使用数据库而是使用静态文件，则需要将整个文件读入内存，遍历它，直到找到所需的内容，然后关闭它，这是不必要的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:36:24.513

缺点。对于不存储到数据库中：

*   硬盘输入/输出
*   不可搜索
*   如果程序员改变，很难维护

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:36:34.403

一个主要问题是您完全忘记了从服务器运行 PHP 并且您的应用程序必须处理并发连接。

# tomcat - 为什么 Tomcat 关闭时出现 Throw NoClassDefFoundError？

> ID：12561327
> 
> 赞同：5
> 
> 时间：2012-09-24T08:26:40.073
> 
> 标签：tomcat, shutdown

我的项目包括 Apache `commons-* library`。
在 tomcat 关闭时抛出异常，如果运行默认示例则没有异常。

**卡特琳娜出局**：

信息：非法访问：此 Web 应用程序实例已被停止。无法加载 org.apache.log4j.spi.ThrowableInformation。最终的堆栈跟踪是由出于调试目的引发的错误以及尝试终止导致非法访问的线程引起的，并且没有功能影响。

信息：非法访问：此 Web 应用程序实例已被停止。无法加载 org.apache.log4j.spi.ThrowableInformation。最终的堆栈跟踪是由出于调试目的引发的错误以及尝试终止导致非法访问的线程引起的，并且没有功能影响。

```
INFO: Destroying ProtocolHandler ["http-bio-8080"]
Sep 24, 2012 4:00:14 PM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance ses ahas been stopped already.  Could not load org.apache.commons.pool.impl.CursorableLinkedList$Cursor.  The eventual following stack trace is caused by an error thrown for debugging purpos well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.

java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.commons.pool.impl.CursorableLinkedList.cursor(CursorableLinkedList.java:305)
    at org.apache.commons.pool.impl.GenericObjectPool.evict(GenericObjectPool.java:1536)
    at org.apache.commons.pool.impl.GenericObjectPool$Evictor.run(GenericObjectPool.java:1749)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)

Exception in thread "Timer-0" java.lang.NoClassDefFoundError: org/apache/commons/pool/impl/CursorableLinkedList$Cursor
    at org.apache.commons.pool.impl.CursorableLinkedList.cursor(CursorableLinkedList.java:305)
    at org.apache.commons.pool.impl.GenericObjectPool.evict(GenericObjectPool.java:1536)
    at org.apache.commons.pool.impl.GenericObjectPool$Evictor.run(GenericObjectPool.java:1749)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)

Caused by: java.lang.ClassNotFoundException: org.apache.commons.pool.impl.CursorableLinkedList$Cursor
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 5 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-09T15:08:48.750

对我自己来说，这个问题在我停止tomcat，删除扩展的war文件夹并再次启动tomcat后就消失了。

# html - Chrome 不会滚动

> ID：12561328
> 
> 赞同：2
> 
> 时间：2012-09-24T08:26:44.143
> 
> 标签：html, css, google-chrome, scroll

我在 Google Chrome 中遇到了在任何其他网络浏览器中都没有发生的问题。

这是网站： [shop.mischiefshoes.co.nz](http://shop.mischiefshoes.co.nz)

无论我做什么，谷歌浏览器都不会滚动。我试过在网上寻找修复程序，但我似乎找不到任何东西。

尖端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:38:23.933

`position:fixed`这是因为 `div.footer`如果您删除它可以正常工作，并且您可以对其进行一些更改以使滚动和页脚同时固定。

我改变`#bodywrapper { width:1025px;//from 1024px;}`了，它对我有用..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:14:47.570

我怀疑这是因为[jQuery](https://stackoverflow.com/q/4204864/1577396)与 chrome 不兼容，或者可能是因为 Arpit Srivastava 所说的定位。

因为当我放大或缩小页面时，它工作正常。当我将页面恢复到正常状态时，它也可以正常工作。尽管刷新后它不再工作了。

您也可以使用[Zoom](http://www.css3.com/css-zoom/)属性（CSS3）来解决这个问题。只是给`zoom:101%;`你的`body`标签。我希望这会奏效。

# hibernate - 休眠如何根据某些条件映射集合

> ID：12561331
> 
> 赞同：0
> 
> 时间：2012-09-24T08:27:24.800
> 
> 标签：hibernate, mapping

我试图只部分匹配一组，例如在我的 Product.hbm.xml 中，我有一个“recentOrders”，这意味着我只想要最新的订单（按“订单”的时间戳排序）

```
 <set cascade="all-delete-orphan" inverse="true" name="recentOrders" lazy="true"   >        
        <key on-delete="cascade">
            <column name="product_id" not-null="true"/>
        </key>
        <one-to-many class="com.xx.Order"/>
    </set> 
```

我应该使用“subselect”还是“where”的属性？如果是，如何？

顺便说一句，我使用的是hibernate 3.x，hibernate不会添加任何由“subselect”或“where”属性指定的sql子句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:01:04.320

这是一个[很好的解释](http://www.javalobby.org/java/forums/t43955.html)。如果只是一次需要，您可以在 HQL 查询本身中执行此操作。还有另一个选项 - 使用过滤器，请注意它们是为会话设置的，而不是为特定查询设置的。

# c# - 为什么需要无参数构造函数？

> ID：12561333
> 
> 赞同：5
> 
> 时间：2012-09-24T08:27:43.020
> 
> 标签：c#

> **可能重复：**
> [为什么 XML-Serializable 类需要无参数构造函数](https://stackoverflow.com/questions/267724/why-xml-serializable-class-need-a-parameterless-constructor)

我收到如下所述的运行时错误。

> Message=OutlookAddIn1.DeviceRegistrationRequest 无法序列化，因为它没有无参数构造函数。

我非常清楚为什么（在错误消息中说）以及如何解决它（简单地添加空构造函数）。我不清楚的是**为什么**需要它。我找到 [了这个讨论](https://stackoverflow.com/questions/8496366/getting-a-no-parameterless-constructor-defined-error-not-sure-why)，但它主要是关于 MVC，这与我的程序（这是 CRM Dynamics 的控制台客户端）无关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T08:31:44.223

您的类只需要一个无参数构造函数，因为您正在使用的库（听起来像`XmlSerializer`，也许是间接的）期望并使用该构造函数。这确实是一种非常方便的创建对象的方法，因为它允许：

```
object obj = Activator.CreateInstance(type); 
```

用法。

然而！这不是所有序列化程序的固有要求：

*   有些序列化程序不使用*任何*构造函数（还有另一种创建对象的方法，完全跳过构造函数步骤）
*   有序列化程序允许您提供自己的工厂方法来创建新实例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:30:13.477

~~不，这与 MVC 无关~~（对不起，我误读了你的帖子）。它只是关于普通的 C#'py 对象创建。你看，以这个类为例：

```
public class Why {
    public Why(int x, int y) { }
} 
```

当您的对象要被反序列化和构造时，反序列化器如何**知道要传递什么？**他猜不透。因此，框架**要求**可序列化对象**必须**具有无参数构造函数，因此“仅创建”是安全的，并且**您有责任**通过属性使整个状态可设置。

注意：顺便说一下 - 请注意，构造函数*不必是 public*。大多数序列化程序在使用私有无参数构造函数或根本没有构造函数时做得很好，如果它们实现为使用未初始化的对象构造，那么至少在 .Net 完整配置文件中可以从 Reflection 获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:29:01.693

它是必需的，以便对参数化构造函数一无所知的代码可以根据无参数构造函数可用的*约定*来构造您的对象之一。

在反序列化时，需要对象实例，因此反序列化过程将使用此构造函数创建一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T08:30:33.300

用于反序列化以创建实例。如果您想隐藏它，您可以进行私有或内部构造。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T08:30:06.207

现在不要*确切*报告问题的详细信息，但一般来说：

*您的*序列化需要**默认值** `ctor`才能构造您类型的对象。如果你没有它，它就没有办法做到这一点。它无法弄清楚传递给`ctor` **带**参数的正确参数，因此它需要“清除”无参数ctor。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T08:30:55.457

这是因为反序列化器需要能够轻松创建类的实例并用数据填充它。

如果没有无参数构造函数，反序列化器将不得不猜测要发送给构造函数的参数。如果有一个关于构造函数应该具有哪些参数的约定，那么这可能会很好地工作，但最简单的约定是应该有一个没有参数的构造函数。

# objective-c - 在 ios6 中，将 pageViewController 的 gestureRecognizers 委托设置为 viewController 会导致崩溃

> ID：12561336
> 
> 赞同：8
> 
> 时间：2012-09-24T08:27:47.763
> 
> 标签：objective-c, ios, xcode, ios6

这仅在 ios6 中开始发生，但如果您使用页面视图控制器模板开始一个新项目。然后在

```
PCRootViewControlle::viewDidLoad() 
```

将这些行添加到方法的底部。

```
for (UIGestureRecognizer *gR in self.pageViewController.gestureRecognizers)
{
    gR.delegate = self;
} 
```

您需要分配 viewController 使其符合 UIGestureRecognizerDelegate 并实现该方法

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch (UITouch *)touch
{
    return YES;
} 
```

现在，如果您运行应用程序并尝试将页面翻到边界之外，即转到 1 月并尝试返回，那么

*   (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController

返回零。

然后应用程序将崩溃。

ios5没有发生这种情况。我需要将gestureRecognizer 委托分配给我的viewController，因为我并不总是希望pageViewController 处理触摸事件。

有没有其他人经历过这个或指出如果我做错了什么？

非常感谢斯图尔特。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T16:27:16.523

终于找到了解决我的问题的方法，这让我很伤心，所以希望这可以帮助别人。

问题是如果您将 pageViewControllers 委托设置为您的 viewController

```
for (UIGestureRecognizer *gR in self.pageController.view.gestureRecognizers) 
{
    if ([gR isKindOfClass:[UITapGestureRecognizer class]])
    {
        gR.enabled = NO;
    }
    else if ([gR isKindOfClass:[UIPanGestureRecognizer class]])
    {
        gR.delegate = self;
    }
} 
```

然后从返回 nil

```
pageViewController:viewControllerAfterViewController: 
```

会崩溃！！仅在 iOS6 中！！

我的问题是我需要设置gestureRecognisers 的代表，因为在某些情况下我需要拦截panGesture，即由于那里的一些按钮，不允许用户在触摸页面的某些部分时翻页。

解决方案是将逻辑从

```
pageViewController:viewControllerAfterViewController: 
```

进入

```
gestureRecognizer:shouldReceiveTouch: 
```

因为只要我们从中返回 NO，它就不会继续调用

```
pageViewController:viewControllerAfterViewController: 
```

因此无需返回 nil 并崩溃。

但是，这不适用于序列中的第一页和最后一页。例如，在第一页上，您希望允许页面向前而不是向后。所以我考虑查看传入的 GestureRecogniser，将其转换为 PanGesture，然后检查其速度，如果速度表示返回（> 0.0f），则返回 NO。这听起来不错，但速度始终为零。

然后我在 GestureRecognizer 委托上发现了一个非常有用的小函数，名为：

```
gestureRecognizerShouldBegin:gestureRecognizer 
```

这个函数在之后被调用

```
gestureRecognizer:shouldReceiveTouch: 
```

但这次手势的速度与我预期的一样，所以我可以检查速度，如果第一页 > 0.0f 则只返回 YES

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T18:41:12.693

我相信我找到了一个解决方案，它比重构任何现有的 pageViewController 代码（如 noRema 所提到的那样，或者像[这里](https://stackoverflow.com/questions/12565400/uipageviewcontroller-in-ios6/12573631#12573631)所提到的那样搞乱选择器转发）要复杂得多，尽管如果没有这两个解决方案作为参考，我永远不会找到它。

这应该很容易放入任何 UIPageViewController 项目中，只需稍作调整。

要实现，您将代码保持原样；所有现有逻辑都应保持不变，因为这只影响 UIGestureRecognizer 委托行为。覆盖手势委托方法 - (BOOL)gestureRecognizerShouldBegin: 类似于以下内容：

注意：我使用 Apple 的基于页面的应用程序代码作为起点，因此如果条款引起任何混淆`_modelController`，请参阅该代码。`_pageViewController`

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{

    //Make sure we're not trying to turn backward past the first page:
    if ([_modelController indexOfViewController:[_pageViewController.viewControllers objectAtIndex:0]] == 0) {
        if ([(UIPanGestureRecognizer*)gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]] &&
            [(UIPanGestureRecognizer*)gestureRecognizer velocityInView:gestureRecognizer.view].x > 0.0f) {
            NSLog(@"DENIED SWIPE PREVIOUS ON FIRST PAGE");
            return NO;
        }
        if ([(UITapGestureRecognizer*)gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]] &&
            [(UITapGestureRecognizer*)gestureRecognizer locationInView:gestureRecognizer.view].x < self.view.frame.size.width/2) {
            NSLog(@"DENIED TAP PREVIOUS ON FIRST PAGE");
            return NO;
        }
    }

    //Make sure we're not trying to turn forward past the last page:
    int finalVCindexSubtractor;
    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
        // the vc we compare is a different distance from the end based on our orientation:
        finalVCindexSubtractor = 2;
    } else {
        finalVCindexSubtractor = 1;
    }
    if ([_modelController indexOfViewController:[_pageViewController.viewControllers objectAtIndex:0]] == _modelController.pageData.count-finalVCindexSubtractor) {
        if ([(UIPanGestureRecognizer*)gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]] &&
            [(UIPanGestureRecognizer*)gestureRecognizer velocityInView:gestureRecognizer.view].x < 0.0f) {
            NSLog(@"DENIED SWIPE NEXT ON LAST PAGE");
            return NO;
        }
        if ([(UITapGestureRecognizer*)gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]] &&
            [(UITapGestureRecognizer*)gestureRecognizer locationInView:gestureRecognizer.view].x > self.view.frame.size.width/2) {
            NSLog(@"DENIED TAP NEXT ON LAST PAGE");
            return NO;
        }
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T09:35:12.370

在调查 iOS 6 下 UIPageViewController 中的 Pan Gesture 问题时，我注意到它可以在一个手势内多次调用视图控制器方法之前/之后。这在我的特定情况下很糟糕，因为我需要等到动画完成后才能导航到下一页/上一页。因此，我们的方法具有这样的结构：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController {
    if (animationInProgress)
        return nil;
    UIViewController *result = nil;
    //do stuff to init result controller for next/prev page
    if (result)
        animationInProgress = YES;
    return result;
} 
```

方法相同`viewControllerAfterViewController`。

动画结束后，调用 UIPageViewControllerDelegate 的这个方法：

```
- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed {
        animationInProgress = NO;
        //do other stuff to handle finishing animation.
} 
```

由于 PanGesture 被多次调用，然后`viewControllerAfterViewController`另一个方法因此被多次调用，不幸`didFinishAnimating`的是在这种情况下没有调用方法，这导致`animationInProgress`标志设置为`YES`always 并且用户根本无法浏览页面。注意：仅在 iOS 6 中发生。

为了解决这个问题，我们必须以某种方式处理 PanGesture。使用 UIView `gestureRecognizerShouldBegin:gestureRecognizer`（在 iOS 6 中添加）根本没有解决问题，当从 before/after 方法返回 nil 时，将控制器设置为手势的委托会导致崩溃。因此，我们尝试添加逻辑以在 PanGesture 处于`UIGestureRecognizerStateChanged`状态的情况下不调用之前/之后的控制器方法（基于一些测试进行调查，以确定在循环调用方法时手势状态是什么）。

通过添加如下方法：

```
- (BOOL)skipIfPanGestureInProgress {
    BOOL shouldSkip = NO;
    if(pvcPanGestureRecognizer && [pvcPanGestureRecognizer state] == UIGestureRecognizerStateChanged){
        animationInProgress = NO;
        shouldSkip = YES;
    }
    return shouldSkip;
} 
```

之后方法如下所示：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    if([self skipIfPanGestureInProgress]){
        return nil;
    }
    if (animationInProgress)
        return nil;
    UIViewController *result = nil;
    //do stuff to init result controller for next/prev page
    if (result)
        animationInProgress = YES;
    return result;
} 
```

这有助于解决 animationInProgress 标志的循环问题。

希望这对某人有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T17:21:55.640

在导航越界时，我遇到了 UIPageViewController 与 iOS6 崩溃并出现相同错误的相同问题。

上述解决方案都不适合我，但我最终发现将以下行从移动`viewDidLoad`到`viewDidAppear`完全修复它。

```
self.view.gestureRecognizers = self.pageViewController.gestureRecognizers; 
```

# php - 使用 Zend Framework 会话填充 HTML 表单

> ID：12561337
> 
> 赞同：1
> 
> 时间：2012-09-24T08:27:52.087
> 
> 标签：php, forms, zend-framework

我正在尝试使用会话中保存的数据填充 HTML 表单。这是我到目前为止所做的，但它不起作用：

在我的控制器中：

```
 $sessionErrorForm = new Zend_Session_Namespace('errorForm');

      $sessionErrorForm->prenom     = $form['prenom'];

      $this->_redirect('/inscription'); 
```

在我看来，如果会话存在，我需要在值字段中显示一些内容：

```
 <div><input type="text" name="prenom" value="<?php if (isset($sessionErrorForm->prenom)): echo $sessionErrorForm->prenom; endif;?>" title="Pr&#233;nom *"/> 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:14:42.690

行。[和这里](https://stackoverflow.com/questions/12562128/accessibility-of-a-session-in-a-view/12562662#comment16922516_12562662)一样。您总是必须先实例化您的 Session 才能访问它。您可以在控制器中声明它：

```
$session = new Zend_Session_Namespace('errorForm');
$this->view->sessionErrorForm = $session; 
```

并在您的视图中访问它`$this->sessionErrorForm`：

```
<div><input type="text" name="prenom" value="<?php if (isset($this->sessionErrorForm->prenom)): echo $this->sessionErrorForm->prenom; endif;?>" title="Pr&#233;nom *"/> 
```

或者你可以在你的视图中声明它并像下面这样使用它：

```
<?php $sessionErrorForm = new Zend_Session_Namespace('errorForm'); ?>    
<div><input type="text" name="prenom" value="<?php if (isset($sessionErrorForm->prenom)): echo $sessionErrorForm->prenom; endif;?>" title="Pr&#233;nom *"/> 
```

但是，如果您在之前的请求中写入会话，如果您之前没有在范围内声明它，您总是必须创建对会话的新引用。

# php - Facebook 身份验证注销 - 无法从 FB 注销

> ID：12561339
> 
> 赞同：0
> 
> 时间：2012-09-24T08:27:58.387
> 
> 标签：php, facebook-authentication

我知道有很多关于此类问题的帖子，但我无法为自己找到解决方案。

在 SimpleMachines 论坛 (SMF) 中，我通过 Facebook 集成了登录，它工作正常。

另一方面，我不能强制系统将我从 Facebook 和 SMF 注销操作一起注销。

我试过了：

1.  $facebook->destroySession();
2.  使用适当的参数将最终用户重定向到[https://www.facebook.com/logout.php](https://www.facebook.com/logout.php) ?...
3.  还尝试使用 setcookie('fbs_'.$facebook->getAppId(),

...等，但最终用户仍然登录到 Facebook。

你能给我一些建议吗？

更新：在 CBroe 建议的更改之后，这是我的代码现在的样子：

```
 require_once("facebook.php");

    $config = array();
    $config['appId'] = '1XXXXXXXXXXXX50';
    $config['secret'] = '6XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX2';
    $config['fileUpload'] = false;
    $facebook = new Facebook($config);
    $user = $facebook->getUser();

    $logoutUrl = $facebook->getLogoutUrl();
    //session_destroy();
$facebook->destroySession();
    header('location:https://www.facebook.com/logout.php?access_token='.$config['appId'].'&confirm=1&next=www.mydomain.com'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:34:34.207

> 我试过了：
> 
> 1.  $facebook->destroySession();
>     
>     
> 2.  `https://www.facebook.com/logout.php?...`使用适当的参数将最终用户重定向到

销毁会话后，您的 Facebook 类实例中不再设置活动用户访问令牌 - 但这是构建有效注销 URL 所必需的。

所以尝试颠倒这些步骤——首先构建注销 URL，然后销毁会话，然后重定向到注销 URL。

# xpath - 如何从元素内的属性中提取数据

> ID：12561341
> 
> 赞同：2
> 
> 时间：2012-09-24T08:28:08.780
> 
> 标签：xpath, scrapy

在我尝试用scrapy编写蜘蛛时，我试图从元素中提取数据，就像你对href一样，`<tr><td><a href = "www.somelink.com">`所以`hxs.select('//tr/td/a/@href').extract()` 我们在这里做的是获取分配给href的数据

我有一个 span 元素，它有一个类和一个数据属性 `<span class="classname" data="{...data in here...}">`

但是尝试以下会在scrapy中产生错误，其中我选择了span元素的数据属性，其中span元素类=类名。

`hxs.select('//div/span[@class="classname"]/@data/').extract()`

是否甚至可以从 href 以外的属性中提取数据，如果可以，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:31:34.840

如果您在 之后删除尾部斜杠，它会起作用`@data`吗？

# iphone - 如何在其他类中使用变量中包含的值

> ID：12561344
> 
> 赞同：0
> 
> 时间：2012-09-24T08:28:15.563
> 
> 标签：iphone, objective-c, ios

我有一个 UserDetails 类。我在另一个类 B(TableViewController) 中有一个函数，其中包含 UserDetails 类的对象，如下所示：

```
 -(void)sendData: (UserDetails *) user {

            //some code
      } 
```

现在我在第三类 C (TableViewController) 中有另一个函数，我想在其中使用变量“user”中包含的值。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:31:13.943

在第三个类中，设置 UserDetails 类型的属性。

当您从 B 移动到 C 时（无论是在 prepareForSegue 中还是在您初始化 TVC 并推送它的位置），只需将 UserDetails 对象传递给 C，这样它就有自己的版本。你保持这种方式很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:36:00.660

在您的第三类 C .h 文件中创建一个 UserDetails 对象

```
@property (nonatomic,strong) UserDetails * userObj; 
```

然后在你的课堂上，就在你出席/推你的第三堂课之前，**比如说 thirdClassObj**，这样做

```
thirdClassObj.userObj=user; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:46:34.667

我记得回答过一个类似的[**问题**](https://stackoverflow.com/questions/7636057/can-i-have-a-single-nsmutablearray-in-my-multiple-views-application/7636155#7636155)。根据我的说法，使用[**单例将是最好的方法。**](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)您还可以查看我关于将单例用于全局变量的[**回答。**](https://stackoverflow.com/questions/6065965/how-to-define-a-global-variable-that-can-be-accessed-anywhere-in-my-application/6067515#6067515)
您也可以为此目的使用[**appDelegate 。**](https://stackoverflow.com/questions/338734/iphone-proper-usage-of-application-delegate)但我不会推荐使用 appDelegate。请参阅[**此**](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)进行说明。

# javascript - onbeforeunload 所有浏览器中的无缝行为

> ID：12561345
> 
> 赞同：1
> 
> 时间：2012-09-24T08:28:21.257
> 
> 标签：javascript, jquery, asp.net

在我尝试写这篇文章之前，请放心，我在所有 chrome / firefox 和 IE 中都尝试了 onbeforeunload 事件，它在 IE 和 Firefox 中都可以正常工作，但在 chrome 中失败了。

然而，在一个实例中，我注意到我能够将 ajax 调用异步设置为 false，但这对于跨站点 ajax 调用并不能正常工作。

给出我正在尝试做的事情的背景......我正在尝试使用 jquery 构建一个用于自动化测试的记录和回放 js 引擎，并且我正在使用 $.ajax 进行回调。

你可以在这里找到演示

[http://orgchartasp.net/jtest/ff.swf.html](http://orgchartasp.net/jtest/ff.swf.html)

我正在做的是，捕获客户端上的所有事件并将 onbeforeunload 事件发回服务器，我终于通过在卸载前打开一个模式窗口并在保存后关闭它来成功使用 IE 和 FF。

有没有人真正成功地使用 onbeforeunload 跨浏览器/跨站点，如果是，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:39:21.927

该`onbeforeunload`事件的问题是在当前窗口中将任何内容发布回服务器为时已晚。导致该事件的动作，即浏览器即将加载一个新页面，已经决定了接下来要加载哪个页面。

处理此事件时浏览器的确切行为可能会有所不同，因为它甚至在 HTML5 之前还没有任何标准。

如果您想从事件向服务器发送任何内容，您必须打开一个新窗口并从中发布，或者进行 AJAX 调用。不过，这是一劳永逸的，因为您不能等待任何回应。

我会说你不应该依赖它`onbeforeunload`来可靠地工作，所以你不应该围绕它构建你的架构。

# hypertable - 是否可以将 Hypertable shell 查询的结果保存到文件中？

> ID：12561346
> 
> 赞同：2
> 
> 时间：2012-09-24T08:28:24.083
> 
> 标签：hypertable

我需要一些超表中的数据。我可以使用超表外壳检查数据，并且很好奇是否可以将 HQL 查询的结果通过管道传输到文件中。当结果集很大并且想要格式化它或其他东西时，这对于进一步调查很有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T04:26:50.080

当然：

```
SELECT * FROM table INTO FILE "file.txt"; 
```

您甚至可以压缩文件：

```
SELECT * FROM table INTO FILE "file.txt.gz"; 
```

输入`help select`shell，您将获得更多信息。

# php - php preg匹配javascript中的一些url

> ID：12561347
> 
> 赞同：0
> 
> 时间：2012-09-24T08:28:26.660
> 
> 标签：php, regex, preg-match

有一些链接，一些在 javascript 代码中。如何预匹配那里的网址？（网址可能以 , 或 结尾`.shtml`，所以 `.html`我 认为用单引号将它们正则表达式，但没有返回。）`/``.jsp`

```
$sitelink = "javascript:pre('http://www.domain.com/cotagory/articles/2012/09/23/notice.shtml',%20%,500)";
//$sitelink = "javascript:box('http://www.domain.com/cotagory/articles/2012/09/23/sports/',%18%,500)";
if(strpos($sitelink,'javascript')===true){
    preg_match_all("@'(.*)'@i",$sitelink,$matches);
    var_dump($matches);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:47:04.883

在字符串开头匹配'javascript'的逻辑是错误的；它应该是：

```
strpos($sitelink, 'javascript') === 0 
```

正则表达式也可以更好一点：

```
preg_match("@'([^']*)'@", $sitelink, $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:39:15.320

将 if 条件更改为：

```
if(strpos($sitelink,'javascript') !== false){ 
```

`'javascript'`里面的位置`$sitelink`是`0`不正确的！！！

# php - 选择下拉项时将 CSS 添加到单个表格行？

> ID：12561348
> 
> 赞同：0
> 
> 时间：2012-09-24T08:28:37.237
> 
> 标签：php, html, css, forms, html-table

我想知道实现这一目标的最佳方法。我有一个嵌入在显示订单列表的表格中的表格。我有一个包含三个项目的下拉列表。当用户选择其中一个选项并单击更新时，“待定”“已批准”和“未批准”会更改该单独行的状态。我想要的是整个表格行根据已选择的项目改变颜色。

我知道这可以使用我必须工作的 jQuery 来实现，但我需要它以便根据选项值应用一个类。我可以使用 php 做到这一点吗？并将一个类应用于选项值服务器端，以便当用户刷新页面时，单个表格单元格将保持突出显示？

```
echo '<tr>';
    echo '<td><input type="text" readonly=true name="order_no['.$i.']" value="' . $row['Orderno'] . '"/></td>';
    echo '<td><input type="text" readonly=true name="order_date['.$i.']" value="' . $row['Orderdate'] . '"/></td>';
    echo '<td><input type="text" readonly=true name="order_ordered_by['.$i.']" value="' . $row['Orderedby'] . '"/></td>';
    echo '<td><input type="text" readonly=true name="order_supplier['.$i.']" value="' . $row['Supplier'] . '"/></td>';
    echo '<td><input type="text" readonly=true name="order_total_price['.$i.']" value="' . $row['totalprice'] . '"/></td>';
    echo '<td><input type="text" readonly=true name="order_requested_by['.$i.']" value="' . $row['requestedby'] . '"/></td>';
    echo '<td>';
    echo '<select name="order_status['.$i.']" id="id" onchange="showUser(this.value)" >';
    echo '<option value = "Pending"   name="order_status['.$i.']" class = "pending"' . ($row['status'] == 'Pending' ? ' selected=selected' : '') . '>Pending</option>';
    echo '<option value = "Approved"  name="order_status['.$i.']" class = "approved"' . ($row['status'] == 'Approved' ? ' selected=selected' : '') . '>Approved</option>';
    echo '<option value = "Disapproved" name="order_status['.$i.']" class ="disapproved"' . ($row['status'] == 'Disapproved' ? ' selected=selected' : '') . '>Disapproved</option>';
    echo '</select>';
    echo '<td><input type="checkbox" name="order_selected['.$i.']"/></td>';
    echo '</td>';
    echo '</tr>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:39:10.067

您可以使用状态作为类名。

```
<?php echo '<tr class="' . $status . '"><td>...</td></tr>'; ?> 
```

`$status`您提交的选择框的值在哪里。

编辑：

为了方便起见，我更新了您的代码：

```
<tr class="<?php echo $status; ?>">
    <td>
        <input type="text" readonly=true name="order_no[<?php echo $i; ?>]" value="<?php echo $row['Orderno']; ?>"/>
    </td>
    <td>
        <input type="text" readonly=true name="order_date[<?php echo $i; ?>]" value="<?php echo $row['Orderdate']; ?>"/>
    </td>
    <td>
        <input type="text" readonly=true name="order_ordered_by[<?php echo $i; ?>]" value="<?php echo $row['Orderedby']; ?>"/>
    </td>
    <td>
        <input type="text" readonly=true name="order_supplier[<?php echo $i; ?>]" value="<?php echo $row['Supplier']; ?>"/>
    </td>
    <td>
        <input type="text" readonly=true name="order_total_price[<?php echo $i; ?>]" value="<?php echo $row['totalprice']; ?>"/>
    </td>
    <td>
        <input type="text" readonly=true name="order_requested_by[<?php echo $i; ?>]" value="' . $row['requestedby'] . '"/>
    </td>
    <td>
        <select name="order_status[<?php echo $i; ?>]" id="id" onchange="showUser(this.value)" >
            <option value = "Pending"   name="order_status[<?php echo $i; ?>]" class = "pending"'<?php echo $row['status'] == 'Pending' ? ' selected=selected' : ''; ?>>Pending</option>
            <option value = "Approved"  name="order_status[<?php echo $i; ?>]" class = "approved"'<?php echo $row['status'] == 'Approved' ? ' selected=selected' : ''; ?>>Approved</option>
            <option value = "Disapproved" name="order_status[<?php echo $i; ?>]" class ="disapproved"'<?php echo $row['status'] == 'Disapproved' ? ' selected=selected' : ''; ?>>Disapproved</option>
        </select>
    </td>
    <td>
        <input type="checkbox" name="order_selected[<?php echo $i; ?>]"/>
    </td>
</tr> 
```

您应该考虑为您的选择值和表格行使用不同的类。

一个可能的 CSS 标记可能是：

```
table tr.Pending
{
    background-color: #FF0000;
} 
... 
```

编辑 2：我添加了一些可能是您呈现页面的方式的代码：

```
<?php for($i = 0; $i < count($_POST["order_no"]); $i++) :?>    
    <tr class="<?php echo $_POST["order_status"][$i]; ?>">
        <td>
            <input type="text" readonly=true name="order_no[<?php echo $i; ?>]" value="<?php echo $row['Orderno']; ?>"/>
        </td>
        <td>
            <input type="text" readonly=true name="order_date[<?php echo $i; ?>]" value="<?php echo $row['Orderdate']; ?>"/>
        </td>
        <td>
            <input type="text" readonly=true name="order_ordered_by[<?php echo $i; ?>]" value="<?php echo $row['Orderedby']; ?>"/>
        </td>
        <td>
            <input type="text" readonly=true name="order_supplier[<?php echo $i; ?>]" value="<?php echo $row['Supplier']; ?>"/>
        </td>
        <td>
            <input type="text" readonly=true name="order_total_price[<?php echo $i; ?>]" value="<?php echo $row['totalprice']; ?>"/>
        </td>
        <td>
            <input type="text" readonly=true name="order_requested_by[<?php echo $i; ?>]" value="' . $row['requestedby'] . '"/>
        </td>
        <td>
            <select name="order_status[<?php echo $i; ?>]" id="id" onchange="showUser(this.value)" >
                <option value = "Pending"   name="order_status[<?php echo $i; ?>]" class = "pending"'<?php echo $row['status'] == 'Pending' ? ' selected=selected' : ''; ?>>Pending</option>
                <option value = "Approved"  name="order_status[<?php echo $i; ?>]" class = "approved"'<?php echo $row['status'] == 'Approved' ? ' selected=selected' : ''; ?>>Approved</option>
                <option value = "Disapproved" name="order_status[<?php echo $i; ?>]" class ="disapproved"'<?php echo $row['status'] == 'Disapproved' ? ' selected=selected' : ''; ?>>Disapproved</option>
            </select>
        </td>
        <td>
            <input type="checkbox" name="order_selected[<?php echo $i; ?>]"/>
        </td>
    </tr>
<?php endforeach; ?> 
```

但要小心显示您从客户那里收到的数据。您应该始终先检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:32:40.683

您可以使用 PHP 的会话来保持应用了哪个类，并且还可以检查以读取会话值，因此每次刷新页面时，您都会恢复您的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:56:19.683

我认为 jquery 是比使用会话更好的方法。你可以添加`id`（这应该是唯一的，你可以使用来自数据库的唯一 id）和`class`使用jquery`<tr>`更新`<tr>`类，就像这样`$("#tr_id").addClass("class_name");`

# java - Android 应用程序从日期开始？

> ID：12561349
> 
> 赞同：0
> 
> 时间：2012-09-24T08:28:47.917
> 
> 标签：java, android, cordova

我在 android 上有 phonegap 应用程序，我正在编写一个插件来安排应用程序在特定日期启动。我该怎么做？假设用户明天选择一个日期，当到达这个日期时，应用程序会自行启动，或者它显示一些警报消息，我想用这个来实现的是一些调度程序或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:44:07.600

我认为您可以使用 Service 和 IBinder 类。当用户触发日期时，在后台启动服务并使用状态通知显示消息（http://developer.android.com/guide/topics/ui/notifiers/notifications.html）

希望下面提到的示例能给您一个快速入门。

[http://android-er.blogspot.co.uk/2010/10/simple-example-of-alarm-service-using.html](http://android-er.blogspot.co.uk/2010/10/simple-example-of-alarm-service-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:45:31.387

这基本上是一个闹钟。检查代码。

我不知道您到底想创建什么，但也许显示警报然后相应地启动应用程序的小部件会更好，更容易获得资源。

# asp.net-mvc - ASP.NET MVC - 一些线程没有命中 HttpModule

> ID：12561350
> 
> 赞同：1
> 
> 时间：2012-09-24T08:28:49.547
> 
> 标签：asp.net-mvc, multithreading, asp.net-mvc-3, iis, httpmodule

我有一个 MVC Web 应用程序，它与另一个应用程序（非 Web）共享一些通用代码。

两个应用程序必须做的一件事是连接到特定的数据存储。非 Web 应用程序运行多个线程，每个线程都有一组不同的连接参数，因此公共代码将每个连接标记为“线程静态”。因此，对于我的 ASP.NET MVC 应用程序，此连接也必须是线程静态的。

在我的 Web 应用程序中，我使用`HttpModule`. `context_BeginRequest`打开连接并关闭`begin_EndRequest`连接。（连接会在 30 秒后被数据存储区自动关闭，所以我不能无限期地保持打开状态）。

我的 Web 应用程序似乎工作得很好，只是偶尔它会抛出一个错误，说它不能使用连接。

我通过添加日志对此进行了调查。我记录了每个线程在它遇到`context_BeginRequest`、`context_EndRequest`和 时抛出异常。我发现该错误是由我的应用程序中的一个线程引发的，该线程从未命中`HttpModule's context_BeginRequest`. 因为它没有击中那个，所以没有打开连接。

我的理解是线程应该已经击中`HttpModule`- 那为什么不是呢？

如果我不能保证这种行为，那么你会建议什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:20:29.140

这可能是由于在应用程序的某处使用了异步代码。

异步代码使用回调机制，不能保证与调用它的代码在同一线程上运行。

您可以将线程同步上下文，或者只是将连接本身作为参数传递给 Async 函数

# git - git：从特定分支获取所有提交的哈希

> ID：12561351
> 
> 赞同：1
> 
> 时间：2012-09-24T08:28:53.567
> 
> 标签：git

假设我有一个名为 A 的分支，并且我提交了 5 次更改，我怎样才能从分支 A 获取所有 5 个哈希，

```
git log 
```

它没有帮助，因为它是很久以前的，我找不到它......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T08:35:01.127

该符号`..`允许查看`A`不在 中`master`的提交，即仅属于 master 的提交。

```
git log master..A 
```

要仅获取哈希值，请使用`--format=%H`此命令的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:36:33.760

有点难以理解你的意思，但如果你问我如何在我的分支上显示最后 5 次提交......

然后你可以简单地指定你想看到多少次提交

```
git log -5 
```

或者如果您希望每次提交只在一行上看到它

```
git log --oneline -5 
```

如果您想查看分支 A 中有哪些提交但尚未合并到 master

```
git log master..A 
```

# ms-access-2007 - MS ACCESS 2007 中的查询错误

> ID：12561356
> 
> 赞同：1
> 
> 时间：2012-09-24T08:29:19.653
> 
> 标签：ms-access-2007

请帮助我这个引发错误的查询引发错误：在语句末尾缺少分号（;）

```
SQL = "INSERT INTO rsANALYSIS values ( " & _
  "Chemname, Startvalue, StopValue, Received, [Usage], Quotum ) " & _
  "SELECT '" & rsMainList("handelsnaam") & "', " & StartStock & _
  ", " & StopStock & ", " & Stockreceived & ", " & Stockusage & _
  ", " & rsMainList("quotumlt") & ";" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:50:29.950

Access INSERT 语句有 2 种语法样式：

1.  `INSERT INTO TableName (field list) VALUES (value list)`
2.  `INSERT INTO TableName (field list) SELECT statement`

看来您的`INSERT`陈述混合了两种风格。试试这种方式（没有`VALUES`关键字）：

```
SQL = "INSERT INTO rsANALYSIS ( " & _
  "Chemname, Startvalue, StopValue, Received, [Usage], Quotum ) " & _
  "SELECT '" & rsMainList("handelsnaam") & "', " & StartStock & _
  ", " & StopStock & ", " & Stockreceived & ", " & Stockusage & _
  ", " & rsMainList("quotumlt") & ";" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:36:01.487

您确定所有变量都包含值吗？如果没有，您将收到上述错误。

在大多数情况下，您最好使用参数：

```
Dim db As Database
Dim qdf As QueryDef

Set db = CurrentDb

sSQL = "INSERT INTO rsANALYSIS values ( " & _
  "Chemname, Startvalue, StopValue, Received, [Usage], Quotum ) " & _
  "Values ([p1],[p2],[p3],[p4,[p5],[p6])"

''Temporary query
Set qdf = db.CreateQueryDef("", sSQL)
''No need to worry about quotes etc
qdf.Parameters("p1") = rsMainList("handelsnaam")
qdf.Parameters("p2") = StartStock
qdf.Parameters("p3") = StopStock 
qdf.Parameters("p4") = Stockreceived 
qdf.Parameters("p5") = Stockusage 
qdf.Parameters("p6") = rsMainList("quotumlt")  

qdf.Execute dbFailOnError 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:36:14.957

我不确定这一点，可能在 INSERT 查询的末尾

```
SQL = "INSERT INTO rsANALYSIS values ( Chemname, Startvalue, 
StopValue, Received, [Usage], Quotum ); 

SELECT '" & rsMainList("handelsnaam") & "', " & StartStock & ", " & StopStock & ", " & Stockreceived & ", " & Stockusage & ", " & rsMainList("quotumlt") & ";" 
```

还要确保未引用的变量不为空

# ios - 更新 MapKit 标注字幕和图片

> ID：12561357
> 
> 赞同：1
> 
> 时间：2012-09-24T08:29:22.800
> 
> 标签：ios, annotations, mapkit, updates, subtitle

我在网上搜索了一下，发现了一些关于如何做我想做的事情的想法，但我仍然想知道你认为我应该做什么。

这是上下文：

我正在为 iOS 5 开发一个应用程序。我使用 MapKit 显示地图，并添加了大约 5000 个注释 - 是的，这似乎很多，但别担心，我使用集群库 :)。为了*不*每次用户打开地图时都加载它们，我在我的 appDelegate 中创建它们（我创建了一个注释数组，并`[_mapView addAnnotations:[appDelegate.annotationsToAdd allObjects]];`在我打开地图时调用）。创建数组大约需要 10 秒`annotationsToAdd`，所以我认为这个解决方案运行良好（您必须等待这 10 秒才能被授权打开地图，但您只需等待一次，在应用程序启动时） . 在每个注释中，我都有一个指向对象的“链接”，该对象包含一个值数组（15 个浮点数）。现在，当我创建注释时，该`subtitle`方法会返回其中一个值。

在我的地图的 ViewController 中，我有 2 个分段控件。第一个有 3 个段，第二个有 5 个段，这给出了 15 种组合 - 是的，这与我的注释中的对象数组具有相同数量的值:)。

所以你可能已经看到我的问题来了，我想更新我地图上**每个**注释的副标题（即使是集群中的那些，因为集群根据它持有的图钉给出平均值）。我还想要的是根据注释字幕的值更新 annotationView 的颜色/图像。

我可能错了，但根据我的研究，我知道您*必须*删除所有注释，然后重新创建它们才能做到这一点。你明白这**不是**我的选择。我不能让用户每次更改其中一个控件的值时等待 10 秒。

我在 KVO 上看到了一篇文章：这可能是一个可行的解决方案吗？

我不太了解 NSNotification，但我应该使用它们吗？

我非常感谢您的帮助，我将更加感谢详细的回答，向我展示在我显然不常见的情况下要遵循的步骤。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T00:05:21.560

首先，您应该一次添加所有注释，而不是使用聚类库：

> 配置地图界面时，您应该立即添加所有注释对象。地图视图使用每个注释对象中的坐标数据来确定相应的注释视图何时需要出现在屏幕上。

（来自[MKMapView 类参考](http://developer.apple.com/library/ios/#Documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)）。

MKMapView 将为您管理它们，因此您的应用程序不会变慢。这种方法可能不会比你正在做的慢，然后你理论上可以这样做：

```
[mapView removeAnnotations:mapView.annotations];
//add your annotations here 
```

如果您想删除所有这些，然后将它们全部添加回来。

但是，您必须一次将它们全部删除是不正确的。如果您知道特定的注释，您可以简单地执行以下操作：

```
[mapView removeAnnotation:someAnnotation];
[mapView addAnnotation:someOtherAnnotation]; 
```

如果你在 NSArray 中有替换，你甚至可以：

```
[mapView removeAnnotations:arrayOfOldAnnotations];
[mapView addAnnotations:arrayOfNewAnnotations]; 
```

最后，如果您想修改注释，您可以使用 KVO（请参阅[此 Stack Overflow 问题](https://stackoverflow.com/questions/1190270/mkmapview-refresh-after-pin-moves)）来完成，但它也很容易删除，然后添加一个，只要您在，用户就不会注意到'不动画添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T22:50:07.823

如果我最终没有很好地了解您的情况，我很抱歉，但我觉得我正在解决类似的问题，所以我会尝试与您分享我的想法。我将用你的话作为我的回应指南：

*“你必须等待那 10 秒才能被授权打开地图”*

您是否了解以下`<MKOverlayView>`协议方法（请参阅[http://developer.apple.com/library/IOs/#documentation/MapKit/Reference/MKOverlayView_class/Reference/Reference.html](http://developer.apple.com/library/IOs/#documentation/MapKit/Reference/MKOverlayView_class/Reference/Reference.html)）：

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context
- (BOOL)canDrawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale 
```

（假设您在整个世界地图上有 5000 个图钉，而不是每 1 公里，即不是这么大的图钉）您可以将您的 5000 个图钉分成多个部分，因此每个图钉部分将由相应的`MKMapRect`区域填充正在地图上绘制。因此，您的地图会根据需要在任何给定时间仅针对特定区域填充图钉/注释。根据您的情况，这可能会带来巨大的加速。

`MKMapRect`这是使用瓦片的一个很好的演示： [https](https://github.com/mtigas/iOS-MapLayerDemo) ://github.com/mtigas/iOS-MapLayerDemo - 仅填充特定地图片段的信息。您也可以`google`使用“Map tiles 256px”之类的内容来了解​​地图的绘制方式。

*“我知道您必须删除所有注释，然后重新创建它们才能做到这一点。”*

为什么要重新创作？您确实可以访问地图上已经存在的所有注释 - 为什么不遍历关联的注释类并更新它们的字幕呢？

**就像是：**

*   [iPad Mapkit - 更改“当前位置”的标题](https://stackoverflow.com/questions/4324744/ipad-mapkit-change-title-of-current-location)
*   [注释标注标题不会更改](https://stackoverflow.com/questions/7649771/annotation-callout-title-does-not-change)

我希望我的观点确实解决了您的问题/情况的范围。

# java - 从 java.sql.Date setter 获取空指针

> ID：12561358
> 
> 赞同：0
> 
> 时间：2012-09-24T08:29:22.410
> 
> 标签：java

我在对象中设置 java.sql.Date 字段时遇到问题。我从文本字段中获取字符串，将其解析为 java.util.Date，然后从中创建 java.sql.Date 对象。对象不为空，因为它打印出来，但是当我将它作为参数传递给设置器时，我得到空指针异常。

```
dt = formatter.parse(forma.getTxtdatum().getText());
System.out.println(dt); //prints out correct date
Date datum = new java.sql.Date(dt.getTime());
System.out.println(datum); //prints out correct date
clan.setDatum_rodjenja(datum); //throws null pointer exception 
```

任何想法都会有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:30:35.550

显然`clan`变量是`null`。

# javascript - 如何调试由 Chutzpah/PhantomJS 执行的 JavaScript

> ID：12561362
> 
> 赞同：25
> 
> 时间：2012-09-24T08:29:52.880
> 
> 标签：javascript, unit-testing, debugging, phantomjs, chutzpah

我正在使用 Chutzpah 来执行我的 JavaScript 单元测试。

我引用了源文件的路径，下面有一系列测试。Visual Studio 中的文本资源管理器列出了我的测试，我可以直接从 IDE 执行它们，因此一切似乎都正常工作。

但是，我想进入运行测试时正在执行的源代码。

这可能吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-24T22:38:07.517

**更新：** Chutzpah 4.1.0 版增加了集成的[VS 调试](https://github.com/mmanela/chutzpah/wiki/Debugging-Unit-Tests)。

[![在此处输入图像描述](../Images/248f0a151e40a1ced46faaee351b3e5f.png)](https://i.stack.imgur.com/tXqBO.png)

* * *

目前使用 Chutzpah 是不可能的。您可以做的最好的事情是安装[上下文菜单扩展](http://visualstudiogallery.msdn.microsoft.com/71a4e9bd-f660-448f-bd92-f5a65d39b7f0)，它将添加“在浏览器中打开”右键单击选项。然后你可以使用浏览器内置的调试工具来单步调试代码。

我很想添加一种集成方式来插入 VS 调试系统，但还没有弄清楚如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T13:35:30.023

也许这可以为您指明正确的方向：

我使用 captureBase64('png') 为 CasperJS 制作了一个快速而肮脏的屏幕截图抓取器

它将图像发布到接收服务器，然后通过 socket.io 将其发送到浏览器，浏览器将其显示为内联图像。

源代码可在 github 上找到：

[https://github.com/maciejjankowski/flaming-octo-puss](https://github.com/maciejjankowski/flaming-octo-puss)

我不确定它与 PhantomJS 的兼容性如何，但 CasperJS 完美无缺，所以如果 chutzpah 使用 PhantomJS，你就有机会让这个概念发挥作用。

您需要将此添加到每个步骤或将其设置为`onStepComplete`处理程序：

```
this.evaluate( function(img){
  __utils__.sendAJAX("http://localhost:8001/", 'POST', {'img' : img }, false);    
  }, 
  {'img' : this.captureBase64('png')} 
); 
```

# asp.net - 如何使链接失效？

> ID：12561370
> 
> 赞同：0
> 
> 时间：2012-09-24T08:30:41.417
> 
> 标签：asp.net

> 我有一个通过电子邮件发送超链接的应用程序，以允许用户访问证书网络表单...

mmMail.Body = "http://localhost/mypage.aspx> 当用户收到此链接时。有没有办法在用户接受链接 24 小时后添加代码使此链接失效。** 此接收时间会有所不同对于不同的用户，因此我的链接应该在 20 小时后过期，因为用户在 24 小时前收到了链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:36:51.710

在您的数据库中存储每个用户的唯一 ID 以及创建时间（或：到期时间）。

将唯一 ID 作为查询参数添加到链接。用户调用页面时检查参数，如果过期则显示错误。

# web-services - 无法从 flex 中的 xml 服务获取数据

> ID：12561372
> 
> 赞同：1
> 
> 时间：2012-09-24T08:30:44.593
> 
> 标签：web-services, apache-flex, flex4.5

我想从 free.worldweatheronline.com 获取 xml 数据，我尝试了以下方式：-

```
<fx:Script>
    <![CDATA[
        import mx.rpc.events.FaultEvent;
        import mx.rpc.events.ResultEvent;
        private var main_xml_url:String = "http://free.worldweatheronline.com/feed/weather.ashx?q="+cityName.text.toString()+"&format=xml&num_of_days=2&key=my_api_key"; // there I put my api key not showing here//

        protected function weatherService_resultHandler(event:ResultEvent):void
        {
            // TODO Auto-generated method stub
            var result_weather_data:Object = event.result;
            cityNameData.text = data.request.query;

        }

        protected function weatherService_faultHandler(event:FaultEvent):void
        {
            // TODO Auto-generated method stub
            cityNameData.text = event.message.toString();
        }

    ]]>
</fx:Script>

<fx:Declarations>       
    <s:HTTPService id="weatherService"
                   url="main_xml_url"
                   resultFormat="object"
                   result="weatherService_resultHandler(event)"
                   fault="weatherService_faultHandler(event)"/>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:TextInput id="cityName" text="Hyderabad" x="10" y="10" width="219" fontWeight="bold" prompt="Enter city Name"/>

<s:Label id="cityNameData" x="108" y="109" width="202" fontSize="20" fontWeight="bold"/> 
```

但是有一个错误说：无法访问空对象引用的属性或方法。在私有 var main_xml_url:String

请通过解决它来帮个忙 提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:38:36.747

上面的代码意味着您正在尝试`cityName.text.toString()`在对象初始化时检索和分配 的值。

`cityName`分配时`TextInput`不会将显示对象添加到显示中。因此，您将获得 NPE。

您可以按如下方式更正此问题：

```
<fx:Declarations>
    <s:HTTPService id="weatherService"
        url="{BASE_URL}"
        resultFormat="object"
        result="weatherService_resultHandler(event)"
        fault="weatherService_faultHandler(event)">
        <s:request xmlns="">
            <q>{cityName.text.toString()}</q>
            <format>{FORMAT}</format>
            <num_of_days>{NUMBER_OF_DAYS}</num_of_days>
            <key>{API_KEY}</key>
        </s:request>
    </s:HTTPService>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import mx.rpc.events.FaultEvent;
        import mx.rpc.events.ResultEvent;

        private static const BASE_URL:String="http://free.worldweatheronline.com/feed/weather.ashx"
        private static const API_KEY:String="your API key here"
        private static const NUMBER_OF_DAYS:uint=2;
        private static const FORMAT:String="xml";

        protected function weatherService_resultHandler(event:ResultEvent):void
        {
            // TODO Auto-generated method stub
            var result_weather_data:Object=event.result;
            cityNameData.text=result_weather_data.request.query;

        }

        protected function weatherService_faultHandler(event:FaultEvent):void
        {
            // TODO Auto-generated method stub
            cityNameData.text=event.message.toString();
        }
    ]]>
</fx:Script>
<s:layout>
    <s:VerticalLayout/>
</s:layout>
<s:TextInput id="cityName"
    width="219"
    text="Hyderabad"
    x="10"
    y="10"
    fontWeight="bold"
    prompt="Enter city Name"/>

<s:Label id="cityNameData"
    width="202"
    x="108"
    y="109"
    fontSize="20"
    fontWeight="bold"/>

<s:Button label="Send" click="{weatherService.send()}"/> 
```

此外，您忘记调用对象`send()`上的。`weatherService`这意味着无论如何都不会触发您的 Web 服务调用。

有关此问题的更多信息，请查看[LiveDocs](http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_2.html)

# database - 在数据库表级别而不是函数上进行约束

> ID：12561373
> 
> 赞同：0
> 
> 时间：2012-09-24T08:30:46.693
> 
> 标签：database, oracle, plsql, oracle10g, constraints

我有以下选择语句，我在一个函数中使用它来检查记录的重叠，这个函数是从应用程序前端调用的。

```
SELECT count(*),product_no 
from products p where lower(p.PRODUCT_REG_NO) ='GB-UNIGAS' 
and (NVL (p.return_date, p.end_date) >= '01-Jan-2015') 
and p.product_no in (select product_no from PRODUCT_MASTER  where  EXPIRED='N' 
                    and product_no  = p.product_no) 
```

我想在表中创建一个约束，而不是检查记录重叠的函数，这样即使在数据库级别也不会有任何插入或更新。

如何使用上述 sql 语句创建约束？

任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:39:12.523

您可以创建一个插入前或更新触发器，检查您的条件，如果新数据不符合您的要求，则引发错误。此[链接](http://www.orafaq.com/forum/t/85427/2/)将为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:24:00.743

在存储过程中保留这种逻辑是一个不错的选择。尝试在触发器中实现该逻辑，并且以某种方式最终会看到

```
ORA-04091: table <your table> is mutating, trigger/function may not see it 
```

例如，在触发器中实现该功能将允许您使用`insert`like

```
insert into <Yourtable> (<col1>...<coln>)
   values(val1... valn) 
```

`mutating table`但是如果你尝试`insert`像这样执行你肯定会得到一个错误

```
 insert into <Yourtable> (<col1>...<coln>)
    select col1, .. coln 
      from some_table 
```

如果您不想使用存储过程，您的另一个选择可能`view`是`instead of trigger`

```
Create or replace view <ViewName> as
  select *
    from your_table;

 create or replace trigger <Trigger_name> 
   instead of insert on <View_Name>
 begin
   -- your logic
 end; 
```

**此外**

此外，要通过约束 (constraint) 强制执行业务规则`CHECK`，您可以组合`CHECK`约束，`materialized view`如下所示： 为您的表创建物化视图（不要忘记在`materialized view log`之前创建），该视图将查询违反业务规则约束的数据。

```
 Create materialized view MV_1
  refresh complete on commit as
  --here goes your query
  -- selecting data you want to raise exception on 
```

添加`check`始终为假的约束。像这样的东西

```
alter table MV_1 add constraint CHK check(1=2) deferrable; 
```

完成后，`check constraint <..> violated`当您尝试在表中插入违反业务规则约束的数据时，您将得到。

# xml - XmlPullParserException：意外的令牌

> ID：12561377
> 
> 赞同：0
> 
> 时间：2012-09-24T08:31:10.860
> 
> 标签：xml, xml-parsing, xmlpullparser

我正在尝试使用 解析 XML `XmlPullParser`，它的开头是这样的：

```
<ArrayOfApplications xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

但我收到了这个错误：

> .xmlpull.v1.XmlPullParserException：意外令牌（位置：TEXT @1:2 in java.io.BufferedReader@415af968）

我读过它，但没有任何有用的东西。`xmlns:xsd`我认为问题出在and周围`xmlns:xsi`。

知道如何解决这个问题吗？

# bioperl - 使用 bioperl 从 GFF3 数据库中获取属性值

> ID：12561383
> 
> 赞同：0
> 
> 时间：2012-09-24T08:31:43.360
> 
> 标签：bioperl

我已经使用 BioPerl 存储对象 (BIO:DB:SeqFeature:Store) 创建了一个 GFF3 DB 我自己从 Blastx 结果创建了 GFF3 文件，并创建了一系列我自己的标签作为属性。现在我将从 BioPerl 为我创建的数据库中获取这些值......

我该怎么做？

请帮忙！十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:16:15.033

我发现包中存在执行此操作的函数`BIO::SeqFeature::Generic`。最有用的是`get_tag_values`返回一个数组，其中每个值包含在属性中，并在输入中给出特定标签！

用法：

```
my @values= $feature->get_tag_values('go'); 
```

再见！

# email - 如何通过电子邮件发送链接（URL）

> ID：12561390
> 
> 赞同：-3
> 
> 时间：2012-09-24T08:32:06.040
> 
> 标签：email, blackberry

我正在显示一个包含一些文本和一个图像的页面。我想通过电子邮件将此页面的 URL 发送给一些朋友。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:02:26.257

检查这个 -

```
 Store store = Session.getDefaultInstance().getStore();
 Folder[] folder = store.list(Folder.SENT);
 Folder sent = folder[0];
 Message msg = new Message(sent);
 Address receipent[] = new Address[1];
 try
    {
     receipent[0] = new Address(To_Address, name);
     msg.addRecipients(Message.RecipientType.TO, receipent);
     msg.setSubject("Test Mail");
     msg.setContent("This mail is to remind you that programmatically we can send the mail");
     msg.setPriority(Priority.HIGH);
     Transport.send(msg);
    }

  catch (Exception e)
         {
                e.printStackTrace();
          } 
```

# haskell - 在 ghc-7.6.1 之后的世界中，DynamicException 等价物是什么？

> ID：12561392
> 
> 赞同：8
> 
> 时间：2012-09-24T08:32:17.403
> 
> 标签：haskell, ghc

`DynamicException`并且曾经在模块中`throwDyn`。现在它已经一去不复返了，依赖它的包被破坏了。`throwDynTo``Control.OldException``OldException`

包装`DynamicException`中或其他地方是否有等价物？`ExtensibleException`我想以最小的变化摆脱困境。

背景：我正在尝试使用 GHC 7.6.1 构建 lambdabot。损坏的文件`Signal.hs`位于`lambdabot-utils`.

**更新**是否有某种将旧异常代码移植到新的可扩展异常的指南？`lambdabot`在多个地方使用`OldException`，似乎不可能快速修复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T11:12:53.647

这些函数在 new 中的等价物`Control.Exception`是简单的`throw`,`throwTo`和`catch`, as`Control.Exception`默认支持动态异常。

旧界面和新界面的主要区别在于这些功能有一个`Exception`约束，而不是`Typeable`. 但是，在大多数情况下，默认实现就足够了，因此您只需`Exception`为要使用的类型声明实例，例如

```
instance Exception Foo 
```

# matlab - 如何从MATLAB中的其他几个矩阵制作频率矩阵

> ID：12561393
> 
> 赞同：0
> 
> 时间：2012-09-24T08:32:29.347
> 
> 标签：matlab, matrix, frequency

我有 30 个矩阵（1446x1124），其中包含从 0 到 99 的值。我想要一个输出矩阵，具有相同的大小，并且在每个单元格中包含该矩阵的一个元素的出现频率（在 0 和 1 之间）（例如 2) 超过 30 个输入矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T16:19:55.190

首先确保您的矩阵存储正确。如果它们的大小都相同，我会推荐一个 3 维矩阵。然后它应该看起来像这样：

```
M = round(rand(30,1446,1124)); 
```

现在我不确定您希望输出具有什么形状，但是假设您想知道 2s 的分数，这很简单：

```
mean(M(:)==2) 
```

# java - 日期ArrayList的排序

> ID：12561396
> 
> 赞同：8
> 
> 时间：2012-09-24T08:32:51.463
> 
> 标签：java, android, sorting

我有一个`ArrayList`包含格式的日期（星期六，2012 年 2 月 4 日）。我该如何排序`ArrayList`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-24T08:42:31.170

这是最简单的排序方式之一，

```
Collections.sort(<Your Array List>); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T08:43:05.240

如果您在排序时有任何特殊要求，可以通过提供自己的`Comparator`. 例如：

```
//your List
ArrayList<Date> d = new ArrayList<Date>();

//Sorting
Collections.sort(d, new Comparator<Date>() {
    @Override
    public int compare(Date lhs, Date rhs) {
        if (lhs.getTime() < rhs.getTime())
            return -1;
        else if (lhs.getTime() == rhs.getTime())
            return 0;
        else
            return 1;
    }
}); 
```

关键元素是您将`Date`对象转换为**毫秒**（使用`getTime()`）进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-09T21:28:53.173

8年后..

```
List<Date> dates = datelist;
List<Date> sorted = dates.stream()
  .sorted(Comparator.comparingLong(Date::getTime))
  .collect(Collectors.toList()); 
```

# c# - 如何获取光标下图像框中的像素数据？

> ID：12561397
> 
> 赞同：0
> 
> 时间：2012-09-24T08:32:53.767
> 
> 标签：c#

这是网络摄像头程序，可以通过void ProcessFrame循环显示图像如何使用以下代码获取光标下图像框中的像素数据？

这是我从网站上捕获的代码。非常感谢您的帮助

```
enter code here
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using Emgu.CV;
using Emgu.CV.Structure;
using Emgu.Util;
using System.Threading; 
namespace MyOpenCV
{
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

private Capture _capture;
private bool _captureInProgress;

private void ProcessFrame(object sender, EventArgs arg)
{
    Image<Bgr, Byte> frame = _capture.QueryFrame();  
    captureImageBox1.Image = frame;
}

private void captureButton_Click_1(object sender, EventArgs e)
{
    #region if capture is not created, create it now
    if (_capture == null)
    {
        try
        {
            _capture = new Capture();
        }
        catch (NullReferenceException excpt)
        {
            MessageBox.Show(excpt.Message);
        }
    }
    #endregion

    if (_capture != null)
    {
        if (_captureInProgress)
        {  //stop the capture 
            Application.Idle -= new EventHandler(ProcessFrame);
            captureButton.Text = "Start Capture";
        }
        else
        {
            //start the capture 
            captureButton.Text = "Stop";
            Application.Idle += new EventHandler(ProcessFrame);
        }

        _captureInProgress = !_captureInProgress;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:16:03.367

尝试这个：

```
private void pictureBox1_MouseClick(object sender, MouseEventArgs e)
        {
            var bmp = (Bitmap) pictureBox1.Image;
            var color = bmp.GetPixel(e.X, e.Y);
        } 
```

# javascript - 放置图标以在鼠标悬停时显示文本

> ID：12561400
> 
> 赞同：0
> 
> 时间：2012-09-24T08:33:01.920
> 
> 标签：javascript, jquery

我开发了一个电子商务网站。对于用户表单输入框，我想放置一个问号图标作为帮助工具。当用户将鼠标放在该图标上时，它应该显示帮助文本。我不知道该怎么做。请有人帮我做这件事。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:36:00.930

您可以放置​​一个隐藏的 div 并在鼠标悬停时显示它。如果您正在寻找一些很酷的工具提示，您可以使用 Qtip ..

```
$(document).ready(function() 
{
   $('img[title]').qtip({
      content: {
         text: false // Use each elements title attribute
      },
      style: 'cream' // Give it some style
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:37:15.790

这是给你的一个想法。[http://jquerytools.org/demos/tooltip/index.html](http://jquerytools.org/demos/tooltip/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:37:59.933

[搜索 JQuery 工具提示](https://www.google.co.in/search?q=jquery%20tooltip%20plugin&sugexp=chrome,mod=18&sourceid=chrome&ie=UTF-8&qscrl=1#hl=en&safe=off&qscrl=1&sclient=psy-ab&q=jquery%20input%20tooltip%20plugin&oq=jquery%20input%20tooltip%20plugin&gs_l=serp.3..33i29l4.21223.22678.0.23434.8.8.0.0.0.5.319.1839.1j0j5j2.8.0.les;..1.0...1c.1.EeMg5JKeSAg&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=d13db64a30626e57&biw=1366&bih=643)会很有帮助。

我发现了这个：http: [//vadikom.com/demos/poshytip/](http://vadikom.com/demos/poshytip/)

你可以像这样使用它：

```
$('#my-html-element').poshytip(); 
```

如果您使用类或 id 注释您的图标，则上述调用就是您所需要的。

它还支持像这样的输入框这样的表单元素：

```
$('#demo-form-name').poshytip({
    className: 'tip-yellowsimple',
    showOn: 'focus',
    alignTo: 'target',
    alignX: 'right',
    alignY: 'center',
    offsetX: 5
}); 
```

# ruby - 定义带参数的 `... = ` 类型方法

> ID：12561404
> 
> 赞同：2
> 
> 时间：2012-09-24T08:33:22.333
> 
> 标签：ruby

可以以`... =`如下格式定义方法：

```
class A
  def f= x
    puts x
  end
end

A.new.f = 5 
```

但是是否可以用这种格式定义一个带有参数的方法，以便可以像下面这样使用它？

```
A.new.f(a, b, c) = 5 
```

**编辑**

你可以这样做`[]=`

```
class A
  def []= x, y, z
    puts x, y, z
  end
end

A.new[1, 2] = 3 
```

这是特例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:28:12.240

```
A.new.f(a, b, c) = 5 
```

是语法错误，所以肯定不是（这也没有意义；）

`[]`只是 .send(:[]=, ...) 的糖，它只是名称奇特的二传手。

您可以使用多个参数定义 setter，但使用它的唯一方法是

`A.new.send(:f=, "first", "second")`

因为解析器不允许像 A.new.foo = "first", "second" 这样的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:34:32.917

ruby`...`和是用于构造对象`..`的字符串文字。`Range`您可以使您的对象可被`Range`对象使用。

[参见http://www.ruby-doc.org/core-1.9.3/Range.html](http://www.ruby-doc.org/core-1.9.3/Range.html)的第一章

已编辑

foo.rb

```
class A
  def ...(a)
    p a
  end
end 
```

$红宝石foo.rb

```
foo.rb:2: syntax error, unexpected tDOT3
  def ...(a)
         ^
foo.rb:5: syntax error, unexpected keyword_end, expecting $end 
```

但！您可以使用 define_method 来定义一个被调用的方法，`...`但您只能通过它来调用它，`send`所以它非常没用。

```
$ irb
1.9.3p194 :001 > class A; end
 => nil 
1.9.3p194 :002 > A.send(:define_method, :'...') { puts 'hello' }
 => #<Proc:0x007fe1931dbb50@(irb):2 (lambda)> 
1.9.3p194 :003 > A.new.send(:'...')
hello
 => nil 
```

# ms-access - 访问连续表单：记录状态

> ID：12561406
> 
> 赞同：2
> 
> 时间：2012-09-24T08:33:30.197
> 
> 标签：ms-access, vba

当以连续形式生成新行时，最后一行用笔出现在记录选择器上（图 1）。单击另一条记录后，该笔将替换为箭头（图 2）。

如何以编程方式识别“笔”状态与“箭头”状态？

![在此处输入图像描述](../Images/202273a7fb05adf01b403c1a68425809.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:45:26.503

我认为当对当前记录进行编辑时会出现笔符号。

检查以确认笔符号的存在与表单的脏状态一致...如果`Me.Dirty = True`，记录选择器符号应该是铅笔而不是箭头。

# c# - 在 VSTO 中的 Excel get_Range 中使用的正确分隔符

> ID：12561408
> 
> 赞同：4
> 
> 时间：2012-09-24T08:33:35.187
> 
> 标签：c#, excel, vsto, cultureinfo

在用 C# 编写的 Excel 的 VSTO 项目中，我需要从单元格字符串列表中获取 Range 对象。

这是问题的简化版本：

```
string strRange = "A1:A2,A5";
Excel.Range r = sheet.get_Range(strRange); 
```

但是，由于列表分隔符在不同的文化设置中可能与逗号不同，因此我实际上正在使用它：

```
listSep = System.Globalization.CultureInfo.CurrentCulture.TextInfo.ListSeparator;
string strRange = "A1:A2" + listSep + "A5";
Excel.Range r = sheet.get_Range(strRange); 
```

我的问题是当用户在 Excel 选项 > 高级（Application.DecimalSeparator）中更改“十进制分隔符”以匹配 ListSeparator 时，这将不起作用。

使用指定范围的字符串调用 get_Range 的正确方法是什么？

编辑：稍作修改以在下面添加我的评论信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:09:46.813

不是最干净的方法，但这种解决方法帮助了我：

```
private static string GetRangeSeparator(Excel.Worksheet sheet)
{
     Excel.Application app = sheet.Application;
     string sRng = app.Union(sheet.get_Range("A1"), sheet.get_Range("A3")).AddressLocal;
     sRng = sRng.Replace("$", string.Empty);
     string sSep = sRng.Substring(sRng.IndexOf("A3") - 1, 1);
     return sSep;
} 
```

希望它会帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:31:45.670

您可能会考虑使用该`Application.Union`方法来构建您的范围。类似（未经测试）：

```
Application.Union(sheet.get_Range("A1:A2"), sheet.get_Range("A5")); 
```

# ruby-on-rails - 应用程序控制器中的变量会导致 Rails 中的内存泄漏吗？

> ID：12561409
> 
> 赞同：0
> 
> 时间：2012-09-24T08:33:51.333
> 
> 标签：ruby-on-rails, memory

我有一个在 Heroku 上运行的 Rails 应用程序（每天大约 1 000 次页面浏览量）。自上周发布以来，我一直在经历应用程序频繁崩溃。

研究 New Relic，Dynos 的内存使用量似乎在不断增加，而内存使用量却从未下降。基本上，它会在几个小时内建立起来，然后以请求超时结束，这似乎很可能。

因此，我认为应用程序崩溃的问题是由于内存泄漏造成的。

我的应用程序（presenttips .com）是一个礼品网站，其中我有“随机礼物”、“每日礼物”和“横幅”等功能。这些我像这样加载到应用程序控制器中：

```
 before_filter :global_setup

  def global_setup
    # Create random gift
    rand_gift = []
    rand_gift << Gift.where(:gift_status_id => 1) #=> Accepted
    @random_gift = rand_gift[0][rand(rand_gift[0].size) - 1]   
    rand_gift = nil 
    @nbr_of_active_gifts = (Gift.where(:gift_status_id => 1).count / 100 ).round * 100 

    @toplist = Gift.where(:gift_status_id => 1).order("week_click DESC").limit(20)
    @banners = Banner.where("first_date <= '"  + Time.now.to_date.to_s + "'").where("last_date >= '"  + Time.now.to_date.to_s + "'").order("first_date ASC")    
    advertise_here = []
    (@banners.count..4).each do |i|
      advertise_here[i] = Banner.new(:advertiser => "Presenttips.com", :banner_image => "annons.jpg", :url => advertise_path)
    end
    @banners << advertise_here.compact
    @banners = @banners.flatten
    @page_categories = PageCategory.order(:prio_rank)

        if Rails.env.production?
            @random_sql = "RANDOM()"
          @meta_robots_block = false
          @analytics_block = false          
        else 
          @meta_robots_block = true
          @analytics_block = true
            @random_sql = "RAND()"          
        end    

    gift_from_daily = DailyGift.where(:publish_date => Time.now.to_date).first
    gift_from_daily = DailyGift.create(:publish_date => Time.now.to_date, :gift_id => @random_gift.id) if gift_from_daily.blank?
    @daily_gift = Gift.find(gift_from_daily.gift_id)

    @head_categories = Category.order(:name).where(:parent_id => nil)

    todays_date = Time.now.to_date.to_s

    @season = Season.where("'" + todays_date + "' >= date_start ", "'" + todays_date + "' <= date_end" ).first
    @season_theme = @season.css
    @logo = 'logo.png'
    @logo = 'seasons/logo_christmas.png' if @season.css.eql?('theme_christmas.css')
  end 
```

这样我就可以在应用程序中全局使用它们（例如，当天的礼物总是在右侧列中）。

我想这不是很好考虑到内存使用情况。

我的问题：

1.  这可能会导致内存堆积吗？
2.  在这种情况下，有什么更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:15:23.297

我删除了几乎所有这些变量，但它仍然没有帮助。我将假设应用程序控制器没有导致内存问题。

# mysql - 如何将新数据插入表并删除旧数据而不阻止用户读取旧数据直到进程结束（MySql）

> ID：12561410
> 
> 赞同：1
> 
> 时间：2012-09-24T08:33:55.077
> 
> 标签：mysql, sql, database, database-backups

案例：有一个巨大的表，每24小时需要删除所有数据并获取新数据。

如何在不阻止用户从该表中读取数据的情况下截断该表并插入新数据？

我想做什么：（请写下哪个选项更好或建议更合适的选项或标准解决方案）

选项1：

```
 1\. insert new data to temp table
 2\. drop old table
 3\. rename temp table to the table name 
```

选项2（问题：用户无法访问中间的表数据）：

```
 1\. truncate the table
 2\. insert new data to table 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:44:47.720

```
1.insert new data to temp table
2.CREATE TABLE newtable select * from oldtable where 1=2
3.drop old table
4.INSERT INTO newtable select * from temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:44:52.027

如果您有任何旧数据要保留：在您的表中添加一个 id 列。用一行中所有列的值计算的哈希值填充它。将新数据加载到临时表中。使用已更改的行和新行更新旧数据。否则，您的第一个解决方案就是要走的路，因为重命名表不需要 mch 时间。

# wordpress - Wordpress：如何管理背景图像和内容幻灯片

> ID：12561411
> 
> 赞同：0
> 
> 时间：2012-09-24T08:34:05.597
> 
> 标签：wordpress, wordpress-theming

我即将为一个非博客网站构建一个 Wordpress 主题。我熟悉基本的帖子/页面概念，我曾经将静态页面设置为首页。

现在我希望前页**改变****它的背景图像** 和它的一小**部分内容**每隔几秒钟（[这](http://demo.wpbakery.com/?theme=architectos)是我想要实现的一个例子。）

我已经知道如何开发其中的 javascript 和 HTML 部分了！**我想知道如何使这些可更改的项目（背景图像以及小内容）在 Wordpress 管理区域中可管理**（因为这是 oa cms 的重点，对 :-)）。

你会怎么做？有没有插件可以连接这样的自定义内容？还是我必须构建自己的插件？我会很感激你的想法:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:12:42.080

粗略的步骤：

1.  创建自定义[帖子类型](http://codex.wordpress.org/register_post_type)
2.  在`supports`选项启用`thumbnail`
3.  创建一些带有特色图片（以及您想要的其他数据）的帖子
4.  使用[WP_Query获取您的帖子](http://codex.wordpress.org/Class_Reference/WP_Query)
5.  循环你的帖子。
6.  做 JS 魔术。

问题？问。

# java - 为什么向 Java 接口添加新方法会破坏依赖旧版本的客户端？

> ID：12561413
> 
> 赞同：2
> 
> 时间：2012-09-24T08:34:11.157
> 
> 标签：java, design-patterns, interface, jvm-languages

在 Java 中，当您向接口添加新方法时，您会破坏所有客户端。当您有一个抽象类时，您可以添加一个新方法并在其中提供一个默认实现。所有客户将继续工作。

我想知道为什么界面是这样设计的？

所有旧方法仍然存在，因此似乎没有向后兼容性问题。（当然需要有某些例外，但我认为能够在不破坏客户端的情况下向 java 接口添加新方法可能是一个非常好的主意......）

我会很感激你的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:51:43.153

我可以看到一些可能的中断

*   您假设客户端将使用新的重载方法，但他们没有这样做，因为代码尚未重新编译。
*   您添加一个客户端已经拥有的方法，该方法执行不同的操作。
*   您添加一个方法，这意味着它们的子类在重新编译时会中断。恕我直言，这是可取的。
*   您更改返回类型、方法名称或参数类型，这将在运行时导致错误。
*   您交换相同类型的参数。这可能是最糟糕和最微妙的错误。;)

恕我直言，这是更可能导致您悲伤的微妙问题。但是，我不会假设简单地添加一个方法会破坏代码，我不会假设如果客户端的代码没有出现运行时错误，则意味着他们使用的是最新版本的任何东西。;)

* * *

如果我编译这段代码

```
public interface MyInterface {
    void method1();

    // void method2();
}

public class Main implements MyInterface {
    @Override
    public void method1() {
        System.out.println("method1 called");
    }

    public static void main(String... args) {
        new Main().method1();
    }
} 
```

它打印

```
method1 called 
```

然后我取消注释 method2() 并重新编译接口。这意味着接口有一个`Main`没有实现的方法。然而，当我在不重新编译的情况下运行它时，`Main`我得到了

```
method1 called 
```

* * *

如果我有

```
public class Main implements MyInterface {    
    public void method1() {
        System.out.println("method1 called");
    }

    public void method2() {
        System.out.println("method2 called");
    }

    public static void main(String... args) {
        new Main().method1();
    }
} 
```

我在`// method2()`注释掉的情况下运行，我没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:48:50.670

接口就像一个类的模板。当您有一个对象的类实现了某个接口并且您对该接口进行强制转换时，您只能通过该接口访问该对象（及其方法）。因此，您的客户将始终看到接口提供的所有方法，而不仅仅是那些实际上由类实现的方法。

您的建议会让您想知道您在任何时候处理的对象是否确实具有他们试图调用的方法的实现。

当然，在您的场景中，遗留客户端不会发生这种情况，直到您想在一段时间内更新它们并且您依赖于您的对象对您的 IDE 预览的所有方法都有实现。:)

抽象类的事实是（正如您所提到的）您提供了默认实现，因此可以在客户端依赖您的对象实现方法。

希望这有助于解决问题。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:57:12.480

接口表示从该接口对其用户可用的一组**所有**方法，而不是可以添加其他方法的一些方法。这是一份不少也不多的契约。

这种设计最好的一点是没有歧义。**Java 是一种静态类型语言，需要从接口声明**中完全了解所有可用方法。在 JVM 内部，**只有一个**接口类表示，它需要包含完整的可用抽象方法集。

当您有一个具有一些已实现方法的抽象类时，它的语义是一个无法实例化但其唯一目的是扩展并实现其抽象方法的类。抽象类强制执行 IS-A 关系，而接口强制执行 BEHAVES-AS

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:04:52.327

接口的作用不仅仅是方法的声明。它们构成了基于合同/首次开发的基础。这些合约 API 定义了什么是输入，什么是输出。和任何合同一样，它们只有在满足所有条件时才有效。这就是类必须实现已实现接口的所有api的原因。

有一些设计模式定义了处理版本和新开发的方式。在实例化这些接口的实现时应该使用的工厂/抽象工厂模式（以便它们可以在内部验证要使用的正确版本是实现）。

您所要求的灵活性可以通过适当的设计来实现，而不是期望通过编程语言来实现。对于将新版本实现插入旧接口的编程工具是编程错误。但它不同于向后兼容中断。更新版本的组件的可用性并不一定意味着会有向后兼容性中断。成熟的产品或组件总是支持旧版本，只要它们不会成为真正的维护难题。因此，在大多数情况下，除非有一些您想使用的新功能，否则用户不必担心更新版本的可用性。

# python - Python Logging SMTP 处理程序消息未发送

> ID：12561417
> 
> 赞同：1
> 
> 时间：2012-09-24T08:34:30.893
> 
> 标签：python, debian, raspberry-pi

我正在使用日志记录到旋转文件处理程序和 smtp 处理程序 - 取决于级别。在 Debian 和 Ubuntu 下 - 此日志使用两个处理程序。我在 RaspberryPi 上运行相同的代码。它记录到旋转处理程序，但我没有收到电子邮件。rPi 需要哪些额外配置？

日志记录.conf

```
[formatters]
keys=simpleFormatter

[loggers]
keys=root,simpleExample

[handlers]
keys=consoleHandler,rfileHandler

[formatter_simpleFormatter]
format=%(asctime)s - %(name)s - %(levelname)s - %(message)s 
datefmt= '%Y-%m-%d %H:%M:%S'

[logger_root]
level=INFO
handlers=consoleHandler,rfileHandler,email

[handler_consoleHandler]
class=StreamHandler
level=INFO
formatter=simpleFormatter
args=(sys.stdout,)

[handler_rfileHandler]
class=handlers.RotatingFileHandler
backupCount=5
maxBytes=500
formatter=simpleFormatter
level=INFO
args=('/blabla/logs/blabla.log',)

[logger_simpleExample]
level=INFO
handlers=consoleHandler
qualname=simpleExample
propagate=0

[handler_email] 
class=handlers.SMTPHandler 
level=WARNING 
formatter=simpleFormatter 
args=('target url','sendemail',['erich@*****.com'],'EGIM Outstation Logger',  ('username','pw')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:47:45.230

我已经通过为不同的进程克隆单独的日志配置来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T20:39:24.427

您必须添加`,`具有一项的元组项的末尾

```
args=('target url','sendemail',['erich@*****.com',],'EGIM Outstation Logger',  ('username','pw')) 
```

# c++ - 具有二维数组的 PInvoke 返回结构

> ID：12561418
> 
> 赞同：3
> 
> 时间：2012-09-24T08:34:32.173
> 
> 标签：我有在c++, c++, interop, pinvoke, marshalling, managed

[我有在c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题") Win32 DLL中定义的结构，如下所示：

```
typedef struct matrix
{
  double** data;
  int m;
  int n;
} Matrix; 
```

还有一个功能：

`Matrix getMatrix(void);`

```
Matrix getMatrix()
{
    Matrix mat;

    mat.m = 2;
    mat.n = 2;

    mat.data    = (double**)  malloc (sizeof(double*) * 4);

    mat.data[0] = (double* )  malloc (sizeof(double) * 2);
    mat.data[1] = (double* )  malloc (sizeof(double) * 2);

    mat.data [0][0]=1;
    mat.data [0][1]=2;
    mat.data [1][0]=3;
    mat.data [1][1]=4;

    return mat;
} 
```

`P/Invoke`如果我从 C# 应用程序中使用，如何捕获此函数的返回值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T09:19:31.620

我不确定它是否有效，但从内存中：Declare data as IntPtr 并使用它：

```
static double[][] FromNative (IntPtr data, int m,int n)
{
   var matrix=new double[m][];

   for(int i=0;i<m;i++)
   {
       matrix[i]=new double[n];
       Marshal.Copy(Marshal.ReadIntPtr(data),matrix[i],0,n);
       data =(IntPtr)(data.ToInt64()+IntPtr.Size);
   }

   return matrix;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:54:23.183

答案很简短但令人失望：您必须将多维数组转换为一维数组。

使用 AllocHGlobal 有一个答案：[Pass multi-dimensional array from managed code to unmanaged code](https://stackoverflow.com/questions/7153521/pass-multi-dimensional-array-from-managed-code-to-unmanaged-code)

此解决方案做类似的事情，但在您的情况下，在 C# 定义中，您必须使`data`字段为 IntPtr 类型，并且在非托管代码中，您必须假设它是一维数组。

还有另一种使用`Marshal.UnsafeAddrOfPinnedArrayElement`（[MSDN](http://msdn.microsoft.com/ru-ru/library/system.runtime.interopservices.marshal.unsafeaddrofpinnedarrayelement.aspx)和[StackOverflow](https://stackoverflow.com/questions/2026228/c-marshalling-a-pointer-to-an-int-array-from-a-sendmessage-lparam)）的解决方案，但它仍然假设您使用的是一维数组。

如果您说出您要解决的问题是什么，将会有更好的选择。它是一个纯粹的从一个非常重要的功能返回并忘记这个 PInvoke 还是你试图做一个不断的双向编组？

# java - 通用 DAO 如何为所有不同的 DAO 实现返回相同的类型？

> ID：12561429
> 
> 赞同：1
> 
> 时间：2012-09-24T08:35:37.277
> 
> 标签：java, dao, jdo, datanucleus, genericdao

我正在为我的 DataNucleus JDO DAO 创建通用 DAO。通用 DAO 将执行获取、更新、删除、创建操作和一些其他通用操作，因此这些实现可以在更具体的 DAO 中进行扩展。

是否有可能以某种方式扩展通用 DAO 并让它在例如通过 id 获取对象时返回正确的类型？

```
User user = userDao.get(userId); // Is this possible when UserDao extends generic DAO ?? userDao should return user of type User instead of object. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:42:34.697

是的，可以使用泛型来做到这一点：

```
public abstract class Dao<T> {
    public T get(String id) { ... }

    ...
}

public class UserDao extends Dao<User> {
    ...
}

UserDao userDao = new UserDao();
User user = userDao.get(userId); //Returns a User 
```

根据您的需要，`Dao<T>`可以是抽象基类或通用接口（例如`public interface IDao<T> { ... }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:56:18.330

verdesmarald 已经回答了您的部分问题。我想在 verdesmarald 的代码中添加一项重要更改

您应该更喜欢组合而不是继承。UserDao 应该有一个 Dao，而不是从 Dao 扩展 UserDao。这样，您的代码将不会绑定到单个实现，并且可以在单元测试期间模拟 Dao。

# java - 停止单个石英调度程序

> ID：12561435
> 
> 赞同：1
> 
> 时间：2012-09-24T08:36:03.190
> 
> 标签：java, spring, quartz-scheduler

我有 5 个不同的石英调度程序，它们实现了 5 个不同的作业。如果我要停止一个调度程序，其余的调度程序就会停止。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:14:33.060

我很确定你实际上创建了对同一个调度程序的引用，你需要给每个调度程序一个不同的“调度程序名称”。目前看起来每次创建新调度程序时都会默认调度程序名称。

> “作业执行者”实际上不是 SchedulerFactoryBean。它是由 SchedulerFactoryBean 提供的调度程序 bean（准确地说，调用它的 start 方法会调用触发 Trigger-s 的聚合 QuartzScheduler.start 方法）。事实上，这个调度器被存储（和查找）在调度器名称（如果没有明确设置，对于每个配置的调度器工厂bean具有相同的默认值）在调度器存储库单例（调度器Repository.getInstance（））下。除非您为 SchedulerFactoryBean-s 设置不同的 schedulerName，否则您将始终通过每个 SchedulerFactoryBean-s 获得相同的调度程序。

[http://forum.springsource.org/showthread.php?40945-Multiple-Quartz-SchedulerFactoryBean-instances](http://forum.springsource.org/showthread.php?40945-Multiple-Quartz-SchedulerFactoryBean-instances)

我知道这是指 Spring Beans，但我仍然认为这里同样适用。

# regex - 如何在正则表达式中接受 2 个或多个单词

> ID：12561437
> 
> 赞同：0
> 
> 时间：2012-09-24T08:36:08.023
> 
> 标签：regex, validation

如何在我的正则表达式中添加两个以上的条件？

我应该放什么让我的正则表达式接受其他词？我需要整体接受，以便我可以将值传递给其他页面

例如：也接受

```
contact2012,service2012,docs2014 
```

正则表达式

```
 "pas":{             
    "regex":"/service2012/",
    "alertText":"* Invalid Password"}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:39:15.063

尝试使用以下正则表达式：

```
/contact2012|service2012|docs2014/ 
```

它将匹配包含用 . 分隔的任何关键字的字符串`|`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:39:18.023

你可能想要替代品。替代品用 | 分隔 （管道）。在大多数情况下，您还想用括号括起来： (Foo|Bar)

# c++ - C++ InMemory 缓存库

> ID：12561439
> 
> 赞同：2
> 
> 时间：2012-09-24T08:36:15.123
> 
> 标签：c++, memcached

我们有一个使用 UDP 服务的应用程序，并观察到 ​​75% 的对该 UDP 服务的调用是重复的。

因此希望应用 In-Memory Cache ，以避免昂贵的网络调用并提高应用程序的周转时间。

以前从未使用过缓存，因此任何指向 C++/Unix 环境中合适的缓存库的指针都会有很大帮助。

还想跨多个进程共享此缓存。

需要缓存来存储字符串类型的键值对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:39:26.843

看看[redis](http://redis.io/)，它是一个 noSQL 键值数据库。在这里你有一个[交互式教程](http://try.redis-db.com/)。我们成功地在我们的几个应用程序中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:38:15.890

[Gemfire](http://www.vmware.com/products/application-platform/vfabric-gemfire/overview.html)（无关系）是一个商业分布式缓存系统。服务器是用 Java 编写的，但存在对 C++（以及其他）的本机支持。

# android - 在执行按钮时更新 textView？- 安卓

> ID：12561443
> 
> 赞同：1
> 
> 时间：2012-09-24T08:36:32.703
> 
> 标签：android, button, process, updates, settext

我在按钮中有一个进程（大进程）。我想用不同的值更新 TextView。像：

*   正在连接...
*   接收文件...
*   完全的...

ETC..

我正在使用 setText(); void，但我只得到 setText(); 的最后一个值，在这种情况下：

estatEdit.setText("Tareas completadas!");

这是我的代码...

```
public class sincroGeneral extends Activity implements OnClickListener { 
    private static final String CATEGORIA = "libro"; 
    private static final String HOST = "192.168.1.165"; 
    private static final int PORT = 9889; 
    private static final int PORTDATOS = 9888;

    int filesize=6022386;
    int bytesRead;
    int current = 0;

    byte [] mybytearray  = new byte [filesize];

    byte buffer[] = new byte[1024];
    byte buffer2[] = new byte[1024];
    byte bufferArxiu[] = new byte[2048];
    int s;
    int s2;
    String Benvinguda; 
    String compra;
    EditText estatEdit;
    EditText editInflated;

    File myfile;

    SQLiteDatabase baseDatos;
    LinearLayout mainLayout;
    View view2;

    /** Called when the activity is first created. */ 
    @Override 
    public void onCreate(Bundle bundle) { 
        super.onCreate(bundle); 
        setContentView(R.layout.sincrolayout); 

        Button b = (Button) findViewById(R.id.BotoEnviarSincro); 
        b.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                Button b = (Button) findViewById(R.id.BotoEnviarSincro);
                estatEdit = (EditText) findViewById(R.id.editSincro);

                estatEdit.setText("Enviando petición...");

                b.setClickable(false);
                b.setFocusable(false);
                b.setEnabled(false);

                ProcesRebre();

                b.setClickable(true);
                b.setFocusable(true);
                b.setEnabled(true);
            }
            });  
    }

    private void mostrarMensaje(String mensaje)
    {
        Toast.makeText(this, mensaje, 500).show();
    }

    private void ProcesRebre()
    {
        Socket sockDatos = null; 
        Socket clientSocket = null;

        DataOutputStream sortida;
        DataInputStream entrada;
        BufferedReader inFromServer;

        DataOutputStream sortidaDatos;
        DataInputStream entradaDatos;
        BufferedReader inFromServerDatos;

        try { 
            estatEdit.setText("Conectando...");

            clientSocket = new Socket(HOST, PORT);

            sortida = new DataOutputStream(clientSocket.getOutputStream());
            entrada = new DataInputStream(clientSocket.getInputStream());
            inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

            sortida.writeBytes("FAS4-F@S-1-F@S- 1.0.152-F@S-");

            Log.i("Enviat","OK");

            clientSocket.setSoTimeout(30000);

            s =  entrada.read(buffer);
            String str = new String(buffer, "UTF8");

            clientSocket.setSoTimeout(0);

            Log.i("Rebut","OK");

           if(str.contains("PDA1-F@S-"))
           {
                sockDatos = new Socket(HOST, PORTDATOS);

               estatEdit.setText("Esperando archivo....");
                sortidaDatos = new DataOutputStream(sockDatos.getOutputStream());
                entradaDatos = new DataInputStream(sockDatos.getInputStream());
                inFromServerDatos = new BufferedReader(new InputStreamReader(sockDatos.getInputStream()));

                sortidaDatos.writeBytes("FAS4-F@S-1-F@S- 1.0.150-F@S-");

                if(sockDatos.isConnected())
                {
                     System.out.println("Conectat amb port 9888");
                }

                File carpetaSincro = new File(Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/");
                carpetaSincro.mkdirs();

                File ArxiuSincro = new File (Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/sincroorders.zip");

                if(ArxiuSincro.exists())
                {
                    ArxiuSincro.delete();
                }

                File ArxiuSincro2 = new File (Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/sincroorders.zip");
                ArxiuSincro2.createNewFile();

                sortida.writeBytes("FAS2-F@S-");

                String str2= "";

                clientSocket.setSoTimeout(30000);

                while(true && (!str2.contains("PDA7-F@S-") && !str2.contains("PDAERR1-F@S-")))
                    {
                        s2 = entrada.read(buffer2);  

                        str2 = new String(buffer2, "UTF8");

                    }

                clientSocket.setSoTimeout(0);

                String replace1 = str2.replace("PDA7-F@S-", "");
                String replace2 = replace1.replace(" ", "");
                String tamanyArxiu = replace2.replace("-F@S-ZIP","");

                int bufferZip = Integer.parseInt(tamanyArxiu);

                boolean in;
                s2 = 0;
                sockDatos.setSoTimeout(30000);
                RandomAccessFile archivo = new RandomAccessFile(Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/sincroorders.zip", "rw");
                long tamArxActual = 0;

                    while(bufferZip>=tamArxActual)
                    {
                        sockDatos.setSoTimeout(10000);
                        s2 = entradaDatos.read(bufferArxiu);
                        estatEdit.setText("Recibiendo archivo....");
                        archivo.write(bufferArxiu);

                        tamArxActual = archivo.length();

                        Thread.sleep(2);
                    }

                    sockDatos.setSoTimeout(0);

                    estatEdit.setText("Archivo recibido");

                    str2 = "";

                    clientSocket.setSoTimeout(30000);

                    while(true && (!str2.contains("PDA3-F@S-") && !str2.contains("PDAERR1-F@S-")))
                    {
                        s2 = entrada.read(buffer2);  

                        str2 = new String(buffer2, "UTF8");

                    }

                    clientSocket.setSoTimeout(0);

                    if(str2.contains("PDA3-F@S-"))
                    {
                        sortida.writeBytes("FAS7-F@S-");
                        Thread.sleep(2000);

                        sortida.writeBytes("FAS6-F@S-");
                    }

                    sockDatos.close();
                    clientSocket.close();

                    String pathZip = Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/sincroorders.zip";
                    String directoriExtraccio = Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/";
                    String pathTxt = Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/SincrofitPC.txt";
                    UnzipUtility unzipper = new UnzipUtility();

                    try {
                        unzipper.unzip(pathZip, directoriExtraccio);
                    } catch (Exception ex) {
                        System.out.print("No s'ha pogut descomprimir l'arxiu");
                        ex.printStackTrace();
                    }

                    File f = new File(Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/SincrofitPC.dll");
                    f.renameTo(new File(Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/SincrofitPC.txt"));

                    importarSincro();

           }

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void importarSincro() throws SQLException, IOException
    {

        int contador = 0;
        String LiniaSQL;

        FileInputStream fstream = new FileInputStream(Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/SincrofitPC.txt");
        DataInputStream DataInFile = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(
                new InputStreamReader(new FileInputStream(Environment.getExternalStorageDirectory()+"/OrdersCE/Syncro/SincrofitPC.txt"), "Latin-1"));

        String FinalSQL = "";

        baseDatos = openOrCreateDatabase("BBDD", MODE_WORLD_WRITEABLE, null);

        baseDatos.execSQL("BEGIN");
        while ((LiniaSQL = br.readLine()) != null)   {

            if(contador > 0)
            {
                FinalSQL = LiniaSQL.replace("***** ", "");
                if(FinalSQL.contains("DELETE") && !FinalSQL.contains("DELETE FROM"))
                {
                    FinalSQL = FinalSQL.replace("DELETE", "DELETE FROM");

                    try{
                        baseDatos.execSQL(FinalSQL);
                    }catch(SQLiteException e){

                    }
                }
                else
                {
                    try{
                        baseDatos.execSQL(FinalSQL);
                    }catch(SQLiteException e){

                    }
                }

                LiniaSQL = "";
            }

            contador++;

        }
        baseDatos.execSQL("COMMIT");
        estatEdit.setText("Tareas completadas!");
        baseDatos.close();

    }

    /////////////////////////////////////////

    public static String deserializeString(File file)
              throws IOException {
                  int len;
                  char[] chr = new char[4096];
                  final StringBuffer buffer = new StringBuffer();
                  final FileReader reader = new FileReader(file);
                  try {
                      while ((len = reader.read(chr)) > 0) {
                          buffer.append(chr, 0, len);
                      }
                  } finally {
                      reader.close();
                  }
                  return buffer.toString();
              }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }

} 
```

提前致谢！

大卫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:43:00.653

Internet 连接是一个阻塞操作，即它会阻塞 UI，直到操作完成（这就是为什么只看到最后一次更新的原因）。您必须将其移至线程（甚至更好地移至 AsyncTask）。但是你会遇到另一个问题，你不能从主线程之外更新 UI。因此，您必须使用 Handler 来更新 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:53:42.503

您正在主线程上执行网络操作，这里要理解的是 Android 在单个主线程上运行，所以如果您对服务/活动/内容提供程序等进行任何耗时的操作，它将阻塞您的主线程，因此所有的东西都会看起来它们被阻止/无响应，实际上您将在几秒钟后收到 ANR 消息。

最后，遵循这种方法

1.  将您的网络扩展代码移动到单独的线程
2.  实现消息处理机制以在主线程 (Handler/Looper) 上更新您的 UI

为了进一步帮助解决问题，Android 为此目的为您提供了一个 AsynTask 类。您可以在 doInBackground() 中进行操作，并且在条件下您可以通过 onProcessUpdate() 更新您的 UI

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:54:04.867

如果您在 UI 线程上运行此过程，可能会导致提示“应用程序
未响应”的对话框。因此我建议必须在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或 Service中完成此任务

你可以更新你的文本视图

```
onPreExecute()
onProgressUpdate()
onPostExecute() functions in AsyncTask. 
```

例如下载文件

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

# sql-server - 引用 ASP.NET 用户表

> ID：12561446
> 
> 赞同：0
> 
> 时间：2012-09-24T08:36:39.580
> 
> 标签：sql-server, asp.net-mvc-3, authorization

我正在开发一个 MVC 3 应用程序，并考虑使用 ASP.NET 的默认用户、角色和配置文件实现。我创建了 aspnetdb 数据库，并且可以非常快速地验证用户 - 没问题。

当我想将事物与用户关联时，问题就开始了。例如，我希望用户上传图片——每张图片都应该与上传它的用户相关联。

如果 aspnet_Users 表不在不同的数据库中，我只需在 Images 表中添加一个 UserId 列，设置适当的外键就不用担心了。[这也是Django](https://www.djangoproject.com/)中使用的直接方式。不幸的是，SQL Server 2008 不支持数据库之间的外键约束。

我可以在我的主数据库中创建所有 ASP.NET 表，但我不确定缺点。

创建 ASP.NET 应用程序的任何人都可能遇到此问题。最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:02:17.383

您应该将 asp.net 成员资格提供程序表添加到您的主数据库。我认为您不会这样做的唯一原因是它们是自包含的（例如，您正在创建访问控制项目）。

# mongodb - 启动 mongodb 集群

> ID：12561450
> 
> 赞同：0
> 
> 时间：2012-09-24T08:36:57.297
> 
> 标签：mongodb

我在 3 台不同的机器上启动 3 个 mongod 进程，并尝试在另一台也运行应用程序服务器的机器上运行 mongos 进程。

我收到这条消息：

```
~$ mongos --configdb mongo1:27017,mongo2:27017,mongo3:27017
Mon Sep 24 10:34:05 mongos db version v2.0.4, pdfile version 4.5 starting (--help for usage)
Mon Sep 24 10:34:05 git version: nogitversion
Mon Sep 24 10:34:05 build info: Linux yellow 2.6.24-29-server #1 SMP Tue Oct 11 15:57:27 UTC 2011 x86_64 BOOST_LIB_VERSION=1_46_1
Mon Sep 24 10:34:09 ERROR: config servers mongo1:27017 and mongo2:27017 differconfig servers mongo1:27017 and mongo2:27017 differconfig servers mongo1:27017 and mongo2:27017 differconfig servers mongo1:27017 and mongo2:27017 differconfig servers not in sync! config servers mongo1:27017 and mongo2:27017 differ
chunks: "d41d8cd98f00b204e9800998ecf8427e"  EOO
EOO EOO
configServer startup check failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:36:33.810

我已经`mongod.lock`从所有配置服务器中删除并重新启动了 mongod。这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T17:43:20.803

有2种方法可以做到，

1）清除数据文件夹并重新启动服务器，它将照常启动，没有任何错误，

2) 删除 mongod 锁定文件并使用 --repair 选项。

# c# - 比较两个对象列表以进行同步

> ID：12561454
> 
> 赞同：0
> 
> 时间：2012-09-24T08:37:16.480
> 
> 标签：c#, c#-4.0

假设我有一堂课，

```
Class A
{
    ID;
    Name;
    LastModifiedDate;
} 
```

我有两个列表，ListA1 和 ListA2，

```
ListA1 = new List<A>(); 
ListA2 = new List<A>();

ListA1.Add(new A{ ID=1, Name="A", LastModifiedDate='1/1/2000' })
ListA1.Add(new A{ ID=2, Name="B", LastModifiedDate='1/2/2000' })
ListA1.Add(new A{ ID=3,Name="C", LastModifiedDate='1/2/2000' })
...................................................

ListA2.Add(new A{ ID=4, Name="D", LastModifiedDate='1/4/2000' })
ListA2.Add(new A{ ID=1, Name="A", LastModifiedDate='1/5/2000' })
ListA3.Add(new A{ ID=2, Name="B", LastModifiedDate='1/2/2000' }) 
```

现在，我需要通过比较 LastModifiedDate 来比较 ListA1 和 ListA2。我需要两个新的列表，描述 ListA1 中的新/更新项目和 ListA2 中的新/更新项目。

**更新**：我正在寻找的输出是，

```
newUpadtedListA ={
    new A{ ID=4, Name="D", LastModifiedDate='1/4/2000' },
    new A{ ID=1, Name="A", LastModifiedDate='1/5/2000' }
}

newUpadtedListB ={
    new A{ ID=3, Name="C", LastModifiedDate='1/2/2000' }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:45:23.667

您可以使用 Linq 和[`Enumerable.Except`：](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

```
var a1Modified = ListA1.Select(x => x.LastModifiedDate);
var a2Modified = ListA2.Select(x => x.LastModifiedDate);
var a1NotInA2LastModified = a1Modified.Except(a2Modified);
List<A> newInA1 = (from a1 in ListA1
              join notInA2 in a1NotInA2LastModified
              on a1.LastModifiedDate equals notInA2
              select a1).ToList(); 
```

相反，有什么新的`List2`：

```
var a2NotInA1LastModified = a2Modified.Except(a1Modified);
List<A> newInA2 = (from a2 in ListA2
              join notInA1 in a2NotInA1LastModified
              on a2.LastModifiedDate equals notInA1
              select a2).ToList(); 
```

**编辑**：根据您的最后一次编辑，这`ID`是唯一的关键列。这应该以一种相当有效的方式为您提供所需的一切：

```
var a1IDs = ListA1.Select(a => a.ID);
var a2IDs = ListA2.Select(a => a.ID);
var newInA1 = from l1 in ListA1
              join newA1 in a1IDs.Except(a2IDs)
              on l1.ID equals newA1
              select l1;
var newInA2 = from l2 in ListA2
              join newA2 in a2IDs.Except(a1IDs)
              on l2.ID equals newA2
              select l2;
var updatedInA1 = from l1 in ListA1
                  join l2 in ListA2
                  on l1.ID equals l2.ID
                  where l1.LastModifiedDate > l2.LastModifiedDate
                  select l1;
var updatedInA2 = from l2 in ListA2
                  join l1 in ListA1
                  on l2.ID equals l1.ID
                  where l2.LastModifiedDate > l1.LastModifiedDate
                  select l2; 
```

您可以枚举这些序列并执行您需要做的任何事情来添加或更新新的/更改的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:07:03.353

```
 var ListA1 = new AList();
  var ListA2 = new AList();

  ListA1.Add(new A { ID = 1, Name = "A", LastModifiedDate = new DateTime(2012, 01, 01) });
  ListA1.Add(new A { ID = 2, Name = "B", LastModifiedDate = new DateTime(2012, 01, 01) });
  ListA1.Add(new A { ID = 3, Name = "C", LastModifiedDate = new DateTime(2012, 01, 01) });

  ListA2.Add(new A { ID = 4, Name = "D", LastModifiedDate = new DateTime(2012, 01, 02) });
  ListA2.Add(new A { ID = 1, Name = "A", LastModifiedDate = new DateTime(2012, 01, 02) });
  ListA2.Add(new A { ID = 2, Name = "B", LastModifiedDate = new DateTime(2012, 01, 02) });

  ListA1.CompareList(ListA2); 
```

现在我将 ListA1 与 ListA2 进行比较，当发生这种情况时，理论上您应该希望将 ListA2 中的 ID 4 添加到 ListA1 中，然后更新 ID 1 和 2，因此输出应该是

```
ID 1 - 2012/01/02
ID 2 - 2012/01/02
ID 3 - 2012/01/01
ID 4 - 2012/01/02 
```

请将此代码用于输出

```
 public class AList : List<A>
  {
    public void CompareList(List<A> SecondaryList)
    {
      var compareResults = (from a in SecondaryList
                           join b in this on a.ID equals b.ID into gj
                           from subset in gj.DefaultIfEmpty()
                           select new { IsNew = (subset == null),
                                        IsUpdate = (subset != null && a.LastModifiedDate > subset.LastModifiedDate),
                                        Output = a}).ToList();
      foreach (var compareResult in compareResults)
      {
        if (compareResult.IsNew)
          this.Add(compareResult.Output);
        else if (compareResult.IsUpdate)
          this[this.IndexOf(this.FirstOrDefault(x => x.ID == compareResult.Output.ID))] = compareResult.Output;
      }
    }
  } 
```

编辑：我犯了一个错误，不应该是`a.LastModifiedDate > subset.LastModifiedDate`在`subset.LastModifiedDate > a.LastModifiedDate`更新设置中，而且循环中也有一个小问题。

所以我基本上在做的是基于 ID 进行“左连接”。因此，如果 ID 未加入，则返回 null，但我们始终希望输出为“辅助列表”，这是因为如果我们需要更新或编辑，则需要使用列表 2 中的对象。如果有null 这意味着它不存在于列表一中，因此我们设置`IsNew`为 true 并`IsUpdate`在返回不为 null 并且返回结果修改了更新的日期时设置。

# database-project - 部署数据库项目

> ID：12561456
> 
> 赞同：0
> 
> 时间：2012-09-24T08:37:27.443
> 
> 标签：database-project

在处理 VS 数据库项目时，我感到很困惑。好的，在尝试将 DB 项目部署到目标数据库时，如果在对象中包含对同一数据库的引用，则对象（SP、触发器）仍然引用以前的数据库。例如：

我有一个 SP，其中包含一个作为 DBName..TableName 的表引用。在我将项目部署到具有新名称的目标数据库后，该对象仍然引用同一个 DB，即 DBName。现在为了使我的部署工作，我将此硬编码名称更改为 $(DBName) 变量，并将其作为变量传递，同时将数据库部署到目标数据库。这会在部署时出错。那么我们能否将包含交叉引用或对同一数据库的引用的数据库项目部署到新的数据库目标并完全更改这些名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:24:47.920

只需尝试从数据库项目属性菜单中的“发布...”命令（右键单击解决方案资源管理器中的项目）。对话框打开后，您可以设置变量的值（例如 [$(MyDatabase)]。如果您选择“创建发布脚本”-选项，将生成一个包含 SQLCMD 变量的脚本，该变量可以设置为您的目标数据库。

# android - PhoneGap Android Torch 插件不起作用

> ID：12561457
> 
> 赞同：0
> 
> 时间：2012-09-24T08:37:30.380
> 
> 标签：android, cordova, camera, flashlight

## PhoneGap 火炬插件

我正在尝试让 phonegap/android 的 torch 插件工作。我使用了这个代码 [Github Torch Plugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Torch) 我没有收到任何错误，我不知道可能的错误在哪里。我正在使用cordova-2.0.0 库。

这是我的 index.html

`<script type="text/javascript" src="Torch.js">
</script> <script type="text/javascript" src="TorchFunctions.js"> </script> </body> </html>`

这是 TorchFunctions.js

```
 window.plugins.Torch.toggle( 
    function() { console.log( "toggle" ) }                          
,   function() { console.log( "error" ) }                           
); 
```

我在三星 Galaxy SIII 上调试这个。我读到三星设备可能会出现问题 - 这是真的吗？如果是这样，有人可以提出任何建议吗？也许插件不是最新的。最近有人用过这个插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:00:06.580

你有没有尝试过：

```
window.plugins.Torch.turnOn( 
    function() { console.log( "turnOn" ) }                          // success
,   function() { console.log( "error" ) }                           // error
); 
```

否则我可以告诉你我的 S3 和其他三星手机也有问题。在我的几个项目中，我正在使用我也没有 100% 工作的前端 LED。如果有可能，最好先在非三星设备上测试它，然后再根据需要调整代码。

还要确保遵循[https://github.com/phonegap/phonegap-plugins/blob/master/Android/Torch/README.md上的所有其他步骤](https://github.com/phonegap/phonegap-plugins/blob/master/Android/Torch/README.md)

确保您之前已将 js 文件复制到 phonegap 应用程序的根目录或在 html 中提供正确的路径

```
 <script src="/folderWithJscript/Torch.js"></script> 
```

声明必须在您的 html 文件的头部，例如：

```
 <html>
 <head>

 <script src="Torch.js"></script>

 </head>
 <body></body></html> 
```

要从按钮调用该函数/将其链接到您的 html 中，它将类似于：

```
<a href="#torch" onclick="window.plugins.Torch.turnOn()">Torch on</a> 
```

这只是一个猜测。请检查其余的文档。

在 TorchFunctions.js 中保持 Torch 函数独立也很好。您只需要再次将该脚本包含在 html 标头中！

您还必须在您的 android 项目中创建一个名为 res 的文件夹（如果还没有的话），然后是另一个名为 xml 的文件夹，其中包含一个名为 plugins.xml 的文件添加一个插件行到 res/xml/plugins.xml

```
<plugin name="Torch" value="nl.debree.phonegap.plugin.torch.TorchPlugin" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T06:23:49.140

我有这个问题。在 adb 的日志输出中，我看到：

```
D/TorchPlugin(30890): Plugin created
W/System.err(30890):    at nl.debree.phonegap.plugin.torch.TorchPlugin.<init>(TorchPlugin.java:41)
I/System.out(30890): Error adding plugin nl.debree.phonegap.plugin.torch.TorchPlugin. 
```

解决方案是将以下权限添加到我的 Android 清单中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.FLASHLIGHT" />
<uses-permission android:name="android.permission.CAMERA" /> 
```

我希望这可以帮助别人！

*   加文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:33:42.313

在 android phonegap 应用程序中使用本机代码的另一种选择是使用带有 webview 的 actionbar 用于 phonegap 下方或上方。

此处有关仅适用于 3.0 以上的本机 android 操作栏的信息：

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

或适用于几乎所有版本/改编本机操作栏的第三方操作栏：

您可能想查看 ActionBarSherlock [http://actionbarsherlock.com/](http://actionbarsherlock.com/)。源代码可在此处获取[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)。它将让您了解它是如何与片段一起使用的。它会给你一些关于如何进行的想法。

谷歌创建了一个 android 兼容性库，以使用他们为低版本（例如 1.5 及更高版本）上的蜂窝创建的一些新 API。它可以在 android sdk 文件夹中找到，例如 E:\Program Files\Android\android-sdk-windows\android-compatibility\v4\android-support-v4.jar。如果您没有此 jar，则需要使用 avd 管理器下载它。

# c# - 遍历 JSON 数组并在 HTML 表中显示结果

> ID：12561458
> 
> 赞同：0
> 
> 时间：2012-09-24T08:37:47.250
> 
> 标签：c#, javascript, html, jquery

我尝试遍历一个数组并在 HTML 表中显示结果。数据来自网络服务。

我的 JavaScript 函数：

```
function loadDate() {

        var PanelID = document.getElementById('PanelID').value;
        alert(PanelID);

        $.ajax({
            type: "POST",
            url: "../../WebService/QRCode.asmx/getDatetime",
            data: "{ 'PanelID': '" + PanelID + "' }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            cache: true,
            success: function(data) {

                var table = document.createElement('table');
                var str = '<table>';
                str += '<tr><th>Von</th><th>Bis</th><th>Thema</th></tr>';

                for(var i = 0; i < data.d.length; i++) {

                    str += '<tr><td>' + data.d[i].Von + '</td><td>' + data.d[i].Bis + '</td><td>' + data.d[i].Thema + '</td></tr>';

                }
                str += '</table>';
                return str;

                var existingDiv = document.getElementById('DataTable');
                existingDiv.innerHTML = loadDate(data);

            },
            error: function(x, e) {
                alert("The call to the server side failed. " + x.responseText);
            }
        });
    } 
```

HTML 部分

```
 <body>
    <h1>
        Check-In und Check-Out von Besprechungen</h1>

    <form id="form1" runat="server">
  <div id = "DataTable"> </div>
    <p>
        <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </asp:ToolkitScriptManager>
        Raumname: 
        <br />
        <asp:TextBox type="text" name="Panels" ID="PanelID" value="" runat="server"></asp:TextBox>
        <br />
        <br />
        <asp:TextBox type="text" ID="Table" mode="multiline" runat="server" Coloumns="100" Rows="200"
            Height="230px" Width="405px"></asp:TextBox>

        <br />
        <br />
        <asp:Button ID="button" runat="server" Text="Check-In" Width="99px" OnClientClick="return loadDate();" />
        <asp:Button ID="button1" runat="server" Text="Check_Out" Width="99px" />
    </p>
    </form> 
</body> 
```

问题是我的代码中有些东西不起作用。如果我使用上面的代码执行此操作，我将无法显示这些值。

我认为这与 for 子句有关，因为

fi 更改 FOR 子句，例如：

```
 for(var i = 0; i < data.d.length; i++) {
                    var VonDatum = data.d[i].Von;
                    $("#Table").val(VonDatum);  
} 
```

所以我可以在文本框中显示 Von 值。但如果我这样做，FOR 子句只显示一个值，但数组中有 30 多个值。

我的 JSON 数据看起来像：

```
{"d":[{"Von":"18.05.2012 00:00:00","Bis":"18.06.2012 00:00:00","Thema":"Raum ist gesperrt","PanelIDs":"FAT-1"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:46:49.233

**老的**

```
return str;

var existingDiv = document.getElementById('DataTable');
existingDiv.innerHTML = loadDate(data); 
```

**新的**

```
var existingDiv = document.getElementById('DataTable');
existingDiv.innerHTML = loadDate(data);

return str; 
```

但是你`str`没有设置任何元素，所以*你想设置元素*？像这样

```
var existingDiv = document.getElementById('DataTable');
    existingDiv.innerHTML = str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:42:11.937

为什么你有

```
return str; 
```

你要把它退回到哪里？你的代码应该是

```
existingDiv.innerHTML = loadDate(str); 
```

# google-chrome-frame - 安装后在当前选项卡中加载 Google Chrome Frame

> ID：12561459
> 
> 赞同：0
> 
> 时间：2012-09-24T08:37:56.913
> 
> 标签：google-chrome-frame

我正在提示 IE 用户安装 Chrome Frame 插件。如果用户在 IE 上并且没有安装 Chrome Frame，他们将被重定向（服务器端）到带有自定义消息的页面和 IFrame 中的安装页面：

[http://www.google.com/chromeframe/?quickenable=true](http://www.google.com/chromeframe/?quickenable=true)

安装完成后，Chrome Frame 不会加载到当前选项卡中。有没有办法强迫它成为？我试过包括 redirect=True 但这不起作用，因为我有一个框架中的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:35:21.477

您可以通过添加单个标签使您的页面与 Google Chrome Frame 一起使用，如下所示：

```
<meta http-equiv="X-UA-Compatible" content="chrome=1"> 
```

或通过添加 X-UA-Compatible HTTP 响应标头：

```
X-UA-Compatible: chrome=1 
```

将元标记添加到您在框架中加载的 html 文件中，它应该初始化 chromeframe。

# android - android 上 OpenCV 的优化（neon 指令，tegra 3 上的 GLSL）

> ID：12561462
> 
> 赞同：1
> 
> 时间：2012-09-24T08:38:11.670
> 
> 标签：android, opencv, acceleration

我现在在我的 Android 应用程序开发中使用一些 OpenCV 函数。由于帧速率对程序非常关键，我想知道如何在 android 上启用 OpenCV 的优化，因为我已经阅读了 OpenCV 的最新版本（2.4）使用霓虹灯指令和 GLSL 进行加速，它是自动的吗？启用？或者我需要在 Android.mk 文件中进行编译的任何内容？（PS android 上的Opencv Manager 自动下载“OCV 2.4 pack NVIDIA Tegra 3”alr）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:12:36.957

“OCV 2.4 pack NVIDIA Tegra 3”包包含 OpenCV 的 NEON 和 GLSL 优化。

如果您使用 OpenCV Manager API 进行 OpenCV 初始化，它会自动使用优化的库。

# lisp - 方案：关于cond

> ID：12561470
> 
> 赞同：2
> 
> 时间：2012-09-24T08:39:03.483
> 
> 标签：lisp, scheme

`(cond ((test-1) (expression-1)))`

当我使用条件时，我可以给出（表达式-1）中的几个函数吗？

像这样：

`(cond ((= 1 1) ((fun1) (fun2)) )`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T08:53:12.413

`begin`实际上是可选的—— `cond`（至少在 Scheme 和 Emacs Lisp 中）在每个测试表达式之后采用多个表达式，并在隐式中依次计算它们`begin`

```
(cond ((= 1 1) (fun1 ...) (fun2 ...))
      (t (something-else))) 
```

使用`#t`代替`t`方案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T08:49:06.760

是的，您可以通过将它们包装在 a 中来执行多个表达式，`begin`如下所示

```
(cond ((= 1 1) (begin (fun1) (fun2))) 
```

注意：begin 表达式的返回值将是最后一个表达式的结果，即在示例中，返回值将是 fun2 执行的结果

# objective-c - 如何在没有 url 方案或外部服务器的 2 个本地 ios 应用程序之间共享文件？

> ID：12561471
> 
> 赞同：6
> 
> 时间：2012-09-24T08:39:06.467
> 
> 标签：objective-c, ios, file-sharing

我有 2 个本地应用程序“A”和“B”。我希望应用程序“A”调用应用程序“B”并且“B”使用文件向“A”发送响应。

网址方案是调用应用程序“B”的好解决方案，但将文件发送到“A”是一个糟糕的解决方案。

如何在没有 url 方案且没有外部服务器的情况下将文件从一个应用程序发送到另一个应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T08:54:18.397

除了 URL 选项，您还有一个使用 iOS [keychain](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html#//apple_ref/doc/uid/TP30000897-CH208-SW1)的最佳选项。见这篇[文章](http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html)。

[这里](https://stackoverflow.com/questions/8920181/is-it-possible-to-access-data-across-2-different-ios-apps)提到了其他几个选项。

另一种选择是使用[iCloud](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingiCloud.html#//apple_ref/doc/uid/TP40011195-CH2-SW1) API。

[还有一个，使用UIPasteboard](http://www.roostersoftstudios.com/2012/03/26/a-way-to-share-data-between-apps-on-a-given-ios-device/)在应用程序之间复制粘贴数据。

顺便说一句，URL解决方案有什么问题？Apple 建议您使用[URL 在不同 App 之间共享数据。](https://developer.apple.com/technologies/ios/data-management.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-10T20:12:43.083

我使用了自定义 URL 方案和 UIPasteboard 的组合。我最近在[http://enharmonichq.com/sharing-data-locally-between-ios-apps/](http://enharmonichq.com/sharing-data-locally-between-ios-apps/)上发布了一个完整的教程。

# javascript - 附加 Div 标签无法正常工作

> ID：12561480
> 
> 赞同：0
> 
> 时间：2012-09-24T08:39:31.360
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 3 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我已经提供了添加评论的功能，并将其保存在数据库中。

当用户单击删除按钮时，它将消息显示为“已单击”。

当用户加载实体时，先前添加的评论会显示在带有删除按钮的页面上，当用户单击该按钮时，会出现“单击”消息。

![在此处输入图像描述](../Images/05bc72670f72f6f57508d02bef1cf024.png)

现在，当用户添加新评论时，它会成功保存在数据库中，并与删除按钮一起出现在页面上。

现在，当用户单击删除按钮 msg 不会出现时...（我在从 DB 加载新评论时附加了 Div 标签）

我认为，有一个关于追加的问题，意味着以前的评论删除按钮效果很好，但是当我使用追加添加按钮时它不会工作......

这是代码，将注释保存在 DB 中，并在 succsess 中创建带有按钮的 HTML 代码以在页面上显示数据。

```
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#AddCommentButton').click(function () 

        {
     if (document.getElementById('Comment').value != "")

         $.ajax({

                type: 'post',
                url: '/Comment/SaveComments',
                dataType: 'json',
                data:
                { 

                 'comments' : $('#Comment').val(), 
                 'EType' : @Html.Raw(Json.Encode(ViewBag.EType)), 
                  'EId' : @Html.Raw(Json.Encode(ViewBag.EId))

                },
                success: function (data) {

                      $("p.p12").append('<button type="button" id = "1" class="deleteComment">Delete</button><br />')

                   alert(data.Id);

                }

            });
        });
    });
</script> 
```

并且用户单击删除按钮我已经编写了此代码。

```
$(document).ready(function () {
        $(".deleteComment").click(function ()
         {
            alert("Clicked");

        });
    }); 
```

对于以前的评论，当用户点击删除按钮时，“点击”味精来了，但是当用户点击新添加的评论的删除按钮时，味精不会出现......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:42:24.410

*您需要以活泼*的方式订阅`click`此删除按钮的事件，因为它是动态添加到 DOM 中的。您不能只在您的中使用，因为在此阶段尚不存在删除按钮。因此，根据您使用的 jQuery 版本，有 3 种方法：*`.click()``document.ready`*

 *[`.on()`](http://api.jquery.com/on/),[`.delegate()`](http://api.jquery.com/delegate/)或[`.live()`](http://api.jquery.com/live/).

推荐的方法是`.on()`从 jQuery 1.7 开始支持：

```
$(document).on('click', '.deleteComment', function() {
    alert("Clicked");
}); 
```

而且您不再需要将其包装在`document.ready`.

如果您使用的是旧版本，则与`.delegate()`（在 jQuery 1.4.2 中引入）相同：

```
$(document).delegate('.deleteComment', 'click', function() { 
    alert('Clicked'); 
}); 
```

如果您使用的是更旧版本的 jQuery，那么您应该升级，如果您不想升级，请使用`.live()`：

```
$('.deleteComment').live('click', function() { 
    alert('Clicked'); 
}); 
```

当我在你的代码中时，这里还有一些其他的评论。

代替：

```
<script src="../../Scripts/jquery.js" type="text/javascript"></script> 
```

和：

```
<script src="@Url.Content("~/Scripts/jquery.js")" type="text/javascript"></script> 
```

并替换：

```
url: '/Comment/SaveComments', 
```

和：

```
url: '@Url.Action("SaveComments", "Comment")', 
```

顺便说一句，作为将 url 放入 javascript 的替代方法，您可以直接使用`AddCommentButton`. 你还没有向它展示你的标记，我认为它可能看起来像这样：

```
@Html.ActionLink("Add a comment", "SaveComments", "Comment", null, new { id = "AddCommentButton" }) 
```

现在剩下的就是不显眼的 AJAXify：

```
$(document).ready(function () {
    $('#AddCommentButton').click(function (evt) {
        evt.preventDefault();

        var comment = $('#Comment').val();
        if (comment == '') {
            alert('Please enter a comment');
            return;
        }

        $.ajax({
            type: 'post',
            url: this.href,
            data: { 
                comments : comments, 
                EType: @Html.Raw(Json.Encode(ViewBag.EType)), 
                EId: @Html.Raw(Json.Encode(ViewBag.EId))
            },
            success: function (data) {
                // You probably need to embed the comment id as a HTML data-* attribute
                // to the button instead of using a hardcoded id="1" value
                // which by the way is an invalid value of an id in HTML:
                $('p.p12').append(
                    $('<button/>', {
                        'class': 'deleteComment',
                        'html': 'Delete',
                        'data-id': data.Id
                    }).after($('<br/>'))
                );
            }
        });
    });
}); 
```

现在在您的删除按钮单击回调中，您将能够访问要删除的评论的 id：

```
$(document).on('click', '.deleteComment', function() {
    var commentId = $(this).data('id');
    // TODO: delete the comment
}); 
```

绝对不要在 ASP.NET MVC 应用程序中对 url 进行硬编码。始终使用 url 助手来生成它们。这样做的原因是 url 助手考虑了路由设置和您的应用程序可能运行的虚拟目录。因此，如果稍后您决定更改路由模式，甚至在 IIS 中部署应用程序，您将不再需要遍历所有页面并替换那些错误硬编码的 url 以使应用程序正常工作。*

# c++ - QTime->addSecs 导致分段错误

> ID：12561481
> 
> 赞同：1
> 
> 时间：2012-09-24T08:39:31.897
> 
> 标签：c++, qt

我正在编写简单的*番茄钟*应用程序，它基本上是倒数计时器。现在，我已经开始倒计时了，但奇怪的是，当我向我的类（任意）添加另一个属性时，我得到**了 Sedmentation 错误**错误。

使用gdb，问题应该出在这里：

```
void Status::showPomodoroTime() {
    QTime time = pomodoroTime->addSecs(elapsed);
    activeTime->display(time.toString("mm:ss"));
} 
```

其中 activeTime 是 QLCDNumber 小部件，elapsed 是 int。

更多背景：

```
void Status::createDefaultIntervals()
{
    pomodoroInterval = new QTime(0, 25);
    pomodoroBreak = new QTime(0, 5);
    pomodoroLongBreak = new QTime(0, 15);
}

void Status::run()
{
    if (pomodoroActive == STOP) {
        pomodoroTime = pomodoroInterval;
        showPomodoroTime();
    }
    pomodoroActive = RUN;
    updateStatusArea();
    timerTick();
} 
```

CreateDefaultInterval 肯定在 showPomodoroTime 之前运行。

让我烦恼的是，整个应用程序运行良好。就在我添加另一个属性时，它开始抛出 sedfault。

***.h 文件中的变量声明如何导致 *.cpp 中的段错误？**

如果你想要更多代码，我可以把它放在任何地方。就是不知道，什么地方够坚持。不想在这里发布（大约 300 行代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:43:35.913

检查 if(pomodoro!= NULL) 然后执行 addSecs()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:42:26.177

pomodoroTime 可能未初始化或已删除

# javascript - JavaScript：如何使用两个相同的键迭代对象（并获取两个值）

> ID：12561482
> 
> 赞同：5
> 
> 时间：2012-09-24T08:39:31.833
> 
> 标签：javascript

```
var obj = { key: value1, key: value2} 
```

我想迭代它并获得 (key and value1) 和 (key and value2)

如果我使用简单的循环：

```
for (var i in obj){
 console.log(obj[i])
} 
```

我得到：键值2 键值2

所以 obj[i] 总是取最后一个键

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T08:43:06.270

JS 对象中的键必须是唯一的。

会发生什么，是：

```
var obj = {
    key : value1
} 
```

设置`obj['key']`为`value1`。

随后的声明将`key : value2` **覆盖**您之前的声明。

* * *

**您的问题的可能解决方案：**

```
var obj = {
    key : [value1, value2]
}

for (var i in obj)
{
    if (obj[i] instanceof Array)
    {
        for (var k; k < obj[i].length; k++)
        {
            console.log(obj[i][k])
        }
    }
    else
    {
        console.log(obj[i]);
    }
} 
```

* * *

另一个可能更优雅的解决方案是修改存储数据的方式，如下所示：

```
var obj = [
    { key : 'SomeKey'     , value : 'foo' },
    { key : 'SomeKey'     , value : 'bar' },
    { key : 'SomeOtherKey', value : 'baz' }
]; 
```

这显然允许具有相同键的多个条目。查询可以按照以下方式在某处进行：

```
values = [];
for (var i = 0; i < obj.length; i++)
{
    if (obj[i].key === 'SomeKey')
    {
        values.push(obj[i].value);
    }
}

console.log(values); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:45:15.857

这是不可能的。如声明中所述：

```
var obj = { key: value1, key: value2} 
```

Initially obj.key is set as `value1`, in the second assignment `value1` is rewritten with `value2`, So, obj.key is now `value2`.
So you cannot access the initial value.

# java - 如何在 Java 中比较两个数字？

> ID：12561485
> 
> 赞同：20
> 
> 时间：2012-09-24T08:39:37.367
> 
> 标签：java, numbers, compare

> **可能重复：**
> [比较两个通用数字的值](https://stackoverflow.com/questions/2683202/comparing-the-values-of-two-generic-numbers)

我想比较[Number](http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html)的两个任意实例以找出哪个更大。如您所知，它们可能是整数、长整数或双精度数，也可能是大整数或大小数。那么该怎么办？

1.  Number 没有实现[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)。
2.  不能使用`doubleValue()`，因为 BigDecimals 或 BigIntegers 可能会损失精度。

我真的需要进行实例测试和铸造吗？*必须*有一些图书馆可以做到这一点。但是我已经检查了 Apache Commons 和 Guava，但没有运气。

**编辑 1：**评论指出了这一点：[比较两个通用 Numbers 的值](https://stackoverflow.com/q/2683202/1374678)。它有一个解决方案，可以使用`toString()`. 真的没有更好的方法来做到这一点吗？

**编辑 2：**我刚刚发布了[我自己的版本作为另一个问题的答案](https://stackoverflow.com/a/12884075/1374678)。它应该比公认的答案更有效和更健壮。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T09:01:40.890

您不能比较 type 的两个任意实例`Number`，因为这可能是一个无休止的操作。想象两个无理数，唯一的区别是十亿位小数。为此，您必须比较数十亿个小数。

您需要将`Number`实例转换为`BigDecimal`，根据需要应用舍入，然后比较这两者。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T12:31:32.093

严格来说，数字是无法比较的。您首先需要定义比较的语义。由于您提到它用于库，您可能只想依赖 Number API 提供的内容。

所以它归结为比较 longValue() 或 doubleValue() 的值。我建议一种首先使用 longValue() 进行比较的方法，如果它们结果*相等*，则也比较 doubleValue() （这样可以捕获长溢出，但在值不是浮点数时仍保持 64 位长精度） ：

```
public static int compare(Number n1, Number n2) {
    long l1 = n1.longValue();
    long l2 = n2.longValue();
    if (l1 != l2)
        return (l1 < l2 ? -1 : 1);
    return Double.compare(n1.doubleValue(), n2.doubleValue());
} 
```

其他一切都是超出 Number API 提供的猜谜游戏。对于标准使用，上面的代码应该可以很好地工作。是的，如果你传递它（例如）BigIntegers 或 BigDecimals 超出 Doubles 值范围或仅超过 53 位尾数精度的差异，它们被错误地检测为*equal*，但就 Number API 而言这个错误的结果可以被视为“正确”的结果。

# android - android：将某些东西从广播接收器传递回活动

> ID：12561486
> 
> 赞同：1
> 
> 时间：2012-09-24T08:40:02.293
> 
> 标签：android

所以我有这个问题，我有一些东西要传回活动，但问题是我不知道如何，我已经阅读了一些线程，但它有点模糊和混乱，你们中的任何人都可以对此有所了解. 我只是想从我的接收器（BroadcastReciever）传回一些东西给活动。我已经阅读了一个线程，您可以开始一项活动，但问题是，如果允许将额外的意图传递给活动，会有些混乱吗？感谢您提供的任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:36:16.990

可能重复的答案[https://stackoverflow.com/a/6857648/760489](https://stackoverflow.com/a/6857648/760489)

当您从广播接收器启动活动时，您可以通过在意图中设置标志来做到这一点

```
public void onReceive(Context context, Intent intent){
    Intent i = new Intent(context, DestinationActivity.class);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    i.putExtra("PATH", path);
    context.startActivity(i);
} 
```

FLAG_ACTIVITY_SINGLE_TOP 确保应用程序在已经打开的情况下不会重新打开。这意味着首先打开 YourActivity 的“旧”意图被重新使用，它不会包含额外的值。您必须在 YourActivity 中另一个名为 onNewIntent() 的方法中捕获它们。

从顶部链接查看完整答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:47:09.450

试试这个：

```
public void onReceive(Context context, Intent intent)
{

    Intent i = new Intent(context, DestinationActivity.class);
    i.putExtra("PATH", path);
    context.startActivity(i);
} 
```

# php - 遍历 MySQL 表中的列

> ID：12561487
> 
> 赞同：1
> 
> 时间：2012-09-24T08:40:23.433
> 
> 标签：php, mysql, sql

我正在做关于php的问卷调查，我是php新手。当我尝试显示答案时，它只显示前两个问题。在这两个问题之后，没有显示答案。我在这里附上了来源。

请使用以下链接查看该页面。 [http://itsupportsrilanka.com/uaquiz/quiz.php](http://itsupportsrilanka.com/uaquiz/quiz.php)

```
<body>

<form action="test.php" method="POST">

   <?php
            $result = select("SELECT * FROM questions ");
            //$row = mysql_fetch_array($result);

        ?>
<?php
$i=1;
while($row = mysql_fetch_array($result))
{
?>
<table width="581" height="299" border="1">
<tr>
<td>Union Assurance Questionnaire</td>
</tr>
<tr>
<td><?php echo $i.'.' .$row['questions']; ?>
<?php $i++; ?>
</td>
</tr>
<tr>
<td>
<?php $qId=$row['question_id'];

$result1=select("SELECT * FROM answers WHERE questionId='$qId' ORDER BY RAND()");
while($row1=mysql_fetch_array($result1)){

    ?>
    <input type="radio" name="answers" value="<?php echo $row1['answers'];?>" / ><?php echo $row1['answers']; ?><br/>

<?php 
} ?>
&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
</table>
<?php
}
?>
</form>
</body> 
```

![在此处输入图像描述](../Images/bbc0d3bb2aecc6b24b19dc15b5cb07ef.png) ![在此处输入图像描述](../Images/ecce13c86c5b950cc484fd5f8fffcc1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:48:14.040

代替

```
$result = select("SELECT * FROM questions "); with $result = mysql_query("SELECT * FROM questions "); 
```

和

```
$result1=select("SELECT * FROM answers WHERE questionId='$qId' ORDER BY RAND()"); with 
$result1=mysql_query("SELECT * FROM answers WHERE questionId='$qId' ORDER BY RAND()"); 
```

然后再试一次

# ruby-on-rails - Rails/ActiveRecord 的 attr_accessible 中的 :model 和 :model_id 有什么区别吗？

> ID：12561489
> 
> 赞同：3
> 
> 时间：2012-09-24T08:40:29.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, scaffolding

当我创建一个脚手架并且我需要与`belongs_to`另一个模型建立关系时，我添加了一个名为`model_id`（用该模型的名称替换模型）的字段：

```
rails generate scaffold Grade user_id:integer subject_id:integer letter:string 
```

然后在上面的`Grade`模型中，我可能会添加：

```
belongs_to :user
belongs_to :subject 
```

Rails 自动将`user_id`和添加到字段`subject_id`列表中。通过添加和到字段列表以便我也可以使用它们进行批量分配，我`attr_accessible`是否会造成任何伤害？`:user``:subject``attr_accessible`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:10:48.870

attr_accessible 旨在防止来自外部发送到应用程序的数据的批量分配攻击。在大多数情况下，您可能在创建和更新操作中执行以下操作：

```
@model = Model.new(params[:model])
or
@model.update_attributes(params[:model]) 
```

你应该问自己为什么你会有一个使用 subject_id 的表单和另一个使用 subject 的表单。这里唯一真正的危害是不一致，这实际上可能对大型项目非常不利。如果您遵循所有表单都将使用实际数据库列 (subject_id) 的约定，那么当您不记得为什么以两种不同的方式使用它时，您将来会省去一些麻烦。

如果您通过控制台更新属性，您可以使用`update_attributes(params[:model], without_protection: true)`或我编写的名为[sudo_attributes](https://github.com/beerlington/sudo_attributes)的 gem ，它可以让您执行`sudo_update_attributes(params[:model])`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:01:47.783

我认为它不会伤害你，但会在你的代码中带来一种混乱

# c# - 关于防病毒dll的想法

> ID：12561490
> 
> 赞同：0
> 
> 时间：2012-09-24T08:40:38.483
> 
> 标签：c#, antivirus, codeplex

目前我已经尝试了这个站点的防病毒 dll：http: [//antivirusscanner.codeplex.com/documentation](http://antivirusscanner.codeplex.com/documentation)

从 nuget 安装此软件包后，我运行代码来扫描（并清理）文件。我得到了一个“没有找到病毒”的回答，但这不是我所期望的：我没有安装任何防病毒程序。

有谁知道这个软件包是否包含一些检查是否安装了防病毒程序的功能？我想确定代码是否正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:43:22.087

公平地说，它的反应是正确的：它没有*发现*病毒。这并没有说它是否有*看起来很努力*的工具。只有3个回复：

*   `VirusNotFound`
*   `VirusFound`
*   `FileNotExist`

其中，听起来`VirusNotFound`是最接近的。

要检查，您也许可以使用[EICAR](http://en.wikipedia.org/wiki/EICAR_test_file)。

# android - 应用程序在大屏幕上崩溃

> ID：12561494
> 
> 赞同：0
> 
> 时间：2012-09-24T08:40:50.937
> 
> 标签：android

我有这个功能：

```
public static Bitmap getResizedBitmap(Bitmap bm,Context c) {

    int width =(int) dp2px(bm.getWidth(),c);
    int height = (int) dp2px(bm.getHeight(),c);
    float scaleWidth = ((float) 250) / width;
    float scaleHeight = ((float) 170) / height;

    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

    return resizedBitmap;
} 
```

其中 dp2px 是：

```
private static float dp2px(int dip, Context context){
    float scale = context.getResources().getDisplayMetrics().density;
    return dip * scale + 0.5f;
} 
```

在大多数屏幕上都可以，但例如在 Galaxy s3 上它会返回

> java.lang.IllegalArgumentException: x+width 必须 <= bitmap.width()

在这条线上：

```
Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:56:43.390

在 manifest.xml 中使用它

```
 <supports-screens 
android:resizeable="true" 
android:smallScreens="true" 
android:normalScreens="true" 
android:largeScreens="true" 
android:anyDensity="true"/> 
```

和

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:48:41.840

除了你的代码。您是否已将支持屏幕标签相应地添加到您的清单中？

例子：

```
<supports-screens android:normalScreens="true" android:resizeable="true"     android:anyDensity="true" android:largeScreens="true" android:smallScreens="true" android:xlargeScreens="true"></supports-screens> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:56:25.283

要将 dp 转换为 px，可以使用以下命令：

```
int pixels = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, (float) dp, context.getResources().getDisplayMetrics()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T08:56:35.363

它抱怨您试图在位图范围之外获取像素。这可能只是一个四舍五入的问题。也许您计算`width`的像素比实际位图宽度大一个像素。如果您不在函数中添加 会发生`0.5f`什么`dp2px()`？

# php - 如何在 PHP 中获取用户是 Active Directory 成员的所有组（连接到 LDAP 目录）

> ID：12561497
> 
> 赞同：-2
> 
> 时间：2012-09-24T08:41:01.563
> 
> 标签：php, active-directory, ldap

我有一个网站，可以检查用户是否是 Active Directory 中特定组的成员。现在我想回显用户所属的所有组。我在互联网上找不到任何这样的例子，我不知道从哪里开始。任何帮助表示赞赏。请记住，我不是专业的程序员/网页设计师。

我正在检查用户 sAMAccountname。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:11:54.453

您需要检查**[memberOf](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677099%28v=vs.85%29.aspx)**多值属性。

它包含组的完整 DN。

这个问题已经在这里得到了回答：[PHP LDAP Get user details of member which is a member of a group](https://stackoverflow.com/questions/5327104/php-ldap-get-user-details-of-member-which-is-a-member-of-a-group?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:12:04.207

这可以通过以下方式实现：

*   查找用户，读取 memberOf 属性
*   Active Directory 使用递归组，您需要在客户端查找这些
*   Active Directory 的默认限制是返回 1000 个结果，因此您需要使用[分页结果](http://php.net/manual/en/function.ldap-control-paged-result.php)来确保获得所有组（需要 PHP 5.4）

为了速度，您应该使用 OR 过滤器进行递归查找，如下所示： (|(memberOf=group1)(memberOf=group2)) 用于递归查找 + 只查找一个组一次，因此对服务器的请求被最小化。

# java - 如何使用简单的字符串（字符串格式的 xml）调用 SOAP Web 服务

> ID：12561503
> 
> 赞同：4
> 
> 时间：2012-09-24T08:41:28.647
> 
> 标签：java, android, web-services, soap, httpclient

我有这个代表 XML 的字符串：

```
String soapCall="<soap:Envelope xmlns:soap="http://www.w3.org/2001/12/soap-envelope" soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding"> <soap:Body xmlns:m="http://www.example.org/stock"> <m:addDownloadParams> <m:idApp>";
soapCall+=idApp;
soapCall+="<m:versionApp>";
soapCall+=versonApp;
soapCall+="</m:versionApp> <m:os>Android</m:os> </m:addDownloadParams> </soap:Body> </soap:Envelope>"; 
```

我有这个肥皂网络服务：

```
http://stats.mywebsite.com/ws/adddownload 
```

现在，我需要将该字符串传递给android上的soap webservice，但我不知道怎么做，我知道我需要使用httpcliente：

```
HttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext(); 
```

但我不知道如何用该字符串调用soapwebservice。

有人有代码示例吗？我在谷歌上找不到它。我不想使用图书馆，我需要自己做

谢谢

**编辑：这是现在的代码，但它不起作用，我收到错误 500 内部服务器错误：**

```
 public static byte[] addDownloadIntoServer(){
        byte[] result = null;

        String SERVER_URL="http://stats.mywebsite.com/ws/server.php";
        String SOAP_ACTION="addDownload";
        String body="<?xml version=\"1.0\" encoding=\"UTF-8\"?><SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ns1=\"http://stats.mobincube.com/\"><SOAP-ENV:Body><ns1:addDownloadParams>";
    body+="<idApp>" +SectionManager.instance.app_id+"</idApp>";
    body+="<versionApp>"+SectionManager.instance.app_version+"</versionApp>";
    body+="<source>android</source> <os>Android</os> </ns1:addDownloadParams></SOAP-ENV:Body></SOAP-ENV:Envelope>";

        HttpParams httpParameters = new BasicHttpParams();
        // Set the timeout in milliseconds until a connection is established.
        int timeoutConnection = 15000;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT)
        // in milliseconds which is the timeout for waiting for data.
        int timeoutSocket = 35000;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

        DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);

        /*
        * httpclient.getCredentialsProvider().setCredentials( new
        * AuthScope("os.icloud.com", 80, null, "Digest"), new
        * UsernamePasswordCredentials(username, password));
        */
        HttpPost httppost = new HttpPost(SERVER_URL );
        httppost.setHeader("soapaction", SOAP_ACTION);
        httppost.setHeader("Content-Type", "text/xml; charset=utf-8");

        System.out.println("executing request" + httppost.getRequestLine());
        //now create a soap request message as follows:
        final StringBuffer soap = new StringBuffer();
        soap.append("\n");
        soap.append("");
        // this is a sample data..you have create your own required data  BEGIN
        soap.append(" \n");
        soap.append(" \n");
        soap.append("" + body);
        soap.append(" \n");
        soap.append(" \n");

        /* soap.append(body); */
        // END of MEssage Body
        soap.append("");
        Log.i("SOAP Request", ""+soap.toString());
        // END of full SOAP request  message
        try {
            HttpEntity entity = new StringEntity(soap.toString(),HTTP.UTF_8);
            httppost.setEntity(entity); 
            HttpResponse response = httpclient.execute(httppost);// calling server
            HttpEntity r_entity = response.getEntity();  //get response
            Log.i("Reponse Header", "Begin...");          // response headers
            Log.i("Reponse Header", "StatusLine:"+response.getStatusLine());
            Header[] headers = response.getAllHeaders();
            for(Header h:headers)
                Log.i("Reponse Header",h.getName() + ": " + h.getValue());

            Log.i("Reponse Header", "END...");
            if (r_entity != null) {       
                result = new byte[(int) r_entity.getContentLength()];  
                if (r_entity.isStreaming()) {
                    DataInputStream is = new DataInputStream(
                    r_entity.getContent());
                    is.readFully(result);
                }
            }
        }catch (Exception E) {
            Log.i("Exception While Connecting", ""+E.getMessage());
            E.printStackTrace();
        }

        httpclient.getConnectionManager().shutdown(); //shut down the connection
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T10:19:43.670

解决方案：

```
private byte[] callSOAPServer() {

    byte[] result = null;

    HttpParams httpParameters = new BasicHttpParams();
    // Set the timeout in milliseconds until a connection is established.
    int timeoutConnection = 15000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
    // Set the default socket timeout (SO_TIMEOUT)
    // in milliseconds which is the timeout for waiting for data.
    int timeoutSocket = 35000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);

    /*
     * httpclient.getCredentialsProvider().setCredentials( new
     * AuthScope("os.icloud.com", 80, null, "Digest"), new
     * UsernamePasswordCredentials(username, password));
     */
    HttpPost httppost = new HttpPost(SERVER_URL );
    httppost.setHeader("soapaction", SOAP_ACTION);
    httppost.setHeader("Content-Type", "text/xml; charset=utf-8");

    System.out.println("executing request" + httppost.getRequestLine());
   //now create a soap request message as follows:
    final StringBuffer soap = new StringBuffer();
    soap.append("\n");
    soap.append("");
   // this is a sample data..you have create your own required data  BEGIN
    soap.append(" \n");
    soap.append(" \n");
    soap.append("" + body);
    soap.append(" \n");
    soap.append(" \n");

    /* soap.append(body); */
     // END of MEssage Body
    soap.append("");
    Log.i("SOAP Request", ""+soap.toString());
   // END of full SOAP request  message
    try {
        HttpEntity entity = new StringEntity(soap.toString(),HTTP.UTF_8);
        httppost.setEntity(entity); 
        HttpResponse response = httpclient.execute(httppost);// calling server
        HttpEntity r_entity = response.getEntity();  //get response
        Log.i("Reponse Header", "Begin...");          // response headers
        Log.i("Reponse Header", "StatusLine:"+response.getStatusLine());
        Header[] headers = response.getAllHeaders();
        for(Header h:headers){
            Log.i("Reponse Header",h.getName() + ": " + h.getValue());
        }
        Log.i("Reponse Header", "END...");
        if (r_entity != null) {       
            result = new byte[(int) r_entity.getContentLength()];  
            if (r_entity.isStreaming()) {
                DataInputStream is = new DataInputStream(
                        r_entity.getContent());
                is.readFully(result);
            }
        }
    } catch (Exception E) {
        Log.i("Exception While Connecting", ""+E.getMessage());
        E.printStackTrace();
    }

    httpclient.getConnectionManager().shutdown(); //shut down the connection
    return result;
   } 
```

2）您必须解析上述函数返回的字节数组的输出。例如：

```
byte[] initReqrepsonse = callSOAPServer(soapBodymessage );
ByteArrayInputStream bais=new ByteArrayInputStream(initReqrepsonse);
// now parse the xml as
/** Handling XML */
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
XMLReader xr = sp.getXMLReader();

/** Create handler to handle XML Tags ( extends DefaultHandler ) */
// ResponseParser  is XML parser class which will parse the XML output.
ResponseParser myXMLHandler = new ResponseParser();
xr.setContentHandler(myXMLHandler);
Log.i("XML data", bais.toString());
xr.parse(new InputSource(bais)); 
```

这样，您无需第三方库即可访问任何 SOAP Web 服务方法。如果需要任何更正，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:55:07.267

```
package ProductVerificationCard.in;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.content.Intent;``
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class AdminLogin extends Activity {
 /** Called when the activity is first created. */
Button btn_ok;
TextView textView;
private static final String SOAP_ACTION = "http://tempuri.org/Login";

private static final String OPERATION_NAME = "Login";

private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

private static final String SOAP_ADDRESS = "http://10.0.2.2/new/WebService.asmx";
String s;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn_ok=(Button) findViewById(R.id.btn_login);
    textView=(TextView) findViewById(R.id.tv_error);

    btn_ok.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
                    OPERATION_NAME);

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
                    envelope.dotNet = true;

                    envelope.setOutputSoapObject(request);

                    HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);

                    try

                    {

                    httpTransport.call(SOAP_ACTION, envelope);

                    Object response = envelope.getResponse();

                    //textView.setText(response.toString());
                     s=response.toString();
                     if(s=="true")
                     {
                         Intent intent=new Intent(AdminLogin.this,MenuForm.class);
                            startActivity(intent);

                     }

                     else
                     {
                         textView.setText("Enter Valid Username or Password");
                     }
                    }

                    catch (Exception exception)

                    {

                    textView.setText(exception.toString());

                    }
            // TODO Auto-generated method stub
            }
       });

    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T07:55:06.057

```
Formatted answer :

import java.io.BufferedReader;
import java.io.InputStreamReader;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpStatus;
import org.apache.commons.httpclient.methods.PostMethod;

/**
 * * This program demonstrates consuming web service using Apache HTTPClient and
 * SOAP message. * Reference:
 * http://www.webservicex.net/stockquote.asmx?op=GetQuote * ClassPath: Keep these
 * two files in class path: commons-httpclient-3.0.1.jar, commons-codec-1.4.jar * @author
 * Bhavani P Polimetla * @since April-27-2011
 */
public class WSClient {
    public static void main(String args[]) {
        HttpClient httpClient = new HttpClient();
        httpClient.getParams().setParameter("http.useragent",
                "Web Service Test Client");
        BufferedReader br = null;
        String data = "<?xml version=\"1.0\" encoding=\"utf-8\"?> "
                + "<soap12:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\">   "
                + "<soap12:Body>     "
                + "<GetQuote xmlns=\"http://www.webserviceX.NET/\">       "
                + "<symbol>INFY</symbol>     " + "</GetQuote>   "
                + "</soap12:Body> </soap12:Envelope>";
        PostMethod methodPost = new PostMethod(
                "http://www.webservicex.net/stockquote.asmx?op=GetQuote");
        methodPost.setRequestBody(data);
        methodPost.setRequestHeader("Content-Type", "text/xml");
        try {
            int returnCode = httpClient.executeMethod(methodPost);
            if (returnCode == HttpStatus.SC_NOT_IMPLEMENTED) {
                System.out
                        .println("The Post method is not implemented by this URI");
                methodPost.getResponseBodyAsString();
            } else {
                br = new BufferedReader(new InputStreamReader(
                        methodPost.getResponseBodyAsStream()));
                String readLine;
                while (((readLine = br.readLine()) != null)) {
                    System.out.println(readLine);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            methodPost.releaseConnection();
            if (br != null)             try {
                    br.close();
                } catch (Exception fe) {
                    fe.printStackTrace();
                }
        }
    }
} 
```

# jquery - 如何使用 jquery 重新加载特定的 html 标签？

> ID：12561508
> 
> 赞同：0
> 
> 时间：2012-09-24T08:42:07.520
> 
> 标签：jquery, html

我想要发生的是，`class="profile-pic"`由于图像源发生变化，将在对话框关闭之前或关闭之前刷新/重新加载。

这是我的代码：

```
$('.change-profile-pic').click(updateProfilePicture);
function updateProfilePicture(){
    $('#dialog').dialog({
        resizable:false,
        modal:true,
        width:225,
        buttons: {
            'Upload':function(){
                $('#upload-image').ajaxForm({ 
                        target: '.new-profile-pic'
                }).submit();
            },
            'Done':function(){
                $.ajax({
                    url: 'update-profile-pic.php',
                    type: 'post',
                    data: { file_path: $('.new-profile-pic img').attr('src') },
                    success: function(data) {
                        if(data == 'Success'){
                            $('#dialog').dialog('close');
                        }
                    }
                });
            }
        }
    }); 
```

HTML 要重新加载：

```
<p class="profile-pic ">
                    <a href="#"><img class="change-profile-pic ui-corner-all" src="<?php echo $user['user_profile_path']; ?>" alt=""></a>
                </p> 
```

HTML 表单：

```
<div title="Change profile picture" id="dialog" class="dialog-change-profile-pic">
            <div class="new-profile-pic">

            </div>
            <form id="upload-image" enctype="multipart/form-data" action="upload-image.php" method="post">
                <input type="hidden" name="MAX_FILE_SIZE" value="100000">
                <input class="profile-pic-name" name="uploadedfile" type="file">
            </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:45:21.870

您可以编写关闭事件函数，该函数会在关闭事件触发后立即触发。

```
<p class="profile-pic ">
                    <a href="#"><img class="change-profile-pic ui-corner-all" src="<?php echo $user['user_profile_path']; ?>" alt=""></a>
                </p>

close: function(event, ui) { 
    // Change the src attribute here with the newer source.. That should do 
 } 
```

您还可以使用 beforeClose 事件

```
beforeClose: function(event, ui) { 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:46:56.163

为什么图像 src 被包裹在 PHP 标记中？那不能只是静态 HTML 吗？您的浏览器很可能已经缓存了图像，因此如果图像在服务器端发生更改并且您只想重新加载它，那么您可以执行类似的操作

```
$('.goButton').click(function() {
    $('#loadThis' img)[0].src = 'resources/default-male.png?' + Math.random();
}); 
```

# javascript - YouTube 嵌入视频不会在 IE8 的模态窗口中播放

> ID：12561513
> 
> 赞同：0
> 
> 时间：2012-09-24T08:42:28.443
> 
> 标签：javascript, jquery, html, css, youtube

在 Firefox、IE7、IE9 和其他浏览器中，YouTube 嵌入工作正常，但在 IE8 中单击视频时没有任何反应。
我认为它可能是与 Z-index 相关的 CSS 问题？我试过改变周围的东西，但没有运气。
任何帮助都会很棒。[访问该页面并单击图像以查看问题](http://asystec.hailstormcommerce.com/?page_id=131)。

这是模态的CSS：

```
.youtubemodal {
width: 590px;
height: 464px;
position:fixed;
z-index:700;
top:180px;
left:50%;
display:none;
background-image: url('images/youtubeconsole.png');
margin-left:-295px;
}

.youtubediv {
position:absolute;
left:15px;
top:15px;
}

.youtubexbutton {
bottom: 12px;
right:13px;
position:absolute;
width:26px;
height:26px;
background-image:url('images/youtubex.png');
} 
```

和脚本：

```
jQuery('#youtube').click(function(){
jQuery('.youtubemodal').show();
}); 
```

和 HTML：

```
<div class="youtubemodal"><div class="youtubediv"><iframe width="560" height="400"     src="http://www.youtube.com/embed/G5FRxH8ytJk" frameborder="0" allowfullscreen></iframe></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:44:23.867

`<head>`在标签之后使用这个

```
<meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:19:16.433

解决了它：我`youtubediv`没有宽度或高度，所以我将其更改为覆盖 YouTube 视频的大小。

# java - 监控单台机器上运行的 2 个 JVM 的 CPU 使用率

> ID：12561516
> 
> 赞同：0
> 
> 时间：2012-09-24T08:42:39.837
> 
> 标签：java, monitoring, cpu-usage

我有两个 JVM 在一台机器上运行。我可以使用 jConsole 监控每个 JVM 的 CPU 使用率，但现在我有一个不同的场景。

我还需要结合使用两个 JVM 的 CPU。这会给我一个图表，显示两个 JVM 的 CPU 使用率。

任何人都可以建议我一些可以给我想要的结果的工具吗？

此外，我应该能够指定需要组合结果的 2 个 JVM，因为机器上可能同时运行 2 个以上的 JVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:08:09.947

JConsole 用于`JMX`从 JVM 获取 CPU 使用率。您可以编写自己的`JMX`客户端，直接从所需的 JVM 中找到此信息并将它们组合起来（并以图表或其他方式显示它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:33:57.747

[jvmtop](http://code.google.com/p/jvmtop)以类似于 top的方式向您显示所有（可访问的）jvm 和 cpu/内存使用情况。

# php - PHP数组：如何获取元素所在的索引

> ID：12561525
> 
> 赞同：0
> 
> 时间：2012-09-24T08:43:20.937
> 
> 标签：php, arrays, multidimensional-array, indexing

这是以下数组：

```
Array
(
    [1] => Array
        (
            [0] => 10
            [1] => 13
        )

    [2] => Array
        (
            [0] => 8
            [1] => 22
        )

    [3] => Array
        (
            [0] => 17
            [1] => 14
        )
) 
```

然后我有

```
$chosenNumber = 17 
```

我需要知道的是：

首先）如果 17 在数组中

第二）它拥有的密钥（在本例中为 [0]）

第三）它所属的索引（在本例中为[3]）

我打算使用 in_array 函数来解决第一步，但它似乎只适用于字符串..

万分感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:48:45.380

```
function arraySearch($array, $searchFor) {
    foreach($array as $key => $value) {
        foreach($value as $key1 => $value1) {
            if($value1 == $searchFor) {
                return array("index" => $key, "key" => $key1);
            }
        }
    }

    return false;
}

print_r(arraySearch($your_array, 17)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:48:20.753

你应该看看使用这些：

```
in_array()
array_search() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:47:46.740

您已经使用了 array_search 功能

```
$qkey=array_search(value,array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T08:47:53.790

您使用[array_search](http://php.net/manual/en/function.array-search.php)：

```
$index = array_search($chosenNumber, $myArray);
if($index){
    $element = $myArray[$index];
}else{
    // element not found
} 
```

如果未找到元素，array_search 返回 false，否则返回您正在查找的元素的索引。

**如果一个值在数组中多次出现，它只返回第一个匹配的键**。如果您需要所有匹配项，则需要使用[array_keys](http://php.net/manual/en/function.array-keys.php)并指定可选的 search_value 参数：

```
$indexes = array_keys($myArray, $chosenNumber); 
```

这将返回包含您的搜索值的所有索引的（可能为空）数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:11:02.210

数组键（）

*   返回数组的所有键或键的子集

数组值（）

*   返回数组的所有值

array_key_exists()

*   检查给定的键或索引是否存在于数组中

in_array()

*   检查数组中是否存在值

你可以在这里找到更多信息[http://www.php.net/manual/en/function.array-search.php](http://www.php.net/manual/en/function.array-search.php)

# java - 在 word 中查找一个表并使用 java 在该表中写入

> ID：12561527
> 
> 赞同：6
> 
> 时间：2012-09-24T08:43:32.903
> 
> 标签：java, word-automation

我有一个可能有 n 个表格的 word 文档。该表由写在第一个单元格中作为标题的表名标识。现在我必须找到带有表名的表并在该表的一个单元格中写入。我尝试使用 apache-poi，但无法弄清楚如何将它用于我的目的。如果我无法解释文档的外观，请参阅随附的屏幕截图。

谢谢![如屏幕截图所示，表格名称为 S1 和 S2](../Images/bc30953bf3b482bb743b591a1f30b89d.png)

```
 String fileName = "E:\\a1.doc";  

    if (args.length > 0) {  
        fileName = args[0];  
    }  

    InputStream fis = new FileInputStream(fileName);  
    POIFSFileSystem fs = new POIFSFileSystem(fis);  
    HWPFDocument doc = new HWPFDocument(fs);  

    Range range = doc.getRange(); 
    for (int i=0; i<range.numParagraphs(); i++){ 
       Paragraph tablePar = range.getParagraph(i);

        if (tablePar.isInTable()) {  
            Table table = range.getTable(tablePar);  
            for (int rowIdx=0; rowIdx<table.numRows(); rowIdx++) {  

                for (int colIdx=0; colIdx<row.numCells(); colIdx++) {  
                    TableCell cell = row.getCell(colIdx);  
                    System.out.println("column="+cell.getParagraph(0).text());  
                }  
            }  
        }  
    } 
```

这是我尝试过的，但这仅读取第一个表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:23:08.250

我发现你对 poi 有误解。如果你只是想读一个表。只需使用 TableIterator 来获取表的内容，否则你会得到一个没有表开始的异常。

我想每个表格单元格中只有一个段落。

```
 InputStream fis = new FileInputStream(fileName);  
    POIFSFileSystem fs = new POIFSFileSystem(fis);  
    HWPFDocument doc = new HWPFDocument(fs);  

    Range range = doc.getRange();
    TableIterator itr = new TableIterator(range);
    while(itr.hasNext()){
        Table table = itr.next();
        for(int rowIndex = 0; rowIndex < table.numRows(); rowIndex++){
            TableRow row = table.getRow(rowIndex);
            for(int colIndex = 0; colIndex < row.numCells(); colIndex++){
                TableCell cell = row.getCell(colIndex);
                System.out.println(cell.getParagraph(0).text());
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:40:31.683

我认为Apache POI是要走的路。它没有很好的文档记录，但是花在研究如何使用它上的时间可能是值得的。Word 文档基本上是一个分层（树）结构，您需要遍历并找到所需的数据。

# java - 如何从 Java 执行 python 脚本？

> ID：12561530
> 
> 赞同：0
> 
> 时间：2012-09-24T08:43:37.563
> 
> 标签：java, python

我有一个 python 脚本，需要从 Java 运行 python 脚本。这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:44:52.397

一种选择是使用[jython](http://www.jython.org/)（用 Java 编写的 Python）。

如果这不合适，您可以使用[Runtime.exec()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)分叉/执行您的脚本进程。但是，使用它可能有点繁琐 - 查看[这篇文章](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)以了解常见问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:50:22.463

除了 jython，[python.org](http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages#Java)还列出了 Jepp 作为一种可能的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:16:40.810

```
Runtime.getRuntime().exec("python script_name.py") 
```

# android - 如何保持位图中可绘制的纵横比

> ID：12561532
> 
> 赞同：17
> 
> 时间：2012-09-24T08:43:47.407
> 
> 标签：android

如果我使用重力`fill_vertical`或如何保持纵横比`fill_horizontal`？在这段代码中：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" 
    android:src="@drawable/_toogle_green"
    android:gravity="bottom|fill_vertical"
/> 
```

位图垂直填充，但水平保持原始宽度和纵横比被破坏。

我相信有人问过这个问题，但我真的找不到，只针对 ImageView 或 ImageButton。但我需要在drawables中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-21T09:07:17.047

试试这个：

```
<item>
     <bitmap
          android:gravity="center|bottom|clip_vertical"
          android:src="@drawable/your_image" />
</item> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-24T09:21:13.257

You need to set the ScaleType. See [this link to the documentation for more info.](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# c# - 将 char*[] 从 c++ dll Struct 传递给 c#

> ID：12561534
> 
> 赞同：4
> 
> 时间：2012-09-24T08:44:01.613
> 
> 标签：c#, c++, dll, marshalling

我正在尝试通过 c++ DLL 将以下结构传递给 c#：

```
struct name 
{   char* myArray[3];
    char firstname[100]; 
    char lastname[100]; 
}; 

void Caller(struct name * demo) 
{
  strcpy(demo->firstname,"hello");
  demo->myArray[0]="hello";
  demo->myArray[1]="hello";
  demo->myArray[2]="hello";
  ping(demo);                     //call to c# function
} 
```

下面是我的 C# 代码：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct name
{
   [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]
   public string firstname;
   [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]
   public string lastname;

   //what should i marshal here for  char* myArray[3];
} ;

static void Main(string[] args)
{
   name myname = new name();
   ping( ref myname);
}

public static void ping(int a,ref name myname)
{
   Console.WriteLine(myname.firstname+"\n");
} 
```

我能够从 c++ dll 导入名字和姓氏。

我应该怎么做才能从 C++ 中导入 char 指针数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:24:44.040

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct Name
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]
    public string FirstName;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]
    public string LastName;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
    public string[] Array;
}; 
```

对于我的完整解决方案，请检查 Foo.cpp 和 Program.cs：[https ://gist.github.com/3779066](https://gist.github.com/3779066)

# clojure - 使用 ClojureScript 和 Domina 时出现未定义的方法错误

> ID：12561535
> 
> 赞同：1
> 
> 时间：2012-09-24T08:44:02.590
> 
> 标签：clojure, clojurescript

我最近开始在一个项目中试用 ClojureScript。以下代码：

```
(ns shrine.snippets
  (:use [domina.css :only [sel]]
        [domina.events :only [listen! target]]
        [domina :only [log]]))

(defn ^:export init []
  (listen! (sel "a.delete") :click
           (fn [evt]
             (log (target evt))))) 
```

当使用“高级”优化编译时，单击“a.delete”链接时将触发以下错误。

```
Uncaught Error: No protocol method Event.target defined for type object: [object Object] 
```

但是使用“简单”优化编译时没有问题。

有人能指出我正确的方向吗？谢谢。

# excel - VBA在Collection中按值获取键

> ID：12561539
> 
> 赞同：3
> 
> 时间：2012-09-24T08:44:11.680
> 
> 标签：excel, vba, excel-2003

> **可能重复：**
> [VBA 集合：键列表](https://stackoverflow.com/questions/5702362/vba-collection-list-of-keys)

也许这是一个非常简单的问题，但我是 VBA 的新手。我有一些我想用作集合（键，值）的数据。如何通过值获取密钥？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:08:25.767

我认为您不能对`Collection`对象执行此操作。

但是，您可以使用替代方法`Dictionary`，您需要从 VBA 编辑器将其包含在您的 Excel 项目中：单击“工具”菜单，选择“参考”并找到“Microsoft Scripting Runtime”，之后您应该能够做到像这样的东西：

```
Public Sub Test()

Dim dict As New dictionary
    dict.Add "a", 1     ' "Add" parameters are reversed compared to Collection
    dict.Add "b", 2
    dict.Add "c", 3

    If KeyFromvalue(dict, 2) = "b" Then
        Debug.Print "Success!"
    Else
        Debug.Print "fail..."
    End If

End Sub

Public Function KeyFromvalue(dict As dictionary, ByVal target)

Dim idx As Long

    For idx = 0 To dict.Count - 1
        If dict.Items(idx) = target Then
            KeyFromvalue = dict.Keys(idx)
            Exit Function
        End If
    Next

End Function 
```

# objective-c - 所有 OSX 开发工具的列表？

> ID：12561540
> 
> 赞同：-1
> 
> 时间：2012-09-24T08:44:18.950
> 
> 标签：objective-c, macos, cocoa, system, developer-tools

我是 OSX 开发和 Apple 系统框架/apis/工具的新手。

在学习的过程中，我偶然发现了一些“秘密”实用程序，它们对开发人员非常有帮助，但具有混合级别的可见性/googleability/shell 完成（例如`kextutil`，、、`lsregister`）`auvaltool`

某处是否有所有这些“秘密”开发人员实用程序的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:49:58.233

这是开发人员功能和工具的[列表](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/)

# ios - 即使在 ios 设备 5.1.1 上只有一个标签，也无法运行 xcode 4.5 新项目

> ID：12561543
> 
> 赞同：4
> 
> 时间：2012-09-24T08:44:23.050
> 
> 标签：ios, xcode4.5

我在运行山狮的 Mac 上安装了 xcode 4.5。我有一个越狱的 iphone 4 ios 5.1.1

我在 xcode 上开始了一个新项目并添加了一个标签。

当我尝试在模拟器 6.0 上运行它时没有问题，但是当我尝试在我的 ios 设备上运行它时出现此错误：

```
#import <UIKit/UIKit
#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

这是图像

![图片](../Images/dde41238b16f315cf811723547bcd283.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:33:32.677

Xcode 4.5 中的新项目将部署目标设置为 6.0，因此您将无法在 5.1.1 设备上运行它。将部署目标更改为 5.0

编辑：从您的错误看来，您在 5.x 中使用了 iOS 6 API，这将导致崩溃。NSLayoutConstraint 仅适用于 iOS 6.0。如果您没有专门设置此项，请检查所有 xib 中的“使用自动布局”框是否未选中

# c++ - C++ 模板的两阶段名称查找 - 为什么？

> ID：12561544
> 
> 赞同：28
> 
> 时间：2012-09-24T08:44:24.367
> 
> 标签：c++, templates, name-lookup, dependent-name

为什么 C++ 标准定义了模板的两阶段查找？难道非依赖声明和定义的查找也不能推迟到实例化阶段吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-24T09:03:33.420

他们可以。这是大多数早期模板实现的工作方式，并且仍然是 Microsoft 编译器的工作方式。（在委员会中）感觉这太容易出错了；它使得意外劫持一个名称变得太容易了，一个翻译单元中的实例化选择了一个本地名称，而不是所需的全局符号。（典型的翻译单元由一系列`#include`s 组成，声明每个人都应该看到的名称，然后是实现代码。在实例化点，实例化点之前的所有内容都是可见的，包括实现代码。）

最终的决定是将模板中的符号分为依赖和非依赖两类，并坚持非依赖符号在模板定义点进行解析，以减少意外绑定的风险到一些本地实现符号。再加上需要指定 `typename`和`template`何时适用于相关符号，这还允许在模板的定义点进行解析和一些错误检查，而不仅仅是在模板被实例化时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:50:40.560

这可以看作是[关注点分离的](http://en.wikipedia.org/wiki/Separation_of_concerns)一种应用。

在第一阶段，它只检查正确的语法，并解析非依赖名称，如此[处](http://www.gotw.ca/gotw/087.htm)所述。在第二阶段，它会做一些更特定于模板的事情，验证调用是否对特定类型有效。看到这个[答案]（[两阶段查找 - 需要解释](https://stackoverflow.com/questions/7767626/two-phase-lookup-explanation-needed)）

此外，如果仅在一个阶段完成，则应在每次实例化时完成。这种方式只进行一次。

如果只在第一次实例化时完成，那么这将是相同的事情，只是结构较少。

# c# - 使用数据绑定获取各种类型项目列表的输入

> ID：12561549
> 
> 赞同：1
> 
> 时间：2012-09-24T08:44:49.203
> 
> 标签：c#, wpf, mvvm

在我的应用程序中，我试图遵循 MVVM。但我遇到了一个问题。用户输入特定表的名称（例如 tab_1），该表存在于 DB 中并包含任意数量的列。每列可以是以下任何数据类型 - int、varchar、bool。我可以获得列名及其类型的列表。有什么方法（遵循 MVVM 模式）可以通过它使用数据绑定为每个列输入并将数据保存在表 tab_1 中？这些表是在运行时生成的。所以只有当用户输入表的名称时，才能知道实际的列数及其对应的数据类型。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:38:41.023

如果表格的变化是固定的（比如有 5 个表格可供选择，并且它们不会在运行时更改），您可以为每个表格制作视图模型。然后在 View 中为每个 ViewModel 准备数据模板（目标类型与 viewmodel 类型匹配）。

如果你不知道有哪些表，我认为你需要在运行时根据表成员生成 ViewModel 和相应的数据模板。这应该很容易，因为正如您发布的那样，成员类型有固定的变化。

# c++ - C++ 二进制标识（清单）

> ID：12561552
> 
> 赞同：4
> 
> 时间：2012-09-24T08:44:56.617
> 
> 标签：c++, gcc, binary, manifest, identity

我们有大量 C++ 项目（GCC、Linux，主要是静态库），它们之间存在许多依赖关系。然后我们使用这些库编译一个可执行文件并在前端部署二进制文件。能够识别该二进制文件将非常有用。理想情况下，我们希望有一个小脚本，可以直接从二进制文件中检索以下信息：

```
$ident binary
$binary : Product=PRODUCT_NAME;Version=0.0.1;Build=xxx;User=xxx...
$  dependency: Product=PRODUCT_NAME1;Version=0.1.1;Build=xxx;User=xxx...
$  dependency: Product=PRODUCT_NAME2;Version=1.0.1;Build=xxx;User=xxx... 
```

所以它应该显示二进制文件本身及其所有依赖项的所有信息。

目前我们的做法是：

1.  在每个产品的编译过程中，我们生成 Manifest.h 和 Manifest.cpp，然后将 Manifest.o 注入二进制文件

2.  ident 脚本解析目标二进制文件，在那里找到生成的东西并打印此信息

但是，对于不同版本的 gcc，这种方法并不总是可靠的。我想问一下 SO 社区 - 有没有更好的方法来解决这个问题？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:13:18.680

在源代码（您的`Manifest.h`和`.cpp`）中存储数据的问题之一是文字数据的大小限制，这取决于编译器。

我的建议是使用`ld`. 它允许您在 ELF 文件中存储任意二进制数据（也是如此`objcopy`）。如果您更喜欢编写自己的解决方案，请查看[`libbfd`](https://secure.wikimedia.org/wikipedia/en/wiki/Binary_File_Descriptor_library).

假设我们有一个`hello.cpp`包含常用 C++“Hello world”的示例。现在我们有以下make文件（`GNUmakefile`）：

```
hello: hello.o hello.om
    $(LINK.cpp) $^ $(LOADLIBES) $(LDLIBS) -o $@

%.om: %.manifest
    ld -b binary -o $@ $<

%.manifest:
    echo "$@" > $@ 
```

我在这里所做的是将链接阶段分开，因为我希望清单（在转换为 ELF 对象格式之后）也链接到二进制文件中。由于我使用的是后缀规则，这是一种方法，其他方法当然是可能的，包括更好的清单命名方案，它们也最终作为`.o`文件和 GNU make 可以弄清楚如何创建它们。在这里，我要明确说明食谱。所以我们有`.om`文件，它们是从`.manifest`文件创建的清单（任意二进制数据）。配方规定将二进制输入转换为 ELF 对象。创建`.manifest`自身的方法只是将字符串通过管道传输到文件中。

显然，您的案例中棘手的部分不是存储清单数据，而是生成它。坦率地说，我对您的构建系统知之甚少，甚至无法尝试为这`.manifest`一代人提出一个食谱。

无论您放入`.manifest`文件中的任何内容都应该是一些结构化文本，可以由您提到的脚本解释，或者如果您实现命令行开关，甚至可以由二进制文件本身输出（并且忽略`.so`文件和`.so`文件被黑客入侵的行为就像普通可执行文件一样）从外壳运行时）。

上面的 make 文件没有考虑依赖项——或者更确切地说，它不会帮助您以任何方式创建依赖项列表。如果您清楚地为每个目标（即静态库等）表达您的依赖关系，您可能会强迫 GNU make 帮助您。但走那条路可能不值得……

还请看：

*   [带有 GCC 的 C/C++：将资源文件静态添加到可执行文件/库](https://stackoverflow.com/questions/4864866)和
*   [是否有相当于 Windows 的“资源文件”的 Linux 版本？](https://stackoverflow.com/questions/1997172)

* * *

如果您想要从数据生成的符号的特定名称（在您的情况下为清单），您需要使用稍微不同的路线并使用 John Ripley[在此处](https://stackoverflow.com/questions/4864866)描述的方法。

如何访问符号？简单的。将它们声明为外部（C 链接！）数据，然后使用它们：

```
#include <cstdio>

extern "C" char _binary_hello_manifest_start;
extern "C" char _binary_hello_manifest_end;

int main(int argc, char** argv)
{
        const ptrdiff_t len = &_binary_hello_manifest_end - &_binary_hello_manifest_start;
        printf("Hello world: %*s\n", (int)len, &_binary_hello_manifest_start);
} 
```

符号是确切的字符/字节。您也可以将它们声明为`char[]`，但这会导致以后出现问题。例如`printf`通话。

我自己计算大小的原因是因为 a.) 我不知道缓冲区是否保证为零终止，并且 b.) 我没有找到任何关于与`*_size`变量接口的文档。

旁注：`*`格式字符串中的 告诉`printf`它应该从参数中读取字符串的长度，然后选择下一个参数作为要打印的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:45:53.887

您可以将您喜欢的任何数据插入到`.comment`输出二进制文件的部分中。您*可以*在事后使用链接器执行此操作，但将其放置在您的 C++ 代码中可能更容易，如下所示：

```
 asm  (".section .comment.manifest\n\t"
       ".string \"hello, this is a comment\"\n\t"
       ".section .text");

 int main() {
   .... 
```

在这种情况下，该`asm`语句应该*超出*任何函数。只要您的编译器将正常功能放在该`.text`部分中，这应该可以工作。如果没有，那么您应该进行明显的替换。

链接器应将所有部分收集`.comment.manifest`到最终二进制文件中的一个 blob 中。`.o`您可以使用以下命令从任何或可执行文件中提取它们：

```
objdump -j .comment.manfest -s example.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T06:39:42.560

您是否考虑过使用发行版的标准包装系统？在我们公司，我们有数千个包，每天都会自动部署数百个包。

我们正在使用包含所有必要信息的 debian 软件包：

*   完整的变更日志，包括：
    *   作者；
    *   版本；
    *   更改的简短描述和时间戳。
*   依赖信息：
    *   必须安装以使当前软件包正常工作的所有软件包的列表。
*   为包设置环境的安装脚本。

我认为，一旦现成的解决方案已经存在，您可能不需要以自己的方式创建清单。您可以在[此处查看 debian 包 HowTo](http://wiki.debian.org/HowToPackageForDebian)。

# php - PHP自动加载功能

> ID：12561557
> 
> 赞同：0
> 
> 时间：2012-09-24T08:45:24.783
> 
> 标签：php, function, autoload

我想自动加载函数，而不是类。错误：

> PHP 致命错误：无法在第 7 行的 /var/www/localhost/proba-function.php 中重新声明 proba()（之前在 /var/www/localhost/proba-function.php:5 中声明）

index.php 代码：

```
class ASD {
    function __construct () {
        self::proba();
    }

    public static function __callStatic ( $name, $arguments ) {
        $foo = false;
        $directories = array_diff ( scandir ( __DIR__ ), array ( '..' ) );

        foreach ( $directories as $directory ) {
            $directory = __DIR__ . DIRECTORY_SEPARATOR . $directory;
            if ( is_dir ( $directory ) ) {
                $file = $directory . DIRECTORY_SEPARATOR . strtolower ( $name ) . '-function.php';
                if ( file_exists ( $file ) ) {
                    include ( $file ); // It's ok.
                    if ( function_exists ( $name ) ) {
                        $foo = true;
                        call_user_func_array(array('ASD', $name), $arguments); // It's not work.
                        break;
                    } else {}
                } else {}
            } else {}
        }

        if ( $foo === FALSE ) {
            $this -> error ( NULL, $name );
        } else {}
    }
} 
```

proba-function.php：

```
function proba () {
    print 'foo';
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:47:27.473

尝试用 替换您的`include()`调用`include_once()`，这样就不会多次包含相同的文件。

为了确保该文件实际包含在内，也许您可​​以考虑使用`require_once()`而不是简单的`include_once()`.

另请参阅文档： http: [//php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

# android - 连接本地主机时出错

> ID：12561560
> 
> 赞同：0
> 
> 时间：2012-09-24T08:45:34.223
> 
> 标签：android, httpconnection

我知道这个问题已经被问过好几次了，但我现在很无助。

我在 localhost 有一个 php 网页，它回显“Hello”。（在本地主机上完美运行）。我有以下代码在我的应用程序中显示从本地主机网页到 TextView 的响应。

```
tv = (TextView) findViewById(R.id.txtTest);
InputStream is = null;
String result = "";
    String url = "http://10.0.2.2/android/try.php";
    HttpClient httpclient = new DefaultHttpClient();

    try {               
        HttpPost httppost = new HttpPost(url);

        HttpResponse response = httpclient.execute(httppost);

        Log.d("myapp", "response " + response.getEntity());

        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        String st = EntityUtils.toString(response.getEntity());

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    tv.setText(result.toString()); 
```

我收到以下错误（LogCat）。

```
09-24 13:34:42.654: E/log_tag(2032): Error in http connection android.os.NetworkOnMainThreadException
09-24 13:34:42.654: E/log_tag(2032): Error converting result java.lang.NullPointerException 
```

**PS**我在 Manifest 中添加了 Internet 权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:49:24.680

您应该从不同于主 (UI) 线程的线程执行网络操作（连接等）。这就是你得到的错误`android.os.NetworkOnMainThreadException`的意思。

您应该查看 ASyncTask 或 Thread 来做到这一点。

也读[这篇文章](http://android-developers.blogspot.com/2009/05/painless-threading.html)...

用以下代码替换您当前拥有的代码：

```
 AsyncTask<Void,Void,Void> my_task = new AsyncTask<Void,Void,Void>() {
        @Override
        protected void onPostExecute() {
            TextView  tv = (TextView) findViewById(R.id.txtTest);
            tv.setText(result.toString());
        }

        @Override
        protected Void doInBackground(Void... voids) {
            InputStream is = null;
            String result = "";
            String url = "http://10.0.2.2/android/try.php";
            HttpClient httpclient = new DefaultHttpClient();

            try {
                HttpPost httppost = new HttpPost(url);

                HttpResponse response = httpclient.execute(httppost);

                Log.d("myapp", "response " + response.getEntity());

                HttpEntity entity = response.getEntity();
                is = entity.getContent();
                String st = EntityUtils.toString(response.getEntity());

            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
            }

            // convert response to string
            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(
                        is, "UTF-8"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
        }
    }.execute(); 
```

# php - 如何获取当月的所有星期五

> ID：12561562
> 
> 赞同：4
> 
> 时间：2012-09-24T08:45:44.883
> 
> 标签：php

我有个问题，

```
$fridays = array();
$fridays[0] = date('Y-m-d', strtotime('first friday of this month'));
$fridays[1] = date('Y-m-d', strtotime('second friday of this month'));
$fridays[2] = date('Y-m-d', strtotime('third friday of this month'));
$fridays[3] = date('Y-m-d', strtotime('fourth friday of this month'));
$fridays[4] = date('Y-m-d', strtotime('fifth friday of this month')); 
```

但是没有第五个星期五。有些月份有第五个星期五。如何检查而不设置最后一项数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T08:51:54.400

```
$fifth = strtotime('fifth friday of this month');

if (date('m') === date('m', $fifth)) {
  $fridays[4] = date('Y-m-d', $fifth);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:55:48.753

您可以使用 PHP 日期函数来执行此操作。获取您想要的月份`$timestamp`，然后执行以下操作：

```
<?php
function fridays_get($month, $stop_if_today = true) {

$timestamp_now = time();

for($a = 1; $a < 32; $a++) {

    $day = strlen($a) == 1 ? "0".$a : $a;
    $timestamp = strtotime($month . "-$day");
    $day_code = date("w", $timestamp);
    if($timestamp > $timestamp_now)
        break;
    if($day_code == 5)
        @$fridays++;

}

return $fridays;
}

echo fridays_get('2011-02'); 
```

你可以找到一个类似的帖子：[在 PHP 中，如何知道这个月到今天已经过去了多少个星期一？](https://stackoverflow.com/questions/5069966/in-php-how-to-know-how-many-mondays-have-passed-in-this-month-uptil-today)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-06T04:04:58.503

我有一个功能可以计算一个月内的星期五到我自己的应用程序....它可能对某人有所帮助。

```
function countFridays($month,$year){
	$ts=strtotime('first friday of '.$year.'-'.$month.'-01');
	$ls=strtotime('last day of '.$year.'-'.$month.'-01');
	$fridays=array(date('Y-m-d', $ts));
	while(($ts=strtotime('+1 week', $ts))<=$ls){
		$fridays[]=date('Y-m-d', $ts);
	}return $fridays;
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T08:49:56.737

我不在一台可以测试它的机器上，但是类似的东西呢......

```
if(date('Y-m-d', strtotime('fifth friday of this month')) > ""){
$fridays[4] = date('Y-m-d', strtotime('fifth friday of this month'));
} 
```

下面的链接做同样的事情，并且将完全涵盖您想要做的事情，而不会像上面那样笨拙的 if 语句..

非常相似的阅读：[阅读更多...](https://stackoverflow.com/questions/4293174/grab-all-wednesdays-in-a-given-month-in-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T08:51:09.910

该月只有 5 个星期五，如果它有 30 天并且第一个星期五是该月的第 1 或第 2 天，或者如果它有 31 天并且第一个星期五是第 1、第 2 或第 3 天，因此您可以进行条件语句根据第五个星期五的计算

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T09:49:51.740

```
for($i=0;$i<=5;$i++)
{
       echo date("d/m/y", strtotime('+'.$i.' week friday september 2012'));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-10T09:06:17.937

我将此作为我自己解决方案的基础：

```
$fridays = array();
$fridays[0] = date('d',strtotime('first fri of this month'));
$fridays[1] = $fridays[0] + 7;
$fridays[2] =  $fridays[0] + 14;
$fridays[3] =  $fridays[0] + 21;
$fridays['last'] = date('d',strtotime('last fri of this month'));

if($fridays[3] == $fridays['last']){
  unset($fridays['last']);
}
else {
  $fridays[4] = $fridays['last'];
  unset($fridays['last']);
}

print_r($fridays); 
```

我需要在一个月内的每个星期五得到一个数组，即使有 5 个，这似乎可以使用原始问题作为我的基础来解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-07T18:48:04.873

```
<?php //php 7.0.8

$offDays = array();

$date = date('2020-02');
$day= 'Friday';
$offDays[0] = date('d',strtotime("first {$day} of ".$date));
$offDays[1] = $offDays[0] + 7;
$offDays[2] =  $offDays[0] + 14;
$offDays[3] =  $offDays[0] + 21;
$offDays['last'] = date('d',strtotime("last {$day} of ".$date));

if($offDays[3] == $offDays['last']){
  unset($offDays['last']);
}
else {
  $offDays[4] = $offDays['last'];
  unset($offDays['last']);
}

foreach($offDays as $off){
    echo date('Y-m-d-D',strtotime(date($date."-".$off)));
    echo "\n";
}

?> 
```

# python - 如何沿轴展平numpy ndarray？

> ID：12561568
> 
> 赞同：3
> 
> 时间：2012-09-24T08:46:05.310
> 
> 标签：python, numpy, flat, multidimensional-array

我有三个数组：经度（400,600），纬度（400,600），数据（30,400,60）；我要做的是根据数据数组的位置（纬度和经度）提取数据数组中的值。

这是我的代码：

```
import numpy
import tables

hdf = "data.hdf5"
h5file = tables.openFile(hdf, mode = "r")

lon = numpy.array(h5file.root.Lonitude)
lat = numpy.array(h5file.root.Latitude)
arr = numpy.array(h5file.root.data)

lon = numpy.array(lon.flat)
lat = numpy.array(lat.flat)
arr = numpy.array(arr.flat)

lonlist=[]
latlist=[]
layer=[]
fre=[]

for i in range(0,len(lon)):
    for j in range(0,30):
        longi = lon[j]
        lati = lat[j]
        layers=[j]
        frequency= arr[i]

        lonlist.append(longi)
        latlist.append(lati)
        layer.append(layers)
        fre.append(frequency)

output = numpy.column_stack((lonlist,latlist,layer,fre)) 
```

问题是“频率”不是我想要的。我希望数据数组沿零轴展平，这样“频率”将是一个位置的 30 个值。numpy 中是否有这样的函数沿特定轴展平ndarray？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:49:32.470

你可以试试[`np.ravel(your_array)`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)，或者`your_array.shape=-1`。该`np.ravel`函数允许您使用可选参数`order`：选择`C`行优先顺序或`F`列优先顺序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T09:13:38.103

我猜你真正想要的只是[`transpose`](https://numpy.org/doc/stable/reference/generated/numpy.transpose.html)改变轴顺序。根据您对它的处理方式，在优化内存布局`.copy()`之后执行 a 可能很有用`transposed`，因为转置本身不会创建副本。

只是补充一点，如果你想做一些超出`F`和`C`排序的东西，你可以使用`transposed = ndarray.transpose([1,2,0])`将第一个轴移动到最后，最后一个移动到第二个位置然后执行`transposed.ravel()`（我假设 C 顺序，所以将 0 轴移动到最后） . 您也可以使用`reshape`比简单更强大的`ravel`（返回形状可以是任何尺寸）。

请注意，除非步幅完全加起来，否则 numpy 将不得不制作数组的副本，`transposed.flat()`在许多情况下，您可以通过非常好的迭代器来避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:53:58.393

```
>>> a = np.random.rand(2,2,2)
>>> a
array([[[ 0.67379148,  0.95508303],
        [ 0.80520281,  0.34666202]],

       [[ 0.01862911,  0.33851973],
        [ 0.18464121,  0.64637853]]])
>>> np.ravel(a)
array([ 0.67379148,  0.95508303,  0.80520281,  0.34666202,  0.01862911,
        0.33851973,  0.18464121,  0.64637853]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-24T23:46:25.090

你本质上是在展开一个高维张量。试试`tensorly.unfold(arr, mode=the_direction_you_want)`。例如，

```
import numpy as np
import tensorly as tl

a = np.zeros((3, 4, 5))

b = tl.unfold(a, mode=1)

b.shape # (4, 15) 
```

# android - 如何以编程方式将我们的应用程序联系人同步到 android 上的本机联系人应用程序

> ID：12561569
> 
> 赞同：1
> 
> 时间：2012-09-24T08:46:10.573
> 
> 标签：android, sync, android-contacts

我想以编程方式将我的联系人从我的应用程序同步到本机 android 联系人应用程序。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:27:59.773

您可以尝试以下代码进行帐户同步

```
public static void requestSyncNow(final Context context) {

    new Thread(new Runnable() {
        @Override
        public void run() {
            AccountManager accountManager = AccountManager.get(context);
            Account[] accounts = accountManager.getAccounts();
            boolean isMasterSyncOn = ContentResolver.getMasterSyncAutomatically();

            for (Account account : accounts) {
                Log.d(TAG, "account=" + account);

                int isSyncable = ContentResolver.getIsSyncable(account,
                        ContactsContract.AUTHORITY);
                boolean isSyncOn = ContentResolver.getSyncAutomatically(account,
                        ContactsContract.AUTHORITY);
                Log.d(TAG, "Syncable=" + isSyncable + " SyncOn=" + isSyncOn);
                if (isSyncable > 0 /* && isSyncOn */) {
                    Log.d(TAG, "request Sync");
                    Bundle bundle = new Bundle();
                    bundle.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, true);
                    ContentResolver.requestSync(account, ContactsContract.AUTHORITY, bundle);
                }
            }

        }
    }, "SyncLauncher").start();
} 
```

# jsf-2 - 隐式转换导致参数类型与 Tomcat 7 不匹配

> ID：12561570
> 
> 赞同：0
> 
> 时间：2012-09-24T08:46:14.357
> 
> 标签：jsf-2, tomcat7, el

与tomcat 6一起工作正常。

视图：`<h:inputText>`映射到 bean 中的双精度。

我看了看，除非我是盲人，否则我们依赖 Tomcat 提供的 EL。

在 Tomcat 7 上运行时，它会抛出：

> 严重：javax.faces.FacesException：java.lang.IllegalArgumentException：参数类型不匹配 javax.faces.FacesException：java.lang.IllegalArgumentException：com.sun.faces.context.ExceptionHandlerImpl.handle 的参数类型不匹配（ExceptionHandlerImpl.java:142 )
> 
> 原因：javax.faces.component.UpdateModelException：java.lang.IllegalArgumentException：javax.faces.component.UIInput.updateModel(UIInput.java:853) 处 javax.faces.component.UIInput.processUpdates(UIInput. java:735) 在 javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242) 在 javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242) 在 javax.faces.component.UIComponentBase.processUpdates(UIComponentBase .java:1242) 在 javax.faces.component.UIForm.processUpdates(UIForm.java:281) 在 javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242) 在 javax.faces.component.UIComponentBase.processUpdates( UIComponentBase.java:1242) 在 javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231) 在 com。sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78) at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) ... 还有 30 个
> 
> 原因：java.lang.IllegalArgumentException：sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java 的参数类型不匹配.lang.reflect.Method.invoke(Unknown Source) at dk.bording.inside.util.reflect.Reflection.set(Reflection.java:442) at dk.bording.inside.adapter.entity.MapAdapter.invoke(MapAdapter. java:87) 在 dk.bording.inside.adapter.entity.MapAdapter.put(MapAdapter.java:50) 在 javax.el.MapELResolver.setValue(MapELResolver.java:94) 在 com.sun.faces.el.DemuxCompositeELResolver ._setValue(DemuxCompositeELResolver.java:255) 在 com.sun.faces.el.DemuxCompositeELResolver.setValue(DemuxCompositeELResolver.java:281) 在 org.apache.el.parser.AstValue。setValue(AstValue.java:207) at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:257) at org.jboss.weld.el.WeldValueExpression.setValue(WeldValueExpression.java:64) at com.sun.faces .facelets.el.TagValueExpression.setValue(TagValueExpression.java:131) 在 javax.faces.component.UIInput.updateModel(UIInput.java:818) ... 40 更多

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:02:21.017

我怀疑这是由特定字段正在接收的输入引起的。JSF2 将根据您输入的推断数据类型进行隐式转换。即，如果该字段接收 a`0`作为您应该`double`唯一的字段的输入，它仍会尝试将其转换为 a `Long`。正如此[线程中关于同一问题的](https://community.jboss.org/thread/186925#comment68842)建议，您应该使用`<f:convertNumber/>`转换器或将您的字段绑定到`java.lang.Number`.

# php - 404 页面未找到错误

> ID：12561575
> 
> 赞同：1
> 
> 时间：2012-09-24T08:46:38.953
> 
> 标签：php, .htaccess

我正在使用 WAMP 服务器，我需要使用 htaccess 更改“404 未找到页面”样式。我该怎么做？

“未找到

在此服务器上找不到请求的 URL /viewprofile.php”。这是我的 htaccess 文件

```
 RewriteEngine on
RewriteRule (.*)-(.*).htm$ viewprofile.php?id=$1
RewriteRule (.*).htm$ viewprofile.php?id=$2
RewriteRule viewads(.*)\.htm$ viewads.php?id=$1
RewriteRule (.*)&(.*)\.htm$ homeads.php?id=$2
RewriteRule (.*).htm$ profile_city.php?id=$1
RewriteRule (.*).htm$ profile_cast.php?id=$1

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:51:45.027

您可以阅读有关[自定义错误响应的官方文档](http://httpd.apache.org/docs/2.2/custom-error.html)

简而言之，使用这个指令：

```
ErrorDocument 404 /Lame_excuses/not_found.html 
```

确保您在基本配置文件中设置了**[AllowOverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride) All**（或**FileInfo ）。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:52:30.013

使用以下代码

```
ErrorDocument 404 /404page.html 
```

在`404page.html`页面中，您可以将任何您想要显示的内容放入 404 未找到。在你的情况下“ `The requested URL /viewprofile.php was not found on this server`”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:16:02.527

在您的**`httpd.conf`**文件中，将有一个**`ErrorDocument`**部分：

```
#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://www.example.com/subscription_info.html
# 
```

之后，添加以下代码：

```
ErrorDocument 404 /error.html 
```

这会将错误页面设置为一个名为 error.html 的文件，这比使用 .htaccess 文件要好。

# php - Zip 文件正在下载 20 个字节，当提取文件时它显示损坏的文件和“未找到存档”

> ID：12561579
> 
> 赞同：0
> 
> 时间：2012-09-24T08:46:53.843
> 
> 标签：php, ziparchive

当我尝试在本地系统中下载带有以下代码的 zip 文件时，该文件正在下载所有文件，但在服务器中它以 20 个字节下载，并且当提取文件损坏且未找到存档时。所以我添加了对此代码进行一些检查并运行，但这次找不到文件，进入此检查（如果（！is_file（$archive_file_name）））。服务器上可能有什么问题？

```
function zipFilesAndDownload($file_names,$archive_file_name,$file_path)
    {
        $zip = new ZipArchive();
        //create the file and throw the error if unsuccessful
        if ($zip->open($archive_file_name, ZIPARCHIVE::CREATE )!==TRUE) {
            exit("cannot open <$archive_file_name>\n");
        }

        //add each files of $file_name array to archive
        foreach($file_path as $file_path)
        {
            if(basename($file_path) =="documents")
            {

                foreach($file_names as $value=>$files)
                {
                    $customer_files = $this->fetchCustomFieldValuesAndFieldNamesByOrder($files['order_id']);
                    if($customer_files['field_value'] !="" && file_exists($file_path.$customer_files['field_value']))
                    {
                        $file_extension = pathinfo($customer_files['field_value'], PATHINFO_EXTENSION);
                        $zip_file_name = $files['customer_name']."_"."Files.".$file_extension;
                        $zip->addFile($file_path.$customer_files['field_value'],$zip_file_name);
                    }
                    //echo $customer_files['field_value']."<br>";
                }
            } else
            {
                foreach($file_names as $value=>$files)
                {

                    if($files['file_name'] !="" && file_exists($file_path.$files['file_name']))
                {
                    $file_extension = pathinfo($files['file_name'], PATHINFO_EXTENSION);
                    $zip_file_name = $files['customer_name']."_"."Application".".$file_extension";
                    $zip->addFile($file_path.$files['file_name'],$zip_file_name);
                        //  echo $file_path.$files['file_name'],$zip_file_name."<br>";
                }

                }
        }
        }
        //  echo "numfiles: " . $zip->numFiles . "\n";
        //  echo "status:" . $zip->status . "\n";
        $zip->close();//exit;
     //then send the headers to foce download the zip file
        if (headers_sent()) {
            echo 'HTTP header already sent';
        } else {
            if (!is_file($archive_file_name)) {
                header($_SERVER['SERVER_PROTOCOL'].' 404 Not Found');
                echo 'File not found';
            } else if (!is_readable($archive_file_name)) {
                header($_SERVER['SERVER_PROTOCOL'].' 403 Forbidden');
                echo 'File not readable';
            } else {
                header("Content-type: application/zip");
                header("Content-Disposition: attachment; filename=$archive_file_name");
                header("Pragma: no-cache");
                header("Expires: 0");
                readfile("$archive_file_name");
                exit;
            }
        }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:35:20.780

如果您从 $zip->status 获得状态 11，则意味着您尝试压缩的文件不存在。以下是有关 Zip / ZipArchive 类的错误代码的文档：http: [//php.net/manual/en/zip.constants.php](http://php.net/manual/en/zip.constants.php)

[使用getcwd()](http://php.net/manual/en/function.getcwd.php)验证您所在的路径是否正确，并且该路径上的文件确实存在。

# c - 跨平台库中内存管理函数的使用

> ID：12561582
> 
> 赞同：1
> 
> 时间：2012-09-24T08:46:59.207
> 
> 标签：c, memory-management, cross-platform

我正在使用 C 创建一个跨平台库。我有一段如下代码，其中我直接使用 libc 内存管理函数：

```
myObject* myObjectCreate(void)
{
    ...
    myObject *pObject = (myObject*)malloc(sizeof(*pObject));
    ...
}

void myObjectDestroy(myObject *pObject)
{
    ...
    free(pObject);
    ...
} 
```

我知道这些内存管理功能并不总是可用的，尤其是在基于低端微控制器的嵌入式系统上。不幸的是，我的库需要在这些系统上编译。

为了解决这个问题，我想我必须让我的库客户端自定义这些函数。

那么，实现这一目标的推荐方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:50:59.233

有很多方法。

我使用#if，结合编译器提供的定义，来拥有每个平台的行为。

如果找到给定的功能（例如 malloc），则可以定义 #define MYLIB_MALLOC。

然后，稍后，您可以检查#ifdef MYLIB_MALLOC，如果不存在，则提供一个虚拟 malloc 函数，该函数将允许您的代码编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:53:28.690

使用函数指针。

在库中定义以下指针：

```
void* (*CustomMalloc)(size_t) = NULL;
void (*CustomFree)(void*) = NULL; 
```

并且在使用库函数之前初始化这些指针以指向和的自定义`malloc()`实现`free()`。或者将它们初始化为指向真实的`malloc()`and `free()`。

在库内部替换`malloc(size)`为`CustomMalloc(size)`和。`free(pointer)``CustomFree(pointer)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:51:51.673

使用条件编译，即定义一些宏的like `LIBC_AVAIL`，`LIBC_NOT_AVAIL`并在编译时包含不同的代码。

# windows-8 - Win 8 App 从“项目 - 商店”运行时挂起证书失败，但在单独运行 WACK 时通过

> ID：12561585
> 
> 赞同：2
> 
> 时间：2012-09-24T08:47:06.603
> 
> 标签：windows-8, suspend

当我在我的机器上针对我的应用程序的“发布”安装运行 Windows 应用程序证书工具包 (WACK) 时，所有测试都通过了，当我转到：项目 -> 商店 -> 创建应用程序包...并运行最后，它总是在性能测试中失败，特别是“暂停”过程。

有什么区别？

与通过 SDK 启动的版本相比，在 VS2012 RTM 中运行的 WACK 版本是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:01:27.863

它们是相同版本的 WACK。所有“Project -> Store -> Create App Packages”都是在您的应用程序上运行该工具包。我的假设是 Visual Studio 导致您的计算机运行缓慢，因此导致应用程序在运行时失败 WACK。我在虚拟机中运行 WACK 时也看到过同样的事情。

当您运行结果通过时，Visual Studio 是否正在运行？当您获得通过评级时，您的系统是否还有其他差异？我的假设是该应用程序可以通过评级，但如果您提交它以进行认证并且由于暂停/恢复而失败，我会进一步询问。

# javascript - 将文章 ID 发送到 ajax 文件或直接在 ajax 文件中获取文章 ID？在joomla！插入

> ID：12561589
> 
> 赞同：0
> 
> 时间：2012-09-24T08:47:27.110
> 
> 标签：javascript, php, ajax, plugins, joomla

我想将当前文章 id 传递给 ajax 文件。ajax 文件的 URL 类似于 www.web.com/plugins/system/ajax.php 所以使用 JRequest::getInt(id) 总是解析 0 整数。在非 ajax 文件中，我可以以相同的方式获取 ID。所以我想知道如何传递整数值，或者也许还有其他方法可以在 ajax 文件中获取文章 ID？

```
<?php
defined( '_JEXEC' ) or die;
define( 'DS', DIRECTORY_SEPARATOR );
?>

<?php
class plgSystemRatingx extends JPlugin

{
    public function onContentBeforeDisplay()
    {
?>
<?php echo JRequest::getInt('id'); ?>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function()
{
$(".like").click(function()
{
var id=$(this).attr("id");
var name=$(this).attr("name");
var dataString = 'id='+ id + '&name='+ name;
$("#votebox").slideDown("slow");

$("#flash").fadeIn("slow");

$.ajax
({
type: "POST",
url: "/joomla/plugins/system/ratingx/conf.php",
data: dataString,
cache: false,
success: function(html)
{
$("#flash").fadeOut("slow");
$("#content").html(html);
} 
});
});

$(".close").click(function()
{
$("#votebox").slideUp("slow");
});

});
</script>
<?php echo JURI::current(); ?>

<div style="margin:50px">
<a href="#" class="like" id="1" name="up">Like</a> -- <a href="#" class="like" id="1" name="down">Dislike</a>
<div id="votebox">
<span id='close'><a href="#" class="close" title="Close This">X</a></span>
<div style="height:13px">
<div id="flash">Loading........</div>
</div>
<div id="content">

</div>

</div>
</div>
<?php

        return true;
    }
} 
```

AJAX 文件：

```
<?php
// Set flag that this is a parent file
define('_JEXEC', 1);

// No direct access.
defined('_JEXEC') or die;

define( 'DS', DIRECTORY_SEPARATOR );

define('JPATH_BASE', dirname(__FILE__).DS.'..'.DS.'..'.DS.'..' );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$db = &JFactory::getDbo();

if(JRequest::getInt('id'))
{

$id = JRequest::getInt('id');
$name = JRequest::getVar('name');

$queryx = "SELECT id from messages";
$db->setQuery($queryx);
$db->query($queryx);
$idx = $db->loadObjectList();

$query = "update messages set $name=$name+1 where id='$id'";
$db->setQuery( $query );
$db->query( $query ) or die('blo5gai');

$query2 = "select up,down from messages where id='$id'";
$db->setQuery( $query2 );
$db->query( $query2 ) or die('blo5gai');

$vote = $db->loadObject();

$up_value= $vote->up;
$down_value = $vote->down;

$total=$up_value+$down_value;

$up_per=($up_value*100)/$total;
$down_per=($down_value*100)/$total;

?>
<div style="margin-bottom:10px">
<b>Ratings for this blog</b> ( <?php echo $total; ?> total)
</div>
<table width="700px">
<?php echo JURI::current(); ?>
<tr>
<td width="30px"></td>
<td width="60px"><?php echo $up_value; ?></td>
<td width="600px"><div id="greebar" style="width:<?php echo $up_per; ?>%"></div></td>
</tr>

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $down_value; ?></td>
<td width="600px"><div id="redbar" style="width:<?php echo $down_per; ?>%"></div></td>
</tr>

</table>

<?php

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:40:12.217

```
<?php
// Set flag that this is a parent file
define('_JEXEC', 1);

// No direct access.
defined('_JEXEC') or die;

define( 'DS', DIRECTORY_SEPARATOR );

define('JPATH_BASE', dirname(__FILE__).DS.'..'.DS.'..'.DS.'..' );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$id = JRequest::getInt('id');
$db = &JFactory::getDbo();

if($id)
{       
    $name   = JRequest::getVar('name');

    $query->select('id');
    $query->from('messages');   
    $db->setQuery($query);
    $db->query($query);
    $idx = $db->loadResult();

    $query->update('messages');
    $query->set('name = '.$name+1);
    $query->where('id='.$id);
    $db->setQuery($query);
    $db->query();

    $query->select('up,down');
    $query->from('messages');
    $query->where('id='.$id);
    $db->setQuery($query);
    $db->query($query);
    $vote = $db->loadObject();

    $up_value= $vote->up;
    $down_value = $vote->down;

    $total=$up_value+$down_value;

    $up_per=($up_value*100)/$total;
    $down_per=($down_value*100)/$total;

?>
    <div style="margin-bottom:10px">
        <b>Ratings for this blog</b> ( <?php echo $total; ?> total)
    </div>

    <table width="700px">
        <?php echo JURI::current(); ?>
        <tr>
            <td width="30px"></td>
            <td width="60px"><?php echo $up_value; ?></td>
            <td width="600px"><div id="greebar" style="width:<?php echo $up_per; ?>%"></div></td>
        </tr>

        <tr>
            <td width="30px"></td>
            <td width="60px"><?php echo $down_value; ?></td>
            <td width="600px"><div id="redbar" style="width:<?php echo $down_per; ?>%"></div></td>
        </tr>
    </table>
<?php

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:04:00.617

您必须添加一个属性作为`vid`并通过 vid 属性传递 id 的值

例子：

```
<a href="#" class="like" id="1" name="up" vid="<?php echo JRequest::getInt('id'); ?>">Like</a> 
```

在脚本文件中，您必须像这样调用属性。

```
<script type="text/javascript">
    $(document).ready(function()
    {
        $(".like").click(function()
        {
            var vid=$(this).attr("vid");
            alert(vid);
        }
    });
</script> 
```

# javascript - IE 8：删除节点保留子节点

> ID：12561591
> 
> 赞同：4
> 
> 时间：2012-09-24T08:47:41.580
> 
> 标签：javascript, jquery, dom, internet-explorer-8

我正在尝试使用 javascript 从 dom 树中删除一个节点，同时保留它的子节点。我测试了下面显示的 3 种方法，它们在 Firefox 中运行良好，但在 IE 8 中却不行（参见下面的示例）。

```
function removeNodeKeepChildren(node){
    // approach 1
    jQuery(node.parentNode).children().map(function (index) {
        jQuery(this).replaceWith(jQuery(this).contents());
    });

    // approach 2
    // doesn't work with content() either
    jQuery(node.parentNode).html(jQuery(node).html());

    // approach 3
    var childfragment = document.createDocumentFragment();
    for(var i=0; i<node.childNodes.length;i++){
            childfragment.appendChild((node.childNodes[i]).cloneNode());
    }
    node.parentNode.replaceChild(childfragment,node);
} 
```

示例输入节点：

```
<span class="A1">
    start text
    <span class="F">
        bold text
    </span>
    end text
</span> 
```

它应该导致什么：

```
 start text
    <span class="F">
        bold text
    </span>
    end text 
```

IE 8 做了什么：

```
 start text
    <span class="F">
    </span>
    end text 
```

如您所见，IE 忽略/删除嵌套的子级。

我会很感激任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:20:19.150

Next is most simplest and fastest native javascript code:

```
function removeNodeKeepChildren(node) {
  if (!node.parentElement) return;
  while(node.firstChild)
  {
    node.parentElement.insertBefore(node.firstChild, node);
  }
  node.parentElement.removeChild(node);
} 
```

[http://jsfiddle.net/N3J7K/](http://jsfiddle.net/N3J7K/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:53:11.327

这样做应该很容易：

```
function removeKeepChildren(node) {
    var $node = $(node);
    $node.contents().each(function() {
        $(this).insertBefore($node);
    });
    $node.remove();
} 
```

[**看到它在行动**](http://jsfiddle.net/SP4fG/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T09:00:28.887

使用[unwrap()](http://api.jquery.com/unwrap/)，这就是它的用途。

```
<span class="A1">
    start text
    <span class="F">
        bold text
    </span>
    end text
</span>
<script>
  jQuery(function($){$('.F').unwrap();});
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T08:56:16.960

@Jon 的方法，没有迭代：

```
function removeKeepChildren(node) {
    var $node = $(node);
    var contents = $node.contents();
    $node.replaceWith(contents);
} 
```

**[在行动中看到它。](http://jsfiddle.net/SP4fG/1/)**

* * *

@Dr.Molle 的答案应该是公认的。

# ios - 如何检查 iOS 版本是 iOS 6？

> ID：12561599
> 
> 赞同：25
> 
> 时间：2012-09-24T08:48:06.667
> 
> 标签：ios, objective-c, ios6

> **可能重复：**
> [检查 iPhone iOS 版本](https://stackoverflow.com/questions/3339722/check-iphone-ios-version)

我想在 iOS 中检查 iOS 版本。

因为我有一些仅适用于 iOS 6 的代码。

那我该怎么办？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-24T08:55:05.287

检查这个 GitHub Gist [https://gist.github.com/998472](https://gist.github.com/998472)

您可以添加代码或将其包含在您的 ...-Prefix.pch 文件中，这样您就可以在任何需要的地方使用它。

* * *

编辑

我将留下一个示例，说明如何使用 Gist 中的代码，以便人们检查它是否对他们的案例有用。这也可以在 Gist 上找到。

```
/*
 *  Usage
 */ 

if (SYSTEM_VERSION_LESS_THAN(@"4.0")) {
    ...
}

if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"3.1.1")) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-24T08:52:53.447

试试这个：

*更新：*

```
NSArray *vComp = [[UIDevice currentDevice].systemVersion componentsSeparatedByString:@"."];

if ([[vComp objectAtIndex:0] intValue] >= 7) {
    // iOS-7 code[current] or greater
} else if ([[vComp objectAtIndex:0] intValue] == 6) {
    // iOS-6 code
} else if ([[vComp objectAtIndex:0] intValue] > 2) {
    // iOS-3,4,5 code
} else {
    // iOS-1,2... code: incompatibility warnings, legacy-handlers, etc..  
} 
```

*以前的代码：*

```
NSArray *vComp = [[UIDevice currentDevice].systemVersion componentsSeparatedByString:@"."];

if ([[vComp objectAtIndex:0] intValue] == 6) {
    // iOS-6 code
} else {
    // iOS-5, iOS-4... code     
} 
```

要专门检查 IOS 使用的颠覆

```
float sysVer = [[[UIDevice currentDevice] systemVersion] floatValue];

if (sysVer > 6.01) {
    // iOS-6.01+ code
} else {
    // prior iOS versions
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-24T08:50:21.653

您可以使用以下命令将 iOS 版本作为字符串获取：

```
[[UIDevice currentDevice] systemVersion] 
```

# classpath - Javamail 演示不工作

> ID：12561602
> 
> 赞同：1
> 
> 时间：2012-09-24T08:48:20.517
> 
> 标签：classpath, jakarta-mail, msgsend

我尝试从 JavaMail 运行演示 msgsend。我已经下载了 1.4.5 版的 JavaMail 并将其解压到我的 JDK 文件夹中。我已将 mail.jar 添加到 CLASSPATH。我已经编译 msgsend.java 没有收到任何错误。但是，当我尝试运行 java msgsend 时出现`"Could not find the main class: msgsend"`错误。

我是 Java 世界的菜鸟，花了几个小时浏览互联网试图找到答案，但在我的情况下无济于事。

这是我在控制台中得到的。我究竟做错了什么？

```
C:\Program Files\Java\jdk1.6.0_34\javamail-1.4.5\demo>echo %CLASSPATH%
C:\Program Files\Java\jdk1.6.0_34\javamail-1.4.5\mail.jar

C:\Program Files\Java\jdk1.6.0_34\javamail-1.4.5\demo>javac -cp "%classpath%" ms
gsend.java

C:\Program Files\Java\jdk1.6.0_34\javamail-1.4.5\demo>java msgsend
Exception in thread "main" java.lang.NoClassDefFoundError: msgsend
Caused by: java.lang.ClassNotFoundException: msgsend
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: msgsend.  Program will exit.

C:\Program Files\Java\jdk1.6.0_34\javamail-1.4.5\demo>java -cp "%classpath%" msg
send
Exception in thread "main" java.lang.NoClassDefFoundError: msgsend
Caused by: java.lang.ClassNotFoundException: msgsend
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: msgsend.  Program will exit.

C:\Program Files\Java\jdk1.6.0_34\javamail-1.4.5\demo> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:07:25.130

类区分大小写。确保您的类路径中有已编译的 MsgSend，并以正确的大小写调用已编译的类。

尝试`java MsgSend`

**编辑：**

这就是它的工作方式：

像你一样编译： `javac.exe -cp ..\mail.jar msgsend.java` 然后运行编译的类： `java -cp ..\mail.jar;. msgsend` 换句话说：你的类路径中缺少当前文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:08:10.263

您没有包含 msgsend.class 所在的目录，通常是当前目录（“.”）。请参阅JavaMail 随附的[README.txt](http://www.oracle.com/technetwork/java/javamail145readme-1562609.html)中的示例。

# ubuntu - 在 Cloudstack 上添加主机

> ID：12561609
> 
> 赞同：-1
> 
> 时间：2012-09-24T08:48:52.117
> 
> 标签：ubuntu, cloud

我有一个关于 Cloudstack 配置的问题，我的问题是在添加主机部分，它的主机规格是什么？我必须在该主机上安装 Xenserver 吗？谢谢之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T12:32:07.247

在`CloudStack`主机中是计算的基本单元，它被称为集群。在添加主机之前，您已经创建了集群并且集群是`hypervisor`特定的，如果您正在创建`vmware`集群，那么在添加集群时您必须提供`vcenter`服务器的详细信息`datacenter`和集群名称，第一次该特定集群中的所有主机将被自动添加，稍后如果您将任何新主机添加到集群，您可以通过`cloudstack`添加主机`gui`或添加`cloudmonkey` `cli`。如果集群是服务器，那么您将手动`xen`添加所有主机，这些主机将是单个服务器。`xen`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:02:15.340

对于 Apache CloudStack 管理员问题，您最好在用户邮件列表上发帖。顾问、用户和开发人员会定期阅读和回复邮件列表。

通过发送电子邮件至 cloudstack-users-subscribe@incubator.apache.org 订阅

接下来，向 cloudstack-users@incubator.apache.org 发送一封说明问题的电子邮件

在您的情况下，您需要先在主机上安装 XenServer，然后再将其添加到 CloudStack 服务器。查看文档以查看要使用的 XenServer 版本。您还可以搜索 Apache CloudStack 用户组存档，看看是否遇到了类似的问题。存档位于[http://mail-archives.apache.org/mod_mbox/incubator-cloudstack-users/](http://mail-archives.apache.org/mod_mbox/incubator-cloudstack-users/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:21:41.353

是的，在使用“添加主机部分”添加之前，您需要安装 Ubuntu、Xen/KVM 并配置主机

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-01T03:20:56.240

你可以按照安装文档让它工作，很清楚。不管你想用KVM还是Xen作为管理程序。这是链接[http://docs.cloudstack.apache.org/projects/cloudstack-installation/en/latest/qig.html#kvm-setup-and-installation](http://docs.cloudstack.apache.org/projects/cloudstack-installation/en/latest/qig.html#kvm-setup-and-installation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-18T19:50:12.593

这取决于您使用的是哪种虚拟化？

您在区域添加的第一阶段选择了哪种虚拟化？

如果您选择 KVM，请确保主机/服务器已安装 KVM 和 cloudstack-agent。如果您使用的是 Xen，请确保在服务器/主机上安装了 xenserver。

# php - WooCommerce 按 id 返回产品对象

> ID：12561611
> 
> 赞同：52
> 
> 时间：2012-09-24T08:48:58.177
> 
> 标签：php, wordpress, woocommerce

我正在为 woocommerce 创建一个自定义主题，我需要能够创建一个迷你产品展示。我在查找有关 woocommerce api 的文档时遇到问题。我有一个以逗号分隔的产品 ID 列表，我需要对其进行迭代并按顺序显示每个产品 ID 的自定义迷你产品显示。

```
$key_values = get_post_custom_values('rel_products_ids');
//get comma delimited list from product

$rel_product_ids = explode(",", trim($key_values, ",")); 
// create array of just the product ids

foreach ( $rel_product_ids as $pid ) { 
    //sequentially get each id and do something with it

    $loop = new WP_Query( array( 'post__in' => $pid ) );
    // also tried ...
    //$loop = new WP_Query( array( 'ID' => $pid ) );

    while ( $loop->have_posts() ) : $loop->the_post(); $_product = &new WC_Product( $loop->post->ID );
        //do stuff here I have stripped the html in favor of getting to the meat of the issue
        woocommerce_show_product_sale_flash( $post, $_product );
        if (has_post_thumbnail( $loop->post->ID )) echo get_the_post_thumbnail($loop->post->ID, 'shop_single');
        get_permalink( $loop->post->ID );
        the_title(); 
        $_product->get_price_html();
    endwhile;
} 
```

任何帮助，将不胜感激。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2016-09-17T08:38:24.840

使用此方法：

```
$_product = wc_get_product( $id ); 
```

官方 API 文档：[wc_get_product](https://docs.woocommerce.com/wc-apidocs/function-wc_get_product.html)

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-11-25T10:44:02.223

另一种简单的方法是使用 WC_Product_Factory 类，然后调用函数 get_product(ID)

[http://docs.woothemes.com/wc-apidocs/source-class-WC_Product_Factory.html#16-63](http://docs.woothemes.com/wc-apidocs/source-class-WC_Product_Factory.html#16-63)

样本：

```
// assuming the list of product IDs is are stored in an array called IDs;
$_pf = new WC_Product_Factory();  
foreach ($IDs as $id) {

    $_product = $_pf->get_product($id);

    // from here $_product will be a fully functional WC Product object, 
    // you can use all functions as listed in their api
} 
```

然后，您可以使用其 api 中列出的所有函数调用：http: [//docs.woothemes.com/wc-apidocs/class-WC_Product.html](http://docs.woothemes.com/wc-apidocs/class-WC_Product.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T09:21:08.700

好吧，我应该被扼杀。绝对是 RTM，但不适用于 WooCommerce，不适用于 Wordpress。由于 JOLT 可乐找到了解决方案（所有冰雹 JOLT 可乐）。

任务：将名为“related_product_ids”的字段添加到自定义帖子类型。因此，当显示该帖子时，可以显示迷你产品显示。

问题：获取通过 WP_Query 返回的多个 ID 时遇到问题。

解决方案：

```
$related_id_list          = get_post_custom_values('related_product_ids');
    // Get comma delimited list from current post
$related_product_ids      = explode(",", trim($related_id_list[0],','));
    // Return an array of the IDs ensure no empty array elements from extra commas
$related_product_post_ids = array( 'post_type' => 'product', 
                                   'post__in'  => $related_product_ids,
                                   'meta_query'=> array( 
                                        array( 'key'    => '_visibility',
                                               'value'  => array('catalog', 'visible'),'compare' => 'IN'
                                        )
                            ) 
);      
    // Query to get all product posts matching given IDs provided it is a published post
$loop = new WP_Query( $related_posts );
    // Execute query
while ( $loop->have_posts() ) : $loop->the_post(); $_product = get_product( $loop->post->ID );
    // Do stuff here to display your products 
endwhile; 
```

感谢任何可能为此花费了一些时间的人。

蒂姆

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-06T10:52:07.733

```
global $woocommerce;
var_dump($woocommerce->customer->get_country());
foreach ( WC()->cart->get_cart() as $cart_item_key => $cart_item ) {
    $product = new WC_product($cart_item['product_id']);
    var_dump($product);
} 
```

# iphone - iOS6 MKMapView 自定义注释不呈现

> ID：12561616
> 
> 赞同：1
> 
> 时间：2012-09-24T08:49:27.493
> 
> 标签：iphone, ios, mkmapview, ios6, mkannotationview

我的应用程序在 iOS5 中正常工作，更新到 iOS6 后，我无法在`MKMapView`. 我发现，那个`(MKAnnotationView *)mapView:(MKMapView *)_mapView viewForAnnotation:(id<MKAnnotation>)annotation`函数没有被调用。所以我在地图上只看到默认的红色图钉。这是我的初始化代码：

```
[self setMapView:[[MKMapView alloc] initWithFrame:CGRectMake(FRAME_X, FRAME_Y, FRAME_FULL_WIDTH, FRAME_HEIGTH)]];
[self.mapView addAnnotations:self.annotations];
[self.mapView setDelegate:self];
[self.view addSubview:self.mapView]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:10:44.377

phix23 解决方案是正确的。我需要在注释之前设置委托

# ios - 需要帮助将值添加到数据库中

> ID：12561623
> 
> 赞同：0
> 
> 时间：2012-09-24T08:50:16.817
> 
> 标签：ios, sqlite

我的文件是这样的……

**“当一件作品似乎领先于时代时，它只是落后于作品的时代”——让·
科克托不要寻找任何其他标准来评判：作品好，工匠大师的产品”——让·德拉布鲁耶尔
“当一个作家谈论他的作品时，他在谈论一段恋情”——阿尔弗雷德·卡津
“当爱和技能一起工作，期待杰作”——约翰·拉斯金** 

谁能建议我如何通过使用“.

我真的需要一些有效的方法来做到这一点，因为我的文档大约有 10,000 页，我必须将所有这些添加到数据库并在 ios 应用程序中调用..

提前谢谢..我知道我只会在这里得到我的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:10:05.380

我不确定这对于您的文档和您的情况是否可行，但是如果您将其保存为文本文档然后解析它会怎样？

解析会很简单——你应该找到“的第一次出现，然后你应该找到”的第二次出现。然后获取第一个和第二个“之间的文本，并放入数据库。

# flash - Adobe AIR 应用程序未安装在 iOS 6 iPad 中

> ID：12561629
> 
> 赞同：1
> 
> 时间：2012-09-24T08:50:37.103
> 
> 标签：flash, air

我只是使用 3.4 AIR SDK 在 Flash Professional 中创建 ipad 应用程序，但我发布的 .ipa 文件未安装在 iOS 6 ipad 中

这个 .ipa 在 iOS 5.1 ipad 中运行良好，所以请解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:49:47.937

请从 ipad 中删除应用程序并从 ipad 中删除证书安装请更正配置文件证书并制作新的 ipa 并再次安装。

它的工作我已经解决了这个问题！！！！

谢谢

# grails - 使用 beforeUpdate 更改属性似乎对扩展类没有影响？

> ID：12561632
> 
> 赞同：0
> 
> 时间：2012-09-24T08:50:50.300
> 
> 标签：grails, inheritance, grails-orm

我们有以下域类继承策略。

*   AbstractDomain（包含默认属性）
*   用户扩展 AbstractDomain
*   运算符扩展用户

在 AbstractDomain 中，我们使用方法创建了实现 beforeUpdate 和 beforeInsert 的方法，因此我们可以在扩展类上扩展它们

抽象领域

```
abstract class AbstractDomain {
    protected void onBeforeInsert() {
    ...
    }

    protected void onBeforeUpdate() {
    ...
    }

    def beforeInsert() {
        onBeforeInsert()
    }

    def beforeUpdate() {
        onBeforeUpdate()
    }
} 
```

在用户类中，我们有这样加密用户密码的逻辑..

用户

```
public class User extends AbstractDomain {
    @Override
    protected void onBeforeUpdate() {
        super.onBeforeUpdate()
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        println "encoding password!!!!"
        if (springSecurityService) { // added the if clause to ensure
that tests work correct!
            password = springSecurityService.encodePassword(password)
        }
    }
} 
```

操作员

```
public class Operator extends User {
// code omitted
} 
```

因此，当我尝试更新操作员时，会看到消息“编码密码！！！！” 该属性已设置，但是当我检查数据库时，密码仍然是明文。我所做的更改似乎没有效果并且似乎没有被持久化。

任何线索我可能会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:36:31.497

看代码……如果看到“编码密码！！！” 文本，但密码未编码，则 springSecurityService 属性未设置，或者 encodePassword 函数无法工作......这与继承无关。我会把你的 println 移到 if 里面，因为这样更准确。

# report - 在 RichTextBox 内将所选文本设置为粗体

> ID：12561633
> 
> 赞同：1
> 
> 时间：2012-09-24T08:50:53.187
> 
> 标签：report, ms-access-2007, richtextbox, selection

在报表上的 MS-Access RichTextBox 中，我想选择粗体文本。

我在一个论坛上找到[了这篇文章](http://www.vbforums.com/showthread.php?286226-bold-in-a-label-%28resolved%29&p=1669027&viewfull=1#post1669027)，它解释了如何在 VB6 中执行此操作。我在 MS-Access 中尝试了相同的操作，都使用了`Text Format`属性设置为的普通 Access 文本框，`Rich Text`并`Microsoft Forms 2.0 TextBox`通过`ActiveX Controls`对话框添加了一个，两者都不起作用。

我知道 VBA 很大程度上基于 VB6，所以我的逻辑是如果它可以在 VB6 中完成，我应该能够在 Access 中完成。

我对吗？是否可以在 MS-Access 上的 RichTextBox 内将所选文本设置为粗体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:04:38.277

您没有提及 Access 的版本，对于 2007 (AFAIK) 和 2010，您可以创建一个文本框并将数据选项卡上的文本格式设置为富文本。然后，您可以将控制源设置为：

```
="The quick <b>brown</b> fox" 
```

在表格设计中，备忘录数据类型具有富文本选项。

* * *

来自[包含字段数据的富格式文本](http://blogs.office.com/b/microsoft-access/archive/2008/01/16/rich-formatted-text-that-includes-data-from-fields.aspx)

> 由于多种原因，富文本控件不支持全部范围的 HTML，而是专注于格式化文本的有限 HTML 子集。如果您坚持下面的 HTML 标记和属性列表，您应该是安全的：

```
<font face="Arial Black" size=3 color="#A5A5A5" style="Background-Color:#FFFF00"> 
<strong> 
<em> 
<u> 
<br> 
<div align=right dir=RTL> 
<blockquote> 
<ol> and <li> for number 
<ul> and <li> for bulleted lists 
```

# c++ - C++ 调试打印流生成警告

> ID：12561634
> 
> 赞同：3
> 
> 时间：2012-09-24T08:50:53.920
> 
> 标签：c++, stream, debug-print

[我在 stackoverflow 上](https://stackoverflow.com/a/67428/1693829)看到了这个 c++ 的调试打印，但我不能评论它（我是新手）：

```
#ifdef DEBUG
#define dout cout
#else
#define dout 0 && cout
#endif 
```

它是这样使用的：

```
dout << "in foobar with x= " << x << " and y= " << y << '\n'; 
```

乍一看我喜欢它，但我用 -Wall 编译，所以我收到很多警告，比如

> test1.cc:30:46：警告：语句无效 [-Wunused-value]

有没有办法协调 -Wall 和面向流的调试打印？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:09:52.457

这可以进一步细化，但尝试以此为起点：

```
#ifdef DEBUG
#define LOG_DEBUG( stuff ) { std::cout << stuff << std::endl; }
#else
#define LOG_DEBUG( stuff )
#endif 
```

然后在后面的代码中：

```
LOG_DEBUG( __FILE__ << " bla bla bla " << foo ); 
```

# stored-procedures - 依赖于其他字段的自动增量

> ID：12561637
> 
> 赞同：-1
> 
> 时间：2012-09-24T08:50:58.117
> 
> 标签：stored-procedures, firebird

获得取决于其他领域的自动增量“计数器”的最佳方法是什么？

想象一下这张桌子

```
CUSTOMER - COUNTER
1 - 1
1 - 2
1 - 3
2 - 1
2 - 2 
```

我需要 Counter 为每个客户添加的每条记录增加 1。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:40:26.533

创建额外的表来为每个客户保存柜台：

```
CREATE TABLE customer_counter
(
  customer_id  INTEGER NOT NULL,
  counter      INTEGER NOT NULL,

  PRIMARY KEY (customer_id)
) 
```

使用以下程序获取给定客户的下一个柜台号码：

```
CREATE PROCEDURE get_customer_counter (customer_id INTEGER)
  RETURNS (counter INTEGER)
AS
BEGIN
  SELECT SUM(counter) FROM customer_counter
  WHERE customer_id = :customer_id
  INTO :counter;

  counter = COALESCE(:counter, 0);

  EXECUTE STATEMENT 
    'INSERT INTO customer_counter (customer_id, counter) ' ||
    'VALUES (' || :customer_id || ', 1)'
    WITH AUTONOMOUS TRANSACTION;
END 
```

看看我们如何使用 sum 和插入 delta 值而不是更新单个记录。因此，我们防止了死锁。

定期我们需要通过将增量记录合并为一个总值来清除计数器表：

```
CREATE TRIGGER on_disconnect_database
  ACTIVE
  ON DISCONNECT
AS
  DECLARE VARIABLE sm          INTEGER;
  DECLARE VARIABLE cnt         INTEGER;
  DECLARE VARIABLE customer_id INTEGER;
BEGIN
  FOR
    SELECT customer_id, SUM(counter), COUNT(counter)
    FROM customer_counter
    GROUP BY customer_id
    INTO :customer_id, :sm, :cnt
  DO BEGIN
    IF (:cnt > 1) THEN
    BEGIN
      DELETE FROM customer_counter WHERE customer_id = :customer_id;
      INSERT INTO customer_counter (customer_id, counter)
        VALUES (:customer_id, :sm);
      WHEN ANY DO
      BEGIN
      END
    END
  END
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:59:11.247

很难真正说出你到底想要什么，但我假设你想遍历每个 X 字段和它的 Y 子字段，将它用于计数器或其他任何东西。

```
<?php
$x = array("customer1","customer2","customer3");
$y = array("name","address","phone");

$counter;

foreach($x as $eachX):
    $counter  = 1;
    foreach($y as $eachY):
        //do stuff here
        $counter++;
    endforeach;
endforeach;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:33:37.797

我想这个存储过程就可以了！

```
create procedure New_Procedure
returns (
o_customer integer,
o_counter integer)
as

declare variable v_oldcostomer integer;
begin

for select customer
 from customers
 order by 1
 into o_customer
 do begin
 if (v_oldcostomer is null or (v_oldcostomer is not null and v_oldcostomer <> o_customer) ) then
    o_counter = 0;

 o_counter = o_counter + 1;
 v_oldcostomer = o_customer;
 suspend;
 end
end 
```

# mysql - MySQL 使用另一个表中的内容更新新表中的列（移动）

> ID：12561642
> 
> 赞同：0
> 
> 时间：2012-09-24T08:51:27.510
> 
> 标签：mysql, subquery, move

我有这些表（编辑了不相关的字段）

```
mysql> desc studentcourseplan;
+-------------------+--------------+------+-----+---------+----------------+
| Field             | Type         | Null | Key | Default | Extra          |
+-------------------+--------------+------+-----+---------+----------------+
| cpl_id            | int(11)      | NO   | PRI | NULL    | auto_increment |
| student_id        | int(11)      | YES  | MUL | NULL    |                |
+-------------------+--------------+------+-----+---------+----------------+

mysql> desc studentdates;
+-----------------------+---------+------+-----+---------+----------------+
| Field                 | Type    | Null | Key | Default | Extra          |
+-----------------------+---------+------+-----+---------+----------------+
| student_date_id       | int(11) | NO   | PRI | NULL    | auto_increment |
| student_id            | int(11) | YES  |     | NULL    |                |
| student_date_cpl_id   | int(11) | YES  |     | NULL    |                |
+-----------------------+---------+------+-----+---------+----------------+ 
```

我想将该列复制`studentcourseplan.cpl_id`到`studentdates.student_date_cpl_id`使用以下查询（以排除重复项）

```
SELECT cpl_id FROM studentcourseplan
    WHERE student_id NOT IN ('50', '51', '85', '86', '90', '95', '89', '91', '92', '93', '94', '97', '98', '99', '100', '88') 
```

当我执行正常操作`INSERT INTO studentdates.student_date_cpl_id SELECT ......`时，它会添加到新行中，并且不会更新当前行。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:58:46.537

```
Update  studentdates s,studentcourseplan sp
SET s.student_date_cpl_id = sp.cpl_id
where s.student_id=sp.student_id            
and s.student_id not in('50', '51', '85', '86', '90', '95', '89', '91', '92', '93', '94', '97', '98', '99', '100', '88') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:00:11.777

尝试这样的事情

```
INSERT INTO studentdates.student_date_id,
     studentdates.student_date_cpl_id
select .... (join your tables)

ON DUPLICATE KEY UPDATE studentdates.student_date_cpl_id = studentcourseplan.cpl_id 
```

# android - 在android中显示分子的3D模型的应用程序

> ID：12561645
> 
> 赞同：-1
> 
> 时间：2012-09-24T08:51:49.050
> 
> 标签：android, android-image

我需要开发一个应用程序来显示 android 中分子的 3D 模型。谁能告诉我这是如何实现的。

提前致谢。

日深

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:57:57.160

可能它应该像通常实现的所有 3d 图形一样实现 - 通过 OpenGL（android 支持 OpenGL ES）。您可以从[文档](http://developer.android.com/guide/topics/graphics/opengl.html)开始，然后继续阅读许多 OpenGL 书籍中的一些。

# iphone - Beta测试/提交到应用商店之前的最后步骤？

> ID：12561652
> 
> 赞同：0
> 
> 时间：2012-09-24T08:52:13.860
> 
> 标签：iphone, app-store

我是新手。我已经解决了我可以在我的应用程序中找到的所有错误，但在我找到 beta 测试人员并最终提交到应用程序商店之前，我想确保我没有遗漏任何重要步骤。例如，我看到几个关于检查内存泄漏的问题，但我真的不知道那是什么或如何去做；沙盒也是如此。我已经创建了一个签名证书和一个配置文件并注册了我的设备。

所以：假设我的代码一切正常，我还应该做什么或检查什么？

（如果这不是一个合适的 stackoverflow.com 问题，我深表歉意；请告诉我，我会尽快将其删除。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:59:09.103

一定要检查是否有泄漏。

泄漏是您的应用程序在完成使用后不会放弃系统内存的地方。这可能意味着（a）您的应用程序使用的内存超出了它的需要，并且（2）如果您的应用程序运行很长时间，设备内存不足，您的应用程序可能会崩溃并且其他应用程序将被关闭。

这是使用 Xcode 附带的名为 Instruments 的工具查找泄漏的指南。 [http://mobileorchard.com/find-iphone-memory-leaks-a-leaks-tool-tutorial/](http://mobileorchard.com/find-iphone-memory-leaks-a-leaks-tool-tutorial/)

如果您的应用程序的任何方面不会立即显而易见，请确保您为审阅者写“审阅笔记”。如果您需要登录才能使用该应用程序，请确保在评论说明中提供测试。考虑制作一个（私人？）YouTube 视频来展示应用程序的运行情况。

# android - Dalvik 应用程序（apk）加载器

> ID：12561653
> 
> 赞同：1
> 
> 时间：2012-09-24T08:52:16.673
> 
> 标签：android, dalvik

我想知道 Dalvik 源代码中的应用程序加载器在哪里。事实上，我准备修改Dalvik Machine的Byte-code验证流程，但我希望我的修改只针对应用程序（apk）加载过程进行更改。所以我需要知道应用程序加载器的条目才能添加我的修改。

# linux - BASH：“导出 k=1”与“k=1”之间的区别

> ID：12561654
> 
> 赞同：25
> 
> 时间：2012-09-24T08:52:25.863
> 
> 标签：linux, bash, shell

我要写一个脚本，看起来没有区别：

```
export k=1 
```

和

```
k=1 
```

我对吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-24T08:53:30.857

`export`使变量可用于子进程。

也就是说，如果您从脚本中生成一个新进程，则该变量`k`将不可用于该子进程，除非您使用`export`它。请注意，如果您在子流程中更改此变量，则该更改在父流程*中将不*可见。

有关更多详细信息，请参阅[本文档](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html)的第 3.2.3 节。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-24T09:01:31.640

我创建了一个简单的脚本来显示差异：

```
$ cat script.sh 
echo $answer 
```

让我们测试一下`export`

```
$ answer=42
$ ./script.sh 

$ . script.sh 
42 
```

仅当使用*相同*的进程执行脚本时才知道该值（即，相同的`bash`实例，使用`source`/ `.`）

现在，使用`export`：

```
$ export answer=42
$ ./script.sh 
42
$ . script.sh 
42 
```

该值是子进程已知的。

因此，如果您希望子进程知道变量的值，那么您应该使用`export`.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-24T10:04:58.340

每个进程，甚至在 Windows 上，都有一个称为*环境块*的内存块，其中包含*环境变量*。创建新进程时，默认情况下会将父进程的环境块复制到子进程，因此环境变量是一种将文本数据传递给子进程的简单方法。

The `export` command creates an environment variable, or converts an ordinary local variable into an environment variable. In the C-shell, one of its few redeeming features is that it uses a different syntax for environment variables (`setenv`) to local variables (`set`). Bourne shell derivatives, like Bash and Korn shell, hide all that.

Currently, only simple values can be passed, so items like arrays are not supported (it just exports the first element). Variable attributes, set using `define`, are also not exported unless the child process is a shell of the same type, i.e. another instance of bash. This also applies to exported functions, although it is possible to sometimes hack this between shells of different types (using `eval`).

在 Bash（和其他）中，有一个名为的 shell 设置`allexport`，这意味着所有变量都是环境变量——一般来说可能是个坏主意。您可以提供与 C 等语言不同的环境块 using `execve`，但在 shell 中您需要类似 的程序`env`，详情请参阅`man env`。

# jquery - 从另一个复选框触发的复选框事件

> ID：12561662
> 
> 赞同：2
> 
> 时间：2012-09-24T08:52:52.837
> 
> 标签：jquery, checkbox

我正在浪费时间尝试从另一个复选框（使用 jQuery）触发绑定操作

[http://jsfiddle.net/gasparirob/ZbMHQ/](http://jsfiddle.net/gasparirob/ZbMHQ/)

如您所见，如果我单击第一个复选框，则会触发警报（选中复选框时）。但是，如果我单击第二个复选框（也检查第一个复选框），则不会触发警报！

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:55:47.893

您需要手动调用它

```
$('#checkThis').change(function(){
    $("#target").prop("checked", $(this).is(':checked'))
                .change();
});

$('#target').change(function(){
    if ($(this).is(':checked')) {
        alert ('checked');
    }
});​ 
```

[http://jsfiddle.net/ZbMHQ/1/](http://jsfiddle.net/ZbMHQ/1/)

我还更改了您的代码以`.prop()`使其更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:55:33.460

因为您只检查您的 id 为“target”的复选框是否被选中，并且在您进行 laert 添加此复选框后，您的第二个复选框的工作方式类似于：

```
$('#checkThis').change(function(){
    if ($(this).is(':checked')) {
        alert ('checked');
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:55:45.893

在这种情况下，您可以在第一个复选框上手动触发更改事件：

```
$('#checkThis').change(function(){
    if($(this).is(':checked')){
        $("#target")
            .attr("checked","checked")
            .change();
    } else {
        $("#target")
            .attr("checked",false)
            .change();
    }
}); 
```

[固定小提琴](http://jsfiddle.net/ZbMHQ/4/)

# jquery - jqueryUI sortable：如何在拖动时强制更新占位符位置

> ID：12561671
> 
> 赞同：4
> 
> 时间：2012-09-24T08:53:17.177
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

当 jQueryUI 可排序列表处于拖动操作的中间时，有没有办法强制 jQuery 更新占位符的位置，即使用户只是水平移动鼠标？（jQuery 对垂直排序的命中测试似乎只在鼠标垂直移动时才有效。）

如果没有文档化的解决方案可用，无文档的或 hacky 的解决方案涉及到可排序、可拖动等的内部结构，可以作为最后的手段。

这里有更多信息：

如果您将一个项目拖到垂直 jQueryUI 可排序列表的右侧，除非您向上或向下移动鼠标，否则列表不会排序。一旦你向上或向下移动鼠标（甚至只是 1px！），列表就会突然排序。示例位于[http://jsfiddle.net/f3Lhg/](http://jsfiddle.net/f3Lhg/)并摘录如下。

这可能看起来像一个极端情况，但当连接的列表从一个列表横向拖动到另一个列表时，它实际上很常见。即使整个拖动不是完全水平的，前 30px-100px 也可能是，导致不可预测的拖动行为和糟糕的用户体验。即使连接列表出现更多问题，您也可以通过从列表中拖出并从侧面返回列表来轻松地使用单个列表进行重现。

问题不是特定于浏览器的。我测试过的所有浏览器的行为都是相同的。此外，添加`tolerance`选项并不能解决问题。

这是 jQueryUI 错误还是预期行为？是否有已知的解决方法？

顺便说一句，在我的应用程序中，我已将列表连接到右侧，因此我无法使用该`{axis:'y'}`选项，因为这将阻止拖动到连接列表。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.js"></script>
    <style type="text/css">
    .sortable { list-style-type: none; width: 400px; }
    .sortable li { margin: 5px 0; padding: 30px; border: 1px solid #999; }
    .sortable li.placeholder { margin: 0; height: 4px; border: 0; padding: 0; background-color: #800; }
    </style>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.sortable').sortable({
                placeholder: 'placeholder'
            }).disableSelection();
        });
    </script>
</head>
<body>
    <ul class="sortable">
        <li>Item #1</li>
        <li>Item #2</li>
        <li>Item #3</li>
        <li>Item #4</li>
        <li>Item #5</li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:10:14.863

查看 jQuery UI[源代码](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.sortable.js)，这似乎是预期的行为。

根据`axis`属性值的设置方式（或不设置），jQuery UI 将属性设置`floating`为布尔标志来跟踪您的容器是垂直列表还是水平列表（第 46 行）：

```
//Let's determine if the items are being displayed horizontally
this.floating = this.items.length ? o.axis === 'x' || (/left|right/).test(this.items[0].item.css('float')) || (/inline|table-cell/).test(this.items[0].item.css('display')) : false; 
```

此值用于确定 jQuery UI 在用户拖动元素时如何处理碰撞检测。

**具体来说：**

该方法`_intersectsWithSides`（第 492 行）使用该属性`floating`来确定您没有在水平列表中拖动，因此返回垂直碰撞结果。仅当同时存在*垂直拖动方向*和元素相交时，垂直碰撞检查才会返回 true：

```
if (this.floating && horizontalDirection) {
    return ((horizontalDirection == "right" && isOverRightHalf) || (horizontalDirection == "left" && !isOverRightHalf));
} else {
    return verticalDirection && ((verticalDirection == "down" && isOverBottomHalf) || (verticalDirection == "up" && !isOverBottomHalf));
} 
```

`verticalDirection` 可以通过从返回条件中删除要求来解决您的问题`_intersectsWithSides`（它也可能导致意外的错误行为）。

或者：

`_intersectsWithSides`如果存在垂直或水平拖动，您可以尝试编辑插件的方法以返回 true：

```
return (verticalDirection || horizontalDirection) && ((verticalDirection == "down" && isOverBottomHalf) || (verticalDirection == "up" && !isOverBottomHalf)) || ((horizontalDirection == "right" && isOverRightHalf) || (horizontalDirection == "left" && !isOverRightHalf)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:47:52.977

对不起，也许我在这里误读了一些东西。

您是说问题是，如果您抓住第一个列表项，将其一直拖到右侧，从列表中拖出，然后将其拖到项目#4，它不会选择相关的完成位置，直到您将光标移动到至少向上或向下 1px？

因为如果是这样，我真的不认为这是一个严重的可用性问题。我复制了上面描述的示例，它需要我非常小心才能完美地水平移动鼠标。

另外，我认为所有用户的本能都是拖动项目并垂直移动它们而不是水平移动。

# javafx-2 - JavaFX 2.x：在子窗格上扩展垂直线

> ID：12561673
> 
> 赞同：2
> 
> 时间：2012-09-24T08:53:20.717
> 
> 标签：javafx-2, bar-chart, linechart

此代码在下窗格中绘制 LineChart 上窗格和条形图。

还有一条用指针向左/向右 X 移动的垂直线。

我想将这条垂直线也延伸到下部子窗格，如附图

![在此处输入图像描述](../Images/542b8b88d582b7c7918bd5cbc84ab4dc.png)

如何做到这一点？

谢谢。

这是代码

```
import javafx.application.Application;
import javafx.application.Platform;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.geometry.Orientation;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.chart.*;
import javafx.scene.control.SplitPane;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Line;
import javafx.scene.shape.LineBuilder;
import javafx.stage.Stage;

public class XyChartInSplitOnlyCursor extends Application {
SplitPane               splitPane1 = null; 
BorderPane              pane1; 
BorderPane              pane2; 
Line                    LV;
XYChart.Series          series1 = new XYChart.Series(); 
XYChart.Series          series2 = new XYChart.Series(); 

@Override 
public void start(Stage stage) {      
stage.setTitle("Lines plot"); 

final NumberAxis xAxis = new NumberAxis(1, 12, 1); 
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005); 

xAxis.setAnimated(false);
xAxis.setScaleX(0);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

    @Override 
    public String toString(Number object) { 
        return String.format("%7.5f", object); 
    } 
}); 

final LineChart<Number, Number> lineChart1 = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart1.setCreateSymbols(false); 
lineChart1.setAlternativeRowFillVisible(false); 
lineChart1.setAnimated(false); 
lineChart1.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 
series1.getData().add(new XYChart.Data(11, 0.530123)); 
series1.getData().add(new XYChart.Data(12, 0.531035)); 

lineChart1.getData().addAll(series1);         

pane1 = new BorderPane(); 
pane1.setCenter(lineChart1); 

splitPane1 = new SplitPane();                                
splitPane1.setOrientation(Orientation.VERTICAL);
splitPane1.getItems().addAll(pane1);
splitPane1.setDividerPosition(0, 1);

final CategoryAxis xAxis2 = new CategoryAxis();
final NumberAxis   yAxis2 = new NumberAxis();

yAxis2.setTickUnit(1);
yAxis2.setPrefWidth(35);
yAxis2.setMinorTickCount(10);

yAxis2.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis2){
        @Override
        public String toString(Number object){
            String label;
            label = String.format("%7.2f", object.floatValue());
            return label;
        }
});

final BarChart<String, Number>BarChart = new BarChart<String, Number>(xAxis2, yAxis2);

BarChart.setAlternativeRowFillVisible(false);
BarChart.setLegendVisible(false);
BarChart.setAnimated(false);

XYChart.Series series2 = new XYChart.Series();

series2.getData().add(new XYChart.Data("Jan", 1));
series2.getData().add(new XYChart.Data("Feb", 3));
series2.getData().add(new XYChart.Data("Mar", 1.5));
series2.getData().add(new XYChart.Data("Apr", 3));
series2.getData().add(new XYChart.Data("May", 4.5));
series2.getData().add(new XYChart.Data("Jun", 5));
series2.getData().add(new XYChart.Data("Jul", 4));
series2.getData().add(new XYChart.Data("Aug", 8));
series2.getData().add(new XYChart.Data("Sep", 16.5));
series2.getData().add(new XYChart.Data("Oct", 13.9));
series2.getData().add(new XYChart.Data("Nov", 17));
series2.getData().add(new XYChart.Data("Dec", 20));

BarChart.getData().addAll(series2);

pane2 = new BorderPane(); 
pane2.setCenter(BarChart);

Platform.runLater(new Runnable() {
     @Override
     public void run() {
         double percSplit;

         splitPane1.getItems().addAll(pane2);

        ObservableList<SplitPane.Divider> splitDiv =  splitPane1.getDividers();

        percSplit = 1/(double)(splitDiv.size()+1);
        for (int i = 0; i< splitDiv.size(); i++) {                        
            splitPane1.setDividerPosition(i, percSplit);
            percSplit += 1/(double)(splitDiv.size()+1);
            }
     }
 });

Scene scene = new Scene(splitPane1, 800, 600); 
stage.setScene(scene);         

pane1.setOnMouseMoved(mouseHandler); 

LV=LineBuilder.create()
        .startX(0)
        .startY(0)
        .endX(10)
        .endY(.535)
        .strokeWidth(1)
        .stroke(Color.BLACK)
        .build();
pane1.getChildren().add(LV);

stage.show();
} 
EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) {
    if (mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) { 
        LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane1.getCenter(); 

        NumberAxis yAxis = (NumberAxis) lineChart.getYAxis(); 
        NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

        double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound(); 

        double xAxisShift = getSceneShift(xAxis);
        double yAxisShift = getSceneShift(yAxis);

        if(mouseEvent.getX()>xAxisShift && mouseEvent.getX()<xAxisShift+xAxis.getWidth()){

        LV.setStartX(mouseEvent.getX());
        LV.setStartY(yAxisShift);
        LV.setEndX(mouseEvent.getX());
        LV.setEndY(yAxisShift+yAxis.getHeight());
        }
    } 
}
}; 
private static double getSceneShift(Node node) { 
double shift = 0; 
do {  
    shift += node.getLayoutX();  
    node = node.getParent(); 
} while (node != null); 
return shift; 
}   
public static void main(String[] args) { 
launch(args);  
} 
} 
```

编辑：jewelsea修改后添加图片

![在此处输入图像描述](../Images/3e0c6004aa2ab28802cff1136f9c10de.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:31:17.210

不要将线添加到 SplitPane 中的窗格，而是创建一个组，将线分层在 SplitPane 上。

```
Scene scene = new Scene(new Group(splitPane1, line), 800, 600); 
```

如果您希望场景可调整大小，您可以使用 StackPane 而不是 Group 并将线条长度绑定到场景高度以使其填充场景。

这是使用 StackPane 和绑定以在可调整大小的场景中扩展线条的示例。请注意，与最初发布的代码类似，该代码被明确编码为仅当鼠标位于顶部图表的绘图区域内时才移动线条。

```
import javafx.application.Application;
import javafx.application.Platform;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.geometry.Orientation;
import javafx.scene.*;
import javafx.scene.chart.*;
import javafx.scene.control.SplitPane;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.Line;
import javafx.scene.shape.LineBuilder;
import javafx.stage.Stage;

public class XyChartInSplitOnlyCursor extends Application {
  SplitPane splitPane1 = null;
  BorderPane pane1;
  BorderPane pane2;
  Line LV1, LV2;
  XYChart.Series series1 = new XYChart.Series();
  XYChart.Series series2 = new XYChart.Series();

  @Override
  public void start(Stage stage) {
    stage.setTitle("Lines plot");

    final NumberAxis xAxis = new NumberAxis(1, 12, 1);
    final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005);

    xAxis.setAnimated(false);
    xAxis.setScaleX(0);
    yAxis.setAnimated(false);

    yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {
      @Override
      public String toString(Number object) {
        return String.format("%7.5f", object);
      }
    });

    final LineChart<Number, Number> lineChart1 = new LineChart<Number, Number>(xAxis, yAxis);

    lineChart1.setCreateSymbols(false);
    lineChart1.setAlternativeRowFillVisible(false);
    lineChart1.setAnimated(false);
    lineChart1.setLegendVisible(false);

    series1.getData().add(new XYChart.Data(1, 0.53185));
    series1.getData().add(new XYChart.Data(2, 0.532235));
    series1.getData().add(new XYChart.Data(3, 0.53234));
    series1.getData().add(new XYChart.Data(4, 0.538765));
    series1.getData().add(new XYChart.Data(5, 0.53442));
    series1.getData().add(new XYChart.Data(6, 0.534658));
    series1.getData().add(new XYChart.Data(7, 0.53023));
    series1.getData().add(new XYChart.Data(8, 0.53001));
    series1.getData().add(new XYChart.Data(9, 0.53589));
    series1.getData().add(new XYChart.Data(10, 0.53476));
    series1.getData().add(new XYChart.Data(11, 0.530123));
    series1.getData().add(new XYChart.Data(12, 0.531035));

    lineChart1.getData().addAll(series1);

    pane1 = new BorderPane();
    pane1.setCenter(lineChart1);

    splitPane1 = new SplitPane();
    splitPane1.setOrientation(Orientation.VERTICAL);
    splitPane1.getItems().addAll(pane1);
    splitPane1.setDividerPosition(0, 1);

    final CategoryAxis xAxis2 = new CategoryAxis();
    final NumberAxis yAxis2 = new NumberAxis();

    yAxis2.setTickUnit(1);
    yAxis2.setPrefWidth(35);
    yAxis2.setMinorTickCount(10);

    yAxis2.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis2) {
      @Override
      public String toString(Number object) {
        String label;
        label = String.format("%7.2f", object.floatValue());
        return label;
      }
    });

    final BarChart<String, Number> BarChart = new BarChart<String, Number>(xAxis2, yAxis2);

    BarChart.setAlternativeRowFillVisible(false);
    BarChart.setLegendVisible(false);
    BarChart.setAnimated(false);

    XYChart.Series series2 = new XYChart.Series();

    series2.getData().add(new XYChart.Data("Jan", 1));
    series2.getData().add(new XYChart.Data("Feb", 3));
    series2.getData().add(new XYChart.Data("Mar", 1.5));
    series2.getData().add(new XYChart.Data("Apr", 3));
    series2.getData().add(new XYChart.Data("May", 4.5));
    series2.getData().add(new XYChart.Data("Jun", 5));
    series2.getData().add(new XYChart.Data("Jul", 4));
    series2.getData().add(new XYChart.Data("Aug", 8));
    series2.getData().add(new XYChart.Data("Sep", 16.5));
    series2.getData().add(new XYChart.Data("Oct", 13.9));
    series2.getData().add(new XYChart.Data("Nov", 17));
    series2.getData().add(new XYChart.Data("Dec", 20));

    BarChart.getData().addAll(series2);

    pane2 = new BorderPane();
    pane2.setCenter(BarChart);

    Platform.runLater(new Runnable() {
      @Override
      public void run() {
        double percSplit;

        splitPane1.getItems().addAll(pane2);

        ObservableList<SplitPane.Divider> splitDiv = splitPane1.getDividers();

        percSplit = 1 / (double) (splitDiv.size() + 1);
        for (int i = 0; i < splitDiv.size(); i++) {
          splitPane1.setDividerPosition(i, percSplit);
          percSplit += 1 / (double) (splitDiv.size() + 1);
        }
      }
    });

    LV1 = LineBuilder.create()
            .strokeWidth(2)
            .stroke(Color.FORESTGREEN)
            .build();

    StackPane stack = new StackPane();
    Pane glassPane = new Pane();
    glassPane.getChildren().add(LV1);
    glassPane.minWidthProperty().bind(splitPane1.widthProperty());
    glassPane.minHeightProperty().bind(splitPane1.heightProperty());
    glassPane.setMouseTransparent(true);
    stack.getChildren().addAll(splitPane1, glassPane);
    Scene scene = new Scene(stack, 800, 600);
    LV1.endYProperty().bind(scene.heightProperty());
    stage.setScene(scene);
    pane1.setOnMouseMoved(mouseHandler);

    stage.show();
  }

  EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {
    @Override public void handle(MouseEvent mouseEvent) {
      XYChart<Number, Number> chart1 = (XYChart<Number, Number>) pane1.getCenter();
      plotLine(chart1, LV1, mouseEvent.getX() + 1);
    }
  };

  private void plotLine(XYChart<Number, Number> chart, Line line, double x) {
    Axis xAxis = chart.getXAxis(), yAxis = chart.getYAxis();
    final double min = getSceneShift(xAxis);
    final double max = min + xAxis.getWidth();
    boolean setCrosshair = false;
    if (x > min && x < min + xAxis.getWidth()) {
      LV1.setStartX(x); LV1.setEndX(x);
      setCrosshair = true;
    } else if (x <= min){
      LV1.setStartX(min); LV1.setEndX(min);
    } else if (x >= max){
      LV1.setStartX(max); LV1.setEndX(max);
    }
    if (setCrosshair) {
      chart.setCursor(Cursor.CROSSHAIR);
    } else {
      chart.setCursor(Cursor.DEFAULT);
    }
  }

  private static double getSceneShift(Node node) {
    double shift = 0;
    do {
      shift += node.getLayoutX();
      node = node.getParent();
    } while (node != null);
    return shift;
  }

  public static void main(String[] args) {
    launch(args);
  }
} 
```

![示例程序输出](../Images/f5f1d73019126bf4688ae1966cb5ef68.png)

# jquery - 使用 jQuery 动态添加 optgroups

> ID：12561680
> 
> 赞同：11
> 
> 时间：2012-09-24T08:53:44.480
> 
> 标签：jquery, list

```
<select id="myElement" multiple="multiple">
  <option value="1">Category Type</option>
  <option value="158">itemOne</option>
  <option value="157">itemTwo</option>
  <option value="7">My Type</option>
  <option value="20">itemThree</option>
  <option value="21">itemFour</option>
  <option value="22">itemFive</option>
  <option value="8">Category Yet Another</option>
  <option value="31">itemCheese</option>
  <option value="32">itemBrain</option>
</select> 
```

我需要动态转换它，以便“Category”选项（任何不以“item”开头的）是一个 optgroup，将 whaterver 包装在它之后直到下一个 Category 选项，所以上面的结果看起来像：

```
<select id="myElement" multiple="multiple">
  <optGroup label="Category Type">
    <option value="158">One</option>
    <option value="157">Two</option>
  </optGroup>
  <optGroup label="My Type">
    <option value="20">Three</option>
    <option value="21">Four</option>
    <option value="22">Five</option>
  </optGroup>
  <optGroup label="Category Yet Another">
    <option value="31">Cheese</option>
    <option value="32">Brain</option>
  </optGroup>
</select> 
```

我如何迭代它并更改值以使用 jQuery 实现所需的效果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T09:09:41.883

您必须遍历`option`元素并根据它们的内容对它们进行分组。使用 jQuery 比单纯的 DOM API 更容易：

[http://jsfiddle.net/kpykoahe/2/](http://jsfiddle.net/kpykoahe/2/)

```
$(document).ready(() => {
    const $cont = $('select');
    $('option').each((idx, el) => {
        const $el = $(el);
        if ($el.text().startsWith('item')) {
            $cont.find('optgroup').last().append($el);
            $el.text($el.text().substr(4));
        } else {
            $('<optgroup/>').attr('label', $el.text()).appendTo($cont);
            $el.remove();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T09:20:17.283

您可以使用[filter()](http://api.jquery.com/filter/)来匹配`<option>`将成为组的元素。然后，您可以遍历它们并在同一元素集上调用[nextUntil()](http://api.jquery.com/nextUntil/)`nextUntil()`以匹配后续选项（当遇到集合的成员时将停止，即应该成为组的下一个选项）。

从那里，您可以对这些元素使用[wrapAll()](http://api.jquery.com/wrapAll/)`<option>`来创建它们的元素，然后对刚刚成为组的元素`<optgroup>`调用[remove() 。](http://api.jquery.com/remove/)`<option>`就像是：

```
var $groups = $("#myElement option").filter(function() {
    return $(this).text().indexOf("item") != 0;
});
$groups.each(function() {
    var $this = $(this);
    $this.nextUntil($groups).wrapAll($("<optgroup>", {
        label: $this.text()
    })).end().remove();
}); 
```

[你可以在这个 fiddle](http://jsfiddle.net/df7KQ/)中看到结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T09:37:21.430

我的实现：

```
$(function(){
    var target = $('#target'),
        optGroup;

    function strStartsWith(str, prefix) {
        return str.indexOf(prefix) === 0;
    }

    $('#myElement').find('option').each(function(){
        var elm = $(this).clone();
        if(strStartsWith(elm.text(), 'item'))
        {
            elm.text(elm.text().substr(4));
            if(optGroup) optGroup.append(elm);
        }
        else
        {
            optGroup = $('<optgroup>').attr('label', elm.text());
            target.append(optGroup);
        }
    });
}); 
```

演示：http: [//jsfiddle.net/HUHRz/1/](http://jsfiddle.net/HUHRz/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-13T18:38:54.453

```
$.each(data, function () {

    if (prevGroupName.indexOf(this.Group.Name) == -1) {
        $prevGroup = $('<optgroup />').prop('label', this.Group.Name).appendTo('#ConfigurationId');
    } else {
        $prevGroup = $("optgroup[label='" + this.Group.Name + "']");
    }
    $("<option />").val(this.Value).text(this.Text).appendTo($prevGroup);
    prevGroupName.push(this.Group.Name);
}); 
```

# c# - 在程序 C# 中添加延迟

> ID：12561682
> 
> 赞同：2
> 
> 时间：2012-09-24T08:53:55.653
> 
> 标签：c#, windows-phone-7, delay

在我的`WP7`应用程序中，玩家画一条线，然后 CPU 画一条线。我希望 CPU 在处理和绘制线条之前等待 5 秒。我`System.Threading.Thread.Sleep(5000);`在玩家完成绘图后使用它。但是玩家的线没有完全画出，系统进入睡眠状态，5 秒后两条线都画好了。如何完成玩家的线路然后开始延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:03:52.287

System.Threading.Thread.Sleep(5000) 将冻结您的应用程序和 UI。因此，您的应用程序肯定不会通过认证。

使用 DispatcherTimer。点击此[链接](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=VS.95%29.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:08:52.160

您可以在玩家回合后立即使用 DispatcherTimer 添加一些延迟。

这通常是您可以执行的操作：

类变量：

```
DispatcherTimer delayTimer = new DispatcherTimer();
int timesTicked = 0; 
```

在您的构造函数中：

```
delayTimer.Interval = new TimeSpan(0, 0, 0, 0, 5000);
delayTimer.Tick += new EventHandler(timer_Tick); 
```

处理程序：

```
void delayTimer_Tick(object sender, EventArgs e)    
{
    timesTicked++;
    if(timesTicked == 2)
    {
      timesTicked = 0;
      delayTimer.Stop();
      RunCPU();
    }
} 
```

上面记录了 Timer 计时的次数，在两次计时后，它调用 RunCPU 方法。请注意，以上将 10 秒。你可以玩弄这些数字来找到延迟的利基。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-24T09:02:29.377

尝试使用 Application.DoEvents(); 睡觉前。

# php - 列出 Gearman 作业句柄

> ID：12561684
> 
> 赞同：7
> 
> 时间：2012-09-24T08:53:59.907
> 
> 标签：php, gearman

如何列出 Gearman 作业服务器上的所有作业句柄？我正在尝试提出一种监控方法，我可以在其中列出所有正在运行的线程，并轮询它们的状态。

列出具有“状态”和“工人”的正在运行的作业（如[http://gearman.org/index.php?id=protocol](http://gearman.org/index.php?id=protocol)中所述）列出了函数和工人，但没有作业句柄。需要作业句柄才能执行 GET_STATUS 等。

我正在尝试将作业提交与监控分离，因此没有在 JOB_CREATED 数据包中返回的作业句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:42:21.757

There are plenty of gearman managers out there,

[https://github.com/brianlmoon/GearmanManager](https://github.com/brianlmoon/GearmanManager) is a entire package for managing and viewing.

or [https://github.com/yugene/Gearman-Monitor](https://github.com/yugene/Gearman-Monitor)

Or the one I use to monitor [https://github.com/liorbk/php/blob/master/GearmanTelnet.php](https://github.com/liorbk/php/blob/master/GearmanTelnet.php)

# ruby-on-rails - 如何为一组模型记录急切加载关联

> ID：12561688
> 
> 赞同：19
> 
> 时间：2012-09-24T08:54:03.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一组 Rails 模型记录。是否可以一次性（查询）急切加载所有这些记录的关联？

有时我只有一个数组而不是 AR::Scope。有时我想动态选择稍后要加载的内容。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-12T09:52:35.613

在 Rails 3 中，可以使用[预](http://rubydoc.info/docs/rails/3.2.8/ActiveRecord/Associations/Preloader)加载器在现有记录上预先加载关联。

```
ActiveRecord::Associations::Preloader.new(posts,:comments).run() 
```

在 Rails 4.1+ 中，调用签名[略有变化](http://apidock.com/rails/v4.2.1/ActiveRecord/Associations/Preloader)：

```
ActiveRecord::Associations::Preloader.new.preload(posts,:comments) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:58:41.883

好吧，你可以重新找到那些对象。将 ':id' 映射到您的数组上，以获取记录的 id，然后重新查找，这次是急切加载。

`Post`如果您的模型记录数组是`posts`，那么它将是：

```
Post.find(posts.map &:id).includes(:blah) 
```

# performance - Vala中的高效守护进程

> ID：12561695
> 
> 赞同：5
> 
> 时间：2012-09-24T08:54:21.467
> 
> 标签：performance, daemon, vala

我想在 Vala 中创建一个守护程序，它每 X 秒只执行一次任务。我想知道哪个是最好的方法：

1.  Thread.usleep() 或 Posix.sleep()
2.  GLib.MainLoop + GLib.Timeout
3.  其他？

我不想让它在什么都不做的时候吃掉太多的资源。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T13:28:17.193

如果您将时间花在系统调用中，那么从性能角度来看不会有任何明显的差异。也就是说，使用 MainLoop 方法可能是有意义的，原因有两个：

1.  您将需要设置信号处理程序，以便您的守护程序在收到 SIGTERM 时可以立即死亡。如果你通过绑定via 来调用`quit`你的主循环，那可能是一段比检查睡眠是否成功更易读的代码。`SIGTERM``Posix.signal`

2.  如果您决定增加复杂性，MainLoop 将使其更直接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-21T19:26:03.967

您可以使用`GLib.Timeout.add_seconds`以下方式：

```
Timeout.add_seconds (5000, () => {
  /* Do what you want here */

  // Continue this "loop" every 5000 ms
  return Source.CONTINUE;

  // Or remove it
  return Source.REMOVE;
}, Priority.LOW); 
```

**注意**：超时设置为 Priority.LOW，因为它在后台运行，应该优先考虑其他任务。

# xpages - 我如何检查安装在 domino 服务器中的 dojo 版本？

> ID：12561700
> 
> 赞同：0
> 
> 时间：2012-09-24T08:54:47.910
> 
> 标签：xpages, lotus-domino

我如何检查安装在 domino 服务器中的 dojo 版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:20:52.613

可以通过调用以下命令获得默认的 dojo 版本：

```
com.ibm.xsp.context.DojoLibraryFactory.getDefaultLibrary().getVersion() 
```

如果您想查看可以在服务器上找到的所有版本，请尝试以下操作：

```
com.ibm.xsp.context.DojoLibraryFactory.getDojoLibraries() 
```

如果您想检查当前数据库使用的版本，那么您可以这样做：

```
com.ibm.commons.Platform.getInstance().getProperty("xsp.client.script.dojo.version") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T09:18:06.713

在 8.5.3 上安装了 Dojo 版本 1.5.1 和 1.6.1。问题是服务器提供的是哪个版本。

如果将此 CSJS 添加到 XPage，您将收到包含当前 dojo 版本的警报：

```
<xp:scriptBlock id="scriptBlockDojoVersion" value="dojo.addOnLoad( function(){ alert(dojo.version) } );" /> 
```

# cakephp - 在 CakePHP 中使用读取函数检索递归数据

> ID：12561707
> 
> 赞同：0
> 
> 时间：2012-09-24T08:55:08.640
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2

我有一个类似博客系统的东西。每个条目都可以有评论。每个评论都是由用户创建的。

我目前正在控制器上的“查看”操作中使用读取功能来检索所有数据。

模型之间的关系已经创建（belongTo、hasMany ...等）

当调用入口视图时，我得到如下信息：

```
['Entry'] => Array
    (
        [id] => 1
        [body] => 'xxxxxx'
        [...] => ...
    )

[Comment] => Array
    (
        [0] => Array
            (
                [id] => 1
                [user_id] => 1
                [body] => This is an example of a comment guys!
                [created] => 0000-00-00 00:00:00
            )

        [1] => Array
            (
                [id] => 2
                [user_id] => 1
                [body] => This is the 2nd comment!!!
                [created] => 0000-00-00 00:00:00
            )
    ) 
```

有没有办法通过读取功能来检索评论的“递归”数据，例如与 user_id 相关的用户数据？（为了得到他们的名字等）

我期待这样的事情：

```
['Entry'] => Array
    (
        [id] => 1
        [body] => xxxxxx
        [...] => ...
    )

[Comment] => Array
    (
        [0] => Array
            (
              [Comment] => Array
                   (
                      [id] => 1
                      [user_id] => 1
                      [body] => This is an example of a comment guys!
                      [created] => 0000-00-00 00:00:00  
                   )

              [User] => Array
                   (
                      [id] => 1
                      [username] => myusername
                      [created] => 0000-00-00 00:00:00  
                   )
            )

        [1] => Array
            (
              [Comment] => Array
                   (
                      [id] => 1
                      [user_id] => 2
                      [body] => fasdfasfaT
                      [created] => 0000-00-00 00:00:00  
                   )

              [User] => Array
                   (
                      [id] => 2
                      [username] => myusername2
                      [created] => 0000-00-00 00:00:00  
                   )
            )
    ) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:10:38.867

是的。

您可以通过属性控制关联的深度[`recursive`](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)，或者使用[`containable`](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)行为来准确指定要包含的模型。`AppModel.php`我总是为( `$actsAs = array('Containable');`)中的所有模型启用此行为。然后像这样使用它：

```
$this->Entry->find('all', array(
    ...
    'contain' => array('Comment' => 'User')
)); 
```

结果将如下所示：

```
['Entry'] => Array
(
    [id] => 1
    [body] => xxxxxx
    [...] => ...
)

[Comment] => Array
(
    [0] => Array
        (
          [id] => 1
          [user_id] => 1
          [body] => This is an example of a comment guys!
          [created] => 0000-00-00 00:00:00  
          [User] => Array
               (
                  [id] => 1
                  [username] => myusername
                  [created] => 0000-00-00 00:00:00  
               )
        )

) 
```

以我的经验，Cake 查询深度关联的效率不是很高。在您的情况下，它将为每个生成一个查询`Comment`以获取其`User`. 我会通过让 Cake 只获取评论来避免它，然后提取评论的用户 ID，在一个查询中获取所有具有这些 ID 的用户，然后将该用户信息添加到原始结果中。

# javascript - 无法让代码工作

> ID：12561708
> 
> 赞同：-12
> 
> 时间：2012-09-24T08:55:14.460
> 
> 标签：javascript, jquery

我正在尝试自己改编我在网上找到的一个简单的 jQuery 射击游戏。问题是 IU 无法让它工作，也不知道为什么。我知道这个问题含糊不清，但由于我不知道问题的重点，所以我不能再提问题了。有人可以帮我让它工作吗...

[http://jsfiddle.net/smilburn/SKB3Q/2/](http://jsfiddle.net/smilburn/SKB3Q/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:58:17.060

在您的 jsfiddle 中，您在左侧的下拉框中使用 Mootools 而不是 jQuery，这至少是您的问题的一部分。

**更新：**从 jsFiddle （选择框架）的左窗格中选择`jquery`and后，[它在这里工作](http://jsfiddle.net/SKB3Q/5/)。`ui`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:58:28.923

在您的 jsfiddle 中，您选择了 Mootools 1.4.5 作为 JS 库 - 如果您将其更改为 jQuery 1.8.2，它似乎可以正常工作。

# gcc - 如何使用“armcc”编译器来跟踪函数调用？

> ID：12561709
> 
> 赞同：1
> 
> 时间：2012-09-24T08:55:14.300
> 
> 标签：gcc, arm, trace, armcc

我以前用**gcc** `-fdump-rtl-expand`做`-finstrument-functions`函数调用跟踪，**armcc**有这种类似的功能吗？

对于**gcc**，我使用：

```
CFLAGS += -finstrument-functions -fdump-rtl-expand 
```

**armcc**是否有类似的编译器选项？我尝试了相同的方法，但似乎它们不起作用：

```
$ armcc -finstrument-functions test.c
Fatal error: C3900U: Unrecognized option '-finstrument-functions'.
$ armcc -fdump-rtl-expand test.c
Fatal error: C3900U: Unrecognized option '-fdump-rtl-expand'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:49:58.133

似乎允许`gcc`样式检测的选项`armcc`是不同的。

这是 ARM 编译器工具链的摘录*：编译器参考*（如果您在他们的网站上“注册”，您可以访问[http://infocenter.arm.com上的参考）：](http://infocenter.arm.com)

> `--gnu_instrument, --no_gnu_instrument`
> 
> 此选项插入 GCC 样式的检测调用以分析函数的进入和退出。
> 
> **用法**
> 
> 在函数进入之后和函数退出之前，使用当前函数的地址及其调用点调用以下分析函数：
> 
> void __cyg_profile_func_enter(void *current_func, void *callsite);
> 
> void __cyg_profile_func_exit(void *current_func, void *callsite);
> 
> **限制**
> 
> 您必须提供 __cyg_profile_func_enter() 和 __cyg_profile_func_exit() 的定义。
> 
> 有必要明确标记`__cyg_profile_func_enter()`和 `__cyg_profile_func_exit()`with `__attribute__((no_instrument_function))`。
> 
> **也可以看看**
> 
> `__attribute__((no_instrument_function))`功能属性。

至于`-fdump-rtl-expand`选项：我不知道（也不认为）在`armcc`内部使用 RTL。所以我认为从*扩展*通道获取日志在这里没有任何意义。

# redirect - 在不可见的 iframe 中显示链接目标？

> ID：12561715
> 
> 赞同：0
> 
> 时间：2012-09-24T08:55:39.863
> 
> 标签：redirect, iframe

我有一个链接，它看起来像这样：

```
<a href="someplace.html" target="shop">link text</a> 
```

目标（商店）是一个名为*shop*的 iframe 。仅当包含 iframe 的页面已加载时，单击链接并在 iframe 中显示 someplace.html 才有效。

所以我的问题是，即使没有加载包含 iframe 的页面，我怎样才能让它工作？我尝试通过在使用其 onclick 单击链接时重定向到它来加载带有 iframe 的页面，这很有效，但之后我仍然必须加载 someplace.html，这就是我被卡住的地方。

任何想法如何解决这个问题？我可以使用 jQuery 或纯 JavaScript ......没关系。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:38:09.633

如果您有与目标“shop”的链接，则必须有一个名为“shop”的 iframe。如果没有初始内容，则可以加载带有空白页面的 iframe。

# google-chrome - 在 chrome 中滚动时，dojox.grid.DataGrid 的滚动到达顶部

> ID：12561722
> 
> 赞同：1
> 
> 时间：2012-09-24T08:56:05.300
> 
> 标签：google-chrome, dojox.grid.datagrid

我有一个 dojox.grid.DataGrid。在这个问题是当我用鼠标滚轮在网格中向下滚动然后它再次加载网格中的数据并且滚动再次到达顶部。这是我的代码：

target_value = this.store.getValue(l_cell, "target_value"); selected_row_data.target_type = this.store.getValue(l_cell, "target_type"); selected_row_data.created_by = this.store.getValue(l_cell, "created_by"); selected_row_data.roll_up = this.store.getValue(l_cell, "roll_up"); selected_row_data.equip_id = this.store.getValue(l_cell, "equip_id"); selected_row_data.equip_name = this.store.getValue(l_cell, "equip_name"); selected_row_data.meter_list = this.store.getValue(l_cell, "mater_list"); } radio_clicked_flag=false；}} ,dojo.byId("grid5"));

避免/消除此问题的最佳方法是什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:11:07.127

有同样的问题！这是一个解决方法：

你必须初始化网格

> **自动高度：真**

然后滚动应该可以正常工作！

> new dojox.grid.DataGrid({id:'grid_spark', store: store,..., **autoHeight:true** ,...

**但请注意：**这将渲染每一行并将其保存在内存中。这就是加载时间更长的原因，尤其是当您有很多行时。

卢西安

# opengl - OpenGL：渲染树形菜单的策略是什么？

> ID：12561726
> 
> 赞同：0
> 
> 时间：2012-09-24T08:56:21.827
> 
> 标签：opengl, treeview, bufferedimage

因此，我们需要实现的是一个具有多个节点（最多数百个）的树形菜单。一个节点可以有子节点，然后可以展开/折叠。还有一个鼠标悬停的背景闪电和鼠标选择的背景闪电。每个节点都有一个框、一个图标和一个文本，可以很大，占据整个屏幕宽度。

这是一个已经工作的解决方案的示例：

![在此处输入图像描述](../Images/cc9c49b20bb95d440613c74d34069e16.png)

基本上我是：

*   第一次渲染文本，只是为了获得可能的背景突出显示的长度

*   渲染框和图标纹理（是的，我知道，它们现在是颠倒的）

*   第二次渲染文本，首先是粗体，然后是正常的

该解决方案实际上具有相对可接受的性能影响。

然后我们尝试了另一种方法，即使用*g* Graphic java 通过绘制树形菜单并将其作为 bufferedImage 返回以在最后创建一个大纹理渲染它。所有这些显然都是在每个节点折叠/展开以及每次鼠标移动时完成的。

这表现得更好，*但*Java 似乎在处理旧的 bufferedImages 时遇到了一些大麻烦。事实上，内存消耗不断增加，强制垃圾收集通过减慢它只会略微增加内存，但仍然......此外，性能下降，因为每次都调用垃圾收集器并且看起来一点也不轻。

所以我要问你的是：哪种策略最能满足我的需求？

在不同的纹理上渲染每个节点也可能是可行的（实际上是三个：一个正常，一个具有用于鼠标悬停的浅色背景，最后一个具有用于鼠标选择的正常背景），然后在每个 display() 处将所有这些纹理与当前树菜单状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:14:52.050

对于 Java 方法：如果 BufferedImage 的大小没有改变（树控件的宽度/高度），你不能重用它来避免垃圾收集吗？

对于 GL 方法，请确保最小化纹理开关。你如何渲染文本？您可以拥有一个包含所有普通和粗体字母的大纹理，并且为每个字母使用不同的纹理坐标。

# mongodb - grails spring-security 创建用户

> ID：12561728
> 
> 赞同：0
> 
> 时间：2012-09-24T08:56:27.670
> 
> 标签：mongodb, grails, groovy, spring-security

我从我的一个控制器创建新用户时遇到了一些问题。我正在尝试像这样将新用户添加到我的 MongoDB 用户集合中。权限被定义为域中的一组角色。

```
Role role = new Role(authority:"ROLE_USER")
User user = new User(username:params.username,email:params.email,password:params.password,enabled:params.enabled,
            accountExpired:params.accountExpired,accountLocked:params.accountLocked,passwordExpired:params.passwordExpired,
            authorities:[role])

if (user.validate()) {
        user.save(flush:true)
      } else {
        user.errors.allErrors.each { println it }
      } 
```

完全相同的代码能够从引导程序成功创建用户，但是当我尝试从一个简单的控制器做同样的事情时，我收到了这个错误：

```
2012-09-24 10:43:27,450 [http-8080-3] ERROR binding.GrailsDataBinder  - Unable to auto-create type interface java.util.Set, class java.lang.InstantiationException thrown in constructor 
```

一个：662）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:04:56.053

看起来问题出在数据绑定上。您必须先创建具有权限的用户，然后使用 UserRole 域添加角色。就像是：

```
Role role = Role.findByAuthority("ROLE_USER")
User user = new User(username:params.username,email:params.email,password:params.password,enabled:params.enabled,     accountExpired:params.accountExpired,accountLocked:params.accountLocked,passwordExpired:params.passwordExpired)
new UserRole(user: user, role: role).save(flush: flush, insert: true)
user.save(flush:true) 
```

有关如何使用 Spring Security 创建用户的更多信息，您可能需要查看[Spring Security UI](http://grails.org/plugin/spring-security-ui)

# websphere - Websphere 集群：我应该使用节点还是服务器？

> ID：12561732
> 
> 赞同：2
> 
> 时间：2012-09-24T08:56:42.873
> 
> 标签：websphere, websphere-7

我正在尝试配置我的第一个 WAS 集群。可用选项的数量让我有点不知所措：特别是我可以选择从现有节点添加成员（这似乎是默认选项）或从现有应用程序服务器添加成员。
来自 Weblogic 背景，我已经开始添加新服务器，所以我想用可用的应用程序服务器创建一个集群。另一方面，默认选项似乎是从现有节点添加的（IBM RedBook 显示了这种方法）。
**如果我使用 Nodes 创建集群有什么好处**吗？以及如何使用配置文件管理器添加新节点？
非常感谢麦克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:41:16.823

节点和配置文件是一回事。每次创建新配置文件时，您都在创建一个新节点。

节点是服务器的集合。

集群成员可以在同一个节点中（在这种情况下，您称之为垂直集群）。

跨越物理机的不同节点的集群成员称为水平集群。

对于您的产品盒，您可能会同时使用垂直和水平来利用服务器的计算能力。

高温高压

# mysql - MySQL：如何多次加入同一张表？

> ID：12561733
> 
> 赞同：46
> 
> 时间：2012-09-24T08:56:48.660
> 
> 标签：mysql, sql, group-by, left-join

我有两张桌子`ticket`和`attr`. 表`ticket`有`ticked_id`字段和其他几个字段。表`attr`有 3 个字段：

```
ticket_id - numeric
attr_type - numeric
attr_val - string 
```

`attr_type`是值的固定枚举。例如，它可以`1`是`2`或`3`。

我需要进行查询，其结果将是 4 列：

`ticket_id`,`attr_val`对于`attr_type=1`,`attr_val`对于`attr_type=2`,`attr_val`对于`attr_type=3`

如果表中没有对应的值，则应`attr_type`在`attr`对应列中显示 NULL 值。

例子：

```
ticket
    ticket_id: 1

    ticket_id: 2

    ticket_id: 3

attr
    ticket_id: 1
    attr_type: 1
    attr_val: Foo

    ticket_id: 1
    attr_type: 2
    attr_val: Bar

    ticket_id: 1
    attr_type: 3
    attr_val: Egg

    ticket_id: 2
    attr_type: 2
    attr_val: Spam 
```

结果应该是：

```
ticked_id: 1
attr_val1: Foo
attr_val2: Bar
attr_val3: Egg

ticked_id: 2
attr_val1: NULL
attr_val2: Spam
attr_val3: NULL

ticked_id: 3
attr_val1: NULL
attr_val2: NULL
attr_val3: NULL 
```

我尝试了`attr`3 次左连接表，但无法弄清楚如何安排输出`attr_type`

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-24T09:15:44.293

您需要使用多个`LEFT JOINs`：

```
SELECT 
    ticket.ticket_id,  
    a1.attr_val AS attr_val1,
    a2.attr_val AS attr_val2,
    a3.attr_val AS attr_val3
FROM ticket
    LEFT JOIN attr a1 ON ticket.ticket_id=a1.ticket_id AND a1.attr_type=1
    LEFT JOIN attr a2 ON ticket.ticket_id=a2.ticket_id AND a2.attr_type=2
    LEFT JOIN attr a3 ON ticket.ticket_id=a3.ticket_id AND a3.attr_type=3 
```

这是一个示例：[SQL Fiddle](http://www.sqlfiddle.com/#!2/34421/3)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T09:23:56.810

虽然您可以使用别名左连接，但在这种情况下，您还可以使用分组和条件表达式的组合：

```
select t.ticket_id,
       max(case when a.attr_type=1 then a.attr_val end) attr_val1,
       max(case when a.attr_type=2 then a.attr_val end) attr_val2,
       max(case when a.attr_type=3 then a.attr_val end) attr_val3
from ticket t
left join attr a on t.ticket_id = a.ticket_id
group by t.ticket_id 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-24T08:58:51.013

您使用表别名

例如：

```
Select 
    ticket.ticket_id,  
    a1.attr_val as attr_val1,
    a2.attr_val as attr_val2,
    a3.attr_val as attr_val3
from ticket
    left join (select * from attr where attr_type=1) a1 on ticket.ticket_id=a1.ticket_id
    left join (select * from attr where attr_type=2) a2 on ticket.ticket_id=a2.ticket_id
    left join (select * from attr where attr_type=3) a3 on ticket.ticket_id=a3.ticket_id 
```

# javascript - javascript TypeError: document.getElementsByTagName("p")[0].innerHtml 不是函数

> ID：12561734
> 
> 赞同：14
> 
> 时间：2012-09-24T08:57:05.907
> 
> 标签：javascript, typeerror, getelementsbytagname

对于下面的简单函数，我收到以下错误：

```
TypeError: document.getElementsByTagName("p")[0].innerHtml is not a function 
```

我只是想了解 getElementsByTagName 的用法。

```
function myFunc(){
document.getElementsByTagName("p")[0].innerHtml("hello my name is vaani");
}
</script>
</head>

<body onload="myFunc();">
<p></p>
<p></p>
<p></p>
</body> 
```

有人可以告诉我我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-24T08:58:29.983

`innerHTML`但不是`innerHtml`，而且它不是函数，您应该将字符串设置为此属性。

```
document.getElementsByTagName("p")[0].innerHTML = "hello my name is vaani"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:59:26.287

采用

```
document.getElementsByTagName("p")[0].innerHTML="hello my name is vaani"; 
```

# ios - Unwind segues 有什么用，你如何使用它们？

> ID：12561735
> 
> 赞同：601
> 
> 时间：2012-09-24T08:57:08.877
> 
> 标签：ios, ios6, uistoryboard

iOS 6 和 Xcode 4.5 有一个称为“Unwind Segue”的新功能：

> 展开转场可以允许过渡到情节提要中的现有场景实例

除了 Xcode 4.5 发行说明中的​​这个简短条目之外，UIViewController 现在似乎有几个新方法：

```
- (BOOL)canPerformUnwindSegueAction:(SEL)action fromViewController:(UIViewController *)fromViewController withSender:(id)sender
- (UIViewController *)viewControllerForUnwindSegueAction:(SEL)action fromViewController:(UIViewController *)fromViewController withSender:(id)sender
- (UIStoryboardSegue *)segueForUnwindingToViewController:(UIViewController *)toViewController fromViewController:(UIViewController *)fromViewController identifier:(NSString *)identifier 
```

unwind segues 是如何工作的，它们可以用来做什么？

* * *

## 回答 #1

> 赞同：1285
> 
> 时间：2013-04-05T16:49:38.447

# 简而言之

**展开 segue**（有时称为**exit segue** ）可用于通过 push、modal 或 popover segue 向后导航（就像您从导航栏中弹出导航项、关闭弹出框或关闭模态呈现的视图控制器一样）。最重要的是，您实际上不仅可以通过一个，而且可以通过一系列推送/模态/弹出框来展开，例如，通过单个展开动作“返回”导航层次结构中的多个步骤。

当你执行一个 unwind segue 时，你需要指定一个 action，它是你想要 unwind 到的 view controller 的一个 action 方法。

*目标-C：*

```
- (IBAction)unwindToThisViewController:(UIStoryboardSegue *)unwindSegue
{
} 
```

*迅速：*

```
@IBAction func unwindToThisViewController(segue: UIStoryboardSegue) {
} 
```

当您在情节提要中创建展开转场时，将使用此操作方法的名称。此外，此方法在执行 unwind segue 之前调用。您可以从传递的`UIStoryboardSegue`参数中获取源视图控制器，以与启动 segue 的视图控制器进行交互（例如，获取模态视图控制器的属性值）。在这方面，该方法具有与 的`prepareForSegue:`方法类似的功能`UIViewController`。

**iOS 8 更新：** Unwind segues 也适用于 iOS 8 的自适应 segues，例如*Show*和*Show Detail*。

# 一个例子

让我们有一个带有导航控制器和三个子视图控制器的故事板：

![在此处输入图像描述](../Images/c77b048a75555cbca453201d1523c309.png)

从绿色视图控制器，您可以展开（导航返回）到红色视图控制器。从蓝色您可以放松到绿色或通过绿色到红色。要启用展开，您必须将特殊的操作方法添加到 Red 和 Green，例如，这里是 Red 中的操作方法：

*目标-C：*

```
@implementation RedViewController

- (IBAction)unwindToRed:(UIStoryboardSegue *)unwindSegue
{
}

@end 
```

*迅速：*

```
@IBAction func unwindToRed(segue: UIStoryboardSegue) {
} 
```

添加操作方法后，您可以通过控制拖动到退出图标来定义情节提要中的展开转场。在这里，我们想在按下按钮时从绿色放松到红色：

![在此处输入图像描述](../Images/d24cf13bac9fa445f1b1cd8f8608791f.png)

您必须选择要展开的视图控制器中定义的操作：

![在此处输入图像描述](../Images/35c74b8102fad213b43a6c033b15c384.png)

您还可以从蓝色放松到红色（在导航堆栈中“两步之遥”）。关键是选择正确的展开动作。

在执行 unwind segue 之前，会调用 action 方法。在示例中，我定义了从 Green 和 Blue 到 Red 的 unwind segue。我们可以通过 UIStoryboardSegue 参数在 action 方法中访问 unwind 的来源：

*目标-C：*

```
- (IBAction)unwindToRed:(UIStoryboardSegue *)unwindSegue
{
    UIViewController* sourceViewController = unwindSegue.sourceViewController;

    if ([sourceViewController isKindOfClass:[BlueViewController class]])
    {
        NSLog(@"Coming from BLUE!");
    }
    else if ([sourceViewController isKindOfClass:[GreenViewController class]])
    {
        NSLog(@"Coming from GREEN!");
    }
} 
```

*迅速：*

```
@IBAction func unwindToRed(unwindSegue: UIStoryboardSegue) {
    if let blueViewController = unwindSegue.sourceViewController as? BlueViewController {
        println("Coming from BLUE")
    }
    else if let redViewController = unwindSegue.sourceViewController as? RedViewController {
        println("Coming from RED")
    }
} 
```

展开也可以通过推/模态segues的组合来工作。例如，如果我添加另一个带有模态 segue 的 Yellow 视图控制器，我们可以一步从 Yellow 一直放松到 Red：

![在此处输入图像描述](../Images/68754a743e56b9f1cb20da82bd6f9fc1.png)

# 从代码中解脱出来

当您通过控制拖动某些东西到视图控制器的退出符号来定义展开转场时，文档大纲中会出现一个新的转场：

![在此处输入图像描述](../Images/3104b8d7468a46f42112550d42a13f5c.png)

选择 segue 并转到 Attributes Inspector 会显示“Identifier”属性。使用它为您的 segue 提供唯一标识符：

![在此处输入图像描述](../Images/db625aae4fb194a367ace076e2cfd80e.png)

在此之后，可以像任何其他 segue 一样从代码中执行展开 segue：

*目标-C：*

```
[self performSegueWithIdentifier:@"UnwindToRedSegueID" sender:self]; 
```

*迅速：*

```
performSegueWithIdentifier("UnwindToRedSegueID", sender: self) 
```

* * *

## 回答 #2

> 赞同：169
> 
> 时间：2012-10-11T16:07:15.893

至于如何在 StoryBoard 中使用 unwind segues ......

**第1步）**

转到您希望**展开**的视图控制器的代码并添加以下代码：

*Objective-C*

```
- (IBAction)unwindToViewControllerNameHere:(UIStoryboardSegue *)segue {
    //nothing goes here
} 
```

*请务必在 Obj-C 中的 .h 文件中声明此方法*

*迅速*

```
@IBAction func unwindToViewControllerNameHere(segue: UIStoryboardSegue) {
    //nothing goes here
} 
```

**第2步）**

在情节提要中，转到您要从中放松的视图，然后只需将一个 segue 从您的按钮或其他任何东西拖到源视图右上角的橙色小“退出”图标。

[![在此处输入图像描述](../Images/ec357dc83f748008c89a46a32b3ef18f.png)](https://i.stack.imgur.com/hro2c.png)

现在应该有一个连接到“-unwindToViewControllerNameHere”的选项

就是这样，当您的按钮被点击时，您的 segue 将展开。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-10-02T12:43:40.513

展开转场用于“返回”到某个视图控制器，通过许多转场，您可以到达“当前”视图控制器。

`MyNavController`想象一下，你有一些 a`A`作为它的根视图控制器。现在你使用 push segue 到`B`. 现在导航控制器的`viewControllers`数组中有 A 和 B，并且 B 是可见的。现在您`C`以模态方式呈现。

使用展开转场，您现在可以从`C`to展开“返回” `B`（即解除模态呈现的视图控制器），基本上“撤消”模态转场。您甚至可以一直回到根视图控制器`A`，撤消模态转场和推送转场。

Unwind segues 可以很容易地回溯。例如，在 iOS 6 之前，关闭呈现的视图控制器的最佳实践是将呈现的视图控制器[设置为呈现的视图控制器的委托，然后调用您的自定义委托方法，然后关闭呈现的视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)。听起来繁琐复杂？它是。这就是为什么 unwind segues 很好的原因。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2015-12-15T19:33:59.063

我在这里的其他答案中没有提到的一点是，当您不知道最初的转场起源于何处时，您如何处理展开，这对我来说是一个更重要的用例。例如，假设您有一个帮助视图控制器（**H**），您从两个不同的视图控制器（**A**和**B**）模态显示：

**A** → **H**
**B** → **H**

你如何设置 unwind segue 以便回到正确的视图控制器？答案是您在**A**和**B中声明了一个** *具有相同名称*的展开操作，例如：

```
// put in AViewController.swift and BViewController.swift
@IBAction func unwindFromHelp(sender: UIStoryboardSegue) {
    // empty
} 
```

这样，展开将找到启动 segue 的任何视图控制器（**A**或**B**）并返回到它。

换句话说，将 unwind 动作视为描述 segue 来自*哪里*，而不是它要去哪里。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-11-21T13:39:44.653

斯威夫特iOS：

第 1 步：将此方法定义到您的 MASTER 控制器视图中。你想回去的地方：

```
//pragma mark - Unwind Seques
@IBAction func goToSideMenu(segue: UIStoryboardSegue) {

    println("Called goToSideMenu: unwind action")

} 
```

第 2 步：（故事板）右键单击您的 SLAVE/CHILD EXIT 按钮并选择“goToSideMenu”作为连接您的操作按钮，您将单击该按钮返回您的主控制器视图：

![在此处输入图像描述](../Images/8acac0c28b5cc5d31a0a7df2e403c5c5.png) 第 3 步：构建并运行...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-22T14:08:20.150

例如，如果您从 viewControllerB 导航到 viewControllerA，那么在您的 viewControllerA 下面的委托将调用并共享数据。

```
@IBAction func unWindSeague (_ sender : UIStoryboardSegue) {
        if sender.source is ViewControllerB  {
            if let _ = sender.source as? ViewControllerB {
                self.textLabel.text = "Came from B = B->A , B exited"
            }

        }

} 
```

*   Unwind Seague Source View Controller（您需要将Exit Button连接到VC的退出图标并将其连接到unwindseague：

[![在此处输入图像描述](../Images/0eb7f9140a753ee68d656a7c524d297e.png)](https://i.stack.imgur.com/nMQr8.png)

*   Unwind Seague 已完成 -> viewControllerA 的 TextLabel 已更改。

[![在此处输入图像描述](../Images/1a41c7333e76d3842b0911df29b719e8.png)](https://i.stack.imgur.com/k159T.png)

# magento - magento 1.6 导入产品 .csv 文件，结果不显示图像

> ID：12561739
> 
> 赞同：0
> 
> 时间：2012-09-24T08:57:24.307
> 
> 标签：magento, csv, import, magento-1.6

我正在将 magento 1.3 产品导入 magento 1.6。我已经更改了所有列，以便在 magento 1.6 中可以正常使用。我已经在 magento 1.6 中导入了 8000 个产品，并将所有图像放在“媒体/导入”中（我还将权限设置为 777）。

当我查看“目录管理产品”并查找图像时，没有。我还在“catalog_product_entity_media_gallery”表中查看了数据库，但它是空的。

谁能帮我处理我的案子？

这是我的 .csv 标题。

```
_store
_product_websites
_attribute_set
_type
sku
_category
has_options
price
cost
name
image
small_image
url_key
thumbnail
url_path
image_label
small_image_label
thumbnail_label
description
short_description
internal_notes
productinfo
enable_googlecheckout
visibility
tax_class_id
status
qty
min_qty
use_config_min_qty
is_qty_decimal
backorders
use_config_backorders
min_sale_qty
use_config_min_sale_qty
max_sale_qty
use_config_max_sale_qty
is_in_stock
notify_stock_qty
use_config_notify_stock_qty
manage_stock
use_config_manage_stock
stock_status_changed_auto
serial_number
manufacturer2
qty_loc1
qty_loc2
qty_loc3
loc1
loc2
special_price
special_from_date
special_to_date
loc3
weight
meta_title
meta_description
gift_message_available
custom_design
options_container
page_layout
meta_keyword
in_depth
dimension
hardrive
memory
custom_layout_update
computer_manufacturers
color
manufacturer
news_from_date
news_to_date 
```

然后我试试这个。

```
sku
_store
_attribute_set
_type
_category
_product_websites
activation_information
bss_weight
color
computer_manufacturers
contrast_ratio
cost
country_of_manufacture
cpu_speed
created_at
custom_design
custom_design_from
custom_design_to
custom_layout_update
description
dimension
enable_googlecheckout
finish
gallery
gender
gift_message_available
harddrive_speed
hardrive
has_options
image
image_label
internal_notes
in_depth
loc1
loc2
loc3
location1
location2
location3
manufacturer
manufacturer2
max_resolution
media_gallery
meta_description
meta_keyword
meta_title
minimal_price
msrp
msrp_display_actual_price_type
msrp_enabled
name
news_from_date
news_to_date
options_container
page_layout
price
productinfo
qty_loc1
qty_loc2
qty_loc3
ram_size
required_options
response_time
room
serial_number
shape
short_description
small_image
small_image_label
special_from_date
special_price
special_to_date
status
tax_class_id
thumbnail
thumbnail_label
updated_at
url_key
url_path
visibility
weight
qty
min_qty
use_config_min_qty
is_qty_decimal
backorders
use_config_backorders
min_sale_qty
use_config_min_sale_qty
max_sale_qty
use_config_max_sale_qty
is_in_stock
notify_stock_qty
use_config_notify_stock_qty
manage_stock
use_config_manage_stock
stock_status_changed_auto
use_config_qty_increments
qty_increments
use_config_enable_qty_inc
enable_qty_increments
_links_related_sku
_links_related_position
_links_crosssell_sku
_links_crosssell_position
_links_upsell_sku
_links_upsell_position
_associated_sku
_associated_default_qty
_associated_position
_tier_price_website
_tier_price_customer_group
_tier_price_qty
_tier_price_price
_media_attribute_id
_media_image
_media_lable
_media_position
_media_is_disabled 
```

但仍然没有产品图片。

这是我的 .csv 文件截图。 ![在此处输入图像描述](../Images/5e04581c539aa7b5c2995a2533b9ff48.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:47:59.910

这是老敌人——这里没有什么新鲜事。

只需在电子表格中的每个图像条目之前放置一个“./”即可。以这种方式它应该工作。

如果 './' 不起作用，也可以尝试使用斜线。

你没有说你是如何导入的，你在 Magmi 上吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T04:37:36.380

试用 eMagicOne 的 Store Manager，使用它导入更简单，并且有免费试用版。您只需将图像的名称或 URL 放入 csv 文件和 sku 中以进行识别。列名等没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T10:30:46.277

图片 small_image 缩略图 /import/6747.jpg /import/6747.jpg /import/6747.jpg

在导入文件夹中插入所有图像，并在该导入文件之后将 0777 权限分配给媒体/导入、媒体/目录、媒体/产品或媒体/tmp，并在检查后完成清除缓存或重新索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:07:57.153

当您从导入/导出导入时，将图像放在 media/import/ 文件夹中，并将相对路径放在 excel 表 /{图像名称}

例如，我已将图片上传到 media/import/att/

像这样的excel表。

```
image   small_image thumbnail
/att/6747.jpg   /att/6747.jpg   /att/6747.jpg
/att/6748.jpg   /att/6748.jpg   /att/6748.jpg
/att/7962.jpg   /att/7962.jpg   /att/7962.jpg 
```

# asp.net-mvc-4 - 如何在表单中上传图片

> ID：12561745
> 
> 赞同：1
> 
> 时间：2012-09-24T08:57:42.553
> 
> 标签：asp.net-mvc-4

我有一个添加联系人的表单，在该表单中我想上传联系人的图像及其其他信息，如姓名、地址、公司名称等。那么如何添加该图像并将图像信息存储到数据库中。这是我的 html 表单，据此控制器将是什么。

```
@using (Html.BeginForm("", "", FormMethod.Post, new { id = "saveContact", enctype = "multipart/form-data" }))
{
<div class="rowElem noborder">
                <label>
                    First name :</label><div class="formRight"><input type="text" id="firstName" name="firstName" value ="@Model.FirstName" style="width: 600px; height:25px;font-size: 16px;" /></div>
                <div class="fix">
                </div>
</div>
<div class="rowElem">
                <label>
                    Upload Image :</label><div class="formRight"><input type="file" id="imageUpload" name="imageUpload" /></div>
                <div class="fix">
                </div>
            </div>
<input type="submit" id="btnAddContact" value="Save" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:02:48.147

您可以从定义一个模拟表单输入字段的视图模型开始：

```
public class ContactViewModel
{
    [DisplayName("First name :")]
    [Required]
    public string FirstName { get; set; }

    [DisplayName("Upload Image :")]
    [Required]
    public HttpPostedFileBase ImageUpload { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
[HttpPost]
public ActionResult Save(ContactViewModel model)
{
    ...
} 
```

当然，根据您使用的数据访问技术，可能会有不同的方法将联系人保存到数据库中。例如，如果您使用的是普通的 ADO.NET，则可以使用一种方法进行保存：

```
public int SaveContact(string firstName, byte[] photo)
{
    using (var conn = new SqlConnection("YOUR CONNECTION STRING COMES HERE"))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "INSERT INTO Contacts (FirstName, Photo) VALUES (@firstName, @photo)";
        cmd.Parameters.AddWithValue("@firstName", firstName);
        cmd.Parameters.Add("@photo", SqlDbType.BigInt, 20).Value = photo;
        return cmd.ExecuteNonQuery();
    }
} 
```

然后在您的控制器操作中，您可以调用此方法：

```
[HttpPost]
public ActionResult Save(ContactViewModel model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }

    using (var stream = new MemoryStream())
    {
        model.ImageUpload.InputStream.CopyTo(stream);
        byte[] photo = stream.ToArray();
        SaveContact(model.FirstName, photo);
        return RedirectToAction("Index");
    }
} 
```

另外，我建议您在视图中使用 HTML 助手来生成输入字段，而不是硬编码它们：

```
@model ContactViewModel
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "saveContact", enctype = "multipart/form-data" }))
{
    <div class="rowElem noborder">
        @Html.LabelFor(x => x.FirstName)
        <div class="formRight">
            @Html.TextBoxFor(x => x.FirstName, new { style = "width: 600px; height:25px;font-size: 16px;" })
            @Html.ValidationMessageFor(x => x.FirstName)
        </div>
       <div class="fix"></div>
    </div>
    <div class="rowElem">
        @Html.LabelFor(x => x.UploadImage)
        <div class="formRight">
            @Html.TextBoxFor(x => x.ImageUpload, new { type = "file" })
            @Html.ValidationMessageFor(x => x.ImageUpload)
        </div>
        <div class="fix"></div>
    </div>
    <input type="submit" id="btnAddContact" value="Save" />    
} 
```

* * *

更新：

如果您不想遵循我关于使用视图模型的建议，并且直接将您的域模型传递给视图，并且您没有 ImageUpload 属性并且您无法修改它，您仍然可以拥有以下控制器操作签名：

```
[HttpPost]
public ActionResult Save(Contact model, HttpPostedFileBase imageUpload)
{
    ...
} 
```

# mysql - MySQL - 带有文件行号的 LOAD DATA INFILE

> ID：12561748
> 
> 赞同：1
> 
> 时间：2012-09-24T08:57:44.803
> 
> 标签：mysql

如何将 LOAD DATA INFILE 语法与 Number Of line 一起插入到表中..？
我使用了这个查询：

```
LOAD DATA INFILE 'D:/home/TAM/input/Upload/DOC20120919000000.csv' INTO TABLE tb_t_doc_d 
FIELDS TERMINATED BY ',' 
LINES TERMINATED BY '\n' 
IGNORE 1 LINES (rrn_no, new_color_cd, new_main_dealer_cd, new_zone_cd, new_branch_cd, new_destination_cd, @var)
SET process_id = '1209219999999999', transaction_id = 'DC201209219999', reference = 
trim(TRAILING '\r' FROM @var), created_dt = sysdate(), created_by = "DIDIT", updated_dt = 
sysdate(), updated_by = "DIDIT", file_line_no = ???? ; 
```

我应该填写什么`file_line_no = ????`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:07:36.130

这应该有助于：

```
set @row = 0;
LOAD DATA INFILE 'D:/home/TAM/input/Upload/DOC20120919000000.csv' INTO TABLE tb_t_doc_d 
FIELDS TERMINATED BY ',' 
LINES TERMINATED BY '\n' 
IGNORE 1 LINES (rrn_no, new_color_cd, new_main_dealer_cd, new_zone_cd, new_branch_cd,       new_destination_cd, @var)
SET process_id = '1209219999999999', transaction_id = 'DC201209219999', reference = 
trim(TRAILING '\r' FROM @var), created_dt = sysdate(), created_by = "DIDIT", updated_dt = 
sysdate(), updated_by = "DIDIT", file_line_no = @row:=@row+1; 
```

# c - atof() 函数的结构格式测试用例

> ID：12561749
> 
> 赞同：1
> 
> 时间：2012-09-24T08:57:47.003
> 
> 标签：c, testing

两天前我参加了一个面试。我被问了一个问题，我还在寻找答案。**问题是告诉我 c 中 atof(const char *str) 函数的**测试用例。我告诉他各种测试用例，例如

1.  我必须检查给定的字符串应该只包含数字。
2.  给定字符串包含一个小数点。
3.  转换后不应溢出。
4.  字符串不应为空。

但面试官不满意并要求以结构化格式给我答案。现在我的问题是如何以结构格式表示这个答案，以便将来我不会犯同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:02:38.823

我不确定面试官所说的“结构化格式”是什么意思，但我会通过写下浮点数的 BNF 语法（C 语言指定它们）来做到这一点，然后提供测试用例来测试通过句法。您的案例尤其不包括符号或指数，并且数字不需要包含小数点。

结构化方法将问题分解为子问题。语法是一个子问题，语法图表或 BNF 提供了一种将其分解为子问题的自然方法。另一个子问题是边界条件......应该有最小（> 0）和最大有效值的测试用例。还应该有处理无效输入的测试用例，但正如 lundin 在评论中指出的那样，这是不可能的，`atof`因为无效输入的行为是未定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:16:24.140

也许您可以通过您正在测试的内容来构建您的答案，例如给出错误的格式化字符串（null、empty 等）以及给出错误的参数，如错误的“数字”（0 前缀/后缀 2.0、0.4 等...）您还可以测试负浮点数，在字符串中放置多个点或其他任何内容。我希望我已经回答了你的问题，如果没有，我想我还没有很好地理解这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T09:19:29.513

我对“测试用例”一词的理解与您不同。

我认为他想要的是各种输入`atof`及其预期结果。例如：
1.`atof("1.5")`应该返回`1.5`.
2.`atof("-7")`应该返回`-7.0`。
3.`atof("Hello, world")`应该失败。但是按照 Lundin 的评论，对于 没有定义的失败行为`atof`，所以你不能真正测试这个。

测试用例应涵盖功能需要测试的所有不同内容。但是你不需要写下这些东西——只是示例输入和预期输出。

以结构化格式编写它很容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T10:56:00.753

我们在代码中使用了 use`atof`大部分时间，我们需要将`Internationalization/Localization`许多语言`10.0`转换为`10,0`.

在调用之前，`atof`您需要设置语言环境，在完成功能后，您必须重置语言环境。

# ios - Fiddler - 从 iPad 应用程序捕获和解密 HTTPS 流量

> ID：12561758
> 
> 赞同：11
> 
> 时间：2012-09-24T08:58:40.580
> 
> 标签：ios, ipad, ssl, https, fiddler

我正在尝试使用 Fiddler 监控我的 iPad 应用程序的 HTTPS 请求/响应。我有一台运行 Fiddler 的 Windows 7 PC，并已将我的 iPad 上的 HTTP 代理配置为使用端口 8888 指向 PC。这工作正常，并且可以在捕获日志中看到 CONNECT 隧道消息和“ClientHello”握手。但是，一旦我在 Fiddler 中启用“解密 HTTPS 流量”选项，该应用程序就会被阻止连接到服务器。我尝试在 PC 上安装 Fiddler 根证书，我还通过将证书导出到 URL 并将 Safari 指向我的 iPad 上的 URL 来在我的 iPad 上安装证书，然后安装它。这并没有什么不同。我需要对安装在运行我的 Web 服务的服务器上的 SSL 证书做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-01T04:04:54.860

下载适用于 iOS/Android 的 Fiddler 插件，然后`http://[proxyip]:[port]/`使用手机浏览器访问。您可以从那里生成/下载您的**工作**证书。

和

**在您的 iPhone 设置 -> 常规 -> 关于 -> 证书 Trush 设置**中打开您的提琴手证书

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T04:38:52.693

您可能尚未完全安装 Fiddler 证书。

将提琴手证书通过电子邮件发送到您的 iPad。打开电子邮件，然后打开证书。iOS 会提示您信任证书，然后安装它。

如果安装正确，您将有一个`Settings->General->Profile`名为 DO_NOT_TRUST_Fiddler 的新 iOS 设置。该设置是您安装的证书。

安装证书后 - Fiddler 将能够向您显示您的 HTTPS 流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T09:37:50.133

我尝试打开[https://github.com](https://github.com)进行测试。我已经按照 Josh 所说的做了（通过电子邮件安装证书）。但我遇到了“Safari 无法打开页面，因为它无法与服务器建立安全连接”。当我关闭 http 代理时，https;//github.com 显示良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-02T09:16:21.477

[安装本文](http://blogs.telerik.com/fiddler/posts/13-08-19/faq---certificates-in-fiddler)中的“CertMaker Add-on”，然后重试您在问题中描述的所有内容 - 它会正常工作。**

# javascript - Chrome 扩展：将内容写入在沙盒环境中创建的动态 iframe

> ID：12561759
> 
> 赞同：2
> 
> 时间：2012-09-24T08:58:45.493
> 
> 标签：javascript, google-chrome, iframe, google-chrome-extension, postmessage

我无法克服这个问题。有人可以给点建议吗？

1.  我有这个使用 ExtJS 库的应用程序，我需要在 Chrome 扩展程序中运行它。我已经成功创建了我的消息传递桥 ( `postMessage`)，并将整个应用程序沙盒化在其中，一切正常。ExtJS 已加载，应用程序正在运行。

2.  然后我有这段逻辑，我需要在我的 ExtJS 视口中预览一段 HTML 片段。我自己创建了一个`iframe`，`Panel`然后`afterrender`尝试在其中编写代码段。这是我使用的代码：

    ```
    html: '<iframe src="about:blank" style="width:100%;height:100%;border:none;"></iframe>';

    ......

    //p is the panel found in afterrender
    p.body.down('iframe').dom.contentDocument.write(content); 
    ```

    然后是错误：

    > 不安全的 JavaScript 尝试使用 URL about:blank 从具有 URL chrome-extension://fcnpmlgapilgclcelfanblpbglmkghbc/core/themes/default/app.html 的框架访问框架。域、协议和端口必须匹配。

3.  ~~我已经尝试`postMessage`在沙箱中使用这个动态 iframe，但没有任何反应。在清单中设置`sandbox`属性也不起作用。~~这是唯一的方法，并且有效。请看下面我的回答。

**问题：**

1.  应该如何设置清单以支持这种用例？
2.  或者有没有更好的方法来预览 HTML 片段而不使用`iframe`？Afaik 预览`iframe`是最好的，因为它将片段沙盒化而不会与父 css 混淆。

**笔记**

这段代码在 manifest v1 中运行良好，但我计划将其迁移到 manifest v2。我没有意识到内容安全策略 (CSP) 变得如此严格。

一个描述问题的屏幕；）

![屏幕](../Images/f8f3191b1caf3116c29d97415b103b9c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:09:46.253

对不起，这很尴尬。显然`postMessage`是唯一的方法，我之前无法让它工作，因为我的 iframe 尚未加载。此外，在 iframe 中访问 dom 文档在 CSP 下是一个很大*的*禁忌，但可以访问`contentWindow`以执行`postMessage`.

这就是我为解决这个问题所做的。希望有人能从中受益：

1.  `preview.html`在您的扩展根目录中创建一个

2.  在 下`manifest.json`，将其添加为[`sandbox`](http://developer.chrome.com/extensions/manifest.html#sandbox)属性的一部分

3.  在 中`preview.html`，添加以下代码。请注意，我的片段是一个完整的 html，所以我`document.write`改用了。

    ```
    <!DOCTYPE html>
    <html>
        <head>
            <script>
            window.addEventListener("message", function(e) {
                if (e.data.content) {
                    document.write(e.data.content);
                }
            });
            </script>
        </head>
        <body></body>
    </html> 
    ```

4.  像往常一样在代码中创建 iframe，将其指向您的`preview.html`，并将其附加到父 div 或`Ext.Panel`.

5.  `postMessage`在元素被绘制/创建/附加之后使用以下代码。

    ```
    var content = '<!DOCTYPE html><html><body>Hello World!</body></html>';
    var iframe = p.body.down('iframe').dom; //or the iframe node

    iframe.onload = function() {
        iframe.contentWindow.postMessage({content: content}, '*');
    }; 
    ```

享受 ;）

**编辑**

正如[迈克在 Chromium 论坛中](https://groups.google.com/a/chromium.org/d/msg/chromium-extensions/969VmAxPJvk/3wJFREN4cNEJ)指出的那样，这个问题也可以解决[`srcdoc`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#attr-iframe-srcdoc)。只需设置 iframe 的 srcdoc 即可解决问题。

只是不确定状态`srcdoc`

# facebook - 在 Facebook，如何获得喜欢我帖子的“所有用户”？

> ID：12561769
> 
> 赞同：0
> 
> 时间：2012-09-24T08:59:11.467
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-messages

我使用 Graph API Explorer 来获取谁喜欢我的帖子.. 但最坏的情况是，如果有人再次喜欢我的帖子，以前的用户将不会再次显示.. 我怎样才能获得所有喜欢我的帖子的用户？

我想了解所有用户，因为我想向所有喜欢我帖子的人发送消息。这是其他方式来实现我的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:01:53.570

试试 graph.facebook.com/post_id/likes 这会给你所有喜欢 post_id 帖子的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T14:39:35.653

`https://graph.facebook.com/v2.9/POST_ID/likes?access_token=PAGE_ACCESS_TOKEN` 这将为您提供所有喜欢您的帖子的所有用户都可以尝试点击一次

# mysql - MySQL - 获取最低值

> ID：12561774
> 
> 赞同：9
> 
> 时间：2012-09-24T08:59:31.977
> 
> 标签：mysql, group-by

我的数据库结构包含列：`id, name, value, dealer`. 我想`value`为**每个** `dealer`检索最低的行。我一直试图搞砸`MIN()`and `GROUP BY`，仍然 - 没有解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-24T09:02:12.637

解决方案1：

```
SELECT t1.* FROM your_table t1
JOIN (
  SELECT MIN(value) AS min_value, dealer
  FROM your_table 
  GROUP BY dealer
) AS t2 ON t1.dealer = t2.dealer AND t1.value = t2.min_value 
```

解决方案2：

```
SELECT t1.* FROM your_table t1
LEFT JOIN your_table t2
ON t1.dealer = t2.dealer AND t1.value > t2.value
WHERE t2.value IS NULL 
```

这个问题非常有名，所以在Mysql的手册中有专门的一页。

检查这一点：***[持有某一列的分组最大值/最小值的行](http://dev.mysql.com/doc/refman/5.6/en/example-maximum-column-group-row.html)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T09:01:53.650

```
select id,name,MIN(value) as pkvalue,dealer from TABLENAME 
group by id,name,dealer; 
```

在这里，您按 id、name、dealer 对所有行进行分组，然后您将获得最小值作为 pkvalue。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T09:03:32.083

```
SELECT MIN(value),dealer FROM table_name GROUP BY dealer; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T09:05:37.987

首先，您需要为每个经销商解析最低值，然后为特定经销商检索具有该值的行。我会这样做：

```
SELECT a.*
FROM   your_table AS a
       JOIN (SELECT dealer,
                    Min(value) AS m
             FROM   your_table
             GROUP  BY dealer) AS b
         ON ( a.dealer= b.dealer
              AND a.value = b.m ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:02:29.360

尝试以下操作：

```
SELECT dealer, MIN(value) as "Lowest value"
FROM value
GROUP BY dealer; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T09:10:44.220

```
select id, name, value, dealer from yourtable where dealer 
in(select min(dealer) from yourtable group by name, value) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-16T00:44:16.513

这些答案似乎错过了经销商有多个最小值并且只想返回一行的边缘情况。

如果您只想为每个经销商提供一个值，您可以使用 row_number 分区 - 组 - 按经销商的表，然后按值和 id 对数据进行排序。我们必须假设您需要具有最小 id 的行。

```
SELECT ord_tbl.id, 
       ord_tbl.name, 
       ord_tbl.value, 
       ord_tbl.dealer
FROM (SELECT your_table.*, 
      ROW_NUMBER() over (PARTITION BY dealer ORDER BY value ASC, ID ASC) 
      FROM your_table 
     ) AS ord_tbl
WHERE ord_tbl.ROW_NUMBER = 1; 
```

请注意，尽管该值、id 和经销商已被索引。如果不是，这将进行全表扫描，并且可能会变得很慢......

# java - 值来自单行文本区域中的数据库

> ID：12561778
> 
> 赞同：0
> 
> 时间：2012-09-24T08:59:45.937
> 
> 标签：java, jsp

我的jsp页面中有一个textarea。我正在将数据提交到数据库，因为它正在逐行更新到数据库中。当我从 textarea 中的数据库中检索值并向用户显示时，即使我在不​​同的行中插入了数据，它也会出现在一行中。任何人都可以提出任何答案。

代码：

```
preparedStatement = connection.prepareStatement(QueryHelper.setQuestion); 
preparedStatement.setString(1, strvideoqueId); 
preparedStatement.setString(2, que); 
preparedStatement.setTimestamp(3, Convert.toSqlTimeStamp(today)); 
```

其中 que 是来自 textarea 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:18:43.487

我已经使用标签解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:02:37.023

在文本区域中添加`\n`文本之前在每行之间添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:05:34.807

HTML 中的 textarea 标签提供了属性`wrap`。添加它并使用 value `physical`。因此，如果用户按下回车键或回车键，浏览器也会提交换行符。

# lambda - list 应该是一个 lambda 表达式

> ID：12561779
> 
> 赞同：1
> 
> 时间：2012-09-24T08:59:48.363
> 
> 标签：lambda, lisp

我刚刚开始学习 LISP，我只是在思考它的逻辑，但是我遇到了一个错误，我找不到解决方案..我确定这是因为我误用了某处的括号，或者我一般滥用了一个函数，但我已经盯着它看了一个小时，还没有取得任何进展！

```
(defun not-touching (pos player move)
   (let (legal? t)
    if ((not (eq (member move '(0 1 2 3 4 7 8 11 12 13 14 15)) nil))
        (mapcar #'(lambda(x) (if (not (member move x) nil)
                                (cond ((and (eq (nth (- (position move x) 1) x) nil)
                                        (not (eq (nth (+ (position move x) 1) x) player))) t)   
                                    ((and (not (eq (nth (- (position move x) 1) x) player))
                                        (not (eq (nth (+ (position move x) 1) x) player))) t)
                                    ((and (not (eq (nth (- (position move x) 1) x) player))
                                        (eq (nth (+ (position move x) 1) x) nil)) t)
                                    (t setf legal? nil))
                                nil)) *outside-lines*))
    legal?)) 
```

我得到的错误如下所示：

```
SYSTEM::%EXPAND-FORM: (NOT (EQ (MEMBER MOVE '(0 1 2 3 4 7 8 11 12 13 14 15)) NIL)) should be
  a lambda expression 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:14:19.253

如果你想编程，你需要学习编程语言的语法。

查阅[Common Lisp Hyperspec](http://www.lispworks.com/documentation/HyperSpec/Front/Contents.htm)了解 Common Lisp 语法。Common Lisp 的每个函数/宏/特殊运算符/... 都在 Common Lisp Hyperspec 及其语法中进行了描述。

请参阅 LET、IF 的语法。

`LET`需要一个绑定列表。

`IF`,`SETF`是一种形式。需要括号括起来。

`NOT`只接受一个论点。

# php - 更新 carad 集 adminActivation = '%d' 其中 carAdID = '1'

> ID：12561780
> 
> 赞同：0
> 
> 时间：2012-09-24T08:59:49.483
> 
> 标签：php, oop, sql-update

```
function UpdateStatus()
{
    $updateStatusStringBuilder = " update carad ";
    $updateStatusStringBuilder .= " set";
    $updateStatusStringBuilder .= " adminActivation = '%d'";
    $updateStatusStringBuilder .= " where ";
    return $updateStatusStringBuilder;
}
function UpdateStatusByAdminActivation($adminActivationStatus,$CarAdID)
{
    $this->connect();
    $CaradMappingQuery = new CaradMapping();
    $query = $CaradMappingQuery->UpdateStatus()." carAdID = '".mysql_real_escape_string($CarAdID)."'";
    echo $query;
    $this->iquery($query);
} 
```

查询没有更新数据库中的结果，我对“%d”有点困惑，我正在打印这个值，它的显示如下：

`update carad set adminActivation = '%d' where carAdID = '1'`

如果我错了，我用什么代替 '%d'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:06:16.383

您必须设置要设置的值，而不是`'%d'`像编辑一样。

对于 %d 的动态值，您必须使用`MySqli`and `PDO`。该查询被称为`Prepared Statement`

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

# maven - Maven 故障安全插件不运行 testNG XML 套件

> ID：12561791
> 
> 赞同：3
> 
> 时间：2012-09-24T09:00:37.050
> 
> 标签：maven, integration-testing, testng, test-suite, maven-failsafe-plugin

我正在使用 maven 运行我在 TestNG 套件中的集成测试。在eclipse下运行套件时-我的测试套件运行成功。当运行“mvn verify”来运行我的集成测试时，我看到故障安全插件配置调试打印，包括 suite.xml 文件和我编译的类的正确路径，但它不执行我的测试（构建过程成功完成）。

我尝试运行相同的 pom 配置，但使用surefire插件而不是故障安全插件，并且我的测试成功执行。

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.12.3</version>
                <configuration>
                    <suiteXmlFiles>
                    <suiteXmlFile>src/test/resources/MyTestNgSuiteFile.xml</suiteXmlFile>
                    </suiteXmlFiles>
                    <argLine>-Xmx1024m</argLine>
                </configuration>
                    <executions>
          <execution>
            <id>integration-test</id>
            <phase>integration-test</phase>
            <goals>
              <goal>integration-test</goal>
            </goals>
          </execution>
          <execution>
            <id>verify</id>
            <phase>verify</phase>
            <goals>
              <goal>verify</goal>
            </goals>
          </execution>
        </executions>

            </plugin> 
```

这是相关的控制台输出：

> [DEBUG] 排除：org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1 [DEBUG] 排除：junit:junit:jar:3.8.1 [DEBUG] 排除：org.apache .maven:maven-core:jar:2.0.9 [DEBUG] 排除：org.apache.maven:maven-plugin-parameter-documenter:jar:2.0.9 [DEBUG]
> 排除：org.apache.maven:maven-repository -metadata:jar:2.0.9 [DEBUG] 排除：org.apache.maven:maven-error-diagnostics:jar:2.0.9 [DEBUG]
> 排除：org.apache.maven:maven-plugin-descriptor:jar:2.0 .9 [调试]
> 排除：org.apache.maven:maven-monitor:jar:2.0.9 [DEBUG] 排除：classworlds:classworlds:jar:1.1 [DEBUG] 排除：org.apache.maven:maven-toolchain:jar:2.0.9 [调试] 配置 mojo org.apache.maven.plugins:maven-failsafe-plugin:2.12.3:integration-test 从插件领域 ClassRealm[plugin>org.apache.maven.plugins:maven-failsafe-plugin:2.12.3,父：sun.misc.Launcher$AppClassLoader@121ab80] [DEBUG] 使用基本配置器配置 mojo 'org.apache.maven.plugins:maven-failsafe-plugin:2.12.3:integration-test' -->[DEBUG] (s) argLine = -Xmx1024m [DEBUG] (s) basedir = PathToMyDir\MyProject [DEBUG] (s) childDelegation = false [DEBUG] (s) classesDirectory = PathToMyDir\MyProject\target\classes [DEBUG] (s ) disableXmlReport = false [DEBUG] (s) enableAssertions = true [DEBUG] (s) forkMode = once [DEBUG] (s) junitArtifactName = junit:junit [DEBUG] (s) localRepository = id: local url: file:// /..../.m2/repository/ 布局：无
> 
> [DEBUG] (f) parallelMavenExecution = false [DEBUG] (s) perCoreThreadCount = true [DEBUG] (s) pluginArtifactMap = {org.apache.maven.plugins:maven-failsafe-plugin=org.apache.maven.plugins:maven -failsafe-plugin:maven-plugin:2.12.3:, org.apache.maven.surefire:surefire-booter=org.apache.maven.surefire:surefire-booter:jar:2.12.3:compile, org.apache。 maven.surefire:surefire-api=org.apache.maven.surefire:surefire-api:jar:2.12.3:compile, org.apache.maven.surefire:maven-surefire-common=org.apache.maven.surefire: maven-surefire-common:jar:2.12.3:compile, org.apache.commons:commons-lang3=org.apache.commons:commons-lang3:jar:3.1:compile, org.apache.maven.shared:maven- common-artifact-filters=org.apache.maven.shared:maven-common-artifact-filters:jar:1.3:compile, org.codehaus.plexus:plexus-utils=org.codehaus.plexus:plexus-utils:jar: 3.0.5：编译，org.apache.maven.reporting:maven-reporting-api=org.apache.maven.reporting:maven-reporting-api:jar:2.0.9:compile, org.apache.maven.plugin-tools:maven- plugin-annotations=org.apache.maven.plugin-tools:maven-plugin-annotations:jar:3.1:compile} [DEBUG] (f) pluginDescriptor = Component Descriptor: role: 'org.apache.maven.plugin.Mojo' ，实现：'org.apache.maven.plugin.failsafe.HelpMojo'，角色提示：'org.apache.maven.plugins:maven-failsafe-plugin:2.12.3:help' 角色：'org.apache.maven. plugin.Mojo'，实现：'org.apache.maven.plugin.failsafe.IntegrationTestMojo'，角色提示：'org.apache.maven.plugins:maven-failsafe-plugin:2.12.3:integration-test' 角色：' org.apache.maven.plugin.Mojo'，实现：'org.apache.maven.plugin.failsafe.VerifyMojo'，角色提示：'org.apache.maven.plugins:maven-failsafe-plugin:2.12.3:verify' --- [DEBUG] (s) printSummary = true [DEBUG] (s) projectArtifactMap = {All Artifacts Here} [ DEBUG] (s) redirectTestOutputToFile = false [DEBUG] (s) remoteRepositories = [ id: central url:[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2) 布局：默认快照：[启用 => 假，更新 => 每日] 发布：[启用 => 真，更新 => 从不]] **[调试] (s) 报告格式 = 简短[DEBUG] (s) reportsDirectory = PathToMyDir\MyProject\target\failsafe-reports [DEBUG] (s) runOrder = 文件系统 [DEBUG] (s) skip = false [DEBUG] (s) skipTests = false [DEBUG] (s) suiteXmlFiles = [PathToMyDir\MyProject\src\test\resources\MyTestNgSuiteFile.xml] [DEBUG] (s) summaryFile = PathToMyDir\MyProject\target\failsafe-reports\failsafe-summary.xml [DEBUG] (s) testClassesDirectory = PathToMyDir\ MyProject\target\test-classes [DEBUG] (s) testNGArtifactName = org.testng:testng [DEBUG] (s) testSourceDirectory = PathToMyDir\MyProject\src\test\java [DEBUG]
> (s) trimStackTrace = true [DEBUG] (s) useFile = true [DEBUG] (s) useManifestOnlyJar = true [DEBUG] (s) useSystemClassLoader = true [DEBUG] (s) useUnlimitedThreads = false [DEBUG] (s) workingDirectory = PathToMyDir\MyProject [DEBUG] (s) project = MavenProject: MyParentProject:MyProject:0.0.1-SNAPSHOT @ PathToMyDir\MyProject\pom.xml [DEBUG]** (s) session = org.apache.maven.execution.MavenSession@bffe59 [DEBUG] -- 结束配置 -- [WARNING] 文件编码尚未设置，使用平台编码Cp1255，即构建依赖于平台！[INFO] [INFO] --- maven-failsafe-plugin:2.12.3:verify (verify) @MyProject --- [DEBUG] 配置 mojo org.apache.maven.plugins:maven-failsafe-plugin:2.12.3 :verify from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-failsafe-plugin:2.12.3, parent: sun.misc.Launcher$AppClassLoader@121ab80] [DEBUG] 配置 mojo 'org.apache.maven .plugins:maven-failsafe-plugin:2.12.3:verify' 带有基本配置器 -->

看起来“分叉命令**行：cmd.exe /X /C”C：\**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:03:24.827

我遇到了类似的问题并降级了故障安全插件以`2.11`对我有用。

# javascript - 如何通过 Javascript 创建的 html 对象（按钮）使用 jQuery 执行事件？

> ID：12561795
> 
> 赞同：2
> 
> 时间：2012-09-24T09:00:57.760
> 
> 标签：javascript, jquery

我只是新来的。所以这就是我卡住的地方：

我使用 javascript 创建了一个 html 表。我有一个按钮，单击该按钮将创建一组具有完全相同结构的表，但这些表中的对象（例如按钮、文本）具有不同的 ID。现在，当我尝试在其中一个生成的表上使用带有按钮的 jQuery 执行单击功能时，它将无法正常工作。我怎么去这里？提前致谢！

这是一个在 javascript 中创建 html 表（具有唯一 ID）的示例函数：

```
function CreateTables() {

    var html = ' ';
    var valPrompt = prompt("How many tables would you like to add?");
    parseInt(valPrompt);
    for (i = 1; i <= valPrompt; i++) {

        html += "<table>" + "<tr>" + "<td>" + "Text goes here" + "</td>" + "<td>" + "<input type='text' id='txtTEXT" + i + "'/>" + "</td>" + "<td>" + < input type = 'button'
        id = 'btnALERT" + i + "' / > +"</td>" + "</tr>" + "</table>"
    }
    document.getElementById('HtmlPlaceHolder').innerHTML = html;
}​ 
```

**因此，如果我们查看代码，如果执行CreateTables**函数，将创建带有唯一 ID 的按钮（btnALERT）的表集。为了选择对象，我想我将使用 jQuery。例如，如果我在 btnALERT1（由 CreateTables 生成）中绑定一个处理程序，说一个单击函数以提醒一个简单的“Hello”，我将如何执行此操作？我的代码似乎不起作用：

```
$(document).ready(function() {
    $('#btnALERT1').click(function() {
        alert("Hello");
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:04:06.257

使用[.live()](http://api.jquery.com/live/)（对于较旧的 jquery 版本 - < v1.7）：

```
$('#btnALERT1').live('click', function()
{
   alert("Hello");
}); 
```

或者：

```
$(document).delegate('#btnALERT1', 'click', function() 
{
   alert("Hello");
}); 
```

使用[.on()](http://api.jquery.com/on/)（对于新的 jquery 版本 - >= 1.7）：

```
$(document).on('click', '#btnALERT1', function()
{
   alert("Hello");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:03:24.177

我想你可能想使用这个方法`.on()`：

```
$(document).ready(function() {
    $('#btnALERT1').on('click', function() {
        alert("Hello");
    });
}); 
```

更多信息，请查看在线文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:08:43.303

您必须在创建表格后附加事件处理程序，而不是在文档准备好时（文档应该已经准备好，因为用户正在与之交互）。

当然，您可以使用 jQuery 来做到这一点，但请看一下本机方法 - jQuery 可能过于臃肿，具体取决于您将要做什么，并且您将了解一些有关 DOM 的知识。

我在下面添加了一些代码，可让您添加回调并显示一些您可以轻松返回的内容。这并不完全符合您的要求，但它是在 DOM 中找到您的方式的一个很好的开始。

```
function CreateTables() {

    var html = ' ';
    var valPrompt = prompt("How many tables would you like to add?");
    parseInt(valPrompt);
    for (i = 1; i <= valPrompt; i++) {

        html += "<table>" + "<tr>" + "<td>" + "Text goes here" + "</td>" + "<td>" + "<input type='text' id='txtTEXT" + i + "'/>" + "</td>" + "<td>" + < input type = 'button'
        id = 'btnALERT" + i + "' / > +"</td>" + "</tr>" + "</table>"
    }
    var placeholder = document.getElementById('HtmlPlaceHolder').innerHTML = html;
    placeholder.innerHTML = html;
    placeholder.addEventListener('click', function (e) {
       console.log(this, e);
    }

}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:08:44.067

我会在 HtmlPlaceHolder 上使用一个委托来检查点击事件，如下所示：

```
$("#HtmlPlaceHolder").on("click", "input[type=button]", function() {
    alert($(this).attr("id"));
}); 
```

另外，我会将按钮 ID 方案更改为 btnALERT_1，因此您可以使用`.split("_")`方法提取 ID 号。

# jquery - 更改 fancybox 关闭按钮标题/工具提示

> ID：12561800
> 
> 赞同：4
> 
> 时间：2012-09-24T09:01:25.087
> 
> 标签：jquery, fancybox

有没有办法翻译花式框中的工具提示，例如关闭按钮上的工具提示？

我已经在 afterShow 回调中将值更改为丹麦语并且似乎可以工作..或者有更好的方法来改变它吗？

```
<script type="text/javascript">
      $(document).ready(function() {
        $("a.mapoverlay").fancybox({
          width : '90%',
          height : '90%',
          fixed: false,
          autoSize : false,
          autoCenter : true,
          afterLoad  :  function() {
        loadMap();
          },
          afterShow  :  function() {
        $("a.fancybox-close").attr("title", "Luk");
          }
        });
      });
</script> 
```

**编辑：** 这段代码似乎工作正常。

我在写这篇文章时遇到了语法错误。我想你错过了什么？SyntaxError：意外的令牌}

我在这里看到了这篇文章：[https ://github.com/fancyapps/fancyBox/issues/7](https://github.com/fancyapps/fancyBox/issues/7)

```
<script type="text/javascript">
      $(document).ready(function() {
        $("a.mapoverlay").fancybox({
          width : '90%',
          height : '90%',
          fixed: false,
          autoSize : false,
          autoCenter : true,
          afterLoad  :  function() {
        loadMap();
          },
          tpl: { 
        closeBtn: '<div title="Test" class="fancybox-item fancybox-close"></div>' 
          }
        });
      });
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T09:06:13.750

您可以使用以下`.tpl`选项：

```
$(document).ready(function() {
  $("a.mapoverlay").fancybox({
    width : '90%',
    height : '90%',
    fixed: false,
    autoSize : false,
    autoCenter : true,
    afterLoad :  function() {
      loadMap();
    },
    tpl: {
        '<a title="Your title here!" class="fancybox-item fancybox-close" href="javascript:;"></a>'
    }
  });
}); 
```

**编辑**：选项的正确格式`tpl`是

```
tpl : {
 closeBtn : '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>'
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-19T11:21:14.120

## 对于永久更改：

只需替换*fancybox/source/* `jquery.fancybox.pack.js`（和/或`jquery.fancybox.js`）中的“关闭”。

寻找`closeBtn`然后改变它`a` `title`

![在此处输入图像描述](../Images/4df0f2de07dbb94b1c9724d322f2fde4.png)

* * *

## 对于临时标题更改：

```
$(document).ready(function() {
  $(".fancybox").fancybox({
     tpl : {
        closeBtn : '<a title="CUSTOM TITLE HERE" class="fancybox-item fancybox-close" href="javascript:;"></a>'
     }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-26T09:41:13.593

您可以使用以下`$.fancybox.close()`选项：

例子： `<a onclick="$.fancybox.close();" href="javascript:;">Your text </a>`

# android - 如何将相对布局大小增加设置为 texview 大小增加

> ID：12561803
> 
> 赞同：0
> 
> 时间：2012-09-24T09:01:36.667
> 
> 标签：android, textview

我是 android 新手，我正在开发一个与在线聊天相关的应用程序。在聊天屏幕中，我正在尝试将聊天框大小设置为文本视图大小。

随着文本视图大小的增加和减少，如何增加和减少聊天框的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:05:06.943

设置`Relative Layout`高度`wrap_content`和`textview`高度。

`WRAP_CONTENT`，这意味着视图希望足够大以包含其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:08:58.400

看到这个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content" android:weightSum="1.0"
android:layout_weight="1" android:layout_height="wrap_content">

<TextView android:id="@+id/lefttext" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_marginLeft="10dip" 
    android:layout_marginRight="10dip" 
    android:layout_marginTop="10dip"
    android:layout_marginBottom="5dip"
    android:layout_alignParentLeft="true"
    android:maxWidth="250dip"/>

<TextView 
    android:id="@+id/righttext" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip" 
    android:layout_marginRight="10dip" 
    android:layout_marginTop="10dip"
    android:layout_marginBottom="5dip"
    android:layout_alignParentRight="true"
    android:maxWidth="250dip"/>
  </RelativeLayout> 
```

这是我的自定义数组适配器的 getView 方法中的代码：

```
View view = convertView;
if(view == null){
     view = mInflater.inflate(R.layout.list_item, null);
}

Resources res = getContext().getResources();
Drawable bubblesChat = res.getDrawable(R.drawable.bubbles_chat);
Drawable bubblesResponse = res.getDrawable(R.drawable.bubbles_response);
TextView left = (TextView) view.findViewById(R.id.lefttext);
TextView right = (TextView) view.findViewById(R.id.righttext);

String txt = super.getItem(position);
if(txt.startsWith("s:")) {
    left.setText(getItem(position));
    left.setBackgroundDrawable(bubblesChat);
    right.setText("");
    right.setBackgroundDrawable(null);
} else {
    right.setText(getItem(position));
    right.setBackgroundDrawable(bubblesResponse);
    left.setText("");
    left.setBackgroundDrawable(null);
}
return view; 
```

[备用聊天气泡宽度](https://stackoverflow.com/questions/9101835/alternate-chat-bubble-widths) 和 [http://warting.se/2012/06/04/chat-bubbles-in-android/](http://warting.se/2012/06/04/chat-bubbles-in-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:25:05.817

您可以最好采用布局`RelativeLayout`，并且每当您的`TextView`大小增加或减少时，通过动态设置新的来刷新您的聊天视图`LayoutParams`。

# winapi - 使用 kinect sdk 编译项目时出现 NuiApi.h 错误

> ID：12561808
> 
> 赞同：0
> 
> 时间：2012-09-24T09:01:53.533
> 
> 标签：winapi, visual-c++, console, kinect

出于测试的目的，我尝试构建一个 win32 控制台项目（空项目）以便编译确保 kinect sdk 可以工作。

在构建时，我在 NuiApi.h 中遇到了数百个错误

我所做的只是将 NuiApi.h 包含在我的源代码中，我什么也没做。

这是项目

[https://dl.dropbox.com/u/4740547/ConsoleApplication1.zip](https://dl.dropbox.com/u/4740547/ConsoleApplication1.zip)

尝试构建它，您将看到所有错误弹出。如果有人能告诉我我哪里出错了，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:39:06.537

找出问题所在 - 我需要做的就是添加#include，更重要的是在创建项目时取消选中预编译库选项。

# c++ - 使用 if(...) 时，为什么这被认为是一种好的编程习惯？

> ID：12561810
> 
> 赞同：0
> 
> 时间：2012-09-24T09:02:02.140
> 
> 标签：c++, c, programming-languages

> **可能重复：**
> [如何检查是否相等？(0 == i) 或 (i == 0)](https://stackoverflow.com/questions/148298/how-to-check-for-equals-0-i-or-i-0)
> [i==0 和 0==i 有区别吗？](https://stackoverflow.com/questions/10656419/is-there-a-difference-between-i-0-and-0-i)

我多次看到人们使用`if(condition)`as`if(0==x)`而不是`if(x==0)`. 据说这是一个很好的做法，但有人可以解释为什么会这样吗？它有什么区别？相反，它降低了我认为的可读性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T09:03:57.880

它降低可读性的事实纯粹是主观的。（虽然我也有同样的感觉，但那是因为我一直在处理`x==0`比其他方式更多的事情，所以我已经习惯了）。

这样做是为了防止意外分配：

```
if(0=x) 
```

将产生编译器错误，

```
if(x=0) 
```

惯于。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:07:20.577

就个人而言，我不喜欢这种做法。但它变得流行是因为以下原因：

区分`assignment operator`和布尔条件。

```
if(x = 0) 
```

这条线有两个目的：

1.  将 0 分配给 x。
2.  使条件`false`导致它等同于`if(0)`

为了避免这些错误，有些人更喜欢`if(0 = x)`这会导致编译时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:06:39.097

它只是避免了键入错误，您将键入`if (a = 0)`而不是`if (a == 0)`. 如果使用 Yoda 样式`if (0 = a)`而不是`if (0 == a)`.

另一方面，它并不能防止`if (b = a)`和`b`是另一个变量的情况。没有银弹。

更好的是`-Wall -Wextra`在编译时使用。添加`-Werror`如果您想偏执并将所有警告视为错误（最好这样做）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:05:02.420

是的，它的可读性较差（恕我直言），但这可以避免使用分配而不是检查其常见错误`==`

```
if( 0 = variable ) { // Fail 0 is constant 
```

有趣的事实：有人称之为“尤达条件”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:06:03.440

不，这只是你的习惯，比如左边的变量名和右边的常量。但实际上它会给你确切的代码，如果你离开

如果 (0=x)

代替

if(0==x) 错误然后它会给你一个错误，你可以很容易地修改它但是如果在相反的情况下它很难调试

# actionbarsherlock - 如何使用 android 中的操作栏 sherlock 为 IcsSpinner 及其下拉视图资源设置背景图像

> ID：12561811
> 
> 赞同：0
> 
> 时间：2012-09-24T09:02:05.587
> 
> 标签：actionbarsherlock

如何在 android 中使用 action bar sherlock 为 IcsSpinner 添加样式。如果有人知道如何为 IcsSpinner 和下拉视图资源设置不同的背景图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:25:01.097

```
<style name="AppTheme" parent="@style/Theme.Sherlock">
    <item name="android:actionDropDownStyle">@style/DropDownNav</item>
    <item name="android:dropDownListViewStyle">@style/DropDownListView</item>
</style>

<style name="DropDownListView" parent="@android:style/Widget.Holo.Light.ListView.DropDown">
    <item name="android:listSelector">@drawable/selectable_background</item>
</style>

<style name="DropDownNav" parent="@android:style/Widget.Holo.Light.Spinner">
    <item name="android:background">@drawable/spinner_background_ab</item>
    <item name="android:popupBackground">@drawable/menu_dropdown_panel</item>
    <item name="android:dropDownSelector">@drawable/selectable_background</item>
</style> 
```

查看[ActionBar 样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)

# perl - 用perl从文本中提取段落

> ID：12561822
> 
> 赞同：2
> 
> 时间：2012-09-24T09:02:43.057
> 
> 标签：perl

我想从从数据库中检索到的文本变量中提取段落。

为了从文件处理程序中提取 pargaphs，我使用以下代码：

```
local $/ = undef;
@paragarphs =<STDIN> 
```

使用 perl 从文本变量中提取段落的最佳选择是什么，以及 cpan 上是否有执行此类任务的模块？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T09:25:42.937

您快到了。设置`$/`为`undef`将一口气读入整个文本。

你想要的是`local $/ = "";`启用段落模式，根据[`perldoc perlvar`](http://perldoc.perl.org/perlvar.html)（强调我自己的）：

> **$/**
> 
> 输入记录分隔符，默认为换行符。这影响了 Perl 关于“线”的概念。像 awk 的 RS 变量一样工作，包括将空行视为终止符（如果设置为空字符串）（空行不能包含任何空格或制表符）。您可以将其设置为多字符字符串以匹配多字符终止符，或设置为 undef 以读取文件末尾。如果文件包含连续的空行，将其设置为 "\n\n" 意味着与设置为 "" 略有不同。**设置为 "" 会将两个或多个连续的空行视为单个空行。**设置为 "\n\n" 将盲目地假设下一个输入字符属于下一段，即使它是换行符。

* * *

当然，可以从字符串而不是文件中读取文件句柄：

```
use strict;
use warnings;
use autodie;

my $text = <<TEXT;
This is a paragraph.

Here's another one that 
spans over multiple lines.

Last paragraph
TEXT

local $/ = "";
open my $fh, '<', \$text;

while ( <$fh> ) {

    print "New Paragraph: $_";
}

close $fh; 
```

**输出**

```
New Paragraph: This is a paragraph.

New Paragraph: Here's another one that
spans over multiple lines.

New Paragraph: Last paragraph 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-03T16:59:42.223

您已经有了脚本 ( `local $/ = "";`) 的答案，但值得注意的是，单行语句有一个快捷方式：`-00`选项。

```
perl -00 -ne '$count++; END {print "Counted $count paragraphs\n"}' somefile.txt 
```

来自`man perlrun`：

> -0[八进制/十六进制]
> 
> 指定输入记录分隔符 ($/) [...]
> 
> 特殊值 00 将导致 Perl 以段落模式 slurp 文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T09:11:11.433

如果文本在变量中，例如：

```
$text = "Here is a paragraph.\nHere is another paragraph."; 
```

或者：

```
$text = 'Paragraph 1
Paragraph2'; 
```

您可以通过用“\n”分割文本来简单地获取段落。

```
@paragraphs = split("\n",$text); 
```

如果您的段落由双换行符或 \n 和 \r 的组合分隔（如在 Windows 中），您可以相应地更改拆分命令。

# regex - 两个令牌之间的 sed 全局转换

> ID：12561824
> 
> 赞同：0
> 
> 时间：2012-09-24T09:02:56.350
> 
> 标签：regex, sed

我的问题似乎很简单，但我发现转换为 sed 表达式非常困难。

我需要在文件中的某些标记之间“强调”名称。因此，如果该行有标记`:`，`=`我需要在这两个标记之间将“多字名称”转换为“多字名称”。

我知道在标记之间进行两步匹配然后用下划线全局替换空格是相当容易的，但是我找不到保留不匹配的行部分以写回文件的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:04:15.310

这可能对你有用（GNU sed、tr 和 bash）：

```
sed 's/:[^=]*=/$(tr " " "_" <<<"&")/g;s/.*/echo "&"/e' file 
```

或仅使用 sed：

```
sed ':a;/:[^_=]*=/!b;s//\n&\n/;h;s/.*\n\(.*\)\n.*/\1/;y/ /_/;H;g;s/\n.*\n\(.*\)\n\(.*\)/\2\1/;ta' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:37:18.607

你可以通过两次调用来做到这一点`sed`：

```
echo 'pre with space :multi word name=post with space' \
| sed 's/[:=]/\n&/g' | sed '/^:/s/ /_/g' | tr -d '\n' 
```

要在文件上执行此操作，您可以执行以下操作（在 bash 中）：

```
while read; do 
  echo "$REPLY" | sed 's/[:=]/\n&/g' | sed '/^:/s/ /_/g' | tr -d '\n'
  echo
done < infile 
```

虽然`awk`将是更适合该任务的工具：

```
awk -F '[:=]' '{ gsub(" ", "_", $2); print $1 ":" $2 "=" $3 }' infile 
```

# java - 如何将 dojox.charting.Chart 转换为 PNG 图像供用户导出？

> ID：12561827
> 
> 赞同：1
> 
> 时间：2012-09-24T09:03:16.150
> 
> 标签：java, dojo, webkit, png, batik

DOJO 正在开发的我的项目中有一个新要求，即用户可以将图表导出为 PNG 图像。我进行了一项研究，发现了两个想法：

1，尝试在DOJO API中找到合适的方法直接导出为PNG图像（因为我与Ext JS相似，它提供了导出到图像的API方法），但是DOJO图表没有方法可以做到这一点。

使用 dojox.fx 或 dojox.gfx 等 DOJO API 绘制图像，但这些无法生成图像。所以我放弃了这条路。

2、使用第三方插件实现。首先，我可以通过 'dojox.gfx.utils.toSvg(chart.surface).then' 方法获取图表的表面内容，然后使用 Apache 的插件 Batik 将 SVG 内容转换为 PNG 图像。以下是我的尝试代码：

```
dojox.gfx.utils.toSvg(chart.surface).then(function(svg) {
    var args = {
        url : "chart/doExportChart.action",
        content : {
            svgContent : svg
        },
        handleAs : "json",
        load : function(response) {
            // Do something like exporting the responded image.
        },
        error : function(error) {
            // Error handling
        }
    };

    dojo.xhrPost(args);
    }, 
    function(error) {
        // Error handling
    }
); 
```

并且 doExportChart 方法执行以下操作：

```
JPEGTranscoder t = new JPEGTranscoder();

// Set the transcoding hints.
t.addTranscodingHint(JPEGTranscoder.KEY_QUALITY, new Float(.8));

// Create the transcoder input.
String svgURI = new File("c:/sample.svg").toURL().toString();
TranscoderInput input = new TranscoderInput(svgURI);

// Create the transcoder output.
OutputStream ostream = new FileOutputStream("c:/sample.jpg");
TranscoderOutput output = new TranscoderOutput(ostream);

 // Save the image.
 t.transcode(input, output);

// Flush and close the stream.
 ostream.flush();
ostream.close(); 
```

SVG sample.svg 的内容如下：

```
svg xmlns=httpwww.w3.org2000svg width=1200 height=589defsrect fill=rgb(255, 255, 255) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=41.5 y=13.666666666666666 width=1142 height=528.5 fill-rule=evenoddg transform=matrix(1.00000000,0.00000000,0.00000000,0.00000000,0.00000000,541.16666667)gpolyline fill=none fill-opacity=0 stroke=rgb(204, 204, 204) stroke-opacity=1 stroke-width=1.7 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 points=42.50000000 14.66666667 90.00000000 242.63573883 137.50000000 191.97594502 185.00000000 126.84192440 232.50000000 242.63573883 280.00000000 201.02233677 327.50000000 159.40893471 375.00000000 541.16666667 422.50000000 343.95532646 470.00000000 220.92439863 517.50000000 146.74398625 565.00000000 224.54295533 612.50000000 240.82646048 660.00000000 110.55841924 707.50000000 249.87285223 755.00000000 161.21821306 802.50000000 195.59450172 850.00000000 320.43470790 897.50000000 318.62542955 945.00000000 282.43986254 992.50000000 286.05841924 1040.00000000 349.38316151 1087.50000000 210.06872852 1135.00000000 286.05841924 1182.50000000 329.48109966 stroke-dasharray=none polyline fill=none fill-opacity=0 stroke=rgb(191, 19, 19) stroke-opacity=1 stroke-width=1.5 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 points=42.50000000 14.66666667 90.00000000 242.63573883 137.50000000 191.97594502 185.00000000 126.84192440 232.50000000 242.63573883 280.00000000 201.02233677 327.50000000 159.40893471 375.00000000 541.16666667 422.50000000 343.95532646 470.00000000 220.92439863 517.50000000 146.74398625 565.00000000 224.54295533 612.50000000 240.82646048 660.00000000 110.55841924 707.50000000 249.87285223 755.00000000 161.21821306 802.50000000 195.59450172 850.00000000 320.43470790 897.50000000 318.62542955 945.00000000 282.43986254 992.50000000 286.05841924 1040.00000000 349.38316151 1087.50000000 210.06872852 1135.00000000 286.05841924 1182.50000000 329.48109966 stroke-dasharray=none ggrect fill=rgb(255, 255, 255) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=0 y=0 width=42.5 height=590 fill-rule=evenoddrect fill=rgb(255, 255, 255) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=1182.5 y=0 width=18.5 height=591 fill-rule=evenoddrect fill=rgb(255, 255, 255) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=0 y=0 width=1201 height=14.666666666666666 fill-rule=evenoddrect fill=rgb(255, 255, 255) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=0 y=541.1666666666666 width=1201 height=49.83333333333333 fill-rule=evenoddgline fill=none fill-opacity=0 stroke=rgb(51, 51, 51) stroke-opacity=1 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x1=42.5 y1=541.1666666666666 x2=1182.5 y2=541.1666666666666 stroke-dasharray=none ggline fill=none fill-opacity=0 stroke=rgb(51, 51, 51) stroke-opacity=1 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x1=42.5 y1=541.1666666666666 x2=42.5 y2=14.666666666666666 stroke-dasharray=none line fill=none fill-opacity=0 stroke=rgb(102, 102, 102) stroke-opacity=1 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x1=42.5 y1=427.1821305841924 x2=36.5 y2=427.1821305841924 stroke-dasharray=none text fill=rgb(51, 51, 51) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=32.5 y=430.91546391752576 text-anchor=end text-decoration=none rotate=0 kerning=auto text-rendering=optimizeLegibility font-style=normal font-variant=normal font-weight=normal font-size=7pt font-family=Tahoma fill-rule=evenodd100textline fill=none fill-opacity=0 stroke=rgb(102, 102, 102) stroke-opacity=1 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x1=42.5 y1=246.25429553264598 x2=36.5 y2=246.25429553264598 stroke-dasharray=none text fill=rgb(51, 51, 51) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=32.5 y=249.9876288659793 text-anchor=end text-decoration=none rotate=0 kerning=auto text-rendering=optimizeLegibility font-style=normal font-variant=normal font-weight=normal font-size=7pt font-family=Tahoma fill-rule=evenodd200textline fill=none fill-opacity=0 stroke=rgb(102, 102, 102) stroke-opacity=1 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x1=42.5 y1=65.32646048109962 x2=36.5 y2=65.32646048109962 stroke-dasharray=none text fill=rgb(51, 51, 51) fill-opacity=1 stroke=none stroke-opacity=0 stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=4 x=32.5 y=69.05979381443295 text-anchor=end text-decoration=none rotate=0 kerning=auto text-rendering=optimizeLegibility font-style=normal font-variant=normal font-weight=normal font-size=7pt font-family=Tahoma fill-rule=evenodd300textgsvg 
```

然后运行上面的代码遇到错误：

```
Exception in thread "main" org.apache.batik.transcoder.TranscoderException: null
Enclosed Exception:
Content is not allowed in prolog.
    at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:136)
    at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:156)
    at com.ibm.crl.poc.util.PocImageUtil.main(PocImageUtil.java:142) 
```

[我按照http://xmlgraphics.apache.org/batik/using/transcoder.html](http://xmlgraphics.apache.org/batik/using/transcoder.html)的官方示例做第二个解决方案。我不知道，希望有人能给我指导。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:43:28.703

如果您的意图是支持旧版浏览器，那么使用 svg 根本不是一种选择。2006 年以后的大多数浏览器版本都有一些基本支持 - 但是对于 Internet Explorer IE8 和更早版本需要插件来呈现 SVG 内容。

**@蜡染例外**；看起来外部源解析失败（有搜索此问题和样式语法的错误）。很难在上面的在线网站中停止任何内容，但尝试下载 xmlns 并将其提供在与 sample.svg 相同的域中（或尝试将其排除在外），如此[处建议](https://stackoverflow.com/questions/10448424/processing-xml-based-dsl)

除非您要求图像具有完全相同的外观和感觉，否则该方法可能略有偏差。您可以使用该系列，用于图表而不是转换 SVG，通过[JFreeChart](http://www.jfree.org/jfreechart/)或类似工具创建绘图。

无论哪种方式，您都不能指望 javascript 生成 PNG，所涉及的算法是......麻烦 :)

最后一个选项是让您的图表呈现在一个框架中，使页面非常简单且快速呈现（创建一个 dojolayer 以避免 100 多个请求）。然后，一旦客户端请求图像导出，就从服务器端获取此帧的“快照”。这将确保存在对 SVG 的支持并提供序列化结果。例如：

客户端：

```
<iframe
     width=700
     height=400
     src="chart/doRenderChart.action?unid=howto_identify_graph"></iframe> 
```

服务器端，一旦用户点击“导出”：

```
doExportAction(HttpServletRequest req, HttpServletResponse resp) throws IOException {
   String chart = req.getParameter('url') 
         = "chart/doRenderChart.action?unid=howto_identify_graph";
   int width = 700;
   int height = 400;
   File f = File.createTempFile("prefix",null,myDir);
   String tmpfile = f.getName();
   f.delete();
   Process p=Runtime.getRuntime().exec("/path/to/bin/wkhtmltoimage "+
        "--crop-h " + height + 
        " --crop-w " + height + " " +
          chart + 
        " -f png " + 
          tmpfile
   ); 
   p.waitFor();
   // get and serve 'tmpfile' contents
} 
```

这是[WKHtmlToXX的项目](http://code.google.com/p/wkhtmltopdf/)

# matlab - 如何在 Matlab 中创建将某些值固定为特定颜色的堆积条形图？

> ID：12561831
> 
> 赞同：2
> 
> 时间：2012-09-24T09:03:28.323
> 
> 标签：matlab, plot

我正在尝试制作一个堆积条形图，该图应该显示不同类型的岩石如何随深度变化。我根据一些真实数据生成了一些虚构的岩性系列，并希望以一种可读的方式呈现它们。所以现在我有这个矩阵`A`：

```
A =

2.0000   65.0000
1.0000   19.5000
2.0000    0.5000
4.0000    1.5000
2.0000   58.0000
4.0000    2.0000
2.0000   22.5000
3.0000    7.0000
2.0000   14.5000
3.0000   12.5000
4.0000    2.5000
2.0000   31.5000
1.0000   20.0000
2.0000   20.0000
1.0000   15.5000
2.0000   66.0000
4.0000    0.5000
2.0000    2.5000
3.0000    8.0000
2.0000   61.0000
1.0000   17.5000
2.0000    8.0000
5.0000   19.5000
3.0000   24.5000 
```

其中第一列代表不同的岩石类型，第二列代表每个岩性层的厚度（以米为单位）。现在我想把它绘制成一个核心数据日志。所以从 1 到 5 的每种岩石类型都应该有一种特定的颜色，每个颜色条的粗细应该代表该岩石类型的厚度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:39:10.340

## 每种类型的聚合

您可以使用[accumarray](http://www.mathworks.nl/help/matlab/ref/accumarray.html)找到每种岩石类型的总厚度：

```
total_type_thickness = accumarray(A(:,1),A(:,2)); 
```

它将第二列的所有值与第一列中相同的数字相加。因此，对于您的示例数据，这将返回：

```
total_type_thickness =

   72.5000
  349.5000
   52.0000
    6.5000
   19.5000 
```

困难在于将其显示为单个堆叠条，您可以尝试使用此解决方法：

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/57304](http://www.mathworks.com/matlabcentral/newsreader/view_thread/57304)

这会给您留下一个空列，您可以通过设置 x 限制来隐藏它：

```
bar([total_type_thickness'; zeros(size(total_type_thickness'))],'stacked');
xlim([0.25 1.75])
% add a legend with 'Rock Type <ii>'
legend(arrayfun(@(ii) sprintf('Rock type %d',ii), 1:length(total_type_thickness), 'uni',false)); 
```

![在此处输入图像描述](../Images/923a380ba04c6c9387e57d4cbbd882af.png)

目前，我还没有找到更好的选择，因为如果您输入矢量数据，matlab 不会堆叠条形图，在这种情况下它会分别绘制条形图。

## 显示所有值，每种类型的颜色相同

对于绘制所有数据（所有层），您可以使用相同的方法，但现在使用颜色图手动设置颜色数据：

```
N = size(A,1); % number of layers
M = max(A(:,1)); % number of different rock types

bar([A(:,2)' ; NaN(1,N)],'stacked','facecolor','flat');
xlim([0.25 1.75])

cc = jet(M); % create colormap with N different colors
colormap(cc(A(:,1),:)); % pick for each layer, the correct color and use it as a colormap 
```

为了更容易添加图例，我将`M`在原始数据中添加虚拟值：

```
bar([NaN(1,M)  A(:,2)' ; NaN(1,N+M)],'stacked','facecolor','flat');
xlim([0.25 1.75])

cc = jet(M); % create colormap with N different colors
colormap(cc([(1:M)' ;A(:,1)],:)); % pick for each layer, the correct color and use it as a colormap 
```

现在`M`图例中的第一个元素将对应于 Rock 类型 1,2,.. M：

```
 legend(arrayfun(@(ii) sprintf('Rock type %d',ii), 1:length(total_type_thickness), 'uni',false)); 
```

![在此处输入图像描述](../Images/9323fb3aa249edd23c45994f3926ea02.png)

# javascript - javascript/jquery 模拟锚点“tel”点击

> ID：12561832
> 
> 赞同：1
> 
> 时间：2012-09-24T09:03:31.080
> 
> 标签：javascript, jquery, anchor

我发现了很多关于使用 javascript 模拟锚点点击的消息。大多数使用“位置”功能，这对我不起作用，因为我不想在任何地方重定向。我的主播有 href="tel:..." 来调用 iphone 的电话功能。

我不能有一个点击的锚点，所以我想让 javascript/jquery 模拟用户按下按钮时的点击。我怎么能这样做（如果确实有可能的话）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:05:33.730

您可以在单击按钮时触发锚点的单击事件

```
$('#button1').on('click', function() {
    $('#anchor1').click();  // triggering the click event on click of the button
}); 
```

检查这个[小提琴](http://jsfiddle.net/sushanth009/HbqVp/1/)

```
$(function() {

    $('a').on('click' , function() {

       alert('Fired using button !!')
    });

    $('#button1').on('click' , function() {

       $('a').click();

        alert('Button Clicked !!')
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:05:52.303

尝试这个：

```
$(your_button).trigger('click') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:06:32.277

你可以触发点击事件......

```
$("a.phonenumber").click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:08:46.977

这是一个如何完成此操作的简单示例 -

```
$(function(){
    $("#b1").on('click',function(){
      alert("pressed b1!");
    });        

     $("#b2").on('click',function(){
      $("#b1").trigger('click');
      alert("pressed b2!");
    });        
});​ 
```

单击第一个`b1`按钮将触发警报。单击第二个`b2`按钮时，首先我们“触发”第一个按钮上的单击事件（将执行它的警报），然后警报第二个值。

### [演示](http://jsfiddle.net/wMT2r/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-03T22:29:28.993

我知道问题要求不要使用定位功能，但请尝试一下：

HTML：

```
<button class="click-to-call" data-phone="2125551234">call</button> 
```

jQuery：（如果你愿意，也可以很容易地只用 javascript 编写）

```
$('.click-to-call').on('click',function(){
    window.location.assign('tel:'+ $(this).data('phone'));
}); 
```

# python - 使用 pyes 构建 ElasticSearch 搜索

> ID：12561837
> 
> 赞同：3
> 
> 时间：2012-09-24T09:03:38.957
> 
> 标签：python, elasticsearch, pyes

此示例代码的目标是弄清楚如何创建由多个过滤器和查询组成的查询。

以下示例未按预期工作。

1.  我希望能够仅对包含某个“密钥”的文档执行搜索。这就是我试图通过 ExistsFilter 达到的目标，但是启用时我没有得到任何结果。

有什么指示可以解决这个问题吗？

```
#!/usr/bin/python

import pyes
conn = pyes.ES('sandbox:9200')
conn.index('{"test":{"field1":"value1","field2":"value2"}}','2012.9.23','test')

filter = pyes.filters.BoolFilter()
filter.add_must(pyes.filters.LimitFilter(1))
filter.add_must(pyes.filters.ExistsFilter('test')) #uncommenting this line returns the documents

query = pyes.query.BoolQuery()
query.add_must(pyes.query.TextQuery('test.field1','value1'))
query.add_must(pyes.query.TextQuery('test.field2','value2'))

search = pyes.query.FilteredQuery(query, filter)

for reference in conn.search(query=search,indices=['2012.9.23']):
    print reference 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:50:53.573

我不使用 pyes （也不是 python）。但是，我在这里看到的是，如果与[ExistsFilter](http://www.elasticsearch.org/guide/reference/query-dsl/exists-filter.html)文档进行比较，ExistsFilter 中似乎缺少一些信息：

```
{
    "constant_score" : {
        "filter" : {
            "exists" : { "field" : "user" }
        }
    }
} 
```

会不会是你的问题？

# ios - iOS6 获取和设置 cookie 到 UIWebView

> ID：12561838
> 
> 赞同：0
> 
> 时间：2012-09-24T09:03:43.930
> 
> 标签：ios, cookies, uiwebview, ios6

我有一个使用 cookie 进行身份验证的 HTML5 Web 应用程序。在 iOS6 中，它从服务器接收 cookie 时遇到一些问题，即出站请求不会像以前一样在标头中包含 cookie。我想出了从http请求中请求会话ID的想法，并将其放入某个位置（可能是NSHTTPCookieStorage？），然后来自UIWebView的所有请求都将包含cookie，然后大部分html5代码都不必更改..

这是正确的方法吗？如果是，如何实施？谢谢。

# iphone - 如何在 iPhone 中解析带空格的 xml 标签？

> ID：12561846
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:04:24.817
> 
> 标签：iphone, ios, xml, xml-parsing

```
<Messages> <Message activeFrom="2012-05-19T00:00:00+05:30" activeUpto="2012-12-31T00:00:00+05:30" createdById="1" createdByName="admin admin" createdOn="2012-05-19T15:23:56+05:30" description="As per client requirement AASTHA MULTIMEDIA is a multimedia education academy where students can innovatively create new designs with the help of advanced technology in multimedia which consider waterfall methodology.As per client requirement AASTHA MULTI" id="61" imageURL="3c1b77f9-2142-440d-ae8a-d0cbe2769c83.jpg" isActive="T" isTargetedToAffiliation="F" lastModifiedOn="2012-07-06T17:58:09+05:30" messageSubject="Consumer testing working with the wizeowl portal" organizationid="283" organizationImageName="b38e78fd-0f44-4a32-8d6e-35ca47d79dc4.png" organizationname="Biggin Scott" lastModifiedById="1" lastModifiedByName="admin admin"/> <Message activeFrom="2012-09-18T00:00:00+05:30" activeUpto="2012-09-30T00:00:00+05:30" createdById="495" createdByName="Jayul Mehta" createdOn="2012-05-21T15:16:57+05:30" description="test. http://www.google.com" id="62" imageURL="618dae63-9861-4702-add7-fea06cf2f403.png" isActive="T" isTargetedToAffiliation="F" lastModifiedOn="2012-08-30T12:15:09+05:30" messageSubject="test" organizationid="325" organizationImageName="2cc2c83e-144d-4687-b087-ef459ee4e3a1.jpg" organizationname="test org without email and web address" lastModifiedById="1" lastModifiedByName="admin admin"/> </Messages> 
```

这是我需要解析的字符串...我可以知道有两个“消息”对象...但是我无法获得其中的值。

未调用以下方法。

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
```

请回复如何解析这种类型的XML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:07:38.287

使用 TBXML 解析 XML 内容.. [http://tbxml.co.uk/](http://tbxml.co.uk/)

或查看本教程教程以获取 NSXML[链接](http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:07:57.420

使用本指南[How to choose the best xml parser...](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)，我发现 TBXML 是您的最佳选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:21:00.287

```
 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
attributes:(NSDictionary *)attributeDict {

   if([elementName isEqualToString:@"Message"]){
         NSString *activeFrom=[attributeDict valueForKey:@"activeFrom"];
         NSString *activeUpto=[attributeDict valueForKey:@"activeUpto"];
         NSString *createdById=[attributeDict valueForKey:@"createdById"];
         NSString *createdByName=[attributeDict valueForKey:@"createdByName"];
         NSString *description=[attributeDict valueForKey:@"description"];

         ....... so on ......

   }

} 
```

@Dimple 以您想要的方式从 xml 字符串中获取值，您可以从委托方法 didStartElement 传递的 attributeDict 参数中获取它。用上面的代码片段覆盖代码中的 didStartElement 方法。希望这会帮助你。

# magento - Magento 两次保存产品

> ID：12561847
> 
> 赞同：0
> 
> 时间：2012-09-24T09:04:26.267
> 
> 标签：magento

当我按照[以下文章](http://fishpig.co.uk/blog/custom-tabs-magento-product-admin.html)进行操作时，Magento 会双重保存产品。

我添加了一个额外的字段，允许客户将博客文章链接到产品，但是当我把它放在`$product->save()`那里时，它会双重保存产品。当您同时添加图像（或创建新产品）时，这会导致双图像

编辑：

下面是它保存的代码

```
public function saveProductTabData(Varien_Event_Observer $observer)
{
if (!self::$_singletonFlag) {
    self::$_singletonFlag = true;

    $product = $observer->getEvent()->getProduct();

    try {
        /**
         * Perform any actions you want here
         *
         */

        $customFieldValue =  $this->_getRequest()->getPost('blogIDs');

        if(!empty($customFieldValue)){$blogIds = implode(',', @$customFieldValue);}

            if(!empty($blogIds)) { $product->setBlogids($blogIds);                } else { $product->setBlogids('0'); }    
        /**
         * Uncomment the line below to save the product
         *
         */
       // $product->save();
    }
    catch (Exception $e) {
        Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
    }
}
} 
```

并在 config.xml

```
 <events>
        <catalog_product_save_before>
            <observers>
                <pmit_save_product_data>
                    <type>singleton</type>
                    <class>blogextend/observer</class>
                    <method>saveProductTabData</method>
                </pmit_save_product_data>
            </observers>
        </catalog_product_save_before>
    </events> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:59:58.630

最好使用`catalog_product_save_before`事件。在您的观察者中，您应该只设置值，而不保存产品。

# android - phonegap 界面切换慢

> ID：12561852
> 
> 赞同：0
> 
> 时间：2012-09-24T09:04:49.413
> 
> 标签：android, cordova, jquery-mobile

我使用Phonegap进行开发但在android平台上运行缓慢这是什么原因

这是我写的两页代码：

登录代码：

```
<script type="text/javascript">
function verify()
{
    var myurl = "main1.html" + "?"+ wifiConfig
    if($("#devicePassword").val()==jsonObj.dockmatePassword){
         window.location.assign(myurl);
    }else{
         alert("error");
    }
}
</script>
   <body onLoad="loadpage()"> 
    <form data-role="controlgroup">
    <br><label for="userpassword">密码:</label><br>
    <input type="password" id="devicePassword" name="userpassword"/> 
    <input type="button" data-inline="true" value="确认" onClick="verify()"/>
    </form>
   </body> 
```

mian1.html 代码：

```
<script type="text/javascript">
function getConfigInfo(){

    var url = location.href;

    var t=url.split("?")[1];

    var tmp = t.split("$");

    wifiConfig=decodeURI(tmp[0]);                   
    }
}
</script>
<body onLoad="getConfigInfo()"> 
<li id="version"><a>版本<label id="versions"></label</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:44:35.483

您可以做的最好的事情是远离 Jquery Mobile 的 phonegap 应用程序。毫无疑问，jQuery Mobile 是最好的移动框架，可能适用于移动网站。但对我来说，Jquery Mobile 是 phonegap 应用程序性能最差的框架。

将这两个页面制作成一个 HTML 文件，并使用 JQTouch 等框架使其像应用程序页面一样有效。

如果您在 phonegap 应用程序中使用不同的 HTML 文件，页面之间的转换会变慢。

# python - jquploader + bottle.py - 无法正常工作:(

> ID：12561853
> 
> 赞同：0
> 
> 时间：2012-09-24T09:04:50.463
> 
> 标签：python, file-upload, web

我有一个简单的 bottle.py 应用程序，可以让我上传文件。现在，由于这些文件可能很大，我想要一个进度条。我发现 jqUploader 看起来正是我想要的，但现在我无法让它工作。当我有自己的表单时，我的上传工作完美，但现在我不知道如何正确访问数据了。

py:

```
@route('/upload')
def upload():
  return static_file('upload_form.html', root='html')

@post('/load_from_file')
def load_from_file():
  print("Uploading...")
  name = request.forms.name
  data = request.files.myFile3
  print(data)
  filename = data.filename
  with open(os.path.join("C:\\", filename), "wb") as file_object:
      bytes = 0
      while True:
          datachunk = data.file.read(1024)
          if not datachunk:
              break            
          file_object.write(datachunk)
          bytes  += len(datachunk)
  return "Hello %s! You uploaded <b>%s</b>." % (name, filename) 
```

HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jqUploader demo</title>
    <link rel="stylesheet" type="text/css" media="screen" href="static/style.css"/>
    <script type="text/javascript" src="static/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="static/jquery.flash.js"></script>
    <script type="text/javascript" src="static/jquery.jqUploader.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#example1').jqUploader({
                debug:0
                ,background:'FFFFDF'
                ,barColor:'FFDD00'
                ,allowedExt:'*.txt; *.xml;'
                ,allowedExtDescr: 'what you want'
                ,validFileMessage: 'Thanks, now hit Upload!'
                ,endMessage: 'and don\'t you come back ;)'
                ,hideSubmit: false
            });
            $("#example2").jqUploader({
                afterScript:    "redirected.php",
                background: "FFFFDF",
                barColor:   "64A9F6",
                allowedExt:     "*.avi; *.jpg; *.jpeg; *.png",
                allowedExtDescr: "Images and movies (*.avi; *.jpg; *.jpeg; *.png)"
            });

            $("#example3").jqUploader({
            background: "FFFFDF"
            ,barColor:  "FF00FF"
            ,allowedExt:'*.txt; *.xml;'
            ,allowedExtDescr: 'what you want'
            ,validFileMessage: 'Thanks, now hit Upload!'
            });
        });
    </script>
</head>
<body>
        <h3>The form</h3>
        <form enctype="multipart/form-data" action="/load_from_file" method="POST" class="a_form">
            <fieldset>
                <legend>Upload your file</legend>
                <ol>
                    <li id="example3">
                        <label for="example3_field">Choose a file to upload:</label>
                        <input name="myFile3" id="example3_field"  type="file" />
                    </li>
                </ol>
            </fieldset>
            <input type="submit" name="submit" value="Upload File" />
        </form>

    </div>
</body> 
```

错误：

> AttributeError：“str”对象没有属性“文件名”

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:19:07.600

这是工作代码（没有更改 html 或 js 中的任何内容）：

```
@route('/upload')
def upload():
    #Upload-Form
    return static_file('upload_form.html', root='html')

@post('/load_from_file')
def load_from_file():
    #Actual Uploading
    if request.POST.Upload == 'Submit Query':
        try:
            data = request.POST.Filedata.file
            filename = request.POST.Filename
            filepath = os.path.join(settings.FOLDERS["TEMP_WORKING"], filename)
            with open(filepath, "wb") as file_object:
                while True:
                    datachunk = data.file.read(1024)
                    if not datachunk:
                        break            
                    file_object.write(datachunk)
            process_files_upload(filepath)            
        except:
            print(traceback.format_exc())
        #Check if only uploaded or already finished
        return "Upload Finished"
    else:
        redirect('/upload') 
```

# java - 将 IP cam 查看器转换为 Java 小程序

> ID：12561856
> 
> 赞同：1
> 
> 时间：2012-09-24T09:04:58.893
> 
> 标签：java, applet, ip-camera

我想在我的小程序中嵌入一个 ipcam 查看器，以便任何人都可以访问小程序能够看到来自 ipcam 的实时流。

那么，有什么建议可以在 java 中执行此操作吗？

此致 阿里·泽因

# javascript - 部分视图中的 JQuery 未被调用

> ID：12561859
> 
> 赞同：1
> 
> 时间：2012-09-24T09:05:14.833
> 
> 标签：javascript, jquery, asp.net-mvc-3, partial-views

我有一个视图，它有一些 jQuery 将部分视图（通过按钮单击）加载到视图中的 div 中。这没有问题。然而，在局部视图中，我有一个非常相似的 jQuery，它将另一个局部视图加载到第一个局部视图中的 div 中，但这不起作用，似乎第一个局部视图中的 jQuery 不是加载。

我已经尝试寻找解决方案，但我还没有找到答案。我还在 a 中重新创建了 jQuery 函数，`@Ajax.ActionLink`它工作正常，但是当我尝试学习 jQuery 时，我试图避免使用 Microsoft 助手。

这是第一个包含似乎不起作用的 jQuery 的局部视图，它还包含起作用的 jQuery `@Ajax.ActionLink`：

```
@model MyProject.ViewModels.AddressIndexViewModel

<script>
    $(".viewContacts").click(function () {
        $.ajax({
            url: '@Url.Action("CustomerAddressContacts", "Customer")',
            type: 'POST',
            data: { addressID: $(this).attr('data-addressid') },
            cache: false,
            success: function (result) {
                $("#customerAddressContactsPartial-" + $(this).attr('data-addressid'))
                        .html(result);
            },
            error: function () {
                alert("error");
            }
        });
        return false;
    });
</script>
<table class="customers" style="width: 100%">
    <tr>
        <th style="width: 25%">
            Name
        </th>
        <th style="width: 25%">
            Actions
        </th>
    </tr>
</table>
    @foreach (Address item in Model.Addresses)
    {
    <table style="width: 100%; border-top: none">
        <tr id="address-id-@item.AddressID">
            <td style="width: 25%; border-top: none">
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td style="width: 25%; border-top: none">
                <a href="#" class="viewContacts standardbutton" data-addressid="@item.AddressID">ContactsJQ</a>
                @Ajax.ActionLink("Contacts", "CustomerAddressContacts", "Customer",
                    new { addressID = item.AddressID },
                    new AjaxOptions { UpdateTargetId = "customerAddressContactsPartial-" + @item.AddressID, HttpMethod = "POST" },
                    new { @class = "standardbutton"})
            </td>
        </tr>
    </table>
    <div id="customerAddressContactsPartial-@item.AddressID"></div>
    } 
```

如果有人可以解释我在这里做错了什么以及如何解决它，那么我将非常感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:08:33.733

你错过了

```
$(function(){
//code goes here
}) 
```

围绕剧本。该页面没有意识到要执行 jquery。

**编辑**

您可以在返回的脚本上使用 eval。像下面这样。我知道一种 hack，但仍然应该让你工作。

```
 function (data, textStatus, jqXHR)
            {
                var $scripts = undefined;
                if ($(data).has('script'))
                {
                    $scripts = $(data).filter('script');
                }
                //APPEND YOUR HTML To the page. then run the scripts that are contained.

                if ($scripts != undefined)

                    $scripts.each(function ()
                    {
                        if ($(this).attr('src') != '' && $(this).attr('src'))
                            $.getScript($(this).attr('src'));
                        else
                            eval(this.innerHTML || this.innerText);
                    });

            }; 
```

这将是ajax调用的成功函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:22:49.903

在控制器中我有行动。

```
public ActionResult ShowAllState()
        {
            return PartialView("_State", CityRepository.AllState);
        } 
```

“_State”是我的片面观点。

在视图中我有按钮。当我单击此按钮时，我的局部视图会显示所有状态数据。

```
<h5>
    Page Lode With Jquery</h5>
<input type="button" value="Lode Form" id="btnLode" />

<script type="text/javascript">
    $(function () {
        $("#btnLode").click(function () {
            $("#LodeForm").load("/City/ShowAllState", function () {
                alert("Your page loaded Successfully !!!!!!!");
            });
        });
    });

</script>

<div id="LodeForm">
</div> 
```

我在“LodeForm” div 中存储了我所有的状态数据。

我认为这对你有帮助....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:25:37.320

每次通过 ajax 重新加载元素时，都必须将点击处理程序重新附加到新加载的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T09:28:56.827

> 我还在 @Ajax.ActionLink 中重新创建了 jQuery 函数，它工作正常，但是我在尝试学习 jQuery 时试图避免使用 Microsoft 助手。

如果您不知道，在 ASP.NET MVC 3 中，Ajax.* 助手使用 jQuery，与使用 Microsoft Ajax 脚本的 ASP.NET MVC 2 不同。此外，将 javascript 代码放在您的视图和部分视图中也被认为是不好的做法。

我建议您在函数内的单独 javascript 文件中将其外部化。

```
function ajaxifyViewContactsLink() {
    $('.viewContacts').click(function () {
        $.ajax({
            url: this.href,
            type: 'GET',
            cache: false,
            context: this,
            success: function (result) {
                // see the updated markup of the partial below
                // that works with this:
                $(this).closest('.address')
                       .find('.results')
                       .html(result);
            },
            error: function () {
                alert("error");
            }
        });
        return false;
    });
} 
```

你还没有展示你是如何渲染这个部分的，我猜你再次使用了 AJAX，所以在`success`这个 AJAX 调用的回调中，一旦你将部分注入到 DOM 中，你就会调用该`ajaxifyViewContactsLink`函数。

现在您的部分只包含它应该包含的内容 - 标记：

```
@model MyProject.ViewModels.AddressIndexViewModel
<table class="customers" style="width: 100%">
    <tr>
        <th style="width: 25%">
            Name
        </th>
        <th style="width: 25%">
            Actions
        </th>
    </tr>
</table>
@foreach (Address item in Model.Addresses)
{
    <div class="address">
        <table style="width: 100%; border-top: none">
            <tr id="address-id-@item.AddressID">
                <td style="width: 25%; border-top: none">
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td style="width: 25%; border-top: none">
                    @Html.ActionLink(
                        "ContactsJQ", 
                        "CustomerAddressContacts", 
                        "Customer",
                        new { addressid = item.AddressID },
                        new { @class = "viewContacts" }
                    )
                </td>
            </tr>
        </table>
        <div class="results"></div>
    </div>
} 
```

# c++ - c1xx : 致命错误 C1083: 无法打开源文件 - 带有一些中文或爪哇语

> ID：12561861
> 
> 赞同：1
> 
> 时间：2012-09-24T09:05:19.590
> 
> 标签：c++, visual-studio, visual-studio-2012

我收到以下编译错误：**

4>c1xx : 致命错误 C1083: 无法打开源文件: '䀀∀䤀渀挀氀甀搀攀伥愀琀栀猀䘀漀爀䴀甀氀琀碗刀愀挀欀䌀漀爀攀䰀碗恋⸀琀砀琀∀': 没有这个文件或目录
4> ∀䐀㨀尀瀀㐀挀氀碗攀渀琀尀伥爀漀䄀甀搀碗漀尀搀攀开猀㄀㈀尀伥爀漀伀䔀搀碗漀伀伀搀搀氀伀爀搀搀尀伥爀漀䄀甀搀碗漀尀搀攀开尀堀伥氀愀琀昀漀爀洀尀䄀瀀瀀猀ⴀ䌀漀洀洀漀渀尀䌀漀搀攀尀吀栀爀攀愀搀猀尀圀䌀愀怀倀瀀攀愀愀愀怀瀀瀀愀愼爀⸀挀瀀瀀∀
4>c1xx：致命错误C1083：无法打开源文件：'∀䐀㨀尀瀀㐀挀氀碗攀渀琀尀伥爀漀䄀甀搀漀尀搀攀开猀㄀㈀尀伥爀漀䄀甀搀碗漀尀堀伥氀愀琀昀漀爀洀尀䄀瀀瀀猀ⴀ䌀漀洀洀漀渀尀䌀漀搀倈倜攀登愀渀搀䴀愀渀愀最攀爀⸀挀瀀瀀∀': 没有这个文件或目录
4> 匀漀甀爀挀攀猀尀圀䌀䰀漀最最攀爀⸀挀瀀瀀
4>c1xx : 致命错误C1083: 打不开源文件: '匀漀甀瀀挀攀猀尀圀䌀䰀漀最最攀爀⸀挀瀀瀀': 没有这个文件或目录
4> 匀漀甀爀挀攀猀尀圀䌀䴀甀氀琀碗刀愀挀欀䌀漀爀攀⸀挀瀀瀀
4>c1xx : 致命错误 C1083: 无法打开源文件: '匀漀甀爀挀攀猀尀圀䌀䴀甀氀琀碗刀愀挀欀䌀漀爀攀⸀挀瀀瀀': 没有这个文件或目录
4> 匀漀甀爀挀猀尀圀䌀䴀甀氀琀碗刀愀挀欀䌀漀爀攀开䄀伥䤀⸀挀瀀瀀
4>c1xx : 致命错误 C1083: 无法打开源文件: '匀刀漀甀爀挀攀猀尀圀䌀䴀甀氀琀碗愀挀欀䌀漀爀开攀䄀伥䤀⸀挀瀀瀀': 无此文件或目录
4>漀甀爀挀攀猀尀圀䌀䴀甀氀琀碗刀愀挀欀䌀漀爀攀开䄀甀搀碗漀⸀挀瀀瀀
4>c1xx：致命错误C1083：无法打开源文件： '匀漀甀爀挀攀猀尀圀䌀䴀甀圀䌀䴀甀攀氀琀碗刀愀挀欀䌀漀爀开䄀甀搀碗漀⸀挀瀀瀀'：没有这个文件或目录
4> 匀漀甀爀挀攀猀尀圀䌀䴀甀氀琀碗刀愀挀欀䌀漀爀攀开䄀甀搀碗漀䜀爀碗搀⸀挀瀀瀀

**有任何想法吗？
如何修复语言设置？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T09:18:58.803

解决了。

.vcxproj 文件中存在无效标志。

```
<Link>  
    <AdditionalOptions>%(AdditionalOptions)</AdditionalOptions>  
</Link> 
```

删除标志后问题消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T11:26:42.927

在将我们的解决方案从 VS2005 升级到 VS2012 时，我们遇到了同样的问题。问题出在 vcxproj 文件中。我们在命令行选项中有换行符。删除它后，我们的项目编译没有任何问题。

改变了这个

```
 <AdditionalOptions>/MP4 
/Zm200</AdditionalOptions> 
```

对此

```
 <AdditionalOptions>/MP4 /Zm200</AdditionalOptions> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:09:59.207

> **有任何想法吗？
> 如何修复语言设置？**

这不是语言问题。编译器无法打开您希望它编译的文件。这些文件存在吗？您是否从正确的目录调用编译器？

此外，如果您调用源文件`foo.cpp`、`bar.cpp`和`baz.cpp`. 我估计 80% 的潜在回答者将很难区分您的文件或发现他们名称中的简单拼写错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-02T14:51:42.850

重新启动 Visual Studio（VS2013）对我有用。据我了解，链接不正确，重新启动将有助于自动链接并解决 c1xx 问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-02T05:51:34.070

请按照以下步骤遇到此问题： 1\. 卸载您的项目 2\. 在 notepad++ 中打开 vcxproj 或 csproj 文件 3\. 从 -> 中删除条目 4\. 加载项目并尝试编译。

这将解决您的问题。谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-28T06:51:23.730

还要检查您在项目设置的标签中`Additional Options`指定的内容。`Command Line`编译器会将无选项参数视为源文件。

我曾经指定`/MP 1 (which should be /MP1)`和编译器抱怨说`C1083 Cannot open source file: '1': No such file or directory`。

# iphone - 为 iPhone（包括 iPhone 5）创建一个播放视频的应用程序

> ID：12561862
> 
> 赞同：0
> 
> 时间：2012-09-24T09:05:21.290
> 
> 标签：iphone, video, iphone-5

我们即将构建一个在 iPhone 上播放大量视频的应用程序。

但我们想知道新 iPhone 5 屏幕的最佳实践是什么。

我们将不得不以 960 x 640（传统 iPhone 显示器）或 1136 x 640（iPhone 5）输出视频。

无论哪种方式，我们都会有水平或垂直的黑条。

我们将有大约 300MB 的视频。

关于我们如何最好地解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:09:30.987

我建议对较大的尺寸进行编码，并让那些显示较小的显示器处理黑条。为什么？因为它保证了 iPhones < iPhone 5 会随着时间的推移而减少，而 iPhones >= iPhone 5 会增加。如果您要以任何一种方式出现黑条（编码两次并根据硬件选择哪一个是一种选择，尽管这可能不切实际），您不妨为未来做好计划。

# perl - 在 Gtk2-Perl 中使用窗口

> ID：12561864
> 
> 赞同：1
> 
> 时间：2012-09-24T09:05:27.470
> 
> 标签：perl, gtk

我正在开发一个 Gtk2-Perl 项目，我必须在其中创建一个 GUI。现在我必须做一件事，即每当用户选择“单个”单选按钮或“多个”单选按钮时，应该出现一个单独的屏幕，或者同一个窗口的内容应该改变。

例如：当用户选择 Single 时：他应该有 4 个按钮，但是当他选择 Multiple 时：他应该有 10 个按钮，以及更多的小部件。

有人可以帮助我在选择适当的单选按钮时创建一个包含相应小部件的弹出窗口。或者任何关于回调的帮助，我们可以在其中添加按钮和小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:09:21.877

您可以查看这些教程作为起点。

[http://gtk2-perl.sourceforge.net/doc/gtk2-perl-tut/](http://gtk2-perl.sourceforge.net/doc/gtk2-perl-tut/)

[http://soliton.ae.gatech.edu/people/jcraig/classes/ae6382/perl/gtkperl-tutorial/html/index.html](http://soliton.ae.gatech.edu/people/jcraig/classes/ae6382/perl/gtkperl-tutorial/html/index.html)

# php - Smarty 变量声明错误

> ID：12561881
> 
> 赞同：-3
> 
> 时间：2012-09-24T09:06:42.093
> 
> 标签：php, smarty

我有PHP代码：

```
$uid = $xUS['id'];  // Current user id
$uname = $xUS['x_username'];          // Current user name
$ulink = '';  // Current user profile URL (leave blank for none)
$upic = $xUS['config_forum_avator_head'];                // Current user
$ismod = 0;                 // Is current user a moderator?
$sig = md5($uid . $uname . $ismod . 's79tvi40k95bs6mw');
$ssoParams = '&uid=' . $uid . "&uname=" .
urlencode($uname) . "&ulink=" .       urlencode($ulink) . "&upic=" . urlencode($upic) 
.   "&ismod=" . $ismod . "&sig=" . $sig;</i> 
```

我的 Smarty 模板文件：

`<iframe width='550' height='500' src='http://chatroll.com/embed/chat/pibux-chatroom?id=tgybumotNmY&platform=php{$ssoParams}&w=$0' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' allowtransparency='true'></iframe>`

在这种情况下，`{$ssoParams}`变量返回一个空值。为什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:20:23.803

Read Smarty docs for example: [http://www.smarty.net/docsv2/en/language.variables.tpl#language.assigned.variables](http://www.smarty.net/docsv2/en/language.variables.tpl#language.assigned.variables)

You need to assign a variable like:

```
$smarty = new Smarty(); 
```

`$smarty->assign('ssoParams', $ssoParams); // assign(smarty var, PHP var);` `$smarty->display('template_file.tpl');`

And of course you need to include smarty files, define templates etc.

For basic working example look example 2.9\. here: [http://www.smarty.net/docsv2/en/installing.smarty.basic.tpl#id2778275](http://www.smarty.net/docsv2/en/installing.smarty.basic.tpl#id2778275)

# android - Mifare Classic 1k 写入密钥

> ID：12561882
> 
> 赞同：0
> 
> 时间：2012-09-24T09:06:49.717
> 
> 标签：android, nfc, mifare

我正在尝试制作一个 Android 应用程序来编写 NFC 标签。为了了解如何做到这一点，我下载了一个示例。但是，该示例不起作用。它说它无法进行身份验证。这只能意味着它为这种类型的卡使用了不正确的密钥。奇怪的是，甚至我的空白卡上的`KEY_DEFAULT`和`KEY_MIFARE_APPLICATION_DIRECTORY`键都不起作用。Mifare 是否以任何方式更改了密钥？

编辑：这是我的代码。

```
 /* Authenticate the MAD Sector, sector 1, with key A */
        succes = mClassic.authenticateSectorWithKeyA(
                1, key);
        if (succes) {
            /* Authentication succeeded */

            /*
             * This will read a 16-byte block in this sector
             * It is an I/O operation and will block until complete.
             * It must not be called from the main application thread.
             **/
            b.append(mClassic.readBlock(1), 0, 16);
            b.append(mClassic.readBlock(2), 0, 16);
            b.append(mClassic.readBlock(3), 0, 16);
            data = b.toByteArray();
        }
        /* Authentication failed */
        else
            sb.append("Authentication failed");
        mClassic.close();

    } 
```

我已经使用以下键进行了尝试：

```
MifareClassic.KEY_DEFAULT
MifareClassic.KEY_MIFARE_APPLICATION_DIRECTORY
00 00 00 00 00 00
ff ff ff ff ff ff 
```

都无济于事。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:53:22.733

我对 Ubiqconn 平板电脑不熟悉。我要做的第一件事是检查设备中的 NFC 实现是否真正支持 MIFARE。在您的主要活动中`onCreate()`添加：

```
public void onCreate(Bundle bundle) {
  ...
  if (!getPackageManager().hasSystemFeature("com.nxp.mifare")) {
    Toast.makeText(this, "No MIFARE support!", Toast.LENGTH_LONG).show();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:11:36.940

您的应用程序中存在错误，或者密钥已被自定义。使用 NFC [TagInfo 之](https://play.google.com/store/apps/details?id=at.mroland.android.apps.nfctaginfo)类的应用程序检查您是否可以使用默认密钥读取/写入卡片。如果它不起作用，请联系向您出售卡片的人并询问他们的钥匙是什么。

# c# - 没有 ThreadPool 的 C# 线程重用

> ID：12561883
> 
> 赞同：2
> 
> 时间：2012-09-24T09:06:53.813
> 
> 标签：c#, threadpool, reusability

我有几个相同类的实例。在类的生命周期中，对此类的每个方法调用都应该在同一个线程上执行。但是对于每个实例，我都需要一个不同的线程。我想过Threadpool，但似乎我对它的控制太少了。

如何在不使用 ThredPool 的情况下重用线程？

谢谢！马丁

编辑（为什么需要这个）：我必须使用 win32 dll 来访问第三方产品的业务逻辑。此 dll 不是为多线程环境（如 Web 应用程序）设计的。当我在 ASP 经典模式（STA 线程）下运行我的 ASP.NET MVC 应用程序时，到目前为止一切正常。但问题是所有用户都会互相阻止。该组件还维护一些状态。一旦不同的线程访问此组件，它就无法识别我必须为每个方法调用传递的连接句柄。登录过程后我得到了连接句柄。我想再次将我的 Web 应用程序置于 MTA 模式并使用工作者概念，将大约 10 个用户分配给一个工作者（最多 10 个用户应该互相阻止）。一名工作人员应该始终使用同一个线程来执行 api 调用，这样组件就不会发生故障。我'

**更新 - 找到解决方案：** 感谢 Ami Bar 的“智能线程池”，我可以（轻松）完成我正在寻找的行为。对于每个工作人员，我现在拥有自己的线程池实例，其中一个线程的最大和最小数量。好吧，这不是线程池的想法，但它使处理工作项变得非常容易，而且它还有一些不错的其他功能。Web 应用程序现在正在 MTA 上运行。我将准备一些负载测试，看看它在几个小时内是否稳定。见这里： http: [//www.codeproject.com/Articles/7933/Smart-Thread-Pool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)

# solr - Solr - 删除特定的标点符号

> ID：12561884
> 
> 赞同：1
> 
> 时间：2012-09-24T09:06:57.687
> 
> 标签：solr, solrj

我在 Windows 机器上使用 apache-solr-3.6.0。我想在索引之前删除所有标点符号，除了冒号和句号。

我试过：

```
<fieldType name="text_ar" class="solr.TextField" positionIncrementGap="100">
      <analyzer> 
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.PatternReplaceFilterFactory" pattern="[\p{Punct}&&[^\.^\:]]" replacement="" replace="all"/>
      </analyzer>
    </fieldType> 
```

但它没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:22:22.417

使用以下模式过滤器代替您的。

```
<filter class="solr.PatternReplaceFilterFactory" pattern="([^a-zA-Z0-9.:])" replacement="" replace="all"/> 
```

# c++ - 太空射击游戏中的 3D 音效

> ID：12561887
> 
> 赞同：2
> 
> 时间：2012-09-24T09:07:11.790
> 
> 标签：c++, soundpool, stereo-3d

我正在尝试为我的太空射击游戏实现 3d 音响系统。我已经准备好了一切（在每一侧播放不同音量的声音等），但我找不到正确的公式来计算每一侧的正确音量。

总体思路是，每次玩家（舰船）击杀敌人（摄像机始终在舰船顶部）时，都会听到左右音量正确的爆炸声。所以如果敌人在船的右边，那么右边的频道会被听到更多，左边的情况也是如此。

所以我有

```
vector ship
vector enemie 
```

和

```
playSound(left ? ,right ?) 
```

游戏引擎是如何计算左右声道的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:47:37.390

最后我解决了。我使用了类似于 Ameoo 所说的东西。

这里是：

```
void Play3D(int id,vector3d ship,vector3d pos,float arenaWidth,float power)
{
    float disright=calculate_distance(ship.x+0.2f,ship.y,pos.x,pos.y);
    float disleft=calculate_distance(ship.x-0.2f,ship.y,pos.x,pos.y);
    sf.Play(2,1-disleft/arenaWidth*power,1-disright/arenaWidth*power);
} 
```

# c# - C# 错误检查唯一性和低于和高于上市价格

> ID：12561888
> 
> 赞同：0
> 
> 时间：2012-09-24T09:07:15.793
> 
> 标签：c#

我需要在数据输入期间检查 ISBN 是否唯一，并列出该书的更低或更高价格。我试图显示价格，但我只能显示输入的确切价格。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Assignment_3
{
class Program
{
    public static List<Book> book = new List<Book>();
    public static List<BookCategory> bc = new List<BookCategory>();

    static void Main(string[] args)
    {
        int option;
        bc.Add(new BookCategory("Comedy"));
        bc.Add(new BookCategory("Horror"));
        bc.Add(new BookCategory("Adventure"));
        do
        {
            Console.WriteLine("\t\t----------------------------------------------");
            Console.WriteLine("\t\t|\t1\. Add new book information          |");
            Console.WriteLine("\t\t|\t2\. Search book information           |");
            Console.WriteLine("\t\t|\t3\. Display book information          |");
            Console.WriteLine("\t\t|\t4\. Display book category             |");
            Console.WriteLine("\t\t|\t5\. Exit                              |");
            Console.WriteLine("\t\t----------------------------------------------");
            Console.Write("Please choose an option : ");
            option = int.Parse(Console.ReadLine());
            Console.WriteLine();

            switch (option)
            {
                case 1: Add(book,bc);
                    break;
                case 2: Search(book,bc);
                    break;
                case 3: Display(book, bc);
                    break;
                case 4: Compare(bc);
                    break;
                case 5: Environment.Exit(0);
                    break;
                default: Console.WriteLine("You have entered an invalid option ! ");
                    break;
            }
        } while (option != 5);
        Console.Read();
    }

    static void Add(List<Book> b, List<BookCategory> bc)
    {
        string title, isbn, author, bookCategory;
        double price;
        Console.Write("Enter the book title : ");
        title = Console.ReadLine();
        Console.Write("Enter the ISBN of the book : ");
        isbn = Console.ReadLine();
        Console.Write("Enter the author of the book : ");
        author = Console.ReadLine();
        Console.Write("Enter the book category <Adventure | Horror | Comedy> : ");
        bookCategory = Console.ReadLine();
        Console.Write("Enter the price of the book : ");
        price = double.Parse(Console.ReadLine());
        b.Add(new Book(title, isbn, author, bookCategory, price));

        if (bookCategory == "Comedy")
        {
            BookCategory tempBookObj = bc.Find(delegate(BookCategory bcg)
            {
                return bcg.CategoryName.Equals("Comedy");
            });
            tempBookObj.BookNo++;
        }

        if (bookCategory == "Horror")
        {
            BookCategory tempBookObj = bc.Find(delegate(BookCategory bcg)
            {
                return bcg.CategoryName.Equals("Horror");
            });
            tempBookObj.BookNo++;
        }

        if (bookCategory == "Adventure")
        {
            BookCategory tempBookObj = bc.Find(delegate(BookCategory bcg)
            {
                return bcg.CategoryName.Equals("Adventure");
            });
            tempBookObj.BookNo++;
        }

        else
        {
            Console.WriteLine("Please enter the book category according to the list ! ");
        }
    }

    public static void Search(List<Book> b, List<BookCategory> bc)
    {
        int option;
        string target, target1;
        double target2;
        List<Book> book1 = new List<Book>();
        Console.WriteLine("\t\t--------------------------------------");
        Console.WriteLine("\t\t|\t1\. ISBN                      |");
        Console.WriteLine("\t\t|\t2\. Book Title                |");
        Console.WriteLine("\t\t|\t3\. Book Price                |");
        Console.WriteLine("\t\t|\t4\. Back to main menu         |");
        Console.WriteLine("\t\t--------------------------------------");
        Console.Write("Please choose an option : ");
        option = int.Parse(Console.ReadLine());
        Console.WriteLine();

        switch (option)
        {
            case 1: Console.Write("Enter the ISBN of book to be searched : ");
                target = Console.ReadLine();
                Book result = b.Find(delegate(Book bk)
                {
                    return bk.ISBN.Equals(target);
                });

                if (result == null)
                    Console.WriteLine("Product not found !");
                else
                    Console.WriteLine(result);
                break;

            case 2: Console.Write("Enter the title of book to be searched : ");
                target1 = Console.ReadLine();
                Book result1 = b.Find(delegate(Book bk)
                {
                    return bk.Title.Equals(target1);
                });
                if (result1 == null)
                    Console.WriteLine("Product not found !");
                else
                    Console.WriteLine(result1);
                break;

            case 3: Console.Write("Enter the price of book to be searched : ");
                target2 = double.Parse(Console.ReadLine());
                Book result2 = b.Find(delegate(Book bk)
                {
                    return bk.Price.Equals(target2);
                });

                if (result2 == null)
                    Console.WriteLine("Product not found !");
                else
                    Console.WriteLine(result2);
                break;

            case 4: 
                break;
        }
    }

    public static void Display(List<Book> b, List<BookCategory> bc)
    {
        b.Sort();
        foreach (Book bk in b)
        {
            Console.WriteLine(bk.ToString());
        }           
    }

    public static void Compare(List<BookCategory> bc)
    {
        bc.Sort();
        foreach (BookCategory bk in bc)
        {
            Console.WriteLine(bk.ToString());
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:32:30.820

`if`你的方法中的大块`Add`是错误的。代替：

```
if (bookCategory == "Comedy") { }
if (bookCategory == "Horror") { }
if (bookCategory == "Adventure") { }
else { } 
```

... 你应该有：

```
if (bookCategory == "Comedy") { }
else if (bookCategory == "Horror") { }
else if (bookCategory == "Adventure") { }
else { } 
```

但更好的是，您可以通过使用以下代码来改进它（它做同样的事情，但更短一些并且更易于阅读）：

```
switch (bookCategory)
{
    case "Comedy":
    case "Horror":
    case "Adventure":
        BookCategory tempBookObj = bc.Find(delegate(BookCategory bcg)
        {
            return bcg.CategoryName.Equals(bookCategory);
        });
        tempBookObj.BookNo++;
        break;
    default:
        Console.WriteLine("Please enter the book category according to the list ! ");
        break;
} 
```

此外，由于您的变量`book`和`bc`变量都是静态的，甚至与其他方法在同一个类中，因此无需将这些变量传递给所有方法，因为它们无论如何都可以访问它们。

至于添加独特的 isbn，您可以尝试以下操作：

```
do {
    Console.Write("Enter the ISBN of the book : ");
    isbn = Console.ReadLine();
} while (!books.Any(b => b.Isbn.Equals(isbn))) // or any other way of comparing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:15:07.107

您需要显示您的图书详细信息，有点像

```
public static void Display(List<Book> b, List<BookCategory> bc)
{
    b.Sort();
    foreach (Book bk in b)
    {
        Console.WriteLine(bk.title  + (bk.price+10).ToString());
    }           
} 
```

根据您的书类编辑代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:19:07.877

你在哪里实现了对象“Book？”，你应该在那里重写方法“ToString()”，在那里你可以决定在编写“Book.Tostring();”时要显示哪个值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:19:09.530

要获得与您找到的图书价格相近的图书：

1.  根据价格对书籍进行排序
2.  找到你找到的书
3.  在之前和之后获取书籍（但如果它们的价格相同怎么办？）

编码留作作业:-)

# c# - 在 Win32 中使用 C# Winforms

> ID：12561889
> 
> 赞同：2
> 
> 时间：2012-09-24T09:07:18.833
> 
> 标签：c#, .net, winforms, winapi

我是 Win32 的新手，对 C# 不是很熟悉，所以请多多包涵。我在学校有一个项目，涉及制作音频编辑程序，我们可以选择使用哪种语言。我决定通过结合使用 C# 和 Win32 来让自己变得陌生。

到目前为止，我在这方面的进展是创建一个 Winforms 项目，废弃所有 Winforms 代码，并使用 Win32 API 创建一个窗口。我不知道如何使用 Winforms 操作窗口或以有意义的方式使用 .NET 框架中的任何其他内容。

我的问题是，有没有办法获取使用 Win32 API 创建的窗口并使用 Winforms 对其进行编辑？例如，将窗口句柄传递给我的表单，对其进行编辑，然后查看已创建的窗口中反映的更改？让我知道这是否没有意义。我很难找到很多关于此的文档，但也许我只是在错误的地方搜索。如果您可以让我知道任何可能有帮助的资源，或者在正确的方向上提供帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:21:09.203

我认为你是在倒退。winforms 中的基本思想是保持大部分代码受管理，然后仅在必要时[P/Invoke到本机 API 的方式。](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)

您[可以免费](http://www.readwriteweb.com/hack/2011/05/free-e-books-on-c.php)获得许多书籍来帮助您开始使用 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-15T15:16:35.953

Window Handle 中`hWnd`的 Windows 窗体，处理方式为`IntPtr`

```
using System.Windows.Forms;
(Form)Control.FromHandle(hWnd) 
```

# jquery-mobile - Jquery Mobile 中的自定义拆分按钮

> ID：12561892
> 
> 赞同：2
> 
> 时间：2012-09-24T09:07:29.030
> 
> 标签：jquery-mobile

我想在我的下一个项目中使用 JQuery Mobile，但我们遇到了按钮问题。我们被要求制作有两种颜色的按钮。我查看了 juerymobile.com 上的示例，搜索 google，甚至尝试过 bing，但我找不到一个好的答案。

有人可以给我一个指针，我如何在 jquery mobile 中制作这个按钮？

![分割图像](../Images/695708f3eb1533c5e000382d01a6de54.png)

# php - 用于点和数字验证的正则表达式

> ID：12561897
> 
> 赞同：3
> 
> 时间：2012-09-24T09:07:38.483
> 
> 标签：php, regex

我正在尝试验证点和数字。

**有效的：**

```
1.2.3
1.4.1 
```

**无效的：**

```
1.2.3.
1.2-3
1-2-3 
```

我从另一个线程尝试了以下操作，它适用于有效，但它也通过破折号（-）传递无效。

```
^\d+(.\d+)*$ 
```

对正则表达式有什么改进，所以只验证点和数字是严格的吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:09:38.530

您需要转义点，否则它是正则表达式中的“任何字符”：

```
^\d+(\.\d+)*$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T09:10:43.830

试试这个：

```
^\d+(\.\d+)*$ 
```

**[正则表达式演示](http://regexr.com?328gg)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T09:11:50.100

如果您需要可变数量的点和数字重复数字和点并将最后一个数字作为唯一数字：

```
(\d+\.)+\d+ 
```

它匹配 1.2.3 1.2.3.4 等等

如果您需要固定长度的数字，请输入重复次数而不是 + 运算符

```
(\d+\.){2}\d+ #for 1.2.3
(\d+\.){1}\d+ #for 1.2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T09:08:49.837

使用这个正则表达式`^\d+\.\d+\.\d+$`

您在点中的错误，点表示任何符号

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T09:11:39.370

点匹配所有字符，您应该使用 \。

^\d+(\.\d+)*$

但这也将验证任何没有点的数字，当至少 1 个点应该存在时使用：

(\d+\.)+\d+

# c - cygwin c sem_init

> ID：12561898
> 
> 赞同：0
> 
> 时间：2012-09-24T09:07:42.510
> 
> 标签：c, cygwin, semaphore

```
if((sem_init(sem, 1, 1)) == 1) perror("error initiating sem"); 
```

如果我包含这行代码，我的程序只会启动和退出。我刚开始学习如何使用信号量。我正在使用 cygwin，当这一行被注释掉 printf 的 ABOVE 这个打印到控制台时，但是当包含这个时，什么也没有发生。

我做了以下让cygserver运行 -

```
CYGWIN=server
ran /bin/cygserver-config
ran /usr/sbin/cygserver 
```

对于配置它说 cygserver 已经在运行 而对于 sygserver 它说-

```
initailaizing complete
failed to created named pipe: is the daemon already running?
fatal error on IPC transport: closing down 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:35:34.937

我发现出了什么问题。在为数据分配任何内存之前，我正在使用 data(struct) = shmat() 。出于某种原因，这阻止了我的“printf”工作。

# url - Extjs 4 - 如何从当前加载的网格商店中获取带有参数的完整 url？

> ID：12561915
> 
> 赞同：3
> 
> 时间：2012-09-24T09:08:49.247
> 
> 标签：url, parameters, get, grid, extjs4

我加载了一个网格，我想获取将 json 数据加载到其中的当前商店 URL，并将一个额外的参数传递给它，然后将此 URL 作为 pdf 或 xls 加载。但是我怎样才能得到网址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T09:55:04.190

获取代理和 ExtraParams：

```
var url = grid.getStore().getProxy().url;
var params = grid.getStore().getProxy().extraParams; 
```

然后，构建网址：

```
var newUrl = url + '?' + Ext.Object.toQueryString (params); 
```

newUrl 将是这样的：

```
your_url_data.json?param1=value1&param2=value2 
```

我认为不存在执行此操作的代理方法，但您可以扩展现有代理，如下所示：

```
Ext.define ('MyProxy', {
    extend: 'Ext.data.proxy.Ajax' ,
    buildInternalUrl: function () {
        return this.url + '?' + Ext.Object.toQueryString (this.extraParams);
    }       
}); 
```

进而：

```
var newUrl = grid.getStore().getProxy().buildInternalUrl (); 
```

结果是一样的；）

在这里你可以找到代理文档：**[Ajax Proxy](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Ajax)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:14:57.023

您可以通过以下方式获取商店网址 `yourGrid.getStore().getProxy().url`

# html - 无法通过自定义表单访问 cakephp 2.0 中的图像数据

> ID：12561918
> 
> 赞同：0
> 
> 时间：2012-09-24T09:09:01.970
> 
> 标签：html, cakephp-2.0

我创建了一个添加用户的功能。参数是用户名、电子邮件、密码和个人资料图像。

```
<form name="User" method="post" action="http://192.168.1.100/filmtastic/api/users/adduser" ENCTYPE="multipart/form-data">
    <table>
    <tr><td><label>username:</label></td><td><input type="text" name="username"></td></tr>
    <tr><td><label>password:</label></td><td><input type="text" name="password"></td></tr>
    <tr><td><label>email:</label></td><td><input type="text" name="email"></td></tr>
    <tr><td><label>Image:</label></td><td><input type="file" name="image"></td></tr>
    <tr><td colspan="2" align="center"><input type="submit" name="submit" value="Submit" /></td></tr></table>
</form> 
```

现在在我的`UserController`我有：

```
public function api_adduser() {

$this->layout = false;
$this->request->data['User']= $this->request->data;
if($this->request->data['User'] != array()) {
    pr($this->request->data); die();
    }
 } 
```

在这里，我调试了该 HTML 表单传递的数据，而 optput 就像

```
Array
(
    [username] => jack roy
    [password] => jack
    [email] => jack@yahoo.com
    [submit] => Submit
    [User] => Array
        (
            [username] => jack roy
            [password] => jack
            [email] => jack@yahoo.com
            [submit] => Submit
        )

) 
```

问题是它不会向我显示图像数组。你能告诉我如何得到那个看起来像的图像数组吗

```
Array
(
    [image] => Array
        (
            [name] => 06_01_2009_0692878001231258160_nanzig.jpg
            [type] => image/jpeg
            [tmp_name] => C:\wamp\tmp\php368F.tmp
            [error] => 0
            [size] => 81167
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:49:57.090

也许您只是忘记将表单 mime 类型设置为`multipart/form-data`. 这是我的演示视图，称为`add.ctp`

```
<?php
echo $this->Form->create('User', array('enctype' => 'multipart/form-data'));

echo $this->Form->input('name');
echo $this->Form->password('password');
echo $this->Form->input('email');
echo $this->Form->file('image');
echo $this->Form->submit();

echo $this->Form->end(); 
```

这里是`UserController`

```
class UserController extends AppController {

    public $helpers = array('Html', 'Form');

    public function add() {
        pr($this->request->data);
    }

} 
```

这是提交表单时的结果

```
Array
(
    [User] => Array
        (
            [name] => admin
            [password] => admin
            [email] => asdf@qwerty.com
            [image] => Array
                (
                    [name] => cakephp-book.odt
                    [type] => application/vnd.oasis.opendocument.text
                    [tmp_name] => /tmp/phpKniokr
                    [error] => 0
                    [size] => 170247
                )

        )

) 
```

这是生成的 HTML 的转储，您可能希望在*外部*页面上使用它（请问**为什么？？？**）。请注意添加了多少东西`FormHelper`...我想知道如果您的应用程序仍在直接访问您的服务器，为什么还要构建外部视图...

```
 <form action="/test/cakedemo/user/add" enctype="multipart/form-data" id="UserAddForm"
  method="post" accept-charset="utf-8">
    <div style="display:none;">
      <input type="hidden" name="_method" value="POST" />
    </div>

    <div class="input text">
      <label for="UserName">Name</label><input name="data[User][name]" 
        id="UserName" />
    </div><input name="data[User][password]" type="password" id="UserPassword" />

    <div class="input text">
      <label for="UserEmail">Email</label><input name="data[User][email]" type="text"
      id="UserEmail" />
    </div><input type="file" name="data[User][image]" id="UserImage" />

    <div class="submit">
      <input type="submit" value="Submit" />
    </div>
  </form> 
```

# ios - “能源使用”仪表工具结果解读

> ID：12561920
> 
> 赞同：9
> 
> 时间：2012-09-24T09:09:17.753
> 
> 标签：ios, battery

我正在使用设备在 ios 应用程序上运行“能源使用”仪器，我想用它来检查由于我正在测试的应用程序而消耗了多少电池。它显示了“能源使用水平”，它在不同的时间点给了我 13/20 、 12/20 等数字。

如何解释结果（我知道，它给出了 0-20 范围内的相对能量使用）：
1）由于应用程序和特定操作而消耗了多少电池。
2）哪个操作/功能导致了这种流失。
3）什么数字被认为是安全的，什么数字应该被认为是高/太高。
4）我们可以得出任何其他结论吗？

如果有人可以回答上述问题或给我链接以供参考，我将不胜感激。我四处搜索，找不到上述问题的答案，我只是找到了如何找出那些相对的能源使用数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:43:04.503

我的 2 美分：

1）您可以创建一个 UIAutomation 脚本来重复运行一些动作，并在每个动作上收集“能源使用情况”。这样你就可以说“如果拨打5分钟，需要xxx电池”，“如果继续导航5分钟，需要xxx电池”......

2）如上所述；您可以针对每个操作收集数据

3）我会说，尝试找到类似的应用程序，并进行基准测试，与他们的比较。

4）尝试使用不同的设备，iOS，你可能会告诉客户什么设备/iOS是最低要求或推荐的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T19:28:17.150

Energy Diagnostics 报告的功耗数字（我们在我的办公室称其为“电力”）相当不可靠。 [Powergremlin](http://blog.palominolabs.com/2012/11/14/introducing-powergremlin/)让您深入了解构成所述“电”单位的实际数字。这不会回答我们问题的第 2-4 部分，但它确实提供了比能量诊断更多的细节和准确性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-10T11:31:38.893

IOS App的电池消耗量表最高20分。

如果您的应用程序以 1/20 运行，则意味着您的应用程序需要 20 小时才能完成连击

如果它以 20/20 运行，则需要 1 小时才能完成完整的击球手。

# wpf - Template.FindName("PART_Popup", this) 总是返回 null

> ID：12561924
> 
> 赞同：0
> 
> 时间：2012-09-24T09:09:34.553
> 
> 标签：wpf, popup, controltemplate

我有一个样式为“AutoCompleteTextBox”的简单文本框：

```
<TextBox Name="TextBox" Style="{StaticResource AutoCompleteTextBox}" /> 
```

样式位于我的资源字典中：

```
<Style x:Key="AutoCompleteTextBox" TargetType="{x:Type TextBox}">
    <Setter Property="KeyboardNavigation.TabNavigation" Value="None" />
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="AllowDrop" Value="true" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBox}">
                <Grid>
                    <Border x:Name="Bd" SnapsToDevicePixels="true">
                        <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Border>
                    <Popup x:Name="PART_Popup" StaysOpen="False" Placement="Bottom" IsOpen="False">
                        <ListBox x:Name="PART_ListBox" HorizontalContentAlignment="Stretch"/>
                    </Popup>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

在我的代码隐藏文件中，我有两个吸气剂：

```
private Popup Popup
{
    get { return Template.FindName("PART_Popup", this) as Popup; }
}
private ListBox ItemList
{
    get { return Template.FindName("PART_ListBox", this) as ListBox; }
} 
```

和文本框加载事件：

```
void TextBox_Loaded(object sender, RoutedEventArgs e)
{
    var popup = Popup;

    var itemlist = ItemList;
} 
```

现在我有一个问题，`Popup`并且`ItemList`总是返回 null，**为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:16:29.763

通过“代码隐藏”，您似乎指的是窗口或视图的代码隐藏：包含文本框的东西。因此，该`Template`属性将引用此容器的模板，而不是文本框的模板。我将子类化`TextBox`并在其代码隐藏中公开这两个属性，或者指定您在相关特定文本框的模板之后。IE：

```
private Popup Popup
{
    get { return TextBox.Template.FindName("PART_Popup", TextBox) as Popup; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:17:18.820

在 XAML 中，您创建一个普通的 TextBox 并为其设置样式，在您后面的代码中有`this.Template`& `this`，这应该如何工作？没有办法，`this`实际上是`TextBox`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T20:53:07.017

就我而言，这是一个奇怪的问题。前两个按钮的代码工作正常，但第三个按钮给了我一个例外作为“演示者”；对象为空！

```
ContentPresenter presenter = new ContentPresenter();
        presenter = buttonUsersSave.Template.FindName("Presenter", buttonUsersSave) as ContentPresenter;
        presenter.Content = "Save";
        presenter = buttonUsersUpdate.Template.FindName("Presenter", buttonUsersUpdate) as ContentPresenter ;
        presenter.Content = "Update";
        presenter = buttonUserAuthSave.Template.FindName("Presenter", buttonUserAuthSave) as ContentPresenter;
        presenter.Content = "Save"; 
```

# facebook-graph-api - fql 查询的长度是否有限制？

> ID：12561926
> 
> 赞同：4
> 
> 时间：2012-09-24T09:09:38.667
> 
> 标签：facebook-graph-api, facebook-fql

由于 fql 查询是请求 url 的一部分（例如[http://graph.facebook.com/fql?q=SELECT](http://graph.facebook.com/fql?q=SELECT) ...），我想 url（或其参数）的长度有限制吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T09:50:28.560

FQL 查询本身的长度没有记录或公布的限制，但查询字符串的长度有限制（浏览器和 Web 服务器的长度不同，请参阅[兼容性问题](http://en.wikipedia.org/wiki/Query_string#Compatibility_issues)）。

请注意，您不需要使用 GET 来运行查询，并且 POST 可以正常工作，从而避免查询字符串限制。

顺便说一句，如果您将使用 SDK 发出 FQL 查询，您可以手动指定适当的 HTTP 方法

使用 JS-SDK：

```
FB.api('/fql', {q:'FQL_QUERY'}, 'post', function(response){
  // Handle results
}); 
```

使用 PHP-SDK：

```
$response = $fb->api('/fql', 'post', array('q'=>'FQL_QUERY')); 
```

# ios - 隐藏 UIStatusBar 后 UIView 未自动调整大小

> ID：12561928
> 
> 赞同：0
> 
> 时间：2012-09-24T09:09:41.897
> 
> 标签：ios, uistatusbar

我有一个 ViewController 有时需要隐藏状态栏。问题是隐藏状态栏后 UIViewController 的视图没有自动调整大小。（实际上我有另一个应用程序使用完全相同的视图控制器。完全没有问题）。任何人都可以建议这可能是问题的原因吗？谢谢

请参考我的屏幕截图。第一个是我隐藏状态栏和导航栏之前的视图。第二个是在我隐藏状态栏和导航栏之后。可以看到之前被状态栏占据的明显黑色区域。

![在此处输入图像描述](../Images/cfd528d9ef8692d1225a057834967544.png)

![在此处输入图像描述](../Images/7b6ec021e303cac43790308392241323.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:25:53.640

似乎`wantsFullScreenLayout`您的视图控制器未设置为 YES。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:57:50.170

```
[self.navigationController.navigationBar setBarStyle:UIBarStyleBlackTranslucent]; 
[self setWantsFullScreenLayout:YES]; 
```

在你的 viewDidLoad 中试试这个。除了全屏布局，我认为栏样式必须是透明的。

# c# - TFS 仅签入特定文件和文件夹，而不是所有挂起的更改

> ID：12561929
> 
> 赞同：4
> 
> 时间：2012-09-24T09:09:45.993
> 
> 标签：c#

我仍然无法通过我的 C# 应用程序与 TFS 通信。我正在尝试使用 PendingChanges 来签入由我的应用程序创建的文件，但是经过数小时的谷歌研究和阅读后，我还没有找到一种只签入特定文件的方法。每当我进行签入时，TFS 只会签入当前签出的所有项目以及我告诉它签入的项目。有没有办法从 PendingChanges 对象中删除某些项目或创建一个全新的 pendingchanges 对象我需要签入的文件？全有或全无的整个行为似乎很荒谬。请帮忙。

```
Workspace myWorkspace = createWorkspace();
// Show our pending changes.
PendingChange[] pendingChanges = myWorkspace.GetPendingChanges();
rt.Text += "Your current pending changes: \n";
foreach (string f in checkinItems)
{
    foreach (PendingChange pendingChange in pendingChanges)
    {
        if (Path.Combine(localPath, f) != pendingChange.LocalItem)
        {
            toCheckIn.Add(Path.Combine(localPath, f));
            rt.Text += "Found one!" + Path.Combine(localPath, f).ToString() + "\n";
            break;
        }
        else
        {
            rt.Text += pendingChange.LocalItem + " Not ours. \n";
        }
    }
}

myWorkspace.PendAdd(toCheckIn.ToArray(), true);

// Checkin the items we added.
int changesetNumber = myWorkspace.CheckIn(pendingChanges, currentUserName + ": " + toCheckIn + " from CokomImport");
rt.Text += "Checked in changeset " + changesetNumber; 
```

这是我到目前为止的代码。它过滤掉了我不需要的东西，但最终它没有任何区别，因为我需要检查原始的 PendingChanges 以及我需要添加到其中的东西。

# catalina - Apache Catalina 错误：-“严重：错误 listenerStart”

> ID：12561932
> 
> 赞同：8
> 
> 时间：2012-09-24T09:10:00.183
> 
> 标签：catalina, atomikos

当我尝试启动在 apache 下运行的 java spring 软件时出现以下错误：-

```
Sep 24, 2012 12:08:20 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Sep 24, 2012 12:08:20 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/jw] startup failed due to previous errors
Sep 24, 2012 12:08:21 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive jwdesigner.war
Sep 24, 2012 12:08:21 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Sep 24, 2012 12:08:21 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Sep 24, 2012 12:08:21 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/16  config=null
Sep 24, 2012 12:08:21 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2251 ms 
```

**那么可能导致此错误的原因是什么。BR**

****：：：更新：：：****

 **完整的错误从以下开始，请记住我使用的是 Windows 7 操作系统：-**

```
 Sep 24, 2012 12:18:39 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18
Sep 24, 2012 12:18:39 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive jw.war
No properties path set - looking for transactions.properties in classpath...
transactions.properties not found - looking for jta.properties in classpath...
Failed to open transactions properties file - using default values
java.lang.RuntimeException
        at com.atomikos.util.UniqueIdMgr.<init>(UniqueIdMgr.java:112)
        at com.atomikos.util.UniqueIdMgr.<init>(UniqueIdMgr.java:88)
        at com.atomikos.icatch.standalone.StandAloneTransactionManager.<init>(St
andAloneTransactionManager.java:82)
        at com.atomikos.icatch.standalone.UserTransactionServiceImp.createDefaul
t(UserTransactionServiceImp.java:285)
        at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTra
nsactionServiceImp.java:306)
        at com.atomikos.icatch.config.UserTransactionServiceImp.init(UserTransac
tionServiceImp.java:413)
        at com.atomikos.icatch.jta.UserTransactionManager.checkSetup(UserTransac
tionManager.java:90)
        at com.atomikos.icatch.jta.UserTransactionManager.init(UserTransactionMa
nager.java:140)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1414)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1375)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory$1.run(AbstractAutowireCapableBeanFactory.java:409)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.createBean(AbstractAutowireCapableBeanFactory.java:380)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb
ject(AbstractBeanFactory.java:264)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr
y.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBe
an(AbstractBeanFactory.java:261)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean
(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean
(AbstractBeanFactory.java:164)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.
preInstantiateSingletons(DefaultListableBeanFactory.java:429)
        at org.springframework.context.support.AbstractApplicationContext.finish
BeanFactoryInitialization(AbstractApplicationContext.java:728)
        at org.springframework.context.support.AbstractApplicationContext.refres
h(AbstractApplicationContext.java:380)
        at org.springframework.web.context.ContextLoader.createWebApplicationCon
text(ContextLoader.java:255)
        at org.springframework.web.context.ContextLoader.initWebApplicationConte
xt(ContextLoader.java:199)
        at org.springframework.web.context.ContextLoaderListener.contextInitiali
zed(ContextLoaderListener.java:45)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContex
t.java:3843)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4
342)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase
.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:77
1)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)

        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:830)

        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:719
)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:490
)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java
:311)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl
eSupport.java:117)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)

        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)

        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443
)
        at org.apache.catalina.core.StandardService.start(StandardService.java:5
16)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710
)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces 
```

BR

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-30T09:31:59.733

通过创建 具有以下内容的文件`logging.properties`来启用更详细的日志记录：`WEB-INF\classes\`

> > org.apache.catalina.core.ContainerBase.[Catalina].level = 信息
> > 
> > org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler

现在罪犯应该出现在堆栈跟踪中。

参考：

> [调试可怕的“严重：错误 listenerStart”和“严重：错误 filterStart”Tomcat 错误消息](http://blog.trifork.com/2011/03/18/debugging-the-dreaded-severe-error-listenerstart-and-severe-error-filterstart-tomcat-error-messages/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:25:22.880

您似乎对 atomikos 的初始化有疑问。可能默认值不适用于您的应用程序：

```
No properties path set - looking for transactions.properties in classpath...
transactions.properties not found - looking for jta.properties in classpath...
Failed to open transactions properties file - using default values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T04:03:07.357

也许您正在项目或某个库上生成 jdk 8 源代码并部署在 jdk 7 或 jdk 6 服务器上。**

# jquery - 比较两个表行，如果匹配则删除

> ID：12561937
> 
> 赞同：5
> 
> 时间：2012-09-24T09:10:18.980
> 
> 标签：jquery

任何人都可以在 JQuery 中帮助我吗？我的网站**leftTable**和**rightTable**上有两个具有相同列名的表。我从数据库中填写的**leftTable**，但**rightTable**它只包含一些行。我想做的是不在 leftTable 中显示（或删除）那些存在于**rightTable中的****行**！

我试过这个：

```
$("#tableLeft tr").each(function(){
    if($(this).find("td")[0].innerHTML == $("#tableRight tr").find("td")[0].innerHTML)
    {
        $(this).remove;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:36:25.097

只是一个想法

```
$(function(){
    $('#btn').on('click', function(e){
        $('#right_table tbody tr').each(function(){
            var row=$(this).html();
            $('#left_table tbody tr').each(function(){
                if(row==$(this).html()) $(this).remove();
            });
        });
    });
});​ 
```

[**演示**](http://jsfiddle.net/nVtdE/)。

我已经提到这是一个想法，只是因为您没有提供任何代码 (HTML)，所以请记住，如果两个表有的话，它们的行中应该有相同的 (class/id)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:39:05.560

我想你有这样的事情：

```
<table id="T1">

    <tr><td>111</td></tr>
    <tr><td>222</td></tr>
    <tr><td>333</td></tr>

</table>

<table id="T2">

    <tr><td>444</td></tr>
    <tr><td>111</td></tr>
    <tr><td>333</td></tr>

</table> 
```

要从 id="T2" 的表中删除行，您可以执行以下操作：

```
$('#T1 tr').each(function(){

    var currentRowHTML=$(this).html();

    $('#T2 tr').each(function(){
        if($(this).html()===currentRowHTML){
            $(this).remove();
        }
    });
}); 
```

# visual-studio-2010 - 如何通过asp.net Web服务检测浏览器关闭

> ID：12561938
> 
> 赞同：1
> 
> 时间：2012-09-24T09:10:18.867
> 
> 标签：visual-studio-2010, c#-4.0, websocket, webservice-client

我有一个应用程序，我正在通过第三方设备进行录制。录制是通过 asp.net Web 服务启动和停止的，该服务使用录制设备的 api 来启动和停止录制。

在正常情况下，我可以通过 ajax 开始和停止录制，并且功能在所有浏览器中都可以正常工作..

但是，有一次不小心有一个用户没有停止视频，关闭了浏览器，在这种情况下无法停止录制..然后继续录制......

所以，请给我建议一种方法，以便我可以检测到时间或任何告诉我浏览器何时关闭的信息，然后我可以传递关闭请求以停止录制..!!

我读过`WEB SOCKETS`但他们说这个类将用于VS2012 ..所以，我还没有找到任何兼容的解决方案..

# ios - iOS - UIView 中的 drawRect：平滑动画的建议

> ID：12561939
> 
> 赞同：0
> 
> 时间：2012-09-24T09:10:24.467
> 
> 标签：ios, animation

以下是我的代码，它工作正常，只是if (guidelineOn) 中的一条移动线的“动画”不流畅。每 0.01 秒调用一次 drawRect。

```
if (guideLineOn)
{
[self drawGuidanceLineAtPoint:CGPointMake((65+guideLineOffset)*scalingF, 98*scalingF) withAlpha:paramAlpha];
} 
```

它有点滞后，有时会干扰用户输入。我该如何解决这个问题？对此很新，因此对建议持开放态度。

在此先感谢您的帮助。

码头。

```
- (void)drawRect:(CGRect)rect
{
scalingF = 1.0; // default : iPhone

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    scalingF = IPAD_SCALING_FACTOR;
}

if (guideLineOn)
{
    [self drawGuidanceLineAtPoint:CGPointMake((65+guideLineOffset)*scalingF, 98*scalingF) withAlpha:paramAlpha];
}

// draw staff line
[self drawStaffLineFrom:CGPointMake(65*scalingF, 98*scalingF) toPoint:CGPointMake(420*scalingF, 98*scalingF)];
[self drawStaffLineFrom:CGPointMake(420*scalingF,108*scalingF) toPoint:CGPointMake(420*scalingF, 50*scalingF)];
[self drawStaffLineFrom:CGPointMake(415*scalingF,108*scalingF) toPoint:CGPointMake(415*scalingF, 50*scalingF)];

// cycle through all the static images to draw tbd
float offSet = 0.0;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    offSet += 50.0; // to adjust the metronome down
}

if (metronomeImage)
{

    [metronomeImage drawInRect:CGRectMake(410.0f*scalingF, 195.0f*scalingF+offSet, metronomeImage.size.width*scalingF, metronomeImage.size.height*scalingF)];
}

if (circlesImage)
{
    [circlesImage drawInRect:CGRectMake(400.0f*scalingF, 255.0f*scalingF+offSet, circlesImage.size.width*scalingF, circlesImage.size.height*scalingF)];
}

for (Note * v in notesArray)
{
    UIImage * noteImage = [UIImage imageNamed: v.imageName];
    [noteImage drawInRect:CGRectMake(v.notePlacement.x*scalingF, v.notePlacement.y*scalingF, noteImage.size.width*scalingF, noteImage.size.height*scalingF)];
}

if (!clearDisplay) 
{
    // draw the arrows
    for (int i=0; i < arrowsToDrawArray.count; i++)
    {
        Arrow * arrowObj = [arrowsToDrawArray objectAtIndex:i];
        UIColor * colourOfArrow = [arrowObj colourOfArrow]; // colour determines whether right or wrong
        CGPoint p = [arrowObj arrowPlacement];
        p.x = p.x*scalingF;
        p.y = p.y*scalingF;

    //    CGPoint p = [val CGPointValue]; 
        [self drawRooftopAtTopPointof:p colour:colourOfArrow lineJoin:kCGLineJoinMiter];
    }

    // draw the ties
    for (int j=0; j < tiePointsArray.count; j++)
    {
        CGPointPair * tiePairToDraw = [tiePointsArray objectAtIndex:j];
        CGPoint firstPt = [tiePairToDraw firstPoint];
        firstPt.x = firstPt.x *scalingF;
        firstPt.y = firstPt.y *scalingF;

        CGPoint secondPt = [tiePairToDraw secondPoint];
        secondPt.x = secondPt.x *scalingF;
        secondPt.y = secondPt.y *scalingF;

        [self drawPseudoCurveFromPoint:firstPt toPoint:secondPt];
    }

    // bool perfect = true;
    // int noOfNotesHit = 0;

    // draw the tick/cross/arrow
    for (int k=0; k < answerObjArray.count; k++)
    {
        Answer * ansObj = [answerObjArray objectAtIndex:k];

        if (ansObj.hit)
        {
           // noOfNotesHit++;

            if (ansObj.earlyOrLate == -1) // early, draw right pointing arrow
            {
                UIImage * arrowImage = [UIImage imageNamed: @"arrowright.png"];
                [arrowImage drawInRect:CGRectMake((ansObj.xPosition-(0.5*arrowImage.size.width))*scalingF, 125*scalingF, arrowImage.size.width*scalingF, arrowImage.size.height*scalingF)];
               // perfect = false;
            }
            else if (ansObj.earlyOrLate == 1) // late, draw left pointing arrow
            {
                UIImage * arrowImage = [UIImage imageNamed: @"arrowleft.png"];
                [arrowImage drawInRect:CGRectMake((ansObj.xPosition-(0.5*arrowImage.size.width))*scalingF, 125*scalingF, arrowImage.size.width*scalingF, arrowImage.size.height*scalingF)];
                //perfect = false;
            }
            else // perfect!
            {
                // draw a tick
                UIImage * tickImage = [UIImage imageNamed: @"tick.png"];
                [tickImage drawInRect:CGRectMake((ansObj.xPosition-(0.5*tickImage.size.width))*scalingF, 125*scalingF, tickImage.size.width*scalingF, tickImage.size.height*scalingF)];
            }

        }
        else
        {
            // draw a cross
            UIImage * crossImage = [UIImage imageNamed: @"cross.png"];
            [crossImage drawInRect:CGRectMake((ansObj.xPosition-(0.5*crossImage.size.width))*scalingF, 125*scalingF, crossImage.size.width*scalingF, crossImage.size.height*scalingF)];
            //perfect = false;
        }

    }

}
else 
{
    // draw nothing
    clearDisplay = false; 
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:29:01.373

这是我为感兴趣的人提供的核心动画解决方案。

```
- (void) animateRedLine: (float) alphaParam
{
[self.view addSubview:self.redlineImageView];
/* Start from top left corner */
[self.redlineImageView setFrame:CGRectMake(65.0f*scalingF,
                                          50.0f*scalingF,
                                          self.redlineImageView.image.size.width*scalingF,
                                          self.redlineImageView.image.size.height*scalingF*2)];

[self.redlineImageView setAlpha:alphaParam];

[UIView beginAnimations:@"redLineAnimation"
                context:( void *)self.redlineImageView];

/* 3 seconds animation */
[UIView setAnimationDuration:noOfBeatsInBar*timeInSecondsForOneBeat];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];
/* Receive animation delegates */
[UIView setAnimationDelegate:self];

[UIView setAnimationDidStopSelector:
 @selector(imageViewDidStop:finished:context:)];

/* End at the bottom right corner */
[self.redlineImageView setFrame:CGRectMake((65.0f+LENGTH_OF_BAR)*scalingF,
                                          50.0f*scalingF,
                                          self.redlineImageView.image.size.width*scalingF,
                                          self.redlineImageView.image.size.height*scalingF*2)];

//[self.redlineImageView setAlpha:0.0f];

[UIView commitAnimations];
} 
```

# mongodb - MongoDb - 如何准确搜索 BSON 复合键？

> ID：12561940
> 
> 赞同：0
> 
> 时间：2012-09-24T09:10:29.417
> 
> 标签：mongodb, search, bson

我有一个集合，其中存储了有关设备的信息，如下所示：

```
/* 1 */
{
  "_id" : {
    "startDate" : "2012-12-20",
    "endDate" : "2012-12-30",
    "dimensions" : ["manufacturer", "model"],
    "metrics" : ["deviceCount"]
  },
  "data" : {
    "results" : "1"
  }
}

/* 2 */
{
  "_id" : {
    "startDate" : "2012-12-20",
    "endDate" : "2012-12-30",
    "dimensions" : ["manufacturer", "model"],
    "metrics" : ["deviceCount", "noOfUsers"]
  },
  "data" : {
    "results" : "2"
  }
}

/* 3 */
{
  "_id" : {
    "dimensions" : ["manufacturer", "model"],
    "metrics" : ["deviceCount", "noOfUsers"]
  },
  "data" : {
    "results" : "3"
  }
} 
```

我正在尝试使用唯一的 _id 字段查询文档。我遇到的问题是，当我查询所有不同的属性时：

```
db.collection.find({$and: [{"_id.dimensions":{ $all: ["manufacturer","model"], $size: 2}}, {"_id.metrics": { $all:["noOfUsers","deviceCount"], $size: 2}}]}); 
```

这匹配 2 和 3 个文档（我不关心属性值的顺序），但我只想返回 3 个。我怎么能说除了我在搜索查询中指定的属性之外，_id 不应该有任何其他属性？

请指教。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:12:25.187

不幸的是，我认为最接近您可以将查询结果缩小到无序`_id.dimensions`和无序`_id.metrics`的方法需要您知道`_id`子文档字段中的其他可能字段，例如。`startDate`和`endDate`。

```
db.collection.find({$and: [
    {"_id.dimensions":{ $all: ["manufacturer","model"], $size: 2}}, 
    {"_id.metrics": { $all:["noOfUsers","deviceCount"], $size: 2}},
    {"_id.startDate":{$exists:false}},
    {"_id.endDate":{$exists:false}} 
]}); 
```

如果您不知道 中的可能字段集`_id`，那么另一个可能的解决方案是指定`_id`您想要的确切字段，例如。

```
db.collection.find({"_id" : {
    "dimensions" : ["manufacturer", "model"],
    "metrics" : ["deviceCount", "noOfUsers"]
}}) 
```

但这意味着 和 的顺序`_id.dimensions`很`_id.metrics`重要。最后一个查询对 的精确 BSON 表示进行文档匹配`_id`。

# windows - Visual Studio 2012 Beta - 部署应用程序时出错

> ID：12561941
> 
> 赞同：2
> 
> 时间：2012-09-24T09:10:30.067
> 
> 标签：windows, visual-studio

我已经安装了 Windows 8 OS RP 版本和 Visual Studio 2012 beta 版本。但是在部署软件包时出现以下错误。

**错误：**

> Windows 无法安装包 xxxxx，因为此包需要更高的 Windows 版本。该包请求 Windows 版本 6.2 和 AppModel 版本 1，而当前的 Windows 版本是 6.2 和 AppModel 版本 0\. (0x80073cfd)。

我该如何解决这个问题？

任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:14:20.847

您是否尝试过创建新项目并将旧文件携带到新项目中？

# android - 在 Android 中编译 speex (STATIC_LIBRARY)

> ID：12561943
> 
> 赞同：1
> 
> 时间：2012-09-24T09:10:40.353
> 
> 标签：android, compilation, static-libraries, speex

我正在尝试在 Android 中编译 Speex 库。当我在共享模式下编译这个库时，一切都很好，但是当我尝试在静态模式下编译它时，ndk 似乎什么都不做并且它没有生成库。

我读过我只需要更改`include $(BUILD_SHARED_LIBRARY)`，`(BUILD_STATIC_LIBRARY)`但这不起作用，库没有编译，我在控制台中没有任何错误。

**安卓.mk**

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := speex

ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_CFLAGS += -DHAVE_NEON=1
endif

LOCAL_CFLAGS += -DHAVE_CONFIG_H

LOCAL_C_INCLUDES := ../include   \
               ../libspeex   \
               ../           \

LOCAL_SRC_FILES := ../libspeex/bits.c      \
           ../libspeex/buffer.c    \
           ../libspeex/cb_search.c \
               ...
           ../libspeex/vq.c        \
           ../libspeex/window.c    \

LOCAL_CFLAGS += -DANDROID

include $(BUILD_STATIC_LIBRARY) 
```

**应用程序.mk**

```
APP_PROJECT_PATH := $(call my-dir)
APP_BUILD_SCRIPT := $(APP_PROJECT_PATH)/Android.mk
APP_STL := stlport_static
STLPORT_FORCE_REBUILD := true
APP_ABI := armeabi-v7a armeabi
APP_OPTIM := release 
APP_PLATFORM :=  android-8 
```

怎么了？为什么 NDK 不编译库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:00:34.540

我已经解决了它在同一个 Android.mk 中指定的问题，这是一个以共享模式编译的模块，它使用之前编译的静态库：

**安卓.mk**

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := speex-static

ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_CFLAGS += -DHAVE_NEON=1
endif

LOCAL_CFLAGS += -DHAVE_CONFIG_H

LOCAL_C_INCLUDES := ../include   \
               ../libspeex   \
               ../           \

LOCAL_SRC_FILES := ../libspeex/bits.c      \
           ../libspeex/buffer.c    \
           ../libspeex/cb_search.c \
               ...
           ../libspeex/vq.c        \
           ../libspeex/window.c    \

LOCAL_CFLAGS += -DANDROID

include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_CFLAGS += -DHAVE_NEON=1
endif
LOCAL_MODULE := speex
LOCAL_STATIC_LIBRARIES := speex-static
LOCAL_CFLAGS += -DANDROID
include $(BUILD_SHARED_LIBRARY) 
```

# php - Linux文件上传，fwrites，不起作用

> ID：12561948
> 
> 赞同：1
> 
> 时间：2012-09-24T09:10:45.600
> 
> 标签：php, linux, file-upload, temporary-files

我已经在我的系统上安装了 fedora15，安装了 apache 和 php5.3 和 mysql。我没有更改任何配置文件中的任何默认设置

创建了一个 ftpuser 并将文件上传到 Documentroot，即“/var/www/html/”，当我运行 php 文件时，所有文件都成功运行。

但是当涉及到文件上传时，fopen、fwrite、imagemagick convert 等所有涉及以编程方式创建文件的程序都不起作用。我已经为运行 php 脚本的文件夹授予了 777 权限，但它仍然给了我访问被拒绝的错误。

以下是创建权限被拒绝错误的示例代码。

```
 $handle =   fopen("test.txt","w+");
    if(!$handle)die("Could not open file for writing");
    fwrite($handle,"Testing Uploads Successfull.");
    fclose($handle); 
```

上面的文件位于我新安装的fedora15系统的'/var/www/html/test/'目录下。

虽然如果我使用 php 命令行以 root 用户身份运行此文件，它会正确执行创建一个新文件和其中的文本。如果我在命令行中与另一个用户运行相同的文件，则会产生权限被拒绝错误，尽管该目录已获得 777 权限。

请任何人帮助我解决这种奇怪的行为，

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:27:38.523

SELinux 阻止 Web 服务器创建和写入文件。有关更多详细信息，请参见`httpd_selinux(8)`手册页。

# android - 如何将微调器动态添加到android中的tablerow？

> ID：12561956
> 
> 赞同：0
> 
> 时间：2012-09-24T09:11:21.490
> 
> 标签：android, layout

我想像这张图片一样在表格内动态添加微调器，以及如何指定它的宽度和高度：

![在此处输入图像描述](../Images/cb4c230a2e42a40f1dc65e8cd8938416.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:33:18.403

采用 TableLayout 表单 xml 并将 xml 扩展为您的代码。现在您可以使用 addView(new TableRow()) 将新的 TableRows 添加到 tableLayout...

再次，您可以将视图（视图 v）添加到每个表行。您可以为添加到 TableLayout 的每个 TableRow 添加重量。在您的情况下

TableRow 的权重为 2

```
addView(new TextView())
addView(new Spinner()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:35:41.620

您可以根据需要添加任意数量的表格行：

```
"TableLayout tableLayout = (TableLayout) findViewById(R.id.tableLayoutFromXML);"
"TableRow tableRow = new TableRow(this);"
"tableRow.setLayoutParams(new LayoutParams(
                          LayoutParams.FILL_PARENT,
                          LayoutParams.WRAP_CONTENT));"
"tableRow.addView(WhatEver view that you want);"
"tableLayout.addView(tableRow);" 
```

要添加到 tablerow 的视图，您还可以设置它们的属性，如“宽度”或“高度”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:38:58.527

我知道我有点晚了，但你可以试试这个......

```
final TableLayout dynamicTable = (TableLayout) findViewById(R.id.hotelTableLayout);

                     /* Create a new row to be added. */
                    final TableRow row = new TableRow(Hotels.this);
                    row.setLayoutParams(new TableRow.LayoutParams(
                            TableRow.LayoutParams.MATCH_PARENT,
                            TableRow.LayoutParams.WRAP_CONTENT));

                    /* Create a component to be the row-content. */
                    SpnAdult = new Spinner(Hotels.this);
                    SpnAdult.setLayoutParams(new TableRow.LayoutParams(0,
                            TableRow.LayoutParams.WRAP_CONTENT, 1));
                    SpnAdult.setAdapter(adapter);

                    /* Add Spinner to row. */
                    row.addView(SpnAdult);

                    /* Add row to TableLayout. */
                    dynamicTable.addView(row, new TableLayout.LayoutParams(
                            TableLayout.LayoutParams.MATCH_PARENT,
                            TableLayout.LayoutParams.WRAP_CONTENT)); 
```

希望这可以帮助....

# php - 我怎样才能知道 php 输出是否已经开始？

> ID：12561959
> 
> 赞同：0
> 
> 时间：2012-09-24T09:11:26.410
> 
> 标签：php, output-buffering

> **可能重复：**
> [PHP：如何知道输出是否已经开始？](https://stackoverflow.com/questions/4752683/php-how-to-know-if-output-already-started)

在开始会话之前，我想知道缓冲区中是否**已经生成了输出。**

在 PHP 中，在会话开始之前开始的输出总是会产生警告，例如控制器中的错误会产生以下输出：

> 警告：fopen（/tmp/test.txt）[function.fopen]：无法打开流：第 836 行 /var/www/app/controllers/test_controller.php 中的权限被拒绝
> 
> 警告：无法修改标头信息 - 第 18 行的 layouts/default.thtml 中的标头已由（输出开始于 test.php:836）发送

这不是问题，我喜欢这个警告，所以我发现了一些错误。

但是我的布局是这样设计的，页面顶部有一个固定栏，覆盖了第一个警告。所以我想在开始会话之前确定缓冲区中是否已经生成了输出，所以我可以退出添加固定到该栏的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:12:49.473

有一个功能：[`headers_sent`](http://php.net/manual/en/function.headers-sent.php)。

# java - Tomcat java.io.NotSerializableException 错误

> ID：12561967
> 
> 赞同：3
> 
> 时间：2012-09-24T09:11:59.753
> 
> 标签：java, tomcat

启动 Tomcat 7 时出现此错误：

```
 sept. 24, 2012 9:59:13 AM org.apache.catalina.session.StandardManager doLoad
    Grave: "IOException" lors du chargement de sessions persistantes: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.objectweb.salome_tmf.ihm.main.datawrapper.DataModel
    java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.objectweb.salome_tmf.ihm.main.datawrapper.DataModel
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
        at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
        at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
        at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:284)
        at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
        at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5293)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1595)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1585)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: java.io.NotSerializableException: org.objectweb.salome_tmf.ihm.main.datawrapper.DataModel
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
        at org.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1671)
        at org.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:1077)
        at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:432)
        at org.apache.catalina.session.StandardManager.unload(StandardManager.java:353)
        at org.apache.catalina.session.StandardManager.stopInternal(StandardManager.java:518)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5473)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1611)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1600)
        ... 5 more

    sept. 24, 2012 9:59:13 AM org.apache.catalina.session.StandardManager startInternal
    Grave: Exception au chargement des sessions depuis le stockage persistant (persistent storage)
    java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.objectweb.salome_tmf.ihm.main.datawrapper.DataModel
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
        at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
        at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
        at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:284)
        at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
        at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5293)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1595)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1585)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: java.io.NotSerializableException: org.objectweb.salome_tmf.ihm.main.datawrapper.DataModel
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
        at org.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1671)
        at org.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:1077)
        at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:432)
        at org.apache.catalina.session.StandardManager.unload(StandardManager.java:353)
        at org.apache.catalina.session.StandardManager.stopInternal(StandardManager.java:518)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5473)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1611)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1600)
        ... 5 more 
```

这是我的课：

```
 public class DataModel implements ApiConstants, 

 DataConstants,IDataModelWrapper {     
  } 
```

ApiConstants、DataConstants、IDataModelWrapper 是简单的接口。我应该实现可序列化的接口吗？

任何帮助将不胜感激 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:24:49.560

每当您将对象添加到会话中时，您都应该始终将其添加到`Serializable`.

它有两个目的：

*   如果不经常访问它，它允许容器将您的会话存储到磁盘
*   它允许容器在同一集群的节点之间共享您的会话数据

# javascript - 使用 JavaScript 从网页中获取整个文本

> ID：12561968
> 
> 赞同：2
> 
> 时间：2012-09-24T09:12:01.100
> 
> 标签：javascript

我是 JavaScript 新手，我想知道是否有一种或多种方法可以从网页获取整个文本，这意味着人们可以在网页上阅读的文本（不包括任何图像的文本）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:14:27.447

您应该能够使用：

```
document.body.innerText; 
```

# java - java.util.List 上的 toString() 在哪里被覆盖

> ID：12561970
> 
> 赞同：1
> 
> 时间：2012-09-24T09:12:05.397
> 
> 标签：java, collections, junit4

我想知道为什么这个断言在 JUnit 中有效：

```
assertEquals("[String1, String2, String3]", Arrays.asList("String1", "String2", "String3").toString()); 
```

我在 List 或 Collection 的任何地方都看不到 toString() 被覆盖。

我很高兴它有效，但仍然很好奇。

谢谢， 德克兰

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T09:14:55.153

`Arrays.asList`返回[一个`Arrays#ArrayList`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/Arrays.java#Arrays.ArrayList)that extends `AbstractList`which extends `AbstractCollection` [which implements`toString`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/AbstractCollection.java#AbstractCollection.toString%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:21:26.283

If you got to `asList` code(pressing `F3` on `asList` goes to the declaration in eclipse is the source code is attached) it returns

```
 return new ArrayList<T>(a); 
```

And investigating further [Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29) does have a `toString` overloaded.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:17:34.360

toString 被[AbstractCollection](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html#toString%28%29)覆盖，它是一个超类：

*   抽象列表
*   抽象队列
*   抽象集
*   数组队列

返回的元素`.asList`可能是`AbstractList`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T09:18:37.447

`List`和都是`Collection`接口。方法`toString()`在 中被覆盖`AbstractCollection`。

无论如何，比较对象的字符串表示是一种不好的做法。你应该使用

`assertEquals(expectedList, actualList)`反而。

在哪里

`expectedList = Arrays.asList(new String[] {"String1", "String2", "String3"})`

在您的情况下甚至更好：

`assertArrayEquals(expectedArray, actualArray)`

请注意，您应该使用 newer`org.junit.Assert`而不是`junit.framework.Assert`. 新实现有很多方法，包括数组比较实用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:16:28.703

`Object`类具有`toString()`. 由于每个类都直接或间接地`extends`指向`Object`，如果一个特定的类没有定义 toString()，它会从层次结构中的父类继承。

**根据**UmNyobe**评论[更新：](https://stackoverflow.com/users/1122645/umnyobe)**

 **在层次结构中，将使用找到的第一个具有所需补充的父类。在 OP 的问题中，该父类将`AbstractCollection`覆盖`toString`.`Object`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-24T09:14:52.237

`toString`被 覆盖`ArrayList`，`List`实现由返回`Arrays.asList()`

这是该`asList`方法在`Arrays`类中的实现方式。

```
public static <T> List<T> asList(T... a) {
    return new ArrayList<T>(a);
} 
```

其中`ArrayList`是 的静态内部类`Arrays`：

`private static class ArrayList<E> extends AbstractList<E>`

是的，好吧不是直接被它的祖先覆盖`ArrayList`而是被它的祖先覆盖`AbstractList`**

# objective-c - 想要通过触摸它的角来拖动它来增加视图的大小

> ID：12561971
> 
> 赞同：1
> 
> 时间：2012-09-24T09:12:07.273
> 
> 标签：objective-c, ios, uigesturerecognizer, uitouch

你好，

我想将子视图拖到我的主视图中。这样做之后，我应该能够通过触摸和拖动角或子视图中的任何一个来增加/减小子视图的大小。

每个方向上大小的增加/减少将取决于我选择拖动的角。

请建议我实现这一目标的方法。

# jquery - jQuery 验证 inValidhandler 调用了两次

> ID：12561977
> 
> 赞同：1
> 
> 时间：2012-09-24T09:12:33.050
> 
> 标签：jquery, jquery-validate

我遇到了 jquery 验证插件和 invalidHandler 的问题。处理程序被调用两次？第一次是本地验证的字段，第二次是我所有的远程 ajax 验证完成后。

我猜这是因为本地验证的字段在远程字段之前返回 false。有可能解决这个问题吗？

```
 $("#create users").validate(
        {
            debug: true,
            errorElement: "div",
            errorPlacement: function(error, element) {
                error.appendTo(element.closest('div').next().next());
            },
            invalidHandler: function(form, validator) { // Called twice
                $("#validation-dialog").dialog('close');
            },
            submitHandler: function(form) {
                $("#validation-dialog").dialog('close');
                $("#create-accounts-dialog").dialog({
                    resizable: false,
                    draggable: false,
                    height: 200,
                    width: 400,
                    modal: true,
                    buttons: {
                        GetString("Cancel"): function() {
                            $(this).dialog("close");
                        },
                        GetString("Ok"): function() {
                            $(".modal-load").show();
                            $(".ui-icon-info").hide();
                            $(".modal-text").hide();
                            $(".ui-dialog-buttonpane").hide();
                            form.submit();
                        }
                    }
                });
            }
        });
    $.validator.addMethod("required", $.validator.methods.required, GetString("validationRequired"));
    $.validator.addMethod("email", $.validator.methods.email, GetString("validationRequired"));
    $.validator.addMethod("remote", $.validator.methods.remote,GetString("validationDouble"));
    $.validator.addClassRules("uEmail", { required: true, email: true, remote: "/CheckDouble/@Model.Id" }); 
```

谢谢，

詹姆斯福特

# regex - perl 正则表达式提取特定单词

> ID：12561985
> 
> 赞同：1
> 
> 时间：2012-09-24T09:12:51.970
> 
> 标签：regex, perl, unix

我有以下文本文件示例：

```
AFUA_2G08360|pyrG
AFUA_2G12630
gel1|bgt2|AFUA_2G01170 
```

我希望做一个正则表达式来过滤掉`AFUA_2G08360`, `AFUA_2G12630`,在 unix 命令行中`AFUA_2G01170`使用。 你会如何建议这样做？`perl -l -ne`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:18:13.713

为什么不将'sed'与类似的东西一起使用

`sed 's/AFUA_2G\d{5}//'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:21:49.450

Try this expression:

```
/(AFUA_2G\d+)/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:09:48.230

利用

```
perl -pe 's/.*(AFUA_[0-9a-zA-Z]*).*$/\1/' your_file 
```

测试：

```
> cat temp
    AFUA_2G08360|pyrG
    AFUA_2G12630
    gel1|bgt2|AFUA_2G01170
> perl -pe 's/.*(AFUA_[0-9a-zA-Z]*).*$/\1/' temp
AFUA_2G08360
AFUA_2G12630
AFUA_2G01170 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:31:01.823

这是您的示例输入的可行单行代码。

```
cat data | perl -l -e 'while (<>) {s/.*(AFUA_[^\|]*).*/\1/g; print}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:17:13.127

```
AFUA_[0-9A-Za-z]{7} 
```

见这里：[http ://regexr.com?328gj](http://regexr.com?328gj)

命令行 ：

```
user@mch:/tmp$ cat input.txt 
AFUA_2G08360|pyrG
AFUA_2G12630
gel1|bgt2|AFUA_2G01170

user@mch:/tmp$ cat input.txt | perl -lne "@matches = /AFUA_[0-9A-Za-z]{7}/g; print join("\n", @matches)";
AFUA_2G08360
AFUA_2G12630
AFUA_2G01170 
```

# java - 如何在单独的选项卡中管理多个图表上的操作 - jfreechart

> ID：12561988
> 
> 赞同：2
> 
> 时间：2012-09-24T09:13:00.363
> 
> 标签：java, jfreechart

我正在尝试执行一些操作，例如 - 在单独选项卡中的多个图表之一上绘制矩形。实际上，我有绘制矩形和滚动图表的功能，但它只适用于最后创建的图表。我知道，这是合乎逻辑的，但是如何在其他选项卡中的先前图表上管理这些操作？我可以使用图表面板列表来获取这些数据集并向它们添加新值吗？如何解决这个问题？谁能帮我？SSCCE：

```
import java.awt.AlphaComposite;
import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.Shape;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import javax.swing.BoxLayout;
import javax.swing.DefaultCellEditor;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.TableCellRenderer;

import net.miginfocom.swing.MigLayout;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.annotations.XYShapeAnnotation;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.Range;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.Layer;

public class TabbedPaneTEST extends JFrame {

    private JFrame frame;
    public JTabbedPane tabbedPane;
    public JButton btnadd;
    public TabbedPaneTEST okno = this;
    ChartPanel chartpanel;
    XYPlot subplot1;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TabbedPaneTEST window = new TabbedPaneTEST();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public TabbedPaneTEST() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        tabbedPane = new JTabbedPane(JTabbedPane.TOP);
        frame.getContentPane().add(tabbedPane, BorderLayout.CENTER);

        btnadd = new JButton("add chart");
        frame.getContentPane().add(btnadd, BorderLayout.NORTH);

        panel = new JPanel();
        frame.getContentPane().add(panel, BorderLayout.SOUTH);
        panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));

        btnpr = new JButton("draw rectangle");
        panel.add(btnpr);

        btnkr = new JButton("cursor");
        panel.add(btnkr);

        btnadd.addActionListener(new OtworzOknoWyboruInstruDoWykres(this));
        // ==================================================================================================================================
        // Action listener rectangle
        btnpr.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                try {
                    chartpanel.removeMouseListener(mouselistenerProstokat);
                    chartpanel
                            .removeMouseMotionListener(mousemotionlistenerProstokat);
                    chartpanel.removeMouseListener(mouselistenercursor);
                    chartpanel
                            .removeMouseMotionListener(mousemotionlistenercursor);
                    chartpanel
                            .removeMouseWheelListener(mousewheellistenercursor);
                    chartpanel.setPopupMenu(null);
                } catch (Exception e) {
                }

                flagrectangle = true;

                chartpanel.addMouseListener(mouselistenerProstokat);
                chartpanel.addMouseMotionListener(mousemotionlistenerProstokat);

                currentx = chartpanel.getLocationOnScreen().x;
                currenty = Math.abs(chartpanel.getLocationOnScreen().y
                        - frame.getLocationOnScreen().y);
            }
        });
        // ==================================================================================================================================
        // ==================================================================================================================================
        // Action listener cursor
        btnkr.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                try {
                    chartpanel.removeMouseListener(mouselistenerProstokat);
                    chartpanel
                            .removeMouseMotionListener(mousemotionlistenerProstokat);
                    chartpanel.removeMouseListener(mouselistenercursor);
                    chartpanel
                            .removeMouseMotionListener(mousemotionlistenercursor);
                    chartpanel
                            .removeMouseWheelListener(mousewheellistenercursor);
                    chartpanel.setPopupMenu(null);
                } catch (Exception e) {
                }

                flagrectangle = false;

                chartpanel.addMouseListener(mouselistenercursor);
                chartpanel.addMouseMotionListener(mousemotionlistenercursor);
                chartpanel.addMouseWheelListener(mousewheellistenercursor);

            }
        });
        // ==================================================================================================================================

    }

    class OtworzOknoWyboruInstruDoWykres implements ActionListener {
        private TabbedPaneTEST okno;

        public OtworzOknoWyboruInstruDoWykres(TabbedPaneTEST okno) {
            super();
            this.okno = okno;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            formchild FrameDoInstruWyk = null;
            FrameDoInstruWyk = new formchild();
            FrameDoInstruWyk.setOkno(okno);
        }
    }

    List<ChartPanel> CPlist = new ArrayList<>();

    public void DodajWykresInstrumentu(String string) {

        double[] value = new double[1];
        Random generator = new Random();
        value[0] = generator.nextDouble();
        XYSeries series = new XYSeries("Random Data");
        series.add(1.0, 400.2);
        series.add(5.0, 294.1);
        series.add(4.0, 100.0);
        series.add(12.5, 734.4);
        series.add(17.3, 453.2);
        series.add(21.2, 500.2);
        series.add(21.9, null);
        series.add(25.6, 734.4);
        series.add(30.0, 453.2);
        XYSeriesCollection dataset = new XYSeriesCollection(series);
        String plotTitle = "sometitle";
        String xaxis = "number";
        String yaxis = "value";
        PlotOrientation orientation = PlotOrientation.VERTICAL;
        boolean show = false;
        boolean toolTips = false;
        boolean urls = false;

        JFreeChart chart = ChartFactory.createHistogram(plotTitle, xaxis,
                yaxis, dataset, orientation, show, toolTips, urls);
        subplot1 = (XYPlot) chart.getPlot();
        chartpanel = new ChartPanel(chart) {
            @Override
            public void restoreAutoBounds() {

            }
        };
        chartpanel.setRangeZoomable(false);
        chartpanel.setDomainZoomable(true);
        chartpanel.setDismissDelay(400);
        chartpanel.setZoomTriggerDistance(-1000);
        chartpanel.setMouseZoomable(false);

        CPlist.add(chartpanel);
        tabbedPane.addTab(string, chartpanel);

    }

    private double pointstartxrange;
    private double pointendxrange;
    private double pointstartx;
    private double pointstarty;
    private double pointendx;
    private double pointendy;
    Point pointstart = null;
    Point pointend = null;

    // ==================================================================================================================================
    // mouse listener cursor
    MouseListener mouselistenercursor = new MouseListener() {

        @Override
        public void mouseReleased(MouseEvent e) {
        }

        @Override
        public void mousePressed(MouseEvent e) {
            Point pointstart = e.getPoint();
            Point2D point = chartpanel.translateScreenToJava2D(pointstart);
            Rectangle2D plotArea = chartpanel.getScreenDataArea();

            pointstartxrange = subplot1.getDomainAxis().java2DToValue(
                    point.getX(), plotArea, subplot1.getDomainAxisEdge());
        }

        @Override
        public void mouseExited(MouseEvent e) {
        }

        @Override
        public void mouseEntered(MouseEvent e) {
        }

        @Override
        public void mouseClicked(MouseEvent e) {
        }
    };

    MouseMotionListener mousemotionlistenercursor = new MouseMotionListener() {

        @Override
        public void mouseMoved(MouseEvent arg0) {
        }

        @Override
        public void mouseDragged(MouseEvent arg0) {
            Point pointstart = arg0.getPoint();
            Point2D point = chartpanel.translateScreenToJava2D(pointstart);
            Rectangle2D plotArea = chartpanel.getScreenDataArea();

            pointendxrange = subplot1.getDomainAxis().java2DToValue(
                    point.getX(), plotArea, subplot1.getDomainAxisEdge());

            double roznica = (pointendxrange - pointstartxrange) * (-1);

            double mini = subplot1.getDomainAxis().getRange().getLowerBound()
                    + roznica / 10;
            double maxi = subplot1.getDomainAxis().getRange().getUpperBound()
                    + roznica / 10;
            double maximumRange = subplot1.getDataRange(
                    subplot1.getDomainAxis()).getUpperBound();
            double minimumRange = subplot1.getDataRange(
                    subplot1.getDomainAxis()).getLowerBound();

            if (mini >= minimumRange - 50D
                    && pointstartxrange <= pointendxrange) {
                Range range = new Range(mini, maxi);
                subplot1.getDomainAxis().setRange(range, true, true);
                pointstartxrange = pointstartxrange + roznica / 10;
                pointendxrange = pointendxrange + roznica / 10;
            } else if (maxi <= maximumRange + 50D
                    && pointstartxrange >= pointendxrange) {
                Range range = new Range(mini, maxi);
                subplot1.getDomainAxis().setRange(range, true, true);
                pointstartxrange = pointstartxrange + roznica / 10;
                pointendxrange = pointendxrange + roznica / 10;
            }

        }
    };
    MouseWheelListener mousewheellistenercursor = new MouseWheelListener() {

        int zoomCounter = 0;

        @Override
        public void mouseWheelMoved(MouseWheelEvent arg0) {

            System.out.println(zoomCounter);

            if (arg0.getWheelRotation() > 0) {
                if (zoomCounter > (-5)) {
                    chartpanel.zoomOutDomain(MouseInfo.getPointerInfo()
                            .getLocation().x, MouseInfo.getPointerInfo()
                            .getLocation().y);
                    zoomCounter = zoomCounter - 1;
                }

            } else if (arg0.getWheelRotation() < 0) {
                if (zoomCounter < 5) {
                    chartpanel.zoomInDomain(MouseInfo.getPointerInfo()
                            .getLocation().x, MouseInfo.getPointerInfo()
                            .getLocation().y);
                    zoomCounter = zoomCounter + 1;
                }

            }
        }
    };
    // ==================================================================================================================================

    // ==================================================================================================================================
    // Drawing rectangle

    private MouseListener mouselistenerProstokat = new MouseListener() {

        @Override
        public void mouseReleased(MouseEvent e) {
            Point2D point = chartpanel.translateScreenToJava2D(e.getPoint());
            Rectangle2D plotArea = chartpanel.getScreenDataArea();

            pointendx = subplot1.getDomainAxis().java2DToValue(point.getX(),
                    plotArea, subplot1.getDomainAxisEdge());
            pointendy = subplot1.getRangeAxis().java2DToValue(point.getY(),
                    plotArea, subplot1.getRangeAxisEdge());

            chartfigura();

            pointstart = null;

        }

        @Override
        public void mousePressed(MouseEvent e) {
            Point2D point = chartpanel.translateScreenToJava2D(e.getPoint());
            Rectangle2D plotArea = chartpanel.getScreenDataArea();

            pointstartx = subplot1.getDomainAxis().java2DToValue(point.getX(),
                    plotArea, subplot1.getDomainAxisEdge());
            pointstarty = subplot1.getRangeAxis().java2DToValue(point.getY(),
                    plotArea, subplot1.getRangeAxisEdge());

            pointstart = e.getPoint();
        }

        @Override
        public void mouseExited(MouseEvent e) {
        }

        @Override
        public void mouseEntered(MouseEvent e) {
        }

        @Override
        public void mouseClicked(MouseEvent e) {
        }

    };
    private MouseMotionListener mousemotionlistenerProstokat = new MouseMotionListener() {

        @Override
        public void mouseMoved(MouseEvent e) {
            pointend = e.getPoint();
        }

        @Override
        public void mouseDragged(MouseEvent arg0) {
            chartpanel.setMouseZoomable(false);
            pointend = arg0.getPoint();
            repaint();
        }

    };
    private boolean flagrectangle;
    private int datasetIndex;

    private Shape createRectangle(double startx, double starty, double endx,
            double endy) {
        Rectangle2D e = new Rectangle2D.Double();
        e.setFrameFromDiagonal(startx, starty, endx, endy);
        return e;
    }

    // ==================================================================================================================================
    // ==================================================================================================================================

    private void chartfigura() {

        float alpha = 0.75f;
        int type = AlphaComposite.SRC_OVER;
        AlphaComposite composite = AlphaComposite.getInstance(type, alpha);

        if (flagrectangle == true) {
            datasetIndex++;
            subplot1.setDataset(datasetIndex,
                    Annotacja("rect", pointstartx, pointstarty));
            XYLineAndShapeRenderer rendererShape = new XYLineAndShapeRenderer();
            rendererShape.setBaseShapesVisible(false);
            Rectangle2D rectangle = (Rectangle2D) createRectangle(pointstartx,
                    pointstarty, pointendx, pointendy);
            rendererShape.addAnnotation(new XYShapeAnnotation(rectangle,
                    new BasicStroke(1.0f), Color.BLACK, new Color(255, 90, 100,
                            128)), Layer.BACKGROUND);
            subplot1.setRenderer(datasetIndex, rendererShape);
        }
    }

    // ==================================================================================================================================

    public XYSeriesCollection Annotacja(final String name, double wartosc1,
            double data1) {
        final XYSeries series = new XYSeries(name);
        series.add(wartosc1, data1);

        return new XYSeriesCollection(series);
    }

    // ==================================================================================================================================

    int currentx;
    int currenty;
    public JPanel panel;
    public JButton btnpr;
    public JButton btnkr;

    // ==================================================================================================================================

    public void paint(Graphics g) {
        super.paint(g);
        g.translate(currentx, currenty);

        ((Graphics2D) g).setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        if (pointstart != null) {
            if (flagrectangle == true) {
                g.setClip(chartpanel.getBounds());
                g.setColor(Color.BLACK);
                ((Graphics2D) g).draw(createRectangle(pointstart.x,
                        pointstart.y, pointend.x, pointend.y));
            }

        }
    }

    // ==================================================================================================================================

}

class formchild extends JFrame {
    public JFrame frame = this;
    public JPanel panel;
    public JPanel panel_1;
    public JTable table;
    public JPanel panel_2;
    public JButton btnOk;
    public JButton btnOK;
    public JScrollPane scrollPane;
    private TabbedPaneTEST okno;
    public JTextField textField;
    JButton button = new JButton();
    public JLabel lblSzukajFrazy;

    public formchild() {

        frame.setMinimumSize(new Dimension(400, 450));
        frame.setPreferredSize(new Dimension(400, 450));

        panel = new JPanel();
        frame.getContentPane().add(panel, BorderLayout.NORTH);
        panel.setLayout(new MigLayout("", "[544px]", "[23px]"));

        panel_1 = new JPanel();
        frame.getContentPane().add(panel_1, BorderLayout.CENTER);
        panel_1.setLayout(new BorderLayout(0, 0));

        panel_2 = new JPanel();
        FlowLayout flowLayout = (FlowLayout) panel_2.getLayout();
        flowLayout.setAlignment(FlowLayout.RIGHT);
        frame.getContentPane().add(panel_2, BorderLayout.SOUTH);

        btnOK = new JButton("OK");
        btnOK.setPreferredSize(new Dimension(70, 23));
        panel_2.add(btnOK);
        btnOK.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                frame.dispose();
                okno = null;
            }
        });

        String[] nazwyKolumn = { "element", "button" };

        String[][] data = new String[10][2];

        for (int i = 0; i < 10; i++) {
            data[i][0] = "a" + i;
            data[i][1] = "add";
        }

        table = new JTable(data, nazwyKolumn);
        table.setAutoCreateRowSorter(true);

        table.getColumn("button").setMaxWidth(70);
        table.getColumn("button").setCellRenderer(new ButtonRenderer());
        table.getColumn("button").setCellEditor(
                new ButtonEditor(new JCheckBox()));
        table.setRowHeight(30);
        scrollPane = new JScrollPane(table);
        panel_1.add(scrollPane, BorderLayout.CENTER);

        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                System.out.println(table.getValueAt(table.getSelectedRow(), 0));

                okno.DodajWykresInstrumentu((table.getValueAt(
                        table.getSelectedRow(), 0)).toString());

            }
        });

        frame.validate();
        frame.show();
    }

    public void setOkno(TabbedPaneTEST okno) {
        this.okno = okno;
    }

    class ButtonRenderer extends JButton implements TableCellRenderer {
        public ButtonRenderer() {
            setOpaque(true);
        }

        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
            setText((value == null) ? "" : value.toString());
            return this;
        }
    }

    class ButtonEditor extends DefaultCellEditor {
        private String label = "add";

        public ButtonEditor(JCheckBox checkBox) {
            super(checkBox);
        }

        public Component getTableCellEditorComponent(JTable table,
                Object value, boolean isSelected, int row, int column) {
            label = (value == null) ? "" : value.toString();
            button.setText(label);
            return button;
        }

        public Object getCellEditorValue() {
            return new String(label);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:40:25.337

您的示例覆盖`JFrame`及其`paint()`替换通常由`ChartPanel`. 相反，扩展`ChartPanel`和覆盖`paintComponent()`，然后您创建的每个面板将有一个具有新功能的图表。

*   您可以更可靠地控制可用的侦听器。
*   [您可以使控制面板可用，如此处](https://stackoverflow.com/a/11944233/230513)所示。
*   正如[*在 AWT 和 Swing 中的绘画：绘画方法中*](http://www.oracle.com/technetwork/java/painting-140037.html#callbacks)所讨论的，“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:10:35.407

听起来您正在寻找观察者模式来处理其他 GUI 组件上的事件。

看看[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)。

基本理念是，每当一个事件发生时（比如在图表中绘制一个三角形），那么所有监听所述事件的类都会收到您认为与该事件相关的任何信息。

网上有很多关于它的文献/例子。

# python - 以特定频率并行发送电子邮件

> ID：12561992
> 
> 赞同：4
> 
> 时间：2012-09-24T09:13:08.043
> 
> 标签：python, multiprocessing

我正在尝试并行发送 5 封电子邮件。函数*scheduleEmails*将 5 个电子邮件地址的列表作为输入。我的代码如下所示：

```
import multiprocessing
import smtplib

def sendMail(email):
    #sends email using smtplib
    # returns True in case of success, False in case of failure

def scheduleEmails(emailLst):
    """
    emailLst is a list of list of 5 emails
    emailLst = [[emailAddr1,emailAddr2,emailAddr3...emailAddr5],
                [emailAddr6...emailAddr10],
                [emailAddr11... emailAddr[15],...]
    """
    FREQUENCY = 5 # no. of emails to be send per second
    for i in range(len(emailLst)):
            p = multiprocessing.Pool(FREQUENCY)
            emails = emailLst[i]
            results = p.map(sendEmail,emails)

 scheduleEmails(someEmailLst) 
```

该代码运行良好，但一段时间后，它挂起。您能否指出错误或提出更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T09:26:34.287

在“一段时间”之后，您产生了多少个子进程？为确保不会向您的系统发送大量子进程的垃圾邮件，请在收集结果后显式[关闭多处理池。](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.close)此外，我在您的代码中看不到任何控制实际`frequency`发送电子邮件的逻辑。假设您有 1000 个 5 封电子邮件列表`emailLst`。您的循环将尽可能快地生成 1000 个多处理池，即 5000 个子进程。您需要实现一些计时/调度代码。在最简单的情况下，这将是`time.sleep(1)`您的循环中的一个。

此外，多进程处理并不适合这个问题，因为发送邮件不受 CPU 限制。我猜你的情况甚至不是 I/O 绑定的。您可以考虑`threading`将阻塞调用外包给线程而不是子进程。

# php - 我的 PHP 代码被注释掉了

> ID：12561993
> 
> 赞同：2
> 
> 时间：2012-09-24T09:13:10.643
> 
> 标签：php, xampp

在一切发生之前，我正在运行这个 wordpress 安装程序以使用 xampp 开发主题。但我决定将这台机器的内存从 2GB 升级到 6GB，因为我需要额外的应用程序空间。我通过复制将代码备份在单独的分区中。由于我当时有32位操作系统，所以我格式化计算机并安装了64位版本。操作系统方面一切都很好。

当我设置我的 web 开发环境时，出现了问题。

当我重新导入我的 htdocs 时，首先将它们完全复制到新安装的 xampp 中，然后注意所有放置的代码都不起作用。我的 CI 代码正在浏览器中显示我的 PHP 代码。当我查看源代码时，我在 wordpress 中的主题也是注释掉我的 PHP 代码。我的新 wordpress 安装中包含的主题有效，所以我在这里缺少一些东西。

![当我激活它时我的 Wordpress 主题](../Images/ac130b4cda6c6875f36f224f68f9efb6.png)

![我浏览时的 CodeIgniter 应用程序](../Images/887f6acd94af02c88141432db19a961d.png)

从它的外观来看，由于我安装的任何东西都可以正常执行，因此 php 正在正确执行。只是那些来自以前的 xampp 的不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:44:32.900

打开`php.ini`文件并设置`short_open_tag = On`. 然后重启apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T19:00:22.260

如果您直接在 Web 浏览器中打开本地脚本，可能是通过您的编辑器，双击文件或将文件拖放到浏览器中 - 它只会被视为 HTML。

`http://localhost/your-file.php`相反，通过在地址栏中键入... 打开文件。我个人在 htdocs 文件夹中创建了一个项目文件夹，然后为...创建一个书签`http://localhost/projects/` ，这将显示我保存到我的项目文件夹中的所有项目。

注意：如果您更改了 Apache 服务器的邮件端口，您还需要将其添加到路径中。例如。如果你的主端口是 8888，你会这样做......`http://localhost:8080/your-file.php`

我有同样的问题，这对我有用。祝你好运

# windows - 如何从 XP 上的资源管理器中恢复 bat 文件执行

> ID：12561999
> 
> 赞同：0
> 
> 时间：2012-09-24T09:13:36.523
> 
> 标签：windows, batch-file, windows-xp

一些 bat 文件需要在会话开始时启动，但它们不需要。

实际上，当尝试从资源管理器中启动一个时，它会打开`Open with`窗口而不是运行。但是，bat 文件仍然可以在命令提示符下正确运行。

我敢打赌它是由病毒引起的，但不幸的是，防病毒软件没有检测到任何东西。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:29:24.580

使用“打开方式”命令，选择 cmd.exe，然后在点击“确定”之前，选中“始终使用此程序打开此类文件”或类似内容的框。

如果 cmd.exe 不在选项中，请浏览到 c:\windows\system32，cmd.exe 应该在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:18:46.177

您可以通过从下面的链接下载批处理的 reg 文件来重新关联扩展名，这应该可以解决您的问题。

[http://www.dougknox.com/xp/file_assoc.htm](http://www.dougknox.com/xp/file_assoc.htm)