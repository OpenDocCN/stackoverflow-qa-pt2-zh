# StackOverflow 问答 14277000-14277999

# php - PHP：使用 php mailer 发送 ical

> ID：14277002
> 
> 赞同：2
> 
> 时间：2013-01-11T11:14:58.327
> 
> 标签：php, phpmailer, icalendar, vcal

我正在尝试使用 php 邮件程序发送 ical

这里是我的功能

```
function sendIcalEmail($firstname,$lastname,$email,$meeting_date,$meeting_name,$meeting_duration) {

    //Convert MYSQL datetime and construct iCal start, end and issue dates
    $meetingstamp = strtotime($meeting_date . " UTC");    
    $dtstart= gmdate("Ymd\THis\Z",$meetingstamp);
    $dtend= gmdate("Ymd\THis\Z",$meetingstamp+$meeting_duration);
    $todaystamp = gmdate("Ymd\THis\Z");

    //Create unique identifier
    $cal_uid = date('Ymd').'T'.date('His')."-".rand()."@mydomain.com";

    //Create Mime Boundry
    $mime_boundary = "----Meeting Booking----".md5(time());

    //Create Email Headers
    $headers = "From: ".$from_name." <".$from_address.">\n";
    $headers .= "Reply-To: ".$from_name." <".$from_address.">\n";

    $headers .= "MIME-Version: 1.0\n";
    $headers .= "Content-Type: multipart/alternative; boundary=\"$mime_boundary\"\n";
    $headers .= "Content-class: urn:content-classes:calendarmessage\n";

    //Create Email Body (HTML)
        $message = '';
    $message .= "--$mime_boundary\n";
    $message .= "Content-Type: text/html; charset=UTF-8\n";
    $message .= "Content-Transfer-Encoding: 8bit\n\n";

    $message .= "<html>\n";
    $message .= "<body>\n";
    $message .= '<p>Dear '.$firstname.' '.$lastname.',</p>';
    $message .= '<p>Here is my HTML Email / Used for Meeting Description</p>';    
    $message .= "</body>\n";
    $message .= "</html>\n";
    $message .= "--$mime_boundary\n";

    //Create ICAL Content (Google rfc 2445 for details and examples of usage) 
    $ical =    'BEGIN:VCALENDAR
PRODID:-//Microsoft Corporation//Outlook 11.0 MIMEDIR//EN
VERSION:2.0
METHOD:PUBLISH
BEGIN:VEVENT
ORGANIZER:MAILTO:'.$from_address.'
DTSTART:'.$dtstart.'
DTEND:'.$dtend.'
LOCATION:'.$meeting_location.'
TRANSP:OPAQUE
SEQUENCE:0
UID:'.$cal_uid.'
DTSTAMP:'.$todaystamp.'
DESCRIPTION:'.$meeting_description.'
SUMMARY:'.$subject.'
PRIORITY:5
CLASS:PUBLIC
END:VEVENT
END:VCALENDAR';   

    $message .= 'Content-Type: text/calendar;name="meeting.ics";method=REQUEST;charset=utf-8\n';
    $message .= 'Content-Type: text/calendar;name="meeting.ics";method=REQUEST\n';
    $message .= "Content-Transfer-Encoding: 8bit\n\n";
    $message .= $ical;            

    //SEND MAIL

    $mail->AddAddress($email);

    $mail->Subject =  $subject;
    $mail->IsHTML(true);
    //$mail->AddAttachment($message);
    $mail->Body =$message;
    if(!$mail->Send())
    {
        $message= "Error sending: " . $mail->ErrorInfo;

    }

} 
```

我正在使用 php 邮件程序，但不幸的是邮件不是以 ical 格式发送的。

请告诉我我做错了什么。

我也没有办法通过这封邮件发送标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T15:29:49.780

将以下行添加到您的 phpMailer 脚本中。我花了几个小时才发现自己！

$mail->AddStringAttachment("$ical", "$nameofattachtment", "base64", "text/calendar; charset=utf-8; method=REQUEST");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:14:51.847

尝试添加“多部分/替代”的内容类型。从我的一个有效的功能中复制（它使用 PEAR 的邮件）：

```
protected function eF_mail_multipart($sender, $recipient, $subject, $textbody, $calendarbody, $onlyText = false, $bcc = false) {

        $hdrs = array('From'    => $sender,
                'Subject' => $subject,
                //'To'      => $recipient,
                'Date' => date("r"));
        if ($bcc) {
            //$hdrs['To'] = '';
        }

        $params = array("text_charset" => "UTF-8",
                "html_charset" => "UTF-8",
                "head_charset" => "UTF-8",
                "head_encoding" => "base64");

        $textparams = array(
                'charset'       => 'utf-8',
                'content_type'  => 'text/plain',
                'encoding'      => 'base64',
        );

        $calendarparams = array(
                'charset'       => 'utf-8',
                'content_type'  => 'text/calendar;method=REQUEST',
                'encoding'      => 'base64',
        );

        $email = new Mail_mimePart('', array('content_type' => 'multipart/alternative'));

        $textmime = $email->addSubPart($textbody, $textparams);
        $htmlmime = $email->addSubPart($calendarbody, $calendarparams);

        $final = $email->encode();
        $final['headers'] = array_merge($final['headers'], $hdrs);

        $smtp = Mail::factory('smtp', array('auth'      => $GLOBALS['configuration']['smtp_auth'] ? true : false,
                'host'      => $GLOBALS['configuration']['smtp_host'],
                'password'  => $GLOBALS['configuration']['smtp_pass'],
                'port'      => $GLOBALS['configuration']['smtp_port'],
                'username'  => $GLOBALS['configuration']['smtp_user'],
                'timeout'   => $GLOBALS['configuration']['smtp_timeout'],
                'localhost' => $_SERVER["HTTP_HOST"]));

        $result = $smtp -> send($recipient, $final['headers'], $final['body']);

        return $result;
    } 
```

# php - 将 php / mysql 列输出显示为行

> ID：14277003
> 
> 赞同：1
> 
> 时间：2013-01-11T11:15:02.600
> 
> 标签：php, mysql

我有以下用于在 PHP 中显示 MySQL 查询的语法：

```
 function get_dayssincecapture($db)  
  {    
    $result = $db->query("SELECT DATEDIFF(now(), sarrive)as days,count(loadnumber) as loads from v2loads where  adminstatus='captured' group by DATEDIFF(now(), sarrive) "); 
    return $result; 
  } 
  $dayssincecapture = get_dayssincecapture($db); 
```

显示语法：

```
<table border=1>
    <tr>
    <? while($row = $dayssincecapture->fetch(PDO::FETCH_ASSOC)) { ?>
    <td><? echo $row['days']; ?><br><? echo $row['loads']; ?></td>
    <? } ?>
    </tr>
</table> 
```

这会产生以下屏幕输出

![在此处输入图像描述](../Images/7a1a88217dff844548dc194766d0bcc6.png)

如何通过表语法进行更改，以便将天字段作为行标题，将负载字段作为表的第二行？

所以我想要的是：

![在此处输入图像描述](../Images/68d0517065544532255b8efc6de1b469.png)

一如既往地感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:19:49.267

尝试：

```
<?php
$dayssincecapture = get_dayssincecapture($db); 
$data = array('days' => array(), 'loads' => array());

while($row = $dayssincecapture->fetch(PDO::FETCH_ASSOC)) {
    $data['days'][]  = $row['days'];
    $data['loads'][] = $row['loads'];
}
?>

<table style="border: 1px solid #000">
    <tr>
        <td>Days</td>
        <?php foreach ( $data['days'] as $day ) { ?>
            <td><?php echo $day; ?></td>
        <?php } ?>
    </tr>
    <tr>
        <td>Loads</td>
        <?php foreach ( $data['loads'] as $load ) { ?>
            <td><?php echo $load; ?></td>
        <?php } ?>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:24:01.433

如果您想在 MySQL 中执行这种类型的转换，那么您将*旋转*数据。MySQL 没有数据透视函数，但您可以使用带有`CASE`语句的聚合函数来复制它：

```
select 
  count(case when DATEDIFF(now(), sarrive) = 1 then loadnumber end) as Day_1,
  count(case when DATEDIFF(now(), sarrive) = 2 then loadnumber end) as Day_2,
  count(case when DATEDIFF(now(), sarrive) = 3 then loadnumber end) as Day_3,
  count(case when DATEDIFF(now(), sarrive) = 4 then loadnumber end) as Day_4,
  count(case when DATEDIFF(now(), sarrive) = 5 then loadnumber end) as Day_5,
  count(case when DATEDIFF(now(), sarrive) = 6 then loadnumber end) as Day_6,
  count(case when DATEDIFF(now(), sarrive) = 7 then loadnumber end) as Day_7
from v2loads
where adminstatus='captured' 
```

您还可以在准备好的语句中编写此代码以动态创建它，因为值将是未知的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:38:01.883

你可以试试：

```
<?php

while($row = $dayssincecapture->fetch(PDO::FETCH_ASSOC)) {
    $days_row .= "<td>" . $row['days'] . "</td>";
    $loads_row .= "<td>" . $row['loads'] . "</td>";
}

?>
<table> 

  <tr>
    <td>Days</td>
    <?php echo $days_row; ?>
  </tr>
  <tr>
    <td>Loads</td>
    <?php echo $loads_row; ?>
  </tr>
</table> 
```

# java - 如何在 Java 中对带有整数的字符串进行排序？

> ID：14277004
> 
> 赞同：2
> 
> 时间：2013-01-11T11:15:11.610
> 
> 标签：java, arrays, string, ascii, compareto

我有一个数组。我的数组中的每个空间都包含两个字符串（一个字符串只包含字母，另一个包含数字）。

我现在要做的是按字母顺序或数字顺序对数组进行排序（取决于选择数组中的哪个空间）。为此，我使用 compareTo() 方法。但是，我发现当我尝试根据数字对数组进行排序时，它实际上并没有真正起作用。

我的猜测是，由于 Java 使用 ascii 代码处理字符串，因此数字不会按数字顺序显示。

问题：我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:19:20.627

对于比较数字，这可能会有所帮助。

字母算法

来自网站：[http ://www.davekoelle.com/alphanum.html](http://www.davekoelle.com/alphanum.html)

人们对带有数字的字符串进行排序与​​软件不同。大多数排序算法比较 ASCII 值，这会产生与人类逻辑不一致的排序。这是修复它的方法。

这是来自该站点的 Java 比较器实现的链接。 [http://www.davekoelle.com/files/AlphanumComparator.java](http://www.davekoelle.com/files/AlphanumComparator.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:20:40.133

在您的`compareTo()`方法中，当您检测到您正在查看表示整数的两个字符串时，请确保它们的长度相同，然后再进行比较。如果一个字符串较短，则在其前面添加前导零，直到字符串长度相等。

例如，`32`and`123`用于与默认算法不正确比较：`3`更大，因此`32`比较为 after `132`。但是，一旦您在前面加上零，比较就会再次起作用：`032`小于`123`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:23:26.280

是的，你是对的，字符串是根据它们的 Unicode 代码点值排序的。这意味着“2”小于“a”且大于“11”。

我怀疑您正在寻找*Natural Sort Order*。[Java String Number Comparator](https://stackoverflow.com/questions/7270447/java-string-number-comparator)是一篇很棒的 SO 帖子，详细介绍了它，您可以在 SO 帖子中找到实际实现[Java 中的自然排序顺序字符串比较 - 是内置的吗？](https://stackoverflow.com/questions/1262239/natural-sort-order-string-comparison-in-java-is-one-built-in)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:21:05.413

您可以使用 Long(or)Folat.isNaN() 方法来检查其编号或刺痛，然后使用该方法进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T11:26:41.890

在对字符串进行数字排序之前，先将它们转换为数字。

# javascript - Backbone.js 和本地存储。必须指定“url”属性或函数

> ID：14277010
> 
> 赞同：3
> 
> 时间：2013-01-11T11:15:31.173
> 
> 标签：javascript, jquery, backbone.js, local-storage

我正在提高对 Backbone.js 的了解，并从教程中获取此代码示例。（[http://bardevblog.wordpress.com/2012/01/16/understanding-backbone-js-simple-example/](http://bardevblog.wordpress.com/2012/01/16/understanding-backbone-js-simple-example/)）

这个例子暂时不会访问服务器，所以为了模拟从服务器检索数据，我有一个文件名movies.json。

我正在尝试做的事情：

*   在本地存储中添加 json 数据（使用 localStorage 适配器）
*   为此，我使用 Backbone.ajaxSync，它由 localStorage 适配器赋予别名 Backbone.sync：我创建了方法 refreshFromServer () 来执行此操作
*   这样做的原因是我试图实现一种只获取一次数据的方法（并且只在需要时刷新）

我的问题：当我调用 refreshFromServer () 时，出现错误“未捕获的**错误：必须指定 'url' 属性或函数”。**我不明白为什么，因为我设置了 url 集合。（网址：“脚本/数据/movies.json”）

示例代码

```
var Theater = {
    Models : {},
    Collections : {},
    Views : {},
    Templates : {}
}

Theater.Models.Movie = Backbone.Model.extend({})
Theater.Collections.Movies = Backbone.Collection.extend({
    model : Theater.Models.Movie,
    localStorage : new Backbone.LocalStorage("MovieStore"), // Unique name within your app.
    url : "scripts/data/movies.json",
    refreshFromServer : function() {
        return Backbone.ajaxSync.apply(this, arguments);
    },
    initialize : function() {
        console.log("Movies initialize")
    }
});

Theater.Templates.movies = _.template($("#tmplt-Movies").html())

Theater.Views.Movies = Backbone.View.extend({
    el : $("#mainContainer"),
    template : Theater.Templates.movies,

    initialize : function() {

        this.collection.bind("reset", this.render, this);
    },

    render : function() {
        console.log("render")
        console.log(this.collection.length);

    }
})

Theater.Router = Backbone.Router.extend({
    routes : {
        "" : "defaultRoute"
    },

    defaultRoute : function() {
        console.log("defaultRoute");
        Theater.movies = new Theater.Collections.Movies()
        new Theater.Views.Movies({
            collection : Theater.movies
        });
        Theater.movies.refreshFromServer();
        //Theater.movies.fetch();
        console.log(Theater.movies.length)
    }
})

var appRouter = new Theater.Router();
Backbone.history.start(); 
```

**笔记：**

*   如果集合中的注释 localStorage 属性

    Theater.Models.Movie = Backbone.Model.extend({}) Theater.Collections.Movies = Backbone.Collection.extend({ model : Theater.Models.Movie, //localStorage : new Backbone.LocalStorage("MovieStore") 。 .. });

    然后在路由器中调用正常的 fetch 方法

    Theater.Router = Backbone.Router.extend({ routes : { "" : "defaultRoute" },

    ```
    defaultRoute : function() {

        Theater.movies = new Theater.Collections.Movies()
        new Theater.Views.Movies({
            collection : Theater.movies
        });
        //Theater.movies.refreshFromServer();
        Theater.movies.fetch();
    } 
    ```

    })

我可以在我的视图中正确地看到 json 列表

*   如果我在集合中使用 localStorage 属性，然后调用标准的 fetch() 方法，我只看到一个空列表（我认为这是正常的，因为它是从本地存储中读取的并且是空的）

*   该错误仅在使用方法 refreshFromServer () 巫婆使用 Backbone.ajaxSync（backbone.sync 的别名）时发生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:30:20.660

*呃……我的错。`refreshFromServer`实施来自我对您[之前问题](https://stackoverflow.com/questions/14071203/backbone-collection-from-json-file-and-cache-on-localstorage)的回答。，这完全是无用的错误。*

`Backbone.sync`期望 arguments `(method, model, options)`，但就目前而言，它没有得到它需要的东西，`refreshFromServer`因为 refresh 方法只是将`arguments`它得到的东西发送出去。对不起这个错误。

正确的工作实施将是：

```
refreshFromServer : function(options) {
    return Backbone.ajaxSync('read', this, options);
} 
```

它可以通过`success`/`error`传递给`options`哈希的回调来使用：

```
this.collection.refreshFromServer({ success: function() { /* refreshed... */ }); 
```

或者通过 jqXHR Promise API：

```
this.collection.refreshFromServer().done(function() { /* refreshed... */ }) 
```

或者不注册回调并等待`reset`您的示例中的收集事件：

```
this.collection.bind("reset", this.render, this);
this.collection.refreshFromServer(); 
```

这应该有效。如果没有，请告诉我。我也在上一个问题中修正了我的答案，以防有人偶然发现它。

**编辑：**要在刷新后将数据保存到本地存储，您需要手动`save`每个模型：

```
var collection = this.collection;
collection.refreshFromServer({success: function(freshData) {
    collection.reset(freshData);
    collection.each(function(model) {
        model.save();
    });
}}); 
```

# exec - RunTime.exec("su") 的问题

> ID：14277014
> 
> 赞同：0
> 
> 时间：2013-01-11T11:15:40.607
> 
> 标签：exec, root, su

我想从我的应用程序运行一些 shell 命令，但是当我运行时： Process process = Runtime.getRuntime().exec(su); 我有一个错误：su: uid XXXXX not allowed to su. 我不明白为什么，因为我认为我的手机植根于 adb shell su 正在工作。有谁知道我错过了什么？

# c# - 苹果在 C# 中推送通知提供程序

> ID：14277018
> 
> 赞同：13
> 
> 时间：2013-01-11T11:15:53.613
> 
> 标签：c#, ios, objective-c, push-notification

我对 Apple 推送通知服务完全陌生。我正在尝试为我的应用程序实现它。我在 google 和 stackoverflow 中搜索得很好，但并不满意。我正在尝试在 c# 中实现提供程序。我也尝试过 MoonAPNs。

这里的任何人都可以建议我很好的分步教程，非常简单。我已经获得了 ios developer 和 apn 证书以及 p12 密钥。然后我需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T15:07:36.410

这是我正在使用的基础设施和流程：

简要概述：我使用[PushSharp](https://github.com/Redth/PushSharp)与 APNS 服务器进行通信。我有一个 SQL Server 后端数据库设置来处理所有发送的订阅和通知。我还有一个虚拟服务器（实际上是几个），它们都将 .p12 证书复制到它们。这些服务器具有检查表中是否有任何需要发出的推送通知然后将数据集传递给 PushSharp 进程的进程。

详细规格：表 1 - APNS_Subscriptions

```
CREATE TABLE [dbo].[APNS_Subscriptions](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [DeviceToken] [varchar](250) NULL,
    [DeviceID] [varchar](250) NULL,
    [NetworkID] [varchar](250) NULL,
    [Application] [varchar](250) NULL,
    [AddedOn] [datetime] NULL,
    [Active] [bit] NULL,
    [Dev] [bit] NULL,
    [BadgeCount] [int] NOT NULL,
 CONSTRAINT [PK_APNSSubscriptions] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

表 2 - APNS_PushNotifications

```
CREATE TABLE [dbo].[APNS_PushNotifications](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [DeviceToken] [varchar](250) NULL,
    [AlertMessage] [varchar](250) NULL,
    [BadgeNumber] [int] NULL,
    [SoundFile] [varchar](250) NULL,
    [ApplicationName] [varchar](250) NULL,
    [AddedOn] [datetime] NULL,
    [AddedBy] [varchar](250) NULL,
    [ProcessedOn] [datetime] NULL,
    [ViewedOnDeviceDateTime] [datetime] NULL,
 CONSTRAINT [PK_APNS_PushNotifications] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我通过这个 SP 添加订阅（这是通过每个实现 APNS 的 iPhone 应用程序通过网络服务调用的：

```
[ins_APNS_Sub]
    @MyDeviceID VARCHAR(250) ,
    @MyDeviceToken VARCHAR(250) ,
    @MyApplicationName VARCHAR(250)
AS 
    DECLARE @Count AS INT

    SET @Count = ( SELECT   COUNT(id)
                   FROM     dbo.APNS_Subscriptions
                   WHERE    DeviceID = @MyDeviceID
                            AND DeviceToken = @MyDeviceToken
                            AND [Application] = @MyApplicationName
                 )

    IF @Count = 0 
        BEGIN
            DECLARE @NetworkID AS VARCHAR(250)
            SET @NetworkID = ( SELECT TOP 1
                                        networkid
                               FROM     dbo.AuthenticatedDevices
                               WHERE    deviceid = @MyDeviceID
                                        AND COALESCE(banned, 0) = 0
                               ORDER BY lastupdatedon DESC
                             )

            IF @NetworkID IS NOT NULL 
                BEGIN

                    INSERT  INTO dbo.APNS_Subscriptions
                            ( DeviceToken ,
                              DeviceID ,
                              NetworkID ,
                              [Application] ,
                              AddedOn ,
                              Active
                            )
                    VALUES  ( @MyDeviceToken , -- DeviceToken - varchar(250)
                              @MyDeviceID , -- DeviceID - varchar(250)
                              @NetworkID , -- NetworkID - varchar(250)
                              @MyApplicationName , -- Application - varchar(250)
                              CURRENT_TIMESTAMP , -- AddedOn - datetime
                              1  -- Active - bit
                            )
                END
        END 
```

通过此 SP 添加推送通知：

```
[ins_APNS_PushNote]
    @MyNetworkID VARCHAR(250) ,  -- NetworkID of recipient or ALL to go to all recipients
    @MyApplicationName VARCHAR(250) ,  -- Application Name for the iOS app
    @APNSAlertMessage VARCHAR(225) , -- Alert Message (Required)
    @APNSSoundFile VARCHAR(250) = NULL ,
    @WhoRequested VARCHAR(250) -- Process Name that called this SP
AS 

   -- Get the current badge count, make a temp table and increment the appropriate rows in the Sub table
    DECLARE @UpdateTable AS TABLE
        (
          DeviceToken VARCHAR(250) ,
          NetworkID VARCHAR(250) ,
          ApplicationName VARCHAR(250) ,
          BadgeCount INT
        )

    IF @MyNetworkID = 'ALL' 
        BEGIN

            INSERT  INTO @UpdateTable
                    ( DeviceToken ,
                      NetworkID ,
                      ApplicationName ,
                      BadgeCount
                    )
                    SELECT  DeviceToken ,
                            NetworkID ,
                            [Application] ,
                            BadgeCount
                    FROM    dbo.APNS_Subscriptions
                    WHERE   [Application] = @MyApplicationName
                            AND COALESCE(Dev, 0) = 0

            UPDATE  @UpdateTable
            SET     BadgeCount = BadgeCount + 1

            UPDATE  sub
            SET     sub.BadgeCount = temp.BadgeCount
            FROM    dbo.APNS_Subscriptions sub
                    INNER JOIN @UpdateTable temp ON temp.DeviceToken = sub.DeviceToken
                                                    AND temp.NetworkID = sub.NetworkID
                                                    AND temp.ApplicationName = sub.[Application]

            INSERT  INTO dbo.APNS_PushNotifications
                    ( DeviceToken ,
                      AlertMessage ,
                      BadgeNumber ,
                      SoundFile ,
                      ApplicationName ,
                      AddedOn ,
                      AddedBy

                    )
                    SELECT  sub.DeviceToken ,
                            @APNSAlertMessage ,
                            temp.BadgeCount ,
                            @APNSSoundFile ,
                            @MyApplicationName ,
                            CURRENT_TIMESTAMP ,
                            @WhoRequested
                    FROM    dbo.APNS_Subscriptions sub
                            INNER JOIN dbo.AuthenticatedDevices ad ON ad.deviceid = sub.DeviceID
                            INNER JOIN @UpdateTable temp ON temp.DeviceToken = sub.DeviceToken
                                                            AND temp.ApplicationName = sub.[Application]
                    WHERE   COALESCE(ad.banned, 0) = 0
                            AND sub.[Application] = @MyApplicationName
                              --  AND ad.networkid = @MyNetworkID
                            AND COALESCE(sub.Dev, 0) = 0
        END    
    ELSE 
        BEGIN

            DECLARE @Count AS INT = ( SELECT    COUNT(id)
                                      FROM      dbo.APNS_Subscriptions
                                      WHERE     NetworkID = @MyNetworkID
                                                AND Active = 1
                                                AND [Application] = @MyApplicationName
                                    )

            IF @Count = 0 
                BEGIN
                    RETURN
                END     

            INSERT  INTO @UpdateTable
                    ( DeviceToken ,
                      NetworkID ,
                      ApplicationName ,
                      BadgeCount
                    )
                    SELECT  DeviceToken ,
                            NetworkID ,
                            [Application] ,
                            BadgeCount
                    FROM    dbo.APNS_Subscriptions
                    WHERE   [Application] = @MyApplicationName
                            AND COALESCE(Dev, 0) = 0
                            AND NetworkID = @MyNetworkID

            UPDATE  @UpdateTable
            SET     BadgeCount = BadgeCount + 1

            UPDATE  sub
            SET     sub.BadgeCount = temp.BadgeCount
            FROM    dbo.APNS_Subscriptions sub
                    INNER JOIN @UpdateTable temp ON temp.DeviceToken = sub.DeviceToken
                                                    AND temp.NetworkID = sub.NetworkID
                                                    AND temp.ApplicationName = sub.[Application]

            INSERT  INTO dbo.APNS_PushNotifications
                    ( DeviceToken ,
                      AlertMessage ,
                      BadgeNumber ,
                      SoundFile ,
                      ApplicationName ,
                      AddedOn ,
                      AddedBy

                    )
                    SELECT  sub.DeviceToken ,
                            @APNSAlertMessage ,
                            temp.BadgeCount ,
                            @APNSSoundFile ,
                            @MyApplicationName ,
                            CURRENT_TIMESTAMP ,
                            @WhoRequested
                    FROM    dbo.APNS_Subscriptions sub
                            INNER JOIN dbo.AuthenticatedDevices ad ON ad.deviceid = sub.DeviceID
                            INNER JOIN @UpdateTable temp ON temp.DeviceToken = sub.DeviceToken
                                                            AND temp.ApplicationName = sub.[Application]
                    WHERE   COALESCE(ad.banned, 0) = 0
                            AND sub.[Application] = @MyApplicationName
                            AND sub.networkid = @MyNetworkID
                            AND COALESCE(sub.Dev, 0) = 0
                            AND COALESCE(sub.Active, 0) = 1

        END 
```

这是从几个不同数据库中的几个不同位置调用的：EXECUTE [ins_APNS_PushNote] @NetworkID ,@iOSApplicationName ,@AlertMessage ,@SoundFile ,@RequestedBy

为虚拟服务器检索这些 APNS 请求的 SP (PushSharp)：

```
[get_APNSToSend]
AS 
    BEGIN

        DECLARE @CurrentTimestamp AS DATETIME = CURRENT_TIMESTAMP

        UPDATE dbo.APNS_PushNotifications
        SET ProcessedOn = CURRENT_TIMESTAMP
        WHERE ProcessedOn IS NULL

        SELECT  id ,
                DeviceToken ,
                AlertMessage ,
                BadgeNumber ,
                SoundFile ,
                ai.APNSDistCertFile AS APNSCertFile
        FROM    dbo.APNS_PushNotifications apns
                INNER JOIN dbo.ApplicationInfo ai ON ai.ApplicationName = apns.ApplicationName
        WHERE   ProcessedOn = @CurrentTimestamp
                AND ai.APNSDistCertFile IS NOT NULL

    END 
```

现在来看看我对 PushSharp 应用程序所做的更改。实际上只是归结为两种方法： static void Main(string[] args) { checkForPushRequest(); }

```
 static void checkForPushRequest()
    {
        string YourConnString = "YourConnectionStringToTheDBGoesHere";

            Stored_Procedure SP = new Stored_Procedure {
            Name = "get_APNSToSend",
            Parameters = new List<SqlParameter>()
        };

        try {
            System.Data.DataTable dt = DatabaseOperations.Execute_Database_Command(YourConnString, SP, true);

            if ((dt != null) && !(dt.Rows.Count < 1)) {
                foreach (System.Data.DataRow dRow in dt.Rows) {
                    string deviceToken = Convert.ToString(dRow[1]);
                    string alertMessage = Convert.ToString(dRow[2]);
                    int badgeNumber =  Convert.ToInt16(dRow[3]);
                    string soundFile = Convert.ToString(dRow[4]);
                    string apnsCertFileToUse = Convert.ToString(dRow[5]);
                    sendPush(deviceToken, alertMessage, soundFile, badgeNumber, apnsCertFileToUse);
                }
            }
        } catch (Exception ex) {
            // Handle your exception
        }
    }

    static void sendPush(string DeviceToken, string AlertMessage, string SoundFile, int BadgeNumber, string apnsCertFileToUse)
    {
        //Create our service    
        PushService push = new PushService();

        //Wire up the events
        push.Events.OnDeviceSubscriptionExpired += new PushSharp.Common.ChannelEvents.DeviceSubscriptionExpired(Events_OnDeviceSubscriptionExpired);
        //push.Events.OnDeviceSubscriptionIdChanged += new PushSharp.Common.ChannelEvents.DeviceSubscriptionIdChanged(Events_OnDeviceSubscriptionIdChanged);
        push.Events.OnChannelException += new PushSharp.Common.ChannelEvents.ChannelExceptionDelegate(Events_OnChannelException);
        push.Events.OnNotificationSendFailure += new PushSharp.Common.ChannelEvents.NotificationSendFailureDelegate(Events_OnNotificationSendFailure);
        push.Events.OnNotificationSent += new PushSharp.Common.ChannelEvents.NotificationSentDelegate(Events_OnNotificationSent);

        //Configure and start Apple APNS
        // IMPORTANT: Make sure you use the right Push certificate.  Apple allows you to generate one for connecting to Sandbox,
        //   and one for connecting to Production.  You must use the right one, to match the provisioning profile you build your
        //   app with!  
        //  This comes from the ApplicationInfo table.  Each app that supports APNS has it's own certfile name in the column
        string certFileToUse = "C:\\APNS_Certs\\" + apnsCertFileToUse;

        var appleCert = File.ReadAllBytes(certFileToUse);

        //IMPORTANT: If you are using a Development provisioning Profile, you must use the Sandbox push notification server 
        //  (so you would leave the first arg in the ctor of ApplePushChannelSettings as 'false')
        //  If you are using an AdHoc or AppStore provisioning profile, you must use the Production push notification server
        //  (so you would change the first arg in the ctor of ApplePushChannelSettings to 'true')
        push.StartApplePushService(new ApplePushChannelSettings(false, appleCert, "P12PasswordHere"));

        //Fluent construction of an iOS notification
        //IMPORTANT: For iOS you MUST MUST MUST use your own DeviceToken here that gets generated within your iOS app itself when the Application Delegate
        //  for registered for remote notifications is called, and the device token is passed back to you
        push.QueueNotification(NotificationFactory.Apple()
            .ForDeviceToken(DeviceToken)
            .WithAlert(AlertMessage)
            .WithSound(SoundFile)
            .WithBadge(BadgeNumber));

        //Console.WriteLine("Waiting for Queue to Finish...");

        //Stop and wait for the queues to drains
        push.StopAllServices(true);

       // Console.WriteLine("Queue Finished, press return to exit...");         
    } 
```

我在 PushSharp 解决方案中添加了一个控制台项目，并将控制台部署到 APNS 服务器。此控制台应用程序基于每分钟运行的计划任务触发。

如果您有更多问题，请告诉我。去年我一直在企业环境中使用这个过程，并且没有遇到任何问题。完美运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T11:30:02.070

当您使用 MoonAPNS 时，我建议您阅读库作者关于[在 ASP.NET 和 C# 中发送 Apple 推送通知的 4 部分指南。](http://arashnorouzi.wordpress.com/2011/03/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T10:33:43.403

使用 C# 网页创建 APNS 推送通知。首先创建一个 Web 应用程序并启动一个 Web 表单。

网页表单设计阶段

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="iosp12.aspx.cs" Inherits="p12ios.iosp12" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
     <table class="auto-style1">
            <tr>
                <td class="auto-style2">Device token</td>
                <td>
                    <asp:TextBox ID="txtDeviceToken" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td class="auto-style3">message</td>
                <td class="auto-style4">
                    <asp:TextBox ID="txtMessage" runat="server" Height="44px"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td class="auto-style2">&nbsp;</td>
                <td>
                    <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" Width="142px" />
                </td>
            </tr>
            <tr>
                <td class="auto-style2">&nbsp;</td>
                <td>
                    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                </td>
            </tr>
            <tr>
                <td class="auto-style2">&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html> 
```

代码阶段

```
using System;
using System.Web;
using Newtonsoft.Json.Linq;
using PushSharp.Apple;
using System.Collections.Generic;

namespace p12ios
{
    public partial class iosp12 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            SendPushNotification(txtDeviceToken.Text, txtMessage.Text);
        }

        private void SendPushNotification(string deviceToken, string message)
        {
            try
            {

                //Get Certificate
                var appleCert =   System.IO.File.ReadAllBytes(Server.MapPath("~/IOS/"p12 certificate""));

                // Configuration (NOTE: .pfx can also be used here)
                var config = new ApnsConfiguration(ApnsConfiguration.ApnsServerEnvironment.Sandbox, appleCert, "p12 Password");

                // Create a new broker
                var apnsBroker = new ApnsServiceBroker(config);

                // Wire up events
                apnsBroker.OnNotificationFailed += (notification, aggregateEx) =>
                {

                    aggregateEx.Handle(ex =>
                    {

                        // See what kind of exception it was to further diagnose
                        if (ex is ApnsNotificationException)
                        {
                            var notificationException = (ApnsNotificationException)ex;

                            // Deal with the failed notification
                            var apnsNotification = notificationException.Notification;
                            var statusCode = notificationException.ErrorStatusCode;
                            string desc = $"Apple Notification Failed: ID={apnsNotification.Identifier}, Code={statusCode}";
                            Console.WriteLine(desc);
                            Label1.Text = desc;
                        }
                        else
                        {
                            string desc = $"Apple Notification Failed for some unknown reason : {ex.InnerException}";
                            // Inner exception might hold more useful information like an ApnsConnectionException           
                            Console.WriteLine(desc);
                            Label1.Text = desc;
                        }

                        // Mark it as handled
                        return true;
                    });
                };

                apnsBroker.OnNotificationSucceeded += (notification) =>
                {
                    Label1.Text = "Apple Notification Sent successfully!";
                };

                var fbs = new FeedbackService(config);
                fbs.FeedbackReceived += (string devicToken, DateTime timestamp) =>
                {
                    // Remove the deviceToken from your database
                    // timestamp is the time the token was reported as expired
                };

                // Start Proccess 
                apnsBroker.Start();

                var payload = new Dictionary<string, object>();
                var aps = new Dictionary<string, object>();
                aps.Add("alert", "This is a sample notification!");
                aps.Add("badge", 1);
                aps.Add("sound", "chime.aiff");
                payload.Add("aps", aps);

                payload.Add("confId", "20");
                payload.Add("pageFormat", "Webs");
                payload.Add("pageTitle", "Evalu");
                payload.Add("webviewURL", "https:/UploadedImages/MobileApp/icons/Datalist-Defg");
                payload.Add("notificationBlastID", "");
                payload.Add("pushtype", "");

                payload.Add("content-available", );

                var jsonx = Newtonsoft.Json.JsonConvert.SerializeObject(payload);

                if (deviceToken != "")
                {
                    apnsBroker.QueueNotification(new ApnsNotification
                    {
                        DeviceToken = deviceToken,
                        Payload = JObject.Parse(Newtonsoft.Json.JsonConvert.SerializeObject(payload))
                    });
                }

                apnsBroker.Stop();

            }
            catch (Exception)
            {

                throw;
            }
        }
    }

} 
```

有效负载，我们编写您的 JSON 。安装 push sharp。打开 nuget 包并打开包管理器控制台。在控制台中写入`Install-Package PushSharp -Version 4.0.10`。仅使用私钥 p12 证书和密码。

# xsd - xs:attributeGroup 值限制

> ID：14277022
> 
> 赞同：1
> 
> 时间：2013-01-11T11:16:13.233
> 
> 标签：xsd, xsd-validation

我有这个xsd

```
<xs:attributeGroup name="PropertyAttributes">
    <xs:attribute name="IsAttached" type="xs:boolean" default="false" />
    <xs:attribute name="IsStatic" type="xs:boolean" default="false" />
  </xs:attributeGroup> 
```

我喜欢限制这种情况 IsAttached=true IsStatic=true

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:43:10.127

您无法在 XSD 1.0 中实现这一点；您必须迁移到 XSD 1.1（我所知道的唯一免费可用的处理器是 Xerces，并且处于 beta 状态）或使用 Schematron 增强您的 XSD 1.0 模型（后者基于 XSLT 1.0/2.0，您有很多选择）。

# jenkins - Jenkins - 从构建中访问可执行文件

> ID：14277023
> 
> 赞同：1
> 
> 时间：2013-01-11T11:16:13.397
> 
> 标签：jenkins, jenkins-plugins

我想在 jenkins 作业中添加以下步骤：一旦所有构建和测试步骤都通过，我想存储创建的可执行文件并使其可以通过 Web 界面访问。例如，对于每个构建，都应该有一个图标来下载 *.rar 文件和可执行文件。我知道有插件可以做到这一点，但不记得它的名字。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:19:57.710

您可以在 build: 之后执行一个选项，您可以`Archive the artifacts`从所需目录中的工作区访问您的文件。

# javascript - 调整jquery大小时缺少像素和主体停止居中

> ID：14277028
> 
> 赞同：0
> 
> 时间：2013-01-11T11:16:36.170
> 
> 标签：javascript, jquery

我在使用这段代码时遇到了一些问题。我想也许你可以帮助我。

首先，我的部分没有填充和边框，因此像素仅用于顶部、左侧、右侧和宽度属性，并且不需要 outerWidth()。

第一个问题：一开始我将body'left'和'right'属性设置在（window_width - 1100 = 180），所以我的body宽度是920px。问题是它不是。**它变成了 904**。我已经用 chrome 和 mozilla 对其进行了测试。 **我不知道丢失的 16 个像素在哪里。**

第二：当我调整窗口大小时，我希望我的身体居中，并且我的边距增长得更少，直到身体占据整个窗口。

**我的身体没有保持居中，而且只有一个边缘增长得更少。**

我发现这是因为 '#content'、'#mainContent'、'aside' 有一个宽度。我有点'需要设置宽度。有什么办法可以让我的窗口中心自己用 jquery 做上面的所有事情吗？

这是我的代码：

```
<html>
    <head>          
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>     
        <style>
            body{
                position:absolute;          
            }
            #content{
                background-color: green;
            }
            #mainContent{
                background-color: orange; 
            }
            aside{
                background-color: blue;
            }
            .floatLeft{
                float:left;
            }
            .clear{
                clear:both;
            }
        </style>
    </head>
    <body>      
        <section id="content" class="border">
            <section id="mainContent" class="floatLeft" >   
                mainContent
            </section>                      
            <!-- End of main content -->

            <aside class="floatLeft">                               
                aside                   
            </aside>
            <!-- End of aside -->

            <p class="clear"></p>

        </section>
        <!-- End of content -->

        <script type="text/javascript">
            $(document).ready(function(){               
                change_template();
            });
            change_template = function(){

                var window_h, window_w, top, left_right, content_w, mcontent_w, aside_w;        

                window_h = $(window).height();
                window_w = $(window).width();

                top = window_h - (window_h - 100);
                left_right = window_w - 1100;

                content_w = window_w - 2*left_right;                
                $('#content').css('width', content_w);

                mcontent_w = content_w - 300;
                $('#mainContent').css('width', mcontent_w);

                aside_w = content_w - mcontent_w;
                $('aside').css('width', aside_w);               

                resize_body(top, left_right, left_right);

                //next three lines are written only for demonstration purpose
                left_right = ($(window).width() - parseInt($('body').css('width')))/2;
                alert('body width: '+$('body').css('width'));//it supposed to be 920
                alert('left propery value: '+left_right);//it supposed to be 180

                $(window).resize(function(){
                    left_right = ($(window).width() - parseInt($('body').css('width')))/2;
                    resize_body(top, left_right, left_right);
                });

            }

            resize_body = function(top, left, right){

                $('body').css('top', top+'px');
                $('body').css('left', left+'px');
                $('body').css('right', right+'px');

            }
        </script>               
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:21:08.877

重置浏览器样式：

```
html, body {
  margin: 0 auto;
  padding: 0;
} 
```

# java - Java null 出现在文本前面

> ID：14277029
> 
> 赞同：-1
> 
> 时间：2013-01-11T11:16:41.023
> 
> 标签：java, string, null

嘿，我正在创建有关密码学的新项目，这是我的代码：

```
private void encCaesar() {

    char[] chars = plaintext.toCharArray();
    for (int z = 0; z < plaintext.length(); z++) {
        char c = chars[z];
        if (c >= 32 && c <= 125) {
            int x = c - 32;
            x = (x + keyCaesar) % 96;
            if (x < 0)
                x += 96;
            chars[z] = (char) (x + 32);
        }
    }
    tempCipher = new String(chars);
    Log.d("Caesar", tempCipher);  

}

private void encRF() {

    int skip;
    int i, d, j;

    for (d = 0; d < keyRF - 1; d++) {
        skip = 2 * (keyRF - d - 1);
        j = 0;
        for (i = d; i < tempCipher.length();) {

            ciphertext += tempCipher.charAt(i);
            if ((d == 0) || (j % 2 == 0))
                i += skip;
            else
                i += 2 * (keyRF - 1) - skip;
            j++;
        }
    }

    for (i = d; i < tempCipher.length(); i += 2 * (keyRF - 1)) {
        ciphertext += tempCipher.charAt(i);
    }
    Log.d("RF", ciphertext);  
    etCipher.setText(ciphertext);
}

btnEnc.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {

                keyRF = 2;
                String tempkey = key1.getText().toString();
                plaintext = etPlain.getText().toString();
                if (plaintext.trim().equals("")) {
                    {
                        AlertDialog alertDialog = new AlertDialog.Builder(
                                SentSMSActivity.this).create();
                        alertDialog.setTitle("Alert Dialog");
                        alertDialog
                                .setMessage("Plain text masih kosong . . .");
                        alertDialog.setButton("OK",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                            DialogInterface dialog,
                                            int which) {
                                    }
                                });

                        alertDialog.show();
                    }

                }
                if (tempkey.trim().equals("")) {
                    Toast.makeText(
                            getBaseContext(),
                            "Key 1 masih kosong, maka akan digunakan digunakan key default yaitu 2",
                            Toast.LENGTH_SHORT).show();
                    key1.setText("2");
                } else if (Integer.parseInt(tempkey) > plaintext.trim()
                        .length() - 1) {
                    Toast.makeText(
                            getBaseContext(),
                            "Key 1 nilainya melebihi plaintext, maka akan digunakan digunakan key default yaitu 2",
                            Toast.LENGTH_SHORT).show();
                    key1.setText("2");
                } else {
                    keyRF = Integer.parseInt(key1.getText().toString());
                }

                keyCaesar = 3;
                if (key2.getText().toString().trim().equals("")) {
                    Toast.makeText(
                            getBaseContext(),
                            "Key 2 masih kosong, maka akan digunakan digunakan key default yaitu 3",
                            Toast.LENGTH_SHORT).show();
                    key2.setText("3");
                } else {
                    keyCaesar = Integer.parseInt(key2.getText().toString());
                }

            } finally {

                tempCipher = "";
                encCaesar();
                encRF();

            }
        }
    }); 
```

单击加密时，先加密Caesar，然后再加密RF。我做了相反的射频然后凯撒工作正常但是当凯撒然后射频问题出现所以问题是当密文应该是“XYZ”但它显示为“nullXYZ”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:24:46.483

`null`字符串在转换为字符串时变为“空”。尝试使用初始化您的 String 变量

```
String ciphertext = ""; 
```

# javascript - IE中的非目标绝对定位元素

> ID：14277031
> 
> 赞同：1
> 
> 时间：2013-01-11T11:16:46.063
> 
> 标签：javascript, css, internet-explorer, css-position

我有一堆绝对定位的元素通过javascript生成到一个div中。每个元素的位置在垂直方向上相差 2px。然而，IE 每 3 个元素添加一个额外的垂直像素，然后每 2 个元素添加一个，然后每 3 个元素返回。

等等，一张图片解释了它：

[![IE 做什么](../Images/8c40ceb5683096a4a75e9bbb8d62b179.png)](https://i.stack.imgur.com/DyS9i.png)

我把后面的行为块涂成红色，正确的涂成绿色。Chrome 正确呈现它（Firefox 也是如此）：

[![Chrome 做什么](../Images/20d0b9500c2a378a5913318f35b13556.png)](https://i.stack.imgur.com/IHjnS.png)

当我使用 IE 开发者工具时，我可以看到 CSS 设置正确：

[![CSS](../Images/ab8832755bbb7b4a3670b4ea5ccdeb67.png)](https://i.stack.imgur.com/u31CZ.png)

我试过添加`zoom:1`元素，但这似乎没有什么区别。

添加元素的代码是这样的：

```
var element = document.createElement("a");
element.style.fontSize = "6pt";
element.style.width = "20px";
element.style.height = "20px";
element.style.position = "absolute";
element.style.backgroundColor = "red";
element.style.zoom = "1";
element.style.display = "block";
var tofs = (columns * 2 + r * 20 - (c * 2));
var lofs = (c * 14 + (r + offset) * 9);
trace(c + "," + r + ": " + lofs + "," + tofs);
element.style.top = tofs + "px";
element.style.left = lofs + "px";
element.style.textIndent = "-10000px";
element.style.overflow = "hidden";
element.innerText = t;
element.selectable = "no";
setBackgroundForSeat(t, element);
target.append(element); 
```

当检测到 IE 时，我尝试每 3 个然后 2 个元素调整偏移量，但这不起作用：与下一个元素的实际视觉差异变为`1px`而不是所需的`2px`（没有 hack 的地方`3px`）。

我已经没有想法了。有人吗？

**更新：**这是一个描述行为的 JS fiddle。[http://jsfiddle.net/uGHDh/5/](http://jsfiddle.net/uGHDh/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:42:29.253

我知道 IE 工具栏告诉您它正确设置了 CSS，但它可能对实际值撒谎。从您的代码看来，您将获得浮点值，并且 IE 在提取对象时似乎会产生舍入错误。

您可以在使用它们之前尝试将像素值转换为整数，但这可能会在所有浏览器中产生不需要的结果。

# python - django/python 如何通过发布 json 连接到 web 服务

> ID：14277033
> 
> 赞同：2
> 
> 时间：2013-01-11T11:17:05.780
> 
> 标签：python, django, json, httprequest

我正在开发一个连接到 Web 服务的应用程序，提供带有数据的 json 字符串并接收回复。我使用以下代码，在其中构建 json 并尝试发布它：

```
def connectToService(request):
    data='foxp3 factor'
    l=[] 
    l.append(data)
    l.append(80)
    l.append(5)
    data=json.dumps({"findCitations":l})
    result = urllib2.urlopen('http://www.example.com/webservice', urllib.urlencode(data)) 
```

但它不起作用。我希望来自 web 服务的 json 回复将存储在结果中，然后我会想办法解析它，可能是通过反序列化它。尽管有很多关于它的文献（json、simplejson、HttpPequest）而且它必须非常简单，但我还没有设法做到这一点。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:21:52.160

为什么不使用[requests 库](http://docs.python-requests.org/en/latest/)

像

```
payload = {'key1': 'value1', 'key2': 'value2'}
>>> r = requests.post("http://www.example.com/webservice", data=payload)
>>> print r.text 
```

其中有效负载是您传递的参数。

希望这会给你一个想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-22T18:57:06.447

您可以使用此代码和一些错误处理想法：

```
 payload = {'key1': 'value1', 'key2': 'value2'}
    url = "http://www.example.com/webservice"

    try:
        response = requests.post(url, data=payload)

    except requests.exceptions.ConnectionError:
        message = 'This is not the domain we are looking for. URL is: %s' % url
        print e
        sys.exit(1)

    except requests.exceptions.ConnectTimeout:
        message = 'Too slow connection! URL is: %s' % url
        print e
        sys.exit(1)

    except Exception as e:
        message = 'Unknown Error: %(message)s URL is: %(url)s' % {'message': str(e), 'url': url}
        print e
        sys.exit(1)

    else:
        return response.json() 
```

# javascript - 使用Javascript如何交换文本框的ID

> ID：14277036
> 
> 赞同：2
> 
> 时间：2013-01-11T11:17:18.000
> 
> 标签：javascript, html, user-interface

如何交换两个文本框的 ID？

我有两个文本框，

```
<input type="text" id="name1" name="fname"/> 
```

和

```
<input type="text" id="name2" name="lname"/> 
```

通过 Javascript 以编程方式，我想交换两个文本框的 ID **name1**和**name2**。请提出正确的方法来实现这一目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:21:26.133

```
function swapId( elem1, elem2 ) {
    var temp = elem1.id;
    elem1.id = elem2.id;
    elem2.id = temp;
}

swapId( document.getElementById('name1'), document.getElementById('name2') ); 
```

这是一个非常简化的例子。如果传入的值真的是对实际 DOM 节点的引用等，应该进行更多检查。但这会很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:21:15.297

交换 ID 就像获取两个文本框的引用一样简单，然后分配您希望它们拥有的 ID。虽然暂时拥有两个具有相同 ID 的元素是无效的，但没有浏览器会阻止您这样做。

```
var fname = document.getElementById('name1');
var lname = document.getElementById('name2');

fname.setAttribute('id', 'name2');
lname.setAttribute('id', 'name1'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:20:45.710

试试这个代码...

```
var id1 = document.getElementById('name1');
var id2 = document.getElementById('name2');
id1.setAttribute("id", "name2");
id2.setAttribute("id", "name1"); 
```

# sql-server-2005 - 选择语句中可能的最大连接数以获得更好的性能

> ID：14277037
> 
> 赞同：0
> 
> 时间：2013-01-11T11:17:21.863
> 
> 标签：sql-server-2005, sql-tuning

可以在包含大量数据的表中的 select 语句中使用的最大连接数，以便更好地获取时间（以获得更好的性能）。我的意思是，如果我有一个具有 50 个内部或左连接的 select 语句，那么拆分是否更好将 select 语句转换为具有较少连接数（4 或 5 个连接）的不同 select 语句并收集在数据集中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:43:49.440

这取决于; 您拥有的连接越少越好，但临时表或临时变量有其自身的成本。如果您在单个 SELECT 语句中有 50 个左右的连接，那么最大的好处将来自对您的数据库设计的检查；你可能在某些方面过度正常化，或者有一些怪癖可以消除你的一些头痛。

但是，如果您不能影响设计，并且试图减少单个语句中的连接数，则没有硬性的最大连接数；作为一般经验法则，我可能会尝试将数字减半并从那里评估性能。

# r - 根据其他列 R 的重复和条件添加列

> ID：14277038
> 
> 赞同：0
> 
> 时间：2013-01-11T11:17:22.670
> 
> 标签：r

我对在 R 中执行我想要的最佳方式有点迷茫。

我有一个包含几列的数据框。其中之一是用户和其他列，比如说数字（0,1,2,3,4,5）。有时用户会重复，但在这种情况下，列号应该有一个数字序列。可以是这样的：

```
user number  column B column C
1    0        85      200
2    1        165     852
1    2        200     1000
3    0        15      689
3    1        89      896
4    0        78      582
4    2        96      586 
```

我想获得的是：

```
user number status days
1    0      0       200
3    0      1       50 ->(value column C, user 3, number 1)-(value column B, user 3, number 0)
4    0      0       200 
```

我想根据这些用户的值向数据框中添加两列。

*   如果用户有一个数字 == 0 但用户是唯一状态 == 0 并且天数 == 一些预定义的数字
*   如果用户有一个数字 == 0 并且用户不是唯一的

    *   如果用户的第二次出现有一个数字 == 1，状态 == 1 并且天应该是从值列 C 的第二次出现用户 - 值列 B 的第一次用户出现的减法
    *   如果用户的第二次出现有一个数字！= 1，状态 == 0 和天 == 一些预定义的数字
*   从数据集中删除没有编号 == 0 的用户

我问这个问题是因为我对最好的方法有点困惑。我虽然对数字 == 0 的数据帧进行子集化，然后比较数据帧之间的用户以查看重复的用户，但这也许不是最好的方法。

任何指示和想法都会很棒！

感谢您的帮助

**编辑**

B 列是自“2002-01-01”以来经过的天数。例如，第一个用户在 2002-01-01 后 85 天输入数据框

C 列是用户观察的天数。那些日子之后，用户不再在数据库中。

**编辑2**

我的数据集有 36 列和 26075 行

经过一些建议，我到目前为止在哪里。

```
#remove from dataset all users that don't have number == 0
df1 <- df[df$user %in% df[df$number == 0,1],]

df1["Status"] <- 0

#doesn't work
df1[df1$number == 1 %in% df1[duplicated(df1$user),]] 
```

我试图做的是找到所有重复的用户，如果数字等于 1。之后尝试这样的事情：

```
 df1[df1$number == 1 %in% df1[duplicated(df1$user),]] <- df1$Status == 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:59:05.910

也许为每个用户设置一个 data.frame 的子集并不是最有效的方法，但如果您在几秒钟内不需要答案，它对于您的数据量可能已经足够了。

```
ids = unique(df1$user);
status.days = sapply(ids,function(id) {
   udf = subset(df1,subset= user == id);
   if (nrow(udf) == 1) {
     status = 0;
     days = XXX; # the predefined value.
   } else if (udf$number[2] != 1) {
     status = 0;
     days = XXX; # the predefined value;
   } else {
     status = 1;
     days = udf$columnC[2] - udf$columnB[1];
   }
   c(status,days)
});

status = sapply(status.days,simplify=T,function(sd) { sd[1] });
days = sapply(status.days,simplify=T,function(sd) { sd[2] });

result = data.frame(user=ids,number=rep(0,length(ids)),status=status,days=days) 
```

我必须承认，我不确定从时间列表“status.days”中提取状态和天数的索引...也许应该是 sd[1] 和 sd[2] 而不是 sd[1][1 ] , sd[1][2] 或 sd[[1]][1], sd[[1]][2]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:11:40.530

```
 #order the dataset by columns needed
 df2 <- df2[order(df2$user, df2$number),]

 ids <- unique(df2$user)

 #create variable status and days
 status <- NULL
 end <- NULL
 for (i in 1:length(ids)) {
     aux <- df2[df2$user %in% ids[i],]
     if (nrow(aux) == 1 & aux$number[1] == 0){
          status[i] <- 0
          days[i] <- end
     } else if (nrow(aux) > 1) {
          status[i] <- 1
          days[i] <- aux$Event[2]
     } else {
          status[i] <- NA
          days[i] <- NA
     }
 }

 #merge the vector created with the database
 data <- data.frame(ids, status, days)
 df2 <- df2[!duplicated(df2$user),]
 df2 <- merge(df2, data, by.x="user", by.y="ids")

 #remove NAs from the dataset
 df.f <- df2[!(is.na(df2$days)),] 
```

# google-maps - 在 Google 地图中动态整合来自 YouTube 和 Flickr 的数据

> ID：14277045
> 
> 赞同：0
> 
> 时间：2013-01-11T11:17:40.993
> 
> 标签：google-maps, google-maps-api-3

我正在构建一个地图，我想在其中创建从特定 YouTube 和 Flickr 频道/集动态提取数据（所有图像和视频）的过滤器。

有没有人有这个的工作示例或我可以尝试的一些代码......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T11:59:37.777

你可能正在寻找这样的东西？

[连接 Google Maps 和 Flickr API](http://webdesign.tutsplus.com/articles/linking-up-the-google-maps-and-flickr-apis--webdesign-14199)

# android - 连接到外部蓝牙设备并开始接收数据

> ID：14277046
> 
> 赞同：2
> 
> 时间：2013-01-11T11:17:42.143
> 
> 标签：android

想要连接到设备并开始从外部设备接收数据现在能够列出设备并与之配对.....现在希望连接到它并开始从它接收数据

```
Is there any way because i dont exactly know wat kind of data it is sending 
means in which formate etc ... 
```

`that is Bluetooth device is continuously sends data to app so the app should continuously receive data`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:26:03.310

在服务中使用 listenUsingRfcommWithServiceRecord 而不是此代码

```
Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class} );
            btSocket = (BluetoothSocket) m.invoke(device, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:35:05.617

您的问题的答案如下

> 有什么办法吗，因为我不完全知道它发送的数据类型是哪种甲酸盐等...

是的，有两种方法可以做到

1）使用意图

```
 Intent i = new Intent(Intent.ACTION_SEND);
 i.setType("image/jpeg");
 i.putExtra(Intent.EXTRA_STREAM, Uri.parse("/sdcard/file.jpg")); startActivity(Intent.createChooser(i, "Send Image")); 
```

使用内置蓝牙发送数据的代码示例

2）使用使用套接字连接和蓝牙管理器的开源代码通过代码来完成。以下是开源代码的链接

[blueterm 开源代码](http://code.google.com/p/bluetooth-remote-control/)

通过蓝牙发送的数据采用字节数组的形式，您必须对其进行解析并将其转换为字符串或您想在代码中使用的任何形式。

蓝牙有两个东西

1）配对。

2) 全局连接。

如果您使用第一种蓝牙方法（通过意图），设备将配对，但连接不会连续。在建立发送数据连接时，否则连接不存在。但是，如果您使用的是 blueterm 开源代码，那么您的配对和连接是恒定的，并且在用户需要之前不会中断。

因此，您需要哪种蓝牙功能取决于您。

让我知道我的回答是否解决了您的问题

# http - 网络。转发和重定向之间的一些细微差别

> ID：14277055
> 
> 赞同：0
> 
> 时间：2013-01-11T11:18:01.633
> 
> 标签：http, web-applications, redirect, forward, http-redirect

我开始学习网络编程。`forward`我已经阅读了和之间的区别`redirect`。但是还有两个问题还没有完全理解：

1.  在哪种情况下进程访问**服务器端**，在哪种情况下**没有服务器端**？
2.  **URL**什么时候改变，什么时候不改变？**重定向时**URL 是否总是更改？**转发时**URL永远不会改变吗？

我将非常感谢明确的答案和解释！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:23:16.033

它们不是硬性条款。

重定向*通常*意味着 HTTP 重定向，它是一种 HTTP 响应，指示客户端向不同的 URI 发出新的 HTTP 请求。

内部*重定向*是对重定向的常见描述，它由网络服务器/网络应用程序/等内部处理，不会将浏览器发送到不同的 URI。

转发不是一个特别常见的术语，但当我遇到它时，它*通常*意味着一种内部重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:23:48.360

`Forward`发生在服务器端，服务器将相同的请求转发到另一个资源。而`redirect`发生在浏览器端，服务器向浏览器发送 http 状态代码 302，以便浏览器发出新请求。

重定向需要从浏览器到服务器的多一次往返。

另一个区别是重定向反映在浏览器地址栏中没有转发。

# android - 获取包括字体大小在内的文本高度并设置该高度

> ID：14277058
> 
> 赞同：6
> 
> 时间：2013-01-11T11:18:13.663
> 
> 标签：android, android-webview, paint

我现在有一个文本，`Hello`我需要为这个说 12 或 18 应用字体大小，一旦我们将字体应用于文本，文本大小就会增加。

所以现在我需要使用paint来获取包括字体大小在内的文本高度。

我尝试过绘制以下内容：

```
String finalVal ="Hello";

Paint paint = new Paint();
paint.setTextSize(18);
paint.setTypeface(Typeface.SANS_SERIF);
paint.setColor(Color.BLACK);
paint.setStyle(Paint.Style.FILL);

Rect result = new Rect();
// Measure the text rectangle to get the height
paint.getTextBounds(finalVal, 0, finalVal.length(), result); 
```

但它不起作用，请帮助

**编辑**

我正在尝试根据 textheight 动态设置 webview 的高度我正在获取单行的文本高度，`"Hello"`但如果文本中有两行`"My name is abc and my dads name is xyz and my moms name is 123" now its not getting the proper text height".`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T11:36:50.247

试试这个方法：

```
String finalVal ="Hello";

Paint paint = new Paint();
paint.setTextSize(18);
paint.setTypeface(Typeface.SANS_SERIF);
paint.setColor(Color.BLACK);
paint.setStyle(Paint.Style.FILL);

Rect result = new Rect();
paint.getTextBounds(finalVal, 0, finalVal.length(), result);

Log.d("WIDTH        :", String.valueOf(result.width()));
Log.d("HEIGHT       :", String.valueOf(result.height())); 
```

这是输出：

```
WIDTH        : 40
HEIGHT       : 14 
```

如果我设置这个，

```
String finalVal ="My name is abc and my dads name is xyz and my moms name is 123"; 
```

我的输出是：

```
WIDTH        : 559
HEIGHT       : 18 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-07T14:09:01.193

您可以从[FontMetrics](https://developer.android.com/reference/android/graphics/Paint.FontMetrics.html)获取文本高度。无论当前的文本字符串是什么，它对于特定的字体和字体大小都是恒定的。

```
Paint.FontMetrics fm = mTextPaint.getFontMetrics();
float textHeight = fm.descent - fm.ascent;
float lineHeight = fm.bottom - fm.top + fm.leading; 
```

[在这里](https://stackoverflow.com/a/42091739/3681880)查看我更完整的答案。我在那个答案中进行`getTextBounds`比较。`FontMetrics`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-21T20:48:56.513

油漆.setTextSize(18); 这一行告诉了文本的高度

# sql - 如何通过从 User_table 检索电子邮件列值将数据插入到 sendmail_table 中？

> ID：14277063
> 
> 赞同：0
> 
> 时间：2013-01-11T11:18:31.183
> 
> 标签：sql, database, stored-procedures

我有两张桌子`user_table`和`sendmail_table`.

其中`user_table`有 4 列：

1.  `name`,
2.  `username`,
3.  `email`,
4.  `password`

其中`sendmail_table`有 3 列：

1.  `emailid`,
2.  `subject`,
3.  `body`.

我的问题是如何`sendmail_table`通过从中检索`email`列值来插入数据`user_table`？

我想要一个存储过程。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:30:28.570

一般来说，您使用插入命令：

```
Insert Into sendmail_table(emailid, subject, body)
  Select <your columns list> From user_table. 
```

但是您如何判断用户表中电子邮件的哪一部分是主题和正文取决于您。您可以对主题和正文进行子串...

# dynamics-crm-2011 - 如何使仪表板仅对特定安全角色的用户可见？

> ID：14277065
> 
> 赞同：1
> 
> 时间：2013-01-11T11:18:36.090
> 
> 标签：dynamics-crm-2011, dashboard, security-roles

我创建了一个名为*ABC Dashboard的仪表板和一个名为**ABC admin*的安全角色。

我想要的是*ABC Dashboard*仅对具有安全角色*ABC admin*的用户可见。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:25:56.843

简而言之。你不能。

稍微长一点的回答。

有两种类型的仪表板，系统和个人。系统大家都可以看到。

个人只能由创建它们的用户看到 - 但随后可以与其他用户和团队共享。不是理想的解决方案，但可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T09:16:13.313

此功能在 CRM 2013 和未来版本中可用。

# python - 重定向回 Flask

> ID：14277067
> 
> 赞同：18
> 
> 时间：2013-01-11T11:18:44.990
> 
> 标签：python, redirect, flask

我有一个名为 Item 的数据库表。项目有一个`status`属性，可以是

```
new
todo
doing
done 
```

在我的网站上，我有两个显示项目表的视图。

*   视图 1 显示**所有**项目（带有状态列）。
*   视图 2**仅**显示具有状态的项目`todo`。

根据项目状态，用户可以执行某些操作（“移至待办事项”、“移至执行”、“移至完成”）。

如果您考虑 View 1 和 View 2，它们都有一个共同点，即它们都包含状态为 的项目`todo`。所以在这两个上我都有一个链接到一个名为的 URL 的按钮

```
/Item/<id>/moveToDoing 
```

其中 id - 项目的状态设置为“正在执行”。

现在我希望将用户重定向回他单击按钮的位置（视图 1 或视图 2）。

我的问题是：

1.  如何用 Flask 做到这一点？我觉得 [http://flask.pocoo.org/snippets/62/](http://flask.pocoo.org/snippets/62/)不是我所需要的，因为我这里没有公式的 POST 请求。（我是不是该？）
2.  我这样做是正确的方式还是有关于如何正常解决这个问题的约定？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-11T14:15:43.030

我正在使用这里推荐的辅助函数：http: [//flask.pocoo.org/docs/reqcontext/](http://flask.pocoo.org/docs/reqcontext/)

```
def redirect_url(default='index'):
    return request.args.get('next') or \
           request.referrer or \
           url_for(default) 
```

在视图中使用它

```
def some_view():
    # some action
    return redirect(redirect_url()) 
```

没有任何参数，它会将用户重定向回他来自的地方（`request.referrer`）。您可以添加 get 参数`next`来指定一个 url。例如，这对于 oauth 很有用。

```
instagram.authorize(callback=url_for(".oauth_authorized",
                                                next=redirect_url(),
                                                _external=True)) 
```

如果由于某种原因不应该有推荐人，我还添加了一个默认视图

redirect_url('.another_view')

您链接的代码段基本相同，但通过确保您不会被重定向到另一台主机上的恶意攻击者页面来更安全。

# mysql - mysql正交表转

> ID：14277072
> 
> 赞同：1
> 
> 时间：2013-01-11T11:19:02.150
> 
> 标签：mysql, sql, pivot

我有如下架构：

```
CREATE TABLE prop_set (
      id INT UNSIGNED NOT NULL AUTO_INCREMENT,
      name varchar(255),
      PRIMARY KEY (id)
  );
CREATE TABLE users_props (
      user_id int UNSIGNED NOT NULL,
      prop_id int UNSIGNED NOT NULL,
      value text, 
      PRIMARY KEY (user_id,prop_id)
  );
CREATE TABLE user (
      id INT UNSIGNED NOT NULL AUTO_INCREMENT,
      name varchar(255),
      PRIMARY KEY (id)
  );

INSERT INTO prop_set SET name="prop1";
INSERT INTO prop_set SET name="prop2";
INSERT INTO prop_set SET name="prop3";

INSERT INTO user SET name="user1";
INSERT INTO user SET name="user2";

INSERT INTO users_props set user_id=1,prop_id=1,value="prop1 user1";
INSERT INTO users_props set user_id=1,prop_id=2,value="prop2 user1";
INSERT INTO users_props set user_id=1,prop_id=3,value="prop3 user1";

INSERT INTO users_props set user_id=2,prop_id=1,value="prop1 user2";
INSERT INTO users_props set user_id=2,prop_id=2,value="prop2 user2";
INSERT INTO users_props set user_id=2,prop_id=3,value="prop3 user2"; 
```

现在我运行如下选择：

```
SELECT u.name,ps.name AS prop,up.value
      FROM USER u
        JOIN users_props up ON u.id=up.user_id
        JOIN prop_set ps ON ps.id=up.prop_id; 
```

并获得输出：

```
|  NAME |  PROP |       VALUE |
-------------------------------
| user1 | prop1 | prop1 user1 |
| user2 | prop1 | prop1 user2 |
| user1 | prop2 | prop2 user1 |
| user2 | prop2 | prop2 user2 |
| user1 | prop3 | prop3 user1 |
| user2 | prop3 | prop3 user2 | 
```

[小提琴](http://sqlfiddle.com/#!2/bb182/2) 有没有办法让mysql返回以下输出？

```
| NAME  |   prop1     |     prop2   |    prop3    |
---------------------------------------------------
| user1 | prop1 user1 | prop2 user1 | prop3 user1 |
| user2 | prop1 user2 | prop2 user2 | prop3 user2 | 
```

我正在寻找 mysql - 唯一的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:50:37.590

MySQL的*pivot*语法使用聚合函数，其`CASE`语句类似于：

```
SELECT u.name,
  max(case when ps.name = 'prop1' then up.value else null end) Prop1,
  max(case when ps.name = 'prop2' then up.value else null end) Prop2,
  max(case when ps.name = 'prop3' then up.value else null end) Prop3
FROM user u 
JOIN users_props up 
  ON u.id=up.user_id 
JOIN prop_set ps 
  on ps.id=up.prop_id
GROUP BY u.name; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/bb182/4)

如果您知道要转置为列的值，则上述方法非常有用，但如果这些值未知，那么您将需要考虑使用[准备好的语句](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when ps.name = ''',
      name,
      ''' then up.value else null end) AS ''',
      name, ''''
    )
  ) INTO @sql
FROM  prop_set;

SET @sql = CONCAT('SELECT u.name, ', @sql, ' 
                  FROM user u 
                  JOIN users_props up 
                    ON u.id=up.user_id 
                  JOIN prop_set ps 
                    on ps.id=up.prop_id
                  GROUP BY u.name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/bb182/3)

两个版本的结果相同：

```
|  NAME |       PROP1 |       PROP2 |       PROP3 |
---------------------------------------------------
| user1 | prop1 user1 | prop2 user1 | prop3 user1 |
| user2 | prop1 user2 | prop2 user2 | prop3 user2 | 
```

# c# - 如果行存在则执行更新，否则执行插入

> ID：14277073
> 
> 赞同：4
> 
> 时间：2013-01-11T11:19:08.740
> 
> 标签：c#, mysql

我必须将许多行更新到表中，如果表中不存在更新行，我需要插入该行。我不能使用唯一键，所以不能使用**ON duplicate KEY UPDATE**

我必须实现这样的目标

```
DECLARE count DOUBLE;
SELECT count(uid) 
INTO   count 
FROM   Table 
WHERE  column1  ='xxxxx'
 AND   column2='xxxxx';

IF (count=0)
THEN
    --peform insert
ELSE
    --perform update
END IF 
```

这是一个高性能应用程序。有什么想法吗？代码级别或查询级别

仅供参考：数据库是 Mysql

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:25:34.420

您可以使用临时表。

1.  将数据放入临时表
2.  通过 JOIN 更新“其他”表
3.  从临时表中删除匹配的数据
4.  将临时表中的剩余内容插入主表。

如果您有大量数据，这将比逐条记录更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:27:38.183

这就是我们使用的存储过程，也可能对您有用。

```
if not exists (select 1 from Table  where column1  ='xxxxx' AND   column2='xxxxx')
        insert into Table ( column1,column2)
        values ( @xxxx,xxxxx)
else 
    update Table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:32:06.547

```
BEGIN TRAN
IF EXISTS ( SELECT  *
        FROM Table WITH ( UPDLOCK, SERIALIZABLE )
        WHERE CONDITION) 
BEGIN
    UPDATE Table SET SOMETHING WHERE CONDITION
END
ELSE 
BEGIN
    INSERT INTO Table(Field1,....) VALUES  (Value1,..... )
END
COMMIT TRAN 
```

> 注意：事务非常好，但在插入/更新和多个查询的情况下使用 IF EXISTS 并不好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:32:30.133

您可以使用[EXISTS](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)或检查子选择的数量（如果它 > 0）以了解该行是否已经存在

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-11T11:22:28.183

您可能会发现有用的 REPLACE 语句。它的语法[在这里](http://dev.mysql.com/doc/refman/5.0/en//replace.html)描述。

# data-structures - 将哈希表复制到新的重新哈希表

> ID：14277074
> 
> 赞同：0
> 
> 时间：2013-01-11T11:19:11.917
> 
> 标签：data-structures, hash, hashmap, hashtable

我有一个关于重新散列的问题。假设我们有一个大小为 7 的哈希表，我们的哈希函数是 (key%tableSize)。我们将 24 插入到表中，因为 24%7=3，所以 24 将位于索引 3。然后，假设我们添加了更多元素，现在我们要重新散列。表大小将是初始表大小的两倍，即新表大小将是 14。那么，在将元素复制到新哈希表时，例如，在复制元素 24 时，它是否仍然在索引 3 中，还是会在索引 24%14=10 处。我的意思是，我们是在复制元素时使用新的表大小，还是元素保留在它们的初始索引中？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:25:38.020

关于哈希表的重要一点是元素的顺序不能保证，它取决于哈希函数。

对于您的示例：如果您使用 7 作为哈希大小将数据复制到新哈希中，则您的索引：新数组的 7、8、9、10、11、12 和 13 将未被使用，因为您使用了更大的数组并且您的哈希函数不能给你大于 6 的结果。这些未使用的索引是一件坏事，因为你根本不需要它们，所以最好`key % 14`改用它们。

有趣的是，内部哈希表状态不仅取决于哈希函数，还取决于元素插入的顺序。例如，假设有一个大小为 4 的哈希表（用数组和链表实现）`X`，然后按该顺序插入元素 2、3、6、10：

```
x 
{
    [0] -> []
    [1] -> []
    [2] -> [2,6,10]
    [3] -> [3]
} 
```

再次使用哈希函数`key % size`。

现在，如果我们以不同的顺序插入键 - 10、6、3、2，我们得到：

```
x 
{
    [0] -> []
    [1] -> []
    [2] -> [10,6,2]
    [3] -> [3]
} 
```

我在上面写了所有这些行，只是为了向您展示哈希的两个副本在内部可能看起来不同，因为有很多因素。我认为这是对您问题的考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:25:47.027

这取决于您的哈希函数。在您的情况下，您应该使用 key%size_of_table 否则 7 之后的插槽将永远不会被散列函数映射。只有当您选择线性探测以解决碰撞时，这些插槽才会被占用。（我们在哪里寻找下一个空插槽）。选择新的尺寸将有助于减少早期的碰撞，否则情况表还没有达到负载因子，你仍然面临着很多碰撞。

# c# - 出现错误：集合已修改；枚举操作可能无法执行，如何在 ListBox 上设置选定的索引？

> ID：14277077
> 
> 赞同：0
> 
> 时间：2013-01-11T11:19:20.573
> 
> 标签：c#, listbox

我有以下代码来选择 ListBox 中的下一个列表项或第一个列表项：

```
if (ListBox.SelectedIndex == lst.Count - 1)
    ListBox.SelectedIndex = 0;
else
    this.ListBox.SelectedIndex = ListBox.SelectedIndex + 1; 
```

它抛出异常：

```
Collection was modified; enumeration operation may not execute 
```

修改集合的原因是我需要修改其中一个列表项的内容。我找到需要修改的列表项，在该索引处将其删除，然后在同一索引处重新添加它。

有没有办法修改列表框的内容，仍然可以设置SelectedIndex？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:23:21.567

这可能取决于执行顺序以及读取和写入属性的时间。

尝试：

```
var idx = ListBox.SelectedIndex;

if (idx == lst.Count - 1)
    ListBox.SelectedIndex = 0;
else
    this.ListBox.SelectedIndex = idx + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:24:42.310

试试下面的：

```
var index=ListBox.SelectedIndex;
if (index == lst.Count - 1)
    ListBox.SelectedIndex = 0;
else
    this.ListBox.SelectedIndex = index + 1; 
```

# iphone - 广告。将代码放在 .m 文件中是否必不可少？

> ID：14277079
> 
> 赞同：1
> 
> 时间：2013-01-11T11:19:30.840
> 
> 标签：iphone, ios, xcode, iad

我已经展示了 iAd，但只是在我的 xib 文件中放置了一个 aDBannerView 对象。

是否必须在 .m 文件中实现某些内容，或者我可以上传该版本？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:43:29.050

如果您对它的工作方式感到满意，那没关系。您可以在代码中进行微调，但这是您的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:24:32.220

不，您应该添加代码来隐藏和显示横幅视图。如果没有广告可用，那么您需要隐藏横幅视图。

# java - 使用加密时CRC校验冗余？

> ID：14277080
> 
> 赞同：4
> 
> 时间：2013-01-11T11:19:30.987
> 
> 标签：java, encryption, crc

我使用 AES 进行加密，使用 CRC 来检查数据完整性，我的印象是 CRC 检查在我的情况下是多余的。我正在执行以下操作：

加密：

1.  获取有效载荷数据并从中计算 CRC
2.  加密有效载荷数据和 CRC

解密：

1.  解密数据
2.  计算有效载荷数据的新 CRC 并与旧 CRC 进行比较

我想在我的单元测试中引发 CRC 检查失败，但是当我操作有效负载数据时，解密总是会引发 BadPaddingException。

我的问题是：如果解密总是在数据被损坏或被操纵时抛出这个异常（会吗？）不是我使用它的方式冗余的 CRC 检查吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:35:16.860

假设错误解密的数据是均匀分布的，那么每 255 个错误密码就会出现大约 1 次正确的 PKCS5/PKCS7 填充。这意味着仍然有 1/255 的机会发生正确的更改并且该项目将解密为垃圾。因此，您的支票不是浪费。

如果你真的想要你所期望的行为，你可以使用“AES/CTR/NoPadding”，它不需要确切的块大小，并且总是返回一个解密的字节[]，无论密钥是否匹配。

但是，如果攻击者可以反复更改密文并让您对其进行解密（例如，存储在 cookie 中的加密数据），并且他们是否可以区分您的行为，当解密的数据引发错误填充异常时，以及何时它是只是垃圾，然后他们可以通过“填充预言攻击”确定明文。

您可能还需要考虑是否可以使用比 CRC 更强大的指纹（如[SHA-256](https://stackoverflow.com/questions/3103652/hash-string-via-sha-256-in-java)）来确保消息完整性。

很多这样的重复来自：[AES BadPaddingException](https://stackoverflow.com/questions/5596994/aes-badpaddingexception)

# c# - Updating List in codebehind and forcing bindings in XAML to update I have a method that populates a List with 5 random images. The method returns correctly. When I call the method to populate the List before this.Initialize 问问题 问问题 2013-01-11T11:19:37.930 666 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a method that populates a List with 5 random images. The method returns correctly. When I call the method to populate the List before this.InitializeComponent(); in the codebehind, the images appear on screen. However, when I call the method afterwards, it has no effect on what is shown on screen. What can I do to fix this? It seems like I need to call RaisePropertyChanged() or something along these lines, but I can't find a way to do this. Can anyone please help ? In my code behind I have the code : public List <bitmapimage>listOfImages { get; set; } private async void Get_Images(object sender, RoutedEventArgs e) { //code to get 5 random images IReadOnlyList <storagefile>fileList = await query.GetFilesAsync(); listOfImages = new List<bitmapimage>(); foreach (StorageFile file in fileList) { BitmapImage src = new BitmapImage(); src.SetSource(await file.OpenAsync(FileAccessMode.Read)); listOfRelatedImages.Add(src); } } And in my XAML : <itemscontrol itemssource="{Binding Path=listOfImages}" horizontalcontentalignment="Stretch"> <itemscontrol.itemtemplate><datatemplate><stackpanel verticalalignment="Center"></stackpanel></datatemplate></itemscontrol.itemtemplate> </itemscontrol> To let the Datagrid know about changes in your List (e.g. add() or remove()) you have to use an ObservableCollection If you want to inform the DataGrid about changes inside the list (e.g. changing properties) the class shown in the DataGrid has to implement the INotifyPropertyChanged interface c#windowsxamlcode-behind 4 2 回答 2 This answer is useful 3 要让 Datagrid 知道列表中的更改（例如 add() 或 remove()），您必须使用ObservableCollection 如果您想通知 DataGrid 列表内的更改（例如更改属性），DataGrid 中显示的类必须实现INotifyPropertyChanged接口 于 2013-01-11T11:29:09.763 回答 This answer is useful 2 Use ObservableCollection instead of List ItemsControl track collection changes(add/remove/reset/move) with INotifyCollectionChanged interface, so if you want ItemsControl to update automatically, you need to implement this interface on the list. WPF already contains generic collection that implement this interface. Replace List <bitmapimage>listOfImages With ObservableCollection <bitmapimage>listOfImages And it should work 于 2013-01-11T11:29:35.253 回答 Related 2 twitter-bootstrap - 如何将 span10 细分为 12 列 1 scheme - 计划车通过不正确的类型？ 3 c++ - XAudio2 Access Violation Exception when Unloaded 3 c# - 私有集，并获取返回空/空？ 1 php - 通过 AJAX 上传文件 0 iphone - 如何在 MKMapView 中正确定位天气雷达图像（取自 Met Office DataPoint API）？ 1 wpf - 在 WPF 中复制 XAML 属性 1 visual-studio-2012 - 是否可以从 EF5 数据库优先转换为代码优先？ 1 c# - 将 XML 转储到 MySQL 1 android - 如何让我的 PC 鼠标光标从它停止的地方继续，通过 Android 手机控制？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</bitmapimage></bitmapimage></bitmapimage></storagefile></bitmapimage>

> ID：14277085
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, windows, xaml, code-behind

I have a method that populates a List with 5 random images. The method returns correctly. When I call the method to populate the List before `this.InitializeComponent();` in the codebehind, the images appear on screen. However, when I call the method afterwards, it has no effect on what is shown on screen. What can I do to fix this? It seems like I need to call `RaisePropertyChanged()` or something along these lines, but I can't find a way to do this. Can anyone please help ?

In my code behind I have the code :

```
 public List<BitmapImage> listOfImages { get; set; }

  private async void Get_Images(object sender, RoutedEventArgs e)
        {
            //code to get 5 random images
            IReadOnlyList<StorageFile> fileList = await query.GetFilesAsync();
            listOfImages = new List<BitmapImage>();
            foreach (StorageFile file in fileList)
            {
                BitmapImage src = new BitmapImage();
                src.SetSource(await file.OpenAsync(FileAccessMode.Read));
                listOfRelatedImages.Add(src);
            }
        } 
```

And in my XAML :

```
 <ItemsControl ItemsSource="{Binding Path=listOfImages}" HorizontalContentAlignment="Stretch">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel VerticalAlignment="Center">
                <Image x:Name="images" Source="{Binding}" Visibility="Visible" Stretch="Fill">
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
 </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:29:09.763

要让 Datagrid 知道列表中的更改（例如 add() 或 remove()），您必须使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

如果您想通知 DataGrid 列表内的更改（例如更改属性），DataGrid 中显示的类必须实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:29:35.253

Use [ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx) instead of List

ItemsControl track collection changes(add/remove/reset/move) with INotifyCollectionChanged interface, so if you want ItemsControl to update automatically, you need to implement this interface on the list. WPF already contains generic collection that implement this interface.

Replace

```
List<BitmapImage> listOfImages 
```

With

```
ObservableCollection<BitmapImage> listOfImages 
```

And it should work

# sql - 通过提供当前日期的参数，在 ms 访问中查询以提取数据

> ID：14277087
> 
> 赞同：1
> 
> 时间：2013-01-11T11:19:40.090
> 
> 标签：sql, ms-access

```
SELECT t1.[Ticket Number], t1.[Time Received], t1.[Time Read], t1.[Time Replied], t1.[Replied By], t1.[Called Customer?], t1.[Call Duration], t1.[Email Duration], t1.[General Issue]
FROM t1
WHERE [DDATE]=[GETDATE()]; 
```

这`DDATE`是一个包含将要输入的日期的字段。

我的查询只需要提取当天的详细信息，`t1`就是表格。

那么我怎样才能让这个查询自动将今天的日期作为参数呢？

我在 MS Access 2012 中制作了表格和表格并进行了查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:21:12.950

只要 DDate 没有时间元素，就使用 Date()。

```
SELECT t1.[Ticket Number], t1.[Time Received], 
   t1.[Time Read], t1.[Time Replied], 
   t1.[Replied By], t1.[Called Customer?], 
   t1.[Call Duration], t1.[Email Duration], t1.[General Issue] 
FROM t1 
WHERE [DDATE]=DATE() 
```

# python - 我应该授权什么 url 在防火墙后面使用 pip？

> ID：14277088
> 
> 赞同：28
> 
> 时间：2013-01-11T11:19:41.460
> 
> 标签：python, pip, firewall

我有一台服务器，我想在其上使用 Python，它位于公司防火墙后面。我不想弄乱它，我唯一能做的就是为特定的 URL/域设置防火墙例外。

我还想使用 pip 或 easy_install 访问位于 PYPI 上的软件包。因此，您知道除了 *.pypi.python.org 之外，我应该要求在防火墙的例外规则中列出哪个 URL？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T11:31:29.443

您需要打开防火墙以访问您需要安装的任何软件包的下载位置，或连接到已获得访问权限的代理服务器。

请注意，下载位置不一定在 PyPI 上。Python 包索引是一种元数据服务，它恰好也为索引包提供存储。因此，并非所有在 PyPI 上索引的包实际上都是从 PyPI*下载*的，下载位置可能在 Internet 上的任何位置。

我会说你从打开开始`pypi.python.org`，然后当个别包安装失败时，检查他们的 PyPI 页面并添加列出的下载位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-05-06T10:11:49.680

我已经解决了将这些域添加到防火墙白名单的问题：

*   pypi.python.org
*   pypi.org
*   pythonhosted.org

# c++ - 在 C++ 中遍历所有字符的文件

> ID：14277095
> 
> 赞同：3
> 
> 时间：2013-01-11T11:19:58.707
> 
> 标签：c++, file

新手问题：在文本文件上获取字符迭代器的最佳方法是什么？

我试过了：

```
std::fstream csvSource (fileName);

auto aChar = csvSource.begin();
while (aChar != csvSource.end())
{
  switch (*aChar)
  {
  case '"':
  //and so on 
```

但编译器抱怨`fstream`没有开始方法。

请注意，我不能逐行执行，因为引号内的换行符的处理方式（字面上）与其他换行符不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:22:05.937

使用类中的`>>`运算符`ifstream`

```
std::ifstream csvSource (fileName);

csvSource >> noskipws;
char c;
while (csvSource>>c)
{
  switch (c)
  {
  case '"':
  //and so on 
```

如果您不想用迭代器做花哨的事情，那是最简单的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:25:50.793

如果你必须使用迭代器，你最好的选择是[istreambuf_iterator](http://www.cplusplus.com/reference/iterator/istreambuf_iterator/)，它比`istream_iterator`迭代字符时更优化。

尽管为什么您需要使用迭代器，但有什么特别的原因吗？当您想要调用需要它们的算法时，它们就在那里。但这里不是这种情况，因为你只是在循环。

您可以使用 char 读取`get()`. 这可能比执行格式化读入的 operator>> 更好，并且会跳过空格（您可能不想要），除非您将`skipws`flag 设置为 false （我认为它是`noskipws`）并且可能效率稍低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:22:29.497

`std::istreambuf_iterator`我想你正在寻找

```
#include <iterator>   //for std::istreambuf_iterator
#include <algorithm> //for std::for_each

std:: istreambuf_iterator<char> begin(csvSource), end;
std::for_each(begin, end, [](char c)
             {
                  switch(c)
                  {
                        //your cases and code
                  }
             }); 
```

或者您可以简单地写入`csvSource >> c`以逐个字符读取。两种方法都很好。使用哪一种，视情况而定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:25:09.060

尝试[std::istream_iterator](http://en.cppreference.com/w/cpp/iterator/istream_iterator)。使用原始循环的非常低级的方法可能如下所示：

```
std::fstream csvSource (fileName);
typedef std::istream_iterator<char> CharIter;
for (CharIter it(csvSource); it != CharIter(); ++it)
{
  /* process *it */
  char c = *it;
  doSomething(c);
} 
```

您还可以在所有标准算法和手工算法中使用这些迭代器，这比原始循环更可取。例如，要将文件中的所有字符打印到`std::cout`您可以使用

```
std::copy(CharIter{csvSource}, CarIter{}, std::ostream_iterator(std::cout)); 
```

# javascript - 尝试重置集合时出现主干错误

> ID：14277097
> 
> 赞同：0
> 
> 时间：2013-01-11T11:20:08.320
> 
> 标签：javascript, backbone.js

我正在做一个非常简单的 Backbone 应用程序示例，并且不断收到 JS 错误消息。我基本上有两个文件：

1.  应用程序.js

此文件创建一个 Backbone.js 应用程序，该应用程序使用集合视图中的数据将模板中的 span 附加到 html 文件上已创建的 div 中。

```
 /*Backbone.js Appointments App*/

    App = (function($){
      //Create Appointment Model
      var Appointment = Backbone.Model.extend({});

      //Create Appointments Collection
      var Appointments = Backbone.Collection.extend({
        model: Appointment
      });

      //Instantiate Appointments Collection
      var appointmentList = new Appointments();
      appointmentList.reset(
        [{startDate: '2013-01-11', title: 'First Appointment', description: 'None', id: 1},
         {startDate: '2013-02-21', title: 'Second Appointment', description: 'None', id: 2},
         {startDate: '2013-02-26', title: 'Third Appointment', description: 'None', id: 3}
        ]
      );

      //Create Appointment View
      var AppointmentView = Backbone.View.extend({
        template: _.template(
          '<span class="appointment" title="<%= description %>">' +
          ' <span class="title"><%= title %></span>' +
          ' <span class="delete">X</span>' +
          '</span>'
        ),

        initialize: function(options) {
          this.container = $('#container');
        },

        render: function() {
          $(this.el).html(this.template(this.model));
          this.container.append(this.el);
          return this;
        }
      });

      var self = {};
      self.start = function(){
        new AppointmentView({collection: appointmentList}).render();
      };
      return self;
    });

    $(function(){
      new App(jQuery).start();
    }); 
```

1.  索引.html

该文件仅调用 jquery、backbone 和其他 js 库，还创建了 div 容器，前一个文件中的 Backbone.js 应用程序将在其中附加数据。

```
 <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>hello-backbonejs</title>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
      <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
      <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
      <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
      <script src="app.js" type="text/javascript"></script>
    </head>
    <body>
    <div id="container"></div>
    </body>
    </html> 
```

我得到的错误如下：

```
Uncaught TypeError: Object [object Object] has no method 'reset' app.js:14
App app.js:14
(anonymous function) app.js:49
e.resolveWith jquery.min.js:16
e.extend.ready jquery.min.js:16
c.addEventListener.z jquery.min.js:16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:27:39.847

您使用 Backbone 0.3.3，但`Collection.reset`在 Backbone 0.5 中引入。有关更多信息，请参阅[更改日志](http://backbonejs.org/#changelog)。

要么升级 Backbone（目前是 0.9.9）（以及使用 Underscore 和 jQuery），或者`Collection#refresh`如果你绝对必须保留 Backbone 0.3.3（但你可能会在路上遇到其他错误）。

# combobox - 如何在 vaadin 组合框选择列表中显示附加信息？

> ID：14277100
> 
> 赞同：1
> 
> 时间：2013-01-11T11:20:26.917
> 
> 标签：combobox, vaadin

我想要一个组合框，列表中有很多信息可供选择或搜索，但选择后只显示其中的一部分。

例如，当用户开始输入“raf”时，组合框应显示如下列表：

*   RA - 拉斐尔 (raffael@example.com)
*   胡 - 雨果 (hugo@rafferty.xyz)

选择条目“Raffael”后，组合框中应仅显示“RA”。

我需要它，因为我的应用程序中组合框的空间有限。因此，组合框的宽度不应超过容纳某些字符所需的宽度，但要从中选择的列表可能要宽得多。有没有简单的方法来实现这一目标？或者我必须在组合框中覆盖哪个功能才能在选择后设置文本行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:50:09.360

这对于没有自定义客户端编码的标准 Vaadin ComboBox 是不可能的。

# python - 如何将 findall 结果附加到列表中？

> ID：14277108
> 
> 赞同：0
> 
> 时间：2013-01-11T11:20:40.897
> 
> 标签：python, beautifulsoup

我正在尝试为具有属性的所有链接解析网站`nofollow`。我想打印那个列表，一个一个链接。但是我未能将结果附加`findall()`到我的列表中`box`（我的尝试在括号中）。

我做错什么了？

```
import sys
import urllib2
from BeautifulSoup import BeautifulSoup

page = urllib2.urlopen(sys.argv[1]).read()
soup = BeautifulSoup(page)
soup.prettify()

box = []

for anchor in soup.findAll('a', href=True, attrs = {'rel' : 'nofollow'}):
#    box.extend(anchor['href'])
     print anchor['href']

# print box 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:22:11.583

您正在循环，`soup.findAll`因此每个`anchor`本身都不是列表；用于`.append()`单个元素：

```
box.append(anchor['href']) 
```

您还可以使用列表推导来获取所有`href`属性：

```
box = [a['href'] for a in soup.findAll('a', href=True, attrs = {'rel' : 'nofollow'})] 
```

# linux - 禁止单个 sudo 命令的日志条目

> ID：14277116
> 
> 赞同：18
> 
> 时间：2013-01-11T11:21:08.890
> 
> 标签：linux, unix, sudo, syslog

`sudo`对于服务器监控，我们每分钟执行几个无密码命令。这会填充服务器日志。

> 须藤：zabbix：TTY=未知；密码=/ ; 用户=根；命令=/foo/bar

我可以阻止这些条目吗？选项`NOLOG_INPUT`和`NOLOG_OUTPUT`看起来不像我想要的。

我不想完全省略`sudo`'s logging，只针对一个用户和一个（或多个）命令。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-11T12:30:54.670

`Defaults:`您可以使用指令禁用基于用户的日志记录

示例（禁用用户 bla 的日志记录）

```
Defaults:bla !syslog 
```

或使用 a`Cmnd_Alias`按命令禁用它

```
Cmnd_Alias SCRIPT = /usr/local/bin/myscript
Defaults!SCRIPT !syslog
# multiple commands need a comma between them
Cmnd_Alias MORE = /bin/ls, /bin/cat
Defaults!MORE !syslog 
```

在 Debian 6.0.6 上测试，`sudo`版本`1.7.4p4`（相当旧；））

# php - yii pdf 由 tcpdf 下载

> ID：14277121
> 
> 赞同：0
> 
> 时间：2013-01-11T11:21:15.083
> 
> 标签：php, yii, tcpdf

在我的站点中，我想将视图导出为 pdf，因此我使用了 pdf 扩展名：

```
 $mPDF1 = Yii::app()->ePdf->mpdf();

            $mPDF1 = Yii::app()->ePdf->mpdf('', 'A5');

            $mPDF1->WriteHTML($this->render('TLR_22', array(), true));

            $stylesheet = file_get_contents(Yii::app()->themeManager->baseUrl.'/default/css/sheets/style');
            $mPDF1->WriteHTML($stylesheet, 1);

            $mPDF1->Output(); 
```

它将html导出为pdf但不加载css，尽管我将路径更改为绝对路径，如下所示：

```
$stylesheet = file_get_contents('D:/xampp/htdocs/Yii/DialSetup/themes/default/css/sheets/style.css'); 
```

我怎么解决这个问题？谢谢... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:45:32.760

从[文档](http://mpdf1.com/manual/index.php?tid=254)看来，您需要设置样式，然后编写输出，例如：

```
$stylesheet = file_get_contents('style.css');
$mpdf->WriteHTML($stylesheet,1);
$mpdf->WriteHTML($html,2); 
```

另外，您是否验证过 $stylesheet 包含您期望的信息？

# forms - 如何在不使用任何按钮的情况下处理 html 中的表单？

> ID：14277127
> 
> 赞同：0
> 
> 时间：2013-01-11T11:21:37.027
> 
> 标签：forms, input

谁能告诉我如何在不刷新页面且不使用任何按钮的情况下将数据插入数据库。Facebook 墙贴区就是一个例子。用户在输入字段中写下他想要的任何内容，他必须按 ENTER 将数据提交到数据库中，而不是使用提交按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:29:46.220

如果您使用的是 jquery，则可以执行以下操作：

```
$(document).keydown(function(e) {
    if(e.which == 13) {
        your submit code
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:43:56.727

`<input type="text">`如果您在元素中按 Enter，浏览器会自动提交表单。

尝试

```
<form action="" onsubmit="alert(document.getElementById('t').value); return false;">
  <input type="text" id="t">
</form> 
```

# javascript - 当我用 jquery 添加新的 div 时，试图让这些 div 不重置位置

> ID：14277129
> 
> 赞同：4
> 
> 时间：2013-01-11T11:21:44.187
> 
> 标签：javascript, jquery, html, css, cookies

我尝试将`keyup`代码的一部分更改为 a`button`并且我还尝试了一些代码来获取可拖动元素以将其位置存储在 cookie 中，但无济于事。当我将空标签更改为准备就绪时，它每次都会重复前面的行。任何帮助将非常感激。

[jsFiddle 获取原始代码](http://jsfiddle.net/fergusp/6NB6c/)

[jsFiddle 我尝试一个按钮](http://jsfiddle.net/fergusp/6NB6c/8)

HTML

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<textarea></textarea>
<div id="opt"></div> 
```

CSS

```
d {
    position: relative;
    left: 0;
    top: 0;
    width: 60px;
    height: 60px;
    background: #ccc;
    float: left;
    font-family: arial;
    font-size: 10px;
} 
```

JavaScript

```
$(document).ready(function() {
    $("textarea").keyup(splitLine);

    function splitLine() {
        $("#opt").empty();
        var lines = $("textarea").val().split(/\n/g);
        for (var i = 0; i < lines.length; i++) {
            var ele = $("<d>");
            ele.html(lines[i]);
            $("#opt").append($(ele).draggable());
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:47:22.553

我认为您不应该`<d>`每次都删除所有内容并重新开始。我对代码进行了一些更改以重用旧代码，`<d>`以便保留它的位置

```
$(document).ready(function () {
  $("textarea").keyup(splitLine);

  function splitLine() {
    //$("#opt").empty();
    var lines = $("textarea").val().split(/\n/g);
    for (var i = 0; i < lines.length; i++) {
      var ele;
      if ($("d:eq(" + i + ")").get(0)) {
        ele = $("d:eq(" + i + ")");
        ele.html(lines[i]);
      } else {
        ele = $("<d>");
        ele.html(lines[i]);
        $("#opt").append($(ele).draggable());
      }
    }
  }
}); 
```

# php - 解析错误，在 MyBB 中插入 PHP 代码

> ID：14277130
> 
> 赞同：1
> 
> 时间：2013-01-11T11:21:45.757
> 
> 标签：php, parse-error, mybb

我在`<head> </head>`for a mybb 论坛中插入此代码：

```
<?php if(isset($_REQUEST['url'])): // <-- only include jQuery if url set ?>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
  $(function() {
    $( "#dialog-modal" ).dialog({
      height: 140,
      modal: true
    });
  });
</script>
<?php endif; ?> 
```

在页面顶部看到两个错误说

```
Parse error: syntax error, unexpected $end in /home/content/87/9583687/html/a/global.php(524) : eval()'d code(2) : eval()'d code on line 1

Parse error: syntax error, unexpected T_ENDIF in /home/content/87/9583687/html/a/global.php(524) : eval()'d code(14) : eval()'d code on line 1 
```

第一行代码有任何问题或语法问题吗？我的意思是：

```
<?php if(isset($_REQUEST['url'])): // <-- only include jQuery if url set ?> 
```

谢谢！

**更新：：**

谢谢！我试过了，但我想我肯定有一些错误？：/

```
<?php if(isset($_REQUEST['url'])): 
$str = <<<EOD
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
  $(function() {
    $( "#dialog-modal" ).dialog({
      height: 140,
      modal: true
    });
  });
</script>
EOD;
echo $str;
endif;
?> 
```

**“更新”**

这是名为**headerinclude**的实际文件：

```
<link rel="alternate" type="application/rss+xml" title="{$lang->latest_threads} (RSS 2.0)" href="{$mybb->settings['bburl']}/syndication.php" />
<link rel="alternate" type="application/atom+xml" title="{$lang->latest_threads} (Atom 1.0)" href="{$mybb->settings['bburl']}/syndication.php?type=atom1.0" />
<meta http-equiv="Content-Type" content="text/html; charset={$charset}" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<script type="text/javascript" src="{$mybb->settings['bburl']}/jscripts/prototype.js?ver=1603"></script>
<script type="text/javascript" src="{$mybb->settings['bburl']}/jscripts/general.js?ver=1603"></script>
<script type="text/javascript" src="{$mybb->settings['bburl']}/jscripts/popup_menu.js?ver=1600"></script>
{$stylesheets}
<script type="text/javascript">
<!--
    var cookieDomain = "{$mybb->settings['cookiedomain']}";
    var cookiePath = "{$mybb->settings['cookiepath']}";
    var cookiePrefix = "{$mybb->settings['cookieprefix']}";
    var deleteevent_confirm = "{$lang->deleteevent_confirm}";
    var removeattach_confirm = "{$lang->removeattach_confirm}";
    var loading_text = '{$lang->ajax_loading}';
    var saving_changes = '{$lang->saving_changes}';
    var use_xmlhttprequest = "{$mybb->settings['use_xmlhttprequest']}";
    var my_post_key = "{$mybb->post_code}";
    var imagepath = "{$theme['imgdir']}";
// -->
</script>
{$newpmmsg} 
```

我想在这个文件中添加下面的 php 代码：

```
<?php if(isset($_REQUEST['url'])): // <-- only include jQuery if url set ?>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <script>
  $(function() {
    $( "#dialog-modal" ).dialog({
      height: 140,
      modal: true
    });
  });
  </script>
  <?php endif; ?> 
```

这个 headerinclude 文件以这种方式包含在文件 Global.php 中：

```
// Set up some of the default templates
eval("\$headerinclude = \"".$templates->get("headerinclude")."\";");
eval("\$gobutton = \"".$templates->get("gobutton")."\";");
eval("\$htmldoctype = \"".$templates->get("htmldoctype", 1, 0)."\";");
eval("\$header = \"".$templates->get("header")."\";"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T02:45:26.180

我想你会需要这个插件：[PHP in Templates / Complex Templates](http://mybbhacks.zingaburga.com/showthread.php?tid=260/ "模板/复杂模板中的 PHP")

因为 MyBB 不允许`<?php ... ?>`在模板内使用。但是如果你使用那个插件，你可以，但它有一些限制（你可以在我提供的链接中看到）

这个插件是我见过的最强大的 MyBB 插件。例如，如果我不想让客人看到forumdisplay.php中的New Thread，我只需要将模板更改为：

```
<if $mybb->user['uid'] != 0 then>
    <a href="newthread.php?fid={$fid}>New Thread</a>
</if> 
```

与 MyBB 玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:27:24.787

显然，phpBB 会将所有内容放在`<?php ?>`块中的`eval`. 在您的情况下，这意味着它会抛出

```
if(isset($_REQUEST['url'])): 
```

在一个`eval`. 这是一个未完成的`if`结构。要修复它，请将整个 PHP 代码放在**一个** `<?php ?>`块中。使用字符串处理或[HERE 文档](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)来处理 HTML。

示例 HEREDOC：

```
<?php 
    if(isset($_REQUEST['url'])):
       $str = <<<EOD
... put your HTML here ...
EOD;
       echo $str;
    endif;
?> 
```

# ios - iOS 6 自定义 UIPicker

> ID：14277140
> 
> 赞同：1
> 
> 时间：2013-01-11T11:22:20.680
> 
> 标签：ios, ios6, uipickerview

我为我的 iOS 应用程序设计了一个自定义 UIPicker，现在我不知道如何实现它。我是 iOS 新手，我认为 Picker 可以自定义，但我认为我错了。

这是它的图像：

![自定义 iOS UIPicker](../Images/8995dc4961264af1bdf6ee2ec0f55c85.png)

它非常简约和简单，所以我认为必须有一种方法来实现它？它将有 2 个组件，并且应该像通常的 UIPicker 一样工作。

据我所见，UIPicker 类只能在一定程度上进行定制，比如改变字体大小，但几乎没有我需要的那么多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:04:22.740

如果您的值集相当小，您可以并排使用两个垂直的 UIScrollView，其中包含所有值的高内容区域。

将滚动视图设置为“分页”模式（其中页面大小是您的一个数字的高度） - 因此滚动在每个数字处停止。

我认为那会很好。如果你有大量可能的值，它会占用大量内存，但对于少数它会起作用。

编辑：看起来这个控件[http://www.cocoacontrols.com/platforms/ios/controls/slnumberpickerview](http://www.cocoacontrols.com/platforms/ios/controls/slnumberpickerview)可能是定制的有用起点。自己没试过。

# django - 在没有查询集的情况下初始化 modelformset_factory

> ID：14277146
> 
> 赞同：2
> 
> 时间：2013-01-11T11:22:41.153
> 
> 标签：django, django-forms

我正在尝试将 a`modelformset_factory`用于一堆模型，这些模型在从 db 中检索到它们后已被处理/过滤。这基本上意味着这些模型已经可以按照我想要的方式用于`modelformset_factory`. 我想知道是否有办法向工厂传递模型列表（不通过`queryset`参数访问数据库）？

我能想到的一种方法是模拟 QuerySet 以返回已处理的模型列表并将其用作[queryset 参数](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#changing-the-queryset)。

`model_to_dict`另一种方法可能是使用和使用参数将模型转换为字典列表`initial`（因为 modelformset_factory 是 formset_factory 的子类） - 不太确定是否`modelformset_factory`允许我这样做......

然后，我必须缓存用于在请求之间创建表单的模型，以便在实际 POST 数据到达时跳过模型的检索/处理。

有谁知道是否有更好的方法来解决这类问题？

注意：我想使用 a`modelformset_factory`因为我想利用表单集的自动前缀和表单处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T03:57:31.777

迟到总比不到好...

我也遇到了这个问题。我通过传递 model_to_dict 作为初始参数来管理它。但请注意，model_to_dict 不会返回 ForeignKey 或 ManyToMany 字段，因此我必须显式传递这些参数（假设 MyModelClass 有一个 ForeignKey 到 MyRelatedClass）：

forms.py 中的助手 fn：

```
def MyInlineFormSetFactory(*args,**kwargs):
  _prefix     = kwargs.pop("prefix","formset")
  _request    = kwargs.pop("request",None)
  _initial    = kwargs.pop("initial",[])
  _instance   = kwargs.pop("instance")
  new_kwargs = {
      "can_delete" : False,
      "extra"      : kwargs.pop("extra",0),
      "form"       : MyForm,
      "fk_name"    : "my_related_name"
  }
  new_kwargs.update(kwargs)
  _formset = inlineformset_factory(MyRelatedModelClass,MyModelClass,*args,**new_kwargs)
  if _request and _request.method == "POST":
    # initialize w/ the request in the event of POST
    return _formset(_request.POST,instance=_instance,prefix=_prefix)
  # otherwise initialize w/ the initial kwarg
  return _formset(initial=_initial,instance=_instance,prefix=_prefix) 
```

其他地方的助手：

```
def get_initial_data(model,update_fields={}):
  dict = model_to_dict(model)
  # here is where I add the fields that model_to_dict ignores
  dict.update(update_fields)
  return dict 
```

而在我看来...

```
my_related_model = MyRelatedModelClass.objects.get(pk=42)
my_models = MyModelClass.objects.filter(some_key="some_value")
my_initial_data = [get_initial_data(my_model,{"my_related_name" : my_related_model}) for my_model in my_models]
my_formset = MyInlineFormSetFactory(instance=my_related_model,request=request,initial=my_initial_data,extra=len(my_initial_data)) 
```

我正在使用内联表单集工厂，但你明白了。

# java - 使用 JCIFS 从 IP 获取主机名

> ID：14277148
> 
> 赞同：3
> 
> 时间：2013-01-11T11:22:54.503
> 
> 标签：java, jcifs

我试图了解如何在给定 IP 地址的情况下使用 JCIFS 获取 LAN 上计算机的名称，但除了它的 IP 之外我什么也得不到。

我正在使用的代码是

```
 InetAddress addr = NbtAddress.getByName( ip ).getInetAddress();
    String test = UniAddress.getByName(ip).getHostName();
    System.out.println("IP: " + ip + " - addr: " + addr.getHostName() + " - test: " + test); 
```

我得到的结果是

```
 IP: 10.1.2.115 - addr: 10.1.2.115 - test: 10.1.2.115 
```

相反，如果我用`getHostAddress()`我`toString()`得到的是

```
 IP: 10.1.2.115 - addr: 10.1.2.115 - test: 0.0.0.0<00>/10.1.2.115 
```

我在这里错在哪里？

我正在使用带有 IP 的 Mac 测试 lib `10.1.2.117`，而目标是 Android 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-08T00:27:11.150

JCIFS 停止在 1.3.14 版本上支持 Netbios 名称解析。您可以找到停止此操作的发行说明。[https://jcifs.samba.org/](https://jcifs.samba.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-17T03:45:19.633

```
 /*
      Jcifs 1.3 no longer calls NbtAddress#checkData() in 
      NbtAddress#getHostName, so you need to actively call 
      NbtAddress#getNodeType() or NbtAddress#isGroupAddress() before acquiring hostName.
    */
    UniAddress address= UniAddress.getByName(currentIp,
                    true);
    Object o = address.getAddress();
    if (o instanceof NbtAddress) {
        NbtAddress nbtAddress = (NbtAddress) o;
        // jcifs 1.3 need call this method for request netbios name.
        nbtAddress.getNodeType();
    }
    ipScan.domain = address.getHostName(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T23:48:15.847

有点晚了，但我在 jcifs 1.3.17 上遇到了同样的问题。我恢复到 1.2.25，它现在可以工作了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-11T11:25:55.073

你可以改用标准的java api吗？如果是这样，请尝试以下

```
InetAddress addr = InetAddress.getByName("127.0.0.1");
String host = addr.getHostName(); 
```

# java - JTextPane 正在将其父 Scrollpane 滚动到底部

> ID：14277149
> 
> 赞同：1
> 
> 时间：2013-01-11T11:22:55.427
> 
> 标签：java, swing, scroll, jscrollpane, jtextpane

这是一个小 SSCCE，它显示了奇怪的滚动行为。当您启动它时，它会向下滚动到滚动窗格的底部。但我希望它保持领先。到目前为止，我发现，这只发生在 JTextPanes 上，甚至不会发生在 JTextArea 上。它也只有在您在 EDT 时才会发生。从 SSCCE 中删除 invokeLater() 并且它按预期工作。但是，这不是解决方案（对我来说）。

我也试过了，但没有效果：

```
final DefaultCaret caret = (DefaultCaret) tp.getCaret();
caret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE); 
```

我想要的是一个干净和通用的解决方案。因此，我想知道实际触发滚动的原因，因此我可以扩展 JTextPane 或它使用的 StyledDocument 或其他任何东西来避免默认情况下发生这种情况。就我而言，我主要将 JTextPane 用于不可编辑的多行文本，因为它支持文本对齐以及不同的字体大小和样式。所以实际上我可以放弃编辑功能，如果我解决了这个滚动问题。如果可能的话，我不想在添加所有内容后设置 ScrollPane 的滚动位置，因为我发现这是一个非常糟糕的解决方法。

谢谢你的帮助。这是SSCCE：

```
 import java.awt.LayoutManager;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;

public class ScrollPaneWithTextPanes
{
    public static void main(final String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {

            public void run()
            {
                final JPanel p = new JPanel();
                final LayoutManager layout = new BoxLayout(p, BoxLayout.Y_AXIS);
                p.setLayout(layout);

                for (int i = 0; i < 10; i++)
                {
                    final JTextPane tp = new JTextPane();
                    tp.setText("This is some text in text pane " + i);
                    p.add(tp);

                    //                    final DefaultCaret caret = (DefaultCaret) tp.getCaret();
                    //                    caret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE);
                }

                final JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.getContentPane().add(new JScrollPane(p));
                f.setSize(800, 200);
                f.setLocation(0, 0);

                f.setVisible(true);

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:59:06.900

奇怪的事情：设置 textPanes 的更新策略*确实*会有所不同 - 如果在设置文本之前完成

```
for (int i = 0; i < 10; i++) {
    final JTextPane tp = new JTextPane();
    final DefaultCaret caret = (DefaultCaret) tp.getCaret();
    caret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE);
    tp.setText("This is some text in text pane " + i);
    p.add(tp);

    // adding some other components simply leaves the scrollPane at the top
    // JComponent b = new JButton("This is some text in button "
    // + i);
    // p.add(b);
}

final JFrame f = new JFrame();
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
f.getContentPane().add(new JScrollPane(p)); 
```

奇怪的是，它改变了层次结构中更高的 scrollPane 的滚动行为（窗格被添加到一个面板中，然后被包装到一个 scrollPane ..）

# python - 用 eyed3 加载远程 url

> ID：14277150
> 
> 赞同：0
> 
> 时间：2013-01-11T11:22:56.190
> 
> 标签：python, eyed3

我已经使用 eyed3 有一段时间了，我一直在用它来以这种方式提取 mp3 文件的流派

```
import eyed3
audiofile = eyed3.load(path)
print audiofile.tag.genre.name 
```

现在我有一个这样的网址，`www.example.com/abc.mp3`.

这不起作用并给了我

`IOError: file not found: www.example.com/abc.mp3`

我的问题是，不`eyed3.load()`支持远程 url？是否有针对此库或任何其他可以建议的库的解决方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:29:22.980

首先检查您是否预先`http://`添加它，如果它可以工作，否则，

据我所知 - 您需要先从服务器检索文件，然后再使用它。

```
import urllib
filename, headers = urllib.urlretrieve('http://example.com/abc.mp3')
eyed3.load(filename) 
```

# html - 更改悬停时的字体大小移动其他 div

> ID：14277153
> 
> 赞同：6
> 
> 时间：2013-01-11T11:23:04.237
> 
> 标签：html, css

我想在元素上悬停时更改字体大小，我遇到的问题是当我移动一个项目时，列表的其他 div 会向下移动。这是我的代码：

**CSS**

```
a{
    /* position:absolute */
    font-size:16px;
}

a:hover {
    color:#0033CC;
    font-size:18px;
}

#menu_list{
    width:859px;
    cursor:pointer;
    }

#menu_list li{
    width:130px;
    height:21px;
    display:inline-block;
    margin: 0px 0px 0px 0px;
    border:1px solid #616261; 
    -webkit-border-radius: 3px; 
    -moz-border-radius: 3px;
    border-radius: 3px;
    font-family:sans-serif, arial, helvetica; 
    padding: 10px 10px 10px 10px; 
    text-shadow: -1px -1px 0 rgba(0,0,0,0.3);
    font-weight:bold; 
    text-align: center; 
    } 
```

**HTML**

```
<ul id="menu_list">
    <li><a>look</a></li>
    <li><a>look</a></li>
    <li><a>look</a></li>
    <li><a>look</a></li>
    <li><a>look</a></li>
</ul> 
```

这是一个[JSFiddle](http://jsfiddle.net/gracedescending/KLk4w/)。

如您所见，我为元素写了 position:absolute ，这有效，这意味着 div 保持静止，但如果我这样做，我不知道如何使我的文本居中。我猜问题是该元素没有上边距，所以我也尝试了，但我猜对于内联元素，它不可能设置边距，或者我现在没有正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T11:28:38.060

你应该给`line-height`最外面的内联元素（在你的例子中是`<li>`）至少等于内部元素的最大尺寸（悬停时）。

此外，您还应该赋予`vertical-align: middle`内部元素（锚点）；没有它，它们的底部边缘对齐，产生不和谐的视觉效果。

没有必要`position: absolute`。

**[看到它在行动](http://jsfiddle.net/2nWDm/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:27:50.103

改减on `height:21px`_`line-height``line-height by 1px``hover`

```
a:hover {
    color:#0033CC;
    font-size:18px; line-height:20px;
    }
#menu_list li{
    width:130px;
    line-height:21px;
    display:inline-block;
    margin: 0px 0px 0px 0px;
    border:1px solid #616261; 
    -webkit-border-radius: 3px; 
    -moz-border-radius: 3px;
    border-radius: 3px;
    font-family:sans-serif, arial, helvetica; 
    padding: 10px 10px 10px 10px; 
    text-shadow: -1px -1px 0 rgba(0,0,0,0.3);
    font-weight:bold; 
    text-align: center; 
    } 
```

**[演示](http://jsfiddle.net/KLk4w/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:30:36.433

只需添加`float:left`到`<li>`，其他 div 的移动将完全没有问题。

```
#menu_list li{

    float:left

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:40:04.813

您也可以像这样分配`position: relative`和`li`更改`a`：

```
a {
    position:absolute;
    font-size:16px;
    display: block;
    width: 130px;
    left: 10px;
} 
```

这不是可能的最优雅的解决方案（应该是那个`line-height`），但它确实有效。

# magento - Magento - 客户注册问题

> ID：14277156
> 
> 赞同：0
> 
> 时间：2013-01-11T11:23:15.020
> 
> 标签：magento, registration

我对 Magento 的客户注册流程有疑问。我禁用了客人。因此，您必须注册才能创建订单。

但我刚刚意识到一些奇怪的事情。当您在购物车中时，您想下订单，订购过程开始。它要求您注册，因此您提供所有信息（姓名、地址等）。然后你选择发货，付款，然后你可以验证订单，但是如果你在验证之前回到目录，添加一个产品，那么你的注册信息就会丢失！它会再次要求您注册，以便您验证订单。信息不在会话中维护……</p>

它是一个错误吗？还是正常行为？我的新模板有错误？

这对我的客户来说是一个严重的问题，因为客户可能会离开网站，因为他们不想提供两倍的信息。

谢谢， 罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:00:20.343

这是开箱即用的标准行为，因为在您实际下订单并使用插入的地址创建客户之前，您被视为客人。您可以通过以下几种方式更改该行为：

1.  在开始实际结账之前强制客户注册

    ```
    // Redirecting customer to login page and back once registered / logged in 
    if (!Mage::getSingleton('customer/session')->isLoggedIn()) {     
      Mage::getSingleton('customer/session')->setBeforeAuthUrl(Mage::getUrl('/*/', array('_secure'=>true))); 
      $this->_redirect('customer/account/login'); 
      return;
    } 
    ```

2.  临时保存该信息并在此类用例中重新加载

3.  提醒客户，如果他们试图在中间某个地方离开结帐流程，他们的数据将会丢失。

所有这些选项都需要构建某种自定义模块。

# android - 当用户在android中更改字体大小时如何解决设计问题？

> ID：14277165
> 
> 赞同：4
> 
> 时间：2013-01-11T11:23:40.073
> 
> 标签：android, android-layout, font-size

好吧，android 用户将字体大小正常更改为大或大，我的应用程序的设计就出来了。我使用相对布局作为父

这里有两张图片可以消除差异

**当设计看起来不错时**

![在此处输入图像描述](../Images/f8cd563d57189f92e3c797c893864d3f.png)

**当字体更改为大或巨大时，**

![在此处输入图像描述](../Images/1d6560227afd5518123b6b1cc4a2381a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:39:14.013

使用`RelativeLayout`这种布局是个坏主意，小屏幕的用户不会看到布局的底部。我建议您改为`ScrollView`在标题下使用

# java - 使用axis2从wsdl文件在java上生成.equals方法

> ID：14277167
> 
> 赞同：2
> 
> 时间：2013-01-11T11:23:42.740
> 
> 标签：java, wsdl, axis2

我想尝试比较两个不同层次结构中存在的复杂 java 对象，该对象也是使用axis2从我的wsdl文件生成的。

我知道我从 object 继承的标准 .equals 方法是不够的，那么有没有办法通过在 pom.xml 文件中配置我的axis2插件来生成它？

我在axis2的文档中找不到任何内容，你们知道这是否可能吗？

# python - 如何使任何服务器都可以配置 WSGI 应用程序？

> ID：14277172
> 
> 赞同：0
> 
> 时间：2013-01-11T11:24:10.570
> 
> 标签：python, wsgi

有没有一种方法可以分发一个 WSGI 应用程序，它可以在任何服务器上开箱即用，并且只能使用服务器的内置功能进行配置？这意味着管理员必须接触的唯一配置文件是服务器的配置文件。无需在 Python 中编写自定义 WSGI 脚本。

mod_wsgi 将配置变量添加`SetEnv`到传递给应用程序的 WSGI 环境字典中，但我没有找到一种方法来使用 Gunicorn 或 uWSGI 做类似的事情。使用`os.environ`适用于 Gunicorn 和 uWSGI，但不适用于 mod_wsgi，因为`SetEnv`不影响`os.environ`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:26:17.563

`environ`和都是`os.environ`映射。

```
servername = environ.get('servername', os.environ.get('servername', 'localhost)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:12:07.333

在 uWSGI（如果使用 uwsgi 协议）中，您可以使用 nginx 中的 uwsgi_param 键值、apache 中的 SetEnv（mod_uwsgi 和 mod_proxy_uwsgi）、Cherokee 的 cgi var 和 uwsgi http 路由器的 --http-var 传递其他变量。

对于 http 协议（在 gunicorn 或 uWSGI http-socket 中），我想到的唯一解决方案是在代理配置中添加特殊的标头，您将在 wsgi 应用程序中解析这些标头（http 标头被重写为前缀为 HTTP_ 的 cgi vars）

# python - 随着输出文件变大，Python file.write 变慢

> ID：14277174
> 
> 赞同：1
> 
> 时间：2013-01-11T11:24:13.680
> 
> 标签：python, file-io, python-2.7, windows-server-2008-r2

我对 Python 很陌生，但我有一个痛苦的问题。我收到了一个程序，它读取一个 infile（文本），更改一些值，并写入一个 outfile（也是文本）。随着 outfile 变得越来越大，写入变得越来越慢，在大约 2 MB 之后变得难以忍受。为什么会这样？我已尝试更改代码以使用不同大小的缓冲区，并且我已将其更改为在写入之前将数据缓存到更大的块（字符串）中。我还尝试了 join 而不是 += 来创建要写入的字符串。这些都对性能没有任何影响-除了编写更大的块，这实际上使代码变慢了。（！！！）

这是写入输出文件的方法。我将写入部分从单独的方法移至内联：

```
for ifile in _file_stripper(f_in):
    parse_infile(ifile)
    date = variable_data['arkiveringsdatum']
    variable_data['arkiveringsdatum'] = datetime( int(date[0:4]), int(date[4:6]), int(date[6:8]), tzinfo=TZ()).isoformat('T')
    _personnr= variable_data['personnr'].replace('-', '').split(' ')[0]
    tmplist = ['<utskriftsstatus><brevid_kalla>', variable_data['brevid_kalla'], '</brevid_kalla><mapp>Se Allt</mapp><tidpunkt>', variable_data['arkiveringsdatum'], '</tidpunkt><dokumentpaket>', variable_data['dokumenttyp'], '</dokumentpaket><status>Utskriven</status><rensningsdatum>999999</rensningsdatum><kundid_gdb>', variable_data['kundid_gdb'], '</kundid_gdb><personnr>', _personnr, '</personnr></utskriftsstatus>']
    f_out.write(''.join(tmplist)) 
```

方法`_file_stripper`将大文件拆分为记录。Infiles 为 5-21 MB。

请建议在哪里查找错误。当我谈到减速时，写入速度在写入大约 1 MB 后下降到每秒写入 4KB 以下，并且随着 outfile 变大而不断下降。

编辑：根据要求，这里是 parse_infile 和 _file_stripper：

```
def parse_infile(f_in):
   index = ""     #variabel som håller vilken ondemandvariabel vi läser in
   found_data = 0  #1 ifall vi hittat det vi letar efter annars 0
   for row in f_in:
      if( 'personnr' in row):
         found_data=1
         index = "personnr"
      elif( 'kundid_gdb' in row):
         found_data=1
         index = "kundid_gdb"
      elif( 'brevid_kalla' in row):
         found_data=1
         index = "brevid_kalla"
      elif( 'arkiveringsdatum' in row):
         found_data=1
         index = "arkiveringsdatum"
      elif( 'GROUP_FILENAME' in row ):
         variable_data['dokumenttyp'] = row.split(':')[-1].split('.')[2].capitalize()
      elif(found_data==1):
         variable_data[index] = row.split(':')[1].strip() 
         index = ""  #Nollställ index ifall värden saknas i filen
         found_data=0
      else:
         pass

def _file_stripper(tot_file):
   try:
      myfile = []
      for rows in tot_file:
         if not 'GROUP_FILENAME' in rows:
            myfile.append(rows)
         else:
            myfile.append(rows)
            yield myfile
   except Exception:
      pass

variable_data = { "brevid_kalla": "", "arkiveringsdatum": "", 
          "kundid_gdb": "", "personnr": "",
          "dokumenttyp": "" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:04:48.057

最有可能发生的事情是您的`variable_data`，或者更有可能的是其中的某些字段，随着每个解析的文件一起成长。

您的`parse_infile` 函数可能不会重置它并将新文件的值附加到已经存在的值上，从而使其对于每个读取的文件都变大 - 这将导致您所描述的 (O² ) 中使用的资源。

最好的做法是不要依赖全局变量——让你的`parse_infile`函数在每次交互时创建一个新的字典，并将其返回给调用者。在您的主函数上，将函数的返回值分配给您的字典：

```
def parse_infile(file_):
    variable_data = {}
    (...)
    return variable_data

(...)
for ifile in _file_stripper(f_in):
    variable_data = parse_infile(ifile)
    (...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:10:57.923

您的函数会无休止地`_file_stripper`添加到列表中，而无需重置列表：`myfile`

```
def _file_stripper(tot_file):
   try:
      myfile = []
      for rows in tot_file:
         if not 'GROUP_FILENAME' in rows:
            myfile.append(rows)
         else:
            myfile.append(rows)
            yield myfile
   except Exception:
      pass 
```

请注意，`myfile`设置在循环之外，并且每一行都附加到`myfile`，然后按原样生成。因此，您的进程内存占用量将不断增长，迫使操作系统最终开始换出内存，从而减慢您的进程。

我认为您的意思是在未出现`myfile`时重置：`GROUP_FILENAME``rows`

```
def _file_stripper(tot_file):
   try:
      myfile = []
      for rows in tot_file:
         if not 'GROUP_FILENAME' in rows:
            myfile.append(rows)
         else:
            myfile.append(rows)
            yield myfile
            myfile = []
   except Exception:
      pass 
```

# jquery - 有条件的选择

> ID：14277178
> 
> 赞同：0
> 
> 时间：2013-01-11T11:24:23.700
> 
> 标签：jquery, selection

我有这个条件选择，它做了它应该做的事情。[在这里看小提琴](http://jsfiddle.net/Ky4Jv/1/)。但我想破例或更改其中一项。

如果在第一个选择框中选择“其他品牌”，那么在第二个选择框中会有一个长文本，因为脚本从相应的 div 中获取文本：

```
$selector.append("<option value='" + $(this).attr('id') + "'>" + $(this).text() + "</option>"); 
```

我希望在第二个选择框中有另一个（更短的）文本 - 但仅限于此项目 - 并且不更改 div 的内容。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:32:00.040

你可以做一个如果说：

```
if( $(this).text() != "Content not to be displayed in select box" ){
//-- if something should be shown. change the text here --//
      }else{
             //-- if the shorter text should be shown --//
} 
```

如果您将 $(this).text() 设置为变量然后注入它，如果变量太长，您可以将文本换成其他内容...

# ios - 标签在 UITableView 中没有正确实现，为什么？

> ID：14277179
> 
> 赞同：1
> 
> 时间：2013-01-11T11:24:29.133
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个 tableView 应该填充一个`NSMutableArray`. 这在没有自定义原型的情况下工作得很好`UITableViewCell`。我有一个自己的单元格文件，名为`SimpleTableCell`. 我的故事板中的原型单元有这个类分配给它。**SimpleTableCell.h**的内容 ：

 **```
#import <UIKit/UIKit.h>

@interface SimpleTableCell : UITableViewCell
@property (nonatomic, weak) IBOutlet UILabel *nameLabel;
@property (nonatomic, weak) IBOutlet UILabel *moreInfoLabel;
@end 
```

这被导入到`viewController`我拥有的位置`tableView`，如下所示： **CargoViewController.h**

```
#import <UIKit/UIKit.h>
#import "StartupViewController.h"
#import "boatInfoViewController.h"
#import "SimpleTableCell.h"

@interface CargoViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate, UITableViewDelegate, UIPickerViewDataSource>

@property(strong,nonatomic) IBOutlet UILabel *testLabel; //label I use to test stuff instead of LOG
@property(strong,nonatomic) IBOutlet UIButton *findOwner; //button to summon pickerWheel
@property(strong,nonatomic) IBOutlet UIButton *findShip; //Button to confirm selection in picker and unhide tableView
@property(strong,nonatomic) NSArray *boatOwners; //Array for boat owners.
@property(strong,nonatomic) NSMutableArray *boatsForOwner; //array for boats, added by owner
@property(strong,nonatomic) IBOutlet UITableView *boatsTableView; //Table view
-(IBAction)findOwnerButtonPressed:(id)sender;
-(IBAction)findShipButtonPressed:(id)sender;
@property(strong, nonatomic) IBOutlet UIPickerView *shipOwners; //ship owner picker wheel
@property(strong,nonatomic)IBOutlet UILabel *infoLabel;
/*@property(strong,nonatomic)IBOutlet UILabel *nameLabel; //These was tested, but didn't work. Illegal assignment error.
@property(strong,nonatomic)IBOutlet UILabel *moreInfoLabel;
@property(strong,nonatomic)IBOutlet UITableViewCell *SimpleTableCell;*/

@end 
```

这又是对 **CargoViewController.m**的控制（仅添加了相关部分）

```
#import "CargoViewController.h"
#import "SimpleTableCell.h"
@interface CargoViewController ()

@end

@implementation CargoViewController
@synthesize testLabel, findOwner, findShip,shipOwners, boatsTableView, infoLabel;
@synthesize boatOwners, boatsForOwner;

//When I try to synthesize name and infolabel in cell here, it does not work

//...more code...

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [boatsForOwner count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *simpleTableIdentifier = @"SimpleTableItem";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    cell = [[SimpleTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}

cell.nameLabel.text = [boatsForOwner objectAtIndex:indexPath.row];
return cell;
} 
```

我的问题是： `cell.nameLabel.text`在对象上找不到`UITableViewCell` 哪个，根据![在此处输入图像描述](../Images/f23306b00641675f24be9f4ef9016dd3.png)我的故事板是错误的（？）

有关更多信息，该表在我实现原型单元之前有效。在我只使用默认值之前。错误触发：

```
#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
return 1;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
return [boatOwners count];
}
- (NSString *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row
        forComponent:(NSInteger)component
{
return [boatOwners objectAtIndex:row];
}

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
NSString *boatsFromOwner = [boatOwners objectAtIndex:[shipOwners selectedRowInComponent:0]];
//if(boatsForOwner) {[boatsForOwner release]; boatsForOwner = nil;}
boatsForOwner = [[NSMutableArray alloc] init];
if ([boatsFromOwner isEqualToString:@"Owner1"]) {
    [self.boatsForOwner addObject:@"Titanic1"];
    [self.boatsForOwner addObject:@"Titanic2"];
    [self.boatsForOwner addObject:@"Titanic3"];
    [self.boatsForOwner addObject:@"Titanic4"];
    [self.boatsForOwner addObject:@"Titanic5"];
    [self.boatsForOwner addObject:@"Titanic6"];
    [self.boatsForOwner addObject:@"Titanic7"];

}
NSLog(@"%@",boatsFromOwner);

[boatsTableView reloadData];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:29:43.520

改变这一行：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier]; 
```

为了这：

```
SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier]; 
```

顺便说一句，使用情节提要时`tableView:dequeueReusableCellWithIdentifier:`将永远不会返回`nil`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:33:13.627

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier]; 
```

尝试更改为

```
SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier]; 
```**

# qt - QGridLayout 中多个单元格中包含的小部件未居中

> ID：14277184
> 
> 赞同：9
> 
> 时间：2013-01-11T11:24:44.423
> 
> 标签：qt, alignment, qgridlayout

这个问题说明了一切。

我有一个 5 x 3 的网格。

看起来像这样

```
row 0:  buttonA--buttonA--buttonA   nothing   buttonB--buttonB--buttonB

row 1:  empty row

row 2:  buttonC  nothing  buttonD   nothing   buttonE  nothing  buttonF 
```

在整个列或行中没有任何内容的空间中， minimumRowHeight 和所有这些设置都可以工作。对？

好。按钮 A 和按钮 B（以及其他按钮）永远不会以它们共享的 3 个单元格为中心。绝不。我在布局参数上写了什么并不重要。

我删除了代码，因为它最终使用了垂直布局和内部两个水平布局。那些以这种方式居中。但我想更好地定位它们。

添加小部件时不起作用的是：

addWidget( 小部件, 0,0 , 2,0 , Qt::AlignHCenter ); 甚至 AlignCenter 都不起作用。

如何使其居中或向右对齐？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T11:57:36.970

[QGridLayout::addWidget()](http://qt-project.org/doc/qt-4.8/qgridlayout.html#addWidget-2)的语法是这样的：

> void QGridLayout::addWidget ( QWidget * widget, int fromRow, int fromColumn, **int rowSpan, int columnSpan** , Qt::Alignment alignment = 0 )

与描述：

> 此版本将给定的小部件添加到单元格网格中，跨越多行/列。单元格将从 fromRow 开始，fromColumn**跨越 rowSpan 行和 columnSpan 列**。

这意味着您的线路

```
addWidget( widget, 0, 0, 2, 0, Qt::AlignHCenter ); 
```

有`fromRow = 0`,和. `fromColumn = 0`_ 这意味着它从第 0 行开始并跨越两行，即它将位于第 0 行和第 1 行（注意：总共两行，而不是另外两行）。它也从第 0 列开始，跨度为 0，我认为这意味着列跨度被忽略。`rowSpan = 2``columnSpan = 0`

所以你真正想要的应该是：

```
addWidget( widget, 0, 0, 0, 3, Qt::AlignCenter ); 
```

您可能需要稍微尝试一下对齐方式。

# c# - Windows 8 XAML - C++ 与 C# - 用户体验

> ID：14277185
> 
> 赞同：3
> 
> 时间：2013-01-11T11:24:45.810
> 
> 标签：c#, c++, windows-8, windows-runtime, winrt-xaml

我目前正在用 C#（我最喜欢的语言）编写几个 Windows 商店 XAML 应用程序。我计划在未来进行大量 Windows 8 开发，并且我需要就如何进行这些方面做出一些具体的决定——特别是我选择 C# 还是 C++ 作为我的主要方法。对我来说，主要因素是：

用 C++ 开发：

*   从逆向工程中保护（ish）
*   在低规格设备上更好地使用内存
*   大量开源代码可用于实现广泛的功能
*   通过编写“更接近金属”运行的代码来实现更大程度的控制

用 C# 开发：

*   访问非常丰富的 .NET 框架
*   快速编写、测试和重写代码

到目前为止，它是一个平均匹配，因此最终决定将归结为在使用任何一种语言/技术编写相当复杂的 XAML 应用程序时用户体验的差异。

我的问题是 - 有没有人在这两种技术中编写 XAML 应用程序的经验很好，用户体验在这两种技术中是否同样好，或者是否存在细微的差异（例如，应用程序的 C++ 版本在滚动大量数据时会更流畅吗？在具有复杂 ItemTemplate 等的 GridView 中。）

有没有人有任何具体的，基于经验的答案来帮助我？

感谢期待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:27:21.290

两者都使用 - C# 用于所有 GUI 内容，C++ 用于数字运算等。

C++/CLI 提供了一种很好的方式来在两者之间进行互操作。因此，您拥有 C# 开发的速度和便利性，但可以访问所有库并在您需要的地方获得 C++ 的性能优势。

# android - 无法动态生成表格内容

> ID：14277187
> 
> 赞同：0
> 
> 时间：2013-01-11T11:24:58.450
> 
> 标签：android, json

我正在动态生成表格行以填充来自我的 Android 版本的 json 数据：4.2

**这是我的代码：**

```
try {
                   //HttpResponse response = httpClient.execute(httpGet, localContext);
                   HttpResponse response = httpClient.execute(httpGet, localContext);
                   HttpEntity entity = response.getEntity();

                       text = getASCIIContentFromEntity(entity);

                   //InputStream input = new BufferedInputStream( response.getEntity().getContent() );

                       JSONArray ja = new JSONArray(text) ;
                       // ITERATE THROUGH AND RETRIEVE CLUB FIELDS
                                    int n = ja.length();
                                    for (int i = 0; i < n; i++) {
                                        // GET INDIVIDUAL JSON OBJECT FROM JSON ARRAY
                                     JSONObject jo = ja.getJSONObject(i);

                                     title= jo.getString("Title");
                                     url= jo.getString("URL");
                                     desc.add(jo.getString("Description"));                             

                                    }
             } catch (Exception e) {
                         e.getLocalizedMessage();
                       }

             return desc;                

        }   

        protected void onPostExecute(ArrayList<String> desc) {
            int count=0;
            TableLayout tl;
            TableRow tr;

            tl=(TableLayout)findViewById(R.id.tableLayout1);

            if (desc!=null) {

                    for (int current = 0; current < desc.size(); current++) {

                     tr = new TableRow(VideoCategory.this);

                    TextView tv2 = (TextView)findViewById(R.id.vtext2);
                    tv2.setText(desc.get(count));

                    tr.addView(tv2);

                     tl.addView(tr, new TableLayout.LayoutParams(
                     LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

                }
            }
            } 
```

**输出：** 它说：

> 没想到应用程序已停止

**这是我的日志猫：**

```
01-11 16:01:03.452: I/Process(548): Sending signal. PID: 548 SIG: 9
01-11 16:01:03.795: I/WindowManager(59): WIN DEATH: Window{44013600 com.example.erpsecurity/com.example.erpsecurity.SecurityOnline paused=false}
01-11 16:01:03.795: I/ActivityManager(59): Process com.example.erpsecurity (pid 548) has died.
01-11 16:01:03.803: I/WindowManager(59): WIN DEATH: Window{43fee618 com.example.erpsecurity/com.example.erpsecurity.Login paused=false}
01-11 16:01:03.842: I/ActivityManager(59): Start proc com.example.erpsecurity for activity com.example.erpsecurity/.SecurityOnline: pid=564 uid=10037 gids={3003}
01-11 16:01:03.862: I/WindowManager(59): WIN DEATH: Window{440c11a8 com.example.erpsecurity/com.example.erpsecurity.VideoCategory paused=false}
01-11 16:01:03.862: I/WindowManager(59): WIN DEATH: Window{44021798 com.example.erpsecurity/com.example.erpsecurity.FreeCategory paused=false}
01-11 16:01:04.002: I/UsageStats(59): Unexpected resume of com.example.erpsecurity while already resumed in com.example.erpsecurity
01-11 16:01:04.859: D/dalvikvm(564): GC_EXTERNAL_ALLOC freed 854 objects / 61840 bytes in 183ms
01-11 16:01:05.202: W/ActivityManager(59): Activity destroy timeout for HistoryRecord{43fc4668 com.example.erpsecurity/.VideoCategory}
01-11 16:01:05.702: W/InputManagerService(59): Got RemoteException sending setActive(false) notification to pid 548 uid 10037
01-11 16:01:05.863: I/ActivityManager(59): Displayed activity com.example.erpsecurity/.SecurityOnline: 2068 ms (total 2068 ms)
01-11 16:04:58.495: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
01-11 16:09:58.509: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
01-11 16:14:58.574: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
01-11 16:18:25.153: I/ActivityManager(59): Starting activity: Intent { cmp=com.example.erpsecurity/.FreeCategory }
01-11 16:18:25.383: D/dalvikvm(564): GC_EXTERNAL_ALLOC freed 2682 objects / 155896 bytes in 99ms
01-11 16:18:26.592: D/dalvikvm(564): GC_EXTERNAL_ALLOC freed 1449 objects / 65872 bytes in 54ms
01-11 16:18:27.023: I/ActivityManager(59): Displayed activity com.example.erpsecurity/.FreeCategory: 1809 ms (total 1809 ms)
01-11 16:19:58.628: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
01-11 16:24:58.687: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
01-11 16:28:35.442: D/AndroidRuntime(572): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
01-11 16:28:35.442: D/AndroidRuntime(572): CheckJNI is ON
01-11 16:28:37.163: D/AndroidRuntime(572): --- registering native functions ---
01-11 16:28:38.753: D/dalvikvm(251): GC_EXPLICIT freed 167 objects / 8464 bytes in 58ms
01-11 16:28:54.824: D/PackageParser(59): Scanning package: /data/app/vmdl50860.tmp
01-11 16:28:56.398: D/dalvikvm(59): GC_FOR_MALLOC freed 15803 objects / 870720 bytes in 660ms
01-11 16:29:05.996: D/dalvikvm(251): GC_EXPLICIT freed 119 objects / 9872 bytes in 142ms
01-11 16:29:07.145: I/PackageManager(59): Removing non-system package:com.example.erpsecurity
01-11 16:29:07.145: I/ActivityManager(59): Force stopping package com.example.erpsecurity uid=10037
01-11 16:29:07.263: I/Process(59): Sending signal. PID: 564 SIG: 9
01-11 16:29:07.263: I/ActivityManager(59):   Force finishing activity HistoryRecord{4405b650 com.example.erpsecurity/.SecurityOnline}
01-11 16:29:07.263: I/ActivityManager(59):   Force finishing activity HistoryRecord{43f834f8 com.example.erpsecurity/.Login}
01-11 16:29:07.374: I/WindowManager(59): WIN DEATH: Window{4404bd38 com.example.erpsecurity/com.example.erpsecurity.FreeCategory paused=false}
01-11 16:29:07.374: I/WindowManager(59): WIN DEATH: Window{44114388 com.example.erpsecurity/com.example.erpsecurity.SecurityOnline paused=true}
01-11 16:29:07.423: I/UsageStats(59): Unexpected resume of com.android.launcher while already resumed in com.example.erpsecurity
01-11 16:29:07.834: W/InputManagerService(59): Got RemoteException sending setActive(false) notification to pid 564 uid 10037
01-11 16:29:08.272: D/PackageManager(59): Scanning package com.example.erpsecurity
01-11 16:29:08.272: I/PackageManager(59): Package com.example.erpsecurity codePath changed from /data/app/com.example.erpsecurity-2.apk to /data/app/com.example.erpsecurity-1.apk; Retaining data and using new
01-11 16:29:08.288: I/PackageManager(59): /data/app/com.example.erpsecurity-1.apk changed; unpacking
01-11 16:29:08.313: D/installd(35): DexInv: --- BEGIN '/data/app/com.example.erpsecurity-1.apk' ---
01-11 16:29:10.862: D/dalvikvm(579): DexOpt: load 802ms, verify 1003ms, opt 28ms
01-11 16:29:10.912: D/installd(35): DexInv: --- END '/data/app/com.example.erpsecurity-1.apk' (success) ---
01-11 16:29:10.912: W/PackageManager(59): Code path for pkg : com.example.erpsecurity changing from /data/app/com.example.erpsecurity-2.apk to /data/app/com.example.erpsecurity-1.apk
01-11 16:29:10.912: W/PackageManager(59): Resource path for pkg : com.example.erpsecurity changing from /data/app/com.example.erpsecurity-2.apk to /data/app/com.example.erpsecurity-1.apk
01-11 16:29:10.912: D/PackageManager(59):   Activities: com.example.erpsecurity.Login com.example.erpsecurity.SecurityOnline com.example.erpsecurity.FreeCategory com.example.erpsecurity.PaidCategory com.example.erpsecurity.PrivilegeCategory com.example.erpsecurity.SwitchCategory com.example.erpsecurity.VideoCategory com.example.erpsecurity.PdfCategory com.example.erpsecurity.PaidVideo com.example.erpsecurity.PaidPdf com.example.erpsecurity.GridView com.example.erpsecurity.PrivilegeAdapter com.example.erpsecurity.PrivilegeVideo com.example.erpsecurity.PrivilegePdf com.example.erpsecurity.VideoPage
01-11 16:29:10.933: I/ActivityManager(59): Force stopping package com.example.erpsecurity uid=10037
01-11 16:29:11.082: I/installd(35): move /data/dalvik-cache/data@app@com.example.erpsecurity-1.apk@classes.dex -> /data/dalvik-cache/data@app@com.example.erpsecurity-1.apk@classes.dex
01-11 16:29:11.082: D/PackageManager(59): New package installed in /data/app/com.example.erpsecurity-1.apk
01-11 16:29:11.292: I/ActivityManager(59): Force stopping package com.example.erpsecurity uid=10037
01-11 16:29:11.422: D/dalvikvm(126): GC_EXPLICIT freed 78 objects / 3880 bytes in 114ms
01-11 16:29:11.523: D/dalvikvm(59): GC_EXPLICIT freed 13166 objects / 702256 bytes in 166ms
01-11 16:29:12.672: D/dalvikvm(59): GC_EXPLICIT freed 7538 objects / 370168 bytes in 346ms
01-11 16:29:12.783: D/dalvikvm(159): GC_EXPLICIT freed 2276 objects / 116080 bytes in 1150ms
01-11 16:29:14.303: W/RecognitionManagerService(59): no available voice recognition services found
01-11 16:29:15.693: I/installd(35): unlink /data/dalvik-cache/data@app@com.example.erpsecurity-2.apk@classes.dex 
```

任何人请提前向我推荐解决方案谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:35:03.067

替换这一行

```
tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

有了这个

```
tl.addView(tr,t1.getChildCount(), new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
```

# symfony - 使用 FOSUserBundle 创建新用户失败

> ID：14277188
> 
> 赞同：47
> 
> 时间：2013-01-11T11:25:01.707
> 
> 标签：symfony, fosuserbundle

我正在尝试从命令行创建一个新用户并收到此错误：

```
Warning: array_search() expects parameter 2 to be array, null given
in /vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Model/User.php line 368 
```

当尝试通过在 web 界面上注册来创建用户时，我得到了这个：

```
SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'salt' cannot be null 
```

使用现有用户登录即可。还更新配置文件和更改密码。仅仅创建新用户是行不通的。

我在一个非常简单的设置中使用 v 1.3.1，但还没有找到任何解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-11T11:57:17.607

固定的！

我的用户实体中有一个自定义构造函数方法。在那里我忘了用`parent::__construct();`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-06T02:11:01.117

也许它可以帮助某人。使用 bcrypt 编码器时可以看到此错误。

```
SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'salt' cannot be null 
```

要解决此问题，只需在您的用户类中添加盐属性的映射覆盖（使其可为空）

```
use FOS\UserBundle\Model\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\AttributeOverrides({
 *  @ORM\AttributeOverride(
 *      name="salt",
 *      column=@ORM\Column(name="salt", type="string", nullable=true)
 *      )
 *  })
 */
class User extends BaseUser {
     ...
} 
```

**或者：**不要忘记更新您的架构。如果作曲家更新后发生错误！

```
bin/console doctrine:schema:update --force 
```

# c# - EntityFramework 迁移尝试创建现有数据库

> ID：14277191
> 
> 赞同：11
> 
> 时间：2013-01-11T11:25:15.740
> 
> 标签：c#, entity-framework, entity-framework-migrations

我们正在将一个简单的 ASP.NET MVC 应用程序部署到我们的登台服务器上，当 EntityFramework 尝试迁移现有数据库时，我们收到以下错误。

```
CREATE DATABASE permission denied in database 'master'. 
```

情况如下：

*   这是迁移第一次运行。
*   该数据库已经存在（它实际上是一个 Umbraco 数据库）。

看起来以下方法（来自 EntityFramework）返回 false，而它显然应该返回 true：

```
System.Data.Entity.Migrations.DbMigrator.EnsureDatabaseExists() 
```

数据库初始化程序具有以下代码：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<DataContext, Configuration>()); 
```

自动迁移已关闭，因为我们使用的是基于代码的迁移。

连接字符串指向正确的数据库，并且用户对该数据库具有 db_owner 权限。用户对服务器上的其他表没有权限。

这是个常见的问题吗？有谁知道这个的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-07T23:24:26.563

确保数据库存在 - 执行以下脚本

```
IF db_id(N'MyDatabaseName') IS NOT NULL SELECT 1 ELSE SELECT Count(*) FROM sys.databases WHERE [name]=N'MyDatabaseName' 
```

假设用户有权查询`'sys.databases'`数据库列表。如果此查询失败 - EF 认为尚未创建 DB 并尝试再次创建它。

确保 - 执行迁移的用户能够成功执行上述查询

# mysql - 合并两个 mysql 数据库时的性能

> ID：14277192
> 
> 赞同：0
> 
> 时间：2013-01-11T11:25:20.720
> 
> 标签：mysql, performance, merge, database-performance

我有两个相似的模式数据库需要合并。我正在考虑在创建脚本时需要牢记的性能问题。这些是我能想到的。

1.  每次插入表中不应选择超过一个预先指定的数据（使用限制），数据量取决于我们拥有的内存（RAM）。
2.  选择数据时不要锁定表。

谁能给我更多在创建脚本时需要牢记的要点？

# android - 谷歌地图没有出现在屏幕上

> ID：14277193
> 
> 赞同：0
> 
> 时间：2013-01-11T11:25:21.747
> 
> 标签：android, google-maps-android-api-2, android-maps-v2

在看到几个论坛和 Android 版谷歌地图教程后，我有了这个

```
public class MapsActivity extends MapActivity {

MapView mapView;
MapController mc;
GeoPoint p;

class MapOverlay extends com.google.android.maps.Overlay{
    @Override
    public boolean draw(Canvas canvas, MapView mapView,
            boolean shadow, long when){
        super.draw(canvas, mapView,shadow);
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p,screenPts);
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);
        return true;
    }

    public boolean onTouchEvent(MotionEvent event, MapView mapView){
        if(event.getAction()==1) {
            p=mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());
            Toast.makeText(getBaseContext(),
            p.getLatitudeE6()/1E6 + ","+p.getLongitudeE6()/1E6,
            Toast.LENGTH_SHORT).show();
            mc.animateTo(p);
            return false;
        } else return false;
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_maps);
    mapView=(MapView) findViewById(R.id.mapView);
    LinearLayout zoomLayout=(LinearLayout)findViewById(R.id.zoom);
    @SuppressWarnings("deprecation")
    View zoomView=mapView.getZoomControls();
    zoomLayout.addView(zoomView, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    mapView.displayZoomControls(true);
    mc=mapView.getController();
    String coordinates[]={"51.986367","5.666304"};
    double lat=Double.parseDouble(coordinates[0]);
    double lng=Double.parseDouble(coordinates[1]);
    p=new GeoPoint((int)(lat*1E6),(int)(lng*1E6));
    mc.animateTo(p);
    mc.setZoom(18);
    MyLocationOverlay mMyLocationOverlay=new MyLocationOverlay(this,mapView);
    mMyLocationOverlay.enableMyLocation();
    mapView.getOverlays().add(mMyLocationOverlay);
    mapView.invalidate();
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

根据谷歌开发者的说法，我修改了这样的清单

```
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>   
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
 <permission 
    android:name="tovar.testing.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="tovar.testing.permission.MAPS_RECEIVE"/>
<uses-feature 
    android:glEsVersion="0x00020000"
    android:required="true"/>    

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps"/>
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyAYLFPye3YL3HgXnPHGuoDCgYjrGJ4VtkA"/>
    <activity
        android:name=".MapsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我还将 API 密钥添加到布局中

```
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="AIzaSyAYLFPye3YL3HgXnPHGuoDCgYjrGJ4VtkA"
    android:clickable="true"
    android:enabled="true" 
    class="com.google.android.gms.maps.MapFragment"/> 
```

它运行，但地图没有出现在屏幕上，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:38:42.330

嘿为什么您的清单文件中需要以下内容

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>   
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
 <permission 
    android:name="tovar.testing.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="tovar.testing.permission.MAPS_RECEIVE"/>
<uses-feature 
    android:glEsVersion="0x00020000"
    android:required="true"/> 
```

您已经在 Maps V1 中编写了所有代码并尝试添加 Maps V2 所需的权限。如果您想构建 Maps Activity V2，则完全忽略 V1。

更重要的是，您的 MapView 标签是一个很大的错误

没有这样的标签接受 class=".....MapFragment"。

我建议您只看[Maps V2](https://developers.google.com/maps/documentation/android/start)并继续开发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:43:50.390

为了使您的代码正常工作，可能需要更改的几件事：

1) 你的类 Maps Activity 应该扩展 FragmentActivity

2）你的xml代码应该是这样的

```
 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

3）您的清单文件应该重新检查此信息：

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="YOUR_API_KEY"/> 
```

帮助链接：[http ://wptrafficanalyzer.in/blog/google-maps-in-android-application-with-new-google-maps-android-api-v2-using-supportmapfragment/](http://wptrafficanalyzer.in/blog/google-maps-in-android-application-with-new-google-maps-android-api-v2-using-supportmapfragment/)

[http://wptrafficanalyzer.in/blog/showing-current-location-in-google-maps-using-api-v2-with-supportmapfragment/](http://wptrafficanalyzer.in/blog/showing-current-location-in-google-maps-using-api-v2-with-supportmapfragment/)

# php - 通过获取数据库值突出显示行

> ID：14277194
> 
> 赞同：0
> 
> 时间：2013-01-11T11:25:31.597
> 
> 标签：php, mysql

我如何突出显示员工表行，通过`selected_val ==1`从表中获取`selected_candidate`，我只想突出显示表*`selected_val is 1`* 结构为的那些行*`selected_candidate`*

```
eid int(30)
rid int(30)
selected_val int(1) 
```

我正在使用此查询在表单上显示员工表

```
 $query = "SELECT eid,ename,lname,ecell,eposition,eemail,ecountry,estate,ecity,prefcities,ca,cs,cwa,completed,persuing,other_work1,other_work2,other_work3,other_work4,other_work5,other_work6,other_work7,other_work8,selected_val";   
                                $query .= "FROM employee INNER JOIN selected_candidate ON employee.eid = selected_candidate.eid";
     $query .= "WHERE efamiliar LIKE '%{$company}%' "; 
```

*和这个 PHP 代码*

```
<?php

                                if(isset($_POST['Submit']))
                                {

                                //$url="down.php?location={$location}&status={$status}&company={$company}&qr={$qr}&flag={$flag}&count={$count}";
                                $i=0;
                while($data_set = mysql_fetch_array($result_set))
                                {
                $i=0;
                echo "<div id=\"Message1[$i]\" class=\"box\">";
                                        echo "Country ={$data_set['ecountry']}<br/>";
                                        echo "State = {$data_set['estate']}<br/>";
                                        echo "</div>";

                                echo "<tr>";
                echo "<td><input id=\"select_candi{$i}\" onclick=\"javascript:func(this.id,{$_SESSION['uid']})\" type=\"checkbox\" name=\"check_candi[]\" value=\"{$data_set['eid']}\"/></td>"; 
                echo "<td>{$data_set['ename']}</td>";
                                echo "<td>{$data_set['lname']}</td>";
                                echo "<td>{$data_set['ecell']}</td>";
                                echo "<td>{$data_set['eposition']}</td>";
                                echo "<td>{$data_set['eemail']}</td>";
                                 if($data_set['ecity']=='')
                                        {
                                        echo "<td>{$data_set['ecountry']}</td>";
                                        }
                                        else
                                        {
                                        echo "<td onmouseover=\"ShowText('Message1[$i]'); return true;\" onmouseout=\"HideText('Message1[$i]'); return true;\" href=\"javascript:ShowText('Message1')\">{$data_set['ecity']}</td>";
                                        }

                               // echo "<td>{$data_set['ecountry']},{$data_set['estate']},{$data_set['ecity']}</td>";
                                echo "<td>{$qua}</td>";
                echo "<td>{$data_set['other_work1']} {$data_set['other_work2']}{$data_set['other_work3']}{$data_set['other_work4']} {$data_set['other_work5']} {$data_set['other_work6']} {$data_set['other_work7']} {$data_set['other_work8']} {$data_set['other_work9']} {$data_set['other_work10']}
                 {$data_set['other_work1e']} {$data_set['other_work2e']} {$data_set['other_work3e']} {$data_set['other_work4e']} {$data_set['other_work5e']} {$data_set['other_work6e']} {$data_set['other_work7e']} {$data_set['other_work8e']} {$data_set['other_work9e']} {$data_set['other_work10e']}
                </td>";
                    echo "<td><a href=\"detailcv.php?id={$data_set['eid']}\" target=\"_blank\"><input  style=\" cursor:hand;width:40px\" class=\"button\" name=\"cv\" type=\"button\" value=\"C V\" /></a></td>";               
                                echo "</tr>";

                                $i++;

                                }
                                }
                                ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:30:46.090

`JOIN`这两个表，`Employee`和`selected_candidate`，像这样：

```
SELECT 
  eid, ename, lname, ecell,
  eposition, eemail, ecountry, estate, 
  ecity, prefcities, ca, cs ,
  cwa, completed, persuing, other_work1, 
  other_work2, other_work3, other_work4,
  other_work5, other_work6, other_work7,
  other_work8,
  selected_val -- <<<<<<<<<<<<<<<<
FROM employee 
INNER JOIN selected_candidate ON employee.eid = selected_candidate.eid
WHERE efamiliar LIKE '%{$company}%'; 
```

然后你可以选择`selected_val`. 稍后，在前端应用程序中使用PHP，您可以测试该值是否`== 1`存在，即是否突出显示。

**旁注：**您的表格以这种方式未[**标准化**](http://en.wikipedia.org/wiki/Database_normalization)。您可以将`other_work`s 列移动到一个新表中，并将外键 empid 指向该列。

# c++ - 得到错误说与C++中的调用不匹配

> ID：14277201
> 
> 赞同：-5
> 
> 时间：2013-01-11T11:25:47.863
> 
> 标签：c++, eclipse, function

```
 pluginConfig(FixedPluginConfig(".", "createClientFactory")); 
```

我正在使用eclipse，如果我在FixedPluginConfig上按F3，那么它可以进入声明，但是当我做构建时

然后得到

错误：不匹配调用 '(zinc::FixedPluginConfig) (zinc::FixedPluginConfig)'

这是 FixPluginConfig 头文件：

```
#ifndef ZINC_FIXED_PLUGIN_CONFIG_H_
#define ZINC_FIXED_PLUGIN_CONFIG_H_

#include "AbstractPluginConfig.h"

NS_ZINC_OPEN

class ZINC_EXPORT FixedPluginConfig : public AbstractPluginConfig {

public:

    FixedPluginConfig(const std::string& configSpec);
    FixedPluginConfig(const std::string& libraryName, const std::string& createFunctionName);
    FixedPluginConfig(const std::string& libraryName, const std::string& createFunctionName, const std::string& createParameters);
};

NS_ZINC_CLOSE

#endif /* ZINC_FIXED_PLUGIN_CONFIG_H_ */ 
```

这是cpp文件：

```
#include "../include/FixedPluginConfig.h"
#include <boost/tokenizer.hpp>
#include <iostream>
#include <string>

NS_ZINC_OPEN

FixedPluginConfig::FixedPluginConfig(const std::string& libraryName, const std::string& createFunctionName) :
    AbstractPluginConfig(libraryName, createFunctionName, "") {

}

FixedPluginConfig::FixedPluginConfig(const std::string& libraryName, const std::string& createFunctionName, const std::string& createParameters) :
    AbstractPluginConfig(libraryName, createFunctionName, createParameters) {

}

/**
 * Construct a FixedPluginConfig by parsing the config file specifier string
 *
 * FixedPluginConfig string spec is of the form:
 *
 *   library_name function_name
 *   library_name function_name parameter [parameter]*
 *   library_name function_name(parameter parameter ...)
 */
FixedPluginConfig::FixedPluginConfig(const std::string &configSpec)
{

    boost::char_separator<char> sep(", ()");
    boost::tokenizer<boost::char_separator<char> > tok(configSpec, sep);
    boost::tokenizer<boost::char_separator<char> >::iterator i = tok.begin();

    libraryName = *i++;
    createFunctionName = *i++;
    createParameters.clear();
    while (i != tok.end())
    {
        createParameters = createParameters.append(*i++);
        if (i != tok.end())
            createParameters = createParameters.append(" ");
    }
}

NS_ZINC_CLOSE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:09:53.737

您要求 Eclipse 查找*类定义*，它找到了。
你的问题在于`pluginConfig`。

我猜你写过

```
FixedPluginConfig pluginConfig;
pluginConfig(FixedPluginConfig(".", "createClientFactory")); 
```

这是行不通的，因为 a`FixedPluginConfig`不是可以用`FixedPluginConfig`参数调用的东西。因此出现“呼叫不匹配”错误消息。

你可能的意思是

```
FixedPluginConfig pluginConfig(".", "createClientFactory"); 
```

# iphone - 在移动设备上提高 CSS3 过渡性能的“黄金法则”是什么？

> ID：14277206
> 
> 赞同：10
> 
> 时间：2013-01-11T11:26:08.383
> 
> 标签：iphone, performance, html, css, css-transitions

我在我的应用程序中使用了一些非常简单的 CSS3 过渡，如下例所示，我尝试在 div 容器中从左到右滑动：

```
<div id="navi">
    <form>
        <input>...</input>
    </form>
    <ul>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
        <li>...</li>
    </ul>
</div>

<div id="bg">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
    <img src="...">
</div>

#navi{
 z-index:2;
 position:fixed;
 -webkit-transform:translateZ(0);
 -webkit-transform-style: preserve-3d;
 -webkit-backface-visibility: hidden;
 -webkit-transition:left 0.5s;
 left:0;
 top:0;
 bottom:0;
 width:95%;
 overflow-x:hidden;
 overflow-y:auto;
 -webkit-overflow-scrolling:touch;
}

.slidein{
 left:500px;
} 
```

要滑入/滑出 div，我会这样做：

```
$("#navi").toggleClass("slidein"); 
```

在我的 iPhone 4s 上，这种过渡非常顺利。在 iPhone 4 上的性能是可怕的。

我可以做些什么来提高性能吗？是否有任何“黄金法则”或最佳实践？

到目前为止，我只知道：

*   用于`-webkit-transform:translateZ(0)`触发硬件加速
*   采用`-webkit-transform-style: preserve-3d;`
*   采用`-webkit-backface-visibility: hidden;`
*   避免渐变
*   避免`box-shadow`

我的主要问题之一是里面有很多项目，`#navi`比如 a`<ul>`有很多`<li>`元素。下面`#navi`还有另一个 div 元素，其中包含一些大图像。这些似乎也降低了性能（至少在我使用`display:none`它们时性能会提高，但这不是一个选项，因为它们需要在幻灯片转换期间可见）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T18:06:06.173

尝试动画`transform`而不是`left`属性，即使在旧的 iOS 设备上它也非常流畅。

```
#navi {
  transition: -webkit-transform .5s ease;
  -webkit-transform: translate3d(0, 0, 0);
}
#navi.slidein {
  -webkit-transform: translate3d(500px, 0, 0);
} 
```

小提琴：http: [//jsfiddle.net/x8zQY/2/](http://jsfiddle.net/x8zQY/2/)

**2017/01 更新**：请阅读这篇关于动画和 GPU 渲染、分析和优化技术的精彩文章[https://www.smashingmagazine.com/2016/12/gpu-animation-doing-it-right/](https://www.smashingmagazine.com/2016/12/gpu-animation-doing-it-right/)

# javascript - 未捕获的 SyntaxError：意外的数字

> ID：14277208
> 
> 赞同：0
> 
> 时间：2013-01-11T11:26:08.973
> 
> 标签：javascript, html

我在这里有这段代码：

```
var first = orfirst;    
second = eval("document.love.name" +ea).value.toUpperCase();
var names=second;
second = second.replace(r,""); 
```

使用此代码：

```
("document.love.name" +ea).value.toUpperCase(); 
```

我收到一个错误：未捕获的类型错误：无法读取未定义的属性“name1”

在哪里：`<input value='' name=name1 onkeyup=checnum(this) type=text size=15>`

因为他们说这个代码 id 已被弃用：`document.love.name`我试着让它像这样：`second = eval("document.getElementById('name')" +ea).value.toUpperCase();`。

然后我得到这个错误： Uncaught SyntaxError: Unexpected number

谁能给我看或更正代码？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:28:13.270

如何为元素添加 ID 并使用以下代码：

```
document.getElementById("name"+ea).value.toUpperCase(); 
```

感谢@Quentin 和@Prisoner 发现目前没有 ID。

# css - 悬停时突出显示下拉菜单中的项目并确保突出显示的颜色延伸到下拉框的右边缘

> ID：14277209
> 
> 赞同：0
> 
> 时间：2013-01-11T11:26:18.287
> 
> 标签：css, drop-down-menu, scroll, highlight

正在使用 Jquery 自动完成功能。将鼠标悬停在下拉列表中的某个项目上时，该项目会以不同的背景颜色突出显示。但是，如果下拉菜单有一个水平滚动条，则在滚动时突出显示的免费不会延伸到框的右边缘。如何确保突出显示的背景将一直延伸到列表中每个项目的自动完成文本框的边缘？

html示例结构

```
<div id="AutocompleteContainter_div" style="position: absolute; z-index: 9999; top: 86px; left: 1135px;">
<div class="autocomplete-w1 ">
<div class="autocomplete" id="Autocomplete_div" style="max-height: 1200px; width: 245px; display: block;">
<div title="City of Origin,Power Play Goals,Salary" class=""><strong>City</strong> of Origin,Power Play Goals,Salary</div>
<div title="City of Origin,Standing in Conference,Salary" class="selected"><strong>City</strong> of Origin,Standing in Conference,Salary</div>
<div title="City of Origin,Team,Penalty Minutes Served,Salary" class=""><strong>City</strong> of Origin,Team,Penalty Minutes Served,Salary</div>
<div title="City of Origin,Standing in Division,Shots on Net,Salary" class=""><strong>City</strong> of Origin,Standing in Division,Shots on Net,Salary</div>
<div title="City of Origin,Position,Penalty Minutes Served,Salary" class=""><strong>City</strong> of Origin,Position,Penalty Minutes Served,Salary</div>
<hr class="line"><font color="#B9B9B9" size="1">&nbsp;<b>Columns</b></font><div title="CITY" class=""><strong>CITY</strong></div>
<div title="City of Origin"><strong>City</strong> of Origin</div>
</div>
</div>
</div> 
```

css

```
.autocomplete-w1 {

background:no-repeat bottom right;
position:absolute; 
top:0px; 
left:0px; 
margin:8px 0 0 6px; /* IE6 fix: */ _background:none; _margin:0;
font-family: Helvetica Neue, Helvetica, Arial, sans-serif; 
font-size:11px;color: #333; 
}
.autocomplete { 
border:1px solid #999; 
background:#FFF; 
cursor:default; 
text-align:left;
 max-height:350px;
 overflow:auto;
 margin:-6px 6px 6px -6px; /* IE6 specific: */ _height:350px;  _margin:0; _overflow-x:hidden;
font-family: Helvetica Neue, Helvetica, Arial, sans-serif; 
        font-size:11px;color: #333;

 }
.autocomplete .selected {

background:#B8B8B8; 

}
.autocomplete div { 
padding:2px 5px; 
white-space:nowrap; 
}
.autocomplete strong { font-weight: bold;
    color: #000;
    background-color: #fff6e1; }

.autocomplete .line {
border-top: 1px solid #ffffff;
border-bottom: 1px solid #6D7B8D;
height: 2px;
margin: 4px 0px;
text-align: center;
padding: 0px;
line-height: 2px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:52:23.980

我理解你的问题。在这种情况下，当您将宽度 245 设置为 div“自动完成”时，子 div 仅具有此宽度。

但是我们需要获取内容的全宽（最大）。所以为此，我在内部 div 之前添加了一个 div 并设置“display:inline-block”来获取内容的宽度（最大）。

我已经修改了你的代码，它现在可以工作了。

```
<div id="AutocompleteContainter_div" style="position: absolute; z-index: 9999; top:     0px; left: 35px;">
<div class="autocomplete-w1 ">
<div class="autocomplete" id="Autocomplete_div" style="max-height: 1200px; width: 145px; display: block;">
<div style="display:inline-block;">
<div title="City of Origin,Power Play Goals,Salary" class=""><strong>City</strong> of Origin,Power Play Goals,Salary</div>
<div title="City of Origin,Standing in Conference,Salary" class="selected"> <strong>City</strong> of Origin,Standing in Conference,Salary</div>
<div title="City of Origin,Team,Penalty Minutes Served,Salary" class=""><strong>City</strong> of Origin,Team,Penalty Minutes Served,Salary</div>
<div title="City of Origin,Standing in Division,Shots on Net,Salary" class=""><strong>City</strong> of Origin,Standing in Division,Shots on Net,Salary</div>
<div title="City of Origin,Position,Penalty Minutes Served,Salary" class="">   <strong>City</strong> of Origin,Position,Penalty Minutes Served,Salary</div>
<hr class="line"><font color="#B9B9B9" size="1">&nbsp;<b>Columns</b></font><div title="CITY" class=""><strong>CITY</strong></div>
<div title="City of Origin"><strong>City</strong> of Origin</div>
</div>
</div>
</div>
</div> 
```

你可以在这里查看：http: [//jsfiddle.net/pitchaip/6uqTJ/3/](http://jsfiddle.net/pitchaip/6uqTJ/3/)

# c - 使用 plink 并从远程机器执行（windows）

> ID：14277210
> 
> 赞同：3
> 
> 时间：2013-01-11T11:26:23.920
> 
> 标签：c, linux, ssh, plink

```
plink user@10.220.60.xx '/home/user/test/testpgm'
```

在使用 plink 从 Windows 机器运行驻留在 Linux 机器上的以下程序时，我只收到以下消息。

```
测试计划
输入一个字符串：
```

在输入字符串作为输入时，它不会出现在命令窗口中，输出也不会出现。

```
#include<stdio.h>
int main(void)
{
   int i;
   char buf[30];
   printf("Test Pgm \n");
   printf("Enter a string:");
   fflush(stdout);
   gets(buf);
   printf("Input str:%s \n",buf);

   return 0;
} 
```

gcc test.c -o testpgm

PS：[Plink](http://meetings-archive.debian.net/pub/putty/putty-0.57/htmldoc/Chapter7.html)（PuTTY Link）是一个类似于UNIX ssh的命令行连接工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:37:51.157

Plinks 文档[1](http://the.earth.li/~sgtatham/putty/0.58/htmldoc/Chapter7.html)建议您不应将 Plink 用于交互式 shell 会话，就像您通常使用 ssh 所做的那样，而是用于自动化任务。然而，如果你将`-t`参数传递给你的 plink 调用，你可以给它一些交互行为（有限制）。

Windows 环境中 ssh 的其他一些替代方案是：

freeSSHd（微软提供）[http://www.freesshd.com/](http://www.freesshd.com/)

openSSH [http://www.openssh.com/](http://www.openssh.com/)

滴熊[https://matt.ucc.asn.au/dropbear/dropbear.html](https://matt.ucc.asn.au/dropbear/dropbear.html)

我没有测试过这些，但我想你会弄明白的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-25T06:30:24.377

在这种情况下它可能没有用，但要禁用交互式提示并自动接受 ssh 握手，您可以在尝试进入服务器并使用 Plink 执行命令时使用下面提到的选项。

```
plink -batch -v username@hostname -pw password -m shell.sh 
```

其中：-batch（禁用所有提示）

```
echo y | plink -ssh username@hostname -pw password -m commands.txt 
```

# android - 游戏中动画按钮等背后的逻辑是什么 - android

> ID：14277214
> 
> 赞同：0
> 
> 时间：2013-01-11T11:26:38.023
> 
> 标签：android, animation

我目前正在为 android 制作“宝石游戏”：

![在此处输入图像描述](../Images/c18bd1cc0e2babe62a4da3fff9d7793e.png)

问题是，到目前为止，我只在 android 平台上制作了一款扫雷游戏，其中我对用户操作（如屏幕触摸）有即时响应，我不必担心任何对象动画、移动图像等，但现在问你可能知道，在珠宝游戏中，当你要求在 2 颗宝石之间切换时，它们会有一个变换类型的动画，它们切换，只有当动画结束时，它才会计算（我相信会发生）如果选择是正确的以及组合中的其他宝石。

游戏中的菜单项也有这样的效果，当您单击将您定向到另一个屏幕的项目时，假设您可以看到按下按钮的轻微延迟。

我的问题是：我怎样才能轻松处理这样的事情？它真的取决于动画结束吗？依赖动画看起来不太聪明。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:51:16.507

我过去为处理此类问题所做的只是“锁定”了所有玩家输入，直到动画完成。如果有多个动画，我会创建一个“动画事件队列”，游戏会检查每个玩家输入和“动画完成”事件。每个事件代表一些动画，在这种情况下，它就像一个块移动，一个块消失，一个新块出现等。只有当队列为空时，我才会解锁控制。

这可能不适用于节奏更快的游戏，因为游戏需要真正的响应（我所做的游戏是回合制游戏）。我也会对其他人解决这个特定问题的方式感兴趣。

# c# - 在 C# 中进行数字签名是否有可靠、值得信赖的方法？

> ID：14277215
> 
> 赞同：1
> 
> 时间：2013-01-11T11:26:40.830
> 
> 标签：c#, database, security

我在过去的网站上写过“我同意”类型的条款和条件。此响应针对用户存储在数据库中。

但是我突然意识到，如果对此有某种争议，我将无法证明我没有从用户那里捏造这份协议。

人们如何处理这些情况，你如何建立一个实际的协议证明，至少证明拥有用户凭据的人已经“同意”？

- 最初的想法转向密码学，但我想不出如何利用它。

# asp.net - 在 IIS 服务器中运行 Asp.Net 应用程序时会列出目录

> ID：14277217
> 
> 赞同：1
> 
> 时间：2013-01-11T11:26:42.460
> 
> 标签：asp.net, iis

我创建了一个 Asp.Net 应用程序。它在 Asp.Net 服务器中成功运行。我的要求是在 IIS 服务器中运行该应用程序。我在 Visualstudio 中创建了一个部署包。并将该目录添加到 IIS 应用程序池中。一切都很好。

当我右键单击该应用程序并浏览该应用程序时，我希望运行一个 asp.net 网页。但它显示为如下所示的目录列表。

```
 localhost - /SendTile_deploy/

 [To Parent Directory]

1/11/2013  4:37 PM         3988 SendTile.deploy-readme.txt

1/11/2013  4:37 PM        12891 SendTile.deploy.cmd

1/11/2013  4:37 PM          163 SendTile.SetParameters.xml

1/11/2013  4:37 PM          563 SendTile.SourceManifest.xml

 1/11/2013  4:37 PM        11506 SendTile.zip 
```

我的部署是否正确..？或者我错过了任何过程..？我是 Asp.Net 的新手。任何人请帮助我。如果此应用程序有效，我必须添加一个数据库并在 IIS 中运行该应用程序。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:51:03.467

您需要创建一个默认文档（通过 IIS 管理器）或通过在 web.config 中粘贴以下内容来禁用目录浏览：

```
<system.webServer>
  <directoryBrowse enabled="false" />
</system.webServer> 
```

# java - 有效的Java。可序列化生成器模式（如何添加公共无参数构造函数？）

> ID：14277219
> 
> 赞同：2
> 
> 时间：2013-01-11T11:26:56.650
> 
> 标签：java, builder, effective-java

我想使用 Builder 模式以 Joshua Bloch 的风格创建一个类。但我想使用这个类作为 DTO 对象并从 EJB 传输它。所以它需要有公共的无参数构造函数。如何在构建器模式中实现这种 java-bean 样式？在 Effective Java 对象中，只有一个接受`Builder`对象作为参数的构造函数。如果我在那里添加公共无参数构造函数，那么我就失去了构建器优于 Java-bean 模式的优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:16:54.197

不确定是什么让您在这里使用构建器模式，但这是我的经验对您的问题的看法。

1.  您正在使用 EJB。所以，我假设您处于分布式应用程序模式。
2.  您的 DTO 将用于将数据传输到 EJB 和从 EJB 传输数据。所以，你应该考虑让你的这个 DTO 可序列化（现在，有一个无参数的构造函数是有意义的）。

据我说，你所需要的只是某种转换器，它从某个层接受 obj1 进行处理，然后返回它。

我建议仅在您的对象构建是一个多步骤过程（例如，用户注册）的情况下使用 builder。

# java - 如何在 Eclipse for Google App Engine 中从 Java 7 切换到 Java 6？

> ID：14277220
> 
> 赞同：2
> 
> 时间：2013-01-11T11:27:02.700
> 
> 标签：java, eclipse, google-app-engine

我使用 Google Web Toolkit 开发了一个小型应用程序，并希望将其部署到 Google App Engine (GAE) 服务器。我默认使用 Eclipse Juno 和 Java 7，但是当我尝试部署到 GAE 时，我意识到它还不支持 Java 7。所以我在项目设置中切换到 Java 6 JRE（将 Build Path/Libraries 设置为“java-6-openjdk-amd64”，Java Compiler/Compiler 合规级别设置为 1.6。

但是，当我尝试通过 Google Eclipse 插件部署我的应用程序时，它仍然会抛出相同的 RuntimeException：

> “该应用程序包含 Java 7 类，但尚未设置 --use_java7 标志。”

这是完整的调试输出：

```
Unable to update:
java.lang.RuntimeException: The application contains Java 7 classes, but the --use_java7 flag has not been set.
        at com.google.appengine.tools.admin.Application.createStagingDirectory(Application.java:576)
        at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:370)
        at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:53)
        at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:433)
        at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
        at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

如何删除 Java 7 剩余部分以便 Google 插件理解？

这一切都在 Ubuntu 12.10 64 位上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:36:31.580

您可能正在使用 Java 7 安装进行编译。在 Eclipse 中，转到*Window > Preferences*。在那里，浏览到*Java > Installed JREs*。

右侧的列表可能仅显示您的情况下的 jre/jdk7。您必须在此处添加 Java 5 或 6 的安装，并确保它是“勾选”的 JRE。

之后，使用*Project > Clean...*，选择“Clean All Projects”并确保勾选“Start a build immediatly”以及“build the entire workspace”。

[编辑：这个答案对于 android 开发不准确......当我意识到这一点时，快速搜索显示该问题看起来非常接近[Failed to deploy to Google App Engine 因为 --use_java7 标志尚未设置](https://stackoverflow.com/questions/13848495/failed-to-deploy-to-google-app-engine-because-use-java7-flag-has-not-been-set)，答案是应该是一样的。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T16:07:05.800

我最终能帮助它的唯一方法是在 Eclipse 中创建一个新项目，立即切换到 Java 6（构建路径、编译器、Java 方面），然后复制/粘贴上一个项目中的所有文件和 GAE 设置。

# java - Java 游戏音效无法正常工作

> ID：14277221
> 
> 赞同：0
> 
> 时间：2013-01-11T11:27:06.460
> 
> 标签：java, audio, javasound, clip

我正在尝试做我的学校项目（一个简单的 Java 游戏），但我无法获得音效。我正在使用 Clip 进行此操作，现在我的 playSound 方法如下所示：

```
public void playSound(File filename) {
    try {
        AudioInputStream sound = AudioSystem.getAudioInputStream(filename);
        Clip clip = AudioSystem.getClip();
        clip.open(sound);

        clip.setFramePosition(0);
        clip.start();
    } 
    catch (UnsupportedAudioFileException ex) {
        ex.printStackTrace();
    } 
    catch (IOException ex) {
        ex.printStackTrace();
    } 
    catch (LineUnavailableException ex) {
        ex.printStackTrace();
    }
} 
```

我有不同的声音效果作为属性（文件），当我想播放一些声音时我会调用该方法。

一切正常：例如，当玩家吃东西时会播放声音，但有时声音会变小。当玩家没有吃任何东西时，正在播放吃东西的声音。

你知道出了什么问题吗？像这样播放几个音效有问题吗？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:29:13.487

以下建议可能对您的情况有所帮助，也可能无济于事。

每次播放声音时，您都会从磁盘加载剪辑。剪辑被设计为加载一次，并根据需要调用。要重播剪辑，请将其重置回第 0 毫秒或第 0 帧，然后像此处一样调用 play。这样，它开始很快。按照您的编程方式，剪辑在从磁盘完全加载到内存之前甚至不会开始播放，并且 setFramePosition(0) 是多余的，因为新创建的剪辑将始终从头开始播放（除非您已明确设置它到其他一些框架位置）。

因此，我建议在游戏开始时，将剪辑加载到将持续存在的对象中，并根据需要引用它们，此时您只需要调用 setFramePosition(0) 和 play() 方法.

如果声音在奇怪的时间播放，我会更仔细地研究调用声音的逻辑。虽然您的方法不是最佳的，但它确实有效，并且如果声音文件的加载由于某种原因被延迟，只会导致奇怪的延迟播放时间。但是，如果您的声音超过几秒钟，那么这些加载延迟可能是问题的根源。

另一种想法是，SourceDataLine 将比创建、加载和播放新剪辑更快地开始播放。播放 SDL 比播放 Clip 需要更多的 cpu，但如果声音文件较长，这仍然是一种合理的方式。

# unix - Unix中的终端递增数字

> ID：14277222
> 
> 赞同：-3
> 
> 时间：2013-01-11T11:27:15.043
> 
> 标签：unix

我在 unix 终端中输入的每个命令都会增加命令的编号。

```
Eg : 1> date
     2> ls..etc. 
```

这种行为的原因是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:33:04.317

这是题外话，但给你一个简短的提示：（`PS1`和其他一些）环境变量定义了 shell 的提示。例如`\#`，给出命令编号 - 只需将其设置为其他值（参见 bash 手册页，尤其是 PROMPTING 部分以了解详细信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:32:30.490

原因是您的终端配置为显示自启动以来当前命令的行号。“提示”也被称为“PS1”，你可以用它做各种疯狂的事情！

如果您想了解如何执行此操作，请查看此处：

参考：[http ://www.gnu.org/software/bash/manual/bashref.html#Printing-a-Prompt](http://www.gnu.org/software/bash/manual/bashref.html#Printing-a-Prompt)

PS1 生成器和预览：[http ://www.kirsle.net/wizards/ps1.html](http://www.kirsle.net/wizards/ps1.html)

提示集合（含图片）：http: [//jamiedubs.com/ps1-collection-customize-your-bash-prompt](http://jamiedubs.com/ps1-collection-customize-your-bash-prompt)

# matlab - 在 ui textlabel 周围绘制边框

> ID：14277223
> 
> 赞同：2
> 
> 时间：2013-01-11T11:27:16.017
> 
> 标签：matlab, user-interface

matlab中文本的ui元素没有边框属性。

但是，如果我可以遍历所有获取的文本 ui 元素及其像素位置，我可能会在它们周围绘制一个简单的矩形。

但是我不知道如何遍历所有 ui 文本元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:52:02.037

如果您唯一的问题是查找所有文本框：您见过“ [findall](http://www.mathworks.co.uk/help/matlab/ref/findall.html) ”功能吗？

```
 hA = findall(gcf,'Style','text') 
```

一旦你有一个文本框句柄数组，对于每个单独的句柄，你可以，例如，创建一个具有不同“背景颜色”属性的底层文本框。

为了测试这一点，我做了流动：

1.  发射指南
2.  创建一个文本框1
3.  将 textbox1.units 设置为像素
4.  创建文本框2
5.  将 textbox2.BackgroundColor 设置为红色
6.  放

    ```
    texttox2.position.x = texttox1.position.x-1
    texttox2.position.y = texttox1.position.y-1
    texttox2.position.w = texttox1.position.w+2
    texttox2.position.h = texttox1.position.h+2 
    ```

这是我的结果： ![我的结果](../Images/4e7918b0624ba07b47119af8977fc17f.png)

# jquery - jQuery 两个 if 语句用于 1 个变量，但仅适用于一个

> ID：14277224
> 
> 赞同：1
> 
> 时间：2013-01-11T11:27:19.877
> 
> 标签：jquery, variables, if-statement, return

让我试着解释一下我想要完成的事情。我想做一个记忆难题，但我很难处理变量、if 语句和返回。

请您看一下我的示例，然后在块上单击三四次。我想在变量 == 1 时添加一些操作，而在变量 == 2 时添加其他操作。但是正如您所看到的，这不起作用，因为它会在一次后跳过警报 1...这是与返回（）？我相信是这样，但我希望你能解释我如何解决这个问题，以及它是否与退货有关。

**[示例 JSFIDDLE](http://jsfiddle.net/9rrRa/)**

**HTML**

```
<div id="container">
  <div class="coverup">
    <div class="hoverdiv"></div>
    <div class="image_A"></div>
  </div>
  <div class="coverup">
    <div class="hoverdiv"></div>
    <div class="image_B"></div>
  </div>
  <div class="coverup">
    <div class="hoverdiv"></div>
    <div class="image_A"></div>
  </div>
  <div class="coverup">
    <div class="hoverdiv"></div>
    <div class="image_B"></div>
  </div>
</div> 
```

**JS**

```
var amountofclicks = 0;

$('.coverup').bind("click", function (event) {

  if (amountofclicks < 2) {
    $(this).find('.letter').show();
    amountofclicks++;

    if (amountofclicks == 2) {
      alert('2');
    }
    if (amountofclicks == 1) {
      alert('1');
    }
    $(this).children().show();

  } else {
    $('.coverup').children().hide();
    $(this).children().show();
    amountofclicks = 1;
    return;
  }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:31:18.243

你应该`ammountofclicks`在最后设置为零。还有比它需要的更多的ifs。仅当图块尚不可见或`ammountofclicks`为零时，该函数才应运行，因此在开始时还要进行一次检查。

```
var amountofclicks = 0;

$('.coverup').bind("click", function (event) {
  if (amountofclicks==0 || !$(this).children().is(":visible")) {
    amountofclicks++;
    if (amountofclicks == 1) {
      $('.coverup').children().hide();
    }
    $(this).find('.letter').show();
    $(this).children().show();
    alert(amountofclicks);
    if (amountofclicks == 2) {
      amountofclicks = 0;
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:39:56.747

if 子句

```
if (amountofclicks == 2) { ... } 
```

永远无法到达，因为它在以下 if 子句中

```
if (amountofclicks < 2) { ... } 
```

更详细...

```
var amountofclicks = 2;

if (amountofclicks < 2) {
    // go here if amountofclicks < 2
    if (amountofclicks == 1) {
        // go here if amountofclicks == 1
    }
    if (amountofclicks == 2) {
        // unreachable, because amountofclicks is always < 2
    }
} else {
    // go here if amountofclicks >= 2
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:47:40.493

试试这个

```
var amountofclicks = 0;

$('.coverup').bind("click", function (event) {

  if (amountofclicks <= 2) {
    $(this).find('.letter').show();

    if (amountofclicks == 2) {
      alert('2');
    }
    if (amountofclicks == 1) {
      alert('1');
    }
    amountofclicks++;
    $(this).children().show();

  } else {
    $('.coverup').children().hide();
    $(this).children().show();
    amountofclicks = 1;
    return;
  }

}); 
```

# ruby-on-rails - Rails 不向 JSON 请求发送会话 cookie

> ID：14277241
> 
> 赞同：0
> 
> 时间：2013-01-11T11:28:24.527
> 
> 标签：ruby-on-rails, web-services, api, rest, cookies

我正在使用 Rails 3.2.8。我想从应用程序访问记录做一些处理并以修改记录的形式返回结果。我通过对控制器的 json 请求来做到这一点。它工作正常，但我在发布更新时收到 CSRF 警告（当然）。我想通过从原始请求中存储会话 cookie 并在发布时使用来删除这些。（这似乎也是一种很好的安全做法）。

问题是没有发送会话 cookie。我尝试过使用 HTTParty 和 RestClient gems。当我在浏览器中发出请求（使用 RESTClient 插件 for firefox）时，cookie 被发送。我认为这是预期的行为，因为应该将 cookie 发送到浏览器。

有没有办法让 cookie 发送到脚本？

这样做是否正确？如果不是，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:13:41.490

请检查参数中是否有**authentity_token**。我过去曾遇到过类似的问题。

如果authenticity_token 未传入参数，请在表单中添加form_authenticity_token 助手。

或者

在您的控制器中

```
skip_before_filter :verify_authenticity_token 
```

我认为这可能对您有所帮助。

# php - PHP 文件中的 SQL 查询需要修复

> ID：14277245
> 
> 赞同：1
> 
> 时间：2013-01-11T11:28:26.930
> 
> 标签：php, jquery, sql

我问了一个类似的问题，但是无法完全让查询给我想要的结果，它输出了一个问题，但不是正确的问题。我将在这里更好地澄清这个问题，并对表格进行一些修改。我有一个程序，如果一个人键入“让我们谈谈”，该程序会从表格中向用户询问一些问题（例如 20 qns）

我有 3 张桌子。

```
 (peopleiknow)           (questions)              (questionsasked)    
    NID    FName            QID   Question             QID PID Answer

     1      Mark             1   Are you human          1    1 'Definately yes.'
     2      Sue              2   Do you like soup?      1    2 'Most of the time.'
                                                        2    2 'Yes especially tomato.' 
```

（*问题表一开始可以为空）

基本上，该程序会为不在 questionsasked 表中的用户“$name”获取第一个问题。然后提出问题并将答案添加到问题表中。（起初我试图得到正确的问题）

与 php 交互的 javascript/jQuery 片段如下：

```
 var uname='Lindsay';  //will be assigned dynamically after I get this fixed.  
 $.post('ajax/getQuestions.php', { name: uname },function(data2) {
   var qn = data2.value1; //question
   var pid = data2.value2; // PID
   var qid = data2.value3;  //QID
   alert(qn);
   alert(pid);
   alert(qid);
 var answer1 = prompt(qn, 'Please answer here');
 $.post('ajax/addQuestionAsked.php', {answer: answer1, PID: pid, QID: qid},
       function(data3) {alert('added question');} );

  //$('div#PlaceOfResponse').html(data3);}

  }); 
```

PHP文件的重要部分如下：

**连接部分省略 ** $link 是连接

```
 if (isset($_POST['name']) && !empty($_POST['name'])) 
 {
    $name = trim($_POST['name']); //could do better protection..

  $query1 = "SELECT *      //(q.Question, q.QID, p.person)?                         
  FROM questions q
  INNER JOIN questionsasked qa 
  ON q.QID = qa.QID 
  INNER JOIN peopleiknow p
  ON qa.PID = p.NID
  WHERE qa.Asked='N' OR qa.Asked IS NULL
  AND p.Person = '$name'"; 
```

上面的查询不太奏效，也尝试了下面评论中的那个..但没有奏效..

```
/*
         $query1 = "SELECT FIRST(Question)
                    FROM questions q
                    WHERE NOT EXISTS
                      (SELECT * 
                       FROM questionsasked qa
           RIGHT JOIN peopleiknow p
                       ON p.NID = qa.PID
                       INNER JOIN questions q
                        ON qa.QID = q.QID
                        WHERE q.QID = qa.QID
                        AND p.FName = '$name')";                  
        */

  if ($result = mysqli_query($link, $query1)) 
  {
      if (0 == mysqli_num_rows($result)) 
  {
       echo('all asked');
   }
  else
   {
     /* fetch associative array */
       $row = mysqli_fetch_assoc($result);
     {header('Content-Type: application/json');
    $question = $row['Question'];
    $PID = $row['PID'];  
    $QID = $row['QID'];
        $response = array('value1' => $question, 'value2' => $QID, 'value3' => $PID);
          echo json_encode($response);
         }
     }  
 }
 }

 else {
 ?><script>alert('$name');</script>
<?php
echo 'variable \'name\' not set properly';}
 /* close connection */
 mysqli_close($link);

 ?> 
```

我几乎可以正常工作，但是当我将答案添加到问题表中，并刷新并说“让我们谈谈”时，它又问了同样的问题。然后我稍微更改了代码，现在 js 文件中的警报现在正在为所有 3 个发回的变量发出警报（未定义）。（在我稍微修改表之前工作）。现在看不出它为什么这样做。

这是我对查询的最新尝试：

```
 $query1 = "SELECT FIRST(q.question,p.NID,q.QID)                               
  FROM questions q
  LEFT JOIN questionsasked qa 
  ON q.QID = qa.QID 
  LEFT JOIN peopleiknow p
  ON qa.PID = p.NID
  WHERE qa.QID
  NOT IN (SELECT * FROM questionsasked WHERE q.QID = qa.QID) 
  AND p.FName = '$name'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:55:49.077

您可能需要考虑阅读左连接的工作原理

尝试这样的事情：

```
"SELECT *      
  FROM questions q
  LEFT JOIN questionsasked qa 
  ON   q.QID = qa.QID 
   and qa.PID = (select NID from peopleiknow where FName = '$name')
  WHERE qa.PID IS NULL " 
```

这次我用 SQLite DB 验证了它:-) 由于左连接中的missin PID，以前的版本不起作用！

问候，

马丁

# jsf - 在 Primefaces 中使用程序模型时如何指定 Ajax 更新 ID

> ID：14277249
> 
> 赞同：0
> 
> 时间：2013-01-11T11:28:33.553
> 
> 标签：jsf, jsf-2, primefaces

**问题：**使用动态模型来创建 Primefaces 组件，例如`Menubar`移除了在 JSF/XHTML 页面中指定要通过 Ajax 更新哪些组件的能力。在 Java back bean 中对其进行硬编码似乎是一种不好的做法。

**例子：**

JSF：

```
<h:panelGroup id="updateDiv">
    <!-- components -->
</h:panelGroup>

<p:menubar model="#{backBean.model}" /> 
```

回豆：

```
@ManagedBean
@ViewScoped
public class BackBean {
    private MenuModel model;

    public BackBean() {
        model = new DefaultMenuModel();
        MenuItem item = new MenuItem();
        item.setUpdate("updateDiv");  // Here: hardcoded dependency on JSF page.
        item.setValue("Click Me.");
        model.addMenuItem(item);
    }

    public getModel() {
        return model;
    }
} 
```

`updateDiv`在将其`BackBean`耦合到 JSF 页面中指定。这似乎很糟糕？是吗？如果是这样，有哪些替代方案？也许使用`<f:param/>`或类似的东西可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:28:06.467

就个人而言，我不会有太多麻烦。无论如何，支持 bean 上的代码通常都耦合到 JSF 页面。

不过，我会将它放在一个具有有意义名称的常量中，例如：

```
private static final String CONTENT_PANEL_ID = "updateDiv"; 
```

这里已经有一些关于 SO 的讨论，关于在支持 bean 中允许多少耦合，特别是关于属性和方法。我建议通读这些，然后自己决定：

*   [正确使用后备豆](https://stackoverflow.com/questions/8758814/proper-use-of-backing-beans)
*   [JSF MVC 框架中的 MVC 是哪些组件？](https://stackoverflow.com/questions/5104094/what-components-are-mvc-in-jsf-mvc-framework)
*   [区分不同种类的 JSF 托管 Bean](https://stackoverflow.com/questions/7223055/distinction-between-different-types-of-managed-beans)
*   [JSF 支持 bean 结构（最佳实践）](https://stackoverflow.com/questions/746047/jsf-backing-bean-structure-best-practices)
*   [将 JSF 理解为 MVC 框架](https://stackoverflow.com/questions/10111387/understanding-jsf-as-a-mvc-framework)

# algorithm - 将数组转换为中位数数组

> ID：14277250
> 
> 赞同：1
> 
> 时间：2013-01-11T11:28:34.427
> 
> 标签：algorithm, median

我正在思考以下问题的解决方案：我有一个大整数数组（在更难的情况下是整数流），我想将该数组转换为中位数数组，即它的位置对应于数组的中位数 [ 0..i]。

现在，我的蛮力方法是针对每个子数组，对其进行排序，然后选择中间元素。那是 O(n^2 log n)，因为每个 n 子数组必须在 N log N 时间排序。我可能可以使用一些计数机制将时间降低到 N^2，但是 N^2 是可以做到的最好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:56:43.580

将单个项目插入到已经排序的树状结构中，例如红黑树，将花费 O(log *n* )。如果您维护每个节点的后代数量，那么找到中位数也可以在 O(log *n* ) 中完成。对流的所有*n 个*元素执行此操作，并且您有一个 O( *n* log *n* ) 算法。

数据结构和中值计算可能如下所示：

```
struct TreeNode {
  enum { RED, BLACK } color;
  size_t numElements;
  int value;
  TreeNode* left, right;
} *root;

TreeNode* treeSelect(TreeNode *top, size_t count) {
  if (top->left != NULL) {
    if (count < top->left->numElements)
      return treeSelect(top->left, count)
    count -= top->left->numElements;
  }
  if (count == 0)
    return top;
  return treeSelect(top->right, count - 1);
}

TreeNode* treeMedian() {
  return treeSelect(root, root->numElements / 2);
} 
```

其他操作通常用于红黑树，尽管您可以跳过那些删除节点。您可以调整它们以使用重复元素。这里的一般规则是，当要插入的元素等于当前节点的元素时，您可以插入到任何子树中。并且在平衡树时，应保持重复键的顺序，以便您也保持附加子树的顺序。但是除非我错过了什么，否则平衡将在任何情况下都没有值比较，所以一旦你插入了重复项，你就完成了。如果您期望确实有很多重复值，则可以使用类似于 multimap 的方法，在每个节点中都有一个计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:00:41.917

可以通过`O(nlogn)`以下方法完成：

使用跳过列表（或 B+ 树）来维护数据流。
还要维护一个指向当前中位数的指针。

在每次迭代中，让节点数为`n`（在插入刚到达的元素之前），中位数（值）为`m`，您看到的新值为`x`。

1.  插入`x`跳过列表
2.  if `n%2 ==0`(中位数的索引应该增加):
    if `x < m.value`: 不需要改变, 的索引`m`也增加
    else: set`m <- m.next`
3.  else: (中位数的索引应该保持不变)
    if `x < m.value`: set `m <- m.previous`//因为 m 的索引增加了
    else: 不需要更改。//m的索引没有增加
4.  `m.value`是下一个元素的中位数

找到上一个/下一个是`O(1)`，插入`x`是`O(logn)`- 总复杂度是`O(nlogn)`额外的`O(n)`空间。

注意：如果流可以包含重复元素，则应特别注意，并且跳过列表应具有确定性行为 - 即始终插入最后一个可能的索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:31:40.607

使用一些快速的 BST，如 AVL 或 Splay。您可以简单地修改结构，以便每个节点都能及时获得其子树的中值`log N`。特别是您可以获得树中所有项目的中位数。

现在你正在做这样的事情：

```
Create empty BST
foreach n in stream:
    Insert n to BST
    Get median from BST.root 
```

# jquery - jQuery 多数据角色选择器

> ID：14277252
> 
> 赞同：2
> 
> 时间：2013-01-11T11:28:39.020
> 
> 标签：jquery, jquery-selectors

> **可能重复：**
> [多个值的 jQuery 属性选择器](https://stackoverflow.com/questions/9005361/jquery-attribute-selector-for-multiple-values)

假设我有以下内容：

```
<a href="#" class="result-name" data-role="1" data-obj-id="15">Obj 15</a>
<a href="#" class="result-name" data-role="3" data-obj-id="19">Obj 19</a>
<a href="#" class="result-name" data-role="2" data-obj-id="20">Obj 20</a> 
```

现在，我正在做这样的事情：

```
$(document).on('click', 'a.result-name', function() {
  var objId = $(this).data('obj-id');
  // do some ajax call...
}); 
```

现在，如果我只想在角色 1 或 3 的链接中调用添加此行为，并且我想在选择器中执行此操作，我该怎么做？

我试过：

```
$(document).on('click', 'a.result-name[data-role=1|3]', function() { //... 
```

没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:33:11.840

您需要将选择器分成两个匹配项：

```
.on('click', 'a.result-name[data-role=1], a.result-name[data-role=3]') 
```

或者可能从回调函数中进行选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T11:33:15.963

使用逗号将事件附加到多个元素

```
$(document).on('click', 'a.result-name[data-role=1], a.result-name[data-role=3]', function() { //... 
```

[http://jsfiddle.net/RSwMw/2/](http://jsfiddle.net/RSwMw/2/)

你也可以使用`NotEqual`选择器`!=`

```
$(document).on('click', 'a.result-name[data-role!=2]', function() { //... 
```

[http://jsfiddle.net/RSwMw/1/](http://jsfiddle.net/RSwMw/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:42:32.447

您可能正在寻找这个：http: [//jsfiddle.net/HXq9Q/](http://jsfiddle.net/HXq9Q/)

```
$(document).on('click', 'a.result-name[data-role=3],[data-role=1]', function () {
 // action here
}); 
```

# javascript - 在 javascript 中获取 xsl 值并检查 0 到 99

> ID：14277253
> 
> 赞同：0
> 
> 时间：2013-01-11T11:28:43.567
> 
> 标签：javascript, jquery, html, xslt

我有以下根据用户选择产品而创建的 xsl 面板。用户最多可以选择 99 个，并且将生成 99 个以下代码的精确面板。当从下拉列表中选择“其他”时，我有 jQuery 代码来操作（显示/隐藏）输入字段。

基本上我试图在我的javascript中获取xsl id，这样我就可以将代码应用到我的id，这将相应地增加。

非常感谢任何帮助。这些错误与 javacript 中的非法参数有关。

```
<xsl:attribute name="id">panel22_<xsl:value-of select="@id"/></xsl:attribute>

<table border="0" width="100%" height="100%" bgcolor="lightyellow" class="inline"
<script type="text/javascript">
var one = document.getElementById('<xsl:value-of select="@id"/>')
$('#producttypes' + '_' + one).change(function()
{
    if($('#otherprodtype').is(':selected'))
    {
    $('#myotherbox').show();
    }
    else
    {
    if($('#myotherbox').is(':visible'))
    {
    $('#myotherbox').hide();
    }
}
});;
 </script>

<tr>
<td class="Label">Product Type</td>
<td class="field">
    <select name="producttypes" id="producttypes_<xsl:value-of select="@id"/>">
        <option value="domguar">
            <xsl:if test="producttypes/option[@id='domguar']='selected'">
                <xsl:attribute name="selected"/>
            </xsl:if>Domestic Guarantee</option>
        <option value="indemnity">
            <xsl:if test="producttypes/option[@id='indemnity']='selected'">
                <xsl:attribute name="selected"/>
            </xsl:if>Indemnity</option>
        <option value="domcontbond">
            <xsl:if test="producttypes/option[@id='domcontbond']='selected'">
                <xsl:attribute name="selected"/>
            </xsl:if>Domestic Contract Bond</option>
        <option value="perfbond">
            <xsl:if test="producttypes/option[@id='perfbond']='selected'">
                <xsl:attribute name="selected"/>
            </xsl:if>Performance Bond</option>
        <option value="interventionguar">
            <xsl:if test="producttypes/option[@id='interventionguar']='selected'">
                <xsl:attribute name="selected"/>
            </xsl:if>Intervention Guarantee</option>
        <option value="customsguar">
            <xsl:if test="producttypes/option[@id='customsguar']='selected'">
                <xsl:attribute name="selected"/>
        </xsl:if>Customs Guarantee</option>
        <option value="vatbond">
            <xsl:if test="producttypes/option[@id='vatbond']='selected'">
                <xsl:attribute name="selected"/>
            </xsl:if>VAT Bond</option>
        <option value="otherprodtype" id="otherprodtype_<xsl:value-of select="@id"/>">
            <xsl:if test="producttypes/option[@id='otherprodtype']='selected'">
                <xsl:attribute name="selected"/>
            </xsl:if>Other</option>
    </select>
    <td class="field" id="myotherbox_<xsl:value-of select="@id"/>" style="display:none;">
    <input class="amdInputText" type="text" id="otherprodtypebox" value="" style="display:none;">
          <xsl:attribute name="value"><xsl:value-of select="otherprodtypebox"></xsl:value-of></xsl:attribute></input>
    </td>
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:08:58.073

我认为您在以下行中遇到了问题

```
<select name="producttypes" id="producttypes_<xsl:value-of select="@id"/>"> 
```

并且也在相关的表格单元格中

```
<td class="field" id="myotherbox_<xsl:value-of select="@id"/>" style="display:none;"> 
```

这显然不是有效的 XSLT 语法。但是不要惊慌，有一种直接的方法可以做到这一点，那就是使用属性值模板。只需将您的选择语句更改为此

```
<select name="producttypes" id="producttypes_{@id}"> 
```

花括号表示这是一个要计算的表达式，而不是字面输出。希望它应该像这样输出（例如，假设 @id 设置为 123）

```
<select name="producttypes" id="producttypes_123"> 
```

您将以类似的方式修改表格单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:51:50.507

下面的函数结合了递增 id 和 onchange 按钮。感谢帮助

```
<script type="text/javascript">
function myOtherBox(e, id) {
if (e.value == 'otherprodtype')
{
    $('#myBox_' + id).toggle();
}
} 
```

# sql - 使用上下文连接时不需要将 null 转换为 DBNull

> ID：14277257
> 
> 赞同：3
> 
> 时间：2013-01-11T11:29:05.783
> 
> 标签：sql, sql-server-2008, sqlclr

试图了解为什么在 Sql server 2008 Clr 程序集中使用上下文连接时我不必转换`null`为。`DBNull`

我使用以下 clr 过程：

```
 [SqlProcedure]
    public static void ParamTest(SqlBoolean useNormalConnection)
    {
        bool mode = useNormalConnection.Value;

        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.CommandText = "INSERT INTO TestNote (UserId, [Text]) VALUES (@UserId, @Text)";

            cmd.Parameters.Add("UserId", SqlDbType.Int).Value = null;
            cmd.Parameters.Add("Text", SqlDbType.NVarChar).Value = "hello!";

            if (mode)
            {
                using (SqlConnection con = new SqlConnection(@"Data Source=localhost\SQL2008;Initial Catalog=TestDb;Integrated Security=True"))
                {
                    con.Open();
                    cmd.Connection = con;
                    cmd.ExecuteNonQuery();
                }
            }
            else
            {
                using (SqlConnection con = new SqlConnection("context connection=true;"))
                {
                    con.Open();
                    cmd.Connection = con;
                    cmd.ExecuteNonQuery();
                }
            }
        }
    } 
```

`exec ParamTest 0`将工作

`exec ParamTest 1`无法给出以下异常消息：

> 参数化查询 '(@UserId int,@Text nvarchar(6))INSERT INTO TestNote (UserId' 需要参数 '@UserId'，但未提供该参数。

为什么在使用上下文连接时传递 null 起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:27:52.437

我不确定答案，但我猜它在幕后使用不同的提供者进行上下文连接，这只是实现上的差异。我不会指望将值设置为 null 来工作。对于不同版本的 .NET Framework，行为似乎也有所不同——例如，对于 .NET 3.5，根据[此](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.value%28v=vs.90%29.aspx) 您需要使用 DBNull，但如果您切换到 .NET 4.5 文档，则根本不会提及 DBNull。

# iphone - 如何使用 iOS 6 戳 Facebook 好友

> ID：14277267
> 
> 赞同：0
> 
> 时间：2013-01-11T11:29:38.140
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api, ios6

> **可能重复：**
> [Facebook iOS SDK Poke](https://stackoverflow.com/questions/14005689/facebook-ios-sdk-poke)

我想用 ios 6 戳一个 facebook 朋友。

我正在使用社交媒体框架。

如果有任何方法可以戳朋友，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:48:40.800

不可能通过 API 戳某人。对不起。

我对此表示感谢...

# android - Android SQLite 查询外键

> ID：14277272
> 
> 赞同：3
> 
> 时间：2013-01-11T11:30:13.130
> 
> 标签：android, foreign-keys, relational-database, android-sqlite

我有两个模型

```
categories(id, name, slug)
places(id, name, cat_id) 
```

当我必须将地点详细信息插入数据库时​​，我有一个类别`slug`字符串。所以我需要查询类别ID并将其插入到地方`category_id`

DBAdapter.java

```
public class DBAdapter {
    // Database and version
    private static final String DATABASE_NAME = "nomad.db";
    private static final int DATABASE_VERSION = 2;

    // Tables
    public static final String TABLE_CATEGORIES = "categories";
    public static final String TABLE_PLACES = "places";
    public static final String TABLE_PHOTOS = "photos";

    // Table Columns
    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_NAME = "name";
    public static final String COLUMN_SLUG = "slug";
    public static final String COLUMN_ACTIVE = "active";

    public static final String COLUMN_DISTANCE = "distance";
    public static final String COLUMN_DAYS = "days";
    public static final String COLUMN_LAT = "latitude";
    public static final String COLUMN_LNG = "longitude";
    public static final String COLUMN_WEATHER = "weather";
    public static final String COLUMN_TODO = "todo";
    public static final String COLUMN_ABOUT = "about";

    public static final String COLUMN_URL = "url";
    public static final String COLUMN_COPY = "copyright";

    public static final String COLUMN_CAT_ID = "category_id";
    public static final String COLUMN_PLACE_ID = "place_id";

    // Table Queries
    private static final String CREATE_CATEGORIES = "CREATE TABLE categories (_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, slug TEXT, active BOOLEAN);";
    private static final String CREATE_PLACES = "CREATE TABLE places (_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, slug TEXT, category_id INTEGER, distance TEXT, days TEXT, latitude TEXT, longitude TEXT, weather TEXT, todo TEXT, about TEXT);";
    private static final String CREATE_PHOTOS = "CREATE TABLE photos (_id INTEGER PRIMARY KEY AUTOINCREMENT, place_id INTEGER, url TEXT, copyright TEXT);";

    private final Context context;
    private static DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {

        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            database.execSQL(CREATE_CATEGORIES);
            database.execSQL(CREATE_PLACES);
            database.execSQL(CREATE_PHOTOS);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w("Nomad", "Upgrading database from version " + oldVersion
                    + " to " + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS categories");
            db.execSQL("DROP TABLE IF EXISTS places");
            db.execSQL("DROP TABLE IF EXISTS photos");
            onCreate(db);
        }

    }

    public DBAdapter open() throws SQLException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        DBHelper.close();
    }

    // Methods

    // Categories

    // Insert Category
    public long insertCategory(String name, String slug) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(COLUMN_NAME, name);
        initialValues.put(COLUMN_SLUG, name);
        initialValues.put(COLUMN_ACTIVE, true);
        return db.insert(TABLE_CATEGORIES, null, initialValues);
    }

    // Get Category ID by Slug
    public int find_city_id(String slug) {
        Cursor c = db.query(TABLE_CATEGORIES, new String[] { COLUMN_ID }, COLUMN_SLUG + "=" + "'" + slug + "'", null, null, null, null, null);
        if (c.moveToFirst()) {
            do{
                return Integer.parseInt(c.getString(0));
            } while (c.moveToNext());
        }
        else
            return -1;
    }

    // Places
    public long insertPlace(String name, String slug, String distance,
            String days, String latitude, String longitude, String weather,
            String todo, String about, int category_id) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(COLUMN_NAME, name);
        initialValues.put(COLUMN_SLUG, slug);
        initialValues.put(COLUMN_DISTANCE, distance);
        initialValues.put(COLUMN_DAYS, days);
        initialValues.put(COLUMN_LAT, latitude);
        initialValues.put(COLUMN_LNG, longitude);
        initialValues.put(COLUMN_WEATHER, weather);
        initialValues.put(COLUMN_TODO, todo);
        initialValues.put(COLUMN_ABOUT, about);
        return db.insert(TABLE_PLACES, null, initialValues);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:56:12.030

首先创建列级约束。

```
 final String CREATE_TABLE_STATE="CREATE TABLE booking_delivery ("
    + "id                INTEGER ,"   
    +"remark             TEXT, "
    +"barcode           INTEGER   REFERENCES customer_info(cust_barcode));"; 
```

# sql - 触发器 - postgres

> ID：14277273
> 
> 赞同：1
> 
> 时间：2013-01-11T11:30:18.293
> 
> 标签：sql, postgresql, triggers

我创建了以下表格

```
教授
-------------------------------------------------- ----
教授编号 | 姓名 | 房间 | 奖金
-------------------------------------------------- ----

演讲
--------------------------------------------------
讲座编号 | 标题 | 学期时间 | 由（教授参考）持有
--------------------------------------------------

```

我正在使用教授提供奖金（薪水）的每周课程在 postgres 下寻找触发器

也许我可以帮助别人，真的很棒！

甚至可能触发其他应用程序的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:33:05.107

首先，我认为您的奖金应该是另一张表，以便您可以按需汇总。所以这留下了三个表：

```
CREATE TABLE professor (
   profid serial not null unique,
   ...
);

CREATE TABLE lecture (
   lecture_id serial not null unique,
   professor int not null references professor(profid),
   ...
);

CREATE TABLE prof_bonus (
   lecture_id int references lecture(id),
   profid int references professor (profid),
   bonus_amt numeric not null,
   primary key (lecture_id, profid)
);

CREATE FUNCTION add_bonus() RETURNS TRIGGER LANGUAGE PLPGSQL AS
$$
BEGIN
INSERT INTO prof_bonus (lecture_id, profid, bonus_amt)
VALUES (new.lecture_id, new.profid, 100);
RETURN NEW;
END;
$$;

CREATE TRIGGER add_bonus AFTER INSERT TO lecture FOR EACH ROW 
EXECUTE PROCEDURE add_bonus(); 
```

# css - 在鼠标移动时更改透视角度/原点 3d-css

> ID：14277276
> 
> 赞同：5
> 
> 时间：2013-01-11T11:30:25.880
> 
> 标签：css, 3d, transform, perspective

我正在尝试使用以下立方体获得透视视角：

[http://jsfiddle.net/TrySpace/JvFSQ/5/](http://jsfiddle.net/TrySpace/JvFSQ/5/)

但是我没有做我期望的事情，我希望改变实际的视角。所以什么时候`transformOrigin: Xpos+'%'+Ypos+'%'`是100%-100%。我希望视角来自右下角，并看到立方体的右侧/底部。但它似乎所做的只是放大立方体。

我正在使用 jstransit，因为`.css( perspective-origin: X% X% )`通过 jQuery 设置似乎没有任何作用。

我想我还没有完全理解 3d CSS。

谁能看到我哪里出错了？

（更新 1：当我编辑第一个`<section>`: 并设置：`transform: rotateY(1deg) rotateX(1deg)`时，它似乎做得更少。好像必须发生变换，才能改变视角？[http://jsfiddle.net/TrySpace/JvFSQ/6/](http://jsfiddle.net/TrySpace/JvFSQ/6/) )

（更新 2：所以，当我将 Y&X 设置为 90 度时，我得到了一些我想要的，虽然是相反的。我的想法哪里出错了？[http://jsfiddle.net/TrySpace/JvFSQ/8/](http://jsfiddle.net/TrySpace/JvFSQ/8/)）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T15:22:50.087

`transform-origin`不改变视角。[它改变了`rotation`变换的中心。](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)

`perspective-origin` [更改`perspective`属性计算消失点的](https://developer.mozilla.org/en-US/docs/CSS/perspective-origin)方式。这涉及一些“观点”。

现在，我不确切知道您要实现什么（因此我的“解决方案”可能不完全是您想要的），但我认为将引导您朝着正确方向前进的是设置您的代码以更改此属性具有属性集的`article`包装器。`perspective`

[看到这个小提琴。](http://jsfiddle.net/JvFSQ/12/)

它将脚本的最后一行更改为

```
$("article").css({ perspectiveOrigin: Xpos+'% '+Ypos+'%' }); 
```

`transform-origin`并将您的重置`section`为`transform-origin: 50% 50% 0px;`. 我认为这还不是您想要的，但我认为您想要的功能更接近您的期望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-11T08:29:04.427

像这样的东西？

```
$(document).mousemove(function (event) {
    var Xdeg = 0;
    var Ydeg = 0;
    Ydeg = 90- (event.pageX * 90) / ($(document).width() / 2);            
    Xdeg =  -90 + (event.pageY * 90) / ($(document).height()/2);
    $('#DIVName').css('transform', 'translateZ( -200px ) perspective( 600px ) rotateY( ' + Ydeg + 'deg ) rotateX( ' + Xdeg + 'deg )');
}); 
```

# html - 是否可以在两行中输出“提交”的值？

> ID：14277286
> 
> 赞同：2
> 
> 时间：2013-01-11T11:30:56.327
> 
> 标签：html, css, submit-button

我有一个迷你表单，我需要将提交按钮值的长文本分成两行，以便它适合父 div 的宽度。我尝试设置提交按钮的宽度，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:34:06.153

使用`<button type="submit">`而不是`<input type="submit">`. 这将允许您将按钮的内容提供为 HTML 而不是纯文本，从而允许您根据需要设置按钮内容的格式。

最基本的解决方案是手动包含换行符：

```
<button type="submit">Foo<br/>Bar</button> 
```

当然，您还可以对按钮内容使用更高级的 CSS 布局。

**[看到它在行动](http://jsfiddle.net/rGsyy/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:32:44.890

将您想要的文本包装在第二行`<span>`并：

```
span{
    display:block
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:35:34.140

```
<style>
.buttontext {
  width: 10px;
  white-space: wrap;
  display: block;
}
</style>
<button><span class=buttontext>Very long text Very long text
Very long text</span></button> 
```

这会将文本包装在所需的行上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T11:37:59.783

以下将在按钮上包装文本。请注意，我已经指定了宽度。

```
<input type="button" value="This is some text on the button" style="white-space:normal; width:100px;" /> 
```

# ado.net - ADO.NET 使用 .where<> 子句

> ID：14277290
> 
> 赞同：0
> 
> 时间：2013-01-11T11:31:07.263
> 
> 标签：ado.net

我正在使用 ADO.Net 访问数据库。但是现在，我正在尝试恢复一些信息，但我不记得如何使用该`.where<>`子句。

这里的代码：

```
string sql = "Id = '" + identifier + "'";
USER u = db.USER.Where(sql).First<USER>(); 
```

实体模型在哪里`db`，但我不记得如何使用这个`Where<>`子句......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:34:13.657

你可以使用 lambda 表达式：

```
User u=db.USER.Where(x=>x.Id==identifier).First(); 
```

或者你可以这样写你的查询：

```
User u=from us in db.Users Where us.Id==identifier select us ; 
```

这是使用 lambda 表达式的另一种方法：

```
User u=db.Users.First(x=>x.Id==identifier); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:34:39.493

你的意思是`LINQ`

```
USER u = db.USER.Where(x => x.Id == identifier).First<USER>(); 
```

这篇关于[使用 ADO.NET 和 LINQ 的参数化 IN 子句的](http://www.mikesdotnetting.com/Article/116/Parameterized-IN-clauses-with-ADO.NET-and-LINQ)帖子可能有助于参考

# laravel - 如何在 Laravel 4 中使用缓存

> ID：14277293
> 
> 赞同：1
> 
> 时间：2013-01-11T11:31:22.247
> 
> 标签：laravel, laravel-4

在 Laravel 3 中它曾经如此简单。`Cache::put($key, $data, $minutes);`- 仅此而已！现在我正在查看 Laravel 4 源代码，试图弄清楚，但这对我来说太复杂了。我想使用文件系统缓存。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:37:40.933

方法差不多。

[Laravel 4 缓存文档](https://github.com/laravel/docs/blob/master/cache.md)

# jquery - 使用 jQuery 和 google chrome 浏览器问题打印动态 DIV

> ID：14277296
> 
> 赞同：0
> 
> 时间：2013-01-11T11:31:26.483
> 
> 标签：jquery, google-chrome, html, printing

我的页面上有一个按钮。当用户单击该按钮时，我会动态生成一个 div，在其中动态分配一些文本和图像，并通过 jquery 插件打印该 div。我使用名为**jquery.printElement.min.js的 jquery div 打印插件做到了这一点**

我的代码在 IE 和 FF 浏览器中运行良好，但在 chrome 中运行。如果 chrome 图像未分配或加载到 div 中，则仅打印文本。

这是我的代码，通过它我将图像和文本分配到 div 并通过 jquery 插件打印该 div。

```
$("#Print").click(function () {
    if (ImgPath != '') {
        sHtml = "<div id='dvPrint' ><table>";
        sHtml += "<tr><td>" + "<img src='" + ImgPath + "' height='600' width='400' border='0'/>" + "</td></tr>";
        sHtml += "<tr><td>" + $('#lblTxt').html() + "</td></tr>";
        sHtml += "</table></div>";
        var $dvPrint = $(sHtml);
        //alert(ImgPath);
        $dvPrint.printElement();  // jquery div print plug-in
    }
    else {
        alert("Image not found for print");
    }
    return false;
}); 
```

插件网址：- [https://github.com/erikzaadi/jQueryPlugins/tree/master/jQuery.printElement](https://github.com/erikzaadi/jQueryPlugins/tree/master/jQuery.printElement)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T11:41:20.450

我不太确定，为什么 Chrome 会这样，但我猜它与那个插件有关

您可以尝试手动执行此操作。制作一个非常简单的页面，它会带一个 url 参数，即 imagePath

例如“/printImage.php?src=path/img.jpg”

```
...

<body onload="window.print()">

<?php
   echo '<img src="' . $_GET["src"] . '"/>'
?>

... 
```

打开一个带有该页面 url 的弹出窗口，并在加载时调用 window.print()

# lua - 电晕故事板新场景无法在设备上运行

> ID：14277299
> 
> 赞同：1
> 
> 时间：2013-01-11T11:31:29.807
> 
> 标签：lua, coronasdk

我正在使用 Storyboard 并且有多个场景。我添加了一个在模拟器上运行良好的新场景，但是当我构建一个 apk 并将其安装在设备上时，当我尝试进入该场景时它不起作用并且应用程序冻结。有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:37:02.183

确保在包含新场景名称或图像时不会错过某些字符，因为模拟器使用示例：display.newimage("myimage.png") 和 display.newimage("myImage.png")，但是设备不会。

# visual-studio-2012 - VS2012 发布到多个位置

> ID：14277302
> 
> 赞同：6
> 
> 时间：2013-01-11T11:31:35.093
> 
> 标签：visual-studio-2012, web-deployment

我目前正在使用 VS2012 中的内置发布功能将 ASP.NET MVC 站点发布到 Web 服务器上的文件系统目录共享。无论如何，当我单击“发布”按钮时，我是否可以将其发布到多个位置，而不仅仅是一个？

我不想创建第二个配置文件并且必须两次执行相同的过程，并且我已经查看了通过添加附加标记来修改 pubxml 文件以查看发布例程是否选择它。但不幸的是，它似乎只是选择了列表中的最后一个配置。

我知道理想的情况是实施 CI 解决方案，但目前我的双手与发布功能捆绑在一起，需要保持相对简单。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-06T16:27:16.213

我们同样需要将我们的解决方案发布到多个文件共享位置，虽然几个月前有人问过这个问题，但我认为答案可能会使社区受益。

由于 VS 发布配置文件是可以轻松扩展的普通 MSBuild 文件，因此这是我提供的解决方案。

*请注意，我从我们的构建过程中提取了一些更复杂的代码片段，因此我不保证无需稍作改动就可以全部工作。*

在发布配置文件中，我添加了一个自定义**DeploymentPaths**项，如下所示。请注意，您可以定义一个或多个附加位置。

```
<ItemGroup Label="Defines additional publish locations">
  <DeploymentPaths Include="\\SERVER1\ShareFolder\ProjectA\" />
  <DeploymentPaths Include="\\SERVER2\ShareFolder\ProjectA\" />
</ItemGroup> 
```

然后我添加了一个自定义目标**CustomWebFileSystemPublish**在**WebFileSystemPublish**之后运行。此目标调用另一个 MSBuild 文件 publish.xml，该文件执行删除现有文件并复制新文件。

```
<!-- Custom File System Publish to deploy to additional locations based on DeploymentPaths -->
<Target Name="CustomWebFileSystemPublish" AfterTargets="WebFileSystemPublish" Condition=" @(DeploymentPaths)!='' ">
  <CreateItem Include="$(MSBuildProjectDirectory)\$(_PackageTempDir)">
    <Output ItemName="AbsoluteSourcePathItem" TaskParameter="Include" />
  </CreateItem>
  <CreateProperty Value="%(AbsoluteSourcePathItem.Fullpath)">
    <Output PropertyName="AbsoluteSourcePath" TaskParameter="Value" />
  </CreateProperty>

  <Message Text="### CustomWebFileSystemPublish" Importance="high" />
  <Message Text="### DeploymentPaths: @(DeploymentPaths)" Importance="high" />

  <MSBuild Projects="$(MSBuildProjectFile)" Properties="AbsoluteSourcePath=$(AbsoluteSourcePath)" Targets="DoPublish" />
</Target>

<Target Name="DoPublish">
  <Message Text="### DoPublish $(AbsoluteOutputPath) | %(DeploymentPaths.Identity)" Importance="normal" />
  <!-- Adjust path to the publish.xml file depending on where you put it in your solution -->
  <MSBuild Projects="..\Deployment\publish.xml" Properties="OutputPath=$(AbsoluteSourcePath);DeployPath=%(DeploymentPaths.Identity)" />
</Target> 
```

最后，这里是 publish.xml MSBuild 文件

```
<!-- Publish.xml -->
<Project ToolsVersion="4.0" DefaultTargets="Default" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
 <Target Name="Start">
  <PropertyGroup>
   <!-- Ensure DeployPath has the expected trailing slash -->
   <DeployPath Condition=" '$(DeployPath)' != '' and !HasTrailingSlash('$(DeployPath)') ">$(DeployPath)\</DeployPath>
  </PropertyGroup>
  <Message Text=" # Deploying from $(OutputPath) to $(DeployPath) " Importance="normal" />
 </Target>

 <Target Name="CleanDeployFolder" DependsOnTargets="Start"
      Condition=" $(DeployPath)!=''">
  <Message Text=" # Cleaning files in $(DeployPath)" Importance="normal" />

  <!-- Defines the files to clean -->
  <ItemGroup>
   <DeployCleanFiles Include="$(DeployPath)\**\*.*" />
  </ItemGroup>

  <!--Delete files in Deploy folder (folders not deleted by Delete Task)-->
  <Delete Files="@(DeployCleanFiles)" />

  <Message Text=" # Cleaning files in $(DeployPath) Completed" Importance="normal" />
 </Target>

 <Target Name="CopyToDeployFolder" DependsOnTargets="CleanDeployFolder"
      Condition=" $(DeployPath)!=''">
  <Message Text=" # Copying files to $(DeployPath)" Importance="normal" />

  <ItemGroup>
   <OutputFiles Include="$(OutputPath)\**\*.*" />
  </ItemGroup>

  <Copy SourceFiles="@(OutputFiles)" DestinationFolder="$(DeployPath)%(OutputFiles.RecursiveDir)" />

  <Message Text=" # Copying files to $(DeployPath) Completed" Importance="normal" />
 </Target>

 <Target Name="Default" DependsOnTargets="CopyToDeployFolder" 
      Condition=" $(OutputPath)!='' And $(DeployPath)!='' ">
  <Message Text=" # Deploying from $(OutputPath) to $(DeployPath) Completed" Importance="normal" />
 </Target>
</Project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:35:37.420

您可以创建一个小型 Windows 服务来监视目录并在添加新文件时复制到多个位置

在 MSDN 上尝试[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

# java - 我可以在 servlet 中使用 Thread.sleep 为本地服务器添加随机延迟以应答我的 api 调用吗？

> ID：14277304
> 
> 赞同：1
> 
> 时间：2013-01-11T11:31:37.910
> 
> 标签：java, servlets

我部署的服务器有时响应时间很长，而在本地主机上工作和开发时，所有调用都非常快。

由于资源加载时间过长的问题，这使我的应用程序在部署几次后进入意外行为。

我想在本地测试中模拟与真实服务器的不良连接，因此我想为每个请求响应添加一个随机延迟，我的第一个想法是在 servlet 中使用 Thread.sleep：

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {

    //add delay before processing request
    if (DELAY > 0){
        int delay;
        if (RANDOMIZE){
            delay = Random.nextInt(DELAY);
        } else {
            delay = DELAY;
        }
        try {
            Thread.sleep(delay);
        } catch (InterruptedException e1) {
            logger.error(e1);
        }
    }
... 
```

但是我已经读到不应在 servlet 中使用 Thread.sleep() ，但是这种劝阻的上下文及其解决方案与我的情况截然不同，我可以在这种情况下使用 thread.sleep() 吗？

编辑：这当然只适用于本地和客户端在本地测试中有点紧张......我只是想模拟我在现实中遇到的坏网络！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:33:53.677

我认为这整个方法是有缺陷的。我不会引入随机延迟（您将如何重复测试用例？）。你*可以*介绍 a `Thread.sleep()`，但我不会。这会在您的生产代码中吗？是否可配置？如果它在生产中意外打开会怎样？

我宁愿设置一个具有您生产环境的确切特征的测试服务器。这样，您不仅可以有效地调试，还可以构建一个回归测试套件，让您能够有效地开发，了解应用程序在生产中的表现。

如果您的用户在地理上不同，也许对上述情况的一个让步是在客户端和服务器之间引入网络延迟（视情况而定）。这通常使用网络上的[硬件设备](http://www.essentialnet.co.uk/acatalog/Network_Nightmare_WAN_Simulator.html#a195)完成，不会影响您的代码或配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T15:01:29.783

我这样做是为了延迟：

```
response.setContentType("text/html;charset=UTF-8");
try (PrintWriter out = response.getWriter()) {
    out.println("<meta http-equiv=\"Refresh\" content=\"3;url=home.jsp/\">");
} 
```

请记住，in`content=\"3;url=home.jsp/\"`是`3`延迟秒数，并且`home.jsp`是在给定秒数之后要转到的页面。

# php - 使用php获取外部html页面onclick内容

> ID：14277305
> 
> 赞同：2
> 
> 时间：2013-01-11T11:31:45.683
> 
> 标签：php, html

好的，可以说我有一个这样的 html 文件。. .

```
<div class="vad buttonDiv" onclick="location.href='http://example.htm?some/link&id=1357900324528'">
<div class="vad buttonDiv" onclick="other('example')">
<div class="vad buttonDiv" onclick="location.href='http://example.htm?some/link&id=7458758375733'">
<div class="vad buttonDiv" onclick="other('example1')">
<div class="vad buttonDiv" onclick="location.href='http://example.htm?some/link&id=3474537737392'">
<div class="vad buttonDiv" onclick="other('example2')"> 
```

我想要做的是每个`http://example.htm?some/link&id=**************`我想从外部html页面只显示它们我尝试了下面的代码

```
$dom = new DOMDocument();
@$dom->loadHTML($html);

$xpath = new DOMXPath($dom);
$onclicks = $xpath->evaluate("/html/body//div");

for ($i = 0; $i < $onclicks->length; $i++) {
    $onclick = $onclicks->item($i);
    $display = $onclick->getAttribute("onclick");
    echo $display."<br>";
} 
```

它得到了这个

```
location.href='http://example.htm?some/link&id=1357900324528'
other('example')

location.href='http://example.htm?some/link&id=7458758375733
other('example1')

location.href='http://example.htm?some/link&id=3474537737392
other('example2') 
```

任何想法都是如何获得我所追求的，而不是点击内容，任何答案都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:45:15.693

而不是复杂的 dom 解析最终会因解析网站的 HTML 错误而失败，我只使用[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)。

这很可能更快，更简单

```
if ( preg_match_all( '/onclick="(location\\.href=([^"]+))"/i', $html, $matches ) )
{
    print_r( $matches );
} 
```

![在此处输入图像描述](../Images/c5c9da5d15abf7674e4ce66f36bf692e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T00:30:55.863

```
$url= "http://example.com";
$dom = new DOMDocument();
@$dom->loadHTML($url);
$xpath = new DOMXPath($dom);

$PATH = $xpath->evaluate('/html/body//div[@class="vad buttonDiv"]');
for ($i = 0; $i < $PATH->length; $i++) {
    $lmao = $PATH->item($i);

$answer = $lmao->getAttribute('onclick');
$searchArray = array( "location.href='", "'");
$replaceArray = array( "", "");
$link = str_replace($searchArray, $replaceArray, $answer);
echo $link."<br>"
} 
```

显示只是链接的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T12:06:09.537

你离成功太近了...

在 Wikipedia 上学习 XPath 几分钟后，我想出了这个有效的 xpath：

```
$html=<<<TEXT
<html>
<body>
<div>
<div class="vad buttonDiv" onclick="location.href='http://example.htm?some/link&id=1357900324528'"></div>
<div class="vad buttonDiv" onclick="other('example')"></div>
<div class="vad buttonDiv" onclick="location.href='http://example.htm?some/link&id=7458758375733'"></div>
<div class="vad buttonDiv" onclick="other('example1')"></div>
<div class="vad buttonDiv" onclick="location.href='http://example.htm?some/link&id=3474537737392'"></div>
<div class="vad buttonDiv" onclick="other('example2')"></div>
</div>
</body>
</html>
TEXT; 
```

```
$dom=new DOMDocument();
@$dom->loadHTML($html);
$xpath=new DOMXPath($dom);
$divs=$xpath->evaluate("/html/body//div[starts-with(@onclick,'location')]");
foreach(range(0,$divs->length-1) as $i)
{
    var_dump($divs->item($i)->getAttribute("onclick"));
} 
```

上面的代码输出：

```
string(61) "location.href='http://example.htm?some/link&id=1357900324528'"
string(61) "location.href='http://example.htm?some/link&id=7458758375733'"
string(61) "location.href='http://example.htm?some/link&id=3474537737392'" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T11:44:28.280

简单的解决方案：

```
for ($i = 0; $i < $onclicks->length; $i++) {
    $onclick = $onclicks->item($i);
    $display = $onclick->getAttribute("onclick");
    if(substr($display, 0, 8) == 'location'){
        $display = str_replace(array("location.href='", "'"), '', $display);
        echo $display."<br>";
    }

} 
```

# ruby-on-rails - 将 recaptcha 消息错误附加到 rails errors.messages.values

> ID：14277308
> 
> 赞同：0
> 
> 时间：2013-01-11T11:32:06.247
> 
> 标签：ruby-on-rails, ruby, warnings

我在控制器中有这样的代码：

```
if verify_recaptcha #verify_recaptcha(:model => @order, :message => "Oh! It's error with reCAPTCHA!") && 
      respond_to do |format|
        if @order.save
          Cart.destroy(session[:cart_id])
          session[:cart_id] = nil
          OrderMailer.order_confirmation(@order, @user).deliver
          UserOrderMailer.user_order_mailer(@order, @user).deliver
          #OrderNotifier.received(@order).deliver
          pdf_link = generate_pdf(@order)
          link = "  <a href=\"#{pdf_link}\">#{I18n.t(:get_pdf)}</a>"   
          format.html { redirect_to root_url, :notice => (I18n.t(:successful_order_send)+link.to_s).html_safe}

        else
          format.html { render :action => "new", :notice => I18n.t(:error) }
          format.xml  { render :xml => @order.errors, :status => :unprocessable_entity }

        end
      end
    else
      flash[:warning] = I18n.t(:wrong_captcha)
      redirect_to :back 
    end 
```

在表单视图中：

```
 - if @user_vehicle.errors.messages.values.present?
    .warning
      - @user_vehicle.errors.messages.values.each do |msg|       
        - msg.each do  |m|
          %li= m 
```

但在布局中我也有：

```
- if flash[:warning]
              .warning
                = flash[:warning]
            - if flash[:notice]
              .notice
                = flash[:notice] 
```

我想知道，我怎样才能将recaptcha 失败错误附加到errors.messages.values 错误列表并显示在同一个div 中，并像我对模型验证消息所做的那样与li 一起显示？我如何才能看到更多 li item recaptcha 消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:17:39.797

```
if verify_recaptcha
  ...
else
  @user_vehicle.errors.add(:base, I18n.t(:wrong_captcha))
end 
```

# c# - 当用户位于不同域时，LDAP 未找到用户

> ID：14277316
> 
> 赞同：1
> 
> 时间：2013-01-11T11:32:29.617
> 
> 标签：c#, active-directory

首先，我是 AD / LDAP 等的新手，所以这可能是显而易见的（我希望如此？！）如果我的术语不正确，我深表歉意，请纠正我。

我们有两个域，**BUSINESS**（作为全球组）和**AUTH**（作为域本地组），它们之间具有单向信任（AUTH 信任 BUSINESS）。

以下代码适用于位于 BUSINESS 域中的**MachineA**`string LDAPServer = "BUSINESS"` ，当.

但是当在位于 AUTH 域的**MachineB**`string LDAPServer = "AUTH"`上运行时，它会显示消息**2f。未找到**用户，因为在步骤 2 中返回的用户是`NULL`。如果我更改`string LDAPServer = "BUSINESS"`，则在步骤 1 中会引发异常，即找不到域控制器。

请注意，可以成为 BUSINESS 用户的事实`LDAPServiceAccount`表明 AUTH 可以看到 BUSINESS。如果我将其更改为，`LDAPServiceAccount = "BUSINESS\\NotRealName"`则第 1 步将引发带有无效凭据的异常。这表明它已解析 BUSINESS 域用户对呼叫进行身份验证？如果我改变`LDAPServiceAccount = "AUTH\\ValidAccount"`我会得到同样的问题，`User == NULL`所以**2f。未找到用户**。

```
namespace ConsoleApplication1
{
    using System;
    using System.DirectoryServices.AccountManagement;

    class Program
    {
        static void Main(string[] args)
        {
            // Who are we looking for?
            string userName = "BUSINESS\\User.Name";

            // Where are we looking?
            string LDAPServer = "AUTH";
            string LDAPServiceAccount = "BUSINESS\\InternalServiceAccountName";
            string LDAPServiceAccountPassword = "CorrespondingPassword";

            Console.WriteLine("1\. Connecting to: " + LDAPServer);
            using (PrincipalContext adPrincipalContext = new PrincipalContext(ContextType.Domain, LDAPServer, LDAPServiceAccount, LDAPServiceAccountPassword))
            {
                Console.WriteLine("2\. Finding: " + userName);

                using (UserPrincipal user = UserPrincipal.FindByIdentity(adPrincipalContext, userName))
                {
                    if (user == null)
                    {
                        Console.WriteLine("2f. User Not Found!");
                        Console.ReadKey();
                        return;
                    }

                    Console.WriteLine("3\. Getting groups...");

                    using (var groups = user.GetGroups())
                    {
                        Console.WriteLine("4\. The groups are:");
                        foreach (Principal group in groups)
                        {
                            Console.WriteLine("\t{0}", group.Name);
                        }
                    }
                }
            }

            Console.WriteLine("END.");
        }
    }
} 
```

我想知道这是否是两个 AD 服务器之间的问题，其中 AUTH 没有与 BUSINESS 一起检查，而是检查用户是否存在于其配置中？我是否需要设置我的 LDAPServiceAccount 用户以获得任何特殊权限？任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:59:09.473

我想您在与 AD 服务器通信时需要检查先决条件

(1) 您的机器应该在您正在与之通信的同一个域中。

(2) 您在查询中传递的用户名和密码应该存在于该 AD 服务器上。

(3) 如果您正在更新记录，那么您传递给服务器的凭据应该具有管理员权限。

请检查这些点一次。

希望这对您有所帮助。

# java - 到达组件的说明，Java Swing

> ID：14277318
> 
> 赞同：1
> 
> 时间：2013-01-11T11:32:31.710
> 
> 标签：java, swing, jpanel

我对使用 javax.swing 和 java.awt 比较陌生，所以如果我笨拙地表达我的问题，请耐心等待。

假设我有一个自定义类 CustomClass 扩展并创建了一个 JPanel **p**。在课堂上，我将 JButton **b**添加到**p**。稍后在另一个程序文件中，我创建了一个名为**cp**的 CustomClass 实例，并希望能够使用“actionPerformed”方法捕获来自**b的单击事件。**我的问题是我如何从实例**cp “到达”（如书面路径） JButton** **b**？（假设所有相关的类文件已经关联）

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:36:19.433

如果我理解正确，请使用 getter 和 setter。我，你`customPanel`将有一个`public` `getButton()` 返回`JButton`实例的方法：

```
class CustomPanel extends JPanel {
    JButton button=new JButton("Some button");

    public JButton getMyButton() {
        return button;
    }
}

class Test {
    CustomPanel cp=new CustomPanel();

    void someMethod() {
       JButton b= cp.getMyButton();
    }
} 
```

**更新**

根据评论：

> 如果我的 JPanel 中有 10 或 20 个不同的组件怎么办，有没有什么方法可以在不使用很多方法的情况下找到它们

只需调用实例，然后使用 a 进行迭代[`getComponentCount`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getComponentCount%28%29)，这将允许您访问所有组件：`JPanel``for loop`[`getComponentAt(int i)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getComponentAt%28java.awt.Point%29)`JPanel`

```
CustomPanel cp=...;//this class extends jpanel

for(int i=0;i<cp.getComponentCount();i++) {
    Component c=cp.getComponentAt(i);
     if( c instanceof JButton) {
         //do something
    }
 } 
```

**更新 2**

> 如果我有两个或多个对象应该属于同一类但在其他方面被视为单独的对象，我如何使用您提供给我的循环将它们区分开来

看看这将允许您为实例分配一个唯一的名称`setName(String name)`，该名称可以通过. 或者使用and将按钮与另一个按钮区分开来，我更喜欢后者。或者你甚至可以使用他们的文本，通过`getName``JButton``getName()`[`setActionCommand(String name)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setActionCommand%28java.lang.String%29)[`getActionCommand()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#getActionCommand%28%29)`getText()`**

# vb.net - 检查 VB.NET 中的空控件

> ID：14277319
> 
> 赞同：0
> 
> 时间：2013-01-11T11:32:35.887
> 
> 标签：vb.net, maskedtextbox, backcolor, is-empty

我想检查我的表单中的控件是否为空......我有一个很长的代码。我给出下面给出的代码。

```
Public totflag As Boolean
Private Sub BTNSAVE_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles BTNSAVE.Click
    CheckMyControls()
    If totflag = False Then
        MessageBox.Show("Give Compleate Data!", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning)
        coloring()
    ElseIf totflag = True Then
        MessageBox.Show("Success", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information)
    End If
End Sub
Public Sub coloring()
    Dim txt, cmb, mtxt, rtxt As Control
    For Each txt In EMPGBDATA.Controls
        If TypeOf txt Is TextBox Then
            If txt.Text = "" Then
                txt.BackColor = Color.Red
            End If
        End If
    Next
    For Each cmb In EMPGBDATA.Controls
        If TypeOf cmb Is ComboBox Then
            If cmb.Text = "Select" Then
                cmb.BackColor = Color.Red
            End If
        End If
    Next
    For Each mtxt In EMPGBDATA.Controls
        If TypeOf mtxt Is MaskedTextBox Then
            If mtxt.Text = "" AndAlso mtxt.Name <> "MTXTPFESI" Then
                mtxt.BackColor = Color.Red
            End If
        End If
    Next
    For Each rtxt In EMPGBDATA.Controls
        If TypeOf rtxt Is RichTextBox Then
            If rtxt.Text = "" Then
                rtxt.BackColor = Color.Red
            End If
        End If
    Next

End Sub
Public Function CheckMyControls() As Boolean
    Dim txt, cmb, mtxt, rtxt As Control
    Dim flagtxt, flagcmb, flagmtxt, flagrtxt As Boolean
    flagtxt = False
    For Each txt In EMPGBDATA.Controls
        If TypeOf txt Is TextBox Then
            If txt.Text = "" Then
                flagtxt = True
            End If
        End If
    Next
    flagcmb = False
    For Each cmb In EMPGBDATA.Controls
        If TypeOf cmb Is ComboBox Then
            If cmb.Text = "Select" Then
                flagcmb = True
            End If
        End If
    Next
    flagmtxt = False
    For Each mtxt In EMPGBDATA.Controls
        If TypeOf mtxt Is MaskedTextBox Then
            If mtxt.Text = "" AndAlso mtxt.Name <> "MTXTPFESI" Then
                flagmtxt = True
            End If
        End If
    Next
    flagrtxt = False
    For Each rtxt In EMPGBDATA.Controls
        If TypeOf rtxt Is RichTextBox Then
            If rtxt.Text = "" Then
                flagrtxt = True
            End If
        End If
    Next
    If flagtxt = True Or flagcmb = True Or flagmtxt = True Or flagrtxt = True Then
        totflag = False
    Else
        totflag = True
    End If
    Return totflag
End Function 
```

实际上我不想检查一个 PFESI 文本框。是否为空。这是一个蒙面的文本框。我的问题是当我按下所有控件都有数据的提交按钮时，它会显示消息框“提供完整数据！”。没有数据的控件也显示相同的消息。请尝试检查代码并给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:09:38.897

你试图做的太复杂了。我不在电脑前，所以代码可能有小错误：

```
If CheckMyControls() = False Then
        MessageBox.Show("Give Compleate Data!", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning)
        coloring()
    Else
        MessageBox.Show("Success", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information)
    End If

End Sub

Public Sub coloring()
    For Each cntrl In Me.Controls
        Select Case cntrl.GetType
            Case GetType(ComboBox)
                If cntrl.Text = "Select" Then
                    cntrl.BackColor = Color.Red
                    Exit For
                End If
            Case GetType(MaskedTextBox)
                If cntrl.Text = "" AndAlso cntrl.Name <> "MTXTPFESI" Then
                    cntrl.BackColor = Color.Red
                End If
            Case Else
                If cntrl.Text = "" Then
                    cntrl.BackColor = Color.Red
                End If

        End Select
    Next

End Sub

Public Function CheckMyControls() As Boolean
    Dim bEmptyControlFlag As Boolean
    For Each cntrl In Me.Controls
        Select Case cntrl.GetType
            Case GetType(ComboBox)
                If cntrl.Text = "Select" Then
                    bEmptyControlFlag = True
                    Exit For
                End If
            Case Else
                If cntrl.Text = "" Then
                    bEmptyControlFlag = True
                End If

        End Select
    Next

    Return Not bEmptyControlFlag
End Function 
```

# python - Python - 从列创建列表

> ID：14277321
> 
> 赞同：1
> 
> 时间：2013-01-11T11:32:37.730
> 
> 标签：python, list

如何从中创建（两列，固定宽度）：

```
0.35    23.8
0.39    23.7
0.43    23.6
0.47    23.4
0.49    23.1
0.51    22.8
0.53    22.4
0.55    21.6 
```

两个列表：

```
list1 = [0.35, 0.39, 0.43, ...]
list2 = [23.8, 23.7, 23.6, ...] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T11:34:48.997

可能你正在寻找这样的东西

```
>>> str1 = """0.35    23.8
0.39    23.7
0.43    23.6
0.47    23.4
0.49    23.1
0.51    22.8
0.53    22.4
0.55    21.6"""
>>> zip(*(e.split() for e in str1.splitlines()))
[('0.35', '0.39', '0.43', '0.47', '0.49', '0.51', '0.53', '0.55'), ('23.8', '23.7', '23.6', '23.4', '23.1', '22.8', '22.4', '21.6')] 
```

您可以轻松扩展上述解决方案以适应任何类型的迭代，包括文件

```
>>> with open("test1.txt") as fin:
    print zip(*(e.split() for e in fin))

[('0.35', '0.39', '0.43', '0.47', '0.49', '0.51', '0.53', '0.55'), ('23.8', '23.7', '23.6', '23.4', '23.1', '22.8', '22.4', '21.6')] 
```

如果您希望将数字作为浮点数，而不是字符串，则需要可能通过 map 将其传递给 float 函数

```
>>> zip(*(map(float, e.split()) for e in str1.splitlines()))
[(0.35, 0.39, 0.43, 0.47, 0.49, 0.51, 0.53, 0.55), (23.8, 23.7, 23.6, 23.4, 23.1, 22.8, 22.4, 21.6)] 
```

最后将其解压缩到两个单独的列表中

```
>>> from itertools import izip
>>> column_tuples = izip(*(map(float, e.split()) for e in str1.splitlines()))
>>> list1, list2 = map(list, column_tuples)
>>> list1
[0.35, 0.39, 0.43, 0.47, 0.49, 0.51, 0.53, 0.55]
>>> list2
[23.8, 23.7, 23.6, 23.4, 23.1, 22.8, 22.4, 21.6] 
```

那么它是如何工作的

[zip](http://docs.python.org/2/library/functions.html#zip)接受一个可迭代的列表，并为每个迭代器返回一个成对元组的列表。itertools.izip 类似，但它不是返回成对元组的列表，而是返回成对元组的迭代器。这对内存更友好

[map](http://docs.python.org/2/library/functions.html#map)对迭代器的每个元素应用了一个函数。所以`map(float, e.split)`会将字符串转换为浮点数。注意表示地图的另一种方式是通过 LC 或生成器表达式

最后[str.splitlines](http://docs.python.org/2/library/stdtypes.html#str.splitlines)将换行符分隔的字符串转换为单个行的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:47:34.253

尝试这个：

```
splitted = columns.split()
list1 = splitted[::2] #column 1
list2 = splitted[1::2] #column 2 
```

# ios - 当通过 Adob e Air 在 iOS 上启动软键盘时，侦听器/事件出现问题

> ID：14277325
> 
> 赞同：0
> 
> 时间：2013-01-11T11:32:45.327
> 
> 标签：ios, events, air, textfield, soft-keyboard

我正在使用 Adob​​e Air 为 iOS 和最终的 Android 制作应用程序。这是一个填字游戏。许多填字游戏应用程序/游戏都具有此功能，您可以在其中点击一个字母方块，所选方块将与单词中的其余字母一起突出显示。即，您点击五个字母单词的第一个字母方块，然后突出显示构成该单词的所有字母方块。

许多填字游戏所做的另一件事是允许用户再次点击同一个方块并改变方向。例如，如果您点击拼图左上角的第一个字母方块一次，它将突出显示从角落水平移动的单词。如果您再次点击相同的字母方块，它将突出显示垂直方向的单词。

我的所有这些都按预期工作，但我的问题在于 iOS 软键盘。当软键盘启动时，它不会注册水龙头。我必须点击以隐藏软键盘，然后再次点击相同的字母方块。

正方形只是一个简单的精灵，上面有一个 TextField。

是否与软键盘启动有关，或者可能是因为 TextField 具有焦点，它拦截了事件调度？

需要注意的一件有趣的事情是，当我第二次点击字母方块时，softKeyboard 向上并且光标在 TextField 中闪烁，我将粘贴选项悬停在文本字段上方。也许这就是拦截我的听众的原因？如果是这样，它可以被禁用吗？

有人可以解释一下吗？

对于我使用的字母方块

```
square.addEventListener(TouchEvent.TOUCH_TAP, tileTapped); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:59:03.320

默认情况下，移动 AIR 应用程序将 TextInput 和 TextArea 替换为 StageText。StageText 允许访问本机输入行为（复制/粘贴、预测文本等）。

要删除此功能，请显式定义 TextInput 和/或 TextArea 的外观类：

```
<s:TextInput skinClass="spark.skins.mobile.TextInputSkin" />
<s:TextArea skinClass="spark.skins.mobile.TextAreaSkin" /> 
```

这样将不会使用 StageText，并且您不会弹出烦人的粘贴选项

# ios - 在目标c中的函数内将字符串作为参数传递

> ID：14277326
> 
> 赞同：-3
> 
> 时间：2013-01-11T11:32:46.887
> 
> 标签：ios, function, arguments

我想在调用函数时将 NSStrring 作为参数传递。

我对目标 c 非常陌生。我的函数看起来像：

```
-(void) light_uri(NSString *)uri_temp
{
    NSString *base_uri = @"http://localhost:3000/";
    [self.view endEditing:YES];
    NSString *uri_light = [base_uri stringByAppendingString: uri_temp];
    NSURL *url_light =[NSURL URLWithString: uri_light ];
    NSData* data_light = [NSData dataWithContentsOfURL:url_light];
    [self performSelectorOnMainThread:@selector(fetchedData:)
                           withObject:data_light waitUntilDone:YES];
} 
```

但我得到一个错误`expected method body`和`undeclared identifier uri_temp`

将字符串作为参数传递是正确的方法还是我必须改变一些东西？

我真的很感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:35:28.033

您的方法名称中有语法错误，请使用：

```
-(void) light_uri:(NSString *)uri_temp 
```

# java - 使用 DocumentBuilderFactory 将节点附加到现有 xml - Java

> ID：14277331
> 
> 赞同：0
> 
> 时间：2013-01-11T11:33:03.690
> 
> 标签：java

Java - 我使用 Java DocumentBuilderFactory 形成了这个当前的 XML。

```
<server>
<excludeList>
    <exclude>.ear</exclude>
    <exclude>.war</exclude>
    <exclude>.tar</exclude>
</excludeList> 
```

我希望使用 Java DocumentBuilderFactory 将以下新节点添加到我的新 XML 中：

```
<server>
<excludeList>
    <exclude>.ear</exclude>
    <exclude>.war</exclude>
    <exclude>.tar</exclude>
    <exclude>.txt</exclude>
    <exclude>apps\third_party\activator</exclude>
    <exclude>apps\temp</exclude>
    <exclude>apps\xender</exclude>
</excludeList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:56:36.513

尝试dis：

```
public class Test
{
    public static void main(String argv[]) {

       try {
        String filepath = "c:\\file.xml";
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(filepath);

        // Get the root element
        Node server = doc.getFirstChild();

        // Get the excludeList element by tag name directly
        Node excludeList = doc.getElementsByTagName("excludeList").item(0);

        // append a new node to excludeList
        Element exclude = doc.createElement("exclude");
        excludeList.appendChild(doc.createTextNode("apps\\temp"));

        // write the content into xml file
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(new File(filepath));
        transformer.transform(source, result);

        System.out.println("Done");

       } catch (ParserConfigurationException pce) {
        pce.printStackTrace();
       } catch (TransformerException tfe) {
        tfe.printStackTrace();
       } catch (IOException ioe) {
        ioe.printStackTrace();
       } catch (SAXException sae) {
        sae.printStackTrace();
       }
    }
} 
```

# amazon-s3 - s3fs 禁用缓存

> ID：14277332
> 
> 赞同：1
> 
> 时间：2013-01-11T11:33:09.900
> 
> 标签：amazon-s3, amazon-ec2, s3fs, disable-caching

我在 S3 上查看存储桶中的视频时遇到问题。我正在使用 EC2 实例。存储桶通过 s3fs 安装为文件夹。当我尝试加载一个大文件时，我在开始下载之前会暂停。在此暂停中，我看到该文件下载（缓存）到 EC2。缓存后，文件开始在浏览器中下载。我尝试配置 s3fs 并禁用缓存，但选项 -o use_cache="" 不起作用。我尝试使用 s3fslite，但在将其发送给用户之前它也是缓存文件。

如何禁用缓存？也许有一些更快的解决方案，可以帮助我在 EC2 上使用 s3 存储桶之类的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:24:59.747

您无需下载文件，直接从 s3 提供文件，或使用 cloudfront。

如果您试图控制对文件的访问。使用签名 URL，这将使用户有一定的时间在链接过期之前访问文件。

# ruby - 有没有办法像在 Ruby 中一样注入到 coffescript 中的哈希中？

> ID：14277338
> 
> 赞同：1
> 
> 时间：2013-01-11T11:33:43.073
> 
> 标签：ruby, coffeescript

在 Ruby 中，我可以这样做：

```
hash = ['foo', 'bar'].each_with_object({}) { |i, h| h[i] = 0 } 
```

我如何在 CoffeeScript 中做同样的事情，最好使用一些优雅的单线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:51:35.370

一种方法是这样的：

```
hash = {}
hash[key] = 0 for key in ["foo", "bar"] 
```

此外，在 Ruby 示例中，您可以使用`each_with_object`而不是`inject`这样您就不需要`h`在最后返回变量：

```
hash = ['foo', 'bar'].each_with_object({}) { |i, h| h[i] = 0 } 
```

# android - 将字符串添加到stringArray android

> ID：14277345
> 
> 赞同：0
> 
> 时间：2013-01-11T11:33:55.003
> 
> 标签：android, string

将字符串添加到 stringArray 时出现问题。每次都崩溃：

```
ArrayList<String> newString, limits;

    String pruebas;     
    pruebas=e1.getText().toString();
    if (pruebas == null || pruebas.equals("")) {
        Toast.makeText(Limits.this, "You did not enter a number", Toast.LENGTH_SHORT).show();
        return;
    }
    else{
        limits.add(pruebas);
    } 
```

任何帮助，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:45:10.683

请使用以下代码，它将解决您的问题。

**将字符串添加到 ArrayList 的代码**

```
ArrayList<String> limits = new ArrayList<String>();

String pruebas=e1.getText().toString();

if (pruebas == null || pruebas.equals("")) {
    Toast.makeText(Limits.this, "You did not enter a number", Toast.LENGTH_SHORT).show();
    return;
}else {
    limits.add(pruebas);
} 
```

**将字符串添加到字符串数组的代码**，这里 10 是字符串数组的大小，索引是要存储字符串值的字符串数组的位置。

```
String[] limits = new String[10];

String pruebas=e1.getText().toString();

if (pruebas == null || pruebas.equals("")) {
    Toast.makeText(Limits.this, "You did not enter a number", Toast.LENGTH_SHORT).show();
    return;
}else {
    limits[index] = pruebas;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:36:49.997

你还没有初始化 ArrayList...所以在下面使用它

```
 ArrayList<String> newString, limits;

   limits = new ArrayList<String>();

   newString = new ArrayList<String>();

    String pruebas;     
    pruebas=e1.getText().toString();
    if (pruebas == null || pruebas.equals("")) {
        Toast.makeText(Limits.this, "You did not enter a number", Toast.LENGTH_SHORT).show();
        return;
    }
    else{
        limits.add(pruebas);
    } 
```

# java - 找不到/加载 swt-gtk

> ID：14277358
> 
> 赞同：0
> 
> 时间：2013-01-11T11:34:49.803
> 
> 标签：java, swing

我正在尝试使用 JWebBrowser 运行内部 Web 浏览器。当我在 Netbeans 环境中运行应用程序时，它运行良好。但是，当我构建项目并运行 jar 文件时，出现以下错误：

```
NativeSwing[1]: Exception in thread "main" java.lang.UnsatisfiedLinkError: Could
not load SWT library. Reasons:
NativeSwing[1]: no swt-gtk-3721 in java.library.path
NativeSwing[1]: no swt-gtk in java.library.path
NativeSwing[1]: Can't load library: C:\Users\CCS.swt\lib\win32\amd64\swt-gtk-3721.dll
NativeSwing[1]: Can't load library: C:\Users\CCS.swt\lib\win32\amd64\swt-gtk.dll 
```

我在项目中包含以下库：

```
DJNativeSwing.jar
DJNativeSwing-SWT.jar
DJNativeSwing-SWTAPI.jar
DJNativeSwing-SWTCore.jar
MozillaInterfaces-1.8.1.3.jar
swt.jar (version 3.7M5 for 64 bits.)
jna_WindowUtils.jar
jna-3.2.4.jar 
```

Manifest.MF 通过这种方式引用它们

```
Class-Path: lib/DJNativeSwing-SWT.jar lib/DJNativeSwing-SWTAPI.jar lib
/DJNativeSwing-SWTCore.jar lib/MozillaInterfaces-1.8.1.3.jar lib/DJNa
tiveSwing.jar lib/swt.jar lib/jna-3.2.4.jar lib/jna_WindowUtils.jar 
```

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:16:10.023

您需要`java.library.path`在`java`命令中指定 并将其对准`.dll`文件的路径。例如，

```
java -Djava.library.path=lib -cp ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:10:40.827

好的，我找到了解决方案。问题是关于 dll 的生成。我使用的是 3.7m5 版本，我下载了以前的版本（3.7）并且应用程序运行正常。感谢您的帮助。问候。

# android - 如何从我的应用程序文件夹中检索文件？

> ID：14277359
> 
> 赞同：0
> 
> 时间：2013-01-11T11:34:52.787
> 
> 标签：android

我想通过电子邮件发送我的应用程序的数据库文件。这使我更容易在错误情况下提供帮助。为此，我需要检索我的应用程序的安装文件夹。我怎样才能做到这一点，以便我可以发送我的数据库，它位于 APP-FOLDER\databases\mydb.db

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:02:44.997

希望，您正在询问策略或从哪里开始这样做。

您可以遵循几种方法，

1)**将您的 db 文件保存到 sdcard，**然后您可以使用它来发送邮件。您可以通过使用`SQLiteDatabase.openOrCreateDatabase(String, SQLiteDatabase.CursorFactory)` 并简单地`"/sdcard/yrdatabase.db"`作为第一个参数传递来实现这一点。

2）如果您不将其保存到 sdcard ，则**只需将您的 db 文件移动到 sdcard**。您可以使用以下代码实现此目的。（即将以下功能绑定到您的按钮或无论如何从您的应用程序中调用它）

```
public void copyDBToSDCard() {
    try {
        InputStream myInput = new FileInputStream("/data/data/com.yrproject/databases/"+DATABASE_NAME);

        File file = new File(Environment.getExternalStorageDirectory().getPath()+"/"+DATABASE_NAME);
        if (!file.exists()){
            try {
                file.createNewFile();
            } catch (IOException e) {
                Log.i("TAG","File creation failed for " + file);
            }
        }

        OutputStream myOutput = new FileOutputStream(Environment.getExternalStorageDirectory().getPath()+"/"+DATABASE_NAME);

        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
        Log.i("TAG","copied");

    } catch (Exception e) {
        Log.i("TAG","exception="+e);
    }

} 
```

完成访问`db`文件后，您可以使用邮件功能进一步使用它。

# php - 当其他选择列表更改时如何更改选择列表选项？

> ID：14277361
> 
> 赞同：0
> 
> 时间：2013-01-11T11:34:58.653
> 
> 标签：php, jquery, codeigniter

我的 html 中有两个选择列表，并且都有保存在数据库中的值，我想知道当用户使用 jquery 更改选择 1 时如何更改选择列表 2 中的值？

我正在尝试在codeigniter中做这些事情，所以请帮助我，我之前使用jquery做过这些事情，但这是通过将值传递给jquery的加载函数在简单的php中，但这在codeigniter中不起作用，任何人请帮我

谢谢，

沙鲁克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:46:51.090

例如说你有这个下拉

```
 <select id="select_1">
       <option value="">Select</option>
       <option value="1">1</option>
       <option value="2">2</option>
   </select>

   <select id="select_2">
       <option value="">Select</option>
   </select> 
```

在更改 select_1 下拉列表时，您应该获取值并对控制器函数执行 AJAX 请求，这将返回 select_2 的选项，而不是简单地将 select_2 的 html 替换为脚本返回的响应

```
 $('#select_1').change(function(){
                    var id = $(this).val();
                    $.ajax({
                            type: "POST",
                            url: base_url+'controller/action/',
                            data: 'id='+id,
                            success: function(html){
                                $('#select_2').html(html);
                            }
                       });
                }); 
```

对于 codeignitor，使用 ajax 请求的 url 参数中的 base_url。您可以为 base_url 定义一个`CDATA`变量，您可以在 ajax 请求中使用该变量，您可以在 header.php 文件中定义它。

```
 <script type="text/javascript">
                   //<![CDATA[
                        base_url = '<?php echo base_url();?>';
                   //]]>
                </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:06:46.963

好的，我已经完成了，使用 jQuery

```
 <script type="text/javascript">
  $(document).ready(function()
    {
    $("#slect_1").change(function() 
        {
         id = $("#select_1").val();
         $("#select_2").load("<?php echo site_url('class/method'); ?>/"+id);
    });
      });
  </script> 
```

谢谢，

沙鲁克

# php - 立即向 android 发送 php file1 响应，然后从 file1 调用另一个 php file2

> ID：14277365
> 
> 赞同：0
> 
> 时间：2013-01-11T11:35:11.353
> 
> 标签：php, android, httprequest, httpresponse

我从android调用file1.php，我希望它向android发送xml响应，然后立即从file1.php调用file2.php。我还想将一个数组从 file1.php 发送到 file2.php。如何在不延迟向 android 发送响应的情况下做到这一点，因为 android 只需要来自 file1 的响应。但是 file2 的输入是 file1 的输出。那么有没有一种方法可以将file1的xml输出发送到android，然后立即调用file2？

详细信息：Android :-> 使用 google places api 显示附近的餐馆。

File1.php :-> 获取附近餐厅的列表 google places api 并将其发送到 android。紧接着，我想从 File1.php 调用 File2.php，在其中发送餐厅的参考 ID（File1 的 o/p），以便我可以获取每个餐厅的详细信息。

安卓代码：

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("latitude",latt));
            nameValuePairs.add(new BasicNameValuePair("longitude", longi));

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://www.xyz.com/file1.php");

            httpPost.setEntity(new UrlEncodedFormEntity      (nameValuePairs));

            HttpResponse httpResponse = httpClient.execute(httpPost);

            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity); 
```

文件1.php

```
 $url = 'https://maps.googleapis.com/maps/api/place/search/xml?....';
 //get xml response and send it to android

//call file2.php and send reference id's so as ot get each restaurant details 
```

文件2.php

```
for(each restaurant)
//get details and do some back end processing. 
```

主要是android应该在file2开始执行之前收到响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:35:03.190

您不能与现有的请求-响应流并行执行外部 php 文件（实际上是创建一个新的 http-request）。存在两种可能的解决方案。

1.  您可以在服务器上实现任务队列（通常是数据库中的专用表），因此在处理请求时，`file1.php`您应该在队列中添加新任务。与主 Web 服务器进程并行，您应该有一个始终运行的 php“守护程序”，它查找新任务并在后台处理它们（通过 获取所需的详细信息`file2.php`）。一旦任务准备就绪（或其中的一部分，例如有几条带有详细信息的第一条记录可用），请在队列中适当地标记它。Android 应用程序应定期检查新的详细信息并使用另一个访问点（例如`file3.php`）加载它们，该访问点从部分或完全执行的任务中返回可用的详细信息。我不知道您使用哪个服务器端框架（如果有的话），但其中一些提供基于`cron`. 不过，这看起来并不容易。最合适的方法是使用[推送通知](https://stackoverflow.com/questions/5452779/php-push-notifications)，即服务器应通知您的客户端有关列表中已发送给客户端的项目的新可用详细信息。

2.  您可以将部分控制逻辑移动到 Android 应用程序中。通过这种方式，它请求对象列表，然后在循环中发送对象详细信息的新请求，这些请求通过`file2.php`. 换句话说，`file2.php`由客户端而不是服务器执行。

此外，您可能应该查看除 php 之外的一些服务器端工具，例如[Node.js](http://nodejs.org/)，它更适合实现[长轮询](http://en.wikipedia.org/wiki/Push_technology#Long_polling)和[websockets](http://en.wikipedia.org/wiki/WebSocket)（选择其中之一）。

# excel - 如何更改导出到 Excel 格式的结果与子报表和图表的报表

> ID：14277367
> 
> 赞同：0
> 
> 时间：2013-01-11T11:35:19.570
> 
> 标签：excel, jasper-reports

我们有一份包含 6 页的报告（我使用了分页符）。每个页面都有很少的子报告和图表。我们将其导出为*Excel*。

当我们尝试打印一张纸时，页面会分成多个页面，将子报表和图表分隔在中间。为了使报告打印友好，是否有一些最佳方法或经验法则可以遵循。

![在此处输入图像描述](../Images/1c6acc79022d4289e1987193ca1c562a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:54:41.760

在功能区（我有 Excel 2007）上，转到`View`选项卡，然后根据需要选择`Page Break Preview`并拖动页面边框。这些设置与工作簿一起保存，因此在下次重新打开分页符时将保持设置不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:25:03.370

终于找到了答案。

在这里发帖以防有人遇到同样的问题需要在报告中设置这些属性

net.sf.jasperreports.export.xls.fit.width = 1 和 net.sf.jasperreports.export.xls.fit.height = 1。

谢谢

# java - 创建一个客户端-服务器应用程序来回显用户发送的内容

> ID：14277368
> 
> 赞同：2
> 
> 时间：2013-01-11T11:35:25.267
> 
> 标签：java, sockets, networking, serversocket

我正在创建一个简单的客户端服务器应用程序，其中有一个 GUI 客户端，用户可以在其中输入一些文本，服务器会将文本连同时间戳一起发回。
![在此处输入图像描述](../Images/41bcfcd2e1db5ccf0eaa6b7c0da8d9d5.png)

问题是每当我点击**Echo**按钮时，我都会收到一条`Connection Reset`错误消息。我不知道为什么会这样。
这是代码：

# 服务器

```
package echo;
import java.net.*;
import java.io.*;
import java.util.*;
import java.text.*;

public class Server extends Thread{

    final int PORT = 444;
    ServerSocket serverSocket;
    Socket socket;
    InputStreamReader ir;
    BufferedReader b;
    PrintStream p;
    Date currentTime;
    Format fmt;

//------------------------------------------------------------------------------    
    public static void main(String[] args) {
        Server s = new Server();
        s.start();
    }
//------------------------------------------------------------------------------
    public void setupConnection(){
        try{
            serverSocket = new ServerSocket(PORT);
            socket = serverSocket.accept();

            ir = new InputStreamReader(socket.getInputStream());
            b = new BufferedReader(ir);

            p = new PrintStream(socket.getOutputStream());
            fmt = DateFormat.getDateTimeInstance();

        }catch(Exception e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------

    public Server(){

    }

//------------------------------------------------------------------------------
    @Override
    public void run(){
        setupConnection();
        if(socket!=null){
            try {
                String message = b.readLine();
                if(message!=null){
                    p.println(fmt.format(new Date()) + " " + message);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

# 客户

```
package echo;
import java.net.*;
import java.io.*;

import javax.swing.*;

import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.*;

public class Client extends JFrame{

    final int PORT = 444;
    Socket s;

    InputStreamReader ir;
    BufferedReader b;
    PrintStream p;

    JTextArea textArea;
    JTextField field;
    JScrollPane pane;
    JButton echo;

//------------------------------------------------------------------------------
    public static void main(String[] args) {
        new Client();
    }
//------------------------------------------------------------------------------
    public Client(){
        setupConnection();
        setupGUI();
        addListeners();
    }
//------------------------------------------------------------------------------

    public void setupConnection(){
        try {
            s = new Socket("localhost",PORT);
            ir = new InputStreamReader(s.getInputStream());
            b = new BufferedReader(ir);
            p = new PrintStream(s.getOutputStream());

            p.println("User Logged In");

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

//------------------------------------------------------------------------------    
    public void setupGUI(){
        setLayout(new GridBagLayout());
        textArea = new JTextArea(30,30);
        field = new JTextField(10);
        pane = new JScrollPane(textArea);
        echo = new JButton("Echo");

        GridBagConstraints gbc = new GridBagConstraints();
        textArea.setBorder(BorderFactory.createTitledBorder("Replies from server: "));
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 5;
        gbc.gridheight = 5;
        add(pane,gbc);

        gbc.gridy = 5;
        gbc.gridheight = 1;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        add(field,gbc);

        field.setBorder(BorderFactory.createTitledBorder("Enter text here:"));
        gbc.gridy = 6;
        gbc.gridheight = 1;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        add(echo,gbc);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
//------------------------------------------------------------------------------
    public void addListeners(){
        echo.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e){
                String message = field.getText();
                field.setText("");
                p.println(message);
                try {
                    String reply = b.readLine();
                    if(reply!=null){
                        textArea.append(reply);
                    }
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                System.out.println();
            }
        });
    }
//------------------------------------------------------------------------------
} 
```

**你能帮我解决这个问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:39:28.487

在服务器 run () 内部，您需要有一个 while 循环，该循环仅在您的客户端说“关闭此连接”后才会中断。现在发生的是您的服务器正在等待数据，客户端接收数据并退出（readline）。

如果您想到的话，例外是正确的:)。

# c - 在 c/c++ 中检查密码强度的算法

> ID：14277378
> 
> 赞同：-3
> 
> 时间：2013-01-11T11:36:05.593
> 
> 标签：c, passwords

我试图制作一个算法来检查一个字符串中是否有大写、小写和一个数字，如果有，它应该打印“强密码”，如果不是“弱密码”。但它似乎没有工作。

```
int main() 
{
    int i = 0;
    char string1[100];

    printf("Please enter password\n");
    gets(string1);

    if(strlen(stirng1) < 6)
    {
        printf("Password is too short\n");
    }
    if(islower(string1[i]) && isupper(string1[i]) && isdigit(string1[i]))
    {
        printf("Strong Password\n");
    }
    else
    { 
        printf("Weak Password\n");
    }   
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:47:59.133

```
bool hasUpper = false;
bool hasLower = false;
bool hasDigit = false;

for(int i =0; i < strlen(string1); ++i)
{

    if( islower(string1[i]) )
        hasLower = true;

    if( isupper(string1[i]) )
        hasUpper = true;

    if( isdigit(string1[i]) )
        hasDigit = true;
}
if(hasLower && hasUpper && hasDigit)
{
    printf("Strong Password\n");
}
else
{ 
    printf("Weak Password\n");
} 
```

请注意，虽然提醒用户注意弱密码或短密码是件好事，但绝不应将其作为一项要求。通过排除太多密码，您实际上使攻击者更容易暴力破解，因为他可以跳过它。太难记的密码也是不安全的，因为用户将被迫将其写下来并发布到监视器上。另一件事是确保您可以正确处理所有字符，例如空格、制表符`"`或`/`. 如果用户希望`" DROP TABLE 'users';`正确处理它是您的工作。

密码强度是用户的责任，因为只有用户知道他是否会在您的系统中保留任何有价值的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:49:35.220

if 语句

```
if(islower(string1[i]) && isupper(string1[i]) && isdigit(string1[i]))
{
    printf("Strong Password\n");
} 
```

永远不会是真的，因为`i`是0（仍然来自初始化）并且第一个字符`string1`不能是小写*和*大写*和*数字。您可能需要一个循环，检查密码中是否至少有一个大写字母、一个小写字母和一个数字。请参阅`Agent_L`如何执行此操作的答案（他在我输入此内容时发布，谢谢;-)）。

# c++ - SqlQuery 一次命名占位符多次

> ID：14277381
> 
> 赞同：6
> 
> 时间：2013-01-11T11:36:17.447
> 
> 标签：c++, sql, qt, binding

我试过

```
 QSqlQuery query;
  query.prepare("DELETE FROM names WHERE id_col = :ID OR id_parent = :ID");
  query.bindValue(":ID", idVal);
  query.exec(); 
```

假设 idVal 将被绑定两次，但执行此查询仅删除 id_parent = idVal 的行，而 id_col = idVal 保持未删除。所以只有第二次 idVal 绑定到查询。

当我将其重写为

```
 QSqlQuery query;
  query.prepare("DELETE FROM names WHERE id_col = ? OR id_parent = ?");
  query.bindValue(0, idVal);
  query.bindValue(1, idVal);
  query.exec(); 
```

一切都按预期工作。

是否可以在 QSqlQuery 中多次使用一个命名占位符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:59:56.103

从[QSqlQuery::bindValue() 文档](http://doc.qt.io/qt-4.8/qsqlquery.html#bindValue)：

> **值不能绑定到查询中的多个位置**，例如：
> 
> INSERT INTO testtable (id, name, samename) VALUES (:id, :name, :name)
> 
> 绑定到 name 将绑定到第一个 :name，但不会绑定到第二个。

最后一句话似乎有点错误，因为它看起来绑定到第二个：name，但无论哪种方式，这都清楚地说明了 Qt 不支持您想要实现的目标。

您的选择是坚持使用已有的解决方法，或者使用 Mahmoud Gamal 在对您的问题的评论中提供的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:04:57.760

要查看实际执行的查询，您可以使用`QSqlQuery::executedQuery()`.

您应该明确设置占位符的值：

```
QSqlQuery query;
query.prepare("DELETE FROM names WHERE id_col = :ID_COL OR id_parent = :ID_PAR");
query.bindValue(":ID_COL", idVal);
query.bindValue(":ID_PAR", idVal);
query.exec(); 
```

如果您将来需要重构，它也会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:54:14.670

先试试这个：

```
select * from names where :ID in 
((select id_col FROM names WHERE id_col = :ID)
OR
(select id_parent FROM names WHERE id_parent = :ID)
); 
```

如果上面的选择返回了正确的数据，那么使用以下作为您的查询：

```
delete from names where :ID in 
((select id_col FROM names WHERE id_col = :ID)
OR
(select id_parent FROM names WHERE id_parent = :ID)
); 
```

# authentication - 索赔感知安全。我做对了吗？

> ID：14277382
> 
> 赞同：1
> 
> 时间：2013-01-11T11:36:18.437
> 
> 标签：authentication, authorization, wso2, claims-based-identity, adfs

我正在尝试调查在我正在开发的系统中使用声明感知安全性的可能性。我对所有这些东西的阅读越多，我就越困惑。所以我决定描述一下我已经知道的，我会要求你纠正我的陈述。我迷失了所有使用的协议和技术。

下面是我的系统的简单示意图。有两个服务 - 一个使用 WCF 实现的 REST 服务和一个 ASP MVC Web 应用程序。我知道我需要获得一个 STS，它将成为我的两项服务的可信身份颁发者。我将使用角色来区分某些访问级别。

![在此处输入图像描述](../Images/f09d73f3d2ede8fa9819bcf09557fe97.png)

STS 功能可以通过使用 ADFS（或者除此之外还需要什么）或 WSO2 Identity Server 来完成。通过说 STS，我的意思是一种服务，它将从想要进行身份验证的客户端获取凭据并返回一组声明（除了其他信息之外，还包含分配给用户的角色）。这组声明将采用令牌的形式。

在图表上，我用不同的颜色标记了不同的客户类型。不，我将尝试描述我认为将使用哪些协议/格式。我对什么是格式和什么是协议感到很困惑。但让我试试：

## 红色场景：富 WCF 客户端再次验证 REST 服务

1.  对 STS 的请求将使用 WS-trust 发送（ADFS 或 WSO2 中是否还有其他可能性？）。凭据可能采用多种形式之一，例如 X.509 证书、密码摘要、kerberos、Windows 身份验证、SAML 令牌（这用于联合场景，对吗？）等等。

2.  对客户端的回答将以通过 OAuth 协议发送的 SWT 令牌的形式，因为这是我们在尝试针对 REST 服务进行身份验证时执行此操作的方式。

    *   ADFS 是否支持 SWT 和 OAuth？我找不到信息。
3.  然后，客户端将从 STS 接收到的令牌发送到 REST 服务。这又是 OAuth 上的 SWT 令牌。

我想客户端代码都可以使用 Windows Identity Framework 轻松实现。

## 绿色场景：富 android 客户端针对 REST 服务进行身份验证

所有协议/格式都与之前的场景相同。是否有任何框架可以让我轻松实现这一点？

## 蓝色场景：Web 浏览器用户针对 ASP MVC Web 应用程序进行身份验证

1.  用户转到 Web 应用程序的主页。webapp 检测到他尚未通过身份验证，因此将他重定向到 STS 上的登录页面（登录页面在 STS 上，对吗？）。

2.  3\. STS 对用户进行身份验证并将包含 SAML 令牌和重定向的 HTTP 响应发送到 webapp。所以这里使用的是 HTTP，而不是 WS-Trusts。

另一个问题。在这个 Web 浏览器场景中，将有一个 cookie 写入客户端的机器上。因此，每当客户端再次尝试进行身份验证时，他只会将 cookie 发送到 sts 以获取令牌。无需发送凭据。STS 将根据 cookie 颁发令牌，而不涉及任何真正的身份验证逻辑。这种说法正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:01:05.690

开箱即用的 ADFS/WIF 仅支持 SAML 令牌 - 不支持 OAuth。

ADFS/WCF 使用 WS-Trust。

登录页面是 ADFS 的一部分。

您的最后一个问题的答案是“是”，但（在某些时候）它将过期并且用户将不得不再次进行身份验证。

**更新：**

查看[基于声明的身份和访问控制指南](http://claimsid.codeplex.com/)

# java - 使用 remove() 后 JPanel 不会消失

> ID：14277386
> 
> 赞同：2
> 
> 时间：2013-01-11T11:36:27.813
> 
> 标签：java, swing

我正在使用 Java 和 Swing 编写扫雷程序，并且正在研究当用户以所需尺寸重新启动游戏时代码应该做什么。我有一个 MyGrid 类，它有一个 (int, int) 构造函数，是 JPanel 的扩展。它绘制网格并处理它发生的事情（点击、炸弹放置等）。所以在游戏类中，当用户想要开始新游戏时，我有一个 ActionLister，我验证用户的输入，然后我想在我的 JFrame（这里称为 myPane）上绘制一个新网格。所以我这样做：

```
 myPane.remove(mswGrid);
        MyGrid mswGrid = new MyGrid(nowaSzerokosc, nowaWysokosc);
        myPane.getContentPane().add(mswGrid, BorderLayout.CENTER);
        myPane.repaint();
        myPane.validate(); 
```

虽然它第一次画得很好，但每隔一次它只是画在我以前的网格之上或之下，所以当我们有 3x3 和 15x15 时，你必须调整窗口大小才能看到这些单元格，它们被画在之前的 3x3 下网格。为什么网格不消失？我的意思是 - 当我们创建新对象时，对象早已不复存在，由于 remove()，图形表示也应该如此。为什么不是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:44:25.117

按此顺序调用。

```
 myPane.revalidate();
    myPane.repaint(); 
```

# ruby - 使用 Rails 和电子表格的横向页面布局

> ID：14277389
> 
> 赞同：2
> 
> 时间：2013-01-11T11:36:46.467
> 
> 标签：ruby, spreadsheet, ruby-on-rails-2

我正在使用[电子表格](https://github.com/voraz/spreadsheet)在应用程序中生成报告，并且我需要在打印文件时将页面布局设置为横向（客户请求）。

有没有办法在应用程序级别做到这一点？

# sql-server-2008 - SQL Server 代理作业 - 备份某些表

> ID：14277396
> 
> 赞同：0
> 
> 时间：2013-01-11T11:37:09.107
> 
> 标签：sql-server-2008, database-backups, sql-server-agent

我正在尝试创建一个执行以下功能的 SQL Server 代理作业。

1.  创建一个“.bak”文件，其中包含数据库中一组表的备份。

2.  使用类似“Database_20130111”的文件名压缩此备份\

3.  将压缩文件存储在服务器上的特定位置。

4.  删除所有较旧的压缩文件，只保留最新的。

有没有人有任何想法，因为我现在真的在努力解决这个问题。

# javascript - 编程标准和重构 try/catch 语句

> ID：14277397
> 
> 赞同：0
> 
> 时间：2013-01-11T11:37:14.277
> 
> 标签：javascript, node.js, refactoring

**使用：**

节点.js

**问题：**

今天在重构我的代码时，我看到了这些行。关于它们的有趣之处在于，try catch 中的每个替代行都可能导致异常，因此代码可能会崩溃。对于我遵循的做法，应该专门处理每个单独的异常，并且最少（有用的）代码行应该在 try catch 中。作为程序员，我应该遵循哪种方法（A、B、其他）？为什么？我个人会选择 A，因为它减少了代码的行数。

**代码 A：**

```
function(err, someData, res){
    if(err){
        console.error(err);
    } else{

        try{
            data = JSON.parse(someData); //exception expected

            if(someVariable == "abc"){
                var items = data['a']; //exception expected
            } else if(site == "xyz"){
                var items = data['b']; //exception expected
            }

        } catch(err){
            console.error(err);
        }
} 
```

**代码 B：**

```
function(err, someData, res){
    if(err){
        console.error(err);
    } else{

        try{
            data = JSON.parse(someData); //exception expected
        } catch(err){
            console.error(err);
        }

        if(someVariable == "abc"){
            try{
                var items = data['a']; //exception expected
            } catch(err){
                console.error(err);
            }
        } else if(site == "xyz"){
            try{
                var items = data['b']; //exception expected
            } catch(err){
                console.error(err);
        }
            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:59:09.683

**一个扭曲的**

在[“Clean Code”](https://rads.stackoverflow.com/amzn/click/com/0132350882)中，“Uncle Bob”Martin 认为尝试/捕获异常是一项值得拥有自己功能的特定任务。将实际工作提取到单独的方法中。这个愚蠢的建议一开始让我咆哮，但我已经成长为真正喜欢这个想法。

```
parseData = function(someData, res) {
    data = JSON.parse(someData); //exception expected

    if(someVariable == "abc"){
        var items = data['a']; //exception expected
    } else if(site == "xyz"){
        var items = data['b']; //exception expected
    }
}

tryParseData = function(err, someData, res){
    if(err) {
        console.error(err);
    } else {
        try {
            parseData(someData, res);
        } catch(err) {
            console.error(err);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:06:35.620

A没问题。

B 不好，因为假设您在 json 解析时出错，即使您知道它不可能成功，它也会继续运行其余代码。更糟糕的是，添加了更多代码，这些代码实际上可能会产生非常奇怪的副作用或难以追踪错误。阅读起来也非常混乱。

您应该将错误捕获分组到逻辑块中，如果一个部分失败并且运行其余部分没有意义，则将其视为一个要捕获的错误块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:07:05.563

我不认为使用许多 try-catch 块（**B**） - 每个源代码行一个 - 有任何优势。对代码的每个语义特定部分使用单个 try-catch 块 ( **A** )，通常是单个方法或代码块，必须以原子方式执行 - 它应该作为一个整体成功或失败。

如果您需要以不同的方式处理不同的异常，请在 catch 块中检查它们：

```
try
{
  // ...
}
catch(e)
{
  if(e instanceof SpecificError)
  {
    //
  }
} 
```

你也可以分析一下`e.message`。

# ms-access - 访问字段中的所有记录

> ID：14277400
> 
> 赞同：1
> 
> 时间：2013-01-11T11:37:35.887
> 
> 标签：ms-access, vba

刚开始使用 VBA，我正在尝试访问我设置的名为`Employees`.

这是我尝试的代码：

```
Sub getRecords()

Dim dbs As Database
Dim rst As Recordset
Dim sql As String

Set dbs = CurrentDb
sql = "SELECT * FROM Employees"
Set rst = dbs.OpenRecordset(sql)

End Sub 
```

这里的最终目的是将内容打印到屏幕上——这是否涉及将记录集分解为不同的组件？如果是这样，哪些组件可以构成一个典型的记录集？

表格格式如下：

```
Emp_Id    - Number
Emp_Name  - Text
Emp_Email - Text 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:44:06.203

您可以遍历字段：

```
Sub getRecords()

Dim dbs As Database
Dim rst As Recordset
Dim sql As String

Set dbs = CurrentDb
sql = "SELECT * FROM Employees"
Set rst = dbs.OpenRecordset(sql)

Do while not rst.eof
   For each fld in rst.Fields
      Debug.Print fld, fld.name
   Next
   rst.MoveNext

   ''You can also edit or add
   rst.Edit
   rst!Emp_Name = "Something"
   rst.UpDate
Loop

End Sub 
```

我会避免调用也是属性的变量名称，例如 SQL。

对于更新，您通常最好使用操作查询并再次执行数据库对象：

```
 db.Execute "UPDATE aTable SET aField = 'Some text'", dbFailOnError 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:45:53.907

您需要从循环记录开始。尝试：

```
Do While Not rst.EOF And Not rst.BOF
...
Loop 
```

要做到这一点。BOF 和 EOF 分别与记录集的开始和结束相关。如果表中没有数据，则将跳过整个循环。

从那里您可以通过使用与选择列表中字段位置相关的索引或通过引用字段名称来单独查看字段，如下所示：

```
Do While Not rst.EOF And Not rst.BOF
    Debug.Print rst.Fields("myfield")
    Debug.Print rst.Fields(0)
Loop 
```

这是一个起点。Intelisense 应该真正帮助您解决这个问题。

PS：永远记得关闭你的`recordset`对象以回收内存： rst.Close() Set rst = Nothing

亲切的问候，保罗。

# cuda - 二进制文件上的 nvprof

> ID：14277402
> 
> 赞同：0
> 
> 时间：2013-01-11T11:37:54.037
> 
> 标签：cuda, profile

我有一个使用 nvcc 编译器生成的程序的二进制文件。我想用 nvprof 来分析它。我试过了`nvprof ./a.out`，它显示每个功能的秒数。虽然这对我有好处，但我想看看我的申请时间表。如果我使用 Nsight 构建我的项目，我可以轻松地完成这件事，但不幸的是我做不到。那么，如何在 Nsight 之外调用 nvprof 程序以查看我的应用程序的时间线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:21:45.353

您可以通过以下几种方式查看时间线：

1.  在Nsight中，编译后点击profile按钮；
2.  在 CUDA 中使用独立的 GUI 配置文件工具 nvvp，如果`/usr/local/cuda/bin`（默认 CUDA 安装二进制目录）在您的`$PATH`. 然后，您可以`a.out`在 nvvp GUI 中启动您的配置文件并显示时间线。

    ```
    $ nvvp 
    ```

3.  `nvprof`使用带有选项的cmdline 工具`-o`生成结果文件，可以通过 Nsight 和/或 nvvp 导入以显示时间线。[nvprof](http://docs.nvidia.com/cuda/profiler-users-guide/index.html#nvprof-overview)的用户手册提供了更多详细信息。

    ```
    $ nvprof -o profile.result ./a.out 
    ```

# ember.js - 路由器 v2.1 transitionTo 不起作用

> ID：14277404
> 
> 赞同：0
> 
> 时间：2013-01-11T11:37:56.170
> 
> 标签：ember.js, transition, router

我正在尝试使用新的路由器 API（[在提交 6a165ad 时](https://github.com/emberjs/ember.js/commit/6a165adc15b54ce731e10eb296616efca6a51745)），但我遇到了一些问题。

鉴于此路由器：

```
Router.map(function(match) {
  match("/posts").to("posts", function(match) {
    match("/new").to('new', function(match) {
      match("/author").to('author');
    });
  });
}); 
```

我正在尝试过渡到`new`路线。

**使用新索引：** `this.transitionTo('new.index')`

它可以工作，但是正如您所看到的那样，路由名称并不是很明确（我们甚至不知道它是针对新帖子的）。因此，这不是一个可行的解决方案。

**使用posts.new：** `this.transitionTo('posts.new')`

我希望它可以工作，但是会引发错误：

> `posts.new`找不到路线。

我相信向索引的过渡是自动进行的，但似乎不是。

**使用自定义路由名称：**

由于上面指定的提交，Ember 允许自定义路由命名。由于我之前的尝试不起作用，我试图强制`new`路由为`posts.new`，但它仍然不起作用（同理，如果它是`foo.new`）。

看起来不可能转到具有嵌套路由的自定义路由。

## TL;博士

*   我想过渡到`new`路线（并指定`posts`）。应该怎么做？
*   在路由器 v2.1 之前，我有没有孩子的路由`to`（即`match("/posts", function(match) { ... })`），它还在工作吗？如果是这样，它的孩子叫什么名字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:56:53.907

这实际上是 Ember 中的一个错误。因为`index`是隐式的，所以您不需要显式提供它。

该错误已在[master](https://github.com/emberjs/ember.js/commit/2426cb93ef9844d96219f399577e32fd7b667597)上修复。

如果你想去一个有子路由的路由，你应该`transitionTo`指定路由的名称，Ember 会自动`index`为你添加。

# ruby-on-rails - Heroku 捆绑错误

> ID：14277409
> 
> 赞同：0
> 
> 时间：2013-01-11T11:38:24.763
> 
> 标签：ruby-on-rails, heroku, bundle, bundler

因此，heroku 在使用以下命令时无法捆绑我的应用程序：

```
$ git push heroku master 
```

本地打包没问题

```
$ bundle update 
```

而且我已经提交并添加了 Gemfile 和 Gemfile.lock 知道为什么会出现此错误吗？

```
$ git push heroku master
Counting objects: 25, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (22/22), done.
Writing objects: 100% (22/22), 2.65 KiB, done.
Total 22 (delta 16), reused 0 (delta 0)

-----> Removing .DS_Store files
-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin
       Fetching gem metadata from https://rubygems.org/.......
       Fetching gem metadata from https://rubygems.org/..
/app/slug-compiler/lib/utils.rb:66:in `block (2 levels) in spawn': command='/app/slug-compiler/lib/../../tmp/buildpacks/ruby/bin/compile /tmp/build_2c5mcld95eb34 /app/tmp/repo.git/.cache' exit_status=0 out='' at=timeout elapsed=900.1125066280365 (Utils::TimeoutError)
    from /app/slug-compiler/lib/utils.rb:52:in `loop'
    from /app/slug-compiler/lib/utils.rb:52:in `block in spawn'
    from /app/slug-compiler/lib/utils.rb:47:in `popen'
    from /app/slug-compiler/lib/utils.rb:47:in `spawn'
    from /app/slug-compiler/lib/buildpack.rb:37:in `block in compile'
    from /app/slug-compiler/lib/buildpack.rb:35:in `fork'
    from /app/slug-compiler/lib/buildpack.rb:35:in `compile'
    from /app/slug-compiler/lib/slug.rb:497:in `block in run_buildpack'
    from /app/slug-compiler/lib/utils.rb:121:in `log'
    from /app/slug-compiler/lib/slug.rb:748:in `log'
    from /app/slug-compiler/lib/slug.rb:496:in `run_buildpack'
    from /app/slug-compiler/lib/slug.rb:125:in `block (2 levels) in compile'
    from /app/slug-compiler/lib/utils.rb:102:in `block in timeout'
    from /usr/local/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
    from /app/slug-compiler/lib/utils.rb:102:in `rescue in timeout'
    from /app/slug-compiler/lib/utils.rb:97:in `timeout'
    from /app/slug-compiler/lib/slug.rb:114:in `block in compile'
    from /app/slug-compiler/lib/utils.rb:121:in `log'
    from /app/slug-compiler/lib/slug.rb:748:in `log'
    from /app/slug-compiler/lib/slug.rb:113:in `compile'
    from /app/slug-compiler/bin/slugc:85:in `block in <main>'
    from /app/slug-compiler/lib/slug.rb:505:in `block in lock'
    from /app/slug-compiler/lib/repo_lock.rb:44:in `call'
    from /app/slug-compiler/lib/repo_lock.rb:44:in `run'
    from /app/slug-compiler/lib/slug.rb:505:in `lock'
    from /app/slug-compiler/bin/slugc:66:in `<main>'
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:app_name.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:app_name.git' 
```

这是我的宝石文件：

```
source 'https://rubygems.org'
ruby '1.9.3'    

gem 'rails'
# Gems used only for assets and not required
# in production environments by default.
group :assets do
      gem 'less-rails-bootstrap'
      gem 'less-rails'
      gem 'less'
      gem 'therubyracer'
      gem 'jquery-ui-rails' 
      gem 'sass-rails',   '~> 3.2.3'
      gem 'coffee-rails', '~> 3.2.1'
      gem 'uglifier', '>= 1.0.3'
end

group :development, :test do
      gem 'rspec-rails'
      gem 'factory_girl_rails'
      gem 'sqlite3'
end

group :test do
      gem "email_spec"
      gem 'faker'
      gem 'capybara'
      gem 'guard-rspec'
      gem 'launchy'
end

# Allow æ,ø,å in strings
gem 'magic_encoding'

# Files uploading gem
gem 'carrierwave'

# Spreadsheet parser gem
gem 'roo'

# Calendar Event Export
gem 'icalendar'

# Authentication gems
gem 'devise'
gem 'devise_invitable'
gem "cancan"

# Calendar features
gem 'event-calendar', :require => 'event_calendar'
gem 'bootstrap-sass'
gem 'nested_form'
gem 'ransack'
gem 'bootstrap-datepicker-rails'
gem 'jquery-rails' 
```

任何有关如何解决此错误的提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:16:22.527

您的 gemfile 中缺少生产组：

```
 group :production do
   gem 'pg'
 end 
```

Heroku 不支持`sqlite`，因此您可以在 gemfile 中包含上述内容。
但是，我建议您也使用`postgresql`(pg) 进行开发。它将避免在您的应用程序中不断遇到不兼容问题。

**编辑**- 您还应该指定 rails 版本（gem 'rails 3.2.11'），您可以删除 ruby​​ 行（ruby '1.9.3'）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:56:01.907

If you have another working rails project on heroku try to copy the gemset or simply the Gemfile to your current project and add project specific gems in that Gemfile and try to get it working that way. Hope you get it solved

# javascript - Javascript 自定义事件

> ID：14277412
> 
> 赞同：1
> 
> 时间：2013-01-11T11:38:41.923
> 
> 标签：javascript, javascript-events

> **可能重复：**
> [如何在 JavaScript](https://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript)
> [JavaScript 自定义事件监听器中触发事件](https://stackoverflow.com/questions/9671995/javascript-custom-event-listener)

我以这种方式创建了新的自定义事件：

```
window.addEventListener('customEvent', function () { doSomethingOnEvent(); }, false); 
```

如何触发这种自定义事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:08:55.407

您必须先初始化事件：

```
var myCustomEvent = document.createEvent("Event");
myCustomEvent.initEvent("customEvent",true,true); 
```

然后触发它：

```
document.dispatchEvent(myCustomEvent); 
```

# java - JTree & JButtons - 当鼠标悬停在按钮上时出现错误的渲染

> ID：14277414
> 
> 赞同：1
> 
> 时间：2013-01-11T11:38:52.220
> 
> 标签：java, swing, jbutton, jtree, treecellrenderer

我对 JTree 和 JButton 有疑问 似乎当进入编辑模式并将鼠标悬停在 TreeCells 上的按钮上时，它会在按钮内渲染树的某些部分。即使在同一行中从一个按钮拖动到另一个按钮时，它也会将一个按钮呈现在另一个按钮之上。

这是一个简短的自我解释示例，您可以将其复制粘贴以查看我的意思。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import java.util.EventObject;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.UIManager;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellEditor;
import javax.swing.tree.DefaultTreeCellRenderer;

public class MyProblemWithTree {

    public static void main(String...args) {
        JFrame frame = new JFrame("Panel");
        JScrollPane scroll = new JScrollPane();

        DefaultMutableTreeNode node = new DefaultMutableTreeNode("Root");

        DefaultMutableTreeNode nodeChild = new DefaultMutableTreeNode("childcaretaker1");
        nodeChild.add(new DefaultMutableTreeNode("child1"));
        nodeChild.add(new DefaultMutableTreeNode("child2"));

        node.add(nodeChild);

        final JTree tree = new JTree(node);

        tree.setCellRenderer(new MyTreeCellRenderer());
        tree.setEditable(true);
        tree.setCellEditor(new MyTreeCellEditor(tree));

        tree.addMouseMotionListener(new MouseMotionListener() {

            @Override
            public void mouseMoved(MouseEvent e) {
                // TODO Auto-generated method stub
                if (tree.getRowForLocation(e.getX(), e.getY()) != -1)
                {
                    tree.startEditingAtPath(tree.getPathForLocation(e.getX(), e.getY()));
                } 
            }

            @Override
            public void mouseDragged(MouseEvent arg0) {
                // TODO Auto-generated method stub

            }
        });

        scroll.setViewportView(tree);
        frame.add(scroll);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
}
class MyTreeCellEditor extends DefaultTreeCellEditor {

    JPanel      leafPanel;
    JLabel      colorIcon;
    PlayButton  play; 
    PauseButton pause;
    JLabel      name; 

    public MyTreeCellEditor(JTree tree) {
        super(tree, (MyTreeCellRenderer)tree.getCellRenderer());
        leafPanel   = new JPanel(new FlowLayout());
        colorIcon   = new JLabel(UIManager.getIcon("OptionPane.informationIcon"));
        play        = new PlayButton();
        pause       = new PauseButton();
        name        = new JLabel();

        play.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                // TODO Auto-generated method stub
                System.out.println("Playbutton klickt");
            }
        });

        leafPanel.add(colorIcon);
        leafPanel.add(name);
        leafPanel.add(pause);
        leafPanel.add(play);
    }

    @Override
    public Component getTreeCellEditorComponent(JTree tree, Object value,
            boolean selected, boolean expanded, boolean leaf, int row) {

        name.setText((String)((DefaultMutableTreeNode)value).getUserObject());
        pause.setVisible(!leaf);
        return leafPanel;
    }

    @Override
    public boolean isCellEditable(EventObject arg0) {
        return true;
    }
}
class MyTreeCellRenderer extends DefaultTreeCellRenderer {
    private static final long serialVersionUID = 3691823996133806942L;

    JPanel leafPanel;
    JLabel colorIcon;
    PlayButton play; 
    PauseButton pause;
    JLabel name; 

    DefaultTreeCellRenderer defaultRenderer = new DefaultTreeCellRenderer();

    Color backgroundSelectionColor; 
    Color backgroundNonSelectionColor;

    public MyTreeCellRenderer() {
        leafPanel = new JPanel(new FlowLayout());
        colorIcon = new JLabel(UIManager.getIcon("OptionPane.informationIcon"));
        play = new PlayButton();
        pause = new PauseButton();
        name = new JLabel();

        leafPanel.add(colorIcon);
        leafPanel.add(name);
        leafPanel.add(pause);
        leafPanel.add(play);

        backgroundSelectionColor = new Color(200,200,255,50);
        backgroundNonSelectionColor = new Color(0,0,0,0);
    }

    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {
        name.setText((String)((DefaultMutableTreeNode) value).getUserObject());
        if (selected) {
            leafPanel.setBackground(backgroundSelectionColor);
        } else {
            leafPanel.setBackground(backgroundNonSelectionColor);                       
        }
        leafPanel.setEnabled(tree.isEnabled());
        pause.setVisible(!leaf);
        return leafPanel;
    }
}

class PlayButton extends JButton{
    private static final long serialVersionUID = 550654173835539853L;

    Dimension size = new Dimension(140,28);

    public PlayButton() {
        setIcon(UIManager.getIcon("OptionPane.informationIcon"));
        setPressedIcon(UIManager.getIcon("OptionPane.errorIcon"));
        setBackground(new Color(0,0,0,0));
        setBorderPainted(false);
        setPreferredSize(size);
        setMaximumSize(size);
        setMinimumSize(size);
    }
}
class PauseButton extends JButton{
    private static final long serialVersionUID = -5877843953696256070L;

    Dimension size = new Dimension(140,28);

    public PauseButton() {
        setIcon(UIManager.getIcon("OptionPane.warningIcon"));
        setPressedIcon(UIManager.getIcon("OptionPane.questionIcon"));
        setBackground(new Color(0,0,0,0));
        setBorderPainted(false);
        setPreferredSize(size);
        setMaximumSize(size);
        setMinimumSize(size);
    }
} 
```

即使我删除了这部分。我必须单击一个单元格才能进入编辑模式我仍然可以通过鼠标离开单元格并返回来获得效果。

```
 public void mouseMoved(MouseEvent e) {
            // TODO Auto-generated method stub
            if (tree.getRowForLocation(e.getX(), e.getY()) != -1)
            {
                tree.startEditingAtPath(tree.getPathForLocation(e.getX(), e.getY()));
            } 
        } 
```

我已经在这个 JTree 定制中花费了 4 天时间。但这真的让我很困惑，我怎么能通过输入按钮来停止渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:12:43.060

我不知道如何解决这个问题，但它有助于使用`invokeLater`和`setRowHeight()`.

```
public static void main(String... args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            JFrame frame = new JFrame("Panel");
            ...
            tree.setRowHeight(icon.getIconHeight());
            ...
            frame.setVisible(true);
        }
    });
} 
```

# java - 在 Safari 上运行访问本地文件系统的本地 Java 小程序

> ID：14277420
> 
> 赞同：1
> 
> 时间：2013-01-11T11:39:14.477
> 
> 标签：java, macos, safari, applet, osx-lion

我无法在 MacOSX 10.7.5 和 Safari 6.0.2 下使用 TiddlySaver.jar 小程序将文件保存到本地文件系统。 [http://tiddlywiki.com/](http://tiddlywiki.com/)

据说在 Safari 6.0 中“开发”下有一个名为“禁用本地文件限制”的菜单项，但我在 Safari 6.0.2 中看不到它。也许还有另一种方法可以禁用我不知道的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:08:56.157

您正在考虑禁用 Javascript 限制的菜单项。它不影响 Java 小程序。

您的问题更有可能是因为[Apple 在 Java 7 update 11 之前暂时将 Java 插件的版本列入黑名单，根本无法加载](http://9to5mac.com/2013/01/11/apple-blocks-java-7-mac-plugin-in-os-x-following-discovered-security-vulnerability/)。（Mozilla 对 Firefox 采取了类似措施。）下载并安装 Java 7 update 11 以使其重新开始工作。

# ios - iOS iCloud 初始化

> ID：14277421
> 
> 赞同：0
> 
> 时间：2013-01-11T11:39:18.673
> 
> 标签：ios, objective-c, icloud

我使用此代码来初始化 iCloud 访问（我从[Apple 教程](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloud101/CodeListings/CodeListings.html#//apple_ref/doc/uid/TP40011317-CH8-SW1)中获得）

```
- (void)initializeiCloudAccess {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
        if (ubiq)
            NSLog(@"iCloud is available.\n");
        else
            NSLog(@"iCloud is not available.\n");
    });
} 
```

但是当我尝试得到时，我`NSInvalidArgumentException`有理由得到；`unrecognized selector sent to instance ...``ubiq`

谁能向我解释这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:11:32.750

检查您的项目是否配置为使用最新的 iOS SDK（至少 5.0 才能使用 iCloud），并且您的设备或模拟器具有 iOS 5 或更高版本。如果您还需要针对以前的 iOS 版本，则在发送消息之前需要一个条件：

```
if (NSClassFromString(@"NSUbiquitousKeyValueStore")) { 
   // iCloud API available, safe to send URLForUbiquityContainerIdentifier message
   ...
} 
```

# asp.net-mvc-3 - ASP.NET MVC 3 - 通过 AngularJS 上传文件

> ID：14277423
> 
> 赞同：1
> 
> 时间：2013-01-11T11:39:25.053
> 
> 标签：asp.net-mvc-3, file-upload, angularjs

我在我的页面中使用[AngularJS](http://angularjs.org/)，但我有一个疑问：当我使用表单发布时，如何将一些选定的文件传递给我的 ASP.NET MVC 3 控制器？看一下这个：

我的表格：

```
<form enctype="multipart/form-data" ng-controller="FilesController" ng-submit="submitingForm()">
    <div>
        Choose the file:
        <input type="file" onchange="angular.element(this).scope().setSelectedFile(this)" />
    </div>

    <input type="submit" value="Confirm" />
</form> 
```

和 AngularJS 控制器：

```
var module = angular.module('application', []);

(function (ang, app) {

    function FilesController($scope, $http) {

        $scope.setSelectedFile = function (element) {
            $scope.$apply(function($scope) {
                $scope.selectedFile = element.files[0];
            });
        };

        $scope.submitingForm = function() {

            $http.post(url, ???????).success(function() {
                // How to pass that selected file for my ASP.NET controller?
            });
        }
    }

    app.controller("FilesController", FilesController);
})(angular, module); 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:59:15.243

我对 AngularJS 不是很熟悉，但是如果您尝试使用 AJAX 请求上传文件，您可以忘记它。那不是可以做的事情。[`HTML5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)如果您想将文件异步上传到服务器，您可以使用。有一个[`entire section`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Uploading_a_user-selected_file)专门的。

如果您的客户端浏览器不支持 HTML5 文件 API，您可以使用文件上传插件，例如[`FineUploader`](http://fineuploader.com/)或[`Uploadify`](http://www.uploadify.com/)（还有很多其他插件，只是 google）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T21:59:54.257

我的方法是使用[FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData/FormData)。

像这样创建一个输入标签。

```
<input id="imgInp" type="file" aria-label="Add photos to your post" class="upload" name="file" onchange="angular.element(this).scope().LoadFileData(this.files)" multiple="" accept="image/*" style="margin-top: -38px; opacity: 0; width: 28px;"> 
```

并在您的 Angular 控制器中创建`LoadFileData(inputFiles)`如下方法：

```
 var formData = new FormData();

 $scope.LoadFileData = function (files) {
        for (var file in files) {
            formData.append("file", files[file]);
        }
    }; 
```

现在在 formData 变量中，您将拥有上传的文件。只需将其发送到 asp.net mvc 控制器即可。

```
$scope.submit = function () {
        $http.post("/YourController/Method", formData, {
            withCredentials: true,
            headers: { 'Content-Type': undefined },
            transformRequest: angular.identity
        }).success(function (response) {
      } 
```

在服务器端，Asp.NET MVC 4 控制器你将拥有文件

```
var files = Request.Files; 
```

# r - 从宽到长重塑，反之亦然（多状态/生存分析数据集）

> ID：14277426
> 
> 赞同：0
> 
> 时间：2013-01-11T11:39:42.737
> 
> 标签：r, aggregate, reshape

我正在尝试用 重塑以下数据集`reshape()`，但没有太多结果。

起始数据集采用“宽”形式，每个 id 通过一行描述。该数据集旨在用于进行多态分析（生存分析的概括）。

在给定的总时间跨度内记录每个人。在此期间，受试者可能会经历许多状态之间的转换（为简单起见，让我们将可以访问的最大不同状态数固定为两个）。第一个访问状态是`s1 = 1, 2, 3, 4`。该人在该州停留`dur1`一段时间，同样适用于第二次访问的州`s2`：

```
 id    cohort    s1     dur1     s2     dur2     
     1      1        3      4       2      5       
     2      0        1      4       4      3 
```

我想获得的长格式数据集是：

```
id    cohort    s    
1       1       3
1       1       3
1       1       3
1       1       3
1       1       2
1       1       2
1       1       2
1       1       2
1       1       2
2       0       1
2       0       1
2       0       1
2       0       1
2       0       4
2       0       4
2       0       4 
```

在实践中，每个 id 都有`dur1 + dur2`行，并且`s1`融合`s2`在一个变量`s`中。

你将如何进行这种转变？另外，您将如何返回原始数据集“宽”形式？

非常感谢！

```
dat <- cbind(id=c(1,2), cohort=c(1, 0), s1=c(3, 1), dur1=c(4, 4), s2=c(2, 4), dur2=c(5, 3)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:12:57.850

您可以`reshape()`用于第一步，但随后您需要做更多的工作。此外，`reshape()`需要 a`data.frame()`作为其输入，但您的样本数据是一个矩阵。

以下是如何进行：

1.  `reshape()` your data from wide to long:

    ```
    dat2 <- reshape(data.frame(dat), direction = "long", 
                    idvar = c("id", "cohort"),
                    varying = 3:ncol(dat), sep = "")
    dat2
    #       id cohort time s dur
    # 1.1.1  1      1    1 3   4
    # 2.0.1  2      0    1 1   4
    # 1.1.2  1      1    2 2   5
    # 2.0.2  2      0    2 4   3 
    ```

2.  "Expand" the resulting `data.frame` using `rep()`

    ```
    dat3 <- dat2[rep(seq_len(nrow(dat2)), dat2$dur), c("id", "cohort", "s")]
    dat3[order(dat3$id), ]
    #         id cohort s
    # 1.1.1    1      1 3
    # 1.1.1.1  1      1 3
    # 1.1.1.2  1      1 3
    # 1.1.1.3  1      1 3
    # 1.1.2    1      1 2
    # 1.1.2.1  1      1 2
    # 1.1.2.2  1      1 2
    # 1.1.2.3  1      1 2
    # 1.1.2.4  1      1 2
    # 2.0.1    2      0 1
    # 2.0.1.1  2      0 1
    # 2.0.1.2  2      0 1
    # 2.0.1.3  2      0 1
    # 2.0.2    2      0 4
    # 2.0.2.1  2      0 4
    # 2.0.2.2  2      0 4 
    ```

You can get rid of the funky row names too by using `rownames(dat3) <- NULL`.

## Update: Retaining the ability to revert to the original form

In the example above, since we dropped the "time" and "dur" variables, it isn't possible to directly revert to the original dataset. If you feel this is something you would need to do, I suggest keeping those columns in and creating another `data.frame` with the subset of the columns that you need if required.

Here's how:

Use `aggregate()` to get back to "dat2":

```
aggregate(cbind(s, dur) ~ ., dat3, unique)
#   id cohort time s dur
# 1  2      0    1 1   4
# 2  1      1    1 3   4
# 3  2      0    2 4   3
# 4  1      1    2 2   5 
```

Wrap `reshape()` around that to get back to "dat1". Here, in one step:

```
reshape(aggregate(cbind(s, dur) ~ ., dat3, unique), 
        direction = "wide", idvar = c("id", "cohort"))
#   id cohort s.1 dur.1 s.2 dur.2
# 1  2      0   1     4   4     3
# 2  1      1   3     4   2     5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:11:04.017

可能有更好的方法，但这可能有效。

```
df <- read.table(text = '
   id    cohort    s1     dur1     s2     dur2     
     1      1        3      4       2      5       
     2      0        1      4       4      3',
header=TRUE)

hist <- matrix(0, nrow=2, ncol=9)
hist

for(i in 1:nrow(df)) {

hist[i,] <- c(rep(df[i,3], df[i,4]), rep(df[i,5], df[i,6]), rep(0, (9 - df[i,4] - df[i,6])))

}

hist

hist2 <- cbind(df[,1:2], hist)
colnames(hist2) <- c('id', 'cohort', paste('x', seq_along(1:9), sep=''))

library(reshape2)

hist3 <- melt(hist2, id.vars=c('id', 'cohort'), variable.name='x', value.name='state')

hist4 <- hist3[order(hist3$id, hist3$cohort),]
hist4

hist4 <- hist4[ , !names(hist4) %in% c("x")]

hist4 <- hist4[!(hist4[,2]==0 & hist4[,3]==0),] 
```

给出：

```
 id cohort state
1   1      1     3
3   1      1     3
5   1      1     3
7   1      1     3
9   1      1     2
11  1      1     2
13  1      1     2
15  1      1     2
17  1      1     2
2   2      0     1
4   2      0     1
6   2      0     1
8   2      0     1
10  2      0     4
12  2      0     4
14  2      0     4 
```

当然，如果每个 id 有两个以上的状态，则必须对其进行修改（如果您有两个以上的群组，则可能必须对其进行修改）。例如，我假设有 9 个样本周期，一个人可能处于以下状态序列：

```
1 3 2 4 3 4 1 1 2 
```

# asp.net - Sitefinity - 验证自定义表单字段

> ID：14277427
> 
> 赞同：1
> 
> 时间：2013-01-11T11:39:45.737
> 
> 标签：asp.net, sitefinity, sitefinity-4, sitefinity-5

我有一个`MyField`扩展类`FormField`（它是我可以通过表单生成器添加的自定义表单字段）。我在`.ascx`文件中有一个字段：

```
<telerik:TextField ID="Status" CssClass="sfTxtID" style="visibility:hidden;" runat="server">
</telerik:TextField> 
```

目前，如果用户按下`Submit`按钮，即使`Status`TextField 为空，表单也会提交。

我的问题是：如何在按下提交按钮时验证我的字段，如果未填写则显示错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:02:44.027

隐藏控件不会通过验证进行检查。[微软](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_properties)

# git - 如何在git中验证每个提交的作者

> ID：14277428
> 
> 赞同：2
> 
> 时间：2013-01-11T11:39:51.550
> 
> 标签：git, signing, git-commit, git-tag

我正在研究从颠覆到 git 的迁移。对于初学者，将使用中央存储库方案，就像 svn。

问题是我想确保每个提交都是由真人创建的。

在 subversion 中，假设你**没有**缓存你的 svn 密码，你可以确定提交作者是真正的作者。

根据我在网上无数次搜索后阅读的内容，我应该在**每次推送**中央存储库时创建一个签名标签。为了签署标签，我应该检查之前的**每**一个提交，以确保在我离开计算机时没有人更改任何内容（例如引入恶意代码并稍后将其删除，使其在整体差异中不可见，但是仍在持续构建/测试服务器中执行）。

这意味着我必须仔细检查提交：首先是在我创建每个提交时，然后在我决定使用签名标签推送时再次检查。但这是耗时且多余的。如果签名标签是要走的路，那么我想我应该**为每个提交创建一个签名标签**。这将用标签填充整个存储库。在我看来，这听起来不太对劲。

我能想到的最干净的解决方案是**签署每个提交**（自[git 1.7.9](http://git.kernel.org/?p=git/git.git;a=blob_plain;f=Documentation/RelNotes/1.7.9.txt;hb=HEAD)起支持）。但是由于某种原因我不明白，这样做[完全是愚蠢](http://git.661346.n2.nabble.com/GPG-signing-for-git-commit-tp2582986p2583316.html)的。由 git 支持，但仍然被认为是愚蠢的。

我应该做些什么？浪费时间仔细检查所有提交并进行每次推送标签签名；或对每个提交进行标记签名；或签署每一个提交？有没有我不知道的替代方案？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:59:26.967

我认为你对整个想法真的太过分了，但如果你**真的**坚持，这里有一个解决方案。

安装[Gerrit Code Review](https://code.google.com/p/gerrit/)作为您的中央 git 服务器。将其配置为禁止来自您不信任的人（可能是您的整个团队，也可能包括您自己）的直接推送。

现在，每个人都将被迫首先提交代码审查。只有受信任的人才能批准更改（同样，这可能只有您）。这些批准将由 Gerrit 服务器记录，只有 Gerrit 可以向前移动分支。

从这一点开始，您唯一信任的 git 存储库是您的 Gerrit 服务器，或者任何其他 git 存储库，对于您关心的所有分支具有完全相同的 sha。

量子点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:54:50.203

如果你信任 Subversion 的密码验证，你也可以信任 git 的密码验证。

您在网上阅读的文章可能适用于开源案例，当使用签名标签在提交之间建立信任链时，即使您不信任托管存储库的服务器。对于 Subversion，不可能不信任 svn 服务器，所以我假设你有一台受信任的机器。在这种情况下，与 svn 相同：保持机器密码安全。Git 不会自己缓存密码，但您可以使用 ssh 公钥有效地允许访问服务器，而无需每次都输入密码。

编辑：我假设您也可以信任您的团队。确实可以以任何人的名义进行提交。但是如果不能信任团队使用他们自己的名字，你也会遇到更大的问题，比如你是否可以信任这些人的实际*代码*。

# sql-server - SQL Server 2005 缓存了一个永远无法工作的执行计划

> ID：14277433
> 
> 赞同：1
> 
> 时间：2013-01-11T11:39:56.763
> 
> 标签：sql-server, sql-server-2005, sql-execution-plan

我们有一个视图，用于通过聚集索引在表中查找记录。该视图在 select 语句中还有几个子查询，它们在两个大表中查找数据，也是通过聚集索引。

为了大大简化它将是这样的：

```
SELECT a,
(SELECT b FROM tableB where tableB.a=tableA.a) as b
(SELECT c FROM tableC where tableC.a=tableA.a) as c
FROM tableA 
```

大多数对 [tableB] 的查找都正确地使用了 [tableB] 上的非聚集索引，并且工作效率很高。但是，SQL Server 偶尔会在生成执行计划时使用 [tableB] 上的索引，该索引不包含传递的值。因此，按照上面的示例，尽管 tableB 上存在列 [a] 的索引，但计划改为扫描具有列 [z] 的聚集索引。使用 SQL 自己的语言，计划的“谓词与对象无关”。我不明白为什么这会很实用。因此，当 SQL 执行此操作时，它必须扫描索引中的每条记录，因为它永远不会存在，最多需要 30 秒。这似乎是完全错误的，总是。

有没有人以前见过这种情况，执行计划做了一些看起来永远不可能正确的事情？无论如何我都会重写查询，所以我关心的不是查询的结构，而是为什么 SQL 会出错。

我知道有时 SQL Server 可以选择一个工作过一次的计划，随着数据集的变化它可能会变得低效，但在这种情况下它永远不会工作。

**更多的信息**

*   [tableB] 有 400 万条记录，[a] 的大多数值为 null
*   我现在无法掌握生成计划的初始查询
*   这些查询是通过 Coldfusion 运行的，但此时我对任何在 SQL Server 中独立看到过的人感兴趣

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:12:44.860

> 这似乎是完全错误的，总是。

您可能对[第一条编程规则](http://www.codinghorror.com/blog/2008/03/the-first-rule-of-programming-its-always-your-fault.html)感兴趣。

> 因此，按照上面的示例，尽管 tableB 上存在列 [a] 的索引，但计划改为扫描具有列 [z] 的聚集索引。

聚集索引始终包含所有行。它可能按 排序`z`，但仍将包含叶级别的所有其他列。

SQL Server 有时更喜欢集群扫描而不是索引查找的原因是这样的。当您进行索引查找时，您必须通过对聚集索引的书签查找来跟进它以检索不在索引中的列。

当您执行聚集索引扫描时，您根据定义查找所有列。这意味着不需要书签查找。

当 SQL Server 需要很多行时，它会尝试避免书签查找。这是一个久经考验的选择。非聚集索引查找经常被聚集索引扫描打败。

您可以通过使用[`with (index(IX_YourIndex))`query hint](http://blog.sqlauthority.com/2009/02/08/sql-server-introduction-to-force-index-query-hints-index-hint-part2/)强制来测试您的情况。

# windows-8 - 覆盖 IXMLHTTPRequest2 的默认标头

> ID：14277435
> 
> 赞同：0
> 
> 时间：2013-01-11T11:40:03.373
> 
> 标签：windows-8

我正在尝试使用 IXMLHTTPRequest2 对象在 Windows 8 上发送 HTTP 请求，并且我想将传出的 Accept-Encoding 标头自定义为“gzip，deflate”的默认值以外的其他内容。当我尝试使用 SetRequestHeader 方法设置 Accept-Encoding 标头时，方法调用成功，但仍使用默认标头值而不是我提供的值发送请求（通过使用 Wireshark 捕获 HTTP 请求进行验证）。

示例代码（为简化起见）：

```
::CoCreateInstance( CLSID_FreeThreadedXMLHTTP60, NULL, CLSCTX_INPROC_SERVER, IID_PPV_ARGS( &m_pXHR ));
m_pXHR->Open( "GET", "http://192.168.0.100/test", m_pXHRCallback.Get(), NULL, NULL, NULL,NULL );
m_pXHR->SetRequestHeader( L"Accept-Encoding", L"gzip" );
m_pXHR->Send( NULL, 0 ); 
```

Wireshark 捕获发出的请求：

```
GET /users/me/id HTTP/1.1
Accept: */*
Host: 192.168.0.100
Accept-Encoding: gzip, deflate
Connection: Keep-Alive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:27:52.950

根据[SetRequestHeader 的文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh831168.aspx)，它只是一个追加操作。你得到了 gzip Accept-Encoding，所以我认为它按预期工作。但是，我看不到删除默认标头的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T09:13:29.830

您似乎可以将 IXMLHTTPRequest2::SetProperty() 与 XHR_PROP_NO_DEFAULT_HEADERS 一起使用来抑制默认标头。

请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh831167 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh831167(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-14T23:52:43.373

似乎`IXMLHTTPRequest2`API 显然被破坏了，因为它没有办法删除标头。或者，也许，文档被破坏了，因为它没有提到传递一个空字符串或 NULL 会删除一个标题。

此外，根据`IXMLHTTPRequest2::SetRequestHeader`声明：

```
virtual HRESULT STDMETHODCALLTYPE SetRequestHeader(
    /* [ref][string][in] */ __RPC__in_string const WCHAR *pwszHeader,
    /* [unique][string][in] */ __RPC__in_opt_string const WCHAR *pwszValue) = 0; 
```

标头的值被标记为可选 ( `__RPC__in_opt_string`) 并且可以为 NULL。

所以，如果你真的想设置一个标题的值，唯一正确的方法`IXMLHTTPRequest2`是这样做：

```
m_pXHR->SetRequestHeader(L"SomeMyHeader", L"");
m_pXHR->SetRequestHeader(L"SomeMyHeader", L"value"); 
```

这样您就可以删除或更改一些默认标题：

```
m_pXHR->SetRequestHeader(L"Accept-Language", L""); 
```

由于这没有记录在案，因此在某些特定版本的 Windows 上，这可能会或可能不会对您有用。如果您尝试`IXMLHTTPRequest2`大量使用，您会得出与我相同的结论：这只是废话。例如，这不起作用：

```
m_pXHR->SetRequestHeader(L"Accept-Encoding", L""); 
```

似乎一些实现的家伙`IXMLHTTPRequest2`在那里放了很多未记录的逻辑：

*   如果将某些标头设置为 NULL 或空字符串（例如`Accept-Language`标头，或者可以删除您自己的标头），则可以完成删除某些标头。
*   您可以更改，但不能删除某些标题（例如，`User-Agent`标题）。
*   您根本无法更改某些标题（例如，`Accept-Encoding`标题）。

当您调用 -> `Send`on 时`IXMLHTTPRequest2`，它们在内部无条件地设置`Accept-Encoding`为他们想要使用的任何内容。这意味着如果不求助于 hack 和自定义标头，您就无法添加一些替代编码，例如[brotli 。](https://en.wikipedia.org/wiki/Brotli)

他们应该开始使用 libcurl 并公开它的 API，而不是暴露`IXMLHTTPRequest2`可耻的质量。

# jquery - jquery停止cycle2插件滑块

> ID：14277438
> 
> 赞同：1
> 
> 时间：2013-01-11T11:40:11.040
> 
> 标签：jquery, jquery-cycle2

我想在滑块到达最后一张图像时停止它。我正在使用 Cycle2 插件。如果我单击图像，它将滑动到下一个图像。一旦最后一个图像显示在窗口的右端，那么它将停止“下一次滑动”。我尝试了一些计算来停止滑块。注意：不应使用 opts.CarouselVisiblity 作为静态值。我的代码在这里，

```
<html>
<head>
<style>     
#cycle-2 .cycle-slide { border:3px solid #fff; }
#cycle-2 .cycle-slide-active { border:3px solid #004; }
#slideshow{width: 100%;max-width:100%;margin: auto}
.cycleimg{width:auto;height:60px;}
.cycle-slideshow img {height: 60px; display: block; }
.cycle-pager-active{visibility:hidden !important;}
/*.addleft{left:-792px!important;}*/
</style>
<script type="text/javascript" src="jquery-1.7.min.js"></script>
<script src="http://malsup.github.com/jquery.cycle2.js"></script>
<script src="http://malsup.github.com/jquery.cycle2.carousel.js"></script>
<script>
jQuery(document).ready(function(){
             winlastimg=calc_func();
             //alert(winlastimg);
            $(window).load(function()
             {              
        var winlastimg; 
        winlastimg=calc_func(); 
        //alert(winlastimg);
    });
    $('.cycle-slideshow').cycle('stop');
    var slideshows = $('.cycle-slideshow').on('cycle-next cycle-prev', function(e, opts) {
        slideshows.not(this).cycle('goto', opts.currSlide);         
    });
           var behindcount=0;
    var prevativeimgcount=0;
    $('#cycle-2 .cycle-slide').click(function(){
        var index = $('#cycle-2').data('cycle.API').getSlideIndex(this);
        var activeid=$(".cycle-slide-active").find('img').attr("id");
        var lastid=$(".cycle-slideshow div").find("img:last").attr("id");
        var firstid=$(".cycle-slideshow img").first().attr("id");
            var t=calc_func();
                    var activewinimcount=t+index;
                var lastimgindex=$(".cycle-slideshow div img").length-1;
                if(activewinimcount <= lastimgindex)
                {       
                    prevativeimgcount=activewinimcount
                    behindcount=lastimgindex-activewinimcount;
                    slideshows.cycle('goto', index);                        
                }                                       
                else
                {
                    //alert(prevativeimgcount);
                    //var i1=prevativeimgcount+behindcount;
                    //alert(i1);
                    //slideshows.cycle('goto', index); 
                    var i1=lastimgindex-index;
                    $('.cycle-slideshow').cycle('goto',i1);
                    //alert(i1);
                    //$(".cycle-carousel-wrap").stop();
                }
    });          
}); 
function calc_func()
{
    var l=0;    
    var num_of_img=1;   
    var imgwid=0;
    var ww=$(window).width();
    //$('.cycle-slideshow img').load(function(){
    $('.cycle-slideshow').find('img').each(function() {
        imgwid =imgwid + $(this).width()+10;
        var j=imgwid;           
        if(j<=ww)
        {
            num_of_img++;       
            j+=imgwid;              
        }   
        else
            return false;           
    });
    return num_of_img;
    //});

}   
</script>
</head>
<body>
<div class="hello">
<div id="slideshow">
<div id="cycle-2" class="cycle-slideshow"  data-cycle-slides="> div" data-cycle-timeout="0"
    data-cycle-prev="#prev"
    data-cycle-next="#next"
data-cycle-pager="#pag"
    data-cycle-caption=".custom-caption"
    data-cycle-caption-template="Slide {{slideNum}} of {{slideCount}}"
    data-cycle-fx="carousel"
    data-cycle-carousel-fluid="true"
data-cycle-log="false"
 data-cycle-pause-on-hover="true"
data-cycle-loop="-1"
    data-cycle-allow-wrap="false">
    <div><img class="cycleimg" id="1" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="2" src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="3" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="4" src="http://malsup.github.com/images/beach4.jpg"></div>
    <div><img class="cycleimg" id="5" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="6" src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="7" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="8" src="http://malsup.github.com/images/beach4.jpg"></div>
<div><img class="cycleimg" id="9" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="10" src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="11" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="12" src="http://malsup.github.com/images/beach4.jpg"></div>
<div><img class="cycleimg" id="13" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="14" src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="15" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="16" src="http://malsup.github.com/images/beach4.jpg"></div>
<div><img class="cycleimg" id="17" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="18" src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="19" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="20" src="http://malsup.github.com/images/beach4.jpg"></div>
<div><img class="cycleimg" id="21" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="22" src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="23" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="24" src="http://malsup.github.com/images/beach4.jpg"></div>
<div><img class="cycleimg" id="25" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="26"src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="27" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="28" src="http://malsup.github.com/images/beach4.jpg"></div>
<div><img class="cycleimg" id="29" src="http://malsup.github.com/images/beach1.jpg"></div>
    <div><img class="cycleimg" id="30" src="http://malsup.github.com/images/beach2.jpg"></div>
    <div><img class="cycleimg" id="31" src="http://malsup.github.com/images/beach3.jpg"></div>
    <div><img class="cycleimg" id="32" src="http://malsup.github.com/images/beach4.jpg"></div>
</div>
</div>
</div>
<p>
        <a href="#" id=prev class="cycle-prev">&laquo; prev</a> | <a href="#" id=next class="cycle-next">next &raquo;</a>
        <span class="custom-caption"></span>
    </p>
<div style="visiblity:hidden !important;" id="pag"></div>
</body>
</html> 
```

任何人都可以告诉这个解决方案吗？请！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:21:56.780

使用[Cycle2 API](http://www.malsup.com/jquery/cycle2/api/)。如果当前幻灯片与幻灯片数量匹配，则暂停幻灯片放映：

```
$('#cycle-2').on('cycle-after', function (e, opts, API) {
    if (opts.currSlide === opts.slideCount) {
        $('#cycle-2').cycle('pause');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T15:51:03.617

除了 PHearst 的回答之外，您可能还想将“data-cycle-loop”选项更改为 1。像这样：

```
<div id="cycle-2" class="cycle-slideshow" data-cycle-slides="> div" 
    ....
    data-cycle-loop="1" 
> 
```

使用“-1”，幻灯片将首先连续循环播放。( [http://jquery.malsup.com/cycle2/api/](http://jquery.malsup.com/cycle2/api/) )

# ant - 使用单个目标和单个命令构建多个环境（Anding -D 和属性文件）

> ID：14277440
> 
> 赞同：0
> 
> 时间：2013-01-11T11:40:15.697
> 
> 标签：ant, build-process, build-automation

我必须创建一个命令来创建多个（dev|qa|uat）war/ear。就像是 ：

```
ant -f build.xml -Denv=dev|qa|uat -propertyfile= devProp|qaProp|uatProp 
  -Dstage.dir=devdir|qadir|uatdir 
```

我已经为每个环境有不同的属性文件、不同的暂存、部署目标。我也有不同的 .cmd 文件来分别构建它们。

我被困在的是：我如何一次构建它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:50:03.997

您可以`<subant />`在目标中使用该指令。

写下一个新的 ant 脚本（即 master.xml），假设你的原始构建在脚本 build.xml 中，你可以有类似的东西：

```
<target name="build-all">
   <subant target="build-prod">
     <fileset dir="." includes="build.xml"/>
     <propertyset ......../> <!-- properties for the prod build -->
   </subant>
   <subant target="build-dev">
     <fileset dir="." includes="build.xml"/>
     <propertyset ......../> <!-- properties for the dev build -->
   </subant>
</target> 
```

# java - .NET 等效于具有协变和反变的 Java 通配符泛型？

> ID：14277441
> 
> 赞同：5
> 
> 时间：2013-01-11T11:40:24.603
> 
> 标签：java, .net, generics, covariance, bounded-wildcard

我一直在尝试将一些使用（有界）通配符泛型的 Java 代码转换为 C#。我的问题是，Java 似乎允许泛型类型在与通配符一起使用时既是协变的又是逆变的。例如：

**爪哇：**

```
interface IInterf { }

class Impl implements IInterf { }

interface IGeneric1<T extends Impl> {
    void method1(IGeneric2<?> val);
    void method1WithParam(T val);
}

interface IGeneric2<T extends Impl> {
    void method2(IGeneric1<?> val);
}

abstract class Generic<T extends Impl> implements IGeneric1<T>, IGeneric2<T> {
    public void method1(IGeneric2<?> val2) {
        val2.method2(this);
    }
} 
```

...作品。

*C# 等价物 (?)*

```
interface IInterf { }

class Impl : IInterf { }

interface IGeneric1<T> where T:Impl {
  //Java was: 
  //void method1(IGeneric2<?> val2);
    void method1(IGeneric2<Impl> val);
    void method1WithParam(T to);
}

interface IGeneric2<T>where T:Impl {
    void method2(IGeneric1<Impl> val);
}

abstract class Generic<T> : IGeneric1<T>, IGeneric2<T> where T : Impl
{
  //Java was: 
  //public void method1(IGeneric2<?> val2) {
    public void method1(IGeneric2<Impl> val2)
    {
         val2.method2(this); //'this': Argument type 'Generic<T>' is not 
                             //assignable to parameter type 'IGeneric1<Impl>'
    }

    public abstract void method1WithParam(T to);
    public abstract void method2(IGeneric1<Impl> val);
} 
```

...编译失败 - 请参阅评论中的错误。这是意料之中的，因为 IGeneric 的泛型参数没有为协方差标记为“out”。

如果我改变这个：

```
interface IGeneric1<T> where T:Impl { 
```

对此

```
interface IGeneric1<out T> where T:Impl 
```

错误消失了，但出现了另一个错误，用于在同一接口内声明采用泛型参数的方法：

```
interface IGeneric1<T> where T:Impl {
    void method1WithParam(T val);  //Parameter must be input-safe. 
                      //Invalid variance: The type parameter 'T' must be
                      //contravariantly valid on 'IGeneric1<out T>'. 
```

建议？

[另请参阅[后续问题](https://stackoverflow.com/q/14289518/11545)以了解更难的情况]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T11:57:38.450

您需要将 Java 通配符泛型方法转换为本身就是泛型的 C# 方法。例如，这个：

```
interface IGeneric2<T extends Impl> {
    void method2(IGeneric1<?> val);
} 
```

应该翻译成

```
interface IGeneric2<T>where T:Impl {
    void method2<U>(IGeneric1<U> val) where U:Impl;
} 
```

有必要重复`T`指定`IGeneric1<T>`的类型约束作为 的类型约束`U`。

这样做的原因是，在 Java 版本中，对于 and 的形参的类型实参有隐*式*约束：如果形参必须是某种类型，那么显然必须是 an ，否则它不可能为该类型实现。`method1``method2``IGeneric1<X>``X``Impl``IGeneric1`

在 C# 中，约束必须是显式的，因此您重复 what`IGeneric1<T>`和`IGeneric2<T>`require `T`。

所以等效的代码是：

```
interface IInterf { }

class Impl : IInterf { }

interface IGeneric1<T> where T:Impl {
    void method1<U>(IGeneric2<U> val) where U:Impl;
    void method1WithParam(T to);
}

interface IGeneric2<T>where T:Impl {
    void method2<U>(IGeneric1<U> val) where U:Impl;
}

abstract class Generic<T> : IGeneric1<T>, IGeneric2<T> where T : Impl
{
    public void method1<U>(IGeneric2<U> val2) where U:Impl
    {
        val2.method2(this);
    }

    public abstract void method1WithParam(T to);
    public abstract void method2<U>(IGeneric1<U> val) where U:Impl;
} 
```

# mongodb - 在前端使用丑陋的 mongodb _ids

> ID：14277442
> 
> 赞同：5
> 
> 时间：2013-01-11T11:40:27.377
> 
> 标签：mongodb, web-applications

一个有点主观的问题，但我对在客户端使用 mongodb _ids 有一些担忧。我最好使用 s52ruf6wst 或 xR2ru286zjI 之类的东西来获取 RESTful 资源并处理小项目集合。

1）我开始依赖后端数据库的专有实现（_id 字段名称和实现）。如果我坚持使用这个 _ids，以后就很难替换后端数据库。

2）我有包含 mongo _ids 的巨大丑陋 URL（即使对于 REST 端点 - 我不喜欢它）

3）对于黑客和“好奇的用户”来说，使用哪个后端数据库变得很明显。

正如我所见，大多数 Web 应用程序都使用自己的 id、uid、uuid 外观约定，我会说它看起来更专业（比使用 db 供应商的简单丑陋的实现）。

所以问题是什么时候最好使用标准的 mongo _ids 并在后端和前端使用它们？可以做些什么来改善这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T11:43:05.043

> 什么时候最好使用标准的 mongo _ids

总是。除非你根本不喜欢它。但是您的个人偏好与安全性无关。Mongo 的对象 id本质上**并不**比任何其他标识符类型（整数、UUID 等）更安全。

ObjectID 设计为在您的集群中是唯一的，这非常重要，因为 mongodb 是一个分布式数据库。它还有一个很好的特性：值随时间单调递增。这个属性可能对你有用，也可能没用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:53:31.290

> 1）我开始依赖后端数据库的专有实现（_id 字段名称和实现）。如果我坚持使用这个 _ids，以后就很难替换后端数据库。

这就是抽象层、框架和 ODM (ORM) 的用武之地。它们提供了一个标准化层（即 Doctrine 2）来查询多种不同类型的数据库。例如，根据您使用的数据库，在`id`许多 ORM 中进行翻译。`_id``ID``id`

如前所述，`ObjectId`它没有固有的安全缺陷，它通常对其他用户来说甚至没有那么有用，因为即使它`ObjectId`有一个时间部分，这个时间部分也不能轻易地用来决定下一个对象是什么（不像自动递增ID）。可靠地做到这一点的唯一方法是测试到目前为止的所有时间和所有 pid 数字以检测是否存在隐藏对象。因此，抓取`ObjectId`URL 根本不是一件容易的事，事实上，正是由于这个原因，它对 SEO 也不是很友好。但是是的，他们可以知道您使用的是什么数据库。

话虽如此，是的，它们很丑，但正如@Sergio 所说，它们又长又丑，是独一无二的。自己做也一样糟糕。我想你可以通过 base64 对`ObjectId`.

但是我不确定你是否真的需要它。

# spring - spring -mongo 全文搜索

> ID：14277444
> 
> 赞同：1
> 
> 时间：2013-01-11T11:40:32.973
> 
> 标签：spring, mongodb, full-text-search

我正在开发一个Java应用程序。它在后端有 mongo db，用于存储文件（在 gridFS 中）。我使用 spring 框架与 mongo db 进行交互。我想搜索存储文档（pdf、doc、txt 文件）中存在的文本。我知道 mongo db 支持全文搜索（从 2.4 开始）。我的问题是

1.  spring框架支持全文搜索吗？还是我们应该借助 solr 或 lucene？
2.  如果以上两种情况都可以，那么哪个是更好的选择？
3.  关于索引的问题？我对全文搜索中的索引知之甚少
4.  2.4 什么时候推出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:49:39.830

1 Spring在其核心特性中不支持全文搜索，但是spring-data项目中有两个子项目可以和solr和elasticsearch交互，它们都是apache顶层构建的全文搜索引擎lucene，有关详细信息，请查看以下链接：

[https://github.com/dadoonet/spring-elasticsearch](https://github.com/dadoonet/spring-elasticsearch)

[https://github.com/SpringSource/spring-data-solr](https://github.com/SpringSource/spring-data-solr)

2 取决于你的需求，lucene是一个低级库，而elasticsearch和solr是内置于lucene之上的开箱即用的搜索引擎，我认为elasticsearch通过支持索引的mongodb-river提供了与mongodb更好的集成gridFS 附件。看看这些链接：

[http://www.elasticsearch.org/](http://www.elasticsearch.org/)

[https://github.com/richardwilly98/elasticsearch-river-mongodb/](https://github.com/richardwilly98/elasticsearch-river-mongodb/)

3 你需要澄清这个问题。

4 不知道mongodb 2.4版什么时候能出来，但是别忘了全文搜索还是一个实验性的功能，而且我觉得这个功能还是不支持gridFS的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:26:25.050

MongoDB 文本搜索不会从 PDF、DOC 或任何存储在 GridFS 中的文件中提取文本。从 MongoDB 的角度来看，GridFS 文件是未解释的二进制文件。

如果您想使用 MongoDB 的新文本搜索功能来搜索不同的文件类型，您需要在应用程序中从这些文件中提取文本并将文本添加到您明确插入 MongoDB 的文档中。您可以使用[Apache Tika](http://tika.apache.org/)等现有库来完成繁重的工作。请注意，Solr/Lucene 使用 Tika 从富文本文档类型中提取文本。

至于 MongoDB 中的文本搜索索引，请参考[这里的发行说明](http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes)

# jquery - ASP.NET 使用 @Ajax.JavascriptEncode 和 insertBefore() 插入部分视图 jQuery：生成双引号

> ID：14277449
> 
> 赞同：0
> 
> 时间：2013-01-11T11:41:03.260
> 
> 标签：jquery, asp.net-mvc

我以更（我希望）更清晰的方式更新了我的最后一个问题。

有人知道这是为什么：

```
$(document).ready(function () {
    $('#inner').click(function () {
        $('<div class="dropHere">@Ajax.JavaScriptStringEncode(Html.Partial("EditorAddInvoiceDetailsPartial").ToHtmlString()) </div>').insertBefore('#inner');

    });

}); 
```

在最初很简单的地方（在 partialview.cshtml 中）用双引号生成我的局部视图。插入看起来像这样：

```
<fieldset id="productDetails">
    <legend>Details</legend>
    <div class="dropHere">
        <div class=""editor-label""> Product: </div>
        <div class=""editor-field"">
            <select id=""ProductId"" class=""ProductId"" name=""ProductId"">
                <option value=""""></option>
                <option value=""1"">Samsung</option>
                <option value=""2"">Seagate</option>
                <option value=""3"">OCZ</option>
                <option value=""4"">Asus</option>
                <option value=""5"">HP</option>
            </select>
        </div>
        <div class=""editor-label""> Price: </div>
        <div class=""editor-field"">
        <div class=""editor-label""> Tax: </div>
        <div class=""editor-field"">
        <div class=""editor-label""> Quantity: </div>
        <div class=""editor-field"">
        <div class=""editor-label""> Subtotal Excl.VAT: </div>
        <div class=""editor-field"">
        <div class=""editor-label""> Subtotal VAT: </div>
        <div class=""editor-field"">
        </div>
    </div>
</fieldset> 
```

我试图找到一些解决方案，但没有任何相关性。可以解决这个问题，或者最好找到一种新方法在此处插入我的部分视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:15:54.167

这是我的做法，首先我将把两个事件放在同一个`.ready()`函数中。另外我猜.changeProductPrice 之外有一个div，我们称之为.wrapper，您的示例中的问题可能是，您为初始.changeProductPrice 添加事件，然后当您添加一个新事件时，它会覆盖它并获得很多，在我的示例中，我将实时事件添加到父级，因此当添加一个新事件时它不会丢失，但它会附加到他们的子级（changeProductPrice）。我自己解释吗？

```
<script> 
    $(document).ready(function () {
    var index = 2;

    $('#inner').on('click', function () {

        $('<div data-index="' + index + '" class="changeProductPrice"><div class="editor-label"> Product: </div> <div class="editor-field">@Ajax.JavaScriptStringEncode(Html.DropDownList("ProductId",(IEnumerable<SelectListItem>)ViewBag.ProductId, "",  new { @class = "ProductId"}).ToHtmlString())</div><div class="editor-label">Price:</div><div class="editor-field"><input class="productprice" value="" /></div></div><div class="editor-label">Tax:</div><div class="editor-field">@Ajax.JavaScriptStringEncode(@Html.DropDownList("TaxId", (IEnumerable<SelectListItem>)ViewBag.TaxId, "", new { @class = "producttax" }).ToHtmlString())</div><div class="editor-label">Quantity:</div><div class="editor-field"><input class="productquantity" name="Qtn" value="" /></div>').insertBefore("#inner");
        index++;
    });

    $('.wrapper').on('change', '.changeProductPrice', function () {
        var url = '@Url.Action("SortPrices", "Invoice", null)';
        var ProductId = $(this).val();
        var el = $(this);
        $.ajax({
            url: url,
            type: 'GET',
            cache: false,
            data: { id: ProductId },
            success: function (result) {

                 el.parent().parent().find('.productprice').val(result);
                 el.parent().parent().find('.productprice').change();

                }
            });
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:00:20.697

与其通过该字符串构建部分内容，不如直接使用 Ajax 通过控制器操作来呈现部分内容。

```
$('#drophere').load('/Editor/InvoiceDetails'); 
```

这样，如果需要，您也可以轻松地为局部视图构建模型服务器端。

# java - 爬山代码 - 随机突变

> ID：14277450
> 
> 赞同：2
> 
> 时间：2013-01-11T11:41:04.690
> 
> 标签：java, hill-climbing

这段代码应该比较两个适应度，使用最好的一个来找到解决方案，然后在下一次迭代中使用最好的一个。但是我得到的问题是它只是使用最新的健身，无论它是更大还是更小。谁能帮我看看我的代码是否有任何错误，谢谢！

这有点难以解释，所以如果有人需要更多说明，请询问，我会发布我的整个项目，尽管我相信这个错误与这一小段代码有关：

```
public static ScalesSolution RMHC(ArrayList<Double> weights, int n, int iter) {
    ScalesSolution sol = new ScalesSolution(n);
    ScalesSolution oldSol = new ScalesSolution(sol.GetSol());
    for (int i = 0; i < iter; i++) {
        System.out.println("Iteration number: " + i);
        System.out.println("Old Solution : ");
        oldSol.println();
        double f = oldSol.ScalesFitness(weights);
        System.out.println("Old Fitness: ");
        System.out.println(f);
        // the new solution after copying the string from scalesolution
        sol.SmallChange();
        System.out.println("New Solution : ");
        sol.println();
        double f1 = sol.ScalesFitness(weights);
        System.out.println("New Fitness: ");
        System.out.println(f1);
        if (oldSol.ScalesFitness(weights) > sol.ScalesFitness(weights)) {               
            oldSol = new ScalesSolution(sol.GetSol());
        }
    }
    return (oldSol);
} 
```

这是SmallChange：

```
public void SmallChange() {
    int n = scasol.length();
    Random rand = new Random();
    int p = (rand.nextInt(n));
    String x;

    x = scasol.substring(0, p);
    if (scasol.charAt(p) == '0') {
        x += '1';
    } else {
        x += '0';
    }
    x += scasol.substring(p + 1, n);
    scasol = x;
} 
```

这是 ScalesFitness 和 ScalesSolution：

```
public ScalesSolution(int n) {
    scasol = RandomBinaryString(n);
}

// This is the fitness function for the Scales problem
// This function returns -1 if the number of weights is less than the size of the current solution 
// Exercise 3

public static double ScalesFitness(ArrayList<Double> weights) {
    int n = scasol.length();                // Assigns the length of scasol to n
    double lhs = 0.0;                       //  Initialises lhs to 0.0, type double
    double rhs = 0.0;                       //  Initialises rhs to 0.0, type double
    if (n > weights.size())                 // If statement, compares n and weight size
        return (-1);                        // Returns -1 when the if statement is true

    // Code goes here
    for (int i = 0; i < n; i++) {           // For loop which goes from i=0 to n
        if (scasol.charAt(i) == '0') {      // If statement which checks if the character at position i is equal to a 0
            lhs += weights.get(i);          // Adds weight at position i to lhs
        } else {                            // If the character in position i is not a 0 do the following
            rhs += weights.get(i);          // Adds the weight at position i to rhs
        }
    }
    return (Math.abs(lhs - rhs));           // Calculates the absolute value of lhs-rhs and returns the value
} 
```

# java - 如何在 Liferay Portlet 中使用 iframe？

> ID：14277457
> 
> 赞同：-1
> 
> 时间：2013-01-11T11:41:34.023
> 
> 标签：java, jsf, jakarta-ee, iframe, liferay

目前我正在研究liferay 6.0

在我的项目中，我需要在 iframe 中显示一个页面。我在我的 jsf 页面中添加了 iframe。当用户请求 jsf 页面整个页面工作正常但 iframe 不显示相应页面时。除了它显示该页面未找到并且在控制台端给出消息当前 URL 生成异常：null。

请有人告诉我如何在 portlet 中使用 iframe。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-17T20:11:35.127

您应该将所需 JSF 页面的 URL 设置为`src`的`iframe`，并将 设置`iframe`为 portlet 的内容。

# java - JFace TableViewer 显示两个工具提示 - 自定义和默认

> ID：14277459
> 
> 赞同：4
> 
> 时间：2013-01-11T11:41:38.180
> 
> 标签：java, eclipse-rcp, jface

我在这里遇到了一个奇怪的情况，我需要帮助。

我使用`TableViewer`. 当您什么都不做时，您会看到以下行为：当单元格的文本太大时，会在短暂等待后出现显示完整文本的工具提示。这是正常行为，我猜本机控件会绘制这些工具提示。

现在我添加了我自己的自定义工具提示，使用

```
ColumnViewerToolTipSupport.enableFor( tableViewer, ToolTip.NO_RECREATE ); 
```

`getToolTipText()`并使用标签提供者的方法传递（不同的）文本。

那行得通-几乎。我遇到了一个问题：有时（不是所有时候！）首先，会出现本机工具提示，然后不久我的自定义工具提示就会被绘制在它上面，如下面的屏幕截图所示：

![显示两个工具提示的屏幕截图](../Images/e2ae0d3d3134ba001e98460f3bfc28d2.png)

我不知道如何有效地禁用每个单元格想要绘制的本机工具提示。它的样子丑得要死……

对我有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-11T16:03:07.633

您可以像这样有效地禁用本机表格工具提示：

```
viewer.getTable().setToolTipText(""); 
```

也可以看看...

*   来自[Rüdiger的](https://stackoverflow.com/users/2986905/r%C3%BCdiger-herrmann)[回答](https://stackoverflow.com/a/38100976/472992)，在我的回答中添加了一些重要的提示和细节
*   这个 Eclipse 错误 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=218471](https://bugs.eclipse.org/bugs/show_bug.cgi?id=218471)
*   和这个 Eclipse 代码片段 [http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet125 .java](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet125.java)

以供参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-29T13:25:55.227

我想补充一下[@Jörg 的](https://stackoverflow.com/users/472992/j%c3%b6rg)回答：

将表格的工具提示设置为空字符串后，我仍然偶尔会看到两个工具提示，其中有一个多列表，其中一些列有工具提示，而有些则没有。

因此，原因是，`CellLabelProvider`没有工具提示的列的 s`null`从它们的`getToolTipText()`方法（默认值）和`false`它们的`useNativeToolTip()`（也是默认值）返回。这反过来又导致表格的工具提示被重置为`null`. （参见[ColumnViewerToolTipSupport](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/plain/bundles/org.eclipse.jface/src/org/eclipse/jface/viewers/ColumnViewerToolTipSupport.java)中的第 174 行）。

我的第一次尝试是让标签提供者从`getToolTipText()`. 虽然这解决了重复工具提示问题，但现在显示了一个空的自定义工具提示（叹气）。但是让`useNativeToolTip()`return true 最终解决了这个问题。

好吧，几乎，如果将鼠标指针从没有工具提示的列移动到有工具提示的列，则不会显示工具提示。有关解决方法，请参阅此帖子：[JFace TableViewer 上的本机工具提示无法正常工作](https://stackoverflow.com/questions/38105913/native-tooltips-on-jface-tableviewer-not-working-flawlessly/38105914#38105914)

如果出于某种原因需要非本机工具提示，请确保在返回空字符串`useNativeToolTip()`时返回 true。`getToolTipText()`

此处记录适用于 Windows 7，其他平台的行为可能有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:08:32.803

从您的屏幕截图中我无法确定，但我认为您所看到的实际上并不是两个工具提示。

您*正在*看到一个工具提示（您的自定义提示）。

您看到的*另一个*“弹出窗口”是“此表格单元格不够宽，无法显示其全部内容，因此我们将向您展示*如果我们确实有足够空间将显示的完整文本展示它所有*“表本身的特征。

我会提出这实际上是所需行为的概念。允许用户继续“窥视”单元格的全部内容，同时还提供您的自定义工具提示（我确信它传达了与单元格文本本身不同的附加/不同信息），为用户提供了他们可能想要的一切。

如果重叠困扰您（并且我同意这令人不快），您可以通过覆盖`CellLabelProvider.getToolTipShift()`.

如果您想禁用“单元格太窄”的辅助弹出窗口，恐怕我对您没有任何建议；我在周围摸了一会儿，但不知道如何压制它。甚至可能无法做到这一点。

# iphone - 我的应用程序在 Facebook 墙上发布图片时崩溃

> ID：14277464
> 
> 赞同：0
> 
> 时间：2013-01-11T11:41:59.327
> 
> 标签：iphone, objective-c

嗨，我使用 facebook graph api 在 facebook 墙上发布图片。当我单击按钮时，我的图片成功发布在 Facebook 墙上，但我的应用程序崩溃并出现此错误`thread I: EXE_BAD_ACCESS(code I,address=0*7473f52)`，这是按钮方法中的代码

```
 NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:2];

    //create a UIImage (you could use the picture album or camera too)
    UIImage *picture = [UIImage imageNamed:@"maltese.jpg"];

    //create a FbGraphFile object insance and set the picture we wish to publish on it
    FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:picture];

    //finally, set the FbGraphFileobject onto our variables dictionary....
    [variables setObject:graph_file forKey:@"file"];

    [variables setObject:@"this is a test message: postPictureButtonPressed" forKey:@"message"];

    //the fbGraph object is smart enough to recognize the binary image data inside the FbGraphFile
    //object and treat that is such.....
    FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"117795728310/photos" withPostVars:variables];
    NSLog(@"postPictureButtonPressed:  %@", fb_graph_response.htmlResponse);

    NSLog(@"Now log into Facebook and look at your profile & photo albums..."); 
```

请指导我如何解决这个问题，我更多的调试器在这一点上给我错误我正在使用断点

```
FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"117795728310/photos" withPostVars:variables]; 
```

这是堆栈跟踪

```
libobjc.A.dylib`objc_retain:
0x149ed70:  pushl  %ebp
0x149ed71:  movl   %esp, %ebp
0x149ed73:  subl   $8, %esp
0x149ed76:  calll  0x149ed7b                 ; objc_retain + 11
0x149ed7b:  popl   %ecx
0x149ed7c:  movl   8(%ebp), %eax
0x149ed7f:  testl  %eax, %eax
0x149ed81:  je     0x149edb7                 ; objc_retain + 71
0x149ed83:  movl   (%eax), %edx
0x149ed85:  movl   16(%edx), %edx
0x149ed88:  andl   $-4, %edx
0x149ed8b:  testb  $2, 2(%edx)
0x149ed8f:  je     0x149eda5                 ; objc_retain + 53
0x149ed91:  movl   1002945(%ecx), %ecx
0x149ed97:  movl   %ecx, 4(%esp)
0x149ed9b:  movl   %eax, (%esp)
0x149ed9e:  calll  0x149e08c                 ; objc_msgSend
0x149eda3:  jmp    0x149edb9                 ; objc_retain + 73
0x149eda5:  movl   %eax, (%esp)
0x149eda8:  movl   $0, 4(%esp)
0x149edb0:  calll  0x14a08a0                 ; -[NSObject retain]
0x149edb5:  jmp    0x149edb9                 ; objc_retain + 73
0x149edb7:  xorl   %eax, %eax
0x149edb9:  addl   $8, %esp
0x149edbc:  popl   %ebp
0x149edbd:  ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:50:41.663

更改此行

```
NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:3];

    FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"me/photos" withPostVars:variables]; 
```

希望能帮助到你...

# asp.net-mvc-4 - 实体框架迁移，mvc4 之外的域，SimpleMembership

> ID：14277473
> 
> 赞同：1
> 
> 时间：2013-01-11T11:42:21.307
> 
> 标签：asp.net-mvc-4, entity-framework-5, entity-framework-migrations, simplemembership

我喜欢在 MVC4 之外拥有域。因此，我的迁移文件夹位于域项目中。

和其他人一样，我想使用以下方法播种由网络安全创建的表：http: [//odetocode.com/Blogs/scott/archive/2012/08/31/seeding-membership-amp-roles-in-asp-net-mvc -4.aspx](http://odetocode.com/Blogs/scott/archive/2012/08/31/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx)

SimpleMembershipProvider 创建的表不会暴露给我的 dbContext 并且播种这些表的唯一方法是使用链接中的代码。显然，这段代码在我的域项目中不起作用。

使用迁移时在 MVC4 之外拥有域项目是否意味着我不能再使用 SimpleMembershipProvider？或者有没有一种巧妙的方式将这三件事结合在一起？

抱歉，当我刚搬到 MVC4 时，这是一个有点愚蠢的问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:48:07.163

我面临同样的问题，我想出的解决方案是在配置器中公开一个种子事件，并让应用程序使用它订阅 SimpleMembership 种子。

一、配置：

```
 internal sealed class Configuration : DbMigrationsConfiguration<MyContext>
    {
        public event EventHandler<MyContext> OnSeed; 

        public Configuration()
        {
            AutomaticMigrationsEnabled = false;
        }

        protected override void Seed(MyContext context)
        {
            var onSeed = this.OnSeed;
            if (onSeed != null)
                onSeed(this, context);

            //  This method will be called after migrating to the latest version.

            //  You can use the DbSet<T>.AddOrUpdate() helper extension method 
            //  to avoid creating duplicate seed data. E.g.
            //
            //    context.People.AddOrUpdate(
            //      p => p.FullName,
            //      new Person { FullName = "Andrew Peters" },
            //      new Person { FullName = "Brice Lambson" },
            //      new Person { FullName = "Rowan Miller" }
            //    );
            //
        }
    } 
```

然后，为了能够将它与 Database.SetInitializer 一起使用，我基于 MigrateDatabaseToLatestVersion 创建了自己的 IDatabaseInitializer。这很容易做到，因为正如[这篇文章](https://stackoverflow.com/questions/12392722/entity-framework-migrators-connection)所说（你可以[在这里查看](http://entityframework.codeplex.com/SourceControl/changeset/view/7fb31c1526d0#src/EntityFramework/MigrateDatabaseToLatestVersion%60.cs)），它只是 DbMigration 的一个包装器。

```
public class MyDatabaseInitializer : IDatabaseInitializer<MyContext>
{
    private readonly Configuration config;

    public event EventHandler<MyContext> OnSeed
    {
        add { if (this.config != null) this.config.OnSeed += value; }
        remove { if (this.config != null) this.config.OnSeed -= value; }
    }

    /// <summary>
    ///     Initializes a new instance of the MigrateDatabaseToLatestVersion class.
    /// </summary>
    public MyDatabaseInitializer()
    {
        this.config = new Configuration();
    }

    /// <summary>
    ///     Initializes a new instance of the MigrateDatabaseToLatestVersion class that will
    ///     use a specific connection string from the configuration file to connect to
    ///     the database to perform the migration.
    /// </summary>
    /// <param name="connectionStringName"> The name of the connection string to use for migration. </param>
    public MyDatabaseInitializer(string connectionStringName)
    {
        Contract.Requires(!string.IsNullOrWhiteSpace(connectionStringName));

        this.config = new Configuration
                      {
                          TargetDatabase = new DbConnectionInfo(connectionStringName)
                      };
    }

    /// <inheritdoc />
    public void InitializeDatabase(MyContext context)
    {
        var migrator = new DbMigrator(config);
        migrator.Update();
    }
} 
```

在这个初始化程序中，我公开了 OnSeed 事件。在 App_Start 中，在 MVC 项目中，我订阅它以播种 SimpleMembership 数据。

```
var initializer = new PoipDatabaseInitializer();
initializer.OnSeed += (s, e) => SeedSecurity();
Database.SetInitializer(initializer);

private static void SeedSecurity()
    {
        WebSecurity.InitializeDatabaseConnection("MyDatabase", "UserProfile", "UserId", "UserName", autoCreateTables: false);

        if (!Roles.RoleExists("SysAdmin"))
            Roles.CreateRole("SysAdmin");

        if (!WebSecurity.UserExists("sysadmin"))
            WebSecurity.CreateUserAndAccount(
                "sysadmin",
                "password"
            );

        if (!Roles.GetRolesForUser("sysadmin").Contains("SysAdmin"))
            Roles.AddUsersToRoles(new[] { "sysadmin" }, new[] { "SysAdmin" });
    } 
```

# c# - 在 c# 中打开具有完全访问权限的 Excel 工作表

> ID：14277474
> 
> 赞同：4
> 
> 时间：2013-01-11T11:42:23.913
> 
> 标签：c#, .net, excel

我正在编写一个必须将值写入 excel 电子表格中的单元格的应用程序。我可以打开工作簿，但它总是以只读模式打开。我的代码是

```
myExcelApp = new Excel.ApplicationClass();
myExcelApp.Visible = false;
Excel.Workbook myExcelWorkbooks = myExcelApp.Workbooks.Open(fileName, misValue, **false**, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue); 
```

第三个参数是只读的，我已将其指定为 false。但还是`myExcelWorkbooks.readOnly`只显示`True`。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T11:51:24.953

如果您使用的是 C# 4 或更高版本，请执行以下操作：

```
var myExcelApp = new Excel.Application()
    {
        Visible=false
    };

Excel.Workbook myExcelWorkbooks = myExcelApp.Workbooks.Open(Filename: @"F:\oo\bar.xlsx", ReadOnly: false); 
```

完成后，请确保执行以下操作：

```
myExcelWorkbooks.Save();
myExcelWorkbooks.Close();

myExcelApp.Quit();

Marshal.ReleaseComObject(myExcelApp); 
```

如果您还没有做第二部分，请打开任务管理器并杀死 EXCEL.EXE 的每个实例（或重新启动您的机器），然后再次尝试第一部分。

如果 Excel 文件被另一个进程锁定，Excel 将始终以只读模式打开工作簿。如果您一直在搞乱互操作，并且之后没有终止 Excel 进程，这可以解释您所看到的行为。因此，您的代码和 UAC 设置可能没问题，所以我会在进一步更改您的代码或使用 UAC 之前摆脱正在运行的任何 Excel 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:48:53.683

UAC 可能会以某种方式干扰它。尝试以管理员身份启动您的应用或 Visual Studio（从上下文菜单中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:56:08.100

尝试使用 OpenXml，在 codeplex 上有一个用于简单迭代的包装器。

[http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:30:48.397

```
 xl = new Excel.Application();
 Excel.Workbooks books = xl.Workbooks;
 Excel.Workbook book = books.Open(filepath); 
```

这对我来说总是有效的，默认情况下它是不可见的，并打开以供读/写。您应该使用`Excel.Application()`而不是`Excel.ApplicationClass()`显然使用，但我怀疑这是您的问题的途径（我也找不到我读到的文章，我很害怕）。还要注意我是如何拆分声明 Workbooks 和 Workbook 对象的，这显然是[最佳实践](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects)，否则您启动的进程不会总是关闭。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-25T22:12:46.477

我使用 Interop.excel 做了一个大型项目。陷阱是可怕的，当您开始执行更高级的功能或处理大型数据集时，速度非常慢。

试试 OpenXML/ClosedXML，这将使您的生活更轻松，您的程序架构更具可扩展性。

# php - php urlencode 不返回与 w3school 参考表相同的值

> ID：14277475
> 
> 赞同：1
> 
> 时间：2013-01-11T11:42:30.453
> 
> 标签：php, urlencode

我有一个小问题......如果我使用 php 函数来转换一个 utf8 字符串，比如`André`php 函数 url encode('André') 返回 Andr%C3%A9。

但如果我查看 w3school 参考表，é 的正确 urlencode 是 %E9...

见这里：[www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

如何在 php 中获取正确的 url 编码字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:55:37.480

不同之处在于 w3schools 上的编码参考值采用 iso-8859-1 编码，而您的版本使用 utf-8 编码。vvr02 给出的示例无关紧要，因为 HTML 文档中显示的编码不会影响保存文件时使用的编码。

您的版本（文件以 UTF-8 格式保存）返回 é 的 utf-8 表示，而保存在 iso-8859-1（或类似）中的 vvr02 版本返回 é 的 iso-8859-1 表示.

根据上下文，它们都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:48:57.480

刚才我检查了它是否给出了正确的休息。这就是它给出的“Andr%E9”

```
 <!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
</head>
<body>
<?php
    echo urlencode("André");
?>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T12:24:20.320

Andr%E9 并不比 Andr%C3%A9 更“正确”。正如人们所解释的，这只是与文档编码有关，它可以由元标记或 HTTP 标头设置。

# c - C - 布尔表达式求值器

> ID：14277477
> 
> 赞同：2
> 
> 时间：2013-01-11T11:42:35.020
> 
> 标签：c, string

我有一个 C 语言程序，可以用 MPI 解决电路可满足性问题。该电路可以包含 AND、OR 和 NOT 门。

在我的程序中，电路是“硬编码”的，如下所示：

```
( v[0] ||  v[1]  ) && ( !v[1]  || !v[3]  ) && (  v[2]  ||  v[3]  ) 
```

带映射：`|| = OR, && = AND, ! = NOT`

`v[0], v[1]`, etc 是 0 和 1 的数组

在某些时候，我像这样评估电路：

```
value = ( v[0] ||  v[1]  ) && ( !v[1]  || !v[3]  ) && (  v[2]  ||  v[3]  ); 
```

我想测试从文本文件中读取的多个电路。现在，我的问题是：如何在 C 中将字符串转换为逻辑表达式？

基本上，我想要像 value = 'string from file here' 这样的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T19:28:29.233

行。我已经修改`Shunting-Yard`了使用布尔表达式的算法。
这是评估布尔表达式的代码：

```
#include <string.h>
#include <stdio.h>
#define bool int
#define false 0
#define true 1

int op_preced(const char c)
{
    switch(c)    {
        case '|':
            return 6;
        case '&':
            return 5;
        case '!':
            return 4;
        case '*':  case '/': case '%':
            return 3;
        case '+': case '-':
            return 2;
        case '=':
            return 1;
    }
    return 0;
}

bool op_left_assoc(const char c)
{
    switch(c)    {
        // left to right
        case '*': case '/': case '%': case '+': case '-': case '|': case '&':
            return true;
        // right to left
        case '=': case '!':
            return false;
    }
    return false;
}

unsigned int op_arg_count(const char c)
{
    switch(c)  {
        case '*': case '/': case '%': case '+': case '-': case '=': case '&': case '|':
            return 2;
        case '!':
            return 1;
        default:
            return c - 'A';
    }
    return 0;
}

#define is_operator(c)  (c == '+' || c == '-' || c == '/' || c == '*' || c == '!' || c == '%' || c == '=' || c == '&' || c == '|')
#define is_function(c)  (c >= 'A' && c <= 'Z')
#define is_ident(c)     ((c >= '0' && c <= '9') || (c >= 'a' && c <= 'z'))

bool shunting_yard(const char *input, char *output)
{
    const char *strpos = input, *strend = input + strlen(input);
    char c, *outpos = output;

    char stack[32];       // operator stack
    unsigned int sl = 0;  // stack length
    char     sc;          // used for record stack element

    while(strpos < strend)   {
        // read one token from the input stream
        c = *strpos;
        if(c != ' ')    {
            // If the token is a number (identifier), then add it to the output queue.
            if(is_ident(c))  {
                *outpos = c; ++outpos;
            }
            // If the token is a function token, then push it onto the stack.
            else if(is_function(c))   {
                stack[sl] = c;
                ++sl;
            }
            // If the token is a function argument separator (e.g., a comma):
            else if(c == ',')   {
                bool pe = false;
                while(sl > 0)   {
                    sc = stack[sl - 1];
                    if(sc == '(')  {
                        pe = true;
                        break;
                    }
                    else  {
                        // Until the token at the top of the stack is a left parenthesis,
                        // pop operators off the stack onto the output queue.
                        *outpos = sc;
                        ++outpos;
                        sl--;
                    }
                }
                // If no left parentheses are encountered, either the separator was misplaced
                // or parentheses were mismatched.
                if(!pe)   {
                    printf("Error: separator or parentheses mismatched\n");
                    return false;
                }
            }
            // If the token is an operator, op1, then:
            else if(is_operator(c))  {
                while(sl > 0)    {
                    sc = stack[sl - 1];
                    if(is_operator(sc) &&
                        ((op_left_assoc(c) && (op_preced(c) >= op_preced(sc))) ||
                           (op_preced(c) > op_preced(sc))))   {
                        // Pop op2 off the stack, onto the output queue;
                        *outpos = sc;
                        ++outpos;
                        sl--;
                    }
                    else   {
                        break;
                    }
                }
                // push op1 onto the stack.
                stack[sl] = c;
                ++sl;
            }
            // If the token is a left parenthesis, then push it onto the stack.
            else if(c == '(')   {
                stack[sl] = c;
                ++sl;
            }
            // If the token is a right parenthesis:
            else if(c == ')')    {
                bool pe = false;
                // Until the token at the top of the stack is a left parenthesis,
                // pop operators off the stack onto the output queue
                while(sl > 0)     {
                    sc = stack[sl - 1];
                    if(sc == '(')    {
                        pe = true;
                        break;
                    }
                    else  {
                        *outpos = sc;
                        ++outpos;
                        sl--;
                    }
                }
                // If the stack runs out without finding a left parenthesis, then there are mismatched parentheses.
                if(!pe)  {
                    printf("Error: parentheses mismatched\n");
                    return false;
                }
                // Pop the left parenthesis from the stack, but not onto the output queue.
                sl--;
                // If the token at the top of the stack is a function token, pop it onto the output queue.
                if(sl > 0)   {
                    sc = stack[sl - 1];
                    if(is_function(sc))   {
                        *outpos = sc;
                        ++outpos;
                        sl--;
                    }
                }
            }
            else  {
                printf("Unknown token %c\n", c);
                return false; // Unknown token
            }
        }
        ++strpos;
    }
    // When there are no more tokens to read:
    // While there are still operator tokens in the stack:
    while(sl > 0)  {
        sc = stack[sl - 1];
        if(sc == '(' || sc == ')')   {
            printf("Error: parentheses mismatched\n");
            return false;
        }
        *outpos = sc;
        ++outpos;
        --sl;
    }
    *outpos = 0; // Null terminator
    return true;
}

bool evalBoolExpr(char * expr)  {
    char output[500] = {0};
    char * op;
    bool tmp;
    char part1[250], part2[250];

    if(!shunting_yard(expr, output))
      return false;  // oops can't convert to postfix form

    while (strlen(output) > 1) {
        op = &output[0];
        while (!is_operator(*op) && *op != '\0')
          op++;
        if (*op == '\0') {
          return false;  // oops - zero operators found
        }
        else if (*op == '!') {
            tmp = !(*(op-1) - 48);
            *(op-1) = '\0';
        }
        else if(*op == '&') {
            tmp = (*(op-1) - 48) && (*(op-2) - 48);
            *(op-2) = '\0';
        }
        else if (*op == '|') {
            tmp = (*(op-1) - 48) || (*(op-2) - 48);
            *(op-2) = '\0';
        }

        memset(part1, 0, sizeof(part1));
        memset(part2, 0, sizeof(part2));
        strcpy(part1, output);
        strcpy(part2, op+1);
        memset(output, 0, sizeof(output));
        strcat(output, part1);
        strcat(output, ((tmp==false) ? "0" : "1"));
        strcat(output, part2);
    }
    return *output - 48;
}

int main() {
    char * boolString[2] = {"FALSE", "TRUE"};
    char * expr = "!((1 | 0) & (1 & ((1 & !0) | 0)))";
    bool result = evalBoolExpr(expr);
    printf("Boolean expr. %s is %s", expr, boolString[result]);
    return 0;
} 
```

只需将`&`/`|`符号放在逻辑表达式中，而不是 double `&&`/ `||`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:33:33.777

您可以构建一个简单的虚拟机或构建一个从文本文件读取的解析器。两者都可以，这取决于您想要什么。拥有“来自文本文件的 c 中的有效逻辑表达式”不会很好地工作。C 不是脚本语言，在运行时不会运行新代码。这将需要虚拟机 (LUA) 或解析器。我构建了一个小型虚拟机，它执行一小组指令（5 或 6 条），可以进行加法、减法、乘法、除法等。你可以实现门（即 OR = 0x01，AND = 0x02）和你的文本文件将只包含二进制的一些二进制或十六进制表示。

这会增加一些复杂性，并且要在编写文本文件时变得非常有效，您需要实现某种编译器，除非您想手动编写二进制文件（使用少量指令不会太糟了）。

你可以在 Github 上查看一些示例，并且有很多在线网站可以解释简单的虚拟机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:46:15.470

您需要为您的表达式编写一些解析器。也许像[ANTLR](http://www.antlr.org/)（或[flex](https://github.com/westes/flex/) & [bison](http://www.gnu.org/software/bison/)）这样的工具可以提供帮助。我建议解析为一些[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，然后将该 AST 评估为您的值。

您也许还可以考虑在程序中嵌入解释器（例如[Lua](http://lua.org)）

也许你也可以考虑将你的表达式翻译成 C 代码。或者只是`#include`-ing 一个包含它们的文件。

一种可能是`generated.c`在运行时生成一个正确的 C 源文件，其中包含一些函数的 C 源代码（您可以从一些已解析的 AST 发出），然后编译它（例如，假设一个 Linux 系统，通过分叉一些`gcc -Wall -O -fPIC -shared generated.c -o generated.so`命令） ，然后动态加载`./generated.so`使用[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)生成的 so并使用[dlsym(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlsym.3.html)在那里找到相关的函数地址（因此您可以将它们用作函数指针并调用它们）。FWIW，扩展 GCC 的[MELT](http://gcc-melt.org/)领域特定语言成功地做到了这一点。

^(我仍然不完全了解您要做什么以及您要问什么)

# objective-c - xcode中的单选按钮问题

> ID：14277478
> 
> 赞同：0
> 
> 时间：2013-01-11T11:42:35.953
> 
> 标签：objective-c, radio-button, xcode4.5

我在 xcode 中的 ios 中的单选按钮有问题。我想借助两个按钮（按钮上的图像）来实现这一点。我如何使这两个按钮像单选按钮？有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:48:46.983

```
UIButton *radioBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[radioBtn setImage:[UIImage imageNamed:@"radioOff.png"] forState:UIControlStateNormal];
[radioBtn setImage:[UIImage imageNamed:@"radioOn.png"] forState:UIControlStateSelected];
[radioBtn setBackgroundColor:[UIColor clearColor]];
[radioBtn addTarget:self action:@selector(myfunc) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:radioBtn]; 
```

# html - 编译器在 HTML 表上给我一个警告

> ID：14277481
> 
> 赞同：-1
> 
> 时间：2013-01-11T11:42:52.140
> 
> 标签：html

编译器给了我以下警告

```
Multiple annotations found at this line:
- NLS missing message: 
 Obsolete_attribute_name___ERROR_ in: 
 org.eclipse.wst.html.core.internal.HTMLCorePluginResources 
```

这是我的代码：

```
 <table width="525" height="177" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
        <td width="69" height="30">姓名：&lt;/td>
        <td width="166">${sessionScope.userInfo.realname}</td>
        <td width="59">性别：&lt;/td>
        <td width="154">${sessionScope.userInfo.sex}</td>
        <td width="121" rowspan="4" valign="top"><img src="${sessionScope.userInfo.headgif}"></td>
      </tr>
      <tr>
        <td height="30">邮箱：&lt;/td>
        <td>${sessionScope.userInfo.email}</td>
        <td>电话：&lt;/td>
        <td>${sessionScope.userInfo.tel}</td>
        </tr>
          <tr>
        <td height="30">职业：&lt;/td>
        <td>${sessionScope.userInfo.profession}</td>
        <td>QQ号码：&lt;/td>
        <td>${sessionScope.userInfo.qq}</td>
        </tr>
          <tr>
        <td height="30">家庭住址：&lt;/td>
        <td colspan="3">${sessionScope.userInfo.address}</td>
        </tr>
         <tr>
        <td height="30">主页：&lt;/td>
        <td colspan="4">${sessionScope.userInfo.homepage}</td>
        </tr>
          <tr>
        <td height="30">个人描述：&lt;/td>
        <td colspan="4">${sessionScope.userInfo.self}</td>
        </tr>
    </table>
    <br>

    </td>
    <td width="180" align="center" valign="top" background="images/b_r_2.gif"><jsp:include page="blog_right.jsp" flush="true"/></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:49:58.370

> Obsolete_attribute_name

您`<table>`元素上的每个属性都有一个等效的 CSS（在 1990 年代后期引入），您应该使用它。

`width`, `height`, `border`, `margin`, `padding`（在 TD 元素上）和`border-collapse`分别。

* * *

作为旁白：

```
</table>
<br>
</td> 
```

*   `<br>`不应使用元素来模拟`padding`
*   表几乎不应该嵌套。嵌套表格是布局表格的强烈标志，[不应使用](http://www.hotdesign.com/seybold/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:47:13.720

是格式错误还是代码示例错误？在第二个结束标签之前，您有打开`<br>`标签但没有结束标签。 `</br>``</table>`

```
</td>
<td width="180" align="center" valign="top" background="images/b_r_2.gif"><jsp:include page="blog_right.jsp" flush="true"/></td> 
```

# jsf-2 - JSF 2.0 重定向主页（如果已登录）

> ID：14277482
> 
> 赞同：4
> 
> 时间：2013-01-11T11:42:53.553
> 
> 标签：jsf-2, navigation

如果用户已经登录，如何将用户重定向到主页。我使用过滤器类登录页面，但它不能正常工作。我的代码是：

```
@WebFilter(filterName = "loginFilter",
urlPatterns ={"/login.xhtml"})
public class LoginFilter implements Filter{

    private FilterConfig filterconfig;
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        this.filterconfig = filterconfig;
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {

        HttpServletRequest httprequest =(HttpServletRequest) request;
        HttpServletResponse httpresponse =(HttpServletResponse) response;
        try{
        if(httprequest.getUserPrincipal() != null){

            System.out.printf("User authenticated with " + httprequest.getRemoteUser() + " username conected.");
            httprequest.getRequestDispatcher("/home.xhtml").forward(request, response);
        } else{
            chain.doFilter(request, response);
        }
        }catch(Exception){
            //do something
        }

    }

    @Override
    public void destroy() {
        System.out.print("Existing from loginFilter");
    }

} 
```

这是我的问题：用户登录到网络并执行一些导航和操作，然后使用浏览器的后退按钮返回登录页面，无需注销，再次输入用户名密码，然后按登录按钮。然后它抛出异常IndexOutofBoundsException。我只需要检查用户何时使用链接或浏览器的后退按钮导航到登录页面，然后重定向到主页。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:08:58.207

只需告诉浏览器不要缓存登录页面。将响应转换为`httpresponse`.

```
httpresponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
httpresponse.setHeader("Pragma", "no-cache"); // HTTP 1.0.
httpresponse.setDateHeader("Expires", 0); // Proxies. 
```

否则，浏览器会在后退按钮上从缓存中提供页面，而不是发送应该触发过滤器的服务器的完整请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-05T17:41:36.937

在我看来，使用 BalusC 的提示比过滤器更好：

```
<f:view>
    <f:metadata>
        <f:viewAction action="#{login.checkLogin()}"/>
    </f:metadata>

     ...
</f:view>

public String checkLogin() {
    if (getRequest().getRemoteUser() != null) {
        getResponse().setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        getResponse().setHeader("Pragma", "no-cache"); // HTTP 1.0.
        getResponse().setDateHeader("Expires", 0); // Proxies.
        return "Home";
    }

    return null;
} 
```

我认为您不应该像那样破坏过滤器链，链中可能还有另一个您不知道的重要过滤器。

# javascript - Struts未终止的字符串常量错误调用JS函数

> ID：14277484
> 
> 赞同：0
> 
> 时间：2013-01-11T11:43:02.057
> 
> 标签：javascript, struts2, struts

我试图从 Struts 中调用一个 JS 函数：

```
<s:iterator value="%{foo}" status="stat">
    <a id="idname" href="#" onClick="javascript:getValue('<s:property value="news"/>');    return false;"><s:property value="newsName" /></a>
</s:iterator> 
```

当我这样做时，我得到一个未终止的字符串常量错误。但是，当我使用我拥有的转义值时：

当我使用“新闻”变量的字面值时：

```
<s:iterator value="%{foo}" status="stat">
  <a id="idname" href="#" onClick="javascript:getValue('http:&#47;&#47;www.cnn.com&#47;2013&#47;01&#47;10&#47;travel&#47;flight-movie-united-232&#47;index.html?iref=obnetwork');return false;">        
  <s:property value="newsName" /></a>
</s:iterator> 
```

不会抛出这样的错误。

的价值：

```
<s:property value="news"/> 
```

是字符串：

```
http:&#47;&#47;www.cnn.com&#47;2013&#47;01&#47;10&#47;travel&#47;flight-movie-united-232&#47;index.html?iref=obnetwork 
```

我通过将其输出到页面来检查这一点。

而且，不，我不必逃避财产本身；这有效：

```
<a id="idname" href="#" onClick="javascript:getValue('http://www.blah.com/<s:property value="otherValue"/>');return false;"><s:property value="userName" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:43:36.153

我无法重现该问题。

查看下面的源代码：找到不同之处（在功能级别上），您可能会发现错误。（大部分是从实时应用程序中剪切和粘贴的，尽管我手动编辑了一些名称。）

**Foo.java**，保存数据：

```
public class Foo {
    private String news;
    private String newsName;
    // Plus public getters and a ctor to init.
} 
```

**AnAction.java**，创建并公开列表：

```
public class AnAction extends ActionSupport {

    private List<Foo> foo; // Plus public getter.

    public String execute() throws Exception {
        foo = Arrays.asList(new Foo("http:&#47;&#47;www.cnn.com&#47;2013&#47;01&#47;10&#47;travel&#47;flight-movie-united-232&#47;index.html?iref=obnetwork", "YOOOOOO!"));
        return SUCCESS;
    }
} 
```

**struts.xml**，配置：

```
<action name="a" class="test.AnAction">
  <result>/WEB-INF/jsps/a.jsp</result>
</action> 
```

**a.jsp**，视图层：

```
<%@ taglib prefix="s" uri="/struts-tags" %>

<html>
  <body>
    <s:iterator value="%{foo}" status="stat">
      <a id="idname" href="#" onClick="getValue('<s:property value="news"/>'); return false;"><s:property value="newsName" /></a>
    </s:iterator>
  </body>
</html> 
```

# web-services - 从作为 Web 服务公开的消息流调用 Web 服务？

> ID：14277488
> 
> 赞同：1
> 
> 时间：2013-01-11T11:43:26.930
> 
> 标签：web-services, websphere, security, ibm-mq, messagebroker

我有一个作为 Web 服务公开的消息流。在该流程中，我们正在调用另一个 Web 服务。流主要是通过将 wsdl 从消息集中拖到 IBM Websphere Message Broker Tool Kit 的设计器来生成的。这是我的流程：

`SoapInput`--> `SubFlow to Expose Service`--> `Subflow to invoke Service`-->`SoapReply`

`SubFlow to Expose Service`通过拖动 WSDL 并选择“公开为服务”生成。

`Subflow to invoke Service`通过拖动 WSDL 并选择“Invoke as a service”来生成。

从服务端获取无效参数错误。我尝试调用的所有服务都没有收到相同的错误。这只发生在一项服务中。我在流量方面做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T08:40:45.340

从消息流中调用 WebServices（代理外部）时遇到问题，原因是缺少命名空间声明。尝试在流程中添加 **Tracenodes**以获得更好的错误诊断。

# java - 使用 FreeHep 库的小程序中的神秘 NullPointerException

> ID：14277491
> 
> 赞同：1
> 
> 时间：2013-01-11T11:43:30.013
> 
> 标签：java, graphics, applet, freehep

我有一个使用 JUNG2 可视化大图的小程序。[不久前，我设法添加了一个导出功能，允许用户将图形导出为基于矢量的图像](https://stackoverflow.com/a/8559977/328725)，这次使用的[是 FreeHEP 库](http://java.freehep.org/vectorgraphics/)。一切都很顺利（我什至在出版物中使用了 PDF 导出）。

现在，当我尝试导出图表时，小程序似乎崩溃了。深入研究 Java 控制台，我发现这是由于库深处存在 NPE。以下是堆栈跟踪的相关部分：

```
Exception in thread "AWT-EventQueue-2" java.lang.ExceptionInInitializerError
    at org.freehep.graphicsio.gif.GIFImageWriteParam.<init>(GIFImageWriteParam.java:28)
    at org.freehep.graphicsio.gif.GIFImageWriter.getDefaultWriteParam(GIFImageWriter.java:73)
    at org.freehep.graphicsio.exportchooser.ImageExportFileType.<init>(ImageExportFileType.java:71)
    at org.freehep.graphicsio.exportchooser.ImageIOExportFileType.onRegistration(ImageIOExportFileType.java:50)
    at javax.imageio.spi.SubRegistry.registerServiceProvider(ServiceRegistry.java:715)
    at javax.imageio.spi.ServiceRegistry.registerServiceProvider(ServiceRegistry.java:302)
    at org.freehep.util.export.ExportFileTypeRegistry.addApplicationClasspathExportFileTypes(ExportFileTypeRegistry.java:122)
    at org.freehep.util.export.ExportFileTypeRegistry.getDefaultInstance(ExportFileTypeRegistry.java:50)
    at org.freehep.util.export.ExportFileType.getExportFileTypes(ExportFileType.java:181)
    at org.freehep.util.export.ExportFileType.getExportFileTypes(ExportFileType.java:173)
    at org.freehep.util.export.ExportDialog.addAllExportFileTypes(ExportDialog.java:64)
    at org.freehep.util.export.ExportDialog.<init>(ExportDialog.java:130)
    at org.freehep.util.export.ExportDialog.<init>(ExportDialog.java:90)
    at org.freehep.util.export.ExportDialog.<init>(ExportDialog.java:82)
    at myproject.visualization.ExtendedModelGraphMouse$ExportActionListener.actionPerformed(ExtendedModelGraphMouse.java:167)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    ...
Caused by: java.lang.NullPointerException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.freehep.graphics2d.PixelGraphics2D.<clinit>(PixelGraphics2D.java:101)
    ... 53 more 
```

* * *

我一直在[研究 FreeHEP 库](http://grepcode.com/file/repo1.maven.org/maven2/org.freehep/freehep-graphicsio/2.1.2/org/freehep/graphicsio/gif/GIFImageWriteParam.java#GIFImageWriteParam)（托管在 Grep Code）的源代码，堆栈跟踪中的最后一行（最顶层）指向以开头的行`UserProperties`

```
public GIFImageWriteParam(Locale locale) {
    super(locale);
    canWriteProgressive = true;
    progressiveMode = MODE_DEFAULT;

    UserProperties def = new UserProperties(GIFGraphics2D
            .getDefaultProperties());
    quantizeColors = def.isProperty(GIFGraphics2D.QUANTIZE_COLORS);
    quantizeMode = def.getProperty(GIFGraphics2D.QUANTIZE_MODE);
} 
```

据我所知，这应该意味着`GIFGraphics2D`结果是`null`- 为什么，我不明白。我已经仔细检查了我的构建文件以确保必要的库已经到位，并且我的构建文件和我使用的代码[`ExportDialog`](http://grepcode.com/file/repo1.maven.org/maven2/org.freehep/freehep-graphics-base/2.1.2/org/freehep/util/export/ExportDialog.java#ExportDialog)（请参阅问题正文中的第一个链接）在一年多的时间里都没有改变。那么这里的问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T10:22:27.277

Freehep 正在使用一种未发布的内部 java SDK 方法。并且这个方法的实现随着 java 1.7 版的变化而改变。您可能已将 JDK/JRE 升级到最新的 java 版本。

幸运的是，这已在 freehep 的 github 存储库中得到修复（我找不到 2010 年之后的 freehep 版本，但它正在开发中并在 github 和 maven 上可用）。

github中的问题可以在[这里](https://github.com/freehep/freehep-vectorgraphics/issues/6)找到。

[包含有关Oracle 站点](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7073211)的一些信息的错误报告。

所以从 github 更新你的 freehep 安装，重建它，并使用新的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T14:04:19.190

我是github，Maven等的新手，所以如果以下内容琐碎或不清楚，请见谅。

尽管使用了 github 版本的 freehep-vectorgraphics（版本 2.2.2），但在运行我的代码时仍然收到此错误消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.ExceptionInInitializerError
at org.freehep.graphicsio.gif.GIFImageWriteParam.<init>(GIFImageWriteParam.java:28)
at org.freehep.graphicsio.gif.GIFImageWriter.getDefaultWriteParam(GIFImageWriter.java:73)
at org.freehep.graphicsio.exportchooser.ImageExportFileType.<init>(ImageExportFileType.java:71)
at org.freehep.graphicsio.gif.GIFExportFileType.<init>(GIFExportFileType.java:42)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 
```

GIFImageWriteParam.java 的第 28 行如下所示：

```
UserProperties def = new UserProperties(GIFGraphics2D.getDefaultProperties()); 
```

根据 github 上的 Mark Donszelmann 的说法，该错误是由 PixelGraphics2D 中的错误引起的。他建议的补丁包含变量“clazz”。这是 PixelGraphics2D 中出现此变量的部分。它看起来与补丁的文本非常不同：

```
Class<?> clazz = Class.forName("sun.awt.X11GraphicsEnvironment");
displayX11 = true;
Method method = clazz.getMethod("isDisplayLocal");
if (Modifier.isStatic(method.getModifiers())) {
        // JDK 1.6
        displayLocal = (Boolean) method.invoke(null);
} else {
        try {
                // since JDK 1.7
                displayLocal = (Boolean)method.invoke(clazz.newInstance());
        } catch (InstantiationException  e) {
        }
} 
```

知道如何解决这个问题吗？

# php - 从字符串中提取 youtube URL

> ID：14277492
> 
> 赞同：0
> 
> 时间：2013-01-11T11:43:30.313
> 
> 标签：php

到目前为止我尝试过的是这个功能：

```
function isYoutubeUrl($url) {
    return preg_match("#^https?://(?:www\.)?youtube.com#", $url);
} 
```

但它只适用于这样的普通 youtube 字符串：

```
$string = 'http://www.youtube.com/watch?v=bJIXm6U4df';
$newString = isYoutubeURL($string);
if($newString); // true 
```

我需要一个函数来检查 youtube URL 的字符串，如果有，则返回 url。

```
$string = 'this is so crazy...http://www.youtube.com/watch?v=bJIXm6U4df';
$newString = extractYoutubeUrl($string);
echo $newString; // http://www.youtube.com/watch?v=bJIXm6U4df 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:47:33.533

^ - 从字符串的开头检查 - 删除它并尝试

return preg_match("#https?://(?:www.)?youtube.com#", $url);

这将是你的功能：

```
function extractYoutubeUrl($url) {
    return preg_match("#https?://(?:www\.)?youtube.com#", $url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:05:47.637

试试这个

```
function extractYoutubeUrl($url) {
  if(preg_match("#(http://www\.youtube\.com/watch\?v=[%&=#\w-]*)#", $url, $result))
    return $result[0];
  return null;
} 
```

# c# - 使用c#在asp.net中动态添加复选框？

> ID：14277493
> 
> 赞同：0
> 
> 时间：2013-01-11T11:43:31.827
> 
> 标签：c#, asp.net, dynamic-controls

`checkboxes`我正在尝试在我的*`asp.net`*项目中添加两组。我正在这样做：

在页面加载时：

```
 public static CheckBox[] chck = new CheckBox[100];
 public static CheckBox[] chckbx = new CheckBox[100]; 
```

我有一个功能：

```
 public void generatecheckbox1()
{
    for (int i = 0; i < 99; i++)
    {
        chck[i] = new CheckBox();
        chck[i].ID = chck + Convert.ToString(i);
        chck[i].Text = chck + Convert.ToString(i);
        pnlcom1.Controls.Add(chck[i]);
        pnlcom1.Controls.Add(new LiteralControl("<br />"));

        chckbx[i] = new CheckBox();
        chckbx[i].ID = chckbx + Convert.ToString(i);
        chckbx[i].Text = chckbx + Convert.ToString(i);
        pnlcom2.Controls.Add(chckbx[i]);
        pnlcom2.Controls.Add(new LiteralControl("<br />"));
    }
} 
```

我在这里调用这个函数：

```
protected void ddluserwebser_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ddluserwebser.SelectedItem.Text == "Custom")
    {
        generatecheckbox1();

    }
} 
```

问题是我收到这样的错误页面：

![在此处输入图像描述](../Images/b5a91c3a0c41c8a0f710fc4db9608f2c.png)

它是这么说的：

*`Multiple controls with the same ID 'System.Web.UI.WebControls.CheckBox[]0' were found. FindControl requires that controls have unique IDs.`*

但是我分配了不同`ids..`的我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:49:12.363

问题是您在一个循环迭代中创建了两个具有相同 ID 的复选框。当它们相同`NamingContainer`（[`Panel`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.aspx)不实现[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx)）时，在 ASP.NET 中是不允许的。

所以将其更改为（注意`string.Format`部分）：

```
for (int i = 0; i < 99; i++)
{
    chck[i] = new CheckBox();
    chck[i].ID = string.Format("chk_1_{0}", i);
    chck[i].Text = chck + Convert.ToString(i);
    pnlcom1.Controls.Add(chck[i]);
    pnlcom1.Controls.Add(new LiteralControl("<br />"));

    chckbx[i] = new CheckBox();
    chck[i].ID = string.Format("chk_2_{0}", i);
    chckbx[i].Text = chckbx + Convert.ToString(i);
    pnlcom2.Controls.Add(chckbx[i]);
    pnlcom2.Controls.Add(new LiteralControl("<br />"));
} 
```

您还使用`CheckBox[]`来构建您的 ID

```
chckbx + Convert.ToString(i); 
```

这似乎是因为`Type`+ `string`= 类型的名称 + 字符串，但看起来像：

```
"System.Windows.Forms.CheckBox[]99" 
```

所以只需使用上面的代码

```
string.Format("chk_1_{0}", i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:59:34.233

不要检查这里`chck[i].ID = chck + Convert.ToString(i);`需要 `chck[i].ID = "chck" + Convert.ToString(i);`

# c# - 无法创建“MainViewModel”的实例

> ID：14277497
> 
> 赞同：4
> 
> 时间：2013-01-11T11:43:48.893
> 
> 标签：c#, wpf, wpfdatagrid

我正在创建一个简单的 WPF 应用程序，用于使用 Observable 集合（遵循 MVVM 模式）将 Datagrid 数据绑定到数据库。

App.xaml.cs 类

```
public partial class App : Application
 {
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        var mainWindow = new MainWindow();
        var viewModel = new MainViewModel();
        mainWindow.Show();
    }
} 
```

当我尝试将其绑定到我的 XAML 时，出现以下错误：

**无法创建“MainViewModel”的实例**

XAML 代码：

```
 <Window x:Class="MVVM_DemoAppl.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ViewModel="clr-namespace:MVVM_DemoAppl.ViewModels"
    Title="MainWindow" Height="350" Width="525">
    <!-- The error is raised here -->
   <Window.DataContext> 
     <ViewModel:MainViewModel/> 
   </Window.DataContext> 
```

如何克服这个错误？谢谢。

PS：我在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b5d4520c-7d36-4666-987f-b993e7e015b6)上发布了同样的问题，但我的整个代码，请看一下更好的理解。

根据用户的建议，我是否必须以这种方式保留我的 OnStartup() ？

```
 public partial class App : Application
 {
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:51:17.553

尝试在 MainWindow 的构造函数上进行绑定并将其从 XAML 中删除：

```
public MainWindow()
{
   InitializeComponent();
   DataContext = new MainViewModel();
} 
```

这应该工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:11:57.823

您正在混合设置 DataContext 的两种不同方式。选择一个然后继续。

如果您的视图模型具有默认构造函数（即没有参数的构造函数），您可以在 xaml 中完成所有操作：

```
 <Window x:Class="MVVM_DemoAppl.Views.MainWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:ViewModel="clr-namespace:MVVM_DemoAppl.ViewModels"
     Title="MainWindow" Height="350" Width="525">
     <Window.DataContext>
         <! This instantiates a MainViewModel and binds this view to the viewmodel.
         <ViewModel:MainViewModel/> 
     </Window.DataContext> 
```

或者，您将 Window.DataContext 保留在您的视图中未设置，并在其他地方单独执行，可能像之前一样在 OnStartup() 中。

```
public partial class App : Application
{
   protected override void OnStartup(StartupEventArgs e)
   {
      base.OnStartup(e);
      var mainWindow = new MainWindow();
      var viewModel = new MainViewModel();
      mainWindow.DataContext = viewModel; // Bind the ViewModel to the Window Datacontext.
      mainWindow.Show();
   }
} 
```

# sql-server-2008 - 将 TFS 2012 express 连接到另一台 PC 上安装的 sql server express

> ID：14277506
> 
> 赞同：0
> 
> 时间：2013-01-11T11:44:16.710
> 
> 标签：sql-server-2008, tfs, sql-server-express

我已经安装了 Team Foundation Server 2012 **Express**。但我希望 TFS Express 使用安装在另一台 PC 上的 SQL Server Express。是否有任何选项可以将 TFS Express 2012 连接到安装在另一台 PC 上的 SQL Server Express？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:49:01.167

您可以使用 TFSConfig.exe 命令，如下所示：

*   以管理员身份打开cmd

*   导航：

> C:\Program Files\Microsoft Team Foundation Server 11.0\Tools 目录（cd C:\Program Files\Microsoft Team Foundation Server 11.0\Tools

*   运行以下命令：

> tfsconfig 无人值守 /configure /type:basic /inputs:SqlInstance=PC2\TFSSQLExpress

**PC2**：是你的第二台机器。

**TFSSQLExpress**：是实例名称。

**但是您必须考虑很多因素：**

*   如果 TFS 已配置，请先删除它的配置。

![在此处输入图像描述](../Images/85250136b8926b556d6af7e648673ede.png)

*   小心打开命令行并使用在另一台机器上具有权限的用户帐户运行 TFSConfig.exe，以便它可以在那里安装数据库，最好使用域控制器帐户。

*   注意为远程连接和 SQl 服务器网络配置启用了 SQL。

![在此处输入图像描述](../Images/62e8975debbd4f79572c0d8d2f3dce26.png) ![在此处输入图像描述](../Images/368814a8516a024829e3b9688cc27be3.png)

*   确保配置成功。

    ![在此处输入图像描述](../Images/fa63d745df09cf3214ddbe7a9749f3b9.png)

# c++ - C++11 中的 type&& 语法

> ID：14277508
> 
> 赞同：0
> 
> 时间：2013-01-11T11:44:23.837
> 
> 标签：c++, c++11

> **可能重复：**
> [双地址运算符？(&&)](https://stackoverflow.com/questions/4549151/double-address-operator)

在矢量类的参考：[http](http://www.cplusplus.com/reference/vector/vector/vector/) ://www.cplusplus.com/reference/vector/vector/vector/我只是注意到类型名称后有两个＆符号的奇怪语法，例如在构造函数中：

```
vector (vector&& x); 
```

这是什么意思，它是如何工作的？

# vb6 - Option Explicit Off 时 DLL 变量与局部变量冲突

> ID：14277510
> 
> 赞同：0
> 
> 时间：2013-01-11T11:44:24.223
> 
> 标签：vb6, global-variables, option-explicit

我正在维护一个不使用`Option Explicit`. 我知道这不是一个好主意，但我没有编写代码。

我的问题的一个例子是，一个名为的变量`state`已在没有`Dim`.

此后， A`DLL`被引入作为项目中的参考。现在编译器认为`state`那是指`DLL`. 现在代码中的一行会导致类型不匹配错误。

我怎样才能避免这个问题？

参考： http: [//msdn.microsoft.com/en-us/library/aa241733 (v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa241733(v=vs.60).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:38:17.327

如果不是太麻烦，您可以制作另一个项目作为 dll 的包装器，并且只公开您需要的内容。您的 VB6 程序应该引用包装器而不是原始 dll。如果你需要它的全局状态，你可以重命名它。如果不只是隐藏它。

# java - 在 Jenkins 上通过 Java Web Start 启动从属代理时出现问题

> ID：14277512
> 
> 赞同：17
> 
> 时间：2013-01-11T11:44:28.080
> 
> 标签：java, jenkins, java-web-start

我们最近将 Jenkins 升级到了最新版本。

从那以后，我每次尝试启动它时都无法通过命令行通过 Java WebStart 启动从属服务器，我得到“无法启动应用程序”错误

在详细信息面板中

```
CouldNotLoadArgumentException[ Could not load file/URL specified: http://MyServer:8080/computer/Slave1/slave-agent.jnlp]
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main.access$000(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

当尝试浏览到 Jenkins 站点并从那里开始午餐时，它可以正常工作，但是如果你重新启动该框，那么启动时的命令行将无法完成这项工作。

这是我试图从奴隶运行的命令

```
cd "C:\Program Files (x86)\Java\jre7\bin"
javaws http://MyServer:8080/computer/Slave1/slave-agent.jnlp 
```

问题是这曾经奏效。我也尝试过更新到最新版本的 Java 但没有运气，

任何想法任何人？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T14:35:01.493

据推测，大部分是由于 Jenkins 论坛上的帖子，这种新行为是由于对安全问题的修复：[https ://wiki.jenkins-ci.org/display/SECURITY/Jenkins+Security+Advisory+2013- 01-04](https://wiki.jenkins-ci.org/display/SECURITY/Jenkins+Security+Advisory+2013-01-04)

似乎出现了两种解决方案：

1.  下载 JNLP 文件（通过浏览器、wget、curl 等）然后在本地运行 - 可能需要额外的参数。
2.  转到管理 Jenkins -> 配置全局安全性，然后在基于项目的矩阵授权策略下，为用户“匿名”启用“从属”部分中的“连接”。这会让你在有人模仿奴隶的地方受到攻击（但在我的情况下，在私人工作网络上 - 这不是问题。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-29T20:29:02.487

如果您想将 JNLP 文件保留在主服务器上，并且不想打开匿名用户作为从属用户连接的安全漏洞，请编辑 jenkins-slave.xml 文件以添加 -jnlpCredentials 选项以及 - jnlpUrl 选项：

```
-jnlpCredentials {user}:{apiKey} 
```

其中：
user 是 Jenkins 帐户数据库中的用户名
apiKey 是用户的 API 密钥（注意这不是用户的密码）

要获取用户的 API 密钥，请进入：

```
http://SERVER/user/USER/configure 
```

并单击按钮以显示该用户的 API 密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-25T13:38:43.537

对我来说，我必须确保在 jenkins 矩阵权限中设置了“匿名”连接，并且我必须破解从 master 发送的 JNLP 文件。

我会说这是 2.19.2 中 Jenkins 的错误。基本上，在从服务器拉下的 JNLP 文件中，包含主设备 ip 和端口的隧道参数仅被从设备 ip-addr 替换。

请参阅 engine.java 的代码，[line #308]，这是引发异常的地方：

[https://searchcode.com/codesearch/view/65603521/](https://searchcode.com/codesearch/view/65603521/)

异常看起来像： [![在此处输入图像描述](../Images/8a644cd913595cc20dd8c9cd22230d38.png)](https://i.stack.imgur.com/s4XrU.jpg)

最初我的 JNLP 文件看起来像：

```
<jnlp codebase="http://jenkins-master-ip-addr:8080/computer/Node1/" spec="1.0+">
<information>
    <title>Agent for Node1</title>
    <vendor>Jenkins project</vendor>
    <homepage href="https://jenkins-ci.org/"/>
</information>
<security>
    <all-permissions/>
</security>
<resources>
    <j2se version="1.7+"/>
    <jar href="http://jenkins-master-ip-addr:8080/jnlpJars/remoting.jar"/>
    <property name="hudson.showWindowsServiceInstallLink" value="true"/>
</resources>
<application-desc main-class="hudson.remoting.jnlp.Main">

    <argument>b16fdf4388d98e4be6910218cfb5a9b5fa999bcd8dec90264e525171a3b02fce</argument>
    <argument>Node1</argument>

    <argument>-tunnel</argument>
    <argument>jenkins-slave-ip-addr</argument>

    <argument>-url</argument>
    <argument>http://jenkins-master-ip-addr:8080/</argument>

</application-desc> 
```

问题是上面的“-tunnel”参数。它仅包含 SLAVE 机器的 ip-addr。将其更改为 MASTER 机器的 ip-add AND PORT，修复它！以下：

```
 <argument>-tunnel</argument>
    <argument>jenkins-master-ip-addr:9080</argument> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T11:45:49.810

检查命令行中的名称Slave1和jenkins节点定义是否相同。jenkins节点中的名称也应该是Slave1

# jquery - 无论是否选择了选项，如何从选择框中附加选项

> ID：14277513
> 
> 赞同：0
> 
> 时间：2013-01-11T11:44:28.897
> 
> 标签：jquery, html

我想知道如何将选择框中的选项附加到另一个选择框中。但问题是我想附加选择框中的所有学生而不关心是否选择了该选项，如果学生在选择框中，那么他们应该被附加到另一个选择框中。

下面是我拥有的 jquery 代码，它应该执行附加但目前没有发生：

```
var selectedStudents = jQuery("select#studentadd").find("option");
selectedStudents.appendTo($("select#studentexist")); 
```

下面是选择框`#studentadd`：

```
<select multiple="multiple" name="addtextarea" id="studentadd" size="10">
    <option value='1'>u08743 - Joe Cann</option>
    <option value='4'>u03043 - Jill Sanderson</option>
    <option value='7'>u08343 - Craig Moon</option>
</select> 
```

以下是学生应附加到的选择框：

```
<select id="studentexist" name="existtextarea"></select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:47:58.837

试试这个代码...

```
 var str="";
        $('#studentadd').find('option').each(function(){
        str+="<option>"+$(this).html()+"</option>";
        });
$('#studentadd').html("");
        $('#studentexist').html(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:48:10.150

它应该工作，也许你忘了这个

```
$(document).ready(function(){
  var selectedStudents = jQuery("select#studentadd").find("option");
            selectedStudents.appendTo($("select#studentexist"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:48:45.650

您可以使用`jquery` [$.html()](http://api.jquery.com/html/)来执行此操作

```
var opt = $("#studentadd").html();
$("#studentexist").html(opt); 
```

更新：

使用[$.detach()](http://api.jquery.com/detach/)移动 DOM

```
var opt = $("#studentadd").detach();
$("#studentexist").html(opt); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:50:42.323

实际上，您的代码完美无缺，但是它将选项从第一个选择移到了第二个。如果你想复制它们，你需要添加一个`.clone()`（[这里是一个小提琴](http://jsfiddle.net/2V53n/)）：

```
var selectedStudents = jQuery("select#studentadd").find("option");
selectedStudents.clone().appendTo($("select#studentexist")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T11:53:21.160

你可以试试这个

```
$("select#studentadd option").each(function(){
    $("select#studentexist").append($(this).clone());
}); 
```

[**例子**](http://jsfiddle.net/ksrpX/)。

**更新：（**而不是副本）

```
$("select#studentadd option").each(function(){
    $("select#studentexist").append($(this));
}); 
```

[**例子**](http://jsfiddle.net/ksrpX/1/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T11:53:57.267

使用`.clone()`：http: [//jsbin.com/ucozis/4/edit](http://jsbin.com/ucozis/4/edit)

```
$(function(){

    $('#studentexist').html($('#studentadd option').clone());
    $('#studentadd').html('');

}); 
```

就在选择之后`.append()`或`.clone()`空白。

正如您提到的场景，这是对此的更新答案：

```
$(function(){
  $('button').click(function(){
    $('#studentexist').html($('#studentadd option').clone());
    $('#studentadd').html('');
  });
}); 
```

这是小提琴，它会在单击按钮 [http://jsbin.com/ucozis/5/edit时替换所有内容](http://jsbin.com/ucozis/5/edit)

# c# - 获取 Mifare 卡类型

> ID：14277515
> 
> 赞同：2
> 
> 时间：2013-01-11T11:44:36.163
> 
> 标签：c#, mifare, smartcard-reader

我编写了一个简单的应用程序 (C#)，以便通过我的智能卡读卡器在我的 Mifare 卡上执行一些 I/O 操作（显然，我使用了一些 Win API 包装）。

我得到的关于 mifare 的唯一信息是“Mifare 1k”），但是有什么方法可以知道我的 mifare 卡的确切类型吗？（例如可以是 Classic、DESFire、Plus、Ultralight..）？

或者我的应用返回的 Mifare 1k 描述可能意味着它只是一个经典的 Mifare？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:46:34.953

维基是对的。在卡片的 ATR 中，您会找到确切的卡片类型。

看看这个： [http ://www.acs.com.hk/drivers/eng/API_ACR122U_v2.00.pdf](http://www.acs.com.hk/drivers/eng/API_ACR122U_v2.00.pdf)

在第 6 页中，您有 ATR 结构/格式。第 15 和第 16 字节是 de Card Name（类型）

如果您收到“Mifare 1k”，则指的是 MiFare Classic 1K。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:10:55.220

您可以找到卡的 ATR（重置答案）并分析该 ATR 以找到卡类型。

假设 ATR 是 3b 8f 80 01 80 4f 00 00 00 00 03 00 00 02 00 00 00 00 69（不是真实的）

如果 atrLength-0X6 = 1 那么 MIfare 1k

atrLength-0X6 = 2 然后是 Mifare 4K

# filter - 自定义过滤剑道网格数据在给定日期范围内的第二个网格中检查值（日期选择器）

> ID：14277516
> 
> 赞同：1
> 
> 时间：2013-01-11T11:44:37.150
> 
> 标签：filter, grid, kendo-ui

我在剑道网格 gridDetails 中填充了数据

我有另一个网格 grdFilter 和两个剑道日期选择器..

我需要根据选中的行和在 datepicker 中选择的从/到日期值过滤 gridDetails 的数据。在选择日期和值形式 gridFilter 后单击按钮过滤记录时，我需要过滤 gridDetails 行。

网格过滤器：

```
 $("#gridFilter").kendoGrid({
   columns:
   [
   { field: 'CountriesName', title: 'Select', width:10,"template":
               "<input id='checkRow' type=\"checkbox\" />" },
   { field: 'CountriesName', title: 'Countries', width: 40}
   ] 
   }) 
```

网格详细信息：

```
 $("#gridDtails").kendoGrid({
    columns:
    [

    { field: 'OrderDate', title: 'Activity Datetime'},
    { field: 'CountryName', title: 'Country', width: 150 },
    { field: 'OrderDetails', title: 'Order Type' },
    { field: 'OrderValue', title: 'Entry Price'},
    { field: 'OrderShipment', title: 'Shipment'}
    ] 
    )} 
```

请指导我如何获取 gridFilter 和 Dates 的检查值，然后使用它们过滤 gridDetails 记录并仅显示给定日期范围内的选定国家/地区数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:33:48.627

1.  在初始化中设置`autobind`为，这使您有时间指定要加载的内容。`false``gridDetails`
2.  然后从`gridFilter`和中获取值`datePicker`。
3.  建立一个条件并在of上`filter`调用。`filter( condition )``DataSource``gridDetails`

的参数的结构`DataSource.filter`是这样的：

```
{
    logic: "or",
    filters: [
        { field: "CountryName", operator: "eq", value: "Spain" },
        { field: "CountryName", operator: "startswith", value: "Bulg" }
    ]
} 
```

签入`DataSource`（[在](http://docs.kendoui.com/api/framework/datasource)关于方法`filter`功能的部分中。

# static - 如何从猫鼬中的实例方法访问静态方法？

> ID：14277518
> 
> 赞同：15
> 
> 时间：2013-01-11T11:44:38.517
> 
> 标签：static, mongoose, instance

如何从猫鼬中的实例方法访问静态方法？

我有一个名为 Job 的工作模型。从实例方法 job.start 我想调用静态方法 Job.someStatic()。如何从实例方法中的“this”获取对作业的引用？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-11T13:38:38.067

我发现这样做的唯一方法（不只是调用`Job.someStatic()`）是：

```
this.model(this.constructor.modelName).someStatic(); 
```

**感谢@numbers1311407**更新：****

 **我不知道是否一直如此，但至少从 Mongoose 3.6.11 开始，您可以将其缩短为：

```
this.constructor.someStatic(); 
```

**猫鼬 4.x 更新**

这在 4.4.12 中仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-06T18:34:52.867

访问静态的另一个选项是：

```
this.schema.statics.someStatic() 
```**

# spring - JqG rid - 如何从 Spring 3.0 动态加载 rowList 值

> ID：14277520
> 
> 赞同：1
> 
> 时间：2013-01-11T11:44:49.737
> 
> 标签：spring, jqgrid

如何根据总行数从spring 3动态添加rowList tom jqGrid。例如：如果总行数为 300，如果我们只显示 20，则每页。所以列表应从 Spring 控制器显示为 20、40、60、..... 300，并且必须将其绑定到 jqGrid rowList 属性。

如果有任何想法，请与我们分享。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:19:18.710

总的来说，我同意**david**，但要准确地说是“可以更改吗？”一栏。的[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)只说不能使用`setGridParam`方法来更改选项指定的选择值`rowList`。

要更改下拉菜单，必须`<select>`手动修改 innerHTML。例如代码

```
$("#pager .ui-pg-selbox").append('<option role="option" value="5">5</option>' +
    '<option role="option" value="1000">All</option>'); 
```

我在[演示](http://www.ok-soft-gmbh.com/jqGrid/DynamicChangeOfPagerSelBox.htm)中使用来演示这一点。单击“将 rowList 从 [10] 更改为 [10, 5, 1000]”按钮后，得到

![在此处输入图像描述](../Images/14b544c8fdfece2ce11f1f5b08e3697f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:23:38.693

如果您查看[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)，`rowList`您会在表格的最后一列中看到“否”。该列的标题是“可以更改吗？”。`rowList`不能根据文档动态更改。

# iphone - 在iOS中点击时如何突出显示自定义UIButton

> ID：14277521
> 
> 赞同：3
> 
> 时间：2013-01-11T11:44:51.713
> 
> 标签：iphone, ios, uibutton

当我点击如下图时，我试图突出显示自定义 UIButton。

![在此处输入图像描述](../Images/5306cb310d3d94ef16348c9a8ec65d77.png)

我想像上图一样传播白光。

我需要为此使用的任何属性？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T11:49:00.267

在您的 xib-> 选择按钮-> 显示您的属性检查器

如下图所示设置此属性![在此处输入图像描述](../Images/7026ac8c709237c62b06de92647359d1.png)

并通过代码

```
btn.showsTouchWhenHighlighted = YES; 
```

希望对你有帮助。。

# matplotlib - py2exe - 可执行文件未启动

> ID：14277522
> 
> 赞同：0
> 
> 时间：2013-01-11T11:45:01.777
> 
> 标签：matplotlib, py2exe

我已经用这个脚本编译了我的应用程序，以避免在 libmzq 和 MSVCP90 dll 上编译错误：

```
from distutils.core import setup
import py2exe

setup(console=[{"script": "Int_assortimenti.py"}],
       options = {
        "py2exe": {
            "dll_excludes": ["libzmq.dll", "MSVCP90.dll"]
        }
    }) 
```

我获得了我的可执行文件，但是当我运行它时，结果是：

![在此处输入图像描述](../Images/125df5966231b4ed7532b869fa6b192e.png)

我怎么解决这个问题？考虑到我的应用程序 matplotlib 没有被使用。

提前非常感谢：形成我对于解决这个问题至关重要！

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:00:57.510

请看这里（“数据文件”部分）： http: [//www.py2exe.org/index.cgi/MatPlotLib](http://www.py2exe.org/index.cgi/MatPlotLib)

这可能会帮助您解决该问题。

**编辑。**哦，很抱歉，我没有专心地阅读您的问题 :( 如果您的应用程序不使用 matplotlib，我认为您可以将其添加到排除项中。像这样：

```
excludes = ['matplotlib'] # add here all libraries (separated by commas) that you don't need in app

setup(console=[{"script": "Int_assortimenti.py"}],
   options = {
    "py2exe": {
        "excludes": excludes,
        "dll_excludes": ["libzmq.dll", "MSVCP90.dll"]
    }
}) 
```

# android - 我怎样才能在android中获得我的视图形状

> ID：14277531
> 
> 赞同：1
> 
> 时间：2013-01-11T11:45:35.630
> 
> 标签：android

我偶然发现了一个使用片段的示例。每当更改选项卡时，片段都会旋转。使用这个：

`ObjectAnimator.ofFloat(leftFrag1.getView(), "rotationY",0,180).start`

问题是，在示例中，片段只有一个背景，所以看起来不错。我的片段上有几个视图，我不希望它们旋转，因为它看起来很糟糕。有没有办法只获得视图的矩形旋转或擦除视图相关的布局，使其看起来像示例？
感谢您的时间

# mysql - 使用 LIKE 条件选择更大的日期

> ID：14277532
> 
> 赞同：2
> 
> 时间：2013-01-11T11:45:42.433
> 
> 标签：mysql

我已经尝试过，但无法想象如何选择 LIKE 和 GREATER 条件：

```
SELECT * FROM table WHERE date > '2011-12-31' AND date LIKE "%-12-31" 
```

因此，如果用户发送`date`如下：`1950-12-31`，我需要获取所有日期大于发布日期以及哪个 MONTH 和 DAY 是 LIKE`%-12-31`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:49:26.777

不要使用`LIKE`. 试试这个

```
SELECT *
FROM table
WHERE
    date > '2011-12-31'
    AND MONTH(date) = 12
    AND DAY(date) = 31 
```

我没有要测试的 MySQL，但你明白我希望的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:50:06.827

```
Select * from table1 where date> urdate
And extract(month from date) = extract (month from Urdate)
And extract(day from date) = extract (day from urdate)
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:53:48.190

考虑到这些解决方案需要全表扫描，我不会推荐任何需要在等式左侧使用函数的解决方案；大桌子上的禁忌。

我建议在构造查询之前确定两个日期范围，然后简单地使用 BETWEEN。还要在日期列上添加索引。

```
select * from table1 where date between :1 and :2 
```

其中 :1 和 :2 是参数。

高温高压

# php - 请求日志记录时 PHPUnit 失败

> ID：14277533
> 
> 赞同：2
> 
> 时间：2013-01-11T11:45:42.617
> 
> 标签：php, phpunit

跑步

`phpunit --bootstrap tests/bootstrap.php tests/ExampleTest.php`工作但正在运行

`phpunit --bootstrap tests/bootstrap.php --coverage-html /tmp/report tests/ExampleTest.php`才不是

有任何想法吗？

## 失败信息

```
phpunit --bootstrap tests/bootstrap.php --coverage-html /tmp/report tests/ExampleTest.php

PHPUnit 3.7.10 by Sebastian Bergmann.

PHP Fatal error:  examplePhpRepositoryAutoLoader(): Failed opening required 'Example.php' (include_path='.:/usr/share/php:/usr/share/pear') in /home/dmakin/workspace/example-php-repository/classes/__autoloader__.php on line 15
PHP Stack trace:
PHP   1\. {main}() /usr/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /usr/share/php/PHPUnit/TextUI/Command.php:129
PHP   4\. PHPUnit_TextUI_TestRunner->doRun() /usr/share/php/PHPUnit/TextUI/Command.php:176
PHP   5\. PHPUnit_Framework_TestSuite->run() /usr/share/php/PHPUnit/TextUI/TestRunner.php:346
PHP   6\. PHPUnit_Framework_TestSuite->runTest() /usr/share/php/PHPUnit/Framework/TestSuite.php:745
PHP   7\. PHPUnit_Framework_TestCase->run() /usr/share/php/PHPUnit/Framework/TestSuite.php:775
PHP   8\. PHPUnit_Framework_TestResult->run() /usr/share/php/PHPUnit/Framework/TestCase.php:769
PHP   9\. PHP_CodeCoverage->stop() /usr/share/php/PHPUnit/Framework/TestResult.php:677
PHP  10\. PHP_CodeCoverage->append() /usr/share/php/PHP/CodeCoverage.php:253
PHP  11\. PHP_CodeCoverage->applyCoversAnnotationFilter() /usr/share/php/PHP/CodeCoverage.php:285
PHP  12\. PHP_CodeCoverage->getLinesToBeCovered() /usr/share/php/PHP/CodeCoverage.php:447
PHP  13\. PHP_CodeCoverage->resolveCoversToReflectionObjects() /usr/share/php/PHP/CodeCoverage.php:655
PHP  14\. class_exists() /usr/share/php/PHP/CodeCoverage.php:742
PHP  15\. examplePhpRepositoryAutoLoader() /usr/share/php/PHP/CodeCoverage.php:0 
```

## 测试//bootstrap.php

```
require_once __DIR__.'/../classes/__autoloader__.php';
spl_autoload_register('examplePhpRepositoryAutoLoader'); 
```

## 类/__autoloader__.php

自动加载程序取自[https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md的示例 PSR0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)

```
function examplePhpRepositoryAutoLoader($className)
{

    $className = ltrim($className, '\\');
    $fileName  = '';
    $namespace = '';
    if ($lastNsPos = strrpos($className, '\\')) {
        $namespace = substr($className, 0, $lastNsPos);
        $className = substr($className, $lastNsPos + 1);
        $fileName  = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) .     DIRECTORY_SEPARATOR;
    }
    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

    require_once $fileName;
}

spl_autoload_register('examplePhpRepositoryAutoLoader'); 
```

## 测试\ExampleTest.php

```
/**
 * Generated by PHPUnit_SkeletonGenerator on 2012-12-13 at 15:40:40.
 */
class ExampleTest extends PHPUnit_Framework_TestCase
{
    /**
     * @var example
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->object = new examplePhpRepository\Example();
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
    }

    /**
     * @test
     * @covers Example::setIntNumberOne
     */
    public function testSetIntNumberOne()
    {
        $this->assertNull($this->object->intNumberOne);

        $this->object->setIntNumberOne(1);
        $this->assertEquals(1, $this->object->intNumberOne);

    }
} 
```

## examplePhpRepository\Example.php

```
<?php
/**
 * Example class
 */
namespace examplePhpRepository;

class Example
{

    public $intNumberOne;

    /**
     * Class constructor
     */
    public function __construct()
    {

    }

    public function setIntNumberOne($newValue)
    {
        $this->intNumberOne = $newValue;
    }
} 
```

# 固定的

问题出在我对测试/ExampleTest.php 的评论中。我需要添加命名空间。

不工作

```
/**
 * @test
 * @covers Example::setIntNumberOne
 */ 
```

在职的

```
/**
 * @test
 * @covers examplePhpRepository\Example::setIntNumberOne
 */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:41:02.437

你的自动加载器永远不应该在`require`没有验证文件确实存在的情况下调用。链接自动加载器不起作用。

解决方案是检查文件是否可以包含：

```
if (stream_resolve_include_path($file)) {
    require $file;
} 
```

# android - Android分页无尽列表视图不起作用

> ID：14277535
> 
> 赞同：5
> 
> 时间：2013-01-11T11:45:45.797
> 
> 标签：android, json, listview

无尽的滚动视图在列表视图中不起作用，列表视图项目正在从 web 服务加载 10 个项目正在显示每页。Listview 应该像分页无尽的 listview 一样从 web 服务动态加载。我是 android 新手，谁能帮助我朝着正确的方向前进？以下是代码

```
 public class MainActivity extends ListActivity   {

   ListView list;
   LazyAdapter adapter;
   JSONArray posts;

// All static variables
static final String URL = "website";

 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Handler handler = new Handler();
    Runnable runable = new Runnable() {

        @Override
        public void run() {

            //call the function
            LoadData();
            //also call the same runnable
            handler.postDelayed(this, 40000);
        }
    };
    handler.postDelayed(runable, 10);

}public void LoadData(){

     ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                    JSONArray posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

        ListView  list=(ListView)findViewById(android.R.id.list);

        // Getting adapter by passing json data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.date)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),SampleDesp.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_DATE, date);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_CONTENT, content);
            startActivity(in);

        }
    });

    list.setOnScrollListener(new OnScrollListener(){

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onScrollStateChanged(AbsListView view,
                int scrollState) {
            // TODO Auto-generated method stub

        }

       });
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:54:32.897

你的方法`load()`总是返回假，它永远不会执行`(new LoadNextPage()).execute("");`

# bash - 如何计算同一行的出现次数？

> ID：14277536
> 
> 赞同：1
> 
> 时间：2013-01-11T11:45:46.877
> 
> 标签：bash, uniq

我有看起来像这样的文件：

```
1747834 222
1747834 222
1747834 222
1747834 222
2514112 32636
2514112 32636
2514112 32636 
```

对于每一行，我想计算它的出现次数并将其写入第三列，每一行应该被新行分割，如下所示：

```
1747834 222 4

2514112 32636 3 
```

我设法编写了这个脚本：

```
while read line; do a=`grep "$line" input | wc -l`; echo -e ${line}; echo -e "${a}\n"; done < input_uniq 
```

其中 input_uniq 是

```
 cat input | uniq 
```

但不幸的是我得到这样的输出：

```
1747834 222
4

2514112 32636
3 
```

如果我只使用一个回声，输出会很奇怪（基本上，$line 在开头被 $a 覆盖）所以我正在寻找另一种方法来做我需要的事情或建议如何修复我的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:50:32.437

标准方法是：

```
sort file | uniq -c 
      4 1747834 222
      3 2514112 32636 
```

虽然行数是附加到开头而不是结尾，所以这里有一个`awk`脚本可以做到这一点：

```
$ awk '{seen[$0]++}END{for (line in seen) print line, seen[line]}' file
1747834 222 4
2514112 32636 3 
```

# ant - 如何在 Flash Builder 中设置 FLEX_HOME 环境变量

> ID：14277539
> 
> 赞同：0
> 
> 时间：2013-01-11T11:45:53.333
> 
> 标签：ant, flash-builder

当我尝试在 Flash Builder 中运行 Ant 构建脚本时，会生成错误。所以我把`export FLEX_HOME=/Applications/Adobe\ Flash\ Builder\ 4.7/sdks/4.6.0/`我的`.zshrc`. 这在命令行中可以正常工作，但在 FB 中不行。

构建.xml

```
<?xml version="1.0"?>
<project name="helloworld" basedir="../" default="compile">
    <!-- Set up prefix for all environment variables -->
    <property environment="env" />
    <fail unless="env.FLEX_HOME" message="FLEX_HOME needs to be defined as an environment variable or in the Ant build." />
    <!-- Load user properties to overrride defaults -->
    <property file="${basedir}/build/build.properties" />
    <!-- System environment must contain FLEX_HOME variable that points to Flex SDK -->
    <property name="FLEX_HOME" location="${env.FLEX_HOME}" />
    <!-- Set up Flex tasks in Ant -->
    <taskdef resource="flexTasks.tasks" classpath="${FLEX_HOME}/ant/lib/flexTasks.jar" />

    <!-- Create directories needed for the build process -->
    <target name="init" description="Initializes project and destination folders.">
        <echo message="Project: ${ant.project.name}" />
        <echo message="Flex SDK: ${FLEX_HOME}" />
        <echo message="Flex home is ${env.FLEX_HOME}" />
        <delete dir="${bin.dir}" />
        <mkdir dir="${bin.dir}" />
    </target>

    <target name="compile" depends="init" description="Compiles the application.">
        <mxmlc file="${src.dir}/${application.name}.as" output="${bin.dir}/${application.name}.swf">
            <load-config filename="${FLEX_HOME}/frameworks/flex-config.xml" />

            <source-path path-element="${src.dir}" />

        </mxmlc>    
        <echo message="The ${application.name}.swf has been created in ${bin.dir}" />
    </target>

</project> 
```

和错误

```
Buildfile: /Users/gadzimari/Documents/Adobe Flash Builder 4.7/helloworld/build/build.xml

BUILD FAILED
/Users/gadzimari/Documents/Adobe Flash Builder 4.7/helloworld/build/build.xml:5: FLEX_HOME needs to be defined as an environment variable or in the Ant build.

Total time: 302 milliseconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:05:43.143

在黑暗中拍摄...

FLEX_HOME 属性的声明是否应该使用如下的值属性来设置？

```
<property name="FLEX_HOME" value="${env.FLEX_HOME}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T15:06:00.870

您需要像设置 JAVA_HOME 一样设置 FLEX_HOME。

转到您的 Users/{username} 文件夹并找到您的“.bash_profile”。如果那里不存在 bash 配置文件，请创建一个空的 .txt 文件，保存它，然后将其从“.bash_profile.txt”重命名为“.bash_profile”。

然后将以下内容添加到您的 bash 配置文件中：

```
export FLEX_HOME=/{flex install path} 
```

用系统的实际柔性安装路径替换括号部分，然后保存。要验证它，请打开一个新命令行并使用命令“echo $FLEX_HOME”。如果它以 /{flex install path} 响应，那么它设置正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T16:20:04.310

在试图从几年前拿起一个超级古老的项目后，今天我自己也遇到了这个问题。很久没有在这台机器上安装 Flex（errr...Flash Builder）了。

最终需要`build.properties`使用以下内容更改文件：

```
FLEX_HOME=/Applications/Adobe\ Flash\ Builder\ 4.7/sdks/3.5.0
 FLEX_FW_VERSION = framework_3.5.0.12683 
```

这对我有用。

# asp.net-mvc - 如何处理登录和匿名用户的操作

> ID：14277546
> 
> 赞同：1
> 
> 时间：2013-01-11T11:46:17.203
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有以下情况：

*   我有一个 ASP.NET MVC 网站/webapp，其中几乎所有控制器都受保护`[AuthorizeAttribute]`
*   我引入了新页面（一个新控制器 + 一些操作），可供登录用户和匿名用户使用（我称它们为“*公共”*网址）。对于匿名用户，我们也使用 Session 来存储关键数据（例如，通过一些 ID 识别匿名用户等）。无论当前用户是否经过身份验证（登录）`LayoutView`，这些“*公共*”操作的设置都会被设置。如果他们通过了身份验证，那么整个`childView`（由“*公共*”操作显示）被嵌入到一个主布局页面中，该页面为登录用户显示菜单等。匿名用户没有菜单，只有纯`childview`页面。

我的问题：

*   如果登录用户超时，并尝试访问上述*公共*-url，则该页面会将他作为未登录用户（因此作为匿名用户）处理，因此在她访问新 url 之前，她会看到已登录的-in 界面，点击后会出现一个匿名界面，可能会吓到她！我无法将她重定向到 /Account/Logon/RedirectUrI=whatever，因为她访问的 url 对未登录的用户也有效。

我能想到的唯一解决方案是引入另一个控制器/动作，它们调用与当前相同的 BLL 逻辑，但具有`[AuthorizedAttribute]`它们。但我想避免这种情况，因为：

*   这有点重复代码
*   对于登录用户和匿名用户，公共页面的 url 会有所不同，我想保持它们相同，因此登录用户可以将 url 复制粘贴到他们喜欢的任何地方，以传播word，并且该 url 仍然能够处理匿名用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:51:57.563

当您想保留一个 URL 时，您必须对匿名用户和经过身份验证的用户使用相同的控制器/操作。

您的问题是，当会话超时时，经过身份验证的用户会转向匿名用户并生成一个新的（匿名）会话。

你可以做些什么来区分真正的匿名用户和有时经过身份验证但现在匿名的用户是向所有在你的应用程序中登录过一次的用户发送一个特殊的 cookie。

当此类经过身份验证的用户会话超时时，浏览器会将 cookie 发送到您的服务器，您可以将他重定向到登录页面。

真正的匿名用户浏览器不会发送该 cookie，因此您可以只显示该页面。

# magento - Magento - 客户尝试打印订单时出现异常'Invalid method Mage_Page_Block_Html::addAttribute'

> ID：14277547
> 
> 赞同：0
> 
> 时间：2013-01-11T11:46:19.057
> 
> 标签：magento

Magento 1.4

当客户尝试打印订单时，错误：

```
Invalid method Mage_Page_Block_Html::addAttribute(Array
(
    [0] => meta_description
)
) 
```

被抛出。

以及完整的堆栈跟踪：

```
#0 [internal function]: Varien_Object->__call('addAttribute', Array)
#1 /chroot/home/shopz/shopz.co.uk/html/app/code/core/Mage/Core/Model/Layout.php(347): Mage_Page_Block_Html->addAttribute('meta_descriptio...')
#2 /chroot/home/shopz/shopz.co.uk/html/app/code/core/Mage/Core/Model/Layout.php(213): Mage_Core_Model_Layout->_generateAction(Array, Array)
#3 /chroot/home/shopz/shopz.co.uk/html/app/code/core/Mage/Core/Model/Layout.php(205): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#4 /chroot/home/shopz/shopz.co.uk/html/app/code/core/Mage/Core/Controller/Varien/Action.php(343): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#5 /chroot/home/shopz/shopz.co.uk/html/app/code/core/Mage/Core/Controller/Varien/Action.php(270): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#6 /chroot/home/shopz/shopz.co.uk/html/app/code/local/Mage/Sales/controllers/OrderController.php(237): Mage_Core_Controller_Varien_Action->loadLayout()
#7 /chroot/home/shopz/shopz.co.uk/html/app/code/core/Mage/Core/Controller/Varien/Action.php(418): Mage_Sales_OrderController->printAction('print')
#8 /chroot/home/shopz/shopz.co.uk/html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(253): Mage_Core_Controller_Varien_Action->dispatch()
#9 /chroot/home//shopz/shopz.co.uk/html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match('print')
#10 /chroot/home//shopz/shopz.co.uk/html/app/code/core/Mage/Core/Model/App.php(304): Mage_Core_Controller_Varien_Front->dispatch(Object(Mage_Core_Controller_Request_Http))
#11 /chroot/home//shopz/shopz.co.ukhtml/app/Mage.php(596): Mage_Core_Model_App->run()
#12 /chroot/home//shopz/shopz.co.uk/html/index.php(80): Mage::run(Array) 
```

翻阅' `/app/code/core/Mage/Core/Model/Layout.php`'看来该块对销售发票无效。模板文件中的一切似乎都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:42:48.833

如果有任何对 addAttribute 方法的引用，最好检查 page.xml 文件。它可能看起来像：

```
<action method="addAttribute" ... 
```

删除不必要的电话应该会有所帮助。

# html - 以某个角度遮盖图像

> ID：14277548
> 
> 赞同：1
> 
> 时间：2013-01-11T11:46:19.760
> 
> 标签：html, css, mask, clip

我正在制作一个带有倾斜元素的手风琴，我已经让手风琴功能正常工作，但我正在努力创造倾斜效果，我有一个[jsfiddle](http://jsfiddle.net/aMhcY/1/)

这也是我的代码，

```
<div id="accordion">
  <div class="set" id="first" data-width="261">
      <div class="accord">
        <img src="http://placekitten.com/872/690" />
      </div>
  </div>
  <div class="set active" id="second" data-width="106">
    <div class="accord">
        <img src="http://placekitten.com/872/690" />
    </div>
  </div>
  <div class="set" id="third" data-width="113">
    <div class="accord">
        <img src="http://placekitten.com/872/690" />
    </div>
  </div>
  <div class="set" id="fourth" data-width="71">
    <div class="accord">
        <img src="http://placekitten.com/872/690" />
    </div>
  </div>
  <div class="set" id="fifth" data-width="24">
    <div class="accord">
        <img src="http://placekitten.com/872/690" />
    </div>
  </div>
  <div class="set" id="sixth" data-width="89">
    <div class="accord">
        <img src="http://placekitten.com/872/690" />
    </div>
  </div>
</div> 
```

```
 *, html { padding:0; margin:0; }
    #accordion { white-space:nowrap;background:black; width:2000px; height:690px; }
    .set { white-space:normal; display:inline-block; position:relative; overflow:hidden; }
    .active { width:872px; }
    #first { width:261px; }
    #third { width:113px; }
    #fourth { width:71px; }
    #fifth { width:24px; }
    #sixth { width:89px; }

    .set:after {
      width:15px;
      height:15px;
      display:block;
      background:red;
      position:absolute;
      top:0px;
      right:0px;
      content:"";
    }

    .set:before { 
       width:1px;
       background:red;
       display:block;
       position:absolute;
       height:100%;
       -webkit-transform:rotate(9deg);
       content: " ";
       top:0px;
       right:68px;
    } 
```

```
$("#accordion .set").click(function() {
  var active = $(this).parent().find(".active");
  active.animate({"width" : active.data('width')}, 1000);
  active.removeClass("active");
  $(this).animate({"width" : 872}, 1000);
  $(this).addClass("active");
}); 
```

我想做的是掩盖红色斜线之后的所有内容，到目前为止我已经尝试过“剪辑”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:46:00.693

倾斜图像的父级，然后取消倾斜（倾斜相反的角度）图像。就像是

```
.set { transform: skewX(-10deg); }
.set img { transform: skewX(10deg); } 
```

***备注***：

*   确保图像有`display: block`（或`inline-block`），否则转换将不起作用。
*   [`transform``-webkit-`WebKit 浏览器需要前缀`-ms-` ，IE9需要前缀](http://caniuse.com/#feat=transforms2d)
*   我认为你可以简化你的标记——我不确定你为什么需要`.accord`图像的包装器。

# .net - long.GetHashCode 是可靠的跨环境

> ID：14277550
> 
> 赞同：2
> 
> 时间：2013-01-11T11:46:27.420
> 
> 标签：.net, gethashcode

`long.GetHashCode()`在不同的 .NET Framework 版本、操作系统版本、处理器架构等之间，产生的值是否可靠地相同？

该问题基于[其他问题，这些问题提到了不同服务器上的不同结果](https://stackoverflow.com/questions/6114772/gethashcode-gives-different-results-on-different-servers)。

```
// Will I be the same everywhere?
var hash = 2170881568869167279.GetHashCode(); 
```

**奖励**：`int`和 也一样`uint`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:49:22.030

根据 的合同`GetHashCode`，甚至不需要在同一台机器上的两个不同进程中相同：

> 此方法的默认实现不得用作散列目的的唯一对象标识符。

对于某些类型，它可能 - 并且可能 - 以始终返回相同哈希码的方式实现，即使在不同的机器上也是如此。但这是一个你不应该依赖的实现细节*——*它可能会在没有通知的情况下改变。

此外，两个不同的对象可以合法地具有相同的哈希码。在您的示例中`long`，平均而言，当您为从to`long.MaxValue / int.MaxValue`的所有值创建哈希码时，您将拥有每个哈希码时间。`long.MinValue``long.Maxvalue`

**结论：**
不，这不是识别对象实例的可靠方法。

在处理数字时，您可以简单地使用数字本身或使用真正的散列算法。

# java - 是否有命令行 javadoc 查询工具？

> ID：14277553
> 
> 赞同：2
> 
> 时间：2013-01-11T11:46:43.483
> 
> 标签：java, command-line, javadoc

我想提高我在 emacs 中的自动完成能力，以包括 javadoc 支持。假设我有所有东西的源 jar，有没有可以用来查询 javadoc 数据的源 jar 的工具？输出格式不太重要，因为它可能会被稍微调整一下。

所以该工具的输入是一个类路径和一个类名，以及一些选项，就像`javap`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:33:42.797

如果vim可以做到，你会去吗？:P

经过快速搜索，我发现 javaDoc 使用 Doclet 生成 html javadocs。

Doclet 的包信息：

> Doclet API（也称为 Javadoc API）为客户端提供了一种检查程序和库的源代码级结构的机制，包括嵌入在源代码中的 javadoc 注释。

您可以查看 Doclet api 了解详细信息。恐怕您必须编写自己的命令行工具（java 程序）才能获取 javadoc 注释。

文档 API：

[http://java.sun.com/j2se/1.5.0/docs/guide/javadoc/doclet/spec/index.html](http://java.sun.com/j2se/1.5.0/docs/guide/javadoc/doclet/spec/index.html)

Taglet API 你可能也想看看。

> Taglet API 是为自定义格式化 Javadoc 标签文本而提供的接口。

[http://java.sun.com/j2se/1.5/docs/guide/javadoc/taglet/spec/com/sun/tools/doclets/Taglet.html](http://java.sun.com/j2se/1.5/docs/guide/javadoc/taglet/spec/com/sun/tools/doclets/Taglet.html)

只是好奇，你想做自动完成，为什么需要 javaDoc？我以为你需要java源代码的标签。好吧，我不是emacs用户，如果这是一个愚蠢的问题，请忽略它。

# java - 从 Content 类型中获取文件扩展名

> ID：14277554
> 
> 赞同：1
> 
> 时间：2013-01-11T11:46:46.153
> 
> 标签：java, servlets, content-type

我从标题中获取内容类型，我需要获取此内容类型的扩展名。

例如：内容类型是`application/java-archive`然后我想要一个字符串输出为`jar`.

# jquery - IE 中的 jQuery Portlet/Sortable Flickers Screen（选中 8,9）

> ID：14277562
> 
> 赞同：0
> 
> 时间：2013-01-11T11:47:25.727
> 
> 标签：jquery, css, jquery-ui, jquery-ui-sortable

我的代码中有 jQuery UI portlet，它可以根据要求在所有其他浏览器中运行良好，但是在 IE 中，当我开始拖动任何 portlet 时，它会在整个屏幕上闪烁。任何解决方案或任何建议？？？

我从 jQuery 论坛 [http://bugs.jqueryui.com/ticket/7351找到了这个](http://bugs.jqueryui.com/ticket/7351)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:14:02.200

我自己的 portlet 风格的实现似乎在 IE9 以及 IE8 模式下的 IE9 中工作（手边没有本机 IE8）。

我也有闪烁，但即使在 Chrome 和 Firefox 中也是如此。我只是不断地挑选 CSS 并打开和关闭各种属性。最终，我发现我应用了一个类，使我的“portlet”采用绝对定位，而 jQuery UI 交互不喜欢那样。最好的猜测是 CSS 绝对定位和通过拖动应用的绝对定位之间的冲突导致它在原始位置和新位置之间来回跳跃。更糟糕的是，我无法可靠地定位在可分类容器的顶部或底部。

底线：我摆脱了 portlet 上的绝对定位（只要父级相对定位，portlet 内容仍然可以具有绝对定位）并且所有目标浏览器的一切工作顺利。

# string - 如何在powershell中替换字符串？

> ID：14277563
> 
> 赞同：1
> 
> 时间：2013-01-11T11:47:26.657
> 
> 标签：string, powershell, replace

我需要从文件路径中提取文件扩展名。例如：我有一个文件路径，如：

```
\\Test\data\data.dll 
```

如何从文件路径中删除data.dll，这样我只得到

```
\\Test\data\ 
```

作为输出。

我尝试使用通配符 - *. 但这没有用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:04:47.813

在您的情况下，有一个特殊的 cmdlet，默认情况下会在最后删除文件或文件夹。尝试：

```
$path =  \\test\data\data.dll
#Get folderpath    
Split-Path $path
#Get filename only (thanks to Christian for tip)
Split-Path $path -Leaf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:24:38.543

这里有 2 种不同的方法。一种是使用拆分路径。另一种是使用 -replace 与正则表达式。它们都在 PowerShell V3 中运行良好，但如果路径中有驱动器号，但拆分路径在 V2 中不起作用，但您的系统没有该驱动器号。

```
#Get Folder
Split-Path '\\test\data\data.dll'
'\\test\data\data.dll' -replace '\\[^\\]+$'

#Get File 
Split-Path '\\test\data\data.dll' -Leaf
'\\test\data\data.dll' -replace '^\\.*\\' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:43:39.363

只是为了解决@StephenMills 在他的回答中告诉的问题的解决方法添加我的 2 美分：

```
PS C:\ps> ( [system.io.fileinfo]"J:\data\data.dll" ).FullName
J:\data\data.dll
PS C:\ps> ( [system.io.fileinfo]"J:\data\data.dll" ).BaseName
data
PS C:\ps> ( [system.io.fileinfo]"J:\data\data.dll" ).name
data.dll
PS C:\ps> ( [system.io.fileinfo]"J:\data\data.dll" ).DirectoryName
J:\data 
```

# batch-file - 一个批处理文件如何获取另一个批处理文件的退出代码？

> ID：14277566
> 
> 赞同：11
> 
> 时间：2013-01-11T11:47:31.687
> 
> 标签：batch-file, windows-xp

我有两个批处理文件，`task.bat`和`runtask.bat`. `runtask.bat`调用`task.bat`和我想将退出`runtask.bat`代码`task.bat`放入变量中。怎么可能做到这一点？

**任务.bat：**

```
@echo off
set errorlevel=1 
```

**运行任务.bat**

```
...
CMD /C task.bat
set taskexitcode=???? 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T13:19:14.010

换个`CMD /C`就行`call`。

***任务.bat：***

```
@echo off
set errorlevel=15 
```

***运行任务.bat***

```
call task.bat
set taskexitcode=%errorlevel%
echo %taskexitcode% 
```

***输出***

```
15 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-17T20:52:19.190

我在 Teamcity 管道中有一个批处理脚本，在它的子脚本使用代码 1 退出后它没有退出。

为了解决这个问题，我`IF %ERRORLEVEL% NEQ 0 EXIT 1`在子脚本调用之后添加了这个字符串。

**主脚本.bat**

```
...some code
call child-script.bat
IF %ERRORLEVEL% NEQ 0 EXIT 1
...some code 
```

子脚本调用后，退出结果保存到`%ERRORLEVEL%`. 如果它确实以错误退出，则该值将不等于 0。所以我们检查这一点，如果是这种情况，我们以代码 1（错误）退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T00:31:25.633

接受的答案是正确的，但如果您正在使用`call`调用另一个批处理脚本，并且第二个批处理脚本正在使用`SetLocal`，您可能需要使用解析技巧来完成此操作。如果您遇到这种情况，请在您的之前添加以下代码`exit b`：

```
ENDLOCAL&set myvariable=%myvariable% 
```

现在 的值`myvariable`可用于调用上下文，您可以在其他脚本中看到该值。

参考资料：
[https ://stackoverflow.com/a/16167938/89590](https://stackoverflow.com/a/16167938/89590)
[http://www.borngeek.com/2008/05/22/exiting-batch-file-contexts/](http://www.borngeek.com/2008/05/22/exiting-batch-file-contexts/)

# android - 获取与 imageView 的大小完全相同的可绘制对象，以用作占位符

> ID：14277569
> 
> 赞同：0
> 
> 时间：2013-01-11T11:47:34.837
> 
> 标签：android, drawable, universal-image-loader

我正在使用通用图像视图将图像加载到我的应用程序中。

这是我实施的方法

```
public static void setBitmapToAImageviewUIL(final ImageView imageView, String uriPath, String imageName)
{
  if(imageName != null && !imageName.equals(""))
  {
     //We use the local image as a temporary placeholder
     DisplayImageOptions options = new DisplayImageOptions.Builder()
           .showStubImage(Utilities.getDrawableResource(imageName))
           .cacheOnDisc()
           .cacheInMemory()
           .imageScaleType(ImageScaleType.EXACTLY)
           .bitmapConfig(Bitmap.Config.ARGB_8888)
           .build();

     imageLoader.displayImage(uriPath, imageView, options);
  } 
```

}

逻辑是这样的：我在drawables中有一些图像。首先，我使用本地可绘制对象作为占位符（showStubImage）。`Utilities.getDrawableResource()`重新运行可绘制对象。然后下载完成后会显示从服务器下载的图片。

**我的问题**

用作占位符的临时图像大于从服务器下载的图像。所以起初图像很大，然后当新图像完成下载时它会缩小。如何使它们都与 imageView 的大小完全相同？

我试图避免手动调整代码大小以使它们具有相同的大小。谢谢

PS：获得正确drawable的`Utilities.getDrawableResource()`用途。`getResource().getIdentifier()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:53:18.860

有几种不同的方法，具体取决于您想要实现的目标以及您预先掌握的信息量。

一种方法是将您的图像视图设置为您的 XML（例如`width:match_parent` `height:144dp`）上的确切大小，并让服务器和您的可绘制在其中缩放。

如果您在下载之前可以访问图像服务器的大小，则可以将 imageView 布局参数设置为那些确切的值，并让可绘制对象调整为该值（并且服务器将完全适合）

我认为您可以使用 XML shape drawables 和/或 9patch 使其缩放得更好，但您仍然需要上述两种方法之一。

# sql-server - 需要帮助使用 TSQL 创建查询

> ID：14277571
> 
> 赞同：-1
> 
> 时间：2013-01-11T11:47:41.633
> 
> 标签：sql-server, database, tsql

我有一个具有以下结构和数据的表：

```
ID_A | ID_B
 A      1
 A      2
 B      1
 B      2
 C      1
 C      3
 D      1
 D      2
 D      3 
```

我需要找到给 A id 存在的不同 B 集。在示例中，结果将是：

1.  1,2
2.  1,3
3.  1,2,3

如果我也能得到计数那就太好了：

1.  1,2 [2]
2.  1,3 [1]
3.  1,2,3 [1]

我希望这个问题足够清楚。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:56:38.633

[SQL小提琴](http://sqlfiddle.com/#!6/8d2bc/1)

**MS SQL Server 2012 架构设置**：

```
create table YourTable
(
  ID_A char(1),
  ID_B int
)

insert into YourTable values
( 'A',      1),
( 'A',      2),
( 'B',      1),
( 'B',      2),
( 'C',      1),
( 'C',      3),
( 'D',      1),
( 'D',      2),
( 'D',      3) 
```

**查询 1**：

```
select T.ID_B,
       count(*) as C
from
  (
  select T1.ID_A,
         (
         select ','+cast(T2.ID_B as varchar(10))
         from YourTable as T2
         where T2.ID_A = T1.ID_A
         order by T2.ID_B
         for xml path(''), type
         ).value('substring(text()[1], 2)', 'varchar(max)') as ID_B
  from YourTable as T1
  group by T1.ID_A
  ) as T
group by T.ID_B 
```

**[结果](http://sqlfiddle.com/#!6/8d2bc/1/0)**：

```
|  ID_B | C |
-------------
|   1,2 | 2 |
| 1,2,3 | 1 |
|   1,3 | 1 | 
```

# jquery - Jquery 验证 addMethod 以覆盖 url 字段的默认值

> ID：14277572
> 
> 赞同：0
> 
> 时间：2013-01-11T11:47:41.710
> 
> 标签：jquery, validation

我想在 url 输入字段上关闭 Jquery 的验证 -[示例在这里](http://webconsultant.co.nz/question/form-validation.html)

我添加了一个在文本字段和 url 字段上调用的方法，但结果不同。Jquery 对 url 字段的验证胜过我的，但我不希望`http://`在我收集的 URL 中。

有没有办法让我的接管？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:04:12.910

您可以覆盖 jquery validate 的默认 url 验证，例如：

```
jQuery.validator.methods.url = function(value, element) {
    return this.optional(element) || true;
}; 
```

然后添加您的自定义 url 验证方法：

```
jQuery.validator.addMethod("isurl",function(value,element) {
  return this.optional(element) 
     || /^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(value); 
},"Proper URL, please"); 
```

# postgresql - Npgsql 错误 42601

> ID：14277582
> 
> 赞同：0
> 
> 时间：2013-01-11T11:48:03.083
> 
> 标签：postgresql, plpgsql, npgsql

我用一个输入参数在 postgresql 中编写了一个函数。我想从 .Net windows Form 调用此函数，但出现如下错误： **错误：42601：语法错误在 »'TestUGI'«** 这是我的代码：

```
Npgsql.NpgsqlConnection conn = new NpgsqlConnection("Server=127.0.0.1;Port=5432;Database=DB3;User Id=postgres;Password=123456;");
            conn.Open();
            NpgsqlCommand cmd = new NpgsqlCommand("'TestUGI'",conn);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@tablename", "'csnnutzer'");
            cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:02:08.503

要调用函数，请使用

```
select TestUGI('csnnutzer'); 
```

您不能在 PostgreSQL 中“只调用”一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:10:33.923

去掉单引号：

```
NpgsqlCommand cmd = new NpgsqlCommand("TestUGI",conn);
...
cmd.Parameters.AddWithValue("@tablename", "csnnutzer"); 
```

在 ADO.Net 中，您必须传递参数类型：

```
cmd.Parameters.Add("@tablename", SqlDbType.VarChar, 16); 
```

尝试找到如何做到这一点`NpgSQL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:58:33.087

请显示功能。那会有很大帮助。例如，如果函数返回一条记录，那么您是否应该进行不同类型的调用。

错误 42883 指出该函数未定义。这有一个直截了当的原因。如果您显示代码，我们可以帮助您找出答案。参数未知不是问题。当我读到它时，我知道有没有指定长度的文本或 varchar。

大小写是否正确？'testUGI' 和 'TestUgi' 的功能是不同的。

当函数没有返回记录时，您是否应该只进行查询。它不像 MySQL 中的存储过程，它有自己的语法（调用等）。在 postgresql 中调用一个函数是一个 select 语句。

一些例子：

```
select func();
select * from func();
select * from func() as (id int, name varchar); 
```

第一个函数可以返回一个简单的数据类型，如整数或 varchar。当有一行表返回时的第二条语句。返回记录时的最后一个。

# jquery - Mouseleave 函数覆盖了 JQuery 的点击函数

> ID：14277584
> 
> 赞同：1
> 
> 时间：2013-01-11T11:48:04.970
> 
> 标签：jquery, onclick, hover

我的代码中的 mouseleave 函数会覆盖 click 函数。我想要做什么：如果选择了图像（不透明度 1.0），那么悬停功能是否应该仅适用于其他 2 个元素（而不适用于所选元素）。

这是我的html

```
<div id="hover"><img src="http://www.franz-sales-verlag.de/fsvwiki/uploads/Lexikon/Baum.jpg" width="100px;" /></div>

<div id="hover1"><img src="http://www.franz-sales-verlag.de/fsvwiki/uploads/Lexikon/Baum.jpg" width="100px;"/></div>

<div id="hover2"><img src="http://www.franz-sales-verlag.de/fsvwiki/uploads/Lexikon/Baum.jpg" width="100px;"/></div> 
```

我的jQuery

```
$("#hover").mouseover(function(){
        $("#hover").fadeTo(100, 1.0);
});

$("#hover").mouseleave(function(){
    $("#hover").fadeTo(100, 0.7);
});

$("#hover1").mouseover(function(){
    $("#hover1").fadeTo(100, 1.0);
});

$("#hover1").mouseleave(function(){
    $("#hover1").fadeTo(100, 0.7);
});

$("#hover2").mouseover(function(){
    $("#hover2").fadeTo(100, 1.0);
});

$("#hover2").mouseleave(function(){
    $("#hover2").fadeTo(100, 0.7);
});

$("#hover").click(function(){
        $("#hover").fadeTo(100, 1.0);
    $("#hover1").fadeTo(100, 0.7);
    $("#hover1").fadeTo(100, 0.7);
});

$("#hover1").click(function(){
    $("#hover1").fadeTo(100, 1.0);
    $("#hover").fadeTo(100, 0.7);
    $("#hover2").fadeTo(100, 0.7);
});

$("#hover2").click(function(){
    $("#hover2").fadeTo(100, 1.0);
    $("#hover").fadeTo(100, 0.7);
    $("#hover1").fadeTo(100, 0.7);
}); 
```

这是一个 jsfiddle： [我的 jsfiddle](http://jsfiddle.net/DSteinel/3QLC6/)

我希望有一个人可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:06:44.920

我为你做了一些代码重构。

```
<div class="hover-img"><img src="http://www.franz-sales-verlag.de/fsvwiki/uploads/Lexikon/Baum.jpg" width="100px;" />hover</div>
<div class="hover-img"><img src="http://www.franz-sales-verlag.de/fsvwiki/uploads/Lexikon/Baum.jpg" width="100px;"/>hover1</div>
<div class="hover-img"><img src="http://www.franz-sales-verlag.de/fsvwiki/uploads/Lexikon/Baum.jpg" width="100px;"/>hover2</div> 
```

和简单的代码：

```
//select all image containers
var hoverContainers = $('.hover-img');
//initial fade out
hoverContainers.css('opacity', 0.7);
//mouseover and mouseleave binding
hoverContainers.hover(
  //mouseover
  function(){    
    $(this).fadeTo(100, 1);
  },
  //mouseleave
  function(){
    //check if you image has 'selected' class
    if (!$(this).is('.selected'))
      //if no fade out
      $(this).fadeTo(100, 0.7);
  }
);
//add 'selected' class on click
hoverContainers.click(function(){
  //remove 'selected' class from previously selected image
  hoverContainers.filter('.selected').removeClass('selected').fadeTo(100, 0.7);
  //mark clicked image with 'selected' class
  $(this).addClass('selected');
}); 
```

[jsfiddle](http://jsfiddle.net/3QLC6//)与代码

最好的祝福

**编辑** 我忘了淡出以前选择的图像。

```
//add 'selected' class on click
hoverContainers.click(function(){
  //remove 'selected' class from previously selected image
  hoverContainers.filter('.selected').removeClass('selected').fadeTo(100, 0.7);
  //mark clicked image with 'selected' class
  $(this).addClass('selected');
}); 
```

以下代码将发挥作用： hoverContainers.filter('.selected').removeClass('selected').fadeTo(100, 0.7);

测试更新版本：http: [//jsfiddle.net/3QLC6/7/](http://jsfiddle.net/3QLC6/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:18:08.627

看到这个[http://jsfiddle.net/3QLC6/5/](http://jsfiddle.net/3QLC6/5/)

```
$("#hover1,#hover2").fadeTo(100, 0.7);

$("#hover, #hover1, #hover2").mouseover(function () {
   $(this).fadeTo(100, 1.0);
});

$("#hover,#hover1,#hover2").mouseleave(function () {
  if (!$(this).hasClass('selected')) {$(this).fadeTo(100, 0.7)};
});

$("#hover,#hover1,#hover2").click(function () {
  $(this).addClass('selected').fadeTo(100, 1.0).siblings('.selected').removeClass('selected').fadeTo(100, 0.7);
}); 
```

另请参阅类用法更新：http: [//jsfiddle.net/3QLC6/6/](http://jsfiddle.net/3QLC6/6/)

# vb.net - 在列表框 vb.net 中查找部分文本

> ID：14277588
> 
> 赞同：-1
> 
> 时间：2013-01-11T11:48:11.930
> 
> 标签：vb.net, listbox

有些人给我代码来在列表框中查找文本/值，但是，不像我需要的那样。他们共享的是一些代码来查找列表框中的确切文本/值，但我需要一些代码来查找列表框中的值/文本的一部分。所以，当我输入值/文本的一部分时，它会找到它。这就是发生的事情，我有一个包含这些项目的列表框：

1.  数据1
2.  数据2

我需要的是当我在搜索字段（即richtextbox）中键入（2）时，它会找到并选择它。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:53:22.673

你能用[VB.NET的`Contains`功能吗](http://www.dotnetperls.com/contains-vbnet)

# azure - 什么云提供商用于实现简单的并行算法？

> ID：14277589
> 
> 赞同：0
> 
> 时间：2013-01-11T11:48:21.193
> 
> 标签：azure, indexing, cloud, bigdata, inverted-index

我有一个任务：加快[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)的当前实施。在我看来，最好的方法是在云中运行它：

1.  将输入文本划分为几个部分（或者只是抓取几个不同的文本文件）
2.  向节点发送文本
3.  针对不同的输入数据在每个节点上运行算法
4.  收集结果并合并它们

我的问题是：实现它的最简单方法是什么？

我目前的想法是：

*   具有工作角色的 Windows Azure - 是否可以将不同的数据发送到节点并稍后合并它们？
*   Windows Azure 和 HPC 调度程序 - 对于这样的任务来说是不是太强大了？我害怕配置和成本（新节点 = 新工人角色？）
*   使用任何其他云，例如 Amazon 或 Google - 我想用 c# 编写代码，并且我熟悉 Microsoft 技术，所以我有点害怕它们

请给我任何建议你将如何实现这个目标，我是云计算的新手（虽然我有一些基础知识，比如 mpi、soa、cuda、azure 基础知识）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:31:57.237

这是[MapReduce](http://en.wikipedia.org/wiki/MapReduce)的情况。

事实上，[Hadoop](http://hadoop.apache.org/)是出于[Nutch](http://nutch.apache.org/)（它做倒排索引）的需要而创建的

您可以使用：

a)[亚马逊的 Elastic MapReduce](http://aws.amazon.com/elasticmapreduce/)

或者

b)[在 Azure 上注册 HDInsights](https://www.hadooponazure.com/)

还有其他提供商（[picloud](http://www.picloud.com/)是我想到的）

# perl - END 函数中的清理

> ID：14277591
> 
> 赞同：1
> 
> 时间：2013-01-11T11:48:42.333
> 
> 标签：perl

我的 perl 脚本使用了一个 END 函数，它取消了一些临时文件的链接。有时脚本会被用户中断或挂起，而临时文件不会被删除。

在 perl 中处理这个问题的程序是什么？除非脚本完全运行或执行退出或死机，否则 end 函数不起作用。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T11:53:42.387

这里有两个方面。第一个是如果您的程序或多或少干净地完成，则清理临时文件。为此，您不必重新发明轮子，只需使用核心模块[File::Temp](https://metacpan.org/module/File::Temp)。它可以做很多事情，它的好处之一是当变量被垃圾回收时它会删除临时文件。

另一方面是如果发生真正的程序崩溃（例如`kill -9`）。在这种情况下，您的程序无法自行处理清理工作。您必须依靠操作系统来为您执行此操作。`/tmp`例如，几个 Linux 发行版会`/var/tmp`定期清理。您还可以为您编写一个帮助您的 cron 作业。

`/tmp`但是请注意，并非所有 Linux 发行版都在(或`/var/tmp`)中进行清理。其他人只在启动过程中这样做。在机器运行时这样做有潜在的危险（程序仍在使用的文件可能会被意外删除）。有像[tmpreaper](http://www.ubuntugeek.com/tmpreaper-cleans-up-files-in-directories-based-on-their-age.html)这样的工具可以帮助你。

如果您想要一种相当简单的方法，那么我建议您既不使用`/tmp`也不使用`/var/tmp`其中一个下的自己的子目录，并使用诸如`tmpreaper`清理该目录之类的工具。这样，您可以适度确定只有程序的临时文件（而不是其他程序的临时文件）受到清理的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:57:35.980

`END {}`块仅在 Perl 本身决定退出时运行。如果它由于 a `SIGTERM`or退出`SIGINT`（因为有人在终端上按下`Ctrl+C`），那么该块将不会运行。

无论如何，您都可以捕捉到这两个信号`exit`，从而导致 Perl 处理它。您可以安装信号处理程序：

```
$SIG{TERM} = $SIG{INT} = sub { exit 1 }; 
```

对于死亡，你无能为力，`SIGKILL`但这种情况应该很少见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:23:50.443

在 unix 系统上，如果文件在被删除之前打开，您仍然可以在文件被删除后使用该文件。如果您实际上并不需要文件名（或者如果您可以调整代码以便不需要），这是最可靠的解决方案。[File::Temp](http://search.cpan.org/perldoc?File%3a%3aTemp)的一些功能会为您预先删除临时文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T12:12:31.070

如果真正的程序中断发生（例如 kill -9 或 Ctrl+C），您可以指定您的程序应该如何处理它。

[在此处](http://perldoc.perl.org/perlvar.html)搜索 %SIG ，您会找到一个示例。

# java - Java ReplaceAll 在这里对我没有帮助

> ID：14277601
> 
> 赞同：0
> 
> 时间：2013-01-11T11:49:15.403
> 
> 标签：java, regex, replace

我这里有一个字符串，

```
String message = "hi test message >< abcd < pqr <variable> xyz <tag> testing <>"; 
```

我想用它来替换所有东西`<>` `<tag>` `<anything>`，`(.*)`因为我正在尝试用它构建一个正则表达式。

我尝试了以下，

```
message = message.replaceAll("<(.*)>", "(.*)"); 
```

但结果是

```
hi test message >(.*) 
```

我期待的结果是这样的

```
hi test message >< abcd < pqr (.*) xyz (.*) testing (.*) 
```

谁能帮我实现这个结果？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:51:05.027

要捕获标记内容，请尝试使用此正则表达式（假设它们从未嵌套）：

```
<([^<>])*> 
```

请注意，这将完全忽略测试字符串的这一部分：

```
< abcd < pqr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:52:09.230

使用以下正则表达式删除所有类型的标签。

```
@"(?></?\w+)(?>(?:[^>'""]+|'[^']*'|""[^""]*"")*)|(?>(?:[>'""]+|'[^']*'|""[^""]*"")*)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:51:11.913

如果您真的只想替换`<>`, `<tag>`，`<anything>`而不是其他任何东西，请尝试：

```
<(tag|anything)?> 
```

如果要匹配所有包含的标签，包括空标签：

```
<[^<>]*> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:55:59.573

您可以使用此正则表达式

```
"<(|tag|anything)>" 
```

# java - 为类类型创建 Java 代理实例？

> ID：14277608
> 
> 赞同：8
> 
> 时间：2013-01-11T11:49:54.123
> 
> 标签：java, easymock, proxy-classes

我有以下代码可用于为实现支持的接口类型创建 Proxy 实例`InvocationHandler`，但是当我使用具体的类类型时，它不起作用，这是众所周知的，并记录在[Proxy.newProxyInstance](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html#newProxyInstance%28java.lang.ClassLoader,%20java.lang.Class%5B%5D,%20java.lang.reflect.InvocationHandler%29)中：

```
 // NOTE: does not work because SomeConcreteClass is not an interface type
    final ClassLoader myClassLoader = SomeConcreteClass.getClassLoader();
    SomeConcreteClass myProxy = (SomeConcreteClass) Proxy.newProxyInstance(myClassLoader, new Class[] {
        SomeConcreteClass.class }, new InvocationHandler() { /* TODO */ }); 
```

但是，如果我没记错的话，我已经在一些模拟框架中看到了这个用例，在这些框架中可以模拟一个具体的类类型，例如[EasyMock](http://www.easymock.org/)。在检查他们的源代码之前，任何人都可以指出需要做什么来代理具体的类类型而不仅仅是接口？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T11:52:42.037

JDK 动态代理仅适用于接口。如果要创建具有具体超类的代理，则需要改用[CGLIB](http://cglib.sourceforge.net/)之类的东西。

```
Enhancer e = new Enhancer();
e.setClassLoader(myClassLoader);
e.setSuperclass(SomeConcreteClass.class);
e.setCallback(new MethodInterceptor() {
  public Object intercept(Object obj, Method method, Object[] args,
        MethodProxy proxy) throws Throwable {
    return proxy.invokeSuper(obj, args);
  }
});
// create proxy using SomeConcreteClass() no-arg constructor
SomeConcreteClass myProxy = (SomeConcreteClass)e.create();
// create proxy using SomeConcreteClass(String) constructor
SomeConcreteClass myProxy2 = (SomeConcreteClass)e.create(
    new Class<?>[] {String.class},
    new Object[] { "hello" }); 
```

# linux - 识别当前未写入的文件

> ID：14277610
> 
> 赞同：1
> 
> 时间：2013-01-11T11:49:56.790
> 
> 标签：linux, ubuntu

我想在 Ubuntu 操作系统中将一些日志文件从一个文件夹传输到另一个文件夹。

我的问题是我如何理解已写入日志文件并且不再对其进行写入？

有什么命令可以帮助识别吗？

其实我想通过一个shell脚本来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:56:50.707

`fuser`- 使用文件或套接字识别进程

也可能`inotify`会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:53:31.340

[lsof](http://linux.about.com/library/cmd/blcmdl8_lsof.htm)命令可以帮助您识别是否有任何进程正在使用某个文件。

举个简单的例子，我在我的主文件夹中创建了一个测试文件，并跟踪它。这是该文件的 lsof 输出：

```
hovanessyan@workstation:~$ lsof /home/hovanessyan/test
COMMAND   PID        USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME
tail    16858 hovanessyan    3r   REG    8,1      200 43785764 /home/hovanessyan/test 
```

您可以看到正在使用该文件的命令、pid 等。

这里有一些更详细和复杂的例子： [一](http://www.lainoox.com/lsof-list-open-files-linux-unix/)和[二](http://www.ibm.com/developerworks/aix/library/au-lsof.html)

# php - 在php中将DateInterval对象转换为秒

> ID：14277611
> 
> 赞同：20
> 
> 时间：2013-01-11T11:49:57.117
> 
> 标签：php, date, time, seconds

```
$datetime1 = date_create('2009-10-11');
$datetime2 = date_create('2009-10-13');
$interval = date_diff($datetime1, $datetime2); 
```

我如何`$interval`在php中将以上内容转换为秒

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-03-17T21:06:56.833

获取间隔中秒数的另一种方法是将其添加到零日期，并获取该日期的时间戳：

```
$seconds = date_create('@0')->add($interval)->getTimestamp(); 
```

此方法将或多或少正确地处理通过 DateInterval 构造函数创建的间隔，而[Shiplu 的答案](https://stackoverflow.com/a/14277647/638544)将忽略此类间隔的年、月和日。但是，shiplu 的答案对于通过减去两个日期创建的间隔更准确。对于仅包含小时、分钟和秒的时间间隔，两种方法都会得到正确的答案。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-11T11:52:03.200

有一个功能`format`。但它不会返回秒数。要获得秒数，您可以使用此技术

```
$seconds = abs($datetime1->getTimestamp()-$datetime2->getTimestamp()); 
```

如果你真的要使用`$interval`你需要计算它。

```
$seconds = $interval->days*86400 + $interval->h*3600 
           + $interval->i*60 + $interval->s; 
```

这里

*   `86400`是一天中的秒数
*   `3600`是一小时的秒数
*   `60`是一分钟的秒数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-09T15:42:59.020

我只会添加到[shiplu的答案：](https://stackoverflow.com/a/14277647/5361495)

```
function dateIntervalToSeconds($interval)
{
    $seconds = $interval->days*86400 + $interval->h*3600 
       + $interval->i*60 + $interval->s;
    return $interval->invert == 1 ? $seconds*(-1) : $seconds;
} 
```

处理负间隔。

请注意 - 与[Billiand 的回答](https://stackoverflow.com/a/22465402/5361495)相反- 上面的代码将正确考虑年份、月份和日期。因为 $interval->days 是一个绝对值（$interval->d 是相对于月份而言的）。

**编辑：**正如@Brilliand 所指出的，这个函数**仍然不正确。**一个反例是

```
new DateInterval('P4M3DT2H'); 
```

它不能很好地处理几个月。

# php - 使用 php 和 FQL 获取 facebook like count

> ID：14277613
> 
> 赞同：0
> 
> 时间：2013-01-11T11:49:59.193
> 
> 标签：php, xml, xml-parsing, facebook-fql

我想计算一个 URl 的 Facebook 总点赞数并将其保存在 mysql 中。

我使用 facebook FQL 来获取计数。

代码

```
https://api.facebook.com/method/fql.query?query=SELECT like_count FROM link_stat WHERE url="http://www.stackoverflow.com" 
```

此方法将返回一个包含以下内容的 xml 文件

```
<fql_query_response list="true"><link_stat><like_count>1548</like_count></link_stat></fql_query_response> 
```

我想知道的是如何只把喜欢的人当作刺痛。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:03:02.400

请尝试使用此[https://api.facebook.com/method/fql.query?query=SELECT](https://api.facebook.com/method/fql.query?query=SELECT) like_count FROM link_stat WHERE url="http://www.stackoverflow.com"&format=json 而不是您的。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:04:17.563

用于`preg_match_all`此

```
$string = '<fql_query_response list="true"><link_stat><like_count>1548</like_count></link_stat></fql_query_response>';

preg_match_all("/(?P<number>\d+)/", $string, $matches);

print_r($matches['number'][0]); 
```

注意：考虑到字符串中没有其他数字，如果需要更改 preg 匹配:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:09:48.917

如您了解 xml 的结构，您可以使用 SimpleXML。代码应如下所示：

```
$xml = simplexml_load_string($your_facebook_response);
$count = $xml->link_stat[0]->link_count[0]; 
```

# python - aifc 模块错误：Python 不会打开文件

> ID：14277629
> 
> 赞同：0
> 
> 时间：2013-01-11T11:51:14.113
> 
> 标签：python, readfile

我刚刚开始使用 python，所以请多多包涵；）

在遵循基本教程时，我在打开文件时遇到了问题，这是回溯：

```
File "/home/nick/Dropbox/workspace/pytest/schlange.py", line 55, in <module>
        f=open("file.csv","r")   
File "/usr/lib/python2.6/aifc.py", line 922, in open
        return Aifc_read(f)   
File "/usr/lib/python2.6/aifc.py", line 335, in __init__
        self.initfp(f)   
File "/usr/lib/python2.6/aifc.py", line 288, in initfp
        raise Error, 'file does not start with FORM id' 
aifc.Error: file does not start with FORM id 
```

这是否意味着我的 python 安装中的“aifc.py”被破坏了，或者我错过了一些重要的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:54:10.090

您已经决定从 导入`*`，`aifc`它`open()`已经覆盖了内置的`open()`. 这就是我们不导入的原因`*`。而是导入模块本身，并在需要时使用引用来获取其名称，例如`aifc.open()`.

# xna - 着色器执行在像素着色器之前在顶点着色器中停止

> ID：14277634
> 
> 赞同：1
> 
> 时间：2013-01-11T11:51:27.833
> 
> 标签：xna, shader

我试图从灯光的角度将模型的深度信息存储在 XNA 中。该模型使用普通着色器渲染良好。

这是着色器代码

```
float4x4 xShadowMapLight;

///DEPTH MAP

float4 RenderShadowMapPS( VS_SHADOW_OUTPUT In ) : COLOR
{ 

    return float4(1,0,0,0); //In.Depth.x,In.Depth.x,In.Depth.x,0);
}

VS_SHADOW_OUTPUT RenderShadowMapVS(float4 vPos: POSITION)
{
  VS_SHADOW_OUTPUT Out;

  Out.Position = mul(vPos, xShadowMapLight);

  Out.Depth.x = 1-(Out.Position.z/Out.Position.w);    
  return Out;
}

technique ToonShaderDepthMap
{

pass P0
{

    VertexShader = compile vs_2_0 RenderShadowMapVS(); 
    PixelShader = compile ps_2_0 RenderShadowMapPS();
}

} 
```

这就是我生成传递给着色器的光矩阵的方式。

```
Matrix view = Matrix.CreateLookAt(modelTransform.Translation, new Vector3(0, 500, 75), Vector3.Up);
Matrix projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, 1.0f, (float)globals.NEAR_PLANE, (float)globals.FAR_PLANE);
Matrix ShadowMapLight = modelTransform * view * projection; 
```

但显然我并不总是进入像素着色器，并且由于某种原因它停止在顶点中。（我已经修改了像素着色器以始终输出一个红色像素，所以我知道它什么时候通过）。

`xShadowMapLight`是`Matrix`包含从灯光的角度来看的所有变换。显然，`mul(vPos, xShadowMapLight);`如果我将矩阵更改为`Identity`着色器到达像素的矩阵，则问题出在原因上。

知道为什么会发生这种情况吗？

在此先感谢，沃尔弗里多。

# android - /dev 目录的 Android 权限被拒绝

> ID：14277639
> 
> 赞同：1
> 
> 时间：2013-01-11T11:51:36.330
> 
> 标签：android, linux, adb, android-4.2-jelly-bean

我需要能够从 Android 应用程序代码中读取/写入文件“/dev/block/mmcblk0”。但它不是读/写的。在这种情况下该怎么办？我用果冻豆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:37:42.903

您必须以 root 用户身份登录（root 设备）。

@用户1379574：

不，你不能。

那是一个系统目录，不是你的，你通常在这里无事可做......

如果你需要在这里做某事，你必须有权限去做（root）。

# c++ - OpenCV Mat数组访问，哪种方式最快，为什么？

> ID：14277643
> 
> 赞同：6
> 
> 时间：2013-01-11T11:51:49.283
> 
> 标签：c++, image, image-processing, opencv, mat

我想知道在 OpenCV 中访问 Mat 中数据的方式。如您所知，我们可以通过多种方式访问​​以获取数据。我想在 Mat 中存储图像（宽度 x 高度 x 1 深度）并循环访问图像中的每个像素。使用 ptr<>(irow) 获取行像素然后访问行中的每一列是最好的方法吗？还是使用 at<>(irow,jcol) 是最好的？还是使用 index = irow*Width + jrow 直接计算索引是最好的？任何人都知道原因。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:15:20.387

您可以在文档中找到信息：[基本图像容器](http://docs.opencv.org/doc/tutorials/core/mat_the_basic_image_container/mat_the_basic_image_container.html#matthebasicimagecontainer)和[如何扫描图像](http://docs.opencv.org/doc/tutorials/core/how_to_scan_images/how_to_scan_images.html?highlight=accessing%20element)。

如果您没有 OpenCV 或 C 语言类型的经验，我建议您使用`at`( [here ) 进行练习。](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=mat#mat-at)但最快的方法是`ptr`Nolwenn[的回答](https://stackoverflow.com/a/14277822/433685)，因为您避免了类型检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-12T18:51:07.910

我意识到这是一个老问题，但我认为当前的答案在某种程度上具有误导性。

同时调用`at<T>(...)`和`ptr<T>(...)`将在调试模式下检查边界。如果`_DEBUG`未定义宏，它们基本上会计算`y * width + x`并为您提供指向数据的指针或数据本身。所以`at<T>(...)`在释放模式下使用相当于自己计算指针，但更安全，因为计算指针不仅仅是`y * width + x`如果矩阵只是另一个矩阵的子视图。在调试模式下，您将获得安全检查。

我认为最好的方法是逐行处理图像，使用获取行指针`ptr<T>(y)`，然后使用`p[x]`. 这样做的好处是您不必计算各种数据布局并且仍然是内部循环的普通指针。

您可以一直使用普通指针，这将是最有效的，因为您避免了每行乘法之一，但是您需要使用`step1(i)`来推进指针。我认为使用`ptr<T>(y)`是一个很好的权衡。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T12:03:45.417

`at<T>`每次调用时都会进行范围检查，从而使其比 慢`ptr<T>`，但更安全。

因此，如果您确信您的范围计算是正确的并且您想要尽可能快的速度，请使用`ptr<T>`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-07T08:04:57.193

根据官方文档，他们建议最有效的方法是先获取指向行的指针，然后使用普通的 C 运算符 []。它还为每次迭代保存了一个乘法。

```
// compute sum of positive matrix elements
// (assuming that M isa double-precision matrix)
double sum=0;
for(int i = 0; i < M.rows; i++)
{
    const double* Mi = M.ptr<double>(i);
    for(int j = 0; j < M.cols; j++)
        sum += std::max(Mi[j], 0.);
} 
```

# windows-phone-7 - 如何使单选按钮在运行时只读

> ID：14277645
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:01.650
> 
> 标签：windows-phone-7

我有一个以编程方式创建的单选按钮，在某些情况下我需要将此单选按钮设置为只读。我也试过 RadioButton.IsEnable = false; 但在那之后，我的应用程序中没有显示任何内容，它看起来像可见性。我的单选按钮已折叠。

我用于创建单选按钮的这段代码：

```
 RadioButton radbtn = new RadioButton();
                radbtn.Name = choicelist[ctr].ID;
                radbtn.Content = choicelist[ctr].Name;
                radbtn.Foreground = new SolidColorBrush(Colors.Black);
                radbtn.VerticalAlignment = System.Windows.VerticalAlignment.Center; 
```

我想将此单选按钮设置为只读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:14:04.690

嗨，我找到了解决方案，它对我有用。

```
radbtn.IsHitTestVisible = false; 
```

# mdx - 将具有不同 where 子句的多维数据集度量相加

> ID：14277649
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:07.670
> 
> 标签：mdx, olap, cube

我有两个 MDX 查询，

`select [Measures].[Goals A] on 0 from [FDC Star] where [Squad A].[Squad Key]`

和

`select [Measures].[Goals B] on 0 from [FDC Star] where [Squad B].[Squad Key]`

我想将这两个值加在一起，但对 MDX 来说非常陌生，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:56:55.163

您可以使用计算成员：

```
WITH
   MEMBER [Measures].[A] AS ([Measures].[Goals A], [Squad A].[Squad Key])
   MEMBER [Measures].[B] AS ([Measures].[Goals B], [Squad B].[Squad Key])
SELECT {[Measures].[A], [Measures].[B]} ON 0
FROM [FDC Star] 
```

# javascript - 滑块错误 javascript

> ID：14277650
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:07.477
> 
> 标签：javascript, jquery, slider

我的控制台出现错误 => Uncaught TypeError: Cannot read property 'maxHeight' of null。

嗯，我认为这是 jQuery 版本的问题，但我不知道如何解决这个问题，如果你能帮助我的话。jQuery 版本：1.4.2

这里的代码：

```
$.fn.slider = function(options, callback) {

if ($.isFunction(options)) {
    callback = options;
    options = null;
}
options = $.extend($.fn.slider.defaults,options);

return this.each(function() {

    var prt = $(this), itms = prt.find(options.itms), w = prt.width(), max = itms.length, mH = prt.data("options").maxHeight, p = 0, autoStart = prt.data("options").autoStart || options.autoStart, s = (prt.data("options").speed || options.speed) * 1000, t=s/360;

    if(max<2) return;

    if(prt.find('>.inner').length==1) {
        prt.find('>.inner').css({'width':w+'px'});
        itms.css({'width':w+'px'});
        return;
    }
    prt.wrapInner('<div class="inner" />');

    prt.css({'min-height':mH+'px'});
    prt.find('>.inner').css({'height':mH+'px','width':w+'px'});
    prt.append('<span class="corners"><span class="c1" /><span class="c2" /><span class="c3" /><span class="c4" /></span><span class="borders"><span class="b1" /><span class="b2" /><span class="b3" /><span class="b4" /></span>');

    itms.css({'line-height':mH-2+'px','width':w+'px','min-height':mH+'px'});
    /*@
     if(ie_rv < 8) {
     itms.each(function(){
     var ieImg = $(this).find('img:first-child');
     var h=(mH-ieImg.height())/2;
     ieImg.css({'margin-top':h+'px'});
     });
     }
     @*/

    var c = prt.find(' > .current');
    var cId = (c.length>0) ? c.index() : 0;

    var iterators = '';
    itms.each(function(){
        var i = $(this).index();
        iterators += '<button type="button" title="Slide '+(i+1)+'">&bull;</button>';
    });
    $('<div class="sliderNav"><button type="button" class="prev">&laquo;</button><span class="iterators">'+iterators+'</span><button type="button" class="next">&raquo;</button><button class="playPause">&#x25BA;</button><span class="clock" /></div>').appendTo(prt);
    var iteratorBtns = prt.find('.iterators button');
    var playPause = prt.find('.playPause');
    var clock = prt.find('.clock');
    iteratorBtns.eq(cId).addClass('on');
    prt.find('.next').bind('click',function(){
        hold();
        shiftItem('fwd','static');
    });
    prt.find('.prev').bind('click',function(){
        hold();
        shiftItem('back','static');
    });
    iteratorBtns.bind('click',function(){
        hold();
        shiftItem('unknown','static',$(this).index());
    });
    playPause.bind('click',function(){
        toggle();
    });

    prt.bind('mouseenter',function(){
        hold();
    });
    prt.bind('mouseleave',function(){
        if(autoStart==true)
            toggle();
    });

    // first in
    itms.eq(cId).fadeTo(0,0).animate({'left':p,'opacity': 1},0,function(){
        $(this).css({'filter': 'none'})
    });

    prt.data('status','idle');
    prt.data('playPause','pause');

    if(autoStart==true)
        toggle();

    function shiftItem(direction,type,n){
        holdItem();
        var w = prt.width();
        if(prt.data('status')=='moving') return;
        prt.data('status','moving');
        if(direction=='unknown') {
            if(n==cId) {
                prt.data('status','idle');
                if(type!='static') play();
                return;
            }
            direction = (n>cId) ? 'fwd' : 'back';
        }
        else
            var n = (direction == 'fwd' ) ? (cId+1 == max) ? 0 : cId+1 : (cId-1 < 0) ? max-1 : cId-1;

        var sS = (direction == 'fwd' ) ? w+(2*parseInt(p,10)) : -w-(2*parseInt(p,10));

        itms.eq(cId).animate({'opacity': 0},700,function(){});
        itms.eq(n).fadeTo(0,0.5).animate({'opacity': 1},700,function(){
            $(this).css({'filter': 'none'});
            iteratorBtns.removeClass('on');
            iteratorBtns.eq(n).addClass('on');
            cId=n;
            if(type!='static') {
                play();
            }
            prt.data('status','idle');
        });

    }

    var clockMax = 572, clockWidth = 26, clockSlices = 22, clockSpeed = s / clockSlices, currentPosition = 0;

    function setClock() {
        resetClock();

        clock.data('timer',setTimeout(function(){
            shiftClock();
        },clockSpeed));

    }

    function shiftClock(){
        currentPosition -= clockWidth;
        clock.css({'background-position': currentPosition+'px 0'});
        clock.data('timer',setTimeout(function(){
            shiftClock();
        },clockSpeed));
    }

    function resetClock() {
        clearTimeout(clock.data('timer'));
        currentPosition = 0;
        clock.css({'background-position':'0 0'});
    }

    function hold(){
        holdItem();
        prt.data('playPause','pause')
        playPause.html('&#x25BA;').removeClass('paused');
        resetClock();
    }

    function play() {
        if(prt.data('playPause')=='play') {
            prt.data('timer',setTimeout(function(){
                shiftItem('fwd','dynamic');
            },s));
            setClock();
        }
    }

    function toggle(){

        var state = (prt.data('playPause')=='pause') ? 'play' : 'pause';

        if(state=='play'){
            prt.data('playPause','play')
            play();
            playPause.html('||').addClass('paused');
        }
        else {
            holdItem();
            resetClock();
            prt.data('playPause','pause')
            playPause.html('&#x25BA;').removeClass('paused');
        }
    }

    function holdItem(){
        clearTimeout(prt.data('timer'));
    }

    $.isFunction( options.setup ) && options.setup.call(this);
});

} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:56:28.433

在访问它之前验证变量 maxHright：

```
if (prt.data("options").maxHeight != null)
{
    // access the variable
} 
```

# android - 设置接近警报后 GPS 永久开启

> ID：14277654
> 
> 赞同：1
> 
> 时间：2013-01-11T11:52:15.050
> 
> 标签：android, android-location

我希望我的应用使用接近警报。我想出了如何做到这一点，警报按预期工作，但有一个问题 - 在我设置接近警报后，GPS 图标立即出现在状态栏中并保持在那里，直到我重新启动设备（或关闭 GPS，但它再次出现一旦我重新打开 GPS）。

即使我删除了警报，该图标也会保留在那里（它不再被触发，因此删除似乎有效）。我的第一个想法是一旦它得到位置修复它就会被删除，但我错了。

这是在我运行 vanilla 4.1.2 Jelly Bean 的 Nexus S 上复制的（来自 Google 的闪存工厂图像，甚至没有根）和 4.1.2 模拟器。

我还注意到它似乎不影响电池，设备正常进入睡眠模式。

以下是相关代码：

```
public void set(Context context) {
    LocationManager locationManager=(LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    PendingIntent pendingIntent=PendingIntent.getBroadcast(context, 0, prepareIntent(context), PendingIntent.FLAG_CANCEL_CURRENT);
    double lat=getLocation().getGeoPoint().getLatitudeE6()/1e6;
    double lng=getLocation().getGeoPoint().getLongitudeE6()/1e6;
    locationManager.addProximityAlert(lat, lng, radius, -1, pendingIntent);
}

public void unset(Context context) {
    LocationManager locationManager=(LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    PendingIntent pendingIntent=PendingIntent.getBroadcast(context, 0, prepareIntent(context), PendingIntent.FLAG_CANCEL_CURRENT);
    locationManager.removeProximityAlert(pendingIntent);
} 
```

可能是什么问题呢？我该如何解决？

* * *

**更新：**我进行了一个小实验（设置接近警报的 50 分钟睡眠模式），但结果相当混乱：

![在此处输入图像描述](../Images/3439f37d274657929a44842d44a79fbb.png)

似乎该图标存在，但 GPS 并非一直处于开启状态。

有人可以澄清这种情况吗？

# javascript - 调整窗口大小后，其中的元素不再适合

> ID：14277655
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:15.700
> 
> 标签：javascript, html

我有一个带有 html 的模态对话框（window.showModalDialog）。当我调整对话框大小时，其中的 HTML 不符合新边界，并且滚动条或元素不会 100% 扩展到新宽度。

为了解决这个问题，我必须将它拖来拖去，然后它会自动将其摇回正确的尺寸。

以编程方式修复它。我执行以下操作`window.document.getElementById('removeMainBody').innerHTML =window.document.getElementById('removeMainBody').innerHTML;`

但这会导致 html 中的一些动态对象停止运行。

调整对话框大小后，如何解决此问题并使对话框中的元素调整大小？

这是我的代码

```
 else if(<c:out value="${staffCount}" /> > 1){
            document.getElementById('removeDiv').style.display = '';
            window.dialogWidth='770px';
            window.dialogHeight='320px';
            window.document.getElementById('removeMainBody').innerHTML =window.document.getElementById('removeMainBody').innerHTML;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:49:12.323

如果您从 Body-Tag 设置样式或类，这将强制进行 HTML 重排，并且站点将再次正确显示，而无需设置 innerHTML 属性。

```
example:

...
window.document.body.className = "relfow"; 
// if the body class Attribute was set, than set it now back
window.document.body.className = "oldBodyStyleClassName" ; / Or just to ""
... 
```

如果浏览器优化，刷新调用，所以现在回流发生，你可以

```
setTimeout(function(){
...
window.document.body.className = "relfow"; 
// if the body class Attribute was set, than set it now back
window.document.body.className = "oldBodyStyleClassName" ; / Or just to ""
...
}) 
```

我希望这有帮助。（在这里你可以找到回流[链接](https://developers.google.com/speed/articles/reflow)的一些信息）

# asp.net - 从字符串 ASP.NET 转换日期时间时转换失败

> ID：14277656
> 
> 赞同：1
> 
> 时间：2013-01-11T11:52:18.417
> 
> 标签：asp.net, sql

从字符串转换时出现`Conversion failed`错误，有什么帮助吗？`DateTime`

```
sqlcon.Open();
sqlcmd = new SqlCommand("select [Uzsak_Nr],[Preke],[Uzsak_Kiekis],[Gaut_Kiekis],[MyDate],[Gaut_Data] from emp where MyDate between '" + TextBoxData1  + "'  and  '" + TextBoxData2 + "' ", sqlcon);
da = new SqlDataAdapter(sqlcmd);
da.Fill(dt);
GridViewRodyti.DataSource = dt;
GridViewRodyti.DataBind();
sqlcon.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:57:52.053

这已经写满了[SQL注入......](http://en.wikipedia.org/wiki/SQL_injection)

使用**参数化查询，**例如

```
var sqlCmd = new SqlCommand("select [Uzsak_Nr],[Preke],[Uzsak_Kiekis],[Gaut_Kiekis],[MyDate],[Gaut_Data] from emp where MyDate between '@startDate' and '@endDate'", sqlcon);
sqlCmd.Parameters.Add(new SqlParameter("@startDate", DateTime.Parse(TextBoxData1)));
sqlCmd.Parameters.Add(new SqlParameter("@endDate", DateTime.Parse(TextBoxData2))); 
```

您的问题可能是由于日期格式无效，如果您使用`SqlParameter`字符串并将其转换为 a`DateTime`它应该为您处理转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:01:51.783

我建议你这样做...

```
sqlcon.Open();
DateTime date1;
DateTime date2;
DateTime.TryParse(TextBoxData1.Text, out date1); //is TextBoxData1 a TextBox?
DateTime.TryParse(TextBoxData2.Text, out date2);

if (date1 != null && date2 != null) {    
    sqlcmd = new SqlCommand(
      "select [Uzsak_Nr],[Preke],[Uzsak_Kiekis],[Gaut_Kiekis],[MyDate],[Gaut_Data] " +
      "from emp where MyDate between @dt1 and  @dt2 ", sqlcon);
    sqlcmd.Parameters.AddWithValue("@dt1", date1);
    sqlcmd.Parameters.AddWithValue("@dt2", date2);
    da = new SqlDataAdapter(sqlcmd);
    da.Fill(dt);
    GridViewRodyti.DataSource = dt;
    GridViewRodyti.DataBind();
    sqlcon.Close();
} 
```

使用参数化查询要好得多，并且不会冒注入的风险。

我假设您使用的是 SQLServer。

# java - 自定义组件布局顺序

> ID：14277657
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:19.980
> 
> 标签：java, android, android-layout, android-custom-view

我有一个自定义组件，它覆盖了 onLayout 方法，如下所示：

```
@Override
    public void onLayout(boolean changed, int left, int top, int right, int bottom) {
        int[] location = new int[2];
        this.getLocationOnScreen(location);
        int x = location[0];
        int y = location[1];
        int w = this.getWidth();
        int h = y+(8*CELL_HEIGHT);

        updateMonthName();
        initCells();

        CELL_MARGIN_LEFT = 0;
        CELL_MARGIN_TOP = monthNameBounds.height();
        CELL_WIDTH = w / 7;

        setFrame(x, y, x+w, h);
        super.onLayout(true, x, y, w, h);
    } 
```

但是，当在线性布局中使用此组件时，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:padding="10dp"
    android:orientation="vertical">

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="TextView above"
        android:textSize="15sp"
        />

    <com.project.calenderview.CalendarView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="TextView below"
        android:textSize="15sp"
        />

</LinearLayout> 
```

呈现布局，使得文本视图“TextView above”是第一个，“TextView below”是第二个，然后我的组件应该位于两者之间。

编辑：这也是onDraw：

```
@Override
    protected void onDraw(Canvas canvas) {
        // draw background
        super.onDraw(canvas);

        //Draw month name
        canvas.drawText(monthName, (this.getWidth() / 2) - (monthNameBounds.width() / 2), monthNameBounds.height() + 10, monthNamePaint);

        //Draw arrows
        monthLeft.draw(canvas);
        monthRight.draw(canvas);

        // draw cells
        for(Cell[] week : mCells) {
            for(Cell day : week) {
                if(day == null) continue;
                day.draw(canvas);   
            }
        }

    } 
```

在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:02:25.067

onLayout 方法正在传递，`int left, int top, int right, int bottom`指示您的视图应该在哪里绘制，但显然您完全忽略了它。您可以使用这些值来正确布局它。

**编辑：**

如果您不扩展 ViewGroup，则不应覆盖`onLayout(bool, int, int, int, int)`

来自文档[View.onLayout](http://developer.android.com/reference/android/view/View.html#onLayout%28boolean,%20int,%20int,%20int,%20int%29)：

> 当此视图应为其每个子级分配大小和位置时，从布局中调用。带有孩子的派生类应该覆盖这个方法并在他们的每个孩子上调用布局。

**具有子类的派生类应覆盖此方法并在其每个子类上调用布局**

您对最终结果的问题出在代码的其他部分。

# javascript - 响应式设计：使用百分比（不是 px）滚动 JS/JQuery 旋转横幅

> ID：14277658
> 
> 赞同：1
> 
> 时间：2013-01-11T11:52:19.513
> 
> 标签：javascript, jquery, css, image-rotation

我快到了。但是，有一个我无法解决的错误。我认为问题在于使用百分比而不是像素（因为我希望横幅针对不同的屏幕宽度调整大小）。

横幅每 5 秒滚动一次，但在返回到开头之前只会到达第三张图像。另外 - 当我将窗口调整得非常小时，横幅仅在前两个图像之间旋转（有时会滚动到不存在的第 5 个图像，显示空白）。

我玩过Javascript。将 IF 语句更改为 < -400%（仍旋转 3 个图像）。当我将它设置为 < -800% 时，它会转到 2 张图像，而 < -1000% 它永远不会回到开头！我很困惑，但也许我错过了一些明显的东西。

HTML：

```
<div id="wrapper">

    <div id="subwrapper3">

        <div class="bannerwrapmain">
            <img src="/images/banner-image-1.jpg" />
        </div>

        <div class="bannerwrapmain">
            <img src="/images/banner-image-2.jpg" />
        </div>

        <div class="bannerwrapmain">
            <img src="/images/banner-image-3.jpg" />
        </div>      

        <div class="bannerwrapmain">
            <img src="/images/banner-image-4.jpg" />
        </div>  

    </div>

</div> 
```

CSS：

```
#wrapper 
{
    width:100%;
    overflow:hidden;
    margin:0px 0px 0px 0px;
    padding:0px;
}

#subwrapper3
{
    width:400%;
    overflow:hidden;
    margin: 0px;
    padding:0px;
}

.bannerwrapmain
{
    display: block;   
    width:25%;
    margin:0px;
    padding:0px;
    float:left;
}

.bannerwrapmain img
{
    width:100%;
    margin:0px;
    padding:0px;
    height:auto;
    border:none;
} 
```

JAVASCRIPT：

```
window.setInterval(function(){

if ($("#subwrapper3").css("marginLeft") < "-300%") { 
    $("#subwrapper3").animate({ marginLeft: '0%' });
} else {
    $("#subwrapper3").animate({ marginLeft: '-=100%' });        
}

}, 5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T00:55:12.360

尝试将主包装器设置为固定尺寸，例如 1000 像素。然后你的 subwrapper 到 100%，你的图片到 max-width:100%;

```
#wrapper{width:1000px;}
#subwrapper3, .bannerwrapmain{width:100%;}
.bannerwrapmain img{max-width:100%;} 
```

然后，您可以使用媒体查询根据屏幕大小更改主包装宽度，并且包含的​​元素将随之缩放：

```
@media screen and (max-width:500px){    
    #wrapper{width:500px;}
} 
```

几个月前我创建了一个内容滑块，它可能对你有一些帮助...... [http://codepen.io/lukeocom/pen/mHyBv](http://codepen.io/lukeocom/pen/mHyBv)

# gcc - gcc：目录：没有这样的文件或目录

> ID：14277660
> 
> 赞同：2
> 
> 时间：2013-01-11T11:52:31.317
> 
> 标签：gcc, makefile, arm

我正在尝试从[Here](http://malideveloper.arm.com/develop-for-mali/drivers/open-source-mali-gpus-linux-kernel-device-drivers/)为 linux 3.7 内核构建 mali 驱动程序。

有一个单独的构建脚本，例如，

```
#!/bin/bash
export KDIR=/path/to/kernel/dir/
..
..
gcc -v//Just for testing purpose printing gcc version
make
gcc -v
... 
```

实际主机具有 2.6 内核，但我指示`make`使用 linux 3.7 内核。上面的make会调用mali驱动的makefile的Makefile。

对于上述脚本，gcc 版本在命令前后打印正常`make`，但`make`进入内核目录时，gcc 无法识别。

它说**gcc：目录：没有这样的文件或目录**。

arm-gcc 也一样。有没有猜？？

编辑：（制作输出）

```
make ARCH=arm -C /home/work/linux3.7/ M=/home/work/mali/driver/src/devicedrv/mali modules

make[1] : Entering directory `/home/work/linux3.7/`
gcc : directory : No such file or directory
gcc : directory" : No such file or directory 
<command-line>: warning: missing terminating " character
gcc : directory : No such file or directory
gcc : directory" : No such file or directory 
<command-line>: warning: missing terminating " character
gcc : directory : No such file or directory
gcc : directory" : No such file or directory 
<command-line>: warning: missing terminating " character
gcc : directory : No such file or directory
gcc : directory" : No such file or directory 
<command-line>: warning: missing terminating " character
CC [M]  /home/work/mali/driver/src/devicedrv/mali/common/mali_kernel_core.o
.arm-none-linux-gnueabi-gcc: directory:No such file or directory 
.arm-none-linux-gnueabi-gcc: directory":No such file or directory

make[2] : Leaving directory `/home/work/linux3.7/` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T22:20:54.117

问题出在驱动程序/gpu/vithar/ump/src/devicedrv/Makefile.common 中。它假定 vithar SDK 已从 SVN 中提取并具有有效的 SVN 修订版（它没有）。

您有 2 个选项：1）编辑上面的文件以跳过 svnversion 的调用：

```
- SVN_REV:=$(shell ((svnversion | grep -qv exported && echo -n 'Revision: ' && svnversion) || git svn info | sed -e 's/$$$$/M/' | grep '^Revision: ' || echo ${MALI_RELEASE_NAME}) 2>/dev$
+ SVN_REV=0 
```

2）添加到命令行：

```
SVN_REV=0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T12:00:08.897

`gcc` *被*识别、发现和执行。错误“gcc：目录：没有这样的文件或目录”是`gcc`自己给出的。

出于某种原因，`gcc`正在尝试访问不存在的“目录”（即*名为“目录”的对象）。*

可能是错误的扩展或意外的环境变量。

尝试检查适当的`Makefile`和您的`make`命令。

例如，如果您发出一个命令，例如

```
KDIR="/usr/Linux Kernel directory" CONFIG=pb-virtex5 BUILD=release make 
```

存在系统误解的风险`KDIR`，引入了两个不存在的对象“内核”和“目录”以及一个额外的引号。这种可能性**可以**解释您观察到的症状。因此，路径中的额外空格绝对值得检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:53:55.460

# xpages - 我应该将 Scope 变量放在 XPage 的什么位置

> ID：14277661
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:32.533
> 
> 标签：xpages

我有一个 XPages 库数据库，其中创建了我的所有 XPage。从那里用户将访问其他数据库来完成他们的工作。

我需要将这些数据库的名称放在变量中，以便可以在任何服务器（开发、测试、生产等）上找到它们，因为名称总是相同的。我认为这些变量应该是 applicationScope 变量，但我不确定。

如果 applicationScope 在我需要的变量中，你能告诉我在哪里创建它们的最佳位置。

如果它不是正确的变量，哪种变量最好，我在哪里定义它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:54:37.977

部署一些静态引用的简单方法是*xsp.properties*文件。此文件允许添加可在服务器上的所有 XPages 应用程序上访问的变量

例如这个变量...

```
myproperty.test=Hello World 
```

...可以通过这种方式在任何 XPage 中访问：

```
context.getProperty("myproperty.test") 
```

这些属性也可以由主题设置。

但是该属性必须手动添加到任何服务器。

另一种方法是使用配置文件：这些可以通过复制机制轻松部署到任何服务器上的任何数据库。这些文档的值可以缓存在 applicationScope 变量中以获得更好的性能。

**编辑：**

您应该更改服务器上的*XSP.properties*文件，而不是特定于数据库的 One。这不需要设计器，只需要一个文本编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:51:07.780

**applicationScope**变量会在内存中保留大约 10-15 分钟，然后被丢弃。如果我正确理解您的需求，您应该永久存储数据库名称或 URL，Notes 文档将是最适合的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:52:22.233

我认为因为您正在谈论像应用程序这样的门户，所以最好有一个设置文档实现。您必须创建一个管理 xpage，它将检查查找设置视图中是否存在某种类型的文档（当然，您必须自己创建）。如果没有创建文档。如果有一个使用文档作为数据源。

在此文档中，您可以存储有关要显示的应用程序的复制 ID 和服务器信息。这可以是一个带有多行文本字段的简单表单。数据可以以“Description$repid$server”之类的格式存储。在网络上，您必须检查此文档，使用重复阅读文档中的条目。对于每次迭代，您可以只使用 xp:link 标记。当然，您首先需要计算应用程序的 url，但这不是这里最大的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:51:02.923

将值放入 .properties 文件的缺点是您需要设计器客户端进行更改。我建议为您的应用程序使用全局配置文档，该文档可以在客户端或使用 XPage 进行编辑。看看 Paul Withers 的 xhelp 应用程序。深入研究代码以了解如何在应用程序中使用配置文档。XHelp 可以从这里下载[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&documentId=426CB81230B6F94A8625789000830762](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&documentId=426CB81230B6F94A8625789000830762)

# extjs - 如何将具有多个值的输出从 extjs 发送到 Yii 控制器操作

> ID：14277666
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:51.340
> 
> 标签：extjs, yii, output

我在 extjs+yii 工作。我的服务器端在 yii 框架中，客户端在 extjs 中。现在我想将 extjs 的提交按钮输出传递给 yii 动作。我正在用 extjs 创建包含 20 个问题的多项选择题，其实际问题将来自用 Yii framewok 编写的服务器端操作。到目前为止，它工作正常。

现在通过将其各自的单选按钮标记为答案来解决所有问题后，单击提交按钮我想发送这 20 个问题`userId`，`questionId`并选择单选按钮选项到 yii 控制器操作。我将提交按钮操作写为：

```
 check:function()
            {
        console.log("Inside check function.");
        //creating objects in javascript
          var obj=new Object();
          for(var i=0;i<=5;i++)
          {
                var inputs = document.getElementsByName(i); 
                var radio = "";  
                for (var j = 0; j < inputs.length; j++) {
                    if (inputs[j].checked) {
                        name = inputs[j].name;
                        value  = inputs[j].value;
                        //obj[i].name1=name;
                        obj[i]={'questionId':name,'option':value};
                        console.log("questionId="+name +" value="+ value);
                        console.log("object name="+ obj[i].questionNo+" Object value="+obj[i].option);
                    }
                }
          }
    }
}); 
```

所以我得到了关于提交按钮点击的所有问题`questionId`。`optionValue`现在我想将所有`questionid`和`optionValue`数据发送到 yii 动作。那么如何将它发送到 extjs 动作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T11:04:31.303

您应该使用 AJAX 将数据发布到控制器中的操作，例如：site/savequestions

```
 Ext.Ajax.request({
        url:"site/savequestions",
        method: "POST",
        params: {'qid': name, 'aid':value},
        success: function(){
            console.log("ok");
        },
        failure: function(response, opts){
            console.log("failed");
        },
        headers: { 'Content-Type': 'application/json' }
    }); 
```

然后在控制器中`SiteController`你会有

```
public function actionSavequestion()
{
    $questionId = Yii::app()->request->getParam('qid');
    $anserId = Yii::app()->request->getParam('aid');
    //... do stuff here

    echo json_encode(array('success' => true));
    exit()
} 
```

# c# - 根据文本框或组合框中的值过滤报表

> ID：14277668
> 
> 赞同：0
> 
> 时间：2013-01-11T11:52:56.250
> 
> 标签：c#, visual-studio-2010, parameters, reporting, filtering

我正在开发 vs 2010 Ultimate 中的 ac# 项目，这需要过滤报告的结果。我的挑战是根据表单上的文本框或组合框中的值获取要过滤的报告。如果值为 null 或为空，则报告应返回所有结果。

我尝试使用参数，但看起来没有显示结果。在表单上有一个报告查看器、一个选择特定报告的组合框和一个用户输入要过滤的值的文本框，还有两个日期选择器 From-Date 和 To-Date；

我什至在报告中添加了参数，一切似乎都有效，但报告没有返回任何结果。下面是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using Microsoft.Reporting.WinForms;

namespace clinicmis
{
    public partial class AllReports : Form
    {
        //private string xSQL;
        private string str = "";
        private string FromDate;
        private string ToDate;
        private string rptName = "";
        ReportDataSource dsClinic;
        ReportParameter paramRegNo, paramFromDate, paramToDate;
        ReportParameterInfoCollection paramInfo;

        public AllReports()
        {
            InitializeComponent();
        }

        #region "Global Declaration"
        String rptpath = Application.StartupPath;
        #endregion

        private void AllReports_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'clinicmisDataSet.qryRequisitions' table. You can move, or remove it, as needed.
            this.qryRequisitionsTableAdapter.Fill(this.clinicmisDataSet.qryRequisitions);
            // TODO: This line of code loads data into the 'clinicmisDataSet.suppliers' table. You can move, or remove it, as needed.
            this.suppliersTableAdapter.Fill(this.clinicmisDataSet.suppliers);
            // TODO: This line of code loads data into the 'clinicmisDataSet.qryAccountsPhReceipt' table. You can move, or remove it, as needed.
            this.qryAccountsPhReceiptTableAdapter.Fill(this.clinicmisDataSet.qryAccountsPhReceipt);
            // TODO: This line of code loads data into the 'clinicmisDataSet.patients' table. You can move, or remove it, as needed.
            this.patientsTableAdapter.Fill(this.clinicmisDataSet.patients);
            // TODO: This line of code loads data into the 'clinicmisDataSet.labtests' table. You can move, or remove it, as needed.
            this.labtestsTableAdapter.Fill(this.clinicmisDataSet.labtests);
            // TODO: This line of code loads data into the 'clinicmisDataSet.qryStock' table. You can move, or remove it, as needed.
            this.qryStock.Fill(this.clinicmisDataSet.qryStock);
            // TODO: This line of code loads data into the 'clinicmisDataSet.qryOrders' table. You can move, or remove it, as needed.
            this.qryOrdersTableAdapter.Fill(this.clinicmisDataSet.qryOrders);
            // TODO: This line of code loads data into the 'clinicmisDataSet.qryDeliveries' table. You can move, or remove it, as needed.
            this.qryDeliveriesTableAdapter.Fill(this.clinicmisDataSet.qryDeliveries);
            // TODO: This line of code loads data into the 'clinicmisDataSet.drugs' table. You can move, or remove it, as needed.
            this.drugsTableAdapter.Fill(this.clinicmisDataSet.drugs);
            // TODO: This line of code loads data into the 'clinicmisDataSet.qryPatientsLabTestResults' table. You can move, or remove it, as needed.
            this.qryPatientsLabTestResultsTableAdapter.Fill(this.clinicmisDataSet.qryPatientsLabTestResults);

            cboReports.Items.Add("Patients");
            cboReports.Items.Add("Patients Results");
            cboReports.Items.Add("Lab Tests");
            cboReports.Items.Add("List Of Drugs");
            cboReports.Items.Add("Drugs Stock");
            cboReports.Items.Add("Drug Orders");
            cboReports.Items.Add("Drug Deliveries");
            cboReports.Items.Add("Drug Requisitions");
            cboReports.Items.Add("List Of Suppliers");
            reportViewer1.ProcessingMode = ProcessingMode.Local;

        }

        private void btnShow_Click(object sender, EventArgs e)
        {
            if (cboReports.Text == string.Empty)
            {
                MessageBox.Show("Please Select a Report you wish to Preview", "Select a Report");
            }
            else
            {
                //reportViewer1.LocalReport.DataSources.Clear();
                List<ReportParameter> paramList = new List<ReportParameter>();
                //paramList.Clear();

                str = txtRegNo.Text;
                FromDate = dtFrom.Text;
                ToDate = dtTo.Text;

                paramRegNo = new ReportParameter("RegFNo", str, false);
                paramFromDate = new ReportParameter("FromDate", FromDate, false);
                paramToDate = new ReportParameter("ToDate", ToDate, false);

                switch (cboReports.SelectedIndex)
                {
                    case 0:
                        paramList.Add(paramRegNo);
                        paramList.Add(paramFromDate);
                        paramList.Add(paramToDate);
                        rptName = rptpath + "\\" + "Report2.rdlc";
                        // TODO: This line of code loads data into the 'clinicmisDataSet.accountsfrontdeskreceipts' table. You can move, or remove it, as needed.
                        this.accountsfrontdeskreceiptsTableAdapter.Fill(this.clinicmisDataSet.accountsfrontdeskreceipts);
                        dsClinic = new ReportDataSource("ClinicDataSet", accountsfrontdeskreceiptsBindingSource);
                        break;
                    case 1:
                        paramList.Add(paramRegNo);
                        paramList.Add(paramFromDate);
                        paramList.Add(paramToDate);
                        rptName = rptpath + "\\" + "ReptPatientsLabResults.rdlc";
                        dsClinic = new ReportDataSource("DataSet1", qryPatientsLabTestResultsBindingSource);
                        break;
                    case 2:
                        dsClinic = new ReportDataSource("dsLabTests", labtestsBindingSource);
                        rptName = rptpath + "\\" + "ReptLabTests.rdlc";
                        break;
                    case 3:
                        dsClinic = new ReportDataSource("dsDrugs", drugsBindingSource);
                        rptName = rptpath + "\\" + "ReptDrugs.rdlc";
                        break;
                    case 4:
                        dsClinic = new ReportDataSource("dsDrugsStock", qryStockBindingSource);
                        rptName = rptpath + "\\" + "ReptDrugsStock.rdlc";
                        break;
                    case 5:
                        dsClinic = new ReportDataSource("dsDrugsOrders", qryOrdersBindingSource);
                        rptName = rptpath + "\\" + "ReptDrugsOrders.rdlc";
                        break;
                    case 6:
                        dsClinic = new ReportDataSource("dsDrugsDeliveries", qryDeliveriesBindingSource);
                        rptName = rptpath + "\\" + "ReptDrugsDeliveries.rdlc";
                        break;
                    case 7:
                        dsClinic = new ReportDataSource("dsDrugsRequisitions", qryRequisitionsBindingSource);
                        rptName = rptpath + "\\" + "ReptDrugsRequisitions.rdlc";
                        break;
                    case 8:
                        dsClinic = new ReportDataSource("dsSuppliers", suppliersBindingSource);
                        rptName = rptpath + "\\" + "ReptSuppliers.rdlc";
                        break;
                }

                reportViewer1.LocalReport.ReportPath = rptName;
                paramInfo = reportViewer1.LocalReport.GetParameters();

                if (paramList.Count == 0)
                {
                    //                Console.WriteLine("<No parameters are defined for this report>");
                }
                else
                {
                    reportViewer1.LocalReport.SetParameters(paramList);
                }

                //reportViewer1.LocalReport.SetParameters(paramList);
                reportViewer1.LocalReport.DataSources.Add(dsClinic);
                this.reportViewer1.RefreshReport();
            }
        }

        private void btnClose_Click(object sender, EventArgs e)
        {
            Close();
        }
    }
} 
```

任何人都有解决这种情况的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-21T22:20:12.927

有同样的问题，这个视频修复了它：

[ [https://www.youtube.com/watch?v=DnagGh_gViE][1]](https://www.youtube.com/watch?v=DnagGh_gViE][1])

我唯一改变的是查询，因为我有 vs2017。

而不是**“WHERE fieldname=@fieldname”**我放了**“WHERE fieldname=？”**

希望对你也有帮助！

# c++ - #define 在枚举中或如何扩展枚举

> ID：14277671
> 
> 赞同：0
> 
> 时间：2013-01-11T11:53:15.957
> 
> 标签：c++, enums, macros, c-preprocessor

我有几个类，每个类都使用相同`enum`但根据其要求对其进行了一些扩展。例如 ：

```
class skirtColor{
  enum Color{
red = 1,
blue = 10,
green = 12
};
};
class dressColor {
enum Color{
red = 1,
pink,
yellow,
blue = 10,
green = 12
};
};
class pantsColor {
enum Color {
red = 1,
brown,
blue = 10,
green = 12
};
}; 
```

由于 C++ 中没有枚举的继承，所以我想将其`define`用于公共部分

```
#define COLOR\
// red color \
red = 1,\
// blue color \
blue = 10,\
//green color
green = 12, 
```

之后我可以在类中重用常见的颜色定义

```
class skirtColor{
  enum Color{
COLOR
};
};
class dressColor {
enum Color{
COLOR
pink = 2,
yellow,
};
};
Class pantsColor {
enum Color {
COLOR
brown = 2,
};
}; 
```

这种方式可以吗？我无法编译这段代码你能帮我正确的宏定义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:58:47.277

目前你可以管理这种事情的一种方法是继承，它将从类中继承常量。

```
struct Color
{
     enum { red = 1, blue = 10, green = 12 };
} ;

struct DressColor : Color
{
     enum { pink =2, yellow = 3 };
}; 
```

并且 DressColor 也会有红色、蓝色和绿色..

如果要启用“严格类型”以具有必须具有这些值之一的变量，则可以使用具有“具有”值且只能从类中构造或修改的类来执行此操作。

```
struct Color
{
    class Holder
    {
        private:
        int value;
        explicit Holder( int v ) : value( v ) {}

        public:
        bool operator==( const Holder & other ) const
        {
            return value == other.value;
        }

        int get() const
        {
            return value;
        }

        friend struct Color;
    };

  protected:        
    static Holder makeHolder( int v )
    {
        return Holder( v );
    }

  public:
    static const Holder red;
    static const Holder blue;
    static const Holder green;
};

struct DressColor : Color
{
    static const Holder pink;
    static const Holder yellow;
};

     // these in a .cpp file.
const Color::Holder Color::red( 1 );
const Color::Holder Color::blue( 10 );
const Color::Holder Color::green( 12 );
const Color::Holder DressColor::pink( Color::makeHolder(2) );
const Color::Holder DressColor::yellow( Color::makeHolder(3) );

     // how you can create a variable of one. Note that whilst you cannot construct
     // a Color::Holder from an int in the regular way, you can copy-construct.

     Color::Holder var( Color::red ); 
```

当然，在这个“解决方法”中，枚举对象仍然是类型`Color::Holder`，不能是`DressColor::Holder`使用的类型`class DressColor`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:55:16.250

[http://ideone.com/Q2mIRk](http://ideone.com/Q2mIRk)

`Color`和这里不一样`COLOR`：

```
Enum Color{
Color
Pink = 2,
yellow,
}; 
```

此外，它是`enum`and `class`，都是小写的。

另外，放弃评论：

```
#define COLOR\
// red color \
red = 1,\
// blue color \
blue = 10,\
//green color
green = 12, 
```

因为尾随`\`将使所有内容成为评论。以上将扩展为：

```
// red color red = 1, // blue color blue = 10, //green color green = 12, 
```

说啊

```
#define COLOR \ 
red = 1,\
blue = 10,\
green = 12, 
```

如果有人不知道颜色`red`代表什么……好吧，我就闭嘴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:18:30.087

**您的代码甚至没有使 C++ 关键字正确。**

而且你的……类的实例`Color`不代表颜色，所以类名有点误导。

但不管怎么说…

* * *

扩展 an`enum`并非易事，因为它需要超类化，而不是子类化，这就是语言不支持它的原因。

但似乎你只对可用的*名称*感兴趣，而不是任何强类型，在这种情况下你可以做......

```
struct SkirtColors
{
    enum { red = 1, blue = 10, green = 12 };
};

struct DressColors
    : SkirtColors
{
    enum { pink = 2, yellow = 3 };
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T12:38:34.403

我倾向于从`enum`命名**所有**颜色开始，然后为各种特定颜色添加枚举并使用第一个值：

```
struct colors {
    enum colors {
        red = 1,
        blue = 10,
        pink = 2,
        green = 12,
        yellow = 3
    }; 
};

struct skirt_colors {
    enum colors {
        red = colors::red,
        blue = colors::blue,
        green = colors::green
    };
}; 
```

# java - 应用内计费（在应用内购买模块）

> ID：14277672
> 
> 赞同：1
> 
> 时间：2013-01-11T11:53:17.453
> 
> 标签：java, android, product, in-app-billing

我需要做的是创建一个应用程序，在该应用程序中，在已发布的版本中，用户应该看不到一些片段。但是，当用户在应用计费购买模块中结账时，他将能够访问这些片段（基本上是一些屏幕）。

截至目前，我可以将标准应用内计费演示应用程序集成到我的应用程序中。但我仍然很困惑，一旦购买者通过应用内计费模块成功结账，如何让这些段可供购买者使用。我害怕发布应用程序，因为它是根据 Android 开发人员指南推荐的。我有一个想法，那就是它会如何工作，但想要获得现场体验。

任何人都可以告诉我在应用程序交付给客户之前测试应用程序的正确程序和指导吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:57:45.830

您可以输入应用内计费的演示用户。您可以在那里输入具有测试权限的电子邮件 ID。

转到开发者控制台中的设置选项卡，您将在其中找到“具有测试访问权限的 Gmail 帐户”，其定义为：

> 许可证测试 - 除了此控制台的所有者之外，以下用户将从应用程序获得许可证测试响应。他们还可以通过已上传但尚未发布的 APK 进行应用内购买。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:00:25.993

浏览此链接：

[实施应用内结算（IAB 版本 3）](http://developer.android.com/google/play/billing/billing_integrate.html)

它有很好的解释和很好的示例代码。

您还可以设置测试帐户以在交付给客户之前进行应用内测试。

[设置测试帐户](http://developer.android.com/google/play/billing/billing_admin.html#billing-testing-setup)

谢谢。

# php - 无法理解标签和 JavaScript 调用

> ID：14277683
> 
> 赞同：0
> 
> 时间：2013-01-11T11:53:53.677
> 
> 标签：php, javascript, jquery, html, class

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:56:21.320

从元素加载的某些 JavaScript`<script>`可能[会将事件处理](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)函数绑定到元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T11:56:30.753

事件处理程序很可能绑定到其他地方的元素（可能来自包含的 JavaScript 文件）。例如：

```
document.getElementsByClassName("update")[0].addEventListener("click", function () {
    // Do something on click of the first `.update` element
}, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:57:19.943

您不应再像使用`onclick`. 页面向对象注册一个事件监听器。例如，使用 jQuery 之类的库。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T11:58:14.160

你是绝对正确的！期待这样的事情是很自然的，除了还有其他方法可以将事件绑定到对象。

如果你检查页面上的 JavaScript 代码，我相信你会发现可能看起来像 $('a.renameButton').click(function(){}); （如果该站点使用 jQuery）或类似的东西，绑定该特定标签的 onclick 事件以执行某些特定操作。

# windows-phone-7 - Specify Proxy for WebBrowser control in WP7, WP8

> ID：14277693
> 
> 赞同：0
> 
> 时间：2013-01-11T11:54:18.853
> 
> 标签：windows-phone-7, proxy, windows-phone-8

Is there a possibility of specifying a proxy for a WebBrowser control in a custom application for Windows Phone 7 and/or 8? I have found solutions for hooking into the WebClient like [here](http://www.sharpgis.net/post/2012/01/23/Overwriting-the-default-WebRequest-used-by-WebClient.aspx), but the browser control obviously does not consider those settings. Are there any other solutions? Are there any news with regards to that issue in Windows Phone 8?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:46:32.057

The `WebBrowser` control is tied to the OS, therefore inheriting the proxy settings that are definied by the user of the device. You can't directly modify them, unless you want to intercept navigation events and feed them directly to your server.

# c++ - 抑制 SSL 错误

> ID：14277694
> 
> 赞同：7
> 
> 时间：2013-01-11T11:54:19.730
> 
> 标签：c++, qt, qtwebkit

我希望能够读取以 SSL 模式从网页发送回的标头。但是，我的 Qt 应用程序无法访问网页，因为我正在收集它处于 SSL 模式？使用此连接可以在我的应用程序中使用 SSL 进行正常的 webview 浏览：

```
connect(view->page()->networkAccessManager(), SIGNAL(sslErrors(QNetworkReply*, const QList<QSslError> & )),
                        this, SLOT(onSslErrors(QNetworkReply*, const QList<QSslError> & ))); 
```

这抑制了 webview 中的 SSL 错误，但我有一个单独的函数，它使用这种方法获取标题：

```
//Send a request to validate URL
QNetworkAccessManager *manager = new QNetworkAccessManager(this);
QNetworkRequest request;
request.setUrl(QUrl(text));
request.setRawHeader("User-Agent", "MyApp1.0");
request.setHeader(QNetworkRequest::ContentTypeHeader,"application/x-www-form-urlencoded");
                  QNetworkReply *reply = manager->get(request);
QEventLoop loop;
connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));
loop.exec();

qDebug() << "QLoop: " << reply->rawHeader("My-Application");
  if(reply->rawHeader("My-Application") == "1"){
      appUrl = text;
  } 
```

我需要这种方法，因为在应用程序使用`webview->load(QURL(appUrl ))`. 只是不确定如何使用 QNetworkAccessManager 抑制/处理 SSL 错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T12:06:51.517

您需要将 QNAM 对象信号连接`sslErrors(QNetworkReply *, QList<QSslError>)`到您设置的插槽，`QNetworkReply::ignoreSslErrors()`这将允许 QNAM 继续运行。 [Qt 文档就可以了](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html#sslErrors)。

# php - 在 joomla K2 中使用 php 插件安装 reCaptcha

> ID：14277697
> 
> 赞同：0
> 
> 时间：2013-01-11T11:54:36.443
> 
> 标签：php, joomla, recaptcha, joomla-k2

我试图在 K2 前端提交表单上实现 reCaptcha。我已经下载了 PHP 库，安装了它，并且可以成功地以提交形式显示验证码图像，但最后一步让我感到困惑。我需要将该代码放入操作 php 文件中：

```
<?php
  require_once(JPATH_SITE.'/libraries/recaptcha/recaptchalib.php');
  $privatekey = "MY PRIVATE KEY";
  $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

  if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
         "(reCAPTCHA said: " . $resp->error . ")");
  } else {
    alert(0);
  }
  ?> 
```

问题是操作文件恰好是`index.php`出于某种原因。如果我只是把那段代码放在那里，主页会停止加载，并显示我拼错验证码键的警告。我将在下面发布我的 K2frontend php 文件，希望你能帮助我，因为它对我来说很重要。

```
<?php
defined('_JEXEC') or die('Restricted access');

$document = & JFactory::getDocument();
$document->addScriptDeclaration("
    Joomla.submitbutton = function(pressbutton){
        if (pressbutton == 'cancel') {
            submitform( pressbutton );
            return;
        }
        if (\$K2.trim(\$K2('#title').val()) == '') {
            alert( '".JText::_('K2_ITEM_MUST_HAVE_A_TITLE', true)."' );
        }
        else if (\$K2.trim(\$K2('#catid').val()) == '0') {
            alert( '".JText::_('K2_PLEASE_SELECT_A_CATEGORY', true)."' );
        }
        else {
            syncExtraFieldsEditor();
            \$K2('#selectedTags option').attr('selected', 'selected');
            submitform( pressbutton );
        }
    }
");

?>
<div id="overallholderarticle" style="overflow:hidden;">

<form action="index.php" enctype="multipart/form-data" method="post" name="adminForm" id="adminForm">
    <?php if($this->mainframe->isSite()): ?>
    <div id="k2FrontendContainer">
        <div id="k2Frontend" style="background: url('<?php echo JURI::base(); ?>templates/<?php echo $template; ?>/images/bg_windows_bright_noise.png');">
            <div id="k2FrontendEditToolbar">
                <div class="titenewseditor">
                    <?php echo (JRequest::getInt('cid')) ? JText::_('K2_EDIT_ITEM') : JText::_('Добавить новость'); ?>
                </div>
            </div>
            <div class="clr"></div>
            <?php if(!$this->permissions->get('publish')): ?>
            <div id="k2FrontendPermissionsNotice">
                <p><?php echo JText::_('K2_FRONTEND_PERMISSIONS_NOTICE'); ?></p>
            </div>
            <?php endif; ?>
            <?php endif; ?>
            <div id="k2ToggleSidebarContainer"> <a href="#" id="k2ToggleSidebar"><?php echo JText::_('K2_TOGGLE_SIDEBAR'); ?></a> </div>
            <table cellspacing="0" cellpadding="0" border="0" class="adminFormK2Container">
                <tbody>
                    <tr>
                        <td>
                            <table class="adminFormK2">
                                <tr>
                                    <td class="adminK2LeftCol">
                                        <label for="title"><?php echo JText::_('K2_TITLE'); ?></label>
..........................
.........CODE HERE........
..........................

            </table>
            <div class="clr"></div>
            <?php if($this->mainframe->isSite()): ?>
        </div>
    </div>
    <!--BOTTOM ACTION BUTTONS-->
    <div id="k2Frontend">
        <!--reCAPCHA-->
        <?php
        require_once(JPATH_SITE.'/libraries/recaptcha/recaptchalib.php');
        $publickey = "MY PUBLIC KEY";
        echo recaptcha_get_html($publickey);
        ?>
            <table class="k2FrontendToolbar" cellpadding="2" cellspacing="4">
                <tr>
                    <td id="toolbar-save" class="button">
                        <a class="toolbar" href="#" onclick="javascript: submitbutton('save'); return false;"> <span title="<?php echo JText::_('K2_SAVE'); ?>" class="icon-32-save"></span> <?php echo JText::_('K2_SAVE'); ?> </a>
                    </td>
                    <td id="toolbar-cancel" class="button"> 
<a class="toolbar" href="#" onclick="javascript:history.go(-1)"> <span title="<?php echo JText::_('K2_CANCEL'); ?>" class="icon-32-cancel"></span> <?php echo JText::_('K2_CLOSE'); ?> </a> 
</td> 
                </tr>
            </table>
    </div>
    <?php endif; ?>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:25:18.737

如果您在管理部分工作，您可以在项目控制器的保存功能中验证验证码。在此文件`administrator/components/com_k2/controllers/item.php`中检查以下函数并添加代码。

```
function save() {
 JRequest::checkToken() or jexit('Invalid Token');
 //add library and captcha validation code here
 $model = & $this->getModel('item');
 $model->save();
} 
```

最好检查或尝试插件。

Hope this will be helpful too-

1) [How to use joomla recaptcha plugin to my custom Module](https://stackoverflow.com/questions/12840015/how-to-use-joomla-recaptcha-plugin-to-my-custom-module/12860744#12860744)

2) [Using ReCaptcha with my custom form in Joomla](https://stackoverflow.com/questions/12894134/using-recaptcha-with-my-custom-form-in-joomla/12914728#12914728)

# error-handling - 在 logit 模型中选择先验分布

> ID：14277701
> 
> 赞同：1
> 
> 时间：2013-01-11T11:54:50.557
> 
> 标签：error-handling, winbugs

我正在 R 的 winbugs 中进行 logit 回归分析。我必须强制该模型的所有系数为正。因此，我对所有系数都使用了统一的先验，但 winbugs 对此并不满意：它会生成一个愚蠢的错误窗口。当我将`dnorm(0.0,1.0E-4))`所有系数用作先验时，问题就解决了。在下面给出的这个模型中，可以做些什么来获得正贝塔？

```
model
{
for (i in 1:m) {
 # Linear regression on logit
 logit(p[i]) <- beta.concern2*DCEconcern2[i] + beta.concern3*DCEconcern3[i] +     beta.concern4*DCEconcern4[i] + beta.concern5*DCEconcern5[i] +
beta.breath2*DCEbreath2[i] + beta.breath3*DCEbreath3[i] + beta.breath4*DCEbreath4[i] + beta.breath5*DCEbreath5[i] + 
beta.weath2*DCEweath2[i] +beta.weath3*DCEweath3[i] +beta.weath4*DCEweath4[i] +beta.weath5*DCEweath5[i] +
beta.sleep2*DCEsleep2[i] +beta.sleep3*DCEsleep3[i] +beta.sleep4*DCEsleep4[i] +beta.sleep5*DCEsleep5[i] +
beta.act2*DCEact2[i] +beta.act3*DCEact3[i] +beta.act4*DCEact4[i]     +beta.act5*DCEact5[i]

y2[i] ~ dbern(p[i])
}
beta.concern2 ~ dunif(0,100)
beta.concern3 ~ dunif(0,100)
beta.concern4 ~ dunif(0,100)
beta.concern5 ~ dunif(0,100)
beta.breath2 ~ dunif(0,100)
beta.breath3 ~ dunif(0,100)
beta.breath4 ~ dunif(0,100)
beta.breath5 ~ dunif(0,100)
beta.weath2 ~ dunif(0,100)
beta.weath3 ~ dunif(0,100)
beta.weath4 ~ dunif(0,100)
beta.weath5 ~ dunif(0,100)
beta.sleep2 ~ dunif(0,100)
beta.sleep3 ~ dunif(0,100)
beta.sleep4 ~ dunif(0,100)
beta.sleep5 ~ dunif(0,100)
beta.act2 ~ dunif(0,100)
beta.act3 ~ dunif(0,100)
beta.act4 ~ dunif(0,100)
beta.act5 ~ dunif(0,100)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:58:51.857

尝试

dnorm(0, 1.0E-8)I(0, 1.0E8)

请注意 1.0 而不是 10，这会导致“预期的右括号”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:27:39.247

在你的情况下，我更喜欢半平法线，即类似

```
dnorm(0, 1.0E-8)I(0, 1.0E8) 
```

试一试。

编辑：添加的只是将分布限制在从到`I(a, b)`的区间。`a``b`

# javascript - 数据绑定到弹性盒

> ID：14277705
> 
> 赞同：1
> 
> 时间：2013-01-11T11:55:11.743
> 
> 标签：javascript, css, windows-8, winjs

是否可以像使用 WinJS.ListView 一样将数据绑定到弹性框？我在想类似的东西...

```
<!-- default.html -->
<div class="flexbox" style="display:-ms-flexbox;">
  <div class="itemA"></div>
  <div class="itemB"></div>
  <div class="itemC"></div>
</div>

/* JavaScript */
var aList = new WinJS.Binding.List([{name:"item 1"},{name:"item 2"},{name:"item 3"}]);
var flexbox = document.querySelector(".flexbox");
//is there some magic in WinJS to bind flexbox to aList??? 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:02:47.780

没有（据我所知）。WinJS 中的数据绑定需要一个控件（ListView）和一个 IListDataSource（如您提到的 WinJS.Binding.List）。尽管使用类似...

```
var flexbox = document.querySelector(".flexbox");
var myArray = [{name:"item 1"},{name:"item 2"},{name:"item 3"}];
myArray.forEach(function(item) {
    var div = document.createElement("div");
    div.innerText = item.name;
    flexbox.appendChild(div);
}); 
```

希望有帮助。

# android - Android：手机是否支持 LTE？

> ID：14277716
> 
> 赞同：0
> 
> 时间：2013-01-11T11:56:08.623
> 
> 标签：android

有没有办法以编程方式确定特定的基于 Android 的手机（非 root）是否支持 LTE？我在文档中找不到任何相关信息。

任何信息都会有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:06:32.087

它不在 API 中，所以官方的答案是否定的。我对第一部 LTE 手机进行了逆向工程，但没有找到任何可以使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T20:25:48.533

使用 CellInfoLTE 检查诸如 cellID 或信号强度之类的内容

如果它返回 null，那么它不支持 LTE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T09:27:13.350

是的，有办法！

Android 电话管理器可以帮助您。

您将不得不编写一个简单的 java 代码。

“tm.getNetworkType()”返回网络类型。

有关更多信息，请参阅[http://developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

# wpf - 如何在一个主窗口中使用多个 ViewModel

> ID：14277720
> 
> 赞同：1
> 
> 时间：2013-01-11T11:56:18.520
> 
> 标签：wpf, xaml, mvvm, viewmodel, icommand

我在 WPF 中有一个 C# 项目。我以前使用过 MVC，现在我正在尝试将 MVVM 与 XAML 结合使用。

我有多个模型，我有一个带有 Tabitems 的 GUI 窗口，我有多个 ViewModel。每个选项卡项都与每个模型相关，因此我为每个模型都有一个 ViewModel。

现在我想使用绑定（为什么还要使用 WPF/XAML）。如何将按钮绑定到 ViewModel X 中的命令？

例如：

*   两种模型：房子和人
*   视图：GUI 中的两个 TabItem，一个关于与房屋的所有交互的 TabItem，以及一个用于人的 TabItem。
*   两个 ViewModel，与每个 TabItem 相关联。
*   我有命令出售房屋。

我看到很多代码只是绑定到命令的名称，但由于我有多个视图，而不仅仅是 1，我该怎么做？我应该创建 1 个 ViewModel 来处理所有其他 ViewModel 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:47:05.677

> 我看到很多代码只是绑定到命令的名称，但由于我有多个视图，而不仅仅是 1，我该怎么做？

确保您了解绑定系统的工作原理。您正在绑定到 DataContext。因此，如果每个单独的选项卡都有一个单独的 DataContext 值集，那么您可以使用命令的名称进行绑定。

知道了这一点，您就可以继续使用您建立的模式。以我的拙见，我认为它会变得过于复杂。大多数 MVVM 开发人员正在应用 View 到 ViewModel 的一对一关系（不过，在谈论 UserControl 对象时事情会变得很棘手）。不过，没有什么是一成不变的，因此最终取决于您要如何进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:53:46.397

我猜您的视图模型数量有限。所以你有两个选择：第一，是使用[DataTemplateSelector](http://msdn.microsoft.com/ru-ru/library/system.windows.controls.datatemplateselector.aspx)，第二是在 xaml 中定义每个`TabItem`视图并将每个视图绑定`Content`到必要的 VM。

# ubuntu - 如何在 QItemDelegate 的 paint 方法中绘制一个小部件

> ID：14277723
> 
> 赞同：1
> 
> 时间：2013-01-11T11:56:28.700
> 
> 标签：ubuntu, delegates, qt4

[在 2007 年讨论过，](http://www.qtcentre.org/threads/8660-Drawing-a-widget-in-QItemDelegate-s-paint-method)但没有明确回答我。是否可以`QWidget`在`paint`函数中显示`QAbstractItemDelegate`？

* * *

以下是我想要实现的目标。希望这可能会有所帮助。

我有实现的数据项`QStandardItem`，我想在 2 个不同的视图上显示。在 1 个视图（比如 View-A）上，我只显示静态值，所以我什至不需要委托。但是在另一个（视图-B）上，甚至在用户开始编辑之前，我想显示每个项目作为其成员的编辑器小部件。View-A 和 View-B 具有相同数量的元素（项目）以不同的格式显示。View-B 在垂直列表中显示元素，并且由于项目数可能超过 100，因此 View-B 通常显示垂直滚动条。

单击 View-A 上的任何项目将突出显示 View-B 上的相应项目（我正在考虑通过`QAbstractItemView::setCurrentIndex`或其他方式实现这一点，不确定，因为我尚未测试，但拥有此功能是我坚持的原因之一尝试 MVC 或任何 ItemWidget 类）。

# python - 带有CSS的python gtk webkit，宽度问题

> ID：14277724
> 
> 赞同：1
> 
> 时间：2013-01-11T11:56:29.910
> 
> 标签：python, css, webkit, gtk, pygtk

我正在使用 Python GTK 和 WebKit 创建一个桌面应用程序。主要基于[本教程](http://www.aclevername.com/articles/python-webgui/)。

我在 HTML5 中创建我的视图并使用 CSS。

问题是当我正在使用`width:100%`或`repeat-x`我的窗口宽度不断增加到无穷大时。

我试着放进去`max-width:100%`，`<body>`但它没有帮助。

现在，我让它固定宽度，这工作正常，但我想让他的窗口可调整大小，所以里面的所有内容都不会让它看起来很难看。

对此有任何帮助或解决方法吗？

**更新**

我使用的代码与本教程中给出的代码相同

[http://www.aclevername.com/articles/python-webgui/](http://www.aclevername.com/articles/python-webgui/)

在 HTML 文件中，我只添加了一个页眉和页脚。对于页脚，我刚刚创建了一个 div，

```
 <div id="footer" style="width:100%; 
 position:absolute; align:center; bottom:0px; padding-top:10px; 
height:50px; background:url(img/int-bg.png) left top;">
</div> 
```

这使得窗口无限扩大其宽度。

如果我在 CSS 中修复宽度，那么它不会进行扩展。并且工作正常，对于固定大小的窗口。

```
 <div id="footer" style="width:800px;
 position:absolute; align:center; bottom:0px; padding-top:10px; 
height:50px; background:url(img/int-bg.png) left top;">
</div> 
```

但我想让它重新调整大小。如何实现这种灵活性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:43:54.943

这可能会有所帮助（我已经包含了一些上下文以帮助其他读者看到这是一个涉及 PyWebKitGtk 想要调整其父容器大小的问题），

```
import gtk
import webkit

window = gtk.Window()
browser = webkit.WebView()
box = gtk.VBox(homogeneous=False, spacing=0)
window.add(box)
# ...
box.pack_start(browser, expand=True, fill=True, padding=0)
browser.set_size_request(400, 600) # <-- constrain width and height of browser
window.show_all() 
```

出现问题的原因是：设置“width: 100%”会导致溢出滚动。但在这个 Gtk 示例中，它改为触发调整大小，使父窗口变大。因为父级刚刚变大，“宽度：100%”现在代表稍微多一点的空间，这会导致反馈周期不稳定。

更好的解决方案可能是调整填充和边距等，以便在请求“宽度：100％”时它们根本不会触发调整大小。例如，在这里使用 CSS 重置似乎可以解决问题：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

我也是这篇文章的作者，很高兴尽管这篇文章已经过时了，但它仍然能给人灵感。

# android - 如何从 google play 开发者控制台中删除草稿？

> ID：14277730
> 
> 赞同：14
> 
> 时间：2013-01-11T11:56:37.373
> 
> 标签：android, google-play, publish

我在 Google Play 开发者控制台上有一份测试草稿。它是空的，上面没有 apk 文件，也没有描述，我只是创建它来检查一些东西。

现在草稿在这里，我找不到删除它的按钮。

我怎样才能删除那个草稿？我找不到任何关于它的文档。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T16:14:05.263

我四处寻找，找不到删除草稿的方法。

但是，您可以将其名称更改为您未来的应用程序（转到商店列表 - 标题），让您的后顾之忧^^

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T12:23:30.070

右上角的菜单中有一个删除应用程序的选项 ![在此处输入图像描述](../Images/3f4c2e8a4b864c987d93d1704fa72802.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-16T14:36:58.243

截至 2017 年 8 月，删除应用程序的唯一方法是单击列表视图中的垃圾桶图标。之前的答案引用了已删除的 UI。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-15T01:46:59.990

1）如果您注意到这一点： [![在此处输入图像描述](../Images/130fca3bb1bfc6a5c1a95ca302df0542.png)](https://i.stack.imgur.com/6adr6.jpg)

2) 进入发布页面，点击“丢弃”，如下图： [![在此处输入图像描述](../Images/f9e8ff470620464b000f07dbf3dac2ac.png)](https://i.stack.imgur.com/PBmid.jpg)

3）然后你删除“草稿”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T00:12:52.840

有一种方法。

假设您已经有一个草稿，并且您想上传另一个草稿。上传第二稿并保存。它可能会抱怨你不能有两个草稿，因为用户可以安装多个 APKs ..fine。

现在存档原始 APK（按存档按钮）。现在按保存。现在你可以使用这个草稿，而另一个被存档。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-10T20:32:56.690

在应用列表页面上有一个删除垃圾箱图标。单击它并确认删除。

[看图](https://i.stack.imgur.com/4HhYA.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-22T22:20:38.697

现在您必须联系支持人员删除一个应用程序，并且该应用程序需要在`Google Play Console > Version > Configuration > Advanced Settings > Application availability`.

> **删除应用或游戏**
> 
> 您可以从 Play 管理中心永久移除草稿应用或游戏。您还可以删除：
> 
> *   尚未在任何设备上安装的已发布应用或游戏
> *   用户无权重新安装的已发布应用或游戏
> 
> 在这些情况下，请[联系我们的支持团队](https://support.google.com/googleplay/android-developer/contact/publishing)，请求永久删除您的应用或游戏数据。

引自[https://support.google.com/googleplay/android-developer/answer/9023647](https://support.google.com/googleplay/android-developer/answer/9023647)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-10T05:57:03.310

转到所有应用程序选项卡，然后单击应用程序列表上的垃圾桶按钮以删除草稿应用程序。

[![转到所有应用程序选项卡，然后单击应用程序列表上的垃圾桶按钮以删除草稿应用程序](../Images/404b9b6acc398bd293fc1b64df08b13c.png)](https://i.stack.imgur.com/pueIe.png)

# bash - 在bash中循环文件内容

> ID：14277732
> 
> 赞同：0
> 
> 时间：2013-01-11T11:56:40.360
> 
> 标签：bash

我有一个文件 /tmp/a.txt ，我想在变量中多次读取其内容。如果达到 EOF，那么它应该从头开始。

即如果文件的内容是“abc”，我想得到10个字符，它应该是“abcabcabca”。

为此，我写了一个明显的脚本：

```
while [ 1 ]; 
  do cat /tmp/a.txt; 
done | 
for i in {1..3}; 
  do read -N 10 A; 
  echo "For $i: $A"; 
done 
```

唯一的问题是它挂起！我不知道为什么会这样！

我也对 bash 中的其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:11:17.790

要一遍又一遍地重复一行，您可以：

```
yes "abc" | for i in {1..3}; do read -N 10 A; echo "for $i: $A"; done 
```

yes 将输出 'forever'，但是 1..3 中的 for i 只会执行“do ... done;” 部分 3 次

是的，在字符串之后添加一个“\n”。如果您不想要它，请执行以下操作：

```
 yes "abc" | tr -d '\n' | for i in {1..3}; do read -N 10 A; echo "for $i: $A"; done 
```

在上述所有内容中，请注意，由于读取是在管道之后，因此在 bash 中它将位于子 shell 中，因此“$A”只能在“do....done;”中使用。区域，然后迷路！

循环并从文件中读取，也不在子shell中这样做：

```
for i in {1..3}; do read -N 10 A ; echo "for $i: $A"; done <$(cat /the/file) 
```

为确保 /the/file 中有足够的数据，请随意重复：

```
for i in {1..3}; do read -N 10 A ; echo "for $i: $A"; done <$(cat /the/file /the/file /the/file) 
```

测试最新： echo -n "abc" > /the/file (-n, 所以没有训练换行符)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-02T18:40:29.397

由于第一个循环，脚本挂起。在第二个循环 (for) 的三个迭代完成后，第一个循环重复启动`cat`读取文件然后将内容写入`abc`管道的新实例。在以后的迭代中，对管道的写入不再起作用。是的，有一个 SIGPIPE 杀死，但是对于`cat`命令而不是循环本身。所以解决方案是在正确的地方捕获错误：

```
while [ 1 ]; 
  do cat /tmp/a.txt || break
done | 
for i in {1..3}; 
  do read -N 10 A; 
  echo "For $i: $A"; 
done 
```

此外：输出如下：

```
For 1: abcabcabca
For 2: bcabcabcab
For 3: cabcabcabc
<-- (Here the shell hangs no more) 
```

# javascript - 首先在 Javascript 循环中创建的标签未实现

> ID：14277737
> 
> 赞同：0
> 
> 时间：2013-01-11T11:56:52.017
> 
> 标签：javascript, jquery

我正在尝试用 thumnailpictures 填充 div (class='thumb")。图片的名称是从 xml 文件中收集的。每个缩略图图片都封装有一个 a-tag，该标签指向一个显示完整图片的函数。

在某些浏览器上，第一个缩略图似乎没有这个 a-tag...点击它没有任何动作...

```
var rubriek = gup('rubriek'), // rubriek is a parameter in the url of this page pointing a specific photogallery
    gallerij = rubriek + "gallery.xml",
    xmlDoc = loadXMLDoc(gallerij),
    x = xmlDoc.getElementsByTagName("filename"),
    legebron = x[0].childNodes[0].nodeValue;

for (i = 0; i < x.length; i++) {
    var beeldnummer = x[i].childNodes[0].nodeValue,
        index = i + 1,
        kleinbeeld = "/" + rubriek + "images/thumb/" + beeldnummer;

    $('.thumb').append('<p><a class="kleintje" onclick="toonDezeFoto(&quot;' + beeldnummer + '&quot;,' + index + ',' + x.length + ');">
<img src="' + kleinbeeld + '" id="' + index + '">
</a></p>');
} 
```

见[http://www.karinedaelman.be/foto.php?rubriek=Mensen/](http://www.karinedaelman.be/foto.php?rubriek=Mensen/)

找到解决方案：保留缩略图的 div 的 z-index 太低。另一个包含网站徽标的 div 具有更高的 z-index 和 100% 的宽度。因此，第一个缩略图图像位于站点徽标下方的图层上，并且鼠标事件无法访问...。

# jquery - .append .prepend 问题

> ID：14277738
> 
> 赞同：0
> 
> 时间：2013-01-11T11:57:08.417
> 
> 标签：jquery, jquery-plugins, jquery-selectors, append, prepend

嗨，我在使用 JQuery 的 .append .prepend 方法时遇到问题我非常了解这些方法，但是当我尝试这样的代码时发生了一个奇怪的故障：

```
$("#nashgraphics-menu ul li a.toplevel-a")
 .prepend('<span class="main-navigation-button-left"></span><span class="main-navigation-button-body"><h1>');
$("#nashgraphics-menu ul li a.toplevel-a")
 .append('</h1></span><span class="main-navigation-dropdown-button-right"></span>'); 
```

它应该可以正常工作，但不幸的是它没有，我想知道为什么

**注意：我说的是“链接”文本，这些标签应该包含该文本，但它没有**

代码应该输出这个：

```
<span class="main-navigation-button-left"></span>
<span class="main-navigation-button-body"><h1>Link</h1></span>
<span class="main-navigation-dropdown-button-right"></span> 
```

但它是这样的：

```
<span class="main-navigation-button-left"></span>
<span class="main-navigation-button-body"><h1></h1></span>Link<span class="main-navigation-dropdown-button-right"></span> 
```

**该文本“链接”应该在标签内**

**顺便说一下，这是我在 Wordpress 中使用的整个代码**

```
;(function($){
$.fn.nashgraphics_menu = function(){
    $("#nashgraphics-menu ul li").each(function(index){
        $('#nashgraphics-menu ul li').addClass('toplevel-nochild');
        $('#nashgraphics-menu ul li ul li').removeClass('toplevel-nochild').addClass('nochild');
        $('#nashgraphics-menu ul li:has(ul)').removeClass('toplevel-nochild nochild').addClass('toplevel');
        $('#nashgraphics-menu ul li ul li:has(ul)').removeClass('toplevel nochild').addClass('haschild');

        $('#nashgraphics-menu ul li a').addClass('toplevel-nochild-a');
        $('#nashgraphics-menu ul li ul li a').removeClass('toplevel-nochild-a').addClass('nochild-a');
        $('#nashgraphics-menu ul li:has(ul) > a').removeClass('toplevel-nochild-a nochild-a').addClass('toplevel-a');
        $('#nashgraphics-menu ul li ul li:has(ul) > a').removeClass('toplevel-a nochild-a').addClass('haschild-a');
    });

    $("#nashgraphics-menu ul li a.toplevel-a").prepend('<span class="main-navigation-button-left"></span><span class="main-navigation-button-body"><h1>');
    $("#nashgraphics-menu ul li a.toplevel-a").append('</h1></span><span class="main-navigation-dropdown-button-right"></span>');

    $('#nashgraphics-menu ul li a.haschild-a').append('&nbsp; &raquo;');
}; 
```

})(jQuery);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:03:04.433

您正在考虑*标记*，但是当您修改页面时，您不是在处理标记，而是在处理 DOM 对象。

如果您的目标是将每个`#nashgraphics-menu ul li a.toplevel-a`元素放入您描述的结构中，请使用以下[`wrap`功能](http://api.jquery.com/wrap/)：

```
$("#nashgraphics-menu ul li a.toplevel-a").wrap('<span class="main-navigation-button-left"></span><span class="main-navigation-button-body"><h1></h1></span><span class="main-navigation-dropdown-button-right"></span>'); 
```

...虽然我不是 100% 确定`wrap`可以处理这样的复杂结构。您可能必须单独创建结构，如下所示：

```
$("#nashgraphics-menu ul li a.toplevel-a").each(function() {
    var $a = $(this),
        $wrapper;

    // Create the wrapper
    $wrapper = $('<span class="main-navigation-button-left"></span><span class="main-navigation-button-body"><h1></h1></span><span class="main-navigation-dropdown-button-right"></span>');

    // Insert it prior to the anchor
    $wrapper.insertBefore($a);

    // Move the anchor into the `h1`
    $wrapper.find('h1').append($a);
}); 
```

* * *

仅供参考，举一个不太复杂的例子`wrap`，这个：

```
$(".foo").wrap('<div class="bar"></div>'); 
```

...在每个带有 class 的元素周围放置一个`div`with class 。`"bar"``"foo"`

* * *

回复您的评论：

> 是的，我也考虑过这一点，但我担心的是我想将文本包装在标签内，而不是标签本身

好吧，这有点不同：

```
$("#nashgraphics-menu ul li a.toplevel-a").each(function() {
    var $a = $(this);

    $a.html('<span class="main-navigation-button-left"></span><span class="main-navigation-button-body"><h1>' + $a.html() + '</h1></span><span class="main-navigation-dropdown-button-right"></span>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:02:11.670

浏览器或 jQuery 可能会添加结束标记以生成有效的 HTML，因为自从执行以来，它在`prepend`执行之前将无效`append`。

看看[`wrap`方法](http://api.jquery.com/wrap/)。

> 描述：在匹配元素集中的每个元素周围包裹一个 HTML 结构。

# android - 应用程序从应用程序的一开始就将 phone_state 设为空闲。这不是必需的

> ID：14277744
> 
> 赞同：0
> 
> 时间：2013-01-11T11:57:41.860
> 
> 标签：android, streaming, android-mediaplayer

```
private ImageButton malayalam, hindi, tamil;

private MediaPlayer mp = null;
ImageButton pause;
ImageView facebook, twitter, linkedin;
private String TAG = "debug";
boolean playVideo = false, pauseVideo = true, isVideoPlaying = false, streaming = true;
TextView stream, events;
AudioManager audioManager;
ProgressBar progress;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);

    progress = (ProgressBar)findViewById(R.id.progress);
    facebook = (ImageView)findViewById(R.id.facebook);
    twitter = (ImageView)findViewById(R.id.twitter);
    linkedin = (ImageView)findViewById(R.id.linkedin);
    pause = (ImageButton)findViewById(R.id.pause);
    pause.setVisibility(View.GONE);
    stream = (TextView)findViewById(R.id.textview2);
    events = (TextView)findViewById(R.id.events);
    playFm();
    ;

    audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    SeekBar volControl = (SeekBar)findViewById(R.id.seekbar);
    volControl.setMax(maxVolume);
    volControl.setProgress(curVolume);
    volControl.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        @Override
        public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
            // TODO Auto-generated method stub
            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, arg1, 0);
        }

        @Override
        public void onStartTrackingTouch(SeekBar arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStopTrackingTouch(SeekBar arg0) {
            // TODO Auto-generated method stub

        }

    });

    pause.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            if (playVideo) {

                playVideo = false;
                pauseVideo = true;
                isVideoPlaying = true;
                pause.setVisibility(View.VISIBLE);
                onPrepared(mp);
            } else {

                pauseFm();
                playVideo = true;
                pauseVideo = false;
                isVideoPlaying = false;
                pause.setVisibility(View.VISIBLE);
                Toast.makeText(MyTuneIndia.this, "paused", Toast.LENGTH_SHORT).show();
                pause.setBackgroundResource(R.drawable.play);
            }

        }
    });

    PhoneStateListener phoneStateListener = new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if (state == TelephonyManager.CALL_STATE_RINGING) {
                // do all necessary action to pause the audio
                if (mp != null) {// check mp
                    if (mp.isPlaying()) {
                        Toast.makeText(MyTuneIndia.this, "Incoming call..!!.",
                                Toast.LENGTH_SHORT).show();
                        pauseFm();
                        playVideo = true;
                        pauseVideo = false;
                        isVideoPlaying = false;
                        pause.setVisibility(View.VISIBLE);
                        Toast.makeText(MyTuneIndia.this, "paused", Toast.LENGTH_SHORT).show();
                        pause.setBackgroundResource(R.drawable.play);

                    }
                }
                // Incoming call: Pause music
            } else if (state == TelephonyManager.CALL_STATE_IDLE) {
                Toast.makeText(MyTuneIndia.this, "Playing Again..!!", Toast.LENGTH_SHORT)
                        .show();
                playVideo = false;
                pauseVideo = true;
                isVideoPlaying = true;
                pause.setVisibility(View.VISIBLE);
                onPrepared(mp);
            } else if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
                Toast.makeText(MyTuneIndia.this, "Outgoing Call..!!", Toast.LENGTH_SHORT)
                        .show();
                pauseFm();
                playVideo = true;
                pauseVideo = false;
                isVideoPlaying = false;
                pause.setVisibility(View.VISIBLE);
                Toast.makeText(MyTuneIndia.this, "paused", Toast.LENGTH_SHORT).show();
                pause.setBackgroundResource(R.drawable.play);

            }
            super.onCallStateChanged(state, incomingNumber);
        }
    };// end PhoneStateListener

    TelephonyManager mgr = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
    if (mgr != null) {
        mgr.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
    }
}

public void playFm() {
    Uri myUri = Uri.parse("http://xxx.mp3");
    try {
        if (mp == null) {
            this.mp = new MediaPlayer();
        } else {
            mp.stop();
            mp.reset();
        }
        mp.setDataSource(this, myUri); // Go to Initialized state
        mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mp.setOnPreparedListener(this);
        mp.setOnBufferingUpdateListener(this);

        mp.setOnErrorListener(this);
        mp.prepareAsync();

        Log.d(TAG, "LoadClip Done");
    } catch (Throwable t) {
        Log.d(TAG, t.toString());
    }

}

public void pauseFm() {

    mp.pause();
}

@Override
public void onBufferingUpdate(MediaPlayer mp, int percent) {
    // TODO Auto-generated method stub

}

@Override
public boolean onError(MediaPlayer arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onPrepared(MediaPlayer arg0) {
    // TODO Auto-generated method stub
    pause.setBackgroundResource(R.drawable.pause);
    pause.setVisibility(View.VISIBLE);
    stream.setVisibility(View.GONE);
    progress.setVisibility(View.GONE);
    streaming = false;
    isVideoPlaying = true;
    if (isVideoPlaying)
        mp.start();
}

@Override
public void onCompletion(MediaPlayer mp) {
    // TODO Auto-generated method stub

}

public boolean onKey(View v, int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onBackPressed() {
    if (isVideoPlaying) {
        mp.stop();
        finish();
    } else if (streaming) {
        Toast.makeText(MyTuneIndia.this, "Streaming stopped..", Toast.LENGTH_SHORT).show();
        mp.reset();
        mp.release();
        finish();
    } else {
        finish();
    }
} 
```

这是我用于流式传输音频和播放的在线音频播放器的代码。现在的问题是它应该在应用程序刚刚启动时运行代码。但它正在这样做。当我从启动器启动应用程序时，它会说“再次播放”，这不在我的主代码中，而是这`PHONE_STATE_IDLE`部分代码。因此，任何人都可以建议我该怎么做，以便应用程序第一次按设计运行，并且这`PHONE_STATE_IDLE`部分代码仅在应用程序已经运行时收到或发出任何呼叫时实现。提前感谢很多..

希望你们都明白我的意思..

# c# - 如何在不绑定 WPF 的情况下将项目添加到列表视图中

> ID：14277746
> 
> 赞同：0
> 
> 时间：2013-01-11T11:57:45.587
> 
> 标签：c#, wpf, listview, gridview

我想将一些项目添加到作为网格视图的列表视图中。我想通过代码来完成它而不实现绑定选项，只需将值添加到某种单元格集。
我知道这不是 WPF 方式，但我迫切需要这样做，我似乎找不到我正在寻找的答案。
我查看了多绑定、转换器和常规绑定，但它不会给我现在需要的答案。

甚至可能吗？
如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:35:51.743

你可以用 a`DataGrid`代替 a`ListView`吗？然后你可以设置`AutoGenerateColumns`为true（甚至默认为true）。

```
<DataGrid x:Name="myDataGrid" AutoGenerateColumns="True"/> 
```

然后在后面的代码中做这样的事情：

```
myDataGrid.Items = new List<MyDataType>();
foreach(var item in itemsToAdd){
    myDataGrid.Items.Add(item);
} 
```

或更短：

```
myDataGrid.ItemsSource = myListOfItems; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-27T02:46:49.460

您需要像“[0]”这样的索引绑定。

```
<Grid>
    <ListView x:Name="lv" />
</Grid>

lv.Items.Clear();
var gv = new GridView();
lv.View = gv;

var columns = new List<string> { "col1", "col2" };
for(int index = 0; index < columns.Count; index++)
{
    gv.Columns.Add(new GridViewColumn
    {
        Header = columns[index],
        DisplayMemberBinding = new Binding("[" + index.ToString() + "]")
    });
}

// Populate list
var row1 = new List<string> { "(1, 1)", "(2, 1)" };
var row2 = new List<string> { "(1, 2)", "(2, 2)" };
lv.Items.Add(row1);
lv.Items.Add(row2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:36:02.290

不要纠结于是否加载代码隐藏中的控件。我参与过主要的 Silverlight 项目，其中混合了两种操作。

```
public MainWindow()
{
    InitializeComponent();

    lvPrimary.ItemsSource = new List<string> { "Alpha", "Beta", "Gamma" };

} 
```

Xaml 看起来像这样：

```
<Window x:Class="WPFStackOverflow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ListView Name="lvPrimary" Width="200"/>
    </Grid>
</Window> 
```

# r - 搜索与变量匹配的列

> ID：14277747
> 
> 赞同：0
> 
> 时间：2013-01-11T11:57:49.427
> 
> 标签：r

实际上，我在这里有一个简单的问题，我有一个数据矩阵（file1）（比如 20 列乘 100 行）。看起来像这样

```
A    B    C    D    E    F ...  
5    6    2    3    4    5 ...
5    6    2    3    4    5 ...
5    6    2    3    4    5 ...
5    6    2    3    4    5 ...
5    6    2    3    4    5 ...
.    .    .    .    .    .
.    .    .    .    .    .
.    .    .    .    .    . 
```

我有一个名为“R”的变量

```
R <- c(A,C,E,F) 
```

我想创建一个新矩阵（file2），其中仅包含与变量“R”匹配的列

我认为这应该是一个简单的命令，但我找不到正确的方法来编写它。请注意，ABCDEF 是列名，而不是第一行。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:07:09.673

试试这个：

```
m <- matrix(rnorm(100), ncol = 10)
colnames(m) <- LETTERS[1:10]
myR <- c("A", "C", "D")
m2 <- m[,myR] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:09:18.307

那这个呢？

```
R = c("A","C","E","F");
file2 = file1[,R]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:11:45.797

如果要匹配列名：

```
Dataset <- data.frame(A=A,B=B,C=C,D=D,E=E,F=F)
R <- c("A","C","E","F")   
match(R,names(Dataset)) 
```

如果实际上您的 R 包含数据集 A、C、E、F 并且因为您可能有不同的名称但值列表相同：

```
Dataset <- data.frame(A=A,B=B,C=C,D=D,E=E,F=F)
R <- data.frame(A=A,C=C,E=E,FF)   
which(match(names(R),names(Dataset)) & match(R,Dataset)) 
```

# c# - 在多线程中处理异常的指南

> ID：14277759
> 
> 赞同：0
> 
> 时间：2013-01-11T11:58:41.423
> 
> 标签：c#, wpf, mvvm

我正在开发一个遵循 MVVM 架构的 WPF 应用程序。此应用程序是多线程的。现在我想知道我应该如何处理我的应用程序中的异常。

请让我知道在遵循 MVVM 的多线程 WPF 应用程序中处理异常的指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:56:35.303

如果您搜索特定异常，请在异常行中添加断点并检查调用堆栈

如果您想要一个通用的捕获所有异常，那么您的 App.xaml 中的[DispatcherUnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)可能会完成您想要的工作。检查此链接上有关其他线程处理的文档。

# lazy-loading - Orchard Cms 在 LazyField 中获取 UserPart 字段数据

> ID：14277762
> 
> 赞同：1
> 
> 时间：2013-01-11T11:58:46.853
> 
> 标签：lazy-loading, orchardcms

我一直在关注[这篇文章](http://skywalkersoftwaredevelopment.net/orchard-development/lazyfield-t)，以了解 T 的惰性字段，我想我理解，但是我无法获取以这种方式加载的零件的相关字段数据

目标 - 在博客文章中显示博客文章作者的照片。

*   我想添加一个内容部分“内容作者”
*   部分编辑器应显示为果园用户的下拉列表。（不管内容所有者 cms 用户应该可以选择作者）
*   我已将图像上传字段添加到用户内容类型
*   我想在内容作者部分的视图中显示前端用户的图像

对于第一部分，我创建了内容类型并使用 UserPart 的惰性 Filed 来获取用户名。但是，当我尝试获取 UserPart 的关联字段时。似乎有任何。

```
public class ContentAuthorRecord : ContentPartRecord
{
    public virtual string AuthorEmail { get; set; }
}

public class ContentAuthorPart : ContentPart<ContentAuthorRecord>
{
    internal readonly LazyField<UserPart> Owner = new LazyField<UserPart>();

    public string AuthorEmail
    {
        get { return Record.AuthorEmail; }
        set { Record.AuthorEmail = value; }
    }

    public UserPart Author
    {
        get { return Owner.Value; }
        set { Owner.Value = value; }
    }

    public string AuthorName
    {
        get
        {
            if (Author == null)
                return "Riders for health";
            else
            {
                return Author.UserName;
            }
        }

    }
}

public class ContentAuthorHandler :ContentHandler
{
        private readonly IContentManager _contentManager;

        public ContentAuthorHandler(IRepository<ContentAuthorRecord> repository, IContentManager contentManager)
        {
            _contentManager = contentManager;

            OnActivated<ContentAuthorPart>(SetUpCustomPart);
            Filters.Add(StorageFilter.For(repository));
        }

        private void SetUpCustomPart(ActivatedContentContext content, ContentAuthorPart part)
        {

            // Setup the getter of the lazy field
            part.Owner.Loader(() => _contentManager.Query<UserPart, UserPartRecord>().List().FirstOrDefault(x => x.Email == part.AuthorEmail));

        }

  } 
```

我希望能够通过类似的方式访问该字段

> (ImageUploadField.Fields.ImageUploadField)Author.Fields.FirstOrDefault(x => x.Name == "照片");

在零件类中形成

（虽然这让每件事都变得有点脆弱，硬编码一个字段名，但我不知道如何 eles 去做）

**更多信息**

我有一个 HeaderPart，其中通过显示处理程序中的 cms（不在代码中）添加了一个 Image 字段我像这样获取字段

```
 protected override DriverResult Display(HeaderPart part, string displayType, dynamic shapeHelper)
        {
            if (part.HeaderType == HeaderType.Full_width_hero_image)
            {
                var field = (ImageUploadField) part.Fields.FirstOrDefault(f => f.Name == "HeaderImage");

                if (field != null)
                {
                    return ContentShape("Parts_Header_ImageHero",
                        () => shapeHelper.Parts_Header_ImageHero(ImagePath: field.ImagePath, ImageTitle: field.FileName));
                }
                return null;
            }
            if (part.HeaderType == HeaderType.Full_width_hero_video)
            {
                return ContentShape("Parts_Header_VideoHero", () => shapeHelper.Parts_Header_VideoHero(VideoUrl: part.VideoUrl));
            }
            if (part.HeaderType == HeaderType.Body_width_video)
            {
                return ContentShape("Parts_Header_VideoBody", () => shapeHelper.Parts_Header_VideoBody(VideoUrl: part.VideoUrl));
            }
            return null;
        } 
```

这行得通，但是我可以对加载到惰性字段中的部分执行相同的操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T09:41:45.387

首先转换为动态，然后语法变得更简单：`((dynamic)part.ContentItem).NameOfTheType.NameOfTheField.NameOfTheProperty`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T00:48:50.740

如果您已通过 CMS 界面将字段添加到用户内容类型，它可能已将字段添加到与您期望的部分不同的部分。如果您将字段添加到用户内容类型，默认情况下它会将字段添加到名为“用户”的新部分，而不是“用户部分”。尝试按照以下方式搜索内容项中的所有部分：

```
(ImageUploadField.Fields.ImageUploadField)Author.ContentItem.Parts
.SelectMany(p => p.Fields).FirstOrDefault(f => f.Name == "Photo"); 
```

或直接从“用户”部分：

```
(ImageUploadField.Fields.ImageUploadField)Author.ContentItem.Parts
.First(p => p.PartDefinition.Name == p.ContentItem.ContentType).Fields
.FirstOrDefault(f => f.Name == "Photo"); 
```

# c# - C# 添加列表 列出 > 数组

> ID：14277763
> 
> 赞同：9
> 
> 时间：2013-01-11T11:58:55.797
> 
> 标签：c#, arrays, list

我可以通过这种方式添加`List<string>`数组`List<List<string>>`：

```
 List<string> first = new List<string> { "one", "two", "three" };
        List<string> second = new List<string> { "four", "five", "six" };

        List<List<string>> list_array = new List<List<string>> { first, second }; 
```

现在我需要创建几个填充有数据库记录的列表，然后将此列表添加到`List<List<string>>`数组中：

```
 List<List<string>> array_list;

            while (dr.Read())
            {
                string one = dr["Row1"].ToString();
                string two = dr["Row2"].ToString();

                List<string> temp_list = new List<string> { one, two };

                //Here I need to add temp_list to array_list
            } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T12:00:12.500

创建一个空的array_list：

```
List<List<string>> array_list = new List<List<string>>(); 
```

然后使用`Add`方法添加项目：

```
array_list.Add(temp_list); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T12:00:44.497

更改您的变量声明以初始化一个空列表：

```
List<List<string>> array_list = new List<List<string>>(); 
```

然后，只需调用 .Add();

```
List<string> temp_list = new List<string> { one, two };

//Here I need to add temp_list to array_list
array_list.Add(temp_list); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T12:00:37.820

这应该有效：

```
array_list.Add(temp_list); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T12:00:54.557

除非我读错了，否则你应该能够做到：

```
array_list.add(temp_list); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T12:02:36.507

```
List<List<string>> array_list = new List<List<string>>();

while (dr.Read())
{
   string one = dr["Row1"].ToString();
   string two = dr["Row2"].ToString();
   List<string> temp_list = new List<string> { one, two };
   array_list.add(temp_list)
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T12:03:15.267

```
List<List<string>> array_list = new List<List<string>>();
while (dr.Read())
        {
            string one = dr["Row1"].ToString();
            string two = dr["Row2"].ToString();

            List<string> temp_list = new List<string> { one, two };

            array_list.Add(temp_list);
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-11T12:01:20.363

可以直接添加；

```
array_list.Add(temp_list); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-22T06:39:59.887

您必须始终记住创建新的 temp_list，不要使用 temp_list.clear()，就像我在项目中所做的那样 =_=。

> 块引用

```
 List<List<string>> array_list = new List<List<string>>();
    while (dr.Read())
            {
                string one = dr["Row1"].ToString();
                string two = dr["Row2"].ToString();

                List<string> temp_list = new List<string> { one, two };

                array_list.Add(temp_list);
            } 
```

> 块引用

# grails - Grails 是否根据域使用不同的本地化消息？

> ID：14277767
> 
> 赞同：0
> 
> 时间：2013-01-11T11:59:11.693
> 
> 标签：grails, localization

`.properties`我在一个新的 Grails 2.1.0 应用程序中有以下文件：

```
messages.properties
messages_sv.properties 
```

`messages_sv.properties`当用户点击我们的 URL 时是否会使用这些值`www.mysite.se`，或者消息是否完全基于浏览器的语言设置加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:25:29.850

消息由独立于 URL 的区域设置解析。如果您想更改语言环境，请查看[i18n 文档](http://grails.org/doc/latest/guide/i18n.html#changingLocales)以更好地了解 Grails 中的国际化。

# gallery - PWI - Picasa Webalbum 集成器和 jQuery.noConflict()？

> ID：14277768
> 
> 赞同：0
> 
> 时间：2013-01-11T11:59:13.550
> 
> 标签：gallery, picasa, jquery

我对以下脚本有疑问：[http ://code.google.com/p/pwi/](http://code.google.com/p/pwi/)

*这是一个非常不错的 Picasa jQuery 图库！*

有人可以告诉我如何在`jQuery.noConflict()`模式下运行这个脚本吗？我已经添加了行...

```
<script>jQuery.noConflict()</script> 
```

...在 HTML 文件中并将所有***$***替换为***jQuery***。但随后脚本不再起作用。

* * *

没有人能帮助我吗？我有来自[这个 ZIP 文件](https://code.google.com/p/pwi/downloads/list)的 Demo 1 和 fancybox。

通常我只需要在 .html 和 .js 文件中用***jQuery替换******$***，然后将***jQuery.noConflict()***添加到头部。但是这里不行...

 **Firefox 中的错误控制台说：

> 错误：TypeError：n.gphotojQuerytimestamp 未定义
> 
> 源文件：file:///C:/Users/pc/Desktop/jquery.pwi/js/jquery.pwi.js
> 
> 线路：361

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:11:38.737

查看来自 jQuery ( [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/) ) 的页面，您可以使用两种方法。

我做了一个快速测试，看起来你可以使用第二种方法。如果您像这样修改 Demo1：

在初始化 PWI 的脚本部分中，在之前添加这些行`var $viewerSelected = "fancybox";`：

```
 $.noConflict();
  jQuery(document).ready(function($) {
  // Code that uses other library's $ can follow here. 
```

就在结束脚本标记之前添加行

```
 });
  // Code that uses other library's $ can follow here. 
```

这至少可以确保代码仍在运行而没有错误**

# grails - grails - 显示 Flash 消息

> ID：14277771
> 
> 赞同：12
> 
> 时间：2013-01-11T11:59:19.243
> 
> 标签：grails

我是 Grails 的新手，我有一个问题对你们大多数人来说应该很容易。

我有一个显示`object`列表的页面。如果删除了`DataIntegrityViolation`一个，我想显示一条消息。`object`我正在做的是：

```
def delete() {

    def instanceToDelete= Myobject.get(params.id)
    try {
        instanceToDelete.delete(flush: true)
        redirect(action: "list", id: params.id)
    }
    catch (DataIntegrityViolationException e) {
        flash.message = "some message"
        //I want to refresh the div containing the flash.message here
    }
} 
```

此处应显示 Flash 消息：

```
 <g:if test="${flash.message}">
  <div class="alert alert-error" style="display: block">${flash.message}</div> 
```

抱歉——我知道这是一个愚蠢的问题，但我真的找不到解决方案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-11T12:27:58.043

该`flash`对象是`Map`存储键/值对的对象，因此您可以为错误消息定义自己的键。例如：

```
try {
    instanceToDelete.delete(flush: true)            
    flash.message = "successfully deleted object"
 }
 catch (DataIntegrityViolationException e) {
    flash.error = "could not delete object"            
 }
redirect(action: "list", id: params.id) 
```

然后您可以检查`flash`包含`error`密钥的对象，并为该类型的消息使用不同的样式：

```
<g:if test="${flash.error}">
  <div class="alert alert-error" style="display: block">${flash.error}</div>
</g:if>
<g:if test="${flash.message}">
  <div class="message" style="display: block">${flash.message}</div>
</g:if> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-24T10:24:49.013

```
// backend code example

def save () { 
    if(params.name) { 
          . 
          . 
      object.save(); 
      flash.message =  "Saved successfully" 
    } 
    else { 
        flash.message = "Saved fail"
    }

// HTML example

<g:if test="${flash.message}">
   <div class="update_message" role="status">${flash.message}</div>
</g:if> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-10T22:33:42.513

这可以帮助您：

```
def delete() {
    def instanceToDelete= Myobject.get(params.id)
    try {
        instanceToDelete.delete(flush: true)
        flash.success = "Object deleted correctly"
    } catch (DataIntegrityViolationException e) {
        flash.error = "Something goes wrong"
    }
    redirect(action: "list", id: params.id)
} 
```

在所有代码之后重定向到 gsp，如果有错误或一切顺利，可以存储。

您可以将消息放在不同的变量中以区分错误和成功。

```
<g:if test="${flash.success}">
    <div class="alert alert-success" style="display: block">${flash.success}</div>
</g:if>
<g:if test="${flash.error}">
    <div class="alert alert-error" style="display: block">${flash.error}</div>
</g:if> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T00:30:29.153

严格答案：只需返回您的消息（或使用模型图渲染）

对于您的控制器：

```
def delete() {

    def instanceToDelete= Myobject.get(params.id)
    try {
        instanceToDelete.delete(flush: true)
        redirect(action: "list", id: params.id)
    }
    catch (DataIntegrityViolationException e) {
        render view:'delete', model:[message: "some message"]
        //I want to refresh the div containing the flash.message here
    }
} 
```

对于您的 gsp ：

```
<g:if test="${message}">
    <div class="alert alert-error" style="display: block">${message}</div> 
```

但是 Gregg 是对的，你**永远**不应该在没有`redirect`. 如果这样做，用户可能会刷新（或返回）相同的 url，并意外地再次尝试相同的操作。你真的应该像 hitt5 的回答一样。

# xcode - 从 Xcode 的内置静态分析中获取 HTML 输出

> ID：14277773
> 
> 赞同：4
> 
> 时间：2013-01-11T11:59:32.580
> 
> 标签：xcode, clang-static-analyzer

当我在 Xcode 中使用 Build & Analyze 选项时，我看到一个非常有用的可视化输出集成到 IDE 中，显示代码路径、内存泄漏、死存储等。

在 Xcode 中有一个构建设置，允许您在每个构建过程中运行静态分析器（clang）。但是当我这样做时，输出是在构建文件夹中的普通 plist 文件中。

有没有办法从这些 plist 文件中生成人类可见的 HTML 输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-23T15:19:52.480

我不知道这是否是 Xcode 6 上的新内容，但如果您从命令行执行，`xcodebuild CLANG_ANALYZER_OTHER_FLAGS= CLANG_ANALYZER_OUTPUT=plist-html CLANG_ANALYZER_OUTPUT_DIR=$HOME/tmp RUN_CLANG_STATIC_ANALYZER=YES`它会生成一个包含 html 的目录。

# debian - PHP mail() 返回 false 日志为空

> ID：14277777
> 
> 赞同：0
> 
> 时间：2013-01-11T11:59:55.133
> 
> 标签：debian, php

我已经使用 PHP 版本 5.3.3-7+squeeze14 安装了 apache，但我无法让邮件正常工作，这是我正在使用的代码：

```
error_reporting(E_ALL|E_STRICT);
ini_set('display_errors', 1);
echo 'I am : ' . `whoami`;
$result = mail('*****','Testing 1 2 3','This is a test.');
echo '<hr>Result was: ' . ( $result === FALSE ? 'FALSE' : 'TRUE') . $result;
echo '<hr>';
echo phpinfo(); 
```

这是我得到的回应：

```
I am : www-data
Result was: FALSE 
```

在我的 php.ini 中，我编辑了两行，这就是现在的样子：

```
sendmail_path = /usr/sbin/sendmail -t -i -f something@****.lt
sendmail_from = something@****.lt 
```

`/var/log/mail.log`即使你已经尝试了一个多小时的各种事情，它也完全是空的。

我对 linux 还很陌生，所以我很确定我遗漏了一些明显的东西，似乎在......

**编辑**忘了提到每次我对我的配置进行一些更改时我都会重新启动 apache，而且我使用的是 Debian 6.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:08:04.517

您需要安装 postfix 或 sendmail（首选 Postfix）

php mail() 函数无论如何都需要一个 MTA。

或者您可以使用复杂的方式编写一个 smtp Mailclass 脚本：email.about.com/od/emailprogrammingtips/qt/...

或者您可以使用 phpmailer：phpmailer.worxware.com。

但是为了能够使用 mail() 你需要一个 mta（又名 postfix 或 sendmail）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:57:06.447

mail() 函数在许多服务器上以多种方式配置。使用带有 SMTP 支持的邮件类将节省您很多时间。我更喜欢：

[https://github.com/Synchro/PHPMailer](https://github.com/Synchro/PHPMailer)

另一方面，使用垃圾邮件过滤器等，每个 SMTP 服务器发送邮件效果更好。

# c# - X 秒后的下一步

> ID：14277785
> 
> 赞同：0
> 
> 时间：2013-01-11T12:00:32.843
> 
> 标签：c#, asp.net, wizard

在 asp.net 向导中 X 秒后是否可以“自动”下一步？有规定的答题时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:06:07.460

一种解决方案可能是使用客户端脚本在页面加载时启动计时器，然后如果未检测到按键或鼠标移动，则在设定的时间后重定向页面。看一下 Javascript 的计时部分的[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)函数。以及检测用户活动部分的这个问题的[答案。](https://stackoverflow.com/a/4029518/287254)

# asp.net-mvc - Base 64 编码查询字符串参数获取字符替换

> ID：14277788
> 
> 赞同：0
> 
> 时间：2013-01-11T12:00:42.293
> 
> 标签：asp.net-mvc, encoding, query-string

我有一个查询字符串参数，它是一个被转换为 Base64 的编码字符串。然后将该参数嵌入到电子邮件中的链接中。当我单击电子邮件中的链接时，查询字符串参数已将其中的所有 + 字符替换为空格字符。没有其他区别。有没有一种方法我可以调用来清理字符串并再次用加号有效地替换空格。我目前正在做一个字符串替换，这有点胖。是什么导致了替换，但我不确定是什么。有没有人遇到过这样的事情？

示例 - 浏览器 URL 中的查询字符串参数值：

`yo3rZZbZyG4UCN+L3pcTYJXmWEggnkW1qcyJk2uBrVTtGUSKIlBcJ8e9TSx8BHjHJv0JhI8H6LbIqUl+3lA7qn+lOgpSi3rCGN4bm5moOWcCA449C1Z3zj7J1FkOXH2HMox4VUZ7x7fF65MRwuBBmw==`

控制器动作中的字符串值：

`yo3rZZbZyG4UCN L3pcTYJXmWEggnkW1qcyJk2uBrVTtGUSKIlBcJ8e9TSx8BHjHJv0JhI8H6LbIqUl 3lA7qn lOgpSi3rCGN4bm5moOWcCA449C1Z3zj7J1FkOXH2HMox4VUZ7x7fF65MRwuBBmw==`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:03:15.907

您应该对链接的 base64 字符串进行 URL 编码，因此它是：

```
yo3rZZbZyG4UCN%2BL3pcTYJXmWEggnkW1qcyJk2uBrVTtGUSKIlBcJ8e9TSx8BHjHJv0JhI8H6LbIqUl%2B3lA7qn%2BlOgpSi3rCGN4bm5moOWcCA449C1Z3zj7J1FkOXH2HMox4VUZ7x7fF65MRwuBBmw%3D%3D 
```

`HttpUtility.UrlEncode(base64str)`在 .NET 或`encodeURIComponent(base64str)`javascript 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T14:59:40.800

您可以使用 System.Web.HttpServerUtility.UrlTokenEncode （来自[http://brockallen.com/2014/10/17/base64url-encoding/#comments](http://brockallen.com/2014/10/17/base64url-encoding/#comments)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:12:57.117

这样做是因为 + 号被解释为表示后面跟着另一个参数的标记。这就是它被破坏的原因。在将字符串传递给服务器之前，您应该对字符串进行 URL 编码。

# javascript - 如何将此 Javascript 代码转换为 Jquery

> ID：14277792
> 
> 赞同：-2
> 
> 时间：2013-01-11T12:00:54.560
> 
> 标签：javascript, jquery, html

我有一个javascript代码：

```
javascript: function iptxt() {
    var d = document;
    try {
        if (!d.body) throw (0);
        window.location = 'http://www.instapaper.com/text?u=' + encodeURIComponent(d.location.href);
    } catch (e) {
        alert('Please wait until the page has loaded.');
    }
}
iptxt();
void(0) 
```

我会这样使用它：

```
< href="javascript:function iptxt(){var d=document;try{if(!d.body)throw(0);window.location='http://www.instapaper.com/text?u='+encodeURIComponent(d.location.href);}catch(e){alert('Please wait until the page has loaded.');}}iptxt();void(0)">Go</a> 
```

但我想将此代码与 jquery 一起使用，如下所示：

```
<a href="#" id="go">Go</a> 
```

以及将与 id go 集成的 jquery 代码是什么。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:03:29.463

您只需将函数调用放在给[click](http://api.jquery.com/click/)的 callack 中：

```
<script>
$(function(){
    function iptxt(){
       var d=document;
       try{
         if(!d.body)throw(0);window.location='http://www.instapaper.com/text?u='+encodeURIComponent(d.location.href);
       } catch(e){alert('Please wait until the page has loaded.');}
    }

    $('#go').click(iptxt);
});
</script> 
```

但这是最基本的 jQuery 任务。请看一下[jQuery 教程](http://docs.jquery.com/Tutorials)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:17:13.060

试试这个

```
$("#go").click(function(){
    var d = document;
    try{
        if(!d.body){
            window.location = 'http://www.instapaper.com/text?u=' + encodeURIComponent(d.location.href);
        }
    }
    catch(e){
        alert('Please wait until the page has loaded.')
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:05:27.323

我不确定你为什么这样做对`if(!d.body)throw(0);`我没有多大意义。但这是在 jQuery 中的做法。

```
$("#go").click(function(event) {
     event.preventDefault();
     var d=document;
     try{
          if(!d.body)throw(0);
          window.location='http://www.instapaper.com/text?u='+encodeURIComponent(d.location.href);
     }catch(e){
          alert('Please wait until the page has loaded.');
     }
}); 
```

# cakephp - CakePHP 子蛋糕重定向

> ID：14277793
> 
> 赞同：0
> 
> 时间：2013-01-11T12:00:58.397
> 
> 标签：cakephp, redirect

我对 CakePHP (1.3) 项目有疑问，我需要在其他项目的同一域/托管中创建项目，如下所示：

```
app
cake
plugins
templates
vendors
ADMINONE (Cake project files here)
ADMINTWO (another Cake project files here)
.htaccess
index.php
README 
```

问题是，当我将 CakePHP 代码放入其中`ADMINONE`或`ADMINTWO`创建其他蛋糕项目时，如果我放入 url `http://domain.com/ADMINONE/`，则 URL 将重定向到`http://domain.com`或者蛋糕读取`/ADMINONE`为控制器名称。

如何将此 URL 重定向到忽略主目录 cake 重定向的目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:42:18.783

不要忘记在 webroot 文件夹中更改 index.php。如果需要，您可以在那里设置 APP_DIR 和 ROOT。

# wordpress - Wordpress 3.5：包含图片的自己的画廊不起作用

> ID：14277794
> 
> 赞同：3
> 
> 时间：2013-01-11T12:01:00.237
> 
> 标签：wordpress, wordpress-3.5

我刚刚更新到 Wordpress 3.5，但这使我的代码的一小部分崩溃了：有一个 php 文件，它通过 AJAX 加载了一个带有其画廊的特定帖子。

代码如下所示：

```
<?php

// Include WordPress
define('WP_USE_THEMES', false);
require('../../../../wp-load.php');

$id = $_POST['id'];

// query post with this identifier
query_posts('meta_key=identifier&meta_value='.$id); 
if (have_posts()) :
while (have_posts()) : the_post();

    // add content
    $content = apply_filters('the_content', get_the_content()); 
    echo '<div class="content-inner">'.$content.'</div>';
endwhile;
endif;
?> 
```

该帖子包含一个 [gallery] 短代码。我已经使用以下代码构建了自己的 Wordpress 库：

```
remove_shortcode('gallery');
add_shortcode('gallery', 'parse_gallery_shortcode');

function parse_gallery_shortcode($atts) {

    global $post;

    extract(shortcode_atts(array(
        'orderby' => 'menu_order ASC, ID ASC',
        'id' => $post->ID,
        'itemtag' => 'dl',
        'icontag' => 'dt',
        'captiontag' => 'dd',
        'columns' => 3,
        'size' => 'full',
        'link' => 'file'
    ), $atts));

    $args = array(
        'post_type' => 'attachment',
        'post_parent' => $id,
        'numberposts' => -1,
        'orderby' => $orderby
        ); 

    $images = get_posts($args);
    print_r($images);
} 
```

这适用于我网站上的所有其他画廊，但不适用于加载 ajax 的画廊。它已与 Wordpress 3.4 一起使用。

Wordpress 3.5 中是否有我忽略的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:46:22.027

我想通了：如果您使用已上传到媒体库的带有图像的画廊，画廊简码看起来像`[gallery ids=1,2,3]`，这意味着，图像仅链接（而不是附加）到画廊，因此`post_type=attachment`不起作用.

现在我正在使用正则表达式来获取图像 ID：

```
$post_content = $post->post_content;
preg_match('/\[gallery.*ids=.(.*).\]/', $post_content, $ids);
$array_id = explode(",", $ids[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T02:44:00.430

现在可以使用 和 拉出所有画廊[甚至](https://codex.wordpress.org/Function_Reference/get_post_galleries)单个[画廊](https://codex.wordpress.org/Function_Reference/get_post_gallery)。每个图库将包含图像 ID 列表以及[图像 url](https://codex.wordpress.org/Function_Reference/get_post_galleries_images)列表。图库对象基本上是简码参数，因此您也可以访问这些参数。`$post->ID`[`get_post_galleries()`](https://codex.wordpress.org/Function_Reference/get_post_galleries)`ids``src`

```
if ( $galleries = get_post_galleries( $post->ID, false ) ) {

    $defaults = array (
        'orderby'    => 'menu_order ASC, ID ASC',
        'id'         => $post->ID,
        'itemtag'    => 'dl',
        'icontag'    => 'dt',
        'captiontag' => 'dd',
        'columns'    => 3,
        'size'       => 'full',
        'link'       => 'file',
        'ids'        => "",
        'src'        => array (),
    );

    foreach ( $galleries as $gallery ) {

        // defaults
        $args = wp_parse_args( $gallery, $defaults );

        // image ids
        $args[ 'ids' ] = explode( ',', $args[ 'ids' ] );

        // image urls
        $images = $args[ 'src' ];
    }
} 
```

# database - BLOB 适合大量数据吗？

> ID：14277798
> 
> 赞同：0
> 
> 时间：2013-01-11T12:01:41.373
> 
> 标签：database, blob

我有一个检索大量记录的应用程序。这些记录中的每一个都包含一个文件，大小平均为 5 mb。

我有 2 个存储记录的选项：
1\. 将文件作为 BLOB 类型内容存储在 DB
2\. 将文件存储在系统中，并将文件名存储在 DB 中。

我将存储的数据量约为每周 200 GB。

我很困惑，请帮忙？我应该选择以上哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:21:20.690

在第一种情况下，您将强制数据库处理大量数据 IO 操作，我更愿意将文件存储在文件系统中并将文件路径放入数据库中。

# linux - 分析树脂负载测试生成的 .core 文件

> ID：14277801
> 
> 赞同：0
> 
> 时间：2013-01-11T12:01:51.317
> 
> 标签：linux, gdb, load-testing, crash-dumps, coredump

我正在生成大量 .core 文件的 linux 机器上运行负载测试。我的问题是如何分析这些。GDB 是一个选项，但这是否意味着从 GDB 内部开始负载测试。有没有其他可以使用的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:06:39.623

hopefully you are running your debug version of the binary, then after a core dump, you can just do

```
 $ gdb <Your_binary> <core_dump_file>
 (gdb) bt 
```

then you can examine the stack trace.

# jquery - 如何在单独的脚本文件中获取@Url.Action url？

> ID：14277802
> 
> 赞同：1
> 
> 时间：2013-01-11T12:02:03.110
> 
> 标签：jquery, asp.net-mvc

我有一个与我的网页分开的 javascript 文件。然而，这似乎意味着我不能写下面的行；

```
var url = '@Url.Action("AddTrade", "DataService")'; 
```

我不愿意对 url 进行硬编码，以防在部署时它有所不同。

那么我该怎么办呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:06:15.907

我使用一个对象来打印我将从脚本中使用的所有 url。此代码进入 _Layout 或任何视图。

像这样：

```
<script type="text/javascript">
    windows.Urls = {};
    window.Urls["SomeKey"] = "@Url.Action("AddTrade", "DataService")";
</script> 
```

然后，从脚本中，您使用：

```
var url = window.Urls["SomeKey"];
// Or even easier:
var url = Urls.SomeKey 
```

# regex - Postgresql 正则表达式匹配大写，Unicode 感知

> ID：14277805
> 
> 赞同：3
> 
> 时间：2013-01-11T12:02:16.727
> 
> 标签：regex, postgresql, unicode

标题总结得很好。我正在为 Postgres ~ 运算符寻找匹配 Unicode 大写字符的正则表达式。明显的方法不起作用：

```
=> select 'A' ~ '[[:upper:]]';
 ?column? 
----------
 t
(1 row)

=> select 'Ó' ~ '[[:upper:]]';
 ?column? 
----------
 t
(1 row)

=> select 'Ą' ~ '[[:upper:]]';
 ?column? 
----------
 f
(1 row) 
```

我正在使用 Postgresql 9.1，并且我的语言环境设置为 pl_PL.UTF-8。订购工作正常。

```
=> show LC_CTYPE;
  lc_ctype   
-------------
 pl_PL.UTF-8
(1 row) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T13:48:33.740

PG 9.1 和更早版本的正则表达式引擎无法正确分类代码点不适合一个字节的字符。代码点为`'Ó'`211 是正确的，但代码点`'Ą'`是 260，超过 255。

PG 9.2 在这方面做得更好，但仍然不是 100% 适合所有字母。请参阅 PostgreSQL 源代码中的此[提交](http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=e00f68e49c148851187136d3278b7e9afa370537)，尤其是评论的这些部分：

> 删除硬连线限制，不考虑 wctype.h 结果高于 255 的字符代码

和

> 不过，我们可以将它推高到 U+7FF（我选择它作为 2 字节 UTF8 字符的限制），这至少会让东欧人高兴地等待更好的解决方案

不幸的是，这没有向后移植到 9.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T18:27:44.213

我发现 perl 正则表达式可以完美地处理 Unicode。

```
create extension plperl;

create function is_letter_upper(text) returns boolean
immutable strict language plperl
as $$
    use feature 'unicode_strings';
    return $_[0] =~ /^\p{IsUpper}$/ ? "true" : "false";
$$; 
```

使用 perl 5.16.2 在 postgres 9.2 上测试。

# android - 滚动时 Web 视图闪烁/闪烁

> ID：14277813
> 
> 赞同：8
> 
> 时间：2013-01-11T12:03:01.063
> 
> 标签：android, webview

我正在开发混合应用程序，我在应用程序中捆绑了一些 HTML5 文件。我需要 `android:hardwareAccelerated="true"` `permission`在清单文件中使用的一些 HTML 页面上播放视频。

但是当我滚动 webview 时，它会闪烁/闪烁视图。

请让我知道如何解决此问题。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T15:17:59.577

我已经添加：

```
android:layerType="software" 
```

到WebView，它神奇地解决了这个问题。

当然，忽略了硬件加速。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-27T18:12:50.537

看来**android:hardwareAccelerated="true"**是问题的根源。如果你真的需要它，你可以通过调用来解决这个问题：

```
webView.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null); 
```

它需要**API 级别 11**，因此您可以将其包装在如下方法中：

```
@TargetApi(11)
protected void configureLayerType(WebView webView) {
    webView.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:24:21.343

Android web view Rendering Engine 通常会导致闪烁。你可以使用一些 javascript 移动框架，如 JQMobi、Enyo js、JQuery Easing JS 来解决这个问题。

但基本上我实验的是 html 浏览器渲染在我的情况下总是闪烁。

# c# - 使用 C# 设置进程“图像名称”和“描述”

> ID：14277816
> 
> 赞同：4
> 
> 时间：2013-01-11T12:03:05.313
> 
> 标签：c#, process

我想尽可能详细地介绍这个问题，这样这个问题就很容易理解了*`answer-able`*

本质上，我需要一种在应用程序*启动*时使用 C#设置*进程名称*和*进程描述*的方法。

 *这是我想要更改的示例；

**注意：**我想用 CODE 设置我的 OWN C# 应用程序图像和描述。

![例子](../Images/1d7bfa29e327120c5c03e923f832eb08.png)

我希望能够在启动时更改我的应用程序中的以下内容。 *`Image Name`*在进程列表中，以及*`Description`*在进程列表中。到目前为止，在我的 C# 应用程序中，我可以使用属性设置进程名称，但 id 可以使用某种代码片段*（以及描述）*来设置它。

我希望这是一个信息问题，并且您在 stackoverflow 的聪明人可以提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:10:06.363

您无法更改图像名称。它是您的可执行文件的名称。但是，可以在您的 C# 项目程序集信息上更改过程描述：

在 Visual Studio > 属性 > 应用程序 > 程序集信息 > 标题中右键单击您的 C# 项目。

您无法在运行时从代码更改描述：操作系统在启动时从[版本信息文件资源](http://msdn.microsoft.com/en-us/library/ms646981%28v=vs.85%29.aspx)加载描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T12:10:57.570

Image Name属性是可执行文件本身的名称（即Foobar.exe），Description属性是Assembly Information对话框中应用程序的Title，如下图：

![信息](../Images/a8c18101f9b5b8514ba2053dbbfb7d1b.png)

此时，当您运行程序时，您将在任务管理器中看到两个条目，如下所示：

![任务管理器](../Images/ad977a199fce460cc634094e3e448c89.png)

一个会说你在标题框中指定的名称，另一个会说 vshost32.exe 作为描述。要解决此问题，请取消选中项目属性页面中名为**启用 Visual Studio 托管进程的选项。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:27:20.023

尽可能接近答案是务实地创建一个具有所需名称和描述的新可执行文件启动该可执行文件，然后让您的启动过程终止。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T13:38:13.140

尝试将您的应用程序用作另一个应用程序的“主机”。启动应用程序后，它会从保管箱链接（直接下载链接）下载文件并将其保存在本地（可能在临时文件夹中）。然后我们的应用程序启动该应用程序，然后可能会出现错误而杀死自己。现在在那个进程上运行的进程将消失，我们有了一个带有我们设置的标题和描述的新进程。简单的！*

# html - 在混合移动应用程序中以编程方式获取 HTML5 AppCache“文件内容”的方法？

> ID：14277823
> 
> 赞同：0
> 
> 时间：2013-01-11T12:03:45.857
> 
> 标签：html, caching

我有一个基于 HTML 5 的混合移动应用程序。这个应用程序在 HTML 5 AppCache 中缓存了一些 javascript 资源。所以，当应用离线时，它会加载缓存的js并运行良好......现在，有没有一种方法可以让应用程序的代码（最好通过ObjC或Java，否则通过js）可以访问javascript资源的内容在其 AppCache 中，当应用程序离线时？

根据@robertc 的回复，以下是我实现的代码

```
 $.ajax({
                url:"/abcweb/js/abc.scripts.min.js",
                dataType: "script",
                success: function(data){ 
                alert(data);
                }   
            }); 
```

我已经更改了此示例中的 URL :P，.. 但无论如何，这很好用，当应用程序在线时获取 js 内容.. 但是当应用程序离线时，就不行了.. 同样会发生当我给出完整的网址时..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:34:11.850

在 JavaScript 中，如果资源不在 AppCache 中，它会以同样的方式访问资源的内容：使用 Ajax 请求 URL。当然，您应该注意以一种可以从 JavaScript 中使用它们的方式来构建您的资源，例如。避免二进制编码的 blob，除非它们采用浏览器已经可以处理的格式（如 PNG）。

# sql - SQL 中的 IF/ELSE 条件

> ID：14277827
> 
> 赞同：1
> 
> 时间：2013-01-11T12:04:05.987
> 
> 标签：sql, oracle

我正在尝试为 PLSQL 执行 IF/ELSE 语句，但我不确定我是否以正确的方式执行此操作，因为它总是出现错误：缺少右括号**IF (TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 2)) != TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 2))) THEN** 但括号对我来说似乎是平衡的。

```
SELECT *
FROM
(
IF (TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 2)) != TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 2))) THEN
  SELECT ID, DATE, ATTR_VALUE, (TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 4))-TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 4))-48) DIFF
ELSE
  SELECT ID, DATE, ATTR_VALUE, (TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 4))-TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 4))) DIFF
END IF
FROM Table A
ORDER BY TIME
)
WHERE DIFF>26 
```

请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:07:44.017

您应该能够使用`CASE`语句来获得结果：

```
SELECT *
FROM
(
  SELECT ID, 
    DATE, 
    ATTR_VALUE,
    CASE 
      WHEN TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 2)) != TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 2))
      THEN (TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 4))-TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 4))-48)
      ELSE (TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 4))-TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 4)))
    END DIFF
  FROM Table A
  ORDER BY TIME
)
WHERE DIFF>26 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:11:56.297

您可以将查询修改为如下所示的行，

```
SELECT *
  FROM (SELECT ID,
               DATE,
               ATTR_VALUE,
               decode(TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 2)),
                      TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 2)),
                      TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 4)) -
                      TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 4)),
                      TO_NUMBER(SUBSTR(ATTR_VALUE, 6, 4)) -
                      TO_NUMBER(SUBSTR(ATTR_VALUE, 1, 4))) DIFF
          FROM A)
 WHERE diff > 26 
```

# java - 如何在Java中的文本文件中替换特定索引处的字符串

> ID：14277828
> 
> 赞同：1
> 
> 时间：2013-01-11T12:04:07.713
> 
> 标签：java, string, file, indexing

我的文本文件包含：

```
Hello This is a Test
Press Enter to Continue 
```

我有一个数组：

```
int StartIndex [] = {1,4,8}
int EndIndex [] = {3,7,11}

String[] VALUES = new String[] {"Sys","Jav","Tes"}; 
```

我想用'Sys'替换索引{1,3}，用'Jav'替换索引{4,7}等等。

我的想法是将整个文件作为字符串读取，然后传递索引以替换为 VALUES 字符串。

我怎样才能做到这一点 ？

**代码：**

```
 String[] VALUES = new String[] {"Sys"}; //Correct Solutions

 int [] StartIndex ={4};
 int [] EndIndex ={6};
 while ((line = br.readLine()) != null)   {
                  // Print the content on the console
                  System.out.println (line);
                  StringBuffer buf = new StringBuffer(line);
                  buf.replace(StartIndex[0], EndIndex[0], VALUES[0]);
                  done =buf.toString();
                  System.out.println(done); 
```

预期的输出应该是这样的：

```
SyslJavhTes is a Test
Press Enter to Continue 
```

我搜索了一下，得到了这个：

```
String myName = "domanokz";
char[] myNameChars = myName.toCharArray();
myNameChars[4] = 'x';
myName = String.valueOf(myNameChars); 
```

如果我们将文件转换为字符串并应用此函数，这会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:50:40.377

问题解决了！代码完美运行，因为我对其进行了测试。像以前一样没有添加评论，所以你会理解和学习。（如果其他人可以识别正确答案，请投票/接受答案）。

**代码：**

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

/**
 *
 * @author jtech
 */
public class ReplaceWithIndexes
{
    public static void main(String[] args) throws IOException
    {
        BufferedReader br = null;
        boolean endMatched = false;
        int startIndex[] = {0,4,8};
        int endIndex[] = {3,7,10};
        int c = 0, c1 = 0, c2 = 0, largestVal_start = 0, largestVal_end = 0, lineCount = 0;
        String line = null, newString = "";
        String[] VALUES = new String[] {"Sys","Jav","Tes"};  

        br = new BufferedReader(new FileReader("C:\\Users\\jtech\\Documents\\NetBeansProjects\\HelpOthers\\src\\textFiles\\AnotherFile.txt"));

        for (int i = 0; i < startIndex.length; i++)
        {
            if (startIndex[i] > largestVal_start)
            {
                largestVal_start = startIndex[i];
            }
        }

        for (int i = 0; i < endIndex.length; i++)
        {
            if (endIndex[i] > largestVal_end)
            {
                largestVal_end = endIndex[i];
            }
        }       

            while ((line = br.readLine()) != null)   
            {

                StringBuilder buf = new StringBuilder(line);
                          // Print the content on the console
                System.out.println(line);
                lineCount++;

                    while (c <= largestVal_start)
                    {                       
                       while (c1 <= largestVal_end)
                       {                           
                           if (startIndex[0] == c && endIndex[0] == c1)
                           {
                             buf.replace(startIndex[0], endIndex[0], VALUES[c2]);
                             newString = buf.toString();
                             endMatched = true;
                           }
                           else if (startIndex[1] == c && endIndex[1] == c1)
                           {
                             buf.replace(startIndex[1], endIndex[1], VALUES[c2]);
                             newString = buf.toString();
                             endMatched = true;
                           }
                           else if (startIndex[2] == c && endIndex[2] == c1)
                           {
                             buf.replace(startIndex[2], endIndex[2], VALUES[c2]);
                             newString = buf.toString();
                             endMatched = true;
                           }

                         c1++;
                       }

                      for (int i = 0; i < startIndex.length; i++)
                      {
                        if (c == startIndex[i])
                        {
                            c2++;
                        }

                      }

                      if (endMatched == true || ((c1 <= largestVal_end) == false) )
                      {
                          c1 = 0;
                          endMatched = false;
                      }

                      c++;

                    }

                if (lineCount <= 1)
                {
                  System.out.println("Updated line: " + newString);
                }

            }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:10:36.170

最简单的解决方案是以下代码，但对于大文件和/或大量替换可能不够高效。

```
while ((line = br.readLine()) != null) {
    // Print the content on the console
    System.out.println (line);
    StringBuffer buf = new StringBuffer(line);
    for (int i = 0; i < VALUES.length; i ++) {
        buf = buf.replace(StartIndex[i], EndIndex[i], VALUES[i]);
    }
    done = buf.toString();
    System.out.println(done);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:16:48.893

在 Java 中，类是众所周知的锤子，每个问题实际上都是钉子。您的情况也需要一个，而不是管理三个单独的阵列。

```
class Replacer {
  private final int start, end;
  private final String replacement;
  Replacer(int start, int end, String replacement) {
    this.start = start; this.end = end; this.replacement = replacement;
  }
  String replace(String in) {
    StringBuilder b = new StringBuilder(in);
    b.replace(start, end, replacement);
    return b.toString();
  }
} 
```

然后创建一个替换列表：

```
List<Replacer> replacers = Arrays.asList(
   new Replacer(1, 3, "System"),
   new Replacer(4, 7, "Java"),
   new Replacer(8, 11, "Testing")
); 
```

并将它们应用于每一行：

```
while ((line = br.readLine()) != null) {
  for (Replacer r : replacers) line = r.replace(line);
  System.out.println(line);
} 
```

# c# - 使用 Window 的 DataContext 进行多重绑定

> ID：14277833
> 
> 赞同：0
> 
> 时间：2013-01-11T12:04:23.653
> 
> 标签：c#, .net, wpf, dependency-properties, datacontext

我正在尝试根据`Customer`Window 的 DependancyProperty 是否为空来创建拖动装饰器。我在Window的资源中有这个。绑定的第一部分已设置（被拖动的项目），但第二部分（窗口上的 DependancyProperty）显示为 UnsetValue。

该属性肯定被初始化，因为它被用作窗口的数据上下文。

```
<Window x:Name="root"
    ...
>
<Window.Resources>
    <DataTemplate x:Key="DragAdorner">
        <StackPanel Orientation="Horizontal">
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding Converter="{StaticResource vehicleDragConverter}">
                        <Binding/>
                        <Binding Path="Customer" ElementName="root"/>
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:17:20.920

customer 不是元素窗口的直接属性。

1.  利用`<Binding Path="DataContext.Customer"..../>`

或者您也可以在绑定中使用 RelativeSource=FindControl Window。

# user-interface - 当用户停止输入文本时运行函数

> ID：14277838
> 
> 赞同：6
> 
> 时间：2013-01-11T12:04:56.000
> 
> 标签：user-interface, haskell, gtk, signals, gtk2hs

我正在使用 Haskell 的[gtk2hs](http://hackage.haskell.org/package/gtk-0.12.3)库编写一个小型 GUI 应用程序，目前正在使用其中的[多行文本框](http://hackage.haskell.org/packages/archive/gtk/0.12.3/doc/html/Graphics-UI-Gtk-Multiline-TextView.html)。我有一个功能，当用户对文本框中的文本进行更改时，我想运行它，但不希望他们必须单击按钮来激活它。

此外，因为它是一个相当侵入性和处理密集型的功能（它绘制图形，加载文件等），我希望它不会在用户进行*任何*更改时触发（这可能可以通过文本缓冲区中的[bufferChanged](http://hackage.haskell.org/packages/archive/gtk/0.12.3/doc/html/Graphics-UI-Gtk-Multiline-TextBuffer.html#g:7)信号来完成） '我猜？）但是当他们在更改之间停止几秒钟时。

基本上我想知道 gtk 中是否有一些类似于[范围小部件](http://hackage.haskell.org/packages/archive/gtk/0.12.3/doc/html/Graphics-UI-Gtk-Abstract-Range.html)可以将其更新策略设置为[连续或延迟](http://hackage.haskell.org/packages/archive/gtk/0.12.3/doc/html/Graphics-UI-Gtk-Abstract-Range.html#v:UpdateContinuous)的方式，但对于文本框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:49:37.970

[我对 Haskell 绑定一无所知，但在纯 C 中，通过利用超时GSource](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#GSource)很容易实现。

```
#include <gtk/gtk.h>

static guint source_id = 0;

static gboolean do_stuff(gpointer user_data)
{
    g_print("doing stuff...\n");
    return FALSE;
}

static void postpone(void)
{
    if (source_id > 0)
        g_source_remove(source_id);
    source_id = g_timeout_add(1000, do_stuff, NULL);
}

int main(int argc, char **argv)
{
    GtkWidget *window, *text_view;
    GtkTextBuffer *text_buffer;

    gtk_init(&argc, &argv);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    g_signal_connect(window, "delete-event", G_CALLBACK(gtk_main_quit), NULL);

    text_view = gtk_text_view_new();
    gtk_container_add(GTK_CONTAINER(window), text_view);

    text_buffer = gtk_text_view_get_buffer(GTK_TEXT_VIEW(text_view));
    g_signal_connect(text_buffer, "changed", G_CALLBACK(postpone), NULL);

    gtk_widget_show_all(window);
    gtk_main();
    return 0;
} 
```

不过，在超时时间过去之前退出 TextView 的问题仍然存在。

# php - 简单的 jQuery GET 请求

> ID：14277842
> 
> 赞同：0
> 
> 时间：2013-01-11T12:04:58.400
> 
> 标签：php, jquery, get

我正在尝试让 onclick 按钮调用向 php 文件发送获取请求。jQuery 加载正确，所以这不是问题。

这是代码：

**要调用的函数**

```
<script type='text/javascript'>

    function deleteLecturer(email){
         $.get("http://localhost/AMS/lecturers.php",
            {
                to_delete: email 
            }, 
            function(data, textStatus){
                alert(textStatus);
            });
    };
        </script> 
```

**按钮：**

```
<a href='' onclick="deleteLecturer('{$lecturers[1][$i]}')">Delete</a> 
```

如果检查，php文件具有以下内容：

```
if (isset($_GET['to_delete'])){
      $email = $_GET['to_delete'];
      $deletelecturer="DELETE FROM `lecturers` WHERE lect_email='$email';";
      return true;
  } 
```

但是它不起作用..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:19:26.030

`href`当属性为空字符串（例如，`onclick`不会触发）时，我一直对浏览器有过糟糕的体验。在您的函数中设置`href`to`#`和 then`return false`以防止`#`出现在地址栏中 URL 的末尾。

另外，我很确定 Sudhir 是正确的。您的`'{$lecturers[1][$i]}'`参数应包含在 PHP 标记中。

```
<a href='#' onclick="deleteLecturer('<?php {$lecturers[1][$i]}; ?>')">Delete</a>

<script type="text/javascript">
    function deleteLecturer(email){
        $.get("http://localhost/AMS/lecturers.php", {
            to_delete: email 
        }, function(data, textStatus){
            alert(textStatus);
        });
        return false; //prevents the navigation to url#
    };
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:06:55.743

试试这个：（`to_delete`引号）

```
script type='text/javascript'>

    function deleteLecturer(email){
         $.get("http://localhost/AMS/lecturers.php",
            {
                "to_delete": email 
            }, 
            function(data, textStatus){
                alert(textStatus);
            });
    };
</script> 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-11T12:09:43.990

您的代码中是否包含以下内容（但上面的示例中没有）？

```
<script>
$(document).ready(function() {

   // your code here
});
</script> 
```

如果您没有将它包裹在您的 jquery 脚本周围，那么它将不会触发。你不会得到错误，但什么都不会发生。

# jquery - 模态窗口未在 joomla 中显示

> ID：14277845
> 
> 赞同：0
> 
> 时间：2013-01-11T12:05:18.280
> 
> 标签：jquery, joomla, joomla2.5

我有动态`jQuery`添加的功能，`a`当我想将此元素用作模式时，我不能，没有任何反应。

当我使用一切添加相同的元素时，`php`一切正常。

我的猜测是`jQuery.modal`看不到这个元素，有没有办法解决这个问题？

我的功能如下所示：

```
$.each(respJSON, function(){
                    $('#poll-questions').append(
                        $('<li>').append(
                            $('<a>').attr('href', prefix + this.id).attr('class', 'modal')
                            .attr('rel', '{handler: "iframe", size:{x:600, y:500}}')
                                .append($('<span>').append(this.question)
                    )));
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:05:56.243

确保您只导入了 1 个 jQuery 库。如果您有超过 1 个，请使用以下代码检查是否已经有一个库正在导入。如果有，不要包括你自己的，如果没有，包括你自己的：

```
<?php
  // load jQuery, if not loaded before
  if(!JFactory::getApplication()->get('jquery')){
     JFactory::getApplication()->set('jquery',true);
     $document = JFactory::getDocument();
     $document->addScript(JURI::root() . "templates/template_name/js/jquery-1.8.3.js");
  }
?> 
```

显然改变路径，以便满足您的需求。

如果这没有帮助，请确保您已正确添加了 view.html.php 文件的代码，如下所示：

```
$doc = JFactory::getDocument(); //remove this line if it's already in the file
$js = '$.each(respJSON, function(){
          $("#poll-questions").append(
             $('<li>').append(
                $("<a>").attr("href", prefix + this.id).attr("class", "modal")
                   .attr("rel", "{handler: "iframe", size:{x:600, y:500}}")
                   .append($("<span>").append(this.question)
          ));
       });'
$doc->addScriptDeclaration($js); 
```

# android - Android 平板电脑/Galaxy 选项卡在 WURFL 中未检测为平板电脑

> ID：14277848
> 
> 赞同：2
> 
> 时间：2013-01-11T12:05:31.640
> 
> 标签：android, wurfl, mobile-devices

我使用`wurfl-2.3.3`了 WURFL 文件并使用 Samsung Galaxy Tab 2 10.1 检查了我的网站，它将设备识别为手机，但如果我使用 Ipad 检查它，它会正确地将其识别为平板电脑。

仅供参考，以下是我使用的脚本。

```
$is_tablet = ($requestingDevice->getCapability('is_tablet') == 'true');
$is_phone = ($requestingDevice->getCapability('can_assign_phone_number') == 'true');

if ($is_tablet) {
echo "This is a Tablet";
} else if ($is_phone) {
echo "This is a Mobile Phone";
} 
```

所有 Android 平板电脑都使用用户代理作为“移动设备”吗？如何解决这个问题并确保 WURFL 可以将所有 android 平板电脑识别为平板电脑而不是手机（包括三星）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:05:37.167

今天，我使用与 Cloud WURFL 类似的 php 对 Samsung Galaxy Tab2 10.1、Samsung Galaxy Note 10.1、Samsung Activ Tab、iPhone5、iPad Mini、iPad Retina 和 iPad2 进行了广泛测试...

```
$wireless = ($client->getDeviceCapability('is_wireless_device'));   
$tablet = ($client->getDeviceCapability('is_tablet'));

if ($tablet){
    echo "This is a tablet device";
} elseif ($wireless && !$tablet) {  
    echo "This is a mobile device"; 
}... 
```

我发现三星 Galaxy Tab2 10.1 和三星 Galaxy Note 10.1 都对它们的身份感到困惑。在尝试了每种设备的几个之后，有些重定向到“平板电脑”，有些重定向到“移动”。没有一致性！

iPad/iPhone 设备的行为都应有尽有（...& 我是 PC/Android 用户）！！

三星设备是否经历了 WURFL 中未记录的最近升级？

# java - jsf中的更新表

> ID：14277849
> 
> 赞同：0
> 
> 时间：2013-01-11T12:05:38.530
> 
> 标签：java, jsf, primefaces

我正在用**Primefaces做一个****JSF**，我的页面中有一个，它每 1 秒更新一个表，但是当我在服务器端运行一个函数时，它不会更新表。请让我知道如何继续更新页面。提前致谢！**`poll``poll``poll`**

 **```
<p:poll interval="1" autoStart="false" update=":acceptedTable"
                    widgetVar="mypoll"></p:poll>

<h:panelGroup id="acceptedTable">
    <p:dataTable value="#{taxiService.acceptedTaxies}" var="item"
        paginator="true" style="width: 10%"
        rendered="#{taxiService.lengthOfList != 0}" rows="10"
        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
        <f:facet name="header">Accepted Taxies</f:facet>
        <p:column style="text-align: center;">
            <f:facet name="header">Number plate</f:facet>
            <h:outputText value="#{item}"></h:outputText>
        </p:column>
    </p:dataTable>
</h:panelGroup> 
```

*在 Tomcat 服务器上运行*

***解决方法：不使用poll，而是使用JQuery来更新表***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:01:38.343

你`poll`没有调用函数。

尝试这样的事情：

```
<p:poll interval="15" listener="#{yourBean.yourFunction}" update=":acceptedTable" /> 
```

这`listener`将调用您的支持 bean 来执行您的功能。[尝试使用PrimeFaces 展示](http://www.primefaces.org/showcase/ui/poll.jsf)中的简单计数器设置它，看看它是否真的在调用您的函数。然后你可以用你自己的函数替换它。如果它适用于计数器而不适用于您的功能，那么问题不在于`poll`ing。**

# wpf - 双数据绑定

> ID：14277855
> 
> 赞同：0
> 
> 时间：2013-01-11T12:05:51.183
> 
> 标签：wpf, data-binding, combobox

我只是在学习*`WPF (and mvvm)`*，我遇到了一个我无法解决的问题`google`。

我有*`2 ObservableCollections`*- 练习和*图表（该项目是关于在健身房跟踪进度）*：

练习（*ID，姓名*）

图表*（ExerciseId、ExerciseName、Id、...）*

现在在一个我想填充图表的窗口中，我有一个*`listbox`*with some*`labels`*和一个`_grid`_ 和一个*`combobox`*in *`ItemTemplate`*。

`Listbox`绑定到图表集合。
`Combobox`显示练习列表，因此我将其绑定到练习集合。

问题：

1.  我可以在 xaml 中指定组合框当前值应该与 Chart.Exercise 相同吗？
2.  如何在 XAML 中指定绑定，以便将组合框中的练习集合元素分配给 Chart.Exercise？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:18:00.357

您可以使用 Element Binding 和 Converter 来实现这一点……但是，在 ViewModel 中实现这一点会更简单。

您的 ViewModel 中有四个属性。

*   属性 1：Exercise Observable Collection - 绑定到您的 ComboBox ItemSource (ExerciseItems)
*   属性 2：练习所选项目 - 绑定到您的 Combobox SelectedItem (ExerciseSelectedItem)
*   属性 3：图表 Observable 集合 - 绑定到您的 ListBox (ChartItems)
*   属性 4：图表选定项 - 绑定到您的 ListBox SelectedItem (ChartSelectedItem)

您可能会在 ListBox Selected Item 属性的 Setter 中使用 Linq 将您的 Combo Box Selected Item 设置为等于 ListBox Selected Item ExerciseID 的 Item；

```
Public Property ChartSelectedItem As ChartItem
Get
     Return _ChartSelectedItem
End Get
Set(value As ChartItem)
     If value <> _ChartSelectedItem Then
         _ChartSelectedItem = value

         ExcersiseSelectedItem = (From ExcersiseItemsList in ExcersiseItems Where ExcersiseItemsList.ID = value.ExcersiseID).FirstOrDefault

         OnPropertyChanged("ChartSelectedItem")

     End if
End Set
End Property 
```

希望有帮助...

# javascript - JavaScript：DRY mouseover/mouseout 事件处理程序

> ID：14277856
> 
> 赞同：0
> 
> 时间：2013-01-11T12:05:52.977
> 
> 标签：javascript, jquery, handler

这是我的代码：

```
 $rows
        .on('mouseover', '.row', function () {
            $(this).find('.label').show();
        })
        .on('mouseout', '.row', function () {
            $(this).find('.label').hide();
        }); 
```

可以晒干吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:11:10.317

你可以绑定两个事件，监听`event.name`然后使用[jQuery.fn.toggle](http://api.jquery.com/toggle/)

```
$userRows.on('mouseover mouseout', '.row', function(event) {
    $(this).find(".label").toggle( event.name == "mouseover" );
}); 
```

我很确定你也可以使用[jQuery.fn.hover](http://api.jquery.com/hover/)：

```
$userRows.on('hover', '.row', function(event) {
    $(this).find(".label").toggle( event.name == "mouseenter" );
}); 
```

甚至：

```
$userRows.on('hover', '.row', function(event) {
    $(this).find(".label").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:56:10.820

关于什么：

> $rows.hover(function(){ $(this).find('.label').toggle(); }, function(){ $(this).find('.label').toggle(); } );

# c++ - 将一行 cv::Mat 转换为 int

> ID：14277858
> 
> 赞同：6
> 
> 时间：2013-01-11T12:05:56.033
> 
> 标签：c++, opencv, freak

我有一个来自 FREAK 描述提取的描述符矩阵，其中每一行是 64 个元素的描述符。

由于系统要求，我需要`vector <int*>`从此矩阵创建一个。到目前为止我试过这个：

```
Mat _descriptors;
std::vector<int*> descriptors;
int row;
for (int i=0; i<_descriptors.rows;i++)
{
    row =(int) _descriptors.row(i).data;
    descriptors.push_back( & row );
} 
```

这是正确的还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:15:28.530

中的所有值都`descriptors`将指向`row`带有此代码的堆栈上的变量。

查看 opencv 的定义`Mat`，`row`按值返回：

```
// returns a new matrix header for the specified row
Mat row(int y) const; 
```

但是，直接访问数据`_descriptors`并使用提供的 stride 成员变量`step`应该可以工作：

```
Mat _descriptors;
std::vector<int*> descriptors;
for (int i=0; i<_descriptors.rows;i++)
{
    descriptors.push_back((int*)(_descriptors.data + i * _descriptors.step));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:13:49.880

当您为 vector 创建一个新对象时`descriptors`，您正在创建一个带有`row`变量地址而不是实际值的对象。要存储该值，如果这是您想要的，代码应如下所示。

```
Mat _descriptors;
std::vector<int> descriptors;
int row;
for (int i=0; i<_descriptors.rows;i++)
{
    row =(int) _descriptors.row(i).data;
    descriptors.push_back( row );
} 
```

我也将其更改`vector<int*> descriptors`为`vector<int> descriptors`.

# asp.net-mvc - 使用 webapi 管理 api 服务中的许多方法路由

> ID：14277867
> 
> 赞同：1
> 
> 时间：2013-01-11T12:06:27.417
> 
> 标签：asp.net-mvc, architecture, routing, asp.net-web-api

这是跨 asp.net web api 项目**管理许多方法**的简单问题。

我们有很多这样的方法：

```
ProductsApiController.GetByType(string type, string x)
ProductsApiController.GetByType(string type, int limit)
//method has a number of arguments.. 
ReportsApiController.GetAll(string x, string y) 
```

**问题**：我们有很多带有自定义参数的方法，我们必须为每个方法定义一个自**定义路由**

```
routes.MapRoute(
    name: "ProductRoute",
    url: "ProductsApiController/{type}/{x}"
);

routes.MapRoute(
    name: "ReportRoute",
    url: "ReportsApiController/{x}/{y}"
); 
```

我正在简化签名，有很多方法有很多参数，而这些方法通常没有共同的参数。

这个的一般模式是什么？有没有更好的方法来做到这一点，还是我只剩下这个了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:36:41.707

在这种情况下，在查询字符串中传递 URI 参数变得非常方便。您可以只定义一个路由，然后通过查询传入该操作的所有 URI 参数（例如 ReportsApi/GetAll?x=5&y=6）。您只需使用包含操作 ({controller}/{action}) 的路径模板定义路由。

否则，如果您希望以不同方式在路径内传递所有参数，我想不出更好的方法。因为你必须让路由系统知道从哪里获取每个参数以及它应该绑定到什么参数名称。没有像查询字符串参数那样决定参数名称的约定。您可以在下面查看 Filip 关于使用属性路由的好建议。它不会减少您必须编写的路由数量，但至少它们会更接近您需要它们的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:44:18.910

我会说对于您的场景，最合乎逻辑的解决方案是使用属性路由。

是的，这仍然意味着您必须创建很多路由，但是由于它们有效地绑定到单个操作，因此将路由放在装饰该操作的属性中是最有意义的。

You can get AR from Nuget:

```
PM> Install-Package AttributeRouting.WebApi 
```

In your case it would look like this:

```
[GET("mytype/{type}/{x}")]
public MyType GetByType(string type, string x)

[GET("mytype/{type}/{limit}")]
public MyType GetByType(string type, int limit) 
```

and so on... which, IMHO is much more manageable

A while ago I wrote an intro post to AR - [http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/](http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/)

You can also visit their excellent wiki - [https://github.com/mccalltd/AttributeRouting/wiki](https://github.com/mccalltd/AttributeRouting/wiki)

# google-chrome - 使用 GPU 加速优化渲染 Webkit

> ID：14277877
> 
> 赞同：0
> 
> 时间：2013-01-11T12:06:59.207
> 
> 标签：google-chrome, safari, webkit, mobile-webkit, webkit-transform

我开发了一个小应用程序来测试 CSS3 和 translate3d。这个想法是渲染几个在屏幕上随机移动的 DIV。这是一种粒子系统，我知道我可以使用 WebGL 或 Canvas 来获得更好的性能，但我也希望它在移动浏览器上顺利运行，因此我认为 DOM 操作会更好地提高性能。

几个小时后，您将在此[网址找到结果](http://goo.gl/qfWqW)

我想达到最佳性能以增加 DIV 的数量。

但这是我的问题，我在 Chrome 或 Safari 上使用 TimeLine 时发现了一个“渲染问题”。有时整个页面会在 Safari iPhone 或 Chrome Android+iPhone 上呈现出轻微的延迟。

因此，如果你们中的一个人准备好迎接挑战，请不要犹豫，我尝试了很多东西，但我不知道如何避免这种昂贵的重绘。

顺便说一句，如果你们中的一个人有优化此片段的额外想法，请不要犹豫回复。

谢谢

---------- 更新 1 ----------

根据 Ariya 的建议，我通过代码（[url](http://goo.gl/qfWqW)）更新并仅使用顶部/左侧添加了另一个测试。根据 Chrome 提供的 FPS 计数器，我可以看到使用几乎相同帧速率的顶部/左侧属性时 fps 更稳定。您是否知道我是否可以优化 CSS3 版本以获得更好的性能？我虽然带有 GPU 加速的 css3 会更快，但我可能做错了什么。

---------- 更新 2 ----------

我更新了我的代码以使用 requestAnimFrame 并且只在我需要重绘时触发它。我发现导致我在 css 中定义的 perf 灰色渐变背景的原因是经常重绘并影响性能。然而，从纯粹的性能角度来看，上/左似乎仍然比 CSS 过渡更好:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:37:11.090

在谷歌浏览器的开发者工具中查看时间轴配置文件时，很明显有很多样式重新计算。这应该归咎于这一特定行：

```
 lastSheet.insertRule('@-webkit-keyframes '+keyframeName+' { .... 
```

换句话说，不断改变样式表是**昂贵的**。由于本例中的元素动画是关于移动它们，而不是使用基于关键帧的动画，我建议简化为简单的**过渡**。

# javascript - 如何制作 QML 矩形生成？

> ID：14277880
> 
> 赞同：1
> 
> 时间：2013-01-11T12:07:17.443
> 
> 标签：javascript, qml

我目前正在制作一款名为 Snowflake 的游戏，以学习如何使用 Javascript 编写 QML。

*   我在这里有我的源代码：[https](https://gist.github.com/4510190) ://gist.github.com/4510190 。

除此之外，我得到的唯一文件是默认的 qmlproject 文件和 png 文件。

我已经制作了这个计时器（Timer）和一个矩形（skullflake），它应该在它完成的每个间隔中产生。

```
Timer { //spawnrate
         interval: 2000; running: true; repeat: true
         onTriggered: Qt.createQmlObject(skullflake)
     } 
```

但是当我尝试运行它时，它给了我错误：

> file:///where/the/project/is/saved/Snowflake/Snowflake.qml:21：错误：Qt.createQmlObject()：无效参数

我已经尝试过这两种元素，但我似乎无法让它发挥作用

> *   Qt.createComponent（骷髅）
>     
>     
> *   Qt.createQmlObject（骷髅）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:48:06.247

您使用了错误的 Qt.createQmlComponent()。它需要3个参数：

```
Qt::createQmlObject ( string qml, object parent, string filepath ) 
```

所以它应该看起来像这样（父元素应该是应该包含头骨的元素的 id）：

```
Timer { //spawnrate
         interval: 2000; running: true; repeat: true
         onTriggered: Qt.createQmlObject("YOUR skullflake QML CODE (NOT FILE PATH)", parent, "skullflake")
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:58:51.823

我通过使用[Qt.createComponents()](http://doc.qt.digia.com/qt/qml-qt.html#createComponent-method)解决了它，它要求您在侧面使用 QML 文件或使用 Component 元素。

```
 Item {
 id: container
 width: 300; height: 300

 function skullFlake() {
     var component = Qt.createComponent("Skullflake.qml");
     if (component.status == Component.Ready) {
         var flake = component.createObject(container);
         flake.color = "purple";
     }
 }

 Component.onCompleted: loadButton()
}

Timer { //spawnrate
     interval: 2000; running: true; repeat: true
     onTriggered: skullFlake();
} 
```

# iphone - Three20 在 iPhone 中的集成

> ID：14277882
> 
> 赞同：0
> 
> 时间：2013-01-11T12:07:35.853
> 
> 标签：iphone, ios, three20

我是 iPhone 应用程序开发的新手。我想做一个相册应用程序。但我不知道如何在 iPhone 中显示幻灯片等图像。在互联网上搜索后，我得到了有关three20开放框架的信息。所以我想知道我应该如何从three20开始。我还从`github`. 我还得到了一些信息，如果我们使用three20的一些私有API，那么我们的应用程序将不会被苹果商店接受。所以请指导我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:14:57.560

Apple 在他们上次的开发者大会上间接提到了three20 框架，并表示没有必要为照片查看器风格的滚动应用程序使用第三方框架。Three20 是很棒的编码，但现在已经过时了，并且解决了一个已经被 Apple 的标准库代码解决的问题（例如带有缩放功能的照片卷轴 - 事实上，Apple 声称一开始就没有问题，但是没有足够的文档开发人员知道如何有效地进行照片滚动）。除非您想实现其他特定的three20 功能，否则最好避免使用它。查看有关高级滚动视图的开发者大会视频。

最相关的视频来自 WWDC 2010 - 假设您拥有 iOS 开发中心会员资格，您可以查看[**此**](https://developer.apple.com/videos/wwdc/2010/)视频，这是最相关的：

并寻找会话`"Designing apps with Scroll Views"`

还要检查[**这**](https://developer.apple.com/videos/wwdc/2011/)一个可能感兴趣：

并寻找视频会话`"Advanced ScrollView Techniques"`

另请查看 WWDC 2012 上有关分页滚动的视频。

# android - 带有 ViewPager 的 ActionBarSherlock 在返回堆栈和返回堆栈时不调用 ViewPager 片段生命周期方法

> ID：14277883
> 
> 赞同：5
> 
> 时间：2013-01-11T12:07:37.950
> 
> 标签：android, android-fragments, android-viewpager, actionbarsherlock, android-nested-fragment

我有一个使用 ActionBarSherlock 的应用程序，在主片段中我有一个 ViewPager，它使用几个片段来显示列表的不同对象。

**主要片段：**

```
 public class CollectionDemoFragment extends SherlockFragment {

    DemoCollectionPagerAdapter mDemoCollectionPagerAdapter;
    ViewPager mViewPager;

    public CollectionDemoFragment() {
        setTitle(R.string.title);
        setHasOptionsMenu(true);
    }

    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.demo_fragment, container, false);
        mDemoCollectionPagerAdapter = new DemoCollectionPagerAdapter(getFragmentManager());
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mDemoCollectionPagerAdapter);
        return view;
    }

    @Override
    public void onPause() {
        //This runs when the fragment goes to backstack
        super.onPause();
    }

    @Override
    public void onResume() {
        //This runs when the fragment returns from backstack
        super.onResume();
    }
} 
```

**ViewPagerAdapter：**

```
public class DemoCollectionPagerAdapter extends
        FragmentStatePagerAdapter {
    public DemoCollectionPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DemoObjectFragment();
        Bundle args = new Bundle();
        args.putInt(DemoObjectFragment.ARG_OBJECT, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }

    @Override
    public int getCount() {
        return 100;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return "OBJECT " + (position + 1);
    }
} 
```

在每个片段中，我可以创建一个带有新列表的新 Main 片段以显示在 ViewPager 中，并用这个新片段替换内容。

**ViewPager 片段：**

```
public static class DemoObjectFragment extends Fragment {
    public static final String ARG_OBJECT = "object";

    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {

        View rootView = inflater.inflate(
                R.layout.fragment_collection_object, container, false);
        Bundle args = getArguments();
        ((TextView) rootView.findViewById(android.R.id.text1)).setText(
                Integer.toString(args.getInt(ARG_OBJECT)));
             //Setup components

        return rootView;
    }   

    @Override
    public void setMenuVisibility(final boolean visible) {
        if (visible) {
            //Do something
        }
        super.setMenuVisibility(visible);
    }

    @Override
    public void onPause() {
        //This should run when the fragment goes to backstack
        super.onPause();
    }

    @Override
    public void onResume() {
        //This should run when the fragment returns from backstack
        super.onResume();
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.someComponent:
            Fragment newContent = new CollectionDemoFragment();
            switchContent(newContent, true);
            break;
        }
    }

    public void switchContent(Fragment newContent, boolean addToBackStack) {
        if (newContent != null) {
            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            ft.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);
            ft.replace(R.id.content_frame, newContent);
            if (addToBackStack) {
                ft.addToBackStack("" + newContent.getId());
            }
            ft.commit();
        }
    }
} 
```

这可以正常工作，直到我按下并且前一个主片段从后台堆栈返回。

屏幕是空的（因为没有调用 onCreateView 布局没有膨胀），ViewPager 中片段的生命周期方法在主片段进入 backstack 时或返回时都不会被调用。ViewPager 的片段中调用的唯一方法是 setMenuVisibility()，因此只有其中的代码运行。

任何人都知道解决此问题的方法以及为什么会发生这种情况？

不知道这是否重要，但我必须从 android 2.3 开始支持。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-05T13:48:24.880

创建视图适配器时，您必须将片段子管理器作为参数传递 -`getChildFragmentManager()`而不是`getFragmentManager()`.

代替，

```
 mDemoCollectionPagerAdapter = new DemoCollectionPagerAdapter(getFragmentManager()); 
```

你应该使用，

```
 mDemoCollectionPagerAdapter = new DemoCollectionPagerAdapter(getChildFragmentManager()); 
```

# dojo - wkhtmltopdf 无法正确呈现具有 dojo 的页面

> ID：14277884
> 
> 赞同：0
> 
> 时间：2013-01-11T12:07:42.737
> 
> 标签：dojo, wkhtmltopdf

> 大家好，我想将html页面转换为pdf。我的代码工作正常，但在尝试转换已实现 dojo 的页面时未提供所需的输出。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-11T12:15:45.380

“没有给出想要的输出”是什么意思？

另外，您提到使用 Dojo。您意识到基于 Javascript 的内容不会出现在 PDF 中吗？

# c# - 使用 = 和 == 比较布尔值与布尔变量有什么区别？

> ID：14277887
> 
> 赞同：3
> 
> 时间：2013-01-11T12:07:54.260
> 
> 标签：c#, java, if-statement

可以说是否有布尔变量状态。假设 status 的值为 false。

我想知道有什么区别

```
if ( status = true )
{
   //block of code
}

if ( status == true )
{
   //block of code
} 
```

我试图通过编写一个示例程序来理解它，第一个 if 块中的代码会针对任何值状态（真或假）执行。

对于其他原始类型，如果我在 if 中仅使用一个“=”，系统会引发编译时错误，以及为什么它不会在布尔类型的情况下引发错误。谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-11T12:08:49.500

第一个不是比较，而是分配。它编译的原因是它分配了一个布尔值，因此分配的结果也是一个布尔值。

第一条语句分配`status`一个新值，并`if`根据该新值执行（`true`在您的情况下）。第二条语句将 的当前值`status`与右侧的值进行比较，并对比较结果进行操作。

`boolean`请注意，在 Java 或`bool`C# 中与`true`or进行比较从来都不是一个好主意`false`：您可以使用`if (status)`代替`if (status == true)`和`if (!status)`代替`if (status == false)`. 但是，这不适用于C# 中的可为*空*`bool?`类型，因此比较`true`or`false`通常是一个好主意。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-11T12:09:31.010

`if ( status = true )`将永远是真的，因为你首先分配`true`给`status`. 另一方面，`if ( status == true )`只会是真的它`status`是真的。

编写它并避免拼写错误或混淆的最佳方法是：

```
if (status) { } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T12:13:31.787

在您分配的第一个代码部分，而不是检查状态的值！为了避免这个错误，你可以这样写：

```
if (status)
if (!status) 
```

（这仅适用于布尔值）

或者

```
if ( true == status )

if ( "Peter" == name ) 
```

这种 var 和 string/value 位置的交换适用于所有变量类型，一些编码人员使用它来避免使用`=`and的拼写错误`==`，

因为如果你不小心写了

```
if ( status = true ) 
```

代替

```
if ( status == true ) 
```

这不起作用，但不会给你一个编译器错误。（它只会将 var 设置为 true）

但是如果你习惯写

```
if ( true == status ) 
```

你打错了，错过了编译器会出错的一个等式标志。

或者你可以使用等于：

```
if (name.equals("Peter")) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T12:09:02.440

`if(status = true)` 将状态设置为`true`，然后它会看到`true`...这`if`将永远是`true`。

`if(status == true)`实际上是一个检查，这就是你要使用的

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T12:09:14.007

在java`if ( status = true )`中是赋值，而不是比较。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T12:10:25.470

第一种情况没有比较。只是分配`status`变量。`status`并且将返回新值。在这种情况下是`true`。

看：

[= 运算符](http://msdn.microsoft.com/en-us/library/sbkb459w.aspx) 将操作数值作为结果返回。

[== 运算符](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx) 如果其操作数的值相等则返回真，如果它的两个操作数在引用类型的情况下引用同一个对象，则返回真。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-11T12:27:36.387

为了强调两个运算符之间的区别，您可以在短时间内尝试 yoda 条件。

Yoda 条件是当您使用常量值作为第一个操作数时，您的代码将从: 转换`if ( status = true )`为`if ( true = status )`。您不能为常量 true 分配任何内容，因此编译器会给您一个语法错误（阻止成功编译）。使用 Yoda 条件将强制编译器给你一个语法错误，而不是一个警告。

我相信 yoda 条件源自非托管代码和较旧的编译器，并且在 .NET 语言中没有提供很多好处，但可能是一种了解差异的有趣方式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-11T12:14:25.287

第一个用于分配，***status = true***，第二个用于比较***status == true***。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-01T09:39:46.783

的解释

```
If (Status = true){ 
// code execution
} 
```

和

```
If (Status == true){ 
// code execution
} 
```

* * *

如果您尝试检查 2 个值是否彼此相等，请使用

```
value1 == value 
```

如果您尝试将值分配给另一个变量，请使用

```
value1 == value 
```

* * *

> 那么“If (value = value){}”是做什么的呢？

为了解释这一点，您需要知道，Java 检查是否可以定义变量。如果有可能，Java 可以。

所以如果你写一个像

```
If (Status = true){
System.out.println("Variable Status successfully changed!");
} else {
System.out.println();
} 
```

它将尝试将值“true”分配给变量 Status，如果成功则返回。如果成功，将输入条件并且“变量状态已成功更改！” 将打印到控制台。

理论上

但是由于 Java 需要一个布尔值作为条件，所以它不会起作用。

# css - 是“行高：正常；” 一个坏主意？

> ID：14277889
> 
> 赞同：5
> 
> 时间：2013-01-11T12:08:11.140
> 
> 标签：css

当 CSS`line-height`属性设置为`normal`. 我还发现了[Eric Meyer 的一篇博客文章，](http://meyerweb.com/eric/thoughts/2008/05/06/line-height-abnormal/)其中讨论了不同的不一致之处`line-height: normal;`，这里仅引用一个：

> 重点是：声明的效果`line-height: normal`不仅因浏览器而异，这是我所预料的——事实上，量化这些差异才是重点——<em>但它们也会因字体不同而不同，而且也会有所不同在给定的面内。

在我的例子中，我观察到添加一些 Unicode 符号，例如信封符号“✉”，如果`line-height`设置为`normal`. 设置`line-height: 1.2;`解决了这个问题。

我的问题是：有任何理由使用`line-height: normal;`吗？它的行为如此不可预测。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:56:58.040

原则上， （通过默认`normal`值`line-height`或显式设置）的值是“正常的”：浏览器应该使用适合所使用字体的值。这种变化应该不足为奇：它隐含在[定义](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)中。

这应该有助于解决这样的问题：您声明`font-family: a, b, c, d, sans-serif`，但您不知道每台计算机中可用的特定字体（如果有），或者默认的无衬线字体可能是什么。这些字体可能需要不同的行高，以获得良好的外观。浏览器知道它正在使用哪种字体，因此它可以从它的内部表格中为它选择一个行高。

在实际方面，浏览器可能无法很好地选择该值；它通常有点太小了。在排版方面，行高的选择应该基于几个考虑，不仅仅是字体，还有文本的类型（例如，带有很多变音符号的文本需要更大的行高），尤其是度量（列宽，线长）：长线需要更大的线高。

所以一般来说，最好是设计者设定线高，并适当考虑不同的方面。

这也避免了您描述的问题：当一行包含来自不同字体的字形时，每种字体可能具有与之关联的不同默认行高。例如，信封符号仅包含在几种字体中，因此浏览器很可能被迫从与您声明的字体不同的字体中选择它。

这就是混合字体时导致行间距不均匀的原因。重要的不是字形的高度，而是其字体的行高。例如，仅添加句号“.” 在 Cambria Math 字体中，如果可用，会导致巨大的行间距 - 除非您设置`line-height`为特定值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:18:33.643

> 是否有任何理由使用 line-height: normal;

是的 - 该属性在那里，因此您可以在您特别需要将行高重置为浏览器默认值时使用它，以防您已将其设置在父元素的某个位置。

为什么以及何时想要这样做取决于您正在实施的内容以及您是否关心跨浏览器像素完美设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:18:04.897

“正常”是“行高”的默认值。您明确声明 line-height: normal 以覆盖。

例子：

```
h1 {
    line-height: 150%;
}

h1.normal {
    line-height: normal;
} 
```

如果您查看上面的代码片段，我已经为 h1 标签声明了 150% 的行高。如果我希望特定的 h1 标签表现正常[浏览器特定的行高]，然后我使用“正常”覆盖它

确实，正常的行高在不同的浏览器上有所不同

# java - 无法在 TextWatcher 中将文本设置为 EditView

> ID：14277891
> 
> 赞同：1
> 
> 时间：2013-01-11T12:08:21.747
> 
> 标签：java, android, textview, textwatcher

我有一个名为“文本”的 EditView。我已经实现了 textWatcher

```
 text.addTextChangedListener(this); 
```

每当我尝试将 EditView 设置为 TextWatcher 中的某个值时，它都会强制关闭。

这是代码：

```
 public void beforeTextChanged(CharSequence s, int start, int count,int after) 
 {

  }
 public void onTextChanged(CharSequence s, int start, int before, int end)
  {
//text.setText("");
    }
   public void afterTextChanged(Editable s)
{       
     //text.setText("");
} 
```

我的要求是：每当用户输入一些值时，EditView 必须设置回 Null。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:31:15.463

你可以这样做：

```
public void beforeTextChanged(CharSequence s, int start, int count,int after) {
}

public void onTextChanged(CharSequence s, int start, int before, int end) {
}

public void afterTextChanged(Editable s){       
    s.clear();
} 
```

# python - Python：如何正确打印字典中的对象键？

> ID：14277894
> 
> 赞同：3
> 
> 时间：2013-01-11T12:08:39.250
> 
> 标签：python, dictionary

假设我有一个 Graph 类和一个 Vertex 类，定义如下

图.py

```
class Graph:

def __init__(self):
    self.adjacencyList = {}

def __str__(self):
    return str(self.adjacencyList)

def addVetex(self,key,value):
    if Vertex(key,value) not in self.adjacencyList:
        self.adjacencyList[Vertex(key,value)] = [] 
```

顶点.py

```
class Vertex:
def __init__(self,key,value):
    self.key = key
    self.value = value

def __str__(self):
    return "Key: ",str(self.key)," Value: ",str(self,value)

def __hash__(self):
    return self.key 
```

如果我这样做：

```
G = Graph()
G.addVetex(1,None)
G.addVetex(2,None)
G.addVetex(1,3)
print G 
```

它打印出来`{<Vertex.Vertex instance at 0x110295b90>: [], <Vertex.Vertex instance at 0x110295bd8>: []}`但我期待类似的东西`{"Key:1 Value:None":[]...}`

我的问题是我做错了什么？当一个字典被打印出来时，为什么它不尝试调用它的键/值的**str**函数？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:20:47.807

我相信您要实现的方法是使用当前代码获取所需的字符串`Vertex.__repr__`，这是 python 字典用来获取键的字符串表示形式的方法。

这是一个[相关的stackoverflow](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)答案，它揭示了`__repr__`和之间的区别`__str__`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:23:26.210

乔的回答是正确的，这里是代码的测试版本：

```
def __repr__(self):
    return "Key: "+str(self.key)+" Value: "+str(self.value) 
```

中实施`Vertex`。同样重要的是返回一个字符串，而不是问题中的元组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:25:32.537

这会做到的。注意添加了**repr方法（以及对****str**方法的一点清理）。

```
class Vertex:
    def __init__(self,key,value):
        self.key = key
        self.value = value

    def __str__(self):
        return "{Key: "+str(self.key)+" Value: "+str(self.value)+"}"

    def __hash__(self):
        return self.key

    def __repr__(self):
        return str(self) 
```

不过，您可能会考虑为您的顶点类子类化一个字典。您可以获得 dict 的所有好处，但可以添加方法以满足您的需求。最简单的版本如下所示：

```
class Vertex(dict):
    pass 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T12:27:49.623

你可以这样做：

```
class Graph(object):
    def __str__(self):
        return ", ".join("Key: " + str(i.key) + " Value: " + str(i.value) for i in self.adjacencyList) 
```

# c# - 列字符串格式

> ID：14277896
> 
> 赞同：2
> 
> 时间：2013-01-11T12:08:44.313
> 
> 标签：c#, wpf, binding, datagrid, string-formatting

我找到了如何使用`StringFormat`from`XAML`但我需要以*编程*方式添加列，但我找不到解决方案。我使用的代码不起作用：

```
foreach (Fields field in fields)
{
    DataGridTextColumn column = new DataGridTextColumn();
    column.Header = field.name;
    column.Binding = new Binding(field.name) { Mode = BindingMode.TwoWay };
    if (field.group[0] == "<numbers>" && field.group.Count == 1)
        column.Binding.StringFormat = "{0:d}";
    dgwDataMain.Columns.Add(column);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:11:54.423

这个怎么样？

```
column.Binding =
    new Binding(field.name)
    {
        Mode = BindingMode.TwoWay,
        UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged
    }; 
```

`UpdateSourceTrigger.PropertyChanged`导致在每个键入的字符上更新绑定源。因此，每次都验证输入。

属性（由 DataGrid 单元格使用）的默认[UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)值为。`TextBox.Text``UpdateSourceTrigger.LostFocus`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:54:13.543

然后你应该使用 DataTable。它的列可以是任何类型，添加新的 DataGridColumn 非常困难。

1.  收集所有数据。
2.  将正确类型的列添加到 DataTable。
3.  将所有数据添加到您的 DataTable。
4.  设置 dataGrid.DataSource = DataTable;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:18:28.400

你应该在你的 Xaml 代码中尝试

```
<TextBlock>
    <Run Text="Full date/time pattern (short time): "/>
    <Run Text="{Binding DateTime, StringFormat=f, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="Full date/time pattern (long time): "/>
    <Run Text="{Binding DateTime, StringFormat=F, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="Short date/time pattern (short time): "/>
    <Run Text="{Binding DateTime, StringFormat=g, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="Short date/time pattern (long time): "/>
    <Run Text="{Binding DateTime, StringFormat=G, ElementName=userControl}"/>
</TextBlock> 
```

或者

```
<TextBlock>
    <Run Text="In Currency with zero decimal point: "/>
    <Run Text="{Binding Number, StringFormat=\{0:c0\}, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="In Currency with two decimal point: "/>
    <Run Text="{Binding Number, StringFormat=\{0:c2\}, ElementName=userControl}"/>
</TextBlock> 
```

或者

```
<TextBlock>
    <Run Text="Normal Number: "/>
    <Run Text="{Binding Number, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="Above number with 2 decimal point: "/>
    <Run Text="{Binding Number, StringFormat=\{0:n2\}, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="Above number with 4 decimal point: "/>
    <Run Text="{Binding Number, StringFormat=\{0:n4\}, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="Above number with 10 Zero place holder: "/>
    <Run Text="{Binding Number, StringFormat=\{0:0000000000\}, ElementName=userControl}"/>
</TextBlock> 
```

或者

```
<TextBlock>
    <Run Text="Normal string: "/>
    <Run Text="{Binding Text, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="String with atleast 15 characters length: "/>
    <Run Text="{Binding Text, StringFormat=\{0\,15\}, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="String with atleast 25 characters length: "/>
    <Run Text="{Binding Text, StringFormat=\{0\,25\}, ElementName=userControl}"/>
</TextBlock>
<TextBlock>
    <Run Text="Text with quote: "/>
    <Run Text="{Binding Text, StringFormat='The string &quot;\{0\}&quot; inside a quot',
                              ElementName=userControl}"/>
</TextBlock> 
```

# javascript - Jcarousel 突出显示第一张可见照片

> ID：14277904
> 
> 赞同：2
> 
> 时间：2013-01-11T12:09:01.933
> 
> 标签：javascript, jquery-ui, jquery-plugins, jquery

这是一个更艰巨的挑战。

点击我的 jsfiddle[这里](http://jsfiddle.net/qUKrm/)：

我正在为专辑使用这个[jQuery 插件。](http://sorgalla.com/projects/jcarouse)每当用户单击图片时，我想突出显示该项目。完成了！

下面是触发相册的功能：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://sorgalla.com/projects/jcarousel/lib/jquery.jcarousel.min.js"></script>
<!--<link rel="stylesheet" type="text/css" href="http://sorgalla.com/projects/jcarousel/skins/tango/skin.css" />-->
<style>
.jcarousel-skin-tango .jcarousel-container {
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
   border-radius: 10px;
    background: #F0F6F9;
    border: 1px solid #346F97;
}
.jcarousel-skin-tango .jcarousel-container-horizontal {
    width: 300px;
    padding: 20px 40px;

}
.jcarousel-skin-tango .jcarousel-container-vertical {
    width: 75px;
    height: 245px;
    padding: 40px 20px;
}
.jcarousel-skin-tango .jcarousel-clip-horizontal {
    width: 300px;
    height: 75px;
    overflow:hidden;
}
.jcarousel-skin-tango .jcarousel-item {
    width: 75px;
    height: 75px;
}
.jcarousel-skin-tango .jcarousel-item-horizontal {
    margin-left: 0;
    margin-right: 10px;
}/*
.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-item-horizontal {
    margin-left: 10px;
    margin-right: 0;
}

.jcarousel-skin-tango .jcarousel-item-placeholder {
    background: #fff;
    color: #000;
} */

/**
 *  Horizontal Buttons
 */
.jcarousel-skin-tango .jcarousel-next-horizontal {
    position: absolute;
    top: 43px;
    right: 5px;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: transparent url(http://sorgalla.com/projects/jcarousel/skins/tango/next-horizontal.png) no-repeat 0 0;
}

.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-next-horizontal {
    left: 5px;
    right: auto;
    background-image: url(http://sorgalla.com/projects/jcarousel/skins/tango/prev-horizontal.png);
}

.jcarousel-skin-tango .jcarousel-next-horizontal:hover,
.jcarousel-skin-tango .jcarousel-next-horizontal:focus {
    background-position: -32px 0;
}

.jcarousel-skin-tango .jcarousel-next-horizontal:active {
    background-position: -64px 0;
}

.jcarousel-skin-tango .jcarousel-next-disabled-horizontal,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:hover,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:focus,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:active {
    cursor: default;
    background-position: -96px 0;
}

.jcarousel-skin-tango .jcarousel-prev-horizontal {
    position: absolute;
    top: 43px;
    left: 5px;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: transparent url(http://sorgalla.com/projects/jcarousel/skins/tango/prev-horizontal.png) no-repeat 0 0;
}

.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-prev-horizontal {
    left: auto;
    right: 5px;
    background-image: url(next-horizontal.png);
}

.jcarousel-skin-tango .jcarousel-prev-horizontal:hover, 
.jcarousel-skin-tango .jcarousel-prev-horizontal:focus {
    background-position: -32px 0;
}

.jcarousel-skin-tango .jcarousel-prev-horizontal:active {
    background-position: -64px 0;
}

.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:hover,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:focus,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:active {
    cursor: default;
    background-position: -96px 0;
}
</style>
<script>
 $(document).ready(function(){
     jQuery('#mycarousel').jcarousel({
        scroll:2,
        animation:'slow',
        wrap:'last',
        initCallback:function(){
             $("#mycarousel li:eq(0)").css('border','2px solid gray');
            }
     });

     $("#mycarousel li").click(function(){
         $("#mycarousel li").css('border','none');
         $(this).css('border','2px solid gray');
     });

     });
</script>

<title>Untitled Document</title>
</head>

<body>

<ul id="mycarousel" class="jcarousel-skin-tango">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
  </ul>

</ul>

</body>
</html> 
```

现在，我想要的是每当用户单击下一个或上一个箭头时，第一个可见项目应该用边框突出显示。

可以使用正确的配置来完成这项工作吗？下面是插件文档的链接 [http://sorgalla.com/projects/jcarousel/#Configuration](http://sorgalla.com/projects/jcarousel/#Configuration)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:01:35.213

我为突出显示的图像添加了一个用户定义的类，并根据具有此类的元素，使用下一个和上一个按钮的另外 2 个单击事件来`current`管理下一个或上一个图像的突出显示。`current`

这是工作脚本：

```
 $(document).ready(function(){
    jQuery('#mycarousel').jcarousel({
        scroll:2,
        animation:'slow',
        wrap:'last',
        initCallback:function(){
             $("#mycarousel li:eq(0)").css('border','2px solid gray');
     $("#mycarousel li:eq(0)").addClass("current");
         }
     });

     $("#mycarousel li").click(function(){
         $("#mycarousel li").css('border','none');
     $("#mycarousel li").removeClass('current');
         $(this).css('border','2px solid gray');
     $(this).addClass('current');
     });

 $(".jcarousel-next-horizontal").click(function(){
    $(".current").css('border', 'none');
    $(".current").next().css('border', '2px solid gray');
    $(".current").removeClass('current').next().addClass('current');
 });
 $(".jcarousel-prev-horizontal").click(function(){
    $(".current").css('border', 'none');
    $(".current").prev().css('border', '2px solid gray');
    $(".current").removeClass('current').prev().addClass('current');
 });
  }); 
```

# xstream - JibXvs XStream - 尚未构建域对象时

> ID：14277908
> 
> 赞同：0
> 
> 时间：2013-01-11T12:09:14.173
> 
> 标签：xstream, jibx

我正在研究 XML 到 Java 对象工作包之间的转换。在这里，Java 对象类型没有定义，因此我认为 XStream 不会帮助我进行编组。

但是，如果我要使用 JiBX，我可以轻松地对 Java 类进行代码生成（使用 XML 的 XSD），然后将 XML 编组到 Java 对象。

我想知道这是否是在 JiBX 和 XStream 之间进行选择的正确理解。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:11:08.380

桑迪普，

你是对的。当您从模式定义 (XSD) 文件开始时，JiBX 是更好的选择。JiBX 将使用模式定义为您创建 java 类。

如果您已经拥有 java 类并希望将它们输出为 xml，那么 XStream 是一个很好的工具。

大学教师

# php - PHP exec() 性能

> ID：14277910
> 
> 赞同：23
> 
> 时间：2013-01-11T12:09:20.727
> 
> 标签：php, performance, runtime, exec

以下 PHP 代码确实返回了大约 3.5 秒的运行时间（多次测量并取平均值）：

```
$starttime = microtime(true);
exec('/usr/local/bin/convert 1.pdf -density 200 -quality 85% 1.jpg');
$endtime = microtime(true);
$time_taken = $endtime-$starttime; 
```

当我在 ssh 终端上运行相同的命令时，运行时间减少到大约 0.6 秒（使用命令行工具测量`time`）。

imagemagick 库的版本是

```
Version: ImageMagick 6.7.0-10 2012-12-18 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2011 ImageMagick Studio LLC
Features: OpenMP 
```

这个时差的原因可能是什么？

stackoverflow 上类似问题的一个答案是开销来自 Web 服务器必须启动线程/shell。这真的是原因吗？我认为线程是轻量级的，启动/终止不需要很长时间。

在调用之前，`exec`我将 imagemagick 使用的线程数（因为这是/是 OpenMP 中的一个错误？，[参考](http://www.daniloaz.com/en/617/systems/high-cpu-load-when-converting-images-with-imagemagick/ "关联")）设置为 1 和`exec('env MAGICK_THREAD_LIMIT=1');`. 无论我设置什么值，PHP 的运行时都没有太大变化`MAGICK_THREAD_LIMIT`。无论如何，在这个版本中似乎没有 OpenMP 的错误，因为命令行执行的运行时是好的。

任何关于我如何改进上述命令的运行时间的建议都将不胜感激。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T13:04:54.663

当您通过键盘或通过 ssh 登录 Unix 机器时，您将创建一个新的 shell 实例。外壳通常类似于`/bin/sh`or `/bin/bash`。Shell 允许您执行命令。

当您使用`exec()`时，它还会创建一个新的 shell 实例。该实例执行您发送给它的命令，然后退出。

当您创建一个 shell 命令的新实例时，它有自己的环境变量。所以如果你这样做：

```
exec('env MAGICK_THREAD_LIMIT=1');
exec('/usr/local/bin/convert 1.pdf -density 200 -quality 85% 1.jpg'); 
```

然后创建两个 shell，第一个 shell 中的设置永远不会到达第二个 shell。要将环境变量放入第二个 shell，您需要以下内容：

```
exec('env MAGICK_THREAD_LIMIT=1; /usr/local/bin/convert 1.pdf -density 200 -quality 85% 1.jpg'); 
```

现在，如果您认为外壳本身可能是问题所在，因为制作外壳需要很长时间，请使用您*知道*几乎不需要时间的东西对其进行测试：

```
$starttime = microtime(true);
exec('echo hi');
$endtime = microtime(true);
$time_taken = $endtime-$starttime; 
```

那时你就知道要尝试找到一些方法来使 shell 实例化得更快。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-18T22:07:35.660

我从事计算机编程已经超过 56 年了，但这是我第一次遇到这样的错误。因此，我花了将近一周的时间试图了解`perl`从`php`via`exec`执行`perl`程序与直接在命令行执行程序相比，执行速度要差 7 倍。作为这项工作的一部分，我还仔细研究了这个问题在网络上被提出的所有时间。这是我发现的：

(1) 这是一个在 2002 年首次报告的 bug，在随后的 11 年中一直没有修复。

(2) 该错误与与`apache`交互的方式有关`php`，因此这两个组织都将责任推给了对方。

(3) 错误在`exec`, system 或任何替代方案上是相同的。

(4) 该错误不取决于执行程序是`perl`,`exe`还是其他。

(5) 在 UNIX 和 Windows 上的 bug 是一样的。

(6) 该错误通常与图像无关`imagemagick`或与图像无关。我在完全不同的环境中遇到了这个错误。

(7) 该错误与 fork、shell、bash 等的启动时间无关。

(8) 更换`apache`服务的拥有者并不能修复该BUG。

(9) 我不确定，但我认为这与调用子例程的开销大大增加有关。

当我遇到这个问题时，我有一个`perl`程序可以在 40 秒内执行，但`exec`需要 304 秒。我的最终解决方案是弄清楚如何优化我的程序，使其在 0.5 秒内直接执行或在 3.5 秒内执行`exec`。所以我从来没有解决这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T12:38:40.967

@Philipp，因为您有 SSH，并且您的服务器允许访问，所以`exec()`我假设您也拥有对机器的完全 root 访问权限。

## 推荐用于单文件处理

拥有对机器的 root 访问权限意味着您可以更改`/etc/php5/php.ini`内存限制设置。

即使没有直接访问权限，您也可以通过在项目目录中创建新文件`/etc/php5/php.ini`来检查您的服务器是否支持覆盖指令。`php.ini``php.ini`

即使不允许覆盖，您也可以从`.htaccess`if `AllowOverride`is更改内存设置`All`。

更改内存限制的另一种方法是在 PHP 运行时使用`ini_set('memory_limit', 256);`.

## 推荐用于批处理文件

运行转换的唯一好处`exec()`是，如果您不打算从中获取结果`exec()`并允许它异步运行：

```
exec('convert --your-convert-options > /dev/null 2>/dev/null &'); 
```

如果您尝试批量处理许多文件，上述方法通常很有帮助，您不想等待它们完成处理并且不需要确认每个已处理。

## 性能说明

与在 PHP 中使用 GD/Imagick 相比，使用上面的代码`exec`运行`async`以处理单个文件将花费更多的处理器时间和更多的内存。时间/内存将由不影响 PHP 进程的不同进程使用（使访问者感觉网站移动得更快），但是存在内存消耗，并且在处理许多连接时会很重要。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-01T07:54:22.040

这不是 PHP 错误，与 Apache/Nginx 或任何网络服务器无关。

我最近遇到了同样的问题，并查看了 PHP 源代码以检查 exec() 实现。

本质上，PHP 的 exec() 调用了 Libc 的 popen() 函数。

这里的罪魁祸首是 C 的 popen()，它似乎很慢。对“c popen slow”进行快速谷歌搜索会显示很多问题，比如你的问题。

我还发现有人在 C 中实现了一个名为 popen_noshell() 的函数来克服这个性能问题：

[https://blog.famzah.net/2009/11/20/a-much-faster-popen-and-system-implementation-for-linux/](https://blog.famzah.net/2009/11/20/a-much-faster-popen-and-system-implementation-for-linux/)

这是显示速度差异与 popen() 和 popen_noshell() 的屏幕截图：

[![速度差](../Images/b3d484e4066fbf5848144f2c689242d3.png)](https://i.stack.imgur.com/wTMks.jpg)

PHP 的 exec() 使用常规的 popen() - 上面屏幕截图右侧的那个。如您所见，执行 C 的 popen() 时系统使用的 CPU 非常高。

我看到了这个问题的 2 个解决方案：

1.  创建一个实现[popen_noshell的 PHP 扩展](https://github.com/famzah/popen-noshell)
2.  PHP 团队要求创建一组新的函数 popen_noshell()、exec_noshell() 等……我猜这不太可能发生……

附加说明：

在搜索这个时，我发现了与 C 的同名的 PHP 函数：popen()

这很有趣，因为可以异步执行外部命令： pclose(popen('your command', 'r'));

本质上与 exec('your command &'); 具有相同的效果

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-29T16:08:51.057

我遇到过这个问题，当通过命令行运行时大约需要 0.025 秒的图形处理命令在 PHP 中通过 exec() 调用时大约需要 0.3 秒。经过大量研究，似乎大多数人认为这是 apache 或 PHP 的问题。然后我尝试通过 CGI 脚本运行命令，完全绕过 PHP，得到了相同的结果。

因此看来问题一定是apache，所以我安装了lighttpd，得到了同样的结果！

经过一番思考和实验，我意识到这一定是处理器优先级的问题。因此，如果您希望命令以与命令行相似的速度运行，则必须按如下方式执行。

`exec('echo "password" | sudo -S nice -n -20 command')`

请注意：我知道对此会有各种各样的安全异议。我只是想简单地关注答案，你所要做的就是在你的命令之前添加 nice 。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T12:11:53.467

当您调用`exec`php 时不会创建线程，它会创建一个新的子进程。创建一个新进程是很大的开销。

但是，当您使用 ssh 连接时，您只是传递了一个要执行的命令。您不是该程序的所有者，因此它作为您连接的用户执行。对于`exec`运行 PHP 的用户。

# wcf - WCF 响应中可能存在哪些威胁？

> ID：14277911
> 
> 赞同：1
> 
> 时间：2013-01-11T12:09:24.507
> 
> 标签：wcf, security, owasp

接收 WCF 响应时可能发生哪些不同类型的威胁？防止此类威胁的缓解计划可能是什么？

注意：此查询基于 WCF 威胁建模概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:05:20.313

任何 API 的最大威胁是它的攻击面。您正在公开可能容易受到 SQL 注入和目录遍历等常见漏洞攻击的功能。

当涉及到 WCF 响应时，这取决于数据的使用方式。例如，如果您从 WCF 接口获取数据然后构建查询，您仍然可能容易受到 SQL 注入的攻击！如果您正在获取该数据，然后将其显示在 HTML 页面上，那么您很容易受到 XSS 的攻击。

可能存在的漏洞完全取决于数据的使用方式。您不应该信任任何数据源，甚至不应该信任您自己的数据库。确保在使用时清理数据。使用参数化查询来停止 SQLi。

# asp.net - <%:%> 是什么意思

> ID：14277919
> 
> 赞同：-2
> 
> 时间：2013-01-11T12:09:49.980
> 
> 标签：asp.net, .net-4.5

> **可能重复：**
> [“<%:”是做什么的？](https://stackoverflow.com/questions/12662346/what-does-do)

可以在 ASP .NET 4.5 中使用的 <%: %> 标记是什么意思？特别是 % 之后的冒号。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:12:04.220

它等同于`<%= %>`HTML 在呈现之前自动对内容进行编码。

# asp-classic - 在经典asp的循环组末尾添加一个底线

> ID：14277924
> 
> 赞同：0
> 
> 时间：2013-01-11T12:10:06.733
> 
> 标签：asp-classic

Shadow Wizard 帮我向我展示这段代码：

```
<%
Set oRS= TarefasConexaoMSSQL.Execute("SELECT * FROM apptabela ORDER BY oito ASC")
Dim currentGroupName, previousGroupName
currentGroupName = ""
previousGroupName = ""
Do Until oRS.EOF
    currentGroupName = oRS("oito")
    One = oRS("um")
    Two = oRS("dois")
    If currentGroupName<>previousGroupName Then
        Response.Write("<p>")
        Response.Write("<a href='#'>" & currentGroupName & "</a>")
        Response.Write("</p>")
    End If
    Response.Write("- One: " & One & ", Two: " & Two & "<br />")
    previousGroupName = currentGroupName
    oRS.MoveNext
Loop
oRS.Close
%> 
```

它正在产生类似的东西：

> 1000
> 
> *   一：苹果，二：梨
> *   一：大众，二：雷克萨斯
> 
> 1001
> 
> *   一：汽车，二：船
> 
> 1002
> 
> *   一：鸡，二：牛
> *   一：钢笔，二：铅笔
> *   一：C#，二：C++

我想要的是在每个组的底部添加一行，例如 Sum，以便稍后我可以进行一些计算：

> 1000
> 
> *   一：苹果，二：梨
> *   一：大众，二：雷克萨斯
> *   总和：X，Y
> 
> 1001
> 
> *   一：汽车，二：船
> *   总和：X，Y
> 
> 1002
> 
> *   一：鸡，二：牛
> *   一：钢笔，二：铅笔
> *   一：C#，二：C++
> *   总和：X，Y

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:13:33.597

[http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm](http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm)

你可以使用这个 jquery 插件来满足你的要求。如果您不明白如何实施，请告诉我。我最近用过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:48:44.510

```
<%
Set oRS= TarefasConexaoMSSQL.Execute("SELECT * FROM apptabela ORDER BY oito ASC")
Dim currentGroupName, previousGroupName, sumone, sumtwo
currentGroupName = ""
previousGroupName = ""
Do Until oRS.EOF
    currentGroupName = oRS("oito")
    One = oRS("um")
    Two = oRS("dois")
    If currentGroupName<>previousGroupName Then
        (!)Response.write("- Sum: " & sumone & ", " & sumtwo)
        (!)sumone = 0 / ""
        (!)sumtwo = sumone
        Response.Write("<p>")
        Response.Write("<a href='#'>" & currentGroupName & "</a>")
        Response.Write("</p>")
    End If
    Response.Write("- One: " & One & ", Two: " & Two & "<br />")
    (!)sumone = sumone + one
    (!)sumtwo = sumtwo + two
    previousGroupName = currentGroupName
    oRS.MoveNext
Loop
oRS.Close
%> 
```

这应该解决它。当您按组名排序并希望为每个组计算总和时，您必须在打印组元素时进行总结，并在进入新组时打印总和 + 在再次总结之前清除总和。如果您使用的是字符串，这也应该有效，但也许您想在总结时添加空格

# hadoop - 在 Pig 中合并两个数据集

> ID：14277926
> 
> 赞同：5
> 
> 时间：2013-01-11T12:10:11.773
> 
> 标签：hadoop, apache-pig, piglet

我有一个猪脚本，我在其中加载一个数据集，将其放入两个单独的数据集，然后执行一些计算，最后向其中添加另一个计算字段。现在我想加入这两个数据集。

```
A = LOAD '/user/hdfs/file1' AS (a:int, b:int);

A1 = FILTER A BY a > 100;
A2 = FILTER A BY a <= 100 AND b > 100;

-- Now I do some calculation on A1 and A2 
```

所以本质上，在计算之后，这里是两者的模式：

```
{A1 : {a:int, b:int, type:chararray}}
{A2:  {a:int, b:int, type:chararray}} 
```

现在，在我将其转储回 HDFS 之前，我想将这两个数据集合并回来。类似于`UNION ALL`SQL 中的东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:15:04.520

UNION 应该为您工作 - 但您的原始模式与显示的输出不匹配（b 被加载为 chararray 并稍后变为 int） - 我假设这是一个错字。

如果元组具有不同顺序的字段，则可以在执行 UNION 时使用 ONSCHEMA 关键字：

```
A_MERGED = UNION ONSCHEMA A1, A2; 
```

**编辑**[UNION](http://pig.apache.org/docs/r0.10.0/basic.html#union)的 PigLatin 文档链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T11:22:23.187

你可以使用 SPLIT

```
SPLIT A INTO A1 IF a > 100, A2 IF a <= 100 AND b > 100;
A = UNION A1, A2; 
```

# php - 在离线 TideSDK webapp 中将 SVG 导出为 PDF

> ID：14277928
> 
> 赞同：5
> 
> 时间：2013-01-11T12:10:22.117
> 
> 标签：php, javascript, python, pdf, svg

我有一个使用 TideSDK 构建的离线 HTML5/CSS/JS 应用程序，其中使用用户输入的数据使用 Highcharts 作为 SVG“标签”绘制条形图。我需要将此图表导出为 PDF 文档，其中还将包含文本和表格。

由于它是一个离线应用程序，我无法使用 Highcharts 中包含的导出模块（getSVG() 方法除外）或其他解决方案，如 DocRaptor。

我愿意使用另一个 JS 插件来绘制图表，但我真的很喜欢 Highcharts 图表的“外观”和特性。

您可能知道，使用 TideSDK，我可以在我的应用程序中嵌入 Python、PHP 或 Perl 脚本/模块（我更喜欢避免使用 Perl，因为我从未使用过它）。

另一个限制是我不能要求最终用户安装除我之外的其他软件，所以我不能`wkhtmltopdf`与 PHP 一起使用。除非我设法通过我的应用程序以透明的过程安装它（不确定它是否特别容易做到）。

经过几天的搜索，我的最终想法是使用 CairoSVG Python 模块将图形导出为第一个 PDF。然后我会找到一个 JS (jsPDF) 或 Python 工具来将此 PDF 包含在包含文本和表格的最终 PDF 中。

我将很快开始测试此解决方案，并让您知道我是否管理它。不过，如果你们中的一些人已经不得不处理类似的问题，我会很高兴听到你们的解决方案。

该应用程序将首次在 Windows 平台上运行，稍后将适应 MacOS、Linux、Android 和 iOS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:28:24.367

有一个简单的命令行工具（wkhtml to pdf），可以让你将 html 页面转换为 pdf 文件。它不是严格的 python/js 解决方案，但您可以调用 os.system() 或 python 中的类似内容来使用它。它对我的 python 程序有帮助，而且使用起来非常简单。命令是“wkhtmltopdf.exe inputname outputname”，你得到你想要的。以及它的免费软件。网站：[https ://code.google.com/p/wkhtmltopdf/](https://code.google.com/p/wkhtmltopdf/)

# python - Python Celery 任务在没有后端的情况下完成

> ID：14277930
> 
> 赞同：4
> 
> 时间：2013-01-11T12:10:30.257
> 
> 标签：python, celery, celery-task

我正在使用芹菜 3.0.12。

我有两个队列：Q1，Q2。

一般来说，我将主要任务放在 Q1 中，然后调用 Q2 中的子任务。我不想为子任务存储任何结果。所以我的子任务有装饰器@celery.task(ignore_results=True)。

我的主要任务现在应该等到子任务完成。因为我没有写结果。我不能使用：AsyncResult。有没有办法在主任务中等待子任务完成而不将状态存储到后端。我对 AsyncResults 的所有尝试都不是成功的燃料（它依赖于后端）。似乎 get() 也依赖于后端。

代码中的整个故事：

```
@celery.task(ignore_result=True)
def subtask():
   #Do something

@celery.task
def maintask():
    # Do something

    # Call subtask on Q2:
    res = subtask(options={'queue':'Q2'}).delay()

    # Need to wait till subtask finishes
    # NOT WORKING (DOES NEVER RETURN)
    res.get() 
```

我正在用 Celery Flower 监控整个应用程序，我可以看到子任务正在成功完成。Celery 如何检测到这种状态？我浏览了他们的代码，但不知道他们是如何进行检测的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:49:02.203

> 我的主要任务现在应该等到子任务完成。

您永远不应该等待子任务，因为这可能会导致资源匮乏和死锁（所有任务都在等待另一个任务，但没有更多的工作人员来处理它们）。

相反，您应该在子任务完成后使用回调来执行其他操作（请参阅 Celery 用户指南中的 Canvas 指南）。

> 我正在用 Celery Flower 监控整个应用程序，我可以看到子任务正在成功完成。Celery 如何检测到这种状态？我浏览了他们的代码，但不知道他们是如何进行检测的。

Flower 和其他监视器不使用结果（任务状态），而是使用我们所说的*事件*。

当工作人员中发生某些操作时，会发出事件消息，这会成为消息的瞬态流。进程可以订阅某些事件（或所有事件）来监控集群。

事件与任务状态是分开的，因为，

*   事件不是持久的（瞬态的）

    错过一个事件不被视为严重失败。

*   复杂字段未序列化

    事件用于诊断和信息目的，不应用于自省任务返回值或异常，例如，因为仅`repr()`存储这些以确保可以用其他语言编写监视器，并且可能会截断大字段以确保更快传送。

# c# - 在不同域的 Web 应用程序之间共享相同的会话

> ID：14277933
> 
> 赞同：0
> 
> 时间：2013-01-11T12:10:34.813
> 
> 标签：c#, asp.net, session-state

[我尝试通过链接](http://support.microsoft.com/kb/2527105)在跨子域的两个 asp.net 应用程序之间共享相同的会话。它工作正常。有没有办法在两个不同的域/不同的服务器之间共享相同的会话。
我需要在两个 Web 应用程序之间共享相同的会话，以便一个应用程序中的会话超时应该使第二个应用程序过期。
有什么建议么。

# c++ - OpenGL - 相机用四元数环绕一个点

> ID：14277935
> 
> 赞同：4
> 
> 时间：2013-01-11T12:10:38.710
> 
> 标签：c++, opengl, camera, rotation, quaternions

所以我目前使用四元数来存储和修改我的 OpenGL 场景中对象的方向，以及相机的方向。当直接旋转这些对象时（即说我想围绕 Z 轴旋转相机 Z 量，或者我想围绕 X 轴旋转对象 X，然后沿其局部 Z 轴平移它 T），我有没问题，所以我只能假设我的基本轮换代码是正确的。

但是，我现在正在尝试实现一个功能，使我的相机在空间中的任意点轨道上运行，并且很难做到这一点。到目前为止，这是我想出的，它不起作用（这发生在 Camera 类中）。

```
 //Get the inverse of the orientation, which should represent the orientation 
    //"from" the focal point to the camera
    Quaternion InverseOrient = m_Orientation;
    InverseOrient.Invert();

    ///Rotation
    //Create change quaternions for each axis
    Quaternion xOffset = Quaternion();
    xOffset.FromAxisAngle(xChange * m_TurnSpeed, 1.0, 0.0, 0.0);

    Quaternion yOffset = Quaternion();
    yOffset.FromAxisAngle(yChange * m_TurnSpeed, 0.0, 1.0, 0.0);

    Quaternion zOffset = Quaternion();
    zOffset.FromAxisAngle(zChange * m_TurnSpeed, 0.0, 0.0, 1.0);

    //Multiply the change quats into the inversed orientation quat
    InverseOrient = yOffset * zOffset * xOffset * InverseOrient;

    //Translate according to the focal distance
    //Start with a vector relative to the position being looked at
    sf::Vector3<float> RelativePos(0, 0, -m_FocalDistance);
    //Rotate according to the quaternion
    RelativePos = InverseOrient.MultVect(RelativePos);

    //Add that relative position to the focal point
    m_Position.x = m_FocalPoint->x + RelativePos.x;
    m_Position.y = m_FocalPoint->y + RelativePos.y;
    m_Position.z = m_FocalPoint->z + RelativePos.z;

    //Now set the orientation to the inverse of the quaternion 
    //used to position the camera
    m_Orientation = InverseOrient;
    m_Orientation.Invert(); 
```

最终发生的事情是相机围绕其他点旋转——当然不是物体，但显然也不是它本身，就好像它以螺旋形路径在空间中循环一样。

所以这显然不是让相机围绕一个点运行的方法，但什么是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:45:17.707

我将首先在球坐标中对相机进行操作，并根据需要转换为四元数。

鉴于以下假设：

*   相机没有胶卷
*   您正在查看的点是 [x, y, z]
*   你有偏航角，俯仰角
*   [0, 1, 0] 是“向上”

以下是计算一些重要值的方法：

*   视图向量：v = [vx, vy, vz] = [cos(yaw)*cos(pitch), sin(pitch), -sin(yaw)*cos(pitch)]
*   相机位置：p = [x, y, z] - r*v
*   右向量：v 与 [0, 1, 0] 的叉积
*   上向量：v 与右向量的叉积
*   您的视图四元数是 [0, vx, vy, vz] （这是具有 0 w 分量的视图向量）

现在在您的模拟中，您可以对俯仰/偏航进行操作，这非常直观。如果要进行插值，请将pitch+yaws前后转换为四元数并进行四元数球面线性插值。

# html - 404页面不显示样式

> ID：14277936
> 
> 赞同：2
> 
> 时间：2013-01-11T12:10:41.330
> 
> 标签：html, http-status-code-404

我的 404 页面未按预期显示。我已将 404 页面与 404.html 放在主索引页面 ( [http://stthomaschss.com](http://stthomaschss.com) ) 的同一目录中，并在 .htaccess 文件中写入

```
# DO NOT REMOVE THIS LINE AND THE LINES BELOW ERRORPAGEID:QeGuBu
ErrorDocument 404 /404.html 
```

如果未找到的错误位于同一目录中（http://stthomaschss.com/noexist），则 404 页面运行正常，但如果错误发生在其他目录中，例如[http://stthomaschss.com/results/noexist](http://stthomaschss.com/results/noexist) 404 页面未显示与其链接的样式...

需要帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:16:15.930

样式显示正确，因为浏览器正在`css`相对于 404 页面的路径中查找文件。您呈现的 html 包含：

```
<link rel="stylesheet" type="text/css" media="screen" href="css/reset.css">
<link rel="stylesheet" type="text/css" media="screen" href="css/grid_12.css">
<link rel="stylesheet" type="text/css" media="screen" href="css/style.css"> 
```

您需要更改它，以便它们引用实际的 css 位置，即：

```
http://stthomaschss.com/css/reset.css 
```

所以你应该将css链接更改为绝对链接，即

```
<link rel="stylesheet" type="text/css" media="screen" href="/css/reset.css"> 
```

# mysql - MySQL注册不起作用

> ID：14277938
> 
> 赞同：0
> 
> 时间：2013-01-11T12:10:46.823
> 
> 标签：mysql

好的，这是我的两个代码：register.php 和 finish.php

注册.php：

```
<?php include("yla.php"); ?>

<form action="finish.php" method="POST">
Etunimi: <input type="text" name="etunimi" /></br>
Sukunimi: <input type="text" name="sukunimi" /></br>
Henkilötunnus: <input type="text" name="henktun" /></br>
Osoite: <input type="text" name="osoite" /></br>
Postinumero: <input type="text" name="postiosoite" /></br>
Käyttäjänimi: <input type="text" name="kayttajanimi" /></br>
Salasana: <input type="password" name="salasana" /></br>
Kirjoita salasana uudelleen: <input type="password" name="re-password" /></br>
<input type="submit" value="Lähetä" />
</form>
<?php include("ala.php"); ?> 
```

和完成.php

```
<?php

//STEP 1 Connect To Database

$connect = mysqli_connect("HOST", "USERNAME", "PWD", "DB")
{
die("MySQL could not connect!");
}

/*
$DB = mysqli_select_db('DB');

if(!$DB)
{
die("My SQL could not select Database!");
}
*/

//STEP 2 Declare Variables

$Etunimi = $_POST['etunimi'];
$Sukunimi = $_POST['sukunimi'];
$Henkilotunnus = $_POST['henktun'];
$Osoite = $_POST['osoite'];
$Postinumero = $_POST['postinumero'];
$Kayttajanimi = $_POST['kayttajanimi'];
$salasana = $_POST['salasana'];
$Re_Password = $_POST['re-password'];

//STEP 3 Check To See If All Information Is Correct

if($Kayttajanimi == "")
{
die("Et antanut käyttäjänimeä");
}

if($salasana == "" || $Re_Password == "")
{
die("et antanut yhtä salasanoistasi");
}

if($salasana != $Re_Password)
{
die("Salasanat ei täsmää");
}

//STEP 4 Insert Information Into MySQL Database

if(!mysqli_query("INSERT INTO Asiakas (Etunimi, Sukunimi, Henkilotunnus, Osoite, Postinumero, Kayttajanimi, salasana)
VALUES ('$Etunimi', '$Sukunimi', '$Henkilotunnus', '$Osoite', '$Postinumero', '$Kayttajanimi', '$salasana')"))
{
*die("We could not register you due to a mysql error (Contact the website owner if this continues to happen.)");            <--- HERE IS WHERE THE ERROR HAPPENS*
}**

?> 
```

*die("由于 mysql 错误，我们无法为您注册（如果这种情况继续发生，请联系网站所有者。）"); <--- 这里是错误发生的地方*

这是错误，我不知道出了什么问题，我已经尝试了好几个小时，所以有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:49:32.120

做个总结：

```
<?php

//STEP 1 Connect To Database

if($connect = mysqli_connect("HOST", "USERNAME", "PWD", "DB")) {
echo "MySQL could not connect!";
}
else {
/*
$DB = mysqli_select_db('DB');

if(!$DB)
{
die("My SQL could not select Database!");
}
*/

//STEP 2 Declare Variables

$Etunimi        = mysqli_real_escape_string($connect, $_POST['etunimi']);
$Sukunimi       = mysqli_real_escape_string($connect, $_POST['sukunimi']);
$Henkilotunnus  = mysqli_real_escape_string($connect, $_POST['henktun']);
$Osoite         = mysqli_real_escape_string($connect, $_POST['osoite']);
$Postinumero    = mysqli_real_escape_string($connect, $_POST['postinumero']);
$Kayttajanimi   = mysqli_real_escape_string($connect, $_POST['kayttajanimi']);
$salasana       = mysqli_real_escape_string($connect, $_POST['salasana']);
$Re_Password    = mysqli_real_escape_string($connect, $_POST['re-password']);

//STEP 3 Check To See If All Information Is Correct

if($Kayttajanimi == "")
{
    echo "Et antanut käyttäjänimeä";
}
elseif($salasana == "" || $Re_Password == "")
{
    echo "et antanut yhtä salasanoistasi";
}
elseif($salasana != $Re_Password)
{
    echo "Salasanat ei täsmää";
}
else {
    //STEP 4 Insert Information Into MySQL Database
    $sql = "INSERT INTO 
                Asiakas 
                (Etunimi, Sukunimi, Henkilotunnus, Osoite, Postinumero, Kayttajanimi, salasana)
            VALUES 
                ('".$Etunimi."', '".$Sukunimi."', '".$Henkilotunnus."', '".$Osoite."', '".$Postinumero."', '".$Kayttajanimi."', '".$salasana."')";

    if(!mysqli_query($connect, $sql))
    {
        echo "An error occurred: ". mysqli_error($connect);
    }
}
}
?> 
```

# iphone - 为什么 uiwebview 不显示水平滚动条？

> ID：14277939
> 
> 赞同：0
> 
> 时间：2013-01-11T12:10:56.310
> 
> 标签：iphone, uiwebview, horizontal-scrolling

我在 iphone 视图中放置了一个 uiwebview，它的框架为 0,0,320,460。我用 loadHTMLString 加载 uiwebview。有时我会从网上得到**“table width=800 ...”**字符串。如果它的内容比它的框架宽，我想自动显示 uiwebview 的水平滚动条。

```
//webview
        newsWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
        newsWebView.delegate=self;
        newsWebView.backgroundColor=[UIColor clearColor];
        newsWebView.opaque=NO;
        newsWebView.scrollView.scrollEnabled=YES;
        [newsWebView.scrollView setShowsHorizontalScrollIndicator:YES];
        [newsWebView.scrollView setAlwaysBounceHorizontal:YES];
        newsWebView.userInteractionEnabled=YES; 
```

我用下面的代码加载字符串：

```
NSString *sHTML = [NSString stringWithFormat:@"<html> \n"
                               "<head> \n"
                               "<style type=\"text/css\"> \n"
                               "body {font-family: \"%@\"; font-size: %@; -webkit-user-select:none;}\n"
                               "</style> \n"
                               "</head> \n"
                               "<body>%@</body> \n"
                               "</html>", DEFAULT_FONT_NAME, [NSNumber numberWithInt:webViewFontsize], body]; 
```

我应该设置什么属性还是应该使用 css？

# facebook-graph-api - 使用 facebook graph api 获取用户喜欢的视频列表

> ID：14277943
> 
> 赞同：0
> 
> 时间：2013-01-11T12:11:13.487
> 
> 标签：facebook-graph-api, video, facebook-c#-sdk, windows-phone-8

我正在使用 facebook graph api 在 windows phone 8 上开发一个应用程序。为此，对于特定用户，我需要他/她曾经喜欢的所有 youtube 视频帖子，但直到现在我还没有成功。

我可以通过什么方式实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:49:08.463

您可能会发现“ [FQL/Like](https://developers.facebook.com/docs/reference/fql/like) ”对此很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:00:40.743

改用 SELECT user_id,object_type,object_id FROM 之类的 WHERE user_id=me() AND object_type = 'list'。在 FQL 查询资源管理器中试一试，您会看到“列表”都是视频结果。

# android - 为什么显示错误无法序列化？

> ID：14277944
> 
> 赞同：0
> 
> 时间：2013-01-11T12:11:16.547
> 
> 标签：android, ksoap2

我的网络服务；

```
[WebMethod]
    public int insertNhanVien(string[] arr)
    {

        SqlConnection con = new SqlConnection();
        // con.ConnectionString = "Data Source=.\\SQLEXPRESS;Initial Catalog=Bai1;Integrated Security=True";
        con.ConnectionString = "server=.\\SQLEXPRESS;database=QLNV;uid=sa;pwd=123456";
        con.Open();
        int n = 0;
        for (int i = 0; i < arr.Length; i++)
        {
            string[] s = arr[i].ToString().Split(',');

            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "Insert Into MUser(Ten,Tuoi) values(" + s[0].Replace("'", "''") + "," + s[1] + ")";
            cmd.CommandType = CommandType.Text;
            cmd.Connection = con;

            n = cmd.ExecuteNonQuery();
        }
        return n;
    } 
```

和android中的代码：

```
private boolean insertNhanVient() {
        boolean result = false;
        try {

            String NAMESPACE ="http://tempuri.org/";
            String METHOD_NAME ="insertNhanVien";
            String URL ="http://localhost:10829/WebSite/Service.asmx";
            String SOAP_ACTIONS = NAMESPACE + "/" + METHOD_NAME;
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            String [] arr =new String[3];
            arr[0]="le,12";
            arr[1]="hoang,33";
            arr[2]="nhung,23";
            request.addProperty("arr", arr);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);

            envelope.dotNet=true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidhttpTranport = new HttpTransportSE(URL);

            try {
                androidhttpTranport.call(SOAP_ACTIONS, envelope);
            } catch (IOException e3) {              
                result = false;

            } catch (XmlPullParserException e3) {

                result = false;
            }
            Object responseBody = null;
            try {
                responseBody = envelope.getResponse();
                String t = responseBody.toString();
                if (t.equals("1")) {
                    result = true;
                }
            } catch (SoapFault e2) {

                result = false;
            }
        } catch (Exception e) {

            result = false;
        } finally {
        }
        return result;
    } 
```

为什么显示异常：`java.lang.RuntimeException: Cannot serialize: [Ljava.lang.String;@4051d0a0`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:14:59.077

替换这一行

```
request.addProperty("arr", arr); 
```

有了这个

```
request.addProperty("arr", arr[0]); 
```

你不能传递整个数组。你应该传递它的一个元素。

**更新** 您可以添加多个属性，例如

```
 request.addProperty("prop1", arr[0]);
 request.addProperty("prop2", arr[1]);
 request.addProperty("prop3", arr[2]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:29:00.373

你不能传递整个数组..所以你必须在字符串中使用分隔符@@ ..并将它传递给服务......并在服务上进行相应的更改。

```
String commasepratedString="";
for(int i=0;i<arr.length();i++)
{
if(i!=(arr.length-1)) 
{
commasepratedString=commasepratedString+arr[i]+"@@";
}
else
{
commasepratedString=commasepratedString+arr[i];
}
}

 request.addProperty("arr", commasepratedString); 
```

并像这样更改服务代码

```
[WebMethod]
public int insertNhanVien(string commasepratedString)
{
    String arr[] = commasepratedString.Split('@@');
    SqlConnection con = new SqlConnection();
    // con.ConnectionString = "Data Source=.\\SQLEXPRESS;InitialCatalog=Bai1;          Integrated Security=True";
    con.ConnectionString = "server=.\\SQLEXPRESS;database=QLNV;uid=sa;pwd=123456";
    con.Open();
    int n = 0;
    for (int i = 0; i < arr.Length; i++)
    {
        string[] s = arr[i].ToString().Split(',');

        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = "Insert Into MUser(Ten,Tuoi) values(" + s[0].Replace("'", "''") + "," + s[1] + ")";
        cmd.CommandType = CommandType.Text;
        cmd.Connection = con;

        n = cmd.ExecuteNonQuery();
    }
    return n;
} 
```

# android - Android 2.x 上的弹出窗口（jQuery Mobile 1.2 + Cordova 2.2）中未显示下拉菜单

> ID：14277946
> 
> 赞同：0
> 
> 时间：2013-01-11T12:11:17.840
> 
> 标签：android, jquery, cordova, popup

修复了下拉菜单在 Android 2.x 和 Phonegap 上不起作用的问题： [<select> 在 Android 2.3.3 上的 Phonegap 应用程序中不起作用](https://stackoverflow.com/questions/9243477/select-not-working-in-phonegap-app-on-android-2-3-3)

但是，如果我在 jQuery Mobile 1.2 的弹出窗口中使用选择框，则该修复不起作用。

我正在使用 Cordova 2.2.0

任何人都知道如何让选择框在 Android 2.x 的弹出窗口中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T09:34:35.080

您应该尝试将下拉元素的 z-index 更改为 ~1000，远高于所有其他元素。

# android - 如何替换 android.jar 中的 .class 文件

> ID：14277959
> 
> 赞同：1
> 
> 时间：2013-01-11T12:11:56.013
> 
> 标签：android, class, bluetooth

我正在尝试使用 Galaxy s3 开发蓝牙应用程序。最近我得到了一个新的三星蓝牙 le api。有两个类文件，BluetoothDevice.class 和BluetoothAdapter.class。我想用它替换原始类文件。或者还有其他的api吗？感谢任何评论..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:29:46.977

您无法更改该库。尝试阅读文档并将它们结合到您的项目中或找到另一个库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:15:38.093

如果您想更改这些类的代码，您可以反编译，进行更改，然后重新编译。

# mysql - 根据日期部分将一行取消分组为多行

> ID：14277964
> 
> 赞同：1
> 
> 时间：2013-01-11T12:12:14.143
> 
> 标签：mysql, select-query

我正在使用 MySql，我有一个`Policy`带有`StartDate`和`EndDate`列的表。

如何编写`SELECT`查询以在这两列之间的日期范围内为每个月提供一个新行。

例如，如果我有以下政策：

```
Id        StartDate        EndDate
123456    2011-05-25       2011-07-26 
```

我想看看：

```
Id       PolicyId        StartDate        EndDate
1        123456          2011-05-25       2011-06-24
2        123456          2011-06-25       2011-07-24
3        123456          2011-07-25       2011-07-26 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:55:08.373

我不确定性能，因为我对存储过程没有太多经验，所以可能有更好的方法。此外，您可能想要更改临时表（又名。`PolicyList`）的结构。总之……</p>

这也可以转换为之前/之后的触发器，而不是每次都执行。

```
DROP PROCEDURE IF EXISTS CreatePolicyList;

DELIMITER //
CREATE PROCEDURE CreatePolicyList()
BEGIN
    DECLARE origId, done INT DEFAULT 0;
    DECLARE startD, endD DATE;

    DECLARE cur CURSOR FOR
        SELECT id, StartDate, EndDate FROM Policy;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    DROP TEMPORARY TABLE IF EXISTS PolicyList;
    CREATE TEMPORARY TABLE PolicyList (
        id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
        PolicyId INT(11) NOT NULL,
        StartDate DATE NOT NULL,
        EndDate DATE NOT NULL,
        PRIMARY KEY (id)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8;

    OPEN cur;
    recLoop: LOOP
        FETCH cur INTO origId, startD, endD;
        IF (done)
            THEN LEAVE recLoop;
        END IF;

        -- following is an alternative to keep records like
        -- "2011-05-25, 2011-06-25" in a single record
        -- WHILE startD < DATE_SUB(endD, INTERVAL 1 MONTH) DO
        WHILE startD < DATE_ADD(DATE_SUB(endD, INTERVAL 1 MONTH), INTERVAL 1 DAY) DO
            INSERT INTO PolicyList (PolicyId, StartDate, EndDate)
            VALUES (origId, startD,DATE_SUB(
                DATE_ADD(startD, INTERVAL 1 MONTH),
                INTERVAL 1 DAY
            ));
            SET startD = DATE_ADD(startD, INTERVAL 1 MONTH);
        END WHILE;

        IF startD >= DATE_SUB(endD, INTERVAL 1 MONTH) THEN
            INSERT INTO PolicyList (PolicyId, StartDate, EndDate)
            VALUES (origId, startD, endD);
        END IF;
    END LOOP;
    CLOSE cur;

END //

CALL CreatePolicyList; 
```

然后查询：

```
SELECT * FROM PolicyList
ORDER BY PolicyId, StartDate; 
```

# iphone - 从字符串和数组创建排序数组

> ID：14277967
> 
> 赞同：-5
> 
> 时间：2013-01-11T12:12:20.397
> 
> 标签：iphone, ios, objective-c

我正在尝试创建一个排序数组，但我无法理解如何创建它。我有一个字符串 (s1) 和另一个数组 (a1,a2,a3,....)。

我想使用字符串和数组创建一个新数组。我想把它们按这个顺序排列（s1 - ar - s1 - ar - s1 -ar）。

*ar = 以随机顺序排列的原始数组。

我将如何创建这个数组？

谢谢你的帮助

*编辑：我想要一个在每个备用索引处都有 s1 字符串的洗牌数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:21:21.127

如果我理解正确，您需要创建一个新数组，然后一个一个地填充它。所以就像插入字符串然后从数组中随机取一个元素，直到你用完元素。

如果要修改原始数组，则它必须是可变的（您使用的是什么语言？）

在objective-c中它会是这样的：

```
NSString* string;

NSArray* array;

NSMutableArray* temparray = [NSMutableArray arrayWithArray:array];

NSMutableArray* result = [[NSMutableArray alloc] initWithCapacity:[array count]*2];

for (int i=0; i< [array count];i++) {
    [result addObject:string];
    int index = rand() % [temparray count];
    [result addObject:[temparray objectAtIndex:index]];
    [temparray removeObjectAtIndex:index];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:35:02.257

看看[**NSMutableArray**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)：

```
NSMutableArray *array = [NSMutableArray arrayWithObjects:@"a1", @"a2", @"a3",nil];
[array insertObject:@"s1" atIndex:0]; // add as first object
[array addObject:@"s2"]; // add as last object
 // sort
[array sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

// swap elements
[array exchangeObjectAtIndex:1 withObjectAtIndex:2];

for (NSString *s in array)
{
    NSLog(@"elemnt: %@", s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:09:45.003

我最终改组了数组并将字符串添加到每个偶数索引。

```
NSMutableArray *array = [NSMutableArray arrayWithObjects:@"a1", @"a2", @"a3", @"a4", @"a5",nil];

[array shuffle];
for (int i = 0 ; i<array.count; i=i+2) {
    [array insertObject:@"s1" atIndex:i];
}

NSLog(@"%@",array); 
```

这就是我改组数组的方式

```
NSMutableArray+Shuffling.h

    @interface NSMutableArray (Shuffling)
    - (void)shuffle;
    @end 

NSMutableArray+Shuffling.m
#import "NSMutableArray+Shuffling.h"

@implementation NSMutableArray (Shuffling)

- (void)shuffle
{
    for (uint i = 0; i < self.count; ++i)
    {
        // Select a random element between i and end of array to swap with.
        int nElements = self.count - i;
        int n = arc4random_uniform(nElements) + i;
        [self exchangeObjectAtIndex:i withObjectAtIndex:n];
    }
}
@end 
```

这就是我输出的样子 Array (s1, a3, s1, a5, s1, a4, s1, a2, s1, a1)

抱歉，如果问题措辞不当。

# joomla - 创建模板 joomla3

> ID：14277969
> 
> 赞同：0
> 
> 时间：2013-01-11T12:12:27.183
> 
> 标签：joomla, joomla2.5

大家好，我正在为我的项目使用 joomla 3

我创建了一个模板。这是我的 templateDetail.xml

```
 <files>
        <folder>css</folder>
        <folder>images</folder>
        <folder>js</folder>
        <filename>index.php</filename>
        <filename>index.html</filename>
        <filename>templateDetails.xml</filename>
    </files>

    <positions>
        <position>menu</position>
        <position>cabecera</position>
        <position>slider</position>
        <position>carrusel</position>
        <position>noticias</position>
        <position>menuArquero</position>
        <position>menuHardware</position>
        <position>contenido1</position>
        <position>contenido2</position>
        <position>contenido3</position>
        <position>contenido4</position>
        <position>footer</position>
        <position>debug</position>

    </positions>

</extension> 
```

我创建了我的 zip 文件并尝试安装但收到此错误

JInstaller：：安装：文件不存在/Users/maitepiedrayera/Sites/VistaMar/tmp/install_50eff5971c7cd/VistamarTemplate/js

任何想法！

# arrays - 将自定义存档功能拆分为列 wordpress

> ID：14277973
> 
> 赞同：0
> 
> 时间：2013-01-11T12:12:45.407
> 
> 标签：arrays, wordpress, archive

WordPress，你有时会激怒我！

在过去的几个小时里，我一直在尝试做的是试图找到一种方法，让我可以使用自定义日期格式（不更改设置中的全局选项）在侧边栏显示存档，这是一项非常复杂的任务，应该真的就像使用 the_date(); 一样简单。例如，我只想制作 2013 年 1 月，而不是 1 月 13 日，同时还有一年在一个列中，另一个在另一列中。

通过调整此代码，我已经成功地完成了自定义日期格式：http: [//www.wpbeginner.com/wp-themes/how-to-customize-the-display-of-wordpress-archives-in-your-侧边栏/](http://www.wpbeginner.com/wp-themes/how-to-customize-the-display-of-wordpress-archives-in-your-sidebar/)对此：

```
function sidebar_archive_list($arclistno = "24") {

    global $wpdb;

        $limit = 0;

        $year_prev = null;

        $months = $wpdb->get_results("SELECT DISTINCT MONTH( post_date ) AS month , YEAR( post_date ) AS year, COUNT( id ) as post_count FROM $wpdb->posts WHERE post_status = 'publish' and post_date <= now( ) and post_type = 'post' GROUP BY month , year ORDER BY post_date DESC");

    foreach($months as $month) :
        $year_current = $month->year;

        if ($year_current != $year_prev){
             if ($year_prev != null){ }
        }
    ?>

    <a href="<?php bloginfo('url') ?>/<?php echo $month->year; ?>/<?php echo date("m", mktime(0, 0, 0, $month->month, 1, $month->year)) ?>" title="<?php echo date("F Y", mktime(0, 0, 0, $month->month, 1, $month->year)); ?>"><?php echo date("M y", mktime(0,0,0,$month->month,1,$month->year)); ?></a>

<?php 

    $year_prev = $year_current;

    if(++$limit >= $arclistno) { break; }

    endforeach; 

} 
```

这工作没有问题。

当我尝试将此函数返回的内容拆分为两个单独的列 div 时，问题就来了。我相信我需要将函数变成一个数组，就像你可以从 wp_get_archives('echo=0'); （还有一些额外的代码），但我的 PHP 技能并不高超，而且我无法完全弄清楚如何重新创建相同的东西。我认为它应该看起来像：

```
array(3) { [0]=> string(86) "January 2013"
           [1]=> string(90) "September 2012"
           [2]=> string(82) "March 2012"
} 
```

当 var_dumped 时。同样值得牢记的是，无论出于何种原因，锚链接也围绕日期，但会回显，而不是打印出来。

我用于内容拆分的代码是：

```
<?php

    $links = print(sidebar_archive_list());
    $archive_n = count($links);
        for ($i=0;$i<$archive_n;$i++):
            if ($i<$archive_n/2):
                $archive_left = $archive_left.'<li>'.$links[$i].'</li>';
            elseif ($i>=$archive_n/2):
                $archive_right = $archive_right.'<li>'.$links[$i].'</li>';
    endif;
        endfor;

?>                  

<div class="group">
    <ul class="sb_double_column_list alignleft">
        <?php echo $archive_left;?>
 </ul>

 <ul class="sb_double_column_list alignright">
        <?php echo $archive_right;?>
 </ul>
</div> 
```

任何帮助或建议将不胜感激。我对此很着迷！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:23:58.797

好吧，在搞砸了一点之后，我设法将 wp_get_archives 修改为我自己的自定义函数，这允许我以与尝试单独使用 wp_get_archives 时类似的方式通过列创建代码。

代码如下。

```
function sidebar_archive_list($args = '') { 

global $wpdb, $wp_locale; 

$defaults = array(
    'limit' => '24',
    'format' => 'html', 'before' => '',
    'after' => '', 'show_post_count' => false,
    'echo' => 0, 'order' => 'DESC',
); 

$r = wp_parse_args( $args, $defaults ); 
extract( $r, EXTR_SKIP );

if ( '' != $limit ) {
    $limit = absint($limit);
    $limit = ' LIMIT '.$limit;
}

$order = strtoupper( $order );
if ( $order !== 'ASC' ) 
    $order = 'DESC'; 

//filters
$where = apply_filters( 'getarchives_where', "WHERE post_type = 'post' AND post_status = 'publish'", $r ); 

$join = apply_filters( 'getarchives_join', '', $r );

$output = '';

    $query = "SELECT YEAR(post_date) AS `year`, MONTH(post_date) AS `month`, count(ID) as posts FROM $wpdb->posts $join $where GROUP BY YEAR(post_date), MONTH(post_date) ORDER BY post_date $order $limit";

    $key = md5($query);

    $cache = wp_cache_get( 'wp_get_archives' , 'general');

    if ( !isset( $cache[ $key ] ) ) { 
        $arcresults = $wpdb->get_results($query); 
        $cache[ $key ] = $arcresults;
        wp_cache_set( 'wp_get_archives', $cache, 'general' );
    } else {
        $arcresults = $cache[ $key ];
    }

    if ( $arcresults ) { 
        $afterafter = $after; 

        foreach ( (array) $arcresults as $arcresult ) { 

            $url = get_month_link( $arcresult->year, $arcresult->month ); 

            $year = date("y", strtotime($arcresult->year));

            $text = sprintf(__('%1$s %2$d'), $wp_locale->get_month_abbrev($wp_locale->get_month($arcresult->month)), $year); 

            if ( $show_post_count ) 
                $after = '&nbsp;('.$arcresult->posts.')' . $afterafter;
            $output .= get_archives_link($url, $text, $format, $before, $after);
        }
    }

if ( $echo ) // If "echo" has been defined as having a value (e.g: 1) then echo $output, if it has no value (0) then return the value.
    echo $output;
else
    return $output;
} 
```

只需将其放入 中`functions.php`，然后使用`sidebar_archive_list()`. 请注意，该功能仅支持每月显示，我已将默认值从`wp_get_archives`. 所以它会返回数组而不是回显它，默认限制是 24（12 个月下降一列，反之亦然）。

# ruby-on-rails - rails activerecord有什么问题？

> ID：14277974
> 
> 赞同：1
> 
> 时间：2013-01-11T12:12:55.797
> 
> 标签：ruby-on-rails, rails-activerecord

使用此代码：

```
candidates = Challenge.joins(:projectmilestone).where("challenges.id in (?) and projectmilestones.user_id = ?", c.subtree_ids, assignee.id)
logger.debug "candidates: #{candidates.count}" 
```

我把它写进我的日志：

```
SELECT COUNT(*) FROM "challenges" INNER JOIN "projectmilestones" ON "projectmilestones"."id" = "challenges"."projectmilestone_id" WHERE (challenges.id in (1122) and projectmilestones.user_id = 123)
Candidate projectmilestones: 0 
```

当我直接在数据库中运行查询时，结果为 1 为什么 Activerecord 告诉我结果 = 0？

请注意，当我从代码中删除“and projectmilestones.user_id”时，它会正确执行。

这让我发疯了几个小时......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:20:45.593

错误的 SQL 语句：**challenge.id in (1122)**

如果 c.subtree_ids 返回数组，则：

```
c.subtree_ids.join(", ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:18:07.970

我明白了：我在触发上述查询之前更改了 user_id，但后来我保存了它......

这就是为什么，在运行代码时，它是不正确的，但在交叉检查时，它是好的......

rails 没有任何问题，只是我有问题......对不起，感谢您的帮助！

# ruby-on-rails-3 - heroku db:pull 使用错误的 ruby 版本（1.8.7 而不是 1.9.3）

> ID：14277979
> 
> 赞同：1
> 
> 时间：2013-01-11T12:13:12.803
> 
> 标签：ruby-on-rails-3, heroku, ruby-1.9.3, taps

我正在使用红宝石 1.9.3

```
$ rvm list

rvm rubies

ruby-1.9.2-p290 [ x86_64 ] ruby-1.9.2-p320 [ x86_64 ] => ruby-1.9.3-p125 [ x86_64 ] ruby-1.9.3-p194 [ x86_64 ] ruby-1.9.3-p286 [ x86_64 ] * ruby-1.9.3-p327 [ x86_64 ] 
```

我安装了 gem taps 来拉取 Heroku 数据库。

但我遇到以下问题：

```
$ heroku db:pull --account personal --app myherokuapp
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.bundle: [BUG] Segmentation fault
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0] 
```

中止陷阱：6 为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:49:50.283

卸载并重新安装 heroku gem 和 taps gems 工作

# android - Android：是否可以从没有 UI 的服务中用相机拍照

> ID：14277981
> 
> 赞同：5
> 
> 时间：2013-01-11T12:13:28.017
> 
> 标签：android, camera

我能够使用相机拍照的唯一代码是从活动中运行的。我相当确定可以从服务中或从服务启动的 AsyncTask 中拍摄照片。

在我看来，相机 API 需要一个必须绑定到 UI 的 SurfaceView。也许我错了。有没有人编写过可以从服务中获取照片的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-29T11:54:22.350

`WindowManager`在Android中使用是可能的。

[https://stackoverflow.com/a/10268650/3047840](https://stackoverflow.com/a/10268650/3047840)

我应该说是的，您需要`SurfaceView`拍照，但不必绑定到某个 xml 布局。您可以将其添加到`WindowManager`即使在服务中也可以使用的类。所以`WindowManager`这里打开了一个“窗口”让你在 Android 中做任何浮动效果。

具体来说，

您可以添加一个`SurfaceView`并`WindowManager`设置参数如下。

```
mPreview = new CameraPreview(this, mCamera, jpegCallback);
WindowManager wm = (WindowManager) this
        .getSystemService(Context.WINDOW_SERVICE);
WindowManager.LayoutParams params = new WindowManager.LayoutParams(
        WindowManager.LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
        WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
        PixelFormat.TRANSPARENT);

params.height = 1;
params.width = 1;

wm.addView(mPreview, params); 
```

Android 有这个功能，而 iOS 没有。这就是为什么您可以在 Android 而不是 iOS 的主屏幕上激活 Facebook 聊天头。

[从android中的广播接收器显示facebook喜欢聊天头](https://stackoverflow.com/q/19033426/3047840)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-04T00:19:20.400

如果您仍在寻找，这里有一些更完整的代码。在服务中工作（经过测试）：

```
private void takePhoto() {

    System.out.println( "Preparing to take photo");
    Camera camera = null;

    int cameraCount = 0;
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
    cameraCount = Camera.getNumberOfCameras();
    for (int camIdx = 0; camIdx < cameraCount; camIdx++) {
        SystemClock.sleep(1000);

        Camera.getCameraInfo(camIdx, cameraInfo);

            try {
                camera = Camera.open(camIdx);
            } catch (RuntimeException e) {
                System.out.println("Camera not available: " + camIdx);
                camera = null;
                //e.printStackTrace();
            }
        try{
            if (null == camera) {
                System.out.println("Could not get camera instance");
            }else{
                System.out.println("Got the camera, creating the dummy surface texture");
                //SurfaceTexture dummySurfaceTextureF = new SurfaceTexture(0);
                try {
                    //camera.setPreviewTexture(dummySurfaceTextureF);
                    camera.setPreviewTexture(new SurfaceTexture(0));
                    camera.startPreview();
                } catch (Exception e) {
                    System.out.println("Could not set the surface preview texture");
                    e.printStackTrace();
                }
                camera.takePicture(null, null, new Camera.PictureCallback() {

                    @Override
                    public void onPictureTaken(byte[] data, Camera camera) {
                        File pictureFileDir = getDir();
                        if (!pictureFileDir.exists() && !pictureFileDir.mkdirs()) {
                            return;
                        }
                        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
                        String date = dateFormat.format(new Date());
                        String photoFile = "PictureFront_" + "_" + date + ".jpg";
                        String filename = pictureFileDir.getPath() + File.separator + photoFile;
                        File mainPicture = new File(filename);
                        addImageFile(mainPicture);

                        try {
                            FileOutputStream fos = new FileOutputStream(mainPicture);
                            fos.write(data);
                            fos.close();
                            System.out.println("image saved");
                        } catch (Exception error) {
                            System.out.println("Image could not be saved");
                        }
                        camera.release();
                    }
                });
            }
        }catch (Exception e){
            camera.release();
        }

    } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-11T12:17:08.143

我认为这是不可能的，因为相机需要预览屏幕。[在此处](https://stackoverflow.com/questions/2386025/android-camera-without-preview)查看类似问题

# html - div 输入浮动表格内容

> ID：14277985
> 
> 赞同：1
> 
> 时间：2013-01-11T12:13:33.953
> 
> 标签：html, css

我有以下示例

```
<table align="right" border="1" cellpadding="1" cellspacing="1">
  <tbody>
    <tr>
        <td>
            test
        </td>
        <td>
             test
        </td>
    </tr>
    <tr>
        <td>
             test
        </td>
        <td>
             test
        </td>
    </tr>
  </tbody>
</table>

<div style="width: 100%; background-color: red">
   test
</div> 
```

如果代码运行，div会进入浮动表格。该表将需要浮动，因此无法更改。有没有办法阻止其他内容进入浮动元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:26:07.860

一种解决方案是为表格提供明确的背景颜色。

```
<table style="background:white; float:right" ... 
```

请参阅新的[JSFiddle](http://jsfiddle.net/pdkCR/2/)。

其他答案都会更改其他属性，例如 div 和表格的相对宽度或位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:22:18.757

尽量不要使用过时的 HTML 标签，如对齐和边框。Cellpadding 和 cellspacing 也可以通过样式来实现，但我将把它留作练习:) 这将使 div 占用所需的空间。如果你知道table和这个div所在的父div的大小，只需将table和div的宽度设置为固定值即可。

```
<table style="float:right; border: 1px solid black;" cellpadding="1" cellspacing="1">
  <tbody>
    <tr>
        <td>
            test
        </td>
        <td>
             test
        </td>
    </tr>
    <tr>
        <td>
             test
        </td>
        <td>
             test
        </td>
    </tr>
  </tbody>
</table>

<div style="float:left; background-color: red">
   test
</div> 
```

[http://jsfiddle.net/Shnjt/](http://jsfiddle.net/Shnjt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:22:43.063

用这个

```
<div style="90%; margin-left:auto; margin-right:auto;">
<table style="float:right;width:45%">
</table>
<div style="width:45%;background-color: red; float:left;">
   test
</div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T12:22:47.820

如果你想让 div 和 table 浮动，你需要为 div 和 table 设置宽度和 css `float: left`: `float: right`。

否则，您可以尝试`width:100%`从您的删除`div`并添加`display: inline-block`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T12:23:18.073

有一个 css 属性控制元素是否尊重前一个浮动元素。

这是文档：[http ://www.w3.org/wiki/CSS/Properties/clear](http://www.w3.org/wiki/CSS/Properties/clear)

我不知道你想得到什么，但这可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T13:07:00.473

@李斯特先生....

```
 <div style="width: 100%; background-color: red;float:left;">
       test
    </div> 
```

向左飘浮; 将对您的代码有所帮助。

祝你好运！

# class - 使用“咖啡脚本类”而不是方法作为 Angular JS ng-controller

> ID：14277988
> 
> 赞同：2
> 
> 时间：2013-01-11T12:13:47.640
> 
> 标签：class, controller, coffeescript, angularjs

我想做一些我认为是使用“咖啡脚本类”和 Angular JS 结构的好方法。

```
<!doctype html>
<html ng-app>

  <head>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>Main Test</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/coffee.js"></script>
  </head>

  <body>
    <div ng-controller="MainClass" style="margin-left:10px">
      <h2>All todos: {{test()}}</h2>
    </div>
  </body>

</html> 
```

请注意，我将 DIV ng-controller 设置为 MainClass 并在 H2 HTML 标记内绑定 test() 方法。

```
class AngularJSController
  constructor: ($scope, $main) ->

    $scope.test = MainClass.prototype.test
    MainClass.test = MainClass.prototype.test
    $main.test = MainClass.prototype.test
    test = MainClass.prototype.test
    @test = MainClass.prototype.test

    console.log @test

class MainClass extends AngularJSController
  constructor: ($scope) ->
    super $scope, this

    setTimeout (->
        console.log test()
      ), 1000

    test();

  test: -> 'aloha!' 
```

在 AngularJSController 构造函数中，我尝试了所有我想在 MainClass 范围内设置我的超类方法 TEST 的形式，但没有成功。

我正在尝试这样做，因为我只想在我的 Angular JS 控制器和组件上使用类。

我已经遇到的问题：

1.  如果我尝试使用`@test()`而不是`test()`在 setTimeout 中使用，jQuery 已经用`this`一种 JQuery Window 对象替换了该属性。

    ```
    setTimeout (-> console.log @test()), 1000 
    ```

2.  我不知道`test()`调用的真正范围是什么，如果这个地方（或@cause Coffee）与地方任何东西都不一样。

    ```
    test() != this.test() != @.test() # the first scope isn't the same scope of last two calls 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-12T18:04:49.443

我使用了以下语法：

```
app = angular.module 'myapp', []

class MySimpleCtrl

  @$inject: ['$scope'] 
  constructor: (@scope) ->
    @scope.demo = 'demo value'
    @scope.clearText = @clearText

  clearText: =>
    @scope.demo = ""

app.controller 'MySimpleCtrl', MySimpleCtrl

angular.bootstrap document, ['myapp'] 
```

看看这个 jsFiddle：http: [//jsfiddle.net/jwcMA/](http://jsfiddle.net/jwcMA/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-31T01:46:31.820

这是一个带有基类的通用方法：

[http://www.devig.me/angular-dot-js-coffeescript-controller-base-class/](http://www.devign.me/angular-dot-js-coffeescript-controller-base-class/)

**BaseCtrl.coffee**

```
# dependency - Function.prototype.bind or underscore/lodash

app = angular.module 'someApp'

class @BaseCtrl
  @register: (app, name) ->
    name ?= @name || @toString().match(/function\s*(.*?)\(/)?[1]
    app.controller name, @

  @inject: (args...) ->
    @$inject = args

  constructor: (args...) ->
    for key, index in @constructor.$inject
      @[key] = args[index]

    for key, fn of @constructor.prototype
      continue unless typeof fn is 'function'
      continue if key in ['constructor', 'initialize'] or key[0] is '_'
      @$scope[key] = fn.bind?(@) || _.bind(fn, @)

    @initialize?() 
```

**BookFormCtrl.coffee**

```
app = angular.module 'someApp'

class BookFormCtrl extends BaseCtrl
  @register app
  # list of dependencies to be injected
  # each will be glued to the instance of the controller as a property
  # e.g. @$scope, @Book
  @inject '$scope', 'Book'

  # initialize the controller
  initialize: ->
    @$scope.book =
      title: "Hello"

  # automatically glued to the scope, with the controller instance as the context/this
  # so usable as <form ng-submit="submit()">
  # methods that start with an underscore are considered as private and won't be glued
  submit: ->
    @Book.post(@$scope.book).then =>
      @$scope.book.title = "" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:08:11.027

1.  setTimeout 与 jQuery 没有任何关系，但传递给 setTimeout 的函数确实在全局（窗口）上下文中执行。使用胖箭头将其显式绑定到当前范围。 [http://coffeescript.org/#fat_arrow](http://coffeescript.org/#fat_arrow)

    ```
    setTimeout (=>
      console.log @test()
    ), 1000 
    ```

2.  抱歉，我不确定你在问什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-20T00:01:43.960

在大多数情况下，Angular 确实支持 Coffescript 类！我发现了使用 RequireJs 的问题，需要一个函数而不是一个对象。

看看这里： http: [//softwareninjaneer.com/blog/writing-angularjs-controllers-coffeescript-classes/](http://softwareninjaneer.com/blog/writing-angularjs-controllers-coffeescript-classes/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-11T21:08:38.703

我对@malix 的回答并不满意，尽管它确实让我找到了一个可行的解决方案。这是我的做法：

```
'use strict'

class ImportsCtrl
  constructor: ($scope, Import) ->
    Import.query().then (imports) -> $scope.imports = imports

angular.module("greatDealsApp").controller "ImportsCtrl", ImportsCtrl 
```

这是一个人为的`$scope`变成 的属性的例子`ImportsCtrl`：

```
'use strict'

class ImportsCtrl
  constructor: ($scope, Import) ->
    @scope = $scope
    @Import = Import
    @loadImports()

  loadImports: =>
    @Import.query().then (imports) => @scope.imports = imports

angular.module("greatDealsApp").controller "ImportsCtrl", ImportsCtrl 
```

而且我不确定这是否重要，但我正在使用[ng-annotate](https://github.com/olov/ng-annotate)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-11T12:30:19.250

不可能。您不能将控制器设置为对象（MainClass），因为 AngularJS 确保控制器是一个函数。

您需要自定义 AngularJS 才能做到这一点。我认为这不是一个好主意。

### 参考

*   [https://github.com/angular/angular.js/blob/master/src/ng/controller.js](https://github.com/angular/angular.js/blob/master/src/ng/controller.js)
*   [https://github.com/angular/angular.js/blob/master/src/Angular.js](https://github.com/angular/angular.js/blob/master/src/Angular.js)

# scala - 隐式参数不传递给闭包

> ID：14277992
> 
> 赞同：2
> 
> 时间：2013-01-11T12:14:02.023
> 
> 标签：scala, closures, implicit

我写了一个小事务助手，它通过闭包并在事务中执行它：

```
object Transaction {

  val emf = Persistence.createEntityManagerFactory("defaultPersistenceUnit")

  def execute(action: EntityManager => Unit) {
    val em = emf.createEntityManager()
    em.getTransaction.begin()
    action(em)
    em.getTransaction.commit()
    em.close()
  }
} 
```

然后我有一个`ItemRepository`这样的：

```
object ItemRepository {
  def add(implicit entityManager: EntityManager, item: Item) {
    entityManager.persist(item)
  }
} 
```

最后，我想使用隐式传递的 EntityManager 执行存储库方法：

```
Transaction.execute(implicit em => ItemRepository.add(item)) 
```

但是编译器告诉我：

> 方法添加的参数不足：（隐式 entityManager：javax.persistence.EntityManager，隐式项目：models.Item）Unit。未指定值参数项。

如果我明确传递参数，一切正常：

```
Transaction.execute(em => ItemRepository.add(em, item)) 
```

这里有什么问题？[它看起来与此答案](https://stackoverflow.com/questions/1025181/hidden-features-of-scala/5015161#5015161)中的几乎相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T12:18:32.260

隐式修饰符适用于整个参数列表，而不仅仅是一个参数。因此，如果您希望 entityManager 参数是隐式的，而 item 参数不是隐式的，则必须这样编写：

```
object ItemRepository {
  def add(item: Item)(implicit entityManager: EntityManager) {
    entityManager.persist(item)
  }
} 
```

否则，编译器会假定您要显式传递整个参数列表，然后抱怨参数太少。