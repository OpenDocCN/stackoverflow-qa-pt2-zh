# StackOverflow 问答 13774000-13774999

# java - 计算 3D 空间中的点

> ID：13774003
> 
> 赞同：4
> 
> 时间：2012-12-08T02:58:37.837
> 
> 标签：java, 3d, floating-point, trigonometry, lwjgl

我正在尝试相对于原点 (0,0,0) 在 3D 空间中定位一个点。我有 3 个值来计算这一点：关于 x 和 y 轴的旋转度数以及“视距”。使用这些值，我如何定位 3D 空间中相对于原点的点？我尝试过使用基本的三角函数，但结果似乎是随机的。下图直观地说明了需要做什么。

![在此处输入图像描述](../Images/822b506c9b1b750341a70b8510abf553.png)

*   'vd' 是“视距”
*   'c' 是价值持有者
*   '(x,y,z)' 是我要查找的坐标

我要做的是找到玩家在一定距离外注视的点（在玩家的直接视线中找到一定距离外的点）。请记住，围绕 x 和 y 轴的旋转不断变化，但视图距离保持不变。如果有人对此有任何建议、方法或需要澄清，请在下面发表评论/回答。

我在 LWJGL 中这样做，我使用的代码如下：

```
 float c = (float)(Math.cos(Math.toRadians(A00.rot.y)) * view_distance);
    locate.y = (float)(Math.sin(Math.toRadians(rot.y)) * view_distance);
    locate.x = (float)(Math.cos(Math.toRadians(rot.x)) * c);
    locate.z = (float)(Math.sin(Math.toRadians(rot.x)) * c); 
```

**编辑：**

我的问题是这个当前的设置由于某种原因不起作用。数学对我来说似乎是合理的，但我在图表的实际设置中一定有什么问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:16:21.653

我建议查找四元数。无需完全了解*它们*的工作原理。您也可以在 Internet 上找到现成的 Java 类。四元数允许您表示 3D 空间中的旋转。

然后我要做的是从一个向量开始，该向量表示从原点指向前方的方向，并应用玩家当前拥有的相同旋转。现在它指向与玩家相同的方向。现在，如果您采用玩家的当前点和方向矢量，我们现在就有了一条描述玩家正在注视的位置的射线。

我建议使用此链接以获取有关四元数的更多信息。它们可能看起来很复杂，但正如我所说，你不需要完全理解它们是如何工作的以及为什么能够使用它们。只需复制公式并了解它们的使用方式。一旦你弄清楚如何使用它们，它们就会使 3d 旋转变得非常容易。

[http://content.gpwiki.org/index.php/OpenGL:Tutorials:Using_Quaternions_to_represent_rotation](http://content.gpwiki.org/index.php/OpenGL:Tutorials:Using_Quaternions_to_represent_rotation)

# javascript - javascript for循环中的所有setTimeouts同时发生

> ID：13774004
> 
> 赞同：1
> 
> 时间：2012-12-08T02:58:41.297
> 
> 标签：javascript, settimeout

此函数应从页面顶部向下滚动到下方 215 像素，并增加延迟，以便第一个 window.scrollTo 事件在 10 毫秒发生，下一个在 20 毫秒发生，依此类推。
最后一行应该延迟 2150 毫秒，因此总共需要大约 2 秒。
相反，它会立即向下滚动 215 个像素。

```
function scrollDown() {
  var yFinal=216, delay=0;
  for (y=0; y<yFinal; y++) {
    delay = delay+10
    setTimeout(function() {
      window.scrollTo(100,y);
    },delay);
  }
} 
```

悲伤的脸。为什么？

[编辑：感谢您的帮助！我用它来编写这个更复杂的最终解决方案，我在这里提供它供任何人敲竹杠。一开始滚动很快，然后慢慢滚动。正是我想要的。通过使用 setInterval 的 setTimeout 代替，它可以让您更好地控制速度曲线，因此您可以轻松地使其呈指数级减速]

```
function showCategory(categoryId)
{
  var yInitial=document.body.scrollTop,
      yFinal=216,
      delay=0;

  if (yInitial<yFinal)
  {
    yInitial=(yFinal-yInitial)/1.3+yInitial;
    window.scrollTo(100, yInitial);

    for (var yCurrent = yInitial; yCurrent < yFinal; yCurrent+=2)
    {
      delay += 30;
      (function(position)
      {
        setTimeout(function()
        {
          window.scrollTo(100, position);
        }, delay);
      })(yCurrent);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:00:56.607

超时*不会*同时发生，它们会在您期望的时间发生。但是，它们都尝试滚动到由同一`y`变量表示的位置，因此它们都使用`y`循环结束时的任何值。

通常的解决方法是引入一个闭包：

```
function scrollDown() {
    var yFinal = 216,
        delay = 0;

    for (var y = 0; y < yFinal; y++) {
        delay += 10;
        (function(position) {
            setTimeout(function() {
                window.scrollTo(100, position);
            }, delay);
        })(y);
    }
}​ 
```

（另请注意，您的`y`变量是全局的：您应该声明它`var`以使其成为本地变量。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:00:53.223

您必须包装`setTimeout`一个匿名函数才能通过`y`值而不是通过引用传递：

```
(function(y) {
    setTimeout(function() {
        window.scrollTo(100,y);
    }, delay);
})(y); 
```

# java - 哈希表覆盖

> ID：13774006
> 
> 赞同：5
> 
> 时间：2012-12-08T02:58:52.720
> 
> 标签：java, android

这是我第一次使用这个网站，所以如果我没有正确使用它，我深表歉意。请务必让我知道。

无论如何，我有一个 Account 对象，它接受 2 个字符串......一个 acctName 和 lastName（代码如下）。

我想将此对象插入到哈希表中，键为 acctName，并且我想使用多项式来减少冲突。我听说我必须重写 hashCode() 和 equal 方法。我相信我已经正确地覆盖了，但我不确定它是否正确，因为它似乎没有被调用。有人可以告诉我我是否做对了（在正确的位置覆盖并正确添加）并向我解释如何在添加后打印？

感谢并期待将来为社区做出贡献！

**类--->账户**

```
public class Account
{

 private String acctName;
 private String lastName;

 public Account(String acctName, String lastName)
  {
   this.acctName= acctName;
   this.lastName= lastName
   }

 @Override
public int hashCode() {

    return acctName.hashCode() + lastName.hashCode();

}

@Override
public boolean equals (Object otherObject) {
    if (!(otherObject instanceof Account)) {
        return false;
    }
    if (otherObject == this) {
        return true;
    }

    Account accountHolder = (Account) otherObject;
    return acctName.equals(accountHolder.acctName) && lastName.equals(accountHolder.lastName);
} 
```

**类---->驱动程序**

```
 public void insertInto()
{
 Hashtable<String,Account> hash=new Hashtable<String,HoldInformation>();
 Account account= new Account ("Deposit", "Jones");
 Account account2= new Account ("Withdraw", "Smith");

 hash.put ("deposit", account);
 hash.put ("Withdraw", account2);

 } 
```

**在帐户对象内使用 GETTER 进行编辑**

```
 public String testGetter()
  {

     return acctName.hashCode() + lastName.hashCode();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:02:18.203

关键字段的 HashCode 用于散列。您正在使用字符串作为键，并为您的自定义类实现哈希码。这就是为什么它没有被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:22:40.587

如果您没有任何重复的帐户名称，则可以使用每个帐户的名称作为映射键。

未调用您的*hashCode()*方法，因为您没有使用 Account 对象作为键：您使用的是字符串。

以下是使用其 accountName 将帐户放入地图的方法：

```
Account accountOne = new Account("checking", "Smith");
Account accountTwo = new Account("saving", "Jones");

Map<String, Account> accountMap = new HashMap<String, Account>();

accountMap.put(accountOne.getAcctName(), accountOne);
accountMap.put(accountTwo.getAcctName(), accountTwo); 
```

请注意，您必须实现 Account.getAccntName()，如下所示：

```
public String getAccttName() {
    return acctName;
} 
```

* * *

顺便说一句，看起来您在覆盖*hashCode()*和*equals()*方面做得很好。

而且...欢迎来到 StackOverflow。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:30:17.413

我已经尝试过folwinf。但是编译器没有显示任何错误！！！！

包装测试；

```
import java.util.Hashtable;

public class Account {
private String acctName;
 private String lastName;

 public Account(String acctName, String lastName)
  {
   this.acctName= acctName;
   this.lastName= lastName;
   }

 @Override
public int hashCode() {

    return acctName.hashCode() + lastName.hashCode();

}

@Override
public boolean equals (Object otherObject) {
    if (!(otherObject instanceof Account)) {
        return false;
    }
    if (otherObject == this) {
        return true;
    }

    Account accountHolder = (Account) otherObject;
    return acctName.equals(accountHolder.acctName) && lastName.equals(accountHolder.lastName);
}

public String testGEtter()
{
    return lastName+","+acctName;
}

public static void mian(String args[])
{
    Hashtable<String , Account> table = new Hashtable<>();
    Account acc= new Account("test1", "test2");
    table.put(acc.testGEtter(), acc);
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T03:10:33.380

您正在做一些与您想的不一样的事情。您正在使用字符串作为与您的对象无关的键。与您想用作帐户名称的字符串相同（实际上不是因为您的大写）并不重要，但是您还通过使用相同的键两次覆盖 Hashmap 中的对象（您是 hasmap将不再存储帐户，仅帐户3）。

在我看来，您想使用 Set 而不是 Map。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T06:28:05.703

hashmap 实现 hashCode() 实现来计算对象的 hashcode 以用作 hashmap 中的键。

从您的代码中，您似乎想将用户名映射到相应的帐户。在这种情况下，hashCode() 和 equals() 覆盖是没有用的。

注意：对象的 hashCode() 仅在对象用作键时使用。在您的情况下， java.lang.String 类的 hashCode() 被用于插入 Hash 映射。

*   hashCode 和 equals 的条件

    1.  每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。

    2.  如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。

    3.  每当你重写 equals() 方法时，你也需要重写 hashCode() 方法。

# html - 设置选择下拉菜单的样式，使其在所有浏览器和操作系统中看起来都一样

> ID：13774007
> 
> 赞同：0
> 
> 时间：2012-12-08T02:59:14.903
> 
> 标签：html, select, drop-down-menu, menu

鉴于 jquery 和 3rd 方供应商的力量，是否可以在表单上创建/样式化 html 选择下拉菜单，使其在 Windows 和 Mac OS 上的 IE、FF、Chrome 和 Safari 中看起来相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:05:44.980

是的，但是大多数人这样做的方式是在页面首次运行时完全替换下拉列表：

执行此操作的示例插件：http: [//gregfranko.com/jquery.selectBoxIt.js/](http://gregfranko.com/jquery.selectBoxIt.js/)

作为附加说明，我不建议更换浏览器标准选择框。浏览器选择框是在每个操作系统的基础上实现的，并使用操作系统设置来提供一个普遍理解的 ui 元素。一个例子是 ios 上的选择框以与基于触摸的操作系统相似的方式运行。

# ruby-on-rails - heroku: rake db:migrate 使用 mongoDB 失败

> ID：13774009
> 
> 赞同：0
> 
> 时间：2012-12-08T02:59:26.480
> 
> 标签：ruby-on-rails, mongodb, heroku, mongohq

运行`heroku run rake db:migrate`并得到错误：

```
Running `rake db:migrate` attached to terminal... up, run.9259
DEPRECATION WARNING: railtie_name is deprecated and has no effect. (called from <top (required)> at /app/config/application.rb:10)
WARNING: Global access to Rake DSL methods is deprecated.  Please include
    ...  Rake::DSL into classes and modules which use the Rake DSL methods.
WARNING: DSL method Quora::Application#task called at /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.5/lib/rails/application.rb:214:in `initialize_tasks'
rake aborted!
Database should be a Mongo::DB, not NilClass. 
```

本地一切运作良好。我有一个`mongoid.yml`包含 mongo 配置的文件，并使用 mongohq 创建了一个 mongo db：

```
defaults: &defaults
  host: '127.0.0.1'
  autocreate_indexes: false
  allow_dynamic_fields: true
  include_root_in_json: false
  parameterize_keys: true
  persist_in_safe_mode: false
  raise_not_found_error: true
  reconnect_time: 3

development:
  <<: *defaults
  database: mydb_development

development_mongohq:
  <<: *defaults
  #use demo mongohq database for fast run
  uri: mongodb://user:pass@linus.mongohq.com:10016/app9861715

test:
  <<: *defaults
  database: quora_test

# set these environment variables on your prod server
production:
  <<: *defaults
  host: '127.0.0.1'
  database: mydb 
```

我曾尝试寻找解决方案或任何有关如何解决但没有成功的方向。我究竟做错了什么？

**编辑：**我添加`include Rake::DSL`到我的 Rakefile 中，现在最初的警告消失了，但我仍然得到：

```
heroku run rake db:migrate
Running `rake db:migrate` attached to terminal... up, run.4751
DEPRECATION WARNING: railtie_name is deprecated and has no effect. (called from <top (required)> at /app/config/application.rb:11)
rake aborted!
Database should be a Mongo::DB, not NilClass.

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:24:57.233

我认为你错过了：

```
adapter: mongodb 
```

这是我对 postgres database.yml 的设置：

```
development: 
  adapter: postgresql
  encoding: unicode
  database: db
  pool: 50
  username: user
  password: pwd
  host: localhost 
```

您可能还想查看这篇文章：

[https://stackoverflow.com/a/6757749/169277](https://stackoverflow.com/a/6757749/169277)

# google-app-engine - Google Apps 不再免费，Google App Engine 上的自定义域

> ID：13774010
> 
> 赞同：12
> 
> 时间：2012-12-08T03:00:17.543
> 
> 标签：google-app-engine, google-apps

现在 Google Apps 将不再有免费帐户，我们是否需要向 Google 付费才能在 Google App Engine 上使用自定义域？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-05T09:28:12.147

[2015-09-28 更新] 现在，Google 允许您添加自定义域并设置 SSL，而无需 Google Apps。有关详细信息，请参阅此处：[https ://cloud.google.com/appengine/docs/using-custom-domains-and-ssl?hl=en](https://cloud.google.com/appengine/docs/using-custom-domains-and-ssl?hl=en)

~~更新……所有的免费午餐都结束了！~~

~~公告本身在这里 - [https://groups.google.com/forum/?fromgroups#!topic/google-appengine/jC_K-YlmXhM](https://groups.google.com/forum/?fromgroups#!topic/google-appengine/jC_K-YlmXhM)~~

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T13:59:03.783

实际上，在 Google App Engine 上添加自定义域是仍然获得免费 Google Apps 帐户的一种解决方法。我还没有尝试过，但根据[这个链接](http://www.labnol.org/internet/google-apps-free/26926/)它正在工作。你可以自己试试看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T05:21:58.113

如果您已经创建了帐户，它仍然是免费的。

# android - 将光标传递给另一个活动是否安全？

> ID：13774020
> 
> 赞同：2
> 
> 时间：2012-12-08T03:02:12.337
> 
> 标签：android, android-viewpager, android-cursor

我正在尝试使用光标进行水平滑动，但我只是没有摸索某些东西，希望这里有人可以帮助我理解。

我有一个显示项目列表的活动。它使用`ListView`由 custom 支持的 a `CursorAdapter`，并且该适配器由 a 管理`LoaderCallback`。这都是标准的东西。

当用户单击列表中的某个项目时，我想显示有关该项目的详细信息。目前我开始一个新的活动，传递所选项目的 ID。此活动将从数据库中加载有关该项目的信息。再次，标准的东西。

现在，在项目列表之间来回切换并单击项目以显示有关该项目的更多详细信息并不是最好的用户体验，最好允许用户单击项目以显示其信息，然后允许滑动显示列表中下一个或上一个项目的详细信息。

所以我假设当在 中单击一个项目时`ListView`，我需要启动一个包含`ViewPager`. 这`ViewPager`是由负责在适当位置获取视图的 PagerAdapter 支持的。

因此，我想`CursorAdapter`将列表活动中的 used 传递给详细信息活动，然后实现一个`PagerAdapter`遍历光标以在视图寻呼机中显示当前项目的详细信息的方法。这看起来很简单：`getItem(pos)`会调用`cursor.moveToPosition(pos)`然后从光标创建一个片段，等等。

但是（1）我不确定如何将 a 传递`CursorAdapter`给一个活动，因为我认为它不能被序列化以在一个包中传递，并且（2）我很犹豫是否将 CursorAdapter 传递给另一个活动，因为有没有`LoaderCallbacks`附加来管理生命周期。

一种可能的解决方案是启动新活动并让该活动执行新搜索以获取与列表活动中找到的光标等效的光标。例如，列表活动可能已经显示了匹配“title=foo”的项目，因此当单击项目 10 时，我们创建一个新的详细活动，显示有关项目 10 的信息，但还执行“title=foo”搜索以获得可用于水平滑动的光标。但这意味着我要执行两次相同的搜索：一次在列表视图中，一次在分页视图中。如果搜索需要一些时间，这可能是一个问题。

我还可以将光标存储在某个全局静态区域（例如`Application`）中，但这似乎也充满了危险。

还有`Parcelable`，但我认为这意味着我在一侧序列化光标并在另一侧反序列化它。对于大型列表，再次执行搜索以获取新光标可能更有效。

我确信这是一个常见的场景，所以我想知道在多个活动中管理游标的最佳做法是什么，或者其他一些方法是否更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:22:00.423

不，请不要将任何光标或光标适配器或类似的东西传递给其他活动。在流程的某个级别，您必须必须传递活动`context`才能创建对象。如果那个对象以某种方式使用另一个的上下文变成了另一个活动，事情可能会变得疯狂。

此外，我不明白为什么您首先需要适配器本身。有没有一种方法可以让您只为新活动使用光标（重新实例化）相同的光标，传递点击的位置`PagerAdapter`，然后预先选择您想要查看的详细位置？就像你说的，但你不需要新的搜索，传递`position`意图。

# ruby-on-rails - 在 Rails 中以登录用户身份进行测试

> ID：13774022
> 
> 赞同：1
> 
> 时间：2012-12-08T03:02:35.387
> 
> 标签：ruby-on-rails, testing, login

我想在我的 Rails 应用程序中测试我的功能，但测试需要用户/管理员登录。我查看了很多网站，但我无法掌握我真正应该做些什么才能让它工作。我确信有一件简单的事情可以做，但我似乎找不到它。

我已经看到使用了 stubs 命令，但我只知道它是一个未定义的方法，我真的不知道它应该做什么。

关于如何像用户/管理员请求它们一样运行测试的任何想法？

感谢我可能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:12:51.480

## 验收/集成测试：

1.  如果您使用的是黄瓜，只需以用户身份登录。就像是：

    fill_in 'users[username]', :with => "my username" fill_in 'users[password]', :with => "my password" click_button "Log In"

2.  如果你使用 rspec+capybara，你可以这样做（假设你使用 Devise 进行身份验证）

    ```
    # spec/spec_helper.rb
    include Warden::Test::Helpers

    # in spec/acceptance/some_spec.rb
    ...
    login_as FactoryGirl.create(:user) 
    ```

## 单元测试

*   如果您使用的是设计，请参阅[https://github.com/plataformatec/devise#test-helpers](https://github.com/plataformatec/devise#test-helpers)
*   否则，您可以通过写入`session`对象或存根`current_user`（假设您这样称呼它）来实现类似的功能

# model-view-controller - Backbone JS 应用程序主逻辑放在哪里

> ID：13774023
> 
> 赞同：0
> 
> 时间：2012-12-08T03:02:45.840
> 
> 标签：model-view-controller, web-applications, backbone.js

使用 Backbone，我开始构建一个应用程序，我将所有内容都完全分开。但现在我有以下问题。我应该把应用程序的主要逻辑放在哪里，在视图中还是在模型中。例如，我有一个视图和一个模型，它们绑定到一个按钮，当我单击该按钮时，我必须制作

```
$.ajax(params) 
```

我是把它放在视图中还是视图调用一个方法：

```
this.model.doAction(params) 
```

您认为哪种方法最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:45:06.967

您可以在视图中定义一个`events`属性，其格式`{"event selector": "callback"}`为例如。`{"click .collapse": "collapse"}`其中 collapse 将是一个定义为视图属性的函数。然后在这个回调函数中编写你的ajax请求代码。

此外，除非我遗漏了什么，否则“将视图和模型绑定到按钮”对我来说听起来并不正确。相反，您应该考虑与视图的一个实例相关联的一个模型实例。每当模型实例的属性发生变化时，`change`都会触发模型事件。您可以将视图函数绑定到此事件，以便模型中的更改反映在视图中。这是一个简单的例子

```
var Book = Backbone.Model.extend({
   // ...
});

var BookView = Backbone.View.extend({

    initialize: function () {
        this.model.bind('change', this.render, this);
    },

    render: function () {
        // here, make changes to the dom as per changes in model
    }
}); 
```

要将模型与视图实例相关联，您可以在实例化新视图对象时传递它。

```
var book = new Book({
   title: "A great book"       
});

var view = new BookView({model: book});

view.model.set('author', 'AGreatAuthor'); 
```

set 函数调用将触发 change 事件并导致调用视图的渲染函数。

完整示例请参考Todos应用示例的[注释源。](http://backbonejs.org/docs/todos.html)

# iphone - trigger.io facebook 使用 iphone 5 授权“意外失败”

> ID：13774025
> 
> 赞同：3
> 
> 时间：2012-12-08T03:03:01.300
> 
> 标签：iphone, facebook, trigger.io, forge

我有一个需要 Facebook 登录的应用程序。逻辑调用使用

```
forge.facebook.authorize(
    [''], 
    function() { ... }, 
    function(content) { alert(JSON.stringify(content)); } 
); 
```

此调用在 iphone 4 和 ipad 上的 Android 和 ios 5 和 6 上运行良好。它也曾经适用于 iphone 5。但是，最近我的 iphone 5 给出了错误，

```
{
    "message": "The operation couldn't be completed. (com.facebook.sdk error)"
    "type": "The operation couldn't be completed. (com.facebook.sdk error)"
    "subtype": null
} 
```

我正在使用 Forge 工具版本 3.3.28 和平台版本 1.4。

这会阻止 iphone 5 用户访问该应用程序。关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:07:13.613

看起来问题不是 iphone 5。在我手机的“Facebook”设置中，我的应用程序的“允许这些应用程序使用您的帐户”设置为“关闭”。哎呀。

# c++ - Visual Studio 2012 Express 编译器未将头文件正确链接在一起

> ID：13774026
> 
> 赞同：0
> 
> 时间：2012-12-08T03:03:05.207
> 
> 标签：c++, visual-studio, visual-c++

我正在为一个小 2D 游戏设置一些框架。现在，我只有几个类，但我立即陷入编译器问题。

我只用`main`函数运行了这个程序，所以我可以确认 Allegro（图形库）库链接已经工作。

我已将所有头文件 (.h) 放在解决方案资源管理器的“头文件”部分下，并将所有源文件 (.cpp) 放在“源文件”部分中。根据这个 Allegro 教程，我只修改了默认设置：[http](http://wiki.allegro.cc/index.php?title=Windows,_Visual_Studio_2010_and_Allegro_5) ://wiki.allegro.cc/index.php?title=Windows,_Visual_Studio_2010_and_Allegro_5 。它不应该以破坏性的方式影响任何事情。

我有几个文件，所以我将列出每个文件。我将跳过一些代码以减少大小和冗余。当我省略任何代码或不逐字地做任何事情时，我会在代码中写上这样的注释。（编辑：我实际上没有跳过任何代码）

主文件

```
#include "common.h"

int main(int argc, char **argv)
{
   ALLEGRO_DISPLAY *display = NULL;
   World* world = new World(640, 480);

   if(!al_init()) {
      fprintf(stderr, "failed to initialize allegro!\n");
      return -1;
   }

   display = al_create_display(640, 480);
   if(!display) {
      fprintf(stderr, "failed to create display!\n");
      return -1;
   }

   al_clear_to_color(al_map_rgb(0,0,0));

   world->draw(display);

   al_flip_display();

   al_rest(10.0);

   al_destroy_display(display);

   return 0;
} 
```

常见的.h

```
#if !defined(COMMON_INC)
#define COMMON_INC

#include "World.h"
#include "Pane.h"
#include <stdio.h>
#include <allegro5/allegro.h>

#endif 
```

世界.h

```
#if !defined(WORLD_INC)
#define WORLD_INC

#include "common.h"
#include "Pane.h"

class World{
public:
    World(int wp, int hp);
    void draw(ALLEGRO_DISPLAY* display);
    void update();

protected:

private:
    Pane* panel;
    int heightPix, widthPix;

};

#endif 
```

世界.cpp

```
#include "common.h"

World::World(int wp, int hp){
    widthPix = wp;
    heightPix = hp;
    panel = new Pane(this, 10, 10, 300, 400);
    return;
}

void World::draw(ALLEGRO_DISPLAY* display){
    panel->draw(display);
    return;
} 
```

窗格.h

```
#if !defined(PANE_INC)
#define PANE_INC

#include "common.h"

class Pane{
public:
    Pane(World* w, int xv, int yv, int wi, int he);
    World* getWorld();
    int getZ();
    void draw(ALLEGRO_DISPLAY* display);
    ALLEGRO_BITMAP* getBackground();

protected:
    void setXY(int xv, int yv);
    void setWidthHeight(int wi, int he);
    void setZ(int zv);
    void setBackground(ALLEGRO_BITMAP* ba);

private:
    int z;
    int x, y; //pixels
    int width, height; //pixels
    World* world;
    ALLEGRO_BITMAP* background;
};

#endif 
```

窗格.cpp

```
#include "common.h"

Pane::Pane(World* w, int xv, int yv, int wi, int he){
    this->setWidthHeight(wi, he);
    this->setXY(xv, yv);
    this->world = w;
}

World* Pane::getWorld(){
    return world;
}

void Pane::setXY(int xv, int yv){
    x = xv;
    y = yv;
    return;
}

void Pane::setWidthHeight(int wi, int he){\
    width = wi;
    height = he;
    return;
}

void Pane::setZ(int zv){
    z = zv;
    return;
}

void Pane::draw(ALLEGRO_DISPLAY* display){
    if(background != NULL)
        al_draw_bitmap(background, x, y, 0);
    else{
        background = al_create_bitmap(width, height);

        al_set_target_bitmap(background);

        al_clear_to_color(al_map_rgb(255, 0, 255));

        al_set_target_bitmap(al_get_backbuffer(display));

        al_draw_bitmap(background, x, y, 0);
    }
    return;
} 
```

编译器在构建时会生成此错误报告：（我称这款游戏为 madscientist，因为它应该是炼金术主题的）

```
1>------ Build started: Project: MadScientist, Configuration: Debug Win32 ------
1>  main.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(8): error C2061: syntax error : identifier 'World'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): warning C4183: 'getWorld': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(11): error C2061: syntax error : identifier 'ALLEGRO_DISPLAY'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): warning C4183: 'getBackground': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(18): error C2061: syntax error : identifier 'ALLEGRO_BITMAP'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(24): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(24): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(10): error C2061: syntax error : identifier 'ALLEGRO_DISPLAY'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\main.cpp(22): error C2660: 'World::draw' : function does not take 1 arguments
1>  World.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(8): error C2061: syntax error : identifier 'World'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): warning C4183: 'getWorld': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(11): error C2061: syntax error : identifier 'ALLEGRO_DISPLAY'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): warning C4183: 'getBackground': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(18): error C2061: syntax error : identifier 'ALLEGRO_BITMAP'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(24): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(24): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(10): error C2061: syntax error : identifier 'ALLEGRO_DISPLAY'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.cpp(6): error C2661: 'Pane::Pane' : no overloaded function takes 5 arguments
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.cpp(10): error C2511: 'void World::draw(ALLEGRO_DISPLAY *)' : overloaded member function not found in 'World'
1>          c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(7) : see declaration of 'World'
1>  Pane.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(8): error C2061: syntax error : identifier 'World'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): warning C4183: 'getWorld': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(11): error C2061: syntax error : identifier 'ALLEGRO_DISPLAY'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(12): warning C4183: 'getBackground': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(18): error C2061: syntax error : identifier 'ALLEGRO_BITMAP'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(24): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(24): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(10): error C2061: syntax error : identifier 'ALLEGRO_DISPLAY'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.cpp(3): error C2511: 'Pane::Pane(World *,int,int,int,int)' : overloaded member function not found in 'Pane'
1>          c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(6) : see declaration of 'Pane'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.cpp(9): error C2556: 'World *Pane::getWorld(void)' : overloaded function differs only by return type from 'int *Pane::getWorld(void)'
1>          c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9) : see declaration of 'Pane::getWorld'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.cpp(9): error C2371: 'Pane::getWorld' : redefinition; different basic types
1>          c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9) : see declaration of 'Pane::getWorld'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.cpp(10): error C2065: 'world' : undeclared identifier
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.cpp(30): error C2511: 'void Pane::draw(ALLEGRO_DISPLAY *)' : overloaded member function not found in 'Pane'
1>          c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(6) : see declaration of 'Pane'
1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

你拥有我所做的所有信息。我会为你总结一下，省去翻遍所有东西的麻烦。

*   有分为头接口和源实现的类
*   common.h 包含在所有文件中。它本身包括其他头文件中的所有类定义
*   编译时，编译器不会将其他头文件中定义的类识别为数据类型。正如您所料，错误会级联。
*   **实时错误检查器**不会记录**任何**错误。例如，当将“世界”用作数据类型时，将鼠标悬停在“世界”一词上时`Pane`，它可以完美地识别该类型。实时错误检查器是在编译时间之前用红色下划线错误的功能。
*   除了前面提到的修改之外，这个 Visual Studio 2012 Express 是新的。该项目被创建为一个空的 C++ 项目。在添加许多头文件和源代码之前，该`main`函数已正确编译。

感谢您的任何回复。如果您有任何疑问，请询问。我在使用 Visual Studio 时遇到的问题总是让我感到厌烦。

**编辑：**

我的循环标头逻辑由标头守卫保护。我不认为这种冗余是一个问题。

我尝试从头文件中删除所有包含，除了 Allegro 库的包含。这似乎效果更好，但仍然存在奇怪的问题。为什么包含的行为会导致这些数据类型出错仍然是一个谜。这是新的错误日志：

```
1>------ Build started: Project: MadScientist, Configuration: Debug Win32 ------
1>  main.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>  World.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.cpp(6): error C2065: 'panel' : undeclared identifier
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.cpp(11): error C2065: 'panel' : undeclared identifier
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.cpp(11): error C2227: left of '->draw' must point to class/struct/union/generic type
1>          type is ''unknown-type''
1>  Pane.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

**编辑第 2 轮：**

我切换了我的代码，所以 common.h 只包含 stdio 和 Allegro。所有的头文件和源文件都包括 common.h 和它们*单独*使用的任何类的头文件。Pane.cpp 包括 Pane.h 和 common.h。World.h 包括 Pane.h 和 common.h。

错误日志显示：

```
1>------ Build started: Project: MadScientist, Configuration: Debug Win32 ------
1>  main.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C2061: syntax error : identifier 'World'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(10): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(10): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(10): warning C4183: 'getWorld': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>  World.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(9): error C2061: syntax error : identifier 'World'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(10): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(10): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(10): warning C4183: 'getWorld': missing return type; assumed to be a member function returning 'int'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\pane.h(25): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.cpp(7): error C2661: 'Pane::Pane' : no overloaded function takes 5 arguments
1>  Pane.cpp
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C2143: syntax error : missing ';' before '*'
1>c:\users\ethoma\documents\visual studio 2012\projects\madscientist\madscientist\world.h(16): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这就是我现在看到我的包含订单的方式：

1.  主要包括常见的
2.  通用定义 COMMON_INC
3.  常见的包括 stdio 和 allegro
4.  主要包括 World.h
5.  世界定义 WORLD_INC
6.  世界包括共同，被封锁。但这应该没问题，因为 common 已经包含在内
7.  世界包括窗格
8.  窗格定义 PANE_INC
9.  窗格包括公用，它被阻止。但这应该没问题，因为 common 已经包含在内。
10.  窗格包括世界。这被阻止了，因为 main 已经包含了 World。这不应该没问题，因为 World 已经包含在内。如果我需要多次包含文件，为什么我还要有编译器保护，每个使用它的文件一次？

**编辑第 3 轮：** 我从这里的答案和评论中学到了很多东西。事实证明，根据维基百科，“循环依赖通常是由需要实现某种回调功能的缺乏经验的程序员引入的。” Pane 使用 World 和 World 使用 Pane 的事实本身就是一个设计缺陷。在 Java 中，这对我来说一切都很好。这很容易；我认为这是通知“拥有”对象动作的实体的最佳方式。

事实证明，这是一个糟糕的设计方案。对象不应依赖于它们的“拥有者”。相反，我需要实现一个观察者系统，窗格可以告诉世界它已经更新了它的状态。

阅读维基百科清除了我的所有问题，所以我现在认为这个问题已经完成。感谢贡献者为学习程序员提供的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T03:07:36.727

您的头文件可能无法正确链接。您以循环方式包含标题。您的头文件包括`common.h`，而`common.h`反过来又包括其他头文件，例如`World.h`和`Pane.h`。

这是任何编译器都无法编译的。您必须开发标题的层次结构，从低级标题到高级标题，并确保较高级别的标题仅包含较低级别的标题。这样，您将确保没有圆形夹杂物。

无论如何，为什么你`common.h`包含`World.h`and `Pane.h`？这看起来像是一个明显的错误。`common.h`旨在成为低级标题。让`World.h`并`Pane.h`包含它，但不要包含`World.h`并`Pane.h`进入`common.h`.

请注意，在这种情况下，标头保护不能解决任何问题。他们只是确保包含周期不会变得无限。它们打破了循环，但它们不能帮助您解决声明之间的循环依赖关系（如果存在这种依赖关系）。

看看你的情况在处理时会发生什么`main.cpp`

1.  `main.cpp`包括`common.h`
2.  `common.h`定义`COMMON_INC`
3.  `common.h`包括`World.h`
4.  `World.h`定义`WORLD_INC`
5.  `World.h`包括`common.h`. **整个`common.h`被包含守卫跳过，因为`COMMON_INC`在步骤 2 中定义了。**
6.  `World.h`包括`Pane.h`
7.  `Pane.h`定义`PANE_INC`
8.  `Pane.h`包括`common.h`. **整个`common.h`被包含守卫跳过，因为`COMMON_INC`在步骤 2 中定义了。**
9.  `Pane.h`指类型`World`。类型`World`是未知的，因为我们还没有得到它的定义`World.h`。**错误！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:35:43.500

如果您进行以下更改，我认为即使包含通告，所有内容都将编译

1.  在`common.h`您需要重新排列标题的顺序。

    ```
    #include <allegro5/allegro.h>
    #include "World.h"
    #include "Pane.h"
    #include <stdio.h> 
    ```

2.  在`pane.h`之后`#include common.h`，添加一个前向声明`class World`

    ```
    #include "common.h"
    class World;
    class Pane{
     ..... 
    ```

我认为这将使您的错误消失或至少大大减少它们。我的答案是基于您提供的原始代码，而不是基于编辑。

# c++ - 带指针的动态堆栈结构

> ID：13774035
> 
> 赞同：0
> 
> 时间：2012-12-08T03:05:25.590
> 
> 标签：c++, parameter-passing

我正在构建一个动态堆栈，该堆栈需要一个带有指向数组的指针的结构。

```
class studentstack
{

  private:
          struct StackNode
          {
                  int ID;
                  string Name;
                  string Address;
                  StackNode * next; // pointer to the next node
                  double * scores; // pointer to the arry of scores
          }; 
```

当我在我的主文件中尝试用双精度填充数组然后将它传递给一个函数时，当我什么都不做时似乎正确传递。这样做的正确方法是什么？

```
int main()
{
    studentstack s;

    string name;
    int id;
    string address;
    double score;

    for(int x =0; x<20; x++)
    {
        cout << "\nNew Student Name: ";
        cin >> name;

        cout << "\nID: ";
        cin >> id;

        cout << "\nAddress: ";
        cin >> address;

        double scoresArr[10];

        for(int z=0; z<10; z++)
        {
                cout << "\nStudent Score " << z+1 << ": ";
                cin >> score;
                scoresArr[z] = score;
        }

        s.push(name, id, address, scoresArr); 
```

推：

```
void studentstack::push(string name, int id, string address, double scoresArr)
{
     StackNode *newStudent; // To point to the new Student

     newStudent = new StackNode;
     newStudent-> ID = id;
     newStudent-> Name = name;
     newStudent-> Address = address;
     newStudent-> scores = scoresArr;

     // If there are no nodes in the stack
     if (isEmpty())
     {
        top = newStudent;
        newStudent->next= NULL;
     }
     else // or add before top
     {
          newStudent->next = top;
          top = newStudent;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:13:10.060

技术问题在于您尚未显示的代码（正如我正在写的那样），即`push`代码。

但是，无论您如何`push`搞砸事情，都有一个简单的解决方案可以工作。

即，使用 a`std::vector`而不是动态分配的原始数组。

或者，只需在每个节点中使用固定大小的原始数组。

就此而言，a`std::list`会比 DIY 链表更好，但大概这个练习的全部目的是要熟悉链表结构。在每个节点中对数组使用 a`std::vector`不会干扰该目标。但请记住，在现代 C++ 中，自己创建一个链表很少是一个好的解决方案，无论问题是什么——相反，使用标准库容器类和/或来自第三方库的容器类。

# python - Flask Log In Validation + Possible Documentation Error

> ID：13774042
> 
> 赞同：0
> 
> 时间：2012-12-08T03:06:19.320
> 
> 标签：python, validation, login, documentation, flask

[http://flask.pocoo.org/snippets/64/](http://flask.pocoo.org/snippets/64/)

I was reading the Flask docs.

I was just wondering if there is an error in the docs or maybe there's something I don't understand.

Shouldn't "if form.validate_on_submit():" be "if form.validate()"?

If not, how is the validate method used in the instance?

Thank you very, very much in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:09:17.670

From [the docs](http://packages.python.org/Flask-WTF/#flask.ext.wtf.Form.validate_on_submit):

> ### `validate_on_submit()`
> 
> Checks if form has been submitted and if so runs validate. This is a shortcut, equivalent to `form.is_submitted() and form.validate()`

# jquery - AjaxStart 和 AjaxStop 不工作

> ID：13774043
> 
> 赞同：1
> 
> 时间：2012-12-08T03:06:43.847
> 
> 标签：jquery, ajax

我使用 ajaxStart 和 ajaxStop 来显示加载 gif。在我添加这段代码之前它工作正常：

```
$(function(){  
$('.link a').live('click', function(ev) {

    ev.preventDefault();
    ev.stopPropagation();

    $('#main').load($(this).attr('href'));

  return false;
});
}); 
```

这是我的 ajaxStart/Stop 代码：

```
$(document).ajaxStart(function(){
    $("#loading").show();
 }).ajaxStop(function(){
    $("#loading").hide();
 }); 
```

请帮忙 ：）

**编辑**：我添加的导致问题的代码被添加以启用 div 内的页面链接，以便在单击时加载 div 本身中的链接，而不是加载整个窗口。新加载页面时，AjaxStart 和 AjaxStop 工作正常，但是一旦我单击 div 中的链接（加载页面），AjaxStart 就不会触发。

链接的代码（位于 div 内的页面中）：

```
 echo "<span class = 'link'><a href='feed.php?".$new_query_string ."' id='page_a_link'     name='page_a_link' >$i</a></span>";

 echo "<span class = 'link'><a id='page_a_link' name='page_a_link' href='feed.php?".$new_query_string ."' >< Pre</a></span>";

 echo "<span class = 'link'><a href='feed.php?".$new_query_string ."' id='page_a_link' name='page_a_link' >Next</a></span>"; 
```

这些是用于分页的。我只是从 PHP 代码中取出了链接部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:49:21.567

我认为问题在于，当您重新加载页面时，内容以及分页链接会被替换，并且您会丢失旧的绑定点击事件

试试这个代码：

```
$(function(){  

  function bindPagination() {
    $('span.link a').on('click', function(ev) {
       ev.preventDefault();
       // ev.stopPropagation();

       $('#main').load($(this).attr('href'), function(){
          //callback function fired when page loaded
          //now rebind click event
          bindPagination(); 
       });

       return false;
    });   
  }

}); 
```

并尝试以这种方式更改“加载器”：

```
$('#loader')
  .bind("ajaxSend", function() {
    $(this).show(); 
        })
  .bind("ajaxComplete", function() {
    $(this).hide();
}); 
```

# eclipse - 如何在eclipse中使用maven？

> ID：13774044
> 
> 赞同：1
> 
> 时间：2012-12-08T03:06:53.000
> 
> 标签：eclipse, maven, m2eclipse, m2e

下载源代码后我右键单击它然后“转换为maven项目”，它不应该修复所有错误吗？它仍然有超过 10,000 个错误。

编辑：我通过用winrar以外的东西解压缩eclipse来解决这个问题。Winrar 没有解压缩名称很长的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:19:13.007

您所要做的就是**仔细阅读以下书籍**

[http://www.sonatype.com/Support/Books/Developing-with-Eclipse-Maven](http://www.sonatype.com/Support/Books/Developing-with-Eclipse-Maven)

# c - 客户端服务器 udp c 中的错误

> ID：13774045
> 
> 赞同：0
> 
> 时间：2012-12-08T03:07:10.150
> 
> 标签：c, udp, client-server

我想使用客户端和使用 C 的服务器建立两台电脑之间的连接我已经能够从客户端发送数据并由服务器接收。但是当服务器要发送数据时，服务器端会出现错误：分段失败：11

这是我的程序：在客户端：

```
#include <stdio.h> 
#include <stdlib.h> 
#include <unistd.h> 
#include <errno.h> 
#include <string.h> 
#include <sys/types.h> 
#include <sys/socket.h> 
#include <netinet/in.h> 
#include <arpa/inet.h> 
#include <netdb.h>
#define MYPORT 4950
#define MAXBUFLEN 100 

int main() {
    char no[16], dt[30];
    printf("‐‐‐‐‐ PROGRAM CHATTING ‐‐‐‐‐\n");
    printf("To : ");
    scanf("%s", no);
    while(1){
        printf("Me : ");
        scanf("%s", dt); send(no, dt); receive();
   } 
} 

int send(char no[], char dt[])
{
int sockfd;
struct sockaddr_in my_addr;
struct sockaddr_in their_addr; 
struct hostent *he;

int addr_len, numbytes;
if((he = gethostbyname(no)) == NULL) 
{
    perror("gethostbyname");
    exit(1); 
}
if((sockfd=socket(AF_INET,SOCK_DGRAM,0))==-1)
{ //40
    perror("socket");
    exit(1); 
}
their_addr.sin_family = AF_INET;

their_addr.sin_port = htons(MYPORT); 
their_addr.sin_addr=*((struct in_addr*)he->h_addr);
memset(&(their_addr.sin_zero), '\0', 8);
if((numbytes=sendto(sockfd,dt,strlen(dt),0,(struct sockaddr*)&their_addr,sizeof(struct sockaddr)))==-1)
    {
    perror("sendto");
    exit(1); 
}
close(sockfd);
return 0; 
}

int receive()
{
     int sockfd;

struct sockaddr_in my_addr; 
struct sockaddr_in their_addr; 
struct hostent *he;

int addr_len, numbytes;
char buf[MAXBUFLEN];
if((sockfd=socket(AF_INET,SOCK_DGRAM,0))==-1) //68
{
    perror("socket");
    exit(1); 
}
my_addr.sin_family = AF_INET; 
my_addr.sin_port = htons(MYPORT); 
my_addr.sin_addr.s_addr = INADDR_ANY; memset(&(my_addr.sin_zero),'\0',8);
if(bind(sockfd,(struct sockaddr *)&my_addr,sizeof(struct sockaddr))==-1)
{
    perror("bind");
    exit(1); 
}
addr_len = sizeof(struct sockaddr);
if((numbytes=recvfrom(sockfd,buf,MAXBUFLEN-1,0,(struct sockaddr *)&their_addr,&addr_len))==-1)
{
    perror("recvfrom");
    exit(1); }
buf[numbytes]='\0';

printf("%s : \"%s\"\n", inet_ntoa(their_addr.sin_addr), buf);
close(sockfd);
return 0; 
} 
```

和服务器：

```
 #include <stdio.h> 
 #include <stdlib.h> 
 #include <unistd.h> 
 #include <errno.h> 
 #include <string.h> 
 #include <sys/types.h> 
 #include <sys/socket.h> 
 #include <netinet/in.h> 
 #include <arpa/inet.h> 
 #include <netdb.h>
 #define MYPORT 4950
 #define MAXBUFLEN 100
char noip[50]; 
int main() 
{
char no[16];
char dt[30];
printf("‐‐‐‐‐ PROGRAM CHATTING ‐‐‐‐‐\n");
receive();
strcpy (no, noip); 
while(1){
    printf("Me : ");
    scanf("%s", dt); 
    send( dt); 
    receive();
    }
 } 

 int send(char dt[30]) {
   int sockfd;
   struct sockaddr_in my_addr; 
   struct sockaddr_in their_addr; 
   struct hostent *he;
   int addr_len, numbytes;

if((sockfd=socket(AF_INET,SOCK_DGRAM,0))==-1){
        perror("socket");
        exit(1); 
    }
    their_addr.sin_family = AF_INET;
    their_addr.sin_port = htons(MYPORT); 
their_addr.sin_addr=*((struct in_addr*)he->h_addr);
memset(&(their_addr.sin_zero), '\0', 8);
if((numbytes=sendto(sockfd,dt,strlen(dt),0,(struct sockaddr *)&their_addr,sizeof(struct sockaddr)))==-1)        
        {
        perror("sendto");
        exit(1); }
    close(sockfd);
    return 0; }

int receive() {
int sockfd;
struct sockaddr_in my_addr;
struct sockaddr_in their_addr; 
struct hostent *he;
int addr_len, numbytes;
char buf[MAXBUFLEN];
char no[16];

if((sockfd=socket(AF_INET,SOCK_DGRAM,0))==-1){
        perror("socket");
        exit(1); }

my_addr.sin_family = AF_INET; 
my_addr.sin_port = htons(MYPORT); 
my_addr.sin_addr.s_addr = INADDR_ANY; 
memset(&(my_addr.sin_zero),'\0',8);

if(bind(sockfd,(struct sockaddr *)&my_addr,sizeof(struct sockaddr))==-1){
        perror("bind");
        exit(1); }

addr_len = sizeof(struct sockaddr);
if((numbytes=recvfrom(sockfd,buf,MAXBUFLEN-1,0,(struct sockaddr *)&their_addr,&addr_len))==-1)
{
    perror("recvfrom");
    exit(1);}

buf[numbytes]='\0';
printf("%s : \"%s\"\n", inet_ntoa(their_addr.sin_addr), buf);
strcpy(no,inet_ntoa(their_addr.sin_addr));//copy data ke varibel no 
        close(sockfd);
        return 0;
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:22:41.437

进行调试构建（选项 -g），然后调用 gdb。它会在您使用的地方打开一个提示

```
file "a.out" 
```

加载可执行文件，然后调用“运行”以在调试器的控制下实际运行您的程序。当段错误发生时，调用“回溯”，它应该告诉你函数，也许是它发生的行。

但是当我看到代码时，我的第一个猜测是输入 char 数组。发送时输入的字符是否超过 29 个？;)

# python - python的正则表达式输出不正确

> ID：13774048
> 
> 赞同：2
> 
> 时间：2012-12-08T03:07:40.493
> 
> 标签：python, regex

```
import os,re
def test():
    list  = re.findall(r'(255\.){2}','255.255.252.255.255.12')
    print list
if __name__ == '__main__':
test() 
```

输出：“['255.', '255.']”</p>

为什么不【255.255，255.255】？</p>

mactch 对象应该是“255.255”

我怎样才能得到正确的输出结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:12:05.587

在您的正则表达式中，您只捕获第一个`255.`. 您需要将要捕获的所有内容包装在捕获组中：

```
>>> re.findall(r'((?:255\.){2})','255.255.252.255.255.12')
['255.255.', '255.255.'] 
```

`(?:...)`是非捕获组。它基本上可以让您对事物进行分组，而无需将它们显示为捕获的组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:14:55.737

嗯，不完全是。首先，您需要一个非捕获组 - 您拥有的捕获组只会捕获 '255.'，并将其用作`re.findall`.

例子：

```
re.findall(r'(?:255\.){2}', '255.255.252.255.255.12') 
```

(?:) 构造是一个非捕获组 - 并且没有任何捕获组，re.findall 返回整个匹配字符串。

请注意，这实际上不会返回`['255.255', '255.255']`- 它实际上会返回`['255.255.', '255.255.']`。

# c# - 通过 svcutil 生成服务引用时出错

> ID：13774049
> 
> 赞同：0
> 
> 时间：2012-12-08T03:07:40.320
> 
> 标签：c#, wcf, wcf-binding, svcutil.exe, service-reference

我正在使用 svcutil 从我的 wcf 端点生成服务引用。直到最近一切正常，但突然我开始在所有端点上收到以下错误。

> 尝试使用 WS-Metadata Exchange 或 DISCO 从“http://localhost.myservice.com/MyEndpoint.svc”下载元数据。错误：无法导入 wsdl：绑定详细信息：字典中不存在给定的键。错误源的 XPath：//wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='wsMyEndpoint']
> 
> 错误：无法导入 wsdl:port 详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。wsdl:binding 的 XPath: //wsdl:definitions[@targetNamespace='http://tempuri.org/' ]/wsdl:binding[@name='wsMyEndpoint'] 错误源的 XPath: //wsdl:definitions[@ targetNamespace='http://myservice.com/services/']/wsdl:service[@name='MyEndpoint']/wsdl:port[@name='wsMyEndpoint']
> 
> 错误：无法导入 wsdl：绑定详细信息：字典中不存在给定的键。错误源的 XPath：//wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='netNamedMyEndpoint']
> 
> 错误：无法导入 wsdl:port 详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。wsdl:binding 的 XPath: //wsdl:definitions[@targetNamespace='http://tempuri.org/' ]/wsdl:binding[@name='netNamedMyEndpoint'] 错误源的 XPath: //wsdl:definitions[@ targetNamespace='http://myservice.com/services/']/wsdl:service[@name='MyEndpoint']/wsdl:port[@name='netNamedMyEndpoint']
> 
> 正在生成文件... 警告：未生成任何代码。如果您尝试生成客户端，这可能是因为元数据文档不包含任何有效的合同或服务，或者因为发现所有合同/服务都存在于 /reference 程序集中。验证您是否将所有元数据文档传递给该工具。

我通过在生成服务引用的批处理文件中调用 svcutil 来生成服务引用。

我预计这可能是另一个开发人员所做的改变，但这只是猜测。任何人都知道我如何调查这里的问题，甚至指出我正确的方向重新解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:58:06.620

为了从您的端点自动生成客户端，服务需要成功构建和部署，并且没有其他错误。此外，IIS 需要准备好接受来自服务的消息。

一些调试尝试：一旦部署，如果你手动运行批处理文件，你能生成代理/服务引用吗？如果您将 VS 指向端点并在“丢弃”项目中创建服务引用，事情会奏效吗？

如果没有，请在相关服务行为中发布该元素的配置。我怀疑答案可能就在那里。

# c# - 使用 IDataReader 从 SqlBulkCopy 返回记录

> ID：13774053
> 
> 赞同：0
> 
> 时间：2012-12-08T03:08:43.527
> 
> 标签：c#, sql-server, entity-framework, sqlbulkcopy

我正在使用 SqlBulkCopy 类对我的数据库进行批量插入/更新。数据插入/更新后，我想用它做更多的逻辑。

目前，我的 IDataReader 混合了要插入和更新的记录。针对数据库的所有操作都正常工作。但是，数据写入后，IDataReader 对象不再有任何行。

有没有办法保留行，并为插入的记录自动生成唯一标识符字段？

这是我的代码片段：

```
 public IDataReader DoBulkCopy<T>(List<T> DataToInsert, string DestinationTableName)
    {
        var BulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["MyConn"].ConnectionString, SqlBulkCopyOptions.KeepNulls);
        BulkCopy.BulkCopyTimeout = 0;
        BulkCopy.BatchSize = 50;
        BulkCopy.DestinationTableName = DestinationTableName;

        IDataReader reader = DataToInsert.AsDataReader();
        BulkCopy.WriteToServer(reader);
        BulkCopy.Close();

        return reader;
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:26:37.953

I have come to the conclusion after much research that this is not possible. I was able to come up with a work around. What I did was wrote the DateTime.Now() to a variable prior to executing the query. After the query executed, I did a select query for all records where the LastUpdated timestamp field as greater than the DateTime variable recorded before the insert/update.

Please note this works fine in my scenario because the data in this table is inserted/updated by this scheduler only. If this was an app where the data can come from multiple places or users, this approach would need to be rethought or adjusted.

# php - 说服 IDE 变量包含对类的引用？

> ID：13774054
> 
> 赞同：1
> 
> 时间：2012-12-08T03:08:45.803
> 
> 标签：php, codeigniter, autocomplete, phpstorm, phpdoc

我正在使用 CodeIgniter 并且有我自己的类，我可以四处走动。

特别是一个从我的模型中实例化的类，实际上是一个扩展它的类。它开始如下，

```
/**
 * @var CI_Controller
 */
protected static $ci;
/**
 * @var CI_DB_active_record
 */
protected static $db;
/**
 * @var Module_Model
 */
protected static $model;

protected $dateModified = null;
protected $dateDeleted = null;
protected $dateCreated = null;

/**
 * @param stdClass $data
 */
public function __construct(stdClass $data) {

    self::$ci =& get_instance();
    self::$db = self::$ci->db;
    self::$model = self::$ci->{self::$model};

    $this->{self::$model->primaryKey} = $data->{self::$model->primaryKey};
    $this->dateModified = (self::$model->dateModified === false ? null : $data->{self::$model->dateModified});
    $this->dateDeleted = (self::$model->softDelete === false ? null : $data->{self::$model->softDelete});
    $this->dateCreated = (self::$model->dateCreated === false ? null : $data->{self::$model->dateCreated});
} 
```

效果很好，在扩展它的类中，我只是将构造函数设置为：

```
public function __construct(stdClass $data) {

    parent::$model = 'properties';

    parent::__construct($data);
} 
```

这就是线路`self::$model = self::$ci->{self::$model};`进来的地方。

它告诉类创建的模型是什么，以便它可以访问该模型。

这一切都很好，但我遇到的问题是自动完成。

直到上面列出的行自动完成工作时调用`self::$model->...`它基于`Module_Model`类（这是我的所有模型都扩展的类）由于这个docblock：

```
/**
 * @var Module_Model
 */ 
```

现在显然没有 IDE 会足够聪明地理解 Code Igniter 的工作原理，所以我不希望它能够根据我指定的模型自动完成。

但是，我希望它仍然能够根据`Module_Model`课程自动完成。

无论如何（最好通过 docblocks）来说服`self::$model`仍然包含对`Module_Model`.

如果重要的话，我将使用 PHPStorm 作为我的 IDE，它理解 PHPdoc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:46:09.117

您在 PHPStorm 中设置 PHP 包含路径，按照[这些说明](http://www.jetbrains.com/phpstorm/webhelp/configuring-include-paths.html)进行操作。

然后，您可以调整[此答案](https://stackoverflow.com/questions/9308604/how-to-integrate-codeigniter-with-netbeans-fully/)以帮助您（它适用于 NetBeans）。

# php - 如何将下拉菜单中的选项返回到“请选择”选项？

> ID：13774058
> 
> 赞同：0
> 
> 时间：2012-12-08T03:09:47.140
> 
> 标签：php, html

```
<?php
            // required variables (make them explciit no need for foreach loop)

            $getyear       = (isset($_POST['year'])) ? $_POST['year'] : '';
            $getpass       = (isset($_POST['studentpass'])) ? $_POST['studentpass'] : '';
            $getretypepass = (isset($_POST['retypepass'])) ? $_POST['retypepass'] : '';
            $errormsg      = (isset($errormsg)) ? $errormsg : '';

$validSubmission = (isset($_POST['registerbtn']) && isset($getyear) && isset($getpass) && isset($getretypepass));

            $min_year = 1;
            $max_year = 10;
            $years    = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
            $yearHTML = '';
            $yearHTML .= '<select name="year" id="yearDrop">' . PHP_EOL;
            $yearHTML .= '<option value="">Please Select</option>' . PHP_EOL;
    foreach ($years as $year) {
        if ($validSubmission && $year == $getyear) {
            $yearHTML .= "<option value='" . $year . "' selected='selected'>$year</option>" . PHP_EOL;
        } else {
            $yearHTML .= "<option value='" . $year . "'>$year</option>" . PHP_EOL;
        }
    }

            $yearHTML .= '</select>';

            if ((isset($_POST['registerbtn']))) {
                if (in_array($_POST['year'], $years) === true) {
                    $getyear = (int) $_POST['year'];
                }
                $getpass       = $_POST['studentpass'];
                $getretypepass = $_POST['retypepass'];

                if ($getyear) {
                    if ($getpass) {
                        if (strlen($getpass) <= 5) {
                            $errormsg = "The Password must be a minimum of 6 characters or more";
                        } else {
                            if ($getretypepass) {
                                if ($getpass === $getretypepass) {
                                    //perform 2 queries, one query contains $aliasnumrows and other contains $numrows

                                    if ($aliasnumrows == 0) {
                                        if ($numrows == 0) {
                                            //perform query which contains $numrows

                                            if ($numrows == 1) {
                                                $errormsg = "<span style='color: green'>Student has been Registered</span>";

                                                $getyear = "";

                                            } else {
                                                $errormsg = "An error has occured, Student has not been Registered";

                                            }

                                        }

                                        else {
                                            $errormsg = "There is already a Student with that Username";
                                        }
                                    }

                                    else {
                                        $errormsg = "There is already a Student with that Alias";
                                    }
                                }

                                else {
                                    $errormsg = "Your Passwords did not match";
                                }
                            }

                            else {
                                $errormsg = "You must retype your Password to Register";
                            }
                        }
                    } else {
                        $errormsg = "You must enter in a Password to Register";
                    }

                }

            else{
        $errormsg = "You must enter in Student's current Academic Year to Register";
        }

        }

    $form = "
    <form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
      <table>
      <tr>
      <td></td>
      <td id='errormsg'>$errormsg</td>
    </tr>
      <tr>
      <td>Year:</td>
      <td>{$yearHTML}</td>
      </tr>
      <tr>
      <td>Password:</td>
      <td><input type='password' name='studentpass' value='' /></td>  
      </tr>
      <tr>
      <td>Retype Password:</td>
      <td><input type='password' name='retypepass' value='' /></td>  
      </tr>
      <tr>
      <tr>
      <td></td>
      <td><input type='submit' value='Register' name='registerbtn' /></td>
      </tr>
      </table>
      </form>";

      echo $form; 
```

在上面的代码中，我设法在提交表单后保持下拉选项保持选中状态。但我想要做的是，如果提交表单后出现成功消息：

```
if ($numrows == 1) {
$errormsg = "<span style='color: green'>Student has been Registered</span>";

 $getyear = "";

} 
```

然后我希望下拉菜单返回“请选择”选项。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:17:35.430

在为`select`. 然后你可以改变：

```
if ($validSubmission && $year == $getyear) { 
```

到：

```
if ($validSubmission && $year == $getyear && $numrows != 1) { 
```

* * *

但是，尽可能少冒犯，我认为您的代码需要一些重构。`if`我看到的第一件事是嵌套s 验证输入的大量缩进。你可能想试着把它弄平一点。您甚至可以一次显示所有可检测到的错误，以便用户可以更正所有错误*然后*重新提交，而不是修复一个、重新提交、修复另一个......

我还注意到您将大量 HTML 嵌入到字符串中。这确实是没有必要的。与其做大事，不如`$form = ...; echo $form;`简单地结束 PHP 块并在那里开始 HTML。然后当你到达：

```
" . htmlentities($_SERVER["PHP_SELF"]) . " 
```

你可以简单地使用：

```
<?php echo htmlentities($_SERVER("PHP_SELF"]); ?> 
```

然后直接回到 HTML。同样，`{$yearHTML}`您可以使用：

```
<?php echo $yearHTML; ?> 
```

但是，为什么还要在字符串中构建年份 HTML？只需在那里输出选项。

* * *

## 附录：一次显示多个错误

正如我之前提到的，您使用一堆嵌套`if`语句来管理错误。我想这行得通，但这不是一种特别好的做事方式。一个更好的方法来做的事情也恰好允许你显示多个错误是这样的：

```
// If we're dealing with multiple errors, we'll need an array to hold them.
$errors = array();

// Then we can go along down the conditions, checking each one.
// If there's an error, we can add it to the array.
if(!$getyear) {
    $errors[] = "You must provide a year.";
}

// If detecting one error requires another to have passed successfully,
// you can either add another condition or nest if statements --
// but don't nest unnecessarily.
if(!$getpass) {
    $errors[] = "You must provide a password.";
}else if(strlen($getpass) < 6) {
    $errors[] = "Your password must be at least 6 characters long.";
}else if($getpass !== $getretypepass) {
    $errors[] = "Your passwords do not match.";
}

// When you come to a point where you need everything to be valid to complete
// an operation, just check to see if you've accumulated any errors:
if(!$errors) {
    // Fetch stuff from your database or whatever...

    // Now more error checking. For example, checking for duplicate usernames.
}

// If you needed to do another operation after that error checking,
// it doesn't need to be nested into that last if statement;
// just put it in a new one down here.

// After all is said and done, you can display the errors if there were any:
if($errors): ?>
    <ul class="errors">
    <?php foreach($errors as $error): ?>
        <li><?php echo $error; ?></li>
        <?php /* don't forget to escape the errors
                 if they contain user-provided input */ ?>
    <?php endforeach; ?>
    </ul>
<?php else: ?>
    <p>Hooray! No errors!</p>
<?php endif; 
```

# ios - 如何使用 CSS 使 div 的一侧变尖？

> ID：13774061
> 
> 赞同：5
> 
> 时间：2012-12-08T03:10:28.293
> 
> 标签：ios, css

我正在尝试创建一个像这样的尖按钮：

![尖头按钮](../Images/ef7d547843e2d6363489d4ce17319b7f.png)

到目前为止，我只能做到这一点：

![圆形按钮](../Images/d36c416e2a358ecac125d93eb06c2c56.png)

我认为增加水平边界半径会使它变得尖锐，但它所做的只是使圆度更长。

**HTML**

```
<a class="button">Back</a> 
```

**CSS**

```
.button {
    display: inline-block;
    height: 3em;
    padding: 0 0.7em 0 1.4em;
    border: 0.1em solid black;
    border-radius: 3em 0.4em 0.4em 3em / 1.5em 0.4em 0.4em 1.5em;
    background: -moz-linear-gradient(
        top,
        #fff,
        #ccc
    );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:27:00.510

您不想使用`border-radius`它为每个指定的角分配一个四分之一圆形。相反，您可以使用特定属性来破解它`border-width`，如本网站所示：http: [//www.howtocreate.co.uk/tutorials/css/slopes](http://www.howtocreate.co.uk/tutorials/css/slopes)

但是我觉得您以错误的方式解决问题；你所做的最好使用背景图像，这就是 iOS 风格的后退按钮在 iPhone-for-web 样式表中的实现方式。如果您需要与分辨率无关的东西，那么您现在可以使用 SVG 而不会受到惩罚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:35:54.387

您可以使用并排包裹在锚标签中的 2 个元素来创建这样的效果。

```
<style type="text/css">
.arrow-left {
        width:0; 
        height:0; 
        border-top:30px solid transparent;
        border-bottom:30px solid transparent;
        border-right:30px solid orange; 
        float:left;
}
.button {
        float:left;
        height:60px;
        background:orange;
        width:50px;
        line-height:60px;
        font-weight:bold; 
        border-top-right-radius:8px;
        border-bottom-right-radius:8px;
}
</style>

<a href='#'><div class="arrow-left"></div><div class="button">Back</div></a> 
```

我不确定它是否是最精致的解决方案，但它肯定看起来与您的概念艺术和预期的功能相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:04:24.707

仔细考虑后，这是一个更优雅的解决方案，它允许更有效的样式和仅使用一个 HTML 元素。使用这种方法，我们可以完全实现您的概念中的结果。

**HTML**

```
<a href="#" class="button">Back</a> 
```

**CSS**

```
a.button {
    text-decoration:none;
    color:#111;
    text-shadow:0 1px 0 #fff;
    font-weight:bold;
    padding:10px 10px;
    font-size:14px;
    border-radius:0 8px 8px 0;
    -webkit-border-radius:0 8px 8px 0;
    float:left;
    margin-left:30px;
    margin-top:20px;
    position:relative;
    font-family:verdana;
    color:#3b3d3c;
    border:1px solid #666;
    border-left:0;
    background: -moz-linear-gradient( top , #eee 0%,#bbb 100%);
    background: -webkit-linear-gradient( top , #eee 0%,#bbb 100%);  
}
a.button:after {
    content:"";
     width:25px;
     height:25px;
     background: -moz-linear-gradient( left top , #eee 0%,#bbb 100%);
     background: -webkit-linear-gradient( left top , #eee 0%,#bbb 100%);
     -moz-transform: rotate(45deg);
     -webkit-transform: rotate(45deg);
     display:block;
     position:absolute;
     top:5px;
     left:-14px;
     z-index:-1;
     border:1px solid  #666;
}
@media screen and (-webkit-min-device-pixel-ratio:0) {
a.button:after{
    border-left:0;
    left:-13px;
} 
```

最后一条规则适用于 Chrome，否则其呈现的结果会略有不同。

希望这可以帮助。

# jquery - 单击父 li 中的子复选框 - 与单击 li 中的相邻文本相同

> ID：13774063
> 
> 赞同：2
> 
> 时间：2012-12-08T03:10:35.253
> 
> 标签：jquery

这一定很简单（而且可能是一个骗局），但我现在没有看到它，我一直在寻找！

我阅读（并尝试）的不仅仅是这些解决我的问题的方法：

[单击 li 以选中/取消选中复选框](https://stackoverflow.com/questions/7346115/click-a-li-to-check-uncheck-a-checkbox)

[单击一个 div 以选中/取消选中一个复选框](https://stackoverflow.com/questions/6083795/click-a-div-to-check-uncheck-a-checkbox)

...但是对于我的生活，我似乎无法在这个小提琴中获得复选框：

[http://jsfiddle.net/purushagovinda/7wZcS/8/](http://jsfiddle.net/purushagovinda/7wZcS/8/)

也不是这个受 SO 启发的衍生物：

[http://jsfiddle.net/purushagovinda/ysKLE/3/](http://jsfiddle.net/purushagovinda/ysKLE/3/)

...按照我的要求行事：

我需要单击 a 中的文本`<li>`将触发切换并突出显示/取消突出显示该文本并选中/取消选中相应的复选框。单击复选框本身的行为应该与用户单击相邻文本而不是复选框的行为完全相同。

现在发生的事情是单击复选框什么都不做。
我尝试过（在第一个小提琴中）使用这些行的排列和组合：

`if (target.is('input:checkbox')) return;`

&

```
 //e.preventDefault();
   //e.stopPropagation(); 
```

..但无济于事。

如果有人对我有任何指导，我将不胜感激。

**- -编辑： - -**

**我应该提到我需要切换功能，因为我在这些功能中做了更多的事情，只是切换`font-weight`和选中/取消选中复选框。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:27:03.140

尝试了不同的东西并想出了这个简单的解决方案：

**[jsBin 演示](http://jsbin.com/oduguh/3/edit)**

CSS：

```
#products_furniture_finishes_options span{
  padding-left:28px;
  margin-left:-28px;  /* now cover the checkbox :) */
} 
```

jQuery：

```
$("#products_furniture_finishes_options > li").click(function(){

  var isChecked = $(this).find('input').is(':checked'); // returns a BOOLEAN value

  $(this).find('span').css({fontWeight: isChecked ? '400' : '700' });
  $(this).find('input').prop('checked', !isChecked);

  if( isChecked ){

       // do WOW stuff here (if checkbox was already checked)

  }else{

       // do other COOL stuff (if checkbox was OFF)

  }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T03:33:58.860

在复选框和文本周围放置一个`label`，这将使单击文本激活复选框：

```
<label>
  <input type="checkbox" title="Mesh Back" name="products_furniture_finishes" value="13548454609475">
  <span>Mesh Back</span>
</label> 
```

在复选框的单击事件上，根据复选框的状态设置列表项的样式：

```
$("#products_furniture_finishes_options :checkbox").click(function(e) {
  var checked = $(this).is(':checked');
  var li = $(this).closest('li');
  li.css("font-weight", checked ? "700" : "400");
}); 
```

演示：http: [//jsfiddle.net/Guffa/7wZcS/9/](http://jsfiddle.net/Guffa/7wZcS/9/)

# python - 如何获得更宽的 numpy 数组打印输出？

> ID：13774064
> 
> 赞同：7
> 
> 时间：2012-12-08T03:10:35.660
> 
> 标签：python, arrays, printing, numpy

当一行中有足够的空间时，它会在 5 列之后自动换行。例如：

```
print array
==========================restart=========================================
([32235, 2323424, 2342342
3525324, 234234])
([234234, 23423, 543535,
76572, 23424]) 
```

使用 python Idle，我尝试更改初始窗口大小首选项。重新启动栏一直延伸，但不是 numpy 数组输出。

搜索后似乎也找不到答案。我病了，非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-08-18T04:19:50.017

您的问题的实际答案（不需要牺牲精度）如下：

```
 import numpy as np
 large_width = 400
 np.set_printoptions(linewidth=large_width) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T03:58:06.977

尝试使用`np.vectorize`：

```
printer = np.vectorize(lambda x:'{0:5}'.format(x,))
print printer(b).astype(object) 
```

或尝试使用`np.set_printoptions`：

完全如IDLE所示：

```
>>> import numpy as np
>>> x=np.random.random(10)
>>> x
array([ 0.72239823,  0.69938461,  0.85466846,  0.03294278,  0.06698482,
        0.04137562,  0.4223521 ,  0.81317235,  0.62221494,  0.6205595 ])
>>> np.set_printoptions(precision=3)
>>> print(x)
[ 0.722  0.699  0.855  0.033  0.067  0.041  0.422  0.813  0.622  0.621] 
```

# ruby - 在 ruby 窗口上运行 unix 命令

> ID：13774066
> 
> 赞同：-1
> 
> 时间：2012-12-08T03:10:51.227
> 
> 标签：ruby, shell, cygwin

我有一个由 Unix 命令编写的 shell 脚本，现在我想在 Ruby 命令提示符窗口上运行这个脚本文件 (*.sh)。有人请指导我解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:36:29.997

使用反引号或`%x{...}`语法来执行外部程序：

```
output = %x{./tests.sh} 
```

见[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60)

# android - 实例化失败：NullPointer 异常

> ID：13774070
> 
> 赞同：0
> 
> 时间：2012-12-08T03:12:05.937
> 
> 标签：android, nullpointerexception, android-holo-everywhere

好吧，在经历了许多其他问题之后，我终于将其归结为当我尝试打开应用程序时不断发生的这个错误。我已经尝试过 NullPointerExceptions 的其他解决方案，但它们似乎不起作用。

**这是一个 LogCat：**

```
 12-08 03:03:40.222: E/AndroidRuntime(1974): FATAL EXCEPTION: main
12-08 03:03:40.222: E/AndroidRuntime(1974): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.zekfed.minecraft.pro/com.zekfed.minecraft.pro.Main}: java.lang.NullPointerException
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.os.Looper.loop(Looper.java:137)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at java.lang.reflect.Method.invoke(Method.java:511)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at dalvik.system.NativeStart.main(Native Method)
12-08 03:03:40.222: E/AndroidRuntime(1974): Caused by: java.lang.NullPointerException
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.Activity.initActionBar(Activity.java:1861)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.Activity.getActionBar(Activity.java:1848)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at com.zekfed.minecraft.pro.Main.<init>(Main.java:48)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at java.lang.Class.newInstanceImpl(Native Method)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at java.lang.Class.newInstance(Class.java:1319)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
12-08 03:03:40.222: E/AndroidRuntime(1974):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
12-08 03:03:40.222: E/AndroidRuntime(1974):     ... 11 more
12-08 03:04:37.692: W/Trace(2024): Unexpected value from nativeGetEnabledTags: 0
12-08 03:04:37.692: W/Trace(2024): Unexpected value from nativeGetEnabledTags: 0
12-08 03:04:37.692: W/Trace(2024): Unexpected value from nativeGetEnabledTags: 0
12-08 03:04:37.742: W/Trace(2024): Unexpected value from nativeGetEnabledTags: 0
12-08 03:04:37.742: W/Trace(2024): Unexpected value from nativeGetEnabledTags: 0
12-08 03:04:37.762: D/AndroidRuntime(2024): Shutting down VM
12-08 03:04:37.762: W/dalvikvm(2024): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-08 03:04:37.772: E/AndroidRuntime(2024): FATAL EXCEPTION: main
12-08 03:04:37.772: E/AndroidRuntime(2024): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.zekfed.minecraft.pro/com.zekfed.minecraft.pro.Main}: java.lang.NullPointerException
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.os.Looper.loop(Looper.java:137)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at java.lang.reflect.Method.invoke(Method.java:511)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at dalvik.system.NativeStart.main(Native Method)
12-08 03:04:37.772: E/AndroidRuntime(2024): Caused by: java.lang.NullPointerException
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.Activity.initActionBar(Activity.java:1861)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.Activity.getActionBar(Activity.java:1848)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at com.zekfed.minecraft.pro.Main.<init>(Main.java:48)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at java.lang.Class.newInstanceImpl(Native Method)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at java.lang.Class.newInstance(Class.java:1319)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
12-08 03:04:37.772: E/AndroidRuntime(2024):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
12-08 03:04:37.772: E/AndroidRuntime(2024):     ... 11 more 
```

**这是我的 Main.class：**

```
///////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                               //
//                Zeklandian Minecraft Guide : Pro Version                                       //
//                                                                                               //
//                             Created by Asher Wood                                             //
//                             and Khuram Shazad                                                 //
//                                                                                               //
//                             ??2012 Asher Wood and Khuram Shazad                                //
//                                                                                               //
//                             Layout Handler / Main Class                                       //
//                                                                                               //
///////////////////////////////////////////////////////////////////////////////////////////////////

package com.zekfed.minecraft.pro;

import android.app.ActionBar;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.View;
import android.view.ViewGroup;

public class Main extends FragmentActivity {

    // Create ViewPager, Make sliding screens
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            mSectionsPagerAdapter = new SectionsPagerAdapter(
                    getSupportFragmentManager());
            mViewPager = (ViewPager) findViewById(R.id.pager);
            mViewPager.setAdapter(mSectionsPagerAdapter);
        }

    private static final String ARG_SECTION_NUMBER = null;
    SectionsPagerAdapter mSectionsPagerAdapter;
    static ViewPager mViewPager;

    // ActionBar: Make ActionBar and Buttons
    ActionBar actionbar = getActionBar();

    // Make Menu
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

    // Create Fragments

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = new SectionFragment();
            Bundle args = new Bundle();
            args.putInt(SectionFragment.ARG_SECTION_NUMBER, i);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 5;
        }

        // Create titles

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return getString("Blocks").toUpperCase();
            case 1:
                return getString("Items").toUpperCase();
            case 2:
                return getString("Tools & Armour").toUpperCase();
            case 3:
                return getString("Mobs").toUpperCase();
            case 4:
                return getString("Structures").toUpperCase();

            }
            return null;
        }

        private String getString(String string) {
            // TODO Auto-generated method stub
            return null;
        }

    }

    // Create pages

    public static class SectionFragment extends Fragment {
        public SectionFragment() {
        }

        public static final String ARG_SECTION_NUMBER = null;

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            LayoutInflater inflater1 = (LayoutInflater) mViewPager.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            Bundle args = new Bundle();
            int resId = (Integer) getArguments().get(ARG_SECTION_NUMBER);
            switch (resId) {

            case 0:
                resId = R.layout.blocks;
                break;
            case 1:
                resId = R.layout.toolsarmour;
                break;
            case 2:
                resId = R.layout.items;
                break;
            case 3:
                resId = R.layout.mobs;
                break;
            case 4:
                resId = R.layout.structures;
                break;

            }

            View view = inflater1.inflate(resId, null);

            return view;
        }

    }

    private Bundle getArguments() {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:40:06.260

您确定第 48 行是此代码的适当位置吗？

```
ActionBar actionbar = getActionBar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:25:24.187

您在哪个 Android 平台版本上运行此代码？

您的`uses-sdk`清单标签设置为什么？它指定了`android:minSdkVersion`什么？`android:targetSdkVersion`? 此活动使用什么主题？

您在执行`getActionBar`之前`onCreate`调用它作为初始化程序。这可能不会做你想要的。`onCreate`您应该在调用`super.onCreate`and之后分配此字段`setContentView`。

您已经`ViewPager`使用 name 声明了一个静态字段`mViewPager`。除了不正确的 Android 样式（静态字段以`s`, 而不是`m`, 开头）之外，这个范围几乎肯定不是您想要的，因为静态字段对于您的进程来说是全局的，您可能希望将其范围限定为您的 Activity 实例。

# python - 使用 try 语句从嵌套的 for 循环写入文件

> ID：13774071
> 
> 赞同：2
> 
> 时间：2012-12-08T03:12:09.183
> 
> 标签：python, for-loop, iterator

我正在寻找某种方法来使这个嵌套的 for 循环更加 Pythonic。具体来说，如果字典中存在数据，我如何遍历三个变量的唯一组合，并写入文件？

```
foo,bar = {},{} #filling of dicts not shown
with open(someFile,'w') as aFile:
    for year in years:
        for state in states:
            for county in counties:
                try:foo[year,state,county],bar[state,county]
                except:continue
                aFile.write("content"+"\n") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T03:17:36.617

您可以只遍历键，`foo`然后检查是否`bar`有相应的键：

```
for year, state, county in foo:
    if (state, county) in bar:
        aFile.write(...) 
```

通过这种方式，您可以避免迭代任何至少不适用于`foo`.

这样做的缺点是您不知道密钥将按什么顺序进行迭代。如果您需要按排序顺序排列它们，您可以这样做`for year, state, county in sorted(foo)`。

正如@Blckknght 在评论中指出的那样，此方法也将始终为每个匹配键写入。如果您想排除某些年份/州/县，您可以将其添加到`if`语句中（例如，`if (state, county) in bar and year > 1990`排除 1990 年之前的年份，即使它们已经在字典中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T03:28:26.723

已经提出了使用`itertools.product`来生成您将用作键的值的建议。我想在您正在执行的“更容易请求宽恕而不是许可”样式异常处理中添加一些改进：

```
import itertools

with open(some_file, "w"):
    for year, state, county in itertools.product(years, states, counties):
        try:
            something_from_foo = foo[(year, state, county)]
            something_from_bar = bar[(state, count)]

            # include the write in the try block
            aFile.write(something_from_foo + something_from_bar)

        except KeyError: # catch only a specific exception, not all types
            pass 
```

# .net - Windows Server 2008 上的 .NET 4.0 安装失败

> ID：13774075
> 
> 赞同：0
> 
> 时间：2012-12-08T03:13:13.117
> 
> 标签：.net, .net-4.0, windows-server-2008, .net-4.5

我需要部署一个需要 .net 4.5 的 asp net mvc 应用程序我正在尝试安装 .NET 4.0，但在过程结束时出现致命错误：

这是日志：

```
OS Version = 6.0.6001, Platform 2, Service Pack 1
OS Description = Win2K8 - x86 Datacenter Edition Service Pack 1
CommandLine = H:\3b4bd74090bffcb407705182\\Setup.exe /x86 /x64 /ia64 /web
TimeZone = E. South America Daylight Time
Initial LCID = 1046
Using Simultaneous Download and Install mechanism
Operation: Installing
Package Name = Microsoft .NET Framework 4 Setup
Package Version = 4.0.30319
User Experience Data Collection Policy: Disabled
Number of applicable items: 11
Exe (H:\3b4bd74090bffcb407705182\SetupUtility.exe) succeeded.
Exe Log File: dd_SetupUtility.txt
ServiceControl operation succeeded!
Exe (C:\Users\ADMINI~1\AppData\Local\Temp\1\Microsoft .NET Framework 4 Setup_4.0.30319\Windows6.0-KB956250-v6001-x86.msu) failed with 0x1 - Incorrect function. .
Exe (H:\3b4bd74090bffcb407705182\SetupUtility.exe) succeeded.
Exe Log File: dd_SetupUtility.txt
MSI (C:\Users\ADMINI~1\AppData\Local\Temp\1\Microsoft .NET Framework 4 Setup_4.0.30319\netfx_Core_x86.msi) Installation succeeded. Msi Log: Microsoft .NET Framework 4 Setup_20121209_003156019-MSI_netfx_Core_x86.msi.txt
MSI (C:\Users\ADMINI~1\AppData\Local\Temp\1\Microsoft .NET Framework 4 Setup_4.0.30319\netfx_Extended_x86.msi) Installation succeeded. Msi Log: Microsoft .NET Framework 4 Setup_20121209_003156019-MSI_netfx_Extended_x86.msi.txt
Exe (H:\3b4bd74090bffcb407705182\SetupUtility.exe) failed with 0x80070643 - Fatal error during installation. .
Final Result: Installation failed with error code: (0x80070643), "Fatal error during installation. " (Elapsed time: 0 00:34:55). 
```

在 windows server 2008 上安装 .net 4 是否有任何限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:40:02.587

要安装 .NET 4.5，您应该使用独立安装程序，

[http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx](http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx)

如果您确实想要 .NET 4.5，那么对 .NET 4 安装错误进行故障排除是没有意义的。

# java - 如果在java中输入错误，如何使程序重新启动

> ID：13774082
> 
> 赞同：1
> 
> 时间：2012-12-08T03:14:09.540
> 
> 标签：java

在java中，如果用户输入错误的输入，你如何让程序在你问他们的问题上重新启动，例如在我发布在下面的代码中，我得到了问题选择0-9之间的数字我如何让它重新启动如果用户输入了错误的输入，例如 10 或更高或字符串，则该问题。我将不胜感激任何提示或建议。

```
import java.util.Scanner;

public class Project2 {

    public static void main(String[] args) {
        String PlayAgain = "Y";

        while (PlayAgain.equals("Y")) {
            // Generate a secret Numbers
            int number1 = (int) (Math.random() * 10);
            int number2 = (int) (Math.random() * 10);
            int number3 = (int) (Math.random() * 10);
            int arr[] = new int[3];
            arr[0] = number1;
            arr[1] = number2;
            arr[2] = number3;

            boolean g1;
            boolean g2;
            boolean g3;

            g1 = false;
            g2 = false;
            g3 = false;

            // Show secret numbers
            System.out.println(arr[0] + ", " + arr[1] + ", " + arr[2]);

            Scanner input = new Scanner(System.in);

            // Prompt the user to enter a guess

            System.out.print("Enter your lottery pick (0-9): ");
            int guess1 = input.nextInt();

            if (guess1 > 9) {
                System.out
                        .println("Wrong input enter only 1 number between 0-9: ");
            } else {

            }

            System.out.print("Enter your lottery pick (0-9): ");
            int guess2 = input.nextInt();

            if (guess2 > 9) {
                System.out
                        .println("Wrong input enter only 1 number between 0-9: ");
            } else {

            }

            System.out.print("Enter your lottery pick (0-9): ");
            int guess3 = input.nextInt();

            if (guess3 > 9) {
                System.out
                        .println("Wrong input enter only 1 number between 0-9: ");
            } else {
                continue;

            }

            // Show secret numbers and your numbers
            System.out.println("The Secret Numbers are " + arr[0] + (", ")
                    + arr[1] + (", ") + arr[2]);
            System.out.println("Your Numbers are " + guess1 + (", ") + guess2
                    + (", ") + guess3);

            if (guess1 == arr[0] && guess2 == arr[1] && guess3 == arr[2]) {
                System.out
                        .println("Three Matching in Exact order, You Won $100,000 ");
            } else if ((

            (guess1 == arr[1] || guess1 == arr[2])
                    && (guess2 == arr[0] || guess2 == arr[2]) && (guess3 == arr[0] || guess3 == arr[1]))

                    ||

                    ((guess1 == arr[0])
                            && (guess2 == arr[1] || guess2 == arr[2]) && (guess3 == arr[1] || guess3 == arr[2]))

                    ||

                    ((guess2 == arr[1])
                            && (guess3 == arr[0] || guess3 == arr[1]) && (guess1 == arr[0] || guess1 == arr[2]))

                    ||

                    ((guess3 == arr[2])
                            && (guess2 == arr[0] || guess2 == arr[2]) && (guess1 == arr[1] || guess1 == arr[0])))

            {
                System.out
                        .println("Three Matching in Different order, You Won $10,000 ");
            } else if (

            ((guess1 == arr[0] || guess1 == arr[1] || guess1 == arr[2]) && (guess2 == arr[0]
                    || guess2 == arr[1] || guess2 == arr[2]))
                    && (guess3 != arr[0] || guess3 != arr[1] || guess3 != arr[2])

                    ||

                    ((guess1 == arr[0] || guess1 == arr[1] || guess1 == arr[2]) && (guess3 == arr[0]
                            || guess3 == arr[1] || guess3 == arr[2]))
                    && (guess2 != arr[0] || guess2 != arr[1] || guess2 != arr[2])

                    ||

                    ((guess2 == arr[0] || guess2 == arr[1] || guess2 == arr[2]) && (guess3 == arr[0]
                            || guess3 == arr[1] || guess3 == arr[2]))
                    && (guess1 != arr[0] || guess1 != arr[1] || guess1 != arr[2])

            ) {
                System.out.println("Any Two Numbers Matching, You Win $1,000 ");
            } else if ((guess1 == arr[0] || guess1 == arr[1] || guess1 == arr[2])
                    && (guess2 != arr[0] || guess2 != arr[1] || guess2 != arr[2])
                    && (guess3 != arr[0] || guess3 != arr[1] || guess3 != arr[2])

                    ||

                    (guess2 == arr[0] || guess2 == arr[1] || guess2 == arr[2])
                    && (guess1 != arr[0] || guess1 != arr[1] || guess1 != arr[2])
                    && (guess3 != arr[0] || guess3 != arr[1] || guess3 != arr[2])

                    ||

                    (guess3 == arr[0] || guess3 == arr[1] || guess3 == arr[2])
                    && (guess1 != arr[0] || guess1 != arr[1] || guess1 != arr[2])
                    && (guess2 != arr[0] || guess2 != arr[1] || guess2 != arr[2])

            )// close if
            {
                System.out.println("Any One Number Matching, You Win $10 ");
            } else {
                System.out.println("You Lose Sorry ");
            }

            System.out.println("Would you like to play again? Y/N ");
            PlayAgain = input.next();
            PlayAgain = PlayAgain.toUpperCase();

        }// end of while loop
    } // end of main

} // end of class 
```

对不起，如果代码很难阅读，我是这个东西的初学者，我在发布之前确实使用了 ctrl + shift + f 来格式化代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:22:54.373

最好将一些逻辑分解成单独的方法来处理代码重用。但是，为了使其与您显示的内容保持一致并使示例易于阅读，您可以在输入数字的地方执行以下操作：

```
 boolean isValid = false;
        while (!isValid) {
            System.out.print("Enter your lottery pick (0-9): ");

            int guess1 = -1;
            try {
                guess1 = input.nextInt();
            } catch (Exception e) {
                // Read any pending input which would be invalid characters at this point
                input.next();
            }

            if (guess1 > 9 || guess1 < 0) {
                System.out.println("Wrong input enter only 1 number between 0-9: ");
            } else {
                isValid = true;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:24:05.733

您的代码“不优雅”。尝试使用这样的模式：

伪java代码：

```
while (true) {
    // get input
    if (input is "exit")
        break;
    if (input is bad)
        continue;
    // process input
} 
```

# jquery - 仅当输入未聚焦时 keydown

> ID：13774087
> 
> 赞同：9
> 
> 时间：2012-12-08T03:14:45.730
> 
> 标签：jquery, keydown

目前，我已经设置了一个功能，可以在使用此页面中按左右箭头键时前进和后退：

```
$(document).keydown(function (e) {
    if ($(e.target).is('input')) { return false
    } else if (e.keyCode == 37) {
        $(".pageback").click();
        return false;
    }
    if (e.keyCode == 39) {
        $(".pagenext").click();
        return false;
    }
}); 
```

这允许使用箭头键来回浏览，但是当遇到文本框时，箭头键仍然处于活动状态。

虽然这会在文本框处于焦点时停止 keydown 功能，但它也不允许在输入区域中输入任何内容。

帮助！

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T03:20:56.197

> *“它也不允许在输入区域输入任何内容。”*

问题是这部分：

```
if ($(e.target).is('input')) { return false 
```

当您`false`从事件处理程序返回时，它会阻止事件的默认行为。

将其更改为`return true`或仅更改为`return`（没有值）并且默认行为（在这种情况下，在该字段中键入）将被允许。

（注意：您可能还想检查 textarea 元素，而不仅仅是输入。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-03T00:38:52.563

我的方法是检查目标是否`document.body`开启`keydown`，然后等待`keyup`。

```
document.addEventListener('keydown', function(keyEvent) {
  if (keyEvent.key != 'ArrowLeft' || keyEvent.shiftKey || keyEvent.ctrlKey || keyEvent.altKey || keyEvent.metaKey) {
    return
  }
  if (keyEvent.target != document.body) {
    return
  }

  keyEvent.preventDefault()

  // myButton.classList.add('active') // visual feedback a button has been triggered

  document.addEventListener('keyup', function(keyEvent) {
    keyEvent.preventDefault()

    // do your stuff
  })
}) 
```

# php - 按 cakephp 模型字段排序

> ID：13774089
> 
> 赞同：0
> 
> 时间：2012-12-08T03:15:01.800
> 
> 标签：php, cakephp, cakephp-1.3

假设我在 CakePHP 应用程序中有 3 个模型，它们具有以下关联：

```
Model1
===========
var $hasMany = array(
    'Model2' => array(
        'className' => 'Model2',
        'foreignKey' => 'model1_id',
        'dependent' => false
    )
);

Model2
===========
var $belongsTo = array(
    'Model1' => array(
        'className' => 'Model1',
        'foreignKey' => 'model1_id'
    )
);

var $hasMany = array(
    'Model3' => array(
        'className' => 'Model3',
        'foreignKey' => 'model2_id',
        'dependent' => false
    )
);

Model3
===========
var $belongsTo = array(
    'Model2' => array(
        'className' => 'Model2',
        'foreignKey' => 'model2_id'
    )
); 
```

如何在按first、then和 finally列（完全按照该顺序）对结果进行排序时进行`find('all')`查询。`Model3``created``Model1``Model2``Model3`

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:14:50.900

您需要使用 JOIN 而不是普通的“包含”或“递归”。

请参阅[在 CakePHP 中连接表](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。

# c++ - c++数组，如何在同一个数组中添加新的一行值？

> ID：13774091
> 
> 赞同：1
> 
> 时间：2012-12-08T03:15:17.663
> 
> 标签：c++, arrays

如何根据用户输入或 cin 在数组中创建新的一行值？

假设数组中已经有一行值，您需要添加第二行值但未添加到第一行，以及如何将大括号和逗号放入，用户是否放入或有什么这将自动将括号和逗号放入

```
int test [] = { 1, 21, 771, 410, 120711 },
{ 1, 2, 3, 4, 5 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:17:48.693

如果没有非常糟糕和肮脏的技巧，这是不可能的。最好使用列表或向量（最接近数组）。另一种可能性是使用指针并对其进行扩展，创建一个临时内存，复制旧数据，然后添加新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:20:20.200

你要求一个二维数组。这是这样声明的：

```
int test[][5] = {
    {1, 21, 771, 410, 120711},
    {1, 2, 3, 4, 5 },
    // Add more if you want.
}; 
```

第一个数组通过 访问`test[0]`，第二个通过`test[1]`等等。第一个数组的第一个元素是`test[0][0]`，第二个`test[0][1]`等等。

请注意，这是一个具有静态大小的数组。您无法在运行时更改它。如果您事先知道需要多少行，只需将其声明为：

```
int test[NUMBER OF ROWS][NUMBER OF COLUMNS]; 
```

然后稍后用值填充它。但是你不能改变大小。如果你想要一个完全动态的数组，那么你应该使用一个向量向量：

```
std::vector< std::vector<int> > test; 
```

然后，您添加行：

```
test.push_back(std::vector<int>()); 
```

并向每一行添加元素：

```
// Adds a number to the first row.
test[0].push_back(some_int); 
```

访问的方式与使用静态数组（`test[0]`,`test[0][0]`等）的方式相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:23:54.123

无法在保留其内容的同时更改数组的大小。改变数组大小的唯一方法是使用`new`运算符为指针分配动态内存，但这会破坏数组先前保存的任何数据。如果您想拥有一个可调整大小的数组，您可能应该使用`std::vector.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T03:24:22.707

如果您热衷于使用 c++11，您可以使用 std::vector 保留初始化列表，如下所示：

```
#include <vector>

int main()
{
  // initialise
  std::vector<std::vector<int>> test = { { 1, 21, 771, 410, 120711 },
                                         { 1, 2, 3, 4, 5 } };

  // add new data from user
  test.push_back({9, 8, 7, 6, 5, 4, 3, 2, 1});
} 
```

# javascript - 图像预加载 javascript

> ID：13774092
> 
> 赞同：0
> 
> 时间：2012-12-08T03:15:29.460
> 
> 标签：javascript, html, preload

我的目标是在加载实际图像时预加载图像，但我不太明白。这样做的整个目标是我有一个显示图像的幻灯片，但有时加载速度很慢......哈哈。这是我的 HTML：

```
<div id="slideshow">
    <img src="../images/slideshow/spacer.gif" width="100" height="100" id="myPicture" alt="some image">
</div> 
```

这是我已经拥有的javascript：

```
window.onload = choosePic;

function choosePic() {
    var myPix = new Array("../images/slideshow/sempiternal.png", "../images/slideshow/cross.png", "../images/slideshow/pentagram.png");
    var randomNum = Math.floor((Math.random() * myPix.length));
    document.getElementById("myPicture").src = myPix[randomNum];
} 
```

和CSS：

```
#slideshow {
    height: 100px;
    width: 100px;
    position: fixed;
    bottom: 20px;
    right: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:34:12.223

似乎您的函数不会预加载任何内容。除了选择正常加载的随机图像外，数组中的其他图像根本不会被调用。

您可能想查看[JavaScript Preloading Images](https://stackoverflow.com/questions/3646036/javascript-preloading-images)和[Function to preload images？](https://stackoverflow.com/questions/5235059/javascript-function-to-preload-images)反而。

# ruby - 如何将哈希数组与ruby中的数组相加

> ID：13774094
> 
> 赞同：0
> 
> 时间：2012-12-08T03:15:54.250
> 
> 标签：ruby

有没有更简单的方法来做到这一点？

我在这里尝试做的只是将`item`每个内部的哈希添加`list`到`myarray`

```
myarray = []
list = [{list: [{item: 'item1'},{item: 'item2'}]}, {list: [{item: 'item3'},{item: 'item4'}]}, {list: [{item: 'item5'},{item: 'item6'}]}]

list.each do |list| 
  myarray = myarray + list
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:30:45.910

这：

```
((list.map {|x| x[:list]}).flatten).map{|x| x[:item] if x != nil} 
```

产生这个：

```
["item1", "item2", "item3", "item4", nil] 
```

（零是因为你的最后一个元素是

```
{item: [{item: 'item5'},{item: 'item6'}]} 
```

我假设您的意思是 list: 就像其他人一样。

# sql - 在三列多对多表中的至少两个 col 3 中显示具有相同 col 2 的 col 1 的名称

> ID：13774095
> 
> 赞同：1
> 
> 时间：2012-12-08T03:16:22.443
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个关于 SQL Server 查询的问题。

这些表可以描述如下：

*   **供应商**( `SID, sName, status, sCity`), PK = SID

*   **零件**( `PID, pName, color, weight, pCity`)，PK = PID

*   **项目**( `JID, jName, city`), PK = JID

*   **SPJ** ( `SID, PID, JID, quantity`), PK = (SID, PID, JID), FK = SID, PID, JID

我正在尝试为至少两个项目的同一部分的供应商获取供应商编号和名称，这是我对该任务的查询：

```
SELECT 
    s1.SID, s1.sName, COUNT(*)
FROM 
    Suppliers s1, Parts p, SPJ s2
WHERE 
    s1.SID = s2.SID 
    AND p.PID = s2.PID 
GROUP BY 
    s1.SID, s1.sName
HAVING 
    COUNT(*)>1
ORDER BY 
    s1.SID, s1.sName 
```

请帮我更正这个查询。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:25:47.240

这正是您所要求的：

```
SELECT
   S.SupplierID,
   S.sName
FROM
   dbo.Suppliers S
WHERE
   EXISTS (
      SELECT *
      FROM dbo.SPJ SPJ
      WHERE S.SupplierID = SPJ.SupplierID
      GROUP BY SPJ.PartID
      HAVING Count(*) >= 2
   ); 
```

[请参阅我的 SQLFiddle](http://sqlfiddle.com/#!3/6dc98/5)以在真实数据集上进行尝试。请注意，还有一个查询显示参与使供应商符合条件的所有单独行（请参见`Qualifies`列）。这是安装脚本的预览：

```
CREATE TABLE dbo.Suppliers (
   SupplierID smallint identity(1,1) NOT NULL CONSTRAINT PK_Suppliers PRIMARY KEY CLUSTERED,
   sName varchar(40) NOT NULL CONSTRAINT UQ_Suppliers_sName UNIQUE
);

CREATE TABLE dbo.Parts (
   PartID int identity(1,1) NOT NULL CONSTRAINT PK_Parts PRIMARY KEY CLUSTERED,
   pName varchar(100) NOT NULL CONSTRAINT UQ_Parts_pName UNIQUE
);

CREATE TABLE dbo.Projects (
   ProjectID int identity(1,1) NOT NULL CONSTRAINT PK_Projects PRIMARY KEY CLUSTERED,
   jName varchar(50) NOT NULL CONSTRAINT UQ_Projects_jName UNIQUE
);

CREATE TABLE dbo.SPJ (
   SupplierID smallint NOT NULL CONSTRAINT FK_SPJ_Suppliers FOREIGN KEY REFERENCES dbo.Suppliers (SupplierID),
   PartID int NOT NULL CONSTRAINT FK_SPJ_Parts FOREIGN KEY REFERENCES dbo.Parts (PartID),
   ProjectID int NOT NULL CONSTRAINT FK_SPJ_Projects FOREIGN KEY REFERENCES dbo.Projects (ProjectID),
   CONSTRAINT PK_SPJ PRIMARY KEY CLUSTERED (SupplierID, PartID, ProjectID)
);

INSERT dbo.Suppliers
VALUES
   ('Joe'' Specialty Goods'),
   ('Major Supplier'),
   ('Small Supplier'),
   ('Tamandua Manufacturing, Ltd.'),
   ('Things ''n'' Stuff'),
   ('Stuff ''n'' Things');

INSERT dbo.Parts
VALUES
   ('Watchamacallit'),
   ('Thingamajiggy'),
   ('Thingamabob'),
   ('Doohickey'),
   ('Whatsisname'),
   ('Thingy'),
   ('Gizmo'),
   ('Gadget'),
   ('Widget'),
   ('Titanium Widget'),
   ('Electronic Thingamabob'),
   ('One-Product Patrick');

INSERT dbo.Projects
VALUES
   ('Video Game Manufacturing'),
   ('Autodoc Research'),
   ('Consumer Electronics Expansion'),
   ('Space Shuttle'),
   ('Tablet Project Cobalt');

INSERT dbo.SPJ
VALUES
   (1, 2, 1),
   (1, 3, 1),
   (1, 7, 1),
   (1, 11, 1),
   (2, 1, 1),
   (2, 1, 2),
   (2, 1, 3),
   (2, 1, 4),
   (2, 2, 1),
   (2, 2, 2),
   (2, 2, 3),
   (2, 2, 4),
   (2, 2, 5),
   (2, 10, 1),
   (2, 10, 2),
   (2, 10, 3),
   (2, 10, 4),
   (2, 10, 5),
   (3, 5, 4),
   (4, 4, 2),
   (4, 4, 3),
   (5, 9, 1),
   (5, 8, 2),
   (5, 7, 3),
   (5, 6, 4),
   (5, 5, 5),
   (6, 1, 1),
   (6, 2, 1),
   (6, 3, 1),
   (6, 4, 1),
   (6, 5, 1),
   (6, 6, 1),
   (6, 7, 1),
   (6, 8, 1),
   (6, 9, 1),
   (6, 10, 1),
   (6, 11, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:27:43.713

你也可以这样做：

```
SELECT DISTINCT
a.SupplierID,
b.sName
FROM
(
  SELECT
   SupplierID,
   PartID,
   NumProjects = count(DISTINCT ProjectID)
  FROM SPJ
  GROUP BY
   SupplierID, PartID
  HAVING 
   count(DISTINCT ProjectID) >= 2 
) a
INNER JOIN Suppliers b ON a.SupplierID = b.SupplierID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:21:15.783

```
SELECT SID, PID, COUNT(JID)
FROM SPJ
GROUP BY SID, PID
HAVING COUNT(JID) > 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-08T05:12:07.243

```
SELECT Supplier.SID,Supplier.sName
FROM SPJ inner join Supplier on SPJ.SID = Supplier.SID
inner join Parts on SPJ.PID = Parts.PID
GROUP BY Supplier.SID,Supplier.sName
HAVING COUNT(JID) > 1 
```

# php - 使用 preg_match 或 preg_match_all 获取具有预定义结构的数组

> ID：13774097
> 
> 赞同：1
> 
> 时间：2012-12-08T03:16:33.717
> 
> 标签：php, arrays, preg-match, preg-match-all

这是一个示例字符串：

**“来自 12 人的 60 条评论，20% 的用户”** （我们称之为 $v）

我一直在使用 preg_match_all 来获取包含所有数字的数组

```
$pattern = '!\d+!';
preg_match_all($pattern, $v, $matches, PREG_SET_ORDER); 
```

我得到的结果是：

```
Array
(
    [0] => Array
        (
            [0] => 60
        )
    [1] => Array
        (
            [0] => 12
        )
    [2] => Array
        (
            [0] => 20
        )
) 
```

但是尽管尝试了一段时间，我还是没有得到我想要的。**我想要的是这样的：**

```
Array
(
    [0] => 60
    [1] => 12
    [2] => 20
) 
```

也许我应该使用 preg_match 代替？但是使用 preg_match 我只能得到一个值......或者也许还有一个循环？它看起来像一个丑陋的黑客......应该有一个专业的出路......提前感谢PHP专家！;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:20:09.217

[这是你想要的吗？，array_values($array)](http://us3.php.net/manual/en/function.array-values.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:36:41.847

假设格式始终保持不变，您可以执行以下操作：

```
<?php

    // Input string/line
    $v = "60 reviews from 12 people, 20% of users";

    // Match regex (0-9; min 1 or max unlimited numbers)
    preg_match_all("/[0-9]{1,}/", $v, $matches);

    // Remove/sub key
    $matches = $matches[0];

    // Echo out
    print_r($matches);

?> 
```

这将输出：

```
 Array ( 
       [0] => 60     // < Access using $matches[0]
       [1] => 12     // < Access using $matches[1]
       [2] => 20     // < Access using $matches[2]
 ) 
```

# javascript - 这个 JS 正则表达式中空格的意义？

> ID：13774107
> 
> 赞同：3
> 
> 时间：2012-12-08T03:18:44.490
> 
> 标签：javascript, regex

我今天一直在学习一些 Javascript 正则表达式，但我无法理解以下代码的工作原理。

```
var toswop = 'last first\nlast first\nlast first';
var swapped = text.replace(/([\w]+)\b([\w ]+)/g,'$2 $1');
alert(swapped); 
```

它正确地提醒换入正确顺序的单词，但是下面的代码（注意第二个 \w 之后缺少的空格）不起作用。它只是按原始顺序打印它们。

```
var toswop = 'last first\nlast first\nlast first';
var swapped = text.replace(/([\w]+)\b([\w]+)/g,'$2 $1');
alert(swapped); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:22:19.863

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)：

> ### `\w`
> 
> 匹配任何字母数字字符，包括下划线。相当于`[A-Za-z0-9_]`。
> 
> 例如，`/\w/`匹配`'a'`in 和`"apple,"` `'5'`in`"$5.28,"``'3'``"3D."`

添加空格时，会将字符集从字母数字和下划线更改为字母数字和下划线和空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:26:06.843

我认为您错误地使用`'\b'`与空格匹配，但在 JavaScript 正则表达式`'\b'`中匹配单词的开头或结尾。

因此这`/([\w]+)\b/`部分正则表达式只匹配到 word 的结尾`'last'`。剩下的字符串是`' first'`（注意开头的空格）。

然后与您需要的余数相匹配`([\w ]+)`，这将转换为**“一个或多个出现的任何单词字符或空格字符”**。这正是我们需要与剩余字符串匹配的内容`' first'`。

*您可以注意到，即使交换了单词，单词之前也有一个空格`'first'`。*

为了进一步证明这一点：假设您将输入更改为：

```
var toswop = 'last first another\nlast first another\nlast first another'; 
```

你可以看到你交换的文本变成了

```
 first another last
 first another last
 first another last 
```

这是因为正则表达式的最后一段`([\w ]+)`一直与空格和单词字符匹配，并将单词“另一个”包含在匹配中。

但是，如果您从方括号中删除空格，那么它将与其余部分不匹配`' first'`，因为它不是 'word character' 的**字符串，**而是**'space' + string of 'word character'**。

这就是为什么你的空间在这里很重要。

但是如果你像这样改变你的正则表达式：

```
swapped = toswop.replace(/([\w]+)\s([\w]+)/g,'$2 $1'); 
```

然后它在没有空格的情况下工作，因为`\s`中间与两个单词中间的空格匹配。

希望这能澄清你的问题。

请参阅此处了解 JavaScript RegEx 语法：[http ://www.w3schools.com/jsref/jsref_regexp_begin.asp](http://www.w3schools.com/jsref/jsref_regexp_begin.asp)

如果您想进行更多实验，请参阅我的小提琴：http: [//jsfiddle.net/BuddhiP/P5Jqm/](http://jsfiddle.net/BuddhiP/P5Jqm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T08:54:59.350

它通过这样的表达。它将查找所有单词字符，直到找到非单词字符。这抓住了第一个词。

然后它查找下一个匹配项，即空格或单词字符。因此，如果没有方括号中的空格，则名称中的空格不匹配。这就是为什么没有空间的替​​代方案失败的原因。

我认为最好把这个明确地写进去，而不是 \b。

# javascript - 当用户滚动到页面底部时如何启动 jQuery 事件？

> ID：13774110
> 
> 赞同：0
> 
> 时间：2012-12-08T03:19:06.177
> 
> 标签：javascript, jquery, html, css, dom

我正在尝试获取警报以显示用户是否在页面底部的 100 像素内滚动。我让 /friends 加载到 div class = social，但我在滚动部分遇到问题。关于我可以解决的问题有什么建议吗？

```
<!--Load friends module -->
<script>
  $(document).ready(function (){
    $('.social').load("/friends");
  });
</script>
<!--Load more videos if scroll within 100 pixels of bottom -->
<script type="text/javascript">
  counter = 2;
  $(document).ready(function (){
    function loadMore() {
      console.log("More loaded");
      alert("test");
      $('.more_videos').load("/more_videos/"+counter);
      $(window).bind('scroll', bindScroll);
    }
    function bindScroll(){
      if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
        $(window).unbind('scroll');
        loadMore();
      }
    }
    $(window).scroll(bindScroll);​
  });
  counter = counter+1;
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:19:55.687

此行后面有一个看不见的字符

```
$(window).scroll(bindScroll); 
```

你可以[在这里](http://codepen.io/joe/pen/LEdqj)看到它。就是第 20 行末尾的小红点

# jquery - jQuery：在 li 中获取超链接的类

> ID：13774115
> 
> 赞同：0
> 
> 时间：2012-12-08T03:20:17.600
> 
> 标签：jquery, html

我想弄清楚 LI 中的链接是否有一个类。我该怎么做呢？这是我到目前为止一直在尝试的：

（试图隐藏特定的li）

```
<a class="filtergallery" id="p" href="#">Portraits</a> <a class="filtergallery" id="n" href="#">Newborn</a> <a class="filtergallery" id="pe" href="#">Pets</a> 
```

```
<ul class="portfolio-wrap">

<li><a class="p" href="#" title="First Pic"><img src="#" alt="First Pic" /></a></li>
<li><a class="pe" href="#" title="Second Pic"><img src="#" alt="Second Pic" /></a></li>
<li><a class="n" href="#" title="Third Pic"><img src="#" alt="Third Pic" /></a></li>
<li><a class="pe" href="#" title="Fourth Pic"><img src="#" alt="Fourth Pic" /></a></li> 
```

jQuery：

```
 $('.filtergallery').click(function(event){

        var theid = $(this).attr('id');
        $('.portfolio-wrap li').each(function(){

            if (!hasClass(theid)) { // I need to see if the hyperlink inside the LI has this class...?
                hide();
            }

        });

    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:29:46.880

您需要在选择器中实际选择锚标记。看看这个小提琴。此外，您拥有的代码不会基于点击取消隐藏链接（它仅在点击时隐藏，而不是在点击另一个链接时取消隐藏 - 如果这是要求的话）。您可能希望创建一个显示所有链接的函数，并在单击时调用它，然后隐藏适用的链接。

[http://jsfiddle.net/UV7nS/](http://jsfiddle.net/UV7nS/)

```
<a class="filtergallery" id="p" href="#">Portraits</a> <a class="filtergallery" id="n" href="#">Newborn</a> <a class="filtergallery" id="pe" href="#">Pets</a>

<ul class="portfolio-wrap">

<li><a class="p" href="#" title="First Pic"><img src="#" alt="First Pic" /></a></li>
<li><a class="pe" href="#" title="Second Pic"><img src="#" alt="Second Pic" /></a></li>
<li><a class="n" href="#" title="Third Pic"><img src="#" alt="Third Pic" /></a></li>
<li><a class="pe" href="#" title="Fourth Pic"><img src="#" alt="Fourth Pic" /></a></li> 
```

​</p>

```
$('.filtergallery').click(function(event){

        var theid = $(this).attr('id');
        $('.portfolio-wrap li a').each(function(){

            if (!$(this).hasClass(theid)) { // I need to see if the hyperlink inside the LI has this class...?
                $(this).hide();
            }

        });

    })​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:33:12.337

```
$('.filtergallery').click(function(event){
  $('.portfolio-wrap li:not(:has(a.'+$(this).attr('id')+'))').hide();
} 
```

[http://jsfiddle.net/T6GLr/](http://jsfiddle.net/T6GLr/)

<3 一个衬垫 :)

* * *

编辑：对不起，你想隐藏那些没有它的人。编辑了代码。

# java - 访问 Google Talk 聊天记录

> ID：13774117
> 
> 赞同：17
> 
> 时间：2012-12-08T03:20:41.487
> 
> 标签：java, android, xmpp, google-talk

我正在寻找一种访问[Google Talk](http://www.google.com/talk/about.html)聊天记录的方法。用于 android 设备的方法，但不必特定于它。我正在寻找最好的官方方法，但这不是必需的。AFAIK没有官方方法。该方法必须具体不，

1.  通过 IMAP（需要启用聊天和标签）
2.  通过Talk.apk的ContentResolver（需要安装talk.apk）

除非它以某种方式绕过上述方法之后列出的问题。

谷歌不同的谷歌谈话应用程序能够做聊天记录，但我没有文档知道它是如何工作的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T21:45:43.607

[Google Apps 脚本](https://developers.google.com/apps-script/)有一个[getChatThreads()](https://developers.google.com/apps-script/class_gmailapp#getChatThreads) API 调用。

您将面临任何这些方法的问题。我认为最好的（坏的）解决方案是使用 IMAP 并包括使聊天标签能够通过 IMAP 访问的步骤。[OAuth 2.0 Gmail IMAP 身份验证](https://developers.google.com/google-apps/gmail/xoauth2_protocol)的一个好处是它不依赖于用户在 GMail 中打开 IMAP，无论用户的 IMAP 设置如何，它都能正常工作。

# php - 如何使用 php 和 mysql 在数据库中存储 html 元素（包括标签）？

> ID：13774119
> 
> 赞同：0
> 
> 时间：2012-12-08T03:21:06.550
> 
> 标签：php, mysql, html

我有一个带有一些文本的“div”标签和一个带有标题的“p”标签，我想存储这些元素及其内容，包括数据库中属于用户的标签。

使用 PHP 和 MySQL 存储“div”及其内容和“p”及其标题的最佳方法是什么？

这与如何将用户的评论与他们的标题一起存储非常相似。

例子：

HTML

```
<p name="myTitle">This is my title</p>

<div name="myContent">
    This is a paragraph This is a paragraph 
    This is a paragraph This is a paragraph
</div> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T04:03:49.187

第 1 步，连接到数据库并告诉它我们正在使用什么字符集。

```
try {
    $db = new PDO('mysql:host=HOSTNAME', 'USERNAME', 'PASSWORD', array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
    ));
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
} 
```

第 2 步，插入表中。

```
$sql = 'INSERT INTO table_name(p_column, div_column) VALUES(:p, :div)';
try {
    $sh = $db->prepare($sql);
    $sh->execute(array(
        ':p' => $VARIABLE_CONTAINING_P,
        ':div' => $VARIABLE_CONTAINING_DIV,
    ));
} catch (PDOException $e) {
    echo 'Insert failed: ' . $e->getMessage();
} 
```

现在您知道如何将值插入数据库。你会注意到这里没有任何东西被明确地逃脱。有两个原因：

1.  通过在执行时[创建准备好的语句](http://php.net/pdo.prepare)和[绑定参数](http://php.net/pdostatement.execute)，我们*自动*防止 HTML 中的恶意软件创建[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。
2.  您正在存储 HTML。没有理由对您在此处存储的 HTML 进行编码或以其他方式破坏。它是 HTML。它的目的是显示为 HTML，那么为什么要销毁它呢？但是，这并不意味着它是*安全*的HTML。如果是用户输入的 HTML，则可能是恶意的。您应该使用 HTML 过滤器，例如[HTML Purifier ，](http://htmlpurifier.org/)*只*允许您明确想要的内容。

希望这个曲折而过分的答案将接近成为您模糊和未指定问题的解决方案。如果您可以提供更多关于您正在尝试完成的任务的详细信息（请参阅：[XY 问题](https://meta.stackexchange.com/q/66377/135887)），那么我可以为您提供更多*有用*的详细信息。

# java - 网络爬行时的病毒/恶意软件危险

> ID：13774122
> 
> 赞同：-1
> 
> 时间：2012-12-08T03:21:25.073
> 
> 标签：java, jsoup, data-mining, malware, web-mining

我最近使用 Java 和 JSoup (http://jsoup.org/) HTML 解析器编写了一个自定义网络爬虫/蜘蛛。网络爬虫非常初级——它使用 Jsoup 的[connect](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#connect%28java.lang.String%29)和[get](http://jsoup.org/apidocs/org/jsoup/Connection.html#get%28%29)方法来获取页面的来源，然后使用其他 JSoup 方法来解析内容。它会随机跟踪它找到的几乎所有链接，但它不会尝试下载文件或执行脚本。

爬虫从一长串基本上随机的网页中挑选种子页面，其中一些可能包含成人内容和/或恶意代码。最近，当我运行爬虫时，我的防病毒软件 (Avast) 将其中一个请求标记为“检测到威胁”。有问题的 URL 看起来是恶意的。

我的问题是，我的计算机会通过我的网络爬虫感染病毒或任何类型的恶意软件吗？我应该采取任何预防措施或检查吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T09:39:27.450

理论上是可以的。

但是，由于您不执行 Flash 和类似插件，而只处理文本数据，因此您的 HTML 解析器很可能没有已知漏洞。

此外，所有的病毒和恶意网站都以*大*用户群为目标。使用 JSoup 的用户很少。例如，大多数人都在使用 Internet Exploder。这就是病毒针对这些平台的原因。这些天来，Mac OSX 变得越来越有吸引力。我刚刚读到一个新的恶意软件，当他们访问一个网站时，它只会通过一些旧的 Java 安全问题感染 Mac OSX 用户。它是在达赖喇嘛相关网站上找到的，所以可能是中文的。

如果您真的很偏执，请在您的系统上设置一个“nobody”用户，这是您严格限制的。这在 Linux 上效果最好。特别是使用 SELinux，您可以将网络爬虫的权限缩小到可以阻止它访问任何内容的程度，除了加载外部网站并将结果发送到数据库。然后，攻击者只能使您的爬虫崩溃，或者可能滥用它进行 DDoS 攻击，但不会破坏或接管您的系统。

# java - RSA加密问题java

> ID：13774127
> 
> 赞同：1
> 
> 时间：2012-12-08T03:22:27.533
> 
> 标签：java, rsa

我正在进行加密聊天，我几乎拥有它，但发送信息时出现问题......不断添加2个字符，我不知道为什么......当我尝试删除两个不存在的字符时给我一个“必须以 0 开头”的错误...

如果有人可以帮助我，那就太好了...目前只有服务器加密数据，客户端解密（节省时间）...请举例说明:)

这是**chatServer.java**

```
 import java.awt.*;
import java.math.BigInteger;
import java.net.*;
import java.security.InvalidKeyException;
import java.security.KeyFactory;
import java.security.NoSuchAlgorithmException;
import java.security.PublicKey;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.RSAPublicKeySpec;
import java.awt.*;          
import java.awt.event.*;    

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.swing.*;       
import javax.swing.event.*;
import java.io.*;

public class chatServer extends SwingChatGUI
{
    PrintWriter out;
    BufferedReader in;
    BufferedReader stdin;
    String inputLine, outputLine;
    public ButtonHandler bHandler = new ButtonHandler();
    int stage = 1;
    private static BigInteger l;
    private static BigInteger m;
    PublicKey pubKey;

    public chatServer (String title)
    {
        super (title);
        bHandler = new ButtonHandler ();
        sendButton.addActionListener (bHandler);
    }

    private class ButtonHandler implements ActionListener
    {
        public void actionPerformed (ActionEvent event)
        {
            outputLine = txArea.getText ();
            System.out.println ("Server > " + outputLine);
            encrypt();
            out.println (outputLine);
        }
    }

    public void run () throws IOException
    {
        ServerSocket serverSocket = null;

        try
        {
            serverSocket = new ServerSocket (4444);
        }
        catch (IOException e)
        {
            System.err.println ("Could not listen on port: 4444.");
            System.exit (1);
        }

        Socket clientSocket = null;
        try
        {
            clientSocket = serverSocket.accept ();
        }
        catch (IOException e)
        {
            System.err.println ("Accept failed.");
            System.exit(1);
        }

        out = new PrintWriter (clientSocket.getOutputStream (), true);
        in = new BufferedReader (new InputStreamReader (clientSocket.getInputStream ()));
        //stdin = new BufferedReader (new InputStreamReader (System.in));

        out.println ("Welcome to the Chat Server\n");

        while ((inputLine = in.readLine ()) != null)
        {
            System.out.println ("Server < " + inputLine);
            rxArea.setText (inputLine);

            if (stage == 1)
            {
                String[] parts = inputLine.split("!e! ", 2);
                String string1 = parts[0];
                String string2 = parts[1];

                String j = string1.replace("!m! ", "");

                m = new BigInteger(j);
                l = new BigInteger(string2);

                RSAPublicKeySpec keySpec = new RSAPublicKeySpec(m, l);
                KeyFactory fact;
                try {
                    fact = KeyFactory.getInstance("RSA");
                     pubKey = fact.generatePublic(keySpec);
                } catch (NoSuchAlgorithmException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (InvalidKeySpecException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
               stage++;
            }

        }

        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    }

    public void encrypt() {

        byte[] src = outputLine.getBytes();
         Cipher cipher;
        try {
            cipher = Cipher.getInstance("RSA");
              cipher.init(Cipher.ENCRYPT_MODE, pubKey);
              byte[] cipherData = cipher.doFinal(src);
              outputLine = new String(cipherData);
              int count = outputLine.length();
              System.out.println("bytes: " + count);
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchPaddingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvalidKeyException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalBlockSizeException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (BadPaddingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public static void main(String[] args) //throws IOException
    {

        chatServer f = new chatServer ("Chat Server Program");

        f.pack ();
        f.show ();
        try
        {
            f.run ();
        }
        catch (IOException e)
        {
            System.err.println("Couldn't get I/O for the connection to: to host.");
            System.exit(1);
        }

    }
} 
```

> 这是**chatClient.java**

```
import java.awt.*;
import java.awt.event.*;    

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.swing.*;       
import javax.swing.event.*;
import java.io.*;
import java.net.*;
import java.security.InvalidKeyException;
import java.security.KeyFactory;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.RSAPublicKeySpec;

public class chatClient extends SwingChatGUI
{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    static Socket socket = null;
    static PrintWriter out = null;
    static BufferedReader in = null;
    public ButtonHandler bHandler;
    static PublicKey publicKey;
    static PrivateKey privateKey;
    String fromServer;
    int stage = 0;

    public chatClient (String title)
    {
        super (title);
        bHandler = new ButtonHandler();
        sendButton.addActionListener( bHandler );
    }

    private class ButtonHandler implements ActionListener
    {
        public void actionPerformed (ActionEvent event)
        {
            String outputLine;
            outputLine = txArea.getText ();
            System.out.println ("Client > " + outputLine);
            out.println (outputLine);
        }
    }

    public void decrypt() {

         Cipher cipher1;
        try {

            //fromServer = fromServer.substring(0, fromServer.length() - 2);
            int count = fromServer.length();
            System.out.println("the length is " +count);
            byte[] src = fromServer.getBytes();
            cipher1 = Cipher.getInstance("RSA");
              cipher1.init(Cipher.DECRYPT_MODE, privateKey);
              byte[] cipherData1 = cipher1.doFinal(src);
              System.out.println("encrypted?" + new String(cipherData1));

        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchPaddingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvalidKeyException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalBlockSizeException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (BadPaddingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void run () throws IOException
    {
        try
        {
            socket = new Socket ("localhost", 4444);
            out = new PrintWriter (socket.getOutputStream (), true);
            in = new BufferedReader (new InputStreamReader (socket.getInputStream ()));
        }
        catch (UnknownHostException e)
        {
            System.err.println ("Don't know about host: to host.");
            System.exit(1);
        }
        catch (IOException e)
        {
            System.err.println ("Couldn't get I/O for the connection to: to host.");
            System.exit (1);
        }

        kp();
        CharArrayWriter os = new CharArrayWriter();
        char[] buf = new char[4096];
        int read;
        while ((read=in.read(buf, 0, 4096)) > 0) {
          System.out.println("x");
                 os.write(buf, 0, read);
          fromServer = os.toString();

            if (stage > 2)
            {
                decrypt();
            }
            stage++;
            System.out.println ("Client <  " + fromServer);
            rxArea.setText (fromServer);
            os.reset();
            if (fromServer.equals ("Bye.")) break;
        }

        out.close();
        in.close();
        socket.close();
    }

    public static void main(String[] args) 
    {

        chatClient f = new chatClient ("Chat Client Program");

        f.pack ();
        f.show ();
        try
        {
            f.run ();
        }
        catch (IOException e)
        {
            System.err.println("Couldn't get I/O for the connection to: to host.");
            System.exit(1);
        }
    }

    public static void kp() {

        KeyPairGenerator kpg;

            try {
                kpg = KeyPairGenerator.getInstance("RSA");
                kpg.initialize(2048);
                KeyPair kp = kpg.genKeyPair();
                publicKey = kp.getPublic();
                privateKey = kp.getPrivate();
                KeyFactory fact = KeyFactory.getInstance("RSA");
                RSAPublicKeySpec pub;

                    pub = fact.getKeySpec(kp.getPublic(),
                          RSAPublicKeySpec.class);
                    out.println("!m! " + pub.getModulus() + "!e! " + pub.getPublicExponent());
                } catch (InvalidKeySpecException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();

            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }

} 
```

> 这是 GUI ... **SwingChatGUI.java**

```
 import java.awt.*;          
import java.awt.event.*;    
import javax.swing.*;       
import javax.swing.event.*;

@SuppressWarnings("unused")
public class SwingChatGUI extends JFrame
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public JButton sendButton; 

    public static JTextArea txArea;

    public static JTextArea rxArea;

    public Container container;

    public JPanel n1, s1;

    public SwingChatGUI (String title)
    {
        super (title);

        container = getContentPane();             
        container.setLayout( new FlowLayout() );

        txArea = new JTextArea (6, 40);

        rxArea = new JTextArea (6, 40);

        sendButton = new JButton ("Send");

        container.add (rxArea);
        container.add (txArea);
        container.add (sendButton);

    }

    public static void main (String[] args)
    {
        Frame f = new SwingChatGUI ("Chat Program");
        f.pack ();
        f.setVisible(true);
    }
} 
```

# objective-c - 仅在 NSString 更改时运行

> ID：13774138
> 
> 赞同：1
> 
> 时间：2012-12-08T03:24:00.473
> 
> 标签：objective-c, nsstring

这是我正在尝试做的事情：

```
- (void) fullDMXReceived:(NSString*)finalData {

if (finalData changed since the last time fullDMXReceived ran) {
  //DO SOMETHING
}

} 
```

每 50 毫秒，就会有一个新值进入。有时它与上一个值相同 - 在这种情况下，我不希望发生 //dosomething。仅当 NSString finalData 更改时。

我知道这可能是一个简单的答案，我一直在搞乱它，但无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T03:29:01.280

将最后一个字符串保存在变量中，检查新值与旧值，如果两者相等则跳过操作。

当值不同时，运行操作，并更新先前的值以匹配新的值：

```
NSString *lastValue = nil; // <<== Make this an instance variable
...
if (![finalData isEqualToString:lastValue]) {
    lastValue = finalData;
    // Run the operation
    ...
} 
```

# gcc - 我想要 __builtin_popcountll 的两个实现

> ID：13774145
> 
> 赞同：5
> 
> 时间：2012-12-08T03:26:02.880
> 
> 标签：gcc, compiler-construction, bit-manipulation, clang, instructions

我有一些代码我想运行快速的内置 CPU 指令`popcnt`（当`__builtin_popcountll`使用适当的标志编译时，例如 with `g++ -mpopcnt`or `clang++ -march=corei7`，会发生这种情况），但也能够在`cpuid`显示 CPU 不支持时回退到代码硬件指令。

当然，要获得我相信编译器人员已经正确实现的后备代码（所以我不必引入 C 或 asm 代码来做我的 popcount），我需要一个单独的编译单元，它在编译时没有`-mpopcnt`or`-march=corei7`标志。

将单独编译的代码链接在一起是唯一的方法吗？是否没有编译器内在函数或其他类型的提示或其他我不知道的内置函数可以用来让它生成后备 popcount 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T06:07:36.640

我不确定，但是在 popcnt 指令和回退实现之间进行选择所需的代码的成本可能比简单地一直使用非 popcnt 实现对性能的影响更大。

要切换另一个实现（在 popcnt 的站点进行切换），您至少需要以下内容：

*   加载并检查 cpuid 位 (CPUID.01H:ECX.POPCNT[Bit 23])
*   分支以选择 popcnt 或替代实现
*   可能保存/恢复替代实现所需的寄存器
*   如果替代实现基于 SSE 或 AVX，则可能将数据移动到 SIMD 寄存器

我怀疑成本会阻止您描述的内在函数的有效实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-20T17:15:21.823

gcc 有一个专门用于此的称为“多版本化”的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T13:23:28.043

您可以直接调用“回退代码”。我相信标准库可以访问它：

```
int __popcountsi2 (int a)
int __popcountdi2 (long a)
int __popcountti2 (long long a) 
```

# python - PYlab 不适用于我的 Enthought python

> ID：13774146
> 
> 赞同：-2
> 
> 时间：2012-12-08T03:26:32.160
> 
> 标签：python, matplotlib

我的 PYlab 显示以下错误：

PYlab ipython 模块已停止工作。

即使是一个简单的情节`plot({1,2,3,4],[1,3,5,7])`也行不通。（对不起，我想添加图像或错误，但 stackoverflow 阻止了我这样做。）实际的问题是 pylab 的 iPython shell 正在启动，但我的字面意思是任何情节都不起作用。

甚至没有显示一个简单的情节。我正在使用带有python版本的Enthought python shell：2.7并使用windows xp sp2 32位作为我的操作系统。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:53:14.447

你有一个错误`plot({1,2,3,4],[1,3,5,7])`应该是`plot([1,2,3,4],[1,3,5,7])`。您还导入了 pylab 还是（matplotlib 和 numpy）？

你的代码应该是这样的：

```
 import pylab as pl
 pl.plot([1,2,3,4],[1,3,5,7]) 
```

# php - SplSubject/SplObserver 有什么用？

> ID：13774149
> 
> 赞同：20
> 
> 时间：2012-12-08T03:26:40.187
> 
> 标签：php, observer-pattern, spl

[标准 PHP 库](http://php.net/manual/en/book.spl.php)通过[`SplSubject`](http://php.net/manual/en/class.splsubject.php)和类包括一些资源称为观察者模式的参考实现的东西[`SplObserver`](http://php.net/manual/en/class.splobserver.php)。对于我的一生，我无法弄清楚这些是如何非常有用的，因为无法将实际事件或任何其他信息与通知一起传递：

```
class MySubject implements SplSubject {
    protected $_observers = [];

    public function attach(SplObserver $observer) {
        $id = spl_object_hash($observer);
        $this->_observers[$id] = $observer;
    }

    public function detach(SplObserver $observer) {
        $id = spl_object_hash($observer);

        if (isset($this->_observers[$id])) {
            unset($this->_observers[$id]);
        }
    }

    public function notify() {
        foreach ($this->_observers as $observer) {
            $observer->update($this);
        }
    }
}

class MyObserver implements SplObserver {
    public function update(SplSubject $subject) {
        // something happened with $subject, but what
        // was it???
    }
}

$subject = new MySubject();
$observer = new MyObserver();

$subject->attach($observer);
$subject->notify(); 
```

似乎这些接口对于任何现实世界的问题都毫无用处。有人可以启发我吗？

* * *

**编辑：**

这是我在界面上最大的问题（尽管还有其他问题）：

```
public function update(SplSubject $subject, Event $event) { /* ... */ } 
```

...网络出现以下致命错误：

```
PHP Fatal error:  Declaration of MyObserver::update() must be compatible with SplObserver::update(SplSubject $SplSubject) 
```

**编辑#2：**

通过为它们提供默认值来使附加参数成为可选参数可以防止致命错误并提供一种传递上下文的方法，从而使实现变得有价值。我以前没有意识到这一点，所以这几乎回答了我的问题。解决方案是传递您自己的事件/消息数据，并检查其在`SplObserver::update()`.

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-12T12:11:46.850

`It seems like these interfaces are pretty much useless for any real world problem. Can someone enlighten me?`

**界面**

虽然抽象类允许您提供一些实现措施，但接口是纯模板。一个`interface`只能`define functionality`；它永远无法实现它。使用 interface 关键字声明接口。它可以包含属性和方法声明，但不能包含方法体。

**接口用例**

例如如果你想你的项目应该支持不同的数据库。以便您将来可以更改数据库，最好使用在类文件中包含属性过程的接口而不更改对象

`By itself, interfaces are not very useful`因为您不能创建接口的实例，但接口有助于实施面向对象的设计方法`which in real sense makes your live easier as a programmer`，因为面向对象编程的首要动机是封装*（您不关心功能是如何实现的。作为程序员，您只暴露于界面。这也是系统架构后观察的好方法）*

**SplSubject & SplObserver**

正交性是一种美德，程序员的目标之一应该是构建可以更改或移动的组件，而对其他组件的影响最小。

如果您对一个组件所做的每一次更改都需要在代码库的其他地方进行一系列更改，那么开发任务很快就会变成一个螺旋式的错误创建和消除。

[SplSubject](http://php.net/manual/en/class.splsubject.php)和[SplObserver](http://php.net/manual/en/class.splobserver.php)没有特殊功能，因为它们都是`interface to implement the Observer Design Pattern.`

[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)

观察者模式是一种软件设计模式，其中一个称为主体的对象维护其依赖项列表，称为观察者，并自动通知他们任何状态更改，通常通过调用他们的方法之一。主要用于实现分布式事件处理系统

*   观察者模式定义了一个主题对象和任意数量的观察者对象之间的一对多依赖关系，这样当主题对象改变状态时，它的所有观察者对象都会自动得到通知和更新。
*   观察者模式本质上允许无限数量的对象通过注册自己来观察或监听被观察对象（或主题）中的事件。观察者注册到事件后，主体将在事件触发时通知他们。
*   主体通过存储观察者集合并在事件发生时迭代它以通知每个观察者来处理此问题。
*   观察者模式将观察者注册到一个主题。
*   您可能有多个观察者。主体必须保留已注册观察者的列表，并且当事件发生时，它会触发（提供通知）所有已注册的观察者。
*   当我们不需要任何观察者时，也可以取消注册。

**示例 1\. 贷款利率通知系统**

```
$loan = new Loan("Mortage", "Citi Bank", 20.5);
$loan->attach(new Online());
$loan->attach(new SMS());
$loan->attach(new Email());

echo "<pre>";
$loan->setIntrest(17.5); 
```

输出

```
Online    : Post online about modified Intrest rate of : 17.50
Send SMS  : Send SMS to premium subscribers : 17.50
Send Email: Notify mailing list : 17.50 
```

**示例 2\. 简单的用户注册监视器**

```
$users = new Users();

new Audit($users);
new Logger($users);
new Security($users);

$users->addUser("John");
$users->addUser("Smith");
$users->addUser("Admin"); 
```

输出

```
Audit    : Notify Audit about John
Log      : User John Create at Wed, 12 Dec 12 12:36:46 +0100
Audit    : Notify Audit about Smith
Log      : User Smith Create at Wed, 12 Dec 12 12:36:46 +0100
Audit    : Notify Audit about Admin
Log      : User Admin Create at Wed, 12 Dec 12 12:36:46 +0100
Security : Alert trying to create Admin 
```

**观察者设计模式的优点：** 主要优点是称为观察者和可观察对象之间的松散耦合。主体只知道观察者的列表，并不关心他们是如何实现的。所有观察者都由主体在单个事件调用中作为广播通信通知

**观察者设计模式的缺点：**

*   缺点是有时如果出现任何问题，调试会变得非常困难，因为控制流隐含在观察者和可观察者之间，我们可以预测现在观察者将要触发，如果观察者之间存在链，那么调试会变得更加复杂。
*   另一个问题是处理大型观察者时的内存管理

**普通类**

```
abstract class Observable implements SplSubject {
    protected $_observers = [];

    public function attach(SplObserver $observer) {
        $id = spl_object_hash($observer);
        $this->_observers[$id] = $observer;
    }

    public function detach(SplObserver $observer) {
        $id = spl_object_hash($observer);

        if (isset($this->_observers[$id])) {
            unset($this->_observers[$id]);
        }
    }

    public function notify() {
        foreach ( $this->_observers as $observer ) {
            $observer->update($this);
        }
    }
}

abstract class Observer implements SplObserver {
    private $observer;

    function __construct(SplSubject $observer) {
        $this->observer = $observer;
        $this->observer->attach($this);
    }
} 
```

**加载示例类**

```
class Loan extends Observable {
    private $bank;
    private $intrest;
    private $name;

    function __construct($name, $bank, $intrest) {
        $this->name = $name;
        $this->bank = $bank;
        $this->intrest = $intrest;
    }

    function setIntrest($intrest) {
        $this->intrest = $intrest;
        $this->notify();
    }

    function getIntrest() {
        return $this->intrest;
    }
}

class Online implements SplObserver {

    public function update(SplSubject $loan) {
        printf("Online    : Post online about modified Intrest rate of : %0.2f\n",$loan->getIntrest());
    }
}

class SMS implements SplObserver {

    public function update(SplSubject $loan) {
        printf("Send SMS  : Send SMS to premium subscribers : %0.2f\n",$loan->getIntrest());
    }
}

class Email implements SplObserver {

    public function update(SplSubject $loan) {
        printf("Send Email: Notify mailing list : %0.2f\n",$loan->getIntrest());
    }
} 
```

**用户注册示例类**

```
class Users extends Observable {
    private $name;

    function addUser($name) {
        $this->name = $name;
        $this->notify();
    }

    function getName() {
        return $this->name;
    }
}
class Audit extends Observer {

    public function update(SplSubject $subject) {
        printf("Audit    : Notify Autify about %s\n", $subject->getName());
    }
}
class Logger extends Observer {

    public function update(SplSubject $subject) {
        printf("Log      : User %s Create at %s\n", $subject->getName(),date(DATE_RFC822));
    }
}
class Security extends Observer {
    public function update(SplSubject $subject) {
        if($subject->getName() == "Admin")
        {
            printf("Security : Alert trying to create Admin\n");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-16T16:55:30.253

### 这很简单：主题/观察者模式对事件系统没有用处。

观察者模式不适合说“这个东西是由 X 更新的”。相反，它只是说它已更新。我实际上创建[了一个灵活的中介类](https://github.com/morrisonlevi/Ardent/blob/f70a061a5f5d1999c13af8cdbc057c41c84cd1f3/src/HashingMediator.php)，可以用于事件系统。根据您的需要，更严格的 API 可能会有所帮助，但您可以以此为灵感。

### 那么主题/观察者模式什么时候有用呢？

这是更新 GUI 时相当常见的模式，因为某些对象发生了变化。它并不需要知道是什么改变了它或为什么改变了它，只需要它需要更新。HTTP 的本质并不适合这种特定模式，因为您的 PHP 代码没有直接绑定到 HTML。你必须提出一个新的请求来更新它。

简而言之，主题/观察者模式在 PHP 中并没有那么有用。此外，该界面并不是很有用，因为您必须使用它`instanceof`来获取正确的主题类型。我只是编写自己的界面而不处理它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-11T22:38:45.273

这两个接口没有附加任何神奇的功能，所以实现它们什么都不做。它们实际上仅用于参考目的。还有其他类似的 PHP 内部接口，例如[`SeekableIterator`](http://php.net/manual/en/class.seekableiterator.php). 该方法没有附加任何神奇功能`seek`，您必须自己实现它。

有一些 PHP 内部接口，例如具有`Traversable`特殊功能的接口，但情况并非如此，`SplSubject`并且`SplObserver`- 它本质上只是一个建议的接口，用于实现观察者模式。

至于发生了*什么*，该信息不是接口的一部分，因为它不是抽象的。由你来实施。

```
interface Event extends SplSubject {
   public function getEventData();
}

class MyEvent implements Event {
   //MySubject implementation above
   public function getEventData() {
      return "this kind of event happened";
   }
} 
```

您也可以`Event`完全忽略该接口，或者仅使用`instanceof`检查（丑陋）来查看将哪种“主题”传递给该方法。

至于一个真实世界的例子，[这个链接](http://devzone.zend.com/1732/implementing-the-observer-pattern-with-splobserver-and-splsubject/)提供了一个，虽然`SplObserver`/的使用`SplSubject`不是绝对必要的；毕竟它们只是接口。本质上，您可以有`ExceptionHandler`主题类和一些观察者，例如，`Mailer`. 您可以使用`set_exception_handler(array($handler, 'notify'));`任何抛出的异常通知所有观察者（例如`Mailer`，发送有关捕获的异常的电子邮件——您必须从其他方法/成员获取异常`ExceptionHandler`）。

**编辑：**我从评论中看到您计划使用另一个参数来`update`将事件作为单独的对象传递。我想这没问题，但我的建议是不要将主题和事件概念分开，让主题能够包含事件数据或成为事件数据本身。您必须检查您收到的事件对象是否为空。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-12T05:25:27.173

您可以使用可选参数实现更新方法，并且仍然满足 SplSubject 接口。

```
class MyObserver implements SplObserver {
    public function update(SplSubject $subject, $eventData = null) {
        if (is_null($eventData))
            // carefull
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T02:01:56.830

与任何接口一样，在您实现它之前它都是无用的。通过实现这些，您可以拥有事件驱动的应用程序

想象一下，您有一个事件“applicationStart”，您需要在其上运行 10 个函数。

```
function applicationStart() {
   // Some other logic 
   fnCall1();
   fnCall2();
   fnCall3();
   fnCall4();
   fnCall5();
   fnCall6();
   fnCall7();
   fnCall8();
   fnCall9();
   fnCall10();
   // Some other logic 
} 
```

现在假设你需要测试这个函数，你会触发对所有其他 10 个函数的依赖。

如果您使用 SplSubject/SplObserver：

```
function applicationStart() {
    // Logic
    $Subject->notify();
    // Logic
} 
```

现在，当您测试它时，您只需要确保触发事件。不执行其他功能。

Plus 代码看起来更干净，因为您不会使用不属于那里的业务逻辑来污染它。还有一个添加触发器的好地方

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-17T15:38:11.610

看看[https://github.com/thephpleague/event](https://github.com/thephpleague/event)它做得很好。我认为这是今天最好的包。我也没有看到任何价值

```
public function notify(/* without args */) { 
```

通过联赛/赛事，您将获得以下关注。例如，我有电子邮件列表，并希望在将新电子邮件添加到列表时处理事件。

```
class EmailList
{
    const EVENT_ADD_SUBSCRIBER = 'email_list.add_subscriber';
    public function __construct($name, $subscribers = [])
    {
        // do your stuff 
        $this->emitter = new Emitter(); 
    }

    /**
     * Adds event listeners to this list
     * @param $event
     * @param $listener
     */
     public function addListener($event, $listener)
     {
         $this->emitter->addListener($event, $listener);
     } 

    /**
     * Adds subscriber to the list
     * @param Subscriber $subscriber
     */
    public function addSubscriber(Subscriber $subscriber)
    {
        // do your stuff 
        $this->emitter->emit(static::EVENT_ADD_SUBSCRIBER, $subscriber);
    }
}

// then in your code
$emailList = new EmailList();
$emailList->addListener(EmailList::EVENT_ADD_SUBSCRIBER, function($eventName, $subscriber) {
}); 
```

# javascript - 在 ExtJs 中，如何在 TextArea 的插入符号位置插入固定字符串？

> ID：13774153
> 
> 赞同：3
> 
> 时间：2012-12-08T03:27:27.130
> 
> 标签：javascript, extjs, textarea

这个问题可能在其他框架中被问到，不确定 ExtJs 上是否有一个，我是新手。我想知道是否有一个带有 TextArea 和一个按钮的简单示例。当按钮被按下时，一个固定的字符串“？？？” 插入到 TextArea 中的光标处。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T03:43:55.017

实际上，您可以直接从 DOM 执行此操作，使用 textareas selectionStart 属性来查找插入符号的位置。

所以你可以做一些类似的事情

```
textArea.value = textArea.value.substring(0, selectionStart)+'???'+textArea.value.substring(selectionStart); 
```

这是一个[jsfiddle](http://jsfiddle.net/8LXnA/1/)，它使用 Ext.get 和 Ext.getDom 的组合来选择和修改元素。

# javascript - 在网页上检查是否安装了特定的 Chrome 扩展程序

> ID：13774157
> 
> 赞同：1
> 
> 时间：2012-12-08T03:28:14.023
> 
> 标签：javascript, api, google-chrome, google-chrome-extension

> **可能重复：**
> [检查用户是否安装了我的 chrome 扩展](https://stackoverflow.com/questions/6293498/check-whether-user-has-my-chrome-extension-installed)

一点背景。我正在创建一个 Chrome 扩展程序来与公司的 Intranet 站点之间的数据进行交互，以打开和登录社交媒体站点。仅当我已验证该扩展名确实存在于该浏览器中时，我才想使用 Javascript 在页面上编写按钮。否则按钮是无用的。让我知道你是否找到了一种干净的方法来做到这一点！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:14:29.327

从您的扩展程序中使用 JavaScript 在页面上编写按钮。

在下面找到你可以的方式。

清单.json

```
{

  "name": "Example",

  "description": "Description",

  "version": "0.6",

  "permissions": ["tabs", "http://mysite.com/*"],

  "background": {

    "scripts": ["background.js"]

  },

  "manifest_version": 2

} 
```

背景.js

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
  var HOST_NAME = 'mysite.com';
  if(changeInfo.status === "complete")
  if(tab.url.search(HOST_NAME) !== -1) {
    var execute_script_param = { "file": "excecute_js.js",
                                 "runAt": "document_start"
                               }
    chrome.tabs.executeScript(tabId, execute_script_param, function() {
      console.log('added extension identity in dom');
      // if you want to do here, go ahead
    })
  }
}); 
```

执行_js

```
(function(obj_document) {
  // do here what ever you want
  // write buttons on a page with Javascript
})(window.document) 
```

# c# - 如何在c#中将复杂的geo-json转换为wkt？

> ID：13774158
> 
> 赞同：10
> 
> 时间：2012-12-08T03:28:24.400
> 
> 标签：c#, json, gis, wkt

geo-json 格式有复杂的 GeometryCollection。它包含点和多边形。是否有任何众所周知的 .net 库可以帮助将其转换为 Wkt 格式？

`{"geometries":[{"coordinates":[-76.92864,38.84465],"type":"Point"},{"coordinates":[-76.93066,38.84352],"type":"Point"},{"coordinates":[-76.93685,38.85339],"type":"Point"},{"coordinates":[-76.93865,38.8546],"type":"Point"},{"coordinates":[-76.94017,38.85542],"type":"Point"},{"coordinates":[-77.0517,38.85779],"type":"Point"},{"coordinates":[-77.05555,38.87055],"type":"Point"},{"coordinates":[-77.05556,38.87064],"type":"Point"},{"coordinates":[-77.05558,38.8705],"type":"Point"},{"coordinates":[-77.05558,38.8705],"type":"Point"},{"coordinates":[-77.05559,38.8705],"type":"Point"},{"coordinates":[[[-77.06071,38.89092],[-77.06408,38.8897]]],"type":"Polygon"},{"coordinates":[[[-77.06658,38.89959],[-77.05996,38.89806],[-77.06162,38.89953],[-77.06242,38.89955],[-77.063,38.89994],[-77.06486,38.89961],[-77.06583,38.89991],[-77.06658,38.89959]]],"type":"Polygon"},{"coordinates":[-77.08622,38.9858],"type":"Point"},{"coordinates":[-77.11485,38.84505],"type":"Point"},{"coordinates":[[[-77.1194,38.93491],[-77.11622,38.93155],[-77.11581,38.92891],[-77.11411,38.92713],[-77.11308,38.9266],[-77.11259,38.94019],[-77.11673,38.93688],[-77.1194,38.93491]]],"type":"Polygon"},{"coordinates":[-77.13694,39.02613],"type":"Point"},{"coordinates":[-77.23124,38.87993],"type":"Point"},{"coordinates":[[[-77.46487,38.91975],[-77.42261,38.96258],[-77.42482,38.96293],[-77.42615,38.96359],[-77.42764,38.96264],[-77.42788,38.96403],[-77.43069,38.96369],[-77.43093,38.96106],[-77.43192,38.96],[-77.432,38.95341],[-77.46487,38.91975]]],"type":"Polygon"}],"type":"GeometryCollection"}`

谢谢

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-12-08T03:51:22.747

根据您使用的上下文，您可以将这些 JSON 对象转换为 C# 对象，可以是自定义对象，也可以是[此处](http://geographyservices.codeplex.com/)描述的对象。该框架 (.NET) 具有来自 JSON（在 MVC 中）的内置序列化程序，或者您可以使用[第三方库](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm)。

# c - 不读取文本文件的每一行

> ID：13774164
> 
> 赞同：1
> 
> 时间：2012-12-08T03:30:04.790
> 
> 标签：c

我正在尝试编写一个程序，该程序从文本文档中读取一行并将口头方程式打印成数学方程式，但由于某种原因，它只读取 TXT 文件的第二行和最后一行。

文本示例

```
subtraction,3,57
multiplication,90,46
division,26,7
division,26,0 
```

代码

```
int main()
{
  char name[21], namecopy[21];
  char *nc, com = 100;
  int num1, num2, p, i;
  FILE *file;

  file = fopen("C:\\hw10.txt", "r");
  strcpy(namecopy, name);

  while (fgets (namecopy,21,file)!=NULL)
  {
    fscanf(file, "%[^,]%*c %i%*c %i%*c", &name, &num1, &num2);
    printf("%s %i %i\n", name, num1, num2);     

    if( strcmp( name, "subtraction" ) == 0 )
    {
      p = num1-num2;
      printf("%d - %d = %i \n", num1, num2, p);
    }

    if( strcmp( name, "addition" ) == 0 )
    {
      p = num1+num2;
      printf("%d + %d = %i \n", num1, num2, p);
    }

    if( strcmp( name, "multiplication" ) == 0 )
    {
      p = num1*num2;
      printf("%d x %d = %i \n", num1, num2, p);
    }

    if( strcmp( name, "division" ) == 0 )
    {
      if(num2==0)
         printf("undefiend\n");
      else
      {
        p = num1/num2;
        printf("%d / %d = %i \n", num1, num2, p);
      }
    }
  }
  char ch=getchar();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:37:24.327

这一行：

```
fscanf(file, "%[^,]%*c %i%*c %i%*c", &name, &num1, &num2); 
```

应该

```
sscanf(namecopy, "%[^,]%*c %i%*c %i%*c", &name, &num1, &num2); 
```

# c - 长双精度浮点错误

> ID：13774172
> 
> 赞同：1
> 
> 时间：2012-12-08T03:31:24.187
> 
> 标签：c, floating-point

如果用 C 语言编写了一个程序来感受浮点误差在重复除法中的大小。

```
#include <stdio.h>

int main (int argc, char* argv[]) {
    if (argc < 3) {
        printf("Enter a decimal number as the first positional " 
                "argument\n");
        printf("Enter the maximum number of digits to print as the " 
                "second positional argument\n");
        return 0;
    }   

    long double d;
    sscanf(argv[1], "%Lf", &d);
    int m;
    sscanf(argv[2], "%d", &m);

    int i;
    char format[10];
    for (i = 1; i <= m; ++i) {
        printf("(%d digits)\n", i); 
        sprintf(format, "%%.%dLf\n\n", i); 
        printf(format, d); 
    }   

    long double p = d;
    printf("\n");
    for (i = 1; i <= m; ++i) {
        printf("(%Lf/10e%d with %d digits)\n", d, i, m); 
        p = p/(long double)10.0;
        printf(format, p); 
    }
    return 0;
} 
```

这是使用以下参数运行时的一行输出

```
$ fpe 0.1 700
.
.
.
(0.100000/10e180 with 700 digits)
0.0000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000999999999999999999969819570700939858153376
736698732853283605408116087882762948991724868957176649769045358705872354052
261113540314114885779914335315639806061208847920179776799404948795506248532
485303630811119507604985596684233990126219304092175565232198569923253737561
276484626462077772036038845251286782974821021132356946292172207615386395848
331484216638642723800290357587296443408362280895970909637712494349003491485
594533190659822910753768473307578901199121901299804449081420898437500000000
000000000000000000000000000
.
.
. 
```

在这里，我们观察到 485 位浮点噪声。这是用 gcc 4.4.3 编译的，我假设它使用 80 位扩展精度。但是，485 个十进制数字远远超过 80 位信息。所以，我的问题是，这些信息是从哪里来的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T04:04:07.187

没有打印额外的信息。打印的值正是 的值`p`。

180次迭代后，`p`为+0x1.A8E90F9908E0CA56p-602，即15309010345804195115•2 ^(-665)。IEEE 754 标准将浮点数的值**定义**为符号（+1 或 -1）乘以 2 的整数幂（由数字的指数字段确定）乘以其有效数的值（分数部分）。所以每个浮点数都有一个特定的值。以上是价值`p`. 在十进制，该值是完全.9999999999999999999698195707009398581533767366987328532836054081160878827629489917248689571766497690453587058723540522611135403141148857799143353156398060612088479201797767994049487955062485324853036308111195076049855966842339901262193040921755652321985699232537375612764846264620777720360388452512867829748210211323569462921722076153863958483314842166386427238002903575872964434083622808959709096377124943490034914855945331906598229107537684733075789011991219012998044490814208984375•10 ^(-181)。

那就是你的程序产生的价值。因此，您的输出格式化程序已准确打印`p`. 它做得很好。

事实上，在所有方面，浮点都做得很好。该值是最接近 10 ^(-181)的 long double 值。在一个长的双打中接近是不可能的。因此，即使经过数百次算术运算，错误也没有增加。

这里没有新信息。如果我们被告知表示 的位`p`，我们可以产生相同的数百个十进制数字。他们不会告诉你任何新的东西。但是，它们也不是垃圾。它们完全由 的值决定`p`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:39:36.830

为了向 Eric 的出色答案添加更多信息，第 181 次迭代按照您的方式计算，恰好是最接近 10^-181 的长双精度数，但这并不适用于每个 n...

例如，`1/10.0/10.0/10.0/10.0 != 1/10000.0`当以 long double 计算时。

[在 squeak Smalltalk http://code.google.com/p/arbitrary-precision-float/](http://code.google.com/p/arbitrary-precision-float/)中使用我自己的浮点仿真包，我可以说在前 300 个 10^-n 中，77 是最近的 long double 值，223不是。

```
(1 to: 300) count: [:n |
    ((1 to: n) inject: (1 asArbitraryPrecisionFloatNumBits: 64) into: [:p :i | p/10])
    ~= ((10 raisedTo: n negated) asArbitraryPrecisionFloatNumBits: 64)] 
```

10^-218 的差异峰值为 4 ulp。

```
(1 to: 300) detectMax: [:n |
    (((1 to: n) inject: (1 asArbitraryPrecisionFloatNumBits: 64) into: [:p :i | p/10])
    - ((10 raisedTo: n negated) asArbitraryPrecisionFloatNumBits: 64)) abs
    / (2 raisedTo: -63+((10 raisedTo: n negated) floorLog: 2))]. 
```

以下是 ulp 方面的错误演变：

```
(1 to: 300) collect: [:n |
    ((((1 to: n) inject: (1 asArbitraryPrecisionFloatNumBits: 64) into: [:p :i | p/10])
    - ((10 raisedTo: n negated) asArbitraryPrecisionFloatNumBits: 64))
    / (2 raisedTo: -63+((10 raisedTo: n negated) floorLog: 2))) asInteger].

#(0  0  0 -1 -1 -1 -1 -1 -1 -2 -1 -1 -1 -1 -1 -1 -1 -1 -2 -2
 -1 -1 -1 -1 -1 -1  0 -1  0  0  0  1  0  0  0  0  1  0  0  0
  0  0  0 -1  0  0  0  1  0  0  0  0  0  0  1  1  1  1  0  0
  0  0 -1  0 -1 -1 -1 -1 -2 -1 -1 -2 -2 -2 -3 -2 -2 -3 -2 -2
 -3 -2 -2 -2 -2 -1 -2 -1 -1 -2 -2 -2 -1 -2 -2 -1 -2 -2 -1 -2
 -2 -2 -3 -2 -1 -2 -2 -1 -2 -2 -1 -2 -2 -2 -3 -2 -2 -1 -1 -1
 -1 -1 -1 -1 -2 -2 -1 -3 -2 -2 -3 -2 -2 -3 -3 -2 -2 -2 -2 -3
 -2 -2 -3 -3 -2 -3 -2 -2 -2 -3 -2 -2 -3 -2 -1 -2 -2 -1 -2 -1
 -1 -2 -1 -1 -1  0  0  0  0  0  1  1  0  0  0  0  0  1  0  0
  0  0  0  0 -1 -1 -1 -1  0  0  0  0 -1 -1 -1 -2 -1  0 -1 -1
 -1 -1 -1 -2 -1 -1 -1 -1 -2 -2 -2 -2 -2 -2 -3 -3 -2 -4 -3 -2
 -3 -2 -2 -3 -2 -2 -2 -2 -1 -3 -2 -2 -3 -3 -2 -1 -2 -2 -1 -2
 -2 -1 -3 -2 -2 -3 -3 -2 -3 -2 -1 -1 -1  0  0  0  0  0 -1  0
  0 -1  0  0 -1  0  0  0  0  0 -1 -1  0  0 -1 -1 -1 -1  0  0
  0  1  1  1  0  1  1  1  1  0  1  1  1  1  1  1  0  0  0  0) 
```

# php - Magento 管理端自定义

> ID：13774173
> 
> 赞同：3
> 
> 时间：2012-12-08T03:31:26.343
> 
> 标签：php, magento

我正在做一个magento自定义管理面板站点，客户需要在管理面板中添加新的用户类型，他们可以看到管理面板的一些功能。客户的magento版本是1.4.x，这里我附上一张我需要`product view optimization`从目录部分删除标签的图像。最新版本的magento没有这些功能。所以我需要知道我需要更新哪个文件才能删除这个左标签。请帮忙。![在此处输入图像描述](../Images/405175cf15544f5210f7aec21c43896e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:00:34.767

该选项卡`Product View Optimization`由 使用`Google API - Google Website Optimizer`。如果您根本不使用 Google 的网站优化器，您可以完全停用该模块的输出：

*   转到*System* => *Configuration* => *Advanced*并禁用`Mage_GoogleOptimizer`.
*   转到*系统*=>*配置*=> *Google API*并停用 Google 网站优化器。

希望有帮助！

# ruby - 选择性地允许类使用其他人的私有类方法，或等效的解决方案

> ID：13774176
> 
> 赞同：0
> 
> 时间：2012-12-08T03:32:22.307
> 
> 标签：ruby, class-method, private-methods

在我的项目`Bar`中，我有这个类`Foo`，它的实例代表唯一的、命名的真实世界对象。对这些实例的引用分散在我项目中的数据结构周围，而且我决定让它们通过它们的名称访问。为此，类 Foo 本身会跟踪其实例，例如

```
module Bar
  class Foo
    attr_reader :name

    def initialize( name )
      @name = name
    end

    def self.new *args, &block
      new_instance = super
      n_i_name = new_instance.name
      ( @instances ||= {} ).merge! new_instance => n_i_name
      return new_instance
    end

    def inspect; "Foo instance #{name}" end
  end
end 
```

现在这是一种常见的模式。通常，要访问实例，可以在以下位置建立公共类方法`Foo`：

```
class << Bar::Foo
  def instance( i )
    case i
    when self then i
    else @instances.rassoc( i ).first end
  end
end

i = Bar::Foo.new "John Smith"
#=> Foo instance John Smith
i.object_id
#=> 68997470
Bar::Foo.instance( "John Smith" ).object_id
#=> 68997470 
```

但问题是，模块下有命名实例的类比类`Bar`，例如`Bar::Baz`，`Bar::Quux`等等，它们需要`Foo`通过名称访问实例和彼此。所以我认为保持这些不同类通过名称访问彼此实例的方式的顺序是`Bar`模块本身的责任，我在其中创建了公共模块方法：

```
module Bar
  # Foo method blah blah blah...
  def self.Foo( i ); Foo.instance i end

  # Baz method blah blah blah...
  def self.Baz( i ); Baz.instance i end

  # Quux method blah blah blah...
  def self.Quux( i ); Quux.instance i end
end 
```

每当类`Foo`, `Baz`,`Quux`相互引用时，它们都会使用`Bar.Foo( "John Smith" )`样式调用，这使得也可以通过它们的唯一名称来引用这些实例。现在我的问题是，这对我来说仍然不是 100% 的犹太教。当我运行`rdoc`为`Bar`模块、公共类方法创建文档`#Foo`时`#Baz`，`#Quux`将其添加到文档中。但这些并不是真正打算成为用户界面的一部分。所以我有以下选项，每个选项都有问题：

1.  在用户界面中包括`#Foo`, `#Baz`, 。**问题**：用户并没有那么迫切地需要它们；我的设计意图不是让它们出现在 UI 中。`#Quux`

***   向它们添加`# :nodoc:`指令以防止`rdoc`记录它们。**问题**：感觉不对。它不喜欢`Bar.Foo`和朋友被排除在用户界面之外。感觉更像是它们仍然是 UI 的一部分，但没有记录，是秘密的。我不想要那个。

    *   使用 . 将它们声明为私有`#private_class_method`。但是，即使实例`#Foo`, `#Baz`,`#Quux`在正常操作期间通过名称相互访问，它们也必须使用`Bar.send :Foo, "John Smith"`样式。** 

 **问题：选项 3\. 似乎危害最小。但是，它仍然不完美。理想情况下，我希望方法`Bar.Foo`, `Bar.Baz`,`Bar.Quux`以这样的方式受到保护，这些人可以通过简单地调用来通过名称相互调用`Bar.Foo "John Smith"`，而用户必须使用`Bar.send :Foo, "John Smith"`，并且这些模块方法没有为用户记录。我还需要哪些其他选择（如果有的话）来实现这种状态？有没有办法选择性地允许某些类随意使用其他人的私有方法？另外，我对受保护的类方法没有经验，这可能是一个解决方案吗？感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:33:50.587

看看[Understanding private methods in Ruby](https://stackoverflow.com/questions/4293215/understanding-private-methods-in-ruby) and search SO for private/protected，有很多资料要阅读。

受保护的类方法：

```
class Foo
    class << self
        def prot
            puts "self.prot"
        end
        protected :prot
    end
...

Bar::Foo.prot #=> protected method `prot' called for Bar::Foo:Class (NoMethodError) 
```**

# html - 我应该如何重新调整网页上的图像大小？

> ID：13774178
> 
> 赞同：0
> 
> 时间：2012-12-08T03:32:35.577
> 
> 标签：html, css, firefox, lag

我有一些高分辨率图像，必须将其重新调整为更小并在网页上对其进行动画处理。我不想在图像编辑器上重新调整它，因为我想在宽显示器上获得高分辨率。我尝试了几种方法来重新调整图像大小，但 Firefox 仍然存在性能问题。在调整大小的图像动画时，CPU 上升到 90%，内存占用高达 500mb。以下方法无助于提高性能，重新调整图像大小的常见最佳方法是什么？

```
<img id='picture' src='picture.png'>
#picture{width:50px;height:50px} 
```

或者

```
<div id='picture'></div>
#picture{display:block;width:50px;height:50px;background:url('picture.png');background-size:100%} 
```

或者

```
<div id='picture'></div>
#picture{display:block;background:url('picture.png');background-size:100%;-moz-transform:scale(0.5);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:51:44.480

所以试试这个（这是我测试并给出答案的例子）

```
HTML  

<button id="go1">» Animate Block1</button>
  <div id="block1"></div> 
```

CSS

```
div { 
    background-image:url(Desert.jpg); 
    width:542px;
    height:351px;
    border:2px solid green;
  } 
```

脚本

```
$(document).ready(function(){
    $("#go1").click(function(){
      $("#block1").animate( { width:"1004px" }, { queue:false, duration:3000 } )
         .animate( { height:"687px" }, { queue:false, duration:3000 } )   
    });
  }); 
```

也使用“jquery-latest.js”插件。
只是有一个问题是 resize() 图像但没有完全.！我试图解决这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:13:02.683

我认为这里最好的选择是做你已经做过的事情：

### HTML

```
<div class="huge_image">
</div> 
```

### CSS

```
.huge_image {
  width: 500px;
  height: 300px;
  background: url("/images/massive_image.jpg");
  background-size: 500px 300px;
} 
```

如果性能真的那么差，你可以为那些没有视网膜显示器的人创建一个半尺寸的版本，只为支持视网膜的客户提供完整版本。查看[retina.js](http://retinajs.com)以获得一个简单的方法来做到这一点。

# php - 在原始 PHP 中显示 symfony2 页面

> ID：13774180
> 
> 赞同：1
> 
> 时间：2012-12-08T03:32:53.057
> 
> 标签：php, iframe, symfony, migration

我在迁移时遇到问题，将原始 php 迁移到 Symfony2。由于它看起来相当大的应用程序，我决定部分迁移到 SF2。我正在尝试在我的原始 PHP 中包含 SF2 页面。

更像是 SF1 中的部分。但主要的骨架是在原始 PHP 中。

我只能使用 iframe 来实现这一点。

你能建议任何解决方法吗？

# ios - 添加多个 coredata 视图

> ID：13774182
> 
> 赞同：0
> 
> 时间：2012-12-08T03:33:11.127
> 
> 标签：ios, xcode, core-data

我有一个基于 Tim Roadlys 教程的 coredata 应用程序。该应用程序使用标签栏，其中一个加载核心数据。我有另一个选项卡加载一个`UIView`，然后我通过一个按钮链接到另一个`tableView`也将具有核心数据的选项卡。

问题是单击按钮时第二个视图崩溃。我是通过 segue 传递托管对象上下文还是必须将其放入`appdelegate`？

谢谢你的帮助 ：）

这是转场

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([segue.identifier isEqualToString:@"Load Ancients Segue"]) {
        UITabBarController *tabBarViewController = (UITabBarController *) [segue destinationViewController];
        AncientsInventoryTVC *ancientsInventoryTVC = (AncientsInventoryTVC *) [[[tabBarViewController viewControllers] objectAtIndex:5] topViewController];
        ancientsInventoryTVC.managedObjectContext = self.managedObjectContext;

}

} 
```

当我单击按钮加载视图时，加载以下内容时出现错误；这就是我认为我正在用segue解决的问题。self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];

错误是 - 一个实例`NSFetchedResultsController`需要一个非零`fetchRequest`和`managedObjectContext`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:41:28.213

这不是很多信息和零代码，但我会把它放在 prepareForSegue 调用中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:55:33.320

```
@interface DataServer : NSObject

   +(DataServer *) get;

   @property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
   @property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
   @property (readonly, strong, nonatomic) NSPersistentStoreCoordinator      *persistentStoreCoordinator;

@end

@implementation DataServer

@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

DataServer * _appData;

+(DataServer *) get {
    if (_appData == nil) {
    _appData = [[DataServer alloc] init];
}
return _appData;
}

- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil) {
        return __managedObjectContext;
    } 

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    [__managedObjectContext setMergePolicy: NSOverwriteMergePolicy];
    }
    return __managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DataModel" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
} 

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{

    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    NSString * dbName = @"MyDbName.sqlite";
    NSURL *storeURL = [[self applicationDocumentsDirectory] 
    URLByAppendingPathComponent: dbName];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] 
    initWithManagedObjectModel: self.managedObjectModel];

     // request automatic migration
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
    [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
    if (![__persistentStoreCoordinator 
        addPersistentStoreWithType:NSSQLiteStoreType 
        configuration:nil URL:storeURL options: options error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        [[[UIAlertView alloc ]
            initWithTitle: @"Internal Error" 
            message: [NSString stringWithFormat: @"%@", [error userInfo]]
            delegate:nil 
            cancelButtonTitle: @"OK" 
            otherButtonTitles: nil] show];
      }    

       return __persistentStoreCoordinator;
    }

- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] 
    URLsForDirectory:NSDocumentDirectory 
    inDomains:NSUserDomainMask] 
    lastObject];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:30:38.733

为什么不创建一个单独的单例类，在其中保留 MOC 并从两个控制器中使用它，而不是在控制器中创建 MOC？

# batch-file - 协助后期构建事件命令

> ID：13774184
> 
> 赞同：0
> 
> 时间：2012-12-08T03:33:14.340
> 
> 标签：batch-file, msbuild, command, nuget, post-build-event

我将以下内容用作构建后事件：

```
FOR %%a in ($(ProjectDir)$(OutDir)MyLibrary.*.dll) DO CALL :package %%~na

:package 
"$(SolutionDir)\..\..\..\Packages\NuGet.exe" pack "$(SolutionDir)%1\%1.csproj" -o "$(SolutionDir)\..\..\..\Packages" 
```

上面的功能是在一个文件夹中找到所有 MyLibrary dll 并从中创建一个 nuget 包。有 5 个文件与搜索 MyLibrary.*.dll 匹配。但是只创建了一个包 - 找到的第一个文件。

任何人都看到上面的任何问题，为什么它只创建一个包而不是 5\. 是否存在语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:28:54.820

您错过了`goto :eof`NuGet 行之后的呼叫；这表示`:package`函数的结束。因此，循环正在调用函数，但函数永远不会返回循环。

```
FOR %%a in ($(ProjectDir)$(OutDir)MyLibrary.*.dll) DO CALL :package %%~na
goto End

:package 
"$(SolutionDir)\..\..\..\Packages\NuGet.exe" pack "$(SolutionDir)%1\%1.csproj" -o "$(SolutionDir)\..\..\..\Packages"
goto :eof

:End 
```

# php - 将 HTML 页面保存为 .php？

> ID：13774187
> 
> 赞同：4
> 
> 时间：2012-12-08T03:33:51.493
> 
> 标签：php, javascript, html

现在我只有一个简单的 HTML 页面和`</body>`标签前的 Javascript。可以将此页面保存为 .php 并且一切正常吗？搜索时找不到解释。有人可以解释一下，为什么可以将 HTML 页面保存为 .php？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:36:24.607

是的，会好的。PHP 只处理`<?php ?>`标签内的东西。

但是你为什么不试试看它是否有效呢？这比问一个问题花费的时间要少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:07:47.437

作为一个有趣且相关的旁白；HTML 网站的整个片段可以保存为单独的 PHP 文件，然后带入网站以形成一个整体。一个很好的例子是有一个 HTML 导航菜单模板，它只需要编辑一次，并通过 PHP 包含在您网站的每个页面上进行更新。

许多流行的网站和博客都使用这样的系统来方便和保持一致性。简而言之，以这种方式保存 HTML 代码段是一种很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:36:38.867

任何未包含在 PHP 标记中的内容都将保持“原样”，因此这样做没有问题。

# windows-phone-8 - 模拟消息和链接收件箱 UI

> ID：13774191
> 
> 赞同：0
> 
> 时间：2012-12-08T03:34:20.763
> 
> 标签：windows-phone-8

我正在创建我的第一个 Windows Phone 8 应用程序，并且我决定编写一个简单的 ToDo 应用程序。我想尽可能地模拟原生 UI 体验。在这种情况下，我选择了`Linked Inbox`和`Messaging`应用程序来模拟。

`Pivot`通过使用控件和控件，我的主要外观和感觉很容易`ListBox`。我不知道该怎么做是模拟点击屏幕左边缘以将列表置于多选模式的行为，其中复选框将出现在每个项目旁边。

我已经查看了 the`ListBox`和`LongListSelector`控件。后者似乎只支持选择单个项目，所以看起来我需要使用`List`控件。

我想知道是否有我还没有找到的第 3 个控件可以满足我的要求，或者我正在寻找的功能是否默认没有嵌入到控件中，我基本上需要重新发明轮子。

谢谢

**编辑：**更正`List`为`ListBox`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:04:20.180

您可以从 Microsoft 在 NuGet 上发布的 Windows Phone Toolkit 中的 MultiSelectList 获得此功能。有关如何使用它的示例，请参阅[http://windowsphonegeek.com/articles/Windows-Phone-Toolkit-MultiselectList-in-depth--Part1-key-concepts-and-API](http://windowsphonegeek.com/articles/Windows-Phone-Toolkit-MultiselectList-in-depth--Part1-key-concepts-and-API)。或者从 Codeplex 的源代码中查看示例项目

# oracle - 程序创建问题

> ID：13774193
> 
> 赞同：0
> 
> 时间：2012-12-08T03:34:28.497
> 
> 标签：oracle, plsql

我正在尝试创建一个列出表的所有内容的过程，但 oracle 告诉我该过程存在编译错误。我在 SQL plus 上运行。有任何想法吗？

```
CREATE OR REPLACE procedure payrollproc
BEGIN
SELECT * FROM payroll;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:45:36.273

```
CREATE OR REPLACE procedure payrollproc as
BEGIN
   for c_rec in ( SELECT * FROM payroll)
   Loop
       dbms_output.put_line(c_rec.col1 || '  ' || c_rec.col2 || ' ' || ......);
   End loop;
END;
/ 
```

但是，我建议只运行 select 语句，存储过程对于这样一个基本功能来说工作量太大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:45:38.453

错误消息中的答案是正确的：您在 BEGIN 之前缺少关键字。如果你在 BEGIN 之前加上 IS，它将编译。有关更多详细信息，请参见[此处](http://www.techonthenet.com/oracle/procedures.php)。此外，您将需要一个光标来查看详细信息。祝你好运。

# c# - 事件中的调度程序只会调用一次 C#

> ID：13774197
> 
> 赞同：5
> 
> 时间：2012-12-08T03:34:55.833
> 
> 标签：c#, events, action, dispatcher

我正在编写一个程序来监视从串行端口（从 arduino）发送的命令并将击键发送到各种其他程序。

我在我的事件中放置了一个调度程序，但它只会运行一次......我已经单步执行了代码，它第一次一直运行，但第二次没有。

```
private void portReadEvent(object sender, SerialDataReceivedEventArgs args)
        { //break here
            Action dump = delegate() 
            {
                dumpInfoText(serialPort.ReadExisting());
            }; //create my deligate

            txt_portInfo.Dispatcher.Invoke(dump); //run dispatcher

        }

        private void dumpInfoText(string text)
        {
            string completeCommand = "";
            foreach (char C in text)
            {
                if (serDump.Length <=8 && (C != (char)0x0A || C != (char)0x0D)) //check 
                {
                    serDump = serDump + C; //add char
                }
                if (serDump.Length == 8) //check to see if my info has a complete command (serDump is global)
                {
                    completeCommand = serDump; //move to complete
                    serDump = ""; // reset dump
                    if (C == (char)0x0A || C == (char)0x0D) //dont add crlf
                    {
                        serDump = serDump + C; //add char
                    }
                }
                if (completeCommand.Length == 8)
                {
                    txt_portInfo.Text = txt_portInfo.Text + completeCommand; //do something with it.
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:53:42.107

啊，固定...不知道为什么。

```
 private void portReadEvent(object sender, SerialDataReceivedEventArgs args)
    {
        txt_portInfo.Dispatcher.Invoke(new Action(() => {dumpInfoText(serialPort.ReadExisting());})); //run dispatcher

    } 
```

# php - PHP mail（）函数不起作用

> ID：13774199
> 
> 赞同：0
> 
> 时间：2012-12-08T03:35:04.983
> 
> 标签：php, email

这是我第一次使用 PHP mail() 函数，我只是想发送一封非常基本的电子邮件。

我的计算机上安装了 WAMP 服务器，用于测试目的。这是我正在使用的代码。

```
$to = "me@gmail.com";
$subject = "Test mail";
$message = "Just testing.";
$from = "Your mom.";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers); 
```

据我所知，整个 PHP 文件执行没有错误，但是我没有收到任何电子邮件。也许我没有配置我应该配置的东西，或者我的语法不正确。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:46:33.910

使用 php 脚本 **mail()**函数发送电子邮件。

但是只有在 smtp 服务器已配置到**php.ini**文件（php 的配置文件）中时才会发送电子邮件。

SMTP 服务器的两个配置参数都必须在 php.ini 文件中设置。

(1) **SMTP** (2) **smtp_port**

请参考下面提到的从本地主机发送电子邮件的 URL [http://blog.techwheels.net/send-email-from-localhost-wamp-server-using-sendmail/](http://blog.techwheels.net/send-email-from-localhost-wamp-server-using-sendmail/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:22:16.733

`mail`是邪恶的，因为它几乎从不告诉你它什么时候真正失败了。

使用[SwiftMailer](http://swiftmailer.org/)或[PHPMailer](http://phpmailer.worxware.com/)直接连接到 sendmail 或 SMTP 服务器，这至少可以在发送邮件出现问题时为您提供线索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:28:51.433

我刚刚在我的 gmail 上尝试了你的代码。收到电子邮件。因此，我认为服务器未配置为发送电子邮件（请查看[http://www.php.net](http://www.php.net)上的要求）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T05:20:00.433

我遇到了同样的问题——它没有给我任何问题，但它也没有发送电子邮件。我写了一篇关于它的博客，但这里有重要的一行：

```
ini_set("sendmail_from", $email_from); 
```

这是有效的电子邮件的完整编码：

```
$to = $email;
$message = "HEre's the message";
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Website<contact@myemail.com>' . "\r\n";
$subject = "Hello World!";
$body = $message;
$email_from = "contact@myemail.com";
ini_set("sendmail_from", $email_from);
mail($to, $subject, $body, $headers); 
```

如果你想阅读整个博客的解释，这里有一个链接： http: [//kimjoyfox.com/blog/use-php-to-send-an-email/](http://kimjoyfox.com/blog/use-php-to-send-an-email/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-30T08:54:43.630

如果您已经拥有它，请将其添加到 php.ini，然后将其修改如下..

```
[邮件功能]
; 仅适用于 Win32。
SMTP = 本地主机
smtp_port = 25

; 仅适用于 Win32。
;sendmail_from = Sachinmodi9@gmail.com //你可以试试你的..

```

在顶部的 php 脚本中添加它..

ini_set("SMTP","aspmx.l.google.com");

并运行脚本..

如果它显示成功消息然后检查它你的收件箱..如果邮件不在那里然后检查你的垃圾邮件箱..

# java - 简单的递归算法机制

> ID：13774210
> 
> 赞同：0
> 
> 时间：2012-12-08T03:36:45.853
> 
> 标签：java, recursion

一旦它被实例化并且方法 traverse(0,0) 被调用，它将自动解决迷宫，显示 7 作为路径，3 作为“尝试过的路径”。我试图理解这段代码，但我被**traverse 方法中的第一个 else 语句卡住了。**

```
public class Maze
{
    private final int TRIED = 3;
    private final int PATH = 7;
    private int[][] grid = { {1,1,1,0,1,1,0,0,0,1,1,1,1},
                             {1,0,1,1,1,0,1,1,1,1,0,0,1},
                             {0,0,0,0,1,0,1,0,1,0,1,0,0},
                             {1,1,1,0,1,1,1,0,1,0,1,1,1},
                             {1,0,1,0,0,0,0,1,1,1,0,0,1},
                             {1,0,1,1,1,1,1,1,0,1,1,1,1},
                             {1,0,0,0,0,0,0,0,0,0,0,0,0},
                             {1,1,1,1,1,1,1,1,1,1,1,1,1} };

public boolean traverse (int row, int column)
{
    boolean done = false;
    if (valid (row, column))
    {
       grid[row][column] = TRIED;
       // this cell has been tried
       if (row == grid.length-1 && column == grid[0].length-1)
          done = true;
          // the maze is solved
       else
       {
          done = traverse (row+1, column); 
          // down
          if (!done)
          done = traverse (row, column+1); 
          // right
          if (!done)
          done = traverse (row-1, column);
          // up

          if (!done)
          done = traverse (row, column-1);
          // left
       }
    if (done)
    // this location is part of the final path
    grid[row][column] = PATH;
    }
    return done;
}

//-----------------------------------------------------------------
//  Determines if a specific location is valid.
//-----------------------------------------------------------------
private boolean valid (int row, int column)
{
    boolean result = false;
    // check if cell is in the bounds of the matrix
    if (row >= 0 && row < grid.length && column >= 0 &&
       column < grid[row].length)
       // check if cell is not blocked and not previously tried
       if (grid[row][column] == 1)
       result = true;
       return result;
} 
```

据我所知，

```
done = traverse (row+1, column); 
```

此行是一个递归调用，会将其向下移动一次，然后再次运行该方法，但如果它无效怎么办？整个方法不停止吗？我不明白在某个点之后控制流转移到哪里是无效的。

例如，如果 [1][0] 无效，控制是否转移回 [0][0] 调用并处理“向右”语句？if (!done) 是什么意思，我的意思是当迷宫完全解决时，done 才等于 true，如果它是有效的，done 将等于 true，所以整个事情不会停止吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:41:45.523

这是你的方法：

```
public boolean traverse (int row, int column)
{
    boolean done = false;
    if (valid (row, column))
    {
       ...
    }
    return done;
} 
```

因此，如果该点无效，它将跳过所有测试并返回`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:41:55.737

如果有效测试失败，接下来要执行的是“return done”；在方法结束时，将返回 false。这会将有关失败的信息传递回调用者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:43:53.437

at the first else the row and columns are checked for validity. If the row and columns are not valid the method will not stop instantly, because based on the value of done field the nested if blocks inside the first else will be executed.

# ruby - 从 Chef Cookbook 启动 SASS 作为守护进程

> ID：13774214
> 
> 赞同：3
> 
> 时间：2012-12-08T03:37:29.953
> 
> 标签：ruby, sass, chef-infra, vagrant

我希望获得一些关于启动 SASS --watch 作为 Chef Cookbook 中的守护进程的指导。以下似乎没有解决问题：

```
lib="/vagrant/lib"
sassPath="#{lib}/sass"

include_recipe 'ruby'

execute 'install-sass' do
    command 'gem install sass'
end

execute "mkdir-lib" do
    not_if {File.exists?(lib)}
    command "mkdir #{lib}"
end

execute "mkdir-sass" do
    not_if {File.exists?(sassPath)}
    command "mkdir #{sassPath}"
end

execute "create-procfile" do
    command "nohup sass --watch #{sassPath}:#{lib} &"
end 
```

Chef 成功完成。似乎没有办法将 sass --watch 作为服务运行。

厨师的输出：

```
[default] Running chef-solo...
stdin: is not a tty
[2012-12-19T19:39:44+00:00] INFO: *** Chef 10.14.2 ***
[2012-12-19T19:39:27+00:00] INFO: Setting the run_list to ["recipe[ruby]",         "recipe[sass]"] from JSON
[2012-12-19T19:39:27+00:00] INFO: Run List is [recipe[ruby], recipe[sass]]
[2012-12-19T19:39:27+00:00] INFO: Run List expands to [ruby, sass]
[2012-12-19T19:39:27+00:00] INFO: Starting Chef Run for precise64
[2012-12-19T19:39:27+00:00] INFO: Running start handlers
[2012-12-19T19:39:27+00:00] INFO: Start handlers complete.
[2012-12-19T19:39:27+00:00] INFO: Processing execute[apt-update] action run (ruby::default line 1)
[2012-12-19T19:39:40+00:00] INFO: execute[apt-update] ran successfully
[2012-12-19T19:39:40+00:00] INFO: Processing package[ruby] action install (ruby::default line 5)
[2012-12-19T19:39:57+00:00] INFO: Processing execute[install-sass] action run (sass::default line 6)
[2012-12-19T19:40:54+00:00] INFO: execute[install-sass] ran successfully
[2012-12-19T19:40:54+00:00] INFO: Processing execute[mkdir-lib] action run (sass::default line 10)
[2012-12-19T19:40:54+00:00] INFO: Processing execute[mkdir-sass] action run (sass::default line 15)
[2012-12-19T19:40:54+00:00] INFO: Processing execute[create-procfile] action run (sass::default line 20)
[2012-12-19T19:40:54+00:00] INFO: execute[create-procfile] ran successfully
[2012-12-19T19:40:54+00:00] INFO: Chef Run complete in 87.021831 seconds
[2012-12-19T19:40:54+00:00] INFO: Running report handlers
[2012-12-19T19:40:54+00:00] INFO: Report handlers complete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T23:22:44.853

当您运行命令时，该命令将作为父 Chef Client 进程的[子进程执行。](http://en.wikipedia.org/wiki/Child_process)在 linux-land 中，子进程在其父进程死亡时终止。

如果您将 Chef Client 作为脚本运行（如 cron 或手动），则父进程就是该脚本。因此，即使您将子进程置于后台，它也会被父进程 dies 杀死。在这种情况下，这会在 Chef Client 运行完成时发生。

在后台运行脚本`&`绝不是推荐的方法，尤其是在生产中。相反，您应该将 SASS 观察程序包装为`init.d`or 服务，然后使用 Chef 的本机`service`资源。

您还可以考虑妖魔化 SASS 观察者，这会将进程与父进程分离，允许它在运行完成后继续存在。但是，如果您这样做，您将需要手动管理 PID 文件 - 否则您将在每个 Chef Client 运行时启动一个新进程。

# php - Convert Hex Code into readable string in PHP

> ID：13774215
> 
> 赞同：6
> 
> 时间：2012-12-08T03:37:50.877
> 
> 标签：php, string, hex

Hi StackOverflow Community,

Here is my question, how to convert php that has hex code into readable string ? On what I mean is all inside this 2 php code..

```
<?php

echo "\x74\150\x69\163\x20\151\x73\40\x74\145\x73\164\x69\156\x67\40\x6f\156\x6c\171";

echo test['\x74\171\x70\145'];

echo range("\x61","\x7a");

?> 
```

this is un-readable code, I need some php function that can convert those unreadable code into readable code..so it will become like this after convert..

```
<?php

echo "this is testing only";

echo test['type'];

echo range("a","z");

?> 
```

I know i can just echo that hex to change it to readable string, but I have huge php file and lot's of php file that same like this, so I need php function that can automatically convert them all into readable code.

Thank..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T04:05:36.310

It seems your code is obfuscated not only with hex escape sequences, but with octal as well. I've written this function to decode it for you:

```
function decode_code($code){
    return preg_replace_callback(
        "@\\\(x)?([0-9a-f]{2,3})@",
        function($m){
            return chr($m[1]?hexdec($m[2]):octdec($m[2]));
        },
        $code
    );
} 
```

See it in action here: [http://codepad.viper-7.com/NjiL84](http://codepad.viper-7.com/NjiL84)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-26T11:40:10.233

I had mixed content where besides hex and oct there was also normal chars.

So to update Sean's code above I added following

```
function decode_code($code)
{
    return preg_replace_callback('@\\\(x)?([0-9a-f]{2,3})@',
        function ($m) {
            if ($m[1]) {
                $hex = substr($m[2], 0, 2);
                $unhex = chr(hexdec($hex));
                if (strlen($m[2]) > 2) {
                    $unhex .= substr($m[2], 2);
                }
                return $unhex;
            } else {
                return chr(octdec($m[2]));
            }
        }, $code);
} 
```

Example string

```
"\152\163\x6f\x6e\137d\x65\143\157\x64e" 
```

Decoded output

```
"json_decode" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-29T02:41:34.093

You can use PHP's native urldecode() function to achieve this. Just pass the hex encoded string to the function and the output will be a string in readable format.

Here is a sample code to demonstrate:

```
<?php

echo urldecode("\x74\150\x69\163\x20\151\x73\40\x74\145\x73\164\x69\156\x67\40\x6f\156\x6c\171");

?> 
```

This should output: this is testing only

-- seekers01

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-01T16:15:09.947

You could also use [`stripcslashes`](https://secure.php.net/stripcslashes) if there are no other escape sequences or if you don't mind converting not only hex escape sequences, but also some special characters (such as `\0`, `\a`, `\b`, `\f`, `\n`, `\r`, `\t` and `\v`).

But if you'd like to convert only hex sequences, you might use [`preg_replace_callback`](https://secure.php.net/preg_replace_callback) to limit what sequences should be changed, like this:

```
function hex2str($string) {
    return preg_replace_callback(
        '/(\\\\x[a-f\d]{2})+/i', 
        function ($matches) {
            return stripcslashes($matches[0]);
        },
        $string
    );
} 
```

# javascript - 使用jquery双击图像时是否可以获得div/img的ID？

> ID：13774216
> 
> 赞同：0
> 
> 时间：2012-12-08T03:38:13.117
> 
> 标签：javascript, jquery, html, css

现在我有一个显示图像的 html 页面。请注意，该 div 仅包含 1 个图像文件：

```
<div="div_1"><img id = "img_1" src = '....' /></div> 
```

我想实现的是当用户双击 div 时，通过 jquery/js 来获取 "div_1" 或 "img_1" 。以更好的方式，获得 "1" 。是否有可能实现/任何功能可以帮助实现这一目标？

谢谢

**更新：**

当前的Html代码是这样的

```
<div class="turn-page-wrapper" page="2" style="position: absolute; overflow: hidden; width: 28.5px; height: 37px; top: 0px; left: 0px; right: auto; bottom: auto; z-index: 6;">
<div style="position: absolute; top: 0px; left: 0px; overflow: hidden; z-index: auto; width: 47px; height: 47px;">
<div id="div_2" class="turn-page p2" style="width: 28.5px; height: 37px; -webkit-transform-origin: 0% 0%; position: absolute; top: 0px; left: 0px; bottom: auto; right: auto;">
<img id="img_2" src="demo/medium/Web081112_P002_medium.jpg" alt="flip book">
</div>
</div>
</div> 
```

看来我的情况不是那么简单，当我使用`var id = $(this).attr("id");`它时返回页面作为结果。如果我的情况不允许我获取页面的属性，图像的 id，那么是否意味着我无法获取单个图像的实际 ID？谢谢

**最新更新（仅剩 1 个缺陷！）**

```
$("div.turn-page").dblclick(function() {
var id = this.id;
num = id.split("_")[1];
alert (num);
}); 
```

目前我正在使用它来获取 id ，但是对于最后一个结果（不可转动），​​当我双击它时，它没有响应或做任何事情。但它应该是工作，因为类有翻页 p7 ？

```
 <div class="turn-page-wrapper" page="7" style="position: absolute; overflow: hidden; width: 609.5922459893047px; height: 793px; top: 0px; right: 0px; left: auto; bottom: auto; z-index: 6;">
    <div style="position: absolute; top: 0px; left: 0px; overflow: hidden; z-index: auto; width: 1000px; height: 1000px;">
    <div id="div_7" class="turn-page p7" style="width: 609.5922459893047px; height: 793px; position: absolute; top: 0px; left: 0px; bottom: auto; right: auto;">
    <img id="img_7" src="demo/medium/Web081112_P007_medium.jpg" alt="flip book">
    </div>
    </div>
    <div style="top: 0px; left: 0px; overflow: hidden; z-index: 1; width: 610px; height: 793px;">
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:46:45.250

您可以在 javascript 中执行此操作：

```
document.getElementById("div_1").children[0].id 
```

这将返回“div_1”div 的第一个孩子的 id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:47:11.867

像这样：

```
$("div").dblclick(function() {
    var id = this.id,
        num = id.split("_")[1],
        imgSrc = $(this).find("img").attr("src");

    // do something with the id, the number, or the image src
}); 
```

演示：http: [//jsfiddle.net/LGwK7/](http://jsfiddle.net/LGwK7/)

这会将双击处理程序绑定到*所有*div 元素，因此您可能希望只为您关心的元素添加一个公共类并绑定到这些元素。（我假设通过 id 绑定是没有意义的，因为您询问了如何获取被点击的 id。）

请注意，您的 html 有一个错误：`<div="div_1"...`，应该是`<div id="div_1"...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T03:47:30.347

你可以做这样的事情

```
var divId;

$('div').dblclick(function(e){
    e.preventDefault();
    divId = $(this).prop('id');
}); 
```

# c# - C# BackgroundWorker 可以在非多核 CPU 上工作吗？

> ID：13774219
> 
> 赞同：0
> 
> 时间：2012-12-08T03:39:05.907
> 
> 标签：c#, multithreading, backgroundworker

我有一个使用 C# 制作的应用程序，它使用 BackgroundWorker。它将部署到客户端 PC。我的问题是，它会在没有多核处理器的计算机上工作（BackgroundWorker）吗？

还是 BackgroundWorker 仅适用于多核处理器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T03:41:51.223

它会起作用的。当线程数多于内核数时，调度程序将使线程轮流共享 CPU 时间。

# android - 安卓短信应用

> ID：13774220
> 
> 赞同：0
> 
> 时间：2012-12-08T03:39:05.857
> 
> 标签：android

我正在设计一个基本的文本消息 UI，我有一个名为 converseView 的类。

```
public class converseView extends Activity {

private ArrayList<String> conversation = new ArrayList<String>();
public ArrayAdapter<String> adapter;
private String phoneNumber;     
ListView listView;

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.converse_view);

    this.adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1,
            conversation);
    adapter.setNotifyOnChange(true);        
    listView = (ListView) findViewById(R.id.conversation);
    listView.setAdapter(adapter);

}

protected void onStart(Bundle savedInstanceState)
{
    super.onStart();
    this.adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1,
            conversation);

    this.adapter.notifyDataSetChanged();
    listView.setAdapter(adapter);

}

protected void onResume()
{
   super.onResume();
   this.adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1,
            conversation);
   this.adapter.notifyDataSetChanged();
   listView.setAdapter(adapter);

}

public void changeNumber(String phoneNumber2) {
    this.phoneNumber = phoneNumber2;

}

public void addText(String message) {

    if (this.adapter!=null)
    {
      this.adapter.add(message);
      this.conversation.add(message);
      this.adapter.notifyDataSetChanged();
    }

}

@Override
public String toString() {
    return phoneNumber;
}

public boolean equals(converseView other) {
    return this.phoneNumber.equals(other.phoneNumber);
} 
```

}

每次我向新电话号码发送消息时，它都会创建一个实例，并且 ArrayList/ArrayAdapter 应该跟踪所有发送到该号码的消息。但是当我尝试进入这个视图时，似乎 ArrayAdapter 没有更新，也没有显示任何内容。我能做些什么来解决这个问题。

我处理将东西存储到适配器的方式是这样的

```
if (phoneNumber.length() > 0 && message.length() > 0) {
        sendSMS(phoneNumber, message);
        converseView numberObject = new converseView();
        numberObject.changeNumber(phoneNumber);
        MainActivity.addThread(numberObject);
        numberObject.addText(message);

        /*
         * if(MainActivity.contains(numberObject)) { int index =
         * MainActivity.indexOf(numberObject); converseView numberObject2 =
         * (converseView) MainActivity.getList().get(index);
         * numberObject2.addText(message); }
         */

    } 
```

# java - 获取 JTable 中的选择侦听器列表

> ID：13774221
> 
> 赞同：2
> 
> 时间：2012-12-08T03:39:50.473
> 
> 标签：java, jtable, listeners

我想获取在我的选择模型中注册的所有列表选择侦听器`JTable`，但我没有看到获取它们的方法。有没有办法可以找回它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:50:12.097

1.  在新的 JTable 上使用[getSelectionModel()方法](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#getSelectionModel%28%29)
2.  将结果转换为 DefaultListSelectionModel
3.  使用[getListSelectionListeners()](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultListSelectionModel.html#getListSelectionListeners%28%29)

希望能帮助到你！

# javascript - 过渡多个背景图像

> ID：13774222
> 
> 赞同：2
> 
> 时间：2012-12-08T03:39:50.270
> 
> 标签：javascript, jquery, css, html, css-transitions

尝试将图像过渡效果应用于特定 div 的固定背景图像。目前看起来像——</p>

```
#top-header {
background: #FFF url('/images/image001.jpg') no-repeat top center fixed; 
width: 100%;height: 540px;
}   

<div id="top-header"></div> 
```

我知道 CSS3 允许多个背景图像。由于图像是通过我的 CSS 调用的，是否可以将 javascript 应用于当前 div 以实现淡入/淡出过渡效果？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T05:21:34.920

你可以用 JavaScript 和 CSS 做很多事情，但是这是一个非常解决的问题，有很多选项可以基本上显示幻灯片。所以最好看看其中之一。但无论如何，让我们试试吧！

HTML：

```
<div id="slideshow"></div>​ 
```

CSS：

```
#slideshow {
    border: 1px solid gray;
    height: 330px;
    width: 592px;
    opacity: 0;
} 
```

​ JavaScript：

```
$(document).ready(function() {
    var timeToDisplay = 2000;
    var opacityChangeDelay = 50;
    var opacityChangeAmount = 0.05;

    var slideshow = $('#slideshow');
    var urls = [
       'http://sipi.usc.edu/database/preview/aerials/2.1.07.png',
       'http://sipi.usc.edu/database/preview/aerials/2.1.06.png',
       'http://sipi.usc.edu/database/preview/aerials/2.1.12.png'
    ];

    var index = 0;

    var transition = function() {
        var url = urls[index];

        slideshow.css('background-image', 'url(' + url + ')');

        index = index + 1;
        if (index > urls.length - 1) {
            index = 0;
        }
    };

    var fadeIn = function(opacity) {
        opacity = opacity + opacityChangeAmount;

        slideshow.css('opacity', opacity);

        if (opacity >= 1) {
            slideshow.trigger('fadeIn-complete');
            return;
        }
        setTimeout(function() {
            fadeIn(opacity);
        }, opacityChangeDelay);
    };

    var fadeOut = function(opacity) {
        opacity = opacity - opacityChangeAmount;

        slideshow.css('opacity', opacity);

        if (opacity <= 0) {
            slideshow.trigger('fadeOut-complete');
            return;
        }
        setTimeout(function() {
            fadeOut(opacity);
        }, opacityChangeDelay);
    };

    slideshow.on('fadeOut-complete', function(event) {
        transition();
        fadeIn(0);
    });

    slideshow.on('display-complete', function(event) {
        fadeOut(1);
    });

    slideshow.on('fadeIn-complete', function(event) {
        setTimeout(function() {
            slideshow.trigger('display-complete');
        }, timeToDisplay);
    });

    transition();
    fadeIn(0);
});​ 
```

演示：[jsfiddle](http://jsfiddle.net/buSae/164/)

当然，jQuery 已经有了[`fadeIn`](http://api.jquery.com/fadeIn/)，[`fadeOut`](http://api.jquery.com/fadeOut/)所以我们可以使用它们来简化我们的代码：

```
$(document).ready(function() {
    var timeToDisplay = 2000;

    var slideshow = $('#slideshow');
    var urls = [
       'http://sipi.usc.edu/database/preview/aerials/2.1.07.png',
       'http://sipi.usc.edu/database/preview/aerials/2.1.06.png',
       'http://sipi.usc.edu/database/preview/aerials/2.1.12.png'
    ];

    var index = 0;
    var transition = function() {
        var url = urls[index];

        slideshow.css('background-image', 'url(' + url + ')');

        index = index + 1;
        if (index > urls.length - 1) {
            index = 0;
        }
    };

    var run = function() {
        transition();
        slideshow.fadeIn('slow', function() {
            setTimeout(function() {
                slideshow.fadeOut('slow', run);
            }, timeToDisplay);
        });
    }

    run();
});​ 
```

演示：[jsfiddle](http://jsfiddle.net/buSae/165/)

我们也可以使用[`slideDown`](http://api.jquery.com/slideDown/)and [`slideUp`](http://api.jquery.com/slideUp/): [jsfiddle](http://jsfiddle.net/Qnhjk/6/)

那么为什么不直接使用它呢？好吧，您可以，但是我知道一个明显的缺陷：我们在确保浏览器已下载所有图像之前开始播放幻灯片。我们应该解决这个问题。毫无疑问，我们可能忽略了类似的问题，但您可以选择使用什么。

# c# - 关于 lambda 表达式的专家意见 - ViewModels

> ID：13774223
> 
> 赞同：2
> 
> 时间：2012-12-08T03:39:54.253
> 
> 标签：c#, lambda, asp.net-mvc-4, asp.net-mvc-viewmodel

我对 ASP.NET MVC 和 lambda 表达式还很陌生，所以我试图找出最好的方法来做到这一点。

情况：客户有支持票。我有一个 ViewModel，我只想显示打开票和关闭票的数量。

有没有更好的方法来处理这个？我知道这看起来很笼统，但只是想要专家的意见。

```
TicketStatus completeStatus = _db.TicketStatuses.Single(s => s.Status == "Complete");
DashboardSupportView supportView = new DashboardSupportView();

supportView.OpenTickets = _db.Tickets
 .Where(t => t.ClientID == client.ClientID)
 .Where(n => n.TicketStatus.TicketStatusID != completeStatus.TicketStatusID)
 .Count();

supportView.ClosedTickets = _db.Tickets
 .Where(t => t.ClientID == client.ClientID)
 .Where(t => t.TicketStatus.TicketStatusID == completeStatus.TicketStatusID)
 .Count();
return PartialView(supportView) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:45:33.080

是的，没关系。我建议你稍微改变一下：

```
TicketStatus completeStatus = _db.TicketStatuses.Single(s => s.Status == "Complete");
DashboardSupportView supportView = new DashboardSupportView();
supportView.OpenTickets = _db.Tickets.Count(t => t.ClientID == client.ClientID && t.TicketStatus.TicketStatusID != completeStatus.TicketStatusID);
supportView.ClosedTickets = _db.Tickets.Count(t => t.ClientID == client.ClientID &&  t.TicketStatus.TicketStatusID == completeStatus.TicketStatusID);
return PartialView(supportView) 
```

或者，如果您的客户端实体具有导航属性，您可以按如下方式进行：

```
TicketStatus completeStatus = _db.TicketStatuses.Single(s => s.Status == "Complete");
Client entityClient = _db.Clients.Single(c => c.ClientID == client.ClientID);
DashboardSupportView supportView = new DashboardSupportView();
supportView.OpenTickets = entityClient.Tickets.Count(t.TicketStatus.TicketStatusID != completeStatus.TicketStatusID);
supportView.ClosedTickets = entityClient.Tickets.Count(t.TicketStatus.TicketStatusID == completeStatus.TicketStatusID);
return PartialView(supportView) 
```

# ruby - 交叉实现确定性数组#shuffle

> ID：13774225
> 
> 赞同：2
> 
> 时间：2012-12-08T03:40:09.553
> 
> 标签：ruby, jruby, rubinius

可以将随机数生成器传递给它，`Array#shuffle`从而使随机播放具有确定性。

例如，在 MRI 1.9.3p327 中：

```
[1, 2, 3, 4].shuffle(random: Random.new(0)) # => [1, 2, 4, 3]
[1, 2, 3, 4].shuffle(random: Random.new(0)) # => [1, 2, 4, 3] 
```

但是，没有指定 Random 的随机数生成器实现。正因为如此，Ruby 的其他实现有不同的结果。

在 Rubinius 2.0.0rc1（1.9.3 发布 2012-11-02 JI）中：

```
[1, 2, 3, 4].shuffle(random: Random.new(0)) # => [1, 3, 2, 4]
[1, 2, 3, 4].shuffle(random: Random.new(0)) # => [1, 3, 2, 4] 
```

顺便说一句，jruby-1.7.1 使用与 MRI 1.9.3p327 相同的随机数生成器，但这只是偶然，不能保证。

为了实现一致的跨实现确定性随机播放，我想将自定义随机数生成器传递到`Array#shuffle`. 我认为这将是微不足道的，但事实证明它相当复杂。

这是我在 MRI 中首先尝试的方法：

```
class NotRandom; end
[1, 2, 3, 4].shuffle(random: NotRandom.new) # => [4, 3, 2, 1]
[1, 2, 3, 4].shuffle(random: NotRandom.new) # => [4, 2, 1, 3] 
```

我期待一个`NoMethodError`告诉我我需要实现的接口。

有什么见解吗？

* * *

更新：

正如@glebm 指出的那样，`NotRandom`inherited`Kernel#rand`是需要的接口。这很容易解决，但不幸的是没有提供解决方案。

```
class NotRandom
  def rand(*args)
    0
  end
end 
```

在 RBX 中：

```
[1, 2, 3, 4].shuffle(random: NotRandom.new) # => [1, 2, 3, 4] 
```

在 MRI 中：

```
[1, 2, 3, 4].shuffle(random: NotRandom.new) # => [2, 3, 4, 1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:52:17.177

对我来说，解决方案是两件事的结合：

1.  找出随机 API。只是`rand`。

2.  实现我自己的 shuffle，因为不同的 Ruby 实现并不一致。

我用过`my_array.sort_by { @random_generator.rand }`。

# php - preg_replace() 的 PHP 替代方案？

> ID：13774228
> 
> 赞同：0
> 
> 时间：2012-12-08T03:40:40.020
> 
> 标签：php, regex, preg-replace, ascii

我有一个带有几个特殊字符的长字符串，特别是引号（“，'）和更大的引号，小于括号..（<，>）它弄乱了我的 HTML。

在我花大量时间编写自己的函数之前，我想知道是否有一种简单的方法可以用它们的 ascii 等价物（>、< 等）替换所有出现的这些。我在 RegEx 上很糟糕：/

感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T03:46:49.800

我相信您正在寻找[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)。

此函数将所有 html 字符替换为其 html 实体等效项。

前任：

```
<?php
$before="<code>";
$after=htmlspecialchars($before);
echo $after; //&lt;code&gt;
?> 
```

如果您还想替换单引号，请务必使用 ENT_QUOTES 作为第二个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T03:51:26.303

有[`htmlentities()`](http://www.w3schools.com/php/func_string_htmlentities.asp)和[`htmlspecialchars()`](http://www.w3schools.com/php/func_string_htmlspecialchars.asp)可用，具体取决于您的确切需要。如果你只想打破`,`, `<`，`>`你可以做

```
$new_str = htmlspecialchars($str, ENT_NOQUOTES); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T03:50:20.873

您可以使用 php 的 str_replace 函数。查看[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)上的 php 手册。

```
$text = str_replace('<', '', $text); 
```

此代码通过将 $text 替换为空字符串来删除小于号。

不过，我强烈建议您使用 preg_replace() 探索正则表达式方法。它更快，更强大。

# javascript - 如何将部分 href= 值从 javascript 变量替换为 phps str_replace(..)？

> ID：13774229
> 
> 赞同：0
> 
> 时间：2012-12-08T03:40:39.460
> 
> 标签：javascript

我得到了包含以下数据的javascript变量（code2）：

```
<div class="pages"><center><a class="selected" href="/Episodes-1234_power1" title="power album page 1" >1</a><a class="normal" href="/Episodes-1234_power2" title="power album page 2"> 2</a> 
```

我想把它改成这样：

```
<div class="pages"><center><a class="selected" href="./doit.php?title=<?php echo $_GET['title'];?>&Num=/Episodes-1234_power1" title="power album page 1" >1</a><a class="normal" href="./doit.php?title=<?php echo $_GET['title'];?>&Num=/Episodes-1234_power2" title="power album page 2"> 2</a> 
```

我在 php 中做了类似的事情，比如这个例子：

```
$code2=str_replace('href="', 'href="./doit.php?title='.$title.'&Num=', $code1);
echo $code2; 
```

我尝试在 javascript 中做同样的事情，但我的以下代码不起作用！你们能帮我修一下吗？谢谢

```
<script>
.....
.....
alert ('' + code2);

 //document.write(code2);
var myString = code2;
var myString2 = myString.replace(href=, 'href="./doit.php?title=<?php echo $_GET['title'];?>&Num=');

document.write (myString2);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:00:00.750

您可以像使用 PHP 一样使用 javascript`replace`方法，并利用其对正则表达式的支持来匹配一般意义上的 href 值。基本上是这样的：

```
var theSecondString = theFirstString.replace(/href=".+"/, theReplacementString); 
```

使用`/href=".+"/`意味着它将查找 href 'key'，以及双引号中的任何内容，然后将所有内容替换为您的替换字符串。

这是一个[jsfiddle](http://jsfiddle.net/tadRP/)，它显示了它的作用。

**编辑：**正则表达式应该`/href="/g`还包括原始的 href 组件；同样的原则也适用于一般意义上，当然，这是一个[更新的 jsfiddle](http://jsfiddle.net/tadRP/4/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T03:51:54.083

我喜欢将这样的字符串变成实际的 dom 元素，然后使用方法从那里进行操作：

```
var div = ​docu​ment.createElement('div');
div.innerHTML = code2

var a = div.querySelectorAll('a')[0];
a.href = "./doit.php?title=<?php echo $_GET['title'];?>&Num=";

document.body.appendChild(div) 
```

# java - 在jsp中上传文件时发现异常

> ID：13774242
> 
> 赞同：0
> 
> 时间：2012-12-08T03:43:18.497
> 
> 标签：java, jsp

我不知道我的代码有什么问题，它显示了这个错误：它之前执行过，但现在我不知道为什么它没有运行..我无法理解这个类文件异常，因为我添加了servelet-api。 jar 文件也在我的库中

```
 exception 

org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.NoClassDefFoundError: javax/servlet/ServletInputStream
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:534)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:442)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

javax.servlet.ServletException: java.lang.NoClassDefFoundError: javax/servlet/ServletInputStream
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
    org.apache.jsp.upload_jsp._jspService(upload_jsp.java:151)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.NoClassDefFoundError: javax/servlet/ServletInputStream
    org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:126)
    org.apache.jsp.upload_jsp._jspService(upload_jsp.java:101)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.12 logs. 
```

我的代码：

```
<%@ page import="java.util.List" %>
   <%@ page import="java.util.Iterator" %>
   <%@ page import="java.io.File" %>
   <%@ page import="org.apache.commons.fileupload.servlet.ServletFileUpload"%>
   <%@ page import="org.apache.commons.fileupload.disk.DiskFileItemFactory"%>
   <%@ page import="org.apache.commons.fileupload.*"%>
<%
 File file ;
   int maxFileSize = 5000 * 1024;
   int maxMemSize = 5000 * 1024;
   ServletContext context = pageContext.getServletContext();
   String filePath = context.getInitParameter("file-upload");

   // Verify the content type
   String contentType = request.getContentType();
   if ((contentType.indexOf("multipart/form-data") >= 0)) 
   {

      DiskFileItemFactory factory = new DiskFileItemFactory();
      // maximum size that will be stored in memory
      factory.setSizeThreshold(maxMemSize);
      // Location to save data that is larger than maxMemSize.
      factory.setRepository(new File("c:\\filesuploaded"));

      // Create a new file upload handler
      ServletFileUpload upload = new ServletFileUpload(factory);
      // maximum file size to be uploaded.
      upload.setSizeMax( maxFileSize );
    try{ 
         // Parse the request to get file items.
         List fileItems = upload.parseRequest(request);

         // Process the uploaded file items
         Iterator i = fileItems.iterator();

         while ( i.hasNext () ) 
         {
            FileItem fi = (FileItem)i.next();
           if ( !fi.isFormField () )    
            {
            // Get the uploaded file parameters
            String fieldName = fi.getFieldName();
            String fileName = fi.getName();
            boolean isInMemory = fi.isInMemory();
            long sizeInBytes = fi.getSize();
            // Write the file
            if( fileName.lastIndexOf("\\") >= 0 )
            {
                file = new File( filePath + 
                fileName.substring( fileName.lastIndexOf("\\"))) ;
            }
            else
            {
                file = new File( filePath + 
                fileName.substring(fileName.lastIndexOf("\\")+1)) ;
            }

            fi.write( file ) ;
            out.println("Uploaded Filename: " + filePath + 
            fileName );
            }
         }
      }

      catch(Exception ex) {
         System.out.println(ex);
      }
   }
    else
        System.out.println("no file");
   %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:08:04.250

问题出在这行代码中 -

> javax.servlet.ServletException：java.lang.NoClassDefFoundError：javax/servlet/ServletInputStream

看看下面的链接

[javax.servlet.ServletException：java.lang.NoClassDefFoundError：javax/servlet/ServletInputStream](https://stackoverflow.com/questions/9184500/javax-servlet-servletexception-java-lang-noclassdeffounderror-javax-servlet-se)

并检查您的 Classpath 以查看您是否添加/删除了任何新 jar 或不正确的 jar。

# java - 无法为 jButton 执行换行

> ID：13774243
> 
> 赞同：1
> 
> 时间：2012-12-08T03:43:21.630
> 
> 标签：java, swing

> **可能重复：**
> [JButton 和 JField 标签/文本？](https://stackoverflow.com/questions/7768694/jbutton-and-jfield-labels-text)

我尝试在 java swing 中为 jButton 换行。

```
 public static String newline = System.getProperty("line.separator");
private JButton getJButton_discussion() {
    if (jButton_discussion == null) {
        jButton_discussion = new JButton();
        jButton_discussion.setBounds(new Rectangle(228, 63, 344, 97));
        jButton_discussion.setText("Discussion" + newline + "A place to duscuss latest events");

    } 
```

但是，我的“讨论”和它后面的文字仍然出现在同一行。它不执行换行。任何帮助将不胜感激。

# java - 如何在 Java 中编写 sortedMap 的 values() 方法？

> ID：13774244
> 
> 赞同：0
> 
> 时间：2012-12-08T03:43:35.520
> 
> 标签：java, interface, sortedmap

我很好奇是否有人有关于如何开始编写`values()`实现 Java`sortedmap`接口的类的方法的提示。如果可能的话，示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:32:04.763

*除非您的`SortedMap`实现保留了地图值的列表（或任何其他可遍历的集合），*否则您的`values()`实现很可能就是这样（这是非常普遍的）：

```
public Collection<V> values() {
    List<V> values = new ArrayList<V>();
    for (K key: keySet()) {
        values.add(get(key));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:15:58.157

TreeMap 是 SortedMap 接口的一个实现，可能是进行一些研究的好地方：

[http://www.docjar.com/html/api/java/util/TreeMap.java.html](http://www.docjar.com/html/api/java/util/TreeMap.java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:43:16.270

重点落实`entrySet()`。完成后，请执行以下操作：

```
public Collection<V> values() {
    List<V> values = new ArrayList<V>();
    for (Map.Entry<K, V> entry : entrySet()) {
        values.add(entry.getValue());
    }
    return values;
} 
```

# c - 浮点值 - 基础知识

> ID：13774251
> 
> 赞同：-1
> 
> 时间：2012-12-08T03:44:30.493
> 
> 标签：c, floating-point, int

我对为什么浮点数可能存在**舍入错误感到困惑。**有人可以给我看一**两个例子**吗？它们的**最小值和最大值**是多少？这是否意味着我得到了最小值/最大值之间的每一个（不是每一个......如果不是多少？）数字和小数？

所以如果我想容纳一个**国家的人口**。即美国，我应该为此目的选择**整数而不是浮点数**还是它们没有效果。内存，效率，兼顾。如果不考虑，答案会是什么？人口计数将是整数。

这些问题非常初级，并且在网上有很长的详细信息，但我只是很难将它们拼凑在一起，因为它们变得非常复杂。

感谢您的时间。

PS：如果这个问题措辞不当，请通过评论告诉我。我将进行编辑，以便更清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:04:13.237

不，您~~不能不~~使用浮点数。[float](http://en.wikipedia.org/wiki/Floating_point)和 int都是32 位存储类型，并且您在范围方面一无所获。

例如，如果尝试将signed int 的最大值`2147483647`作为浮点数给你`2.14748e+09`

因此，如果是人口计数，您将丢失`3647`.

`long long`在更长范围的情况下，您可以使用的最好的方法是 64 位类型 int（ C/C++ 中的类型）。

**编辑**：

关于效率，最有效的类型始终`int`是机器的字长。

浮点数要求机器额外使用数学处理单元。

因此，如果它是 32 位机器，则 int 32 位是最快和最有效的。

# python - 这是什么编码以及如何转换它？

> ID：13774255
> 
> 赞同：1
> 
> 时间：2012-12-08T03:45:07.090
> 
> 标签：python, string, xpath, encoding, format

我正在使用 lxml 和 xpath via 从 html 标签属性中提取文本`tag.attrib['title']`。我得到：

```
MÃ¡laga Airport 
```

我在浏览器中看到的具有相同 url 的位置：

```
Málaga Airport 
```

如何将前者转换为后者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T01:01:31.943

似乎 lxml html 解析器假定字节字符串采用“latin1”编码。

因此，除非输入被编码为“latin1”（或“ascii”），否则需要明确指定编码。在这种情况下，它看起来应该是“utf-8”：

```
>>> from lxml import etree
>>>
>>> html = u"""
... <html>
... <head><title>Test</title></head>
... <body>
... <p test="Málaga">Example</p>
... </body>
... </html>
... """
>>>
>>> html = html.encode('utf-8')
>>>
>>> parser = etree.HTMLParser()
>>> tree = etree.fromstring(html, parser)
>>> print tree.xpath('//p/@test')[0]
MÃ¡laga
>>>
>>> parser = etree.HTMLParser(encoding='utf-8')
>>> tree = etree.fromstring(html, parser)
>>> print tree.xpath('//p/@test')[0]
Málaga 
```

# c# - OpenSSL.NET 创建 PFX

> ID：13774257
> 
> 赞同：1
> 
> 时间：2012-12-08T03:45:43.283
> 
> 标签：c#, openssl

这几天我一直在想办法解决这个问题。我已经放弃了。我正在尝试从 CA 的证书和私钥 PEM 文件创建 pfx。我能够创建证书和密钥，但现在我无法找出 OpenSSL.X509.PKCS12 中的最后一个参数。这是我所拥有的：

```
 private void btnCreatePFX_Click(object sender, EventArgs e)
    {
        string password = "p@ssw0rd";
        string key_path = @"certs\ca_key.key";
        string cert_path = @"certs\ca_cert.crt";
        string k = File.ReadAllText(key_path);
        string c = File.ReadAllText(cert_path);

        OpenSSL.Core.BIO key_bio = new OpenSSL.Core.BIO(k);
        OpenSSL.Core.BIO cert_bio = new OpenSSL.Core.BIO(c);

        OpenSSL.Crypto.CryptoKey key = OpenSSL.Crypto.CryptoKey.FromPrivateKey(k, "");
        OpenSSL.X509.X509Certificate cert = new OpenSSL.X509.X509Certificate(cert_bio);
        //OpenSSL.Core.Stack<OpenSSL.X509.X509Certificate> hmm = new OpenSSL.Core.Stack<OpenSSL.X509.X509Certificate>();

        var pfx = new OpenSSL.X509.PKCS12(password, key, cert, null); // <-- Problem with 4th parameter (I think)
    } 
```

我知道第四个参数需要是 OpenSSL.Core.Stack<OpenSSL.X509.X509Certificate> 但我不知道如何设置它。源代码中的测试读取一个 pfx，然后使用同一个 pfx 对象的属性来创建新的。因此，他们很容易获得返回 OpenSSL.Core.Stack<OpenSSL.X509.X509Certificate> 的访问器 OpenSSL.X509.PKCS12.CACertificates。此外，当简单地阅读 pfx 时，我看到 CACertificates 是空白的，并且有两个成员，Count 和 IsReadOnly。当我尝试创建该对象时，我不允许设置 Count 和 IsReadOnly，因为它们是只读的。将第 4 个参数设置为 null 和 "" 也不起作用！我难住了。

示例在这里：[https ://github.com/flaub/openssl-net/tree/master/test](https://github.com/flaub/openssl-net/tree/master/test)

任何帮助是极大的赞赏。在编程方面，我是一个极端的菜鸟，所以请放轻松。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:38:28.640

您需要一个新的`OpenSSL.Core.Stack<OpenSSL.X509Certificate>`. 在您的示例中，您已经拥有其中之一：

`//OpenSSL.Core.Stack<OpenSSL.X509.X509Certificate> hmm = new OpenSSL.Core.Stack<OpenSSL.X509.X509Certificate>();`

因此，您应该能够通过取消注释该行并将`hmm`其作为第四个参数传递来创建一个 PKCS12 实例。

该`Stack<X509Certificate>`参数用于将多个证书（和密钥）包含到单个文件中。您通常只包括作为验证链一部分的证书，例如您在`X509Certificate cert`参数中指定的证书的任何中间证书或 CA 证书。

PKCS12 实例上的`CACertificates`属性是已添加到 pfx 文件的证书堆栈。该属性为空白，因为没有任何证书添加到堆栈中。您可以使用实例`.Add(X509Certificate)`上的方法添加其他证书。`Stack<X509Certificate>`

您需要`Dispose()`在实例超出范围之前调用`Stack<X509Certificate>`实例（或将其包装在一个块中）。`using(...)`

# ruby-on-rails - 基于项目模型的自定义过滤器/范围

> ID：13774260
> 
> 赞同：0
> 
> 时间：2012-12-08T03:46:12.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, squeel

我会尽量简短，但需要一些细节。我正在尝试对自定义项目管理系统的重写（在 Rails 中）进行原型设计。主要目的是帮助在阿拉巴马州搬迁或扩张的公司招聘、筛选和雇用他们的员工。当前系统运行在大多数人从未听说过的 4D 和 Active4D 上。可怕的数据库，但不错的桌面客户端/服务器系统。

对于那些可能没有听说过的人，他们在阿拉巴马州制造梅赛德斯、本田和现代，这些公司的大多数员工都是通过该机构使用该系统雇用的。除了大人物之外，还有许多其他公司使用这个经济发展机构来选择他们的劳动力。该过程主要是一个以雇用x数量员工为目标的项目。候选人是从州公民中招募的。候选人经历了一个有许多阶段或阶段的选择过程——主要是申请、面试、评估、培训和雇用。每个项目都是不同的，并且可能有一些自定义阶段。每个阶段可能有许多以某种方式评分的评估（在线申请、面试成绩单等）。完成每个阶段的评估后，候选人进入下一阶段，

虽然当前的数据库结构还可以，但我们已尝试进行一些改进。下面的模型和关系是当前原型的片段，从上到下从 Citizen 到 Project。添加了一些直通关系只是为了更好地了解数据库结构。我忘了指出每个项目可能有不同的程序，这些程序通常是基于工作的。还有许多其他模型可以帮助这个管理过程（安排活动、管理讲师等），这些没有被描述。

```
class Citizen < ActiveRecord::Base
  has_one :user, :as => :loginable
  has_many :candidates
  has_many :educations
  has_many :work_histories
  has_many :skills
end
class Candidate < ActiveRecord::Base
  belongs_to :program
  belongs_to :citizen
  has_many :progressions
end
class Progression < ActiveRecord::Base
  belongs_to :candidate
  belongs_to :stage
  has_many :scores
  has_one :citizen, :through => :candidate
end
class Stage < ActiveRecord::Base
  belongs_to :program
  has_many :assessors, :dependent => :destroy
  has_many :progressions, :dependent => :destroy
  has_many :candidates, :through => :progressions
  has_many :citizens, :through => :candidates
  has_many :educations, :through => :citizens
end
class Program < ActiveRecord::Base
  belongs_to :project
  has_many :stages, :order => "sequence", :dependent => :destroy
  has_many :candidates, :dependent => :destroy
end 
```

有一个问题来了！阶段模型是系统的关键部分，因为它是选择候选人进入下一阶段的地方。由于当前的系统是在上线之前设计的，因此教育、技能、工作经历等半静态信息没有得到很好的定义，并作为评估添加到在线应用程序中 - 这导致了静态信息的重复（公民申请多个项目，并且必须重复作为其个人资料一部分的信息）。原型仍然希望评估其中的一些信息（您是否有高中文凭或 GED？）以及自定义程序特定评估（您有多少年的焊接经验？）。

我们认为我们可以编写一个过滤器搜索来筛选静态信息并将其与自定义评估分数相结合 - 说起来容易做起来。每个项目可能都在寻找不同的教育和技能要求。这几乎就像我需要为每个项目/程序自定义范围。我刚开始研究 Ransack 和 Squeel 之类的东西，它们可能会有所帮助，但是否使用相同的过滤器取决于筛查人员 - 始终如一。

在过滤器方法之前，我想向我编写的评估引擎添加一个功能，以某种方式查询静态信息，基本上是一个问题和答案并对其进行评分。问题是您将如何处理一个过滤器，该过滤器将寻找具有特定教育成就、在不同技能方面具有特定经验水平、在其当前进度中具有特定状态等的公民，然后针对不同的计划对其进行定制?

当然，我不是在寻找具体的答案，而是在寻找方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:23:00.267

很抱歉这篇文章很长，但有时你必须先写出你想要弄清楚的东西，然后才能弄清楚！

我的解决方案最终回到了我的通用评估引擎并编写了一种方法，可以对教育和其他与公民模型相关的事物进行评分。引擎通常对问题/答案表单的响应进行评分。我只需要创建一个分数对象。然后分数是选择过滤器的一部分。

我仍然想扩展过滤器功能，并且从 Ransack wiki 上的帖子中，它看起来像是创建了一个搜索对象（json？），可以捕获并可能隐藏在与项目相关的某个地方。

再次，我为长篇大论道歉。

# java - 动态策略模式

> ID：13774262
> 
> 赞同：1
> 
> 时间：2012-12-08T00:04:52.503
> 
> 标签：java, design-patterns

所以我正在编写一个 Web 服务架构，其中包括`FunctionProvider`实际处理请求的类，以及一个`Endpoint`接收请求并将请求委托给适当的主类`FunctionProvider`。

我不确切知道`FunctionProvider`运行时可用的 s ，所以我需要能够在我的主`Endpoint`类中“注册”（如果这是正确的词）它们，并查询它们以查看它们是否与传入的请求匹配。

```
public class MyFunc implements FunctionProvider{
  static {
    MyEndpoint.register(MyFunc);
  }
  public Boolean matchesRequest(Request req){...}
  public void processRequest(Request req){...}
}

public class MyEndpoint{
  private static ArrayList<FunctionProvider> functions = new ArrayList<FunctionProvider>();
  public void register(Class clz){
    functions.add(clz);
  }
  public void doPost(Request request){
    //find the FunctionProvider in functions
    //matching the request
  }
} 
```

我真的没有做太多像这样的反射 Java（上面可能是错误的，但希望能证明我的意图）。

什么是最好的方法来实现这一点而不会变得 hacky？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:25:19.850

*   不要让 FunctionProviders 自行注册。通过一些应用程序初始化引导端点。使用 FunctionProviders 列表调用。这样您就可以配置优先级（如果两个提供商都声称他们可以处理请求怎么办？）。您现在设置它的方式需要以某种方式调用该类来触发静态构造函数，这太间接了。
*   如果检测 FunctionProvider 是否支持给定请求很简单，请考虑将其作为配置的一部分。如果*这*是在请求中，则将其映射到*该*FunctionProvider。这会更好地分散关注点。如果检测很复杂，请考虑在 FunctionProvider 的单独类中进行。
*   通过配置委托/函数指针，您可能完全不需要 FunctionProvider（不确定 Java 是否/如何支持委托）。

# node.js - node.js 异步瀑布模块回调

> ID：13774271
> 
> 赞同：0
> 
> 时间：2012-12-08T03:47:39.643
> 
> 标签：node.js, asynchronous, callback, waterfall

我有这样的 node.js 代码

```
async.waterfall([
    function(callback){
        category = [{"id":1,"name":xxx},{"id":2,"name":yyy}];
        callback(null,category);
    },
    function(category,callback){
        var categoryData ={};
        _.each(category,function(item){
            categoryData[item.id] = item;        
            SolrClient.select(query,function(data){
                //data is the response from SolrClient
                categoryData[item.id]["data"] = data;
                log(categoryData);   //log1 
            },callback);
            log(categoryData);  //log2
        });
        log(categoryData); //log3
    }
]);

log1 => the data that I have added to categoryData is logged correctly
log2 => I cant get the data that is logged in the callback function to SolrClient
log3 => same as log2 
```

我知道这与变量范围或回调`SolrClient`无法访问`categoryData`之前初始化的相同`_.each`。

我浪费了很多时间来调试它，但我想我犯了一些小错误，我不知道如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:43:08.390

如果您调整日志以包含每个消息的唯一消息（例如当前旁边的评论），它们可能会出现在特定的，也许是意外的顺序中：

```
log2
log2
log3
log1
log1 
```

您遇到的问题不是范围之一；这是时机之一。函数可以随时被调用——不仅像 with 那样立即或同步调用，而且像 with 那样**“**`_.each()`稍后”*或*异步**调用**`SolrClient.select()`。

为了确保`SolrClient.select()`在继续之前完成所有查询，您可以换`_.each`出[`async.forEach`](https://npmjs.org/package/async#forEach)：

```
//...
function(category, waterfallCallback) {
    var categoryData = {};

    async.forEach(category, function (item, forEachCallback) {
        categoryData[item.id] = item;

        SolrClient.select(query, function (data) {
            categoryData[item.id]["data"] = data;
            forEachCallback(null);
        });
    }, function (err) {
        waterfallCallback(null, categoryData);
    });
}
//... 
```

# permissions - Google 网上论坛发帖权限

> ID：13774278
> 
> 赞同：2
> 
> 时间：2012-12-08T03:48:49.953
> 
> 标签：permissions, google-groups-api

我使用 GAM 和 Google Groups API 编写以下脚本：

"whoCanPostMessage":"ALL_IN_DOMAIN_CAN_POST"

默认情况下，这还包括 ALL_MEMBERS_CAN_POST。

我不希望成员能够发帖。

当你想要 ALL_IN_DOMAIN 时，有什么方法可以排除 All_Members 吗？

（我知道我可以通过 Google 管理控制台一个一个地手动完成，但这会非常乏味和耗时）

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:34:26.643

根据 Groups Settings API[文档](https://developers.google.com/google-apps/groups-settings/v1/reference/groups#resource)，此属性的可能设置是：

NONE_CAN_POST ALL_MANAGERS_CAN_POST ALL_MEMBERS_CAN_POST ALL_IN_DOMAIN_CAN_POST ANYONE_CAN_POST

正如您在测试中看到的，将此属性设置为 ALL_IN_DOMAIN_CAN_POST 还会添加 ALL_MEMBERS_CAN_POST。无法通过 API 选择 ALL_IN_DOMAIN 而不是 ALL_MEMBERS。

# jquery - 使用 MVC 在 Extjs 4 中将 JSON 数据实时传输到 Flot Panel

> ID：13774280
> 
> 赞同：1
> 
> 时间：2012-12-08T03:49:13.407
> 
> 标签：jquery, json, extjs, flot, extjs-mvc

我决定使用 Extjs 4 MVC 架构，因为我不是程序员，而且我觉得它很容易理解。我正在使用 Extjs 4 和 jquery Flot 库来显示和记录来自连接到我的串行端口的 arduino 的传感器数据。我目前有一个将传感器数据写入 json 文件的脚本。

这是我的 app.js

```
 Ext.Loader.setConfig({ enabled: true }); 
 Ext.application({

 requires: ['BC.view.chart.Chart', 'Ext.layout.container.Border', 'BC.view.chart.Flot'],

name: 'BC',
    appFolder: 'app',
controllers: ['Chart'], 

launch: function() {
    Ext.create('Ext.container.Viewport', {
        defaults: {
    collapsible: false,     
    bodyStyle: 'padding:15px'
},
    layout: 'border',
    items: [{
        title: 'Navigation',
        preventHeader: 'true',
        region:'west',
        margins: '5 0 0 0',
        cmargins: '5 5 0 0',
        width: 150,
},{
          region : "center",
          title : "Center Region",
          preventHeader: 'true',
          layout: 'fit',   
          collapsible: false,
          xtype : "tabpanel",
          defaults: {bodyStyle: 'padding: 10px;'},
              items : [        {
                  xtype: 'chart',
                  title: 'Chart'
                  }, {
                xtype: 'panel',
                title: 'Tab2',
                html : 'Content will go here'                     
              },{
                xtype: 'panel',
                title: 'Tab 3',
                html : 'Content will go here',                     
              }],
              activeTab : 0
      }
]
    });
   }
}); 
```

这是我的 JSON 数据：

```
{"data": [[1354653278712.012, 187.0], [1354653279619.884, 173.0], [1354653280619.664, 163.0], [1354653281619.913, 155.0]], "label": "Temp1"},{"data": [[1354653278712.041, 368.0], [1354653279619.907, 343.0], [1354653280619.749, 325.0], [1354653281619.938, 311.0]], "label": "Temp2"} 
```

这是模型：

```
Ext.define('BC.model.Chart', {
    extend: 'Ext.data.Model',
    fields: ['data', 'label']
}); 
```

这里是商店：

```
Ext.define('BC.store.Chart', {
    extend: 'Ext.data.Store',
    model: 'BC.model.Chart',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        url: 'data/users.json',
        reader: {
            type: 'json',
            model: 'BC.model.Chart'
        }
    }  
}); 
```

这是控制器：

```
Ext.define('BC.controller.Chart', {
    extend: 'Ext.app.Controller',

    stores: ['Chart'],
    models: ['Chart']    
    }); 
```

这是 Flot 的包装器（来自这里： [ExtJS 4 中的股票图表](https://stackoverflow.com/questions/6910681/stock-chart-in-extjs-4)）：

```
Ext.define('BC.view.chart.Flot',  {
 extend: 'Ext.Component',
 alias: 'widget.flot',

 /**
  * @cfg {number[][]} data The data to be drawn when it gets rendered
  */
 data: null,

 /**
  * @cfg {object} flotOptions
  * The options to be passed in to $.plot
  */
 flotOptions: null,

 /**
  * @property
  * The Flot object used to render the chart and to manipulate it in the future. It    will only
  * be available after the first resize event
  * You may not set this property but you are free to call methods on it
  */
 flot: null,

 initComponent: function (rerenderGraph) {
     this.callParent(arguments);
     // The only time that we're guaranteed to have dimensions is after the first resize event
     this.on('resize',  function(comp) {
         if (!this.flot) {
             this.flot = $.plot(this.getTargetEl().dom, this.data, this.flotOptions);
         } else {
             // Flot knows to look at the containers size and resize itself
             this.flot.resize();
         }
     }, this);
 } }); 
```

下面是控制器。关键部分是“数据”字段。当我直接将上述 JSON 数据粘贴在括号 ([ ]) 之间时，图表工作正常。但是，按照下面的当前设置方式（['store']），我无法显示要显示的数据，我得到一个空白的 Flot 图表。我认为这仅仅是因为没有将正确的数据格式传递给 Flot 图表。

```
Ext.define('BC.view.chart.Chart', {
   extend: 'Ext.panel.Panel',
   alias: 'widget.chart',

   name: 'Chart',
   layout: 'fit',
   store: 'Chart',

   items: [{
       xtype : "flot",
       data:  ['store']
   }]

}); 
```

在查看 Extjs 文档（[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json)）时，我正在阅读它，以便商店返回 json 文件的确切内容，您应该将存储中的 json 代理指向模型名称（BC.model.Chart - 见上文）。

很明显，没有将正确的数据格式传递给 Flot 图表。我希望有人可以帮助我解决这个问题。另外，我很好奇如何找出哪些数据正在通过存储传递到 Flot 包装器，以便我可以更轻松地进行故障排除。使用 Firebug 没有其他明显的错误。

# java - JUnit 如何知道要测试哪个类？

> ID：13774284
> 
> 赞同：2
> 
> 时间：2012-12-08T03:49:45.103
> 
> 标签：java, junit

我有两个类`Calculator1`，`Calculator2`它们位于`com.zzy.junit.user`src 文件夹下的包中。我使用 myeclipse 创建了两个测试类来分别测试它们。当我执行其中的一个测试类时，Junit4如何知道测试的是哪个类？

### 1级

```
package com.zzy.junit.user;

public class Calculator1 {

    private int a;
    private int b;

    public Calculator1(int a,int b)
    {
        this.a = a;
        this.b = b;
    }

    public int add()
    {
        return a+b;
    }
} 
```

### 2 级

```
package com.zzy.junit.user;

public class Calculator2{

    public int divide(int a,int b)
    {
        return a/b;
    }
} 
```

还有两个测试类如下：它们都在名为 test 的 src 文件夹中

### 测试类 1

```
package com.zzy.junit.user;

import static org.junit.Assert.*;
import static org.hamcrest.Matchers.*;  

import org.junit.Test;

public class TestCalculator1 {

    @Test
    public void testAdd() {
        Calculator1 s = new Calculator1(3,6);
        int z = s.add();
        assertThat(z,is(9));
    }

} 
```

### 测试类 2

```
package com.zzy.junit.user;

import static org.junit.Assert.*;
import static org.hamcrest.Matchers.*;

import org.junit.Test;

public class TestCalculator2 {

    @Test
    public void testDivide() {
        TestCalculator2 t = new TestCalculator2();
        int z = t.divide(4, 2);
        assertThat(z,is(2));
    }

} 
```

我想知道如果我执行名为 的测试类`TestCalculator2`，Junit4 怎么知道我确实想要测试`Calculator1`类。它与测试类的名称有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T08:26:09.790

JUnit 是一个用于执行可以通过或失败的测试的框架。单个测试通常集中于单个类这一事实是大多数 Java 程序员遵守的惯例。JUnit4 不*知道*正在测试哪些类，它只是执行所有用`@Test`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:13:52.330

通常是因为它的名称以“Test”结尾，或者因为它有 @Test 注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:43:26.653

根据您（之前）发布的测试代码， in 的`testAdd`方法`TestCaculator1`正在测试 in 的`add`方法，`Student`而 in 的`testDivide`方法`TestCaculator1`正在测试 in 的`divide`方法`Teacher`。

通过您上次的编辑，测试类名称现在更接近于测试类的名称。

正如另一个答案中所指出的，尽管人们倾向于按照惯例建立一对一的关系，但实际上并没有要求测试类专门用于测试特定类。

真正的联系是在方法级别，完全取决于测试方法实际执行的类。

# android - 试图学习如何使用意图和广播来杀死我的应用程序。为什么它不死？

> ID：13774286
> 
> 赞同：2
> 
> 时间：2012-12-08T03:50:10.093
> 
> 标签：android, android-intent, android-activity, alarmmanager

我几乎完成了我一直在制作的这个游戏。这是一个玩具应用程序，只是用来教我。所以我称之为 toyapp。

我正在尝试使用我学到的关于警报管理器、意图和广播的知识来杀死我的应用程序。我想出了如何让我的警报响起 10 秒，然后将消息打印到小部件。这是基于[此处](http://justcallmebrian.com/?p=129)的以下教程。

我的想法是我可以调用它，警告用户我要杀死这个应用程序然后关闭它。但是，似乎根本没有调用 AlarmReceiver？我的游戏一直在玩。

我为我的 toyapp 修改的代码如下。

```
public void timingService(Context context, Activity activity){
    // get a Calendar object with current time
     Calendar cal = Calendar.getInstance();

 // add 5 minutes to the calendar object
 cal.add(Calendar.SECOND, 5);

 Intent intent = new Intent(context, AlarmReciever.class);
 intent.putExtra("alarm_message", "Game will exit soon");

 // In reality, you would want to have a static variable for the request code instead of 192837
 PendingIntent sender = PendingIntent.getBroadcast(context, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);

 // Get the AlarmManager service
 AlarmManager am = (AlarmManager) activity.getSystemService(context.ALARM_SERVICE);
 am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);

} 
```

现在，将我的接收器代码放入我的活动类中。如下：

```
public class AlarmReciever extends BroadcastReceiver{

        @Override
        public void onReceive(Context context, Intent intent) {
            try{
                Bundle bundle = intent.getExtras();
                String message = bundle.getString("alarm_message");
                Toast.makeText(context, message, Toast.LENGTH_LONG).show(); //Give message
                toyappActivity.this.finish(); //Exit the game

            }catch(Exception e){
                Toast.makeText(context, "There was an error somewhere", Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }

        }

    }//End of AlarmReciever 
```

我对这种方法的灵感来自我[在此处](https://stackoverflow.com/questions/10750034/kill-application)阅读的以下内容。

我最终想做的很简单。我可以选择在有或没有警报的情况下玩游戏。如果检测到运动，我计划使用加速度计传感器重置警报管理器。否则，它只会倒计时然后取消游戏。

我怀疑我没有直接理解意图，但这是我的崩溃点。如果这看起来很愚蠢，我很抱歉，但我现在感冒很严重，这似乎对我有用。然而，计算机从不撒谎，只有我们的头脑。

与往常一样，你们都是最好的编码人员和开发人员。我从你们那里学到了很多，非常感谢你们的帮助。任何愚蠢的错误都是我自己的，但我希望你让我在那个技术问题上放过。

热烈的问候， GeekyOmega

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:12:14.083

警报设置正确：`am.set(...)`，它应该只被调用一次。但是您会希望屏幕上显示一条消息：

```
Toast.makeText(context, message, Toast.LENGTH_LONG).show(); //Give message 
```

这些过程将引用`:remote`不确定的上下文，因为我记得 appContext。看来您正试图从后台显示一条消息，而您的 GUI 可能会阻止它。尝试删除（评论）该 maeesage 并让

```
toyappActivity.this.finish(); //Exit the game 
```

`Log.d()`代码运行，如果你愿意，就做一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:38:15.023

AlarmManager类不是为简单的超时而设计的[。](http://developer.android.com/reference/android/app/AlarmManager.html)

从上面链接中的文档...

> **注意：**警报管理器适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。**对于正常的计时操作（滴答声、超时等），使用 Handler 更容易、更高效。**

请参阅[Handler](http://developer.android.com/reference/android/os/Handler.html)类以更有效地执行您想要的操作。

# javascript - 理解 Javascript parseFloat 行为

> ID：13774289
> 
> 赞同：3
> 
> 时间：2012-12-08T03:50:37.470
> 
> 标签：javascript, parsefloat

> **可能的重复：**
> [JavaScript 的浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

注意 - 我已经阅读了 parseFloat() 上的其他帖子，但我没有找到一个很好的解释来解释为什么会出现问题。（或者我只是不明白）。

这段代码...

```
var sum = parseFloat("1.001") + parseFloat(".001");

alert(parseFloat(sum));​ 
```

输出...

```
1.0019999999999998 
```

我读过添加`sum.toFixed(2)`将仅包含 2 个小数点。

但是，我不是 100% 理解为什么会出现这种长小数。

是否以二进制`parseFloat(sum)`表示？`sum`如果是这样，那么 1.001 不能用二进制表示，因为 1/2^x + ... 永远不能完全等于 .001 或 1/1000？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:56:09.130

这不是特定于 Javascript，而是[IEEE 浮点数](http://en.wikipedia.org/wiki/IEEE_floating_point)在内部的表示方式会导致精度错误。

我不会在这里复制内容，但是有很多资源可以帮助解释您的示例中发生了什么。

这是一个：[http ://www.petebecker.com/js/js200006.html](http://www.petebecker.com/js/js200006.html)

# macos - 问答：ANTLRWorks 3.0 mac os 版本某些符号（如竖线 '|' ）消失/无法正确显示问题

> ID：13774294
> 
> 赞同：0
> 
> 时间：2012-12-08T03:52:22.510
> 
> 标签：macos, antlr, antlr3, antlrworks, antlrv3ide

和我一样的人发现在Mac OS下很难使用ANTLRWorks 3.0，有些符号通常是竖线'|' 是看不见的。这是因为默认的mac前端在这个IDE中不兼容，这是解决这个问题的方法：

```
see answer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:52:22.510

```
1.click 'ANTLRWorks' in menue bar 
2.Select 'Preferences'
3.Select 'Editor'
4.you can see 'Font:' in the first line of 'Editor' page
5.Change Front , e.g I use Dialog 
6.Problem fixed. 
```

# visual-studio-2010 - Visual Studio 2010/2012 中的可用占位符

> ID：13774300
> 
> 赞同：3
> 
> 时间：2012-12-08T03:53:09.730
> 
> 标签：visual-studio-2010, visual-studio-2012, placeholder, class-template

在 Visual Studio 中，我们可以在许多地方使用预定义的占位符，例如，如果我们正在创建构建后事件，一些占位符可用于获取项目信息。如果我们正在查看类模板，则有一些占位符来获取项目特定的东西

```
using System;
using System.Collections.Generic;
$if$ ($targetframeworkversion$ >= 3.5)using System.Linq;
$endif$using System.Text;
$if$ ($targetframeworkversion$ >= 4.5)using System.Threading.Tasks;
$endif$
namespace $rootnamespace$
{
    class $safeitemrootname$
    {
    }
} 
```

可能是这个占位符因地而异（构建后/预构建事件命令、类模板等。）

**有没有可以找到所有可用占位符列表的来源？**

# java - java - 如何计算数组中有多少个整数元素在java中相等？

> ID：13774302
> 
> 赞同：3
> 
> 时间：2012-12-08T03:53:14.463
> 
> 标签：java, arrays, integer, counting

假设我有一个由 3 个整数组成的数组。我希望能够使用 if 语句或 for 循环从这些数组中获取这些结果。

```
[0,1,2] = 0 equal
[0,1,0] = 2 equal
[0,0,0] = 3 equal 
```

这是我到目前为止所拥有的并且它有效，但我认为它可以被简化。

```
int numequal = 0;

if(intarr[0] != null && intarr[1] != null && intarr[0].numequals(intarr[1])) {
    numequal++;
}

if(intarr[0] != null && intarr[2] != null && intarr[0].numequals(intarr[2])) {
    numequal++;
}

if(intarr[1] != null && intarr[2] != null && intarr[1].numequals(intarr[2])) {
    numequal++;
}

if(numequal == 1) {
    numequal = 2;
} 
```

另外，我试图保持基本。也许只是 for 循环。没有哈希集或字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:56:46.140

这是我的解决方案。这并不简单，但非常有效。目前它也计算空元素，如果不需要，可以很容易地修复它。

```
 Integer[] a = { null, 2, 1, null, 0, 1 };
    Arrays.sort(a, new Comparator<Integer>() {
        @Override
        public int compare(Integer o1, Integer o2) {
            if (o1 == null) {
                return -1;
            }
            if (o2 == null) {
                return 1;
            }
            return o1.compareTo(o2);
        }
    });
    // [null, null, 0, 1, 1, 2]
    int n = 0;
    Integer prev = null;
    Boolean first = null;
    for (Integer e : a) {
        if (first != null && (e == prev || e != null && e.equals(prev))) {
            if (first == Boolean.TRUE) {
                n += 2;
                first = Boolean.FALSE;
            } else {
                n++;
            }
        } else {
            first = Boolean.TRUE;
        }
        prev = e;
    }
    System.out.println(n); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:11:17.057

您可能正在寻找非常简单的解决方案，因此我尝试稍微优化您的代码：

```
int[] intarr = {'0','1','2'};
int numequal = 0; 

if(intarr[0] == intarr[1] || intarr[0] == intarr[2] ){
    numequal++;
}
if( intarr[1] == intarr[2]){
    numequal++;
}

if (numequal > 0 ){
    numequal++;
} 
```

如果您的数组被声明为`int[]`不需要检查`nulls`
`intarr[1] != null`.

如果某些项目没有设置，它将是默认的`0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-06T19:25:24.817

我相信这是最简单的方法（有些可能会有所不同）：

```
int[] x = { 1, 1, 2, 4, 6, 7, 5, 6, 4, 2, 3, 1, 6, 6, 5, 6, 5, 6, 4, 5, 9,
    7, 8, 6, 5, 4, 6 };
int rep = 0;
int finalc = 0;

for (int i = 0; i < x.length; i++) {
  int basec = 0;
  for (int j = 0; j < x.length; j++) {
    if (x[i] == x[j]) {
      basec++;
    }
  }
  if (basec > finalc) {
    finalc = basec;
    rep = x[i];
  }
}

System.out.println("The number " + rep + " is repeated " + finalc +" times"); 
```

这将打印：

```
The number 6 is repeated 8 times 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T04:04:53.307

这是一道算法题，可以优化......

我将使用非同步键值存储，对于我将 int 作为字符串的键，对于他计数的值。

首先，您将尝试获取它： hashMap.get("0") 如果它返回 null，则计数为 0，然后将其放回：hashMap.put("0", new Integer(1))。

除非你不需要，否则使用非同步版本的 hashMap，用 google 搜索它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T10:55:11.977

您可以使用 Array.sort 并很好地计算它们：

```
 int[] a = {0,1, 2, 1, 3, 0, 1 };
    int size = 0;
    int counter = 0;
    //sort it and you will get all the equal inters in a sequance.
    Arrays.sort(a);// {0,0,1,1,2,3}
    for(int i = 1; i < a.length; i++){          
        if ( a[i-1] == a[i]){
            counter++;
            if(counter  > size){
                size = counter;
            }
        }else{
            counter = 0;
        }
    }
    return size; 
```

# css - CSS中的浮动基础

> ID：13774305
> 
> 赞同：1
> 
> 时间：2012-12-08T03:53:43.697
> 
> 标签：css, css-float, html

我知道这是对浮动 CSS 布局的一种愚蠢怀疑，但我在任何地方都找不到答案。我想要一个简单的页面，中间有一个大的红色反应角，里面有 2 个蓝色方块，矩形的每一侧都有一个。我有以下 HTML 代码：

```
<body>
  <div id="rectangle">
    <div id="left"></div>
    <div id="right></div>
  </div>
</body> 
```

然后我有这个CSS：

```
 #rectangle {
            width: 600px;
            margin: auto;
            padding: 50px;
            background-color: red;
        }
        #left {
            float: left;
            width: 250px;
            height: 250px;
            background-color: blue;
        }
        #right {
            float: right;
            width: 250px;
            height: 250px;
            background-color: blue;
        } 
```

这不起作用，因为红色矩形没有调整它的高度来覆盖蓝色方块，因为我猜它们是浮动的......我知道解决这个问题的唯一方法是添加一个新的

```
<div id="footer"></div> 
```

在矩形 div 的末尾，带有样式

```
clear: both; 
```

我相信应该有一种更优雅的方式来做到这一点，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:18:04.650

只需添加`overflow: auto`到#rectangle div。

示例：http: [//jsfiddle.net/ZVJQN/](http://jsfiddle.net/ZVJQN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:02:57.320

添加清晰的 div

```
<div id="rectangle">
    <div id="right"></div>
    <div id="left"></div>
      <div class="clear"></div>
  </div>​​​​​​

.clear
{
    clear:both;
}
​ 
```

# c# - 验证文本框是 C# 中 ButtonClick 上的数字

> ID：13774306
> 
> 赞同：2
> 
> 时间：2012-12-08T03:53:42.933
> 
> 标签：c#

我目前有一个由姓名、地址、邮政编码、州和年龄组成的 WinForm。

用户输入数据后，单击“退出”按钮，确认没有字段为空白，然后将数据保存到文件中。我想添加一个邮政编码验证，确认文本框（ZipField）只包含数字。

```
 private void Btn_Click(object sender, EventArgs e)
    {

        if (String.IsNullOrEmpty(NField.Text) || String.IsNullOrEmpty(AField.Text) ||
            String.IsNullOrEmpty(ZField.Text) || String.IsNullOrEmpty(SField.Text) ||
            String.IsNullOrEmpty(AField.Text))
        {
            MessageBox.Show("Please complete", "Unable to save", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);

        return;
        }
        saveInfo();
        Form myForm = Start.getForm();
        myForm.Show();
        this.Close();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T04:12:22.590

请参阅： http: [//www.codeproject.com/Articles/13338/Check-If-A-String-Value-Is-Numeric](http://www.codeproject.com/Articles/13338/Check-If-A-String-Value-Is-Numeric)

```
public bool isNumeric(string val, System.Globalization.NumberStyles NumberStyle)
{
    Double result;
    return Double.TryParse(val,NumberStyle,
        System.Globalization.CultureInfo.CurrentCulture,out result);
} 
```

编辑：

用法

```
private void saveAndExitBtn_Click(object sender, EventArgs e)
    {
        if (!isNumeric(custZipField.Text, System.Globalization.NumberStyles.Integer))
        {
            MessageBox.Show("Please enter a valid post code", "Unable to save", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            return;
        }

        if (String.IsNullOrEmpty(custNameField.Text) || String.IsNullOrEmpty(custAddressField.Text) ||
            String.IsNullOrEmpty(custZipField.Text) || String.IsNullOrEmpty(custStateField.Text) ||
            String.IsNullOrEmpty(custAgeField.Text))
        {
            MessageBox.Show("Please complete the entire form", "Unable to save", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);

        return;
        }

        //save the data
        saveNewCustomerInfo();
        //next, retrieve the hidden form's memory address
        Form myParentForm = CustomerAppStart.getParentForm();
        //now that we have the address use it to display the parentForm
        myParentForm.Show();
        //Finally close this form
        this.Close();
    }//end saveAndExitBtn_Click method

    public bool isNumeric(string val, System.Globalization.NumberStyles NumberStyle)
    {
        Double result;
        return Double.TryParse(val, NumberStyle,
            System.Globalization.CultureInfo.CurrentCulture, out result);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:12:27.927

从技术上讲，您可以在拥有其余部分的地方包含一个快速验证：

```
try
{
    var zipCode = Convert.ToInt32(custZipField.Text);
}
catch () // Invalid input and such 
```

但是，我建议您创建模型类来保存所有这些属性（姓名、地址、年龄、邮政编码等），并使用一个名为 IsValid 的方法来验证所有这些属性并做出相应的反应。

编辑：

根据 Zeb 的回答，您可以只使用 TryParse：

```
int result;
var isNumeric = Int32.TryParse(custZipField.Text, out result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T04:26:09.367

这无需任何尝试捕获即可。

```
Int32 zipCode = 0;
Int32.TryParse(custZipField.Text , out zipCode); 
```

如果`zipCode`为零，`custZipField.Text`则为空或不是数字

# asp.net - 从 asp.net “浏览”另一个网站

> ID：13774307
> 
> 赞同：0
> 
> 时间：2012-12-08T03:53:44.073
> 
> 标签：asp.net

作为集成的一部分（不是肥皂，不是真正的休息）。我需要使用一系列格式正确的网址访问另一个网站

该系列的第一个必须是登录 url (http://server.com/login.php?u=xxx&p=yyyy

这将创建服务器端会话并对我进行身份验证。然后使用同一个会话，我可以调用接下来的几个 url 中的任何一个

例如[http://server.com/getall.php?id=123](http://server.com/getall.php?id=123) [http://server.com/findbyname.php?name=bob](http://server.com/findbyname.php?name=bob) 等

我需要一直保持一个会话打开，并且能够从每个会话中删除响应.....

我可以在服务器端（回发）或使用 javascript 的客户端（注意 - 目标服务器与我的 asp.net 服务器位于不同的域中）

谢谢

# c - Linux：从用户级进程以编程方式关闭或重新启动计算机

> ID：13774312
> 
> 赞同：2
> 
> 时间：2012-12-08T03:55:06.037
> 
> 标签：c, linux, shutdown

如何在 Linux 中以编程方式触发系统关闭或重启？最好不需要提升特权。

在旧版本（例如 Ubuntu 10.04）上，我可以使用 D-Bus 调用 HAL`org.freedesktop.Hal.Device.SystemPowerManagement.Shutdown`或`Reboot`方法。请参阅： http: [//people.freedesktop.org/~dkukawka/hal-spec-git/hal-spec.html#interface-device-systempower](http://people.freedesktop.org/~dkukawka/hal-spec-git/hal-spec.html#interface-device-systempower)。

但是 HAL 似乎已经过时，并且在 Ubuntu 12.10 中不存在。当前执行此操作的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:59:20.923

[`shutdown`](http://linux.101hacks.com/unix/shutdown/)命令。但是，这需要在大多数系统上具有 root 权限。

立即关闭：

```
shutdown -h now 
```

现在重启：

```
shutdown -r now 
```

`man shutdown`了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T04:01:48.253

您可以使用[ConsoleKit](http://freedesktop.org/wiki/Software/ConsoleKit/)。向发送`org.freedesktop.ConsoleKit.Manager.Stop`DBus 消息`org.freedesktop.ConsoleKit`。从命令行，这将是这样的：

```
dbus-发送\
    - 系统 \
    --dest=org.freedesktop.ConsoleKit \
    --type=method_call \
    --打印回复\
    --回复超时=2000 \
    /org/freedesktop/ConsoleKit/管理器\
    org.freedesktop.ConsoleKit.Manager.Stop

```

如果当前用户被授权执行关机，则不需要 root 权限。

您还可以查看[KShutdown](http://kshutdown.sourceforge.net)实用程序。它包含不同关闭方法的源代码，从 ConsoleKit 到 Gnome 和 KDE API。

# python - 读取 FCS 文件

> ID：13774315
> 
> 赞同：4
> 
> 时间：2012-12-08T03:56:06.213
> 
> 标签：python, file

我正在研究流式细胞仪。我想使用 python 解析 .fcs 文件。我在互联网上研究过有一个模块`fcm`，但那是针对 linux os 的，我正在 Windows 上工作。

我想知道如何使用 python 在 windows 中解析 .fcs 文件？
如果有人知道我如何`fcm`在 Windows 中使用也请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T05:46:41.513

Pyfcm 确实适用于 Windows。加载 fcs 文件的教程位于[http://packages.python.org/fcm/basic.html](http://packages.python.org/fcm/basic.html)。安装程序位于[http://www.lfd.uci.edu/~gohlke/pythonlibs/#py-fcm](http://www.lfd.uci.edu/~gohlke/pythonlibs/#py-fcm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T04:21:51.203

查看[FlowPy](http://flowpy.wikidot.com/)。其[下载页面](http://flowpy.wikidot.com/download-install)上列出的先决条件都链接到 Windows 二进制文件。似乎是一个不错的 FCS GUI（甚至是非 GUI）项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-06T14:41:13.540

另一个用于分析流式细胞仪数据的 python 项目是 FlowCytometryTools：[http ://gorelab.bitbucket.org/flowcytometrytools/](http://gorelab.bitbucket.org/flowcytometrytools/)

在 python 设置好所需的依赖项（matplotlib、pandas 等）后，这应该可以在任何操作系统上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-26T00:48:59.630

我是FCM代码库的维护者，原作者毕业后继承。FCM 的开发是为了支持分层 Dirichlet 过程 (HDP) 聚类算法。我最终决定将功能分成 3 个不同的库：

*   [FlowIO](https://github.com/whitews/FlowIO) : 适用于只需要读取 FCS 数据或创建新 FCS 文件的用户
*   [FlowUtils](https://github.com/whitews/FlowUtils)：用于执行基本的流功能（补偿和变换）
*   [FlowStats](https://github.com/whitews/FlowStats)：对于那些希望使用特定 HDP 聚类算法的人

除此之外，我们最近开始开发[FlowKit](https://github.com/whitews/FlowKit)，它有望成为流式细胞术分析和可视化的更高级和（希望）更直观的 Python 框架，包括 GatingML 支持。

请注意，FlowIO 和 FlowUtils 都在 PyPI 上并且可以通过 pip 安装，并且由于减少了依赖项的数量和最近的错误修复，两者都应该与包括 Windows、Mac 和 Linux 在内的所有平台更兼容。

# iphone - 如何在ios6中更改工具栏图像

> ID：13774317
> 
> 赞同：0
> 
> 时间：2012-12-08T03:56:09.427
> 
> 标签：iphone, objective-c, ios6

我对 iOS 编程很陌生。如何更改工具栏中每个项目的图像，如下图所示。工具栏位于屏幕底部。提前致谢。![工具栏](../Images/5f16416eb8a984107c29c84210245c0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:03:03.513

如果您在代码中创建 UITabBarController，请参阅 UITabBarItem 本身的方法。具体来说，`finishedSelectedImage`和`finishedUnselectedImage`

如果您在 Interface Builder 中创建 UITabBarController，请在选择选项卡栏项目时在属性检查器中查找“图像”下拉菜单。

![在此处输入图像描述](../Images/a818c980174f03459f3119e7e2d742c8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T06:13:14.790

如果您想以任何方式更改或修改选项卡栏项目，这是很有可能的。这是 ray 教程的链接，该教程介绍了如何更改`uitabbar`项目的图像和颜色，甚至是标签栏本身。希望它对你有帮助。您也可以浏览 ray 的网站以获取有关 ios 开发的更多信息。这对我很有帮助。快乐编码。

[http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)

# python - 如何使用无效的 Django 表单跳转到锚点？

> ID：13774318
> 
> 赞同：3
> 
> 时间：2012-12-08T03:56:17.040
> 
> 标签：python, html, django, django-forms, django-templates

当我的 Django 表单无法验证时，它会自动返回表单失败的页面，但我希望它转到页面上的 html 锚点。这是我的代码：

```
 def detail(request, post_id):
    p = get_object_or_404(Post, pk=post_id)
    # get all the comments for the post
    comments = p.comment_set.all().order_by('pub_date')
    # to add a comment to the post
    if request.method=='POST':
        form = CommentForm(request.POST)
        if form.is_valid():
            c = Comment()
            c.body = request.POST['body']
            c.post = p
            c.save()
            return HttpResponseRedirect(reverse('journal.views.detail', kwargs={'post_id': post_id}) + "#comment-" + str(c.id))
    else:
        form = CommentForm()
    return render(request, 'posts/detail.html', {'post': p, 'comments': comments, 'form': form})
```

该表单是博客文章底部的评论表单。当表单无效时，我希望它跳转到页面底部的评论表单的 html 锚点。现在它转到页面顶部，您必须向下滚动才能注意到有错误。

我尝试了一些不起作用的东西。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-03-18T21:29:34.420

我认为这很公平：

```
 <script>
    function goToId() {
      if (!window.location.hash) window.location = window.location + '#your-id';
    }
    {% if form.is_bound %}
      $(window).on("load", goToId);
    {% endif %}
  </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:24:52.190

一种方法是在 dict 中传递一个额外的键值对来包含锚名称，并在需要时在模板中使用 JavaScript 跳转到它。

蟒蛇方面：

```
// ...
return render(request,
              'post/detail.html',
              {
                  // ...
                  'anchor': 'comment'
              }) 
```

模板：

```
function goToOnLoadAnchor()
{
    window.location.hash('{{ anchor }}');   // Or something with the same effect
}

{% ... %}
<body onload="goToOnLoadAnchor">
{% ... %} 
```

您还可以利用自定义模板标签来增加灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T04:37:30.107

## CBV 和 jQuery

**窗体视图**

```
def form_invalid(self, form):
    return self.render_to_response(self.get_context_data(form=form, anchor='my-form')) 
```

**模板**

```
<form ... id='my-form'> ... </form>
<script>
    $(function () {
        {% if anchor %}
            $(document.body).animate({
                'scrollTop':   $('#{{ anchor }}').offset().top
            }, 2000);
        {% endif %}
    });
</script> 
```

使用 jQuery 进行滚动（而不是跳跃）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T13:34:38.243

使用香草 JavaScript：

```
{% if form.is_bound %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("your_id").scrollIntoView();
  });
</script>
{% endif %} 
```

它适用于`addEventListener("DOMContentLoaded")`听众。否则它会给出一些奇怪的结果。

# android - 无法使用 setText 更改片段 TextView

> ID：13774321
> 
> 赞同：1
> 
> 时间：2012-12-08T03:57:35.997
> 
> 标签：android, android-fragments, actionbarsherlock

我似乎无法更改片段活动中片段中的文本视图中的文本。此外，我尝试`frag.getView().findViewById`了虽然我认为是正确的方法，但返回 null 并引发 nullpointer 异常。

如果我在 Fragment 本身中编写方法来设置文本并使用 getView()，我也会得到空指针异常。

同样值得注意的是，第一个加载的片段，由片段名称调用，使用相同的代码加载和填充文本。`FragmentTransaction.replace()`仅在被调用后不起作用

下面的代码不会引发任何异常，但文本保持空白。

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if(tab.getTag().equals("info")) {
        DisplayEventInfoFragment frag = new DisplayEventInfoFragment();
        ft.replace(R.id.detailsfragment, frag);
        final TextView mTimeView = (TextView)findViewById(R.id.ievent_title);
        final TextView mVenueView = (TextView)findViewById(R.id.ievent_venue);
        final TextView mDescView = (TextView)findViewById(R.id.ievent_description);
        mTimeView.setText(thisEvent.get("theTime")+" - "+thisEvent.get("endTime"));
        mVenueView.setText(thisEvent.get("venue"));
        mDescView.setText(thisEvent.get("description"));

    } else if(tab.getTag().equals("location")) {
        //DisplayEventMapFragment frag = new DisplayEventMapFragment();
        //ft.replace(R.id.detailsfragment, frag);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T05:16:39.677

当查询一个 Fragment 的主视图或任何子视图时，你必须等到 Fragment.onCreateView() 被调用。

父 Activity 负责修改 Fragments 的布局组件似乎很奇怪。使用 Fragment 的主要优点之一是它们可以自包含并在整个应用程序中重用。

也许更可行的方法是覆盖片段的 onActivityCreated() 或 onStart()（在 onCreateView() 之后调用），并让它们在那里填充它们的 TextView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T10:56:22.477

一个工作示例：（这是edittext，不是textview，但工作原理相同）

您必须使用当前片段视图的名称才能使其工作：

在此示例中，我的 editText 从我的数据库中动态更新：

我的视图的名称是 rootView（我将其公开，以便我的方法可以访问它）：

```
public class FragmentPersonalD extends Fragment {

EditText PDADDUNIQUECODE;
EditText PDADDIDNR;
EditText PDADDNAME;
EditText PDADDSURNAME;
EditText PDADDEMAIL;
EditText PDADDAGE;
EditText PDADDGENDER;
EditText PDADDCELLNR;
EditText PDADDSERVICEPROVIDER;
EditText PDADDHOMENR;
EditText PDADDWORKNR;
EditText PDADDSTREETNAME,PDADDSUBURB,PDADDCITY, PDADDPROVINCE,PDADDPOSTALCODE;
EditText PDADDPOSTADDR;
EditText PDADDWORKADDR;

String setid;
String uniquecode;
String identitynr;
String Name;
String Surname;
String Email;
String Age;
String Gender;
String Cellnr;
String ServiceProvider;
String Homenr;
String Worknr;
String Streetname,Suburb,City,Province,PostalCode;
String PostAddr;
String WorkAddr;

View rootView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    rootView = inflater.inflate(R.layout.fragment_details_personal,
            container, false);
    fetchdata(); } 
```

我的 fetchdata() 方法如下所示：

我正在从我的数据库中动态更新我的edittext：

```
public void fetchdata()
{
    DBAdapter myDb = new DBAdapter(getActivity());
    myDb.open();

    int rows = myDb.CountrowsPersonalDetails();

    if(rows != 0)
    {
        Cursor cursor = myDb.getAllRowsPersonalDetails();
        if (cursor.moveToFirst()) {

            identitynr = cursor.getString(DBAdapter.COL_pdIDNR);
            Name = cursor.getString(DBAdapter.COL_pdNAME);
            Surname = cursor.getString(DBAdapter.COL_pdSURNAME);
            Email = cursor.getString(DBAdapter.COL_pdEMAIL);

            Age = cursor.getString(DBAdapter.COL_pdAGE);
            Gender = cursor.getString(DBAdapter.COL_pdGENDER);
            Cellnr = cursor.getString(DBAdapter.COL_pdCELLNR);
            ServiceProvider = cursor.getString(DBAdapter.COL_pdSERVICEPROVIDER);

            Homenr = cursor.getString(DBAdapter.COL_pdHOMENR);
            Worknr = cursor.getString(DBAdapter.COL_pdWORKNR);
            Streetname = cursor.getString(DBAdapter.COL_pdSTREETADDRESS);
            Suburb = cursor.getString(DBAdapter.COL_pdSUBURB);
            City = cursor.getString(DBAdapter.COL_pdCITY);
            Province = cursor.getString(DBAdapter.COL_pdPROVINCE);
            PostalCode = cursor.getString(DBAdapter.COL_pdPOSTALCODE);

            PostAddr = cursor.getString(DBAdapter.COL_pdPOSTALADDRESS);
            WorkAddr = cursor.getString(DBAdapter.COL_pdWORKADDRESS);
            }

        PDADDSTREETNAME = (EditText)rootView.findViewById(R.id.PDADDSTREETNAME);
        PDADDSTREETNAME.setText(Streetname);

        PDADDSUBURB = (EditText)rootView.findViewById(R.id.PDADDSUBURB);
        PDADDSUBURB.setText(Suburb);

        PDADDCITY = (EditText)rootView.findViewById(R.id.PDADDCITY);
        PDADDCITY.setText(City);

        PDADDPROVINCE = (EditText)rootView.findViewById(R.id.PDADDPROVINCE);
        PDADDPROVINCE.setText(Province);

        PDADDPOSTALCODE = (EditText)rootView.findViewById(R.id.PDADDPOSTALCODE);
        PDADDPOSTALCODE.setText(PostalCode);

        PDADDIDNR = (EditText)rootView.findViewById(R.id.PDADDID);
        PDADDIDNR.setText(identitynr);

        PDADDNAME = (EditText)rootView.findViewById(R.id.PDADDNAME);
        PDADDNAME.setText(Name);

        PDADDSURNAME = (EditText)rootView.findViewById(R.id.PDADDSURNAME);
        PDADDSURNAME.setText(Surname);

        PDADDEMAIL = (EditText)rootView.findViewById(R.id.PDADDEMAIL);
        PDADDEMAIL.setText(Email);

        PDADDAGE = (EditText)rootView.findViewById(R.id.PDADDAGE);
        PDADDAGE.setText(Age);

        PDADDGENDER = (EditText)rootView.findViewById(R.id.PDADDGENDER);
        PDADDGENDER.setText(Gender);

        PDADDCELLNR = (EditText)rootView.findViewById(R.id.PDADDCELL);
        PDADDCELLNR.setText(Cellnr);

        PDADDHOMENR = (EditText)rootView.findViewById(R.id.PDADDHOMENR);
        PDADDHOMENR.setText(Homenr);

        PDADDWORKNR = (EditText)rootView.findViewById(R.id.PDADDWORKNR);
        PDADDWORKNR.setText(Worknr);

        //PDADDPHYSICALADDR = (EditText)rootView.findViewById(R.id.PDADDPHYSICAL);
        //PDADDPHYSICALADDR.setText(PhysicalAddr);

        PDADDPOSTADDR = (EditText)rootView.findViewById(R.id.PDADDPOSTADDR);
        PDADDPOSTADDR.setText(PostAddr);

        PDADDWORKADDR = (EditText)rootView.findViewById(R.id.PDADDWORKADDR);
        PDADDWORKADDR.setText(WorkAddr);
        myDb.close();
    }
    else
    {
        myDb.close();
    }
} 
```

# c# - 在 WPF 中使用 StaticResource 作为 MarkupExtension 的参数会导致 NullReferenceException

> ID：13774328
> 
> 赞同：4
> 
> 时间：2012-12-08T03:58:40.580
> 
> 标签：c#, .net, wpf, xaml, markup-extensions

即使将问题简化为最少的代码，我仍然无法理解可能导致`NullReferenceException`.

创建新的**WPF 应用程序**“MarkupExtParam”。替换代码：

**MainWindow.xaml：**

```
<Window x:Class="MarkupExtParam.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:MarkupExtParam"
        Content="{Binding}">
    <Control.DataContext>
        <my:Foo/>
    </Control.DataContext>
    <Control.Resources>
        <my:Foo x:Key="foo"/>
        <DataTemplate DataType="{x:Type my:Foo}">
            <TextBlock Text="{my:Ext {StaticResource foo}}"/>
        </DataTemplate>
    </Control.Resources>
</Window> 
```

**MainWindow.xaml.cs：**

```
using System;
using System.Windows.Markup;

namespace MarkupExtParam
{
    public partial class MainWindow
    {
        public MainWindow () { InitializeComponent(); }
    }

    [MarkupExtensionReturnType (typeof(string))]
    public class ExtExtension : MarkupExtension
    {
        [ConstructorArgument ("foo")]
        public Foo Foo { get; set; }
        public ExtExtension (Foo foo) { Foo = foo; }
        public override object ProvideValue (IServiceProvider provider)
        {
            return Foo.ToString();
        }
    }

    public class Foo { }
} 
```

当我运行应用程序时，会引发以下异常：

```
System.NullReferenceException was unhandled

Message=Object reference not set to an instance of an object.
Source=System.Xaml
StackTrace:
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.GetConverterInstance[TConverterBase](XamlValueConverter`1 converter)
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CreateObjectWithTypeConverter(ServiceProviderContext serviceContext, XamlValueConverter`1 ts, Object value)
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CreateFromValue(ServiceProviderContext serviceContext, XamlValueConverter`1 ts, Object value, XamlMember property)
   at System.Xaml.XamlObjectWriter.Logic_CreateFromValue(ObjectWriterContext ctx, XamlValueConverter`1 typeConverter, Object value, XamlMember property, String targetName, IAddLineInfo lineInfo)
   at System.Xaml.XamlObjectWriter.Logic_ConvertPositionalParamsToArgs(ObjectWriterContext ctx)
   at System.Xaml.XamlObjectWriter.WriteEndMember()
   at System.Xaml.XamlWriter.WriteNode(XamlReader reader)
   at System.Windows.FrameworkTemplate.LoadTemplateXaml(XamlReader templateReader, XamlObjectWriter currentWriter)
   at System.Windows.FrameworkTemplate.LoadTemplateXaml(XamlObjectWriter objectWriter)
   at System.Windows.FrameworkTemplate.LoadOptimizedTemplateContent(DependencyObject container, IComponentConnector componentConnector, IStyleConnector styleConnector, List`1 affectedChildren, UncommonField`1 templatedNonFeChildrenField)
   at System.Windows.FrameworkTemplate.LoadContent(DependencyObject container, List`1 affectedChildren)
   at System.Windows.StyleHelper.ApplyTemplateContent(UncommonField`1 dataField, DependencyObject container, FrameworkElementFactory templateRoot, Int32 lastChildIndex, HybridDictionary childIndexFromChildID, FrameworkTemplate frameworkTemplate)
   at System.Windows.FrameworkTemplate.ApplyTemplateContent(UncommonField`1 templateDataField, FrameworkElement container)
   at System.Windows.FrameworkElement.ApplyTemplate()
   at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.ContextLayoutManager.UpdateLayout()
   at System.Windows.UIElement.UpdateLayout()
   at System.Windows.Interop.HwndSource.SetLayoutSize()
   at System.Windows.Interop.HwndSource.set_RootVisualInternal(Visual value)
   at System.Windows.Interop.HwndSource.set_RootVisual(Visual value)
   at System.Windows.Window.SetRootVisual()
   at System.Windows.Window.SetRootVisualAndUpdateSTC()
   at System.Windows.Window.SetupInitialState(Double requestedTop, Double requestedLeft, Double requestedWidth, Double requestedHeight)
   at System.Windows.Window.CreateSourceWindow(Boolean duringShow)
   at System.Windows.Window.CreateSourceWindowDuringShow()
   at System.Windows.Window.SafeCreateWindowDuringShow()
   at System.Windows.Window.ShowHelper(Object booleanBox)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run()
   at MarkupExtParam.App.Main() in d:\Docs\Projects\_Bugs\SubclassingBinding\obj\Debug\App.g.cs:line 0
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

如果我不使用 DataTemplate 并放在`<TextBlock Text="{my:Ext {StaticResource foo}}"/>`外面，一切正常。

我尝试使用 .NET Reflector 生成的 PDB 进行调试（公共资源似乎不包含任何内部类），但没有成功，因为 Reflector 无法为高度优化的程序集生成正确的 PDB，因此断点不起作用，大多数变量并且参数不可用等。我了解 XAML 解析器尝试将 StaticResourceHolder（StaticResourceExtension 的子类）分配给 Foo 并失败（但不明白为什么会发生）。

**问题：**如何解决问题？也许我只是做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:52:33.907

通过向类添加以下属性解决了问题`Foo`：

```
[TypeConverter(typeof(TypeConverter))] 
```

显然，在这种情况下，必须指定类型转换器。如果您需要该类的不同类型转换器，请不要忘记调用基方法（Convert*、CanConvert*）。`TypeConverter`似乎不存在将属性应用于构造函数参数的方法。

# mysql - MySQL 索引优化与子查询与左连接

> ID：13774329
> 
> 赞同：8
> 
> 时间：2012-12-08T03:59:10.473
> 
> 标签：mysql, sql, join, subquery

我创建了 2 个查询，我可以使用它们来执行相同的功能。它们都包含我想合并到一个查询中但我无法合并的属性。

QUERY 1 - 给了我我想要的结果。慢（~0.700 秒）

QUERY 2 - 给了我很多我忽略和跳过的行。快速（~0.005 秒）

我的目标是修改 QUERY 2 以删除除每个项目的 1 之外的所有空价格行。如果不考虑性能，我似乎无法做到这一点。这是由于我对 MySQL 中的索引使用缺乏经验和理解。

查询 1

使用设计不佳的子查询，该子查询不允许跨包含 10k 行的 tbl_sale (e) 使用索引。

```
SELECT b.id, b.sv, b.description, der.store_id, f.name, der.price
FROM tbl_watch AS a
    LEFT JOIN tbl_item AS b ON a.item_id = b.id
LEFT JOIN (
    SELECT c.store_id, d.flyer_id, e.item_id, e.price
    FROM tbl_storewatch AS c, tbl_storeflyer AS d
    FORCE INDEX ( storebeg_ndx ) , tbl_sale AS e
    WHERE c.user_id = '$user_id'
    AND (
        d.store_id = c.store_id
        AND d.date_beg = '20121206'
        )
    AND e.flyer_id = d.flyer_id
        ) AS der ON a.item_id = der.item_id
LEFT JOIN tbl_store as f ON der.store_id = f.id
WHERE a.user_id = '$user_id'
ORDER BY b.description ASC 
```

这是查询 1 的解释

```
id  select_type table       type    possible_keys   key             key_len     ref     rows    Extra
1   PRIMARY     a           ref     user_item_ndx   user_item_ndx   4           const   30  Using index; Using temporary; Using filesort
1   PRIMARY     b           eq_ref  PRIMARY         PRIMARY         4           a.item_id   1   
1   PRIMARY     <derived2>  ALL     NULL            NULL            NULL        NULL    300     
1   PRIMARY     f           eq_ref  PRIMARY         PRIMARY         4           der.store_id    1   
2   DERIVED     c           ref     user_ndx        user_ndx        4                   6   
2   DERIVED     e           ALL     NULL            NULL    NULL    NULL                9473    Using join buffer
2   DERIVED     d           eq_ref  storebeg_ndx    storebeg_ndx    8           c.store_id  1   Using where 
```

查询 2

使用非常有效的所有左连接（除了 ORDER BY）。每次连接都使用索引。此查询返回 tbl_watch 中每个项目的所有可能匹配项。这是查询：

```
SELECT b.id, b.sv, b.description, c.store_id, f.name, e.price
FROM tbl_watch AS a
LEFT JOIN tbl_item AS b ON a.item_id = b.id
LEFT JOIN tbl_storewatch AS c ON c.user_id = '$user_id'
LEFT JOIN tbl_storeflyer AS d ON d.store_id = c.store_id
    AND d.date_beg = '$s_date'
LEFT JOIN tbl_sale AS e ON e.item_id = a.item_id
    AND e.flyer_id = d.flyer_id 
LEFT JOIN tbl_store as f ON d.store_id = f.id
WHERE a.user_id = '$user_id'
ORDER BY b.description ASC 
```

这是查询的解释：

```
id  select_type     table   type    possible_keys           key             key_len     ref                     rows    Extra
1   SIMPLE          a       ref     user_item_ndx           user_item_ndx   4           const                   6       Using index; Using temporary; Using filesort
1   SIMPLE          b       eq_ref  PRIMARY                 PRIMARY         4           a.item_id               1   
1   SIMPLE          c       ref     user_ndx                user_ndx        4           const                   2   
1   SIMPLE          d       eq_ref  storebeg_ndx,storendx   storebeg_ndx    8           c.store_id,const        1   
1   SIMPLE          e       eq_ref  itemflyer_ndx           itemflyer_ndx   8           a.item_id,d.flyer_id    1   
1   SIMPLE          f       eq_ref  PRIMARY                 PRIMARY         4           d.store_id              1 
```

如何修改 QUERY 2（更高效）以提供我需要的行，就像在 QUERY 1 中使用的那样？

谢谢迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:07:15.847

我认为这个查询会给你你想要的：

```
select a.id, a.sv, a.description, c.id, c.name, b.price
  from 
    tbl_item a left outer join tbl_sale b on (a.id=b.item_id)
      left outer join tbl_storeflyer d on (b.flyer_id=d.flyer_id and d.date_beg = '20120801')
      left outer join tbl_store c on (d.store_id = c.id)
      left outer join tbl_storewatch x on (c.id = x.store_id)
      left outer join tbl_watch y on (a.id = y.item_id); 
```

如果涉及 NULL，您可能会有一些左连接。另一种方法是使用联合，使用 MySQL 可能更快：

```
 select a.id, a.sv, a.description, c.id as store_id, c.name, b.price
  from
    tbl_item a,
    tbl_sale b,
    tbl_storeflyer d,
    tbl_store c,
    tbl_storewatch x,
    tbl_watch y
  where
    a.id = b.item_id and
    b.flyer_id = d.flyer_id and
    d.store_id = c.id and
    c.id = x.store_id and
    a.id = y.item_id and
    d.date_beg = '20120801'
union
 select a.id, a.sv, a.description, null as store_id, null as name, null as price
  from
    tbl_item a
  where
    a.id not in (select b.item_id from tbl_sale b); 
```

您可能会使用联合的后半部分作为左外连接而不是“不在”子查询 - 取决于您的 MySQL 版本如何优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:01:11.197

QUERY 1 中的子选择使用隐式内连接，而查询 2 使用所有左连接显式连接。因此，在查询 2 中没有排除数据的 where 子句。我会在几行中取出 LEFT（如标记），看看这如何改进：

```
SELECT b.id, b.sv, b.description, c.store_id, f.name, e.price
FROM tbl_watch AS a
LEFT JOIN tbl_item AS b ON a.item_id = b.id
LEFT JOIN tbl_storewatch AS c ON c.user_id = '$user_id'
-- Left removed below
JOIN tbl_storeflyer AS d ON d.store_id = c.store_id
    AND d.date_beg = '$s_date'
-- Left removed below
JOIN tbl_sale AS e ON e.item_id = a.item_id
    AND e.flyer_id = d.flyer_id 
LEFT JOIN tbl_store as f ON d.store_id = f.id
WHERE a.user_id = '$user_id'
ORDER BY b.description ASC` 
```

您还可以考虑将 and 子句从连接中取出并将它们移动到 WHERE：

```
SELECT b.id, b.sv, b.description, c.store_id, f.name, e.price
FROM tbl_watch AS a
LEFT JOIN tbl_item AS b ON a.item_id = b.id
LEFT JOIN tbl_storewatch AS c ON c.user_id = '$user_id'
JOIN tbl_storeflyer AS d ON d.store_id = c.store_id
JOIN tbl_sale AS e ON e.item_id = a.item_id
LEFT JOIN tbl_store as f ON d.store_id = f.id
WHERE a.user_id = '$user_id'
AND d.date_beg = '$s_date'
AND e.flyer_id = d.flyer_id 
ORDER BY b.description ASC 
```

最后，日期数学相当密集。在查询 2 中，使用外连接可以避免很多，但您可能需要它。我会尝试使用子查询来获取 id 并通过它来限制：

```
SELECT b.id, b.sv, b.description, c.store_id, f.name, e.price
FROM tbl_watch AS a
LEFT JOIN tbl_item AS b ON a.item_id = b.id
LEFT JOIN tbl_storewatch AS c ON c.user_id = '$user_id'
JOIN tbl_storeflyer AS d ON d.store_id = c.store_id
JOIN tbl_sale AS e ON e.item_id = a.item_id
LEFT JOIN tbl_store as f ON d.store_id = f.id
WHERE a.user_id = '$user_id'
AND e.flyer_id = d.flyer_id 
AND d.id in  (select d.id from d where date_beg = '$s_date')
ORDER BY b.description ASC 
```

# php - 有什么“有趣”的交互式主页的好例子吗？这里有关于创建这种交互性的教程吗？

> ID：13774333
> 
> 赞同：0
> 
> 时间：2012-12-08T03:59:42.320
> 
> 标签：php, javascript, jquery, html, interactive

不太确定这是否是这个问题的完美论坛。尽管如此，我想在我的主页上加入一些互动的东西。通过交互，我的意思是用户可以点击或折腾的东西或粒子发射器或类似的东西......

**有谁知道我可以从中学习的任何好的例子？或者更好的是，关于各种方法的教程？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:26:09.167

就像@NullPointer 所说，**这是一个问答网站，而不是论坛……您可以在**[Google](https://www.google.com.cu/search?q=interactive+examples+websites)上找到很多资源。但是，您应该检查此列表：

### 示例和代码：

*   * [CodePen](http://codepen.io/) : 画布动画、Javascript 游戏和[令人敬畏的 blob 效果](http://codepen.io/flash-monkey/pen/hoJbf)

### 阅读

*   [Web 交互性的重要性：提示和示例](http://www.hongkiat.com/blog/importance-of-web-interactivity-tips-and-examples/)

### 网站展示：

*   [互动网站的 10 个示例](http://graphicswing.com/10-examples-of-interactive-websites/)

# android - 在android中画布画线

> ID：13774336
> 
> 赞同：0
> 
> 时间：2012-12-08T04:00:45.000
> 
> 标签：android, google-maps, android-canvas, google-maps-api-2, google-polyline

大家好，我正在尝试在地图上的两点之间绘制折线，但是当我运行我的方法时，它会给出下面列出的错误。我已将错误范围缩小到：

```
canvas.drawLine(p1.x, p1.y, p2.x, p2.y, mPaint); 
```

这是我的班级正在尝试绘制

```
package com.example.hellogooglemap;

class MyOverlay extends Overlay{
  private Projection projection;
  Paint mPaint;
  Context mContext;
  List<GeoPoint> gpList;

public MyOverlay(List<GeoPoint> geopointList, Context context) {
      super();
      mContext = context;
      gpList = geopointList;

      Paint   mPaint = new Paint();
      mPaint.setARGB(255, 10, 10, 255);
      mPaint.setAntiAlias(true);
      mPaint.setFakeBoldText(true); 

        //Toast.makeText(mContext, gpList.get(0).toString() , Toast.LENGTH_SHORT).show();
}

@Override
public void draw(Canvas canvas, MapView mapv, boolean shadow){  
    projection = mapv.getProjection();

    Point p1 = new Point();
    Point p2 = new Point();        

    projection.toPixels(gpList.get(0), p1);
    projection.toPixels(gpList.get(1), p2);

    canvas.drawLine(p1.x, p1.y, p2.x, p2.y, mPaint);        

    super.draw(canvas, mapv, shadow);
    }

} 
```

这是错误

```
12-08 03:50:05.559: E/AndroidRuntime(1804): FATAL EXCEPTION: main
12-08 03:50:05.559: E/AndroidRuntime(1804): java.lang.NullPointerException
12-08 03:50:05.559: E/AndroidRuntime(1804):     at android.graphics.Canvas.drawLine(Canvas.java:876)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at com.example.hellogooglemap.MyOverlay.draw(MyOverlay.java:56)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at com.google.android.maps.Overlay.draw(Overlay.java:179)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at com.google.android.maps.MapView.onDraw(MapView.java:532)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at android.view.View.draw(View.java:13707)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at android.view.View.draw(View.java:13591)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at android.view.View.draw(View.java:13589)
12-08 03:50:05.559: E/AndroidRuntime(1804):     at android.view.ViewGroup.drawChild(ViewGroup.java:2928) 
```

任何帮助将不胜感激。我已经坚持了一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:13:47.820

在这一行：

```
Paint   mPaint = new Paint(); 
```

您正在分配给一个局部变量，而不是一个类。只需删除领先的“油漆”

```
mPaint = new Paint(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:05:40.567

也许您可以尝试[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/?hl=es)，因为 v1 已被弃用。

# php - Mysql 查询不是工作属性

> ID：13774337
> 
> 赞同：-1
> 
> 时间：2012-12-08T04:01:02.887
> 
> 标签：php, mysql

我是 PHP 新手，这是一个学习过程。现在我已经厌倦了解决这个问题。我有一个 mysql 数据库，其中有几行退出。喜欢 ：

```
1) pro_no_sleep  2) pro_country 3) pro_state 4) pro_city etc.. 
```

当我运行查询以获取此数据库内容时，它不会显示重复的值内容。例如。在我的**pro_no_sleep**行 2 值是相同的：像**1**

```
pro_no_sleep
1
1
2
3 
```

因此，当我使用 php 运行以下查询时，它不会显示重复值内容。它只显示独特的价值内容。比如2和3。

```
$search = mysql_query("SELECT * FROM property_step1 WHERE pro_no_sleep = '$people' OR 
pro_country = '$country' OR pro_state = '$region' OR pro_city = '$destination'"); 
```

我没有在查询中使用**%**登录，因为 html 表单表具有来自选择标记的固定值。

php代码：

```
<?php
if (isset($_GET['Submit']) && $_GET['Submit'] == "Search") {
    require_once("func.php");
    $people      = mysql_real_escape_string(htmlspecialchars(trim($_GET['people'])));
    $country     = mysql_real_escape_string(htmlspecialchars(trim($_GET['country'])));
    $region      = mysql_real_escape_string(htmlspecialchars(trim($_GET['region-depart'])));
    $destination = mysql_real_escape_string(htmlspecialchars(trim($_GET['destination'])));
    $from        = mysql_real_escape_string(htmlspecialchars(trim($_GET['from'])));
    $to          = mysql_real_escape_string(htmlspecialchars(trim($_GET['to'])));
    $upload      = "user/content/uploaded";

    $search = mysql_query("SELECT * FROM property_step1 WHERE pro_no_sleep = '$people' OR pro_country = '$country' OR pro_state = '$region' OR pro_city = '$destination'");

    $num = mysql_num_rows($search);

    if ($num == 1) {
        echo "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" . $num . " result found.";
        while ($result = mysql_fetch_array($search)) {
            echo "<div id='rightsearch'>";
            $propertyid     = (int) $result['propertyid'];
            $getimg         = mysql_query("SELECT * FROM property_step3 WHERE propertyid = 
            '$propertyid' ORDER BY imgname LIMIT 1");
            $protitle_d     = $result['pro_title'];
            $country_d      = $result['pro_country'];
            $region_d       = $result['pro_state'];
            $destination_d  = $result['pro_city'];
            $pro_des_d      = $result['pro_des'];
            $pro_type_d     = $result['pro_type'];
            $pro_no_bed_d   = $result['pro_no_bed'];
            $pro_no_bath_d  = $result['pro_no_bath'];
            $pro_no_sleep_d = $result['pro_no_sleep'];
            $getreview      = mysql_query("SELECT rating FROM property_review WHERE p_id = '$propertyid'");
            $num_review     = mysql_num_rows($getreview);

            while ($reimg = mysql_fetch_array($getimg)) {
                $img = $reimg['imgname'];
                echo "<a href='details.php?propertyid=$propertyid'>";
                echo '<img src="' . $upload . '/' . $img . '" width="' . 100 . '" height=" ' . 100 . '"  />';
                echo "</a>";
            }

            echo "<h2>$protitle_d</h2>";
            echo "<p>$country_d, $region_d, $destination_d</p>";
            //echo myTruncate($pro_des_d, 100) . "<br/>";                       
            echo $pro_des_d . "<br/>";
            echo "<h5>$pro_type_d, $pro_no_bed_d bedroom";
            if ($pro_no_bed_d > 1) {
                echo $plural = "s";
            }
            echo ",";
            echo " $pro_no_bath_d bath";
            if ($pro_no_bath_d > 1) {
                echo $plural2 = "s";
            }
            echo ",";
            echo " $pro_no_sleep_d sleep";
            if ($pro_no_sleep_d > 1) {
                echo $plural3 = "s";
            }
            echo "</h5>";
            echo "$num_review review";
            echo "</div>";
        } // first while statement
    } // second if statment
    else {
        echo "<div id='rightsearch'>";
        echo "No result found";
        echo "</div>";
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:45:53.070

这是你的问题：

```
$num = mysql_num_rows($search);

    if ($num == 1) {
        echo "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" . $num . " result found.";
        while ($result = mysql_fetch_array($search)) {
... 
```

`mysql_num_rows`返回结果中的行数。所以你检查结果是否只包含一行，遍历所有行（记住，只有一个！）并做一些事情。

您需要做的是检查结果是否*至少*包含一行。

```
if ($num >= 1) { 
```

# javascript - 响应 Div 滚动

> ID：13774339
> 
> 赞同：1
> 
> 时间：2012-12-08T04:01:15.867
> 
> 标签：javascript, jquery, css, html

我正在尝试复制[耐克网站](http://store.nike.com/us/en_us/?l=shop,men_nikeid.)上的浮动搜索选项栏。当一个人滚动到足够远以到达选项栏的底部时，它的位置似乎固定在底部，而当一个人到达选项栏的顶部时，当向上滚动时，它的位置固定在顶部。

我确信这是一个简单的 jquery 脚本，但作为一个新手，我无法弄清楚这是如何完成的。

这是我正在使用的 jQuery 脚本：

```
google.load("jquery", "1");

function sticky_relocate() {

    var window_top = $(window).scrollTop();

    var div_top = $('#sticky-anchor').offset().top;

    if (window_top > div_top)    
        $('#sticky').addClass('stick')
    else    
        $('#sticky').removeClass('stick');

}

google.setOnLoadCallback(function() {

    $(window).scroll(sticky_relocate);    
    sticky_relocate();

}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:36:48.730

看起来很简单，当您滚动检查它是向上还是向下时。

如果它向下，则让它随着页面滚动，直到它到达底部，然后固定位置。

如果你要上去，基本上做同样的事情。滚动页面直到您到达顶部，然后它会停留。

您是否尝试过为此编写代码？另外，您可以发布您的页面源代码，以便我也可以尝试编写代码吗？

# grails - 如何在 grails 中将“javax.servlet.http.Cookie”转换为“org.apache.http.cookie.Cookie”

> ID：13774340
> 
> 赞同：2
> 
> 时间：2012-12-08T04:01:17.223
> 
> 标签：grails, cookies, groovy

我正在尝试从 grails 服务中的请求中提取一个 cookie，如下所示：

```
def cookies = RequestContextHolder.currentRequestAttributes().getCurrentRequest().getCookies(); 
```

这样我就可以将它放回我传递给 Web 服务的请求中。不幸的是，我上面得到的 cookie 是 javax.servlet.http.Cookie，当我想将 cookie 添加到 RESTClient 时，如下所示：

```
for (int i=0; i<cookies.length; i++) {
    client.client.cookieStore.addCookie(cookies[i])
} 
```

我发现 addCookie 需要一个 org.apache.http.cookie.Cookie，我希望我不必进行完整的转换。谁能给我一些关于处理这个问题的最佳方法的建议？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-09T23:12:18.827

链接到现在已死的 URL 的另一个答案。此 URL 上托管的解决方案是 Sandeep Gupta 的 Apache 许可脚本。

该解决方案基本上涉及使用公共吸气剂复制每个属性。

```
/**
 * Copyright (C) 2010, Sandeep Gupta
 * http://www.sangupta.com
 * 
 * The file is licensed under the the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * 
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 */
package com.sangupta.util;

import java.util.Date;

import javax.servlet.http.Cookie;

/**
 * Utility class to help convert Cookie objects between Java Servlet Cookie's
 * and Apache HttpClient Cookie's. 
 * 
 * @author sangupta
 * @version 1.0
 * @since 30 Oct 2010
 */
public class ApacheCookieUtils {

 /**
  * Method to convert an Apache HttpClient cookie to a Java Servlet cookie.
  * 
  * @param apacheCookie the source apache cookie
  * @return a java servlet cookie
  */
 public static Cookie servletCookieFromApacheCookie(org.apache.commons.httpclient.Cookie apacheCookie) {
  if(apacheCookie == null) {
   return null;
  }

  String name = apacheCookie.getName();
  String value = apacheCookie.getValue();

  Cookie cookie = new Cookie(name, value);

  // set the domain
  value = apacheCookie.getDomain();
  if(value != null) {
   cookie.setDomain(value);
  }

  // path
  value = apacheCookie.getPath();
  if(value != null) {
   cookie.setPath(value);
  }

  // secure
  cookie.setSecure(apacheCookie.getSecure());

  // comment
  value = apacheCookie.getComment();
  if(value != null) {
   cookie.setComment(value);
  }

  // version
  cookie.setVersion(apacheCookie.getVersion());

  // From the Apache source code, maxAge is converted to expiry date using the following formula
  // if (maxAge >= 0) {
        //     setExpiryDate(new Date(System.currentTimeMillis() + maxAge * 1000L));
        // }
  // Reverse this to get the actual max age

  Date expiryDate = apacheCookie.getExpiryDate();
  if(expiryDate != null) {
   long maxAge = (expiryDate.getTime() - System.currentTimeMillis()) / 1000;
   // we have to lower down, no other option
   cookie.setMaxAge((int) maxAge);
  }

  // return the servlet cookie
  return cookie;
 }

 /**
  * Method to convert a Java Servlet cookie to an Apache HttpClient cookie.
  * 
  * @param cookie the Java servlet cookie to convert
  * @return the Apache HttpClient cookie
  */
 public static org.apache.commons.httpclient.Cookie apacheCookieFromServletCookie(Cookie cookie) {
  if(cookie == null) {
   return null;
  }

  org.apache.commons.httpclient.Cookie apacheCookie = null;

  // get all the relevant parameters
     String domain = cookie.getDomain();
     String name = cookie.getName();
     String value = cookie.getValue();
     String path = cookie.getPath();
     int maxAge = cookie.getMaxAge();
     boolean secure = cookie.getSecure();

     // create the apache cookie
     apacheCookie = new org.apache.commons.httpclient.Cookie(domain, name, value, path, maxAge, secure);

     // set additional parameters
     apacheCookie.setComment(cookie.getComment());
     apacheCookie.setVersion(cookie.getVersion());

     // return the apache cookie
     return apacheCookie;
 }

} 
```

# haskell - 当前，在haskell中计算字符串中大写字符的正确方法？

> ID：13774341
> 
> 赞同：1
> 
> 时间：2012-12-08T04:01:20.797
> 
> 标签：haskell

所以我希望完成与以下功能相同的事情，但由于它需要 Haskell 98 模块，我认为我不能在实验室机器上使用它。

```
length (filter (isUpper) "SomE RanDOm STRing") 
```

我知道这是一个简单的问题，但 google-fu 并没有产生多少，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:07:42.987

你做过：

```
import Data.Char 
```

看起来 isUpper 函数现在在那里。

# oracle - 使用 Ant 编译 Jdbc

> ID：13774349
> 
> 赞同：0
> 
> 时间：2012-12-08T04:02:12.777
> 
> 标签：oracle, ant, sqlplus

我正在使用以下 ant 脚本进行 jdbc 编译。

```
<sql driver="oracle.jdbc.driver.OracleDriver"
url="jdbc:oracle:thin:@10.184.133.133:1521:SUPP"
userid="${UsernameB}"
password="${PasswordB}"
onerror="continue"
delimitertype="row"
delimiter="/"
keepformat="yes"> 
```

我有一个包含以下内容的文件：

> 为 CIVW 创建或替换同义词 CIVWS；
> /

上面的编译失败并出现以下错误。

```
java.sql.SQLSyntaxErrorException: ORA-00911: invalid character 
```

我知道分隔符是 / ，因此 sql 语句后的分号导致了问题。像这样的文件有数百个，都可以在 sqlplus 中正确编译。但是使用 jdbc 失败。我现在无法更改代码。是否有任何解决方法。我无法将分隔符更改为 ; 还。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T13:40:48.553

1.  首先，您可以尝试使用`... delimiter=";" delimitertype="row" ...`并确保包含“;”的 pl/sql 块被一些“;”分隔 在单行上（只有一个换行符紧随其后 - 从而触发它作为单个语句执行）。

2.  如果你不能添加“;” 手动，尝试将源文件复制到某个 tmp 目录，并尝试手动或通过一些自动正则表达式替换（例如，使用带有正则表达式替换过滤器的 ant 复制任务）来更改它们。（例如，如果幸运的话，替换匹配`^(.*end\s*;?)(.*)$`的行就足够了）`\1\n;\n\2`

3.  插入“;”的另一种解决方案 - 单行分隔符可能是将这些块放在单独的文件中（可能是自动的）并通过`<sql><transaction src="<yoursqlfile>.sql" /> <!--...--> </sql> <!--...-->"`ANT 任务执行它们。

# java - 语法错误，插入“}”以完成 ClassBody？

> ID：13774350
> 
> 赞同：-1
> 
> 时间：2012-12-08T04:02:41.403
> 
> 标签：java, syntax-error

出于某种原因，我收到一个语法错误，上面写着“语法错误，插入“}”以完成 ClassBody。” 我检查了每一种方法，每条语句，以确保我有完整的左括号和右括号，所以我不知道为什么会这样。谁能告诉我为什么我可能会遇到这个问题？

将代码复制到另一个文件中并不能解决问题，也不能转到 Project > Clean。

```
import java.util.Scanner;

public class jloneman_Numerology
{
    private String[] report;
    private int day, month, year, num;

    public jloneman_Numerology()
    {
        introduction();
        report = new String[9];
        num = 0;
    }

    public void introduction()
    {
        System.out.println("Welcome to ACME Numerology Reports! We will " +
                "determine your special\nnumerology report based on your " +
                "birth date.\n");
    }

    public void getDate()
    {
        char slash1, slash2;

        do
        {
            System.out.print("Please enter your birth date (mm / dd / yyyy): ");
            Scanner in = new Scanner(System.in);
            String date = in.nextLine();

            month = in.nextInt();
            day = in.nextInt();
            year = in.nextInt();

            slash1 = date.charAt(3);
            slash2 = date.charAt(8);
        } while (validDate(slash1, slash2) == false);

        calcNum();
    }

    public boolean validDate(char slash1, char slash2)
    {
        boolean isValid = true;

        // Check for valid month
        if (month < 1 || month > 12) 
        {
            isValid = false;
            System.out.printf("Invalid month: %d\n", month);
        }

        // Check for valid day
        if (day < 1 || day > 31)
        {
            isValid = false;
            System.out.printf("Invalid day: %d\n", day);
        }

        // Check for months with 30 days, else 31 days = invalid
        if ((month == 4 || month == 6 || month == 9 || month == 11) && (day < 1 || day > 30))
        {
            isValid = false;
            System.out.printf("Invalid day: %d\n", day);
        }
        else if (day < 1 || day > 31)
        {
            isValid = false;
            System.out.printf("Invalid day: %d\n", day);
        }

        // Check for valid year
        if (year < 1880 || year > 2280) 
        {
            isValid = false;
            System.out.println("Please enter a valid year between 1880 and 2280.");
        }

        // Check for correct separating character
        if (slash1 != '/' || slash2 != '/')
        {
            isValid = false;
            System.out.println("Invalid separating character, please use forward slashes");
        }

        if (leapYear() == true)
        {
            if (month == 2 && day > 29)
            {
                isValid = false;
                System.out.printf("Invalid day for 2/%d: %d", year, day);
            }
        }

        return isValid;
    }

    public boolean leapYear()
    {
        boolean isLeap;

        if (year % 4 == 0 && year % 400 != 0)
            isLeap = false;
        else
            isLeap = true;

        return isLeap;
    }

    public void calcNum()
    {
        // Separate each digit of the date and add to a single number

        // Test number for debugging
        num = 5;
    }

    public void printReport()
    {
        report[0] = ":1: ";
        report[1] = ":2: ";
        report[2] = ":3: ";
        report[3] = ":4: ";
        report[4] = ":5: ";
        report[5] = ":6: ";
        report[6] = ":7: ";
        report[7] = ":8: ";
        report[8] = ":9: ";

        System.out.println(report[num]);
    }
}

                                                                                                                                                  78,0-1        Bot 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T04:15:00.640

尝试删除（或注释掉）一种方法，看看问题是否仍然存在。如果是，请删除或注释掉其他方法，依此类推，直到错误消失。然后恢复除最后一种方法之外的所有内容。

如果错误没有再次出现，则问题可能出在最后一种方法中。

如果它*再次*出现，问题就更微妙了；也许是嵌入在代码中的控制字符。尝试将代码复制并粘贴到纯文本编辑器中（这样任何控制字符都将被忽略，保存并重新编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T18:03:15.527

我也有这个错误。上面的代码中没有错误（当我将上面的代码用作子类时）。我通过清理 IDE 的工作区并确保调用者正常工作来纠正我的错误。

*   项目设置
*   运行设置
*   确保正确列出 main
*   公共静态 void main(String[] args) { ... }

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-05-19T06:34:21.313

我遇到了类似的问题，通过删除类文件来解决它，然后再次重新创建文件并粘贴相同的代码。有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-01-04T23:48:36.173

把 拿出来`System.out.println`放到主函数里面，而不是`introduction()`放在里面`main(String[] args)`。

# android - 在 Android 4.2 快速设置面板中添加项目

> ID：13774353
> 
> 赞同：4
> 
> 时间：2012-12-08T04:03:19.883
> 
> 标签：android

我只想制作一个电池温度监视器并将其显示在快速设置面板中，就像在 Google+ 中一样。

是否可以在其上添加项目？如何？

![在此处输入图像描述](../Images/fbc5df0316e548fbb5b06d3ae4d87008.png)

建议将不胜感激。谢谢

**编辑**：将“新通知栏”更改为“快速设置面板”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:14:21.147

这是快速设置面板，而不是通知面板。不允许 Google+ 修改或添加到此面板，也不允许任何其他下载的应用程序。

显示的个人资料图片是系统创建的专用“我”个人资料的一部分，G+ 应用程序将联系人信息同步到该个人资料中。G+ 应用无法定义此磁贴或当您从该面板点击它时所采取的操作。点击个人资料图标时显示的联系人卡片由系统的人脉应用程序托管，任何其他应用程序都可以将联系人数据注入该应用程序，而不是 G+ 应用程序。

# jquery - 首次按下后延迟另一个按键 XXX 毫秒

> ID：13774363
> 
> 赞同：0
> 
> 时间：2012-12-08T04:05:05.843
> 
> 标签：jquery, delay, keydown

我正在努力寻找一种在 keydown 事件后添加短暂 200 毫秒延迟的方法。

这是为了防止有人一个接一个地按得太快。

这是当前的代码：

```
$(document).keydown(function (e) {
   if ($(e.target).is('input')) { e.stopPropogation(); }
   else if (e.keyCode == 37) { $(".pageback").click(); return false; }
   if (e.keyCode == 39) { $(".pagenext").click(); return false; } 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:19:03.797

您无法阻止某人过快地按下该键，并且阻止消息的出现可能是不明智/不可能的。但是，您可以跟踪自上次按键以来的时间，如果太早，则忽略该消息：

```
var last_time = null;
$(document).keydown( function (e) {
    var now = new Date().getTime(),
        diff;
    if ($(e.target).is('input')) { 
        e.stopPropogation(); 
    } else if (e.keyCode == 37 || e.keyCode == 39) { 
        if( last_time != null ) {
            diff = now - last_time;
            if( diff < 200 ) {
                return false;   // do nothing
            }
        }
        last_time = now;
        if (e.keyCode == 39) { 
            $(".pageback").click(); 
            return false; 
        } if (e.keyCode == 39) { 
            $(".pagenext").click(); 
            return false;
        } 
    } 
}); 
```

每次按下一个键，都会检查自上次成功按下以来的时间，如果有足够的延迟，则记录当前时间并继续。否则，辍学。

有道理？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:21:46.587

```
var timer;

$(document).on('keydown', function (e) {
   clearTimeout(timer);

   timer = setTimeout(function() {
       if ($(e.target).is('input')) { 
           e.stopPropogation(); 
       }else if (e.keyCode == 37) { 
           e.preventDefault();
           $(".pageback").click(); 
       }

       if (e.keyCode == 39) { 
           e.preventDefault();
           $(".pagenext").click();
       } 
   }, 200);
}); 
```

使用一个简单的超时，在按下一个键时清除，这样如果用户每 200 毫秒键入一个键，该函数就不会执行。

# c# - 为测试数据库传入一个新的连接字符串

> ID：13774364
> 
> 赞同：1
> 
> 时间：2012-12-08T04:05:22.430
> 
> 标签：c#, .net-3.5, tdd, nunit, connection-string

我有一个带有 DAL 的 asp.net 项目（大多数代码来自其他人，但我正在维护和清理）。

我的 web 应用程序项目有一个 dataprovider 类，如下所示：

```
public class DataProvider : IDataProvider
{
     private string DefaultConnectionString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings[ConfigurationManager.AppSettings["myConnection"]].ConnectionString;
        }
    }

    public T ExecuteMyQuery<T>(parameters)
    {
          //executes query on db
    } 
```

这个 Web 应用程序项目有一个数据层，它在网页和提供者之间进行交互，如下所示：

```
public class MyData : IMyData
{
    private readonly IDataProvider dataProvider;

    public MyData(IDataProvider dataProvider)
    {
        this.dataProvider = dataProvider;
    }

    public string GetTitle(string myVar)
    {
        //builds up stuff to send

         return this.dataProvider.ExecuteMyQuery(...);
     }
 } 
```

此项目的连接字符串在 web.config 中。

现在我有我的测试。为了简单和时间限制，我只使用一个测试数据库，并将创建实际的对象并针对测试数据库进行测试（理论上我们会使用更多的模拟、存根和各种东西，但没有时间。）

所以我有一个测试项目，它引用了我上面的 Web 应用程序项目。

```
public class MyTests
{
    private MyData myData;
    private DataProvider dataProvider;

    [SetUp]
    protected void SetUp()
    {
        dataProvider = new DataProvider();
        mysData = new MyData(dataProvider);   
    }

    [Test]
    public void CheckTitles()
    {
        string title = myData.GetTitle("AVariable");

        Assert.AreEqual(title, "A typical title");
    } 
```

但是当我在 NUnit 中运行它时，这总是给我一个空指针执行。如何让我的提供商使用新的连接字符串来指向我的测试数据库？我尝试添加了一个 app.config 文件，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:34:39.587

运行测试时，默认情况下，您的 app.config（它是 web.config 的副本）似乎没有作为配置文件加载。

我宁愿通过以下方式解决这个问题：

1.  创建`IConfiguration`接口，封装获取connectionString的细节

    ```
     public interface IConfiguration {
            string MyConnectionString { get; }
        } 
    ```

2.  创建`IConfiguration`读取`web.config`以在实际代码中使用它的实现）

    ```
    public class Configuration : IConfiguration
    {
        public string MyConnectionString
        {
            get { return ConfigurationManager.ConnectionStrings[ConfigurationManager.AppSettings["myConnection"]].ConnectionString; }
        }
    } 
    ```

3.  在类中引入`IConfiguration`依赖`DataProvider`

    ```
    public class DataProvider : IDataProvider
    {
        private IConfiguration configuration;

        public DataProvider(IConfiguration configuration)
        {
            this.configuration = configuration;
        }

        private string DefaultConnectionString
        {
            get
            {
                return configuration.MyConnectionString;
            }
        }

        ...
    } 
    ```

    `web.config`简单的重构从你的`DataProvider`:)中提取有关阅读的知识

4.  在您的测试中使用`IConfiguration`存根，它返回您测试所需的任何连接字符串。（您可以使用 moq/rhino-mock 之类的模拟框架或`IConfiguration`不读取 app.config 的实现来创建存根）

    ```
    public class MyTests
    {
        private MyData myData;
        private DataProvider dataProvider;
        private IConfiguration configuration;

        [SetUp]
        protected void SetUp()
        {
            // e.g. here stub is created via Moq
            var configurationMock = new Mock<IConfiguration>();
            configurationMock.SetupGet(x => x.MyConnectionString).Returns("test connection string");
            configuration = configurationMock.Object;

            dataProvider = new DataProvider(configuration);
            mysData = new MyData(dataProvider);   
        }

        ...
    } 
    ```

如果阅读`web.config`不是您的测试目标，那么这种方法就是您所需要的。
作为关于配置阅读的额外知识进入单独的课程:)

# php - 如何使用 cron、PHP 和 MySQL 代码删除具有多个搜索词的记录

> ID：13774367
> 
> 赞同：3
> 
> 时间：2012-12-08T04:05:39.547
> 
> 标签：php, mysql, cron, records

我陷入了困境，需要像你这样的聪明人的帮助。

以下是有关我使用的软件和技术的一些信息：cPanel、Linux 服务器、phpMyAdmin、MySQL。

我需要每天从表中删除一些记录。我通常通过在**phpMyAdmin上使用****Select**语句来执行此操作，然后删除所有记录。

 ***

```
Select `user_id` FROM `user`
WHERE EXISTS ( SELECT `user_id`
FROM `userinfo`
WHERE `essay` like '% yahoo %' AND user.user_id = userinfo.user_id) 
```

*

**上面的代码基本上是在userinfo**表中搜索特定的单词，并在**user**表中显示它们对应的**user_id**，然后我手动将其删除。在这种特殊情况下，搜索词是“<strong>yahoo”。我搜索所有在其个人资料**文章**中包含“<strong>yahoo”一词的用户，并将其从用户表中删除。

 ****问题是我有太多的搜索词来手动完成。

如果可能的话，我希望将它写在 php 文件中并通过 cron 运行。最好在 php 文件中有一个或多个字段，我将在其中键入所有可能的搜索词/短语，然后代码将一个接一个地执行所有这些。

我听说可以为此使用 cron 作业，阅读了一些关于它们的文章，但完全不知道如何处理它。

非常感谢您的帮助，如果不清楚，请告诉我。问候，伊戈尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:31:24.370

这至少应该让你开始。请记住，我不知道您的数据库的结构，因此您可能需要更改一些内容。这也是*FAR*不是最有效的方法，但它很容易遵循，您可以在单个 MySQL 查询中执行此操作，而不是循环遍历每个用户 id（我展示了一个*未经测试*的示例 see ---faster方式---），但是我不知道您的数据库结构，因此您必须使用它，而且这种方式与您现在所做的完全一样，一次一个，因此希望它更容易遵循并且您可以修改它以提高以后的效率。在玩这个之前备份你的数据库。

PHP脚本做你想做的事：

```
<?php
//put your search terms in this array
$search_terms = array('yahoo', 'google', 'bing');

//conenct to your DB
$db_conn = mysql_connect('yourdbhost', 'yourdbuser', 'yourdbpassword');
mysql_select_db('yourdbname', $db_conn);

//query the db for each search term
foreach($search_terms as $search_term) {
    //----slow but clear way----    
    $result = mysql_query("SELECT user_id 
                        FROM user
                        WHERE EXISTS (
                            SELECT user_id
                            FROM userinfo
                            WHERE essay like '%{$search_term}%' 
                            AND user.user_id = userinfo.user_id)", $db_conn);

    //for eachr user id returned, delete them from your users table 
    //as you would have done manually. I don't know about your users
    //table so you will have to edit this query as you see fit.
    while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        $user_del_result = mysql_query("DELETE FROM user 
                                        WHERE user_id = {$row['user_id']}
                                        LIMIT 1", $db_conn);
        //might want to check here to see if the query executed successfully
    }

    //----faster way----
    $result = mysql_query("DELETE FROM user
                            WHERE EXISTS (
                            SELECT user_id
                            FROM userinfo
                            WHERE essay like '%{$search_term}%' 
                            AND user.user_id = userinfo.user_id)", $db_conn);
}
?> 
```

要定期调用它，您需要查看 cron 作业（[阅读此内容](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)），然后只需在您的 crontab 中使用类似这样的内容定期调用 PHP 脚本（例如，这将在午夜运行一次）：

```
0 0 * * *   /path/to/php-cli /path/to/the/above/php/file.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T04:35:50.990

Deep s**t 从来都不是一个好去处......

如果您打算使用 PHP 脚本，那么您可以使用 crontab 执行此操作。也许，在最基本的情况下，最好的办法是编写一个可以使用 cron 执行的 PHP 脚本：

```
<?php

  $DB_hostname = "localhost";
  $DB_name     = "someDB";
  $DB_username = "someUser";
  $DB_password = "guessmeifyoucan";

  $connection = mysql_connect($DB_hostname, $DB_username, $DB_password) or die(mysql_error());
  mysql_select_db($DB_name, $connection) or die(mysql_error());

  $delete_query = "DELETE from `user`
                   WHERE EXISTS ( SELECT `user_id` FROM `userinfo`
                   WHERE `essay` like '%yahoo%' AND user.user_id = userinfo.user_id)";

  $result = mysql_query($delete_query) or die(mysql_error());

?> 
```

但是，为了理智起见，我建议将任何删除记录到文件中或在数据库中使用活/死标志。通配符字符串匹配是危险的，您最好使用 DB 标志（活/死或 '0'/'1'） - 除非不需要复出。

然后，您可以使用 crontab 设置和执行它。cPanel 提供了运行 cron 脚本的能力，但您也可以使用 CLI/shell 实现相同的功能：

1\. `crontab -e`（使用您选择的编辑器）
2\. 设置`0 6 * * * php /path/to/script.php`（每天早上 6:00）

crontab 中使用了以下格式（假设您使用的是某种 linux）：

```
Minutes [0-59]
|   Hours [0-23]
|   |   Days [1-31]
|   |   |   Months [1-12]
|   |   |   |   Days of the Week [Numeric, 0-6]
|   |   |   |   |
*   *   *   *   * php /path/to/script.php 
```

还有其他命令、选项和输出，但这是最基本的实现。[您可以在此处](http://www.linuxhelp.net/guides/cron/)找到更详细的 cron 用法。

如果需要，您也可以使用 query.sql 文件执行此操作，并在 CLI 上使用 MySQL 执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T04:34:35.033

出于您使用脚本的目的，我认为您甚至不需要使用 PHP。如果我不得不做这样的事情，我可能会做以下事情：

创建一个 MySQL 脚本`script.sql`，如下所示：

```
USE `database_name`;

DELETE A.* FROM `userinfo` A
INNER JOIN `user` B
ON A.user_id = B.user_id
AND (
    A.essay LIKE '% yahoo %'
    OR
    A.essay LIKE '% google %'
    OR
    A.essay LIKE '% microsoft %'
); 
```

然后我将设置一个 cron 作业，如下所示：

*   打开外壳并输入`crontab -e`以编辑您的 cron 文件。这应该会打开一个`vi`编辑器实例（您应该知道如何使用`vi`）。
*   将每日计划条目添加到您的 cron 文件`0 2 * * * mysql -u{user} -p{password} {db_name} < {path of script.sql}`中。这将在每天运行您的脚本`2:00am`。
*   保存文件并退出

每当您需要修改或添加搜索词时，只需`A.essay LIKE '% microsoft %'`根据您的需要修改和使用该行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T04:17:36.840

更改`select user_id from user`为`delete from user`并保留语句的其余部分完全相同。

请务必在执行此操作之前备份您的用户表..

一旦您验证了 SQL 的功能是否符合您的要求，您需要编写一个小型 PHP 脚本，将该 SQL 发送到 MySQL，并让 cron 每天运行一次该脚本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-08T04:16:27.210

您最好的选择是首先创建一个 PHP 脚本，该脚本将连接到 MySQL 并执行您想要的操作。之后，您可以查看 Cron 以及它们是如何工作的。本质上，它将以指定的节奏为您启动脚本。cPanel 有一个特殊部分，可让您安排 Cron。******

# python - 打印嵌套列表 - Python

> ID：13774368
> 
> 赞同：0
> 
> 时间：2012-12-08T04:05:57.030
> 
> 标签：python, list, printing, for-loop, nested-lists

有人可以帮我正确打印吗？

```
class Deck(object):
    def __init__(self):
        self.cards = []
        from random import shuffle
        shuffle(self.cards)

    #views all cards in the deck
    def view_deck(self):
        for x in self.cards:
            print(x.name)

    #takes in an (x) integer and views the top x cards of the deck
    def view_number_of_cards(self, cards_to_view):
        for x in self.cards[:cards_to_view]:
            print(x.name)

class Player(object):
    def __init__(self):
        self.hand = []
        self.row_1 = []
        self.row_2 = []
        self.row_3 = []
        self.row_4 = []
        self.row_5 = []
        self.rows = []
        self.rows.append(self.row_1)
        self.rows.append(self.row_2)
        self.rows.append(self.row_3)
        self.rows.append(self.row_4)
        self.rows.append(self.row_5)
        self.graveyard = []
        self.deck = Deck()

    #draw a card from deck to hand
    def draw_card(self):
        c = self.deck.cards
        cardDrawn = c.pop(0)
        self.hand.append(cardDrawn)

    #shuffle deck
    def shuffle_deck(self):
        from random import shuffle
        shuffle(self.deck.cards)

    def play_card(self, card, row):
        self.rows[row-1].append(card)
        self.graveyard.append(card)
        self.hand.remove(card)

    def update(self):
        i = 1
        for x in self.rows:
            print "Lane "+str(i)+": "+str(x[0]),
            i = i+1 
```

当我尝试这个时：

```
x = Player()
x.deck.cards = [1, 2, 3, 4]
x.draw_card()
x.play_card(x.hand[0], 1)
x.rows
[[1], [], [], [], []]
x.update() 
```

有时候是这样的

```
Lane 1: 1

Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    x.update()
  File "C:/Users/Carl/Desktop/try.py", line 53, in update
    print "Lane "+str(i)+": "+str(x[0]),
IndexError: list index out of range 
```

在控制台中，如果我尝试打印“Lane 1:”+rows[0][0] 等，它似乎工作正常，但由于某种原因，我不断收到这个 IndexError，这对我来说没有意义，因为肯定还有其他x-list 范围内的列表。在最坏的情况下，因为列表是预定义的（row_2 = []），所以它应该打印“Lane 2：”，但这甚至不会发生。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:17:02.920

问题是，正如你所说，`row_2 = []`. 因为它是空的，所以它在索引 0 处没有元素。

要获得空白的“Lane x：”行，您可以像这样重写更新：

```
def update(self):
    for x in self.rows:
        for i in range(5):
            print("Lane {}: ".format(i), end='')
            if len(x):
                print(x[0])
            else:
                print() 
```

您还需要在文件开头添加导入以获取打印功能而不是打印语句：

```
from __future__ import print_function 
```

# html - 为什么我的 div 在 Internet Explorer 中消失了？

> ID：13774369
> 
> 赞同：-1
> 
> 时间：2012-12-08T04:06:34.723
> 
> 标签：html, css, internet-explorer

> **可能重复：**
> [为什么 Internet Explorer 使 div 内的内容溢出：隐藏消失？](https://stackoverflow.com/questions/13690700/why-does-internet-explorer-make-content-inside-a-div-with-overflowhidden-disapp)

里面的内容`<div class="item">`在 Internet Explorer 中消失了，但在所有其他浏览器中都可见。为什么？此问题是以前从未收到答案的问题的修改版本。也许我的修改使我更接近可能的解决方案？

HTML：

```
<td class="table_class">
    <div class="relative">
        <div class="relative">
            <div class="absolute">
                <div class="item_container">
                    <div class="item">
                        // there may be several of these divs
                    </div>
                </div>
            </div>
        </div>
    </div>
</td> 
```

CSS：

```
.table_class {
    vertical-align: top;
    position: relative;
    z-index: 2;
    padding: 0;
}

.relative {
    height:100%;
    width:100%;
    position:relative;
}

.absolute {
    position: absolute;
    top: 25px;
    right: 5px;
    bottom: 5px;
    left: 5px;
    overflow: hidden;
}

.item_container {
    height: 16px;
    font-size: 12px;
    clear: both;
    white-space: nowrap;
    margin-bottom: 1px;
}

.item {
    position: relative;
    z-index: 999999;
    background-color: transparent;
    float: left;
    text-align: left;
    clear: both;
} 
```

我错过了什么？（是的，需要 class="relative" 的两个 div）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:39:58.520

您应该尝试将`width`和添加`height`到`.absolute`CSS 类。

另外，为什么您的`.item`班级同时具有`float: left;`and `clear: both;`？

我建议删除该`clear: both`属性，而是将兄弟姐妹添加`div`到您的`item`div 并将样式添加`clear: both`到其中，如下所示：

```
<div class="item_container">
    <div class="item">
        // there may be several of these divs
    </div>
    <div style="clear: both;"></div>
</div> 
```

如果这不起作用，请尝试将`width`and添加`height`到`.item`类中。

# javascript - 函数中的函数？

> ID：13774373
> 
> 赞同：2
> 
> 时间：2012-12-08T04:07:54.367
> 
> 标签：javascript, function, canvas, jquery-animate

我目前正在学习如何使用 Canvas，但我目前正试图将一个函数放入一个类中。

```
<script>
var c = document.getElementById("c");
var ctx = c.getContext("2d");

var disc = function(x,y,h,w,c1,c2,ctx){
  this.x=x;
  this.y=y;
  this.h=h;
  this.w=w;
  this.c1=c1;
  this.c2=c2;
  this.ctx=ctx;

}

disc.prototype.draw = function() {
  this.ctx.fillStyle=this.c1;
  this.ctx.fillRect(this.x,this.y,this.w,this.h/2);
  this.ctx.fillStyle=this.c2;
  this.ctx.fillRect(this.x,this.y+this.h/2,this.w,this.h/2);
}

disc.prototype.erase = function() {
  this.ctx.clearRect(this.x,this.y,this.w,this.h);
}

d1 = new disc(100,100,20,40,"#ff0000","#0000ff",ctx);

 var dx=1;
 var dy=1;

 function animate() {
      d1.erase();
      d1.x = d1.x + dx;
      d1.y = d1.y + dy;
      if ( d1.x>=500 || d1.x < 50)  { dx = dx * -1; d1.y = 40;}
      d1.draw();

  }

setInterval(animate,1);

</script> 
```

我将如何在光盘功能本身内移动动画功能？我尝试将其插入到光盘功能中：

```
 var dx=1;
  var dy=1;
  animate = function() {
      this.erase();
      this.x = this.x + dx;
      this.y = this.y + dy;
      if ( this.x>=500 || this.x < 50)  { dx = dx * -1; this.y = 40;}
      this.draw();
   }
 this.animate = animate; 
```

以及改变

```
setInterval(d1.animate,1); 
```

但它给了我

```
caught TypeError: Object [object Window] has no method 'erase' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:12:40.203

您需要将函数添加到`prototype`of 中`disc`，如下所示：

```
disc.prototype.animate = function(dx, dy) {
      this.erase();
      this.x = this.x + dx;
      this.y = this.y + dy;
      if ( this.x>=500 || this.x < 50)  { dx = dx * -1; this.y = 40;}
      this.draw();
};

setInterval(function() {
  d1.animate(1, 1);
},1); 
```

# msbuild - VS2012中VsDevCmd.bat和vcvarsall.bat的区别

> ID：13774375
> 
> 赞同：15
> 
> 时间：2012-12-08T04:07:58.620
> 
> 标签：msbuild, visual-studio-2012

有什么区别：

*   `VsDevCmd.bat`（VS2012 的开发者命令提示符）
*   `vcvarsall.bat`（VS2012 x86\x64\ARM Native\Cross Tools 命令提示符）

我对它有很好的理解，`vcvarsall.bat`因为它是许多以前版本的 Visual Studio 的一部分。 `vcvarsall.bat`即使在构建 .NET 项目时，它基本上也是我用于 MsBuild 的 goto 工具，尽管它在技术上是 Visual C++ 的一部分。

我不太了解的是`VsDevCmd.bat`. VS2012 似乎是新的，我不确定它的目的是什么。我注意到它不像 Visual C++ 文件夹那样`vcvarsall.bat`位于 Visual Studio Tools 文件夹中。我现在应该在这个工具中做我的 .NET msbuilds 吗？如果是这样，我该如何设置相同类型的 x64\x86\ARM 默认值`vcvarsall.bat`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-20T22:48:49.733

根据我的理解和查看 VS2012 中的各种批处理脚本：

使用 x86 调用的 vcvarsall.bat（或者只是没有选项的 vcvarsall.bat，默认为 x86）与 VsDevCmd.bat 相同。使用 x86 选项传递时 vcvarsall.bat 调用的批处理文件是

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\vcvars32.bat 
```

此文件与位于

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Tools\VsDevCmd.bat 
```

这是从开始菜单打开时开发人员命令提示符调用的内容。

因此，为了在平台上进行更多控制，最好调用 vcvarsall.bat 并传递适当的选项：x86 或 amd64 或 arm 或 x86_amd64 或 x86_arm。

# javascript - 如何在javascript中验证变量的数据类型？

> ID：13774381
> 
> 赞同：1
> 
> 时间：2012-12-08T04:10:43.807
> 
> 标签：javascript, html

在 Javascript 中，有没有办法检查或验证变量的数据类型？我需要允许用户在文本框中输入浮点值。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T04:12:30.453

如果您*只*处理文字符号而不是构造函数，则可以使用[typeof](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Operators/Special_Operators/typeof_Operator) :。

例子：

```
>var a = 1;
>var b = "asdasd";
>typeof(b);
"string"
>typeof(a);
"number" 
```

## - -编辑 - -

要验证数字或浮点值，请使用：

```
function isNumber (n) {
  return ! isNaN (n-0);
} 
```

例子：

```
>var a = 1;
>isNumber(1);
True 
```

包括浮动，使用`parsefloat`：

```
function isIntandFloat(n) {
   return typeof n === 'number' && parseFloat(n) == parseInt(n, 10) && !isNaN(n);
} 
```

或者，如果您只想`float`使用它：

```
function Float (n) {
  return n===+n && n!==(n|0);
} 
```

例子：

```
>var a = 0.34324324324;
>Float(a);
true
>var int = 3;
>Float(int);
false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:14:32.130

文本框将始终为您提供`string`原始值。

您想要的是查看输入是否可以从 a 转换`string`为 a `number`。为此，您可以使用`parseFloat()`.

```
var num = parseFloat(textbox.value);

if (isNaN(num)) {
    alert("Invalid input");
} 
```

如果您想要更严格的评估，请使用该`Number`功能

```
var num = Number(textbox.value);

if (isNaN(num)) {
    alert("Invalid input");
} 
```

# c# - Socket组件TcpClient可以使用http代理吗？

> ID：13774382
> 
> 赞同：1
> 
> 时间：2012-12-08T04:10:46.757
> 
> 标签：c#, http, proxy, network-programming, tcpclient

TcpClient访问站点内容，可以使用HTTP代理吗？还是用socket5代理呢？如果可以的话，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:22:13.027

你为什么不直接使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类而不是手动使用 a`TcpClient`呢？

它允许您设置一个[`Proxy`](http://msdn.microsoft.com/en-us/library/system.net.webclient.proxy.aspx).

# symfony - 如何检查树枝模板中是否存在块 - Symfony2

> ID：13774384
> 
> 赞同：47
> 
> 时间：2012-12-08T04:11:30.080
> 
> 标签：symfony, twig

想象一下我的树枝模板中有这样的东西

```
{% block posLeft %}
   -----
{%endblock%} 
```

有没有办法检查 posLeft 块的存在而不调用：

```
block("posLeft") 
```

并检查 posBlock 的返回值以验证是否存在。我是 Symfony2 + Twig 的新手。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-10T18:18:18.567

如果您只想在某个块有内容的情况下显示某个块，您可以这样解决它。希望，这就是你要找的。

**示例 index.html.twig**

```
{% set _block = block('dynamic') %}
{% if _block is not empty %}
    {{ _block|raw }}
{% endif %} 
```

**示例 part.html.twig**

```
{% extends "index.html.twig" %}

{% block dynamic %}
    Block content goes here.
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-16T15:44:59.130

你可以这样做：

```
{% if block('posLeft') %}
  ...
{% endif %} 
```

**但是，如果您需要渲染块的输出，**则效率不高。**因此**，如果您需要块输出，则应首先将其分配给变量，** 然后进行断言**

 *** * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-02-12T09:03:15.627

这里的其他答案不适用于 twig 2.1（我没有在 ~2.0 上测试过），所以这里有一个小的更新：

```
{% if block('dynamic') is defined %}
    {{ block('dynamic')|raw }}
{% endif %} 
```

请注意，渲染块的行**不是**：

```
{% block dynamic %}
    {#  this wont work  #}
{% endblock %} 
```

这不会起作用，因为该块将在编译期间呈现，因此测试将返回它存在的真值（因为它在运行时测试）。所以你需要渲染块，`{{ block('dynamic')|raw }}`因为这实际上并没有在模板中定义块。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-01-16T12:01:04.320

首先检查您在 Symfony 项目中使用的 Twig 版本，因为这里的答案仅适用于 Twig 1。

**如果您使用的是 Twig 2**，那么您很幸运。根据 Twig 文档，您可以使用定义的测试来检查该块是否存在于当前模板上下文中。

```
{% if block("dynamic") is defined %}
   ...
{% endif %} 
```

我写了一个小 TwigExtension 来检查块是否在 if 语句中被调用，看起来 Twig 只检查块是否存在而不调用它。

文档链接：[https ://twig.symfony.com/doc/2.x/functions/block.html](https://twig.symfony.com/doc/2.x/functions/block.html)

**如果您使用的是 Twig 1 ，则**[https://stackoverflow.com/a/13806784/6458657](https://stackoverflow.com/a/13806784/6458657)上的旧答案仍然正确。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-04-12T15:50:46.133

树枝 2.x

```
{{ (block("posLeft")) ?? '' }} 
```

如果您想在一行中显示一个块是否已定义。可能有点笨拙，但无需一堆 if..then 逻辑就可以满足我的需求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-08T13:42:12.540

只想提供另一个对我有用的例子。

```
<body
{%  if block('ngapp') is not empty  %}ng-app="{% block ngapp %}{% endblock %}"{% endif %}
> 
```

这允许我在子模板中声明`{% block ngapp 'myApp' %}`并将其显示在父模板中。

这是必要的，因为在某些页面上我通过 ( `angular.bootstrap('moduleName', rootElement)`) 手动引导 Angular，而 Angular 不喜欢空`ng-app=''`指令并且以奇怪的方式中断。**

# c++ - c++中的虚方法和子类

> ID：13774385
> 
> 赞同：2
> 
> 时间：2012-12-08T04:12:09.780
> 
> 标签：c++

所以我试图更好地理解虚拟方法。我有一个基类**Sensor**和几个子类**SensorTemp** * *SensorPh* * **SensorOrp**

```
class Sensor
{
public:
virtual void updateValue();
} 
```

然后子类用自己的方法定义覆盖 updateValue（这发生在每个子类中）

.h 文件

```
#include "Sensor.h"
class SensorTemp : public Sensor
{
 private:

 public:

}; 
```

.cpp 文件

```
#include "Sensor.h"
#include "SensorTemp.h"
void Sensor::updateValue(){
    int reading = analogRead(pinId); 
    float voltage = reading * 5.0;
    voltage /= 1024.0;
    currentVal = voltage * 100 ;
    Serial.print("temp: "); Serial.println(currentVal);
} 
```

我的问题是这适用于第一个子类声明，尽管以下内容会出现编译器错误： updateValue() .... 首先在这里定义 ld.exe : : 禁用松弛：它不适用于多个定义

因此，如果我想以与每个子类不同的方式定义方法，我会坚持采用哪种方法？

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:20:39.080

看来您正在尝试通过`virtual`关键字学习动态调度。在动态调度中，对象的实际类型决定了该类中要调用的适当方法。为了实现这一点，基类应该提供一个`virtual`方法，每个子类都应该覆盖该虚拟方法以提供它们自己的行为。

所以你的每个子类都应该**覆盖**虚拟方法。

**//.h 文件**

```
class SensorTemp : public Sensor
{
 private:

 public:
    virtual void updateValue();

}; 
```

**//.cpp 文件**

```
void SensorTemp::updateValue() 
{
// ....
} 
```

如果您的子类不覆盖该`virtual`方法，那么无论对象的实际*类型*（无论是基类还是子类），`virtual`都将调用基类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:16:16.657

您的子类实现应如下所示：

```
void SensorTemp::updateValue() {
    // ...
} 
```

# c# - Word.SpellingSuggestions 抛出找不到校对工具

> ID：13774391
> 
> 赞同：2
> 
> 时间：2012-12-08T04:12:31.793
> 
> 标签：c#, com, ms-word, office-interop

运行此代码：

```
_app = new Word.Application();
Word.SpellingSuggestions listOfSuggestions = _app.GetSpellingSuggestions(theWord, Missing.Value, Missing.Value, "Spanish (Mexico)"); 
```

抛出此异常：找不到校对工具

*   我使用 Word 对象库 12（应该是 Word 2007）
*   省略 MainDictionary 参数没有任何区别
*   指定 wdMexicanSpanish 也不起作用
*   拼写检查非常适用于 Word 本身的英语和西班牙语。

有什么问题？

# interop - SIP/H.323/IAX2的互操作性

> ID：13774392
> 
> 赞同：0
> 
> 时间：2012-12-08T04:12:37.063
> 
> 标签：interop, sip, voip, h.323

我很想知道这三个协议之间是否存在互操作性。就像来自 SIP 协议的呼叫是否可以通过 H.323 协议？非常感谢有关此主题的文章或书籍链接。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:38:33.917

SIP、H.323 和 IAX2 都是不同的协议，不能直接互操作。也就是说，您无法将 SIP 电话连接到 H.323 设备并拨打电话。

这些协议解决的问题都是相似的（例如进行语音或视频通话）。协议转换器和其他设备（如网关）可用并且可以进行转换。

您可能还必须将音频和视频数据从一个编解码器转码到另一个编解码器，但您可能还必须在 SIP-SIP 或 H.323-H.323 呼叫中执行此操作。

许多 PBX 和软交换都支持 SIP 和 H.323：星号支持所有 3 个（SIP、H.323 和 IAX2）。

# windows-8 - WebView 的自定义用户代理

> ID：13774396
> 
> 赞同：6
> 
> 时间：2012-12-08T04:12:53.090
> 
> 标签：windows-8, microsoft-metro

我可以为 a 设置自定义用户代理`WebView`吗？

我需要展示网站的移动风格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-15T17:53:40.820

这很容易做到：

```
string ua = "Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X)" + "AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25";
var httpRequestMessage = new HttpRequestMessage(HttpMethod.Get, new Uri(url));
httpRequestMessage.Headers.Add("User-Agent",ua);
webView1.NavigateWithHttpRequestMessage(hrm); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T05:13:52.950

根据此[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/ea00647f-ba00-45a0-8df0-fa267f073ab9)，您不能。您能否托管一个轻量级代理服务（例如 Azure 网站）来为您代理请求？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T07:52:27.267

您可以使用自定义用户代理加载 HTML，然后将 html 传递给`WebView`

**加载 html**

```
var handler = new HttpClientHandler {AllowAutoRedirect = false};
var client = new HttpClient(handler);
client.DefaultRequestHeaders.Add("user-agent",
                                 "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; 
                                  WOW64; Trident/6.0)");
var response = await client.GetAsync(url);
response.EnsureSuccessStatusCode();
var html = await response.Content.ReadAsStringAsync(); 
```

**将html分配给`WebView`**

```
WebView.NavigateToString(html); 
```

# python - 如何正确定义 gevent 功能是否可用？

> ID：13774397
> 
> 赞同：3
> 
> 时间：2012-12-08T04:12:58.107
> 
> 标签：python, gevent

我正在实现可重用的 python 模块，它利用 gevent 进行异步 http 请求。如果 gevent 不可用，那么我们将退回到同步请求。现在我结束了：

```
_use_gevent = False

try:
    import gevent
    # gevent 1.0bN renamed coros to lock
    try:
        from gevent.lock import Semaphore
    except ImportError:
        from gevent.coros import Semaphore
    # Verify gevent has patched os. If not we just don't use gevent.
    import os
    if 'gevent' in os.fork.__module__:
        _use_gevent = True
except ImportError:
    pass 
```

这是定义 gevent 是否可用及其补丁是否实际应用的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:31:31.960

你可以检查一下`sys.modules['gevent']`。

您还可以检查`gevent.__version__`是否必须导入 gevent.lock 或 gevent.coros。

# javascript - JavaScript window.scroll 延迟导致异步重绘

> ID：13774402
> 
> 赞同：5
> 
> 时间：2012-12-08T04:14:15.337
> 
> 标签：javascript, performance, safari, webkit, scroll

# 目标

因此，我`<div>`在单列布局中有一个 s 列表，它们具有“活动”或“非活动”类。活动类在项目右侧显示图形，非活动类不显示。我进行了设置，以便按向上或向下箭头键将“活动”类（以​​及带有它的图形）移动到上一个或下一个项目。它不是动画的，但您可以直观地看到图形在上方或下方的标签上消失和重新出现。

现在我想让页面在箭头键上向下滚动，以便项目的顶部边缘始终位于同一位置。由于元素列表大于页面窗口，所以需要自动滚动浏览器，使选中的元素`<div>`始终位于屏幕中央...

# 编码

```
//Paging through items with arrow keys
theWindow.keydown(function (e) {
    var key = e.keyCode,
        oldItem = $('li.active')

    if ((key === 40 && oldItem.next().length) || (key === 38 && oldItem.prev().length)) {
        var theWindowMod = (window.innerHeight / 2) + 43,
            theHTML = $('html'),
            theDetail = $('.detail')

        theHTML.addClass('notransition')

        if (key === 40 && oldItem.next().length) {
            oldItem.removeClass('active').next().addClass('active')
        } else if (key === 38 && oldItem.prev().length) {
            oldItem.removeClass('active').prev().addClass('active')
        }

        var newItem = $('li.active')

        window.scroll(0, newItem.offset().top - theWindowMod)
        e.preventDefault()
        $('.detail-inner.active').fadeOut(0).removeClass('active')
        $('section.active, .tab.active').removeClass('active')
        newItem.find('.tab').add(theDetail).addClass('active')
        theDetail.find('.detail-' + newItem.attr('class').split(' ')[0]).addClass('active').fadeIn(0)

        setTimeout(function () {
            theHTML.removeClass('notransition')
        }, 1)
    }
}); 
```

# 问题

**问题在于**，在所有版本的 Safari（但没有其他浏览器）中，window.scroll 方法在 CSS 类切换性能方面稍逊一筹。发生的情况是它们最终出现在两个不同的重绘事件中，当您向下滚动时，页面看起来像“小故障”，因为您可以在浏览器向下滚动之前简要地看到下一个元素右侧的图形。

# 现场演示

**您可以在此处实时查看：**

[http://hashtag.ly/#minecraft](http://hashtag.ly/#minecraft)

使用箭头键翻阅项目。注意跳跃。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:58:14.807

尝试使用按钮而不是 div 并在激活特定项目时使用 setfocus() 。浏览器将自动滚动以使焦点按钮始终可见。您可以使用 CSS 使按钮看起来与 div 完全一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:03:04.997

我认为避免该问题的解决方案是您最好的选择。

从用户体验的角度来看，当我浏览一个网站时，我不喜欢该网站篡夺对滚动位置的控制权。

此外，对于使用高大浏览器的人（比如我），目前在细节和选定的帖子之间可能会有很多白色的空间。（见截图）

![详细信息与所选帖子相去甚远。](../Images/941ef60b70bb50fa8bbea23e417d532a.png)

我的建议是更改设计，以便详细信息显示在所选帖子旁边并让用户进行滚动。使用 CSS 控制细节的位置，使它们位于所选帖子的旁边，将其置于与其他所有内容相同的渲染周期中。

更接近所选帖子的详细信息可能如下所示：

![更接近所选帖子的详细信息。](../Images/1f7a3381578aba5b90977b60ba255060.png)

更新：

想一想，AOL 的电子邮件客户端 Alto 拥有您实施的 UX。在 Alto 中，如果您使用按键浏览，左栏会自动滚动。但是，您实际上并没有滚动，他们正在将内容添加到容器元素中并将其带到视图中（我忘记了这叫什么……虚拟化？）。看起来他们自己在管理所有与滚动相关的视觉效果和行为，并且没有使用本机功能。所以，这都是 JS 控制的 CSS 和 DOM 操作，实际上没有`scrollTo()`调用。这将它们全部置于同一个渲染周期中。

![美国在线奥拓电子邮件](../Images/8cfd56468b95db25b7e3b67fcf71f020.png)

# java - Java 多态性使用其超类变量创建子类对象

> ID：13774403
> 
> 赞同：9
> 
> 时间：2012-12-08T04:14:18.503
> 
> 标签：java, polymorphism

所以我是一名学生，并且正在学习 Java。有一个概念我很难理解，我希望有人可以为我阐明这一点。我的问题是关于多态性。例如，假设我有以下代码。

```
Animal a = new Lizard("Lizzy", 6);  //Lizard extends Animal 
```

1.  据我了解，由于变量类型是动物，a 将具有动物的所有特征。但是，由于创建的对象是 Lizard，因此将使用 Lizard 类中的任何重写方法，而不是 Animal 类中的方法。这是正确的>

2.  此外，在创建一个时将使用哪些类构造函数？

谢谢你的帮助。我看起来很

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T04:22:42.390

> 1.据我了解，由于变量类型是Animal，a将具有Animal的所有特征。但是，由于创建的对象是 Lizard，因此将使用 Lizard 类中的任何重写方法，而不是 Animal 类中的方法。这是正确的>

是的，你是对的。

> 2.另外，创建一个时会使用哪些类的构造函数？

```
 Animal a = new Lizard("Lizzy", 6);  //Lizard extends Animal 
```

因为，Lizard 是 Animal 的子类，首先，将调用 Lizards 构造函数，然后从 Lizards 构造函数调用**Animal 构造函数**，因为 Lizard 构造函数中的第一行默认为**super()**，除非你调用**重载**Lizard 的**构造函数使用****this()**。在 Animal 构造函数中，第一行将再次调用**super()**。假设 Animal 没有扩展任何类，`java.lang.Object's`构造函数将像`java.lang.Object`每个对象的超类一样被调用。

```
 public Object() {

    }
    Class Animal {
     public Animal(){
      //there will be a super call here like super()
    }

    class lizard extends Animal {
    public Lizard(your args) {
       //there will be a super() call here and this call's animal's no-args constructor
     }
    }

 } 
```

**执行顺序是**

1.  蜥蜴构造函数将被调用
2.  除非 this() 调用重载构造函数，否则调用 super() 即调用的 Animals no-args 构造函数
3.  java.lang.Object 的构造函数将使用 super() 从动物调用
4.  java.lang.Object 的构造函数代码将执行
5.  Animals 构造函数代码将执行
6.  蜥蜴构造函数代码将执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:20:01.690

1.  这是正确的，即使引用是 type `Animal`，所有方法调用都将解析为`Lizard`如果存在的定义，否则将调用下一个直接父级中的版本，依此类推。

2.  `a`只是一个参考，实际的对象是 type `Lizard`。因此，`Lizard`将调用类中的构造函数。他们反过来可以使用`super()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T04:20:07.017

1.  `Any overridden methods in the Lizard class will be used instead of those in the Animal class`

    你是对的

2.  `which classes constructor will be used while creating a?`

    当你创建一个子类时，它会隐式调用超类的构造函数。因此，将使用超类（即 ）`Animal`和子类（即 ）`Lizard`。

# ruby - 比“！current_user.nil？”更漂亮的Ruby？

> ID：13774409
> 
> 赞同：2
> 
> 时间：2012-12-08T04:15:02.257
> 
> 标签：ruby

好的，我是绿色的，但下面的 def 似乎是双负-y

```
def signed_in?
  !current_user.nil?  #the current user is not...um...not
end 
```

因为我的耐心导师 M.Hartl 在[他的 Rails 教程](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-changing_the_layout_links)中使用了它。我必须相信它是吱吱作响的，但是...

说“当前用户是”的东西不会更干净吗？

```
def signed_in?
  current_user
  current_user.present?
  current_user.any?
  !!current_user
end 
```

爆款有什么好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T05:06:05.183

```
current_user          | nil    | false  | true  | ""    | []    | [nil] | [0]  
-----------------------------------------------------------------------------------
current_user          | nil    | false  | true  | ""    | []    | [nil] | [0]
!current_user.nil?    | false  | true   | true  | true  | true  | true  | true
!!current_user        | false  | false  | true  | true  | true  | true  | true
current_user.present? | false  | false  | true  | false | false | true  | true
current_user.any?     | error  | error  | error | error | false | false | true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:21:54.670

在该示例中，您不关心用户是谁。您只想知道一个用户，*任何用户*，已登录。如果是这样，您将显示已登录用户的链接。

`current_user.nil?`是一个布尔值。如果用户已登录，则为 false。前面的 bang`!current_user.nil?`将其反转，因此如果*任何*用户已登录，则为 true，否则为 false。

你能想出另一种同样简洁的方法来实现这一点，不多也不少？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T09:02:44.723

你可以：

```
def signed_in?
  current_user
end 
```

如果你能忍受它不是从方法返回的布尔值。如果 current_user 为 nil `signed_in?`，则在 if 语句中使用时将评估为 false。检查零？没有必要，我想这是风格问题。

或者在您的调用代码中，您可以：

```
if current_user
  # do stuff
end 
```

并摆脱额外的方法。

# actionscript-3 - AS3 - 如何获取对聚合对象容器的引用？

> ID：13774415
> 
> 赞同：0
> 
> 时间：2012-12-08T04:16:53.747
> 
> 标签：actionscript-3

很简单。

如果我有一个包含 Sprite 对象的容器类，并且我将一个触摸侦听器附加到所述 Sprite，是否有一种可靠且廉价的方法可以在触摸时获取包含 Sprite 的对象？我意识到我可以只继承 Sprite，但这不是我想做的。

如果做不到这一点，如果我将事件侦听器添加到包含它的类中的所述 Sprite 对象，是否有办法调度一个事件，使我能够获取对包含被触摸的 Sprite 对象的容器的引用？

谢谢你的帮助。

回复loxxxy：

当我说“持有”时，我的意思是聚合。例如：

```
public class Container 
    {
        [Embed(source = "img1.jpg")] private var img:Class;

        private var sprite:Sprite;
        private var bitmap:Bitmap;

        public function Container() 
        {
            bitmap = new img();
            sprite = new Sprite();
            sprite.addChild(bitmap);
        }

        public function GetSprite():Sprite
        {
            return sprite;
        }

    } 
```

这是完全合法的代码。我想要做的是，当 Sprite 对象在 Container 类之外被触摸时，我可以通过所述 Sprite 对象访问 Container 类中的其他属性。但是，我认为一个可靠的解决方法如下：

```
public class Container extends InteractiveDisplayObject
    {
        [Embed(source = "img1.jpg")] private var img:Class;

        private var bitmap:Bitmap;

        public function Container() 
        {
            bitmap = new img();
this.addChild(bitmap);

        }
    } 
```

然后，我可以通过侦听 Container 类上的触摸事件来访问 Container 类的聚合对象，同时使其完全可扩展到任何其他 DisplayObject 类（TextField、Sprite 等）。

我想这样做有一个非常具体的原因，我只是觉得它与实际问题无关。当我有时间测试它时，我会尝试这种方法，看看效果如何。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:43:04.613

你真的不需要仅仅为了这个目的而调度事件。

将事件侦听器添加到容器中，您可以获得对容器和精灵的引用。例如：

```
container.addEventListener(MouseEvent.CLICK, container_touched, false, 0, true);

function container_touched(e) { 

    trace(e.target.name);            // Output : sprite
    trace(e.currentTarget.name);     // Output : container
} 
```

* * *

编辑 ：

或者您可以通过添加如下函数将 sprite 事件公开给其他人：

```
public function registerCallback( callback:Function) {

    var thisRef = this; 

    sprite.addEventListener(MouseEvent.CLICK, function(e) {

         callback(thisRef);

    },false, 0, true);    
} 
```

# wpf - WPF DataGrid 如何让冻结的行/列工作？

> ID：13774417
> 
> 赞同：7
> 
> 时间：2012-12-08T04:17:13.050
> 
> 标签：wpf, datagrid, scrollviewer

我创建了一个基于 Grid（不是 DataGrid）的用户控件，该控件包含在 ScrollViewer 中。现在我想像在 DataGrid 中一样拥有冻结行/列的功能，但不知道如何。

有人可以告诉我它是如何在 WPF DataGrid 中完成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T14:04:36.533

在我自己遇到这个问题之后，我想分享我到目前为止发现的内容。

`DataGrid`为此使用两种不同的方法。

* * *

**第一个：RowHeader**

* * *

这是简化`Template`的`DataGridRow`：

```
<Border x:Name="DGR_Border" ... >
    <SelectiveScrollingGrid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <DataGridRowHeader Grid.RowSpan="2"
            SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical" ... />

        <DataGridCellsPresenter Grid.Column="1" ... />

        <DataGridDetailsPresenter Grid.Column="1" Grid.Row="1"
            SelectiveScrollingGrid.SelectiveScrollingOrientation="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                                                                           Path=AreRowDetailsFrozen, Converter={x:Static DataGrid.RowDetailsScrollingConverter},
                                                                           ConverterParameter={x:Static SelectiveScrollingOrientation.Vertical}}" ... />
    </SelectiveScrollingGrid>
</Border> 
```

如您所见`DataGrid`，使用[`SelectiveScrollingOrientation`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selectivescrollinggrid.selectivescrollingorientation.aspx)附加属性将 RowHeader 保持在适当位置。如果此属性已设置（或更改），它会为元素创建`TranslateTransform`与父级偏移量的适配绑定。`ScrollViewer`请参阅[**源代码**](http://daisy-svn.cvsdude.com/tobi/trunk/tobiapp/ExternalLibs/WPFToolkit/DataGrid/Microsoft/Windows/Controls/Primitives/SelectiveScrollingGrid.cs)中的详细信息。

* * *

**第二：FrozenColumns**

* * *

这件事发生在. 它使用一个私有类“来维护多个孩子的排列之间的状态”。[`DataGridCellsPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcellspanel.aspx) `ArrangeOverride()``ArrangeState`

```
private class ArrangeState
{
    public ArrangeState()
    {
        FrozenColumnCount = 0;
        ChildHeight = 0.0;
        NextFrozenCellStart = 0.0;
        NextNonFrozenCellStart = 0.0;
        ViewportStartX = 0.0;
        DataGridHorizontalScrollStartX = 0.0;
        OldClippedChild = null;
        NewClippedChild = null;
    }

    public int FrozenColumnCount { get; set; }
    public double ChildHeight { get; set; }
    public double NextFrozenCellStart { get; set; }
    public double NextNonFrozenCellStart { get; set; }
    public double ViewportStartX { get; set; } 
    public double DataGridHorizontalScrollStartX { get; set; }
    public UIElement OldClippedChild { get; set; }
    public UIElement NewClippedChild { get; set; }
} 
```

初始化状态后

```
private void InitializeArrangeState(ArrangeState arrangeState)
{
    DataGrid parentDataGrid = ParentDataGrid;
    double horizontalOffset = parentDataGrid.HorizontalScrollOffset;
    double cellsPanelOffset = parentDataGrid.CellsPanelHorizontalOffset;
    arrangeState.NextFrozenCellStart = horizontalOffset;
    arrangeState.NextNonFrozenCellStart -= cellsPanelOffset;
    arrangeState.ViewportStartX = horizontalOffset - cellsPanelOffset;
    arrangeState.FrozenColumnCount = parentDataGrid.FrozenColumnCount;
} 
```

它调用

```
ArrangeChild(children[childIndex] as UIElement, i, arrangeState); 
```

对于所有已实现的孩子，并计算未实现的孩子/列的估计宽度。

```
double childSize = GetColumnEstimatedMeasureWidth(column, averageColumnWidth);
arrangeState.NextNonFrozenCellStart += childSize; 
```

最后，这些值将设置在 中的相应字段中`DataGrid`。

```
private void FinishArrange(ArrangeState arrangeState)
{
    DataGrid parentDataGrid = ParentDataGrid;

    // Update the NonFrozenColumnsViewportHorizontalOffset property of datagrid
    if (parentDataGrid != null)
    {
        parentDataGrid.NonFrozenColumnsViewportHorizontalOffset = arrangeState.DataGridHorizontalScrollStartX;
    }

    // Remove the clip on previous clipped child
    if (arrangeState.OldClippedChild != null)
    {
        arrangeState.OldClippedChild.CoerceValue(ClipProperty);
    }

    // Add the clip on new child to be clipped for the sake of frozen columns.
    _clippedChildForFrozenBehaviour = arrangeState.NewClippedChild;
    if (_clippedChildForFrozenBehaviour != null)
    {
        _clippedChildForFrozenBehaviour.CoerceValue(ClipProperty);
    }
} 
```

`ArrangeChild(UIElement child, int displayIndex, ArrangeState arrangeState)`您可以从[**源代码**](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/wpf/src/Framework/System/Windows/Controls/DataGridCellsPanel@cs/1305600/DataGridCellsPanel@cs)中的第 1470 行找到详细信息。

* * *

**结论**

* * *

它不是简单的使列被冻结。即使这会起作用（除了整个宽度上的剪辑和滚动条）

```
<ListView ItemsSource="some rows">
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Fixed"
                           Background="LightBlue" Width="300"
                           SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical" />
                <TextBlock Grid.Column="1" Text="Scrolled"
                           Background="LightGreen" Width="300" />
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

这不会：

```
<ScrollViewer HorizontalScrollBarVisibility="Auto">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Column="0" Text="Fixed"
                   Background="LightBlue" Width="300"
                   SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical" />
        <TextBlock Grid.Column="1" Text="Scrolled"
                   Background="LightGreen" Width="300" />                    
    </Grid>
</ScrollViewer> 
```

原因是`DataGridHelper.FindVisualParent<ScrollViewer>(element)`（参见[**源代码**](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/wpf/src/Framework/System/Windows/Controls/DataGridHelper@cs/1305600/DataGridHelper@cs)中的第 149 行）`SelectiveScrollingOrientation attached property`失败。也许您会找到解决方法，例如使用原始代码的副本创建您自己的附加属性，但 `ScrollViewer`按名称获取。否则我认为你必须从头开始做很多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:32:33.123

Datagrid Column and Row 有一个名为“Frozen”的属性

如果您想冻结列，我建议您执行以下操作

您希望它在选定的行或列事件上，然后在事件上获取列/行并将其标记为 Frozen = true

或在鼠标右键单击时创建另一个按钮或上下文菜单，您可以在其上冻结/解冻当前标记

列/行

希望这可以帮助

# c++ - 变量未在循环中定义？

> ID：13774421
> 
> 赞同：0
> 
> 时间：2012-12-08T04:17:51.570
> 
> 标签：c++, variables, for-loop, scope

第 13 行说：“i”的名称查找更改为 ISO“for”范围

```
#include <iostream>
using namespace std;

int main()
{
    int Fib[40];
    Fib[0] = 1;
    Fib[1] = 1;
    cout << Fib[0] << Fib[1] << endl;

    for (int i=2; i<40; i++)
    Fib[i]=Fib[i-1]+Fib[i-2];
        cout << Fib[i] << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:19:31.953

您忘记了要在循环中执行的指令范围：

```
for (int i=2; i<40; i++) {
    Fib[i]=Fib[i-1]+Fib[i-2];
    cout << Fib[i] << endl;
} 
```

循环只会执行单个指令或单个指令范围。在您的代码中，只有第一行是循环的一部分。第二个不是，因此`i`超出了范围。在 C++ 中，是否缩进这些行都无关紧要。编译器不关心缩进；它仅用于帮助程序员，而不是编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:23:28.393

最后一行有 [i] 它不在循环内 cout << Fib[i] << endl; i 的范围仅在 for 循环内，因为 i 是根据新 ISO 标准在循环内声明的，因此正确的行是

```
for (int i=2; i<40; i++) {
    Fib[i]=Fib[i-1]+Fib[i-2];
    cout << Fib[i] << endl;
} 
```

# java - finally 块末尾的参数索引超出范围 mysql

> ID：13774424
> 
> 赞同：0
> 
> 时间：2012-12-08T04:18:12.363
> 
> 标签：java, mysql, exception, range, finally

我的大部分代码似乎都可以工作，但我继续在线程“main”java.sql.SQLException 中获取异常：参数索引超出范围（1 > 参数数量，即 0）。它发生在 readDatabase() 中的 finally 块之后。它没有到达打印语句 System.out.println("DOESN'T GET HERE"); 我不知道为什么。这是处理所有内容的类。在主类中，它只是创建一个对象并调用 readDatabase();

```
import java.sql.Connection;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

//static because when creating an object of it in main, you won't have to make an object of the outer class (SQLProject) first
public class MySQLAccess{
    private Connection connect = null;
    private Statement statement = null;
    private PreparedStatement preparedStatement = null;
    private ResultSet resultSet = null;

    public void readDatabase() throws Exception
    {
        try{
            Class.forName("com.mysql.jdbc.Driver");
            connect = DriverManager.getConnection("jdbc:mysql://localhost/test", "root", "");

            statement = connect.createStatement();
            System.out.println("here1");
            resultSet = statement.executeQuery("select * from test.comments");
            writeResultSet(resultSet);

            preparedStatement = connect.prepareStatement("INSERT INTO test.comments values(default, ?, ?, ?, ?, ?, ?)");
            //columsn in test.comments
            // myuser, email, webpage, datum, summary, COMMENTS
            preparedStatement.setString(1, "Test");
            preparedStatement.setString(2, "TestEmail");
            preparedStatement.setString(3, "TestWebpage");
            preparedStatement.setDate(4, new java.sql.Date(2009, 12, 11));
            preparedStatement.setString(5, "Test Summary");
            preparedStatement.setString(6, "Test Comment");
            System.out.println("here2");
            preparedStatement.executeUpdate();

            preparedStatement = connect.prepareStatement("SELECT myuser, webpage, datum, summary, comments FROM test.comments");
            System.out.println("here3");
            resultSet = preparedStatement.executeQuery();
            writeResultSet(resultSet);

            preparedStatement = connect.prepareStatement("DELETE FROM test.comments WHERE myuser='?';");
            preparedStatement.setString(1, "Test");
            preparedStatement.executeUpdate();

            resultSet = statement.executeQuery("SELECT * FROM test.comments;");
            System.out.println("Writing meta data");
            writeMetaData(resultSet);
        }
        catch (Exception e){
            throw e;
        }
        finally{ 
            close();
            System.out.println("ALMOST");
            }
        System.out.println("DOESN'T GET HERE");
    }

    private void writeMetaData(ResultSet resultSet) throws SQLException
    {
        System.out.println("The columns in the table are: ");
        System.out.println("Table: " + resultSet.getMetaData().getTableName(1));

        for(int i=1;i<=resultSet.getMetaData().getColumnCount(); i++)
        {
            System.out.println("Column " + i + " " + resultSet.getMetaData().getColumnName(i));
        }
    }

    private void writeResultSet(ResultSet resultSet) throws SQLException
    {
        while(resultSet.next())
        {
            String user = resultSet.getString("myuser");
            String website = resultSet.getString("webpage");
            String summary = resultSet.getString("summary");
            Date date = resultSet.getDate("datum");
            String comment = resultSet.getString("comments");

            System.out.println("User: " + user);
            System.out.println("website: " + website);
            System.out.println("summary: " + summary);
            System.out.println("date: " + date);
            System.out.println("comment: " + comment);
        }
    }

    private void close()
    {
        try{
            if(resultSet != null)
                resultSet.close();
            if(statement != null)
                statement.close();
            if(connect != null)
                connect.close();

        }
        catch(Exception e){
            e.printStackTrace();
            System.out.println("hello");
            System.out.println(e);
        }
    }
}//private inner class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:23:40.787

```
preparedStatement = 
    connect.prepareStatement("DELETE FROM test.comments WHERE myuser='?';");
preparedStatement.setString(1, "Test"); 
```

这是有问题的陈述。问号用引号括起来，因此语句解析器无法找到它，因此下一条语句抛出错误。

虽然参数类型是字符串，但相应的占位符不应包含在引号中。准备好的语句处理器将负责根据参数的数据类型生成适当的 SQL。因此，它始终是一个平原`?`，应该用作任何数据类型参数的占位符。

所以，这两个语句应该简单如下：

```
preparedStatement = 
    connect.prepareStatement("DELETE FROM test.comments WHERE myuser=?");
preparedStatement.setString(1, "Test"); 
```

# mobile - 如果不定义 top、left、right 或 left 属性，视图如何定位？

> ID：13774429
> 
> 赞同：-1
> 
> 时间：2012-12-08T04:19:22.687
> 
> 标签：mobile, view

应该使用什么来查看移动应用程序内的网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:29:02.513

这取决于您正在谈论的移动平台。在 iOS 上，您可以使用 UIWebView。您将希望对其进行子类化并定义任何自定义行为。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# objective-c - objective-c frameworks - 动态库安装名称

> ID：13774432
> 
> 赞同：0
> 
> 时间：2012-12-08T04:19:45.893
> 
> 标签：objective-c, frameworks

我是 Objective-c 和 osx 架构的新手。我开始尝试构建一个框架，然后使用它。我遵循了这个很棒的[教程](http://www.intridea.com/blog/2010/12/28/a-visual-guide-to-creating-an-embeddable-framework-for-mac-osx)。

在本教程中，我必须将框架的目标的**动态库安装名称**设置为`@rpath/MyFramework.framework/Versions/A/MyFramework.` 我的理解是**@rpath**将扩展为加载器（消费者）的**运行路径搜索路径**。

加载框架的责任似乎由框架作者和消费者作者分担。有人可以解释为什么框架的作者需要关注消费者的运行路径搜索路径吗？例如，如果框架作者将**动态库安装名称**设置为指向某个随机目录（而不是**@rpath**），客户端将如何使用框架？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:40:03.717

这在很大程度上取决于框架的使用方式。重要的是要记住，框架结构在平台上已经存在了很长时间。

对于系统框架，例如 Apple 创建的框架，您会很高兴他们将框架保存在已知位置。在这些情况下，它们使用的路径对于操作系统是固定的，它保证您不会意外加载错误的路径。此外，正如框架文档中所指出的，这些框架在机器上只加载一次，无论它们被使用了多少次（参见[Apple：什么是框架](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WhatAreFrameworks.html#//apple_ref/doc/uid/20002303-BBCEIJFI)）。这里的好处是性能，在许多情况下它既适用于代码，也适用于资源。

由于最近采取了随机化框架位置的举措，以及 Apple 在发布说明中的评论“Mountain Lion 在系统启动时随机重新定位内核、kexts 和系统框架”，看来他们仍然在共享这些资源，因此仍然从中获益。

对于嵌入式框架，情况要繁琐得多，多年来，Apple 已经通过各种方法使无论在哪里都能更容易地找到框架。同样，由于共享的性质，共享公共库要求的应用程序在机器上共享它们是有意义的，这既是为了提高效率，又是为了确保它们在共享数据时处于相同的版本. 因此，例如，如果您有两个单独的应用程序使用相同的框架来处理共享数据，您可以将共享框架放入`/Library/Frameworks`并让两个应用程序显式查找它，确保其他（可能较旧）版本的已被另一个应用程序加载的框架不会被使用。

最后，对于框架生产者和消费者来说，它目前的工作方式具有很大的灵活性。这意味着开发人员可以决定共享一个框架，包括一个框架的私有副本，或者甚至两者都做，这取决于框架是否存在于机器上。然而，这种灵活性的代价就是我们今天所拥有的复杂性。

您可能不想`@rpath`专门使用的另一个原因是紧密链接的嵌入式框架（是的，人们将框架嵌入到其他框架中）。在这些情况下，您不知道第一个框架在哪里加载，但您希望将嵌入式框架放入其中，以便它们保持在一起。在这种情况下`@loader_path`，是相对于加载它的代码而言的，因此您的插件框架可以正确地找到它的资源。

回答您关于有人将**动态库安装名称** 设置为“随机”位置的具体示例。在这种情况下，您必须知道该位置。有人这样做可能有很多原因，例如想要阻止其他程序重用，或者因为框架中有大量资源应该只安装在已知的共享位置。

# java - 变量“上下文”可能尚未初始化，java JNDI util

> ID：13774437
> 
> 赞同：1
> 
> 时间：2012-12-08T04:20:25.297
> 
> 标签：java, maven, maven-2, pmd

我目前正在为一家公司做一个项目，我们从微软获取了一个开源的家谱项目（源代码可以在这里找到：[Family History](https://familyhistory.hhs.gov/fhh-web/home.action) and the source code on their [GForge](http://gforge.nci.nih.gov/projects/fhh)），但我遇到了问题一直。我已经解决了大部分编译错误，因为它们是简单的异常错误，但这是我还没有能够解决的错误。我用谷歌搜索了这个问题并找到了许多类似的解决方案，但似乎没有一个工作得很好。如果您需要更多信息，请告诉我，我会尽力提供给您。虽然，我仍然是java的初学者。

编译器（它是 Apache Maven 2.2.1）给了我以下错误：

```
C:\mfhp-2.4.0\services\src\main\java\gov\hhs\fhh\service\locator\JndiUtil.java:
[68,4] variable context might not have been initialized 
```

这是该文件的代码：

```
public final class JndiUtil {

private static final Logger LOG = Logger.getLogger(JndiUtil.class);
private static final String RESOURCE_NAME = "jndi.properties";

private static JndiUtil theInstance = new JndiUtil();

private final InitialContext context;

private JndiUtil() {
    try {
        Properties props = getProperties();
        context = new InitialContext(props);
    } catch (NamingException e) { //This was a fix I did
        LOG.error("Unable to initialize the JNDI Util.", e);
        throw new IllegalStateException(e);
    } catch (IOException ioe) { //This was a fix I did
    LOG.error("IOException", ioe);
    }
}

/**
 * @return jndi (& jms) properties
 * @throws IOException on class load error
 */
public static Properties getProperties() throws IOException {
    Properties props = new Properties();
    props.load(JndiUtil.class.getClassLoader().getResourceAsStream(RESOURCE_NAME));
    return props;
}

/**
 * @param name name to lookup
 * @return object in default context with given name
 */
public static Object lookup(String name) {
    return lookup(theInstance.context, name);
}

/**
 * @param ctx context
 * @param name name to get
 * @return object in contect with given name
 */
public static Object lookup(InitialContext ctx, String name) {
    try {
        return ctx.lookup(name);
    } catch (NamingException ex) {
        //LOG.error("------------------Here is what's in the context--(looking for " + name + ")----------");
        LOG.error("------------------Error looking up ctx context for: " + name + ")----------");
        //dump(ctx, 0);
        //LOG.error("-----------------------------------------------------------");
        throw new IllegalStateException(ex);
    }
}
/*
 * Method taken out to avoid looping messages into log file
private static void dump(javax.naming.Context ctx, int indent) {
    try {
        NamingEnumeration<NameClassPair> en = ctx.list("");
        while (en.hasMore()) {
            NameClassPair ncp = en.next();
            String cn = ncp.getClassName();
            String n = ncp.getName();
            LOG.info("\t\t\t\t\t\t".substring(0, indent) + n + " : " + cn);
            try {
                Object o = ctx.lookup(n);
                if (o instanceof Context) {
                    dump((Context) o, indent + 1);
                }
            } catch (Exception e) {
                LOG.info(e);
            }
        }
    } catch (NamingException ex) {
        LOG.info(ex);
    }
}
*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:22:22.310

`context`必须在构造函数完成时初始化，因为它是一个`final`字段。

如果`Properties props = getProperties();`碰巧抛出异常，则`context`在构造函数结束时不会被初始化。异常将被捕获（通过您实施的“修复”）、处理和处理将继续。本质上，即使`context`没有初始化，您的“修复”也会导致您的类的构造函数成功结束。

# algorithm - Deutsch 算法的推广

> ID：13774439
> 
> 赞同：1
> 
> 时间：2012-12-08T04:20:28.057
> 
> 标签：algorithm, probability, quantum-computing

这个问题涉及对多于一位作为输入的函数所讨论的 Deutsch 问题的直接概括。这一次，我们有一个布尔函数 f，它接受一个 4 位数字作为输入并输出 0 或 1，即`f:{0,1}4→{0,1}`。因此，f 的输入是 16 个可能的 4 位二进制数之一：

```
0000, 0001, 0010, 0011, 0100, 0101, 0110, 0111, 1000, 1001, 1010, 1011, 1100, 1101, 1110, 1111. 
```

我们还被告知 f 是以下两种类型之一：

```
either f is a constant function, i.e., f(x) is the same for all 16 possible values of the input x, or
f is a balanced function, i.e., f(x) is 0 for exactly 8 of the possible 16 inputs and f(x) is 1 for the remaining 8 of the possible 16 inputs. 
```

我们可以做的是将 f 的电路用作“黑匣子”，将输入 x 提供给 f 的电路并观察输出 f(x)。这称为“查询”操作。

证明经典概率算法可以通过使用 2 个查询以至少 2/3 的概率确定 f 是平衡的还是恒定的。

**提示：（**显然，我们不能使用确定性算法来做到这一点。除非确定性算法看到至少 9 个输入值的输出，否则它无法确定函数是平衡的还是恒定的）。

考虑从 16 个可能的输入集中均匀随机地选择两个输入。您的最终结果可能在概率上取决于这两个查询的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:41:20.297

**编辑：**我错误地计算了一些概率。我现在还提到，我们需要为函数 f 随机选择 2 个不同的输入，以保证如果 f 是平衡的，那么我们知道看到各种可能结果的概率。

函数为常数的先验概率未知这一事实使这个问题变得更加困难，因为这意味着我们无法直接计算任何算法的成功概率。然而，我们将能够计算这个概率的*界限。*

我提出以下概率算法：

*   随机选择两个不同的 4 位值，并将每个值提供给函数 f。
*   如果看到 0,0 或 1,1，则以 2/3 的概率输出“常数”，以 1/3 的概率输出“平衡”。
*   否则（如果看到 0,1 或 1,0），总是报告“平衡”。

让我们先看看我们可以实际计算的东西：条件概率。

1.  **“什么是 P（正确|常数），即假设 f 是常数，我们的算法给出正确答案的概率？”** 当 f 为常数时，我们的算法在 2/3 的时间内报告正确答案。
2.  **“什么是 P（正确|平衡），即假设 f 是平衡的，我们的算法给出正确答案的概率？”** 当f平衡时，看到0,1或1,0的概率是2*(8/16 * 8/15) = 8/15，这种情况下肯定会输出正确答案。在剩下的 7/15 的情况下——即看到 0,0 或 1,1 的情况——正确答案将输出 1/3 的时间，因此正确输出的总比例将是 8/15 * 1 + 7/15 * 1/3 = 31/45 = 2/3 + 1/45 ≈ 0.6889。

现在假设函数为常数的先验概率为 p。那么算法给出正确答案的概率为

pCorrect(p) = p*P(正确|常数) + (1-p)*P(正确|平衡)。

鉴于 0 <= p <= 1，pCorrect(p) 必须至少为 min(P(correct|constant), P(correct|balanced))，并且最多为 max(P(correct|constant), P(correct |平衡））。2/3 和 31/45 的最小值是 2/3，**因此对于函数的任何先验概率为常数，pCorrect 的边界从下方为 2/3。** （将 p 视为一个“混合杠杆”可能会有所帮助，它控制每个术语包含多少。如果 p = 0 或 p = 1，那么我们实际上只有 P（正确|平衡）或 P（正确|常数)，对于 p 的任何中间值，我们将有一个中间值。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T05:06:09.283

查看不同类型的函数返回两个给定值的不同结果的概率：

```
constant  0,0  50%
constant  1,1  50%
balanced  0,0  4/8 * 3/7 = 21,4%
balanced  0,1  4/8 * 4/7 = 28.6%
balanced  1,0  4/8 * 4/7 = 28.6%
balanced  1,1  4/8 * 3/7 = 21.4% 
```

如果结果为 0,0 或 1,1，则函数有 70% 的机会保持不变，而对于结果 0,1 和 1,0，则函数有 100% 的机会平衡。因此，对于发生率为 71.4% 的情况，我们有 70% 的把握，而发生在 28.6% 的时间的情况，我们是 100% 确定的。平均而言，我们有 78.6% 的把握。

# iphone - 相对于 NSTimer 减少点数

> ID：13774442
> 
> 赞同：0
> 
> 时间：2012-12-08T04:21:17.573
> 
> 标签：iphone, ios, cocoa-touch, nstimer

如何相对于 NSTimer 每秒减少分数（例如问题 1：有 10 分）？我已经减少到这一点，直到 15 秒。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:57:24.077

把它放在你的界面中

```
@interface ViewController : UIViewController {
    NSTimer *timer;
    int seconds;
}
@property(nonatomic, strong) NSTimer *timer; 
```

这在您需要它的实施中

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];
    seconds = 1;    
}

- (void)timerTick:(id)sender{
    NSLog(@"%d",seconds);
    if (seconds == 15) {
        [self.timer invalidate];
    }
    seconds++;
} 
```

# python - Python 解码 AMF 响应

> ID：13774443
> 
> 赞同：2
> 
> 时间：2012-12-08T04:21:31.107
> 
> 标签：python, amf

我在 python 中向返回 AMF 的 Web 服务发出请求。我不知道它是AMF0还是AMF3。

```
r = requests.post(url, data=data)
>>> r.text
u'\x00\x03...' 
```

（[这里有完整的数据](http://pastebin.com/sdZnU8Ds)）

如何获取`r.text`并将其转换为 python 对象或类似对象？我发现[amfast](http://code.google.com/p/amfast/)但它的`Decoder`类返回一个`3.131513074181806e-294`假设 AMF0 和`None`AMF3。（两者都不正确）

```
from amfast.decoder import Decoder
decoder = Decoder(amf3=False)
obj = decoder.decode(StringIO.StringIO(r.text)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T05:19:44.363

你试过 PyAMF 吗？

```
from pyamf import remoting
remoting.decode(data) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T21:46:17.183

我看到您的代码有两个问题，第一个是`r.text`用于返回二进制数据。改为使用`r.content`。第二个问题是使用`decoder.decode`方法，它解码一个对象而不是一个数据包。改为使用`decoder.decode_packet`。

```
from amfast.decoder import Decoder
decoder = Decoder(amf3=True)
obj = decoder.decode_packet(r.content) 
```

使用 Pyamf 也可以，使用`r.content`.

# java - 多条件案件怎么办？

> ID：13774446
> 
> 赞同：26
> 
> 时间：2012-12-08T04:21:48.133
> 
> 标签：java, boolean, switch-statement, case

在我使用任何编程语言的 1 个月经验中，我假设`switch` `case`条件会接受括号中的任何内容作为布尔检查 thingamajig，即：

```
|| && < > 
```

明白我的意思了吗？

就像是

```
char someChar = 'w';
switch (someChar) {
case ('W' ||'w'):
    System.out.println ("W or w");
} 
```

可悲的是，似乎并没有那样工作。我不能在开关盒中进行布尔检查。

有办法解决吗？

顺便说一句，如果我听起来令人困惑，非常抱歉。我还不太清楚这种语言中所有内容的名称：X
感谢任何答案

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-08T04:25:23.950

对于这样的情况，您可以实现 OR：

```
switch (someChsr) {
case 'w':
case 'W':
    // some code for 'w' or 'W'
    break;
case 'x': // etc
} 
```

案例就像一个“goto”，多个 goto 可以共享同一行来开始执行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T04:26:45.237

你可以做 -

```
switch(c) {
    case 'W':
    case 'w': //your code which will satisfy both cases
              break;

    // ....
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-08T04:26:16.047

每个 case 后面通常都有一个“break;”。指示执行应在何处终止的语句。如果省略“break;”，则继续执行。您可以使用它来支持应以相同方式处理的多种情况：

```
char someChar = 'w';
{
case 'W':
  // no break here
case 'w': 
  System.out.println ("W or w");
  break;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T04:27:29.310

Switch case 是给定表达式的替代评估的分支。表达式在 switch 括号中给出，可以是 byte、short、char 和 int 数据类型。

> switch 语句的主体称为 switch 块。switch 块中的语句可以用一个或多个 case 或默认标签进行标记。switch 语句计算其表达式，然后执行匹配 case 标签后面的所有语句。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-04T12:43:17.913

对于 switch 语句的替代（**多个 if 条件**），我认为最好的解决方案是使用枚举。例如：考虑以下情况：-

```
 public enum EnumExample {

  OPTION1{

    public double execute() {
      Log.info(CLASS_NAME, "execute", "The is the first option.");
      return void;
    }

  },
  OPTION2{

    public double execute() {
      Log.info(CLASS_NAME, "execute", "The is the second option.");
      return void;
    }

  },
  OPTION3{

    public double execute() {
      Log.info(CLASS_NAME, "execute", "The is the third option.");
      return void;

  };

  public static final String CLASS_NAME = Indicator.class.getName();

  public abstract void execute();

} 
```

上述枚举可以按以下方式使用：

```
EnumExample.OPTION1.execute(); 
```

希望这对你们有帮助。

# android - 按下 home 时，服务中的套接字减慢

> ID：13774452
> 
> 赞同：1
> 
> 时间：2012-12-08T04:22:37.463
> 
> 标签：android, sockets

我正在开发一个语音通信应用程序。在我的应用程序中，有 6 个线程（
1\. 通过 TCP 套接字从 PC 接收数据；
2\. 使用 jni 解码接收到的数据；
3\. 使用 AudioTrack 播放解码数据；
4\. 使用 AudioRecord 记录 pcm 数据；
5\. 使用编码 pcm 数据jni; 6\. 通过 在服务中运行的
另一个 TCP 套接字发送编码数据。 它在主要活动中运行良好。但是，问题是，当按下 home 时，两个插座的工作速度变慢了。他们不能像在活动中那样快速地接收/发送数据，这会导致双方的语音延迟。当回到主要活动时，它们又能正常工作了。 我已经通过 using 设置了他们的线程优先级， 但它根本不起作用。

`android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);`

谁能给我一些建议？

# cross-compiling - 如何构建 LTTng 并将其部署到嵌入式 Linux 系统？

> ID：13774455
> 
> 赞同：3
> 
> 时间：2012-12-08T04:23:13.867
> 
> 标签：cross-compiling, embedded-linux, trace, lttng

[http://lttng.org/download](http://lttng.org/download)上提供的源 tarball 中的 README 文件似乎假设构建在同一 Linux 系统上，该 Linux 系统将成为跟踪的目标。我找到了其他资源来解释如何做到这一点（[LTTng Project YouTube 频道](http://www.youtube.com/user/lttng)有非常好的截屏视频），但我找不到任何关于如何交叉编译 LTTng 的说明（具体来说，我猜是 liburcu、LTTng-UST 、LTTng-tools 和 LTTng-modules），并将其全部安装在嵌入式 Linux 系统上（我可以在其中构建或重建内核，使用设备树 blob 和 - 目前 - 基于 ramdisk 的文件系统）。

我在哪里可以找到有关如何执行此操作的详细信息？

**更新：**正如[Marko](https://stackoverflow.com/users/450758/marko)在下面的第一条评论中指出的那样，LTTng 工具是使用`autoconf`. 我从理论上理解，我可以找出一个“--host”选项`configure`，类似于[这个答案](https://stackoverflow.com/a/5796302/4766)。也许我需要一个像“ARCH=arm”这样的参数来`make`像我在构建内核时使用的那样。`make install`但是，在将要使用它们的同一台机器上构建 LTTng 组件时，使用的交叉编译等效项是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T17:03:12.933

LTTng 2.x 不再需要打补丁的内核。您需要加载内核模块 (lttng-modules) 才能进行内核跟踪。支持的最低 Linux 内核版本是 2.6.38。您可以低至 2.6.32，但您需要根据[LTTng 2.1 发行说明](http://bitly.com/Wsuh7v "LTng 2.1")和[lttng-modules README](http://bit.ly/SoLcun "lttng 模块自述文件")将 3 个补丁应用到您的内核。

为了回答您的交叉编译问题，这是我用来交叉编译 LTTng 工具链（用于用户空间跟踪）的常用过程：

```
export HOST=<your host triplet (e.g. arm-linux-gnueabi)>

# Make sure your cross-compiler can be found in your $PATH
export SYSROOT=<path to the target sysroot>

export CFLAGS="--sysroot=$SYSROOT"
export CPPFLAGS="-I$SYSROOT/include"
export CXXFLAGS=$CFLAGS
export LDFLAGS="--sysroot=$SYSROOT -L$SYSROOT/usr/lib -L$SYSROOT/lib"

# Fix RPL_MALLOC issue. See [Autoconf and RPL_MALLOC][3] for more details.
export ac_cv_func_malloc_0_nonnull=yes

# Cross compile userspace-rcu. You can also use a source tarball.
git clone git://git.lttng.org/userspace-rcu.git
cd userspace-rcu
./bootstrap
./configure --prefix=$SYSROOT --host=$HOST --with-sysroot=$SYSROOT
make
make install

# Cross compile lttng-ust. You can also use a source tarball.
git clone git://git.lttng.org/lttng-ust.git
cd lttng-ust
./bootstrap
./configure --prefix=$SYSROOT --host=$HOST --with-sysroot=$SYSROOT
make
make install

# Cross compile lttng-tools. You can also use a source tarball.
git clone git://git.lttng.org/lttng-tools.git
cd lttng-tools
./bootstrap
./configure --prefix=$SYSROOT --host=$HOST --with-sysroot=$SYSROOT
make
make install 
```

您应该能够使其适应您的平台。如果你想做内核跟踪，你还需要以类似的方式交叉编译 lttng-modules。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-05T20:57:24.690

更新：ARM 的 LTTng 交叉编译现在更简单了。

首先，安装所需的依赖项。例如，使用 Emdebian 工具链：

```
xapt -a armel -m libc6-dev libpopt-dev uuid-dev liburcu-dev 
```

然后：

```
export HOST=arm-linux-gnueabi
export SYSROOT=<path to the target sysroot>

git clone git://git.lttng.org/lttng-ust.git
cd lttng-ust
./bootstrap
./configure --host=$HOST --prefix=$SYSROOT/usr/local
make -j8
make install

git clone git://git.lttng.org/lttng-tools.git
cd lttng-tools
./bootstrap
./configure --host=$HOST --prefix=$SYSROOT/usr/local
make -j8
make install 
```

备注：有时由于“测试”子目录二进制文件而导致失败。在这种情况下，只需从 Makefile 中删除“测试”（在执行 ./configure 之后）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-15T10:46:28.943

我只想分享我使用的构建脚本。它还编译了一些其他缺失的依赖项。高温高压

它编译以下内容：

libuuid-libxml2-popt-libiconv-zlib-用户空间-rcu-lttng-ust-lttng-tools-lttng-modules

```
#!/bin/bash

# install this stuff before
# apt-get install  lib32z1 lib32ncurses5 lib32bz2-1.0 bison flex build-essential
# change your flags here

export PATH=/home/build/sam9/compiler/arm-2014.05/bin:$PATH
export ac_cv_func_malloc_0_nonnull=yes ac_cv_func_realloc_0_nonnull=yes
export HOST=arm-none-linux-gnueabi
export SYSROOT=/home/build/sam9/sysroot

G_CC=arm-none-linux-gnueabi-gcc 
G_PREFIX=/usr/local

G_ARCH=arm
G_CROSS_COMPILE=arm-none-linux-gnueabi-
G_KERNELDIR=/home/build/sam9/linux-3.4.106

G_CFG_FILE="$PWD/${0%\.*}.conf" # tracking download/compile steps

G_TARBALL_DIR=$PWD/tarballs
G_SOURCES_DIR=$PWD/sources
G_BUILD_DIR=$PWD/builds

# steps for tracking progress in $G_CFG_FILE
step_start=0
step_download=1
step_compile=2

echo
echo "This script will compile and install lttng and some deps"
echo "Building for HOST=$HOST"
echo
echo "Builds are located in $G_BUILD_DIR"
echo "Sources are located in $G_SOURCES_DIR"
echo "Tarballs are located in $G_TARBALL_DIR"
echo "sysroot is located at $SYSROOT"
echo "prefix is set to $G_PREFIX"
echo
echo "press Enter to continue or CRTL-C to abort"
read

[ -e "$G_CFG_FILE" ] && . "$G_CFG_FILE" &> /dev/null

function get_src_dir()
{
    local filename="$1"
    tar -tf "$G_TARBALL_DIR/$filename"| sed -e 's@/.*@@' | uniq
}

function build()
{
    local filename="$1"
    local what="$2"
    local dir_name="$3"
    local state="$4"
    local do_bootstrap=$5

    if [ $state -eq $step_download ] ; then

        if $do_bootstrap ; then
            pushd $G_SOURCES_DIR/$dir_name
            ./bootstrap
            popd
        fi

        mkdir -p "$G_BUILD_DIR/$dir_name"       
        pushd "$G_BUILD_DIR/$dir_name"      
        if [ -n "$patch" ] ; then
            pushd "$G_SOURCES_DIR/$dir_name"        
            wget $patch -O- | patch -p1
            popd
        fi
        "$G_SOURCES_DIR/$dir_name"/configure --host=$HOST --prefix=$SYSROOT/${G_PREFIX} $EXTRA_CONF
        make -j3
        make install && echo "$what=$step_compile" >> $G_CFG_FILE
        popd
    fi
    if [ $state -eq $step_compile ] ; then
        echo ">> $what is already compiled"
    fi
}

function download()
{
    local url="$1"
    local what="$2"
    local filename="$3"
    local state="$4"

    if [ $state -lt $step_download ] ; then
        wget "$url" -O "$G_TARBALL_DIR/$filename"
        echo "$what=$step_download" >> $G_CFG_FILE
        tar -C $G_SOURCES_DIR -xf "$G_TARBALL_DIR/$filename"
        . "$G_CFG_FILE" &> /dev/null
    fi
}

function download_git()
{
    local url="$1"
    local what="$2"
    local filename="$3"
    local state="$4"

    if [ $state -lt $step_download ] ; then

        pushd $G_SOURCES_DIR
        git clone $url
        popd
        echo "$what=$step_download" >> $G_CFG_FILE
        . "$G_CFG_FILE" &> /dev/null
    fi
}

function init()
{
    local what="$1"
    eval state=\$$what

    if [ ! -n "$state" ] ; then
        echo "$what=$step_start" >> $G_CFG_FILE
        . "$G_CFG_FILE" &> /dev/null
    fi

    eval state=\$$what
}

function get_em()
{
    local url="$1"
    local what="$2"
    local filename=$(basename $url) 

    init "$what"
    download "$url" "$what" $filename $state
    eval state=\$$what
    local dir_name=$(get_src_dir $filename)
    build $filename "$what" $dir_name $state false
}

function get_em_git()
{
    local url="$1"
    local what="$2"
    local do_bootstrap="$3"
    local filename=$(basename $url) 
    filename=${filename/.git}

    init "$what"
    download_git "$url" "$what" $filename $state
    eval state=\$$what

    build $filename "$what" $filename $state $do_bootstrap
}

echo "create directories"
mkdir -p "$G_TARBALL_DIR" "$G_SOURCES_DIR" "$G_BUILD_DIR" &>/dev/null

########################
# define the packages we want to compile
########################

# this are the dependencies that are missing for our sysroot
# we will compile them and install the to the $SYSROOT
#
# --- BEGIN --- dependencies
what=libuuid
url=http://downloads.sourceforge.net/project/libuuid/libuuid-1.0.3.tar.gz
get_em $url "$what"

what=libxml2
url=ftp://gd.tuwien.ac.at/pub/libxml/libxml2-sources-2.9.2.tar.gz
EXTRA_CONF=--without-python
get_em $url "$what"
unset EXTRA_CONF

what=popt
url=ftp://anduin.linuxfromscratch.org/BLFS/svn/p/popt-1.16.tar.gz
get_em $url "$what"

what=libiconv
url=http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.14.tar.gz
patch=http://data.gpo.zugaina.org/gentoo/dev-libs/libiconv/files/libiconv-1.14-no-gets.patch
get_em $url "$what"
unset patch

what=zlib
url=http://zlib.net/zlib-1.2.8.tar.gz
init "$what"
filename=$(basename $url)   
download "$url" "$what" $filename $state
if [ $state -eq $step_compile ] ; then
    echo ">> $what is already compiled"
else
    dir_name=$(get_src_dir $filename)
    pushd $G_SOURCES_DIR/$dir_name
    CC=$G_CC \
    LDSHARED="$G_CC -shared -Wl,-soname,libz.so.1" \
    ./configure --shared --prefix=$SYSROOT/${G_PREFIX}
    make
    make install prefix=$SYSROOT/${G_PREFIX} && echo "$what=$step_compile" >> $G_CFG_FILE
    popd
fi

# --- END --- dependencies

#######################
# compile lttng related packages and install into $SYSROOT
what=userspace_rcu
url=git://git.lttng.org/userspace-rcu.git
get_em_git $url "$what" true

what=lttng_ust
url=git://git.lttng.org/lttng-ust.git
export CPPFLAGS="-I$SYSROOT/${G_PREFIX}/include"
export LDFLAGS="-L$SYSROOT/${G_PREFIX}/lib -Wl,-rpath-link=$SYSROOT/${G_PREFIX}/lib"
get_em_git $url "$what" true
unset CPPFLAGS
unset LDFLAGS

what=lttng_tools
url=git://git.lttng.org/lttng-tools.git
export CPPFLAGS="-I$SYSROOT/${G_PREFIX}/include"
export LDFLAGS="-L$SYSROOT/${G_PREFIX}/lib -Wl,-rpath-link=$SYSROOT/${G_PREFIX}/lib"
get_em_git $url "$what" true
unset CPPFLAGS
unset LDFLAGS

what=lttng_modules
url=git://git.lttng.org/lttng-modules.git
init "$what"
filename=$(basename $url)   
filename=${filename/.git}
download_git "$url" "$what" $filename $state
if [ $state -eq $step_compile ] ; then
    echo ">> $what is already compiled"
else
    #dir_name=$(get_src_dir $filename)
    pushd $G_SOURCES_DIR/$filename
    make ARCH=$G_ARCH CROSS_COMPILE=$G_CROSS_COMPILE KERNELDIR=$G_KERNELDIR -j4
    make ARCH=$G_ARCH CROSS_COMPILE=$G_CROSS_COMPILE KERNELDIR=$G_KERNELDIR INSTALL_MOD_PATH=$SYSROOT modules_install \
        && echo "$what=$step_compile" >> $G_CFG_FILE
    popd
fi

echo
echo "INFO: the build progress for all packages is tracked in $G_CFG_FILE" 
```

# java - 将项目添加到 Hashtable LinkedList

> ID：13774456
> 
> 赞同：0
> 
> 时间：2012-12-08T04:23:21.543
> 
> 标签：java, linked-list, hashtable

我在每个元素中都有一个 Hashtable （`map`按照[此处](http://en.wikipedia.org/wiki/Hash_table#Separate_chaining)`LinkedLists`的说明实现单独的链接）。我怎样才能为表中的每个元素添加新节点？`LinkedList`

我正在绞尽脑汁，我认为
`map.get(index).add(new Object);`
这行不通，仅仅是因为`get()`Hashtable 的方法获取了键的值，而不是相反...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:26:02.453

> map.get(index).add(新对象);

只要`index`是键而不是计数器，并且您的链表是针对该键存储的，那么该语句就可以正常工作。

Map 将数据存储在 (Key, Value) 对中，这与存储在可通过计数器访问的连续位置的数组不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:29:04.420

假设

```
Map<KeyClass,List<Item>> map = new HashMap<KeyClass,List<Item>>(); 
```

尝试

```
KeyClass key = ...;
List<Item> list = map.get(key);
if (list == null)
{
    list = new LinkedList<Item>();
    map.put(key,list);
}
list.add(...whatever...); 
```

# android - 如何更改surfaceview视频录制的角度？

> ID：13774461
> 
> 赞同：0
> 
> 时间：2012-12-08T04:23:59.677
> 
> 标签：android, android-layout, video, surfaceview, android-mediaplayer

我正在使用`surfaceview`媒体录像机录制视频，它正在录制，但显示角度偏移了 90 度，这与实际的房间记录不同，也就是说，如果您使用我的应用程序录制房间，显示将偏移 90 度，房间天花板将在左侧，因此您的房间展示。任何人都可以帮助我解决这个问题以录制直角视频。这是我的代码供您参考，请在此处查看我的编码
main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="horizontal"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<SurfaceView
  android:id="@+id/videoview" 
  android:layout_height="480px" android:layout_width="248dp"/>
<Button
  android:id="@+id/mybutton"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="REC"
  android:textSize="12dp"/> 
</RelativeLayout>` 
```

`
这是我的清单文件

```
 <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".SurfaceAngleRecActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest>` 
```

`这是我的代码：

```
SurfaceAngleRecActivity.java                                        
public class SurfaceAngleRecActivity extends Activity implements SurfaceHolder.Callback
        {
        MediaRecorder mediaRecorder;
        SurfaceHolder surfaceHolder;
        boolean recording;
        Button record;
        MediaPlayer mediaPlayer;
    boolean pausing = false;

        String PlayPath ="/sdcard/myvideo.mp4";
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) 
       {
           super.onCreate(savedInstanceState);
           mediaRecorder = new MediaRecorder();
           initMediaRecorder();

           setContentView(R.layout.main);
           recording = false;

           SurfaceView myVideoView = (SurfaceView)findViewById(R.id.videoview);
           surfaceHolder = myVideoView.getHolder();
           surfaceHolder.addCallback(this);
           surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

           record=(Button)findViewById(R.id.mybutton);

           record.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(!recording)
               {
                   mediaRecorder.start();
                   recording = true;
                   //Stop.setVisibility(View.VISIBLE);
                   //Record.setVisibility(View.INVISIBLE);
                   record.setText("STOP");
                   //Play.setEnabled(false);
                   //Pause.setEnabled(false);
               }else
               {
                   mediaRecorder.stop();
                   mediaRecorder.release();
                   recording = false;
                   //Record.setVisibility(View.VISIBLE);
                   //Stop.setVisibility(View.INVISIBLE);
                   //Record.setText("Record");
                   //Play.setEnabled(true);
                   //Pause.setEnabled(true);
                  // finish();
                   }
            }
        });

         }

        public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

        }
        public void surfaceCreated(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            prepareMediaRecorder();
        }
        public void surfaceDestroyed(SurfaceHolder holder) {
            // TODO Auto-generated method stub

        }
        private void initMediaRecorder()
           {
               mediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
               mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
               //File file=new File(Environment.getExternalStorageDirectory(), PlayPath);
               CamcorderProfile camcorderProfile_HQ =CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
               mediaRecorder.setProfile(camcorderProfile_HQ);
               mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
               //mediaRecorder.setVideoSize(20, 20);
               //mediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
           //mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
           }

           private void prepareMediaRecorder()
           {
               mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
               try
               {
                   mediaRecorder.prepare();
                   //mediaRecorder.setVideoSize(150, 200);
               }
               catch (IllegalStateException e) 
               {
                   //TODO Auto-generated catch block
                   e.printStackTrace();
               }
               catch (IOException e) 
               {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               }
           }

        }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T09:37:14.470

在 Manifest 中将活动的方向更改为横向。

`<application android:icon="@drawable/icon" android:label="@string/app_name"> <activity android:name=".SurfaceAngleRecActivity" android:screenOrientation="landscape" android:label="@string/app_name"> <intent-filter> <action android:name="android.intent.action.MAIN" /> <category android:name="android.intent.category.LAUNCHER" /> </intent-filter> </activity> </application>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T12:12:48.043

```
private void initMediaRecorder()
           {
               mediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
               mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
               //File file=new File(Environment.getExternalStorageDirectory(), PlayPath);
               CamcorderProfile camcorderProfile_HQ =CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
               mediaRecorder.setProfile(camcorderProfile_HQ);
               mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
               **mediaRecorder.setOrientationHint(90);**
           } 
```

# javascript - JavaScript 加法和乘法

> ID：13774463
> 
> 赞同：-3
> 
> 时间：2012-12-08T04:24:13.297
> 
> 标签：javascript

在不更改此功能的情况下：

```
function operate(operator, operand1, operand2) {
    return operator(operand1, operand2);
} 
```

我想写出：

```
var x = operator(add, operate(add, 2, 3), operate(multiply, 4, 5)); 
```

并得到 25 作为 x 的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:31:53.907

你有一个错字，`operator`应该`operate`在：

```
var x = operate(add, operate(add, 2, 3), operate(multiply, 4, 5)); 
```

然后，您需要定义`add`和`multiply`成为 2 个函数，每个函数接受 2 个参数并返回 2 个参数的结果并执行适当的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T04:32:31.847

原因是它`operator`应该是一个函数，但执行需要`add`并被`multiply`定义为：

```
function add(x,y) {
    return x + y;
}

function multiply(x,y) {
    return x * y;
} 
```

另外，我认为有一个错字：

```
ReferenceError: operator is not defined 
```

我会：

```
var x = operate(add, operate(add, 2, 3), operate(multiply, 4, 5)); 
```

这给了`x = 25`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T04:39:45.090

在这里，您可以创建两个以运算符命名的函数，您正在使用“add”和“multiply”，因为 javascipt 允许函数传入参数，您的问题就解决了

```
function add(x,y) {
    return x + y;
}

function multiply(x,y) {
    return x * y;
} 
```

PS：这里有一个错字“var x = operator(add,operate(add, 2, 3),operate(multiply, 4, 5));" 这里的操作员是操作。

# php - 创建哈希并对其进行加密/加盐

> ID：13774464
> 
> 赞同：0
> 
> 时间：2012-12-08T04:24:32.673
> 
> 标签：php, hash, passwords, openssl

所以另一个堆栈溢出用户推荐了以下代码来创建哈希：

```
$password = 'my password';
$salt = strtr(base64_encode(openssl_random_pseudo_bytes(18)), '+', '.');
$pwhash = crypt($password, sprintf('$2y$%02d$%s', 13, $salt)); 
```

如果我没有安装 openssl，openssl_random_pseudo_bytes 是否还有其他功能？安装它是否有意义，如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:08:42.410

尝试使用`mcrypt_create_iv(18)`. 尽管它用于生成初始化向量以进行加密，但`/dev/random`默认情况下它用于生成随机向量。

编辑： http: [//php.net/manual/en/function.mcrypt-create-iv.php](http://php.net/manual/en/function.mcrypt-create-iv.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:22:52.600

PHP 5.5 将拥有自己的函数`password_hash()`并`password_verify()`创建 BCrypt 哈希（这就是你的函数所做的）。有一个适用于 PHP 5.3/5.4 的[兼容包](https://wiki.php.net/rfc/password_hash)，可以以单个 php 文件[password.php](https://github.com/ircmaxell/password_compat/blob/master/lib/password.php)的形式下载。

这是一个做得很好的实现，它使用 mcrypt_create_iv，但回退到 openssl_random_pseudo_bytes。

```
mcrypt_create_iv($raw_length, MCRYPT_DEV_URANDOM); 
```

请注意，mcrypt_create_iv 函数从 读取`MCRYPT_DEV_URANDOM`，这足以创建密码盐（盐应该是唯一且不可预测的）。与默认值 MCRYPT_DEV_RANDOM 相比，如果没有足够的可用熵，它不会阻塞服务器。

# ios - 奇怪的 UIWebView 错误/行为

> ID：13774471
> 
> 赞同：3
> 
> 时间：2012-12-08T04:25:27.070
> 
> 标签：ios, ios5, uiwebview, ios6

我们的应用程序中有一个 UIWebView，显示从内存（不是文件）加载的 HTML 数据。我们遇到了一些非常奇怪的错误/行为。有些页面需要很长时间才能呈现（1-2 分钟）。我们查看了页面的来源，它确实非常忙于编写糟糕的 CSS 和 HTML（不在我们的控制范围内）。但是，我们注意到，如果我们设置一个 webview 来加载页面，然后按下电源按钮关闭 iPhone 的屏幕，然后立即再次按下电源按钮，并返回我们的应用程序，webview 会立即呈现页面。

有没有人经历过这个？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T01:16:59.273

所以，呃，忘了回答这个问题。结果是我们的一些 HTML 数据包含链接到内部组织 URL 的图像，这些 URL 在外部无法访问。由于 web 视图没有询问代理是否应该加载，我们不知道这些资源。按下电源按钮会导致连接断开，从而呈现页面。

# upnp - 将网络视频流式传输到 Roku

> ID：13774478
> 
> 赞同：4
> 
> 时间：2012-12-08T04:26:13.800
> 
> 标签：upnp, dlna, roku, ssdp

有谁知道如何从技术上将视频（即 Youtube 视频）发送到 Roku 播放器？有一个“Twonky Beam”应用程序允许流式传输，它似乎做的是将 .mp4 文件发送到 Roku 进行播放。在此处查看演示：http: [//gigaom.com/video/youtube-on-roku-twonky-airplay/](http://gigaom.com/video/youtube-on-roku-twonky-airplay/)

这是在没有“Twonky Beam”Roku 应用程序的情况下完成的。看起来像 Roku 原生支持的东西，虽然我找不到任何文档。

我想知道他们是如何在没有 Roku 成为 UPNP 或 DLNA 设备的情况下做到这一点的。

这里的任何见解都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T20:19:40.817

有关如何从 YouTube[此处](http://forums.roku.com/viewtopic.php?f=34&t=45537&p=310089#p310089)和[此处提取 mp4 URL 的讨论](http://forums.roku.com/viewtopic.php?f=34&t=51793&p=352290&hilit=youtube#p352290)

关于如何在 Roku 上进行 airplay 风格的视频播放，您可以使用[外部控制协议](http://sdkdocs.roku.com/display/RokuSDKv48/External+Control+Guide)启动一个带有您希望播放的视频 URL 的频道，或者一旦您的频道启动，我们将 ECP 与roInput 组件将 URL 发送到您的频道。然后，您的频道会将 URL 发送到视频播放组件，该组件将从 Youtube 或您发送的任何来源开始播放。如果您想从您的设备 (android/IOS) 播放 URL，您需要在设备上运行 Web 服务器以向设备提供视频。

这是第二个线程中引用的[开源 YouTube 项目。](http://bitbucket.org/jesstech/roku-youtube/overview)

如果他们认为您的项目不符合他们的目标，则任何播放 YouTube 视频的非官方项目都会被 YouTube 删除 DMCA。

roInput 并没有很好的记录，下面是一个演示 roInput 和启动参数的示例（启动参数是您在 http POST 中包含的关键字）：

```
function main(params as object)

    if params.parameter <> invalid then 
        print "This channnel was launched with Launch Parameters!"
        print params
    else
        print "launched without input parameters"           
    end if

    port=CreateObject("roMessagePort")
    input=createobject("roInput")
    input.setmessageport(port)

    while true
        msg=wait(100,port)
        if type(msg)="roInputEvent" then
          params=msg.getinfo()
          print params
         end if
    end while
end function 
```

因此，如果您想发送多个比特率视频，您的参数可能是“vidurl=http://myserver.com/video300k.mp4&vidurl=http://myserver.com/video600k.mp4”。

RokuSDK 中有很多关于如何在 Roku 上播放视频的示例，最简单的是 simplevideoplayer 示例。

关于 UPNP 问题的最后一部分，您可以通过端口 8060 上的蛮力 telnet 到每个 ip 或使用 SSDP 在您的局域网上找到一个 roku，也记录在上面链接的 ECP 指南中

# java - 已建立连接但没有互联网的 UnknownHostException 超时

> ID：13774480
> 
> 赞同：2
> 
> 时间：2012-12-08T04:26:21.487
> 
> 标签：java, android, timeout, connection, connectivity

我有一个有趣的问题。

我有一个应用程序，在它内部，我试图解释手机连接到路由器的情况，但该路由器未连接到互联网。

我尝试了多种建立连接的方法，但没有一个超时可以解决这种情况。

我试过了：

```
HttpParams httpParameters = new BasicHttpParams();
int timeoutSocket = 1000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutSocket); 
```

我也试过：

```
HttpURLConnection huc = (HttpURLConnection)serverAddress.openConnection();

huc.setDoOutput(true);
huc.setRequestMethod("PUT"); // For amazon
//huc.setRequestMethod("POST"); // For regular server.
huc.setRequestProperty("Content-Type", "text/plain");
huc.setRequestProperty("Content-Length", String.valueOf(bytes));
huc.setFixedLengthStreamingMode(bytes);
huc.setConnectTimeout(1000); // Establishing connection timeout
huc.setReadTimeout(1000); 
```

但在这两种情况下，当我执行/获取输出流时，大约需要 20 秒才能收到 UnknownHostException 错误。

我希望在得出该结论之前减少到最多 5 秒。

有没有办法做到这一点？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:32:54.673

通过大量搜索并通过[此](http://web.archiveorange.com/archive/v/BWWzi6klzyupZVleUYPL)链接的帮助，我找到了一个可靠的解决方案，到目前为止似乎可以工作。

我对结论的理解是，当我使用以下方法时：

```
DataOutputStream wr = new DataOutputStream(huc.getOutputStream()); 
```

或者

```
InputStream is = ucon.getInputStream();
BufferedInputStream bis = new BufferedInputStream(is); 
```

（上传或下载）

引擎盖下发生了很多事情。包括一个 DNS 查询调用。在没有连接的情况下，但在连接到路由器时，这需要大约 20 秒才能最终到达 UnknownHostException。

但是，如果我在执行上述代码之前先添加这行代码：

```
InetAddress iAddr = InetAddress.getByName("myserverName.com"); 
```

然后它会给我正确的 SocketTimeOutException 并准确地响应我希望/期望的方式。上面的代码行显然缓存了 DNS 查找，并且超时按预期工作。

另外，需要注意的是：一旦失败被缓存，执行上面的代码将与前面的其他代码一样长时间失败。（不能准确告诉你是什么触发了这个）但是如果你再次连接到互联网，然后再次进入连接但没有连接状态，早期的成功将被缓存，超时将再次正常工作。

这并不是特别容易找到或弄清楚，所以我希望这对某人有所帮助。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:30:26.867

您可以实现一个限制为 5000 毫秒的 CountDownTimer，请参阅此[http://dewful.com/?p=3](http://dewful.com/?p=3)

# android - android 中着色器文件的适当位置在哪里：Assets、Raw 或其他地方？

> ID：13774482
> 
> 赞同：2
> 
> 时间：2012-12-08T04:26:40.993
> 
> 标签：android, shader

我进行了一些搜索，但没有找到合适的位置来存储我的着色器文件？资产，资源的原始文件夹，还是其他地方？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T05:44:36.073

我过去使用过这两种方法，并且都可以正常工作。

要考虑的一件事是，您是否要在任何时间点在库项目中使用此代码。如果你是，我会推荐使用 res/raw 目录，因为资产对图书馆项目有限制。

从文档中：

> **图书馆项目不能包含原始资产**
> 
> 这些工具不支持在库项目中使用原始资产文件（保存在 assets/ 目录中）。应用程序使用的任何资产资源都必须存储在应用程序项目本身的 assets/ 目录中。但是，支持保存在 res/ 目录中的资源文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:38:25.627

老实说，我两者都不会。将它们存储在您的代码本身中可能是最安全和最安全的方法。（也就是说，在某个类中使它们成为`public static final String`变量。）我可能会`StringBuilder`在应用程序启动或初始化类时使用它们来构建它们。

如果您更愿意自己存储文件，请使用`assets`. 使用`res/raw`对文件名有限制，您不能在`raw`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T04:35:07.037

将着色器文件存储在资产文件夹中

# jquery - jQuery Mobile：更改页面后向 ID 添加文本

> ID：13774486
> 
> 赞同：0
> 
> 时间：2012-12-08T04:27:45.503
> 
> 标签：jquery, jquery-mobile

用户登录后，我在 HTML5 localstorage 中设置了他们的用户名。我想将用户名设置到下一页的顶部工具栏中，但由于某种原因，它不会更改`changepage`. 页面更改但未插入文本。我究竟做错了什么？

**编辑**

```
 success: function(data) { 
        if(data.status == "success") {
                $.mobile.changePage("inventory.html");
                var username = localStorage.getItem('username');
                $("#top_username").html(username);  
            };
        if(data.status == "failed") {
            alert('Incorrect Login Information');
            };
        } 
```

编辑：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:58:25.597

```
$(function(){ // DOM is ready! wow, go for #top_username

    var username = localStorage.getItem('username');
    $("#top_username").html(username);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:06:20.310

如果您要更改页面，则必须在新页面事件执行期间完成所有针对新页面的活动。

在您的情况下，您必须选择：

1.  假设您的新页面 id 是 newpage 我们这个事件来改变它：

    ```
    $('#newpage').live('pagebeforeshow',function(e,data){
        var username = localStorage.getItem('username');
        $("#top_username").html('<h1>' + username + '</h1>');
    } 
    ```

2.  ```
    $('#newpage').live('pagebeforeshow',function(e,data){
        // Get it from prevPage
        var username = data.prevPage.find('#username').val();
        $("#top_username").html('<h1>' + username + '</h1>');
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T07:06:21.217

这是因为您正在尝试从上一页添加您的 html 内容

```
var username = localStorage.getItem('username');
$("#top_username").html(username); 
```

应该在inventory.html页面中，你应该在这样的函数里面

```
$(document).on('pageinit'). 
```

然后它应该可以完美运行。希望这会有所帮助。

# linux - 尝试运行可执行文件 - 文件或目录不存在，但文件存在。我可以执行它，但只能从它所在的目录中执行

> ID：13774490
> 
> 赞同：-1
> 
> 时间：2012-12-08T04:28:20.223
> 
> 标签：linux

正如标题所示，我正在尝试运行一个可执行文件。当我尝试从其他目录运行它时，我收到“文件或目录不存在”错误。但是，当我在文件所在的目录中时，我没有问题。有什么建议么？

遇到此问题的其他所有人都永远无法执行他们的文件，无论他们当前位于哪个目录！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:57:43.597

要执行 /tmp/virus.tmp，您需要运行：

```
/tmp/virus.tmp 
```

您尝试改为运行：

```
./tmp/virus.tmp 
```

失败，因为它试图做的是`tmp`在当前目录的目录中找到程序。（`.`是当前目录。）例如，如果您在`/home/user/`并键入`./tmp/prog`，它将尝试执行`/home/user/tmp/prog`。

# json - 如何使用 Phonegap + jQuery Mobile 呈现动态表单？

> ID：13774503
> 
> 赞同：0
> 
> 时间：2012-12-08T04:31:57.630
> 
> 标签：json, cordova, jquery-mobile, cross-domain

我正在使用 Phonegap + jQueryMobile 开发一个 iPhone 和 Android 应用程序，它接收一个 JSON 格式，该格式之前由我的 ruby​​ on rails Web 应用程序生成。

问题是，表格太大了。它有很多字段（有很多类型），目前在我的 Phonegap 应用程序中加载（渲染）这个表单需要太多时间，更糟糕的是有时应用程序会中断。

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:13:05.367

这是一个很长的镜头，但您可以尝试执行以下操作：

*   使用 JSON 仅检索字段*数据*（而不是整个表单 HTML）。
*   通过 JavaScript 生成整个表单并使用 JSON 数据填充字段。不要一次性设置整个 HTML。而是在准备好使用时插入元素`appendChild`。

这种方法需要一些时间来开发，但它可能会加快您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:37:35.150

我找到了一个很好的方法来做到这一点。我将 html 表单部分存储在数据库表中，然后通过 AJAX 加载每个部分。它适用于我的 Phonegap 应用程序。

# javascript - 根据 $(document).width() 加载 Google Ad 代码

> ID：13774504
> 
> 赞同：1
> 
> 时间：2012-12-08T04:32:27.583
> 
> 标签：javascript, jquery

实施 Google Ads 但尝试根据 $(document).width() 提供两个广告脚本之一。

尽我所能阅读和搜索，到目前为止，我所得到的并没有出现损坏（没有可见的错误），只是它实际上并没有插入谷歌广告。（是的，错过了那里的重点！）

首先，我设置了放置广告的区域：

```
<div id="google-ad"></div> 
```

接下来是确定文档宽度的逻辑，并插入必要的 Google Ad 脚本：

```
if ( $(document).width() < 728 ) {
    $("#google-ad").html('<script type="text/javascript"><!--google_ad_client = "ca-pub-GOOGLE-ID";/* AD NAME HERE */google_ad_slot = "GOOGLE-NUMBER"; google_ad_width = 320; google_ad_height = 50;//--><\/script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"><\/script>');
} else {
$("#google-ad").html('<script type="text/javascript"><!--google_ad_client = "ca-pub-GOOGLE-ID";/* AD NAME HERE */google_ad_slot = "GOOGLE-NUMBER"; google_ad_width = 728; google_ad_height = 90;//--><\/script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"><\/script>');
                }); 
```

理论上，我认为这是可行的，但实际上是行不通的。所以，我肯定做错了什么。欢迎任何帮助或指导。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:42:53.477

您说确定文档宽度的逻辑是在您要插入的 div 之后遵循的，这使我相信 DOM 尚未准备好并且您没有恢复宽度（可能未定义），在这种情况下只需在触发就绪事件后调用逻辑或使用 .load 如果您想等待图像等加载，这可能会改变文档宽度

```
$(document).ready(function () {
    //put your ad load logic here.
}); 
```

# iphone - 错误 setValue:forUndefinedKey Xcode

> ID：13774509
> 
> 赞同：0
> 
> 时间：2012-12-08T04:33:04.133
> 
> 标签：iphone, ios, xcode, ipad

**[ setValue:forUndefinedKey:]：此类不符合关键图像的关键值编码。**

如果您有任何很棒的信息或帮助，这是错误代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:06:30.703

当您更改 IBOutlet 属性的名称或删除 nib（接口生成器）文件仍具有引用的 IBOutlet 属性时，会发生这种情况。查找与您遇到错误的屏幕相关的笔尖，并在连接检查器中查找过时的连接，该连接引用了更改名称或已删除的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:16:42.300

当您设置`@property`为任何 IBOutlet 对象并忘记`@synthesized`它时，也会发生这种情况。确保您为其设置`@property`in`ViewController.h`文件的对象应该`@synthesized`在`ViewController.m`文件中。

所以这个错误的原因是**IBOutlet 对象没有在 XIB 中正确设置，你在代码中的任何地方都使用了这个对象**。

# c++ - ISO C++ 禁止声明没有自动迭代器类型的“it”？

> ID：13774514
> 
> 赞同：3
> 
> 时间：2012-12-08T04:34:37.957
> 
> 标签：c++, compiler-errors, iterator, auto

我有这六行：

```
 auto it = rcp_amxinfo.find(LocalPass.script);//175
    if (it != rcp_amxinfo.end()) //176
    {//177
        if(it->second.GPSRouteCalculated.PublicFound)//178
        {
            ...
            amx_Exec(LocalPass.script, NULL, it->second.GPSRouteCalculated.POINTER);//186 
```

它们在 VS2012 中编译得非常好，但是在 centOS6 上的 GCC 中我得到了这些错误：

```
./RouteConnector/main.cpp:175: error: ISO C++ forbids declaration of ‘it’ with no type
./RouteConnector/main.cpp:175: error: cannot convert ‘std::_Rb_tree_iterator<std::pair<AMX* const, Callbacks> >’ to ‘int’ in initialization
./RouteConnector/main.cpp:176: error: no match for ‘operator!=’ in ‘it != rcp_amxinfo.std::map<_Key, _Tp, _Compare, _Alloc>::end [with _Key = AMX*, _Tp = Callbacks, _Compare = std::less<AMX*>, _Alloc = std::allocator<std::pair<AMX* const, Callbacks> >]()’
./RouteConnector/main.cpp:178: error: base operand of ‘->’ is not a pointer
./RouteConnector/main.cpp:186: error: base operand of ‘->’ is not a pointer 
```

rcp_amxinfo 定义如下：

```
struct CallbackAMX
{
    bool PublicFound;
    int POINTER;
    CallbackAMX()
    {
        PublicFound = false;
        POINTER = 0;
    }
};

struct Callbacks
{
    CallbackAMX ClosestNodeIDChange;
    CallbackAMX GPSRouteCalculated;
};

std::map            <AMX*, Callbacks>               rcp_amxinfo; 
```

如何在 linux 上解决这些错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T04:42:56.530

构建时启用 C++11 模式。您可以通过添加`-std=gnu++11`（也获得默认情况下启用的 GCC 扩展）或`-std=c++11`（仅适用于 ISO C++）到您的编译器标志来做到这一点。

`auto`在 C++11 中（它推断类型）中的含义与在之前的标准中（它指定自动存储类）中的含义不同。

# oracle - Oracle：如何将值放入 SQL 语句中的变量中

> ID：13774516
> 
> 赞同：1
> 
> 时间：2012-12-08T04:35:03.800
> 
> 标签：oracle, plsql

我想在数据类型编号的变量中使用表中的记录总数，但如果我使用以下语句，我将无法做到这一点：

```
row_num number;
row_num := select count(*) from emp; 
```

我正在尝试在程序中使用它..正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:38:29.820

假设这是在 PL/SQL 过程中，正确的语法是：

```
SELECT COUNT(*) INTO row_num FROM emp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:38:18.323

声明一个变量并按照查询将计数复制到一个变量

```
DECLARE row_num NUMBER(10) := 0;

select count(*) into row_num from emp; 
```

# c++ - boost::bind 与成员函数（作为 boost::asio 异步写入处理程序）

> ID：13774520
> 
> 赞同：2
> 
> 时间：2012-12-08T04:35:34.067
> 
> 标签：c++, boost, asynchronous, boost-asio, boost-bind

我正在使用 boost::bind 将处理函数传递给 boost::asio::async_write。当我使用自由函数时，它可以正常工作，但是当我尝试在类中移动函数时，bind 会产生我无法破译的错误。

## 什么有效：

我写了一些数据：

```
boost::asio::async_write(*socket,
                         boost::asio::buffer(data(),
                                             length()),
                         boost::bind(handlermessagewrite,
                                     boost::asio::placeholders::error,
                                     this,
                                     boost::asio::placeholders::bytes_transferred)); 
```

然后我用一个自由函数处理写入，其签名是：

```
void handlermessagewrite(const boost::system::error_code& errorcode,
                         iodata *msg,
                         size_t bytes_transferred); 
```

这一切都按预期工作。

## 我正在尝试做的事情：

我在一个类中移动处理程序`ioclient`：

```
class ioclient {
public:
  void handlermessagewrite(const boost::system::error_code& errorcode,
                           iodata *msg,
                           size_t bytes_transferred);
}

void ioclient::handlermessagewrite(const boost::system::error_code& errorcode,
                                   iodata *msg,
                                   size_t bytes_transferred); 
```

并相应地调整 boost::bind 代码，如官方 asio 教程中所示：

`- boost::bind(handlermessagewrite,`

`+ boost::bind(&ioclient::handlermessagewrite,`

但是，这会产生一些极其不透明的编译错误，而其中一行似乎最终在我的 IDE 中被截断（code::blocks）这一事实无济于事：

> \boost\bind\bind_template.hpp|102| 'boost::_bi::bind_t::result_type boost::_bi::bind_t::operator()(const A1&, const A2&) [with A1 = boost::system::error_code; A2 = 无符号整数；R = 无效；F = 升压::_mfi::mf2; L = boost::_bi::list3 (*)(), boost::_bi::value, boost::arg<2> (*)()>; boost::_bi::bind_t::result_type = void]'| \boost\asio\impl\write.hpp|261| 'void boost::asio::detail::write_op::operator()(const boost::system::error_code&, std::size_t, int) [with AsyncWriteStream = boost::asio::basic_stream_socket; CompletionCondition = boost::asio::detail::transfer_all_t; WriteHandler = boost::_bi::bind_t, boost::_bi::list3 (*)(), boost::_bi::va| \boost\asio\impl\write.hpp|585| 'void boost::asio::async_write(AsyncWriteStream&, const ConstBufferSequence&, WriteHandler&&) [with AsyncWriteStream = boost::asio::basic_stream_socket; ConstBufferSequence = boost::asio::mutable_buffers_1; WriteHandler = boost::_bi::bind_t, boost::_bi::list3 (*)(), boost::_bi::value, boost::arg<2> (*)()> >]'| \iodata.cpp|76| 从这里需要| \boost\bind\bind.hpp|392|错误：不匹配调用 '(boost::_mfi::mf2) (const boost::system::error_code&, iodata*&, const unsigned int&)'| \boost\bind\mem_fn_template.hpp|253|注意：候选人是：| \boost\bind\mem_fn_template.hpp|278|注意：R boost::_mfi::mf2::operator()(T*, A1, A2) const [with R = void; T = ioclient; A1 = const boost::system::error_code&; A2 = iodata*]| \boost\bind\mem_fn_template.hpp|278|注意：没有已知的参数 1 从 'const boost::system::error_code' 到 'ioclient*' 的转换 | \boost\bind\mem_fn_template.hpp|283|注意：模板 R boost::_mfi::mf2::operator()(U&, A1, A2) const [with U = U; R = 无效；T = ioclient; A1 = const boost::system::error_code&; A2 = iodata*]| \boost\bind\mem_fn_template.hpp|283|注意：模板参数推导/替换失败：| \boost\bind\bind.hpp|392|注意：不能转换 '(& a)->boost::_bi::list2::operator[]((* &((boost::_bi::list3 (*) (), boost::_bi::value, boost::arg<2> (*)()>* )this)->boost::_bi::list3 (*)(), boost::_bi::value, boost::arg<2> (*)()>::.boost::_bi ::storage3 (*)(), boost::_bi::value, boost::arg<2> (*)()>::.boost::_bi::storage2 (*)(), boost:: *bi ::value >::a2* ))' (输入 'iodata*') 到输入 'const boost::system::| \boost\bind\mem_fn_template.hpp|291|注意：模板 R boost::_mfi::mf2::operator()(const U&, A1, A2) const [with U = U; R = 无效；T = ioclient; A1 = const boost::system::error_code&; A2 = iodata*]| \boost\bind\mem_fn_template.hpp|291|注意：模板参数推导/替换失败：| \boost\bind\bind.hpp|392|注意：不能转换 '(& a)->boost::_bi::list2::operator[]((* &((boost::_bi::list3 (*) (), boost::_bi::value, boost::arg<2> ( *)()>*)this)->boost::_bi::list3 (*)(), boost::_bi::value, boost::arg<2> (*)()>::.boost::_bi::storage3 ( *)(), boost::_bi::value, boost::arg<2> (*)()>::.boost::_bi::storage2 (*)(), boost:: *bi::value > ::a2* ))' (输入 'iodata*') 到输入 'const boost::system::| \boost\bind\mem_fn_template.hpp|299|注意：R boost::_mfi::mf2::operator()(T&, A1, A2) const [with R = void; T = ioclient; A1 = const boost::system::error_code&; A2 = iodata*]| \boost\bind\mem_fn_template.hpp|299|注意：没有已知的参数 1 从 'const boost::system::error_code' 到 'ioclient&' 的转换|

我确信我在绑定方面做错了什么，但我不知道那可能是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T04:56:53.110

使用实例方法时，必须将`this`指针作为第二个参数传递给 bind()。

编辑：

我已经完成了您对 boost::asio 所做的尝试。这是我的实现的一个片段：

```
 boost::asio::async_write(
            m_Socket,
            boost::asio::buffer((const unsigned char *)(rMsg.c_str()), rMsg.length()),
            boost::bind(&ServerToClientConnT::HandleAsioWrite,
                        this,
                        boost::asio::placeholders::error,
                        boost::asio::placeholders::bytes_transferred)); 
```

其中 HandleAsioWrite 是声明如下的方法：

```
void HandleAsioWrite(const boost::system::error_code& rErrorCode,
                     std::size_t nBytesTransferred); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T15:33:58.160

初始示例失败，因为将在其上调用成员函数的对象实例未传递给`bind`. 这在编译器错误中指出，它指出没有从`const boost::system::error_code`到的已知转换`ioclient*`。

当使用带有成员指针的[Boost.Bind](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#with_member_pointers)时，据记载

> `boost::bind(&X::f, args)`相当于`boost::bind<R>(boost::mem_fn(&X::f), args)`。

此外，[Boost.mem_fn](http://www.boost.org/doc/libs/1_52_0/libs/bind/mem_fn.html#Purpose)的文档指出：

> 它[ `boost::mem_fn`] 支持具有多个参数的成员函数指针，并且返回的函数对象可以将指向对象实例的指针、引用或智能指针**作为其第一个参数**。

因此，如果 的第一个参数`boost::bind`是成员指针，那么：

*   绑定调用中的第二个参数必须是对象实例的句柄，因为它将是传递给从返回的函数对象的第一个参数`boost::mem_fn`。
*   从返回的函数对象`boost::bind`必须在与`_1`占位符匹配的参数位置传递对象实例句柄。

例如，给定

```
struct Foo
{
  void do_something(int x) {}
}; 
```

可以使用以下`do_something`任何一种方式绑定和调用成员函数：

```
Foo f;
boost::bind(&Foo::do_something, &f, _1)(42);     // handle is second argument.
boost::bind(&Foo::do_something, _1, _2)(&f, 42); // handle matches _1 position.
boost::bind(&Foo::do_something, _2, _1)(42, &f); // handle matches _1 position. 
```

* * *

使用 Boost.Asio，[`boost::asio::placeholders::error`](http://svn.boost.org/svn/boost/trunk/boost/asio/placeholders.hpp)实现为占位符`_1`。出于这个原因，对象实例必须`bind`作为第二个参数传递给调用，或者对象实例必须作为参数传递给自由函数或静态成员函数，然后将调用对象实例上的成员函数。 [这](http://liveworkspace.org/code/3R3RUd$0)是一个使用非静态成员函数编译的解决方案示例，但感兴趣的片段是：

```
ioclient client;
iodata data;

boost::asio::async_write(
  socket,
  boost::asio::null_buffers(),
  boost::bind(&ioclient::handlermessagewrite,
              &client,
              boost::asio::placeholders::error,
              &data,
              boost::asio::placeholders::bytes_transferred)); 
```

* * *

[在对Lou](https://stackoverflow.com/users/625981/lou)的响应中发布的[编译器错误](http://pastebin.com/tFKUncm2)表明成员函数正在尝试使用不兼容类型的实例句柄来调用。要成为兼容类型，它必须继承自. 如果这是预期的类型层次结构，则验证继承是否正确。否则，请仔细将参数类型和位置与被绑定的函数匹配。`ioclient``iodata``iodata``ioclient`

# java - 从 MySQL 获取数据到 Android 应用程序

> ID：13774521
> 
> 赞同：1
> 
> 时间：2012-12-08T04:35:33.800
> 
> 标签：java, php, android, mysql, json

我想使用 PHP 从 MySQL 数据库中获取数据并将其显示在 Android 活动中。我对其进行编码并传递 JSON 数组，但有一个问题我不知道如何连接到服务器，并且我的所有数据库都在本地服务器上。我对其进行编码 请告诉我哪里出错了，以便我得到准确的结果。我会非常感谢你。

我的所有数据库都在本地主机中，并且没有打开活动。显示错误“意外停止”:(我怎样才能得到准确的结果。请指导我

现在它给出了这些错误:(并加载保存的详细信息

```
 12-08 11:09:19.314: E/WindowManager(19972): Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40555850 that was originally added here
12-08 11:09:19.314: E/WindowManager(19972): android.view.WindowLeaked: Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40555850 that was originally added here
12-08 11:09:19.314: E/WindowManager(19972):     at android.view.ViewRoot.<init>(ViewRoot.java:277)
12-08 11:09:19.314: E/WindowManager(19972):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
12-08 11:09:19.314: E/WindowManager(19972):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
12-08 11:09:19.314: E/WindowManager(19972):     at android.view.Window$LocalWindowManager.addView(Window.java:433)
12-08 11:09:19.314: E/WindowManager(19972):     at android.app.Dialog.show(Dialog.java:288)
12-08 11:09:19.314: E/WindowManager(19972):     at com.example.visit.record.My_Task$GetTaskDetails.onPreExecute(My_Task.java:149)
12-08 11:09:19.314: E/WindowManager(19972):     at android.os.AsyncTask.execute(AsyncTask.java:391)
12-08 11:09:19.314: E/WindowManager(19972):     at com.example.visit.record.My_Task.onCreate(My_Task.java:107)
12-08 11:09:19.314: E/WindowManager(19972):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
12-08 11:09:19.314: E/WindowManager(19972):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
12-08 11:09:19.314: E/WindowManager(19972):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
12-08 11:09:19.314: E/WindowManager(19972):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
12-08 11:09:19.314: E/WindowManager(19972):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
12-08 11:09:19.314: E/WindowManager(19972):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-08 11:09:19.314: E/WindowManager(19972):     at android.os.Looper.loop(Looper.java:143)
12-08 11:09:19.314: E/WindowManager(19972):     at android.app.ActivityThread.main(ActivityThread.java:4268)
12-08 11:09:19.314: E/WindowManager(19972):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 11:09:19.314: E/WindowManager(19972):     at java.lang.reflect.Method.invoke(Method.java:507)
12-08 11:09:19.314: E/WindowManager(19972):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-08 11:09:19.314: E/WindowManager(19972):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-08 11:09:19.314: E/WindowManager(19972):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:40:08.313

目前您正在尝试访问 Ui 元素或`runOnUiThread` 在class`doInBackground`中。`GetProductDetails` `AsyncTask`因为无法从`doInBackground`您可以使用 `onPreExecute`和 `onPostExecute`更新 UI 元素中访问 UI 元素。将代码更改为不使用`runOnUiThread`或内部的 UI 元素`doInBackground` ：

```
 class GetProductDetails extends AsyncTask<String, String, JSONObject> {

        /**
         * Before starting background thread Show Progress Dialog
         * */

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            tDialog = new ProgressDialog(My_Task.this);
            tDialog.setMessage("Loading task details. Please wait...");
            tDialog.setIndeterminate(false);
            tDialog.setCancelable(true);
            tDialog.show();
        }
   protected JSONObject doInBackground(String... params) {

                   JSONObject my_task 
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("cid", cid));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = JSONParser.makeHttpRequest(
                                url_read_mytask, "GET", params);

                        // check your log for json response
                        Log.d("Single Task Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray my_taskObj = json
                                    .getJSONArray(TAG_MYTASK); // JSON Array

                            // get first product object from JSON Array
                            my_task = my_taskObj.getJSONObject(0);

                        }
                        else
                        {
                            // task with cid not found
                        }
                    } 
                    catch (JSONException e) {
                        e.printStackTrace();
                    }

            return my_task;
        }
        protected void onPostExecute(JSONObject my_task) {
            // dismiss the dialog once got all details

            // task with this cid found
            // Edit Text
             // display task data in EditText

             cus_name_txtbx = (EditText) findViewById(R.id.cus_name_txt);
             cus_name_txtbx.setText(my_task.getString(TAG_NAME));

             contact_no_txtbx = (EditText) findViewById(R.id.contact_no_txt);
             contact_no_txtbx.setText(my_task.getString(TAG_CONTACT));

             ticket_no_txtbx = (EditText) findViewById(R.id.ticket_no_txt);
             ticket_no_txtbx.setText(my_task.getString(TAG_TICKET));

             task_detail_txtbx = (EditText) findViewById(R.id.task_detail_txt);
             task_detail_txtbx.setText(my_task.getString(TAG_TASKDETAIL));
            tDialog.dismiss();
        } 
```

并将您的 onCreate 代码更改为：

```
public class My_Task extends Activity {

        TextView cus_name_txt, contact_no_txt, ticket_no_txt, task_detail_txt,attend_by_txts;
        EditText attend_by_txtbx, cus_name_txtbx, contact_no_txtbx, ticket_no_txtbx, task_detail_txtbx;
        Button btnSave;
        Button btnDelete;

////YOUR CODE here

  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_task);

        cus_name_txt = (TextView) findViewById(R.id.cus_name_txt);

        contact_no_txt = (TextView)findViewById(R.id.contact_no_txt);

        ticket_no_txt = (TextView)findViewById(R.id.ticket_no_txt);

        task_detail_txt = (TextView)findViewById(R.id.task_detail_txt);

        attend_by_txts = (TextView)findViewById(R.id.attend_by_txt;

        attend_by_txtbx = (EditText)findViewById(R.id.attend_by_txtbx);
        attend_by_txtbx.setText(attend_by_txt);
        //your code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:41:31.860

一件事是显而易见的。您不能`UI`从后台线程更改。

在这里你在做什么

```
cus_name_txtbx = (EditText) findViewById(R.id.cus_name_txt);
                        cus_name_txtbx.setText(my_task.getString(TAG_NAME));

                        contact_no_txtbx = (EditText) findViewById(R.id.contact_no_txt);
                        contact_no_txtbx.setText(my_task.getString(TAG_CONTACT));

                        ticket_no_txtbx = (EditText) findViewById(R.id.ticket_no_txt);
                        ticket_no_txtbx.setText(my_task.getString(TAG_TICKET));

                        task_detail_txtbx = (EditText) findViewById(R.id.task_detail_txt);
                        task_detail_txtbx.setText(my_task.getString(TAG_TASKDETAIL)); 
```

在`doInBackground`中`GetProductDetails`。

# ios - 简单 iOS 应用程序中的线程

> ID：13774522
> 
> 赞同：2
> 
> 时间：2012-12-08T04:35:38.760
> 
> 标签：ios

当我创建空应用程序（例如使用单视图模板）并且如果发生崩溃时，它会在 Debug Navigator 中显示 5 个线程，例如 Thread-1、Thread-2、Thread-3、Thread-4、Thread-5。我了解 Thread-1 是主应用程序线程，但这些其他线程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:07:23.413

这些是每个应用程序都需要的内螺纹。默认情况下，每个应用程序都有一些线程。除此之外，您还可以通过以下方式创建其他线程

NSTimers、performSelectors、dispatch_async、NSOperations 等

# c# - 参数异常未处理

> ID：13774525
> 
> 赞同：1
> 
> 时间：2012-12-08T04:35:54.567
> 
> 标签：c#

这是我在 form1 上的代码。

```
private void flopCards()//view the 2 face down card
{
    string hold1=NumGen.CardGenerator(i)
        ,hold2=NumGen.CardGenerator(i)
    ,hold4=NumGen.CardGenerator(i)
    ,hold5=NumGen.CardGenerator(i);
    holder1.Image = Image.FromFile(hold1, true);
    holder2.Image = Image.FromFile(hold2, true);

}    

private void button1_Click(object sender, EventArgs e)
{
    Controls.Remove(button1);
    player();
    bot1();
    GrpBx();
    Get3rd.Click += new EventHandler(Get3rd_Click);
    check.Click += new EventHandler(check_Click);
}

void check_Click(object sender, EventArgs e)
{
    flopCards();
} 
```

我想要完成的是，当我单击检查按钮时，持有人的图片将被替换为卡片。错误列表中没有显示错误，但是当我尝试运行并单击按钮时，我得到的是弹出它说“参数异常未处理路径不是合法形式”的弹出窗口

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:46:09.717

尝试这个：

```
string hold1=NumGen.CardGenerator(i);
try
{
    if (File.Exists(hold1))
        Console.WriteLine("The file {0} was found.", hold1);
    else
        Console.WriteLine("Error: The file {0} cannot be found", hold1);
}
catch (ArgumentException ex)
{
    Console.WriteLine("I don't understand the path you supplied.");
    Console.WriteLine(ex.Message);
    Console.WriteLine(ex.ToString());
} 
```

运行您的程序并检查输出窗口。希望它能帮助您了解为什么无法访问您的图像。

# c# - 仅显示基于登录用户的数据

> ID：13774526
> 
> 赞同：1
> 
> 时间：2012-12-08T04:36:13.167
> 
> 标签：c#, .net, asp.net-mvc-4, authorization, forms-authentication

我正在使用 ASP.NET MVC 4 并试图找出查找与登录用户相关的信息的最佳实践。我正在使用表单身份验证。

如果用户进入一个他们应该只查看与该用户相关的票证的页面，我是否需要每次都像下面这样找到客户？

有没有更简单的方法来保存用户连接的客户端，所以我只需要检查一次？

```
[HttpGet]
public ActionResult Index()
{
     Client client = _db.Clients.Single(c => c.Username == User.Identity.Name);
     view.OpenTickets = _db.Tickets.Where(t => t.ClientID == client.ClientID).Count();
     return PartialView(supportView);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:58:38.997

如果您要跨不同页面访问会话变量，则设置会话变量可能是一个很好的解决方案。如果您希望用户保存他的偏好（密码、本地设置等），您可能需要考虑创建 cookie。

[http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

这也可能有帮助 -[跨页面传递值 ASP.net](https://stackoverflow.com/questions/2592198/passing-values-across-pages-asp-net)

# php - 将不同的多个数组合并为单个数组

> ID：13774529
> 
> 赞同：1
> 
> 时间：2012-12-08T04:37:47.987
> 
> 标签：php, arrays, codeigniter

现在事情越来越难了。我有这样的查询结果：

结果 = 数组（

```
A = array(
        [a]=>'1',
        [b] =>'2',
     );

B = array(
        [a] =>'1',
        [b] =>'3',
     );

C = array(
        [a] =>'1',
        [b] =>'4',
     );

**and more...** 
```

);

那么如何将它们合并到一个数组中，如下所示：

结果 = 数组（

```
 Z = array(

        [a] =>'1',
        [b] => array(

               [0] =>'2',
               [1] =>'3',
               [2] =>'4',
        );

     ); 
```

);

谢谢你，对我糟糕的演讲感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:47:45.163

您可以查看[PHP 手册中的 array_merge 函数](http://php.net/manual/en/function.array-merge.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:49:08.460

如果您计划在键（字符串、数字等）中只包含原始值，这将起作用：

```
<?php

function array_combine_keys($a, $b) {
    $c = $a;
    foreach ($b as $k=>$v) {
        // Value can be only primitive, not an array itself
        if (isset($a[$k]) && $a[$k] !== $v) {
            $c[$k] = array($a[$k], $v);
        } else {
            $c[$k] = $v;
        }
    }
    return $c;
}

$a = array('a' => '1', 'b' => '2');
$b = array('a' => '1', 'b' => '3', 'c' => '5');

var_dump(array_combine_keys($a, $b));

?>

array(3) {
  ["a"]=>
  string(1) "1"
  ["b"]=>
  array(2) {
    [0]=>
    string(1) "2"
    [1]=>
    string(1) "3"
  }
  ["c"]=>
  string(1) "5"
} 
```

一种更通用的方法是在值中也允许数组，并确保键始终是数组，这意味着我们不需要额外的逻辑来检查键是数组还是遍历时不是数组结果。(+) 是两个数组的并集。

```
<?php

function array_combine_keys($a, $b) {
    $c = $a;
    foreach ($b as $k=>$v) {
        if (!is_array($v)) {
            $v = array($v);
        }
        if (isset($a[$k])) {
            $av = $a[$k];
            if (!is_array($av)) {
                $av = array($av);
            }
            $c[$k] = $av + $v;
        } else {
            $c[$k] = $v;
        }
    }
    return $c;
}

$a = array('a' => '1', 'b' => array('2', '4'));
$b = array('a' => '1', 'b' => array('3'), 'c' => '5');

var_dump(array_combine_keys($a, $b));

?>

array(3) {
  ["a"]=>
  array(1) {
    [0]=>
    string(1) "1"
  }
  ["b"]=>
  array(2) {
    [0]=>
    string(1) "2"
    [1]=>
    string(1) "4"
  }
  ["c"]=>
  array(1) {
    [0]=>
    string(1) "5"
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T07:54:16.580

我不知道你为什么[一直问同样的问题](https://stackoverflow.com/q/13774820/1207346)，但这是我对你问题的回答。

```
$result = array_merge_recursive($a, $b, $c);
foreach($result as $k => $v) $result[$k] = array_unique($v);
print_r($result); 
```

# java - java中的字符串标记器 - 重新初始化

> ID：13774534
> 
> 赞同：0
> 
> 时间：2012-12-08T04:38:34.937
> 
> 标签：java, filereader, stringtokenizer

我有一个程序可以搜索给定列表中的单词（按字母顺序排列）。事情是这样的，我输入了“abc”和“def”，然后输入了“abcd”。

它将搜索“abc” - 打印它，现在字符串标记器将继续从“abc”之后的标记中搜索“def”，因此显然找到了“def”。问题是我希望在第三个找到“abcd”，并且在“def”之后的列表中不存在“abcd”，这是标记器将继续的地方。

如何重置 String Tokenizer 的 nextToken() 函数？或者更确切地说，我如何让标记器函数从文件的最开头读取每次比较？

**[编辑]**

我知道我可以打开和关闭文件。我想知道是否有任何方法可以只使用字符串标记器。我已经google了很多。至今没有结果。

**[CODE]** 这是关于分词器及其在一个单独的函数中的代码，它被调用并且每次都传递一个新的字符串。

```
while(sTok.hasMoreTokens()&&f!=0)
        {
            String m=sTok.nextToken();
            //System.out.println(m);
            match=false;
            if(input.length()==m.length())
            {
                //System.out.println(input+" is being compared to "+m);
                for(int i=0;i<m.length();i++)
                {
                    for(int z=0;z<m.length();z++)
                    {
                        //System.out.println("char in m="+m.charAt(i)+" char in input="+a[z]);
                        if(m.charAt(i)==a[z])
                        {
                            match=true;
                            z=m.length();
                        }
                        else 
                            match=false;
                    }
                    if(match==false)
                    i=m.length();
                }
            }
            if(match==true)
            {
                //System.out.println(m);
                toWrite=toWrite+m+",";
                fr.close();
                return;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:17:26.780

[Apache Commons Lang](http://commons.apache.org/lang/)的[org.apache.commons.lang.text.StrTokenizer](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/text/StrTokenizer.html)类可能会对您有所帮助。它提供了一种获取前一个令牌的方法以及几种不同的 reset() 方法：

```
StrTokenizer reset() // Resets this tokenizer, forgetting all parsing and iteration already completed.
StrTokenizer reset(char[] input) // Reset this tokenizer, giving it a new input string to parse.
StrTokenizer reset(String input) // Reset this tokenizer, giving it a new input string to parse. 
```

# sql - 从表中获取子节点

> ID：13774535
> 
> 赞同：0
> 
> 时间：2012-12-08T04:38:39.877
> 
> 标签：sql, sql-server-2008

在有一个 SQL 表，如：

```
id, parentid, name 
1     0        Root
2     1        label 1
3     2        label 1.1
4     3        label 1.1.1
5     1        label 2
6     5        label 2.1
7     6        label 2.1.1 
```

现在我想通过 id 2/3/5 等找到所有孩子。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:58:48.837

假设`table1`是您的表名并`@input`包含输入值

```
DECLARE @input INT = 2;
DECLARE @parent INT = 0;
DECLARE @name NVARCHAR(200); --same type with name column
SELECT @parent = parentid, @name = name FROM table1 WHERE id = @input;
IF @parent = 0
   SELECT * FROM table1 WHERE id <> @input
ELSE
   SELECT * FROM table1 WHERE name LIKE (@name + '%') 
```

如果名称字段的格式类似于您的示例，则可以这样做。

对于递归 SQL，请以这种方式引用：

```
WITH temptable (id, parentid, name) AS
(
  SELECT id, parentid, name
  FROM table1 t1
  WHERE t1.id = 1
  UNION ALL
  SELECT t2.id, t2.parentid, t2.name
  FROM table1 t2, temptable t3
  WHERE t2.parentid = t3.id
)
SELECT id, parentid, name 
FROM temptable
WHERE parentid <> 0 
```

# jquery - jQuery Mobile Cordova (Phonegap) 在每页底部留下空白

> ID：13774536
> 
> 赞同：3
> 
> 时间：2012-12-08T04:38:51.573
> 
> 标签：jquery, jquery-mobile, cordova

对于我的每个 jQm 页面，每个页面的底部似乎都有一些空白区域，并且它无缘无故地添加了滚动行为。我附上了截图。

这种不必要的滚动行为让我搞砸了很多东西。

我在firebug中检查了页面，似乎jQm正在添加“min-height：213px;” 到页面。在萤火虫中删除它*似乎*可以解决问题，但我不知道在哪里可以找到问题的根源。

我不能在这里附上代码示例，但它是 jQm 的全新安装。我错过了什么，一件简单的事情吗？

我尝试在这里关注其他一些类似的问题，但无济于事。大多数人说要添加 padding:0 margin:0 等，但我认为这是一个 jQm 问题，因为 min-height 代码位于 html 的样式元素上。

可以看到白框，明显没有内容强制滚动

![可以看到白框，明显没有内容强制滚动](../Images/8dbcf61dad840ea9216ca1a79f4f0483.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:57:54.750

尝试删除视口元标记，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:43:02.117

是的，这是一个 jquery 移动问题。只要视口大小发生变化，就会设置样式。

对于某些应用程序可能需要它，但如果它对您没有帮助，只需在您的 CSS 中使用 !important 规则覆盖它以消除副作用。

# google-app-engine - 如何在jinja2中获取网站的基本网址？

> ID：13774539
> 
> 赞同：3
> 
> 时间：2012-12-08T04:39:49.647
> 
> 标签：google-app-engine, python-2.7, jinja2

PHP 具有`$_SERVER['DOCUMENT_ROOT']`对网站基本 url 的引用：例如`http://localhost:8080/`. 我需要在`jinja2`. 我在应用引擎上使用 python 2.7。

如何在 jinja2 中获取网站的基本 URL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T17:18:55.560

`webapp2`是基于`WebOb`. 从他们的[文档](http://webob.org/)

> WebOb 是一个 Python 库，它提供了 WSGI 请求环境的包装器，以及一个帮助创建 WSGI 响应的对象。这些对象映射了 HTTP 的大部分指定行为，包括标头解析、内容协商以及条件和范围请求的正确处理。

访问[应用程序 URL](http://docs.webob.org/en/latest/#urls)由处理程序中的对象启用，`request`并且可以通过属性访问`application_url`：

```
import webapp2
class MainHandler(webapp2.RequestHandler):
  def get(self):
    self.response.write(self.request.application_url) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T20:33:01.183

在 webapp2 中，您可以获取请求的主机部分并将其作为参数传递给 jinja 模板，如下所示：

```
class YourHandler(webapp2.RequestHandler):
  def get(self):
    params = {'url':self.request.host}
    template = jinja_environment.get_template('your_template.html')
    self.response.write(template.render(params)) 
```

# matlab - 使用 for 循环查找整体结果

> ID：13774541
> 
> 赞同：1
> 
> 时间：2012-12-08T04:40:01.947
> 
> 标签：matlab, for-loop

```
for i=1:30
randomno=rand(3,1); 
k(i)=mean(randomno(:,1) ;

end 
```

如何将 k 的平均值数据存储到工作区中的结果中，例如：Result=[k(1) 的平均值；k(2) 的平均值；直到.....k(30)的平均值]

# android - Android：在同一活动中单击按钮，维护或更改值

> ID：13774546
> 
> 赞同：0
> 
> 时间：2012-12-08T04:41:16.213
> 
> 标签：android, android-activity

我在屏幕上显示了一个随机生成的整数，当用户单击一个按钮时，我希望该数字更新为一个新数字或保持不变（取决于哪个按钮），但保持相同的活动。

在保持相同活动时如何刷新/更新值？

```
public class ClassName extends Activity implements OnClickListener  {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_name);
        int currentNum = randNum();
        TextView myTextView = (TextView) findViewById(R.id.current_number); 
        myTextView.setText("Current Number: " + String.valueOf(currentNum));
        okButton = (Button) findViewById(R.id.num_confirmation);
        okButton.setOnClickListener(this);
        changeButton = (Button) findViewById(R.id.change_num);
        changeButton.setOnClickListener(this);
        // set 'currentNumber' accordingly
        // reprint value
    }

    @Override
    public void onClick(View v) {

    } 
```

我想做的一件事是在单击按钮时保持相同的值（即`currentNum`保持不变）。另一件事是使用我拥有的返回新数字（即）的方法更改值（单击不同的按钮`currentNumber = methodCall();`）。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:46:05.427

就这样做

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.num_confirmation:
        //do nothing in your current scenario 
        break;
    case R.id.change_num:
        myTextView.setText("Current Number: " + String.valueOf(currentNum+5)); 
        break;

    default:
        break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:04:08.050

您可以使用 switch case 找到 id 并在那里添加代码。或者在activity的layout xml文件中，在你想要的button中写一个onClick方法

对于按钮 1

```
android:onClick="newNum" 
```

对于按钮 2

```
android:onClick="doNothing" 
```

然后，将这些方法添加到您的活动类

```
public void newNum(View v) {
    myTextView.setText("Current Number: " + String.valueOf(currentNum+5));
}

public void doNothing(View v) {
    // Do nothing here
} 
```

# row - 在数据库中，“行”和“记录”这两个词有什么区别？

> ID：13774547
> 
> 赞同：1
> 
> 时间：2012-12-08T04:41:18.543
> 
> 标签：row, rdbms, record

在数据库中，“行”和“记录”这两个词有什么区别？一条记录是否包含多行？

编辑：它们*完全*一样吗？

*编辑 2：数据库系统*第 14 章的第一句话读到

> 仅仅分散表示各个块之间关系元组的记录是不够的。

你们确定记录和元组的含义相同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:59:16.867

虽然已经回答得很好；我也想补充一下我的观点。

这些词可以互换使用。

```
 1          2         3              4 
--------------------------------------------------------------------
Row    =  Record  =  Tuple        =  Entity 

Column =  Field   =  Attribute    =  Attribute

table  =  File    =  Relation     =  Entity Types(or Entity Set) 
```

*   学习 ER-Modules 时好用的 4 个术语
*   3 使用关系模型时
*   2 一般场景，`DataBase books start with these terminology`因为这些在现实生活中被人们广泛使用，在文件系统中也是如此。

**编辑**：
`It is not sufficient simply to scatter the records that represent tuples of a relation among various blocks.`

`Record`是存储系统中具有隐含意义的基本单元。在 DBMS`record`中，章节中的“使用”一词描述了数据库表如何存储在磁盘块上。[我书中](http://web2.aabu.edu.jo/tool/course_file/lec_notes/901331_Fundamentals_of_Database_Systems,_6th_Edition_%280136086209%29.pdf) 的一句话`primary methods of organizing files of records on disk`。在 DBMS 中，a`record-oriented filesystem`是一个文件系统，其中文件存储为记录的集合。（`RECORD/Field/File/Block`是文件系统（操作系统）术语）位命令然后在存储系统上下文中行。虽然，`Records`也叫`tuples, structs, or compound data`.

* * *

由于某些原因，我没有在 OO 数据库设计中添加术语。它们是 { 对象、数据类型、对象结构或 (STRUCTURE)}

* * *

在正确的地方使用正确的术语是技术人员的好习惯，尤其是在教学时！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:43:05.710

在*关系*数据库世界中，这些术语可以互换使用。

还有其他类型的数据库中没有出现这些术语；例如，有文档数据库、键值存储和图形数据库。

但是在普通的关系数据库中，一个表（或关系）是由许多行（或记录，或元组）组成的，每行代表一个表所描述的“类型”的“对象”。术语上的差异实际上是一种感知：当您以图形方式查看表格时使用*row ；*在强调物理结构时使用*记录。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T04:46:12.210

哲学上没有真正的区别。同样，每种语言、每个数据库等的分类法都不相同，因此没有一个答案。但是你可以这样考虑

数据库有表。就像在 Excel 中绘制表格一样，每个表格都有列和行。所以我们可以说每个表都有行。

但有可能单一类型实体的数据存储在多个表中。例如，您可以在一个名为 Employee 的表中包含员工 ID、名字、姓氏，并且可以是每个员工的一行。

但也有可能诸如地址之类的附加信息存储在称为地址的其他位置。

因此，稍后当您查询并获取员工的完整详细信息时，您会从员工和地址表中获取员工详细信息。这可以被认为是一个记录或完整的记录。它由来自多个表的行的数据组成。

但同样，没有一个答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T19:34:40.673

它们并不*总是*一样的。

它们在关系数据库领域中的含义相同，但“记录”在关系数据库之外具有含义。

例如，`IMS`数据库有“记录”，COBOL 有 RECORD 关键字，而 COBOL 曾经是用于业务的主要语言，并且早于关系数据库的存在。

“行”是一个严格的关系数据库术语。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T04:42:52.037

没有区别，它们是一样的。

当我被教导（我承认这是不久前）时，它只是行和列，但如果您愿意，您同样可以使用记录代替行，并使用属性代替列。

我知道有些人更喜欢为单个表条目保留行并将记录用于连接查询（例如来自多个表），但我不确定命名法是否普遍。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T04:44:22.493

在使用数据库 API（如 ADO.NET）的上下文中，两者在很大程度上是同义词。然而，不太正式的“记录”往往指的是一个逻辑信息单元，例如一些非规范化的行组合（例如采购订单的详细信息与订单的各个行项目组合）。

# drupal - 如何在drupal站点中获取登录用户的linkedin连接

> ID：13774548
> 
> 赞同：0
> 
> 时间：2012-12-08T04:41:17.920
> 
> 标签：drupal, linkedin

要获得linkedin用户的连接，我们需要设置成员权限（https://developer.linkedin.com/documents/authentication#granting）。[但我在http://drupal.org/project/linkedin](http://drupal.org/project/linkedin)中没有看到任何关于它的信息

需要关于上述问题的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:31:13.673

它需要成员权限“r_network”所以在添加以下补丁后我让它为我工作

linkedin/linkedin.inc

```
if (!isset($_GET['action']) || $_GET['action'] != $_SESSION['random']) {
$_SESSION['random'] = $random;
--$url = $base_url . "/requestToken;
++$url = $base_url . "/requestToken?scope=r_network"; 
```

谢谢

# c# - 只要表单处于活动状态，如何运行后台线程？

> ID：13774555
> 
> 赞同：1
> 
> 时间：2012-12-08T04:42:12.210
> 
> 标签：c#, winforms, multithreading, user-interface

在我的 program.cs 文件中，代码如下：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    frmWizard frm = new frmWizard();
    Application.Run(frm);

    Thread th = new Thread(frm.ThreadSetCom);
    th.Start();
} 
```

ThreadSetCom 是一种在无限循环中运行以检查某些内容的方法。我注意到 ThreadSetCom 只会在 WinForm 出现之前和我关闭表单之后执行。当表单可见时它不会执行。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:46:42.677

Application.Run 等到参数中传递的表单关闭。如果出现frmWizard，`create`您可能需要这样做。`start``thread``load`

```
private void frmWizard_Load(object sender, System.EventArgs e)
{
    Thread th = new Thread(ThreadSetCom);
    th.Start(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T11:21:13.370

Application.Run 将阻塞，直到您关闭解释您看到此行为的原因的表单。Adil 的回答会起作用，但我相信你不应该以这种方式耦合你的代码。如果您的 Main 方法独立于 Form Load 事件启动第二个线程会更好。

所以你只需要像这样重新排列你的代码：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    frmWizard frm = new frmWizard();

    Thread th = new Thread(frm.ThreadSetCom);
    th.Start();

    Application.Run(frm);
} 
```

# c++ - 有人可以解释最多一次不变量和存在、所有权和保护规则是什么吗？

> ID：13774556
> 
> 赞同：3
> 
> 时间：2012-12-08T04:42:39.627
> 
> 标签：c++

最多一次：指向任何特定对象的指针在任何时间点最多可以存在一个容器对象中。

存在性：在插入指向它的指针之前，必须动态分配对象。

所有权：一旦插入指向对象的指针，该对象就成为容器的属性。其他人不得以任何方式使用或修改它。

守恒：当从容器中删除指针时，要么必须将指针插入到某个容器中，要么必须删除其所指对象。

这些是我给出的相应定义。我很难理解每个术语中使用的各种术语，我希望这里有人可以准确解释每个术语的含义以及如何使用它们来确保良好的编程实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:37:50.040

例如，假设您有以下类定义：

```
class Container {
  public:
    // construct a container instance by making it point to an item
    Container(Item *pItem) : m_pItem(pItem) { }
  private:
    Item *m_pItem;
};

class Item {
  public:
    change() {
      // do something to change the item
    }
  private:
    // some private data
}; 
```

* * *

> 最多一次：指向任何特定对象的指针在任何时间点最多可以存在一个容器对象中。

有两个`Container`带有指向同一个实例的指针的实例`Item`会违反这一点：

```
Item *pItem = new Item();  // construct a new Item
Container c1(pItem);       // create a new container pointing to this item
Container c2(pItem);       // WRONG: create another container pointing to the same item 
```

* * *

> 存在性：在插入指向它的指针之前，必须动态分配对象。

动态分配对象通常意味着使用运算符创建对象的新实例，该运算符`new`返回指向在堆内存（而不是堆栈）上分配的新创建对象的指针。违反此规定的两个例子是：

```
Item *pItem = NULL;
Container c1(pItem);  // WRONG: pItem is not dynamically allocated; it is NULL

Item item;
Container c2(&item);  // WRONG: &item does not point to a dynamically allocated heap
                      // object; the object is on stack; 
```

* * *

> 所有权：一旦插入指向对象的指针，该对象就成为容器的属性。其他人不得以任何方式使用或修改它。

当一个对象存在于内存中时，任何具有该对象的指针或引用的对象或函数都可能修改它（除非声明了指针或引用`const`）：

```
Item *pItem = new Item();  // the function containing this code obviously has a pointer
                           // to the newly created item
Container c(pItem);        // let the container c own this item

pItem->change();         // WRONG: attempt to modify an object owned by c 
```

* * *

> 守恒：当从容器中删除指针时，要么必须将指针插入到某个容器中，要么必须删除其所指对象。

这意味着当容器不再想要“拥有”（定义与上面完全相同的含义）它指向的项目实例时，它必须将“所有权”转移给另一个容器，或者删除该项目。对类的以下修改`Container`实现了此行为：

```
class Container {
  public:
    removeItem() {
      delete m_pItem;  // deallocate the item instance owned by this container
                       // the item is no longer owned because it no longer exists
    }
    giveItemTo(const Container& other) {
      other.m_pItem = m_pItem;  // let the other container own this item instead
      m_pItem = NULL;           // the item is no longer owned by this container because the pointer is NULL
    }
}; 
```

# java - 无法识别对象变量

> ID：13774557
> 
> 赞同：1
> 
> 时间：2012-12-08T04:42:51.013
> 
> 标签：java, midlet

我在“criteria.setHorizo​​ntalAccuracy(5000);”处遇到错误 线。它说标准不存在。知道我做错了什么吗？

```
 package displaytest;
  import javax.microedition.location.Criteria;
  import javax.microedition.location.Location;
  import javax.microedition.location.LocationListener;
  import javax.microedition.location.LocationProvider;

  public class get_gps  {

        Criteria criteria = new Criteria();

        criteria.setHorizontalAccuracy(5000);

  public static String get_lat()
     {

     String lat = "test";

     return lat;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:28:22.493

确保您有一个名为 setHorizo​​ntalAccuracy 的方法。那么它应该是一个 void 方法，它应该接收一个变量类型 int。例如：

公共无效 setHorizo​​ntalAccuracy(int num) { int HorizAccuracy = 0;

num = 水平精度；

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:46:54.130

您不能在构造函数或方法之外的类中调用任意语句。您只能初始化静态或成员变量。

为您的类创建一个构造函数并在`criteria`那里初始化对象。例如：

```
public class GetGps {
  private Criteria criteria = new Criteria();

  public GetGps() {
    criteria.setHorizontalAccuracy(5000);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T04:50:55.210

已经提出的替代方案是使用实例初始化器：

```
public class get_gps {

    Criteria criteria = new Criteria();

    //instance initialiser
    {
        criteria.setHorizontalAccuracy(5000);
    }

    public static String get_lat() {
        String lat = "test";
        return lat;
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-08T04:46:13.260

```
public class get_gps  {

        Criteria criteria = new Criteria();

        criteria.setHorizontalAccuracy(5000); 
```

在上面的代码中，您缺少使用 } 括号来完成方法。

更改您的代码

```
 public class get_gps  {

            Criteria criteria = new Criteria();

   criteria.setHorizontalAccuracy(5000);
} 
```

# c# - 为什么我不能以编程方式设置 FlowLayoutPanel 的边距？

> ID：13774562
> 
> 赞同：1
> 
> 时间：2012-12-08T04:43:22.947
> 
> 标签：c#, .net, winforms, margin

我试图在 C# 中以编程方式设置 FlowPanel 的边距，但是它告诉我我无法设置它，因为它不是变量。

在这里它告诉我该属性获取或设置控件之间的空间。

![普通属性？](../Images/208776e12cc0c3b872d457ec026ff354.png)

但是，一旦我尝试设置该属性，它就会告诉我它不是一个变量，并且该项目将无法编译。

![我疯了，还是什么？](../Images/df960ba6897c3199be471b6592f7f1fb.png)

那么，这里发生了什么？这个属性是在幕后以一种奇怪的方式声明的吗？是 Visual Studio 的问题吗？我不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:10:50.857

您必须分配一个新值：

```
flowLayoutPanel2.margin = new Padding(5); 
```

更新：虽然 Padding 没有这样的注释，但 Point 有一个解释，它也是一个结构，以及为什么需要将其设置为新的 Padding（以下描述中的 Point）：

> Point **[Padding]是一个结构体，也就是说它是一个值类型。如果您访问 Point 中的属性，则会返回该属性的副本。因此，更改从 Location 属性返回的 Point 的 X 或 Y 属性不会影响 Form 的 Left、Right、Top 或 Bottom 属性值**。要调整这些属性，请单独设置每个属性值，或使用新点设置 Location 属性。

来源：http:
[//msdn.microsoft.com/en-us/library/ms159414.aspx](http://msdn.microsoft.com/en-us/library/ms159414.aspx)

```
Public Structure Padding 
```

填充：http:
[//msdn.microsoft.com/en-us/library/system.windows.forms.padding.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.padding.aspx)

# antlr - 如何在 ANTLRWorks 中自动格式化代码？

> ID：13774563
> 
> 赞同：0
> 
> 时间：2012-12-08T04:43:31.350
> 
> 标签：antlr, antlrworks

有什么方法可以自动格式化我在 ANTLRWorks IDE 中编写的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:23:32.580

不，ANTLRWorks 中没有这样的选项。

# css - 带有可放置输入文本框的 JQuery css 相对位置

> ID：13774564
> 
> 赞同：0
> 
> 时间：2012-12-08T04:43:37.000
> 
> 标签：css, jquery-ui

我不熟悉在 CSS 中使用相对位置。我正在为下面的 html 苦苦挣扎。我在 IE8 中运行它。我遇到的问题是让我的光标专注于我必须将它定位在顶部边框上的文本框。

更新：上面的注释通过将 z-index 添加到正确的 div 得到了一定程度的解决。我最初没有在我的问题中包含的是左侧 div 中的内容被分配为 jQuery 可拖动并且输入文本框是可放置的。我希望用户能够拖入值或自行输入值。当 z-index 添加到 rightDiv 时，文本框上的焦点以允许用户手动输入条目效果很好，但是当 leftDiv 中的条目被拖到文本框时，它隐藏在文本框后面直到下降完成。

有什么建议么？谢谢你的帮助。

```
<html>
<meta http-equiv="X-UA-Compatible" content="IE=7" />
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<head>
<style>
.rightDiv {
  position : fixed;
  top:90px;
  left:198px;
}
.leftDiv {
  position : relative;
  right : -10px;
  top:10px;
}
</style>
</head>
<body>
<form>
<DIV class=rightDiv>
<INPUT size=10></INPUT>
</DIV>
<DIV class=leftDiv>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
1234<br>
</DIV>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:32:14.043

我不太确定你想实现什么，但如果你想让**光标专注于文本框**，你可以把using`.rightDiv`放在上面：`.leftDiv``z-index`

```
.rightDiv {
   position: fixed;
   top: 90px;
   left: 198px;
   z-index: 9999;
} 
```

**检查这个**：http: [//jsfiddle.net/XSBqc/1/](http://jsfiddle.net/XSBqc/1/)

**阅读**侧边栏上的所有相关问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:10:06.373

我不太了解你的问题......但我认为你想要你的文本框页面顶部

试试 - .rightDiv { top:90px; 左：198px；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:11:11.957

实际上，左 div 包含与右 div 重叠，因此它不会获得焦点尝试仅使用 2 或 4“1234
”它会正常工作。这个问题是由于 div 的相对定位尝试一些其他的方式，它会工作正常。

# iphone - 使用 UIButton 更改音量

> ID：13774568
> 
> 赞同：0
> 
> 时间：2012-12-08T04:44:59.310
> 
> 标签：iphone, xcode, slider, volume, ipod

我已经看过无数关于如何使用滑块更改 iPhone 音量的教程，按钮我的应用程序需要通过两个按钮来更改音量，一个向上，一个向下。这是我的代码：

```
 - (IBAction)volumeUp:(id)sender
    {
        [[musicPlayer setVolume:["current volume???" + 0.1]];
    }

    - (IBAction)volumeDown:(id)sender
    {
        [[musicPlayer setVolume:["current volume???" - 0.1]];
    } 
```

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:55:07.020

```
- (IBAction)volumeUp:(id)sender
{
    [[musicPlayer setVolume:musicPlayer.volume+0.1];
}

- (IBAction)volumeDown:(id)sender
{
    [[musicPlayer setVolume:musicPlayer.volume-0.1];
} 
```

# primefaces - 需要帮助找出为什么文本会在带有 Primefaces 的 p:panelGrid 中溢出我的 h:outputText

> ID：13774569
> 
> 赞同：0
> 
> 时间：2012-12-08T04:45:04.100
> 
> 标签：primefaces

正如标题所说，我正在使用 PrimeFaces，并且我在 ap:PanelGrid 中有一个 h:outputText。每当有一个很长的、完整的字符串放入 h:outputText 的“value”字段时，它就会溢出由 h:outputText 创建的 span 和由 p:panelGrid 创建的 td，并从右侧跑出页。它必须是一个单一的、长的、不间断的文本字符串，但它总是会溢出它的边界。我试过添加 style="overflow: scroll;" 和 style="width: 100px;" 和其他可能的修复，但文本中没有任何内容。有谁知道为什么会这样，我能做些什么来解决它？

感谢您花时间阅读，祝您有美好的一天。

:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:37:25.653

致所有阅读并回复的人。事实证明，这不是 Primefaces 问题，而是 HTML/CSS 问题。我将因此重新发布这个问题。感谢您抽出宝贵时间阅读和回复。下面是我的问题的简单 HTML 复制，以及提到的一些建议：

```
<!DOCTYPE html>
<html>
    <head>
        <title> problem </title>
        <style type="text/css">
            span.troubleSpan {
                overflow: hidden;
                text-overflow: ellipsis;
                word-wrap: break-word;
            }
        </style>
    </head>
    <body>
        <h4> problem </h4>
        <div>
            <table border="1">
                <tr>
                    <td>
                        <span>cell</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                    <td>
                        <span>cell</span>
                    </td>
                    <td>
                        <span class="troubleSpan">asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:12:53.230

设置静态宽度本身无济于事。但是，当元素的宽度已知（未设置为“auto”）时，`overflow: scroll`应该可以正常工作`overflow:hidden`。该`overflow`规则是否有可能被您的一个样式表中其他地方的更具体的规则覆盖？这让我觉得最有可能是罪魁祸首。

如果丢失某些信息是可以的（例如，在悬停时访问完整的字符串或单击图标），您可以结合以下内容：

```
.someElement {
  overflow: hidden;
  text-overflow: ellipsis;
} 
```

在支持的浏览器`text-overflow: ellipsis`（不是所有浏览器）中，您会在截断点看到一个简洁的省略号字符。否则它会在你的容器边缘被切断。

把它们加起来：

*   溢出：滚动应该已经工作了。如果不是，则有另一条规则取代它。
*   如果这样做不会破坏您的项目要求，您可能需要考虑省略号解决方案而不是滚动条

# syntax - 语言设计 - 大写关键字

> ID：13774572
> 
> 赞同：0
> 
> 时间：2012-12-08T04:45:51.340
> 
> 标签：syntax, programming-languages, language-design, uppercase

所以我最近决定，对于一个有趣的小宠物编程项目，我会设计自己的语言并围绕它构建工具（编译器、autodoc、autolint）。到目前为止，我还处于语言设计阶段，遇到了一个让我有点卡住的话题：关键字应该大写吗？

关键字，我不是指内置类型或函数，我指的是“FOR”“IF”“ELSE”等词。我使用它背后的逻辑是识别代码结构和语法要快得多，特别是如果语法突出显示不可用（某些地方仍然不可用，例如打印源或网站）。大部分时间都花在阅读代码上，因此提高阅读代码的效率是有意义的，但代价是每个关键字必须按两次大写锁定，或者在键入时按住 shift 键。大家对此有何看法？

另外，我知道这只是一个愚蠢的宠物项目，但我希望把它做好，我有点完美主义者。而且我还计划自己使用它只是为了玩耍，同时继续优化/开发（当然是学习目的）。所以我不会做出让我后悔的决定，也不会不得不破坏我以前的所有代码，甚至可能是编译器。

先感谢您。

编辑：因为它只用于这样的主要关键字，它也可以避免阅读大写字母的认知减慢，并使代码从“尖叫”到很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:49:59.787

我个人认为这是一个错误。我不太可能使用让我在输入代码时将鼠标悬停在 CAPSLOCK 键上的语言，或者强迫我按住 SHIFT 键的次数超过我需要的次数。

如果认为这是必要的，这可能是我留给编辑器或 IDE 的事情。但是，老实说，有彩色打印机*和*彩色 HTML 标记标签，所以根据您的问题内容，​​我不相信这种必要性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:13:54.563

Oberon 编程语言就是这样工作的。我发现它的可读性很强，但用手打字有点不愉快。我在编辑器中为所有控制结构设置了自动完成模板，这很烦人，但在那之后我很满意。

我说去吧，如果你喜欢它的样子。很多人不会喜欢它，但也许少数人会分享你的口味并喜欢它。

顺便说一句，Wirth 博士（oberon、modula-2、pascal 的创建者）在他的主页上有相当不错的关于构建编译器的书：

*   [http://www.inf.ethz.ch/personal/wirth/Articles/CompilerConstruction/index.html](http://www.inf.ethz.ch/personal/wirth/Articles/CompilerConstruction/index.html)

所有代码都是用 Oberon 编写的，因此您可以使用您正在谈论的样式查看语言的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T15:24:17.533

以下是我能想到的优点。第 2 点和第 3 点假定程序员只使用小写或混合大小写的标识符。

1.  阅读源代码时，可以立即清楚什么是关键字，什么不是。

2.  程序员可以使用任何名称作为标识符。

3.  可以在不破坏现有程序的情况下将新关键字添加到语言中。

4.  当关键字以散文形式编写时，不需要额外的格式，例如粗体或打字机字体。此外，在语言语法中，不需要额外的引号将关键字与非终结符号分开。

以下是我能想到的缺点：

1.  大写单词更难输入（手写也更慢）。

2.  如今，当小写关键字成为常态时，包含大量大写单词的源代码可能看起来不熟悉。

第一个缺点可以通过使用“智能”编辑器部分克服，该编辑器在您键入时将一些小写单词转换为大写。

# iphone - 使用 echoprint 对整个 iPhone 音乐库进行指纹识别

> ID：13774581
> 
> 赞同：2
> 
> 时间：2012-12-08T04:46:40.667
> 
> 标签：iphone, ios, audio, data-cleaning, audio-fingerprinting

我想知道用 echoprint 对 iphone 4+ 的整个音乐库进行指纹识别会有多密集。分析 2-3k 首歌曲需要多长时间？这甚至合理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:59:09.287

正如库中提到的那样，代码运行速度比实时快（据说是实时的 20%）。我希望它能回答你的问题

# jquery - 如何让 Javascript 与 Ajax 加载的内容一起使用？

> ID：13774586
> 
> 赞同：0
> 
> 时间：2012-12-08T04:47:29.640
> 
> 标签：jquery, ajax, jquery-ui-sortable

我在为加载 ajax 的 UL 执行可排序脚本时遇到问题。可排序脚本工作得很好，AJAX 查询本身也是如此。但是，当我使用 Ajax 从另一个文件中加载我希望可排序的 UL 时，它就不起作用了。这是代码：

```
<html>
<head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    #sortable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #sortable li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px; }
    #sortable li span { position: absolute; margin-left: -1.3em; }
    </style>
    <script>
    $(document).ready(function() {
        $("#button").click(function() {
            AJAXGangbang('container', "sortable2.php");
            $('#sortable').sortable();
        });
     });

    function AJAXGangbang($receiver, $destination){

        var ajaxRequest;  // The variable that makes Ajax possible!

        try{
            // Opera 8.0+, Firefox, Safari
            ajaxRequest = new XMLHttpRequest();
        } catch (e){
            // Internet Explorer Browsers
            try{
                ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try{
                    ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e){
                    // Something went wrong
                    alert("Your browser broke!");
                    return false;
                }
            }
        }
        // Create a function that will receive data sent from the server
        ajaxRequest.onreadystatechange = function(){
            if(ajaxRequest.readyState == 4){
            document.getElementById($receiver).innerHTML=ajaxRequest.responseText;
            Mediabox.scanPage();
            }
        }
        ajaxRequest.open("GET", $destination, true);
        ajaxRequest.send(null); 

    }
    </script>
</head>
<body>

<button id="button">Get the UL</button>
<div id="container">

</div>

</body>
</html> 
```

这是正在加载的内容：

```
<ul id="sortable">
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 3</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 4</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 5</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 6</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 7</li>
</ul> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:19:01.543

这部分将来自 AJAX 请求的响应插入到 DOM 中：

```
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
    document.getElementById($receiver).innerHTML=ajaxRequest.responseText;
    Mediabox.scanPage();
    }
} 
```

您需要`sortable`在它出现在 DOM 中之后调用。因此，您可以将代码修改为：

```
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
    document.getElementById($receiver).innerHTML=ajaxRequest.responseText;
    $('#sortable').sortable();
    Mediabox.scanPage();
    }
} 
```

因为 AJAX 请求是异步的，所以您不能简单地发出 AJAX 请求然后调用`$('#sortable').sortable();`，因为请求尚未完成。

请注意，这`AJAXGangbang`似乎是非 jQuery 代码。通过使用 jQuery [`get`](http://api.jquery.com/jQuery.get/)，您可以将其简化为：

```
$.get("sortable2.php", function(data) {
  $('#container').html(data);
  Mediabox.scanPage();   // not sure what this is, remove it if you don't know either
  $('#sortable').sortable();
})
.error(function() {
  alert("Your browser broke!");
}); 
```

# android - 如何将 .txt 文件读入 ListView？

> ID：13774588
> 
> 赞同：4
> 
> 时间：2012-12-08T04:47:40.663
> 
> 标签：android, listview, inputstream, readline

我正在尝试将存储在单独文本文件中的行读取到我的 android 应用程序中，并让每一行显示在列表视图中。

问题是，尽管我的代码说它们不是错误，但我无法显示任何内容。当您阅读此代码时，我将澄清我的 ListView 名为“addresslist”，而我正在读取的文件名为“myaddress.txt”。我很感激任何帮助。

```
ListView listView= (ListView) findViewById(R.id.addresslist); 
try{
    InputStream instream = openFileInput("myaddress.txt");

    InputStreamReader inputreader = new InputStreamReader(instream);
    BufferedReader buffreader = new BufferedReader(inputreader);

    ArrayList<String> lines = new ArrayList<String>();
    boolean hasNextLine =true;
    while (hasNextLine){
        String line =  buffreader.readLine();
        lines.add(line);
        hasNextLine = line != null;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.id.addresslist,lines);

    listView.setAdapter(adapter);

    instream.close();

    }
    catch(java.io.FileNotFoundException e){

    }catch(java.io.IOException e){

    }

} 
```

日志中出现以下错误：

```
12-08 01:21:30.394: E/Trace(1500): [ 12-08 01:21:30.864  1500: 1500 V/Home to School 4828 N. Crescent Norridge IL 60706, 5500 N St Louis Avenue Chicago IL 60625; Home to School 4828 N. Crescent Norridge IL 60706, 5500 N St Louis Avenue Chicago IL 60625; 
12-08 01:21:30.864: D/AndroidRuntime(1500): Shutting down VM
12-08 01:21:30.924: W/dalvikvm(1500): threadid=1: thread exiting with uncaught exception (group=0xb3e92288)
12-08 01:21:30.944: E/AndroidRuntime(1500): FATAL EXCEPTION: main
12-08 01:21:30.944: E/AndroidRuntime(1500): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tripapp/com.tripapp.Frontpage}: java.lang.NullPointerException: println needs a message
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.os.Looper.loop(Looper.java:137)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at java.lang.reflect.Method.invokeNative(Native Method)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at java.lang.reflect.Method.invoke(Method.java:511)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at dalvik.system.NativeStart.main(Native Method)
12-08 01:21:30.944: E/AndroidRuntime(1500): Caused by: java.lang.NullPointerException: println needs a message
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.util.Log.println_native(Native Method)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.util.Log.v(Log.java:117)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at com.tripapp.Frontpage.onCreate(Frontpage.java:61)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.Activity.performCreate(Activity.java:5008)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-08 01:21:30.944: E/AndroidRuntime(1500):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-08 01:21:30.944: E/AndroidRuntime(1500):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:01:04.140

首先将文件移动到项目的 assets 文件夹中，然后使用此代码从 assets 文件夹中读取文件：

```
 try{
    InputStream inputreader = getAssets().open("myaddress.txt");
    BufferedReader buffreader = new BufferedReader(new InputStreamReader(inputreader));

   // your code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T18:02:41.447

此示例适用于具有 ansi 编码的文件。您可以通过将“Cp1252”替换为“UTF-8”来打开一个 utf8 文件。

活动主.xml：

```
<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp" >
</ListView> 
```

MainActivity.java：

```
public class MainActivity extends ActionBarActivity {

    ListView listView1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        listView1 = (ListView) findViewById(R.id.listView1);

      try {
          String filePath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/myfile.txt";
          BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(filePath), "Cp1252"), 100);

          String line;
          ArrayList<String> lines = new ArrayList<String>();          
          while ((line = br.readLine()) != null) {            
              lines.add(line);        
          }

          br.close();

          ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,lines);

          listView1.setAdapter(adapter);

          } catch (Exception e) {
              e.printStackTrace();
          }
    } 
```

androidmanifest.xml：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T09:02:07.393

```
ListView listView= (ListView) findViewById(R.id.addresslist); 
try{

InputStream inputreader = getAssets().open("myaddress.txt");
BufferedReader buffreader = new BufferedReader(new InputStreamReader(inputreader));

ArrayList<String> lines = new ArrayList<String>();
boolean hasNextLine =true;
while (hasNextLine){
    String line =  buffreader.readLine();
    lines.add(line);
    hasNextLine = line != null;
}

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.id.addresslist,lines);

listView.setAdapter(adapter);

instream.close();

}
catch(java.io.FileNotFoundException e){

}catch(java.io.IOException e){

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-26T19:54:31.363

这对于 Kotlin 可能对某人有帮助

```
//getting listview from resource
val listView= findViewById(R.id.addresslist)
try{
//write file directory wherever it is, i used external storage just for example
val file = File(Environment.getExternalStorageDirectory(), "myaddress.txt")
//read lines from txt file into arraylist
val lines = ArrayList(file.readLines())
//set listview adapter using the previous arraylist that contain lines from txt file
val adapter = ArrayAdapter(this,R.id.addresslist,lines)
// show it in list view 
listView.adapter = adapter
}
catch(e : Exception){
Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show()
}
} 
```

# vim - vim 自动补全：关闭文档提示

> ID：13774593
> 
> 赞同：4
> 
> 时间：2012-12-08T04:48:19.113
> 
> 标签：vim, autocomplete

我根据这里的文章[http://sontek.net/blog/detail/turning-vim-into-a-modern-python-ide](http://sontek.net/blog/detail/turning-vim-into-a-modern-python-ide)完成了它，它工作正常，但一件事是 id 困扰着我。有没有办法自动关闭显示所有文档字符串的窗口？或者我必须习惯在使用完成来完成函数/方法名称后手动关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-10T23:33:26.647

如果您使用的是 Supertab，它具有自动关闭预览窗口的设置。正如[Alex Kroll 在 Vi 和 Vim 上所说](https://vi.stackexchange.com/questions/4056/is-there-an-easy-way-to-close-a-scratch-buffer-preview-window#comment5945_4056)：

> ```
> g:SuperTabClosePreviewOnPopupClose (default 0) 
> ```
> 
> 看起来这是你想要的`:he supertab-closepreviewonpopupclose`

添加到你的 vimrc：

```
let g:SuperTabClosePreviewOnPopupClose = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:33:54.220

那是预览窗口，您可以在任何地方使用`:pc`或关闭它`<C-w>z`。

我通常保持打开状态：它很小且不显眼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T23:08:22.470

我还没有找到一种方法来使用弹出菜单显示它，然后在弹出菜单关闭时隐藏它。但是，您可以使用以下方法完全禁用它： `set completeopt=menu`

# ios - Filepicker.io Objective-c 荒谬数据？

> ID：13774599
> 
> 赞同：0
> 
> 时间：2012-12-08T04:49:32.573
> 
> 标签：ios, nsdata, filepicker.io

我正在制作一个使用 filepicker.io 的 iOS SDK 的 iOS 应用程序，在添加大型视频时我一直遇到这个问题。我几乎立即使整个应用程序崩溃。这是问题：

```
malloc: *** mmap(size=532119552) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
2012-12-07 23:46:56.886 App_Name[1106:1d03] *** Terminating app due to uncaught exception       'NSInvalidArgumentException', reason: '*** -[NSConcreteData initWithBytes:length:copy:freeWhenDone:bytesAreVM:]: absurd length: 4294967295, maximum size: 2147483648 bytes'
*** First throw call stack:
(0x3ac1e2a3 0x34b0d97f 0x3ac1e1c5 0x35980407 0x359877bf 0x3598777d 0x5d41d 0x6064d 0x5ffc3 0x38f1111f 0x38f14b97 0x38f17139 0x38f1591d 0x38f15ac1 0x35c7aa11 0x35c7a8a4)
libc++abi.dylib: terminate called throwing an exception 
```

这是非常奇特的，我发现这与内存管理有关。我怎样才能解决这个问题？？？？

# jquery - 每次触发事件时更改所选元素的索引

> ID：13774600
> 
> 赞同：0
> 
> 时间：2012-12-08T04:49:40.797
> 
> 标签：jquery

每次触发此事件时，我都会尝试增加所选 invoiceLine 元素的索引。我想知道是否有人可以向我展示一个简单的方法来做到这一点，如果它甚至可能的话，因为我是 JQuery 的新手并且在这方面遇到了非常困难的时间。

```
$invoiceLine.find('input').change(function(){
    $(this).parent().parent().next().find('div input').removeAttr('disabled');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:35:10.410

如果通过索引表示元素在其兄弟元素中的位置，则可以使用许多 jQuery 方法轻松移动元素，例如 after()、before()、insertAfter()、insertBefore()、append()、appendTo() 等. 下面是一个简单的例子：

HTML：

```
<div class="invoiceLine">
    1 <input />
</div>
<div class="invoiceLine">
    2 <input />
</div>
<div class="invoiceLine">
    3 <input />
</div> 
```

JS：

```
$('.invoiceLine').find('input').change(function() {
    var line = $(this).closest('.invoiceLine'); // find enclosing invoiceLine
    var next = line.next(); // find next invoiceLine
    if (next.length) // check that current line is not last
        line.insertAfter(next); // insert current line after the next one
});​​​​​​​​​​​​​​ 
```

小提琴：http: [//jsfiddle.net/antishok/DteuU/](http://jsfiddle.net/antishok/DteuU/)

# jquery-selectors - jQuery 对象数组表示法

> ID：13774601
> 
> 赞同：9
> 
> 时间：2012-12-08T04:49:51.283
> 
> 标签：jquery-selectors, jquery

我是 jQuery 新手，在理解它的对象数组表示法时遇到了一些麻烦。阅读 jQuery 文档和[这篇文章](https://stackoverflow.com/questions/2445599/jquery-object-as-a-array-id0)，您似乎可以通过执行类似的操作来引用选择器返回的对象中的第 n 个项目

```
$('.foo')[n]; 
```

正确的？我应该能够串联使用 jQuery 操作/效果函数吗？类似的东西（这对我不起作用）

```
$('.foo')[0].hide(); 
```

我也试过了，没用：

```
var arr = $('.foo').get();
arr[0].hide(); 
```

我的语法有问题吗？做我在这里想做的最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-08T04:53:20.750

`[0]`数组表示法和[`.get()`方法](http://api.jquery.com/get/)都返回对 jQuery 对象中的 DOM 元素的引用，并且您不能对 DOM 元素使用 jQuery 方法。

试试这个[`eq()`方法](http://api.jquery.com/eq/)，因为它返回一个新的 jQuery 对象：

```
$('.foo').eq(0).hide(); 
```

另请注意，使用数组表示法或`.get()`获取对 DOM 元素的引用意味着您*可以*直接访问 DOM 元素的属性，例如：

```
var firstElId = $('.foo')[0].id; 
```

...如果没有与选择器匹配的元素，第二个注释`$('.foo')[0]`将会出错。`undefined``$('.foo')[0].id``'.foo'`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T04:54:55.273

当您将 jQuery 对象作为数组引用时，您会得到一个 DOM 元素。您需要将其转换回 jQuery 对象才能使用 .hide() 等方法

```
var bar = $('.foo')[n];
var $bar = $(bar);

$bar.hide(); 
```

或者只是使用 jQuery 的 eq() 方法：

```
var bar = $('.foo').eq(n);
bar.hide(); 
```

# bash - 找不到魔术函数`bash`

> ID：13774602
> 
> 赞同：1
> 
> 时间：2012-12-08T04:49:58.267
> 
> 标签：bash, ipython, ipython-magic

我有一堆模拟，我想在高性能集群上运行，我应该在上面进行预订以获得计算时间。由于预订受时间限制，因此我正在开发一个自动化脚本，我可以`scp`将其放入集群并运行。然后，此脚本将下载相关的模拟文件、运行它们并上传结果。

此自动化脚本的一部分位于`bash`( `cp`,`scp`等) 中，其余部分位于 python 中。为了开发这种自动化，我使用了一个 IPython 笔记本。

到目前为止，我已经在我的 IPython 笔记本中编写了所有 python 自动化的东西，现在我正在尝试编写它的 bash 部分。

但是，似乎魔法`%%bash`在我的 IPython 笔记本中不起作用。当我的单元格中有此代码时，我收到以下错误：

* * *

**细胞**

```
%%bash

echo hi 
```

* * *

**错误**

```
 File "<ipython-input-22-62ec98e35224>", line 3
    echo hi
          ^
SyntaxError: invalid syntax 
```

* * *

一时兴起，我尝试了这个：

* * *

**细胞**

```
%%bash

print "hi" 
```

* * *

**错误**

```
hi
ERROR: Magic function `bash` not found. 
```

* * *

所以我用`%%system`,`%%!`和尝试了这个`%%shell`。但是这些都不起作用；他们都给了我同样的错误。

为什么会这样？我怎样才能解决这个问题？

元数据：

*   IPython 0.13.dev
*   Python 2.7.1
*   Mac OS X 狮子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:18:00.867

`%%bash`当您尝试在 windows ipython 上使用时，您也会遇到类似的错误。`%%bash`那里不可用。相反，你得到`%%cmd`. 那是不一样的虽然`cmd`不是`bash`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:17:38.973

这是由版本错误引起的。我升级了我的 IPython 版本（现在是 0.13.1），效果很好。

所以看起来这个问题使用的是开发版本（这是我安装 IPython 时的最新版本）。

# ruby - 最简单的机架应用程序 -> 权限错误

> ID：13774610
> 
> 赞同：0
> 
> 时间：2012-12-08T04:52:17.473
> 
> 标签：ruby, rvm, rack

这是程序（1.rb）：

```
require 'rack'

my_rack = lambda { |env| [200, {}, ["Hello.  The time is: #{Time.now}"]] }
handler = Rack::Handler::WEBrick

handler.run(my_rack, :PORT => 12_500) 
```

这是错误：

```
~/ruby_programs$ ruby 1.rb 
[2012-12-07 21:49:09] INFO  WEBrick 1.3.1
[2012-12-07 21:49:09] INFO  ruby 1.9.3 (2012-04-20) [x86_64-darwin10.8.0]
[2012-12-07 21:49:09] WARN  TCPServer Error: Permission denied - bind(2)
[2012-12-07 21:49:09] WARN  TCPServer Error: Permission denied - bind(2)
/Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:85:in `initialize': Permission denied - bind(2) (Errno::EACCES)
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:85:in `new'
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:85:in `block in create_listeners'
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:82:in `each'
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/utils.rb:82:in `create_listeners'
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:82:in `listen'
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:70:in `initialize'
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:45:in `initialize'
    from /Users/7stud/.rvm/gems/ruby-1.9.3-p194@programming/gems/rack-1.4.1/lib/rack/handler/webrick.rb:10:in `new'
    from /Users/7stud/.rvm/gems/ruby-1.9.3-p194@programming/gems/rack-1.4.1/lib/rack/handler/webrick.rb:10:in `run'
    from 1.rb:5:in `<main>'
~/ruby_programs$ 
```

这是 ../webrick/utils.rb 的第 85 行：

```
sock = TCPServer.new(ai[3], port) 
```

如果我将 1.rb 中的代码替换为：

```
require 'socket'

server = TCPServer.new 12_000 # Server bind to port 2000

loop do
  client = server.accept    # Wait for a client to connect
  client.puts "Hello !"
  client.puts "Time is #{Time.now}"
  client.close
end 
```

我没有收到任何错误，如果我输入地址：

```
http://localhost:12000/ 
```

在我的浏览器中，我得到了预期的输出：

```
Hello !
Time is 2012-12-07 18:58:15 -1000 
```

.rvm 目录的权限：

```
~$ ls -al
total 208
...
drwxr-xr-x  30 7stud  staff   1020 Aug 31 11:09 .rvm
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:16:18.277

选项端口应该是 PascalCase

```
require 'rack'

my_rack = lambda { |env| [200, {}, ["Hello.  The time is: #{Time.now}"]] }
handler = Rack::Handler::WEBrick

handler.run(my_rack, :Port => 12_500) 
```

# objective-c - Objective-C 中的 Try-Catch 等效项

> ID：13774611
> 
> 赞同：9
> 
> 时间：2012-12-08T04:52:49.383
> 
> 标签：objective-c

我在我的应用程序的 main.m 中遇到应用程序崩溃，并且不知道为什么会发生错误，因为 xcode 没有告诉我崩溃发生的位置，它告诉我它在 return UIApplicationMain(argc, argv ...)这什么也没告诉我。

有没有办法在 Objective-C 中使用相当于 C++ 中的 try/catch 来准确查看错误发生的位置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T05:00:01.723

尽管 Objective-C 确实有`@try`/ `@catch`，但它对你帮助不大。当您到达 时`@catch`，发生错误的堆栈帧将消失。

您需要设置一个*在异常*时中断的断点：打开*Breakpoint Navigator*页面（右侧第二个按钮），然后单击导航器页面底部的 [+]。选择“添加异常断点...”，然后单击[完成]。

现在，每次您的程序抛出异常时，程序都会中断调试器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-08T04:59:21.770

![在此处输入图像描述](../Images/c1a660ca7918addc3e962988b94ef6aa.png) ![在此处输入图像描述](../Images/565bc121059d971cfd0af30755e9bf7d.png)

我在下面给出了 try catch 语法，但除此之外，你可以做的是，在 Xcode 中，你可以设置断点。在项目浏览器的左侧，单击 Breakpoints 选项卡。在左下角，您会找到一个 +。（上图）点击它，它会给你一个设置异常断点的选项。这将做的是它会在任何发生崩溃的线路处停止。因此，您无需在每个地方都设置 try catch 语句。

```
@try {

    // Your statements here
 }
 @catch (NSException * e) {
    NSLog(@"Exception: %@", e);
 }
 @finally {
    NSLog(@"finally");
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-21T17:52:45.620

```
 //////////////////////ADVANCED TRY CATCH SYSTEM////////////////////////////////////////
    #ifndef UseTryCatch
    #define UseTryCatch 1
    #ifndef UsePTMName
    #define UsePTMName 0  //USE 0 TO DISABLE AND 1 TO ENABLE PRINTING OF METHOD NAMES WHERE EVER TRY CATCH IS USED
    #if UseTryCatch
    #if UsePTMName
    #define TCSTART @try{NSLog(@"\n%s\n",__PRETTY_FUNCTION__);
    #else
    #define TCSTART @try{
    #endif
    #define TCEND  }@catch(NSException *e){NSLog(@"\n\n\n\n\n\n\
    \n\n|EXCEPTION FOUND HERE...PLEASE DO NOT IGNORE\
    \n\n|FILE NAME         %s\
    \n\n|LINE NUMBER       %d\
    \n\n|METHOD NAME       %s\
    \n\n|EXCEPTION REASON  %@\
    \n\n\n\n\n\n\n",strrchr(__FILE__,'/'),__LINE__, __PRETTY_FUNCTION__,e);};
    #else
    #define TCSTART {
    #define TCEND   }
    #endif
    #endif
    #endif
    //////////////////////ADVANCED TRY CATCH SYSTEM////////////////////////////////////////

Use TRY CATCH IN ANY METHOD LIKE THIS

-(void)anyMethodThatCanGenerateException
{
    TCSTART

    TCEND
} 
```

# php - 从父类访问子类静态变量？

> ID：13774612
> 
> 赞同：15
> 
> 时间：2012-12-08T04:52:53.530
> 
> 标签：php, reference, static, static-members

我有一个基类，我需要在子类中引用的类上调用函数。

够轻松，

```
class base_class {

    public function doSomethingWithReference(){
        $this->reference->doSomething();
    }
}

class extended_class extends base_class{

    protected $reference;

    public function __construct($ref){
        $this->reference = $ref;
    }
} 
```

现在这显然工作正常，

但是，当我调试时，我不在乎`$this->reference`

但是，`$this->reference`所指的对象是巨大的！

所以，当我这样做时，`print_r($instanceOfExtendedClass)`我会从那个对象中打印出来。

现在每个扩展类的引用都不同`base_class`。

我想做的只是设置`reference`为`extended_class`类的静态属性。

但是，然后更改`doSomethingWithReference`为会`self::$reference`引发未定义的变量错误。

相反，将静态变量设置为`base_class`并对其进行修改`extended_class`不起作用，因为它会更改从该类扩展的所有内容的变量。

有没有办法做到这一点，所以我不会打印出来`$this->reference`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-08T08:30:22.227

因为您使用的是 PHP 5.3，所以可以使用[后期静态绑定](http://php.net/language.oop5.late-static-bindings)在运行时解析对正确类的静态调用。

```
class base_class {

    public function doSomethingWithReference(){
        static::$reference->doSomething();
    }

}

class extended_class extends base_class{

    protected static $reference;

    public function __construct($ref){
        static::$reference = $ref;
    }

} 
```

**大胖提醒**：`extended_class::$reference`将在*所有*`extended_class`实例之间共享一个。如果这不是你想要的，这将行不通。

您似乎实际上担心内存或资源使用。在 PHP 中，所有对象都是通过引用传递的。这意味着将对象作为参数传递或创建它的副本等不会消耗额外的内存。如果需要在多个其他对象中引用一个对象，这样做*不会*消耗额外的内存。

* * *

> 如果我有extended_class 和另一个相同的类（比如extended_class1），它们也会共享参考吗？还是所有extended_class' 实例共享一个引用，而所有extended_class1' 实例将共享另一个（理想情况）？

看起来共享是基于静态变量的定义位置。两个示例，均来自 PHP 交互式提示：

```
php > class Shared { public $me; public function __construct($me) { $this->me = $me; } }
php > class Base { protected static $ref; public function foo() { echo static::$ref->me, "\n"; } }
php > class Inherit_1 extends Base { public function __construct($ref) { static::$ref = $ref; } }
php > class Inherit_2 extends Base { public function __construct($ref) { static::$ref = $ref; } }
php > class Inherit_3 extends Inherit_1 {}
php > $shared_1 = new Shared(1)
php > ;
php > $shared_2 = new Shared(2);
php > $shared_3 = new Shared(3);
php >
php > $in_1 = new Inherit_1($shared_1);
php > $in_2 = new Inherit_2($shared_2);
php > $in_3 = new Inherit_3($shared_3);
php >
php > $in_1->foo();
3
php > $in_2->foo();
3
php > $in_3->foo();
3 
```

在这种情况下，因为引用存在于基类中，所以每个人看到的都是同一个。我想这有点道理。

当我们声明每个子类的引用时会发生什么......大多数时候？

```
php > class Shared { public $me; public function __construct($me) { $this->me = $me; } }
php > class Base { public function foo() { echo static::$ref->me, "\n"; } }
php > class Inherit_1 extends Base { protected static $ref; public function __construct($ref) { static::$ref = $ref; } }
php > class Inherit_2 extends Base { protected static $ref; public function __construct($ref) { static::$ref = $ref; } }
php > class Inherit_3 extends Inherit_1 {}
php > class Inherit_4 extends Inherit_1 { protected static $ref; }
php > $shared_1 = new Shared(1);
php > $shared_2 = new Shared(2);
php > $shared_3 = new Shared(3);
php > $shared_4 = new Shared(4);
php > $in_1 = new Inherit_1($shared_1);
php > $in_2 = new Inherit_2($shared_2);
php > $in_3 = new Inherit_3($shared_3);
php > $in_4 = new Inherit_4($shared_4);
php > $in_1->foo();
3
php > $in_2->foo();
2
php > $in_3->foo();
3
php > $in_4->foo();
4 
```

因为 3 从 1 继承而没有声明它自己的静态属性，所以它继承了 1。当我们将 3 设置为 Shared(3) 时，它会覆盖 1 的现有 Shared(1)。

结论：为此，需要在需要单个唯一引用的*每个类中声明该属性。*请注意，此代码自 5.4.x 起有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T05:34:49.387

为父级提供访问子级静态成员的方法：

```
<?php

abstract class base_class {
    abstract protected function reference();
    // If you want to be able to instanciate base class directly, use the following 2 lines in place of the previous 2 lines:
//class base_class {
    //protected function reference() {}

    public function doSomethingWithReference(){
        $this->reference()->doSomething();
    }
}

class extended_class extends base_class{
    protected static $reference;

    public function __construct($ref){
        self::$reference = $ref;
    }

    protected function reference(){
        return self::$reference;
    }
}

class ref {
    public function doSomething(){
        echo __METHOD__;
    }
}

$ref = new ref();
$ec = new extended_class($ref);
$ec->doSomethingWithReference();

print_r($ec);
?> 
```

# java - 这不会重绘，我不确定为什么 - Java

> ID：13774613
> 
> 赞同：1
> 
> 时间：2012-12-08T04:52:57.250
> 
> 标签：java, swing, repaint

我一直在尝试重新绘制此图形面板，但每次我调用重新绘制时，它都不会更新。我检查了应该在 system.out.println 中显示的值，并在日志中输出了正确的值，但屏幕图形不会更新。有什么建议/帮助吗？

我有 3 节课（？）这是我的第一节课

```
 import javax.swing.*;
 import java.awt.*;
 import java.awt.event.*;
 import java.awt.Font;
 import java.awt.Graphics;
 import java.net.URL;
 import java.awt.event.KeyAdapter;
 import java.awt.event.KeyEvent;
 import java.io.*;
 import javax.swing.Timer;
 public class ChromeNPlayerScreen extends JFrame implements ActionListener{
   public void actionPerformed(ActionEvent e){
     repaint();
   }
   public static void main(String[ ] args){
     DrawScreen dPnl = new DrawScreen();
     ChromeNPlayerScreen mScreen = new ChromeNPlayerScreen();
     Keys keyPress = new Keys();
     Timer update = new Timer(1000, mScreen);
      //    update.start();
     int screenNum=1;
     dPnl.importDialogue();

     mScreen.addKeyListener(keyPress);
     mScreen.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
     mScreen.add(dPnl);
     mScreen.setSize(600,600);;
     mScreen.setVisible(true);
     mScreen.setResizable(false);
     mScreen.setLocation(200, 200);
   }
 } 
```

这是我的第二节课

```
 import javax.swing.*;
 import java.awt.*;
 import java.awt.event.*;
 import java.awt.event.KeyAdapter;
 import java.awt.event.KeyEvent;
 public class Keys extends KeyAdapter{
   DrawScreen dPnl = new DrawScreen();
   int scrnCount=0;
   public void keyPressed(KeyEvent e){
     int keyCode = e.getKeyCode();//Get key preseed
     if (keyCode ==e.VK_Z) {
       scrnCount++;
       dPnl.setText(scrnCount);
     }
   }
 } 
```

最后是我的第三个

```
 import javax.swing.*;
 import java.awt.*;
 import java.awt.event.*;
 import java.awt.Font;
 import java.awt.Graphics;
 import java.net.URL;
 import java.io.*;
 import javax.swing.Timer;

 public class DrawScreen extends JPanel {
   String picPath = "pictures/", scriptPath = "dialogue/";
   String out="ABC";
   String[] speech = new String[39];
   ClassLoader cl = DrawScreen.class.getClassLoader();
   URL imgURL1 = cl.getResource(picPath+"welcomeBG.png"),imgURL2 = cl.getResource(picPath+"dialogBox.png"),
     imgURL3 = cl.getResource(picPath+"Professor.png");
   Toolkit tk = Toolkit.getDefaultToolkit();
   Image imgBG = tk.createImage(imgURL1),
     imgDialog = tk.createImage(imgURL2),
     imgProfessor = tk.createImage(imgURL3);
   int screenCount=1;
   int scrn=1;
   public void paintComponent(Graphics g) {
     g.drawImage(imgBG,0,0,600,600,0,0,500,500, this);
     g.drawImage(imgDialog,-5,480,595,565,0,0,500,91, this);
     if (scrn==1)
     g.drawImage(imgProfessor,200,50,375,475,0,0,340,748, this);
     g.drawString(out, 25,515);
   }
   public void importDialogue(){
     Keys keyPress = new Keys();
     String [] fields; // array to store the "split" line read // individual field variables
     BufferedReader in=null; //variable representing the bufferedreader
     String line="A B 1"; //variable to read each line from the data file
     File f=new File(scriptPath+"newGameScript.txt"); //variable reprsenting the data file
     int count=1;
     try{
       in=new BufferedReader(new FileReader(f));
       System.out.println("File Opening");
     }
     catch (FileNotFoundException e){
       System.out.println("Problem finding File");
       return;
     }
     while(line!=null){
       try{
         line=in.readLine();
         if (line!=null){
           fields=line.split(":");
           speech[count]=(fields[0]);
           count++;
         }
       }
       catch (IOException e){
         System.out.println("Problem reading data from file");
       }
       if (line!=null){}
       out=speech[scrn];
     } 
     try{
       in.close();
       System.out.println("Closing File");
     }
     catch (IOException e){
       System.out.println("Problem Closing "+e);
     }
   }
   public void setText(int num){
     scrn=num;
     importDialogue();
     System.out.println(out);
     repaint();
   }
 } 
```

正如你所看到的，当我按下 Z 键时，它应该用下一行更新 DrawScreen 上的输出。很好，但它不会。它只是说文本文件的第一行是“你好！”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:17:34.237

只需在此页面上使用浏览器的文本搜索功能，您就可以找到一个主要问题，甚至可能*是问题所在。*我希望您使用浏览器搜索字符串“new DrawScreen()”，当然不带引号。忽略我的帖子，您会看到它在上面的代码中出现了两次，一次在 ChromeNPlayerScreen 类中：

```
public class ChromeNPlayerScreen extends JFrame implements ActionListener{
   public void actionPerformed(ActionEvent e){
     repaint();
   }
   public static void main(String[ ] args){
     DrawScreen dPnl = new DrawScreen(); // ****
     // ... 
```

并在 Keys 类中：

```
 public class Keys extends KeyAdapter{
   DrawScreen dPnl = new DrawScreen();
   // .... 
```

请理解，每次调用它时，您都会创建一个唯一且独立的 DrawScreen 对象，并且对 Keys 类中未显示的 DrawScreen 对象进行更改绝对不会影响 ChromeNPlayerScreen 类中显示的 DrawScreen 对象。

一种解决方案是只创建一次 DrawString 实例***，***可能在 ChromeNPlayerScreen 类中，然后通过构造函数参数将相同的实例传递给您的*Key**类**。*这样，您对 Keys 类持有的实例所做的更改将反映在 ChromeNPlayerScreen 类中显示的同一个对象中。

```
 public class Keys extends KeyAdapter{
   DrawScreen dPnl;

   public Keys(DrawString dPnl) {
     this.dPnl = dPnl;
   } 
```

和

```
public static void main(String[ ] args){
     DrawScreen dPnl = new DrawScreen();
     ChromeNPlayerScreen mScreen = new ChromeNPlayerScreen();
     Keys keyPress = new Keys(dPnl); 
```

# vba - 无法访问 vba 中的另一张工作表

> ID：13774617
> 
> 赞同：0
> 
> 时间：2012-12-08T04:53:14.213
> 
> 标签：vba, excel

我试图访问位于同一文件夹中的另一个工作簿中的图表和图片以及图表。这是我的代码。

```
wbname = Worksheets("Sheet1").Range("A1:A1").Value
wsname = Worksheets("Sheet1").Range("A2:A2").Value
MsgBox wbname
wbname = ThisWorkbook.Path & "\" & wbname    
MsgBox "reached here"
MsgBox "HI"
MsgBox Workbooks("C:\charts\1.xls").Sheet("L1-XO PGT ScoreCard").Range("A1:A1").Value
Set aWorkSheet = Workbooks("C:\charts\1.xls").Sheet("L1-XO PGT ScoreCard")
sCurrentSheet = aWorkSheet.Name
MsgBox "Shapes count " + CStr(aWorkSheet.Shapes.Count)
For iIndex = 1 To aWorkSheet.Shapes.Count
Set aShape = aWorkSheet.Shapes(iIndex)
MyPicture = aShape.Name
MsgBox aShape.Name + " Name, " + Str(aShape.Type)
If Left(aShape.Name, 7) = "Picture" Then
With aShape
PicHeight = .Height
PicWidth = .Width
End With
Set aChart = ActiveWorkbook.Charts.Add
ActiveWorkbook.ActiveChart.Location Where:=xlLocationAsObject, Name:=sCurrentSheet
iShapeCount = aWorkSheet.Shapes.Count
Set aShapeChart = aWorkSheet.Shapes(iShapeCount)
MyChart = aShapeChart.Name      '"Chart " & Str(aWorkSheet.Shapes.Count)
aShapeChart.Width = PicWidth
aShapeChart.Height = PicHeight
sChartJpg = sChartJpg & aShapeChart.Name & ".jpg"
With aWorkSheet
aShape.Copy
With ActiveChart 'aChart
.ChartArea.Select
.Paste
End With
.ChartObjects(iIndex).Chart.Export Filename:=sChartJpg, FilterName:="jpg",                    Interactive:=True
aShapeChart.Cut
End With
Application.ScreenUpdating = True
MsgBox "Completed."
Exit Sub
End If
Next
MsgBox "Completed."Exit Sub
ErrHandler:
MsgBox "Error # " & CStr(Err.Number) & " " & Err.Description & " " & Err.Source
Err.Clear   ' Clear the error.
 End Sub 
```

显示“HI”警报框后，它直接显示 Completed 测试框而不显示 TestBOX 警报“MsgBox Workbooks("C:\charts\1.xls").Sheet("L1-XO PGT ScoreCard").Range ("A1:A1").Value" ... 也不是从工作簿中提取图像。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:38:09.890

您必须打开工作簿 - 您的大部分代码无法在关闭的工作簿上运行。

# linux-kernel - 网络设备通知程序

> ID：13774619
> 
> 赞同：0
> 
> 时间：2012-12-08T04:53:44.620
> 
> 标签：linux-kernel, linux-device-driver

我在我的模块中添加了一个网络设备通知程序：

```
int os_netdevice_notifier_cb (struct notifier_block *, unsigned long, void *);
...
static struct notifier_block os_netdevice_notifier =
  {
     os_netdevice_notifier_cb,
     NULL,
     0
  };
register_netdevice_notifier(&os_netdevice_notifier); 
```

我希望能够看到哪些设备已注册/取消注册，即我必须监视事件 NETDEV_UNREGISTER。收到此事件后，是否保证该设备已从系统中移除，或者这仅表明它已被安排移除，实际工作将在稍后完成？

查看 net/core/dev.c 中的代码似乎是在清理设备后立即发送事件，但可能是我遗漏了什么？

第二个问题——删除分配给接口的 IP/硬件地址的代码在哪里，因为它从系统中注销？

谢谢 ！标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:04:43.607

在 NETDEV_UNREGISTER 时，设备并未完全从系统中删除，至少此时引用计数仍不为零。设备至少已经关闭，因此可以在此处使用 NETDEV_UNREGISTER，因为此时 RTM_DELLINK 也已发送到用户空间。

IP 地址的删除由 net/ipv4/devinet.c 中的 inet_del_ifa() 完成。当取消注册网络接口时，在 NETDEV_UNREGISTER 事件中，inetdev_destroy() 被调用：

```
static void inetdev_destroy(struct in_device *in_dev)
{
        struct in_ifaddr *ifa;
        struct net_device *dev;

        ASSERT_RTNL();

        dev = in_dev->dev;

        in_dev->dead = 1;

        ip_mc_destroy_dev(in_dev);

        while ((ifa = in_dev->ifa_list) != NULL) {
                inet_del_ifa(in_dev, &in_dev->ifa_list, 0);
                inet_free_ifa(ifa);
        }

        RCU_INIT_POINTER(dev->ip_ptr, NULL);

        devinet_sysctl_unregister(in_dev);
        neigh_parms_release(&arp_tbl, in_dev->arp_parms);
        arp_ifdown(dev);

        call_rcu(&in_dev->rcu_head, in_dev_rcu_put);
} 
```

# java - MySQL DB 未从 Java 更新

> ID：13774620
> 
> 赞同：0
> 
> 时间：2012-12-08T04:54:08.020
> 
> 标签：java, mysql, sql-update

我有一个程序可以将值插入到本地数据库的表中。它工作正常，但是当我检查数据库时，它没有更新。该程序甚至输出正确的值。我是否错误地连接到数据库

```
connect = 
    DriverManager.getConnection("jdbc:MySQL://localhost/test", "root", ""); 
```

知道为什么吗？

```
import java.sql.Connection;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

//static because when creating an object of it in main, you won't have to make an object of the outer class (SQLProject) first
public class MySQLAccess{
    private Connection connect = null;
    private Statement statement = null;
    private PreparedStatement preparedStatement = null;
    private ResultSet resultSet = null;

    public void readDatabase() throws Exception
    {
        try{
            Class.forName("com.mysql.jdbc.Driver");
            connect = DriverManager.getConnection("jdbc:MySQL://localhost/test", "root", "");

            statement = connect.createStatement();
            System.out.println("here1");
            resultSet = statement.executeQuery("select * from test.comments");
            writeResultSet(resultSet);

            preparedStatement = connect.prepareStatement("INSERT INTO test.comments values(default, ?, ?, ?, ?, ?, ?)");
            //columsn in test.comments
            // myuser, email, webpage, datum, summary, COMMENTS
            preparedStatement.setString(1, "Test");
            preparedStatement.setString(2, "TestEmail");
            preparedStatement.setString(3, "TestWebpage");
            preparedStatement.setDate(4, new java.sql.Date(2009, 12, 11));
            preparedStatement.setString(5, "Test Summary");
            preparedStatement.setString(6, "Test Comment");
            System.out.println("here2");
            preparedStatement.executeUpdate();

            preparedStatement = connect.prepareStatement("SELECT myuser, webpage, datum, summary, comments FROM test.comments");
            System.out.println("here3");
            resultSet = preparedStatement.executeQuery();
            writeResultSet(resultSet);

            preparedStatement = connect.prepareStatement("DELETE FROM test.comments WHERE myuser=?;");
            preparedStatement.setString(1, "Test");
            preparedStatement.executeUpdate();

            resultSet = statement.executeQuery("SELECT * FROM test.comments;");
            System.out.println("Writing meta data");
            writeMetaData(resultSet);
            connect.setAutoCommit(false);
            connect.commit();
        }
        catch (Exception e){
            throw e;
        }
        finally{ 

            close();
            System.out.println("ALMOST");
            }
        System.out.println("AT THE END");
    }

    private void writeMetaData(ResultSet resultSet) throws SQLException
    {
        System.out.println("The columns in the table are: ");
        System.out.println("Table: " + resultSet.getMetaData().getTableName(1));

        for(int i=1;i<=resultSet.getMetaData().getColumnCount(); i++)
        {
            System.out.println("Column " + i + " " + resultSet.getMetaData().getColumnName(i));
        }
    }

    private void writeResultSet(ResultSet resultSet) throws SQLException
    {
        while(resultSet.next())
        {
            String user = resultSet.getString("myuser");
            String website = resultSet.getString("webpage");
            String summary = resultSet.getString("summary");
            Date date = resultSet.getDate("datum");
            String comment = resultSet.getString("comments");

            System.out.println("User: " + user);
            System.out.println("website: " + website);
            System.out.println("summary: " + summary);
            System.out.println("date: " + date);
            System.out.println("comment: " + comment);
        }
    }

    private void close()
    {
        try{
            if(resultSet != null)
                resultSet.close();
            if(statement != null)
                statement.close();
            if(connect != null)
                connect.close();

        }
        catch(Exception e){
            e.printStackTrace();

            System.out.println(e);
        }
    }
}//private inner class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T04:56:29.397

`connect.setAutoCommit(false);`

应该在连接初始化后立即出现

`connect = DriverManager.getConnection("jdbc:MySQL://localhost/test", "root", ""); connect.setAutoCommit(false);`

# facebook-fql - 不能拉朋友的照片，即使权限是正确的

> ID：13774625
> 
> 赞同：1
> 
> 时间：2012-12-08T04:54:41.307
> 
> 标签：facebook-fql

我正在尝试提取标记了特定朋友的照片。因此，我创建了一个具有`user_photos`和`friends_photos`权限的访问令牌。

1.  我可以运行查询来获取我被标记的照片：

    `SELECT object_id FROM photo_tag WHERE subject=me()`

2.  我可以使用 me() 或 user_id 引用自己：

    `SELECT object_id FROM photo_tag WHERE subject=1102318`

但是当我要求一张朋友被标记的照片时，我得到了空集：

```
SELECT object_id FROM photo_tag WHERE subject=1102054 
```

--> []

奇怪的是，我可以**使用**以下（大量）查询拉出**所有** 朋友：`photo_tags`

 **```
SELECT object_id FROM photo_tag WHERE subject IN
    (SELECT uid2 FROM friend WHERE uid1=me()) 
```

-->works(!)，返回前 1400 个左右。因此，这似乎不是权限问题。

我还可以获取从上表中选择的单个用户的照片

```
SELECT object_id FROM photo_tag WHERE subject IN
    (SELECT uid2 FROM friend WHERE uid1=me() LIMIT 1) 
```

--> 也可以

但索引表失败

```
SELECT object_id FROM photo_tag WHERE subject IN
    (SELECT uid2 FROM friend WHERE uid1=me() LIMIT 1 OFFSET 3) 
```

--> []

我想知道是否有其他人以前见过这样的行为。我提交了一个[错误报告](https://developers.facebook.com/bugs/135294859957800?browse=search_50c2c6322810e2d66872956)，如果我有任何消息，我会报告回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:47:16.680

facebook 没有公开告诉你的是，用户可以决定向其他 facebook 用户使用的应用程序提供哪些类型的数据（[在此处](https://www.facebook.com/settings?tab=applications&section=friends_share&view)查看“其他人使用的应用程序”部分）。因此，如果您示例中的用户 1102054 决定禁止其他人使用的应用程序访问他的照片，则查询如下

```
SELECT object_id FROM photo_tag WHERE subject=1102054 
```

将失败。

但是，如果您的示例中的用户 1102054 和允许应用访问照片的其他人在特定图片中被标记，那么您仍然可以通过以下方式通过查询访问该图片：

```
SELECT pid FROM photo_tag WHERE subject=1102054
             AND pid in (SELECT pid FROM photo_tag WHERE subject=<other user id here>) 
```

不过要小心。像这样切换上述两个用户 ID 仍然会返回一个空数据集：

```
SELECT pid FROM photo_tag WHERE subject=<other user id here>
             AND pid in (SELECT pid FROM photo_tag WHERE subject=1102054) 
```**

# oracle - 回到不存在的地方

> ID：13774633
> 
> 赞同：0
> 
> 时间：2012-12-08T04:55:57.113
> 
> 标签：oracle, plsql

我在这里想要实现的是，在**单个语句中**如何使用返回值来获取返回**值**。

我正在使用以下代码，但出现语法错误。

```
set serveroutput on;
DECLARE
  D_ID NUMBER DEFAULT 0;
BEGIN
    INSERT INTO admin_depts
                (name,
                 description,
                 created_by,
                 status)
    SELECT 'SMS',
           'SMS Team',
           'admin',
           'PEN'
      FROM dual 
     WHERE NOT EXISTS (SELECT 1
                         FROM admin_depts
                        WHERE name = 'SMS') RETURNinG ID INTO D_ID;

   dbms_output.put_line(D_ID);
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:24:14.727

[不支持](http://www.oracle-developer.net/display.php?id=413)插入...选择...返回。

参考文章中有一些建议的解决方法。

# javascript - 函数调用在我的页面中不起作用

> ID：13774638
> 
> 赞同：0
> 
> 时间：2012-12-08T04:56:52.283
> 
> 标签：javascript, html, json, google-font-api

我制作了一个适用于 google-font-Api 的选择菜单。我在 JSBIN 中工作是我的工作[http://jsbin.com/ocutuk/18/](http://jsbin.com/ocutuk/18/)

但是当我在 html 页面中复制我的代码时，它甚至没有在页面中加载字体名称。我试图让它工作，但它仍然处于死胡同。这是我的html代码

```
 <!DOCTYPE html>
 <html>
 <head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"> </script>
  <meta charset=utf-8 />
  <title>FONT API</title>
  <script>
    function SetFonts(fonts) { 
    for (var i = 0; i < fonts.items.length; i++) {      
    $('#styleFont')
     .append($("<option></option>")
     .attr("value", fonts.items[i].family)
     .text(fonts.items[i].family));
    }    
  }

  var script = document.createElement('script');
  script.src = 'https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyB8Ua6XIfe-gqbkE8P3XL4spd0x8Ft7eWo&callback=SetFonts';
  document.body.appendChild(script);

  WebFontConfig = {
google: { families: ['ABeeZee', 'Abel', 'Abril Fatface', 'Aclonica', 'Acme', 'Actor', 'Adamina', 'Advent Pro', 'Aguafina Script', 'Akronim', 'Aladin', 'Aldrich', 'Alegreya', 'Alegreya SC', 'Alex Brush', 'Alfa Slab One', 'Alice', 'Alike', 'Alike Angular', 'Allan', 'Allerta', 'Allerta Stencil', 'Allura', 'Almendra', 'Almendra Display', 'Almendra SC', 'Amarante', 'Amaranth', 'Amatic SC', 'Amethysta', 'Anaheim', 'Andada', 'Andika', 'Angkor', 'Annie Use Your Telescope', 'Anonymous Pro', 'Antic', 'Antic Didone', 'Antic Slab', 'Anton', 'Arapey', 'Arbutus', 'Arbutus Slab', 'Architects Daughter', 'Archivo Black', 'Archivo Narrow', 'Arimo', 'Arizonia', 'Armata', 'Artifika', 'Arvo', 'Asap', 'Asset', 'Astloch', 'Asul', 'Atomic Age', 'Aubrey', 'Audiowide', 'Autour One', 'Average', 'Average Sans', 'Averia Gruesa Libre', 'Averia Libre', 'Averia Sans Libre', 'Averia Serif Libre', 'Bad Script', 'Balthazar', 'Bangers', 'Basic', 'Battambang', 'Baumans', 'Bayon', 'Belgrano', 'Belleza', 'BenchNine', 'Bentham', 'Berkshire Swash', 'Bevan', 'Bigelow Rules', 'Bigshot One', 'Bilbo', 'Bilbo Swash Caps', 'Bitter', 'Black Ops One', 'Bokor', 'Bonbon', 'Boogaloo', 'Bowlby One', 'Bowlby One SC', 'Brawler', 'Bree Serif', 'Bubblegum Sans', 'Bubbler One', 'Buda', 'Buenard', 'Butcherman', 'Butterfly Kids', 'Cabin', 'Cabin Condensed', 'Cabin Sketch', 'Caesar Dressing', 'Cagliostro', 'Calligraffitti', 'Cambo', 'Candal', 'Cantarell', 'Cantata One', 'Cantora One', 'Capriola', 'Cardo', 'Carme', 'Carrois Gothic', 'Carrois Gothic SC', 'Carter One', 'Caudex', 'Cedarville Cursive', 'Ceviche One', 'Changa One', 'Chango', 'Chau Philomene One', 'Chela One', 'Chelsea Market', 'Chenla', 'Cherry Cream Soda', 'Cherry Swash', 'Chewy', 'Chicle', 'Chivo', 'Cinzel', 'Cinzel Decorative', 'Clicker Script', 'Coda', 'Coda Caption', 'Codystar', 'Combo', 'Comfortaa', 'Coming Soon', 'Concert One', 'Condiment', 'Content', 'Contrail One', 'Convergence', 'Cookie', 'Copse', 'Corben', 'Courgette', 'Cousine', 'Coustard', 'Covered By Your Grace', 'Crafty Girls', 'Creepster', 'Crete Round', 'Crimson Text', 'Croissant One', 'Crushed', 'Cuprum', 'Cutive', 'Cutive Mono']}
};
(function() {
var wf = document.createElement('script');
wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
  '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
wf.type = 'text/javascript';
wf.async = 'true';
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(wf, s);
})();

 $("#styleFont").change(function (){
   var id =$('#styleFont option' +':selected').val();  
                            $("#custom_text").css('font-family',id);

   });

  </script>
  <style>
      #custom_text {
  font-family: Arial;
  resize: none;
  margin-top: 20px;
  width: 500px;
     }
      #styleFont {
  width: 100px;
     }
    </style>

    </head>
    <body>
    <select id="styleFont">
    </select><br>
    <textarea id="custom_text"></textarea>
    </body>
    </html> 
```

我怎样才能让它工作。我在这里犯了什么错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:01:44.310

将脚本移动到页面底部。现在的问题是脚本在 DOM 形成之前运行。

```
<!DOCTYPE html>
 <html>
 <head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"> </script>
  <meta charset=utf-8 />
  <title>FONT API</title>

  <style>
      #custom_text {
  font-family: Arial;
  resize: none;
  margin-top: 20px;
  width: 500px;
     }
      #styleFont {
  width: 100px;
     }
    </style>

    </head>
    <body>
    <select id="styleFont">
    </select><br>
    <textarea id="custom_text"></textarea>

    <script>
    function SetFonts(fonts) { 
    for (var i = 0; i < fonts.items.length; i++) {      
    $('#styleFont')
     .append($("<option></option>")
     .attr("value", fonts.items[i].family)
     .text(fonts.items[i].family));
    }    
  }

  var script = document.createElement('script');
  script.src = 'https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyB8Ua6XIfe-gqbkE8P3XL4spd0x8Ft7eWo&callback=SetFonts';
  document.body.appendChild(script);

  WebFontConfig = {
google: { families: ['ABeeZee', 'Abel', 'Abril Fatface', 'Aclonica', 'Acme', 'Actor', 'Adamina', 'Advent Pro', 'Aguafina Script', 'Akronim', 'Aladin', 'Aldrich', 'Alegreya', 'Alegreya SC', 'Alex Brush', 'Alfa Slab One', 'Alice', 'Alike', 'Alike Angular', 'Allan', 'Allerta', 'Allerta Stencil', 'Allura', 'Almendra', 'Almendra Display', 'Almendra SC', 'Amarante', 'Amaranth', 'Amatic SC', 'Amethysta', 'Anaheim', 'Andada', 'Andika', 'Angkor', 'Annie Use Your Telescope', 'Anonymous Pro', 'Antic', 'Antic Didone', 'Antic Slab', 'Anton', 'Arapey', 'Arbutus', 'Arbutus Slab', 'Architects Daughter', 'Archivo Black', 'Archivo Narrow', 'Arimo', 'Arizonia', 'Armata', 'Artifika', 'Arvo', 'Asap', 'Asset', 'Astloch', 'Asul', 'Atomic Age', 'Aubrey', 'Audiowide', 'Autour One', 'Average', 'Average Sans', 'Averia Gruesa Libre', 'Averia Libre', 'Averia Sans Libre', 'Averia Serif Libre', 'Bad Script', 'Balthazar', 'Bangers', 'Basic', 'Battambang', 'Baumans', 'Bayon', 'Belgrano', 'Belleza', 'BenchNine', 'Bentham', 'Berkshire Swash', 'Bevan', 'Bigelow Rules', 'Bigshot One', 'Bilbo', 'Bilbo Swash Caps', 'Bitter', 'Black Ops One', 'Bokor', 'Bonbon', 'Boogaloo', 'Bowlby One', 'Bowlby One SC', 'Brawler', 'Bree Serif', 'Bubblegum Sans', 'Bubbler One', 'Buda', 'Buenard', 'Butcherman', 'Butterfly Kids', 'Cabin', 'Cabin Condensed', 'Cabin Sketch', 'Caesar Dressing', 'Cagliostro', 'Calligraffitti', 'Cambo', 'Candal', 'Cantarell', 'Cantata One', 'Cantora One', 'Capriola', 'Cardo', 'Carme', 'Carrois Gothic', 'Carrois Gothic SC', 'Carter One', 'Caudex', 'Cedarville Cursive', 'Ceviche One', 'Changa One', 'Chango', 'Chau Philomene One', 'Chela One', 'Chelsea Market', 'Chenla', 'Cherry Cream Soda', 'Cherry Swash', 'Chewy', 'Chicle', 'Chivo', 'Cinzel', 'Cinzel Decorative', 'Clicker Script', 'Coda', 'Coda Caption', 'Codystar', 'Combo', 'Comfortaa', 'Coming Soon', 'Concert One', 'Condiment', 'Content', 'Contrail One', 'Convergence', 'Cookie', 'Copse', 'Corben', 'Courgette', 'Cousine', 'Coustard', 'Covered By Your Grace', 'Crafty Girls', 'Creepster', 'Crete Round', 'Crimson Text', 'Croissant One', 'Crushed', 'Cuprum', 'Cutive', 'Cutive Mono']}
};
(function() {
var wf = document.createElement('script');
wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
  '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
wf.type = 'text/javascript';
wf.async = 'true';
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(wf, s);
})();

 $("#styleFont").change(function (){
   var id =$('#styleFont option' +':selected').val();  
                            $("#custom_text").css('font-family',id);

   });

  </script>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:06:10.670

嗯，原因很简单：

您尝试在某些 DOM 元素完全加载之前对其进行操作。

将您的代码包装在一个

```
$(function(){
} 
```

将解决问题。

更具体地说，您可以将代码更改为：

```
 function SetFonts(fonts) {
  for (var i = 0; i < fonts.items.length; i++) {
  $('#styleFont')
   .append($("<option></option>")
   .attr("value", fonts.items[i].family)
   .text(fonts.items[i].family));
  }
}

$(function(){
var script = document.createElement('script');
script.src = 'https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyB8Ua6XIfe-gqbkE8P3XL4spd0x8Ft7eWo&callback=SetFonts';
document.body.appendChild(script);

 // all the rest of your code....
}); 
```

# c# - Google Adwords API 响应解析

> ID：13774645
> 
> 赞同：1
> 
> 时间：2012-12-08T04:58:39.570
> 
> 标签：c#, google-ads-api

我试图弄清楚如何毫无例外地解析 Adword API 查询响应，我遇到的一个问题是，有时，除了每列之间的逗号之外，数据本身还包含逗号。假设我通过使用查询 Adroup、活动和印象

```
<reportDefinition xmlns="https://adwords.google.com/api/adwords/cm/v201209">
  <selector>
    <fields>CampaignName</fields>
    <fields>AdgroupName</fields>
    <fields>Impressions</fields>
    <predicates>
      <field>Status</field>
      <operator>IN</operator>
      <values>ENABLED</values>
      <values>PAUSED</values>
    </predicates>
  </selector>
  <reportName>Custom Adgroup Performance Report</reportName>
  <reportType>ADGROUP_PERFORMANCE_REPORT</reportType>
  <dateRangeType>LAST_7_DAYS</dateRangeType>
  <downloadFormat>CSV</downloadFormat>
</reportDefinition> 
```

由于我的广告系列在字符串中包含逗号，如下所示：“Adroup,Campaign,Impressions,Premiun Beer, Beer, Chicago, 1000”，其中广告组是“优质啤酒”，广告系列是“Beer,Chicago”。如果我们使用逗号解析此信息，这将导致问题。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:16:28.777

我认为最简单的解决方案是更改广告系列名称，使它们没有逗号。您可以使用 Adwords 编辑器轻松完成此操作。在活动概览中，您可以选择所有带逗号的活动。例如，通过选择“替换文本”，您可以用连字符替换逗号。

# list - 如何在python中将月份数字转换为月份名称

> ID：13774649
> 
> 赞同：9
> 
> 时间：2012-12-08T04:59:16.043
> 
> 标签：list, numbers, python-3.2

您如何获得与用户输入相对应的列表。如果我有一个类似的列表：

```
month_lst = ['January', 'February', 'March', 'April', 'May', 'June', 'July',
              'August', 'September', 'October', 'November', 'December'] 
```

如何输入 1 以返回“一月”作为答案？

```
input('Enter the number to be converted: ') 
```

此外，输入需要检查列表以确保它在 1-12 范围内，因此输入 15 会读取错误消息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T05:01:52.643

日历库可以提供您想要的，请参阅[http://docs.python.org/2/library/calendar.html上的文档](http://docs.python.org/2/library/calendar.html)

```
calendar.month_name[month_number] #for the full name 
```

或者

```
calendar.month_abbr[month_number] #for the short name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T10:34:36.677

```
month_lst = ['January', 'Feburary', 'March', 'April', 'May', 'June', 'July', 
              'August', 'September', 'October', 'November', 'December']
try:
    month = int(input('Enter the number to be converted: '))
    if month < 1 or month > 12:
        raise ValueError
    else:
        print(month_lst[month - 1])
except ValueError:
    print("Invalid number") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-25T07:19:08.323

我知道这是一个非常古老的问题。但是我是否找到了一个非常简单的解决方案。

```
import calendar

def get_month_name(month_number):
    try:
        return calendar.month_name[month_number]
    except IndexError:
        print("'{}' is not a valid month number".format(month_number)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T05:03:06.550

`input()`您可以使用或从用户那里获取输入`raw_input()`，具体取决于您的 python 版本（后者用于 Python 2.x）。

您可以使用 将给您的字符串转换为整数`int()`。

最后，您可以在列表中查找字符串，`month_lst[some_integer]`其中`some_integer`比您从用户那里获得的整数小一。

# opencart - Opencart 如何在类别列表页面中显示产品标签？

> ID：13774656
> 
> 赞同：-2
> 
> 时间：2012-12-08T05:00:03.640
> 
> 标签：opencart

OpenCart 1.5.3.1：如何在类别列表页面中显示产品标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:35:12.720

在目录/类别控制器`'tag' => $result['tag'],`中，在数组中添加一个新索引`$this->data['products'][]`（大约行：187）。这将使产品标签可在 product/category.tpl 中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T07:52:05.113

**模型：**

在`/catalog/model/catalog/category.php`文件中，您可以使用此自定义代码来获取与`category_id`

```
public function getTags($category_id) {
    $query = $this->db->query("SELECT tag FROM " . DB_PREFIX .
    "product_description opd LEFT JOIN " . DB_PREFIX .
    "product_to_category optc ON optc.product_id = opd.product_id
     WHERE opd.tag <> '' AND optc.category_id = '".(int)$category_id."'");
    return $query->rows;
} 
```

**控制器：**

在`/catalog/controller/product/category.php`文件中你可以调用上面的模型方法

```
$tags = $this->model_catalog_category->getTags($category_id);
$data['tags'] = array();
if($tags) {
    foreach($tags as $tag) {
        $tag_names = explode(',', $tag['tag']);
        foreach ($tag_names as $tag_name) {
            if(!in_array($tag_name, $data['tags'])) {
                $data['tags'][] = trim($tag_name);
            }
        }               
    }
} else {
    $data['tags'] = '';
} 
```

**模板：**

在模板中，您可以访问变量中的标签`$tags`

# jquery - 固定容器中的随机移动

> ID：13774659
> 
> 赞同：6
> 
> 时间：2012-12-08T05:00:19.260
> 
> 标签：jquery, html, random

我正在寻找可以在固定 div 容器内随机移动的东西。我喜欢这个例子中物体移动的方式，我在这个网站上发现了这个例子......

[http://jsfiddle.net/Xw29r/15/](http://jsfiddle.net/Xw29r/15/)

jsfiddle 上的代码包含以下内容：

```
$(document).ready(function(){
animateDiv();

});

function makeNewPosition(){

// Get viewport dimensions (remove the dimension of the div)
var h = $(window).height() - 50;
var w = $(window).width() - 50;

var nh = Math.floor(Math.random() * h);
var nw = Math.floor(Math.random() * w);

return [nh,nw];    

}

function animateDiv(){
var newq = makeNewPosition();
var oldq = $('.a').offset();
var speed = calcSpeed([oldq.top, oldq.left], newq);

$('.a').animate({ top: newq[0], left: newq[1] }, speed, function(){
  animateDiv();        
});

};

function calcSpeed(prev, next) {

var x = Math.abs(prev[1] - next[1]);
var y = Math.abs(prev[0] - next[0]);

var greatest = x > y ? x : y;

var speedModifier = 0.1;

var speed = Math.ceil(greatest/speedModifier);

return speed;

}​ 
```

CSS：

```
div.a {
    width: 50px;
    height:50px;
    background-color:red;
    position:fixed;    
}​ 
```

但是，我根本不相信上面的代码会限制该对象。我需要我的对象在一个容器内随机移动，假设现在......宽度为 1200 像素，高度为 500 像素。

有人可以引导我朝着正确的方向前进吗？我对编码非常陌生，所以我很难自己找到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T05:11:11.433

这是一个具有您正在寻找的功能的 jsfiddle：http: [//jsfiddle.net/2TUFF/](http://jsfiddle.net/2TUFF/)

JavaScript：

```
$(document).ready(function() {
    animateDiv();

});

function makeNewPosition($container) {

    // Get viewport dimensions (remove the dimension of the div)
    $container = ($container || $(window))
    var h = $container.height() - 50;
    var w = $container.width() - 50;

    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);

    return [nh, nw];

}

function animateDiv() {
    var $target = $('.a');
    var newq = makeNewPosition($target.parent());
    var oldq = $target.offset();
    var speed = calcSpeed([oldq.top, oldq.left], newq);

    $('.a').animate({
        top: newq[0],
        left: newq[1]
    }, speed, function() {
        animateDiv();
    });

};

function calcSpeed(prev, next) {

    var x = Math.abs(prev[1] - next[1]);
    var y = Math.abs(prev[0] - next[0]);

    var greatest = x > y ? x : y;

    var speedModifier = 0.1;

    var speed = Math.ceil(greatest / speedModifier);

    return speed;

}​ 
```

HTML：

```
<div id="container">
<div class='a'></div>
</div>​ 
```

CSS：

```
div#container {height:100px;width:100px;}

div.a {
width: 50px;
height:50px;
 background-color:red;
position:fixed;

}​ 
```

这将允许您创建具有任何高度/宽度的包装元素，并使浮动元素保持在其容器区域内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T05:09:47.577

在它周围添加一个包装器元素并更新 jQuery 以限制尺寸。

```
<div id="wrap">
    <div class='a'></div>
</div> 
```

​</p>

```
// Get viewport dimensions (remove the dimension of the div)
    var h = $('#wrap').height() - 50;
    var w = $('#wrap').width() - 50; 
```

这是一个更新的小提琴：http: [//jsfiddle.net/Xw29r/375/](http://jsfiddle.net/Xw29r/375/)

# php - 从 PHP 中的类方法中包含访问属性

> ID：13774669
> 
> 赞同：0
> 
> 时间：2012-12-08T05:02:43.950
> 
> 标签：php, class, scope

如何使类属性可用于同一类方法中的其他包含文件？

```
// file A.php
class A
{
    private $var = 1;

    public function go()
    {
        include('another.php');
    }
} 
```

在另一个文件中：

```
// this is another.php file
// how can I access class A->var?
echo $var; // this can't be right 
```

考虑到范围，这是否可能。如果 var 是一个数组，那么我们可以使用 extract，但如果 var 不是，我们可以将它包装在一个数组中。**有没有更好的方法**？

谢谢！

**编辑**

好的，澄清**another.php**实际上是另一个文件。基本上，在上面的示例中，我们有 2 个文件**A.php**包含类 A 和**another.php**，它是另一个执行某些操作的文件/脚本。

**回答：我的错...我从 index.php 中包含了另一个.php .. 我看到范围仍然适用.. 谢谢大家..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:16:39.433

您的问题*似乎*是，“*当在方法中包含的文件中，我如何访问私有实例成员？* ”对吗？

在您的示例代码中，您在方法中包含一个文件。

方法只是函数。与 PHP 的所有其他领域一样，被包含的文件将继承*整个当前范围*。这意味着 include 可以看到该方法中范围内的所有内容。包括`$this`.

换句话说，您将访问包含文件中的属性，就像您从函数本身内部访问它一样，如`$this->var`.

* * *

例如，使用 PHP 交互式 shell：

```
[charles@lobotomy /tmp]$ cat test.php
<?php
echo $this->var, "\n";

[charles@lobotomy /tmp]$ php -a
Interactive shell

php > class Test2 { private $var; public function __construct($x) { $this->var = $x; } public function go() { include './test.php'; } }
php > $t = new Test2('Hello, world!');
php > $t->go();
Hello, world!
php > exit
[charles@lobotomy /tmp]$ php --version
PHP 5.4.4 (cli) (built: Jun 14 2012 18:31:18)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.2.0rc1, Copyright (c) 2002-2012, by Derick Rethans 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:10:15.750

您已定义为私有，**这**`$var`意味着`$var`只能由成员函数访问。如果你需要访问，要么将其公开，要么从成员函数中返回。[您应该阅读PHP 手册](http://php.net/manual/en/language.oop5.visibility.php)中有关可见性的更多信息**`$var`**

 ****编辑：**使您的情况有趣的是您是`include`从成员函数调用的。 `include`将继承调用它的范围。因此，从技术上讲，您可以`$this->var`从`another.php`. 但是，我**强烈反对这种做法**。如果`another.php`包含在其他任何地方，您将收到错误。请，*请*不要这样做。这是糟糕的编程习惯。

如果你真的必须，将这些行添加到`A.php`：

```
$obj = new A();
$obj->go();    // this will call another.php, which will echo "$this->var" 
```

然后改成`another.php`这样：

```
echo $this->var; 
```

它会起作用；你会得到正确的输出。请注意，如果您不声明 A 类的实例，这将失败（例如，`A::go()`、`A->go()`等都将失败）。这是在 PHP 中处理事情的一种糟糕的方式。

但是以更好的方式做事，您可以将变量公开：

```
class A {
    public $var = 1;  //note, it is public!
    public function go() {
        include('another.php');
    }
}
$obj = new A();
echo $obj->var; //woot! 
```

或者，保持私有（这是更好的 OOP）：

```
class A {
    private $var = 1;  //note, it is private

    //make a public function that returns var:
    public function getVar() {
        return $this->var;
    }

    public function go() {
        include('another.php');
    }
}

$obj = new A();
echo $obj->getVar(); //woot! 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-08T05:15:19.700

```
 class A
{
    public $var = 1;

    public function go()
    {
        include('another.php');
    }
}

$objA = new A();

$objA->go(); 
```**

# java - Jquery Ajax 将 JSON 发布到服务器不起作用

> ID：13774678
> 
> 赞同：0
> 
> 时间：2012-12-08T05:04:15.540
> 
> 标签：java, javascript, jquery, ajax

我正在尝试使用 JQuery 将 JSON 数据发布到服务器，但如果我设置内容类型，则服务器不会被命中。没有发生 HTTP 命中。我通过 Firebug 进行了检查。如果我删除内容类型，则服务器会受到攻击，但数据是键值对的形式。

我尝试在 Java 中使用 HTTPClient 进行测试以访问服务器，它的效果非常好。所以服务器上没有问题。

```
function abc(){
    var abhishek = { 'latitude' : '123',
                     'longitude':'23'};
    $.ajax({
        url : "http://dev.reportaspot.com/health/jsonHit",
        //contentType: 'application/json',
        type : 'POST',
        data : JSON.stringify(abhishek),
        success : function(data2){
            alert('Load was performed.' + data2);
        },
        error : function(err,textstatus,errorThrown){
            console.log(err);
            console.log(textstatus);
            console.log(errorThrown);
            alert('Error '+err);
        }
    });

$(document).ready(function(){
    abc();
    var abhishek = { 'latitude' : '123',
             'longitude':'23'};
}); 
```

附加 JSFiddle 代码。[http://jsfiddle.net/AynLX/3/](http://jsfiddle.net/AynLX/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:09:44.267

如果您要发布它，则无需对其进行字符串化。干脆做`data: abhishek`。

# javascript - 如何在 extjs4.1 的控制器中声明全局变量？

> ID：13774679
> 
> 赞同：4
> 
> 时间：2012-12-08T05:04:16.103
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我遇到了一些问题，如果有人可以帮助我，我无法在 extjs 4.1 控制器中声明全局变量，我该如何声明它。我不知道如何在这里声明它是我的代码

```
Ext.define('Ext4Example.controller.poscontroller', {
    extend: 'Ext.app.Controller',    
    //models: ['Vat','Rebate','Customer','Product','Invoice','Item','Order','Paymethod'],
    stores: ['InvoiceIdFromSession','Vats','Rebates','Customers','Products','Invoices','Items','Paymethods'], //'Orders', ,'InvoiceIdFromSession','Products'  
    id : 'poscontroller',
    views   : ['stock.SaleWindow','stock.ItemForm2','stock.ItemsGrid','stock.CalculationForm'],
    refs: [{
        ref: 'itemForm',
        selector: 'form'
    }],
    init: function() {
        this.control({
            'itemsgrid': {
                removeitem: this.removeUser
            },
            'salewindow button[action=resetAll]': {
                click: this.resertform
            },            
            'salewindow button[action=saveOrder]' : {
                click : this.onsaveOrder
            },
            'salewindow button[action=PDF]' : {
                click : this. pdfreport
            }
        });
    },

    onsaveOrder : function(button){
            // i want declare this variable to global variable  

            var  itemform  = Ext.getCmp('itemform2');
            var  calculation_Form =Ext.getCmp('calculation-form');
            var ItemFrmdata = itemform.getForm().getValues(); 
            var calcFrmdata = calculation_Form.getForm().getValues();

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T07:50:47.087

就像您设置`id`,`views`或任何其他属性一样。您只需要知道它们命名为属性而不是变量。

例子：

```
//...
stores: ['InvoiceIdFromSession','Vats'], 
booleanVariable: true, 
stringVariable: 'demo',
floatVariable: .6,
objectVariable: { demo: 'test' }, 
id : 'poscontroller',
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T09:09:40.673

试试这个：

```
Ext.define('Ext4Example.controller.poscontroller', {
extend: 'Ext.app.Controller',
models: [
    'Vat',
    'Rebate',
    'Customer',
    'Product',
    'Invoice',
    'Item',
    'Order',
    'Paymethod'
],
stores: [
    'InvoiceIdFromSession',
    'Vats',
    'Rebates',
    'Customers',
    'Products',
    'Invoices',
    'Items',
    'Paymethods'
], //'Orders', ,'InvoiceIdFromSession','Products'
id : 'poscontroller',
views : [
    'stock.SaleWindow',
    'stock.ItemForm2',
    'stock.ItemsGrid',
    'stock.CalculationForm'
],
refs: [{
    ref: 'itemForm',
    selector: 'form'
}],

/*These are Global variables for this controller,
Now you can get and set these variable according to your need*/
config:{
    itemform  : Ext.getCmp('itemform2'),
    calculation_Form : Ext.getCmp('calculation-form'),
    ItemFrmdata : this.getItemform().getForm().getValues(),  // for get declared Variable
    calcFrmdata : this.getCalculation_Form().getForm().getValues()  // for get declared Variable
},
init: function() {

    this.control({
        'itemsgrid': {
            removeitem: this.removeUser
        },
        'salewindow button[action=resetAll]': {
            click: this.resertform
        },
        'salewindow button[action=saveOrder]' : {
            click : this.onsaveOrder
        },
        'salewindow button[action=PDF]' : {
            click : this. pdfreport
        }
    });
},
onsaveOrder : function(button){

}
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T11:55:43.797

我终于做到了......

```
Ext.define('Ext4Example.controller.poscontroller', {
  extend: 'Ext.app.Controller',    
  //models: ['Vat','Rebate','Customer','Product','Invoice','Item','Order','Paymethod'],
  stores: ['InvoiceIdFromSession','Vats','Rebates','Customers','Products','Invoices','Items','Paymethods'], //'Orders', ,'InvoiceIdFromSession','Products'  
  id : 'poscontroller',
  views : ['stock.SaleWindow','stock.ItemForm2','stock.ItemsGrid','stock.CalculationForm'],
  refs: [{
    ref: 'itemForm',
    selector: 'form'
  }],
  init: function() {
    itemform  = Ext.getCmp('itemform2');
    calculation_Form = Ext.getCmp('calculation-form');
    ItemFrmdata = itemform.getForm().getValues(); 
    calcFrmdata = calculation_Form.getForm().getValues();
    this.control({
      'itemsgrid': {
        removeitem: this.removeUser
      },
      'salewindow button[action=resetAll]': {
        click: this.resertform
      },            
      'salewindow button[action=saveOrder]' : {
        click : this.onsaveOrder
      },
      'salewindow button[action=PDF]' : {
        click : this. pdfreport
      }
    });
  },

  onsaveOrder : function(button){           
  }
}); 
```

# ruby - ruby 1.8 prime succ算法

> ID：13774680
> 
> 赞同：4
> 
> 时间：2012-12-08T05:04:16.040
> 
> 标签：ruby, algorithm, primes

我搜索了我能想象到的每个站点，但无法确定 ruby​​ 1.8 用于在 mathn 下的 Prime 类中创建素数列表的基本算法。以下是 succ 方法的可运行版本，调用 100 次（为了找到第 100 个素数）。有谁知道这是如何工作的？

```
number_of_primes = 100

seed = 1
primes = Array.new
counts = Array.new

while primes.size < number_of_primes
  i = -1
  size = primes.size
  while i < size
    if i == -1
      seed += 1
      i += 1
    else
      while seed > counts[i]
        counts[i] += primes[i]
      end
      if seed != counts[i]
        i += 1
      else
        i = -1
      end
    end
  end
  primes.push seed
  counts.push (seed + seed)
end

puts seed 
```

实际代码当然是：[http ://ruby-doc.org/stdlib-1.8.7/libdoc/mathn/rdoc/Prime.html](http://ruby-doc.org/stdlib-1.8.7/libdoc/mathn/rdoc/Prime.html)

它看起来不像筛算法，因为没有预定义的列表可供筛选，它不是试验除法算法，因为没有除法或模运算。我完全被难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T06:34:03.207

该算法基于埃拉托色尼筛法。

`seed`是被测试素数的整数。`primes`是小于 的素数列表，`seed`并`counts`包含大于 的相应最小倍数`seed`。

将“下一个”数字的列表想象`counts`成被划掉的数字，但每个素数只有一个，不断更新。当找到下一个最大的倍数时，如果我们恰好得到`seed`，那么它不是素数，所以它会重置外循环（用`i=-1`）。

只有当我们更新了更大倍数的列表，而不是恰好遇到 时`seed`，我们才能推断出它`seed`是素数。

这是稍微简化和注释的代码：

```
number_of_primes = 100

seed = 1
primes = []
counts = []

while primes.size < number_of_primes
  seed += 1
  i = 0
  while i < primes.size      # For each known prime
    while seed > counts[i]   # Update counts to hold the next multiple >= seed
      counts[i] += primes[i] # by adding the current prime enough times
    end
    if seed != counts[i]
      i += 1    # Go update next prime
    else
      i = 0     # seed is a multiple, so start over...
      seed += 1 # with the next integer
    end
  end
  # The current seed is not a multiple of any of the previously found primes, so...
  primes.push seed
  counts.push (seed + seed)
end

puts seed 
```

# javascript - 将鼠标悬停在文本上时显示 iframe

> ID：13774681
> 
> 赞同：0
> 
> 时间：2012-12-08T05:04:40.493
> 
> 标签：javascript, html, css

当您将鼠标悬停在特定文本区域上时，我正在尝试添加“附加信息”样式的 iframe。在我的基本设置中借助一些 javascript 和 css 以及两个 div。

```
<a 
   onmouseover="ShowContent('uniquename3'); return true;"
   onmouseout="HideContent('uniquename3'); return true;"
   href="javascript:ShowContent('uniquename3')">
Tournament 22:00-23:00
</a>
<div 
   id="uniquename3" 
   style="display:none; position:relative; left:0px; top:10px; border-style: none; background-color: gray; padding: 5px;overflow:none;width:212px;z-index:5;">
 <iframe src="Test2.html" width="212px" height="340px" border="0" scrollbar="no" frameborder="0"></iframe>
</div>
<div id="other" style="z-index:1;">
    Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque     laudantium,     totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae     dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit,     sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam     est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius     modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima     veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea     commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil     molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"
</div> 
```

我遇到的问题是我的 javascript 将新 div 与我的鼠标所在的 iframe 一起定位，然后颠簸我的所有文本。我真正需要做的是让 iframe 出现，但不要弄乱它周围的元素。目前，当您将鼠标悬停在锚点上时，它会将所有 lorem ipsum 降低 div 的长度，其中包含 iframe。如果有人想确切了解我的意思，我可以在我的网站上提供一个工作示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:16:15.553

试试这个：

```
#uniquename3{
  display:none;
  position:relative;
  left:0px;
  top:10px;
  border-style: none;
  background-color: gray;
  padding: 5px;
  overflow:none;
  width:212px;
  z-index:5;
}
#uniquename3 iframe{
  display:none;
  position:absolute;
  left:0px; /* pos as needed */
  top:0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:19:50.570

解决方案是确保将要悬停的 div 放置在页面底部（因此它通常不会与格式混淆），然后将 div 位置从相对位置设置为绝对位置。这允许 javascript 设置它并使用正确的 xindex 显示在顶部。

# jquery - jQuery Mobile 弄乱了 Cordova 中的格式

> ID：13774686
> 
> 赞同：0
> 
> 时间：2012-12-08T05:05:52.700
> 
> 标签：jquery, jquery-mobile, cordova

我遇到了 jQuery Mobile 问题，以及它在 pageChange 之后如何忽略任何 jQuery。jQuery 在页面上找不到任何元素，并返回涉及“循环函数”之类的错误。

您可以看到 pageChange 回到同一页面后，它显然忽略了确定用户是否登录、隐藏/显示链接等功能。此外，它还绘制了两次配置按钮，并弄乱了格式。

![在 pageChange 之后搞砸了格式并忽略了 jQuery](../Images/58dca27db4637fb2f178f7bee7a7616b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:05:52.700

简单的答案是这样的：

不要将任何 JS 代码放在 jQm 项目的正文中。把一切都放在头上。

通常，出于性能原因，我们将 JS 放在最后，但 jQm 通过在主体中做一些魔术来运行（如果您的 JS 位于那里，则会弄乱一切）。

Cordova 现在默认将所有 JS 放在正文的末尾，所以我只使用了它们所拥有的。对于 jQm 来说，这不是正确的举措。

把所有的JS放在头上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:54:30.673

您是否正在动态创建此内容？您必须使用 JqM 以非常特定的顺序做事。以下是 JQueryMobile 开发的一些最佳实践：

*   在事件中执行所有事件绑定`pageinit`。有关详细信息，请参阅[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)
*   确保如果您将新元素拖放到页面上，则在它们上调用 .trigger('create')。
*   任何对 .trigger('create') 的调用都需要在调用 $.mobile.changePage 之后进行。

# google-maps-api-3 - 标记元数据？

> ID：13774688
> 
> 赞同：1
> 
> 时间：2012-12-08T05:05:55.647
> 
> 标签：google-maps-api-3

我有更多的方法问题，而不是代码问题。

假设我在同一个域上有 2 个网页（页面 a 和页面 b）。

用户在页面 a。他们点击一个链接。我想将用户带到页面 b，然后打开一个信息窗口。

我的想法是向标记添加某种 id 或数据属性，然后，当用户到达页面 B 时，会触发一个事件，打开正确的点/信息窗口。

我读了一些关于标记元数据的东西：marker.metadata = {type: "point", id: 1};

但我对这实际上做了什么感到困惑。在生成的 html/map 中，标记是具有此 id 的元素吗？

在此先感谢您提供的任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:13:18.557

一般问题总是更难回答，因为当你缩小范围时，无论如何你都需要修改你的决定。

有一点很清楚，直接摆弄标记对象并不是一个好主意。

infoWindow 没有可以设置为使其可见的属性，您只需调用 open() 和 close()，因此尽管这可能很简单，但我会考虑使用 infowindows 的数组或 HashMap，然后阅读URL 参数来决定我们将调用 Array 的哪个元素的 open() 函数。

如果您想在 Marker 中存储其他信息，我会考虑扩展 Marker 类： IdedMarker.prototype = new google.maps.Marker(); 然后在其上添加一个属性以及 getId 和 setId 的方法。

高温高压

# c++ - 欧佩克 2 中的 cvInRangeS 类似吗？

> ID：13774695
> 
> 赞同：0
> 
> 时间：2012-12-08T05:06:58.943
> 
> 标签：c++, opencv

我想知道是否有类似的东西`cvInRanges`可以`Opencv2`直接作用于`Mat`对象。

其实我想转换这个：

```
cvInRangeS(IplImage *m1, Scalar min, Scalar max, IplImage *m2); 
```

类似于：

```
some_func (Mat m1, Scalar min, Scalar max, Mat m2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T08:03:10.920

有功能[`inRange`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#inrange)。尝试一下。

# c# - 创建一个 PictureBox 类型的数组

> ID：13774698
> 
> 赞同：0
> 
> 时间：2012-12-08T05:07:38.947
> 
> 标签：c#

这就是我试图实现我的 PictureBox 数组的方式：

```
 PictureBox[] column0 = new PictureBox[6];
    PictureBox[] column1 = new PictureBox[6];
    PictureBox[] column2 = new PictureBox[6];
    PictureBox[] column3 = new PictureBox[6];
    PictureBox[] column4 = new PictureBox[6];
    PictureBox[] column5 = new PictureBox[6];
    PictureBox[] column6 = new PictureBox[6];

    PictureBox[][] columns = 
            new PictureBox[][] 
            { column0, column1, column2, column3, column4, column5, column6 }; 
```

当我尝试创建数组数组时，出现此错误：

> 字段初始值设定项不能引用非静态字段方法或属性“Connect_Four_Server.Server.column0”

以及 column1、column2 等的相同错误。

在这种情况下如何正确声明数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:33:19.113

上面的声明本身没有问题，但是如果你在一个类中声明字段，你就不能这样使用它。如错误所述，字段初始化程序（在您的情况下`columns`）不能引用其他非静态字段（在您的情况下`column0`，`column1`...）。

您可以采取 2 种方法：

要么不声明中间字段，而是一次性完成（最好的，除非你真的需要直接引用`columnX`）：

```
PictureBox[][] columns =
        new PictureBox[][] 
        { 
            new PictureBox[6], 
            new PictureBox[6], 
            new PictureBox[6], 
            new PictureBox[6], 
            new PictureBox[6], 
            new PictureBox[6], 
            new PictureBox[6] 
        }; 
```

或者把初始化的`columns`放到构造函数中：

```
PictureBox[] column0 = new PictureBox[6];
PictureBox[] column1 = new PictureBox[6];
PictureBox[] column2 = new PictureBox[6];
PictureBox[] column3 = new PictureBox[6];
PictureBox[] column4 = new PictureBox[6];
PictureBox[] column5 = new PictureBox[6];
PictureBox[] column6 = new PictureBox[6];

PictureBox[][] columns;

public Server()
{
    columns = new PictureBox[][] { column0, column1, column2, column3, column4, column5, column6 };
} 
```

# android - 如何在android的web视图中设置样式

> ID：13774699
> 
> 赞同：1
> 
> 时间：2012-12-08T05:07:52.137
> 
> 标签：android

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

主要活动

```
public class MainActivity extends Activity {

    WebView web1;
    String st = " This is First Application";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        web1.loadData(st, "text/html", "UTF-8");

    }

} 
```

我想使用样式设置夜间模式你能告诉我如何实现它文本应该是白色的，网络视图的背景应该是黑色的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:32:07.057

如果您查看[文档](http://developer.android.com/reference/android/webkit/WebView.html)，您将看到 WebView 控件的所有可用属性。而且由于它基本上继承自[View](http://developer.android.com/reference/android/view/View.html)，因此您始终可以引用所有可设置的可用属性。
因此，要基本上回答您的问题，请使用**android:background**属性设置背景属性。
此外，由于您基本上显示的是 HTML 页面，因此您可以使用**css**自定义内容。

希望这可以帮助。

# ruby - 使用 Ruby 从 Windows 文件中提取选定的元数据

> ID：13774701
> 
> 赞同：3
> 
> 时间：2012-12-08T05:08:33.537
> 
> 标签：ruby, windows, ntfs

我有一个拥有 JPEG 文件集合的用户，基于 Windows 7 NTFS 文件系统。

用户已使用 Windows 7“详细信息”对话框对这些图像进行了注释。他们为每个文件添加了标题、注释（可能与标题不同）和标签字段。

标题似乎作为 EXIF 数据的一部分存储在每个 JPEG 文件中。

但是，评论和标签字段不是。

我在备用数据流中寻找过它们；没有。我看不出它们是否是 NTFS 扩展属性，因为我找不到专门列出这些属性的工具。

我的问题是：这个元数据存储在哪里，我如何从 Ruby 中访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:23:15.860

从 Vista 开始，似乎有一个属性系统（[1](http://msdn.microsoft.com/en-us/library/bb776860%28v=vs.85%29.aspx)和[2](http://msdn.microsoft.com/en-us/library/bb776859%28VS.85%29.aspx)），其中属性存储在文件本身中以实现可移植性，与存储在替代数据流中的数据形成对比。请参阅 Alex Martelli 在[这个问题](https://stackoverflow.com/questions/1512435/how-do-you-retrieve-the-tags-of-a-file-in-a-list-with-python-windows-vista)中的回答，这是关于 Python 的类似回答。如果我理解了这个答案，您将需要找到一种方法来连接[Windows Search API](http://msdn.microsoft.com/en-us/library/bb331575%28VS.85%29.aspx)并查询[System.Keywords](http://msdn.microsoft.com/en-us/library/bb787519%28VS.85%29.aspx)和[System.Comment](http://msdn.microsoft.com/en-us/library/bb760658%28v=vs.85%29.aspx)属性。

在这种情况下，PowerShell 可能是要走的路；[例如，此链接](http://www.codeproject.com/Articles/14602/Windows-Desktop-Search-Powershell-Cmdlet)的“Windows 桌面搜索 cmdlet”部分中有一个示例。但是，您也许可以通过 Ruby 与 COM 对象或 WMI 对话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T07:39:05.630

埃里克的回答很接近（感谢埃里克）。

答案是[Windows 使用文件中嵌入的 XMP](http://blogs.msdn.com/b/pix/archive/2006/08/16/702780.aspx)来存储一些此类信息。其他一些部分存储在 EXIF 中。

XMP 是 Adob​​e 最先开发的一种 RDF 格式。

然而，在 Ruby 中提取和操作 XMP 的支持很差—— github 上有一些库，但没有很好的集成。

*   xmpleton 不显示所有元数据；
*   xmp 在 Microsoft 的元数据上崩溃；
*   fasttrack 没有集成到整个 ruby​​gem.org 基础架构中。

在我感兴趣的三个领域中：

*   “评论”存储在 EXIF 字段“XPComment”中。
*   “标题”存储在 EXIF 中的“XPTitle”字段下和 DC 命名空间下的 XMP 中的“描述”字段中
*   “标签”存储在 EXIF 中的“XPKeyword”字段下和 DC 名称空间的 XMP 中，作为“主题”字段的列表。

我使用的方法是[mini_exiftool](http://miniexiftool.rubyforge.org/)，它包装了基于 Perl 的[EXIFTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)程序。

# android - 我需要这个 Android 应用程序创意的数据库吗？

> ID：13774706
> 
> 赞同：0
> 
> 时间：2012-12-08T05:09:10.417
> 
> 标签：android, sql, database

我已经创建了 1 个 Android 应用程序。非常基本，基本上是一个按钮，它指向一个包含网站链接的新实例。

我的问题是关于我的下一个应用程序的想法。我的意图是能够搜索有关项目的信息。例如，我有一个装满物品的柜子。我打开我的应用程序搜索一个项目，它告诉我它在柜子中的位置。

当然，我需要填写有关物品在柜子中位置的所有信息。我的问题是实现这一目标的最佳方法是什么。我需要设置 SQL 数据库吗？如果有人能指出我正确的方向，那就太好了！另外，有没有人知道一个好的安卓开发社区/论坛？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:14:22.813

这取决于您需要多少项目以及每个项目需要多少信息。您可以使用数据结构来存储信息，但如果要进行大量信息和大量搜索，那么使用数据库会快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:14:42.060

为了进行搜索，根据搜索的类型和复杂性，最好使用数据库（如果信息很少且基本信息很少，您可以随时管理数据结构），例如通过 SQLite。此外，如果数据要更改，最好制作一个 webapp（它将有一个数据库），然后 Android 应用程序与 webapp 建立连接（如 RIA），以便它可以获取数据。

# windows - 远程获取硬盘和处理器规格的命令

> ID：13774713
> 
> 赞同：13
> 
> 时间：2012-12-08T05:10:18.903
> 
> 标签：windows, cmd, wmic

什么命令有助于获取远程 Windows 机器中硬盘和处理器的信息？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-08T05:45:15.067

如果您可以依赖在 Windows Vista 或更高版本上运行，那么您可以使用 WMIC。有关 WMIC 的详细信息，请查看[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394531(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394531(v=vs.85).aspx)。

要获取 CPU 信息，请尝试`wmic cpu`

要获取硬盘信息，请尝试`wmic diskdrive`或`wmic logicaldisk`取决于您是否需要磁盘设备或逻辑驱动器的信息。

由于这些行通常会换行，因此难以在控制台窗口中阅读，请尝试使用此变体将输出重定向到文本文件：

```
wmic cpu > cpu.txt
wmic diskdrive > diskdrive.txt
wmic logicaldisk > logicaldisk.txt 
```

然后`cpu.txt`，您可以在方便的时候检查这些文件。`diskdrive.txt``logicaldisk.txt`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-22T06:57:13.880

你可以使用这个命令：msinfo32

然后按Ctrl+R输入你要连接的电脑IP

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-03T05:05:54.653

我会使用“systeminfo”，这就是我用来查找有关我的计算机的大部分内容的方法

# twitter-bootstrap - 如何获取 Twitter Bootstrap.js 表格分页

> ID：13774714
> 
> 赞同：0
> 
> 时间：2012-12-08T05:10:21.900
> 
> 标签：twitter-bootstrap

好吧，我对这里的一些人来说可能听起来很基础，但是我的这个要求真的让我失望，我的要求是我想在 twitter-bootstrap.js 中有一个带有分页的表格。说

![带分页的表格](../Images/7d3dcaf2c492223a5d9fb2573bb3ca08.png)

我可以设计表格，但无法与表格绑定分页，我应该添加一些外部 css 和 js 文件吗？还是我尝试一些不可行的东西？

请帮我 。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:17:43.037

有一个很棒的 YUI3 [http://yuilibrary.com/projects/yui3/] api 它还具有用于分页、排序、导出等表格数据的功能。;) 。

# jquery - 引导轮播中的滑动顺序

> ID：13774723
> 
> 赞同：0
> 
> 时间：2012-12-08T05:12:05.637
> 
> 标签：jquery, html, twitter-bootstrap, carousel

我正在使用引导轮播显示五个图像......我在调用轮播时禁用了滑动，我的代码是这样的

```
 <div id="myCarousel" class="carousel">
      <div class="carousel-inner">
         <div class="active item">item1</div>
         <div class="item">item2</div>
         <div class="item">item3</div>
         <div class="item">item4</div>
         <div class="item">item5</div>
     </div>

     <a class="carousel-control left" href="#myCarousel" data-slide="prev">></a>
     <a class="carousel-control right" href="#myCarousel" data-slide="next"><</a>
</div> 
```

我这样叫轮播

```
 $('.carousel').carousel({
        interval:false
     }); 
```

但问题是在滑动按顺序显示的元素时

```
 item,item3,item5,item2,item4 
```

这有什么问题，为什么它没有以正确的顺序显示，我该如何克服这个..

**附加信息：**

**如果我在 item2 中给予活动意味着订单就像这个 item2,item4,item,item3,item5**

# c++ - http服务器调用cgi程序

> ID：13774727
> 
> 赞同：0
> 
> 时间：2012-12-08T05:12:53.070
> 
> 标签：c++, http, sockets, cgi

我编写了一个非常简单的 HTTP 服务器来调用我编写的一个简单的 CGI 程序，但是我的 HTTP 服务器无法在我的浏览器上显示 CGI 程序的结果。我的 HTTP 服务器的部分代码如下。

```
while(1)
{
    struct sockaddr_in client_addr;
    int addrlen = sizeof(client_addr);

    /*Accept*/
    if((clientfd = accept(sockfd, (struct sockaddr *)&client_addr, (socklen_t*)&addrlen)) < 0)
    {
        perror("Accpet Error");
        close(sockfd);
        exit(-1);
    }
    else
    {
        /*Fork process*/
        if((child = fork()) < 0)
        {
            perror("Fork Error");
            close(sockfd);
            exit(-1);
        }
        else if(child == 0)
        {       
            int fd[2]; //pipe a fd
            close(sockfd); 
            setvbuf(stdin, NULL, _IONBF, 0);
            setvbuf(stdout, NULL, _IONBF, 0);
            setvbuf(stderr, NULL, _IONBF, 0);   
            buffer1.clear();
            buffer1.resize(VECTOR_SIZE);
            while(1)
            {
                if((res = recv(clientfd, buffer1.data(), buffer1.size(), 0)) > 0)
                {

                    string token = "QUERY_STRING=" + buffer1.data();
                    pipe(fd);
                    dup2(fd[1], STDOUT_FILENO);
                    close(fd[0]);
                    execlp("cgi", "cgi", NULL);
                     //if the bug fixed, will use `execvpe` here
                    cout << "fail" << endl;
                }

            }
        }
        else    
        {
            //exit(0);
            close(clientfd);
        }
    }

} 
```

而且，我的 CGI 程序只是 `string reply = "HTTP/1.1 200 OK\nTEST"; cout << reply;`
但浏览器无法显示结果并超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:44:35.290

您的 HTTP 响应和内容之间需要 2 个 CRLF。此外，如果不设置 Content-Type 标头，大多数浏览器可能不会显示内容。出于您的目的，您应该只设置 Content-Type: text/plain 测试目的。如果您打算提供其他 mime 类型，则需要在 CGI 中说明这一点。

正如您可能会从其他人那里听到的那样，他们会很好奇您为什么要尝试此操作...我将其归结为学术练习或只是出于好奇...但是您要做的一件事是将负责在 HTTP 服务器本身上返回响应代码和状态，而不是 CGI。

# textures - 图像纹理在 Cycles 中不起作用

> ID：13774736
> 
> 赞同：1
> 
> 时间：2012-12-08T05:13:58.140
> 
> 标签：textures, blender

我买了一个完全纹理的 .3ds 模型来在 Blender 中玩。一切都在常规的 Blender 渲染引擎中完美运行，但是当我将它带入 Cycles 时，图像纹理消失了，所以模型只是白色的。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T04:23:09.283

嗯，问题是周期，内部是非常不同的，在材料、照明和几乎任何与图片和颜色有关的东西的意义上。当您将其放入循环时，循环使用不同的 UV 映射方式，因此您仍然可以使用图像和模型，您只需重新 UV 映射并对其进行纹理处理，但当然是以循环方式。我现在不记得所有的步骤，但这里有一个很好的视频：[http ://www.youtube.com/watch?v=Ck_DCf21KMM](http://www.youtube.com/watch?v=Ck_DCf21KMM)

# events - 具有多个视图的 MVP：以正确的方式发送事件

> ID：13774740
> 
> 赞同：3
> 
> 时间：2012-12-08T05:15:04.700
> 
> 标签：events, design-patterns, mvp, multiple-views, passive-view

我第一次尝试使用 Passive View 实现 MVP，但我有点困惑谁在这种模式下通知谁。我知道如果视图发生更改，视图会通知演示者，而演示者又会通知其他所有人（其他视图和模型）。

现在，就我而言，我有多个视图，而且我还有一个可以在 UI 之外更改的模型。可能会发生以下两种情况：

1.  View[i] 发生变化并通知 Presenter。Presenter 需要通知所有其他视图和模型，但不需要通知 View[i]。此外，视图和模型都不能向 Presenter 发送更改通知，即使它们刚刚被修改（否则会出现无限循环的事件）。

2.  模型发生变化并通知 Presenter。Presenter 需要通知所有视图，而不是 Model。但是即使它刚刚被修改，任何视图都不会向 Presenter 发送更改通知。

主持人将如何通知谁，谁不通知？模型如何知道它是否需要发送更改通知？毕竟，它只是被修改，但它不一定知道是谁。

一种可能性是让每个人（模型、视图和演示者）自由地发送更改通知，但在通知中存储对最初触发更改的对象的引用（从而将通知封装在事件对象中）。然后，每个对象仅在他不是更改的原始触发器时才发送通知。但是有没有更简单、更清洁的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:39:03.927

有几种方法可以解决这个问题，但我推荐的两种方法是[Mediator Pattern](http://www.dofactory.com/Patterns/PatternMediator.asp)，或者某种类型的[Event Aggregator](http://martinfowler.com/eaaDev/EventAggregator.html)。

中介者模式背后的想法是，它允许您封装对象集合在特定场景中应如何交互，同时保持它们彼此不知道。

像这样的东西：

```
public class MyPresenterOne{
   public event EventHandler OnFoo;
}

public class MyPresenterTwo{
   public void DoStuff(){
      //Something interesting
   }
}

public class MyMediator{
   public MyMediator(MyPresenterOne p1, MyPresenterTwo p2){
      p1.OnFoo += (o, e) => p2.DoStuff();
   }
} 
```

事件聚合器是一种松散耦合的发布/订阅范例，您实际上并不是在监听事件，而是在监听消息。一方对某种类型的消息感兴趣，但并不真正关心它来自哪里。

```
public class MyPresenterOne{
   public MyPresenterOne(){
      EventAggregator.Publish("OnFoo");
   }
}

public class MyPresenterTwo{
   public MyPresenterTwo(){
      EventAggregator.Subscribe("OnFoo", () => {
         //Something interesting
      });
   }
} 
```

中介器实现起来稍微容易一些，意图也很明确，但它确实需要对所涉及的各个组件有深入的了解。这个想法是让调解人专注于特定的组合场景，而不是拥有一个巨大的调解人。

Pub/Sub 范式非常优雅，可以很好地保持组件松散耦合，但在发布什么样的消息方面需要更多的思考。

# php - json_decode 大数

> ID：13774741
> 
> 赞同：0
> 
> 时间：2012-12-08T05:15:14.797
> 
> 标签：php, json, biginteger

解码 json 字符串时出现问题

我的 PHP 版本是 5.4.4-7，我的操作系统是 Debian amd64。

JSON字符串是：

```
{"status":"success","account":{"buy_title":"KGP ID","birthday":0,"sex":0,"phone_number":"","avatar":"http:\/\/\/default\/avatar_default.png","password":"","virtual_id":"1348718752795","point":0,"quota":2,"level":1,"remain":3413838437,"token":"9702040ea11e2b87d005056b771ea","email":"ngokhat@gmail.com","buy_link":"http:\/\/id.kgp.vn","fullname":""}}* 
```

我想得到保持= 3413838437和virtual_id = 1348718752795但是当我得到

```
$result = json_decode($json, true, 512, JSON_BIGINT_AS_STRING); 
```

`$result['account']['remain']`它返回 2147483647 并`$result['account']['virtual_id]`返回 2147483647 。我不知道为什么我已经搜索并找到了[https://groups.google.com/forum/?fromgroups=#!topic/php-json/c-zOACBlCPs](https://groups.google.com/forum/?fromgroups=#!topic/php-json/c-zOACBlCPs)但链接补丁已死

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-24T01:09:29.287

> ini_set('精度', 20);

或在 php.ini 中搜索精度并将精度输入 20。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T05:28:45.243

这对我来说很好：

```
php > print_r(json_decode($json, true));
Array
(
    [status] => success
    [account] => Array
        (
            [buy_title] => KGP ID
            [birthday] => 0
            [sex] => 0
            [phone_number] => 
            [avatar] => http:///default/avatar_default.png
            [password] => 
            [virtual_id] => 1348718752795
            [point] => 0
            [quota] => 2
            [level] => 1
            [remain] => 3413838437
            [token] => 9702040ea11e2b87d005056b771ea
            [email] => ngokhat@gmail.com
            [buy_link] => http://id.kgp.vn
            [fullname] => 
        )

) 
```

这是在 64 位 PHP 上运行的，因为您的 PHP_INT_SIZE 为 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:42:14.350

抱歉，只是因为在数据库中我将​​此字段设置为 INT :D 我刚刚修改为 bigint 并且它可以正常工作！感谢支持！

# apache - 在 URL 中的任何位置使用 rewrite -phpmyadmin 捕获不良行为

> ID：13774748
> 
> 赞同：4
> 
> 时间：2012-12-08T05:16:34.030
> 
> 标签：apache, .htaccess, mod-rewrite, security, exploit

我希望有人能提供帮助，因为在 apache mod 重写方面我有点菜鸟，而弄错这个可能会把事情搞砸。

在查看我的安全日志时，我注意到几乎 50% 的攻击者机器人都有字符串 phpmyadmin（不同的情况，有时其中包含版本号）。IE

hhhh://www.example.com/phpmyadmin/

hhhh://www.example.com/something/phpMyAdmin/

hhhh://www.example.com/something/morestuff/phpMyAdmin/

hhhh://www.example.com/phpMyAdmin-2.11.3/scripts/setup.php

等等等等等等

我想知道有没有一种方法可以使用 mod rewrite 来捕获所有这些并将它们发送到

hhhh://www.example.com/bottrap/index.php

或类似的东西。（hhhh -> http - 垃圾邮件防护不允许 http）

我想只是为了很好的措施，我会在 robots.txt 文件中添加一个拒绝，并通过将 IP 地址提供给蜜罐项目来感谢您的访问。

我可以处理 php 的东西，但即使在阅读了 mod rewrite 文档之后，我仍然很迷茫。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:34:48.763

只要您对包含“phpmyadmin”的任何内容都没有任何合法请求，那么您只需在文档根目录中的 htaccess 文件顶部附近添加此规则：

```
RewriteRule phpbbadmin /bottrap/index.php [L] 
```

`R`如果您确实要重定向请求，请包含该标志： `[L,R]`。

> 我想只是为了很好的措施，我会在 robots.txt 文件中添加一个拒绝，并通过将 IP 地址提供给蜜罐项目来感谢您的访问。

我怀疑这些机器人是否尊重 robots.txt 文件。如果有的话，这些是受感染的网站或其他用户无意中在其网站或家用 PC 上托管恶意代码。如果请求变得烦人，您可以`DENY From <ipaddress>`在 htaccess 文件中包含 a，但在 robots.txt 中添加它们可能不会有太大作用。

* * *

添加 NC 使其选择案例变化。

```
RewriteRule phpmyadmin /phpmyadmin/index.php [L,NC] 
```

# jquery - 外部 HTML 或隐藏内容

> ID：13774751
> 
> 赞同：2
> 
> 时间：2012-12-08T05:16:53.457
> 
> 标签：jquery, html, css

这个问题可能很愚蠢，但这是我人生中第一次接触一些 HTML 和 CSS，所以就这样吧。基本上，我试图找出如何在整个网站上保持相同，这显然很容易，而且可能很容易，但我有点挣扎，我会告诉你为什么！

我有 3 个主页 1 2 3，一个导航，其中包含指向每个页面 1、2、3 的链接，还有一些全屏幻灯片，当拇指调用时会自行显示。（在主页中显示) 我要做的是为每张幻灯片获取一个 html，因此当单击拇指时，它会将幻灯片通过其 URL，例如在“slide1.html”上，我在主页上放置了相同的内容，但现在使用页面的 URL 定位 href 但它不起作用，因为我的三个主要页面只有一个 URL 我也认为这不是一种方法。

我查看了一些网站，但我不完全确定它是否适合我想要的。外部 html 会是一个好的解决方案吗？

[http://api.jquery.com/load/](http://api.jquery.com/load/)

```
 <nav>

        <ol>
            <li><a href="#page1">Page 1</a></li>
            <li><a href="#page2">Page 2</a></li>
            <li><a href="#page3">Page 3</a></li>
        </ol>

    </nav> 
```

第 1 页

#

```
<div id="page2">
    <p>Page 2</p>

    <li class="thumb">
        <a href="url-slide1">Thumb 1</a>
    </li>
    <li class="thumb">
        <a href="url-slide2">Thumb 2</a>
    </li>
    <li class="thumb">
        <a href="url-slide3">Thumb 3</a>
    </li>
</div>

<div id="page3">

    <p>Page 3</p>
</div> 
```

我想知道是否有一种方法可以将所有幻灯片隐藏在 page2 中，所以我会从同一个 html 文件中调用 div，这样会更容易。

```
 <nav>

        <ol>
            <li><a href="#page1">Page 1</a></li>
            <li><a href="#page2">Page 2</a></li>
            <li><a href="#page3">Page 3</a></li>
        </ol>

    </nav>

    <div id="page1">
        <p>Page 1</p>
    </div>#

    <div id="page2">
         <p>Page 2</p>
         <li class="thumb">
              <a href="#slides1">Thumb 1</a>
         </li>
          <li class="thumb">
        <a href="#slides2">Thumb 2</a>
          </li>
        <li class="thumb">
        <a href="#slides3">Thumb 3</a>
        </li>
</div>

<div id=slidesWraper>
     <div id=slides1"><div>
     <div id=slides2"><div>
     <div id=slides3"><div>
</div>

<div id="page3">

    <p>Page 3</p>
</div> 
```

我希望该链接对[http://jsfiddle.net/marco_desi/fJ2yv/](http://jsfiddle.net/marco_desi/fJ2yv/)不太确定有所帮助。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:48:50.210

我问了和新手一样的问题，答案是问题的形式是“有 3 页而不是只有 1 页有什么问题？” Soo，不要为此烦恼，每个感知页面都有一个 html 页面。

# android - android中是否存在从互联网读取文件的权限

> ID：13774760
> 
> 赞同：0
> 
> 时间：2012-12-08T05:18:15.003
> 
> 标签：android

我在问这个，因为我已经尝试过....一些代码并创建了我自己的代码来访问互联网上存在的文件，我想读取该文件但我的代码不起作用所以我问这个问题是因为在SD_CARD 情况下，我们必须向我们的 android 应用程序提供权限，以便您可以访问它....因此，每次我的应用程序终止时，我的代码都是：-

```
 try 
{
        url = new URL ("http://sites.google.com/site/androidersite/text.txt");
} 
    catch (MalformedURLException e) 
    {
    Toast.makeText( this , "url String mein hi error aa raha hai .. oo" ,          Toast.LENGTH_LONG ).show();
}

    HttpURLConnection  urlConnection = null ;
    try 
    {
    urlConnection = (HttpURLConnection) url.openConnection();
} 
    catch (IOException e) 
    {
        Toast.makeText( this , "HTTP url connection mein error" , Toast.LENGTH_SHORT ).show();
}

    ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();

    if (networkInfo != null && networkInfo.isConnected()) 
    {
         Toast.makeText( this , "connect hua" , Toast.LENGTH_SHORT ).show();
    } 
    else 
    {
         Toast.makeText( this , "nahi hua connect" , Toast.LENGTH_SHORT ).show();
    }

    try 
    {
         BufferedReader bufferReader = new BufferedReader(new InputStreamReader(url.openStream()));

         String StringBuffer;
         String stringText = "";

         while ((StringBuffer = bufferReader.readLine()) != null) 
         {
              stringText += StringBuffer;
         }

         bufferReader.close();

    } 
    catch (MalformedURLException e) 
    {
        e.printStackTrace();
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
```

&对于我提供的权限，它。

```
<uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# c++ - 在基于范围的 for 循环中，引用是否比复制小类型更有效？

> ID：13774761
> 
> 赞同：2
> 
> 时间：2012-12-08T05:18:29.950
> 
> 标签：c++, c++11

我最近开始使用基于范围的 for（在获得编译器功能之后）。我注意到使用基于范围的首选形式是：

```
for(const auto& it: container) {...} 
```

这对于任何大于 int 的类型都是有意义的。但是，如果容器包含原始指针（这是我的情况）或更小的类型怎么办？

具体来说，我想知道的是：

1) 请求引用而不是（可能）较小的副本是否可能会导致性能损失？如果类型的大小正好等于本机指针的大小怎么办？

2）相反，不使用参考是否可能会导致性能损失？（因为我发现编译器很可能在基于范围的情况下执行一些优化）

请注意，我要求深入了解可能的编译器行为，而不是 C++ 标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:40:33.270

取决于你在循环内做什么。

如果你只看一次“它”，应该没有区别，因为编译器*无论如何*都必须先查找地址，然后取消引用它以获得值。

如果您多次查看“it”，由于内存一致性问题，它*可能会有所不同——如果您写入**可能*与“it”别名的东西，它将不得不一次又一次地重新加载该值。

但与往常一样，使用分析器只解决那些真正存在的性能问题。

# php - PHP SQLite 登录系统有效性

> ID：13774763
> 
> 赞同：0
> 
> 时间：2012-12-08T05:19:01.760
> 
> 标签：php, sql, sqlite, login, system

我自己已经尝试了大约一个星期。正如您在下面的随意代码中可以清楚地看到的那样，我正在尝试创建一个 SQL 登录系统。它使用 SQLite 文件，当我运行代码进行故障排除时，没有弹出 PHP 错误。我假设这意味着我检查结果的方式或我的 SQL 有问题。一方面，我完全迷失了。任何帮助表示赞赏，谢谢。

```
session_start();

$user = strtolower(sqlite_escape_string($_POST['username']));
$pass = strtolower(sqlite_escape_string($_POST['password']));

$db = sqlite_open('my DB.sqlite', 0666, $sqlerr);

$query = sqlite_query($db, "SELECT COUNT(*) FROM USERS WHERE USER = '$user' AND PASS = '$pass'", $sqlerr);
$result = sqlite_fetch_all($query, SQLITE_ASSOC);

if (count($result) == 1) {
    $_SESSION['loggedin'] = true;
    $_SESSION['loginFail'] = false;
    $_SESSION['user'] = $_POST['username'];
}

if ($sqlerr != null) {
    $_SESSION['sqlerr'] = $sqlerr;
}

if (!$_SESSION['loggedin']) {
    $_SESSION['loginFail'] = true;
}

sqlite_close($db);
header("Location: index.php");
exit(); 
```

（另外，如果我忘记了任何信息，很抱歉。我有一段时间没有发布 StackOverflow 问题了。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:52:47.033

这是你的问题：

```
$query = sqlite_query($db, "SELECT COUNT(*) FROM USERS WHERE USER = '$user' AND PASS = '$pass'", $sqlerr);
$result = sqlite_fetch_all($query, SQLITE_ASSOC);

if (count($result) == 1) { 
```

您要求从数据库中获取行数，类似于`1`，然后检索此结果并将其放入数组 ( `$result`) 中，然后计算 中的条目数`$result`。的结果`count($result)`将永远是 1。

您需要比较从数据库返回的*值*或使用`SELECT *`而不是`SELECT COUNT(*)`

# sql-server - 关于如何重新复制整个数据库模式和数据而不仅仅是数据的建议

> ID：13774765
> 
> 赞同：0
> 
> 时间：2012-12-08T05:19:17.907
> 
> 标签：sql-server, database, sql-server-2008, schema

我复制了一个数据库，但我没有采取预防措施，只复制了数据，而不是模式。

当通过进行一些验证新数据库接受重复项时，我意识到这一点，并且一些键被忽略了。

现在我知道复制数据库的解决方案是使用 SSMS 编写数据库架构和数据的脚本 过程是：

> 右键单击数据库。选择任务。然后选择生成 sql 脚本。

现在我正在就如何回滚情况征求一些建议，这次复制数据库的数据和模式。有没有办法只复制模式并将更改应用于数据？

你会推荐什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:04:13.360

使用

```
Right click on the database. Choose tasks. Then choose generate sql scripts. 
```

您可以使用修改后的数据库的数据以相同的方式生成数据库的架构。然后生成数据库并使用生成的 SQL 脚本填充它。

[创建用于创建数据库和表的 SQL 脚本](https://stackoverflow.com/questions/5771047/create-sql-script-that-create-database-and-tables)

# r - 检查一个数据框列中的值是否存在于第二个数据框中

> ID：13774773
> 
> 赞同：45
> 
> 时间：2012-12-08T05:21:04.510
> 
> 标签：r, dataframe

我有两个数据框（A 和 B），都有一个“C”列。我想检查数据框 A 中“C”列中的值是否存在于数据框 B 中。

```
A = data.frame(C = c(1,2,3,4))
B = data.frame(C = c(1,3,4,7)) 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-08T05:26:07.033

使用`%in%`如下

```
A$C %in% B$C 
```

这将告诉您 A 的 C 列的哪些值在 B 中。

返回的是一个逻辑向量。在您的示例的特定情况下，您将获得：

```
A$C %in% B$C
# [1]  TRUE FALSE  TRUE  TRUE 
```

您可以将其用作行的`A`索引或用作`A$C`获取实际值的索引：

```
# as a row index
A[A$C %in% B$C,  ]  # note the comma to indicate we are indexing rows

# as an index to A$C
A$C[A$C %in% B$C]
[1] 1 3 4  # returns all values of A$C that are in B$C 
```

我们也可以否定它：

```
A$C[!A$C %in% B$C]
[1] 2   # returns all values of A$C that are NOT in B$C 
```

* * *

如果您想知道特定值是否在 B$C 中，请使用相同的函数：

```
 2 %in% B$C   # "is the value 2 in B$C ?"  
  # FALSE

  A$C[2] %in% B$C  # "is the 2nd element of A$C in B$C ?"  
  # FALSE 
```

# ip-address - 来自 getnameinfo() 的 IPv4 映射的 IPv6 地址中嵌入的范围 ID

> ID：13774775
> 
> 赞同：3
> 
> 时间：2012-12-08T05:21:23.567
> 
> 标签：ip-address, ipv6

最近在最近的一个 linux 发行版中发现了一个新行为，其中`getnameinfo(..,NI_NUMERICHOST)`在双栈套接字上返回一个 IPv4 映射的 IPv6 地址，带有一个范围标识符`::ffff:x.x.x.x%yyyyyyyyy`而不是`::ffff:x.x.x.x`

这种新行为导致现有应用程序出现一些问题，这些应用程序似乎使用字符串解析从 IPv4 映射的 IPv6 地址中提取 IPv4 地址。没有其他经过测试的操作系统可以做到这一点，包括稍早版本的 linux。

我理解的映射地址将被视为具有全局范围，因此不应具有范围 ID。此外，我不知道故意这样做有什么意义……IPv4中不存在范围ID。这是合法行为还是网络堆栈中的回归？

# svn - jailkit SVN 无法设置 LC_CTYPE 语言环境

> ID：13774777
> 
> 赞同：2
> 
> 时间：2012-12-08T05:21:40.367
> 
> 标签：svn, locale, jail

在这里将不胜感激。

我正在尝试在 Ubuntu 12.04 机器上设置根监狱，并且我正在使用 Jailkit 2.15。我已经使用[http://www.marthijnvandenheuvel.com/2010/03/10/how-to-create-a-chroot-ssh-user-in-ubuntu/](http://www.marthijnvandenheuvel.com/2010/03/10/how-to-create-a-chroot-ssh-user-in-ubuntu/)指南成功地做到了这一点。

但是，我也想允许用户使用 svn 命令。我已将以下内容添加到 /etc/jailkit/jk_i​​nit.ini

```
[svn]
comment = the subversion program
executables = /usr/bin/svn
includesections = netbasics

[dshell]
comment = dpicella shell addons
paths = /usr/lib/tcl8.4
libraries = /usr/lib/libexpect5.43.so, /lib64/libgcc_s.so.1
executables = /usr/bin/expect
includesections = netbasics, uidbasics 
```

但是每当我尝试在 root 帐户中使用 SVN 时，我总是会得到：

```
$ svn co svn+ssh://192.168.1.1/svn/repo/path
svn: warning: cannot set LC_CTYPE locale
svn: warning: environment variable LC_CTYPE is en_GB.UTF-8
svn: warning: please check that your locale name is correct
password:
svn: No repository found in 'svn+ssh://192.168.1.1/svn/repo/path/' 
```

如您所料，SVN repo 保存在同一台机器上，并且我检查了 svn checkout 命令是否适用于我通常的 bash 用户。我还仔细检查了 subversion 使用的 htpasswd 文件（/etc/subversion/passwd），其中包含用户名：string-pattern。所以这似乎也没问题。

调查语言环境问题，我不确定这里发生了什么或是否是问题，但常识表明第一个错误通常是原因。被监禁帐户中的 locale -a 给了我：

```
bash: locale: command not found 
```

在普通帐户中，我得到：

```
C
C.UTF-8
en_AG
en_AG.utf8
en_AU.utf8
en_BW.utf8
en_CA.utf8
en_DK.utf8
en_GB.utf8
en_HK.utf8
en_IE.utf8
en_IN
en_IN.utf8
en_NG
en_NG.utf8
en_NZ.utf8
en_PH.utf8
en_SG.utf8
en_US.utf8
en_ZA.utf8
en_ZM
en_ZM.utf8
en_ZW.utf8
POSIX 
```

我确实注意到在 jk_init.ini 中：

```
[basicshell]
comment = bash based shell with several basic utilities
paths = /bin/sh, bash, ls, cat, chmod, mkdir, cp, cpio, date, dd, echo, egrep, false, fgrep, grep, gunzip, gzip, ln, ls, mkdir, mktemp, more, mv, pwd, rm, rmdir, sed, sh, sleep, sync, tar, touch, true, uncompress, zcat, /etc/motd, /etc/issue, /etc/bash.bashrc, /etc/bashrc, /etc/profile, /usr/lib/locale/en_US.utf8
users = root
groups = root
includesections = uidbasics 
```

查看 /usr/lib/locale，我有：

```
$ ls /usr/lib/locale/
C.UTF-8  locale-archive 
```

这可能是问题，还是我这里有几个问题？

干杯

# java - 试图从 HashTable Java 中获取对象

> ID：13774781
> 
> 赞同：2
> 
> 时间：2012-12-08T05:22:16.353
> 
> 标签：java

第一部分是我从网上找到的一个示例，并对其进行了修改以快速尝试不同的解决方案。正如标题所述，我不知道如何拉出 WordHold 对象，以便在需要检索它时继续修改它。

```
import java.util.Collection;
import java.util.Enumeration;
import java.util.Hashtable;
import java.util.Set;

public class HashtableDemo {

    public static void main(String args[]) {
        WordHold temp = new WordHold("test1", "test2");
        WordHold temp2;
        // Creating Hashtable for example
        Hashtable companies = new Hashtable();

        // Java Hashtable example to put object into Hashtable
        // put(key, value) is used to insert object into map
        companies.put("Google", temp);
        companies.put("Nokia", "Finland"); 
        companies.put("Sony", "Japan");

        // Java Hashtable example to get Object from Hashtable
        // get(key) method is used to retrieve Objects from Hashtable
        temp2 = companies.get("Google");

        // Hashtable containsKey Example
        // Use containsKey(Object) method to check if an Object exits as key in
        // hashtable
        System.out.println("Does hashtable contains Google as key: "
            + companies.containsKey("Google"));

        // Hashtable containsValue Example
        // just like containsKey(), containsValue returns true if hashtable
        // contains specified object as value
        System.out.println("Does hashtable contains Japan as value: "
            + companies.containsValue("Japan"));

        // Hashtable enumeration Example
        // hashtabl.elements() return enumeration of all hashtable values
        Enumeration enumeration = companies.elements();

        while (enumeration.hasMoreElements()) {
            System.out
            .println("hashtable values: " + enumeration.nextElement());
        }

        // How to check if Hashtable is empty in Java
        // use isEmpty method of hashtable to check emptiness of hashtable in
        // Java
        System.out.println("Is companies hashtable empty: "
            + companies.isEmpty());

        // How to find size of Hashtable in Java
        // use hashtable.size() method to find size of hashtable in Java
        System.out.println("Size of hashtable in Java: " + companies.size());

        // How to get all values form hashtable in Java
        // you can use keySet() method to get a Set of all the keys of hashtable
        // in Java
        Set hashtableKeys = companies.keySet();

        // you can also get enumeration of all keys by using method keys()
        Enumeration hashtableKeysEnum = companies.keys();

        // How to get all keys from hashtable in Java
        // There are two ways to get all values form hashtalbe first by using
        // Enumeration and second getting values ad Collection

        Enumeration hashtableValuesEnum = companies.elements();

        Collection hashtableValues = companies.values();

        // Hashtable clear example
        // by using clear() we can reuse an existing hashtable, it clears all
        // mappings.
        companies.clear();
    }
} 
```

正在使用的子类。

```
public class WordHold
{
    // instance variables - replace the example below with your own
    private String wrongWord;
    private String correctWord;

    private WordHold next;

    public WordHold(String wordWrong, String wordCorrect)
    {
        wrongWord = wordWrong;
        correctWord = wordCorrect;
    }

    /**
     * Returns the wrong word
     * 
     * @return     The stored wrong word.
     */
    public String getWrongWord()
    {
        return wrongWord;
    }

    /**
     * Returns the correct word
     * 
     * @return     The stored wrong word.
     */
    public String getCorrectWord()
    {
        return correctWord;
    }

    /**
     * Returns the next element
     * 
     * @return     The next element in list.
     */
    public WordHold getNext()
    {
        return next;
    }

    /**
     * Sets next element in the list.
     */
    public WordHold setNext()
    {
        return next;
    }

    public String toString()
    {
        String temp = (wrongWord + " no " + correctWord);

        return temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:25:56.433

`WordHold t = (WordHold)companies.get("Google");`

将从 HashTable 公司检索它

`temp2 = companies.get("Google");`这一行不应该编译

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T05:26:15.863

我只浏览了您的代码，发现您没有在集合中使用**泛型。**我想，当您尝试将 WorldHold 对象从 Hashtable 中取出时，您必须将其强制转换为 WorldHold，就好像您不使用泛型一样，它会返回**java.Lang.Object**。

像这样声明你的哈希表：

```
Hashtable<WordHold> companies = new Hashtable<WordHold>(); 
```

将解决问题。

或者如果您不想使用泛型，则必须将返回的对象显式转换为 WordHold。

```
 temp2 = (WordHold)companies.get("Google"); 
```

如果您使用的是 **java 1.5+**，我强烈建议您使用**泛型**。因为它们为您的集合添加了编译时安全性。如果您不使用它们，您可以简单地将任何对象添加到您的集合中，并且您可以在从集合中检索对象时摆脱这种不需要的转换。

 **[**在 java 中阅读泛型**](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:30:25.947

希望这个例子对你有帮助

```
import java.util.*;

public class hashtable {

        public static void main(String[] args) {
                Hashtable hastab = new Hashtable();
                hastab.put("a", "andrews");
                hastab.put("b", "bob");
                hastab.put("c", "christina");
                hastab.put("d", "dude");
                hastab.put("e", "era");
                Set s = hastab.entrySet();
                Iterator it = s.iterator();

                while (it.hasNext()) {
                        System.out.println(it.next());
                }
        }
} 
```

如果你想从一个简单的类中提取 System.out.println(it.next().value().getWordWrong())

（为你的 wordwrong 类中的两个字符串创建一个 getter）**

# bash - 如何在 Makefile 操作中使用 shell 变量？

> ID：13774784
> 
> 赞同：45
> 
> 时间：2012-12-08T05:22:47.760
> 
> 标签：bash, makefile

我在 Makefile 中有以下内容，用于重新创建我的数据库，包括在必要时销毁它。这没用。

```
.PHONY: rebuilddb
    exists=$(psql postgres --tuples-only --no-align --command "SELECT 1 FROM pg_database WHERE datname='the_db'")
    if [ $(exists) -eq 1 ]; then
        dropdb the_db
    fi
    createdb -E UTF8 the_db 
```

运行它会导致错误：

```
$ make rebuilddb
exists=
if [  -eq 1 ]; then
/bin/sh: -c: line 1: syntax error: unexpected end of file
make: *** [rebuilddb_postgres] Error 2 
```

为什么这是错误的？据我所知，它看起来像是有效的 Bash？在 Makefile 中执行此操作时是否需要特别考虑？

**更新：**

使用答案，我得到了一个工作版本：

```
.PHONY: rebuilddb
    exists=$$(psql postgres --tuples-only --no-align --command "SELECT 1 FROM pg_database WHERE datname='the_db'"); \
    if [ "$$exists" == "1" ]; then \
        dropdb the_db; \
    fi;
    createdb -E UTF8 the_db 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-08T05:40:21.727

至少有两个考虑。 `$()`引用 Make 变量。您必须转义`$`to do 命令替换。此外，shell 命令必须全部在一行上。尝试：

```
exists=$$(psql postgres --tuples-only --no-align --command "SELECT 1 FROM \
    pg_database WHERE datname='the_db'"); \
    if [ "$$exists" -eq 1 ]; then \
        dropdb the_db; \
    fi; \
    createdb -E UTF8 the_db 
```

另一方面，似乎总是尝试删除数据库并允许失败会更简单：

```
rebuilddb:
    -dropdb the_db  # Leading - instructs make to not abort on error
    createdb -E UTF8 the_db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-13T08:50:07.827

# 为了完整起见 $(eval $(call ...)

在动态生成规则中，您必须使用 $$$$ 转义 shell 变量。

## 这是一个用“GNU Make 4.2.1”测试过的例子：

> MY_LIBS=abc
> 
> a_objs=a1.o a2.o
> b_objs=b1.o b2.o b3.o
> c_objs=c1.o c2.o c3.o c4.o
> 
> 默认值：库
> 
> # function lib_rule(name, objs)
> 
> 定义 lib_rule
> lib$(1).a: $(2)
> `退出 1 | 三通 make.log ; 测试**$$$$** {PIPESTATUS[0]} -eq 0
> endef`
> 
>  `# 生成规则
> $(foreach L,$(MY_LIBS),$(eval $(call lib_rule,$(L),$($(L)_objs))))
> 
> # 调用生成的规则
> 库：$(patsubst %,lib%.a,$(MY_LIBS))
> 
> # 虚拟对象生成
> %.o:%.c
> `touch $@`
> 
>  `# 虚拟源生成
> %.c:
> `touch $@`
> 
>  `clean::
> `rm -f *.c *.o lib*.a make.log````

 ```输出：'make -Rr'

> 1号出口 | 三通 make.log ; 测试**$** {PIPESTATUS[0]} -eq 0
> make: *** [Makefile:18: liba.a] 错误 1

管道中最后一个命令的结果从**tee为****真**。您可以从**出口 1**看到 bash 变量**PIPESTATUS[0]**的值为**false**

 ******观察数据库：'make -Rrp'

> 定义 lib_rule
> lib$(1).a: $(2)
> `退出 1 | 三通 make.log ; 测试**$$$$** {PIPESTATUS[0]} -eq 0
> endef`

 `...

> libc.a: c1.o c2.o c3.o c4.o
> `退出 1 | 三通 make.log ; 测试**$$** {PIPESTATUS[0]} -eq 0``******```

# php - 使用 php 的用户和管理员的不同访问级别

> ID：13774795
> 
> 赞同：0
> 
> 时间：2012-12-08T05:26:28.917
> 
> 标签：php, mysql

我想要做的是设置不同的登录页面，登录后，基于访问级别，我当然是在谈论 PHP 和 MySQL :)

我有一个带有用户表的数据库，用户表基本上有 3 个字段：

`user,pass,access`

我有 2 个基本访问级别：

`(1=user, 5=admin)`

我在网上找到了一些例子，甚至在这里，但由于某种原因，我无法使它工作。这是我得到的：

`login.php`

```
<form id="form" name="form" method="POST" action="login_engine.php">
<p>Please enter your login information:</p>
<label>User</label><input type="text" name="Username" id="Username" />
<label>Password</label><input type="password" name="Password" id="Password" />
<input name="submit" type="submit" id="submit" value="Login">
</form> 
```

这是引擎：

```
<?php
include "connect.php";

// username and password sent from form
$MyUsername = $_POST['Username'];
$MyPassword = $_POST['Password'];

$sql="SELECT * FROM tbl_users WHERE user=$MyUsername and pass=$MyPassword";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count===1){
  // Register $myusername, $mypassword and redirect to file "home.php"
  session_register("user");
  session_register("pass");
  while($row = mysql_fetch_array($result))
  {
    if($row['access']=='5')
    {
      header("home1.php");
    }
    else
    {
      header("home2.php");
    }
  }
} else {
  echo "Invalid! Please try again PC.";
  echo "<br>";
  echo $_POST['Username'];
  echo "<br>";
  echo $MyUsername;
  echo "<br>";
  echo $_POST['Password'];
  echo "<br>";
  echo $MyPassword;
  echo "<br>";
  echo $sql;
  echo "<br>";
  echo $result;
  echo "<br>";
  echo $count;
}

//mysql_close();
?> 
```

这是输出：

```
Invalid! Please try again PC.
userdemo
userdemo
mypassword
mypassword
SELECT * FROM tbl_users WHERE user=userdemo and pass=mypassword 
```

出现问题的第一个迹象是变量 $result 和 $count 没有打印在错误消息上（然后我显示了一些消息，但我更改了代码太多以至于我忘记了我做了什么然后停止显示信息，但我记得 $result 显示的是“... #4”，而 $count 显示的是“0”。）

我知道出了点问题，因为它到了 PHP 脚本的末尾：最后一个 else，但`$sql`似乎是正确的（我可能在这里错了）。

有人知道这里可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:29:07.740

### 将字符串括在引号内：

```
SELECT * FROM tbl_users WHERE user=userdemo and pass=mypassword 
```

### 将其替换为：

```
SELECT * FROM tbl_users WHERE user='userdemo' and pass='mypassword' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:29:12.940

单引号应该可以正常工作，但您也可以尝试：

```
<?php
include "connect.php";

if (!empty($_POST)) {
    // username and password sent from form
    $MyUsername = mysql_real_escape_string($_POST['Username']);
    $MyPassword = mysql_real_escape_string($_POST['Password']);

    $sql = "SELECT * FROM tbl_users WHERE user='" . $MyUsername . "' AND pass='" . $MyPassword . "'";
    $result = mysql_query($sql) or die(mysql_error());
    $count = mysql_num_rows($result);

    if ($count) {
        // Register $myusername, $mypassword and redirect to file "home.php"
        session_register("user");
        session_register("pass");
        while ($row = mysql_fetch_array($result)) {
            if ($row['access'] == '5') {
                header("home1.php");
            } else {
                header("home2.php");
            }
        }
    } else {
        echo "Invalid! Please try again PC.";
        echo "<br>";
        echo $_POST['Username'];
        echo "<br>";
        echo $MyUsername;
        echo "<br>";
        echo $_POST['Password'];
        echo "<br>";
        echo $MyPassword;
        echo "<br>";
        echo $sql;
        echo "<br>";
        echo $result;
        echo "<br>";
        echo $count;
    }
}
//mysql_close();
?> 
```

您还应该考虑将查询限制为 1 个结果，然后摆脱 while 循环。我还添加`mysql_real_escape_string()`了您的`$_POST`变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:55:23.007

您当前的代码应始终将行数返回为 0；这是因为 sql 语句中的所有字符串输入。代替

```
 $sql="SELECT * FROM tbl_users WHERE user=$MyUsername and pass=$MyPassword"; 

```

和

```
 $sql="SELECT * FROM tbl_users WHERE user='$MyUsername' and pass='$MyPassword'"; 

```

这解决了您当前的部分问题，除非**用户**或**传递**输入中包含撇号，在这种情况下，我们将回到原点。
使用

```
 $MyUsername = mysql_real_escape_string($MyUsername);
   $MyPassword = mysql_real_escape_string($MyPassword); 

```

在我的初始代码应该解决该问题之前。
这回答了您的问题并解决了您当前的问题。

## 更重要的是

**一是****mysql**已经[贬值](http://php.net/manual/en/function.mysql-real-escape-string.php)；_ 停止将它用于新项目，并将现有项目转换为[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/ref.pdo-mysql.php)。
**其次**，该代码非常不安全；由于 SQL 注入，您的数据可能会被擦除。使用第一点中建议的方法使其更安全。

希望这会有所帮助......在所有。

# javascript - 如何在 facebook 的返回数据中附加我自己的字符串？

> ID：13774797
> 
> 赞同：1
> 
> 时间：2012-12-08T05:26:29.727
> 
> 标签：javascript, facebook-apps

我曾尝试使用，

```
function sendRequestViaMultiFriendSelector(){
    FB.ui({method: 'apprequests',
      message: 'My Great Request'
    }, requestCallback);
  } 
```

用于创建邀请朋友请求，但它不会返回给我朋友的电子邮件，也不知道如何使用该可访问的通知链接附加我自己的字符串？

我无法收到电子邮件并更改为请求数据，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:49:01.403

响应包含某种字符串信息。使用 javascript，使用字符串连接很容易附加字符串。例如：

```
target_string = response_string + 'your_string'; 
```

PS：任何改进表示赞赏。

# java - 来自标准输入并存储为向量的输入，

> ID：13774801
> 
> 赞同：0
> 
> 时间：2012-12-08T05:27:23.803
> 
> 标签：java

```
Background info:
----------------------------------------------------------------
public class Point {

    protected int x;
    protected int y;

    public Point(){

        this.x = x;
        this.y = y;
    }

    public String toString(){

        return "" + x + " , " + y; 
    }
}
---------------------------------------------------------------
public class PointName extends Point {

    private String name;

    public PointName(String name, int x, int y){

        super();
        this.name = name;
    }

    public PointName() {
        // TODO Auto-generated constructor stub
    }

    public String toString(){

        return name + super.toString();

    }

}
------------------------------------------------------------------------ 
```

我想创建一个名为最近点的应用程序，并且在此类中，数据是从标准输入（键盘）提供的。然后我想提供 10 个点（给定点的名称），这些点将存储在一个向量中。然后将它们打印出来。在此之后还有一点，但我陷入了这个阶段，因为我不知道该怎么做。我欢迎所有可能的解决方案！！

**到目前为止我的解决方案：**

```
public class ClosestPoint {

    public static void main (String[] args){

        Scanner in = new Scanner(System.in);
        System.out.println("Write in the new point starting with name then x, y");

        String name = "";
        Integer x = 0;
        Integer y = 0;

        String nameGivenPoints[] = null; // List of points to create
        String line = in.nextLine(); // info from the board

        while(!line.endsWith("")){
        nameGivenPoints = line.split("\r\n\r");

        name = nameGivenPoints[0];
        x = Integer.parseInt(nameGivenPoints[1]);
        y = Integer.parseInt(nameGivenPoints[2]);

// Maybe a forloop here
        PointName tenDifferentPunkts = new PointName(name, x, y);
        System.out.println(tenDifferentPunkts.toString());
         line = in.nextLine();

                }   
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:06:27.280

试试这个：

点名.java：

```
public class PointName extends java.awt.Point
{

    private String name;

    public PointName(String name, int x, int y)
    {
        super(x,y);
        this.name = name;
    }

    public String toString()
    {
        return this.name + " : " + super.toString(); 
    }
} 
```

ClosestPoint.java：

```
import java.util.Scanner;
import java.util.List;
import java.util.ArrayList;

public class ClosestPoint
{
    public static void main (String[] args)
    {

        Scanner in = new Scanner(System.in);
        String line;
        boolean done=false;
        String error=null;
        List<PointName> points=new ArrayList<PointName>();

        do
        {
            System.out.println("Enter a new point in this format: name:x,y");
            line=in.nextLine();
            done=line.equals("");
            if(!done) //Empty line terminates the loop
            {
                String [] parts=line.split(":");
                if(parts.length==2)
                {
                    String name=parts[0];
                    parts=parts[1].split(",");
                    if(parts.length==2)
                    {
                        try
                        {
                            PointName pn=new PointName(name,Integer.parseInt(parts[0]),Integer.parseInt(parts[1]));
                            points.add(pn);
                        }
                        catch(NumberFormatException ex)
                        {
                            error=ex.getMessage();
                        }
                    }else error="Invalid format";
                }else error="Invalid format";
            }
            if(!done) done=error!=null; //If there was an error exit the loop
        }while(!done); //Keep going until something sets the done flag
        if(error!=null)
        {
            System.out.println("Error: "+error);
        }
        else
        {
            //The points are all stored in the points List object now - this just iterates through and prints them out
            System.out.println("Here are the points you entered:");
            for(PointName pn : points)
            {
                System.out.println(pn.toString());
            }
        }
    } 
} 
```

# java - notify() 而不是 notifyAll() 用于阻塞队列

> ID：13774802
> 
> 赞同：2
> 
> 时间：2012-12-08T05:27:28.357
> 
> 标签：java, multithreading, data-structures, queue, blockingqueue

我试图找出是否有可能有一个多生产者/多消费者队列，我可以在其中使用`notify()`而不是`notifyAll()`. 例如，在下面的实现中（来源：[here](http://tutorials.jenkov.com/java-concurrency/blocking-queues.html)）你不能简单地切换`notifyAll()`for `notify()`。为什么你不能切换并不完全清楚，所以我将把它作为一个预告片留给任何想帮助我理解这个问题的人。

所以下面的代码被破坏了：

```
public class BlockingQueue {

  private Object lock = new Object();

  private List queue = new LinkedList();
  private int  limit = 10;

  public BlockingQueue(int limit){
    this.limit = limit;
  }

  public void enqueue(Object item)
  throws InterruptedException  {
   synchronized(lock) {
    while(this.queue.size() == this.limit) {
      lock.wait();
    }
    if(this.queue.size() == 0) {
      lock.notify();
    }
    this.queue.add(item);
   }
  }

  public Object dequeue()
  throws InterruptedException{
   synchronized(lock) {
    while(this.queue.size() == 0){
      lock.wait();
    }
    if(this.queue.size() == this.limit){
      lock.notify();
    }

    return this.queue.remove(0);
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T08:47:19.990

以下步骤导致我们陷入僵局。让我们将**limit 设置为 1**以保持示例简短。

*   E1 将项目排入队列。
*   E2 尝试入队 - 检查等待循环 - 已满 - 等待
*   E3 尝试入队 - 检查等待循环 - 已满 - 等待

*   D1 尝试出队 - 并且正在执行同步块

*   D2 尝试出队 - 进入（同步）块时的块 - 由于 D1
*   D3 尝试出队 - 进入（同步）块时的块 - 由于 D1

*   D1 正在执行入队 - 获取项目，调用通知，退出方法

*   通知恰好唤醒了 E2（即“任何等待线程”）
*   但是，D2 在 E2 之前进入同步块（E2 必须重新获得锁），因此 E2 在进入队列同步块时阻塞
*   D2 检查等待循环，队列中没有更多项目，所以等待
*   D3 在 D2 之后，但在 E2 之前进入块，检查等待循环，队列中没有更多项目，所以等待

*   现在有 E3、D2 和 D3 等待！

*   最后E2获取锁，入队，调用notify，exit方法

*   E2 的通知唤醒 E3（记住任何线程都可以被唤醒）

*   E3 检查等待循环条件，队列中已经有一个项目，所以等待。
*   没有更多的线程调用通知和三个线程永久暂停！

**解决方案：用 notifyAll 替换 notify**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:51:56.873

无论您的设计如何，都要知道`notify()`唤醒当前等待锁定对象的随机线程，并`notifyAll()`唤醒*所有*此类线程（以随机顺序）。

只要你的等待线程被编码来处理你给它们的唤醒类型，就不会有问题。

一个并不比另一个更好：在某些情况下`notify()`是最好的选择，在其他情况下`notifyAll()`- 这取决于正在解决的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:21:39.737

移出`notify`两种方法中的条件语句（不再需要条件），一切都应该正常工作。

而且，在原始来源中，方法是同步的。你为什么把这个改成`synchronized(lock)`? 只是忘记更改`wait`为`lock.wait()`？

# c - 有什么方法可以在 GCC 二进制文字中进行分组？

> ID：13774807
> 
> 赞同：2
> 
> 时间：2012-12-08T05:28:38.653
> 
> 标签：c, gcc

我使用了一些寄存器，以及将所有内容都转换为位索引的数据表。幸运的是，我正在使用 gcc，它具有二进制文字扩展语法，因此我可以执行以下操作

```
register |= 0b01000010; 
```

另一种选择当然是只使用十六进制格式

```
register |= 0x42; 
```

尽管随着时间的推移使用了十六进制，但我仍然发现二进制格式更适合这种位碰撞。我仍然将 4 和 2 半字节分解为它们的 0100 和 0010 模式。所以我认为二进制格式的可视化效果更好。二进制格式的*问题*在于，很难找到边界。使用十六进制格式，半字节可以很好地分开，因此您有时可以更安全地“索引”位。IOW，在顶部，我不得不担心我没有添加或省略额外的 0 并最终以 7 位而不是 6 位结束。

我很好奇其他人是否已经开发出一种技术/技巧来吃蛋糕并吃掉它。当您必须在 C 中对相邻的常量进行字符串处理时

```
"Hello " "World" 
```

编译器足够聪明，可以将它们混合成一个文字。如果有办法对这些二进制数做类似的事情，那就太好了，例如

```
0b0100 0010 
```

我可以用宏做一些奇怪的事情，也许

```
#define _(a, b) (((a) << 4) | (b)) 
```

然后能够做到

```
_(0b0100,0b0010) 
```

但老实说，情况更糟，而且仅限于一小口。好奇是否有人想出了一些聪明又漂亮的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:42:51.780

在 C 中，您只能以十进制、八进制和十六进制指定整数常量。或组合移位常数组（根据您问题下方的 H2CO3 评论）。如果它对您来说足够重要，您可以将您的内容指定为带​​引号的字符串常量并调用一个函数（您自己编写的）来转换它并返回它的整数值。任何你想指定这样一个常量的地方，只需在它的位置调用你的函数`int i = b("0100 1101 0011 1100");` ......或者使用 C++......见[二进制文字？](https://stackoverflow.com/questions/537303/binary-literals)[我可以在 C 或 C++ 中使用二进制文字吗](https://stackoverflow.com/questions/2611764/can-i-use-a-binary-literal-in-c-or-c)？

如果您编写自己的字符串常量转换器，您可以让它忽略非 [0,1] 数字，因此您可以根据您指定的内容以任何方式对位进行分组。

# c++ - 尝试使用 MinGW 构建 websocket++：最后几个链接器错误——它可能是什么？

> ID：13774814
> 
> 赞同：0
> 
> 时间：2012-12-08T05:29:29.813
> 
> 标签：c++, boost, compilation, linker, mingw

正在尝试为 Windows 构建[websocket++](https://github.com/zaphoyd/websocketpp)。

```
g++ -Wall -O2  -I/c/boost/boost_1_52_0//boost chat_server.o chat.o -o chat_server -L/c/boost/boost_1_52_0//stage/lib ../../libwebsocketpp.a /c/boost/boost_1_52_0//stage/lib/libboost_system-mgw46-mt-1_52.a c/boost/boost_1_52_0//stage/lib/libboost_date_time-mgw46-mt-1_52.a c/boost/boost_1_52_0//stage/lib/libboost_program_options-mgw46-mt-1_52.a c/boost/boost_1_52_0//stage/lib/libboost_thread-mgw46-mt-1_52.a /c/boost/boost_1_52_0//stage/lib/libboost_regex-mgw46-mt-1_52.a -lpthread -lws2_32 -lmswsock
chat_server.o:chat_server.cpp:(.text$_ZN5boost6detail17sp_counted_impl_pINS_6threadEE7disposeEv[boost::detail::sp_counted_impl_p<boost::thread>::dispose()]+0x14): undefined reference to `_imp___ZN5boost6threadD1Ev'
chat_server.o:chat_server.cpp:(.text$_ZN5boost14checked_deleteINS_6threadEEEvPT_[void boost::checked_delete<boost::thread>(boost::thread*)]+0x11): undefined reference to `_imp___ZN5boost6threadD1Ev'
chat_server.o:chat_server.cpp:(.text$_ZN11websocketpp4role6serverINS_8endpointIS1_NS_6socket5plainENS_3log6loggerEEEE12start_listenERKN5boost4asio2ip14basic_endpointINSB_3tcpEEEj[websocketpp::role::server<websocketpp::endpoint<websocketpp::role::server, websocketpp::socket::plain, websocketpp::log::logger> >::start_listen(boost::asio::ip::basic_endpoint<boost::asio::ip::tcp> const&, unsigned int)]+0x307): undefined reference to `_imp___ZN5boost6thread12start_threadEv'
collect2: ld returned 1 exit status
make: *** [chat_server] Error 1 
```

不要介意路径中的双斜杠，这是因为我草率地编辑 makefile。

我还必须使用 MinGW 编译 boost 1.52。

链接器似乎无法找到`boost::thread`and `boost::thread::start_thread`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:25:36.383

看起来 boost 想要链接到库的 DLL 版本`boost::thread`。请参阅[http://www.boost.org/doc/libs/1_52_0/doc/html/thread/build.html](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/build.html)了解有关如何将 boost 配置为使用静态或动态库的相当复杂的文档`boost::thread`。

您应该能够通过链接到库的 DLL 版本而不是静态版本来解决您的问题。您还可以通过定义`BOOST_THREAD_USE_LIB`何时编译以配置静态线程库的使用来解决您的问题。但是，我不确定 MinGW 编译器是否支持静态库在线程退出时正确清理所依赖的自动 tss 清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:55:48.757

因此，我能够使用 Lavavej 先生的 MinGW 包（开箱即用的 boost）编译 websocket++ 项目。我相信我也可以从香草 MinGW 中获得它，通过更有条理地处理提升......原来`g++`我最初使用的来自草莓 perl 目录。

# php - 在查询结果中将不同的数组合并为一个数组

> ID：13774820
> 
> 赞同：3
> 
> 时间：2012-12-08T05:30:24.890
> 
> 标签：php, arrays, multidimensional-array

我是 PHP 和 CodeIgniter 的新手。所以我有一个这样的**数据库查询结果**：

```
Result = array(

A = array(
        [a]=>'1',
        [b] =>'2',
     );

B = array(
        [a] =>'1',
        [b] =>'3',
     );

C = array(
        [a] =>'1',
        [b] =>'4',
     );

**and more...**

); 
```

那么如何将它们合并到一个数组中，如下所示：

```
Result = array(

     Z = array(

        [a] =>'1',
        [b] => array(

               [0] =>'2',
               [1] =>'3',
               [2] =>'4',
        );

     ); 
```

非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:36:16.287

```
$A = array( 'a' => '1', 'b' => '2', 'c' => '3');
$B = array( 'a' => '1', 'b' => '3', 'd' => '4');
$C = array( 'a' => '1', 'b' => '4', 'c' => '5');

$Result = array($A, $B, $C);
$Z = array();
foreach ($Result as $set) {
    foreach ($set as $key => $val) {
        if (isset($Z[$key])) {
            if (is_array($Z[$key])) {
                $Z[$key][] = $val;
            } elseif ($Z[$key] != $val) {
                $Z[$key] = array($Z[$key], $val);
            }
        } else {
            $Z[$key] = $val;
        }
    }
}

print_r($Z); 
```

**输出**

```
Array
(
    [a] => 1
    [b] => Array
        (
            [0] => 2
            [1] => 3
            [2] => 4
        )

    [c] => Array
        (
            [0] => 3
            [1] => 5
        )

    [d] => 4
) 
```

如果您想要每个键的唯一值，例如，如果您想避免`a`equaling `array(1, 1, 2)`，那么您可以这样做：

```
$Z = array();
foreach ($Result as $set) {
    foreach ($set as $key => $val) {
        if (!isset($Z[$key])) {
            $Z[$key] = array();
        }
        $Z[$key][] = $val;
    }
}

foreach($Z as $k => $v) {
    $newv = array_unique($v);
    if (count($newv) == 1) {
        $Z[$k] = $newv[0];
    } else {
        $Z[$k] = $newv;
    }
}

print_r($Z); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T07:15:18.783

我自己会去的：

```
 $result = array_merge_recursive($a, $b, $c);
    foreach($result as $k => $v) $result[$k] = array_unique($v);
    print_r($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:57:59.930

尝试

```
 $final_array = array();
foreach ($Result as $key=>$value){
  foreach ($value as $inner_key=>$inner_value){
     $final_array[] = $inner_value; //this adds all the values into a single array 
  }
}

$final_array = array_unique($final_array); // this removes all duplicates 

```

## 编辑

```
 $final_array = array();
foreach ($Result as $key=>$value){
  foreach ($value as $inner_key=>$inner_value){
     $final_array[$inner_key] = $inner_value; //this adds all the values into a single array; duplicate keys will simply replace one another during the iteration 
  }
}

//$final_array = array_unique($final_array); // this part is no longer required 

```

希望这可以帮助。

# scala - 如何在一个子项目上声明该命令取决于 sbt 中另一个子项目中的命令？

> ID：13774822
> 
> 赞同：2
> 
> 时间：2012-12-08T05:30:28.663
> 
> 标签：scala, sbt

我有一个`.scala`构建定义设置如下：

```
object build extends Build {
  lazy val root = Project("main", file(".")) aggregate(benchmark)
  lazy val benchmark = Project("benchmark", file("benchmark"))
} 
```

在运行任务之前，我需要`re-start`在`main`项目上运行`run`任务`benchmark`（所以我需要确保`benchmark/run`触发器`main/re-start`）。有没有办法指定这种依赖关系？

编辑：似乎我找到了解决方案，所以我会将它添加到这个问题中，以防有人遇到同样的问题。这个想法是创建一个自定义版本的 reStart 任务，使它成为一个任务而不是 InputTask，因为我们不需要解析参数。完整的 build.scala 如下：

```
import sbt._
import Keys._
import cc.spray.revolver.RevolverPlugin.Revolver._
import cc.spray.revolver.Actions._
import cc.spray.revolver.AppProcess

object build extends Build {
  val noArgs = TaskKey[ExtraCmdLineOptions]("no-args")
  val noArgsTask = TaskKey[ExtraCmdLineOptions]("no-args") := { ExtraCmdLineOptions(Nil, Nil) }
  val reStartCustom = TaskKey[AppProcess]("re-start-custom")

  val reStartTask = reStartCustom <<= (streams, state, reForkOptions, mainClass in reStart, fullClasspath in Runtime, reStartArgs, noArgs in root)
    .map(restartApp)
    .updateState(registerAppProcess)
    .dependsOn(products in Compile)

  lazy val root: Project = Project("main", file("."), settings = Defaults.defaultSettings ++ Seq(noArgsTask, reStartTask)) aggregate(benchmark)
  lazy val benchmark: Project = Project("benchmark", file("benchmark"), settings = Defaults.defaultSettings ++ Seq(
    run in Compile <<= (reStartCustom in root, run in Compile in benchmark) {
      case (mainRestart, benchmarkRun) =>
        benchmarkRun.mapTask { runTask => mainRestart.flatMap(_ => runTask) }
    }
  ))
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:27:58.230

可能有更好的方法来做到这一点，但这是我的看法：

```
import sbt._
import Keys._

object MyKeys {
  val restart = TaskKey[Unit]("re-start")
}

object build extends Build {
  import MyKeys._
  lazy val root: Project = Project("main",
    file("."),
    settings = Defaults.defaultSettings ++ Seq(
      restart := { println("***RESTART***") }
    )
  ) aggregate(benchmark)
  lazy val benchmark: Project = Project(
    "benchmark",
    file("benchmark"),
    settings = Defaults.defaultSettings ++ Seq(
      run  in Compile <<= (restart in root, run in Compile in benchmark){
        case (mainRestart, benchmarkRun) =>
          benchmarkRun.mapTask{ runTask => mainRestart.flatMap{ _ => runTask }
        }
      }
    )
  )
} 
```

使用此设置，`sbt "project benchmark" run`将首先在项目上运行`restart`任务`main`，然后`run`在项目上实际调用标准命令`benchmark`。

请注意，为了说明，我添加了一个`restart` TaskKey（和一个虚拟实现`main`）。

正如您所看到的，对于这样一个简单的要求，这看起来有点复杂，但我的（有限的）经验是，使用`InputTask`s/ `InputKey`s（`run`作为一个）总是比它应该的要复杂得多（与普通`Task`的 s相比） / `TaskKey`s 更容易处理）。

# hashtable - 在哈希表中，键是否与其对应的值一起存储？

> ID：13774823
> 
> 赞同：0
> 
> 时间：2012-12-08T05:31:03.653
> 
> 标签：hashtable

例如，我正在编写一个哈希表，其中名称作为键，电话号码作为数据。它应该是名称与数字组合的表（即结构表）还是仅包含数字的表？因为如果您正在查找某人的电话号码，您已经知道他们的姓名，所以我看不出将姓名与号码一起存储的意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:23:18.363

对于您面临的一些问题，有一些一般性建议：

*   如果您想根据某个键快速查找数据，例如在字典或 **电话簿中，请使用 map**。
*   如果值是唯一的，定义了运算符 <，并且您想要快速查找，请使用集合。
*   如果您反复想要最大值，请使用 priority_queue。
*   如果您想快速添加值但不需要经常访问它们，请使用列表。
*   如果要快速访问特定位置的值，请​​使用向量。

回到您的问题，HashTable 是具有恒定时间访问的表实现。像地图一样，您可以将键值对关联存储在哈希表中。但是，哈希表不按排序顺序存储数据。哈希表是用顶层的数组实现的。每个键通过哈希函数映射到数组中的一个槽。但有时将容器组合起来以获得每个容器的最佳优势很有用。就像你的电话簿一样。

例如，假设我们要查找基于多个键类型的记录。

```
John-Romero 
5673-67854

Alice-Nice
3452-878 
```

我们希望能够通过输入他们的姓名或电话号码来查找记录。所以我们希望每条记录有 2 个搜索键。（我们假设所有键都是唯一的。）但是映射只允许我们每条记录只有一个键，一种解决方案是创建记录的主列表。对于每种键类型，创建一个映射，其中包含指向电话簿中记录的迭代器。

为了使记录插入 O(1)，列表对电话簿来说是很好的。

> 想象一个有 50,000 个姓名/号码配对的电话簿。每个数字都是一个 10 位数字。我们需要创建一个数据结构来查找与特定电话号码匹配的姓名。理想情况下，名称查找应该是 O(1) 的预期时间，并且呼叫者 ID 系统应该使用 O(n) 内存（n = 50,000）。

```
list<Record> phone_book; 
```

为了进行 O(1) 的查找，映射最适合键。

```
map<string, list<Record>::iterator> names;
map<int, list<Record>::iterator> phones; 
```

我们可以通过取消引用迭代器来打印记录：

```
cout << *names["John-Romero"]; 
```

这是一个带有单个键的 Java 示例程序

```
import java.util.*;
public class PhoneBook {

    /**
     * @param args the command line arguments.
     */
    public static void main(String[] args) {
        /* instantiate a Hashtable Object*/
        Hashtable dict = new Hashtable();
        /* it is just an iterator */
        Enumeration iterator;
        /* the temporary key value*/
        String tempKey;
        /* here we put some key and value */
        dict.put("Zahurul Islam",new Long(898989));
        dict.put("Naushad Uzzaman", new Long(676767));
        dict.put("Asif Iqbal", new Long(565656));
        dict.put("Mr.Pavel", new Long(232323));
        dict.put("Marzy Rahman",new Long(343434));
        dict.put("Mehedi Al mamun",new Long(234324));

        /* here we traverse the dict */
        iterator = dict.keys();
        while (iterator.hasMoreElements()) {
            Object key = iterator.nextElement();
            System.out.println("Name: "+ key +" Phone Number: "+ dict.get(key));
        }

        /* this is temporay key, if this is exist we just change the value
         * other wise we put the pair(key,value)  */
        tempKey = "Zahurul Islam";
        if(!dict.containsKey(tempKey)) {
            System.out.println("No such Name in this phone Book");
        } else {
            Long phoneNumber = (Long) dict.get(tempKey);
            long phNum = phoneNumber.longValue();
            System.out.println(phNum+ " This Phone Number of "+ tempKey + " is changed ");
            dict.put(tempKey, new Long(121212));
        }

        System.out.println("\nUpdated Phone book\n");
        iterator = dict.keys();
        while (iterator.hasMoreElements()) {
            Object key = iterator.nextElement();
            System.out.println("Name: "+ key +" Phone Number: "+ dict.get(key));
        }

    }

} 
```

这是其他带有 2 键的

```
import java.io.*;
import java.lang.reflect.Array;
import static java.lang.System.out;
import java.util.*;

/************************************************************************************
 * This class provides hash maps that use the hashing with separate chaining algorithm.
 * A hash table is created that is an array of buckets.  It restricts the number of
 * slots per bucket to one (just one key-value pair), but could easily be extended
 * to support multiple key-value pairs per bucket.
 */
public class HashSC <K, V>
       extends AbstractMap <K, V>
       implements Serializable, Cloneable, Map <K, V>
{
    /********************************************************************************
     * This inner class defines buckets that are stored in the hash table.
     */
    private class Bucket
    {
        K      key;       // alt. use K [] instead of K
        V      value;     // alt. use V [] instead of V
        Bucket next;
        Bucket (K k, V v, Bucket n) { key = k; value = v; next = n; }
    } // Bucket inner class

    /** The array of buckets making up the hash table.
     */
    private final Bucket [] hTable;

    /** The size of the hash table (number of home buckets)
     */
    private final int size;

    /** Counter for the number buckets accessed (for performance testing)
     */
    private int count = 0;

    /********************************************************************************
     * Construct a hash table that uses separate chaining.
     * @param cap  the capacity of the hash table
     */
    @SuppressWarnings("unchecked")
    public HashSC (int cap)
    {
        hTable = (Bucket []) Array.newInstance (Bucket.class, size = cap);
    } // HashSC

    /********************************************************************************
     * Return a set view of map containing all the entries as pairs of keys and values.
     * @return  the set view of the map
     */
    public Set <Map.Entry <K, V>> entrySet ()
    {
        Set <Map.Entry <K, V>> enSet = new HashSet <> ();
        for (int i = 0; i < size; i++) {
            for (Bucket b = hTable [i]; b != null; b = b.next) {
                enSet.add (new AbstractMap.SimpleEntry <K, V> (b.key, b.value));
            } // for
        } // for

        return enSet;
    } // entrySet

    /********************************************************************************
     * Given the key, look up the value in the hash table.
     * @param key  the key used for look up
     * @return  the value associated with the key
     */
    public V get (Object key)
    {
        int i = h (key);
        for (Bucket b = hTable [i]; b != null; b = b.next) {
            count++;
            if (b.key.equals (key)) return b.value;
        } // for
        return null;
    } // get

    /********************************************************************************
     * Put the key-value pair in the hash table.
     * @param key    the key to insert
     * @param value  the value to insert
     * @return  null (not the previous value)
     */
    public V put (K key, V value)
    {
        int i = h (key);
        hTable [i] = new Bucket (key, value, hTable [i]);
        return null;
    } // put

    /********************************************************************************
     * Return the size (number of home buckets) in the hash table. 
     * @return  the size of the hash table
     */
    public int size ()
    {
        return size;
    } // size

    /********************************************************************************
     * Print the hash table.
     */
    private void print ()
    {
        out.println ("Hash Table (hashing with separate chaining)");
        out.println ("-------------------------------------------");
        for (int i = 0; i < size; i++) {
            out.print (i + ":\t");
            boolean notFirst = false;
            for (Bucket b = hTable [i]; b != null; b = b.next) {
                if (notFirst) out.print ("--> ");
                out.print ("[ " + b.key + " ]\t");
                notFirst = true;
            } // for
            out.println ();
        } // for
        out.println ("-------------------------------------------");
    } // print

    /********************************************************************************
     * Hash the key using the hash function.
     * @param key  the key to hash
     * @return  the location of the bucket chain containing the key-value pair
     */
    private int h (Object key)
    {
        return key.hashCode () % size;
    } // h

    /********************************************************************************
     * The main method used for testing.
     * @param  the command-line arguments (args [0] gives number of keys to insert)
     */
    public static void main (String [] args)
    {
        HashSC <Integer, Integer> ht_i = new HashSC <> (11);
        HashSC <String, Integer>  ht_s = new HashSC <> (11);
        int nKeys = 30;
        if (args.length == 1) nKeys = Integer.valueOf (args [0]);
        for (int i = 1; i < nKeys; i += 2) {
            ht_i.put (i, i * i);
            ht_s.put ("s" + i, i * i);
        } // for
        ht_i.print ();
        ht_s.print ();
        for (int i = 0; i < nKeys; i++) {
            out.println ("key = " + i + "  value = " + ht_i.get (i));
            out.println ("key = s" + i + " value = " + ht_s.get ("s" + i));
        } // for
        out.println ("-------------------------------------------");
        out.println ("Average number of buckets accessed = " + ht_i.count / (double) nKeys);
        out.println ("Average number of buckets accessed = " + ht_s.count / (double) nKeys);
    } // main

} // HashSC class 
```

我认为您可以比较两种解决方案的效率（最后一个代码需要修改为电话簿），以便您决定哪个更适合您的需求。

# c# - Asp.Net MVC4 - 局部视图中的表单

> ID：13774824
> 
> 赞同：3
> 
> 时间：2012-12-08T05:31:07.273
> 
> 标签：c#, razor, asp.net-mvc-4, partial-views, unobtrusive-validation

我有以下数据模型

```
public class User
{
        [Required(ErrorMessage = "First name required!")]
        public string FirstName { get; set; }

        [Required(ErrorMessage = "Last name required!")]
        public string LastName { get; set; }
} 
```

我有以下名为“UserForm”的视图，它使用上述模型

```
@model User
@using (Html.BeginForm("myAction", "MyController"))
{
@Html.TextBoxFor(model => model.FirstName)
@Html.TextBoxFor(model => model.LastName)
@Html.ValidationSummary()
<input type="submit" value="Save" />
} 
```

我已经测试了上面的代码并且不显眼的验证和表单帖子可以正常工作并且没有任何问题。但是，如果我将上述视图作为部分视图包含在如下所示的第二个视图中，则客户端不显眼的验证将停止工作。

```
<div id="myPartialView">
<!-- Include form as partial view -->
@{Html.RenderAction("myAction", "MyController");}
</div> 
```

我尝试使用以下 javascript 行显式重新加载不显眼的验证

```
jQuery.validator.unobtrusive.parse('#myPartialView'); 
```

现在验证正在运行，但我无法提交表单。我使用了提琴手，我可以看到点击提交按钮不会触发任何活动。关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:20:14.227

对于任何偶然发现这个问题的人，我现在已经解决了这个问题。我的表单嵌入在 Jquery Modal 框中，并且我的 html 标记无效。这并没有导致模式停止工作，而是阻止了我的表单提交。（我仍然不确定为什么）。我使用 w3c 的优秀 html 验证器发现了这个错误

[http://validator.w3.org](http://validator.w3.org)

需要注意的是我还需要

```
jQuery.validator.unobtrusive.parse('#myPartialView'); 
```

让客户端验证适用于动态内容。这是一个众所周知的问题，在上面@Mate 发布的链接中进行了更详细的讨论

# c# - 更换声卡并播放 MP3

> ID：13774825
> 
> 赞同：1
> 
> 时间：2012-12-08T05:31:56.150
> 
> 标签：c#, c++, winapi, vb6, mci

我想在默认声卡以外的声卡上播放 MP3（例如，我插入了 USB 耳机）。

如果我想在不同的声卡上播放 WAV 文件，我的代码可以正常工作。但是对于 MP3，它就失败了。我正在尝试用 C# 编写代码，但为了在应用程序和 WinAPI 之间没有任何内容（例如互操作），我将其翻译为 VB6。具体来说，失败的是更改声卡的调用 - mciSendCommand - 并且失败并出现错误 274 - `The MCI device you are using does not support the specified command`。MCI 类型操作的顺序通常是这样的：打开文件，执行操作（例如更换声卡等），然后播放。

```
Dim cmd as String
Dim rc as Long
Dim lngDeviceID As Long
Dim parms As MCI_WAVE_SET_PARMS

cmd = "Open test.mp3 type mpegvideo alias Mp3File"
rc = mciSendString(CommandString, vbNullString, 0, 0&)  ' Open works

lngDeviceID = mciGetDeviceID("Mp3File")
parms.wOutput = 1 ' tell it to playback on the 2nd card 

rc = mciSendCommand(lngDeviceID, MCI_SET, MCI_WAVE_OUTPUT, parms) ' FAILS with 274
If (rc <> MMSYSERR_NOERROR) Then
    ' The command failed.
    MsgBox "Change card: " & GetMCIErrorString(rc)
End If 
```

有趣的是，如果我想播放一个 WAV 文件，我必须用它`waveaudio`而不是`mpegvideo`（像这样`cmd = "Open test.mp3 type waveaudio alias WAVFile"`）打开它，一切正常。但是，无论我尝试什么，如果我尝试打开 MP3 文件，它都不会起作用。

我错过了什么？追溯到 2000 年，我已经看到了十几个没有答案的问题——必须有一种方法可以在不同的声卡上播放 MP3 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:01:55.717

你试过改变吗

`cmd = "Open test.mp3 type mpegvideo alias Mp3File"`

至

`cmd = "Open test.mp3 type mpegvideo alias MediaFile"`?

看看这篇关于 CodeProject 的文章，它使用 .NET 和 Winmm.dll 来播放 MP3 文件：

[“MP3 助手类 - http://www.codeproject.com/Articles/95000/MP3-Helper-Class”](http://www.codeproject.com/Articles/95000/MP3-Helper-Class)

# objective-c - UIImageView 即使在设置内容模式后也会拉伸

> ID：13774832
> 
> 赞同：1
> 
> 时间：2012-12-08T05:32:45.540
> 
> 标签：objective-c, ios, uiimageview

我有一个简单的项目，我有一个需要放入视图控制器然后添加到主视图的图像。代码工作正常，但即使设置了内容模式`UIViewContentModeScaleAspectFit` ，我也没有看到正确缩放的图像。它看起来被拉伸和剪裁。我在这里做错了什么？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIViewController *controller = [[UIViewController alloc] init];
    UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"a.jpg"]];
    imgView.contentMode = UIViewContentModeScaleAspectFit;
    [controller.view addSubview:imgView];
    [self.view addSubview:controller.view];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:47:58.137

通过使用故事板创建视图，通过 IBOutlets 链接它然后加载图像来解决问题。无论出于何种原因，以上述方式分配图像视图并不会在设置后更改其属性。

# objective-c - 如何在 Objective-C 中将字符串转换为整数？

> ID：13774833
> 
> 赞同：0
> 
> 时间：2012-12-08T05:32:53.870
> 
> 标签：objective-c

> **可能重复：**
> [如何在 Objective-C 中进行字符串转换？](https://stackoverflow.com/questions/169925/how-to-do-string-conversions-in-objective-c)

如何在 Objective-C 中将字符串转换为整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T05:35:29.877

```
int value = [string intValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:14:37.187

```
NSInteger value=[string integerValue]; 
```

# android - Android AVD 管理器未启动

> ID：13774836
> 
> 赞同：1
> 
> 时间：2012-12-08T05:34:17.747
> 
> 标签：android, android-emulator

我最近安装`ADT`并`AVD Manager`通过 eclipse 插件更新。安装后我重新启动了 eclipse-Juno。但是，当我尝试启动“AVD 管理器”来创建虚拟设备时，工作区选项卡中会引发以下异常。任何人都可以建议解决方法

> java.lang.NullPointerException at com.android.sdklib.internal.avd.AvdInfo.getDeviceName(AvdInfo.java:158) at com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.fillDevices(DeviceManagerPage.java:497) at com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.fillTable(DeviceManagerPage.java:357) 在 com.android.sdkuilib.internal.repository.ui.DeviceManagerPage.createContents(DeviceManagerPage.java:259) 在 com.android。 sdkuilib.internal.repository.ui.DeviceManagerPage.(DeviceManagerPage.java:130) 在 com.android.sdkuilib.internal.repository.ui.AvdManagerWindowImpl1.createDeviceTab(AvdManagerWindowImpl1.java:210) 在 com.android.sdkuilib.internal.repository .ui.AvdManagerWindowImpl1.createContents(AvdManagerWindowImpl1.java:193) 在 com.android.sdkuilib.internal.repository.ui。AvdManagerWindowImpl1.open(AvdManagerWindowImpl1.java:133) 在 com.android.sdkuilib.repository.AvdManagerWindow.open(AvdManagerWindow.java:94) 在 com.android.ide.eclipse.adt.internal.actions.AvdManagerAction.run(AvdManagerAction. java:62) at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251) at org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229) at org.eclipse.jface.action .ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584) 在 org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501) 在 org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411 ) 在 org.eclipse.swt.widgets.Widget 的 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)。sendEvent(Widget.java:1053) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758) at org.eclipse .e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029) 在 org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 在 org.eclipse.e4。 ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923) 在 org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86) 在 org.eclipse.ui.internal。 Workbench$5.run(Workbench.java:588) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543 ) 在 org.eclipse.ui.PlatformUI。createAndRunWorkbench(PlatformUI.java:149) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java: 196) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org .eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native方法）在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629) 在 org.eclipse.equinox.launcher.Main.basicRun (Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438)

# java - Spring Suite 工具新项目模板未加载

> ID：13774840
> 
> 赞同：0
> 
> 时间：2012-12-08T05:35:20.000
> 
> 标签：java, spring-mvc

我是 Thilina，我是 spring 工具套件的新手。我的操作系统是windows 8。

*   我首先提取了“spring-tool-suite-3.1.0.RELEASE-e4.2-win32-x86_64.zip”文件。

*   接下来我去了“springsource”文件夹并选择了“sts-3.1.0.RELEASE”文件夹。

*   我双击 STS.exe 来执行 Spring Tool Suite。

*   Next 在仪表板中，我单击 Create > Spring Template Project。

*   然后我收到以下错误“下载或解析描述符文件'https://raw.github.com/SpringSource/spring-integration-templates/master/si-sts-templates/builds/descriptor.xml'时出错：

    org.eclipse.core.runtime.CoreException：检索 [https://raw.github.com/SpringSource/spring-integration-](https://raw.github.com/SpringSource/spring-integration-)时出错

*   我的互联网工作正常。我不知道为什么我会遇到这个问题。希望你们能帮我解决这个问题。

感谢您的时间和精力。

谢谢你。

* * *

问候，

* * *

蒂丽娜·古纳瓦丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:06:56.503

[https://issuetracker.springsource.com/browse/STS-679](https://issuetracker.springsource.com/browse/STS-679)

有关完整修复，请阅读下面的博客条目

[http://nomsdom.blogspot.in/2012/12/spring-suite-tool-new-project-template.html](http://nomsdom.blogspot.in/2012/12/spring-suite-tool-new-project-template.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:32:06.063

[http://forum.springsource.org/showthread.php?133139-Spring-Suite-Tool-New-Project-Template-Not-Loading](http://forum.springsource.org/showthread.php?133139-Spring-Suite-Tool-New-Project-Template-Not-Loading)

这是问题和答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:58:34.547

我只是用另一种方式解决了这个问题。我认为这是由于 SSL（安全套接字层）的认证造成的。所以我只是删除了使用 SSL 的“链接”，然后我可以看到 Spring MVC 项目。使用此方法只能看到两个模板。虽然这对您不起作用，但您可以通过按下“恢复默认值”轻松恢复默认设置。确保选中“在新模板向导中显示自托管模板”，以便您可以看到隐藏的 URL 并将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T17:38:56.920

这是版本兼容性的问题。如果您使用的是最新版本的Spring工具套件，而使用的是较低版本的jdk，则会产生问题。请尝试jdk7以获得最新的弹簧工具套件。

# php - 如何将多个用户整合到一个用户微博网站？

> ID：13774845
> 
> 赞同：0
> 
> 时间：2012-12-08T05:36:35.303
> 
> 标签：php, mysql, twitter, microblogging

我对 PHP 非常陌生，并找到了一个关于如何从头开始构建类似 Twitter 的微博网站的教程。它工作得很好，除了我不知道如何整合其他用户可以注册和使用该网站的地方？它似乎只为一个用户设置。

[我用的教程](http://www.ibm.com/developerworks/library/os-php-twitter-interface/index.html)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:57:34.643

因此，请**继续阅读**，当您有更具体的问题时，欢迎您：

*   [使用 PHP5 创建一个简单而安全的登录/注册](//forum.codecall.net/topic/69771-creating-a-simple-yet-secured-loginregistration-with-php5)

这是一个使用 PHP5 和 PDO 的好教程（就像 @Charles 推荐的那样）。避免阅读一些旧教程（IBM 是一个很好的来源，但该教程已有 3.8 年的历史）。

# actionscript-3 - adobe air 3.5 没有音频，但 air 3.4 可以正常工作 - 两者都使用 Flash cs6 编译

> ID：13774847
> 
> 赞同：0
> 
> 时间：2012-12-08T05:36:52.650
> 
> 标签：actionscript-3, air

这是 3.5 的错误还是我应该知道的一些变化？我用桌面和安卓测试过。在解决错误时，我应该担心还是坚持使用 3.4？

编辑：

看起来问题是 Event.ACTIVATE 不再起作用了。当我放置 addEventListener(Event.ENTER_FRAME,myFunction); 外面，一切正常。下面的代码适用于 Air 3.4 。

```
stage.addEventListener(Event.ACTIVATE, fl_Activate);
stage.addEventListener(Event.DEACTIVATE, fl_Deactivate);

function fl_Activate(event:Event):void
{
addEventListener(Event.ENTER_FRAME,myFunction);
stage.frameRate = 24;
}

function fl_Deactivate(event:Event):void
{
removeEventListener(Event.ENTER_FRAME,myFunction);
stage.frameRate = 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:30:48.393

好的。我只是添加了

```
addEventListener(Event.ENTER_FRAME,myFunction); 
```

在第一个功能之上，现在可以正常工作了。

# ruby-on-rails - 注册后如何使用设备自动登录？

> ID：13774852
> 
> 赞同：9
> 
> 时间：2012-12-08T05:38:03.853
> 
> 标签：ruby-on-rails, devise, mobile-fu

在我的 Rails 应用程序中，我使用`devise`gem 来管理用户。我正在使用`mobile_fu`gem 来区分来自不同用户的用户。

我想在这里实现的是：

1.  如果用户从移动设备打开我的网站，我将提取它的`MSISDN`数字读取标题，它已经完成
2.  如果该`MSISDN`数字属于特定系列，那么我想自动将该用户登录到我的网站，这样他就不必填写登录表单。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T05:57:21.287

你必须：

1) 将用户注册到网站进行设计。2) 登录用户。

对于选项 1，您可以执行以下操作：

```
user = User.find_by_msisdn(params[:msisdn])
if user.nil?
  user = User.create(field_1: value1, field_2: value2)    
end

sign_in(user)

redirect_to after_sign_in_path(user) 
```

需要记住的事情，第一行尝试为用户查找，在第二行，如果找不到用户，则立即创建用户，然后登录用户，最后将用户重定向到他的位置登录后应该去。

# c++ - 2D 45 度角倾斜瓷砖

> ID：13774853
> 
> 赞同：0
> 
> 时间：2012-12-08T05:38:35.617
> 
> 标签：c++, 2d, sdl

这是我检查瓷砖类型的代码。如果它是一个倾斜的瓷砖，那么它会更新角色的位置。如图所示，我的角色不会沿着斜坡移动。我究竟做错了什么？

```
bool Entity::PosValidTile(Tile* Tile, int tileX, int tileY)
{
    if(Tile->TypeID == TILE_TYPE_ANGLEUP)
    {
        int Slope, Intercept;
        int newY;

        Vector P1,P2;
        P1.X = tileX; P1.Y = tileY + TILE_SIZE;
        P2.X = tileX + TILE_SIZE; P2.Y = tileY;

        if(X + (Width/2) > tileX)
        {
            Slope = -(P2.Y- P1.Y) / (P2.X - P1.X);

            Intercept = Slope * (-P1.X + P1.Y);

            newY = Slope * ((X + Width/2) + Intercept);

            Y = (newY - Height);

            return true;
        }
    }
} 
```

![示范](../Images/ed8b86df9778d743a29e8b66e3516395.png)

字符的尺寸为 48 X 96；分别是宽度和高度。他的原点如瓷砖，在左上角。

这是该功能的使用方式

```
bool Entity::PosValid(int NewX, int NewY)
{

bool Return = true;

int StartX  = (NewX + Col_X) / TILE_SIZE;
int StartY  = (NewY + Col_Y) / TILE_SIZE;

int EndX    = ((NewX + Col_X) + Width - Col_Width - 1)      / TILE_SIZE;
int EndY    = ((NewY + Col_Y) + Height - Col_Height - 1)    / TILE_SIZE;

if(Flags & ENTITY_FLAG_IGNOREMAP)
{
}else
{
    for(int iY = StartY; iY <= EndY;iY++)
    {
        for(int iX = StartX;iX <= EndX;iX++)
        {
            Tile* Tile = Area::AreaControl.GetTile(iX * TILE_SIZE, iY * TILE_SIZE);

            int atileY = iY * TILE_SIZE;
            int atileX = iX * TILE_SIZE;

            if(PosValidTile(Tile,atileX,atileY) == false)
            {
                Return = false;
            }
        }
    }
}

if(Flags & ENTITY_FLAG_MAPONLY)
{
}else
{
    for(int i = 0;i < (int)EntityList.size();i++)
    {
        if(PosValidEntity(EntityList[i], NewX, NewY) == false)
        {
            Return = false;
        }
    }
}

return Return;
} 
```

调用前一个的函数是我的 OnMove 函数。

```
void Entity::OnMove(float MoveX, float MoveY)
{
if(MoveX == 0 && MoveY == 0) return;

double NewX = 0;
double NewY = 0;

CanJump = false;

MoveX *= Time::TimeControl.GetDeltaTime();
MoveY *= Time::TimeControl.GetDeltaTime();

if(MoveX != 0)
{
    if(MoveX >= 0)  NewX =  Time::TimeControl.GetDeltaTime();
    else            NewX = -Time::TimeControl.GetDeltaTime();
}

if(MoveY != 0)
{
    if(MoveY >= 0)  NewY =  Time::TimeControl.GetDeltaTime();
    else            NewY = -Time::TimeControl.GetDeltaTime();
}

while(true)
{
    if(Flags & ENTITY_FLAG_GHOST)
    {
        PosValid((float)(X + NewX), (float)(Y + NewY));

        X += (float)NewX;
        Y += (float)NewY;
    }else
    {
        if(PosValid((float)(X + NewX), (int)(Y)))
        {
            X += (float)NewX;
        }else
        {
            SpeedX = 0;
        }

        if(PosValid((float)(X), (float)(Y + NewY)))
        {
            Y += (float)NewY;

        }else
        {
            if(MoveY > 0)
            {
                CanJump = true;
            }
            SpeedY = 0;
        }
    }

    MoveX += (float)-NewX;
    MoveY += (float)-NewY;

    if(NewX > 0 && MoveX <= 0) NewX = 0;
    if(NewX < 0 && MoveX >= 0) NewX = 0;

    if(NewY > 0 && MoveY <= 0) NewY = 0;
    if(NewY < 0 && MoveY >= 0) NewY = 0;

    if(MoveX == 0) NewX = 0;
    if(MoveY == 0) NewY = 0;

    if(MoveX == 0 && MoveY  == 0)   break;
    if(NewX  == 0 && NewY   == 0)   break;
}
} 
```

然后在主循环中调用这个函数，就像这样 OnMove(SpeedX,SpeedY); 速度计算为休耕

```
 SpeedX += AccelX * Time::TimeControl.GetDeltaTime();
    SpeedY += AccelY * Time::TimeControl.GetDeltaTime(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:54:56.930

我给出了一个“答案”，但它可能更适合作为评论......几点：

*   第一个问题，调试器中发生了什么？你还进`if`吗？
*   我没有看到任何提及`delta time`，它应该用于获得平滑的时间相关运动（不依赖于帧）
*   `PosValidTile`没有说太多关于函数的作用......你似乎修改了你的`Entity` `Y`价值，但不是`X`？**如果你不顺着斜坡水平移动，你也不上去是正常的！**
*   `TILE_TYPE_ANGLEUP`对我来说没有多大意义，因为如果你的角色从右到左转身，它的“角度”就是“向下”
*   我猜角色移动是在其他地方确定的？应该考虑你角色的走向，以了解你要去斜坡的哪一侧（你的“下一个” `X`，这里似乎没有计算）
*   这里的功能不完整吗？并非所有路径都返回值

**编辑：**您在使用的地方发布了新代码，`PosValidEntity`并且`NewX`-`NewY`我们看不到这些值的设置位置，但请记住，您`PosValidTile`似乎是直接修改`Y`的，而不是“暂定的 NewY”。

另外，我不太确定你`Intercept`应该做什么。基本上你有你的，你想知道你沿着轴有`Slope`多少像素，乘以这个相对值，然后加上 base 。在你的情况下总是**-** >所以找到你的新应该像这样容易 - 如果不是总是，只需将相对值乘以该斜率`X``Slope``Y``Slope` **`TILE_SIZE / TILE_SIZE``1``Y``1``X`**

 **```
Y = X + (Width/2) - tileX + tileY; 
```

您获取`X`角色的位置，添加`Half Width`和删除`X`图块的基值，这可以告诉您沿着`X`轴在斜坡上的距离。由于您的斜率始终为 ，因此您在轴上的距离与您在轴上`1`的距离一样远，所以如果您（或者在您的情况下，因为我认为较高的值意味着您的坐标中屏幕上的较低？）这个值到您的基础上，您应该得到你的价值。`Y``X``add``subtract``Y``Y`**

# android - dispatchTouchEvent 中看似不可能的 NullPointerException

> ID：13774854
> 
> 赞同：3
> 
> 时间：2012-12-08T05:38:47.343
> 
> 标签：android, nullpointerexception

我有一个 Android 应用程序在我的 dispatchTouchEvent 实现中使用 NullPointerException 在某些设备上崩溃。我实际上从未在我的任何设备上看到过崩溃，但它每天在现场发生很多次，因为我在自己的分析和 Android 开发者控制台中都看到了崩溃。问题是我很难弄清楚这种崩溃是如何发生的。这是相关代码（我在代码中标记了“CRASH HERE ->”抛出NullPointerException的位置）：

```
if (…)
{
    ...
}
else if (event != null)
{
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        motionStartX = event.getX();
        motionStartY = event.getY();
    }
    else if (event.getAction() == MotionEvent.ACTION_UP)
    {
        ...
        if (...)
        {
            ...
        }
        else if         (event != null && event.getPointerCount() > 0 &&
 /*** CRASH HERE -> ***/(Math.abs(motionStartX - event.getX()) > 5 ||
                         Math.abs(motionStartY - event.getY()) > 5))
        {
            ...
        }
    }
} 
```

据我了解，可能抛出 NullPointerException 的唯一方法是 if `event`is `null`，但是，在它上面的行上，我添加了一些偏执检查是否`event`存在`null`，甚至该事件是否有指针。尽管如此，我还是遇到了崩溃。我觉得我错过了什么。有没有人对此有任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:57:13.433

0）我认为问题是你没有处理异常。

1）这两个（motionStartX，motionStartY）应该在崩溃代码上面声明并且必须初始化（set），

2）检查您没有处理错误的数据类型，例如您没有使用字符串作为整数。

3）使用try Catch语句处理异常，如果这是异常不是bug

4) 使用 Log.d("有趣的值", "motionStartX = " + motionStartX " , motionStartY= " + motionStartY + " , event.getX() = " + event.getX() " , event.getY() = " + event.getY()); Tp pring 值，如果值存在则没有空点，

```
else if (event.getAction() == MotionEvent.ACTION_UP)
{
    try{ 
        Log.d("values on function", "motionStartX = " + motionStartX  " , motionStartY= " + motionStartY + " , event.getX() = " + event.getX()  " , event.getY() = " + event.getY());
        ...
        if (...){
            ...
        }
        else if         (event != null && event.getPointerCount() > 0 &&
        /*** CRASH HERE -> ***/(Math.abs(motionStartX - event.getX()) > 5 ||
                     Math.abs(motionStartY - event.getY()) > 5)){
                       ...
        }catch(Exception e){
          //Handle exceptions here, if they are exceptions not bugs in your code
       }
  } 
```

# keylistener - KeyTyped 在这段代码中被调用了两次？

> ID：13774858
> 
> 赞同：1
> 
> 时间：2012-12-08T05:39:12.163
> 
> 标签：keylistener, keyevent, printwriter

这里的某个地方有一个错误。出于某种原因，当我向服务器发送消息时，每次击键都会收到两次消息！例如，我输入“a”，服务器收到“INSERT 0 1 a”“INSERT 0 1 a”。我不知道为什么它会发生两次你知道吗？

```
package client;

import javax.swing.*;

import java.io.BufferedReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.util.*;

import javax.swing.event.CaretEvent;
import javax.swing.event.CaretListener;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.text.BadLocationException;
import javax.swing.text.Document;

public class JTextAreaListen extends JFrame implements KeyListener,
        CaretListener {

    private static final long serialVersionUID = 6950001634065526391L;

    private JTextArea textArea;

    protected final PrintWriter out;
    protected final int id;

    protected final BufferedReader in;
    protected static int caretPos;
    private static int cMark;
    protected static boolean text_selected;

    /*
     * Connecting to server. (1337 is the port we are going to use).
     * 
     * socket = new Socket(InetAddress.getByName("127.0.0.1"), 1337);
     * 
     * (Open a new outStream, you can save this instead of opening on every time
     * you want to send a message. If the connection is lost your should to
     * out.close();
     * 
     * out = new PrintWriter(socket.getOutputStream(), true);
     * 
     * out.print("message"); to send something to the server.
     */

    public JTextAreaListen(PrintWriter out, BufferedReader in, int id) {
        super("JTextAreaListen");
        this.id = id;
        this.out = out;
        this.in = in;

        TextEditor.document.addCaretListener(this);
        TextEditor.document.addKeyListener(this);

    }

    // Listener methods

    public void changedUpdate(DocumentEvent ev) {
    }

    public void removeUpdate(DocumentEvent ev) {

    }

    public void insertUpdate(DocumentEvent ev) {
    }

    @Override
    public void keyPressed(KeyEvent arg0) {
        System.out.print("KeyPressedd");

    }

    @Override
    public void keyReleased(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent ev) {
        System.out.println(ev.KEY_PRESSED);
        System.out.println("Sth happening!");
        System.out.println(ev.getKeyCode());
        int evID = ev.getID();
        String keyString;
        int keyCode;
        if (evID == KeyEvent.KEY_TYPED) {
            if (ev.getKeyChar() == KeyEvent.CHAR_UNDEFINED) {
                keyCode = ev.getKeyCode();
                if (keyCode == 8) {
                    if (text_selected) {
                        if (caretPos > cMark) {
                            for (int i = caretPos; i >= cMark; i--) {
                                System.out.println("sm1");
                                sendMessage("DELETE" + " " + String.valueOf(id)
                                        + " " + String.valueOf(cMark + 1));
                            }
                        } else if (caretPos < cMark) {
                            for (int i = caretPos; i >= cMark; i++) {
                                System.out.println("sm2");
                                sendMessage("DELETE" + " " + String.valueOf(id)
                                        + " " + String.valueOf(cMark + 1));
                            }
                        }
                    } else {
                        System.out.println("sm3");
                        sendMessage("DELETE" + " " + String.valueOf(id) + " "
                                + String.valueOf(caretPos + 1));
                    }
                }
            } else {
                char c = ev.getKeyChar();
                boolean capital = ev.isShiftDown();
                String charString = String.valueOf(c);
                if (capital) {
                    charString.toUpperCase();
                }
                if (text_selected) {
                    if (caretPos > cMark) {
                        for (int i = caretPos; i >= cMark; i--) {
                            System.out.println("sm4");
                            sendMessage("DELETE" + " " + String.valueOf(id)
                                    + " " + String.valueOf(cMark + 1));
                        }
                        System.out.println("sm5");
                        sendMessage("INSERT" + " " + String.valueOf(id) + " "
                                + String.valueOf(cMark) + " " + charString);
                    } else if (caretPos < cMark) {
                        for (int i = caretPos; i >= cMark; i++) {
                            System.out.println("sm6");
                            sendMessage("DELETE" + " " + String.valueOf(id)
                                    + " " + String.valueOf(caretPos + 1));
                        }
                        System.out.println("sm7");
                        sendMessage("INSERT" + " " + String.valueOf(id) + " "
                                + String.valueOf(caretPos) + " " + charString);
                    }
                } else {
                    System.out.println("sm8");
                    sendMessage("INSERT" + " " + String.valueOf(id) + " "
                            + String.valueOf(caretPos) + " " + charString);
                }
            }

        }

    }

    public void sendMessage(String s) {
        System.out.println("smReal");
        out.println(s);
    }

    @Override
    public void caretUpdate(CaretEvent cev) {
        int dot = cev.getDot();
        int mark = cev.getMark();
        caretPos = dot;
        cMark = mark;
        if (dot == mark) {
            text_selected = false;
        } else if ((dot < mark) | (dot > mark)) {
            text_selected = true;
        }
    }

} 
```

这是包含调用此侦听器的 TextArea 的客户端的代码。

```
package client;

import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.ActionMap;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JToolBar;
import javax.swing.text.DefaultEditorKit;

public class TextEditor extends JFrame {

    private static final long serialVersionUID = 5991470239888613993L;
    protected static JTextArea document = new JTextArea(20, 120);
    private JFileChooser dialog = new JFileChooser(
            System.getProperty("user.dir"));
    private String currentFile = "Untitled";
    private boolean changed = false;
    private int id;
    private final BufferedReader in;
    private final PrintWriter out;

    public TextEditor(final PrintWriter out, final BufferedReader in, int id) {
        this.out = out;
        this.in = in;
        this.id = id;
        document.setFont(new Font("Monospaced", Font.PLAIN, 12));

        JScrollPane scroll = new JScrollPane(document,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        this.add(scroll, BorderLayout.CENTER);

        JMenuBar JMB = new JMenuBar();
        this.setJMenuBar(JMB);
        JMenu file = new JMenu("File");
        JMenu edit = new JMenu("Edit");

        JMB.add(file);
        JMB.add(edit);

        file.add(Open);
        file.add(Save);
        file.add(Quit);
        file.add(SaveAs);
        file.addSeparator();
        for (int i = 0; i < 4; i++)
            file.getItem(i).setIcon(null);

        edit.add("Cut");
        edit.add("Copy");
        edit.add("Paste");
        edit.getItem(0).setText("Cut");
        edit.getItem(1).setText("Copy");
        edit.getItem(2).setText("Paste");

        JToolBar tool = new JToolBar();
        this.add(tool, BorderLayout.NORTH);
        tool.add(Open);
        tool.add(Save);
        tool.addSeparator();

        JButton cut = tool.add(Cut), copy = tool.add(Copy), paste = tool
                .add(Paste);
        cut.setText(null);
        cut.setIcon(new ImageIcon("cut.png"));
        copy.setText(null);
        copy.setIcon(new ImageIcon("copy.png"));
        paste.setText(null);
        paste.setIcon(new ImageIcon("paste.png"));

        Save.setEnabled(false);
        SaveAs.setEnabled(false);

        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.pack();
        document.addKeyListener(new JTextAreaListen(out, in, id));

        setTitle(currentFile);
        setVisible(true);
        final int id2 = id;
        Thread t = new Thread(new Runnable() {
            public void run() {
                out.println("GET " + id2);
                while (true) {
                    out.println("GET " + id2);
                    String line = null;
                    do {
                        try {
                            line = in.readLine();
                        } catch (IOException e) {
                            JOptionPane.showMessageDialog(null,
                                    "Connection Lost", "Error",
                                    JOptionPane.ERROR_MESSAGE);
                            System.exit(-1);
                        }
                    } while (line == null);
                    int temp = JTextAreaListen.caretPos;
                    document.setText(line);
                    document.setCaretPosition(temp);
                }
            }
        });
        t.start();
    }

    private KeyListener keyPressed = new KeyAdapter() {

        public void keyPressed(KeyEvent e) {
            changed = true;
            Save.setEnabled(true);
            SaveAs.setEnabled(true);
        }
    };
    Action Open = new AbstractAction("Open", new ImageIcon("open.png")) {
        private static final long serialVersionUID = -474289105133169886L;

        public void actionPerformed(ActionEvent e) {
            saveOld();
            if (dialog.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
                readInFile(dialog.getSelectedFile().getAbsolutePath());
            }
            SaveAs.setEnabled(true);
        }
    };
    Action Save = new AbstractAction("Save", new ImageIcon("save.png")) {
        private static final long serialVersionUID = 2064233284536910855L;

        public void actionPerformed(ActionEvent e) {
            if (!currentFile.equals("Untitled"))
                saveFile(currentFile);
            else
                saveFileAs();
        }
    };
    Action SaveAs = new AbstractAction("Save as...") {
        private static final long serialVersionUID = -5473532525926088880L;

        public void actionPerformed(ActionEvent e) {
            saveFileAs();
        }
    };
    Action Quit = new AbstractAction("Quit") {
        private static final long serialVersionUID = -5339245808869817726L;

        public void actionPerformed(ActionEvent e) {
            saveOld();
            System.exit(0);
        }
    };
    ActionMap m = document.getActionMap();
    Action Cut = m.get(DefaultEditorKit.cutAction);
    Action Copy = m.get(DefaultEditorKit.copyAction);
    Action Paste = m.get(DefaultEditorKit.pasteAction);

    private void saveFileAs() {
        if (dialog.showSaveDialog(null) == JFileChooser.APPROVE_OPTION)
            saveFile(dialog.getSelectedFile().getAbsolutePath());
    }

    private void saveOld() {
        if (changed) {
            if (JOptionPane.showConfirmDialog(this, "Save " + currentFile
                    + " ?", "Save", JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION)
                saveFile(currentFile);
        }
    }

    private void readInFile(String fileName) {
        try {
            FileReader r = new FileReader(fileName);
            document.read(r, null);
            r.close();
            currentFile = fileName;
            setTitle(currentFile);
            changed = false;
        } catch (IOException e) {
            Toolkit.getDefaultToolkit().beep();
            JOptionPane.showMessageDialog(this, "Could not find " + fileName);
        }
    }

    private void saveFile(String fileName) {
        try {
            FileWriter w = new FileWriter(fileName);
            document.write(w);
            w.close();
            currentFile = fileName;
            setTitle(currentFile);
            changed = false;
            Save.setEnabled(false);
        } catch (IOException e) {
            JOptionPane
                    .showMessageDialog(this,
                            "An error has occurred. Your document may not have been saved");
        }
    }
} 
```

# objective-c - 在模型数组中循环

> ID：13774860
> 
> 赞同：1
> 
> 时间：2012-12-08T05:39:25.987
> 
> 标签：objective-c

我有这个模型：

```
@interface Data : NSObject
@property int Period; 
@property (nonatomic, assign) NSDate *Start;
@property (nonatomic, assign) NSDate *End;
@end

@implementation Data
@synthesize Period, Start, End;
@end 
```

我在可变数组中添加数据。

```
@property (strong, nonatomic) NSMutableArray* myArray;
self.myArray = [NSMutableArray arrayWithCapacity:0];

Data *element1 =[ [Data alloc] init];
element1.Period = 1;
element1.Start = dateStart1;
element1.End = dateEnd1;
[self.myArray addObject:element1];

Data *element2 =[ [Data alloc] init];
element2.Period = 2;
element2.Start = dateStart2;
element2.End = dateEnd2;
[self.myArray addObject:element2];

Data *element3 =[ [Data alloc] init];
element3.Period = 3;
element3.Start = dateStart3;
element3.End = dateEnd3;
[self.myArray addObject:element3]; 
```

我可以从数组中提取开始日期

```
Data * extractDateStart = [self.myArray valueForKey:@"Start"];
NSLog(@"All Start Dates: %@", extractDateStart); 
```

我需要循环该数组以搜索特定日期（由用户插入）在三个时期中的哪个时期。

我知道如何从“正常”数组中提取数据：

```
for(NSString * extractDate in self.myArray) {
    NSLog(extractDate);
} 
```

并且也知道如何将一个日期与另一个日期进行比较：

> ```
>  switch ([dateInserted compare: date]) {
>     case NSOrderedAscending:
>         // dateInserted old than date
>       break;
>     case NSOrderedSame:
>         // dateInserted the same then date
>       break;
>     case NSOrderedDescending:
>         // dateInserted new then date 
>       break;
>     default:
>         // generic error
>       break;
> } 
> ```

但是在这种情况下如何移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:47:56.837

我可能不明白你的问题，但听起来像你：

*   提供用户`NSDate`
*   想要找到落在日期和日期之间的`Data`对象`NSDate``Start``End`

如果是这样的话，这样的事情应该可以工作：

```
NSDate *dateToFind = ...;
Data *foundData = nil; // We will put the correct Data object here if we find it    

for (Data *data in self.myArray) {
    // Test that dateToFind is between data.Start and data.End
    if (([dateToFind compare:data.Start] != NSOrderedAscending) 
            && ([dateToFind compare:data.End] != NSOrderedDescending)))
    {
        foundData = data; // dateToFind is in this Data's date range
    }
}

// foundData is either nil or contains the Data you were looking for 
```

有关测试日期是否介于其他两个日期之间的其他好方法，[请参阅此问题](https://stackoverflow.com/questions/1072848/how-to-check-if-an-nsdate-occurs-between-two-other-nsdates)。

# c++ - C++: Swapping pointed-to variables

> ID：13774865
> 
> 赞同：4
> 
> 时间：2012-12-08T05:39:58.013
> 
> 标签：c++, pointers, swap

> **Possible Duplicate:**
> [Why do I get a segmentation fault when writing to a string?](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

I have the following program:

```
#include <iostream>
using namespace std;

void reverseString(char* first, char* last)
{
    while(first < last)
    {
        cout << *first << " " << *last << endl; //for debugging; prints 'H' and 'o' then crashes
        char temp = *last;
        *last = *first; //this line crashes the program
        *first = temp;
        first++;
        last--;
    }
}

int main()
{
    char* s = "Hello";
    reverseString(s, s + strlen(s) - 1);
    cout << s << endl;
} 
```

However, I'm having trouble swapping the values to which the pointers point. I thought *p = *p1 should just set the pointed-to value of p to the pointed-to value of p1, but something seems bugged up. Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T05:46:27.830

The code looks fine to me. The most likely problem is that the compiler is allowed to assume that string literals are not modified, so it can put them in read-only memory. Try

```
char s[] = "Hello"; 
```

in `main()` instead, which creates a *writable copy* of the string literal.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T06:06:08.713

An alternative solution to @j_random_hacker:

```
char* buffer = new char[32];
strcpy(buffer, "Hello");
reverseString(buffer, buffer + strlen(buffer) - 1);

... rest of your program ...

delete[] buffer; 
```

This properly allocates memory for a C-style string which can then be modified by any function. Of course, you need to include `<string.h>` header to access `strcpy` and `strlen`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:56:46.530

Header file for strlen() is missing.

Second, it throws a warning - Deprecated conversion from string constant to char*, @j_random_hacker's solution seems to take care of this issue.

# windows - Python脚本在包含汉字的路径下不起作用

> ID：13774869
> 
> 赞同：3
> 
> 时间：2012-12-08T05:40:40.330
> 
> 标签：windows, python-3.3

我用 Python 3.3 编写了一个脚本，它安装在 Windows 8 上。问题是：当它的路径由英文字符组成时，我可以通过双击它来运行它，例如“E:\test\myscript.py”。

但是如果它的路径中有一些汉字，比如“E:\测试\myscript.py”，我双击它就不行了，并且出现错误：

> “python：未能设置**main** ._ *loader* _”。

我该如何解决这个问题？谢谢。

# ruby-on-rails - 根据用户的 IP 地址提供不同/动态的内容

> ID：13774870
> 
> 赞同：1
> 
> 时间：2012-12-08T05:41:14.457
> 
> 标签：ruby-on-rails, geolocation, ip

假设我的 IP 地址是 xxx1（纽约市），而你的 IP 地址是 xxx2（洛杉矶）。

我访问 mydomain.com/stuff，我看到了关于“stuff”的线程，但仅限于纽约地区（基于我的 IP 地址）。您访问 mydomain.com/stuff 并看到有关“stuff”的线程，但仅限于洛杉矶地区（基于您的 IP 地址）。

一般问题：使用 Ruby on Rails，如何使相同的 URL、mydomain.com/stuff 根据访问者的 IP 地址显示动态内容？例如，我知道企业软件，如 Monetate，它允许网站更改网站上的图像/文本，以将夹克显示为 NYC IP 地址，但将泳装显示为夏威夷 IP 地址。

我目前的方法如下：我的“post”模型有字段：“user_id”、“content”、“ip”、“city”。我将使用 geokit-gem 从“ip”地址填充“城市”字段。从那里，我可以读取访问者的 IP 地址，推断他们的城市，并过滤页面内容以匹配访问者的城市。但...

具体问题：我如何（1）获取访问者的 IP 地址，以及（2）将该 IP 地址从访问者通过路由传递到管理“显示”操作的控制器，以便我可以根据城市？

回答上述问题#1-#2、识别我的一般方法中的缺陷并概述你自己的方法所获得的分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:54:07.210

您可以通过以下方式获取 IP：**request.remote_ip**

你可以使用地理编码器[https://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)

检查这个 RailsCast [http://railscasts.com/episodes/273-geocoder](http://railscasts.com/episodes/273-geocoder)

流程对我来说似乎不错，您可以按城市过滤帖子，也可以按附近位置过滤。

# python - 获取目录python中所有文件的路径

> ID：13774872
> 
> 赞同：0
> 
> 时间：2012-12-08T05:41:50.663
> 
> 标签：python

我正在尝试检索具有特定扩展名的文件夹中的所有文件。但问题是我不知道那里可以有多少子目录..

所以基本上是这样的：

```
 ------ filex.py
       ---folder1               -------- filezs.py
root             ------- folder2
       --- file.py              ----- fileabc.py
       --- file.txt 
```

等等

所以基本上我想编写一个执行以下操作的函数：

```
 def get_files(root,files_of_type):
  return dict{key = file_name: value = path} 
```

因此，例如，如果我想获取所有文件及其扩展名 py 的路径

那么这将是：

```
 root = "/path/to/root"
  files_of_type = [".py"]

 returns  {"filex.py": "/path/to/root/folder1".. and so on} 
```

任何建议谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:49:49.940

你可以用[`os.walk`](http://docs.python.org/2/library/os.html#os.walk). 对于每一级目录，它将为您提供目录路径、任何子目录名称的列表以及该目录中任何文件名的列表。从那里您可以组装字典以返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T05:57:36.853

```
import os

def get_files(root, files_of_type):
    rv = {}

    for cwd, folders, files in os.walk(root):
        for fname in files:
            # os.path.splitext splits a filename into a tuple like so:
            # (file_path, extension)
            if os.path.splitext(fname)[1] in files_of_type:
                # key = filename, value = directory of file
                rv[fname] = cwd 

    return rv 
```

# objective-c - 块可以通过Objective C中的协议替换委托模式吗？

> ID：13774874
> 
> 赞同：2
> 
> 时间：2012-12-08T05:42:08.123
> 
> 标签：objective-c, design-patterns, delegates, objective-c-blocks

我是一名普通的 iOS 开发人员。我看到的第一个被大量使用的设计模式是委托模式，它主要用于回调功能。

现在Objective C中有块，我看到越来越多的库大量使用它们并避免委托，我想知道，块是否永久替代使用协议的委托模式？

我最近在一个项目中使用了 MKNetworkKit，我在它之上创建了一个包装类，该库是基于块的，所以我所有的代码都会封装对其中一个基于块的代码的调用，而不是另一个基于块的代码。

我发现一开始很方便，但是由于代码看起来很复杂，很难调试和修改（callback inside callback inside！）

关于何时使用什么和某些最佳实践的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:58:35.920

委托和块都用于“回调”结果的东西，通常是创建它的东西。有一些区别：

*   使用委托协议，您必须实现以接收回调的方法名称是固定的。这意味着，如果您需要使用相同的委托协议从多个可能的操作接收回调，您必须以某种方式区分它们。使用块，没有固定的名称；您只需传递具有特定签名的块对象。您可以将不同的块对象传递给不同的操作。
*   委托协议通常（但不总是）包含多个回调方法，例如“成功”和“失败”回调。每个块只能作为一个回调。许多库尝试通过使用多个参数将多个委托回调“组合”成单个块回调，例如，块有两个参数（结果，错误），如果“错误”为 nil，则它对应于原始的“成功”回调， “结果”是数据；如果 "error" 不是 nil，它对应于原始的 "failure" 回调。另一种选择是为动作单独提供多个块（例如，它具有“成功块”属性和“失败块”属性，您可以设置它们）。这个比较笼统
*   内存管理：委托通常是弱引用的，因为委托通常是拥有委托人的“父”对象。但是，块是强烈引用的，因为块是一次性的东西，一旦传递给委托人就不再需要了。但是，如果你仔细想想，它并没有真正的不同。对于委托，委托方法通常会对自身（父对象）执行一些操作。对于块，为了做到这一点，块需要对“父”的引用。然后这个引用需要是一个弱引用，以模拟委托模式的内存管理。使用块，父对象代码可以更好地控制委托将如何引用它，因为它设置了块。

总之，可以将任何使用委托协议的 API 系统地转换为使用块的 API，正如我在上面描述的那样——对于每个委托方法，在委托者上添加一个块属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:53:43.657

协议和它们与之交谈的指定[委托对象](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)[与基于块的代码](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)完全不同，后者通常用于封装任务和/或将其运送到 GCD。

我确实在 Apple 的 Block 文档中看到一个地方似乎与代表提供的某些功能相匹配：

> 块作为回调特别有用，因为块包含要在回调中执行的代码和执行期间所需的数据。

# floating-point - 测试“大约大于”时考虑浮点不精度

> ID：13774876
> 
> 赞同：0
> 
> 时间：2012-12-08T05:42:29.827
> 
> 标签：floating-point

假设我想检查两个数字`a`和`b`是否相等。由于浮点数不精确，我知道不是简单地检查`a == b`，我通常想选择一些小数字`eps`并检查`abs(a - b) < eps`。

但是，如果我想在检查时考虑浮点错误该`a > b`怎么办？我猜这不是简单的

```
if (a > b) {
  ...
} 
```

我想做类似的事情：

```
if ((a > b) || abs(a - b) < eps) {
  ...
} 
```

它是否正确？如何检查`a`“大约大于” `b`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:31:28.523

您正在询问如何从不正确的输入（某些值中有错误）计算正确的结果（一个值是否大于另一个值）。显然，这通常是不可能的：不正确的输入会产生不正确的输出。但是，在某些特定情况下，我们可以挽救一些东西。下面讨论一种情况。

假设您已经计算了一些`a`并且`b`近似理想值*a*和*b*，其中*a*和*b*是使用精确数学完成计算时的结果。还假设我们知道误差界限*e [a]*和*e [b]*使得*a* – *e [a]* ≤ `a`≤ *a* + *e [a]*和*a* – *e [b]* ≤ `b`≤ *b* + *e [b]*。换句话说，计算`a`和`b`*分别位于a*和*b*周围的一些区间内。（根据执行的操作，错误可能会导致`a`或`b`位于某些未连接的间隔中，甚至可能不包含*a*或*b*。但我们会假设您有“表现良好”的错误。）

在这种情况下，如果`a`– *e [a]* > `b`+ *e [b]*，那么您可以确定*a* > *b*。

但是，假设您测试此条件并`true`在它成立时返回。然后，无论何时返回`true`，您都会知道*a* > *b*。但是，当它返回时`false`，您将无法确定*a* > *b*是否为假。因此，如果您仅在**确定***a* > *b***时才**想执行某些操作，则此测试很好。但这会导致您在某些情况下错过执行操作*a* > *b*。

 *****假设您不想错过任何这些情况。然后考虑条件`a`+ *e [a]* > `b`– *e [b]*。如果*a* > *b*，则此条件必须为真。因此，如果您测试此条件并在它成立时执行所需的操作，那么该操作将**始终**在*a* > *b*时执行。*但是，当a* > *b*不正确时，也可能会执行该操作。

这表明您可以做出选择。如果您的计算中有错误，有时您的应用程序会做错事。您必须选择：

*   *当a* > *b*为假时，您的应用程序执行该操作的可接受程度如何。它总是可以接受/不可接受，还是取决于*a*与*b*的接近程度？
*   *当a* > *b*为真时，您的应用程序不执行该操作的可接受程度如何。它总是可以接受/不可接受，还是取决于*a*与*b*的接近程度？

如果您能找到一些令人满意的折衷方案，那么您可以将您的条件设置为某个中间水平，并测试条件`a-b > e`，对于介于 – *e* *[a]* – *e* *[b]*和 + *e* *[a]* + *e* *[b]*`e`之间的一些条件，包括在内。如果找不到令人满意的折衷方案，则需要改进计算并减少错误，或者需要以某种方式重新设计程序。`a``b`

注意：这个场景中的最终测试`a-b > e`不是`a > b+e`因为计算可能存在小的舍入误差`b+e`。也可能有一个舍入误差计算`a-b`，但只有当`a`和`b`不接近时，在这种情况下，即使舍入，差异也远大于`e`（除非你的错误间隔很糟糕）。在我们关心精度的情况下，当`a`接近时`b`，计算`a-b`是精确的。*****

# liferay-6 - 如何将变量传递给javascript函数 标签？

> ID：13774877
> 
> 赞同：1
> 
> 时间：2012-12-08T05:43:07.403
> 
> 标签：liferay-6

我写了以下代码，但它没有被执行

```
<liferay-ui:search-container-column-text>                   
<liferay-ui:input-checkbox param="<%=String.valueOf(item1.getUserId()) %>" formName="frmAllCompanyUserPanelDisplay" onClick="callAddEntry('String.valueOf(item1.getUserId())')" id="<%=String.valueOf(item1.getUserId()) %>"/>
</liferay-ui:search-container-column-text>

<script type="text/javascript">
function callAddEntry(Hello) {
alert("Hello " + Hello);
}
</script> 
```

它给了我相同的输出 'String.valueOf(item1.getUserId())' 而不是动态获取 id，但是当我使用普通输入复选框时，每一行代码都执行得很好吗？为什么？

谁能帮我解决这个javascript问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T03:18:02.773

尝试以下一个..需要在java脚本函数中使用表达式如下

callAddEntry('<%=String.valueOf(item1.getUserId())%>')

更多关于 liferay 的信息请访问[www.liferaysavvy.com](http://www.liferaysavvy.com)

```
<liferay-ui:input-checkbox param="<%=String.valueOf(item1.getUserId()) %>" 
formName="frmAllCompanyUserPanelDisplay" onClick="callAddEntry('<%=String.valueOf(item1.getUserId())%>')" 
id="<%=String.valueOf(item1.getUserId()) %>"/> 
```

# css - 如何使主题标签链接在 Internet Explorer 上工作？

> ID：13774881
> 
> 赞同：0
> 
> 时间：2012-12-08T05:43:29.450
> 
> 标签：css, internet-explorer-8, modal-dialog

本教程教授如何在 CSS3 中创建模式窗口。它在 Chrome 和 Firefox 上完美运行。但是，Internet Explorer 不会加载任何包含主题标签的链接。

*   [教程](http://www.script-tutorials.com/css3-modal-popups/)
*   [演示](http://www.script-tutorials.com/demos/222/index.html)

第一个链接有源代码，但我将在下面发布一个副本以供将来参考。

## HTML

```
<html lang="en" >
    <head>
        <meta charset="utf-8" />
        <title>CSS3 Modal Popups | Script Tutorials</title>
        <link href="css/layout.css" rel="stylesheet" type="text/css" />
        <link href="css/modal.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <header>
            <h2>CSS3 Modal Popups</h2>
            <a href="http://www.script-tutorials.com/css3-modal-popups/" class="stuts">Back to original tutorial on <span>Script Tutorials</span></a>
        </header>
        <!-- panel with buttons -->
        <div class="main">
            <div class="panel">
                <a href="#login_form" id="login_pop">Log In</a>
                <a href="#join_form" id="join_pop">Sign Up</a>
            </div>
        </div>
        <!-- popup form #1 -->
        <a href="#x" class="overlay" id="login_form"></a>
        <div class="popup">
            <h2>Welcome Guest!</h2>
            <p>Please enter your login and password here</p>
            <div>
                <label for="login">Login</label>
                <input type="text" id="login" value="" />
            </div>
            <div>
                <label for="password">Password</label>
                <input type="password" id="password" value="" />
            </div>
            <input type="button" value="Log In" />
            <a class="close" href="#close"></a>
        </div>
        <!-- popup form #2 -->
        <a href="#x" class="overlay" id="join_form"></a>
        <div class="popup">
            <h2>Sign Up</h2>
            <p>Please enter your details here</p>
            <div>
                <label for="email">Login (Email)</label>
                <input type="text" id="email" value="" />
            </div>
            <div>
                <label for="pass">Password</label>
                <input type="password" id="pass" value="" />
            </div>
            <div>
                <label for="firstname">First name</label>
                <input type="text" id="firstname" value="" />
            </div>
            <div>
                <label for="lastname">Last name</label>
                <input type="text" id="lastname" value="" />
            </div>
            <input type="button" value="Sign Up" />&nbsp;&nbsp;&nbsp;or&nbsp;&nbsp;&nbsp;<a href="#login_form" id="login_pop">Log In</a>
            <a class="close" href="#close"></a>
        </div>
    </body>
</html> 
```

## CSS

```
 .main {
        background: #aaa url(../images/bg.jpg) no-repeat;
        width: 800px;
        height: 600px;
        margin: 50px auto;
    }
    .panel {
        background-color: #444;
        height: 34px;
        padding: 10px;
    }
    .panel a#login_pop, .panel a#join_pop {
        border: 2px solid #aaa;
        color: #fff;
        display: block;
        float: right;
        margin-right: 10px;
        padding: 5px 10px;
        text-decoration: none;
        text-shadow: 1px 1px #000;

        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        -ms-border-radius: 10px;
        -o-border-radius: 10px;
        border-radius: 10px;
    }
    a#login_pop:hover, a#join_pop:hover {
        border-color: #eee;
    }
    .overlay {
        background-color: rgba(0, 0, 0, 0.6);
        bottom: 0;
        cursor: default;
        left: 0;
        opacity: 0;
        position: fixed;
        right: 0;
        top: 0;
        visibility: hidden;
        z-index: 1;

        -webkit-transition: opacity .5s;
        -moz-transition: opacity .5s;
        -ms-transition: opacity .5s;
        -o-transition: opacity .5s;
        transition: opacity .5s;
    }
    .overlay:target {
        visibility: visible;
        opacity: 1;
    }
    .popup {
        background-color: #fff;
        border: 3px solid #fff;
        display: inline-block;
        left: 50%;
        opacity: 0;
        padding: 15px;
        position: fixed;
        text-align: justify;
        top: 40%;
        visibility: hidden;
        z-index: 10;

        -webkit-transform: translate(-50%, -50%);
        -moz-transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);

        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        -ms-border-radius: 10px;
        -o-border-radius: 10px;
        border-radius: 10px;

        -webkit-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
        -moz-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
        -ms-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
        -o-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
        box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;

        -webkit-transition: opacity .5s, top .5s;
        -moz-transition: opacity .5s, top .5s;
        -ms-transition: opacity .5s, top .5s;
        -o-transition: opacity .5s, top .5s;
        transition: opacity .5s, top .5s;
    }
    .overlay:target+.popup {
        top: 50%;
        opacity: 1;
        visibility: visible;
    }
    .close {
        background-color: rgba(0, 0, 0, 0.8);
        height: 30px;
        line-height: 30px;
        position: absolute;
        right: 0;
        text-align: center;
        text-decoration: none;
        top: -15px;
        width: 30px;

        -webkit-border-radius: 15px;
        -moz-border-radius: 15px;
        -ms-border-radius: 15px;
        -o-border-radius: 15px;
        border-radius: 15px;
    }
    .close:before {
        color: rgba(255, 255, 255, 0.9);
        content: "X";
        font-size: 24px;
        text-shadow: 0 -1px rgba(0, 0, 0, 0.9);
    }
    .close:hover {
        background-color: rgba(64, 128, 128, 0.8);
    }
    .popup p, .popup div {
        margin-bottom: 10px;
    }
    .popup label {
        display: inline-block;
        text-align: left;
        width: 120px;
    }
    .popup input[type="text"], .popup input[type="password"] {
        border: 1px solid;
        border-color: #999 #ccc #ccc;
        margin: 0;
        padding: 2px;

        -webkit-border-radius: 2px;
        -moz-border-radius: 2px;
        -ms-border-radius: 2px;
        -o-border-radius: 2px;
        border-radius: 2px;
    }
    .popup input[type="text"]:hover, .popup input[type="password"]:hover {
        border-color: #555 #888 #888;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:15:12.160

我之前在 Internet Explorer 中的 hashchange 事件中遇到过这个问题，所以我写了这段代码（由我保证到 IE7）：

> 将类添加`hash-modifier`到您拥有的每个修改 url 哈希的元素。

JavaScript：

```
$(function () {
        var hashchangeHandler = function () {
            switch (location.hash.replace(/^.*#/, '')) {
                case 'sign-up':
                    alert('signing up/opening sign-up modal');
                    break;
                case 'login':
                    alert('logging in/showing login modal');
                    break;
                default:
                    // do default something

            }
        }

        BindHashChangeEventListener(hashchangeHandler);

        // Run the initial hashHandler function on document ready
        hashchangeHandler();
    });

    function BindHashChangeEventListener(hashHandler) {
        if (("onhashchange" in window) && !($.browser.msie)) {
            // Use built-in jQuery hashchange event
            $(window).bind('hashchange', hashHandler);
        } else {
            //IE and browsers that don't support hashchange
            $('.hash-modifier').on('click', function () {
                setTimeout(hashHandler, 50);
            });
        }
    } 
```

HTML：

```
<a href="#sign-up" class="hash-modifier">sign up</a>
<a href="#login" class="hash-modifier">login</a> 
```

# c#-4.0 - 果园 1.6 中不显示导航菜单

> ID：13774882
> 
> 赞同：0
> 
> 时间：2012-12-08T05:43:29.640
> 
> 标签：c#-4.0, asp.net-mvc-4, orchardcms

我使用 codegen 在 orchard 1.6 中创建了一个新主题。创建主题后，我添加了导航部分，`Layout.cshtml`如下所示：

```
@if (Model.Navigation != null) {

    @Zone(Model.Navigation)
} 
```

但是导航菜单没有显示。我是果园的新手，所以任何建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T06:45:50.123

菜单是一个小部件。转到小部件管理屏幕并将其添加到您的导航区域。

# java - STAX API 读取二进制数据

> ID：13774883
> 
> 赞同：1
> 
> 时间：2012-12-08T05:43:36.757
> 
> 标签：java, binary-data, stax

我正在使用 STAX 事件 API 读取从 SOAP 调用接收到的二进制数据，并希望将其流式传输给消费者。来自 SOAP 调用的 XML 有效负载如下所示：

```
 .........
    <BinaryObject mimeCode="text/xml">PHNvYXAtZW52OkVudmVsb3BlIHhtbG5zOnNvYXAtZW52PSJodHRwOi8vc
         2NoZW1hcy54bWxzb2FwLhm9yZy9zb2FwL2VudmVsb3BlLyI+DQogICA8c29hcC1lbnY6SGVhZGVy
         Lz4NCiAgIDxzb2FwLWVudjpCb2R5Pg0KICAgICAgPG5tOkF0dGFjaG1lbnRGb2xkZXJEb2N1bWVudE
         ZpbGVDb250ZW50QnlJRFJlc3BvbnNlX3N5bmMgeG1sbnM6bm09Imh0dHA6Ly9zYXAuY29tL3hpL1NB
         UEdsb2JhbDIwL0dsb2JhbCIgeG1sbnM6cHJ4PSJ1cm46c2FwLmNvbTpwcm94eTpISlc6LzFTQUkvVE
         FTMEIzNDE4MTJBNTc5MDUyM0I5RTU6ODA0Ij4NCiAgICAgICAgIDxBdHRhY..... </BinaryObject> 
```

以下是我用于解析数据并将数据发送给消费者的 java 代码

```
 XMLInputFactory inputFactory = XMLInputFactory.newInstance();
    inputFactory.setProperty(XMLInputFactory.IS_COALESCING, true);

    InputStream in;

    try {

        in = new ByteArrayInputStream(response.getBytes());

        XMLEventReader eventReader;
        eventReader = inputFactory.createXMLEventReader(in);

        while (eventReader.hasNext()) {
            XMLEvent event = eventReader.nextEvent();

            // Start element
            if (event.isStartElement()) {
                StartElement startElement = event.asStartElement();

                if (startElement.getName().getLocalPart().toString()
                        .equals("BinaryObject")) {

                    Iterator<Attribute> attributes = startElement
                            .getAttributes();

                    while (attributes.hasNext()) {
                        Attribute attribute = attributes.next();

                        if (attribute.getName().toString()
                                .equals("mimeCode")) {
                            mimeType = attribute.getValue();
                        }
                    }

                    event = eventReader.peek();

                    if (event.isCharacters()) {
                        event = eventReader.nextEvent();
                        content = event.asCharacters().getData();
                    }
                }
            }
        }

    } catch (XMLStreamException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    m_servletResponse.setContentType(mimeType);
        m_servletResponse.getWriter().print(javax.xml.bind.DatatypeConverter
                .printBase64Binary(content.getBytes())); 
```

此代码存在多个问题：

1.  对于较大的文件（> 1 MB），我收到 StackOverflow 错误

2.  即使对于较小的文件，当我尝试使用 png 文件时，我也会收到文件无效的错误（在消费者处）。

我该如何克服这些问题？

PS：我是第一次使用 STAX ！！

****==================== 编辑：====================******

 **根据下面 Evgeniy 的建议，我现在可以处理小文件（例如 PNG）。但是，对于大于 1 MB 的大型 PDF 文档，我会收到以下错误。关于这里出了什么问题的任何想法？

2012 12 09 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null#线程“http-bio- 8041-exec-9" | 2012 12 09 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null#java.lang.StackOverflowError| 2012 年 12 月 9 日 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null# 在 com.sun.org.apache .xerces.internal.impl.XMLScanner.isInvalid(XMLScanner.java:1334)| 2012 年 12 月 9 日 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null# 在 com.sun.org.apache .xerces.internal.impl.XMLScanner.scanCharReferenceValue(XMLScanner.java:1294)| 2012 年 12 月 9 日 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null# 在 com.sun.org.apache .xerces。internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3024)| 2012 年 12 月 9 日 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null# 在 com.sun.org.apache .xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2919)| 2012 年 12 月 9 日 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null# 在 com.sun.org.apache .xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3059)| sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2919)| 2012 年 12 月 9 日 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null# 在 com.sun.org.apache .xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3059)| sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2919)| 2012 年 12 月 9 日 06:50:19#+00#ERROR#System.err##anonymous#http-bio-8041-exec-9##seodportal#seodportal#web#null#null# 在 com.sun.org.apache .xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3059)|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:30:18.957

首先，`XMLEventReader`是专为特殊用途而设计的，`XMLStreamReader`取而代之。这是一个工作示例

```
 XMLInputFactory inputFactory = XMLInputFactory.newInstance();
        inputFactory.setProperty(XMLInputFactory.IS_COALESCING, true);
        InputStream in = new ByteArrayInputStream(response.getBytes());
        XMLStreamReader xr = inputFactory.createXMLStreamReader(in);
        while (xr.hasNext()) {
            int next = xr.next();
            if (next == XMLStreamConstants.START_ELEMENT) {
                if (xr.getLocalName().equals("BinaryObject")) {
                    String mimeCode = xr.getAttributeValue(null, "mimeCode");
                    if (mimeCode.equals("text/xml")) {
                        xr.next();
                    // for efficiency we can access xr inner buffer chars directly
                    char[] b = xr.getTextCharacters();
                    int textStart = xr.getTextStart();
                    int textLength = xr.getTextLength();
                    // or simply get it as String  
                    String text = xr.getText();
                    // in this example I will use JDK's internal decoder com.sun.org.apache.xerces.internal.impl.dv.util.Base64                     
                    byte[] bytes = new Base64().decode(text);

                    }
                }
            }
        } 
```**

# c# - 允许一个“。”值c#的文本框验证

> ID：13774890
> 
> 赞同：1
> 
> 时间：2012-12-08T05:45:00.013
> 
> 标签：c#, .net, winforms, textbox

我想要文本框验证只允许一个`.`值和一个数字。意味着我的文本框值应该只采用数字和一个`.`值。值应该是 123.50。我正在使用代码在我的价值结束时添加`.oo`或`.50`价值。我的代码是

```
double x;
double.TryParse(tb.Text, out x);
tb.Text = x.ToString(".00"); 
```

它从键盘上获取所有键，但我只想获取数字和一个`.`值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T06:02:59.593

为您的文本框添加一个[Control.KeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)事件处理程序。

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!char.IsControl(e.KeyChar))  //bypass control keys
    {
        int dotIndex = textBox1.Text.IndexOf('.');
        if (char.IsDigit(e.KeyChar))     //ensure it's a digit
        {   //we cannot accept another digit if
            if (dotIndex != -1 &&  //there is already a dot and
                //dot is to the left from the cursor position and
                dotIndex < textBox1.SelectionStart &&
                //there're already 2 symbols to the right from the dot
                textBox1.Text.Substring(dotIndex + 1).Length >= 2)
            {
                e.Handled = true;
            }
        }
        else //we cannot accept this char if
            e.Handled = e.KeyChar != '.' || //it's not a dot or
                        //there is already a dot in the text or
                        dotIndex != -1 ||   
                        //text is empty or
                        textBox1.Text.Length == 0 || 
                        //there are more than 2 symbols from cursor position
                        //to the end of the text
                        textBox1.SelectionStart + 2 < textBox1.Text.Length;
    }
} 
```

您可以通过设计器或在您的构造函数中执行此操作，如下所示：

```
public Form1()
{
    InitializeComponent();
    //..other initialization
    textBox1.KeyPress += new KeyPressEventHandler(textBox1_KeyPress);
} 
```

我还添加了几项检查以确保您不仅可以在文本末尾插入数字，还可以在任何位置插入数字。与点相同。它控制您从点右侧不超过 2 位数字。我使用[TextBox.SelectionStart 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectionstart.aspx)来获取光标在文本框中的位置。查看此线程以获取更多信息：[如何在文本框中找到光标的位置？](https://stackoverflow.com/questions/526540/how-do-i-find-the-position-of-a-cursor-in-a-text-box-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-14T16:30:02.390

只需在 textBox 的 keyPress 事件中，您就可以这样做......

```
 e.Handled = !char.IsDigit(e.KeyChar)&&(e.KeyChar != '.') && !char.IsControl(e.KeyChar);
        if ((e.KeyChar == '.') && ((sender as TextBox).Text.IndexOf('.') > -1))
        {
            e.Handled = true;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:43:19.337

试试这个

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsControl(e.KeyChar)
               && !char.IsDigit(e.KeyChar)
               && e.KeyChar != '.')
            e.Handled = true;

        // only allow one decimal point
        if (e.KeyChar == '.'
            && textBox1.Text.IndexOf('.') > -1)
            e.Handled = true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T08:18:58.613

试试这个代码，只需替换你想要的输入类型'validinpu'字符串。

```
try
{
    short charCode = (short)Strings.Asc(e.KeyChar);
    string validinput = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-0123456789 .";
    if (Strings.InStr(validamt, Conversions.ToString(Strings.Chr(charCode)), Microsoft.VisualBasic.CompareMethod.Binary) == 0)
    {
        charCode = 0;
    }
    if (charCode == 0)
    {
        e.Handled = true;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-21T23:09:57.063

**另一个例子 ，**

```
 private void txtPrice_KeyPress(object sender, KeyPressEventArgs e)
    {
         // To disallow typing in the beginning writing
        if (txtPrice.Text.Length == 0)
        {
            if (e.KeyChar == '.')
            {
                e.Handled = true;
            }
        }
        if (!char.IsDigit(e.KeyChar) && e.KeyChar != 8 && e.KeyChar != 46)
        {
            e.Handled = true;
        }
        if (e.KeyChar == '.' && txtPrice.Text.IndexOf('.') > -1)
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-21T03:04:29.833

也试试这个短的

```
e.Handled = (!(e.KeyChar == (char)Keys.Back || e.KeyChar == '.')); //allow  dot and Backspace
e.Handled = (e.KeyChar == '.' && TextBox1.Text.Contains(".")); //allow only one dot 
```

这个例子只允许一个**点**和**退格**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-25T12:09:02.587

```
 if (textBox.Text!="")
        {
            string txt = textBox.Text;
            if (e.KeyChar.ToString().Any(Char.IsNumber) || e.KeyChar == '.')
            {
                textBox.Text = rate;
            }
            else
            {
                MessageBox.Show("Number Only", "Warning");
                textBox.Text = "";
            }
        } 
```

我测试过的代码

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-08T09:33:37.110

```
if(e.KeyChar.Equals('\b'))
 {
  e.Handled = false;
 }
else
 if (!char.IsControl(e.KeyChar)
           && !char.IsDigit(e.KeyChar)
           && e.KeyChar != '.')
  {
        e.Handled = true;
  }
 else
    // only allow one decimal point
    if (e.KeyChar == '.'
        && textBox1.Text.IndexOf('.') > -1)
  {        
    e.Handled = true;  
  } 
```

# javascript - jQuery单选按钮值验证

> ID：13774893
> 
> 赞同：2
> 
> 时间：2012-12-08T05:45:35.943
> 
> 标签：javascript, jquery, html

我在表单中使用它来检查单选按钮组是否具有特定值（是/否）。其中之一的 HTML 是：

```
<form id="registerHere">
<div class="control-group">
<label class="radio">
    <input type="radio" value="Yes" name="freemedia">
    Yes
    </label>
    <label class="radio">
    <input type="radio" value="No" name="freemedia" checked="checked">
    No
    </label>
</div></form> 
```

我正在使用以下 JS（包括 jQuery.validate.js）：

```
<script type="text/javascript">
  $(document).ready(function(){});
$("#registerHere").validate({
            rules:{
                freemedia:{
                        required:true,
                        equalTo: "Yes"
                    },
                  },
            messages:{
                freemedia:{
                    required:"Please select",
                    equalTo:"Please apply to the 'freemedia' group first.</a>"
                },
                    },
        });
    });
  </script> 
```

但是，它没有正确检查值，因为它总是向我显示消息，无论是否选中“是”或“否”。

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T07:12:56.077

我清理了你的一些 jquery，你在那里有一些错误。

此外，在插件中挖掘我注意到您可以使用“equalTo”参数来指定需要哪个控件。它只是使用 'equalTo' 作为查询的选择器。因此，如果您将“equalTo”设置视为 jquery 选择器，它应该可以工作。这可能有点麻烦，但我让它工作了。

您需要做的就是为您的单选按钮分配一个 id，您应该一切顺利

```
<div class="control-group">
        <label class="radio">
            <input id="chkYes" type="radio" value="Yes" name="freemedia" />
            Yes
        </label>
        <label id="chkNo" class="radio">
            <input type="radio" value="No" name="freemedia" />
            No
        </label>
        <input type="submit" value="Submit" />
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#registerHere").validate({
                rules:
                {
                    freemedia:
                    {
                        required: true,
                        equalTo: "#chkYes"
                    }
                },
                messages:
                {
                    freemedia:
                    {
                        required: "Please select",
                        equalTo: "Please apply to the 'freemedia' group first."
                    }
                }
            });
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:23:05.513

在 jquery 验证插件中，“equalTo”用于比较字段之间的值，而不是在同一个字段上。（如果有人对此了解更多，请告诉我。）
您可以将自定义方法添加到其中。

```
$.validator.addMethod("check_for_yes", function(value, element) {
  return $('.freemedia').val() != "Yes"
}, "* Please apply to the 'freemedia' group first."); 
```

验证 -

```
rules : {
 freemedia : {
     check_for_yes: true
 }
} 
```

**或者**

您可以通过显示警报来检查单选按钮的 Jquery 单击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:36:57.803

您想检查在提交表单时选择的值，这是一个很好的方法提供一个预定义的选定单选按钮，然后在表单提交任务时检查选定的单选，这里做了什么

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<input type="radio" name="sex" value="Male" checked>Male</input>
<input type="radio" name="sex" value="Female">Female</input>
<input type="radio" name="sex" value="Unknown" >Unknown</input>

<div onclick="CheckMe();"> check Selected Radio button</div>
</body>
<script>
function CheckMe()
{
alert("value selected "+$('input:radio[name=sex]:checked').val());
}
</script>
</html> 
```

现在假设您默认没有选择任何单选按钮，那么您可以检查用户是否选择了任何单选按钮，如果选择了它是什么？以下代码可帮助您做到这一点

```
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<input type="radio" name="sex" value="Male">Male</input>
<input type="radio" name="sex" value="Female">Female</input>
<input type="radio" name="sex" value="Unknown">Unknown</input>

<div onclick="CheckMe();"> check Selected Radio button</div>
</body>
<script>
function CheckMe()
{
if ($('input:radio[name=sex]:checked').val())
alert("value selected "+ $('input:radio[name=sex]:checked').val());
else
alert("Please select Radio button");
}
</script>
</html> 
```

享受..！

# ajax - 带有 AngularJS 的门户类型应用程序（多个独立应用程序）

> ID：13774903
> 
> 赞同：9
> 
> 时间：2012-12-08T05:47:33.090
> 
> 标签：ajax, angularjs, portal

我们正在尝试创建具有多个/独立“子应用程序”的门户类型应用程序。假设所有子应用程序都是用 Angular 编写的，那么实现以下目标的好模式是什么。

1.  每个应用程序都可以相互独立地开发和部署。
2.  它们共享一个通用的身份验证服务，它们可以共享通用库（指令、过滤器等）。
3.  在任何给定时间，只有一个应用程序可见且处于活动状态。每个子应用的范围是相互隔离的。
4.  当用户在子应用程序之间移动时，只要用户不刷新页面或访问另一个静态链接，该状态就会保持。（我认为这是 Angular 内置的，可能不需要特别努力）
5.  每个子应用程序将有多个视图（它将有自己的菜单）。根据可用的子应用程序，将有一个顶部菜单。理想情况下，顶部菜单是根据部署的子应用程序动态构建的。也许有一个服务器端组件（服务器检测文件夹结构等并确定部署了哪些应用程序并将必要的 js 代码注入页面）。

鉴于 AngularJs 没有多级视图结构，我正在考虑在不同的 div 上使用多个 ng-app 声明，然后使用 $window 范围来存储活动应用程序的键并隐藏不活动的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:51:17.137

您的（相当开放的）问题没有简单的答案，但关于 $route 和 ngView 的限制，我在使用源自此的技术方面取得了巨大成功：[http ://www.bennadel.com/blog/2420-Mapping -AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T15:48:37.690

这也是我一直在考虑尝试实施的事情。虽然我没有完整的工作解决方案，但我相信这种类型的门户应用程序将在同一页面上包含多个 Angular 应用程序。

门户应用程序将是主页上的传统 ng-app 指令，“portlet”将动态创建并在子视图 div 上手动引导 Angular 应用程序。您可以通过将提供这些功能的门户服务（包含在它们自己的模块中）注入手动引导的 portlet 应用程序来共享数据、状态、身份验证、个性化等。

棘手的部分是门户应用程序如何发现 portlet 应用程序并提供它们的 angular 模块，因为知道这些应用程序将是具有自己的 url 的独立部署的 Web 应用程序。

关于服务数据是否在应用程序之间是通用的，或者您是否需要尝试通过门户服务（如数据管理器）利用 HTML5 本地存储，我仍然有一些问题。

# java - 内存分配 Java

> ID：13774904
> 
> 赞同：3
> 
> 时间：2012-12-08T05:47:49.963
> 
> 标签：java, memory-management

如果我们有一个包含整数 i 的 A 类，而 B 类也继承了一个整数 i 的 A 类。在运行时将为 i 分配多少内存槽？几天前在我的考试中提出了这个问题，这就是我所记得的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:53:06.797

两个实例变量都将分配内存。它们是单独的实例变量，彼此无关，只是它们共享相同的名称。

与问题没有直接关系，但是如果超类的变量不是私有的，则您所描述的情况称为*遮蔽*-如果仅由变量名引用，则子类的变量会“隐藏”超类的变量。您将不得不使用`super.i`它来引用它。

# rename - 解压缩文件并用 zip 文件名重命名？

> ID：13774905
> 
> 赞同：1
> 
> 时间：2012-12-08T05:47:54.553
> 
> 标签：rename, unzip

我需要使用 7zip 解压缩文件并重命名解压缩的文件。

假设 zip 文件是`3457.zip`并且它包含`w.dat`和`q.doc`. 我想将`w.dat`and重命名`q.doc`为`3457.dat`and `3457.doc`。

如何使用 bat 文件实现这一点？

# javascript - javascript 正则表达式不适用于句子字符串

> ID：13774908
> 
> 赞同：0
> 
> 时间：2012-12-08T05:48:28.467
> 
> 标签：javascript, jquery

我正在编写一个将字符串作为参数的函数。然后如果字符串以大写字母开头，则返回true，否则返回false。但是我当前的函数只适用于一个单词字符串，我希望它同时适用于一个单词和一个完整的句子。如何改进我的代码以实现这一目标？其次，当数字在句子中传递时，它不应该工作。我怎样才能做到这一点？

这是我的代码

```
function takeString (str) {
var regex = /^[A-Za-z]+$/;

if (str.match(regex)) {

   if (str.charAt(0) === str.toUpperCase().charAt(0)) {
      alert('true');
      return true;
   } else {
      alert('false');
      return false;
   }

} else {
    alert('Only letters please.');
}
}

takeString('This is'); // shows Only letters please which is wrong. this should work
takeString('String); // returns true which right
takeString('string'); // returns false which is right
takeString('This is 12312321'); // shows only letters please which is right bcoz it has digits
takeString('12312312'); // show Only letters please which is right. 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:51:02.053

空格不是字母。您必须将它们添加到您的字符集中：

```
> 'This is a string'.match(/^[A-Za-z]+$/);
null
> 'This is a string'.match(/^[A-Za-z\s]+$/);
["This is a string"] 
```

`\s`匹配所有空格，因此如果您不想匹配制表符，请`\s`用空格替换。

这是您的代码的稍微精简的版本：

```
function takeString(str) {
    return str.match(/^[A-Z][A-Za-z ]*$/);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:33:42.737

除了 Blender 给出的正则表达式建议，您还需要执行以下操作（为了满足检查每个单词的需要......假设单词仅以空格或制表符分隔：

*   使用 split 函数将字符串分解为单词（ var mywords = str.split(/\s+/) ）
*   遍历 split 返回的 mywords 数组，根据正则表达式检查每个数组元素
*   如果正则表达式不匹配，则返回错误
*   如果匹配每个单词，则返回成功

    取字符串（字符串）{

    var mywords = str.split(/\s+/); for (i = 0; i < mywords.length; i++) { if (str.match(/^[AZ][A-Za-z]*$/) != true) { return false; } } 返回真；}

（有人需要检查我的js ...）

# css - 如何在无序列表中将边框样式属性设置为无？

> ID：13774909
> 
> 赞同：0
> 
> 时间：2012-12-08T05:48:39.170
> 
> 标签：css, navigation, border

我正在用 css 设计一个下拉列表这是我的 html 代码：

![在此处输入图像描述](../Images/0c2f67a90f46e16c44cf7e69ffb524d2.png)

> 我已将每个`li a`属性border-right 设置为`border-right:1px dashed silver`；我想删除最后一个`li a`元素的那个属性

这是CSS代码：

```
 #navigation
 {
  display:inline-table;
  text-align:center;
  background:silver;
 }
#navigation li
 {
 float:left;
 list-style:none;
 padding:2px 10px 2px 10px;
 }
#navigation a 
 {
 display:block;
 text-decoration:none;
 color:green;
 font-weight:bold;
 padding:5px;
 border-right:1px dashed green;
 }
.noBorder
{
display:block;
text-decoration:none;
color:red;
font-weight:bold;
padding:5px;
border:0px;
}
#navigation a:hover
{
color:yellow;
background:black;
 } 
```

我想删除最后一个列表的右边框，`software Developments` 所以我尝试过 `noBorder`上课。但不能给出任何解决方案请任何人告诉我提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:52:56.780

不确定您在说哪个边框，但如果您想从最后一个边框移除，请尝试此操作`li`

```
.noBorder {
   border-right: none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:50:29.410

你可以这样做

```
border:  none !important; 
```

它将删除所有边框

仅尝试删除右边框

```
border-right: none !important; 
```

**好读**

[**!important 对性能有害吗？**](https://stackoverflow.com/questions/13743671/is-important-bad-for-performance/13745254)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T05:55:09.093

试试这个，它会工作

```
.noBorder
{
border-right:0px!important;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-08T05:50:05.470

```
#navigation {
    display: inline - table;
    text - align: center;
    background: silver;
}
#navigationli {
    float: left;
    list - style: none;
    padding: 2px 10px 2px 10px;
}
 #navigationa {
    display: block;
    text - decoration: none;
    color: green;
    font - weight: bold;
    padding: 5px;
    border - right: 1px dashed green;
}
 .noBorder {
    display: block;
    text - decoration: none;
    color: red;
    font - weight: bold;
    padding: 5px;
    border: 0px;
}
 #navigationa: hover {
    color: yellow;
    background: black;
} 
```

# c++ - GCC C++ pow 精度

> ID：13774912
> 
> 赞同：12
> 
> 时间：2012-12-08T05:49:21.367
> 
> 标签：c++, gcc, mingw, pow, cmath

所以我参加了一场计算比赛，我注意到了一个奇怪的错误。pow(26,2) 总是返回 675，有时返回 674？即使正确答案是 676。这类错误也会发生在 pow(26,3)、pow(26,4) 等上。经过比赛后的一些调试，我相信答案与 int 向下舍入的事实有关。有趣的是，我以前从未发生过这种错误。我的计算机在 Windows 8 上运行 mingw。GCC 版本相当新，我相信 2-3 个月大。但我发现，如果我将 o1/o2/o3 优化标志打开，这些错误会奇迹般地消失。pow(26,2) 总是会得到 676 又名正确答案 谁能解释为什么？

```
#include <cmath> 
#include <iostream> 

using namespace std; 
int main() { 
    cout<<pow(26,2)<<endl; 
    cout<<int(pow(26,2))<<endl; 
} 
```

双打的结果很奇怪。

```
double a=26; 
double b=2; 
cout<<int(pow(a,b))<<endl; #outputs 675 
cout<<int(pow(26.0,2.0))<<endl; # outputs 676 
cout<<int(pow(26*1.00,2*1.00))<<endl; # outputs 676 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T08:20:33.433

该函数`pow`对两个浮点值进行操作，并且可以将一个提升到另一个。这是通过近似算法完成的，因为它需要能够处理从最小到最大的值。

由于这是一个近似算法，它有时会得到一些错误的值。在大多数情况下，这是可以的。但是，如果您有兴趣获得准确的结果，请不要使用它。

我强烈建议不要将它用于整数。如果第二个操作数是已知的（在这种情况下为 2），用执行速度更快并返回正确值的代码替换它是微不足道的。例如：

```
template<typename T>
T square(T x)
{
  return x * x;
} 
```

`pow`回答实际问题：当一个或两个参数已知时，一些编译器可以用其他代码替换调用，或者将其全部消除。这解释了为什么你会得到不同的结果。

# java - 不使用摆动将图像添加到面板

> ID：13774913
> 
> 赞同：-1
> 
> 时间：2012-12-08T05:49:33.657
> 
> 标签：java, image, awt, bufferedimage, java-2d

我们如何在面板中添加位图图像，然后获取图像正在使用的图形，并告诉面板使用图像内部的相同图形绘制一条线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:47:34.437

基本绘制是通过 Swing 组件`paintComponent`方法完成的。

您最好的选择是使用`ImageIO`API 加载图像...

```
BufferedImage image;

public void loadImage() throws IOException {
    image = ImageIO.read(...);
    // ImageIO can read a image from a file or a URL or a ImageInputStream
} 
```

然后简单地绘制图像......

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(image, 0, 0, this);
    // Now you can continue drawing ontop of it...
    g.setColor(Color.RED);
    g.drawLine(0, 0, image.getWidth(), image.getHeight());
} 
```

您可能想阅读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [使用图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

# php - 没有得到结果

> ID：13774916
> 
> 赞同：-2
> 
> 时间：2012-12-08T05:50:07.280
> 
> 标签：php

我正在尝试连接到数据库，但不知道这个有什么问题。代码是这样的。请帮助我对php很陌生。:( db_config.php

```
<?php define('DB_USER', "root");
      define('DB_PASSWORD', "database password");
      define('DB_DATABASE', "ews_app");
      define('DB_SERVER', "Im using the 'drupal' for webhosting should I give server address or localhost");
 ?> 
```

**db_connect.php**

```
 <?php

    class DB_CONNECT {

    function __construct() {
        $this->connect();
     echo "<p>server connected</p>";
    }
    function __destruct() {
        $this->close();
    }
    function connect() {

        require_once __DIR__ . '/db_config.php';

        $con = mysql_connect(DB_SERVER, DB_USER, DB_PASSWORD) or die(mysql_error());

        $db = mysql_select_db(DB_DATABASE) or die(mysql_error()) or die(mysql_error());

        return $con;
    }

    function close() {

        mysql_close();
    }

}

?> 
```

一旦连接到数据库，它应该连接打印服务器。是否需要对其进行任何修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:52:00.620

您似乎从未实例化过该对象，因此构造函数永远不会运行，因此当然没有建立任何连接，因此您不会得到任何输出。

尝试添加`$connection = new DB_CONNECT()`

# facebook - facebook 邀请朋友 - 跟踪推荐人

> ID：13774918
> 
> 赞同：0
> 
> 时间：2012-12-08T05:50:41.727
> 
> 标签：facebook, facebook-graph-api

我计划创建一个 facebook 应用程序，其中用户使用 fb API 邀请他/她的 facebook 朋友，当那个朋友/s 响应邀请并登陆应用程序时，我想跟踪我的 fb 朋友中谁将我推荐给这个应用程序. 简而言之，我想问是否有可能在 facebook 上我们可以跟踪邀请朋友到应用程序的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:08:28.680

[我发现的唯一解决方案是使用多朋友选择器](https://developers.facebook.com/docs/guides/games/custom-multi-friend-selector/)跟踪用户邀请的朋友

防止其他用户在 7 天内邀请同一朋友。

如果朋友注册，则将其归因于最后一个向他/她发送邀请的用户。

问题在于它不是 100% 准确的。我也在寻找更好的解决方案。

# flash - 错误 #1006：值不是

> ID：13774919
> 
> 赞同：0
> 
> 时间：2012-12-08T05:50:43.973
> 
> 标签：flash

我正在尝试为我的一年级班级创建一个简单的单词生成器游戏。我不断收到此错误消息，但不理解 generateWord() 消息。

> TypeError：错误 #1006：值不是函数。在 COPYMakeAWord_fla::MainTimeline/generateWord()

这是我正在使用的脚本：

```
import flash.events.MouseEvent;

wordGenerator.addEventListener(MouseEvent.MOUSE_UP,generateWord);

function generateWord(event:MouseEvent):void
{

    var prefix = new Array("bl","br","c","ch","chr","d","dr","f","fl","fr","g","gl","gr","h","j","k","kl","kr","kn","l","m","n","p","pl","pr","r","s","sn","sk","sr","sl","sh","sp","spr","sw","t","tr","th","thr","tw","v","vr","w","wr","y","z");
    var suffix = new Array("ast","awe","age","ade","abe","ape","apt","ab","ad","aff","ag","ack","an","ane","ame","am","ap","ar","ax","aw","eb","ed","ege","eke","ell","ele","em","eme","en","ene","ent","ept","ere","est","ese","ern","ert","eve","ew","ex","ext","eye","eze","ib","id","iff","ig","ik","ike","ill","im","ime","in","ine","ip","ipe","ir","ire","is","ise","ist","ing","ony","unk","ance","ull","all","ell","oll","ub","ob","ab","un","on","an","uck","it","ass","oss","orn","ard","ord","old","ot","at","ut","arm","it","ite","ive","iwe","iz","ize","ob","obe","od","ode","ioff","og","oge","ook","ood","oon","oof","ool","oom","oon","oop","oot","ooth","oonth","onk","ont","onth","one","ome","op","on","om","ope","or","or","ore","oss","ost","ot","ote","ove","ow","owe","oy","ub","ube","ud","ude","uft","ug","uge","uke","ull","ule","ult","ulp","ump","ulm","un","une","unt","ume","up","upe","upt","ure","us","use","ust","ut","ute","uve");

    var wordStart = prefix[Math.floor(Math.random() * prefix.length)];
    var wordEnd = suffix[Math.floor(Math.random() * prefix.length)];

    newText.text(wordStart+wordEnd);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:20:11.677

假设**newText**是一个 TextField，试试这个：

```
 newText.text = wordStart+wordEnd; 
```

该错误是有道理的，因为**.text**在这里不是一个函数，而是一个属性。

# hibernate - 尝试指定要检索的字段时，Hibernate 出现奇怪的错误

> ID：13774922
> 
> 赞同：0
> 
> 时间：2012-12-08T05:51:11.517
> 
> 标签：hibernate, hql

我试图在 HQL（选择）中指定我想要的字段。但是当我这样做时，我不断遇到这个奇怪的问题。

**错误信息**

```
java.lang.NumberFormatException: For input string: "staffId"
    java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    java.lang.Integer.parseInt(Integer.java:492)
    java.lang.Integer.parseInt(Integer.java:527)
    javax.el.ArrayELResolver.coerce(ArrayELResolver.java:166)
    javax.el.ArrayELResolver.getValue(ArrayELResolver.java:46)
    org.apache.jasper.el.JasperELResolver.getValue(JasperELResolver.java:104)
    org.apache.el.parser.AstValue.getValue(AstValue.java:183)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:1026)
    org.apache.jsp.views.search.SearchResults_jsp._jspx_meth_c_005fforEach_005f0(SearchResults_jsp.java:209)
    org.apache.jsp.views.search.SearchResults_jsp._jspx_meth_c_005fif_005f0(SearchResults_jsp.java:165)
    org.apache.jsp.views.search.SearchResults_jsp._jspService(SearchResults_jsp.java:96)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
    org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
    org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
    org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)
    org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)
    org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)
    org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)
    org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)
    org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
    org.apache.jsp.views.templates.Layout_jsp._jspx_meth_tiles_005finsertAttribute_005f2(Layout_jsp.java:344)
    org.apache.jsp.views.templates.Layout_jsp._jspService(Layout_jsp.java:182)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)
    org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
    org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

**我的 HQL**（如您所见，它当前设置为给我错误的那个。但被注释掉的那个可以正常工作）

```
 //SQL = "from Staff where (surnameSearch is not null) and not (nvl(teleDirectory,'xxx') IN ('N','S','D')) and not (telephoneNumber IS NULL AND alias IS NULL) and (aliasList = 'Y' OR (teleDirectory IN ('A','B'))) and ((nvl(systemIdEnd,sysdate+1) > SYSDATE and entityType = 'P') or (entityType = 'N')) and (departmentSearch NOT like 'SPONSOR%')";
    SQL = "select staffId, parentId, entityType, title, firstname, surname, telephoneNumber, department, role from Staff where (surnameSearch is not null) and not (nvl(teleDirectory,'xxx') IN ('N','S','D')) and not (telephoneNumber IS NULL AND alias IS NULL) and (aliasList = 'Y' OR (teleDirectory IN ('A','B'))) and ((nvl(systemIdEnd,sysdate+1) > SYSDATE and entityType = 'P') or (entityType = 'N')) and (departmentSearch NOT like 'SPONSOR%')"; 
```

我也试过这个没有任何运气。

```
 SQL = "select staff.staffId, staff.parentId, staff.entityType, staff.title, staff.firstname, staff.surname, staff.telephoneNumber, staff.department, staff.role from Staff staff where (surnameSearch is not null) and not (nvl(teleDirectory,'xxx') IN ('N','S','D')) and not (telephoneNumber IS NULL AND alias IS NULL) and (aliasList = 'Y' OR (teleDirectory IN ('A','B'))) and ((nvl(systemIdEnd,sysdate+1) > SYSDATE and entityType = 'P') or (entityType = 'N')) and (departmentSearch NOT like 'SPONSOR%')"; 
```

**我的模型类的片段**

```
public class Staff {
    Integer pk;
    String staffId;
    String parentId;
    String entityType;
    String title;
    String firstname;
    String surname;
    String telephoneNumber;
    String department;
    String role;

    String alias;
    String aliasList;
    String departmentSearch;
    String firstnameSearch;
    String roleSearch;
    String surnameSearch;
    String surnameLikeSearch;
    Date systemIdEnd;
    String teleDirectory;

    public Integer getPk() {
        return pk;
    }
    public void setPk(Integer pk) {
        this.pk = pk;
    }

    public String getStaffId() {
        return staffId;
    }
    public void setStaffId(String staffId) {
        this.staffId = staffId;
    } 
```

**我的 hbm XML 片段**

```
<hibernate-mapping>
    <class name="org.flinders.staffdirectory.models.database.Staff" table="teld_summary">
        <id name="pk" column="telsumm_pk" />
        <property name="staffId" column="telsumm_id" /> 
```

**我查看了我的 Oracle 数据库并确认“staffId”确实是字符串（在我的情况下为 varchar2）。**

你能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:01:46.400

您已映射`staffid`到列`telsumm_id`：

```
<property name="staffId" column="telsumm_id" /> 
```

这很可能`telsumm_id`是一个整数列，因为它的名称以“_id”结尾

# ruby-on-rails - form_tag 调用自定义方法？调用先创建

> ID：13774926
> 
> 赞同：0
> 
> 时间：2012-12-08T05:51:57.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图用来`<%= form_tag(hashtags_path, :method => :vote) do %>`调用自定义方法`def vote`，看来我已经完成了一半。它`def create`先调用然后调用`def vote`。我不希望它先运行创建，因为此时它会触发很多不需要的操作。

**hashtags_controller**

```
class HashtagsController < ApplicationController

    def home 

    end

    def vote
        redirect_to thanks_path
    end

    def show

    end

    def index

    end

    def create 
        Hashtag.pull_hashtag(params[:hashtag])
        @random_hashtag_pull = Hashtag.random_hashtags_pull
        respond_to do |format|
        format.html { redirect_to vote_path }
        format.js
    end
     end

end 
```

**_vote_tweets.html.erb**

```
<%= form_tag(hashtags_path, :method => :vote) do %>
<div id="hashtags" class="twitter-hashtag-voting-block-v1">
    <% @random_hashtag_pull.each do |hashtag| %>
    <div class="span4 twitter-spans-v1" id="<%= hashtag.id %>">
    <div id="tweet-block-v1" class="hashtag-tweet-database-container">
    <div class="tweet-block-border-v1">
    <div class="tweet-block-spacing-v1">
        <div class="twitter-block-author-v1">
            <a class="twitter-block-user-v1" target="_blank" href="https://twitter.com/<%= hashtag.from_user %>">
            <span class="twitter-author-image-v1"><img alt="" class="twitter-author-image-photo-v1" src="<%= hashtag.profile_image_url %>"></span>
            <span class="twitter-author-name-v1"><%= hashtag.from_user_name %></span>
            <span class="twitter-author-nickname-v1">@<%= hashtag.from_user %></span></a>
            <iframe class="twitter-follow-button-v1" scrolling="no" frameborder="0" src="//platform.twitter.com/widgets/follow_button.html#align=right&button=grey&screen_name=<%= hashtag.from_user %>&show_count=false&show_screen_name=false&lang=en" allowtransparency="true"></iframe>
        </div>
    <div class="twitter-text-container-v1">
        <p class="twitter-text-field-v1"><%= sanitize(auto_link(hashtag.text).html_safe, :suppress_no_follow => true) %></p>
    </div>
    <div class="twitter-footer-v1">
        <a class="twitter-view-details-v1" target="_blank"  href="https://twitter.com/<%= hashtag.from_user %>/statuses/<%= hashtag.tweet_id %>">
        <span class="tweet-date-v1"><%= hashtag.created_at.strftime("%d %b %Y") %></span></a>
        <span class="twitter-vote-button-v1"><%= submit_tag "Vote!", class: "btn btn-mini btn-primary" %></span>
        <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
        <ul class="twitter-intent-ul-v1">
        <li class="twitter-intent-li-v1"><a href="https://twitter.com/intent/tweet?in_reply_to=<%= hashtag.tweet_id %>" class="twitter-intent-tweet" title="Reply"></a></li>
        <li class="twitter-intent-li-v1"><a href="https://twitter.com/intent/retweet?tweet_id=<%= hashtag.tweet_id %>"  class="twitter-intent-retweet" title="Retweet"></a></li>
        <li class="twitter-intent-li-v1"><a href="https://twitter.com/intent/favorite?tweet_id=<%= hashtag.tweet_id %>"  class="twitter-intent-favorite" title="Favorite"></a></li>
        </ul>
        </div>
        </div>
        </div>
        </div>
        </div>
    <% end %>
</div>
<% end %> 
```

**路线.rb**

```
root :to => "hashtags#home"
  resources :hashtags do
    get 'vote', :on => :member
  end

  match '/vote', :to => 'hashtags#vote'

  match '/thanks', :to => 'pages#thanks' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:55:46.553

必须创建自定义路线

`match '/cast_vote', :to => 'hashtags#cast_vote'`

# php - Sandbox Paypal 工作正常，但 Live 不是

> ID：13774928
> 
> 赞同：0
> 
> 时间：2012-12-08T05:52:38.320
> 
> 标签：php, mysql, paypal

我正在将此类用于我正在为贝宝集成开发的网站以按月付款

[http://www.micahcarrick.com/php-paypal-ipn-integration-class.html][1]

它如何与我的沙盒帐户一起正常工作，但是当我将它与我的贝宝真实帐户一起使用时，它无法正常工作。我正在使用电子邮件和 ipn_log.txt 文件来记录结果，即使它有错误，但在 paypal LIVE 的情况下，它不会记录任何东西或邮件。我也在我的 Paypal 帐户上启用了 IPN。但由于资金不足，我无法测试我的 paypal live aaccount :(。这是我为 Paypal Sandbox 更改的代码，两者的 LIVE 休息是相同的。我还启用了我的 paypal我的真实帐户上的 IPN。

```
 // For Sandbox
        //$p->paypal_url = 'https://www.sandbox.paypal.com/cgi-bin/webscr';                     
       //testing paypal url
        $p->paypal_url = 'https://www.paypal.com/cgi-bin/webscr';     

       //In my class changing these lines 
       // open the connection to paypal
       $fp = fsockopen($url_parsed[host],"80",$err_num,$err_str,30); 

  //open the connection to sandbox
 // $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:57:00.877

发现了问题 - 我没有更改实时站点的通​​知 URL。

# c - 识别传递关系

> ID：13774929
> 
> 赞同：0
> 
> 时间：2012-12-08T05:52:40.603
> 
> 标签：c, algorithm, adjacency-matrix

我正在编写一个 C 程序来查找传递性。在二维数组中，如果 `adj[0][1] = 1` 和`adj[1][2] = 1`，我也想标记`adj[0][2]`为`1`。这应该适用于矩阵中的任何传递关系。

请为此提供一些代码。

```
 adj_matrix[j1][j2]=1;

    for(i=0;i<26;i++)
    {
        if (adj_matrix[i][j1])
        adj_matrix[i][j2]=1;

    }
    for(i=0;i<26;i++)
    {
        if(adj_matrix[j2][i])
        {
        adj_matrix[j1][i]=1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:42:06.870

你想要的是一个“传递闭包算法”

[Floyd-Warshall 算法](https://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)就是其中一个很好的例子，尽管还有很多（很多）其他算法，例如[Johnson 算法](https://en.wikipedia.org/wiki/Johnson%27s_algorithm)。在 Google Scholar 上进行快速搜索会为您指明其他一些来源和更多技术描述。

原始形式的 Floyd-Warshall 算法的代码（找到每个连接点之间的最短路径）是：

```
int dist[N][N];  // For some N
int i, j, k;
// Input data into dist, where dist[i][j] is the distance from i to j.
// If the nodes are unconnected, dist[i][j] should be infinity

for ( k = 0; k < N; k++ )
for ( i = 0; i < N; i++ )
for ( j = 0; j < N; j++ )
   dist[i][j] = min( dist[i][j], dist[i][k] + dist[k][j] ); 
```

为您的使用场景修改此代码给出：

```
int dist[N][N];  // For some N
int i, j, k;
// Input data into dist, where dist[i][j] is the distance from i to j.
// If the nodes are unconnected, dist[i][j] should be infinity

for ( k = 0; k < N; k++ )
for ( i = 0; i < N; i++ )
for ( j = 0; j < N; j++ )
   if(dist[i][k] && dist[k][j])
      dist[i][j] = 1; 
```

注意这里的下标顺序。具有此顺序的下标满足动态规划的标准，该标准确保路径逐渐改进并且始终是最优的。

时间复杂度为 O(N^3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T12:05:16.570

我相信这会奏效：

```
reachable_matrix = adj_matrix
length_of_path = 1

while(length_of_path < (N - 1)) {
    for(i = 0; i < N; ++i) {
        for(j = 0; j < N; ++j) {
            tmp_matrix[i][j] = 0;
            for(k = 0; k < N; ++k) {
                tmp_matrix[i][j] ||= reachable_matrix[i][k] && reachable_matrix[k][j]; // Can I reach from i to j through k?
            }
        }
    }
    reachable_matrix = tmp_matrix;
    length_of_path *= 2;
} 
```

正如理查德评论的那样，这相当于计算图的可遍历性。

您可以将其视为一个数字，表示从 from到`adj_matrix[i][j]`有多少​​条长度为 1 的路径。然后（这是 的次方的邻接矩阵）告诉您在任意两个两个节点之间至少有多少条长度路径。`i``j``adj_matrix ** l``l``l`

我的代码中的内部循环（使用变量 i、j 和 k 循环）基本上是乘以`reachable_matrix`by`reachable_matrix`并将其存储`tmp_matrix`在仅在其真值上。

外环保持平方`reachable_matrix`，而它被提升到的功率（我们检查的路径长度）小于`N - 1`. 停止`N - 1`就足够了，因为如果你有这个长度的路径，这意味着你正在访问图中的所有节点。具有更多步骤的路径必然包含循环。另一方面，我并没有完全执行二进制求幂以使事情变得简单（我认为它的效率会低一些，但我不确定）并且因为尝试更长的路径不会造成任何伤害。

总体而言，该算法的复杂度为 O(log(N) * N**3)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:47:11.360

请让我知道这是否正确。

```
for(i=0;i<26;i++) 
for(j=0;j<26;j++)
for(k=0;k<26;k++)
if(adj_matrix[i][j] && adj_matrix[j][k])
adj_matrix[i][k]=1; 
```

# google-maps - 来自 Google Api V3 的链接（网址）

> ID：13774930
> 
> 赞同：-2
> 
> 时间：2012-12-08T05:52:40.177
> 
> 标签：google-maps, google-maps-api-3

我正在制作一个使用 Google api V3 的简单应用程序，现在我希望它返回访问位置的 URI（链接），就像我们在 maps.google.com 中可以拥有的那样，以便我可以在社交网站上分享它们。所以我的问题是我们可以从 Google Maps Api V3 获取 URI 吗？有没有可用的参考资料？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:48:45.937

这是一个示例，包括街景。

加载相同的页面：

**博兹曼，蒙大拿州：** [http ://maps.forum.nu/v3/gm_streetview_search.html?lat=45.694919&lon=-111.046151&mz=13&h=-12.68061015763454&p=4.253080718403754&z=1.33](http://maps.forum.nu/v3/gm_streetview_search.html?lat=45.694919&lon=-111.046151&mz=13&h=-12.68061015763454&p=4.253080718403754&z=1.33)

**蒙大拿州加德纳：** [http ://maps.forum.nu/v3/gm_streetview_search.html?lat=45.031865&lon=-110.705513&mz=15&h=-12.68061015763454&p=4.253080718403754&z=1.33](http://maps.forum.nu/v3/gm_streetview_search.html?lat=45.031865&lon=-110.705513&mz=15&h=-12.68061015763454&p=4.253080718403754&z=1.33)

**双子瀑布，爱达荷州：** [http ://maps.forum.nu/v3/gm_streetview_search.html?lat=42.562840&lon=-114.460707&mz=15&h=51.68941136964531&p=-1.53​​8664446192028&z=1](http://maps.forum.nu/v3/gm_streetview_search.html?lat=42.562840&lon=-114.460707&mz=15&h=51.68941136964531&p=-1.538664446192028&z=1)

**内华达州拉斯维加斯：** [http ://maps.forum.nu/v3/gm_streetview_search.html?lat=36.100935&lon=-115.172642&mz=16&h=-72.40679016388508&p=4.677399100624243&z=1.67](http://maps.forum.nu/v3/gm_streetview_search.html?lat=36.100935&lon=-115.172642&mz=16&h=-72.40679016388508&p=4.677399100624243&z=1.67)

**加利福尼亚州旧金山（建筑物内）：** [http ://maps.forum.nu/v3/gm_streetview_search.html?lat=37.793204&lon=-122.420949&mz=18&h=-99.66403939054615&p=-2.922761229848498&z=1](http://maps.forum.nu/v3/gm_streetview_search.html?lat=37.793204&lon=-122.420949&mz=18&h=-99.66403939054615&p=-2.922761229848498&z=1)

请注意页面上的“指向此视图的链接”链接。

# android - 将毫秒与android中的数据进行比较

> ID：13774935
> 
> 赞同：4
> 
> 时间：2012-12-08T05:53:12.633
> 
> 标签：android, datetime, android-sqlite, milliseconds, android-date

我已经以**毫秒为单位**`data+time`保存在数据库（**`sq lite`**）中，现在我想从特定日期的 sq-lite 获取数据，并且我有这种格式的日期“ **2012 年 12 月 26 日**”，如何将其与**毫秒**进行比较。

 ******从数据库中获取数据的查询应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:13:30.850

您必须将毫秒转换为日期格式，然后比较两个日期

转换为日期格式

```
 public static String getDate(long milliSeconds, String dateFormat)
{`enter code here`
    // Create a DateFormatter object for displaying date in specified format.
    DateFormat formatter = new SimpleDateFormat(dateFormat);

    // Create a calendar object that will convert the date and time value in milliseconds to date. 
     Calendar calendar = Calendar.getInstance();
     calendar.setTimeInMillis(milliSeconds);
     return formatter.format(calendar.getTime());
} 
```

比较日期

```
SimpleDateFormat curFormater = new SimpleDateFormat("dd/MM/yyyy"); 
Date date1 = curFormater.parse(date1Str); 
Date date2 = curFormater.parse(date2Str); 
if (date1.before(date2)) 
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:14:59.893

我希望这对你有帮助

```
 public long getDateLong(String dateString, String format) throws ParseException
    {
        SimpleDateFormat f = new SimpleDateFormat(format);

        Date d = f.parse(dateString);

        return d.getTime();
    } 
```

//

```
 long timeMillis; // Your long time millis
     boolean compare = timeMillis > getDateLong("26-December-2012", "dd-MMMM-yyyy"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:02:58.687

只需`Calendar`使用数据库中的 timeInMilliseconds 数据创建一个新的。

因此，如果您有时间在一个名为的列中`date`并且数据在一个名为 myTable 的表中，则获取该查询的查询是：

```
select date from myTable ... other constraints 
```

在 android 中，只需使用从数据库中检索到的 long 值来构造一个新的 Calendar：

```
Calendar cal = new Calendar.getInstance();
cal.setTimeInMillis(timeInMsFromDatabase); 
```

一旦你有了一个对象，你就可以使用[方法](http://developer.android.com/reference/java/util/Calendar.html#get%28int%29)`Calendar`检索你想要的值。[`get(int field)`](http://developer.android.com/reference/java/util/Calendar.html#get%28int%29)

或者，您可以使用[`DateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html)该类。

说得通？******

# php - 如何更新脸书页面？

> ID：13774936
> 
> 赞同：0
> 
> 时间：2012-12-08T05:53:12.877
> 
> 标签：php, javascript, facebook

我是一名 PHP 开发人员，客户要求我使用不断变化的统计数据更新他们的 Facebook 业务页面。不是通过定期发布信息作为状态更新，而是像 AJAX 那样更新 Facebook 页面描述会更新页面查看计数器。这可能吗？你能指出我如何实现这一点的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:19:42.723

您将需要[验证](http://developers.facebook.com/docs/concepts/login/) 您的应用程序（[这也是很好的阅读这里](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)）并要求[扩展](http://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)权限，特别是`manage_pages`权限。

这允许您的应用程序[作为页面登录](http://developers.facebook.com/docs/howtos/login/login-as-page/)。

然后可以修改[页面的某些部分属性](http://developers.facebook.com/docs/reference/api/page/#attributes)。

[phpclasses.org](http://www.phpclasses.org/package/7700-PHP-Authorize-and-access-APIs-using-OAuth.html)上有一个很好的类可以帮助您使用 facebook 登录，尽管当您习惯它时，他们自己的[PHP SDK非常好。](http://developers.facebook.com/docs/reference/php/)

祝你好运！

# javascript - 未定义的数组元素

> ID：13774937
> 
> 赞同：1
> 
> 时间：2012-12-08T05:53:26.903
> 
> 标签：javascript, arrays, undefined

我在第 26 行收到“Uncaught TypeError: Cannot read property 'length' of undefined”。我看不到发生这种情况的原因，因为控制台将第 24 行记录为索引为 1 的数组，但第 25 行记录为未定义。

```
"use strict"
function findpath(G,si,di){
    //G is an array of nodes (with id, lat, lon)
    var P=[si];
    var C=[0,P];
    var M=[C];
    var O=[];
    var ctr=0;
    var done = false;
    var reached = false;
    var best = undefined;

    while(!done){
        ctr++;
        if( ctr > 100 ){
            alert("Sorry, can't find the destination.");
            return P;
        }

        for (var i=0;i<M.length;++i){
            console.log(P);
            console.log(C);
            console.log(M[i]);
            console.log(M[i[0]]);
            var last = M[i[1]].length;
            var v = M[i[1[last]]];

            //select a random neighbor...
            if( v.N.length === 0 ){
                alert("Wat?");
                return [];
            }
            else if( v.N.length === 1 ){
                break;
            }
            else if( v === di ){
                break;
            }
            else {
                for (var j=0;j<v.N.length;++j){
                    var temp = M[i];
                    O.push(temp[1].push(v.N[j]));
                    var dist = distance(v.lat,v.lon,v.N[j].lat,v.N[j].lon);
                    var temp2 = O.length-1;
                    O[temp2[0]]+=dist;
                    if (v.N[j]===di){
                        reached = true;
                        if (best === undefined){
                            console.log("ASSIGN");
                            best = O[temp2];
                        }
                        else {
                            if (O[temp2[0]]<best[0]) {
                                best = O[temp2];
                            }
                        }
                    }
                }
            }
        }
        M = O;
        var any = false;
        for (var i=0;i<M.length;++i) {
            if (M[i[0]]<best[0]) {
                any = true;
            }
        }
        if (!any) {
            done = true;
        }
    }

    //return the path
    return best[1];
}

function distance(x1,y1,x2,y2){
    return Math.sqrt(Math.pow((x2-x1),2)+Math.pow((y2-y1),2));
} 
```

输出：

```
Array[1]     findpath.js:22
Array[2]     findpath.js:23
Array[2]
   0: 0
   1: Array[1]
      0: 13
   length: 1
   __proto__: Array[0]
   length: 2
   __proto__: Array[0]     findpath.js:24
undefined findpath.js:25
Uncaught TypeError: Cannot read property 'length' of undefined    findpath.js:26 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:54:40.523

**编辑**- 根据您的评论，看起来您有一个数组数组，如果我理解正确，`M[i[1]]`应该是`M[i][1]`

* * *

你在检查

```
console.log(M[i[0]]); 
```

但随后访问

```
 var last = M[i[1]].length; 
```

似乎`M[i[0]]`包含一个有效的数组，但`M[i[1]]`没有。

我建议仔细查看您的`M`, 和`i`数组以找出`M[i[1]]`未定义的原因。

* * *

正如下面的评论所说，编辑`i`似乎是循环控制变量。你的意思是简单地打字`M[i]`吗？

# css - CSS下拉菜单 - 使孩子至少是父母的宽度

> ID：13774939
> 
> 赞同：4
> 
> 时间：2012-12-08T05:53:52.647
> 
> 标签：css, drop-down-menu

我有一个运行良好的三层 CSS 下拉菜单，但我目前正在为第二层和第三层列表项指定实际宽度。我一直在摆弄几个小时，试图让它看起来像我想要的那样，但没有成功。

我想要的是第二层中的项目的最小宽度等于其父项的宽度，如果项目的内容长于其父项的内容，则延伸超过该宽度。

我还希望第三层中的项目没有最小宽度，而是具有一个宽度，即该特定嵌套无序列表的最长列表项内容的宽度。

我当前的 HTML 和 CSS 在这里：http: [//jsfiddle.net/kBVYD/1/](http://jsfiddle.net/kBVYD/1/)

如果您只想查看代码，请查看 HTML：

```
<div id="menu1">
    <ul class="menu">
        <li><a class="haschild" title="" href="">Home</a>
            <ul class="sub-menu">
                <li><a class="haschild" title="" href="">Sub Link 1</a>
                    <ul>
                        <li><a title="" href="">Sub Sub Link 1</a></li>
                        <li><a title="" href="">Sub Sub Link 2</a></li>
                        <li><a title="" href="">Sub Sub Link 3</a></li>
                    </ul>
                </li>
                <li><a title="" href="">Sub Link 2</a></li>
                <li><a class="haschild" title="" href="">Sub Link 3</a>
                    <ul>
                        <li><a title="" href="">Sub Sub Link 1</a></li>
                        <li><a title="" href="">Sub Sub Link 2</a></li>
                        <li><a title="" href="">Sub Sub Link 3</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a class="haschild" title="" href="">About Us</a>
            <ul class="sub-menu">
                <li><a title="" href="">Sub Link 1</a></li>
                <li><a title="" href="">Sub Link 2</a></li>
                <li><a class="haschild" title="" href="">Sub Link 3</a>
                    <ul>
                        <li><a title="" href="">Sub Sub Link 1</a></li>
                        <li><a title="" href="">Sub Sub Link 2</a></li>
                        <li><a title="" href="">Sub Sub Link 3</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a class="haschild" title="" href="">Our Services Etc Etc Etc</a>
            <ul class="sub-menu">
                <li><a title="" href="">Sub Link 1</a></li>
                <li><a class="haschild" title="" href="">Sub Link 2</a>
                    <ul>
                        <li><a title="" href="">Sub Sub Link 1</a></li>
                        <li><a title="" href="">Sub Sub Link 2</a></li>
                        <li><a title="" href="">Sub Sub Link 3</a></li>
                    </ul>
                </li>
                <li><a class="haschild" title="" href="">Sub Link 3</a>
                    <ul>
                        <li><a title="" href="">Sub Sub Link 1</a></li>
                        <li><a title="" href="">Sub Sub Link 2</a></li>
                        <li><a title="" href="">Sub Sub Link 3</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <div class="clear"></div>
</div> 
```

这是CSS：

```
#menu1 *
{
    margin: 0;
    padding: 0;
}

#menu1 ul.menu
{
    float: left;
    font-family: "Arial", sans-serif;
    font-size: 14px;
    font-weight: bold;
    text-transform: uppercase;
}

#menu1 ul.menu li
{
    position: relative;
    float: left;
    list-style-type: none;
}

#menu1 ul.menu li a
{
    position: relative;
    display: block;
    line-height: 21px;
    font-size: 14px;
    padding: 14px 21px;
    text-decoration: none;
    z-index: 100;
}

#menu1 ul.menu > li:first-child > a
{
    border-left: 0;
}

#menu1 ul.menu > li:last-child > a
{
    border-right: 0;
}

/** Sub Menu - Tier 2 **/

#menu1 ul.menu li ul.sub-menu
{
    position: relative;
    display: none;
    margin: 0;
    padding: 0;
}

#menu1 ul.menu li:hover ul.sub-menu
{
    display: block;
    float: left;
    position: absolute;
    z-index: 200;
}

#menu1 ul.menu li ul.sub-menu > li:first-child
{
    margin: 5px 0 0 0;
}

#menu1 ul.menu li ul.sub-menu li a
{
    width: 140px;
    display: block;
}

#menu1 ul.menu li ul.sub-menu li:first-child > a
{
    border-top: 0;
}

#menu1 ul.menu li ul.sub-menu li:last-child > a
{
    border-bottom: 0;
}

/** Sub Menu - Tier 3 **/

#menu1 ul.menu li ul.sub-menu li ul
{
    position: relative;
    display: none;
    left: 100%;
}

#menu1 ul.menu li ul.sub-menu li ul li
{
    margin: 0 0 0 5px;
}

#menu1 ul.menu li ul.sub-menu li:hover ul
{
    display: block;
    float: left;
    position: absolute;
    top: 0;
}

#menu1 ul.menu li ul.sub-menu li ul li a
{
    width: 140px;
    display: block;
}

/** Colour Styles **/

#menu1 ul.menu li a
{
    background: #09F;
    color: #FFF;
}

#menu1 ul.menu > li > a
{
    border-left: 1px solid #26A8FF;
    border-right: 1px solid #0082D9;
}

#menu1 ul.menu li:hover > a, #menu1 ul.menu li a:hover
{
    color: #09F;
    background: #ddd;
}

#menu1 ul.menu li ul.sub-menu li a
{
    border-top: 1px solid #26A8FF;
    border-bottom: 1px solid #0082D9;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T07:33:51.037

删除您添加的自定义宽度：

```
#menu1 ul.menu li ul.sub-menu li a {
    width: 140px;
} 
```

现在的问题是`ul.sub-menu`'s 维度是基于它的`relative`parent `<li>`。这里的诀窍是用来`white-space: nowrap`将它推出它的父尺寸。然后用于`min-width`设置允许的最小宽度（或如您所说的“至少是父母的宽度”）。

```
#menu1 ul.menu li ul.sub-menu {
    min-width: 100%;
    white-space: nowrap;
} 
```

# c++ - 如何获得 winMain 的 hInstance？windows32编程

> ID：13774940
> 
> 赞同：0
> 
> 时间：2012-12-08T05:53:51.880
> 
> 标签：c++, c, winapi, dialog

如何在不使用全局变量的情况下获得 winMain 的 HWND hwnd 的 hInstance 应用程序句柄？我正在尝试将一个对话框发送到 LRESULT CALLBACK 以使其显示某些菜单项。或者是不同的设置方式。我已经用全局变量完成了，但我似乎无法弄清楚如何在我试过的 LRESULT CALLBACK 中设置它

```
HINSTANCE hInst = (HINSTANCE)GetWindowLongPtr(hwnd, GWL_HINSTANCE);
HWND hDlgbox = CreateDialog(hInst, MAKEINTRESOURCE(ID_TOOL_BOX_CREATE) ,hwnd, ToolProc); 
```

在 wndproc 中，但是当我尝试使用 popupmenu 项打开它时，它只显示一次，然后再也不会出现，并且在 wndproc 中以这种方式制作时，按钮和项目似乎没有在对话框中接收消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:38:56.173

所以我所做的是在win main

`HWND hdlg;`

将 wndextra 设置为 hwnd 的大小。

然后创建您的 dlg 框，无论您如何操作。

`SetWindowLongPtr(hwnd, 0, (LONG_PTR)hdlg);`

并在 winproc hwnd somenewDlg

`somenewDlg = (HWND)GetWindowLongPtr(hwnd, 0);`

# java - Java 优先队列错误

> ID：13774942
> 
> 赞同：0
> 
> 时间：2012-12-08T05:54:34.173
> 
> 标签：java, priority-queue

```
public LightsOutBFS(){
    //readtext
    int[] arr = new int[25];
    int[] state = new int[25];
    int[] soln = new int[25];

    boolean check=true;
    PriorityQueue<Node> q = new PriorityQueue<Node>();

    //Reading the text file
    try{
        FileInputStream fstream = new FileInputStream("switches.txt");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;
        int i = 0;

        //Read File Line By Line
        while ((strLine = br.readLine()) != null)   {
                //tokenize strline
                StringTokenizer st = new StringTokenizer(strLine, " \n"); 
                while(st.hasMoreTokens()) { 
                arr[i]=Integer.parseInt(st.nextToken());
                i++;
            }
        //Close the input stream
        }in.close();

    }catch (Exception e){//Catch exception if any
         System.err.println("Error: " + e.getMessage());
    }
    for(int i=0; i<25; i++){
        state[i]=0;
        soln[i]=0;
    }
    //loop that flips the adjacent side of switches turned on
    for(int i=0;i<25;i++){
        if(arr[i]==1)
            method.flip_adjacent(i,state);
    }

    //implement bfs here
    parent = new Node(state,0,soln,null);

    q.offer(parent);
    while(check){
        while(!q.isEmpty()){
            Node x = q.poll();
            int depth = x.depth;
            int posMoves = 25-depth;
            for(int i=0; i<posMoves;i++){
                current = generateNode(x.state,depth,x.soln,x);
                if(EtoNaYun(current.state))
                    check=false;//check state;
                q.offer(current);
            }
        }
    }

} 
```

我正在尝试使用类优先级队列并将其类型转换为节点对象，但我的代码显示此异常：java.lang.ClassCastException：节点无法转换为 java.lang.comparable。任何想法？将优先级队列类型转换为对象是错误的吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:11:08.073

从错误消息中可以清楚地看出您的程序失败了，因为`Node`您使用的类没有实现`Comparable<T>`接口。没有`Comparable<T>`接口`PriorityQueue`将不知道如何对元素（`Node`对象）进行排序。

**解决方案：**

使您的 Node 类实现`Comparable`接口并覆盖 public int compareTo(Obj o); 根据一些 id/priority 比较 Node（我不知道你的 Node 类的定义，但可能是 x.depth？）

```
public Node implements Comparable<Node> {
   ...
   @Override
   public int compareTo(Node o) {
    return this.priority > o.priority;
   }
} 
```

# iphone - UINavigationController popview 方法调用

> ID：13774944
> 
> 赞同：0
> 
> 时间：2012-12-08T05:54:44.107
> 
> 标签：iphone, ios, uinavigationcontroller, ios6

我有两个视图控制器。在第一个视图中，我在 ViewDidLoad 中添加了声音，它工作正常。当我从第二个视图控制器导航到第一个视图控制器时，声音没有播放。

我应该在哪里调用第一个视图控制器中的声音方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T05:57:26.950

您应该在 viewWillAppear 或 viewDidAppear 方法上播放声音，因为 viewDidLoad 只会在您加载视图时被调用一次，之后它将被放置在导航堆栈中。每次显示视图时都会调用 ViewWillAppear，因此在 viewWillAppear 或 viewDidAppear 中播放声音

# python - 如何使用 Python 3.3 检查文本文件中是否存在单词

> ID：13774946
> 
> 赞同：0
> 
> 时间：2012-12-08T05:54:45.937
> 
> 标签：python

该程序用于查找输入字符串的字谜。可能的字谜来自文本文件“dict.txt”。但是，我正在尝试检查输入的字符串是否不在字典中。如果输入的字符串不是字典，则程序不应该查找字谜，而只是打印一条消息，说明输入的字符串不在字典中。目前代码说我输入的所有字符串都不在字典中，这是不正确的。

```
def anagram(word,checkword):
    for letter in word:  
        if letter in checkword:  
            checkword = checkword.replace(letter, '') 
        else:  
            return False  
    return True  

def print_anagram_list():
    if len(word_list) == 2:
        print ('The anagrams for', inputted_word, 'are', (' and '.join(word_list)))
    elif len(word_list) > 2:
        print ('The anagrams for', inputted_word, 'are', (', '.join(word_list[:-1]))+ ' and ' +(word_list[-1]))
    elif len(word_list) == 0:
        print ('There are no anagrams for', inputted_word)
    elif len(word_list) == 1:
        print ('The only anagram for', inputted_word, 'is', (''.join(word_list)))        

def anagram_finder():
    for line in f:
        word = line.strip()
        if len(word)==len(inputted_word):
            if word == inputted_word:
                continue
            elif anagram(word, inputted_word):
                word_list.append(word)
    print_anagram_list()

def check(wordcheck):
    if wordcheck not in f:
        print('The word', wordcheck, 'is not in the dictionary')

while True:
    try:
        f = open('dict.txt', 'r')
        word_list=[]
        inputted_word = input('Your word? ').lower()
        check(inputted_word)
        anagram_finder()
    except EOFError:
        break
    except KeyboardInterrupt:
        break
    f.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:58:05.107

事先将所有单词读入列表：

```
with open('dict.txt', 'r') as handle:
    word_list = []

    for line in handle:
        word_list.append(line) 
```

在您的代码中替换`for word in f`为`for word in word_list`，因为现在您拥有文件中所有行的列表。

现在，您可以检查一个单词是否在列表中：

```
def check(wordcheck):
    if wordcheck not in word_list:
        print('The word', wordcheck, 'is not in the dictionary') 
```

该`with`语法使您可以干净地打开文件，而不必稍后再关闭它。退出`with`语句范围后，文件会自动为您关闭。

* * *

此外，您可以稍微简化字谜代码：

```
def anagram(word, checkword):
    return sorted(word) == sorted(checkword) 
```

# php - 通过ajax传递数据安全吗？

> ID：13774947
> 
> 赞同：0
> 
> 时间：2012-12-08T05:54:57.110
> 
> 标签：php, ajax, form-data

我创建了脚本，该脚本将使用此命令计算某些特定 div 的子 div

```
$('#content').children().size() 
```

通过这个计数，如果这个计数是 12，我知道从 mysql 获取 12 到 18。使用 firebug 我可以找到这个计数，它将发布到我的脚本中，我想有什么办法可以增加这个大小以从我的获取更多详细信息以某种方式数据库？从ajax传递此类数据是否安全？

2-有人可以以任何方式发布数据或模拟发布吗？例如模拟将以这种形式发布的数据`data=2&foo=3&bar=4`并在服务器上作弊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:37:45.493

检查此[链接](https://security.stackexchange.com/questions/2099/how-to-do-ajax-securely)，它可能很有用

> *   检查身份验证和授权
> *   对导出到浏览器的数据进行加密或添加加盐哈希检查以重新提交
> *   将请求中收到的任何数据视为潜在危险
> *   在适当的地方使用 HTTPS
> *   使用正确的方法转换数据离开您的 PHP
> *   使用基于其来源的正确方法转换输入脚本的数据（例如 json_decode）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:22:41.610

根据我的评论，再次作为答案。

“安全”是相对的。基本上 AJAX 只不过是一个基于 JavaScript 的普通 HTTP 请求。所以它并不比那样的安全。为了使其“安全”，您可以使用 HTTPS 来加密连接。这样，你应该能够防止注射和东西。关于作弊......如果一个人真的想，他可以。您唯一能做的就是仔细检查参数，从而发现异常情况。也许添加一个隐藏的校验和，它只允许特定的选项。

# php - 如何在 php 中导出 csv 文件，charset utf-8 而不是 utf-8 而没有 BOM？

> ID：13774948
> 
> 赞同：4
> 
> 时间：2012-12-08T05:55:03.187
> 
> 标签：php, csv, utf-8, character-encoding

> **可能重复：**
> [在 PHP 中使用 BOM 将字符串编码为 UTF-8](https://stackoverflow.com/questions/5601904/encoding-a-string-as-utf-8-with-bom-in-php)

我可以使用此代码从 php 导出 csv 文件

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv');

$output = fopen('php://output', 'w'); 
```

但是这段代码使用字符集创建文件，`utf-8 without BOM`但我需要字符集`utf-8`。
是解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T14:23:19.620

这就是我的做法。

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream'); 
header('Content-Disposition: attachment; filename=file.csv'));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
echo "\xEF\xBB\xBF"; // UTF-8 BOM
echo $csv_file_content;
exit(); 
```

当然，你可以`echo $csv_file_content`用你需要的东西代替。

# javascript - 输入时将输入的表单数据更改为 X

> ID：13774951
> 
> 赞同：0
> 
> 时间：2012-12-08T05:55:26.980
> 
> 标签：javascript, forms

谁能指出我正确的方向来完成以下任务：

当用户在 html 表单中输入敏感数据时，比如他们的 SSN 或银行路由号码，我将如何为输入的每个字符显示 X？

换句话说，如果用户键入 888-123-4456，我如何在用户键入数据时将输入字段编码为显示 xxx-xxx-xxxx？

我假设它的客户端会使用javascript吗？

任何帮助将不胜感激！杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:57:34.483

正如评论所说，为什么不使用

`<input type="password">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:58:42.497

人家在推荐`<input type='password'>`，*会*遮挡人物的显示，满足你提问的要求。

但是，如果您从客户那里获取敏感信息，请确保在通过网络发送之前对所有这些数据进行**加密，最有可能的是在您的页面上要求 https。**

# css - 在 CSS 中制作锯齿状三角形边框

> ID：13774952
> 
> 赞同：20
> 
> 时间：2012-12-08T05:55:33.033
> 
> 标签：css, css-shapes

我在 Photoshop 中有一个像这样边缘的形状：

![图片](../Images/d1080b09f2d795231388e504c9e0db89.png)

是否可以使用 CSS 将重复的三角形作为边框？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-08T13:15:22.267

您可以使用渐变来创建锯齿形图案背景，使用`::after`伪元素将其应用为边框。

```
.header{
    color: white;
    background-color: #2B3A48;
    text-align: center;
}
.header::after {
    content: " ";
    display: block;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 36px;
    background: linear-gradient(#2B3A48 0%, transparent 0%), linear-gradient(135deg, #272220 33.33%, transparent 33.33%) 0 0%, #272220 linear-gradient(45deg, #272220 33.33%, #2B3A48 33.33%) 0 0%;
    background-repeat: repeat-x;
    background-size: 0px 100%, 9px 27px, 9px 27px;
}
```

```
<div class="header"><h1>This is a header</h1></div>
```

来源：[带有纹理背景的 CSS 锯齿形边框](https://stackoverflow.com/q/12031328/1756941)

JSFiddle：http: [//jsfiddle.net/kA4zK/](http://jsfiddle.net/kA4zK/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-20T07:30:09.677

对于未来的观众，我发现[@extramaster 答案的](https://stackoverflow.com/a/13777800/1599617)这种改编更简单一些。

它本质上是相同的，但它使用了更少的背景渐变，并允许支持对象（`.navbar`在我的标记中）显示出来，而不是将第二种颜色硬编码到之字形中。

**JsFiddle：http:** [//jsfiddle.net/861gjx0b/2/](http://jsfiddle.net/861gjx0b/2/)

```
.header {
  position: relative;
  color: white;
  background-color: #2B3A48;
  text-align: center;
}

.navbar {
  background: #272220;
  height: 20px;
}

.header:after {
  content: "";
  position: absolute;
  display: block;
  height: 10px;
  bottom: -10px;
  /* -height */
  left: 0;
  right: 0;
  /* TODO Add browser prefixes */
  background: linear-gradient( 45deg, transparent 33.333%, #2B3A48 33.333%, #2B3A48 66.667%, transparent 66.667%), linear-gradient( -45deg, transparent 33.333%, #2B3A48 33.333%, #2B3A48 66.667%, transparent 66.667%);
  background-size: 8px 20px;
  /* toothSize doubleHeight */
  background-position: 0 -10px;
  /* horizontalOffset -height */
}
```

```
<div class="header">
  <h1>This is a header</h1>
</div>
<nav class="navbar"></nav>
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-12T14:44:55.683

就个人而言，我认为剪辑路径比复杂的背景渐变更容易使用/理解。

```
body {
  font-family:Roboto,'Open Sans',Helvetica,sans-serif;
}
.container {
  background:#ddd;
  margin:0 auto; 
  max-width:800px;
  padding:30px;
}
h1:first-child {margin:0;}

.jagged-bottom {
  position:relative;
}
.jagged-bottom:after {
  background:#ddd;
  content:"";
  height:2vw;
  position:absolute;
  top:100%;
  left:0;
  right:0;
  clip-path:polygon(
     0 0, 2.5% 100%, 5% 0,  7.5% 100%, 
   10% 0,12.5% 100%,15% 0, 17.5% 100%, 
   20% 0,22.5% 100%,25% 0, 27.5% 100%, 
   30% 0,32.5% 100%,35% 0, 37.5% 100%, 
   40% 0,42.5% 100%,45% 0, 47.5% 100%, 
   50% 0,52.5% 100%,55% 0, 57.5% 100%, 
   60% 0,62.5% 100%,65% 0, 67.5% 100%, 
   70% 0,72.5% 100%,75% 0, 77.5% 100%, 
   80% 0,82.5% 100%,85% 0, 87.5% 100%, 
   90% 0,92.5% 100%,95% 0, 97.5% 100%, 100% 0);
}
```

```
<div class="container jagged-bottom">
  <h1>Looks Like A Receipt</h1>
  <p>Simply adjust the clip path on the pseudo-element if you want more or fewer spikes, and the height if you want them to be taller or shorter.</p>
</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T10:45:30.737

CSS3 中有一个border-image 属性。也许你可以用你想要的方式解决它。更多在这里：

[https://developer.mozilla.org/en-US/docs/Web/CSS/border-image](https://developer.mozilla.org/en-US/docs/Web/CSS/border-image)

或者在这里

[https://www.w3schools.com/cssref/css3_pr_border-image.asp](https://www.w3schools.com/cssref/css3_pr_border-image.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T08:41:17.593

你可以很容易地使用 CSS 创建一个[单独的三角形](http://css-tricks.com/snippets/css/css-triangle/)（只需调整边框属性）。为了使它起作用，您需要自己生成相当多的标记。我建议不要使用这种方法。

相反，您最好使用包含单个三角形（最好是透明的 .png）的单个图像，然后使用`background-image`and `background-repeat`( `repeat-x`) 属性将其绑定到 div（您的“边框”）。

不幸的是，目前还没有一种直接的方法可以使用纯 CSS 来实现这一点。

# php - 需要phpseclib函数帮助

> ID：13774953
> 
> 赞同：0
> 
> 时间：2012-12-08T05:56:05.800
> 
> 标签：php, phpseclib

我要计算`ciphertext=m(pow)e mod(n)`

我在 phpseclib 中看到了这个例子：

```
<?php
include('Math/BigInteger.php');

$a = new Math_BigInteger(5);
$b = new Math_BigInteger(3);
$c = new Math_BigInteger(4);

echo $a->powMod($b, $c); // outputs 1 (eg. 125 % (4 * 31))
?> 
```

谁能解释一下`echo $a->powMod($b, $c);`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:16:39.950

从[源代码](http://phpseclib.svn.sourceforge.net/viewvc/phpseclib/trunk/phpseclib/Math/BigInteger.php?revision=223&view=markup#l1535)，`powMod`调用`modPow`，它在最顶部说，

> ```
> * Performs modular exponentiation. 
> ```

维基百科说[模幂](http://en.wikipedia.org/wiki/Modular_exponentiation)是：

> 一种在模上执行的幂运算。它在计算机科学中特别有用，尤其是在密码学领域。“模幂”计算当正整数`b`（底数）的`e`- 次方（指数）`b`^(`e`)除以正整数`m`（称为模数）时的余数。在符号中，这是，给定 base `b`、 exponent`e`和 modules `m`，模幂`c`是：`c = b`^(`e`)`(mod m)`
> 
> 例如，给定`b = 5`、`e = 3`和`m = 13`，解`c`是 5 ³除以 13 的余数，即 125 / 13 或 8 的余数。

换句话说，它是用于您正在做的事情的正确功能。

顺便说一句，这太*疯狂*了。 *永远不要*推出自己的加密货币。 **从不**。

# java - Java - 关闭套接字会产生不同的结果

> ID：13774958
> 
> 赞同：1
> 
> 时间：2012-12-08T05:56:48.943
> 
> 标签：java, sockets, networking, tcp, socketexception

在另一个套接字关闭时尝试从套接字读取时，我得到了不同的结果。

我有两个插座 A 和 B。

1）B向A发送了一些数据--> A已读取数据--> A关闭-->当B尝试从A读取一些数据时，它得到-1（或EOF）。

2)B 向 A 发送了一些数据 --> A 在读取数据之前关闭 --> 现在 B 尝试从 A 读取，抛出异常（java.net.SocketException "软件导致连接中止。"）

请原谅我，如果你不能理解我的问题。请看代码

服务器.java

```
import java.io.*;
import java.net.*;

class SocketCloser extends Thread
{
    private Socket c;
    public SocketCloser(Socket c) {
        this.c = c;
    }

    public void run()  {

        try{
            this.c.close();
        } catch (Exception e) {}
    }
}

public class Server
{
    public static void main(String argv[]) throws Exception {
        ServerSocket listen = new ServerSocket(6789);

        Socket socket = listen.accept();
        SocketCloser sc = new SocketCloser(socket);
        InputStream is = socket.getInputStream();
        // uncomment below line to get "Software caused connection abort" on client
        //sc.start();
        try {
            Thread.sleep(1000);
            int i = is.read();
            System.out.println("read returned: " + i);
            socket.close();
        } catch (Exception e) {
            System.out.println(e.toString() + " thrown");
        }
    }
} 
```

客户端.java

```
import java.io.*;
import java.net.*;

public class Client
{
    public static void main(String argv[])
    {
        Socket cSocket;
        try {
            cSocket = new Socket("localhost", 6789);
            InputStream is = cSocket.getInputStream();
            OutputStream os = cSocket.getOutputStream();
            Thread.sleep(1000);
            os.write(200);
            Thread.sleep(1000);
            int i = is.read();
            System.out.println("read returned: " + i);
            cSocket.close();
        } catch (Exception e) {
            System.out.println(e.toString() + " thrown");
        }
    }
} 
```

有人可以帮我弄清楚为什么在一种情况下存在异常而在另一种情况下存在-1。有趣的是，在 linux 上，这两种情况都导致了 -1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:50:20.810

1）因为B建立了连接，所以A进入CLOSE_WAIT。它将处于该状态，直到 B 关闭连接。没有可读取的内容，因此对 B 的 InputStream 的 read() 调用返回 -1。

2) A 在接受调用中被阻塞。另一个线程试图关闭套接字，但它不能，因为接受正在阻塞它。当 B 连接时，接受解除阻塞并且套接字完全关闭。当 B 尝试读取时，套接字不再存在，因此您得到了异常。

我正在简化一点，但这就是它的要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:47:37.143

> 1）B向A发送了一些数据--> A已读取数据--> A关闭-->当B尝试从A读取一些数据时，它得到-1（或EOF）。

我同意。你期待什么？这是预期的行为。

> 2)B 向 A 发送了一些数据 --> A 在读取数据之前关闭 --> 现在 B 尝试从 A 读取，抛出异常（java.net.SocketException "软件导致连接中止。"）

我同意。这是这种不正确情况下的预期行为之一。你期待什么？

> 请原谅我，如果你不能理解我的问题。

这里没有问题可以理解。你没有问过问题。您关闭套接字而不发送任何数据，对等方获得 EOS 而不接收任何数据。当对等方正在发送并且对等方收到异常时，您关闭了一个套接字。系统按设计工作。

# database - 尝试在 Django 中制作一个小型库存应用程序

> ID：13774959
> 
> 赞同：1
> 
> 时间：2012-12-08T05:56:55.277
> 
> 标签：database, django, database-design, database-schema

我正在尝试在 Django 应用程序中制作一个小型库存应用程序。我希望能够看到手头的库存，它在哪里（在两个地方之间和一起），购买以增加库存，并出售以减少库存。跟踪销售会很好。总而言之，我想做大约五件事。为了跟踪位置，我想将仓库 1 列为 1，将仓库 2 列为 2，并且可以查询 WHERE 字段 = 1，但如果我在两个地方有相同的产品，我会遇到问题。我也不知道处理它的最佳方法。阅读这里的帖子，我看到有些人说只跟踪销售，并将它们汇总在一个平面数据库中，其他人从数据库中删除，但这会导致差异。到目前为止，这是我的model.py，只是在这里真正刺入黑暗，寻找一些指导。

```
from django.db import models

class Product(models.Model):
    product_ID = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=100)
    type = (
        ('WHT' , 'White Wine'),
        ('RED' , 'Red Wine'),
        ('SPRT', 'Spirits'),
        ('BR'  , 'Beer'),
    )
    size = (
        ('12' , '12oz'),
        ('16'  , '16oz'),
        ('375' , '375mL'),
        ('750' , '750mL'),
        ('1' , '1L'),
    )
    amount_per_case = models.IntegerField()
    warehouse = (
            (1 , 'One'),
            (2 , 'Two'),
    )
    on_hand = models.IntegerField() 

class Store(models.Model):
    store_ID = models.IntegerField(primary_key=True)
    store_name = models.CharField()
    store_type = (
            ('Supermarket', 'Supermarket'),
            ('Liquor Store', 'Liquor Store'),
    )
    store_address = models.CharField()
    store_phone = models.CharField()
    store_contact = models.CharField()

class Vendor(models.Model):
    vendor_ID = models.IntegerField(primary_key=True)
    vendor_name = models.CharField()
    vendor_address = models.CharField()
    vendor_phone = models.CharField()
    vendor_contact = models.CharField()

class Sale(models.Model):
    sale_date = models.DateField()
    sale_product = models.ForeignKey(Product) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:44:09.187

您应该创建一个 Warehouse 模型并在 Product 和 Warehouse 之间创建多对多关系，使用`through`选项指定另一个模型来保存称为 WarehouseProduct 之类的关系详细信息，您可以在其中存储计数。请参阅[文档的这一部分](https://docs.djangoproject.com/en/dev/topics/db/models/#many-to-many-relationships)和以下部分。

PS 您可以做很多相同的事情来将销售与特定商店相关联，在我看来，这也是您可能感兴趣的事情。

# c - MPI 杀死不需要的进程

> ID：13774968
> 
> 赞同：3
> 
> 时间：2012-12-08T05:57:41.300
> 
> 标签：c, mpi

我将 OpenMPI 与 C 绑定一起使用。在我的代码中，有一定数量的进程。如果执行 MPI 时打开的进程多于所需进程，我希望终止或终止额外的进程。我怎样才能做到这一点？

当我尝试以我能想到的几种方式执行此操作时，出现以下错误：

```
mpirun has exited due to process rank 3 with PID 24388 on
node pc15-373 exiting without calling "finalize". This may
have caused other processes in the application to be
terminated by signals sent by mpirun (as reported here). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T12:05:52.797

除了以下内容外，我没有太多要添加到高性能标记已经编写的内容。您实际上可以调用`MPI_FINALIZE`和退出过多的进程，但您必须意识到这将破坏世界通信器上所有进一步的集体操作`MPI_COMM_WORLD`- 它们中的大多数根本不会完成（`MPI_BARRIER`作为肯定会挂起的那个） . 为了防止这种情况，您可能需要首先创建一个新的通信器，排除所有不必要的进程：

```
int rank, size;    
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

// Obtain the group of processes in the world communicator
MPI_Group world_group;
MPI_Comm_group(MPI_COMM_WORLD, &world_group);

// Remove all unnecessary ranks
MPI_Group new_group;
int ranges[3] = { process_limit, size-1, 1 };
MPI_Group_range_excl(world_group, 1, ranges, &new_group);

// Create a new communicator
MPI_Comm newworld;
MPI_Comm_create(MPI_COMM_WORLD, new_group, &newworld);

if (newworld == MPI_COMM_NULL)
{
   // Bye bye cruel world
   MPI_Finalize();
   exit(0);
}

// From now on use newworld instead of MPI_COMM_WORLD 
```

此代码首先获取进程组，`MPI_COMM_WORLD`然后创建一个新组，该组从`process_limit`以后排除所有进程。然后它从新的进程组创建一个新的通信器。该`MPI_COMM_CREATE`操作将`MPI_COMM_NULL`在不属于新组的这些进程中返回，并且此事实用于终止此类进程。鉴于在这一点之后，一些进程将从 中“消失” `MPI_COMM_WORLD`，它不再可用于广播、屏障等集体操作，而`newworld`应改为使用。

此外，正如 Mark 所指出的，在某些架构上，即使在从`main`. 例如，在 Blue Gene、Cray 或任何其他使用硬件分区来管理 MPI 作业的系统上，在整个 MPI 作业完成之前不会释放额外的资源。如果程序在资源管理器（例如 SGE、LSF、Torque、PBS、SLURM 等）控制下的集群或其他系统上运行，也会出现这种情况。

我对这种情况的通常做法是非常务实的：

```
int size, rank;

MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);
if (size != process_limit)
{
   if (rank == 0)
      printf("Please run this program with %d MPI processes\n", process_limit);
   MPI_Finalize();
   exit(1);
} 
```

您也可以使用`MPI_Abort(MPI_COMM_WORLD, 0);`而不是`MPI_Finalize()`惹恼用户:)

您还可以使用 MPI 的进程生成功能，但这会使代码更加复杂，因为您必须处理相互通信器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T11:11:58.867

这可能是一个扩展评论而不是答案，但在 Hristo Iliev 出现之前，这可能会有所帮助......

我不确定你能做你想做的事。我相信，如果您尝试使用非 MPI 功能（例如 Linux `kill`）终止 MPI 进程，则 MPI 运行时将崩溃，因为其中一个进程意外退出。您报告的错误消息往往支持我的想法。

您可以调用`MPI_FINALIZE`不需要的进程，但请注意 MPI 标准不要求底层操作系统进程（或线程或其他）实际停止。调用`MPI_FINALIZE`完成挂起的 MPI 操作并防止进一步调用该进程上的（几乎所有）MPI 函数。这也可能不是您想要的。我想您可能会很幸运`kill`地完成了一个已经完成的进程，MPI 运行时可能不会崩溃；这不是我曾经尝试过的东西。

您可以采用不同的方法并使用 MPI 的功能来*生成*新进程；在一个进程上启动程序，然后生成程序使用的调用数`MPI_SPAWN_PROCESS`及其关系。除了 MPI 例程之外，您还需要调查生成如何与平台的进程管理进行交互。您可能会发现您的系统未配置为允许通过运行 MPI 作业进行动态进程管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-25T08:00:23.310

简单地

> 杀死 mpiexec.exe

在 Windows 上，所有连接的进程（mpiexec.exe、PMI proxy.exe、IMB MPI1.exe）将被终止。

# ruby-on-rails-3 - rack-rewrite 重定向，重复内容问题 - SEO Rails Heroku

> ID：13774975
> 
> 赞同：0
> 
> 时间：2012-12-08T05:58:25.180
> 
> 标签：ruby-on-rails-3, heroku, seo, middleware, http-status-code-302

我正在尝试使我的网站 SEO 友好，因此我正在实施 rack-rewrite 以摆脱 302 临时重定向和重复内容问题。

通过 ragepank.com 运行我的网站给了我这个：

2 个页面返回 200 响应。这表明存在重复内容问题的可能性。理想情况下，只有[http://www.example.com](http://www.example.com)或[http://example.com](http://example.com)应该返回 200 响应。

```
http://www.example.com returns a 200 (OK) response. PR N/A
http://example.com returns a 200 (OK) response. PR N/A 
```

我的 gem 文件中有 rack-rewrite gem，在 config/application.rb 中有以下代码

```
config.middleware.insert_before(Rack::Lock, Rack::Rewrite) do
      r301 %r{^/(.*)/$}, '/$1'
    end 
```

下面道格的博客帮助我到达了那里： http: [//nanceskitchen.com/2010/05/19/seo-heroku-ruby-on-rails-and-removing-those-darn-trailing-slashes/](http://nanceskitchen.com/2010/05/19/seo-heroku-ruby-on-rails-and-removing-those-darn-trailing-slashes/)

你们知道我怎样才能摆脱重复的内容问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:26:21.790

你最好的选择实际上是最简单的。从您的站点地图中删除它和/或将其作为受限页面包含在内，这样爬虫就无法访问它。当客户在他们不想删除的页面上有重复的内容时，我们会这样做。

# jquery - 没有通过json获取Web服务中的数据

> ID：13774976
> 
> 赞同：1
> 
> 时间：2012-12-08T05:58:29.643
> 
> 标签：jquery, html, web-services

```
 var questionOptionArray=[{"questionCode":"1111111177","optionCode":"1111111147"},                 {"questionCode":"1111111103","optionCode":"test"},{"questionCode":"1111111104","optionCode":"1111111212"},{"questionCode":"1111111105","optionCode":"1111111215"},{"questionCode":"1111111106","optionCode":"test2"}]
  var jsonobj = JSON.stringify(questionOptionArray);
            alert(jsonobj);
            $.ajax({
                type: "POST",
                url: "Services/Quiz.asmx/InsertUserQuiz",
                data: JSON.stringify({ questionOptionArray: questionOptionArray }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data) { alert(data); },
                failure: OnError
            });

        } 
```

在 quiz.asmx 我的代码：

```
public class Quiz : System.Web.Services.WebService
    {
        public class optionDetail
        {
            string questionCode { get; set; }
            string optionCode { get; set; }
        }

        [WebMethod]
        public string InsertUserQuiz(List<optionDetail> questionOptionArray)
        {
            var count = questionOptionArray.Count();
            return "1";
        }
    } 
```

我得到了有五个计数的 questionOptionArray 的空值。，如何在 Web 服务中获取 questionCode、optionCode 的值，以便我可以将它们插入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:07:54.253

由于您的方法需要一个`optionDetail`尝试发送这些对象数组的列表。

```
 var questionOptionArray=[{"questionCode":"1111111177","optionCode":"1111111147"},{"questionCode":"1111111103","optionCode":"test"},{"questionCode":"1111111104","optionCode":"1111111212"},{"questionCode":"1111111105","optionCode":"1111111215"},{"questionCode":"1111111106","optionCode":"test2"}];
  var jsonobj = JSON.stringify(questionOptionArray);
            alert(jsonobj);
            $.ajax({
                type: "POST",
                url: "Services/Quiz.asmx/InsertUserQuiz",
                data: jsonobj,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data) { alert(data); },
                failure: OnError
            });

        } 
```

# php - 在php中对mysql中的单独计算结果进行排序

> ID：13774977
> 
> 赞同：1
> 
> 时间：2012-12-08T05:58:29.850
> 
> 标签：php, mysql

目前对于足球联赛，排名是用他们自己的表格计算的，所以我必须手动输入/编辑胜利、失败、平局、PF 和 PA。我想根据记录分数的日程表的结果动态生成它。

所以我有以下丑陋的代码：

```
 $teamidsql = mysql_query("select team_id, count(team_id) as numteams from team WHERE league_id=$currentleague AND team_div='$div'");
$teamid = mysql_result($teamidsql,0,"team_id");
$numteams = mysql_result($teamidsql,0,"numteams");
$endteams = $teamid+$numteams;  
while($teamid < $endteams)
{
$result2=mysql_query("select team_name, team_div,
count(case when (schedule_team1_id = $teamid and schedule_team1_score > schedule_team2_score) or (schedule_team2_id = $teamid and schedule_team2_score > schedule_team1_score) then 1 else NULL end) as wins,
count(case when (schedule_team1_id = $teamid and schedule_team1_score < schedule_team2_score) or (schedule_team2_id = $teamid and schedule_team2_score < schedule_team1_score) then 1 else NULL end) as losses,
count(case when schedule_team1_score = schedule_team2_score then 1 else NULL end) as ties,
sum(case when schedule_team1_id = $teamid then schedule_team1_score else schedule_team2_score end) as pf,
sum(case when schedule_team1_id <> $teamid then schedule_team1_score else schedule_team2_score end) as pa
from schedule, team
where team_id = $teamid AND team.team_div='$div' AND schedule_week >= 1 and schedule_week <= 13 and schedule.league_id = $currentleague and (schedule_team1_id = $teamid or schedule_team2_id = $teamid)") or die(mysql_error()); 

    $t_n = mysql_result($result2,0,"team_name");
    $t_w = mysql_result($result2,0,"wins");
    $t_l = mysql_result($result2,0,"losses");
    $t_t = mysql_result($result2,0,"ties");
    $t_pf = mysql_result($result2,0,"pf");
    $t_pa = mysql_result($result2,0,"pa"); 

    echo "<tr>";
    echo "<td>$t_n</td><td>$t_w</td><td>$t_l</td><td>$t_t</td><td>$t_pf</td><td>$t_pa</td>";
    echo "</tr>";

    $teamid++;
} 
```

当前生成以下html：

[http://i.stack.imgur.com/sBVfM.png](http://i.stack.imgur.com/sBVfM.png)

我的问题是如何排序？旧表很简单，但我不知道如何获取我正在计算的这些个人数据，然后将其按赢、输、平、pf 和 pa 排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:42:10.010

datatables 是解决这个问题的最快方法。给表格一个类，在onload中调用datatabes，它会根据html的内容呈现javascript排序。

[http://datatables.net/](http://datatables.net/)

# java - Heroku/Jetty 上的 Java

> ID：13774981
> 
> 赞同：4
> 
> 时间：2012-12-08T05:59:01.597
> 
> 标签：java, jdbc, heroku

我正在**Heroku + Jetty**堆栈上开发基于数据库的应用程序。我正在使用**Heroku Postgres**作为数据库。我有一个连接到数据库并返回连接的数据库实用程序类。但是，我不断收到以下错误：

如果我运行以下代码，我会收到**“找不到适合 jdbc:postgresql://ec2-54-243-131-210.compute-1.amazonaws.com/d4s7l8b2vf1o8c 的驱动程序”**错误。

```
 URI dbUri = new URI(System.getenv("DATABASE_URL"));
            String username = dbUri.getUserInfo().split(":")[0];
            String password = dbUri.getUserInfo().split(":")[1];
            String dbUrl = "jdbc:postgresql://" + dbUri.getHost() + dbUri.getPath();
            System.err.println("***** dbUrl IS CREATED ******");
            con = DriverManager.getConnection(dbUrl, username, password);
            System.err.println("***** CONNECTION IS CREATED ******"); 
```

我遇到了一些建议添加以下代码来加载驱动程序的评论

```
Class.forName("org.postgresql.Driver"); 
```

如果我这样做，我会在该行之后得到一个**空指针异常。**

如果有人之前遇到过类似的挑战，请帮助识别错误。提前致谢。

问候， 维内特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-18T15:39:44.350

感谢您的跟进，但我刚刚解决了这个问题。

pom 文件中缺少依赖项。

```
<dependency> 
<groupId>postgresql</groupId> 
<artifactId>postgresql</artifactId> 
<version>9.0-801.jdbc4</version> 
</dependency> 
```

谢谢。

# php - 按年份获取记录

> ID：13774984
> 
> 赞同：3
> 
> 时间：2012-12-08T05:59:34.767
> 
> 标签：php, mysql, date

我有一个带有文本字段的表单，用户将只提供年份，MySQL 数据应返回给定年份的所有数据。但在 MySQL 数据库中，以格式`date`给出。`date(yyyy-mm-dd)`

任何人都可以建议将获取该特定年份的所有数据的 SQL 查询吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T06:00:49.397

试试这个，使用 MySQL`YEAR`功能。

```
SELECT *
FROM tableName
WHERE YEAR(dateCOlumn) = 2012 
```

因此在给定的示例中，服务器将选择 year 等于 2012 的所有记录。

**更新 1**

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/7c747/2)

# [年](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:03:34.123

尝试

```
 select * from tablename where year(columname) = 'whatever the year is'; 

```

希望这可以帮助。

# matlab - Matlab中如何使尺寸一致？

> ID：13774989
> 
> 赞同：2
> 
> 时间：2012-12-08T06:00:56.480
> 
> 标签：matlab, error-handling

我刚开始学习Matlab，如果有人能澄清我的困惑，我将不胜感激......

我正在尝试使用 Lax-Wendroff 方案求解非均匀传输方程，代码如下。matlab告诉我最后一行代码有错误(U(j+1,2:N)=(1/2).*sigma...)，即1\. Error using *; 2\. 内矩阵尺寸必须一致。

我知道 sigma 和 U 的维度不兼容（作为矩阵），但我不知道（和经验）如何解决这个问题......公式没有问题，但我真的很难处理代码。

```
 a = -10;
    b = 10;
    delta_x = (b-a)/N;
    x = a:delta_x:b;

    tfinal = 2;
    delta_t = tfinal/M;
    t = 0:delta_t:tfinal;

    c = 3-2.* exp(-(1/4).*(x.^2)) ;

    sigma = c.*(delta_t/delta_x);

    U=zeros(M+1,N+1);
    U(1,:)=f(x);

    for j=1:M
    U(j+1,2:N)=(1/2).*sigma.*(sigma-1).*U(j,3:N+1)-((sigma).^2-1).*U(j,2:N)+(1/2).*sigma.*(sigma+1)*U(j,1:N-1);
    end 
```

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:00:10.933

我已将每个变量的大小添加为注释，并对代码进行了一些格式化。它仍然与您发布的代码相同。

```
a = -10;
b = 10;
delta_x = (b-a)/N;
x = a:delta_x:b;                   % x: 1 x ( N + 1 )

tfinal = 2;
delta_t = tfinal/M;
t = 0:delta_t:tfinal;              % t: 1 x ( M + 1 )

c = 3-2.* exp(-(1/4).*(x.^2)) ;    % c: 1 x ( N + 1 )

sigma = c.*(delta_t/delta_x);      % sigma: 1 x ( N + 1 )

U=zeros(M+1,N+1);                  % U: ( M + 1 ) x ( N + 1 )
U(1,:)=f(x);                       % Assuming f(x): 1 x ( N + 1 ), otherwise you will get an error here.

for j=1:M
    U(j+1,2:N) = (1/2).*sigma.*(sigma-1).*U(j,3:N+1) ...
                -((sigma.^2)-1).*U(j,2:N) ...
                +(1/2).*sigma.*(sigma+1)*U(j,1:N-1);
end 
```

您会注意到，在`for`-loop 的第一行中，您将`sigma`(of size `1 x ( N + 1 )`) 与`U(j, 3:N+1)`(size: `1 x (N - 1)`) 相乘。这行不通。您对接下来的两行`for`-loop 执行相同的操作，其中 的大小`U(j,...)`与 的大小不同`sigma`。

我不知道实际的方程式是什么样的，所以不能肯定地说你需要如何纠正尺寸不匹配。但是您可以尝试用`sigma`say`sigma(3:N+1)`或等效的方法替换以获得正确的尺寸。

# perl - 在 perl 脚本中将可变数量的参数传递给函数

> ID：13774996
> 
> 赞同：1
> 
> 时间：2012-12-08T06:01:46.700
> 
> 标签：perl

我正在使用一个 perl 程序，该程序将具有可变数量的参数/参数。基本上，我的 perl 程序是通过以下方式运行的：

```
perl progam.pl hello, I am a simple statement 
```

该程序做了一些零碎的事情，但这对于我在这里要问的问题并不重要。我想要对这`"hello, I am a simple statement"`部分做的是将其传递给 perl 脚本中的 echo 函数。

虽然它应该适用于任意数量的参数/参数。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T06:41:58.737

当你执行 shell 命令时

```
perl progam.pl hello, I am a simple statement 
```

它启动`perl`并将这 7 个参数传递给它：

*   `progam.pl`
*   `hello,`
*   `I`
*   `am`
*   `a`
*   `simple`
*   `statement`

`perl`反过来，将`progam.pl`在填充`@ARGV`其他参数后执行。因此，你可以这样做

```
system("echo", join(" ", @ARGV)); 
```

或者当然，这正是这样`echo`做的，所以你可以简单地做

```
system("echo", @ARGV); 
```

或者你的意思是`print`当你说的时候`echo`（因为执行它没有多大意义`echo`）？

```
print(join(" ", @ARGV), "\n"); 
```

请注意，如果您将文本作为单个参数传递会更好。

```
perl progam.pl 'hello, I am a simple statement' 
```

例如，如果某些单词之间有多个空格，则您的方法将失败。

# templates - 是否可以在不重新加载页面的情况下呈现 ejs 模板？

> ID：13774999
> 
> 赞同：1
> 
> 时间：2012-12-08T06:02:36.130
> 
> 标签：templates, express, socket.io, ejs

我正在编写一个游戏服务器，玩家进入游戏室，然后与另一个玩家配对。此时我想在不重新加载页面的情况下显示板，所以我不必重新启动套接字。

在 app.js 文件中

```
socket.on('challangeExcepted', function(playerToMatch){
        if(socket.player.id == playerToMatch.id){ 
            ejs.render('board', {
                units: 19,
                length: 600
            });
        }
}); 
```

但是我似乎无法让它发挥作用。我做错了什么，还是这不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:08:51.823

据我所知，要完全更改 html 需要重新加载页面。但是，您可以使用**更新**模板的动态部分`res.update('page_element', '/template.ejs', '{whatever: 'you want to update'});`

这是文档 [http://code.google.com/p/embeddedjavascript/wiki/Templates](http://code.google.com/p/embeddedjavascript/wiki/Templates)

我最终只使用backbone.js 来解决我的问题，它允许对html 进行大量更改而无需重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T04:17:05.157

尝试 pjax：

它是一种仅重新加载页面特定部分中的 html 并使用 pushState 更改地址的技术。

[https://npmjs.org/package/express-pjax](https://npmjs.org/package/express-pjax)

[https://github.com/defunkt/jquery-pjax](https://github.com/defunkt/jquery-pjax)

[http://37signals.com/svn/posts/3112-how-basecamp-next-got-to-be-so-damn-fast-without-using-much-client-side-ui](http://37signals.com/svn/posts/3112-how-basecamp-next-got-to-be-so-damn-fast-without-using-much-client-side-ui)